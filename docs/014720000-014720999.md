# StackOverflow 问答 14720000-14720999

# php - 如何在图片下添加描述？

> ID：14720001
> 
> 赞同：1
> 
> 时间：2013-02-06T01:19:35.150
> 
> 标签：php, mysql, image

我已经制作了一个包含 blob 图像和描述的数据库。描述连接到具有相同 ID 的 blob 数据。在此代码中，描述显示在其图像旁边。

**显示图像页面**

```
$query = "SELECT * FROM `photo`.`photo`";
$query_run = mysql_query($query);
while ($data = mysql_fetch_array($query_run)) {
echo '<'.'img src="id.php?id='.$data['id'].'">';
$short_description = substr($data['description'], 0, 10);
$long_description = $data['description'];
echo $long_description;

}

echo "<br><a href='Photosite.php'>Upload a Photo</a>"; 
```

**将 blob 转换为 jpeg 以显示页面**

```
$id = abs($_GET['id']);
$query = mysql_query("SELECT * FROM `photo`.`photo` WHERE id='$id'");
$data = mysql_fetch_array($query) or die (mysql_error());
$image = $data['image'];
$description = $data['description'];

$jpgimage = imagecreatefromstring($image);

    $image_width = imagesx($jpgimage);
    $image_height = imagesy($jpgimage);

    $new_size = ($image_width + $image_height)/($image_width*($image_height/45));
    $new_width = $image_width * $new_size;
    $new_height = $image_height * $new_size;

    $new_image = imagecreatetruecolor($new_width, $new_height);

    imagecopyresized($new_image, $jpgimage, 0, 0, 0, 0, $new_width, $new_height, $image_width, $image_height);
      $imagearray = imagejpeg($new_image, null);
      header('Content-type: image/jpeg');

       echo $imagearray; 
```

我的问题是如何*将描述放在显示的图像下方？*并且在描述旁边的图像旁边的描述旁边没有图像等等......？

大帮助谢谢！是的，我知道我的一些功能已经过时了，不需要提醒我谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:27:01.527

如果您希望图像彼此相邻，每张图像下方都有描述，那么：

```
<?php
$max_width = '200px'; // Set this to whatever the image's width is.

$query = "SELECT * FROM `photo`.`photo`";
$query_run = mysql_query($query);
while ($data = mysql_fetch_array($query_run)) {
    // short_description doesn't look like it's being used... ??
    $short_description = substr($data['description'], 0, 10);
    $long_description = $data['description'];
    echo '<div style="float:left;width:'.$max_width.';">';
    echo '    <img src="id.php?id='.$data['id'].'" />';
    echo '    <br style="clear:both;" />';
    echo      $long_description;
    echo '</div>';
}
echo "<br style="clear:both;"><a href='Photosite.php'>Upload a Photo</a>"; 
```

否则，如果您想要图像下方的图像和图像下方的描述，那么：

```
<?php
$query = "SELECT * FROM `photo`.`photo`";
$query_run = mysql_query($query);
while ($data = mysql_fetch_array($query_run)) {
    // short_description doesn't look like it's being used... ??
    $short_description = substr($data['description'], 0, 10);
    $long_description = $data['description'];
    echo '<div>';
    echo '    <img src="id.php?id='.$data['id'].'">';
    echo '    <br style="clear:both;" />';
    echo      $long_description;
    echo '</div>';
}
echo "<br style="clear:both;"><a href='Photosite.php'>Upload a Photo</a>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:29:05.047

在描述前尝试换行。您还可以考虑一个简单的两行一列表。

# haskell - 在 Haskell 递归中返回列表的其余部分

> ID：14720002
> 
> 赞同：0
> 
> 时间：2013-02-06T01:19:46.320
> 
> 标签：haskell, recursion

嘿伙计们，所以我正在尝试创建一个简单的程序来删除第一次出现的元素，然后返回列表的其余部分。已经有一段时间了，我想知道为什么我在第 8 行收到此解析错误

```
module deleteFirst where
deleteFirst :: (Eq a) => a ->[a] -> [a]

deleteFirst toDelete [] = []
deleteFirst toDelete (a:as) =
    if(toDelete == a) then as
    else a:(deleteFirst toDelete as) 
```

有输入吗？谢了，兄弟们

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T01:28:07.527

解析错误出现在第 8 列，而不是第 8 行，这是因为模块名称必须以大写字母开头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T08:06:32.530

你得到了答案，但我想指出另一个解决方案：

```
deleteFirst x xs = u ++ (drop 1 v) where (u,v) = break (==x) xs 
```

# hadoop - 两个连接的 bz2 文件和一个由两个连接的文件组成的 bz2 文件有什么区别？

> ID：14720004
> 
> 赞同：1
> 
> 时间：2013-02-06T01:19:59.657
> 
> 标签：hadoop, compression, bzip2

如果我有两个文本文件，*一个*和*两个*，有什么区别：

> bz2 一二 -c >out.bz2

...和...

> 猫一二 | bzip2 -c >out.bz2

?

具体来说，我正在使用[pbzip2](http://compression.ca/pbzip2)生成 bz2 文件，将它们放在 HDFS 上，然后从 pig 中读取它们，我正在点击[MAPREDUCE-477](https://issues.apache.org/jira/browse/MAPREDUCE-477)。我无法从版本 0.20 升级我的 hadoop 集群，使用非并行 bz2 实现太慢，我想使用非块压缩算法。

有什么方法可以将连接的 bz2 文件转换为非连接的文件？甚至，我将如何修改 pbzip2 以便它生成非连接的 bz2 文件？

谢谢 -

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:37:07.093

压缩通常通过用更短的东西替换模式来工作。例如，如果您有“Hello there, goodbye there”，那么您可以将第二个“there”替换为对第一个的引用（其中引用小于原始的 5 个字节）。

现在想象一下，如果您有 2 个文件，一个包含“Hello there”，另一个包含“Goodbye there”。如果你连接然后压缩，那么压缩有更多的数据可以使用，并且可以用对第一个的引用替换第二个“那里”。如果您分别压缩两个文件然后连接，则不会发生这种情况。

现在想象一下，如果你连接然后压缩，这样第二个“那里”（来自第二个文件）被替换为对第一个“那里”的引用（来自第一个文件）；然后尝试将压缩数据拆分回 2 个压缩文件。您最终得到的是 2 个文件，其中第二个文件引用了该文件中不存在的内容，这些内容无法解压缩。

注意：现代压缩技术比我上面描述的要复杂得多——我为了说明而过度简化了很多。

如果需要并行压缩和解压大量数据，那是做不到的。相反，您需要将大量数据分成小块；这样小块可以单独压缩/解压缩，许多小块可以并行压缩/解压缩。

# c# - 是否可以同时显示来自处理程序的多个图像？

> ID：14720005
> 
> 赞同：0
> 
> 时间：2013-02-06T01:19:59.570
> 
> 标签：c#, asp.net, image, handler

标题说明了一切，我有一个通用处理程序（.ashx），我需要只使用一个处理程序同时显示一个图像。感谢你！我在我的项目中使用 asp.net 和 c#。我需要显示的所有图像都是动态生成的。我有一个 Web 用户控件，它使用这个处理程序来显示在 asp 图像控件上创建的动态位图图像。但是当我同时使用其中两个 WebControl 时，我遇到了问题，因为两个 WebControl 都显示相同的图像。

ImageHandler.ashx （这些效果并不重要，它只是在用户选择下拉列表中的选项时更改图像，这不是真正的问题。）

```
public void ProcessRequest(HttpContext context)
{
    string Effect = context.Request.QueryString["Effect"];
    if (Effect == "Normal")
    {
        Bitmap bmp = PanelStepTwo.image;
        context.Response.ContentType = "image/png";
        bmp.Save(context.Response.OutputStream, ImageFormat.Png);
    }
    else if (Effect == "PB")
    {
        Bitmap bmp = PanelStepTwo.imagePB;
        context.Response.ContentType = "image/png";
        bmp.Save(context.Response.OutputStream, ImageFormat.Png);
    }
    else if (Effect == "Sepia")
    {
        Bitmap bmp = PanelStepTwo.imageSepia;
        context.Response.ContentType = "image/png";
        bmp.Save(context.Response.OutputStream, ImageFormat.Png);
    }
} 
```

在这里，处理程序是如何被调用的。（我是索引，因为它是循环调用的） Usuario.Imagens[i] 返回一个 URL，例如，如果 'i' 为 0，则 Usuario.Imagens[0] 返回：@" [http://edgeconstrutora. com.br/FotoFacil/Images/he0cy.png](http://edgeconstrutora.com.br/FotoFacil/Images/he0cy.png) "

```
imgID = i;
var request = WebRequest.Create(Usuario.Imagens[i]);
using (var response = request.GetResponse())
using (var stream = response.GetResponseStream())
{
    image = new Bitmap(stream);
    var ratioX = (double)120 / image.Width;
    var ratioY = (double)120 / image.Height;
    var ratio = Math.Min(ratioX, ratioY);
    var newWidth = (int)(image.Width * ratio);
    var newHeight = (int)(image.Height * ratio);
    proporcao = image.Width / newWidth;
    img.Width = newWidth;
    img.Height = newHeight;
    Effect = "Normal";
    img.ImageUrl = "ImageHandler.ashx?imgID=" + imgID + "&Effect=" + Effect.ToString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:29:55.343

将 IsReusable 属性设置为 true 以处理多个图像。我上次查看时没有 MSDN 文档。但这就是我用来显示产品图像列表的东西。

# c# - 帮助图像的 url 重写规则

> ID：14720012
> 
> 赞同：0
> 
> 时间：2013-02-06T01:20:54.123
> 
> 标签：c#, iis, url-rewriting, rewrite

我正在使用在 IIS 7.5 上运行的 MVC 4 应用程序。我想创建一个重写规则，但我不熟悉它，所以需要帮助。

我的应用程序将调用以下 URL

```
/image/[language]/category/[id]-[size]-[priority]_Some+Random+Text.[extension] 
```

我想将其重写为以下内容，因为这是文件将存在于磁盘上的位置。

```
/image/[language]/category/product/pr_[id]_[size]_[priority].[extension] 
```

关于我可以用来实现这一点的规则的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:03:21.217

IIS 中的 URL 重写将接受 RegEx 规则。我相信以下规则在这里是合适的（YMMV，我目前无法测试它 - 您可以使用在 IIS 管理器中编辑重写规则时可用的“测试模式”按钮自己测试它。

```
^image/[a-zA-Z]+/category/[a-zA-Z0-9]+-[a-zA-Z0-9]+-[a-zA-Z0-9]+[_a-zA-Z\+]\.[a-zA-Z0-9]{,3} 
```

和重写动作

```
images/{R:1}/category/producer/pr_{R:2}_{R:3}_{R:4}.{R:5} 
```

这可能比您需要的更通用（ID 可能只是（十六进制）十进制，大小可能只是十进制等），但应该为您提供如何编写它的一般要点。

此[参考](http://www.iis.net/learn/extensions/url-rewrite-module/url-rewrite-module-configuration-reference)应提供您需要的任何其他信息以及将规则直接写入`web.config`.

# c# - 立即退出 c# 中的 Parallel.For 循环

> ID：14720014
> 
> 赞同：1
> 
> 时间：2013-02-06T01:21:07.953
> 
> 标签：c#, .net, multithreading, .net-4.0, parallel-processing

在 C# 中，是否可以立即退出正在进行的 Parallel.For 循环。在调用 loopState.Stop() 之后，以下代码可能需要一整秒才能退出循环。

```
static void Main(string[] args)
{
    Stopwatch watch = new Stopwatch();

    Parallel.For(0, 50, (i, loopState) =>
    {
        Console.WriteLine("Thread:" + Thread.CurrentThread.ManagedThreadId + "\tIteration:" + i);
        Thread.Sleep(1000);

        if (i == 0)
        {
            watch.Start();
            loopState.Stop();
            return;
        }
    });

    Console.WriteLine("Time Elapsed since loopState.Stop(): {0}s", watch.Elapsed.TotalSeconds);
    Console.ReadKey();
} 
```

输出

```
Thread:10       Iteration:0
Thread:6        Iteration:12
Thread:11       Iteration:24
Thread:12       Iteration:36
Thread:13       Iteration:48
Thread:13       Iteration:49
Thread:12       Iteration:37
Time Elapsed since loopState.Stop(): 0.9999363s 
```

有什么办法可以更快地做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T01:26:47.467

是的，这可能。查看[这篇](http://blogs.msdn.com/b/csharpfaq/archive/2010/07/19/parallel-programming-task-cancellation.aspx)详细介绍并行编程问题的文章。以下是其中的摘录：

> 如果我不想浪费资源并想在单击取消后立即停止所有计算怎么办？在这种情况下，我必须定期检查执行长时间运行操作的方法中某处的取消令牌的状态。由于我将取消标记声明为一个字段，因此我可以在方法中简单地使用它。

```
public double SumRootN(int root)
{
    double result = 0;
    for (int i = 1; i < 10000000; i++)
    {
        tokenSource.Token.ThrowIfCancellationRequested();
        result += Math.Exp(Math.Log(i) / root);
    }
    return result;
} 
```

使用传统的`Stop`或`Break`不会导致任务立即取消，正如您所经历的那样。根据MSDN 上的[这篇文章，](http://msdn.microsoft.com/en-us/library/dd460721.aspx)

> 在此上下文中，“中断”表示在当前线程上完成当前迭代之前的所有线程上的所有迭代，然后退出循环。“停止”意味着在方便的时候停止所有的迭代。

所以你不能用传统的方法强制它立即停止。您将需要使用我在开头提到的方法。

希望这对你有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T01:29:08.770

问题是循环体的运行时间。 `loopState.Stop()`从头开始停止任何新的循环迭代，并等待当前正在运行的任何循环完成。

# iis - 特定 URL 的 IIS 7 URL 重写匹配

> ID：14720016
> 
> 赞同：1
> 
> 时间：2013-02-06T01:21:22.703
> 
> 标签：iis, url-rewriting

我想完全匹配[https://internet.dev.local/](https://internet.dev.local/) **KYR** url（不带 / 到结尾）并重定向或重写到[https://internet.dev.local/](https://internet.dev.local/) **KYR/**（带 /）。

我正在尝试以下规则，但它也匹配其他 URL，例如**[https://internet.dev.local/KYR/Admin/Form/Default.aspx?signup=false](https://internet.dev.local/KYR/Admin/Form/Default.aspx?signup=false)**，这是错误的。

那么我该如何实现呢？

```
<rule name="Static redirect" patternSyntax="ExactMatch" stopProcessing="true">
        <match url="https://internet.dev.local/KYR" negate="true" />
        <conditions>
        </conditions>
        <action type="Redirect" url="/Login/?ReturnUrl=/Member/KYR/" redirectType="Permanent" />
      </rule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:58:55.653

如果您需要测试主机和协议，则必须将其放入条件中，而不是全局规则中。
按照您的示例，如下所示：

```
<rule name="test" patternSyntax="ExactMatch" stopProcessing="true">
  <match url="KYR" />
  <action type="Redirect" url="/KYR/" redirectType="Permanent" />
  <conditions>
    <add input="{HTTP_HOST}" pattern="internet.dev.local" />
    <add input="{HTTPS}" pattern="on" />
  </conditions>
</rule> 
```

我已经改变了`url`行动，因为你的问题是：
`redirect or rewrite to https://internet.dev.local/KYR/ (with /).`

**编辑：**
要让它在任何主机上工作（有或没有 SSL），只需删除条件：

```
<rule name="test" patternSyntax="ExactMatch" stopProcessing="true">
  <match url="KYR" />
  <action type="Redirect" url="/KYR/" redirectType="Permanent" />
</rule> 
```

# scala - 如何避免地图连接的奇怪顺序？（A++B++C ---> BAC）

> ID：14720018
> 
> 赞同：3
> 
> 时间：2013-02-06T01:21:27.517
> 
> 标签：scala, map

连接三个地图 a、b 和 c，我希望结果与其各自的原始地图具有相同的顺序。但是，如下图所示，结果就像地图是 b、a 和 c：

```
 Welcome to Scala version 2.10.0 (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_26).
  Type in expressions to have them evaluated.
     Type :help for more information.

  scala> import collection.mutable
  import collection.mutable

  scala> val a = mutable.Map(1->2)
  a: scala.collection.mutable.Map[Int,Int] = Map(1 -> 2)

  scala> val b = mutable.Map(2->2)
  b: scala.collection.mutable.Map[Int,Int] = Map(2 -> 2)

  scala> val c = mutable.Map(3->2)
  c: scala.collection.mutable.Map[Int,Int] = Map(3 -> 2)

  scala> a ++ b ++ c
  res0: scala.collection.mutable.Map[Int,Int] = Map(2 -> 2, 1 -> 2, 3 -> 2) 
```

对于四个地图，它显示 b、d、a、c。对于两个 b，a。无论原始顺序如何，生成的地图总是以相同的顺序排列。

* * *

测试答案：

```
 Welcome to Scala version 2.10.0 (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_26).
  Type in expressions to have them evaluated.
  Type :help for more information.

  scala> import collection.mutable.LinkedHashMap
  import collection.mutable.LinkedHashMap

  scala> val a = LinkedHashMap(1 -> 2)
  a: scala.collection.mutable.LinkedHashMap[Int,Int] = Map(1 -> 2)

  scala> val b = LinkedHashMap(2 -> 2)
  b: scala.collection.mutable.LinkedHashMap[Int,Int] = Map(2 -> 2)

  scala> val c = LinkedHashMap(3 -> 2)
  c: scala.collection.mutable.LinkedHashMap[Int,Int] = Map(3 -> 2)

  scala> a ++ b ++ c
  res0: scala.collection.mutable.Map[Int,Int] = Map(1 -> 2, 2 -> 2, 3 -> 2) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T01:35:42.453

Scala `Map`（如 Java）没有定义的迭代顺序。如果需要维护插入顺序，可以使用 a [`ListMap`](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.ListMap)（不可变）或 a [`LinkedHashMap`](http://www.scala-lang.org/api/current/index.html#scala.collection.mutable.LinkedHashMap)（不可变）：

```
scala> import collection.mutable.LinkedHashMap
import collection.mutable.LinkedHashMap

scala> val a = LinkedHashMap(1 -> 2)
a: scala.collection.mutable.LinkedHashMap[Int,Int] = Map(1 -> 2)

scala> a += (2 -> 2)
res0: a.type = Map(1 -> 2, 2 -> 2)

scala> a += (3 -> 2)
res1: a.type = Map(1 -> 2, 2 -> 2, 3 -> 2)

scala> a
res2: scala.collection.mutable.LinkedHashMap[Int,Int] = Map(1 -> 2, 2 -> 2, 3 -> 2) 
```

但总的来说，如果您关心元素的顺序，那么使用不同的数据结构可能会更好。

# html - 在非常宽的 HTML 表格上获得右边距？

> ID：14720021
> 
> 赞同：5
> 
> 时间：2013-02-06T01:21:31.407
> 
> 标签：html, css

我有一张宽桌子——太宽了，不能适应屏幕宽度；所以浏览器必须显示滚动条。我想从这张桌子的左右两边留出 20px 的空间；所以我尝试使用以下方式对其进行样式设置（下面的完整代码）：

```
 table {
    margin-left: 20px;
    margin-right: 20px;
    text-align: left;
    border-collapse: collapse;
    background-color: #e0e4f5;
  } 
```

左边距按预期显示：

![左边距](../Images/857ad00aa1510e97ec622995ad00cb98.png)

但右边距没有（*有点难以看到 - 但请注意水平滚动条的右边缘与表格的右边缘对齐*）：

![右边距](../Images/28a766618b9b457ff2e0f7cef0c4fe85.png)

是否可以显示某种右边距？

这是我的完整测试代码：

表格 { 左边距：20px; 右边距：20px；文本对齐：左；边框折叠：折叠；背景颜色：#e0e4f5；}

```
<table id="mytable">
  <caption>Table caption</caption>
  <thead>
    <tr>
    <th scope='col'>head 1</th>
    <th scope='col'>head 2</th>
    <th scope='col'>head 3</th>
    <th scope='col'>head 4</th>
    <th scope='col'>head 5</th>
    <th scope='col'>head 6</th>
    <th scope='col'>head 7</th>
    <th scope='col'>head 8</th>
    <th scope='col'>head 9</th>
    <th scope='col'>head 10</th>
    <th scope='col'>head 11</th>
    <th scope='col'>head 12</th>
    <th scope='col'>head 13</th>
    <th scope='col'>head 14</th>
    <th scope='col'>head 15</th>
    <th scope='col'>head 16</th>
    <th scope='col'>head 17</th>
    <th scope='col'>head 18</th>
    <th scope='col'>head 19</th>
    <th scope='col'>head 20</th>
    <th scope='col'>head 21</th>
    <th scope='col'>head 22</th>
    <th scope='col'>head 23</th>
    <th scope='col'>head 24</th>
    <th scope='col'>head 25</th>
    <th scope='col'>head 26</th>
    <th scope='col'>head 27</th>
    <th scope='col'>head 28</th>
    <th scope='col'>head 29</th>
    <th scope='col'>head 30</th>
    <th scope='col'>head 31</th>
    <th scope='col'>head 32</th>
    <th scope='col'>head 33</th>
    <th scope='col'>head 34</th>
    <th scope='col'>head 35</th>
    <th scope='col'>head 36</th>
    <th scope='col'>head 37</th>
    <th scope='col'>head 38</th>
    <th scope='col'>head 39</th>
    <th scope='col'>head 40</th>
    </tr>
  </thead>
  <tfoot>
    <tr>
    <td colspan="100">Table footer</td>
    </tr>
  </tfoot>
  <tbody>
    <tr>
    <td>test 1</td>
    <td>test 2</td>
    <td>test 3</td>
    <td>test 4</td>
    <td>test 5</td>
    <td>test 6</td>
    <td>test 7</td>
    <td>test 8</td>
    <td>test 9</td>
    <td>test 10</td>
    <td>test 11</td>
    <td>test 12</td>
    <td>test 13</td>
    <td>test 14</td>
    <td>test 15</td>
    <td>test 16</td>
    <td>test 17</td>
    <td>test 18</td>
    <td>test 19</td>
    <td>test 20</td>
    <td>test 21</td>
    <td>test 22</td>
    <td>test 23</td>
    <td>test 24</td>
    <td>test 25</td>
    <td>test 26</td>
    <td>test 27</td>
    <td>test 28</td>
    <td>test 29</td>
    <td>test 30</td>
    <td>test 31</td>
    <td>test 32</td>
    <td>test 33</td>
    <td>test 34</td>
    <td>test 35</td>
    <td>test 36</td>
    <td>test 37</td>
    <td>test 38</td>
    <td>test 39</td>
    <td>test 40</td>
    </tr>
    <tr>
    <td>test 1</td>
    <td>test 2</td>
    <td>test 3</td>
    <td>test 4</td>
    <td>test 5</td>
    <td>test 6</td>
    <td>test 7</td>
    <td>test 8</td>
    <td>test 9</td>
    <td>test 10</td>
    <td>test 11</td>
    <td>test 12</td>
    <td>test 13</td>
    <td>test 14</td>
    <td>test 15</td>
    <td>test 16</td>
    <td>test 17</td>
    <td>test 18</td>
    <td>test 19</td>
    <td>test 20</td>
    <td>test 21</td>
    <td>test 22</td>
    <td>test 23</td>
    <td>test 24</td>
    <td>test 25</td>
    <td>test 26</td>
    <td>test 27</td>
    <td>test 28</td>
    <td>test 29</td>
    <td>test 30</td>
    <td>test 31</td>
    <td>test 32</td>
    <td>test 33</td>
    <td>test 34</td>
    <td>test 35</td>
    <td>test 36</td>
    <td>test 37</td>
    <td>test 38</td>
    <td>test 39</td>
    <td>test 40</td>
    </tr>
    <tr>
    <td>test 1</td>
    <td>test 2</td>
    <td>test 3</td>
    <td>test 4</td>
    <td>test 5</td>
    <td>test 6</td>
    <td>test 7</td>
    <td>test 8</td>
    <td>test 9</td>
    <td>test 10</td>
    <td>test 11</td>
    <td>test 12</td>
    <td>test 13</td>
    <td>test 14</td>
    <td>test 15</td>
    <td>test 16</td>
    <td>test 17</td>
    <td>test 18</td>
    <td>test 19</td>
    <td>test 20</td>
    <td>test 21</td>
    <td>test 22</td>
    <td>test 23</td>
    <td>test 24</td>
    <td>test 25</td>
    <td>test 26</td>
    <td>test 27</td>
    <td>test 28</td>
    <td>test 29</td>
    <td>test 30</td>
    <td>test 31</td>
    <td>test 32</td>
    <td>test 33</td>
    <td>test 34</td>
    <td>test 35</td>
    <td>test 36</td>
    <td>test 37</td>
    <td>test 38</td>
    <td>test 39</td>
    <td>test 40</td>
    </tr>
    <tr>
    <td>test 1</td>
    <td>test 2</td>
    <td>test 3</td>
    <td>test 4</td>
    <td>test 5</td>
    <td>test 6</td>
    <td>test 7</td>
    <td>test 8</td>
    <td>test 9</td>
    <td>test 10</td>
    <td>test 11</td>
    <td>test 12</td>
    <td>test 13</td>
    <td>test 14</td>
    <td>test 15</td>
    <td>test 16</td>
    <td>test 17</td>
    <td>test 18</td>
    <td>test 19</td>
    <td>test 20</td>
    <td>test 21</td>
    <td>test 22</td>
    <td>test 23</td>
    <td>test 24</td>
    <td>test 25</td>
    <td>test 26</td>
    <td>test 27</td>
    <td>test 28</td>
    <td>test 29</td>
    <td>test 30</td>
    <td>test 31</td>
    <td>test 32</td>
    <td>test 33</td>
    <td>test 34</td>
    <td>test 35</td>
    <td>test 36</td>
    <td>test 37</td>
    <td>test 38</td>
    <td>test 39</td>
    <td>test 40</td>
    </tr>
  </tbody>
</table>
</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T02:02:17.560

如果您可以像在这个 jsFiddle ( [http://jsfiddle.net/nnJ6F/1/](http://jsfiddle.net/nnJ6F/1/) ) 中添加一个表格包装器 div，您可以将其设置为显示内联块：

```
.table-wrapper {
    display:inline-block;
} 
```

这是一个有效的 jsFiddle：http: [//jsfiddle.net/nnJ6F/5/](http://jsfiddle.net/nnJ6F/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T02:14:10.577

You can make the table element set to `display:inline-block;` and that will get you the proper margins. Just make sure the inline-block satisfies your [browser compatibility](http://caniuse.com/#feat=inline-block) requirements.

[Demo](http://jsfiddle.net/3gJLL/).

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-06T01:29:29.660

关于我在这里的评论你可以看到它是如何工作的：

[例子](http://jsfiddle.net/fSTFZ/)

只需`vertical panel`在结果和 Javascript 位置之间移动边界。

# ios - 为 UIControlStateHighlighted 自定义 UISearchBarIconClear 不起作用

> ID：14720026
> 
> 赞同：7
> 
> 时间：2013-02-06T01:21:48.780
> 
> 标签：ios, objective-c, uikit, uisearchbar

我有一个 UISearchBar，为此我为 UiControlStateNormal 设置了一个自定义 UISearchBarIconClear。

```
[mySearchBar setImage:myImage forSearchBarIcon:UISearchBarIconClear state:UIControlStateNormal]; 
```

这部分可以正常工作，但不幸的是，当点击清除按钮时，它会从我设置的图像变为原始的默认灰色图像。

我尝试为 UIControlStateHighlighted 设置图像，但显然这不起作用。

[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UISearchBar_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40007529-CH3-SW26)实际上说明了

> 有效状态为 UIControlStateNormal 和 UIControlStateDisabled。

如果您无法将其设置为突出显示状态，那么为默认状态设置自定义按钮有什么意义？我错过了什么吗？任何想法或解决方法表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-20T18:46:16.030

我有同样的问题，调整语句的顺序解决了它：

因此，不要先做，而是`UIControlStateNormal`先将`UIControlStateHighlighted`图像设置为高亮状态

```
[searchBar setImage:clearIcon forSearchBarIcon:UISearchBarIconClear state:UIControlStateHighlighted];
[searchBar setImage:clearIcon forSearchBarIcon:UISearchBarIconClear state:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-17T08:20:48.987

使用外观代理怎么样？

```
[[UIButton appearanceWhenContainedIn:[UITextField class], [UISearchBar class], nil] setImage:myImage forState:UIControlStateHighlighted]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-12T20:29:01.070

我刚刚遇到了与您描述的相同的问题，清除图标在被按下后重置为默认图标。

这似乎是由于我尝试对正常和突出显示状态使用相同的 UIImage，为突出显示状态切换到不同的图像解决了问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T13:32:44.267

今天早些时候遇到了同样的问题，这是我自己可能不会使用的非常丑陋的解决方法。

```
for(UIView *subView in searchBar.subviews) {
    if([subView isKindOfClass: [UITextField class]]){
        UITextField *searchField = (UITextField *)subView;
        CGFloat myWidth = 26.0f;
        CGFloat myHeight = 30.0f;
        UIButton *myButton = [[UIButton alloc] initWithFrame:CGRectMake(0.0f, 0.0f, myWidth, myHeight)];
        [myButton setImage:[UIImage imageNamed:@"searchbariconclear"] forState:UIControlStateNormal];
        [myButton setImage:[UIImage imageNamed:@"searchbariconclear"] forState:UIControlStateHighlighted];

        [myButton addTarget:self action:@selector(clearsearchbar) forControlEvents:UIControlEventTouchUpInside];

        searchField.rightView = myButton;
        searchField.rightViewMode = UITextFieldViewModeAlways;
        searchField.clearButtonMode = UITextFieldViewModeNever;
    }
} 
```

进而..

```
- (void)clearsearchbar {
    for(UIView *subView in searchBar.subviews) {
        if([subView isKindOfClass: [UITextField class]]){
            UITextField *searchField = (UITextField *)subView;
            searchField.text = nil;
        }
    }
} 
```

这种方法的三个问题..

1.  由于我们在搜索栏的子视图中进行挖掘，因此有一天可能会因操作系统更新而中断。

2.  这与 UISearchBarIconClear 的行为不完全一样，因为清除图标将始终可见。您可以尝试使用这种方法与其他 UITextFieldViewModes 进行测试，我没有这样做的主要原因是，据我所知，其他的都不是理想的在这里，出于某种原因。

3.  也许只有我一个人，但我真的不认为在试图解决一个问题时引入两个问题的东西是一个解决方案。:-)

如果有人有更好的方法来解决这个问题，我也很想听听。

# java - 对于每个循环都有效，但迭代器不

> ID：14720027
> 
> 赞同：2
> 
> 时间：2013-02-06T01:21:51.587
> 
> 标签：java, for-loop, foreach, iterator

编写一个方法`counts`，接受一个`List`整数和一个`Set`整数作为参数，并返回从集合中的每个值到列表中该值出现次数的映射。

我的解决方案#1：

```
public static Map<Integer, Integer> counts(List<Integer> list, Set<Integer> set) {
    Map<Integer, Integer> map = new TreeMap<Integer, Integer>();
    Iterator<Integer> i = list.iterator();

    for(Integer element : set) {
        int count = 0;
        for(Integer sub : list) {
            if(sub == element) {
                count++;
            }
        }
        map.put(element, count);
    }

    return map;
} 
```

我的解决方案#2：

```
public static Map<Integer, Integer> counts(List<Integer> list, Set<Integer> set) {
    Map<Integer, Integer> map = new TreeMap<Integer, Integer>();
    Iterator<Integer> i = list.iterator();

    for(Integer element : set) {
        int count = 0;
        while(i.hasNext()) {
            if(i.next() == element) {
                count++;
            }
        }
        map.put(element, count);
    }

    return map;
} 
```

输入：

```
list: [4, -2, 3, 9, 4, 17, 5, 29, 14, 87, 4, -2, 100]
set: [-2, 4, 29] 
```

预期输出：

```
{-2=2, 4=3, 29=1} 
```

#1 的输出：

```
{-2=2, 4=3, 29=1} 
```

#2 的输出：

```
{-2=0, 4=3, 29=0} 
```

第一个有效，但第二个无效。为什么？它们本质上是一样的，还是我错过了什么？另外，是否可以使用`for`循环遍历列表？如果不是，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T01:28:09.963

您忘记在每次循环后重置迭代器，请尝试以下操作：

```
for(Integer element : set) {
    int count = 0;
    i = list.iterator(); // resets the iterator to the first element. 
    while(i.hasNext()) {
        if(i.next() == element) {
            count++;
        }
    } // by the end of this loop the iterator has no next elements, need to reset.
    map.put(element, count);
} 
```

# facebook - 如何使用“赞”按钮在我的页面上获取用户的 facebook id？

> ID：14720029
> 
> 赞同：0
> 
> 时间：2013-02-06T01:21:54.617
> 
> 标签：facebook, api, twitter, google-plus

*我的初衷是想知道web开发者是否可以使用like按钮来跟踪我。但我想，这不是一个合适的问题，因此颠倒了观点。*

假设我包括 facebook like 按钮、google +1 按钮和 tweet 这个按钮。如果用户已经登录到这些服务，我可以跟踪每个服务的用户 ID 吗？（但他没有按下任何这些按钮）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T01:57:09.613

从理论上讲，如果用户不允许您以某种方式（例如通过单击“Like”或“Logging with FB”按钮），则不应允许您知道用户的 id；这将是一个安全漏洞。所以你要求的应该是不可能的，无论如何，有一些技术可以知道用户是否登录，但你不会知道他的id。对于此技术，您可以查看： [https ://grepular.com/Abusing_HTTP_Status_Codes_to_Expose_Private_Information](https://grepular.com/Abusing_HTTP_Status_Codes_to_Expose_Private_Information)

问候

# git - 在 .gitmodules 中找不到路径的子模块映射

> ID：14720034
> 
> 赞同：33
> 
> 时间：2013-02-06T01:22:19.793
> 
> 标签：git, version-control, git-submodules

当我跑

```
git submodule update
No submodule mapping found in .gitmodules for path 'Classes/lib/AFKissXMLRequestOperation' 
```

`Classes/lib/AFKissXMLRequestOperation`但是我在当前的仓库中没有子模块

我的 git 配置是：

```
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    logallrefupdates = true
    ignorecase = true
    precomposeunicode = false
[remote "origin"]
    fetch = +refs/heads/*:refs/remotes/origin/*
    url = git@github.com:why_ios.git
[branch "master"]
    remote = origin
    merge = refs/heads/master
[submodule "External/ios-SDNestedTable"]
    url = git@github.com:why/ios-SDNestedTable.git
[submodule "External/PSStackedView"]
    url = git@github.com:why/PSStackedView.git 
```

和 .gitmodules 是：

```
[submodule "External/ios-SDNestedTable"]
    path = External/ios-SDNestedTable
    url = git@github.com:why/ios-SDNestedTable.git
[submodule "External/PSStackedView"]
    path = External/PSStackedView
    url = git@github.com:why/PSStackedView.git 
```

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-02-06T06:20:35.257

检查您是否也有正确的设置`.git/modules`。从几个版本开始，git 在那里添加了一个条目。

此外，树可能在该路径上有一个提交对象。要摆脱它，你可以

```
git rm --cached Classes/lib/AFKissXMLRequestOperation 
```

那应该一劳永逸地摆脱它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-08-02T02:44:33.317

只是把这个留给`git`在 Windows 上使用的任何人。`git`可以在线跟踪所有答案，但由于' 处理路径分隔符，它仍然无法正常工作。例如：

我的问题案例是`hugo`通过以下方式添加主题`submodule`：

`git submodule add https://github.com/danielkvist/hugo-terrassa-theme.git themes\terrassa`

将导致`.gitmodules`类似：

```
[submodule "themes\\terrassa"]
    path = themes\\terrassa
    url = https://github.com/danielkvist/hugo-terrassa-theme.git 
```

这将导致问题`git submodule [status || init || ...]`

手动更换分隔符：

```
[submodule "themes/terrassa"]
    path = themes/terrassa
    url = https://github.com/danielkvist/hugo-terrassa-theme.git 
```

...为我解决了。

Also solved the deployment on Netlify since they use *nix server images.

# ios - NSMutableData appendBytes 将长度设置为 -1 并崩溃

> ID：14720041
> 
> 赞同：3
> 
> 时间：2013-02-06T01:22:52.290
> 
> 标签：ios, objective-c, macos, cocoa, nsmutabledata

我遇到了一个罕见的间歇性崩溃，看起来像 appendBytes 被称为 -1 因为它的长度。现在，每次使用此方法时，我都对“长度”参数进行了硬编码，因此我看不到这是如何发生的，更糟糕​​的是，我看不到如何测试并避免这种崩溃。

这是堆栈的顶部和异常（注意~4.2b 长度）：

```
*** Terminating app due to uncaught exception 'NSMallocException', reason: '*** -[NSConcreteMutableData appendBytes:length:]: unable to allocate memory for length (4294967295)'
*** Call stack at first throw:
(
    0   CoreFoundation                      0x91ec5a67 __raiseError + 231
    1   libobjc.A.dylib                     0x9950a149 objc_exception_throw + 155
    2   CoreFoundation                      0x91e2d289 +[NSException raise:format:arguments:] + 137
    3   CoreFoundation                      0x91e2d1f9 +[NSException raise:format:] + 57
    4   Foundation                          0x92d2489e _NSMutableDataGrowBytes + 1136
    5   Foundation                          0x92d24391 -[NSConcreteMutableData appendBytes:length:] + 354 
```

这是应该崩溃的代码的简化版本：

```
 if (self.isConnectedToService) {
            NSMutableData *myData = [NSMutableData data];

                float newValue = PanValue;
                const char theTwo[] =  {(char)Chan_L, (char)PanParam};
                [myData appendBytes:&theTwo length:2];
                [myData appendBytes:&newValue length:4];
        } 
```

所以长度总是2或4。

我测试了缓冲区包含多于或少于 2 和 4 的不同情况，但我从未设法故意导致此崩溃。

我在 MacOS10.7.4 和 iOS6.0（在 iPad3 上）上运行了相同的代码，并且偶尔会在两个平台上看到这个问题。

那么 appendBytes 是如何获得这个虚假价值的呢？

# hadoop - 未设置 Hadoop Pig 输出目录

> ID：14720044
> 
> 赞同：0
> 
> 时间：2013-02-06T01:23:02.097
> 
> 标签：hadoop, bigdata, apache-pig

我正在编写自己的 Pig Store 类，我不想将其存储在文件中，我打算将其发送到某个第 3 方数据存储（缺少 API 调用）。

注意：我在 Cloudera 的 VirtualBox 映像上运行它。

我已经编写了我的 java 类（如下所列）并创建了我在下面的 id.pig 脚本中使用的 mystore.jar：

```
store B INTO 'mylocation' USING MyStore('mynewlocation') 
```

使用 pig 运行此脚本时，我看到以下错误：错误 6000：输出位置验证失败：'file://home/cloudera/test/id.out 更多信息：未设置输出目录。

```
or.apache.pig.impl.plan.VisitorException: ERROR 6000:
at or.apache.pig.newplan.logical.rules.InputOutputFileValidator$InputOutputFileValidator.visit(InputOutputFileValidator.java:95) 
```

请帮忙！

-------------------- MyStore.java ----------

```
public class MyStore extends StoreFunc {
    protected RecordWriter writer = null;
    private String location = null;

    public MyStore () {
        location= null;
    }

    public MyStore (String location) {
        this.location= location;
    }

    @Override
    public OutputFormat getOutputFormat() throws IOException {
        return new MyStoreOutputFormat(location);
    }

    @Override
    public void prepareToWrite(RecordWriter writer) throws IOException {
        this.writer = writer;
    }

    @Override
    public void putNext(Tuple tuple) throws IOException {
        //write tuple to location

        try {
            writer.write(null, tuple.toString());
        } catch (InterruptedException e) {          
            e.printStackTrace();
        }
    }

    @Override
    public void setStoreLocation(String location, Job job) throws IOException {
        if(location!= null)
            this.location= location;
    }

} 
```

-------------------- MyStoreOutputFormat.java ----------

```
import java.io.DataOutputStream;
import java.io.IOException;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.fs.FSDataOutputStream;
import org.apache.hadoop.fs.FileSystem;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.WritableComparable;
import org.apache.hadoop.mapreduce.RecordWriter;
import org.apache.hadoop.mapreduce.TaskAttemptContext;
import org.apache.hadoop.mapreduce.lib.output.TextOutputFormat;
import org.apache.pig.data.Tuple;

public class MyStoreOutputFormat extends
        TextOutputFormat<WritableComparable, Tuple> {
    private String location = null;

    public MyStoreOutputFormat(String location) {

        this.location = location;
    }

    @Override
    public RecordWriter<WritableComparable, Tuple> getRecordWriter(
            TaskAttemptContext job) throws IOException, InterruptedException {

        Configuration conf = job.getConfiguration();

        String extension = location;
        Path file = getDefaultWorkFile(job, extension);     
        FileSystem fs = file.getFileSystem(conf);

        FSDataOutputStream fileOut = fs.create(file, false);

        return new MyStoreRecordWriter(fileOut);
    }

    protected static class MyStoreRecordWriter extends
            RecordWriter<WritableComparable, Tuple> {

        DataOutputStream out = null;

        public MyStoreRecordWriter(DataOutputStream out) {
            this.out = out;
        }

        @Override
        public void close(TaskAttemptContext taskContext) throws IOException,
                InterruptedException {
            // close the location
        }

        @Override
        public void write(WritableComparable key, Tuple value)
                throws IOException, InterruptedException {

            // write the data to location
            if (out != null) {
                out.writeChars(value.toString()); // will be calling API later. let me first dump to the location!
            }
        }

    }
} 
```

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:11:53.900

首先，我认为您应该使用 Job 配置来存储位置值，而不是实例变量

在计划作业时调用 setStoreLocation 方法中对局部变量“位置”的分配，但可能直到执行阶段才调用 getOutputFormat，此时位置变量可能不再设置（您的类的新实例可能已经创建）。

如果您查看 的源代码`PigStorage.setStoreLocation`，您应该注意到它们将位置存储在 Job 配置（第 2 行）中：

```
@Override
public void setStoreLocation(String location, Job job) throws IOException {
    job.getConfiguration().set("mapred.textoutputformat.separator", "");
    FileOutputFormat.setOutputPath(job, new Path(location));

    if( "true".equals( job.getConfiguration().get( "output.compression.enabled" ) ) ) {
        FileOutputFormat.setCompressOutput( job, true );
        String codec = job.getConfiguration().get( "output.compression.codec" );
        try {
            FileOutputFormat.setOutputCompressorClass( job,  (Class<? extends CompressionCodec>) Class.forName( codec ) );
        } catch (ClassNotFoundException e) {
            throw new RuntimeException("Class not found: " + codec );
        }
    } else {
        // This makes it so that storing to a directory ending with ".gz" or ".bz2" works.
        setCompression(new Path(location), job);
    }
} 
```

所以我认为你应该将位置存储在一个工作变量中：

```
@Override
public void setStoreLocation(String location, Job job) throws IOException {
    if(location!= null)
        job.getConfiguration().set("mylocation", location);
} 
```

然后可以在 createRecordReader 方法中提取您的自定义输出格式：

```
@Override
public RecordWriter<WritableComparable, Tuple> getRecordWriter(
        TaskAttemptContext job) throws IOException, InterruptedException {

    Configuration conf = job.getConfiguration();

    String extension = conf.get("mylocation");
    Path file = getDefaultWorkFile(job, extension);     
    FileSystem fs = file.getFileSystem(conf);

    FSDataOutputStream fileOut = fs.create(file, false);

    return new MyStoreRecordWriter(fileOut);
} 
```

最后（可能是您看到的错误的实际原因），您的输出格式扩展了 TextOutputFormat，并且您`getDefaultWorkFile`在记录写入器中使用该方法 - 此方法需要知道您将文件输出到 HDFS 中的哪个位置，而您没有`FileOutputFormat.setOutputPath(job, new Path(location));`在您的 setStoreLocation 方法中没有调用（请参阅我之前粘贴的 PigStorage.setStoreLocation 方法）。所以错误是因为它不知道在哪里创建默认工作文件。

# java - 我可以将用 C 编写的 api 与 java web 服务一起使用吗

> ID：14720045
> 
> 赞同：0
> 
> 时间：2013-02-06T01:23:06.640
> 
> 标签：java, c, web-services, api

> **可能重复：**
> [在 Java 应用程序中使用 C 源代码的最简单方法是什么？](https://stackoverflow.com/questions/83299/whats-the-easiest-way-to-use-c-source-code-in-a-java-application)

我有一个 C 工具包，我想在我用 java 编写的程序中使用它。在失去工具包的基本功能的情况下，我能做到这一点的最简单方法是什么。这个 Web 服务的基本功能是向这个函数输入数据，C 函数将处理数据并抛出一个输出供我使用。有没有办法可以直接从我的 Web 服务调用这些 C 函数。

# jquery - Jquery在按钮单击时在两个不同的div之间切换

> ID：14720054
> 
> 赞同：0
> 
> 时间：2013-02-06T01:23:46.070
> 
> 标签：jquery, html, onclick, toggle

如何使用 if else 语句禁用 jquery 函数。我的问题是我有两个打开 onClick 的文本框，它们被设置为切换，但是我如何设置它以便如果其中一个框打开，另一个框不会打开我的 jquery 是

```
$(".first1").on('click', 
  function () {
    $('#suitsyou').toggle();
  });
$(".last1").on('click', 
  function () {
      $('#dealsandoffers').toggle() 
  }); 
```

查看我的网站[http://www.jeremyspence.net78.net](http://www.jeremyspence.net78.net)可能更容易，它位于包选项卡中，您可以看到，当您单击一个选项卡然后单击另一个选项卡而不关闭第一个选项卡时，它们都打开

html是

```
 <div id="suitsyou" style="display:none">

    </div>

    <div id="dealsandoffers" style="display:none"> 

    </div> 
```

没有包含内容，所以不要放这么多代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:33:24.377

无需进行太多更改，您可以简单地显示正确的一个，然后隐藏另一个，在工作之间切换效果很好。虽然我不得不承认，这不是一个优雅的解决方案，但如果这是你想要的，它应该可以解决问题。

```
$(".first1").on('click', 
  function () {
   $('#dealsandoffers').hide()
    $('#suitsyou').show();
  });
$(".last1").on('click', 
  function () {
      $('#suitsyou').hide()
      $('#dealsandoffers').show() 
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T01:34:28.263

一个简单的条件应该可以工作：

```
$(".first").on('click', function () {
    if (!$("#dealsandoffers:visible").length) {
        $("#suitesyou").toggle();
    }
}); 
```

如果您需要更多的灵活性，请使用类。这也不是特别用户友好。在我看来，您想关闭另一个，然后显示当前单击的那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-08T21:01:27.213

[Explosion Pills](https://stackoverflow.com/users/454533/explosion-pills)，您对如何在单击按钮时切换两个不同的 DIV 是正确的。正如你所说，

> 在我看来，您想关闭另一个，然后显示当前单击的那个。

为此，您只需将 jQuery 切换应用到两个视图。在我的解决方案中，我放置了一个 ID 为“btnToggle”的切换按钮，然后像这样添加了两个 div 标签。重要的是不要让备用视图“lastView”具有显示样式：无。这允许备用视图的初始状态开始为不可见。

我希望这被证明是有帮助的，并感谢您为解决我的问题提供了先机。

```
$("#btnToggle").on('click', function() {
  $("#firstView").toggle();
  $("#lastView").toggle();
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

<button id="btnToggle" class="btn btn-primary">Toggle Views</button>

<div id="firstView">
  <h2>First View</h2>
  <p>I am the default view. I will be displayed when the view renders.</p>
  <p>Then I will gracefully hide when the toggle button is clicked.</p>
</div>

<div id="lastView" style="display: none">
  <h2>Alternate View</h2>
  <p>I am the alternate view. I will be quietly standing by invisible until the toggle button is clicked.</p>
</div>
```

# javascript - LocalStorage 未传递给独立的 Web 应用程序

> ID：14720063
> 
> 赞同：3
> 
> 时间：2013-02-06T01:25:49.577
> 
> 标签：javascript, ios, html, local-storage, offline-caching

我只需要在 iOS 独立网络应用程序（使用`apple-mobile-web-app-capable`等）中保留一些简单的数据。数据是在用户访问该站点时定义的，并保存到`localStorage.name`等。同一页面“保存到主屏幕”但是当我到达那里时，输出`localStorage.name`等返回`undefined`。

我回到 Safari，它仍然知道这些信息。我用笔记本电脑的开发者控制台把它拉出来，我仍然可以得到所有的数据。它甚至不是一个不同的页面，更不用说不同的域或任何东西了。我读到的所有内容都告诉我`localStorage`应该在 Safari 和独立应用程序之间共享（修改该数据的小警告）。我错过了什么？

这是代码的要点：

```
if (!window.navigator.standalone) {
    // show Safari content
    if (localStorage.name != void 0 && localStorage.var2 != void 0) {
        // show normal, "add this to your home screen" language -
        // this screen shows properly
    } else {
        // show "We weren't passed our variables" language
    }
} else {
    // Show standalone/offline content
    if (localStorage.name != void 0 && localStorage.var2 != void 0) {
        // Show normal standalone app content using localStorage variables.
        // I'm not seeing this.
    } else {
        // Show "error" text, which is what I'm getting
        document.body.removeChild(document.getElementById('container'));
        var helper = document.createElement('section')
            helper.id="helper"
        helper.innerHTML = '<h1>Sorry</h1>'
          +   '<p>There seems to be a problem with the app.</p>'
          +   '<pre>'
          +   "  Name: " + localStorage.name + "\n"
          +   "  var2: " + localStorage.var21 + "\n"
          +   '</pre>';
        document.body.insertBefore(helper,document.body.firstChild)
    }
} 
```

对于它的价值，我在 iOS 6.1 中。所以它不应该是一个“老”的问题。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T01:51:45.927

此评论：[iOS 'Web App' 的 localStorage 与 Mobile Safari 不同](https://stackoverflow.com/questions/11545149/ios-web-app-has-different-localstorage-than-mobile-safari/12123291#comment17056733_12123291)

……有答案。本地存储现在与 Safari 与本机应用程序完全分离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:32:04.530

我没有使用 localStorage 对带有点符号的键的引用。但是 localStorage.setItem("key", value) 和 localStorage.getItem("key") 方法有效。

# symfony - Symfony 客户端和 DomCrawler：使用查询字符串发布

> ID：14720064
> 
> 赞同：0
> 
> 时间：2013-02-06T01:25:51.587
> 
> 标签：symfony

我在尝试 POST 到需要查询字符串的脚本时遇到问题。我正在使用下面的代码，但如果我请求没有查询字符串的页面或将查询变量设置为“”，我会得到相同的错误响应。

例如`http://example.com/login?validate`在浏览器中工作，但`http://example.com/login?validate=""`不能（页面显示错误）

我的代码：

```
$client = new Client();
$crawler = $client->request("POST","https://www.example.com/cgi-bin/login?validate", array(
    'USERNAME' => 'TEST',
    'PASSWORD' => 'TEST'
)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:13:13.200

*通常你会使用这样的路线：*

```
$client->request('POST', '/login', array(
    'USERNAME' => 'TEST',
    'PASSWORD' => 'TEST'
    )
); 
```

* * *

在您的特定情况下，我认为您不需要添加`?validate`，因为它应该在您提交表单时触发：

```
$client->request('POST', 'https://www.example.com/cgi-bin/login', array(
    'USERNAME' => 'TEST',
    'PASSWORD' => 'TEST'
    )
); 
```

* * *

另外，请确保您的字段是`USERNAME`和不是`username`，它区分大小写。

# c - 如何在 C 中读取不确定大小的字符数组？

> ID：14720068
> 
> 赞同：0
> 
> 时间：2013-02-06T01:26:33.380
> 
> 标签：c, arrays, file, io, character

我已经尝试了递归和迭代方法，但我一直遇到存储不确定长度的字符串的问题。如果它们是某种库或 Api 调用，它会一直读取到下一个空格，这将证明非常有用。

但本质上，我需要创建一个包含字符数组的结构数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T02:18:20.137

使用 malloc 和 realloc 为您的输入腾出空间。选择一个合理的起始大小（您必须对预期有多少字符有所了解）。每次重新分配时，将大小加倍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T02:03:53.177

我想这个例子显示了你在寻找什么。我建议玩弄`malloc`并`free`发现它的行为。`goto`还要阅读 goto 的评论，除非你真的知道你在做什么，否则不要使用。使用它，您可能会非常容易失败。一个`while`带有 if 的循环来检查缓冲区是否溢出下一个字符会更好，但我很懒所以我保持原样。如果您还有任何问题，请询问。

```
#include <malloc.h>
#include <string.h>

int main( ) {
  unsigned bufferSize = 0; // our array size
  int i = 0; // current position in buffer
  // we allocate memory for our buffer
  char *buffer = (char *)malloc( bufferSize += 10 );

  int ch = EOF; // set to eof, we will use this to buffer input

  // read input until buffer is full
repeat_input:
  for( ; i < bufferSize; i++ ) { // a while loop would be better for this job...
    ch = fgetc( stdin );
    if( ch == ' ' ) {
      // if there is a space we can break here
      goto done; // this is bad coding practice, i am just a bit lazy now
    }
    buffer[ i ] = ch;
  }

  // keep our old buffer pointer to not create a memleak
  char *old_buffer = buffer;
  buffer = (char *)malloc( bufferSize += 10 );

  // copy content of old buffer to new one
  int k = 0;
  for( k = 0; k <= i; k++ ) {
    buffer[ k ] = old_buffer[ k ];
  }

  // free RAM, else we have a memleak
  free( old_buffer );
  goto repeat_input;

done:
  fputs( buffer, stderr );
  free( buffer );
  return 1;
} 
```

# android - 空指针异常 Android onTouchListener onClickListener setText

> ID：14720069
> 
> 赞同：0
> 
> 时间：2013-02-06T01:26:33.933
> 
> 标签：android

刚开始编写 android 应用程序并不断收到空指针异常，我不知道为什么。我对此进行了一些研究，似乎大多数人都因为 setContentView 而得到了这个，但似乎其他人都说我的 setContentView 在正确的空间等......

```
int randInt;
int[] randColor = {Color.RED,Color.BLUE,Color.GREEN,Color.YELLOW,Color.BLACK,
                Color.CYAN,Color.MAGENTA,Color.LTGRAY,Color.DKGRAY,Color.WHITE};
TextView textView1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    final Button button1 = (Button) findViewById(R.id.button1);
    button1.setOnClickListener(this);
    View layout = findViewById(R.layout.activity_main);
    layout.setOnTouchListener(this);
    textView1 = (TextView) findViewById(R.id.textView1);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
    public void onClick(View v) {
        setBackGroundColor(randInt);
    }

@Override
public boolean onTouch(View v, MotionEvent e){
    float xPos = e.getX();
    float yPos = e.getY();
    changeText(xPos,yPos);
    return true;
}

public void setBackGroundColor(int randInt){
    getWindow().setBackgroundDrawable(new ColorDrawable(randColor[getRandomInt()]));
}

public int getRandomInt(){
        Random randomInt = new Random();
        randInt = randomInt.nextInt(10);
        return randInt;
}

public void changeText(float xPos, float yPos){
    textView1.setText("You are at " + xPos + " , " + yPos);
} 
```

}

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="66dp"
    android:text="@string/button" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:29:50.507

为您的布局分配一个 id：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" 
android:id="@+id/my_layout"> 
```

然后像这样更改您的代码：

```
View layout = findViewById(R.id.my_layout); 
```

`findViewByID()`，就像方法名称所说的那样，需要一个 ID。传递一个布局*确实*传递了一个 int，所以它编译得很好，但你不太可能匹配一个 id，并且方法返回`null`.

如果其他任何内容也返回 null，请确保您的布局（及其子视图）包含在调用的 xml 文件中`activity_main.xml`，并且您已清理您的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T01:34:55.570

而不是这个声明

```
View layout = findViewById(R.layout.activity_main); 
```

将其更改为

```
View layout = findViewById(android.R.id.content); 
```

`findViewById(android.R.id.content)`表示你想获得一个内容视图`Activity`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T01:35:22.780

将您的 setContentView 行替换为：

```
LayoutInflater inflater = LayoutInflater.from(this);
View view = (View) inflater.inflate(R.layout.activity_main); // can't remember if casting is necessary here
setContentView(view); 
```

# python - 是否有任何 Python IDE 可以让您像 R 一样运行选择的代码？

> ID：14720070
> 
> 赞同：8
> 
> 时间：2013-02-06T01:26:39.480
> 
> 标签：python, ide

我认为这对初学者来说是一个非常有用的功能。当我学习 R 时，我会将每节课的笔记保存在一个文件中，并执行我想要的行。现在我正在学习 Python，我必须将每个新事物保存在不同的文件中。没有 IDE 可以做 R 做的事情吗？我目前正在使用 PyCharm。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T14:05:02.587

在 PyCharm 中，选择要执行的代码片段，然后选择“在控制台中执行选择”（我的键盘映射中的 Alt+Shift+E）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T11:53:44.043

[PyScripter](http://code.google.com/p/pyscripter/)支持选择性执行 ( `Ctrl`+ `F7`) 以及许多其他功能，其中包括正则表达式测试器、单元测试、调试（使用手表）以及 IDE 必须具备的所有其他功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T01:34:25.913

[ipython notebook](http://ipython.org/ipython-doc/dev/interactive/htmlnotebook.html)在这方面做得很好。适合学习和代码探索。

不幸的是，设置起来有点麻烦。如果您刚刚开始，您可能需要考虑安装 python 的[pythonXY](https://code.google.com/p/pythonxy/wiki/Downloads)包，除了标准库之外，它还包括 ipython notebook 和一堆其他有用的库。

这里有一个很好的介绍（ipython notebook 大约在 1:15:45 开始）：

[http://www.youtube.com/watch?v=2G5YTlheCbw](http://www.youtube.com/watch?v=2G5YTlheCbw)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T02:52:47.047

[Wing IDE](http://www.wingware.com/)可以为您完成这项任务。

# jquery - 如何交换 - slideToggle 同时切换两个对象？

> ID：14720072
> 
> 赞同：0
> 
> 时间：2013-02-06T01:26:50.557
> 
> 标签：jquery

目前我们有以下 jQuery 来隐藏一个选项并显示另一个选项。我们如何给它一个更平滑的过渡，让旧的滑动/淡入，新的滑动/淡入？

```
function pdi_click() {
if ($('#weekendpass').is(":checked") == true) {
    $('.pdioption2').hide('fast');
    $('input[name=pdinotattending]').attr('checked', false);

    $('.pdioption1').show('fast');

} else {
    $('.pdioption1').hide('fast');
    $('input[name=pdiattending]').attr('checked', false);
    $('.pdioption2').show('fast');

} 
```

请参阅 jsfiddle 以推荐 jQuery 建议。

[http://jsfiddle.net/JoshSalway/8YSRm/](http://jsfiddle.net/JoshSalway/8YSRm/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:36:40.660

尝试使用`slideToggle`为完整函数指定的回调。

```
function pdi_click() {
    if ($('#weekendpass').is(":checked") == true) {
        $('.pdioption2').slideToggle('slow', function(){
            $('.pdioption1').slideToggle('slow');
        });
        $('input[name=pdinotattending]').attr('checked', false);
    } else {
        $('.pdioption1').slideToggle('slow', function(){
            $('.pdioption2').slideToggle('slow');
        });
        $('input[name=pdiattending]').attr('checked', false);
    }
    //add_cost(25);
    //update_cost();
} 
```

示例：http: [//jsfiddle.net/8YSRm/2/](http://jsfiddle.net/8YSRm/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T01:37:59.513

将您想要的元素设置为 CSS`position:absolute;`并使用该`.fadeTo()`方法

`**[LIVE DEMO](http://jsfiddle.net/HU8Nu/2/)**`

**CSS：**

```
.pdioption1, .pdioption2{
    position:absolute;  
} 
```

**问：**

```
$(document).ready(function () {
    // This is more like it!
});

function pdi_click() {
    if ($('#weekendpass').is(":checked") == true) {
        $('.pdioption2').fadeTo(800,0);
        $('input[name=pdinotattending]').attr('checked', false);

        $('.pdioption1').fadeTo(800,1);

    } else {
        $('.pdioption1').fadeTo(800,0);
        $('input[name=pdiattending]').attr('checked', false);
        $('.pdioption2').fadeTo(800,1);

    }
    //add_cost(25);
    //update_cost();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T01:39:20.657

确保完成一个动画。动画下一个作为回调：

[http://jsfiddle.net/8YSRm/4/](http://jsfiddle.net/8YSRm/4/)

```
$('.pdioption1').hide('fast',function(){
            $('input[name=pdiattending]').attr('checked', false);
            $('.pdioption2').show('fast');
}); 
```

# html - 用户登录教程

> ID：14720080
> 
> 赞同：0
> 
> 时间：2013-02-06T01:27:23.550
> 
> 标签：html, login

我想用基本的（用户名、密码）创建一个原始的 HTML 登录表单。但是，我很难找到初学者教程。如果有人可以向我指出一些资源，我将不胜感激。我只有一点点 HTML、PHP、SQL 和 PHP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T01:41:13.010

这是一个具有中级安全性的基本注册和登录系列。它使用 PHP 和 MySQL。这应该会有所帮助。

[注册登录系列](http://www.youtube.com/course?list=ECE134D877783367C7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T01:29:50.190

[http://www.html-form-guide.com/php-form/php-login-form.html](http://www.html-form-guide.com/php-form/php-login-form.html)

您将需要一些服务器端语言来实际处理 html 表单，php 可能是不错的选择。

# django - Django - 如何在我的应用程序文件夹中添加 admin.py？

> ID：14720081
> 
> 赞同：-1
> 
> 时间：2013-02-06T01:27:28.317
> 
> 标签：django, django-admin

我需要添加`admin.py`到我的应用程序文件夹中。

目前 app 文件夹包含以下文件：

```
__init__.py
models.py
test.py
views.py 
```

任何帮助都会做:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T01:37:12.720

教程说要`admin.py`在`polls`目录中编辑。但是，如果您只是开始一个新项目`admin.py`将不存在。

您可以简单地创建一个空白`admin.py`文件并添加教程建议的内容。启用管理应用程序时，Django 将自动注意到此文件中的任何管理设置。

# ios - 如何使 iOS 应用程序进入挂起状态以测试后台任务行为？

> ID：14720083
> 
> 赞同：4
> 
> 时间：2013-02-06T01:27:45.643
> 
> 标签：ios

为了对在后台运行的应用程序进行 QA，我希望能够使其进入挂起状态。有没有可靠的方法来触发这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T01:34:20.503

如果您想运行将您的应用程序置于后台的自动化测试，您将需要使用 UIAutomation。您可以专门查看[UIATarget.deactivateAppForDuration()](http://developer.apple.com/library/ios/documentation/ToolsLanguages/Reference/UIATargetClassReference/UIATargetClass/UIATargetClass.html#//apple_ref/javascript/instm/UIATarget/deactivateAppForDuration)，它将完成您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T01:34:57.543

只需打开一个外部 URL，您的应用程序就会移至后台以支持 Safari：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://www.google.com"]]; 
```

**编辑：** 我以前从未使用过 UIAutomation，但看看我认为 KevinH 的答案应该更适合你的情况。

# objective-c - 尝试使用 NSTask 运行 cli 失败

> ID：14720087
> 
> 赞同：0
> 
> 时间：2013-02-06T01:28:08.860
> 
> 标签：objective-c, cocoa, nstask

我正在尝试在可可应用程序中运行以下内容：

cat PATHTOFILE | python -mjson.tool > 输出文件

```
 NSTask *task = [[NSTask alloc] init];
    [task setLaunchPath: @"/bin/cat"];

    NSArray *arguments = [NSArray arrayWithObject: path];
    [task setArguments: arguments];

    NSPipe *pipe = [NSPipe pipe];
    [task setStandardOutput:pipe];
    [task launch];

    NSTask *task2 = [[NSTask alloc] init];
    [task2 setLaunchPath:@"/usr/bin/python"];
    NSArray *arguments2 = [NSArray arrayWithObject:[NSString stringWithFormat:@"-mjson.tool > %@.beautify", path]];
    [task2 setArguments:arguments2];
    [task2 setStandardInput:pipe];

    NSPipe *pipe2 = [NSPipe pipe];
    [task2 setStandardOutput:pipe2];
    [task2 launch]; 
```

但是我收到以下错误：/usr/bin/python：不支持按文件名导入。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:21:43.740

看起来更像是一个 Python 错误。

`/usr/bin/python -mjson.tool`调用以下文件：（从终端使用时）

`/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/tool.py`

其内容是

```
""" headers..."""
import sys
import json

def main():
    if len(sys.argv) == 1:
        infile = sys.stdin
        outfile = sys.stdout
    elif len(sys.argv) == 2:
        infile = open(sys.argv[1], 'rb')
        outfile = sys.stdout
    elif len(sys.argv) == 3:
        infile = open(sys.argv[1], 'rb')
        outfile = open(sys.argv[2], 'wb')
    else:
        raise SystemExit(sys.argv[0] + " [infile [outfile]]")
    try:
        obj = json.load(infile)
    except ValueError, e:
        raise SystemExit(e)
    json.dump(obj, outfile, sort_keys=True, indent=4)
    outfile.write('\n')

if __name__ == '__main__':
    main() 
```

您的任务无法解析这些导入语句。肯定是因为它不像终端那样了解，也找不到这个......请参阅[NSTask 没有以正确的路径启动 Python](https://stackoverflow.com/questions/14026634/nstask-is-not-launching-python-with-correct-path/14048100#14048100)

# java - 插入时应为每个线程分配唯一的 id

> ID：14720092
> 
> 赞同：0
> 
> 时间：2013-02-06T01:28:41.523
> 
> 标签：java, multithreading, blockingqueue

我需要插入有两列的数据库 -

```
ID Primary Key String
Data String 
```

所以这意味着ID每次都应该是唯一的，否则`duplicate row in unique index`插入时会抛出异常。我需要在这个范围内选择 ID`1-100000`

所以这意味着每个线程应该始终使用唯一的 id-

下面是我编写的多线程程序，每次从`ArrayBlockingQueue`.

那么这个程序是否是线程安全的？或者有没有其他更好的方法来每次为每个线程获取唯一 ID？或者下面的程序会导致`duplicate row in unique index`？

```
private static LinkedList<Integer> availableExistingIds = new LinkedList<Integer>();

public static void main(String[] args) {

        for (int i = 1; i <= 100000; i++) {
            availableExistingIds.add(i);
        }

        BlockingQueue<Integer> pool = new ArrayBlockingQueue<Integer>(200000, false, availableExistingIds);

        ExecutorService service = Executors.newFixedThreadPool(10);

            for (int i = 0; i < noOfTasks * noOfThreads; i++) {
                service.submit(new ThreadTask(pool));
            }
}   

class ThreadTask implements Runnable {

    private BlockingQueue<Integer> pool;
    private int id;

    public ThreadTask(BlockingQueue<Integer> pool) {
        this.pool = pool;
    }

    @Override
    public void run() {

         try {
            dbConnection = getDBConnection();
            preparedStatement = dbConnection.prepareStatement(INSERT_SQL);

            id = pool.take();

            preparedStatement.setString(1, String.valueOf(id));
            preparedStatement.setString(2, ACCOUNT);

            preparedStatement.executeUpdate();

       } finally {
         pool.offer(id);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T01:33:42.463

这`pool.offer(id)`意味着您将使用过的 id 放回队列中 - 以便稍后可以由另一个线程重用。这可能会成为一个问题（因为队列是 FIFO，您将在第 100,001 次插入时获得重复的 ID）。

[`AtomicInteger`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicInteger.html)在任何情况下，当一个静态函数不需要使用队列就可以做同样的事情时，这似乎非常复杂：

```
class ThreadTask implements Runnable {

    private final AtomicInteger id;

    ThreadTask(AtomicInteger id) {
        this.id = id; //in your main thread: id = new AtomicInteger(minId);
    }

    @Override
    public void run() {
        dbConnection = getDBConnection();
        preparedStatement = dbConnection.prepareStatement(INSERT_SQL);

        preparedStatement.setString(1, String.valueOf(id.getAndIncrement()));
        preparedStatement.setString(2, ACCOUNT);

        preparedStatement.executeUpdate();
    }
} 
```

注意：正如评论的那样，您的数据库可能会为您分配唯一的 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T01:46:49.660

一`identity`列是数据库在每次插入时为其分配一个新的唯一值的列。看[这里](http://msdn.microsoft.com/en-us/library/aa933196%28v=SQL.80%29.aspx)

我不知道这个`XpressMP`数据库，但你应该在文档中搜索`identity`or`auto-increment`类型。您也可以`guid`以稍高的成本使用一种类型。

请记住，当程序重新启动时，您必须在最后分配的 ID 之后开始。但是您仍然不需要队列，只需要一个`IdProvider`具有同步`nextId`方法的类，该方法递增并返回已初始化为最后分配的 id 的私有变量。

# java - 密码管理

> ID：14720096
> 
> 赞同：4
> 
> 时间：2013-02-06T01:29:13.143
> 
> 标签：java, encryption, passwords, password-encryption

我有一个关于密码管理的问题。假设我有一个程序，用户输入密码，数据被加密存储。

一种方法是：使用用户密码加密数据。优点：用户将负责密码的安全性以及您的数据的安全性。缺点：如果用户更改密码，则必须解密和加密所有数据。

否则：数据使用用户以外的密码加密（随机）。以及用于加密随机密码的用户密码。优点：如果用户更改密码，则不必重新加密所有内容。

至于保存用户密码，我使用的是 jasypt.org。没事吧？正确的方法是什么？我认为弱点在于加密器 Jasypt。使用 AES-128 加密的数据。使用 Jasypt，因为这就是我所知道的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T01:38:10.133

通常，您应该使用密码加密*数据密钥*。

要加密，首先将密码转换为密钥。您将为此使用基于密码的密钥派生函数（PBKDF）。PBKDF2 目前是最标准的选项。

您使用随机生成的密钥加密数据。该密钥又使用从密码生成的密钥进行加密。

要更改密码，请先询问原始密码。然后解密数据密钥。然后，您可以要求输入新密码并重新加密数据密钥。加密数据本身不必被触及。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T01:35:58.627

基本上你想用`salted password hashing`. [CrackStation](http://crackstation.net/hashing-security.htm)有一篇关于这个主题的非常好的文章。

# linux - 当我想启动我的 linux 时出现很多错误

> ID：14720097
> 
> 赞同：-1
> 
> 时间：2013-02-06T01:29:14.127
> 
> 标签：linux, centos, vmware

我在 /etc/fstab 中添加了一个新行，当我启动我的 vmware 机器（CENTOS）时，会向我显示一条错误消息：

![在此处输入图像描述](../Images/d74adb6d8f2da152aafa31ba9358877f.png) 如果我不能修改我的文件'/etc/fstab' ![在此处输入图像描述](../Images/5c07526ed82de25c8c626f82d71218a4.png)

如果我想执行“startx”来显示我的桌面：

![在此处输入图像描述](../Images/6b926c89b1bab8b044728302b71c7c07.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T02:05:01.180

解决方案： 1)mount -o remount,rw / , 2)vi /etc/fstab 3) 删除新行 :D

# struts2 - 在 Struts2 HOWTO 中，为未放置在标准 /struts/、/template/ 目录中的静态内容设置缓存头

> ID：14720098
> 
> 赞同：0
> 
> 时间：2013-02-06T01:29:15.653
> 
> 标签：struts2, cache-control

我有一个 Struts2（版本 2.2.6）Web 应用程序，我想在其中`Expires`为 struts2 的传统静态相关文件夹中不存在的静态资源设置响应标头。例如，它们被放置在根部的`/images/`, `/css/`,之下。`/js/`我希望所有资源都有一个自定义`Expires`响应标头。

如何在 Struts2 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:31:44.153

因此，根据@Dave 提供的提示，我提出了以下方法。

在 web.xml 设置下面的过滤器和它的映射。

```
<filter>
    <filter-name>StaticContentCacheHeaderFilter</filter-name>
    <filter-class>management.filters.StaticContentCacheHeaderFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>StaticContentCacheHeaderFilter</filter-name>
    <url-pattern>/images/*</url-pattern>
</filter-mapping> 
```

其中`StaticContentCacheHeader`有`implements Filter`以下方法 -

```
@Override
public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {

    HttpServletResponse response = (HttpServletResponse) servletResponse;
    HttpServletRequest request = (HttpServletRequest) servletRequest;

    long ifModifiedSince = 0;
    try {
        ifModifiedSince = request.getDateHeader("If-Modified-Since");
    } catch (Exception e) {
        LOG.warning("Invalid If-Modified-Since header value: '"
                + request.getHeader("If-Modified-Since") + "', ignoring");
    }

    long now = DateTime.now().getMillis();

    long lastModifiedMillis = now;

    DateTime dateTime = new DateTime();

    //1 month seems to be the minimum recommended period for static resources acc to          
    //https://developers.google.com/speed/docs/best-practices/caching#LeverageBrowserCaching
    long expires = dateTime.plusMonths(1).getMillis();

    if (ifModifiedSince > 0 && ifModifiedSince <= lastModifiedMillis) {
        // not modified, content is not sent - only basic
        // headers and status SC_NOT_MODIFIED
        response.setDateHeader("Expires", expires);
        response.setStatus(HttpServletResponse.SC_NOT_MODIFIED);
        return;
    }

    // set heading information for caching static content
    response.setDateHeader("Date", now);
    response.setDateHeader("Expires", expires);
    response.setDateHeader("Retry-After", expires);
    response.setHeader("Cache-Control", "public");
    response.setDateHeader("Last-Modified", lastModifiedMillis);

    filterChain.doFilter(servletRequest, servletResponse);
} 
```

这会将缓存标头设置为从现在起一个月后过期。

让我知道是否有更好的方法来处理这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:45:02.700

使用过滤器；一旦确定它们不是 S2 服务的资源，它们就不应该由 Struts 2 处理。

# objective-c - xcode 视图尺寸小于 iphone

> ID：14720103
> 
> 赞同：0
> 
> 时间：2013-02-06T01:30:02.937
> 
> 标签：objective-c, xcode, xib, autolayout

这在 iOS 6 之前从未发生过。
现在，我创建了一个“自动布局”，我意识到 xcode 中的大小不同，因为图像很大但在 Photoshop 中是正确的。在模拟器中创建应用程序时，我有这个：
![在此处输入图像描述](../Images/2056007d304686c9c16cbd4a6f90e6ed.png)

我一直觉得很奇怪。于是检查了 iPhone 5 的尺寸并像往常一样移动，然后看起来像这样：
![在此处输入图像描述](../Images/bcfd0779fca2fc9c7cb0f8b4dc3d3464.png)

在模拟器中创建应用程序时，看起来像这样： ![在此处输入图像描述](../Images/ed3388eaf81f1f73d382b6da8422010e.png)

我想知道 Xcode 发生了什么？有人已经经历过这个了吗？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T03:40:09.953

看起来您正在使用被识别为用于 iPad 的 XIB。在属性检查器中，您在大小下给出了哪些选项？iPad XIB 在 Attribute Inspector - Size 中有以下选项：

![在此处输入图像描述](../Images/d227f526d9884646351f075abfc4f6bd.png)

如果这是您所看到的，您可能必须创建一个新的 XIB，并确保选择 Device Family - iPhone。

# database - SQLException: 非法连接端口值 ${env.OPENSHIFT_MYSQL_DB_PORT}

> ID：14720107
> 
> 赞同：0
> 
> 时间：2013-02-06T01:30:51.693
> 
> 标签：database, spring, hibernate, openshift

我正在尝试将一个相当基本的 Spring+Hibernate Web 应用程序部署到我新创建的应用程序中。（我是openshift的新手）。

我从知识库中遵循[了这个例子。](https://openshift.redhat.com/community/kb/kb-e1076-default-database-connectivity-configurations-for-jboss-applications)

但是在部署应用程序后，我得到了

```
..
java.sql.SQLException: Illegal connection port value '${env.OPENSHIFT_MYSQL_DB_PORT}'
    com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1055)
    com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)
    com.mysql.jdbc.SQLError.createSQLException(SQLError.java:926)
    com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2018)
.. 
```

我在 applicationcontext.xml 中定义了数据源

这是我定义 deta shource 的 applicationContext.xml 中的部分（eli 是数据库名称）

```
<bean id="dataSource"
          class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"
          p:driverClassName="${jdbc.driverClassName}"
          p:url="jdbc:mysql://${env.OPENSHIFT_MYSQL_DB_HOST}:${env.OPENSHIFT_MYSQL_DB_PORT}/eli" p:username="${jdbc.username}"
          p:password="${jdbc.password}"/> 
```

知道我做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:59:47.877

您收到的错误似乎表明 Spring XML 配置中的属性替换字符串实际上并未由 Spring 处理。您可以在配置中添加一个`PropertyPlaceholderConfigurer`以启用系统环境中的处理：

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
  <property name="searchSystemEnvironment" value="true" />
  ...
</bean> 
```

# c++ - 理解虚拟拷贝构造函数

> ID：14720110
> 
> 赞同：4
> 
> 时间：2013-02-06T01:30:53.770
> 
> 标签：c++, class, copy-constructor

我无法理解我用来学习 C++ 的书中的代码到底发生了什么。这是代码：

```
class Base
{
    public:
        Base() {};
        virtual ~Base() {};

        virtual Base* Clone() {return new Base(*this);}
};

class Derived
{
    public:
        Derived() {};
        virtual ~Derived() {};

        virtual Base* Clone() {return new Derived(*this);}
}; 
```

所以在这个`Clone()`函数中，我理解该函数返回一个指向基类对象的指针。我不明白该函数中发生了什么。当我以前使用`new`as in 时`int *pInt = new int`，我的印象是`new`基本上在空闲存储上为整数分配了足够的内存，然后返回该地址，将地址应用于指针`pInt`。使用相同的逻辑，我试图理解`new Derived(*this)`代码的一部分。所以，我认为它在空闲存储上为 Derived 类对象分配了足够的内存，并返回地址，然后由函数返回`Clone()`。

但是，如果它是构造函数，为什么它会`*this`通过构造函数？我理解`*this`意味着它传递正在克隆的任何对象的地址，但我不理解函数`class_name(address_of_an_object)`上下文中的语法。`new`

有人可以解释那部分发生了什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T01:36:45.157

误会就在这里：

> `*this`意味着它传递正在克隆的任何对象的地址

实际上，`this`是被克隆的对象的地址，但是`*this`（注意星号）是*取消引用*该地址的结果。`*this`type 也是如此`Derived &`，它是对被克隆对象的引用，而不是它的地址。

因此，调用`new Derived(*this)`意味着在动态分配空间之后（这是什么`new`），新空间由复制构造函数初始化`Derived(const Derived &)`，在这种情况下实际上并没有被用户定义，所以（编译器生成的）默认版本使用了复制构造函数。

* * *

澄清 的语义`new`：如果`C`是一个类，那么

```
new C; 
```

为类型的对象分配足够的空间，`C`然后调用构造函数`C`来初始化该空间。这是语义的一部分`new`：它总是调用构造函数来初始化新分配的空间。

你打电话时

```
new C(a,b,c); 
```

带有一些参数`a`,`b`和`c`, 然后`new`将调用一个带有`C`这三个参数的构造函数。如果没有定义这样的构造函数，你会得到一个编译器错误。

现在在你打电话的特殊情况下

```
new C(a); 
```

使用`a`本身为 type的参数`C&`，`new`将一如既往地调用适当的构造函数。适当的构造函数是`C(C &)`（如果已定义）或`C(const C&)`（由编译器自动定义的复制构造函数）。

# java - 我正在尝试做一个简单的 if/else 语句，但由于某种原因，我遇到了运行时错误

> ID：14720112
> 
> 赞同：-2
> 
> 时间：2013-02-06T01:30:57.503
> 
> 标签：java, runtime-error

我将此代码用于一个简单的 if/else 语句，如果 x 大于 y 将求和答案，如果 x 不大于 y 将减去它！出于某种原因，我遇到了运行时错误。

谁能帮我这个？代码是：

```
import java.util.Scanner;

public class calculation
{
    public static void main(String[] args)
    {      
        int x,y,answer;

        Scanner kb = new Scanner(System.in);
        System.out.println(" Enter x & Y " );

        x = kb.nextInt();
        y = kb.nextInt();

        if (x > y) {    
            answer = (x + y);
        }  
        else if (x < y) {
            answer=(x-y);
        }

    }
} 
```

这是我收到的消息：警告：永远不会读取局部变量答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T01:46:45.923

如果您遇到的错误是这样的：

```
Foo.java:23: error: variable answer might not have been initialized
        System.out.print("answer is " + Integer.toString(answer)); 
```

那么问题是`answer`可能没有设置任何值，并且计算机放弃并打印错误消息而不是可能返回垃圾。

怎么`answer`不能有一个值集？你设置`answer`为`x+y`if `x>y`，如果`x<y`你设置`answer=x-y`; 但如果`x=y`？没有什么可以告诉计算机在这种情况下该做什么。尽管对于您在程序中键入的特定输入`x`可能不等于输入和`y`的相等值。`x``y`

您可以通过更改`x>y`为`x>=y`、 或或添加第三种情况`x<y`来解决此问题。`x<=y``x==y`

* * *

如果您收到的警告是

```
Warning: The local variable answer is never read 
```

然后你需要添加一个`answer`以某种方式使用的语句，例如在方法的末尾添加这个：

```
System.out.print("answer is " + Integer.toString(answer)); 
```

但是，请注意，这只是一个*警告*，而不是*错误*，因此即使弹出消息，它也应该运行良好——试试吧！当然，您将无法看到`answer`得到了什么值，因为正如警告所说，`answer`在当前代码中永远不会读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:55:21.493

```
int x,y, answer;

Scanner kb = new Scanner(System.in);

  System.out.println(" Enter x & Y " );

  x= kb.nextInt();
  y= kb.nextInt();

  if (x>y)
    answer= (x+y);
  else
    answer=(x-y);
System.out.println("the answer is " + answer); 
```

并且因为您使用扫描仪，所以您应该导入 java.util.Scanner；

# twitter - 用户每次都被迫授权我的应用程序

> ID：14720113
> 
> 赞同：0
> 
> 时间：2013-02-06T01:31:01.757
> 
> 标签：twitter, twitter-oauth, tweepy

我正在使用 tweepy api 进行 oauth：[http ://packages.python.org/tweepy/html/auth_tutorial.html#oauth-authentication](http://packages.python.org/tweepy/html/auth_tutorial.html#oauth-authentication)

第一次，用户被要求授权我的应用程序。但是从第二次开始，我不希望用户再次被要求授权我的应用程序。

## 教程说

保存访问令牌以供以后使用是个好主意。您不需要每次都重新获取它。Twitter 目前不会使令牌过期，因此它唯一会失效的情况是用户撤销我们的应用程序访问权限。存储访问令牌取决于您的应用程序。基本上你需要存储 2 个字符串值：key 和 secret：

auth.access_token.key

auth.access_token.secret

* * *

我计划将 access_token 密钥和秘密存储到会话中。当用户第二次使用我的应用程序时，我将只使用 access_token，因此用户不会被迫再次授权我的应用程序。

但是，问题是当许多 twitter 用户使用我的应用程序时会发生什么，我怎么知道哪个 access_token 属于哪个用户。

我希望我的问题很清楚。

1.  停止 twitter 以强制用户从第二次开始授权我的应用程序。

2.  如果我需要存储access_token来解决（1），我怎么知道哪个access_token属于哪个用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:47:29.567

You need to implement session management in your web app and associate session IDs with your user model which stores the auth information. You don't say what language you are using but if you use the Ruby on Rails framework then session management is easily done. I recommend the Devise gem with omniauth-twitter ([https://github.com/arunagw/omniauth-twitter](https://github.com/arunagw/omniauth-twitter)).

# batch-file - 我不知道我的批处理文件出了什么问题

> ID：14720119
> 
> 赞同：-1
> 
> 时间：2013-02-06T01:32:18.940
> 
> 标签：batch-file

帮助！我正在制作一个批处理文件，您可以制作一个人员列表。然后当有人到达时，你可以输入他们的名字，它会检查他们是否在名单上。当批处理文件检查此人是否在列表中时它不起作用（我没有使用大写字母并且我拼写正确）我需要弄清楚我的批处理文件有什么问题，它不起作用。所以主要问题是当它检查列表中的人时，它没有找到它。对不起，我不完全确定如何表达这一点。:) 这是我的程序的代码。

```
@echo off
title Event Starter
echo Event Starter
set /p Eventname=Event Name: 
cls
goto :Participants

:Participants
title Name Of Participants
set /p Name1=Name: 
cls
set /p Name2=Name: 
cls
set /p Name3=Name: 
cls
set /p Name4=Name: 
cls
set /p Name5=Name: 
cls
set /p Name6=Name: 
cls
set /p Name7=Name: 
cls
set /p Name8=Name: 
cls
pause
goto :checker

:checker
title Enter Person's Name
echo Enter Who Arrived To Check The Database
echo.
echo.
echo.
set /p check1=
goto :database

:database
title Checking Database For The Given Person
echo Checking Database For The Given Person
cls
echo 5 %
ping 1.1.1.1 -n 1 -w 5000 > nul
cls
echo 20 %
ping 1.1.1.1 -n 1 -w 5000 > nul
cls
echo 35 %
ping 1.1.1.1 -n 1 -w 5000 > nul
cls
echo 50 %
ping 1.1.1.1 -n 1 -w 5000 > nul
cls
echo 70 %
ping 1.1.1.1 -n 1 -w 5000 > nul
cls
echo 85 %
ping 1.1.1.1 -n 1 -w 5000 > nul
cls
echo 100 %
ping 1.1.1.1 -n 1 -w 5000 > nul
if %check1%==%Name1% goto :valid
if %check1%==%Name2% goto :valid
if %check1%==%Name3% goto :valid
if %check1%==%Name4% goto :valid
if %check1%==%Name5% goto :valid
if %check1%==%Name6% goto :valid
if %check1%==%Name7% goto :valid
if %check1%==%Name8% goto :valid
goto :invalid

:valid
title %check% Is On The List!
echo %check% Is On The List!
ping 1.1.1.1 -n 1 -w 5000 > nul
ping 1.1.1.1 -n 1 -w 5000 > nul
pause
goto :checker

:invalid
title %check% Is Not On The List!
echo %check% is Not On The List!
echo This Is Case-Sensative
ping 1.1.1.1 -n 1 -w 5000 > nul
ping 1.1.1.1 -n 1 -w 5000 > nul
goto :checker 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:51:34.767

老实说，那里有很多不必要的行，所以我没有指出错误，而是将您的脚本重写为一个更清晰的版本，希望这也能解决您遇到的问题！:)

```
@echo off
title Event Starter
setlocal enabledelayedexpansion
echo Event Starter
set /p Eventname=Event Name: 
cls
title Name Of Participants
for /l %%a in (1,1,8) do (
set /p Name[%%a]=Name: 
cls
)

:checker
title Enter Person's Name
echo Enter Who Arrived To Check The Database
echo.
echo.
echo.
set /p check1=

title Checking Database For The Given Person
echo Checking Database For The Given Person
cls
for %%b in (5,20,35,50,70,85,100) do (
echo %percent%%
ping 1.1.1.1 -n 6 > nul
cls
)
for /l %%a in (1,1,8) do (
if !check1!==!Name[%%a]! goto :valid
)
goto :invalid

:valid
title %check% Is On The List!
echo %check% Is On The List!
ping 1.1.1.1 -n 1 -w 10000 > nul
goto :checker

:invalid
title %check% Is Not On The List!
echo %check% is Not On The List!
echo This Is Case-Sensative
ping 1.1.1.1 -n 1 -w 10000 > nul
goto :checker 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T07:04:13.990

--EDIT-- 修正了代码。它现在应该可以工作了。

```
setlocal enabledelayedexpansion

:a
    cls
    set/p name=Name: 
    for /f "delims=" %%i in (File_path) do (
       set name2=%%i
       if /i !name! equ !name2! goto b
       )
    cls
    echo They're not on the list...
    pause
    goto a
:b
    cls
    echo They're on the list...
    pause
    goto a 
```

该脚本会检查文件中是否包含用户定义的名称 ( `name`)。如果是，那么它会将其发送给`:b`哪个报告给您，说他们在列表中。`goto`您可以通过将命令替换`exit /b 2`为 for true（它们在列表中）和`exit /b 3`for false（它们不在） 来将其修改为一个函数。

每个名称都应位于单独的行上，如下所示。`/i`由于打开了`if`命令，大写无关紧要。

```
Mark Finch
Julie Fernz
Tom Riddle... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T01:55:29.987

我不熟悉语法，但是输入初始名称的方式（例如`set /p Name1=Name:`）与输入要检查的名称的方式（`set /p check1=`）之间存在差异。这很重要吗？

# .htaccess - htaccess - 重写 URL 以删除原始文件名并替换为 GET 值

> ID：14720120
> 
> 赞同：0
> 
> 时间：2013-02-06T01:32:19.603
> 
> 标签：.htaccess, mod-rewrite, get, url-parameters

我目前正在使用以下 htaccess 从所有文件中删除 .php 扩展名：-

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteCond %{REQUEST_URI} !/$
RewriteRule (.*) $1\.php [L]
DirectoryIndex start.php? 
```

在我的 start.php 页面上，我有一个 GET 表单 (action="start") 供用户选择那里的国家 (start?Country=USA)。

是否可以仅在起始页上重写 URL 以将 URL 显示为 mysite.com/USA？（删除“start?Country=”但在 URL 末尾包含问号）或者这会与 DirectoryIndex 规则冲突吗？

我尝试了很多我在网上找到的不同代码，但似乎没有一个能满足我的需要（通常会导致内部服务器错误）。

为任何指针干杯=）

# c - C无法存储到数组中

> ID：14720125
> 
> 赞同：0
> 
> 时间：2013-02-06T01:33:04.723
> 
> 标签：c, arrays

```
printf("\n\tHow many integers: ");
    scanf("%d", &num);

    iPtr = (int*) malloc(num * sizeof(int));

    for(i = 0; i < num; i++) {
        printf("Enter integer # %d ", i + 1);
        scanf("%d", (iPtr + i));

        temp = *(iPtr + i);
        while(temp != 0) {

            if(i == temp % 10) {
                ary[i]++;
            }
            temp /= 10;
        }
    }

    for(i = 0; i < 10; i++) {
        if(ary[i] > 0) {
            printf("digit %d : %d\n", i, ary[i]);
        }
    } 
```

我正在编写一个程序来存储整数中数字的出现，但是当我运行程序时，我看到数组不起作用

所以我想问为什么不允许我存储整数中的数字？以及如何解决？

还有 1 个问题，if(x = y) 和 if(x == y) 有什么区别

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:41:20.437

~~你的问题是这一行：~~

 ~~```
if(i == temp % 10) 
```~~ 

由于[运算符优先级](http://www.difranco.net/compsci/C_Operator_Precedence_Table.htm)， == 在 % 之前进行评估。通过用括号括起来 % 来修复：

```
if(i == (temp % 10)) 
```

 ~~另外，要回答您的其他问题以及一些挑剔的问题（事先道歉）：

*   = 是赋值，== 是相等测试。
*   根据您所说的您正在尝试做的事情，看起来您的内部 while 循环可能正在滥用 i。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T02:51:09.803

以下循环需要重新考虑

```
while(temp != 0) {

            if(i == temp % 10) {
                ary[i]++;
            }
            temp /= 10;
        } 
```

我不确定你在这里尝试什么。

首先考虑`if(i == temp % 10)`

你在这里做的事情太多了。这里 i 与 10 模数 temp 进行比较，如果它们相等，则继续将它们存储到数组中。

所以假设你刚刚开始执行这个循环。所以 i = 0 。假设您输入的第一个数字是 1023 。所以

```
i = 0
temp = 1023 
```

现在 1023%10 会给你 3 。

因此，您的 if 循环变为`if(0 == 3 )`// 它是一个相等检查。0 是否等于 3。

显然这将是错误的，因此您的内部数组循环永远不会被执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T03:45:52.467

好的，所以你几乎做对了，但我认为最大的问题是你的数组一开始就有垃圾（声明时）。

```
 int i, temp, num, *iPtr;
int ary[10] = {0};            //I can only assume you did *not* do this

//printf("\n\tHow many integers: ");
//scanf("%d", &num);
num = 2;

iPtr = malloc(num * sizeof(int));

for(i = 0; i < num; i++) 
{
    printf("Enter integer # %d ", i+1);
    scanf("%d", (iPtr +1));

    temp = *(iPtr+1);
    while(temp != 0) 
    {

        if( (i) == temp % 10)     
        {
            ary[i]++;             
        }

        temp /= 10;
    }
}

for(i = 0; i < 10; i++) 
{
    if(ary[i] > 0) 
    {
        printf("digit %d : %d\n", i, ary[i]);
    }
} 
```

该程序也不完整，因为您的循环可能在您检查到足以匹配的数字之前就结束了。即，您正在检查 temp 中是否仍然有一个数字，但您只是将它与**i**进行比较，这不会改变（因此，如果 temp 中的数字是 9，但 i 是 1，您将永远不会触发看看有一个 9 数）。

所以我修改了

```
if( (i) == temp % 10)     
{
    ary[i]++;             
} 
```

到

```
 for (int zz = 0; zz < 10; zz++)
        {
            if( (zz) == temp % 10) 
            {
               ary[zz]++;            
            }
        } 
```

现在程序计算所有数字。输出：![在此处输入图像描述](../Images/60bb0b98d75dfdfb64ca2760a0c244b7.png)

这一切都假设我什至理解你的程序是正确的。通常我不喜欢直接发布代码，但我真的不知道如何理解这一点。累了atm。：/

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T01:54:38.543

if(x=y) -> 这是一个赋值运算符。即，您将 y 的值分配给 x。这将始终将 y 分配给 x 并执行其中的语句。

if(x==y) -> 这是一个比较器操作符。在这里，您正在比较 x 的值是否等于 y。如果为 true，它将执行 {} 中的语句，否则不会。~~

# model-view-controller - 模型如何更新 MVC 模式中的视图？

> ID：14720127
> 
> 赞同：5
> 
> 时间：2013-02-06T01:33:24.240
> 
> 标签：model-view-controller, view, model, observer-pattern

我对 MVC 模式的结构感到困惑。

在谷歌搜索的某些地方，我发现该模型会更新所有订阅该模型的视图。模型如何更新 MVC 模式中的视图？

谁能通过举个例子给我一个简单而清晰的想法？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T04:58:34.393

MVC 有多种风格。听起来您可能一直在阅读有关视图观察模型更改的[监督控制器模式。](http://msdn.microsoft.com/en-us/library/ff648921.aspx)

我从你过去的问题和答案中看到你喜欢 php。我不确定监督演示者在 php 中的常见程度（我当然从未使用过它，但我很想知道其他人是否这样做）。这在 .Net 应用程序（例如 winforms）中很常见，其中模型可以数据绑定到 UI 控件。通过订阅模型事件，视图会收到模型更改的通知。

无论如何，因为我认为在 php 中尝试这会很有趣，所以我整理了一个示例：

```
<?php

$input = array(2, 3, 4, 5, 6, 7, 8, 9, 10);

$model = new model(1);
$controller = new controller(
              $model, new view($model, 0), new view($model, 2)
              );

$controller->doAction($input);

class model {
  //the model changed event
  public $modelChangedEvent = array();
  private $val;

  public function __construct($val) {
     $this->val = $val;
  }

  public function setVal($val) {
     $this->val = $val;
     //raise the model changed event because the model state has changed
     $this->raiseModelChangedEvent();
  }

  public function getSquaredVal() {
     return pow($this->val, 2);
  }

  private function raiseModelChangedEvent() {
     foreach ($this->modelChangedEvent as $handler)
        call_user_func($handler);
  }

}

class view {

  private $model;
  private $decimalPlaces;
  private $valueHistory = array();

  public function __construct($model, $decimalPlaces) {
    $this->model = $model;
    $this->valueHistory[] = $model->getSquaredVal();
    $this->decimalPlaces = $decimalPlaces;
    //listen to the model changed event and call handler
    $this->model->modelChangedEvent[] = array(
                             $this,
                             'modelChangedEventHandler'
                              );
  }

  public function showView() {
    $formatted = array_map(
                 array($this, 'getFormattedValue'), $this->valueHistory
                 );
    echo implode('<br/>', $formatted), '<br/><br/>';
  }

  public function modelChangedEventHandler() {
     $this->valueHistory[] = $this->model->getSquaredVal();
  }

  private function getFormattedValue($val) {
     return number_format($val, $this->decimalPlaces);
  }

}

class controller {

   private $model;
   private $view1;
   private $view2;

   public function __construct($model, $view1, $view2) {
     $this->model = $model;
     $this->view1 = $view1;
     $this->view2 = $view2;
   }

   public function doAction($input) {
     foreach ($input as $val) $this->model->setVal($val);
     $this->view1->showView();
     $this->view2->showView();
   }

}
?> 
```

# objective-c - For循环不删除视图？

> ID：14720129
> 
> 赞同：0
> 
> 时间：2013-02-06T01:33:26.487
> 
> 标签：objective-c, xcode, cocoa

我有以下代码：

```
 for (NSImageView *image in self.view.subviews) {
        if (image.frame.size.height == 67 && image.frame.size.width == 46) {
            [image removeFromSuperview];
        }
    } 
```

这在按下按钮时调用。我希望删除每个具有这些尺寸的 NSImageView。问题是，它只删除了一个。我必须一遍又一遍地点击按钮来清除图像。其中有 4 个。

但是，我注意到它生成的日志每次都显示最后一行被删除。我猜是因为这些图像是最顶层的。

所以我的问题是，我怎样才能让每个高度为 67、宽度为 46 的 NSImageViews 立即从视图中删除？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T02:15:18.737

The mutating array error should prevent your code from executing. Use this instead:

```
NSArray *copy = [self.views.subviews copy];

for (NSImageView *image in copy) {
    if (image.frame.size.height == 67 && image.frame.size.width == 46) {
        [image removeFromSuperview];
    }
} 
```

# android - Android 上的共享库：结构值的字符串分配 (=) 导致段错误 (dlfree)

> ID：14720132
> 
> 赞同：1
> 
> 时间：2013-02-06T01:33:46.057
> 
> 标签：android, c++, string

我目前正在为 Android 设备开发一个 C++ 共享库。

在编写测试时，在示例代码中调用函数时，我偶然发现了导致段错误（dlfree）的奇怪行为。

首先：

*   调用库函数的测试与库动态链接。
*   我还为 linux 和 windows 桌面编译了库和测试。他们在那里运行而不会导致段错误。
*   静态链接，段错误不会出现在android上。

**示例代码**

```
typedef unsigned int DBRuleID;
typedef std::string DBRuleTarget;

struct DBRule {
  DBRuleID id; //int
  DBRuleTarget target; //std::string
};

//segfault variant
bool getRule(DBRuleID id, DBRule& rule) {
  rule.target = "I am causing segfault!";
  return true;
}

//working variant
bool getRule(DBRuleID id, DBRule& rule) {
  //nothing is set
  return true;
} 
```

**分段故障**

```
Build fingerprint: 'generic/sdk/generic:3.0/HONEYCOMB/104254:eng/test-keys'
pid: 525, tid: 525  >>> /data/local/TestRulesDB <<<
signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr deadbaad
r0 deadbaad  r1 0000000c  r2 00000027  r3 00000000
 r4 00000080  r5 aff46658  r6 00013000  r7 00000004
 r8 00000004  r9 00013d3c  10 00000000  fp bec61a14
 ip ffffffff  sp bec61950  lr aff193e9  pc aff15f58  cpsr 00000030
         #00  pc 00015f58  /system/lib/libc.so
         #01  pc 00012d2a  /system/lib/libc.so (dlfree) 
```

**编辑 - 新发现**

如果传递给函数的 DBRule 结构用值初始化，则一切正常，否则会导致分段错误。

```
//works
DBRule rule_1 = { 0, "target"};

//works not
DBRule rule_1 = { 0, ""};

//works not
DBRule rule_1; 
```

**有人可以向我解释一下吗？默认情况下初始化它的最佳方法是什么？**

**问题是**

*   我做错了什么，我错过了什么？
*   是否有一种机制会尝试多次删除堆上分配的内存？

我已经在桌面上启动了 valgrind，但没有显示错误。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-20T20:48:11.343

您的问题是所有空的 std::string 对象都使用相同的位置进行内部存储：任何空 std::string 的内部存储都是相同的静态成员。STL 使用这个位置来确定它是否应该解除分配 std::string 的内部存储。

这适用于静态编译的代码，或者当您没有跨动态库边界传递空字符串时；但是当您处理动态库时，问题开始出现：可执行文件和每个动态库都将为空的 std::string 提供不同的存储位置。

所以这就是发生的事情：当这段代码执行时：

```
rule.target = "I am causing segfault!"; 
```

发生的第一件事是 rule.target 的内部存储被释放。如果 rule.target 是空的 std::string （不管它是如何得到的），那么它将指向初始化它的代码的全局空 std::string 存储。如果这在您的库中没有发生，那么您的库将断定它不是空字符串并尝试释放存储空间。但是由于这是由客户端代码静态分配的，因此您会遇到段错误。

解决此问题的一种方法是静态链接您的库（如您所见）；另一种是使用 C++ 运行时的共享版本（并要求客户端也这样做），它为空的 std::string 导出内部符号。最终的解决方案是避免在库的接口上直接或间接使用 std::string，如果您有可能接收或发送空的 std::string。

# c++ - 是否可以 random_shuffle 一个 int 元素数组？

> ID：14720134
> 
> 赞同：25
> 
> 时间：2013-02-06T01:33:49.273
> 
> 标签：c++, algorithm, shuffle

我正在阅读此内容：[http](http://www.cplusplus.com/reference/algorithm/random_shuffle/) : //www.cplusplus.com/reference/algorithm/random_shuffle/ 并想知道它是否可以 random_shuffle 一个 int 元素数组。这是我的代码

```
#include <iostream>
#include <algorithm>

using namespace std;

int main()
{
    int a[10]={1,2,3,4,5,6,7,8,9,10};

    cout << a << endl << endl;

    random_shuffle(a[0],a[9]);

    cout<<a;
} 
```

我收到了这个错误：

```
error C2893: Failed to specialize function template
    'iterator_traits<_Iter>::difference_type *std::_Dist_type(_Iter)'. 
```

我的问题是：

1.  是否可以使用`random_shuffle`. 如果是，我想学习如何做到这一点。

2.  `random_shuffle`仅适用于模板吗？

3.  我的错误是什么意思？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-02-06T01:35:42.053

您需要传递指向`a[0]`and`a[10]`的指针，而不是元素本身：

```
random_shuffle(&a[0], &a[10]); // end must be 10, not 9 
```

在 C++11 中，您可以使用`std::begin`and `std::end`：

```
random_shuffle(std::begin(a), std::end(a)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T01:41:35.677

尝试更换

```
random_shuffle(a[0],a[9]); 
```

和

```
random_shuffle(&a[0], &a[10]); 
```

来自：[http ://www.java2s.com/Code/Cpp/STL-Basics/Userandomshufflealgorithmswitharray.htm](http://www.java2s.com/Code/Cpp/STL-Basics/Userandomshufflealgorithmswitharray.htm)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-06T07:01:14.240

`random_shuffle`接受迭代器，而不是元素。尝试：

```
std::random_shuffle(a, a + 10); 
```

或者

```
std::random_shuffle(std::begin(a), std::end(a)); 
```

`std::random_shuffle`可以在任何一对随机访问迭代器上使用，并且会在这些迭代器表示的范围内打乱元素。

发生错误是因为`int`s 不是迭代器，因此`std::random_shuffle`无法将给定`int`的 s 用作迭代器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-21T09:29:17.423

Just changing the arr to a pointer does not solve the solution. This will make the array swap to one type of permutation. This means that if you rerun the program, your array will be shuffled into the exact same way as it did in the previous run.

To fix this - the function offers a third parameter which acts as a seed. So the correct implementation of the function is as follows.

1) Have a function or a lamda that generates a random number. This will act as your seed.

```
int myrandom (int i) { return std::rand()%i;} 
```

Make sure to set the seed of the internal random number generator.

```
std::srand ( unsigned ( std::time(0) ) ); 
```

2) Insert this function as the third arguement in the random_shuffle function call.

```
std::random_shuffle ( myvector.begin(), myvector.end(), myrandom); 
```

This will result in an always random shuffled array. Make sure to include the following:

```
#include <algorithm>    // std::random_shuffle
#include <vector>       // std::vector
#include <ctime>        // std::time
#include <cstdlib>      // std::rand, std::srand 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-17T19:24:16.120

以这种方式为我工作：

```
#include <iostream>
#include <algorithm>

using namespace std;

int main()
{
    int a[10]={0,1,2,3,4,5,6,7,8,9};

    for (unsigned i = 0; i < 10; i++)
    {
        cout << a[i];
    }
    cout << endl;

    random_shuffle(&a[0],&a[10]);

    for (unsigned i = 0; i < 10; i++)
    {
        cout << a[i];
    }
    cout << endl;
} 
```

# jquery - jQuery.ajax 中的双引号和 \

> ID：14720139
> 
> 赞同：1
> 
> 时间：2013-02-06T01:34:03.773
> 
> 标签：jquery, cordova, jquery-mobile

我一直在尝试使用 jQuery Mobile 向 Web 服务（用 .NET 编写）发送 POST 请求。我正在使用 jQuery Mobile 和 iOS 的 PhoneGap 并在 XCode 中编写代码。

这是我正在运行的代码 -

```
var param = "{\"jsonText\":  \"{ \"username\" : \"Test\", \"password\" : \"testing123\" } \"} ";
                console.log(param)
                $.ajax({
                       url: "https://example.asmx/authenticateUser",
                       type: "POST",
                       dataType: "json",
                       contentType: "application/json; charset=utf-8",
                       data:JSON.stringify(param),
                       success: function(result){
                        console.log(result);
                       },  
                       error: function(result){
                       console.log(result);
                       }  
                       }); 
```

这给了我以下错误-

```
 {"readyState":4,"responseText":"{\"Message\":\"Cannot convert object of type \\u0027System.String\\u0027 to type 

\\u0027System.Collections.Generic.IDictionary`2[System.String,System.Object]\\u0027\",\"StackTrace\":\"   at 
System.Web.Script.Serialization.ObjectConverter.ConvertObjectToTypeInternal(Object o, Type type, JavaScriptSerializer serializer, Boolean throwOnError, Object& convertedObject)\\r\\n   at System.Web.Script.Serialization.ObjectConverter.ConvertObjectToTypeMain(Object o, Type type, JavaScriptSerializer serializer, Boolean throwOnError, Object& convertedObject)\\r\\n   at System.Web.Script.Serialization.ObjectConverter.ConvertObjectToType(Object o, Type type, JavaScriptSerializer serializer)\\r\\n   at 

System.Web.Script.Serialization.JavaScriptSerializer.Deserialize(JavaScriptSerializer serializer, String input, Type type, Int32 depthLimit)\\r\\n   at 

System.Web.Script.Serialization.JavaScriptSerializer.Deserialize[T](String input)\\r\\n   

at System.Web.Script.Services.RestHandler.GetRawParamsFromPostRequest(HttpContext context, JavaScriptSerializer serializer)\\r\\n   

at System.Web.Script.Services.RestHandler.GetRawParams(WebServiceMethodData methodData, HttpContext context)\\r\\n   

at System.Web.Script.Services.RestHandler.ExecuteWebServiceCall(HttpContext context, WebServiceMethodData 

methodData)\",\"ExceptionType\":\"System.InvalidOperationException\"}","status":500,"statusText":"Internal Server Error"} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:37:48.997

你想用`JSON.parse`不`JSON.stringify`。前者从 JSON 字符串（你所拥有的）中获取一个对象。后者将 JavaScript 结构转换为这样的字符串。

此外，您的 JSON 无效。周围不应有引号`{`：

```
JSON.parse("{\"jsonText\":  { \"username\" : \"Test\", \"password\" : \"testing123\" } } ") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T02:00:34.850

你的json的结果

```
"{\"jsonText\":  \"{ \"username\" : \"Test\", \"password\" : \"testing123\" } \"} " 
```

会是这样的：

```
{
    "jsonText": "{
                    "username": "Test",
                    "password": "testing123"
                }"
} 
```

那是错误的，应该是：

```
{
    "jsonText":{
        "username": "Test",
        "password": "testing123"
    }
} 
```

等效的json：

```
"{\"jsonText\":{\"username\":\"Test\", \"password\":\"testing123\"}}" 
```

或者由于您传递的是单个对象，因此它必须是：

```
{
    "username": "Test",
    "password": "testing123"
} 
```

等效的json：

```
{\"username\":\"Test\",\"password\":\"testing123\"} 
```

请记住，您不必在花括号`""`之间加上引号。`}`

# ruby - 从代码中删除缩进

> ID：14720140
> 
> 赞同：0
> 
> 时间：2013-02-06T01:34:05.317
> 
> 标签：ruby, string, metaprogramming

我正在尝试创建一个函数，从代码中删除无关的开始选项卡，使其显示更整洁。如在，我希望我的功能变成这样：

```
 <div>
      <div>
       <p>Blah</p>
      </div>
    </div> 
```

进入这个：

```
<div>
  <div>
   <p>Blah</p>
  </div>
</div> 
```

（所有这些的目标是创建一个 Rails 部分，我可以将格式化的代码粘贴到其中，以显示在左侧对齐的 pre 标记中）。

到目前为止，我已经得到了这个，但是它出错了，我不知道为什么。以前从未使用过 gsub，所以我猜问题就在那里（尽管调试说明也指向第一个“结束”行）：

```
def tab_stripped(code)
  # find number of tabs in first line
  char_array = code.split(//)
  counter = 0
  char_array.each do |c|
    counter ++ if c == "\t"
    break if c != "\t"
  end

  # delete that number of tabs from the beginning of each line
  start_tabs = ""
  counter.times do 
    start_tabs += "\t"
      end
  code.gsub!(start_tabs, '')
  code
end 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T01:38:41.910

我的个人图书馆中的一个（稍作修改）：

```
class String
  def unindent; gsub(/^#{scan(/^\s+/).min}/, "") end
end 
```

它比您要求的更笼统。它不仅处理制表符，还处理空格，并且它不会调整到第一行，而是调整到缩进最少的行。

```
puts <<X.unindent
    <div>
      <div>
       <p>Blah</p>
      </div>
    </div>
X 
```

给出：

```
<div>
  <div>
   <p>Blah</p>
  </div>
</div> 
```

# php - 如何结合函数获取某个学生的信息

> ID：14720141
> 
> 赞同：0
> 
> 时间：2013-02-06T01:34:05.537
> 
> 标签：php

这是我的代码

```
if(isset($_POST['select'])){
$studId = $_REQUEST['studid'];
foreach ($studId as $ch){
echo $ch."<br>";
}
}
//the result of this is like this
c-1111
c-1112
c-1113
// but i want to know their names 
```

我有一个函数来获取下面显示的 studinfo。我将如何在上面的代码中应用/插入它以获取那些 stuid 的名称..请帮助

```
function getuserinfo($ch){
$info_select = "SELECT `$ch` FROM `tbl_student` WHERE `studId`='$ch'";
if ($query_get = mysql_query($info_select)) { 
if ($result = mysql_result($query_get, 0, $ch)) {
return $result;
}
}
}
$fname = getuserinfo('fname');
$lname = getuserinfo('lname');
$mname = getuserinfo('mname'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:02:53.597

这是非常危险的，但这是基本思想：您当前的查询莫名其妙地获取了学生 id 等于传递值的学生 id。所以看起来它只是试图验证，但它是不必要的。您想返回所有信息，然后将第一个 $ch 替换为 * 以获取所有信息...

```
function getuserinfo($ch){
    $info_select = "SELECT * FROM `tbl_student` WHERE `studId`='$ch'";
    if ($query_get = mysql_query($info_select)) { 
        if ($result = mysql_result($query_get, 0, $ch)) {
            return $result;
        }
    }
} 
```

您通过传递 id 来调用它：

```
getuserinfo($ch); 
```

然后，您可以访问该行的所有学生信息。如果这没有意义，请尝试`var_dump(getuserinfo($ch))`查看返回的内容。

但是您只是从 $_REQUEST 中获取 RAW，完全没有清理。你很容易以这种方式攻击。

切换到 PDO 或 mysqli 并使用准备好的语句。这个答案只是为了解释如何获取信息。我绝不容忍使用这些已弃用的方法。

*编辑*

根据您的评论，您需要访问结果以执行类似的操作...

```
if(isset($_POST['select'])){
    $studId = $_REQUEST['studid'];
    $where = "";
    foreach ($studId as $ch){
        $where .= "studId = '$ch' OR";
    }
    if(strlen($where) > 0)
    {
        $where = substr($where, 0, -2);
        $result = $mysqli->query("SELECT studId, CONCAT(fname, " ", mname, " ",lname) AS name FROM tbl_student WHERE $where");
        while ($row = $result->fetch_assoc()) {
            echo $row['name'].'<br>';
        }
    }
} 
```

...再次，清理输入。在这个例子中没有这样做。这只是提供一个想法

# python - Django 拉丁字符不起作用

> ID：14720142
> 
> 赞同：0
> 
> 时间：2013-02-06T01:34:17.593
> 
> 标签：python, django, encoding, decoding, latin1

我正在尝试在导入 CSV 文件时解决此问题。我尝试保存一个包含 latin-1 字符的字符串变量，当我尝试打印它们时，它会将其更改为编码。我能做些什么来保持编码吗？我只想保持角色原样，没有别的。

这是问题所在（从 Django 的管理 shell 中可以看出）

```
>>> variable = "{'job_title': 'préventeur'}"
>>> variable
"{'job_title': 'pr\xc3\xa9venteur'}" 
```

为什么 Django 或 Python 会自动更改字符串？我必须更改字符集还是什么？

任何事情都会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:54:57.273

您的终端正在输入编码字符；*您使用的是UTF* -8，因此 Python在您输入`é`.

在这种情况下从 UTF-8 解码：

```
>>> print 'pr\xc3\xa9venteur'.decode('utf8')
préventeur 
```

不过，您真的很想阅读 Python 和 Unicode：

*   Python [Unicode HOWTO](http://docs.python.org/2/howto/unicode.html)

*   Ned Batchelder 的[实用 Unicode](http://nedbatchelder.com/text/unipain.html)

*   [每个软件开发人员绝对、绝对必须了解 Unicode 和字符集（没有任何借口！）](http://joelonsoftware.com/articles/Unicode.html)作者：Joel Spolsky

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:55:44.797

```
"{'job_title': 'pr\xc3\xa9venteur'}" 
```

这些字符已为您编码为 UTF-8，这非常好，因为如果您重视自己的理智，就不想坚持使用 Latin-1。转换为 Unicode 以获得最佳效果：

```
>>> '\xc3\xa9'.decode('UTF-8')
u'é' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T01:56:13.240

您是否尝试过使用 print 语句？

```
>>> variable = "{'job_title': 'préventeur'}"

>>> variable
"{'job_title': 'pr\x82venteur'}"

>>> repr(variable)
'"{\'job_title\': \'pr\\x82venteur\'}"'

>>> print variable
{'job_title': 'préventeur'} 
```

# .net - Find 和 Where().FirstOrDefault() 是否等效？

> ID：14720143
> 
> 赞同：27
> 
> 时间：2013-02-06T01:34:18.390
> 
> 标签：.net, linq, entity-framework, linq-to-entities, entity-framework-5

我一直`Find(id)`在 Entity Framework 5 中使用带有集合的扩展方法。但是，我看到的许多示例都使用`Where(s => s.Id == 1)`，我添加`FirstOrDefault()`到其中以获取对象而不是集合。这是一种风格差异，还是明显 .Where() 偏好的功能原因？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-02-06T03:57:49.940

Find() 与 Where()、Single()、First() 等的根本区别在于，它会首先在内存中搜索对象，并且仅在对象尚未加载时才访问数据库。因此，尽可能尝试使用 Find()，因为它提供了从内存加载可能的速度优势。Find() 仅适用于主键，不支持 lambda，因此它不是很灵活。

Where() 通常用于获取对象列表。为了检索单个对象，我通常使用 Single()、SingleorDefault()、First()、FirstorDefault()。

Single() 和 SingleOrDefault() 与 First() 和 FirstOrDefault() 不同，因为它们确保最多一个对象可以满足有助于确保数据库中数据完整性的标准。他们的“Single”子句通过在 SQL 查询中选择“TOP 2”然后在返回两个实体时抛出异常来执行此操作。

请注意，您不应将这些链接到 Where() 子句的末尾。

所以而不是

```
.Where(s => s.Id == 1).FirstOrDefault(); 
```

利用：

```
.FirstOrDefault(s => s.Id == 1); 
```

我写了一篇博文来全面探讨这个问题：http: [//judeokelly.com/primer-on-selecting-data-using-entity-framework/](http://judeokelly.com/primer-on-selecting-data-using-entity-framework/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-15T14:41:09.407

如果性能很重要，根据[http://wp.secretnest.info/archives/2991](http://wp.secretnest.info/archives/2991)，.Where(...).FirstOrDefault() 比 FirstOrDefault(...) 快得多。当然 List Find() 可能再次比以前快得多。

因此，与公认的答案相反，您不应该避免 Where(...).FirstOrDefault()！

# r - 处理 R 中的零日志值？

> ID：14720161
> 
> 赞同：3
> 
> 时间：2013-02-06T01:35:45.803
> 
> 标签：r, graphics, plot, statistics

我正在绘制一个散点图`plot(x, y)`并希望它是对数值的，所以我这样做：`plot(log(x), log(y))`. 我想处理一些值`x`是 0 的情况，因此不在图上，而相应的`y`值是非零的。

我想显示带有对数刻度但自然数值的散点图，这意味着如果在`log2`那时刻度应该`2^0, 2^1, 2^2, ...`允许我在刻度上绘制 0 值，以免错过这些点。

这是一个例子：

```
> x = c(0, 1, 20, 100, 200, 500)
> y = c(1, 16, 32, 105, 300, 50)
> plot(x, y) 
```

有六点。如果我使用：

```
> plot(log2(x), log2(y)) 
```

只有 5 个被绘制，因为 x[0], y[0] 被省略（x 值为 0）。因此，我想绘制对数值，但刻度标签是自然数，简单地标记在对数刻度上。然后你可以很容易地在同一个轴上，0、2^0（当然是1）、2^1、2^2等等。然后点 (x[0], y[0])**仍将被绘制**，同时保持对数刻度。

旁注：我认为通过一个例子来对一个帖子提出非常合理的问题投反对票是不公平的。这显然是主题和相关的，并且几乎所有在对数值上绘制事物并关心边界/边缘情况的人都会出现。

（我知道有些人通过在所有点上添加一个任意的小常数来处理这个问题，但我想避免这种情况，因为它很乱。）谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:48:03.807

如果我了解您想在对数刻度中绘制 x 与 y？

这里和示例使用`lattice`and`latticeExtra`

```
# Some reproducible data
tm <- data.frame(x=seq(0,10,1),y=seq(0,10,1))
library(lattice) 
library(latticeExtra) 
xyplot(x ~ y , data=tm, 
       scales= list(x=list(log=2), 
                    y=list(log=2)), 
       xscale.components = xscale.components.logpower, ## to get pretty scales
        yscale.components = yscale.components.logpower 
) 
```

![在此处输入图像描述](../Images/584c18cadef649382e0788440b1836e2.png)

# javascript - 嵌套原型中的“this”不指向实例

> ID：14720163
> 
> 赞同：1
> 
> 时间：2013-02-06T01:35:50.683
> 
> 标签：javascript

鉴于：

```
var x = function () {
};

x.prototype = {
    y: {
        z: function () {
            console.log(this);
        }
    }
};

var foo = new x();
foo.y.z(); 
```

为什么`this`登录`console`as`y`而不是，`x`以及如何给定`y`一个没有构造函数的文字对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T01:40:42.370

> *“为什么这在控制台中记录为 y 而不是 x...”*

因为这就是 JavaScript 的工作方式。该`this`值被设置为调用该方法的对象。一般来说，你应该让物体远离`.prototype`. 它们将在使用构造函数创建的所有实例之间共享。

* * *

> *“......鉴于 y 是一个没有构造函数的文字对象，这怎么可能？”*

这很简单。该`this`值不与任何构造函数绑定。它是根据您调用函数或方法的方式设置的动态值。

* * *

有一些实用程序可让您手动覆盖`this`调用中设置的自然值。使用 的`.call`或`.apply`方法`Function.prototype`来调用方法就是一个例子

```
var foo = new x();
foo.y.z.call(foo); 
```

现在方法`this`中将`z`是`foo`对象，因为我们通过将其作为第一个参数传递给`.call`.

该`.call`方法看到它被称为方法的`z`方法，因此它`z`为您调用，但将`this`值`z`设置为您作为第一个参数提供的任何内容......在这种情况下是`foo`对象。

* * *

但通常你不会使用对象作为`.prototype`. 原因是从构造函数创建的所有实例都获得对构造函数的隐式引用，因此从所有实例中都会观察到`.prototype`对属性的任何对象的更新。`.prototype`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T01:44:17.177

要完成这项工作，您需要`y`返回封闭的`this`.

```
var x = function () {};
Object.defineProperty(x.prototype, "y", { get: function() { return this; } })
x.prototype.y.z = function () { console.log(this); }

var foo = new x();
foo.y.z(); // x 
```

`.`on左边`z()`是`this`. 在您的问题中，`y`返回对象文字：`{z:function(){...}}`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T03:20:29.463

```
var y=Object.create({z: function () { console.log(this); }});
var x=Object.create(y);
y.z();
x.z(); 
```

您可以使用 Object.create 来创建对象，而不是使用构造函数。

# jquery - 如何将 href 属性设置为在 $.ajax 成功函数中创建的锚点

> ID：14720164
> 
> 赞同：0
> 
> 时间：2013-02-06T01:35:50.820
> 
> 标签：jquery, html-table, href

一个`$.ajax`函数正在返回一些我放入成功函数中的表中的数据。

这是我构建表格行的方式：

```
$.each(branchList, function(index,element) {
    $('table#tblViewEditAllBranches tbody').append('<tr class="viewEditRow">' +
        '<td class="deleteBranch">' +
            '<input type="checkbox" class="chkDeleteBranch" name="deleteBranches[]" value="' + element['id'] + '" /><br />' +
            '<input type="submit" class="cancelListEditBranch edit hideOnLoad" value="Cancel" title="Cancel editing this branch" /><br />' +
            '<input type="submit" class="submitListEditBranch edit hideOnLoad" value="Save" title="Save the changes" />' +
        '</td>' +
        '<td class="viewEditBranchName">' +
            '<label class="viewBranchName detailDisplay">' + element['name'] + '</label>' +
            '<input type="text" class="edit editBox editName hideOnLoad" value="' + element['name'] + '" /><br /><br />' +
            '<label id="lblBranchesListEditError" class="errorMsg"></label>' +
        '</td>' +
        '<td class="viewEditBranchUrl">' +
            '<label class="viewBranchUrl detailDisplay"><a href="#" class="branchDetailLink" title="Click to go the branch\'s web page">' + element['url'] + '</a></label>' +
            //'<label class="viewBranchUrl detailDisplay">' + element['url'] + '</label>' +
            '<input type="text" class="edit editBox editUrl hideOnLoad" value="' + element['url'] + '" />' +
        '</td>' +
    '</tr>');
    // Get the first part of the url
    var targetFolder = BuildUrlTargetFolder();
    console.log('full url:' + targetFolder + '/index.php/coverage-area/' + element['url']); // Displays correct url for the current branch
    // Set the href attribute for the branch link otherwise have an empty anchor tag
    if (element['url'] !== '') {
        $(this).find('tr a.branchDetailLink').attr('href', targetFolder + '/index.php/coverage-area/' + element['url']);
    } else {
        $(this).find('tr a.branchDetailLink').attr('href', '#');
    }
}); 
```

如您所见，在代码的底部，在迭代到下一个表行之前，我正在构建链接，然后尝试设置 href 属性。

正如当前的代码一样，控制台输出显示正确的 url，因为每一行都被迭代。但是，发生的事情是所有 href 属性都设置为检索到的最后一个 url。因此，在每次迭代中，代码会将表中的所有链接设置为当前 url。

我尝试通过更改选择器并检查控制台输出来为 if/else 块找到正确的选择器，但我无法得到它。

我**认为**我需要做的就是在 if/else 块中正确设置选择器，以便它只设置**当前**行的 href 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:47:12.173

为什么不先构建 URL，然后在添加 HTML 时附加它？这样您就不必在 DOM 上进行选择来查找链接。

此外，选择每个表之外的表将为您提供速度提升。

```
 var myTable = $('table#tblViewEditAllBranches tbody');
  $.each(branchList, function(index,element) {

        // Get the first part of the url
        var targetFolder = BuildUrlTargetFolder();
        var branchUrl = '#';
        console.log('full url:' + targetFolder + '/index.php/coverage-area/' + element['url']); // Displays correct url for the current branch
        // Set the href attribute for the branch link otherwise have an empty anchor tag
        if (element['url'] !== '') {
            branchUrl =  targetFolder + '/index.php/coverage-area/' + element['url'];
        }

        myTable.append('<tr class="viewEditRow">' +
            '<td class="deleteBranch">' +
                '<input type="checkbox" class="chkDeleteBranch" name="deleteBranches[]" value="' + element['id'] + '" /><br />' +
                '<input type="submit" class="cancelListEditBranch edit hideOnLoad" value="Cancel" title="Cancel editing this branch" /><br />' +
                '<input type="submit" class="submitListEditBranch edit hideOnLoad" value="Save" title="Save the changes" />' +
            '</td>' +
            '<td class="viewEditBranchName">' +
                '<label class="viewBranchName detailDisplay">' + element['name'] + '</label>' +
                '<input type="text" class="edit editBox editName hideOnLoad" value="' + element['name'] + '" /><br /><br />' +
                '<label id="lblBranchesListEditError" class="errorMsg"></label>' +
            '</td>' +
            '<td class="viewEditBranchUrl">' +
                '<label class="viewBranchUrl detailDisplay"><a href=' + branchUrl + ' class="branchDetailLink" title="Click to go the branch\'s web page">' + element['url'] + '</a></label>' +
                '<label class="viewBranchUrl detailDisplay">' + element['url'] + '</label>' +
                '<input type="text" class="edit editBox editUrl hideOnLoad" value="' + element['url'] + '" />' +
            '</td>' +
        '</tr>');

    }); 
```

# php - PHP 警告：stristr()：第 25 行 file.php 中的空分隔符

> ID：14720165
> 
> 赞同：-2
> 
> 时间：2013-02-06T01:35:51.447
> 
> 标签：php, xml, shoutcast

我试图弄清楚为什么我的 php 错误日志给了我这个错误。PHP 警告：stristr()：第 25 行 filename.php 中的空分隔符

现在我查看了这条线，没有一个变量是空的。因此，对此的任何帮助都会很棒，因为我找不到任何问题。它也确实有效，但只是发出警告。我想看看我能不能修复它。下面是整个代码。

```
<?php
 if(!$db = @mysql_connect("$dbhost", "$dbuser", "$dbpass"))
 die('<font size=+1>An Error Occurred</font><hr>Unable to connect to the database. <BR>Check $dbhost, $dbuser, and $dbpass in config.php.');

if(!@mysql_select_db("$dbname",$db))
die("<font size=+1>An Error Occurred</font><hr>Unable to find the database <b>$dbname</b> on your MySQL server.");

if (isset($dj)) {
$dj = NULL;
}

$query="SELECT * FROM currentdj";
$result=mysql_query($query);
while($row = mysql_fetch_array($result)) {
    $did = $row['dj'];
    $aliasa = $row['alias1'];
    $aliasb = $row['alias2'];
    $aliasc = $row['alias3'];
    // The following code should detect DJ by song title, for Podcast and Audio Fictions 
    if ((isset($aliasa)) && (stristr($song[0], $aliasa) !== FALSE)) {
    $setby = "Alias1";
    $dj = $did;
    }
    if ((isset($aliasb)) && (stristr($song[0], $aliasb) !== FALSE)) {
    $setby = "Alias1";
    $dj = $did;
    }
    if ((isset($aliasc)) && (stristr($song[0], $aliasc) !== FALSE)) {
    $setby = "Alias1";
    $dj = $did;
    }
    // The following code should detect DJ by server title, for DJS and autodj
    if ((isset($aliasa)) && (stristr($servertitle, $aliasa) !== FALSE)) {
    $setby = "Alias1";
    $dj = $did;
    }
    if ((isset($aliasb)) && (stristr($servertitle, $aliasb) !== FALSE)) {
    $setby = "Alias2";
    $dj = $did;
    }
    if ((isset($aliasc)) && (stristr($servertitle, $aliasc) !== FALSE)) {
    $setby = "Alias3";
    $dj = $did;
    }  
}
?> 
```

因此，我的所有 If isset 语句都收到此警告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T22:49:08.500

好吧，我发现了这个问题。警告是这样做的，因为单独的页面确实 php 认为 var 是空的，但是当你转到主页时，它会将信息加载到 vars 中，然后它真的不是空的，这就是它在网站上工作的原因，但仍然在 php 错误页面上收到警告，因为这是我得到的唯一错误，我决定忽略它，

谢谢大家的想法

# android - ViewPagerIndicator - 滑动前调用 onActivityCreated

> ID：14720167
> 
> 赞同：0
> 
> 时间：2013-02-06T01:36:03.813
> 
> 标签：android, viewpagerindicator

我目前有一个带有三个选项卡 1,2 和 3 的 viewpageindicator。问题是当我滑动到选项卡 2 时，正在调用来自片段 3 的 onActivityCreated。

在我的标签 3 片段中，我将调用一个 asyntask onActivityCreated ，因此在切换片段 2 时，它将加载一个 asyntask。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T02:12:12.107

By default, ViewPagers load one Fragment on either side of the current Fragment. To know when a Fragment is in the centre, you could use the onPageChangeListener of the ViewPager in combination with an interface implemented by every Fragment subclass.

```
public interface FragmentChangeListener
{
void onCentered();
} 
```

Implement this interface in every Fragment

```
public class CustomFragment extends Fragment implements FragmentChangeListener
{
....
 @Override
 public void onCentered()
 {
 //Show alertDialog and start asyncTask
 }
} 
```

In your Activity class:

```
ViewPager viewPager = (ViewPager) findViewById(R.id.pager);
viewPager.setOnPageChangeListener(new ViewPager.OnPageChangeListener()
{
  @Override
  public void onPageSelected(int position)
  {
    FragmentChangeListener listener = (FragmentChangeListener) //cast fragment at this position to FragmentChangeListener
    listener.onCentered();
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T02:10:24.170

我认为您最好的选择是确定片段是否可见，以决定是否应该显示对话框。您可以在此处了解如何执行此操作：[如何确定 Fragment 何时在 ViewPager 中可见](https://stackoverflow.com/questions/10024739/how-to-determine-when-fragment-becomes-visible-in-viewpager)

您可能应该考虑重新设计此交互，viewpager 旨在轻松地在视图之间滑动，弹出对话框可能会被证明是一种令人困惑的交互。

# ajax - 无法验证在 jsf 2.0 中使用 ajax 呈现的输入文本字段

> ID：14720170
> 
> 赞同：1
> 
> 时间：2013-02-06T01:36:23.833
> 
> 标签：ajax, jsf-2, rendering, requiredfieldvalidator

```
<h:form>
 <h:selectManyMenu id="carsList"
                   value="#{bean.carList}"
                   style="width:400px; height:100px" label="List">
                    <f:selectItems  value="#{bean.cars}" var="i"
                                    itemLabel="#{i.code}" itemValue="#{i.Name}" />
                    <f:selectItem  itemLabel="Other" itemValue="other"/>
                    <f:ajax event="change" execute="@this" render="othermodel"/>
        </h:selectManyMenu>
                    <br></br>
                    <h:panelGroup id="othermodel">
                            <h:outputText  value="Others:" style="margin-top:10px;color:red;font-weight:bold;"
                            rendered="#{bean.carList.contains('other')}" />
                            <h:inputText size="50" id="otherinput" required="true"
                            rendered="#{bean.carList.contains('other')}"/>
                            <h:message for="otherinput"></h:message>
                    </h:panelGroup>
                       <h:commandButton value="Next" action="#{bean.submitForm}"/>
    </h:form> 
```

我的 bean 是`requestScoped`，当我`carList`有一个值时，`other`我可以显示，`panelGrid`但是当用户没有在使用呈现的输入字段中输入任何值时`AJAX`，即使我指定`required=true`了但它没有得到验证。并且在后端代码中输入文本框的值为空。

如何对使用渲染的输入字段进行验证`AJAX`，为什么我的值为 null？我正在使用 JSF 2.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:41:21.247

`rendered`在表单提交请求期间重新评估该属性。您的 bean 是请求范围的，因此在每个请求（也包括 ajax 请求）上重新创建，所有属性都设置为默认值。因此，该`carList`属性也将被清空，并且该`rendered`属性将`false`在更新模型值阶段填充`carList`. 因此，对于 JSF，`<h:inputText>`它永远不会被渲染，因此它不会被处理。

而是将 bean 放在视图范围内。只要您通过（ajax）回发与相同的视图交互，它就会存在。这是具有大量条件渲染的基于动态 ajax 的表单的正确范围。

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T03:41:01.660

我试过这个`@ViewScope`。当我将我`Spring managed service`设为瞬态时，我在反序列化后得到了`null`参考。所以，我尝试了以下方法来获取`Spring Service`.

```
 @ManagedBean(name="bean")
    @ViewScoped
    public class Bean implements Serializable {

    @ManagedProperty(value="#{appService}")
    private transient AppService appService;

      // Getting AppService Object which is singleton in the application during deserialization 
     private void readObject(ObjectInputStream stream) throws IOException, ClassNotFoundException {
              stream.defaultReadObject();
              FacesContext context = FacesContext.getCurrentInstance();
              appService = (AppService)context.getApplication()
                    .evaluateExpressionGet(context, "#{appService}", AppService.class);
                  stream.close();  // not sure i have to do this
           }
    } 
```

这对我有用，没有任何问题。

# solr - Solr，通过带有多值字段和提升值的 JSON 添加记录

> ID：14720175
> 
> 赞同：3
> 
> 时间：2013-02-06T01:36:45.293
> 
> 标签：solr

我对 Solr 很陌生，我正在尝试添加一个多值字段，其中为每个值定义了 boost 值，所有这些值都是通过 JSON 定义的。换句话说，我希望这个工作：

```
[{ "id": "ID1000",
  "tag": [ 
    { "boost": 1, "value": "A test value" }, 
    { "boost": 2, "value": "A boosted value" } ]
}] 
```

我知道如何在 XML（多个`<field name = 'tag' boost = '...'>`）中做到这一点，但上面的 JSON 代码不起作用，服务器说“解析 JSON 字段值时出错。意外的 OBJECT_START”。Solr 有限制/错误吗？

PS：我修复了最初丢失的']'，这不是问题。

编辑：似乎要走的路应该是有效载荷（[http://wiki.apache.org/solr/Payloads](http://wiki.apache.org/solr/Payloads)），但我无法让它们在 Solr 上工作（遵循这个：[http://sujitpal.blogspot。 co.uk/2011/01/payloads-with-solr.html](http://sujitpal.blogspot.co.uk/2011/01/payloads-with-solr.html)）。让问题保持开放，看看是否有人可以提供进一步的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T12:48:57.307

在[Solr Relevancy FAQ - Query Elevation Component](http://wiki.apache.org/solr/SolrRelevancyFAQ#Query_Elevation_Component)部分中找到以下句子

> 多值字段值的索引时间提升适用于该字段的所有值。

我认为为多值字段中的每个值添加单独的提升不会起作用。我知道 Xml 会允许它，但我猜它可能只应用从应用到字段的最后一个值的 boost 值。

因此，基于此，我会将 Json 更改为以下内容，看看是否可行。

```
[
    {
        "id": "ID1000",
        "tag": {
           "boost": 2, 
           "value": [ "A test value", "A boosted value"]
         }
    }
] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-22T07:43:05.973

我遇到了同样的错误信息。实际上错误消息放错了位置。潜在的真正错误是 json 有效负载中缺少 solr 配置中的 schema.xml 中的两个必需字段。

类似“文档中缺少必需参数”的错误消息在这里会更有帮助。您可能想检查 json 有效负载中是否缺少某些必填字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T02:56:10.403

该错误与提升无关。我用一个非常简单的 json doc 得到了同样的错误。没有运气解决它。请参阅[尝试解析集合时的 ​​Solr 错误：解析 JSON 字段值时出错。意外的 OBJECT_START](https://stackoverflow.com/questions/16909107/solr-errors-when-trying-to-parse-a-collection-error-parsing-json-field-value-u)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T13:01:48.737

你遇到了一个极端情况。您可以对单个值进行提升，也可以拥有一组值。但不是一个内另一个（从[我阅读 Solr 4.1 源代码](https://github.com/apache/lucene-solr/blob/lucene_solr_4_1/solr/core/src/java/org/apache/solr/handler/loader/JsonLoader.java#L436)）

这可能是[作为增强请求创建的](https://issues.apache.org/jira/browse/SOLR)东西。

如果您手动生成该 JSON，您可以尝试：

```
"tag": { "boost": 1, "value": "A test value" }, 
"tag": { "boost": 2, "value": "A boosted value" } 
```

我相信 Sols 会合并这些价值观。但是，如果您通过框架生成它，它很可能会禁止或覆盖多个对象属性名称（此处的*标记*）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T03:44:10.570

JSON 似乎是无效的缺少关闭`]`

```
[
    {
        "id": "ID1000",
        "tag": [
            {
                "boost": 1,
                "value": "A test value"
            },
            {
                "boost": 2,
                "value": "A boosted value"
            }
        ]
    }
] 
```

# cocoa - 如何获得具有一致线宽的 NSBezier 路径

> ID：14720177
> 
> 赞同：0
> 
> 时间：2013-02-06T01:36:54.397
> 
> 标签：cocoa, core-graphics

在 drawRect 的 NSView 子类中，我画了一些 NSBezierPaths。我希望由于这些笔画而绘制的线条与视图的缩放比例完全相同，最好只有几个像素宽。这是我的drawRect：

```
- (void)drawRect:(NSRect)dirtyRect
{
    NSSize x = [self convertSize:NSMakeSize(1,1) fromView:nil];
    printf("size = %f %f\n", x.width, x.height);
    for(NSBezierPath *path in self.paths) {
        [path setLineWidth:x.width];
        [path stroke];
    }
} 
```

这是我所看到的屏幕截图：

[![截屏](../Images/e014462dd6f89cbffcc7bb20b674000a.png)](https://i.stack.imgur.com/yx3P1.png)
[（来源：[www.sonic.net 上的 crb](http://www.sonic.net/~crb/snapshot.png)）]

谁能建议我如何获得我正在寻找的清晰一致的路径轮廓？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:54:07.910

尝试匹配设备的确切像素。（自 iphone 5 起更难）

不要在半点上使用坐标：比如 0.5（在视网膜上工作，但在“非视网膜”上它们不清晰）。

线宽向左/或向上，向右一半。

因此，如果您的 lineWidth 为 2 并以整数值进行坐标，则它应该是锐利的。

# css - 高度自动在许多 div 中不起作用

> ID：14720179
> 
> 赞同：0
> 
> 时间：2013-02-06T01:37:07.260
> 
> 标签：css, html

我有这个 html 代码

```
<section id="sec" style="height:auto">
  <div id="wrap">

     <div id="con">
     <h1>....</h1>
          <div id="col1">
                 <p>... long texts ...</p>
          </div>
          <div id="col2">
                 <p>... long texts ...</p>
          </div>
     </div>

  </div>
</section>
<div id="buttom" style="border-top: 1px solid rgb(153, 153, 153)">
   <p>...text here ... </p>
</div> 
```

我现在的问题是 height:auto`section#sec`在其中的许多 div 中不起作用...

有没有什么方法可以在不删除任何 div 的情况下，自动调整高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:00:28.703

`height`不是从父元素继承的属性。如果你想让里面的 div`section#sec`继承这个属性，你需要在 CSS 中为它做一个选择器（或者手动为每个设置内联样式）。

```
 section#sec div
 {
     height:auto;
 } 
```

但由于`height:auto`已经是*默认值*，您可能正在寻找完全不同的东西。

# javascript - 用 JavaScript 改变 CSS

> ID：14720184
> 
> 赞同：0
> 
> 时间：2013-02-06T01:37:51.487
> 
> 标签：javascript, html, css, getelementbyid

当使用 JavaScript 更改 CSS 时，JavaScript 是否只是简单地创建了新的内联 CSS，它需要总统？我一直觉得内联 CSS 很垃圾，想知道是否有更好的方法？

例如，如果您有

`<div id="author">Author's name</div>`通常从对外部 CSS 的引用中显示为绿色，并且您想将其更改为红色必须使用

```
document.getElementById('author').style.color='#FF0000' 
```

必须使用内联样式更改外观吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T01:39:28.557

不，您没有修改 CSS。你只是在设置`style`属性。元素的标记由三件事决定：CSS`style`和内联属性，如`width="100"`. 它们的应用顺序可能会有点模糊。

`style`总是会否决 CSS，除非你使用`!important`.

更改元素标记的更常见方法是添加和删除类。这使您可以将所有样式定义保留在 CSS 文件中，并使代码的复杂性大大降低。

你可以这样做：

```
document.getElementById('author').className = "selected"; 
```

向它添加一个类并让它以不同的标记显示。

如果您使用的是 jQuery，则可以使用`addClass`和`removeClass`. 在引擎盖下，这只是修改了`className`属性。编写自己的实现很容易，你只需要做一些字符串杂耍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:41:46.613

改变 HTML 元素样式的方法不止一种。例如，如果使用 jQuery，您可以轻松地向元素添加/删除类名，如下所示：

```
$("div").addClass("className"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T01:53:08.030

在类中定义所有样式总是更简洁，因此您可以轻松更改整个应用程序的外观和感觉，而不是使用内联样式。

最简单的方法是定义一个 CSS 类

```
.reddiv {color: #FF0000} 
```

然后您可以使用 jquery 轻松地将 div 的颜色更改为红色

```
$('#author').addClass('reddiv'); 
```

# matplotlib - Matplotlib 中的动画：制作“加载栏”

> ID：14720190
> 
> 赞同：0
> 
> 时间：2013-02-06T01:38:02.360
> 
> 标签：matplotlib, pygtk

注意这个例子：

[http://laplace.ucv.cl/Cursos/FisicaExperimental_2/Old/Python/Programas/strip_chart_demo.py](http://laplace.ucv.cl/Cursos/FisicaExperimental_2/Old/Python/Programas/strip_chart_demo.py)

示波器被动画出来的地方。有什么方法可以使用 Matplotlib 来控制图形动画的速度吗？我正在尝试制作一个加载/进度条，并想控制加载条扩展的速度。我尝试的是改变线路

`gobject.idle_add(scope.update)`

至

`gobject.timeout_add(100, scope.update)`

但这会导致这条线根本不画。

有小费吗？

# c - 将指向结构的指针分配给变量

> ID：14720194
> 
> 赞同：1
> 
> 时间：2013-02-06T01:38:29.010
> 
> 标签：c, pointers, struct, variable-assignment, lvalue

我无法在主程序中使用 make_employee 函数返回的指针。

// 我在一个单独的 .c 文件中有以下代码：

```
struct Employee;

struct Employee* make_employee(char* name, int birth_year, int start_year){
  struct Employee* new = (struct Employee*)malloc(sizeof(struct Employee));
  strcpy(new->name, name);
  new->birth_year = birth_year;
  new->start_year = start_year;
  return new;
}

//In the main program:

int main()
{
  char test_name[] = "Fred";
  int test_birth = 1989;
  int test_start = 2007;

  Employee Fred;

  make_employee(test_name, test_birth, test_start) = &Fred;     <-- throws invalid lvalue error

  return 0
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T02:04:57.150

您不能将某些内容分配给非左值。因此名称（左值，左侧值，可以出现在赋值表达式的**左侧）。**

这是*你*想做的吗？？

```
int main()
{
  char test_name[] = "Fred";
  int test_birth = 1989;
  int test_start = 2007;

  struct Employee *fred = make_employee(test_name, test_birth, test_start)

  // use fred....

  free(fred);

  return 0
} 
```

注意：不要`malloc()`在 C 中强制转换。确保`stdlib.h`包含在您的源文件中，如果您忘记这样做，让编译器警告您。如果您收到大意为“隐式声明`malloc`返回`int`”等的警告，则表示您忘记包含`stdlib.h`，您应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T02:31:47.847

我认为您需要检查您的 make_employee 功能。我这么说的原因是在您发布的代码中，您使用以下行

```
struct Employee* new = (struct Employee*)malloc(sizeof(struct Employee)); 
```

new 是 C++ 中的一个关键字，如果您使用过 C++ 编译器，应该会立即引发编译错误。使用关键字作为变量名是不好的。

还要检查函数的返回值。

假设您已经正确声明了您的结构，这应该可以正常工作

```
struct Employee* make_employee(char* name, int birth_year, int start_year){
  struct Employee *ptr = (struct Employee*)malloc(sizeof(struct Employee));
  strcpy(ptr->name, name);
  ptr->birth_year = birth_year;
  ptr->start_year = start_year;
  return ptr;
}

//In the main program:

int main()
{
  char test_name[] = "Fred";
  int test_birth = 1989;
  int test_start = 2007;

  Employee *Fred = make_employee(test_name, test_birth, test_start) ;   

  printf("Printing the data contents");
  printf("\n Name : %s",Fred->name);
  printf("\n Birth : %d",Fred->birth_year);
  printf("\n Start :%d",Fred->start_year);
  free(Fred);
  return 0;
} 
```

# php - rel 属性 标签

> ID：14720197
> 
> 赞同：0
> 
> 时间：2013-02-06T01:38:49.050
> 
> 标签：php, javascript, jquery, forms, rel

好吧，我有这个完美的表单标签。

```
<form action="searchresult.php" method="post">
        <?php
        require('connect.inc');
        $sql1="SELECT room_type,room_id FROM room";
        $result1=mysql_query($sql1);

        echo "<select name=roomtype value=''></option>";
        while($nt=mysql_fetch_array($result1)){
        echo "<option value=$nt[room_type]>$nt[room_type]</option>";
            }
        echo "</select>";
        mysql_close();
        ?> 

    </td>
    <td>    
        <input type='hidden' name='clientid' value="<?php echo $clientid; ?>">
        <input type="text" class="w8em format-y-m-d highlight-days-67 range-low-today" name="chkin" id="sd" value="" maxlength="20" readonly />
    </td>
    <td>
        <input type="text" class="w8em format-y-m-d highlight-days-67 range-low-today" name="chkout" id="ed" value="" maxlength="20" readonly />
    </td>
    </tr>

    </table>
   <input type='submit' name='submit' id="button1" value="Check Room Availabilty">

</form> 
```

这将打开一个名为“searchresult.php”的新页面

但是，我需要知道的是，如何以弹出样式显示此 .php 文件。

我目前正在使用 facebox 作为弹出窗口，我这样使用它：

```
<a rel="facebox" href="searchresult.php">Check Room Availability</a> 
```

但是没有成功，输入没有传递到下一页，所以我得到了错误。

我知道变量可以通过这样的标签传递

```
echo'<a rel="facebox" href=editroom.php?id=' . $row3["room_id"] . '>' . 'Edit' . '</a>'; 
```

但我现在的情况是，我需要通过输入。

我在每一页都声明了这个代码。

```
<link href="src/facebox.css" media="screen" rel="stylesheet" type="text/css" />

<script src="src/facebox.js" type="text/javascript"></script>

<script type="text/javascript">
jQuery(document).ready(function($) {
  $('a[rel*=facebox]').facebox({
    loadingImage : 'src/loading.gif',
    closeImage   : 'src/closelabel.png'
  })
}) 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:33:55.377

如果您使用的是 jQuery，您可以将一个方法附加到表单提交以调用

```
 jQuery.facebox({ ajax: 'searchresult.php' }); 
```

您当然必须传递一些 URL 参数才能显示相关结果

像这样的东西会起作用：

```
 $('#search').submit(function() {
      $.facebox({ ajax: 'searchresult.php?search=&search2=' });
      return false;
 }); 
```

# c++ - getline 作为循环条件 - 无限循环

> ID：14720198
> 
> 赞同：0
> 
> 时间：2013-02-06T01:38:53.183
> 
> 标签：c++, infinite-loop, getline

```
int main(int argc, char** argv) 
{
    ifstream input;
    ofstream output;
    input.open("input.txt");
    output.open("output.txt");

    char c;

    output << "ID\tLName\tFName\tQ1 Q2 Q3 Q4 Q5 Q6 T1 T2 Final" << endl;
    output << "------------------------------------------------------" << endl;

    //Loop through each line until there is none left.
    string s;
    while (getline(input, s)) 
    {
        output << readNext(input) << "\t"; //ID
        output << readNext(input) << "\t"; //FName
        output << readNext(input) << "\t"; //LName

        output << endl;
    }
    return 0;
}

string readNext(ifstream& input) 
{
    string s;
    char c;

    if (input.peek() == ',') input.get(c);

    do {
        input.get(c);
        s += c;
    } while(input.peek() != ',');

    return s;
} 
```

“while (getline(input, s))”这一行让我陷入了无限循环。谁能解释为什么？许多人告诉我，这是读取输入而不是寻找 EOF 的正确方法。

**样本输入**

```
11111,Lu,Youmin,10,9,8,10,8,9,95,99,100 
22222,Lu,Eddie,7,8,9,10,10,10,100,92,94 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T05:01:07.957

尝试这个。无限循环很可能是因为 eof 处缺少逗号。因此，我的建议也是检查 eof 。

string readNext(ifstream& input) { string s; 字符 c;

```
 if (input.peek() == ',') input.get(c);

    do {
        input.get(c);
        s += c;
    } while(input.peek() != ',' && ! input.eof()); // Check for the end of file.

    return s;
} 
```

# selenium-webdriver - 在 Selenium Webdriver 中自动关闭的弹出窗口

> ID：14720200
> 
> 赞同：1
> 
> 时间：2013-02-06T01:39:17.537
> 
> 标签：selenium-webdriver

我的 Selenium Webdriver 测试类似于：

*   单击按钮->这将打开弹出窗口
*   遍历所有窗口句柄并切换到弹出窗口
*   在弹出窗口中填写表格并提交。

此时，如果输入有效，弹出窗口可能会自动关闭，如果表单出现错误，它将保持打开状态。

我的问题是，如果窗口自动关闭并且那是我关注的窗口句柄，究竟会发生什么？有没有办法让我检测到窗口已关闭？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T04:18:00.583

如果焦点窗口关闭，则`Web Driver`实例没有焦点在任何窗口上，如果您试图查找任何元素，它会引发异常。`NoSuchElementException`当你试图找到一个元素时它会抛出。您可以通过计算窗口数量来检查窗口是否存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-07T14:56:07.503

即使窗口自动关闭，窗口句柄也会保留弹出窗口的记录。所以你必须切换到父窗口。然后使用 Windows.title 的 print 语句来检查打开了哪个窗口。

# java - Java：不是通配符边界的运算符

> ID：14720202
> 
> 赞同：0
> 
> 时间：2013-02-06T01:39:26.430
> 
> 标签：java, bounded-wildcard

在做了一些阅读之后，似乎可以使用 & 运算符来要求多个扩展：`Class<T extends Class1 & Class2> classObj;`

但是，我正在寻找一种在编译时强制执行“非”功能的方法。我有香蕉扩展水果的例子。但是，我追求的是：

```
public abstract class Fruit
{
    public abstract String getFlavour();
}

public class Lemon extends Fruit
{
    @Override
    public String getFlavour()
    {
        return "sour";
    }
}

public abstract class Banana extends Fruit
{
    @Override
    public String getFlavour()
    {
        return "very sweet!";
    }

    public abstract String getBananaRipeness();
}

public class UnripeBanana extends Banana
{
    @Override
    public String getBananaRipeness()
    {
        return "unripe";
    }
}

...
    public String methodThatTakesFruitClassButNotBanana( Class<? extends Fruit ! Banana> fruitClass )
    {
        Fruit fruit = fruitClass.newInstance();
        return fruit.getFlavour();
    }

...
        methodThatTakesFruitClassButNotBanana( Lemon.class ); // I want this to compile.
        methodThatTakesFruitClassButNotBanana( UnripeBanana.class ); // I want this not to compile. 
```

显然`Class<? extends Fruit ! Banana>`不是有效的语法。你会推荐什么方法来在编译时强制执行这种类型的层次结构？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T01:57:49.747

> 公共字符串方法ThatTakesFruitClassButNotBanana

这与 Liskov 替换原则以及多态性的工作原理完全相反。由于`Banana extends Fruit`要求任何采用 a 的方法都`Fruit`接受 a `Banana`。

如果必须，您需要检查动态类型并抛出异常，编译器无法为您执行此操作。

# c# - 如何隐藏游戏窗体的关闭按钮？

> ID：14720204
> 
> 赞同：1
> 
> 时间：2013-02-06T01:39:28.993
> 
> 标签：c#, button, xna, hide

在 winforms 应用程序中找到一种方法来执行此操作有些容易，但在 XNA 中，我无法使代码片段按预期工作。我也不想禁用系统按钮，我仍然需要最大化和最小化按钮。

如何`x`在不禁用其他按钮的情况下禁用 XNA 游戏窗体上的关闭按钮 ( )？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T02:27:11.007

在您的代码中定义它

```
[DllImport("user32.dll")]
static extern bool EnableMenuItem(IntPtr hMenu, uint uIDEnableItem, uint uEnable);
[DllImport("user32.dll")]
static extern IntPtr GetSystemMenu(IntPtr hWnd, bool bRevert);
internal const UInt32 SC_CLOSE = 0xF060;
internal const UInt32 MF_ENABLED = 0x00000000;
internal const UInt32 MF_GRAYED = 0x00000001;
internal const UInt32 MF_DISABLED = 0x00000002;
internal const uint MF_BYCOMMAND = 0x00000000; 
```

然后使用此功能禁用或启用关闭按钮

```
public void EnableOrDisableCloseButton(bool Enabled)
{
    IntPtr hSystemMenu = GetSystemMenu(this.Window.Handle, false);
    EnableMenuItem(hSystemMenu, SC_CLOSE, (uint)(MF_ENABLED | (Enabled ? MF_ENABLED : MF_GRAYED)));
} 
```

# emacs - 如何使用带有空格的 emacs diff？

> ID：14720205
> 
> 赞同：10
> 
> 时间：2013-02-06T01:39:30.630
> 
> 标签：emacs, emacs24

给定使用 git format-patch（统一补丁格式）创建的差异文件，我如何在 emacs 中加载相同的文件，以便我可以使用 Cc Cc 转到文件中的相应位置，即使文件或目录名称包含一个空间，在窗户上。

我的项目包含很多包含空格的文件和目录名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T05:14:11.920

这似乎是 Emacs 中的一个错误。这是一个似乎可以为我修复它的补丁：

```
=== modified file 'lisp/vc/diff-mode.el'
--- lisp/vc/diff-mode.el    2013-01-02 16:13:04 +0000
+++ lisp/vc/diff-mode.el    2013-02-26 05:08:48 +0000
@@ -821,9 +821,11 @@ If the OLD prefix arg is passed, tell th
               (progn (diff-hunk-prev) (point))
             (error (point-min)))))
      (header-files
-      (if (looking-at "[-*][-*][-*] \\(\\S-+\\)\\(\\s-.*\\)?\n[-+][-+][-+] \\(\\S-+\\)")
-          (list (if old (match-string 1) (match-string 3))
-            (if old (match-string 3) (match-string 1)))
+           ;; handle filenames with spaces;
+           ;; cf. diff-font-lock-keywords / diff-file-header-face
+      (if (looking-at "[-*][-*][-*] \\([^\t]+\\)\t.*\n[-+][-+][-+] \\([^\t]+\\)")
+          (list (if old (match-string 1) (match-string 2))
+            (if old (match-string 2) (match-string 1)))
         (forward-line 1) nil)))
       (delq nil
        (append 
```

如果没有异议，我会将其提交到 Emacs bzr 源代码树。

# c++ - 无法找出 Eclipse 中的错误

> ID：14720206
> 
> 赞同：-1
> 
> 时间：2013-02-06T01:39:36.633
> 
> 标签：c++

我的程序有问题。我正在使用 Eclipse，但我无法弄清楚这些错误的含义。我一直在寻找一段时间，找不到我的错误。我在构建文件时附加了两个显示错误的类和问题列表（我在 TransitionTable 的屏幕截图中找不到#endif 语句）。谢谢您的帮助。

在第一堂课中，它在构造函数中给了我一个错误：

```
no match for call to `(TranslationTable<int, std::string>) (std::basic_istream<char, std::char_traits<char> >&)'

#ifndef TRANSLATOR_H_
#define TRANSLATOR_H_
#include "TranslationTable.h"
#include <iostream>
#include <cstdlib>
#include <fstream>

template<typename Key, typename Value>
class Translator
{
    private:
        TranslationTable<std::string,int> Table1;
        TranslationTable<int,std::string> Table2;
        Key getKey();
        Value getValue();

    public:
        Translator();
        Translator(Key key,Value value);
        Translator(std::istream& file);
};

template<typename Key, typename Value>
Translator<Key,Value>::Translator()
{
    return;
}

template<typename Key, typename Value>
Translator<Key,Value>::Translator(std::istream& file)
{
    Table1(file); // gives me error here
    Table1.fillTable(file);
    Table2(file); // same error here
    Table2.fillTable(file);

}

#endif /* TRANSLATOR_H_ */ 
```

这是第二个有错误的类，它给我一个错误将循环遍历数组：

```
no match for 'operator*' in '**(((TranslationTable<int, std::string>*)this)->TranslationTable<int, std::string>::kP + (+(((unsigned int)i) * 8u)))'

#ifndef TRANSLATIONTABLE_H_
#define TRANSLATIONTABLE_H_
#include "KeyValuePair.h"
#include <iostream>
#include <cstdlib>

template<typename Key, typename Value>
class TranslationTable
{
    private:
        int numPairs;
        KeyValuePair<Key,Value> *kP;

    public:
        TranslationTable();
        TranslationTable(std::istream& is);
        void fillTable(std::istream& is);
        Value getValue(Key myKey) const;
};

template<typename Key, typename Value>
TranslationTable<Key,Value>::TranslationTable()
{
    return;
}

template<typename Key, typename Value>
TranslationTable<Key,Value>::TranslationTable(std::istream& is)
{
    numPairs = 0;
    is >> numPairs;
    kP = new KeyValuePair<Key,Value>[numPairs];
}

template<typename Key, typename Value>
void TranslationTable<Key,Value>::fillTable(std::istream& is)
{
    for(int i = 0; i < numPairs; i++)
    {
        is >> *kP[i]; // error here
    }
}

template<typename Key, typename Value>
Value TranslationTable<Key,Value>::getValue(Key myKey) const
{

}

#endif /* TRANSLATIONTABLE_H_ */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T01:45:49.890

我认为您想输入`Translator T1(file);`而不是 just `T1(file)`，并且类似地`T2`

而且你不需要`*`in `*kP[i]`。它已经在引用第 i 个元素。

之后，您需要`operator>>`为该类定义一个`KeyValuePair`才能`is >> kP[i];`开始工作。

```
istream& operator >>(istream &is,KeyValuePair &obj)
{
        ...
      return is;
} 
```

# jquery - 如何使用 jQuery 根据输入字段为空白/非空白来更改背景图像

> ID：14720207
> 
> 赞同：1
> 
> 时间：2013-02-06T01:39:49.477
> 
> 标签：jquery, javascript-events

我有一个表格，上面有 5 个搜索条件输入框。我收到了一个额外的要求，即在页面上有一个“清除所有”按钮来清除输入框。

我想让“全部清除”按钮实际上是`div`一个背景图像，当输入框为空时，背景图像为灰色，当输入框有内容时，背景图像为红色。

单击“全部清除”按钮将清除输入框。

除了当用户在搜索框中键入内容时切换到红色背景图像之外，我几乎已经完成了所有工作。我建立了一个 jsfiddle： http: [//jsfiddle.net/pJgyu/27896/](http://jsfiddle.net/pJgyu/27896/)，它显示了我的问题（我使用背景颜色而不是背景图像来消除不必要的东西）。

我的 jsfiddle 中的 javascript 符合我想要做的，看起来像这样：

```
function clearSearchClick() {
    $('.ui-clear').removeClass('enabled').addClass('disabled');
    $(':input').val('');
    $('.first').focus();
}

function docKeyPress(event) {
    if (event.which === 13) {
        event.preventDefault();
        alert('pretend I searched');
    }
}

function searchEmpty() {
    var valid = true;
    $(':input').each(function() {
        if ($(this).val() !== '') return false;
    });
    return valid;    
}

function inputKeyUp(event) {
    if (!searchEmpty()) {
        $('ui-clear.disabled').removeClass('disabled').addClass('enabled');
    }
}

$(function () {
    $('.first').focus();
    $('.ui-clear').click(clearSearchClick);
    $(':input').keyup(inputKeyUp);
    $(document).keypress(docKeyPress);
}); 
```

我知道关于javascript的以下内容：

1.  重点`.first`工作
2.  点击`.ui-clear`处理程序有效

当用户键入内容时，我没有让第一个搜索框左侧的黑框变为红色。对于实现这一目标的正确、有效方法的任何见解，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T04:49:22.260

我认为你可能过于复杂的事情......

如果我理解正确，如果表单中的任何输入包含用户输入的文本，您是否希望 div 的外观（基于应用的类）发生变化？

您还想在 keyup 事件而不是更改上执行此操作吗？

所以，我会做这样的事情

首先在应用于 div 的类中设置默认（黑色）背景

```
.ui-clear {
    border: thin black outset;
    height: 24px;
    width:24px;
    display: inline;
    float: left;
    background-color: black;
} 
```

和一个“启用”的类

```
.enabled {
    background-color: red;
} 
```

这就是完成这项工作所需的所有样式

然后是代码 - 再次保持简单

```
$(function () {
    $('.first').focus();
    $('.search input:text').keyup(function(){
        var allCrit="";
        $('.search input:text').each(function(){
            allCrit += $(this).val();
        });
        $('.ui-clear').toggleClass("enabled", allCrit != "");         
    });
}); 
```

我们在这里做什么？

1.  捕获每个输入框的 keyup 事件
2.  遍历它们并将每个 val 连接成一个字符串
3.  测试字符串是否包含任何内容，如果包含，则切换启用的类

# wcf - wcf 服务调用返回 IPropertyChangedEventHandler 的 ASMX Web 服务

> ID：14720210
> 
> 赞同：1
> 
> 时间：2013-02-06T01:40:27.013
> 
> 标签：wcf, wsdl, asmx, datacontractserializer, xmlserializer

好的，这是一个复杂的情况，所以让我首先列出我正在尝试做的事情。

我有一个 WCF Web 服务，它使用 DataContractFormat 将请求序列化为 JSON。Web 服务的一个客户端使用我的 wsdl 生成一个参考文件，并使用他端的 soap 端点来回调用。到目前为止，这一直很好，因为我们已经能够提供对 SOAP 和 REST/JSON 请求的支持。

我们当前的项目要求我们包含来自 RSA 的方法，这些方法使用 wsdl 公开他们的 web 服务。所以我们基本上是对它们进行 SOAP 调用，并在我们端生成一个参考文件，然后使用我们的 Web 服务中生成的类和方法。

我们遇到的问题是客户端在参考无法序列化包含在所有 RSA 类中的 IPropertyChangedEventHandler 时遇到构建错误。我怀疑的问题是 RSA 的类都是使用 System.Xml.Serialization 方法定义的，而我的 Web 服务是使用 DataContractFormat 而不是 XMLSerializerFormat 编写的，因此它不知道如何序列化这些类。如何在不使用 DataContract 完全重写参考文件的情况下解决这个问题？或者还有什么我可能会忽略的东西？

如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:22:36.737

一位同事能够弄清楚如何在方法中没有 PropertyChangeEventHandler 的情况下生成 RSA wsdl。通过更改 Service Reference 文件夹下的 svcmap 文件，我们能够在没有 PropertyChanged 的​​情况下生成参考文件

```
<EnableDataBinding>false</EnableDataBinding> 
```

更改此设置后，我们更新了服务引用，所有 PropertyChanged 内容都消失了，我们不再遇到构建错误。

# python - 添加和清除小部件时出现 Kivy 布局问题

> ID：14720221
> 
> 赞同：-1
> 
> 时间：2013-02-06T01:42:01.917
> 
> 标签：python, user-interface, widget, kivy

在使用小部件命令 add_widget 和 clear_widgets 时，我的小部件本身看起来很好，在屏幕的左下角非常小。

我将在这里解释我的所有步骤，所以请多多包涵。

我有一个系统可以从一个小部件切换到另一个小部件。“小部件”基本上是整个表单、基本画布和布局。

据我了解，这些必须具有基本布局。所以首先我把一个根元素放进去，然后我用这个根初始化我的 UI 管理器。

```
class MyApp(App):
    rootForm = BoxLayout()
    ui = UserInterface(rootForm)
    return rootForm 
```

我的 UI 处理小部件的切换。它在创建时将所有小部件保存在一个列表中。它还为自己提供了对用户界面的引用，用于回调目的。

```
class UserInterface():
    __WidgetDictionary = {}
    __RootWidget = None

    def __init__(self, inRootWidget):
        self.__RootWidget = inRootWidget # Keep track of our root
        # Generate two forms to be swapped in/out
        self.__WidgetDictionary["form1"] = FirstWidget()
        self.__WidgetDictionary["form1"].SetUIreference(self)

        self.__WidgetDictionary["form2"] = SecondWidget()
        self.__WidgetDictionary["form2"].SetUIReference(self)

        self.ChangeWidget("MainMenu") 
```

ChangeWidget，这里真正的核心，清除了根小部件并添加了一个新小部件。

```
def ChangeWidget(self, inWidgetName):
    self.__RootWidget.clear_widgets() # Clear out the widgets
    self.__RootWidget.add_widget( self.__WidgetDictionary[inWidgetName] ) # Add our new widget 
```

这可以很好地显示我的表单，并带有一个按钮。单击该按钮时，它附加了一个回调以将表单从 Form1 更改为 Form2。

```
#FirstWidget.py
class FirstWidget(BoxLayout):
    __UserInterfaceReference = None

    def SetUIReference(self, inUserInterface):
        self.__UserInterfaceReference = inUserInterface

    def ChangeWidget(self, inWidgetName):
        self.__UserInterfaceReference.ChangeWidget(inWidgetName) 
```

对应的.kv文件

```
#FirstWidget.kv
<FirstWidget>:      
    BoxLayout:
        orientation: 'vertical'
        padding: 50
        spacing: 10
    Button:
        on_release: root.ChangeWidget('form2') 
```

单击按钮后，将发生错误。Form1 和 Form2 几乎相同。Form2 比 form2 多一个按钮。Form1 和 Form2 的代码完全相同，只是类名不同。同样，在它自己的环境中，form2 看起来很完美。

这是该错误的屏幕截图： ![添加了WidgetMessedUp](../Images/2197e4dde56f3e2d87d79c08441868f9.png)

编辑：暂时，我切换到使用屏幕管理器：http: [//kivy.org/docs/api-kivy.uix.screenmanager.html](http://kivy.org/docs/api-kivy.uix.screenmanager.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:30:19.933

将上面的代码合并到一个文件中如果我运行以下代码::

```
from kivy.app import App
from kivy.uix.boxlayout import BoxLayout
from kivy.lang import Builder

Builder.load_string(
'''
<FirstWidget>:      
    BoxLayout:
        orientation: 'vertical'
        padding: 50
        spacing: 10
    Button:
        text: 'change to form 2'
        on_release: root.ChangeWidget('form2')

<SecondWidget>:
    TextInput:
    BubbleButton:
        text: 'change to form 1'
        on_release: root.ChangeWidget('form1')
''')

class UserInterface():
    __WidgetDictionary = {}
    __RootWidget = None

    def __init__(self, inRootWidget):
        self.__RootWidget = inRootWidget # Keep track of our root
        # Generate two forms to be swapped in/out
        self.__WidgetDictionary["form1"] = FirstWidget()
        self.__WidgetDictionary["form1"].SetUIReference(self)

        self.__WidgetDictionary["form2"] = SecondWidget()
        self.__WidgetDictionary["form2"].SetUIReference(self)
        self.ChangeWidget("form1")

    def ChangeWidget(self, inWidgetName):
         # Clear out the widgets
        self.__RootWidget.clear_widgets()
         # Add our new widget
        self.__RootWidget.add_widget(self.__WidgetDictionary[inWidgetName])

class FirstWidget(BoxLayout):
    __UserInterfaceReference = None

    def SetUIReference(self, inUserInterface):
        self.__UserInterfaceReference = inUserInterface

    def ChangeWidget(self, inWidgetName):
        self.__UserInterfaceReference.ChangeWidget(inWidgetName)

class SecondWidget(BoxLayout):
    __UserInterfaceReference = None

    def SetUIReference(self, inUserInterface):
        self.__UserInterfaceReference = inUserInterface

    def ChangeWidget(self, inWidgetName):
        self.__UserInterfaceReference.ChangeWidget(inWidgetName)

class MyApp(App):

    def build(self):
        rootForm = BoxLayout()
        ui = UserInterface(rootForm)
        return rootForm

if __name__ == '__main__':
    MyApp().run() 
```

一切都按照它应该的方式运行。由于您没有提供完整的代码，因此很难确定哪里出错并提供解释。尝试查看我发布的代码与您自己的代码之间的差异，以确定您在做什么不同。

希望这可以帮助。

# c# - 使用 TPL 的推测执行

> ID：14720225
> 
> 赞同：4
> 
> 时间：2013-02-06T01:42:39.920
> 
> 标签：c#, task-parallel-library, plinq

我有一个`List<Task<bool>>`我想并行枚举的任务，找到要完成的第一个任务，结果是`true`不等待或观察任何其他仍待处理的任务的异常。

```
var tasks = new List<Task<bool>>
{ 
    Task.Delay(2000).ContinueWith(x => false), 
    Task.Delay(0).ContinueWith(x => true), 
}; 
```

我曾尝试使用 PLINQ 执行以下操作：

```
var task = tasks.AsParallel().FirstOrDefault(t => t.Result); 
```

它并行执行，但一旦找到令人满意的结果就不会返回。因为访问 Result 属性是阻塞的。为了让它使用 PLINQ 工作，我必须写下这个令人敬畏的声明：

```
var cts = new CancellationTokenSource();
var task = tasks.AsParallel()
    .FirstOrDefault(t =>
    {
        try 
        { 
            t.Wait(cts.Token);
            if (t.Result)
            {
                cts.Cancel();
            }

            return t.Result;
        } 
        catch (OperationCanceledException) 
        { 
            return false;
        }
    } ); 
```

我编写了一个扩展方法，可以在完成任务时生成任务。

```
public static class Exts
{
    public static IEnumerable<Task<T>> InCompletionOrder<T>(this IEnumerable<Task<T>> source)
    {
        var tasks = source.ToList();
        while (tasks.Any())
        {
            var t = Task.WhenAny(tasks);
            yield return t.Result;
            tasks.Remove(t.Result);
        }
    }
}

// and run like so
var task = tasks.InCompletionOrder().FirstOrDefault(t => t.Result); 
```

但感觉这很常见，有更好的方法。建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T01:54:16.297

也许是这样的？

```
var tcs = new TaskCompletionSource<Task<bool>>();

foreach (var task in tasks)
{
    task.ContinueWith((t, state) =>
    {
        if (t.Result)
        {
            ((TaskCompletionSource<Task<bool>>)state).TrySetResult(t);
        }
    },
        tcs,
        TaskContinuationOptions.OnlyOnRanToCompletion |
        TaskContinuationOptions.ExecuteSynchronously);
}

var firstTaskToComplete = tcs.Task; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T02:07:07.697

也许你可以试试 Rx.Net 库。它实际上非常适合提供 Linq to Work。

引用 Microsoft Rx.Net 程序集后，在 LinqPad 中尝试此代码段。

```
using System
using System.Linq
using System.Reactive.Concurrency
using System.Reactive.Linq
using System.Reactive.Threading.Tasks
using System.Threading.Tasks

void Main()
{
    var tasks = new List<Task<bool>>
    { 
        Task.Delay(2000).ContinueWith(x => false), 
        Task.Delay(0).ContinueWith(x => true), 
    };

    var observable = (from t in tasks.ToObservable()
                      //Convert task to an observable
                      let o = t.ToObservable()
                      //SelectMany
                      from x in o
                      select x);

    var foo = observable
                .SubscribeOn(Scheduler.Default) //Run the tasks on the threadpool
                .ToList()
                .First();

    Console.WriteLine(foo);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T09:14:09.623

首先，我不明白你为什么要在这里使用 PLINQ。枚举一个`Task`s 列表应该不会花很长时间，所以我认为你不会从并行化它中获得任何好处。

现在，要获得`Task`已经完成的第一个`true`，您可以使用[（非阻塞）`IsCompleted`属性](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.iscompleted.aspx)：

```
var task = tasks.FirstOrDefault(t => t.IsCompleted && t.Result); 
```

如果您想获得`Task`按完成排序的 s 集合，请查看 Stephen Toub 的文章[*Processing tasks as they complete*](http://blogs.msdn.com/b/pfxteam/archive/2012/08/02/processing-tasks-as-they-complete.aspx)。如果要列出`true`首先返回的那些，则需要修改该代码。如果您不想修改它，可以使用[Stephen Cleary 的 AsyncEx 库中的此方法的一个版本](http://nitoasyncex.codeplex.com/wikipage?title=TaskExtensions&referringTitle=Documentation)。

* * *

此外，在您问题的特定情况下，您可以通过添加`.WithMergeOptions(ParallelMergeOptions.NotBuffered)`到 PLINQ 查询来“修复”您的代码。但是这样做在*大多数情况下仍然不起作用，*即使这样做也会浪费很多线程。这是因为 PLINQ 使用恒定数量的线程，而分区和使用`Result`会在大多数情况下阻塞这些线程。

# javascript - 投票系统按钮修复

> ID：14720226
> 
> 赞同：0
> 
> 时间：2013-02-06T01:43:06.143
> 
> 标签：javascript, mysql, ajax, performance

我有这个网站，人们可以在其中对某些企业投赞成票或反对票。投票系统使用 PHP、MySQL、Javascript 和 AJAX 来运行。当进行投票时，用户的 IP 将被放入数据库并被记住，因此他们无法再次投票。但是，可以使用自动点击程序并将其设置为比服务器处理投票请求的速度更快，结果如下： http: [//mcserve.rs/qSmn](http://mcserve.rs/qSmn)

我已经尝试使用 Javascript 在单击时隐藏/禁用按钮，直到 AJAX 请求完成，但这仍然太慢。

我该如何解决这个问题，或者它是否可以解决？

谢谢

编辑：我知道有人使用自动点击器的比例很小，但这样做可能会利用网站的全部目的——我正在寻找一种方法来防止这种情况发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:55:15.383

如果您在存储投票信息的数据库表中指定 IP 字段的键约束，则无需担心自动点击器，因为对于每个 IP，表中最多有一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:46:52.967

处理投票请求不应该花费您那么长时间，您可以直接在服务器上阻止来自同一客户端的 POST 请求到 upvote URL。一个更好的选择就是使用登录系统，但是，这一定不是一个选择......

# sql - 重音不敏感加入 SQL Server

> ID：14720227
> 
> 赞同：1
> 
> 时间：2013-02-06T01:43:24.807
> 
> 标签：sql, sql-server, join, diacritics

我希望通过忽略重音和大写的通用字符串连接两个表。

我一直在寻找这个问题的答案，但无法弄清楚。我正在使用一个脏数据库，我需要能够通过一个`varchar`列连接两个表，其中一些行有重音符号，而另一些则没有。

以下是我到目前为止但由于语法错误而无法执行的内容。感谢您的帮助！

```
SELECT p.product_id, VarDim.dimension_id 
FROM product p 
LEFT JOIN Dimension dim on COLLATE Latin1_general_CI_AI dim.[Description] = COLLATE Latin1_general_CI_AI p.shortdesc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T01:46:09.967

您只需`COLLATE`在连接列的右侧放置一个：

```
SELECT p.product_id, VarDim.dimension_id 
FROM product p 
LEFT JOIN Dimension dim on dim.[Description] = p.shortdesc COLLATE Latin1_general_CI_AI 
```

# mvvm - 将不同的视图模型绑定到每个页面

> ID：14720229
> 
> 赞同：2
> 
> 时间：2013-02-06T01:43:40.013
> 
> 标签：mvvm, knockout.js, viewmodel

我有一个网站，它有多个页面，每个页面上的数据都大不相同。我想要一种将不同的视图模型绑定到每个页面的方法，而不必将 javascript 放入每个页面。

我应该在容器 div 元素的负载处理程序中绑定视图模型吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:22:55.160

我想这会奏效。

```
if($('#myelement').length) {
    //Bind view model
} 
```

# php - 未定义变量错误

> ID：14720239
> 
> 赞同：0
> 
> 时间：2013-02-06T01:44:54.430
> 
> 标签：php, mysql

所以我正在做一个项目，我遇到了一些 mysql & php 错误。

第一个错误：

这是与第一个错误相关的所有代码

```
// Database Class 

class Database {
    public $_link, $_result, $_numRows;

    public function __construct($server, $username, $password, $db){
        $this->_link = mysql_connect($server, $username, $password) or die('Cannot Execute:'. mysql_error());
        mysql_select_db($db, $this->_link);
    }

    public function disconnect(){
        mysql_close($this->_link);
    }

    public function query($sql){
        $this->_result  = mysql_query($sql, $this->_link) or die('Cannot Execute:'. mysql_error());
        $this->_numRows = mysql_num_rows($this->_result);
    }

    public function numRows() {
        return $this->_numRows;
    }

    public function rows(){
        $rows = array();
        for($x = 0; $x < $this->numRows(); $x++) {
            $rows[] = mysql_fetch_assoc($this->_result);    
        }
        return $rows;
    }

}

// Setup.php 

$is_set = 'false'; 
global $company_name, $ebay_id;
    if( isset($_POST['ebay_id'], $_POST['company_name']) ){
        $_ebay_id = $_POST['ebay_id'];
        $_company_name = $_POST['company_name'];
        $is_set = 'true';
    } else { 
        // Silence is Golden!
    }

    $_service_database = new Database('localhost', 'root', 'password', 'chat-admin');

    $_service_database->query("SELECT * FROM installs WHERE `identity` = '$mysqldb' AND `db_name` = '$mysqldb'");

    if ($_service_database->numRows() == 0){ 
        if($is_set == true){
             $_service_database->query("INSERT INTO installs (ebay_id, name, db_name, identity) VALUES ('$_ebay_id', '$_company_name', '$mysqldb', '$mysqldb')");
        } 
    } else { 
        // header("Location: index.php");
    }
    $_service_database->disconnect();

?>

<form name="setup" method="post" action="<?php echo $_SERVER["PHP_SELF"]; ?>">
<input placeholder="eBay Username" type="text" name="ebay_id">
<input placeholder="Company Name" type="text" name="company_name">
<input type="hidden" name="insert" value="true">
<input type="submit">
</form> 
```

所以它的作用是检查定义的变量是否在数据库中，如果它们不在，那么当提交表单时，它会插入我们的值，如果它们在数据库中，它会重定向到 index.php，好的，所以我收到了所有强大的MySQL num_rows* 期望参数 1 是资源，给定布尔值 ...，现在我到处搜索，只发现模具错误应该解决，这就是为什么你可以在函数查询的第 16 行看到它，现在虽然我得到了错误一切仍然有效它对我来说关闭错误报告并不是很好，所以任何帮助都会很棒。此外，如果您看到像 $mysqldb 这样的未定义变量，它们实际上已设置但在不同的页面上并且它们是有效的

第二个错误：=为简化模板系统而制作的函数

这都与第二个错误有关

```
function get_content_type($value){
    if (strpos($value,'title:') === 0 ) {
        $title = explode("title: ",$value);
        $value = $title[1];
    } else if (strpos($value,'css:') === 0 ) {
        $css = explode("css: ",$value);
        $value = $css[1];
    } else if (strpos($value, 'js:') === 0 ) {
        $javascript = explode("js: ", $value);
        $value = $javascript[1];
    } else {
        // Silence is Golden
    }

    if($value == $title[1]){
        echo '<title>'.$value.'</title>';
    } else if ($value == $css[1]) {
        echo '<link rel="stylesheet" href="'.$value.'">';
    } else if ($value == $javascript[1]) { 
        echo '<script src="'.$value.'"></script>';
    }
}

// Calling
get_content_type('title: Welcome to my site');
get_content_type('css: http://something.com/style.css');
get_content_type('js: http://code.jquery.com/jquery-latest.min.js'); 
```

一切正常作为这个输出

```
<title>Welcome to my site</title><link rel="stylesheet" href="http://somesite.com/style.css"><script src="http://code.jquery.com/jquery-latest.min.js"></script> 
```

只有当我设置`error_reporting(0);`

我得到的错误是未定义的变量，因为显然我正在设置一个，然后我设置了另一个，所以最终只有 1 为真，尽管它已经正确输出了所有这些。

**更新**

第二个错误：错误=

`Notice: Undefined variable: css in C:\Server\www\hidie\libs\test.php on line 19` `Notice: Undefined variable: title in C:\Server\www\hidie\libs\test.php on line 17` `Notice: Undefined variable: title in C:\Server\www\hidie\libs\test.php on line 17`

第一个错误：错误=

错误：`Warning: mysql_num_rows() expects parameter 1 to be resource, boolean given`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T01:53:33.637

好的，这是你的问题：

首先，正如评论中提到的，mysql_num_rows 仅适用于 select 和 show。您在查询方法中拥有它，该方法由插入调用。你不能那样做。

```
public function query($sql){
    $this->_result  = mysql_query($sql, $this->_link) or die('Cannot Execute:'. mysql_error());
    $this->_numRows = mysql_num_rows($this->_result); // <- BAD!
} 
```

你在这条线上调用它：

```
if($is_set == true){
     $_service_database->query("INSERT INTO installs (ebay_id, name, db_name, identity) VALUES ('$_ebay_id', '$_company_name', '$mysqldb', '$mysqldb')");
} 
```

您可以为数据库创建第二种方法，并为所有写入数据库的调用调用它：

```
public function execute($sql){
        $this->_result  = mysql_query($sql, $this->_link) or die('Cannot Execute:'. mysql_error());
    } 
```

这将被称为：

```
if($is_set == true){
     $_service_database->execute("INSERT INTO installs (ebay_id, name, db_name, identity) VALUES ('$_ebay_id', '$_company_name', '$mysqldb', '$mysqldb')");
} 
```

其次，您需要在这些条件之外隐式定义变量 $css 和 $title。否则，您将尝试调用未定义的变量，如消息所示...

```
$title = "";
$css = "";

if (strpos($value,'title:') === 0 ) {
    $title = explode("title: ",$value);
    $value = $title[1];
} else if (strpos($value,'css:') === 0 ) {
    $css = explode("css: ",$value);
    $value = $css[1];
} else if (strpos($value, 'js:') === 0 ) {
    $javascript = explode("js: ", $value);
    $value = $javascript[1];
}   else {
    // Silence is Golden
} 
```

# ios - 为什么我在调用 UICollectionViewCell dequeueReusableCellWithReuseIdentifier 时会收到释放内存调用？

> ID：14720243
> 
> 赞同：1
> 
> 时间：2013-02-06T01:45:44.727
> 
> 标签：ios, objective-c, uicollectionview

我有一个包含自定义 UICollectionViewCells 的 UICollectionView（TestReceiptCell 是类名）。

当自定义单元格仅包含 UILabel 时，让 UICollectionView 出现并加载自定义单元格没有任何问题。

然后我通过 IB 将 UITableView 添加到 TestReceiptCell NIB 文件中。我在 TestReceiptCell.h 中为 UITableView 设置了一个引用出口，并在 .m 文件中合成。我将 UITableView 的委托和数据源设置为包含 UICollectionView 的 ViewController。

现在，当运行应用程序时，我在第三行的这个块中得到一个 EXC_BAD_ACCESS 异常：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *cellIdentifier = @"TestReceiptCell";
    TestReceiptCell *cell = (TestReceiptCell *)[collectionView dequeueReusableCellWithReuseIdentifier:cellIdentifier forIndexPath:indexPath]; //exception thrown here
    return cell;
} 
```

我运行了 Zombie Instrument 测试，发现释放的内存调用源自这里。这是我第一次使用该仪器，所以我不确定如何从这里进行调查。

作为参考，这里有一些更相关的代码部分：

视图控制器.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    [self.myCollectionView registerNib:[UINib nibWithNibName:@"TestReceiptCell" bundle:nil]  forCellWithReuseIdentifier:@"TestReceiptCell"];

    // Setup flowlayout
    myCollectionViewFlowLayout = [[UICollectionViewFlowLayout alloc] init];
    [myCollectionViewFlowLayout setItemSize:CGSizeMake(310, 410)];
    [myCollectionViewFlowLayout setScrollDirection:UICollectionViewScrollDirectionHorizontal];
    [self.myCollectionView setCollectionViewLayout:myCollectionViewFlowLayout];
    self.myCollectionView.pagingEnabled = YES;
} 
```

我也在 ViewController.m 文件中实现 UITableView 数据源和委托方法，但鉴于 EXC_BAD_ACCESS 异常的起源，我不确定问题是否出在此处：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell *cell = nil;
    cell = [tableView dequeueReusableCellWithIdentifier:@"eventCell"];

    if(!cell){
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"eventCell"];
    }
    return cell;
} 
```

更新：

如果我将 cellForItemAtIndexPath 更改为：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *cellIdentifier = @"TestReceiptCell";
    //TestReceiptCell *cell = (TestReceiptCell *)[collectionView dequeueReusableCellWithReuseIdentifier:cellIdentifier forIndexPath:indexPath];
    TestReceiptCell *cell = [NSBundle.mainBundle loadNibNamed:@"TestReceiptCell" owner:self options:nil][0];
    return cell;
} 
```

但是，我没有将单元格出列，并且知道这不是正确的方法。在 dequeueReusableCellWithResueIdentifier 创建新单元格时调用的 initWithFrame 方法中似乎存在问题。这是目前的方法：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        NSArray *arrayOfViews = [[NSBundle mainBundle] loadNibNamed:@"TestReceiptCell" owner:self options:nil];
        if ([arrayOfViews count] < 1) {
            return nil;
        }
        if (![[arrayOfViews objectAtIndex:0] isKindOfClass:[UICollectionViewCell class]]) {
            return nil;
        }
        self = [arrayOfViews objectAtIndex:0];
    }
    return self;
} 
```

编辑：

如果我没有为表格视图选择委托或数据源，则将加载带有表格视图的集合视图。将委托/数据源附加到文件所有者的某些原因导致错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T23:16:47.597

当您注册一个 UINib 以进行单元重用时， dequeueReusableCellWithReuseIdentifier:forIndexPath: 就是在您注册的 UINib 上调用 instantiateWithOwner:options: 。无论它为所有者传递什么，都将成为您笔尖中的文件所有者出口。

看来您期望文件的所有者是 UICollectionView，但我不认为它是。

即使是这样，我认为您也不应该将 UICollectionView 用于每个集合单元格中包含的 UITableView 的委托。这将需要您的 UICollectionView 跟踪每个单元格中的 tableViews 和内容。

我建议将包含的 tableView 的委托设置为集合单元格本身，并让每个单元格管理自己的 tableview。

编辑：

您可以为您的集合视图单元定义一个委托协议，以将相关的表视图事件传递给集合视图。使用这种方法，您可以在集合视图数据源的 collectionView:cellForItemAtIndexPath 方法中为每个集合单元格设置委托属性。

例如，当用户从表格中选择一个项目时，您可以调用单元格委托来通知集合视图选择了哪个项目。

这种方法允许您抽象出您的集合单元格正在使用表格视图来显示单元格信息的事实。稍后，如果您决定使用例如嵌入式 UICollectionView 来显示这些项目，则委托协议可以保持不变，并且您可以隔离对集合单元格的更改。

# c# - 选择设备 monodroid 管理器没有看到已经运行的模拟器图像

> ID：14720245
> 
> 赞同：1
> 
> 时间：2013-02-06T01:45:56.040
> 
> 标签：c#, visual-studio-2012, xamarin.android

有时，当我开始调试 android 应用程序时，`Visual Studio 2012`在选择设备窗口中看不到模拟器图像：

![在此处输入图像描述](../Images/0dda3e93c341d9596a3cf3c10e0bb130.png)

但模拟器已经在运行：

![在此处输入图像描述](../Images/d031b004a9f8d2f87e084210bef82ed7.png)

问题是问题不在我的应用程序代码或项目设置中，因为当我选择并且新的 android 虚拟设备正在运行时，我的应用程序成功部署并在**新**的虚拟设备`Start emulator image`上正确运行，**但是**加载需要很长时间这个新的虚拟设备映像并在其上部署应用程序。为什么选择设备管理器看不到已经运行的虚拟设备映像？

 ****PS 我部署了最简单的 hello world 活动，它是在我启动新的 Android 应用程序项目时默认创建的`Visual Studio 2012`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T07:33:13.043

这种情况经常发生。

根据我的非正式经验...有时似乎与 VS 和 MonoDroid 有关-但主要是与 Android SDK 有关。

正如上面的评论所暗示的，关闭并再次打开 VS 有时会有所帮助。

其他可以提供帮助的事情是：

*   更新到最新版本的 Mono for Android - Xamarin 的 Monkeys 在显示屏上添加了一个刷新按钮
*   尝试使用 SDK 中的命令行 adb 工具。此 Android 调试桥包括 kill-server 和 start-server 开关 - 使用这些开关可以刷新 Android SDK 与设备的连接。

有关 adb 的更多信息，请参阅[http://mobile.tutsplus.com/tutorials/android/android-adb-quick-guide/](http://mobile.tutsplus.com/tutorials/android/android-adb-quick-guide/)和[http://developer.android.com/tools/help/adb.html](http://developer.android.com/tools/help/adb.html) - 这是一个有用的知道的工具

如果您确实在 Mono 中发现任何明显的 Android 连接错误，请在[http://bugzilla.xamarin.com上报告](http://bugzilla.xamarin.com)****

# spring - Jaxb2Marshaller xsd 模式验证查询

> ID：14720246
> 
> 赞同：1
> 
> 时间：2013-02-06T01:45:57.803
> 
> 标签：spring, jaxb

我正在使用以下配置使用 spring 3.0.6 Jaxb2Marshaller，

```
<bean id="jaxbMarshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
    <property name="contextPaths">
        <list>              
            <value>com.xxx.yyy.schema.external_request.event</value>
            <value>com.xxx.yyy.schema.zzz.external_request</value>                      
        </list>
    </property> 
</bean> 
```

我想针对它没有执行的 external_request.xsd 验证 xml。即使生成的源具有提到该元素的注释，我是否需要显式传递**模式**`@XmlElement(name = "abc", required = true)`属性，例如. 有没有人已经面临这个问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:54:59.890

嘿可能不是向`context paths`您添加课程，而是可以尝试将其添加到`classesToBeBound`属性

```
<bean id="jaxb2Marshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
    <property name="classesToBeBound">
        <list>
            <value>com.xxx.yyy.schema.external_request.event</value> 
            <value>com.xxx.yyy.schema.zzz.external_request</value>          
        </list>
    </property>
</bean> 
```

如果有帮助，请评价答案。干杯

# c++ - 在linux中接收乱序的udp数据包

> ID：14720249
> 
> 赞同：1
> 
> 时间：2013-02-06T01:46:29.043
> 
> 标签：c++, network-programming, udp, boost-asio, epoll

我在我的 linux c++ 程序中观察到意外的乱序数据包接收序列。在我限制了接收套接字的数量后，它再次按顺序接收数据包。此外，我还使用 boost::asio 或 epoll 显式测试了该问题，但它们都产生了相同的结果。另一方面，相同的程序在 Window 环境下运行良好（使用 boost.asio）。

我觉得这很奇怪，我知道 udp 协议不保证数据包按顺序接收。但是，广播发送方和接收方之间只有 1 次切换。因此，我相信在物理上是不可能的。再加上相同的程序在 Window OS 下（在同一网络下）工作正常。

假设数据包保证按顺序到达传输层。额外的序列号检查不是一个选项，更改协议也不是。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T01:54:17.250

甚至 localhost 到 localhost 的通信也可以无序传递，这完全取决于实现。堆栈可以自由地在某个地方使用 UDP 实现 LIFO 队列，因为不需要按顺序交付。每个操作系统都可以并且将表现不同。如果必须使用 UDP，则**必须**预测 OOO 数据包并处理它们。

# java - 基本计算器

> ID：14720251
> 
> 赞同：0
> 
> 时间：2013-02-06T01:46:31.760
> 
> 标签：java, calculator

我的程序有问题。程序显示第一个 JOption 消息对话框，但是当您输入一个值时，它无法显示第二个对话框？？

```
import java.util.Scanner;
import javax.swing.JOptionPane;

public class javaCalculator 
{
public static void main(String[] args) 
{
    int num1;
    int num2;
    String operation;

    Scanner input = new Scanner(System.in);

    JOptionPane.showInputDialog(null,"please enter the first number");
    num1 = input.nextInt();

    JOptionPane.showInputDialog(null,"please enter the second number");
    num2 = input.nextInt();

    JOptionPane.showInputDialog(null,"Please enter operation");
    operation = input.next();

    if (operation.equals ("+"))
    {
        JOptionPane.showMessageDialog(null,"your answer is" + " " + (num1 + num2));
    }
    if  (operation.equals ("-"))
    {
        JOptionPane.showMessageDialog(null,"your answer is" + " " + (num1 - num2));
    }

    if (operation.equals ("/"))
    {
        JOptionPane.showMessageDialog(null,"your answer is" + " " + (num1 / num2));
    }
    if (operation.equals ("*"))
    {
        JOptionPane.showMessageDialog(null,"your answer is" + " " + (num1 * num2));
    }

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-19T03:05:00.773

您可以尝试使用该示例代码：

```
import javax.swing.JOptionPane;

public class Hw4_3 {

    private static boolean flag;

    public static void main(String[] args) {
        do {
            String[] expression = getTask();
            double result = calculate(expression);
            display(expression, result);
            repeat();
        } while (flag);
    }

    public static String[] getTask()
    {
        String bleh = JOptionPane.showInputDialog(null, "Please enter what you would like to calculate: ");
        String[] tokens = bleh.split(" ");
        return tokens;
    }

    public static double calculate(String[] data)
    {
        double num1 = Double.parseDouble(data[0]);
        double num2 = Double.parseDouble(data[2]);
        double result = 0;
        if(data[1].equals("+"))
        {
            result = add(num1, num2);
            return result;
        }
        else if(data[1].equals("-"))
        {
            result = subtract(num1, num2);
            return result;
        }
        else if(data[1].equals("*"))
        {
            result = multiply(num1, num2);
            return result;
        }
        else 
        {
            if(num2 == 0)
            {
                JOptionPane.showMessageDialog(null, "Sytax error, divide by zero");
            }
            result = divide(num1, num2);
            return result;
        }

    }

    public static double add(double num1, double num2)
    {
        return num1 + num2;
    }

    public static double subtract(double num1, double num2)
    {
        return num1 - num2;
    }

    public static double multiply(double num1, double num2)
    {
        return num1 * num2;
    }

    public static double divide(double num1, double num2)
    {
        return num1 / num2;
    }

    public static void display(String[] data, double result)
    {
        if(data[1].equals("/") && data[2].equals("0"))
        {

        }
        else
        {
            JOptionPane.showMessageDialog(null, data[0] + " " + data[1] + " " + data[2] + " = " + result);
        }
    }

    public static void repeat()
    {
        int bleh = JOptionPane.showConfirmDialog(null, "More?",null, JOptionPane.YES_NO_OPTION);
        if(bleh == JOptionPane.NO_OPTION)
        {
            flag = false;
            JOptionPane.showMessageDialog(null, "Have a good day.");
        }
        else
            flag = true;

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T02:22:38.290

从对话框输出而不是 System.in 中读取数字：

```
String firstNumber = JOptionPane.showInputDialog(null,"please enter the first number");
if (firstNumber != null) {
    num1 = Integer.parseInt(firstNumber);
} 
```

您的代码中不需要扫描仪。

# php - 在 PHP 中传递给 exec 的命令长度是否有限制？

> ID：14720253
> 
> 赞同：3
> 
> 时间：2013-02-06T01:46:48.677
> 
> 标签：php, pdftk

目前我需要将 50 多个 PDF 文件合并为 1 个 PDF。我正在使用 PDFTK。使用以下指南：[http ://www.johnboy.com/blog/merge-multiple-pdf-files-with-php](http://www.johnboy.com/blog/merge-multiple-pdf-files-with-php)

但它不起作用。我已经验证了以下内容：

1.  我已经尝试了从我的 PHP 合并 2 个 pdf 的命令，它正在工作。
2.  我已经回显了最终命令并将该命令复制并粘贴到命令提示符中并手动运行，所有 50 个 PDF 都已成功合并。

因此，我的 PHP 中的 exec 和合并 50 个 PDF 的命令都是正确的，但是在 PHP 中一起完成时它不起作用。我还声明了 set_time_limit(0) 以防止任何超时但仍然无法正常工作。

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T01:58:25.040

您可以尝试找出自己：

```
print exec(str_repeat(' ', 5000) . 'whoami'); 
```

我认为它是 8192，至少在我的系统上，因为它在字符串大于 10K 时会失败，但它仍然适用于小于 7K 的字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:51:34.503

我不确定单个命令的长度是否有长度限制，但我很确定您可以使用“\”将其拆分为多行，以检查是否是问题所在。同样，我不认为它是...当您尝试使用 PHP 和 exec 运行完整命令时是否有任何错误输出，也可以尝试 system() 而不是 exec()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T02:35:02.943

1.45 之前的 PDFTK 版本仅限于合并 26 个文件，因为使用“句柄”

```
/* Collate scanned pages sample */
pdftk A=even.pdf B=odd.pdf shuffle A B output collated.pdf 
```

如您所见，“A”和“B”是“句柄”，但应该是一个大写字母，因此只能使用 AZ，如果您达到该限制，您的脚本可能会输出如下错误

```
Error: Handle can only be a single, upper-case letter 
```

但是在 1.45 中这个限制被删除了，changelog extract

> 您现在可以使用多字符输入句柄。以前的版本仅限于单个字符，在使用句柄时对输入 PDF 的数量施加了任意限制。句柄仍必须全部为大写 ASCII。

也许你只需要更新你的库；）

# java - 在摆动的列中流动文本

> ID：14720256
> 
> 赞同：1
> 
> 时间：2013-02-06T01:46:53.373
> 
> 标签：java, swing, user-interface

正如标题所说，这可能吗？实际上，我很想知道是否有任何其他 GUI 工具包或界面语言可以实现这一点。我唯一知道的是 HTML+CSS3 ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T02:36:08.370

您可能会发现@StanislavL[在 JEditorPane/JTextPane 中](http://java-sl.com/multicolumn.html)的多列文本非常有用。

# visual-c++ - VS2012 C++ 为条件移动（cmov）生成有问题的代码

> ID：14720258
> 
> 赞同：3
> 
> 时间：2013-02-06T01:47:05.787
> 
> 标签：visual-c++, compilation, visual-studio-2012, x86-64

我有一个环形缓冲区，由一个生产者写入并由 N 个消费者读取。因为它是一个环形缓冲区，所以生产者写入的索引小于消费者当前的最小索引是可以的。生产者和消费者的位置由他们自己跟踪`Cursor`。

```
class Cursor
{
public:
    inline int64_t Get() const { return iValue; }
    inline void Set(int64_4 aNewValue)
    {
        ::InterlockedExchange64(&iValue, aNewValue);
    }

private:
    int64_t iValue;
};

//
// Returns the ringbuffer position of the furthest-behind Consumer
//
int64_t GetMinimum(const std::vector<Cursor*>& aCursors, int64_t aMinimum = INT64_MAX)
{
    for (auto c : aCursors)
    {
        int64_t next = c->Get();
        if (next < aMinimum)
        {
            aMinimum = next;
        } 
    }

    return aMinimum;
} 
```

查看生成的汇编代码，我看到：

```
 mov rax, 922337203685477580   // rax = INT64_MAX
    cmp rdx, rcx    // Is the vector empty?
    je  SHORT $LN36@GetMinimum
    npad    10
$LL21@GetMinimum:
    mov r8, QWORD PTR [rdx]    // r8 = c
    cmp QWORD PTR [r8+56], rax // compare result of c->Get() and aMinimum
    cmovl   rax, QWORD PTR [r8+56] // if it's less then aMinimum = result of c->Get()
    add rdx, 8                 // next vector element
    cmp rdx, rcx    // end of the vector?
    jne SHORT $LL21@GetMinimum
$LN36@GetMinimum:
    fatret  0   // beautiful friend, the end 
```

我看不出编译器如何认为可以读取 的值`c->Get()`，将其与 进行比较`aMinimum`，然后有条件地将 RE-READ 的值移动`c->Get()`到`aMinimum`。在我看来，这个值可能在`cmp`and`cmovl`指令之间发生了变化。如果我是正确的，那么以下情况是可能的：

*   `aMinimum`当前设置为 2

*   `c->Get()`返回 1

*   完成`cmp`并设置`less-than`标志

*   另一个线程将当前持有的值更新`c`为 3

*   `cmovl`设置`aMinimum`为 3

*   Producer 看到 3 并覆盖 ringbuffer 的位置 2 中的数据，即使它还没有被处理。

我是不是看得太久了？不应该是这样的：

```
mov rbx, QWORD PTR [r8+56]
cmp rbx, rax 
cmovl rax, rbx 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T02:14:56.847

您没有使用原子或任何类型的线程间排序操作来访问您的访问权限`iValue`（可能对于另一个线程上可能正在修改的任何内容都是如此`iValue`，但我们会看到这并不重要），所以编译器是可以自由假设它在两条代码汇编行之间保持不变。如果另一个线程修改`iValue`您有未定义的行为。

如果您的代码旨在是线程安全的，那么您将需要使用原子、锁或一些排序操作。

C++11 标准在第 1.10 节“多线程执行和数据竞争”中对此进行了形式化，这并不是特别容易阅读的内容。我认为与此示例相关的部分是：

第 10 段：

> 评估 A在评估 B*之前是依存排序的，如果*
> 
> *   A 对原子对象 M 执行释放操作，并且在另一个线程中，B 对 M 执行消耗操作并读取以 A 为首的释放序列中的任何副作用写入的值，或
> *   对于某些评估 X，A 在 X 之前是依赖排序的，并且 X 携带对 B 的依赖。

如果我们说评估 A 对应于`Cursor::Get()`函数，而评估 B 将对应于一些看不见的修改`iValue`. 求值 A ( `Cursor::Get()`) 不对原子对象执行任何操作，并且依赖关系不排在其他任何东西之前（因此这里不涉及“X”）。

如果我们说评估 A 对应于修改的代码，`iValue`B 对应于`Cursor::Get()`，则可以得出相同的结论。`Cursor::Get()`所以和 的修饰符之间没有“依赖排序之前”的关系`iValue`。

因此，`Cursor::Get()`在任何可能修改`iValue`.

第 11 段：

> 评估 A 线程间发生在评估 B 之前，如果
> 
> *   A 与 B 同步，或
> *   A 在 B 之前是依赖排序的，或者
> *   对于一些评估 X
>     *   A 与 X 同步并且 X 在 B 之前排序，或者
>     *   A 在 X 之前排序，并且 X 线程间发生在 B 之前，或者
>     *   线程间发生在 X 之前，而 X 线程间发生在 B 之前。

同样，这些条件都不满足，因此之前没有发生线程间。

第 12 段

> 如果满足以下条件，则评估 A 在评估 B 之前发生：
> 
> *   A 在 B 之前排序，或
> *   线程间发生在 B 之前。

我们已经表明，两个操作都不是“线程间发生在”另一个。并且术语“sequenced before”在 1.9/13“程序执行”中定义为仅适用于在单个线程上发生的评估（“sequenced before”是 C++11 对旧“sequence point”术语的替代）。由于我们讨论的是单独线程上的操作，因此 A 不能在 B 之前排序。

所以在这一点上，我们发现`Cursor::Get()`不会“发生在”`iValue`另一个线程上发生的修改之前（反之亦然）。最后，我们在第 21 段中得出了结论：

> 如果程序的执行在不同的线程中包含两个相互冲突的操作，则该程序的执行包含数据竞争，其中至少一个不是原子的，并且两者都不会在另一个之前发生。任何此类数据竞争都会导致未定义的行为。

因此，如果您想在一个线程上使用`Cursor::Get()`并在另一个线程上进行修改`iValue`，则需要使用原子或其他一些排序操作（互斥锁等）来避免未定义的行为。

请注意，根据标准，`volatile`不足以提供线程之间的排序。微软的编译器*可能会*提供一些额外的承诺来`volatile`支持定义良好的线程间行为，但这种支持是可配置的，所以我的建议是避免依赖`volatile`新代码。以下是 MSDN 对此的一些看法 ( [http://msdn.microsoft.com/en-us/library/vstudio/12a04hfd.aspx](http://msdn.microsoft.com/en-us/library/vstudio/12a04hfd.aspx) )：

> **符合 ISO 标准**
> 
> 如果您熟悉 C# volatile 关键字，或者熟悉 Visual C++ 早期版本中 volatile 的行为，请注意 C++11 ISO 标准 volatile 关键字是不同的，并且在 Visual Studio 中支持 /volatile:iso指定了编译器选项。（对于 ARM，它是默认指定的）。C++11 ISO 标准代码中的 volatile 关键字仅用于硬件访问；不要将其用于线程间通信。对于线程间通信，请使用 C++ 标准模板库中的 std::atomic 等机制。
> 
> **微软特定**
> 
> 当使用 /volatile:ms 编译器选项时（默认情况下，当针对 ARM 以外的体系结构时）编译器生成额外的代码来维护对 volatile 对象的引用之间的顺序，以及维护对其他全局对象的引用的顺序。尤其：
> 
> *   对 volatile 对象的写入（也称为 volatile 写入）具有 Release 语义；也就是说，在指令序列中写入易失性对象之前发生的对全局或静态对象的引用将发生在已编译二进制文件中的易失性写入之前。
>     
>     
> *   对 volatile 对象的读取（也称为 volatile 读取）具有 Acquire 语义；也就是说，在指令序列中读取易失性存储器之后发生的对全局或静态对象的引用将发生在编译二进制文件中的易失性读取之后。
>     
>     
> 
> 这使得 volatile 对象可以用于多线程应用程序中的内存锁定和释放。

# c++ - 从一个位置创建一个旋转矩阵并查看位置

> ID：14720264
> 
> 赞同：1
> 
> 时间：2013-02-06T01:47:38.307
> 
> 标签：c++, matrix, rotation

我正在尝试创建一个函数，该函数从描述位置的顶点和描述第一个位置的对象正在查看的点的另一个顶点返回旋转矩阵。到目前为止，我有以下代码：

```
const Matrix4 Matrix4::createRotation(const Vertex& pos, const Vertex& lookat)
{
    Vector3 vz = lookat - pos;
    vz.normalize();
    Vector3 vx = Vector3::cross(Vector3( 0, 1, 0 ), vz);
    vx.normalize();
    Vector3 vy = Vector3::cross(vz, vx);

    Matrix4 rotation (  vx.x,   vy.x,   vz.x,   0,
                        vx.y,   vy.y,   vz.y,   0,
                        vx.z,   vy.z,   vz.z,   0,
                        0,      0,      0,      1);
    return rotation;
} 
```

目前这产生了错误的结果，我很确定它位于旋转 Matrix4 变量的构造函数中。

该函数将与逆平移矩阵一起使用来构建相机的视图矩阵。

谁能向我解释如何做到这一点？

# git - 从文件中删除更改 - GitHub/Git

> ID：14720265
> 
> 赞同：0
> 
> 时间：2013-02-06T01:47:38.713
> 
> 标签：git, github

我已经克隆了一个项目`newProject`并创建了一个分支`new_branch`。

我做了一些更改，`new branch`但是在查看了所有内容之后，我决定不使用这些更改，我已经检查了 master 分支，但是当我使用 git status 时，它仍然显示修改后的文件。

我已经返回并删除了，`new_branch`但修改后的更改仍然存在。

如何删除修改（不是文件本身）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T03:38:54.933

using`git reset --hard`将删除跟踪文件的更改。

using`git clean -df`将删除新添加的未跟踪文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:48:31.960

执行以下命令，这将删除所有更改和新创建的文件

```
 git clean -df 
```

另一种选择，如果您想保存更改以供以后使用，但仍将它们从您可以执行的分支中删除：

```
git stash 
```

然后，当您想将这些更改重新执行时：

```
git stash apply 
```

# java - 如何在 if 语句中声明值？（在Java中）

> ID：14720268
> 
> 赞同：0
> 
> 时间：2013-02-06T01:47:53.600
> 
> 标签：java, if-statement, variable-declaration

所以这就是我到目前为止所拥有的，我不知道为什么程序没有按照我想要的方式响应。不断显示“avg2 可能尚未初始化”。有任何想法吗？？

```
if (a < b && a < c) {
    System.out.println("The lowest score was: " + a);
    System.out.println("The average without the lowest score is: " + ((b + c) / 2));
    avg2 = ((b + c) / 2);
}

if (b < a && b < c) {
    System.out.println("The lowest score was: " + b);
    System.out.println("The average without the lowest score is: " + ((a + c) / 2));
    avg2 = ((a + c) / 2);
}

if (c < a && c < b) {
    System.out.println("The lowest score was: " + c);
    System.out.println("The average without the lowest score is: " + ((a + b) / 2));
    avg2 = ((a + b) / 2);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T01:50:42.413

我想你已经像这样声明了 avg2：`double avg2;`没有初始值。问题是，`a == b == c`例如，如果您的任何 if 条件都不为真，并且`avg2`不会被初始化。

*   解决方案1：初始化avg2：`double avg2 = 0;`
*   解决方案 2（更好）：使用 if / else if / else 语法代替连续的 if。如果有一个 else，编译器会满意 avg2 总是被初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:51:02.213

问题是编译器似乎有一条可能的路径通过代码，其中没有满足任何`if`语句条件。如果是这种情况，则永远不会对`avg2`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T01:51:22.163

因为编译器不知道 if 条件之一将评估为 true，因此`avg2`将被分配。一种解决方法是放置一个无条件的`else`：

```
if (c < a && c < b) {
 ....
} else {
   throw new RuntimeException("Cannot be here");
}

// now use can use avg2 here 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T02:00:17.467

要修复“未初始化”错误，您应该将 3 个 if 语句重新排列到一个 if-else 块中。编译器不会测试 if 语句的条件是否为真，但是如果您在 if-else 块的每个部分内分配变量（必须包括“if all else failed” else），它将不可避免地被初始化。

```
double avg2;
if (a < b && a < c)
{
    System.out.println("The lowest score was: " + a);
    System.out.println("The average without the lowest score is: " + ((b + c) / 2));
    avg2 = ((b + c) / 2);
}else if (b < a && b < c)
{
    System.out.println("The lowest score was: " + b);
    System.out.println("The average without the lowest score is: " + ((a + c) / 2));
    avg2 = ((a + c) / 2);
}else {
    System.out.println("The lowest score was: " + c);
    System.out.println("The average without the lowest score is: " + ((a + b) /2));
    avg2 = ((a + b) / 2);
} 
```

执行此过程的更好方法：

```
double avg2;
double lowest = a;
if(lowest > b)
    lowest = b;
if(lowest > c)
    lowest = c;
System.out.println("The lowest score was: " + lowest);
avg2 = (a + b + c - lowest)/2;
System.out.println("The average without the lowest score is: " + avg2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T02:30:47.457

那段代码伤害了我的眼睛，我觉得有必要发布这个答案:)

```
double lowest = Math.min(Math.min(a, b), c);
double avg2 = (a + b + c - lowest) / 2;
System.out.println("The lowest score was: " + lowest);
System.out.println("The average without the lowest score is: " + avg2); 
```

只有 4 行而不是 15 行，并且此代码不会生成该警告，因为正在初始化变量。

可能警告是因为变量在 if 语句中被初始化，最终可能不会发生......

# ios - restkit 版本 0.20 上的 fetchRequest - 没有已知的类方法

> ID：14720277
> 
> 赞同：1
> 
> 时间：2013-02-06T01:48:41.643
> 
> 标签：ios, restkit, nsfetchrequest

我正在我的一个应用程序上从 RestKit 0.10 迁移到 0.20。我查看了[https://github.com/RestKit/RestKit/wiki/Upgrading-from-v0.10.x-to-v0.20.0](https://github.com/RestKit/RestKit/wiki/Upgrading-from-v0.10.x-to-v0.20.0)上的页面，但没有看到这个问题。

*   编辑 2013-02-09 添加映射代码和 loadObjectData 方法 *

RestKit 是通过 CocoaPods 添加的。

这在 RK 0.10 中工作，然后在 RK 0.20 中编译。这个片段做：

1.  创建 fetchRequest
2.  添加谓词
3.  添加排序
4.  获取中继器数组

我有以下进口，按顺序：

```
// RestKit
#import <RestKit/RestKit.h>
#import <RestKit/CoreData.h>

// Core Data
#import "Repeaters.h" 
```

代码片段：

```
 NSArray *sortDescriptors;
*1  NSFetchRequest *sortedRequest = [Repeaters fetchRequest]; // RestKit 0.10
    // NSFetchRequest *sortedRequest = [NSFetchRequest fetchRequestWithEntityName:@"Repeaters"]; // RestKit 0.20?

    // Predicate Filter by Grouping
    NSString *predicateString = @"";

    if ([appDelegate getIncludeIrlpPreference]) {
        predicateString =  [predicateString stringByAppendingFormat:@"(grouping LIKE 'irlp')"];
    }

    if ([appDelegate getIncludeWsiPreference]) {
        if([predicateString length] > 0) predicateString = [predicateString stringByAppendingFormat:@" OR "];
        predicateString =  [predicateString stringByAppendingFormat:@"(grouping LIKE 'winsystem')"];
    }

    // Distance Sort
    if([selectedSegmentString isEqualToString:kRepeaterSortDistance]) {

        // Sort by distance
        NSSortDescriptor * sortBydistance = [[NSSortDescriptor alloc] initWithKey:@"distance" ascending:YES];
        sortDescriptors = [NSArray arrayWithObjects:sortBydistance, nil ];

    }

    // Add the Sort to the fetch request
    [sortedRequest setSortDescriptors:sortDescriptors];

    // Add the Predicate to the fetch request
    NSPredicate *predicate = [NSPredicate predicateWithFormat:predicateString];
    [sortedRequest setPredicate:predicate];

    // Fetch the data - filtered and sorted
*2  self.repeaters = [Repeaters objectsWithFetchRequest:sortedRequest]; // RestKit 0.10 
```

Repeaters 类的映射代码：

```
 RKManagedObjectMapping *repeatersMapping = [RKManagedObjectMapping mappingForEntityWithName:kEntityRepeaters inManagedObjectStore:objectStore];
 [repeatersMapping mapKeyPath:@"callSign" toAttribute:@"callSign"];
 [repeatersMapping mapKeyPath:@"country" toAttribute:@"country"];
 [repeatersMapping mapKeyPath:@"freqOffsetPl" toAttribute:@"freqOffsetPl"];
 [repeatersMapping mapKeyPath:@"grouping" toAttribute:@"grouping"];
 [repeatersMapping mapKeyPath:@"latitudeDefault" toAttribute:@"latitudeDefault"];
 [repeatersMapping mapKeyPath:@"longitudeDefault" toAttribute:@"longitudeDefault"];
 [repeatersMapping mapKeyPath:@"locationElevation" toAttribute:@"locationElevation"];
 [repeatersMapping mapKeyPath:@"node" toAttribute:@"node"];
 [repeatersMapping mapKeyPath:@"notes" toAttribute:@"notes"];
 [repeatersMapping mapKeyPath:@"repeaterId" toAttribute:@"repeaterId"];
 [repeatersMapping mapKeyPath:@"serviceArea" toAttribute:@"serviceArea"];
 [repeatersMapping mapKeyPath:@"serviceState" toAttribute:@"serviceState"];
 [repeatersMapping mapKeyPath:@"url" toAttribute:@"url"];
 repeatersMapping.primaryKeyAttribute = kEntityRepeaterKey;
 [wsiObjectManager.mappingProvider registerMapping:repeatersMapping withRootKeyPath:@"winSystem.winSystemRepeaters.winSystemRepeater"]; 
```

加载对象数据方法：

```
- (void)loadObjectData {

        [[RKObjectManager sharedManager] loadObjectsAtResourcePath:kWinSystemInfoXml delegate:self];
} 
```

Xcode 错误：

* * *

*1 RepeatersTableViewController.m:116:37：选择器“fetchRequest”没有已知的类方法

*2 RepeatersTableViewController.m:170:22: 选择器“objectsWithFetchRequest:”没有已知的类方法

* * *

就像没有将核心数据位添加到中继器类中一样。

是否有另一份 v0.10 到 v0.20 转换的文档可以帮助我查看更多更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:51:16.710

在没有详细查看您的问题的情况下，[https://github.com/RestKit/RestKit/wiki/Object-mapping](https://github.com/RestKit/RestKit/wiki/Object-mapping)已经回答了我的许多 restkit .20 问题。

# java - 自定义链接列表的获取方法、插入和删除方法

> ID：14720280
> 
> 赞同：-1
> 
> 时间：2013-02-06T01:49:45.260
> 
> 标签：java, linked-list, nodes, singly-linked-list

尝试在我正在创建的自定义链接列表中实现这三种方法时遇到了很多麻烦。即使我有一个现有的链接列表，get(int pos) 方法也会为除第 0 个索引之外的所有内容返回 null！我的 removeAt(int pos) 和 insert(int pos, int n) 方法也有同样的问题。我将包括我认为相关的所有内容。

**我的节点类**

```
 public class MyNode 
   {
      public int cargo;
      public MyNode next;

      public MyNode()
      {
        cargo = 0;
        next = null;
      }

      public MyNode(int i)
      {
        cargo = i;
        next = null;
      }
   } 
```

**我的自定义链接列表**

```
public class MyLinkedList 
{
MyNode head;
int size;

public MyLinkedList()
{
    head = null;
    size = 0;
}

public int get(int pos)
{
    MyNode current = new MyNode();
    for(int i = 0; i <= pos && current != null; i++)
    {
        if(pos == 0){
            current = head;
        }else{
            current = current.next;
            break;
        }
    }
    return current.cargo;
}

public void insert(int pos, int n)
{
    MyNode current = new MyNode(n);
    MyNode before = new MyNode(get(pos-1));
    if(before.next != null)
    {
        before.next = current.next;
    }
    else
    {
        before.next = current;
    }
    size++;
    System.out.println("Inserted " + n + " at position " + pos);
}
public void removeAt(int pos)
{
    MyNode before = new MyNode(get(pos -1));
    MyNode remove = new MyNode(get(pos));
    MyNode after = null;

    int cargo = remove.cargo;

    if(remove.next != null)
    {
        after = remove.next;
    }
    before.next = after;
    size--;
    System.out.println("Removed " + cargo + " from position " + pos);
}
} 
```

**我的测试数据**

```
l.add(17);
l.add(14);
l.add(43);
l.add(50);
System.out.println(l.get(1)); 
```

在 sysout 处返回 NullPointer 异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T01:52:09.560

您正在创建太多项目。`insert`正在创建 2 个项目，只需要第一个。`removeAt`正在创建另外 2 个节点。其中大部分需要删除。

进行以下更改并再次测试。

```
MyNode before = get(pos-1);

MyNode before = get(pos -1);
MyNode remove = get(pos); 
```

编辑：..即使`MyNode current = new MyNode();`在`get`是不必要的。

编辑：您的**核心问题**是`get`返回数据而不是元素，您应该编写一个返回的版本`Node`并在所有内部方法中使用它，如上。当前的方法是让您创建立即销毁的新节点，因为它们没有正确插入到列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:54:41.637

好吧，关于您的`get`问题，如果`pos != 0`.

此外，您的列表退出条件是错误的。应该`< pos`不是`<= pos`。

此外，当您的循环存在时，current 有可能为空，然后会出现空指针异常。

# r - R中的阻塞和等待

> ID：14720281
> 
> 赞同：6
> 
> 时间：2013-02-06T01:50:02.867
> 
> 标签：r, blocking

能够在 R 中创建一个可以阻塞直到资源被定义或被赋予适当值的函数对我来说非常有用。我知道 R 是单线程的，但我希望 mc 能够提供帮助。然而，

```
library(parallel)
f = function() {
  while(!exists('a')) Sys.sleep(1);
  print('success!')
}
d = mcparallel(f())
a = 1
mccollect(d) 
```

无限期挂起。是否有任何有效的解决方法，或者我是否必须研究完全不同的模式/不同的语言才能实现类似的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T02:39:56.033

另一个没有什么可推荐的技巧是调整底部的示例，即`?socketConnection`使用套接字在两个进程之间进行通信。我们将分叉的进程作为服务器（服务器必须首先启动，所以不能是交互式进程）并在途中发送它......

```
f <- function() {
    system.time({
        con1 <- socketConnection(port = 6011, server = TRUE, open="r")
        while (isIncomplete(con1))
            readLines(con1)
        close(con1)
    })
}     
d <- mcparallel(f()) 
```

然后我们只与它通信一次，并收集结果

```
con2 <- socketConnection(Sys.info()["nodename"], port = 6011)
writeLines("ok", con2)
close(con2)
mccollect(d) 
```

这表明我执行后续命令时分叉的进程等待了一秒半

```
> mccollect(d)
$`28975`
   user  system elapsed 
  0.000   0.000   1.515 
```

如果进程是分开的而不是分叉的，这将具有更合理的感觉，例如在 MPI 作业中，人们可以使用 Rmpi​​ 包在节点之间进行通信。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T02:22:54.150

我什至不知道可以分叉这样的进程。玩了一会儿后，我找到了该`sendChildStdin`功能，您应该检查一下。这至少是向子进程发出信号的一种方式。这是一个例子：

```
f<- function () {
  message<-scan(n = 1, quiet = TRUE, what='character')
  return(message)
}
p  <- mcparallel(f())
a <- 1
# The message shouldn't contain spaces and should end with a newline.
parallel:::sendChildStdin(p, "created\n") 
mccollect(p)[[1]]
[1] "created" 
```

不要误会我的意思；如果您要深入研究这些东西，R 可能不是您想要的语言，但它可能适用于轻量级应用程序。

* * *

我之前在 RStudio 中测试过代码，虽然它看起来可以工作，但失败的方式与成功无法区分。无论如何，它基本上不会等待该`scan`过程。例如，这不应该完成，但它确实（仅在 RStudio 中）

```
f<- function () {
  message<-scan(n = 1, quiet = TRUE, what='character')
  return(message)
}
p  <- mcparallel(f())
# parallel:::sendChildStdin(p, "created\n")
mccollect(p)[[1]]
# character(0) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T18:18:07.887

我不知道使用并行的方式，但 tcltk 实用程序以与常规 R 事件循环并行或背景的方式运行。您可以使用`tclTaskSchedule`tcltk2 包中的函数来执行类似于上述循环的操作：

```
library(tcltk)
library(tcltk2)
tclTaskSchedule(1000, if( exists('a') ) { 
    tclTaskChange('WaitForA', redo=FALSE)
    cat('Success!\n\n')
    }, id='WaitForA',  redo=TRUE ) 
```

现在您可以在 R 中执行其他操作（假设`a`尚不存在），并且在后台，上述内容将`a`大约每 1 秒检查一次。一旦您创建`a`（或在大约一秒钟内）然后“成功！” 将被打印到屏幕上（它将停止检查）。

请注意，这是使用并行的替代品。显然 tcltk 和 parallel 包不能很好地结合在一起（看起来这已经在 R devel 中修复并打了补丁，所以这可能在 R 版本 2.15.3 之后与 parallel 一起使用）。因此，如果您还将并行包用于其他事情，请小心使用它。如果并行只是您尝试的一个选项并且您没有将其用于其他事情，那么此方法应该可以正常工作。

# routing - Cakephp 路由到同一个控制器

> ID：14720288
> 
> 赞同：0
> 
> 时间：2013-02-06T01:50:59.817
> 
> 标签：routing, routes, cakephp-1.3

我想让它像：

`www.xxx.com/product1` 使用订单控制器的 index() 并将 product1 作为参数传递。

`www.xxx.com/product2` 使用订单控制器的 index() 并将 product2 作为参数传递。

然后，

`www.xxx.com/product1/shipping` 使用订单控制器的 shipping()。

`www.xxx.com/product2/shipping` 使用订单控制器的 shipping()。

我试过了：

```
Router::connect('/:product', 
array('controller' => 'order'),
array(
        'product' => 'product1|product2',
        'pass' => array('product')
)
); 
```

它适用于`www.xxx.com/product2`

之后我试图`/:product/:action`让它工作，`index()`但并不顺利。它显示`missing controller for product1`什么的。

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:49:49.357

一般来说，我建议使用某种分母来说明您正在查看产品这一事实，比如`hostname.tld/products/product1`oder short `host.tld/p/product1`。这将使您将来更容易扩展它。您可能想看看 REST 或 Restful URL 的概念。

但是，如果你想坚持这个计划，你应该尝试用 Apache 重写你的 URL，这对用户来说会更快，更容易为自己跟踪并且更灵活，因为你可以编写各种模式，包括正则表达式.

# jquery - 上传图片的尺寸

> ID：14720297
> 
> 赞同：0
> 
> 时间：2013-02-06T01:52:14.660
> 
> 标签：jquery, image, dom

我需要获取用户上传图像的尺寸，即有一个文件上传按钮将图像加载到“img”标签中，然后根据 img 的大小设置 img 元素属性。本质上，在页面加载时，图像标签很像这样：

```
<img id="img"> 
```

当用户上传尺寸为 222 X 227 的图像时，呈现给它的尺寸为：

```
<img id="img" width="222" height="227"> <!--verified by inspecting the element --> 
```

我想检索上传图像的尺寸并使用 jQuery，我的脚本：

```
$('#img').attr('width') OR $('#img').attr('height'); 
```

返回“未定义”。此外，即使在检查元素时`$('#img').attr('src')`返回实际上确实显示了这些属性以正确的值加载。`undefined`

这使我得出结论，图像已上传但未添加到`DOM`可能？

有谁知道怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T01:57:57.587

好的，我弄清楚了发生了什么，这样做有帮助：

```
$('#img').load(function(){
   console.log($('#img').attr('width'));
}); 
```

给了我想要的维度。但是，我不知道为什么我需要在这里执行 load() 函数回调，如果有人想了解它的话。

# ruby - 局部变量是 nil，而它显然不应该是（分配给带有自身的表达式）

> ID：14720299
> 
> 赞同：-1
> 
> 时间：2013-02-06T01:52:18.610
> 
> 标签：ruby, middleman

为什么这个小代码片段（用于具有 css 类的导航助手）给我一个`undefined method 'include?' for nil:NilClass`在线`elseif`？

`page_classes_string`可能类似于“oddchap oddchap_zoidberg oddchap_zoidberg_index” 。我认为这种方法的目的很明确：

1.  去掉`page_classes_string`if 它包含 '_index'中的最后一个单词
2.  将`page_classes_string`与当前进行比较，`page_string`并返回一个带有适当类名的字符串以进行某些导航。

我在 irb 中尝试了这段代码，当然它可以工作，但不在我的中间人配置中。我也可以通过使用分配给我的“page_classes_string”的第三个变量来重写它，但这似乎有点麻烦。有什么建议么？

*当然，`_string`附加到以下变量名称仅用于说明目的。*

```
def nav_active(page_string)
  if page_classes_string.match(/_index/)
    page_classes_string = page_classes_string.split(/ /)[0..-2].join(' ')
  end

  if page_classes_string == page_string
    'active'
  elsif page_classes_string.include? page_string
    'semiactive'
  else
    nil
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T04:22:03.660

我建议摆脱`page_classes_string`并简单地创建一个新课程来举办你的 css 课程。根据您当前生成 的方式`page_classes_string`，我认为这不会造成太大的破坏：

```
class PageClassCollection
  attr_reader :css_classes

  def initialize(*classes)
    @css_classes = classes
  end

  def to_s
    css_classes.join(' ')
  end

  def non_index_classes
    css_classes.select {|c| !c['_index']}
  end

  def nav_active?(page_string)
    return 'active' if non_index_classes == [page_string]
    return 'semiactive' if non_index_classes.include? page_string
    nil
  end
end 
```

你会像这样使用它：

```
page_classes = PageClassCollection.new('oddchap', 'oddchap_zoidberg', 'oddchap_zoidberg_index')
page_classes.nav_active?('oddchap') #=> 'semiactive' 
```

如果您仍然需要将其转换为字符串，`.to_s`请处理好（如果您使用字符串插值，它将自动调用，例如`"#{page_classes}"`）。

# mongodb - Groovy：列出动态属性

> ID：14720304
> 
> 赞同：0
> 
> 时间：2013-02-06T01:52:40.607
> 
> 标签：mongodb, groovy

如果我有一个使用 GORM 持久化的对象，并且 Mongo 中它引用的集合发生了变化，我该如何列出这些属性？例如（不是我的实际用例），我有一个名为 Toy 的类，它有字段名称和价格，然后有人将制造商添加到数据库，但没有添加代码......

```
class Toy {
  String name
  Double price
}

class SomeController {
  def show() {
    def Toy t
    t = Toy.get(1)
    render t['manufacturer'] 
  }
} 
```

t['manufacturer'] 工作正常。无论类的字段定义如何，都调用加载数据库中的所有属性，但我（对 Groovy 非常陌生）不知道如何列出这些可下标的属性以了解是否有更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T17:49:19.857

我猜您真正要寻找的是在底层 mongo DB 实体中设置的动态属性。

执行以下操作来获取他们的名字：

```
def nativePropertyNames = domainInstance.dbo.keySet() 
```

如果您只想要动态属性，这将解决问题：

```
def dynamicPropertyNames = domainInstance.dbo.keySet() - "_id" - domainInstance.properties.keySet() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T04:35:21.147

查看对象上的属性字段

```
t.properties.each { prop, val ->
  println "Property: $prop $val"
} 
```

但请注意，“元类”和“类”总是由 groovy 放置在那里的。groovy 中的一个常见习惯用法是：

```
foo.properties.each { prop, val ->
    if(["metaClass","class"].find {it == prop}) return
    // else do something with the property or value
} 
```

# linux - Linux获取文件夹及其子文件夹的大小到一定深度

> ID：14720309
> 
> 赞同：13
> 
> 时间：2013-02-06T01:53:35.187
> 
> 标签：linux, size, directory, subdirectory

在 Linux 中，我有以下文件夹结构，我想获得文件夹及其子文件夹的大小到一定的深度。

我有这个结构：

```
/AAAA/BBBB/1111
/AAAA/BBBB/2222
/AAAA/BBBB
/AAAA/CCCC
/AAAA/DDDD/3333
/AAAA/DDDD
/AAAA 
```

`du -m`，向我展示整个树，而不仅仅是我需要的 2 个级别。什么是正确的命令？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-06T01:55:31.010

您需要`-d`or`--max-depth`选项。

```
du -d 2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T02:00:29.017

限制搜索的深度`--max-depth=N`。

# java - 访问另一个 Web 应用程序中的类

> ID：14720311
> 
> 赞同：0
> 
> 时间：2013-02-06T01:53:54.343
> 
> 标签：java, classpath

我有两个网络应用程序。

第一个已经启动并运行，第二个
是我需要开发的。

我无法以任何方式修改第一个 Web 应用程序，但这些 Web 应用程序将
在同一台机器上。

**问：有什么方法可以将第一个 Web 应用程序中的类导入到我的任何类中？**

我google了一下。到目前为止，我似乎可以通过使用 MENIFEST.MF 来做到这一点。
我尝试过，但无法正常工作。

我还尝试将第一个 Web 应用程序包含到Eclipse中第二个 Web 应用程序的构建路径中。

您可能想知道，如果您可以
在 Eclipse 中将第一个 Web 应用程序的类包含到第二个 Web 应用程序的类中，那么您可以访问第一个 Web 应用程序的源文件吗？

是的，但我无论如何都不会修改它们，也不会修改其他部署描述符或 spring xml 配置文件。

我想我可以以纯粹的 Java 类路径方式完成这项工作，因为这两个
Web 应用程序将在同一台机器上，但我对如何
让它工作没有任何有用的想法。

谢谢 ： ）

**编辑** 我会尽可能多地澄清。
其他人构建了一个移动网络服务并且它正在运行（第一个网络应用程序）。
我需要添加“桌面网络服务”。
两种服务共享相同的业务逻辑。
所以我试图从使用 PC 的客户端接收 http 请求，
在我自己的服务层中，它将创建移动 Web 服务的业务逻辑类的实例，调用它们的方法，获取结果并将它们显示给客户。
两种服务都有自己的域名。

**编辑二**

业务逻辑在这里

```
webapps/shop/WEB-INF/classes 
```

我的网络应用程序将在这里

```
webapps/web 
```

我希望我的课在

```
webapps/web/WEB-INF/classes 
```

能够从
/webapps/shop/WEB-INF/classes 中定义的对象实例化和调用方法

希望这有助于更好地理解我的问题:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T03:59:25.603

业务逻辑应该存在于其自己的 jar 文件中，并通过将其放在每个应用程序的`WEB-INF/lib`目录中，供两个 Web 应用程序使用。

*如果您拥有第一个应用程序的源*文件，则您只能访问第一个应用程序的源文件；它们不会自动部署在战争文件中（通常不会）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T03:59:39.947

为什么不简单地将两个应用程序要使用的代码移动到一个 JAR 中。将其作为单独的项目/模块/您想调用的任何名称进行管理。每个 Web 应用程序将简单地将 JAR 文件包含在其依赖项列表中，并且两者都可以访问公共代码。

# r - 如何为ggplot中的每个点使用不同的形状

> ID：14720313
> 
> 赞同：4
> 
> 时间：2013-02-06T01:54:15.377
> 
> 标签：r, plot, ggplot2, visualization

我正在绘制一个 4 维数据集。在 x 轴和 y 轴之外，我想用不同宽度和高度的矩形来表示第 3 和第 4 维。我可以这样做`ggplot`吗？谢谢。

![在此处输入图像描述](../Images/f8ee9218be7b7348331b48a423005adf.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T02:39:10.330

这是一种方法：

```
dd <- data.frame(x = (x <- 1:10), 
                 y = x + rnorm(10), width = runif(10,1,2), height = runif(10,1,2))

ggplot(data = dd) + 
  geom_rect(aes(xmax = x + width/2, xmin = x - width/2, 
                ymax = y + height/2, ymin = y - height/2), 
            alpha =0.2, color = rgb(0,114,178, maxColorValue=256), 
            fill = rgb(0,114,178, maxColorValue=256)) + 
  coord_fixed() + 
  theme_bw() 
```

![在此处输入图像描述](../Images/6e36def5877b968b47af07aec4f4c3d8.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T02:59:57.713

你可以尝试这样的事情。我用

1.  `geom_point`shape = 0 模拟矩形
2.  `geom_rect`创建以点为中心的 ractangle

这是我的数据（最好提供一些数据）

```
d=data.frame(x=seq(1,10), 
             y=seq(1,10), 
             width=rep(c(0.1,0.5),each =5), 
             height=rep(c(0.8,0.9,0.4,0.6,0.7),each =2)) 

ggplot(data = d) + 
  geom_rect(aes(xmax = x + width, xmin = x-width, 
                ymax = y+height, ymin = y - height), 
            color = "black", fill = NA) + 
  geom_point(mapping=aes(x=x, y=y,size=height/width),
            color='red',shape=0)+
  theme_bw() 
```

![在此处输入图像描述](../Images/cc887c7a05f2870506391bb0d22ec8bd.png)

# xml - 我是否需要 SSL 证书才能将 XML 消息发送到 SAP PI？

> ID：14720317
> 
> 赞同：0
> 
> 时间：2013-02-06T01:54:34.520
> 
> 标签：xml, sap, sap-xi, sap-pi

我正在创建一个应用程序，它将一个 xml 文件发布到最初为旧应用程序创建的 SAP PI 接口。我有端点 URL 以及所有参数，例如；服务、命名空间、接口、qos。

我也有用户名和密码。今天我对 SAP PI 的 DEV 实例进行了第一次测试调用，并收到 SSL 证书错误。

为了发布到 SAP PI 接口，我的应用程序需要 SSL 证书是否正确？

我在理论上是否应该尝试复制 XML 文件并使用与旧应用程序完全相同的界面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T03:20:16.103

我认为您会发现 SCN 更适合此类问题。 [http://scn.sap.com/community/pi-and-soa-middleware](http://scn.sap.com/community/pi-and-soa-middleware)

但无论如何，请检查管理 PI 系统的基础人员。您可能会收到证书错误的原因有很多。

您可能需要在发送系统上安装证书。PI System 上的证书可能已过期。PI 系统应该有关于 CERT 问题的详细日志。

您还可以要求管理员在 Dev PI 中创建和接受 HTTP 的 ENDPOINT，直到 CERT 问题得到解决（假设流量是内部的）。

# java - JSpinner 有时无法正确显示

> ID：14720322
> 
> 赞同：0
> 
> 时间：2013-02-06T01:54:55.270
> 
> 标签：java, netbeans, jspinner

我的问题是 JSpinner（在代码中名为 spinnerCantidadPuntas）有时根本不显示，或者只是有问题。当我运行项目（F6）时，它几乎可以保证不能正确显示，当我调试它（​​CTRL+F5）时，它大部分时间都能正确显示。我不知道为什么。以下是我使用的详细信息：

产品版本：NetBeans IDE 7.2.1（内部版本 201210100934）Java：1.7.0_11；Java HotSpot(TM) Client VM 23.6-b04 系统：在 x86 上运行的 Windows 7 版本 6.1；CP1252; es_VE (nb)

我做了一个项目，我在这里列出了所有类的内容

```
 package estrella;
    public class Main {
        public static void main(String[] args) {
            Interfaz f=new Interfaz();
        }
    }

    package estrella;
    import java.awt.Color;
    import java.awt.Container;
    import java.util.Hashtable;
    import javax.swing.JFrame;
    import javax.swing.JLabel;
    import javax.swing.JSlider;
    import javax.swing.JSpinner;
    import javax.swing.SpinnerNumberModel;
    public class Interfaz extends JFrame {

        Container c;

        AreaDeDibujos lienzo;

        JLabel lInfo,lCantidadPuntas,lTamanioEstrella,lLargoPuntas;
        JSpinner spinnerCantidadPuntas;
        JSlider sliderTamanioEstrella,sliderLargoPuntas;

        public Interfaz(){

            setTitle("Ejemplo <<Dibujo de primitivas y poligonos>> Version 1.0 (05/02/2013)");
            setSize(1024,720);
            setResizable(false);
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            setLocationRelativeTo(null);
            setVisible(true);

            c=getContentPane();
            c.setBackground(new Color(240,250,245));
            c.setLayout(null);

            /*lienzo=new AreaDeDibujos();
            lienzo.setBounds(25,25,800,600);

            c.add(lienzo);*/

            lInfo=new JLabel("Por favor, seleccione los parametros de la estrella a dibujar:");
            lInfo.setBounds(10,10,350,20);
            c.add(lInfo);

            lCantidadPuntas=new JLabel("Numero de puntas de la estrella: ");
            lCantidadPuntas.setBounds(10,35,350,20);
            c.add(lCantidadPuntas);
            spinnerCantidadPuntas=new JSpinner(new SpinnerNumberModel(7, //valor inicial
                                                              Estrella.MINIMO_PUNTAS, //valor minimo
                                                              Estrella.MAXIMO_PUNTAS, //valor maximo
                                                              1 // incremento/decremento (paso)
                                                             )
                                       );
            spinnerCantidadPuntas.setBounds(10,55,120,20);
            c.add(spinnerCantidadPuntas);

            lTamanioEstrella=new JLabel("Tamaño de la estrella (pixeles): ");
            lTamanioEstrella.setBounds(10,80,350,20);
            c.add(lTamanioEstrella);
            sliderTamanioEstrella=new JSlider( 
                                     JSlider.HORIZONTAL,
                                     AreaDeDibujos.TAMANIO_ESTRELLA_MINIMO,
                                     AreaDeDibujos.TAMANIO_ESTRELLA_MAXIMO,
                                     (int)(AreaDeDibujos.TAMANIO_ESTRELLA_MAXIMO/2)
                                     );
            Hashtable etiquetasDelSlider1 = new Hashtable();
            int i,cantidadDeRayas,rango,paso,minimo,maximo,valorDeLaRaya;
            minimo=AreaDeDibujos.TAMANIO_ESTRELLA_MINIMO;
            maximo=AreaDeDibujos.TAMANIO_ESTRELLA_MAXIMO;
            rango=maximo-minimo;
            cantidadDeRayas=10;
            paso=rango/cantidadDeRayas;
            for(i=0;i<=cantidadDeRayas;i++){
                valorDeLaRaya=minimo+paso*i;
                etiquetasDelSlider1.put(new Integer (valorDeLaRaya), new JLabel(""+valorDeLaRaya));
    }
            sliderTamanioEstrella.setLabelTable( etiquetasDelSlider1 );
            sliderTamanioEstrella.setPaintLabels(true);
            sliderTamanioEstrella.setMajorTickSpacing(10);
            sliderTamanioEstrella.setPaintTicks(true);
            sliderTamanioEstrella.setBounds(10,100,350,60);
            c.add(sliderTamanioEstrella);
        }

    }

    package estrella;
    public class Estrella {
        public static final int MINIMO_PUNTAS=3,MAXIMO_PUNTAS=10;
    }

    package estrella;
    public class GestorDeEventos {   
    }

    package estrella;
    import javax.swing.JComponent;
    public class AreaDeDibujos extends JComponent {
        public static final int TAMANIO_ESTRELLA_MINIMO=50,TAMANIO_ESTRELLA_MAXIMO=400;
    } 
```

我没有费心添加 Jar 文件，因为我知道 ppl 不想下载或运行它，认为它是病毒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T02:00:07.743

*“我的问题是 JSpinner”*，实际上是缺少合适的布局管理器......

使用`null`布局管理器意味着无论何时您使容器无效（通过向其添加某些内容），容器都不会以重绘管理器将识别的方式自我更新。

移动`setVisible(true);`到构造函数的末尾。

如果您使用的是布局管理器，则可以`revalidate`/`repaint`代替。

# python - 计算两个列表之间的相似度

> ID：14720324
> 
> 赞同：10
> 
> 时间：2013-02-06T01:54:57.153
> 
> 标签：python, algorithm, set, similarity

我想计算两个不同长度的列表之间的相似性。

例如：

```
listA = ['apple', 'orange', 'apple', 'apple', 'banana', 'orange'] # (length = 6)
listB = ['apple', 'orange', 'grapefruit', 'apple'] # (length = 4) 
```

如您所见，单个项目可以在列表中出现多次，并且长度大小不同。

我已经考虑过比较每个项目的频率，但这不包括每个列表的大小（一个列表只是另一个列表的两倍应该是相似的，但不是完全相似）

例2：

```
listA = ['apple', 'apple', 'orange', 'orange']
listB = ['apple', 'orange']
similarity(listA, listB) # should NOT equal 1 
```

所以我基本上想包含列表的大小，以及列表中项目的分布。

有任何想法吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-06T02:00:29.320

[`collections.Counter()`](http://docs.python.org/2/library/collections.html#collections.Counter)也许使用；在数据类型用语中，这些是多集或包：

```
from collections import Counter

counterA = Counter(listA)
counterB = Counter(listB) 
```

现在您可以按条目或频率来比较这些：

```
>>> counterA
Counter({'apple': 3, 'orange': 2, 'banana': 1})
>>> counterB
Counter({'apple': 2, 'orange': 1, 'grapefruit': 1})
>>> counterA - counterB
Counter({'orange': 1, 'apple': 1, 'banana': 1})
>>> counterB - counterA
Counter({'grapefruit': 1}) 
```

您可以使用以下方法计算它们的余弦相似度：

```
import math

def counter_cosine_similarity(c1, c2):
    terms = set(c1).union(c2)
    dotprod = sum(c1.get(k, 0) * c2.get(k, 0) for k in terms)
    magA = math.sqrt(sum(c1.get(k, 0)**2 for k in terms))
    magB = math.sqrt(sum(c2.get(k, 0)**2 for k in terms))
    return dotprod / (magA * magB) 
```

这使：

```
>>> counter_cosine_similarity(counterA, counterB)
0.8728715609439696 
```

该值越接近 1，两个列表越相似。

余弦相似度是您可以计算的*一个分数。*如果你关心列表的长度，你可以计算另一个；如果您将该分数保持在 0.0 和 1.0 之间，您可以将这两个值相乘以获得 -1.0 和 1.0 之间的最终分数。

例如，要考虑相对长度，您可以使用：

```
def length_similarity(c1, c2):
    lenc1 = sum(c1.itervalues())
    lenc2 = sum(c2.itervalues())
    return min(lenc1, lenc2) / float(max(lenc1, lenc2)) 
```

然后组合成一个将列表作为输入的函数：

```
def similarity_score(l1, l2):
    c1, c2 = Counter(l1), Counter(l2)
    return length_similarity(c1, c2) * counter_cosine_similarity(c1, c2) 
```

对于您的两个示例列表，这将导致：

```
>>> similarity_score(['apple', 'orange', 'apple', 'apple', 'banana', 'orange'], ['apple', 'orange', 'grapefruit', 'apple'])
0.5819143739626463
>>> similarity_score(['apple', 'apple', 'orange', 'orange'], ['apple', 'orange'])
0.4999999999999999 
```

您可以根据需要混合其他指标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T02:10:26.210

从理论的角度来看：我建议您查找余弦相似度 [http://en.wikipedia.org/wiki/Cosine_similarity](http://en.wikipedia.org/wiki/Cosine_similarity)

您可能需要修改以适应您的方案，但余弦相似性的想法很棒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T08:08:46.723

我相信你正在寻找的是计算数组中的倒数问题有你的答案：[Counting inversions in an array](https://stackoverflow.com/questions/337664/counting-inversions-in-an-array)

# c++ - 我可以使用 static 关键字只分配一次新内存吗？

> ID：14720326
> 
> 赞同：1
> 
> 时间：2013-02-06T01:55:03.007
> 
> 标签：c++, static, keyword

假设我有一个运行多次的函数。该函数包括以下代码：

```
static int *hello = new int; 
```

`hello`只会在第一次运行时分配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T01:57:38.903

是的，它只会分配一次。

但是让我建议你别的。我想你有这样的功能：

```
int* get_static_hello() {
    static int* value = new int;
    return value;
} 
```

好吧，您可以很好地执行以下操作（它是 100% 正确的）：

```
int* get_static_hello() {
    static int value;
    return &value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T01:57:32.037

是的，它只会被分配一次。

在函数中使用静态变量时需要注意的事项：

1.  函数所在的类的所有实例都共享这个变量，它们对所有实例都是相同的，如果它在一个中更改，则对所有实例都更改。

2.  如果你线程这个类，静态变量的访问将不是线程安全的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-06T01:57:24.787

好吧，从技术上讲，int 是在程序启动时分配的。调用函数时不会更改。除了变量仅在函数内部可见之外，它与在文件级别声明静态完全相同。

# c# - 为转储消息注册网络回调的方法

> ID：14720328
> 
> 赞同：0
> 
> 时间：2013-02-06T01:55:18.770
> 
> 标签：c#, network-programming, fiddler, system.net

我有一个 C# 控制台应用程序，我正在对休息 api 进行一些测试。目前我正在使用提琴手来捕获调试调用，这很好，但是......

有没有办法从网络堆栈注册回调以编程方式转储相同的信息，并且仅用于进程正在进行的调用。

本质上是一个特定于进程的程序化版本的提琴手。在 SSL 加密它之前（以及在它被解密之后）捕获它会有一个好处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:18:16.617

您可以查看[Fiddler Core API](http://fiddler.wikidot.com/fiddlercore-demo)，看看您是否有兴趣解决您的问题。从这里[下载。](http://www.fiddler2.com/Fiddler/Core/)

# php - 使用变量准备 PDO sql 语句以调用值

> ID：14720330
> 
> 赞同：0
> 
> 时间：2013-02-06T01:55:25.867
> 
> 标签：php, mysql, pdo

好的，很明显我现在的代码不起作用

```
$stmt = $pdo->prepare('SELECT * FROM '.$table.' WHERE id = :p');
foreach($stmt->execute(array(':p' => $_GET['p'])) as $row) {
    echo $row['id'];
} 
```

但是，希望你能理解我想要做什么。我想从与 id 相关的 sql 条目返回值。我不确定我需要使用什么组合的准备、执行或查询来实现这一点。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T01:58:37.593

最简单的答案：

```
$stmt = $pdo->prepare('SELECT * FROM ' . $table . ' WHERE id = :p');

$stmt->execute(array(':p' => $_GET['p']));

while ($row = $stmt->fetch(PDO::FETCH_ASSOC))
{
    echo $row['id'];
} 
```

* * *

我强烈建议看一下这些单独的方法的作用：

[http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

# python - 如何在 matplotlib 中生成随机颜色？

> ID：14720331
> 
> 赞同：102
> 
> 时间：2013-02-06T01:55:29.543
> 
> 标签：python, matplotlib

如何生成随机颜色以传递给绘图函数的简单示例是什么？

我在循环内调用 scatter 并希望每个绘图都具有不同的颜色。

```
for X,Y in data:
   scatter(X, Y, c=??) 
```

> c：一种颜色。c 可以是单个颜色格式字符串，或长度为 N 的颜色规范序列，或使用 cmap 和通过 kwargs 指定的规范映射到颜色的 N 数字序列（见下文）。请注意，c 不应是单个数字 RGB 或 RGBA 序列，因为它与要进行颜色映射的值数组无法区分。c 可以是一个二维数组，其中行是 RGB 或 RGBA。

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2014-09-02T16:45:29.730

> 我在循环内调用 scatter 并希望每个图都具有不同的颜色。

基于此，并根据您的回答：在我看来，您实际上希望数据集`n` *具有不同的*颜色；**您想将整数索引映射`0, 1, ..., n-1`到不同的 RGB 颜色。**就像是：

![将索引映射到颜色](../Images/61e5184dcc58e2c655e40a62d8efb908.png)

这是执行此操作的功能：

```
import matplotlib.pyplot as plt

def get_cmap(n, name='hsv'):
    '''Returns a function that maps each index in 0, 1, ..., n-1 to a distinct 
    RGB color; the keyword argument name must be a standard mpl colormap name.'''
    return plt.cm.get_cmap(name, n) 
```

*问题中伪*代码片段中的用法：

```
cmap = get_cmap(len(data))
for i, (X, Y) in enumerate(data):
   scatter(X, Y, c=cmap(i)) 
```

* * *

我使用以下代码在我的答案中生成了该图：

```
import matplotlib.pyplot as plt

def get_cmap(n, name='hsv'):
    '''Returns a function that maps each index in 0, 1, ..., n-1 to a distinct 
    RGB color; the keyword argument name must be a standard mpl colormap name.'''
    return plt.cm.get_cmap(name, n)

def main():
    N = 30
    fig=plt.figure()
    ax=fig.add_subplot(111)   
    plt.axis('scaled')
    ax.set_xlim([ 0, N])
    ax.set_ylim([-0.5, 0.5])
    cmap = get_cmap(N)
    for i in range(N):
        rect = plt.Rectangle((i, -0.5), 1, 1, facecolor=cmap(i))
        ax.add_artist(rect)
    ax.set_yticks([])
    plt.show()

if __name__=='__main__':
    main() 
```

使用 Python 2.7 和 matplotlib 1.5 以及 Python 3.5 和 matplotlib 2.0 进行了测试。它按预期工作。

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2013-02-06T02:07:50.823

```
for X,Y in data:
   scatter(X, Y, c=numpy.random.rand(3,)) 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2015-01-29T19:25:00.600

详细说明@john-mee 的答案，如果您有任意长的数据但不需要严格唯一的颜色：

对于蟒蛇 2：

```
from itertools import cycle
cycol = cycle('bgrcmk')

for X,Y in data:
    scatter(X, Y, c=cycol.next()) 
```

对于蟒蛇 3：

```
from itertools import cycle
cycol = cycle('bgrcmk')

for X,Y in data:
    scatter(X, Y, c=next(cycol)) 
```

这样做的好处是颜色易于控制并且很短。

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2015-09-11T09:36:45.713

有一段时间，我对 matplotlib 不生成具有随机颜色的颜色图这一事实感到非常恼火，因为这是分割和聚类任务的常见需求。

通过仅生成随机颜色，我们可能会以一些太亮或太暗结束，从而使可视化变得困难。此外，通常我们需要第一个或最后一个颜色为黑色，代表背景或异常值。所以我为我的日常工作写了一个小函数

这是它的行为：

```
new_cmap = rand_cmap(100, type='bright', first_color_black=True, last_color_black=False, verbose=True) 
```

[![生成的颜色图](../Images/382065d6ea249bbff40d941b215af6e3.png)](https://i.stack.imgur.com/iZQis.png)

比您只使用*new_cmap*作为 matplotlib 上的颜色图：

```
ax.scatter(X,Y, c=label, cmap=new_cmap, vmin=0, vmax=num_labels) 
```

代码在这里：

```
def rand_cmap(nlabels, type='bright', first_color_black=True, last_color_black=False, verbose=True):
    """
    Creates a random colormap to be used together with matplotlib. Useful for segmentation tasks
    :param nlabels: Number of labels (size of colormap)
    :param type: 'bright' for strong colors, 'soft' for pastel colors
    :param first_color_black: Option to use first color as black, True or False
    :param last_color_black: Option to use last color as black, True or False
    :param verbose: Prints the number of labels and shows the colormap. True or False
    :return: colormap for matplotlib
    """
    from matplotlib.colors import LinearSegmentedColormap
    import colorsys
    import numpy as np

    if type not in ('bright', 'soft'):
        print ('Please choose "bright" or "soft" for type')
        return

    if verbose:
        print('Number of labels: ' + str(nlabels))

    # Generate color map for bright colors, based on hsv
    if type == 'bright':
        randHSVcolors = [(np.random.uniform(low=0.0, high=1),
                          np.random.uniform(low=0.2, high=1),
                          np.random.uniform(low=0.9, high=1)) for i in xrange(nlabels)]

        # Convert HSV list to RGB
        randRGBcolors = []
        for HSVcolor in randHSVcolors:
            randRGBcolors.append(colorsys.hsv_to_rgb(HSVcolor[0], HSVcolor[1], HSVcolor[2]))

        if first_color_black:
            randRGBcolors[0] = [0, 0, 0]

        if last_color_black:
            randRGBcolors[-1] = [0, 0, 0]

        random_colormap = LinearSegmentedColormap.from_list('new_map', randRGBcolors, N=nlabels)

    # Generate soft pastel colors, by limiting the RGB spectrum
    if type == 'soft':
        low = 0.6
        high = 0.95
        randRGBcolors = [(np.random.uniform(low=low, high=high),
                          np.random.uniform(low=low, high=high),
                          np.random.uniform(low=low, high=high)) for i in xrange(nlabels)]

        if first_color_black:
            randRGBcolors[0] = [0, 0, 0]

        if last_color_black:
            randRGBcolors[-1] = [0, 0, 0]
        random_colormap = LinearSegmentedColormap.from_list('new_map', randRGBcolors, N=nlabels)

    # Display colorbar
    if verbose:
        from matplotlib import colors, colorbar
        from matplotlib import pyplot as plt
        fig, ax = plt.subplots(1, 1, figsize=(15, 0.5))

        bounds = np.linspace(0, nlabels, nlabels + 1)
        norm = colors.BoundaryNorm(bounds, nlabels)

        cb = colorbar.ColorbarBase(ax, cmap=random_colormap, norm=norm, spacing='proportional', ticks=None,
                                   boundaries=bounds, format='%1i', orientation=u'horizontal')

    return random_colormap 
```

它也在 github 上： [https ://github.com/delestro/rand_cmap](https://github.com/delestro/rand_cmap)

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2013-02-06T02:20:37.000

当少于 9 个数据集时：

```
colors = "bgrcmykw"
color_index = 0

for X,Y in data:
    scatter(X,Y, c=colors[color_index])
    color_index += 1 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2018-07-24T14:20:20.293

由于问题是`How to generate random colors in matplotlib?`并且当我正在寻找有关 的答案`pie plots`时，我认为值得在这里（对于`pies`）提出答案

```
import numpy as np
from random import sample
import matplotlib.pyplot as plt
import matplotlib.colors as pltc
all_colors = [k for k,v in pltc.cnames.items()]

fracs = np.array([600, 179, 154, 139, 126, 1185])
labels = ["label1", "label2", "label3", "label4", "label5", "label6"]
explode = ((fracs == max(fracs)).astype(int) / 20).tolist()

for val in range(2):
    colors = sample(all_colors, len(fracs))
    plt.figure(figsize=(8,8))
    plt.pie(fracs, labels=labels, autopct='%1.1f%%', 
            shadow=True, explode=explode, colors=colors)
    plt.legend(labels, loc=(1.05, 0.7), shadow=True)
    plt.show() 
```

输出

[![在此处输入图像描述](../Images/ed227bee9363a6b2e3595389dfa50307.png)](https://i.stack.imgur.com/FF5dk.png)

[![在此处输入图像描述](../Images/9a362c7b17c98cd1ccab64647fb2652a.png)](https://i.stack.imgur.com/i1CIk.png)

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2017-02-07T01:48:43.417

这是阿里答案的更简洁版本，每个情节给出一种不同的颜色：

```
import matplotlib.pyplot as plt

N = len(data)
cmap = plt.cm.get_cmap("hsv", N+1)
for i in range(N):
    X,Y = data[i]
    plt.scatter(X, Y, c=cmap(i)) 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-12-22T22:01:48.233

根据 Ali 和 Champitoad 的回答：

如果你想尝试不同的调色板，你可以在几行中做到这一点：

```
cmap=plt.cm.get_cmap(plt.cm.viridis, 143) 
```

**143**是您要采样的颜色数

我选择 143 是因为颜色图上的整个颜色范围都在这里发挥作用。您可以做的是每次迭代都对第 n 个颜色进行采样以获得颜色图效果。

```
n=20
for i,(x,y) in enumerate(points):
    plt.scatter(x, y, c=cmap(n*i)) 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-07-03T12:13:38.943

改进答案[https://stackoverflow.com/a/14720445/6654512](https://stackoverflow.com/a/14720445/6654512)以使用 Python3。那段代码有时会生成大于 1 的数字，matplotlib 会抛出错误。

```
for X,Y in data:
   scatter(X, Y, c=numpy.random.random(3)) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-07-16T11:35:15.857

```
enter code here

import numpy as np

clrs = np.linspace( 0, 1, 18 )  # It will generate 
# color only for 18 for more change the number
np.random.shuffle(clrs)
colors = []
for i in range(0, 72, 4):
    idx = np.arange( 0, 18, 1 )
    np.random.shuffle(idx)
    r = clrs[idx[0]]
    g = clrs[idx[1]]
    b = clrs[idx[2]]
    a = clrs[idx[3]]
    colors.append([r, g, b, a]) 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-11-07T10:29:09.077

如果您想确保颜色不同 - 但不知道需要多少种颜色。尝试这样的事情。它从光谱的相对两侧选择颜色并系统地增加粒度。

```
import math

def calc(val, max = 16):
    if val < 1:
        return 0
    if val == 1:
        return max

    l = math.floor(math.log2(val-1))    #level 
    d = max/2**(l+1)                    #devision
    n = val-2**l                        #node
    return d*(2*n-1) 
```

```
import matplotlib.pyplot as plt

N = 16
cmap = cmap = plt.cm.get_cmap('gist_rainbow', N)

fig, axs = plt.subplots(2)
for ax in axs:
    ax.set_xlim([ 0, N])
    ax.set_ylim([-0.5, 0.5])
    ax.set_yticks([])

for i in range(0,N+1):
    v = int(calc(i, max = N))
    rect0 = plt.Rectangle((i, -0.5), 1, 1, facecolor=cmap(i))
    rect1 = plt.Rectangle((i, -0.5), 1, 1, facecolor=cmap(v))
    axs[0].add_artist(rect0)
    axs[1].add_artist(rect1)

plt.xticks(range(0, N), [int(calc(i, N)) for i in range(0, N)])
plt.show() 
```

[输出](https://i.stack.imgur.com/Y5ff5.png)

感谢 @Ali 提供基本实现。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-07-20T18:38:01.143

# 可重复的结果

```
# generate random colors
colors_ = lambda n: list(map(lambda i: "#" + "%06x" % random.randint(0, 0xFFFFFF),range(n)))

fig = plt.figure()
fig.subplots_adjust(hspace=0.4, wspace=0.4)

# how many random colors to generate?
colors = colors_(6)
for i,color in zip(range(1, 7), colors):
    ax = fig.add_subplot(2, 3, i)
    ax.text(0.5, 0.5, str((2, 3, i)),
           fontsize=18, ha='center', color=color) 
```

输出

![](../Images/760b51399cef7a71b1e25cdb06bf3d3c.png)

# c - numactl --physcpubind

> ID：14720332
> 
> 赞同：10
> 
> 时间：2013-02-06T01:55:29.480
> 
> 标签：c, linux, openmp, numa

我正在使用带有 --physcpubind 选项的 numactl。手册说：

```
--physcpubind=cpus, -C cpus
Only execute process on cpus. Etc... 
```

假设我有 3 个 NUMA 节点的 NUMA 系统，每个节点都有 4 个内核。NUMA 节点 0 具有 0、1、2、3 作为核心编号。NUMA 节点 1 有 4,5,6,7，NUMA 节点 2 有 8,9,10,11。我的问题是假设我按如下方式运行程序：

```
export OMP_NUM_THREADS=6
numactl --physcpubind=0,1,4,5,8,9 ./program 
```

即，我将使用 6 个线程运行我的程序，并且我要求它们位于 CPU 内核 0、1、4、5、8、9 上。例如，如果在程序线程 0-5 的某个时间点分配了 CPU 内核 0、1、4、5、8、9 (setup1)。是否有可能在程序执行期间的某个其他时间点，例如，线程 0 可能正在 CPU 核心 9 上运行，等等？即CPU内核之间会有线程迁移吗？或者线程唯一地绑定到 CPU 内核（如 setup1 中）？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T11:49:39.013

**numactl的****physcpubind**选项应该是[sched_setaffinity](http://linux.die.net/man/2/sched_setaffinity)系统调用的接口，它在进程启动时修改进程的 cpuset（允许的 CPU 集）。每个线程都有自己的cpuset，但所有线程都会从父进程继承它们的cpuset值。

因此，允许线程在来自 cpuset 的任何 CPU 上运行，允许在来自 cpuset 的任何 cpu 之间迁移。

任何线程都可以调用 sched_setaffinity 或[pthread_setaffinity_np](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_setaffinity_np.3.html) （Linux 特定的单线程亲和力变化变体）来缩小甚至扩展其 cpuset。

如果要将线程绑定到 CPU，请在每个线程中直接使用 sched_setaffinity 或 pthread_setaffinity_np，或者在通过 OMP 库设置 OpenMP 关联的情况下：[OpenMP 和 CPU 关联](https://stackoverflow.com/q/8325566/772000)，例如使用命令 (OpenMP 3.1+)

```
export OMP_PROC_BIND=true 
```

我猜OMP库会在omp库初始化时从进程的cpuset中以循环方式选择CPU。

对于旧版本的 libgomp - GCC 使用的 OMP 支持库 - 您可以使用以下命令传递允许的 CPU 集：

```
export GOMP_CPU_AFFINITY=0-1,4-5,8-9 
```

PS：要检查您的线程位置，您可以使用键启动`top`并启用“上次使用的 CPU”字段，然后使用 .`f` `j`打开线程显示`H`。

# ember.js - Ember.js 不渲染？

> ID：14720334
> 
> 赞同：1
> 
> 时间：2013-02-06T01:55:30.980
> 
> 标签：ember.js, requirejs, amd

我正在使用最新版本的 Ember.js（目前是 4.0 之前的版本），并且我也在使用 RequireJS。渲染我的所有模板时出现问题。当所有模板都包含在单个 html 文件中的脚本标签中时，Ember 将找到并呈现我的所有模板。但是当我使用文本插件使用 requirejs 将它们分开时，它无法呈现任何内容，甚至显示任何错误。

**main.js**

```
(function(){

    window.App = Ember.Application.create({
        rootElement: '#wrapper',
        LOG_TRANSITIONS: true
    });

    requirejs.config({
        paths: {
            'jquery': 'https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min',
        }, 

        // Use shim for plugins that does not support AMD
        shim: {

        },

    });

    window.compile = function(name, template) {
        return Ember.TEMPLATES[name] = Ember.Handlebars.compile(template);
    };

})();

define([
    'segmentation', 
    'text',

    // Controllers:
    'controllers/index',

    // Views:
    'views/index',

    // Routes:
    'routes/index',
    'router'
    ], function(Segmentation) {

    }
); 
```

**路由器.js**

```
define([], function(){
    App.Router.map(function() {
        this.route("index", {
            path: "/"
        });
    });

    App.Router.reopen({
        location: 'history'
    });

}); 
```

**路线/index.js**

```
define([], function(){
    console.log(App);
    App.IndexRoute = Ember.Route.extend({
        setupController: function(controller) {
            console.log(1);
            // Set the IndexController's `title`
            controller.set('controller', this.container.lookup('controller:index'));
        },
        renderTemplate: function() {
            this.render('index');
        }
    });
}); 
```

最后是模板和视图：

**应用程序视图**

```
define([
    'text!templates/application.html'
    ], function(template){

    App.ApplicationView = Ember.View.extend({
        template: Ember.Handlebars.compile( template )
    });
}); 
```

**申请模板**

```
<center>
    <h1>HEADER</h1>
    <small>small</small>
</center>
<hr/>
<div id="content">{{outlet}}</div> 
```

可能不需要所有这些代码转储，但以防有人要求。当我将模板包装在脚本标签中并将它们插入到 html 文件中时，一切都像魅力一样。

**任何解决方案？**

# powershell - Azure 模拟器 - 启动任务 - Powershell 脚本的内容似乎被忽略

> ID：14720340
> 
> 赞同：0
> 
> 时间：2013-02-06T01:56:05.537
> 
> 标签：powershell, azure, emulation, task, startup

我有一个带有 WorkerRole 的 Azure 项目，我有一个 StartUp 任务。启动任务是一个简单的 .cmd 文件 (startup.cmd)，它调用了一个 powershell 脚本 (PerformanceCounterInstaller.ps1)。看起来 .cmd 文件执行得很好，它可以找到 .ps1 文件（如果 .ps1 文件的路径或名称不正确，我会在 err.out 文件中看到它的提及）。但是，.ps1 文件的实际内容似乎完全被忽略了（写入输出命令、启动脚本、创建性能计数器，...）。我没有收到任何反馈或任何数据表明已执行任何尝试的操作。

我在 err.out 和 std.out 中拥有的唯一数据来自 .cmd 文件，我找不到任何脚本文件。

问候，马里奥。

### 相关文件的内容可以在下面找到。

------ServiceDefinition.csdef 的内容： ------

```
<?xml version="1.0" encoding="utf-8"?>
<ServiceDefinition name="WindowsAzure2" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition" schemaVersion="2012-10.1.8">
  <WorkerRole name="MBAzureTestServiceWorkerRole" vmsize="Small">
    <Startup>
      <Task commandLine="StartupTasks\startuptasks.cmd" executionContext="elevated" taskType="simple" />
    </Startup>
    <Imports>
      <Import moduleName="Diagnostics" />
    </Imports>
  </WorkerRole>
</ServiceDefinition> 
```

------ startuptasks.cmd 的内容： ------

```
cd %~dp0
echo %date% %time% >>std.out
echo %date% %time% >>err.out
powershell -ExecutionPolicy Unrestricted './PerformanceCounterInstaller.ps1'  >>std.out   2>> err.out
EXIT /B 0 
```

------ PerformanceCounterInstaller.ps1 的内容： ------

```
$serviceName = "Test Service"

# Write-Output "This is a test of the broadcasting system..."

Start-Transcript -Path startup_transcript.txt 
Stop-Transcript
[more stuff] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:16:22.287

问题似乎是在 .cmd 文件内的 ps1 文件名和路径周围使用了单引号（即 '）。使用双引号（即“）使其行为正常......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:36:17.917

我认为问题在于您将 PowerShell 的输出重定向到 std.out。我记得这是 PowerShell v2.0 中的一个流行错误。尝试替换此行

```
powershell -ExecutionPolicy Unrestricted './PerformanceCounterInstaller.ps1'  >>std.out   2>> err.out 
```

用这条线

> powershell -ExecutionPolicy Unrestricted './PerformanceCounterInstaller.ps1'

# ruby-on-rails-3.2 - 业力不好的新手的宝石依赖地狱

> ID：14720344
> 
> 赞同：0
> 
> 时间：2013-02-06T01:56:56.380
> 
> 标签：ruby-on-rails-3.2

我是红宝石新手。我想了解一般的 gem 依赖关系，但我的例子是 rspec-rails。我运行`gem dependency rspec-rails -r`我得到一个依赖项列表。我想，好吧，这很酷。我查看列表中的第一个依赖项`rspec-rails`，它是`ZenTest`. 接下来，我想知道是否`ZenTest`有任何未列出的依赖项。我希望不会。我去`gem dependency ZenTest -r`。它列出了三个唯一的依赖项。哇，这太糟糕了。如果它不是递归的，这个命令有什么好处。所以我的问题是，人们如何避免这个地狱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T02:04:51.627

我们使用[Bundler](http://gembundler.com/)。它很好地处理了递归 gem 依赖项。

# c - 24 位 BMP 与 256 色 BMP 中的像素存储

> ID：14720349
> 
> 赞同：1
> 
> 时间：2013-02-06T01:57:22.750
> 
> 标签：c, bmp

在 24 位 bmp 中，像素被存储为`BGR`每种颜色仅占用 1 个字节。那可以读

```
for(i=0;i<heigh*width;i++){    // foreach pixel
    image[i][2] = getc(streamIn);  // use BMP 24bit with no alpha channel
    image[i][1] = getc(streamIn);  // BMP uses BGR but we want RGB, grab byte-by-byte
    image[i][0] = getc(streamIn);  // reverse-order array indexing fixes RGB issue...
    printf("pixel %d : [%d,%d,%d]\n",i+1,image[i][0],image[i][1],image[i][2]);
} 
```

但是在 256 色 bmp 中，每个像素只占用 1 个字节，那么如何读取此图像并获取所有像素值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T02:00:17.160

256 有一个查找表来映射字节值。

[http://en.wikipedia.org/wiki/BMP_file_format](http://en.wikipedia.org/wiki/BMP_file_format)

谷歌一些代码：（未经测试）

[http://paulbourke.net/dataformats/bmp/parse.c](http://paulbourke.net/dataformats/bmp/parse.c)

# jquery - 定位除一个以外的所有元素（jquery）

> ID：14720357
> 
> 赞同：1
> 
> 时间：2013-02-06T01:57:48.340
> 
> 标签：jquery, selector

我需要一些关于 jquery 选择器的帮助...

我需要在按键操作上调用一个函数，但只有当用户不在`<form>`.

我尝试`$('body').not('form').keypress(getKey)`但它不起作用

我尝试了一些`.not()`选择器的组合，但我没有做任何事情......

因此，如果有人知道我该怎么做...

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T01:59:26.863

```
$(document).on('keypress', function (e) {
    if (!$(e.target).closest('form').length) {
       //not in a form
    }
}); 
```

[http://jsfiddle.net/ExplosionPIlls/ZfAdk/](http://jsfiddle.net/ExplosionPIlls/ZfAdk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T02:10:06.967

```
$('*:not(form *)').bind('keypress', function (e) {
       // not in a form
}); 
```

[http://jsfiddle.net/zmc2z/](http://jsfiddle.net/zmc2z/)

# android - SDK升级后Android失败发布到Facebook墙上

> ID：14720365
> 
> 赞同：0
> 
> 时间：2013-02-06T01:58:39.793
> 
> 标签：android, facebook, sdk

我有一个 android 应用程序，我刚刚将 Facebook SDK 升级到 3.0，因为我需要在统计信息中显示移动应用程序安装...

之后 Post To Wall 功能停止运行

我的 LogCAT 结果是：

```
02-06 03:49:38.893: D/dalvikvm(3226): GC_FOR_MALLOC freed 42K, 46% free 3004K/5511K, external 13906K/15688K, paused 19ms
02-06 03:49:42.396: D/dalvikvm(3226): GC_CONCURRENT freed 1281K, 51% free 3697K/7495K, external 13906K/15688K, paused 2ms+2ms
02-06 03:50:05.309: W/dalvikvm(3226): VFY: unable to resolve static field 1967 (com_facebook_login_activity_layout) in Lcom/facebook/android/R$layout;
02-06 03:50:05.309: D/dalvikvm(3226): VFY: replacing opcode 0x60 at 0x0003
02-06 03:50:05.319: D/dalvikvm(3226): VFY: dead code 0x0005-0051 in Lcom/facebook/LoginActivity;.onCreate (Landroid/os/Bundle;)V
02-06 03:50:05.319: W/dalvikvm(3226): VFY: unable to resolve static field 1949 (com_facebook_login_activity_progress_bar) in Lcom/facebook/android/R$id;
02-06 03:50:05.319: D/dalvikvm(3226): VFY: replacing opcode 0x60 at 0x0008
02-06 03:50:05.319: D/dalvikvm(3226): VFY: dead code 0x000a-0013 in Lcom/facebook/LoginActivity;.onPause ()V
02-06 03:50:05.419: W/dalvikvm(3226): VFY: unable to resolve static field 1976 (com_facebook_internet_permission_error_title) in Lcom/facebook/android/R$string;
02-06 03:50:05.419: D/dalvikvm(3226): VFY: replacing opcode 0x60 at 0x0010
02-06 03:50:05.419: D/dalvikvm(3226): VFY: dead code 0x0012-0026 in Lcom/facebook/AuthorizationClient;.checkInternetPermission ()Z
02-06 03:50:05.439: D/Database(3226): dbopen(): path = /data/data/com.antmoves.stardome/databases/webview.db, flag = 6, cannot stat file, error message: No such file or directory
02-06 03:50:05.439: D/Database(3226): dbopen(): path = /data/data/com.antmoves.stardome/databases/webview.db, mode: delete, disk free size: 45 M, handle: 0x48fa38
02-06 03:50:05.499: D/Database(3226): dbopen(): path = /data/data/com.antmoves.stardome/databases/webviewCache.db, flag = 6, cannot stat file, error message: No such file or directory
02-06 03:50:05.509: D/Database(3226): dbopen(): path = /data/data/com.antmoves.stardome/databases/webviewCache.db, mode: delete, disk free size: 45 M, handle: 0x492808
02-06 03:50:05.599: W/dalvikvm(3226): VFY: unable to resolve static field 1943 (com_facebook_close) in Lcom/facebook/android/R$drawable;
02-06 03:50:05.599: D/dalvikvm(3226): VFY: replacing opcode 0x60 at 0x001d
02-06 03:50:05.599: D/dalvikvm(3226): VFY: dead code 0x001f-002e in Lcom/facebook/widget/WebDialog;.createCrossImage ()V
02-06 03:50:05.599: W/dalvikvm(3226): VFY: unable to resolve static field 1977 (com_facebook_loading) in Lcom/facebook/android/R$string;
02-06 03:50:05.599: D/dalvikvm(3226): VFY: replacing opcode 0x60 at 0x0024
02-06 03:50:05.599: D/dalvikvm(3226): VFY: dead code 0x0026-006d in Lcom/facebook/widget/WebDialog;.onCreate (Landroid/os/Bundle;)V
02-06 03:50:19.473: D/AndroidRuntime(3226): Shutting down VM
02-06 03:50:19.473: W/dalvikvm(3226): threadid=1: thread exiting with uncaught exception (group=0x4001d5a0)
02-06 03:50:19.543: E/AndroidRuntime(3226): FATAL EXCEPTION: main
02-06 03:50:19.543: E/AndroidRuntime(3226): java.lang.NoClassDefFoundError: com.facebook.android.R$string
02-06 03:50:19.543: E/AndroidRuntime(3226):     at com.facebook.widget.WebDialog.onCreate(WebDialog.java:188)
02-06 03:50:19.543: E/AndroidRuntime(3226):     at android.app.Dialog.dispatchOnCreate(Dialog.java:339)
02-06 03:50:19.543: E/AndroidRuntime(3226):     at android.app.Dialog.show(Dialog.java:249)
02-06 03:50:19.543: E/AndroidRuntime(3226):     at com.facebook.AuthorizationClient$WebViewAuthHandler.tryAuthorize(AuthorizationClient.java:461)
02-06 03:50:19.543: E/AndroidRuntime(3226):     at com.facebook.AuthorizationClient.tryCurrentHandler(AuthorizationClient.java:209)
02-06 03:50:19.543: E/AndroidRuntime(3226):     at com.facebook.AuthorizationClient.tryNextHandler(AuthorizationClient.java:188)
02-06 03:50:19.543: E/AndroidRuntime(3226):     at com.facebook.AuthorizationClient.authorize(AuthorizationClient.java:116)
02-06 03:50:19.543: E/AndroidRuntime(3226):     at com.facebook.AuthorizationClient.startOrContinueAuth(AuthorizationClient.java:97)
02-06 03:50:19.543: E/AndroidRuntime(3226):     at com.facebook.Session.tryLegacyAuth(Session.java:1096)
02-06 03:50:19.543: E/AndroidRuntime(3226):     at com.facebook.Session.authorize(Session.java:893)
02-06 03:50:19.543: E/AndroidRuntime(3226):     at com.facebook.Session.open(Session.java:957)
02-06 03:50:19.543: E/AndroidRuntime(3226):     at com.facebook.Session.openForPublish(Session.java:415)
02-06 03:50:19.543: E/AndroidRuntime(3226):     at com.facebook.android.Facebook.openSession(Facebook.java:319)
02-06 03:50:19.543: E/AndroidRuntime(3226):     at com.facebook.android.Facebook.authorize(Facebook.java:313)
02-06 03:50:19.543: E/AndroidRuntime(3226):     at com.facebook.android.Facebook.authorize(Facebook.java:221)
02-06 03:50:19.543: E/AndroidRuntime(3226):     at com.antmoves.stardome.ShareOnFacebook.loginAndPostToWall(ShareOnFacebook.java:135)
02-06 03:50:19.543: E/AndroidRuntime(3226):     at com.antmoves.stardome.ShareOnFacebook.share2(ShareOnFacebook.java:121)
02-06 03:50:19.543: E/AndroidRuntime(3226):     at com.antmoves.stardome.ShareOnFacebook$1.onClick(ShareOnFacebook.java:59)
02-06 03:50:19.543: E/AndroidRuntime(3226):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:159)
02-06 03:50:19.543: E/AndroidRuntime(3226):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-06 03:50:19.543: E/AndroidRuntime(3226):     at android.os.Looper.loop(Looper.java:143)
02-06 03:50:19.543: E/AndroidRuntime(3226):     at android.app.ActivityThread.main(ActivityThread.java:4263)
02-06 03:50:19.543: E/AndroidRuntime(3226):     at java.lang.reflect.Method.invokeNative(Native Method)
02-06 03:50:19.543: E/AndroidRuntime(3226):     at java.lang.reflect.Method.invoke(Method.java:507)
02-06 03:50:19.543: E/AndroidRuntime(3226):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-06 03:50:19.543: E/AndroidRuntime(3226):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-06 03:50:19.543: E/AndroidRuntime(3226):     at dalvik.system.NativeStart.main(Native Method) 
```

我的 facebook 课程是：

```
 private static final String APP_ID = "AppID";
private static final String[] PERMISSIONS = new String[] {"publish_stream"};
private static final String TOKEN = "Tokken";
private static final String EXPIRES = "expires_in";
private static final String KEY = "facebook-credentials";
private Facebook facebook;
private String messageToPost;
@SuppressWarnings("deprecation")
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

    facebook = new Facebook(APP_ID);
    restoreCredentials(facebook);

    requestWindowFeature(Window.FEATURE_NO_TITLE);

    setContentView(R.layout.share_on_facebook);
    AlertDialog.Builder alert_box=new AlertDialog.Builder(this);
    alert_box.setMessage("Are you sure?");
    alert_box.setPositiveButton("Yes",new DialogInterface.OnClickListener() {

       public void onClick(DialogInterface dialog, int which) {
           if (isNetworkAvailable())
               share2();
            else
                Toast.makeText(getApplicationContext(), "No Internet!", Toast.LENGTH_LONG).show();

       }
      });
    alert_box.setNegativeButton("No", new DialogInterface.OnClickListener() {

       public void onClick(DialogInterface dialog, int which) {
           doNotShare2();
       }
      });
    alert_box.show();
    setContentView(R.layout.share_on_facebook);

    String facebookMessage = getIntent().getStringExtra("facebookMessage");
    if (facebookMessage == null){
        facebookMessage = "Test wall post";
    }
    messageToPost = facebookMessage;
} 
@SuppressWarnings("deprecation")
public boolean saveCredentials(Facebook facebook) {
        Editor editor = getApplicationContext().getSharedPreferences(KEY, Context.MODE_PRIVATE).edit();
        editor.putString(TOKEN, facebook.getAccessToken());
        editor.putLong(EXPIRES, facebook.getAccessExpires());
        return editor.commit();
    }
    @SuppressWarnings("deprecation")
    public boolean restoreCredentials(Facebook facebook) {
        SharedPreferences sharedPreferences = getApplicationContext().getSharedPreferences(KEY, Context.MODE_PRIVATE);
        facebook.setAccessToken(sharedPreferences.getString(TOKEN, null));
        facebook.setAccessExpires(sharedPreferences.getLong(EXPIRES, 0));
        return facebook.isSessionValid();
    }
private boolean isNetworkAvailable() {
    ConnectivityManager connectivityManager 
    = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
  NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();
  if (activeNetworkInfo != null)
      return activeNetworkInfo.isConnected();
  return false;
}
public void doNotShare(View button){
    finish();
}
@SuppressWarnings("deprecation")
public void share(View button){
    if (! facebook.isSessionValid()) {
        loginAndPostToWall();
    }
    else {
        postToWall(messageToPost);
    }
}
@SuppressWarnings("deprecation")
public void share2(){
    if (! facebook.isSessionValid()) {
        loginAndPostToWall();
    }
    else {
        postToWall(messageToPost);
    }
}
public void doNotShare2(){
    finish();
}

@SuppressWarnings("deprecation")
public void loginAndPostToWall(){
    try {
        facebook.authorize(this, PERMISSIONS, Facebook.FORCE_DIALOG_AUTH, new LoginDialogListener());
    } catch (Exception e) {
        // TODO: handle exception
        Log.e("MYAPP", "exception", e);
    }

    //facebook.authorize(this, PERMISSIONS, Facebook.FORCE_DIALOG_AUTH, new LoginDialogListener());
}
@SuppressWarnings("deprecation")
public void postToWall(String message){
    Bundle parameters = new Bundle();
            parameters.putString("message", message);
            parameters.putString("description", "topic share");
            try {
                facebook.request("me");
        String response = facebook.request("me/feed", parameters, "POST");
        Log.d("Tests", "got response: " + response);
        if (response == null || response.equals("") ||
                response.equals("false")) {
            showToast("Blank response.");
        }
        else {
            showToast("Error!!");
        }
        finish();
    } catch (Exception e) {
        showToast("Error!!");
        e.printStackTrace();
        finish();
    }
}
class LoginDialogListener implements DialogListener {
    public void onComplete(Bundle values) {
        saveCredentials(facebook);
        if (messageToPost != null){
        postToWall(messageToPost);
    }
    }
    public void onFacebookError(FacebookError error) {
        showToast("Authentication with Facebook failed!");
        finish();
    }
    public void onError(DialogError error) {
        showToast("Authentication with Facebook failed!");
        finish();
    }
    public void onCancel() {
        showToast("Authentication with Facebook cancelled!");
        finish();
    }
}
private void showToast(String message){
    Toast.makeText(getApplicationContext(), message, Toast.LENGTH_SHORT).show();
} 
```

知道如何解决这个问题吗？？？？

谢谢大家的时间...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:19:26.293

您的应用中的 Facebook SDK 存在问题：

`03:50:19.543: E/AndroidRuntime(3226): FATAL EXCEPTION: main 02-06 03:50:19.543: E/AndroidRuntime(3226): java.lang.NoClassDefFoundError: com.facebook.android.R$string`

`02-06 03:50:19.543: E/AndroidRuntime(3226): at com.facebook.widget.WebDialog.onCreate(WebDialog.java:188)`

这意味着它无法在您的最终 APK 中找到从 Facebook SDK 引用的 R$string。检查以确保您包含必要的类文件。

# objective-c - 更改 NSWindow 边框颜色

> ID：14720366
> 
> 赞同：3
> 
> 时间：2013-02-06T01:58:57.827
> 
> 标签：objective-c, macos, cocoa

我需要更改应用程序 NSWindow 周围的边框颜色。

有谁知道窗口边框的绘制位置，以及如何更改颜色/覆盖绘制边框的方法？

我注意到 Tweetbot 这样做：

![常规边框与 Tweetbot 边框](../Images/4c9f3ae24cfca99577a46e8dd5d64a02.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T05:56:28.797

从记忆中，我认为 Tweetbot 使用了一个完整的无边框窗口，并自己添加了窗口控件，但如果你想让 AppKit 仍然处理这些细节，还有另一种方法。如果将窗口设置为纹理窗口，则可以设置自定义背景 NSColor。这个 NSColor 可以是使用的图像`+[NSColor colorWithPatternImage:]`

我快速敲了这个例子，只是使用纯灰色作为填充，但是你可以在这个图像中绘制任何你喜欢的东西。然后，您只需将 NSWindow 的类类型设置为带纹理的窗口类。

SLFTexturedWindow.h

```
@interface SLFTexturedWindow : NSWindow
@end 
```

SLFTexturedWindow.m

```
#import "SLFTexturedWindow.h"

@implementation SLFTexturedWindow

- (id)initWithContentRect:(NSRect)contentRect
                styleMask:(NSUInteger)styleMask
                  backing:(NSBackingStoreType)bufferingType
                    defer:(BOOL)flag;
{
    NSUInteger newStyle;
if (styleMask & NSTexturedBackgroundWindowMask) {
    newStyle = styleMask;
} else {
    newStyle = (NSTexturedBackgroundWindowMask | styleMask);
}

if (self = [super initWithContentRect:contentRect styleMask:newStyle backing:bufferingType defer:flag]) {

    [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(windowDidResize:)
                                                     name:NSWindowDidResizeNotification
                                                   object:self];

        [self setBackgroundColor:[self addBorderToBackground]];

        return self;
}

return nil;
}

- (void)windowDidResize:(NSNotification *)aNotification
{
    [self setBackgroundColor:[self addBorderToBackground]];
}

- (NSColor *)addBorderToBackground
{
    NSImage *bg = [[NSImage alloc] initWithSize:[self frame].size];
    // Begin drawing into our main image
[bg lockFocus];

[[NSColor lightGrayColor] set];
NSRectFill(NSMakeRect(0, 0, [bg size].width, [bg size].height));

    [[NSColor blackColor] set];

    NSRect bounds = NSMakeRect(0, 0, [self frame].size.width, [self frame].size.height);
    NSBezierPath *border = [NSBezierPath bezierPathWithRoundedRect:bounds xRadius:3 yRadius:3];
    [border stroke];

    [bg unlockFocus];

    return [NSColor colorWithPatternImage:bg];  
}

@end 
```

# ruby-on-rails - Sass 与 theme_for_rails gem

> ID：14720367
> 
> 赞同：2
> 
> 时间：2013-02-06T01:59:00.510
> 
> 标签：ruby-on-rails, themes

我正在使用[theme_for_rails](https://github.com/lucasefe/themes_for_rails) gem 并试图让它与 Sass 一起使用。

我尝试了默认配置（主题存储在 root/themes 中）和主题存储在 root/app/assets/themes 中的解决方案。

我所有的“*.scss”文件都没有编译。

我尝试对此进行调试，发现themes_for_rails 在检查“sass_is_available?”时无法加载Sass::Plugin？在“ [lib/themes_for_rails/config.rb](https://github.com/lucasefe/themes_for_rails/blob/master/lib/themes_for_rails/config.rb) ”中——

有人对此有解决方案吗？

**编辑：**

服务器在有乘客的 apache 上运行。

**编辑：**

我为这个 gem 做了一个[fork](https://github.com/codesource/themes_for_rails)来解决这个问题。

*   来自 lucasefe scss/sass 文件的原始 gem 应存储在每个文件夹/子文件夹的“sass”文件夹中，生成的 css 存储在包含“sass”文件夹的文件夹中。
*   使用 fork，生成的 css 可以存储在缓存文件夹中，控制器在需要时获取它们，因此生成的 css 不会污染您的样式表文件夹。

# iphone - 如何在 iPhone 上播放视频时禁用前进/后退按钮？

> ID：14720371
> 
> 赞同：1
> 
> 时间：2013-02-06T01:59:17.310
> 
> 标签：iphone, cordova, html5-video

我有一个播放 HTML5 标签的 PhoneGap 应用程序。播放视频时，会使用 prev / play / next 按钮调用原生 iOS 视频播放器。如果我点击下一个按钮，因为没有下一个视频，应用程序就会进入黑屏。有没有办法禁用这些按钮或正确处理它们的事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:34:42.787

像这样的工作？

```
var video = document.getElementById("video"); // assuming "video" is your videos' id
video.removeAttribute("controls"); 
```

# xcode - 整数可以通过多个类访问？

> ID：14720374
> 
> 赞同：0
> 
> 时间：2013-02-06T01:59:28.487
> 
> 标签：xcode, ios6, int

我正在制作一个基于测验的游戏，其中有多个共享一个“跳过问题”按钮的视图控制器。用户将有 3 个跳过，并且可以随时购买更多。我正在尝试创建一个类，我可以在其中使用一个 sharedInstance 来添加跳过或使用一个，但我不明白的是如何检索他们在我的一个视图控制器上的跳过数量. 例如：

我的整数类.h

```
int skips; 
```

我的整数类.m

```
skips = 3; 
```

我的 ViewController.h

```
int vcSkips; 
```

我的 ViewController.m

```
vcSkips = [MyIntegerclass skips]; 
```

只是一个例子。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:01:37.267

您需要使用静态变量：

[http://www.learncpp.com/cpp-tutorial/811-static-member-variables/](http://www.learncpp.com/cpp-tutorial/811-static-member-variables/)

# java - 使用 SBT 管理构建时启用 java 断言

> ID：14720375
> 
> 赞同：3
> 
> 时间：2013-02-06T01:59:33.587
> 
> 标签：java, sbt, assertions

一段时间以来，我第一次在 Eclipse 之外进行 Java 编程（对于 coursera 算法课程），并且我正在尝试使用 SBT 进行构建。SBT 工作正常（虽然启动缓慢），但我不知道如何启用断言。以下任何一项似乎都不起作用。

```
javaOptions += "-ea" // doesn't work
javaOptions in run += "-ea" // doesn't work either 
```

构建.sbt

```
// disable using the Scala version in output paths and artifacts
crossPaths := false

// Enable assertions?
javaOptions += "-ea" // doesn't work
//javaOptions in run += "-ea" // doesn't work either

organization := "me"

name := "me"

version := "1.0-SNAPSHOT"

// Use jars from parent dir. Normally jars are stuck in lib/
unmanagedJars in Compile += file("../stdlib.jar")

unmanagedJars in Compile += file("../algs4.jar") 
```

快速查找.java

```
import java.util.Arrays; // I hate java so much

public class QuickFind {
    public int[] id;

    public QuickFind (int N) {
        id = new int[N];
        int i;
        for (i = 0; i < N; i++) {
            id[i] = i;
        }
    }

    public boolean connected (int p, int q) {
        return id[p] == id[q];
    }

    public void union (int p, int q) {
        // Walk through array and make everything with id = p || q
        // equal to id p
        int pid = id[p];
        int qid = id[q];

        int i;
        for (i = 0; i < id.length; i++) {
            if (id[i] == qid) id[i] = pid;
        }
    }

    public static void main (String[] args) {
        StdOut.println("QuickFind"); // from stdlib.jar
        QuickFind uf = new QuickFind(4);
        uf.union(0,1);

        // Assert unions work
        StdOut.println("array=" + Arrays.toString(uf.id));
        assert uf.connected(0,1);
        assert uf.connected(0,2); // <---------------------this should fail
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T02:03:56.307

[这个链接](http://www.scala-sbt.org/release/docs/Detailed-Topics/Forking.html)解释了它。简短版本在您的 build.sbt 中使用以下内容：

```
// Enable assertions
fork in run := true

javaOptions in run += "-ea" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-23T14:13:21.057

对于那些可能难以让断言在 SBT 项目下工作的人，这可能对您有所帮助。

我尝试了这两种方法`fork := true` `javaOptions += "-ea"`，甚至`sbt "show run-options"`证明该标志位于 javaOptions 中。出于某种奇迹的原因，运行时断言仍然不起作用。

我不确定这是 SBT 错误还是什么。但直到我使用 `export _JAVA_OPTIONS="-ea"`sbt 才运行 finally log `Picked up _JAVA_OPTIONS: -ea`。

我希望这会有所帮助，因为我确实花了 3 个小时在这上面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T03:41:27.137

我想知道为什么您需要*在 build*中启用断言。

该`-ea`选项在您实际运行程序时启用断言检查。这是一种`java`选择，而不是一种`javac`选择。您不需要（并且 AFAIK 不能）在构建时启用/禁用代码中的断言。

# c# - 实体框架如何使验证仅发生在实体上而不是底层实体上

> ID：14720376
> 
> 赞同：1
> 
> 时间：2013-02-06T01:59:33.457
> 
> 标签：c#, .net, entity-framework-4

我所有的实体都继承自[IValidatableObject](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.ivalidatableobject.aspx)。我遇到的问题是，当我保存一个实体并且该实体包含一个引用另一个未完全加载的实体的属性（它不为空，但仅包含内部带有引用键的对象）时，代码会引发错误。错误是属性（引用另一个实体）未正确验证。这是真的，因为对象只包含 ID。让我用一个小例子告诉你我在说什么：

```
public class Exercise : BaseModel
{
    public LocalizedString Name { get; set; }
    public virtual Muscle Muscle { get; set; }

    public override IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if (Name == null)
        {
            yield return new ValidationResult("Name is mandatory", new[] { "Name" });
            yield break;
        }

        if (Name.French == null || Name.French.Length < 3)
        {
            yield return new ValidationResult("Exercise's French name must be over 3 characters");
        }

        if (Name.English == null || Name.English.Length < 3)
        {
            yield return new ValidationResult("Exercise's English name must be over 3 characters");
        }

        if (Muscle == null)
        {
            yield return new ValidationResult("Exercice must be assigned to a muscle");
        }
    }
}

public class Muscle : BaseModel
{
    public LocalizedString Name { get; set; }
    public ICollection<Exercise> Exercises { get; set; }
    public override IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if (Name == null)
        {
            yield return new ValidationResult("Name is mandatory", new[] { "Name" });
            yield break;
        }

        if (Name.French == null || Name.French.Length < 3)
        {
            yield return new ValidationResult("Muscle's French name must be over 3 characters");
        }

        if (Name.English == null || Name.English.Length < 3)
        {
            yield return new ValidationResult("Muscle's English name must be over 3 characters");
        }
    }
}

//--- This is the code into the repository:
public int Insert(Exercise entity)
{
    if (entity.Muscle != null)
    {
        var localExercise = DatabaseContext.Set<Muscle>().Local.SingleOrDefault(e => e.Id == entity.Muscle.Id);
        if (localExercise != null)
        {
            DatabaseContext.Set<Muscle>().Attach(entity.Muscle);
        }
    }

    DatabaseContext.Set<Exercise>().Add(entity);
    return DatabaseContext.SaveChanges();
} 
```

我正在保存练习。练习包含一个名称，而 Muscle 设置了一个有效的 ID，但不包含任何名称。这就是为什么当我保存时在实体框架内进行验证，告诉我肌肉对象需要名称。

我不需要完全加载肌肉，因为我只想附上这个。我不想在练习里面有一个属性“MuscleID”。我真的很想拥有这种结构。

谁能告诉我我需要做什么才能让验证只发生在保存的实体上而不是外来对象上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T03:39:39.130

您应该在控制器和视图之间使用 ViewModel。这样你就可以让你的模型脱离方程。比使用[AutoMapper](https://github.com/AutoMapper/AutoMapper)将 ViewModel 属性映射到控制器中回发的模型。ViewModel 可以定义您的验证规则并实现 IValidatableObject。您还可以将所有 ViewModel 定义为没有基础实体。这使您无法看到多余的实体和属性。确保在 if (ModelState.IsValid) 检查后使用 AutoMapper 将 ViewModel 映射到您的模型。

# python - Pygame 窗口挂起

> ID：14720377
> 
> 赞同：-2
> 
> 时间：2013-02-06T01:59:47.517
> 
> 标签：python, pygame

我正在使用 pygame 进行绘图（我知道我可以使用 matplotlib，但这更适合），绘图正确渲染但 pygame 窗口挂起，代码有问题吗？

```
 xp,yp = 400,400
        pantalla = pygame.display.set_mode((xp,yp))
        pantalla.fill((255,255,255))
        for x in range(0,xp,20):
            pygame.draw.line(pantalla, (0,0,0) , (x, 1), (x, 800))
        for y in range(0,yp,20):
            pygame.draw.line(pantalla, (0,0,0) , (1, y), (800, y))
        pygame.draw.line(pantalla,(0,0,0), (yp/2,0),(yp/2,xp),4)
        pygame.draw.line(pantalla,(0,0,0), (0,xp/2),(yp,xp/2),4)
        pygame.draw.circle(pantalla, (0,0,0), (xp/2,yp/2),5)
        pygame.display.flip()
        #### La pantalla esta cargada totalmente a partir de aqui
        while 1:
            colora,colorb,colorc = random.randint(0,0),random.randint(0,0),random.randint(0,0)
            listacoordenadas = []
            for x in range(-6,7):
                listacoordenadas.append((x*20+xp/2,yp/2-eval(code)*20))
            for indice in range(len(listacoordenadas)-1):
                pygame.draw.line(pantalla,(colora,colorb,colorc), listacoordenadas[indice],listacoordenadas[indice+1],4)
            pygame.display.flip()
        raw_input() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:46:55.540

你的问题只是你没有办法离开循环。`while 1:`将以下代码放在循环中的某个位置。另外，请记住`import sys`.

```
for event in pygame.event.get():
    if event.type==pygame.QUIT:
        pygame.quit()
        sys.exit() 
```

# arrays - c中的二维到一维数组

> ID：14720378
> 
> 赞同：0
> 
> 时间：2013-02-06T01:59:47.420
> 
> 标签：arrays, 2d

我正在研究遗传算法和 C 编程语言。我的任务是读入一个表示连通图的矩阵，然后根据节点之间的距离计算适应度，教授明确表示这不必精确，也不必遵循图上的约束。所以我的想法是将矩阵读入一个有效的二维数组。我现在需要将该二维数组转换为一维数组，我们将其称为机架，然后我们将机架打乱并将其分成两个相等长度的较小数组。

矩阵为 20*20，因此机架的大小必须为 400。

无论如何，这是我这样做的代码，尽管它不起作用。

```
void TwoDtoOneD(int array[][SIZE], int left[SIZE*SIZE]){
    int i,j;
    for(i=0;i<SIZE*SIZE;i++){
        for(j=0;j<SIZE*SIZE;j++){
            left[i] = array[i][j];
        }//end for
    }//end for
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:16:48.257

通过执行两个 fors 并让它们迭代直到 SIZE^2，你的`array[i]`迭代太多了。 `i`应该只到 20（或 SIZE），这是矩阵的`i`最大值`j`。为了完成这项工作，您需要第三个变量，每次将值更改为向量（左）时，该变量都会递增，并且此变量与 for 循环变量启动无关。

因此，对于您的示例，它将是这样的：

```
void TwoDtoOneD(int array[SIZE][SIZE], int left[SIZE*SIZE]){  /
  int i,j,k;
  k=0;
  for(i=0;i<SIZE;i++){
     for(j=0;j<SIZE;j++){
        left[k] = array[i][j];
        k++;
     }//end for
  }//end for
} 
```

现在，您的`left[]`数组有`k+1`元素，您可以遍历它直到`k`.

最后，由于您正在使用图形，因此请尝试阅读有关图形路径算法（[Dijkstra's](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)、[Prim's](http://en.wikipedia.org/wiki/Prim%27s_algorithm)、[Floyd's](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)、[Johnson's](http://en.wikipedia.org/wiki/Johnson%27s_algorithm) ...）的一些内容，您会发现对于您所有的人来说，这是一个无限的深思熟虑的解决方案图的问题（或大多数）。

希望这可以帮助。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T02:07:10.390

`left[j+i*SIZE] = array[i][j]`

了解左侧每个条目如何填充循环的逻辑，然后担心根据需要放置数组数据。

# php - PHP：如何创建（PNG、JPEG 或 GIF）图像并直接以 base 64 编码而不保存它？

> ID：14720387
> 
> 赞同：0
> 
> 时间：2013-02-06T02:00:30.333
> 
> 标签：php, image, image-processing

我有一个创建图像的脚本。我必须用它制作一个通用格式，如 GIF、JPEG 或 PNG，然后将其转换为 base 64。

这样做时，我不想将图像保存在服务器上，也不需要任何浏览器输出。所以 imagepng() 似乎不是正确的命令。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T02:05:24.987

如果一切都失败了，你总是可以这样做：

```
ob_start();
imagepng($resource);
$png = base64_encode(ob_get_clean()); 
```

# jquery - 将字符串作为对象传递给 jQuery 函数

> ID：14720393
> 
> 赞同：3
> 
> 时间：2013-02-06T02:00:56.190
> 
> 标签：jquery, json, string, object, arguments

这可能是一个愚蠢的问题，但我试图传入我以以下格式构建的设置字符串：

```
"setting1" : "value", "setting2" : "value", "setting3" : "value" 
```

以上内容保存到名为 args 的字符串中。没什么特别的，但我想将它作为参数传递给函数。

```
$('#element').functionName({ args }); 
```

我不确定我在这里错过了什么......谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T02:03:21.117

如果你真的有这样的字符串：

```
'"setting1" : "value", "setting2" : "value", "setting3" : "value"' 
```

您可以使用解析它`JSON.parse`并从中获取一个对象，如下所示：

```
var args = JSON.parse( "{" + str + "}" );
$('#element').functionName(o); 
```

但实际上，您可能只想从一开始就创建这样的对象而不是字符串，例如：

```
var args = {"setting1" : "value", "setting2" : "value", "setting3" : "value"};
$('#element').functionName(args); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T02:05:42.830

没有愚蠢的问题。尝试：

```
var args = JSON.parse("{'setting1' : 'value', ...}"); 
```

然后将“args”变量传递给你的函数。

# regex - regexp_matches 在 plpgsql 函数中返回 NULL

> ID：14720394
> 
> 赞同：1
> 
> 时间：2013-02-06T02:01:01.213
> 
> 标签：regex, postgresql, pattern-matching, plpgsql, postgresql-9.1

给定一个文件名：

xxxx/2013-02/csv/Sales_1302040000-1302050000.zip

有人可以解释为什么 regexp_matches 在这个函数中返回 null：

```
CREATE OR REPLACE FUNCTION get_import_batch_date(filename text) 
RETURNS DATE AS
$BODY$    
DECLARE
    matches text[];
    result date;
BEGIN

    matches := regexp_matches(filename, E'Sales_(\\d{2})(\\d{2})(\\d{2})');    
    IF matches IS NOT NULL THEN
        result := format('%s-%s-%s', 2000 + matches[1]::int, matches[2], matches[3])::DATE;
        RETURN result;
    END IF;

    RAISE WARNING 'Unable to determine batch date from %', filename;

    RETURN NULL;

END;
$BODY$
  LANGUAGE plpgsql IMMUTABLE; 
```

然而，在以下匿名函数中工作：

```
DO language plpgsql $$
DECLARE
    filename text := 'xxxx/2013-02/csv/Sales_1302040000-1302050000.zip';
    matches text[];
    result date;
BEGIN

    matches := regexp_matches(filename, E'Sales_(\\d{2})(\\d{2})(\\d{2})');    
    IF matches IS NOT NULL THEN
        result := format('%s-%s-%s', 2000 + matches[1]::int, matches[2], matches[3])::DATE;
        raise notice '%', result;
    END IF;

END;
$$; 
```

并且 regexp_matches 似乎在此查询中正常工作，但同样，该函数失败并返回 null

```
SELECT
    regexp_matches('xxxx/2013-02/csv/Sales_1302040000-1302050000.zip', E'Sales_(\\d{2})(\\d{2})(\\d{2})'),
    get_import_batch_date('xxxx/2013-02/csv/Sales_1302040000-1302050000.zip'); 
```

我的代码中是否有我没有看到的错误（很可能也是最常见的答案）或者我在这里没有做些什么？

我正在使用 PostgreSQL 9.1.6

最后一点：给定这个文件名，我希望函数返回 2013-02-04 的日期值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T02:59:54.047

### 更新：

这个问题原来是对 pgAdmin 中的 pgScript 的混淆。@David 在 pgAdmin 的查询工具中按 F6 来运行 pgScript 而不是**F5**来运行 SQL 脚本。请参阅[下面的评论](https://stackoverflow.com/questions/14720394/regexp-matches-returns-null-inside-plpgsql-function/14743261#comment20631435_14743261)。
功能本身很好。

### 简化功能

我无法重现您的错误（在 Postgres 9.1.6 上测试，没有返回`NULL`），但我*可以*为您提供一个更简单的函数版本，它可能不会失败：

```
CREATE OR REPLACE FUNCTION get_import_batch_date(filename text, OUT result date)
  AS
$func$    
BEGIN
   result := ('20' || substring(filename, E'Sales_(\\d{6})'))::date;

   IF result IS NULL THEN
      RAISE WARNING 'Unable to determine batch date from %', filename;
   END IF;
END
$func$ LANGUAGE plpgsql IMMUTABLE; 
```

*   使用`OUT`参数来简化事情。

*   不需要相当复杂的`regexp_matches()`表达式和它所需要的数组转换。一个简单`substring()`的调用就可以完成这项工作。预先`20`准备好，然后您就可以转换为`date`紧了。*该格式与在任何*语言环境中都有效的 ISO 8601 日期格式相匹配。您的原始版本也依赖于此，只是添加了`-`可选的连字符 ( )。

    ```
     `'20130204'::date` works just as well as `'2013-02-04'::date` 
    ```

*   不需要`RETURN`，`OUT`参数的值`result`会自动返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T02:10:23.417

也可以在这里工作：[http ://sqlfiddle.com/#!1/d084b/1](http://sqlfiddle.com/#!1/d084b/1)

您确定这正是传递给 get_import_batch_date 的文件名吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T03:56:57.633

好的！我终于弄明白了。我不确定为什么会发生这种情况，或者发生了什么，但我至少可以解决它。我在这里发布的答案实际上是基于 Erwin 的答案。他的代码（像往常一样）比我的要好得多，但是如果其他人将来遇到这个非常令人沮丧的问题，这将有效。

基本上，我今晚又在玩它，它终于引起了我的注意。如果我采用此代码：

```
CREATE OR REPLACE FUNCTION get_import_batch_date(in filename text, out result date) AS
$BODY$
DECLARE
BEGIN
   result := substring(filename, E'Sales_(\\d{6})')::date;
   IF result IS NULL THEN
      RAISE WARNING 'Unable to determine batch date from %', filename;
   END IF;   
END
$BODY$
  LANGUAGE plpgsql IMMUTABLE
  COST 100; 
```

...然后按 F6 以“运行脚本”，您会收到以下消息：

```
[QUERY    ] CREATE OR REPLACE FUNCTION get_import_batch_date(in filename text, out result date) AS
            $BODY$
            DECLARE
            BEGIN
               result := substring(filename, E'Sales_(\d{6})')::date;
               IF result IS NULL THEN
                  RAISE WARNING 'Unable to determine batch date from %', filename;
               END IF;   
            END
            $BODY$
              LANGUAGE plpgsql IMMUTABLE
              COST 100 
```

你能发现关键问题吗？我昨晚不能，但今晚做了。它正在剥离子字符串函数上的“\”之一。

这将导致匹配失败并返回 NULL。

如果您按 F5 或单击该功能的“运行”按钮，则它可以正常工作。（这可能是人们正在做的事情，或者可能是 SQLFiddle 正在做的事情（这里总猜测）。

为了让 F6 为我工作，我不得不将行更改为：

```
 result := substring(filename, E'Sales_(\\\d{6})')::date; 
```

所以，这对我有用。这感觉就像某个地方的错误。但是，我不知道在哪里。也许@Erwin 可以对此有所了解。

# javascript - 没有重复，我怎样才能使页脚背景适合 100% 宽度

> ID：14720395
> 
> 赞同：1
> 
> 时间：2013-02-06T02:01:05.547
> 
> 标签：javascript, html, css

我有一个 100% 的页脚 div，我想在其中应用背景。背景图片宽度为1350px，这是背景图片

> [https://dl.dropbox.com/u/69217301/bg.png](https://dl.dropbox.com/u/69217301/bg.png)

如您所见，图像是曲线之一，因此当屏幕尺寸大于 1350 像素时，我的背景图像将重复，但如果我设置重复无，它也不会填充 100%。

所以我想知道的是，有没有什么方法可以将页脚背景设置为 100% 填充，无论屏幕尺寸是多少并且不重复？

请帮助我。任何解决方案都是可以接受的，CSS 或 Javascript，没关系。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T02:02:04.813

你试过了`background-position: center`吗？这将使其居中对齐，因此如果您拉伸页面，背景图像仍将位于中间。

另外：[拉伸和缩放 CSS 背景](https://stackoverflow.com/questions/376253/stretch-and-scale-css-background)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T02:04:38.163

您可以为此使用**背景大小**属性。像这样写：

```
#footer{
 background-size:100% auto;
 -moz-background-size:100% auto;
 -webkit-background-size:100% auto;
} 
```

阅读更多[http://www.css3.info/preview/background-size/](http://www.css3.info/preview/background-size/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T02:04:53.547

拉伸背景图像以完全填充内容区域（CSS3）：

```
div
{
background:url(image.png);
background-size:100% 100%;
background-repeat:no-repeat;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T04:00:59.527

最好的方法是将背景大小设置为`cover`：

CSS：

```
.cover{
    background-image: url("https://dl.dropbox.com/u/69217301/bg.png");
    background-position: center center;
    background-repeat: no-repeat;
    background-size: cover;
    height: 126px;
} 
```

**[这在jsFiddle](http://jsfiddle.net/4fVRf/)**中很难看到，因为结果窗口非常小，但是如果您将其展开尽可能多，您可以缩小并获得一个大致的概念。把它放在一个单独的页面上，以真正看到它的实际效果。

# python - 如何转义与 python 关键字匹配的 bash 关键字？

> ID：14720404
> 
> 赞同：1
> 
> 时间：2013-02-06T02:02:45.533
> 
> 标签：python, bash, command-line, escaping, keyword

示例 - 任何 bash 关键字（例如`else`or `in`）也会导致：

```
$ python -c 'import sys;for p in sys.path:print p'
  File "<string>", line 1
    import sys;for p in sys.path:print p
                 ^
SyntaxError: invalid syntax 
```

双引号不能解决它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T02:09:27.280

`for`这与Bash 关键字无关。就是这样

```
import sys;for p in sys.path:print p 
```

不是有效的 Python 语法。如果您在`python`没有参数的情况下运行然后在提示符处输入，您会得到相同的错误。

您可以通过添加换行符来修复它：

```
import sys
for p in sys.path:print p 
```

您可以在 Bash 命令中执行以下操作：

```
python -c ' import sys
            for p in sys.path:print p
          ' 
```

或这个：

```
python -c $'import sys\nfor p in sys.path:print p' 
```

（其中`$'...'`是一种 Bash 语法，它允许在字符串中使用类似 C 的转义序列，例如`\n`换行符）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T02:15:09.330

请尝试以下

```
python -c "exec(\"import sys;\\nfor p in sys.path:print p\")" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T02:28:39.727

这是另一种方法....更直接一点

```
python -c "import sys; print '\n'.join(sys.path)" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-11T00:08:46.083

如果分号和`compound_stmt`关键字不相邻，它会起作用：

```
# instead of '; for'
python -c 'import sys; print [p for p in sys.path]' 
```

或者

```
# instead of '; if'
python -c "x=1; print x if x>0 else ''" 
```

# php - 函数返回 false - 但我确定它应该是 true

> ID：14720412
> 
> 赞同：0
> 
> 时间：2013-02-06T02:03:33.027
> 
> 标签：php, string, function, if-statement

我有这个字符串：

```
$currentpath = basename(__FILE__); 
```

如果我写

```
echo $currentpath; 
```

它返回 navleft.php

现在我的功能：

```
function colorButton() {
    if($currentpath == "navleft.php") {
        echo "navbuttonon";
    } else {
        echo "navbuttunoff";
    }
} 
```

但是如果我调用这个函数

```
colorButton(); 
```

我总是得到 navbuttonoff。

为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T02:05:09.683

您需要了解[变量范围](http://php.net/manual/en/language.variables.scope.php)。除非您将其作为参数传递（或使用邪恶的东西，例如），否则`$currentpath`无法使用：`colorButton``global`

```
function colorButton($currentpath) {
if($currentpath == "navleft.php") {
    echo "navbuttonon";
} else {
    echo "navbuttunoff";
}
} 
```

手册中的完美示例：

```
<?php
$a = 1; /* global scope */ 

function test()
{ 
    echo $a; /* reference to local scope variable */ 
} 

test();
?> 
```

> 此脚本不会产生任何输出，因为 echo 语句引用了 $a 变量的本地版本，并且尚未在此范围内为其分配值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T02:05:36.767

您要么需要：

**1.使用全局**

```
function colorButton() {
    global $currentpath;

    if($currentpath == "navleft.php") {
        echo "navbuttonon";
    } else {
        echo "navbuttunoff";
    }
} 
```

或者，更好的解决方案：

**2\. 将路径作为参数传入**

```
function colorButton($currentpath) {

    if($currentpath == "navleft.php") {
        echo "navbuttonon";
    } else {
        echo "navbuttunoff";
    }
}

colorButton($currentpath); 
```

* * *

**你应该了解的事情：**

[http://php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T02:07:34.103

你不能从这样的函数中调用 vars ......

它应该像

```
<?
$currentpath = 'navleft.php';
function colorButton() {

  global $currentpath;

  if($currentpath == "navleft.php") {
    echo "navbuttonon";
  } else {
    echo "navbuttunoff";
  }
}
colorButton(); 
```

或者像这样

```
<?
$currentpath = 'navleft.php';
function colorButton($currentpath) {

  if($currentpath == "navleft.php") {
    echo "navbuttonon";
  } else {
    echo "navbuttunoff";
  }
}
colorButton($currentpath); 
```

# ajax - 在jsp中更改时如何从数据库中检索内容

> ID：14720414
> 
> 赞同：0
> 
> 时间：2013-02-06T02:03:36.747
> 
> 标签：ajax, jsp, jquery

我是 html5&jsp 的初学者，我只想在房间列表从数据库更改时检索它。基本上，当我单击主页标题上的房间列表时，我可以获得房间列表，但如果另一个用户腾出房间，我无法实时获得房间列表。请帮助我，谢谢

听到是我的主页代码

```
<%@ page language="java" contentType="text/html; charset=EUC-KR"
pageEncoding="EUC-KR"%>
<%@ page import="java.sql.*"%>
<%@ page import="java.util.*" %>
<% request.setCharacterEncoding("euc-kr"); %>
<html>
<Head>
    <meta http-equiv="Content-Type" content="text/html; charset=EUC-KR">
    <title>RoomListing</title>
    <link rel="stylesheet"   href="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.css" />  
    <script src="http://code.jquery.com/jquery-1.5.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.js"></script>
    <script type="text/javascript">
    function ReloadPage() {
       location.reload();
        alert("hihi");
    };
    $(document).ready(function() {
        alert("hi");    

        setInterval("ReLoadPage()", 3000);
    });
    </script>   
</Head>
<body>
<section id="page1" data-role="page">
<%
//String subject = request.getParameter("subject");

Connection conn = null;
Statement stmt = null;

try{
    Class.forName("com.mysql.jdbc.Driver").newInstance();
    conn = DriverManager.getConnection( "jdbc:mysql://localhost:8888/test",
             "root", "1234" );
    if(conn==null)
        throw new Exception("데이터베이스에 연결할 수 없습니다.<br>");

    stmt = conn.createStatement();
    ResultSet rs = stmt.executeQuery("select * from roominfo");
    ArrayList<String> room_list = new ArrayList<String>();
    while(rs.next()){
        room_list.add(rs.getString("id")+":"+rs.getString("subject")+":"+rs.getString("content"));
    }

    int num = room_list.size();
    request.setAttribute("num", num);

    for(int i=0; i<num; i++){

        String room_name = null;
        String max = room_list.get(i);
        out.print("<input type ='button' id = 'button1' value = "+max+">");
        request.setAttribute("room_name"+i, room_list.get(i));
    }

}catch(Exception e){
    e.printStackTrace();

}finally{
    try{
        stmt.close();
    }catch (Exception ignored){
    }
    try {
        conn.close();
    }catch(Exception ignored){}

    }
//RequestDispatcher dispatcher = request.getRequestDispatcher("RoomListing1.jsp");
//dispatcher.forward(request, response);

%>  

</section>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T06:03:47.183

基本上，刷新或重新加载只会更改与 jsp 相关的内容，例如颜色、图像、样式等。在 scriptlet 中编写的 Java 代码与刷新无关。因此，当单击房间列表时，所发生的只是页面刷新而已。如果您想动态获取数据，您需要创建一个 servlet 来管理每次单击用户列表或刷新页面时应调用的 java 相关活动。您不能在 JSP 中编写整个代码，这不是一个好方法。

# python - python 在 fedora linux 上仅限于一个核心

> ID：14720417
> 
> 赞同：0
> 
> 时间：2013-02-06T02:04:05.860
> 
> 标签：python, linux, multiprocessing, fedora

我有八核处理器（amd fx-8120 on 3.4GHz），我尝试在 fedora 18 上使用 multiprossing 库，它创建了所有进程但我没有工作，它只使用一个核心。我必须对我的 python 代码进行哪些更改？谢谢

```
import time
def fibo(n):
    if n < 2:
        return n
    else:
        return (fibo(n-2)+fibo(n-1))
start_time = time.time()
print fibo(35)
print time.time() - start_time, "seconds" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T02:21:51.693

你的`fibo()`函数没有线程。将`multiprocessing`模块扔向它不会神奇地使其自身并行运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T02:17:13.483

这是纯 python 中的处理器绑定任务。请参阅：[全局解释器锁](http://wiki.python.org/moin/GlobalInterpreterLock)

# c# - 在 WPF 表单文本框中自动选择单行

> ID：14720420
> 
> 赞同：1
> 
> 时间：2013-02-06T02:04:32.340
> 
> 标签：c#, .net, wpf, wpf-controls

我正在尝试在多行 WPF 文本框中自动选择整行。因此，如果用户单击第 3 行上的一个单词，则选择了整个第 3 行。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T02:12:57.163

[MSDN 上的 WPF 文本框选择开始](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.selectionstart.aspx)

最简单的方法是获取这个值并在 TextBox 的内容中向后迭​​代，直到 count 达到 0 或`\n \r\n \r`然后向前直到文本大小或`\n \r\n \r`。之后将当前选择设置为这些边界。

# javascript - NVD3 javascript：为散点图中的点添加颜色

> ID：14720425
> 
> 赞同：5
> 
> 时间：2013-02-06T02:04:45.963
> 
> 标签：javascript, plot, scatter-plot, scatter, nvd3.js

我正在尝试从一些具有 x、y 和 z 值的数据中绘制散点图。

我的代码与 NVD3 网站 [http://nvd3.org/ghpages/scatter.html](http://nvd3.org/ghpages/scatter.html)上的示例相同，除了我还计算 az 值。可以说z = x + y。我不想改变半径的值，而是想通过在两种颜色之间插值来设置颜色。

所有点都显示在图表上，但我不知道如何为单个点设置颜色，仅适用于系列。为简单起见，我首先尝试将点设置为静态颜色，如下所示：

```
[{"key":"X Plus Y","values":[{"x":0,"y":0,"z":0,"color":"#ff0000"}, ...] 
```

但这不起作用，所以我想我需要在 javascript 中执行此操作。我查看了 scatterChart.js，但没有看到简单的方法。但我绝不是 javascript 专家，所以我可能很容易错过一些东西。

关于如何做到这一点的任何建议？我需要学习如何创建新的模型文件吗？

我还想在工具提示中显示 z 值，但这将是第 2 步。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T00:30:04.617

我刚刚遇到了同样的问题，并找到了适合我的用例的解决方法 - YMMV。

基本上，我的理解（来自 NVD3 的源代码）是您确实只能为系列设置颜色，而不是为单个点设置颜色：因此，我确实`color: '#rrggbb'`像在示例中所做的那样向值对象添加了一个项目（只是因为它更容易我来构建这样的数据结构），然后从中设置每个系列的颜色值（我正在使用 underscore.js，但您应该能够在纯 JavaScript 中执行此操作）：

```
final_groups = _.map(groups, function(values, group_id) {
    return { key: group_id, color: values[0].color, values: values };
}); 
```

如果您需要使用颜色连续体而不是逐点设置颜色或使用离散比例，我使用[mbostock 的这个答案的建议](https://stackoverflow.com/questions/12217121/continuous-color-scale-from-discrete-domain-of-strings)让 D3 为我生成颜色值：

```
function compute_color_on_linear_scale(data, value, colorProperty, colorRange) {
    // get a list of all the groups (this works if the colorProperty,
    // aka z in your case, is numeric, otherwise the sort function
    // needs to be adjusted accordingly)
    // In your case, you could just write item.z rather than item[colorProperty]
    // if your function doesn't need to be generic, and in that case you can
    // omit the colorProperty argument from the argument list altogether
    categories = _.uniq(_.map(data, function(item) {
        return item[colorProperty];
    }).sort(function(a,b){return a - b}), true);

    // if no color range was provided, set a default one
    if(typeof colorRange === 'undefined') { colorRange = ['red', 'green']; }

    // this is mbostock's magic enchantment from his reply linked above
    var color = d3.scale.ordinal()
      .domain(categories)
      .range(d3.range(categories.length).map(d3.scale.linear()
      .domain([0, categories.length - 1])
      .range(colorRange)
      .interpolate(d3.interpolateLab)));

    return color(value);
} 
```

这应该可以解决问题。我的最后一步是隐藏图例，因为在这种情况下这没有多大意义。

至于在 tooltip 中显示 z 值，需要重写 scatterChart() 的默认 tooltipContent() 函数，例如

```
var chart = nv.models.scatterChart()
  .showDistX(true)
  .showDistY(true)
  .tooltipContent(function(key, x, y, obj) {
      return '<h3>' + obj.point.label + ' (' + key + ')</h3>';
  }); 
```

您可以根据需要对其进行自定义 - 如果您只是`console.log(arguments);`在函数的开头添加，您可以在浏览器的开发人员工具中准确检查哪些数据可供您在工具提示中使用：

```
[...]
.tooltipContent(function(key, x, y, obj) {
    console.log(arguments);
    return '<h3>' + obj.point.label + ' (' + key + ')</h3>';
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T20:44:46.423

要为散点图中的气泡添加颜色属性，我们可以在 nv.models.scatter 中添加 getColor 访问器，如 getSize。

```
 , getSize      = function(d) { return d.size || 1} // accessor to get the point size
 , getColor     = function(d) { 
                var colors = ["red", "orange", "yellow", "green", "blue"];
                return colors[d.color] || 'red'} // accessor to get the point color 
```

您可以使用绘制圆圈的“填充”属性添加颜色

```
//Info:May be on Mousehover??
points.enter().append('circle')
    .attr('cx', function(d,i) { return x0(getX(d,i)) })
    .attr('cy', function(d,i) { return y0(getY(d,i)) })
    .attr('r', function(d,i) { return Math.sqrt(z(getSize(d,i))/Math.PI) })
    .attr('fill', function(d,i) { return getColor(d,i)}); 
```

# java - if 语句 else 语句失败

> ID：14720435
> 
> 赞同：-1
> 
> 时间：2013-02-06T02:05:44.090
> 
> 标签：java, eclipse, blackberry, blackberry-eclipse-plugin

我有一个黑莓应用程序，它基本上对我输入的信息进行选择查询，所以如果我输入“5”，它会执行一个`select * from table where id=5`，所以我会得到结果。但是，该子句的 else 语句应该返回“未找到结果”。代码贴在下面：

```
public void onResponse(String data, int code) {

    final Vector vehicleInfo = jasonParser.parseVechicleResponse(data);

    if(vehicleInfo.size() > 0 ){
        UiApplication.getUiApplication().invokeLater(new Runnable() {
            public void run() {
                removeLoader();
                UiApplication.getUiApplication().pushScreen(new VehicleSearchResultScreen(etfVehicleInfo.getText(),vehicleInfo));
            }
        });
    }else{
        UiApplication.getUiApplication().invokeLater(new Runnable() {
            public void run() {
                removeLoader();
                Dialog.alert("No Results found.");
            }
        });
    }
} 
```

这段代码的问题是如果`vehicleinfo.size() = 0`这个 else 语句没有运行。运行的代码是下面发布的代码，这是我的错误代码。发生收集错误时应该调用它。所以基本上，当找不到记录时，它会显示连接错误的字符串，我根本不知道为什么这个 else 语句没有运行；或者它是否运行，并且被以下语句过度运行？

```
public void onError(final String data, int code) {
    UiApplication.getUiApplication().invokeLater(new Runnable() {
        public void run() {
            removeLoader();
            Dialog.alert("No Results Found!");
        }
    });
} 
```

解析代码

```
public Vector parseVehicleResponse(String response){
    Vector vector = new Vector();
    try{
        JSONObject jsonVehicleObject = new JSONObject(response);
        VehicleObject vehicle = new VehicleObject();
            vehicle.setChassisNum(jsonVehicleObject.getString("chassis_no"));//chassis_num
            vehicle.setEngineNum(jsonVehicleObject.getString("engine_no"));//engine_num
            vector.addElement(vehicle);
    }catch(Exception e){
        System.out.println("JSONResponseParser.parseNewsHeadlines() " + e );
    }

    return vector;
} 
```

}

json

```
 // Return  encoded with JSON
            $result = array(

    "chassis_no"=>$chassis_no,
   "engine_no"=>$engine_no,

 ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:09:23.963

在我看来，您的`jasonParser.parseVechicleResponse(data);`电话正在引发错误，并且您永远不会得到该`if`声明。会不会是笔误？你的意思

```
parseVehicleResponse 
```

代替

```
parseVechicleResponse 
```

（不是额外的“c”）？？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T02:37:57.547

为了保持思想流分开，我在这里开始一个新的答案......您可以尝试`parseVehicleResponse`通过添加“虚拟元素零”来修改代码，如下所示：

```
public Vector parseVehicleResponse(String response){
    Vector vector = new Vector();
    VehicleObject vehicle = new VehicleObject(); // create a "dummy object"
    vehicle.setChassisNum("-1"); // initialize members - with "valid" data... 
    vehicle.setEngineNum("-1");  // again - make it valid type, but otherwise "wrong"
    vector.addElement(vehicle);  // the vector now has at least one element

    // here comes your original code:
    try{
        JSONObject jsonVehicleObject = new JSONObject(response);
        VehicleObject vehicle = new VehicleObject();
            vehicle.setChassisNum(jsonVehicleObject.getString("chassis_no"));//chassis_num
            vehicle.setEngineNum(jsonVehicleObject.getString("engine_no"));//engine_num
            vector.addElement(vehicle);
    }catch(Exception e){
        System.out.println("JSONResponseParser.parseNewsHeadlines() " + e );
    }
    return vector;
} 
```

现在，在主循环中，您执行以下操作：

```
Public void onResponse(String data, int code) {

    final Vector vehicleInfo = jasonParser.parseVechicleResponse(data);

    if(vehicleInfo.size() > 1 ){
        UiApplication.getUiApplication().invokeLater(new Runnable() {
            public void run() {
                removeLoader();
                // { add some code to strip the zero-th element from vehicleInfo() } 
                UiApplication.getUiApplication().pushScreen(new VehicleSearchResultScreen(etfVehicleInfo.getText(),vehicleInfo));
            }
        });
    }else{
        UiApplication.getUiApplication().invokeLater(new Runnable() {
            public void run() {
                removeLoader();
                Dialog.alert("No Results found.");
            }
        });
    }
} 
```

这将进一步缩小对问题的搜索范围......

# python - set.union() 抱怨传入生成器时没有参数

> ID：14720436
> 
> 赞同：5
> 
> 时间：2013-02-06T02:05:56.127
> 
> 标签：python, ipython, generator

这是来自 Wes Mckinney 的 Python for Data Analysis 第 204 页

```
genre_iter = (set(x.split('|')) for x in movies.genres)
genres = sorted(set.union(*genre_iter)) 
```

`%paste`在 IPython 中使用该方法时，此代码可以完美运行。该代码在 Python shell 中运行时也能完美运行。但是，当我直接在 IPython 中键入第二行时，没有`%paste`方法

```
genres = sorted(set.union(*genre_iter)) 
```

我收到以下错误

```
TypeError: descriptor 'union' of 'set' object needs an argument 
```

这似乎是一个错误，除非我仍然不知道 IPython 的某个功能。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-06T02:08:55.293

你已经用尽了发电机。在再次使用之前重新定义它：

```
genre_iter = (set(x.split('|')) for x in movies.genres)
genres = sorted(set.union(*genre_iter)) 
```

在 python 中，一旦你循环了一个迭代器的所有元素，你就不能再循环这个迭代器（它现在是空的）。

因为`genre_iter`迭代器是空的，你没有传递*任何*参数，`set.union()`因此它抱怨：

```
>>> set.union()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: descriptor 'union' of 'set' object needs an argument 
```

明确地说：您没有在 ipython 中找到错误。您可以在常规 python 提示符中重现相同的问题。

# iphone - NSString 缩短器，类似于 bit.ly 但在 iOS 上

> ID：14720437
> 
> 赞同：1
> 
> 时间：2013-02-06T02:05:56.500
> 
> 标签：iphone, objective-c, ipad

我正在使用网络服务来获取一些动态生成的图像并将其发送到我的应用程序。问题是根据我用来生成图像的所有参数，文件名往往会变得超长。现在我遇到了所有参数导致名称超过 255 个字符的情况。

所以我需要一种方法来缩短它们并确保它们保持唯一性，类似于 bit.ly 所做的，但我需要在设备上完成它。只要最终名称少于 255 个字符，我就可以。

不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T02:10:36.280

当您有大量数据，并且想要对其进行指纹识别或获取一些唯一值时 = `hash`。

您可以 sha1 或 md5 您的文件名，除非您正在建造核电站，或者要在火星上撞毁漫游车，否则不要担心碰撞。

那个或带有 guid 或递增数字的查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:33:33.523

是的，你的愿望实现了:)

有...**适用于 iOS 的 Bitlyzer** -“在 iOS 上使用 Bit.ly 缩短 URL 的类”

您只需要设置您的 Bitly API 用户名和密钥

更多信息[在这里](https://github.com/albertodebortoli/Bitlyzer)

# multidimensional-array - 在 Python 中创建一个包含余弦的 numpy 数组

> ID：14720438
> 
> 赞同：2
> 
> 时间：2013-02-06T02:06:01.530
> 
> 标签：multidimensional-array, numpy, python-2.7

我正在尝试创建一个 nxm numpy 数组，该数组由一组余弦（如 cos(v_t)、cos(2 * v_t)、cos(3 * v_t)、...）填充，我尝试使用以下;

```
v_t = np.linspace(0,tmax,tsteps)
m_psi = np.zeros([tsteps,m])
for i in xrange(m):
  for j in xrange(tsteps):
    m_psi[j,i] = np.cos(v_t * k * 2 * pi/T)
    k += 1 
```

但这会返回错误

```
ValueError: setting an array element with a sequence. 
```

我需要数组的每个元素都是这些余弦之一，而不是数组的一行或一列是余弦（因为我要执行某种操作，例如 np.dot(R,m_psi)，其中R是另一个二维数组，这个乘法的结果也必须是一个矩阵）。

编辑：澄清一下，我正在寻找类似的东西

```
[[cos(v_t),     cos(2*v_t),   ...,cos(m*v_t)],
[cos((m+1)*v_t),cos((m+2)*v_t,...,cos(2*m*t)],
[etc.]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T04:20:59.627

**编辑**根据您在下面的评论，此非工作代码：

```
v_t = np.linspace(0, tmax, tsteps)
m_psi = np.array([tsteps,m])
for j in range(m):
    m_psi[:,np.cos(v_t*m*2*pi/T)] 
```

可以翻译成工作 numpy 为：

```
v_t = np.linspace(0, tmax, tsteps)
m_psi = np.empty((tsteps, m))
for j in xrange(m) :
    m_psi[:, m] = np.cos(v_t * m * 2 * np.pi / T) 
```

您可以使用广播而不是循环以更优雅和 numpythonic 的方式实现完全相同的事情：

```
v_t = np.linspace(0, tmax, tsteps)
m_psi = np.cos(v_t[:, None] * np.arange(m)[None, :] * 2 * np.pi / T) 
```

* * *

你必须弄清楚一些细节，但这样的事情可能就是你所追求的：

```
v_t = np.linspace(0, m * tmax, m * tsteps)
m_psi = np.cos(v_t * 2 * np.pi / T).reshape(tsteps, m) 
```

如果我们不考虑余弦部分：

```
>>> m = 4
>>> tsteps = 5
>>> np.arange(m * tsteps).reshape(tsteps, m)
array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11],
       [12, 13, 14, 15],
       [16, 17, 18, 19]]) 
```

并且这些数组中的值将乘以上面代码中余弦内的基值。

# cluster-computing - 使用 2 个服务器设置 Percona Xtradb 集群的问题

> ID：14720441
> 
> 赞同：0
> 
> 时间：2013-02-06T02:07:19.290
> 
> 标签：cluster-computing, percona, xtradb

我正在尝试在两台机器上设置 Percona XtraDB 集群。但我在让第二台机器启动并运行时遇到了可怕的时间。

我已将[这篇文章](http://www.sebastien-han.fr/blog/2012/08/29/setup-galera-with-sst-xtrabackup-method/)用作参考，虽然它似乎几乎可以工作，但我可能缺少一些基本的东西。

机器如下：

```
Node 1: 192.168.2.10
Node 2: 192.168.2.11 
```

两台机器都运行 Ubuntu 12.04 LTS。

节点 1 上的配置文件与文章类似。

当我使用上述配置启动此节点时，它可以正常工作。我可以通过命令行登录并运行

```
mysql> SHOW status LIKE 'wsrep%'; 
```

命令如它所描述的那样。一切看起来都很正常。

注意：节点 1 以前是标准的 mySQL 服务器，并且在 /var/lib/mysql 文件夹中已经有数据。这并没有影响它以上述配置正常启动。

然后我按照[文章中](http://www.sebastien-han.fr/blog/2012/08/29/setup-galera-with-sst-xtrabackup-method/)关于添加新节点的步骤进行操作。这似乎是我遇到问题的地方。

**我在节点 2 (192.168.2.11)**上创建了 my.ini ，并使用了与文章类似的配置。

当我尝试使用**service mysql start 启动服务时**，它说它已启动，但我无法再通过命令行连接。

我尝试将节点 1 上的配置文件更改回原来的配置文件，然后启动节点 2，但这也不起作用。

我通过在命令行上使用 mysqld 命令简单地启动 mysql 来捕获日志，这是修剪后的结果（只有有错误的东西）：

```
130206 14:53:56 [ERROR] WSREP: Failed to read 'ready <addr>' from: wsrep_sst_xtrabackup --role 'joiner' --address 'ip_address' --auth 'root:password' --datadir '/var/lib/mysql/' --defaults-file '/etc/mysql/my.cnf' --parent '14762'
        Read: '(null)'
130206 14:53:56 [ERROR] WSREP: Process completed with error: wsrep_sst_xtrabackup --role 'joiner' --address 'ip_address' --auth 'root:password' --datadir '/var/lib/mysql/' --defaults-file '/etc/mysql/my.cnf' --parent '14762': 2 (No such file or directory)
130206 14:53:56 [ERROR] WSREP: Failed to prepare for 'xtrabackup' SST. Unrecoverable.
130206 14:53:56 [ERROR] Aborting 
```

这是节点 2 连接时节点 1 报告的内容（节点 1 使用第一个配置文件 - 再次修剪）

```
130206 14:59:44 [ERROR] WSREP: failed to open gcomm backend connection: 110: failed to reach primary view: 110 (Connection timed out)
         at gcomm/src/pc.cpp:connect():139
130206 14:59:44 [ERROR] WSREP: gcs/src/gcs_core.c:gcs_core_open():195: Failed to open backend connection: -110 (Connection timed out)
130206 14:59:44 [ERROR] WSREP: gcs/src/gcs.c:gcs_open():1290: Failed to open channel 'percona_cluster' at 'gcomm://192.168.2.11': -110 (Connection timed out)
130206 14:59:44 [ERROR] WSREP: gcs connect failed: Connection timed out
130206 14:59:44 [ERROR] WSREP: wsrep::connect() failed: 6
130206 14:59:44 [ERROR] Aborting 
```

节点 2 报告类似。

如果有人可以帮助我解决我犯的愚蠢错误，将不胜感激。

*（抱歉帖子的长度 - 我想提供尽可能多的信息）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:04:06.657

我的安装似乎有问题。在干净的服务器上安装设置很好，但使用它作为替代品我遇到了错误。

我需要彻底清除其他 mysql 软件，我必须让它在我的“脏”服务器上运行得更好。

# java - Android LinearLayout在java代码中设置layout_gravity

> ID：14720449
> 
> 赞同：2
> 
> 时间：2013-02-06T02:08:13.420
> 
> 标签：java, android, layout, layout-gravity

我在这个布局上有问题:(

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/cuerpo"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical"
    android:orientation="vertical" >
... 
```

在java代码中

```
LinearLayout cuerpo = (LinearLayout) findViewById(R.id.cuerpo);

if(align){
   cuerpo.setGravity(Gravity.CENTER_VERTICAL);
}else{
   cuerpo.setGravity(Gravity.NO_GRAVITY);
} 
```

我需要 layout_gravity 没有重力。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T02:50:04.253

您正在谈论的布局重力`LayoutParams`在`LinearLayout`对象的范围内。因此，从逻辑上讲，要做到这一点，您必须遵循以下步骤：

1.  获取`LayoutParams`您的`LinearLayout`.

2.  如果你知道`LayoutParams`应该是什么，你可以施放它们（注意，这是基于**你的**选择，所以你必须确保它是正确的！）。

3.  `gravity`根据需要设置`LayoutParams`。

所以在代码中这将是：

```
ViewGroup.LayoutParams layoutParams = cuerpo.getLayoutParams(); // Step 1.
LinearLayout.LayoutParams castLayoutParams = (LinearLayout.LayoutParams) layoutParams; // Step 2.
castLayoutParams.gravity = Gravity.CENTER_VERTICAL; // Step 3. 
```

或者作为一个简单的一个班轮，将所有步骤合二为一：

```
((LinearLayout.LayoutParams) cuerpo.getLayoutParams()).gravity = Gravity.CENTER_VERTICAL; 
```

**请注意：**

我无法确切地看到您要做什么，但它似乎不正确。的类型`LayoutParams`不是 的类型`View`，而是`Layout`您`View`要居住的类型。

（**即**就像在@gincsait 的参考中一样，如果我在 a`Button`中有 a `LinearLayout`，那么 the`LayoutParams`的`Button`将是 type `LinearLayout.LayoutParams`。对于the**不能这么**说。）`LayoutParams``LinearLayout`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-06T02:47:48.310

根据[如何以编程方式设置 layout_gravity？](https://stackoverflow.com/questions/8049620/how-to-set-layout-gravity-programatically)你应该写：

```
LinearLayout cuerpo = (LinearLayout) findViewById(R.id.cuerpo);    
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.FILL_PARENT);

if (align) {
    params.gravity= Gravity.CENTER_VERTICAL;
} else {
    params.gravity= Gravity.NO_GRAVITY;
}
cuerpo.setLayoutParams(params); 
```

# jquery - 如何防止在 Rails 中渲染 HTML 编码数据

> ID：14720451
> 
> 赞同：0
> 
> 时间：2013-02-06T02:08:42.227
> 
> 标签：jquery, ruby-on-rails, ruby, json

在我的控制器中，我希望在 json 响应中返回 HTML，然后使用 .html() 通过 jQuery 将其插入到 div 中。

我的控制器：

```
div_content = view_context.link_to "logout", logout_path, method: :delete + '<div class="
return render :json => {:success => true, :username => current_user.email, :div_content =>  div_content} 
```

javascript：

```
$('#special_div').html(data.div_content) 
```

此内容是 html 编码的，因此 HTML 不会呈现。我知道我可以在 javascript 端使用正则表达式或其他东西转换字符串，但不发送从服务器编码的字符串似乎是有意义的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:16:49.557

我发现更正确的解决方案是渲染一个部分，其中包含所需的所有逻辑和格式。这更有意义，因为在部分中您可以使用模板引擎等。

# php - 在 Joomla 1.5 之外包含 Joomla 组件（Joomla FB Chat）

> ID：14720453
> 
> 赞同：0
> 
> 时间：2013-02-06T02:08:59.100
> 
> 标签：php, joomla, components, joomla1.5

有谁知道如何将 Joomla 组件包括在 Joomla 之外工作？我的本科课程有一个项目来制作一个网站，但我不被允许使用像 joomla 或 wordpress 这样的 CMS。有谁知道如何让这件事发生在 PHP 中？

任何帮助将不胜感激

谢谢，瑞奇L

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:38:25.067

[此处](https://github.com/joomla/joomla-platform)的Joomla 平台与诸如[JomSocial](http://extensions.joomla.org/extensions/clients-a-communities/communities/7608)之类的扩展程序相结合，可能会给您之后的结果。但是你必须添加我怀疑的自己的显示/模型代码。我认为这些天与 CMS 打包在一起

# ios - 如何使用 ios 从 s3 下载一组文件？

> ID：14720460
> 
> 赞同：1
> 
> 时间：2013-02-06T02:09:41.207
> 
> 标签：ios, ios4, amazon-s3, ios-simulator, download

我已经看到很多关于 SO 回答这个问题的问题，但是由于文件没有下载，我无法正确执行。

一些背景是我在 s3 中有一组 10 个文件。我可以通过 S3ListObjectsResult 看到它们。然后我将该结果存储在过滤的 NSMutableArray s3Result 中。这一切都很好。

后来，我真的想下载文件，所以我尝试这样做：

在 .h 文件中：

```
@interface MainViewController : UIViewController <AmazonServiceRequestDelegate>
@property (nonatomic, strong) NSMutableArray *s3Objects;
@property (nonatomic, strong) NSMutableArray *s3Results; 
```

在 .m 文件中：

```
AmazonS3Client *s3 = [[AmazonS3Client alloc] initWithAccessKey:key withSecretKey:secret];
for (NSString *result in s3Results) {
    S3GetObjectRequest *s3Request = [[S3GetObjectRequest alloc] initWithKey:s3Result withBucket:bucket];
    s3Request.delegate = self;
    S3GetObjectResponse *s3Response = [s3 getObject:s3Request];
    [s3Objects addObject:[[NSData alloc] initWithData:s3Response.body]]; 
```

这编译得很好并且运行正常，但是“下载”文件太快而无法实际工作，实际上 self.s3Objects 返回计数为 0。

1.  有没有办法在 S3 方面看到调试？
2.  我在获取文件方面做错了什么？
3.  是否有可能是因为我是在 XCode 模拟器中执行此操作的？

编辑：好的，所以我添加了 AWS 需要的一些方法，即 didCompleteWithResponse、didReceiveData、didFailWithError 和 didFailWithServiceException。

结果是现在正在下载文件（我可以打印出 response.body 并查看数据），但它们没有被添加到 s3Objects：

```
-(void)request:(AmazonServiceRequest *)request didCompleteWithResponse:(AmazonServiceResponse *)response
{
   [self.s3Objects addObject:[[NSData alloc] initWithData:response.body]];
} 
```

即使在此之后，self.s3Objects 的计数也始终返回 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T05:31:35.193

我得到了这个工作。原始问题的答案是实现缺少的 AWS 方法。第二个问题的答案是我错过了初始化 s3Objects 数组。这样做之后，它工作得很好。

# javascript - 一步一步的教程在 javascript

> ID：14720463
> 
> 赞同：-5
> 
> 时间：2013-02-06T02:09:55.540
> 
> 标签：javascript

我正在尝试使用 javascript 和 html 编写我的 helloworld 代码。所以，我想选择一个项目并从那里进行迭代。

可以说，我有一个 xml 文件的路径。1) 按原样显示 xml 文件的内容（即不管标记如何，都将其视为文本文件）

就是这样.. 实际上.. 没有第 2 步 :) 但是，我在 html 方面的背景也非常有限。有人可以帮我什么是helloworld.html（或helloworld.js），以便我可以在浏览器上运行它吗？

我真的很感激

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T02:14:05.600

对于 Javascript 的介绍，你可以做的比[http://eloquentjavascript.net差很多](http://eloquentjavascript.net)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T02:24:34.893

只是用一个有点有用的答案来回答你的问题，我认为大多数开发人员在现实世界中可能会做的就是使用像[JQuery](http://jquery.com)这样的库。

在这种情况下，代码很简单：

您的 HTML：

```
<div id="result"></div> 
```

你的 Javascript：

```
$(function() { $('#result').load('test.xml'); } ); 
```

您需要确保您的测试 xml 文件与您的 javascript 文件在同一个域中提供。

# django - Django 项目基础模板

> ID：14720464
> 
> 赞同：57
> 
> 时间：2013-02-06T02:10:01.480
> 
> 标签：django, templates, project, base

我可以为我的项目创建一个所有应用程序都可以从中提取的基本模板吗？还是我必须为每个应用程序创建一个基本模板？如果我希望它们相同，我会复制它们吗？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-02-06T02:20:25.240

你当然可以。base.html 的快速示例

```
<!DOCTYPE html>
<html>
    <head>
        <title>My Project</title>
    </head>

    <body>
    {% block content %}{% endblock content %}
    </body>
</html> 
```

假设你有一个名为 myapp 的应用程序，它有一个 view.html 页面，

```
{% extends "base.html" %}

{% block content %}
    <h2>Content for My App</h2>
    <p>Stuff etc etc.</p>
{% endblock content %} 
```

花一些时间[阅读文档](https://docs.djangoproject.com/en/3.0/ref/templates/language/#template-inheritance)以获取更多信息

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2020-03-30T13:23:48.823

> 对于 Django 版本 3

这里的一些答案是正确的，但它们没有告诉您将文件放在目录结构中的什么位置。所以我要稍微解释一下答案。

* * *

是的，您可以使用从项目目录`{% extends "base.html" %}`扩展`base.html`文件。
**需要注意的重要一点是放置** `base.html` **文件的位置。**

1.  打开`project_name/project_name/settings.py`并找到`TEMPLATES`数组
    并将其更新`'DIRS' : []`为`'DIRS': [os.path.join(BASE_DIR, 'templates')]`
2.  在根级别创建一个名为`templates`. 此文件夹的位置将是`project_name/templates`
3.  `projects_name/templates`将您想要从所有应用程序访问的所有模板放在此处。
    文件：`project_name/templates/base.html`
4.  从任何特定于应用程序的模板扩展此基本文件，该模板可能位于`project_name/app_name/templates/app_name/template_file.html`使用`{% extends "base.html" %}`.

    ```
    {% extends "base.html" %}

    {% block content %}
        <h2>Content for My App</h2>
        <p>Stuff etc etc.</p>
    {% endblock content %} 
    ```

此外，您还可以通过更新到in来创建`static`与模板目录相同级别的项目范围目录。`STATICFILES_DIRS``STATICFILES_DIRS = [os.path.join(BASE_DIR, "static")]``project_name/project_name/settings.py`

* * *

最终目录结构看起来像 -

```
project_name/
    app_name/
        templates/
            app_name/
                template_file.html

    project_name/
        settings.py

    templates/
        base.html

    static/
        css/
        js/
        img/ 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-03-30T06:34:49.623

> 最后一个答案有问题，这里是正确的；你必须有这样的 Base.html：

```
{% load staticfiles %}

<!DOCTYPE html>
<html>
<head>
    <title>My Project</title>
</head>
<body>
{% block content %}{% endblock %}
</body>
</html> 
```

> 也适用于 index.html

```
{% extends "appname/base.html" %}
{% block content %}
     <h1>test</h1>
{% endblock %} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-06T03:42:04.280

是的，你绝对可以做到这一点。通过在 Django 模板中使用`extends`和`include`模板标签。

我开始学习 Django，最近发现了这一点。如果您有兴趣了解我如何构建 Django 模板以从 a 继承然后常见的东西，例如导航栏和页眉、页脚等，我的代码在[Github 。](https://github.com/creativepsyco/panex-web/tree/master/panex_web/templates)`base.html``include`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-16T15:27:49.163

是的，您可以为您的项目创建一个其他应用程序将扩展的基本模板。检查@Kenny_Shen 的答案。

如果您担心应用程序隔离，只想添加两个注释。

1.  如果您不希望您的应用程序依赖“base.html”命名约定，您可以使用变量注入实际名称，请查看：[如何使用 Django 的模板扩展变量？](https://stackoverflow.com/questions/1331148/how-do-i-use-djangos-template-extends-variable/1331183#1331183)有关详细信息，

2.  您可能希望将应用程序模板块命名为其他名称，而不是“内容”以避免与其他应用程序发生冲突。

# nosql - 在 Cassandra 1.2 中使用 CQL3 创建一个表，其中列名将在运行时创建

> ID：14720472
> 
> 赞同：1
> 
> 时间：2013-02-06T02:10:28.630
> 
> 标签：nosql, cassandra, cql

我想在 Apache Cassandra 1.2 中存储对象的快照

行键是 Object#ID，每个快照都有一个列。

```
--------    latest  --------   v2   -------- v1
id-122      100     --------   50   -------- 66
-------- 
```

所以列名是在运行时动态创建的。

如何使用***CQL3*****在Cassandra 1.2**中创建上一个表？

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T17:12:03.657

您将使用 CQL3 的复合主键功能：

```
CREATE TABLE foo (
  object_id int,
  version int,
  value int,
  PRIMARY KEY (object_id, version)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:12:50.283

在 CQL3 中，表模式是固定的。所以你不能真正获得动态列名。为此，您必须切换到 CQL2。*

# python - How to monitor google app engine from command line?

> ID：14720476
> 
> 赞同：1
> 
> 时间：2013-02-06T02:11:15.577
> 
> 标签：python, google-app-engine

I'm starting to use Google App Engine and being a newcomer to much of the stuff going on here, I broke my webpage (all I see is "server error" in my web browser). I'd like to be able to see a console of some sort which is telling me what's going wrong (python syntax? file not found? something else?). Searching around a bit didn't lead me to a quick solution to this, so I came here. Any advice? Ideally, there would be some sort of tutorial/guide that would show how to do this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:42:24.163

1.  我假设您使用的是 Linux、Ubuntu/Mint 如果不是，那将是一个好的开始
2.  使用 dev_appserver.py 在本地进行尽可能多的调试 - 这将在启动时显示错误（在控制台中）
3.  需要时添加您自己的调试日志
4.  在交互式控制台中运行代码片段 - 这对于测试代码片段非常有用：
    *   如果您在 GAE >= 1.7.6`http://localhost:8000/console`
    *   如果你在 GAE < 1.7.6`http://localhost:8080/_ah/admin/interactive/interactive`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T04:32:08.633

为什么从命令行？您应该在[https://appengine.google.com](https://appengine.google.com)上的 App Engine 控制台中查看日志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T04:35:28.790

[在http://appengine.google.com](http://appengine.google.com)上使用您的帐户登录，然后选择您要监控的特定应用程序。

在左侧面板中，转到 Main --> Logs。这应该为您提供有关正在发生的事情、正在访问的端点、任何异常等的详细信息。这可能是第一步。

如果您想自动化其中的一些，您将需要编写报告系统运行状况的端点，然后可以编写工具来调用这些 URL，解析响应，然后在出现问题时通知人们。但所有这些都是自定义驱动的，并且取决于您的应用程序警报。

# c# - 自从 JQUERY 对话框发布后？

> ID：14720481
> 
> 赞同：0
> 
> 时间：2013-02-06T02:12:06.027
> 
> 标签：c#, jquery, asp.net-mvc, jquery-ui, asp.net-mvc-4

我里面有两个按钮`HtmlForm`，它工作得很好，为了区分我在 actionName 中传递按钮的名称。往下看：

```
 [HttpPost]
    public ActionResult Index(string button, QuizCompletedViewModel q)
    { // QuizCompletedViewModel is the model of my razor view
         ...            
    }

@using (Html.BeginForm("Index", "Quiz", FormMethod.Post, new { id = "form" }))
{
<div>
    <!-- Old code using two buttons for post  -->
    <div class="float-right">
@*        <input name="button" type="submit" value="save" />
        <input name="button" type="submit" value="done" />*@
        <input name="button" type="button" value="done" />
    </div>

    <div id="dialog-form">
        <input name="button" type="button" value="Cancel" />
        <input name="button" type="submit" value="Save" />
        <input name="button" type="submit" value="Done" />
    </div>
</div>

<div id="question-container">
@for (int i = 0; i < Model.Questions.Count; i++) {
    ...
}
</div>
} 
```

然后我需要更改当前视图的两个按钮，并显示带有这两个按钮的弹出窗口，如上所示（`id="dialog-form"`）。到目前为止，当用户按下按钮并像旧代码一样执行 POST 时，使用 JQuery 对我来说有点困难。

你能帮我一把吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T02:54:53.690

我认为这可能对您有所帮助，您必须根据需要对其进行调整，Jquery Dialog 在我的代码示例中显示一个继续按钮，并且您将一个函数绑定到它，您可以将 Asp.net Webforms __doPostBack 替换为将导致您的 MVC 页面上的回发。

```
 $("#dialog").dialog({
                        autoOpen: false,
                        height: 380,
                        width: 650,
                        modal: true,
                        close: function () {
                            $('#btnCreateAccount').button('refresh');
                        },
                        buttons: {
                            'Continue': function () {
                                $(this).dialog('close');
                                __doPostBack($("#<%=btnCreateAccount.ClientID %>").attr("name"), '');
                            }
                        }
                    }); 
```

# c# - Object.Equals：默认情况下一切都是平等的

> ID：14720483
> 
> 赞同：7
> 
> 时间：2013-02-06T02:12:15.737
> 
> 标签：c#, equals, equality

在通过 C# 第 4 版（Microsoft Press）阅读 Jeffrey Richter 的[CLR](https://rads.stackoverflow.com/amzn/click/com/0735667454)时，作者曾指出，在`Object.Equals`当前检查身份相等性时，Microsoft[应该已经实现了这样的方法](http://books.google.nl/books?id=QMdCf_mm55cC&lpg=PP1&hl=nl&pg=PT292#v=onepage&q&f=false)：

```
public class Object {
    public virtual Boolean Equals(Object obj) {
        // The given object to compare to can't be null
        if (obj == null) return false;

        // If objects are different types, they can't be equal.
        if (this.GetType() != obj.GetType()) return false;

        // If objects are same type, return true if all of their fields match
        // Because System.Object defines no fields, the fields match
        return true;
    }
} 
```

这让我觉得很奇怪：默认情况下*，相同类型的每个非空对象都是相等的？*因此，除非被覆盖：一个类型的*所有*实例都是相等的（例如，所有锁定对象都相等），并返回相同的哈希码。并假设`==`on`Object`仍然检查引用相等，这意味着`(a == b) != a.Equals(b)`这也很奇怪。

我认为，如果事物完全相同（身份），则事物平等的想法比仅使一切都平等（除非被覆盖）更好的想法。但这是微软出版的著名书籍的第 4 版，所以这个想法一定有一些可取之处。我阅读了其余的文字，但不禁想知道：*作者为什么会提出这个建议？我在这里想念什么？与当前的 Object.Equals 实现相比，Richter 的实现的最大优势是什么？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T02:35:03.567

当前默认值`Equals()`执行所谓的浅比较（或引用比较），如果引用不同，则不会进一步检查。

*我认为这对于基本实现*是完全可以接受的。我当然不会认为它是错误的或不完整的。

您引用的Richter 示例¹*对于基本 System.Object*也是完全合法的。他的实现的问题在于它可以说应该被声明为抽象²`Equals()` -如果你不覆盖它，你将使用他的方法最终得到一个不可靠的派生对象（因为`Equals()`应该进行深度比较）。必须在所有派生对象上重写此方法将需要大量工作，因此 Microsoft 方法**作为默认的**. 所以从本质上讲你是对的：Richter 的例子很奇怪——最好默认不等于而不是反过来（`true`如果人们忘记覆盖它，默认会导致一些相当有趣的行为）。

（只是为了方便参考，这里是书中发布的默认实现）

![在此处输入图像描述](../Images/d9a72a0bed9c1cb48b618539439d282a.png)

^(1：里希特是个聪明人，他知道自己的事，我一般不会反对他说的任何话。您必须了解，MS 工程师必须对很多事情进行长时间而艰苦的思考，因为他们知道他们没有能够将其弄错然后稍后再修复的灵活性。无论他们多么正确，人们总是会在以后再次猜测他们，并提供不同的意见。这并不意味着原件是错误的或替代品是错误的——它只是意味着有替代品。)

^(2：这当然意味着没有基础实现，这很好，因为它本来就不可靠。)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T02:36:06.573

Jeffery Richter 正在谈论*价值*平等而不是*身份*平等。

你具体问：

> 所以除非被覆盖：一个类型的所有实例都是平等的？

答案是**Yes** , ***But...*** 如， Yes, *But*它（几乎）总是应该被覆盖。

因此，对于大多数类，应该重写它来进行逐个属性的比较以确定相等性。对于其他一些真正基于身份的类（如锁），应该重写它以使用与今天相同的技术。

但关键是它必须在几乎所有情况下都被覆盖，仅此一项就足够困难、笨拙和容易出错，这可能是微软没有使用这种方法的原因。

* * *

价值平等相对于身份平等的优势是什么？如果两个不同的对象具有相同的值/内容，那么它们可以被认为是“相等的”，以便在字典对象的键等情况下进行比较。

或者考虑 .Net 中的字符串问题，它们实际上是对象，但在更高级别（尤其是在 VB.net 中）被视为非常相似的值。当您想要比较两个字符串是否相等时，这会出现一个问题，因为 99% 的时间您真的不关心它们是否是不同的对象*实例*，您只关心它们是否包含相同的文本。因此，.Net 必须确保字符串比较实际上是这样工作的，即使它们确实是对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T20:34:02.357

如果一个人被要求列出所有可识别的任意类型的对象，并且没有给出任何关于对象是什么或它们将用于什么的指示，那么测试两个引用是否应该是唯一普遍适用的方法被认为指向可识别的不同对象的是`Object.Equals(Object)`。如果更改当前指向的一个或多个引用以使它们改为指向可能会改变程序行为`X`，则两个引用`Y`应该被认为是可识别的。`X``Y`

例如，如果两者的两个实例`string`都包含*War and Peace*的完整文本，标点符号和格式相同，则可能会将对第一个的部分或全部引用替换为对第二个的引用，反之亦然，对程序的影响很小或没有除了指向相同实例的两个引用之间的比较可能会发现比指向包含相同字符的不同字符串的两个引用更快地保存相同文本这一事实之外的执行。

在大多数情况下，如果它们保存的数据相同，则应将保存不可变数据的对象视为相同。存在用于保存可变数据或用作身份令牌的对象通常应被视为彼此不同。鉴于可以定义一个`EqualityComparer`将视为不完全等价的等价对象的自定义（例如不区分大小写的字符串比较器），并且鉴于需要一些比严格等价更广泛的等价定义的代码通常应该知道它的类型正在使用以及什么等价定义是合适的，通常最好将`Object.Equals`报告对象设置为不同的，除非它们被设计为可替代的（例如，字符串）。

用现实世界的类比，假设给一个人两张纸，每张纸上都写着一个车辆识别号，并被问到第一张纸识别的汽车是否与第二张纸识别的汽车相同. 如果两张纸条的 VIN 相同，那么很明显，第一张识别的汽车与第二张识别的汽车相同。但是，如果它们具有不同的 VIN，排除了汽车具有多个 VIN 的任何奇怪可能性，那么它们会识别出不同的汽车。即使汽车具有相同的品牌和型号、选项包、油漆方案等，它们仍然是不同的汽车。购买了一个的人将无权任意开始使用另一个。有时了解两辆车目前是否具有相同的选项包等可能很有用，但如果那样的话'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T02:45:32.200

猜想：目前的行为`Object.Equals`并不是大多数人认为的“平等”。

这种方法存在的主要（唯一？）原因是允许通过伪装成“==”实现来搜索集合中的项目。因此，在大多数实际情况下，此实现的行为出乎意料（除了您想要查找特定实例是否已经在集合中的情况）并且您强制为您提供自定义比较函数......

由于技术原因，它可能是 Object 的方法。`Equal`即对于数组/字典，假设所有对象都具有/`GetHash`而不是检查对象上的某些内容以启用“查找”功能可能会更快。

可以说它根本不应该在 Object 上，而只需要可以存储在集合中的类来实现某种形式的`IComparable`接口。

# node.js - mongoose/mongodb 自定义排序

> ID：14720484
> 
> 赞同：1
> 
> 时间：2013-02-06T02:12:33.733
> 
> 标签：node.js, mongodb, mongoose

我在 MongoDB 中有一个字符串类型的字段。它将包含一些字母和数字的组合，例如“10”、“101”、“11”、“112”、“x115”、“abc.5”。现在，如果我告诉 MongoDB 对这些进行排序，它将按字母顺序进行排序，如下所示：

*   10
*   101
*   11
*   112
*   abc.5
*   x115

它在“11”之前订购“101”，我如何更改排序以便正确排序数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T02:17:01.937

**[`db.eval`](http://docs.mongodb.org/manual/reference/method/db.eval/)**如果您决定在数据库端执行此操作，您可能想要使用。

[从另一个问题中提取的答案：](https://stackoverflow.com/questions/3212919/mongo-complex-sorting)

> 我不认为这是直接可能的。[排序文档](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%7B%7Bsort%28%29%7D%7D) 当然没有提到提供自定义比较功能的任何方法。
> 
> 您可能最好在客户端进行排序，但如果您真的决定在服务器上进行排序，您可能可以 `db.eval()`用来安排在服务器上运行排序（如果您的客户端支持它）。
> 
> 服务器端排序：
> 
> ```
> db.eval(function() { 
>   return db.scratch.find().toArray().sort(function(doc1, doc2) { 
>     return doc1.a - doc2.a 
>   }) 
> }); 
> ```
> 
> 与等效的客户端排序相比：
> 
> ```
> db.scratch.find().toArray().sort(function(doc1, doc2) { 
>   return doc1.a - doc2.b 
> }); 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-16T14:04:53.873

您可以将排序规则与 numericOrdering 参数一起使用。例子：

`db.collectionName.find().sort({fieldToSortOnName: -1}).collation({locale: "en_US", numericOrdering: true})`

这里 locale: 'en_us' 用于进行不区分大小写的搜索或排序。

# android - Android: Async Thread Issue

> ID：14720485
> 
> 赞同：0
> 
> 时间：2013-02-06T02:12:47.070
> 
> 标签：android, android-asynctask, android-activity

I have an app that is loading data from text files and storing the data from each file into a separate `ArrayList`. I was told to load the data on an async thread even though my app does not crash loading it all from the onCreate method (it just takes approx 12 seconds to load all of the data from the text files into the ArrayLists).

I have attempted to set up an async thread, but I have run into an issue. I am brand new to async threads, so I do not know/yet fully understand all of the details (I am trying to piece info together from different sources). Here is the relevent code:

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_name);

    new loadData().execute();

    arrayListElement = ArrayList1.get(0);

}

private class loadData extends AsyncTask<Void, Void, Void> {

    ProgressDialog dialog;
    protected void onPreExecute() {
        dialog = new ProgressDialog(ClassName.this);
        dialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        dialog.show();
    }

    @Override
    protected Void doInBackground(Void... arg0) {
    // TODO Auto-generated method stub
        populateArrayLists();
        return null;
    }

    /*protected void onProgressUpdate() {

    }

    protected void onPostExecute() {

    }*/

} 
```

I am getting an IndexOutOfBoundsException (invalid index 0, size is 0) at the last statement in the onCreate method.

All I want to do is load the data on a separate thread because even though my app does not crash, I was told I should do it. The UI thread should handle all of the rest. The app was working fine until I added the async thread code.

How my files are read can be seen here: [Android: Asynch Thread Needed?](https://stackoverflow.com/questions/14719157/android-asynch-thread-needed)

What am I doing wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T02:21:45.733

AsyncTask 尚未完成运行，这就是为什么`arrayListElement = ArrayList1.get(0);`有一个`IndexOutOfBoundsException`.

尝试这个

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_name);

    new loadData().execute();
}

private class loadData extends AsyncTask<Void, Void, Void> {

    ProgressDialog dialog;
    protected void onPreExecute() {
        dialog = new ProgressDialog(ClassName.this);
        dialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        dialog.show();
    }

    @Override
    protected Void doInBackground(Void... arg0) {
    // TODO Auto-generated method stub
        populateArrayLists();
        return null;
    }

    protected void onPostExecute(Void result) {
        arrayListElement = ArrayList1.get(0);
        dialog.dismiss();
        super.onPostExecute(result);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T02:29:26.350

您从 doInBackground 返回 null，所以这一切当然都失败了。使用 AsyncTask 来完成它的任务。要使其正常工作，您需要使用适当的类型参数正确定义您的 AsyncTask。

与其使 populateArrayLists 具有更新其他字段的副作用，不如使用如下方法：

```
void List<Foo> getListOfFoo() {
  ArrayList<Foo> listOfFoos = getTheListSomehow();
  return listOfFoos;
} 
```

例如：

```
 public class MyActivity extends Activity {

        public void doSomething(List<String> stringList) {
           //do something here

        }

        class MyAsyncTask extends AsyncTask<Void, Void, List<String>> {

            @Override
            protected List<String> doInBackground(Void... params) {
                ArrayList<String> listOfStrings = getListOfStrings();
                return listOfStrings;
            }

            @Override
            protected void onPostExecute(List<String> strings) {
                super.onPostExecute(strings);
                doSomething(strings);
            }

            private List<String> getListOfStrings() {
ArrayList<String> stringList = new ArrayList<String>();
                //This is where you'd actually perform your expensive operation
  BufferedReader br = null;
    try {
        br = new BufferedReader(new InputStreamReader(getAssets().open(
                "text1.txt")));
        String text;
        while ((word = br.readLine()) != null) {
            stringList.add(text);
        }                           
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            br.close(); // stop reading
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }
                return stringList;
            }
        }
    } 
```

# android - ANDROID: Is it possible to put more than one location upon loading google maps application

> ID：14720488
> 
> 赞同：-1
> 
> 时间：2013-02-06T02:13:03.397
> 
> 标签：android, google-maps

I'm using this code:

```
Intent intent = new Intent(
    android.content.Intent.ACTION_VIEW,
    Uri.parse("geo:0,0?q=14.56643,121.036138 (sample)"));
startActivity(intent); 
```

Is it possible to load 2 locations or more in the `Uri.parse()`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T03:36:36.120

不，这是不可能的。此外，`geo:`方案的规范正在制定中。

您可以在此处找到带有示例的简要说明：http: [//developer.android.com/guide/appendix/g-app-intents.html](http://developer.android.com/guide/appendix/g-app-intents.html)

规范草案在这里：[https](https://datatracker.ietf.org/doc/html/draft-mayrhofer-geo-uri-00) ://datatracker.ietf.org/doc/html/draft-mayrhofer-geo-uri-00 ，它目前不允许多个位置。

# design-patterns - What is the correct name for interface with multiple callbacks?

> ID：14720489
> 
> 赞同：1
> 
> 时间：2013-02-06T02:13:08.123
> 
> 标签：design-patterns, naming-conventions, naming

Given the nature of the following, what is the best name for the interface? and if applicable which design pattern is this?

```
public interface ITestEvent??? {   // Handler / Listener / Observer / Emitter / ???

    void OnBeginTesting(ITestContext context);
    void OnException(Exception ex);
    void OnEndTesting();

}

public class MyTestEvent??? : ITestEvent { ... }

Tester.Add???(new MyTestEvent???()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T02:40:51.963

最初我觉得它是`Command`，你正在封装一个测试请求，并使用 Tester.Add() 调用/排队它。

但是经过您的反馈，我意识到您只是传递行为；所以我同意@kabram 的观点，这是**`Delegate`**.

# java - Cookies,Session in Java - Web App

> ID：14720490
> 
> 赞同：0
> 
> 时间：2013-02-06T02:13:08.560
> 
> 标签：java, session, authentication, cookies

I have a little bit of a problem understanding cookies,session and authentication in a java web app.

Basically I have an authentication class, to an object of which my servlet gives the request object, and it is responsible to return true or false depending on whether the user has logged in or not.

So, every time a user logs in, I will create a big random string, and i will give it as a value to the response.cookie and also to the session object as an attribute, is that right? An when that user makes an other request, i will compare the cookie he just sent me to the cookie of his session to see if it is the same, and then he will be authenticated, right?

Maybe I say wrong things here, that's why I want someone to explain me if the authentication of a user is the above process or where i am mistaken.

thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:37:40.120

要么有一个安全框架（如 JAAS）来处理它，要么将数据存储在会话中。将其存储在 cookie 中非常不安全，并且容易受到各种攻击。看到这个[类似的问题](https://stackoverflow.com/questions/9678959/how-to-secure-my-java-web-application)

Cookies 存储在客户端，会话在服务器中进行管理，因此更加安全。使用 JAAS 或其他框架将为您提供更复杂的身份验证/授权选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T02:18:14.173

一种简单的方法是在用户通过身份验证时在会话（或用户对象本身）中设置一个标志。您不必对 cookie 做任何事情 - 让容器管理使用 cookie 维护您的会话。你只关心会话本身。

为了提高效率，您对代码进行了优化，以便在用户登录之前不创建会话。但是您可能无法存储尚未登录的用户的其他信息（例如购物车内容） . 小小的内存节省不值得额外的麻烦。

我建议使用一个框架——JAAS 太抽象/复杂了。使用像[Shiro这样的东西](http://shiro.apache.org/)

# r - Replace a UTF-8 character in R

> ID：14720493
> 
> 赞同：2
> 
> 时间：2013-02-06T02:13:23.070
> 
> 标签：r, utf-8

I have an R "plugin" that reads a bunch of lines from stdin, parses it and evaluates it.

```
...
code <- readLines(f, warn=F)   ## that's where the lines come from...
result <- eval(parse(text=code))
... 
```

Now, sometimes the system that provides the lines of code kindly inserts a UTF-8 non-break space (`U+00A0` = `\xc2\xa0`) here and there in the code. The `parse()` chokes on such characters. Example:

```
s <- "1 +\xc2\xa03"
s
[1] "1 + 3"   ## looks fine doesn't it? In fact, the Unicode "NON-BREAK SPACE" is there

eval(parse(text=s))
Error in parse(text = s) : <text>:1:4: unexpected input
1: 1 +?
      ^

eval(parse(text=gsub("\xc2\xa0"," ",s)))
[1] 4 
```

I would like to replace that character with a regular space, and can do so (but at my own peril, I guess) as above with this:

```
code <- gsub('\xc2\xa0',' ',code) 
```

However, this is not clean as the byte sequence `'\xc2\a0'` could conceivably start matching in the middle of another 2-byte char whose 2nd byte is `0xc2`.

Perhaps a bit better, we can say:

```
code <- gsub(intToUtf8(0x00a0L),' ',code) 
```

But this would not generalize to a UTF-8 string.

Surely there is a better, more expressive way to enter a string containing some UTF-8 characters? In general, what's the right way to express a UTF-8 string (here, the pattern argument of `sub()`)?

* * *

**Edit**: to be clear, I am interested in entering UTF-8 chars in a String by specifying their hexadecimal value. Consider the following example (note that `"é"` is Unicode `U+00E9` and can be expressed in UTF-8 as `0xc3a9`):

```
s <- "Cet été."
gsub("té","__",s)
# --> "Cet é__."
# works, but I like to keep my code itself free of UTF-8 literals,
# plus, for the initial question, I really don't want to enter an actual
# UTF-8 "NON BREAKABLE SPACE" in my code as it would be undistinguishable
# from a regular space.

gsub("t\xc3\xa9","__",s)  ## works, but I question how standard and portable
# --> "Cet é__."

gsub("t\\xc3\\xa9","__",s)  ## doesn't work
# --> "Cet été."

gsub("t\x{c3a9}","__",s)  ## would work in Perl, doesn't seem to work in R
# Error: '\x' used without hex digits in character string starting "s\x" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T02:39:34.917

（之前的东西被删了。）

编辑2：

```
> s <- '\U00A0'
> s
[1] " "
> code <- gsub(s, '__','\xc2\xa0' )
> code
[1] "__" 
```

# parallel-processing - possible factors in slowing down a parallel program

> ID：14720496
> 
> 赞同：0
> 
> 时间：2013-02-06T02:13:53.527
> 
> 标签：parallel-processing, cpu

Consider a program that can be run in parallel and is moved from a single core to a quad core. Will the speed up be 4-fold?

Say you do not see the expected speedup in the program. What can be the possible reasons? Cache is one reason if each core does not have a separate cache then we have a problem. What could be the other issues?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:35:41.687

您看不到性能提升的一个可能原因是，如果您分配给四个处理器的工作真的很小。如果您有 4 个简单的加法运算要发送到不同的处理器，则与仅在一个处理器上执行 4 个运算相比，执行委派工作可能需要更多时间。

# sql - SQL write NOT IN as FULL JOIN

> ID：14720504
> 
> 赞同：1
> 
> 时间：2013-02-06T02:14:17.927
> 
> 标签：sql, join

Is it possible to write the following SQL statement as a FULL JOIN instead of using NOT IN?

```
select * from [user] u 
   AND u.user_id NOT IN (SELECT user_id FROM job) 
```

I'd like to do something like this:

```
SELECT u.* FROM [user] u
FULL JOIN job uj ON u.user_id = uj.user_id
WHERE uj.user_id IS NULL 
```

I'm looking to get all the users that do not have a record in the job table using a FULL JOIN.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T02:17:35.537

您不需要`FULL OUTER JOIN`. 你需要一个`LEFT JOIN`：

```
select * 
from [user] u 
left join job uj
  on u.user_id = uj.user_id
where uj.user_id IS NULL 
```

无论表中是否存在匹配行，A`LEFT JOIN`都会返回所有行。`user``job`

然后，当您添加`where j.user_id is null`过滤器时，它将仅返回`user`表中的所有记录。

这是一个很好[的连接可视化解释，](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)在尝试找出正确的连接语法时会派上用场。

请参阅带有两个版本的查询 (和) 的[SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/e832d/1)，这表明它们都返回相同的数据。`NOT IN``LEFT JOIN`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T02:17:42.000

```
SELECT u.*
FROM [user] u
LEFT JOIN job j on (u.user_id = j.user_id)
WHERE j.user_id is NULL 
```

为什么需要使用 FULL JOIN？以上为您提供了您正在寻找的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T02:17:53.117

你想要一个`left outer join`. A`full outer join`有点多余，因为大概`uj.user_id`不会是 NULL。

这两个查询是等效的，尽管它们可能具有不同的执行计划，具体取决于数据库。

# hibernate - 休眠标准分组最大值

> ID：14720505
> 
> 赞同：0
> 
> 时间：2013-02-06T02:14:31.623
> 
> 标签：hibernate, criteria

我正在尝试实现某个日期的组明智最大值，但即使日志显示正确的查询，我也会遇到异常：

```
java.lang.ClassCastException : java.lang.String cannot be cast to java.util.Date 
```

这是生成强制转换异常的代码的最小部分：

```
DetachedCriteria maxLogin= DetachedCriteria.forClass(UsersSessions.class,"du");
maxLogin.setProjection(Projections.projectionList()
    .add(Projections.max("du.login").as("login")));

Criteria crit = session.createCriteria(UsersSessions.class,"u");
crit.add(Subqueries.eq("u.login", maxLogin)); 
```

这是我试图用我的完整代码做的 sql 等价物：

```
SELECT *
FROM   UsersSessions u
WHERE  u.login=(SELECT MAX(du.login)
              FROM UsersSessions ud
              WHERE ud.fkUser = u.fkUser); 
```

这会更好：

```
SELECT *
FROM (SELECT *
FROM UsersSessions 
[WHERE conditions]
ORDER BY login  DESC) u
GROUP BY u.fkUser 
```

但是我知道如何在这样的`from`部分中进行子查询......

编辑：好的，刚刚尝试转换`maxLogin`为 Date 但我遇到了同样的异常。

编辑：我刚试过这个

```
Criteria crit = session.createCriteria(UsersSessions.class,"u");
crit.setProjection(Projections.projectionList()
        .add(Projections.max("u.login").as("login")));
Timestamp max=(Timestamp)crit.uniqueResult(); 
```

它奏效了。

让我看的地方更少了……此刻塞罗。关于导致演员阵容异常的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:25:19.003

你确定`crit.add(Subqueries.eq("u.login", maxLogin));`maxLogin 是日期类型吗？如果没有，请尝试将其转换为 java.lang.Date 类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T18:13:56.650

搞定了...

显然，该`eq`函数将字符串作为比较值。

```
Subqueries.eq("u.login", maxLogin); 
```

这是将属性与子查询进行比较的方法：

```
Subqueries.propertiesEq(new String[]{"u.login"},maxValidacion); 
```

# c# - Invalid column name 'Length' edited MVC 4 Membership

> ID：14720506
> 
> 赞同：2
> 
> 时间：2013-02-06T02:14:40.783
> 
> 标签：c#, linq, asp.net-mvc-4, ef-code-first

I am trying to add to the MVC 4 out of the box membership.

```
public ActionResult Register(RegisterModel model)
{
    if (ModelState.IsValid)
    {
        // Attempt to register the user
        try
        {
            WebSecurity.CreateUserAndAccount(model.UserName, model.Password, model.Mobile);
            //I added model.Mobile
            WebSecurity.Login(model.UserName, model.Password);
            return RedirectToAction("Index", "Home");
        }
        catch (MembershipCreateUserException e)
        {
            ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
        }
    }
} 
```

I changed the model

```
public class RegisterModel
{
    // Username and password methods

    public string Mobile { get; set; }
} 
```

I also added it to the `UserProfile` Model. I am getting a SqlException and i just don't see the connection. It seems like such a simple error but. The DB is set to `Nvarchar(MAX)` which is to try to avoid this error.

```
Invalid column name 'Length' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T20:56:31.507

它实际上是抛出错误，因为它需要一个附加属性的字典 - 尝试：

```
WebSecurity.CreateUserAndAccount(model.UserName, model.Password, new{model.Mobile}, false) 
```

这假定您在 UserProfileTable 中有一个名为 Mobile 的列。如果您想指定不同的列名：

```
WebSecurity.CreateUserAndAccount(model.UserName, model.Password, new{YourColumnName = model.Mobile}, false) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T07:00:02.207

在您的评论中，您似乎使用

```
WebSecurity.CreateUserAndAccount(model.UserName, model.Password, model.Mobile); 
```

如果您查看[msdn](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity.createuserandaccount%28v=vs.111%29.aspx)，

```
public static string CreateUserAndAccount(
    string userName,
    string password,
    Object propertyValues,
    bool requireConfirmationToken
) 
```

其中 propertyValues 是

> propertyValues 类型：System.Object （可选）包含其他用户属性的字典。默认值为空。

因此，随着您对该方法的使用，model.Mobile 作为`propertyValues`参数发送，当然不是！

`CreateUserAndAccount`因此，您应该在可以使用*移动*参数的地方创建自己的重载（或新方法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T02:36:19.873

我不认为这就是它所指的......它似乎正在查询一个名为“LENGTH”的列名......我怀疑这是一个保留关键字，用于确定字符串的长度并导致你的错误。你有这样的列名引用吗？

# html - 在网站上寻找有关响应式设计的提示

> ID：14720513
> 
> 赞同：1
> 
> 时间：2013-02-06T02:16:02.463
> 
> 标签：html, css, responsive-design

想知道是否有人能够帮助我找到一种更好的方法，让我的网站对积极改变浏览器大小的人更加敏感。这样做的原因是，它将通过游戏浏览器中的 EVE 在线访问，并且人们多次调整大小以在他们的屏幕上看到其他 UI 元素。

这是我想要工作的代码：http: [//jsfiddle.net/yKVq4/42/](http://jsfiddle.net/yKVq4/42/)

这是我的解决方案：

CSS：

```
* {
margin:0;
padding:0;
-moz-box-sizing:border-box;
}
body {
background:#000000 url(http://www.vutallindustries.com/websitefiles/welcomepage.jpg) no-repeat fixed;
/*Combined all the values into one*/
color:#000000;
margin: 0px;
padding: 0px;
}
/* displays when browser to small */
.centerbox {
position:fixed;
top: 0px;
border: 1px solid black;
opacity:0.6;
filter:alpha(opacity=60);
background-color:#FFFFFF;
z-index:-1;
height:100%;
text-align: center;
font-size: 250%;
}
/* Left and right side text boxes*/
.menu {
margin-top:-4px;
min-width:100%;
min-height: 100%;
background-color:#FFFFFF;
border: 1px solid black;
text-align:left;
opacity:0.6;
filter:alpha(opacity=60);
}
/* Left side link styles */
.menu li a {
text-decoration:none;
color:red;
display:block;
}
.menu li a:hover {
text-decoration:underline;
}
.menu li {
padding:2px 0;
text-align:center;
}
/* Alligns to the right */
.right {
width:128px;
float:right;
}
/* Official EVE news via RSS */
.news {
margin-top:-4px;
background-color:#FFFFFF;
border: 1px solid black;
text-align:left;
opacity:0.6;
filter:alpha(opacity=60);
}
/* Middle text box styling */
.content {
text-align: center;
}
/* alligns center box to center */
.centerbox-outer {
position:absolute;
border: 1px solid black;
opacity:0.6;
filter:alpha(opacity=60);
background-color:#FFFFFF;
}
/* Image Boxes for Gallery */
div.img {
margin:2px;
border:1px solid #0000ff;
height:auto;
width:auto;
float:left;
text-align:center;
display:inline;
}
div.desc {
text-align:center;
font-weight:normal;
}
@media (min-width:600px) {
.centerbox-outer {
    top:129px;
    right:136px;
    left:136px;
}
}
@media (min-width:600px) {
.menu-contain {
    float:left;
    width:128px;
}
.right {
    width:128px;
    float:right:
}
}
@media (max-width:599px) {
.menu-contain, .right, .centerbox-outer {
    display:none;
}
}
@media (min-width:600px) {
.centerbox {
    display:none;
}
} 
```

就像小提琴一样，设计还不错，但是，因为 CSS 也会影响图片库，可以在这里看到：www.vutallindustries.com/penultimatum/gallery.html，调整大小时，图片会重叠其余的大小，如果在中心框中写了太多，文本也会如此。我当前的解决方案如上面的代码所示，当调整大小低于 600 像素宽时，它会隐藏所有内容并显示一条要求调整大小的消息。我想摆脱它。

EditL，这里是画廊的小提琴与 CSS 中的画廊代码：http: [//jsfiddle.net/yKVq4/117/](http://jsfiddle.net/yKVq4/117/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:52:05.023

终于想出了一个解决办法！:) 我不得不继续使用`position:absolute;`，`.right`因为它一直向下推。

[http://jsfiddle.net/yKVq4/121/](http://jsfiddle.net/yKVq4/121/)

如果您有任何想要更改的内容，请发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T03:54:51.477

我建议使用一个开箱即用的框架，该框架已经解决了您可以（和不能）想到的所有场景。

看看[Bootstrap](http://twitter.github.com/bootstrap/)，有一个很棒的社区在不断更新和改进它。

它可能不像自己滚动那么有趣，但它肯定会更丰富。

祝你好运。

附言。如果你愿意，你可以只使用它的一部分，比如只使用脚手架，而不要使用菜单组件和其他东西。混合和最大风格。

如果你想要更通用的东西，甚至是[Skeleton 。](http://www.getskeleton.com/)

# fancybox - FancyBox iFrame 在返回历史时关闭

> ID：14720514
> 
> 赞同：2
> 
> 时间：2013-02-06T02:16:23.273
> 
> 标签：fancybox, fancybox-2

我正在尝试在 iframe 模式下使用 FancyBox 2 来实现模态编辑对话框。关闭带有编辑表单的 iframe 后，我希望能够运行特定代码以在父窗口中执行操作，例如重新加载内容。由于服务器端验证，iframe 中的表单使用常规表单帖子，而不是 ajax，并且可以进行多次提交。

为了在对话框关闭后在主页中执行我的代码，我填充了 FancyBox afterClose 属性。

**问题：** 如果我在成功提交/验证表单数据后简单地关闭 iframe，则 iframe 会关闭，并且 afterClose 代码会按预期正确执行。问题是到那时窗口历史记录会被其他条目破坏。这意味着，一旦 iframe 关闭，我需要多次单击后退按钮（等于 iframe 中提交的数量）才能返回到托管 iframe 之前的页面。

为了解决这个问题，我尝试跟踪 iframe 中的历史深度并执行 window.history.go(-depth)，然后再执行 parent.$.fancybox.close() 以关闭 iframe。这会处理历史问题，但会阻止执行 afterClose 代码。一些实验表明，在历史上返回原始 iframe 页面会以阻止 afterClose 运行的方式杀死 FancyBox（甚至不执行 parent.$.fancybox.close()）。

**问题：** 有人知道为什么 FancyBox iframe 在按下后退按钮的次数足够多以到达 iframe 中加载的原始页面时会被破坏吗？这可以防止吗？当 FancyBox iFrame 关闭时，是否有不同的方法可以倒回 iFrame 历史记录？

**示例：****[此页面](http://www.foxweb.com/temp/FancyBoxMain.html)** 说明了问题。相同的来源如下：

FancyBoxMain.html:

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Main</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
    <link rel="stylesheet" href="http://fancyapps.com/fancybox/source/jquery.fancybox.css" type="text/css" media="screen" />
    <script type="text/javascript" src="http://fancyapps.com/fancybox/source/jquery.fancybox.pack.js"></script>
    <script type="text/javascript">
        function popup() {
            var options = {
                type: 'iframe',
                href: 'FancyBoxPopup.html',
                height: 250,
                modal: true,
                autoSize: false,
                afterClose: function () { alert('Executing afterClose.'); }
            };
            $.fancybox.open(options);
        };
    </script>
</head>
<body>
    <input type="button" onclick="popup();" value="Popup"/>
</body>
</html> 
```

FancyBoxPopup.html：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Popup</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script type="text/javascript">
        var url;
        var depth;

        $(function() {
            var pos = window.location.href.indexOf('?');
            depth = pos == -1 ? 0 : parseInt(window.location.href.substr(pos + 1));
            $('#depth').text(depth);
            url = pos == -1 ? window.location.href : window.location.href.substr(0, pos);
            if (depth > 0) {
                $('#actions').show();
            }
        });
    </script>
</head>
    <body style="padding: 0; margin: 0;">
        <div>
            Depth:
            <span id="depth"></span>
            <input type="button" value="Add" onclick="window.location.href = '?' + (depth + 1).toString();" />
        </div>
        <div id="actions" style=" display: none;padding: 0; margin: 0;">
            <input type="button" value="Close FancyBox" onclick="parent.$.fancybox.close();"/>
            <input type="button" value="Rewind History, before closing FancyBox" onclick="history.go(-depth); parent.$.fancybox.close();"/>
            <input type="button" value="Back" onclick="window.history.back();" />
            <div>Bad behavior:
                <ul>
                    <li>Simply closing FancyBox allows the afterClose handler to run. The problem is that when depth > 0, the iFrame's history is kept, breaking correct functionality of the browser's back button.</li>
                    <li>Rewinding history back to 0 depth kills FancyBox, preventing the afterClose handler from firing. You can see this step-by-step by clicking the back button.</li>
                </ul>
            </div>
        </div>
    </body>
</html> 
```

# ios - empty UITableView while parsing JSON with AFNetworking

> ID：14720515
> 
> 赞同：2
> 
> 时间：2013-02-06T02:16:47.593
> 
> 标签：ios, json, parsing, uitableview, afnetworking

i am using AFNetworking to parse youtube JSON data on a UITableView.

For some reason i am getting a empty UITable. I am not sure what i am doing wrong.

Please have a look at my code:

Here is the project on [Google Drive](http://docs.google.com/folder/d/0B1EPIKZI6a5sSzVWdXh6VU1POWs/edit?usp=sharing)

```
#import "KKViewController.h"

#import "AFNetworking.h"

#import "AFJSONRequestOperation.h"

@interface KKViewController ()

@end

@implementation KKViewController

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *urlAsString = @"http://gdata.youtube.com/feeds/api/playlists/PL0l3xlkh7UnvLdr0Zz3XZZuP2tENy_qaP?v=2&alt=jsonc&max-results=50";

    NSURL *url = [NSURL URLWithString:urlAsString];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];

   AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

       self.videoMetaData = [JSON valueForKeyPath:@"data.items.video"];

      // NSLog(@" video Meta Data %@", self.videoMetaData);

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
        NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
    }];

    [operation start];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

  return [self.videoMetaData count];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *cellID = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellID];

    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellID];
    }

    NSDictionary *titles = [self.videoMetaData objectAtIndex:indexPath.row];

    NSLog(@"%@",titles);

    cell.textLabel.text = [titles objectForKey:@"title"];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T02:23:44.187

Have you tried to reload the table view after the data loads?

```
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    NSLog(@"JSON = %@", JSON);
    self.videoMetaData = [JSON valueForKeyPath:@"data.items.video"];
    NSLog(@" video Meta Data %@", self.videoMetaData);
    [self.tableView reloadData]; // Now I need to reload the table view data.
} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
    NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
}]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T02:31:34.523

You need to [self.tableview reloadData]; this will solve the problem..

# css - CSS "::" 含义

> ID：14720519
> 
> 赞同：5
> 
> 时间：2013-02-06T02:17:06.110
> 
> 标签：css, css-selectors

我经常看到这种用法。特别是伪类。CSS中的“::”是什么意思？

```
.a_demo_three::before { 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T02:18:22.833

来自[MDN](https://developer.mozilla.org/en-US/docs/CSS/Pseudo-elements)：

> 有时您会看到双冒号 (::) 而不是一个 (:)。这是 CSS3 的一部分，也是一种区分伪类和伪元素的尝试。大多数浏览器都支持这两个值。

因此，当您想使用等[伪类](https://developer.mozilla.org/en-US/docs/CSS/Pseudo-classes)时`:hover`，请`:first-child`使用单个冒号。如果要使用[伪元素](https://developer.mozilla.org/en-US/docs/CSS/Pseudo-elements)，如`::before`,`::after`等`::first-letter`，请使用双冒号。

* * *

还有一点需要注意：[W3C](http://www.w3.org/TR/selectors/#pseudo-elements)声明浏览器应该只接受`::`CSS 3 中引入的伪元素的表示法，所以你应该遵循上面的建议 :)

# ruby-on-rails - Rails 3 中的外部引用 URL - 来自嵌入的脚本标签？

> ID：14720522
> 
> 赞同：0
> 
> 时间：2013-02-06T02:17:23.990
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我似乎在获取外部 URL 的 URL 引用时遇到了很多麻烦。

我的应用程序通过人们在其网站上包含的脚本运行：

像这样——

```
<script src="http://0.0.0.0:3000/load.js?upid=10b829af3eef17eb203667f5db56ef930eca062fde4a523b" type="text/javascript"></script> 
```

当页面被点击并加载脚本时，它只是与控制器操作匹配，其中 upid 用于查找记录。

该动作如下所示：

```
 def remote
    @page = Page.find_by_upid(params[:upid])
    respond_to do |format|
      format.js
    end    
  end 
```

我现在正在尝试查看引用 URL，因为我想查看该脚本标记的嵌入位置。

我以 0 的运气尝试了以下方法：

```
 logger.debug "r test: #{request.env['HTTP_REFERER']}"
    logger.debug "r test: #{request.referer}"
    logger.debug "r test: #{request.original_url}" 
```

它们要么返回空白，要么返回`http://0.0.0.0:3000/load.js?upid=10b829af3eef17eb203667f5db56ef930eca062fde4a523b`脚本标签中的这个 URL。

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:47:49.953

为了将来参考，我通过在脚本标记中包含的文件中通过 javascript 获取 URL 来解决这个问题。然后，因为该文件首先由 rails 处理，所以我能够将其发送到带有 erb 标记的方法调用中以执行我想要的操作。

# java - 为什么这会返回 false 和 true？

> ID：14720523
> 
> 赞同：6
> 
> 时间：2013-02-06T02:17:26.400
> 
> 标签：java

```
public class Test {
    public static final Double DEFAULT_DOUBLE = 12.0;
    public static final Long DEFAULT_LONG = 1L;

    public static Double convertToDouble(Object o) {
        return (o instanceof Number) ? ((Number) o).doubleValue()
                : DEFAULT_DOUBLE;
    }

    public static Long convertToLong(Object o) {
        return (o instanceof Number) ? ((Number) o).longValue() : DEFAULT_LONG;
    }

    public static void main(String[] args){
        System.out.println(convertToDouble(null) == DEFAULT_DOUBLE);
        System.out.println(convertToLong(null) == DEFAULT_LONG);
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T02:23:17.370

**编辑**

三元运算符在后台[进行一些类型转换](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25)。在您的情况下，您正在混合原语和包装器类型，在这种情况下，包装器类型被取消装箱，然后三元运算符的结果被“重新装箱”：

> 如果第二个和第三个操作数之一是原始类型 T，而另一个的类型是对 T 应用装箱转换（第 5.1.7 节）的结果，则条件表达式的类型是 T。

* * *

所以你的代码基本上等同于（除了`longValue`应该是的错字`doubleValue`）：

```
public static void main(String[] args){
    Double d = 12.0;
    System.out.println(d == DEFAULT_DOUBLE);

    Long l = 1L;
    System.out.println(l == DEFAULT_LONG);
} 
```

长值可以缓存在某些 JVM 上，`==`因此比较可以返回 true。如果你做了所有的比较，`equals`你会得到`true`这两种情况。

请注意，如果您使用`public static final Long DEFAULT_LONG = 128L;`并尝试：

```
Long l = 128L;
System.out.println(l == DEFAULT_LONG); 
```

它可能会打印错误，因为 Long 值通常只缓存在 -128 和 +127 之间。

注意：[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.7-300)要求缓存`char`,`byte`和`int`-127 到 +128 之间的值，但没有说明`long`. 因此，您的代码实际上可能会在不同的 JVM 上打印两次 false。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T02:35:13.463

要了解这种奇怪的行为，您需要分开它的作用：

```
(o instanceof Number) ? ((Number) o).longValue() : DEFAULT_LONG 
```

我们这里有一个对方法的调用，该方法返回一个`long`和一个 的实例`Long`。两种*不同的*类型。然而，条件运算符`?`需要产生单一类型；要么`long`要么`Long`。为了做到这一点，第二个操作数必须被装箱或第三个操作数必须被取消装箱。

在这种情况下，JLS 说第三个操作数必须被取消装箱。 [JLS 15.25](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25)

> *“如果第二个和第三个操作数之一是原始类型 T，而另一个的类型是对 T 应用装箱转换（第 5.1.7 节）的结果，则条件表达式的类型是 T。”*

这意味着您的常量被拆箱然后再次装箱。

现在，通过调用装箱类型的`valueof()`方法来装箱原始类型。这些方法根据基本类型做的事情略有不同。

*   对于浮点类型，`valueof`总是创建一个新对象
*   对于整数类型，该`valueof`方法有时会创建一个新对象，有时会返回一个现有对象。

后者就是这里发生的事情。 `Long.valueof(1L)`总是返回相同的值，与的比较`==`是给`true`.

* * *

有两个“修复”......假设你想解决这个问题：

*   在两个分支中用`if`/`else`替换三元运算符。`return`
*   强制第二个操作数被装箱：

    ```
    return (o instanceof Number) ? 
            (Long) ((Number) o).longValue() : DEFAULT_LONG; 
    ```

# spring - 使用 JAXB Marshaller 的 Spring WS 客户端

> ID：14720524
> 
> 赞同：0
> 
> 时间：2013-02-06T02:17:31.700
> 
> 标签：spring, jaxb, spring-ws, webservicetemplate

有没有一种方法可以在我的 Spring WS 客户端项目中引用 XSD，而不是从 XSD 生成 POJO，并且仍然能够引用 JAXB 对象、构建请求并使用 WebServiceTemplate 调用 Web 服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:43:18.157

如果我正确理解您的问题，您想使用 JAXB 对象但不想生成 JAXB 对象。如果是这样，那么答案是否定的。

您仍然可以在客户端使用 Spring-WS 发送不是由编组对象生成的 SOAP 请求。查看[参考](http://static.springsource.org/spring-ws/site/reference/html/client.html)以获取示例和更多信息。

# jquery - 尝试根据 url 更改链接颜色

> ID：14720527
> 
> 赞同：1
> 
> 时间：2013-02-06T02:17:47.577
> 
> 标签：jquery

基本上我正在尝试[这样做，](https://stackoverflow.com/questions/7572767/how-can-i-get-jquery-or-javascript-to-change-css-based-on-the-current-url)但它不起作用......可能是因为：

1.  网址是“index.php?cat=Lifestyles&do=Arrive”，链接的 html 是“index.php?cat=Lifestyles&do=Arrive”

2.  或者，这是一个很长的镜头，因为我在本地主机（wampserver）上测试它，而不是在实际的“网络服务器”上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:20:40.143

假设您使用的代码与您链接的代码相同，我的猜测是您的 document.URL 与您预期的不匹配。

调试这一行

```
this.href == document.URL 
```

在 Firefox 中，这很容易通过以下方式完成：

```
console.log(this.href);
console.log(document.URL); 
```

如果他们不匹配，那是你的问题。

**编辑**

看到这个：http: [//jsfiddle.net/ZsDKx/](http://jsfiddle.net/ZsDKx/)

在 Chrome 和 Firefox 中进行测试。（一定要点击顶部的“运行”）

# signalr - SignalR 连接错误

> ID：14720530
> 
> 赞同：0
> 
> 时间：2013-02-06T02:17:56.753
> 
> 标签：signalr

我有一个令人愤怒的 signalR 错误。在详细了解我编写的代码之前，我想知道是否有人经历过持续轮询连接。

我的客户端正在访问正在关闭连接的服务器，从而导致立即连接尝试，就像这样一个令人讨厌的恶性循环：

![Firebug 输出 - 十秒的活动](../Images/c9c8491b8d503cbcf255544ee1734a4f.png)

它有效地导致了 DOS 攻击。

我知道仅根据描述，我可能无法获得明确的解决方案，但是如果有人经历过这种特殊行为，请告诉我您发现的原因。是服务器错误，还是 js 错误……两者都有？？

我正在使用 signalR 0.5 并且不能升级。

谢谢。

# objective-c - Objective-C 阻止变量参数不匹配定义

> ID：14720533
> 
> 赞同：0
> 
> 时间：2013-02-06T02:18:18.707
> 
> 标签：objective-c, objective-c-blocks

为什么编译器允许下面的行没有错误或警告？似乎它应该抱怨“onSuccess”声明和定义中的参数不匹配。

我正在使用 Xcode 4.6 (LLVM 4.2)

```
void (^onSuccess)() = ^(AFHTTPRequestOperation *operation, id responseObject) {
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T03:34:52.097

这似乎就像 C 函数声明一样工作。引用 C99 标准：

> (6.7.5.3/14) [...]函数声明器中不属于该函数定义的空列表指定不提供有关参数数量或类型的信息。[...]

意思是，您可以**声明**一个函数（并且看起来也是一个块）并且不提供有关参数的任何信息。

# java - 平衡系统 (Elo)

> ID：14720537
> 
> 赞同：2
> 
> 时间：2013-02-06T02:18:35.430
> 
> 标签：java, arrays, game-engine

我想知道你将如何为基于 Elo 系统的游戏创建平衡系统。

我在这里阅读了几篇关于类似系统的帖子。我根据对列表进行排序，然后将奇数球员分配给一支球队甚至另一支球队来进行平衡系统。

我发现的问题是，有时如果我做一个这样的列表，玩家的 Elo 评分就会有很大的差距。球队有些不平衡。

例子：

排序为 1700,1500,1500,1300,1300,1400,1400,1400,1200,1200 的列表

团队看起来像

*   1队：1700,1500,1300,1400,1200
*   团队 2：1500,1300,1400,1400,1200

平均值会出现在一个不平衡的团队中。

我不太确定如何制作更好的平衡系统。我可以提供到目前为止我写下的内容，但数量不多。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T03:15:17.000

你的问题有以下两部分：

**评级问题**
你需要使用一个评级系统，负责对作为球队一员的每个球员进行评级。微软研究院为此创建了一个[TrueSkill](http://en.wikipedia.org/wiki/TrueSkill)系统，它是多人游戏 Elo Rating 的改进版本。

该页面还谈到它是[Glicko](http://en.wikipedia.org/wiki/Glicko_rating_system)评级系统的改进版本。这也广泛用于在线国际象棋论坛。

**团队组建**

您有一个排序列表，并且想要创建两个平衡的团队（就总评分而言）。您需要查看[Partition Problem](http://en.wikipedia.org/wiki/Partition_problem)。您利用动态规划解决方案，它是时间上的伪多项式。

# python - 在 3D 图中绘制图像，python

> ID：14720539
> 
> 赞同：0
> 
> 时间：2013-02-06T02:18:53.377
> 
> 标签：python, image, 3d, matplotlib, patch

我正在寻找在 3 个空间中的任意计划上绘制图像。我已经使用 matplotlib 进行了一些 3d 曲线绘图，而且我运气不错。更具体的做法是将 6 个不同的图像放在一个立方体上并在空间中旋转它（这可以通过保存为图像的几个图来完成）。我不能只旋转相机，我会让多个立方体向不同的方向旋转。我希望 3Dplot 方法允许我选择导入图像的四个角。如果我使用 MATLAB，我会使用类似[这样](http://www.mathworks.com/matlabcentral/fileexchange/21881-image3)的东西，它允许您使用以下代码在 3space 中绘制图像：

```
C = rand(8,4)*64;                % a small random image
R = [1 0; 0 1; 0 0];
t = [10-1;20-1;5];
h = image3(C,[R t]); axis equal
view(30,45); 
```

我想用 Python 来做这件事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:39:54.843

我不能绝对否认这在 matplotlib 中是可能的，但这绝对不是 mpl 的意图。我真的建议`mayavi`改用。

# c++ - 如何将字符串从ifstream复制到vector 优雅地？

> ID：14720540
> 
> 赞同：0
> 
> 时间：2013-02-06T02:18:59.710
> 
> 标签：c++, algorithm, copy, iostream, fstream

```
#include <iostream>
#include <fstream>
#include <string>
#include <vector>
#include <algorithm>

using namespace std;

int main()
{
    ifstream fin("test.txt");

    vector<string> coll;

    typedef istreambuf_iterator<char> IStrBufIter;
    copy(IStrBufIter(fin), IStrBufIter(), back_inserter(coll)); // Error! Why?
} 
```

* * *

该问题在代码中进行了注释。

我得到的错误是：

```
oi.cpp:15:62:   required from here
error: invalid user-defined conversion from ‘std::istreambuf_iterator<char, std::char_traits<char> >::char_type {aka char}’ to ‘std::vector<std::basic_string<char> >::const_reference {aka const std::basic_string<char>&}’ [-fpermissive] 
```

随后的错误消息太多，无法粘贴到此处。请参阅 gcc 4.7 上的错误消息[http://pastebin.com/anKQqL00](http://pastebin.com/anKQqL00)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T02:23:53.037

考虑一下你`copy`在做什么。它反复调用`coll.push_back(someChar);`

`coll`是 的向量`strings`。您正试图将 a 推`char`入其中。您不能`string`从 a 构造 a `char`。

另外，你应该在`istream_iterator`这里使用，而不是`istreambuf_iterator`. 您可以制作s`coll`的向量`char`，或者如果您打算将文件中的每个单词放入字符串向量中（我怀疑您可能是），您可以更改`istream_iterator<char>`为`istream_iterator<string>`.

或者，更好的是，您可以首先使用迭代器构造向量：

```
 vector<string> coll(istream_iterator<string>(fin), istream_iterator<string>()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T02:26:06.270

如果要将文件的内容放入向量中，只需循环遍历它。

```
#include <iostream>
#include <fstream>
#include <string>
#include <vector>

using namespace std;

int main()
{
    ifstream fin("test.txt");

    vector<string> coll;
    string str;
    while(getline(fin,str))
        coll.push_back(str);
} 
```

可能更容易处理和不言自明。

# filter - 谷歌电子表格过滤器

> ID：14720541
> 
> 赞同：0
> 
> 时间：2013-02-06T02:19:01.740
> 
> 标签：filter, google-sheets

我正在尝试在谷歌电子表格中按部门过滤员工列表

```
=filter(A:C,!B2:B6=D2) 
```

我的样本数据是

```
Name    Department      age
asd     dep1            12
fds     dep2             2
plo     dep3             3
sdfsdf  dep1            56
shg     dep2            98 
```

现在我已经让过滤器部分工作了..我的问题是过滤后。我怎样才能告诉 GSpreadsheet 只显示特定的列值......比如使用部门作为过滤条件但只返回姓名和年龄？

最终我还想将我的结果移动到另一张纸上。

对于这个问题，我的首选方法是使用类似 thingy 的谷歌宏，如果您对此有建议，请不要犹豫，隐藏不需要的行和列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T03:00:55.367

最简单的过滤方式是[Data-Filter]，否则[View-List]也可以过滤。使用公式，您将在不同的列中显示结果，通常在不同的页面上。

我省略列 B 的建议是制作两个单独的列过滤器，如下所示：

=过滤器(A:A,B:B=D2) =过滤器(C:C,B:B=D2)

仅当您在另一张纸上时才需要感叹号，您可能还尝试执行以下操作： filter(A2:A,B2:B="dep1") 公式的真正威力在于您想要操纵比较之前的值，如下所示： filter(A:A,right(B:B,1)="1") 否则我不确定您指的是什么，除了 Google Apps 脚本我不知道任何功能非常类似于 VBA。

如果这没有回答你的问题，你能更具体一点吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T19:23:47.373

我会在这里使用 QUERY 函数：

=QUERY(A:C, "选择 A,C 其中 (B = 'dep1')")

这将返回两列（姓名和年龄 - 分别是“A”和“C”）。过滤条件在 WHERE 子句中提供。

要将结果移动到另一张纸上，我会换一种方式：创建另一张纸，然后写：

=QUERY(employees!A:C, "选择 A,C where (B = 'dep1')")

假设您的原始工作表的名称是“员工”。

我希望它有所帮助。

# javascript - 在新窗口中突出显示文本

> ID：14720542
> 
> 赞同：2
> 
> 时间：2013-02-06T02:19:18.920
> 
> 标签：javascript, html, css

我正在尝试创建一个食谱页面，用户可以在其中单击食谱成分（例如橄榄油、西兰花等）并重定向到他们单击的成分以黄色突出显示的成分列表。

我知道如何使用特定链接突出显示文本：

CSS：

```
.highlight {background-Color:yellow;} 
```

Javascript：

```
function highlightText(id) 
{
    var textObject = document.getElementById(id);

    textObject.className = "highlight";
} 
```

HTML：

```
<h1 id="ingredient">Olive Oil</h1>
<a href="javascript:highlightText('ingredient')">Olive Oil</a> 
```

我想做的是从另一个页面创建一个指向“橄榄油”的链接，就像使用 id 属性一样：

```
<a href="http://www.mypage.com/recipe-list.html#ingredient">
    Olive Oil
</a> 
```

我感谢任何和所有的帮助。这是我的第一篇文章，所以请原谅我问了这么简单的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T02:23:37.143

使用目标选择器

```
:target{
background-color:yellow;
} 
```

[关于该选择器的文章](http://css-tricks.com/on-target/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T06:19:39.260

为了突出显示图像、文本或 html 文档，您可以使用 lightbox。

试试吧：http: [//jquery-jkit.com/commands/lightbox.html](http://jquery-jkit.com/commands/lightbox.html)

# ruby-on-rails - Rails 4 中的会话

> ID：14720544
> 
> 赞同：11
> 
> 时间：2013-02-06T02:19:38.530
> 
> 标签：ruby-on-rails, session, rails-activerecord, ruby-on-rails-4

如果不推荐使用 ActiveRecord::Store，建议的维护会话的方法是什么？加密cookie存储是新标准吗？如果你想保持 >4kb 的状态怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-22T02:52:50.473

在 Rails 4 中，包含`gem 'activerecord-session_store'`在您的 Gemfile 中并运行 bundle install。按照[https://github.com/rails/activerecord-session_store](https://github.com/rails/activerecord-session_store)说明完成迁移和配置。

另一种选择是使用 'dalli' gem 进行会话管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T02:49:03.897

查找文件夹`session_store.rb`内命名的`config/initializers`文件。在那里你应该设置你想使用哪种会话。一个标准的，基于 cookie 的，应该是这样的：

```
ProjectName::Application.config.session_store :cookie_store, key: '_project_name_session' 
```

之后，您需要做的就是`session`从控制器中调用散列。您可以在那里设置任何值，它将在请求之间持续存在。

在[Rails 指南](http://guides.rubyonrails.org/configuring.html#rails-general-configuration)中：

> config.session_store 通常在 config/initializers/session_store.rb 中设置，并指定使用什么类来存储会话。可能的值是 :cookie_store （默认值）、:mem_cache_store 和 :disabled。最后一个告诉 Rails 不要处理会话。还可以指定自定义会话存储 (...)

# html - 如何为 Google Chrome 和 Google Tasks 网站创建用户样式？

> ID：14720546
> 
> 赞同：1
> 
> 时间：2013-02-06T02:20:07.877
> 
> 标签：html, css, google-chrome-extension, userscripts, stylish

我想为 Google Chrome 创建一个*时尚*脚本，它将更改[Google Tasks 页面](https://mail.google.com/tasks/canvas?pli=1)`<textarea>`上的注释大小。

我要设置样式的元素是：

```
<textarea id=":2.notes-editor" class="l lc" rows="5" style=""></textarea> 
```

目前我的*时尚*脚本看起来像这样。

```
#2.notes-editor{
height:100px;

}

url: https://mail.google.com 
```

由于某种原因，它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:29:45.470

你试过强迫它`!important`吗？

```
#2.notes-editor{
    height:100px !important;
} 
```

如果这不起作用，可能是因为`textarea`它在一个内部`iframe`（我已经[读过](http://forum.userstyles.org/discussion/15032/how-to-apply-css-to-content-within-an-iframe/p1)Chrome 上 iframe 内的 css 样式没有按预期工作）。

# java - 如何从 java 中的整数中获取双精度值？

> ID：14720547
> 
> 赞同：0
> 
> 时间：2013-02-06T02:20:22.197
> 
> 标签：java, integer

因此，我很难弄清楚如何正确显示这些值。所有的数学都是正确的，但它只说明了整数。例如，当我输入数字 87、42 和 94 时，平均值应为 74.3 重复。然而它对我来说只有 74.0。最低分数的平均值也是如此。

```
Scanner keyboard = new Scanner(System.in);

int a;
int b;
int c;
double grade;
double avg;
double avg2 = 0;

System.out.print("Enter score number 1: ");
a = keyboard.nextInt();
System.out.print("Enter score number 2: ");
b = keyboard.nextInt();
System.out.print("Enter score number 3: ");
c = keyboard.nextInt();

avg = ((a + b + c) / 3);

System.out.println("The average is: " + avg);

if (a < b && a < c)
{
    System.out.println("The lowest score was: " + a);
    System.out.println("The average without the lowest score is: " + ((b + c) / 2));
    avg2 = ((b + c) / 2);
}

if (b < a && b < c)
{
    System.out.println("The lowest score was: " + b);
    System.out.println("The average without the lowest score is: " + ((a + c) / 2));
    avg2 = ((a + c) / 2);
}

if (c < a && c < b)
{
    System.out.println("The lowest score was: " + c);
    System.out.println("The average without the lowest score is: " + ((a + b) /2));
    avg2 = ((a + b) / 2);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T02:36:16.273

您必须将 avg 表达式的分子中的总和转换为双精度数或在分母中使用双精度数：

avg = ( **(双)** (a + b + c) / 3);

或者

平均值 = ((a + b + c) / **3.0** );

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T04:24:32.913

这就是运算符在 Java 中的工作方式。如果你有任何算术运算，比如除法，其中两个操作数都是整数，那么运算符将产生一个整数。在这种除法操作中可能会丢失一些信息。

在您的情况下，尽管您将结果分配给 double 类型的变量，但在除法运算符完成后执行赋值运算符。

如果您不想丢失信息，您可以将任何操作数类型转换为所需的类型（在您的情况下，转换为双精度）。

```
avg = (double)(a + b + c) / 3; 
```

或者

```
avg = (a + b + c) / (double)3; 
```

现在，在上述语句中，除法运算符有两个不同类型的操作数。所以结果将是两者中优的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T02:22:38.057

当您使用`int`右侧的所有 s 时，答案`int`在分配给 之前计算为`double`。这就是为什么你得到一个全面的答案。

要修复，一种选择是像这样为所有分母添加小数位

```
avg = ((a + b + c) / 3.0d); 
```

这将迫使操作发生在`double`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T02:24:54.717

两个`int`s 之间的除法将返回一个`int`。要导致返回 的除法`double`，其中一个操作数必须是 a `double`，如下所示：

```
avg = ((a + b + c) / 3.0); 
```

# python-2.7 - 按计划排列python

> ID：14720554
> 
> 赞同：0
> 
> 时间：2013-02-06T02:21:28.607
> 
> 标签：python-2.7, permutation, des

我正在尝试在 python 中实现简化的 DES 以用于学习目的，但我无法弄清楚如何根据“时间表”进行排列。本质上，我有一个具有适当排列的元组，我需要移位到正确的位置。

例如，使用一个键：

K = 00010011 00110100 01010111 01111001 10011011 10111100 11011111 11110001

将第 57 位移动到第一位点，将第 49 位移动到第二位点，依此类推...

K+ = 1111000 0110011 0010101 0101111 0101010 1011001 1001111 0001111

当前代码：

```
def keyGen(key):
    PC1table = (57, 49, 41, 33, 25, 17,  9,
                 1, 58, 50, 42, 34, 26, 18,
                10,  2, 59, 51, 43, 35, 27,
                19, 11,  3, 60, 52, 44, 36,
                63, 55, 47, 39, 31, 23, 15,
                 7, 62, 54, 46, 38, 30, 22,
                14,  6, 61, 53, 45, 37, 29,
                21, 13,  5, 28, 20, 12,  4)

    keyBinary = bin(int(key, 16))[2:].zfill(64)
    print keyBinary
    permute(PC1table, keyBinary)

def permute(permutation, permuteInput):
    elements = list(enumerate(permutation))
    for bit in permuteInput:
         ***magic bitshifting goes here***

keyGen("133457799BBCDFF1") 
```

我认为可行的逻辑是枚举排列的元组，对于我的旧密钥的每一位，在枚举中查找与该位对应的索引，并移位适当的次数，但我只是可以'不知道如何去做。可能是我从错误的角度处理问题，但任何指导将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:34:48.520

好的，我最终想出了一种方法来完成这项工作，尽管这可能不是最有效的方法......

在调用函数之前，将二进制数转换为列表：

```
keyBinary = bin(int(key, 16))[2:].zfill(64)
keyBinary = [int(i) for i in keyBinary]

Kplus = permute(PC1table, keyBinary)

def permute(mapping, permuteInput):
    permuteOutput = []

    for i in range(len(mapping)):
        permuteOutput.append(permuteInput[mapping[i % 56] - 1])

    return permuteOutput 
```

如果有人有更好的方法来解决这个问题，我很想看看你的解决方案！

# environment-variables - 为开发、测试和生产环境配置我的 RubyMotion 应用程序的最佳方式是什么

> ID：14720555
> 
> 赞同：1
> 
> 时间：2013-02-06T02:21:44.847
> 
> 标签：environment-variables, development-environment, rubymotion

我正在使用 RubyMotion 构建一个 iOS 应用程序。

我正在使用 Facebook 和 Parse。

我已经设置了三个不同的 Facebook 和 Parse 应用程序。

我应该如何设置 RubyMotion 为每个环境的每个应用程序使用正确的凭据？使用 yml 文件是否正确？如果是这样，我应该把它们放在哪里，我应该如何加载它们。

rails 中有 development.rb 之类的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T02:09:50.723

我知道，至少可以区分两个版本。

在您的 Rakefile 中，您可以使用 app.X 指定不同的内容：

```
 # Distribution - use rake archive:release
  app.release do
    # Release (production) items here
  end

  # Development - use rake archive
  app.development do
    # Dev stuff here
  end 
```

在其他地方，为了区分我使用这个：

```
def development?
  RUBYMOTION_ENV == "development"
end

def release?
  !development?
end

def parse_app_id
  return "PARSE_DEVELOPMENT_APP_ID" if development?
  return "PARSE_RELEASE_APP_ID" if release?
end

def parse_client_key
  return "PARSE_DEVELOPMENT_CLIENT_KEY" if development?
  return "PARSE_RELEASE_CLIENT_KEY" if release?
end 
```

我还在我的 git repo 中保留了一个 Testflight 分支，其中包含 Testflight 包和信息（我从未合并回 master 或 dev ），但这超出了我在这里回答的范围。

# jquery - Jquery Scroll 功能在这里不起作用

> ID：14720557
> 
> 赞同：0
> 
> 时间：2013-02-06T02:21:49.300
> 
> 标签：jquery, html, scroll

[http://jsfiddle.net/asif097/AzRtC/3](http://jsfiddle.net/asif097/AzRtC/3)

如您所见，单击第一个按钮时有两个按钮，一些 jquery 函数正在运行（请参见红色 div 下方，正在加载更多内容），第二个按钮也是如此。

现在我想使用 jquery 滚动功能而不是点击功能（运行那些与点击相同的 jquery 动画）。

试过这个但不起作用。有没有人来修复代码？

**注意：**我是 jquery 的新手。

```
 $(window).scroll(function() {
    if ($(this).scrollTop() > 1000) { // instead of the click button#go tried bellow code
      $(".more").css("display", "block");
      $("#block1").removeAttr('style');
      $("#block2").removeAttr('style');
      $("#block3").removeAttr('style');
      $("#block4").removeAttr('style');
      $("#block5").removeAttr('style');
      $("#block1").css('display', 'block').animate({
          opacity: 1,
          marginTop: 0,
          top: 0,
          }, 1300, 'easeOutExpo');

      $("#block2").css('display', 'block').animate({
          opacity: 1,
          marginTop: 0,
          top: 0,
          }, 2000, 'easeOutExpo');;

      $("#block3").css('display', 'block').animate({
          opacity: 1,
          marginTop: "13px",
          }, 2000, 'easeOutExpo');

      $("#block4").css('display', 'block').animate({
          opacity: 1,
          marginTop: "-208px",
          marginRight: 0
          }, 2000, 'easeOutExpo');

      $("#block5").css('display', 'block').animate({
          opacity: 1,
          marginTop: "13px",
          marginRight: 0
          }, 2000, 'easeOutExpo');

    }

    else if ($(this).scrollTop() > 1000) { // instead of the click button#go2 tried bellow code
      $(".more2").css("display", "block");
      $("#block6").removeAttr('style');
      $("#block7").removeAttr('style');
      $("#block8").removeAttr('style');
      $("#block9").removeAttr('style');
      $("#block10").removeAttr('style');
      $("#block6").css('display', 'block').animate({
          opacity: 1,
          marginTop: 0,
          top: 0,
          }, 1300, 'easeOutExpo');

      $("#block7").css('display', 'block').animate({
          opacity: 1,
          marginTop: 0,
          top: 0,
          }, 2000, 'easeOutExpo');

      $("#block8").css('display', 'block').animate({
          opacity: 1,
          marginTop: "13px",
          }, 2000, 'easeOutExpo');

      $("#block9").css('display', 'block').animate({
          opacity: 1,
          marginTop: "-208px",
          }, 2000, 'easeOutExpo');

      $("#block10").css('display', 'block').animate({
          opacity: 1,
          marginTop: "13px",
          }, 2000, 'easeOutExpo');
    }

    else {
        return false;
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T02:34:24.050

您的代码的唯一问题是它`$(this).scrollTop()`永远不会大于`1000`.

根据定义[`.scrollTop()`](http://api.jquery.com/scrollTop/)

> 垂直滚动位置与在可滚动区域上方的视图中隐藏的像素数相同。如果滚动条位于最顶部，或者元素不可滚动，则此数字将为 0。

所以滚动到底部时会有所不同，而窗口的高度不同。

所以我使用`$(this).scrollTop()+$(window).height()`而不是`$(this).scrollTop()`，它几乎是一样的。

这是jsfiddle。[http://jsfiddle.net/AzRtC/5/](http://jsfiddle.net/AzRtC/5/)

# ruby-on-rails - 将数据掩码引导变量传递到 simple_form 输入？

> ID：14720560
> 
> 赞同：1
> 
> 时间：2013-02-06T02:22:07.563
> 
> 标签：ruby-on-rails, twitter-bootstrap, simple-form, data-masking

我正在自定义一个 simple_form gem-enabled 表单，我希望电话号码字段具有来自[http://jasny.github.com/bootstrap/javascript.html#inputmask的数据掩码](http://jasny.github.com/bootstrap/javascript.html#inputmask)

我的原始代码是：

```
 <%= f.input :phone, :required => true, 
            :input_html => { :maxlength => 14} %> 
```

将类似的东西传递到 f.input 所需的代码是什么？

使用 input_html 和 label_html 之类的东西似乎不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T04:02:47.567

在你的表格中试试这个：

```
<%= f.input :phone, :required => true, 
            :input_html => { :maxlength => 14, :"data-mask" => "999-999-9999" } %> 
```

此外，假设您正在运行 Rails 3.1+ 并且您的 vendor/assets/javascripts 目录中有 jasny 文件，请确保在 app/assets/javascripts/application.js 中包含 bootstrap-inputmask 文件：

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require bootstrap-inputmask
//= require_tree . 
```

# c - c语言读取ID3V2 TAG

> ID：14720563
> 
> 赞同：-1
> 
> 时间：2013-02-06T02:22:17.170
> 
> 标签：c, id3v2

我是一名编程初学者，我的大学有一项任务是编写 C 代码，用于读取 ID3V2 格式的 mp3 文件。我已经在网上搜索并尝试将一些部分放在一起，然后我想出了这段代码。尽管我从上到下放置了许多错误警告，但我仍然无法理解错误在哪里。

我的第一个问题是它编译的代码只有一个警告：警告：格式 '%s' 需要匹配的 'char *' 参数 [-Wformat]

不幸的是，我不知道我的错误是什么。我正在尝试打印用户的输入以防出现错误，我认为这样做会收到此警告。

我的第二个问题是当我执行作为输出得到的代码时：程序未能获取标签

任何帮助将不胜感激。

提前感谢您花时间阅读我的问题。

最好的问候，灭霸

到目前为止，这是我的代码：

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>

    typedef struct{
    char tag[3];
    char title[30];
    char artist[30];
    char album[30];
    char year[4];
    char comment[30];
    unsigned char genre;
    }mp3Info;

    int main (int argc, char *argv[])
    {
    if ( argc != 1 ) /* Input from user argc should be 1 for correct
    *execution. The argument count variable
    * stores the number of arguments plus one. */ 
    {
    /*We print argv[0], if the program that user has chosen for
     * execution it is not correct as input if has more inputs*/ 
    printf( "Please choose one file: %s <silence.mp3> \n", argv[0] );
    }
    else 
    {
    FILE *file; /* A file pointer is a variable of type FILE, 
    * we declare a file pointer.*/

    file = fopen("silence.mp3", "rb"); /* Open the file
    * silence.mp3 in
    * "reading" mode "r". */

    if (file == NULL) {
    /* If the file could not open for a variety of reasons
     * the program should inform us by print the document
     * and exit.*/ 
    printf("I couldn't open: %s for reading.\n");
    exit(0);
    }

    else 
    {
    mp3Info tag_in;

    /* Set the fseek to the beggining of the document with
     * the help of the command SEEK_SET, condition if fail*/

    if (fseek(file, 0 *sizeof(mp3Info), SEEK_SET) == -1)
    {
    fprintf(stderr, "Not able to fseek");
    return EXIT_FAILURE;
    }

    /* Read the first name "tag" */
    if (fread(&tag_in, sizeof(mp3Info), 1, file) != 1)
    {
    printf("Could not read the tag\n");
    exit (0);
    }

    /* Compare memory areas for verification */

    if (memcmp(tag_in.tag, "TAG", 3) == 0)
    {
    /* Verify that names are where as we expect */
    printf("Title: %.30s\n", tag_in.title);
    printf("Artist: %.30s\n", tag_in.artist);
    printf("Album: %.30s\n", tag_in.album);
    printf("Year: %.4s\n", tag_in.year);

    if (tag_in.comment[28] == '\0')

    {
    printf("Comment: %.28s\n", tag_in.comment);
    printf("Track: %d\n", tag_in.comment[29]);
    }

    else
    {
    printf("Comment: %.30s\n", tag_in.comment);
    }
    printf("Genre: %d\n", tag_in.genre);
    }

    else
    {
    fprintf(stderr, "The program has failed to get the Tags\n");
    return EXIT_FAILURE;
    }

    fclose(file);
    return 0;

    }
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T02:29:35.640

您收到的警告与此行有关（您可以从错误消息中遗漏的行号确定）：

```
printf("I couldn't open: %s for reading.\n"); 
```

您指定`%s`一个字符串将作为参数传递，但您没有传递您承诺的字符串。

您的程序失败表明您提供给它的文件在您期望的位置没有 ID3 标记。这是因为您尝试读取的 ID3v1 标签（不是 ID3v2；这是一种完全不同的格式）通常位于文件的*末尾*，而不是开头。要阅读它，您需要寻找到文件末尾附近，而不是开头：

```
fseek(file, -sizeof(mp3Info), SEEK_END); 
```

# uiview - UIView 上的顶部空间约束，而不是 UIImag

> ID：14720567
> 
> 赞同：0
> 
> 时间：2013-02-06T02:22:48.697
> 
> 标签：uiview, uiimageview, interface-builder, constraints

我在使用其中一些约束方面有一段很长的时间。我只是想在 IB 中添加一个 UIView 以便我可以根据需要注入其他视图。但是，我无法正确定位。无论我添加或删除多少约束，我似乎都无法删除“顶部空间：Superview”。我只是试图将 UIView 固定到底部并让它针对不同的屏幕尺寸浮动。这个“顶部空间”迫使 UIView 离开屏幕，我似乎无法删除它，也无法取消它的优先级。

UIView 约束（不起作用） - 抱歉还不能发布图片
[http://i1322.photobucket.com/albums/u574/dneely79/uiview-constraints_zpscae66ed9.png](http://i1322.photobucket.com/albums/u574/dneely79/uiview-constraints_zpscae66ed9.png)

另一方面，虽然我可以删除 UIView 并添加 UIImageView ，但我可以让它工作。所以，现在我实际上是将我的视图注入到这个元素而不是 UIView 中。它的工作，只是感觉很脏。

UIImageView 约束（作品）
[http://i1322.photobucket.com/albums/u574/dneely79/uiimageview-constraints_zps726da545.png](http://i1322.photobucket.com/albums/u574/dneely79/uiimageview-constraints_zps726da545.png)

其他人对如何克服这个有任何想法吗？它让我发疯，对我来说似乎没有多大意义。

我已经尝试过这个帮助链接（虽然试图锚定底部而不是顶部）
[Xcode 4 and Interface Builder: Editing Vertical Spacing Constraint (Anchor Top, not Bottom)](https://stackoverflow.com/questions/14107799/xcode-4-and-interface-builder-editing-vertical-spacing-constraint-anchor-top)

提前感谢您对此事的任何帮助或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:04:18.180

根据 IB 给你的默认值，这对我来说是一个半愚蠢的错误。我回去更好地分析了我自己的照片。

在注意到 UIImageView 而不是 UIView 上设置的高度后，我添加了一个高度并能够成功删除顶部空间。

# c# - 关于 MVC4 用户输入，如何不依赖实体（模型）输入验证？

> ID：14720568
> 
> 赞同：0
> 
> 时间：2013-02-06T02:22:49.227
> 
> 标签：c#, validation, asp.net-mvc-4, razor-2

vs2012 /WebSite Razor2 开发模式，可以使用以下方法验证吗？

那么如何使用MVC类似的方法呢？

```
// Setup validation
Validation.RequireField("email", "You must specify an email address.");
Validation.RequireField("password", "You must specify a password.");
Validation.Add("password",
    Validator.StringLength(
        maxLength: Int32.MaxValue,
        minLength: 6,
        errorMessage: "Password must be at least 6 characters"));

<ol>
    <li class="email">
        <label for="email" @if (!ModelState.IsValidField("email"))
            {<text>class="error-label"</text>}>电子邮件地址</label>
        <input type="text" id="email" name="email" value="@email" @Validation.For("email")/>
        @* 将任何用户名验证错误写入页中 *@
        @Html.ValidationMessage("email")
    </li>
    <li class="password">
        <label for="password" @if (!ModelState.IsValidField("password")) {<text>class="error-label"</text>}>密码</label>
        <input type="password" id="password" name="password" @Validation.For("password")/>
        @* 将任何密码验证错误写入页中 *@
        @Html.ValidationMessage("password")
    </li>
    <li class="remember-me">
        <input type="checkbox" id="rememberMe" name="rememberMe" value="true" checked="@rememberMe" />
        <label class="checkbox" for="rememberMe">记住我?</label>
    </li>
</ol>
<input type="submit" value="登录" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T02:43:18.750

也许如果您试图避免使用模型，您可以使用利用 System.ComponentModel.DataAnnotations 库的强类型 ViewModel 对象。您可以注释 ViewModel 类的每个属性，然后 Razor 将读取注释并进行适当的验证。然后，在您的控制器中，您只需在回发工作之前检查 if (ModelState.IsValid)。比使用 AutoMapper 将 ViewModel 属性映射到模型。

下面是一个使用 System.ComponentModel.DataAnnotations 的 ViewModel 示例：

```
public class PropertyViewModel
{
    public int Id { get; set; }
    [Required]
    public PropertyType PropertyType { get; set; }
    [Required]
    public string Address { get; set; }
    [Required]
    public string City { get; set; }
    [Required]
    public StateFullName State { get; set; }
    [Required]
    public string Zip { get; set; }
} 
```

将此添加到您的视图中：

```
@model PropertyViewModel 
```

# debian - 哪个程序在 debian 挤压上调用 dhclient？

> ID：14720571
> 
> 赞同：4
> 
> 时间：2013-02-06T02:23:09.710
> 
> 标签：debian, dhcp

我很好奇哪个程序在 Debian Squeeze 上调用 dhclient？

我怀疑它是 NetworkManager，但事实并非如此。由于我已将其删除（apt-get remove NetworkManager）并重新启动计算机。

dhclient 程序照常运行。看：

```
~$ ps aux|grep dhclient

root      2042  0.0  0.0   2332   532 ?        Ss   09:47   0:00 dhclient -v -pf /var/run/dhclient.eth0.pid -lf /var/lib/dhcp/dhclient.eth0.leases eth0 
```

我也 grep for `dhclient`in`/etc`但没有足够的提示（没有找到调用者）。

如何在 Debian Squeeze 上调用 dhclient 程序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T04:40:27.007

它在 ifupdown 中编码。

[http://packages.debian.org/stable/ifupdown](http://packages.debian.org/stable/ifupdown)

下载源和

> 制作inet.c

检查函数 dhcp_up() ：

```
static int dhcp_up(interface_defn *ifd, execfn *exec) {
{
  if (!execute("[[ifconfig %iface% hw %hwaddress%]]", ifd, exec)) return 0;
}
if ( execable("/sbin/dhclient3") ) {
  if (!execute("dhclient3 -pf /var/run/dhclient.%iface%.pid -lf /var/lib/dhcp3/dhclient.%iface%.leases %iface%", ifd, exec)) return 0;
}
else if ( execable("/sbin/dhclient") ) {
  if (!execute("dhclient -v -pf /var/run/dhclient.%iface%.pid -lf /var/lib/dhcp/dhclient.%iface%.leases %iface%", ifd, exec)) return 0;
}
else if ( execable("/sbin/pump") && mylinuxver() >= mylinux(2,1,100) ) {
  if (!execute("pump -i %iface% [[-h %hostname%]] [[-l %leasehours%]]", ifd, exec)) return 0;
}
else if ( execable("/sbin/udhcpc") && mylinuxver() >= mylinux(2,2,0) ) {
  if (!execute("udhcpc -n -p /var/run/udhcpc.%iface%.pid -i %iface% [[-H %hostname%]]            [[-c %client%]]", ifd, exec)) return 0;
}
else if ( execable("/sbin/dhcpcd") ) {
  if (!execute("dhcpcd [[-h %hostname%]] [[-i %vendor%]] [[-I %client%]]            [[-l %leasetime%]] %iface%", ifd, exec)) return 0;
}
return 1;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T03:17:28.600

`ifupdown`（配置文件：）`/etc/network/interfaces`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T03:13:53.713

您必须禁用 dhcp 并为您的接口设置静态 IP 地址

这可以在**/etc/network/interfaces中完成**

改变：

```
# The primary network interface
allow-hotplug eth0
auto eth0
iface eth0 inet dhcp 
```

至：

```
# The primary network interface
allow-hotplug eth0
auto eth0
iface eth0 inet static
  address 192.168.0.1
  netmask 255.255.255.0 
```

重新启动后，dhclient 应该消失了。

# apache - 如何使用 Apache HTTP 保护 SVN 存储库的每个子目录？

> ID：14720578
> 
> 赞同：0
> 
> 时间：2013-02-06T02:23:54.660
> 
> 标签：apache, svn, ldap

我已经通过使用 Apache HTTP、mod_authnz_ldap 来保护每个 SVN 存储库，如下所示： -

```
<Location /svn/myProject/>
    ...
    Require ldap-group some-group
</Location> 
```

无论如何，我想保护 myProject 下的一些子目录，例如

```
<Location /svn/myProject/document>
    ...
    Require ldap-group sa-group
</Location>

<Location /svn/myProject/code>
    ...
    Require ldap-group dev-group
</Location> 
```

请注意，所有团队成员都允许使用项目根目录和其他子目录。

```
<Location /svn/myProject/>
    ...
    Require ldap-group sa-group
    Require ldap-group dev-group
    Require ldap-group team-member-group
</Location> 
```

关于上述配置，我无法保护 team-member-group 访问代码和文档。我不确定我是否做错了什么，希望您的帮助能给我一些启发。非常感谢您提前提供的帮助。我期待着尽快收到您的来信。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:13:29.803

通常我们不会这样“保护”。

在使用 HTTP 时，我们一般使用 mod_svn_authz，并配置授权文件。但是，根据您之前的解决方案，缺点是默认情况下我们不使用 ldap 组。（我相信应该有一些方法可以利用 ldap 组来维护 authz 文件）

使用 svn authz 文件，它是直截了当的，类似于：

```
[/]
*=
@sa-group=rw
@dev-group=rw
@team-member-group=rw

[/doc]
*=
@sa-group=rw

[/code]
*=
@dev-group=rw 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T07:23:48.490

恐怕你在路上会遇到比现在更多的麻烦

我从未尝试过、听说过并且无法预测SVN-WebDAV 位置`<location>` **以下**的重载结果（通常它们是从根定义提供的）

为了澄清（对我来说）

*   是 myProject：单个存储库，存储库树的父目录（您如何在 Aapache 中定义 SVN 位置：使用 SVNPath 为每个存储库单独的位置或使用 SVNParenPath 的公共基础）？
*   您能否接受并使用“混合”解决方案和手工工作 - mod_authz_svn 为从 LDAP 组准备的组提供基​​于路径的授权？

也许，由于特定于 SVN 的限制，您将无法将 mod_authnz_ldap 用于授权阶段，只能用于身份验证阶段 - 基于路径的授权的所有（我知道的）来源都建议仅使用 mod_authz_svn

也许[“mod_authz_svn 和 AD 组同步”](http://blogs.freebsdish.org/tmclaugh/2010/07/20/mod_authz_svn-and-ad-group-synchronization/)（快速谷歌搜索的结果）博客文章对你有用

# hadoop - Hadoop 配置 - hdfs-site.xml：我应该在 namenode 和 datanode 上使用相同的文件吗？

> ID：14720581
> 
> 赞同：0
> 
> 时间：2013-02-06T02:24:33.180
> 
> 标签：hadoop, configuration-files, hdfs

在分布式 Hadoop 集群上，我可以将相同的 hdfs-site.xml 文件复制到 namenodes 和 datanodes 吗？

我见过的一些设置说明（即 Cloudera）说在 datanodes 上的这个文件中有 dfs.data.dir 属性，在 namenode 上的这个文件中有 dfs.name.dir 属性。这意味着我应该有两份 hdfs-site.xml，一份用于名称节点，一份用于数据节点。

但是，如果一切都一样，我宁愿只拥有/维护文件的一份副本，并在我更改它时将其推送到所有节点。在同一个文件中同时拥有 dfs.name.dir 和 dfs.data.dir 属性是否有任何危害/风险？如果数据节点看到 "dfs.name.dir" 的属性，可能会发生什么问题？如果有问题，namenode 上的 hdfs-site.xml 文件中应该有哪些其他属性，而不是 datanode 上的？反之亦然。

最后，我复制到客户端机器的 hdfs-site.xml 文件中需要包含哪些属性（它不是 tasktracker 或 datanode，只是与 Hadoop 集群对话）？

我四处搜索，包括 O'reilly 操作书，但找不到任何描述配置文件如何在不同节点之间有所不同的好文章。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:58:22.987

namenode 是从 masters 文件中提取的，因此即使您复制了相同的 hdfs-site.xml，FSimage 和编辑日志也只会写入 namenode 而不会写入 datanode。

对于第二个问题..如果不直接在集群上，您不一定可以与 hdfs 通信。如果您想拥有一个远程客户端，您可以尝试使用 webhdfs 并创建某些 Web 服务，您可以使用这些服务在 hdfs 中写入或访问文件

# jquery - django ajax 将模板作为数据返回

> ID：14720586
> 
> 赞同：0
> 
> 时间：2013-02-06T02:25:24.267
> 
> 标签：jquery, python, ajax, django, django-templates

当向视图发出 ajax 请求时，您如何将模板数据返回给 jquery 调用。

例如，我正在以这种方式进行 ajax 调用。

```
<script>
  function getProfile(username) {
     $.getJSON("/profiles/"+username, { username:{{ username }}}, function(json){
                            alert("Was successful?: " + json['success']);
                        });
                    }
   function addClickHandlers() {
           $(".person-name").click( function()
                getProfile(result.user.username) });
                    }
                    $(document).ready(addClickHandlers);
  </script> 
```

我的 Django 视图

```
def profiles_view(request, username):
#    if username:
#        selected_user = User.objects.get(username = username)
    results = {'success':False}
    if request.method == u'GET':
        GET = request.GET
        if GET.has_key(u'username'):
            results = {'success':True}
    json = simplejson.dumps(results)

    return HttpResponse(json, mimetype='application/json') 
```

我可以将我的模板视图传递`profiles_view.html`给 HttpResponse 吗？我不确定我的模板在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:32:36.707

如果您需要 HTML 视图和 JSON 视图，则可能需要两个响应。第一个是从`TemplateResponse`，第二个是从`HttpResponse`。两个请求似乎效率低下，但第一个请求是一次性的，之后您只需要使用 AJAX 请求的 JSON 响应。

您可以通过以下方式返回模板：

```
 return TemplateResponse(request, "profiles_view.html", results) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T02:52:28.653

如果您只是要通过 ajax 传递数据，则不需要模板。

# java - 将 int 转换为字节 - Java 和 Actionscript 中的不同结果

> ID：14720587
> 
> 赞同：1
> 
> 时间：2013-02-06T02:25:52.067
> 
> 标签：java, actionscript, integer, byte

我想将整数转换为字节。我在 Actionscript 中有一个示例，我需要将其转换为 Java。为简单起见，我们假设只有一个数字 1234。这是我的 Java 代码：

```
int[] a = {1234};
ByteBuffer byteBuffer = ByteBuffer.allocate(a.length * 4);
IntBuffer intBuffer = byteBuffer.asIntBuffer();
intBuffer.put(a);
byte[] array = byteBuffer.array();
for (int i=0; i < array.length; i++) {
    Log.i(T, i + ": " + array[i]);
} 
```

这给了我以下结果：

```
0 : 0
1 : 0
2 : 4
3 : -46 
```

在 Actionscript 中，我有这个：

```
var c:ByteArray = new ByteArray;
c.writeInt(1234);
for(var p:uint=0; p<c.length; p++) {
    trace(p+" : "+c[p]);
} 
```

结果：

```
0 : 0
1 : 0
2 : 4
3 : 210 
```

我做错了什么，为什么结果不同？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T02:30:55.880

Java 使用**无符号**字节。

默认情况下， ActionScript 可能**已签名**。

```
3 : -46 //signed
3 : 210 //unsigned 
```

这可以将每个字节打印为无符号：

```
System.out.println((b < 0 ? 256 + b : b)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T02:31:22.587

在java中，一个字节在转换为另一种类型时总是被认为是有符号的。这就是为什么你看到一个负数。

尝试：

```
Log.i(T, i + ": " + (array[i] & 0xff)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T02:51:41.837

如果你转换`-46 to a hex`你会得到`0xD2`wich 可以转换回`210`. 这就是无符号整数和有符号整数之间的区别。

所以结果确实是相等的（虽然相等，但不相同）只要两个代码产生相同的字节（D2），你就可以开始了。

哦，如果您不确定，只需让两个代码都提供十六进制值而不是结果的十进制值，或者确保两者都返回有符号或无符号整数，而不是如上所述，那么您将得到相同的结果；）

例如，使用这些方法检查 actionscript 中的 c：

```
readInt()
and
readUnsignedInt() 
```

你应该看到 readint 返回 -46 和 readunsignedint 210

# google-app-engine - Google App-Engine Objectify 实体可以有多个@Id 字段吗？

> ID：14720589
> 
> 赞同：2
> 
> 时间：2013-02-06T02:25:54.033
> 
> 标签：google-app-engine, google-cloud-datastore, objectify

我想知道一个 Objectify 实体是否有多个 ID。

我不完全知道 an 是如何`@Index`工作的，但我想它也用于排序目的。

我有一个实体，它有两个字段，与其他字段相比，它具有唯一性，因此它们都可以是`@Id`，但它们小于 ，`@Index`因为它们不应该用于范围或不等式查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:45:46.870

不，一个带`@Entity`注释的类只能有一个`@Id`字段，可以是：

*   `long`
*   `Long`
*   `String`

只有`Long`类型会在保存时自动生成一个值。

您可以构建自己的对象，该对象具有`toString()`尊重两个唯一字段的排序顺序的表示。该`toString()`值可用于`String`类型`@Id`字段，例如

```
@Id
String myCustomId; 
```

在保存之前，必须将此字段设置为您的新实体。

# jquery - 淡入/淡出在 IE 中不起作用

> ID：14720591
> 
> 赞同：0
> 
> 时间：2013-02-06T02:25:57.647
> 
> 标签：jquery, fadein, fadeout

我刚刚上传了一个新站点，过了一会儿（我的错）注意到导航菜单上的淡入/淡出效果在 IE 上不起作用。它让我发疯，因为它在所有其他浏览器中都能完美运行。任何想法为什么？

这是该网站的链接：[http](http://www.sveiki-constructions.com) : //www.sveiki-constructions.com 这是 jquery：

```
$(document).ready(function(){
    function preload(arrayOfImages) {
            $(arrayOfImages).each(function(){
               $('<images/>')[0].src = this;

    });
    }
    preload([
    'home_default.jpg',
    'home_lowbudget.jpg',
    'home_coldroom.jpg',
    'home_cleanroom.jpg',
    'home_distribution.jpg',
    'home_distribution.jpg',
    'home_mini.jpg',
    'home_panels.jpg'

    ]);

    $('.link ').hover(
        function(){
            $(this).css({'background-color':'#333333'});

            var imgloc= $(this).find('a').attr('alt');
            var oldpic =$('.homeContainer .image img');
            var oldsrc= $(oldpic).attr('src');
            var newpic =$('<img src="images/' + imgloc + '.jpg">');
            var newsrc= $(newpic).attr('src');

            if(newsrc !== oldsrc){
                $('.homeContainer .image').prepend(newpic);
                newpic.hide();
                newpic.fadeIn(500); 
                oldpic.fadeOut(500, function(){
                    $this.remove();
                });
                }

            },
            function(){
            $(this).css({'background-color':'#1c3261'});
            })

        $('.homeContainer .image').prepend('<img src="images/home_default.jpg">');

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:31:27.503

根据这篇[文章](https://stackoverflow.com/a/1322628/1012381)，您可能需要将过滤器添加到您的 CSS 中：

```
$('<your menu selector>').css('filter', 'alpha(opacity=0)'); // or 100 for fadeout 1st 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T02:37:54.963

IE 控制台显示“$this”未定义。

您的 fadeOut 有错误，请尝试将其替换为：

```
 oldpic.fadeOut(500, function(){
     $(this).remove(); 
 }); 
```

# iphone - 能够将图像上传到日历的 iphone 应用程序

> ID：14720592
> 
> 赞同：0
> 
> 时间：2013-02-06T02:25:59.133
> 
> 标签：iphone, xcode, xcode4.5

嗨，我已被联系创建一个应用程序，该应用程序允许用户每天或每周上传图像，并附上描述和标题，并将这些图像添加到日历中。然后可以按顺序或通过日历查看图像。

我对应用程序开发很陌生，到目前为止只做过基本的应用程序。创建一个如此规模的应用程序有多难？任何人都可以推荐任何可能有帮助的教程吗？我还要看什么样的时间框架？

任何反馈将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:15:54.390

答案是**你不能**。iOS 日历事件无法附加图像。您必须编写日历应用程序。

# alloy - 合金通用套装

> ID：14720596
> 
> 赞同：0
> 
> 时间：2013-02-06T02:26:48.103
> 
> 标签：alloy

如果我有一组特定的信号，例如我制定了一组 closed_Switches。我可以得到一组open_switches（或所有未关闭的开关）如下

```
some x:Switch |  x = (univ - closed_switches)  =>  "and then imply something on x" 
```

刚开始使用合金，这是解决这个问题的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T06:17:22.327

如果您的意思是所有打开开关的集合，则使用包含的表达式

```
Switch - closed_switches 
```

你可以给它一个名字：

```
let open_switches = Switch - closed_switches | ...stuff about open_switches... 
```

如果您想使用一个打开的开关，那么类似：

```
some x : Switch - closed_switches | ...stuff about x... 
```

# visual-studio - 在调试输出窗口中禁用噪音消息 - Visual Studio 2012

> ID：14720599
> 
> 赞同：65
> 
> 时间：2013-02-06T02:27:28.857
> 
> 标签：visual-studio, visual-studio-2012, visual-studio-debugging

如何在 Visual Studio 2012 的调试输出窗口中禁用消息？

> 线程 '' (0x2360) 已退出，代码为 0 (0x0)

由于此类消息的数量如此之多，它们困扰着我并隐藏了我使用`Debug.Write`. 我应该使用红色突出显示我的自定义调试信息吗？

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-02-06T02:38:48.333

右键单击`Output`窗口进行`Debug`选择；您可以在此处选择要查看的消息类型。

在您提供的示例中，该`Thread Exit Messages`选项将被禁用。

![在此处输入图像描述](../Images/63b10c91765c72de3577bf7a0a89c52f.png)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-02-17T17:00:00.673

您也可以随时通过在快速启动栏（VS 右上角）中搜索并搜索“输出窗口”来访问这些设置。无论输出窗口的当前上下文如何，这都会显示输出窗口的设置。

![在此处输入图像描述](../Images/684298c78683c5e71a386a79f68d56a5.png)

# sql - 如何使用 Oracle SQL Developer 3.0 为 Oracle 表编写 GRANT 语句？

> ID：14720604
> 
> 赞同：0
> 
> 时间：2013-02-06T02:28:19.817
> 
> 标签：sql, oracle, plsqldeveloper

有谁知道如何使用 Oracle SQL Developer 3.0 为一个表编写一个 Oracle 表以及脚本中的 GRANT 语句？我似乎无法让 GRANT 出来。这就是我所做的：

1.  右键单击表格
2.  选择导出导出向导出现。
3.  导出 DDL 已检查
4.  导出数据未选中
5.  已检查赠款
6.  单击“下一步”继续创建脚本。

创建脚本时，我看不到表权限。

我错过了什么？我无法让它与旧的 ve 一起使用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T01:44:30.803

这是固定的。DBA 让我担任正确的角色，以便编写此信息。

# php - Smarty - 我如何设置最大（5）页以显示来自呼叫查询的分页

> ID：14720608
> 
> 赞同：0
> 
> 时间：2013-02-06T02:28:46.857
> 
> 标签：php, jquery, html, mysql, sql

想知道如何设置查询的最大结果数，例如，如果有超过 10 个结果页面显示 1、2、3、4、5...和最后一个（10）等等。我正在使用 smarty并且不知道如何进行工作。

```
 <!-- .pagination starts -->
                <div class="pagination-wrapper1">
                        <ul class="pagination">

                            {if $active_page eq $smarty.section.page_num.index+1}
                                <li class="previous-off"><i class="icon-arrow-left"></i> Previous</li>
                            {else}
                                <li class="previous-on"><a href="#" onclick="ajax_reload_ct_function({$active_page-1})"><i class="icon-arrow-left"></i> Previous</a></li>
                            {/if}

                            {section name="page_num" loop=$pages}
                                {if $active_page eq $smarty.section.page_num.index+1}
                                    <li class="active">{$smarty.section.page_num.index+1}</li>
                            {else}
                                    <li><a href="#" onclick="ajax_reload_ct_function({$smarty.section.page_num.index+1})">{$smarty.section.page_num.index+1}</a></li>
                            {/if}
                            {/section}

                            {if $active_page eq $smarty.section.page_num.index}
                                <li class="next-off">Next <i class="icon-arrow-right"></i></li>
                            {else}
                                <li class="next"><a href="#" onclick="ajax_reload_ct_function({$active_page+1})">Next <i class="icon-arrow-right"></i></a></li>
                            {/if}

                            <div class="clear"></div>
                        </ul>
                    </div><!-- /.pagination ends --> 
```

这就是我的分页目前的工作方式：

![提供代码的当前分页](../Images/742b47f2c7fba1b96be87c52c89105f5.png)

这是一个应该如何做的例子……希望有人能提供帮助。

![在此处输入图像描述](../Images/26bbc9ae617ddd3740480e6183c4ddc8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:50:04.797

我不知道聪明。我认为它是某种模板引擎。

但我可以告诉你如何用 php 来做。

所以在分页中，您将始终知道您当前所在的页面。所以在这种情况下，您在第 39 页。

你可以做的是运行两个循环，一个将当前页面的值递减 5 次，比如

38 37 36 35 34 在页面中

另一个将使当前页面增加 5

40 41 42 43 44 在同一页

所以你的页面会在同一个 div 中回显这些，所以你最终会得到显示 aboe 的分页。

当然，您需要进行检查以确保在递减值时不会低于 1

并且在增加值时不会超过最大页面。

希望这对您有所帮助。

或者

您可以从 current_page -5 开始运行一个循环，一直到 current_page+5

我相信您可以调整逻辑以显示 5 页而不是 10 页

# c# - ASP.Net MVC 4 Bundles - 在路径名中使用变量

> ID：14720609
> 
> 赞同：4
> 
> 时间：2013-02-06T02:29:17.937
> 
> 标签：c#, asp.net

我正在尝试使用 MVC4 的捆绑组件生成动态 css 路径 - 类似于下面的路径，其中“VARIABLE”根据运行时值更改。

有没有办法做到这一点？

```
<link rel="stylesheet" href="/assets/css/brand/VARIABLE/global/global.css"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T02:56:31.173

这就是你要找的吗？下面的代码只是获取`theme`配置设置的值：

```
public static void RegisterBundles(BundleCollection bundles)
{
  bundles.Add(new StyleBundle("/~Content/css").
    Include(String.Format("~/Content/{0}/site.css",
    ConfigurationManager.AppSettings("theme"))));

} 
```

在您看来，只需致电`Styles.Render`：

```
@Styles.Render("~/Content/css"); 
```

如果您需要使用配置设置以外的其他值，我想您将需要一个返回相应值的静态方法。

# javascript - 将 RTF 转换为纯文本并返回 rtf

> ID：14720611
> 
> 赞同：0
> 
> 时间：2013-02-06T02:29:26.257
> 
> 标签：javascript, jquery, jquery-ui, yui

我目前正在研究用于协作编辑文档的操作转换模型。我已经实现了一个自定义形式的 YUI 编辑器，以提供富文本编辑。我能够轻松地从输入的富文本中解析纯文本，这用于进行插入/删除操作以进行协作编辑。但是要重建原始 rtf 格式，我需要重新插入标签（例如：**..**等）。有谁知道可以让我轻松完成的工具/库/在线编辑器？

提前感谢您的任何回复

# javascript - javascript中的质量子集记录对象

> ID：14720612
> 
> 赞同：0
> 
> 时间：2013-02-06T02:29:27.343
> 
> 标签：javascript, jquery, performance, node.js, d3.js

我正在寻找从 javascript 对象中提取元素子集的最有效方法。假设我有很多 javascript 对象形式的记录

```
var records = [
  { foo: 123, bar: 456, baz: 789, boo: [1,2,3] },
  { foo: 345, bar: 754, baz: 853, boo: [4,3,2] },
  { foo: 321, bar: 234, baz: 443, boo: [5,2,1] }
] 
```

对于这些对象中的每一个我想提取相同的键，它们存储在一个数组中，例如

```
var keys = ["bar", "boo"] 
```

这样做的本机方式是

```
out = [];
for(var i = 0; i < records.length; i++){
  out[i] = {};
  for(var j = 0; j < keys.length; j++){
    var field = keys[j];    
    out[i][field] = records[i][field]
  }
}
console.log(out) 
```

有更快/更优雅的方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:19:13.013

对于您的问题，我想不出更好的 Big O 表示法，但是查看当前数据，一个好的算法可能不是您的主要关注点？

在 ECMA 脚本 5 中，基础对象包含一个 keys 方法：

```
a = {a: '1', b: '2', c: '3'}
Object.keys(a)
// [ 'a', 'b', 'c' ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:05:38.280

不确定速度，但更简洁的表示法可能是（假设所有键都存在于每条记录中）：

```
var out = records.map(function(v) {
  return keys.reduce(function(o, k) {
    return (o[k] = v[k], o);
  }, {});
}); 
```

# jquery - Opentip 读取表格 td 元素标题属性并显示为内容

> ID：14720617
> 
> 赞同：0
> 
> 时间：2013-02-06T02:29:52.553
> 
> 标签：jquery, prototype, opentip

```
<table id="universal-radio-program" title="Uzej ar pelīti uz nosaukumu, lai redzētu aprakstu...">
        <thead>
        <tr><th>&nbsp;</th><th scope="col">Pirmdiena</th><th scope="col">Otrdiena</th><th scope="col">Tre&scaron;diena</th><th scope="col">Ceturtdiena</th><th scope="col">Piektdiena</th><th scope="col">Sestdiena</th><th scope="col">Svētdiena</th><th>&nbsp;</th></tr>
        </thead>
        <tbody>
        <tr>
        <td>00</td>
        <td title="Dance / Hands Up, Trance, New Tunes..." rowspan="2" colspan="4">Prepare for Morning</td>
        <td title="Presents by Universal Radio X selection...">Take The Chance Of Dance with Universal Radio</td>
        <td title="Universal Radio DJ Team Lives...">URDT Live Sets</td>
        <td title="Universal Radio DJ Team Lives...">&nbsp;</td>
        <td><strong>00</strong></td>
        </tr>
        <tr>
        <td>01</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>01</td>
        </tr>
        <tr>
        <td>02</td>
        <td title="Progressive, Trance, Techtrance, Hard Trance tunes...">Trance Edition!</td>
        <td title="Progressive, Trance, Techtrance, Hard Trance tunes...">&nbsp;</td>
        <td title="Progressive, Trance, Techtrance, Hard Trance tunes...">&nbsp;</td>
        <td title="Progressive, Trance, Techtrance, Hard Trance tunes...">&nbsp;</td>
        <td title="Progressive, Trance, Techtrance, Hard Trance tunes...">&nbsp;</td>
        <td title="Progressive, Trance, Techtrance, Hard Trance tunes...">&nbsp;</td>
        <td title="Progressive, Trance, Techtrance, Hard Trance tunes...">&nbsp;</td>
        <td>02</td>
        </tr>
        </tbody>
        <tfoot>
        <tr><th scope="row">&nbsp;</th>
        <td>Pirmdiena</td>
        <td>Otrdiena</td>
        <td>Tre&scaron;diena</td>
        <td>Ceturtdiena</td>
        <td>Piektdiena</td>
        <td>Sestdiena</td>
        <td>Svētdiena</td>
        <th>&nbsp;</th></tr>
        </tfoot>
        </table> 
```

下面是一些例子：

[http://jsfiddle.net/Hwb2S/1/](http://jsfiddle.net/Hwb2S/1/)

我想 Opentip 读取表格`td`元素标题属性并显示为分组 opentip 内容。并删除默认标题属性。

我更喜欢的适配器是**原型**，也可以是**jquery**。

所有关于**opentip 的信息**：[http ://www.opentip.org](http://www.opentip.org)

请使用您的解决方案在**jsfiddle中更新。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T01:23:03.007

我很困惑为什么你不能把这些转换成 Opentip 识别的标题标签。实际上，你已经完成了 90% 的工作。只需做一个小调整，你就在那里

```
<td data-ot="Progressive, Trance, Techtrance, Hard Trance tunes...">Trance Edition!</td> 
```

# ruby-on-rails - Rails 模型通过控制器

> ID：14720621
> 
> 赞同：0
> 
> 时间：2013-02-06T02:30:34.387
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

创建模型函数时，控制器会看到它吗？

我有一个模型，我有以下功能

```
before_create :check_exists
attr_accessible :customer_id, :event_id
#RELATIONSHIP
  belongs_to :customer
  belongs_to :event

  private
    def check_exists
    present = Present.find_or_create_by_customer_id_and_event_id(:customer.id => current_customer.id, :event_id => self.event_id)
    end 
```

我怎么知道 self.event_id 正在被正确使用，我如何正确调用这个资源

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:40:29.093

*是的，可以通过控制器访问该方法。*

`:customer_id`并且`:event_id`应该是模型实例的两个属性，因此它们将在您的方法中相应地使用。您所要做的就是`check_exists`从任何`Present`实例（不是`Present`类，因为它没有声明为静态方法）调用。

运气。

# php - Slim 框架停止错误代码不起作用

> ID：14720622
> 
> 赞同：0
> 
> 时间：2013-02-06T02:30:37.573
> 
> 标签：php, curl, http-status-codes, slim, httpfox

我刚刚用 Slim 框架构建了一个宁静的 API。对于错误情况，我只需针对每个错误情况使用适当的错误代码进行响应，并使用 $app->halt 进行调用，例如：

```
$app->halt(403, "Unauthorized"); 
```

但是，当我使用 -v 卷曲我的 API 并使用 HTTPFox 在 Firefox 中查看标头时，我总是看到错误代码 500。其他人注意到了吗？有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-18T04:12:21.873

I ran into this same issue myself recently because I had forgotten to instantiate the $app variable within my function.

If you are not explicitly stating for your function to use($app), try adding the following line before $app-halt(403, 'Unauthorized') in order to see the desired error code:

```
$app = Slim::getInstance(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T22:14:39.997

不允许在路由回调之外调用 halt() 方法。你应该这样使用；

```
$app->get('/method/', function () {
  //logical controls
  //do something
    //or
  $app->halt();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-19T10:03:30.747

halt() 和 setStatus() 是有区别的。

使用**halt()**，您将*停止*当前脚本执行并根据您选择发送的 HTTP 状态代码和消息呈现响应。您可以使用以下代码在应用程序的任何位置执行此操作：

```
$app = \Slim\Slim::getInstance(); //if you don't have access to $app
$statusCode = 403;
$body = 'Unauthorized';
$app->halt($statusCode, $body);
//App will stop immediately 
```

使用**setStatus()**或**$this->response->status();** 您只会更改您发送的 HTTP 状态代码，但您的应用程序将继续正常执行并且不会停止。它只是更改 Slim 在路由执行结束时将发送给您的客户端的标头。

```
$app = \Slim\Slim::getInstance(); //if you don't have access to $app
$statusCode = 403;
$app->response->setStatus(400);
//App will continue normally 
```

# c# - 如何验证使用 S3Reader 为 Imageresizer 调用的亚马逊网址？

> ID：14720628
> 
> 赞同：0
> 
> 时间：2013-02-06T02:30:59.367
> 
> 标签：c#, asp.net-mvc, imageresizer

我正在使用带有 ImageResizer 的 S3Reader 插件来读取来自亚马逊的调整大小的图像。

我无法让它在我的生产环境中工作，主要是因为我无法看到幕后发生的事情。

我已经添加了大量的日志记录，并且我知道 ImageMissing 事件正在被触发，当我请求预期的图像时。

如果我手动检查 url 那里的图像，那么我唯一能想到的是通过 S3Reader 插件处理 ImageResizer 的某个地方？

那么如何查看 ImageResizer 用于从 Amazon 请求图像的 Url 呢？

我怀疑因为我的存储桶位于 AisaPac 地区，所以它没有使用正确的 url？

需要注意的一些事情，我只处理`media`子域上的图像并重新编写 url（这也会影响它吗？）

我要遵循的代码和配置：

```
 <resizer>
    <diskcache dir="~/app_data" autoClean="true" />
    <clientcache minutes="1440" />
    <plugins>
      <add name="MvcRoutingShim" />
      <add name="S3Reader" buckets="media.domain.com" useSubdomains="true" />
      <add name="DiskCache" />
    </plugins>
  </resizer>

private static void ImageResizer_ReWrite(IHttpModule sender, HttpContext context, IUrlEventArgs args)
{
    string subDomain = context.Request.Url.SubDomain();

    if (string.IsNullOrWhiteSpace(subDomain) || subDomain != AppSettings.MediaSubDomain)
        return;

    args.VirtualPath = string.Format("/s3/{0}", AppSettings.AmazonS3BucketName) + args.VirtualPath;
    Logger.Error("New VirtualPath: " + args.VirtualPath);
}

private static void ImageResizer_OnPostAuthorizeRequestStart(IHttpModule sender2, HttpContext context)
{
    var subDomain = context.Request.Url.SubDomain();

    if (string.IsNullOrWhiteSpace(subDomain) || subDomain != AppSettings.MediaSubDomain)
        return;

    Config.Current.Pipeline.SkipFileTypeCheck = true;
    Config.Current.Pipeline.ModifiedQueryString["cache"] = ServerCacheMode.Always.ToString();
    Logger.Error("ImageResizer Process: " + context.Request.RawUrl);
} 
```

调试跟踪中没有警告或错误，当我希望返回图像时收到 404。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T09:41:54.603

Amazon S3 建议使用子域地址方法来确保非美国区域的最佳性能 - 这是 S3Reader 默认执行的操作（您也已启用）。

因此，您的存储桶名称不能有句点或前导短划线（但您可以嵌入短划线）。

假设 AmazonS3BucketName 的值为“media.domain.com”，这将是图像查找失败的原因。

请参阅[S3Reader 插件文档页面](http://imageresizing.net/plugins/s3reader)底部的*存储桶命名*说明。

# bash - 如何通过管道将 STDERR 传输到在 bash 内运行的应用程序的 STDIN？

> ID：14720630
> 
> 赞同：1
> 
> 时间：2013-02-06T02:31:18.107
> 
> 标签：bash, node.js, shell

我有一个网关 bash 脚本。发送到 STDERR 的数据是我想要通过 bash 脚本（nodejs 脚本）启动的应用程序的标准输入的数据。

这是我正在尝试做的事情的一个想法...... bash-gateway.sh：

```
#since STDERR will not continuously send data, i put a neverending while loop
#to wait for data to be present.
while (true);
do

#Read the data from STDERR and send it to server.js STDIN
cat /dev/fd/2 | node server.js;

done; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T02:53:28.210

您还没有真正说出*是什么*向 Bash 脚本发送信息。所以我会假设它是`foo`这个答案的程序。[**话虽如此，如果您只需要STDERR**](http://mywiki.wooledge.org/BashFAQ/047)，您应该可以做这样的事情[](http://mywiki.wooledge.org/BashFAQ/047)

 **```
foo 2>&1 >/dev/null | node server.js 
```

如果您不介意同时管道 STDERR 和 STDOUT 这会更简单

```
foo |& node server.js 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T02:55:47.383

这就是管道的用途。

```
mkfifo needed_stderr
somecommand 2>needed_stderr
node server.js <needed_stderr 
```**

# ios - 将 facebook SDK 从 2.x 升级到 3.1

> ID：14720631
> 
> 赞同：1
> 
> 时间：2013-02-06T02:31:18.737
> 
> 标签：ios, facebook, facebook-graph-api, facebook-ios-sdk

我重新提出问题。除非您有正当理由，否则请不要投反对票。奇怪的是有人有类似的问题并被投票赞成。

我的问题：在 iOS 中将 sdk 2.x 迁移到 3.1 时我遇到了真正的困难，没有指南，我在互联网上搜索也没有运气。FB SDK 2.0 与 3.0 非常不同，所以基本上我需要一些文档来将现有项目的 fb SDK 从 2.x 升级到 3.0。他们只有从 3.0 升级到 3.1 的指南。我尝试按照安装说明删除旧 SDK 并添加 SDK 3.0，但一切都失败了

我所问的只是升级 sdk 版本的指南/教程。我找不到有关此的文档/讨论。

另外，有人知道 Facebook SDK for ios 什么时候会被弃用？

谢谢

托尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:29:26.737

我目前正在更新我的应用程序您提到的 sdk 很棒[https://developers.facebook.com/docs/tutorial/iossdk/upgrading-from-2.0-to-3.1/](https://developers.facebook.com/docs/tutorial/iossdk/upgrading-from-2.0-to-3.1/)，它解释了一切，甚至解释了如何转移以前的令牌到新的 sdk。

我建议先看升级教程以了解新的 sdk，然后再阅读初学者教程，它有助于理解其他内容。

唯一的流程是没有很好描述的开放图，新的sdk中仍然没有对话框，但它们应该很快就会出来祝你好运

# ruby-on-rails - 使用 Devise 添加 TOS 协议复选框

> ID：14720634
> 
> 赞同：11
> 
> 时间：2013-02-06T02:31:32.123
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, devise, ruby-on-rails-3.2

我们正在为我们的成员使用设计。我们在成员模式中添加了一个 tos_agreement 字段（布尔值），并将其添加到`views/devise/registrations/new.html.haml`.

在 Member 模型中，我们有一个验证规则如下：

```
validates_acceptance_of :tos_agreement, :allow_nil => false,
  :accept => true 
```

它工作正常 - 如果您不接受 TOS，则无法注册。

但是，问题在于编辑您的设置。如果你去`/members/edit`你会得到一个表格，你可以在其中更改你的电子邮件地址或密码。TOS 协议没有字段，因为此时不应更改。但是，当您进行更改（例如更改密码）并提交表单时，它会返回一条错误消息，即 TOS 协议不能为假。

我们如何告诉它在第一次注册后永远不要尝试修改 TOS 协议？

**编辑：**所以我认为根本问题是我们的 attr_accessible 中有 :tos_agreement，现在我想这是一个非常糟糕的主意。但是如果我们删除它，我们如何修改 Devise 以接受参数并使用它做一些事情，即使它不是质量可分配的？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-06T04:57:19.640

您可以将 :on => :create 选项传递给验证器，以便仅在注册时检查它：

```
validates_acceptance_of :tos_agreement, :allow_nil => false, :accept => true, :on => :create 
```

# ruby-on-rails - 带导轨的友谊模型 2 方式

> ID：14720635
> 
> 赞同：0
> 
> 时间：2013-02-06T02:31:34.563
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

如何创建一个友谊对象以在控制器中使用它？

为了友谊，我在我的客户中有以下自引用方法，但我希望能够在我的控制器中调用如下内容

```
allevent = Friends.articles.all 
```

我的关系怎么能在这里完成

```
 has_many :friends, :through => :friendships,
           :conditions => "status = 'accepted'" 
```

谢谢你的帮助！

更新我有一个名为 Friendship 的额外模型，并且有如下方法

```
 # Accept a friend request.
  def self.accept(customer, friend)
    transaction do
      accepted_at = Time.now
      accept_one_side(customer, friend, accepted_at)
      accept_one_side(friend, customer, accepted_at)
    end
  end

  # Update the db with one side of an accepted friendship request.
  def self.accept_one_side(customer, friend, accepted_at)
    request = find_by_customer_id_and_friend_id(customer, friend)
    request.status = 'accepted'
    request.accepted_at = accepted_at
    request.save!
  end 
```

我希望它在我的假设中说 POST 控制器索引

我想查看我的朋友创建的所有帖子，如查询已关注

```
@friendspost = Friends.post.all 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T03:12:27.037

试试这个：

```
friends = @user.friends
@posts = Post.where('user_id IN (?)', friends) 
```

如果您只需要朋友的`id`帖子来获取他们的帖子，那么您甚至可以这样做：

```
friends = @user.friends.pluck(:user_id) 
```

**注意：**我不确定你是否有一个命名的模型`user`，所以如果你没有，只需切换`user`到`customer`或任何你的模型。

# jquery - 如何防止 .on('click') 函数对表格行中的链接起作用

> ID：14720637
> 
> 赞同：1
> 
> 时间：2013-02-06T02:31:46.747
> 
> 标签：jquery

我有一个表格，当在该行的文本框和按钮上单击一行时，它的标签会隐藏。我现在在最后一列中添加了一个链接，我需要正常运行，但**不会**导致该行进入“编辑”模式，但只有当链接本身被点击时。

这是一行的代码：

```
<tr class="viewEditRow rowBorder" style="cursor: pointer;">
    <td class="deleteBranch">
        <input type="checkbox" class="chkDeleteBranch" name="deleteBranches[]" value="1"><br>
        <input type="submit" class="cancelListEditBranch edit hideOnLoad" value="Cancel" title="Cancel editing this branch"><br>
        <input type="submit" class="submitListEditBranch edit hideOnLoad" value="Save" title="Save the changes">
    </td>
    <td class="viewEditBranchName">
        <label class="viewBranchName detailDisplay">Atlanta</label>
        <input type="text" class="edit editBox editName hideOnLoad" value="Atlanta"><br>
        <br>
        <label id="lblBranchesListEditError" class="errorMsg"></label>
    </td>
    <td class="viewEditBranchUrl">
        <label class="viewBranchUrl detailDisplay"><a href="http://whub32.webhostinghub.com/~forsyt11/index.php/coverage-area/georgia" class="branchDetailLink" title="Click to go the branch's web page">georgia</a></label>
        <input type="text" class="edit editBox editUrl hideOnLoad" value="georgia">
    </td>
</tr> 
```

此代码隐藏标签并在单击该行时显示文本框和按钮。

```
$('#tblViewEditAllBranches').on('click', 'tr', function(e) {
    $(this).find('td').each(function() {
        $(this).find('.editBox').val($(this).find('.detailDisplay').text());
    });

    // Hide edit elements in other rows and labels in clicked row
    $('#tblViewEditAllBranches tr').not(this).find('.edit').fadeOut(200);
    $('label', this).fadeOut(200);

    // Show labels in other rows and edit elements in clicked row
    $('#tblViewEditAllBranches tr').not(this).find('label').delay(200).fadeIn(200);
    $('.edit', this).delay(200).fadeIn(200);

    e.stopPropagation();
}); 
```

当前发生的情况是，当最后一列中的链接被点击时，该行进入“编辑”模式**，**浏览器加载被点击的 url。

我需要允许链接工作，但是当链接 - 并且*只有*链接 - 被点击时，该行不会**进入**编辑模式，而是加载 url。

我已经尝试了以下代码来尝试完成此操作，但我得到的最接近的是当我使用 return false 时，这根本不是真正的“关闭”，因为它没有跟随 url，但行确实去了进入编辑模式。e.preventDefault 和 e.stopPropagation 似乎都没有任何效果。

```
$('#tblViewEditAllBranches tr').find('label.viewBranchUrl').on('click', 'a.branchDetailLink', function(e) {
    e.preventDefault;
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T09:05:49.453

您应该将函数包装在检查最近单击的元素是否是链接的条件下。

试试这个代码：

```
$('#tblViewEditAllBranches').on('click', 'tr', function(e) {
    if($(e.target).closest('a.branchDetailLink').length == 0){
        $(this).find('td').each(function() {
            $(this).find('.editBox').val($(this).find('.detailDisplay').text());
        });

        // Hide edit elements in other rows and labels in clicked row
        $('#tblViewEditAllBranches tr').not(this).find('.edit').fadeOut(200);
        $('label', this).fadeOut(200);

        // Show labels in other rows and edit elements in clicked row
        $('#tblViewEditAllBranches tr').not(this).find('label').delay(200).fadeIn(200);
        $('.edit', this).delay(200).fadeIn(200);

        e.stopPropagation();
    }
}); 
```

[http://jsfiddle.net/78d4z/](http://jsfiddle.net/78d4z/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T02:35:18.733

要么做

```
return false; 
```

或者

[**`e.stopPropagation();`**](http://api.jquery.com/event.stopPropagation/)

`console.log`可能会派上用场调试这个

`event.stopPropagation`防止事件从被点击的锚点冒泡到它的父级，例如表格行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T02:41:07.733

如果理解正确，这是事件处理程序如何附加的问题。

这样的事情应该排除不需要的事件处理：

```
$('#tblViewEditAllBranches').on('focus', 'label', function(e) {
    // ...
    //your existing code here
    // ...
}); 
```

您可能需要稍微尝试一下 - 这完全取决于您想要什么。

例如，您可以将处理程序附加到除每行中的最后一个之外的每个单元格。

# json - 将 Web API 响应包装在 JSON 中，但仍可与 IQueryable 和 oData 一起使用

> ID：14720641
> 
> 赞同：2
> 
> 时间：2013-02-06T02:32:10.993
> 
> 标签：json, asp.net-web-api, odata, iqueryable

我有一个 ASP.NET Web API 项目，我想在项目中使用 oData 过滤器和 ASP.NET oData 预览包。这意味着我需要`IQueryable`用作响应类型。

不幸的是，消费者需要像这样包装的响应：

```
{
   "total": 2,
   "success": true,
   "data": [ 
           { object1 },
           { object2 } ]
} 
```

我创建了一个包装器对象，它将`IQueryable`原始版本的响应分配给“data”属性，并设置“total”和“success”属性的值。这将创建消费者正在寻找的 JSON 响应。但它不再是 IQueryable，这意味着我无法实现 oData 过滤器。

我希望通过设置它的枚举器等来获取我的包装器对象并使其实现 IQueryable。但是，我认为这不会起作用，因为我必须分配 Provider 和 Expression 属性来实现接口，而我没有知道我应该放什么。我在 IoC 中使用存储库模式，EntityFramework Code First 数据访问位于一个单独的项目中，使用 Ninject 将具体对象分配给接口占位符。也许我可以从数据访问层一直抽象出接口，以便 Repository 对象携带对 IQueryProvider 的引用。您认为这是否可行，并允许它支持自动 oData 集成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T03:16:56.903

这是你如何做到的。在幕后，[Queryable] 只是创建 ODataQueryOptions 的一个实例，然后将其应用于您返回的可查询对象。好消息是您可以参数绑定 ODataQueryOptions 并拥有如下所示的代码：

```
public Wrapper<MyObject> Get(ODataQueryOptions<MyObject> queryOptions)
{
    IQueryable<MyObject> queryResults = queryOptions.ApplyTo(dbSet);
    return Wrap(queryResults);
} 
```

你甚至不再需要 [Queryable] 因为你正在做它会为你做的事情。希望有帮助。

# c - 用于区域线程关联的 OpenMP 并行

> ID：14720642
> 
> 赞同：2
> 
> 时间：2013-02-06T02:32:18.230
> 
> 标签：c, openmp

假设我有以下 OpenMP 区域：

```
omp_set_num_threads(3);
#pragma omp parallel for
{
 //start
 ...
 //somewhere in the middle
 ...
 //end
} 
```

假设我有 8 核系统。例如，在“开始”之后，假设线程 0 在核心 4 上运行，线程 1 在核心 5 上运行，线程 2 在核心 6 上运行。线程迁移从“结束”之前的“中间某处”是否可能他们各自的核心是在“开始”之后分配的？即线程0-2是否有可能在“开始”之后分配给核心4-5，而“中间某处”线程表示分别迁移到核心5-7？甚至有可能线程可能驻留在核心 0-2 上的“结束”之前？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T08:23:01.557

据我所知，OpenMP 3.1 规范没有提供任何重新绑定线程的方法。

事实上，对线程绑定进行一些控制的唯一方法是通过`OMP_PROC_BIND`环境变量：

> OMP_PROC_BIND环境变量设置**全局**bind-var ICV 的值。此环境变量的值必须为**true**或**false**。如果环境变量设置为**true**，则执行环境不应在处理器之间移动 OpenMP 线程。如果环境变量设置为**false**，则执行环境可能会在处理器之间移动 OpenMP 线程。**如果OMP_PROC_BIND**的值既不是**true**也不是**false**，程序的行为是由实现定义的。

OpenMP 4.0 草案扩展了环境变量的可能值`OMP_PROC_BIND`并添加了`OMP_PLACES`环境变量，允许选择线程如何绑定到资源。尽管如此，仍然没有重新绑定线程的标准方法。

如果这种行为对你来说是绝对必要的，你可以考虑使用[hwloc](http://www.open-mpi.org/projects/hwloc/)库，特别是[CPU 绑定](http://www.open-mpi.org/projects/hwloc/doc/v1.6.1/a00053.php)部分。

# html - CSS 表单似乎没有任何换行符

> ID：14720645
> 
> 赞同：1
> 
> 时间：2013-02-06T02:32:37.357
> 
> 标签：html, css

我正在设计我的网站表单的样式，并找到了一个似乎可以达到一定程度的教程......该教程包含具有悬停提示的代码，而此代码导致事情变得丑陋。他们似乎试图将自己一个接一个地定位并一直包裹到窗户下方，而不是所有的田地都排成一排。

这是相关功能的代码元素，后跟 CSS...

HTML

```
<form id="defaultform" class="rounded" name="form2" method="post" action="<?php echo $editFormAction; ?>">
    <h3>Contact Form</h3>

            <div class="field">
                <label for="hostess_fname">First Name:</label>
                <input type="text" class="input" name="hostess_fname" value="" id="hostess_fname" />
                <p class="hint">Enter your name.</p>
            </div>

            <div class="field">
                <label for="email">Last Name:</label>
                <input type="text" class="input" name="hostess_fname" value="" id="hostess_lname" />
                <p class="hint">Enter your email.</p>
            </div>
             <input type="submit" value="Lookup Hostess" />
<input type="hidden" name="Lookup" value="form2" /> 
```

CSS

```
#defaultform {

width: 500px;
padding: 20px;
background: #f0f0f0;
overflow:auto;

/* Border style */
border: 1px solid #cccccc;
-moz-border-radius: 7px;
-webkit-border-radius: 7px;
border-radius: 7px;

/* Border Shadow */
-moz-box-shadow: 2px 2px 2px #cccccc;
-webkit-box-shadow: 2px 2px 2px #cccccc;
box-shadow: 2px 2px 2px #cccccc;

}

label {
font-family: Arial, Verdana;
text-shadow: 2px 2px 2px #ccc;
display: block;
float: left;
font-weight: bold;
margin-right:10px;
text-align: right;
width: 120px;
line-height: 25px;
font-size: 15px;
}

#defaultform.input{
font-family: Arial, Verdana;
font-size: 15px;
padding: 5px;
border: 1px solid #b9bdc1;
width: 300px;
color: #797979;
}

.hint{
display: none;
}

.field:hover .hint {
position: absolute;
display: block;
margin: -30px 0 0 455px;
color: #FFFFFF;
padding: 7px 10px;
background: rgba(0, 0, 0, 0.6);

-moz-border-radius: 7px;
-webkit-border-radius: 7px;
border-radius: 7px;
} 
```

我刚刚使用相同 CSS 尝试的较短形式的更多 HTML 更新了代码。我还添加了更多的 CSS 代码。我得到了同样的行为。我仍然对选择器以及它们是如何定义的和东西感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T03:41:21.593

我知道你现在在做什么，因为你已经添加了你的代码。这是一个非常简单的修复，但很难捕捉：

CSS

```
.field{
    clear:both;
} 
```

这是**[jsFiddle](http://jsfiddle.net/bcJ28/)**

# algorithm - 探路的扩展 - 转弯最少的路径

> ID：14720648
> 
> 赞同：4
> 
> 时间：2013-02-06T02:33:20.603
> 
> 标签：algorithm, methods, path-finding, a-star, heuristics

我在许多应用程序中都使用[了 A*](https://en.wikipedia.org/wiki/A*_search_algorithm)（和[Dijkstra 算法](https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)），但我一直在寻找**转弯次数最少**的路径，而路径长度无关紧要。我正在使用上下左右网格，没有对角线。

A* 定义，我试图通过增加成本来扩展它。在我遇到这样的情况之前，这非常有效：`Cost = DistanceFromStart + Heuristic(`[`Manhattan`](https://en.wikipedia.org/wiki/Taxicab_geometry)`)``numTurns`

`| 0 0 0 0 0 * 0 0`
`| 0 0 1' 2' + 0 0 E`
`| 0 0 S 1 2 * 0 0`
`| 0 0 0 0 0 * 0 0`
`| 0 0 0 0 0 * 0 0` （`*`=墙，`0`=空，`S`=开始，`E`=结束）

您会发现该路径`S->1->2->+`将给出与 相同的成本`s->1'->2'->+`。到目前为止，它们都转了一圈，距 的距离`S`相同，并且曼哈顿相同。但是`+`，如果我们走主要`'`路线，我们不必转弯。但是如果我们走这`1 2`条路，我们必须右转（`+1`成本）。因此，即使我们可以先到达那里`1 2`，它**也不**是转弯最少的路径。

我尝试了一些调整，例如让多个相同的方块同时出现在优先级队列中，这样它们都有机会（如果它们的值在堆中最小）和其他“hacky”解决方案，但不断收到不t 覆盖。有没有直观的方法来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T03:12:00.267

创建一个新的距离矩阵。对于位置 i 和 j，如果它们在一条直线上（没有转弯），则设置距离（i，j）=1。对于设置为无穷大的其余元素。现在在它上面运行任何最短距离算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T03:11:56.450

我认为您需要将“方向”纳入您的状态。当您从 1->2->+ 到达“+”时，您面向“向上”，当您从 1'->2'->+ 到达“+”时，您面向“右”。

然后，您可以将改变方向的成本纳入您的“执行成本”。也就是说，从一个州到另一个州的旅行费用。现在，在估计向右移动时，走 1->2->+ 将考虑改变方向的成本，而 1'->2'->+ 则不会。

当您进入 A* 的“生成孩子”阶段时，您可能只会将“迄今为止的成本”增加 1，即移动到邻居所需的网格单元数。如果邻居到您当前位置的方向是 != 到您当前方向，您还需要加 1。

首先，您可以使用一些特殊的朝向，例如 OMNIDIRECTIONAL，这样从起始位置移动到任何方格都不会产生成本。

# jms - ActiveMQ - 工作线程和任务池

> ID：14720652
> 
> 赞同：1
> 
> 时间：2013-02-06T02:34:01.333
> 
> 标签：jms, activemq, worker

我有以下情况：

*   调用了一些操作，结果创建了多个任务（数千个）
*   它们（它们的状态和详细信息）存储在数据库表中
*   我需要以某种方式在多个节点上执行这些任务

因此，显而易见的方法是为每个创建的任务（10000 个任务 - 10000 条消息）发送一条 JMS 消息，并且一个消费者池（每个节点）将执行它们 - 但这看起来有点过头了 - 侦听器需要获取任务无论如何，从 DB 通知它应该工作下一个任务就足够了，就好像 - 发送一条消息（“工作下一个任务”）并以某种方式将其设置为传递 10000 次。

如何解决这个问题？发送 10000 条消息真的是最好的主意吗？

此外，ActiveMQ 有这个消息调度的东西 [1] - 也许只是将周期设置为 0 并重复到 10000？那会正常工作吗？除了上面提到的还有没有更好的方法？

[1] [http://activemq.apache.org/delay-and-schedule-message-delivery.html](http://activemq.apache.org/delay-and-schedule-message-delivery.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:21:00.220

实际上，您可以使用 Redis 来存储已完成任务的 id (1..n)。并使用“set”数据结构。

键看起来像任务列表：

每个键将包含已完成任务的 ID。

因此，当您开始一项包含 1000 个异步任务的工作时。您为此作业生成一些唯一的 ID，并使用任务 ID 发送，当任务完成时，工作人员（处理此任务的人员）应在 DB（Redis）中添加此 ID。并且当最后一个工作人员在 DB 中保存 id 并且设置的任务大小相等时（您应该在每个任务之后检查它）——所有任务都完成了，这样您就可以发送另一条消息或进行其他任何操作。

Redis 提供非常快速的访问和非常快的少数数据结构。

# android - SQLite3 最大列宽（文本）

> ID：14720653
> 
> 赞同：2
> 
> 时间：2013-02-06T02:34:07.257
> 
> 标签：android, sql

我正在构建一个 java 对象，该对象包含一个表示文件路径的字符串数组。我想将此对象存储在 SQLite 数据库中，并且我已经编写了代码来完成大部分工作，但我想知道列 [在 Android 的预编译中] 是否有最大宽度。如果没有，我可能能够序列化对象或存储它，因此如果将这些对象中的另一个插入到列表中，其文件比以前的文件多，它就不必继续添加列，我不能如果有实际限制，请查找任何文档。我不希望路径超过 256 个字符，但可能会有一些疯狂的人喜欢他们的文件路径......

所以我的问题是：SQLite 3 [android] 列的最大宽度是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T02:46:36.433

将文件路径序列化到一个字段中听起来效率很低，但要回答您的问题，您无法找到最大值是有原因的，因为您可以在编译期间对其进行调整：http: [//sqlite.org/limits.html#max_length](http://sqlite.org/limits.html#max_length)

默认限制为 10 亿字节，因此您有相当多的空间。

# ios - Xcode 用户为 JSON 服务定制的 NSURL

> ID：14720655
> 
> 赞同：0
> 
> 时间：2013-02-06T02:34:37.893
> 
> 标签：ios, objective-c

我有以下 NSURL 字符串，我正在尝试使用变量指向用户特定的网页以从中解析 JSON，我希望能够做的是从 UILabel 获取信息并最终执行像这样的网址： `NSData* carData = [NSData dataWithContentsOfURL: [NSURL URLWithString:[NSString stringWithFormat:@"http://10.0.0.234:8880/%@", *label.text ]]];`

但我似乎无法做到这一点，因为“无法将对象接口类型'NSString'按值传递给可变参数方法；格式字符串的预期类型是'id'

编辑：我需要这个能够在设置菜单中向用户请求“用户名”（手机号码），并且我需要能够调用此信息以位于 URL 的末尾，例如“www.example。 com/01223445

如果有人能指出我正确的方向，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T02:51:13.443

> “无法按值将对象接口类型‘NSString’传递给可变参数方法；格式字符串中的预期类型为‘id’”

你为什么用`*label.text`？哪个将转换为`*(label.text)`取消引用的 NSString。这正是编译器所抱怨的。

你需要做`[NSString stringWithFormat:@"http://10.0.0.234:8880/%@", label.text ]]`才能摆脱错误。（不带 *）

# mysql - 获取多列的总和并计算每一行的比率

> ID：14720657
> 
> 赞同：1
> 
> 时间：2013-02-06T02:34:43.387
> 
> 标签：mysql, sql, sum, pivot

下面是我的 brand_of_items 表的架构。为简单起见，此处显示为两列：id（主要和 AI）、符号（varchar 50，唯一）

```
Table - brand_of_items
id   symbol
0    a
1    b
2    c
..   ..
10   j 
```

下面是我的 items_of_brand 的架构。

```
Table - mainIndexQuantity
id  brand_of_items_id   vol  item_type  salefinalizeddate
0         1              5      0       2005-5-11
1         1              6      0       2004-5-11
2         1              7      0       2011-5-11
3         1              8      0       2011-5-12
4         1              9      0       2011-5-12
5         1              10     0       2011-5-11
6         1              5      1       2012-5-11
7         1              6      1       2012-5-11
8         1              7      1       2011-5-11
9         1              8      1       2010-5-12
10        1              9      1       2012-5-12
11        1              10     1       2005-5-12 
```

mainIndexQuantity 表brand_of_items_id 列是指向brand_of_items (id) 的外键。mainIndexQuantity 表 item_type 列不是外键，它应该是。

这两种商品类型是：0 = 零售和 1 = 批发

我想计算每个 each_brand_of_items 表条目的商品类型（零售与批发）的比率。目标是查看某个品牌的商品是在零售还是批发中销售更多。

* * *

** 添加复杂性：我想在 mainIndexQuantity 表中添加一个日期列，并想找出RetailVolume 和 WholesaleVolume 总和的**差异**，并按 salefinalizeddate 字段对结果进行分组。

这是为了帮助确定哪些商品在哪个季节销售得更多，RetailVolume 和 WholeSaleVolume 总和的（增量）差异将有助于选择最关注的商品。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T02:40:45.180

试试这个：

```
SELECT 
  b.id,
  b.symbol,
  IFNULL(SUM(m.item_type = 1), 0) / (COUNT(*) * 1.0) AS wholesaleRatio,
  IFNULL(SUM(m.item_type = 0), 0) / (COUNT(*) * 1.0) AS RetailRatio
FROM brand_of_items b
LEFT JOIN mainIndexQuantity m ON b.id = m.brand_of_items_id
GROUP BY b.id, 
         b.symbol; 
```

[**SQL 小提琴演示**](http://www.sqlfiddle.com/#!2/ce52a/4)。

这会给你：

```
| ID | SYMBOL | WHOLESALERATIO | RETAILRATIO |
----------------------------------------------
|  0 |      a |              0 |           0 |
|  1 |      b |            0.5 |         0.5 |
|  2 |      c |              0 |           0 |
| 10 |      j |              0 |           0 | 
```

假如说：

*   `wholesaleRatio`是 Whole sale 类型的项目的计数到所有项目的计数。
*   `RetailRatio`是类型项目`retail`的计数到所有项目的计数。

如果这个配给是`vol`列的总和到总数`vol`，你可以这样做：

```
SELECT 
  b.id,
  b.symbol,
  SUM(CASE WHEN m.item_type = 1 THEN m.vol ELSE 0 END) / SUM(m.vol) AS wholesaleRatio,
  SUM(CASE WHEN m.item_type = 0 THEN m.vol ELSE 0 END) / SUM(m.vol) AS RetailRatio
FROM brand_of_items b
LEFT JOIN mainIndexQuantity m ON b.id = m.brand_of_items_id
GROUP BY b.id, 
         b.symbol; 
```

**注意：**

*   我使用`LEFT JOIN`, 以便您在结果集中获得不匹配的行，即`MainIndexQuantity`表中没有条目的那些品牌项目。如果您不想包含它们，请`INNER JOIN`改用。
*   正如@JW 所指出的，乘以`1.0`得到小数位数。

* * *

## 更新 1

要包括`Total Volume`,`Retail Volume Sum`并`Wholesale Volume sum`尝试以下操作：

```
SELECT 
  b.id,
  b.symbol,
  IFNULL(SUM(m.item_type = 1), 0) * 1.0 / COUNT(*)     AS wholesaleRatio,
  IFNULL(SUM(m.item_type = 0), 0) * 1.0 / COUNT(*)     AS RetailRatio,
  IFNULL(SUM(m.vol), 0)                                AS 'Total Volume',
  SUM(CASE WHEN m.item_type = 1 THEN m.vol ELSE 0 END) AS 'Retail Volume sum',
  SUM(CASE WHEN m.item_type = 1 THEN m.vol ELSE 0 END) AS 'Wholesale Volume sum'
FROM brand_of_items b
LEFT JOIN mainIndexQuantity m ON b.id = m.brand_of_items_id
GROUP BY b.id, 
         b.symbol; 
```

[**更新了 SQL Fiddle 演示**](http://www.sqlfiddle.com/#!2/ce52a/11)。

这会给你：

```
| ID | SYMBOL | WHOLESALERATIO | RETAILRATIO | TOTAL VOLUME | RETAIL VOLUME SUM | WHOLESALE VOLUME SUM |
--------------------------------------------------------------------------------------------------------
|  0 |      a |              0 |           0 |            0 |                 0 |                    0 |
|  1 |      b |            0.5 |         0.5 |           90 |                45 |                   45 |
|  2 |      c |              0 |           0 |            0 |                 0 |                    0 |
| 10 |      j |              0 |           0 |            0 |                 0 |                    0 | 
```

如果您想按这些总计和总和对结果集进行排序，请将此查询放在子查询中，然后您可以这样做：

```
SELECT *
FROM
(
   SELECT 
      b.id,
      b.symbol,
      IFNULL(SUM(m.item_type = 1), 0) * 1.0 / COUNT(*)     AS wholesaleRatio,
      IFNULL(SUM(m.item_type = 0), 0) * 1.0 / COUNT(*)     AS RetailRatio,
      IFNULL(SUM(m.vol), 0)                                AS TotalVolume,
      SUM(CASE WHEN m.item_type = 1 THEN m.vol ELSE 0 END) AS RetailVolumeSum,
      SUM(CASE WHEN m.item_type = 1 THEN m.vol ELSE 0 END) AS WholesaleVolumeSum
    FROM brand_of_items b
    LEFT JOIN mainIndexQuantity m ON b.id = m.brand_of_items_id
    GROUP BY b.id, 
             b.symbol
) AS sub
ORDER BY RetailVolumeSum    DESC, 
         WholesaleVolumeSum DESC; 
```

但是您的最后一个要求并不清楚，您是在寻找那些具有最高 retio/wholesale ratis 和 volumns 的商品品牌，还是选择其中价值最高的商品？

对于后一个：

```
SELECT *
FROM
(
   SELECT 
      b.id,
      b.symbol,
      IFNULL(SUM(m.item_type = 1), 0) * 1.0 / COUNT(*)     AS wholesaleRatio,
      IFNULL(SUM(m.item_type = 0), 0) * 1.0 / COUNT(*)     AS RetailRatio,
      IFNULL(SUM(m.vol), 0)                                AS TotalVolume,
      SUM(CASE WHEN m.item_type = 1 THEN m.vol ELSE 0 END) AS RetailVolumeSum,
      SUM(CASE WHEN m.item_type = 1 THEN m.vol ELSE 0 END) AS WholesaleVolumeSum
    FROM brand_of_items b
    LEFT JOIN mainIndexQuantity m ON b.id = m.brand_of_items_id
    GROUP BY b.id, 
             b.symbol
) AS sub
ORDER BY RetailVolumeSum    DESC, 
         WholesaleVolumeSum DESC,
         TotalVolume        DESC
LIMIT 1; 
```

* * *

## 更新 2

要获得总销量最高的品牌，您可以这样做：

```
SELECT 
  b.id,
  b.symbol,
  IFNULL(SUM(m.item_type = 1), 0) * 1.0 / COUNT(*)     AS wholesaleRatio,
  IFNULL(SUM(m.item_type = 0), 0) * 1.0 / COUNT(*)     AS RetailRatio,
  IFNULL(SUM(m.vol), 0)                                AS TotalVolume,
  SUM(CASE WHEN m.item_type = 1 THEN m.vol ELSE 0 END) AS RetailVolumeSum,
  SUM(CASE WHEN m.item_type = 1 THEN m.vol ELSE 0 END) AS WholesaleVolumeSum
FROM brand_of_items b
LEFT JOIN mainIndexQuantity m ON b.id = m.brand_of_items_id
GROUP BY b.id, 
         b.symbol
HAVING SUM(m.vol) = (SELECT MAX(TotalVolume)
                     FROM
                     (
                       SELECT brand_of_items_id, SUM(vol) AS TotalVolume
                       FROM mainIndexQuantity
                       GROUP BY brand_of_items_id
                     ) t); 
```

[**像这样**](http://www.sqlfiddle.com/#!2/ce52a/20)。

**注意：**

*   这将为您提供总销量最高的品牌，如果您正在寻找比例最高的品牌，您必须替换having子句以获得比例的最大值而不是总销量的最大值。

*   这将为您提供总体积最高的项目，因此您可能希望拥有多个项目，以防有多个项目的总体积最高，就像在[**这个更新的小提琴演示**](http://www.sqlfiddle.com/#!2/59135/1)中一样。在这种情况下，要仅获取一个，您必须使用`LIMIT`to 仅返回一个。

# java - 来自扫描程序的 Java 循环/用户输入

> ID：14720662
> 
> 赞同：5
> 
> 时间：2013-02-06T02:35:30.800
> 
> 标签：java

制作一个简单的篮球程序，我询问主队名称，本赛季有多少场比赛，然后循环询问下一场球队比赛。基本上，当我启动 do-while 循环时，它工作得很好，除非用户输入例如“Ohio State”。例如，输出将从“剩余 6 场比赛”变为“剩余 4 场比赛”。通常它只会问对手？，然后递减一局。

**我该如何解决，以使 2 个单词的篮球队名称不会减少两次？**

```
import java.util.Scanner;

public class Basketball2 {

public static void main(String[] args) throws java.io.IOException {
    Scanner scanInput  = new Scanner(System.in);
    String sHomeTeam;
    String sAwayTeam;
    int iNumGames;
    int iGamesLeft = 0;

    System.out.println("Enter home team's name: ");
    sHomeTeam = scanInput.nextLine();
    System.out.println(sHomeTeam);

    System.out.println("How many games are in the home team's basketball season?");
    iNumGames = scanInput.nextInt();
    System.out.println(iNumGames);

    //start looping
    do {
        System.out.println("Enter opponent team's name: ");
        sAwayTeam = scanInput.next();
        System.out.println(sAwayTeam);
        iGamesLeft = --iNumGames;
        System.out.println("There are " + iGamesLeft + " games left in the basketball season");

    }//end do
    while(iGamesLeft > 0); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T02:51:44.577

Replace: `sAwayTeam = scanInput.next();`with`sAwayTeam = scanInput.nextLine();`它循环两次的原因是因为`scanInput.next();`一次只返回一个标记（例如单词）。当您输入两个单词时，它不需要在第二次继续之前接收来自用户的更多输入，因为它已经有另一个单词要返回。因此双循环。

您还需要注意调用`nextInt()`. 这与`next()`方法类似，但它不是一个标记（单词），而是只扫描一个字符作为 int。试试这个：`iNumGames = scanInput.nextInt();`put `scanInput.nextLine();`This 应该清除 scanInput 任何使它跳过的东西。注意：由于您的代码的编写方式，这只会读取一个字符。如果您需要读取多个字符，您应该使用`nextLine()`并将其值分配给一个整数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T04:04:45.610

Donny Schrimsher 给出的答案中所说的都是正确的。你现在要做的就是在获得主队篮球赛季的比赛场数之后，即

```
System.out.println("How many games are in the home team's basketball season?");
iNumGames = scanInput.nextInt(); 
```

你必须添加

```
scanInput.nextLine(); 
```

这是因为在输入游戏数后，您按下回车键（行尾），nextInt() 方法采用游戏数而不是行尾。此行尾由 Donny Schrimsher 在 do-while 循环中提到的 nextLine() 方法使用。所以为了避免这种情况，你添加了一个额外的 nextLine() 方法。

因此它必须是

```
System.out.println("How many games are in the home team's basketball season?");
iNumGames = scanInput.nextInt();
scanInput.nextLine();
System.out.println(iNumGames); 
```

加上 Donny Schrimsher 提到的变化。

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T04:20:30.293

尝试使用所有退出功能的以下代码。

```
import java.util.Scanner;

public class Basketball2 {

    public static void main(String[] args) throws java.io.IOException {
        Scanner scanInput = new Scanner(System.in);
        String sHomeTeam;
        String sAwayTeam;
        int iNumGames;
        int iGamesLeft = 0;

        System.out.println("Enter home team's name: ");
        sHomeTeam = scanInput.nextLine();
        System.out.println(sHomeTeam);

        System.out
                .println("How many games are in the home team's basketball season?");
        iNumGames = scanInput.nextInt();
        System.out.println(iNumGames);

        // start looping
        do {
            System.out.println("Enter opponent team's name: ");
            scanInput = new Scanner(System.in);
            sAwayTeam = scanInput.nextLine();
            if(!"".equals(sAwayTeam.trim()) && !"exit".equals(sAwayTeam.trim()))
            {

                System.out.println(sAwayTeam);
                iGamesLeft = --iNumGames;
                System.out.println("There are " + iGamesLeft+ " games left in the basketball season");

            }

        }// end do
        while (iGamesLeft > 0 && !"exit".equalsIgnoreCase(sAwayTeam));
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-17T17:55:42.870

# 主题：带有扫描仪的“Java 循环”

我写的这个简单的Java程序运行良好，你可以自己试试……你也可以很容易地把这个程序转换成'while循环'，'do - while循环'和'for - each循环'。

美国弗吉尼亚州拉菲克，日期：2015 年 4 月 17 日

```
//Examples: 'for loop' with Scanner
package com.java_basics;

import java.util.Scanner;

public class ForLoop_Examples_With_Scanner 
{
    public static void main(String[] args) 
    {
        //Creating instance of Scanner to allows a user's input to read from System.in
        Scanner mySC = new Scanner(System.in);
        System.out.println("Please, enter the value of 'int i' between '0 and 2' : ");
        int i = mySC.nextInt();

        System.out.println("Please, enter the value of 'exitPoint' between '10 and 1000' :");
        int exitPoint = mySC.nextInt();

        System.out.println("Please, enter the value of 'increment' between '1 and 2' :");
        int increment = mySC.nextInt();

        mySC.close();//Releasing memory to the OS (Operating System) for reuse

        System.out.println("Output:\n" + "======");
        for(;i<exitPoint ; i=i+increment)//i++==>i=i+1==>i=i+increment
        {
            System.out.println(i);          
        }
    }
} 
```

# php - Codeigniter 的日志记录行为 | 显示_404()

> ID：14720665
> 
> 赞同：5
> 
> 时间：2013-02-06T02:35:42.480
> 
> 标签：php, codeigniter

我使用控制器为页面做一些自定义 uri 路由，它目前运行良好。

这是一个精简版的控制器，它使用 PHPTAL 作为模板引擎。

```
public function index()
{
    $this->tal->display('index');
}

public function view($url)
{       
    $this->loadView($url);
}   

private function loadView($url) 
{

   if (file_exists(ROOTPATH . 'webroot/' . $url . '/index.html')) 
   {
       $this->tal->display($url . '/index');
   } 
   else 
   {  
       show_404();
   }
} 
```

# 问题

我最近注意到每次访问页面控制器时，我的日志中都会出现以下错误：

`ERROR - 2013-02-06 10:58:23 --> 404 Page Not Found -->`

我发现这很奇怪，因为页面按预期显示，并且肯定没有 404 标题，网络面板也没有 404 状态。

我最终将其缩小到`show_404()`方法中调用的辅助`loadView()`方法。删除该行会阻止错误完全出现在日志文件中。

此§show_404()§ 仅应在无法找到视图文件时执行，在这种情况下，它应该显示 404 错误页面，它确实如此。但是，无论是否调用该方法，该方法的日志记录部分似乎都会在每次调用页面控制器时执行`loadView()`。

# 例子

我`index()`在浏览器中访问视图，一切正常，加载了正确的视图文件，没有错误。但是，该方法会记录 404 错误消息`loadView()`。该`loadView()`方法甚至没有被该`index()`方法调用，但其输出在日志文件中的存在似乎表明它正在被执行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T07:23:49.113

的默认行为`show_404`是[在调用时插入一个日志条目](https://github.com/EllisLab/CodeIgniter/blob/develop/system/core/Common.php#L381-392)。还有第二个可选参数可以禁用它，所以如果你只想显示 404 页面而不记录它，可以这样调用它：

```
show_404('', false); 
```

第一个参数是将附加在`-->`日志中的字符串，因此您也可以将其留空。

### 至于为什么`_loadView`可能会调用该函数：

如果您使用的 url 没有`index.php`它们（空`$config['index_page']`），那么网络服务器服务器找不到的每个静态资产（图像、js、css 等）（取决于具体的重写规则）将被传递给 php 脚本，并且可能在那里生成 404 错误。

# javascript - 多色 SVG 折线

> ID：14720667
> 
> 赞同：0
> 
> 时间：2013-02-06T02:35:56.700
> 
> 标签：javascript, svg, vector-graphics, leaflet, geojson

我正在使用 Leaflet 在带有 javascript 的地图上以 SVG 格式绘制地图数据。我有一组数千个坐标，我正在其中绘制一个传单路径（扩展 L.Browser.svg）。

我想用第三个变量对线进行颜色编码（因为这是一张地图，比如说海拔，蓝色低，红色高，或类似的东西）。我是 SVG 新手，但似乎我只能为整个路径设置笔触颜色。

例如我现在所拥有的——线只是一种颜色（为简单起见，概念代码被剥离）：

```
// create the SVG group and path element
this._container = this._createElement('g');
this._path = this._createElement('path');
// set the stoke color -- I wish I could make this dynamic per segment!
this._path.setAttribute('stroke', '#00000');

// Not real code, but simplified...generate lots of coordinates for the polyline
var myPath = "M" + p.x + "," + p.y + " L";
points.each(function(item, index){
    poly += item.x + "," + item.y + " ";                    
});

// update
this._path .setAttribute('d', poly); 
```

有没有比创建数千个路径元素并将它们添加到 SVG 组更好的方法来做到这一点，每个元素都有自己的笔触颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:56:00.260

有一种方法可以实现这一目标，但也需要大量工作。如果您有一个具有正确颜色编码的完整图像[（类似这样）](http://ars.els-cdn.com/content/image/1-s2.0-S0161642002010308-gr1.jpg)，您可以使用 SVG 过滤器将该图像与您的路径合成：即时路径着色。您也可以使用 SVG 蒙版来实现相同的效果。如果您没有该图像，那么您可以在 SVG 中构建一个，但这可能会是类似的工作量。

# php - 在 PHP 中生成大小写混合的随机密码

> ID：14720677
> 
> 赞同：-3
> 
> 时间：2013-02-06T02:37:31.317
> 
> 标签：php

以下是随机密码列表：

```
xFn2zhgH
NqnzZtJQ
3Lh4nBkf
N8zyq4TF
wRzZTxDV
yJhL6CFH
3KdgtRX4
ypgGXdY2
Y9zN7cn2
zcy8LKNp 
```

我需要某种功能来创建类似于这些现有密码格式的密码。关于如何做到这一点的任何建议？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T02:43:00.457

使用带有当前日期/时间的哈希

```
$hash = md5(date('l jS \of F Y h:i:s A')); 
```

然后将其截断为您想要的字符数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T02:40:57.153

```
function create_password ($len)
{
  $pool = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
  $str = '';
  for ($i=0; $i < $len; $i++)
  {
    $str .= substr($pool, mt_rand(0, strlen($pool) -1), 1);
  }
  return $str;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T02:44:16.913

如果您在 PHP 中需要它，这里有一个生成随机密码的简单代码：

```
function randomPassword($length = 8) {
    $password = '';
    $characters = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
    $limit = strlen($characters) - 1;
    for ($i = 0; $i < $length; $i++) {
        $password .= $characters[rand(0, $limit)];
    }
    return $password;
} 
```

# gist - 如何将秘密 Gist 更改为公开？

> ID：14720678
> 
> 赞同：131
> 
> 时间：2013-02-06T02:37:35.610
> 
> 标签：gist

我上传了一个 Gist 代码并将其设置为机密。

现在我想将要点更改为公开，但我找不到如何将其设置为公开...

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2014-05-09T23:37:20.883

> 我上传了一个 Gist 代码并将其设置为机密。
> 现在我想将要点更改为公开，但我找不到如何将其设置为公开

自 2014 年 5 月 9 日起，可以：“[**更改 Gists 的可见性**](https://github.com/blog/1837-change-the-visibility-of-your-gists)”

> 您可以随时更改 Gist 的可见性。
> 
> 编辑 Gist 时，您现在会注意到一个**用于在 Public 和 Secret 之间切换可见性的新选项**。
> Gist 的 URL 永远不会改变，只会改变它的可见性。

![https://cloud.githubusercontent.com/assets/222/2894242/b9be0cd4-d550-11e3-91e8-415b178fb561.gif](../Images/401b0d6c23b9b0fa26961d7d19aded3e.png)

* * *

正如[GiDo](https://stackoverflow.com/users/53338/gido)[评论](https://stackoverflow.com/questions/14720678/how-can-i-change-a-secret-gist-to-public/51978714#comment63922423_23575535)的那样，自 2016 年以来：

> 您只能公开以前私有的要点。
> **当它公开时，它将保持公开**。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-08-23T05:10:50.830

**更新：**

您仍然可以通过首先选择“编辑”->“公开”将秘密要点转换为公开要点。但是，自 2016 年 12 月 15 日以来，此功能已部分[回滚](https://blog.github.com/2014-05-09-change-the-visibility-of-your-gists/)，您将无法再将其切换回秘密。

从[文档](https://help.github.com/articles/about-gists/)：

> 创建 gist 后，您无法将其从公开转换为秘密。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-02-25T18:31:26.783

更正; 此信息已过时。请参阅 2014 年 5 月 9 日 VonC 的回答。

原答案：

不，您必须创建一个新的公共要点并复制/粘贴内容。

如果您想保留原始秘密 gist 的所有*历史记录*，Chris Dzombak 撰写[了一篇文章，指导您逐步了解如何克隆 gist](http://www.dzombak.com/blog/2011/05/making-private-gist-public.html)以保留其更改历史记录。

# objective-c - 为什么 Objective-C 运行时库使用 C++ ABI 进行异常处理？

> ID：14720682
> 
> 赞同：1
> 
> 时间：2013-02-06T02:37:41.537
> 
> 标签：objective-c, exception-handling, objective-c++, objective-c-runtime

我在[http://opensource.apple.com/source/objc4/objc4-532.2/runtime/objc-exception.mm](http://opensource.apple.com/source/objc4/objc4-532.2/runtime/objc-exception.mm)看到 Apple 的 Objective-C 运行时使用一些 C++ ABI 函数进行异常处理，例如`__cxa_throw`、`__cxa_begin_catch`和. 因为 Objective-C 中的异常处理类似于 C++ 中的异常处理（甚至 C++ 个性例程对于 Obj-C 也是相同的），所以只需要进行一些调整即可在 Objective-C 运行时库中使用这些函数。`__cxa_end_catch``__cxa_rethrow`

所以，我的观点是，运行时团队“不需要”或者它“不能”（也许是为了保持与 C++ 的兼容性，对于 Objective-C++）实现自己的 ABI（例如，通过使用 Unwind 库，就像 C++ ABI 一样)? 像`objc_exception_throw`,`objc_exception_rethrow`和`objc_begin_catch`之类的函数`objc_end_catch`是否必须处理 C++ 对象，以便它们不仅可以，而且必须在底层使用,`__cxa_throw`和，就像它们实际做的那样？`__cxa_rethrow``__cxa_begin_catch``__cxa_end_catch`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T04:12:30.300

我怀疑 Apple 选择使用那些 C++ ABI 函数是为了增加 C++ 和 Objective-C 异常之间的互操作性。IIRC，在“现代”Objective-C 运行时（适用于 iOS 和 Mac OS X 64 位）中，C++ 可以捕获 Objective-C 异常，反之亦然。在运行时的早期版本中并非如此，当在同一个应用程序中组合 C++ 和 Objective-C 代码时，这会导致非常烦人的问题。

# vb.net - 使用 NamePipe [进程间通信] VB.NET 传输对象

> ID：14720683
> 
> 赞同：0
> 
> 时间：2013-02-06T02:37:42.333
> 
> 标签：vb.net, named-pipes, inter-process-communicat

到目前为止，我已经完成了能够让我在发送者和接收者之间传输文本的部分。反正有没有通过使用命名管道来传输对象？例如。数组列表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:53:50.813

在 vb.net 中，您也可以像 C 一样执行此操作……。

使用序列化对象并将其转换为字节数组传输它并在另一端反序列化

连载

```
Dim BytArray() As Byte
Using MS As MemoryStream = Memory.Serialize(_Object)
     BytArray = MS.GetBuffer()
End Using 
```

反序列化

```
Dim _Return As objType = Nothing
Using MS As System.IO.MemoryStream = New System.IO.MemoryStream(BytArray)
    _Return = Memory.Deserialize(Of objType)(MS)
End Using 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:57:08.540

我不确定 .NET 或 VB 在命名管道中的用法，但在 Visual C++ 中，我会将数组或对象中的原始数据打包到一个字节数组中，然后将其写入管道。在另一端从管道中读取此内容后，我将根据原始数据重建数组或对象。

# c++ - int 除法舍入库？

> ID：14720688
> 
> 赞同：2
> 
> 时间：2013-02-06T02:38:05.990
> 
> 标签：c++, c, math, int, integer-division

有谁知道一个开源 C 或 C++ 库，其中的函数实现了人们可能想要的每种整数除法模式？可能的行为（对于积极的结果）：

```
round_down, round_up,
round_to_nearest_with_ties_rounding_up,
round_to_nearest_with_ties_rounding_down,
round_to_nearest_with_ties_rounding_to_even,
round_to_nearest_with_ties_rounding_to_odd 
```

每个（除了四舍五入和四舍五入）都有两个变体

```
// (round relative to 0; -divide(-x, y) == divide(x, y))
negative_mirrors_positive,
// (round relative to -Infinity; divide(x + C*y, y) == divide(x, y) + C)
negative_continuous_with_positive 
```

.

我知道怎么写，但肯定有人已经这样做了吗？

作为一个例子，如果我们假设（这是常见的并且在 C++11 中是强制的）内置有符号整数除法向零舍入，并且内置模数与此一致，那么

```
int divide_rounding_up_with_negative_mirroring_positive(int dividend, int divisor) {
  // div+mod is often a single machine instruction.
  const int quotient = dividend / divisor;
  const int remainder = dividend % divisor;
  // this ?:'s condition equals whether quotient is positive,
  // but we compute it without depending on quotient for speed
  // (instruction-level parallelism with the divide).
  const int adjustment = (((dividend < 0) == (divisor < 0)) ? 1 : -1);
  if(remainder != 0) {
    return quotient + adjustment;
  }
  else {
    return quotient;
  }
} 
```

加分项：适用于多种参数类型；快速地; 也可选择返回模数；不要溢出任何参数值（当然，除以零和 MIN_INT/-1 除外）。

如果我没有找到这样的库，我会用 C++11 编写一个，发布它，并在此处的答案中链接到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:09:40.883

所以，我写了一些东西。该实现通常是丑陋的模板和按位代码，但效果很好。用法：

```
divide(dividend, divisor, rounding_strategy<...>()) 
```

哪里 `rounding_strategy<round_up, negative_mirrors_positive>`是示例策略；请参阅我的问题或源代码中的变体列表。[https://github.com/idupree/Lasercake/blob/ee2ce96d33cad10d376c6c5feb34805ab44862ac/data_structures/numbers.hpp#L80](https://github.com/idupree/Lasercake/blob/ee2ce96d33cad10d376c6c5feb34805ab44862ac/data_structures/numbers.hpp#L80)

仅取决于 C++11 [*]，单元测试（使用 Boost Test 框架）从[https://github.com/idupree/Lasercake/blob/ee2ce96d33cad10d376c6c5feb34805ab44862ac/tests/misc_utils_tests.cpp#L38开始](https://github.com/idupree/Lasercake/blob/ee2ce96d33cad10d376c6c5feb34805ab44862ac/tests/misc_utils_tests.cpp#L38)

它是多态的，速度不错，不会溢出，但目前不返回模数。

[*] （在 boost::make_signed 和 boost::enable_if_c 上，用 std::make_signed 和 std::enable_if 替换它们很简单，在我们的 caller_error_if() 上可以用 assert() 或 if( 替换。 .){throw ..} 或删除。假设您对那里的其他内容不感兴趣，您可以忽略并删除文件的其余部分。）

每个divide_impl 的代码可以通过将每个T 替换为例如int 并将T(CONSTANT) 替换为CONSTANT 来适应C。对于 round_to_nearest_* 变体，您要么希望将舍入类型作为运行时参数，要么创建六个代码副本（一个用于它处理的每个不同的舍入变化）。代码依赖于向零舍入的“/”，这很常见，也由 C11（标准草案 N1570 6.5.5.6）和 C++11 指定。对于 C89/C++98 兼容性，它可以使用 stdlib.h div()/ldiv() 保证向零舍入（参见[http://www.linuxmanpages.com/man3/div.3.php](http://www.linuxmanpages.com/man3/div.3.php)，[http ://en.cppreference.com/w/cpp/numeric/math/div](http://en.cppreference.com/w/cpp/numeric/math/div) )

# c# - 突出显示中继器

> ID：14720689
> 
> 赞同：0
> 
> 时间：2013-02-06T02:38:19.270
> 
> 标签：c#, asp.net, onclick, repeater, highlight

我正在努力突出显示我选择的项目。我的代码有效，但它只突出显示所选项目一次，当显示结果时，它返回未突出显示。

这是我的代码：

```
<script type="text/javascript">
        function changeColor(elem){
            elem.style.backgroundColor = "#C9C9C9";
        }
</script> 
```

…………

```
<td onclick="changeColor(this)">
    <asp:LinkButton ID="LinkButtonSkills" runat="server" 
        OnClick="showProjects" 
        PostBackUrl='<%# "NewUserSearch.aspx?name=" + Server.UrlEncode(Eval("staff_name").ToString()) %>'>
</td> 
```

我希望这些信息足够了关于如何编辑我的代码并在整个过程中突出显示所选项目的任何想法？而不是仅突出显示并返回未突出显示的状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:21:14.290

1.  我将尝试为您拼凑一些代码，但您最好使用一些已经存在的代码（我用 VB 而不是 C# 编写）。记住：谷歌是你的朋友。这个答案（它引用了其他答案）可能会为您在转发器中选择特定行提供最佳参考：
    [如何在 asp.net 中的转发器中选择整行](https://stackoverflow.com/questions/5973643/how-to-select-full-row-in-repeater-in-asp-net)
    或试试这个：
    [转发器行高亮在回发后不会持续](https://stackoverflow.com/questions/9797919/repeater-row-highlight-does-not-persist-after-postback)
    这一个看起来很有希望太：
    [http ://forums.asp.net/t/1642414.aspx/1](http://forums.asp.net/t/1642414.aspx/1)

2.  您可能希望使用 FormView 或 DetailsView 来显示用户详细信息。

3.  如果您有时间并且想要增强您的页面，它可能会受益于使用 AJAX (UpdatePanel) 来刷新用户详细信息。如果你得到它的工作，javascript 可能是你所需要的，但你还需要在更改选择时删除突出显示。

# algorithm - BFS 和 DFS 的目的是什么？

> ID：14720691
> 
> 赞同：11
> 
> 时间：2013-02-06T02:38:36.850
> 
> 标签：algorithm, graph, depth-first-search, breadth-first-search

我已经了解了这些算法的工作原理，但它们是用来做什么的？

我们是否使用它们来：

*   在图中找到某个节点或
*   找到一条最短路径或
*   在图中找到一个循环

?

他们都只是访问所有节点并将它们标记为已访问，我看不出这样做的意义。

我在这里有点迷失了我正在学习的东西。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-06T19:10:13.207

BFS 和 DFS 是可用于各种不同目的的图搜索算法。

这两种搜索技术的一个常见应用是识别从给定起始节点可到达的所有节点。例如，假设您有一组计算机，每台计算机都与少数其他计算机联网。通过从给定节点运行 BFS 或 DFS，您将发现原始计算机能够直接或间接与之通信的网络中的所有其他计算机。这些是回来标记的计算机。

BFS 特别可用于在未加权图中找到两个节点之间的最短路径。例如，假设您想将数据包从网络中的一台计算机发送到另一台计算机，并且这些计算机之间没有直接连接。您应该沿着什么路线发送数据包以使其尽快到达目的地？如果您运行 BFS 并且在每次迭代中让每个节点存储一个指向其“父”节点的指针，您最终将在图中找到从起始节点到每个其他节点的路线，从而最大限度地减少必须遍历的链接数量到达目标计算机。

DFS 通常用作更复杂算法中的子程序。例如，Tarjan 计算强连接组件的算法是基于深度优先搜索的。许多优化编译器技术在适当构造的图上运行 DFS，以确定应用特定系列操作的顺序。深度优先搜索也可用于迷宫生成：通过获取节点网格并将每个节点与其邻居链接，您​​可以构建表示网格的图。在这个图上运行一个随机的深度优先搜索然后产生一个只有一个解决方案的迷宫。

这绝不是一份详尽的清单。这些算法有各种各样的应用，当你开始探索更高级的算法时，你会经常发现自己依赖于 DFS 和 BFS 作为构建块。它类似于排序 - 排序本身并不是那么有趣，但是能够对值列表进行排序作为更复杂算法中的子程序非常有用。

希望这可以帮助！

# php - 意外的 T_Variable 错误，是什么导致它在循环中？

> ID：14720694
> 
> 赞同：1
> 
> 时间：2013-02-06T02:39:00.647
> 
> 标签：php

我收到一条错误消息：

解析错误：语法错误，意外的 T_VARIABLE in .... 第 599 行

属于以下行：

```
foreach ($questions as $key=>$question) {

    echo '<p><strong>Question:</strong> ' .htmlspecialchars($row_question['question_num'][$key]). ': ' .htmlspecialchars($row_question['question_content']$key]). '</p>' . PHP_EOL;

    } 
```

我做错了什么？

下面是代码：

```
 $question = array();

    while ($selectedstudentanswerstmt->fetch()) {

    $row_question = array();
    $row_question['question_num'] = $detailsQuestionNo;
    $row_question['question_content'] = $detailsQuestionContent;
    $row_question['question_option'] = $detailsOptionType;
    $row_question['question_num_answers'] = $detailsNoofAnswers;
    $row_question['question_answer'] = $detailsAnswer;
    $row_question['questionnum_reply'] = $detailsReplyType;
    $row_question['questionnum_marks'] = $detailsQuestionMarks;
    $questions[] = $row_question;
}

.................

<?php   

          foreach ($questions as $key=>$question) {

echo '<p><strong>Question:</strong> ' .htmlspecialchars($row_question['question_num'][$key]). ': ' .htmlspecialchars($row_question['question_content']$key]). '</p>' . PHP_EOL;

}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T02:39:38.930

你少了一个括号

```
 echo '<p><strong>Question:</strong> ' .htmlspecialchars($row_question['question_num'][$key]). ': ' .htmlspecialchars($row_question['question_content']$key]). '</p>' . PHP_EOL; 
```

应该

```
 echo '<p><strong>Question:</strong> ' .htmlspecialchars($row_question['question_num'][$key]). ': ' .htmlspecialchars($row_question['question_content'][$key]). '</p>' . PHP_EOL; 
```

# javascript - 使用带有 IE8 的 youtube API 的“视频未定义”

> ID：14720701
> 
> 赞同：0
> 
> 时间：2013-02-06T02:39:44.150
> 
> 标签：javascript, jquery, iframe, youtube, youtube-api

我已经使用 iframe youtube api 来处理视频。它在 chrome 和 fx 上运行良好，但在 IE 8 上实现时，它返回的“视频”错误未定义。如何解决问题？谢谢

```
 function loadAPI(){
            var tag = document.createElement('script');
            tag.src = "//www.youtube.com/iframe_api";
            var firstScriptTag = document.getElementsByTagName('script')[0];
            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
        }

// add youtube movie 
$(target).append("<iframe class = '" + className + "' id = '" + id + "' src  = '" + src + "?wmode=transparent' ></iframe>");

function bindYouTube() {
    var player;
    player = new YT.Player(currYoutubeID, {
      videoId: currYoutubeLink,
      events: {
        'onStateChange': onPlayerStateChange
      }
    });
}

function onPlayerStateChange (event) {
    if (event.data == 0)                     
        $("#" + event.target.a.id).remove();
} 
```

ps 我相信我使用的代码不是问题的根源，因为它在 chrome 和 fx 上按预期工作。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:57:21.640

在某些浏览器中，如果元素被隐藏，Flash 嵌入（Flash 由非 HTML5 平台上的 iframe 嵌入使用）将不会初始化。不幸的是，这种情况已经很久了。将嵌入放置在屏幕外是绕过它的好方法。要开始调试，请确保您的元素是可见的。

# python - OSX：安装 python 包时出错

> ID：14720702
> 
> 赞同：0
> 
> 时间：2013-02-06T02:39:55.053
> 
> 标签：python, macos, gcc, installation, pip

**目前，由于 gcc-4.0 错误，我无法安装任何 Python 包。我将复制两个我遇到的错误示例（一个使用*pip*，另一个使用手动 setup.py 构建/安装方法）：**

```
sgarza62$ pip install PIL
Downloading/unpacking PIL
  Running setup.py egg_info for package PIL
    WARNING: '' not a valid package name; please use only.-separated package names in setup.py

Installing collected packages: PIL
  Running setup.py install for PIL
    WARNING: '' not a valid package name; please use only.-separated package names in setup.py
    --- using frameworks at /System/Library/Frameworks
    building '_imaging' extension
    gcc-4.0 -fno-strict-aliasing -fno-common -dynamic -arch ppc -arch i386 -g -O2 -DNDEBUG -g -O3 -DHAVE_LIBZ -I/System/Library/Frameworks/Tcl.framework/Headers -I/System/Library/Frameworks/Tk.framework/Headers -IlibImaging -I/Library/Frameworks/Python.framework/Versions/2.7/include -I/usr/include -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c _imaging.c -o build/temp.macosx-10.3-fat-2.7/_imaging.o
    unable to execute gcc-4.0: No such file or directory
    error: command 'gcc-4.0' failed with exit status 1
    Complete output from command /Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python -c "import setuptools;__file__='/var/folders/9q/bvqtzkbx1hg1934b36zgk0y40000gp/T/pip-build/PIL/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /var/folders/9q/bvqtzkbx1hg1934b36zgk0y40000gp/T/pip-nV9YEx-record/install-record.txt --single-version-externally-managed:
    WARNING: '' not a valid package name; please use only.-separated package names in setup.py

running install

running build

running build_py

running build_ext

--- using frameworks at /System/Library/Frameworks

building '_imaging' extension

gcc-4.0 -fno-strict-aliasing -fno-common -dynamic -arch ppc -arch i386 -g -O2 -DNDEBUG -g -O3 -DHAVE_LIBZ -I/System/Library/Frameworks/Tcl.framework/Headers -I/System/Library/Frameworks/Tk.framework/Headers -IlibImaging -I/Library/Frameworks/Python.framework/Versions/2.7/include -I/usr/include -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c _imaging.c -o build/temp.macosx-10.3-fat-2.7/_imaging.o

unable to execute gcc-4.0: No such file or directory

error: command 'gcc-4.0' failed with exit status 1 
```

* * *

```
sgarza62$ cd Imaging-1.1.7
sgarza62$ sudo python setup.py build
running build
running build_py
running build_ext
--- using frameworks at /System/Library/Frameworks
building '_imaging' extension
gcc-4.0 -fno-strict-aliasing -fno-common -dynamic -arch ppc -arch i386 -g -O2 -DNDEBUG -g -O3 -DHAVE_LIBZ -I/System/Library/Frameworks/Tcl.framework/Headers -I/System/Library/Frameworks/Tk.framework/Headers -IlibImaging -I/Library/Frameworks/Python.framework/Versions/2.7/include -I/usr/include -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c _imaging.c -o build/temp.macosx-10.3-fat-2.7/_imaging.o
unable to execute gcc-4.0: No such file or directory
error: command 'gcc-4.0' failed with exit status 1 
```

* * *

**这是我将从终端复制的一堆信息，希望其中一些有助于识别问题：**

```
sgarza62$ gcc
i686-apple-darwin11-llvm-gcc-4.2: no input files 
```

* * *

```
sgarza62$ python
Python 2.7.3 (v2.7.3:70274d53c1dd, Apr  9 2012, 20:32:06)
[GCC 4.0.1 (Apple Inc. build 5493)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> 
```

* * *

```
sgarza62$ which python
/Library/Frameworks/Python.framework/Versions/2.7/bin/python 
```

* * *

```
sgarza62$ echo $PATH
/Library/Frameworks/Python.framework/Versions/2.7/bin:/Library/Frameworks/Python.framework/Versions/2.7/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin 
```

* * *

```
sgarza62$ /usr/bin/python -c 'import sys;print(sys.version)'
2.7.2 (default, Jun 16 2012, 12:38:40) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)]
sgarza62$ /usr/bin/python2.6 -c 'import sys; print(sys.version)'
2.6.7 (r267:88850, Jun 16 2012, 12:38:45) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)]
sgarza62$ /usr/bin/python2.5 -c 'import sys;print(sys.version)'
2.5.6 (r256:88840, Jun 16 2012, 12:38:24) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)]
sgarza62$ /usr/bin/python2.7 -c 'import sys;print(sys.version)'
2.7.2 (default, Jun 16 2012, 12:38:40) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] 
```

* * *

**以下是堆栈上的一些问题/答案，它们解决了相同或相似的问题（但没有为我的问题提供完整的解决方案）。也许这些以前的答案将有助于解决这个问题：**

[在具有不同 gcc 版本的 Mac OS 10.6 上重新安装 python](https://stackoverflow.com/q/3500638/1337422)

[如何在 Mac OS X 10.8 / Xcode 4.4 上使用/安装 gcc](https://stackoverflow.com/questions/9353444/how-to-use-install-gcc-on-mac-os-x-10-8-xcode-4-4)

[在 OS X 上使用错误版本的 GCC 构建 Python](https://stackoverflow.com/questions/5944228/python-build-using-wrong-version-of-gcc-on-os-x)

* * *

**这些是我已经做过的事情，建议堆栈用户解决类似问题：**

*   下载 Xcode

*   在 Xcode 首选项中安装命令行工具

*   `sudo ln -s /usr/bin/gcc /usr/bin/gcc-4.2`

* * *

在这个问题上，我已尽我所能以清晰有序的方式提供尽可能多的事实。但是，如果你们需要更多信息，请询问！我很乐意用更多细节来编辑这个问题。

另外，我知道这似乎是一个非常具体的问题，但是通过四处搜索，看起来许多其他人对此问题感到困惑。

如果您不介意，我将非常感谢一个勺子喂养的解决方案（明确说明我必须在终端中做什么来解决这个问题）。我在终端上还不是很舒服，对笼统的答案有点困惑。

谢谢大家的时间，我很感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T05:28:56.893

这里的问题是您试图在带有 Xcode 4 的 OS X 系统上使用仅 32 位的 python.org 2.7.3。仅 32 位的安装程序旨在与许多 OS X 版本兼容回到 10.3.9。不幸的是，随着 Xcode 4 中 PPC 支持的移除以及在那里进行的各种其他更改，安装具有 C 扩展模块的第三方 Python 包不再适用于具有 Xcode 4 的 10.7 及更高版本的系统。它不过，可以解决它们。在 PIL 的情况下，通过环境变量更改几个 Python Distutils 默认值应该可以解决问题：

```
# override the default gcc-4.0 compiler and use clang instead
$ export CC=clang
# override the universal architectures to only use Intel-32
$ export ARCHFLAGS='-arch i386'
$ pip install PIL 
```

python.org 网站为当前 Python 版本提供了两个 OS X 安装程序变体。另一个安装程序提供的 Python 是 64 位/32 位版本，配置用于更小、更新的系统范围；它不支持 PPC，Xcode 4 也不会有这个问题。

顺便说一句，Python 2.7 (2.7.4) 的下一个版本通过两个安装程序为 Xcode 4 提供了更好的支持，并且不应该有这个问题。

# xml - 如何使用 VB6 调用 WCF 服务并设置其配置

> ID：14720704
> 
> 赞同：0
> 
> 时间：2013-02-06T02:39:55.590
> 
> 标签：xml, wcf, vb6

我已经浏览了一些主题，并且能够使用以下代码在 vb6 中调用服务：

```
Dim sUrl As String
Dim response As String
Dim xmlHttp

Private Sub Form_Load()
sUrl = "http://abc.com/services/abc.svc"

Set xmlHttp = CreateObject("MSXML2.ServerXMLHTTP")
xmlHttp.Open "POST", sUrl, False

xmlHttp.setRequestHeader "Content-Type", "application/x-www-form-urlencoded"
xmlHttp.send
Dim response As String
response = xmlHttp.responseText

Set xmlHttp = Nothing

End Sub 
```

问题是我如何在 vb6 中调用 WCF 服务并将参数传递给它的方法并获得结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T02:41:53.160

如果您尝试这种方式，您将不得不手动构建请求 XML，发送它，然后再次手动解析响应 XML。

更好的方法是在 VB.NET 或 C# 中创建 WCF 客户端，然后将客户端公开为 COM 对象。您的 VB6 代码将能够像对待任何其他 COM 对象一样对待它，因此它根本不需要使用 XML。

请参阅“[在 VB6 中与 WCF Windows 服务通信？](https://stackoverflow.com/questions/7615540/communicate-with-wcf-windows-service-in-vb6) ”。

# asp.net - 如果选项卡之一处于活动状态，如何在多个选项卡中保持会话活动，如果所有选项卡都处于非活动状态，如何使其死亡

> ID：14720706
> 
> 赞同：0
> 
> 时间：2013-02-06T02:40:13.797
> 
> 标签：asp.net, session-timeout

用户正在访问该网站并打开了多个选项卡。

**会话应在以下情况下保持活动状态：**
任何选项卡处于活动状态（鼠标移动和键盘上的击键）。

**在以下情况下，会话应该终止并自动重定向到登录页面：**
所有选项卡都处于非活动状态（没有鼠标移动，没有击键）

你能提示我怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T14:15:53.650

这是一个肮脏的解决方案，我还没有尝试过，但这在理论上可行：

1.  当您检测到页面上的活动时，在数据库表中保存一个标志以表示页面上有活动（可能还需要时间戳来帮助您确定活动发生多长时间以及用户标识符以确保它是正确的会话）。根据您希望保存的频率，您可以使用这样的简单脚本 ( [https://stackoverflow.com/a/3877867/987905](https://stackoverflow.com/a/3877867/987905) ) 来跟踪最近的击键或您想要跟踪的任何内容，然后一段时间后（比如 5 分钟），如果有活动，决定将其保存到数据库中（这样你就不会在每次检测到活动时都保存数据库）。
2.  在检查会话是否处于活动状态期间，检查数据库中的标志和时间戳，以查看会话是否在该用户登录的任何实例上报告为活动状态。如果是，请通过您的 Keep 重新激活会话活着，或重新认证。

同样，我还没有尝试过，但最近一直在考虑。这似乎是一个可行的解决方案，只是带来了在幕后进行数据库保存/调用的缺点，可能会损害性能。

# c# - 实体框架 5.0 ValidateOnSaveEnabled 不起作用？

> ID：14720707
> 
> 赞同：1
> 
> 时间：2013-02-06T02:40:18.093
> 
> 标签：c#, .net, entity-framework, entity-framework-5

```
public void Delete<TEntity>(TEntity entity) where TEntity : class, IEntity
{
    this.Configuration.ValidateOnSaveEnabled = false;
    if (!this.Set<TEntity>().Local.Any(d => d.Id == entity.Id))
    {
        this.Set<TEntity>().Attach(entity);
    }
    this.Set<TEntity>().Remove(entity);
    SaveChanges();
    this.Configuration.ValidateOnSaveEnabled = true;
} 
```

上面的代码在 SaveChanges() 上引发异常。

```
[DbUpdateException: Null value for non-nullable member. Member: 'Name'.] 
```

删除实体时如何删除验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T03:39:08.947

不确定这是否是问题，但如果您使用存根对象删除实体，请尝试将其设置`DbEntityEntry.State`为已删除。我不确定你是否甚至需要`validateOnSaveEnabled`关闭。

```
public void Delete<TEntity>(TEntity entity) where TEntity : class, IEntity
{
    this.Configuration.ValidateOnSaveEnabled = false;
    TEntity alreadyAttached = this.Set<TEntity>().Local
                                  .FirstOrDefault(d=>d.Id == entity.Id);
    if(alreadyAttached != null) entity = alreadyAttached;
    this.Entry<TEntity>(entity).State = EntityState.Deleted;
    SaveChanges();
    this.Configuration.ValidateOnSaveEnabled = true;
 } 
```

**编辑**

上面写的可能并不完全正确。正如 Pawel 指出的那样，它`DbUpdateException`不是`DbEntityValidationException`。以上可能对您有用的原因是如果附有实体则处理案件。

```
if(!this.Set<TEntity>().Local.Any(d=>d.Id == entity.Id))
{
    this.Set<TEntity>().Attach(entity);
}
this.Set<TEntity>().Remove(entity); 
```

如果实体已附加，请考虑此处的情况。不是传递的实体实例（您只是在比较 id），而是表示同一实体的另一个实例。现在考虑如果您在此之前在代码中的某处修改了这个其他实体，它将被上下文跟踪为已修改。然后，您尝试删除传递的实体实例 - 未被跟踪的实体实例 - 导致无操作。然后调用 savechanges 和 BAM！`DbUpdateException`当 EF 尝试更新您认为已删除的实体时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T17:38:43.423

您看到的异常与您所拥有的验证无关，而是 DbUpdateException 而不是验证异常）。异常消息表明，正在保存的实体的 Name 属性为空，而数据库中的列不可为空。（如果启用了验证，您可能会收到验证错误 - 这就是您尝试禁用它的原因吗？）

# google-maps - 如何使用 geturl() 显示来自 google place api 的照片？

> ID：14720709
> 
> 赞同：1
> 
> 时间：2013-02-06T02:40:29.863
> 
> 标签：google-maps, google-maps-api-3, google-places-api

```
function createPhotoMarker(place) {

var photos = place.photos;

if (!photos) {

    return;
  }

  var marker = new google.maps.Marker({

    map: map,
    position: place.geometry.location,
    title: place.name,
    icon: photos[0].getUrl({'maxWidth': 35, 'maxHeight': 35})
  });

} 
```

我使用上述功能，但没有任何工作......

# vba - VBA中的DIR（路径）有没有办法处理超过260的字符串？

> ID：14720710
> 
> 赞同：9
> 
> 时间：2013-02-06T02:40:38.117
> 
> 标签：vba, excel

给定以下代码段：

```
Dim s As String: s = "S:\vic\bla\[..insert more here..]\data.xml"
Debug.Print Len(s)
Debug.Print Dir(s) 
```

如果`Len(s) >= 260`我收到说明以下内容的错误：

```
Run-time error '53':

File not found 
```

如果字符串小于 260，它可以正常工作并显示已找到和未找到文件的预期行为。

是否可以让 DIR 使用长（> 260）路径名？

笔记

*   文件重组不是一种选择

*   我在 Excel 2007 中运行它

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T04:12:46.410

简而言之（回答标题的答案）：不。VBA 的`Dir`功能根本不适用于超过 260 个字符的路径。

长版： http: [//msdn.microsoft.com/en-us/library/aa365247](http://msdn.microsoft.com/en-us/library/aa365247(VS.85).aspx#maximum_path_length) (VS.85).aspx#maximum_path_length （然后 Ctrl+F 并搜索“260”）

> **最大路径长度限制**
> 
> 在 Windows API（以下段落中讨论的一些例外情况）中，路径的最大长度为 MAX_PATH，定义为 260 个字符。本地路径按以下顺序构造：驱动器号、冒号、反斜杠、由反斜杠分隔的名称组件和终止空字符。例如，驱动器 D 上的最大路径是“D:\some 256-character path string”，其中“”表示当前系统代码页的不可见终止空字符。（字符 < > 在此处用于视觉清晰，不能作为有效路径字符串的一部分。） 注意 Windows API 中的文件 I/O 函数将“/”转换为“\”作为将名称转换为 NT-样式名称，除非使用以下部分中详述的“\?\”前缀。Windows API 有许多函数也有 Unicode 版本，以允许最大总路径长度为 32,767 个字符的扩展长度路径。这种类型的路径由由反斜杠分隔的组件组成，每个组件都达到 GetVolumeInformation 函数的 lpMaximumComponentLength 参数中返回的值（该值通常为 255 个字符）。要指定扩展长度的路径，请使用“\?\”前缀。例如，“\?\D:\非常长的路径”。注意 最大路径 32,767 个字符是近似值，因为“\?\”前缀可能会在运行时被系统扩展为更长的字符串，并且此扩展适用于总长度。767 个字符。这种类型的路径由由反斜杠分隔的组件组成，每个组件都达到 GetVolumeInformation 函数的 lpMaximumComponentLength 参数中返回的值（该值通常为 255 个字符）。要指定扩展长度的路径，请使用“\?\”前缀。例如，“\?\D:\非常长的路径”。注意 最大路径 32,767 个字符是近似值，因为“\?\”前缀可能会在运行时被系统扩展为更长的字符串，并且此扩展适用于总长度。767 个字符。这种类型的路径由用反斜杠分隔的组件组成，每个组件的最大长度为 GetVolumeInformation 函数的 lpMaximumComponentLength 参数中返回的值（该值通常为 255 个字符）。要指定扩展长度的路径，请使用“\?\”前缀。例如，“\?\D:\非常长的路径”。注意 最大路径 32,767 个字符是近似值，因为系统在运行时可能会将“\?\”前缀扩展为更长的字符串，并且此扩展适用于总长度。

我认为关于*Win32 File NameSpaces*的部分值得一试：

> 对于文件 I/O，路径字符串的“\?\”前缀告诉 Windows API 禁用所有字符串解析并将紧随其后的字符串直接发送到文件系统。例如，如果文件系统支持大路径和文件名，则您可以超过由 Windows API 强制执行的 MAX_PATH 限制。有关正常最大路径限制的更多信息，请参阅上一节最大路径长度限制。

必须有一个 Win32 API 函数您可以`DECLARE`使用，但这不是使用该`DIR`函数。抱歉，手头没有长路径名来测试任何东西......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T14:34:31.183

这是一些无论深度如何都应该工作的代码......基本上，它指定了相对路径 - 所以你永远不会`dir`用长字符串调用

```
Function deepFileExists(longFileName As String)
' slowly make your way to the deepest folder...
' assuming "\" is used as separator
' you could add some code to replace "/" with "\"...

Dim pathFragment As String, currentDir As String
Dim slash As Integer, lastSlash As Integer

slash = InStr(1, longFileName, "\")
lastSlash = 0

pathFragment = Mid(longFileName, 1, slash - 1)

currentDir = CurDir        ' save the current directory
ChDrive pathFragment       ' making sure we have the right drive
ChDir pathFragment & "\"   ' be at the root of this drive's directory

lastSlash = slash
slash = InStr(slash + 1, longFileName, "\")

While (slash > 0)
  pathFragment = ".\" & Mid(longFileName, lastSlash + 1, slash - lastSlash)
  ChDir pathFragment
  'MsgBox "changing directory to " & pathFragment
  lastSlash = slash
  slash = InStr(slash + 1, longFileName, "\")
Wend

' now we can look for the file:
Dim a
a = Dir(Mid(longFileName, lastSlash + 1))
If Len(a) > 0 Then
  deepFileExists = True
Else
  deepFileExists = False
End If

End Function 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T12:58:32.343

我无法对此进行测试，因此您所拥有的只是一些关于可能方法的粗略说明。

```
''Reference: Windows Script Host Object Model
Dim fs As New FileSystemObject
Dim fl As Folder
Dim fl2 As Folder

Set fl = fs.GetFolder("Z:\Docs\test\ThisIsInOrderToCreate\ALongFilePath\")
Set fl2 = fl.SubFolders("WithASubFolder")
Debug.Print fl2.ShortPath
For Each File In fl2.Files
    If File.Name = "file.txt" Then
        Debug.Print "Found"
    End If
Next

''May be possible
a = Dir(fl.ShortPath & "\file.*") 
```

另外，关于上面的评论：

```
Set WshNetwork = CreateObject("WScript.Network")
WshNetwork.MapNetworkDrive "L:", "\\mydrive\share"
''Important to destroy when you are finished
Set WshNetwork = Nothing 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-09T12:57:19.287

我找到了这个 MS 页面： [命名文件、路径和命名空间](https://msdn.microsoft.com/en-gb/library/windows/desktop/aa365247(v=vs.85).aspx#short_vs._long_names)

> 最大路径长度限制 在 Windows API（以下段落中讨论的一些例外情况）中，路径的最大长度为 MAX_PATH，定义为 260 个字符。本地路径按以下顺序构造：驱动器号、冒号、反斜杠、由反斜杠分隔的名称组件和终止空字符。例如，驱动器 D 上的最大路径是“D:\some 256-character path string”，其中“”表示当前系统代码页的不可见终止空字符。（字符 < > 在这里用于视觉清晰，不能作为有效路径字符串的一部分。） 注意 Windows API 中的文件 I/O 函数将“/”转换为“\”作为将名称转换为 NT-样式名称，除非使用“\?\”
> 
> Windows API 有许多函数也有 Unicode 版本，以允许最大总路径长度为 32,767 个字符的扩展长度路径。这种类型的路径由由反斜杠分隔的组件组成，每个组件都达到 GetVolumeInformation 函数的 lpMaximumComponentLength 参数中返回的值（该值通常为 255 个字符）。要指定扩展长度的路径，请使用“\?\”前缀。例如，“\?\D:\非常长的路径”。注意 最大路径 32,767 个字符是近似值，因为“\?\”前缀可能会在运行时被系统扩展为更长的字符串，并且此扩展适用于总长度。
> 
> “\?\”前缀也可以用于根据通用命名约定 (UNC) 构建的路径。要使用 UNC 指定此类路径，请使用“\?\UNC\”前缀。例如，“\?\UNC\server\share”，其中“server”是计算机的名称，“share”是共享文件夹的名称。这些前缀不用作路径本身的一部分。它们表明路径应该以最少的修改传递给系统，这意味着您不能使用正斜杠来表示路径分隔符，或者使用句点来表示当前目录，或者使用双点来表示父目录。因为您不能将“\?\”前缀与相对路径一起使用，所以相对路径总是限制为总共 MAX_PATH 字符。

因此，对于很长的 UNC 路径，我更改了路径的开头，如下所示，它可以工作。

```
 Const MAX_PATH_LENGTH As Integer = 260

    If Len(fname) > MAX_PATH_LENGTH Then
        fname = "\\?\UNC\" & Mid$(fname, 3)
    End If
    Set fsoObject = New Scripting.FileSystemObject
    FileExists = fsoObject.FileExists(fname) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-18T11:56:42.940

由于我无法回复包含 deepfileexists 代码的评论，因此这里修改了代码，以便您可以找到网络路径（因为他回答说他有网络位置）

您需要一个调用 system32 的函数来执行到网络驱动器的直接路径。我从[这里得到了代码](https://www.mrexcel.com/forum/excel-questions/4035-open-file-using-unc-names-chdrive.html)

继承人代码，在模块顶部插入私有函数，否则它将不起作用。它使功能专门与该模块相关联，如果您想将其打开到整个工作簿，请关闭私有功能。

```
Private Declare Function SetCurrentDirectoryA Lib "kernel32" _
    (ByVal lpPathName As String) As Long 
```

然后是带有修改后代码的函数，以在网络驱动器以 \ 开头时接受该函数

```
Function deepFileExists(longFileName As String)
' slowly make your way to the deepest folder...
' assuming "\" is used as separator
' you could add some code to replace "/" with "\"...

Dim pathFragment As String, currentDir As String
Dim slash As Integer, lastSlash As Integer

If Left(longFileName, 2) = "\\" Then
    slash = InStr(3, longFileName, "\")
    Else
    slash = InStr(1, longFileName, "\")
End If

lastSlash = 0

pathFragment = Mid(longFileName, 1, slash - 1)

currentDir = CurDir        ' save the current directory
If Not Left(pathFragment, 2) = "\\" Then
    ChDrive pathFragment       ' making sure we have the right drive
    ChDir pathFragment & "\"   ' be at the root of this drive's directory
    Else
        SetCurrentDirectoryA (pathFragment)
End If

lastSlash = slash
slash = InStr(slash + 1, longFileName, "\")

While (slash > 0)
    pathFragment = ".\" & Mid(longFileName, lastSlash + 1, slash - lastSlash)
    If Not Left(longFileName, 2) = "\\" Then
        ChDir pathFragment
    Else
        SetCurrentDirectoryA (pathFragment)
    End If
    'MsgBox "changing directory to " & pathFragment
    lastSlash = slash
    slash = InStr(slash + 1, longFileName, "\")
Wend

' now we can look for the file:
Dim a As String
Dim something As String
something = Mid(longFileName, lastSlash + 1)

a = Dir(something)
If Len(a) > 0 Then
    deepFileExists = True
Else
    deepFileExists = False
End If

End Function 
```

# ios - UITextView 和神秘的缺失空间

> ID：14720720
> 
> 赞同：14
> 
> 时间：2013-02-06T02:42:02.430
> 
> 标签：ios, iphone, objective-c, uitextview, uiapplicationdelegate

我有一个应用程序，其中包含一些`UITextView`不同大小的 s。看来，如果`UITextView`足够小的 font.pointSize 足够高，那么在文本足够大以填充文本视图之后，就无法添加空格。

**例如：**

我试图弄清楚这里发生了什么，我开始输入我通常的调试字符串，我输入“什么”按空格键并且没有出现空格（但这很常见）。我输入了“the”，看起来它就被贴在了前一个单词的末尾。果然，没有空位。我可以回去添加空格，一旦我添加了空格，我可以添加其他空格作为自动换行然后变得有效。

另一个神秘的行为是，当你双击空格时，它不会在末尾添加句点。它用句点替换最后一个字符。所以，“什么”+空格+空格就变成了“什么”。

现在，我正在用字体大小做一些有趣的事情，比如我正在自动调整字体大小，以便文本填充在合理范围内提供的空间，但是当我禁用它时，我仍然可以重现该行为。唯一的区别是，单词不是放在一行上，而是换行到下一行。

例如，如果我输入“What”+空格+“the”，它会出现“Whatthe”，第一行是“What”，第二行是“the”（尽管我只能看到“the”的顶部。此外，这里有一些来自`textViewDidChange:`.

```
Character    textView.text.length
---------    --------------------
W            1
h            2
a            3
t            4
<space>      4
t            5
h            6
<space>      7    <----  Here's a wierd one . . . now spaces all
?            8           work fine unless it's resizing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T23:06:19.640

> 另一个神秘的行为是，当你双击空格时，它不会在末尾添加句点。它用句点替换最后一个字符。所以，“什么”+空格+空格就变成了“什么”。

这并不神秘。这意味着您`UITextView`使用**自动更正**。使固定：

```
UITextView *txtView; // your UITextView
[txtView setAutocorrectionType:UITextAutocorrectionTypeNo]; 
```

关于空格...由于空格不是可绘制的符号，因此您`UITextView`无法测量大小（宽度因**对齐方式**不同而不同），因此您`UITextView`的`contentSize`属性不会改变并且表现得很神秘。你应该`contentSize` **手动**设置（你可以很容易地计算你`NSString`的`sizeWithFont:`方法的大小）。

# python - How to read each line in txt file which is in rar file in python

> ID：14720721
> 
> 赞同：1
> 
> 时间：2013-02-06T02:42:03.150
> 
> 标签：python

Now I have a task to program: read each line of a txt file which is compressed in a rar file (read directly, not extract the rar file). But I see an unusual problem:

When I print each line of the txt file, it shows only characters of each line. Here are the code:

```
import rarfile
rf = rarfile.RarFile('C:\\Users\\THELN\\Downloads\\theln.rar')
for f in rf.infolist():
    print f.filename, f.file_size
    #if f.filename == 'theln.txt':
    openf=rf.read(f)
    for line in openf:
        print line 
```

Here is the result of a line (hello python):

h

e

l

l

o

p

y

t

h

o

n

I've tried to read each line directly in txt file and the code works well. Is there anyone who faces the same problem? Thank you for your help

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T02:54:16.123

Change the line

```
for line in openf: 
```

to

```
for line in openf.split("\n"): 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T02:58:35.123

A minor adjustment in your code will get you there.

Look at the following snippet....Don't use the rarfile.RarFile class object to read. Use the filename

```
import rarfile
rf = rarfile.RarFile('C:\\Users\\THELN\\Downloads\\theln.rar')
for f in rf.infolist():
    print f.filename, f.file_size
    openf=rf.open(f.filename)
    for line in openf:
        print line.replace('\n') 
```

# opencv - 二值图像方向

> ID：14720722
> 
> 赞同：10
> 
> 时间：2013-02-06T02:42:08.357
> 
> 标签：opencv, computer-vision

我试图找到二进制图像的方向（其中方向被定义为最小惯性矩的轴，即最小第二面积矩）。我正在使用霍恩博士的关于机器人视觉的书 (MIT) [，可以在此处找到](http://people.csail.mit.edu/bkph/courses/papers/RoVis/ch3_BI_geometric.pdf)作为参考。

使用 OpenCV，这是我的函数，其中 a、b 和 c 是上述 pdf 第 15 页（正文第 60 页）中的面积的二阶矩：

```
Point3d findCenterAndOrientation(const Mat& src)
{
    Moments m = cv::moments(src, true);
    double cen_x = m.m10/m.m00; //Centers are right
    double cen_y = m.m01/m.m00;

    double a = m.m20-m.m00*cen_x*cen_x;
    double b = 2*m.m11-m.m00*(cen_x*cen_x+cen_y*cen_y);
    double c = m.m02-m.m00*cen_y*cen_y;

    double theta = a==c?0:atan2(b, a-c)/2.0;

    return Point3d(cen_x, cen_y, theta);
} 
```

OpenCV 计算围绕原点 (0,0) 的第二个矩，因此我必须使用[平行轴定理](http://en.wikipedia.org/wiki/Parallel_axis_theorem)将轴移动到形状的中心，mr^2。

当我打电话时，中心看起来不错

```
Point3d p = findCenterAndOrientation(src);
rectangle(src, Point(p.x-1,p.y-1), Point(p.x+1, p.y+1), Scalar(0.25), 1); 
```

但是，当我尝试使用此功能绘制具有最低转动惯量的轴时，它看起来完全**错误**：

```
line(src, (Point(p.x,p.y)-Point(100*cos(p.z), 100*sin(p.z))), (Point(p.x, p.y)+Point(100*cos(p.z), 100*sin(p.z))), Scalar(0.5), 1); 
```

以下是输入和输出的一些示例：

![在此处输入图像描述](../Images/57f50161935fdffa27d9616168438f55.png) ![在此处输入图像描述](../Images/61d3559c8c003a4c134172225e5be91e.png)

（我希望它是垂直的）

![在此处输入图像描述](../Images/e403451568ad3a46e9655c5884bcf13a.png) ![在此处输入图像描述](../Images/8c4dc7aac1fdfeb31b83b13d150e78df.png)

（我希望它是水平的）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T02:56:23.877

我有时会返回方向并编写以下代码。它返回我对象的确切方向。最大轮廓是检测到的形状。

```
CvMoments moments1,cenmoments1;
           double M00, M01, M10;

           cvMoments(largest_contour,&moments1);
           M00 = cvGetSpatialMoment(&moments1,0,0);
           M10 = cvGetSpatialMoment(&moments1,1,0);
           M01 = cvGetSpatialMoment(&moments1,0,1);
           posX_Yellow = (int)(M10/M00);
           posY_Yellow = (int)(M01/M00);

          double theta = 0.5 * atan(
                    (2 * cvGetCentralMoment(&moments1, 1, 1)) /
                    (cvGetCentralMoment(&moments1, 2, 0) -  cvGetCentralMoment(&moments1, 0, 2)));
                theta = (theta / PI) * 180;

                // fit an ellipse (and draw it)

                if (largest_contour->total >= 6) // can only do an ellipse fit
                                                 // if we have > 6 points
                {
                    CvBox2D box = cvFitEllipse2(largest_contour);
                    if ((box.size.width < imgYellowThresh->width) &&  (box.size.height < imgYellowThresh->height))
                    {

                        cvEllipseBox(imgYellowThresh, box, CV_RGB(255, 255 ,255), 3, 8, 0 );
                    }
                } 
```

# ruby-on-rails - 完全转义多行 erb 段

> ID：14720724
> 
> 赞同：2
> 
> 时间：2013-02-06T02:42:45.443
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, html

我正在尝试创建一个简单的部分，它允许我显示代码块而不会在我的代码中经历奇怪的扭曲。

所以我在部分做了这个：

```
<% lang ||= "" %>
<% language = "lang='#{lang}'" %>

<div class="codebox">
        <% if title %>
            <h3><%= title %></h3>
        <% end %>
    <pre <%= language %>><%=text.unindent%></pre>
</div> 
```

这在 lib 中用于取消缩进字符串（感谢一个非常好的 SO 建议）：

```
class String
    def unindent; gsub(/^#{scan(/^\s+/).min}/, "") end
end 
```

然后，我可以这样做，得到一个非常漂亮的小代码框：

```
<%= render partial: 'pre', locals: { title: "example.html", lang: 'html', text: "
                <div class='cl' style='text-align:center'>
                  <div class='collapse-group'>
                        <!-- Title, always viewable --> 
                        <a class='bundle' href='#'>'Click here to expand'</a> 
                    <div class='collapse'>
                        <!-- The content to be hidden or shown -->
                    </div> 
                  </div>
                </div>
                "} %> 
```

这变成了这样：

![在此处输入图像描述](../Images/45ab41ba9036d72545ece6b4cf6ff80b.png)

就像一个魅力，除非我放入一堆 erb，在这种情况下它会发疯并开始到处出错。例如错误产生者（内容不是超级相关。我确保其中的所有引号都是双引号，而“字符串”是单引号）：

```
<%= render partial: 'pre', locals: { title: "example.html", lang: 'html', text: '
                <% sub ||= "" %>
                <% term ||= "(expand)" %>
                <% style ||= "" %>

                <div class="cl" style="text-align:center">
                <div class="collapse-group">
                    <<%=tag%> class="squeeze" style=<%="#{style}"%>> 
                        <%=title%> 
                        <% if sub != "" %> 
                            <small><%= sub %></small>
                        <% end %>
                        <a class="bundle" href="#"><%= term %></a> 
                    </<%=tag%>>
                <div class="collapse">
                ' } %> 
```

任何方式我都可以告诉 html 我在这些引号中输入的是 100% 的文字字符？我已经尝试单独转义 ">"s 和 ">"s 和 "%"s 等等，这是一条混乱（且无效）的路径，我希望不要走下去。

EX 我希望上面的样子：

![在此处输入图像描述](../Images/df9619e6a1bf5606c9cf05fb38dec0b7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:42:00.997

我认为一个很好的方法是使用[#capture](http://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#method-i-capture)，例如在帮助器中（未经测试，只是提示要做什么）：

```
def code_block( title = nil, lang = nil, &block )
  output = capture( &block ) # this is the answer to all your problems
  output = output.unindent   # optional, escape it as you want, too
  # rendering a partial is still possible, 
  # but i'd recommend using an absolute path : 
  render partial: 'my_html_bits/code_block', 
         locals:  {title: title, lang: lang, text: output }
end 
```

那么你可以这样做：

```
<%= code_block( 'example.html', 'html' ) do %>
  <%# whatever code here will be captured %>
  <p>Even plain old html.</p>
<% end %> 
```

**作为旁注：**

*   您的`#unindent`方法或多或少模仿了 #strip_heredoc 上的现有 ActiveSupport`String`猴子[补丁](http://apidock.com/rails/String/strip_heredoc)
*   在这些情况下，使用[#content_tag](http://apidock.com/rails/ActionView/Helpers/TagHelper/content_tag)也可以为您省去很多麻烦，即：

    ```
    <<%=tag%> class="squeeze" style=<%="#{style}"%>>
    # more code... 
    ```

    可能变成：

    ```
    <%= content_tag tag, class: 'squeeze', style: style do %>
    # more code... 
    ```

# python - 如何使用python在sqlite3中插入空值

> ID：14720725
> 
> 赞同：0
> 
> 时间：2013-02-06T02:42:44.837
> 
> 标签：python, sqlite

我在 sqlite3 中创建了一个表，结构如下：

```
cid     name                    type    notnull         pk
0   wheelId                 INTEGER 1       1
1   wheelName           VARCHAR 1       0
2   paraDiam            INTEGER 0       0
3   paraWidth           FLOAT   0       0
4   paraEt                  FLOAT   0       0
5   paraHole            INTEGER 0       0
6   factParaHole            INTEGER 0       0
7   paraCenterhole          FLOAT   0       0
8   wheelColorName          VARCHAR 0       0
9   wheelColorNameShow  TEXT    0       0
10  paraWeight          FLOAT   0       0
11  vpPrice                 INTEGER 0       0
12  ntStock                 INTEGER 0       0
13  wheelURL            VARCHAR 0       0
14  wheelImg            VARCHAR 0       0
15  wheelRank           INTEGER 0       0 
```

现在，我使用python向表中插入一条记录，我只想插入列值'wheelName'，'wheelImg'并将其他列保持为空，（第一个是`wheelId`，我希望它可以增加自动）。

我几乎使用了网站上可以找到的所有方法：

1.  `cursor.execute("""INSERT INTO WHEELS (wheelName,wheelImg) VALUES (%s,%s)""" , (WHEELNAME,WHEELIMG))`

    Python 抛出`sqlite3.OperationalError: near "%": syntax error`

2.  ```
    cursor.execute("""INSERT INTO WHEELS(WHEELID,WHEELNAME, PARADIAM, PARAWIDTH, PARAET,PARAHOLE,FACTPARAHOLE,
                            PARACENTERHOLE,WHEELCOLORNAME,WHEELCOLORNAMESHOW,PARAWEIGHT,VPPRICE,NTSTOCK,
                            WHEELURL,WHEELIMG,WHEELRANK)

                   VALUES (%s,%s,%s,%s,%s,%s,%s,%s,%s,%s,%s,%s,%s,%s,%s,%s)""" ,
                   (WHEELID, WHEELNAME, PARADIAM, PARAWIDTH, PARAET,PARAHOLE,FACTPARAHOLE,
                    PARACENTERHOLE,WHEELCOLORNAME,WHEELCOLORNAMESHOW,PARAWEIGHT,VPPRICE,NTSTOCK,
                    WHEELURL,WHEELIMG,WHEELRANK)) 
    ```

我将其他值设置为`None` ：

```
PARADIAM = None
PARAWIDTH = None
PARAET = None
PARAHOLE = None 
```

和 python 再次抛出`sqlite3.OperationalError: near "%": syntax error`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T02:43:56.753

`sqlite3`适配器`?`用于 SQL 参数，而不是`%s`：

```
cursor.execute("INSERT INTO WHEELS (wheelName,wheelImg) VALUES (?, ?)", (WHEELNAME,WHEELIMG)) 
```

您的架构还限制了`wheelColorNameShow`：

```
"wheelColorNameShow" TEXT check(typeof("wheelColorNameShow") = 'text') 
```

这意味着它不能再为 NULL。您*还必须*为该列包含一个值：

```
cursor.execute('insert into wheels (wheelName,wheelImg,wheelColorNameShow) VALUES (?, ?, ?)', ('test', 'test', 'test')) 
```

成功。

# php - 计算多维数组中的值？

> ID：14720726
> 
> 赞同：0
> 
> 时间：2013-02-06T02:42:49.657
> 
> 标签：php, arrays

我有一个大数组，我基本上需要计算唯一数： [示例数组](http://sebsauvage.net/paste/?0fed0a0438e9c791#AomjzLQVV6e9Ex8s1qGaB6QIGkLOUfnlUwSgZxQ2HUM=)

我正在寻找的最终结果是

```
$result = array(
    'A3D5' => array('P2' => 1, 'P3' => 1, 'P4' => 1, 'total' => 3),
    'AE5S' => array('P4' => 1, 'total' => 1)
); 
```

我已经尝试过遍历，但似乎无法弄清楚如何将它们分类为另一个键，类似于`$zone = "P{$array['zone']}"; $result[$zone][$prestige]++`或似乎不起作用或只是错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T03:12:53.097

```
$array = array(
    "denizen" => array
        (
            "prestige" => 2,
            "zone" => "A3D5",
            "scope_frag" => 765
        ),

    "생각" => array
        (
            "prestige" => 4,
            "zone" => "A3D5",
            "scope_frag" => 135
        ),

    "Ryans" => array
        (
            "prestige" => 3,
            "zone" => "A3D5",
            "scope_frag" => 78
        ),

    "지적인" => array
        (
            "prestige" => 2,
            "zone" => "AE5S",
            "scope_frag" => 481
        )
);
foreach ($array as $group) {
    $zones[$group["zone"]][] = $group["prestige"];
}
foreach ($zones as $name => $zone) {
    $total = count($zone);
    foreach ($zone as $prestige) {
        $result[$name]["P".$prestige] += 1;
    }
    ksort($result[$name]);
    $result[$name]["total"] = $total;
}
echo "<pre>";
print_r($result);
echo "</pre>"; 
```

# sql - 在 SQL 过程中从 csv 文件中读取变量

> ID：14720727
> 
> 赞同：4
> 
> 时间：2013-02-06T02:42:52.887
> 
> 标签：sql, sql-server, tsql, openrowset

我有数百个要导入数据库表的 .xlsx 文件。我在 csv 文件中有文件的名称。我想循环遍历该 csv 文件，以使这数百个文件的导入过程更加简单。

这是我当前插入的脚本，我必须为每个文件写出。

```
INSERT INTO TableName Select *, 'FileName' as 'SurveyName' 
FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0',
'Excel 12.0;Database=C:\FileName.xlsx;HDR=YES', 'SELECT * FROM [Sheet1$]') 
```

我的问题是我必须为每个不同的文件名重复/更改此语句数百甚至数千次。

所以接下来的几个语句看起来像这样。

```
INSERT INTO TableName Select *, 'FileName2' as 'SurveyName' 
FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0',
'Excel 12.0;Database=C:\FileName2.xlsx;HDR=YES', 'SELECT * FROM [Sheet1$]')

INSERT INTO TableName Select *, 'FileName3' as 'SurveyName' 
FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0',
'Excel 12.0;Database=C:\FileName3.xlsx;HDR=YES', 'SELECT * FROM [Sheet1$]')

INSERT INTO TableName Select *, 'FileName4' as 'SurveyName' 
FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0',
'Excel 12.0;Database=C:\FileName4.xlsx;HDR=YES', 'SELECT * FROM [Sheet1$]')

INSERT INTO TableName Select *, 'FileName5' as 'SurveyName' 
FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0',
'Excel 12.0;Database=C:\FileName5.xlsx;HDR=YES', 'SELECT * FROM [Sheet1$]') 
```

...

```
INSERT INTO TableName Select *, 'FileName700' as 'SurveyName' 
FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0',
'Excel 12.0;Database=C:\FileName700.xlsx;HDR=YES', 'SELECT * FROM [Sheet1$]') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:19:08.740

请将**C:\work\**替换为 1000 of *.xlsx 所在的文件夹名称。修改后在 SSMS 中运行以下脚本。

**脚本**

```
 -- Create temp table
    create table #files  (ID int IDENTITY, FileName varchar(100))

    BULK
    INSERT #files 
    FROM 'c:\test.csv'
    WITH
    (
    FIELDTERMINATOR = ',',
    ROWTERMINATOR = '\n'
    )

    select  
    'INSERT INTO TableName Select *, ''' + FileName + ''' as ''SurveyName'' 
    FROM OPENROWSET(''Microsoft.ACE.OLEDB.12.0'',
    ''Excel 12.0;Database=C:\work\' + FileName + ';HDR=YES'', ''SELECT * FROM [Sheet1$]'')' as 'InsertSql'
     from #files
-- Drop temp table
Drop table #files 
```

**结果**将为您提供每个 .xlsx 文件的 instert 语句。将这些语句复制/粘贴到 SSMS 并执行 (F5) 以加载数据。

```
INSERT INTO TableName Select *, 'Files1.xls' as 'SurveyName'   FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0',  'Excel 12.0;Database='C:\work\Files1.xls';HDR=YES', 'SELECT * FROM [Sheet1$]')
INSERT INTO TableName Select *, 'Files2.xls' as 'SurveyName'   FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0',  'Excel 12.0;Database='C:\work\Files2.xls';HDR=YES', 'SELECT * FROM [Sheet1$]') 
```

复制和粘贴

# sql - Rails 模型生成大量 sql 查询

> ID：14720728
> 
> 赞同：0
> 
> 时间：2013-02-06T02:42:53.010
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, optimization

我有一个模型（LineItem），它是另一个（发票）的孩子。在 LineItem 中，我委托了一个引用 Invoice 中的属性的方法。每当运行此方法时，它总是会运行几个 SQL 查询……就好像它在重新搜索 Invoice

模型“发票”
- 包含属性“created_at”
- 包含`default_scope includes(:line_items, :payments, :sales_person)`

模型“LineItem”
- 包含`delegate :created_at, :to => :invoice, :prefix => true`
- 另一个方法包含：

```
@tax_rate ||= (category.to_sym == :books ? invoice_created_at.federal_tax_rate : invoice_created_at.tax_rate) 
```

正是在这种方法中生成了以下内容（使用“mini-profiler”gem）：

```
SELECT `invoices`.* FROM `invoices`  WHERE `invoices`.`id` = 4 LIMIT 1
SELECT `line_items`.* FROM `line_items`  WHERE `line_items`.`invoice_id` IN (4)
SELECT `items`.* FROM `items`  WHERE `items`.`id` IN (31, 15)
SELECT `categories`.* FROM `categories`  WHERE `categories`.`id` IN (6, 1) ORDER BY name
SELECT `payments`.* FROM `payments`  WHERE `payments`.`invoice_id` IN (4)
SELECT `payment_types`.* FROM `payment_types`  WHERE `payment_types`.`id` IN (1) ORDER BY name
SELECT `sales_people`.* FROM `sales_people`  WHERE `sales_people`.`id` IN (1) ORDER BY name 
```

它对每个行项目执行此操作。在调用 invoice_created_at.*tax_rate 方法之前，所有这些 SELECT 语句已经批量发生......

```
SELECT `invoices`.* FROM `invoices`  WHERE (created_at between '2011-05-01 04:00:00' and '2013-02-06 04:59:59')
SELECT `line_items`.* FROM `line_items`  WHERE `line_items`.`invoice_id` IN (4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16) 
```

我能做些什么来确保不必运行所有这些 SELECT 查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T03:36:14.790

首先，您可以停止使用`default_scope includes`- 典型情况不需要它，您的情况也可能不需要。

其次，更重要的是，您应该`:inverse_of`在关联中声明该属性，以尽量减少重新加载已在内存中的对象：

```
class Invoice < ActiveRecord::Base
  has_many :line_items, :inverse_of => :invoice
end

class LineItem < ActiveRecord::Base
  belongs_to :invoice, :inverse_of => :line_items
end 
```

# arrays - MongoDB更新数组的多条记录

> ID：14720734
> 
> 赞同：8
> 
> 时间：2013-02-06T02:43:41.223
> 
> 标签：arrays, mongodb

我最近开始使用 MongoDB，我有一个关于更新文档中的数组的问题。我有这样的结构：

```
{
"_id" : ObjectId(),
"post" : "",
"comments" : [
        {
                "user" : "test",
                "avatar" : "/static/avatars/asd.jpg",
                "text" : "....."
        }
        {
                "user" : "test",
                "avatar" : "/static/avatars/asd.jpg",
                "text" : "....."
        }
        {
                "user" : "test",
                "avatar" : "/static/avatars/asd.jpg",
                "text" : "....."
        }
        ...
   ]
} 
```

我正在尝试执行以下查询：

```
update({"comments.user":"test"},{$set:{"comments.$.avatar": "new_avatar.jpg"}},false,true) 
```

问题是它更新了所有文档，但它只更新每个文档中的第一个数组元素。有没有办法更新所有数组元素，或者我应该尝试手动更新？谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-06T07:49:28.250

您不能在单个更新操作中修改多个数组元素。因此，您必须重复更新才能迁移需要修改多个数组元素的文档。您可以通过遍历集合中的每个文档，重复应用更新来做到这一点，`$elemMatch`直到文档的所有相关注释都被替换，例如：

```
db.collection.find().forEach( 函数(doc) {
  做 {
    db.collection.update({_id: doc._id,
                          评论：{$elemMatch：{用户：“测试”，
                                                头像：{$ne:"new_avatar.jpg"}}}}，
                         {$set:{"comments.$.avatar":"new_avatar.jpg"}});
  } 而 (db.getPrevError().n != 0);
})

```

请注意，如果此操作的效率是您的应用程序的要求，您应该规范化您的架构，以便将用户头像的位置存储在单个文档中，而不是存储在每个评论中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-06T03:45:19.047

一种解决方案可能是创建一个与 forEach 一起使用的函数并对其进行评估（因此它运行得很快）。假设您的收藏是“文章”，您可以运行以下命令：

```
var runUpdate = function(){
    db.article.find({"comments.user":"test").forEach( function(article) {
        for(var i in article.comments){
            article.comments[i].avatar = 'new_avatar.jpg';
        }
        db.article.save(article);
    });
};

db.eval(runUpdate); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-26T11:47:43.847

如果您知道要更新的索引，则可以毫无问题地执行此操作：

```
var update = { $set: {} };
for (var i = 0; i < indexesToUpdate.length; ++i) {
  update.$set[`comments.${indexesToUpdate[i]}. avatar`] = "new_avatar.jpg";
}
Comments.update({ "comments.user":"test" }, update, function(error) {
  // ...
}); 
```

*   请注意，IDE 的 must 将不接受该语法，但您可以忽略它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-22T07:29:31.600

看起来你可以这样做：

```
db.yourCollection.update({"comments.user":"test"},{$set:{"comments.0.avatar": "new_avatar.jpg", "comments.1.avatar": "new_avatar.jpg", etc...}) 
```

因此，如果您有少量已知的数组元素，这可能会更容易一些。如果你想要“comments.*.avatar”之类的东西 - 不知道该怎么做。你有这么多的数据重复可能不是那么好。

# excel - 防止水晶报表的 Excel 导出换行文本

> ID：14720736
> 
> 赞同：0
> 
> 时间：2013-02-06T02:43:48.920
> 
> 标签：excel, crystal-reports, crystal-reports-xi

我将水晶报表的输出导出到 Excel 文件中，但文本是（默认情况下）包装的。
有什么办法可以防止文本在 Excel 中换行？
谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-06T04:59:04.540

您将报告输出导出到**Excel（仅限数据）**。此解决方案不会包装文本，但可能会删除页眉和页脚。

![在此处输入图像描述](../Images/52c032467812525c9eee604ec7d9963c.png)

# android - Android Jelly Bean 构建问题 - libwebcore.so

> ID：14720737
> 
> 赞同：0
> 
> 时间：2013-02-06T02:43:49.633
> 
> 标签：android, android-source, android-4.2-jelly-bean

我一直在尝试在 Ubuntu 10.04 系统上构建 4.2.1

```
lunch full-eng
make -j12 
```

但我一直遇到问题。它们似乎源于 libwebcore，所以我尝试了：

```
make clean
make -j12 libwebcore showcommands 
```

这也失败了。输出（不完全是所有内容，最后的内容）位于此链接：

[http://pastie.org/6076543](http://pastie.org/6076543)

抱歉，如果这很混乱/没用，我真的不知道发生了什么。这个系统有一个 6 核 Ivy Bridge CPU 和 63GB 的 RAM，所以它肯定不是资源问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T04:49:39.447

该日志中有很多对“x86”库的引用。Android 4.2.1 需要 x86-64 操作系统和库才能构建。

# .net - C# 中的 Obj->Bin？

> ID：14720738
> 
> 赞同：2
> 
> 时间：2013-02-06T02:43:54.577
> 
> 标签：.net

我想知道是否有任何东西可以快速将我的课程转换为`byte[]`. 例如，如果我`class Foo { public string name; public int age }`不想使用反射，但仍然有一个没有手写的序列化。

我所知道的最接近的是 dapper.net，它动态生成 IL 代码（在使用反射之后）并缓存 IL/jit 代码，因此它几乎可以全速运行。如果我可以选择对字符串使用轻/快速的可选压缩器但不是必需的，那就太好了。我可能还想扔`Foo[]`（或`List<Foo>`）这件事。我有哪些选择？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T02:52:32.873

大多数进行序列化的东西都将使用反射。这并不意味着它会很慢......通常它会缓存对反射 API 的初始调用的结果。但是，如果（且仅当）实际性能测试表明 BinaryFormatter 对您来说不够好，您也可以尝试[protobuf-net](http://code.google.com/p/protobuf-net/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T02:49:15.687

您可以使用[BinaryFormatter](http://msdn.microsoft.com/en-nz/library/system.runtime.serialization.formatters.binary.binaryformatter%28v=vs.100%29.aspx)。只需序列化为 MemoryStream ，然后获取字节。

你将不得不洒`[Serializable]`在课堂上。

作为扩展，它看起来像：

```
public byte[] ToByteArray(this object o)
{
    using (var s = new MemoryStream())
    {
       new BinaryFormatter().Serialize(s, o);
       return s.ToArray();
    }
} 
```

# apache - .htaccess 适用于 Apache 服务器，但不适用于 FTP 目录

> ID：14720741
> 
> 赞同：1
> 
> 时间：2013-02-06T02:44:10.787
> 
> 标签：apache, .htaccess, url, ftp, xampp

我最近发现使用 .htaccess 文件来编辑我的网页的 URL。这是通过 mod_rewrite (Apache) 完成的。我使用 XAMPP，工作文件位于相应的 htdocs 文件夹中。在本地目录中，.htaccess 文件完成这项工作并编辑 URL。我有一个我一直在处理的域名，并定期将工作文件更新为该域名。当我通过 FTP 将这些文件上传到域时，.htaccess 文件无法正常工作，正如您可以想象的那样，因为 Apache 模块无法处理 Web 目录。所以我的问题是，如何在没有 Apache 的 mod_rewrite 模块的情况下使 .htaccess 文件在 web 目录中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T03:30:09.467

你的问题不够清楚。`file:///home/user/www/index.html`如果您只是访问静态文件（即）而不是通过 Apache 服务器（ ） ，那么 URL 重写将不起作用，`http://localhost/~user/index.html`因为 Apache 永远不会处理请求。

也许您的 .htaccess 文件没有正确上传？当您尝试上传名称奇怪的文件（例如以句点开头的文件）时，某些程序会出现一些问题。

# ios - Google Drive iOS SDK：获取用户可用空间

> ID：14720742
> 
> 赞同：3
> 
> 时间：2013-02-06T02:44:15.883
> 
> 标签：ios, objective-c, google-drive-api

我正在构建一个使用 Google Drive iOS SDK 将文件上传到用户的 Google Drive 帐户的应用程序。由于正在上传的文件的大小，我想知道用户正在使用和有多少可用空间。例如，我计划在我的应用程序中添加一个标签，显示用户当前正在使用 10gb/100gb。

我猜可能有一种方法可以从初始登录中获取此信息，但我想即时获取此信息。

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T02:51:27.280

您可以查询 About 资源以获取此信息。这方面的文档也包括一些示例代码：[https ://developers.google.com/drive/v2/reference/about/get](https://developers.google.com/drive/v2/reference/about/get)

```
#import "GTLDrive.h"
// ...

+ (void)printAboutWithService:(GTLServiceDrive *)service {
  GTLQueryDrive *query = [GTLQueryDrive queryForAboutGet];
  // queryTicket can be used to track the status of the request.
  GTLServiceTicket *queryTicket =
    [service executeQuery:query
        completionHandler:^(GTLServiceTicket *ticket, GTLDriveAbout *about,
                            NSError *error) {
          if (error == nil) {
            NSLog(@"Current user name: %@", about.name);
            NSLog(@"Root folder ID: %@", about.rootFolderId);
            NSLog(@"Total quota (bytes): %@", about.quotaBytesTotal);
            NSLog(@"Used quota (bytes): %@", about.quotaBytesUsed);
          } else {
            NSLog(@"An error occurred: %@", error);
          }
        }];
}

// ... 
```

# python - 在节点 js 模块中执行 child_process

> ID：14720744
> 
> 赞同：2
> 
> 时间：2013-02-06T02:44:16.850
> 
> 标签：python, node.js

我正在创建一个节点模块，我想要一个名为 cpuUtilization 的函数，该函数调用 python 脚本并返回标准输出。

```
var sys = require('sys')
var exec = require('child_process').exec;

exports.cpuUtilization = function() {
    exec('./nodeprime/cpuUtilization.py', function (error, stdout, stderr) {
        return(JSON.parse(stdout));
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:27:32.920

你确实得到了一个结果，`cpuUtilization`因为该`return`语句不适用于该函数，但适用于该函数内的回调。

您需要将代码转换为异步代码并使用回调返回结果：

```
exports.cpuUtilization = function (callback) {
  exec('./nodeprime/cpuUtilization.py', function (err, stdout, stderr) {
    if (err) return callback(err);
    callback(null, JSON.parse(stdout));
  });
}; 
```

Node.js 中的回调应该返回（至少）两个参数，这是常识，其中第一个是错误实例，第二个包含实际数据。

现在您可以使用您的功能，例如：

```
cpuUtilization(function (err, data) {
  // Do something with data ...
}); 
```

一般来说，我建议您让自己熟悉高阶函数。

# c# - webapi 错误 找到与请求匹配的多个操作

> ID：14720747
> 
> 赞同：1
> 
> 时间：2013-02-06T02:44:58.063
> 
> 标签：c#, asp.net-mvc, asp.net-web-api

我有一个 accountcontroller 有 2 个动作这里是声明：

```
HttpResponseMessage PostAccount([FromBody] Account account)
public HttpResponseMessage PostLogin([FromBody]string email,[FromBody] string pass) 
```

在提琴手中运行，我收到错误 Multiple actions were found that match the request。我对发生的事情有点困惑。我应该为登录和注册制作两个控制器吗？这是标准做法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T03:20:29.907

您只能有一个来自 Web API 正文的参数。如果你想在 body 中有多个东西，你应该将它们包装在一个容器类中。

您遇到的错误正在发生，因为您有两个以“发布”开头的操作。您可以创建单独的控制器，如果您发布不同类型的实体，这很有意义。或者您可以使用基于操作的路由并创建如下所示的路由：

```
config.Routes.MapHttpRoute("ActionBased", "{controller}/{action}"); 
```

在 POST 时区分这两个操作。

# wcf-data-services - 如何重构 cognos 报告以使用 odata 服务

> ID：14720753
> 
> 赞同：1
> 
> 时间：2013-02-06T02:45:52.780
> 
> 标签：wcf-data-services, cognos

我们有许多当前由存储过程驱动的 Cognos 10 报告。这些存储过程对作为组织核心的数据库具有跨数据库依赖性。这个核心数据库和它支持的应用程序已经过了最好的日期，正在被一个新系统所取代。该系统在场外，我们无权访问数据库。但是，我们确实有一个 odata 服务，我们可以使用它来访问这些数据。我们仍然需要通过存储过程访问其他数据。

有没有人建议我们如何重构我们的报告/存储的过程/其他来处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T17:40:27.187

我的第一直觉是重构您的报告以反映数据现在来自 2 个不同的来源，方法是修改您的存储过程以仅访问本地数据，并编写一个新的 WCF DataServices 包装器来访问新的异地 OData 服务。然后重构您的报告以使用更新的存储过程和新的 WCF DataServices 包装器。有关一般使用 WCFDS 的更多信息，请从此处开始：http: [//msdn.microsoft.com/en-us/library/cc668794.aspx](http://msdn.microsoft.com/en-us/library/cc668794.aspx)，有关客户端的快速入门示例，请查看此处：[http://msdn .microsoft.com/en-us/library/dd728278.aspx](http://msdn.microsoft.com/en-us/library/dd728278.aspx)

希望这可以帮助！

迈克·里德

# vb.net - 加载文件附件时的进度条

> ID：14720756
> 
> 赞同：0
> 
> 时间：2013-02-06T02:46:37.067
> 
> 标签：vb.net, excel, progress-bar

我在附加文件时遇到加载进度条的问题。我希望进度条在完成扫描附件文件之前一直工作。问题是当我附加文件并开始扫描时，我的进度条可能工作 3-5 秒，我希望进度条会一直持续到文件完成扫描。

这是我的 opendialog 代码：

```
 Private Sub OpenFileDialog1_FileOk(ByVal sender As System.Object, ByVal e As System.ComponentModel.CancelEventArgs) Handles OpenFileDialog1.FileOk
        strm = OpenFileDialog1.OpenFile()
        filename = OpenFileDialog1.FileName
        OpenFileDialog1.Filter = "Excel files (*.xls)|*.xls|All files (*.*)|*.*"
        TextBox1.Text = filename
        If Not (strm Is Nothing) Then
            strm.Close()
        End If
 End Sub 
```

浏览按钮代码：

```
 Private Sub Button1_Click_1(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        OpenFileDialog1.Title = "Please Select a File"
        OpenFileDialog1.InitialDirectory = "C:temp"
        OpenFileDialog1.Filter = "Excel files (*.xls)|*.xls|All files (*.*)|*.*"
        OpenFileDialog1.ShowDialog()
 End Sub 
```

生成附件的代码：

```
 Private Sub cmdGenerate_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdIntralinks.Click
    conn.Open()
       Timer1.Enabled = True 
       Timer1.Interval = 50 
       ProgressBar1.Value = 0
conn.close() 
```

timer1_tick 的代码：

```
 Private Sub Timer1_Tick_1(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
        Static TikTok As Integer
        TikTok = TikTok + 1
        ProgressBar1.Value = TikTok
        If ProgressBar1.Value = ProgressBar1.Maximum Then
            Timer1.Enabled = False
            TikTok = 0
        End If
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:53:28.847

看看它是否有效：

```
Private Sub Timer1_Tick_1(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    Static TikTok As Integer
    TikTok = TikTok + 1
    ProgressBar1.Value = TikTok
    If ProgressBar1.Value = ProgressBar1.Maximum Then
        Timer1.Enabled = False
        TikTok = 0
    End If
   Application.DoEvents()
End Sub 
```

顺便说一句，您是否已经在 if 子句中设置了断点，以查看 progressbar.maximum 是否在预期之前达到最大值？青色

# mongodb - 使用 Lithium li3 框架连接到 MongoDB

> ID：14720757
> 
> 赞同：1
> 
> 时间：2013-02-06T02:46:59.233
> 
> 标签：mongodb, lithium

我正在锂 (li3) 框架中编写一个相对简单的应用程序。我使用 MongoDB 作为数据存储。我的 MongoDB 数据库托管在云中 - 在 MongoHQ。

尝试发布数据时出现间歇性错误。有时它会起作用 - 但随后我会收到一条错误消息，内容如下：

```
 Fatal error: Uncaught exception 'MongoConnectionException' with 
message 'connecting to mongodb://USERNAME:PASSWORD@flame.mongohq.com:27052/DATABASENAME failed: 
Operation now in progress' in 
/Applications/MAMP/htdocs/quizapp/libraries/lithium/data/source/MongoDb.php:257 Stack trace: 
#0 /Applications/MAMP/htdocs/quizapp/libraries/lithium/data/source/MongoDb.php(257): Mongo-
>__construct('mongodb://mongo...', Array) #1 
/Applications/MAMP/htdocs/quizapp/libraries/lithium/data/Source.php(90): 
lithium\data\source\MongoDb->connect() #2 
/Applications/MAMP/htdocs/quizapp/libraries/lithium/data/source/MongoDb.php(160): 
lithium\data\Source->_init() #3 
/Applications/MAMP/htdocs/quizapp/libraries/lithium/core/Object.php(93): 
lithium\data\source\MongoDb->_init() #4 
/Applications/MAMP/htdocs/quizapp/libraries/lithium/data/Source.php(73): lithium\core\Object-
>__construct(Array) #5 
/Applications/MAMP/htdocs/quizapp/libraries/lithium/data/source/MongoDb.php(156): 
lithium\data\Source->__construct(Array) #6 /Applications/MAMP/htdocs/quizapp/libra in 
/Applications/MAMP/htdocs/quizapp/libraries/lithium/data/source/MongoDb.php on line 263 
```

我在 Mac 上的 MAMP 上运行它。我试图停止并重新启动 Apache - 但它似乎并没有解决问题。但是，我似乎每 10 到 15 次尝试连接到 MongoDB 1 次。我无法弄清楚任何趋势。

任何帮助将不胜感激。

谢谢

尼诺

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:37:55.873

我可以在这里看到两个可能的问题：

*   防火墙和关闭它的描述位于：[https ://groups.google.com/forum/#!msg/mongodb-user/9-DYhQWEo0E/B4UsY53S1IwJ](https://groups.google.com/forum/#!msg/mongodb-user/9-DYhQWEo0E/B4UsY53S1IwJ)
*   慢速连接——在某些情况下，与主机的连接速度太慢。从 Mongo PHP 驱动程序（li3 使用）的 1.3.4 版开始，对超时有很好的控制。查看[http://www.php.net/manual/en/mongoclient.construct.php上的](http://www.php.net/manual/en/mongoclient.construct.php)**超时**选项——您很可能想要增加它（但请确保您使用 1.3.4 或更高版本的驱动程序）。

# jquery - 外部点击 Ipad 设备不适用于 Div 关闭

> ID：14720758
> 
> 赞同：1
> 
> 时间：2013-02-06T02:47:03.490
> 
> 标签：jquery, ipad

如果他们在 ipad 中单击该 div 外部，我正在尝试关闭一个 div 块，但它不起作用。

谁能让我知道我做错了什么

```
 if (IOSDevice()) // this is custom function
        {                       
            $(document).bind('touchstart',function(event){     
                // alert(event.target.id);          
                if(event.target.id !="MyDivId"){
                    $('#MyDivId').hide()
event.stopPropagation();
            }
        });

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T02:51:37.763

```
$(document).on('touchstart', function (event) {
    if (!$(event.target).closest('#MyDivId').length) {
        $('#MyDivId').hide()
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-27T07:16:21.597

我们还可以在容器变量中添加多个选择器

```
$(document).on('touchstart', function (e) {
var container = $("YOUR CONTAINER SELECTOR");

    if (!container.is(e.target) // if the target of the click isn't the container...
    && container.has(e.target).length === 0) // ... nor a descendant of the container
        {
            container.hide();
        }
}); 
```

# lua - 按下键时暂停程序并恢复程序

> ID：14720760
> 
> 赞同：-1
> 
> 时间：2013-02-06T02:47:30.373
> 
> 标签：lua

我想知道什么代码会暂停程序并在按下“Enter”键时使其恢复。

我对 Lua 真的很陌生，所以我还不太了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T06:56:43.520

`local input_string = io.read()`用于控制台应用程序

# file-upload - 当使用 load jquery 方法在另一个页面中加载 fileupload 帮助程序时，如何使用它？

> ID：14720762
> 
> 赞同：2
> 
> 时间：2013-02-06T02:48:00.293
> 
> 标签：file-upload, html-helper, asp.net-webpages

我有以下问题，使用 Jquery Ajax 的 Load 方法在他的一个 div 中加载一个页面，另一个页面使用 FileUpload Asp.net Helper。单独该页面可以正常工作，但是在此 div 中，上传按钮显然调用了托管页面，而不是原始页面具有帮助程序。连续，如何正确使用从另一个页面加载的帮助程序？在一个计划中，我认为这正在发生：

![在此处输入图像描述](../Images/2c9a67f61e4d5395ce9378a14797820b.png)

我希望这种情况发生，但不知道该怎么做：

![在此处输入图像描述](../Images/ec74e28a39440675f2cfa19969c20e26.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T08:37:13.903

上传按钮提交表单。它将被提交到`action`表单属性中指定的任何位置。因此，您应该将`action`属性值设置为您希望表单发布到的页面。

如果设置`includeFormTag`为 false，这将更容易管理。默认情况下是真的：

```
@FileUpload.GetHtml(
    initialNumberOfFiles: 1,
    allowMoreFilesToBeAdded: false,
    includeFormTag: false,
    uploadText: "Upload",
    name: "Upload1"
) 
```

然后，您需要提供自己的表单标签。确保包含正确`enctype`的文件上传管理：

```
<form action="somePage" method="post" enctype="multipart/form-data">
... 
```

# node.js - 在Nodejs中上传文件时强大的没有form.parse（）

> ID：14720765
> 
> 赞同：1
> 
> 时间：2013-02-06T02:48:11.180
> 
> 标签：node.js, file-upload, express, formidable

当我将文件发送到 /upload 时，从终端我可以看到代码在 form.parse(req... ：

```
delete express.bodyParser.parse['multipart/form-data']; 
```

但是，当我这样做时，我的代码崩溃了，因为 parse 为空。

任何人都知道如何让文件上传仅在 /upload 中工作并且可能具有强大的功能？

谢谢。

这是我的**app.js**：

```
'use strict';

var express = require("express");
var async = require("async");
var http = require('http');
var url = require("url");
var qs = require("querystring");
var fs = require("fs");
var formidable = require("formidable");
var mime = require("mime");

var app = module.exports = express();

app.configure(function () {
  app.set("views", __dirname + "/views");
  app.set("view engine", "ejs");
  app.engine("html", ejs.renderFile);
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser("abc"));
  app.use(express.static(__dirname + "/static"));
  app.use(app.router);
  app.use(express.limit('5mb'));
});

app.post('/upload', storage.upload); 
```

这是我的代码**storage.js**：

```
'use strict';

var async = require('async');
var formidable = require('formidable');
var fs = require('fs');
var util = require('util');
var api = require('./common');

exports.upload = function (req, res) {

  console.log("I am here");

  var form = new formidable.IncomingForm(),
    files = [],
    fields = [];

  form.uploadDir = "./uploads";

  form
    .on('field', function (field, value) {
      console.log(field, value);
      fields.push([field, value]);
    })
    .on('error', function (err) {
      res.writeHead(200, {'content-type': 'text/plain'});
      res.end('error:\n\n'+util.inspect(err));
    })
    .on('file', function (field, file) {
      console.log(field, file);
      files.push([field, file]);
    })
    .on('aborted', function (err) {
      console.log("user aborted upload");
    })
    .on('end', function () {
      console.log('-> upload done');
      res.writeHead(200, {'content-type': 'text/plain'});
      res.write('received fields:\n\n '+util.inspect(fields));
      res.write('\n\n');
      res.end('received files:\n\n '+util.inspect(files));
    });
  form.parse(req);
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-29T13:36:59.700

如果你想使用强大的那么，删除 app.use(express.bodyParser()); ＆ 添加`app.use(express.json());app.use(express.urlencoded());`

[连接 3.0](https://github.com/senchalabs/connect/wiki/Connect-3.0)

这个解决方案对我有用，它可能对其他开发者有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T15:04:23.510

你看过github上的例子吗：[https ://github.com/visionmedia/express/blob/master/examples/multipart/index.js](https://github.com/visionmedia/express/blob/master/examples/multipart/index.js)

我已经修改它以在 Express 3.x 上运行，它似乎运行顺利：

```
var express = require('express');
var fs = require('fs');
var app = express();
var format = require('util').format;

// bodyParser in connect 2.x uses node-formidable to parse 
// the multipart form data.
app.use(express.bodyParser())

app.get('/', function(req, res){
  res.send('<form method="post" enctype="multipart/form-data">'
    + '<p>Title: <input type="text" name="title" /></p>'
    + '<p>Image: <input type="file" name="image" /></p>'
    + '<p><input type="submit" value="Upload" /></p>'
    + '</form>');
});

app.post('/', function(req, res, next){
  // the uploaded file can be found as `req.files.image` and the
  // title field as `req.body.title`
  res.send(format('\nuploaded %s (%d Kb) to %s as %s'
    , req.files.image.name
    , req.files.image.size / 1024 | 0 
    , req.files.image.path
    , req.body.title));
});

if (!module.parent) {
  app.listen(3000);
  console.log('Express started on port 3000');
} 
```

# buffer - 如何增加 ipython qtconsole 回滚缓冲区限制

> ID：14720766
> 
> 赞同：11
> 
> 时间：2013-02-06T02:48:27.377
> 
> 标签：buffer, limit, ipython, output, qtconsole

当我使用以下任何一项加载 ipython 时：

```
ipython qtconsole
ipython qtconsole --pylab
ipython qtconsole --pylab inline 
```

输出缓冲区仅保存最后 500 行。要查看此运行：

```
for x in range(0, 501):
   ...:     print x 
```

有这个配置选项吗？我试过调整 --cache-size 但这似乎没有什么区别。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-06T06:28:32.160

迅速地：

ipython qtconsole --IPythonWidget.buffer_size=1000

或者您可以通过添加永久设置它：

```
c.IPythonWidget.buffer_size=1000 
```

在您的 ipython 配置文件中。

为了发现这类事情，一个有用的技巧是：

```
ipython qtconsole --help-all | grep PATTERN 
```

例如，您已经有了“缓冲区”，所以：

```
$> ipython qtconsole --help-all | grep -C 3 buffer
...
--IPythonWidget.buffer_size=<Integer>
    Default: 500
    The maximum number of lines of text before truncation. Specifying a non-
    positive number disables text truncation (not recommended). 
```

如果 IPython 使用的名称与您预期的不同，并且第一次搜索没有结果，那么您可以使用`500`，因为您知道要更改的值是什么，这也会找到相关的配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-22T17:38:16.317

[如果您使用的是Jupyter](https://jupyter.org/)，则接受的答案不再正确。相反，命令行选项应该是：

```
jupyter qtconsole --ConsoleWidget.buffer_size=5000 
```

您可以选择您想要的任何值，只需使其大于默认值 500。

如果您想永久保存此文件，请转到您的主目录 - `C:\Users\username`、`/Users/username`或`/home/username`- 然后进入`.jupyter`文件夹（如果不存在则创建它），然后创建文件`jupyter_qtconsole_config.py`并在您喜欢的编辑器中打开它。添加以下行：

```
c.ConsoleWidget.buffer_size=5000 
```

同样，数字可以是任何值，只要它是大于 500 的整数即可。不要担心`c`在这个特定文件中没有定义它，它已经在启动机器的其他地方定义了。

* * *

感谢[@firescape](https://stackoverflow.com/questions/14720766/how-to-increase-the-ipython-qtconsole-scrollback-buffer-limit#comment64077925_14722936)指向正确方向的指针。

# data-binding - Spring MVC 3 - 在模型元素中绑定对象列表的属性

> ID：14720767
> 
> 赞同：1
> 
> 时间：2013-02-06T02:48:43.017
> 
> 标签：data-binding, spring-mvc

我有一个 JSP 生成的表单，它需要向用户显示选项列表。其中一些是单实例选项（例如是否生成目录），这很好用。我现在需要添加一个从属选项列表，并允许用户打开或关闭每个选项。我可以在 JSP 页面中生成选项列表，并给每个选项一个唯一的 ID。我希望用`<form:checkbox/>`表格中的一个元素来代表一个。

选项类如下所示：

```
// Option class
public class PdfCatalogOptions
{
    private boolean isTableOfContentsIncluded;
    private List<ProductGroup> productGroups;

    public boolean getTableOfContentsIncluded () {
        return isTableOfContentsIncluded;
    }    

    public PdfCatalogOptions setTableOfContentsIncluded ( final boolean isTableOfContentsIncluded ) {
        this.isTableOfContentsIncluded = isTableOfContentsIncluded;
        return this;
    }

    public List<ProductGroup> getProductGroups() {
        return productGroups;
    }

    public PdfCatalogOptions setProductGroups( final List<ProductGroup> setProductGroups ) {
        this.productGroups = productGroups;
        return this;
    }
} 
```

产品组类如下所示：

```
public class ProductGroup
{
    private String  groupName;
    private boolean isSelected;

    public String getGroupName () {
        return groupName;
    }

    public ProductGroup setGroupName ( final String groupName ) {
        this.groupName = groupName;
        return this;
    }

    public Boolean getIsSelected () {
        return isSelected;
    }

    public ProductGroup setIsSelected ( final boolean selected ) {
        isSelected = selected;
        return this;
    }
} 
```

在`get`控制器内的处理程序中，我这样做：

```
@RequestMapping( method = RequestMethod.GET )
public String get ( final Model model ) throws Exception {
    model.addAttribute ( "options", new PdfCatalogOptions ().setProductGroups ( buildProductGroupList () ) );
    return FormName.GENERATE_CATALOG;
} 
```

里面的逻辑`buildProductGroupList`无关紧要——它只是生成一个填充了我需要的数据`ArrayList`的对象。`ProductGroup`

我遇到的问题是我似乎无法说服 Spring 绑定到对象内单个`ProductGroup`对象内的字段`PdfCatalogOptions`。

JSP 看起来像这样：

```
<form:form action="generateCatalog.do" commandName="options">
    <table>
        <tr>
            <td colspan="3"><form:errors cssClass="error"/></td>
        </tr>
        <tr>
            <td><spring:message code="catalog.include.toc"/></td>
            <td><form:checkbox path="tableOfContentsIncluded"/></td>
        </tr>
        <tr>
            <td>&nbsp;</td>
        </tr>
        <c:forEach items="options.productGroups" var="productGroup">
            <tr>
                <td>&nbsp;</td>
                <td><form:checkbox path="productGroup.isSelected"/>blah</td>
            </tr>
        </c:forEach>
    </table>
</form:form> 
```

在内部`<c:forEach...>`循环中，我找不到正确的咒语来让 Spring 绑定到各个`ProductGroup`对象，因此我最终可以得到一个`ProductGroup`对象列表，其中`isSelected`包含用户要求的属性设置。

如前所述，它抱怨说：

```
org.springframework.beans.NotReadablePropertyException: Invalid property 'productGroup' of bean class [<redacted>.PdfCatalogOptions]: Bean property 'productGroup' is not readable or has an invalid getter method: Does the return type of the getter match the parameter type of the setter? 
```

谁能在这里指出我正确的方向？

* * *

**编辑 1**：这正确列出了所有产品组：

```
<c:forEach items="${options.productGroups}" var="pg">
    <tr>
        <td>${pg.groupName}</td>
    </tr>
</c:forEach> 
```

这些值在那里并按我的预期显示。但是，我不能做的是找到一种将值路径绑定到复选框的方法。如果我添加`<form:checkbox path="pg.isSelected"/>`，那么我被告知这`pg`不是`PdfCatalogOptions`.

如果我添加`<form:checkbox path="${pg.isSelected}"/>`，那么我被告知——在某种程度上可以预见——这`true`不是`PdfCatalogOptions`.

# objective-c - 可可应用程序中的 FTP 上传？

> ID：14720776
> 
> 赞同：0
> 
> 时间：2013-02-06T02:49:32.127
> 
> 标签：objective-c, macos, cocoa

我制作了一个 Mac OS 应用程序，我想添加一个功能。用户将数据添加到 NSTableView，然后将数据编译成`.xml`文件。我想要做的是将该`.xml`文件上传到服务器，并覆盖名为该文件的现有文件。我该怎么做？我听说过 Apple 的版本，但它是用于 iPhone 的，看起来有点混乱。我只有 16 岁，想知道是否有更简单的方法可以将文件上传到远程服务器。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T03:25:06.510

至少有几种内置方法可以从 OSX 应用程序进行 ftp'​​ing。

Apple 在[此处提供了一篇有用的文章](http://developer.apple.com/library/ios/#documentation/Networking/Conceptual/CFNetwork/CFFTPTasks/CFFTPTasks.html)，展示了如何进行上传。我不确定（它可能取决于服务器实现）如果上传会覆盖以前的文件，或者如果文件已经存在则抛出错误。

这里还有一个[商业 Objective C 库](http://www.chilkatsoft.com/ftp-objc.asp)（300 美元），它可能包含您需要的一切。[相关的 Stack Overflow 问题](https://stackoverflow.com/questions/7022959/cocoa-objective-c-ftp-library-framework-that-supports-mac-os-x-10-6)也可能有其他提示。

# internet-explorer-8 - 最新的 Nivo Slider 3.2 转换在 ie7 和 ie8 中不起作用

> ID：14720781
> 
> 赞同：0
> 
> 时间：2013-02-06T02:50:08.867
> 
> 标签：internet-explorer-8, internet-explorer-7, nivo-slider

我刚刚下载了最新的 Nivo 滑块 3.2，因为我在响应式站点上需要它，并且在没有修改的情况下开箱即用，ie7 和 ie8 中的转换不起作用。

他们只是在图像之间轻弹 - 没有 sliceDown 或 Fade 他们只是旋转。

我过去使用它没有任何问题 - 我刚刚在 ie7 和 ie8 中查看了 2.6，这很好。

有谁知道可以做些什么来解决它？

我刚刚也查看了他们的演示[http://nivo.dev7studios.com/responsive-demo/](http://nivo.dev7studios.com/responsive-demo/)，同样的问题也发生在那里。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:36:28.413

只是分享在我的网站上有用的东西——我使用的是默认的演示代码，下载时几乎没有经过编辑。在我测试的所有浏览器中，它都很漂亮且响应迅速（我想要的），除了任何版本的 ie。如果即，它只是一个旋转，没有效果。

*但是，当我为包装 div和*图像 div指定大小尺寸时，过渡也可以在 ie 中使用。(height: 350px;) 您可以在 css/stylesheet 或 inline 中指定尺寸——如果需要的话。

在我的网站上，我只需要指定一个高度尺寸；对于您的网站，您可能需要高度和宽度，或者只需要宽度。一个小小的实验就完成了。

但是，指定了高度尺寸，这会导致其他浏览器无法显示，因此需要根据 Internet Explorer 的“hack”来指定尺寸：要么为 Internet Explorer 用户提供单独的样式表，要么使用您的任何最喜欢的internet explorer hacking 方法是：下划线，或\9，等等。以下是有用的 Internet Explorer 解决方法列表，仅供参考：[Internet Explorer hacks](http://mathiasbynens.be/notes/safe-css-hacks)

我知道我们讨厌推荐黑客，但我们都这样做:)。很想知道为什么这个对我有用，也许没有黑客有更好的方法。

# jquery - 将 deferred.done() 回调中的嵌套数组传递给外部作用域

> ID：14720783
> 
> 赞同：1
> 
> 时间：2013-02-06T02:50:32.820
> 
> 标签：jquery, callback, jquery-deferred

一周前我问了一个类似的问题，但对我的问题没有真正的答案。那是由于我暴露问题的方式。

我正在写一个 jquery 谷歌地图插件，所以我们可以做这样的事情：

```
var my_map = $('#map').plugin();
my_map.addMarker( 'Melbourne, Australia' );
my_map.addMarker( 'New York, USA' );
console.log ( my_map.getMarkers() );  // how to return markers array here ? 
```

要添加我的标记，我使用谷歌地理编码，它将地址转换为纬度和经度。一旦我得到响应，我就会将我的标记添加到地图中并将它们存储在一个数组中。

这一切都很好。为了检索我的标记数组，我在插件中完成了这个：

```
self.getMarkers = function()
{
    self._deferred.done( function()
    {
        // I need to pass this to the outer scope
        console.log( 'Deferred done :' , self.markers ); 
        return self.markers;
    });
 } 
```

如果我`self.markers`不使用就返回，`deferred`那么数组是空的，因为响应还没有返回，但是如果我使用，`deferred`那么我不能将数组传递给外部范围。

此外，我不希望使用插件的开发人员必须这样做：

```
my_map.done( function( markers ) {
   // code
}); 
```

我可以通过返回承诺来做到这一点，但我想通过这样做来获得标记数组`my_map.getMarkers()`

我希望问题很清楚，如果不是，请向我澄清。如果您需要查看完整代码，请访问此处：http: [//jsfiddle.net/Vy4da/](http://jsfiddle.net/Vy4da/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T06:06:04.543

根据您的评论，您至少还有 2 个选项。

由于`getMarkers()`实际上是一个同步调用，它对已经发生的事情进行数据处理，因此您只需要处理`addMarker()`异步的情况。在这里，您需要做的就是确保您已完成添加标记。例如：

```
// For this to work, you need to put return statements at the start of addMarker and
// placeMarker so that they return the promises they are making

$.when(my_map.addMarker("Melbourne"), my_map.addMarker("New York, USA"))
.then(function()
{
   // a synchronous my_map.getMarkers() is safe to use here
   // just return self._Markers.markers;
}); 
```

如您所见，唯一的困难是并行化`addMarker`事件并且仅`getMarkers`在它们全部完成时使用。我建议将这部分作为插件的一部分来简化开发人员的工作。

```
self.addMarkers = function( /*...*/ ) // accept array of location or comma separated list
{
    var args = [].concat(Array.prototype.slice.call(arguments));
    return $.when.apply(null, args.map(self.addMarker, self));
} 
```

用法：

```
my_map.addMarkers('Melbourne, Australia', 'New York, USA')
.then(function()
{
   console.log(my_map.getMarkers()); // works if synchronous
   console.log(my_map._Markers.markers); // also works
}); 
```

在行动中看到它：http: [//jsfiddle.net/Vy4da/1/](http://jsfiddle.net/Vy4da/1/)

您的第二个选项是在向您发出请求后返回与原始*请求*对象分开的*评估对象*。这是 AJAX 在 Jquery 中使用的模式。您将选项传递给，然后将其与 链接起来，其中是一个评估对象，可让您评估结果，并且可能是您最感兴趣的部分（jqXHR.responseText）。要在您的情况下使用相同的模式，根本不会出现，而是附加到由地图请求函数解析的构造对象。这种方法可以防止开发人员在它可用之前错误地使用它，因为它根本没有被定义，除非通过 Promise 解决。*`my_map``$.ajax``done(function(data,status,jqXHR){...})``jqXHR``data``getMarkers()``my_map``getMarkers()`*

 ** * *

*原始答案* *（基于 getMarkers 是异步的误解）*

如果`my_map.getMarkers()`是任何类型的异步请求，则不能将其视为同步变量赋值。

所以：`var a = my_map.getMarkers()`永远*不会*有异步调用的结果。

如果您改为返回一个承诺，则您授予调用者决定如何将此调用与其他异步调用并行化的选项。

`my_map.getMarkers().done( function( markers ) { });`是更优雅的解决方案之一，因为它允许他们以显示类似同步的控制逻辑的风格编写代码，同时仍然是异步调用。它还允许他们以他们喜欢的任何方式处理错误情况。

一开始我知道这很烦人，但这只是异步编程的现实。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T03:15:42.550

这不是异步代码的工作方式。当您调用它时，`my_map.getMarkers()`如果它进行异步调用，您绝对不能保证它何时完成并且可以在调用“之后”访问代码。*您必须以某种方式*公开这是一个异步调用的事实。

在我看来，暴露最少的方式是允许用户提供一个回调函数，该函数使用以下方式返回的数组：

```
my_map.getMarkers(function (array) {
    //do stuff with returned array here
}); 
```

您可以将该回调函数绑定到`.done`. 不过，我认为通过返回承诺本身，您将获得更大的灵活性。我想你可以两者都做。*

# css - 列表项垂直间隙 IE

> ID：14720795
> 
> 赞同：0
> 
> 时间：2013-02-06T02:52:29.490
> 
> 标签：css, list

我已经修复了几乎 90% 的差距，但我仍然看到列表项之间有 2 px 的边距。

```
.lines li {
border-bottom: solid #000 1px;
list-style: none;
background-color: #CF0;
height: 0px;
}

.lt-ie9 .lines li {
display: inline-block !important;
}

.lt-ie9 .lines li {
display: block !important;
background-color: #CC0;
font-size: 0px;
line-height: 0px;
}

    <ul class="lines">
  <li></li>
  <li></li>
  <li></li>
  <li></li>
  <li></li>
  <li></li>
  <li></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:11:29.857

这是由于行内块显示。您必须删除 html 代码中列表项之间的任何空格。您可以将其替换为评论。

```
<p>Lorem Elsass ipsum</p><!-- whitespace
--><p>réchime amet sed bissame so libero knackes choucroute…&lt;/p> 
```

如果您能阅读法语，请参阅[http://www.alsacreations.com/astuce/lire/1432-display-inline-block-espaces-indesirables.html 。](http://www.alsacreations.com/astuce/lire/1432-display-inline-block-espaces-indesirables.html)

# linux - 通过 PIPE 发送 Unix/Linux 信号

> ID：14720797
> 
> 赞同：0
> 
> 时间：2013-02-06T02:52:36.230
> 
> 标签：linux, bash, signals, pipe

我想在几秒钟`SIGNAL`后发送到一个进程。`.5`

也许这不是一个好主意，但我想为一个不常见的临时案例做这件事。

我试过跟随，但它不起作用。

```
(sleep .5;kill -9)| some_process 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T03:22:08.327

信号不指向管道；它们被定向到进程标识符（pids）。我可能会尝试这样的事情：

```
some_process & sleep .5; kill -KILL $! 
```

它将`some_process`在后台运行（这就是它的`&`用途）。半秒后，它将使用`$!`指示最后一个后台进程的 pid 的变量。

（尽管`sleep`在某些系统上只接受整数。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T03:00:50.167

`sleep .5; kill -9 $(pidof some_process)` 应该管用。`pidof`返回进程名称的进程 ID。将`$()`命令的结果返回给`kill`命令。另一种选择是：

`sleep .5; pidof some_process | xargs kill -9`

检查`man pidof`详情。

编辑：还有`timeout`. `timeout -s SIGKILL 0.5s some_process`如果我正确理解了您的问题，应该可以解决问题。

# python - 如何使用 Python 从 /dev/random 获取数字？

> ID：14720799
> 
> 赞同：10
> 
> 时间：2013-02-06T02:52:50.843
> 
> 标签：python

我正在尝试编写一个 python 脚本来测试 /dev/random 的随机性，但我无法让它给我任何数字。我的代码看起来像这样

```
with open("/dev/random", 'rb') as file:
     print f.read(10) 
```

我认为应该从 /dev/random 打印出 10 个字节，但它打印出的不是数字，而是奇怪的字符（非标准字母和无数字）。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-06T02:57:53.830

Python为此有一个内置函数（它也将在其他操作系统上使用适当的方法）......

```
import os
print os.urandom(10)
# '\xf1\x11xJOl\xab\xcc\xf0\xfd' 
```

[来自http://docs.python.org/2/library/os.html#os.urandom](http://docs.python.org/2/library/os.html#os.urandom)的文档

> 此函数从特定于操作系统的随机源返回随机字节。返回的数据对于加密应用程序来说应该是不可预测的，尽管它的确切质量取决于操作系统的实现。在类 UNIX 系统上，这将查询 /dev/urandom，而在 Windows 上，它将使用 CryptGenRandom。如果未找到随机源，则会引发 NotImplementedError。

如果您希望这些字节是一个数字，您可以通过如下转换来实现：

```
>>> rand = os.urandom(10)
>>> int(binascii.hexlify(rand), 16)
1138412584848598544216317L 
```

或使用 Python 2：

```
>>> int(rand.encode('hex'), 16)
1138412584848598544216317L 
```

虽然`/dev/random`和`/dev/urandom`略有不同，因此您可以使用现有的操作，如果差异对您很重要，则`.read()`只需进行转换。`int`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-06T03:12:20.970

您将获得 10 个字节。Python 不会自动将它们转换为数字。

我建议您以 4 的倍数获取字节，然后将它们转换为 32 位无符号整数，然后将它们缩放到您需要的任何值。

编辑：旧代码显示了这个想法，但没有很好地划分为功能。这是相同的基本思想，但现在可以方便地打包成函数。

```
import os
import struct

_random_source = open("/dev/random", "rb")

def random_bytes(len):
    return _random_source.read(len)

def unpack_uint32(bytes):
    tup = struct.unpack("I", bytes)
    return tup[0]

UINT32_MAX = 0xffffffff
def randint(low, high):
    """
    Return a random integer in the range [low, high], including
    both endpoints.
    """
    n = (high - low) + 1
    assert n >= 1
    scale_factor = n / float(UINT32_MAX + 1)
    random_uint32 = unpack_uint32(random_bytes(4))
    result = int(scale_factor * random_uint32) + low
    return result

def randint_gen(low, high, count):
    """
    Generator that yields random integers in the range [low, high],
    including both endpoints.
    """
    n = (high - low) + 1
    assert n >= 1
    scale_factor = n / float(UINT32_MAX + 1)
    for _ in range(count):
        random_uint32 = unpack_uint32(random_bytes(4))
        result = int(scale_factor * random_uint32) + low
        yield result

if __name__ == "__main__":
    # roll 3 dice individually with randint()
    result = [randint(1, 6) for _ in range(3)]
    print(result)

    # roll 3 dice more efficiently with randint_gen()
    print(list(randint_gen(1, 6, 3))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T03:11:45.977

它正在打印随机字符，因此只需使用该`ord()`函数将它们转换为整数。就像是：

```
with open("/dev/random", 'rb') as file: print [ord(x) for x in file.read(10)] 
```

这将打印从 0 到 255 的 10 个随机整数的列表。（我得到：）`[117, 211, 225, 24, 134, 145, 51, 234, 153, 89]`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-19T15:36:22.963

在 Python 3.2 及更高版本中，以下内容比旧答案中的解决方案更短且可能更快：

```
with open("/dev/random", 'rb') as f:
    print(int.from_bytes(f.read(10), 'big')) 
```

这将打印一个 80 位数字（范围 0 到 2^80-1 包括在内）。

# php - PHP 致命错误 require_once

> ID：14720804
> 
> 赞同：0
> 
> 时间：2013-02-06T02:53:24.043
> 
> 标签：php

大家好，任何人都可以解释为什么我的程序会发生这种情况

当我使用这个文件夹结构时

![在此处输入图像描述](../Images/681dbe3a13badf95ad9655685e985f12.png)

database.php 中的代码是

```
<?php require_once("../db_config.php");?> 
```

我收到一个错误 `Fatal error: require_once(): Failed opening required '../db_config.php' (include_path='.;F:\xampp\php\PEAR') in F:\xampp\htdocs\project\database\db_mysql\database.php on line 3'`

但是当我移动 db_config.php

![在此处输入图像描述](../Images/b69def786a55c3447e677e04138b027e.png)

一切正常。我不明白。谁能解释一下。我更喜欢使用第一个文件夹结构，因为我将为 mssql 数据库添加一个新文件夹 db_mssql。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T03:01:02.220

```
<?php require_once("../db_config.php");?> 
```

尝试

```
<?php require_once("../../db_config.php");?> 
```

更好的是使用

```
require_once($_SERVER['DOCUMENT_ROOT'] . 'directory/directory/file'); 
```

# jquery - 使用 jQuery 获取目标文本

> ID：14720807
> 
> 赞同：14
> 
> 时间：2013-02-06T02:53:31.653
> 
> 标签：jquery, events, target

试图从无序列表中获取事件目标元素的文本

```
<ul>
  <li>Item 1</li>
  <li>Item 2</li>
  <li>Item 3</li>
</ul> 
```

用这样的代码

```
$('ul').click(function() {
theEl=(event.target.text);
}); 
```

当我控制台日志

```
event.target 
```

它返回

```
 <li>Item 1</li> 
```

和

事件.目标.文本

返回未定义

我只想要“第 1 项”。我知道我以前做过 - 一定很晚了......感谢任何帮助:)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-06T02:54:49.873

使用 jQuery 的文本函数：

```
$(event.target).text() 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-06T02:55:52.983

您混淆了原始 JS 和 jQuery。

在 jQuery 中，你会使用`$(event.target).text()`

但是，它在 JavaScript 中效率更高：`event.target.firstChild.nodeValue`

编辑：这是一个[JSPerf](http://jsperf.com/js-text-jquery)作为证明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T03:17:26.300

原因`event.target.text`未定义是因为 HTMLElement 没有定义该方法或属性。但是，jQuery 确实有`text()`您正在寻找的东西。为了访问 jQuery 方法或属性，您需要将当前 HTMLElement 包装在一个 jquery 对象中。这是通过将它传递给 jQuery 来完成的，然后 jQuery 用它创建一个函数对象，以及暴露 API 的 jQuery 原型。

```
jQuery(element);//in general
$(event.target).text();//for your situation 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-17T18:44:52.440

```
event.target.textContent 
```

它也是javascript访问。我建议您使用`Ctrl+Shift+J`. 写下你的代码：`console.log(event)`并在控制台上观察。您可以查看对象的每个属性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-03T09:48:09.110

试试这个-> event.target.innerText

# c++ - C++ 跟踪一个项目一次然后返回

> ID：14720815
> 
> 赞同：-3
> 
> 时间：2013-02-06T02:55:15.453
> 
> 标签：c++, class

我有一个类将提供一个函数，该函数带有一个看到的项目，它将`false`在第一次看到它时返回某个字符串，但`true`之后每次调用相同的字符串。

```
class Tracking
{
     ...
public:
     bool itemseen(const char* str)
     {
         ..
     }       
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T02:57:34.080

听起来您需要/想要 an`std::set<std::string>`或`std::unordered_set<std::string>`.

当您收到一个项目时，尝试将其插入到 [unordered_] 集合中。检查返回值以查看是否成功。

请注意，首先搜索该项目，然后在它不存在时尝试插入是相当浪费的。您通常只想尝试插入它，然后检查返回值是否成功：

```
class whatever { 
    std::set<std::string> strings;
public:
    bool itemseen(std::string const &input) { 
       return !strings.insert(input).second;
    }
}; 
```

如果您进行搜索然后插入，则当/如果它插入新对象时，您将强制它搜索集合两次。相反，使用返回值允许您只进行一次搜索。IOW，您可以预期它的速度大约是原来的两倍（尽管缓存可能会使第二次搜索更快，因此测量的差异可能会小于该速度）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T02:59:05.373

最简单的方法是使用 STL：

```
#include <set>
#include <string>

std::set<std::string> seen;

bool itemseen(const char* str)
{
  if (seen.find(str) == seen.end())
  {
    seen.insert(str);
    return false;
  }

  return true;
} 
```

# c++ - 循环计数范围内的事件编号始终返回 1

> ID：14720827
> 
> 赞同：0
> 
> 时间：2013-02-06T02:57:15.187
> 
> 标签：c++, loops

我需要一些建议和有用的指示来让我朝着正确的方向前进。我的函数旨在计算输入 a 和输入 b 之间有多少个偶数。

```
int evens(int a, int b)
{
    int p = 0;
    for(int i=a; i<=b; i++)
    {
        if(i % 2==0)
            ++p;
         return (p);
    }
} 
```

从逻辑上讲，这个函数对我来说很有意义，而且很容易理解发生了什么。但是，当我运行程序时，无论输入 # 是什么，它都会将 P 返回为“1”。这让我相信循环由于某种原因只运行一次，然后就是这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T02:58:29.583

你回来得太早了。把它放在循环之外。

可以像这样重写它：

```
int evens(int a, int b) {
    if(a != b)
        return ((b-a)/2)+1; //I can't think straight, I don't know why
    else {
        if(a % 2 == 0)
            return 1;
        else
            return 0;
    }
} 
```

# multithreading - Akka 管理 Camel 消费者线程还是 Camel 上下文管理消费者线程？

> ID：14720829
> 
> 赞同：0
> 
> 时间：2013-02-06T02:57:21.927
> 
> 标签：multithreading, akka, pool, consumer

骆驼文件提到 CamelContext 为其消费者管理线程。Akka 通过 Camel 扩展集成了 Camel。我们知道 Akka 有自己的线程池（dispatcher）。所以问题是：谁管理 Akka Camel 消费者/参与者线程？如果 CamelContext 管理线程，那么如何在 cfg 文件或代码中配置线程池？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:02:34.360

所以这里有几个线程在工作。Camel 为其组件线程管理 ExecutorService，而 Akka Camel 为 Consumer Actors 管理 ExecutorService。运行 Akka Actor 的不是 Camel 线程。

您在 Akka 配置中配置 Akka Dispatchers，在 Camel 配置中配置 Camel ExecutionServices。

# django - 带有多个 Heroku Dynos 的 Django 会话

> ID：14720832
> 
> 赞同：1
> 
> 时间：2013-02-06T02:57:45.517
> 
> 标签：django, heroku, redis

我已经在 Django 中构建了一个带有登录/注销的简单网站并部署到 Heroku。我正在使用内置的 Django 身份验证用户。我已经验证，当用户登录时，他们会看到一个个人资料页面，并且在刷新后他们仍然保持登录状态。

当我将 Heroku dynos 的数量增加到 1 个以上时，会话不再持续。我的意思是，在用户登录后，刷新一两次后，用户就退出了。我相信这是因为每个请求都转到一个特定的测功机，每个请求都单独维护会话状态？显然，当会话仅在用户碰巧从正确的测功机请求时才有效时，我的网站无法运行。

为了尝试解决这个问题并允许我的 Django 应用程序使用多个 dyno，我使用[django-redis-sessions](https://github.com/martinrusev/django-redis-sessions)认为所有 dyno 都可以共享对存储会话信息的单个 Redis 集群的访问。当我重新尝试将 dyno 计数提高到 1 以上时，即使会话正在写入 Redis 集群，问题也会立即返回。

我错过了什么吗？这是我第一次尝试在 Heroku 上扩展 Django。谢谢！

我的生产设置的一些相关部分：

```
INSTALLED_APPS = (
    'django.contrib.auth',          # User Authentication App
    'django.contrib.contenttypes',  # Dependency of auth
    'django.contrib.sessions',      # Database backed sessions
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',   # Collect and store static resources
    'storages',                     # Custom Django Storage Backends
    'djcelery',                     # Celery Queueing
    'kombu.transport.django',       # Use database as a Celery queue
    'app_pkg.apps.web',
)

SESSION_ENGINE = 'redis_sessions.session'

SESSION_REDIS_HOST = 'servername.redistogo.com'
SESSION_REDIS_PORT = 9357
SESSION_REDIS_DB = 0
SESSION_REDIS_PASSWORD = 'mypassword'
SESSION_REDIS_PREFIX = 'session' 
```

编辑：在将 Redis 集成到我的应用程序之前，我遇到了这个问题。我开始使用 Redis 会话存储作为集中存储会话的位置的一种方式，而没有意识到数据库已经这样做了。如果有任何用途，使用的数据库是通过 Heroku 插件的 Amazon RDS。我将考虑 Redis 的使用情况，验证我是否仍然有问题，并报告回来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:24:04.083

Django 会话保存在数据库中。测功机不应该以任何方式影响它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-25T15:29:35.270

您是为每个应用程序 dyno 创建不同的 redis 插件，还是将同一个插件附加到所有 dyno？您将需要后者来共享会话！

另请注意，默认情况下，redis 连接是不安全的。我不确定会话是否使用 SECRET_KEY 应用程序加密，或者如果有人获得 REDIS_URL，它们是否可被利用。

# user-interface - 当我在字段中输入文本时会发生什么事件？我的输入是什么文本编码？

> ID：14720836
> 
> 赞同：1
> 
> 时间：2013-02-06T02:58:27.573
> 
> 标签：user-interface, language-agnostic, character-encoding

我正在使用键盘将多语言文本输入到 Web 浏览器显示的表单中的字段中。在与 O/S 和浏览器无关的级别上，我认为会发生以下事件（如果我错了，请纠正我，因为我认为我是）：

1.  在每次按键时，都会有一个中断指示按键被按下
2.  O/S（或键盘驱动程序？）确定键码并将其转换为某种键盘事件（字符、修饰符等）。
3.  O/S 的窗口管理器查找当前聚焦的窗口（浏览器）并将键盘事件传递给它
4.  浏览器的 GUI 工具包查找当前聚焦的元素（在本例中为我正在输入的字段）并将键盘事件传递给它
5.  该字段会自行更新以包含新字符
6.  发送表单时，浏览器在将输入的文本发送到表单目标之前对其进行编码（什么编码？）

在我继续之前，这是实际发生的事情吗？我是否错过或掩盖了任何重要的事情？

接下来，我想问一下：在上面的每个步骤中，字符是如何表示的？在第 1 步，密钥代码可以是特定于设备的幻数。在第 2 步，键盘驱动程序可以将其转换为操作系统可以理解的内容（例如，USB HID 规范：[http](http://en.wikipedia.org/wiki/USB_human_interface_device_class) ://en.wikipedia.org/wiki/USB_human_interface_device_class ）。接下来的步骤呢？我认为第 3 步和第 4 步的编码分别取决于操作系统和应用程序（浏览器）。它们会不会有所不同，如果可以，这个问题是如何解决的？

我问的原因是我遇到了一个特定于我最近开始使用的网站的问题：

![在此处输入图像描述](../Images/017c624c892312433e8f2968e9040850.png)

事情似乎一直在进行，直到上面的第 6 步，提交了输入文本的表单，之后文本被破坏得面目全非。虽然很明显该网站没有正确处理 Unicode 输入，但这一事件让我质疑我自己对事情如何运作的理解，现在我在这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T04:40:56.373

你的描述或多或少是正确的。

但是，了解该站点的问题并不重要。

问号而不是字符表示发生了编码之间的转换，而不是编码的错误表示（这可能会导致乱码。）

用来表示字母的字符可以用不同的方式编码。例如，ASCII 中的“a”是 0x61，而 EBCDIC 中的“a”是 0x81。这您可能知道，人们往往会忘记 ASCII 是仅包含英文字符的 7 位代码。由于 PC 计算机使用字节作为它们的存储单元，因此早期 ASCII 码中未使用的前 128 个位置用于表示其他字母表中的字母，但是哪一个呢？西里尔？希腊语？等等。DOS 使用代码页号来指定使用哪些符号。大多数（全部？） DOS 代码页保持低 128 个符号不变，因此无论使用什么代码页，英语看起来都像英语；但是尝试使用希腊语代码页来读取俄语文本文件，您最终会得到希腊语和符号乱码。

后来 Windows 添加了它自己的编码，其中一些具有可变长度的编码（与 DOS 代码页相反，其中每个字符由单个字节代码表示），然后 Unicode 出现了引入代码点的概念。

在代码点下，每个字符都分配有一个由通用数字标识的代码点，即代码点由一个数字而不是 16 位数字标识。Unicode 还定义了将代码点编码为字节的编码。UCS-2 是一种固定长度编码，将代码点编号编码为 16 位数字。超过 16 位的代码点会发生什么情况，很简单，它们无法在 UCS-2 中编码。当从支持特定代码点的编码转换为不支持特定代码点的编码时，该字符被替换为指定字符，通常是问号。

因此，如果我得到一个带有希伯来字符 aleph 'א' 的 UTF-16 传输并将其翻译为没有此类字符的 latin-1 编码（或正式的 latin-1 没有代码点来表示 unicode 代码点 U+ 05D0) 我会得到一个问号字符而不是“？”

网站上发生的事情正是这样，它可以很好地获取您的输入，但它正在被转换为不支持您输入中所有字符的编码。

不幸的是，与可以通过手动指定页面编码来修复的编码错误陈述不同，您无法在客户端上解决此问题。

一个相关的问题是使用没有显示字符的字体。在这种情况下，您会看到一个空白方块而不是字符。可以通过覆盖站点 CSS 或安装适当的字体在客户端上解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:10:48.787

从按键到应用的字符剖析：

1 - 电脑键盘：

PC 键盘不是唯一的键盘类型，但我会限制自己使用它们。
令人惊讶的是，PC 键盘不理解字符，他们理解键盘按钮。这允许美国键盘使用的相同硬件用于 QEWERTY 或 Dvorak 以及使用美国 101/104 键格式的任何其他语言的英语（某些语言有额外的键。）

键盘使用标准扫描码来识别按键，为了使事情更有趣，可以将键盘配置为使用一组特定的代码：

Set 1 - 用于旧的 XT 键盘
Set 2 - 当前使用，
Set-3 用于今天没有人使用的 PS/2 键盘。

设置 1 和 2 使用通断代码（即按下和释放代码）。Set 3 仅对某些键（如 shift）使用 make 和 break 代码，并且只为字母制作代码，这允许键盘本身在长时间按下键时处理键重复。这对于从 PS/2 8086 或 80286 处理器卸载键重复处理很有好处，但对游戏来说却很不利。

[您可以在此处](http://www.win.tue.nl/~aeb/linux/kbd/scancodes-10.html)阅读有关这一切的更多信息，我还找到了[Microsoft 扫描代码规范](http://download.microsoft.com/download/1/6/1/161ba512-40e2-4cc9-843a-923143f3456c/scancode.doc)，以防您想构建和认证自己的 104 键 Windows 键盘。

在任何情况下，我们都可以假设 PC 键盘使用 set 2，这意味着它会在按下键时向计算机发送一个代码，并在释放一个键时向计算机发送一个代码。
顺便说一下，USB HID 规范没有指定键盘发送的扫描码，它只指定了用于发送这些扫描码的结构。
现在，由于我们谈论的是硬件，所有操作系统都是如此，但是每个操作系统处理这些代码的方式可能会有所不同。我将限制自己在 Windows 中发生的事情，但我认为其他操作系统应该遵循大致相同的路径。

2 - 操作系统

我不知道 Windows 究竟是如何处理键盘的，哪些部分由驱动程序处理，哪些由内核处理，哪些在用户模式下；但足以说定期轮询键盘以更改为键状态，扫描代码被翻译并转换为包含[虚拟键代码](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx)的 WM_KEYDOWN/WM_KEYUP 消息。准确地说，Windows 也会生成 WM_SYSKEYUP/WM_SYSKEYDOWN 消息，您可以[在此处阅读有关它们的更多信息](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646286%28v=vs.85%29.aspx)

3 - 应用程序

对于 Windows，应用程序获取原始虚拟键代码，并由它决定按原样使用它们或将它们转换为字符代码。
现在没有人写出好的诚实的 C windows 程序，但曾几何时，程序员曾经推出自己的消息泵处理代码，大多数消息泵将包含类似于以下的代码：

```
while (GetMessage( &msg, NULL, 0, 0 ) != 0)
{ 
        TranslateMessage(&msg); 
        DispatchMessage(&msg); 
} 
```

TranslateMessage 是魔法发生的地方。TranslateMessage 中的代码将跟踪 WM_KEYDOWN（和 WM_SYSKEYDOWN）消息并生成 WM_CHAR 消息（和 WM_DEADCHAR、WM_SYSCHAR、WM_SYSDEADCHAR。）
WM_CHAR 消息包含 UTF-16（实际上是 UCS-2，但不允许拆分头发）代码考虑到当时的活动键盘布局，从 WM_KEYDOWN 消息翻译的字符。
在 unicode 之前编写的应用程序呢？这些应用程序使用 ANSI 版本的 RegisterClassEx（即 RegisterClassExA）来注册它们的窗口。在这种情况下，TranslateMessage 根据键盘布局和活动区域性生成带有 8 位字符代码的 WM_CHAR 消息。

4 - 5 - 调度和显示字符。

在使用 UI 库的现代代码中，完全有可能（尽管不太可能）不使用 TranslateMessage 并自定义翻译 WM_KEYDOWN 事件。标准窗口控件（小部件）理解和处理发送给它们的 WM_CHAR 消息，但在窗口下运行的 UI 库/VM 可以实现它们自己的调度机制，而且许多都可以这样做。

希望这能回答你的问题。

# wpf - WPF TreeView 多个项目源

> ID：14720842
> 
> 赞同：4
> 
> 时间：2013-02-06T02:59:10.847
> 
> 标签：wpf, treeview

我想使用 wpf TreeView 显示以下内容：

![树视图结构](../Images/89c13c02e01aa7c72dd205bb99f23a11.png)

我的对象不同，没有基类或接口，我必须为每个项目定义一个 HierarchicalDataTemplate，例如 STOP，我可以只添加一个 ItemSource“Deliveries”，但我也想为此站点添加拾取器。

```
<!-- DELIVERY-->
<DataTemplate x:Key="DeliveryDataTemplate">
    <StackPanel Orientation="Horizontal">
        <TextBlock Text="DeliveryId"  Margin="3,3" />
        <TextBlock Text="{Binding DeliveryStatus}" VerticalAlignment="Center" Margin="5" />
        <TextBlock Background="{Binding StopStatus, Converter={StaticResource StatusConverter}}" Width="16" Height="16" />
    </StackPanel>
</DataTemplate>

<!-- STOP -->
<HierarchicalDataTemplate x:Key="StopTemplate"
                          ItemsSource="{Binding Deliveries}"
                          ItemTemplate="{StaticResource DeliveryTemplate}">
    <StackPanel Orientation="Horizontal">
        <TextBlock Text="Stop"  Margin="3,3" />
        <TextBlock Text="{Binding StopId}" Margin="3,3" />
        <TextBlock Background="{Binding StopStatus, Converter={StaticResource StatusConverter}}" Width="16" Height="16" Margin="3,3"  />
    </StackPanel>
</HierarchicalDataTemplate>

<!-- ROUTE -->
<HierarchicalDataTemplate x:Key="RouteTemplate"
                          ItemsSource="{Binding Stops}"
                          ItemTemplate="{StaticResource StopTemplate}">
    <StackPanel Orientation="Horizontal">
        <TextBlock Text="Route"  Margin="5,5" />
        <TextBlock Text="{Binding RouteId}" Margin="5,5" />
        <TextBlock Background="{Binding RouteStatus, Converter={StaticResource StatusConverter}}" Width="16" Height="16"  Margin="5,5" />
    </StackPanel>
</HierarchicalDataTemplate> 
```

我有一系列路线，每个路线都有停靠点，每个停靠点都有交货和取货，每个交货都有自己的物品，每个物品都有自己的物品等等......如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T04:23:53.587

这听起来像是一个异构数据源问题。我认为这个[解决方案](http://www.hardcodet.net/2008/12/heterogeneous-wpf-treeview)可能是您正在寻找的。

# c# - 动态添加索引到列表

> ID：14720843
> 
> 赞同：0
> 
> 时间：2013-02-06T02:59:35.817
> 
> 标签：c#, list, variables, dynamic, runtime

有什么办法可以动态/运行时向列表添加新索引，就像一开始没有任何索引然后每次计时器滴答时，一个索引被添加到列表中（值将来自静态数组列表）。

也许是这样的？

```
private void timer1_Tick(object sender, EventArgs e)
{
    var lblPulseQuery = from PulseTime in PulseAndTime
                        where Convert.ToInt32(PulseTime.Time) == i
                        select PulseTime;

    foreach (PulseTime PulseTime in lblPulseQuery)
    {
        lblPulse.Text = PulseTime.Pulse + " bps";
    }

    List<string> PulseList = new List<string>();
    PulseList.Add(lblPulse.Text);
    string[] PulseArray = PulseList.ToArray();
} 
```

上面的代码只会改变索引的值，而不是添加另一个不同值的索引。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T03:17:49.820

那是因为 List PulseList = new List(); 在 timer1_Tick() 中声明。每次计时器计时，它只会覆盖 PulseList 的值，因为它将实例化一个新对象。

如果要保留 PulseList 的值，请在类范围内声明它，这样当您添加另一个对象时，索引将递增。

# xml - perl 中的 SAX 是否有 parse_more 函数？

> ID：14720845
> 
> 赞同：2
> 
> 时间：2013-02-06T02:59:48.307
> 
> 标签：xml, perl, xml-parsing, sax

我从 SSH2 连接中串行接收最大 16k 的 XML 数据。每次我收到一个块时，我只需通过 parse_more 函数将它传递给 XML::Parser 模块。这真的很好用。我正在研究切换到使用 SAX 解析器，但我找不到 parse_more 函数。我发现的所有示例都使用 parse_uri 或 parse_string。我希望 parse_string 是 parse_more 的等价物，但它需要内存中的整个字符串，这在很大程度上违背了使用 SAX 的目的。有谁知道如何使用 SAX 处理数据块？

顺便说一句，是否有人发现 perl 模块文档非常糟糕？在许多情况下，他们甚至至少没有列出可用的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-24T09:10:45.553

你有没有找到答案？我之前问过一个类似的问题，但现在偶然发现`XML::SAX::Expat::Incremental`这似乎正是我们都需要的。它具有`parse_more`功能，您只需要在获取字符串块时传递它们。

我没有时间测试更大的数据集，但初始测试工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T23:34:33.097

你看过[XML::Parser::PerlSAX](http://search.cpan.org/~kmacleod/libxml-perl-0.07/lib/XML/Parser/PerlSAX.pm)吗？听起来[它不会将整个文档树保存在内存中](http://www.xml.com/pub/a/2001/02/14/perlsax.html)。

*[编辑]*相反，它使用文件句柄来获取 XML 片段。也许您可以创建一个类似文件句柄的对象来将块传递给 XML::Parser？

# php - mysql 查询有时有效，但并非总是如此

> ID：14720846
> 
> 赞同：0
> 
> 时间：2013-02-06T02:59:49.690
> 
> 标签：php, mysql, database

我正在构建一个简单的“小”电影编目数据库系统供我自己使用。现在的问题是我有一个 mySQL 查询在大多数情况下都有效，但不是全部。基本上它通过使用第 3 方 IMDB API 来工作。我用它来搜索和提取我需要的值，效果很好。它显示在我的预览屏幕和所有内容上。我遇到的问题是，虽然大多数电影都有效，但有些电影却没有，我无法弄清楚原因。

例如，The Fellowship of the Ring 存储得很好，而 The Return of the King 根本不会通过查询。我找不到任何差异。

这是我的查询：

```
 $query = "INSERT INTO movies
(title, year, releaseDate, actors, image, runtime, genre, director, rating, watchedDate, category, series, comments, owned, ownedFormat, seen, plot, favorite, uploadDate)
VALUES ('$title', '$year', '$releaseDate', '$actors', '$newImg', '$runtime', '$genre', '$director', '$rating', '$watchedDate', '$category', '$series', '$comments', '$owned', '$ownedFormat', '$seen', '$plot', '$favorite', '$curDate')";

    mysql_query($query) or die ('Error'); 
```

我不确定我还需要提供什么。似乎电影中的某种差异导致了错误，但我不知道。

谢谢！

******** **编辑* ****** **********

 *****所以我尝试切换到mysqli。这是我的新代码：

```
 /* Create the prepared statement */
if ($stmt = $mysqli->prepare("INSERT INTO movies (title, year, releaseDate, actors, image, runtime, genre, director, rating, watchedDate, category, series, comments, owned, ownedFormat, seen, plot, favorite, uploadDate) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)")) {

    /* Bind our params */
    $stmt->bind_param('sssssssssssssssssis', $title, $year, $releaseDate, $actors, $newImg, $runtime, $genre, $director, $rating, $watchedDate, $category, $series, $comments, $owned, $ownedFormat, $seen, $plot, $favorite, $curDate);

    /* Execute the prepared Statement */
    $stmt->execute();

    /* Echo results */
    echo "Inserted {$title} into database\n";
} 
```

但是，现在我收到一条错误消息：致命错误：在 if 语句开始的行上的非对象上调用成员函数 prepare()。

我假设这是因为我的查询不是对象？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T03:16:07.830

最可能的原因是您将原始值放在单引号之间。如果其中一个值中有一个单引号，那么您将收到语法错误。

做你想做的更好的方法是绑定参数。您可以[在此处](http://php.net/manual/en/pdo.prepared-statements.php)阅读更多相关信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T03:18:43.463

如果没有关于实际返回值的更多信息，很难说。返回值可能包含破坏代码的字符，例如分号或引号。尝试使用正则表达式去除所有非字母数字字符。

```
$result = preg_replace("/[^a-zA-Z0-9]+/", "", $s); 
```

而且你有一个 sql 注入漏洞。考虑使用 PDO 代替已弃用的 mysql 函数。

[http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)*****

# c++ - 如何通过 htmlcxx 获取 html 的内容？

> ID：14720850
> 
> 赞同：0
> 
> 时间：2013-02-06T03:00:11.527
> 
> 标签：c++, html

我替换了html="中文网页内容"，编译不出来。它失败了，我想知道当我输入任何 id、class、tag 名称或名称时如何成功编译并获取内容。

```
#include <htmlcxx/html/ParserDom.h>
...
using namespace std;
using namespace htmlcxx;

//Parse some html code

string html = "<html><body>hey</body></html>";
HTML::ParserDom parser;
tree<HTML::Node> dom = parser.parseTree(html);

//Print whole DOM tree

cout << dom << endl;

//Dump all links in the tree

tree<HTML::Node>::iterator it = dom.begin();
tree<HTML::Node>::iterator end = dom.end();
for (; it != end; ++it)
{
 if (strcasecmp(it->tagName().c_str(), "A") == 0)
 {
   it->parseAttributes();
   cout << it->attribute("href").second << endl;
 }
}

//Dump all text of the document
it = dom.begin();
end = dom.end();
for (; it != end; ++it)
{
 if ((!it->isTag()) && (!it->isComment()))
 {
  cout << it->text();
 }
}
cout << endl; 
```

# mysql - Codeigniter db->update() VS MySQL 本机 UPDATE 受影响的行：0

> ID：14720854
> 
> 赞同：3
> 
> 时间：2013-02-06T03:00:52.730
> 
> 标签：mysql, codeigniter, rows-affected

单独使用 MySQL - 如果我对这样的表进行基本更新：

```
UPDATE `SOMETABLE` SET `NAME` = 'John' WHERE `ID` = 1; 
```

`NAME`= ' **John** '的值已经是 ' **John** ' - 换句话说 - 没有什么是新的，没有什么可更新的。MySQL 返回“**受影响的行：0（查询耗时 0.0007 秒）** ”

如果我进行相同的调用——现在使用 CodeIgniter——然后像这样检索受影响的行：

```
$data = array(
               'NAME' => 'John'
            );

$this->db->where('ID', 1);
$this->db->update('SOMETABLE', $data); 
$affect = $this->db->affected_rows();

echo $affect; // $affect echos 1 
```

* * *

**$affect**最终等于 1。我对此没有任何问题——我只是希望如果没有什么要更新的——codeigniter 的行为方式与 MySQL 相同，并且不会编辑不需要更新的内容，并且为受影响的行（）返回 0。

*   我有什么地方弄错了吗？
*   codeigniter 是否覆盖了“ **John** ”？或不？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T03:26:31.570

尝试使用以下代码获取 CodeIgniter 正在运行的查询：

```
$this->db->last_query(); 
```

还要发布您用于与 MySQL 交互的查询，以确认正在运行完全相同的查询。

CodeIgniter 确实有一个针对 MySQL 的 hack，它可以调整受影响行的报告，但我的印象是它只适用于 DELETE 查询。如果您查看`system/database/drivers/mysql/mysql_driver.php`or `system/database/drivers/mysqli/mysqli_driver.php`（无论您使用哪个驱动程序并查看变量`var $delete_hack = TRUE;`。调整可能会影响您的结果，是否值得一试？

# asp.net - jqgrid webmethod：保存行失败

> ID：14720857
> 
> 赞同：0
> 
> 时间：2013-02-06T03:11:27.270
> 
> 标签：asp.net, ajax, jqgrid, webmethod

ByVal datax As Object我正在尝试使用 ASP.NET 和 webmethod 来检索数据并为 jqgrid 保存数据。我可以从 webmethod 检索数据，但没有运气来保存。服务器端似乎永远不会得到我的帖子数据。有人可以帮忙吗？

网格代码：

```
$('#list99').jqGrid({
                datatype: function(postdata) {
                    $.ajax({
                        url: 'dbtest.aspx/getdata',
                        editurl: 'dbtest.aspx/updatedb',
                        type: 'POST',
                        data: '{}',
                        dataType: "json",
                        contentType: "application/json; charset=utf-8",
                        error: function(data, textStatus) {
                            alert('Error loading json');
                        },
                        success: function(data, st) {

                            if (st == 'success') {
                                var grid = $("#list99");
                                var gridData = JSON.parse(data.d);
                                grid.clearGridData();
                                for (var i = 0; i < gridData.length; i++) {
                                    grid.addRowData(i + 1, gridData[i]);
                                }
                            }
                            $("#list99").jqGrid('navGrid', '#pager99', { add: true, edit: true, del: true });

                        }
                    });
                },                
                type: 'POST',
                editurl: 'dbtest.aspx/updatedb',
                colNames: ['customerid', 'customername'],
                colModel: [
                          { name: 'customerid', index: 'customerid', width: 80, align: 'left', editable: true, edittype: 'text' },
                          { name: 'customername', index: 'customername', width: 120, align: 'left', editable: true, edittype: 'text'}],
                pager: $('#pager99'),
                rowNum: 5,
                rowList: [10],
                sortname: 'customerid',
                sortorder: 'desc',
                viewrecords: true,
                //width: 300
                autowidth: true

}); 
```

服务器端代码：

```
Public Class customer

        Public customerid As String
        Public customername As String

    End Class

    <System.Web.Services.WebMethod()> _
    Public Shared Function getdata() As String

        Dim c1 As New customer
        Dim c2 As New customer
        c1.customerid = "1"
        c1.customername = "pete"
        c2.customerid = "2"
        c2.customername = "joah"
        Dim lstcustomer As New List(Of customer)
        lstcustomer.Add(c1)
        lstcustomer.Add(c2)

        Dim jsonserial As New JavaScriptSerializer
        Dim result As String
        result = jsonserial.Serialize(lstcustomer)

        Return result

    End Function

    <System.Web.Services.WebMethod()> _
    Public Shared Function updatedb(ByVal datax As Object) As String

        //attempt to do save

    End Function 
```

在添加/编辑/删除后单击“sumbit”后，函数 updatedb 永远不会被调用。

之后我检查了萤火虫，我收到了错误消息：

```
"Invalid web service call, missing value for parameter: 'data'." 
```

我还尝试添加以下内容：

```
jQuery.extend(jQuery.jgrid.edit, {
            ajaxEditOptions: { contentType: "application/json" },
            recreateForm: true,
            serializeEditData: function(data) {
                //alert('in2');
                //alert(postData.customerid);
                //alert(JSON.stringify(postData));
                if (data.customerid == undefined) { data.customerid = null; }
                var postData = { 'data': data };
                //alert(postData.customerid);
                return JSON.stringify(postData);
            }
        }); 
```

还是不行=(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:53:26.133

我不建议您使用`datatype`定义为函数，特别是如果您只是`jQuery.ajax`为了与服务器通信。jqGrid 提供了许多方法来自定义将发送到服务器的数据（例如，参见jqGrid 的`serializeGridData`回调和`ajaxGridOptions`选项）并在 jqGrid 处理服务器响应之前更改服务器响应（`beforeProcessing`例如回调）。当前代码用于`addRowData`填充数据。据我所知，这是填充网格的最慢方法。此外，您调用`navGrid`每次加载数据，而不是在创建网格后直接调用一次。所有其他调用将被忽略。您可以找到许多如何将 Web 服务与 jqGrid 一起使用的示例。例如看[答案](https://stackoverflow.com/a/6296601/315935)

您当前的代码将[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)的[选项与 jqGrid 的选项](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:options)混合在一起。您将`editurl`jqGrid 的选项放入`$.ajax`.

另一个重要的错误是在`updatedb`方法中使用了正确的变量名称。您使用当前`datax As Object`而不是使用`customerid`和`customername`作为参数。

# workflow - Sublime Text：快速访问当前项目之外的文件

> ID：14720872
> 
> 赞同：1
> 
> 时间：2013-02-06T03:13:38.940
> 
> 标签：workflow, sublimetext2

为了促进跨项目的代码重用，我设置了这个（快速而肮脏的）方法来访问最近的项目。

![文件夹链接的屏幕截图](../Images/51fcc353cc7479ea92320b3d3f733086.png)

在当前项目中，我将链接 ( *z-themes* ) 添加到包含最近项目链接的文件夹。这使我无需打开整个项目就可以访问这些文件（这在 Espresso 中有效）。

在 Sublime Text 中，不遵循链接，并且符号链接与文件搜索混淆（链接文件夹中的文件出现在“**转到文件”**面板中，因此我可能会打开错误的文件）

问题是：**如何轻松访问当前项目之外的预定义文件夹中的文件？**

欢迎使用插件和替代工作流程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T08:21:28.647

也许像[FuzzyFileNav 之类的](https://github.com/facelessuser/FuzzyFileNav)？该插件允许您为特定文件夹设置书签。然后，您可以像通常在文件系统中一样浏览文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T03:02:46.423

我发现[Goto Folder](https://github.com/freewizard/SublimeGotoFolder)：它非常简单，不允许像 FuzzyFileNav 那样进行任何文件管理（这*可能*很好），但它允许简单的书签并且表现良好。

编辑：我还找到[了 FileBinder](https://sublime.wbond.net/packages/FileBinder)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-06T17:45:00.823

这就是我现在使用的：我为旧文件创建了一个*以前的项目*“项目”。

![相应项目中的项目文件夹](../Images/6aa1d2fc1c3072d61b759c61a5e8ea0f.png)

*   易于添加项目（将其文件夹拖到侧边栏）
*   **在所有**文件中使用 Sublime 的文件搜索
*   旧项目的文件与当前项目分离
*   没有要更新/弄清楚的插件

唯一的问题是我必须为此打开一个单独的窗口，但这没什么大不了的。

# file-upload - ZF2 - 当表单在提交时无效时如何保存上传的文件

> ID：14720873
> 
> 赞同：1
> 
> 时间：2013-02-06T03:13:41.340
> 
> 标签：file-upload, zend-form, zend-framework2

我在 ZF2 中有一个表单，例如，其中包含一个文本框和一个文件输入框。当表单无效时，例如文本框是必需的并且用户将其留空，如何将之前上传的文件保存在表单上，​​以便在表单无效时不会再次上传?

问候，
伊莱

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:43:32.730

从 ZF2.1 开始（我认为），通过 post-redirect-get 插件对此提供了支持。相关文档在这里：

[http://zf2.readthedocs.org/en/latest/modules/zend.form.file-upload.html#file-post-redirect-get-plugin](http://zf2.readthedocs.org/en/latest/modules/zend.form.file-upload.html#file-post-redirect-get-plugin)

> 当您无法分离表单时，可以使用 File Post-Redirect-Get Controller Plugin 管理文件输入并保存有效上传，直到整个表单有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:12:42.100

您可以使用验证组将非文件字段与文件输入字段分开验证：

[http://framework.zend.com/manual/2.0/en/modules/zend.form.quick-start.html#validation-groups](http://framework.zend.com/manual/2.0/en/modules/zend.form.quick-start.html#validation-groups)

# python - XPath：查找文本内容最多的元素

> ID：14720877
> 
> 赞同：0
> 
> 时间：2013-02-06T03:14:11.033
> 
> 标签：python, html, xml, xpath, lxml

我想寻找段落。我会使用 p 标签来查找此内容，但我已经看到了不应该使用 p 的页面。为了近似这一点，我只想在一个标签中查找最多的文本。任何想法如何找到这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:37:54.190

尝试这个：`//div/node()[string-length(following-sibling::node()/text()) < string-length(text())]`

实际上这只是一个方向，使用这个：

```
//div/node()[string-length(following-sibling::node()/text()) < string-length(./text()) and not(string-length(preceding-sibling::node()/text()) > string-length(./text()))] 
```

我正在使用一些废弃的 xml 来测试它，并且根目录是`<div>`如此更改为您正在检查的 xml 根目录。

# c#-4.0 - 找不到

> ID：14720878
> 
> 赞同：0
> 
> 时间：2013-02-06T03:14:10.740
> 
> 标签：c#-4.0, entity-framework-4, entityframework.extended

当我[`EntityFramework.Extended`](https://github.com/loresoft/EntityFramework.Extended)在我的`RiceBuySellProvider`项目中使用时，我在我的`main project`：

```
The type or namespace name I remove the 'RiceBuySellProvider' could not be found (are you missing a using directive or an assembly reference?) 
```

*从`MainProject`图像* ![在此处输入图像描述](../Images/602adaa211ba38fbed4b71f49c076650.png)

但是当我 从我的中删除`.FutureFirstOrDefault()`时，没有发现错误。为什么？`EntityFramework.Extended``RiceBuySellProvider`

**更新**

当我使用`.FutureFirstOrDefault()`这将是错误的原因。

```
public static ProductEntity GetProduct(string productNo)
{
    using (var con = new RiceBuySellEntities(ConnectionStr))
        return CompiledQueries.GetProCatTypeUnit.Invoke(con, productNo).FutureFirstOrDefault();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T03:20:01.847

您需要添加对包含您要导入的命名空间的程序集的引用。

项目属性 > 参考

**编辑**
Rice 程序集可能针对不兼容的框架，或者它的位（x86 / x64）不匹配。

# api - Soundcloud 自定义小部件：更改容器背景颜色 w/owaveform.js？

> ID：14720881
> 
> 赞同：0
> 
> 时间：2013-02-06T03:14:20.537
> 
> 标签：api, widget, soundcloud

有什么方法可以从 #efefef 更改 sc-waveform 容器背景，而无需加载波形.js 库？我已经加载了足够多的库，并且 conainer bg 与我们的站点背景颜色冲突

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-04T19:59:27.240

我遇到了同样的问题，之前也遇到过这个问题（[使用 CSS3 或 JS 使用图案覆盖透明黑色剪影 PNG 的可见区域](https://stackoverflow.com/questions/23587669/overlay-visible-areas-of-transparent-black-silhouette-png-with-pattern-using-css)）。

这是您的波形示例：http: [//jsfiddle.net/eLmmA/3/](http://jsfiddle.net/eLmmA/3/)

```
$(function() {
    var canvas = document.createElement('canvas');
    canvas.width = 1800; // must match 
    canvas.height = 280; // must match 

    var canvas_context = canvas.getContext("2d");

    var img = new Image();
    img.onload = function(){
        var msk = new Image();
        msk.onload = function(){
            canvas_context.drawImage(img, 0, 0);
            canvas_context.globalCompositeOperation = "destination-in";
            canvas_context.drawImage(msk, 0, 0);
            canvas_context.globalCompositeOperation = "source-over";
        };

        msk.src = 'WAVEFORM_IMAGE.EXT';
    }
    img.src = 'OVERLAY_IMAGE.EXT';

    document.body.appendChild(canvas);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:36:50.203

我想我明白你的意思。你想改变波形背景的颜色，波形周围的灰色部分：

![典型波形](../Images/4be0679b6220e0d3a8ccf02f1fb69477.png)

这里的问题是您从 SoundCloud API 获得的波形被表示为部分透明的 PNG 图像，其中波形本身是透明的，而它周围的镶边是灰色 ( `#efefef`) 颜色。

因此，除非您要用于波形自定义的库使用 HTML5 画布，否则您将无法使用更改该 chrome 的颜色（所以不，不可能使用 HTML5 Widget API 或 Custom Player API）。而且你*必须*使用waveform.js或类似的东西（或自己修改画布上的波形图像）。

您可以尝试使用最新的 CSS 过滤器（目前仅适用于 webkit）和 SVG 过滤器，可能还有一些适用于旧 IE 版本的 MS IE 过滤器，但我不确定您是否能够仅更改颜色。

# google-apps-script - 谷歌应用程序脚本会话 ID 谷歌网站

> ID：14720883
> 
> 赞同：0
> 
> 时间：2013-02-06T03:14:58.067
> 
> 标签：google-apps-script, google-sites

我的女朋友有一个做纸杯蛋糕、饼干、蛋糕汽水等的小生意，我想为她创建一个相对简单的网站。该网站将有几个页面，其中包含人们可以订购的不同物品的照片。本质上，我希望该网站像购物车一样，但不是下订单，而是为了获得报价。我的想法是，每当他们在报价单中添加内容时，应用程序脚本会将详细信息保存到电子表格中。当他们完成并想要获得报价时，他们单击提交按钮，该按钮将发送一封电子邮件，其中包含已存储在电子表格中的详细信息。

我可以弄清楚如何做几乎所有需要的事情，除了我不知道如何获得某种会话 ID 来链接我添加到电子表格的记录。有没有办法检索一个可以完成我所追求的唯一会话 ID？使用 Google 协作平台和 Google Apps 脚本可以实现我所做的事情吗？有没有人成功地做过类似的事情？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T13:38:18.763

您可以跟踪用户的电子邮件地址并将其用作已登录 Google 用户的密钥，如果您希望“会话”在 24 小时后清除，则可能还可以跟踪他们上次访问脚本的时间，等等。未登录的 Google 用户无法获取密钥。此外，请为此考虑 UserProperties 或 ScriptDb 而不是电子表格。

# objective-c - 使用主/详细应用程序更改默认视图

> ID：14720884
> 
> 赞同：0
> 
> 时间：2013-02-06T03:15:13.607
> 
> 标签：objective-c, xcode, uiviewcontroller, uinavigationcontroller

你能帮我做这个吗？我正在创建一个应用程序并且我正在使用一个主/详细信息应用程序，然后我添加了一个名为 MenuViewController 的新类，我希望它成为我的应用程序启动时加载的初始视图。我能够做到，但我的 MasterViewController 不再工作了，每次我单击表视图中的一个项目时，它都会显示另一个名为 DetailViewController 的视图，但是自从我更改了默认视图后，它不再显示 DetailViewController

这是我完成的一段代码

在 appdelegate.m

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
     {
        self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
        MenuViewController *menuView = [[[MenuViewController alloc]initWithNibName:@"MenuViewController" bundle:nil]autorelease];

        MasterViewController *masterViewController = [[[MasterViewController alloc] initWithNibName:@"MasterViewController" bundle:nil] autorelease];
        self.navigationController = [[[UINavigationController alloc] initWithRootViewController:masterViewController] autorelease];
        self.window.rootViewController = menuView;
        [self.window makeKeyAndVisible];
        return YES;

     } 
```

在我的 MenuViewController.m

```
//  Created by Jan Arman Capistrano on 2/6/13.
//  Copyright (c) 2013 Jan Arman Capistrano. All rights reserved.
//

#import "MenuViewController.h"
#import "MasterViewController.h"
@interface MenuViewController ()

@end

@implementation MenuViewController

-(IBAction)nextView:(id)sender
{
    MasterViewController *masterViewc = [[MasterViewController alloc]initWithNibName:nil bundle:nil];

    [self presentViewController:masterViewc animated:YES completion:nil];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T03:41:28.133

看来您`MasterViewController`是从 XIB 实例化的。如果是这样，请检查 UITableView 是否具有其委托和数据源绑定（可能是 MasterViewController 本身）

你有没有尝试在你的`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`方法中设置一个断点，看看它是否真的被调用了？

# django - 用于谷歌应用引擎的带有 Oauth 的 facebook api

> ID：14720891
> 
> 赞同：1
> 
> 时间：2013-02-06T03:16:07.897
> 
> 标签：django, facebook, google-app-engine, facebook-graph-api

我想从我的 GAE 应用程序发布到用户墙。对于 twitter，我使用 tweepy，我可以使用 Oauth，发布推文。

我正在寻找任何功能类似于 tweepy 的 facebook api。

# linux - Illegal reference to an array in awk (I am having trouble figuring out awk)

> ID：14720898
> 
> 赞同：2
> 
> 时间：2013-02-06T03:17:18.850
> 
> 标签：linux, unix, awk

The script I am trying to use is:

```
cat gatk_probes.interval_list |
awk '
BEGIN{
   OFS="\t";
   print "#CHR\tBP1\tBP2\tID"
}
{
   split($1,a,":");
   chr=a[1];
   if (match(chr,"chr")==0) {
      chr="chr"chr
   }
   split(a[2],b,"-");
   bp1=b[1];
   bp2=bp1;
   if (length(b) > 1) {
      bp2=b[2]
   }
   print chr,bp1,bp2,NR
}' > ./EXOME.targets.reg 
```

I am getting the error:

```
awk: line 1: illegal reference to array b 
```

Is there something obviously wrong?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T04:21:22.403

`length(b)` is messing you up, apparently not every implementation of awk supports it. You can do this though:

```
BEGIN
{
    OFS="\t"; 
    print "#CHR\tBP1\tBP2\tID"
}
{
    split($1,a,":"); 
    chr=a[1]; 
    if (match(chr,"chr")==0) 
    {
        chr="chr"chr
    }
    blength = split(a[2],b,"-"); 
    bp1=b[1]; 
    bp2=bp1; 
    if (blength > 1) 
    {
        bp2=b[2]
    }
    print chr,bp1,bp2,NR
} 
```

split returns the number of elements in the array (b in this case).

# c - 我需要读取文件中的换行符

> ID：14720900
> 
> 赞同：4
> 
> 时间：2013-02-06T03:17:26.417
> 
> 标签：c, file

假设文件`hello\n stack overflow \n`中有一个文本文件，输出应该是`2`因为有 2 个`\n`序列。相反，我得到一个作为答案。我究竟做错了什么？这是我的代码：

```
int main()
{
    FILE                *fp = fopen("sample.txt", "r");    /* or use fopen to open a file */
    int                 c;              /* Nb. int (not char) for the EOF */
    unsigned long       newline_count = 1;

        /* count the newline characters */
    while ( (c=fgetc(fp)) != EOF ) {
        if ( c == '\n' )
            newline_count++;
        putchar(c);
    }

    printf("\n  %lu newline characters\n ", newline_count);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T03:26:38.833

试试这个：

```
int main()
{
    FILE                *fp = fopen("sample.txt", "r");    /* or use fopen to open a file */
    int                 c, lastchar = 0;              /* Nb. int (not char) for the EOF */
    unsigned long       newline_count = 0;

        /* count the newline characters */
    while ( (c=fgetc(fp)) != EOF ) {
        if ( c == 'n' && lastchar == '\\' )
            newline_count++;
        lastchar = c; /* save the current char, to compare to next round */
        putchar(c);
    }

    printf("\n  %lu newline characters\n ", newline_count);
    return 0;
} 
```

实际上，文字`\n`是两个字符（一个字符串），而不仅仅是一个。所以你不能简单地把它当作一个角色来比较。

**编辑** 由于`\n`是两个字符， the`\`和 the `n`，我们必须记住我们读入的最后一个字符，并检查当前字符是否是 an`n`并且前一个字符是 a `\`。如果两个测试都为真，这意味着我们已经`\n`在文件中找到了序列。

# joomla - Joomla 2.5：一种自定义表单字段类型，可呈现更多字段并支持表单会话

> ID：14720902
> 
> 赞同：0
> 
> 时间：2013-02-06T03:17:28.400
> 
> 标签：joomla, joomla2.5, joomla-extensions

在我的组件中，我想要一个具有自定义字段类型的管理表单。这个自定义字段实际上加载了另一个 xml 表单定义文件并呈现其中定义的这些字段。在自定义字段类中是这样的：

```
<?php

class CustomField extends JFormField
{
    protected function getInput()
    {
        $form = JForm::getInstance("another_form", "path/to/xml");
        $field_names = array_keys($form->getFieldset());

        $html = "";
        foreach ($field_names as $name) {
            $field = $form->getField($name);
            $html .= "<li>" . $field->getLabel() . $field->getInput() . "</li>";
        }

        return $html;
    }

} 
```

它渲染得很好，但我怎样才能使这些额外的字段与管理表单顺利集成，以便：

*   提交后，额外的字段将自动填充最后输入的数据，如其余字段（会话集成）
*   如果可能，额外的字段将被视为管理表单的一部分，具有所有保存和加载功能（假设数据库表具有这些字段的对应列）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:00:01.390

首先，我建议完全避免使用外部文件并为您的配置定义标准元素。

但是，如果您希望继续：

当您创建自定义元素时，使用 name 属性读取/写入值：即

```
protected function getInput() {
    return "<input type='hidden' name='$this->name' />";
} 
```

因此，如果您希望 Joomla 处理值的存储，则需要添加一个像上面那样的输入（隐藏）来保存所有自定义输入值。您可以将两个脚本绑定到您的自定义元素：一个将自定义输入字段中的所有值打包成一个 json 字符串，并将隐藏字段的值设置为此 json 字符串（删除 \n！）；另一个 onload 恢复值。确保您在 json 中使用字段名称，以便在添加/更改 xml 结构时您的配置将继续存在。

然而，这将产生一个丑陋的结果，因为组件的参数已经是 json 格式，您将在 json.json 中使用 json 配置组件。丑陋，但它不应该造成太多问题。

# primes - 如何找到一个数作为素数之和？

> ID：14720904
> 
> 赞同：4
> 
> 时间：2013-02-06T03:17:49.007
> 
> 标签：primes

让我们看看我们想要找到 1 到 1000 之间的所有数字，它们表示为两个素数之和。例如 8 = 3+5, 24 = 13+11

现在这可以通过遍历 1 到 1000 之间的素数列表在 O(n^2) 中完成。

有没有在小于 O(n^2) 的时间内做同样的事情。有没有一种方法可以在线性时间内做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T03:28:31.823

对于我们现在知道的所有偶数，它们可以表示为 2 个素数之和（参见[哥德巴赫猜想](http://en.wikipedia.org/wiki/Goldbach%27s_conjecture)）

对于所有的奇数，如果可以表示为2个质数之和，其中一个一定是2，另一个应该是奇质数。

所以总数应该是 (1000/2 - 1) + (质数从 3 到 997),

其中，

(1000/2 - 1) 是系列 4、6、8、10...的总数

（质数从 3 到 997）是系列的总数 5(2+3)、7(2+5)、9(2+7)、13(2+11) ...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T03:41:22.423

制作一个包含 1000 个布尔值的数组`p`。设置`p[i]`为`true`如果`i`是素数，`false`否则。

然后`O(N^2)`算法变得简单：`k`在外循环中遍历数字 1 到 1000，然后遍历所有`x`大于`k`内循环的素数，并检查是否存在这样的素`p[k-x]`数`true`：

```
for k in 1..1000
    for x in primes greater than k
        if (p[x-k])
            print k can be represented as x plus (x-k)
            break 
```

我怀疑检查是否可以在恒定时间内执行`O(N)`1000 个数字的总运行时间，[因为计算机辅助验证目前以相当慢的速度进行](https://www.egi.eu/case-studies/Goldbachs_conjecture.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-14T00:57:44.180

1！1 是一个很好的公式。首先，1000 + 1 除以 5x + 38。这是根据 ATF 定理。试试这个，你会得到答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-22T06:02:12.410

```
import java.util.Scanner;

public class SumOfNPrmNos_2 {

    public static void main(String[] args) {
        int swap,sum=0;
        Scanner sc=new Scanner(System.in);
        System.out.println("Enter Number Range From ");
        int small=sc.nextInt();
        System.out.println("Enter Number Range To ");
        int big=sc.nextInt();
        for (int i =small+1 ; i<big; i++) {
            char check='T';
            for (int j=2 ; j<=Math.sqrt(i) ; j++){
                if(i%j==0){
                    check='F';
                     break;
                }
            }
            if(check=='T'){
                sum=sum+i;
            }
        }
        System.out.println("Sum Is : = "+sum);

    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-03T07:16:51.563

说明：这里我做了一个用户定义的函数来检查输入数字的素数。这个数字分为两部分，第一部分是 num-1，第二部分是 1（它们的总和等于 num），现在第一部分递减，第二部分递增，直到它们都变得相等或更大，对于这些数字中的每一个，我查找它们是否都是素数，如果两者都是素数，则使用 break 退出循环并打印这些数字。

```
 #include<stdio.h>
    int prime(int);
    int main()
    {
            int num, r1, r2, i, j, c=0;
            printf("enter number\n");
            scanf("%d", &num);

            for(i=num-1, j=1; i>=j; i--, j++)   //this divides numb
            {
                    r1=prime(i);
                    r2=prime(j);

                    if(r1==1 && r2==1)
                    {

                            printf("Numbers are %d and %d\n", i, j);
                            c++;
                    }

            }
            if(c==0)
                    printf("cannot be expressed as sum of primes\n");
    }
    int prime(int n)
    {
            int i;
            for(i=2; i<=n; i++)
                    if(n%i==0)
                            break;
            if(n==i)
                    return 1;
            else
                    return 0;
    } 
```

# php - Facebook FQL for Likes 总是返回 True

> ID：14720907
> 
> 赞同：0
> 
> 时间：2013-02-06T03:18:02.033
> 
> 标签：php, facebook, facebook-fql

我正在尝试查看已授予权限的用户是否喜欢指定的 FB 页面。问题是，它总是返回 true，即使页面没有被喜欢。这是代码：

```
public function verifyFbLike($userId, $objectId)
    {
        $appID = 'XXX';
        $clientSecret = 'XXX';
        $url = 'https://graph.facebook.com/oauth/access_token?client_id=' . $appID . '&client_secret=' . $clientSecret . '&grant_type=client_credentials';
        $accessToken = file_get_contents($url);
        $accessToken = str_replace('access_token=', '', $accessToken);

        $query = urlencode('SELECT user_id FROM like WHERE object_id="' . $objectId . '"');
        $xml = file_get_contents('https://api.facebook.com/method/fql.query?query=' . $query . '&access_token=' . $accessToken);
        $xmlObj = new SimpleXMLElement($xml);

        // See if user did like the object or not
        if($xmlObj->attributes()->list == 'true')
            return TRUE;
        else
            return FALSE;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:51:43.170

将 urlencode(...) 更改为 rawurlencode(...) 修复了它。

# php - 从 php 5.3 切换到 5.2 是否有令人信服的理由？

> ID：14720908
> 
> 赞同：0
> 
> 时间：2013-02-06T03:18:10.037
> 
> 标签：php, sql-server, windows, iis

我的老板在一些较旧的服务器上用 php 5.2 创建了一个应用程序。该应用程序从 sql server 2012 数据库写入和读取数据。

我们现在有一个带有 iis 8 的品牌 spankin new windows server 2012。

我的工作是将应用程序从旧服务器迁移到新服务器。

我已经安装了 php 5.3 不知道我们需要 5.2

**问题**

1.  我应该降级吗？
2.  如果是这样，我该如何降级？安装 5.3 的过程很简单，但 5.2 将是一场噩梦。

**例如** ，这仅适用于 5.3+ 版本：

```
$serverName = '(localdb)\v11.0';
$connOptions = array('AttachDBFileName'=>'C:\Users\bswan\ExampleDB.mdf','Database'=>'ExampleDB');

$conn = sqlsrv_connect($serverName, $connOptions);
if($conn === false)      
    die(print_r(sqlsrv_errors(), true)); 
else
    echo "Connected via sqlsrv!<br />"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T03:20:33.080

降级没有正当​​理由。如果你有一个新系统，你应该安装 PHP 5.4。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T03:22:54.777

您应该检查5.3 中发生了[什么变化](http://www.php.net/manual/en/migration53.changes.php)。我会花时间测试，看看你的应用程序在 5.3 中是否一切正常，如果可以，那么你不应该降级。如果可以，最好保持最新版本。如果您坚持降级，可以查看此[相关](https://stackoverflow.com/questions/11703676/how-to-downgrade-php-version-from-5-3-to-5-2-in-ubuntu-12-04)帖子。

# clojure - 是否有一种规范的方法可以从特定的 datomic 命名空间中获取所有标识？

> ID：14720909
> 
> 赞同：5
> 
> 时间：2013-02-06T03:18:21.863
> 
> 标签：clojure, datomic

说我有`:user/name`并`:user/gender`安装为 datomic 模式。

```
(pprint (d/q '[:find ?ident :where
               [?e :db/ident ?ident]
               [_ :db.install/attribute ?e]] (d/db conn))) 
```

找到所有 db.install/attributes

```
 #{[:db/code] [:user/gender] [:fressian/tag] [:db/unique] [:user/name] [:db/fn] 
 [:db/noHistory] [:db/fulltext] [:db/lang] [:db/valueType] [:db/doc]
 [:db/isComponent] [:db.install/function] [:db/cardinality] [:db/txInstant] [:db/index]} 
```

但是，我只想列出 :user 命名空间中的项目

```
[:user/gender] [:user/name] 
```

我应该在查询中添加什么或者是否有自动执行它的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T08:32:27.823

我想到了

```
(d/q '[:find ?ident :where
           [?e :db/ident ?ident]
           [_ :db.install/attribute ?e]
           [(.toString ?ident) ?val]
           [(.startsWith ?val ":user")]] (d/db *conn*))

;; => #{[:user/gender] [:user/firstName]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-02T17:13:15.830

您可以使用[Tupelo Datomic 库](https://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.adoc)来获取给定分区的所有 EID。只需使用：

```
(ns xyz
  (:require [tupelo.datomic :as td] ...

  ; Create a partition named :people (we could namespace it like :db.part/people if we wished)
  (td/transact *conn* 
    (td/new-partition :people ))

; Find all EID's in the :people partition
(let [people-eids (td/partition-eids *conn* :people) ]
   ...) 
```

更多信息可以在[Datomic 邮件列表](https://groups.google.com/forum/#!searchin/datomic/partition%7Csort:date/datomic/eQQnnqYl67Y/ZMvrYL4eEgAJ)中找到。享受！

# php - 在 php 中过期激活链接的简单方法？

> ID：14720911
> 
> 赞同：1
> 
> 时间：2013-02-06T03:18:29.490
> 
> 标签：php, mysql

只需要一种简单的方法来使通过电子邮件发送给我网站上的用户的激活链接过期。当前用户注册的日期存储在 mysql 数据库中。电子邮件中发送的链接是这样的：/activation.php?id=20

这是我的激活

```
 <? 
include_once "scripts/connect_to_mysql.php";
// Get the member id from the URL variable
$id = $_REQUEST['id'];
$id = ereg_replace("[^0-9]", "", $id); // filter everything but numbers for security
if (!$id) {
    echo "Missing Data to Run";
    exit(); 
}
// Update the database field named 'email_activated' to 1
$sql = mysql_query("UPDATE members SET emailactivated='1' WHERE id='$id'"); 
// Check the database to see if all is right now 
$sql_doublecheck = mysql_query("SELECT * FROM members WHERE id='$id' AND emailactivated='1'"); 
$doublecheck = mysql_num_rows($sql_doublecheck); 
if($doublecheck == 0){ 
// Print message to the browser saying we could not activate them
print "<br /><br /><div align=\"center\"><h3><strong><font color=red>Your account could not be activated!</font></strong><h3><br /></div>"; 
} elseif ($doublecheck > 0) {
// Print a success message to the browser cuz all is good 
// And supply the user with a link to your log in page, please alter that link line 
print "<br /><br /><h3><font color=\"#0066CC\"><strong>Your account has been activated!<br /><br />
</strong></font><a href=\"\">Click Here</a> to log in now.</h3>"; 
} 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T03:22:14.767

创建激活链接时，将 unix 时间戳与它一起存储在表中的记录中

表可能如下所示：

```
activation_links
id,link_hash,created_date,expiration_date,is_active,used_date 
```

然后在激活时只需检查到期日期

```
$key = $_GET['key'];
$sql = "SELECT COUNT(*) FROM activation_links WHERE link_hash = '$key' AND expiration_date <= ".time(); 
```

此外，您不想使用简单的数字激活键。您应该生成不容易被猜到的长随机字符串。

```
function generateRandomString($length = 10) {
    $characters = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
    $randomString = '';
    for ($i = 0; $i < $length; $i++) {
        $randomString .= $characters[rand(0, strlen($characters) - 1)];
    }
    return $randomString;
} 
```

**旁注：** 您应该使用 MySQLi 或 PDO

前任。

```
$db = new mysqli($host,$user,$pass,$dbname); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T03:23:40.273

您需要在数据库中的成员表上放置一个激活到期日期字段。这样，当您创建成员记录时，插入日期，例如提前 6 小时。然后在处理链接点击时，确保尚未超过激活日期。

# python - 在 Python 中使用分隔符变量拆分字符串

> ID：14720912
> 
> 赞同：2
> 
> 时间：2013-02-06T03:18:42.820
> 
> 标签：python, regex

我正在尝试编写一个函数来使用给定的分隔符拆分字符串。我已经看到使用正则表达式忽略所有特殊字符的类似问题的答案，但我希望能够传入分隔符变量。

到目前为止，我有：

```
def split_string(source, separators): 
    source_list = source
    for separator in separators:
        if separator in source_list:
                source_list.replace(separator, ' ') 
    return source_list.split() 
```

但它并没有删除分隔符

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T03:25:13.627

正则表达式解决方案（对我来说）似乎很容易：

```
import re
def split_string(source,separators):
    return re.split('[{0}]'.format(re.escape(separators)),source) 
```

例子：

```
>>> import re
>>> def split_string(source,separators):
...     return re.split('[{0}]'.format(re.escape(separators)),source)
... 
>>> split_string("the;foo: went to the store",':;')
['the', 'foo', ' went to the store'] 
```

在这里使用正则表达式的原因是如果您*不想*在`' '`分隔符中使用，这仍然有效......

* * *

另一种（我认为我更喜欢）可以使用多字符分隔符的方法是：

```
def split_string(source,separators):
    return re.split('|'.join(re.escape(x) for x in separators),source) 
```

在这种情况下，多字符分隔符作为某种非字符串可迭代（例如元组或列表）传入，但单字符分隔符仍然可以作为单个字符串传入。

```
>>> def split_string(source,separators):
...     return re.split('|'.join(re.escape(x) for x in separators),source)
... 
>>> split_string("the;foo: went to the store",':;')
['the', 'foo', ' went to the store']
>>> split_string("the;foo: went to the store",['foo','st'])
['the;', ': went to the ', 'ore'] 
```

* * *

或者，最后，如果您还想在连续运行的分隔符上进行拆分：

```
def split_string(source,separators):
    return re.split('(?:'+'|'.join(re.escape(x) for x in separators)+')+',source) 
```

这使：

```
>>> split_string("Before the rain ... there was lightning and thunder.", " .")
['Before', 'the', 'rain', 'there', 'was', 'lightning', 'and', 'thunder', ''] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T03:23:06.890

问题是`source_list.replace(separator, ' ')`没有修改`source_list`到位；它只返回一个修改后的字符串值。但是你不会对这个修改后的值做任何事情，所以它会丢失。

你可以这样做：

```
source_list = source_list.replace(separator, ' ') 
```

然后`source_list`现在将有修改后的版本。我对您的功能进行了这一更改，然后在测试时它运行良好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T03:28:59.137

您忘记将 source_list.replace(separator, ' ') 的结果分配回 source_list

看看这个修改过的片段

```
def split_string(source, separators): 
    source_list = source
    for separator in separators:
        if separator in source_list:
                source_list=source_list.replace(separator, ' ') 
    return source_list.split() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T03:23:31.873

你应该使用 split 来解决问题，它不需要正则表达式，但你可以让它做你需要的事情。

在您的示例代码中，您不会重新分配。

# c++ - “if (getline(fin, str)) {}”是否符合 C++11 标准？

> ID：14720913
> 
> 赞同：7
> 
> 时间：2013-02-06T03:18:43.303
> 
> 标签：c++, c++11, type-conversion, iostream, explicit-conversion

我检查了 C++11 标准，发现以下事实：

1.  `std::getline(fin, str)`返回一个`basic_ios`对象，其类有一个成员函数`explicit operator bool() const;`

2.  该类`basic_ios`没有`operator void*() const;`C++11 之前的成员函数。

所以，我认为`if (getline(fin, str)) {}`不符合标准。它应该写成

`if (bool(getline(fin, str)){}`. （但是，VC++ 2012 对这种用法给出了警告。即强制 void* 为 bool）

我对么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-06T03:20:23.337

代码符合要求。`bool`当对象被自动用作*条件*时，将调用显式转换运算符 to 。标准的更改旨在保持相同的用法，同时使其更安全。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-06T04:21:06.523

`explicit operator bool`（并且*只有* `explicit operator bool`）具有允许它`bool`在*某些*情况下隐式转换为 a 的特殊语言。此转换的规范语言是“上下文转换为`bool`”。

这些是语言进行布尔测试的地方。an 使用的条件表达式`if/while/for`是“上下文转换为`bool`”。逻辑运算符和条件运算符 ( `?:`) 也是如此。

所以虽然你不能这样做：

```
bool b = std::getline(fin, str);
void func(bool) {}
func(std::getline(fin, str)); 
```

你可以这样做：

```
while(std::getline(fin, str)) {...}
for(;std::getline(fin, str);) {...}
if(std::getline(fin, str) && somethingElse) {...} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-06T04:20:35.903

大卫是正确的，这里有支持他的引述。在 §12.3.2/2 中，标准说

> 转换函数可能是显式的（7.1.2），在这种情况下，它仅被视为直接初始化的用户定义转换（8.5）。否则，用户定义的转换不限于在赋值和初始化中使用。[*示例*：
> 
> ```
> class Y { };
> struct Z {
>     explicit operator Y() const;
> };
> 
> void h(Z z) {
>     Y y1(z); // OK: direct-initialization
>     Y y2 = z; // ill-formed: copy-initialization
>     Y y3 = (Y)z; // OK: cast notation
> } 
> ```
> 
> —*结束示例*]

发生这种上下文转换的一些地方是在操作数 to `!`、操作数 to`&&`和条件 a 中`if`。

因此**直接初始化可以使用显式转换运算符**，并且在 §4/3 中，

> 对于某些发明的临时变量 t (8.5)，`T`当且仅当声明格式正确时，表达式 e 才能隐式转换为类型。**某些语言结构要求将表达式转换为布尔值。****出现在这种上下文中的表达式 e 被称为在上下文中转换为 bool 并且当且仅当声明****格式**正确时，对于某些发明的临时变量（8.5）...`T t=e;`**`bool t(e);`**`t`

如您所见，该标准为上下文转换指定了好像直接初始化，这就是显式转换在`if`条件下工作的原因。

# javascript - 当我尝试初始化 jQuery 插件时，为什么会出现这些未捕获的类型错误？

> ID：14720915
> 
> 赞同：0
> 
> 时间：2013-02-06T03:18:48.133
> 
> 标签：javascript, jquery, jquery-plugins, initialization, typeerror

无法弄清楚这些未捕获的类型错误？我只是想使用一个简单的 jQuery 计数器插件...我网站上的其他插件工作正常：-/

错误：

```
Uncaught TypeError: Cannot set property 'counter' of undefined
Uncaught TypeError: Object [object Object] has no method 'counter' 
```

在我的页面上，我有一个像这样的跨度：

```
<span class="counter counter-analog2" data-direction="up" data-format="23:59:59.9" data-stop="00:00:10.0" data-interval="100">0:00.0</span> 
```

我在上面包含了 jQuery 插件和 css 文件，我在其中初始化它们：

```
<script type="text/javascript" src="/templates/ja_wall/js/jquery.counter.js"></script>
<link rel="stylesheet" href="/templates/ja_wall/css/jquery.counter-analog2.css" type="text/css" media="all" /> 
```

然后在我准备好的 jQuery 文档中（代码比插件包含的低）我初始化计数器插件，如下所示：

```
$('.main_counter').counter({}); 
```

我完全被卡住了......也许它与需要无冲突模式的jQuery有关？任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T03:43:54.627

看起来有另一个库正在覆盖该`$`变量。

`counter`插件实现似乎有一些问题。在 jQuery 插件开发中，通常的做法是不`$`直接使用变量，而是使用`jQuery`变量并使用自执行匿名函数来注入它。

在您的情况下，一种解决方案可以是更改 jquery.counter.js 中的以下行

```
!(function (context, definition) {
  if (typeof define == 'function' && typeof define.amd  == 'object') define(['jquery'], definition);
  else definition(context['$']);
}(this, function ($) { 
```

至

```
!(function (context, definition) {
  if (typeof define == 'function' && typeof define.amd  == 'object') define(['jquery'], definition);
  else definition(jQuery);
}(this, function ($) { 
```

您正在使用两者`jQuery`，并且`mootools`两者都使用`$`变量来访问核心引擎。由于您首先包含了 mootools 库，其次包含了 jQuery，因此 jQuery 会覆盖该变量，但对[jQuery.noConflict()](http://api.jquery.com/jQuery.noConflict/)`$`的任何调用都会恢复初始值。

在您的情况下，`k2.noConflict.js`文件正在调用它`var $K2 = jQuery.noConflict();`替换您的情况的原始值。`$``mootools`

由于您调用`jQuery.noConflict()`的`$`变量将指向 mootools，所以如果您想访问 jQuery，您需要使用变量`jQuery`或`$K2`.

编写插件的正常方式是

```
(function($){
    $.fn.x=function(){
        ..... 
    };
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T03:37:03.500

看起来插件没有正确初始化。

尝试 `$.noConflict();` 在你初始化你的插件之前把权利？

# xpages - xpage 文档不会保存新文档，但会保存已编辑的现有文档

> ID：14720916
> 
> 赞同：0
> 
> 时间：2013-02-06T03:19:04.590
> 
> 标签：xpages, xpages-extlib

我有一个我创建的 xapage 布局表单等。当我用它创建一个新文档时，它不会保存文档。但是，如果我编辑使用注释表单创建的现有文档，它会保存它。这很奇怪。没有任何错误消息，它只是用空字段再次重新加载文档。下面是我的源代码：

```
 <?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core"
    xmlns:xe="http://www.ibm.com/xsp/coreex"
    xmlns:xc="http://www.ibm.com/xsp/custom">

    <xp:this.data>
        <xp:dominoDocument var="document1" action="openDocument"
            formName="frmComm" computeWithForm="onsave">
        </xp:dominoDocument>
    </xp:this.data>

    <xp:this.dataContexts>
    <xp:dataContext var="parentDoc">
        <xp:this.value><![CDATA[#{javascript:
            try {
                if (document1.isResponse()) {
                    return database.getDocumentByUNID(document1.getDocument().getParentDocumentUNID());
                } else {
                    return "";
                }
            } catch(e) {
                return "";
        }}]]></xp:this.value>
    </xp:dataContext>
</xp:this.dataContexts>

    <xc:AppLayout>
        <xp:this.facets>
            <xp:panel xp:key="facetMiddle">

                <xp:panel>
                    <xc:ccFormActions></xc:ccFormActions>

                    <xp:panel>
                        <xp:panel><xe:formTable id="formTable1" formTitle="Communication">
        <xe:formColumn id="formColumn2">
            <xe:formRow id="formRow14" label="Policy Name:" rendered="#{javascript:document1.isEditable()}">
                <xp:inputText id="inputText1" value="#{document1.NameC}"
                    style="width:630.0px"
                    rendered="#{javascript:document1.isEditable()}" readonly="true">
                <xp:this.defaultValue><![CDATA[#{javascript:parentDoc.getItemValueString("Name");
}]]></xp:this.defaultValue></xp:inputText>
            </xe:formRow>
            <xe:formRow id="formRow11" label="Policy Name:" rendered="#{javascript:!document1.isEditable()}">
                <xp:text escape="true" id="NameV" value="#{document1.NameC}" rendered="#{javascript:!document1.isEditable()}">
                </xp:text>

            </xe:formRow>
            <xe:formRow id="formRow12" label="Policy Number:" rendered="#{javascript:document1.isEditable()}">
                <xp:inputText id="inputText4" value="#{document1.NbrC}" rendered="#{javascript:document1.isEditable()}" readonly="true">
                <xp:this.defaultValue><![CDATA[#{javascript:parentDoc.getItemValueString("Nbr");}]]></xp:this.defaultValue></xp:inputText>
            </xe:formRow>
            <xe:formRow id="formRow13" label="Policy Number:" rendered="#{javascript:!document1.isEditable()}">
                <xp:text escape="true" id="NbrV" value="#{document1.NbrC}" rendered="#{javascript:!document1.isEditable()}">
                </xp:text>

            </xe:formRow>
            <xe:formRow id="formRow10" label="Category:" rendered="#{javascript:document1.isEditable()}">
                <xp:inputText id="inputText5" style="width:169.0px" value="#{document1.CategoryC}" rendered="#{javascript:document1.isEditable()}" readonly="true">
                <xp:this.defaultValue><![CDATA[#{javascript:parentDoc.getItemValueString("Category");}]]></xp:this.defaultValue></xp:inputText>
            </xe:formRow>
            <xe:formRow id="formRow9" label="Category:" rendered="#{javascript:!document1.isEditable()}">
                <xp:text escape="true" id="CategoryV" value="#{document1.CategoryC}" rendered="#{javascript:!document1.isEditable()}">
                </xp:text>

            </xe:formRow>
            <xe:formRow id="formRow8" label="Sub Category:" rendered="#{javascript:document1.isEditable()}">
                <xp:inputText id="inputText7" value="#{document1.SubCategoryC}" rendered="#{javascript:document1.isEditable()}" readonly="true">
                <xp:this.defaultValue><![CDATA[#{javascript:parentDoc.getItemValueString("SubCategory");}]]></xp:this.defaultValue></xp:inputText>
            </xe:formRow>
            <xe:formRow id="formRow1" label="Sub Category:" rendered="#{javascript:!document1.isEditable()}">
                <xp:text escape="true" id="SubCategoryV" value="#{document1.SubCategoryC}" rendered="#{javascript:!document1.isEditable()}">
                </xp:text>

            </xe:formRow>
            <xe:formRow id="formRow2" label="Quarter / Year:" rendered="#{javascript:document1.isEditable()}">
                <xp:comboBox id="comboBox1" value="#{document1.ComQtr}" style="margin-right:10.0px" rendered="#{javascript:document1.isEditable()}">
                    <xp:selectItem itemLabel="Q1"></xp:selectItem>
                    <xp:selectItem itemLabel="Q2"></xp:selectItem>
                    <xp:selectItem itemLabel="Q3"></xp:selectItem>
                    <xp:selectItem itemLabel="Q4"></xp:selectItem>
                </xp:comboBox>
                <xp:comboBox id="comboBox2" value="#{document1.ComYr}"
                    rendered="#{javascript:document1.isEditable()}"
                    style="width:58.0px">

                    <xp:selectItems>
                        <xp:this.value><![CDATA[#{javascript:var profDoc:NotesDocument = database.getProfileDocument("configdoc","");

return
profDoc.getItemValue("cfgCYear");}]]></xp:this.value>
                    </xp:selectItems>
                </xp:comboBox>
            </xe:formRow>
            <xe:formRow id="formRow3" label="Quarter / Year:" rendered="#{javascript:!document1.isEditable()}">
                <xp:text escape="true" id="QtrYr" rendered="#{javascript:!document1.isEditable()}"><xp:this.value><![CDATA[#{javascript:document1.getItemValueString("ComQtr") + " " + document1.getItemValueString("ComYr")}]]></xp:this.value></xp:text>

            </xe:formRow>
            <xe:formRow id="formRow4" label="Date:">
                <xp:inputText id="inputText2"
                    value="#{document1.ComDt}">
                    <xp:this.converter>
                        <xp:convertDateTime type="date"
                            dateStyle="short">
                        </xp:convertDateTime>
                    </xp:this.converter>
                    <xp:dateTimeHelper></xp:dateTimeHelper>
                </xp:inputText>
            </xe:formRow>
            <xe:formRow id="formRow5" label="Activity">
                <xp:inputTextarea id="inputTextarea1"
                    style="width:413.0px;height:84.0px" value="#{document1.ComActivity}">
                </xp:inputTextarea>
            </xe:formRow>
            <xe:formRow id="formRow6" label="Comments:">
                <xp:inputRichText id="inputRichText1" value="#{document1.ComComments}"></xp:inputRichText>              
            </xe:formRow>
            <xe:formRow id="formRow7" label="Edit Policy Information:">
                <xp:checkBox text="Edit" id="checkBox1" value="#{document1.EditPol}" checkedValue="Edit"></xp:checkBox>

            </xe:formRow>
        </xe:formColumn>

    </xe:formTable></xp:panel>
                    </xp:panel>
                </xp:panel>
            </xp:panel>
        </xp:this.facets>

    </xc:AppLayout><xp:this.navigationRules><xp:navigationRule outcome="xsp-failure" viewId="/communications.xsp"></xp:navigationRule></xp:this.navigationRules></xp:view> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:15:10.750

这解决了。与经典笔记开发不同，如果表单属性设置为文档而不是响应，则在使用操作创建响应时将不会保存文档。因此，将属性更改为响应即可解决问题。

# c# - 为什么图片在图片框中没有被拉伸？

> ID：14720919
> 
> 赞同：0
> 
> 时间：2013-02-06T03:19:31.220
> 
> 标签：c#, image

我对 C# 中的图像处理相对较新。我试图在图片框中缩放这个动态构建的 BMP，但图像根本没有调整大小。我希望 BMP 填充整个图片框。图片框为 555 x 555。它只是以原始大小 (100 x 100) 显示 BMP。有任何想法吗？

```
private void Form1_Load(object sender, EventArgs e)
{
    pictureBox1.SizeMode = PictureBoxSizeMode.StretchImage;
}

private void pictureBox1_Paint(object sender, PaintEventArgs e)
{
    Graphics gPB = e.Graphics;

    Bitmap bmp = new Bitmap(100, 100);
    Graphics gBmp = Graphics.FromImage(bmp);

    Brush whiteBrush = new SolidBrush(Color.White);
    gBmp.FillRectangle(whiteBrush, 0, 0, bmp.Width, bmp.Height);

    Brush redBrush = new SolidBrush(Color.IndianRed);
    gBmp.FillRectangle(redBrush, 0, 0, 20f, 20f);

    Brush greenBrush = new SolidBrush(Color.MediumSeaGreen);
    gBmp.FillRectangle(greenBrush, 20, 0, 20f, 20f);

    Brush blueBrush = new SolidBrush(Color.MediumSlateBlue);
    gBmp.FillRectangle(blueBrush, 0, 20, 20f, 20f);

    Brush yellowBrush = new SolidBrush(Color.LightYellow);
    gBmp.FillRectangle(yellowBrush, 20, 20, 20f, 20f);

    gPB.DrawImage(bmp, 0, 0, bmp.Width, bmp.Height);

    pictureBox1.SizeMode = PictureBoxSizeMode.StretchImage;
} 
```

我也尝试过 Zoom SizeMode。那没有任何区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T03:31:21.850

您可以利用 .NET 的`Interpolation`属性。见这里：http: [//msdn.microsoft.com/en-us/library/system.drawing.graphics.interpolationmode.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.interpolationmode.aspx)

```
gPB.InterpolationMode = InterpolationMode.NearestNeighbor;
gPB.DrawImage(bmp, 0, 0, 555, 555); 
```

# spring - Spring 3.2 是否支持使用 Spock 进行测试

> ID：14720921
> 
> 赞同：4
> 
> 时间：2013-02-06T03:19:52.167
> 
> 标签：spring, testing, spock

我对测试有些陌生（可怕，呵呵），所以如果这是无知的，请原谅我。

鉴于对测试框架所做的更改，spock-spring 0.7-groovy-2.0 是否与新的 Spring 3.2 版本兼容？

我查看了[测试下的两个 Spring 3.2 文档](http://static.springsource.org/spring-framework/docs/3.2.0.RELEASE/spring-framework-reference/html/testing.html#spring-mvc-test-framework)：

以及[News 下的 Spock 文档](http://code.google.com/p/spock/)：

但是没有什么能帮助我判断新的 Spring 3.2 测试框架是否仍然允许以 Spring 3.2 测试（Spring 3.2 文档第 11.3.4 节）描述的方式配置 Spock 规范的测试上下文，以便我的注释 bean 是可注入的。

无论如何我都试过了，但是在加载测试上下文时没有成功，尽管不依赖于注入 bean 的测试通过了。

我可以提供我的@ContextConfiguration 尝试的详细信息（在上面引用的 Spring 3.2 文档第 11.3.4 节中尝试过`locations=`和`classes=`模式），如果它应该工作，但现在我的问题是：Spock Specification testing context still be configured与 Spring 3.2 一起工作？

如果是这样，任何成功的例子都会很棒（没有看到任何带有 Spock 的 Spring 3.2）。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T11:47:44.120

据我所知，Spock 的 Spring 集成应该可以很好地与 Spring 3.2 中的新测试功能配合使用。与使用 JUnit 测试基于 Spring 的应用程序相比，唯一需要的更改是（一如既往）：

*   删除`@RunWith`注释
*   放上`spock-spring`测试类路径

请注意，您不能使用扩展 Spring 测试基类的旧方法。相反，您必须使用基于注释的 Spring 测试方法。

如果您发现上述策略不起作用的情况（并且您使用 JUnit 进行了相同的测试），请在[http://issues.spockframework.org](http://issues.spockframework.org)提交问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T22:46:18.090

在彼得回答的启发下，我发现测试上下文确实设置得很好。这是我使用的，它运行正常：

PersonServiceSpec.groovy：

```
@ContextConfiguration(locations="classpath*:/PersonServiceSpec-context.xml")
class PersonServiceSpec extends Specification {

    @Autowired
    PersonService personService;

    def username

    def setup() {
        this.username = "tester"
    }

    def "Does search for username pull tester" () {

        expect: "tester" == username;
    }

    def "PersonService exists" () {
        expect: personService != null;
    }

} 
```

将此 PersonServiceSpec-context.xml 放置在类路径上（我的 Maven 项目的 src/main/resource）：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

<bean id="personSevice" class="<qualifiedname>.services.TPersonServiceImpl" >
</bean>

</beans> 
```

`TPersonServiceImpl`和一个实现我的`PersonService`接口方法的存根类。

测试通过。

# r - 基于连接更新data.table的子集

> ID：14720923
> 
> 赞同：19
> 
> 时间：2013-02-06T03:20:06.310
> 
> 标签：r, join, data.table, subset, assignment-operator

我有两个数据表，DT1 和 DT2：

```
set.seed(1)
DT1<-data.table(id1=rep(1:3,2),id2=sample(letters,6), v1=rnorm(6), key="id2")
DT1
##    id1 id2         v1
## 1:   2   e  0.7383247
## 2:   1   g  1.5952808
## 3:   2   j  0.3295078
## 4:   3   n -0.8204684
## 5:   3   s  0.5757814
## 6:   1   u  0.4874291

DT2<-data.table(id2=c("n","u"), v1=0, key="id2")
DT2
##    id2 v1
## 1:   n  0
## 2:   u  0 
```

我想根据与 DT2 的连接来更新 DT1，但仅限于 DT1 的一个子集。例如，对于`DT1[id1==3]`，我希望第 4 行中的 v1 的值会更新为以下结果：

```
DT1
##    id1 id2         v1
## 1:   2   e  0.7383247
## 2:   1   g  1.5952808
## 3:   2   j  0.3295078
## 4:   3   n          0
## 5:   3   s  0.5757814
## 6:   1   u  0.4874291 
```

我知道如何更新表（使用`:=`赋值运算符）、如何连接表（`DT1[DT2]`）以及如何对表进行子集化（`DT1[id1==3]`）。但是，我不确定如何同时完成这三个操作。

**编辑：** 请注意，原始示例仅尝试更新一列，但我的实际数据需要更新许多列。考虑 DT1b 和 DT2b 中的其他场景：

```
set.seed(2)
DT1b<-DT1[,v2:=rnorm(6)] # Copy DT1 and add a new column
setkey(DT1b,id2)
DT1b
##    id1 id2         v1          v2
## 1:   2   e  0.7383247 -0.89691455
## 2:   1   g  1.5952808  0.18484918
## 3:   2   j  0.3295078  1.58784533
## 4:   3   n -0.8204684 -1.13037567
## 5:   3   s  0.5757814 -0.08025176
## 6:   1   u  0.4874291  0.13242028

DT2b<-rbindlist(list(DT2,data.table(id2="e",v1=0))) # Copy DT2 and add a new row
DT2b[,v2:=-1] # Add a new column to DT2b
setkey(DT2b,id2)
DT2b
##    id2 v1 v2
## 1:   e  0 -1
## 2:   n  0 -1
## 3:   u  0 -1 
```

基于来自@nmel 和@BlueMagister 的有用答案，我为更新的场景提出了这个解决方案：

```
DT1b[DT2b[DT1b[id1 %in% c(1,2)],nomatch=0],c("v1","v2"):=list(i.v1,i.v2)]
DT1b
##    id1 id2         v1          v2
## 1:   2   e  0.0000000 -1.00000000
## 2:   1   g  1.5952808  0.18484918
## 3:   2   j  0.3295078  1.58784533
## 4:   3   n -0.8204684 -1.13037567
## 5:   3   s  0.5757814 -0.08025176
## 6:   1   u  0.0000000 -1.00000000 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-06T03:41:16.013

我能想到的最简单的方法也是按键`id1`。例如

```
setkey(DT1, id2,id1)
DT2[, id1 := 3]
setkey(DT2, id2, id1)

# use i.v1 to reference v1 from the i component
DT1[DT2, v1 := i.v1 ]

DT1
   id1 id2        v1
1:   2   e 0.7383247
2:   1   g 1.5952808
3:   2   j 0.3295078
4:   3   n 0.0000000
5:   3   s 0.5757814
6:   1   u 0.4874291 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-06T04:26:32.037

这类似于[mnel](https://stackoverflow.com/users/1385941/mnel)的[解决方案](https://stackoverflow.com/a/14721076/697568)，但使用`ifelse`而不是第二个密钥。

```
DT1[DT2, v1  := ifelse(id1==3, i.v1, v1),nomatch=0] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-16T15:21:56.913

这几天我一直在想这个问题。以下是我的解决方案。

```
DT1[DT2, names(DT2):= DT2, on= 'id'] 
```

或者，如果您不想在 DT2 有私有变量时向 DT1 添加新变量：

```
common.var <- intersect(names(DT1), names(DT2))
DT1[DT2, c(common.var) := DT2[, common.var, with= FALSE] ,on= 'id'] 
```

# c# - 无论如何要在asp图像控件上显示动态生成的位图吗？

> ID：14720929
> 
> 赞同：12
> 
> 时间：2013-02-06T03:20:59.170
> 
> 标签：c#, asp.net, image, bitmap, controls

在我的代码中，我使用 c# 和 ASP.NET 动态创建位图。比我需要在asp图像控件上显示它。无论如何都可以在不使用处理程序的情况下做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-06T04:08:55.037

使用 ashx 处理程序更好，因为它适用于所有浏览器，并且您可以在客户端缓存输出图像。

但是，如果您必须这样做，可以使用`<img>`标签直接内联显示图像，如下所示：

```
<img src="data:image/gif;base64,<YOUR BASE64 DATA>" width="100" height="100"/> 
```

ASPX：

```
<img runat="server" id="imgCtrl" /> 
```

CS：

```
MemoryStream ms = new MemoryStream();
bitmap.Save(ms, ImageFormat.Gif);
var base64Data = Convert.ToBase64String(ms.ToArray());
imgCtrl.Src = "data:image/gif;base64," + base64Data; 
```

是的，您可以直接编写位图，但压缩格式（JPEG、GIF）更适合网络。

**注意：**内嵌图像不适用于旧版浏览器。某些版本的 IE 有最大 32KB 大小的限制。

# lua - 如何将lua函数块转储到字符串？

> ID：14720930
> 
> 赞同：8
> 
> 时间：2013-02-06T03:21:09.493
> 
> 标签：lua, lua-5.2

如何将lua函数块转储到字符串？

```
function test(a, b)
  local c = a + b
  return c
end

print( type(test) )  --> function
print( test )         --> function: 0053B108
print( dumpToString(test) ) 
```

我希望 dumpToString 结果如下：

```
function test(a, b)
  local c = a + b
  return c
end 
```

这个怎么做 ？

=== update1 ===
我想自动记录和注入代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T16:58:58.987

你没有说你*为什么*要这样做，这可能很重要。您可以将函数转储为字符串，但它不会是一个非常易读的字符串；您可以通过这种方式存储和传输您的函数（在兼容的 Lua 引擎之间）：

```
string.dump(function() print "Hello" end) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-05-16T21:46:35.747

没有简单的答案（经过这么多年，仍然如此）。我将详细说明替代方案。

**1 考古学教授的回答（还有一点拆解）：**

这个古老问题的答案在于原始[问题](https://stackoverflow.com/questions/743684/best-tools-for-decompiling-lua-bytecode)。即，luadec。可能是那时它处于停机状态，但是，至少到目前为止，有一个[更新版本](https://github.com/viruscamp/luadec)，它可以处理 lua 5.1-.3。

此外，它`string.dump`提供的不是完整的胡言乱语，它以机器指令的原始字节提供程序代码，您可以看到带有`luac -l -p <filename>`. [vm 代码没有很好地记录，但人们确实在这里](http://files.catwell.info/misc/mirror/lua-5.2-bytecode-vm-dirk-laurie/lua52vm.html)整理了一些东西。Luajit 在自己的指令集上有更好的文档。

从 vm 指令重建代码是 luadec 所做的。理论上，您也可以将自己的指令拼接到转储字符串中。

然而，无论你对字节码做了什么技巧，它都会遇到不同解释器之间的不兼容，包括 lua 本身的不同版本。

**2.实际做[X](http://xyproblem.info/)**

将函数转换为字符串是一种非常特殊的愿望（除非您正在生成代码，在这种情况下，您首先已经有了字符串）。

“记录并注入代码”确实是相当一般的 X，这可能保证 Y 得到解决。但是单一的案例可以由单一的措施覆盖。Lua 是一种非常灵活的语言，例如，您可以`x`通过将其设为对象来跟踪示例中值的流动：

```
local to2number = tonumber
tonumber= function(o)
    local r= to2number(o) 
    if not r then
        local m= getmetatable(o)
        if m and m.__tonumber then
            r=m.__tonumber(o)
        end
    end
    return r
end
local number
number={
    new=function(n)
        return setmetatable({n},number)
    end,
    __add=function(me,other)
        print("I'm "..tostring(me).." and I'm being added to "..tostring(other))
        local o=tonumber(other) 
        return number.new(me[1]+o)
    end,
    __tonumber=function(me) return me[1] end,
    __tostring=function(me) return tostring(me[1]) end,
}
test(number.new(4), number.new(10)) 
```

如上例所示，您可以通过更改函数的环境来注入行为。也就是说，我已经重新定义了 global function `tonumber`。您可能希望在不同的环境中完全打包函数：

```
local test = function() print"hello" end
local newenv={print=function(s) print(s..'world')  end}
setfenv(test,newenv)--this is lua 5.1, luajit, good luck with upvalues
local test = load(string.dump(test),nil,nil,newenv)--this is lua 5.2-5.3, good luck with upvalues
test() 
```

对于旧版本，您必须处理可能引用您尝试重新定义的全局函数的上值。对于较新的版本，您必须处理在转储加载过程中丢失的上值。

**3.读取文件**

最后，正如其他人所说，如果您可以访问源代码，您可以尝试从中找到函数定义。除非它是单个函数定义或单个返回文件，否则该任务最终可能等同于重新实现 lua 解析器。其中不止一个，但他们并没有考虑到这样的功能，因此可能需要一些工作来重新利用他们的代码。

如果所有的函数都是自己定义的，而且你愿意稍微克制一下，你可以再次使用lua metatables，在编码阶段解决问题：

```
local def=function(code,env)
    env=env or _ENV
    local compiled,q=load("return "..code,nil,nil,env)
    if not compiled then error(q) end
    local f=compiled()
    return setmetatable({code=code},{__call=function(me,...) return  f(...)  end})
end

local test=def[[function(a,b)
    return a+b
end]]

print(test(2,3)) 
```

然而，定义上值将是棘手的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-06T03:51:28.457

你没有。Lua 不会将已编译的 Lua 脚本作为原始文本存储在任何地方。而且，由于它旨在成为一种小型脚本语言，因此它也不提供反编译自己的字节码的机制。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T06:32:14.017

好吧，您可以将多行代码全部存储在一个字符串变量中。只需使用双方括号代替引号。

```
chunk = [[
function test(a, b)
  local c = a + b
  return c
end
]] 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-06T07:14:22.357

您可以通过以下方式获取程序的源代码

```
local source_code = io.open(arg[0]):read'*a' 
```

并解析它以找到您的函数定义。
它仅适用于从命令行运行 lua 并将其作为参数传递的源文件，而不是字节码文件。

# excel - 根据上次遇到的实例和列匹配减去 2 行

> ID：14720931
> 
> 赞同：0
> 
> 时间：2013-02-06T03:21:11.013
> 
> 标签：excel, excel-formula, vba

我有一个非常大的数据集（下面的示例），我需要将（B 列主机，D 列游戏）与最后一次遇到相同的列对值（B 列主机，D 列游戏）进行比较并减去日期列.

请注意，这对将有多个实例，但我需要相对于当前行的最后一个匹配实例，因为我已按时间对数据进行排序。

我想我需要一个宏/数组来循环并找到要减去的最后一个匹配项。有任何想法吗？

由于缺少点，我无法上传图像以显示我的列，因此将数据粘贴到此处。

![图片](../Images/bd402a22a195dc77dc961ad5d34529fd.png)

```
Date        Host                            Process        Game                Status   Delay

14:22:23    ns-mtc-gameserver-b-2.lb.df.com 172.29.101.10   game-d042.sim.df    DOWN    
14:22:54    ns-mtc-gameserver-b-2.lb.df.com 172.29.101.10   game-d045.sim.df    UP  
14:22:59    ns-mtc-gameserver-b-2.lb.df.com 172.29.101.10   game-d023.sim.df    DOWN    
14:23:04    ns-mtc-gameserver-b-2.lb.df.com 172.29.101.10   game-d111.sim.df    DOWN    
14:23:08    ns-mtc-gameserver-b-2.lb.df.com 172.29.101.10   game-d024.sim.df    DOWN    
14:23:16    ns-mtc-gameserver-b-2.lb.df.com 172.29.101.10   game-d122.sim.df    DOWN    
14:23:17    ns-mtc-gameserver-b-2.lb.df.com 172.29.101.10   game-d071.sim.df    DOWN    
14:23:17    ns-mtc-gameserver-b-2.lb.df.com 172.29.101.10   game-d118.sim.df    DOWN    
14:23:20    ns-mtc-gameserver-b-2.lb.df.com 172.29.101.10   game-d196.sim.df    DOWN    
14:23:21    ns-mtc-gameserver-b-2.lb.df.com 172.29.101.10   game-d045.sim.df    DOWN    
14:23:23    ns-mtc-gameserver-b-2.lb.df.com 172.29.101.10   game-d042.sim.df    DOWN 
```

做单元格 A12 -A1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T04:26:44.973

您可以将其作为数组公式输入，使用`Ctrl` `Shift` `Enter`，我相信它可以满足您的要求：

```
=$A2-(INDEX($A3:$A$12,MATCH(1,(($B3:$B$12=B2)*($D3:$D$12=D2)),0))) 
```

编辑：

为了使其格式为秒，您需要切换减法的顺序，以便获得积极的结果。Excel 不会格式化负秒数：

```
=(INDEX($A3:$A$12,MATCH(1,(($B3:$B$12=B2)*($D3:$D$12=D2)),0)))-$A2 
```

# css - 即列表中的垂直空间问题

> ID：14720932
> 
> 赞同：0
> 
> 时间：2013-02-06T03:21:28.937
> 
> 标签：css, list

由于所有帖子，我已经修复了垂直间距问题，但我现在的问题是边框，如果我应用边框，列表项的高度为 2 px。

更新：添加溢出：隐藏，现在列表项的高度为 1px 更新：添加了 chrome 的屏幕截图（所需的输出）

```
ul.lines {
margin: 0px;
padding: 0px;
}
.lines li {
border-bottom: solid red 1px;
list-style: none;
background-color:#00F;
}
.lt-ie9 .lines li {
background-color: #CC0;
font-size: 0px;
line-height: 0px;
height: 0px !important;
overflow: hidden
}

<ul class="lines">
  <li></li>
  <li></li>
  <li></li>
  <li></li>
  <li></li>
  <li></li>
  <li></li>
</ul> 
```

编辑：我的列表项是故意为空的，它们只有边框，我使用的上下文是条形图上的垂直线。

![IE](../Images/35434d1568dc23bec0c602d21135abf0.png)

![我想要的输出（来自 Chrome 的屏幕截图）](../Images/01acd37a56bd8c94a980b230e1818fff.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T04:07:02.980

很难说出你在问什么；但似乎您的抱怨是边框增加了列表项的高度。如果是这种情况，`box-sizing: border-box`请在列表项上设置。

小提琴：http: [//jsfiddle.net/jonathansampson/Z6t6A/](http://jsfiddle.net/jonathansampson/Z6t6A/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T03:53:00.397

尝试这个

```
border-bottom-width:1px solid red; 
```

# jquery - Dojo 切换 selectableLegend

> ID：14720933
> 
> 赞同：0
> 
> 时间：2013-02-06T03:21:33.977
> 
> 标签：jquery, charts, dojo

我正在寻找一种更好的方式来切换 Dojo Legends。不幸的是，它们不是直接的复选框，所以我让它工作的唯一方法是触发 dojo 复选框上的点击事件

目前我使用类似以下的东西：

```
$('.dojoxLegendText').each(function(index) {
  var lblText = $.trim($(this).text());
  //if statement here to determine if legend should be toggled
  $(this).trigger('click');
}); 
```

我的问题是在切换图例时滚动页面。这对用户来说不是很讨人喜欢。

任何人都有更好的选择或解决方案来防止滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:53:26.807

它们是 dijit 复选框。尝试让他们使用

> firstcheckbox=dijit.byId("dijit_form_CheckBox_0"); secondcheckbox=dijit.byId("dijit_form_CheckBox_1");

“dijit_form_CheckBox_0”表示小部件的 id。Dojo 会自动将它们显示出来，因此请尝试使用 firebug 将鼠标悬停在复选框上以查看 id。

您可以使用以下方法取消选中它们：

> firstcheckbox.set("选中",false);

获取小部件的更好方法是使用 dojo 来获取图例中的小部件。看看这里：

[Dojo 中有没有办法在 DOM 元素中查找所有小部件后代？](https://stackoverflow.com/questions/7886904/is-there-a-way-in-dojo-to-find-all-widget-descendants-in-a-dom-element)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T00:08:03.130

我制作了一个名为 toggleSeries 的函数，您可以使用它来打开和关闭图例/复选框：

> ```
> function toggleSeries (legend,num) { // legend = SelectableLegend
> 
> dojo.query("*",legend.legends[num])[0].click();
> 
> dijit.findWidgets(legend.legends[num])[0]._onClick(); } 
> ```

这是一个jsfiddle示例：

[http://jsfiddle.net/luciancd/92Dzv/17/](http://jsfiddle.net/luciancd/92Dzv/17/)

有关该功能的更多信息，请查看我的最新帖子：

[默认情况下在蜘蛛图中隐藏一个系列](https://stackoverflow.com/questions/14739176/hiding-a-series-by-default-in-a-spider-plot/14830538#14830538)

卢西安

# ruby-on-rails - 带有下拉框的 Ruby on Rails 查看文件莫名其妙地不起作用

> ID：14720936
> 
> 赞同：0
> 
> 时间：2013-02-06T03:22:06.707
> 
> 标签：ruby-on-rails, drop-down-menu

我创建了两个模型，一个是酒吧，一个是特殊的。我在我想要显示条形的新特殊视图文件中创建了一个下拉框。这是我的代码。

```
<%= form_for(@special) do |f| %>
<% if @special.errors.any? %>
<div id="error_explanation">
  <h2><%= pluralize(@special.errors.count, "error") %> prohibited this special from being saved:</h2>
   <ul>
   <% @special.errors.full_messages.each do |msg| %>
    <li><%= msg %></li>      <% end %>
  </ul>
</div>
<% end %>
<div class="field">
  <%= f.label :special %><br />
  <%= f.text_field :special %> 
 </div>
 <div class="field">
 <%= f.collection_select(:special, :bar_id, Bar.all, :id, :name, :prompt => "Select a bar" %>  
</div>
<div class="actions">
<%= f.submit %>
</div>
<% end %> 
```

对不起，上面的格式不好。当我运行这段代码时，我得到的是：

> 显示 D:/DevProjects/tapadeal/app/views/specials/_form.html.erb 其中第 24 行提出：
> 
> D:/DevProjects/tapadeal/app/views/specials/_form.html.erb:24：语法错误，意外keyword_end，期待')'')；结束^ D:/DevProjects/tapadeal/app/views/specials/_form.html.erb:26：语法错误，意外keyword_ensure，期待')' D:/DevProjects/tapadeal/app/views/specials/_form.html。 erb:28: 语法错误，意外的keyword_end，期待')' 提取的源代码（大约第24行）：
> 
> 提取的源代码（第 24 行附近）：
> 
> 21：div类=“动作”
> 
> 22: <%= f.submit %>
> 
> 23: /div
> 
> 24: <% 结束 %>

任何想法或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T03:35:22.160

尝试关闭括号：

```
 <%= f.collection_select(:special, :bar_id, Bar.all, :id, :name, :prompt => "Select a bar") %> 
```

# java - ORA-12519，TNS：使用 X 线程插入 Oracle 数据库时未找到合适的服务处理程序

> ID：14720938
> 
> 赞同：7
> 
> 时间：2013-02-06T03:22:10.053
> 
> 标签：java, multithreading, oracle, executorservice, ora-12519

我正在尝试插入具有两列的 Oracle 数据库-

```
ID         Primary Key     varchar2 (4000)
ACCOUNT                    varchar2 (4000) 
```

我为此编写了一个多线程程序。并且每个线程每次都使用主键`unique id`插入。`ID column``ID`

我在某些时候面临的唯一问题是 - 下面的代码在运行几秒钟后引发以下异常。

```
 1) Null Pointer Exception
 2) java.sql.SQLException: Listener refused the connection with the following error:ORA-12519, TNS:no appropriate service handler found 
```

我无法在我的代码中找到此问题的任何根本原因，因为一切对我来说都很好。当我正确关闭每个连接时。那么这个 NPE 是如何被抛出的以及其他异常呢？

```
 ExecutorService service = Executors.newFixedThreadPool(10);

    try {
        // queue some tasks
        for (int i = 0; i < 100 * 10; i++) {
            service.submit(new ThreadTask());
        }
        service.shutdown();
        service.awaitTermination(Long.MAX_VALUE, TimeUnit.SECONDS);

        while (!service.isTerminated()) {

        }
    } catch (InterruptedException e) {
        LOG.warn("Threw a Interrupted Exception in" + XMPLoadTest.class.getSimpleName()
                + ".XMPLoadTest: boss told me to stop...Not my fault!!");
    } 
```

下面是 ThreadTask 类-

```
class ThreadTask implements Runnable {

    private static final String DRIVER = "oracle.jdbc.driver.OracleDriver";
    private static final String CONNECTION = "jdbc:oracle:thin:@localhost:1521:ORCL";
    private static final String USER = "scott";
    private static final String PASSWORD = "tiger";
    private static Connection dbConnection = null;
    private static PreparedStatement preparedStatement = null;

    private static final AtomicInteger id = new AtomicInteger(1);

    private final static Logger LOG = Logger.getLogger(ThreadTask.class.getName());

    public ThreadTask() {

    }

    @Override
    public void run() {

        try {

            dbConnection = getDBConnection();
            preparedStatement = dbConnection.prepareStatement(Constants.INSERT_ORACLE_SQL);

            preparedStatement.setString(1, String.valueOf(id.getAndIncrement()));
            preparedStatement.setString(2, Constants.A_ACCOUNT);

            preparedStatement.executeUpdate();

        } catch (Exception e) {
            // NPE getting thrown here/And second exception as well
            LOG.error("Threw a SQLException in " + getClass().getSimpleName(), e);
        } finally {
            if (preparedStatement != null) {
                try {
                    preparedStatement.close();
                    preparedStatement = null;
                } catch (SQLException e) {
                    //Oouch...
                    LOG.error("Threw a SQLException in finally block of prepared statement " + getClass().getSimpleName(), e);
                }
            }
            if (dbConnection != null) {
                try {
                    dbConnection.close();
                    dbConnection = null;
                } catch (SQLException e) {
                    //Better go and look for SQL.
                    LOG.error("Threw a SQLException in finally block of dbConnection " + getClass().getSimpleName(), e);
                }
            }
        }
    }

    /**
     * Attempts to establish a connection to the given database URL
     * 
     * @return the db connection
     */
    private Connection getDBConnection() {

        Connection dbConnection = null;

        try {
            Class.forName(XMP_DRIVER);
            dbConnection = DriverManager.getConnection(CONNECTION, USER, PASSWORD);
        } catch (ClassNotFoundException e) {
            LOG.error("Threw a ClassNotFoundException in " + getClass().getSimpleName(), e);
        } catch (SQLException e) {
            //DAMN! I'm not....
            LOG.error("Threw a SQLException in " + getClass().getSimpleName(), e);
        } catch (Exception e) {
            LOG.error("Threw a Exception in " + getClass().getSimpleName(), e);
        }

        return dbConnection;
    }
} 
```

我的代码有什么潜在的问题吗？我更担心这个NPE。

**堆栈跟踪：**

```
19:14:28,372 ERROR ThreadTask:187 - Threw a SQLException in ThreadTask
java.sql.SQLException: Listener refused the connection with the following error:
ORA-12519, TNS:no appropriate service handler found

    at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:458)
    at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:546)
    at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:236)
    at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
    at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:521)
    at java.sql.DriverManager.getConnection(DriverManager.java:322)
    at java.sql.DriverManager.getConnection(DriverManager.java:358)
    at com.ebay.xmp.lnp.ThreadTask.getDBConnection(XMPLoadTest.java:179)
    at com.ebay.xmp.lnp.ThreadTask.run(XMPLoadTest.java:137)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:452)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:314)
    at java.util.concurrent.FutureTask.run(FutureTask.java:149)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:897)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:919)
    at java.lang.Thread.run(Thread.java:736)
Caused by: oracle.net.ns.NetException: Listener refused the connection with the following error:
ORA-12519, TNS:no appropriate service handler found

    at oracle.net.ns.NSProtocol.connect(NSProtocol.java:395)
    at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1102)
    at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:320)
    ... 14 more
19:14:28,376 ERROR ThreadTask:139 - Threw a SQLException in ThreadTask
java.lang.NullPointerException
    at com.ebay.xmp.lnp.ThreadTask.run(XMPLoadTest.java:137)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:452)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:314)
    at java.util.concurrent.FutureTask.run(FutureTask.java:149)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:897)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:919)
    at java.lang.Thread.run(Thread.java:736) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T12:11:36.553

竞争条件是最简单的解释，因为在当前代码中，`dbConnection`当多个线程正在运行时，可以保证 to 作为非空值存在。

简单地说，每个`ThreadTask`对象都可以访问`static Connection dbConnection`类字段。如果进行评估，我们认为在应用程序启动期间启动了 3 个线程，则会发生以下情况：

```
Main+----------------------------------------------------------------------(T)
    |+Thread1 --dbConnection=getDBConnection()-------------dbConnection=null|
    |                                                                       |
    |----------+Thread2 --dbConnection=getDBConnection()--------------------|dbConnection=null
    |
    |-------------+Thread3--dbConnection=getDBConnection()------------------|preparedStatement.executeUpdate() 
```

在时间 (T)，由于静态变量由 设置为`null`，`Thread1`您`Thread3`将抛出异常。

*** 更新 ***

您需要使用连接池，请查看[c3p0](http://sourceforge.net/projects/c3p0/)

*** 结束更新 ***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-26T05:25:09.897

我刚刚遇到了相同的场景。

我的先决条件场景：我在 Eclipse IDE 中处理一个包含插入操作的简单 Hibernate 程序。

在通过我的 HIBERNATE 程序进行插入时，此异常曾经发生在某些输入上，而在其他一些输入上则没有发生。是的，它听起来既愚蠢又奇怪。

我很困惑，我确实在 google n stack over flow 等上查看了答案。这是一个非常简单的观察结果，拯救了我一整天！

如果您在 Eclipse 中工作并且遇到类似的情况... 解决方案：在 Eclipse 中，我只是关闭了在我多次执行相同程序时构建的“控制台”选项卡中所有打开的控制台。他们被堆叠起来，正如预期的那样，空间不足。关闭所有这些解决了我的问题。这听起来确实是一个非常模糊的解决方案。没关系，它是观察为什么会发生这种情况并且异常没有再次发生。

[Eclipse IDE 映像](https://i.stack.imgur.com/45n73.png)

# javascript - 绝对和相对 URl 的 javascript 正则表达式

> ID：14720940
> 
> 赞同：2
> 
> 时间：2013-02-06T03:22:18.943
> 
> 标签：javascript, regex, validation, url-validation

是否有任何正则表达式可以验证 JavaScript 的绝对 URL 和相关 URl。

我确实有以下正则表达式，它对绝对 URL 非常有效，除了它强制 HTTP 部分的部分。我希望它是可选的。

这是正则表达式：

```
/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/; 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T03:24:00.703

尝试

```
/((http|ftp|https):\/\/)?[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/; 
```

它使`(http|ftp|https):\/\/`(http://) 部分是可选的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-10T17:58:03.797

这个接受以下内容：

```
http://example.com
https://example.com.com
/mypage
/my/page/ 
```

但不是像

```
httpa://example.com
my/page/
www 
```

正则表达式是：

```
/(^(https?:\/\/|\/)(?:www\.|(?!www))?[^\s])/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-12T09:46:42.723

以下应该有效：

```
/^(https?:\/\/|\/)\w+\.[^\s]+$|^\/[^\s]*$/ 
```

[![例子](../Images/a4e2f88de3bcd96fe67244ddcfd4b62e.png)](https://i.stack.imgur.com/xVrXf.png)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-06T06:12:31.327

快速回答，修改了 Arun 的回答以接受 '/page', '/page/subpage', 'page/subpage'

```
/(\/?[\w-]+)(\/[\w-]+)*\/?|(((http|ftp|https):\/\/)?[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?)/gi 
```

但实际上，使用 RegExp 验证 url 从来都不是件容易的事。很多边缘案例，比如'./page'，'../page'等。

仔细分析你的需求，写下主要的测试用例，写一个正则表达式通过它们。并注意性能。

# c# - 适用于 Windows 的轻量级、通用、稳定、独立/嵌入式 SQL 服务器？

> ID：14720941
> 
> 赞同：0
> 
> 时间：2013-02-06T03:22:19.590
> 
> 标签：c#, sql, database, rdbms

我意识到这个问题有点主观，但我认为只有极少数的 DBMS 符合要求。

我正在寻找有关独立 SQL 服务器的一些建议。可以在编译时捆绑的东西，或者已经在 Windows 中内置了驱动程序。

我通常会使用 MySQL 或 MS SQL，具体取决于环境，但我想“毕业”到 SQL，以完成我通常在 Windows 的 XML 文件中做的事情。

数据库应该可以在没有互联网连接的情况下访问，并且最好是稳定和成熟的。我不介意它是什么风味的 SQL。它实际上一次只针对一个并发用户，即存储程序用户数据。

我正在寻找“通用”的东西，我可以快速与我制作的新项目/小工具集成。

根据我的研究，我想出的两个看起来仍在开发中的是：众所周知的[SQLite](http://www.sqlite.org/)和[Firebird](http://www.firebirdsql.org/)。各自的优缺点是什么？

我错过了任何杀手级的独立 SQL 服务器吗？我过去使用过 Sybase SQL Anywhere，但它有一些怪癖。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T03:41:51.730

你看过[SQL Server Compact Edition](http://www.microsoft.com/en-us/sqlserver/editions/2012-editions/compact.aspx)吗？听起来它可能符合您的标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:19:10.197

SQLite 是此类中最具杀伤力的一种。许多独立程序使用它。它在 .NET 上运行良好

# asp.net - 无法使用 vb 在 asp.net 中设置下拉列表的文本

> ID：14720947
> 
> 赞同：1
> 
> 时间：2013-02-06T03:23:36.813
> 
> 标签：asp.net, vb.net, drop-down-menu

这是我填充下拉列表的代码：

```
For i = 1 To Convert.ToInt32(count1)
            etc.CommandText = "select Classification from schemaItemDetails.AssetCategory where ASC_ID = " & i & ""
            Dim dra1 As SqlDataReader = etc.ExecuteReader
            While (dra1.Read())
                ddonecategory.Items.Add(dra1.GetString(0))
            End While
            dra1.Close()
        Next 
```

如何设置下拉列表的文本？因为当我使用此代码设置下拉列表的文本时：

```
ddonecategory.Text = "Toolings".Text 
```

我收到这种错误：

```
'ddonecategory' has a SelectedValue which is invalid because it does not exist in the list of items. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T04:24:25.567

我不知道如何用 vb 编写，但在 C# 中应该是这样的

```
 ddonecategory.SelectedIndex = 
               ddonecategory.Items.IndexOf(ddonecategory.Items.FindByText("Your value")); 
```

关键是`Items.FindByText`方法
这样做的好处是如果找不到该项目，则将其设置为-1。
因此，如果在下拉列表中没有找到匹配项，则不会出现任何错误。

## 编辑-1

这是一个很好的解释
[检查下拉列表是否包含值的最佳方法？](https://stackoverflow.com/questions/2007203/best-way-to-check-if-a-drop-down-list-contains-a-value)

## 编辑 2

这是VB代码

```
 Dim searchString As String = "Toolings".Text
 If ddonecategory.Items.FindByText(searchString) IsNot Nothing Then
     Label1.Text = "Item Found: " & searchString
 Else
     Label1.Text = "Item not Found: " & searchString
 End If 
```

# java - 向右移动文本以在 EditText 中为按钮留出空间。可能的？

> ID：14720952
> 
> 赞同：-1
> 
> 时间：2013-02-06T03:24:06.707
> 
> 标签：java, android, user-interface, textview, android-edittext

这与我想要实现的目标类似（见图）。我有删除按钮（在右侧）工作，所以我知道如何添加按钮。但是我怎样才能改变文本为左边的按钮留出空间呢？

![在此处输入图像描述](../Images/bb6e527ee6eb6ea024f02e29139526b4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T03:42:13.903

你可以做这样的事情

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="10dp"
        android:gravity="center_vertical" >

        <EditText
            android:id="@+id/editText"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="30dp"
            android:paddingRight="30dp" />

        <ImageView
            android:id="@+id/leftImageView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_marginLeft="5dp"
            android:src="@drawable/ic_launcher" />

        <ImageView
            android:id="@+id/rightImageView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_marginRight="5dp"
            android:src="@drawable/ic_launcher" />
    </RelativeLayout>

</RelativeLayout> 
```

您可以使用按钮或任何其他视图来代替 ImageViews。还可以根据需要调整边距和填充。

# php - 如何将不需要的 magento 自定义属性更改为必需的？

> ID：14720955
> 
> 赞同：1
> 
> 时间：2013-02-06T03:24:59.193
> 
> 标签：php, zend-framework, magento

我有一个 magento 客户地址属性，它不是必需的。我想将其更改为所需的。

这是我用来添加属性的 mysql4-install 文件。

```
$this->addAttribute('customer_address', 'govt_id', array(
'type' => 'varchar',
'input' => 'text',
'label' => 'Govt ID NO#',
'global' => 1,
'visible' => 1,
'required' => 0,
'user_defined' => 1,
'visible_on_front' => 1 
```

));

我怎样才能在不删除属性的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T03:41:45.513

```
/* @var $this Mage_Customer_Model_Resource_Setup */
$this->updateAttribute('customer_address','govt_id','is_required','false'); 
```

请注意与`addAttribute()`:`required`与. 的区别`is_required`。见[`Mage_Eav_Model_Entity_Setup::_prepareValues()`（链接）](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Eav/Model/Entity/Setup.php#L592)。

# java - Java SE 1.3，不能使用泛型。我的存储/检索自定义对象的解决方案可以吗？

> ID：14720957
> 
> 赞同：2
> 
> 时间：2013-02-06T03:25:06.323
> 
> 标签：java, casting, arraylist

我有一个名为 Log 的自定义类。我无法创建日志数组列表，因为我无法使用泛型。所以，我创建了一个标准的数组列表（类型对象）并将我所有的“日志”提交给它。然后，稍后在遍历数组列表时，我只需将“输出”对象转换为日志。IE

```
Log log = (Log) it.next(); 
```

我不确定这是否可行……或者即使它是最好的主意。非常感谢任何反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T03:29:52.563

是的，它会起作用。

为了更安全，您可以`Log`使用[instanceof](http://www.java2s.com/Tutorial/Java/0060__Operators/TheinstanceofKeyword.htm)运算符检查对象是否属于类型。

前任

```
Object obj = it.next();
if( obj instanceof Log){
    Log log = (Log) obj;
    // Do something
} else {
    //Log a warning or error message
} 
```

# c# - 以编程方式访问 SSRS 日志

> ID：14720960
> 
> 赞同：1
> 
> 时间：2013-02-06T03:25:32.627
> 
> 标签：c#, ssrs-2008, reporting-services, adomd.net

我们有几个 SSRS 报告。我们调用 SSRS 执行 Web 服务的 Render 方法并传递报告的名称和我们要执行的参数。此方法（报告）在内部执行 MDX 查询，返回我们转换为 JSON 并传递给另一个应用程序的 ByteArray。所有这一切都很好。

**为什么我们采用这种方法**：我们已经有大约 100 个报告，我们只想使用它的输出而不是创建新的应用程序，该应用程序将使用 ADOMD 执行 MDX 查询并返回数据。

**问题：**如果在执行过程中出现任何错误/异常，我想访问堆栈跟踪和日志。在执行报告时或执行结束后，有什么方法可以获取此信息？

# emacs - with-current-buffer 不移动点

> ID：14720962
> 
> 赞同：7
> 
> 时间：2013-02-06T03:26:15.300
> 
> 标签：emacs, elisp

在 Elisp 中，这种看似简单的代码和平实际上并没有改变重点。

```
(with-current-buffer "foo"
  (goto-char (point-max))) 
```

AFAIK`with-current-buffer`不应恢复目标缓冲区中的点。如果没有，那么我如何操作缓冲区中的点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T04:10:23.777

我认为您将缓冲区的点与窗口的点混淆了。如果要在某个显示“foo”的窗口中移动光标，则需要在执行 时选择该窗口`goto-char`，否则需要使用`set-window-point`. 一般来说，一个缓冲区有 N+1 个点（一个是它自己的，N 个用于显示缓冲区的 N 个窗口）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T04:05:26.680

您可能必须使用`switch-to-buffer`然后切换回来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T03:30:33.843

尝试做：

```
(set-buffer "foo")
(goto-char (point-max)) 
```

# youtube-api - YouTube Android Player API 上的视频质量

> ID：14720967
> 
> 赞同：3
> 
> 时间：2013-02-06T03:26:44.480
> 
> 标签：youtube-api, android-youtube-api

我正在尝试使用 Android 的 YouTube API 开发应用程序。我想手动修改视频质量，但找不到任何相关的 API，不胜感激。

[https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/package-summary](https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/package-summary)

谢谢， 安库尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:04:14.630

目前没有修改质量的方法，它使用默认设置。如果将来出现修订历史记录，请随时关注“ [https://developers.google.com/youtube/feeds/android-player-api-revision-history.xml](https://developers.google.com/youtube/feeds/android-player-api-revision-history.xml) ”

# eclipse - 在 Eclipse 中设置常春藤本地存储库

> ID：14720971
> 
> 赞同：0
> 
> 时间：2013-02-06T03:27:41.710
> 
> 标签：eclipse, ivy

我在 Eclipse 工作区中设置常春藤本地存储库时遇到了一些问题。

我在 ivysettings 中创建了本地存储库。

```
<property name="ivy.local.repo.dir" value="${ivy.default.ivy.user.dir}/local" override="false"/>

<resolvers>
... 
<filesystem name="local" changingPattern="${changing.pattern}">
            <ivy pattern="${ivy.local.repo.dir}/${local.ivy.pattern}" />
            <artifact pattern="${ivy.local.repo.dir}/${local.artifact.pattern}" />
        </filesystem>

...

</resolvers> 
```

我在我的 Eclipse 上安装了 IvyDE，它创建了一个“ivy.xml”文件夹（类似于引用的库）。如果我想创建一个本地存储库目录，我是否需要在“ivy.xml”目录中创建“本地”文件夹并将我的 jars 放在那里？

我不太明白我可以将我的私人 jar 放在我的 eclipse 工作区中的哪里，以便常春藤可以解决它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:34:06.617

文件系统解析器非常灵活。

我通常按​​如下方式使用它，“myrepo”目录是相对于 ivysettings 文件的位置找到的：

```
<filesystem name="myrepo1">
    <ivy pattern="${ivy.settings.dir}/myrepo/[organisation]/[module]/ivy-[revision].xml" />
    <artifact pattern="${ivy.settings.dir}/myrepo/[organisation]/[module]/[artifact]-[revision].[ext]" />
</filesystem> 
```

在第二个示例中，“myrepo”目录是相对于 ivy 文件的：

```
<filesystem name="myrepo2">
    <ivy pattern="${ivy.basedir}/myrepo/[organisation]/[module]/ivy-[revision].xml" />
    <artifact pattern="${ivy.basedir}/myrepo/[organisation]/[module]/[artifact]-[revision].[ext]" />
</filesystem> 
```

笔记：

*   我喜欢这种命名用于托管 repo 的目录的相对位置的明确方法。依赖常春藤默认值可能会令人困惑。
*   文件模式的相同点。展示了 ivy 在托管工件方面的灵活性。
*   使用第一种方法更灵活，因为您可以使用构建中的[设置](http://ant.apache.org/ivy/history/latest-milestone/settings/settings.html)任务来指定 ivysettings 文件的替代位置。

# asp.net-mvc - MVC 的 jQuery Mobile 缓存问题

> ID：14720972
> 
> 赞同：0
> 
> 时间：2013-02-06T03:27:48.333
> 
> 标签：asp.net-mvc, jquery-mobile

我有一个 JQM 页面，可以动态插入来自对 MVC 控制器的调用的内容。

我在手机上对此进行了测试，然后对代码进行了一些更改，将其上传到服务器，然后再次从手机上点击该页面，我看到了旧内容。如何清除当前缓存，然后防止将来对 MVC 的调用被缓存。

这就是我加载 div 内容的方式

```
 $.ajax({
        url: "/Controller/Method",
        data: null,
        type: "POST",
        success: function (data) {

            $('#mobile-content').html(data);

            $('#mobile-content').trigger('create');
        },
        cache:false,
        error: function (data) {
            alert("Error in RenderQuestionForm");
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:06:42.623

您可以通过使用注释来防止控制器操作缓存返回的视图，例如：

```
// GET: /Index/
    [OutputCache(NoStore = true, Duration = 0, VaryByParam = "*")]
    public ActionResult Index()
    {
        return View(_repository.ListAll());
    } 
```

返回给控制器操作的数据也有可能被数据提供者缓存。我在使用 LINQ 时遇到过这种情况，默认情况下，我正在访问的服务是缓存 LINQ 查询。在这种情况下，我需要在每次新查询之前清除缓存。

# php - 带有 OR 和 isset 运算符的 if 语句？

> ID：14720977
> 
> 赞同：0
> 
> 时间：2013-02-06T03:28:51.563
> 
> 标签：php

我正在处理两个变量。一个会话变量和一个用户变量。

我希望我的系统像这样工作：

`if ($TicketArray['PostName'] !== $Username) { die("") }`

但我希望在`$_SESSION['Administration']`isset 时将其覆盖。所以我想出了这个：

```
if ($TicketArray['PostName'] !== $Username OR (!isset($_SESSION['Administration'])))
{
 die("");
} 
```

但是，当用户名确实等于邮政名时，这会杀死脚本，并且是否设置了管理会话。我将如何构造一个包含以下内容的 if 语句：

不等于

或者

未设置

或者如果 Postname 不等于 $Username 但 $_SESSION['Administration']; 伊塞特；设置会话的人可以查看票证吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T03:32:12.970

我认为您只想使用`&&`而不是`||`（或`or`）。

```
if ($TicketArray['PostName'] !== $Username && !isset($_SESSION['Administration']))
{
     die("");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T03:32:55.597

```
if(! isset($_SESSION['Administration']))
{
 if($TicketArray['PostName'] !== $Username)
 {
  die();
 }
} 
```

**或者**

```
if(($TicketArray['PostName'] !== $Username) && (! isset($_SESSION['Administration'])))
{
 die();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T03:33:09.857

你可以有一个嵌套的 if 语句。示例如下：

```
if (!isset($_SESSION['Administration']))
{
  if ($TicketArray['PostName'] !== $Username)
  {
   die("");
  }
} 
```

该脚本将检查会话是否未设置，如果会话未设置，则块将检查用户名与 PostName 的比较。

这节省了一个复杂的 if 语句（如果你所问的甚至是可能的）

# c++ - 接收一串“字符”并尝试使用指针计算其中有多少是相同类型的

> ID：14720979
> 
> 赞同：0
> 
> 时间：2013-02-06T03:29:00.277
> 
> 标签：c++, arrays, pointers, constants

我有这个接收一串“字符”的函数。我正在尝试遍历该字符串并使用指针来查看第二个元素是否与第一个元素相同。所以假设我有 aaabbccddd，我想写入一个有 3a、2 bs、2cs 和 3ds 的数组。我真的很难通过使用指针来确定第二个字符串是否与第一个字符串相同。我创建了这个临时指针，然后我做了 temp++。这本质上只是显示了第二个学期之后的所有内容，依此类推……我如何单独查看第二个学期并将其与第一个学期进行比较，只用指针。

```
void RLE<T>::Compress(const T* input, int inSize)
{

   delete m_Data;
    m_Size = 0;

    T * m_Data;
    m_Data = new T[inSize*2];

    int runSize = MaxRunSize();

    const T * temp;
    temp = input;

    temp++; 
```

这部分总是给我错误，它说我有一个错误的指针。我知道这基本上不起作用，因为我的输入指针比我创建的临时指针长。我的数组永远不会被初始化

```
 if  (temp == input)
    {
        std::cout<<"here"<<std::endl;
        int number = 1;
        number++;
        m_Data[0] = number;
        m_Size++;
        std::cout<<temp;
        m_Data[m_Size] = *temp;

    }
} 
```

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T03:32:43.287

你的错误一开始是正确的吗？

```
delete m_Data;
m_Size = 0;

T * m_Data; 
```

这不起作用，因为`m_Data`此时未定义，除非按照命名，它也是一个成员，在这种情况下你不应该重新定义它。

你不应该做

```
if(temp[i] == temp[i+1]) //or something like that 
```

代替

```
if  (temp == input) 
```

# android - Android Jenkins Build - 项目错误中不存在调试“目标”

> ID：14720981
> 
> 赞同：3
> 
> 时间：2013-02-06T03:29:31.163
> 
> 标签：android, ant, jenkins

我在无头 Linux 构建服务器上设置了 Jenkins 服务器和 Android SDK。我通过典型的“android create project ...”命令创建了一个 Android 项目。

在我“cd”进入新项目后，我可以在命令行上以 jenkins 用户的身份成功“ant clean debug”。我从我的 Jenkins 工作区目录 (.jenkins/workspace/<project name>) 运行它：

```
# su jenkins
$ ant clean debug
.... successful .... 
```

但是，当构建 Jenkins 作业时，我得到一个 Target “debug” does not exist in the project “ProjectName” 错误

我将 sdk.dir 变量设置为我的 Android SDK 目录，因此 Jenkins 日志中的命令运行如下：

```
$ ant -Dsdk.dir=/opt/java/android clean debug 
```

我已将整个 android SDK 文件夹的权限设置为 777：

```
# chmod -R 777 /usr/java/android/android-sdk 
```

我对我可能还缺少什么感到茫然？为什么命令会在命令行上运行，但作为 Jenkins 作业却不成功？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T04:43:03.877

您是否从 jenkins 尝试的同一位置运行命令行 ant build？

仔细检查您的

```
.jenkins/workspace/<project-name> 
```

目录以确保它具有与您从命令行手动运行的项目文件相同的项目文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:26:28.287

经过几天的挫折和疑惑，事实证明删除项目并使用完全相同的设置重新创建它可以解决问题。同时，我又创建和删除了几个工作，有时他们有上面提到的错误，有时他们没有。即使 Job 的设置完全相同（一个字母一个字母），它有时也可以工作，而其他一些则不能。抱歉，我不知道如何解决此问题，只能删除作业，重新创建，然后重试！

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-22T08:49:40.820

我也有同样的问题。然而，我打破了一段时间，我能够解决这个问题。所以如果你想在命令行上运行ant target，你必须使用“ant target name”（例如ant debug）。但是要通过 jenkin 运行相同的目标，您应该只使用没有 ant 的目标名称（例如调试）。

不知道为什么会这样。但这为我解决了这个问题。

# pointers - 如何将查询结果传递给函数？

> ID：14720982
> 
> 赞同：0
> 
> 时间：2013-02-06T03:29:35.090
> 
> 标签：pointers, cppcms

我想做这样的事情

```
function A(){
    session database_handler(....);

    result res = database_handler << "SELECT ....";

    functionB(res);
} 
```

functionB的参数应该是什么？

将它作为指针传递是行不通的，在示例中也不行。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:15:10.370

您可以安全地复制`cppdb::result`，但您只能在一个位置对其进行迭代。即`cppdb::result`持有对结果对象的引用（计数），因此如果您遍历行中的行，`functionB`则无法遍历它们`functionA`

所以你可以安全地定义

```
void functionB(cppdb::result res); 
```

然而，它在迭代方面是一样的

```
void functionB(cppdb::result &res); 
```

最后一个更快，因为它不涉及引用计数开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T05:33:40.917

一种简单的方法是创建一个类似于您的结果集的结构。填充该结构并将结构指针传递给函数。

另一种方法是将您的函数声明为 functionB(result res) 即它接受类型为 result 的参数，然后从“res”中提取查询结果

# r - 有效地生成两个日期之间的时间和日期的随机样本

> ID：14720983
> 
> 赞同：39
> 
> 时间：2013-02-06T03:29:51.783
> 
> 标签：r, date, datetime, random

我写了一个（相当天真的）函数来随机选择两个指定日期之间的日期/时间

```
# set start and end dates to sample between
day.start <- "2012/01/01"
day.end <- "2012/12/31"

# define a random date/time selection function
rand.day.time <- function(day.start,day.end,size) {
  dayseq <- seq.Date(as.Date(day.start),as.Date(day.end),by="day")
  dayselect <- sample(dayseq,size,replace=TRUE)
  hourselect <- sample(1:24,size,replace=TRUE)
  minselect <- sample(0:59,size,replace=TRUE)
  as.POSIXlt(paste(dayselect, hourselect,":",minselect,sep="") )
} 
```

结果是：

```
> rand.day.time(day.start,day.end,size=3)
[1] "2012-02-07 21:42:00" "2012-09-02 07:27:00" "2012-06-15 01:13:00" 
```

但随着样本量的增加，这似乎正在显着放缓。

```
# some benchmarking
> system.time(rand.day.time(day.start,day.end,size=100000))
   user  system elapsed 
   4.68    0.03    4.70 
> system.time(rand.day.time(day.start,day.end,size=200000))
   user  system elapsed 
   9.42    0.06    9.49 
```

有没有人能够建议如何以更有效的方式做这样的事情？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-06T03:44:51.450

啊，另一个日期/时间问题，我们可以简化为在浮点数中工作:)

试试这个功能

```
R> latemail <- function(N, st="2012/01/01", et="2012/12/31") {
+     st <- as.POSIXct(as.Date(st))
+     et <- as.POSIXct(as.Date(et))
+     dt <- as.numeric(difftime(et,st,unit="sec"))
+     ev <- sort(runif(N, 0, dt))
+     rt <- st + ev
+ }
R> 
```

我们`difftime`以秒为单位计算，然后“仅仅”在其上绘制制服，对结果进行排序。将其添加到开头，您就完成了：

```
R> set.seed(42); print(latemail(5))     ## round to date, or hour, or ...
[1] "2012-04-14 05:34:56.369022 CDT" "2012-08-22 00:41:26.683809 CDT" 
[3] "2012-10-29 21:43:16.335659 CDT" "2012-11-29 15:42:03.387701 CST"
[5] "2012-12-07 18:46:50.233761 CST"
R> system.time(latemail(100000))
   user  system elapsed 
  0.024   0.000   0.021 
R> system.time(latemail(200000))
   user  system elapsed 
  0.044   0.000   0.045 
R> system.time(latemail(10000000))   ## a few more than in your example :)
   user  system elapsed 
  3.240   0.172   3.428 
R> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-27T17:11:14.237

像这样的东西也会起作用。抱歉随机数据框，我只是把它扔在那里，这样你就可以看到一个情节。

```
data=as.data.frame(list(ID=1:10,
                   variable=rnorm(10,50,10)))

#This function will generate a uniform sample of dates from 
#within a designated start and end date:

rand.date=function(start.day,end.day,data){   
  size=dim(data)[1]    
  days=seq.Date(as.Date(start.day),as.Date(end.day),by="day")  
  pick.day=runif(size,1,length(days))  
  date=days[pick.day]  
}

#This will create a new column within your data frame called date:

data$date=rand.date("2014-01-01","2014-02-28",data)

#and this will order your data frame by date:

data=data[order(data$date),]

#Finally, you can see how the data looks

plot(data$date,data$variable,type="b") 
```

# opos - POS.NET 发现 pos 打印机

> ID：14720986
> 
> 赞同：1
> 
> 时间：2013-02-06T03:29:57.477
> 
> 标签：opos, pos-for-.net

我使用 PosExplorer.GetDevices 方法来查找网络上可用的打印机。但是，GetDevices() 方法返回的 DeviceCollection 中的 DeviceInfo 对象不包含有关 LogicalNames、HardwareId、HardwarePath 的信息。

在我的应用程序中，我需要发现可用的打印机并创建这些打印机的实例。

我正在使用爱普生 t88iv 打印机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:19:52.207

感谢 Sean Liming 的回复 ( [http://www.seanliming.com/](http://www.seanliming.com/) )

POS for .NET 只能用于通过服务对象本地连接到系统的设备。除非您有一个将与网络打印机交互的服务对象，否则它不能用于查找网络上的设备。

# ms-access - 修改 Ms Access 数据库时是否可以指导新字段的放置/顺序？

> ID：14720987
> 
> 赞同：1
> 
> 时间：2013-02-06T03:30:06.383
> 
> 标签：ms-access, ado, dao

我需要通过代码修改 MS Access 数据库的架构——但我希望能够指导表中字段的顺序或放置。

例如 - 如果 TableOne 有 3 个字段 - Field10、Field20 和 Field30。我希望能够在 Field10 和 Field20 之间添加说 Field15 - 而不仅仅是将其附加到现有字段的末尾。

也许我遗漏了一些东西，但似乎 ADO、ADOX ADOD 等都只是将新字段附加到末尾。我知道这应该是可能的，因为您可以在 MS Access 中执行它并且它可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T05:12:59.980

您可以使用 VBA 修改，并在追加之前`DAO.TableDef`指定新字段的属性。`OrdinalPosition`查看您是否可以从“即时”窗口构建此示例会话：

```
set db = currentdb
for each f in db.tabledefs("DiscardMe").fields : _
? f.name, f.ordinalposition : _
next
ID             0 
empid          1 
dtpunched      2 
fake_yesno     3 

set newfield = db.tabledefs("DiscardMe").createfield("fld2", dbtext)
newfield.ordinalposition = 1
db.tabledefs("DiscardMe").fields.append newfield 
```

但请注意，该表现在包含 2 个`OrdinalPosition`= 1 的字段。

```
for each f in db.tabledefs("DiscardMe").fields : _
? f.name, f.ordinalposition : _
next
ID             0 
empid          1 
dtpunched      2 
fake_yesno     3 
fld2           1 
```

Access 帮助主题解释了*“同一集合中的两个或多个 Field 对象可以具有相同的 OrdinalPosition 属性值，在这种情况下，它们将按字母顺序排列。”* 所以查询 ,`SELECT TOP 1 DiscardMe.* FROM DiscardMe;`给了我这个：

```
ID empid fld2 dtpunched fake_yesno
 1   100       4/3/2012          0 
```

通过一些改进，这种方法可能会得到你想要的。但是，我避免依赖列的序数位置。如果他们应该改变，我不希望我的代码破坏。

# jquery - jQuery AJAX POST 请求在 Chrome 中正常，在 Firefox 中失败并显示 415

> ID：14720992
> 
> 赞同：1
> 
> 时间：2013-02-06T03:30:31.663
> 
> 标签：jquery, html, xml, rest, http-headers

我正在为远程 XML 服务构建一个接口。这是我的 $.ajax 函数：

```
this.sendInput = function () {
    jQ.ajax({'url': URL, 
             'type': 'POST', 
             'data': app._CONTENT, 
             'contentType': 'text/xml', 
             'dataType': 'XML', 
             'error': function (data) { app.processError(data); }, 
             'success': function(data){ app._OUTPUT = data; app.processOutput(); }});
}; 
```

当我使用 Chrome 将此请求发送到服务器时，我会收到带有以下标头的 200 响应：

```
Accept:application/xml, text/xml, \*/\*; q=0.01
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:no-cache
Connection:keep-alive
Content-Length:930
Content-Type:text/xml
Host:host.com
Origin:http://elsewares.org
Pragma:no-cache
Referer:http://blah.org
User-Agent:Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17 
```

当我在 Firefox 12 中发送相同的请求时，我收到带有以下请求标头的 415 错误：

```
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language en-US,en;q=0.5
Access-Control-Request-He...    content-type
Access-Control-Request-Me...    POST
Cache-Control   no-cache
Connection  keep-alive
Host    host.com
Origin  http://host.org
Pragma  no-cache
User-Agent  Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:18.0) Gecko/20100101 Firefox/18.0 FirePHP/0.7.1
x-insight   activate 
```

我应该注意服务器设置为允许 Access-Control-Request-Headers: Content-Type，因此我们可以将 POST 请求的正文设置为 XML。

任何想法这里的不匹配是什么？Firefox 是必须的，它才能在将要使用的环境中工作。

这是请求的正文：

```
<?xml version="1.0" encoding="UTF-8" ?>
    <MELTSinput>
        <initialize>
            <SiO2>48.68</SiO2>
            <TiO2>1.01</TiO2>
            <Al2O3>17.64</Al2O3>
            <Fe2O3>0.89</Fe2O3>
            <Cr2O3>0.0425</Cr2O3>
            <FeO>7.59</FeO>
            <MnO>0.00</MnO>
            <MgO>9.10</MgO>
            <NiO>0.0</NiO>
            <CoO>0.0</CoO>
            <CaO>12.45</CaO>
            <Na2O>2.65</Na2O>
            <K2O>0.03</K2O>
            <P2O5>0.08</P2O5>
            <H2O>0.20</H2O>
        </initialize>
        <calculationMode>equilibrate</calculationMode>
        <title>alpha testing</title>
        <constraints>
            <setTP>
                <initialT>1200</initialT>
                <initialP>1000</initialP>
            </setTP>
        </constraints>
    </MELTSinput> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:42:57.540

正如 Miroshko 建议的那样，它可能与字符集相关，但最有可能找到问题的方法是查看服务器：查看那里的错误日志；应该对问题的原因进行一些解释。也许由于某种原因无法解析 XML，所以服务器不相信它*是*XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:47:19.230

Firefox 自动将 charset 添加到 Content-Type，因此它变为“text/xml; charset=utf-8”。我猜，服务器只是进行直接比较，因此给出 415

# scala - Scala - 从 ISO-8859-1 转换为 UTF-8 会给外来字符带来陌生感

> ID：14720995
> 
> 赞同：3
> 
> 时间：2013-02-06T03:30:36.017
> 
> 标签：scala, utf-8, character-encoding, iso-8859-1

这是我的问题；我有一个已转换为字节数组的 InputStream，但在运行时我不知道 InputStream 的字符集。我最初的想法是在 UTF-8 中做所有事情，但我发现编码为 ISO-8859-1 并具有外来字符的流存在奇怪的问题。（那些疯狂的瑞典人）

这是有问题的代码：

```
IOUtils.toString(inputstream, "utf-8")
// Fails on iso8859-1 foreign characters 
```

为了模拟这一点，我有：

```
new String("\u00F6")
// Returns ö as expected, since the default encoding is UTF-8

new String("\u00F6".getBytes("utf-8"), "utf-8")
// Also returns ö as expected.

new String("\u00F6".getBytes("iso-8859-1"), "utf-8")
// Returns \uffff, the unknown character 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T03:49:12.843

并非所有字节序列都是有效的 UTF-8 字符。某些字节序列无效，并且通过将其转换`\u00F6`为等效的 latin-1 字符，您生成了无效的 UTF-8 内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:35:33.767

您应该让数据源告诉您编码，但如果这不能发生，您需要拒绝它或猜测编码（如果它不是 UTF-8）。

对于西方语言，猜测 ISO-8859-1 如果不是 UTF-8 可能大部分时间都可以工作：

```
ByteBuffer bytes = ByteBuffer.wrap(IOUtils.toByteArray(inputstream));
CharBuffer chars; 

try {
    try {
        chars = Charset.forName("UTF-8").newDecoder().decode(bytes);
    } catch (MalformedInputException e) {
        throw new RuntimeException(e);
    } catch (UnmappableCharacterException e) {
        throw new RuntimeException(e);
    } catch (CharacterCodingException e) {
        throw new RuntimeException(e);
    }
} catch (RuntimeException e) {
    chars = Charset.forName("ISO-8859-1").newDecoder().decode(bytes);
} 
System.out.println(chars.toString()); 
```

所有这些样板都是为了获取编码异常并能够多次读取相同的数据。

如果不是 UTF-8，您还可以使用[Mozilla Chardet ，它使用更复杂的启发式方法来确定编码。](http://jchardet.sourceforge.net/)但它并不完美，例如我记得它在 Windows-1252 中将芬兰语文本检测为希伯来语 Windows-1255。

另请注意，任意二进制数据在 ISO-8859-1 中是有效的，因此这就是您首先检测 UTF-8 的原因（如果它毫无例外地通过 UTF-8，它就是 UTF-8），这就是为什么您在 ISO-8859-1 之后无法尝试检测任何其他内容。

# r - 条件满足时休息cumsum？

> ID：14720996
> 
> 赞同：1
> 
> 时间：2013-02-06T03:30:54.433
> 
> 标签：r, cumsum

我想在数据框中的两列上运行累积摘要，如下所示：

```
 A   B
    1   1
    1   2
    1   3
    1   4
    1   5
    2   6
    2   7
    2   8
    3   9
    3   10 
```

并让最终的数据框看起来像这样：

```
 A   B
    1   1
    1   2
    1   3
    1   4
    1   5
    2   1
    2   2
    2   3
    3   1
    3   2 
```

本质上，我要问的是如何在每次 col A 更改时，重置为 1 并再次开始运行 cumsum 的条件下运行 cumsum？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T03:37:10.950

R 有一个非常有用但名称非常糟糕的函数`rle`，它代表“运行长度编码”，它恰好可以满足您的需求。

```
x <- read.table(text=" A   B
    1   1
    1   2
    1   3
    1   4
    1   5
    2   6
    2   7
    2   8
    3   9
    3   10", header=TRUE)

x_rle <- rle(x$A)
x$new_col <- unlist(sapply(x_rle$lengths, function(x) {return(1:x)})) 
```

结果：

```
> x
   A  B new_col
1  1  1       1
2  1  2       2
3  1  3       3
4  1  4       4
5  1  5       5
6  2  6       1
7  2  7       2
8  2  8       3
9  3  9       1
10 3 10       2 
```

# php - sqlsrv_connect：用户登录失败

> ID：14720998
> 
> 赞同：0
> 
> 时间：2013-02-06T03:31:06.097
> 
> 标签：php, sql-server, iis, sql-server-2012

我正在测试我新安装的 5.3：

```
<?php

$serverName = "ks252";
$connectionInfo = array( "Database"=>"ocustom");

/* Connect using Windows Authentication. */
$conn = sqlsrv_connect( $serverName, $connectionInfo);
if( $conn === false )
{
     echo "Unable to connect.</br>";
     die( print_r( sqlsrv_errors(), true));
}

?> 
```

我收到了这个错误：

```
Unable to connect.
Array ( [0] => Array ( [0] => 28000 [SQLSTATE] => 28000 [1] => 18456 [code] => 18456 [2] => [Microsoft][SQL Server Native Client 11.0][SQL Server]Login failed for user 'NT AUTHORITY\ANONYMOUS LOGON'. [message] => [Microsoft][SQL Server Native Client 11.0][SQL Server]Login failed for user 'NT AUTHORITY\ANONYMOUS LOGON'. ) [1] => Array ( [0] => 28000 [SQLSTATE] => 28000 [1] => 18456 [code] => 18456 [2] => [Microsoft][SQL Server Native Client 11.0][SQL Server]Login failed for user 'NT AUTHORITY\ANONYMOUS LOGON'. [message] => [Microsoft][SQL Server Native Client 11.0][SQL Server]Login failed for user 'NT AUTHORITY\ANONYMOUS LOGON'. ) ) 
```

这是什么意思>？我究竟做错了什么？

# c++ - 使用 .substr() 和获取 int 值的问题

> ID：14720999
> 
> 赞同：0
> 
> 时间：2013-02-06T03:31:19.027
> 
> 标签：c++, string, char

是的，这是一个学校项目，是的，我又无可救药地陷入了困境。教授要求在这个项目中使用 .substr() ，我不确定如何处理这个问题。我尝试了多种将单个字符串转换为 char 的方法，但 C++ 一直在与我作斗争。我的代码：

```
 int shift;
 std::string tChar;
 std::cout << "Enter text to be encrypted.\n";

 getline(std::cin, plainText);

 char myChar;

 for (int x = 0; x < plainText.length(); x++)
 {
     tChar = plainText.substr(x,1);

 } 
```

我到底如何将单个字符 tChar 字符串变成一个字符，我可以从中得到一个整数值，或者更好的是，只需添加另一个整数。应该构建一个简单的凯撒密码，但我完全不知道如何将字符串转换为单个字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T04:20:15.267

嗯，也许您的教授希望您使用 substr 来获取文本中需要加密的单词。

所以一个示例伪代码将是：

```
for( int i = 0;  i < plaintext.length(); i++ )
{
    int aStart = i;
    // iterate till you reach a space
    while( i < plainText.length() && plainText[ i ] != ' ' ) i++;
    // get the word using substr
    std::string aTempString = plainText.substr( aStart, (i - aStart) - 1 );  // (i - aStart) - 1 will give you the length of the word
    // perform ciphering
    encryptMe( aTempString );
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T03:54:03.887

尝试

```
int shift;
char tChar;
std::cout << "Enter text to be encrypted.\n";
getline(std::cin, plainText);
char myChar;
for (int x = 0; x < plainText.length(); x++)
{
   tChar = plainText[x];
} 
```