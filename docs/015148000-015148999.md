# StackOverflow 问答 15148000-15148999

# objective-c - 使用阴影和光栅化优化 QuartzCore 动画

> ID：15148005
> 
> 赞同：1
> 
> 时间：2013-02-28T23:57:29.223
> 
> 标签：uiview, 石英核, objective-c, cocoa-touch, animation, uiview, quartz-core

在我的 iOS 应用程序中，我有一个[uiview](/questions/tagged/uiview "显示标记为“uiview”的问题")需要进行动画处理、用手势转换、着色（使用[石英核](/questions/tagged/quartzcore "显示标记为“quartzcore”的问题")阴影）和编辑。当我对此执行动画和手势时，`UIView`它非常“滞后”。iPhone 上的动画不是很“滞后”，但是当使用 iPad 时，动画几乎没有响应（到了我的应用程序崩溃的地步）。我已经使用 Instruments 测试了我的应用程序，并且在动画开始之前，该应用程序不会占用太多内存/CPU/电源。我已经在设备和 Intel i7 8GB iMac 上进行了测试，两者的动画都“滞后”。

我正在执行的动画并不复杂，它只是跨 X 轴的平移。在查看了与动画相关的每一行代码后，我发现这些行是问题所在：

```
viewer.layer.masksToBounds = NO;
viewer.layer.shadowOffset = CGSizeMake(-1, 1);
viewer.layer.shadowRadius = 3;
viewer.layer.shadowOpacity = 0.3; 
```

上面的代码为视图添加了一个阴影，每当我对其进行动画处理时就会滞后（`viewer`）。如果我使用上面的代码，但我添加以下线条动画效果很好：

```
viewer.layer.shouldRasterize = YES; 
```

这段代码的问题在于它严重降低了 UIView ( `viewer`) 内显示的内容的质量。这是`shouldRasterize`设置为 YES 的图像：

![带有光栅化的 UIView](../Images/b145ed6677d951fe56413ac517b714b0.png)

然后 UIView 没有`shouldRasterize`：

![没有光栅化的 UIView](../Images/ee314cddd64bcc914d905e6de7a45bfa.png)

这些屏幕截图都来自同一个 Retina iPad。

**终极问题**：我怎样才能在`UIView`有阴影的情况下流畅地执行动画（最好使用`QuartzCore`）？有没有办法在不降低质量的情况下对内容进行光栅化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T00:05:50.067

在制作动画时，阴影属性`CALayer`可能非常低效，因为它需要根据图层的内容重新计算每一帧的阴影。幸运的是，代价高昂的部分是阴影路径计算，因此如果您只是创建一个`CGPath`表示内容的形状并将其分配给它，`layer.shadowPath`那么性能将会飙升。

由于您的图层似乎完全充满了不透明的数据，因此`shadowPath`非常简单：

```
layer.shadowPath = [UIBezierPath bezierPathWithRect:(CGRect){CGPointZero, layer.bounds.size}].CGPath; 
```

唯一的缺点是，每当图层大小发生变化时，您都需要对其进行编辑。

# jquery - Kendo UI Mobile - iOS 设备上的“添加到主屏幕”问题

> ID：15148007
> 
> 赞同：0
> 
> 时间：2013-02-28T23:57:32.930
> 
> 标签：jquery, html, listview, kendo-ui

我在使用 Kendo 的移动框架的移动 Web 应用程序中遇到 iOS 设备问题。这是问题：

目前，从 Safari 浏览器加载 Web 应用程序完全没问题。一切都按预期运行。

当我将 Web 应用程序的主页作为图标添加到主屏幕并从中加载 Web 应用程序时，初始页面按预期运行。这是一个登录页面。用户登录并在验证凭据后被带到仪表板页面。

在仪表板页面中，有许多本地剑道列表视图。当我单击链接以加载这些本地列表视图之一时，iOS 设备将我带出“应用程序”并加载浏览器应用程序并将我带到我的初始登录页面。

有人可以解释发生了什么以及我可以为用户提供的解决方案吗？我必须从独立模式检测应用模式吗？我读过其他帖子，但没有任何内容包含剑道移动。

我目前正在使用 JQuery v1.8.3 和 Kendo v2012.3.1413。我强迫 Kendo 在我的网络应用程序中呈现 ios 平台。

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:39:10.317

对于 iOS 设备，如果用户将网站快捷方式添加到主屏幕并从该图标启动网站，则网站会进入“应用程序模式”状态。然而，当 URL 发生变化时，网站将退出应用程序模式并进入 safari 浏览器，在其“应用程序模式”状态下放弃网站内的任何先前会话。这是有道理的，我现在更清楚地理解了为什么 Kendo 使用井号标签来导航视图（因为服务器不会将井号标签之后的任何内容视为 URL 的一部分），因此您可以保持这种“应用程序模式”同时拥有能力加载外部视图。

我遇到的问题实际上与“VB.Net”有关。成功登录后，我使用“Response.Redirect(...)”将用户带到仪表板页面。这改变了 URL，所以当我单击仪表板页面上的任意位置时，我被带出“应用程序模式”并进入 safari 浏览器。

为了解决我的问题，我不得不使用 jquery ajax 来调用一个 web 方法，该方法基本上可以检测在回发时登录凭据是否成功登录了用户。如果是，我将继续导航到我的远程视图 - 仪表板页面。因此，我的“登录”页面现在是用于加载所有远程视图的索引页面。

# php - 在 PHP 中创建日、时、分和秒倒计时

> ID：15148008
> 
> 赞同：0
> 
> 时间：2013-02-28T23:57:32.573
> 
> 标签：php

到目前为止，我有这个脚本可以倒计时天数和小时数，但是我怎样才能让它也计算分钟和秒呢？

```
$remaining = strtotime($ActiveListing['ListingExpires']) - time();
$days_remaining = floor($remaining / 86400);
$hours_remaining = floor(($remaining % 86400) / 3600); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:24:34.633

我想到了一个使用[date()](http://www.php.net/manual/en/function.date.php)的解决方案：

```
$remaining = strtotime($ActiveListing['ListingExpires']) - time();
list($months, $days, $hours, $minutes, $seconds) = explode(" ",date("n j H i s",$remaining));
$months--;$days--;
echo "$months months - $days days - $hours hours - $minutes minutes - $seconds seconds left"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:25:59.847

```
$remaining         = strtotime($ActiveListing['ListingExpires']) - time();
$days_remaining    = floor($remaining/60/60/24);
$hours_remaining   = floor(($remaining-($days_remaining*60*60*24))/60/60);
$minutes_remaining = floor(($remaining-($days_remaining*60*60*24)-($hours_remaining*60*60))/60);
$seconds_remaining = floor(($remaining-($days_remaining*60*60*24)-($hours_remaining*60*60))-($minutes_remaining*60)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-13T06:59:29.043

```
$edate = '2027-07-06 07:01:53';
$datestr = $edate;//Your date
$date=strtotime($datestr);//Converted to a PHP date (a second count)
//Calculate difference
$diff=$date-time();//time returns current time in seconds
$days=floor($diff/(60*60*24));//seconds/minute*minutes/hour*hours/day)
$hours=round(($diff-$days*60*60*24)/(60*60)); 
```

# php - 使用 php array count() 是否比使用 SQL 行数更快？

> ID：15148014
> 
> 赞同：2
> 
> 时间：2013-02-28T23:58:33.667
> 
> 标签：php, sql

简而言之：在多个数组上使用 PHP 数组 count() 是否比多次使用 SQL 行数更快？

我遇到了归因于 COUNT(*) 函数的慢速查询问题。我将解释我在做什么，然后我预期的*可能*会明显更快。

目前我正在循环一个函数，每次迭代计算大约 20,000 行。它返回一年中每个月的行数：

```
// CREATE MONTHLY LINKS
public function monthly_links() {

    $months = array('','January','February','March','April','May','June','July','August', 'September','October','November','December');
    for ($i=1 ; $i <= 12 ; $i++) {
        $array[] = "<a href='monthly.php?month=" . $i . "&status=3'>" . $months[$i] . " " . $this->chosen_year() . " (" . $this->number_positions_month_year($i, $this->chosen_year()) . ")</a>";
    }
    return $array;

}

// SHOW NUMBER OF POSITIONS FOR EACH MONTH/YEAR
public function number_positions_month_year($month, $year) {

    $sql = $this->client_positions_sql() . " AND MONTH(`exp_date`) = " . $month . " AND YEAR(`exp_date`) = " . $year;
    $res = $this->conn->query($sql);
    $count = $res->num_rows;

    return $count;
} 
```

代码在上面的示例中并不那么重要，因为基本上我要问的是：执行以下操作是否更快......？

*   查询表一次，同时将每个月对应的 id 转储到一个数组中（会有 12 个数组）
*   在每个数组上使用 PHP count() 来获取每个月的条目数

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T00:10:36.880

您可以使用 SQL 的 group by 函数按月分组。

```
SELECT COUNT(*), MONTH(exp_date)
FROM theTableYouAreUsing
GROUP BY MONTH(exp_date) 
```

然后在 php 中，在返回的数组中，您将获得所需月份的计数。

速度方面，这比每个月单独查询要快得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T00:07:13.300

简而言之：过早的优化是万恶之源 :) 所以通常最终它并不重要。但是，请记住，根据您何时何地需要行数来获取和处理结果，您没有可用的单个数组中的完整数据，因此您没有可调用的数组`count()`。仅仅使用`count()`似乎不是创建这样一个数组的正当理由，因为它不必要地消耗内存。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T00:14:54.903

我将不得不同意 KingCrunch 的观点。您真正需要查看的是您拥有的那种类型的应用程序，如果这是低容量的用户或类似的东西，那么如果您有大量的流量等等，那么现在在数据库中执行它会更快，并且避免使用数据库被一些 php 可以做的事情超载，那么当你大规模地处理类似的事情时，php 会更快。始终要记住的是，如果您将结果集发送到 php，它将不得不通过网络接收数据，然后对其进行计数，这意味着更多的数据和网络延迟，但再次假设这是使用远程D b。但尽量不要过度优化。

# php - 如何使用 WordPress 批量停用 chrono

> ID：15148015
> 
> 赞同：0
> 
> 时间：2013-02-28T23:58:41.110
> 
> 标签：php, mysql, wordpress

所以我总共激活了 3200 个计时码表，我想停用这些计时码表，因为服务器无法处理它。

我应该去哪里停用数据库上的这些，或者使用可能停用它的功能，或者正确的方向是什么。

这是我批量进行的那种激活：

```
if(!wp_next_scheduled('myfunc_global_update_h1')){
wp_schedule_event(time(),'hourly','myfunc_global_update_h1');
}
add_action('myfunc_global_update_h1','myfunc_global_update1'); 
```

还有那个功能 myfunc_global_update1

现在这些功能将从注册这些事件的文件中删除，无论它是如何工作的。

但这就足够了吗？我不知道这一切如何运作得很好。

我找到的所有信息都与设置计时有关，但不是取消设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:00:23.720

您在谈论的是[`wp_cron`](http://codex.wordpress.org/Function_Reference/wp_cron)相关功能，而不是 C# 库（我认为）的“chrono”。

我相信您需要的是[`wp_clear_scheduled_hook`](http://codex.wordpress.org/Function_Reference/wp_clear_scheduled_hook)“使用特定的钩子名称取消安排所有先前安排的 cron 作业”。

```
wp_clear_scheduled_hook('myfunc_global_update_h1'); 
```

# c++ - 如何跟踪 C++ 对象

> ID：15148016
> 
> 赞同：0
> 
> 时间：2013-02-28T23:58:42.573
> 
> 标签：c++, list, object

我目前有一个班级场地，用于为构成我正在制作的游戏场地的所有块制作对象。跟踪这个有点大的块列表的最佳方法是什么？我知道如何在 python 中跟踪对象，但我最近转向 C++，我不确定如何设置某种易于迭代的列表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T00:13:24.100

在 C++ 中，标准库（也称为标准模板库）提供了几个*容器类*来存储事物的集合。“事物”可以是任何数据类型，包括基本的和用户定义的。

使用哪个容器取决于您的需要。这是来自 Microsoft 的权威[文章](http://msdn.microsoft.com/en-us/library/1fe2x6kt%28v=vs.110%29.aspx)。

`vector`如果您需要能够通过容器中的位置引用特定元素，或者`set`如果元素的顺序无关紧要并且您需要能够快速检查某个元素是否存在，则最好的选择是使用.

一些例子：

```
vector<MyClass> mycontainer; // a vector that holds objects of type MyClass
MyClass myObj;
mycontainer.push_back(myObj);
cout << mycontainer[0] << endl; // equivalent to cout << myObj << endl; 
```

或使用一组：

```
set<MyClass> mycontainer;
MyClass myObj;
mycontainer.insert(myObj);
if (mycontainer.find(myObj))
   cout << "Yep, myObj is in the set." << endl; 
```

没有一个终极容器的原因是存在效率权衡。一个容器在识别其中是否存在元素方面可能非常快，而另一个容器则最适合删除任意元素等。

因此，最好的办法是考虑您希望容器支持哪些行为（以及效率如何！），然后查看我之前链接的权威文章。

# list - 如果项目相同，如何在元组列表中添加项目

> ID：15148022
> 
> 赞同：1
> 
> 时间：2013-02-28T23:59:15.650
> 
> 标签：list, python-3.x, tuples, polynomial-math

我试图在 Python3 中将两个多项式相乘 (2x^3-3x^2+4x * 2x^2-3 = 4x^5-6x^4+2x^3+9x^2-12x) 并表示多项式我正在使用 tuple `(exponent, variable)`，所以我上面描述的操作是：`[(3,2), (2,-3), (1,4)] * [(2,2), (0, -3)]`

我得到了下`list`一个答案：`[(5, 4), (3, -6), (4, -6), (2, 9), (3, 8), (1, -12)]`

这将表示：4x^5-6x^3-6x^4+9x^2+8x^3-12x

但我的问题是我找不到一种方法来“添加”具有与 -6x^3`(3, -6)`和 8x^3相同的第一个元素的元组`(3, 8)`。

有没有一种“Pythonic”的方式来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:10:57.987

我会从列表切换到字典。为了使添加更容易，我会使用`defaultdict`：

```
from collections import defaultdict

poly = defaultdict(int) 
```

然后将这些元组添加到字典中：

```
for exponent, variable in poly_list:
    poly[exponent] += variable 
```

它有点工作：

```
>>> from collections import defaultdict
>>> 
>>> poly = defaultdict(int)
>>> 
>>> for poly_list in [[(1, 1)], [(1, 1)]]:
...     for exponent, variable in poly_list:
...         poly[exponent] += variable
... 
>>> poly
    defaultdict(<type 'int'>, {1: 2})
>>> poly.items()
    [(1, 2)] 
```

虽然就个人而言，我只想`Polynomial`上课：

```
class Polynomial(object):
    def __init__(self, terms=None):
        if isinstance(terms, dict):
            self.terms = terms
        else:
            self.terms = dict(terms) or {}

    def copy(self):
        return Polynomial(self.terms.copy())

    def __add__(self, other):
        result = self.copy()

        for e, c in self.terms.items():
            result[e] = self.get(e, 0) + c

        return result

    def __mul__(self, other):
        result = self.copy()

        for e1, c1 in self.terms.items():
            for e2, c2 in other.terms.items():
                result[e1 + e2] = self.get(e1, 0) * other.get(e2, 0)

        return result 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T00:18:00.610

这可以在一行中使用[**`itertools.groupby()`**](http://docs.python.org/3/library/itertools.html#itertools.groupby)：

```
>>> [(exponent, sum(value for _, value in values)) for exponent, values in groupby(sorted(l, key=itemgetter(0)), key=itemgetter(0))]
[(1, -12), (2, 9), (3, 2), (4, -6), (5, 4)] 
```

把它分解成更易读的东西（[可读性](http://www.python.org/dev/peps/pep-0020/)很重要）......

导入工具：

```
>>> from itertools import groupby
>>> from operator import itemgetter
>>> 
```

声明输入（你已经完成了这一点）：

```
>>> l = [(5, 4), (3, -6), (4, -6), (2, 9), (3, 8), (1, -12)]
>>> 
```

在我们分组之前，我们需要排序（在第一个项目上`tuple`）：

```
>>> l_sorted = sorted(l, key=itemgetter(0))
>>> 
```

然后分组（再次，按第一项）：

```
>>> l_grouped = groupby(l_sorted, key=itemgetter(0))
>>> 
```

然后创建一个[列表理解](http://docs.python.org/3/tutorial/datastructures.html#list-comprehensions)，[**`sum`**](http://docs.python.org/3/library/functions.html#sum)对组中的值进行铭记（忽略键）：

```
>>> [(exponent, sum(v for _,v in values)) for exponent, values in l_grouped]
[(1, -12), (2, 9), (3, 2), (4, -6), (5, 4)] 
```

# java - JPA Java 映射关系

> ID：15148028
> 
> 赞同：0
> 
> 时间：2013-03-01T00:00:16.133
> 
> 标签：java, jpa, mapping

在 Java 中，我有一个超类 Element 和 4 个子类，我们称它们为 ElementA、ElementB、ElementC、ElementD。

我的数据库中的表：

```
Element(ElementID, title, description, targetGroup) : Primary key elementID  
ElementA(ElementID,...) : Foreign key elementID   
ElementB(ElementID,...) : Foreign key elementID   
ElementC(ElementID,...) : Foreign key elementID  
ElemendD(ElementID,...) : Foreign key elementID 
```

我还有： LearningProgram 和 LearningProgramElement：

```
LearningProgram(programcode, ....) : Primary key programcode  
LearningProgramElement(programcode, ElementID, dateFrom, dateUntil, ...) : Foreign key programcode, Foreign key elementID 
```

LearningProgramElement 将一个元素链接到一个 LearningProgram，并且还具有这种关系的一些属性：
一个元素可以在不同的 LearningPrograms 中，但在每个 LearningProgram 中会有不同的 dateForm 和 dateUntil。

现在在我的 Java 中，我在 LearningProgram 对象中有 4 个列表：

```
List<LearningProgramElement> elementA = new ArrayList<>();  
List<LearningProgramElement> elementB = new ArrayList<>();  
List<LearningProgramElement> elementC = new ArrayList<>();  
List<LearningProgramElement> elementD = new ArrayList<>(); 
```

LearningProgram 对象如下所示：

```
private String programcode;
private int elementid;
...
private Element element; 
```

我现在得到了 4 次相同的列表，其中包含所有 LearningProgramElement。
如何使我的 jpa 注释在列表 elementA 中只有 LearningProgramElement 具有子类 ElementA 的元素，等等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:09:21.383

我认为 @MappedSuperClass 是你想要的。查看相关文档，看看这些示例是否符合您的用例。

# security - Google App Engine：公开透露用户的 user_id 是否安全

> ID：15148029
> 
> 赞同：4
> 
> 时间：2013-03-01T00:00:17.990
> 
> 标签：security, google-app-engine

是否有任何与此号码相关的个人身份信息？

user_id 是否特定于我的应用程序，或者用户在所有应用程序引擎应用程序中是否具有相同的 user_id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:21:33.973

`user_id`在所有 GAE 应用程序中基本相同，并且可能使用 获取其他用户信息`user = User(_user_id = 'user_id')`，因此我建议避免在 URL 和其他客户端可见信息中使用用户 ID。

# c++ - ncurses 中的键常量错误

> ID：15148033
> 
> 赞同：2
> 
> 时间：2013-03-01T00:01:00.437
> 
> 标签：c++, ncurses

我正在尝试熟悉 ncurses，但我遇到了一个问题 - KEY_LEFT 等常量似乎是错误的。

例如，我正在尝试捕捉键盘箭头。应该很简单

```
while (ch = getch()){
  if (ch == KEY_LEFT)
    foo();
} 
```

但这不起作用。我`ch`写了出来，上面写着——左箭头是 68，右箭头是 67，上 65，下 66。

这不会是一个问题，但是当试图捕捉鼠标事件时，它会变坏。左键单击终端会给我从 33 到 742 的值，单击左上角时最少，单击右下角时最多。我勒个去？

这是我的全部主要内容，以防万一

```
int main(void){
initscr();

start_color();
init_pair(1, COLOR_YELLOW, COLOR_WHITE);
init_pair(2, COLOR_RED, COLOR_RED);

cbreak();

//printw("Hai!\n");
noecho();
int width;
int height;

getmaxyx(stdscr, height, width);

int posx = 30;
int posy = 30;

const char* str = "   ";
const char* hint = "ch = %d";

curs_set(0);

mousemask(BUTTON1_CLICKED, NULL);

unsigned int ch = 0;
while (ch = getch()) {
    attron(COLOR_PAIR(1));
    mvprintw(0, 0, hint, ch);
    mvdelch(posy,posx);
    mvdelch(posy, posx);
    mvdelch(posy, posx);
    switch (ch) {
        case 68:
            if (posx > 0) posx--;
            //mvprintw(1,0,"LEFT");
            break;

        case 67:
            if (posx < width) posx++;
            break;

        case 65:
            if (posy > 0) posy--;
            break;

        case 66:
            if (posy < height) posy++;
            break;

        case KEY_MOUSE:
            MEVENT event;
            if (getmouse(&event)==OK){
                posx = event.x;
                posy = event.y;
            }
    }

    attron(COLOR_PAIR(2));
    mvprintw(posy, posx, str);

    refresh();
}

endwin();

return 0; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:39:12.603

因为（几乎）总是看一下手册会有帮助。看看`man getch`

> 功能键 如果键盘已启用，则在 curses.h 中定义的以下功能键可能由 getch 返回。请注意，并非所有这些都必须在任何特定终端上得到支持。

看来你错过了

```
keypad (stdscr, TRUE); 
```

在你的程序中。至少它不会出现在您发布的片段中。

# c++ - 如何在 Eigen 的模板函数中同时拥有 MatrixBase 和 DenseBase

> ID：15148036
> 
> 赞同：-3
> 
> 时间：2013-03-01T00:01:39.610
> 
> 标签：c++, eigen

我发现我可以像这样创建一个模板化的特征函数：

```
template <>
CIL_EXPORTS
    void gpa<std::complex<float>>(const Eigen::EigenBase<std::complex<float>>& Data); 
```

在函数中，我还需要来自 DenseBase 的方法。我如何从两个基类中访问方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:36:25.613

表达式“Eigen::EigenBase < std::complex < float >>”没有意义。EigenBase 模板参数是派生类，而不是标量类型。它必须是一个矩阵、数组等。一般来说它应该是一个模板参数。请先阅读此[页](http://eigen.tuxfamily.org/dox-devel/TopicFunctionTakingEigenTypes.html)。

无论如何，一旦获得正确的 EigenBase 或 DenseBase，您就可以使用 arg.derived() 或将其转换为派生类型一次来访问派生类成员（而不是基类！）： const Derived& mat(arg.derived( ));

# php - jquery 在 java select include 检索到的文件中不起作用

> ID：15148037
> 
> 赞同：0
> 
> 时间：2013-03-01T00:01:41.887
> 
> 标签：php, javascript, jquery

我有一个简单的表单，当更改时在 div 中包含一个 php 文件。由于某种原因，当放置在该包含文件中时，jquery 不会加载？有人可以告诉我为什么这不起作用。

```
 <select name='make' onChange='show(this.value)'>
<option value='some-file.php'>the file</option>
</select>

<div id="make">Where the file is loaded and where jquery wont work</div>

<script type="text/javascript">
function show(str)
{
if (str=="")
  {
  document.getElementById("make").innerHTML="";
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("make").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","include/some-file.php?q="+str,true);
xmlhttp.send();
}
</script> 
```

然后 some-file.php

```
 $models = mysql_query("SELECT model, id FROM model where make like '%".$q."%' order by model asc") or die(mysql_error());
    //Puts it into an array
$count = 1;

$max = 3;

while($model = mysql_fetch_array( $models ))
{

if($count%20==1)
    echo '</ul><ul style="float:left; padding:0; margin-right:10px;" class="makesModels">';

echo "<li style='padding-right:5px; display:block;'><font color='#fe9000'>".$count.".</font> ".$model['model']."&nbsp;<a class='delete-model".$model['id']."'>x</a></li>";

<script type='text/javascript' src='http://code.jquery.com/jquery-1.8.1.min.js'></script>
<script type='text/javascript'>
$(docuument).ready(function() {
$(".delete-model<? echo $model['id'];?>").click(function() {                        
alert("delete");
                                                                });
});
</script>

$count++;
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:51:55.750

出于安全原因，使用 ajax 加载的脚本或通常注入 DOM 的脚本字符串将不会执行

你可以使用 eval 让它工作，虽然我必须警告你，你可能会打开一罐蠕虫..

添加后`document.getElementById("make").innerHTML=xmlhttp.responseText;`..

```
var parent = document.getElementById('make');
var myScript = parent.getElementsByTagName('script');
for(var i=0,len=myScript.length; i<len; i++){
   executeScrpt(myScript[i]);
 } 
```

然后执行功能...

```
 function executeScrpt(scrpt){
    if(scrpt.innerHTML != ""){
         eval("("+script.innerHTML+")");
    } else {
        if(scrpt.src != ""){
            var myScrpt = document.createElement("script");
            myScrpt.src = scrpt.src;
            document.head.appendChild(myScrpt);
        }
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:27:41.363

我不确定，因为代码不完整，我的猜测是在您正在导入的某个其他 php 文件上，您使用 document.ready 函数，该函数未调用，因为您使用 ajax 加载文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T00:31:31.877

我有同样的问题......

要解决这个问题，您需要做的就是将 ajax 从使用普通 JavaScript 编辑为`$.ajax`使用 jQuery 来处理它..它会工作..

```
$.ajax({
  url: "include/some-file.php?q="+str,
  type: "GET",
  datatype: 'html',
  success: function(e){
    $('#make').html(e);
  }
}); 
```

# sql - 需要在 ODBC DSN 连接的应用程序中识别数据库名称

> ID：15148038
> 
> 赞同：5
> 
> 时间：2013-03-01T00:01:44.997
> 
> 标签：sql, delphi, odbc, dsn, delphi-6

我有一个使用 ODBC DSN 连接到目标数据库的 Delphi 6 应用程序。我想包含列出 DSN 连接到的数据库名称的文本。我尝试使用 SQL 命令 db_name() 但只收到 nil 响应，尽管当我登录 SQL 服务器时它工作正常。

Delphi 中有没有办法识别我连接到哪个数据库？我可以拉出 sys.databases 表，但不确定如何识别我连接到的数据库

举个例子：

如果我连接到 dsn *LocalDSN*我希望能够向用户显示他们连接到*Database*，其中 database 是他们正在与之通信的 sql 数据库的名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T01:46:10.027

ODBC DSN 存储在 Windows 注册表中。请记住，Windows 注册表以及 ODBC DSN 设置在 32 位和 64 位版本之间是分开的。您可以通过访问这些信息`HKEY_LOCAL_MACHINE\Software\ODBC\ODBC.INI\[YOUR_DSN_NAME]`然后读取值`Database`或`Server`了解数据库或服务器名称。

您可以使用以下函数读取服务器和数据库名称：

```
uses
  Registry;

function ServerOfDSN(const Name: String): String;
var
  R: TRegistry;
  K: String;
begin
  K:= 'Software\ODBC\ODBC.INI\'+Name;
  R:= TRegistry.Create(KEY_READ);
  try
    R.RootKey:= HKEY_LOCAL_MACHINE;
    if R.KeyExists(K) then begin
      if R.OpenKey(K, False) then begin
        if R.ValueExists('Server') then
          Result:= R.ReadString('Server');
        R.CloseKey;
      end;
    end;
  finally
    R.Free;
  end;
end;

function DatabaseOfDSN(const Name: String): String;
var
  R: TRegistry;
  K: String;
begin
  K:= 'Software\ODBC\ODBC.INI\'+Name;
  R:= TRegistry.Create(KEY_READ);
  try
    R.RootKey:= HKEY_LOCAL_MACHINE;
    if R.KeyExists(K) then begin
      if R.OpenKey(K, False) then begin
        if R.ValueExists('Database') then
          Result:= R.ReadString('Database');
        R.CloseKey;
      end;
    end;
  finally
    R.Free;
  end;
end; 
```

根据您使用的数据库引擎和驱动程序，此注册表项的内容可能会有所不同，因此可能是`Server`或`Database`可能不是您需要的注册表值，但请自行检查并在注册表中找到您的值名称知道如何阅读它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-14T09:31:34.300

您可以使用`SQLGetPrivateProfileString`ODBC API 来获取创建的 DSN 的内容。

```
int SQLGetPrivateProfileString(  
 LPCSTR   lpszSection,  
 LPCSTR   lpszEntry,  
 LPCSTR   lpszDefault,  
 LPCSTR   RetBuffer,  
 INT      cbRetBuffer,  
 LPCSTR   lpszFilename); 
```

这里，

**lpszSection** = 您想要详细信息的注册表部分。在您的情况下，它将是 DSN 名称。

**lpszEntry** = 要从中提取值的键。您想获取数据库名称信息，因此您需要检查注册表项 HKEY_LOCAL_MACHINE\Software\ODBC\ODBC.INI[YOUR_DSN_NAME] 以了解存储数据库名称信息的键名是什么。这是因为不同的驱动程序可以有不同的键名来存储数据库名称。

**lpszDefault** = 如果未找到密钥，则在最后一个参数 (lpszEntry) 中指定的密钥的默认值。

**RetBuffer** = 指向接收指定键值的输出缓冲区的指针。

**cbRetBuffer** = RetBuffer 指向的缓冲区大小（以字符为单位）。

**lpszFilename** = 您在其中搜索这些条目的文件名。在您的情况下，它将是 odbc.ini。

示例示例

```
CHAR *dsn_name = "Your DSN name";
CHAR db_name[20];
char *odbcini = NULL;
odbcini = "odbc.ini";

SQLGetPrivateProfileString(dsn_name, (CHAR*)"DATABASE", (CHAR*)"", db_name, 
sizeof(db_name), odbcini); 
```

它将根据配置模式集搜索注册表项 HKEY_CURRENT_USER 或 HKEY_LOCAL_MACHINE 或两者（可以使用 SQLSetConfigMode ODBC API 进行设置）。如果未明确设置模式，它将同时搜索 HKEY_CURRENT_USER 和 HKEY_LOCAL_MACHINE。请参阅[https://docs.microsoft.com/en-us/sql/odbc/reference/syntax/sqlgetprivateprofilestring-function](https://docs.microsoft.com/en-us/sql/odbc/reference/syntax/sqlgetprivateprofilestring-function)了解更多信息。

# c# - 线程化类实例化，使用时为空指针，C#

> ID：15148039
> 
> 赞同：0
> 
> 时间：2013-03-01T00:01:52.447
> 
> 标签：c#, .net, multithreading, c#-4.0

我还在学习一些关于线程的知识。我有一个经理类，它有一些基本的业务代码，可以调用某些类方法并为视图做准备。这些方法转到我在创建新线程时实例化的管理器类。当我尝试调用类方法时，它会抛出一个空指针，即使我知道它正在自己的线程中工作。

我假设正在发生的是试图调用该方法的当前线程无法访问新线程化的类方法。这里有一些代码来解释：

```
public class MyClass
{
    public void Test()
    {
        Console.WriteLine("Yay It is working");
    }
}

public class Manager
{
    public MyClass MyClass;
    private Thread myClassThread;

    public Manager()
    {
        myClassThread = new Thread(() => MyClass = new MyClass());
        myClassThread.Start();
    }

    public static void Main(string[] Args)
    {
        var manager = new Manager().MyClass;
        manager.Test();
    }

} 
```

我还没有测试过这段代码是否可以编译，所以它背后的基本思想就是我想要表达的。我的假设是否正确，即我当前的线程无法访问新的 MyClass 测试方法，即使我可以访问在新线程中实例化的变量？我该如何解决这个问题？我应该在 Test 方法中而不是在管理器中放置一个新线程吗？多线程有标准吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T00:06:29.353

您收到空指针异常的原因是，当调用 Manger.Test() 时，构建 MyClass 实例的工作线程尚未执行。无法保证此行为，它仅取决于您的线程的调度方式，这不受您的控制。

我认为继续学习线程是一个好主意，并包括一些关于如何同步不同线程上发生的操作的研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:11:32.030

如果你的线程只创建了一个 MyClass 的实例然后离开了，你可以在创建管理器后简单地加入线程：

```
public static void Main(string[] Args)
{
    Manager manager = new Manager();
    manager.myClassThread.Join();
    manager.MyClass.Test();
} 
```

如果在您的现实生活代码中，您的线程创建了 MyClass 的实例，然后执行其他操作，那么您可以使用 AutoResetEvent 等到 MyClass 被实例化：

```
public class Manager
{
    public MyClass MyClass;
    public AutoResetEvent MyEvent;
    private Thread myClassThread;

    public Manager()
    {
        MyEvent = new AutoResetEvent(false);
        myClassThread = new Thread(() => {
            MyClass = new MyClass();
            MyEvent.Set();
            Thread.Sleep(2000); // long running task
        });
        myClassThread.Start();
    }

    public static void Main(string[] Args)
    {
        Manager manager = new Manager();
        manager.MyEvent.WaitOne();
        manager.MyClass.Test();
    }
} 
```

# java - 有没有使用 maven 运行可执行 jar 的好方法？

> ID：15148044
> 
> 赞同：17
> 
> 时间：2013-03-01T00:02:26.157
> 
> 标签：java, maven, build, jar, embedded-jetty

我有一个多模块 Maven 项目，其中一个模块用于分发。

```
Project \
| moduleA \
| moduleB \
| ...
| dist-module \ 
```

该发行版包含一个我想轻松执行的可执行 jar。但是，要执行它，我必须输入如下内容：

```
java -jar dist-module/target/dist-module-1.0-SNAPSHOT-full-dist/myJar.jar 
```

最好简单地键入：

```
mvn exec:java \ OR
mvn exec:exec 
```

不幸的是，我找不到让 java 目标执行 .jar 的方法。exec 目标实际上会这样做，但有一个问题：jar 包含一个嵌入式码头服务器，并且由于 exec 的工作方式（不使用与 maven 相同的 JVM），除非我终止该进程，否则服务器不会终止手动，同样麻烦。

关于如何使用 maven 执行此操作的任何建议？

**编辑：**
为澄清起见，此命令将主要用于简单的手动烟雾测试；读取日志输出并确保程序在其分发环境中正确启动。因此，它可能应该是一个阻塞调用，使用 ctrl-c 终止服务器和 maven。

嵌入式服务器专门用于运行一些特定的应用程序，并且不会自动重新加载它们。因此，没有必要让服务器长时间独立于 maven 运行。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-07T22:03:53.447

mvn exec:java 直接从 target/ 下面的编译器输出运行应用程序 - 无需从 jar 运行：

```
 <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>exec-maven-plugin</artifactId>
        <version>1.2.1</version>
        <executions>
            <execution>
                <id>default-cli</id>
                <goals>
                    <goal>java</goal>
                </goals>
                <configuration>
                    <mainClass>uk.co.pookey.hibernate.App</mainClass>
                    <systemProperties>
                        <systemProperty>
                            <key>derby.stream.error.file</key>
                            <value>${basedir}/target/derby.log</value>
                        </systemProperty>
                    </systemProperties>
                </configuration>
            </execution>
        </executions>
    </plugin> 
```

如果你想用 mvn exec:exec 运行 jar：

```
 <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>exec-maven-plugin</artifactId>
        <version>1.2.1</version>
        <executions>
            <execution>
                <id>default-cli</id>
                <goals>
                    <goal>exec</goal>
                </goals>
                <configuration>
                    <executable>java</executable>
                    <!-- optional -->
                    <workingDirectory>/tmp</workingDirectory>
                    <arguments>
                        <argument>-jar</argument>
                        <argument>${basedir}/target/hibernate-derby-memory-${project.version}.jar</argument>
                    </arguments>
                </configuration>                        
            </execution>
        </executions>
    </plugin> 
```

如果您在终止码头时遇到问题，我建议您运行集成测试（或者在没有先终止码头的情况下不要退出码头主线程，或者只使用码头的停止端口）！可以在后台运行一个JVM，让maven在测试后再次停止它。为此分为三个阶段：集成前测试、集成测试或集成后测试。[您可以在http://docs.codehaus.org/display/MAVENUSER/Maven+and+Integration+Testing](http://docs.codehaus.org/display/MAVENUSER/Maven+and+Integration+Testing)阅读更多相关信息。使用 jetty maven 插件时， pom.xml 配置可能像：

```
 <plugin>
        <groupId>org.mortbay.jetty</groupId>
        <artifactId>jetty-maven-plugin</artifactId>
        <!-- test start/stop: -->
        <executions>                
            <execution>
                <id>start-jetty</id>
                <phase>pre-integration-test</phase>
                <goals>
                    <goal>deploy-war</goal>
                </goals>
                <configuration>
                    <daemon>true</daemon>
                    <systemProperties>
                        <systemProperty>
                            <name>some.prop</name>
                            <value>false</value>
                        </systemProperty>
                    </systemProperties>
                </configuration>
            </execution>
            <execution>
                <id>stop-jetty</id>
                <phase>post-integration-test</phase>
                <goals>
                    <goal>stop</goal>
                </goals>
            </execution>
        </executions>    
    </plugin> 
```

您可以绑定 maven antrun 插件来执行任意命令，而不是将 jetty maven 插件绑定到这些阶段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T01:00:11.523

~~如果你想执行一些东西，我会使用 maven ant 或 gmaven（然后使用 groovy ant builder）~~

在您进行编辑后，您听起来像是在使用[DropWizard](http://dropwizard.codahale.com/)之类的东西。您可能想看看他们是如何[解决这个问题](https://github.com/codahale/dropwizard/issues/120)的。

根据评论编辑：

Spring Boot Maven 将创建可执行的战争并执行它们，您不需要 Spring Boot 或 Spring。我在此处的回答中有更多详细信息：[可以将 spring-boot-maven-plugin 用于非 spring 项目吗？](https://stackoverflow.com/questions/42696495/can-spring-boot-maven-plugin-be-used-for-non-spring-project/43017960#43017960)

# asp.net-mvc - 如何使用实体框架为 Facebook 的好友列表建模？

> ID：15148049
> 
> 赞同：0
> 
> 时间：2013-03-01T00:03:02.523
> 
> 标签：asp.net-mvc, facebook, entity-framework

我正在使用 MVC 4 和 Entity Framework 5 设计一个新网站，我也在使用 Model-First 来设计我的数据库。我有一个用户实体，我希望它有一个相同类型（用户）的朋友列表。我想使用类似 Facebook 的场景，用户请求友谊，当请求被接受时，他们将成为朋友。我想我应该在用户和自身之间建立一个自引用的多对多连接，但我不知道要保留请求以及如何处理拒绝或接受将用户添加到列表的请求！对不起，如果它变得复杂，我真的试图保持简单，但不能做得更好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T01:33:44.803

您应该使用单独的实体来存储这些连接。通过这种方式，您可以添加字段来告知谁发起、何时以及何时被接受/拒绝/阻止，或者在一段时间后您忽略并允许另一次交友尝试；可能一次只允许 100 个好友请求，等等。可能会在建立友谊后转移到另一个实体。您可能还想考虑如何计算朋友的第 1、第 2、第 3 等顺序的数量 - 如果实时完成此计算可以吃掉您的午餐（我认为这就是杀死 Friendster 的原因当天）。祝你好运！

```
Users
- Id
- Name

FriendRequests
- UserId
- FutureFriendId
- Message
- TimeStamp
- ApproveFlag
- RejectFlag
- BlockFlag
- SpamFlag
- ExpiresDate

Friends
- UserId
- FriendId
- FriendType
- FriendHasThisManyFriends
- TheirFriendsHaveThisManyFriends
- WhenWeBecameFriendsDate 
```

可能有一百万种方法来设置它。没有声称这是最好的。玩得开心！享受。

# c# - Web.API 中的自定义授权

> ID：15148050
> 
> 赞同：27
> 
> 时间：2013-03-01T00:03:03.403
> 
> 标签：c#, asp.net-mvc, asp.net-web-api, authorization

我对 ASP.NET MVC 的理解是，对于授权，我应该使用类似 -

```
public class IPAuthorize : AuthorizeAttribute {

protected override bool AuthorizeCore(HttpContextBase httpContext) {
    //figure out if the ip is authorized 
    //and return true or false
} 
```

但是在 Web API 中，没有`AuthorizeCore(..)`.

MVC的`OnAuthorization(..)`一般建议是不要使用`OnAuthorization(..)`.

Web API 中的自定义授权应该使用什么？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-01T08:33:12.500

授权在授权过滤器中完成 - 这意味着您从 System.Web.Http.AuthorizeAttribute 派生并实现 IsAuthorized 方法。

您不会在普通操作过滤器中实现授权，因为它们在管道中运行的时间比授权过滤器晚。

您也不会在过滤器中实现身份验证（如解析 JWT）——这甚至在更早的称为 MessageHandler 的扩展点中完成。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-01T14:42:15.960

我们使用的方法是继承自 System.Web.Http.AuthorizeAttribute 的自定义 ApiAuthorize 属性。例如：

```
public class ApiAuthorizeAttribute : AuthorizeAttribute
{
    readonly CreditPointModelContext _ctx = new CreditPointModelContext();

    public override void OnAuthorization(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
        if(Authorize(actionContext))
        {
            return;
        }
        HandleUnauthorizedRequest(actionContext);
    }

    protected override void HandleUnauthorizedRequest(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
        var challengeMessage = new System.Net.Http.HttpResponseMessage(System.Net.HttpStatusCode.Unauthorized);
        challengeMessage.Headers.Add("WWW-Authenticate", "Basic");
        throw new HttpResponseException(challengeMessage);

    }

    private bool Authorize(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
        try
        {
            //boolean logic to determine if you are authorized.  
            //We check for a valid token in the request header or cookie.

        }
        catch (Exception)
        {
            return false;
        }
    }
} 
```

# c++ - std::thread.join() 做什么？

> ID：15148057
> 
> 赞同：47
> 
> 时间：2013-03-01T00:04:03.383
> 
> 标签：c++, multithreading, mutex

根据[C++ 参考的定义](http://en.cppreference.com/w/cpp/thread/thread/join)：

> 阻塞当前线程，直到由 标识的线程`*this`完成其执行。

那么这是否意味着在使用时，该线程`.join()`不需要`mutex.lock()`调用某个函数？我是互斥和线程的新手，所以我有点困惑。

注意：我找到了一本书 C++ Concurrency in Action，我正在阅读这本书。对于像我这样的多线程初学者来说，它写得非常好。

谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-01T00:23:21.577

您仍然需要互斥锁和条件。加入一个线程使一个执行线程等待另一个线程完成运行。您仍然需要互斥锁来保护共享资源。它允许本例中的 main() 在退出之前等待所有线程完成。

```
#include <iostream>
#include <thread>
#include <chrono>
#include <mutex>

using namespace std;

int global_counter = 0;
std::mutex counter_mutex;

void five_thread_fn(){
    for(int i = 0; i<5; i++){
        counter_mutex.lock();
        global_counter++;
        counter_mutex.unlock();
        std::cout << "Updated from five_thread"  << endl;
        std::this_thread::sleep_for(std::chrono::seconds(5));
    }
    //When this thread finishes we wait for it to join
}

void ten_thread_fn(){
    for(int i = 0; i<10; i++){
        counter_mutex.lock();
        global_counter++;
        counter_mutex.unlock();
        std::cout << "Updated from ten_thread"  << endl;
        std::this_thread::sleep_for(std::chrono::seconds(1));
    }
    //When this thread finishes we wait for it to join
}
int main(int argc, char *argv[]) {
    std::cout << "starting thread ten..." << std::endl;
    std::thread ten_thread(ten_thread_fn);

    std::cout << "Running ten thread" << endl;
    std::thread five_thread(five_thread_fn);

    ten_thread.join();
    std::cout << "Ten Thread is done." << std::endl;
    five_thread.join();
    std::cout << "Five Thread is done." << std::endl;
} 
```

请注意，输出可能如下所示：

```
starting thread ten...
Running ten thread
Updated frUopmd atteend_ tfhrroema df
ive_thread
Updated from ten_thread
Updated from ten_thread
Updated from ten_thread
Updated from ten_thread
Updated from five_thread
Updated from ten_thread
Updated from ten_thread
Updated from ten_thread
Updated from ten_thread
Updated from ten_thread
Updated from five_thread
Ten Thread is done.
Updated from five_thread
Updated from five_thread
Five Thread is done. 
```

由于 std::cout 是共享资源访问和使用它也应该受到互斥保护。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-01T00:13:29.777

join() 停止当前线程，直到另一个线程完成。互斥锁停止当前线程，直到互斥锁所有者释放它或如果它没有被锁定则立即锁定。所以这些人是完全不同的

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-01-28T03:05:18.680

它阻塞当前线程，直到调用 join() 的线程执行完成。

如果您没有在线程上指定 join() 或 dettach() ，则会导致运行时错误，因为主/当前线程将完成其执行，而创建的其他线程仍将运行。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-01T01:40:57.800

std::thread.join 具有三个我可以想到的功能和其他一些功能：

a) 鼓励持续创建/终止/销毁线程，从而提高性能并增加应用程序发生泄漏、线程失控、内存失控和一般失控的可能性。

b) 通过强制执行不必要的等待来填充 GUI 事件处理程序，从而导致您的客户讨厌的无响应的“沙漏应用程序”。

c) 导致应用程序无法关闭，因为它们正在等待一个无响应、不间断的线程终止。

d) 其他坏事。

我了解您是多线程的新手，祝您一切顺利。另外，考虑到我今晚有很多 Adnams Broadside，但是：

Join() 和其他语言的朋友，如 TThread.WaitFor，（Delphi），是高效的多线程，就像 Windows ME 是操作系统。

请努力进步并理解其他多线程概念——池、任务、应用程序生命周期线程、通过生产者-消费者队列的线程间通信。事实上，几乎除了 Join() 之外的任何东西。

# python - matplotlib mathtext 找不到字体

> ID：15148058
> 
> 赞同：1
> 
> 时间：2013-03-01T00:04:04.787
> 
> 标签：python, fonts, matplotlib

我试图弄清楚如何让 mathtext 在 python matplotlib 中工作。

他们提供了一些我在下面复制的[小示例代码：](http://matplotlib.org/users/mathtext.html#mathtext-tutorial)

```
import numpy as np
import matplotlib.pyplot as plt
t = np.arange(0.0, 2.0, 0.01)
s = np.sin(2*np.pi*t)

plt.plot(t,s)
plt.title(r'$\alpha_i > \beta_i$', fontsize=20)
plt.text(1, -0.6, r'$\sum_{i=0}^\infty x_i$', fontsize=20)
plt.text(0.6, 0.6, r'$\mathcal{A}\mathrm{sin}(2 \omega t)$',
     fontsize=20)
plt.xlabel('time (s)')
plt.ylabel('volts (mV)')
plt.show() 
```

当我尝试运行此代码时，会收到很多如下所示的警告： `/usr/lib/python2.7/site-packages/matplotlib/font_manager.py:1242: UserWarning: findfont: Font family ['cmtt10'] not found. Falling back to Bitstream Vera Sans (prop.get_family(), self.defaultFamily[fontext]))`

并且数学文本无法正确呈现。该图如下所示：

![带有损坏字体的图](../Images/c1c3ada7b46575ac928a6966cab0e33a.png)

什么时候应该是这样的：

![身材应该怎么看](../Images/795390046d41d7d2f2187fcb1c849566.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:43:45.340

显然，这是 matplotlib 旧版本的错误，该版本位于我的 fedora 存储库中。我下载并安装了最新版本，这修复了错误。

要获得最新版本，我必须从源代码构建它。按照 matplotlib[安装说明页面](http://matplotlib.org/users/installing.html)中的说明，

首先，获取构建依赖项： `sudo yum-builddep python-matplotlib`

然后，从[下载页面](https://github.com/matplotlib/matplotlib/downloads)获取最新的 .tar.gz（撰写本文时为 1.2 版）

然后，其余的由 python 安装脚本处理。

```
cd matplotlib // wherever the .tar.gz was extracted to.
python setup.py build
python setup.py install 
```

# c++ - 在 Cinder 中更改 alpha

> ID：15148059
> 
> 赞同：0
> 
> 时间：2013-03-01T00:04:14.793
> 
> 标签：c++, alpha, cinder

我试图让我的粒子随着时间的推移而消失。不过，我似乎根本没有改变不透明度。知道问题是什么吗？

```
class Particle
{

public:

    Particle();
    Particle( ci::Vec2f );
    void update();
    void draw();

    ci::Vec2f   mLoc;
    ci::Vec2f   mDir;
    float       mVel;
    float       trans;

    ci::ColorA       mColor;
    float           mRadius;

    float col_1,col_2,col_3;
};

void Particle::update()
{
  mLoc+=mDir*mVel/2;
  trans+=0.1;
  mColor=ColorA(col_1,col_2,col_3,trans); 
}

void Particle::draw()
{ 
 gl::color(mColor);
 gl::drawSolidCircle(mLoc,mRadius);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T03:28:34.950

看起来您需要启用 alpha 混合，例如：

```
gl::enableAlphaBlending();
gl::color( mColor );

gl::drawSolidCircle(mLoc,mRadius);

gl::disableAlphaBlending(); 
```

这个讨论有更多细节：http: [//forum.libcinder.org/topic/beginner-question-chang-alpha-of-a-texture#23286000000675041](http://forum.libcinder.org/topic/beginner-question-changing-alpha-of-a-texture#23286000000675041)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T23:04:52.273

下面的语句是增加 alpha，而不是减少它，即逐渐消失。

```
trans += 0.1; 
```

将上面替换为

```
trans -= 0.1; 
```

另外，我会假设您最初在构造函数或某些此类设置方法中设置“trans”。

# objective-c - .equals() 等价

> ID：15148061
> 
> 赞同：1
> 
> 时间：2013-03-01T00:04:31.787
> 
> 标签：objective-c

在 java 中有一个 .equals() 方法。因为我不想使用 ==，所以 Objective-C 中的等价物是什么？

例如，如果我想比较两个数组，我会遍历它们并查看它们的对象是否匹配。

```
for (int i = 0; i < array1.count; i++) {
    if (array1[i].equals(array2[i])) {
      do something
      }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:07:51.347

您的问题的严格答案是“使用`-isEqual:`”。

```
if ([array1[i] isEqual:array2[i]]) { ... 
```

也就是说，如果你想弄清楚两个数组是否相等，那么你做错了。而不是对所有元素进行成对比较，只需询问数组是否相等：

```
if ([array1 isEqual:array2]) { ... 
```

某些类，例如`NSArray*`，还提供了专门的相等方法来限制比较对象的类型。它们主要用于为您的代码添加额外的语义含义。如果你想使用它，它看起来像

```
if ([array1 isEqualToArray:array2]) { ... 
```

如果您使用这种风格，请记住比较对象必须确实是正确的类。

# php - 是否可以在具有特定 ID 的记录之后检索每条记录？

> ID：15148064
> 
> 赞同：0
> 
> 时间：2013-03-01T00:04:40.370
> 
> 标签：php, mysql

假设我正在使用 MySQL，并且想按“名称”列的字母顺序对表进行排序，然后检索“id”为 10 的记录之后的所有记录。

这可以做到吗？查询会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:15:59.943

子查询呢？

```
SELECT * FROM `mytable`
    WHERE `name` > (SELECT name FROM `mytable` WHERE `id` = 10)
    ORDER BY `name` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:06:35.470

如果`id`是PK...

```
SELECT * FROM 'mytable' WHERE 'id'>10 ORDER BY 'name' 
```

根据内森对问题的解释......

```
ALTER TABLE 'mytable' ORDER BY 'name';
SELECT * FROM 'mytable' WHERE 'id'>10; 
```

根据OP的要求：

```
$query = "SELECT * FROM 'mytable' ORDER BY 'name'";
$result = mysql_fetch_assoc(mysql_query($query, $connection));

while($row = $result) {
  if ($row['id'] != 10) {
    array_shift($result);
  } else {
    break;
  }
} 
```

然后`$result`是你的最终回应:)

# android - 将 Google Maps Android v2 添加到 Fragment 时出现 IllegalArgumentException

> ID：15148065
> 
> 赞同：1
> 
> 时间：2013-03-01T00:04:45.737
> 
> 标签：android, android-maps-v2

我正在尝试将谷歌地图视图添加到现有片段。按照开发人员文档的说明，我在片段中包含了以下 xml：

```
<fragment
  android:id="@+id/map"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  class="com.google.android.gms.maps.MapFragment" /> 
```

但是，我最终每次都会收到 IllegalArgumentException：

```
02-28 18:54:21.133: E/AndroidRuntime(11300): Caused by:     java.lang.IllegalArgumentException: Binary XML file line #158: Duplicate id 0x7f050019, tag null, or parent id 0x0 with another fragment for com.google.android.gms.maps.SupportMapFragment 
```

02-28 18:54:21.133: E/AndroidRuntime(11300): 在 android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:285) 02-28 18:54:21.133: E/AndroidRuntime(11300) ：在 android.view.LayoutInflater.createViewFromTag（布局

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:47:30.083

[当布局包含片段http://developer.android.com/about/versions/android-4.2.html#NestedFragments](http://developer.android.com/about/versions/android-4.2.html#NestedFragments)时，您不能将布局膨胀到片段中

MapFragment 应该在代码中动态添加，例如：

```
MapFragment fragment = new MapFragment();
FragmentTransaction transaction = getChildFragmentManager().beginTransaction();
transaction.add(R.id.mapView, fragment).commit(); 
```

并在 xml 布局中：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="match_parent"
 android:layout_height="match_parent" >

<FrameLayout
    android:id="@+id/mapView"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
</FrameLayout>

</RelativeLayout> 
```

# algorithm - 从预购中构建 BST

> ID：15148069
> 
> 赞同：1
> 
> 时间：2013-03-01T00:04:52.140
> 
> 标签：algorithm, tree, binary-search-tree, traversal

像许多新手一样，我的头因递归而爆炸。我查找了很多关于 SO 的答案/解释。但我仍然不清楚这个概念。（这不是家庭作业，我正在尝试重新学习我没有学过的东西，递归从来都不是字符串点）

给定一个前序遍历，构造一棵二叉树。使用递归，它必须看起来很简单:) 但我就是不明白。

我*看到*arr 的顺序必须按照插入节点的顺序。让我烦恼的是：

1.  如果节点已经有左/右怎么办？这是如何运作的？
2.  递归如何插入节点，例如以下预购？

    ```
    12, 10, 6, 13 
    ```

15 是根，5、3 和左

如何正确插入 6 作为 10 的左孩子？

```
 12
 10   13
6* 
```

这是骨架代码：

```
main()
{
   int[] arr = {};
   //make the first node a root node.
   node n = new node(arr[0]);
   buildbst(n, arr, 0)
}

buildbst(node root, int[] arr, int i)
{
   if (i == arr.length) return;

   if (arr[i] < root.data)
      root.left = new node (arr[i]);
   else
      root.right = new node(arr[i]);

   buildbst(root.left, arr, i++);
   buildbst(root.right, arr, i++);
} 
```

编辑：

我刚刚意识到，如果我传入递归调用`buildbst(root.left, arr+i, i++)` 是正确的方法吗？或者我是不是把这一切都搞错了——动态编程和递归以及分而治之的混搭......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:58:58.750

1.  它不能已经有左/右孩子。您称它为根，它没有子项可启动。然后你为左孩子调用它并在适当的地方创建孩子并为这些孩子调用函数等等。一旦你向右走，你就再也不会访问左边的孩子，而且你不能从一个调用它的孩子的函数到达一个节点（因为树上没有连接，除了递归堆栈）。

2.  这是给出时应该发生的事情`12, 10, 6, 13`：

    *   创建根`12`
    *   来电`buildbst(node(12), arr, 1)`
        *   创造`node(12).left = node(10)`
        *   来电`buildbst(node(10), arr, 2)`
            *   创造`node(10).left = node(6)`
            *   来电`buildbst(node(6), arr, 3)`
                *   `13 > 12`, 必须是的右孩子`12`, 所以什么也不做
            *   `13 > 12`, 必须是的右孩子`12`, 所以什么也不做
        *   创造`node(12).right = node(13)`
        *   来电`buildbst(node(13), arr, 3)`
            *   哦，看，没有更多的元素，我们完成了。

以上不是您的代码会发生的情况，原因有两个：

*   您的代码只会创建一个左孩子或右孩子，而不是两者（因为`if-else`））
*   您的代码没有`must be right child of '12'`检查，这有点复杂

下面的代码应该涵盖它。

```
node buildbst(int[] arr)
{
   node n = new node(arr[0]);
   // 9999999999 is meant to be > than the biggest element in your data
   buildbst(n, arr, 1, 9999999999);
   return node;
}

int buildbst(node current, int[] arr, int i, int biggestSoFar)
{
    if (i == arr.length) return i;

    // recurse left
    if (arr[i] < current.data)
    {
      current.left = new node(arr[i++]);
      i = buildbst(current.left, arr, i, current.data);
    }

    // recurse right
    if (i < arr.length && arr[i] < biggestSoFar)
    {
      current.right = new node(arr[i++]);
      i = buildbst(current.right, arr, i, biggestSoFar);
    }

    return i;
} 
```

**解释：**

的目的`biggestSoFar`是防止：

```
 15                          15
   /                            /\
  5     versus (the correct)   5  20
 / \                          /
1   20                       1 
```

例如，当从左递归时`15`，我们需要在获得元素时立即停止处理元素`> 15`，这将在我们获得时发生`20`。因此`current.data`，如果我们获得更大的值，我们会传递并停止处理元素。

例如，当从右递归时`5`，我们需要在获得一个元素时立即停止处理元素`> 15`，这将在我们获得 时发生`20`。因此`biggestSoFar`，如果我们获得更大的值，我们会传递并停止处理元素。

# javascript - 如何在 jQuery 的 when() 函数中传入 XHRRequests 的动态列表？

> ID：15148070
> 
> 赞同：1
> 
> 时间：2013-03-01T00:04:55.517
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 的 when() 并传入 XHRRequests 的动态列表，但显然 when() 不支持将数组作为其参数。

我该怎么做呢？

*我真的很感激任何帮助，谢谢！*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:09:46.010

这里的关键函数是[apply()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)。

```
$.when.apply(null, arrayXHR).done(function(response1, response2, ....){ 
    console.log(response1, response2 ...);
}); 
```

# java - ArrayList 随机更新

> ID：15148071
> 
> 赞同：1
> 
> 时间：2013-03-01T00:05:05.150
> 
> 标签：java, arraylist

我有这个简单的程序来计算给定集合的所有子集。

我相信这个算法是正确的。但是部分：

```
while (included.size()>0){
    ArrayList<Integer> temp =included.remove(0);
    temp.add(first_element);
    output.add(temp);
} 
```

该语句`temp.add(first_element)`不必要地更新 not_included。请帮我理解为什么。

```
public class Recursion {

    public static ArrayList<ArrayList<Integer>> getSubsets (ArrayList<Integer> input_set){
        ArrayList<ArrayList<Integer>> output=new ArrayList<ArrayList<Integer>>();

        if (input_set.isEmpty()){
            ArrayList<Integer> this_subset=new ArrayList<Integer>();
            output.add(this_subset);
        }      
        else if (input_set.size()==1){
            ArrayList<Integer> empty_subset=new ArrayList<Integer>();
            output.add(input_set);
            output.add(empty_subset);
        }
        else{
            int first_element=input_set.remove(0);
            ArrayList<ArrayList<Integer>> included = getSubsets(input_set);
            ArrayList<ArrayList<Integer>> not_included = getSubsets(input_set);

            while (included.size()>0){
                ArrayList<Integer> temp =included.remove(0);
                temp.add(first_element);
                output.add(temp);
            }
            while (not_included.size()>0){
                output.add(not_included.remove(0));
            }
        }
        return output;
    }

    public static void main(String[] args) {
        ArrayList<Integer> test= new ArrayList<Integer> ();
        test.add(2);
        test.add(1);
        System.out.print(getSubsets(test));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:12:25.723

尝试

```
ArrayList<ArrayList<Integer>> not_included = getSubsets(input_set.clone()); 
```

这可能仍然不起作用，因为您的数组列表的泛型类型也是一个数组列表。搜索“深拷贝”以找到 100% 有效的解决方案。

getSubSet 只返回指向同一个列表的指针，因为参数相同，这就是为什么包含和 not_included 是相同的列表。

# visual-studio-2010 - 当构建配置为“AnyCPU”或“x64”时，Castle Windsor 无法解决

> ID：15148073
> 
> 赞同：0
> 
> 时间：2013-03-01T00:05:20.943
> 
> 标签：visual-studio-2010, configuration, build, castle-windsor, 32bit-64bit

我正在使用 CastleWindsor 在控制台应用程序中注册和解决 NHibernate 依赖项，只要我在 x86 平台上构建，一切正常。但是，如果我将此平台更改为“AnyCPU”或“x64”，它将停止解析组件。是否存在我不知道的 CastleWindsor 问题或我做错了什么？请帮忙。这是我正在使用的一些代码（没什么花哨的）：

注册码：

```
container.Register(Component.For<ILogger>()
.ImplementedBy<Log4netLog>(),
Component.For<Repository.INHibUnitOfWork>()
.ImplementedBy<Repository.NHibUnitOfWork>().LifestyleTransient().... 
```

解决代码：

```
 _windsorContainer = new WindsorContainer();
        _windsorContainer.Install(FromAssembly.This());
        _windsorContainer.Resolve<ISessionFactory>(); 
```

在最后一行出现错误。未找到支持服务 ISessionFactory 的组件。如果我在 x86 配置中构建它，代码运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:54:07.843

I found the problem. One of the project (in the list of 20 projects) was set to build using x86 configuration. After changing its build settings I was able to build and run the project using ANYCPU setting. Thanks for following up and pointing me to the right direction.

# c# - 探索为每个使用它的 ViewModel/Class 设置 DbContext 的陷阱（如果有的话）

> ID：15148074
> 
> 赞同：7
> 
> 时间：2013-03-01T00:05:30.500
> 
> 标签：c#, entity-framework, mvvm

我正在学习实体框架并在 MVVM 应用程序中使用它，其中每个 ViewModel 与 DbContext 一起工作以进行数据访问。免责声明：在实际应用程序中，我知道 ViewModel 不应该直接与数据访问层交互。

鉴于每个 ViewModel 都是通过维护与模型本身的关系来监视和操纵 View 的状态，我开始想知道旋转多个 DbContext 对象的含义，以及最好将 DBContext 之类的东西保留为单例 -我很快发现答案是“[不](https://stackoverflow.com/questions/4847892/static-field-of-dbcontext-in-global-asax-versus-instance-field-of-dbcontext-in-c)”。因此，如果共识是为每次使用都有一个实例（例如在多个 ViewModel 的情况下，或者你有什么），我仍然没有看到任何人提到使用这个的潜在问题。

详细地说，假设我有两个 ViewModel，并在每个 ViewModel 中创建一个 Context（`TestContext`继承自`DbContext`）以在每个 ViewModel 的生命周期内维护数据访问活动：

```
public class MainWindowViewModel : ViewModelBase
{
    private TestContext db = new TestContext();
    ... other code follows (properties methods etc...)...
}

public class TestViewModel: ViewModelBase
{
    private TestContext db = new TestContext();
    ... other code follows (properties methods etc...)...
} 
```

在每个可以使用它的类中都有一个上下文有什么陷阱吗？

一种嘲弄我的想法是，是否有可能使任何一个上下文与另一个不同步，这样一个 ViewModel 的数据比另一个 ViewModel 的数据更新，因为它的上下文更“最新”。像这样的事情我有兴趣知道。

谢谢。

## 编辑

我不希望发现/涵盖所有情况，因为这对于编码的情况来说是独一无二的。我只是想知道是否有任何“预先”或明显的危险，我不知道是这个主题的新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T01:34:16.883

实体框架并通过扩展`DbContext`支持`UnitOfWork`设计模式。这个想法是你保持你的逻辑“交易”分开。因此，您通常希望应用程序的每个部分或功能都处理自己的`DbContext`实例。

您可以考虑的方式是，它`DbContext`保存从数据库中提取的任何内容的本地副本，并跟踪用户对本地数据所做的所有更改。准备好后，您告诉它一次性将所需的更改推送回数据库。

关于陷阱和危险的问题；Entity Framework 默认使用所谓的乐观并发。这意味着当将本地更改保存回数据库时，根本不会检查并发性。无论您的应用程序中的另一个用户或另一个上下文是否更改了它，本地 DbContext 中的任何内容都会被发送回数据库。可以在这里找到一篇很好的文章来解释这一点以及如何改变行为：http: [//msdn.microsoft.com/en-us/library/bb738618.aspx](http://msdn.microsoft.com/en-us/library/bb738618.aspx)

# javascript - JavaScript 递归将列表从 XML 格式化为 HTML

> ID：15148077
> 
> 赞同：1
> 
> 时间：2013-03-01T00:05:38.840
> 
> 标签：javascript, html, xml, recursion, format

我有一个练习，它要求我使用递归将 XML 数据输出到 HTML 列表标签中。可耻地承认我在数学方面的缺点，我希望有人向我展示如何使用 JavaScript 对 XML 的“节点结构”实现递归逻辑。

结果如下：[JSFiddle](http://jsfiddle.net/kmsL7/)

**编辑** 添加了示例 XML 以完善该主题并删除了不需要的代码。用于创建递归函数的 XML：

```
<ddm>
           <menu0 submenu="true"><name>Welcome</name>
                     <menu1>Home Page</menu1>
                     <menu1>Bulletin</menu1>
                </menu0>
                <menu0 submenu="true"><name>Members\' Area</name>
                    <menu1>Constitution &amp; Bylaws</menu1>
                    <menu1 submenu="true"><name>AGM Minutes</name>
                        <menu2>2012</menu2>
                        <menu2>2011</menu2>
                    </menu1>
                </menu0>
                <menu0>About</menu0>
            </ddm>

<ddm> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:46:29.300

您使用顶级元素调用一次递归函数。每个子元素将简单地调用相同的函数。当你到达底部时，你会停下来，一切都会重新传递。

这应该让您开始（您的 xml 示例）。

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/JRnh4/)]]]

### 输出：

> ![输出](../Images/e00de612fe0a0d32ee218279225d48ff.png)

### 脚本：

```
document.getElementById( 'parse' ).addEventListener( 'click', function () {
    var xml = '<ddm>'
                + '<menu0 submenu="true"><name>Welcome</name>'
                    + '<menu1>Home Page</menu1>'
                    + '<menu1>Bulletin</menu1>'
                + '</menu0>'
                + '<menu0 submenu="true"><name>Members\' Area</name>'
                    + '<menu1>Constitution &amp; Bylaws</menu1>'
                    + '<menu1 submenu="true"><name>AGM Minutes</name>'
                        + '<menu2>2012</menu2>'
                        + '<menu2>2011</menu2>'
                    + '</menu1>'
                + '</menu0>'
                + '<menu0>About</menu0>'
            + '</ddm>',
        xmlDoc = new DOMParser().parseFromString( xml, 'text/xml' ),
        html = nodeMarkup( xmlDoc.documentElement );
    document.getElementById( 'result' ).innerHTML = html;
} );

function nodeMarkup( node ){
    if( node.childNodes.length ) {
        var list = '', header = '';
        for( var index = 0; index < node.childNodes.length; index++ ) {
            if( node.childNodes[index].tagName == 'name' ) {
                header = node.childNodes[index].textContent;
            } else {
                list += nodeMarkup( node.childNodes[index] );
            };
        };
        return node.hasAttribute( 'submenu' ) 
            ? '<li>' + header + '<ul>' + list + '</ul></li>'
            : list;
    } else {
        return '<li>' + node.textContent + '</li>';
    };  
}; 
```

### HTML：

```
<input type="button" id="parse" value="Parse" />
<ul id="result"></ul> 
```

### CSS：

```
#result {
    list-style-type: none;
    margin: 0;
    padding: 0;
} 
```

# bash - 如何编辑 .profile 文件以获得命令的快捷方式？

> ID：15148082
> 
> 赞同：-1
> 
> 时间：2013-03-01T00:06:04.623
> 
> 标签：bash, node.js, environment-variables

我对 unix 非常陌生，我想学习如何在 OSX lion 上编辑 .profile 脚本，以帮助我获得此目录的快捷方式：

```
/usr/local/cellar/node_modules/node.io/bin/node.io 
```

我希望能够像这样运行程序：

```
node.io -h 
```

代替 ：

```
/usr/local/cellar/node_modules/node.io/bin/node.io -h 
```

出于某种原因，即使我使用了 -g，npm 也没有决定为我设置路径，所以要手动进行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T00:08:10.227

`export PATH=${PATH}:/usr/local/cellar/node_modules/node.io/bin`

# php - 为什么 PHP 不继续通过这些 url 运行？

> ID：15148083
> 
> 赞同：0
> 
> 时间：2013-03-01T00:06:23.973
> 
> 标签：php, json, foreach, screen-scraping

我有以下 PHP。基本上，我从网站的多个页面中获得了类似的数据（来自拥有一堆棒球运动员资料的网站的当前本垒打数）。我引入的 JSON 包含我希望从中获取的所有不同配置文件的所有 URL，因此我需要 PHP 运行这些 URL 并获取数据。但是，以下 PHP 仅从第一个 URL 获取信息。我可能犯了一个愚蠢的错误。谁能明白为什么它没有通过所有的 URL？

```
 include('simple_html_dom.php');

        $json = file_get_contents("http://example.com/homeruns.json");

        $elements = json_decode($json);

        foreach ($elements as $element){
                $html = new simple_html_dom();
                $html->load_file($element->profileurl);
                $currenthomeruns = $html->find('.homeruns .current',0);
                echo $element->name, " currently has the following number of homeruns: ", strip_tags($currenthomeruns); 
                return $html;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T00:09:08.987

等等...您正在使用 return $html。为什么？Return 将打破您的功能，从而停止您的 foreach。

如果您确实试图`$html`从函数中取出所有元素，则应将每个元素推`$html`入一个数组，然后在循环后返回该数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:09:00.117

因为你`return`。`return`留下当前方法、函数或脚本，其中包括每个循环。使用 PHP5.5，您可以使用`yield`该函数来让函数像生成器一样运行，但这绝对超出了现在的范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T00:10:14.213

除非您的大括号已关闭，否则您会在循环的最后返回，因此循环将永远不会迭代。

# perl - 使用带有校验和更新的 Perl 修改 PCAP 文件

> ID：15148084
> 
> 赞同：1
> 
> 时间：2013-03-01T00:06:26.000
> 
> 标签：perl, pcap

我有一些 250MB pcap。我可以使用 tcpreplay 更改 MAC 和 IP 地址，但我还需要修改数据包有效负载中的一些字段。如果我通过读取二进制文件来更改字段，则 ip 有效负载的校验和将失败。是否有允许我修改某些字段并更新校验和的模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:15:05.670

您可以使用 Net::PCap 解析此类文件：[http ://search.cpan.org/~kcarnut/Net-Pcap-0.05/Pcap.pm](http://search.cpan.org/~kcarnut/Net-Pcap-0.05/Pcap.pm)

这是一个例子：[http ://hype-free.blogspot.co.uk/2010/03/parsing-pcap-files-with-perl.html](http://hype-free.blogspot.co.uk/2010/03/parsing-pcap-files-with-perl.html)

```
use Net::TcpDumpLog;
use NetPacket::Ethernet;
use NetPacket::IP;
use NetPacket::TCP;
use strict;
use warnings;

my $log = Net::TcpDumpLog->new(); 
$log->read("foo.pcap");

foreach my $index ($log->indexes) { 
  my ($length_orig, $length_incl, $drops, $secs, $msecs) = $log->header($index); 
  my $data = $log->data($index);

  my $eth_obj = NetPacket::Ethernet->decode($data);    
  next unless $eth_obj->{type} == NetPacket::Ethernet::ETH_TYPE_IP;

  my $ip_obj = NetPacket::IP->decode($eth_obj->{data});
  next unless $ip_obj->{proto} == NetPacket::IP::IP_PROTO_TCP;

  my $tcp_obj = NetPacket::TCP->decode($ip_obj->{data});
  my ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime($secs + $msecs/1000);
  print sprintf("%02d-%02d %02d:%02d:%02d.%d", 
    $mon, $mday, $hour, $min, $sec, $msecs), 
    " ", $eth_obj->{src_mac}, " -> ", 
    $eth_obj->{dest_mac}, "\n";    
  print "\t", $ip_obj->{src_ip}, ":", $tcp_obj->{src_port}, 
    " -> ", 
    $ip_obj->{dest_ip}, ":", $tcp_obj->{dest_port}, "\n";
} 
```

# c++ - 具有相同签名的模板不会导致编译器错误

> ID：15148087
> 
> 赞同：2
> 
> 时间：2013-03-01T00:06:41.567
> 
> 标签：c++, templates, c++11, using-declaration

以下程序在两个单独的命名空间 (和)中定义了两个函数模板`A::foo<>()`和。这两个函数模板的*签名相同*，只是分配给它们的第二个模板参数的默认参数不同。最终，它们的名称被相应的一对声明带入了范围：`B::foo<>()``A``B`*`main()``using`*

 *```
#include <type_traits>

namespace A
{
    template<
        typename T,
        typename = typename std::enable_if<
            std::is_same<T, int>::value        // Let this be condition C
            >::type
        >
    void foo(T) { }
}

namespace B
{
    template<
        typename T,
        typename = typename std::enable_if<
            !std::is_same<T, int>::value       // This is the negation of C
            >::type
        >
    void foo(T) { }
}

int main() {
    using A::foo;
    using B::foo; // COMPILES: Is this legal?

    foo(42); // Invokes A::foo(), non-ambiguous because of SFINAE
} 
```

我希望第二个`using`声明在这里会导致编译错误：毕竟，当我尝试在同一个命名空间中定义这两个模板时，我会得到这样的结果。

令我惊讶的是，我尝试过的每个编译器（GCC 4.7.2、GCC 4.8.0 beta、ICC 13.0.1、Clang 3.2）都会编译程序并调用`A::foo()`.

**问题#1：这是正确的吗？**这可能是“*不需要诊断*”的情况吗？鼓励参考 C++11 标准。

* * *

现在考虑上述程序的这种变体，它基本上使用类而不是命名空间来实现相同的效果：

```
#include <type_traits>

struct X
{
    template<
        typename T,
        typename = typename std::enable_if<
            std::is_same<T, int>::value        // Here is condition C again
            >::type
        >
    static void foo(T) { }
};

struct Y
{
    template<
        typename T,
        typename = typename std::enable_if<
            !std::is_same<T, int>::value       // And the negation of C again
            >::type
        >
    static void foo(T) { }
};

struct Z : X, Y
{
   using X::foo;
   using Y::foo; // COMPILES: Is this legal?
};

int main() {
    Z::foo(42); // Invokes X::foo(), non-ambiguous because of SFINAE
} 
```

该程序也可以在上述所有编译器上编译，而我预计第二个`using`声明会导致编译器错误。

**问题#2：这是正确的吗？**这可能是“*不需要诊断*”的情况吗？鼓励参考 C++11 标准。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T00:48:48.533

对于问题 #1：这似乎是允许的，因为没有禁止它的规则。如果 using 声明引入的函数与直接在 using 声明引入名称的命名空间中声明的函数冲突，C++11 标准在注释中提到了这一点，在规则旁边禁止这样做。

它在*§7.3.3[namespace.udecl]/14*中说：

> 如果命名空间范围或块范围内的函数声明与 using 声明引入的函数具有相同的名称和相同的参数类型，并且声明未声明相同的函数，则程序是非良构的。[...]

这是将某种冲突指定为无效的规范性文本。

没有规范性文本表明两个 using 声明不会以相同的方式发生冲突，但请注意，两个 using 声明之间的类似冲突在声明时并非无效。同一段继续：

> [...] [注意：两个 using 声明可能会引入具有相同名称和相同参数类型的函数。如果对于非限定函数名的调用，函数重载决议选择了由这种 using 声明引入的函数，则该函数调用格式错误。[ 例子：
> 
> ```
>  namespace B { 
>    void f(int); 
>    void f(double); 
>  }
>  namespace C { 
>    void f(int);
>    void f(double); 
>    void f(char);
>  } 
> 
>  void h() {
>    using B::f;    // B::f(int) and B::f(double)
>    using C::f;    // C::f(int), C::f(double), and C::f(char)
>    f(’h’);        // calls C::f(char)
>    f(1);          // error: ambiguous: B::f(int) or C::f(int)?
>    void f(int);   // f(int) conflicts with C::f(int) and B::f(int)
>  } 
> ```
> 
> —结束示例] —结束注释]

对于问题 #2，描述类成员声明和类级别 using 声明之间冲突情况的类似规范性文本在以下段落*§7.3.3/15*中：

> 当 using-declaration 将基类中的名称带入派生类范围时，派生类中的成员函数和成员函数模板会覆盖和/或隐藏具有相同名称的成员函数和成员函数模板，parameter-type-list (8.3 .5)、cv-qualification 和 ref-qualifier（如果有）在基类中（而不是冲突）。[ 注意：对于命名构造函数的 using 声明，请参见 12.9。——尾注]

同样没有关于 using 声明之间的冲突的文本，但类似于前面案例中的注释，有两个可能指定冲突函数的 using 声明并不是格式错误的，因为没有文本不允许这些声明共存。和前面的情况一样：如果对于函数调用，重载决议选择了这两个函数，则调用是格式错误的。

在您的示例中，SFINAE 将始终从重载集中消除一个潜在的冲突函数，因此在这两种情况下都没有问题。*

# windows - minidump (.mdmp) 文件中的“模块”是什么意思？他们是否已为流程加载？

> ID：15148088
> 
> 赞同：0
> 
> 时间：2013-03-01T00:06:42.767
> 
> 标签：windows, debugging, crash-dumps

我正在调试我的应用程序启动时创建的小型转储文件。我在 Visual Studio 2010 中查看转储文件。显示的“模块”是什么？它们都是专门为我的应用程序加载的吗？或者有些只是通用的系统范围模块？我正在尝试确定是否存在可能干扰我的应用程序的 3rd 方模块/dll。我在转储中指出了 Sophos 作为示例。Sophos 是否会拦截磁盘写入或内存访问并导致我的应用程序出现问题？

这是一个启动良好的商业应用程序，除了少数客户。

谢谢。

![在 Visual Studio 2012 中转储](../Images/c7bed482586cdbd83378c902699ab762.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:21:34.067

您只是看到在进程中加载​​的 DLL 列表。minidump 用于托管 WPF 应用程序，但您也会看到所有非托管 DLL。小型转储基本上是流程的非托管视图。如果您在开发机器上调试您的 WPF 应用程序并勾选“项目 + 属性”、“调试”、“启用非托管代码调试”选项，您将获得相同的列表。

是的，您标记的 DLL 是由 Sophos 反恶意软件程序注入的。这是完全正常的，这是他们的工作方式。正如“迂回”的名字所暗示的那样，他们绝对会做你怀疑的事情，主要是通过挂钩 winapi 函数。Detours 是一个 Microsoft 挂钩库。

它们不会自动成为崩溃的简单解释，尽管它们肯定有破坏程序稳定的诀窍。您的程序因访问冲突而崩溃，您需要使用调试器找出原因。顺便说一句，这不是一种容易诊断的崩溃。祝你好运。

# authentication - 如何使用 Firebase 登录多个社交服务？

> ID：15148089
> 
> 赞同：56
> 
> 时间：2013-03-01T00:06:42.377
> 
> 标签：authentication, facebook-authentication, firebase, firebase-security

我希望用户能够使用多个不同的身份验证提供程序（例如 Facebook、Twitter 或 Github）对我的 Firebase 应用程序进行身份验证。一旦通过身份验证，我希望用户无论使用哪种身份验证方法都可以访问同一个帐户。

换句话说，我想在我的应用程序中将多个身份验证方法合并到一个帐户中。如何在 Firebase 应用中执行此操作？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-03-01T00:23:27.997

* * *

**更新**(20160521)： Firebase 刚刚发布了其*[Firebase 身份验证](https://firebase.google.com/docs/auth/)**产品的重大更新，现在允许单个用户链接来自各种受支持提供商的帐户。要了解有关此功能的更多信息，请阅读[iOS](https://firebase.google.com/docs/auth/ios/account-linking)、[Web](https://firebase.google.com/docs/auth/web/account-linking)和[Android](https://firebase.google.com/docs/auth/android/account-linking)的文档。下面的答案是出于历史原因留下的。*

* * *

核心 Firebase 服务提供了多种身份验证方法： [https ://www.firebase.com/docs/security/authentication.html](https://www.firebase.com/docs/security/authentication.html)

Firebase 的核心是使用安全的 JWT 令牌进行身份验证。任何导致生成 JWT 令牌的事情（例如在您自己的服务器上使用 JWT 库）都可以向 Firebase 验证您的用户，因此您可以完全控制身份验证过程。

Firebase 提供了一个名为 Firebase 简单登录的服务，它是生成这些令牌的一种方式（这提供了我们的 Facebook、Twitter 等身份验证）。它适用于常见的身份验证场景，这样您就可以在没有服务器的情况下快速启动和运行，但这不是唯一的身份验证方式，也不是一个全面的解决方案。 

这是允许使用 Firebase 简单登录与多个提供商一起登录的一种方法：

1.  为每个用户存储一个规范用户标识符，以及每个提供商特定标识符到该规范 id 的映射。
2.  更新您的安全规则以匹配给定用户帐户上的任何凭据，而不仅仅是一个。

在实践中，安全规则可能如下所示，假设您希望同时启用 Twitter 和 Facebook 身份验证（或允许用户使用其中一个创建帐户，然后再添加另一个）：

```
{
  "users": {
    "$userid": {
      // Require the user to be logged in, and make sure their current credentials
      // match at least one of the credentials listed below, unless we're creating
      // a new account from scratch.
      ".write": "auth != null && 
        (data.val() === null || 
        (auth.provider === 'facebook' && auth.id === data.child('facebook/id').val() || 
        (auth.provider === 'twitter' && auth.id === data.child('twitter/id').val()))"
    }
  },
  "user-mappings": {
    // Only allow users to read the user id mapping for their own account.
    "facebook": {
      "$fbuid": {
        ".read": "auth != null && auth.provider === 'facebook' && auth.id === $fbuid",
        ".write": "auth != null && 
          (data.val() == null || 
          root.child('users').child(data.val()).child('facebook-id').val() == auth.id)"
      }
    },
    "twitter": {
      "$twuid": {
        ".read": "auth != null && auth.provider === 'twitter' && auth.id === $twuid",
        ".write": "auth != null && 
          (data.val() == null || 
          root.child('users').child(data.val()).child('twitter-id').val() == auth.id)"
      }
    }
  }
} 
```

在此示例中，您存储一个全局用户 ID（可以是您选择的任何内容）并维护 Facebook、Twitter 等身份验证机制与主要用户记录之间的映射。为每个用户登录后，您将从用户映射中获取主要用户记录，并将该 ID 用作用户数据和操作的主要存储。以上还限制和验证用户映射中的数据，以便只能由在 /users/$userid/(facebook-id|twitter -id|etc-id)。

这种方法可以让您快速启动并运行。但是，**如果您有一个复杂的用例并希望完全控制身份验证体验，您可以在自己的服务器上运行自己的身份验证代码**。您可以使用许多有用的开源库来执行此操作，例如[everyauth](https://github.com/bnoguchi/everyauth)和[passport](http://passportjs.org)。

您还可以使用 3rd 方身份验证提供程序进行身份验证。例如，您可以使用[Singly](https://singly.com/docs/firebase)，它具有多种开箱即用的集成，您无需编写任何服务器端代码。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-10-30T12:51:33.227

我知道这篇文章已经存在好几个月了，但是当我遇到这个问题时，我花了很多时间来使代码更加灵活。基于上面的 Andrew 代码，我稍微调整了代码。

**示例数据存储：**

```
userMappings
|---facebook:777
|   |---user:"123"
|---twitter:888
    |---user:"123"
users
|---123
    |---userMappings
        |---facebook: "facebook:777"
        |---twitter: "twitter:888" 
```

**安全规则：**

```
"userMappings": {
  "$login_id": {
    ".read": "$login_id === auth.uid",
    ".write": "auth!== null && (data.val() === null || $login_id === auth.uid)"
  }
},

"users": {
  "$user_id": {
    ".read": "data.child('userMappings/'+auth.provider).val()===auth.uid",
    ".write": "auth!= null && (data.val() === null || data.child('userMappings/'+auth.provider).val()===auth.uid)"
  }
} 
```

所以**userMappings**仍然是我们通过 Facebook、Twitter 登录时首先查找的信息...... userMappings 的*用户*将指向**users**中的主帐户。因此，通过 Facebook 或 Twitter 登录后，我们可以查找主用户帐户。在**用户**中，我们保留可以访问其数据的 userMapping 列表。

创建新用户时，我们必须先在**用户**中创建一个帐户。**users 中的用户**id可以是我们想要的任何东西。这是灵活的，因为我们可以提供更多的登录方式，如谷歌、Github，而无需添加更多的安全规则。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-30T18:28:08.573

我刚刚创建了一个 angularfire 装饰器来为我们处理这个问题：[angularfire-multi-auth](https://github.com/douglascorrea/angularfire-multi-auth "angularfire-multi-auth")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-10T17:36:00.113

我花了很多时间思考一个好的解决方案，恕我直言，能够从任何提供商处注册只是令人困惑。在我的前端，我总是要求进行电子邮件注册，例如，使用 facebook 和 google+ 登录的用户在通知他的电子邮件时会以同一用户的身份登录。

这样，Kuma 提出的 Sample Data 就不需要复制 userMappings。

**示例数据存储：**

```
userMappings
|---facebook:777
|   |---user:"123"
|---twitter:888
    |---user:"123"
users
|---123
    |---user data 
```

# function - 预期 Ada 包函数标识符

> ID：15148090
> 
> 赞同：3
> 
> 时间：2013-03-01T00:06:58.273
> 
> 标签：function, package, ada

学习 Ada 并尝试制作堆栈 ADT，我正在使用这个网页来解决这个问题。 [http://www.functionx.com/ada/Lesson06.htm](http://www.functionx.com/ada/Lesson06.htm)

八皇后.adb

```
with Ada.Text_IO;
use Ada.Text_IO;
with Stack;
use Stack;

procedure EightQueens is
begin
    put_line ("awd");
end EightQueens; 
```

堆栈广告

```
package Stack is
    function awd () return Integer;
end Stack; 
```

堆栈.adb

```
package body Stack is
    function awd () return integer is
    begin
        return 1;
    end awd;
end Stack; 
```

错误是

```
stack.ads:2:19: identifier expected 
```

我很确定我做的一切都是正确的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T00:56:32.280

Ada 不使用空括号来定义或调用函数或过程。

为了将来参考，“我很确定我做的一切都是正确的”这句话。是一个危险信号，表明您几乎可以肯定做错了*什么*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T15:00:33.207

只是为了详细说明，Ada 做出了一些语法决定，恕我直言，它优于您可能习惯于 C 语法语言的语法。

1.  没有参数的函数在调用中不使用空括号。这允许您将内容更改为函数调用，而无需重新编码任何客户端。
2.  数组像函数调用一样使用括号，而不是一些独特的语法。这允许您将数组常量更改为函数调用，而无需重新编码任何客户端。

换个角度来看，常量只是无参数函数的简化版本，因为当你可以摆脱总是返回相同的值时。同样，常量数组是参数化函数调用的简化版本，因为您可以始终返回相同的值。如果您后来发现需要更复杂的实现，那不是客户关心的问题，也不应该影响他们的代码。

# javascript - 淡入（）; 淡入然后淡出然后重新出现？

> ID：15148091
> 
> 赞同：0
> 
> 时间：2013-03-01T00:07:07.480
> 
> 标签：javascript, jquery, html

jsfiddle：

[http://jsfiddle.net/ZcbUW/](http://jsfiddle.net/ZcbUW/)

当您从蓝色 div 的顶部悬停并且不移动鼠标时，文本会淡入、淡出，然后淡入。我不知道为什么。

```
<html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T00:14:26.720

```
$("#menu, #arrow").mouseenter(function () {
    $('#arrow').stop(true, false).fadeOut("fast");
    $("body").children(':not(#menu)').children(':not(#arrow)').css("-webkit-filter", "blur(2px)");
    $("#menu").stop().animate({
        width: "300px"
    }, 300, function () {
        $('.text').fadeIn(200);
    });
})
$("#menu").mouseleave(function () {
    $("#menu").stop().animate({
        width: "5px"
    }, 300, function () {
        $('#arrow').stop(true, false).fadeIn("slow");
    });
    $("body").children(':not(#menu)').css("-webkit-filter", "none");
    $('.text').fadeOut(100);
}); 
```

你的选择器很奇怪。所以悬停在菜单和箭头上都被触发。试试这个：http: [//jsfiddle.net/ZcbUW/2/](http://jsfiddle.net/ZcbUW/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:10:04.297

删除这一行：

```
$('.text').fadeOut(100); 
```

用你的例子为我工作。

# c# - C# 尝试添加对我在远程服务器上构建的 WCF 服务的服务引用。访问路径“...”错误

> ID：15148093
> 
> 赞同：0
> 
> 时间：2013-03-01T00:07:25.790
> 
> 标签：c#, asp.net, wcf, iis

我已经为这个发疯了！我已经用谷歌搜索了这个问题并阅读了与此相关的所有内容，但没有运气！我开发了一个 WCF 服务和一个测试网站来测试这个服务。当我将服务引用添加到测试网站时，这两者可以很好地协同工作（在我的机器上），但是当我将 WCF 服务发布到远程机器并尝试添加*该服务引用*时，我收到一条错误消息：

> 下载“\SNMCDEVTEST\sslroot\EncompassService”时出错。拒绝访问路径“\snmcdevtest\sslroot\EncompassService”。

这是远程服务器 IIS 的 SSL（相对于 wwwroot）部分的背后。我有一个附加到服务器的自签名证书和一个附加到 WCF 服务的新应用程序池。我已确保每个人都可以访问此文件夹，但我仍然不断收到此错误！

在此先感谢您的帮助。

史蒂夫

# php - Magento：产品数量导入，每个product_id都有多个stock_id

> ID：15148102
> 
> 赞同：0
> 
> 时间：2013-03-01T00:08:37.693
> 
> 标签：php, arrays, magento, magento-1.7

我有一个允许多个仓库位置的模块，它使用 catalognventory_stock_item 表中的 stock_id 字段。

对于有2个产品，4个仓库的场景；每个仓库有8个产品1和4个产品2；cataloginventory_stock_item 表如下所示。

```
item_id | product_id | stock_id | qty
   1    |     1      |     1    |  8
   2    |     1      |     2    |  8
   3    |     1      |     3    |  8
   4    |     1      |     4    |  8
   5    |     2      |     1    |  4
   6    |     2      |     2    |  4
   7    |     2      |     3    |  4
   8    |     2      |     4    |  4 
```

本质上：
item_id = id
product_id = 产品标识符
stock_id = 仓库标识符

现在，我目前使用这样的脚本以编程方式导入产品（精简版）

```
 $product = new Mage_Catalog_Model_Product();
    $product->setSku('importproduct1');
    $product->setName('Import Product 1');
    $product->setTypeId('simple');
    ...
    $product->setStockData(array(
        'is_in_stock' => 1,
        'qty' => 5
    ));
    $product->save(); 
```

我正在努力寻找如何使用 setStockData 方法在所需的安排中应用数量。

我努力了

```
$product->setStockData(array(
    'is_in_stock' => 1,
    'qty' => 5
    'stock_id' =>1
)); 
```

我认为它需要为每个 stock_id 使用多个数组，但我不确定如何处理它。

# c# - MVC 4 - 如何将模型数据传递给局部视图？

> ID：15148103
> 
> 赞同：42
> 
> 时间：2013-03-01T00:08:43.887
> 
> 标签：c#, asp.net-mvc, model, partial-views, asp.net-mvc-views

我正在构建一个个人资料页面，其中包含许多与特定模型（租户）相关的部分 - AboutMe、MyPreferences - 诸如此类。这些部分中的每一个都将是一个局部视图，以允许使用 AJAX 进行局部页面更新。

当我单击`ActionResult`TenantController 中的 an 时，我能够创建一个强类型视图，并且模型数据可以很好地传递给视图。我无法通过部分视图来实现这一点。

我创建了一个局部视图`_TenantDetailsPartial`：

```
@model LetLord.Models.Tenant
<div class="row-fluid">
    @Html.LabelFor(x => x.UserName) // this displays UserName when not in IF
    @Html.DisplayFor(x => x.UserName) // this displays nothing
</div> 
```

然后我有一个视图`MyProfile`将呈现提到的部分视图：

```
@model LetLord.Models.Tenant
<div class="row-fluid">
    <div class="span4 well-border">
         @Html.Partial("~/Views/Tenants/_TenantDetailsPartial.cshtml", 
         new ViewDataDictionary<LetLord.Models.Tenant>())
    </div>
</div> 
```

如果我将代码包装在 DIV 中`_TenantDetailsPartial`，`@if(model != null){}`页面上不会显示任何内容，所以我猜测有一个空模型被传递给视图。

当我从`ActionResult`“会话”中的用户创建强类型视图时，怎么会传递给视图？如何将“会话”中的用户传递给不是从创建的局部视图`ActionResult`？如果我遗漏了关于这个概念的一些东西，请解释一下。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-03-01T00:24:50.103

您实际上并没有将模型传递给 Partial，而是传递了一个`new ViewDataDictionary<LetLord.Models.Tenant>()`. 试试这个：

```
@model LetLord.Models.Tenant
<div class="row-fluid">
    <div class="span4 well-border">
         @Html.Partial("~/Views/Tenants/_TenantDetailsPartial.cshtml", Model)
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-10-30T07:10:06.983

此外，这可以使它工作：

```
@{
Html.RenderPartial("your view", your_model, ViewData);
} 
```

或者

```
@{
Html.RenderPartial("your view", your_model);
} 
```

有关 MVC 中 RenderPartial 和类似 HTML 助手的更多信息，请参阅[这个流行的 StackOverflow 线程](https://stackoverflow.com/questions/5248183/html-partial-vs-html-renderpartial-html-action-vs-html-renderaction?lq=1)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-05-15T15:29:47.300

**将模型数据传递给局部视图的三种方式（可能还有更多）**

这是查看页面

**方法一**在视图中填充

```
@{    
    PartialViewTestSOl.Models.CountryModel ctry1 = new PartialViewTestSOl.Models.CountryModel();
    ctry1.CountryName="India";
    ctry1.ID=1;    

    PartialViewTestSOl.Models.CountryModel ctry2 = new PartialViewTestSOl.Models.CountryModel();
    ctry2.CountryName="Africa";
    ctry2.ID=2;

    List<PartialViewTestSOl.Models.CountryModel> CountryList = new List<PartialViewTestSOl.Models.CountryModel>();
    CountryList.Add(ctry1);
    CountryList.Add(ctry2);    

}

@{
    Html.RenderPartial("~/Views/PartialViewTest.cshtml",CountryList );
} 
```

**方法二** 通过ViewBag

```
@{
    var country = (List<PartialViewTestSOl.Models.CountryModel>)ViewBag.CountryList;
    Html.RenderPartial("~/Views/PartialViewTest.cshtml",country );
} 
```

**方法三** 通过模型

```
@{
    Html.RenderPartial("~/Views/PartialViewTest.cshtml",Model.country );
} 
```

[![在此处输入图像描述](../Images/4a1cb19129316c0a9607244043b982d5.png)](https://i.stack.imgur.com/BiOUU.png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-11-23T04:40:59.577

我知道问题是特定于 MVC4 的。但是由于我们已经过了 MVC4 并且如果有人在寻找**ASP.NET Core**，您可以使用：

```
<partial name="_My_Partial" model="Model.MyInfo" /> 
```

# c++ - 将数字分组 C++

> ID：15148110
> 
> 赞同：11
> 
> 时间：2013-03-01T00:09:51.013
> 
> 标签：c++, algorithm, numbers, combinations

这是问题所在：

您有 N 个（N 代表您拥有的数字的数量）个数。将它们分成两组，使组中数字之和之间的差异最小。

例子：

```
5 // N

1, 9, 5, 3, 8 // The numbers 
```

如果我们将 1、9 和 3 放入 A 组，将 5 和 8 放入 B 组，则差异为 0。

我认为首先我应该计算所有数字的总和并将其除以 2。然后检查任何可能的数字组合，其总和不高于所有数字总和的一半。完成此操作后，我将选择最大的数字并打印出组。

我在遍历所有组合时遇到问题，特别是当 N 是大数字时。如何运行所有组合？

* * *

另外我的想法有点不同，我会按降序对数字进行分组，然后将最大的数字放在 A 组中，将最小的数字放在 B 组中。然后我反过来做。这适用于某些数字，但有时它不会显示最佳分组。例如：

如果我使用前面的例子。按降序排列数字。

```
9, 8, 5, 3, 1. 
```

把最大的放在 A 组，把最小的放在 B 组。

```
Group A: 9
Group B: 1 
```

反过来。

```
Group A: 9, 3
Group B: 1, 8 
```

等等。如果最后我只有一个数字，我会把它放在总和较低的组中。所以我最终会得到：

```
Group A: 9, 3
Group B: 1, 8, 5 
```

这不是最佳分组，因为差异为 2，但以不同的方式分组，差异可能为 0，正如我所展示的。

如何获得最佳分组？

代码：

```
#include <iostream>
#include <cmath>
#include <string>
using namespace std;
int convertToBinary(int number) {
    int remainder;
    int binNumber = 0;
    int i = 1;
    while(number!=0)
    {
        remainder=number%2;
        binNumber=binNumber + (i*remainder);
        number=number/2;
        i=i*10;
    }
    return binNumber;
}
int main()
{
    int number, combinations, sum = 0;
    double average;
    cin >> number;
    int numbers[number];
    for(int i = 0; i<number; i++)
    {
        cin >> numbers[i];
        sum += numbers[i];
    }
    if(sum%2 == 0)
    {
        average = sum/2;
    }
    else
    {
        average = sum/2 + 0.5;
    }
    combinations = pow(2,number-1);
    double closest = average;
    for(int i = 0; i<=combinations;i++)
    {
        int rem;
        int temp_sum = 0;
        int state = convertToBinary(i);
        for(int j = 0; state!=0; j++)
        {
            int rem =state%10;
            state = state/10;
            if(rem == 1)
            {
                temp_sum = temp_sum + numbers[j];
            }
        }
        if(abs(average-temp_sum)<closest)
        {
            closest = abs(average-temp_sum);
            if(closest == 0)
            {
                break;
            }
        }
    }
    cout << closest*2;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:34:14.213

尽管正如其他人所评论的那样，这是一个 NP-Complete 问题，但您提供了两个相当有用的界限：您只想将一组数字分成两组，并且希望使两组的总和尽可能接近.

您提出计算数字总和并将其除以二的建议是正确的起点 - 这意味着您知道每个组的理想总和是多少。我还怀疑您最好的选择是首先将最大的数字放入 A 组。（它必须放入一组，而这是稍后放置的最差的一组，所以为什么不把它放在那里呢？）

这是当我们进入启发式方法时，您循环遍历直到组完成：

```
N: Size of list of numbers.
t: sum of numbers divided by two (t is for target)

1\. Is there a non-placed number which gets either group to within 0.5 of t? If so, put it in that group, put the remaining numbers in the other group and you're done.
2\. If not, place the biggest remaining number in the group with the current lowest sum
3\. go back to 1. 
```

无疑会有失败的案例，但作为一种粗略的方法，这应该经常接近。要实际编写上述代码，您需要将数字放在有序列表中，以便从大到小轻松处理它们。（然后，步骤 1 也可以通过检查（针对两个“迄今为止的组”）从最大剩余向下直到添加到正在检查的数字的“迄今为止的组”比 t 低于 1.0 来简化 - 之后条件不能满足.)

请让我知道这是否有效！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T11:33:18.170

如果你能找到一组数字，其总和正好是总数的一半，那么使用只有两组的约束 zour 问题就已经解决了。因此，我建议您尝试找到该组并将其余部分明显放入另一组。

将最大数放在第一组的假设很简单。现在剩下的就更棘手了。

这在二进制系统中很简单：考虑到每个数字都有一个位。比特蜂鸣`1`表示该号码在组中`A`，否则为在组中`B`。整个分布可以通过这些位的串联来描述。这可以被认为是一个数字。所以要检查所有组合，您必须遍历所有数字并计算组合。

代码：

```
#include <iostream>
#include <memory>
using namespace std;

int partition(const std::unique_ptr<int[]>& numbers, int elements) {
    int sum = 0;

    for(int i=0; i<elements; ++i) {
        sum += numbers[i];
    }

    double average = sum/2.0;
    double closest = average+.5;

    int beststate = 0;

    for(int state=1; state< 1<<(elements-1);++state) { 
        int tempsum = 0;
        for(int i=0; i<elements; ++i) {
            if( state&(1<<i) ) {
                tempsum += numbers[i];
            }
        }

        double delta=abs(tempsum-average);
        if(delta < 1) { //if delta is .5 it won't get better i.e. (3,5) (9) => average =8.5
            cout << state;
            return state;
        }

        if(delta<closest) {
            closest   = delta;
            beststate = state;
        }
    }

    return beststate;
}

void printPartition(int state, const std::unique_ptr<int[]>& numbers, int elements) {
    cout << "(";
    for(int i=0; i<elements; ++i) {
        if(state&(1<<i)) {
            cout << numbers[i]<< ",";
        }
    }
    cout << ")" << endl;
}

int main()
{
    int elements;

    cout << "number of elements:";
    cin >> elements;

    std::unique_ptr<int[]> numbers(new int[elements]);

    for(int i = 0; i<elements; i++)
    {
        cin >> numbers[i];
    }

    int groupA = partition(numbers, elements);

cout << "\n\nSolution:\n";
    printPartition(groupA, numbers, elements);
    printPartition(~groupA,numbers, elements);
    return 0;
} 
```

**编辑**：有关生成所有可能性的进一步（和更好）解决方案，请检查[此 awnser](https://stackoverflow.com/a/127856/258418)。这是我在[这里找到的](http://seekwell.wordpress.com/2007/11/17/knuth-generating-all-combinations/)[knuths 书](http://www-cs-faculty.stanford.edu/~knuth/fasc3a.ps.gz)的链接

**edit2**：按要求解释枚举的概念：

假设我们有三个元素，`1,23,5`。可以通过填写表格来生成所有可能的组合，而不考虑排列：

```
1 | 23 | 5         Concatination   Decimal interpretation
-----------
0 |  0 | 0         000                0
0 |  0 | 1         001                1
0 |  1 | 0         010                2
0 |  1 | 1         011                3
1 |  0 | 0         100                4
1 |  0 | 1         101                5
1 |  1 | 0         110                6
1 |  1 | 1         111                7 
```

如果我们现在考虑一下`4`这个映射到的数字`100`，表示第一个数字在组中`A`，而第二个和第三个数字不是（这意味着它们在 B 组中）。因此`A`是`1`while `B`is `23,5`。

现在解释一下为什么我只需要看一半的技巧：如果我们看一下十进制解释`3`（`011`二进制），我们会得到 Group`A` `23,5`和 Group `B` `1`。如果我们将此与示例进行比较，`4`我们会注意到我们将相同的数字分组，只是在完全相反的组名中。由于这对您的问题没有任何影响，因此我们不必查看此内容。

**编辑3**：我添加了真实代码进行尝试，在伪代码中我做出了错误的假设，即我总是会在总和中包含第一个元素，这是错误的。至于我开始使用的代码：您不能像那样分配数组。代替数组的另一种解决方案是`vector<int>`避免必须将数组大小传递给函数的问题。使用这将是一个很大的改进。此外，此代码远非良好。您将遇到问题`int size`（通常这应该适用于多达 32 个元素）。你可以解决这个问题（试试这个也许[如何处理任意大的整数](https://stackoverflow.com/q/310276/258418)）。或者您实际上阅读了 knuth（见上文）我相信您会找到一些递归方法。这段代码也很慢，因为它总是重建整个总和。一种优化是研究[格雷码](http://en.wikipedia.org/wiki/Gray_code)（我认为 Knuth 也描述了它们）。这样，您只需为每个测试的排列添加/减去一个数字。这将是性能的提升`n`，因为您将`n-1`加法替换为`1`加法/减法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T22:15:19.840

如果单个组的平均值与整组的平均值相同，那么显然两组之间的差异会更小。通过使用它，我们可以为这个问题提出一个算法。

1.  得到整套的平均值。
2.  取集合中的最大值并将其放入组中的一个。
3.  得到单个组的平均值与整组平均值的差值。
4.  将下一个最大的数字放在具有最大差异的组中。
5.  重复步骤 3 和 4，直到放置所有数字。

这将是获得接近最优解的有效方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T18:53:28.340

这个怎么样：

1.  对数字列表进行排序。
2.  将最大的数字放在 A 组中。从列表中删除该数字。
3.  如果 A 组中所有数字的总和小于 B 组中所有数字的总和，则转到 2。
4.  将最大的数字放在 B 组中。从列表中删除该数字。
5.  如果 B 组中所有数字的总和小于 A 组中所有数字的总和，则转到 4。
6.  如果列表中剩余的数字超过零，则转到 2。

# audio - 在 Haxe 中使用声音资源

> ID：15148111
> 
> 赞同：0
> 
> 时间：2013-03-01T00:09:52.377
> 
> 标签：audio, haxe, swfmill

我在 Haxe 中播放声音资产时遇到问题。我能够毫无错误地导入 mp3 `swfmill`：

```
<?xml version="1.0" encoding="utf-8" ?>
<movie width="100" height="100">    
    <frame>     
        <library>
            ... other resources ...
            <sound id="Shoot" import="shoot.mp3"/>
        </library>
    </frame>    
</movie> 
```

在我的`Main.hx`中，我创建了一个名为的类`Shoot`，它的扩展`Movieclip`方式与我用于`.png`资源的方式相同。然后我使用这个类如下：

```
var sound:MovieClip = new Shoot();
stage.addChild(sound);
sound.play(); 
```

但是在运行时，当执行这段代码时，我得到了错误

```
"Error #2136: The SWF File <project swf> contains invalid data". 
```

我在我的 swf xml 文件或 haxe 代码中犯了什么明显的错误？如何进一步调试此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T00:39:32.293

我终于设法通过将它们声明为 Sounds（而不是 MovieClips）来播放库中的声音

```
class Shoot extends flash.media.Sound {public function new() { super(); }} 
```

而且您不需要将它们添加到舞台上，只需播放即可：

```
var shoot : flash.media.Sound = new Shoot();
shoot.play(); 
```

# javascript - javascript - 翻转图像

> ID：15148115
> 
> 赞同：-1
> 
> 时间：2013-03-01T00:10:13.283
> 
> 标签：javascript

我已经有一段时间遇到翻转图像（用javascript编码）的问题了。我找到了这个线程：[为什么我的简单 javascript 翻转工作不起作用？](https://stackoverflow.com/questions/10215938/why-doesnt-my-simple-javascript-rollover-work)- 关于完全相同的问题 - 我猜。当我在 Windows 上的 Firefox 中尝试代码时 - 根本没有翻转效果，除了我单击按钮的很短的一段时间（只有边框将颜色变为红色 -> 在非常非常短的时间内） -图像根本没有改变......蓝色箭头 - 应该在鼠标悬停时变为红色箭头并返回蓝色 onmouseout 但它什么也不做。链接虽然工作正常。我完全遵循（我相信）在上一个线程中给出的关于同一问题的建议，但根本没有效果...... javascript 如此不可预测吗？为什么我的代码（如下）不起作用 - 根本没有翻转效果？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org      /TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Let's try this Roll-over effect !</title>

<script type="text/jscript" language="javascript">
//<!--
if(document.images){
    arrowout = new Image();
    arrowout.src = "./images/blueArrow.gif";
    arrowover = new Image();
    arrowover.src = "./images/redArrow.gif";
}

function move_over(elemname){
    if(document.images){
        document[elemname].src = eval(elemname + "over.src");
    }
}

function move_out(elemname){
    if(document.images){
        document[elemname].src = eval(elemname + "out.src");
    }
}
//// -->
</script>
</head>

<body>
<a style="height:82px; width:147px;" href="http://www.phuszcza.com" >
<img id="arrow" name="arrow" src="./images/blueArrow.gif"   onmouseout="move_out(this)"    
     onmouseover="move_over(this)" alt="arrow" />
</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:13:38.403

这里有几个问题。

1.  您正在使用为与 Netscape 兼容而设计的代码。现在是 2013 年。

2.  您正在使用`eval`.

3.  您传递`this`给`move_out`and `move_over`，但将`elemname`其视为字符串。

4.  您正在初始化`arrowout`并且`arrowover`对它们完全没有做任何事情。

5.  你的`<a>`元素是内联的；在 CSS 中给它一个`width`and`height`不会改变任何东西。

6.  您正在使用 JavaScript 执行此操作。

改用 CSS。

```
<a id="arrow" href="http://www.phuszcza.com">Go to some page</a> 
```

```
#arrow {
    background-image: url('images/blueArrow.gif');
    display: inline-block;
    height: 82px;
    text-indent: -9999px;
    width: 147px;
}

#arrow:hover {
    background-image: url('images/redArrow.gif');
} 
```

# ipad - iPad Popovercontroller 中的 UIActionSheet 滚动错误

> ID：15148117
> 
> 赞同：2
> 
> 时间：2013-03-01T00:10:13.960
> 
> 标签：ipad, ios6, uipopovercontroller, uiactionsheet

我正在尝试从 UITextView 键盘输入附件中的 UIBarButtonItem 呈现操作表。

我有两个不同的常用字符串操作表，我想将它们显示为快速输入。

呈现操作表时，它包含按钮且没有滚动功能。如果它以横向呈现，然后旋转，或随后以任何方向呈现，它会以滚动条呈现自己。

我的想法是动作表中的列表足够短，可以在整个视图的范围内呈现（被键盘剪辑），而当它以横向呈现时，该条件不成立，因此它显示为可滚动看法。

我正在使用以下内容来展示我的操作表

```
[actionSheetEnglish showFromBarButtonItem:barButtonItem animated:NO]; 
```

有没有人能够在 iPad 上实现一个小区域可滚动的 UIActionSheet？操作表在 iPhone 上正常工作，所以我知道它设置正确。

# javascript - 抓取表单输入 onBlur 以创建查询字符串

> ID：15148118
> 
> 赞同：0
> 
> 时间：2013-03-01T00:10:29.670
> 
> 标签：javascript, forms, query-string, onblur

首先是一点背景......我正在研究一个数据库项目，该项目通过网络表单从与博物馆标本相关的印刷标签中收集数据。表单的一部分包括几个 Locality 字段，例如国家、州、县和位置。通常，这些标本没有与之相关的地理坐标（纬度、经度），因此需要对它们进行追溯地理参考。我有一个图标作为表单的一部分，它链接到一个 Web 应用程序，如果给定上面列出的表单字段中的值，它将绘制一个点。

因此，如果可能的话，我想做的是让数据库人员在表单中输入位置数据。当他们填写位置字段时，javascript onblur 或 onchange 事件将构建一个查询字符串（即 ?country=xxx&state=xxx&county=xxx&location=xxx; 其中 xxx 是从 onblur 表单中获取的数据），以便可以将其附加到图标链接，以便访问地图 Web 应用程序。在某些情况下，样本可能没有所有位置字段的数据，这可能会使事情变得有点复杂（？？），但地图应用程序就是为了处理这个问题而构建的。

示例输入字段：

```
 <input name="country" placeholder="Country" onblur="if(this.value != '') { SOME CODE HERE??;}" required="required" type="text"/> 
```

图标+链接：

```
 <a href="http://www.museum.tulane.edu/geolocate/web/WebGeoref.aspx?country=xxx&state=xxx&county=xxx&locality=xxx" class="lytebox" data-title="Find Lat/Long" data-lyte-options="width:1000px height:800px scrollbars:no"><img title="Click to georeference location using GEOLocate." alt="" height="16" src="images/world.png" width="16" class="auto-style5"></a> 
```

我对javascript不是很熟悉，我已经搜索了很多与这个问题类似的解决方案，但到目前为止我还是一无所获。

我希望有人能帮帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:40:03.550

好的，经过几个小时的修补，我想我想出了这个。

我想出的脚本放在标题中：

```
 <script type="text/javascript">
    function check_onblur() {
         var country = document.getElementById('country').value;
         var state = document.getElementById('state').value;
         var county = document.getElementById('county').value;
         var locality = document.getElementById('locality').value;

         document.getElementById('geolink').href = "http://www.museum.tulane.edu/geolocate/web/
           WebGeoref.aspx?country=" + country + "&state=" + state + "&county=" + county 
           + "&locality=" + locality;
    }
    </script> 
```

表单上的示例输入字段：

```
 <input id="country" tabindex="14" name="country" placeholder="Country"
       onblur="check_onblur();" required="required" type="text"/> 
```

根据表单字段条目更新的图像链接：

```
 <a id="geolink" href="http://www.museum.tulane.edu/geolocate/web/WebGeoref.aspx"
    class="lytebox" data-title="Get Latitude/Longitude from Locality Data" data-lyte-
    options="width:1000px height:780px scrollbars:no"><img title="Click to georeference
    location using GEOLocate." alt="" height="16" src="images/world.png" width="16"
    class="auto-style5"></a> 
```

这会在 onblur 事件触发后使用查询字符串更新基本 URL。一切都很好....

# javascript - Javascript 空格键事件处理程序 - 仅适用于 Firefox

> ID：15148120
> 
> 赞同：-1
> 
> 时间：2013-03-01T00:10:41.607
> 
> 标签：javascript, cross-browser, keypress

```
<script>

$(function(){

    $("#button-start").click(game.start);

    $(window).keypress(function(e) 
    {
        if (e.keyCode == 0) 
        {
            game.check(true);
        }
    });
});

</script> 
```

这**仅捕获****Firefox**中的空格键按键事件。不适用于 IE 或 Chrome。

如何修改它以使其适用于所有浏览器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:12:44.610

jQuery 规范了[`which`](http://api.jquery.com/event.which/)事件属性下的关键代码。空格键有代码`32`：

```
$(window).keypress(function(e) {
    if (e.which === 32) {
        game.check(true);
    }
}); 
```

您可以`$(document)`改为使用更多的浏览器兼容。

# java - RMI JavaFX 2 - NotSerializableException 错误

> ID：15148121
> 
> 赞同：2
> 
> 时间：2013-03-01T00:10:56.393
> 
> 标签：java, javafx-2, rmi, notserializableexception

我正在尝试在 JavaFX 2 项目中使用 Java RMI 发送对象，但是当以下代码运行时，它返回 NotSerializableException。

我的 Admin 类是可序列化的，超类也是如此。但是，似乎异常指向 Admin 类中的 JavaFX SimpleIntegerProperty 字段。

我不知道从这里做什么，因为通过 RMI 发送的类是可序列化的。非常感谢任何帮助。

```
ObservableList<Admin> data = null;
try
{
    data = FXCollections.observableArrayList(Main.docServer.getAllAdmins());
}
catch (RemoteException e)
{
    e.printStackTrace();
} 
```

我收到的错误：

```
java.rmi.UnmarshalException: error unmarshalling return; nested exception is: 
java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException: javafx.beans.property.SimpleIntegerProperty
at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:191)
at java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(RemoteObjectInvocationHandler.java:194)
at java.rmi.server.RemoteObjectInvocationHandler.invoke(RemoteObjectInvocationHandler.java:148)
at $Proxy0.getAllAdmins(Unknown Source)
at com.reece.doc.views.ViewAdmin.getContent(ViewAdmin.java:34)
at com.reece.doc.ApplicationWindow.start(ApplicationWindow.java:32)
at com.reece.doc.Main.start(Main.java:57)
at com.sun.javafx.application.LauncherImpl$5.run(LauncherImpl.java:319)
at com.sun.javafx.application.PlatformImpl$5.run(PlatformImpl.java:206)
at com.sun.javafx.application.PlatformImpl$4.run(PlatformImpl.java:173)
at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:76)
Caused by: java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException: javafx.beans.property.SimpleIntegerProperty
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1351)
at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1888)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
at java.util.ArrayList.readObject(ArrayList.java:733)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1004)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1866)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
at sun.rmi.server.UnicastRef.unmarshalValue(UnicastRef.java:324)
at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:173)
... 10 more
Caused by: java.io.NotSerializableException: javafx.beans.property.SimpleIntegerProperty
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1180)
at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
at java.util.ArrayList.writeObject(ArrayList.java:710)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:975)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1480)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
at sun.rmi.server.UnicastRef.marshalValue(UnicastRef.java:292)
at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:332)
at sun.rmi.transport.Transport$1.run(Transport.java:177)
at sun.rmi.transport.Transport$1.run(Transport.java:174)
at java.security.AccessController.doPrivileged(Native Method)
at sun.rmi.transport.Transport.serviceCall(Transport.java:173)
at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:553)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:808)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:667)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:03:01.447

> 通过 RMI 发送的类是可序列化的

仅当它扩展`Serializable`或所有非静态非瞬态成员变量也这样做时`Externalizable` *，*它才是可序列化的，以此类推，直到关闭。在这种情况下，您显然有一个 type `javafx.beans.property.SimpleIntegerProperty`，正如异常告诉您不可序列化的：

```
java.io.NotSerializableException: javafx.beans.property.SimpleIntegerProperty 
```

因此，任何直接或间接引用它的类也不是可序列化的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T04:38:27.193

您可以将成员变量标记为不被序列化。并将新的 int 字段添加到类中。

```
private int variableInt = 0;

private transient IntegerProperty variable;

public IntegerProperty variableProperty()
{
    if(variable == null)
    {
        variable = new SimpleIntegerProperty();
        variable.set(variableInt);
    }
    return variable;
}

public void setVariable(int variable)
{
    if(this.variable != null)
        this.variable.set(variable);
    variableInt = variable;
}

public int getVariable()
{
    if(variable == null)
        return variableInt;
    else
        return variable.get();
} 
```

# listview - jQuery 移动面板打破 css 位置：在自动分隔链接栏中修复

> ID：15148124
> 
> 赞同：1
> 
> 时间：2013-03-01T00:11:01.183
> 
> 标签：listview, jquery-mobile, panel, css-position

我正在尝试在同一页面上使用 jQuery 移动面板和具有 css 位置的 jQuery 移动自动分隔器链接栏：固定。（见下面的小提琴链接。）

在 Chrome（和 iOS Safari）中，当面板 div ("#defPanel") 存在时，链接栏 div ("#sorter") 会失去其固定位置并随页面滚动。在 Firefox 中，链接栏按预期固定在窗口的右侧。

如果我删除 JQM 面板 div：

```
<div data-role="panel" id="defPanel">...</div> 
```

...链接栏的位置：固定在 Chrome 中按预期工作。谁能告诉这里的问题是什么？

jsfiddle：http: [//jsfiddle.net/FC6WG/1/](http://jsfiddle.net/FC6WG/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-09T21:55:04.587

我发现添加面板`position:fixed`也很麻烦，因为 JQM 在`.ui-panel-content-wrap`页面内容周围添加了一个巨大的 div 包装器（带有 class ）：

```
-webkit-backface-visibility: hidden;
-webkit-transform: translate3d(0,0,0); 
```

用以下方法覆盖它：

```
-webkit-backface-visibility: visible;
-webkit-transform: none; 
```

允许固定内容正常工作。不确定这是否会无意中弄乱其他东西，但这对我有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:53:54.263

`position:fixed`不适用于移动浏览器* 。JQM 使用了一些或多或少合理的技巧来尝试修复元素。一般规则-如果您想移动，请避免修复任何东西。如果您使用 JQM，请使用`data-position="fixed"`.

请参阅有关修复（并避免它;-)）的一些文章：

*   [http://bradfrostweb.com/blog/mobile/fixed-position/](http://bradfrostweb.com/blog/mobile/fixed-position/)
*   [http://view.jquerymobile.com/master/docs/widgets/headers/bars-fixed.php](http://view.jquerymobile.com/master/docs/widgets/headers/bars-fixed.php)

*）好吧，它有时会......但不是真的:-)。

# cuda - CUDA dijkstra 从源到目标的最短路径

> ID：15148127
> 
> 赞同：0
> 
> 时间：2013-03-01T00:11:10.147
> 
> 标签：cuda, dijkstra, shortest-path

我一直在尝试找到一个使用 CUDA 的函数，它能够找到正权有向图的最短路径（很像 Dijkstra 的算法）。

有人可以引导我找到合适的人或已经为解决最短路径而制定的内核/算法吗？

# javascript - 鼠标悬停时突出显示单行

> ID：15148128
> 
> 赞同：4
> 
> 时间：2013-03-01T00:11:22.963
> 
> 标签：javascript, jquery, html, css

当鼠标悬停在多行段落上（在该行*中的任何单词上*）时，我想更改多行段落中**单行**的背景颜色- 这可以使用 JQuery/JS 实现吗？

 *如果是这样，怎么做？

**编辑：** 为了澄清，我希望鼠标悬停在*任何行*上时都会突出显示它。
脚本必须动态隔离光标所在的行，并在鼠标悬停时对其应用临时样式。

**编辑2：**
用于说明的图片 -
[![在此处输入图像描述](../Images/8d81982e58f893b7ec22474718303efd.png)](https://i.stack.imgur.com/thWBi.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T01:05:11.450

这是一场艰苦的战斗，但我想出了一种方法来做到这一点，根本不需要容器上的样式（包括它的字体、对齐方式等）。

这不是一个完美的解决方案，但希望它适用于您的目的。

```
var
    //Keeps the content (individual spans) as they are built.
    $keeper = $("<div>"),
    //Used to measure span width for comparison to container.
    $measurer = $("<div>"),
    //The container of the text content
    $p = $("p"),
    //An individual line of the content
    $line = $("<span>").appendTo($measurer),

//make this "invisible," but allow for measurement against container width
//with no restriction on measurer's own width (fixed)
$measurer.css({'position': 'fixed', 'top': '100%'}).appendTo("body");

//Iterate through each "word" derived from splitting on any space.
$p.text().split(/\s/).forEach(function (elem) {
    //Start forming line text.  Don't forget word spacing
    $line.text($line.text() + elem + ' ');

    //Enough words to make the line width longer than the p width.
    //This indicates the end of "line."
    if ($line.width() > $p.width()) {
        //Remove the last word.
        $line.text(function (_, text) {
            return text.slice(0, text.lastIndexOf(elem));
        });

        //Keep the currently formed line to add back later
        $line.appendTo($keeper);

        //Create a new line for measuring
        $line = $("<span>");
        $line.text(' ' + elem).appendTo($measurer);
    }
});
//Append any leftover words not big enough to form a whole line
$keeper.append($measurer.html());
//Add back content
$p.html($keeper.html());
//cleanup
$keeper.remove();
$measurer.remove(); 
```

[http://jsfiddle.net/6Cx3h/2/](http://jsfiddle.net/6Cx3h/2/)

如果容器的宽度取决于窗口，您也可以在调整窗口大小时执行此操作。

[（您可以在http://jsfiddle.net/6Cx3h](http://jsfiddle.net/6Cx3h)看到我使用高度而不是宽度的尝试）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T00:14:31.970

每行应该是一个标签，`<span>`如果你愿意，你可以使用，然后使用`css`（比 javascript 或 jQuery 更好）你可以做

```
span:hover{
  background-color: #ccc;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T00:34:08.850

这完全取决于您的文本最初是如何格式化的。从您显示的屏幕截图中，在我看来，文本被包裹在一个强制换行的元素中。在这种情况下，整个文本中没有真正的“新行”。如果元素的大小发生变化，它会发生变化......例如，您现在正在阅读的文本被包裹在网站的约束中......

但是，如果我要
插入自己的
换行符，那么
下面的方法
可能有用。

```
// extract the text
var paragraph = $("#text").text();
// split the text into lines by searching for linebreaks
var lines = paragraph.split(/\r?\n/);
// clear the original text
$("#text").text('');
$.each(lines,function(index,elem){
  if (elem != ''){
    // for each line, wrap it with a span and bring back the linebreak
    $("#text").append('<span>'+elem+'</span><br/>');      
  }
}); 
```

现在您所要做的就是制定一些 css 规则来突出显示悬停事件中的 span 元素 -

```
span:hover { background:#DDD } 
```

### [一个活生生的例子](http://jsfiddle.net/et8ut/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T16:07:26.023

您可以通过创建将放置在每行文本后面的块来模拟**非格式化**段落中单行的突出显示。此块将具有与您相同的大小，`p` `line-height`并且根据鼠标 y`top`位置可以更改位置。这种方法不能被视为*原生*亮点，但它比其他建议具有一些优势。首先，它可以适应任何文本。其次，即使在调整流体文本块的大小后，它也可以计算行数。第三，保持文本干净，避免任何额外的标记 ( `<br/>`) 或其他`breaks`.

**的HTML：**

```
<p>Some long non-formatted - fluid text</p> 
```

**CSS：**

```
p {
    position:relative;
    text-align:justify;
    font: 14px/18px Arial; /*Line-height is essential to be defined because not all browsers translate the default value in px - e.g. Chrome returns "normal" and FF returns pixels*/
}
p span {  /*The highlighter*/
    background:yellow; /*Highlight color*/
    display:none; /*Hide it until we have a hover*/
    position:absolute;
    left:0;
    z-index:-1; /*Place it behind the text*/
} 
```

**jQuery：**

```
//get the line-height
var theLineheight = $('p').css('line-height'); 
//strip it from the 'px'
var Lineheight = parseInt(theLineheight); 
//get the text height
var thePheight = $('p').height(); 
//update the height after resize
window.onresize = function () {
    return thePheight = $('p').height(); 
}
//create the highlight box
$('p').append('<span style="height:' + theLineheight + ';width:100%"></span>'); 
//detect mouse movement in the text container
$('p').mousemove(function (e) {
    //show the highlighter
    $('p span').show();
    //get the mouse position
    mouseTop = e.pageY - this.offsetTop;
    //round it to a line-height scale
    topPos = Math.ceil(mouseTop / Lineheight) * Lineheight - Lineheight;
    //position the highlighter vertical
    $('p span').css('top', topPos + 'px');
    //hide the highlighter when mouse is at the end of the text - including the space that highlighter takes
    if (topPos > (thePheight - Lineheight)) {
        $('p span').hide();
    }
//hide the highlighter when mouse is not over the text
}).mouseout(function (e) {
    $('p span').hide();
}); 
```

这是演示：http: [//jsfiddle.net/gh8gZ/1/](http://jsfiddle.net/gh8gZ/1/)

我可以看到我的建议的唯一缺点是，当您有一个带有空行的文本块时，它们也会被突出显示，并且突出显示的区域占据了行的整个宽度 - 虽然这根本不会打扰我，但是我必须指出这不是一个完美的解决方案。*

# jquery - 从colorbox触发twitter bootstrap中的carousel next / carousel previous

> ID：15148130
> 
> 赞同：1
> 
> 时间：2013-03-01T00:11:29.437
> 
> 标签：jquery, twitter-bootstrap, colorbox, carousel

我想要 colorbox 的上一个/下一个控制按钮来更改 twitter 引导轮播中的当前幻灯片。此外，由于我的页面有多个轮播，我希望能够定位正确的轮播。

每个颜色框都有一个画廊，每个轮播都有一个唯一的 id，所以，在我看来，类似`$('.colorbox #gallery1')`on 的东西`$(next)` `$('#carousel1').('next')`似乎是正确的，但我不知道我可以从哪个颜色框事件触发它，以及这样做的正确 js。

# java - 传递字节数组越界错误但它通过了junit测试

> ID：15148132
> 
> 赞同：0
> 
> 时间：2013-03-01T00:11:37.870
> 
> 标签：java, encryption, bytearray, bit-manipulation

使用 des 进行一些加密和解密以及雪崩效应。但是在测试它时，我遇到了一些问题，因为我的数组超出了范围。这是我遇到问题的相关代码：

```
 public static void main(String[] args){

    //take original plain text and get the ct to compare all other ct's to
    String plaintxt = "Coolbro!";
    byte [] ptAr = getBytes(asciiToHex(plaintxt));
    byte [] ctFinal = encrypt(ptAr);
    byte [] ptCopy;
    byte [] newCt;
    int differences =0;

    for ( int j = 63; j >= 0; j--){

        ptCopy = flip(ptAr, 2);
        newCt = encrypt(ptCopy);
        differences = diff(ctFinal,newCt);
        System.out.println(differences);

    }

public static byte [] flip(byte [] a, int position){

    byte[] copy = a;
    String temp = "";
    String tempf = "";
    for(int i = 0; i <= a.length; i++){
        temp = temp + String.format("%8s", Integer.toBinaryString(a[i])).replace(' ', '0');
    }
    if(temp.charAt(position) == '1'){
        for(int i = 0; i < temp.length(); i++){
            if (i == position){
                tempf += "0";
            }
            else{
                tempf += temp.charAt(i);
            }
        }
    }
    else{
        for(int i = 0; i < temp.length(); i++){
            if (i == position){
                tempf += "1";
            }
            else{
                tempf += temp.charAt(i);
            }
        }
    }
    temp = Integer.toHexString(Integer.parseInt(tempf, 2));
    byte [] fin = temp.getBytes();

    return fin;
} 
```

翻转只是应该在给定位置翻转给定字节数组的一位（并且它确实有效，通过了 junit 测试）。

All diff 是否告诉两个密文数组中有多少位置不同。这也有效。

但由于某种原因，我在这里遇到了麻烦

```
ptCopy = flip(ptAr, 2); 
```

我知道 ptAr 是一个可接受的字节数组，所以我看不到它抛出错误的处理。这些是我得到的错误：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 8
at AvalancheUtilities.flip(AvalancheUtilities.java:47)
at AvalancheUtilities.main(AvalancheUtilities.java:17) 
```

任何想法如何解决这个问题？idk它来自哪里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:14:14.933

您的方法中的第一个`for`循环`flip`需要更改，从

```
for(int i = 0; i <= a.length; i++){ 
```

至

```
for(int i = 0; i < a.length; i++){ 
```

所以你不会跑出阵列的末端。

# visual-studio - VS2010：安装 SP1 后烦人的“缺少 Web 组件”对话框

> ID：15148135
> 
> 赞同：1
> 
> 时间：2013-03-01T00:11:45.473
> 
> 标签：visual-studio, visual-studio-2010

去年我在 Visual Studio 2010 上安装了 SP1 后，每次打开我的任何网站（它们都基于 Umbraco）时，我都开始收到这个烦人的弹出窗口。

![缺少 Web 组件对话框](../Images/c6fb2d4e1bf36fd4c4b94dfca12dde89.png)

我不需要这些组件，所以我不想安装它们，但当时[没有办法禁用此对话框](http://social.msdn.microsoft.com/Forums/is/vssetup/thread/425e2370-b57d-42f9-b348-bc8d50d4ad05)。

已经一年了，不知道有没有人找到摆脱这个对话框的方法？

# delphi - 使用指针共享组件的 Delphi MDI 应用程序

> ID：15148136
> 
> 赞同：0
> 
> 时间：2013-03-01T00:12:03.020
> 
> 标签：delphi, pointers, mdi

我正在开发一个 MDI 应用程序（Delphi 7），它将以插件的形式加载 .bpl 包作为 MDI 子项。一个插件只能打开一个实例，但显然可以同时打开多个插件。

我有一个类，它是一个通用类，用于“共享”MDI 父级上可用的某些组件。我通过让公共类在构造每个相关组件时存储一个指向每个相关组件的指针来实现这一点。

例如：

```
...
TCommonClass = class(TObject)
  public
    MainMenu:   ^TMainMenu;
    MyClass:    ^TMyClass;
...
constructor TCommonClass.Create;
var
  CtrlItm: array[0..999] of TComponent;
...
  for i := 0 to (Application.MainForm.ComponentCount - 1) do
  begin
    CtrlItm[i] := Application.MainForm.Components[i];
    if CtrlItm[i].ClassName = ‘TMainMenu’ then MainMenu := @CtrlItm[i];
    if CtrlItm[i].ClassName = ‘TMyClass’  then MyClass  := @CtrlItm[i];
  end; 
```

每当我引用一个对象时，我只需执行以下操作：

```
 ...
  var
    tmp: String;
  begin
    MainMenu^.items[0].Caption := 'Something'; //just to demonstrate
    MyClass.DoSomething;
  end; 
```

每个插件都有自己的这个公共类的实例，其理念是对其组件之一的任何更新都会真正更新 MDI 父级上的组件。这种方法对我来说一直很有效，直到我编写的最后一个插件（它相当大并且包含许多 TMS 组件）开始给我带来我似乎无法追踪的错误。

我想知道的是，这种方法在内存（指针）使用方面是否合理？通过加载和卸载包，内存映射的变化是否有可能破坏指针？我应该以不同的方式做这件事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:25:44.187

*对于任何涉及在 delphi 中无缘无故使用显式指针语法的问题，适当的反应是从头到脚颤抖，然后等待一分钟，让恶心的感觉过去。*

从 TObject 继承的任何对象都已经是按引用的，并且您正在考虑的指针逻辑是 (a) 不必要的第二级指针和 (b) 可能导致错误。

看看这段代码：

```
var
  a : TMyObject;
  b : TMyObject;
begin
   a := TMyObject.Create;
   a.Name := 'Test';
   b := a;
end; 
```

如果编译该代码，那么在我们分配 b := a 之后 b.Name 的值是多少？这将是“测试”，因为 a 和 b 只是对同一对象的变量引用。因此，对于 TMyClass，您只需将一个值分配给另一个，您将不会复制和创建两个对象，您将拥有两个变量，每个变量都引用相同的对象。

什么是参考？引用是具有更简单和更安全语义的指针。你不能取消引用它（它是自动完成的），你不能忘记这样做（它总是为你完成的）。

简而言之，可以随意将 CLASSES 的引用视为指针。

但是，在 TMainMenu 的情况下，您实际上并不需要共享单个 TMainMenu 实例。事实上，如果你尝试，我想你会发现你有问题，可能是崩溃，或者视觉绘画问题。你打算用“共享”的 TMainMenu 做什么？你没有对你认为你可以用它做什么做任何解释，我怀疑如果你表达得更好一点，你会发现你通过共享 TMainMenu 引用来找错树了。

您会看到，TMainMenu 知道它的父对象，并且您不能将 SAME 对象作为两个不同形式的父对象而不引起问题。当您在 MDI 客户端表单的上下文中使用它时，您应该找到另一个解决方案...您可以使用 Actionmanager 或 TActionList 来实现插件系统，或者只需创建您自己的 IPluginCommand 接口，主表单会枚举该接口并通过抽象你的插件来创建菜单项，因为它们知道它们是显示为菜单项还是其他东西。如果您想要做的只是让您的插件可以看到主菜单，以便您的插件可以在运行时添加更多项目，那么您可以这样做（尽管我认为这很严重并且违反了 OOP 原则），

您可能想要做的是使用 ActionManager 组件或 ActionList 组件，并有两种形式，它们都具有来自共享 ActionList 或 ActionManager 的操作。将 actionlist 或 manager 放到一个名为 SharedActions 的数据模块中，并在两个表单的 uses 子句中添加 SharedActionsDataMod 单元，您可以在运行时看到这些操作，然后可以使用它来制作共享操作的菜单（类似于菜单项存储在菜单之外），随心所欲。

**更新**由于您询问了菜单但并不真正关心菜单，因此您获得了不适用于您的信息。请不要那样做。如果您只想要一个通用的插件系统，请**考虑使用 Interfaces 并制作一个稳定的二进制接口**（称为 an `ABI`），因为这是制作一个真正稳定的插件系统的要求，特别是如果您希望能够从 DLL 动态加载插件或BPL。此外，您必须在链接器设置中**启用**运行时包 (BPL)，以便您可以`TForm`在不同的二进制模块之间共享对类和其他核心 VCL 类的引用。如果您不使用运行时包，您将静态链接不同的`TForm`和`TButton`以及其他所有内容，放入您构建的每个 .DLL 和 .EXE 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T01:21:39.360

您不需要当前使用的额外级别的指针间接。你可以瘦下来，例如：

```
TCommonClass = class(TObject)
public
  MainMenu:   TMainMenu;
  MyClass:    TMyClass;
  ...
end;

constructor TCommonClass.Create;
var
  Ctrl: TComponent;
  ...
begin
  ...
  for i := 0 to (Application.MainForm.ComponentCount - 1) do
  begin
    CtrlItm := Application.MainForm.Components[i];
    if CtrlItm.ClassName = 'TMainMenu' then MainMenu := TMainMenu(CtrlItm);
    else if CtrlItm.ClassName = 'TMyClass' then MyClass := TMyClass(CtrlItm);
    ...
  end;
  ...
end; 
```

.

```
var
  tmp: String;
begin
  MainMenu.Items[0].Caption := 'Something'; //just to demonstrate
  MyClass.DoSomething;
end; 
```

现在，话虽如此，我建议另一种方法。让 MainForm 本身提供指向每个插件的指针，而不是让插件为它们轮询 MainForm。MainForm 知道所有的指针，所以让它在自己的本地记录中收集指针，并将指向该记录的指针传递给它加载的每个插件。如果任何指针发生变化，所有活动插件将自动拥有最新的指针，而无需为此做任何额外的事情。在每个插件中，只需在访问它之前检查每个指针是否为 nil。例如：

主窗体：

```
type
  PSharedPointers = ^TSharedPointers;
  TSharedPointers = record
    MainMenu: TMainMenu;
    MyClass:  TMyClass;
    ...
  end;

var
  SharedPointers: TSharedPointers;

procedure TMainForm.FormCreate(Sender: TObject);
begin
  SharedPointers.MainMenu := MainMenu1;
  ...
end;

procedure TMainForm.LoadAPlugin;
type
  InitProc = procedure(Pointers: PSharedPointers);
var
  PluginInst: HInstance;
  Init: InitProc;
begin
  PluginInst := LoadPackage('plugin.bpl');
  @Init := GetProcAddress(PluginInst, 'InitPlugin');
  Init(@SharedPointers);
end; 
```

插入：

```
type
  PSharedPointers = ^TSharedPointers;
  TSharedPointers = record
    MainMenu: TMainMenu;
    MyClass:  TMyClass;
    ...
  end;

var
  SharedPointers: PSharedPointers = nil;

procedure InitPlugin(Pointers: PSharedPointers);
begin
  SharedPointers := Pointers;
end;

...

var
  tmp: String;
begin
  if SharedPointers.MainMenu <> nil then
    SharedPointers.MainMenu.Items[0].Caption := 'Something'; //just to demonstrate

  if SharedPointers.MyClass <> nil then
    SharedPointers.MyClass.DoSomething;
end;

exports
  InitPlugin; 
```

# mysql - 为演示站点每 30 分钟恢复一次 MySQL 数据库和文件

> ID：15148137
> 
> 赞同：0
> 
> 时间：2013-03-01T00:12:08.963
> 
> 标签：mysql, cron, backup, restore

好的，我读了这篇文章：

[我需要使用 cron 作业每 30 分钟恢复一次数据库（mysql）](https://stackoverflow.com/questions/4027832/i-need-to-restore-a-database-mysql-every-30-minutes-using-a-cron-job)

答案是：

mysql -u 用户 -ppassword 数据库名 < /path/to/dump.sql

我的问题是会删除数据库中已经存在的数据吗？我需要从存储的 MySQL 文件中覆盖。

然后，我还需要使用 cron 命令使用还原目录覆盖一个目录中的所有文件。

这是一个 joomla 安装......我已经尝试了 2 个不同的 joomla 组件来设置一个演示站点，该站点每 30 分钟刷新一次，但我无法让它们中的任何一个工作。

有没有人有一个解决方案可以完全恢复 cron 命令上的目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:02:07.730

最快的方法是跳过转储/导入并交换目录。只要你做整个mysql数据目录，一切都会工作。除非您有主/从设置。关闭 mysql 并复制 mysql 数据目录。这将是您未来的恢复源。然后设置一个 cron 来执行以下操作：

1.  复制mysql备份目录

    cp -R mysql.bak mysql.restore

2.  停止mysql

3.  将当前mysql数据目录与restore目录交换

    mv mysql mysql.rm mv mysql.restore mysql

4.  启动mysql

5.  清理刚刚交换的 mysql 目录

    rm mysql.rm

根据 InnoDB 表的大小，Mysql 只会在几秒钟内关闭并且无法使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:30:48.640

使用 cron 作业运行`.sql`文件可以做你想做的事。要替换所有数据，您必须将表删除和创建语句添加到正在执行的文件中。这将强制您希望成为数据库中唯一数据的特定数据。

# visual-studio-2010 - Visual Studio 2010 是否为已安装 Microsoft SQL Server Data Tools 的服务器提供任何增强功能或附加功能？

> ID：15148138
> 
> 赞同：0
> 
> 时间：2013-03-01T00:12:15.643
> 
> 标签：visual-studio-2010, sql-server-2012, sql-server-data-tools

除了 SQL Server 2012 之外，安装的 Microsoft SQL Server Data Tools、SSDT 还提供了一个 Visual Studio shell。我很好奇安装完整版的 Visual Studio 2010 是否提供任何增强或附加功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T05:00:22.967

这将取决于您安装的 VS 版本。如果您安装的是 Premium 或 Ultimate，您将获得协作工具的好处。除此之外，不多。

# xml - PHP Luracast Restler 将命名空间属性添加到根元素

> ID：15148142
> 
> 赞同：0
> 
> 时间：2013-03-01T00:12:25.443
> 
> 标签：xml, rest, namespaces, restler

在这方面遇到了一些麻烦。如何将命名空间 URL 属性添加到根目录？我什至有可能吗？欢迎任何解决方法。我必须使用 Dublin Core 中的一些定义，并且我的 XML 要求声明命名空间。IE

```
<metadata
  xmlns="http://example.org/myapp/"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://example.org/myapp/ http://example.org/myapp/schema.xsd"
  xmlns:dc="http://purl.org/dc/elements/1.1/">

  ...
</metadata> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:09:17.187

目前只能通过扩展 XmlFormat 类并将命名空间添加到生成的 xml

但是，我们正在开发支持命名空间的新版本 XmlFormat

# asp.net-mvc-4 - 采用多个参数的 ASP.Net Web API 自定义操作？

> ID：15148144
> 
> 赞同：0
> 
> 时间：2013-03-01T00:12:33.757
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我想在 Web API 控制器中实现一个自定义操作，该控制器使用 ASP.Net MVC 4 Web API 框架接受多个参数。

```
 public class APIRepositoryController : ApiController
{
    ...
    [HttpGet, ActionName("retrieveObservationInfo")]
    public ObservationInfo retrieveObservationInfo(
                    int id, 
                    String name1, 
                    String name2)
    {
        //...do something...
        return ObservationInfo;
    }
    ...
} 
```

这样我就可以在 Web 浏览器中调用 URL，例如：

```
"http://[myserver]/mysite/api/APIRepository/retrieveObservationInfo?id=xxx&name1=xxx&name2=xxx" 
```

然而，这从未奏效。

还有什么我需要配置的，例如 WebAPI 路由？目前我只使用默认的`WebApiConfig.cs`.

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T00:23:22.513

默认情况下，Web API 将根据 HTTP 动词而不是动作名称调度动作，在您的情况下：

```
GET http://[myserver]/mysite/api/APIRepository/?id=xxx&name1=xxx&name2=xxx 
```

要根据动作名称进行调度（如您所愿），您需要在默认路由之前添加以下路由：

```
routes.MapHttpRoute(
    name: "ActionApi",
    routeTemplate: "api/{controller}/{action}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

请注意，您目前不能（至少在没有 hack 的情况下）不能在单个控制器中可靠地结合基于动词和动作名称的路由。您可以在此处阅读有关[Web API 路由的](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api)更多信息。

# c++ - 实例化一类库对象？

> ID：15148146
> 
> 赞同：1
> 
> 时间：2013-03-01T00:12:37.963
> 
> 标签：c++, class, instantiation

我有一个关于 C++ 类和实例化的问题。以下代码的输出如下：

用于快速参考的 Poco 库：http: [//pocoproject.org/docs/](http://pocoproject.org/docs/)

这是一个测试
退出

我希望输出为：

这是一个测试
用户名
EXITING

基本上，为什么 myCreds 没有打印出来？代码：

```
#include <iostream>
#include <string>
#include <Poco/Net/HTTPBasicCredentials.h>

using namespace std;

class myTest{
public:
    string test;
    Poco::Net::HTTPBasicCredentials myCreds;
    myTest();
};  

myTest::myTest(){
    test = "this is a test";
    Poco::Net::HTTPBasicCredentials myCreds("username", "password");
}

int main(){
    myTest thisTest;
    cout << thisTest.test << "\n";
    cout << thisTest.myCreds.getUsername() << "\n";
    cout << "EXITING" << "\n";
} 
```

谢谢您的帮助。
R

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:17:19.970

您有 的两个实例`myCreds`：一个属于`thisTest`，另一个在 的构造函数的主体中创建和销毁`myTest`。

您应该为 myCreds 编写构造函数，如下所示（`myCreds`正确初始化成员）：

```
myTest::myTest()
    : test("this is a test")
    , myCreds("username", "password")
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T00:16:36.247

您在类构造函数中将 myCreds 声明为局部变量，覆盖类中的公共变量。当您的构造函数返回时，局部变量会消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T00:16:20.873

您的构造函数正在创建自己的`myCreds`而不是初始化成员变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T00:16:31.707

看起来您正在重新创建一个本地实例，`HTTPBasicCredentials`而不是在这里初始化您的公共成员：

```
myTest::myTest(){
    test = "this is a test";
    Poco::Net::HTTPBasicCredentials myCreds("username", "password");
} 
```

该构造函数中的 myCreds 实例将在构造完成时创建并丢弃。

而是初始化您的公共成员。

# c - 每次从二进制文件读取 2 个字节

> ID：15148148
> 
> 赞同：1
> 
> 时间：2013-03-01T00:12:56.917
> 
> 标签：c, binaryfiles

您好，我正在尝试完成我的项目，但我对从二进制文件中读取字节感到困惑。我的目标是每次读取 2 个字节，直到 EOF。我想先检查，第一个字节的第一位 0 或 1，我想打印出其余 7 位，如整数。我也想将第二个字节打印为整数。所以我有这个

```
short test[2];
while((fread(&test,sizeof(short),1,ifp)!=0)  //ifp is input file pointer
    {
      fread(&test,sizeof(short),1,ifp);
      printf("test first byte :%d\n",test[0]);
      printf("test seocnd byte : %d\n",test[1];
} 
```

我不知道我读的是不是真的，我也不知道我将如何获得第一个字节的第一位并像整数一样休息 7 位，以及我如何打印出像整数一样的第二个字节。

谢谢。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T00:18:32.110

第二个 fread 不是必需的，您不应该获取数组的地址（否`&test`），您还需要使用 1 字节的 char 类型：

```
unsigned char test[2];
while((fread(test,2,1,ifp) == 1)  //ifp is input file pointer
    {
      int first_bit = test[0] & 0x80;
      printf("test first byte 7 bits :%d\n", test[0] & 0x7f);
      printf("test second byte : %d\n",test[1];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T00:25:24.730

没有人保证 a`short`是 2 个字节，它*至少*是2 个字节。你正在阅读*一个*短片并使用它和下一个。像这样制作：

```
unsigned char test[2];
while((fread(&test, 1, 2, ifp) > 0) { //ifp is input file pointer
      printf("test first byte: %u, second byte: %u\n", test[0], test[1]);
} 
```

这一次读取两个字节，检查它是否读取了某些内容（返回值是读取的项目数），然后打印它们。

# python - 使用 matplotlib 注释绘图

> ID：15148149
> 
> 赞同：12
> 
> 时间：2013-03-01T00:13:09.323
> 
> 标签：python, matplotlib

我正在使用它来制作一个情节，其中包含特定时刻的内容，例如突出显示

```
plt.axis('normal')
plt.axvspan(76, 76, facecolor='g', alpha=1)
plt.plot(ts.e1, 'r',linewidth=1.5)
plt.ylabel("Anger",fontsize=14,color='blue')
plt.ylim(ymax=0.04)
plt.xlim(xmax=122)
plt.grid(True)
plt.title("Anger - Real Events", fontsize=20,color='black')
plt.xlabel('minutes', fontsize=14, color='b')
plt.show() 
```

有什么想法我可以在这个中添加像“span 1”这样的水平文本：

```
plt.axvspan(76, 76, facecolor='g', alpha=1) 
```

或使用文本“line1”并在此范围内显示箭头？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-01T10:14:37.767

以下是如何让箭头显示跨度：

```
import matplotlib.pyplot as plt

plt.axvspan(76, 76, facecolor='g', alpha=1)
plt.annotate('This is awesome!', 
             xy=(76, 0.75),  
             xycoords='data',
             textcoords='offset points',
             arrowprops=dict(arrowstyle="->"))
plt.show() 
```

有关注释的更多信息，请参阅[文档](http://matplotlib.org/users/annotations_guide.html)。

上述代码的输出： ![在此处输入图像描述](../Images/ee3f142b8a99af027f88a0a5408569ee.png)

# microformats - 如何为词汇添加微格式？

> ID：15148155
> 
> 赞同：2
> 
> 时间：2013-03-01T00:13:33.577
> 
> 标签：microformats, rdfa, rich-snippets

有谁知道 Quizlet 如何在其 Google 搜索结果元数据中使用“术语”和“定义”标题以及词汇/定义数据构建搜索结果数据？是微格式还是其他方法？

以供参考：

显示的搜索结果（第 3 个列表） - [http://bit.ly/WuES0X](http://bit.ly/WuES0X) 实际网页 - [http://quizlet.com/4835950/web-20-flash-cards/](http://quizlet.com/4835950/web-20-flash-cards/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:52:41.763

微格式`rel="tag">`用于标记帖子和按主题分页..本质上是相同的事情，只是您需要`a`在您的词汇单词周围应用元素，所以如果这对您来说是最佳的，请识别。如果它完全是词汇，或者更确切地说，是一个词汇表，你可以把它很好地包装成`dl`这样：
`<dl>
<dt><dfn><a href="tags/tag.html" rel="tag">tag</a></dfn></dt>
<dd><p>definition of tag.</p></dd>
</dl>`

# imap - IMAP 登录命令 - 无效字符？

> ID：15148159
> 
> 赞同：0
> 
> 时间：2013-03-01T00:14:05.890
> 
> 标签：imap

我正在尝试在我的 iPad 应用程序中登录 IMAP 服务器。它适用于大多数帐户，但对于一个特定帐户，它不起作用。

尝试通过 telnet 登录 IMAP 服务器时，我可以复制该问题。这是我输入的内容（更改了用户名和密码以保护无辜者）：

```
a1 LOGIN help sm@llworld
a1 NO [AUTHENTICATIONFAILED] Authentication failed. 
```

但是，如果我使用 Apple Mail 登录此帐户，它就可以正常工作。

我唯一的猜测：密码中的“@”字符有什么问题吗？我需要（以某种方式）逃避它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:43:00.010

非常抱歉，但事实证明这是一场虚惊。没有指导意义的愚蠢问题，我不会在这里概述。

无论如何，将用户名和密码用引号括起来显然是个好主意。谢谢大家。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T07:23:37.143

将密码用双引号括起来……也可以尝试使用整个邮件 ID，例如 xyz@gmail.com 我已经为邮件域设计了一个 IMAP 服务器，还设计了来自不同邮件提供商的数据迁移工具，并且总是更好地传递密码在特殊字符（如 \@#$）的双引号中总是会破坏功能。

# linux - 如何将保险丝模块插入Linux内核

> ID：15148164
> 
> 赞同：1
> 
> 时间：2013-03-01T00:14:44.833
> 
> 标签：linux, linux-kernel, fuse

我的操作系统是centos

内核是 2.6.18-92.1.17.el5xen。

fuse 版本是 fuse-2.7.4 我是这样编译的：</p>

```
 ./configure --enable-kernel-module --with-kernel=/usr/src/linux
     make &&　make install 
```

然后是“modprobe fuse”，但它警告如下：

```
 FATAL: Error inserting fuse (/lib/modules/2.6.18-92.1.17.el5xen/kernel/fs/fuse/fuse.ko): Operation not permitted 
```

但我是以root身份完成的。

还有另一种安装方式：

```
 /sbin/insmod ./kernel/fuse.ko 
```

我得到了：

```
 insmod: error inserting './kernel/fuse.ko': -1 Invalid module format 
```

有没有人可以帮助我？

# jasper-reports - 生成饼图

> ID：15148172
> 
> 赞同：0
> 
> 时间：2013-03-01T00:15:25.420
> 
> 标签：jasper-reports, ireport

我想显示一个饼图。我想要达到的结果：

```
Summary:

Sample  Total
A1      10
A2      20
A3      30 
```

`10`我想用, `20`,`30`作为切片和`A1`, `A2`,`A3`作为标签来显示饼图。

* * *

在阅读并遵循一些示例后，我开始研究 3D 饼图，但我不断收到以下异常：

```
Filling report...
    Locale: English (United States)
    Time zone: Default
Error filling print... java.lang.Long cannot be cast to java.lang.String 
java.lang.ClassCastException: java.lang.Long cannot be cast to java.lang.String
    at net.sf.jasperreports.charts.fill.JRFillPieSeries.evaluate(JRFillPieSeries.java:136)
    at net.sf.jasperreports.engine.fill.JRCalculator.calculateVariables(JRCalculator.java:160)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillDetail(JRVerticalFiller.java:758)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReportStart(JRVerticalFiller.java:281)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReport(JRVerticalFiller.java:144)
    at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:909)
    at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:822)
    at net.sf.jasperreports.engine.fill.JRFiller.fill(JRFiller.java:61)
    at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:446)
    at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:276)
    at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:745)
    at com.jaspersoft.ireport.designer.compiler.IReportCompiler.run(IReportCompiler.java:891)
    at org.openide.util.RequestProcessor$Task.run(RequestProcessor.java:572)
    at org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:997)  
Print not filled. Try to use an EmptyDataSource... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:03:49.590

在 Ireport 中打开饼图的“图表数据”并转到“部分值”选项卡，您必须给出三个表达式，它们是：-

```
 1 :- Key Expression (column which includes A1,A2,A3 values)
 2:- Value expression (Should be integer - column which includes 10,20,30))
 3:- Label expression (Should be string ) 
         - if you want to convert integer column to sting use this - 
            **$F{column which includes 10,20,30}.toString( )** 
```

# ruby - 测试 PocketSphinx 服务器

> ID：15148173
> 
> 赞同：0
> 
> 时间：2013-03-01T00:15:34.557
> 
> 标签：ruby

我有兴趣为测试目的建立一个基于网络的语音识别服务。我做了一些研究，发现了 Ruby PocketSphinx Server。他们声称接受作为音频文件的输入，并返回一个带有音频输入文本的 JSON 文件。这正是我所需要的。

问题是我是 Ruby 和 Sphinx/PocketSphinx 的新手。即使我按照[文档](https://github.com/alumae/ruby-pocketsphinx-server/blob/master/README.rdoc)设置环境，我仍然完全迷失了方向。我已经运行了这个命令`unicorn -c unicorn.conf.rb config.ru`，但是得到了这个错误：

```
/usr/lib/ruby/vendor_ruby/unicorn/configurator.rb:74:in `read': No
such file or directory - unicorn.conf.rb (Errno::ENOENT)    from
/usr/lib/ruby/vendor_ruby/unicorn/configurator.rb:74:in `reload'    from
/usr/lib/ruby/vendor_ruby/unicorn/configurator.rb:67:in `initialize'
  from /usr/lib/ruby/vendor_ruby/unicorn/http_server.rb:104:in `new'
  from /usr/lib/ruby/vendor_ruby/unicorn/http_server.rb:104:in
`initialize'    from /usr/bin/unicorn:121:in `new'  from
/usr/bin/unicorn:121:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T19:34:42.943

在 ruby​​-pocketsphinx-server 文件夹的根目录中应该有一个名为 unicorn.conf.rb 的文件。

您应该在根目录中运行 unicorn -c unicorn.conf.rb config.ru 命令。

# android - Android，GridLayout的水平和垂直滚动

> ID：15148175
> 
> 赞同：7
> 
> 时间：2013-03-01T00:15:46.700
> 
> 标签：android, scrollview, grid-layout

我无法让 GridLayout 水平滚动。

我发现了一个类似的问题[Gridlayout + ScrollView](https://stackoverflow.com/questions/10610943/gridlayout-scrollview)。我试过那个方法，但是没有用。

它削减了许多表（因为它应该显示从 1 到 20 的所有表）。

这是xml文件

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:padding="16dp" >

            <android.support.v7.widget.GridLayout
                android:id="@+id/table_mapGrid"
                android:layout_width="250dp"
                android:layout_height="wrap_content" />
        </LinearLayout>
    </ScrollView>

    <include layout="@layout/cell_list_loading" />

    <TextView
        android:id="@+id/table_errorView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_marginLeft="20dp"
        android:text="@string/message_error_connection"
        android:visibility="invisible" />

</FrameLayout> 
```

我想显示动态内容，改变列数和行数，表格之间可能有空格。这我已经完成了，但问题是当 GridLayout 的宽度变得大于其容器的宽度时，我想使用水平滚动来解决这个问题，但它似乎不起作用......

有什么建议吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-09T21:12:45.223

好吧，我找到了解决方案

看起来 android ScrollView 像 VerticalScrollView 一样工作，而且仅此而已（名称不像 Horizo​​ntalScrollView 那样直观）。

因此，要使某些东西可以垂直和水平滚动，您需要在 Horizo​​ntalScrollView 中嵌套一个 (Vertical)ScrollView，或者反过来，像这样

```
<ScrollView
    android:layout_width="match_parent"
    android:layout_height="wrap_content">
    <HorizontalScrollView
        android:layout_width="wrap_content"
        android:layout_height="match_parent">

            <!-- Your content here -->

     </HorizontalScrollView>
</ScrollView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T21:20:45.840

嵌套的 Horizo​​ntalScrollView / ScrollView 将不允许您同时滚动两个方向。我遇到了这个问题并为此创建了一个自定义组件，如果它可以帮助任何人，这里是链接：

[https://gist.github.com/androidseb/9902093](https://gist.github.com/androidseb/9902093)

# mysql - UPDATE 语句处于“查询结束状态”

> ID：15148176
> 
> 赞同：4
> 
> 时间：2013-03-01T00:15:47.300
> 
> 标签：mysql

我们最近升级了运行在 mysql 服务器版本 5.5.8 上的 mysql 数据库。升级后，有时我们会看到简单的升级过程需要 10 多秒。当我查看进程列表时，它显示所有进程都处于“查询结束”状态。有没有人对此有任何想法。

```
 UPDATE Accounts SET IPadd = 'xx.xx.xx.xx', updatedtime = NULL WHERE Id=xx; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:26:50.140

我在这里检查了一些解决方案，然后找到了这个[链接](https://stackoverflow.com/questions/6937443/query-end-step-very-long-at-random-times)。

添加此行（如果存在，请编辑它）：

```
innodb_flush_log_at_trx_commit = 0 
```

在 /etc/my.cnf

* * *

# 然而

佩德罗·韦内克评论：

> 天真地设置 innodb_flush_log_at_trx_commit 可能很危险

如果您正在对它进行事务查询，这是您的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:27:57.073

建议：

1）检查日志文件的大小

链接：[MySQL 中有很多“查询结束”状态，所有连接都在几分钟内使用](https://stackoverflow.com/questions/13234290/lots-of-query-end-states-in-mysql-all-connections-used-in-a-matter-of-minutes)

2）确保“id”有一个索引

3) 查看各种 MySql 调优和配置选项。例如：`innodb_flush_log_at_trx_commit = 0`

链接：[“查询结束”步骤随机时间很长](https://stackoverflow.com/questions/6937443/query-end-step-very-long-at-random-times)

警告：在禁用日志刷新之前请仔细考虑。在此处查看更多详细信息：

链接：[https ://dba.stackexchange.com/questions/12611/is-it-safe-to-use-innodb-flush-log-at-trx-commit-2](https://dba.stackexchange.com/questions/12611/is-it-safe-to-use-innodb-flush-log-at-trx-commit-2)

# jquery - 正则表达式中的括号

> ID：15148177
> 
> 赞同：0
> 
> 时间：2013-03-01T00:15:54.573
> 
> 标签：jquery, regex

```
<div class="text">[abc] [abc]</div>
<div class="text">foo</div>
<div class="text">bar</div> 
```

jQuery：

```
var match = '[abc]';
$('div.text:contains(' + match + ')').each(function () {
    $(this).text($(this).text().replace(match, 'xyz'));
}); 
```

**jsFiddle：http:** [//jsfiddle.net/WM6wG/6/](http://jsfiddle.net/WM6wG/6/)

目前，这可行，但似乎与 [abc] 的任何其他实例都不匹配。我被告知在这种情况下使用正则表达式 global，但是在使用`new RegExp(match, 'g');`它时会重复每个字符而不是每个实例`[abc]`

我怎样才能调整这个，所以所有的实例都`[abc]`变成了`xyz`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:20:42.627

使用该`RegExp`方法（因此您可以使用`g`），但将您的字符串更改为`'\\[abc\\]'`.

`[]`是正则表达式中的特殊字符，因此您需要转义它们。（请注意，您还需要转义字符串文字的反斜杠。）

您还可以使用正则表达式文字代替`new RegExp(...)`，如下所示：`/\[abc\]/g`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T00:21:17.953

`\\`将正则表达式构建为字符串时，必须对特殊字符进行双重转义。您可以使用此[解决方案](https://stackoverflow.com/questions/2593637/how-to-escape-regular-expression-in-javascript)或简单地使用文字正则表达式：

```
$(this).text().replace(/\[abc\]/g, 'xyz') 
```

# java - 我收到语法错误，但我不知道为什么

> ID：15148180
> 
> 赞同：-6
> 
> 时间：2013-03-01T00:16:05.860
> 
> 标签：java

我在这个读取方法的第 103 行遇到语法错误，我不知道为什么。让我知道你在想什么。错误是因为**else**，它只是告诉我删除 else，这不是一个可行的解决方案

```
 public void read()
{
    int a = 0;
    int b = 0;
    int c = 0;

    Scanner keyboard = new Scanner(System.in);
    System.out.println("Please enter a quadratic equation in standard format.");
    String formula = keyboard.next();

    int x = formula.indexOf('x');

    if (x < 0)
    {
        c = Integer.parseInt(formula);
    }

    else
    {
        String aa; 
        int x2 = formula.lastIndexOf('x');
        if (x == x2)
        {
            if ((x+1) != formula.length())
            {
                aa = formula.substring(x, (x+3));
            }
            else
            {
                aa = formula;
            }

            if(aa.equalsIgnoreCase("x^2"))
            {
                String aa2 = formula.substring(0, x+3);
                String aaa = formula.substring(0, x);
                if (aa2.equalsIgnoreCase("x^2"))
                        a = 1;
                else
                {
                    a = Integer.parseInt(aaa);
                }
                String cc = formula.substring(x + 3);
                if (cc.equals(""))
                {
                    c = 0;
                }
                else
                {
                    c = Integer.parseInt(cc);
                }
            }
            else
            {
                String bbb = formula.substring(0, x);
                if (x == 0)
                {
                    b = 1;
                }
                else
                {
                    b = Integer.parseInt(bbb);
                }
                String cc = formula.substring(x + 1);
                System.out.println("c = " + cc);
                    if(cc.equals(""))
                    {
                        c = 0;
                    }
                    else
                    {
                        c = Integer.parseInt(cc);
                    }

            }
        }

        else
        {
            String aa2 = formula.substring(0, x +3);
            String aaa = formula.substring(0, x);
                if (aaa.equalsIgnoreCase("x^2"))
                {
                    a = 1;
                }
                else
                {
                    a = Integer.parseInt(aa2);
                }
                    if((x2 + 1) != formula.length())
                    {
                        if(formula.charAt(x2 + 1) == '+');
                        {
                            String cc2 = formula.substring(x2 + 2);
                            c = Integer.parseInt(cc2);
                        }}
                        else if (formula.charAt(x2 + 1) == '-')
                        {
                            String cc2 = formula.substring(x2 + 1); 
                            c = Integer.parseInt(cc2);
                        }

                    }
                **else**
                    {
                        c = 0;

                        if(formula.charAt(x + 3) == '+')
                        {
                            String bb2 = formula.substring((x + 4), x2);
                            b = Integer.parseInt(bb2);
                        }
                        else
                        {
                            String bb2 = formula.substring((x + 3), x2);
                            b = Integer.parseInt(bb2);
                        }

            }
        }

    System.out.println("a = " + a);
    System.out.println("b = " + b);
    System.out.println("c = " + c);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:34:37.790

```
 if(formula.charAt(x2 + 1) == '+');
                    {
                        String cc2 = formula.substring(x2 + 2);
                        c = Integer.parseInt(cc2);
                    }} 
```

if 语句后有一个分号，并用两个括号结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:34:49.380

你有一个额外的`}`角色......

```
if((x2 + 1) != formula.length())
                    {
                        if(formula.charAt(x2 + 1) == '+');
                        {
                            String cc2 = formula.substring(x2 + 2);
                            c = Integer.parseInt(cc2);
                        }} <<<<<< 
```

# yii - YII 在非对象上调用成员函数 getErrors()

> ID：15148181
> 
> 赞同：0
> 
> 时间：2013-03-01T00:16:06.773
> 
> 标签：yii, updatemodel

遵循[本](http://www.yiiframework.com/wiki/19/how-to-use-a-single-form-to-collect-data-for-two-or-more-models/)教程；当我尝试让数据显示在表单中并更新时

因为我的错误是：

```
$n = $this->loadModel($id); 
```

我想用一种形式制作两个模型，这是我的更新代码：

控制器：

```
 public function actionUpdate($id)
{
    $n = new Noticias;
    $m = new Multimedia;

    $this->performAjaxValidation(array($n,$m));
    $n=$this->loadModel($id);

    if(isset($_POST['Noticias'],$_POST['Multimedia']))
    {
        $n->attributes=$_POST['Noticias'];
        $m->attributes=$_POST['Multimedia'];

        $m->ID_NOT=$n->ID;
        $m->setIsNewRecord(false);

        if($n->save())
            $this->redirect(array('admin','id'=>$n->ID));
    }

    $this->render('update',array('n'=>$n,'m'=>$m));
} 
```

更新.php

```
<?php echo $this->renderPartial('_form', array('n'=>$n, 'm'=>$m)); ?> 
```

一些看法

```
//get Multimedia FK
<?php if ($n->isNewRecord==false) { 
    $m=Multimedia::model()->findByPk($n->ID);
} ?>

//Validation
<?php echo $form->errorSummary(array($n,$m)); ?>

//Field FOTO between other
<div class="row">
   <?php echo $form->labelEx($m,'FOTO_URL'); ?>
   <?php echo $form->textField($m,'FOTO_URL',array('size'=>25,'maxlength'=>100)); ?>
   <?php echo $form->error($m,'FOTO'); ?>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:57:23.723

您可以尝试在 Controller 中加载这两个模型（例如在 actionUpdate 中）：

```
public function actionUpdate($id) 
{
   $n = new Noticias;
   $m = new Multimedia;

   $this->performAjaxValidation(array($n,$m));
   $n=$this->loadModelNoticias($id);
   $m=$this->loadModelMultimedia($n->ID);  //just put it here..

   if(isset($_POST['Noticias'],$_POST['Multimedia']))
   {
      $n->attributes=$_POST['Noticias'];
      $m->attributes=$_POST['Multimedia'];

      $m->ID_NOT=$n->ID;
      $m->setIsNewRecord(false);

      if($n->save())
          $this->redirect(array('admin','id'=>$n->ID));
   }

   $this->render('update',array('n'=>$n,'m'=>$m));
} 
```

请注意，您也必须在同一个控制器中定义两个 loadModel 函数。

```
function loadModelNoticias($id){
   $model = Noticias::model()->findByPk($id);
   return $model;
}

function loadModelMultimedia($id){
   $model = Multimedia::model()->findByPk($id);
   return $model;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T21:12:41.803

当 Noticias（即 $n 是新记录）或`$n->ID`在多媒体中找不到时会发生此错误，如果您需要工作，即使它是您可以使用的新记录，您也可以解决此问题。

```
 if ($n->isNewRecord==false) {
    $m=Multimedia::model()->findByPk($n->ID);
}    
else
 $m=new Multimedia; 

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T18:20:06.533

首先 - 不要在视图中加载模型

```
<?php if ($n->isNewRecord==false) { 
    $m=Multimedia::model()->findByPk($n->ID);
} ?> 
```

这部分应该在控制器动作中。确保`$m`并且`$n`是真正的模型。如果`findByPk`上面的语句失败，`$m`will be `null`，所以你会从`errorSummary`which calls `$m->getErrors()`and得到错误`$n->getErrors()`。简而言之 - 确保`$n` **并** `$m`正确初始化 - 两者都必须是模型的实例，要么是空的，要么是从 db 填充的，但在你的情况下，一个是`null`. 最可能`$m`

# php - php PDO插入错误

> ID：15148182
> 
> 赞同：1
> 
> 时间：2013-03-01T00:16:18.737
> 
> 标签：php, mysql, sql, pdo

大家好，我有一个小问题。我是 PDO 的新手，我想在我的网站上实现它，我有以下代码：

```
foreach($liga1 as $item) {
$data = $item->get_date('j M Y, g:i a');
$titlu = $item->get_title();
$link = $item->get_permalink();
$text = $item->get_description();
$cat = "Liga 1";

$dbhost     = "localhost";
$dbname     = "site";
$dbuser     = "root";
$dbpass     = "root";

// database connection
$conn = new PDO("mysql:host=$dbhost;dbname=$dbname",$dbuser,$dbpass);

// query
$sql = "INSERT INTO stiri ('id','data', 'continut', 'link', 'titlu', 'categorie' ) VALUES (:data, :text, :link, :titlu, :categorie)";
$q = $conn->prepare($sql);
$q->execute(array(':data', $data,
                ':continut', $text,
                ':link', $link,
                ':titlu', $titlu,
                ':categorie', $cat));
} 
```

当我运行此代码时，我收到以下错误：

```
Warning: PDOStatement::execute(): SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens in C:\xampp\htdocs\ice\sql\sport2.php on line 50 
```

如您所见，我想在数据库中插入我输入的特定类别，我在 mysql 表中也有“id”，我不知道如何使用 PDO 插入它。我也想在这里使用类，因为我需要将相同的代码放在 20 多页上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:18:03.043

问题是您定义了 5 列，但您只提供了四个值。如果列名`ID`设置为`AUTO_INCREMENT`ed 列，则可以从列列表中省略它，例如。

```
INSERT INTO stiri (data, continut, link, titlu, categorie ) VALUES (...) 
```

很快就会出现错误的另一个原因是您使用单引号将列名括起来。它将列名转换为字符串，这就是查询失败的原因。为了解决问题，请删除它们周围的单引号。

```
INSERT INTO stiri (id,data, continut, link, titlu, categorie ) VALUES (...) 
```

*   [MySQL - 何时使用单引号、双引号和反引号？](https://stackoverflow.com/questions/11321491/mysql-when-to-use-single-quotes-double-quotes-and-backticks)

**更新 1**

```
$sql = "INSERT INTO stiri (data, continut, link, titlu, categorie) VALUES (?, ?, ?, ?, ?)";
$q = $conn->prepare($sql);
$q->bindParam(1, $data);
$q->bindParam(2, $text);
$q->bindParam(3, $link);
$q->bindParam(4, $titlu);
$q->bindParam(5, $cat);
$q->execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T00:37:34.923

你错过了 :text 。您需要为其添加另一个参数。您将其命名为 contuit 并告诉 pdo 期望 :text

# git - 如何在没有 DVCS 版本信息的情况下嵌入它

> ID：15148184
> 
> 赞同：2
> 
> 时间：2013-03-01T00:16:23.527
> 
> 标签：git, version-control, mercurial, cmake, software-distribution

在我的构建系统中，每次运行新构建时，我都会将当前提交的修订和哈希信息保存在几个变量中，并在我的源代码中使用它们而不会出现问题。例如，窗口标题的格式类似于“NAME-REVISION-HASH”。

唯一的问题是，有时人们通过下载不包含提交信息的标准源来构建项目，因此修订和哈希都是 0ed。

可以做些什么来防止这种情况发生？添加包含此类信息的单独文件违背了使用分布式版本控制系统的优势，因为它需要在每次提交时手动更新......

有没有办法让没有 dvcs 的人获得正确的修订和哈希信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:35:40.750

> 添加包含此类信息的单独文件会破坏使用分布式版本控制系统的优势

怎么回事？“人们通过下载标准源来构建项目......”因为他们没有任何 VCS，还有一个文件“无视”任何东西

> 因为它需要在每次提交时手动更新

什么？带有专门准备的关键字（或文本常量）的自动提交文件不是一个大问题，至少对于 Mercurial 而言

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T01:11:53.970

您可以使用`git describe`来获取唯一的字符串，然后您可以将其包含在您的构建中。`git`它自己这样做是为了设置它的版本（`git version`这里返回`git version 1.8.2.rc1.19.g443d803`，即 1.8.2-rc1 + 19 次提交，最新提交有 SHA1 443d803e0dacd0a1c6700503689f3cd95751aba1;`git describe`返回`v1.8.2-rc1-19-g443d803`）。

从 SCCS 时代开始，就出现了扩展`$Id:$`和其他关键字结构的习惯，这在 VCS 只处理单个文件的时代非常有意义；今天是退化的（并且`git`根本不做任何“关键字扩展”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T10:21:07.847

从[另一个问题](https://stackoverflow.com/a/5022854/32043)：

> 到目前为止，Git 中已经支持 $Id:$。要为文件 *README*启用它，您可以将“README ident”放入*.gitattributes*。支持文件名上的通配符。有关详细信息，请参阅[man gitattributes](http://git-scm.com/docs/gitattributes)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T01:36:12.403

如果您使用 Mercurial 生成档案，它已经为您处理好了。该`hg archive`命令为 Web UI tarball / zip 下载提供动力，它自动包含一个`.hg_archival.txt`文件，如下所示：

```
repo: 0339f7b37c3416248e4e0b183a481aa40ade150e
node: 0339f7b37c3416248e4e0b183a481aa40ade150e
branch: default
latesttag: null
latesttagdistance: 1 
```

因此，您的代码可以使用首先检查本地存储库以获取版本信息的逻辑，如果不存在则查找`.hg_archival.txt`文件。如果您要标记发布，则 and 特别方便`latesttag`。`latesttagdistance`您可以使用它们来构建对人类和 DVCS 都有用的版本字符串，例如：

```
2.0.1-5-40ade150e 
```

可以理解为“自 2.0.1 版以来的五次提交，哈希值为 40ade150e”

# ruby-on-rails - 在 Rails 和 Symfony 应用程序之间共享会话？

> ID：15148188
> 
> 赞同：2
> 
> 时间：2013-03-01T00:16:42.467
> 
> 标签：ruby-on-rails, session, symfony, session-cookies, sessionid

我正在构建一个 Rails 应用程序，它将存在于 Symfony 2 应用程序 (PHP) 的子域中。它们将被相同类型的用户使用，因此我们希望他们在应用程序之间来回切换，理想情况下只登录一次。

我已经看到[了一些](https://stackoverflow.com/questions/10402777/share-session-cookies-between-subdomains-in-rails)关于如何在相同类型的应用程序的子域之间共享会话的解决方案，但没有在 Symfony 和 Rails 之间共享会话的解决方案。是否可以？

我特别感兴趣的是 Rails session_store 可以使用数据库后端——默认是 cookie。这让我想知道如果两个应用程序都使用数据库后端，它们是否能够共享会话？

如果可以的话，我可以使用哪些其他替代方法来完成这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T00:24:18.920

当然有可能，但我不知道您需要投入多少工作；）

最主要的是会话ID。这一切都取决于此。您必须使两个应用程序使用相同的会话存储，否则这是不可能的。

`SessionId`只要两个应用程序都使用它，将其存储在数据库、文件（会很慢）或其他地方都没有关系。

正如您所提到的，Rails 开箱即用地支持数据库内的会话。Rails 中还有另一种方式：Memchached Storage。它或多或少是一个自己的数据库，针对快速键值查找进行了优化。

所以你应该看看是否有一个 Symfony 插件支持数据库或 Memcache 存储中的 SessionId。

看看这里：[http ://watsonbox.github.com/blog/2012/05/01/sharing-session-between-rails-and-php/](http://watsonbox.github.com/blog/2012/05/01/sharing-session-between-rails-and-php/)

* * *

忘了提一下：两个应用程序还必须在 cookie 中使用相同的 SESSION_ID 名称；）

# javascript - jQuery UI accordion plugin and show hide toggle activates on all accordion divs

> ID：15148191
> 
> 赞同：1
> 
> 时间：2013-03-01T00:16:49.720
> 
> 标签：javascript, jquery, performance, jquery-ui

Hello Stack Overflow contributors,

I am using the jQuery UI plugin for the [accordion](http://jqueryui.com/accordion/). I also have a show hide function. When a user selects an accordion header item the div slides the content open correctly. I have a paragraph of content and then a show hide toggle for "Read more" and "Hide".

My problem is when someone makes their accordion selection to see the available content and clicks "Read more" then decides to click another accordion selection with out clicking "Hide" the next slide has the "Read more" content visible but now says "Read more" instead of "Hide".

What I would like to accomplish is to have each accordion selection "Read more" to work as intended with out it effecting multiple accordion selections. If you have suggestions to minimize the show hide toggle also that would be great. Thank you in advance!

The code is as follows:

```
<link rel="stylesheet" href="../css/style.css">

    <div id="accordion2">
      <h4>Accordion selection 1</h4>
      <div>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        <div class="slidingDiv">
          <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        </div>
        <p><a href="#" class="show_hide" >Read more</a></p>
      </div>
       <h4>Accordion selection 2</h4>
      <div>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        <div class="slidingDiv">
          <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        </div>
        <p><a href="#" class="show_hide" >Read more</a></p>
      </div>
       <h4>Accordion selection 3</h4>
      <div>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        <div class="slidingDiv">
          <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        </div>
        <p><a href="#" class="show_hide" >Read more</a></p>
      </div>
    </div>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script> 

    <script>
    <!-- SHOW HIDE MORE --> 
    $(document).ready(function(){

        $(".slidingDiv").hide();
        $(".show_hide").show();

        $('.show_hide').toggle(function(){
         $(this).text('Read more');
        $(".slidingDiv").slideToggle();
         $(this).text('Hide'); 
         $(this).text('Hide');
    }, function() {
        $(".slidingDiv").slideToggle();
         $(this).text('Read more'); 
        });
    </script>

    <script>
    $(function() {
    $( "#accordion2" ).accordion({
    heightStyle: "content",
    });
    });
    </script> 
```

Thank you to Leeish I added the following:

```
 activate: function( event, ui ) {
          $(".slidingDiv").slideToggle();
$('.show_hide').text('Read more');
          } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:21:19.897

It looks like your accordian plugin has an activate event. [http://api.jqueryui.com/accordion/#event-activate](http://api.jqueryui.com/accordion/#event-activate) This event is fired when a panel has been activated. You need to hide your content when the activate event is fired.

# android - 如何获得比 TOP 命令更高的“CPU%”精度？

> ID：15148193
> 
> 赞同：12
> 
> 时间：2013-03-01T00:17:01.843
> 
> 标签：android, linux, cpu-usage

当我使用 TOP 命令时，我可以获得以下信息：

```
shell@android:/ $ top -n 1                                                     

User 31%, System 10%, IOW 0%, IRQ 0%
User 346 + Nice 10 + Sys 120 + Idle 637 + IOW 6 + IRQ 0 + SIRQ 2 = 1121

  PID PR CPU% S  #THR     VSS     RSS PCY UID      Name
  481  1  26% S    89 762832K  81688K  fg system   system_server
 1699  0   5% S    27 676472K  39092K  fg u0_a72   wm.cs.systemmonitor
11243  0   3% S    28 673140K  29796K  bg u0_a111  com.weather.Weather
13327  2   1% S    23 680472K  35844K  bg u0_a83   com.rhmsoft.fm
  659  0   1% S    17 663044K  33136K  bg u0_a13   android.process.media
20260  1   0% R     1   1208K    508K     shell    top 
```

我们可以看到它`CPU%`是四舍五入到整数，有什么方法可以得到`CPU%`更高精度的过程吗？

**-- 对赏金的澄清 --** *[亚历克斯](https://stackoverflow.com/users/192373/alex-cohn)*

该问题涉及Android系统，最好是非root设备。虽然 Android 为 Java 应用程序提供了高级分析技术，但用于本机代码 (C++) 的工具是有限的。**Android 上的top**命令允许显示系统中运行的所有线程的统计信息，包括 Java 线程和 C++ 线程。我正在寻找一个有助于完成以下任务的答案：

*我的应用在后台不活动时使用 2% 的 CPU，而它应该低于 0.1%。如果我运行*`top -t`*，对于属于我的进程的所有 15 个线程，我得到 0%（一些线程是 Java 线程，例如 Main、UI 线程；其他是从不附加到 JVM 的 pthread）。我怎么能猜出哪个线程吃掉了电池？*

我很高兴能获得有关此意外活动的更多详细信息，并且 Android为 Java 线程提供了很好的帮助程序，例如[TraceView 。](http://developer.android.com/tools/debugging/debugging-tracing.html)任何有关本机代码工具的见解都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-01T13:12:32.807

您在帖子中没有提到它，但在评论中您说您确实需要每个线程而不是每个进程的 CPU 利用率。

如果找不到足够准确的工具，可以`/proc/[pid]/task/[ThreadName]`按照[手册页中的说明直接查看`/proc`](http://man7.org/linux/man-pages/man5/proc.5.html). 这给出了自执行开始以来在“时钟滴答”中消耗的总 CPU 时间。获得比这更好的分辨率可能很困难或不可能。

**编辑**

从OP的评论中，列出相关信息的命令是：

```
adb shell cat /proc/${pid}/task/*/stat | awk -F\ '{print $1, $14}' 
```

这只是向调试主机发送`cat`正确的`/proc`文件，该主机运行一个小`awk`程序来打印 和 的`pid`列`user time`。如果不可用，您也可以轻松使用`cut -d " " -f1,14`或类似的东西`perl`来获取列。`awk`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-27T08:00:22.987

试试这个：

```
ps -eo pcpu,pid,user,args | sort -r -k1 | less 

%CPU   PID USER     COMMAND
 9.0  2721 user   bash
 1.4   956 root     ...
 0.5  2212 user   ... 
```

编辑：

您可以使用 adb shell 和 busybox ( [http://www.busybox.net/downloads/BusyBox.html](http://www.busybox.net/downloads/BusyBox.html) )

adb shellbusybox 顶部

```
c:\ adb push busybox /system/bin
c:\ adb shell
# busybox top 

CPU:  2.3% usr  3.1% sys  3.9% nic 90.5% idle  0.0% io  0.0% irq  0.0% sirq
Load average: 1.06 1.66 10.63 1/589 8048
←[7m  PID  PPID USER     STAT   VSZ %MEM CPU %CPU COMMAND←[0m
31619  2180 10112    S     217m 67.0   0  3.8 com.mgeek.android.DolphinBrowser.B

 2232  2180 1000     S     551m169.6   0  2.6 system_server
 8038  8037 0        R     2068  0.6   0  0.8 busybox top
 2178     1 0        S    11092  3.3   0  0.6 /system/bin/drexe
 6812  2180 10104    S     199m 61.2   0  0.5 android.tether
 2291  2180 1001     S     324m 99.8   0  0.3 com.android.phone
 2308  2180 10006    S     325m100.0   0  0.1 com.sec.android.app.dialertab
 2177     1 1001     S     9624  2.8   0  0.1 /system/bin/rild
    5     2 0        SW<      0  0.0   0  0.1 [events/0]
30087  2180 10022    S     358m110.4   0  0.0 com.samsung.vvm
 2304  2180 10006    S     311m 96.0   0  0.0 com.sec.android.app.twlauncher
16110  2180 10006    S     296m 91.3   0  0.0 android.process.acore
 2445  2180 10006    S     272m 83.8   0  0.0 com.sec.android.provider.logsprovi

 8064  2180 10002    S     238m 73.4   0  0.0 com.google.process.gapps
31537  2180 10037    S     227m 69.9   0  0.0 com.google.android.gm
 2288  2180 10048    S     221m 68.1   0  0.0 com.swype.android.inputmethod
 2285  2180 10013    S     215m 66.3   0  0.0 com.tat.livewallpaper.aurora
30664  2180 10011    S     213m 65.8   0  0.0 com.android.email
31191  2180 10099    S     209m 64.4   0  0.0 com.sirma.mobile.bible.android
 2377  2180 10087    S     207m 63.9   0  0.0 android.tts 
```

（取自[这里](http://www.galaxyforums.net/forum/samsung-fascinate-hacking/188-top-wtih-busybox.html)）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-27T12:09:25.207

从另一个[线程](https://stackoverflow.com/questions/11201659/android-adb-shell-dumpsys-tool)得到这个信息：

3) 获取 CPU 信息

*~$ adb shell dumpsys cpuinfo*

**输出：**

负载：0.08 / 0.4 / 0.64 CPU 使用率从 42816 毫秒到 34683 毫秒前：system_server：1% = 1% 用户 + 0% 内核/故障：16 次要 kdebuglog.sh：0% = 0% 用户 + 0% 内核/故障：160次要 tiwlan_wq: 0% = 0% 用户 + 0% 内核 usb_mass_storag: 0% = 0% 用户 + 0% 内核 pvr_workqueue: 0% = 0% 用户 + 0% 内核 +sleep: 0% = 0% 用户 + 0% 内核+sleep: 0% = 0% user + 0% kernel TOTAL: 6% = 1% user + 3% kernel + 0% irq

**编辑：**

你也可以试试这个命令：`echo $(adb shell ps | grep com.android.phone | awk '{ system("adb shell cat /proc/" $2 "/stat");}' | awk '{print $14+$15;}')`

还：

使用 top ：这将显示 cpu 统计信息 `top -b -n 1 |grep ^Cpu`

使用 ps：这将显示每个进程的 % cpu 使用率。 `ps -eo pcpu,pid,user,args | sort -r -k1 | less`

**编辑2：**

根据您的评论和赏金描述（我怎么能猜出哪个线程吃掉了电池？）我发现了一个有趣的页面：

[http://ziyang.eecs.umich.edu/projects/powertutor/](http://ziyang.eecs.umich.edu/projects/powertutor/)

如那里所述：

> 您可以使用 PowerTutor 监控任何应用程序的功耗。

试一试，看看它是否符合您的要求。

**最终编辑：**

查看 developer.android.com 网站上的 Systrace 文档：

[http://developer.android.com/tools/debugging/systrace.html](http://developer.android.com/tools/debugging/systrace.html) [http://developer.android.com/tools/help/systrace.html](http://developer.android.com/tools/help/systrace.html)

如果您已经尝试过，我很抱歉，但这是衡量性能的一种具体方法。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-06-29T13:49:51.263

使用**DDMS**和方法分析来获取**TraceView**。

基本上：

1.  在调试模式下启动您的应用
2.  在 DDMS 中，在“设备”选项卡中，单击“开始方法分析”
3.  在您的设备上做一些事情以重新创建您想要监控的条件
4.  单击“停止方法分析”
5.  您将获得一个相当详细的图表，其中包含每个线程的执行情况，您可以深入了解

更多细节在这里：http: [//developer.android.com/tools/debugging/debugging-tracing.html](http://developer.android.com/tools/debugging/debugging-tracing.html)

**免责声明**：我只用一个简单的测试应用程序完成了这个，所以我不知道你会从中获得多少里程。它似乎确实比迄今为止描述的更精确，并且不需要root。

![在此处输入图像描述](../Images/72b5c4e44dfaec1fff761d17c7235204.png)

# sql - Visual Studio SQL Server 对象资源管理器不保存连接

> ID：15148194
> 
> 赞同：6
> 
> 时间：2013-03-01T00:17:08.147
> 
> 标签：sql, visual-studio-2012

我正在使用 Visual Studio 2012 进行开发。我真的很喜欢使用 SQL Server 对象资源管理器来处理与数据库相关的任务（查询、架构更改等）。问题是，每次我重新加载 IDE 时，我都必须连接到我使用的数据库。有没有办法像使用服务器资源管理器选项卡一样保留数据库列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-06T20:00:13.350

当您说您无法复制时，您使用资源管理器尝试复制它有多久了？它只是时不时地失去连接，所以事实上现在我也无法复制它，但在接下来的几天里，我相信它们会再次被重置！

> > 您的 VS IDE 似乎有问题

这似乎有点不太可能，因为当我在 Win 8 Release Preview 上运行 VS 2012 beta 时也发生了同样的事情。

但是我会尝试你的建议，我会看看会发生什么，只是为了澄清你是说我运行这些命令一次，然后像往常一样使用 VS 还是你说我一直尝试在安全模式下运行？

重置设置是否与导入和导出设置->重置所有设置菜单项相同？（顺便说一下，我使用一般开发设置运行）

任何人都知道这些连接设置实际存储在哪里（注册表，文件夹......）？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-19T20:11:34.517

打开VS。不要打开任何项目或解决方案。在服务器资源管理器中添加您的数据库。然后文件->全部保存

# java - libGDX 坐标系

> ID：15148198
> 
> 赞同：1
> 
> 时间：2013-03-01T00:17:28.270
> 
> 标签：java, 2d, libgdx, projection

我正在尝试正确配置 libGDX 中的 my`Camera`和`Sprite`s 以正确显示在 2D 坐标系中，原点位于左下角。

我`Camera`这样设置：

```
cameraWidth = Gdx.graphics.getWidth();
cameraHeight = Gdx.graphics.getHeight();
camera = new OrthographicCamera(1, cameraHeight/cameraWidth); 
```

我这样设置我`Sprite`的：

```
sprite.setOrigin(sprite.getWidth()/2, sprite.getHeight()/2);
sprite.setScale(scale);
sprite.setPosition(startX,startY); 
```

我的问题是`sprite.setSize(x,y)`. 如果我将所有精灵的大小设置为`(1, texture aspect ratio)`，则所有内容都以正确的显示比例绘制（不被弄脏或拉伸），但没有任何东西绘制在正确的位置。例如，如果我在 (0,0) 处绘制一些东西，它的左下角会离开屏幕左侧并向上绘制多个像素。

我注意到通过改变比率，我可以让东西在不同的地方绘制——也就是说，如果我将它设置为`(1, display aspect ratio)`看起来非常接近在正确位置绘制的东西——它们只是从中心绘制，而不是从左下角绘制，因为LibGDX 指定。唯一的问题是图像都显示为模糊或拉伸，这是不好的。

这似乎是一个简单的问题，我只想知道如何设置它，这样我就可以拥有一个合理的坐标系，将事物绘制在正确的位置和正确的纵横比。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:04:50.317

一旦您更改视口以匹配屏幕的纵横比，那么 (0, 0) 将不再位于屏幕的左下方，除非屏幕是方形的。如果屏幕的宽度大于高度，那么 x 轴的可见部分仍会从 0.0 变为 1.0，但 y 轴上的 0.0 现在将位于屏幕底部的某个位置。

如果您调整相机使 (0, 0) 位于屏幕的左下角，并记住可见的 y 轴只会上升到*grapicsHeight / graphicsWidth*那么这应该可以解决您的坐标问题。

我建议将相机设置为指向屏幕中间而不是左下角。[这里](http://pastebin.com/tY7y4Q5b)有一个例子就是这样做的，画一个 2:1 的矩形，它总是在屏幕的中心，无论你调整多少，总是以 2:1 的比例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T01:29:35.837

我找到了解决这个问题的方法：

将相机设置为正交（即使它已经是正交相机）

```
camera.setToOrtho(false,1,screen height / screen width); 
```

此外，每个精灵必须将其位置设置为`(x - sprite.getWidth()/2, y - sprite.getHeight()/2`。我扩展了`Sprite`类并覆盖了`setPosition`方法来解决这个问题。现在，每次设置位置时，`Sprite`s 最终都会转到您“认为他们会去的地方”，`setPosition(0,0)`并将其放在左下角和`setPosition(1,height/width)`左上角。

奇怪的是，这会绘制以 (x,y) 点为中心的每个精灵，这是有道理的，因为从位置中减去了 width/2 和 height/2，除了*不*减去这些值不会使`setPosition`精灵通过左下角居中角落 - 它以我还没有弄清楚的方式居中。

# php - -PHP 正则表达式或 strpos() 在我的情况下？

> ID：15148200
> 
> 赞同：0
> 
> 时间：2013-03-01T00:17:34.640
> 
> 标签：php, regex, strpos

我的问题是：

**输入：**数千个缩写消息。

**输出：**过滤后的消息

**过滤器：**（（消息有警报）或（消息有紧急情况））和（消息没有恢复）

**例子：**

1.  Ur001 普通用户按用户打开（真）

2.  恐慌区警报安全系统 Zn2 区 2 名称（假）

3.  键盘应急安全系统 Ur1 Uer 1 名称（假）

4.  键盘紧急恢复安全系统 Ur1 Uer 1 名称 (True)

我知道他们的情况有很多类似的问题。哪种方式更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T00:23:02.313

由于您的搜索词是已知的 ( `"Alarm"`, `"Emergency"`, `"Restore"`) 正则表达式是一个糟糕的选择。您应该为此使用`strpos`（或`stripos`忽略大写）。

话虽如此，如果您想将这些单词作为实际单词而不是子字符串进行搜索（即，您不想`"Restored"`触发`"Restore"`匹配，那么您别无选择，只能使用正则表达式。在这种情况下，`\b`请在单词之前和之后放置找到他们。像这样的东西：

```
if(preg_match("/\b(?:Alarm|Emergency)\b/i",$str) && !preg_match("/\bRestore\b/i",$str)) 
```

如果您特别想要大写，请删除`i`修饰符。

# xpath - XPath HTML 查找节点

> ID：15148201
> 
> 赞同：0
> 
> 时间：2013-03-01T00:17:39.813
> 
> 标签：xpath, html-agility-pack

我正在使用 HtmlAgilityPack 尝试查找具有包含特定字符串的 href 属性的 HTML 'A' 节点，在我的例子中是字符串'/groups/'：

```
HtmlNodeCollection groups = source.DocumentNode.SelectNodes("//a[contains(@href, '/groups/')]"); 
```

尽管源代码包含大约 20 个这样的节点，但我上面的代码没有返回任何内容，这让我相信我可能做错了。

我所做的是否正确，如果不是，我如何选择具有某个属性的节点，该属性的值包含某个字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:23:18.237

你的表达对我来说似乎是正确的。

您不会发布您的源文档（或至少是其中的一部分）。所以，我会猜的。

问题是，xpath 对于不区分大小写的比较并不酷。如果您的`<a>`标签的 `href`属性包含 eg`/Groups/`或`/GROUPS/`，则不会匹配。有一个[解决方法](https://stackoverflow.com/a/8474109/102112)：

`//a[contains(translate(@href, 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), '/groups/')]`

作为另一种选择，您可以将 LINQ 与`StringComparison.OrdinalIgnoreCase`：

```
source.DocumentNode.Descendants("a")
    .Where(a => a.GetAttributeValue("href", string.Empty)
                   .IndexOf("/groups/", StringComparison.OrdinalIgnoreCase) != -1
); 
```

# python - 偶数检查没有：如果

> ID：15148202
> 
> 赞同：0
> 
> 时间：2013-03-01T00:17:46.153
> 
> 标签：python, numbers

有没有办法在不使用：if 的情况下检查列表中的偶数？

这是我在使用 if 时所拥有的：

```
import numbers

numbers = [ 1, 2, 3, 4, 5, 6, 7, 8, 9,10,11,12,13,14,15,
           16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]

def even_list(numbers):
for i in range(len(numbers)):
    if i % 2 == 0:
    #while i !=(i / 2):
        print(i)
return i

numbers = even_list(numbers) 
```

现在从逻辑上讲这是有道理的，但我不知道除了 if 之外的任何其他方式。如您所见，我尝试在那里使用while，并且程序在运行时继续循环1。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T00:19:23.993

您可以使用两个列表，一个用于偶数，一个用于赔率：

```
evens = []
odds = []
out = [evens,odds]
for elem in numbers:
    out[elem%2].append(elem)

print evens 
```

或者你可以结束：

```
for even in evens:
    print even 
```

模拟您当前拥有的相同输出风格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T00:19:55.247

嗯

```
def even(numbers):
   return filter(lambda n:n%2==0,numbers) 
```

或麻木的

```
import numpy
a = numpy.arange(100)
print a[a%2==0] 
```

或集合操作（​​我认为*唯一*不使用条件的操作......但您需要了解集合，否则您可能无法获得预期的行为，或者它可能不适用于您的数据集）

```
def evens(numbers):
    all_evens = set(range(0,max(numbers),2)
    return all_evens.intersection(numbers) 
```

另一种检查均匀度的方法是

```
not my_test_number&1 
```

（我怀疑这个检查比 快`i%2`，但不确定）

# c# - 匹配具有相同实例名称的 2 个不同对象

> ID：15148204
> 
> 赞同：4
> 
> 时间：2013-03-01T00:17:55.430
> 
> 标签：c#, .net

我想知道是否可以将对象与其**实例名称**匹配。

我有 ：

```
class AnimatedEntity : DrawableEntity
{
    Animation BL { get; set; }
    Animation BR { get; set; }
    Animation TL { get; set; }
    Animation TR { get; set; }
    Animation T { get; set; }
    Animation R { get; set; }
    Animation L { get; set; }
    Animation B { get; set; }

    Orientation orientation ;

    public virtual int Draw(SpriteBatch spriteBatch, GameTime gameTime)
    {
        //draw depends on orientation
    }
} 
```

和

```
enum Orientation { 
    SE, SO, NE, NO, 
    N , E, O, S, 
    BL, BR, TL, TR, 
    T, R, L, B 
} 
```

Orientation 是一个枚举，Animation 是一个类。

我可以用相同的名称从方向调用正确的动画吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T00:41:58.260

与其将动画存储在属性中，不如使用字典？

```
Dictionary<Orientation, Animation> anim = new Dictionary<Orientation, Animation> {
    { Orientation.BL, blAnimation },
    { Orientation.BR, brAnimation },
    { Orientation.TL, tlAnimation },
    { Orientation.TR, trAnimation },
    { Orientation.T, tAnimation },
    { Orientation.R, rAnimation },
    { Orientation.L, lAnimation },
    { Orientation.B, bAnimation }
}; 
```

然后您可以使用`anim[orientation]`来访问相应的动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T01:05:58.433

确实 a`Dictionary`将是一个不错的选择。`Animation`如果动画是从外部设置的，它甚至可以有一个索引：

```
class AnimatedEntity : DrawableEntity
{
    Dictionary<Orientation, Animation> Animations { get; set; }

    public AnimatedEntity()
    {
        Animations = new Dictionary<Orientation, Animation>();
    }

    public Animation this[Orientation orientation] 
    { 
        get{ return Animations[orientation]; }
        set{ Animations[orientation] = value;}
    }

    Orientation Orientation { get; set; }

    public void Draw(SpriteBatch spriteBatch, GameTime gameTime)
    {
        Animation anim = Animations[Orientation];
    }
} 
```

会像这样使用：

```
AnimatedEntity entity = new AnimatedEntity();
entity[Orientation.B] = bAnimation;
entity[Orientation.E] = eAnimation;
entity[Orientation.SE] = seAnimation; 
```

# avisynth - avs2avi 剥离音频通道？

> ID：15148210
> 
> 赞同：1
> 
> 时间：2013-03-01T00:18:11.170
> 
> 标签：avisynth

我正在尝试使用我编写的命令行向导构建视频。为此，我正在构建一个 AVISynth 文件（在本例中是一个巨大的 1,820 行、94Kb 文件）并用于`avs2avi`渲染它。

它工作得很好，但由于某种原因它不保存音频。

这是我的 AVS 的总体布局：

```
# lots of code to generate the video here
vid = titles+main+ending
aud = WAVSource("render.wav")
AudioDub(vid,aud) 
```

它在媒体播放器、音频和所有设备中都能正常播放。但是使用这个命令行：

```
avs2avi render.avs render.avi -c XVID 
```

它在没有任何声音的情况下渲染视频。同样，如果我删除`-c XVID`参数，我会得到一个对话框，询问我压缩格式，但我仍然没有声音。

什么给了，我该如何解决这个问题？我看到的唯一选择是使用 VirtualDub 之类的东西将音轨放回原处，但这似乎很麻烦。

* * *

编辑：它也不适用于简单的脚本。

```
BlankClip(length=100,width=256,height=256,fps=25).AudioDub(WAVSource("beep.wav")) 
```

在媒体播放器中产生声音，并通过`avs2avi`.

# css - 用纯 CSS 复制阴影

> ID：15148214
> 
> 赞同：-1
> 
> 时间：2013-03-01T00:18:41.223
> 
> 标签：css

我需要像上图那样做一个阴影效果。我更喜欢css，所以我正在尝试这段代码，但（平滑）边框并不相同。有什么最好的方法吗？

[演示](http://jsfiddle.net/5vtDy/2/)

```
<div class="box"></div>

.box {
    height: 1px;
    width: 13em;
    -moz-border-radius: 5px;
    border-radius: 5px;
    background-color:#191919;
    -moz-box-shadow: 0 0 3px 3px #191919;
    -webkit-box-shadow: 0 0 3px 3px #191919;
    box-shadow: 0 0 3px 3px #191919;
} 
```

![在此处输入图像描述](../Images/df9ceb4a121b392a5f3c91fac942c813.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:31:08.653

[http://jsfiddle.net/SG9pd/](http://jsfiddle.net/SG9pd/)

```
div {
    background: -moz-radial-gradient(center, ellipse cover, rgba(0,0,0,0.65) 0%, rgba(0,0,0,0) 60%, rgba(0,0,0,0) 100%); /* FF3.6+ */
    background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,rgba(0,0,0,0.65)), color-stop(60%,rgba(0,0,0,0)), color-stop(100%,rgba(0,0,0,0))); /* Chrome,Safari4+ */
    background: -webkit-radial-gradient(center, ellipse cover, rgba(0,0,0,0.65) 0%,rgba(0,0,0,0) 60%,rgba(0,0,0,0) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-radial-gradient(center, ellipse cover, rgba(0,0,0,0.65) 0%,rgba(0,0,0,0) 60%,rgba(0,0,0,0) 100%); /* Opera 12+ */
    background: -ms-radial-gradient(center, ellipse cover, rgba(0,0,0,0.65) 0%,rgba(0,0,0,0) 60%,rgba(0,0,0,0) 100%); /* IE10+ */
    background: radial-gradient(ellipse at center, rgba(0,0,0,0.65) 0%,rgba(0,0,0,0) 60%,rgba(0,0,0,0) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#a6000000', endColorstr='#00000000',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */
    width: 300px;
    height: 20px;
} 
```

使用：http: [//www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T06:13:15.213

此处仅使用 css 是您的解决方案的链接

用于演示

```
visit http://jsfiddle.net/a92My/ 
```

# clojurescript - 在 Clojurescript 中查找符号和命名空间

> ID：15148216
> 
> 赞同：1
> 
> 时间：2013-03-01T00:18:49.693
> 
> 标签：clojurescript

Clojurescript 中是否有等效的方法来获取 ns-map、ns-public 等并找到可用的命名空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:58:43.597

It looks there isn't, apart from using goog.globals via Javascript

# ios - AFNetworking 自签名证书 iOS 5.1 与 6.1

> ID：15148217
> 
> 赞同：0
> 
> 时间：2013-03-01T00:18:51.920
> 
> 标签：ios, objective-c, https, afnetworking

我正在将 AFNetworking 与 iPad 应用程序一起使用，以使用带有自签名证书的 https 连接到服务器。

在我运行 iOS 6.1 的设备上一切正常，但是当我们在 iOS 5.1 模拟器和 5.1 设备上进行测试时，我得到 403 响应。

我们尝试过：

```
#define _AFNETWORKING_ALLOW_INVALID_SSL_CERTIFICATES_ 
```

和：

```
[operation setAuthenticationAgainstProtectionSpaceBlock:^BOOL(NSURLConnection *connection, NSURLProtectionSpace *protectionSpace) {
    return YES;
}]; 
```

正如其他地方所建议的那样，但这些仍然给出了同样的错误。这是发送到 AFHTTPRequestOperation 的失败块的错误的 nslog：

```
Error Domain=AFNetworkingErrorDomain Code=-1011 "Expected status code in (200-299), got 403" UserInfo=0x10337330 {NSLocalizedRecoverySuggestion=<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<HTML><HEAD><TITLE>The page cannot be displayed</TITLE>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<STYLE type="text/css">
  BODY { font: 8pt/12pt verdana }
  H1 { font: 13pt/15pt verdana }
  H2 { font: 8pt/12pt verdana }
  A:link { color: red }
  A:visited { color: maroon }
</STYLE>
</HEAD><BODY><TABLE width=500 border=0 cellspacing=10><TR><TD>

<h1>The page cannot be displayed</h1>
You have attempted to execute a CGI, ISAPI, or other executable program from a directory that does not allow programs to be executed.
<hr>
<p>Please try the following:</p>
<ul>
<li>Contact the Web site administrator if you believe this directory should allow execute access.</li>
</ul>
<h2>HTTP Error 403.1 - Forbidden: Execute access is denied.<br>Internet Information Services (IIS)</h2>
<hr>
<p>Technical Information (for support personnel)</p>
<ul>
<li>Go to <a href="http://go.microsoft.com/fwlink/?linkid=8180">Microsoft Product Support Services</a> and perform a title search for the words <b>HTTP</b> and <b>403</b>.</li>
<li>Open <b>IIS Help</b>, which is accessible in IIS Manager (inetmgr),
 and search for topics titled <b>Configuring ISAPI Extensions</b>, <b>Configuring CGI Applications</b>, <b>Securing Your Site with Web Site Permissions</b>, and <b>About Custom Error Messages</b>.</li>
<li>In the IIS Software Development Kit (SDK) or at the <a href="http://go.microsoft.com/fwlink/?LinkId=8181">MSDN Online Library</a>, search for topics titled <b>Developing ISAPI Extensions</b>, <b>ISAPI and CGI</b>, and <b>Debugging ISAPI Extensions and Filters</b>.</li>
</ul>

</TD></TR></TABLE></BODY></HTML>
, AFNetworkingOperationFailingURLResponseErrorKey=<NSHTTPURLResponse: 0x875be10>, NSErrorFailingURLKey=..., NSLocalizedDescription=Expected status code in (200-299), got 403, AFNetworkingOperationFailingURLRequestErrorKey=<NSMutableURLRequest ...>} 
```

我已将 URL 替换为“...”

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:19:44.703

修复了设置我的 NSMutableURLRequest 的 HTTP 方法时的问题

```
[request setHTTPMethod:@"POST"]; 
```

我没有大写“POST”……显然这是 5.x 的问题，但不是 6.x

# php - API 组件分离

> ID：15148218
> 
> 赞同：1
> 
> 时间：2013-03-01T00:18:56.077
> 
> 标签：php, api

我是 API 编程领域的新手，目前我只是在做一个小项目，我一边写一边学习，所以请耐心等待。

我不确定为多个不同功能实现 API 的最佳方式。目前我只有一个我运行的测试脚本和一个 apache 重定向，它将 /api 下的任何内容重定向到这个脚本，称之为 TestAPI.php （所以 /api/anything 将重定向）。我将 API 的路径变量传递给脚本（因此在该示例中，路径将是“任何东西”）。

目前我只是为了一个目的而写它，根据路径查找一些数据，并最终使用 PUT/DELETE 等更新和删除等（它是 restISH 而不是 restFUL）。这在一切都重定向到这个脚本的那一刻很好，但是如果我需要 2 个不同的函数呢？所以我想查找不同的数据集？因此，例如现在 /api/data1 将进入第一个集合，而 /api/data2 将进入第二个集合。这是我开始不确定的地方。

我是否只是有 1 个不断增长的大型脚本，以便 /api/data1 和 /api/data2 重定向到同一个地方（从而处理那里的任何错误，如 404）。或者我是否有 /api/data1 和 /api/data2 的脚本，每个脚本都有单独的重定向，然后是 404 的通用包罗万象（我总是希望为 404 返回 JSON/XML 而不是 HTML，所以我至少需要根据 Accept 标头返回的逻辑）。

作为第三个选项，我是否有某种前线控制器可以捕获所有内容，然后调用子组件？因此，1 个脚本重定向到 /api 下的任何内容，然后如果路径无效，则调用所需的组件或 404。这对我来说似乎是最好的方法，但我不知道怎么做。我是否有站点的某些部分只有该脚本可以调用，或者我是否使用 cURL 从前端控制器到后端 API 部分（因为我需要传递 POST/PUT 数据，我假设我必须使用cURL，还有其他方法吗？）。这在 Apache 中是如何最好地实现的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:35:08.357

是的，您使用前端控制器。前端控制器可以在 /api 处理请求后使用约定，即

/api/firstprocessor/method1

/api/firstprocessor/method2

/api/secondprocessor/method14

您可以查看 Zend_Framework 以获取有关此操作的示例，或者它可以像这样简单

```
$name = 'Script_' . $this->generateCommandName($request->getPathVariable(1));
$this->executeScript($name, $request);

public function executeScript($class, Request $request) {
    if (file_exists("scripts/".$class.'.php')) {

        //include the script
    require_once "scripts/".$class.'.php';

    //execute the script
    $command = new $class;
    $command->execute($request);
    }
} 
```

然后你所有的脚本只有一个执行方法，它使用 $request 来获取 $_GET 或 $_POST 变量

# javascript - javascript变量包含而不是等于

> ID：15148222
> 
> 赞同：2
> 
> 时间：2013-03-01T00:19:35.693
> 
> 标签：javascript, variables

在 javascript if...else 语句中，是否可以检查变量是否包含值，而不是检查变量是否等于 (==) 值？

```
var blah = unicorns are pretty;
if(blah == 'unicorns') {};       //instead of doing this,
if(blah includes 'unicorns') {}; //can i do this? 
```

此外，它包含的单词应该是变量的第一个单词。谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:29:07.220

如果“第一个单词”是指从字符串开头到第一个空格的字符序列，那么它会这样做：

```
if  ((sentence + ' ').indexOf('unicorns ') === 0) {
    //         note the trailing space ^
} 
```

如果可以是任何空白字符而不是空格，则应使用正则表达式：

```
if (/^unicorns(\s|$)/.test(sentence)) {
    // ...
}

// or dynamically
var search = 'unicorns';
if (RegExp('^' + search + '(\\s|$)').test(sentence)) {
    // ...
} 
```

您还可以使用特殊的单词边界字符，具体取决于您要匹配的语言：

```
if (/^unicorns\b/.test(sentence)) {
    // ...  
} 
```

[更多关于正则表达式。](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)

* * *

相关问题：

*   [如何检查一个字符串“StartsWith”是否是另一个字符串？](https://stackoverflow.com/questions/646628/javascript-startswith)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T00:20:48.243

```
if(blah.indexOf('unicorns') == 0) {
    // the string "unicorns" was first in the string referenced by blah.
}

if(blah.indexOf('unicorns') > -1) {
    // the string "unicorns" was found in the string referenced by blah.
} 
```

[`indexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf)

要删除第一次出现的字符串：

```
blah = blah.replace('unicorns', ''); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T00:25:42.813

您还可以使用快速正则表达式测试：

```
if (/unicorns/.test(blah)) {
  // has "unicorns"
} 
```

# sql - 使用 LINQ to SQL 更新时如何解决“由于对象的当前状态导致操作无效”

> ID：15148223
> 
> 赞同：0
> 
> 时间：2013-03-01T00:19:36.043
> 
> 标签：sql, vb.net, linq-to-sql

我在更新记录时遇到了这个异常。我有 2 张桌子，digital_material 和 material。digital_material 具有material_id 中材料表的外键。我试图更新已经分配了值的记录。这是代码。

```
Dim query = from data in _db.digital_material where data.material_id.equals(txt) select data
with query.single
    .material_id = new_material_id
    'other update syntax. The one that got caught was the first one.
end with 
```

并且在代码通过该行之后，出现了异常。我在 C# 中读到，这个问题可以通过更改关联属性而不是外键来解决。VB.NET也一样吗？如果是，我该怎么做？如果没有，有什么办法可以解决这个问题吗？这是一个奇怪的问题，因为我通常使用通常的 LINQ 命令并且以前从未遇到过此异常。感谢您的阅读和帮助！

# python - 是否可以覆盖请求中的默认套接字选项？

> ID：15148225
> 
> 赞同：9
> 
> 时间：2013-03-01T00:19:53.377
> 
> 标签：python, sockets, tcp

我使用优秀的python请求库为rest API编写了一个非常简单的客户端。一切都很好，我通过负载均衡器运行客户端，它可以正常检测空闲的 tcp 连接并杀死它们。我希望我的客户使用一些不同的 tcp 保持活动选项，而不是我的平台（linux）上的默认值。但是我没有看到任何简单的方法来告诉套接字库我想为新套接字选择一些默认选项。

当直接使用 socket.create_connection 时，使用装饰器很容易做到这一点，但我不知道当实际调用被埋在某些第 3 方库中时，我如何使装饰调用可用，就像请求的情况一样。

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-02-08T20:28:37.190

较新的版本`urllib3`（自 1.8.3 起，于 2014-06-23 发布）支持设置套接字选项。

`requests`您可以通过创建自定义适配器从（自 2.4.0 起，于 2014-08-29 发布）设置这些选项：

```
class HTTPAdapterWithSocketOptions(requests.adapters.HTTPAdapter):
    def __init__(self, *args, **kwargs):
        self.socket_options = kwargs.pop("socket_options", None)
        super(HTTPAdapterWithSocketOptions, self).__init__(*args, **kwargs)

    def init_poolmanager(self, *args, **kwargs):
        if self.socket_options is not None:
            kwargs["socket_options"] = self.socket_options
        super(HTTPAdapterWithSocketOptions, self).init_poolmanager(*args, **kwargs) 
```

然后您可以将此适配器安装到需要自定义套接字选项的会话（例如 setting `SO_KEEPALIVE`）：

```
adapter = HTTPAdapterWithSocketOptions(socket_options=[(socket.SOL_SOCKET, socket.SO_KEEPALIVE, 1)])
s = requests.session()
s.mount("http://", adapter)
s.mount("https://", adapter) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-01T00:27:59.583

`requests`uses `urllib3`，它使用标准库的`http.client`（或`httplib`，对于 2.x）调用`socket.create_connection`，所有这些都没有任何地方可以挂钩。

因此，您要么必须分叉其中一个库，要么即时对其进行猴子补丁。

最简单的地方可能是 in [`http.client.connect`](http://hg.python.org/cpython/file/3.3/Lib/http/client.py#l815)，因为这是一个简单的包装器`socket.create_connection`，可以很容易地换出：

```
orig_connect = http.client.HTTPConnection.connect
def monkey_connect(self):
    orig_connect(self)
    self.sock.setsockopt(…)
http.client.HTTPConnection.connect = monkey_connect 
```

如果您使用的是 2.x，它可能就像使用`httplib`而不是`http.client`上面一样简单，但您可能想要验证这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-06T15:43:16.723

另一个可用的替代方法是[requests_toolbelt](https://toolbelt.readthedocs.io/en/latest/)使用 TCPKeepAliveAdapter

所见背后是设置请求 HTTPAdapter 的套接字，并考虑到您的 OSX 特性。

[https://toolbelt.readthedocs.io/en/latest/adapters.html#tcpkeepaliveadapter](https://toolbelt.readthedocs.io/en/latest/adapters.html#tcpkeepaliveadapter)

```
import requests
from requests_toolbelt.adapters.socket_options import TCPKeepAliveAdapter

session = requests.Session()
keep_alive = TCPKeepAliveAdapter(idle=120, count=20, interval=30)
session.mount('https://region-a.geo-1.compute.hpcloudsvc.com', keep_alive)
session.post('https://region-a.geo-1.compute.hpcloudsvc.com/v2/1234abcdef/servers',
             # ...
           ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-04T03:32:21.630

所有浏览器（如 FireFox、Chrome、Edge 或 Safari）都将使用非常频繁的 TCP keepalives 来确保已建立的 TCP 连接保持建立，如果连接断开，它们会重新连接。在已建立的 TCP 连接上，有三个可配置的属性确定 keepalive 的工作方式。在 Linux 上，它们是：

1.  tcp_keepalive_time（默认 7200 秒）
2.  tcp_keepalive_probes（默认 9）
3.  tcp_keepalive_intvl（默认 75 秒）

Python 请求永远不会在套接字上启用 TCP keepalive（在 Linux 上，默认情况下 TCP keepalive 未在套接字上启用，应用程序必须启用它）。Python 请求使用每个操作系统上的默认套接字选项，因此对于 HTTP 1.1 持久连接，我们不知道如果连接保持空闲，是否会丢弃已建立的连接。在断开的连接上，我们只会知道下一次套接字写入发生的时间。使用低于默认值的 tcp_keepalive_time 有助于诊断断开的空闲连接。tcp_keepalive_intvl 是两个 keepalive 之间的间隔。

在下面的代码中，我们使用请求推荐的方式使用用户定义的 HTTPAdapter 通过底层 urllib3 设置套接字选项。(socket.SOL_SOCKET, socket.SO_KEEPALIVE, 1) 是启用keepalives，另外两个将tcp_keepalive_time和tcp_keepalive_intvl设置为10秒。

记住 TCP keepalive 依赖于平台。此代码仅适用于 Linux。

```
import requests, socket
from requests.adapters import HTTPAdapter

class HTTPAdapterWithSocketOptions(HTTPAdapter):
    def __init__(self, *args, **kwargs):
        self.socket_options = kwargs.pop("socket_options", None)
        super(HTTPAdapterWithSocketOptions, self).__init__(*args, **kwargs)

    def init_poolmanager(self, *args, **kwargs):
        if self.socket_options is not None:
            kwargs["socket_options"] = self.socket_options
        super(HTTPAdapterWithSocketOptions, self).init_poolmanager(*args, **kwargs)

KEEPALIVE_INTERVAL = 10
adapter = HTTPAdapterWithSocketOptions(socket_options=[(socket.SOL_SOCKET, socket.SO_KEEPALIVE, 1),
(socket.IPPROTO_TCP, socket.TCP_KEEPIDLE, KEEPALIVE_INTERVAL), (socket.IPPROTO_TCP, socket.TCP_KEEPINTVL, KEEPALIVE_INTERVAL)])
s = requests.Session()
s.mount("http://", adapter)
s.mount("https://", adapter) 
```

# jquery - 检查文本字段值，如果等于给定值，则操作，否则不执行任何操作

> ID：15148227
> 
> 赞同：0
> 
> 时间：2013-03-01T00:19:56.870
> 
> 标签：jquery

我想要的是当文本字段**#ItemAddress 成为**焦点时，检查另一个文本字段# **CAT_Custom_279176**，如果其携带的值等于“ **SG** ”，则清除文本字段# **CAT_Custom_269379**和# **CAT_Custom_248591**的值；如果值不是“SG”，则什么也不做。下面的代码不正确，请帮助...非常感谢

```
 <script type="text/javascript">// if Singapore
      $(function() {
      $('#ItemAddress').focus(function() {
          if ($('#CAT_Custom_279176').val('SG')) {
              $('#CAT_Custom_269379').val(''); // clear value in state field
              $('#CAT_Custom_248591').val(''); // clear value in city field
          }
      });
      })               
  </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T00:21:11.743

这条线是错误的。您将值设置为 SG，而不是比较任何内容。

```
$('#CAT_Custom_279176').val('SG')) { 
```

它应该是

```
$('#CAT_Custom_279176').val() == 'SG') { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T00:21:57.180

你正在改变`#CAT_Custom_279176`价值

```
 <script type="text/javascript">// if Singapore
      $(function() {
      $('#ItemAddress').focus(function() {
          if ($('#CAT_Custom_279176').val() == 'SG') {
              $('#CAT_Custom_269379').val(''); // clear value in state field
              $('#CAT_Custom_248591').val(''); // clear value in city field
          }
      });
      })               
  </script> 
```

# r - 带有 LaTeX 的 knitr 中的外部代码块

> ID：15148228
> 
> 赞同：2
> 
> 时间：2013-03-01T00:20:04.540
> 
> 标签：r, tex, knitr

我无法从 LaTeX (*.Rtex) 文档中获取在 knitr 中工作的外部代码块。

foo.R 包含：

```
## @knitr foo
#
tx <- seq(0,2*pi,length.out=100)
ty <- cos(tx*3.0)
plot(tx,ty,pch=20,col='blue')
seq(3) 
```

test1.Rtex 文档包含：

```
%% read_chunk('Code/foo.R')
% 
%%

%% begin.rcode foo, echo=TRUE, tidy=TRUE, eval=TRUE
%% end.rcode 
```

knit('test1.Rtex') 产生：

```
chunk "foo" is empty or set not to be evaluated 
```

我有一份 knitr git 存储库的副本。使用语句修改此代码`cat(sprint())`没有`read_chunk()`在 LaTeX 代码中使用的证据。

# c++ - InputIterator 用于连续内存？

> ID：15148229
> 
> 赞同：2
> 
> 时间：2013-03-01T00:20:04.507
> 
> 标签：c++, templates, input, iterator

我正在尝试为向量添加一些调试工具。我的班级“有一个”向量并提供以下功能：

```
template <typename InputIterator>
  void assign(InputIterator first, InputIterator last) 
```

向量和字符串是具有连续内存的容器。当`first`和`last`来自向量（或其他具有连续内存的容器）时，我可以对迭代器执行额外的健全性检查。例如，我可以检查：

*   最后 > 第一个
*   [first, last) 不与现有元素重叠
*   count = last - first + 1 是理智的

当容器使用连续内存时，我想为额外的诊断和检测提供专业化，但我不知道迭代器被称为什么（并且无法通过源查找它）：

```
template <typename SequentialIterator>
  void assign(SequentialIterator first, SequentialIterator last) 
```

“SequentialIterator”或“ContiguousIterator”的名称是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T00:28:11.453

您可以使用标签调度和一些标准类型特征来`assign()`根据迭代器的类别选择适当的实现。

例如，这个基本解决方案允许您为随机访问迭代器和非随机访问迭代器提供两种不同的实现：

```
#include <type_traits>
#include <iterator>

struct X
{
    template <typename InputIterator>
    void assign(InputIterator first, InputIterator last)
    {
        assign_impl(
            first, last,
            typename std::iterator_traits<InputIterator>::iterator_category()
            );
    }

    template <typename InputIterator>
    void assign_impl(InputIterator first, InputIterator last,
                     std::random_access_iterator_tag)
    {
        // Implementation for random access iterator...
    }

    template <typename InputIterator>
    void assign_impl(InputIterator first, InputIterator last, 
                     std::input_iterator_tag)
    {
        // Implementation for non-random access iterator...
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T00:23:57.100

不能保证特定迭代器下的序列元素是连续的。只能保证您可以使用迭代器执行的操作。有四种主要的迭代器类型：

*   随机访问
*   双向
*   向前
*   输入

它们每个（输入除外）也可以满足输出迭代器的要求，这使它们成为可变迭代器。

最接近您要求的迭代器是随机访问迭代器。它支持与 and 进行比较，`>`并`<`允许您相互添加和减去迭代器。您甚至可以对它们使用数组下标运算符。它们给人一种元素是连续存储的错觉，但不能保证它们确实如此。

# haskell - 真实世界的 Haskell 代码无法编译？

> ID：15148230
> 
> 赞同：7
> 
> 时间：2013-03-01T00:20:18.300
> 
> 标签：haskell

我正在尝试在 Real World Haskell - Chapter 24\. LineCount.hs 中编译一些代码。

**我没有对代码进行任何更改。**

但是，当我这样做时：

```
ghc -O2 --make -threaded LineCount.hs 
```

（按照书中的说明），我收到以下信息：

```
MapReduce.hs:6:7: Not in scope: `rnf' 
```

我可能做错了什么？

快速搜索显示，过去并行和严格并发包存在一些问题，重新安装它们将解决问题。但是，我试过了，但没有奏效。此外，值得注意的是，该问题已在 2010 年某个时候得到修复： [https ://groups.google.com/forum/?fromgroups=#!msg/happs/gOieP4xfpNc/nrasm842JlUJ](https://groups.google.com/forum/?fromgroups=#!msg/happs/gOieP4xfpNc/nrasm842JlUJ)

注意：编译同一章节中的其他文件时，我会遇到各种其他错误。例如，在编译 Strat.hs 时，我得到：Module `Control.Parallel.Strategies' does not export`parZipWith'。在编译 LineChunks.hs 时，我得到：模块`Control.Parallel.Strategies' does not export`rnf'。

老实说，作为一个新手 Haskell 程序员，一旦我开始修改代码，我预计会遇到麻烦——但我没想到会遇到书本上的代码问题！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T00:32:52.300

该函数不再被调用`rnf`。现在叫它`rdeepseq`。只需更换它。:)

您可以`parallel`通过谷歌搜索“控制并行策略黑客”或单击[此处](http://hackage.haskell.org/package/parallel-3.2.0.3)在线查找包的内容。

# ios5 - 如何将主从导航系统添加到现有的 iPhone 故事板？

> ID：15148231
> 
> 赞同：0
> 
> 时间：2013-03-01T00:20:30.053
> 
> 标签：ios5, storyboard, master-detail, xcode4.6

我有一个带有导航控制器和一些视图的应用程序，但现在我需要将主从视图机制添加到我的一个视图控制器中。我正在使用故事板。如何在不重新发明轮子的情况下实现这样的功能？我在网上搜索过，但我发现的只是从头开始创建应用程序作为主从应用程序的示例，我还没有找到将其添加到现有应用程序的示例。

谢谢，

能。

# android - 解析检索匹配多个不同值的数据

> ID：15148233
> 
> 赞同：1
> 
> 时间：2013-03-01T00:20:34.583
> 
> 标签：android, cloud

我正在检索解析中的对象，但它总是去 ParseException

这是我的代码：

```
public void setItemListData(Context context, String className, 
            String[] value, String colName) {
        ParseQuery query = new ParseQuery(className);
        query.whereContainsAll("Store",Arrays.asList (value));
        query.whereEqualTo("Store","Asus");
        dataList = new ArrayList<String>();
        try {
            List<ParseObject> dataHolder = query.find();
            for(int counter =0;counter<dataHolder.size();counter++){
                String datas = dataHolder.get(counter).getString(colName);
                dataList.add(datas);    
            }
        } catch (ParseException e) {
            Toast.makeText(context,"No Internet Connection",
            Toast.LENGTH_SHORT).show();
        }
    } 
```

我不知道我的代码有什么问题

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:12:25.790

```
Change query.whereContainsAll("Store",Arrays.asList (value)); 
```

至

```
query.whereContainedIn("Store",Arrays.asList (value)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-13T12:53:28.977

**在单个**查询中查找**多个**值：

 **```
private List<ParseObject> todos; 
```

查找多个值的代码：

```
ParseQuery<ParseObject> query = new ParseQuery<ParseObject>("Your_Class_Name");
String[] names = {"Hiren", "Dhruv", "Pratik", "Miral", "Kirit"};
   query.whereContainedIn("Your_Column_Name_Means_Key", Arrays.asList(names));
    try {
         todos = query.find();
         Log.i("No Of Record Found",todos.size()+"");
        }catch (ParseException e) {
         e.printStackTrace()
        } 
```

您必须**传递**您的**Class Name**和**Your Column Name**。

**完毕****

# php - 导出为 CSV 将数据放在一行而不是新行

> ID：15148245
> 
> 赞同：0
> 
> 时间：2013-03-01T00:21:37.123
> 
> 标签：php, javascript, export-to-csv

我将数据导出到 CSV，而我使用`"\r\n"`它时只是在一行上输出数据，而不是在标题行下的自己的新行上输出每组数据，即：

```
name | address | phone | email | greg | 2 old street | 09236462942 | greg343@gmail.com | michael | 2 new street | 0927464623 | michael343@gmail.com | ... 
```

代码如下：

**JS**

```
var file = "Database.csv";

allData=name+","+address+","+phone+","+email;
        allData=allData.replace(/[\\]/g,'');
        saving();

function saving(){
    $.ajax({
        type: 'POST',
        url: 'save.php',
        timeout: 5000,
        data: { data: allData, filename: file },
        error: function() {localStorage["allData"]=allData; wiadomosc("Internet conection error. But don't worry, your data will be stored when conection will be stable.");},
        success: function() {localStorage["allData"]="";}
    });
} 
```

**PHP**

```
<?php
if(isset($_POST["filename"]) == true && isset($_POST["data"]) == true){
    $fp = fopen($_POST["filename"], "a+");

    if($fp !== null){
        fputs($fp, $_POST["data"] . "\r\n");
        fclose($fp);
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:38:24.963

`allData`似乎是一个全局变量。根据您其余的代码，几乎任何事情都可能发生。您应该明确传递`allData`给`saving`. 并在浏览器端（例如使用 Firebug）和服务器端（例如使用 Netbeans）进行调试。

而且这条线是**纯粹的邪恶**！

```
$fp = fopen($_POST["filename"], "a+"); 
```

这样您就可以覆盖系统（服务器）上的几乎所有内容！

并且不要检查`isset($_POST["filename"]) == true`。要么做`isset($_POST["filename"]) === true`（在这种情况下不需要）要么只是做`isset($_POST["filename"])`.

编辑：

这应该可以避免 JS 中的一些问题：

```
var allData=name+","+address+","+phone+","+email;
        allData=allData.replace(/[\\]/g,'');
        saving(allData);

function saving(allData){
    $.ajax({... 
```

这在 PHP 中：

```
function mk_safe_filename($name, $allow_subfolders=false)
{
    $f = trim($nazwa, './\\');
    if (!$allow_subfolders)
    {
        $f = strtr($f, array('\\'=>'__', '/'=>'__', '..'=>'_', ':'=>'_'));
    }
    else
    {
        $f = strtr($f, array('\\'=>'/', '..'=>'_', ':'=>'_'));
        $f = trim($f,'/');
    }
    return $f;
}
$file_name = mk_safe_filename($_POST["filename"]);

$fp = fopen($file_name, "a+"); 
```

# validation - 在 grails 应用程序中验证日期

> ID：15148252
> 
> 赞同：0
> 
> 时间：2013-03-01T00:22:00.173
> 
> 标签：validation, grails, grails-orm

我的域类有一个日期字段。我以“mm/dd/yyyy”格式从用户那里获取数据

所以在我`save()`的控制器方法中，我这样做了：

```
def save1() {
    Date eventDate = new SimpleDateFormat("MM/dd/yyyy").parse(params.eventDate)
    def event = eventService.addEvent(eventDate, "test")
    if (event.hasErrors())
        render(view:  "create", model: [eventInstace: event])
    else {
        flash.message = "${message(code: 'default.created.message', args: ['Event', event.id])}"
        redirect(action: "list")
    }
} 
```

因此，如果用户未在表单的日期字段中输入任何内容或输入无效日期，我的代码将在此行读取：

```
Date eventDate = new SimpleDateFormat("MM/dd/yyyy").parse(params.eventDate) 
```

我该如何克服呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:05:30.307

```
params.date("eventDate", "MM/dd/yyyy") 
```

将返回 null 而不是抛出异常。

# java - 是否可以使用具有相同名称的 Java 类扩展一个 Java 类

> ID：15148253
> 
> 赞同：6
> 
> 时间：2013-03-01T00:22:08.403
> 
> 标签：java

我正在使用一个非常大的代码库，需要将文件从一个包移动到另一个包。但是，我在本地没有整个代码库，所以我不确定我是否找到并更新了对原始文件的每个引用。为了确保不破坏任何东西，我想保留原始文件，并简单地让它扩展我创建的新文件。理想情况下，它们都具有完全相同的名称。加班，我计划弃用并删除旧文件，但目前这似乎是最强大的解决方案。但是，我无法弄清楚如何让它在 Java 中工作。

这是新课程：

```
package myproject.util.http;

import javax.servlet.http.HttpServlet;
import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public abstract class MyServlet extends HttpServlet
{

    public void service (HttpServletRequest  request,
                         HttpServletResponse response)
            throws ServletException, IOException
    {
        // implementation of service
    }

} 
```

这是扩展新类的旧类：

```
package myproject.util.net;

import myproject.util.http.MyServlet;

public abstract class MyServlet extends myproject.util.http.MyServlet
{
// this class was deprecated, use myproject.util.http.MyServlet instead
} 
```

不幸的是，我得到了错误：

```
MyServlet is already defined in this compilation unit 
```

这可能吗，还是我必须为父类想出一个新名称。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T00:25:02.227

您可以这样做，但您需要删除该`import`语句。

否则编译单元将导入你的包中声明的所有类以使用没有完全限定的名称：这意味着你将无法区分两者`MyServlet`，这就是为什么它是非法的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T00:24:18.263

只需删除导入并具有完全限定名称`myproject.util.http.MyServlet`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T00:23:39.917

您需要做的就是删除导入语句，一切都会好起来的。

# jquery-mobile - jquery mobile复选框样式问题

> ID：15148254
> 
> 赞同：0
> 
> 时间：2013-03-01T00:22:19.737
> 
> 标签：jquery-mobile

我设法在 JQuery 中为我的复选框设置样式，因为我希望它们看起来：

```
var content = '<fieldset data-role="controlgroup" class="ui-corner-all ui-controlgroup ui-controlgroup-vertical">' +
    '<div class="ui-controlgroup-controls">' +
    '<div class="ui-checkbox">' +
    '<input type="checkbox" name="checkbox-1a" id="checkbox-1a" class="custom">' +
    '<label for="checkbox-1a" data-corners="true" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-theme="c" class="ui-btn ui-btn-icon-left ui-corner-top ui-checkbox-on ui-btn-up-c">' +
    '<span class="ui-btn-inner ui-corner-top"><span class="ui-btn-text">Food</span><span class="ui-icon ui-icon-shadow ui-icon-checkbox-on">&nbsp;</span></span></label></div>' +
    '<div class="ui-checkbox">' +
    '<input type="checkbox" name="checkbox-4a" id="checkbox-4a" class="custom">' +
    '<label for="checkbox-4a" data-corners="true" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-icon="checkbox-off" data-theme="c" class="ui-btn ui-btn-up-c ui-btn-icon-left ui-checkbox-off ui-corner-bottom ui-controlgroup-last">' +
    '<span class="ui-btn-inner ui-corner-bottom ui-controlgroup-last"><span class="ui-btn-text">Sun Chips</span><span class="ui-icon ui-icon-checkbox-off ui-icon-shadow">&nbsp;</span></span></label></div>' +
    '</div></fieldset>'; 
```

结果是静态的（单击按钮时没有操作或状态更改）。

如何让它们充当普通复选框，单击时更改其选中状态？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T06:08:50.177

我想您将 html 字符串附加到具有 id 的 div`myCheckBoxes`

例如：`<div id="myCheckBoxes"></div>`

尝试如下

```
$('#myCheckBoxes').html(content);
$('#myCheckBoxes').trigger("create"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:49:16.623

jQuery Mobile 不仅是样式元素，还添加了一些事件处理和类/属性切换（与 JUI 类似，但您在标签中有 JQM）。因此，您要么需要自己添加此行为，要么在 JQM 开始解析之前插入标准元素，或者插入标准元素并让 JQM 再次解析它们。

要使 JQM 重新呈现移动页面标记，您需要调用如下内容：

```
$jqueryElement.trigger("create"); 
```

例如在哪里`$jqueryElement`：

```
$jqueryElement = $('#elementId'); 
```

编辑：换句话说，你不应该使用像`ui-checkbox`. 您应该添加一个带有标签和字段集的简单输入，如下所示：

```
<fieldset data-role="controlgroup" data-type="vertical">
    <input id="foo1" name="foo" type="checkbox"><label for="foo1">Option 1</label>`
    <input id="foo2" name="foo" type="checkbox"><label for="foo2">Option 2</label>`
</fieldset> 
```

# jquery - 验证插件 - 显示消息

> ID：15148268
> 
> 赞同：0
> 
> 时间：2013-03-01T00:23:58.280
> 
> 标签：jquery, css, validation

jquery 版本：1.9.0
验证插件：[http ://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

我想实现将字段输入变为红色并在其中显示错误消息的效果 - 我该怎么做？目前，我无法在任何地方显示错误。验证有效，一切似乎都很好，我的字段的 id 和 name 具有相同的值……但什么也没发生。这是我的代码：

```
$(document).ready(function() {
        $("#form").validate({
            rules: {
                username: {
                    remote: {
                        url: '<?php echo URL::base(TRUE, TRUE); ?>form/validate/rules',
                        type: "POST",
                        data: {
                            <?php // some data ?>
                        }
                    }
                },
            },
            messages {
                username {
                        remote: "Fdsfdsfsdfdfs"
                }
            }
        });
}); 
```

这是我的 HTML：

```
<form action="..." method="post" id="form" accept-charset="utf-8">  <div id="input-text" class="input">
    <label for="username">fdsfsd</label>
    <input 

                type="text"
        name="username"
        id="username"

        value=""
        style="" />
</div>
<div id="input-text" class="input">
    <label for="aaa"></label>
    <input 

                type="text"
        name="aaa"
        id="aaa"

        value=""
        style="" />
</div>
<div id="input-submit" class="input">
    <input 
        type="submit"
        name="submit"
        id=""
                value="submit"
        style="" />
</div>

<script type="text/javascript">
// script from above
</script>
</form><div id="form-errors"></div> 
```

我试过这个：

```
jQuery.validator.setDefaults({
    errorPlacement: function(error, element) {
        error.appendTo(element.parent().find('div.form-errors'));
    }
}); 
```

但也不起作用，萤火虫中出现了一些“找不到方法”错误......我找不到任何解决这个问题的方法，你能帮我吗？我想我已经很好地描述了我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:31:51.130

如果您在使用此插件时遇到问题，可以打开调试以获得一些帮助：

```
$("#form").validate({
   debug: true,
   ...rest of the options
}); 
```

这可能有助于一般诊断问题。

您说您希望“字段输入为红色并在其中显示错误消息”。如果该字段处于错误状态，则验证插件应为该字段提供一个 CSS 类“error”（如果您愿意，可以设置“errorClass”选项将其更改为另一个类）。因此，您可以设置 input.error 的样式，使其具有红色边框或任何您喜欢的样式。

但是，将错误消息放在表单字段中会更加棘手。首先，如果表单字段是复选框、单选按钮或选择菜单，则无法完成。我可以完成文本输入字段。但是，我建议不要这样做。例如，如果您有一个必填字段“姓名”，一旦提交表单，如果姓名字段为空，它将被设置为错误，但立即给出“此字段为必填项”的值突然它不再处于错误状态。CSS 高亮将消失，用户可能不会注意到名称字段设置错误。

在我看来，您正在探索 errorPlacement 函数的正确轨道，尽管您可能还希望调查 invalidHandler。“errorPlacement”处理单个字段的错误。“invalidHandler”更典型地用于在表单上显示一般错误状态。

如果您没有为 errorPlacement 设置任何内容，则验证插件会在处于错误状态的表单字段之后附加一个带有错误类别的标签。所以，我一般发现你只需要为“label.error”设置一些 CSS 样式。例如：

```
<style>
    label.error {
        border: 1px solid red;
        color: red;
    }
</style> 
```

希望有帮助！

# plugins - TinyMCE/FCKeditor 无法浏览文件

> ID：15148274
> 
> 赞同：1
> 
> 时间：2013-03-01T00:24:30.460
> 
> 标签：plugins, tinymce, fckeditor, modx, modx-evolution

我更改了服务器上的一些权限，并以某种方式破坏了 TinyMCE，使其无法再浏览图像和文件。

我将权限改回原来的样子，但问题仍然存在 - 当我去浏览文件时，我只看到一个空白屏幕：

有人知道如何修复这个吗？

（PS 使用 ModX Evo CMS）

编辑：我在编辑资源页面上的控制台上看到的内容（当我在浏览窗口中打开控制台时什么都没有出现）：

```
6
Refused to set unsafe header "Connection" index.php:1
Uncaught Error: IndexSizeError: DOM Exception 1 /assets/plugins/tinymce/jscripts/tiny_mce/tiny_mce.js:1
2
Refused to set unsafe header "Connection" index.php:1 
```

谢谢！

![在此处输入图像描述](../Images/5bdb617c1aa3a23654d7bd10221500b5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:18:02.677

如果您确实使用 tinymce 的标准安装，我建议您在服务器上的文件上重新安装 tinymce。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T04:09:18.907

尝试检查所有可能包含特殊字符的文件名。一个破折号，一个破折号，可能是左引号”，右引号等......

我会通过 ftp 执行此操作，以确保您可以看到管理部分中的所有文件。重命名任何可能包含可疑字符的文件，看看是否可以修复它。

# magento - Magento 何时考虑放弃购物车？那个时限是在哪里设置的？

> ID：15148275
> 
> 赞同：16
> 
> 时间：2013-03-01T00:24:32.773
> 
> 标签：magento, magento-1.7, shopping-cart

如果保留默认设置，Magento 1.7 在什么情况下才会考虑放弃购物车？做出此决定的代码在哪里？

我知道这可能设置在引用中的某个地方，但我一生都找不到它。

我已经做了一些谷歌搜索，但就像许多 Magento 问题一样，我两手空空。谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-06T10:54:37.193

您可能知道该设置位于此处：

**Admin => system => Configuration => Sales => Checkout => Quote Lifetime (days)**

这会将设置添加到具有路径的数据库（core_config_data 表）：

**结帐/购物车/delete_quote_after**

此路径在以下代码中使用：

**app/code/core/Mage/Sales/Model/Observer.php 第 54 行**

因此，当有人将某些东西添加到购物车时，它将被更新。当客户登录并且他的购物车在那里时，它将被更新。购物车在过去 30 天内未更新时。它将被删除。

**额外的信息：**

如果您想知道何时使用此代码，它由 magento 的 cronjob 使用。

检查： **App/code/core/Mage/Sales/etc/config.xml**第 1732 行

```
<crontab>
    <jobs>
        <sales_clean_quotes>
            <schedule>
                <cron_expr>0 0 * * *</cron_expr>
            </schedule>
            <run>
                <model>sales/observer::cleanExpiredQuotes</model>
            </run>
        </sales_clean_quotes> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T17:28:14.290

问题是关于购物车何时被放弃，而不是报价何时到期。由于 Magento 没有放弃购物车功能，因此它是任意的。添加它的各种扩展让您可以设置它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-19T17:54:55.017

在我们的电子商务中，我们覆盖了`cleanExpiredQuotes`app */code/core/Mage/Sales/Model/Observer.php中的方法*

我们的业务规则如下所示：

```
$quotes = Mage::getModel('sales/quote')->getCollection();     
$quotes->addFieldToFilter('created_at', array('to' => date("Y-m-d", time() - $lifetime)));

$quotes->addFieldToFilter('is_active', 1);
foreach ($this->getExpireQuotesAdditionalFilterFields() as $field => $condition) {
    $quotes->addFieldToFilter($field, $condition);
}
$quotes->walk('delete'); 
```

# thumbnails - phpThumb 没有设置参数 – fltr[] usm

> ID：15148279
> 
> 赞同：0
> 
> 时间：2013-03-01T00:25:03.830
> 
> 标签：thumbnails, phpthumb

我正在使用 Brett 的[Mr. PHP 拇指缓存脚本](http://mrphp.com.au/blog/image-cache-using-phpthumb-and-modrewrite)和 phpThumb 来创建我的拇指。它工作得非常好，除了一件事......我无法设置和处理 UnSharpMask 过滤器。脚本的相关部分如下所示：

```
// generate the thumbnail
require('../phpthumb/phpthumb.class.php');
$phpThumb = new phpThumb();
$phpThumb->setSourceFilename($image);
$phpThumb->setParameter('w',$width);
$phpThumb->setParameter('h',$height);
$phpThumb->setParameter('q','95'); // set the quality to 95%
$phpThumb->setParameter('fltr[]','usm|80|0.5|3'); // <--- THIS SHOULD SET THE USM FILTER
$phpThumb->setParameter('f',substr($thumb,-3,3)); // set the output file format

if (!$phpThumb->GenerateThumbnail()) {
    error('cannot generate thumbnail');
} 
```

我猜我的语法有问题，因为 fltr[] 参数需要括号。我曾尝试像这样转义括号：'fltr []'，但这也不起作用。

我已经成功使用了其他几个可能的参数（缩放裁剪、最大高度、最大宽度等......）除了过滤器（包括 usm - UnSharpMask）之外，一切似乎都有效。

我没有收到任何错误。它整天都在吐拇指。它们只是没有被削尖。

作为参考，这里是讨论所有可能的设置和过滤器的[官方 phpThumb 自述文件。](http://phpthumb.sourceforge.net/demo/docs/phpthumb.readme.txt)

感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:01:41.223

经过多次试验、错误和恶化，我终于在 phpThumb 附带的一个演示文件中找到了解决方案。

这是一个一起删除括号的问题。基本上改变这一行：

```
$phpThumb->setParameter('fltr[]','usm|80|0.5|3'); 
```

对此：

```
$phpThumb->setParameter('fltr','usm|80|0.5|3'); 
```

之后，只需调整设置即可获得所需的清晰度。

# ruby-on-rails - Rails 应用程序 - 在 AJAX 表单提交后将更新的实例变量值传递给虾

> ID：15148290
> 
> 赞同：0
> 
> 时间：2013-03-01T00:26:03.230
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, prawn

我的 Rails 应用程序中有一个静态页面，用户可以在其中选择表单中的两个日期，然后根据这两个输入生成损益表。这工作正常。但是，在同一页面上，我还可以选择生成 PDF（我使用的是 prawn gem）。在控制器中，我将实例变量发送给虾。现在，当我生成 PDF 时，它会将日期值显示为：

```
@date1 = Date.today - 1.month
@date2 = Date.today 
```

即使用户使用新日期更新了表单。传递给 prawn 的实例变量的值来自服务器第一次生成页面时的值（即使这些实例变量的值随着后续表单提交而改变）。是否可以将更新的值传递给大虾（在用户提交表单后）？如果是这样，我该怎么做？

```
def income
  if (params.has_key?(:date1) && params.has_key?(:date2))
      year1 = params[:date1][0...4].to_d
      month1 = params[:date1][5...7].to_d
      day1 = params[:date1][8...10].to_d
      year2 = params[:date2][0...4].to_d
      month2 = params[:date2][5...7].to_d
      day2 = params[:date2][8...10].to_d
     @date1 = Date.new(year1,month1,day1)
     @date2 = Date.new(year2,month2,day2)
  else  
     @date1 = Date.today - 1.month
     @date2 = Date.today
  end 

  respond_to do |format|
      format.html
      format.js
      format.pdf do
        pdf = IncomePdf.new(@date1, @date2)
        send_data pdf.render, filename: "Income Statement #{@date1} to #{@date2}",
                          type: "application/pdf",
                          disposition: "inline"
     end
  end

end 
```

视图中的表单如下所示：

```
<%= form_tag "/income", :method => :post, :remote => true, :html => {:class => "form-horizontal"} do %> 
```

# ios - 自定义格式化文本标签的字符串值

> ID：15148292
> 
> 赞同：2
> 
> 时间：2013-03-01T00:26:14.743
> 
> 标签：ios, ios6, nsstring, string-formatting

在我的项目中，我有一个函数可以运行并将一个 5 位数字吐出到我界面上的标签中。该数字可以是双精度数或浮点数，但我希望它显示为 ###+##.##

示例编号 12345.67

显示为 123+45.67

输出将始终是带小数的 5 位数字。我研究了数据格式，特别是数字格式，但没有遇到任何特定于这种情况的东西。这是我将数字更改为字符串并将其分配给标签的地方。请帮助并提前感谢您的时间。

```
NSString *outputNumber = [NSString stringWithFormat:@"%f",numberHere];

_stationing.text = outputNumber; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:35:38.213

有几种方法可以做到这一点。

```
NSMutableString *outputNumber = [[NSString stringWithFormat:@"%.2f", numberHere] mutableCopy];
[outputNumber insertString:@"+" atIndex:outputNumber.length - 5];

_stationing.text = outputNumber; 
```

其他：

```
int high = numberHere / 100;
float low = numberHere - (high * 100);
NSString *outputNumber = [NSString stringWithFormat:@"%d+%.2f", high, low]; 
```

如果数量少于 100，这些方法将无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:43:57.930

希望这有帮助

```
NSStirng *numberString = [NSString stringWithFormat:@"%.2f",numberHere];

NSString *firstPart = [numberString substringWithRange:NSMakeRange(0, 3)];
NSString *secondPart [numberString substringWithRange:NSMakeRange(3, 5)];

NSString *outputString = [NSString stringWithFormat:@"%@+%@", firstPart, secondPart]; 
```

如果数字的格式不是永久的，您应该先检查长度。

# javascript - 如何添加确认电子邮件验证

> ID：15148295
> 
> 赞同：0
> 
> 时间：2013-03-01T00:26:47.190
> 
> 标签：javascript, forms, contact, confirm

我希望在我的联系表单中添加一个确认电子邮件字段。我知道如何添加确认电子邮件字段，但我不知道如何添加 javascript 以将确认电子邮件与原始电子邮件相匹配。任何人都可以帮助我或者有一个我可以学习的教程吗？谢谢

联系表格html：

```
<div id="contactcontainer">
<div id="form">
<h3>Contact Us</h3>
<form action="contact.php" method="post">
<p>
<label for="name">Name:</label>
<input name="name" id="name" type="text" class="required">
<span>Please enter your name</span>
</p>
<p>
<label for="email">Email:</label>
<input name="email" id="email" type="text" class="required"> 
<span>Please enter a valid email address</span>
</p>
<p>
<label for="number">Phone Number:</label>
<input name="number" id="number" type="text" class="required"> 
<span>Please enter your phone number</span>
</p>         
<p>
<label for="date">Trip Date:</label>
<input name="date" type="text" id="datepicker" class="required"/>
<span>Please select a date</span>
</p>    
<p>
<label for="subject">Subject:</label>
<input name="subject" id="subject" type="text"> 
<span>Please enter your subject</span>
</p>
<p>
<label for="message">Message</label>
<textarea name="message" id="message" class="required"></textarea> 
<span>Please enter your message</span>
</p>        
<p>
<input type="submit" value="Submit" class="btn-submit">
</p>
</form>
</div>
</div> 
```

Javascript：

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
var $submit = $(".submit input");
var $required = $(".required");
function containsBlanks(){
var blanks = $required.map(function(){ return $(this).val() == "";});
return $.inArray(true, blanks) != -1;
}
function isValidEmail(email){
return email.indexOf("@") != -1;
}
function requiredFilledIn(){
if(containsBlanks() || !isValidEmail($("#email").val())) 
$submit.attr("disabled","disabled");
else 
$submit.removeAttr("disabled");
}
$("#form span").hide();
$("input,textarea").focus(function(){
  $(this).next().fadeIn("slow");
  }).blur(function(){
  $(this).next().fadeOut("slow");
  }).keyup(function(){
//Check all required fields.
requiredFilledIn();
});
$("#email").keyup(function(){
 //Check for a valid email.
if(isValidEmail($(this).val()))
 $(this).next().removeClass("error").addClass("valid");
else 
 $(this).next().removeClass("valid").addClass("error");
  });

requiredFilledIn();
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:46:04.347

只需从两个字段中获取值并确保然后是 == 来验证它。为了不区分大小写，您应该转换为全部大写或小写。

# python - Python最小化函数：将附加参数传递给约束字典

> ID：15148296
> 
> 赞同：6
> 
> 时间：2013-03-01T00:26:48.627
> 
> 标签：python, python-2.7, scipy, minimize

我不知道如何通过最小化函数将附加参数传递给约束字典。我可以成功地将附加参数传递给目标函数。

关于最小化功能的文档在这里：[http ://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.minimize.html#scipy.optimize.minimize](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.minimize.html#scipy.optimize.minimize)

约束参数是一个具有字段“args”的字典，其中 args 是一个序列。我确定这是我需要传递附加参数的地方，但我不知道语法。我得到的最接近的是：

```
from scipy.optimize import minimize
def f_to_min (x, p):
    return (p[0]*x[0]*x[0]+p[1]*x[1]*x[1]+p[2])

f_to_min([1,2],[1,1,1]) # test function to minimize

p=[] # define additional args to be passed to objective function
f_to_min_cons=({'type': 'ineq', 'fun': lambda x, p : x[0]+p[0], 'args': (p,)}) # define constraint

p0=np.array([1,1,1])
minimize(f_to_min, [1,2], args=(p0,), method='SLSQP', constraints=f_to_min_cons) 
```

我收到以下错误

```
---------------------------------------------------------------------------
IndexError                                Traceback (most recent call last)
<ipython-input-19-571500063c9e> in <module>()
      1 p0=np.array([1,1,1])
----> 2 minimize(f_to_min, [1,2], args=(p0,), method='SLSQP', constraints=f_to_min_cons)

C:\Python27\lib\site-packages\scipy\optimize\_minimize.pyc in minimize(fun, x0, args,     method, jac, hess, hessp, bounds, constraints, tol, callback, options)
    356     elif meth == 'slsqp':
    357         return _minimize_slsqp(fun, x0, args, jac, bounds,
--> 358                                constraints, **options)
    359     else:
    360         raise ValueError('Unknown solver %s' % method)

C:\Python27\lib\site-packages\scipy\optimize\slsqp.pyc in _minimize_slsqp(func, x0,     args, jac, bounds, constraints, maxiter, ftol, iprint, disp, eps, **unknown_options)
    298     # meq, mieq: number of equality and inequality constraints
    299     meq = sum(map(len, [atleast_1d(c['fun'](x, *c['args'])) for c in     cons['eq']]))
--> 300     mieq = sum(map(len, [atleast_1d(c['fun'](x, *c['args'])) for c in     cons['ineq']]))
    301     # m = The total number of constraints
    302     m = meq + mieq

<ipython-input-18-163ef1a4f6fb> in <lambda>(x, p)
----> 1 f_to_min_cons=({'type': 'ineq', 'fun': lambda x, p : x[0]+p[0], 'args': (p,)})

IndexError: list index out of range 
```

我正在访问附加参数的第一个元素，所以我不应该有超出范围的错误。

如果您从最小化函数中删除了 constraints=f_to_min_cons 参数，那么上面的代码就可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-08-15T19:31:03.837

答案很简单，p = [] 没有元素也没有长度，所以 p[0] 超出了界限。

下面，我们设置 p = [0]，运行没有错误。p 实际应该持有的东西当然不是我们可以用给出的信息来回答的东西。

```
import numpy as np

from scipy.optimize import minimize
def f_to_min (x, p):
    return (p[0]*x[0]*x[0]+p[1]*x[1]*x[1]+p[2])

f_to_min([1,2],[1,1,1]) # test function to minimize

p=[0] # define additional args to be passed to objective function
f_to_min_cons=({'type': 'ineq', 'fun': lambda x, p : x[0]+p[0], 'args': (p,)},) # define constraint

p0=np.array([1,1,1])
minimize(f_to_min, [1,2], args=(p0,), method='SLSQP', constraints=f_to_min_cons) 
```

# php - getJSON 需要帮助传递值

> ID：15148299
> 
> 赞同：1
> 
> 时间：2013-03-01T00:27:00.153
> 
> 标签：php, jquery, json

我正在尝试使用 getJSON 加载存储到数据库中的 id，我通过回显将值从 PHP 传递到 JavaScript。我试图提醒我通过的值，但它不起作用

PHP 和 JavaScript 在同一页面上。任何指导将不胜感激

我打印了 JSON 文件，它是这种格式

```
 Array
(
    [0] => 213
    [1] => 214
    [2] => 215

) 
```

PHP

```
$result = mysql_query("SELECT * FROM address");

$arra = array();

while ($row = mysql_fetch_array($result)){

    $arra[] = $row['id']; 

} 
```

Javascript

```
<script>

var test= <?php echo json_encode($arra); ?> 

var url = test;
$.getJSON(url, function(data) {
      alert(url);
})

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:10:53.860

制作名为“Data.php”的新 php 文件并使其返回您的 JSON 数据。

```
<?php

     $con =  mysql_connect('localhost', 'root', '');
    mysql_select_db('test');

   $result = mysql_query("SELECT * FROM address ORDER BY id DESC");

$arra = array();

while ($row = mysql_fetch_array($result)){

    $arra[] = $row['id']; 

}

echo json_encode($arra);

?> 
```

然后在你调用你的 $.getJSON 的地方，做：

```
$.getJSON(data.php, function(data) {
      alert(data);
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:32:32.707

url 在您的情况下是 json 对象。它应该是页面的url！像这样的东西应该工作：

```
$.getJSON("<?=$_SERVER["PHP_SELF"]?>", test, function(data) {
      alert(data);
}) 
```

# php - 解析错误：语法错误，意外的 T_IF /home49

> ID：15148301
> 
> 赞同：-5
> 
> 时间：2013-03-01T00:27:12.813
> 
> 标签：php

在我的网站标题中插入这段代码时出现以下错误。谁能帮我找到错误并修复它？

“解析错误：语法错误，第 49 行 /home/m3999316/public_html/testing/wp-content/themes/gridmarket/header.php 中的意外 T_IF”，这是我的代码：

```
if ( is_user_logged_in() ) {
  global $current_user;
  get_currentuserinfo();
  echo 'Welcome, '.$current_user->user_login.'';
  $user_id = $current_user->ID;
  $user_blogs = get_blogs_of_user( $user_id );
  $playground = count($user_blogs);  
  $mainblog_name =

  if (is_super_admin()){echo ' | Manage Network';} elseif ($playground == 1) {
    echo ' | Start Selling';
  } else {
    foreach ($user_blogs as $user_blog) {
      if ($user_blog->blogname!= 'Marketpress Fronted Plugin - Demo' )
        echo 'Manage Store';
    }
  }
    echo ' | Log out';
} else {
    echo 'Login | Register';
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:30:23.703

`$mainblog_name =`是什么原因造成的。分配变量或不使用它。别忘`;`了最后

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T00:34:25.480

它显示此错误是因为之前的语句`if (is_super_admin()){echo ' | Manage Network';} elseif ($playground`不完整。`$mainblog_name =` 没有分配任何值...也没有以分号 (;) 正确终止

# c++ - C++ 成员函数调用

> ID：15148302
> 
> 赞同：3
> 
> 时间：2013-03-01T00:27:21.313
> 
> 标签：c++, class, methods, member

好吧，我经常看到使用以下类型的事件处理：

`Connect(objectToUse, MyClass::MyMemberFunction);`

对于 objectToUse 类型为 MyClass 的某种事件处理。我的问题是这到底是如何工作的。您如何将其转换为可以执行的操作`objectToUse->MyMemberFunction()`

是否`MyClass::MyMemberFunction`给出了类开头的偏移量，然后可以用作函数指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:35:39.917

通常，这使用一个`static`成员函数（将指针作为参数），在这种情况下`objectToUse`，作为参数传入，并且`MyMemberFunction`将用于`objectToUse`设置指向`MyClass`对象的指针并使用它来引用成员变量和成员函数。

在这种情况下`Connect`，将包含如下内容：

```
void Connect(void *objectToUse, void (*f)(void *obj))
{
     ...
     f(objectToUse);  
     ...
} 
```

[也很有可能，`f`并且`objectToUse`保存在某个地方以供以后使用，而不是实际在 Connnect 内部，但在这种情况下调用看​​起来也一样 - 只是来自由于该函数的事件而调用的某个其他函数应该被要求]。

也可以使用指向成员函数的指针，但它非常复杂，而且“正确”一点也不容易——无论是在语法方面，还是在“何时以及如何正确使用它”方面。[在这里](http://www.parashift.com/c++-faq/pointers-to-members.html)查看更多。

在这种情况下，`Connect`看起来有点像这样：

```
void Connect(MyClass *objectToUse, void (Myclass::*f)())
{
     ...
     objectToUse->*f();
     ...
} 
```

很有可能使用了模板，好像“MyClass”在 Connect 类中是已知的，那么拥有一个函数指针将毫无意义。虚函数将是更好的选择。

在适当的情况下，您也可以将虚函数用作成员函数指针，但它需要编译器/环境“配合”。这是关于该主题的更多详细信息[我完全没有个人经验：指向虚拟成员函数的指针。它是如何工作的？

Vlad 还指出了 Functors，它是一个包装函数的对象，允许将具有特定行为的对象作为“函数对象”传入。通常，这涉及到预定义的成员函数或`operatorXX`在需要回调到代码中的函数中作为处理的一部分调用的成员函数。

C++11 允许“Lambda 函数”，这是在代码中动态声明的函数，没有名称。这是我根本没有使用过的东西，所以我无法对此发表进一步评论 - 我已经阅读过它，但不需要在我的（爱好）编程中使用它 - 我的大部分工作生活是使用 C 而不是 C++，尽管我也使用 C++ 工作了 5 年。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T00:39:53.783

除了 Mats 的回答之外，我还会给您一个简短的示例，说明如何在此类事物中使用非静态成员函数。如果您不熟悉指向成员函数的指针，您可能需要先查看[常见问题解答](http://www.parashift.com/c++-faq/pointers-to-members.html)。

然后，考虑这个（相当简单的）示例：

```
class MyClass
{
public:
    int Mult(int x)
    {
        return (x * x);
    }

    int Add(int x)
    {
        return (x + x);
    }
};

int Invoke(MyClass *obj, int (MyClass::*f)(int), int x)
{ // invokes a member function of MyClass that accepts an int and returns an int
  // on the object 'obj' and returns.
    return obj->*f(x);
}

int main(int, char **)
{
    MyClass x; 

    int nine = Invoke(&x, MyClass::Mult, 3);
    int six = Invoke(&x, MyClass::Add, 3);

    std::cout << "nine = " << nine << std::endl;
    std::cout << "six = " << six << std::endl;

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T00:40:02.697

我可能在这里错了，但据我所知，

在 C++ 中，具有相同签名的函数是相等的。

带有 n 个参数的 C++ 成员函数实际上是带有 n+1 个参数的普通函数。换句话说，`void MyClass::Method( int i )`是有效的`void (some type)function( MyClass *ptr, int i)`。

因此，我认为 Connect 在幕后工作的方式是将成员方法签名转换为普通函数签名。它还需要一个指向实例的指针才能真正使连接工作，这就是它需要的原因`objectToUse`

换句话说，它本质上是使用指向函数的指针并将它们转换为更通用的类型，直到可以使用提供的参数和附加参数（指向对象实例的指针）来调用它

如果方法是静态的，那么指向实例的指针就没有意义，它是直接的类型转换。我还没有弄清楚非静态方法所涉及的复杂性——看一下[boost::bind](http://www.boost.org/doc/libs/1_53_0/libs/bind/bind.html#with_member_pointers)的内部结构可能是你想要理解的:) 这是静态函数的工作方式。

```
#include <iostream>
#include <string>

void sayhi( std::string const& str )
{
    std::cout<<"function says hi "<<str<<"\n";
}

struct A
{
    static void sayhi( std::string const& str )
    {
        std::cout<<"A says hi "<<str<<"\n";
    }
};

int main()
{
    typedef void (*funptr)(std::string const&);
    funptr hello = sayhi;
    hello("you"); //function says...
    hello = (&A::sayhi); //This is how Connect would work with a static method
    hello("you"); //A says...
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T00:38:56.103

对于事件处理或回调，它们通常采用两个参数——一个回调函数和一个用户数据参数。回调函数的签名将 userdata 作为参数之一。

调用事件或回调的代码将直接使用 userdata 参数调用函数。例如这样的事情：

```
eventCallbackFunction(userData); 
```

在您的事件处理或回调函数中，您可以选择使用用户数据来做任何您想做的事情。

由于该函数需要在没有对象的情况下直接调用，因此它可以是全局函数或类的静态方法（不需要对象指针）。

静态方法的局限性在于它只能访问静态成员变量并调用其他静态方法（因为它没有**this**指针）。这就是 userData 可以用来获取对象指针的地方。

考虑到所有这些，看看下面的示例代码片段：

```
class MyClass
{
...
public:
    static MyStaticMethod(void* userData)
    {
        // You can access only static members here
        MyClass* myObj = (MyClass*)userdata;
        myObj->MyMemberMethod();
    }

    void MyMemberMethod()
    {
        // Access any non-static members here as well
        ...
    }

...
...
};

MyClass myObject;
Connect(myObject, MyClass::MyStaticMethod); 
```

如您所见，如果您可以创建一个将首先调用的静态方法，该方法将使用对象指针（从 userData 检索）链接到成员方法的调用，您甚至可以访问成员变量和方法作为事件处理的一部分。

# android - Android jsonWriter, jsonReader for Gingerbread 2.3

> ID：15148305
> 
> 赞同：0
> 
> 时间：2013-03-01T00:27:43.373
> 
> 标签：android, json

是否有其他支持库允许人们使用仅在 HoneyComb 中可用的 jsonWriter、jsonReader 实用程序类。我注意到它们不在官方 V4 支持包中？

考虑到 Gingerbread 在应用商店（Google Play）中拥有 50% 的 Android 市场份额，Google 不将它们作为支持包提供似乎真的不专业。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:01:30.600

试试[这个](http://code.google.com/p/google-gson/)。我在所有与 JSON 有关的项目中都使用它。该库还具有将 JSON 字符串解析为对象或将对象解析为 JSON 字符串的能力。

# java - 康威的生活问题游戏

> ID：15148309
> 
> 赞同：-3
> 
> 时间：2013-03-01T00:28:01.560
> 
> 标签：java, eclipse

这是我为我的任务提供的代码。任务是找出代码有什么问题。该代码应该实现“康威的生命游戏”：[http](http://en.wikipedia.org/wiki/Conway) ://en.wikipedia.org/wiki/Conway 's_Game_of_Life 我找不到错误在哪里。

```
import java.util.Scanner;
import javax.swing.JFrame;

public class GameOfLife {

    public static void main(String[] args) {
        final int testCase = 1;

        JFrame frame = new JFrame();
        frame.setSize(500, 500);
        frame.setTitle("Conway's Game of Life");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        Cell[][] universe = new Cell[100][100];
        for (int x = 0; x < universe.length-1; x++) {
            for (int y = 0; y < universe[x].length-1; y++) {
                universe[x][y] = new Cell();
            }
        }

        if (testCase == 1) {
            universe[3][2].calculateNext(3);
            universe[3][2].updateCurrent();
            universe[3][3].calculateNext(3);
            universe[3][3].updateCurrent();
            universe[3][4].calculateNext(3);
            universe[3][4].updateCurrent();
        } else if (testCase == 2) {
            universe[49][50].calculateNext(3);
            universe[49][50].updateCurrent();
            universe[49][51].calculateNext(3);
            universe[49][51].updateCurrent();
            universe[50][49].calculateNext(3);
            universe[50][49].updateCurrent();
            universe[50][50].calculateNext(3);
            universe[50][50].updateCurrent();
            universe[51][50].calculateNext(3);
            universe[51][50].updateCurrent();
        } else {
        }

        UniverseComponent component = new UniverseComponent(universe);
        frame.add(component);

        frame.setVisible(true);

        Scanner in = new Scanner(System.in);
        String input = in.nextLine();
        while (input.length() == 0) {
            int neighborCount = 0;
            for (int x=1; x<universe.length-2; x++) {
                for (int y=1; y<universe[x].length-2; y++) {
                    neighborCount = 0;
                    if (universe[x-1][y-1].isAlive()) {
                        neighborCount++;
                    }
                    if (universe[x-1][y].isAlive()) {
                        neighborCount++;
                    }
                    if (universe[x-1][y+1].isAlive()) {
                        neighborCount++;
                    }
                    if (universe[x][y-1].isAlive()) {
                        neighborCount++;
                    }
                    if (universe[x][y+1].isAlive()) {
                        neighborCount++;
                    }
                    if (universe[x+1][y-1].isAlive()) {
                        neighborCount++;
                    }
                    if (universe[x+1][y].isAlive()) {
                        neighborCount++;
                    }
                    if (universe[x+1][y+1].isAlive()) {
                        neighborCount++;
                    }
                    universe[x][y].calculateNext(neighborCount);
                }
            }
            for (int x=1; x<universe.length-2; x++) {
                for (int y=1; y<universe[x].length-2; y++) {
                    universe[x][y].updateCurrent();
                }
            }
            component.repaint();
            input = in.nextLine();
        }
        in.close();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:33:06.493

我不会为你做你的任务（找出错误）。但这里有一个策略：

1.  代码是否编译？如果没有，请修复它。
2.  程序运行时会崩溃吗？如果是这样，请查看堆栈跟踪以获取线索。然后使用调试器。
3.  如果程序运行时没有崩溃但没有正确推进游戏，请尝试一个简单的 Game of Life 配置，您可以手动计算预期结果并查找代码行为不同的地方。

对于第 2 步和第 3 步，掌握使用调试器的基础知识很重要。祝你好运。

# ruby-on-rails - 从主干调用的 REST API 返回空响应

> ID：15148310
> 
> 赞同：1
> 
> 时间：2013-03-01T00:28:05.037
> 
> 标签：ruby-on-rails, backbone.js

我是骨干新手，并尝试使用一个使用骨干 js 后端并调用返回 json 对象的 rest API（使用 rails 创建）的应用程序的简单示例。如果我在浏览器上键入 rest api URL，它会成功返回 JSON 数据。但是，当我启动我的应用程序时，我可以看到 API 返回一个空响应（但它返回 200 OK 状态）。如果我用 twitter 搜索 api 替换此 URL，那么这也将成功返回数据。所以问题似乎只出在rails REST API上。这是我的主干代码：

```
var Product = Backbone.Model.extend();

var ProductList = Backbone.Collection.extend({
model: Product,
url: 'http://hvo-lnx.cisco.com:7777/product_families.json'
});

var ProductView = Backbone.View.extend({
template: _.template($('#prodlist_template').html()),
render: function(eventName) {
_.each(this.model.models, function(product){
    var lProductName = product.attributes['name'];
    var lTemplate = this.template(product.toJSON());

    $(this.el).append(lTemplate);
  }, this);
return this;
}
 });

var lProducts = new ProductList;

var AppView = Backbone.View.extend({
  el: "body",

  render: function(){
    var lProductsView = new ProductView({model:lProducts});
    var lHtml = lProductsView.render().el;
    $('#products').html(lHtml);
  },

initialize: function(){
   var lOptions = {};
   lOptions.success = this.render;
   lProducts.fetch(lOptions);
}
});

var App = new AppView; 
```

HTML：

```
<html>
    <head>
        <link rel="stylesheet" href="css/bootstrap.css" />
    </head>
    <body>
        <ol id="products">
            <script type="text/template" id="prodlist_template">
                  <li><%= name %></li>
            </script>
        </ol>
        <script src="js/jquery-1.9.1.min.js"></script>
        <script src="js/underscore-min.js"></script>
        <script src="js/backbone-min.js"></script>
        <script src="js/prodtest.js"></script>
    </body>
</html> 
```

[如果我用http://search.twitter.com/search.json?q=NYC&callback=](http://search.twitter.com/search.json?q=NYC&callback=)替换 URL ？并更改属性字段，然后就可以了。有没有其他人遇到过这个问题？我真的很感激任何指示。

# winforms - 具有依赖组合框的 Excel ListObject 使用相同的 DataSet 和 DataTable

> ID：15148311
> 
> 赞同：0
> 
> 时间：2013-03-01T00:28:06.883
> 
> 标签：winforms, excel, vsto

在使用 VSTO 的 Excel 2007 中，如果我使用带有以下示例列`ListObject`的 SQL 表：`DataSet`

```
[Year],[Month],[Unit],[Site] 
```

你怎么能得到一个`combobox`使用`SELECT DISTINCT [Year]`相同的`DataSet`？作为其数据源，然后`ListObject`依赖于所选年份`combobox`？

看起来很简单，但我不太熟悉使用 VSTO 和数据集、绑定源、表适配器等的正确方法......

任何帮助或有用的文章都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:46:41.347

`DataSet`我现在已经使用设计器和以下步骤弄清楚了。

1.  右键单击 my`DataTable`在我的情况下称为`Units`.

2.  选择`Add Query`

3.  选择`Use SQL Statements`

4.  选择`SELECT which returns rows`

5.  将此查询添加到文本框中`SELECT DISTINCT [Year] FROM [Units] ORDER BY DESC`

6.  取消选中该`Fill a DataTable`选项并将`Return a DataTable`名称更改为`GetDataByDistinctYear`

7.  再次执行上述过程，但使用此 SQL 语句`SELECT [Year],[Month],[Unit],[Site] FROM [Units] WHERE [Year] = @Year`

8.  然后将填充和返回数据表选项的名称更改为`FillByYear`和`GetDataByYear`

9.  这向我的`UnitsTableAdapter`.

10.  然后在我的 WorkSheet 的代码 .vb 文件中，我添加了以下代码：

```
Private Sub Sheet1_Startup() Handles Me.Startup
...
YearComboBox.DataSource = UnitsTableAdapter.GetDataByDistinctYear()

End Sub

Private Sub YearComboBox_SelectedValueChanged(sender As Object, e As System.EventArgs) 
Handles YearComboBox.SelectedValueChanged

Me.UnitsTableAdapter.FillDataByYear(Me.UnitsDataSet.Units, YearComboBox.SelectedValue)

End Sub 
```

我希望至少有人觉得这很有用。

谢谢

# android - Webview 转换到下一页

> ID：15148312
> 
> 赞同：-1
> 
> 时间：2013-03-01T00:28:08.663
> 
> 标签：android, webview

嘿伙计们，我想知道当点击页面上的链接时，是否有可能让 webview 留在 webview 中，而不是进入浏览器。

```
 package com.example.athletic_profile;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.app.Activity;
import android.os.Bundle;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        WebView wv = (WebView) findViewById(R.id.webView);

        WebSettings webSettings = wv.getSettings();
        webSettings.setBuiltInZoomControls(true);

        wv.loadUrl("http://www.yahoo.com");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

# php - 数组被替换而不是添加

> ID：15148316
> 
> 赞同：0
> 
> 时间：2013-03-01T00:28:19.517
> 
> 标签：php, arrays

我有一个数组，我试图将其存储在另一个数组中，但每次我通过表单给出初始数组值时，它都会替换数组中的前一个数组。这可能是什么原因造成的？

```
$bar = array(
    'model' => $_SESSION['model'],
    'qty'   => $_SESSION['qty'],
    'id'    => $_SESSION['id'],
);

$foo = Array(
    'key' => $bar,
); 
```

这些值由类似的形式获取

```
$_SESSION['model'] = $_GET['model']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:36:55.357

好吧，您的评论确实可以说明问题，所以让我首先在这一行中说：

```
$_SESSION['model'] = $_GET['model']; 
```

您正在为键“模型”设置一个新值；就是`=`这样。

如果你想添加它，它应该只是一个问题。

```
$_SESSION['model'][] = $_GET['model']; 
```

这将向数组“模型”添加一个新的数组项，假设模型最初是一个数组。

# c# - Ping 防火墙保护计算机（多人游戏方式）

> ID：15148320
> 
> 赞同：0
> 
> 时间：2013-03-01T00:28:31.970
> 
> 标签：c#, ping, multiplayer

我正在编写游戏服务器，但我似乎无法在 c# 中找到如何 ping 客户端计算机（如果它们受防火墙保护）。

似乎也找不到有关游戏如何进行的任何信息。我的客户端计算机打开了一个 tcp 套接字，但我不知道如何从服务器获取 RTT 到该计算机。

关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:19:24.093

给定只有一个保证的通信路径（在您的情况下是现有的 TCP 连接），您最好的选择可能是`ping`在您的网络通信协议中引入一个命令。客户端网络协议代码应在尽可能短的时间内对该命令做出反应，以避免引入更多与计算机功能有关的延迟，而不是网络延迟，但这并不是太关键，因为慢速计算机必然会具有较慢的游戏性能，因此具有较高的有效延迟。

然后的想法是让服务器发送一个带有时间戳值的 ping 命令，并让客户端简单地将该值重复回服务器。在服务器端接收时间戳并计算往返时间。

根据您尝试的准确度，时间戳可能只需要几个字节。假设您只能将精度降低到几十毫秒，并且根据网络的负载会有很多差异。通过正确的偏移计算，您可以在 2 字节时间戳中以毫秒分辨率获得超过 1 分钟的范围......对于大多数游戏来说已经足够了。

或者您可以发送一个没有附加时间戳的最小 ping 命令并在服务器上跟踪时间戳。在这种情况下，服务器需要保留已发送 ping 请求的列表，并在它们返回时按顺序处理它们。您可能需要至少一个 1 字节的标识符来识别丢失的命令，这样您就不会失去同步，这只会稍微有用一点。

或者，如果您的通信协议在传输的命令包中包含序列号，则让客户端始终返回最后一个命令包的序列号。您可以在服务器上保留一个长度有限的序列号和时间戳队列，并在客户端向您发送任何信息时计算 ping 时间。这增加了一些可能只对 ping 有用的字节开销，但将延迟代码集成到基本通信代码中，为您提供实时延迟数字，而无需安排 ping。

如果您在网络协议中进行命令队列以减少 TCP 开销，请确保您有一种方法可以将 ping 命令推送到队列的头部。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-01T00:32:46.327

有一个完整的[Ping](http://msdn.microsoft.com/en-us/library/a63bsyf0.aspx)课程可能会对您有所帮助。

# java - hibernate - getCurrentSession - 在没有活动事务的情况下获取无效

> ID：15148321
> 
> 赞同：4
> 
> 时间：2013-03-01T00:28:36.490
> 
> 标签：java, hibernate

我正在使用 java 命令行应用程序测试休眠 4.1.9。我已将当前会话上下文配置为线程：

```
<property name="hibernate.current_session_context_class">thread</property> 
```

但是当我调用`sessionFactory.getCurrentSession()`它时会引发异常：

```
Exception in thread "main" org.hibernate.HibernateException: get is not valid without active transaction
    at org.hibernate.context.internal.ThreadLocalSessionContext$TransactionProtectionWrapper.invoke(ThreadLocalSessionContext.java:348)
    at com.sun.proxy.$Proxy9.get(Unknown Source)
.... 
```

我可以使用`openSession`，这并不重要（毕竟这是一个测试）。我只是好奇为什么我不能让这种方法`getCurrentSession`像宣传的那样工作。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T00:56:48.363

第一次调用 sessionFactory.getCurrentSession() 确实会返回一个新会话。问题出在我的配置上。

我有这样的：

```
<property name="hibernate.current_session_context_class">thread</property> 
```

将其更改为此后，它起作用了：

```
<property name="current_session_context_class">thread</property> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-12T18:46:57.480

这是一个有点老的问题，但想正确回答。

通过将属性名称更改`hibernate.current_session_context_class`为`current_session_context_class`, 强制默认`JTASessionContext`。

下面的片段来自 hibernate `SessionFactoryImpl`。顺便说一句，`Environment.CURRENT_SESSION_CONTEXT_CLASS`是`"hibernate.current_session_context_class"`。`ThreadLocalSessionContext`导致这个问题。

```
private CurrentSessionContext buildCurrentSessionContext() {
        String impl = (String) properties.get( Environment.CURRENT_SESSION_CONTEXT_CLASS );
        // for backward-compatibility
        if ( impl == null ) {
            if ( canAccessTransactionManager() ) {
                impl = "jta";
            }
            else {
                return null;
            }
        }

        if ( "jta".equals( impl ) ) {
//          if ( ! transactionFactory().compatibleWithJtaSynchronization() ) {
//              LOG.autoFlushWillNotWork();
//          }
            return new JTASessionContext( this );
        }
        else if ( "thread".equals( impl ) ) {
            return new ThreadLocalSessionContext( this );
        }
        else if ( "managed".equals( impl ) ) {
            return new ManagedSessionContext( this );
        }
        else {
            try {
                Class implClass = serviceRegistry.getService( ClassLoaderService.class ).classForName( impl );
                return (CurrentSessionContext)
                        implClass.getConstructor( new Class[] { SessionFactoryImplementor.class } )
                        .newInstance( this );
            }
            catch( Throwable t ) {
                LOG.unableToConstructCurrentSessionContext( impl, t );
                return null;
            }
        }
    } 
```

请检查`ThreadLocalSessionContext.TransactionProtectionWrapper.invoke`

# python - 如何基于现有工作空间调试 Python 程序

> ID：15148322
> 
> 赞同：0
> 
> 时间：2013-03-01T00:28:53.907
> 
> 标签：python, matlab, pydev

例如，我打开了一个 Python 解释器，并输入了一些命令，所以工作空间中有一些变量。现在我想在工作空间中调试一个 python 程序。在调试之后，我想继续在同一个工作空间上工作。

或者如果有人使用 Matlab，你会看到我所说的类似于 Matlab 的工作环境。这样的IDE功能非常有用，而不是我只想使用我的旧习惯。

现在我正在使用 Eclipse + PyDev。显然，它的功能非常有限。例如，如果我开始使用 PyDev 进行调试，则无法使用以前的工作空间。其次，如果我停止调试，就无法保留调试工作空间。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:36:52.597

```
import pdb; pdb.set_trace() 
```

听起来这可能是您正在寻找的东西。[在此处](http://docs.python.org/2/library/pdb.html)阅读有关内置调试器的信息。

此外，您可能会考虑[使用 PythonXY](https://code.google.com/p/pythonxy/)，因为它的 IDE (Spyder) 与 Matlab 极为相似。它会在其标准解释器中自动导入科学库，并且很容易将其配置为将任何已完成的脚本转储到解释器会话中，以便在它完成后与它进行交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:46:05.147

[Pudb](https://pypi.python.org/pypi/pudb/2012.3)是基于控制台的 python 调试器。
您可以在 python 解释器 shell 和调试模式之间切换。
您可以使用以下命令运行整个脚本：

python -m pudb.run foo.py

# php - 获取表中的所有记录

> ID：15148327
> 
> 赞同：1
> 
> 时间：2013-03-01T00:29:30.103
> 
> 标签：php, mysql, sql, phpmyadmin

我想检索“金额”大于或等于1500的所有记录。问题是即使“金额”小于1500它也会显示在页面中。

```
customers table
id   name
1    sample
2    sample2
3    sample3

payments table

p_id  amount  id(foreign key)
1      800     2
2      800     2
3      1500    1
4      1200    3 
```

应该检索客户 1 和 2，因为金额>= 1500。

谢谢你，米克：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T00:32:59.633

这需要加入表格。`GROUP BY`使用，因为其中一列正在使用聚合，`SUM()`并且该`HAVING`子句用于过滤聚合的结果。

```
SELECT  a.ID, a.name
FROM    customers a
        INNER JOIN payments b
            ON a.ID = b.id
GROUP   BY a.ID, a.name
HAVING  SUM(b.amount) >= 1500 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/a664b/3)

# ruby-on-rails - 需要帮助为我的 Rails 应用程序创建 structure.sql

> ID：15148329
> 
> 赞同：23
> 
> 时间：2013-03-01T00:29:37.133
> 
> 标签：ruby-on-rails, activerecord

我正在尝试手动创建/更新 db/structure.sql 文件以进行测试。我`config.active_record.schema_format = :sql`在 application.rb 中设置了“”。我想知道是否有一个等效于“ `ActiveRecord::SchemaDumper.dump`”的命令将创建或更新 structure.sql。我试过 structure_dump，但输出为零：

```
> ActiveRecord::Base.connection.structure_dump
=> nil 
```

我还尝试将文件传递给该方法：

```
> File.open( File.join(Rails.root, 'db/structure.sql')) { |f| ActiveRecord::Base.connection.structure_dump() }
 => nil 
```

到目前为止，我能够生成或更新 db/structure.sql 的唯一方法是运行 rake db:migrate。有什么选择吗？或者我在尝试运行 ActiveRecord::Base.connection.structure_dump 时遗漏了什么？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-01T00:33:20.680

尝试从数据库中`rake db:structure:dump`重新创建。`db/structure.sql`

# go - 在 Golang 中测试命名约定

> ID：15148331
> 
> 赞同：20
> 
> 时间：2013-03-01T00:29:47.907
> 
> 标签：go

我第一次尝试对 Go 包进行单元测试，但在同一个文件中有几个错误。

```
type FooErr int
type BarErr int

func (e *FooErr) Error () string {
    return "A Foo Error has occurred"
}

func (e *BarErr) Error () string {
    return "A Bar Error has occurred"
} 
```

但是，所有命名约定似乎都是这样的`func TestXxx(*testing.T)`（[来自`testing`包文档](http://golang.org/pkg/testing/)）。这意味着我的测试文件将如下所示：

```
func TestError (t *testing.T) { ... } // FooErr
func TestError (t *testing.T) { ... } // BarErr 
```

这显然是同一个签名的两个函数。处理此问题的推荐方法是什么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-02T02:39:25.090

这里有几点需要考虑：

## 错误

包级导出的错误值通常命名`Err`后跟一些东西，例如`ErrTimeout` [here](http://golang.org/src/pkg/testing/iotest/reader.go?h=ErrTimeout#L69)。这样做是为了让您的包裹的客户可以执行类似的操作

```
if err := yourpkg.Function(); err == yourpkg.ErrTimeout {
  // timeout
} else if err != nil {
  // some other error
} 
```

为了促进这一点，它们通常使用以下方式创建`errors.New`：

```
// Error constants
var (
  ErrTimeout = errors.New("yourpkg: connect timeout")
  ErrInvalid = errors.New("yourpkg: invalid configuration")
) 
```

或使用自定义的未导出类型：

```
type yourpkgError int

// Error constants
var (
  ErrTimeout yourpkgError = iota
  ErrSyntax
  ErrConfig
  ErrInvalid
)

var errText = map[yourpkgError]string{
  ErrTimeout: "yourpkg: connect timed out",
  ...
}

func (e yourpkgError) Error() string { return errText[e] } 
```

后一种方法的一个优点是它不能与任何其他包中的类型进行比较。

如果您在错误中需要一些额外数据，则类型的名称以 结尾`Error`：

```
type SyntaxError struct {
  File           string
  Line, Position int
  Description    string
}

func (e *SyntaxError) Error() string {
  return fmt.Sprintf("%s:%d:%d: %s", e.File, e.Line, e.Position, e.Description)
} 
```

与之前的相等性检查相比，它需要一个类型断言：

```
tree, err := yourpkg.Parse(file)
if serr, ok := err.(*SyntaxError); ok {
  // syntax error
} else if err != nil {
  // other error
} 
```

在任何一种情况下，记录您的代码都很重要，以便您的包的用户了解何时使用它们以及哪些函数可能会返回它们。

## 测试

测试通常以他们正在测试的单元命名。在许多情况下，您不会单独测试错误条件，因此`TestError`这个名称不应该经常出现。然而，测试本身的名称必须是唯一的，并且不限于以与示例相同的方式匹配被测代码中的任何内容。当您测试一段代码的多个条件时，通常最好将测试制定为[Table Driven Test](http://code.google.com/p/go-wiki/wiki/TableDrivenTests)。该 wiki 页面有一些很好的示例，但为了演示错误检查，您可以这样做：

```
func TestParse(t *testing.T) {
  tests := []struct{
    contents string
    err      error
  }{
    {"1st", nil},
    {"2nd", nil},
    {"third", nil},
    {"blah", ErrBadOrdinal},
    {"", ErrUnexpectedEOF},
  }
  for _, test := range tests {
    file := strings.NewReader(test.contents)
    if err := Parse(file); err != test.err {
      t.Errorf("Parse(%q) error %q, want error %q", test.contents, err, test.err)
    }
    // other stuff
  }
} 
```

如果你确实需要一个特殊的测试函数来为一个单元做一些奇怪的事情并且不适合主测试，你通常会把它命名为一个描述性的东西`TestParseTimeout`，包括你正在测试的单元和行为。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-01T05:49:15.860

我将遵循测试包[概述](http://golang.org/pkg/testing/#pkg-overview)部分中记录的示例功能的约定：

“为函数 F、类型 T 和类型 T 上的方法 M 声明示例的命名约定是：”

```
func ExampleF() { ... }
func ExampleT() { ... }
func ExampleT_M() { ... } 
```

godoc 需要示例函数的命名约定，但为了保持一致性，我会遵循相同的测试约定 TestT_M。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-01T00:50:26.123

您不需要让 Xxx 部分`TestXxx`匹配实际的函数名称。为测试添加前缀的约定`Test`足以让`go test`命令获取它们。

就像 Alex Lockwood 在他的评论中所说，如果你愿意，你可以使用 TestFooError 和 TestBarError 。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-30T08:36:27.667

[Go 1.4（2014 年第四季度）](http://tip.golang.org/doc/go1.4#minor_library_changes)将为测试方法增加一种命名约定：

> 测试包有一个新的工具来提供对运行一组测试的更多控制。
> 如果测试代码包含一个函数：

```
func TestMain(m *testing.M) 
```

> 该函数将被调用，而不是直接运行测试。
> 该[`M`结构](http://tip.golang.org/pkg/testing/#M)包含访问和运行测试的方法。

# sql - 如何将2列之间的值转换为csv文本

> ID：15148334
> 
> 赞同：0
> 
> 时间：2013-03-01T00:30:16.247
> 
> 标签：sql, oracle, oracle10g

我有一个表，我们在其中存储类似于以下的数据（开始时间和结束时间都是 varchar2）：

```
StartTime EndTime
00:30      07:30
16:00      19:00
.           .
.           .
.           . 
```

我想要做的是将其转换为相应的半小时数字，以便：

```
00:00 becomes x1 
00:30 x2
01:00 x3
01:30 x4
.. 
```

*午夜（00:00 是 x1，23:30 是 48）*

**我用下面的 SQL 做了什么：**

```
Select StartTime, EndTime, 
    Case StartTime
        When '00:00' Then 'x1'
        When '00:30' Then 'x2' ....
    End StartTime_x
    Case EndTime
        When '00:00' Then 'x1'
        When '00:30' Then 'x2' ....
    End EndTime_x
From myTable 
```

**它给了我这个：**

```
StartTime, EndTime, StartTime_x, EndTime_x
16:00      19:00    x33          x39
19:00      20:00    x39          x41 
```

**我想要实现的是：**

```
StartTime, EndTime, StartTime_x, EndTime_x    Range
16:00      19:00    x33          x39           x33,x34,x35,x36,x37,x38,x39   
19:00      20:00    x39          x41           x39,x40,x41 
```

如何在 starttime_x 和 endtime_x 值之间遍历并创建它们之间的 csv 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:11:28.237

首先，您的 CASE 陈述使事情变得过于复杂。您可以改用数学，更具体地说，Oracle 在进行日期算术时会返回一个数字。此外，转换为日期可确保您正确地进行算术运算。在这样的大型 CASE 语句中打错字很容易，这意味着一切都会出错。该解决方案将处理一天中的任何时间，而不仅仅是特定的半小时。

如果我按如下方式设置表格：

```
create table times ( starttime varchar2(5), endtime varchar2(5) );
insert into times values ( '00:30','07:30');
insert into times values ( '16:00','19:00');
insert into times values ( '19:00','20:00'); 
```

以下查询将为您提供大部分内容：

```
SQL> select starttime
          , endtime
          , trunc( ( to_date(starttime,'hh24:mi') 
                  - trunc(sysdate) ) * 48) + 1 as starttime_x
          , trunc( ( to_date(endtime,'hh24:mi') 
                  - trunc(sysdate) ) * 48) + 1 as endtime_x
       from times;

START ENDTI STARTTIME_X  ENDTIME_X
----- ----- ----------- ----------
00:30 07:30       1     16
16:00 19:00      33     39
19:00 20:00      39     41 
```

然后，您需要添加范围内所有值的逗号分隔列表。如果可能的话，我会避免这种情况……它对你没有多大用处，只能用于展示。但是，这些数据隐含在和之间的差异中`starttime_x`，`endtime_x`所以我看不出它带来了什么好处。

但是，假设您*必须*这样做，您将必须生成开始范围和结束范围之间的行，然后聚合它们。

```
SQL> with the_times as ( 
  select starttime
       , endtime
       , trunc( ( to_date(starttime,'hh24:mi') 
               - trunc(sysdate) ) * 48) + 1 as starttime_x
       , trunc( ( to_date(endtime,'hh24:mi') 
                - trunc(sysdate) ) * 48) + 1 as endtime_x
    from times
         )
 , all_times as (
  select level as t
    from dual
 connect by level <= 48
         )
 select starttime, endtime
      , 'x' || starttime_x as starttime_x, 'x' || endtime_x as endtime_x
      , listagg('x' || t, ', ') within group ( order by t ) as range
   from ( select a.*, b.t
            from the_times a
           cross join all_times b
           where b.t between a.starttime_x and a.endtime_x
                 )
  group by starttime, endtime, 'x' || starttime_x, 'x' || endtime_x;

STARTTIME ENDTIME STA END RANGE
--------- ------- --- --- ---------------------------------------------------------------------------
00:30     07:30   x1  x16 x1, x2, x3, x4, x5, x6, x7, x8, x9, x10, x11, x12, x13, x14, x15, x16
16:00     19:00   x33 x39 x33, x34, x35, x36, x37, x38, x39
19:00     20:00   x39 x41 x39, x40, x41 
```

如您所见，这并不是特别漂亮...

请注意，我`x`后来添加了。向数字添加任意字符只会使您必须做的算术更加困难。在末尾添加它是解决此问题的一种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T09:05:07.280

这是SQL中的解决方案

我为测试插入的值创建的表是：

```
CREATE TABLE mytable AS
Select '00:30' As Starttime, '02:30' As Endtime FROM dual
Union All
Select '01:00' As Starttime, '04:00' As Endtime FROM dual
Union All
Select '00:00' As Starttime, '03:30' As Endtime FROM dual; 
```

这是以您期望的格式返回数据的查询

```
Select X.Starttime,X.Endtime,X.Starttime_X,X.Endtime_X, Listagg(X.Abc,',') Within Group (Order By X.Starttime) 
FROM
(
Select distinct a.*, 'x'||(LEVEL + (TO_NUMBER(substr(starttime_x,INSTR(starttime_x,'x',1)+1))) -1) as abc
From (Select StartTime, EndTime, 
    Case StartTime
        When '00:00' Then 'x1'
        When '00:30' Then 'x2' 
        When '01:00' Then 'x3'
        When '01:30' Then 'x4'
        When '02:00' Then 'x5'
        When '02:30' Then 'x6'
        When '03:00' Then 'x7'
        When '03:30' Then 'x8'
        When '04:00' Then 'x9'
        When '04:30' Then 'x10'
        When '05:00' Then 'x11'
        WHEN '05:30' THEN 'x12'
    End StartTime_x,
    Case EndTime
        When '00:00' Then 'x1'
        When '00:30' Then 'x2' 
        When '01:00' Then 'x3'
        When '01:30' Then 'x4'
        When '02:00' Then 'x5'
        When '02:30' Then 'x6'
        When '03:00' Then 'x7'
        When '03:30' Then 'x8'
        When '04:00' Then 'x9'
        When '04:30' Then 'x10'
        When '05:00' Then 'x11'
        WHEN '05:30' THEN 'x12'
    End Endtime_X
    From Mytable) A
    Connect By Level <= (To_Number(Substr(Endtime_X,Instr(Endtime_X,'x',1)+1)) - To_Number(Substr(Starttime_X,Instr(Starttime_X,'x',1)+1))) + 1
    ) X
    GROUP BY x.starttime, x.endtime,X.Starttime_X,X.Endtime_x; 
```

输出是：

```
00:00   03:30   x1  x8  x1,x2,x3,x4,x5,x6,x7,x8
00:30   02:30   x2  x6  x2,x3,x4,x5,x6
01:00   04:00   x3  x9  x3,x4,x5,x6,x7,x8,x9 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:10:05.770

对于使用 oracle 10g 的任何人，我都根据上面 Ben 的回答在此处添加了解决方案：

我只是用 wm_concat 更改了 listagg：

```
with the_times as ( 
  select starttime
       , endtime
       , trunc( ( to_date(starttime,'hh24:mi') 
               - trunc(sysdate) ) * 48) + 1 as starttime_x
       , trunc( ( to_date(endtime,'hh24:mi') 
                - trunc(sysdate) ) * 48) + 1 as endtime_x
    from times
         )
 , all_times as (
  select level as t
    from dual
 connect by level <= 48
         )
select starttime, endtime
      , 'x' || starttime_x as starttime_x, 'x' || endtime_x as endtime_x
      , wm_concat('x' || t)  as range
   from ( select a.*, b.t
            from the_times a
           cross join all_times b
           where b.t between a.starttime_x and a.endtime_x
                 )
  group by starttime, endtime, 'x' || starttime_x, 'x' || endtime_x; 
```

# javascript - 我需要删除 .click / .change / 等的侦听器吗？

> ID：15148340
> 
> 赞同：0
> 
> 时间：2013-03-01T00:30:47.010
> 
> 标签：javascript, events, listener

当您创建事件侦听器 .on('click', functionA) 时，最好在不再需要事件侦听器时使用 .off('click', functionA); 删除它。

但这是否也适用于 .click、.change 等？我们需要关闭这些吗？

我正在开发一个带有数百个 JS 页面的单个 DOM 的 UI，所以我想知道这些点击事件是否存在不必要的侦听器并影响性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:03:45.127

.on('click', functionA) 与 .click() 相同，因为 .on('change', functionA) 与 onchange() 相同，所以我认为是这样。

# perl - Perl 中的 Spreadsheet::ParseExcel 模块遇到问题？

> ID：15148341
> 
> 赞同：0
> 
> 时间：2013-03-01T00:30:47.407
> 
> 标签：perl, perl-module

我是 perl 的新手，我刚刚开始使用模块 Spreadsheet::ParseExcel。我不想在我正在使用的 Excel 工作表上写任何东西。该脚本基本上应该通过 Excel 工作表运行并逐行打印值。我有大约 250 行和 3 列。所以输出必须是这样的：

```
 Glendale Academy  Mark  40%
   Glendale Academy  Tom   60%
   .....
   .....
   ..... 
```

在终端上。

我正在使用这个Windows（我应该考虑`Win32::OLE`和`Win32::OLE::Const 'Microsoft Excel'`。（表格的格式应该是什么？.xls，.xlsx，.csv）这是我到目前为止所做的：在浏览了这个网站上的很多脚本之后，我认为使用“拆分”将是最简单的。现在它是 excel，这非常容易，我无法理解如何使用它。

到目前为止，我的脚本是这样的；

```
use strict;
use warnings;
use Spreadsheet::ParseExcel;

my $reader   = Excel::Write::XLSX->new();  # I am sure something is wrong here
my $workbook  = Spreadsheet::WriteExcel->new('Draft.xls');
#my $workbook = $reader->read_file( 'Draft.xlsx' );

if ( !defined $workbook ) {
    die $reader->error(), "\n";
}

for my $worksheet ( $workbook->worksheets() ) {
    my $sheetname = $worksheet->name();
    print "Sheet = $sheetname\n";
    while ( my $row = $worksheet->next_row() ) {
        while ( my $cell = $row->next_cell() ) {
            my $row   = $cell->row();
            my $col   = $cell->col();
            my $value = $cell->value();
            print "  Cell ($row, $col) = $value\n";
        }
    }
} 
```

任何形式的帮助将不胜感激；现在卡了一个星期……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:27:11.013

初始程序中存在一些错误：

1.  该程序正在使用`Excel::Write::XLSX`其中包含拼写错误，未导入并且与 Spreadsheet::ParseExcel 或读取数据没有任何关系。
2.  然后程序使用`Spreadsheet::WriteExcel`未导入且与 Spreadsheet::ParseExcel 或读取数据没有任何关系的程序。
3.  然后该程序似乎使用 Excel::Reader::XLSX 接口（`next_row`和`next_cell`）。

如果您想从 Excel XLS 文件中读取数据，只需使用[Spreadsheet::ParseExcel](http://search.cpan.org/~jmcnamara/Spreadsheet-ParseExcel/lib/Spreadsheet/ParseExcel.pm)文档中的界面和示例程序：

```
#!/usr/bin/perl -w

use strict;
use Spreadsheet::ParseExcel;

my $parser   = Spreadsheet::ParseExcel->new();
my $workbook = $parser->parse('Draft.xls');

if ( !defined $workbook ) {
    die $parser->error(), ".\n";
}

for my $worksheet ( $workbook->worksheets() ) {

    my ( $row_min, $row_max ) = $worksheet->row_range();
    my ( $col_min, $col_max ) = $worksheet->col_range();

    for my $row ( $row_min .. $row_max ) {
        for my $col ( $col_min .. $col_max ) {

            my $cell = $worksheet->get_cell( $row, $col );
            next unless $cell;

            print "Row, Col    = ($row, $col)\n";
            print "Value       = ", $cell->value(),       "\n";
            print "Unformatted = ", $cell->unformatted(), "\n";
            print "\n";
        }
    }
}

__END__ 
```

当针对您上面显示的示例电子表格运行时，会给出：

```
Row, Col    = (0, 0)
Value       = Glendale Academy
Unformatted = Glendale Academy

Row, Col    = (0, 1)
Value       = Mark
Unformatted = Mark

Row, Col    = (0, 2)
Value       = 40%
Unformatted = 0.4

Row, Col    = (1, 0)
Value       = Glendale Academy
Unformatted = Glendale Academy

Row, Col    = (1, 1)
Value       = Tom
Unformatted = Tom

Row, Col    = (1, 2)
Value       = 60%
Unformatted = 0.6 
```

# apache - 如何为 .htaccess 编写多个条件和规则？

> ID：15148343
> 
> 赞同：3
> 
> 时间：2013-03-01T00:30:53.977
> 
> 标签：apache, .htaccess, mod-rewrite

我的网站的 .htaccess 文件中有以下内容

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{SCRIPT_FILENAME} !-f
    RewriteCond %{SCRIPT_FILENAME} !-d
    RewriteRule ^(.*)$ profile.php?membername=$1 [L]
    RewriteRule ^poem/(.*)/?$ poem.php?id=$1 [L,NC]
</IfModule>

# Works
RewriteRule ^(.*)$ profile.php?membername=$1 [L]
# Does not work
RewriteRule ^poem/(.*)/?$ poem.php?id=$1 [L,NC] 
```

如果将其全部更改为以下内容，则结果相反。

```
# No longer works:
RewriteRule ^(.*)$ profile.php?membername=$1 [L]
# Now works:
RewriteRule ^poem/(.*)/?$ poem.php?id=$1 [L,NC]

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{SCRIPT_FILENAME} -f
    RewriteCond %{SCRIPT_FILENAME} -d
    RewriteRule ^(.*)$ profile.php?membername=$1 [L]
    RewriteRule ^poem/(.*)/?$ poem.php?id=$1 [L,NC]
</IfModule> 
```

这是怎么回事？我不知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T01:08:01.133

看起来您需要在这里做的是保持负面测试`REQUEST_FILENAME`并颠倒规则的顺序。否则，更通用的`^(.*)`总是首先匹配，然后覆盖`^poem/`。

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    # Negative conditions here...
    # Using REQUEST_FILENAME instead of SCRIPT_FILENAME
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    # Match the more specific rule first...
    RewriteRule ^poem/(.*)/?$ poem.php?id=$1 [L,NC]

    # Match the generic rule last.
    RewriteRule ^(.*)$ profile.php?membername=$1 [L]
</IfModule> 
```

# html - 缓存清除脚本的 Git 提交哈希

> ID：15148345
> 
> 赞同：0
> 
> 时间：2013-03-01T00:31:10.800
> 
> 标签：html, git

我在我的投资组合中工作，我使用 Git 进行版本控制。现在我想使用 Git 提交哈希来缓存图像和 CSS，JavaScript ala`image.jpg?923jjdf8e`

我认为最好有一个在提交后执行的脚本，它检查所有文件中的 var `{{/url/to/file.jpg}}`，而不是用 url + hash 替换 var。

该脚本将用于`git log --format="%H" --max-count=1 README.md`确定哈希。

如果已经有为此目的的脚本有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:05:58.813

我想我真的不明白你为什么要这样做，但我认为`git hash-object`你需要知道图像的哈希值。

我认为你说的脚本应该在提交**之前**执行，所以提交包含修改后的版本而不是变量（或者你想在提交中记录变量？）。

然后，我认为您可以使用预提交挂钩（以您`REPO_BASE/.git/hooks/pre-commit.sample`为基础），我认为您可以在其中做一些`awk`魔术，以便用应用于`git hash-object`该变量的输出替换您的变量。

但是，真的 - 我根本看不到好处。如果您试图节省一些磁盘空间，请不要忘记您的对象可能被打包在存储库中。

# ruby-on-rails - Ruby on Rails：Errno::EACCES（权限被拒绝 - oo_26502

> ID：15148346
> 
> 赞同：0
> 
> 时间：2013-03-01T00:31:23.943
> 
> 标签：ruby-on-rails, linux, ruby-on-rails-3, file-permissions

我有一个在 Apache/passenger 下运行的 Rails 应用程序，用户上传一个文件，该文件被写入 /tmp，然后应用程序尝试读取相同的文件，并返回上述错误。

/tmp 有这些权限

drwxrwxrwt 7 根 4096 2 月 28 日 16:25 tmp

并且写入 /tmp 的文件归“app”所有

-rw-r--r-- 1 应用 www 74359 Feb 28 15:07 filename.xlsx

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T19:13:20.223

需要定义 ROO_TMP，请参阅

[http://nopressure.co.uk/post/25029398591/errno-eacces-in-controller-upload-rails-roo](http://nopressure.co.uk/post/25029398591/errno-eacces-in-controller-upload-rails-roo)

# ruby-on-rails - AbstractController::ActionNotFound - 奇怪的错误

> ID：15148348
> 
> 赞同：3
> 
> 时间：2013-03-01T00:31:29.527
> 
> 标签：ruby-on-rails, jquery, ruby-on-rails-3.2

我面临一个非常奇怪的路由错误，我似乎无法在 Rails 3.2.11 中解决

错误是：AbstractController::ActionNotFound（找不到 SubmissionsController 的操作“bulk_submissions_url”）

我有一条看起来像这样的路线：

```
match 'submissions/bulk_submissions_url' => 'submissions#bulk_submissions_url', :as => 'bulk_submissions_url', :via => :post 
```

如下所示的 SubmissionsController：

```
class SubmissionsController < ApplicationController

...
def bulk_submissions_url
    if signed_in?

      #get the cert that the user has if they are returning to tutorial
      if current_user.enrollments and current_user.enrollments.length > 0
        @enrollment = current_user.enrollments.last
      else
        #handle this
      end  

      @submission = Submission.create!(url: params[:url], description: "Please edit this description", work_type: "other", date_completed: DateTime.now.to_date)  

      if @submission.save
        @enrollment.submissions << @submission
        render :json => { success: true, submission_id: @submission.id }
      else
        render :json => { success: false }
      end

    end
end 
```

我正在使用 jQuery 发出请求：

```
//save the submission
$.ajax({
type: 'POST',
    url: '<%= bulk_submissions_url_path %>',
    data: {url : $("#tutorial_add_work_url_input").val()},
    dataType: 'json'
}); 
```

有什么我想念的吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:44:51.070

您在名称上使用 _url 是否有原因？这可能会导致混淆，因为名为 my_route 的路由可以通过 my_route_path 和 my_route_url 之类的方法访问，但是如果您将路由命名为 my_route_url，那么它应该由 my_route_url_path 和 my_route_url_url 访问，这是一团糟。

试试这条路线：

```
match 'submissions/bulk_submissions' => 'submissions#bulk_submissions', :as => 'bulk_submissions', :via => :post 
```

控制器：

```
class SubmissionsController < ApplicationController

  def bulk_submissions
    if signed_in?

      #get the cert that the user has if they are returning to tutorial
      if current_user.enrollments and current_user.enrollments.length > 0
        @enrollment = current_user.enrollments.last
      else
        #handle this
      end

      @submission = Submission.create!(url: params[:url], description: "Please edit this description", work_type: "other", date_completed: DateTime.now.to_date)

      if @submission.save
        @enrollment.submissions << @submission
        render :json => { success: true, submission_id: @submission.id }
      else
        render :json => { success: false }
      end

    end
  end
end 
```

和阿贾克斯

```
//save the submission
$.ajax({
type: 'POST',
  url: '<%= bulk_submissions_path %>',
  data: {url : $("#tutorial_add_work_url_input").val()},
  dataType: 'json'
}); 
```

# javascript - js，放置文件时，不要打开它

> ID：15148350
> 
> 赞同：1
> 
> 时间：2013-03-01T00:31:35.460
> 
> 标签：javascript, drag-and-drop

我正在尝试制作拖放功能，并且我已经阅读了很多参考资料。

当我自己做的时候。当我删除一个文件时，浏览器会自动加载并将页面更新为删除的文件，这是默认的。因此，不会触发拖放事件。

```
el.on('dragover', function(){
    alert(1);
});

el.on('drop', function(){
    alert(1);
}); 
```

我检查了这些示例，但找不到从浏览器中删除此默认重新加载功能的特定行。

我错过了什么？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T00:58:29.253

您应该使用`preventDefault()`函数参数的方法。
请参见此处的示例：http: [//jsfiddle.net/kze6V/](http://jsfiddle.net/kze6V/)

```
document.addEventListener('drop', function(e) { e.preventDefault(); }, false); 
```

# javascript - 将元素直接置于屏幕中心。jQuery

> ID：15148353
> 
> 赞同：-5
> 
> 时间：2013-03-01T00:31:39.247
> 
> 标签：javascript, jquery, html

只想使用jquery将蓝色框直接居中在屏幕中央。

jsFiddle：http: [//jsfiddle.net/Pxjkk/](http://jsfiddle.net/Pxjkk/)

```
<html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:42:53.187

要将蓝色框居中，必须将其位置设置为`position:absolute;`

如果您的蓝色框动态改变大小，则必须使用 javascript 将其居中。

这是一个简单的例子：

```
$('#color')
    .css('top','50%')
    .css('left','50%')
    .css('margin-left','-'+($('#color').outerWidth()/2)+'px')
    .css('margin-top','-'+($('#color').outerHeight()/2)+'px'); 
```

确保它保持在浏览器调整大小的中心：

```
$(document).bind('resize', function(){
        $('#color')
        .css('top','50%')
        .css('left','50%')
        .css('margin-left','-'+($('#color').outerWidth()/2)+'px')
        .css('margin-top','-'+($('#color').outerHeight()/2)+'px');
    }); 
```

将居中代码包装到一个函数中并在蓝色框的大小发生变化时调用它可能是一个好主意。

这是编辑后的 ​​jsFiddle：

[http://jsfiddle.net/mdkpS/](http://jsfiddle.net/mdkpS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:35:45.853

css中元素居中的基础知识：

*   为您的元素制作一个容器并将其放在`body`水平位置（在屏幕中间居中）
*   设置`position: relative`在容器上
*   `position: absolute`在元素上设置
*   将固定`width`和添加`height`到元素
*   设置`top: 50%`并`left: 50%`打开元素
*   将`margin-left`和分别设置`margin-top`为负的`width`一半`height`

相同的逻辑适用于 jQuery，只是您可以动态计算尺寸和边距。

# teamcity - 我可以在代理上运行构建时重新启动 TeamCity 服务器吗？

> ID：15148358
> 
> 赞同：3
> 
> 时间：2013-03-01T00:32:16.197
> 
> 标签：teamcity

我们的 TeamCity 服务器需要硬件升级，因此我们必须将其关闭一段时间。

但是，我们有 30 个代理和 10 个团队在使用它，因此要找到一个没有代理运行构建的时间段几乎是不可能的。

我希望我可以在构建运行时停止/启动服务器，并且 TC 会足够聪明，构建代理可以在服务器停机期间继续构建，并且一旦服务器恢复，它们就会重新注册到运行状态向上。

有谁知道这是否是一个正确的假设？

还是服务器重启会导致所有构建停止？

干杯！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T10:31:25.673

我确定您可以在代理运行构建时重新启动 TeamCity Web 服务器。当 Web 服务器恢复时，代理将重新注册，构建不会终止。但是，我不确定构建完成后它会重试多长时间。我们的构建大约需要一个小时，因此在构建运行时总是很容易找到一小段时间。

您将遇到的问题是运行时间短的构建意味着您几乎没有时间将其删除。

如果您能够在非工作时间安排 TeamCity 的停机时间，那将是最简单的。升级 TeamCity 软件版本时会做什么？

如果由于代理离线时间过长而被自动取消，TeamCity 也会重新运行构建。这可能需要一段时间，或者如果原始代理重新注册并且未声明它正在运行该构建，则会很快发生。

# parsing - EBNF语法到ANTLR3？

> ID：15148369
> 
> 赞同：0
> 
> 时间：2013-03-01T00:33:03.077
> 
> 标签：parsing, antlr, converter, grammar, ebnf

我有 Jass 脚本语言的这个 EBNF 语法。
需要做什么才能将其转换为与 ANTLR 3.5 一起使用？
此外，是否有任何工具可以帮助我这样做？

```
//----------------------------------------------------------------------
// Global Declarations
//----------------------------------------------------------------------
program  ::= file+
file     ::= newline? ( declr newline )* func*
declr    ::= typedef
           | globals
           | native_func
typedef  ::= 'type' id 'extends' ( 'handle' | id )
globals  ::= 'globals' newline global_var_list 'endglobals'
global_var_list
         ::= ( 'constant' type id '=' expr newline | var_declr newline )*
native_func
         ::= 'constant'? 'native' func_declr
func_declr
         ::= id 'takes' ( 'nothing' | param_list ) 'returns' ( type | 'nothing' )
param_list
         ::= type id ( ',' type id )*
func     ::= 'constant'? 'function' func_declr newline local_var_list statement_list 'endfunction' newline

//----------------------------------------------------------------------
// Local Declarations
//----------------------------------------------------------------------
local_var_list
         ::= ( 'local' var_declr newline )*
var_declr
         ::= type id ( '=' expr )?
           | type 'array' id
statement_list
         ::= ( statement newline )*
statement
         ::= set
           | call
           | ifthenelse
           | loop
           | exitwhen
           | return
           | debug
set      ::= 'set' id '=' expr
           | 'set' id '[' expr ']' '=' expr
call     ::= 'call' id '(' args? ')'
args     ::= expr ( ',' expr )*
ifthenelse
         ::= 'if' expr 'then' newline statement_list else_clause? 'endif'
else_clause
         ::= 'else' newline statement_list
           | 'elseif' expr 'then' newline statement_list else_clause?
loop     ::= 'loop' newline statement_list 'endloop'
exitwhen ::= 'exitwhen' expr
return   ::= 'return' expr?
debug    ::= 'debug' ( set | call | ifthenelse | loop )

//----------------------------------------------------------------------
// Expressions
//----------------------------------------------------------------------
expr     ::= binary_op
           | unary_op
           | func_call
           | array_ref
           | func_ref
           | id
           | const
           | parens
binary_op
         ::= expr ( [+-*/><] | '==' | '!=' | '>=' | '<=' | 'and' | 'or' ) expr
unary_op ::= ( '+' | '-' | 'not' ) expr
func_call
         ::= id '(' args? ')'
array_ref
         ::= id '[' expr ']'
func_ref ::= 'function' id
const    ::= int_const
           | real_const
           | bool_const
           | string_const
           | 'null'
int_const
         ::= decimal
           | octal
           | hex
           | fourcc
decimal  ::= [1-9] [0-9]*
octal    ::= '0' [0-7]*
hex      ::= '$' [0-9a-fA-F]+
           | '0' [xX] [0-9a-fA-F]+
fourcc   ::= '' ' .{4} ' ''
real_const
         ::= [0-9]+ '.' [0-9]*
           | '.' [0-9]+
bool_const
         ::= 'true'
           | 'false'
string_const
         ::= '"' .* '"'
parens   ::= '(' expr ')'

//----------------------------------------------------------------------
// Base RegEx
//----------------------------------------------------------------------
type     ::= id
           | 'code'
           | 'handle'
           | 'integer'
           | 'real'
           | 'boolean'
           | 'string'
id       ::= [a-zA-Z] ( [a-zA-Z0-9_]* [a-zA-Z0-9] )?
newline  ::= '\n'+ 
```

在此先感谢您提供的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:26:00.743

语法描述语言真的很小。他们的语法只有十几个规则。

您可以做的（我已经做过的）是使用 ANTLR 为 EBNF 表示法编写语法，并使用它将您拥有的内容翻译成 ANTLR 语法。

这应该是一天左右的工作，最多两天。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T01:27:18.637

免责声明：我实际上并没有使用 ANTLR，因此使用过的人可能会提供更详细的信息。

ANTLR 生成递归下降解析器，因此必须重构您的语法以消除左递归，例如`expr`：

```
expr     ::= binary_op
...
binary_op
         ::= expr ( [+-*/><] | '==' | '!=' | '>=' | '<=' | 'and' | 'or' ) expr 
```

在解析`expr`时，解析器会尝试`binary_op`作为一个选项，遇到另一个`expr`，然后尝试在不消耗任何输入的情况下递归地解析它，您现在将拥有无限递归。

这通常通过按照以下方式重新制定语法来处理

```
expr     ::= binary_op
...
binary_op
         ::= term ( [+-] term )

term = factor ( [*/] factor)

factor = id
         | const
         | parens
         ... 
```

等等。

这不是一个简单的过程，但也不是不可能做到的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T05:05:17.640

您询问了任何建议，但您的问题奇怪地特定于 Antlr 3.5。您有使用 Antlr 3.5 的要求吗？了解您将使用语法做什么会有所帮助：简单的语法验证还是完整的解释器？

如果你可以考虑使用 Antlr 4，你应该这样做。它比 Antlr 3 更好地处理左因子规则，并且由于您似乎只是在学习 Antlr，Antlr 4 IMO 将更容易上手。如果您真的需要 AST，那么请使用 Antlr 3

不幸的是，一个自动转换工具充其量只会给你一个糟糕的语法起点。

至于从哪里/如何开始，最好的建议是获取 Java 语法的副本（对于[Antlr](https://github.com/antlr/examples-v3) 3.5的[java.g](https://github.com/antlr/grammars-v4)或对于 Antlr 4 的 java.g4）作为一个工作示例——Jess 似乎与java 语法应该让您清楚地了解如何进行。

# python - urllib2 不返回 HTML

> ID：15148376
> 
> 赞同：0
> 
> 时间：2013-03-01T00:33:27.887
> 
> 标签：python, html, web-crawler, urllib2

试图通过第三方网站进行蜘蛛/爬网，但我似乎遇到了障碍：

urlopen'ing 网站得到响应，但阅读和打印 HTML 似乎告诉我我没有得到任何回报。这可能是由于另一端的某种阻塞造成的吗？还是什么？

目前，我正在尝试打开《纽约时报》的文章。主页返回 HTML，文章，呃，不。

```
try:
    source = urllib.urlopen(target_site)
    html =  source.read()
    print "HTML: ", html.lower() 
```

输出：

```
HTML:
(other stuff) 
```

哦，它有时也会超时，但我希望这是一个不同的故事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T00:51:46.080

这不是*纽约时报*文章的问题。它可能会拒绝您的页面，因为您在标题中没有合适的用户代理。[这篇文章](https://stackoverflow.com/questions/802134/changing-user-agent-on-urllib2-urlopen)告诉你如何去做。

如果是这种情况，试试这个：

```
try:
    req = urllib2.Request(target_site)
    req.add_header("User-Agent", "Mozilla/5.0")
    source = urllib.urlopen(req)
    html =  source.read()
    print "HTML: ", html.lower() 
```

刮那个。这不是*《纽约时报》*文章的问题。这是因为 nytimes.com 试图给你 cookie；但它不能，这会导致重定向循环。您需要创建一个可以处理 cookie 的自定义 url 打开器。您可以通过以下方式访问[它](http://www.nytimes.com/2013/03/01/us/politics/administration-to-urge-justices-to-overturn-a-gay-marriage-ban.html?hp&_r=0)：

```
#make an url opener that can handle cookies
opener = urllib2.build_opener(urllib2.HTTPCookieHandler())
#read in the site
response = opener.open(target_site)
html = response.read() 
```

要验证它是否是正确的文章，您可以将其写出来并在网络浏览器中打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T06:38:49.063

我想我会为[requests](http://docs.python-requests.org/en/latest/)添加一个插件。它可以相对容易地做到这一点。`easy_install requests`或之后`pip install requests`：

```
import requests

page = requests.get(page_url)
html = page.content 
```

**编辑：**我看到了在问题评论中发布的 URL，并认为我会确认该`requests.get`页面确实适用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-05T17:20:15.970

对于在使用 urllib2 时遇到此问题的任何其他人，问题也可能是您仅返回带有重定向链的元标记。您可以通过打印打开 url 的结果并 read() 来确认这一点：

```
<meta http-equiv="refresh" content="0;url=http://www.yourURL.com.mx/ads.txt"/> 
```

首先检查您是否将 cookie 正确保存到 jar 中，然后查看此链接：[how to follow meta refreshes in Python](https://stackoverflow.com/questions/2318446/how-to-follow-meta-refreshes-in-python)

# eclipse - Eclipse Juno 缺少 localVariable 颜色

> ID：15148378
> 
> 赞同：0
> 
> 时间：2013-03-01T00:33:40.107
> 
> 标签：eclipse

前几天安装了juno，然后是颜色主题插件，选择了zenburn作为主题。我注意到与 indigo 的一个令人讨厌的区别：在 Javascript 中，局部变量没有应用 localVariable 或 localVariableDeclaration 颜色，这是我最喜欢的功能之一

![这是靛蓝，其中局部变量 x 的颜色与全局变量 y 的颜色不同](../Images/50b99d59ca60729b8db8aaaf4f1c82bd.png)

![这是朱诺，其中本地 var x 像 y 一样被涂成白色 :(](../Images/7d4056ca035ebaea0e592fa87618f085.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:56:59.943

找到了“修复”它的方法

去了

首选项 > JavaScript > 编辑器 > 语法着色

即使在此处启用了设置的元​​素局部变量声明和引用中，禁用然后启用它们并点击应用为我修复了它。

# .htaccess - 如何在 .htaccess 和 web.config 之间进行转换？

> ID：15148380
> 
> 赞同：0
> 
> 时间：2013-03-01T00:33:46.067
> 
> 标签：.htaccess, iis, url-rewriting, web-config, rewrite

我无权访问控制面板工具，不知道如何正确执行此操作。我创建了以下重写规则来节省大量工作 - 但在实现服务器的 Microsoft 时效果并不好。

```
RewriteRule ^scotsman-photo-products-([A-Za-z0-9-_]+)/?$ scotsman-photo-products.php?pg=$1 
RewriteRule ^make-scotsman-photo-([A-Za-z0-9-_]+)/?$ make-scotsman-photo.php?pg=$1 
```

似乎对配置文件所做的任何更改都会产生 500 错误 - 除非通过“官方”路由，否则服务器是否可能不允许任何更改？

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <defaultDocument>
            <files>
                <add value="index.php" />
            </files>
        </defaultDocument>
    </system.webServer>
</configuration> 
```

是当前的内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T00:37:28.650

```
<rewrite>
    <rules>
    <rule name="Rule Name" stopProcessing="true">
    <match url="^scotsman-photo-products-([A-Za-z0-9-_]+)/?$" />
    <conditions>
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
        <add input="{SCRIPT_NAME}" pattern="^/(files|images|js|css|robots.txt|sitemap.xml|favicon.ico)($|/.*$)" negate="true" />
    </conditions>
    <action type="Rewrite" url="scotsman-photo-products.php?pg={R:0}" />
</rule>
<rule name="Other Rule Name" stopProcessing="true">
    <match url="^make-scotsman-photo-([A-Za-z0-9-_]+)/?$" />
    <conditions>
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
        <add input="{SCRIPT_NAME}" pattern="^/(files|images|js|css|robots.txt|sitemap.xml|favicon.ico)($|/.*$)" negate="true" />
    </conditions>
    <action type="Rewrite" url="make-scotsman-photo.php?pg={R:0}" />
</rule>
</rules>
</rewrite> 
```

我认为这可能会奏效。条件是可选的。

第一个条件声明如果该位置实际上有文件，则不使用该规则。第二个类似，如果它实际上是一个目录，它就会停止。如果 URL 是在模式中找到的类型，则第三个使规则不运行。

# java - 我不断出现越界错误

> ID：15148383
> 
> 赞同：1
> 
> 时间：2013-03-01T00:34:08.060
> 
> 标签：java, arrays

有人可以帮我解决数组大小吗？反向数组不断超出范围，我不知道如何修复它。该程序的目的是让用户输入一个句子，程序将找出存在多少回文，以及它们是什么

```
package palindrome;

import java.util.*;
 import javax.swing.*;

class Palindrome2
{
   public static void main(String args[])
   {
  //String[] reverse; //Reverse word
  String[] words;
  int count = 0;
  String palindromes[];

  //User Input
  String original = JOptionPane.showInputDialog("Words that are the same "
          + "forwards and backwards are called palindromes.\n"
          + "This program determines if a word is a palindrome.\n\n"
          + "Enter a word: ");

  //Length of the Input
  int length = original.length();

  //Spliting the original into an Array

  words = original.split("\\s");

  //Reversing the User's Input
  String[] reverse = new String[words.length];

  for(int j = 0; j < words.length; j++){

      int wordLength = words[j].length();

      for ( int i = wordLength - 1 ; i >= 0 ; i-- ) {
       reverse[i] = reverse[i] + original.charAt(i);
   }
  }

  //Determining if it is a Palindrome and Output 

  for (int l = 0; l < words.length; l++){

      if (original.equalsIgnoreCase(reverse[l])) {

       count = count + 1;

       palindromes = new String[count];
       palindromes[l] = reverse[l];

   }
  else {

  }
   }

JOptionPane.showMessageDialog(null, "There are " + count + " Palindromes"
        + " in this sentence");

JOptionPane.showMessageDialog(null, "The palindromes are:\n"+ palindromes); 
```

}

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:37:48.353

也许你的意思是

```
reverse[j] = reverse[j] + original.charAt(i); 
```

# ruby-on-rails - Rspec any_instance should_receive 应该收到以下消息但没有

> ID：15148391
> 
> 赞同：5
> 
> 时间：2013-03-01T00:34:59.787
> 
> 标签：ruby-on-rails, rspec, update-attributes

我在 rspec 的脚手架测试中遇到问题，其中 any_instance.should_receive 抛出错误：Failure/Error: Unable to find matching line from backtrace 确切地说，一个实例应该收到以下消息但没有：update_attributes

Rspec 代码，使用 FactoryGirl 和 strong_parameters：

```
describe "PUT update" do
   describe "with valid params" do
     it "updates the requested acquisition" do
       puts "starting updates the requested acquisition"
       acquisition = create(:acquisition)
       # Assuming there are no other acquisitions in the database, this
       # specifies that the Acquisition created on the previous line
       # receives the :update_attributes message with whatever params are
       # submitted in the request.
       Acquisition.any_instance.should_receive(:update_attributes).with(:acquisition =>    {:person_id => '10'})
      puts "before the put "
       put :update, :id => acquisition.id, :acquisition => { :person_id => '10'}
       puts "ending the updates the requested acquisition"
     end   
  end
end 
```

控制器代码：

```
def update
    @acquisition = Acquisition.find(params[:id])
    puts "acquisition is #{@acquisition.inspect}"
    respond_to do |format|
      if @acquisition.update_attributes!(acquisition_params)
        puts "updated the thing! #{@acquisition.inspect}"
        format.html { redirect_to(@acquisition, :notice => 'Acquisition was successfully updated.') }
        format.xml  { head :ok }
      else
        puts "failed to update the thing!"
        format.html { render :action => "edit" }
        format.xml  { render :xml => @acquisition.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

测试输出：

```
starting updates the requested acquisition
before the put
acquisition is #<Acquisition id: 502, sample_id: 7, person_id: 7, method: nil>
params is acqusition_params is {"person_id"=>"10"}
updated the thing! #<Acquisition id: 502, sample_id: 7, person_id: 10, method: nil>
ending the updates the requested acquisition
F

1) AcquisitionsController PUT update with valid params updates the requested acquisition
 Failure/Error: Unable to find matching line from backtrace
   Exactly one instance should have received the following message(s) but didn't: update_attributes 
```

鉴于我在控制器中打印出更新的对象并且它是正确的，为什么测试失败了？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T01:10:14.317

这可能是您粘贴中的拼写错误，但如果不是，您的测试应该测试是否`update_attributes!`收到，而不是`update_attributes`

```
Acquisition.any_instance.should_receive(:update_attributes!) 
```

# javascript - 如何在 JavaScript 中编写递归阻塞函数而不溢出堆栈？

> ID：15148394
> 
> 赞同：2
> 
> 时间：2013-03-01T00:35:25.997
> 
> 标签：javascript, multithreading

感谢您的关注。

# 背景

我正在为客户端编写一个重 JavaScript 的应用程序，并且需要一个实用函数，我可以向其传递条件和回调函数。如果不满足条件，我需要等待几毫秒，然后再次测试。如果满足条件，则执行回调。

# 到目前为止我所拥有的

我已将此方法编写为实用程序类的一部分：

```
 ThreadLocker: function (condition, callback) {
        //If condition is true then it resumes running code
        if (condition()) {
            callback();
        } else { //Else it waits 10ms and tries again
            setTimeout(Util.ThreadLocker(condition,callback), 10);
        }
    } 
```

以下是它的使用方法：

```
 var condition = function(){return (myGlobalVariable == "foo") ? true : false;};
   var callback = function(){alert("Ready to rock!");};

    Util.Threadlocker(condition,callback); 
```

# 问题

即使我将超时时间设置为 10 *seconds*，我也会立即发生堆栈溢出。这是 Chrome 给我的：

“超出最大调用堆栈大小。”

如果您查看堆栈，即使 setTimeOut 设置为 10 秒，该函数也似乎在一两毫秒内被调用了几十次。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T00:49:30.910

线

```
setTimeout(Util.ThreadLocker(condition,callback), 10); 
```

直接调用你的'ThreadLocker'函数，没有设置超时。尝试

```
setTimeout(function () { Util.ThreadLocker(condition,callback); }, 10); 
```

您可能还需要知道，javascript 不是多线程的。它只是在 n 毫秒后调度您的函数，或者在没有执行任何其他操作时立即调度您的函数。间隔也一样，如果你创建一个 10 毫秒的间隔：任务需要 30 毫秒，它会在第 10 毫秒执行，然后在第 40 毫秒执行（在第一个任务完成后立即执行）。

所以你不能真正锁定，但也没有其他东西可以竞争你的代码。

至于堆栈溢出：如果你真的有这种情况，例如。一个可能溢出 500 万行堆栈的递归函数（在 IE 中，[页面加载期间执行的 Javascript 行数](https://stackoverflow.com/questions/13364177/number-of-javascript-lines-executed-during-page-load)），您可以使用 0 的超时来延迟函数：

```
setTimeout(function () { }, 0); 
```

这也是 underscore 的[defer](http://underscorejs.org/#defer)工作方式。

# java - 如何在 Eclipse 中禁用错误 消息？

> ID：15148395
> 
> 赞同：-1
> 
> 时间：2013-03-01T00:35:28.077
> 
> 标签：java, eclipse

我正在学习 java 课程并使用 eclipse 来做作业。它们可能是我需要的不同文件，我想将其分离到工作区 src 文件夹中的不同文件夹中。但是当我这样做时，Eclipse 给了我一个错误：

> 声明的包“”与预期的包不匹配

我很肯定这些 java 文件不需要分配给它们的包。那么如何禁用此警告？

**已解决**：我在包资源管理器窗口中右键单击包并进入

> 构建路径 > 用作源文件夹

错误现在消失了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:40:13.023

该`src`文件夹仅用于 Java 源代码。对于非源文件，您应该在该文件夹之外创建另一个文件`src`夹。例如，您可能有一个如下所示的项目目录：

```
项目
  +--src
  +--分辨率
  +--斌
  +--图片

```

**编辑：**

在您的评论中澄清后，我看到您有两个选择：

1.  添加行'package assignment1;' 到您的 Java 代码。

2.  不要将源代码文件放在子目录中。直接移动到`src`文件夹中。

我了解您希望为每个作业整理代码。我建议您为每个作业创建一个新的 Eclipse 项目。这将在您的工作区所在的文件夹中创建一个新的子文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T01:06:40.180

@Code-Guru 是对的。您可以参考 Eclipse 帮助文档以获取更多详细信息。这是一个链接，可以帮助您理解上述问题。

[http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fref-wizard-java-project.htm](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fref-wizard-java-project.htm)

# html - 如何让 div 保持相同的大小

> ID：15148402
> 
> 赞同：0
> 
> 时间：2013-03-01T00:36:15.143
> 
> 标签：html, css

大家好，我是一个新手，并试图让我的头脑围绕 CSS。我创建了一个 div，其中包含我网站的登录名和密码表单。当用户使用 PHP 成功登录时，此表单会消失，并且会出现一条欢迎消息来问候用户。我的问题是，因为消息比登录表单小，所以 div 会缩小到那个大小并且不会保持不变。

我尝试过使用各种位置命令（如绝对命令）来处理宽度、高度，但没有运气。

这是我的名为 infobox 的 div 的 CSS：

```
 #infobox {

border:2px solid #a1a1a1;
padding-left:16px; 
padding-top:10px;
background:#dddddd;
width:237px;
border-radius:25px;
-moz-border-radius:25px;
float: right; 
padding-bottom: 10px;

    } 
```

这是我嵌套在上面的标题 css （如果这有帮助）

```
 #header {
width: 960px;
margin: 0 auto;
padding: 40px 0;
position: relative;
margin-top: -36px;
    } 
```

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:40:35.163

如果你设置`width:500px;`和`height:300px;`（或任何你想要的大小），div 应该保持相同的大小。此外，您可以设置`overflow:hidden;`为，如果 div 中的任何内容超出了这些范围，则不会显示它，并且不会调整 div 的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-18T13:24:48.987

试试这个。也许它会帮助你。

```
enter code here

#infobox {
width:400px;
height:250px;
border:2px solid #a1a1a1;
padding-left:16px; 
padding-top:10px;
background:#dddddd;
border-radius:25px;
-moz-border-radius:25px;
float: right; 
padding-bottom: 10px;
overflow:hidden;
} 
```

# javascript - IE: 无效的目标元素 - 使用 innerHTML + 字符串附加表

> ID：15148406
> 
> 赞同：5
> 
> 时间：2013-03-01T00:36:48.977
> 
> 标签：javascript, ajax, internet-explorer, infinite-scroll

在 Internet Explorer 中，这条线`document.getElementById("left").getElementsByTagName("tbody")[0].innerHTML = document.getElementById("left").getElementsByTagName("tbody")[0].innerHTML + string;`给了我一个`SCRIPT600: Invalid target element for this operation. …character 10`

字符串只是包含一组表格行的字符串。这在 Chrome、Safari 或 Firefox 中运行良好。有没有更好的方法来做到这一点？我正在做的是一旦用户到达页面底部，我将 tablerows 附加到表格中以加载更多内容。这是一种 AJAX 无限滚动类型的交易 - 客户请求。我正在使用 Javascript，此时我更愿意继续使用 Javascript，而不是仅仅为了这个任务而改用 jQuery。

更新也一样：`document.getElementById("left").innerHTML = document.getElementById("left").innerHTML + string;` 另外，左边是`<table id="left">`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T01:06:04.940

是的，您需要先像这样包装它们：

```
var div = document.createElement("div");
div.innerHTML = "<table><tbody>" + string + "</tbody></table>";

document.getElementById("left")
  .appendChild(div.firstChild.tBodies[0]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-20T10:38:10.417

当您需要在表格末尾插入表格行时，方式略有不同。您的新代码，例如 new `<tr>`，应该在名为 的变量中`html`。

```
if (document.attachEvent) { //if using old IE
    var currentTable = document.querySelector("#myTable");
    var currentTableHTML = currentTable.outerHTML;

    //replace closing tag with new code + closing tag
    currentTableHTML = currentTableHTML.replace("</tbody>", html + "</tbody>";

    currentTable.parentNode.removeChild(currentTable);

    //reinsert the table before some other element - you can use something else if you have a container for the table
    document.querySelector("#someElement").insertAdjacentHTML("beforebegin", currentTableHTML);
}
else {
    //use insertAdjacentHTML in a normal browser
} 
```

# xcode - 在 Xcode 中使用 applescript 调整窗口大小

> ID：15148413
> 
> 赞同：2
> 
> 时间：2013-03-01T00:37:20.477
> 
> 标签：xcode, macos, resize, window, applescript

这是我一生中第一次使用 Xcode/AppleScript - 如果问题非常愚蠢，非常抱歉。无论如何，我的 MainMenu.xib 文件下有一个小测试窗口。我已经设置了一个选项卡视图，每个选项卡下都有不同的按钮和事物，具有各种随机测试功能（显示对话框、说话、请求密码等）。在一个选项卡中，我想要有很多测试内容，但在另一个选项卡中我只想要一点。当您更改选项卡时，是否可以将窗口大小调整为指定尺寸？另外，我已经让我的窗口不可调整大小（否则在调整大小时格式会变得混乱），即使你不能用鼠标调整大小，是否可以允许这种调整大小？抱歉，如果这没有任何意义，如果有人需要，我很乐意澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T10:36:09.610

要在 applescript 中调整窗口大小，可以使用以下命令：

```
tell current application to set the bounds of the front window to {24, 96, 524, 396} 
```

所以如果你想激活这样一个脚本，把它放在你的 AppDelegate.applescript 中：

```
on tabclick1_(aNotification)
    tell current application to set the bounds of the front window to {24, 96, 524, 396}
end tabclick1_ 
```

然后，您可以将其连接到选项卡按钮，并根据需要设置窗口的边界。

您当然可以复制它，但随后更改名称“tabclick1_”和边界，然后将其连接到另一个选项卡。因此，每次单击选项卡时，它都会激活相应的脚本（例如“tabclick1_”），并且该脚本将更改窗口的边界。

但是您必须调整窗口大小，并正确锚定对象。

*重要的：*

1.  bounds 的第一项是从屏幕左侧到窗口左侧的距离（以像素为单位）。
2.  边界的第二项是从屏幕顶部到窗口顶部的距离（以像素为单位）。
3.  边界的第三项是从屏幕左侧到窗口右侧的距离（以像素为单位）。
4.  边界的第四项是从屏幕顶部到窗口底部的距离（以像素为单位）。

# php - 如何告诉 PHP 在使用后删除 load_file 数据？

> ID：15148414
> 
> 赞同：1
> 
> 时间：2013-03-01T00:37:26.890
> 
> 标签：php, memory

这是我的PHP。它通过一堆 URL 来获取类似的数据（来自棒球运动员资料的当前本垒打）。但是，我得到“允许的内存大小耗尽”，这让我认为 PHP 只是在聚合所有这些 load_file 数据，即使在我使用 $html->find 来获取我想要的数据之后也是如此。在我已经回显出我需要的内容后，如何告诉 PHP 停止使用来自 load_file 的数据？

```
include('simple_html_dom.php');

        $json = file_get_contents("http://example.com/homeruns.json");

        $elements = json_decode($json);

        foreach ($elements as $element){
                $html = new simple_html_dom();
                $html->load_file($element->profileurl);
                $currenthomeruns = $html->find('.homeruns .current',0);
                echo $element->name, " currently has the following number of homeruns: ", strip_tags($currenthomeruns); 
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:39:45.500

在循环结束时，执行 unset($html);

# javascript - 屏幕外 jquery 元素导致水平滚动

> ID：15148418
> 
> 赞同：0
> 
> 时间：2013-03-01T00:37:43.097
> 
> 标签：javascript, jquery, horizontal-scrolling

我有一个屏幕外的元素，点击时会进入屏幕。问题不是它实际上不在屏幕上，而是水平扩展我的文档，所以我在页面底部有一个滚动条。

这是网站：[http ://ericbrockmanwebsites.com/dev4/](http://ericbrockmanwebsites.com/dev4/)

这是html：

```
<div id="container-fluid">
    <div class="row-fluid">
        <div class="span12">
            <div id="dashboard">
                <nav id="access">
                    <div class="open"></div><?php wp_nav_menu( array( 'theme_location' => 'header-menu' ) ); ?>
                </nav>
            </div> <!-- dashboard -->
        </div> <!-- span12 -->
    </div> <!-- row-fluid --> 
```

这是CSS：

```
#container-fluid {
  width:1280px;
}

.row-fluid .span12 {
  width: 100%;
  *width: 99.94680851063829%;
}

#dashboard {
  font-size:30px;
  float:left;
  position: absolute;
  right: -659px;
  z-index: 100;
}

#access {
  display: block;
  float: right;
  margin: 10px auto 0;
  width:730px;
}

.open {
  background: #cabd32 url(images/open.png) top left no-repeat;
  background-position:center;
  float:left;
  padding: 32px 35px 33px;
}

.close {
  background: #cabd32 url(images/close.png) top left no-repeat;
  background-position:center;
  float:left;
  padding: 32px 35px 33px;
} 
```

这是脚本：（由@AlexCheuk 编写）

```
$('.open').bind('click',function(){ 
    $('#dashboard').stop().animate(
    {
        right: $(this).hasClass('close') ? '-659px' : '0'
    });
    $(this).toggleClass('close');
}); 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:45:33.733

最简单的似乎是：

添加`body {overflow:hidden;}`或使用`overflow-x`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T00:48:38.033

尝试将此添加到您的 CSS

```
body{
    overflow:hidden;
    ....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T02:06:37.047

在正文 css 中，添加

```
overflow:hidden 
```

# html - Div 背景阴影以适应自定义 CSS 形状

> ID：15148421
> 
> 赞同：2
> 
> 时间：2013-03-01T00:37:58.463
> 
> 标签：html, css

我想要一个有小切口的盒子。这个盒子有一个形状相同的覆盖阴影。下面是我对阴影和背景的尝试。

[http://jsfiddle.net/roman_khrystyny​​ch/EH7mu/2/](http://jsfiddle.net/roman_khrystynych/EH7mu/2/)

HTML 内容

```
<body>
    <div class="box">
        <div class="background"></div>
        <div class="shadow"></div>
            <div class="content">
                Content
            </div>
    </div>
</body> 
```

CSS

```
body{
     background: #222;
}
box{
    height: 135px;
    width: 450px;
}

.content{
    position:absolute;
    margin-left: 120px;
    margin-top: -120px;
}

.background{
    margin-left:50px;
    position:relative;
    height:135px;
    width:400px;
    background:#fff;
}
.background:after{
    position:absolute;
    bottom:0px; left:-20px;
    content:".";
    text-indent:-999px; overflow:hidden;
    display:block;
    width:0px; height:0px;
    border-top: 20px solid #fff;
    border-left: 20px solid transparent;
}
.background:before{
    position:absolute;
    top:0; left:-20px;
    content:"#";
    text-indent:-999px; overflow:hidden;
    display:block;
    background:#fff;
    width:20px; height:115px;
}

.shadow
{
    margin-left:30px;
    width:420px;
    height: 135px;
    margin-top: -135px;
    position:absolute;
    background: -moz-linear-gradient(top,  rgba(181,181,181,0) 0%, rgba(163,163,163,0) 51%, rgba(145,145,145,0.36) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(181,181,181,0)), color-stop(51%,rgba(163,163,163,0)), color-stop(100%,rgba(145,145,145,0.36))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(181,181,181,0) 0%,rgba(163,163,163,0) 51%,rgba(145,145,145,0.36) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(181,181,181,0) 0%,rgba(163,163,163,0) 51%,rgba(145,145,145,0.36) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(181,181,181,0) 0%,rgba(163,163,163,0) 51%,rgba(145,145,145,0.36) 100%); /* IE10+ */
    background: linear-gradient(to bottom,  rgba(181,181,181,0) 0%,rgba(163,163,163,0) 51%,rgba(145,145,145,0.36) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00b5b5b5', endColorstr='#5c919191',GradientType=0 ); /* IE6-9 */
} 
```

关于如何使阴影覆盖也包含相同的切口有什么建议吗？有没有更简单的方法来做到这一点？

注意：将阴影和盒子分开的原因是为了让背景颜色有一个 jQuery 动画，而叠加层保持不变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:50:37.797

我不清楚你的真正意图是什么。无论如何，既然没有人给你答案，我想我可以帮助你。

对于这个 html：

```
<div class="clip">
<div class="inner">aaaaa</div>  
</div> 
```

如果你给这个CSS：

```
.clip {height: 173px; width: 181px; left: 85px; top: 74px;position: absolute;
       overflow: hidden; 
       -webkit-transform: rotate(50deg); 
       background-color: rgba(200, 0, 0, 0.1);}

.inner {
       -webkit-transform: rotate(-50deg);
       background-color: blue;
       height: 100px;width: 150px;left: 16px;top: 52px;position: absolute;} 
```

您将在内部 div 中获得具有所需截止点的矩形。

外部 div 被旋转并启用了剪辑，因此它为您提供了对角线剪辑。

然后将内部矩形定位在剪辑 div 内，使其仅在左下角剪辑。你反向旋转这个 div 使它再次水平。

现在你可以用它做任何你想做的事情（我还没有使用任何背景或边框属性），或者在另一个内部 div 中，而不会丢失形状。

请注意，定位内部 div 很棘手，您是在旋转坐标中进行的！

对于演示，裁剪 div 是半透明的。

## [小提琴](http://jsfiddle.net/XMXzw/)

# ruby-on-rails - RoR 模型中的“如果”或“除非”

> ID：15148423
> 
> 赞同：2
> 
> 时间：2013-03-01T00:38:05.187
> 
> 标签：ruby-on-rails, model, ruby-on-rails-3.2

我正在开发一个应用程序，您可以在其中通过 facebook 登录或注册。出于这个原因，我有一个可以是 facebook 图像或上传图像的图像，但我不知道如何将它放入模型中。

我的模型：

```
class User < ActiveRecord::Base
  attr_accessible :name, :password, :password_confirmation, :big_image, :image, :mini_image

  validates_confirmation_of :password
  validates_presence_of :password, :on => :create, :unless => :from_facebook
  validates_presence_of :name
  validates_uniqueness_of :name   

  unless :from_facebook
    mount_uploader :big_image, ImageUploader
  end

  def from_facebook
    self.provider == "facebook"
  end

  def self.from_omniauth(auth)
    where(auth.slice(:provider, :uid)).first_or_initialize.tap do |user|
      user.provider = auth.provider
      user.uid = auth.uid
      user.name = auth.info.name
      user.big_image = auth.info.image.gsub("=square","=large")
      user.image = auth.info.image.gsub("=square","=normal")
      user.mini_image = auth.info.image
      user.oauth_token = auth.credentials.token
      user.oauth_expires_at = Time.at(auth.credentials.expires_at)
      user.save!
    end
  end
end 
```

结尾

我要更改的部分是：

```
unless :from_facebook
  mount_uploader :big_image, ImageUploader
end 
```

因为它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:19:31.307

您不想有条件地调用 mount_uploader。

有几种方法可以解决这个问题：

1) 如果是这种情况，允许使用 facebook 注册并从 facebook 动态获取他们的图像的用户的 big_image 为零。

2) 将他们的 facebook 图片的大版本保存为 big_image。这样你就有了你需要的所有版本大小，你甚至可以让你的用户在以后覆盖它。

# c++ - C ++：类专业化是符合编译器的有效转换？

> ID：15148425
> 
> 赞同：18
> 
> 时间：2013-03-01T00:38:15.747
> 
> 标签：c++, compiler-construction, compiler-optimization, virtual-functions, vtable

*希望这对于 StackOverflow 来说不是太专业的问题：如果它是并且可以迁移到其他地方，请告诉我......*

很多个月前，我写了一篇本科论文，提出了 C++ 和相关语言的各种去虚拟化技术，通常基于代码路径的预编译特化（有点像模板）的想法，但在运行时选择正确的特化进行检查，以防出现以下情况它们不能在编译时选择（因为必须是模板）。

（非常）基本的想法类似于以下内容......假设您有一个`C`类似以下的类：

```
class C : public SomeInterface
{
public:
    C(Foo * f) : _f(f) { }

    virtual void quack()
    {
        _f->bark();
    }

    virtual void moo()
    {
        quack(); // a virtual call on this because quack() might be overloaded
    }

    // lots more virtual functions that call virtual functions on *_f or this

private:
    Foo * const _f; // technically doesn't have to be const explicitly
                    // as long as it can be proven not be modified
}; 
```

并且您知道存在具有已知完整类型的`Foo`like `FooA`、`FooB`等的具体子类（不一定有详尽的列表），然后您可以`C`为某些选定的子类预编译 的专用版本`Foo`，例如（请注意，构造函数不是故意包括在这里，因为它不会被调用）：

```
class C_FooA final : public SomeInterface
{
public:
    virtual void quack() final
    {
        _f->FooA::bark(); // non-polymorphic, statically bound
    }

    virtual void moo() final
    {
        C_FooA::quack(); // also static, because C_FooA is final
        // _f->FooA::bark(); // or you could even do this instead
    }

    // more virtual functions all specialized for FooA (*_f) and C_FooA (this)

private:
    FooA * const _f;
}; 
```

并将构造函数替换为`C`以下内容：

```
C::C(Foo * f) : _f(f)
{
    if(f->vptr == vtable_of_FooA) // obviously not Standard C++
        this->vptr = vtable_of_C_FooA; 
    else if(f->vptr == vtable_of_FooB)
        this->vptr = vtable_of_C_FooB;
    // otherwise leave vptr unchanged for all other values of f->vptr
} 
```

所以基本上，正在构造的对象的动态类型会根据其构造函数的参数的动态类型而改变。（请注意，您不能使用模板执行此操作，因为您只能在编译时`C<Foo>`知道类型的情况下创建 a）。`f`从现在开始，任何对`FooA::bark()`through的调用`C::quack()`都只涉及一个虚拟调用：或者调用`C::quack()`静态绑定到动态调用的非专业版本`FooA::bark()`，或者调用`C::quack()`动态转发到`C_FooA::quack()`静态调用`FooA::bark()`。此外，如果流分析器有足够的信息进行静态调用，动态调度可能会在某些情况下完全消除。`C_FooA::quack()`，如果它允许内联，这在紧密循环中可能非常有用。（虽然从技术上讲，即使没有这种优化，你也可能没问题......）

（请注意，这种转换是安全的，尽管用处不大，即使`_f`是非常量且受保护而不是私有的并且`C`是从不同的翻译单元继承的……为继承的类创建 vtable 的翻译单元在关于继承类的特化和构造函数的所有内容都将设置`this->vptr`为它自己的 vtable，它不会引用任何专门的函数，因为它不知道任何关于它们的信息。）

这似乎需要付出很多努力来消除一个间接级别，但关键是您可以仅基于内部的本地信息对任何任意嵌套级别（遵循此模式的虚拟调用的任何深度都可以减少到一个）执行此操作一个翻译单元，并以一种有弹性的方式执行它，即使在您不知道的其他翻译单元中定义了新类型......您可能会添加很多您不会有的代码膨胀，否则如果您天真地做了。

无论如何，**不​​管这种优化是否真的有足够的物有所值，值得努力实现，也值得在生成的可执行文件中占用空间**，我的问题是，标准 C++ 中是否有任何东西可以防止执行这种转换的编译器？

我的感觉是否定的，因为该标准根本没有指定如何完成虚拟调度或如何表示指向成员函数的指针。我很确定 RTTI 机制没有任何内容可以防止`C`和`C_FooA`伪装成相同类型的所有用途，即使它们有不同的虚拟表。我能想到的唯一可能重要的另一件事是仔细阅读 ODR，但可能不是。

我忽略了什么吗？除非 ABI/链接问题，这样的转换是否可以在不破坏符合 C++ 程序的情况下进行？（此外，如果是的话，目前是否可以使用 Itanium 和/或 MSVC ABI 来完成？我很确定答案也是肯定的，但希望有人可以确认。）

**编辑**：有谁知道在 C++、Java 或 C# 的任何主流编译器/JIT 中是否实现了类似的东西？（请参阅下面评论中的讨论和链接聊天...）我知道 JIT 直接在呼叫站点进行虚拟的推测性静态绑定/内联，但我不知道他们是否做了类似的事情（使用全新的 vtables基于在构造函数而不是在每个调用站点完成的单个类型检查来生成和选择）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:32:53.783

> 标准 C++ 中有什么东西会阻止编译器执行这种转换吗？

如果您确定可观察的行为没有改变，那就不是 - 这就是标准第 1.9 节中的“假设规则”。

但这可能会使证明您的转换是正确的非常困难：12.7/4：

> 当从构造函数（包括非静态数据成员的*mem-initializer*或*大括号或等式初始化器*）或从析构函数直接或间接调用虚函数时，调用适用的对象是对象在构造或析构中，调用的函数是在构造函数或析构函数自己的类或其基类之一中定义的函数，但不是在派生自构造函数或析构函数自己的类的类中覆盖它的函数，或在其中之一中覆盖它的函数最派生对象的其他基类。

因此，如果析构函数`Foo::~Foo()`碰巧直接或间接调用`C::quack()`了一个对象`c`， `c._f`指向被销毁的对象，你需要调用`Foo::bark()`，即使`_f`是`FooA`在你构造对象的时候`c`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:45:27.557

初读时，这听起来像是[多态内联缓存](http://en.wikipedia.org/wiki/Inline_caching#Polymorphic_inline_caching)的以 c++ 为中心的变体。我认为 V8 和 Oracle 的 JVM 都使用它，而且我知道[.NET 使用](http://blogs.msdn.com/b/vancem/archive/2006/03/13/550529.aspx).

回答您最初的问题：我认为标准中没有任何内容禁止此类实现。C++ 非常重视“原样”规则。只要你忠实地实现了正确的语义，你就可以用任何你喜欢的疯狂方式来实现。c++ 虚拟调用不是很复杂，所以我怀疑你是否会遇到任何边缘情况（如果你试图用*静态*绑定做一些聪明的事情）。

# php - PHP：从文本中提取特定数据并将它们放入列表中

> ID：15148426
> 
> 赞同：0
> 
> 时间：2013-03-01T00:38:21.717
> 
> 标签：php

我无法编写从文本中提取某些数据所需的代码。我的文字是这样组织的：

```
[class name]. [class name]. (class units). [class description]. [class instructors] 
```

例如：

> 200A-200B。民事诉讼。（三）法典制度和联邦规则下的诉状原则；现代审判实践，包括地点、程序、陪审团、证据充分性、指示、判决、新审判、判决；上诉程序。Aldave 女士、Louisell 先生、Poche 先生、Stolz 先生、Vetter 先生
> 
> 201A-201B。合同。(4) 合同法，处理成立、运作和终止的问题。艾森伯格先生、凯斯勒先生、劳贝先生、温特劳布先生

然后名单还在继续，还有一千多个。

我想分解这些列表的不同部分，并将它们放在每个列表中。例如，我想要一个列表中的所有班级编号、列表中的所有班级名称、列表中的所有单元、列表中的所有班级描述以及列表中的所有教师。

我该怎么办？我刚开始用 php 编码，有什么推荐的阅读材料吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:34:08.560

这符合您的需求吗？（我没有使用点作为分隔符，而是使用#）

```
$strings = array();

$class_codes = array();
$class_names = array();
$class_units = array();
$class_descriptions = array();
$class_teachers = array();

$strings[] = "200A-200B#Civil Procedure#(3)#The principles of pleading under the code system and the federal rules; modern trial practice, including venue, process, the jury, sufficiency of evidence, instructions, verdicts, new trials, judgments; appellate procedure.#Ms. Aldave, Mr. Louisell, Mr. Poche, Mr. Stolz, Mr. Vetter";
$strings[] = "201A-201B#Contracts#(4)#The law of contracts, dealing with the problems of formation, operation, and termination.#Mr. Eisenberg, Mr. Kessler, Mr. Laube, Mr. Weintraub";

$total = count($strings);

for($i=0; $i<$total; $i++)
{
    $string_parts = explode("#", $strings[$i]);

    $class_codes[] = $string_parts[0];
    $class_names[] = $string_parts[1];
    $class_units[] = $string_parts[2];
    $class_descriptions[] = $string_parts[3];
    $class_teachers[] = $string_parts[4];
}

echo "<pre>";
print_r($class_codes);
echo "</pre>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:00:14.623

您可以遍历文件的每一行并将正则表达式应用于每一行以获得

```
//I am just constructing $lines array assuming you have all lines of the file 

$lines[0] = "200A-200B. Civil Procedure. (3) The principles of pleading under the code system and the federal rules;
modern trial practice, including venue, process, the jury, sufficiency of evidence, instructions, verdicts, new trials, judgments; appellate procedure. Ms. Aldave, Mr. Louisell, Mr. Poche, Mr. Stolz, Mr. Vetter";
$lines[1] = "201A-201B. Contracts. (4) The law of contracts, dealing with the prob¬lems of formation, operation, and termination. Mr. Eisenberg, Mr. Kessler, Mr. Laube, Mr. Weintraub";

$regex = '/(.*)\.\s*(.*)\.\s*\(([1-9]+)\)\s*([^\..]*)\.\s*(.*)\s*$/';
$data = array();
foreach($lines as $line)
{
    preg_match($regex, $line, $matches);
    if(isset($matches[1]) &&
       isset($matches[2]) &&
       isset($matches[3]) &&
       isset($matches[4]) &&
       isset($matches[5])
    )
    $data[] = array("class_code" => $matches[1],
                "class_name" => $matches[2],
                "class_unit" => $matches[3],
                "class_description" => $matches[4],
                "class_instructors" => $matches[5]
            );

} 
```

如果您 var_dump 以上`$data`变量，您将获得以下输出：

```
array
  0 => 
    array
      'class_code' => string '200A-200B' (length=9)
      'class_name' => string 'Civil Procedure' (length=15)
      'class_unit' => string '3' (length=1)
      'class_description' => string 'The principles of pleading under the code system and the federal rules;
modern trial practice, including venue, process, the jury, sufficiency of evidence, instructions, verdicts, new trials, judgments; appellate procedure' (length=222)
      'class_instructors' => string 'Ms. Aldave, Mr. Louisell, Mr. Poche, Mr. Stolz, Mr. Vetter' (length=58)
  1 => 
    array
      'class_code' => string '201A-201B' (length=9)
      'class_name' => string 'Contracts' (length=9)
      'class_unit' => string '4' (length=1)
      'class_description' => string 'The law of contracts, dealing with the probÂ¬lems of formation, operation, and termination' (length=90)
      'class_instructors' => string 'Mr. Eisenberg, Mr. Kessler, Mr. Laube, Mr. Weintraub' (length=52) 
```

我希望这就是你要找的..

# android - Hooking Opera Mobile 用于内部应用

> ID：15148428
> 
> 赞同：1
> 
> 时间：2013-03-01T00:38:48.300
> 
> 标签：android

我们有一些 HTML5 游戏在标准的 Android 浏览器中运行非常糟糕，性能极差，但在 Opera 中它们运行良好 - 帧速率和性能都很好。

有人知道我们可以以某种方式将 Opera Mobile 嵌入到我们自己的应用程序中吗？标准浏览器是不可接受的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:38:31.573

> 有人知道我们可以以某种方式将 Opera Mobile 嵌入到我们自己的应用程序中吗？

仅当 Opera 以库形式提供时，AFAIK 才不是。

> 标准浏览器是不可接受的。

您也无法将您认为的“标准浏览器”嵌入到您的应用程序中。“标准浏览器”是一个应用程序，而不是一个库，您不能将其他应用程序的 UI 嵌入到您自己的程序中。

您可以嵌入`WebView`，并且完全有可能存在适用于 Android 的 HTML 呈现库（例如，来自 Firefox 的 Gecko）。

# php - Dropbox API 上传没有 oAuth 可能？

> ID：15148433
> 
> 赞同：1
> 
> 时间：2013-03-01T00:39:16.563
> 
> 标签：php, web-applications, oauth, upload, dropbox

所以像往常一样，我的（也许不是）用例没有包含在 oAuth 身份验证系统中。作为一小群人 (<6)，我们使用 Dropbox 作为集中式共享文件系统。适用于各种东西。现在，我正在构建一个使用 SQLite 数据库的 Web 应用程序（php/js/css/etc）。我希望 webapp 能够自动备份该 SQLite 数据库，这就是事情......而不必每次都授权。此外，授权没有任何意义，因为它不是应用程序中使用的真正随机用户的保管箱。

这是可能吗？我知道其他 API 有可能为特定用例（如我的）生成 oAuth 访问令牌（以跳过整个身份验证过程）。Dropbox 似乎没有这个……我说的对吗？

[编辑] 我注意到这个库[https://github.com/jakajancar/DropboxUploader/](https://github.com/jakajancar/DropboxUploader/)它**仍然**有效，但它是一种解决方法。我仍在寻找一个“更好”、不那么老套的替代品。

有没有办法解决这个问题？可以做到这一点的另一种服务，如保管箱（盒子？）？这是一个不好的做法吗？如果是这样，为什么？

# c# - 在新窗口中绑定 TextBlock 文本？

> ID：15148434
> 
> 赞同：0
> 
> 时间：2013-03-01T00:39:19.433
> 
> 标签：c#, wpf, window, showdialog

我创建了一个警告窗口来验证用户的删除操作，使用 Window.ShowDialog 并设置 DialogResult。一切正常，除了警告文本没有出现在中`TextBlock`，我不知道为什么。这是我的`Window`：

```
<Window x:Class="RoVCo.Windows.VerifyWindow"
        ....
        WindowStyle="None" Padding="10" ResizeMode="NoResize">
        <StackPanel>
            <TextBlock Height="Auto" Text="{Binding TBText, Mode=OneWay}" Foreground="Yellow" TextWrapping="Wrap" />
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
                <Button Content="Cancel" Margin="10,0" Width="50" Click="CancelVerify" />
                <Button Content="OK" Width="50" Click="ConfirmVerify" />
            </StackPanel>
        </StackPanel>
</Window> 
```

和班级：

```
public partial class VerifyWindow : Window
{
    public VerifyWindow(string content)
    {
        InitializeComponent();
        _text = content;
    }
    private string _text = "";
    public string TBText { get { return _text; } }

    private void CancelVerify(object sender, RoutedEventArgs e)
    {
        this.DialogResult = false;
        this.Close();
    }
    private void ConfirmVerify(object sender, RoutedEventArgs e)
    {
        this.DialogResult = true;
        this.Close();
    }
} 
```

我这样称呼它：

```
var window = new RoVCo.Windows.VerifyWindow("Removing this skill will erase all DP spent on it from all levels. Continue?");
if (window.ShowDialog() == false) return; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:26:55.007

如果它只是您在其中使用的单个属性，`Dialog`我认为使用 a`DependancyProperty`将是更好的选择，那么添加所有`INotifyPropertyChanged`逻辑

```
public partial class VerifyWindow : Window
{
    public VerifyWindow(string content)
    {
        InitializeComponent();
        TBText = content;
    }

    public static readonly DependencyProperty TBTextProperty =
        DependencyProperty.Register("TBText", typeof(string), typeof(VerifyWindow), new UIPropertyMetadata(string.Empty));

    public string TBText
    {
        get { return (string)GetValue(TBTextProperty); }
        set { SetValue(TBTextProperty, value); }
    }

    private void CancelVerify(object sender, RoutedEventArgs e)
    {
        this.DialogResult = false;
        this.Close();
    }
    private void ConfirmVerify(object sender, RoutedEventArgs e)
    {
        this.DialogResult = true;
        this.Close();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T01:00:20.683

为了使用绑定，您需要公开本地属性，并且需要通知属性或依赖属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T01:07:08.263

你可以试试这个解决方案。

1.  将您的 VerifyWindow 构造函数更改为：

    公共验证窗口（）{初始化组件（）；}

并删除 TBText 和 _text 代码。

1.  创建一个名为 VerifyViewModel 的新类

    公共类验证视图模型：INotifyPropertyChanged {公共验证视图模型（字符串内容）{ this.TBText = 内容；}

    ```
    public string TBText { get; private set; }

    #region INPC code - can create an abstract base view model class and put this there instead

    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string propertyName)
    {
        this.OnPropertyChanged(new PropertyChangedEventArgs(propertyName));
    }

    protected virtual void OnPropertyChanged(PropertyChangedEventArgs e)
    {
        var handler = this.PropertyChanged;
        if (handler != null)
        {
            handler(this, e);
        }
    }
    #endregion 
    ```

    }

2.  如下调用此代码

    var viewmodel = new VerifyViewModel ("移除此技能将清除所有等级花费在此技能上的所有DP。继续吗？");

    ```
     var window = new VerifyWindow
        {
            DataContext = viewmodel
        };
        if (window.ShowDialog() == false) return; 
    ```

# c# - Visual Studio 2012 调试 MVC 4 访问被拒绝

> ID：15148435
> 
> 赞同：1
> 
> 时间：2013-03-01T00:39:19.240
> 
> 标签：c#, asp.net-mvc, visual-studio, windows-8

尝试在 Windows 8 上的 Visual Studio 2012 中进行调试时，是否有人收到以下错误？它是在 .Net 4 上运行的标准 MVC 4 应用程序（开箱即用，甚至还没有改变样式）。

> “/”应用程序中的服务器错误。
> 
> 访问被拒绝。说明：访问处理此请求所需的资源时出错。服务器可能未配置为访问请求的 URL。
> 
> 错误消息 401.2.：未经授权：由于服务器配置，登录失败。根据您提供的凭据和 Web 服务器上启用的身份验证方法，验证您是否有权查看此目录或页面。请与 Web 服务器的管理员联系以获得更多帮助。

* * *

版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.18033

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T00:46:33.540

回答了我自己的问题。问题是我的设置。在非 AD 环境中使用 Intranet 模板。

从 web.config：

```
<authorization>
  <deny users="?" />
</authorization> 
```

# php - 如何在 PHP 中除以浮点数？

> ID：15148439
> 
> 赞同：2
> 
> 时间：2013-03-01T00:39:37.260
> 
> 标签：php

我需要确定一个给定的数字在[PHP](http://php.net/)`x`中是否可以被整除，它是一个浮点数，特别是 0.05。`y``y`

但当我这样做时，

```
if ($number % 0.05 === 0) {
    // Continue
} 
```

我收到以下 PHP 警告：

> 被零除

我能做些什么来解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T00:46:05.073

模数的定义如下：

> 在计算中，模（有时称为模）运算求一个数除以另一个数的余数。

另一种表达方式`a % b`是：`a - b * floor(a/b)`

因此，您可以定义自己的函数：

```
function mod($a,$b) {return $a-$b*floor($a/$b);} 
```

并简单地调用它。例如，调用`mod(0.08,0.05)`将返回`0.03`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:41:14.490

您可以将这两个数字乘以 100。

```
if (($number * 100) % 5 === 0) {
    // Continue
} 
```

# c# - 单击按钮更改选定的列表框项目数据模板

> ID：15148443
> 
> 赞同：0
> 
> 时间：2013-03-01T00:39:48.323
> 
> 标签：c#, wpf, xaml, mvvm

我有一个 ListBox 数据绑定到 Person 的 Observable 集合的视图。在同一个视图中，我有一个按钮。我想做的是从 ListBox 中选择一个项目，并在单击按钮时将所选项目的 DataTemplate 从“Person”替换为“PersonEdit”。

我查看了 TemplateSelector、Triggers 等，但似乎没有任何工作。

有任何想法吗？

```
<DataTemplate x:Key="Person">
        <TextBlock Text="{Binding Path=Name}"/>
    </DataTemplate>

    <DataTemplate x:Key="PersonEdit">
        <TextBox Text="{Binding Path=Name}"/>
    </DataTemplate>

<ListBox
        x:Name="lbPersons"
        Grid.Row="0"
        VerticalAlignment="Stretch"
        Margin="5"
        ItemsSource="{Binding Path=Persons}"
        ItemTemplate="{StaticResource ResourceKey=Person}"
        >
    </ListBox>

<Button
        Grid.Row="1"
        VerticalAlignment="Center"
        HorizontalAlignment="Center"
        Content="Add Person" Command="{Binding AddPerson}"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:19:14.723

我认为最好的选择是向您的`Person`模型添加一个属性，以告诉 UI 您正在编辑并使用该属性更改`Template`

这是我的意思的一个粗略的工作示例，在此示例中，当您将`Person`项目设置为`IsEditing`它时，它将更改为`Template`，`PersonEdit`否则它将设置`Template` `Person`

xml:

```
<Window x:Class="WpfApplication7.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="399" Width="464" Name="UI" >

    <Window.Resources>
        <DataTemplate x:Key="Person">
            <TextBlock Text="{Binding Name}"/>
        </DataTemplate>

        <DataTemplate x:Key="PersonEdit">
            <TextBox Text="{Binding Name}"/>
        </DataTemplate>

        <Style TargetType="{x:Type ListBoxItem}" x:Key="PersonStyle">
            <Setter Property="ContentTemplate" Value="{StaticResource Person}" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsEditing}" Value="True">
                    <Setter Property="ContentTemplate" Value="{StaticResource PersonEdit}" />
                </DataTrigger>
            </Style.Triggers>
        </Style>

    </Window.Resources>

    <Grid DataContext="{Binding ElementName=UI}"> 
        <ListBox Margin="5,5,5,30"
                 ItemsSource="{Binding Persons}"
                 SelectedItem="{Binding SelectedPerson}"
                 ItemContainerStyle="{StaticResource PersonStyle}" />

        <Button Margin="5,333,369,5" Content="Add Person" Click="Button_Click" />
    </Grid>
</Window> 
```

代码：

```
public partial class MainWindow : Window
{

    private Person _selectedPerson;
    private ObservableCollection<Person> _persons = new ObservableCollection<Person>();

    public MainWindow()
    {
        InitializeComponent();
        Persons.Add(new Person { Name = "Stack" });
        Persons.Add(new Person { Name = "Overflow" });
    }

    public ObservableCollection<Person> Persons
    {
        get { return _persons; }
        set { _persons = value; }
    }

    public Person SelectedPerson
    {
        get { return _selectedPerson; }
        set { _selectedPerson = value; }
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        SelectedPerson.IsEditing = true;
    }

} 
```

人物类：

```
public class Person : INotifyPropertyChanged
{
    private string _name;
    private bool _isEditing;

    public string Name
    {
        get { return _name; }
        set { _name = value; NotifyPropertyChanged("Name"); }
    }

    public bool IsEditing
    {
        get { return _isEditing; }
        set { _isEditing = value; NotifyPropertyChanged("IsEditing"); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

# php - 获取当前 URL 中问号后的完整文本

> ID：15148445
> 
> 赞同：0
> 
> 时间：2013-03-01T00:40:01.370
> 
> 标签：php

我有以下网址：

[http://website.com/tagged?tag=egg&offset=1](http://website.com/tagged?tag=egg&offset=1) [http://website.com/tagged?offset=1&tag=egg](http://website.com/tagged?offset=1&tag=egg)

我想得到以下结果：

```
tag=egg&offset=1
offset=1&tag=egg 
```

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T00:41:52.633

如果你的意思是你想从一个字符串中解析它，你可以使用[parse_url()](http://php.net/manual/en/function.parse-url.php)

```
$url = "http://website.com/tagged?tag=egg&offset=1";
$parsed = parse_url($url);

var_dump($parsed);

// Result
Array
(
    [scheme] => http
    [host] => website.com
    [path] => /tagged
    [query] => tag=egg&offset=1
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T00:41:42.293

[http://php.net/parse_url](http://php.net/parse_url)

```
$query = parse_url($url, PHP_URL_QUERY); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T00:41:15.097

`var_dump($_GET);`

使用 $_GET，您现在可以使用[http_build_query()](http://php.net/manual/en/function.http-build-query.php)：

```
$getString = http_build_query($_GET); 
```

# php - 简单的 mysql 查询在 phpmyadmin 中有效，但在 php 脚本中无效

> ID：15148447
> 
> 赞同：2
> 
> 时间：2013-03-01T00:40:05.147
> 
> 标签：php, mysql, mysqli

我整天都在研究一个从单个 mysql 数据库中提取数据的 php 脚本。我的脚本运行良好，然后突然 mysql 停止返回带有某些查询的行。它从一个复杂的连接开始，但现在某个查询不会返回一行。粘贴到 phpmyadmin 中的相同查询确实返回一行。

一、查询：

```
 $sql = "SELECT tagsetsname_id FROM tagsets_docpaths_sets WHERE documents_paths_id = '233'";  //the '233' comes from {$_SESSION['document']['docpathid']} 
```

当我将此查询粘贴到 phpmyadmin 中时，我得到以下结果：

```
tagsetsname_id
    0 
```

这就是我想要的结果。tagsetsname_id 为 0。

当我在 php 脚本中尝试此操作时：

```
 //$db is connection to a database, some queries are working so $db is connected
    $sql = "SELECT tagsetsname_id FROM tagsets_docpaths_sets 
    WHERE documents_paths_id = '233'";
$res = $db->query($sql); 
```

然后在 Firebug 中查看 $res，我得到以下结果：

```
 mysqli_result(
    current_field =
    field_count =
    lengths =
    num_rows =
    type =
    ) 
```

它是空的。我很困惑。

我重新启动了apache；我重新启动了mysql。

我会错过什么简单的事情？

我是 mysql 新手。数据库会以某种方式损坏吗？有重建或我可以尝试的东西吗？

******* *脚本**

 **```
 $sql = "SELECT tagsetsname_id FROM tagsets_docpaths_sets \
    WHERE documents_paths_id = '{$_SESSION['document']['docpathid']}'";
    //{$_SESSION['document']['docpathid']} = 233;

    $res = $db->query($sql);
    $row = $res->fetch_row();
    $firephp->trace($db);
    $firephp->group('tags');
    $firephp->log('$sql');
    $firephp->trace($sql);
    $firephp->log('$row');
    $firephp->trace($row);
    $firephp->groupEnd(); 
```

******* *调试**

 **```
 mysqli(
    affected_rows =
    client_info =
    client_version =
    connect_errno =
    connect_error =
    errno =
    error =
    field_count =
    host_info =
    info =
    insert_id =
    server_info =
    server_version =
    stat =
    sqlstate =
    protocol_version =
    thread_id =
    warning_count =
    )

    SELECT tagsetsname_id FROM tagsets_docpaths_sets WHERE documents_paths_id = '233' 

     $row
    null
    File         Line   Instruction
    .../create_metatags.php

    291

    FirePHP->trace( '') 
```

YET 在 phpmyadmin 中，从调试中粘贴的 $sql 可以完美运行。我疯了吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-20T22:36:34.353

如本页[http://us3.php.net/manual/en/mysqli-result.fetch-row.php](http://us3.php.net/manual/en/mysqli-result.fetch-row.php)所示， $res->fetch_row() 以具有数字索引的数组返回结果。您的结果应该在 $row[0] 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:41:28.287

你不需要我相信`'`的。`'233'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T00:43:19.337

$db... 的对象类型是什么？您可能需要从 $res 获取结果

即 $data = $res->fetchAll();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-20T23:03:07.723

这个问题看起来很明显，首先你在传递数字数据时没有使用确切的语法来等于某个字段。其次，您没有从数据库中获取任何东西，甚至没有执行，甚至没有准备执行。这是正确的，你不能在屏幕上看到任何东西...尝试按照以下...

```
<pre>
$sql = "SELECT tagsetsname_id FROM tagsets_docpaths_sets 
    WHERE documents_paths_id = 233 ";  // with out (').
$res = $db->query($sql);
</pre> 
```

然后在查询sql后添加以下内容...

```
<pre>
$query = $db->prepare($sql);      
$query->execute();
$ent = $query->fetchAll();
</pre> 
```

一般用这个...

```
<pre>
 $sql = "SELECT tagsetsname_id FROM tagsets_docpaths_sets 
        WHERE documents_paths_id = 233 ";  // with out (').
 $query = $db->prepare($sql);      
 $query->execute();
 $ent = $query->fetchAll();
</pre> 
```

然后 print_r($ent); 现在您应该将可用数据列表作为数组获取。

这有帮助吗？****

# r - 递归地从多个列表中绑定项目

> ID：15148451
> 
> 赞同：5
> 
> 时间：2013-03-01T00:40:29.723
> 
> 标签：r, list, join, cbind

给定三个（或`n`列表）：

```
one   <- list(a=1:2,b="one")
two   <- list(a=2:3,b="two")
three <- list(a=3:4,b="three") 
```

为了得到这个结果，`cbind`在列表中查找每个列表项的更有效方法是什么？`n`

```
mapply(cbind,mapply(cbind,one,two,SIMPLIFY=FALSE),three,SIMPLIFY=FALSE)

$a
     [,1] [,2] [,3]
[1,]    1    2    3
[2,]    2    3    4

$b
     [,1]  [,2]  [,3]   
[1,] "one" "two" "three" 
```

`n`当它`2`或`3`但很快会变得非常复杂时，这可以正常工作。有没有更有效的变化？我在 SO 上看到过类似的问题，但一直在努力适应它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T00:45:40.337

使用`Reduce`and `Map`(`Map`作为一个简单的包装器`mapply(..., SIMPLIFY = FALSE)`

```
Reduce(function(x,y) Map(cbind, x, y),list(one, two,three)) 
```

在 R 中使用`Reduce`或大多数函数式编程基函数时，您通常无法传入参数，`...`因此您通常需要编写一个小的匿名函数来执行您想要的操作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-01T00:53:03.343

或者像这样：

```
mapply(cbind, one, two, three) 
```

或者像这样：

```
mylist <- list(one, two, three)
do.call(mapply, c(cbind, mylist)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T00:55:49.783

```
sep.list <- unlist(list(one, two, three), recursive = FALSE)
lapply(split(sep.list, names(sep.list)), do.call, what = cbind) 
```

# angularjs - AngularJS：无法更改输入类型

> ID：15148456
> 
> 赞同：18
> 
> 时间：2013-03-01T00:40:40.570
> 
> 标签：angularjs

每当我将 Angular 表达式作为`input`'s的值时`type`，它将不起作用：

```
<input ng-model="model" type="{{'number'}}"> 
```

数值被转换为字符串，复选框根本不起作用。

[http://jsfiddle.net/punund/NRRj7/3/](http://jsfiddle.net/punund/NRRj7/3/)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2015-03-12T12:04:57.827

是的，你可以......至少现在:)

HTML：

```
<section ng-app="myApp" ng-controller="mainCtrl">
  <input type="{{inputType}}" placeholder="Put your password" />
  <input type="checkbox" id="checkbox" ng-model="passwordCheckbox" ng-click="hideShowPassword()" />
  <label for="checkbox" ng-if="passwordCheckbox">Hide password</label>
  <label for="checkbox" ng-if="!passwordCheckbox">Show password</label>  
</section>
<script src="http://code.angularjs.org/1.2.13/angular.min.js"></script> 
```

JS：

```
var myApp = angular.module('myApp', []);
myApp.controller('mainCtrl', ['$scope', function( $scope ){

  // Set the default value of inputType
  $scope.inputType = 'password';

  // Hide & show password function
  $scope.hideShowPassword = function(){
    if ($scope.inputType == 'password')
      $scope.inputType = 'text';
    else
      $scope.inputType = 'password';
  };
}]); 
```

来源：[http ://codepen.io/gymbry/pen/fJchw/](http://codepen.io/gymbry/pen/fJchw/)

**2015 年 4 月 17 日更新：**

我在上面的 Codepen 中随机更改了 Angular 版本，这似乎从版本 1.0.2 开始工作......希望这有帮助......

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-01T10:25:15.230

您不能动态更改输入的类型，因为 IE 不允许这样做并且 AngularJS 需要跨浏览器兼容。因此，即使您可能在源代码中看到更改的类型，AngularJS 也不会选择它——类型只评估一次并且不能更改。

请注意，同样的限制也适用于 jQuery：[jQuery change input type](https://stackoverflow.com/q/3541514/1418796)

动态类型的唯一选项是自定义指令（您可以在其中下载动态模板或即时准备 DOM）或`ng-include`用于包含输入类型为静态值的包含部分。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-12-22T15:29:40.997

您无法在任何浏览器中动态更改输入类型，因此无法使用动态单输入语句。剩下的就是使用条件语句来创建`type`硬编码的元素。

使用`ng-switch on`指令，您可以在其中比较`type`并根据条件匹配创建元素。例如：

```
<div class="form-group" ng-repeat="elem in formElements">
 <div class="col-lg-12" ng-switch on="elem.eleType">
  <input ng-switch-when="text" type="text" id="{{elem.id}}" name="{{elem.id}}" class="{{elem.class}}" placeholder="{{elem.placeholder}}" popover-trigger="focus" popover="{{elem.popoverText}}">
  <input ng-switch-when="password" type="password" id="{{elem.id}}" name="{{elem.id}}" class="{{elem.class}}" placeholder="{{elem.placeholder}}" popover-trigger="focus"  popover="{{elem.popoverText}}">
  <input ng-switch-when="email" type="email" id="{{elem.id}}" name="{{elem.id}}" class="{{elem.class}}" placeholder="{{elem.placeholder}}" popover-trigger="focus"  popover="{{elem.popoverText}}">
 </div>
</div> 
```

在此示例中，您将指示 Angular 脚本将第二个 div 中的`elem.eleType`using`ng-switch on`与输入标签中的实际类型（即文本、密码和电子邮件）进行比较（与 using 进行比较`ng-switch-when`，并且仅在条件匹配的地方创建该输入元素，其余部分将被忽略。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-08T08:01:45.950

```
<input type="text" ng-model="myModel" ng-if="inputType === 'text'"/>
<input type="password" ng-model="myModel" ng-if="inputType === 'password'"/> 
```

这对我有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-10T22:22:33.040

这是@vidriduch 答案的一个小扩展。在这种情况下，我使用表单的模型对象“配置” `{type:"password", value:"topsecret"}`，并像这样显示它：

```
<input type="{{config.type}}" ng-model="config.value"> 
```

理想情况下，我可以根据需要更改配置对象，并使用相同的输入元素来编辑具有匹配类型/值的任何配置记录。我原来切换记录的方法是调用下面的作用域函数：

```
$scope.newRecord = function (newcfg) {
    $scope.config = newcfg;
}; 
```

但是，我有时会收到转换错误或有关验证的投诉。这是在 Chrome 47 中。例如，它真的不喜欢从文本切换到日期。浏览器似乎在类型或 vv 更改之前接收到值的更改。

我通过强制模型（以及类型）在更改之间重置来解决这个问题。

```
$scope.newRecord = function (newcfg) {
   $scope.config = {}; //clear the model object
   $timeout(function() {
      $scope.config = newcfg;
   }, 0); //zero delay needed 
```

};

这可能不是一个理想的解决方案，但它说明了其他人可能会遇到的“问题”。

# python - 使用 BeautifulSoup 迭代 HTML

> ID：15148459
> 
> 赞同：0
> 
> 时间：2013-03-01T00:40:58.890
> 
> 标签：python, html, beautifulsoup

我想用 BeautifulSoup 遍历 HTML 文件并找到带有内容的标签，“首选名称”这是我要查找的标签：（这是我要搜索的文件的一部分）：

```
 <td nowrap class="label">
    Preferred Name
    <span class="slot_labels"></span>
  </td> 
```

我试图用这个搜索（doc是那个html文件的名称）：

```
 soup = BeautifulSoup(doc)
 tags = soup.fetch('td')
 for tag in tags:
     if tag.contents[0] == 'Preferred Name':
         return tag 
```

此代码不起作用，有人可以帮助...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:47:35.783

内容包括空格，所以试试这个：

```
soup = BeautifulSoup(doc)
tags = soup.fetch('td')
for tag in tags:
    if tag.contents[0] and tag.contents[0].strip() == 'Preferred Name':
        return tag 
```

# system.reactive - 如何使用 Observable.ToEvent() 的输出？

> ID：15148460
> 
> 赞同：1
> 
> 时间：2013-03-01T00:41:07.793
> 
> 标签：system.reactive

如何有效地使用 Observable.ToEvent() 的输出？我希望我可以将其路由回标准的 .NET 事件（例如，将 TripleClick 事件处理程序添加到 Windows 表单作为学术练习）。

但是，该方法输出一个 System.Reactive IEventSource，我不确定它如何转换回标准 .NET 事件的世界。任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T01:01:41.467

`IEventSource`有一个名为 的事件，`OnNext`此事件不遵循正常模式，或者`object sender, EventArgs e`，而是一个`Action<Unit>`.

举个例子：

```
var source = new Subject<Unit>();
source.ToEvent().OnNext += unit => Console.Writeline("hello");
source.OnNext(Unit.Default);

outputs

"hello" 
```

# c# - 使用 Windows 8 但不是 Windows 7 时，Google Api Redirect 在 WP7 上给我 404 错误

> ID：15148465
> 
> 赞同：8
> 
> 时间：2013-03-01T00:41:21.200
> 
> 标签：c#, internet-explorer, windows-phone-7, google-api, internet-explorer-10

我一直在挠头，试图弄清楚为什么我拥有的一个项目（我没有接触过的项目）不再起作用了。

基本上我试图从谷歌联系人那里取回一些数据。当我在 oAuth 部分选择“允许”时，它会一直给我一个 404 错误。这都是在 windows phone 7 模拟器中完成的。

然后我意识到我在我的 Windows 8 分区上，所以我回到我的 Windows 7 分区并且它工作正常。

想知道它是否是一些 IE 10 问题或什么的。有人对为什么会发生这种情况有任何理论吗？

**编辑**

这是我编写的一些快速示例代码，也许有人可以尝试并告诉我发生了什么。

```
 string clientId = "You client id here";

        public MainPage()
        {
            InitializeComponent();

            string url = String.Format("https://accounts.google.com/o/oauth2/auth?scope=https://www.google.com/m8/feeds&redirect_uri=http://localhost&response_type=code&approval_prompt=auto&client_id={0}", clientId);
            webBrowser1.Navigated += new EventHandler<System.Windows.Navigation.NavigationEventArgs>(webBrowser1_Navigated);

            webBrowser1.Navigate(new Uri(url, UriKind.Absolute));

        }

        void webBrowser1_Navigated(object sender, System.Windows.Navigation.NavigationEventArgs e)
        {
           var queryParmas = e.Uri.ParseQueryString();

           foreach (var item in queryParmas)
           {
               if (item.Key == "code")
               {
                   string test1 = "If you got here then it works";
                   string test2 = "in windows 8";

               }
           }
        }

    } 
```

xml

```
 <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
            <phone:WebBrowser HorizontalAlignment="Left" IsScriptEnabled="True" Name="webBrowser1" VerticalAlignment="Top" Height="669" Width="468" />
        </Grid> 
```

**编辑2**

他们发布了适用于 Windows 7 的 IE 10，所以我安装了它，它仍然可以在 Windows 7 上运行，所以我想这不是 IE 问题。一定是Windows 8的东西？也许iis？

**编辑3**

以下是 Windows 7 中正在发生的事情的流程

1.  应用程序启动并加载 MainPg.xmal
2.  已触发导航但跳过了 if 语句
3.  用户看到谷歌登录页面并输入信息并点击登录
4.  已触发导航但跳过了 if 语句
5.  用户看到“请求页面”并且必须允许应用程序权限
6.  用户点击允许
7.  导航被触发并进入“if”语句
8.  用户看到 IIS 7 屏幕。

以下是 Windows 8 中正在发生的事情的流程

1.  应用程序启动并加载 MainPg.xmal
2.  已触发导航但跳过了 if 语句
3.  用户看到谷歌登录页面并输入信息并点击登录
4.  已触发导航但跳过了 if 语句
5.  用户看到“请求页面”并且必须允许应用程序权限
6.  用户点击允许
7.  转到 404 页面导航未触发。

如您所见，按下允许按钮后一切都出错了。在 Windows 7 中，它返回到导航方法，然后显示 IIS 7 欢迎页面，但在 Windows 8 中，点击允许按钮后，它不会转到导航页面，而是显示 404。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:56:58.380

您应该使用“导航”事件处理程序，而不是“导航”事件处理程序。这将允许您在获取代码值时取消导航。在导航之后调用导航处理程序，由于回调 url 并不真正存在，它会引发 404 错误。它似乎在您的 Windows 8 上运行正常，不知道为什么您没有在 Windows 7 上获得 404，因为您也应该在那里看到它。

# ruby-on-rails - 如何为 rails 液体 GEM 创建 image_tag 过滤器

> ID：15148478
> 
> 赞同：2
> 
> 时间：2013-03-01T00:42:32.437
> 
> 标签：ruby-on-rails, filter, image, liquid

我正在尝试编写一个 CMS 类型的应用程序，并希望允许用户使用 {{ page.image_url | my_img_tag }}。

辅助模块只是：

```
module LiquidFilters

  include ActionView::Helpers::TagHelper 
  include ActionView::Helpers::AssetTagHelper

  def my_img_tag(image_name)
    image_tag (image_name)
  end

end 
```

然后我在渲染期间注册：

```
def liquidize(content, arguments)
 Liquid::Template.parse(content).render(arguments, :filters => [LiquidFilters]).html_safe
end 
```

然而，返回的结果是：

```
Liquid error: undefined local variable or method `config' for # 
```

我不想自己创建 img 标签，因为我正在使用回形针来定位来自 AWS-S3 的图像，并且我担心我会遇到问题。

非常感谢任何帮助 - 我对 ruby​​ 和 rails 还很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:21:39.590

当我在 LiquidFilter 模块中包含额外的两个 Sprockets 模块时，该代码有效。即需要的四个模块是：

```
include ActionView::Helpers::TagHelper 
include ActionView::Helpers::AssetTagHelper
include Sprockets::Helpers::RailsHelper
include Sprockets::Helpers::IsolatedHelper 
```

Liquid 的这种使用使人们能够使用简单的 CMS 类型的应用程序将上传的图像嵌入到他们的 HTML 中，这些图像是由运行在 heroku 上的 Paperclip GEM 从亚马逊 S3 中提取的。

（感谢 Pascal 格式化我原来的问题）。

# javascript - 未显示 SVG 中的 HTML 元素

> ID：15148481
> 
> 赞同：9
> 
> 时间：2013-03-01T00:42:52.093
> 
> 标签：javascript, svg, d3.js

我`foreignObject`在 SVG 中苦苦挣扎。我想在 a 中添加文本`rect`，并获得自动文本换行，我选择使用 HTML。的描述`foreignObject`可以在[这里](http://www.w3.org/TR/SVG/extend.html#ForeignObjectElement)找到。

我正在使用 D3，这是我的数据：

```
var cds = [
{"uid":"U12","sid":"16","statement":"Movies","x":10,"y":10},
{"uid":"U20","sid":"17","statement":"Food","x":10,"y":170},
{"uid":"U22","sid":"15","statement":"Sport","x":10,"y":330}
]; 
```

我为每个数据添加一张卡片，并希望显示数据中的“声明”。

```
var cardsize = { width : 150, height : 150 };

var svg = d3.select("body").append("svg:svg")
    .attr("width", 170)
    .attr("height", 490);

var card =  svg.selectAll("rect")
    .data(cds)
    .enter().append("svg:g")
    .attr("class", "card")
    .attr("transform", function(d,i) { 
        d.x = 10;
        d.y = 10+i*(10+cardsize.height);
        return "translate(" + d.x + "," + d.y + ")";
    });

card.append("svg:rect")
    .attr('width', cardsize.width)
    .attr('height', cardsize.height)

card.append("svg:foreignObject")
    .attr('width', cardsize.width)
    .attr('height', cardsize.height)
    .append('p')
    .attr("class","statement")
    .text(function(d) { return d.statement; }); 
```

一张卡片的输出是这样的：

```
<g class="card" transform="translate(10,330)">
    <rect width="150" height="150"></rect>
    <foreignObject width="150" height="150"><
        p class="statement">Sport</p>
    </foreignObject>
</g> 
```

我在测试过的 (mac) 浏览器（Safari 6.0.2、Chrome 25.0.1364.99、Firefox 18.0.2）中看不到文本。[W3 的验证器](http://validator.w3.org/check)不喜欢输出，并为每张卡给我这个错误：

> 在此上下文中，元素 foreignObject 不允许作为元素 g 的子级。

所以我的问题是，问题出在哪里，为什么foreignObject 不允许作为元素的子`g`元素？

我也想知道为什么`.html(function(d) { return d.statement; });`不起作用（没有输出）。但`.text(function(d) { return d.statement; });`工作正常吗？

这是一个[小提琴](http://jsfiddle.net/EHzcR/1/)。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-01T09:02:05.873

## 简短的回答

在 foreignObject 中的所有标签中指定命名空间：替换`.append("p")`为`.append("xhtml:p")`它将起作用：http: [//jsfiddle.net/EHzcR/2/](http://jsfiddle.net/EHzcR/2/)

* * *

## 长答案

在异物的上下文中，`<p></p>`不被识别为`xhtml`段落。为什么？仅仅是因为命名空间`xhtml`不包含在`foreignObject`上下文中（a`foreignObject`可能包含任何内容（`xml`例如格式化数据），因此如果您没有明确说明，它不会将输入视为 html。）。

所以`p`标签被认为是自定义标签，而不是`xhtml`标签。因此，由于网络浏览器无法识别`p`它知道的标签中的标签，所以它只是不解释它及其内容，即使它存在，它也不会抛出错误，因为这个内容可能完全有效，只是不能直接使用。

有趣的是，`svg`即使没有必要，您也总是指定命名空间，而且我们都忘记了`p`, `div`... 也有一个非常流行的命名空间。

该`selection.html()`函数不起作用，因为在它的[实现](https://github.com/mbostock/d3/blob/master/src/core/selection-html.js)中它使用了`.innerHTML()`元素的函数，但是这里的foreignObject，不是一个html元素，没有这样的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:27:16.387

我无法从您的问题中看出您是否可以实际查看 foreignObjects 中的文本？（如果您的回答是“是”，那么您使用的是什么浏览器？）。

我期待这里的其他答案，因为下面的方法对我来说似乎不是最佳的，但它确实得到了大部分的方法。

使用 Chrome，并尝试根据[W3C 示例](http://www.w3.org/TR/SVG/extend.html#ForeignObjectElement)`<body xmlns="http://www.w3.org/1999/xhtml">`在 foreignObject 中生成标签，然后在内部，让我看不到文本。但是，只需将内部排除在外，并添加一个类来设置 foreignObject 的样式，就可以产生所需的结果。`<p>``<body>``<body>`

[http://jsfiddle.net/6B4zs/5/](http://jsfiddle.net/6B4zs/5/)

更新了下面添加的部分代码：

**用于添加 foreignObject 文本的 D3 部分**

```
svg.selectAll("foreignObject")
    .data(cds)
    .enter()
  .append("foreignObject")
    .attr("requiredFeatures", "http://www.w3.org/TR/SVG11/feature#Extensibility")
    .attr('width', cardsize.width)
    .attr('height', cardsize.height)
    .attr("x", 10)
    .attr("y", function (d, i) { return 10 + i * (10 + cardsize.height) })
    .attr("class", "fo-text")
    .text(function (d) { return d.statement; }); 
```

**CSS**

```
.fo-text {
    padding: 5px 10px;  
    font: 300 14px "Helvetica Neue", sans-serif;
    color: #000;
} 
```

# spring-aop - 如果在导入的 xml 中定义，则不应用弹簧方面

> ID：15148484
> 
> 赞同：0
> 
> 时间：2013-03-01T00:43:19.750
> 
> 标签：spring-aop, spring-transactions

我有 2 个 JAR 文件，比如 A.jar 和 B.jar，A.jar 包含一个 Spring XML A.xml，它定义了与事务相关的内容。

```
<bean id="txManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="dataSource" ref="lookUpDataSource" />
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <tx:advice id="txAdvice" transaction-manager="txManager">
        <!-- the transactional semantics... -->
        <tx:attributes>
            <tx:method name="readAll" />
        </tx:attributes>
    </tx:advice>

    <aop:config>
        <aop:pointcut id="FooBarOperation"
            expression="execution(* com.foo.bar.service.*ServiceInterface.*(..))" />
        <aop:advisor advice-ref="txAdvice" pointcut-ref="FooBarOperation" />
    </aop:config> 
```

我在 A.jar com.foo.bar.service.AlphaServiceInterface 中编写了一个服务，它使用 Hibernate SQL 执行数据库事务。当我使用 A.jar 中的 JUnit 测试此服务时，一切都很好，代理由 Spring 创建，我能够运行服务调用。现在，我将上面的 Spring XML 文件导入到另一个 Spring XML 文件 B.xml 中，该文件使用 B.jar 放置

```
<import resource="classpath:/META-INF/spring/A.xml"/> 
```

我在 B.jar 中编写完全相同的 junit 测试并尝试对其进行测试，未创建事务上下文并且我遇到以下异常： org.hibernate.HibernateException: createSQLQuery is not valid without active transaction

请注意，这个问题与[在其他 JAR 中定义时未执行的 Spring Aspect](https://stackoverflow.com/questions/10204374/spring-aspect-not-executed-when-defined-in-other-jar)有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T23:09:54.097

我发现这是因为我的 hibernate.cfg.xml 中的以下原因：

```
<property name="current_session_context_class">thread</property> 
```

删除上面的线后它工作正常，但我还没有弄清楚 agove 是如何导致问题的。

# python - 列表的最小值和最大值（不使用 min/max 函数）

> ID：15148491
> 
> 赞同：2
> 
> 时间：2013-03-01T00:44:47.210
> 
> 标签：python, algorithm, minmax

我想知道是否有一种方法可以在不使用 Python 中的 min/max 函数的情况下找到列表的最小值和最大值。所以我用递归写了一个小代码。我的逻辑非常幼稚：我制作了两个堆栈（`min_stack`和`max_stack`），它们在每次递归调用期间跟踪最小值和最大值。我有两个问题：

1.  有人可以帮我估计代码的复杂性吗？
2.  有一个更好的方法吗？使用合并排序/快速排序对列表进行排序并选择第一个和最后一个元素会带来更好的性能吗？

这是我在 Python 中的尝试：

```
minimum = []
maximum = []

# Defining Stack Class
class Stack:
    def __init__(self) :
        self.items = []

    def push(self, item) :
        self.items.append(item)

    def pop(self) :
        return self.items.pop()

    def access(self, index):
        return self.items[index]

    def isEmpty(self) :
        return (self.items == [])

    def length(self):
        return len(self.items)

def minmax(input_list):
    # make two stacks, one for min and one for max
    min_stack = Stack()
    max_stack = Stack()
    # comparing the first two elements of the list and putting them in appropriate stack
    if input_list[0]<input_list[1]:
        min_stack.push(input_list[0])
        max_stack.push(input_list[1])
    else:
        max_stack.push(input_list[0])
        min_stack.push(input_list[1])

    # Pushing remaining elements of the list into appropriate stacks. 
    for i in range(2, len(input_list)):
        if input_list[i] < min_stack.access(-1):
            min_stack.push(input_list[i])
        else:
            max_stack.push(input_list[i])

    # to find minimum
    minlist = []
    while min_stack.length() > 0:
        minlist.append(min_stack.pop())

    # to find maximum
    maxlist = []
    while max_stack.length() > 0:
        maxlist.append(max_stack.pop())

    if len(minlist) > 1:
        minmax(minlist)
    else:
        minimum.append(minlist)

    if len(maxlist) > 1:
        minmax(maxlist)
    else:
        maximum.append(maxlist)

def main():
    input_list = [2, 0, 2, 7, 5, -1, -2]
    print 'Input List is: ', input_list
    minmax(input_list)

print 'Global Minimum is: ', minimum[0]
print 'Global Maximum is: ', maximum[len(maximum)-1]

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T04:59:16.570

对于中等大小的列表，使用`sorted()`当然是可靠的、快速编写的和高性能的，因为它是内置的。对于大型列表，O(n) 算法会更快，例如：

```
def minmax1 (x):
    # this function fails if the list length is 0 
    minimum = maximum = x[0]
    for i in x[1:]:
        if i < minimum: 
            minimum = i 
        else: 
            if i > maximum: maximum = i
    return (minimum,maximum)

print(minmax1([9,8,7,6,5,4,3,2,1,11,12,13,14,15,16,17,18,19]))
print(minmax1([1]))
print(minmax1([2, 0, 2, 7, 5, -1, -2])) 
```

...其输出为：

```
(1, 19)
(1, 1)
(-2, 7) 
```

我有兴趣检查这两种替代方案的性能。在我运行 Windows XP 和 Python 3.2.3 的 PC 上，我发现`minmax1()`对于少于 500 个元素的列表，排序方法比上面定义的函数更快，但对于更长的列表，O(n)`minmax1()`更快。我的时序测试代码如下：

```
def minmax_sort(x):
    x = sorted(x)
    return (x[0],x[-1])

import timeit

aa = list(range(0,100))
a = aa
while (1):
    stime = min(timeit.repeat('minmax_sort(a)', "from __main__ import minmax_sort,a",number=1000))
    mtime = min(timeit.repeat('minmax1(a)', "from __main__ import minmax,a",number=1000))
    if (stime > mtime):
        break
    else:
        a = a + aa
print(len(a)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-05T06:07:33.940

## 仅使用递归查找列表的最小值和最大值。

上周我有类似的任务，我将代码分为三个部分。

> **第 1 步：查找列表中的最小值**

```
def RecursiveMin(L):
if len(L)==2:
    if L[0]<L[1]:
        return L[0]
    else:
        return L[1]
else:
    X= RecursiveMin(L[1:])
    if L[0]<X:
        return L[0]
    else:
        return X 
```

> **第 2 步：使用升序对列表进行排序（从小到大）**

```
def Sort(x):
L=sorted(x)
if x==L:
    return x
else:
    i=0
    for i in range (len(x)):
        if x[i] > x[i+1] :
            break

    unsortedPart = x[i:]
    R = RecursiveMin(unsortedPart)
    I = unsortedPart.index(R)

    for j in range (len(x)):
        if x[j] > R :
            del x[(I+i)]
            x.insert(j,R)
            break

    return Sort(x) 
```

（我之前回答了一个排序列表问题并提供了相同的代码。所以请不要标记我抄袭，因为这是我自己的代码 Likn：[Finding minimum element in a list (recursive) - Python](https://stackoverflow.com/questions/48084884/finding-minimum-element-in-a-list-recursively-python/49095777#49095777)）。

> **步骤 3：使用参数创建一个新函数，无论用户想要最小值还是最大值*

```
def minMax(lst,user):
    if user == min:
       return Sort(lst)
    elif user == max:
       s = Sort(lst)
       return s[::-1] 
```

最后一步不是递归的，但如果您将所有三个步骤编译成一个函数，它将是“1 个递归函数”。PS如果您的问题只是关于在列表中查找最小值和最大值，您可以跳过**第 2步并对****第 1 步**和**第 3**步进行一些更改

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-22T00:26:03.493

为了找到最大值，我们可以使用以下逻辑：

```
def mx(y):
    max_n = y[0] # initial the max to the first element

for i in range(len(y)-1): # for every element check if its greater than max.
    if y[i+1]>max_n:
        max_n = y[i+1] # if so, assign max to the value
return(max_n) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-17T05:12:31.103

这将非常简单易懂。希望这会帮助你。

```
arr = []
num = int(input("Enter number of elements in list: ")) 
for i in range(0, num): 
    ele = int(input("Enter elements: ")) 
    arr.append(ele)

min = arr[ 0 ]
for a in arr:
    if a < min:
        min = a
print ("The minimum number in the list is: ", min)

max = arr[0]
for a in arr:
    if a > max:
        max = a
print("The maximum number in the lit is: ", max) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-17T05:43:11.343

> 我被要求使用 Stacks 作为一种锻炼方式来实现它。

我很惊讶有几个解决方案需要*多次*遍历列表来确定最小值和最大值。这是一个简单的 Python 3 递归解决方案，每个 OP 使用*堆栈*，它只使一个通过列表：

```
def minmax(array, minimum=None, maximum=None):

    head, *tail = array

    if minimum is None:
        minimum = [head]
    elif head < minimum[-1]:
        minimum.append(head)

    if maximum is None:
        maximum = [head]
    elif head > maximum[-1]:
        maximum.append(head)

    if tail:
        return minmax(tail, minimum, maximum)

    return minimum.pop(), maximum.pop()

if __name__ == "__main__":

    array = [2, 0, 2, 7, 5, -1, -2]
    minimum, maximum = minmax(array)
    print(array, minimum, maximum)

    array = [13]
    minimum, maximum = minmax(array)
    print(array, minimum, maximum)

    array = [9, 8, 7, 6, 5, 4, 3, 2, 1, 11, 12, 13, 14, 15, 16, 17, 18, 19]
    minimum, maximum = minmax(array)
    print(array, minimum, maximum) 
```

尽管堆栈对于此代码的工作并不是绝对必要的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-29T17:39:44.250

如果您使用 sorted() 函数，只需调用第一个索引为最小值，最后一个索引为最大值。不需要 for 循环。

```
def minimum(x):
    x = sorted(x)
    return x[0]

def maximum(x):
    x = sorted(x)
    return x[-1]

print(minimum([2, -5, 79, 20, -67])
print(maximum([45, -78, 950, 39, -567]) 
```

输出是：

```
-67
950 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-22T01:53:45.690

```
def inIntervalle(liste, min, max):
    liste_intervalle = []
    for i in range(len(liste)):
        if liste[i] < max and liste[i] > min:
            liste_intervalle.append(liste[i])
    return liste_intervalle 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-05T07:40:44.723

这是一个使用递归函数的简单解决方案。让`arr`成为您的数字列表。可以通过到达列表末尾并一次比较最后 2 个数字并将结果传播回前一个函数调用，一直到第一个元素，可以找到最小值/最大值。

```
def get_min_max(arr):
    min = find_peak(arr, peak = "minimum")
    max = find_peak(arr, peak = "maximum")
    return {"minimum": min, "maximum": max}

def find_peak(arr, peak):
    if len(arr) == 1: # base condition
        return arr[0]    
    n1 = arr[0]
    n2 = find_peak(arr[1:], peak) # first element removed for each call
    if peak == "maximum":
        if n1 > n2: 
            return n1
        else:
            return n2
    else:
        if n1 < n2: 
            return n1
        else:
            return n2 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2021-11-11T11:01:38.890

```
min=99999999999999
while True:
    value=int(input('enter your values:'))
    if value==333: #enter 333 to end the input
        break
    if min>value:
        min=value
print(min) 
```**

# c++ - 将十六进制字符串转换为无符号整数问题 C++

> ID：15148495
> 
> 赞同：5
> 
> 时间：2013-03-01T00:44:56.960
> 
> 标签：c++

我目前正在设计一个代码，给出的指令之一是获取十六进制字符串的前两位数字并执行所需的操作。小于 A 的所有内容都被考虑在内。任何大于它的都不是，它只需要下一个数字。这弄乱了代码。

这是转换它的行：

```
int x = atoi(hex.c_str); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-01T00:56:08.257

我假设这就是您的意思-您只想将字符串的前两个十六进制数字转换为无符号整数。我还假设该字符串仅包含有效的十六进制数字。如果要验证字符串，则需要为此编写一些额外的代码。

用于`strtoul`将十六进制字符串转换为无符号整数。也可以使用`substr()`string 类的方法只提取十六进制字符串的前 2 位。

```
#include <string>
#include <cstdio>
#include <cstdlib>

int main()
{
    std::string myhex = "abcdef";
    unsigned int x = strtoul(myhex.substr(0, 2).c_str(), NULL, 16);
    printf("x = %d\n", x);
} 
```

这将是您的输出（即`0xab = 171`）：

```
x = 171 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T00:50:26.693

```
int x = strtol(hex.c_str(), NULL, 16); 
```

`sscanf`如果要读取部分字符串，也可以使用。您提到您可能只想使用前两个字符：

```
int x;
if( 1 == sscanf(hex.c_str(), "%2x", &x) ) {
    printf( "Value is: %d\n", x );
} else {
    printf( "Conversion failed\n" );
} 
```

请注意，上面并不是真正的 C++。您可以为此使用`std::hex`流修饰符（请注意，我`mystr`这次调用了您的字符串以避免混淆（特别是如果您已经导入了命名空间`std`）：

```
int x;
std::istringstream iss(mystr);
bool ok = (iss >> std::hex >> x); 
```

* * *

[编辑] 我注意到您在评论中询问有关转换为*无符号*整数的问题。在那种情况下，你为什么不明确声明你的整数为`unsigned int`？

对于未签名的，您应该使用`strtoul`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T00:50:38.180

该`atoi`函数需要以 10 为底

而是使用例如`strtol`

**阅读文档**通常是个好主意。只需将函数的名称写入[AltaVista](http://www.altavista.com/)（或者，就此而言，谷歌）。它会为您找到一些文档

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T00:56:05.367

如果您要转换为无符号数，您可能希望使用`strtoul`- 前缀为`0x`16 或基数为 16。它也可能`strtol`正常工作，但应该给出一个有符号值，所以至少你可能会收到一些编译器混合有符号和无符号的警告。

# python - 在 Python 中通过引用传递整数

> ID：15148496
> 
> 赞同：119
> 
> 时间：2013-03-01T00:45:14.790
> 
> 标签：python, function, pass-by-reference, pass-by-value

如何在 Python 中通过引用传递整数？

我想修改传递给函数的变量的值。我读过 Python 中的所有内容都是按值传递的，但必须有一个简单的技巧。例如，在 Java 中，您可以传递 、 等的引用`Integer`类型`Long`。

1.  如何通过引用将整数传递给函数？
2.  最佳实践是什么？

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2013-03-01T00:50:51.860

它在 Python 中并不是这样工作的。Python 传递对对象的引用。在你的函数内部你有一个对象——你可以自由地改变那个对象（如果可能的话）。但是，整数是*不可变*的。一种解决方法是在可以变异的容器中传递整数：

```
def change(x):
    x[0] = 3

x = [1]
change(x)
print x 
```

这充其量是丑陋/笨拙，但你不会在 Python 中做得更好。原因是因为在 Python 中，赋值 ( `=`) 获取右侧结果的任何对象并将其绑定到左侧的任何对象 *（或将其传递给适当的函数）。

理解了这一点，我们就可以明白为什么无法在函数内部改变不可变对象的值——你不能改变它的任何属性，因为它是不可变的，你不能仅仅给“变量”分配一个新的值，因为那时您实际上是在创建一个新对象（与旧对象不同）并为其赋予旧对象在本地命名空间中的名称。

通常解决方法是简单地*返回*您想要的对象：

```
def multiply_by_2(x):
    return 2*x

x = 1
x = multiply_by_2(x) 
```

* * *

*在上面的第一个示例中，`3`实际上被传递给`x.__setitem__`.

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-03-01T04:21:28.420

大多数需要通过引用传递的情况是需要将多个值返回给调用者。“最佳实践”是使用多个返回值，这在 Python 中比在 Java 等语言中要容易得多。

这是一个简单的例子：

```
def RectToPolar(x, y):
    r = (x ** 2 + y ** 2) ** 0.5
    theta = math.atan2(y, x)
    return r, theta # return 2 things at once

r, theta = RectToPolar(3, 4) # assign 2 things at once 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-08-19T12:15:37.797

不完全直接传递一个值，而是像传递一样使用它。

```
x = 7
def my_method():
    nonlocal x
    x += 1
my_method()
print(x) # 8 
```

注意事项：

*   `nonlocal`在 python 3 中引入
*   如果封闭范围是全局范围，请使用`global`而不是`nonlocal`.

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-03-01T00:53:38.013

真的，最好的做法是退后一步，问问你是否真的需要这样做。*为什么*要修改传递给函数的变量的值？

如果您需要快速破解，最快的方法是传递 a`list`持有整数，并`[0]`在每次使用它时粘贴 a ，正如 mgilson 的回答所证明的那样。

如果您需要为更重要的事情执行此操作，请编写`class`具有 an`int`作为属性的 a，这样您就可以设置它。当然，这迫使你为类和属性想出一个好名字——如果你什么都想不出来，回去再读几遍句子，然后使用`list`.

更一般地说，如果你试图将一些 Java 习语直接移植到 Python，那么你做错了。即使有直接对应的东西（如`static`/ `@staticmethod`），你仍然不想在大多数 Python 程序中使用它，因为你会在 Java 中使用它。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2019-06-07T14:15:16.667

也许这不是pythonic方式，但你可以这样做

```
import ctypes

def incr(a):
    a += 1

x = ctypes.c_int(1) # create c-var
incr(ctypes.ctypes.byref(x)) # passing by ref 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-02-16T03:52:10.193

一个**numpy 单元素数组**是可变的，但在大多数情况下，它可以像一个数值 python 变量一样被评估。因此，它是一个比单元素列表更方便的按引用编号容器。

```
 import numpy as np
    def triple_var_by_ref(x):
        x[0]=x[0]*3
    a=np.array([2])
    triple_var_by_ref(a)
    print(a+1) 
```

输出：

```
7 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-03-01T04:15:41.177

在 Python 中，每个值都是一个引用（指向对象的指针），就像 Java 中的非基元一样。此外，与 Java 一样，Python 也只有按值传递。因此，从语义上讲，它们几乎相同。

既然您在问题中提到了 Java，我想看看您如何在 Java 中实现您想要的。如果你可以在 Java 中展示它，我可以向你展示如何在 Python 中完全等价地做到这一点。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-02-04T06:44:41.817

```
class PassByReference:
    def Change(self, var):
        self.a = var
        print(self.a)
s=PassByReference()
s.Change(5) 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-04-27T13:50:01.823

可能比 list-of-length-1 技巧更能自我记录的是旧的空类型技巧：

```
def inc_i(v):
    v.i += 1

x = type('', (), {})()
x.i = 7
inc_i(x)
print(x.i) 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-09-02T04:23:29.840

正确的答案是使用一个类并将值放在类中，这可以让您完全按照您的意愿通过引用。

```
class Thing:
  def __init__(self,a):
    self.a = a
def dosomething(ref)
  ref.a += 1

t = Thing(3)
dosomething(t)
print("T is now",t.a) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-03-01T00:46:50.803

在 Python 中，一切都是按值传递的，但如果您想修改某些状态，可以更改传递给方法的列表或对象中的整数值。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-02-02T12:01:15.030

```
class Obj:
  def __init__(self,a):
    self.value = a
  def sum(self, a):
    self.value += a

a = Obj(1)
b = a
a.sum(1)
print(a.value, b.value)// 2 2 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-10-31T05:41:32.773

整数在 python 中是**不可变**的，一旦它们被创建，我们就不能通过对变量使用赋值运算符来更改它们的值，我们让它指向其他地址而不是前一个地址。

在 python 中，一个函数可以**返回多个值**，我们可以使用它：

```
def swap(a,b):
    return b,a

a,b=22,55
a,b=swap(a,b)
print(a,b) 
```

要更改变量指向的引用，我们可以将不可变数据类型（**int、long、float、complex、str、bytes、truple、frozenset**）包装在可变数据类型（**bytearray、list、set、dict**）中。

```
#var is an instance of dictionary type

def change(var,key,new_value):
    var[key]=new_value

var =dict()
var['a']=33
change(var,'a',2625)
print(var['a']) 
```

# html - 在 Chrome 中，查看文档的 mime 类型最简单的方法是什么？

> ID：15148497
> 
> 赞同：25
> 
> 时间：2013-03-01T00:45:26.043
> 
> 标签：html, google-chrome, mime-types

在 Firefox 中，您可以从右键菜单中选择“查看页面信息”，然后会显示 mime 类型。

但是 Chrome 中相同的“查看页面信息”命令不显示 mime 类型。

感觉就像我忽略了一些明显的东西。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2016-05-19T10:54:55.340

*早期和更高版本的 Chrome 可能略有不同*

**铬 v50.0.2661.102 米**

打开 Chromes 开发者工具（*几个选项*）：

1.  菜单 -> 更多工具 -> 开发者工具
2.  `Ctrl + Shift + I`
3.  敲 `F12`键

打开后，选择**Network**选项卡，在左侧选择资源的名称，然后点击**Headers**选项卡。在**响应标头**下找到您的 mime 类型的**Content-Type 。**

[![在此处输入图像描述](../Images/ba40d1e6ee00a6da53470182a2a2d0f5.png)](https://i.stack.imgur.com/A1Lui.png)

使用图像，您可以选择“**预览**”选项卡，您将能够看到有关资源的一些信息，包括位于开发人员窗口底部的 mime 类型。

[![在此处输入图像描述](../Images/abf657d4eb59179e68c45c1c6107802e.png)](https://i.stack.imgur.com/JOdHN.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-01T19:04:25.303

点击`F12`然后转到网络选项卡。如果您想要 html 文档，则将过滤器缩小到 Documents（在底部）。

# objective-c - 在文件名或对象名中插入变量

> ID：15148507
> 
> 赞同：1
> 
> 时间：2013-03-01T00:46:00.770
> 
> 标签：objective-c

有没有办法让我把`[objects objectNamed:@"level"[insert i]"start"];`

这是我现在唯一可以做到的方法，但我想用 i 替换它的数字。

```
CCTMXObjectGroup *objects = [theMap objectGroupNamed:@"level1_oj"];
NSMutableDictionary *start1;
if(i ==0)
{
    start1 = [objects objectNamed:@"level1start"];
}
if(i ==1)
{
    start1 = [objects objectNamed:@"level2start"];
}

CGFloat x = [[start1 valueForKey:@"x"]intValue];
CGFloat y = [[start1 valueForKey:@"y"]intValue];

levelstart[i]=ccp(((x/2)-i*480),y/2); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T00:51:15.783

采用：

```
[objects objectNamed:[NSString stringWithFormat:@"level%dstart", i]]; 
```

您需要`stringWithFormat:`用于此类情况。`%d`or`%i`可以用来表示整数，`%@`也可以用来插入字符串。这是[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/clm/NSString/stringWithFormat%3a)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T00:50:59.810

查看[NSString 文档](https://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/)

你想用`[NSString stringWithFormat:]`

有关格式的更多详细信息，请查看[格式化字符串对象](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/FormatStrings.html)

# java - 如何使用 Reg-ex 找到一组单词？

> ID：15148511
> 
> 赞同：0
> 
> 时间：2013-03-01T00:46:18.127
> 
> 标签：java, regex

这是代码：

```
String Str ="Animals \n" +
                "Dog \n" +
                "Cat \n" +
            "Fruits \n" +
                "Apple \n" +
                "Banana \n" +
                "Watermelon \n" +
            "Sports \n" +
                "Soccer \n" +
                "Volleyball \n"; 
```

`Str`基本上有3个类别（动物，水果，运动）。他们每个人都在单独的行中。使用正则表达式，我如何找到水果的内容，这会给我这样的输出：

```
Apple
Banana
Watermelon 
```

我也想要一个与您的答案相符的解释，以便我更好地理解这个问题。

谢谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:27:43.640

假设您要提取单词“Fruits”和单词“Sports”之间的文本，您可以使用带有[捕获组](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#cg)的正则表达式。这样，如果字符串匹配，那么您仍然必须提取包含所需文本的[组。](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#group(int))

例如：

```
Pattern p = Pattern.compile("Fruits(.*?)Sports", Pattern.DOTALL);
// The string "Fruits" ------^     ^    ^        ^
// Capture everything in between --^    ^        ^
// The string "Sports" -----------------^        ^
// This tells the regex to treat newlines        ^
//   like normal characters ---------------------^ 
```

请看下面的[铁路图](http://regexplained.co.uk/#eyJwYXR0ZXJuIjoiRnJ1aXRzKC4qPylTcG9ydHMifQ==)：

![图像的铁路图](../Images/e337baf29ea014cb7b48cbb690edd334.png)

或者，您可以使用更高级的正则表达式，使用[正向前瞻和后瞻](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#special)。这意味着您可以让您的正则表达式仍然在单词“Fruit”和“Sports”之间查找文本，但不将这些字符串本身视为匹配的一部分。

```
Pattern p = Pattern.compile("(?<!Fruits).*?(?=Sports)", Pattern.DOTALL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T01:13:54.093

我会先将字符串拆分成一个单词`String[] words = Regex.Split(Str, "\n");`数组`words`（

# oop - 在 Fortran 2003 中使用“类”的效率？

> ID：15148512
> 
> 赞同：3
> 
> 时间：2013-03-01T00:46:32.763
> 
> 标签：oop, class, fortran, performance

Fortran 2003 通过使用类来支持数据多态性，例如：

```
subroutine excute(A)
  class(*) :: A

  select type (A)
    class is ()
      ...
    type is () 
      ...
  end select

end subroutine 
```

我的问题是：如果我需要大量调用这个子例程，是否会因为 SELECT 语句而减慢代码速度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T22:35:18.057

SELECT TYPE 通常由多态对象的描述符（`CLASS(*) :: A`此处）实现，该描述符具有指定对象动态类型的类似标记或指针或索引。选择类型的执行就像在这个标记上的 SELECT CASE 一样，额外的复杂性是非多态类型保护 (TYPE IS) 优先于多态保护 (CLASS IS) 匹配。

有一些与此构造相关的开销。这种开销比代码什么都不做要多。再说一遍，什么都不做的代码很少有用。所以真正的问题是，对于提供代码所需的必要功能级别（可能低于 SELECT TYPE 提供的全部功能）的替代方法，使用 SELECT TYPE 是更好还是更差执行速度。要回答这个问题，您需要定义和实施该方法，然后在与您的用例相关的上下文中测量速度差异。

正如评论中所指出的，无限多态实体本质上是一种存储任何类型的东西的类型安全方式。在这种情况下，在某个阶段需要 SELECT TYPE 才能访问存储的东西的值。然而，这只是 F2003 对多态性支持的一个相当具体的子集。在更典型的示例中，根本不会使用 SELECT TYPE - 与对象的动态类型相关的行为将通过调用已声明类型的重写绑定来访问。

# java - 越界异常 - 二维数组迷宫

> ID：15148516
> 
> 赞同：0
> 
> 时间：2013-03-01T00:46:52.300
> 
> 标签：java, indexoutofboundsexception, maze

我是新来的，一般来说都是编码新手！学习很有趣，但一如既往的乏味。我正在编写一个 char 需要解决迷宫的程序。我在这里还没有完成，但由于某种原因，我在长度大于 3 的任何数组上都出现了越界异常。我不知道为什么。有测试用例，你可以看到小迷宫打印成功，但是，当我尝试更大的迷宫时，我得到了一个超出范围的异常。

有什么建议吗？

```
import java.awt.Point;

public class Maze 
{
    final char WALL = 'x';
    final char BOT = 'r';
    final char FREE = ' ';

    private String[] maze;
    private Point position;
    private boolean[][] mazeWalls;

    public Maze(String[] strings) // constructor to create maze from main as a 2D array
    {
        maze = strings;
        mazeWalls = new boolean[strings[0].length()][strings.length];
            for (int i = 0; i < mazeWalls.length; i++)
                for (int j = 0; j < mazeWalls[0].length; j++)
                {
                    if (strings[i].charAt(j) == WALL) // this is where it shows the out of bounds error on m[3] or m[4]
                        mazeWalls[j][i] = true;

                    else if (strings[i].charAt(j) == BOT)
                    {
                        position = new Point(i, j);
                    }
                }
    }

    public static void main (String[] args)
    {
        Maze m;
        /*m = new Maze(new String[] {
                "xxx",
                "xrx",
                "xxx"});
        m = new Maze(new String[] {
                "xxx",
                "xrx",
                "x x"});
        m = new Maze(new String[] {
                "xxx",
                "xr      ",
                "xxx",});*/
        m = new Maze(new String[] {
                "xxxxx",
                "xr  x",
                "x   x",
                "x    ",
                "x   x",
                "x   x",
                "xxxxx"});
        /*m = new Maze(new String[] {
        "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
        "xr  r                 x                     x",
        "x                    x                     x",
        "x   x                x                      ",
        "x   x                x                     x",
        "x   x                x                     x",
        "x   x                x                     x",
        "x   xxxxxxxxxxxxxxxxxxxxxxxxxx             x",
        "x   x                                      x",
        "x   x                                      x",
        "x   x                                      x",
        "x   x                                      x",
        "x   x                                      x",
        "x   x                                      x",
        "x   x                                      x",
        "x   xxxxxxxxxxxxxx  xxxxxxxxxxxxxxxxxxxxxxxx",
        "x   x                                      x",
        "x   x                                      x",
        "x   x                                      x",
        "x                                          x",
        "x                                          x",
        "x                                          x",
        "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"});*/
                Robot r = new RandomBot();
            //  Robot r = new RightHandBot();

                int c = 0;
                System.out.println(m);
                while (!m.isRobotOnEdge())
                {
                    c++;
                    Point move = r.getMove(m);
                    m.moveTo(move);
                    System.out.println("Step Count: " + c);
                    System.out.println(m);
                    try {
                        Thread.sleep(100);
                    } catch (InterruptedException e) {}
                }   
    }

    public void moveTo(Point p) 
    {
        /*for (int i = 0; i < mazeWalls.length; i++)
            for (int j = 0; j < mazeWalls[0].length; j++)
            {
                if (maze[i].charAt(j) == BOT)
                    position = p;
            }*/
    }

    public Point getPoint()
    {
        return (Point)position.clone();
    }

    public boolean wallObject(Point p)
    {
        return wallHere(position.x, position.y);
    }

    public boolean wallHere(int x, int y)
    {
        return x < 0 || x >= mazeWalls.length || y < 0 || y >= mazeWalls[0].length || mazeWalls[x][y];
    }

    public boolean isRobotOnEdge() 
    {
                if (position.x == mazeWalls.length - 1 || position.y == mazeWalls[0].length - 1 || position.x == 0 || position.y == 0)
                    return true;
        return false;
    }

    public String toString()
    {
        String s = "";
            for (int j = 0; j < mazeWalls.length; j++)
            {
                for (int i = 0; i < mazeWalls[0].length; i++)
                {
                    if (i == position.x && j == position.y)
                        s += BOT;
                    else if (mazeWalls[i][j] == true)
                        s += WALL;
                    else
                        s += FREE;
                }
             s += "\n";
            }

        return s;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:19:03.557

您正在将一维`String`数组转换为二维`boolean`数组，但目标数组的大小是错误的。行数和列数不同，因此二维数组的大小很重要。看这个：

```
 ROWS                COLUMNS
mazeWalls = new boolean[strings[0].length()][strings.length]; 
```

它应该是

```
mazeWalls = new boolean[strings.length][strings[0].length()]; 
```

此外，除非您尝试转置这些值，否则此行

```
mazeWalls[j][i] = true; 
```

应该

```
mazeWalls[i][j] = true; 
```

# maven - Maven在服务层的Junit测试用例上构建错误

> ID：15148520
> 
> 赞同：0
> 
> 时间：2013-03-01T00:47:21.993
> 
> 标签：maven, service, junit

我正在尝试编写一个简单的 Junit 测试用例来测试我的项目的服务/dao 层。但是当我使用 Maven 构建它时出现编译错误。请帮我解决这个问题。

**代码：**

```
@RunWith(SpringJUnit4ClassRunner.class) 
@ContextConfiguration(locations = {"/C:/project/src/main/webapp/WEB-INF/mvc-dispatcher-servlet.xml"})
public class AServiceTest { 

    @Autowired
    private AService aService;

    @Test
    public void testValidate() throws Exception {

        String user = "user10";
        String pass = "pass10";
        String flag = "failure";

        User response = aService.validate(user, pass);

        if (user.equalsIgnoreCase(response.getUser()) &&  pass.equals(response.getPass())) {
            flag="success";

            assertEquals("success", flag);
        }
    }
} 
```

**错误：**

```
package org.springframework.test.context does not exist 
```

**更新：**

spring-test 的依赖项丢失了我的 pom.xml，我添加了相同的内容，上面的错误消失了，但我现在收到了一个新错误。

**错误：**

```
SEVERE: Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@3b5587] to prepare 

test instance [com.sample.project.controller.AServiceTest@16c1857]
java.lang.IllegalStateException: Failed to load ApplicationContext
        at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:308)
        at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
        at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
        at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:220)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:301)
        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:303)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:240)
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
        at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
        at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
        at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:180)
        at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
        at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
        at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
        at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
        at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)
Caused by: org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from class path resource [C:/project/src/main/webapp/WEB-

INF/mvc-dispatcher-servlet.xml]; nested exception is java.io.FileNotFoundException: class path resource [C:/project/src/main/webapp/WEB-INF/mvc-dispatcher-servlet.xml]
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:341)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:212)
        at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:81)
        at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
        at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:280)
        at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:304)
        ... 30 more
Caused by: java.io.FileNotFoundException: class path resource [C:/project/src/main/webapp/WEB-INF/mvc-dispatcher-servlet.xml] cannot be opened because it does not exist
        at org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:158)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:328)
        ... 39 more 
```

**上下文文件：**

```
xmlns:context="http://www.springframework.org/schema/context"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:jee="http://www.springframework.org/schema/jee"
xmlns:mvc="http://www.springframework.org/schema/mvc"
 xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans     
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/jee
    http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

<context:component-scan base-package="com.sample.project" />

<mvc:annotation-driven />

<jee:jndi-lookup id="sampleDS" jndi-name="java:/comp/env/jdbc/sampleDS" expected-type="javax.sql.DataSource"/>

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="sampleDS"/>
</bean>

<bean id="myTxManager" class="org.springframework.orm.jpa.JpaTransactionManager">
      <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean>

<tx:annotation-driven transaction-manager="myTxManager" />

<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/pages/" />
    <property name="suffix" value=".jsp" />
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:28:42.977

如果无法访问您的配置以及如何在您的环境中进行设置，那么真的很难提供帮助。

从异常来看，您似乎没有为 spring 框架正确配置应用程序上下文文件。错误消息非常明确：

```
Caused by: java.io.FileNotFoundException: class path resource [C:/project/src/main/webapp/WEB-INF/mvc-dispatcher-servlet.xml] cannot be opened because it does not exist 
```

我不确定你对春天的体验是什么，但我会读一读。以下有用链接：

*   [一步一步的spring MVC](http://static.springsource.org/spring/articles/2005/MVC-step-by-step/Spring-MVC-step-by-step-Part-1.html)
*   [设置 MVC 环境](http://static.springsource.org/docs/Spring-MVC-step-by-step/part1.html)

对于测试：

*   [Spring 源码文档](http://static.springsource.org/spring/docs/2.5.6/reference/testing.html)
*   [关于 MVC 测试的博客](http://blog.springsource.org/2012/11/12/spring-framework-3-2-rc1-spring-mvc-test-framework/)

# android - MapView 扩展了 android.support.v4.app.FragmentActivity

> ID：15148524
> 
> 赞同：1
> 
> 时间：2013-03-01T00:47:35.263
> 
> 标签：android, api, map, android-mapview

我有个问题 。我正在尝试在 Google Maps Android API v2 中使用 MapView 。我在文档中阅读。他们说

MapView 是 Android View 类的子类，允许您在 Android View 中放置地图。View 代表屏幕的一个矩形区域，是 Android 应用程序和小部件的基本构建块。与 MapFragment 非常相似，MapView 充当地图的容器，通过 GoogleMap 对象公开核心地图功能。

可能 MapView 和 MapFragment 是一回事。在 Google Maps Android API v1 中，MapView 扩展 MapActivity。但在 Google Maps Android API v2 中，我可以再使用它了。我看教程

[如何在 Android 上通过新的 Google Maps API v2 显示 Google Maps？](https://stackoverflow.com/questions/15037779/how-to-display-google-map-via-new-google-maps-api-v2-on-android)

他们建议扩展 FragmentActivity 。但在我的布局 xml 中，我只是使用

```
<com.google.android.gms.maps.MapView xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/map"
  android:layout_width="match_parent"
  android:layout_height="match_parent"/> 
```

它没有像 MapFragment 这样的前缀片段。当它显示时，看起来就像我使用 MapFragment 时一样。可能他们两个是一样的吗？？？我不清楚。任何人都可以为我解释。对不起我的英文不好！！！

# google-app-engine - 在非默认版本上运行 Map Reduce？

> ID：15148527
> 
> 赞同：1
> 
> 时间：2013-03-01T00:48:08.077
> 
> 标签：google-app-engine, mapreduce

我有几个关于 App Engine Map Reduce API 的问题。首先，SDK 中有一个 mapreduce 包，这里有一个单独的 mapreduce 包：

[https://developers.google.com/appengine/downloads](https://developers.google.com/appengine/downloads)

我应该使用哪一个？我应该使用捆绑包，还是文档过时而我应该实际使用 SDK 版本？

其次，我希望能够在非默认版本上运行 mapreduce，以确保来自 mapreduce 的请求不会干扰用户请求。

最好的方法是什么？我可以使用任务队列启动管道，并将该队列的目标版本设置为我的非默认版本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T22:11:44.727

[我们建议在http://code.google.com/p/appengine-mapreduce/](http://code.google.com/p/appengine-mapreduce/)上使用用于 GAE 的 Map Reduce 的开源版本

文档中陈旧的捆绑链接是一个错误。那很快就会被清理干净。

我们的一些 SDK 包含一些 MapReduce（出于历史原因），但目前要采用开源版本。

至于使用单独的版本，这有点“取决于”。如果您正在考虑处理器竞争方面的干扰，那么这不太可能是一个明显的问题。根据您设置的队列处理速率，将启动更多应用程序实例以根据需要处理映射任务。我会先尝试一些实验。在投入时间和精力解决问题之前，请确保您遇到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T03:34:00.927

mapreduce 可以在非默认版本上启动。启动后，它将继续自动在该版本上运行。

就我而言，我只是在非默认版本上部署代码并使用 version_id.app_id.appspot.com/path_to_start_a_job 触发 mapreduce。

cron 作业也可以毫无问题地在非默认版本上触发 mapreduce。

# javascript - 车把计数器#each

> ID：15148528
> 
> 赞同：22
> 
> 时间：2013-03-01T00:48:15.107
> 
> 标签：javascript, templates, handlebars.js, template-engine

在 Handlebars 中，假设我有一个`names`. 我能怎么做

```
{{#each names}}
{{position}}
{{name}}
{{/each}} 
```

`{{position}}`1 代表名字，2 代表第二名，等等？我是否必须将位置存储为集合中的键？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-12-16T08:37:49.790

您可以使用内置的 Handlebars @index 表示法来做到这一点：

```
{{#each array}}
  {{@index}}: {{this}}
{{/each}} 
```

@index 将给出给定数组中每个项目的（从零开始的）索引。

请注意，对于使用带有 Razor 视图引擎的 Handlebars 的人，您必须使用符号 @@index 以避免编译错误。

有关更多内置帮助程序，请参见[http://handlebarsjs.com/](http://handlebarsjs.com/)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-01-26T21:28:13.537

```
Handlebars.registerHelper("counter", function (index){
    return index + 1;
}); 
```

用法：

```
{{#each names}}
    {{counter @index}}
    {{name}}
{{/each}} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-13T03:11:29.740

虽然您无法使用任何本机 Handlebars 助手来执行此操作，但您可以创建自己的。您可以调用`Handlebars.registerHelper()`，向其传递一个带有您要匹配的名称（位置）的字符串，以及一个返回当前位置计数的函数。您可以在调用的闭包中跟踪位置编号`registerHelper`。这是一个示例，说明如何注册一个`position`应该与您的模板示例一起使用的助手。

JavaScript：

```
// Using a self-invoking function just to illustrate the closure
(function() {
    // Start at 1, name this unique to anything in this closure
    var positionCounter = 1;

    Handlebars.registerHelper('position', function() {
        return positionCounter++;
    });

    // Compile/render your template here
    // It will use the helper whenever it seems position
})(); 
```

这是一个 jsFiddle 来演示：http: [//jsfiddle.net/willslab/T5uKW/1/](http://jsfiddle.net/willslab/T5uKW/1/)

虽然[handlebarsjs.com](http://handlebarsjs.com/)上记录了帮助程序，但我花了一些精力来弄清楚如何使用它们。感谢您的挑战，希望对您有所帮助！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-25T01:06:16.823

只有你必须使用 {{@index}}

例子：

```
{{#.}}
<li class="order{{@index}}"> counter: {{@index}}</li>
{{/.}} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-30T16:04:32.883

这是我的首选解决方案。注册一个扩展上下文以自动包含您的位置属性的助手。然后只需使用新的块助手（例如#iter）而不是#each。

```
Handlebars.registerHelper('iter', function (context, options) {
    var ret = "";

    for (var i = 0, j = context.length; i < j; i++) {
        ret += options.fn($.extend(context[i], {position: i + 1}));
    }

    return ret;
}); 
```

用法：

```
{{#iter names}}
    {{position}}
    {{name}}
{{/iter}} 
```

改编自[http://rockycode.com/blog/handlebars-loop-index/](http://rockycode.com/blog/handlebars-loop-index/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-12T08:34:30.300

当前方法，

从 Handlebars API V2 开始，它们已经包含一个`@number` 它基本上是一个从 1 开始的迭代器的索引。

所以，这就是你可以做的。

```
{{#foreach names}}
{{@number}}
{{name}}
{{/foreach}} 
```

参考：[https ://ghost.org/docs/api/v3/handlebars-themes/helpers/foreach/](https://ghost.org/docs/api/v3/handlebars-themes/helpers/foreach/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-15T10:31:55.070

您可以仅从列表内的索引中获取价值。

```
{{#each list}}
    @index
{{/each}} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-19T05:44:57.133

这对我有用

```
{{#each posts}}
    <tr>               
       <td>{{@index}} </td>
       <td>{{name}}</td>
    </tr>    
{{/each}} 
```

# neo4j - Neo4j - 节点的急切负载关系

> ID：15148529
> 
> 赞同：0
> 
> 时间：2013-03-01T00:48:33.460
> 
> 标签：neo4j, spring-data-neo4j

我有一个这样的 NodeEntity：

```
@NodeEntity
public class User {

    @GraphId
    private Long id;

    private String name;

    @Fetch
    @RelatedToVia
    private Set<Rel> rels;

    public Rel connectTo(User u, String type) {
        if (this.rels == null) 
            this.rels = new HashSet<Rel>();
        Rel rel = new Rel(this, u, type);
        this.rels.add(rel);
        return rel;
    }
} 
```

和关系实体：

```
@RelationshipEntity(type="REL")
public class Rel {

    @GraphId
    private Long id;
    @Fetch
    @StartNode
    private User start;
    @Fetch
    @EndNode
    private User end;

    @RelationshipType
    private String type;

    public Rel(){}
    public Rel(User start, User end, String type) {
        this.start = start;
        this.end = end;
        this.type = type;
    }
} 
```

但是当我尝试加载用户时，关系是空的：

```
User neo = new User();
neo.setName("Neo");

User trinity = new User();
trinity.setName("Trinity");
this.userRepository.save(trinity);

neo.connectTo(trinity, "LOVES");

this.userRepository.save(neo);

User user = this.userRepository.findOne(neo.getId());
// expected:<1> but was:<0>
Assert.assertEquals(1, user.getRels().size()); 
```

我可以急切地加载与此节点相关的关系吗？我错过了什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T04:19:56.157

您可以尝试使用相同的关系类型吗？您的关系实体给出 type="REL"，但您将“LOVES”传递给 neo.connectTo() 方法。

# java - 根据闰年计算一个月的天数？

> ID：15148534
> 
> 赞同：-3
> 
> 时间：2013-03-01T00:48:59.523
> 
> 标签：java

我需要帮助制作一个程序，该程序需要用户输入年份和月份（例如 2012 3）并输出其中的天数，但是，它必须通过确定它是否是闰年来做到这一点，这样它可以告诉几个月有多少天，所以它不能预先编程，它必须自己计算。并且当输入无效月份（仅限 1-12）或输入负整数/小数时，必须提示重新输入。我不知道如何开始这个！

我确实开始了，否则我不会问，

System.out.println("请输入年月：");

```
 if (stdin.hasNextInt()) {
         yes = true;
    int year =  stdin.nextInt();
    int month = stdin.nextInt();
    }
        else {
            System.out.println("Invalid Input. ");}

    if (yes = true);

    }
} 
```

我不知道如何让它将这两个数字作为单独的 INT（2012 3）以及如何拒绝月份（如果无效）或年份（如果无效）....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:01:10.570

让我们编写一个函数，它接受年月 (1..12) 数字并返回给定月份的天数

public int numberOfDays (int year, int month) {

大多数月份每年都有固定的天数，所以：

```
if (month==1||month==3||month==5||month==7||
    month==8||month==10||month==12) return 31;
if (month==4||month==6||month==9||month==11) return 30; 
```

此时（如果函数没有返回），月份要么是二月，要么是无效月份。如果月份无效，让我们返回一个明显无效的值：

```
if (month!=2) return -1; 
```

现在变得有趣了，因为闰年​​二月有 29 天，否则有 28 天。自 1582 年引入公历以来，闰年被定义为是 4 的倍数的年份，但 100 的倍数不是闰年，除非它们也是 400 的倍数（即 1600、2000 和 2004 是闰年； 1900 年和 2003 年不是）。

```
if (year>1582) {
 if (month%4==0&&(month%100!=0||month%400==0)) return 29; else return 28;
} 
```

1582 年之前，儒略历有效。在儒略历下，每年能被 4 整除的都是闰年。

```
else {
 //julian calendar
 if (month%4==0) return 29; else return 28;
} 
```

现在代码调用`numberOfDays`：

```
int days;
do {
 System.out.println("blah blah blah");
 int year  =  stdin.nextInt();
 int month = stdin.nextInt();
 days  =  numberOfDays(year,month);
} while (days<0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T00:56:59.960

您必须检查两件事来判断一年是否是闰年：

1.  如果年份能被 4 整除，但不能被 100 整除，则为闰年。

2.  如果年份能被 100 整除，又能被 400 整除，那么它就是闰年。

- 编码 uppppp

（也只是谷歌下一次->“如何判断一年是否是闰年”）

# python - 更改字符和反转链表。（Python）

> ID：15148537
> 
> 赞同：0
> 
> 时间：2013-03-01T00:49:03.777
> 
> 标签：python, list, chained

好吧，我应该做以下事情：

使用类节点（经典构造）...

```
 class No: 
      def __init__(self, valor, prox): 
        self.valor = valor 
        self.prox = prox 
```

创建一个函数，在调用时将交换链表的第二个和第三个字符，并在原始链表的末尾添加一个反向链表。因此，如果我们执行 function(list)，则 lista = No(1, No(4, No(2, None))) (1>4>2) 它将返回 (1>2>4>4>2>1 ）。

问题在于我通过将术语添加到常规列表并在那里弄乱它们来解决问题。但是，后来我发现我应该只使用链表（我放在上面的那个节点类），现在我有点无能为力......

错误解决方案的代码：

```
class No: 
def __init__(self, valor, prox): 
    self.valor = valor 
    self.prox = prox  

def printLista(lista):
    global lista1
    lista1 = []
    while lista:
        lista1.append(lista.valor)
        lista = lista.prox
    return lista1

def printbackwards(lista):
    global lista2
    if lista == None: return
    printbackwards(lista.prox)
    lista2.append(lista.valor)

def swapprint(lista):
    global lista1, lista2
    i = 0
    lista2 = []
    printlist(lista)
    printbackwards(lista)
    for i in range(len(lista1)):
        print lista1[i], lista2[i],

lista = No(3, No(1, No(4, No(2, None))))
swapprint(lista) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:06:59.903

```
class No:
    def __init__(self,a,b):
       self.val = a
       self.next = b
    def __str__(self):
       return "%s->%s"%(self.val,self.next)

def swapandReverse(lista):
   n2 = lista.next #2nd element
   n2.val,n2.next.val = n2.next.val,n2.val #swap 2,3
   n = lista #root node
   v = [] #hold our values
   while n.next:
      v.append(n.val) #add our value to list
      n = n.next #move to next node
   v.append(n.val) #append value of last node in the list
   while len(v): #as long as we have values left in list
      n.next = No(v.pop(-1),None) #set next to new node with our val
      n = n.next

lista = No(3,No(1,No(4,No(2,None))))
print lista
swapandReverse(lista)
print lista 
```

至少是这样的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T01:30:00.920

链表操作不需要使用全局变量。相反，您只需要以正确的方式递归，并返回调用堆栈上的任何值。我不确定我是否理解你应该做什么，因为你的`print`函数实际上并没有打印任何东西，但是如果你应该从旧列表创建一个新列表，你可以这样做：

```
class Node(object):
    def __init__(self, value, next=None):
        self.value = value
        self.next = next

    def __str__(self): # borrowed from Joran Beasley's answer
        return "%s->%s" % (self.value, self.next)

def reverse_linked_list(lst, tail=None):
    if lst is None:
        return tail
    else:
        return reverse_linked_list(lst.next, Node(lst.value, tail))

def swap_23_linked_list(lst):
    try:
        second = lst.next
        third = second.next
    except AttributeError: # probably lst or lst.next is None!
        raise ValueError("list is too sort to swap second and third values")

    new_third = Node(second.value, third.next) # reuse all the nodes past third!
    new_second = Node(third.value, new_third)
    new_first = Node(lst.value, new_second)

    return new_first 
```

示例用法：

```
>>> list_1 = Node(3, Node(1, Node(4, Node(2))))
>>> print(list_1)
3->1->4->2->None
>>> list_2 = reverse_linked_list(list_1)
>>> print(list_2)
2->4->1->3->None
>>> list_3 = swap_23_linked_list(list_2)
>>> print(list_3)
2->1->4->3->None 
```

# database - mySQL DBI->connect() 数据源字符串中的“数据库”是什么意思？

> ID：15148538
> 
> 赞同：0
> 
> 时间：2013-03-01T00:49:08.897
> 
> 标签：database, perl, schema, dbi, mysql

下面是通过 DBI 连接数据库的模板：

```
 $dbh = DBI->connect($data_source, $username, $password)
        or die $DBI::errstr; 
```

以下是 $data_source 的描述方式：

```
dbi:DriverName:database=database_name;host=hostname;port=port 
```

我的理解是**host** + **port**标识一个包含多个*模式的 mysqld**进程*的实例，并且一个*模式*包含*表*。那么，在这个层次结构中，“数据库”在哪里呢？有时“数据库”一词似乎指的是 mysqld 实例，而其他时候似乎指的是模式。

 *****更新 1：**引用客户端在 TCP/IP 端口上连接并将 SQL 请求作为“数据库”发送的“服务器”（例如守护进程 - 不是硬件）是否正确？如果不是，它叫什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:59:45.497

Perl::DBI can connect to many different venders' databases. So the terms will vary, depending on which DB you are connecting to. Some call it a schema, others call them databases.

For UPDATE1: I'm assuming you mean the mysql.sock file? See the mysql_socket option, explained here: [How do I tell DBD::mysql where mysql.sock is?](https://stackoverflow.com/questions/1957916/how-do-i-tell-dbdmysql-where-mysql-sock-is)***

# android - 如何在 Android 4.2 模拟器中添加小部件？

> ID：15148539
> 
> 赞同：7
> 
> 时间：2013-03-01T00:49:10.233
> 
> 标签：android, android-emulator, android-widget

我最近下载了 Android SDK 并在模拟器上运行 Android 4.2。但是，我看不到在我的主屏幕上添加小部件的任何选项。（我什至不能添加默认小部件）。

我记得在 Android 2.2 上，长按屏幕会弹出一个上下文菜单，其中提供添加小部件的选项。我在新模拟器中找不到任何选项。

如何在 Android 4.2 模拟器中添加小部件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T00:52:07.013

您需要打开应用程序屏幕，在其中向右滚动，直到进入小部件部分。从那里拉出您想要的小部件并将其添加到所需的桌面。

# c - Visual Studio 2012：LNK2028 和 LNK2019 构建错误

> ID：15148544
> 
> 赞同：0
> 
> 时间：2013-03-01T00:49:46.883
> 
> 标签：c, visual-studio-2012, linker-errors, voxel

我遇到两个错误，无法弄清楚如何解决，它们是：

> 错误 LNK2028：在函数“void __cdecl vox_texture_cube(unsigned int,unsigned int)”中引用了未解析的令牌 (0A0003A0)“void __cdecl polygon(int,int,int,int,unsigned int)”(?polygon@@$$FYAXHHHHI@Z) " (?vox_texture_cube@@$$FYAXII@Z)
> 
> 错误 LNK2019：函数“void __cdecl vox_texture_cube(unsigned int,unsigned int)”中引用了无法解析的外部符号“void __cdecl polygon(int,int,int,int,unsigned int)”(?polygon@@$$FYAXHHHHI@Z) ?vox_texture_cube@@$$FYAXII@Z)

我唯一尝试过的是进入项目属性中的常规选项并将公共语言运行时支持更改为 /clr pure 根据此处的另一个问题，但是，这会导致更多问题。

这是我的代码：

```
//This Function creates a Polygon Face using Vertice Array
//It is the Method for creating each face of a cube
void **polgon**(int a, int b, int c, int d, GLuint texture)         
{
    glColorMaterial(GL_FRONT_AND_BACK, GL_AMBIENT_AND_DIFFUSE);
    glMaterialfv(GL_FRONT_AND_BACK, GL_SPECULAR, whiteSpecularMaterial);
    glMaterialfv(GL_FRONT_AND_BACK, GL_SHININESS, mShininess);

    glBindTexture(GL_TEXTURE_2D, texture);

    glBegin(GL_QUADS);
            glTexCoord2f(0.0, 0.0);
        glVertex3fv(vertices[a]);
            glTexCoord2f(1.0, 0.0);
        glVertex3fv(vertices[b]);
            glTexCoord2f(1.0, 1.0);
        glVertex3fv(vertices[c]);
            glTexCoord2f(0.0, 1.0);
        glVertex3fv(vertices[d]);
    glEnd();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:56:12.153

好吧，你声明了一个名为

`void polygon(int a, int b, int c, int d, GLuint texture);`

然后你实现了一个名为

```
void polgon(int a, int b, int c, int d, GLuint texture)
{
    ...
} 
```

所以问题是链接器试图找到`polygon`你承诺你会实现但没有实现的功能。

解决方案：重命名`polgon`为`polygon`，您应该一切顺利。

# c - C 初学者：不能在简单的 C 程序中使用 delay()

> ID：15148545
> 
> 赞同：0
> 
> 时间：2013-03-01T00:49:49.583
> 
> 标签：c, macos, compilation, delay

# 测试1.c

```
#include <stdio.h>

int main(void) {
  printf("test\n");
  delay(1000);
  printf("test2\n");
} 
```

当我尝试编译...

```
gcc test1.c -o test1
Undefined symbols for architecture x86_64:
  "_delay", referenced from:
      _main in ccUnw3tY.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

当然，了解您的图书馆以及链接是什么等方面有一个教训......我错过了什么？我正在尝试在 OSX 上执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T00:52:32.883

C中没有延迟功能，您必须使用`sleep`或`usleep`取决于您使用的操作系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T00:53:23.093

是什么让您认为有延迟功能。我在 osx 文档中没有看到。有睡眠功能

[https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/sleep.3.html](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/sleep.3.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T00:54:48.010

用于 unix os 的 C 延迟的替代方法是睡眠功能： [https](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man3/sleep.3.html) ://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man3/sleep.3.html 执行以下操作：

```
#include <stdio.h>
#include <unistd.h>

int main(void) {
  printf("test\n");
  usleep(1000);
  printf("test2\n");
} 
```

如果您的值是 1000 微秒。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-18T16:28:58.023

延迟函数在 Borland C 编译器中工作。您必须使用`dos.h`头文件才能使用延迟。其他一些编译器`MinGW`可能不支持这一点。

# java - SQLite 使用泛型创建插入语句 (Java + SQLite4Java)

> ID：15148547
> 
> 赞同：0
> 
> 时间：2013-03-01T00:50:11.747
> 
> 标签：java, sqlite, list, generics

我正在尝试使用 java 泛型创建一个插入命令。基本上，我想让我的 addrow() 函数类型安全且可用于不同的表。可能吗？

这是我当前的java代码：

```
public <T extends List<D>, D extends Number> boolean addRow(T rowData) throws SQLiteException {
    int index = 0;
    for (D element : rowData) {
        addRowStatement.bind(index++, element); // element must have a type part and value part
    }
    return addRowStatement.step();
} 
```

其中 addRowStatement 是 SQLiteStatement 类型，据我了解，可以将项目绑定到它。

ArrayList T 中的数据可以是字节、整数或类似这样的原语。我的代码处理这个。我只想优雅地绑定所有数据（无论要绑定多少东西）并执行语句。

具体来说，错误是 bind() 方法不知道如何处理“D”泛型——即使 D 泛型将变成一个 int 或 byte 或其他东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:58:22.807

埃里克，

首先，*D*不能是*int*，只能是*java.lang.Integer*。

其次，编译器在编译时不知道类型，因此它不知道与调用匹配的*绑定。*不幸的是，sqlite4java 中没有通用*绑定*。

第三，由于擦除，运行时不知道*D*的类型，需要检查。

所以解决方案是：

```
if (element == null) addRowStatement.bindNull(index++);
else if (element instanceof Integer) addRowStatement.bind(index++, (Integer)element);
else if (element instanceof Long) addRowStatement.bind(index++, (Long)element);
...
else throw new AssertionError("unsupported type " + element.getClass()); 
```

或者更简单，如果您可以将每个*Number*转换为 long：

```
if (element == null) addRowStatement.bindNull(index++);
else addRowStatement.bind(index++, element.longValue()); 
```

# objective-c - 消除 ' ' 来自 Rss 解析器文本

> ID：15148548
> 
> 赞同：0
> 
> 时间：2013-03-01T00:50:14.500
> 
> 标签：objective-c, xml-parsing, rss

我创建了一个 RSS 解析器，它工作得很好，但是，我的“p”元素有问题。我的 RSS 编码提要带有“p”，当我获取该文本时，它会附带它。我怎样才能删除它？

我想删除这个：

```
<p> 
```

这是我的解析器：

```
 - (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
    if ([current isEqualToString:@"item"]) [outstring appendFormat:@"%@", @"\n"];
    current = nil;
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
    if (!current) return;
    if ([current isEqualToString:@"content:encoded"]) [outstring appendFormat:@"%@", string];
} 
```

这是我的底线：

```
_kocTextView.text = @"";

        NSURL *url4 = [NSURL URLWithString:@"http://www.iburc.com/?feed=rss2&cat=7"];

        top10Parser = [[Top10Parser alloc] initWithDelegate: self url: url4]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:59:12.853

你有没有尝试过

```
[stringWhereYouWantToRemoveP stringByReplacingOccurrencesOfString:@"<p>" withString:@""]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T01:55:26.167

改变这个：

```
if ([current isEqualToString:@"item"]) [outstring appendFormat:@"%@", @"\n"]; 
```

至：

```
if ([current isEqualToString:@"item"]) {
    [outstring replaceOccurrencesOfString:@"<p>" withString:@"" options:0 range:NSMakeRange(0, outstring.length)];
    [outstring replaceOccurrencesOfString:@"</p>" withString:@"" options:0 range:NSMakeRange(0, outstring.length)];

    [outstring appendString:@"\n"];
} 
```

根据您的需要，您可能希望替换为`<p>`而`\n\n`不是空字符串。

# php - 使用 PHP com 对象在 IIS 服务器上读取注册表不起作用

> ID：15148553
> 
> 赞同：0
> 
> 时间：2013-03-01T00:50:37.577
> 
> 标签：php, iis, com-object

我正在尝试使用以下脚本读取 iis 上的注册表值。

```
$shell = new COM("WScript.Shell") or die("Requires Windows Scripting Host");
$devenvpath=$shell->RegRead("HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\App\\Pathsfirefox.exe"); 
```

它不起作用。它一直告诉我“无法打开注册表项”。我假设这是一个权限问题，但不确定。我怎样才能让它工作。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:37:44.163

也许它只是您原始帖子上的一个错字，但在我看来，该注册表行中的“Paths”和“Firefox.exe”之间应该有一个“\”。

```
$devenvpath=$shell->RegRead("HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\App\\Paths\\firefox.exe"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T00:57:06.503

终于得到了这个工作。我必须为 php_com_dotnet.dll 添加 php 扩展。我在 IIS 管理器的 php 管理器中做了这个。希望它可以帮助别人。

# jquery - 将鼠标悬停在同一元素上时重复更改图像

> ID：15148555
> 
> 赞同：1
> 
> 时间：2013-03-01T00:50:41.033
> 
> 标签：jquery, switch-statement

我有一个带有图像的 div，下面是菜单。我需要的是，每当我将鼠标悬停在其中一个菜单项上时，图像就会发生变化。现在总共有 5 张图片，每次我将鼠标悬停在徽标上时，我都希望该图片更改为下一张，直到它到达末尾，然后以图片编号重新开始循环。1.

我第一次使用 switch 语句，我可能做错了，因为我无法让它工作。现在我可以从图像 1 更改为 2，但它会停止。

我的代码如下：

HTML

```
<div>
    <img id="img" src="http://placekitten.com/200/300" />
</div>
<nav>
    <ul>
        <li id="logo"><a href="">logo</a></li>
        <li><a href="">menu item</a></li>
        <li><a href="">menu item</a></li>
    </ul>
</nav> 
```

jQuery

```
$('#logo').bind("mouseover", function(){
    var currentimage  = $('#img').attr('src',"http://placekitten.com/202/302");

    switch (currentimage) {
        case 0:
            $('#img').attr('src',"http://placekitten.com/205/300");
            break;
        case 1:
            $('#img').attr('src',"http://placekitten.com/200/305");
            break;
        case 2:
            $('#img').attr('src',"http://placekitten.com/200/300");
            break;
    }
}) 
```

[这是小提琴](http://jsfiddle.net/xwwzW/8/)，如果有人可以看看并指出我错在哪里，我将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:57:54.010

这不是`switch`工作方式。`switch`就像一个 if-else 链：

```
if ( currentimage == 0 )
    $('#img').attr('src',"http://placekitten.com/205/300");
else if ( currentimage == 1 )
    $('#img').attr('src',"http://placekitten.com/200/305");
else if ( currentimage == 2 )
    $('#img').attr('src',"http://placekitten.com/200/300"); 
```

但是，`currentimage`不是`0`，`1`或者`2`，它是一个 jQuery 对象。你打电话时：

```
var currentimage  = $('#img').attr('src',"http://placekitten.com/202/302"); 
```

您将图像的`src`属性设置为`"http://placekitten.com/202/302"`然后返回图像对象本身。因此，该`switch`语句不会输入任何`case`.

因此，您需要找到替代解决方案。一种方法是创建一个`count`变量并在 each 上递增它`mouseover`，然后使用`swtich`on 代替：

```
var count = 0;
...
count = (count+1)%3;
switch (count) { 
```

[在 jsFiddle演示](http://jsfiddle.net/mgibsonbr/xwwzW/13/)。不是最好的解决方案，但可能会帮助您入门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T00:58:06.987

尝试这种方法，而不是构建最终可能会产生大量开关案例
演示[http://jsfiddle.net/xwwzW/9/](http://jsfiddle.net/xwwzW/9/)

```
var images=['http://placekitten.com/202/302',
            'http://placekitten.com/205/300',
            'http://placekitten.com/200/305',
            'http://placekitten.com/200/300'];
var currentimage=0;

$('#logo').on("mouseover", function(){
    //console.log(currentimage);
    $('#img').attr('src', images[currentimage]);
    currentimage++;
    if (currentimage>images.length-1) currentimage=0;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T00:58:39.530

尝试这样的事情：

```
var imgs = [
  'http://placekitten.com/205/300',
  'http://placekitten.com/200/305',
  'http://placekitten.com/200/300'
];

var $img = $('#img');
$('#logo').on('mouseover', function() {
  var current = imgs.indexOf($img.attr('src'));
  $img.attr('src', imgs[++current] || imgs[0]);
}); 
```

**演示：http:** [//jsfiddle.net/xwwzW/14/](http://jsfiddle.net/xwwzW/14/)

# android - 如何使用 eclipse 配置新的 adt 包

> ID：15148556
> 
> 赞同：0
> 
> 时间：2013-03-01T00:50:47.790
> 
> 标签：android, eclipse, bundle, adt, configure

我刚刚用 eclipse 下载了新的 adb 包，所有东西都是预先配置好的。它说您只需解压缩 zip，运行 eclipse 即可。但是后来我尝试运行eclipse，我得到了错误：

![在此处输入图像描述](../Images/1f6811bfbbdcb17c0da7bac14e1fe7b7.png)

所以。我下载了所有 sdk 工具的 Eclipse Juno。但我想换成新的，因为通常我会读到一个错误，该错误在新的 Eclipse 版本中已修复。

如何使用新的 adb 捆绑包？它没有告诉我有关配置环境变量的任何信息。旧的已经配置好了。请帮忙。！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:09:53.967

从页面[http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/)下载新的eclipse 根据你的windows 或者linux 选择eclipse classic 4.2.1。之后，您必须从[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)下载 ADT单击现有 IDE 并在那里下载，然后阅读此[http://developer.android.com/sdk/installing/ index.html](http://developer.android.com/sdk/installing/index.html) 我希望它有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:30:22.773

如果您已经下载了 Android SDK，那么您只需要下载新的 Eclipse。运行那个 Eclipse 并设置 SDK 的路径，如

Window --> Prefrences --> Android 然后浏览你的 SDK 位置

# .net - SSL 和 ASP .NET MVC

> ID：15148558
> 
> 赞同：1
> 
> 时间：2013-03-01T00:50:53.957
> 
> 标签：.net, asp.net-mvc, ssl, https, controller

我不需要将整个网站置于**SSL(https://)**之下， 而只需将其置于*支付控制器*之下。

可以`[RequireHttps]`仅用于该控制器还是应该应用于每个控制器？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T01:04:24.643

这取决于您所说的“确定”是什么意思。如果您有一些敏感的东西，那么您真的应该将 SSL 应用于整个站点，否则其中一个关键因素，即身份验证 cookie，可能会被劫持并使您的 SSL 毫无意义。

我的一般经验法则是，如果网站的一部分需要 SSL，那么整个网站都应该是 SSL。我什至不确定你为什么认为这是一个问题。SSL 确实需要稍微多一点的资源，但这只是您第一次连接，之后，SSL 就没有明显的开销了。

请参阅[http://blogs.msdn.com/b/rickandy/archive/2011/05/02/securing-your-asp-net-mvc-3-application.aspx](http://blogs.msdn.com/b/rickandy/archive/2011/05/02/securing-your-asp-net-mvc-3-application.aspx)

> 许多网站通过 SSL 登录并在您登录后重定向回 HTTP，这绝对是错误的做法。您的登录 cookie 与您的用户名 + 密码一样保密，现在您通过网络以明文形式发送它。此外，在 MVC 管道运行之前，您已经花时间执行握手并保护通道（这是使 HTTPS 比 HTTP 慢的主要原因），因此在您登录后重定向回 HTTP 不会' t 使当前请求或未来请求更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-27T16:01:57.080

最好为整个站点使用 SSL-only。您赢了： - 更好的 Google 信任，因为 Google 更喜欢仅使用 SSL - 更好地信任您的用户

这些天 CPU 功率很便宜，除非您处理数百万用户，否则 SSL-only-extracost 是微不足道的。

# recursion - 似乎无法让此功能在方案中工作

> ID：15148563
> 
> 赞同：-1
> 
> 时间：2013-03-01T00:51:21.323
> 
> 标签：recursion, scheme

这是我到目前为止所做的：

```
(define sumOdd
    (lambda(n)
        (cond((> n 0)1)
             ((odd? n) (* (sumOdd n (-(* 2 n) 1) 
```

输出看起来像这样：

```
 (sumOdd 1)  ==> 1
 (sumOdd 4)  ==> 1 + 3 + 5 + 7 ==> 16
 (sumOdd 5)  ==> 1 + 3 + 5 + 7 + 9 ==> 25 
```

这就是我想要做的：找到前 N 个奇数正整数的总和

我想不出只添加奇数的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:58:42.207

让我们考虑几个案例：

1) (sumOdd 5) 应该返回什么？嗯，它应该返回 5 + 3 + 1 = 9。 2) (sumOdd 6) 应该返回什么？好吧，这也返回 5 + 3 + 1 = 9。

现在，我们可以通过多种方式编写此算法，但这是我决定考虑的一种方式：

我们将编写一个递归函数，从 n 开始，倒计时。如果 n 是奇数，我们想将 n 添加到我们的运行总数中，然后倒数**2**。为什么我要倒数2？因为如果 n 是奇数，则 n - 2 也是奇数。否则，如果 n 是偶数，我不想添加任何内容。但是，我想确保我**继续递归**，以便得到一个奇数。如何从偶数倒数到下一个奇数？我减去 1。我这样做，倒计时直到 n <= 0。我**不想**在我的运行总数中添加任何东西，所以我返回 0。这是该算法的样子：

```
(define sumOdd
  (lambda (n)
    (cond ((<= n 0) 0)
          ((odd? n) (+ n (sumOdd (- n 2))))
          (else (sumOdd (- n 1)))))) 
```

如果它对您有帮助，这里有一个稍微不同的算法的更明确的例子：

```
(define sumOdd
  (lambda (n)
    (cond ((<= n 0) 0)
          ((odd? n) (+ n (sumOdd (- n 1))))
          ((even? n) (+ 0 (sumOdd (- n 1))))))) ; note that (even? n) can be replaced by `else' (if its not odd, it is even), and that (+ 0 ..) can also be left out 
```

编辑：

我看到问题已经改变了一点。要将前 N 个正奇数相加，有几个选项。

第一个选项：数学！

```
(define sumOdd (lambda (n) (* n n))) 
```

第二种选择：递归。有很多方法可以做到这一点。例如，您可以生成 2*n 的列表并使用上述过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T02:47:24.773

为了进一步阐述这个`sum-odds`问题，你可以用更抽象的过程来解决它，这些过程结合起来会积累所需的答案。这不一定是*最简单*的解决方案，但它很*有趣*，并且捕获了处理列表结构时常见的一些更通用的模式：

```
; the list of integers from n to m
(define (make-numbers n m)
  (if (= n m) (list n)                             ; the sequence m..m is (m)
      (cons n                                      ; accumulate n to 
            (make-numbers (+ n 1) m))))            ; the sequence n+1..m

; the list of items satisfying predicate
(define (filter pred lst)
  (if (null? lst) '()                              ; nothing filtered is nothing
      (if (pred (car lst))                         ; (car lst) is satisfactory
          (cons (car lst)                          ; accumulate item (car lst)
                (filter pred (cdr lst)))           ; to the filtering of rest
          (filter pred (cdr lst)))))               ; skip item (car lst)

; the result of combining list items with procedure
(define (build-value proc base lst)
  (if (null? lst) base                             ; building nothing is the base
      (proc (car lst)                              ; apply procedure to (car lst)
            (build-value proc base (cdr lst)))))   ; and to the building of rest

; the sum of n first odds
(define (sum-odds n)
  (if (negative? n) #f                             ; negatives aren't defined
      (build-value +                               ; build values with +
                   0                               ; build with 0 in base case
                   (filter odd?                    ; filter out even numbers
                           (make-numbers 1 n)))))  ; make numbers 1..n 
```

希望这个答案很有趣，而且不会太混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T18:09:52.303

这是一个很好的尾递归实现：

```
 (define (sumOdd n)
  (let summing ((total 0) (count 0) (next 1))
    (cond ((= count n) total)
          ((odd? next) (summing (+ total next)
                                (+ count 1)
                                (+ next  1)))
          (else (summing total count (+ next 1)))))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T19:17:28.637

更短的尾递归版本：

```
(define (sumOdd n)
  (let loop ((sum 0) (n n) (val 1))
    (if (= n 0)
        sum
        (loop (+ sum val) (- n 1) (+ val 2))))) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T15:55:58.013

您需要有 2 个变量，一个用于记录仍要添加多少奇数的计数器，另一个用于保存当前奇数，该奇数在使用后增加 2：

```
(define (sum-odd n)
  (define (proc current start)
    (if (= current 0) 
        0
        (+ start (proc (- current 1) (+ start 2)) )))
    (proc n 1)) 
```

# javascript - 使用ajax将代码加载到网站

> ID：15148568
> 
> 赞同：-2
> 
> 时间：2013-03-01T00:51:59.917
> 
> 标签：javascript, jquery, ajax

我想用 ajax 将此代码加载到我的网站中吗？我该怎么办？

```
 <ul class="rounded">
                        <li><div id="card" class="quickflip-wrapper"><p id="cardText"></p></div>
                        </li></ul>            
                    <ul class="rounded">
                        <li><div class="right">Nästa</div>
                        </li></ul>

                       <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
             <script type="application/javascript" src="http://www.enormous.se/dev/mobile2/main/assets/js/jquery.js"></script>
               <script type="application/javascript" src="http://m.drickspel.com/assets/js/olspelet.js"></script> 
```

我以前使用过这段代码，但它不起作用。上面的代码在 content.php 中。当我在浏览器中加载 content.php 时，它运行良好，但在网站上却不行。

```
 $(document).ready(function() {
   $("#content").load("content.php");
}) 
```

这是网站：[http ://www.enormous.se/dev/mobile2/main/#vem](http://www.enormous.se/dev/mobile2/main/#vem)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:02:57.707

我查看了您的页面源代码，其中一个问题是您没有加载 jQuery。您正在加载一个名为 jquery.js 的文件，该文件实际上包含一个 jQuery 插件。

# css - 绝对元素不会显示

> ID：15148570
> 
> 赞同：0
> 
> 时间：2013-03-01T00:52:00.800
> 
> 标签：css

我在主 div 中有一个 div 元素，我想将图像标签放入其中。问题是，当我将图像定位到绝对位置时，图像没有显示并且容器 div 没有在主 div 上占用任何空间。但是当我删除位置时：绝对图像显示得很好。任何帮助如何在不删除位置的情况下显示它：绝对？

代码是这样的：

```
<div id="main">
  <div id="image_wrapper">
    <img style="width:100%; position:absolute; top:0px; left:0px;" src="image.png" />
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T06:24:14.333

html

```
<div id="main">
  <div id="image_wrapper">
    <img src="image.png" />
  </div>
</div> 
```

css

```
#image_wrapper {
position:relative;
}

#image_wrapper img {
  width:100%; 
  position:absolute; 
  top:0px; left:0px;
} 
```

试试这个也许有帮助....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:57:55.760

当您将元素设置为`absolute`- 定位时，它将从文档流中删除。在这种情况下，这意味着容器`<div>`现在里面没有“任何东西”，因此折叠到零高度。

另请注意，您几乎应该始终为包含元素`position:relative`提供绝对元素的来源。

但是，主要问题是容器高度不足。解决这个问题，您的图像应该会显示出来。

如果没有，请尝试同时指定图像的高度。

# html - 缓存清单“prefer-online”设置问题

> ID：15148572
> 
> 赞同：4
> 
> 时间：2013-03-01T00:52:18.107
> 
> 标签：html, http

在设置**prefer-online**设置时，我希望浏览器在每次刷新浏览器时都请求页面，但事实并非如此。

这是我的清单：

```
CACHE MANIFEST

SETTINGS:
prefer-online

NETWORK:
* 
```

然而，当我刷新浏览器时，它只向服务器请求清单。它只在我更新清单时请求页面......

并且页面上没有设置标题（过期或最大年龄）。

（在 chrome 和 firefox 上测试）

注意：更新清单时，浏览器会重新下载资产，但仍会显示旧版本……只有在下次加载时，浏览器才会使用新资产。为什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T13:40:59.383

我看不到 AppCache 清单的用途，因为您想绕过缓存并只使用网络。请记住，无论 AppCache 清单如何，常规缓存可能仍然适用，因此请检查`Expires`,`Last-Modified`和类似的标头。

至于你的问题：

> 注意：更新清单时，浏览器会重新下载资产，但仍会显示旧版本……只有在下次加载时，浏览器才会使用新资产。为什么 ？

这是因为用户代理将立即使用您的资产的最新缓存版本，然后开始检查清单中列出的链接资源是否有更新。当用户代理检测到清单已更改，因此它必须检查更新时，它将触发一个`checking`事件。

When the update checking process has finished (and it might take a long time, if you have lots of resources) it will fire an `updateready` event. Only the resources fetched *after* this event will be the fresh new ones (that's why it's usually adviceable to use `window.applicationCache.swapCache()` to tell the browser to swap the old cache for the new for the next page load, or simply reload the page and be done with it).

You will find more detailed explanations about these topics here: [http://www.html5rocks.com/en/tutorials/appcache/beginner/](http://www.html5rocks.com/en/tutorials/appcache/beginner/)

# php - PHP CodeIgniter 返回控制器名称而不是 Doctrine 关联实体

> ID：15148575
> 
> 赞同：0
> 
> 时间：2013-03-01T00:52:30.353
> 
> 标签：php, orm, controller, doctrine, entity

我有一个`Unidirectional OneToOne`与另一个实体有关系的基本实体。我有一个通过变量方法创建的拥有实体的实例，如下所示：

```
$entity = new $entity; 
```

其中`$entity`右侧只是一个描述类的字符串。当我从拥有实体中获取逆实体 (an `Address`) 时，它返回一个与我正在使用的控制器类型相同的类。

```
$object = $entity->getAddress(); 
```

这行代码返回一个类型的对象`Ajax`（代码在 CodeIgniter 中的控制器）。getter 的代码很简单，没什么花哨的：

```
public function getAddress() {
    return $this->address;
} 
```

这里可能发生了什么？为什么我要取回我的控制器实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:02:49.663

$this->address 设置为什么？

可能是你设置的`$this->address = $this`吗？

因为如果`$this->address = $this`那时

```
$object = $entity->getAddress(); 
```

是真的

```
$object = $entity; 
```

这当然是 $entity 类型的对象；

# python - Python CGI 问题

> ID：15148580
> 
> 赞同：0
> 
> 时间：2013-03-01T00:53:19.090
> 
> 标签：python, cgi

我正在构建一个简单的网络应用程序（昨天发布了一部分），但我正在努力解决一部分问题：

1) 请求一个文本文件上传 2) 将上传的文件保存到一个目录

我为此使用python和cgi。通过一个简单的 test.cgi 文件确认 cgi 正在工作。

这是我当前的 request_input.cgi 代码：

```
 #!/usr/bin/python
    import cgi
    print "Content-type: text/html\r\n\r\n"
    print '<html>'
    print '<body>'
    print '<form enctype="multipart/form-data" action="save_input.cgi" method="post">'
    print '<p>File: <input type="file" name="filename" /></p>'
    print '<p>input type="submit" value="Upload" /></p>'
    print '</form>'
    print '</body>'
    print '</html>' 
```

现在，当我跟踪 apache 错误日志时，我收到以下错误：“（2）没有这样的文件或目录：'/var/www/ipcheck/request_input.cgi'的执行失败，引用者：[http://192.168.3.77 /ipcheck/?C=M;O=A]" "脚本头过早结束：request_input.cgi，referer [http://192.168.3.77/ipcheck/?C=M;O=A]"

任何帮助都是极好的！非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:38:45.693

dos2unix 解决了问题。内置windows，迁移到linux。谢谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-01T13:51:38.187

我只是复制了文件中的所有代码，打开了一个新的 python 窗口，将代码粘贴到其中并以相同的名称保存（以覆盖旧文件）。希望这可以帮助！

# ruby-on-rails - 在 Rails 中使用 RSpec 和 Capybara 时未定义的方法“访问”

> ID：15148585
> 
> 赞同：93
> 
> 时间：2013-03-01T00:53:53.390
> 
> 标签：ruby-on-rails, ruby, rspec, capybara

我无法让水豚与 rspec 一起工作。它给了我这个错误：

```
undefined method `visit' for #<RSpec::Core::ExampleGroup::Nested_1:0x16529f8 @example=nil> 
```

我知道有很多关于此的帖子，但没有一个解决方案对我有用。它们中的大多数都涉及不在 /spec/features 中的规范 - 我的所在。

首先是错误：

```
$bundle exec rspec spec
F

Failures:

  1) security signs users in
     Failure/Error: visit "/sessions/new"
     NoMethodError:
       undefined method `visit' for #<RSpec::Core::ExampleGroup::Nested_1:0x16529f8 @example=nil>
     # ./spec/features/security_spec.rb:4:in `(root)'

 Finished in 0.006 seconds
 1 example, 1 failure

Failed examples:

rspec ./spec/features/security_spec.rb:3 # security signs users in 
```

我认为重要的是要注意，起初我使用的是 URL Helper 'new_sessions_path' 并且它一直给我一个错误`undefined local variable or method 'new_sessions_path'`。我知道它是有效的，因为：

```
$ rake routes
logout_sessions GET    /sessions/logout(.:format) sessions#logout
       sessions POST   /sessions(.:format)        sessions#create
   new_sessions GET    /sessions/new(.:format)    sessions#new
      contracts POST   /contracts(.:format)       contracts#create
  new_contracts GET    /contracts/new(.:format)   contracts#new
 edit_contracts GET    /contracts/edit(.:format)  contracts#edit
                GET    /contracts(.:format)       contracts#show
                PUT    /contracts(.:format)       contracts#update
                DELETE /contracts(.:format)       contracts#destroy
           root        /                          contracts#index 
```

我的宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.11'
gem 'execjs'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'
gem 'activerecord-oracle_enhanced-adapter', '~> 1.4.1'
gem 'jruby-openssl'
gem 'therubyrhino'
gem 'kaminari'
gem 'nokogiri'

group :development do
  gem 'warbler'
end

group :test do
  gem 'rspec-rails'
  gem 'capybara'
  gem 'activerecord-jdbcsqlite3-adapter'
end 
```

my_app/spec 中的 spec_helper.rb：

```
# This file is copied to spec/ when you run 'rails generate rspec:install'
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'rspec/autorun'

# Capybara integration
require 'capybara/rspec'
require 'capybara/rails'

# Requires supporting ruby files with custom matchers and macros, etc,
# in spec/support/ and its subdirectories.
Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

RSpec.configure do |config|
  # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
  # config.fixture_path = "#{::Rails.root}/spec/fixtures"
  config.use_transactional_fixtures = true
  config.infer_base_class_for_anonymous_controllers = false
  config.order = "random"
  # Include path helpers
  config.include Rails.application.routes.url_helpers
end 
```

my_app/spec/features/security_spec.rb：

```
describe "security", :type => :feature do
  it "signs users in" do
    visit "/sessions/new"
    fill_in "username", :with => "user"
    fill_in "password", :with => "pass"
    click_button "Sign In"

    page.should have_content('Login Successful')
  end
end 
```

我已经尝试定义上面有和没有的测试`:type => :feature`。两种方式都没有区别。有什么想法我接下来应该尝试什么？

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2013-03-01T00:58:12.230

尝试添加：

```
 config.include Capybara::DSL 
```

到您的配置块。

```
# This file is copied to spec/ when you run 'rails generate rspec:install'
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'rspec/autorun'

# Requires supporting ruby files with custom matchers and macros, etc,
# in spec/support/ and its subdirectories.
Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

RSpec.configure do |config|
  # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
  # config.fixture_path = "#{::Rails.root}/spec/fixtures"
  config.use_transactional_fixtures = true
  config.infer_base_class_for_anonymous_controllers = false
  config.order = "random"
  # Include path helpers
  config.include Rails.application.routes.url_helpers

  config.include Capybara::DSL

end 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-03-01T02:05:33.380

在我的功能顶部添加`require 'rails_helper'`最终解决了我的问题：

```
require 'rails_helper'

describe "security", :type => :feature do

  it "signs users in" do
    visit new_sessions_path
    fill_in "username", :with => "user"
    fill_in "password", :with => "pass"
    click_button "Sign In"

    page.should have_content('Login Successful')
  end
end 
```

这对我来说似乎很奇怪，因为我为 rspec 和 capybara 看到的每个示例都没有这个要求，但是哦，好吧。问题解决了。

# 原始答案（旧版本的 rspec）

`require 'spec_helper'`由旧版本的 RSpec 使用。更好的答案是`require 'rails_helper'`。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2013-05-19T08:58:09.827

由于 Capybara 2.0 必须使用文件夹规范/功能 Capybara 命令不再在文件夹规范/请求中工作。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-01T02:06:28.640

尝试在一个`before`块中执行所有设置：

**规范/功能/security_spec.rb**

```
describe "security" do
  before do
    visit "/sessions/new"
    fill_in "username", :with => "user"
    fill_in "password", :with => "pass"
    click_button "Sign In"
  end

  it "signs users in" do
    page.should have_content('Login Successful')
  end
end 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-06-26T06:27:30.323

我也有这个问题

在我的功能顶部添加 require 'rails_helper' 最终解决了我的问题：

```
require 'rails_helper'

RSpec.describe "Products", type: :request do
 describe "GET /products" do
 it "display tasks" do
  Product.create!(:name => "samsung")
  visit products_path
  page.should have_content("samsung")
  #expect(response).to have_http_status(200)
  end
 end
end 
```

并在 rails_helper.rb 添加 'config.include Capybara::DSL'

```
RSpec.configure do |config|

 config.fixture_path = "#{::Rails.root}/spec/fixtures"

 config.use_transactional_fixtures = true

 config.infer_spec_type_from_file_location!

 config.include Capybara::DSL

end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-14T11:59:54.633

`require 'spec_helper.rb'`除了从旧的 Rails 应用程序使用而不是ugprading 时会遇到的升级问题之外`require 'rails_helper.rb'`，发生这种情况的原因有 3 个：

**1\. 您的规范不是“功能”类型** ，这意味着 Capybara 不知道如何使用 Javascript 或浏览器运行它。您想做以下两件事之一：1）通常，您希望`config.infer_spec_type_from_file_location!`在 RSpec.configure 中进行设置，这意味着 features 文件夹中的内容将成为一项功能。

如果您有一些非标准的东西，您可以添加`type: :feature`到规范描述块以将该规范转换为功能，但通常将它们放入 /features 文件夹并让推断设置完成它的工作会更容易。

**2.你不小心把`visit`it块的外面放了**

访问必须在 it 之内，也就是在 describe 之内。确保不要将访问直接放在描述中。

**3\. 其他一些你看不到的内核恐慌导致 Capy 关闭了规范。**

这是一个令人讨厌的诊断，但我已经看到了。这意味着 Capy 实际上并没有正确解析这个文件，因此当它到达访问块时，不知何故不在正确的范围内。仔细挑选您的 Capy 规格以找出您在哪里引入它。

我今天引起了内核恐慌，但有一个`let`块被称为`page`（哎呀）。`page`这里似乎是 Rspec 或 Capy 的保留字，它会导致内核恐慌，从而导致规范无法解析，从而导致`visit`找不到方法。

就我而言，它只是改变了这一点：

```
let(:page) {Page.new()} 
```

到

```
let(:content_page) {Page.new()} 
```

请注意，`page`Rails 并没有保留这个词，它可以作为数据库名称和模型名称正常工作，但是使用`page`这里作为 let 变量名称的具体结构似乎导致 Capy 变得有点蹩脚。

# c# - 从 Access 数据库中获取数据的正确方法

> ID：15148588
> 
> 赞同：11
> 
> 时间：2013-03-01T00:54:27.230
> 
> 标签：c#, winforms

我对如何从访问数据库中获取数据有点困惑。首先在列表中收集它然后从您的列表中获取这些数据是否合适，或者直接在您的数据库中获取它是可以的？

我的代码工作得很好，但我想知道是否有更好的方法来做到这一点？：

```
 private void button3_Click(object sender, EventArgs e)
    {
        OleDbConnection connection = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\redgabanan\Desktop\Gabanan_Red_dbaseCon\Red_Database.accdb");
        connection.Open();
        OleDbDataReader reader = null;
        OleDbCommand command = new OleDbCommand("SELECT * from  Users WHERE LastName='"+textBox8.Text+"'", connection);
        reader = command.ExecuteReader();
        listBox1.Items.Clear();

        while (reader.Read())
        {

            listBox1.Items.Add(reader[1].ToString()+","+reader[2].ToString());
        }

        connection.Close(); 
```

*我直接从数据库中获取我的记录，然后将其显示在列表框中。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-01T01:02:43.277

像拇指痛一样突出的一件事是 SQLInjection 并使用参数化查询，例如：

```
OleDbCommand command = new OleDbCommand("SELECT * from  Users WHERE LastName='@1'", connection);

command.Parameters.AddWithValue("@1", textBox8.Text) 
```

您的所作所为是完全可以接受的，尽管您通常最好使用 SQL 数据库。

编辑：这是您将业务逻辑与 GUI 分离的方式：

```
Class BusLogic
{
 public List<string> ListboxItems = new List<string>();
 public void PopulateListBoxItems(string userName)
 {
  string connString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\redgabanan\Desktop\Gabanan_Red_dbaseCon\Red_Database.accdb";
  using (OleDbConnection connection = new OleDbConnection(connString))
  {
        connection.Open();
        OleDbDataReader reader = null;
        OleDbCommand command = new OleDbCommand("SELECT * from  Users WHERE LastName='@1'", connection);            
        command.Parameters.AddWithValue("@1", userName)
        reader = command.ExecuteReader();    
        while (reader.Read())
        {
            ListboxItems.Add(reader[1].ToString()+","+reader[2].ToString());
        }    
   }
 }    
} 
```

图形用户界面

```
private void button3_Click(object sender, EventArgs e)
{        
      var busLogic = new BusLogic();
      busLogic.PopulateListBoxItems(textBox8.Text);          
      \\listBox1.Items.Clear();
      ListboxItems.DataSource = busLogic.ListboxItems;
} 
```

这种“MVC”方法的美妙之处在于，如果我们依赖于使用 Binding 绑定的控件，我们只需要测试 BusLogic。

ps 理想情况下`ListboxItems`，应该是一个 IEnumerable 而不是 List，这样我们就不会从调用者那里向 Add/Remove 等公开任何功能。这是很好的 API 设计。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T01:05:49.903

我会说两个人的答案都是“是”。

您现在所做的对于简单的情况是完全可以接受的。请注意，它不能很好地“扩展”。也就是说，加载 10 或 20 个项目就可以了。但是，如果它变成一万或一百万会怎样？

在这种情况下，您需要考虑使用模型-视图-控制器 (MVC) 架构。这本身就是一个主题，但基本上你将列表框（“视图”）与数据（“模型”）分离。

[有关以 C# 为中心的 MVC 讨论，](http://www.c-sharpcorner.com/UploadFile/rmcochran/MVC_intro12122005162329PM/MVC_intro.aspx)请参阅此站点

在你现在正在做的事情和成熟的 MVC 架构之间，你可能只想按照你的建议去做——首先加载列表，然后将它们添加到列表框中。如果您只加载一次，这不会给您带来任何好处，但是如果列表“到处”加载，您每次只需访问一次就可以节省数据库 IO 开销。

你想问这个问题的事实表明你走在正确的轨道上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T01:10:04.560

[尽管您的代码可以正常运行，但我建议您像本示例](http://msdn.microsoft.com/en/library/system.data.oledb.oledbconnection%28v=vs.80%29.aspx)中那样执行一些异常处理，因为两者都`OleDbConnection.Open()`可能`OleDbCommand.ExecuteReader()`会抛出`InvalidOperationException`.

用语句包装连接也很常见[`using`](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)，所以最后`connection.close()`会自动调用，但这只是个人喜好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T00:59:58.963

您可以将数据访问函数分离到不同的类中，或者创建通用函数来检索记录。

# security - 安全认证协议

> ID：15148589
> 
> 赞同：0
> 
> 时间：2013-03-01T00:54:35.187
> 
> 标签：security, authentication, azure, web, cloud-hosting

我正在寻找一种简单的身份验证协议（OpenID、Active Directory、??）供用户登录我的网站。它托管在 Windows Azure 上。需要高级别的安全性。您可以推荐什么以及为什么要选择这个特定的选择？

注意：此时我不会使用 SSL，因此无法传输纯文本密码。但是，我将来会过渡到 SSL 环境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:11:44.003

您的站点/服务将通过网络传输的数据是私有的、敏感的、专有的等吗？如果是这样，那么您必须实施 SSL 以防止任何使用数据包嗅探器的人能够直接从网络中窃取数据。

为了执行安全身份验证，您需要使用 SSL 之类的东西来建立安全通信传输，您可以通过该传输从身份提供者请求和接收 SAML（或类似）身份令牌。

如果您不使用 SSL 来保护您的通信，那么恶意的第 3 方窃取身份令牌并伪装成经过身份验证的用户和/或记录/监视/修改系统中任何用户的每个请求都是微不足道的！

您不使用 SSL 的原因是什么？

# svn - Jenkins-列出 SVN 文件夹

> ID：15148597
> 
> 赞同：4
> 
> 时间：2013-03-01T00:55:53.897
> 
> 标签：svn, recursion, jenkins, directory

因此，目前正在设置 Jenkins 以自动化我们的部署过程，我几乎完成了，我的老板告诉我要添加另一个功能。

特点是开发人员可以选择要部署的分支。我们目前（下一个项目是改变这一点）使用 SVN 作为我们的 VCS。

我们的SVN结构是这样的

项目1

*   项目1/分支机构
*   项目1/分支/功能
*   项目1/分支/功能/功能A
*   项目1/分支机构/功能/功能B
*   项目1/分支/测试
*   项目1/分支/测试/测试1
*   项目1/分支/测试/测试1
*   项目1/tags/1.0
*   项目1/tags/2.0
*   项目1/主干

开发人员需要能够从该列表中进行选择。

因此，当我使用 List SVN 标签（以及更多）时，我将其指向[https://svn.mycompany.com/project1](https://svn.mycompany.com/project1)，它运行良好。

它只列出

*   分支/测试
*   分支/功能
*   标签/1.0
*   标签/2.0
*   树干

我如何递归地通过测试和功能列出所有这些特定文件夹...我不能使用动态选择参数

# c - 使用 gdb 进入 GNU 函数

> ID：15148603
> 
> 赞同：3
> 
> 时间：2013-03-01T00:56:31.767
> 
> 标签：c, gdb

我想了解 C 的 memcpy 函数的内部工作原理。有没有办法让我使用 gdb 进入函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T00:58:09.310

当然。当您接到`memcpy`电话时，使用`si`（步骤指令）进入程序集。

不过，只有当您有 libc 的调试版本和方便的 glibc 源代码时，您才能获得源代码。

如果您只想查看实现，请查看例如[memcpy-ssse3.S](http://sourceware.org/git/?p=glibc.git;a=blob;f=sysdeps/x86_64/multiarch/memcpy-ssse3.S;h=9642ceecd90f35a918ed96981836c5a8cdf8f0fa;hb=HEAD)或[memcpy.S](http://sourceware.org/git/?p=glibc.git;a=blob;f=sysdeps/x86_64/memcpy.S;h=d6cd553a266c56c0dca3f00bf5e1dcf071b57b9f;hb=HEAD)。

# f# - 如何在 F# 中显示当月的日历？

> ID：15148606
> 
> 赞同：0
> 
> 时间：2013-03-01T00:56:48.020
> 
> 标签：f#

我想使用 F# 显示当月的日历（类似于 Linux 命令 'cal' ）。在 F# 中是否有本地方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T01:04:20.620

我认为没有任何标准功能可以将当前日历打印到控制台。但是，您可以轻松获得自行打印所需的信息：

```
open System
open System.Globalization

// Get information about calendar for the current cultural settings
let cal = CultureInfo.CurrentCulture.Calendar
let now = DateTime.Now

// Get days in month from the curretn calendar
for d in 1 .. cal.GetDaysInMonth(now.Year, now.Month) do
  // Create date time and print the date together with a day of week
  let dt = DateTime(now.Year, now.Month, d)
  printfn "%s %A" (dt.ToShortDateString()) dt.DayOfWeek 
```

您可以使用它`dt.DayOfWeek`来很好地对齐输出，就像`cal`在 Linux 上所做的那样。

或者，如果您有一些 UI，您可以使用`DateTimePicker`Windows 窗体中的类型（请参阅[MSDN](http://msdn.microsoft.com/en-gb/library/system.windows.forms.datetimepicker.aspx)）或 WPF 更好的`Calendar`控件（请参阅[MSDN](http://msdn.microsoft.com/en-us/magazine/dd882520.aspx)）。WinForms 控件也可以在 F# 交互中工作：

```
open System.Windows.Forms

let frm = new Form(Visible=true)
frm.Controls.Add(new DateTimePicker()) 
```

# c++ - 导致内存泄漏的 C++ 后置运算符

> ID：15148607
> 
> 赞同：3
> 
> 时间：2013-03-01T00:56:58.663
> 
> 标签：c++, operator-overloading, iteration

我正在为一个库实现一个自定义迭代器，并且正在重载运算符 ++ 和 --。我的前缀运算符可以完美地工作，但我的后运算符会导致内存泄漏。

```
avl_iterator& operator++()
    {
        _node = utilities::next_node( _node );
        return (*this);
    }
avl_iterator& operator ++( int ) {
        avl_iterator temp(*this);
        ++(*this);
        return(temp);
    }

avl_iterator& operator -- () {
        _node = utilities::prev_node( _node );
        return (*this);
    }

avl_iterator& operator -- ( int ) {
        avl_iterator temp(*this);
        --(*this);
        return(temp);
    } 
```

我意识到这是因为我正在返回一个临时变量，但我似乎无法思考（或找到）更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T01:00:36.410

返回一个临时变量是非常好的：它将被复制回调用者，而原来的变量将被释放。只有当类没有正确管理其资源时，它才会成为一个问题。

您的解决方案有问题的原因是它不*返回*副本，而是返回对局部变量的引用`temp`，这是未定义的行为。

要解决此问题，您应该将后增量/减量运算符更改为

```
avl_iterator operator -- ( int ) {
    avl_iterator temp(*this);
    --(*this);
    return(temp);
} 
```

和

```
avl_iterator operator ++( int ) {
    avl_iterator temp(*this);
    ++(*this);
    return(temp);
} 
```

请注意，必须复制是广泛传播的建议背后的主要原因，即在迭代器上更喜欢前增量/减量运算符而不是后增量/减量对应物。

# ios - 为自定义移动应用程序增加传入和传出邮件的方法

> ID：15148631
> 
> 赞同：1
> 
> 时间：2013-03-01T00:58:48.407
> 
> 标签：ios, cordova

我习惯于在大型基础设施中构建应用程序。在启动时，如何为移动应用程序设置 SMTP？有什么地方可以用来托管这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:42:21.000

有几种可能的方法：

1.  一种选择是不要尝试直接在您的应用程序中与 SMTP/IMAP/POP 服务器交互。或者，您可以从您的应用程序通过 发送电子邮件[`MFMessageComposeViewController`](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html)，它为您提供标准的撰写电子邮件用户界面。这很容易做到。

    要处理入站电子邮件，您可以让用户通过标准邮件应用程序接收他们的电子邮件（这样用户就不必去不同的地方接收他们的电子邮件）。[您使用自定义 URL 方案](http://developer.apple.com/library/ios/documentation/iphone/conceptual/iphoneosprogrammingguide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW50)将入站电子邮件与您的应用程序集成。然后，您可以使用此自定义 URL 方案向用户发送电子邮件，如果他们在 iOS 设备上收到邮件并安装了该应用程序，当他们单击链接时，他们将被带到您的应用程序，并从 URL 传递信息在电子邮件中。

    例如，如果您定义了一个自定义 URL 方案`yourapp://`，您可以在您的电子邮件（或短信或您的网站）中包含指向该 URL 的超链接，如果用户在他们的 iOS 设备上，当他们单击该链接时，它们将被带到您的应用程序中。如果您在 Google 上搜索“iOS 自定义 URL 方案教程”，您会看到您需要在应用中创建的 plist 条目示例，以使其响应自定义 URL 方案。[实施自定义 URL 方案](http://developer.apple.com/library/ios/documentation/iphone/conceptual/iphoneosprogrammingguide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW50)参考向您展示了需要对应用委托进行哪些更改才能将自定义 URL 中的数据实际传递给应用。

2.  或者，您可以 (a) 向任何提供邮件托管的 Internet 服务提供商 (ISP) 注册；(b) 编写一个通过连接到该 ISP 的 SMTP 服务器来发送电子邮件的应用程序；(c) 通过连接到该 ISP 的 IMAP 或 POP 服务器来检索电子邮件。显然你必须向 ISP 支付费用，你的应用程序的质量与你合作的 ISP 的质量有关（所以选择一个好的），你必须自己做 SMTP/IMAP/POP在您的应用程序中集成（您必须编写自己的代码来执行此操作或为此使用第三方库，因为这不是标准的 Cocoa Touch 功能）。在我看来，你需要一个非常有说服力的商业案例才能走这条路，尽管它可以做到。

3.  您可以完全避免使用电子邮件，并开发一个让用户发送和接收消息的 Web 服务。（例如，如果应用程序只是在您的应用程序的用户之间发送消息，这可能是有意义的。）同样，您必须与 ISP 签订合同以进行网络托管，而且您当然必须承担不平凡的工作编写 Web 服务代码的练习。但是，如果您的应用程序的目的是促进应用程序用户之间的通信，那么这在架构上比与 SMTP/IMAP/POP 服务器集成更简洁。

您没有提供足够的信息让我们评估哪种方法最适合您的情况。

# android - 尝试使用扫描仪读取 res/raw 中的文本文件

> ID：15148640
> 
> 赞同：0
> 
> 时间：2013-03-01T00:59:59.260
> 
> 标签：android, nullpointerexception, java.util.scanner, android-resources

你好，

我正在尝试使用 a 读取文件，[`Scanner`](http://developer.android.com/reference/java/util/Scanner.html)以便可以使用字符串的输入来构造其他对象。`NullPointerException`但是，我的扫描仪在尝试创建它时总是抛出一个。我`pig.txt`在文件夹中有一个文本文件，`res/raw`但我的扫描仪似乎无法访问它。我不知道我做错了什么。我已经注释掉了该方法的其他代码，但仍然出现异常。

```
public void loadAchievements() {
    try {
        Scanner s = new Scanner(getResources().openRawResource(R.raw.pig));

        /**
         * s = s.useDelimiter("."); Scanner StringScanner; StringScanner =
         * new Scanner(s.next()); StringScanner =
         * StringScanner.useDelimiter(":"); String keep =
         * StringScanner.next(); String StringKeeper = StringScanner.next();
         * this.achievementBoard.add(new Achievement_Item(keep,
         * StringKeeper)); StringScanner.close(); s.close();
         **/
    } catch (NullPointerException e) {
        e.printStackTrace();
        System.out.println("NULLPOINTER");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-16T19:22:50.553

```
I had this problem today, and I resolved somehow.
I know that old question, but I would share it if others have stuck.

 public class Question {

        private int numberOfQuestion;
        private String[] myquestion;

        public Question(InputStream file_name) {
            Scanner scanner = null;

            try {
                scanner = new Scanner(file_name);

            } catch (Exception e) {
                Log.d("Question", "Scanner :" + e);
                System.exit(1);
            }

            this.numberOfQuestion = scanner.nextInt();
            scanner.nextLine();
            myquestion = new String[numberOfQuestion];

            for (int i = 0; i < numberOfQuestion; ++i) {
                myquestion[i] = scanner.nextLine();

            }

            scanner.close();

        }
    ---------------------------------------------------------
call:

try { 
  MyScanner myScanner = new MyScanner(getResources().openRawResource( R.raw.input_question)); 
   } catch (Exception e) { 
        Log.d("Error", "input_question.txt"); 
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T01:30:47.473

openRawResource() 方法**只能**用于打开**可绘制资源、声音资源和原始资源**；它会在字符串和颜色资源上失败。由于您的 pig.txt 是一个包含字符串的文本文件，因此 openRawResource() 将无法打开新流，因此您的流为空。

# twitter-bootstrap - HTML::FormHandler 动态表单与 HTML::FormHandler::Widget::Theme::Bootstrap

> ID：15148642
> 
> 赞同：0
> 
> 时间：2013-03-01T01:00:15.100
> 
> 标签：twitter-bootstrap, forms, catalyst

我正在使用[`HTML::FormHandler`](https://metacpan.org/module/HTML::FormHandler)和创建一个动态表单，我希望能够使用[`HTML::FormHandler::Widget::Theme::Bootstrap`](https://metacpan.org/module/HTML::FormHandler::Widget::Theme::Bootstrap)它。

但是，我不知道如何让动态表单包含“withs”。文档显示您创建了一个动态表单，如下所示：

```
my $form = HTML::FormHandler->new(
name => 'user_form',
item => $user,
field_list => [
    'username' => {
        type  => 'Text',
        apply => [ { check => qr/^[0-9a-z]*\z/,
           message => 'Contains invalid characters' } ],
    },
    'select_bar' => {
        type     => 'Select',
        options  => \@select_options,
        multiple => 1,
        size     => 4,
    },
],
); 
```

有谁知道我怎样才能使用这个表格`HTML::FormHandler::Widget::Theme::Bootstrap`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:44:00.107

由于[HTML::FormHandler::Widget::Theme::Bootstrap](https://metacpan.org/module/HTML%3a%3aFormHandler%3a%3aWidget%3a%3aTheme%3a%3aBootstrap)实际上只是一个[Moose::Role](https://metacpan.org/module/Moose%3a%3aRole)，您应该能够将它应用到您的表单实例，如下所示：

```
use HTML::FormHandler::Widget::Theme::Bootstrap;
HTML::FormHandler::Widget::Theme::Bootstrap->meta->apply($form); 
```

归根结底是驼鹿。

# ios - 苹果应用内购买和苹果“商店信用”

> ID：15148648
> 
> 赞同：0
> 
> 时间：2013-03-01T01:01:14.963
> 
> 标签：ios, in-app-purchase, in-app-billing

我们最近购买了我们的一个应用程序。然而，据我们所知或应用程序知识，购买从未成功。

只有当我们的用户提醒我们他们从未收到他们的虚拟商品时，我们才注意到这一点。经过调查，我们看到该应用程序将呼叫发送到 iTunes 以处理付款，但从未收到回电。

我们要求用户在收据上转发以确认付款。iTunes 收据上写着：

> 应用内购买 $15.99
> 
> 商店信用总额：0.13 美元
> 
> 支付卡总计：15.86 美元
> 
> 订单总额：15.99 美元

“商场信用积分”？！这会对我们的应用程序的回调过程产生一些影响吗？意思是我们完全错过了这次促销活动？有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-11-07T23:41:33.860

我不知道“商店信用”是否有任何影响，但我们遇到了类似的情况：

有时我们的客户抱怨他们购买了 IAP 商品，但从未在应用程序中收到积分。

当我们检查他们的日志时（我们为此保留了一个特殊的日志），我们看到我们收到了 SKPaymentTransactionStateFailed 响应“无法连接到 iTunes 商店”，然后在 1-3 分钟后我们收到了 SKPaymentTransactionStatePurchased。

我们试图向苹果询问此事，但没有得到任何解释。我希望更多的人有同样的问题，可以帮助我们了解情况。

# java - 对象未正确添加

> ID：15148650
> 
> 赞同：0
> 
> 时间：2013-03-01T01:01:35.020
> 
> 标签：java, priority-queue

我正在尝试创建优先级队列并使用比较器，但是当我添加对象时，添加了最后一个对象，而较早的对象不会出现在队列中。

下面是代码：

```
public class CustomerCompare implements Comparator<Customer>{
    @Override
    public int compare(Customer c1, Customer c2) {
        if(c1.priority>c2.priority)
            return 1;
        if(c1.priority>c2.priority)
            return -1;
        return 0;

    }
}      

public class PQueue {
    public static void main(String[] args) {
        Comparator<Customer> comparator = new CustomerCompare();
        PriorityQueue<Customer> queue = new PriorityQueue<Customer>(5, comparator);
        queue.add(new Customer("c1", 1));
        System.out.println("Queue is now :" + queue);
        queue.add(new Customer("c2", 7));
        System.out.println("Queue is now :" + queue);
        queue.add(new Customer("c3", 3));
        System.out.println("Queue is now :" + queue);
        queue.add(new Customer("c4", 6));
        System.out.println("Queue is now :" + queue);
        queue.add(new Customer("c5", 5));

        System.out.println("Elements in queue");
        while (true) {
            Customer currentCust = queue.poll();
            if (currentCust == null) {
                break;
            }
            System.out.print(currentCust.getCustomerNum() + " <-- ");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:34:05.390

看起来您使用`>`而不是`<`in your `compare`，将其更改为：

```
if (c1.priority > c2.priority)
    return 1;
if (c1.priority **<** c2.priority)
    return -1;
return 0; 
```

**编辑：或者更简单一点：**

`return Integer.valueOf(c1.priority).compareTo(c2.priority);`

**编辑 2：或使用 Java 7：**

`return Integer.compare(c1.priority, c2.priority);`

# java - JTable刷新数据不显示

> ID：15148654
> 
> 赞同：0
> 
> 时间：2013-03-01T01:02:02.680
> 
> 标签：java, mysql, swing, jdbc, jtable

这是一个 JDBC 项目。来自 WAMP 服务器上的 mySql 数据库的数据显示在 jtable 中。现在我想要在我的 Spinnerbutton 上用户输入的 ID 并删除具有该 ID 的行。我做了一个 SQL 查询，一切正常，但是执行查询时 myjtable 上的数据不会刷新。我单击我的 JNazad 按钮（我的后退按钮），然后重新进入该窗口，以便我的 Jtable 显示刷新的数据。我想我没有在 NapraviTablicu 方法中正确实现 FireTableModel，但不知道我做错了什么：

```
public class GUIBDelete extends JFrame{

    private SpinnerModel SM;
    private JSpinner Spinner;
    private JLabel LUnos;
    private JButton BNazad, BIzvrsi;
    private String ID, SqlQuery;
    private Vector NaziviKolona = new Vector();
    private Vector Podaci = new Vector();
    private JTable Tablica=new JTable();
    private JScrollPane ScrollPane;
    private DefaultTableModel model;

    private JTable NapraviTablicu(){
        try {
            String SqlQuery = "SELECT * FROM `nfc_baza`";
            Podaci.clear();
            NaziviKolona.clear();
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            Connection con = DriverManager.getConnection("jdbc:mysql://"
                    + "localhost:3306/nfc", "root", "");

            Statement Stat = con.createStatement();
            ResultSet Rez = Stat.executeQuery(SqlQuery);
            ResultSetMetaData md = Rez.getMetaData();
            int columns = md.getColumnCount();
            for (int i = 1; i <= columns; i++) {
                NaziviKolona.addElement(md.getColumnName(i));
            }
            while (Rez.next()) {
                Vector red = new Vector(columns);
                for (int i = 1; i <= columns; i++) {
                    red.addElement(Rez.getObject(i));
                }
                Podaci.addElement(red);
            }
            Rez.close();
            Stat.close();
            con.close();
        } catch (Exception e) {
            System.out.println(e);
        }
        model = new DefaultTableModel(Podaci, NaziviKolona);
        model.fireTableDataChanged();
        JTable table = new JTable(model);

        return table;

    }

    ActionListener a1 = new ActionListener() {
        public void actionPerformed(ActionEvent a) {
            dispose();
            new GUIIzbornik();
        }
    };

    ActionListener a2 = new ActionListener() {
        public void actionPerformed(ActionEvent a) {
            ID=null;
            SqlQuery = "DELETE FROM `nfc`.`nfc_baza` WHERE `nfc_baza`.`ID` = ";
            IzvrsiQuery();
            model.fireTableDataChanged();
        }

        private void IzvrsiQuery() {
            Object sp = Spinner.getValue();
            ID = sp.toString();
            SqlQuery=SqlQuery+ID;
            try {
                Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
                Connection con2 = DriverManager.getConnection(
                        "jdbc:mysql://" + "localhost:3306/nfc", "root", "");
                Statement Stat = con2.createStatement();
                int Rez = Stat.executeUpdate(SqlQuery);
                Stat.close();
                con2.close();
                JOptionPane.showMessageDialog(null, "Uspješno izvrseno!",
                        "Poruka!", JOptionPane.INFORMATION_MESSAGE);

            } catch (Exception e) {
                System.out.println(e);
            }

        }

    };

    GUIBDelete(){
        setLayout(new GridBagLayout());
        GridBagConstraints c = new GridBagConstraints();

        Tablica=NapraviTablicu();
        ScrollPane = new JScrollPane(Tablica);
        c.fill = GridBagConstraints.BOTH;
        c.insets = new Insets(2, 2, 2, 2);
        c.weightx = 0.1;
        c.weighty = 0.1;
        c.gridwidth = 4;
        c.gridheight = 2;
        c.gridx = 0;
        c.gridy = 0;
        add(ScrollPane, c);

        LUnos= new JLabel("<html><br>Unesite ID elementa</br> kojeg želite obrisati:<html>");
        c.gridx = 0;
        c.gridy = 2;
        c.gridwidth = 1;
        c.gridheight = 1;
        add(LUnos, c);

        SM = new SpinnerNumberModel(1, 1, 1000, 1);
        Spinner = new JSpinner(SM);
        c.gridx = 2;
        c.gridy = 2;
        c.gridwidth = 1;
        add(Spinner, c);

        BNazad = new JButton("Nazad");
        c.gridx = 0;
        c.gridy = 3;
        c.gridwidth = 1;
        BNazad.addActionListener(a1);
        add(BNazad, c);

        BIzvrsi = new JButton("Izvrši");
        c.gridx = 3;
        c.gridy = 3;
        BIzvrsi.addActionListener(a2);
        add(BIzvrsi, c);

        setSize(400, 500);
        setTitle("Brisanje podataka");
        setVisible(true);
        setLocationRelativeTo(null);

    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                GUIBDelete i = new GUIBDelete();
            }
        });
    }
} 
```

* * *

首先，非常感谢您的回答！

当我使用`PreparedStatement`我得到这个异常：

```
java.lang.ClassCastException: com.mysql.jdbc.StatementImpl cannot be 
  cast to java.sql.PreparedStatement 
```

..所以我必须使用经典`Statement`

我也尝试不`JTable`每次都创建，我只是在我的`NapraviTablicu`方法中创建模型，然后通过简单地将它添加到 table 来在我的构造函数中使用该模型`Tablica`，但现在表**没有显示任何数据。**我不知道我是否在我的代码中以正确的方式实现了你的提示......

```
public class GUIBDelete extends JFrame{

    private SpinnerModel SM;
    private JSpinner Spinner;
    private JLabel LUnos;
    private JButton BNazad, BIzvrsi;
    private String ID, SqlQuery;
    private Vector NaziviKolona = new Vector();
    private Vector Podaci = new Vector();
    private JTable Tablica=new JTable();
    private JScrollPane ScrollPane;
    private DefaultTableModel model;

    private void NapraviTablicu(){
        try {
            String SqlQuery = "SELECT * FROM `nfc_baza`";
            Podaci.clear();
            NaziviKolona.clear();
            Class.forName("com.mysql.jdbc.Driver");
            Connection con = DriverManager.getConnection("jdbc:mysql://"
                    + "localhost:3306/nfc", "root", "");

            Statement Stat = con.createStatement();
            ResultSet Rez = Stat.executeQuery(SqlQuery);
            ResultSetMetaData md = Rez.getMetaData();
            int columns = md.getColumnCount();
            for (int i = 1; i <= columns; i++) {
                NaziviKolona.addElement(md.getColumnName(i));
            }
            while (Rez.next()) {
                Vector red = new Vector(columns);
                for (int i = 1; i <= columns; i++) {
                    red.addElement(Rez.getObject(i));
                }
                Podaci.addElement(red);
            }
            Rez.close();
            Stat.close();
            con.close();

        } catch (Exception e) {
            System.out.println(e);
        }
        model = new DefaultTableModel(Podaci, NaziviKolona);
        //model.fireTableDataChanged();

    }

    ActionListener a1 = new ActionListener() {
        public void actionPerformed(ActionEvent a) {
            dispose();
            new GUIIzbornik();
        }
    };

    ActionListener a2 = new ActionListener() {
        public void actionPerformed(ActionEvent a) {
            ID=null;
            SqlQuery = "DELETE FROM `nfc`.`nfc_baza` WHERE `nfc_baza`.`ID` = ";
            IzvrsiQuery();
            //model.fireTableDataChanged();
        }

        private void IzvrsiQuery() {
            Object sp = Spinner.getValue();
            ID = sp.toString();
            SqlQuery=SqlQuery+ID;
            try {
                Class.forName("com.mysql.jdbc.Driver");
                Connection con2 = DriverManager.getConnection(
                        "jdbc:mysql://" + "localhost:3306/nfc", "root", "");
                PreparedStatement Stat = (PreparedStatement) con2.createStatement();
                int Rez = Stat.executeUpdate(SqlQuery);
                Stat.close();
                con2.close();
                JOptionPane.showMessageDialog(null, "Uspješno izvrseno!",
                        "Poruka!", JOptionPane.INFORMATION_MESSAGE);

            } catch (Exception e) {
                System.out.println(e);
            }

        }

    };

    GUIBDelete(){
        setLayout(new GridBagLayout());
        GridBagConstraints c = new GridBagConstraints();

        Tablica=new JTable(model);
        ScrollPane = new JScrollPane(Tablica);
        c.fill = GridBagConstraints.BOTH;
        c.insets = new Insets(2, 2, 2, 2);
        c.weightx = 0.1;
        c.weighty = 0.1;
        c.gridwidth = 4;
        c.gridheight = 2;
        c.gridx = 0;
        c.gridy = 0;
        add(ScrollPane, c);

        LUnos= new JLabel("<html><br>Unesite ID elementa</br> kojeg želite obrisati:<html>");
        c.gridx = 0;
        c.gridy = 2;
        c.gridwidth = 1;
        c.gridheight = 1;
        add(LUnos, c);

        SM = new SpinnerNumberModel(1, 1, 1000, 1);
        Spinner = new JSpinner(SM);
        c.gridx = 2;
        c.gridy = 2;
        c.gridwidth = 1;
        add(Spinner, c);

        BNazad = new JButton("Nazad");
        c.gridx = 0;
        c.gridy = 3;
        c.gridwidth = 1;
        BNazad.addActionListener(a1);
        add(BNazad, c);

        BIzvrsi = new JButton("Izvrši");
        c.gridx = 3;
        c.gridy = 3;
        BIzvrsi.addActionListener(a2);
        add(BIzvrsi, c);

        setSize(400, 500);
        setTitle("Brisanje podataka");
        setVisible(true);
        setLocationRelativeTo(null);

    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                GUIBDelete i = new GUIBDelete();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T01:49:11.177

您需要`com.mysql.jdbc.Driver`用作`JDBC`驱动程序而不是通用驱动程序`JDBC/ODBC`。也没有必要打电话`fireTableDataChanged`，你`TableModel`会在后台调用它。

* * *

旁注：

*   无需`JTable`每次都创建。是一个可以更新`DefaultTableModel`的可变的。`TableModel`
*   `PreparedStatement`被认为比安全`Statement`
*   `JFrame`如果您不添加新功能，则无需扩展。直接实例是首选。
*   为了可维护性，请考虑将您的数据库/非 UI 代码与您的 UI 代码分开。

**更新：**

要创建一个`PreparedStatement`，使用`Connection#prepareStatement`而不是`Connection#createStatement`。

```
PreparedStatement Stat = con2.prepareStatement(SqlQuery); 
```

然后在执行查询时，需要使用带有***空*** 参数列表的`execute`语句 ：

 **```
int rez = stat.executeUpdate(); 
```

最好将`Statement`& `Connection`& `close`语句放在一个`finally`块中。Java 使用初始*小写*字母作为变量名，这将使`SqlQuery` `sqlQuery`.**

# functional-programming - 有人使用 SML 或 OCaml 来构建真实世界的 GUI 吗？

> ID：15148657
> 
> 赞同：4
> 
> 时间：2013-03-01T01:02:44.383
> 
> 标签：functional-programming, ocaml, sml, ml

在查看了一些与 OCaml 图形相关的[项目](http://caml.inria.fr/pub/old_caml_site/humps/caml_Graphics_and_GUI_tool_kits.html)之后，似乎没有人使用它来构建 GUI。

*   为什么 ？
*   那些过时的图书馆有什么现代替代品吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T01:21:48.407

我和我的同事使用 OCaml 构建我们销售的 iOS 应用程序。一切都用 OCaml 编码，包括 GUI。但是，将完整的 OCaml 绑定到 Cocoa Touch 将是一项艰巨的任务，因此我们专注于构建我们需要的部分。使用 OCaml 构建真实世界的 GUI 绝对是可能的（事实上也是令人愉快的），但是要获得一个真正方便的环境需要一些认真的支持或相当大的社区努力。（如果您对我们的工作感兴趣，请点击我个人资料中的链接。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:04:13.113

我认为您不会在旧的 OCaml 网站上找到最近的 GUI 绑定。根据经验，您应该认为任何无法通过 OPAM 获得的东西都已过时。OCaml 最“成熟”和“支持墙”的绑定似乎是在这里找到的 LablGtk：http: [//lablgtk.forge.ocamlcore.org/](http://lablgtk.forge.ocamlcore.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T21:02:10.777

如今，许多人认为唯一没有过时的 GUI“库”是 Web。无论您在这件事上的立场如何，很高兴知道 Web 是传统 GUI 的可移植替代品，并且有非常重要的库和工具可用于使用 OCaml（从 Ocsigen 到 Ocamlnet）为 Web 编程。

# javascript - 如何使用 querySelector 按名称选择输入元素？

> ID：15148659
> 
> 赞同：107
> 
> 时间：2013-03-01T01:02:50.017
> 
> 标签：javascript

我最近在这个网站上收到了关于使用`querySelector`表单输入的帮助，`select`但是一旦我拿出`<select>`它就完全改变了函数中必须做的事情。

HTML：

```
<form onsubmit="return checkForm()">
    Password: <input type="text" name="pwd">
    <input type="submit" value="Submit">
</form> 
```

Javascript：

```
<script language="Javascript" type="text/javascript">
    debugger;
    function checkForm() {
        var form = document.forms[0];
        var selectElement = form.querySelector('');
        var selectedValue = selectElement.value;

        alert(selectedValue);
</script> 
```

以前，我有`('select')`，`querySelector`但现在我不确定该放什么。
我也尝试了多种方法，`querySelectorAll`但我似乎无法弄清楚。

需要明确的是，我正在尝试拉动`name="pwd"`.

我怎么能这样做？

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2013-03-01T01:07:21.873

你可以试试'input[name="pwd"]'：

```
function checkForm(){
     var form = document.forms[0];
     var selectElement = form.querySelector('input[name="pwd"]');
     var selectedValue = selectElement.value;
} 
```

看看这个[http://jsfiddle.net/2ZL4G/1/](http://jsfiddle.net/2ZL4G/1/)

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2019-06-11T20:20:08.350

我知道这是旧的，但我最近遇到了同样的问题，我设法通过只访问这样的属性来选择元素：`document.querySelector('[name="your-selector-name-here"]');`

以防万一有人需要这个:)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2018-10-30T13:32:41.387

1-您需要使用缺少的'}'关闭函数块。

2- querySelector 的参数不能是空字符串 '' 或 ' '... 全部使用 '*'。

3-这些参数将返回所需的值：

```
querySelector('*')

querySelector('input')

querySelector('input[name="pwd"]')

querySelector('[name="pwd"]') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-01-22T18:26:41.283

注意：如果名称包含`[`or`]`本身，则在其前面添加两个反斜杠，例如：

```
<input name="array[child]" ...

document.querySelector("[name=array\\[child\\]]"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-05-07T06:41:22.993

所以...您需要更改代码中的一些内容

```
<form method="POST" id="form-pass">
Password: <input type="text" name="pwd" id="input-pwd">
<input type="submit" value="Submit">
</form>

<script>
var form = document.querySelector('#form-pass');
var pwd = document.querySelector('#input-pwd');
pwd.focus();
form.onsubmit = checkForm;

function checkForm() {
  alert(pwd.value);
}
</script> 
```

试试这个方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-04-17T09:38:47.110

`form.elements.name`提供比每次都在整个文档中查找更好的性能`querySelector`。`querySelector`如果`form.elements.name`计算机直接从表单获取输入。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-09-07T06:22:38.303

这些例子似乎有点低效。如果你想对这个值采取行动，试试这个：

```
<input id="cta" type="email" placeholder="Enter Email...">
<button onclick="return joinMailingList()">Join</button>

<script>
    const joinMailingList = () => {
        const email = document.querySelector('#cta').value
        console.log(email)
    }
</script> 
```

如果您使用`this`带有粗箭头 ( `=>`) 的关键字，您会遇到问题。如果你需要这样做，去老学校：

```
<script>
    function joinMailingList() {
        const email = document.querySelector('#cta').value
        console.log(email)
    }
</script> 
```

如果您正在使用密码输入，您应该使用`type="password"`它，以便在用户键入时显示 ******，并且它也更具语义。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-03-14T08:14:37.960

`querySelector()`匹配文档中的 id。您必须在`.html`

然后将其传递给`querySelector()`with `#symbol & .value property`。

例子：

`let myVal = document.querySelector('#pwd').value`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-15T21:45:18.063

我知道这是一个旧线程。但是，对于像我这样踩过它的人，您可以使用以下代码。

使用元素集合选择输入

```
form.elements['pwd'] 
```

或在元素集合下使用 namedItem 方法

```
form.elements.namedItem('pwd') 
```

# html - 将变量从 HTML 表单传递到 Perl 脚本

> ID：15148661
> 
> 赞同：0
> 
> 时间：2013-03-01T01:02:55.047
> 
> 标签：html, forms, perl, cgi

我在为我们内部用于配置生成的 Perl 脚本创建 HTML 前端时遇到了一些困难。我们已经从 Linux 系统迁移到 Windows 服务器实例，并且我测试了 CGI/Perl 是否按预期工作。脚本本身使用以下格式：

```
my $unitname; #name of device
my $clientid; #name of client
my $version;  #version of device firmware 
```

这些变量通过命令行调用，将配置打印到 cli：

```
./confgen.pl -u "unitname" -c "clientid" -v "version" 
```

我想要实现的是在 HTML 表单中使用现有变量，但没有任何运气。到目前为止，我有这个：

```
<form action confgen.pl method "get">
    <input type="text" name="unitname">
    <input type="text" name="clientid">
    <input type="text" name="version">
    <input type="submit" Value="generate"
</form> 
```

有什么建议或例子吗？我应该补充一点，CGI 和 Perl 不是我的第一语言，但我一直在努力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:12:29.020

你的 HTML 应该是这样的

```
<form action="confgen.pl" method="get">
    <input type="text" name="unitname">
    <input type="text" name="clientid">
    <input type="text" name="version">
    <input type="submit" value="generate">
</form> 
```

您是否使用任何 Perl 库来接收 HTTP 请求？考虑使用 CGI [http://perldoc.perl.org/CGI.html](http://perldoc.perl.org/CGI.html)

# android - 将文件从 android sdcard 流式传输到 windows 主机

> ID：15148662
> 
> 赞同：0
> 
> 时间：2013-03-01T01:02:56.420
> 
> 标签：android, adb

我在 sdcard 上有一个文件正在被应用程序不断写入，我需要在应用程序写入时将文件从设备中提取到我的 Windows 主机上以进行进一步分析。

`adb pull`不好，因为它会拉出整个文件然后停止，但当然文件仍在写入中。无论如何，文件变得非常大，所以我不想每次都复制整个文件，只是我上次阅读后写入的部分。

`adb shell dd`可能是一个选项，但我只能将它从 sdcard 上的一个文件复制到 sdcard 上的另一个文件，即不是我的 Windows 机器：

例如`adb shell dd if=/sdcard/input.pcm of=/sdcard/output.pcm`，然后使用跳过并寻找 dd 选项。

如果我使用 dd 和 pipe::`adb shell dd if=/sdcard/input.pcm > output.pcm`输出文件有一些损坏：0x0D，0x0D 被随机添加到 pcm 数据中。就像我只做 adb shell cat input.pcm 一样。

我还考虑将数据写入 logcat 并对其进行解析，但这相当笨重和混乱，并且有大量数据。

另一种选择可能是将文件拆分为许多正在写入的小文件，然后使用 adb pull。

这些都不是理想的。理想情况下，我希望主机上有一个程序可以在我的控制下提取数据，例如 fopen、fread 等。但我不确定这是否可能。

谁能建议我如何能够满足我的要求：

1.  读取 Windows 主机可用的所有文件
2.  读取自我上次读取以来已更新的文件部分（例如每 100 毫秒）

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:17:06.100

我认为这是您的特定要求，因此修改Android的源代码没有关系。

你为什么不实现另一个 adb 命令？然后可以记录最后读取的位置，使用 adb newcommand filename 增量拉出文件。

adb的实现可以分为主机端和adbd两部分。

在主机端，当您键入命令时，它会转到`adb_commandline()`commandline.c。

```
if(!strcmp(argv[0], "pull")) {
    if (argc == 2) {
        return do_sync_pull(argv[1], ".");
    } else if (argc == 3) {
        return do_sync_pull(argv[1], argv[2]);
    } else {
        return usage();
    }
} 
```

然后`do_sync_pull`不断地与 adbd 通信。adbd(adb.c) 监听从主机端发送的请求。

一个简单的方法是在 do_sync_pull 中添加另一个参数，让 adbd 不断寻找文件并发送回文件内容。

# perl - 在 VMS 上从 perl 捕获 SIGABRT

> ID：15148665
> 
> 赞同：0
> 
> 时间：2013-03-01T01:03:01.733
> 
> 标签：perl, vms, openvms, dcl, vax

给定kill.pl：

```
$SIG{INT} = sub { print "int\n" };
$SIG{TERM} = sub { print "term\n" };
$SIG{ABRT} = sub { print "abort\n" };

print "sleeping...\n";
sleep 60; 
```

和kill.com：

```
$ perl kill.pl 
```

并像这样启动+中止：

```
submit /log_file=kill.log kill.com

delete /entry=XXXXXX/noconfirm 
```

信号处理程序不会被调用。当进程被杀死时，类似的代码可以在 Linux 上运行。

kill.log 只显示：

```
(19:58)$ perl kill.pl
sleeping...
%JBC-F-JOBABORT, job aborted during execution 
```

我阅读了 vmsperl 文档并尝试了一些来自[http://perldoc.perl.org/sigtrap.html](http://perldoc.perl.org/sigtrap.html)的东西。有没有办法做到这一点？

请注意，如果我打电话：

```
@kill.com 
```

并执行 CTRL+C，SIGINT 由 kill.pl 处理。

我添加了 perl 标签，以防有人知道是否有办法告诉 perl 捕获每个可能是我感兴趣的信号。我的尝试是：

```
$SIG{$_} = \&subroutine for keys(%SIG); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:18:13.590

您不是在向进程发送信号——您是在指示队列管理器删除进程，它确实这样做了。我认为做你想做的最简单的方法是使用 Perl 发送信号。像以前一样提交您的工作并使用：

```
$ show system/batch 
```

找到工作的pid。当队列管理器分配条目 572 时，您将看到类似这样的内容：

```
 Pid    Process Name    State  Pri      I/O       CPU       Page flts  Pages
00003EA1 BATCH_572       HIB      1      259   0 00:00:00.05       511    626  B 
```

像这样将您的信号发送到 pid 0x3ea1，注意作业通知表明它已完成而不是中止：

```
$ perl -e "kill 'ABRT', 0x3ea1;"
$

Job KILL (queue SYS$BATCH, entry 572) completed 
```

查看您的日志文件，您将在最后看到这两行：

```
sleeping...
abort 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T06:09:11.787

这是 VAX 还是 Alpha 系统？我相信您的“删除”呼叫可能不会向您正在运行的工作发出中止信号。自从我使用它以来已经太久了，但不记得有一个工具会向批处理作业抛出特定信号 - LIB$SIGNAL 来自一个进程，而不是它。您应该尝试从 sigtrap 文档的“错误信号”列表中捕获剩余的信号。

# random - 带有 Makefile 的 C 库

> ID：15148668
> 
> 赞同：0
> 
> 时间：2013-03-01T01:03:19.670
> 
> 标签：random, module, makefile, kernel

我正在尝试创建一个需要生成随机数才能正常工作的内核模块。为了实现这一点，我在我的代码中包含了`<stdlib.h>`和`<time.h>`，但我无法使用 make 命令编译模块。

我在网上搜索帮助并尝试将其包含`EXTRA_CFLAGS := -I/usr/include`到 Makefile 中，但在此之后我不断收到更多错误。

这是我收到的错误消息：

```
kernel@KernelDev:~/Modulos/DropProb$ make
make -C /lib/modules/3.2.0-37-generic/build SUBDIRS=/home/kernel/Modulos/DropProb modules
make[1]: Entering directory `/usr/src/linux-headers-3.2.0-37-generic'
  CC [M]  /home/kernel/Modulos/DropProb/drop_prob.o
In file included from /home/kernel/Modulos/DropProb/drop_prob.c:15:0:
/usr/include/stdlib.h: In function ‘atof’:
/usr/include/stdlib.h:280:1: error: SSE register return with SSE disabled
In file included from include/linux/compiler.h:48:0,
                 from include/linux/linkage.h:4,
                 from include/linux/kernel.h:13,
                 from /home/kernel/Modulos/DropProb/drop_prob.c:19:
include/linux/compiler-gcc.h: At top level:
include/linux/compiler-gcc.h:87:0: warning: "__attribute_const__" redefined [enabled by default]
/usr/include/sys/cdefs.h:241:0: note: this is the location of the previous definition
In file included from include/linux/compiler.h:48:0,
                 from include/linux/linkage.h:4,
                 from include/linux/kernel.h:13,
                 from /home/kernel/Modulos/DropProb/drop_prob.c:19:
include/linux/compiler-gcc.h:106:0: warning: "__always_inline" redefined [enabled by default]
/usr/include/sys/cdefs.h:312:0: note: this is the location of the previous definition
In file included from include/linux/kernel.h:15:0,
                 from /home/kernel/Modulos/DropProb/drop_prob.c:19:
include/linux/types.h:23:26: error: conflicting types for ‘fd_set’
/usr/include/sys/select.h:76:5: note: previous declaration of ‘fd_set’ was here
include/linux/types.h:24:25: error: conflicting types for ‘dev_t’
/usr/include/sys/types.h:61:17: note: previous declaration of ‘dev_t’ was here
include/linux/types.h:33:26: error: conflicting types for ‘timer_t’
/usr/include/time.h:104:19: note: previous declaration of ‘timer_t’ was here
include/linux/types.h:53:26: error: conflicting types for ‘loff_t’
/usr/include/sys/types.h:45:18: note: previous declaration of ‘loff_t’ was here
include/linux/types.h:120:17: error: conflicting types for ‘u_int64_t’
/usr/include/sys/types.h:204:1: note: previous declaration of ‘u_int64_t’ was here
include/linux/types.h:121:17: error: conflicting types for ‘int64_t’
/usr/include/sys/types.h:198:1: note: previous declaration of ‘int64_t’ was here
include/linux/types.h:142:23: error: conflicting types for ‘blkcnt_t’
/usr/include/sys/types.h:236:20: note: previous declaration of ‘blkcnt_t’ was here
In file included from include/linux/stat.h:60:0,
                 from include/linux/module.h:10,
                 from /home/kernel/Modulos/DropProb/drop_prob.c:20:
include/linux/time.h:14:8: error: redefinition of ‘struct timespec’
/usr/include/time.h:120:8: note: originally defined here
include/linux/time.h:20:8: error: redefinition of ‘struct timeval’
/usr/include/bits/time.h:31:8: note: originally defined here
include/linux/time.h:74:22: error: conflicting types for ‘mktime’
/usr/include/time.h:193:15: note: previous declaration of ‘mktime’ was here
include/linux/time.h:206:8: error: redefinition of ‘struct tm’
/usr/include/time.h:133:8: note: originally defined here
include/linux/time.h:289:0: warning: "FD_SET" redefined [enabled by default]
/usr/include/sys/select.h:91:0: note: this is the location of the previous definition
include/linux/time.h:290:0: warning: "FD_CLR" redefined [enabled by default]
/usr/include/sys/select.h:92:0: note: this is the location of the previous definition
include/linux/time.h:291:0: warning: "FD_ISSET" redefined [enabled by default]
/usr/include/sys/select.h:93:0: note: this is the location of the previous definition
include/linux/time.h:292:0: warning: "FD_ZERO" redefined [enabled by default]
/usr/include/sys/select.h:94:0: note: this is the location of the previous definition
include/linux/time.h:302:8: error: redefinition of ‘struct itimerspec’
/usr/include/time.h:161:8: note: originally defined here
include/linux/time.h:337:0: warning: "TIMER_ABSTIME" redefined [enabled by default]
/usr/include/bits/time.h:82:0: note: this is the location of the previous definition
In file included from include/linux/mmzone.h:9:0,
                 from include/linux/gfp.h:4,
                 from include/linux/kmod.h:22,
                 from include/linux/module.h:13,
                 from /home/kernel/Modulos/DropProb/drop_prob.c:20:
include/linux/wait.h:4:0: warning: "WNOHANG" redefined [enabled by default]
/usr/include/bits/waitflags.h:26:0: note: this is the location of the previous definition
include/linux/wait.h:5:0: warning: "WUNTRACED" redefined [enabled by default]
/usr/include/bits/waitflags.h:27:0: note: this is the location of the previous definition
include/linux/wait.h:6:0: warning: "WSTOPPED" redefined [enabled by default]
/usr/include/bits/waitflags.h:30:0: note: this is the location of the previous definition
include/linux/wait.h:7:0: warning: "WEXITED" redefined [enabled by default]
/usr/include/bits/waitflags.h:31:0: note: this is the location of the previous definition
include/linux/wait.h:8:0: warning: "WCONTINUED" redefined [enabled by default]
/usr/include/bits/waitflags.h:32:0: note: this is the location of the previous definition
In file included from /usr/src/linux-headers-3.2.0-37-generic/arch/x86/include/asm/param.h:1:0,
                 from include/linux/param.h:4,
                 from include/linux/timex.h:172,
                 from include/linux/jiffies.h:8,
                 from include/linux/ktime.h:25,
                 from include/linux/timer.h:5,
                 from include/linux/workqueue.h:8,
                 from include/linux/pm.h:25,
                 from /usr/src/linux-headers-3.2.0-37-generic/arch/x86/include/asm/apic.h:5,
                 from /usr/src/linux-headers-3.2.0-37-generic/arch/x86/include/asm/smp.h:13,
                 from /usr/src/linux-headers-3.2.0-37-generic/arch/x86/include/asm/mmzone_64.h:10,
                 from /usr/src/linux-headers-3.2.0-37-generic/arch/x86/include/asm/mmzone.h:4,
                 from include/linux/mmzone.h:815,
                 from include/linux/gfp.h:4,
                 from include/linux/kmod.h:22,
                 from include/linux/module.h:13,
                 from /home/kernel/Modulos/DropProb/drop_prob.c:20:
include/asm-generic/param.h:7:0: warning: "CLOCKS_PER_SEC" redefined [enabled by default]
/usr/include/bits/time.h:49:0: note: this is the location of the previous definition
In file included from include/linux/signal.h:4:0,
                 from include/linux/sched.h:73,
                 from /usr/src/linux-headers-3.2.0-37-generic/arch/x86/include/asm/compat.h:8,
                 from include/linux/compat.h:18,
                 from include/linux/ethtool.h:17,
                 from include/linux/netdevice.h:47,
                 from include/net/sock.h:50,
                 from include/linux/tcp.h:211,
                 from /home/kernel/Modulos/DropProb/drop_prob.c:25:
/usr/src/linux-headers-3.2.0-37-generic/arch/x86/include/asm/signal.h:32:3: error: conflicting types for ‘sigset_t’
/usr/include/sys/select.h:38:20: note: previous declaration of ‘sigset_t’ was here
/home/kernel/Modulos/DropProb/drop_prob.c: In function ‘drop_tcp_hookfn’:
/home/kernel/Modulos/DropProb/drop_prob.c:76:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
/home/kernel/Modulos/DropProb/drop_prob.c: At top level:
/home/kernel/Modulos/DropProb/drop_prob.c:31:36: warning: ‘nfho_out’ defined but not used [-Wunused-variable]
make[2]: *** [/home/kernel/Modulos/DropProb/drop_prob.o] Error 1
make[1]: *** [_module_/home/kernel/Modulos/DropProb] Error 2
make[1]: Leaving directory `/usr/src/linux-headers-3.2.0-37-generic'
make: *** [default] Error 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:29:18.993

您不允许将`stdlib.h`库`libc`中的内容包含在内核中（即使在模块中）。

查看此页面以获取允许的基本 C 库函数列表以及如何使用它们：[http ://www.kernel.org/doc/htmldocs/kernel-api/libc.html](http://www.kernel.org/doc/htmldocs/kernel-api/libc.html)

如果您想获取内核空间中的当前时间，可以查看[time_to_tm](http://lxr.free-electrons.com/source/include/linux/time.h?v=2.6.33#L163)函数。它会返回`structure tm`. 时区也应该在一个名为 的变量中可用`sys_tz`，并可用于调整偏移量并获取本地时间。

# web-applications - Twitter 和 google+ 社交整合

> ID：15148669
> 
> 赞同：0
> 
> 时间：2013-03-01T01:03:20.650
> 
> 标签：web-applications, twitter, integration, google-plus, social

任何人都可以建议我如何构建 twitter 和 google+ 集成的好教程。

注册时，我想问用户是否想在 facebook、twitter 或 google+ 上注册。如果他们点击其中任何一个。他们可以授权我的网站，我可以提取他们的基本信息（如用户名、电子邮件、个人资料图片）并自动填写该字段。

我已经完成了 Facebook 集成，这很简单，但 twitter 和 google+ 使用 Oauth 模型。另外，当我在谷歌上搜索这个时，我发现 twitter 不允许你获取用户的电子邮件 ID，这是真的吗？

我打算使用 php 和 java-script 来做到这一点。

请告诉我 。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T02:22:41.467

Google+ 登录在[https://developers.google.com/+/web/signin/](https://developers.google.com/+/web/signin/)中进行了介绍，其中包括几个示例和教程。

正如您所注意到的，它确实使用了 OAuth 流程，尽管 PHP 和 JS 库为您涵盖了大部分内容。如果您需要获取电子邮件地址，您还需要请求额外的 OAuth 范围。

# c# - 解析复杂非标准字符串的最佳方法？

> ID：15148674
> 
> 赞同：1
> 
> 时间：2013-03-01T01:04:19.297
> 
> 标签：c#, parsing

我正在尝试使用 C# 收集一些数据。我有一个以独特的非标准方式输出数据的系统。我需要定期从平面文件中解析这些数据，并将其导入数据库。我还需要尽可能快地进行解析。我工作得很好的数据库东西，这很简单。我需要帮助找出解析文件的最佳方法。目前，大约有 15000 行，并且每天都会添加更多行。下面来看看数据。第一行是数据在平面文件中的呈现方式。第二位更容易理解正在导入的数据的视图。

```
{a test entry}  {{1}{{city}{chicago}{employee}{johnsmith}{building}{5}{room}{506A}{room}{506B}{id}{1234}}{2}{{city}{losangeles}{employee}{johnsmith}{building}{1}{room}{101A}{room}{102B}{id}{1234}}}

{a test entry}
{
    {1}

    {
        {city}      {chicago}
        {employee}  {johnsmith}
        {building}  {5}
        {room}      {506A}
        {room}      {506B}
        {id}        {1234}
    }

    {2}

    {
        {city}      {losangeles}
        {employee}  {johnsmith}
        {building}  {1}
        {room}      {101A}
        {id}        {1234}
    }
} 
```

每个条目可以是一个子条目的任何位置（意味着 {2} 下没有数据），或者它可以继续有数百个。

我应该如何处理解析这个？我尝试了一些拆分和子字符串的方法，但我取得了不同的成功，而且速度很慢。

有什么方法可以简单地解析我正在查看的数据吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T01:22:49.560

创建堆栈并逐字符处理输入字符串：

```
var stack = new Stack<StringBuilder>();
foreach (var ch in input)
{
    if (ch == '{')
    {
        stack.Push(new StringBuilder());
    }
    else if (ch == '}')
    {
        var item = stack.Pop().ToString();
        Console.WriteLine(new string(' ', stack.Count * 2) + item);
    }
    else if (stack.Count != 0)
    {
        stack.Peek().Append(ch);
    }
} 
```

*输出：*

```
a test entry
  1
    city
    chicago
    employee
    johnsmith
    building
    5
    room
    506A
    room
    506B
    id
    1234

  2
    city
    losangeles
    employee
    johnsmith
    building
    1
    room
    101A
    room
    102B
    id
    1234 
```

现在您已经解析了数据，您只需要确定将其放入的数据结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T05:18:58.287

像这样的东西怎么样：

```
static void Main(string[] args)
{
    int index = 0;
    string text = "{a test entry}  {{1}{{city}{chicago}{employee}{johnsmith}{building}{5}{room}{506A}{room}{506B}{id}{1234}}{2}{{city}{losangeles}{employee}{johnsmith}{building}{1}{room}{101A}{room}{102B}{id}{1234}}}";

    var tokens = Tokenize(text);        
    var node = Parse(new Node(new Token() { TokenType = TokenType.Root, Value = string.Empty }), tokens, ref index);
    RaiseSubtrees(node);

    Console.WriteLine(node.ToString());
}

static List<Token> Tokenize(string text)
{
    Stack<StringBuilder> stack = new Stack<StringBuilder>();
    List<Token> tokens = new List<Token>();

    foreach (var ch in text)
    {
        if (ch == '{')
        {
            stack.Push(new StringBuilder());
            tokens.Add(new Token(TokenType.ObjectStart, "{" ));
        }
        else if (ch == '}')
        {
            var item = stack.Pop().ToString();

            if (!string.IsNullOrEmpty(item))
            {
                tokens.Add(new Token(TokenType.Text, item));
            }

            tokens.Add(new Token(TokenType.ObjectEnd, "}"));
        }
        else if (stack.Count != 0)
        {
            stack.Peek().Append(ch);
        }
    }

    return tokens;
}

static Node Parse(Node parent, List<Token> tokens, ref int index)
{
    for (; index < tokens.Count - 1; index++)
    {
        Token current = tokens[index];
        Token next = tokens[index + 1];

        if (current.TokenType == TokenType.ObjectStart)
        {
            Node child = new Node(current);
            parent.Children.Add(child);
            index++;
            Parse(child, tokens, ref index);
        }
        else if (current.TokenType == TokenType.Entry || current.TokenType == TokenType.Text)
        {
            Node child = new Node(current);
            parent.Children.Add(child);
        }
        else if (current.TokenType == TokenType.ObjectEnd)
        {
            return parent;
        }
    }

    return parent;
}

static void RaiseSubtrees(Node node)
{
    if (node.Children.Count == 1)
    {
        node.Token = node.Children.First().Token;
        node.Children.Clear();
    }
    else
    {
        foreach (Node child in node.Children)
        {
            RaiseSubtrees(child);
        }

        if (node.Children.All(c => c.Token.TokenType == TokenType.Text))
        {
            for (int i = node.Children.Count - 1; i >= 1; i-=2)
            {
                Node keyNode = node.Children[i - 1];
                Node valueNode = node.Children[i];
                keyNode.Token.TokenType = TokenType.Key;
                valueNode.Token.TokenType = TokenType.Value;

                Node newParent = new Node(new Token(TokenType.Property, string.Empty));
                newParent.Children.Add(keyNode);
                newParent.Children.Add(valueNode);

                node.Children.RemoveAt(i);
                node.Children.RemoveAt(i - 1);
                node.Children.Insert(i - 1, newParent);
            }
        }
    }
}

enum TokenType
{
    Entry,
    Key,
    ObjectStart,
    ObjectEnd,
    Property,
    Root,
    Text,
    Value
}

class Token
{
    public TokenType TokenType { get; set; }
    public string Value { get; set; }

    public Token()
    {
    }

    public Token(TokenType tokenType, string value)
    {
        this.TokenType = tokenType;
        this.Value = value;
    }
}

class Node
{
    public Token Token { get; set; }
    public IList<Node> Children { get; set; }

    public Node(Token token)
    {
        this.Token = token;
        this.Children = new List<Node>();
    }

    public override string ToString()
    {
        StringBuilder builder = new StringBuilder();
        ToString(this, builder, string.Empty);

        return builder.ToString();
    }

    public void ToString(Node parent, StringBuilder builder, string indent)
    {
        builder.Append(indent).Append(parent.Token.TokenType.ToString());

        if (parent.Token.TokenType != TokenType.Root && parent.Token.TokenType != TokenType.ObjectStart)
        {
            builder.Append(": ").Append(parent.Token.Value);
        }

        builder.Append("\n");

        foreach (var child in parent.Children)
        {
            ToString(child, builder, indent + "  ");
        }
    }
} 
```

这使用与 dtb 类似的方法进行标记化，但我随后使用`Node`该类来创建对数据进行建模的树。这应该允许您以更结构化的方式处理数据。上述方法的输出`Main`如下所示：

```
Root
  Text: a test entry
  ObjectStart
    Text: 1
    ObjectStart
      Property:
        Key: city
        Value: chicago
      Property:
        Key: employee
        Value: johnsmith
      Property:
        Key: building
        Value: 5
      Property:
        Key: room
        Value: 506A
      Property:
        Key: room
        Value: 506B
      Property:
        Key: id
        Value: 1234
    Text: 2
    ObjectStart
      Property:
        Key: city
        Value: losangeles
      Property:
        Key: employee
        Value: johnsmith
      Property:
        Key: building
        Value: 1
      Property:
        Key: room
        Value: 101A
      Property:
        Key: room
        Value: 102B
      Property:
        Key: id
        Value: 1234 
```

# c# - 位置 5 没有行

> ID：15148678
> 
> 赞同：0
> 
> 时间：2013-03-01T01:05:11.087
> 
> 标签：c#, ado.net, dataset

我正在使用 C Sharp

运行调试器以查看 wat 代码错误后出现此错误：

{“位置 5 处没有行。”} System.Exception {System.IndexOutOfRangeException}

```
 public DataSet FindData(string ID, string pass)
    {
        InitializeConnection();
        m_oCn.Open();
        DataSet thisDataSet = new DataSet();
        DataSet foundDataSet = new DataSet();
        try
        {
            m_oDA.Fill (thisDataSet, "Login");
            for (int n = 0; 0 < thisDataSet.Tables["Login"].Rows.Count ; n++)
            {
                if (thisDataSet.Tables["Login"].Rows[n]["UserName"].ToString () == ID)
                {
                    if (thisDataSet.Tables["Login"].Rows[n]["Password"].ToString () == pass)
                    {
                        m_oDA.Fill(foundDataSet,n,1,"Login");

                    }
                }
            }
        }
        catch 
        {
        }
        finally
        {
            m_oCn.Close();
            m_oCn = null;
        }
        return foundDataSet; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T01:07:04.883

```
for (int n = 0; 0 < thisDataSet.Tables["Login"].Rows.Count; n++) 
```

您的 for 循环条件检查零是否小于行数，这意味着您的循环将无限期运行（或直到您访问不存在的索引）。您可能的意思是检查是否`n`小于行数：

```
for (int n = 0; n < thisDataSet.Tables["Login"].Rows.Count; n++) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T01:06:52.160

如果有缺陷，您的循环：

```
for (int n = 0; 0 < thisDataSet.Tables["Login"].Rows.Count ; n++) 
```

那不应该是：

```
for (int n = 0; n < thisDataSet.Tables["Login"].Rows.Count ; n++) 
```

# jsf - 如何在 Primefaces 中保存主题

> ID：15148680
> 
> 赞同：0
> 
> 时间：2013-03-01T01:05:28.197
> 
> 标签：jsf, jsf-2, primefaces

我想使用 Primefaces [ThemeSwitcher](http://www.primefaces.org/showcase/ui/themeswitcher.jsf)。我对重新加载 Web 应用程序时如何保存所选主题感兴趣。例如，如何将主题名称设置为数据库中的变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:14:39.000

您将不需要 ThemeSwitcher 来实现您正在寻找的那种持久性。

[只需在ServletContextListener](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)中执行主题的数据库查找，然后将值存储在 servlet 上下文中，可能会覆盖您在 web.xml 中设置的任何内容

```
 public Class MyContextListener implements ServletContextListener{

     public void contextInitialized(ServletContextEvent sce){

      String selectedTheme = myThemeDAO.getConfiguredTheme();

      sce.getServletContext().setInitParameter("primefaces.THEME",selectedTheme);

     }

   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-07T01:26:08.127

另一种方法是：将样式表包含到您的页面模板中：

`<h:body> <h:outputStylesheet library="primefaces-#{themesBean.theme}" name="theme.css" /> </h:body>`

其中`#{themesBean.theme}`变量是指您的主题的名称。

PS在PF5中测试

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T15:19:29.260

将您的 ThemeSwitcher 组件链接到 managedBean 并添加一个链接到 ajax 事件的侦听器：

```
<h:form id="form-theme">
<p:themeSwitcher id="defaultSwitcher" value="#{themeSwitcherBean.theme}">
<f:selectItems value="#{themeSwitcherBean.themes}" />
<p:ajax listener="#{themeSwitcherBean.saveTheme}" />
</p:themeSwitcher>
</h:form> 
```

在您的托管bean中创建调用saveTheme的方法，该方法将调用一个类以持久保存在数据库中，并在开始获取已保存到数据库中的主题时调用数据库的类：

```
@SessionScoped
@ManagedBean(name="themeSwitcherBean")
public class ThemeSwitcherBean implements Serializable{ 
private Map<String, String> themes;
    private String theme;
    private GuestPreferences gp;

    private void setGp(GuestPreferences gp) {
        this.gp = gp;
    }

    public Map<String, String> getThemes() {
        return themes;
    }

    public String getTheme() {
        return theme;
    }

    public void setTheme(String theme) {
        this.theme = theme;
    }

    @PostConstruct
    public void init() {
        setGp(new GuestPreferences()); // persistent class
        setTheme(gp.getTheme()); // theme from the database;

        themes = new TreeMap<String, String>();
        themes.put("Aristo", "aristo");
        themes.put("Black-Tie", "black-tie");
        themes.put("Blitzer", "blitzer");
        themes.put("Bluesky", "bluesky");
        themes.put("Bootstrap", "bootstrap");
        themes.put("Casablanca", "casablanca");
        themes.put("Cupertino", "cupertino");
        themes.put("Dark-Hive", "dark-hive");
        themes.put("Dot-Luv", "dot-luv");
        themes.put("Eggplant", "eggplant");
        themes.put("Excite-Bike", "excite-bike");
        themes.put("Flick", "flick");
        themes.put("Glass-X", "glass-x");
        themes.put("Hot-Sneaks", "hot-sneaks");
        themes.put("Humanity", "humanity");
        themes.put("Le-Frog", "le-frog");
        themes.put("Midnight", "midnight");
        themes.put("Mint-Choc", "mint-choc");
        themes.put("Overcast", "overcast");
        themes.put("Pepper-Grinder", "pepper-grinder");
        themes.put("Redmond", "redmond");
        themes.put("Rocket", "rocket");
        themes.put("Sam", "sam");
        themes.put("Smoothness", "smoothness");
        themes.put("South-Street", "south-street");
        themes.put("Start", "start");
        themes.put("Sunny", "sunny");
        themes.put("Swanky-Purse", "swanky-purse");
        themes.put("Trontastic", "trontastic");
        themes.put("UI-Darkness", "ui-darkness");
        themes.put("UI-Lightness", "ui-lightness");
        themes.put("Vader", "vader");
    }

    public void saveTheme() {           
        gp.setTheme(theme); // theme to database
    }

} 
```

GuestPreferences 类中的方法主题将持久保存到数据库

```
@SessionScoped
public class GuestPreferences {

    public String getTheme(){        
        //return the theme from the database
    }

    public void setTheme(String theme){
        //send the theme to the database
    }

} 
```

从数据库发送和接收数据的形式取决于您的喜好：
* jdbc
* jta
* jpa

比如jta，做一个persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation=" http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="NAME-WHAT-YOU-WANT" transaction-type="JTA">
    <provider>CLASS-OF-YOUR-PROVIDER</provider>
    <jta-data-source>YOUR-DATASOURCE</jta-data-source>
    <class>PATH-OF.GuestPreferences</class>
    <properties>
      <property name="NAME-OF-PROPERTY-TO-FORM-A-JDBC-URL" value="VALUE-OF-PROPERTY"/>
      <property name="NAME-OF-PROPERTY-TO-FORM-A-JDBC-URL" value="VALUE-OF-PROPERTY"/>
      <property name="NAME-OF-PROPERTY-TO-FORM-A-JDBC-URL" value="VALUE-OF-PROPERTY"/>
    </properties>
  </persistence-unit>
</persistence> 
```

在资源类中，您可以声明：

```
 @SuppressWarnings("unused")
   @Produces
   @PersistenceContext
   private EntityManager em; 
```

然后，您可以在 GuestPreferences 类中使用它：

```
@Inject
private EntityManager em;

em.getTransaction().begin();
Query query = em.createQuery("SELECT u FROM user_table u where u.iduser=:iduser");
query.setParameter("iduser", "THEME-USER-ID");
User resultUser = (User) query.getResultList();
em.getTransaction().commit();
if(User!=null){ 
   return resultUser.getTheme();
 } 
```

上面的代码假设您有一个名为 user_table 的表，其中用户有一个 iduser、name ... 和一个主题列，并且假设您有一个名为 User 的对象来管理用户

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T05:47:35.947

我认为在会话中设置选定的主题会有所帮助：

```
session.setAttribute 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T09:10:29.827

通过代码编辑 web.xml：

[http://illegalargumentexception.blogspot.co.at/2008/08/java-using-xmlbeans-to-edit-webxml.html](http://illegalargumentexception.blogspot.co.at/2008/08/java-using-xmlbeans-to-edit-webxml.html)

```
<context-param>
        <param-name>primefaces.THEME</param-name>
        <param-value>EDITME</param-value>
</context-param> 
```

或者在加载页面之前创建方法以从 db 中选择主题。（更清洁的解决方案）

# z3 - 处理空模型的量化公式的正确方法是什么？

> ID：15148681
> 
> 赞同：1
> 
> 时间：2013-03-01T01:05:31.693
> 
> 标签：z3, smt, first-order-logic

我在玩未解释的排序和函数，不能完全理解量化公式如何与空模型交互。这里（也在这里[http://rise4fun.com/Z3Py/6ets](http://rise4fun.com/Z3Py/6ets)）是一些让我有些困惑的简单例子：

1.  `[∀v : False]`是不饱和的，而“直观地”它适用于空模型。
2.  检查`[∃v : v = v]`会产生一个空模型，而该模型没有令人满意的分配。
3.  一些看似等同于 的公式以`[∃v : v = v]`某种方式阻止 z3 生成空模型。`[∃v, v1 : v = v1]`就是这样一个例子。例如，如果我们将这样的公式添加到求解器，然后尝试创建类似于 allsat 程序的东西（添加越来越多的约束以排除越来越多的模型），我们会在得到一个空模型之前遇到 unsat。

那么，您能否请我参考任何描述 z3 如何处理量词和空模型的文档/论文？另外，如果我选择只关注非空模型，那么询问 z3 的正确方法是什么？诸如此类的事情`[∃v, v1 : v = v1]`似乎可以解决问题，但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T03:02:23.070

Z3 不考虑空模型。这是一阶逻辑中的标准假设。有关更多详细信息，请搜索“一阶逻辑空模型”，您将获得许多解释此约定动机的链接。[一阶逻辑的维基百科页面](http://en.wikipedia.org/wiki/First-order_logic#Empty_domains)有一个简短的描述（“空域”部分）。

此外，我们不应该`[]`与空模型混淆。只是说为了满足输入公式，Z3不需要为输入公式中任何未解释的符号分配解释。Z3 仅显示满足公式所需的符号解释。例如，公式`[∃v : v = v]`不包含任何未解释的符号，则 Z3 仅显示*空赋值* `[]`。

# magento - 添加商店代码网址后如何重定向旧的magento网址

> ID：15148683
> 
> 赞同：0
> 
> 时间：2013-03-01T01:05:35.437
> 
> 标签：magento, url, rewrite

我们在网址中添加了商店代码（在管理员中将商店代码添加到网址），现在我们所有的旧网址都已损坏。

我们如何使用商店代码将所有旧网址重写为新网址？

示例：（`category/test/`旧网址，已损坏）到`en/category/test`（带有商店代码的新网址，正在工作）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:25:17.680

没有办法开箱即用。

你有一个问题，旧的 url 在商店视图中是模棱两可的。

我会尝试添加一行`.htaccess` ：

```
RewriteRule !^en/ en%{REQUEST_URI} [R] 
```

我不擅长`mod_rewrite`，但我希望你能明白。

# python - 元组列表（字符串，浮点数）与 NaN 如何获得最小值？

> ID：15148684
> 
> 赞同：4
> 
> 时间：2013-03-01T01:05:36.907
> 
> 标签：python, list, tuples, nan, min

我有一个元组列表（字符串，浮点数）列表`float('nan')`。我怎样才能得到数字最小的元组？如果我使用 min 我总是得到`nan`.

```
[('GroundBasedMechWT', nan), ('GroundBasedCTL', nan), ('GroundBasedManualWT', nan), ('GroundBasedManualLog', nan), ('CableManualWTLog', 60.77), ('CableManualWT', 58.52), ('CableManualLog', 68.17), ('CableManualCTL', nan), ('HelicopterManualWT', 96.82), ('HelicopterManualCTL', nan)] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T01:09:03.320

您可以使用自定义键，这将返回一个非常高的值`NaN`：

```
min(list, key=lambda x: float('inf') if math.isnan(x[1]) else x[1]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T01:14:27.647

你也可以试试这个：

```
min(filter(lambda t: not math.isnan(t[1]), l), key=itemgetter(1)) 
```

其中`itemgetter`指[`operator.itemgetter`](http://docs.python.org/2/library/operator.html#operator.itemgetter).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T01:24:09.067

```
>>> nan=float('NaN')
>>> x=[('GroundBasedMechWT', nan), ('GroundBasedCTL', nan), ('GroundBasedManualWT', nan), ('GroundBasedManualLog', nan), ('CableManualWTLog', 60.77), ('CableManualWT', 58.52), ('CableManualLog', 68.17), ('CableManualCTL', nan), ('HelicopterManualWT', 96.82), ('HelicopterManualCTL', nan)]
>>> nan<1
False
>>> nan<1.0
False
>>> min(x)
('CableManualCTL', nan) 
```

我不认为 nan 被认为比普通花车小。可能 min 按字母顺序比较字符串。

（不是一个完整的答案，但可能会有所帮助）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T01:32:16.257

```
nan=float('NaN')
x=[('GroundBasedMechWT', nan), ('GroundBasedCTL', nan), ('GroundBasedManualWT', nan), ('GroundBasedManualLog', nan), ('CableManualWTLog', 60.77), ('CableManualWT', 58.52), ('CableManualLog', 68.17), ('CableManualCTL', nan), ('HelicopterManualWT', 96.82), ('HelicopterManualCTL', nan)]
val=('foo', float('Inf')) #thanks for teaching me that
for tup in x:
    if tup[1]<val[1]:
        val=tup
print val 
```

在空列表上失败，但可以解决问题。

# mod-rewrite - 用于 URL 的 Mod_Rewrite

> ID：15148690
> 
> 赞同：1
> 
> 时间：2013-03-01T01:06:06.313
> 
> 标签：mod-rewrite

几天来，我一直在寻找问题和答案，试图弄清楚如何完成这项工作。

到目前为止，我可以更改我的 URL，但它不会加载页面。

我必须采取

[http://www.mysite.com/index.php?mode=about](http://www.mysite.com/index.php?mode=about)

并让它显示为

[http://www.mysite.com/about/](http://www.mysite.com/about/)

到目前为止，我有以下代码：

```
RewriteEngine on
RewriteCond %{QUERY_STRING} ^mode=(.*)
RewriteRule ^ http\:\/\/\www.mysite.com\/%1? [R=301,L]

RewriteRule /(.*) /index.php?mode=%1 [L] 
```

我已经改变了很多次，什么都没有。大多数网站似乎告诉我我不需要 301 重定向，但是我什么也做不了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T04:25:17.137

你可以使用这个：

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME}  -d
RewriteRule  ^.*$  -  [L]

RewriteRule ^([^/]+)/$  /index.php?mode=$1 [L] 
```

开头仍然允许访问其他文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:28:26.950

解决了这个问题。感谢所有的帮助。

* * *

#< IfModule mod_rewrite.c>

# 重写引擎开启

# RewriteCond %{REQUEST_FILENAME} !-f

# RewriteCond %{REQUEST_FILENAME} !-d

#< /IfModule>

选项 +FollowSymLinks

重写引擎开启

RewriteRule ^([a-zA-Z0-9_-]+)$ index.php?mode=$1

重写规则 ^([a-zA-Z0-9_-]+)/$ index.php?mode=$1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T03:03:05.160

> 我必须采取
> 
> [http://www.mysite.com/index.php?mode=about](http://www.mysite.com/index.php?mode=about)
> 
> 并让它显示为
> 
> [http://www.mysite.com/about/](http://www.mysite.com/about/)

人们想要两种非常常见的规则类型，您的陈述可以用两种需要不同规则的方式来解释。我将解释您的陈述，即您在 有一个真实的、可操作的脚本`http://www.mysite.com/index.php?mode=about`，但是您不想让用户输入那个“丑陋”的 URL，而是希望他们在输入时得到那个 URL `http://www.mysite.com/about/`。为此，您将执行以下操作：

```
RewriteRule ^about/?$ /index.php?mode=about [L] 
```

由于存在误解的可能性，最好将您想要的内容表述为 (1) 用户将在浏览器中输入的内容以及 (2) 您想要为他们提供的真实文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T02:51:49.610

对于（您的）示例，一旦您正确地从`mysite.com/index.php?mode=about`to路由`mysite.com/about`，现在将查看`mysite.com/about/`以查找接下来会发生什么（index.py/index.html/etc）。

因为 没有任何内容`/about/`，所以您会收到 404 错误。

我认为您不能使用 mod_rewrite 来完成您想要实现的目标，而无需在内部进行一些处理以在`/about/`到达那里后实际显示您想要的页面。

[http://www.noupe.com/php/10-mod_rewrite-rules-you-should-know.html](http://www.noupe.com/php/10-mod_rewrite-rules-you-should-know.html)

> 记住文件系统总是优先的
> 
> 服务器上的文件系统将始终优先于重写的 URL。例如，如果您有一个名为“services”的目录，并且该目录中有一个名为“design.html”的文件，则您不能将 URL 重定向到“<a href="http://domain.com/services “ rel="nofollow">http://domain.com/services”。发生的情况是 Apache 进入“服务”目录并且看不到重写指令。
> 
> 要解决此问题，只需重命名您的目录（在开头或结尾添加下划线是一种简单的方法）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T03:26:36.420

我不相信您需要第 2 行和第 3 行，并且您似乎有 % 而不是 $，请尝试：

```
RewriteEngine on
RewriteRule ^([^\/]+) /index.php?mode=$1 [L] 
```

# html - 背景图片不显示 容器

> ID：15148692
> 
> 赞同：1
> 
> 时间：2013-03-01T01:06:21.787
> 
> 标签：html, css, image, sprite

我有一个愚蠢的小问题。似乎 CSS 背景图像属性不起作用。

*   该图像位于背面的 DIV 容器中，我认为它可能会干扰它，但在删除它之后，它仍然无法正常工作（当前已删除）

*   我尝试将 css 代码放在不同的类中，但仍然无法正常工作

*   我已确保图像与 html 和 css 文件的目录相同。

HTML

```
<div class="detail_below">

<div class="course-downloadPF">
<a class="thickbox" href="http://www.google.com">Project Files Included</a>
</div>

<div class="course-add2PL">
<a class="thickbox" href="http://www.google.com">Add Course <br />to Playlist</a>
</div>

<div class="course-add2Favorite noMargin">
<a class="thickbox" href="http://www.google.com">Add to <br />Favorite</a>
</div>
  </div> 
```

CSS

```
.course-downloadPF a,
.course-add2PL a,
.course-add2Favorite a,
.course-removeFavorite a {

    width:80px;
    height:40px;
    font-size:11px;
    color:#fff !important;
    line-height:1.1em;
    text-align:center;
    text-decoration:none;
    padding-top:40px;
    background:url (sprite-courseDetails.gif) 0 0 no-repeat;
    margin-right:10px;
    display:block;
    float:left;
    border-radius: 4px;
}

.course-add2PL a {
    background:url (sprite-courseDetails.gif) -80px 0 no-repeat;
}
.course-add2Favorite a {
    background:url (sprite-courseDetails.gif) -160px 0 no-repeat;
}
.course-removeFavorite a {
    background:url (sprite-courseDetails.gif) -240px 0 no-repeat;
} 
```

如果有人可以看一下并给出第二个意见，那将不胜感激，因为我确信它是我忽略的一些小而愚蠢的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:13:06.343

```
 .course-add2PL a {
        background: url('sprite-courseDetails.gif') -80px 0 no-repeat;
    }
    .course-add2Favorite a {
        background: url('sprite-courseDetails.gif') -160px 0 no-repeat;
    }
    .course-removeFavorite a {
        background: url('sprite-courseDetails.gif') -240px 0 no-repeat;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T01:13:24.743

删除`url`和括号之间的空格`(...)`

这是无效的：

```
.class {
    background-image: url (image.png);
} 
```

但这是：

```
.course-add2PL a {
    background: url(sprite-courseDetails.gif) -80px 0 no-repeat;
}
.course-add2Favorite a {
    background: url(sprite-courseDetails.gif) -160px 0 no-repeat;
}
.course-removeFavorite a {
    background: url(sprite-courseDetails.gif) -240px 0 no-repeat;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T01:14:43.960

设置背景图像，而不是背景....`background-image:url('sprite-courseDetails.gif');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T01:17:58.003

你的问题不是背景css本身。您的 CSS 文件中有解析错误，无法呈现超出该错误的所有 CSS。见第 214 行：

```
*letter-spacing: -0.01em; /* IE 7 and below */ 
```

星号不正确。还有其他几个解析错误需要解决。

您可能想使用[http://jigsaw.w3.org/css-validator 之类的工具检查此文件](http://jigsaw.w3.org/css-validator)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T01:21:12.847

除非我是盲人，否则我认为您在连接到您的页面的任何 css 文件中都没有定义这些样式。我能看到的唯一 css 文件是 test.css 并且不包含这些样式。

有几种定义样式的方法，但以下应该有效

创建一个名为“whatever.css”的文件并将上述样式粘贴到其中。

然后在您的 html 头元素中添加以下内容

```
<link media="screen" type="text/css" href="whatever.css" rel="stylesheet"> 
```

这会将您的页面链接到样式。

对不起，如果我误解了

翅膀

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T01:46:40.763

好的，在您的 css 中，下面的样式没有右括号

```
.whiteCLR {
    color: #fff; /* White */ 
```

可能会有更多错误，但修复那个，然后我们会看到。

翅膀

# spring - Spring mvc中的RequestMapping

> ID：15148693
> 
> 赞同：1
> 
> 时间：2013-03-01T01:06:23.303
> 
> 标签：spring, model-view-controller

我想了解spring mvc中的requestmapping，我有一个应用程序，实际上我才刚刚开始使用spring mvc。

我有这两个网址

最后一个带有正斜杠的第一个似乎工作正常。 `http://localhost:8080/contactmanager/index/`

最后没有正斜杠的第二个不起作用

```
http://localhost:8080/contactmanager/index 
```

第二个给了我“HTTP Status 404 -”错误，如何强制应用程序在 url 末尾附加正斜杠？

控制器中的方法如下所示

```
@RequestMapping("/index")
public String listContacts(Map<String, Object> map) {

    map.put("contact", new Contact());
    map.put("contactList", contactService.listContact());
    //org.springframework.web.context.ContextLoaderListener
    //org.springframework.web.context.ContextLoaderListener
    //org.springframework.web.servlet.DispatcherServlet
    //org.springframework.web.servlet.DispatcherServlet
    return "contact";
} 
```

我的 web.xml 看起来像这样

```
<servlet>
    <servlet-name>contactmanager</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/contactmanager-servlet.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>contactmanager</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:26:33.097

使用java配置：

```
@Configuration
@EnableWebMvc
public class WebConfig {} 
```

或使用 XML 配置

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc.xsd">

<mvc:annotation-driven /> 
```

来自[Spring 的参考文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-ann-requestmapping)：

> 上面注册了一个**RequestMappingHandlerMapping**、一个 RequestMappingHandlerAdapter 和一个 ExceptionHandlerExceptionResolver （以及其他），以支持使用 @RequestMapping 、 @ExceptionHandler 等注解来处理带有注解的控制器方法的请求。

其中`RequestMappingHandlerMapping`有一个有用的布尔标志 - Javadoc 的说明：

```
/**
 * Whether to match to URLs irrespective of the presence of a trailing slash.
 * If enabled a method mapped to "/users" also matches to "/users/".
 * <p>The default value is {@code true}.
*/
public void setUseTrailingSlashMatch(boolean useTrailingSlashMatch) {
   this.useTrailingSlashMatch = useTrailingSlashMatch;
} 
```

由于默认情况下启用此功能，因此请确保您的配置使用`RequestMappingHandlerMapping`.

如果这对您没有帮助，请检查 spring 的默认 servlet 是否已配置：`<mvc:default-servlet-handler/>`并尝试添加到`web.xml`

```
<!-- Disables Servlet Container welcome file handling. Needed for compatibility with   Servlet 3.0 and Tomcat 7.0 -->
<welcome-file-list>
   <welcome-file></welcome-file>
</welcome-file-list> 
```

# z3 - Z3 可以处理正弦函数和指数函数吗

> ID：15148707
> 
> 赞同：0
> 
> 时间：2013-03-01T01:07:36.013
> 
> 标签：z3

基于对 的一些非线性约束`$a_k$,$b_k$`，我必须找到以下傅立叶级数表达式的可行集：

```
$ x(t)= {a_0+ \sum_{k=1}^{\infty}   (a_k\cos(2\pi f_0 kt)+(b_k\sin(2\pi f_0 kt))} 
```

而约束`$a_k$,$b_k$`和`$a_0$`是

```
$ L \leq a_0 \leq U $

$ Lower_bound \leq a_k^2+b_k^2 \leq Upper_bound 
```

我可以用 Z3 做到这一点吗？

除此之外，我可以将 Z3 用于具有复数幂的指数函数，例如在傅立叶变换表达式中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T03:06:22.677

不幸的是，Z3 还不支持超越函数，例如`sin`,`cos`和指数函数。当前版本只能处理非线性多项式约束。您可以考虑[MetiTarski 定理证明器](http://www.cl.cam.ac.uk/~lp15/papers/Arith/)。顺便说一句，MetiTarski 使用 Z3 来解除非线性多项式约束。

# c - 信号的“siginfo_t* info”导致分段错误

> ID：15148714
> 
> 赞同：0
> 
> 时间：2013-03-01T01:08:33.737
> 
> 标签：c, libc

我正在制作一个包含“Server.c”的程序，该程序等待客户端向其发送 SIGUSR1 消息 10 次，然后死掉，以及一个“client.c”，它向服务器发送 SIGUSR1 消息。

问题是，如果我尝试访问 siginfo_t* 信息，则会出现分段错误。

请注意，这是在我没有高权限的 Debian ssh 服务器上进行测试的。此代码在 Ubuntu 上运行良好的节点。

siginfo_t *info 会因为权限问题而失败吗？或者是否还有其他问题导致此可移植性问题。据我所知，libc 在任何 Linux 发行版（可能是 unix）中都应该是相当标准的。

有任何想法吗？

谢谢

服务器.c

```
#include <signal.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <assert.h>

int counter = 0;
pid_t *clients = 0;

void on_signal(int signo, siginfo_t *info, void * context)
{
    puts("SIGNAL RECEIVED");
    assert(clients);
    clients[counter] = info->si_pid;
    ++counter;
}

int main()
{
    struct sigaction action;
    sigset_t set;
    int recieveflag = 0;

    clients = (pid_t*)malloc(10 * sizeof(pid_t));

    sigemptyset(&set);
    sigaddset(&set, SA_SIGINFO);

    memset(&action, 0, sizeof(struct sigaction));
    action.sa_sigaction = on_signal;
    sigaction(SIGUSR1, &action, 0);

    while (counter < 10) {
        //sigprocmask(SIG_BLOCK, &set, 0);
        sigsuspend(&set);
    }

    puts("I'm done!");

    return 0;
} 
```

客户端.c：

```
#include <signal.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <assert.h>

int main(int argc, const char** argv)
{
    int server_id;

    assert(argc == 2);

    server_id = atoi(argv[1]);
    assert(server_id > 0);

    kill(server_id, SIGUSR1);  

    return 0;
} 
```

我尝试将 server.c 编辑为：

```
#include <signal.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <assert.h>

int counter = 0;
pid_t *clients = 0;

void on_signal(int sig)
{
    puts("SIGNAL RECEIVED");
}

int main()
{
    struct sigaction action;
    sigset_t set;
    int recieveflag = 0;

    clients = (pid_t*)malloc(10 * sizeof(pid_t));

    sigemptyset(&set);
    sigaddset(&set, SIGUSR1);

    memset(&action, 0, sizeof(struct sigaction));
    action.sa_flags = SA_SIGINFO;
    action.sa_handler = on_signal;
    sigaction(SIGUSR1, &action, 0);

    while (counter < 10) {
        sigprocmask(SIG_BLOCK, &set, 0);
        sigsuspend(&set);
        ++counter;
    }

    puts("I'm done!");

    return 0;
} 
```

现在它根本不再接收 SIGUSR1 事件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T01:22:36.177

sigaction 的基本行为是调用一个简单的回调，例如 : `void (*sa_handler)(int);`。因此，如果您想使用带有 3 个参数的 sigaction 句柄`void (*sa_sigaction)(int, siginfo_t *, void *);`，则必须使用标志 SA_SIGINFO 设置 struct sigaction 的 sa_flags 字段。看看手册页：[http](http://www.kernel.org/doc/man-pages/online/pages/man2/sigaction.2.html) ://www.kernel.org/doc/man-pages/online/pages/man2/sigaction.2.html谁很清楚。

# c++ - C++ 错误：声明中的显式限定

> ID：15148719
> 
> 赞同：1
> 
> 时间：2013-03-01T01:09:04.427
> 
> 标签：c++, g++

我正在尝试编写一个我无法在课堂上完成的教程，而且我很难找出我的错误。我以前从未见过明确的限定错误，所以我什至不知道从哪里开始。在使用命名空间时，我可以在网上找到此类错误的唯一资源，我认为我不是，至少不是明确的（命名空间 std 除外）。

我确定我在某个地方犯了一个愚蠢的错误，但这些是我得到的错误：

```
View.cpp:12:55: error: explicit qualification in declaration of ‘void promptForAnimals(Animal**, int&)’
View.cpp:53:25: error: explicit qualification in declaration of ‘void printDance(Animal*)’ 
```

这是我的 promptForAnimals 函数：

```
void::promptForAnimals(Animal* barn[], int& numAnimals)
{

  //Animal* barn[MAX_ANIMALS];
  int num;
  string name;

  cout << "How many birds? ";
  cin  >> num; cin.ignore();
  for (int i=0; i<num; i++) {
    cout << "Name " << i+1 << ":  ";
    getline(cin, name);
    barn[numAnimals++] = new Bird(name);
  }

  etc
  }

} 
```

我的 printDanceAnimal 是空的，只有：

```
void::printDance(Animal*)
{
} 
```

这些错误很可能与我的头文件有关，所以这是一个很好的衡量标准：

```
#ifndef VIEW_H
#define VIEW_H
#include "Animal.h"
#include "defs.h"
#include <iostream>
using namespace std;

class View
{
    public:
        View();
        ~View();
        void promptForAnimals(Animal**, int&);
        void printDance(Animal*);

};

#endif 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T01:12:19.573

您在这些函数定义中错过了类名：

更新：

```
void::promptForAnimals(Animal* barn[], int& numAnimals)
void::printDance(Animal*) 
```

到：

```
void View::promptForAnimals(Animal* barn[], int& numAnimals)
void View::printDance(Animal*) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T01:13:02.077

```
void::promptForAnimals(Animal* barn[], int& numAnimals) 
```

这是错误的。应该：

```
void View::promptForAnimals(Animal* barn[], int& numAnimals)
{
    // ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-30T15:04:02.060

当您明确指定已打开的命名空间时会出现此错误。

```
namespace SomeName {
    int SomeName::someFunc() { return 0; } //error
} 
```

我怀疑，空命名空间是始终打开的全局命名空间的名称，所以这就是为什么在你的情况下会出现这种错误，这相当于：

```
int ::someFunc() { return 0; } //error again 
```

# c++ - 写入二进制文件时空格过多

> ID：15148721
> 
> 赞同：1
> 
> 时间：2013-03-01T01:09:13.920
> 
> 标签：c++, struct, binaryfiles

尝试从结构写入二进制文件。不幸的是，它写出了过多的空格，因为我的字符串都是 20 个字符长。我会使用指针，但我的教科书明确指出不要使用指针（即记住：写入二进制文件时仅使用固定大小的数据成员。不要使用指针或包含指针作为数据成员的类）。

更糟糕的是，我试图打印的数字（即 8 和 40）只是显示为“A”和“B”。

输出看起来像这样

**Employee.dat**（我正在写入的二进制文件）

```
 Pauline             Nordin              A    B 
```

但是，我希望它看起来像这样。

```
Pauline Nordin 8.00 40.00 
```

这是我的代码：

**摘自protocol.cpp**

```
 //Open file
    std::ifstream BinaryOpen("employee.txt", std::ios::in /*| std::ios::out*/ | std::ios::binary);

    //Check if file is open
    if(BinaryOpen.is_open())
    {
        //Priming read
        BinaryOpen >> favoriteEmployees[numberOfEmployees].firstName;
        BinaryOpen >> favoriteEmployees[numberOfEmployees].lastName;
        BinaryOpen >> favoriteEmployees[numberOfEmployees].hourlyWage;
        BinaryOpen >> favoriteEmployees[numberOfEmployees].hoursWorked;

        numberOfEmployees++;
        //Read file
        while(!BinaryOpen.eof())
        {
            BinaryOpen >> favoriteEmployees[numberOfEmployees].firstName;
            BinaryOpen >> favoriteEmployees[numberOfEmployees].lastName;
            BinaryOpen >> favoriteEmployees[numberOfEmployees].hourlyWage;
            BinaryOpen >> favoriteEmployees[numberOfEmployees].hoursWorked;

            numberOfEmployees++;

            //Close file
            BinaryOpen.close();
        }

        //Write to binary file
        std::ofstream BinaryWrite("employee.dat", std::ios::out | std::ios::binary);

        //Check if file opened
        if(BinaryWrite.is_open())
        {
            BinaryWrite.write(reinterpret_cast <char *>(favoriteEmployees),
                              sizeof(Employee) * numberOfEmployees);
            //Close file
            BinaryWrite.close();
        }
        else
            std::cout << "\nWrite file did not open! " << std::endl;
    }
    else
        std::cout << "\nFile did not open! " << std::endl;
    } 
```

以下是我的程序的所有文件：

**employee.txt**（即我正在读取的文件）

```
Pauline Nordin 8.00 40.00 
```

**主文件**

```
#include <iostream>
#include "protocol.h"
#include "employee.h"

int main()
{
int menuChoice = 0;
int numberOfEmployees = 0;

//Create array of employees
Employee favoriteEmployees[NUMBER_OF_EMPLOYEES];

    //To prevent garbage being printed out
for(int i = 0; i < BUFFER_LENGTH; i++)
{
    favoriteEmployees[0].firstName[i] = 0;
    favoriteEmployees[0].lastName[i] = 0;
    favoriteEmployees[0].hourlyWage = 0;
    favoriteEmployees[0].hoursWorked = 0;
}

PrintMenu();
GetMenuChoice(menuChoice);
ExecuteMenuChoice(menuChoice, favoriteEmployees, numberOfEmployees);

return 0;
} 
```

**协议.h**

```
#ifndef PROTOCOL_H
#define PROTOCOL_H

#include "employee.h"

const int NUMBER_OF_EMPLOYEES = 10;

//Function declarations
void PrintMenu();
void GetMenuChoice(int &menuChoice);
void ExecuteMenuChoice(int menuChoice, Employee favoriteEmployees[], int &numberOfEmployees);

#endif 
```

**协议.cpp**

```
#include <fstream>
#include <iostream>
#include "employee.h"
#include "protocol.h"

//Function definitions
void PrintMenu()
{
std::cout << "\n\nChapter 17 -- Learn By Doings " << std::endl;
std::cout << "\n1\. Learn By Doing 17.2 " << std::endl;
std::cout << "2\. Learn By Doing 17.3 " << std::endl;
std::cout << "3\. Learn By Doing 17.4 " << std::endl;
std::cout << "4\. Exit " << std::endl;
std::cout << ' ' << std::endl;
}

void GetMenuChoice(int &menuChoice)
{
std::cin >> menuChoice;
}

void ExecuteMenuChoice(int menuChoice, Employee favoriteEmployees[], int &numberOfEmployees)
{
switch(menuChoice)
{
case 1:
    {
        //Open file in append mode
        std::ifstream BinaryOpen("name.txt", std::ios::app | std::ios::binary);

        //Open file in write mode
        /*std::ofstream BinaryOpen("name.txt", std::ios::out | std::ios::binary);*/

        //Check if file is open
        if(BinaryOpen.is_open())
        {
            //Perform appropriate file operatings
            std::cout << "\nFile opened! " << std::endl;

            //Close file
            BinaryOpen.close();
        }
        //Else
        else
            std::cout << "\nFile did not open! " << std::endl;
    }
    break;
case 2:
    {
    //Open file
        std::ifstream BinaryOpen("employee.txt", std::ios::in /*| std::ios::out*/ | std::ios::binary);

    //Check if file is open
    if(BinaryOpen.is_open())
    {
        //Priming read
        BinaryOpen >> favoriteEmployees[numberOfEmployees].firstName;
        BinaryOpen >> favoriteEmployees[numberOfEmployees].lastName;
        BinaryOpen >> favoriteEmployees[numberOfEmployees].hourlyWage;
        BinaryOpen >> favoriteEmployees[numberOfEmployees].hoursWorked;

        numberOfEmployees++;
        //Read file
        while(!BinaryOpen.eof())
        {
            BinaryOpen >> favoriteEmployees[numberOfEmployees].firstName;
            BinaryOpen >> favoriteEmployees[numberOfEmployees].lastName;
            BinaryOpen >> favoriteEmployees[numberOfEmployees].hourlyWage;
            BinaryOpen >> favoriteEmployees[numberOfEmployees].hoursWorked;

            numberOfEmployees++;

            //Close file
            BinaryOpen.close();
        }
        //Write to binary file
        std::ofstream BinaryWrite("employee.dat", std::ios::out | std::ios::binary);

        //Check if file opened
        if(BinaryWrite.is_open())
        {
            BinaryWrite.write(reinterpret_cast <char *>(favoriteEmployees),
                              sizeof(Employee) * numberOfEmployees);
            //Close file
            BinaryWrite.close();
        }
        else
            std::cout << "\nWrite file did not open! " << std::endl;
    }
    else
        std::cout << "\nFile did not open! " << std::endl;
    }
    break;
case 3:
    break;
case 4:
    break;
default:
    std::cout << "\nInvalid input.  Please enter an integer from 1 to 4\. " << std::endl;
}
}

**employee.h**
#ifndef EMPLOYEE_H
#define EMPLOYEE_H

const int BUFFER_LENGTH = 20;

struct Employee
{
char firstName[BUFFER_LENGTH];
char lastName[BUFFER_LENGTH];
float hourlyWage;
float hoursWorked;
};

#endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:32:19.027

这可能是一个不好的方法。就像宇宙先生在评论中所说的那样，这些数组中包含所有没有数据的额外空白。我会将案例 2 代码更改为更像以下内容：

```
//#include <iomanip> for the stream formatting used when printing to the file
case 2:
    {
        //Open file
        std::ifstream BinaryOpen("employee.txt", std::ios::in /*| std::ios::out*/ | std::ios::binary);

        //Check if file is open
        if(BinaryOpen.is_open())
        {
            //Read file
            char eol[10];
            while(BinaryOpen.good())
            {
                BinaryOpen >> favoriteEmployees[numberOfEmployees].firstName;
                BinaryOpen >> favoriteEmployees[numberOfEmployees].lastName;
                BinaryOpen >> favoriteEmployees[numberOfEmployees].hourlyWage;
                BinaryOpen >> favoriteEmployees[numberOfEmployees].hoursWorked;
                BinaryOpen >> eol;

                numberOfEmployees++;
            }

            //Close file
            BinaryOpen.close();

            //Write to binary file
            std::ofstream BinaryWrite("employee.dat", std::ios::out | std::ios::binary);

            //Check if file opened
            if(BinaryWrite.is_open())
            {
                for (int i = 0; i < numberOfEmployees; i++)
                {
                    BinaryWrite << favoriteEmployees[i].firstName << " ";
                    BinaryWrite << favoriteEmployees[i].lastName << " ";
                    BinaryWrite << setiosflags(std::ios::fixed) << std::setprecision(2) << favoriteEmployees[i].hourlyWage << " ";
                    BinaryWrite << setiosflags(std::ios::fixed) << std::setprecision(2) << favoriteEmployees[i].hoursWorked << std::endl;
                }

                //Close file
                BinaryWrite.close();
            }
            else
                std::cout << "\nWrite file did not open! " << std::endl;
        }
        else
            std::cout << "\nFile did not open! " << std::endl;
    }
    break; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:35:14.107

正如我上面的评论。我已经准备了一个简单的示例，它将让您了解如何执行此操作。

```
void SaveString(fstream& file_stream, string output)
{
    // Note that any good string class will have an implicit conversion to char*
    if (output.size() == 0)
        return;

    file_stream << (unsigned char)output.size();

    for (unsigned char i=0; i<output.size(); i++)
        file_stream << output[i];

    // DONE (in theory)
} 
```

然后，您需要做的就是在字符串的开头获取 1 个无符号字符，然后在 for 循环中使用该数字来获取字符并将它们添加到您加载的字符串中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T02:39:13.280

这就是它打印垃圾的原因：

```
BinaryWrite.write(reinterpret_cast <char *>(favoriteEmployees),
    sizeof(Employee) * numberOfEmployees); 
```

这些可能不是您看到的空格，而是 NULL 字符或其他不可打印的字符。

您需要做的是编写文件字段：

```
BinaryWrite << favoriteEmployees[i].firstName << " ";
BinaryWrite << favoriteEmployees[i].lastName << " ";
BinaryWrite << std::setprecision(2) << favoriteEmployees[i].hourlyWage << " ";
BinaryWrite << std::setprecision(2) << favoriteEmployees[i].hoursWorked << std::endl; 
```

调用这些二进制文件可能有点误导，因为它们实际上只包含文本。一个实际的二进制文件将包含固定长度、以长度为前缀或以零结尾的字符串，以及数字的二进制表示（您在原始代码中无意中这样做了）。

# ios - 根据屏幕大小设置 UIView 高度

> ID：15148725
> 
> 赞同：1
> 
> 时间：2013-03-01T01:10:04.747
> 
> 标签：ios, xcode, uiview, screen, screen-size

我在桌子下面有一个 UIView。我必须为 iPhone 4S 或 5 设置 UIView 高度。我尝试使用

```
- (void) regolaViewPeriPhone {
    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
    {
        CGSize result = [[UIScreen mainScreen] bounds].size;
        if(result.height == 480)
        {
            CGRect frame = CGRectMake(0, 210, 320, 245);
            _pickerContainerView.frame = frame;
        }
        if(result.height == 568)
        {
            CGRect frame = CGRectMake(0, 210, 320, 290);
            _pickerContainerView.frame = frame;
        }
    }
} 
```

但它不起作用，什么是正确的方法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:15:18.427

`[ [ UIScreen mainScreen ] applicationFrame ]`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-01T05:22:59.513

这是“根据屏幕大小设置 UIView 高度”的方法

```
CGRect screenBounds = [[UIScreen mainScreen] bounds];
if (screenBounds.size.height == 568)
{
  //Do u r stuff here for Iphone 5
}
else if(screenBounds.size.height==480)
{
  //Do u r stuff here for Iphone 4s
} 
```

//如果我的答案是正确的然后投票给我...

# php - 如何将 Ajax/JQuery 实现到现有的 PHP MYSQL 分页脚本？

> ID：15148728
> 
> 赞同：4
> 
> 时间：2013-03-01T01:10:33.563
> 
> 标签：php, jquery, ajax, pagination

下面是一个显示 MySQL 数据库内容的工作分页脚本。我需要让页面在容器“#content”中无缝加载，而不是刷新整个页面。我广泛搜索了几个小时，但我遇到的任何教程都没有帮助我在这个脚本上实现 Ajax/JQuery。

这是我用来显示我的文章+分页的代码。

```
<div id="content">
<?php
include('db.php');

$stmt = $db->query('SELECT * FROM db');
$numrows = $stmt->rowCount();
$rowsperpage=21;
$totalpages=ceil($numrows/$rowsperpage);

if(isset($pageid)&&is_numeric($pageid)){$page=$pageid;}else{$page=1;} 
if($page>$totalpages){$page = $totalpages;} 
if($page<1){$page=1;}

$offset=($page-1)*$rowsperpage;

$stmt=$db->prepare("SELECT * FROM db ORDER BY ID DESC LIMIT ?,?");
$stmt->bindValue(1, "$offset", PDO::PARAM_STR);
$stmt->bindValue(2, "$rowsperpage", PDO::PARAM_STR);

if($stmt->execute()) {
while ($row = $stmt->fetch()) {
echo '

<article>
article here
</article>

';}}

$range=4;
echo'
<div id="pagination">';

if($page>1){
echo "
<a href='http://www.domain.com/1/'><<</a>";
$prevpage = $page - 1;
echo "
<a href='http://www.domain.com/$prevpage/'><</a>";
}

for ($x = ($page - $range); $x < (($page + $range) + 1); $x++) {
if(($x>0)&&($x<= $totalpages)){
if($x==$page){
echo'
<span class="current">'.$x.'</span>';
}
else{echo"<a href='http://www.domain.com/$x/'>$x</a>";}
}
}

if($page!=$totalpages){
$nextpage=$page+1;
echo"
<a href='http://www.domain.com/$nextpage/'>></a>";
echo "
<a href='http://www.domain.com/$totalpages/'>>></a>";
} 
echo '
</div>';
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T03:21:59.983

您的设置有点不清楚，但请耐心等待。

我将假设在客户端您知道何时加载下一页（即用户单击按钮或滚动到页面末尾等......）我还将假设 PHP 代码您发布的内容在其自己的文件中，并且仅输出您在问题中发布的内容（也就是它仅输出文章的 HTML，没有其他内容，没有包装器，没有任何内容，如果不是这样的话。

您要做的是使用 jQuery（从您的问题看来，您的网站上已经有了它，所以添加另一个库并不是太禁忌）向这个 PHP 页面发出 AJAX 请求。然后 PHP 回显您发布的内容，然后 jQuery 将其插入到`#content`div 内的页面上。

首先要注意：我不建议让您的 PHP 页面输出内容 div，我建议将其保留在客户端，并且仅将其内容更改为脚本返回的内容。

要加载新内容，您可以在客户端使用此 javascript 函数：

```
function makePaginationRequest( pagenum = 1 ) {
    // Make ajax request
    $.ajax("test2.php", {
        // Data to send to the PHP page
        data: { "pagenum": pagenum },

        // Type of data to receive (html)
        dataType: 'html',

        // What to do if we encounter a problem fetching it
        error: function(xhr, text){
            alert("Whoops! The request for new content failed");
        },

        // What to do when this completes succesfully 
        success: function(pagination) {
            $('#content').html(pagination);
        }
    })
} 
```

您可以将需要传递给服务器的任何其他参数放在“数据”对象（`data: { "pagenum": pagenum },`键值形式）中。从示例中可以看出，您将页码传递给此函数，它传递了“pagenum”向服务器请求变量。

显然，您将希望实现更好的错误处理程序。以及将“test2.htm”文件名更改为您的 PHP 脚本的文件名。

**这样做的更好方法**

我觉得不得不提一下：

上面的方式（你要求的）确实是一种混乱的方式。每当您从服务器请求 AJAX 数据时，服务器应该返回内容，而不是标记。然后，您应该将此内容插入到客户端的标记中。

为此，您将修改您的 PHP 脚本，首先将所有内容放入一个数组（或多个文章的数组数组）中，如下所示：

```
while ($row = $stmt->fetch()) {
    $output_array[] = array(
        "post_title" => $row["title"],
        "post_date" => $row["date"],
        // etc....
    );
} 
```

然后像这样回显它：

```
die(json_encode($output_array)); 
```

然后修改你的json请求：

```
function makePaginationRequest( pagenum = 1 ) {
    $.ajax("test2.htm", {
        data: { "pagenum": pagenum },
        dataType: 'json',
        error: function(xhr, text){
            alert("Whoops! The request for new content failed");
        },
        success: function(pagination) {
            // Empty the content area
            $('#content').empty();

            // Insert each item
            for ( var i in pagination ) {
                var div = $('<article></article>');
                div.append('<span class="title">' + pagination[i].post_title + "</span>");
                div.append('<span class="date">' + pagination[i].post_date + "</span>");
                $('#content').append(div)
            }
        }
    })
} 
```

jQuery 会自动将这个 JSON 输出解析为一个原生 javascript 对象。

采用这种让客户端进行标记的方法可以减轻服务器的大量负载，并且需要更少的带宽。

深思熟虑，希望有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T03:43:08.873

如果您想对原始脚本进行最少的重写，那么 jQuery **[.load()](http://api.jquery.com/load/)**方法可能是您的最佳选择。您基本上只需要为`id`包含所有文章的元素提供一个；像这样的东西应该工作：

```
<div id="container">

    <div id="articles-container">

        <article> ... </article>

    </div>

</div>   

<div id="pagination">
    <a href="some-valid-url">1</a> ...
</div> 
```

然后添加一个`script`标签和一些 jQuery 代码：

```
<script>

    $(function(){

        $('#pagination').on('click', 'a', function(e){

            e.preventDefault();
            var url = $(this).attr('href');
            $('#container').load(url + ' #articles-container');

        });

    });

</script> 
```

`.load()`将获取页面，如果您将可选片段添加到 URL，它会将结果过滤到与片段匹配的元素。

**编辑：**

好的，因此，要使其与您当前的分页一起使用，您需要手动交换元素。因此，假设您生成的标记看起来像这样：

```
<div id="pagination">
    <a href="/1">1</a>
    <span class="current">2</span>
    <a href="/3">3</a>
    <a href="/4">4</a>
    <a href="/5">5</a>
</div> 
```

我们希望这在`load()`完成后发生，所以我们需要向它添加一个回调函数。我还添加了对单击元素的自引用，我们稍后需要它：

```
$(function(){

    $('#pagination').on('click', 'a', function(e){

        e.preventDefault();
        var $this = $(this);
        var url = $this.attr('href');
        $('#container').load(url + ' #articles-container', function(response, status, jqxhr){

        });

    });

}); 
```

在回调内部是我们开始操作的地方`#pagination`。第一部分很简单：

```
var $curr = $('#pagination span.current');
var page = $curr.text();

$curr.replaceWith('<a href="/' + page + '">' + page + '</a>'); 
```

现在我们需要替换我们刚刚点击的链接：

```
$this.replaceWith('<span class="current">' + $this.text() + '</span>'); 
```

Et viola!，您的分页应该更新。这是整个更新：

```
$(function(){

    $('#pagination').on('click', 'a', function(e){

        e.preventDefault();
        var $this = $(this);
        var url = $this.attr('href');
        $('#container').load(url + ' #articles-container', function(response, status, jqxhr){

            var $curr = $('#pagination span.current');
            var page = $curr.text();

            $curr.replaceWith('<a href="/' + page + '">' + page + '</a>');

            $this.replaceWith('<span class="current">' + $this.text() + '</span>');
        });

    });

}); 
```

# python - xlwt 模块 - 保存 xls unicode 错误

> ID：15148729
> 
> 赞同：1
> 
> 时间：2013-03-01T01:10:58.903
> 
> 标签：python, character-encoding, xlwt

我正在尝试使用 xlwt 模块保存一些文本，创建新的 xls 文档并在那里保存文本。到目前为止它工作得很好，直到我遇到 unicode 文本：例如简单的字符串'80°'。

当我打电话时，`book.save('simple.xls')`我得到`UnicodeDecodeError: 'ascii' codec can't decode byte 0xc2`。有什么办法可以避免这种情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:22:00.213

不要编写常规字符串，而是编写 Unicode 字符串。例如，而不是

```
ws.write(r, c, '80°') 
```

做

```
ws.write(r, c, '80°'.decode('cp1252')) 
```

（当然，为您的数据选择合适的编码。）

# nasm - nasm 从另一个文件调用子例程

> ID：15148730
> 
> 赞同：3
> 
> 时间：2013-03-01T01:11:03.597
> 
> 标签：nasm, subroutine

我正在做一个项目，该项目将我编写的子程序附加到老师包含的主文件中。他给了我们使我们的子程序全局化的说明，但显然我是个白痴。这两个 asm 文件位于同一个文件夹中，我正在使用`nasm -f elf -g prt_dec.asm`，`ld prt_dec`然后对 main.asm 执行相同的操作。这是main.asm中的相关代码：

```
 SECTION .text                   ; Code section.
global  _start                  ; let loader see entry point
extern  prt_dec

_start:
mov     ebx, 17
mov     edx, 214123
mov     edi, 2223187809
mov     ebp, 1555544444

mov     eax, dword 0x0
call    prt_dec
call    prt_lf 
```

当我使用时，该行`call prt_dec`会抛出“对 prt_dec 的未定义引用”`ld main.o`

这是我的 prt_dec.asm 中的代码段：

```
 Section .text
    global prt_dec
    global _start

start:
prt_dec:
      (pushing some stuff)
L1_top:
(code continues) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T04:42:48.500

您想在另一个 asm 文件或目标文件中调用例程吗？如果您正在组装 prt_dec.asm 并链接多个 asm 文件以在您的主程序中使用，这里是一个示例，2 个 asm 文件组装并链接在一起... *** 注意 *** `hello.asm` ****没有 ***有一个开始标签！

主 asm 文件：hellothere.asm

```
sys_exit    equ 1

extern Hello 
global _start 

section .text
_start:
    call    Hello

    mov     eax, sys_exit
    xor     ebx, ebx
    int     80H 
```

第二个 asm 文件：hello.asm

```
sys_write   equ 4
stdout      equ 1

global Hello

section .data
szHello     db  "Hello", 10
Hello_Len   equ ($ - szHello)

section .text
Hello:
        mov     edx, Hello_Len
        mov     ecx, szHello
        mov     eax, sys_write
        mov     ebx, stdout
        int     80H   
    ret 
```

生成文件：

```
APP = hellothere

$(APP): $(APP).o hello.o
    ld -o $(APP) $(APP).o hello.o

$(APP).o: $(APP).asm 
    nasm -f elf $(APP).asm 

hello.o: hello.asm
    nasm -f elf hello.asm 
```

现在，如果您只想将代码分成多个 asm 文件，您可以将它们包含到您的主源代码中：`%include "asmfile.asm"`在主源文件的开头加上并组合和链接您的主文件。

# c# - 使用委托来集中样板代码的通用函数？

> ID：15148731
> 
> 赞同：1
> 
> 时间：2013-03-01T01:11:10.177
> 
> 标签：c#, generics, delegates

我正在编写一个类似于 WCF 接口代理的类，但其中包含一些专门但样板的额外代码。我想提取样板代码并使用通用或其他机制来包装对类的内部实例的调用。

```
public interface IMyInterface
{
  long fn1(int param1, int param2);
}

public class MyInterfaceProxy : IMyInterface
{
  // generated code
}

public class MyClass : IMyInterface
{
  private MyInterfaceProxy _myProxy; // implements IMyInterface
  public long fn1(int param1, int param2)
  {
    long result = null;
    CallMethod(
               delegate(IMyInterface svc)
               {
                   result = svc.fn1(param1, param2);
               });
    return result;
  }

  private T CallMethod( ??? )
     where T : class
  {
    T result = null;

    // some boilerplate code
    // Call the delegate, passing _myProxy as the IMyInterface to act on
    // some more boilerplate code

    return result;
  } 
```

}

如果有帮助，样板代码可以表示重试逻辑、超时行为、标准化异常处理行为等。

所以这是我的问题：

1.  是否有解决此问题的标准或首选方法？
2.  如果泛型是首选机制，那么 CallMethod 函数的签名是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T02:25:12.113

我想这就是你要找的。组合函数还有很多事情要做。这是函数式编程范式的表面抓手，现在我们可以在 c# 中使用其中的一些真的很棒。

编辑：还添加了匿名函数实现以更好地模拟您的委托场景。

```
class Program
{
    static void Main(string[] args)
    {
        string resFromFunctionToBeWRapped = CallMethod(() => FunctionToBeWrapped());

        int resFromAnon = CallMethod(() => {
            Console.WriteLine("in anonymous function");
            return 5;
        } );

        Console.WriteLine("value is {0}", resFromFunctionToBeWRapped);
        Console.WriteLine("value from anon is {0}", resFromAnon);

        Console.ReadLine();
    }

    private static TResult CallMethod<TResult>(Func<TResult> functionToCall) //where T : class
      {
        Console.WriteLine ("in wrapper");

        var ret = functionToCall();

        Console.WriteLine("leaving wrapper");

        return ret;
      }

    private static string FunctionToBeWrapped()
    {
        Console.WriteLine("in func");
        return "done";
    }

} 
```

# html - HTML if 语句

> ID：15148732
> 
> 赞同：2
> 
> 时间：2013-03-01T01:11:18.180
> 
> 标签：html

我正在查看具有以下内容的 HTML 页面：

```
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"><![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"><![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"><![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"><!--<![endif]--> 
```

最后一个 if 条件对我来说有点奇怪。评论等的嵌套似乎已关闭。这是正确的：`<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"><!--<![endif]-->`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T01:12:34.000

是的，它是正确的——如果它不是旧版 IE，它就无法理解条件注释，所以它是一种语法故障转移。显示`gte IE 9`m$ 在该浏览器版本中不推荐使用条件注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T01:12:16.307

是的，这是正确的。它看起来很有趣，因为非 IE 浏览器需要正确忽略它。

如果浏览器不是IE，会正常解释。如果是 IE，它不会解释`if`和之间的内容`endif`。

# linux - 从 Linux 终端查询 Web 服务器

> ID：15148736
> 
> 赞同：0
> 
> 时间：2013-03-01T01:11:51.847
> 
> 标签：linux, http, web, fedora

是否可以在 Linux 中从终端查询网页？

编辑：更具体地说，我的意图是将 POST 数据发送到 php 页面并显示返回文本。hld619 向我展示了 cURL 是什么，它运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T01:14:13.463

尝试寻找[curl](http://curl.haxx.se/)，如果您正在寻找帖子或获取类型请求，也可以这样做

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T01:14:36.447

您可以在 Linux 中使用[Lynx](http://en.wikipedia.org/wiki/Lynx_%28web_browser%29)浏览 Web 。这是一个非常酷的基于终端的网络浏览器。如果您正在运行 Debian（或其他`apt`拥有操作系统），您可以运行：

```
sudo apt-get install lynx 
```

为拿到它，为实现它。`sudo`如果您具有 root 访问权限，您将排除。

如果“查询网站”是指获取其来源，则可以使用`curl`或`wget`。此外，你最喜欢的编程语言可能有工具可以破解网站的源代码。

一些流行的是：

*   Python - urllib2
*   红宝石 - 网络/http
*   Java - JSoup

# ruby-on-rails - 将记录的属性添加到 ID 之前的 URL

> ID：15148738
> 
> 赞同：0
> 
> 时间：2013-03-01T01:12:15.017
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing

我正在尝试将 Rails 中记录的特定属性添加到 URL，例如：

```
domain.com/share/5 
```

（`5`记录 ID 在哪里）类似于：

```
domain.com/share/johnsmith/5 
```

where`johnsmith`存储在记录中`5`。我在这两条路线之间交替但没有成功：

```
get "/share/:name/:id" => "share#show"
resources :share, :only => [:show] 
```

在这两种方法之间：

```
share_path(doc.user.name, doc)
share_path(doc) 
```

中的显示方法`ShareController`非常标准。

* * *

**问题：**

`share_path(doc.user.name, doc)`在视图中使用会生成指向 的链接`/share/johnsmith.5`，而不是`/share/johnsmith/5`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:22:51.620

`get "/share/:name/:id" => "share#show"`应该做的工作。但是你可能要看看 中的路线顺序`routes.rb`，也许 Rails 走错了路线？

查看正在发生的事情的最佳提示：

在您的浏览器中调用 URL（或使用`curl`或其他），然后查看您开始的控制台`rails s`（或`rails server`）。

在那里你应该看到这样的东西：

```
Processing by ShareController#show
Parameters: {"id"=>"5", "name"=>"johnsmith"} 
```

关于`path`方法：

只需使用`rake routes`，它会告诉您哪些路径方法可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:45:37.120

不知道发生了什么，但它自己解决了这个问题：

```
get "/share/:name/:id" => "share#show", :as => :share
share_path(doc.user.name, doc) 
```

我根本不明白`.`and`/`问题。我重新启动了一切，它就消失了。

# c# - 如何关闭 TextInputPanel

> ID：15148740
> 
> 赞同：1
> 
> 时间：2013-03-01T01:12:19.370
> 
> 标签：c#, wpf

我正在移植一个 WPF 应用程序以在 Windows 8 平板电脑上运行。

我想让 TextInputPanel 在文本框获得焦点时出现，并在失去焦点时消失。

让它出现没问题，但我似乎无法让它接近。

我已经在进程上尝试了 Kill 和 CloseMainWindow，但得到了 InvalidOperationException - 由于进程已退出，无法处理请求。

我尝试了 SendMessage 但没有。

有任何想法吗？

一些 WinForm 测试代码如下：

```
using System;
using System.Diagnostics;
using System.Runtime.InteropServices;
using System.Windows.Forms;

namespace VirtualKeyboard
{
    public partial class Form1 : Form
    {
        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = false)]
        static extern IntPtr SendMessage(IntPtr hWnd, UInt32 Msg, IntPtr wParam, IntPtr lParam);

        static uint WM_CLOSE = 0x0010;
        static uint WM_QUIT = 0x0012;

        public Form1()
        {
            InitializeComponent();
        }

        private Process _keyboardProcess;

        private void Open_Click(object sender, EventArgs e)
        {
            _keyboardProcess = Process.Start(@"C:\Program Files\Common Files\microsoft shared\ink\tabtip.exe");
        }

        private void Close_Click(object sender, EventArgs e)
        {
            // tried all these
            //SendMessage(_keyboardProcess.Handle, WM_CLOSE, IntPtr.Zero, IntPtr.Zero);
            //SendMessage(_keyboardProcess.Handle, WM_QUIT, IntPtr.Zero, IntPtr.Zero);
            //_keyboardProcess.Kill();
            //_keyboardProcess.CloseMainWindow();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T02:14:04.697

正如我在评论中提到的，TabTip 立即产生 2 个其他进程，然后退出调用进程。

遍历所有打开的进程并关闭一个名为 TabTip 的进程。这将关闭两个进程。

```
using System;
using System.Diagnostics;
using System.Windows.Forms;

namespace VirtualKeyboard
{
    public partial class Form1 : Form
    {

        public Form1()
        {
            InitializeComponent();
        }

        private void Open_Click(object sender, EventArgs e)
        {
            Process.Start(@"C:\Program Files\Common Files\microsoft shared\ink\tabtip.exe");
        }

        private void Close_Click(object sender, EventArgs e)
        {
            Process[] processlist = Process.GetProcesses();

            foreach(Process process in processlist)
            {
                if (process.ProcessName == "TabTip")
                {
                    process.Kill();
                    break;
                }
            }
        }

    }
} 
```

# twitter-bootstrap - Twitter Bootstrap 折叠菜单不起作用

> ID：15148747
> 
> 赞同：2
> 
> 时间：2013-03-01T01:12:37.523
> 
> 标签：twitter-bootstrap, responsive-design, collapse, nav

我在这里有点迷路，主要是因为我不知道 jquery，但我正在尝试使用引导折叠 jquery 插件来让移动优先菜单工作。我没有使用引导 css，我需要使用它吗？是否可以在没有任何引导 css 的情况下仅使用 jquery 插件？当我按下三栏菜单图标时，没有任何反应。我的 css 目前正在隐藏和显示三栏菜单图标——我不知道这是否与 jquery 中的任何内容竞争。

```
<body>  
    <section class="grid sticky">
        <div class="container"> 
            <header class="grid twelve header">
                <a href="#" class="menuButton btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <div class="iconBar"></div>
                    <div class="iconBar"></div>
                    <div class="iconBar"></div>
                </a>
                <div class="logoHolder">
                    <a class="logo" href="index.html">
                        <img src="img/logo/ks_logo.svg"> 
                    </a>
                </div>
                <!-- Main Nav, hidden below 768 px -->

                <nav class="mainNav not-phone not-phoneSM">
                    <ul class="nav">
                        <li><a href="work.html">Work</a></li>
                        <li><a href="about.html">About</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </nav>
            </header>
        </div>  
    </section>
    <!-- Mobile Main Nav, called upon to relieve when screen is at 768 px -->
    <section class="not-desktop not-tablet">
            <header>
                <nav class="mobileMainNav nav-collapse collapse">
                    <ul>
                        <li><a href="work.html">Work</a></li>
                        <li><a href="about.html">About</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </nav>
            </header>
    </section>

    <!-- jQuery via Google + local fallback, see h5bp.com -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <!-- Bootstrap jQuery Plugins, compiled and minified -->
    <script src="bootstrap2/js/bootstrap.min.js"></script>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:56:46.260

Buddy 在引导程序的 css 文件中有 Style 类，下拉 js 使用这些类来工作。因此，要么为它们编写自定义样式，要么使用默认样式。我在下面提到的很少：

```
 .navbar .nav > li > .dropdown-menu:after {

       }
     .navbar .nav > li > .dropdown-menu:before {

          }
     .dropdown-menu > li > a {

         }
     .dropdown-menu{

         }
     .dropdown-toggle {
     }
    .dropdown{
          } 
```

将类粘贴`dropdown`到您想要具有下拉切换功能的 Li 元素上。

并附`dropdown-menu`加到`ul`要显示的下拉菜单中。

例子 ：

```
 <ul class="nav">
        <li class="dropdown">
        <a data-toggle="dropdown" class="dropdown-toggle" href="#">Hom <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                      <li><a href="#">Action</a></li>
                      <li><a href="#">Another</a></li>
                      <li><a href="#">Some</a></li>
                      </ul>

        </li>
 </ul> 
```

您可以完全重写这些样式并在您的项目中使用它们。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T01:39:43.587

我认为你需要在最后添加

```
<script src="bootstrap2/js/bootstrap-dropdown.js"></script> 
```

[http://twitter.github.com/bootstrap/assets/js/bootstrap-dropdown.js](http://twitter.github.com/bootstrap/assets/js/bootstrap-dropdown.js)的来源

# c++ - 指向类成员的指针作为模板参数

> ID：15148749
> 
> 赞同：25
> 
> 时间：2013-03-01T01:13:01.817
> 
> 标签：c++, templates, c++11, c++14, pointer-to-member

我想使用指向类成员的指针作为模板参数，如下所示：

```
template <class Class, class Result, Result Class::*Member>
struct MyStruct {
    // ...
}; 
```

使用这个结构就好`MyStruct<SomeClass, SomeResult, &SomeClass::value> variable`了，但我不喜欢我必须指定`SomeClass`and `SomeResult`。

如果可能的话，我想使用`MyStruct<&SomeClass::value> variable`它，但不会失去传递任何类并具有任何结果类型的能力。

我尝试了以下方法，但语法是非法的：

```
template <class Class, class Result>
template <Result Class::*Member>
struct MyStruct {
    // ...
}; 
```

> 错误：模板参数列表过多

我尝试使用辅助函数（实际上在 Clang 中有效，但被 GCC 拒绝）：

```
template <class Class, class Result>
static constexpr auto makeMyStruct(Result Class::*member) ->
MyStruct<Class, Result, member> {
    // ...
} 
```

> 错误：在函数体外部使用参数“成员”
> 错误：模板参数 3 无效

**是否有可能有一个简单`MyStruct<&SomeClass::value>`的，如果是这样，如何？**

没有解决我的问题的相关问题：

*   [指向类成员的指针作为模板参数](https://stackoverflow.com/q/6880832/)
*   [constexpr 和返回模板函数的 C++0x 错误](https://stackoverflow.com/q/6740671/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-01-04T23:43:54.157

在 c++17 中，添加了`auto`in 模板参数 ( [P0127)](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0127r2.html)，我认为您现在可以这样做：

```
template<auto value>
struct MyStruct {};

template<typename Class, typename Result, Result Class::* value>
struct MyStruct<value> {
    // add members using Class, Result, and value here
    using containing_type = Class;
};

typename MyStruct<&Something::theotherthing>::containing_type x = Something(); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-19T20:05:11.307

本文针对下一个即将推出的 C++ 标准提出了我的问题的答案：

*   [https://isocpp.org/files/papers/n3601.html](https://isocpp.org/files/papers/n3601.html)

提出了这种语法：

```
template<using typename T, T t>
struct some_struct { /* ... */ };

some_struct<&A::f> x; 
```

对新句法结构的需求表明您现在无法做到这一点。

我希望n3601会被接受。:-)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-07-19T07:47:04.547

这可能是 C++11 中的解决方案：

您可以定义以下泛型类型特征：

```
template<class T>
struct remove_member_pointer {
  typedef T type;
};

template<class Parent, class T> 
struct remove_member_pointer<T Parent::*> {
  typedef T type;
};

template<class T>
struct baseof_member_pointer {
  typedef T type;
};

template<class Parent, class T>
struct baseof_member_pointer<T Parent::*> {
  typedef Parent type;
}; 
```

现在您可以为每个结构定义一个额外的 4 行包装宏：

```
template<class Class, class Result, Result Class::*Member>
struct _MyStruct {
  // ...
};

#define MyStruct(MemberPtr) \
  _MyStruct<baseof_member_pointer<decltype(MemberPtr)>::type, \
            remove_member_pointer<decltype(MemberPtr)>::type, \
            MemberPtr> 
```

...并以下列方式使用它：

```
MyStruct(&SomeClass::value)  myStruct; // <-- object of type MyStruct<&SomeClass:value> 
```

我将其用作中间解决方案，直到我们切换到 C++17。

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2013-03-03T05:24:52.357

使您的结果类成为您的模板类的子类。假设指针成员是公共结果类的对象或其他任何对象，您可以通过执行类似这样的操作来访问任何对象

```
template <stuff for this class> :: public result
{
    blah
} 
```

# google-app-engine - 使用 bulkloader 将 dict 导入 App Engine ndb.JsonProperty

> ID：15148756
> 
> 赞同：3
> 
> 时间：2013-03-01T01:13:52.813
> 
> 标签：google-app-engine, app-engine-ndb, bulkloader

我正在使用批量加载程序将数据上传到我的 App Engine 数据存储中。

我似乎无法将字典存储到 JsonProperty 中，并且出现以下错误：

> BadValueError：不支持的属性类型 near_countries：<type 'dict'>

我的模型将此属性定义为 JsonProperty：

> near_countries = ndb.JsonProperty()

我发现的唯一解决方法似乎是存储我的值的 json.dumps() ，但我想这基本上存储了字典的字符串表示，而不是字典本身。

我对 JsonProperty 的理解是它需要一个 python 对象作为值，我不应该为 ndb 将处理的 JSON 序列化而烦恼。我对么？

> Value 是一个 Python 对象（例如一个列表或一个字典或一个字符串），可以使用 Python 的 json 模块进行序列化；Datastore 将 JSON 序列化存储为 blob。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:27:11.240

经过大量的尝试和错误以及在谷歌上搜索类似的帖子后，我设法找到以下帖子，引导我找到以下解决方案：

[http://blog.thekensta.com/2012/06/google-app-engine-bulk-loader-and-ndb.html](http://blog.thekensta.com/2012/06/google-app-engine-bulk-loader-and-ndb.html)

简而言之，JsonProperties 存储为 blob，我们需要向 bulkloader 传递正确的转换方法以从 json 字符串生成 blob。我们可以使用`transform.blobproperty_from_base64`（来自`google.appengine.ext.bulkload.transform`模块）

所以我将我的列表或字典转换为字符串 JSON 字符串表示形式，然后将其转换为 blob，以便批量加载程序可以存储它：

> import_transform: "lambda x: transform.blobproperty_from_base64(base64.b64encode(bytes(json.dumps(x.strip(',').split(',')))))"

同样的推理修复了保存为字符串的 TextProperty（在我上面的评论中提到）。您需要`db.Text`用作转换功能：

> import_transform: db.Text

为了保存`repeated=True`TextProperty，我实际上还必须将其转换为 blob：

> import_transform: "lambda x: transform.blobproperty_from_base64(base64.b64encode(bytes(json.dumps(x.strip(',').split(',')))))"

（在上面的示例中，我实际上将逗号分隔的字符串转换为要存储在`TextProperty(repeated=True)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T01:31:56.603

一般来说，您对 JsonProperty 是正确的。然而，散装装载机是特殊的。老实说，我不太了解它是如何工作的，但在这种情况下，如果它要求您自己调用 json.dumps() ，我不会感到惊讶。

# javascript - 调试时忽略prototype.js

> ID：15148758
> 
> 赞同：0
> 
> 时间：2013-03-01T01:13:57.670
> 
> 标签：javascript, debugging, prototypejs

我正在使用一些基于 Prototype.js 构建的现有 Javascript 代码。我需要弄清楚这段代码中发生了什么。理想情况下，我可以使用 Firebug 中的“Break on next”功能。不幸的是，这个特性是多余的，因为所有的事件处理程序都包裹在 Prototype.js 周围。如何获得忽略某些文件的“下一个中断”功能（我不在乎它是在 Firefox 还是 Chrome 中），这样它只会在某个文件中执行的下一行中断？

作为参考，我在使用 Break on next 之后花了很长时间使用“Step into”，希望最终达到我需要调试的代码。我实际上从来没有达到我自己的代码，但我知道它是由于浏览器中的变化而执行的。难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:32:03.437

我希望你能告诉我你想做什么，这样我就知道要解释什么了:)这是一个快速的通用答案，对于 Firebug：

*   Net 面板的左上方有一个“Break on XHR”按钮。单击它，任何 XMLHttpRequest（即 ajax 请求）都将停止执行并将您放入调试器。

*   同样，右键单击 HTML 面板上的任何元素并选中“Break on...”框之一以在元素以某种方式更改时中断。

当您要调试的事情发生时，您只需查看调用堆栈并查看最终触发断点的代码。

# javascript - 您可以在不使用三元组的情况下连接 if 语句吗？

> ID：15148760
> 
> 赞同：1
> 
> 时间：2013-03-01T01:14:09.380
> 
> 标签：javascript

我想像这样连接一个 if 语句：

```
policeRecord = "Hi" + (if (x < crimes.length) {", ";}); 
```

我知道你可以使用三元来做到这一点：

```
policeRecord = "Hi" + ((x < crimes.length) ? ", " : ""); 
```

但是你能用一个完整的 if 语句来做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T01:16:57.227

`if`是一个**声明**。语句不能用作**表达式**的一部分。

通常，表达式由运算符和子表达式组成并创建值。语句不属于这些类别中的任何一个，它们不是表达式，也不是运算符。

有关更多技术信息，请查看 ECMAScript 规范：[http](http://es5.github.com/) ://es5.github.com/ 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T01:15:39.333

不，这是无效的 JavaScript 语法，所以你不能这样做。

我不确定您为什么要这样做，因为我实际上认为它会导致清晰度下降（那里有很多混乱的符号）。

如果你想在不使用三元运算符的情况下做一些花哨的单线来迷惑人们，你可以根据元素长度进行数组/字符串操作：

```
policeRecord = "Hi" + (new Array(+(x < crimes.length) + 1)).join(', '); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T02:11:08.940

您还可以创建一个函数*à la* SQL `COALESCE`（但检查`true`而不是`NULL`）：

```
function iftrue(checkThis, returnIfTrue, returnIfFalse) {
    if(checkThis) {
        return returnIfTrue;
    }
    return returnIfFalse;
}
policeRecord = "Hi" + iftrue(1 < crimes.length, ", ", ""); 
```

不过，不确定那会好多少。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T01:29:57.717

`if`是一个**语句**并且不返回值，而是`?`一个**操作符**。

在`function`值得注意的情况下，有一个函数语句和一个函数运算符，所以你可以这样做

```
function () { }  // function statement 
```

你也可以做

```
var fn = function () { };  // function operator 
```

简短的回答：你不能替换或互换 if 和 ?。您*可以*创建一个执行此操作的函数，但通过函数运行并没有原生表达式的性能。

# php - 确定从坐标到坐标的路线

> ID：15148765
> 
> 赞同：0
> 
> 时间：2013-03-01T01:14:26.877
> 
> 标签：php, gps, heading

我有两个点（latitude1，longitude1）和（latitude2，longitude2）。如何在 PHP 中确定从第 1 点到第 2 点需要学习的课程？

课程将是北，南，东或西，可能会从学位转换？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:27:02.737

```
// Function: latlon_bearing_great_circle
// Desc:  This function calculates the initial bearing you need to travel
//   from Point A to Point B, along a great arc.  Repeated calls to this
//   could calculate the bearing at each step of the way.
function latlon_bearing_great_circle($lat_a, $lon_a, $lat_b, $lon_b) {
// Convert our degrees to radians:
list($lat1, $lon1, $lat2, $lon2) =
    _deg2rad_multi($lat_a, $lon_a, $lat_b, $lon_b);

// Run the formula and store the answer (in radians)
$rads = atan2(
        sin($lon2 - $lon1) * cos($lat2),
        (cos($lat1) * sin($lat2)) -
              (sin($lat1) * cos($lat2) * cos($lon2 - $lon1)) );

// Convert this back to degrees to use with a compass
$degrees = rad2deg($rads);

// If negative subtract it from 360 to get the bearing we are used to.
$degrees = ($degrees < 0) ? 360 + $degrees : $degrees;

return $degrees;
}

// Function: _deg2rad_multi
// Desc: A quick helper function.  Many of these functions have to convert
//   a value from degrees to radians in order to perform math on them.
function _deg2rad_multi() {
    // Grab all the arguments as an array & apply deg2rad to each element
    $arguments = func_get_args();
    return array_map('deg2rad', $arguments);
} 
```

[http://fil.ya1.ru/PHP_5_in_Practice/index.htm#page=0768667437/ch02lev1sec6.html](http://fil.ya1.ru/PHP_5_in_Practice/index.htm#page=0768667437/ch02lev1sec6.html)

# report - Cognos Report Studio 处理空值

> ID：15148767
> 
> 赞同：1
> 
> 时间：2013-03-01T01:14:30.370
> 
> 标签：report, cognos-8

我正在使用 cognos 报告工作室 8.2。一份报告的要求是在项目的开始和结束日期内过滤用户指定的日期。但是结束日期可以是空值，因为它可以是一个没有完成日期的项目。这是我的场景：

活动 || 开始日期 || 结束日期

项目1 || 2013 年 2 月 2 日 || 2013 年 2 月 10 日

项目2 || 2013 年 2 月 11 日 || 无效的

这是我需要输出的样子：

过滤器：2013 年 2 月 3 日输出：项目 1

过滤器：2013 年 2 月 12 日输出：项目 1 和项目 2

我试过这个过滤器：

过滤器1：

```
([END_DATE] is not NULL) AND ([END_DATE] > ?asAtDate?) 
```

过滤器2：

```
([START_DATE] <= ?atDate?) 
```

但这没有用，它只是给了我一个空白报告。我究竟做错了什么？如果我不添加 [END_DATE] 不为空，那么它会给我一个 sql 异常错误。

感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T17:16:18.110

我会在模型级别处理这个问题。在表的 SQL 语句中，将空值与远在未来的日期（1-1-2100 或类似日期）合并。然后过滤器之间的标准将起作用。我总是在模型级别而不是报告中这样做。然后可以快速创建报告或轻松查询包。

# python - readline set_completion_display_matches_hook 在显示提示之前需要返回键

> ID：15148768
> 
> 赞同：3
> 
> 时间：2013-03-01T01:14:30.423
> 
> 标签：python, readline

**背景**

嗨，我正在尝试在 readline 中为我的选项卡完成输出编写自定义显示。这是我的`display hook`功能-

**代码**

```
def match_display_hook(self, substitution, matches, longest_match_length):
    print ''
    for match in matches:
        print match
    readline.redisplay() 
```

**问题**

但问题是我必须按回车键才能获得提示，这与默认选项卡完成输出不同，我可以立即获得提示。我看到`rl`另一个线程中有人建议了模块，但是没有办法通过 readline 本身完成它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T00:02:05.147

好的，我找到了一种方法，不确定这是否是修复它的正确方法。但是我在 match_display_hook 的末尾打印了提示和 readline 缓冲区，一切看起来都很好。这是我的新 match_display_hook：

```
def match_display_hook(self, substitution, matches, longest_match_length):
    print ''
    for match in matches:
        print match
    print self.prompt.rstrip(),
    print readline.get_line_buffer(),
    readline.redisplay() 
```

这很好用。

# java - getElementsByClass 返回所有值

> ID：15148769
> 
> 赞同：0
> 
> 时间：2013-03-01T01:14:35.890
> 
> 标签：java, jsoup

当我想用那行代码检索值时，我正在使用 JSOUP lib 解析网站： `element.getElementsByClass("s_t").select("a").val("href").text()`我有所需的数据。但是，当我这样做时，`element.getElementsByClass("s_t").text()`它会返回所有`s_t`标签的值，甚至是以前的标签。如何在`s_t`不浏览内部标签的情况下限制仅检索父级？ `element.getElementsByClass("s_t").select("a").val("href").text()`//返回“hello” `element.getElementsByClass("s_t").text()`//返回“hello”和“a”我想删除那个“hello”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:20:18.983

问题已解决：我只需要添加一个 get(index) 方法：

```
element.getElementsByClass("s_t").get(2).text() 
```

# jquery - 在 IE 中更改 img src 失败？

> ID：15148775
> 
> 赞同：0
> 
> 时间：2013-03-01T01:14:56.180
> 
> 标签：jquery

我有以下代码行：

```
$( "img[title='my_image']" ).attr( "src", document.location.origin + "/reporter/content/images/ajax-loader.gif" ); 
```

基本上，当用户单击按钮时，我想显示进度指示器而不是默认图像。

这在 Chrome 中效果很好，但在 IE 和 Firefox 中失败。在那些浏览器中，我只是得到了一个小的损坏的图像链接图标。

我需要做些什么不同的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:17:41.463

删除`document.location.origin`. 只需`/`在新源的开头，它将相对于当前原点加载。

# ios - Core Data 并发类型未按预期工作

> ID：15148776
> 
> 赞同：0
> 
> 时间：2013-03-01T01:14:56.287
> 
> 标签：ios, objective-c, xcode, core-data

根据 Apple，我在 App Delegate 中创建我的核心数据堆栈，然后将 managedObjectContext 传递给我的第一个控制器，然后从那里传递到第二个控制器，依此类推。

我正在尝试在后台线程中做一些工作并想使用 PrivateConcurrency 类型，但我收到错误消息，即父级必须是 Main 或 Private。

在应用程序委托中，我创建了上下文

```
- (NSManagedObjectContext *)managedObjectContext
{
    if (_managedObjectContext != nil) {
        return _managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) {
        _managedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
        [_managedObjectContext setPersistentStoreCoordinator:coordinator];
    }
    return _managedObjectContext;
} 
```

然后我将它传递给我的第一个控制器

```
UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;
Paperwoven_LoadingViewController *firstController = (Paperwoven_LoadingViewController *)navigationController.topViewController;
[firstController setManagedObjectContext:[self managedObjectContext]];
NSLog(@"concurrency type is %@", [self managedObjectContext]);
NSLog(@"concurrency type is %u",firstController.managedObjectContext.concurrencyType); 
```

我可以看到，当我从 self 注销并发类型时，我得到 2，即 Main。但是当我检查我刚刚发送到第一个控制器的上下文时，我得到 0。为什么它没有正确传递？

**编辑**

此外，我可以通过获取 managedObjectContext`AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate]`并且我可以看到并发类型是 MAIN 但如果在下一行我`self.managedObjectContext = appDelegate.managedObjectContext`检查了 self.managedObjectContext 上的并发类型，它是 0。看起来将它从 App 委托分配给控制器会丢失并发类型.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:24:07.643

从您的代码中，最可能的解释`firstController`是 nil。你用这条线得到它：

```
Paperwoven_LoadingViewController *firstController = (Paperwoven_LoadingViewController *)navigationController.topViewController; 
```

但如果`topViewController`是 nil，那么`firstViewController`就是 nil。在以下几行中：

```
[firstController setManagedObjectContext:[self managedObjectContext]];
NSLog(@"concurrency type is %@", [self managedObjectContext]);
NSLog(@"concurrency type is %u",firstController.managedObjectContext.concurrencyType); 
```

在 Objective-C 中向 nil 发送消息不是错误，因此第一行是空操作。在上面的最后一行中，您正在打印`nil.managedObjectContext.concurrencyType`，它将是 0。

这看起来不像是核心数据问题——更像是配置视图控制器的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:13:14.160

我是个白痴，有点。另一位开发人员将所有控制器都具有的相同核心数据堆栈方法放在 Base 控制器中。发生的事情是我能够设置控制器上下文，但随后基本控制器将创建自己的上下文并覆盖传入的上下文。删除此垃圾代码解决了我的问题。这回答了我的问题，所以我将关闭它。请不要投反对票，我们都有过编码脑放屁。

# css - 缩放浏览器时全屏背景图像的最小尺寸

> ID：15148782
> 
> 赞同：1
> 
> 时间：2013-03-01T01:15:42.090
> 
> 标签：css, image, background, fullscreen, scale

我目前正在尝试修改以全屏图像作为主页的 wordpress 主题。现在它可以在浏览器中完美缩放，唯一的问题是它不会比原始图像尺寸小。它会变大并保持其纵横比，但是当您缩小窗口时，它不会小于默认图像大小。

这是这部分主题中的 CSS：

```
/* full screen slides */
.slides.full {
  position: absolute;
  top: 0;
  left: 0;
  background: #373432;
  width: 100%;
  height: 100%;
  max-height: 100%;
  text-align: center;
  color: #fff;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
}

.slides.full img {
  min-height: 100%;
  min-width: 100%;
  width: auto;
  position: absolute;
  top: 0;
  left: 0;
} 
```

我使用了另一种方法，使图像变得比原始尺寸小，但它并没有粘在浏览器的高度上，下面只有一个灰色背景。

有人可以帮助我更改我发布的 css 以实现我想要实现的目标吗？将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:17:14.060

```
 .slides.full img {
  max-width:100%; /* lower virsion of IE won't work width max-width */
  width:100%;         /* for IE */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T01:20:23.827

您是否尝试过添加`max-widht: 100%`和？`max-height: 100%``.slides.full img`

这只是一个疯狂的猜测。看一个活生生的例子会很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T01:41:31.840

这将为 img 保持正确的比例

```
 .slides.full img {
    height: auto;
    width: auto;
    max-width: 100%;
    max-height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    } 
```

并更改为`height:100%`将在调整大小时拉伸 img

# java - Java无限信号量

> ID：15148785
> 
> 赞同：3
> 
> 时间：2013-03-01T01:16:16.807
> 
> 标签：java, semaphore

想知道如何**不**使用信号量限制连接（或任何东西）。

所以你可能会想，“这听起来很愚蠢。” 但是，它简化了我的代码，因为它让我可以统一处理有限和无限的情况。

请注意，我不是在寻找有关如何编写类似内容的建议

```
if(limited) {
    semaphore.acquire();
} 
```

我可以想出几十种方法来使用 if 语句进行这种分叉。

更具体地说，我正在寻找 Apache Commons 或 Java 解决方案。这只是一个简单的情况，我可以编写自己的简单类来解决它，但是当有广泛可用的实用程序解决方案时，我更喜欢使用这些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:21:32.973

鉴于 Semaphore 是一个类，而不是一个接口，您将被迫在逻辑中进行某种形式的分支。为了避免在代码周围散布“if (flag)”检查，您可以创建一个用于应用程序的接口，其中包括 Semaphore 类的获取和释放语义。从那时起，提供两种实现，一种本质上是无操作的，不提供任何保护，另一种是委托给 java.util.concurrent.Semaphore 的类 - 从这一点开始，您可以使用依赖注入来确定使用哪个实现。

同样，分支不可避免地必须存在于某个地方，这只是将其移出业务逻辑。

# .net - Visual Studio 2012 是否向后兼容团队环境中的 Visual Studio 2010

> ID：15148786
> 
> 赞同：0
> 
> 时间：2013-03-01T01:16:18.473
> 
> 标签：.net, visual-studio-2010, visual-studio-2012

我已经阅读了在 Visual Studio 2010 SP1 中创建的项目在使用 VS2012 打开时不需要修改。

我有一个由大约 4 名开发人员组成的团队，他们都使用源代码控制在同一个项目上工作，如果说他们中只有 1 或 2 个首先升级到 VS2012，而其余的仍然留在 VS2010 上会不会有问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T01:25:54.293

它*应该*是向后兼容的。是否保证在所有情况下都可以？好吧，VS2012 还是很新的，所以你的里程可能会有所不同。

该文档可能声称它有效。人们可能会说他们对此没有任何问题。您甚至可以在您的团队中尝试它并且没有任何问题。但是你愿意把项目的稳定性赌在上面吗？

正如你可以想象的那样，这个问题真的没有“正确”的答案。但需要考虑的一些事情可能是：

*   优点：让代码在不同的工具和环境中运行往往会使代码保持灵活，确保它不会过多地依赖环境并且可以自我维持。
*   缺点：在开发人员工作站上进行不同的设置为“它在我的机器上工作”综合症打开了大门。

这是你的电话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T01:22:07.137

在我的公司，我们目前正在使用混合客户端或 Visual Studio 2010 和 2012 客户端进行开发，我们使用 Team Foundation Server 2010 作为存储库，到目前为止我们没有遇到任何问题。

这只是我个人的经验，我们的主要解决方案有大约 20 个不同的 VB 和 C# 和网站项目，完全没有问题。

我的2美分...

# jquery - 如何选择 div 内的所有输入，其 ID 中有变量？

> ID：15148787
> 
> 赞同：0
> 
> 时间：2013-03-01T01:16:30.857
> 
> 标签：jquery

我想定位此 DIV 内的所有输入字段。但我似乎无法正确定位它。我不断收到：**SyntaxError: missing ) 在参数列表之后**

```
var nameid= $.parseQuery(url_string).nameid;
var deleteuserid = $.parseQuery(url_string).deleteuserid;

$('#memberRow_' + nameid + '_' + deleteuserid).attr("disabled", true); //works
$('#memberRow_' + nameid + '_' + deleteuserid :input).attr("disabled", true); //doesn't work 
```

我想要定位的 div ID 基本上看起来像“#memberRow_33_32”或者这两个变量最终是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T01:19:42.877

您在此处缺少一些引号来指示字符串的其余部分：

```
$('#memberRow_' + nameid + '_' + deleteuserid :input) 
```

应该：

```
$('#memberRow_' + nameid + '_' + deleteuserid + ' :input') 
```

选择器的`' :input'`部分是字符串，而不是 JavaScript 运算符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T01:19:29.153

`$('#memberRow_' + nameid + '_' + deleteuserid + " :input").attr("disabled", true); //work`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T01:21:56.027

试试下面的代码：

```
$(function(){
 #(":input",$('#memberRow_' + nameid + '_' + deleteuserid)).attr("disabled","disabled");
}) 
```

# excel - 如何在 Excel 中执行相当于 COUNT/GROUP BY 的操作？

> ID：15148791
> 
> 赞同：0
> 
> 时间：2013-03-01T01:17:34.297
> 
> 标签：excel, count, group-by, pivot-table

我在 Excel 电子表格中有一个表格。我想得到相当于做类似的事情

```
SELECT col1, COUNT(col1), COUNT(col2)
FROM table
GROUP BY col1 
```

在 SQL 中。我试图使用数据透视表，我可能想多了，但我不习惯在 Excel 中工作，无法弄清楚。

所有帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:12:41.640

在后台打开 Access 实例。放数据。通过 SQL 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T01:42:51.960

那么在细胞公式中它会是（即）

```
 //Cell Formula
    =Count(A1:A50) // Range
    =Count(A1, A3, A5) // Specific Cells

   // in VBA

   =Sheet1.Range("A:A").Cells.SpecialCells(xlCellTypeConstants).Count

  // Where "A" is the column and 'SpecialCells(xlCellTypeConstants)' returns non-blank cells 
```

// 如果需要检查 vba 中的特定值：

```
 Dim counter As Integer
 counter = 0

 For Each c In Sheet1.Range("A1:A100").Cells

      If c.Value = "Something" Then
        counter = counter + 1
      End If

 Next

 // Then get your value of the counter variable 
```

您可能必须执行嵌套循环才能获得所需的内容。

# string - 获取字符后的字符串

> ID：15148796
> 
> 赞同：105
> 
> 时间：2013-03-01T01:18:09.560
> 
> 标签：string, bash, extract

我有一个看起来像这样的字符串：

```
 GenFiltEff=7.092200e-01 
```

使用 bash，我只想获取`=`字符后面的数字。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2013-03-01T02:09:27.733

如果值已存储在变量中，则使用参数扩展。

```
$ str="GenFiltEff=7.092200e-01"
$ value=${str#*=} 
```

或使用`read`

```
$ IFS="=" read name value <<< "GenFiltEff=7.092200e-01" 
```

无论哪种方式，

```
$ echo $value
7.092200e-01 
```

* * *

## 回答 #2

> 赞同：113
> 
> 时间：2013-03-01T01:21:05.430

对于第一个之后`=`和下一个之前的文本`=`

```
cut -d "=" -f2 <<< "$your_str" 
```

或者

```
sed -e 's#.*=\(\)#\1#' <<< "$your_str" 
```

对于第一个之后的所有文本，`=`无论是否有多个`=`

```
cut -d "=" -f2- <<< "$your_str" 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-03-01T01:26:51.337

```
echo "GenFiltEff=7.092200e-01" | cut -d "=" -f2 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-01T01:23:00.107

```
${word:$(expr index "$word" "="):1} 
```

得到`7`. 假设您的意思是整个字符串的其余部分，只需去掉`:1`.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-01T01:19:51.547

这应该有效：

```
your_str='GenFiltEff=7.092200e-01'
echo $your_str | cut -d "=" -f2 
```

# mysql - MySQL - 存储过程 SQL 中的错误 1064

> ID：15148799
> 
> 赞同：1
> 
> 时间：2013-03-01T01:18:28.683
> 
> 标签：mysql, sql

我已经编写了以下存储过程，它在 HeidiSQL**中**以`SET pay_ref = SELECT CONCAT('KOS' ...`

让我首先解释一下这个过程是怎么回事。我有一个`gamers`带有自动增量的 BIGINT 主键的表。这个过程应该：

1.  从用户那里获取一些参数
2.  根据他/她的电子邮件地址检查用户是否已经存在于数据库中，如果reord确实存在，则返回单词“DUPLICATE”
3.  否则它会正常插入
4.  然后它读取创建的新记录的 ID 并将其转换为 varchar，用前导零填充它，然后与其他一些字符串连接
5.  这个新字符串（例如应该读取`KOS00001ABCDEF`）然后被更新到`pay_refcode`字段 >>> 这就是我们决定为用户生成唯一支付参考的方式
6.  如果一切顺利，它将`retval`使用新生成的参考代码进行更新，以便由 PHP 脚本读取。

* * *

```
DELIMITER //
CREATE PROCEDURE `InsertGamer` (
    IN p_fname          VARCHAR(30),
    IN p_lname          VARCHAR(30),
    IN p_email          VARCHAR(255),
    IN p_favgame        VARCHAR(60),
    IN p_pay_suffix     VARCHAR(6),
    OUT retval          VARCHAR(14)
)
BEGIN
    DECLARE last_id BIGINT;
    DECLARE pay_ref VARCHAR(14);

    IF (EXISTS(SELECT * FROM gamers WHERE (email = p_email))) THEN
        SET retval = 'DUPLICATE';
    ELSE
        INSERT INTO gamers (fname, lname, email, favgame, pay_refcode)
        VALUES (p_fname, p_lname, p_email, p_favgame, NULL);
        SET last_id = LAST_INSERT_ID();
        SET pay_ref = SELECT CONCAT('KOS', (SELECT LPAD(CONVERT(last_id, VARCHAR(5)),5,'0')), p_pay_suffix);

        UPDATE gamers
        SET pay_refcode = pay_ref
        WHERE application_id = last_id;

        SET retval = pay_ref;           
    END IF;
END // 
```

我一生都无法弄清楚问题所在，并真诚地感谢您的帮助。非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:21:53.517

您只需要从为`SELECT`设置值的行中删除关键字`pay_ref`。

```
SET pay_ref = CONCAT('KOS', LPAD(CONVERT(last_id, CHAR(5)),5,'0'), p_pay_suffix); 
```

完整代码：

```
DELIMITER //
CREATE PROCEDURE `InsertGamer` (
    IN p_fname          VARCHAR(30),
    IN p_lname          VARCHAR(30),
    IN p_email          VARCHAR(255),
    IN p_favgame        VARCHAR(60),
    IN p_pay_suffix     VARCHAR(6),
    OUT retval          VARCHAR(14)
)
BEGIN
    DECLARE last_id BIGINT;
    DECLARE pay_ref VARCHAR(14);

    SET @count := (SELECT COUNT(*) FROM gamers WHERE email = p_email)
    IF (@count > 0) THEN
        SET retval = 'DUPLICATE';
    ELSE
        INSERT INTO gamers (fname, lname, email, favgame, pay_refcode)
        VALUES (p_fname, p_lname, p_email, p_favgame, NULL);

        SET last_id = LAST_INSERT_ID();

        SET pay_ref = CONCAT('KOS', LPAD(CONVERT(last_id, CHAR(5)),5,'0'), p_pay_suffix);

        UPDATE gamers
        SET pay_refcode = pay_ref
        WHERE application_id = last_id;

        SET retval = pay_ref;           
    END IF;
END //
DELIMITER ; 
```

# database - 在 Firebase 中，有没有办法在不加载所有节点数据的情况下获取节点的子节点数量？

> ID：15148803
> 
> 赞同：139
> 
> 时间：2013-03-01T01:19:06.630
> 
> 标签：database, firebase, count

您可以通过以下方式获取孩子人数

```
firebase_node.once('value', function(snapshot) { alert('Count: ' + snapshot.numChildren()); }); 
```

但我相信这会从服务器获取该节点的整个子树。对于庞大的列表，这似乎是 RAM 和延迟密集型的。有没有办法在不获取整个内容的情况下获取计数（和/或子名列表）？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-03-01T02:13:02.170

您提供的代码片段确实加载了整个数据集，然后在客户端对其进行计数，这对于大量数据可能非常慢。

Firebase 目前无法在不加载数据的情况下计算儿童数量，但我们确实计划添加它。

目前，一种解决方案是维护一个孩子数量的计数器，并在每次添加新孩子时更新它。您可以使用事务来计算项目，例如在此代码跟踪 upvodes 中：

```
var upvotesRef = new Firebase('https://docs-examples.firebaseio.com/android/saving-data/fireblog/posts/-JRHTHaIs-jNPLXOQivY/upvotes');
upvotesRef.transaction(function (current_value) {
  return (current_value || 0) + 1;
}); 
```

有关详细信息，请参阅[https://www.firebase.com/docs/transactions.html](https://www.firebase.com/docs/transactions.html)

**更新：** Firebase 最近发布了 Cloud Functions。使用 Cloud Functions，您无需创建自己的服务器。您可以简单地编写 JavaScript 函数并将其上传到 Firebase。Firebase 将负责在事件发生时触发函数。

例如，如果你想计算赞成票，你应该创建一个类似于这个的结构：

```
{
  "posts" : {
    "-JRHTHaIs-jNPLXOQivY" : {
      "upvotes_count":5,
      "upvotes" : {
      "userX" : true,
      "userY" : true,
      "userZ" : true,
      ...
    }
    }
  }
} 
```

然后编写一个javascript函数来增加`upvotes_count`当有新的写入`upvotes`节点时。

```
const functions = require('firebase-functions');
const admin = require('firebase-admin');
admin.initializeApp(functions.config().firebase);

exports.countlikes = functions.database.ref('/posts/$postid/upvotes').onWrite(event => {
  return event.data.ref.parent.child('upvotes_count').set(event.data.numChildren());
}); 
```

您可以阅读[文档](https://firebase.google.com/docs/functions/)以了解如何[开始使用 Cloud Functions](https://firebase.google.com/docs/functions/get-started)。

此外，另一个计数帖子的示例在这里： [https ://github.com/firebase/functions-samples/blob/master/child-count/functions/index.js](https://github.com/firebase/functions-samples/blob/master/child-count/functions/index.js)

### 2018 年 1 月更新

firebase[文档](https://firebase.google.com/docs/functions/database-events#reading_the_previous_value)已更改，因此`event`我们现在拥有`change`和`context`.

`event.data`给定的示例引发了一个未定义的错误抱怨。这种模式似乎效果更好：

```
exports.countPrescriptions = functions.database.ref(`/prescriptions`).onWrite((change, context) => {
    const data = change.after.val();
    const count = Object.keys(data).length;
    return change.after.ref.child('_count').set(count);
}); 
```

```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2016-01-22T22:46:49.043

这在游戏中有点晚了，因为其他几个人已经很好地回答了，但我会分享我如何实现它。

这取决于[Firebase REST API](https://firebase.google.com/docs/database/rest/retrieve-data#shallow)提供了一个`shallow=true`参数这一事实。

假设您有一个`post`对象，并且每个对象可以有多个`comments`：

```
{
 "posts": {
  "$postKey": {
   "comments": {
     ...  
   }
  }
 }
} 
```

您显然不想获取所有评论，而只是获取评论的数量。

假设您有帖子的密钥，您可以`GET`向 `https://yourapp.firebaseio.com/posts/[the post key]/comments?shallow=true`.

这将返回一个键值对对象，其中每个键是注释的键，其值为`true`：

```
{
 "comment1key": true,
 "comment2key": true,
 ...,
 "comment9999key": true
} 
```

这个响应的大小比请求等效数据要小得多，现在您可以计算响应中的键数来找到您的值（例如 commentCount = `Object.keys(result).length`）。

这可能无法完全解决您的问题，因为您仍在计算返回的键数，并且您不一定要在更改时订阅该值，但它确实大大减少了返回数据的大小，而无需对您的架构。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2014-04-17T12:00:55.920

随时保存计数 - 并使用验证来强制执行。我一起破解了这个 - 为了保持不断出现的独特选票和计数！但是这次我已经测试了我的建议！（尽管有剪切/粘贴错误！）。

这里的“技巧”是使用节点*优先级*作为投票计数......

数据是：

vote/$issueBeingVotedOn/user/$uniqueIdOfVoter = thisVotesCount, priority=thisVotesCount vote/$issueBeingVotedOn/count = 'user/'+$idOfLastVoter, priority=CountofLastVote

```
,"vote": {
  ".read" : true
  ,".write" : true
  ,"$issue" : {
    "user" : {
      "$user" : {
        ".validate" : "!data.exists() && 
             newData.val()==data.parent().parent().child('count').getPriority()+1 &&
             newData.val()==newData.GetPriority()" 
```

用户只能投票一次 && 计数必须比当前计数高一 && 数据值必须与优先级相同。

```
 }
    }
    ,"count" : {
      ".validate" : "data.parent().child(newData.val()).val()==newData.getPriority() &&
             newData.getPriority()==data.getPriority()+1 "
    } 
```

count (最后一个投票者) - 投票必须存在并且它的 count 等于 newcount, && newcount (priority) 只能增加一个。

```
 }
} 
```

测试脚本以添加不同用户的 10 票（对于此示例，id 是伪造的，应该是用户 auth.uid 在生产中）。倒计时 (i--) 10 以查看验证失败。

```
<script src='https://cdn.firebase.com/v0/firebase.js'></script>
<script>
  window.fb = new Firebase('https:...vote/iss1/');
  window.fb.child('count').once('value', function (dss) {
    votes = dss.getPriority();
    for (var i=1;i<10;i++) vote(dss,i+votes);
  } );

function vote(dss,count)
{
  var user='user/zz' + count; // replace with auth.id or whatever
  window.fb.child(user).setWithPriority(count,count);
  window.fb.child('count').setWithPriority(user,count);
}
</script> 
```

这里的“风险”是进行了投票，但计数未更新（haking 或脚本失败）。这就是为什么投票有一个独特的“优先级”——脚本应该首先确保没有优先级高于当前计数的投票，如果有的话，它应该在自己做之前完成该事务——让你的客户清理为你准备:)

计数需要在开始之前以优先级初始化 - forge 不允许您这样做，因此需要一个存根脚本（在验证激活之前！）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-09-05T08:33:27.993

将云函数写入并更新节点数。

```
// below function to get the given node count.
const functions = require('firebase-functions');
const admin = require('firebase-admin');
admin.initializeApp(functions.config().firebase);

exports.userscount = functions.database.ref('/users/')
    .onWrite(event => {

      console.log('users number : ', event.data.numChildren());

      return event.data.ref.parent.child('count/users').set(event.data.numChildren());
    }); 
```

参考：[https ://firebase.google.com/docs/functions/database-events](https://firebase.google.com/docs/functions/database-events)

根--| |-users（此节点包含所有用户列表）|
|-count |-userscount ：（此节点由云功能与用户计数动态添加）

# ruby-on-rails - 是否有一种内置方法可以从数据库中获取单个 ActiveRecord 属性（忽略内存中的值）？

> ID：15148812
> 
> 赞同：1
> 
> 时间：2013-03-01T01:20:13.920
> 
> 标签：ruby-on-rails, ruby, activerecord, ruby-on-rails-2

大警告：我们在我的公司使用 Rails 2。所以我正在从 ActiveRecord 2 中寻找答案（如果存在的话）。

ActiveRecord 中是否已经包含一种方法来从数据库中获取属性的最新值，而不调用`reload`或覆盖当前的内存值？

例如：

```
p = Person.find(123)

# Now the in-memory value is "Joe", which would be overwritten
# if I called reload
p.nickname = "Joe"

# I want something like this to execute the equivalent of:
# SELECT 'nickname' FROM persons WHERE id = 123;
nickname_from_db = p.get_current_value(:nickname) 
```

我意识到我要实现的内容非常简单；如果已经有一个 ActiveRecord 方法可以满足我的要求，我只是不想重新发明轮子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T01:26:50.527

您可以使用该`select`选项。

`Person.find(123, :select => "nickname")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T01:23:36.387

您可以访问脏属性以获取该属性的先前值

```
>> p = Product.first
>> p.name # foo
>> p.name = 'bar'
>> p.changes['name'] # ['foo', 'bar'] 
```

# javascript - 用于输出 6 个随机数的 JavaScript

> ID：15148817
> 
> 赞同：0
> 
> 时间：2013-03-01T01:21:04.873
> 
> 标签：javascript

我希望我的输出有 6 个随机数，但我的代码只显示 4 个数字，并且数字是相同的。

```
var x = Math.floor(Math.random()*41);

for(var i=0; i<7; i++){
    document.write(x + "</br>");
    i++;
} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T01:23:42.453

您需要`.random()`在循环内移动。另外，`i++`从您的循环中删除，因为这已经由`for()`.

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/MBUQD/)]]]

### 脚本：

```
for( var i=0; i<6; i++ ){
    var x = Math.floor(Math.random()*41);
    document.write(x + "</br>");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T01:23:50.577

您不需要表单内的 i++，它是 6 而不是 7，您需要计算 for 循环内的随机数。

```
for(var i=0; i<6; i++){
    var x = Math.floor(Math.random()*41);
    document.write(x + "</br>");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T01:23:57.920

你为什么要增加`i`两次？此外，如果所有数字都是随机的，则需要在循环内执行 Math 函数。

```
for(var i = 0; i < 6; i++) {
    document.write(Math.floor(Math.random()*41) + "<br>");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T01:24:03.160

你不需要增加你的计数器两次。此外， random() 需要在您的循环内。

```
var x = Math.floor(Math.random()*41);

for(var i=0; i<6; i++){
    document.write(x + "</br>");
    x = Math.floor(Math.random()*41);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T01:24:47.043

您在开始循环之前为 var x 分配了一个随机数，它在整个执行过程中保持不变

尝试将它放在循环中，也关于增加 i，你已经在 for 循环中执行它所以你不需要在循环中执行它

```
var x = Math.floor(Math.random()*41);//place it inside the loop

for(var i=0; i<7; i++){
    document.write(x + "</br>");
    i++;//remove this
} 
```

# r - 用其他值替换向量中的某些分量值

> ID：15148821
> 
> 赞同：-3
> 
> 时间：2013-03-01T01:21:38.060
> 
> 标签：r

在 R 中，在向量中，即 1-dim 矩阵中，我想将值为 3 的组件更改为值为 1，将值为 4 的组件更改为值为 2。我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-01T01:27:01.550

惯用的 r 方式是使用`[<-`, 形式 `x[index] <- result`

如果您正在处理整数/因子或字符变量，那么`==`将可靠地用于索引，

```
x <- rep(1:5,3)
x[x==3] <- 1
x[x==4] <- 2

x
## [1] 1 2 1 2 5 1 2 1 2 5 1 2 1 2 5 
```

* * *

`car`有一个有用的功能（`recode`它是 的包装器`[<-`），它可以让您在一次调用中组合所有重新编码

例如

```
library(car)

x <- rep(1:5,3)

xr <- recode(x, '3=1; 4=2')

x
## [1] 1 2 3 4 5 1 2 3 4 5 1 2 3 4 5
xr
## [1] 1 2 1 2 5 1 2 1 2 5 1 2 1 2 5 
```

* * *

感谢@joran`mapvalues`从`plyr`包中提到，另一个包装器`[<-`

```
x <- rep(1:5,3)
mapvalues(x, from = c(3,1), to = c(1,2)) 
```

`plyr::revalue`是`mapvalues`特定 `factor`或`character`变量的包装器。

# java - 使用 Eclipse 的 Maven/Gradle 工作覆盖示例

> ID：15148823
> 
> 赞同：3
> 
> 时间：2013-03-01T01:21:43.083
> 
> 标签：java, eclipse, maven, build, gradle

我有一个 EAR 项目，它应该包含一个或多个瘦 WAR。我已经尝试了一切以使该项目与 eclipse 一起使用，但是当我从命令行运行它们时，无法使 eclipse 与工具（maven 和 gradle）一样。

有没有我可以用来让我的项目使用 Eclipse 的工作示例？请帮助我，我已经问自己是否有人真的像我希望的那样使用这些工具来完成此类项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T14:45:55.593

在我上次的项目经验中，我在使用 Eclipse 支持 Maven 时遇到了问题。由于 Eclipse m2 插件中的问题。

所以对我来说最好的解决方案是通过一些 shell 脚本从命令行构建一个耳朵。要在 IDE 中打开项目，我使用了[maven eclipse plugin](http://maven.apache.org/plugins/maven-eclipse-plugin/eclipse-mojo.html)，因此我通过 maven 生成了 eclipse 工作区。

使用[Eclipse 外部工具](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.user/tasks/tasks-exttools-running.htm)，您可以运行 shell 脚本以非常方便地从命令行构建/或运行您的 EE 应用程序。

这同样适用于 gradle，但看起来 Eclipse Gradle 插件更稳定，现在我在我的 Gradle 项目中使用插件。

如果它对您有用，您可以查看[github 测试项目](https://github.com/JTaky/Tournament)以说明如何制作 maven 多模块战争项目。您还可以找到如何为该项目生成 Eclipse 工作区的简短说明。生成工作区后，您可以将作为现有项目导入您的工作区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:51:46.530

这是一个包含war的示例Ear项目（有关目录结构，请参阅下面的img）

**MainDir 包含 2 个文件和 1 个名为 war 的目录**。

文件**settings.gradle**包含

```
include 'war' 
```

文件**build.gradle**包含

```
apply plugin: 'ear'

repositories {
    mavenCentral()
}

dependencies {
    deploy project(':war')
    //earlib group: YOUR_DEPENDENCIES
} 
```

**战争**目录的build.gradle包含

```
apply plugin: 'war'
apply plugin: 'jetty' // you can call gradle jRW

repositories {
    mavenCentral()
}

dependencies {
    //compile group: YOUR_DEPENDENCIES
}

httpPort = 8080 //jetty start port
stopPort = 8081 //jetty stop port 
```

文件**HelloWorld.java**包含

```
public class HelloWorld {
    public String getHello() {
        return "Hello world!";
    }
} 
```

文件**index.jsp**包含

```
<jsp:useBean id="helloWorld" class="your_package.HelloWorld"/>
<html>
<p>${helloWorld.hello}</p>
</html> 
```

现在打开 cmd->MainDir（或者您可以在 eclipse-marketplace 中搜索 gradle 并直接从 eclipse 执行此步骤）并输入

```
gradle jRW//short for jettyRunWar 
```

现在开放

```
localhost:8080/war/ 
```

![项目结构](../Images/055be8bdd9d9a1449c16f5520ac0d0ba.png)

# java - List 的添加方法 线程安全与否？

> ID：15148828
> 
> 赞同：0
> 
> 时间：2013-03-01T01:22:08.873
> 
> 标签：java, multithreading, arraylist, thread-safety

我有一个适用于其中的代码，`each thread`它将`10 minutes`决定我应该选择哪个表`random number`。然后在那之后我`SQL query`使用`PreparedStatement`. `result set`执行完之后`ResultSet`，我需要遍历`List<String> colData`.

**此处`columnsList`将包含`table columns`以逗号分隔的内容。**例如-

`col1, col2, col3`

下面是代码-

```
class ReadTask implements Runnable {

    private static Random random = new SecureRandom();

    public ReadTask() {

    }    

    @Override
    public run() {
      ...

      while ( < 10 minutes) {

        double randomNumber = random.nextDouble() * 100.0;
        ReadTableConnectionInfo tableInfo = selectRandomConnection(randomNumber);

        final int id = generateRandomId(random);
        final String columnsList = getColumns(table.getColumns());
        final String selectSql = "SELECT " + columnsList + "  from " + table.getTableName() + " where id = ?";

        preparedStatement = tableStatement.get(table.getTableName()).prepareCall(selectSql);
        preparedStatement.setString(1, String.valueOf(id));

        rs = preparedStatement.executeQuery();

        List<String> colData = new ArrayList<String>(columnsList.split(",").length);
        boolean foundData = false;

        if (id >= 1 && id <= 5000) {

            if (rs.next()) {
                foundData = true;

                for (String column : columnsList.split(",")) {

                         colData.add(rs.getString(column)); 
                }
                rs.next();//this should return false or an error condition and do I need this here?
            }
        } else if (rs.next()) {
            // do some stuff
         }

        if (flagValidateData && foundData) {

        // iterate through colData map
             }
         }
       }
    } 
```

**问题陈述：-**

1）我是否需要同步`colData list`？

2）我添加数据的方式是否`List<String> colData`是线程安全的？

3）在我循环结果集并将其添加到的方式中是否还有其他问题`colData string array`？鉴于此，它是一个多线程代码，因此很难针对任何竞争条件对其进行调试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T01:26:41.357

add 方法是否是多线程安全的取决于实现类。ArrayList 不是多线程安全的。Vector 是同步的，或者您可以使用 Collections.synchronizedList 方法包装一个 ArrayList。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T01:29:30.150

您可以像这样使任何`List`线程安全：

```
List<String> names = new ArrayList<String>(); // not thread safe
List<String> threadSafeNames = Collections.synchronizedList(names); 
```

一个更好的解决方案可能是一个新的数据结构`java.util.concurrent`，比如`CopyOnWriteArrayList`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T02:13:06.820

如果你需要同步数据，为什么不写一个同步的读写函数呢？如果您扩展它们，集合和列表也可以同步

我妈妈的舌头是德国人（aut/vie），它是 3……；）

同步用于数据可以被覆盖或被多次访问替换的地方，如果你有同步的东西，它可以让你的系统停止（减速）因为：

同步意味着，只有一个对象可以处理某些部分

如果您有一个线程女巫访问某些方法，下一个线程必须等到之前的线程完成该部分

一个很好的例子：使用流将数据写入单个文件并将一些数据写入文件或输出连接：public synchronized void write(OutputStream str, byte toSend[]){...}

我通常将同步用于池技术，例如 get-next-operation (list-removal, return last element)

我厌倦了 18 小时的工作；）

我只是说：

无论您必须同步什么，都为其编写一个函数，例如

```
public synchronized void colData_add(final String str) // or object or whatever
{
...
}

public synchronized String colData_nextElement()
{
return colData.remove();
} 
```

希望这有帮助

# python - 重新配置python

> ID：15148832
> 
> 赞同：1
> 
> 时间：2013-03-01T01:22:19.993
> 
> 标签：python, makefile, configure, compiler-flags

我安装了 Python-2.7.3 和`configure --enable-shared`,`make`和`install`. 碰巧现在，我需要重新配置以包含该`--with-pydebug`选项。

再次运行`configure`时，我是否需要包含我之前拥有的所有标志？( `--enable-shared`) 还是`configure`只使用附加标志可以再次使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T01:29:46.180

`configure`从头开始配置构建（对缓存某些结果的支持最少）。因此，您需要提供与以前相同的所有标志。

更改配置标志时，还建议执行 a`make distclean`以确保重建所有内容。这一点尤其重要，`--with-pydebug`因为基本`PyObject`布局会发生变化。

# regex - (htaccess) 重写重定向冲突

> ID：15148833
> 
> 赞同：0
> 
> 时间：2013-03-01T01:22:23.990
> 
> 标签：regex, .htaccess, apache2

我需要将我的 URL 从 aaa/bbb/123?param1=1¶m2=2&etc 重写为 index.php?controller=aaa&action=bbb&id=123¶m1=1¶m2=2&etc。

我的 HTACCESS 中有以下代码

```
RewriteRule ^([a-z,A-Z,0-9]+)/([a-z,A-Z,0-9]+)/([0-9]+)?(.*)$ /rewrite/index.php?controller=$1&action=$2&id=$3$4 [QSA,R]

RewriteCond %{REQUEST_URI}   !^/rewrite/index.php$
RewriteCond %{REQUEST_URI}   !^/rewrite/robots.php$
RewriteCond %{REQUEST_URI}   !^/rewrite/$
RewriteRule ^(.*)$ /rewrite/index.php?fake_page=$1 [QSA,R] 
```

最后一个块与第一行冲突。我不明白为什么因为第一行以“/rewrite/index.php”开头，对吗？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:31:58.203

我解决了这个问题！我只是错过了 [ **L** ] 标志：

```
RewriteRule ^([a-z,A-Z,0-9]+)/([a-z,A-Z,0-9]+)/([0-9]+)?(.*)$ /rewrite/index.php?controller=$1&action=$2&id=$3$4 [QSA,R,L] 
```

不管怎么说，还是要谢谢你 ！

# jquery - 动态图像附加到鼠标悬停下拉

> ID：15148834
> 
> 赞同：-3
> 
> 时间：2013-03-01T01:22:27.340
> 
> 标签：jquery, drag-and-drop

我正在尝试将图像动态附加到 mousemove，然后将其拖放到 div 或 . 就像张贴笔记一样。

让我再解释一下。完成文本输入后，点击提交。该框将消失，便利贴图像将附加到鼠标并放在 div 中的任何位置。

```
 Function dataInputfn () {
    $('#dataInput').fadeIn();   
}

$('#submitTest').click(function(){
    $ ('#dataInput'). Fadeout ();
    $('<div id="NoteNew" class="dragNote"><img src="image.jpg" width="60px"/></div>').appendTo($('#div'));
    //Cursor:url(images/image0.jpg);
    noteDragFunc();
    });

Function noteDragFunc () {
    $( "#NoteNew" ).draggable({ revert: "invalid", stack: "#NoteNew"});
    $( "#chart" ).droppable({
    drop: function( event, ui ) {
        var coord = ui. draggable. position ();
        alert (coord. top);
        btnDrop = true;
    }

    });
} 
```

我需要将此图像附加到鼠标并放在任何地方，而不是附加到潜水。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:36:46.780

只是调用`draggable()`实际上不会将您的元素附加到鼠标的位置。

此外，如果您正在侦听该事件，那么当您触发该功能`click`时，鼠标按钮已经“向上” 。`noteDragFunc`

如果您将事件更改为，您尝试做的可能会起作用，`.mousedown()`但我不会指望它。用户仍然需要实际单击 NewNote div。

您可能需要使用可拖动以外的其他东西。

# php - 数组中子项的总和

> ID：15148837
> 
> 赞同：0
> 
> 时间：2013-03-01T01:22:45.263
> 
> 标签：php, arrays

鉴于以下...

```
 $itemarray = array()

  array(3) {
    [1]=>
    array(2) {
      [0]=>
      string(4) "4.00"
      [1]=>
      string(4) "1766"
    }
    [2]=>
    array(2) {
      [0]=>
      string(4) "5.00"
      [1]=>
      string(4) "1778"
    }
    [3]=>
    array(2) {
      [0]=>
      string(4) "5.00"
      [1]=>
      string(4) "1780"
    }
  } 
```

我想得到 的总和`array[x][0]`。目前我可以使用得到每个数组的总和

```
 $item_sum = array_sum($itemarray[$x]); 
```

我认为`$item_sum = array_sum($itemarray[$x][0]);`可能是这样，但它似乎不是。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T01:25:54.790

```
$sum = 0;
foreach ($itemarray as $x) {
  $sum += $x[0];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T01:26:05.150

如果您只想获得第一个元素的总和，您可以使用：

```
$item_sum = array_sum( array_map( 'reset', $array)); 
```

根据您的输入，您可以看到[此输出：](http://viper-7.com/ezmnjB)

```
float(14) 
```

# python - 创建 twitter 机器人 - 需要帮助提取字符串

> ID：15148841
> 
> 赞同：0
> 
> 时间：2013-03-01T01:22:58.320
> 
> 标签：python, python, twitter

我对[python](/questions/tagged/python "显示标记为“python”的问题")很陌生，我不知道最好的方法来做这件事。我四处寻找，我已经解决了我的大部分问题，但不是这个特定的问题。

我有一个充满随机诗歌的文本文件。出于测试目的，它是 lorem ipsum。我想做的是从中随机抽取一个 140 个字符的部分。但是，我只希望它包含完整的单词，所以去掉开头和结尾的空格。

例如。

> Lorem ipsum dolor sit amet, consectetur adipiscing elit。Praesent convallis nibh vitae ante dictum gravida。Faucibus orci luctus et ultrices posuere cubilia Curae 的前庭前庭；Vivamus scelerisque accumsan ante，quis porttitor libero tincidunt vel。Lorem ipsum dolor sit amet, consectetur adipiscing elit。Praesent ullamcorper ornare metus quis pulvinar。Nullam 在 magna mauris。Aenean nec arcu odio。

使用机器人，我可能会提取：

> faucibus orci luctus et ultrices posuere cubilia Curae 中的 tibulum ante ipsum primis；Vivamus scelerisque accumsan ante, quis porttitor liber

然后将其截断为：

> ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae；Vivamus scelerisque accumsan ante, quis porttitor

本质上，我正在尝试创建一个类似机器人的 horse_ebooks，它从文件中获取随机单词的随机字符串并将它们发布到 twitter 上。我已经把帖子都整理好了，我只需要提取字符串的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:43:04.590

```
 from random import random: 
```

> text = """ Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent convallis nibh vitae ante dictum gravida. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Vivamus scelerisque accumsan ante, quis porttitor libero tincidunt vel. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent ullamcorper ornare metus quis pulvinar. Nullam at magna mauris. Aenean nec arcu odio."""

```
poem_init = int(random()*(len(text)-140))
poem = text[poem_init:poem_init+140].split(" ")

if text.find(" "+ poem[0]) < 0:
    del poem[0]

if text.find(poem[-1] + " ") < 0 or text.find(poem[-1]) != len(text):
    del poem[-1]

poem = " ".join(poem)
print poem 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T01:37:27.380

您可以提取一首诗的前 140 个字符。

```
final_poem = poem_string[:140] 
```

然后为简单起见，您可以找到最后一个空间的位置，然后从该空间开始切断所有内容。

```
for i, char in enumerate(reversed(final_poem)):
    if char == ' ':
        chop = i + 1 # Remember indices start with 0
final_poem = final_poem[:-chop] 
```

可能不是最有效的代码，但它可以完成工作。

# php - 我如何每 30 天从我的 MySQL 数据库中显示一个随机行？

> ID：15148843
> 
> 赞同：0
> 
> 时间：2013-03-01T01:23:08.810
> 
> 标签：php, mysql, sql

我正在开发我的会员系统，我想每 30 天在侧边栏中显示一个“精选会员”，我希望选择是随机的。有任何想法吗？提示？

编辑：我了解如何查询数据库以显示随机行，我想知道我需要做什么才能**每 30 天显示一次数据**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T01:35:30.743

这实际上是2个问题：

~ 获得一个随机成员

~ 显示会员 30 天

第一部分可以使用来自 JW 的 SQL 查询或一系列其他查询方法来完成。

第二部分必须使用 PHP 完成。有很多方法可以做到这一点，对我来说，你的问题中最有趣的部分是*每 30 天*更换一次。

就我个人而言，我要么是一项 cron 工作，要么是使用一个基于月份的解决方案，并参考该月份的邮票来存储随机成员。如果月戳更改了随机成员存储的更改。类似的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T01:36:06.053

1.  创建一个数据库表来存储当前的，可能还有过去的选择
2.  创建一个每 30 天运行一次的 cron 作业
3.  填充表格，考虑到过去被选中的人
4.  利润 ！:-)

--根据需要使用表格进行选择和显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T01:44:36.470

`SELECT * FROM Members ORDER BY Rand() LIMIT 1`

就这些。您可以执行一项 cron 作业以每 30 天运行一次此查询。

# php - DIV 类到文件上传器 PHP Javascript

> ID：15148844
> 
> 赞同：0
> 
> 时间：2013-03-01T01:23:08.897
> 
> 标签：php, javascript, html, file-upload

这就是设置班级的原因。

```
 if(!isValidUsername(username))        
          return;
          document.getElementById("myResults").innerHTML = username; 
```

这是显示用户名的内容。

```
<div id="myResults"></div> 
```

我需要将该结果应用到此代码中，因此图像以 .png 格式上传。

```
 move_uploaded_file($_FILES["file"]["tmp_name"], $path."/<username>.png"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:28:56.023

如果

```
<div id="myResults"></div> 
```

与您的上传表单在同一页面上，您可以设置隐藏表单输入的值，然后使用 $_POST。

```
if(!isValidUsername(username))        
      return;
      document.getElementById("myResultsInput").value = username; 
```

和

```
<input type='hidden' name='myResults' id='myResultsInput' /> 
```

在 PHP 中：

```
$username = $_POST['myResults']; 
```

# c# - 异步/等待与线程

> ID：15148852
> 
> 赞同：113
> 
> 时间：2013-03-01T01:23:48.913
> 
> 标签：c#, .net, multithreading, async-await

在 .Net 4.5 中，Microsoft 添加了新`Async/Await`功能以简化异步编码。然而，我想知道

1.  可以`Async/Await`完全替代旧的使用方式 `Threads`吗？
2.  有`Async/Await`能力做任何`Thread`可以异步做的事情吗？
3.  只能`Async/Await`与某些方法一起使用，`WebClient.DownloadStringAsync`或者我可以转换任何同步方法以使其使用`Async/Await`而不阻塞主线程？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-03-01T02:34:02.083

> 它可以完全取代使用线程的旧方式吗？

不，线程可以做更多有用的事情。Await 专门用于处理需要时间的*事情*，最典型的是 I/O 请求。传统上是在 I/O 请求完成时通过回调完成的。编写依赖这些回调的代码非常困难，await 大大简化了它。

> 能够做任何线程可以异步做的事情吗？

大致。Await 只负责处理延迟，否则它不会做任何线程所做的事情。await 关键字右侧的await*表达式是完成工作的内容。*理想情况下，它根本不使用线程，它发布一个驱动程序请求，一旦驱动程序完成数据传输，它就会生成一个完成通知回调。到目前为止，网络是最常见的用法，数百毫秒的延迟很常见，并且服务从桌面或 LAN 转移到“云”是不可避免的副作用。同步使用这样的服务会使 UI 反应迟钝。

> 只能与 WebClient.DownloadStringAsync 等一些方法一起使用

不，您可以将它与任何返回任务的方法一起使用。XxxxAsync() 方法只是 .NET 框架中为需要时间的常见操作而预先准备好的方法。就像从 Web 服务器下载数据一样。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-01T02:12:56.190

[官方对此的说法。](https://msdn.microsoft.com/library/hh191443(vs.110).aspx)尽管在盲目地将一件事替换为另一件事之前，您应该了解线程和异步编程之间的区别。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-02-27T09:49:16.357

我是这样考虑的（如果您查看[https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2012/hh191443(v=vs.110 )，我认为微软也会这样做)#线程](https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2012/hh191443(v=vs.110)#threads))

Async/await 是一种在主应用程序线程上运行一些代码的快速方法，其优点是代码可以在没有工作时暂停自己并将焦点返回到主线程，当主线程出现时“唤醒”主线程是要获得的结果，然后将处理传递回 - 你猜对了 - 主线程。可以把它想象成 Basic 中基于事件的 GOTO 语句，它可以将控制权来回传递给特定的执行行。

相比之下，线程是一个单独的执行流，可以使用自己的变量等运行，其中 - 给定足够的硬件 - 执行与主线程并行发生。

如果您有一个 GUI 应用程序要下载单个文件，然后在下载该文件时对该文件执行某些操作 - 我将使用 async/await 方法来实现它。

但是，如果您的 GUI 需要下载 5000 个文件 - 我将创建一个文件下载线程来处理该问题，因为主 GUI 线程可能会在转移执行以处理下载文件时冻结。

# php - 等待连接 (netbeans-xdebug) MAMP OS X

> ID：15148855
> 
> 赞同：9
> 
> 时间：2013-03-01T01:23:50.037
> 
> 标签：php, macos, netbeans, mamp, xdebug

**前言**

几个小时后，我无法让 NetBeans 连接到 xdebug。几个月前，从旧版本的 MAMP 升级到 MAMP PRO 后，调试工作完美无缺。一周前它开始变得不稳定。它似乎已连接，但不会在断点处停止。重新启动 NetBeans (v7.0.1) 和 apache 有时会使其工作一小段时间。

我真的需要修复它，所以我安装了最新版本的 MAMP PRO (2.1.2)。现在我永远收到等待连接消息。

**我做过的测试**

当等待连接消息与移动条一起出现时，我查看它是否正在收听。这是...

```
# lsof -i -n -P |grep 9001
java  6496  tim  230u  IPv6 0xffffff80239d8190      0t0    TCP *:9001 (LISTEN) 
```

在 NetBeans php 配置中，我将解释器设置为：/Applications/MAMP/bin/php/php5.4.10/bin/php

执行以下操作：

```
# /Applications/MAMP/bin/php/php5.4.10/bin/php -i | grep xdebug 
```

告诉我 xdebug 和 phpinfo() 一样运行

我（多次）确认我的端口号在任何地方都相同。我试过端口 9000 和 9001。

*在xdebug.log*上执行尾部操作，然后从浏览器启动会话而不在 NetBeans 中启动调试会话会产生：

```
I: Connecting to configured address/port: localhost:9001.
E: Could not connect to client. :-( 
```

随着等待连接消息*并*从浏览器启动会话，我在日志中得到了这个：

```
: Connecting to configured address/port: localhost:9001.
I: Connected to client. :-)
-> <init xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/xdebug" fileuri="file:///Users/tim/MAMPSites/facts.tvd.us/htdocs/sendfile/tim.php" language="PHP" protocol_version="1.0" appid="7279" idekey="netbeans-xdebug"><engine version="2.2.1"><![CDATA[Xdebug]]></engine><author><![CDATA[Derick Rethans]]></author><url><![CDATA[http://xdebug.org]]></url><copyright><![CDATA[Copyright (c) 2002-2012 by Derick Rethans]]></copyright></init>

-> <response xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/xdebug" status="stopping" reason="ok"></response> 
```

我的 php.ini 文件有以下内容：

```
[xdebug]
zend_extension="/Applications/MAMP/bin/php/php5.3.20/lib/php/extensions/no-debug-non-zts-20090626/xdebug.so"
xdebug.remote_enable=on
xdebug.remote_log="/var/log/xdebug.log"
xdebug.remote_host=localhost
xdebug.remote_handler=dbgp
xdebug.remote_port=9001
xdebug.idekey="netbeans-xdebug" 
```

**更新**

我刚刚注意到上面的 lsof 命令显示 NetBeans 正在侦听 ipV6。强制 java (NetBeans) 使用 ipV4 没有帮助。

```
launchctl setenv JAVA_TOOL_OPTIONS -Djava.net.preferIPv4Stack=true 
```

我发现一篇帖子建议进行测试以确认 xdebug 工作正常。创建一个php文件：

```
<?php
$address = '127.0.0.1';
$port = 9000;
$sock = socket_create(AF_INET, SOCK_STREAM, 0);
socket_bind($sock, $address, $port) or die('Unable to bind');
socket_listen($sock);
$client = socket_accept($sock);
echo "connection established: $client";
socket_close($client);
socket_close($sock);
?> 
```

从命令行运行它并在浏览器中加载任何页面，并在 url 末尾添加以下内容：

```
?XDEBUG_SESSION_START=nb 
```

如果它输出类似“已建立连接：资源 id #5”的内容，则 xdebug 工作正常。有了这个，我重新安装了 Java 和 NetBeans。我告诉 NetBeans 不要导入我现有的首选项...仍然没有连接。

**更新2**

我为 Mac 安装了 phpStorm IDE。我对它了解得足够多，可以让调试器与我现有的 MAMP 和 xdebug 设置一起运行。我认为这证实了问题出在 NetBeans 上。

在这一点上，让这个工作似乎是不可能的。:(

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-22T10:26:39.443

我问了同样的问题，得到了很好的答案：[如何在 PHP 中跟踪每行/行块/方法的执行时间？](https://stackoverflow.com/q/17651854/1114320)，除此之外，我对当前正在运行的具有相同内容的其他问题也有此答案。

关于这一点的一些额外说明（我在我自己研究这个问题的其他 SO 帖子中收集的东西）：

1.  该端口也可能是 9001（似乎对某些人有用，而 9000 则不行）。
2.  切换到 PHPStorm IDE 是解决此问题的真正替代方案（因为 PHPStorm 已经包含完美运行的 xdebug）。
3.  [通过向导 ( http://xdebug.org/wizard.php](http://xdebug.org/wizard.php) )下载新版本的 xdebug ，如果您按照说明进行操作，也许您会很幸运。
4.  关闭防火墙可能会有所帮助。
5.  添加到 php.ini: `xdebug.idekey=netbeans-xdebug`。
6.  查看您是否有 xdebug.ini 文件并将与 xdebug 相关的 php.ini 行添加到该文件中。
7.  您必须取消注释 zend_extension 行（即`;`在其开头删除），因此实际上加载了 Xdebug。
8.  确保加载了 Xdebug，从 PHP 文件调用 phpinfo()（只是为了确定）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-14T14:55:26.473

Xdebug will only connect if there is an index.php file in your project folder, so check to make sure you have one.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-06T18:43:32.790

它现在对我有用。我已经安装了 LAMP。我根据上面的所有答案进行了修改，启动了 apache2，现在它飞起来了......我很高兴......有一段时间我想切换到 phpstorm，但我重新考虑......再调整一点......等等。它正在工作。

这是我在 php.ini 中的内容

```
zend_extension = /usr/lib/php5/20121212/xdebug.so

xdebug.max_nesting_level = 250
xdebug.auto_trace=On
xdebug.remote_enable=On
xdebug.remote_port=9001
xdebug.remote_handler=dbgp
xdebug.remote_host=localhost
xdebug.remote_log="/var/log/xdebug.log"
xdebug.trace_output_dir=/var/www/AMRO
xdebug.idekey="netbeans-xdebug" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-04T15:23:32.473

在干净下载和安装在 xampp 上工作的 netbeans 时，xdebug 工作，除了不会在断点处停止。将 php.ini 更改为：xdebug.remote_enable = 1（从 0）并且 xdebug 按预期工作！

# ruby-on-rails - 未定义的局部变量或方法“用户”

> ID：15148862
> 
> 赞同：1
> 
> 时间：2013-03-01T01:24:11.183
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试执行以下操作：

**index.html.erb**

```
<div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>

<script>
    $(function () {
        var chart;
        $(document).ready(function () {
            chart = new Highcharts.Chart({
                chart:{
                    renderTo:'container',
                    type:'column'
                },
                title:{
                    text:'<%= Date.today.strftime("%B")%> Overtime'
                },
                xAxis:{
                    categories:[

                        '<%= Date.today.strftime("%B")%>'

                    ]
                }, 
                yAxis:{
                    min:0,
                    title:{
                        text:'Hours'
                    }
                },
                legend:{
                    layout:'vertical',
                    backgroundColor:'#FFFFFF',
                    align:'left',
                    verticalAlign:'top',
                    x:100,
                    y:70,
                    floating:true,
                    shadow:true
                },
                tooltip:{
                    formatter:function () {
                        return '' +
                                'Hours' + ': ' + this.y;
                    },

                    credits:{
                        text:'migroup-.co.uk',
                        hreft:'http://wwww.migroup.co.uk'
                    }
                },
                plotOptions:{
                    column:{
                        pointPadding:0.4,
                        borderWidth:0
                    }
                },

                series:[
                    <% @user.hospital_bookings.each do |hospital_booking| %>

                    {
                        name:'<%= hospital_booking.try(:name)%>',
                        data:[<%= hospital_booking.sum(&:overtime)%>

                        ]
                        // color: '#8F8689',
                    },
                    <% end %>
                    {
                        name:'Total',
                        data: [<%= @hospital_bookings.to_a.sum(&:overtime)%>],
                        color:'#FE9D00'
                    }
                ]
            });
        });

    });

</script> 
```

**控制器.rb**

定义索引

```
@user = User.all
@hospital_bookings = HospitalBooking.scope 
```

结束结束

我想要做的是为每个用户，迭代他们的预订并总结他们的`overtime`.

楷模

```
User.rb 
has_many :hospital_bookings 

Hospital_booking
belongs_to :user 
```

这将有效地做的是让用户和他们的加班时间相加。但由于某种原因，这不起作用。我目前拥有的是看起来像前锋的 highcharts：

[伊姆古尔](http://i.imgur.com/dhGgzGz.png)。每个条形代表一个单独的医院预约和他们的加班时间。但是，我只想对用户加班时间进行总计。如此有效，每个用户都有一个酒吧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:18:22.877

有问题，你正在做：

```
@user = User.all
@user.hospital_bookings.each do |hospital_booking|
  ...
end 
```

但问题是，当您执行 User.all 时，您将获得一组用户，而不是单个用户，所以如果您这样做：

```
@users = User.all
@users.each do |user|
  user.hospital_bookings.each do |hospital_booking|
  end
end 
```

这将起作用，但是您可能想要显示单个用户的预订，可能您需要执行类似的操作

```
@user = User.find(params[:id])
@user.hospital_bookings.each do |hospital_booking|
  ...
end 
```

顺便说一句，我也在健康行业，请随时联系我 :)

# javascript - 使用 javascript 调整 Image() 对象的大小不起作用

> ID：15148865
> 
> 赞同：2
> 
> 时间：2013-03-01T01:24:31.967
> 
> 标签：javascript, canvas, background

我在 javascript 中有一个图像对象，我将其用作乒乓球游戏的背景。但是，图像比画布大，所以我尝试用这个缩小它

```
var bg=new Image(); 
bg.src='bg.png';
bg.width=600;
bg.height=400; 
```

但是，在画布中，图像没有改变大小。有谁知道是什么原因造成的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-11T20:36:22.610

要调整整个图像的大小，而不是从源手动调整大小，将宽度和高度参数添加到`drawImage()`方法中，如下所示

```
 ctx.drawImage(bg,0,0,600,400); 
```

# asp.net-mvc - 何时在 MVC4 应用程序中使用 DTO（数据传输对象）？

> ID：15148866
> 
> 赞同：4
> 
> 时间：2013-03-01T01:24:32.353
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我已经阅读了很多关于仅在需要时使用模式的信息。我目前正在编写一个非常简单的应用程序，它实现了存储库和服务模式——我现在正在讨论是否使用 DTO 将我的域对象传递给视图。这是一个单页应用程序。

我开始在我的模型中创建 DTO 类，但仍然无法理解它们提供了什么好处。感觉就像我只是无缘无故地复制一切。

什么时候适合使用 DTO？在什么时候它变得必要或有益？任何示例/样本都会很棒。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T01:44:27.650

> 我开始在我的模型中创建 DTO 类，但仍然无法理解它们提供了什么好处。

那么在这种情况下，它们很可能不会提供任何好处。坚持最简单的方法总是最好的，因此您可能会尝试不必要地增加复杂性。

我想说，当您只需要传递一些平面数据而不需要复杂的域对象时，DTO 很有用。在我看来，如果可能的话，*最好*将您的视图直接绑定到您的业务对象。如果没有别的，它会提供一个健全性检查，以确保您的业务对象符合您的使用场景。[事实上，这是CSLA 框架](http://www.lhotka.net/cslanet/)（以及其他）所倡导的方法，它专注于业务对象。

我发现自己将域对象转换为 DTO 的最常见场景是：

1.  当我对外部服务有一个抽象的依赖（它本身与我的内部域对象不一致）并且我想让服务接口本身非常简单时。我没有在服务层内进行所有翻译，而是让服务层本身使用 DTO 并在两者之间构建一个翻译层。
2.  当我通过 AJAX 调用将序列化对象返回给 JavaScript 并且不希望我的域对象的所有额外开销通过网络时。保持 JavaScript 本身更简单，不通过外部网络连接传输不必要的数据等。
3.  当我有一个使用各种域对象数据的组合而不是其超集的视图时。在某些情况下，这可能表明该视图代表了一个值得拥有自己的域对象的用例（可能是其他对象的组合，或者可能所有涉及的对象都应该是较小的非聚合根对象的组合，这取决于） ，所以要小心这种情况。但有时只是制作一个中间 DTO 会使代码更简单、更干净。

我认为关键在于将数据从一种形状转换为另一种形状。如果在服务、控制器或视图中进行大量翻译......那么也许该翻译是一个足够大的组件，值得拥有自己的对象。真的，这都是关于关注点分离的。一个好的经验法则是，如果一段代码“出于某种目的重新塑造数据*并*实现该目的”，那么这段代码正在做两件事。将其分成两段代码可能会更好。DTO 是这两者的通信方式。

有一些工具（例如[AutoMapper](http://automapper.org)）可以帮助在志同道合的对象之间转换大量“脚手架”代码。

# c# - 在一天中的两个特定时间运行 Windows 服务

> ID：15148868
> 
> 赞同：0
> 
> 时间：2013-03-01T01:24:36.340
> 
> 标签：c#, windows, events, service, time

我在 C# 中有一个简单的 Windows 服务，可以将图片数据库复制到目录中。我需要它每天执行两次：早上 6:00 一次，下午 6:00 再一次。

我可以实现什么样的代码来检查一天中的时间，如果是上午 6:00 或下午，那么运行一些代码方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:45:49.330

任务调度程序应该足以在您希望完成工作时运行您的应用程序。[http://msdn.microsoft.com/en-us/library/windows/desktop/aa383614(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383614(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T01:27:57.250

我建议将调度逻辑与业务逻辑分开。

使用[Quartz.net 之](http://quartznet.sourceforge.net/)类的东西来满足您的日程安排需求。它使用 cron 样式的调度语法。

# java - Objective-C：扩展 UIViewController 会导致意想不到的“自我”和“超级”感

> ID：15148871
> 
> 赞同：1
> 
> 时间：2013-03-01T01:24:48.660
> 
> 标签：java, ios, uiviewcontroller

假设我有一个 UIViewController

```
@interface CustomController : UIViewController 
@end

@implementation CustomController

- (void)myMethod {
     //this is the problematic line. It calls viewDidLoad of ExtendedController
     //but it should be calling viewDidLoad of CustomController
     [self viewDidLoad]; 
}

- (void)viewDidLoad {
   //and this line should call viewDidLoad from UIViewController
   [super viewDidLoad];
} 
```

然后我有另一个扩展了那个

```
@interface ExtendedController : CustomController
@end

@implementation ExtendedController

- (void)viewDidLoad {
   [super myMethod];
} 
```

ExtendedController在启动时调用ExtendedController中的viewDidLoad，然后调用CustomController的myMethod，再调用ExtendedController的viewDidLoad，就是死循环。

我怎样才能做到这一点，所以 CustomController 的 myMethod 总是在 CustomController 类中调用 viewDidLoad，而不是任何其他类。

这对我来说没有多大意义，因为例如在 Java 中，这种设置按预期工作。但不知何故，在 iOS 中扩展类时，“自我”的概念就消失了。

```
public class Hello extends Omg {
   public void myMethod() {
      //in Java, this method does indeed call "viewDidLoad" in "Hello"
      this.viewDidLoad();
   }

   public viewDidLoad() {
      //in Java, this method does indeed call "viewDidLoad" in class "Omg"
      super.viewDidLoad(); 
   }
}

public class ExtendedHello {
   public void viewDidLoad() {
      super.viewDidLoad();
   }
} 
```

如何修复我的 iOS 代码以获得预期的行为？

更新：请注意，“viewDidLoad”可以替换为任何方法名称......这个问题与它是 viewDidLoad 的事实无关。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:46:04.377

这正是它在 Objective C 中应该如何工作的方式。当您调用 [self viewDidLoad] 时，它实际上是在生成对 objc_msgSend(self,@selector(viewDidLoad),...) 的调用，它使用“self”（在此case 恰好是 ExtendedController 的一个实例）来查找要执行的实际函数。简而言之，'self' 是实际类的一个实例，所以如果一个超类定义了该函数，那么它将被调用。

顺便说一句，调用 viewDidLoad 对您来说可能没有意义，因为它是在特定时间自动调用的。

# python - Swig[C->Python]：如何处理原始类型的输入或输出函数参数？

> ID：15148872
> 
> 赞同：1
> 
> 时间：2013-03-01T01:24:51.030
> 
> 标签：python, c, swig

例如，我有

my_types.h

```
typedef uint16_t my_type_1;
typedef uint8_t my_type_2; 
```

my_types.c

```
int my_func(my_type_1 * arg1, my_type_2 * arg2, my_type_3 *arg3)
{
    *args3 = *arg1 + *arg2;
    return 0;
} 
```

如何定义接口文件以将其包装到 python 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T08:50:08.277

假设您在 my_types.h 中*也没有*声明，`my_func`那么您的界面可以变为：

```
%module test

%{
#include "my_types.h"
%}

%include <stdint.i>

%include "my_types.h"

%apply uint16_t *INPUT { my_type_1 * arg1 };
%apply uint8_t *INPUT { my_type_2 * arg2 };
%apply uint16_t *OUTPUT { my_type_1 *arg3 };

int my_func(my_type_1 * arg1, my_type_2 * arg2, my_type_1 *arg3); 
```

这足以让您按如下方式使用它：

```
import test

print test.my_func(100, 50)[1] 
```

您的“真实”返回是元组中的位置 0，第一个 OUTPUT 位于位置 1。

# sorting - 将 GameObjects 从数组排序到空间中的参考点

> ID：15148874
> 
> 赞同：1
> 
> 时间：2013-03-01T01:25:07.517
> 
> 标签：sorting, unity3d

我在一个数组中有一些 GameObject，我想根据空间中的一个点按距离对它们进行排序。所以基本上我正在寻找一个按距离算法排序的点。

我确定这是基本的排序算法，但到目前为止我在 Google 上找不到有效的答案。

谢谢您的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:58:13.940

这应该让你开始：

```
System.Array.Sort<GameObject>(arrayOfGameObjects,
(g1, g2) => 
    (Vector3.Distance(target,g1.transform.position) < 
     Vector3.Distance(target,g2.transform.position))?-1:1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T09:13:13.690

杰达克的回答是对的。如果您可以使用数组的有序副本，而不是对原始副本进行排序，则另一种方法是使用`Linq` [OrderBy](http://msdn.microsoft.com/it-it/library/bb534966%28v=vs.95%29.aspx)扩展方法`Enumerable`：

```
Vector3 targetPos;
IEnumerable<Pet> ordered = arrayOfGameObjects.OrderBy(
    obj => Vector3.Distance(obj.transform.position,targetPos)); 
```

# asp.net - 无法读取配置部分“siteMap”，因为它缺少部分声明

> ID：15148876
> 
> 赞同：1
> 
> 时间：2013-03-01T01:25:19.313
> 
> 标签：asp.net, iis-7

我的 web.config 中有这段代码，但我仍然有错误。我正在使用 IIS 7.5 和 Windows 7 Pro

```
>   <siteMap>
>     <providers>
>       <clear/>
>       <add name="SiteMapDataSource1" description="Default SiteMap provider." type="System.Web.XmlSiteMapProvider"
> siteMapFile="web.sitemap" />
>     </providers>   </siteMap> 
```

错误

> 无法读取配置部分“siteMap”，因为它缺少部分声明

我在 masterPage.master 中有这段代码

```
 <asp:TreeView ID="TreeView1" runat="server" CssClass="style6" DataSourceID="SiteMapDataSource1"
                        Width="220px" AutoGenerateDataBindings="False" Height="263px" ImageSet="Arrows">
                        <ParentNodeStyle Font-Bold="False" />
                        <HoverNodeStyle Font-Underline="True" ForeColor="#5555DD" />
                        <SelectedNodeStyle Font-Underline="True" ForeColor="#5555DD" HorizontalPadding="0px"
                            VerticalPadding="0px" />
                        <NodeStyle Font-Size="12pt" ForeColor="Black" HorizontalPadding="5px" NodeSpacing="0px"
                            VerticalPadding="0px" Font-Names="Times New Roman" />
                    </asp:TreeView>
                    <asp:SiteMapDataSource ID="SiteMapDataSource1" runat="server" ShowStartingNode="true"
                        EnableViewState="false" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-02T18:05:16.510

你必须把你的`<siteMap>...</siteMap>`内心`<system.web>...</system.web>`让它发挥作用。

更多信息：http: [//msdn.microsoft.com/en-us/library/ms178428.aspx](http://msdn.microsoft.com/en-us/library/ms178428.aspx)

# ios - 在宏中确定当前的构建类型/方案

> ID：15148877
> 
> 赞同：0
> 
> 时间：2013-03-01T01:25:43.137
> 
> 标签：ios, xcode

我希望能够通过宏阻止存档构建（用于分发），这样我就不会忘记添加或更改关键功能。

理想情况下，我想做：

```
#define REQUIRE_FIX(ERROR_MSG) (\
#if __ \
#error ERROR_MSG \
#endif) 
```

我需要做什么`__`来检查当前的构建类型/方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:03:54.450

您可以在目标的构建选项中为每个构建方案设置预处理器定义。

![在此处输入图像描述](../Images/2fde6b41a34f85b5feea0b27fed7a03b.png)

通常要阻止存档构建，我只会使用

```
#ifndef DEBUG
    #error "Fix this first!"
#endif 
```

# mysql - 查询同一张表的多行对应一个变量

> ID：15148883
> 
> 赞同：0
> 
> 时间：2013-03-01T01:26:13.793
> 
> 标签：mysql, join

我有一个这样的表设置：

> session_id | event_id | 版主 | 扬声器_1 | 扬声器_2 | 扬声器_3 | ...继续前往 Speaker_10

我想要做的是设置一个搜索 1 个变量`"speakerid = 13245"`并检查行的查询

> '主持人'，'speaker_1'，'speaker_2'，'speaker_3'，'speaker_4'，'speaker_5'，'speaker_6'，'speaker_7'，'speaker_8'，'speaker_9'，'speaker_10'

然后返回对应于任何 11 个扬声器行中包含 speakerid = 12345 的任何行的每个“session_id”。

我知道它与 INNER JOIN 有关，但经过大量搜索后，我找不到任何足够具体的东西。我多年来一直关注stackoverflow，这是我的第一篇文章。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:53:33.267

您可以`in`在`where`子句中使用：

```
select session_id
from t
where 13245 in (moderator, speaker_1, speaker_2, speaker_3, speaker_4, 
                speaker_5, speaker_6, speaker_7, speaker_8, speaker_9, 
                speaker_10) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T01:30:45.923

我认为您只需要使用`LIKE`with`OR`即可返回任何字段包含“speakerid = 12345”的行：

```
SELECT Session_Id
FROM YourTable
WHERE Moderator Like '%speakerid = 13245%' 
   OR speaker_1 Like '%speakerid = 13245%' 
   OR ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T01:31:37.243

您应该阅读数据库规范化，因为`speaker_n`列是一个不好的迹象。您可能需要一个`Speakers`表和一个“Session-Speakers”映射表。这肯定会使您的查询更容易，但现在您别无选择，只能搜索所有列：

```
SELECT sesion_id FROM t1 WHERE
    moderator = '12345'
    OR speaker_1 = 12345 
```

等等

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T01:32:14.383

听起来您确实需要规范化此表，并通过第三个 sessions_speaker 表拥有一个会话/事件表和一个与之相关的演讲者表。这样，当您有超过 12 位发言人的活动时，您无需更改表架构。

话虽如此，您可以像这样查询以获得所需的结果

```
SELECT session_id
FROM table
WHERE
moderator = ?
OR speaker_1 = ?
OR speaker_2 = ?
...
OR speaker_11 = ? 
```

# iphone - 单击按钮时如何随机显示三种颜色？

> ID：15148884
> 
> 赞同：0
> 
> 时间：2013-03-01T01:26:20.177
> 
> 标签：iphone, objective-c, button, uilabel, uicolor

单击按钮时，我一直在尝试使用屏幕中的标签显示三种随机颜色。

```
-(IBAction)spinButton:(id)sender;
{
    NSLog(@"Spin started.");

    NSLog(@"Message");
    NSLog(@"Message %@", nsString);

    printf("%s\n", [@"Button Press" UTF8String]);
    printf("%s %d %d %d\n", [@"Color: " UTF8String], wheelLeftColor, wheelMiddleColor, wheelRightColor);

    wheelLeftColor.backgroundColor = [UIColor colorWithRed: 0.9 green: 0.9 blue: 0.6 alpha: 1.0];
    wheelMiddleColor.backgroundColor = [UIColor colorWithRed: 0.9 green: 0.3 blue: 0.6 alpha: 1.0];
    wheelRightColor.backgroundColor = [UIColor colorWithRed: 0.5 green: 0.6 blue: 0.3 alpha: 1.0];
[NSString stringWithFormat:@"%d", int_num]

time_t seed = time(0);
srandom((int)seed);

int num = random() % 3; 
```

我不知道如何使这项工作。我有一个想法，但不确定如何实现它，在操作方法中，传递标签对象和颜色代码这里的问题是如何使用整数来存储一个值 1 - 3 来表示每个轮子的颜色？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T01:37:56.533

尚未测试，但它应该可以工作。

```
- (UIColor *)randomColor
{
    return [UIColor colorWithRed:[self randomColorComponentValue] green:[self randomColorComponentValue] blue:[self randomColorComponentValue] alpha:1];
}

- (CGFloat)randomColorComponentValue
{
     CGFloat random = (CGFloat)arc4random()%255;
     return random/255.0f;
}

- (IBAction)spinButton:(id)sender
{
    wheelLeftColor.backgroundColor = [self randomColor];
    wheelMiddleColor.backgroundColor = [self randomColor];
    wheelRightColor.backgroundColor = [self randomColor];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:48:15.563

奥斯卡的回答也一样，而且更详细。但是这里有一个简洁的方法。

```
-(UIColor *)randomCOlor{

   return [UIColor colorWithRed:(arc4Random()%10)/10.0f green:(arc4Random()%10)/10.0f blue:(arc4Random()%10)/10.0f alpha:1];

} 
```

所以

```
UIColor *someColor = [self randomColor]; 
```

**更新：** 如果你想从预定义的值中选择一种随机颜色，你可以使用 belo 代码：

让`color1,color2,color3`三个（根据您的要求的任何数字） UIColor 对象。然后您可以选择如下所示的随机值，并在延迟 3 秒后设置标签的颜色：

```
NSArray *colorArray = [NSArray arrayWithObjects:color1,color2,color3,nil];
NSInteger index = arc4random()%[colorArray count];
UIColor *selColor = [colorArray objecatAtIndex:index-1]; 
```

然后像问题中提到的那样传递这个颜色对象和标签对象来设置颜色。

您可以使用`performSelector:withObject:withDelay:`延迟后调用方法。

# c# - 停止自动隐藏托盘通知图标

> ID：15148886
> 
> 赞同：9
> 
> 时间：2013-03-01T01:26:25.300
> 
> 标签：c#, .net, vb.net, windows-7, notifyicon

每当我的 windows 窗体应用程序第一次运行时，托盘图标保持可见大约不到一分钟，然后它会自动隐藏，我该怎么做才能让它粘住而不是自动隐藏？

我尝试搜索并找不到任何有用的信息。

看来这是 Windows 7 及更高版本的默认行为，我想知道是否有办法从我的应用程序内部覆盖该行为？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T01:33:35.993

不支持以编程方式覆盖系统的默认显示/隐藏通知图标行为。[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ee330740%28v=vs.85%29.aspx#notification)：

> 在 Windows 7 上将图标添加到通知区域时，默认会添加到通知区域的溢出部分。此区域包含处于活动状态但在通知区域中不可见的通知区域图标。*只有用户可以将图标从溢出中提升到通知区域*，尽管在某些情况下系统可以将图标临时提升到通知区域作为短预览（不到一分钟）。

强调我的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T01:56:29.663

毫无疑问，您已经阅读了评论中的讨论，确实没有*支持*这样做的方式。也就是说，如果您下定决心并且有时间进行一些挖掘，我建议您使用一些工具绕过文档并通过通知设置查看引擎盖下实际发生的情况。可能有适当的文档，但我没有找到它。

蛮力方法是使用 SysInternal 的 RegMon 工具来查看所有注册表访问。如果您将其与“Explorer.exe”进程相关联，您将看到有关桌面和开始栏正在做什么的所有相关信息，包括任何文件访问。别搞错了——这是一种蛮力的方法，需要大量的努力和挖掘。一旦绑定到 explorer.exe 进程，您就可以更改通知设置。查看和调查过程所做的更改将使您了解相关设置的存储位置以及存储方式。不利的一面是，将有大量数据需要搜索和调查以找出发生了什么，但这是可以做到的。这**不是**一个理想的解决方案，但如果没有其他解决方案，恐怕您将面临粗略和现成的方法。这取决于您想为此付出多少努力。

# java - Spring Security 如何在 Servlet 上工作

> ID：15148898
> 
> 赞同：0
> 
> 时间：2013-03-01T01:27:19.390
> 
> 标签：java, spring, servlets, spring-security

我有一个调用 Servlet 的 java：

```
public class UserServlet extends HttpServlet {

    @Autowired
    private UserService userService;

    @Override
    protected void service(final HttpServletRequest request, final HttpServletResponse response) throws ServletException, IOException {
        userService.checkUser();
        userService.doSomethingRestricted();
    }

    @Override
    public void init(final ServletConfig config) throws ServletException {
            SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);
            SpringBeanAutowiringSupport.processInjectionBasedOnServletContext(this, config.getServletContext());
            super.init(config);
    }

} 
```

还有我的自动接线服务：

```
@Component(value = "userService")
public class UserService {

    public boolean checkUser() {
        if (SecurityContextHolder.getContext().getAuthentication() != null) {
            Authentication auth = SecurityContextHolder.getContext().getAuthentication();
                if (auth != null && auth.getPrincipal() != null && auth.getPrincipal() instanceof User) {
                    User springUser = (User) auth.getPrincipal();
                    if (springUser != null) {
                        LOG.debug("USER CONNECTED :: {}", springUser.getUsername());
                    }
                }
        } else {
            LOG.debug("NO CONNECTED USER, CREATING ONE");
            Collection<GrantedAuthority> authorities = getGrantedAuthorities();
            org.springframework.security.core.userdetails.User springUser = new org.springframework.security.core.userdetails.User("user","password", true, true, true, true, authorities);
            Authentication auth = new UsernamePasswordAuthenticationToken(springUser, "", authorities);
            SecurityContext sc = new SecurityContextImpl();
            sc.setAuthentication(auth);
            SecurityContextHolder.setContext(sc);
        }
        return true;
    }   

    @Secured({ "CONNECTED" })
    public void doSomethingRestricted() {
        LOG.debug("SOMETHING RESTRICTED HAS BEEN DONE!!");
    }

} 
```

*   当我第一次测试我的应用程序时，Java 客户端向`POST`服务器发送一个，服务器会检查用户并且找不到上下文：将创建一个新的上下文。

*   当我随后运行 java 客户端时，我找到了一个现有的上下文（在第一次调用中创建的那个）。

显然缺少一些东西，因为如果第一个用户成功登录，并不意味着任何用户都可以连接。

我错过了什么？起初我考虑为每个 Java 客户端的实例使用会话（我没有 Web 浏览器客户端，所以我需要手动设置会话 ID），但是 Spring 什么时候应该在 http 请求中获取或设置会话 ID？

**TL;DR** ：`SecurityContextHolder.getContext().getAuthentication()` 在我的例子中做了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T01:59:15.043

它为您获取当前登录用户的身份验证详细信息，您添加了吗？

```
<bean id="httpSessionFilter" class="org.springframework.security.web.context.SecurityContextPersistenceFilter"/> 
```

为了引入 web 应用程序的登录，spring security 也被设计为与 POJO 一起使用，如果您使用旧方式，则需要在映射中添加此过滤器。如果您在 applicationContext 中使用 http 标签，那么它应该可以正常工作。

```
</security:filter-chain-map> 
```

自从我在 applicatin Context 中使用没有新的 http 标签的情况下使用 spring security 已经很长时间了。spring 安全上下文带有不同的过滤器，SecurityContextPersistenceFilter 决定了上下文是如何被持久化的。

“org.springframework.security.web.context.SecurityContextPersistenceFilter”用于在每个会话中持久化安全上下文。

Spring 安全性源自其与 acegi 安全性的集成，后者曾经为同一任务使用“net.sf.acegisecurity.ui.webapp.HttpSessionIntegrationFilter”过滤器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:06:17.753

It is a filter , so spring can identify session based on sessionid.

# asp.net - 在 Windows 服务中使用但服务未启动的 IIS 中托管的 WCF 服务的调用方法

> ID：15148908
> 
> 赞同：0
> 
> 时间：2013-03-01T01:28:23.913
> 
> 标签：asp.net, wcf, windows-services, wcf-binding

你能告诉我为什么我无法启动我的 Windows 服务吗？一旦我开始它就会立即停止给我没有工作可做的错误。

这是代码：

```
 namespace BulkEmailWindowsService
 {
     public class EmailService : ServiceBase 
     {     
         public ServiceHost serviceHost = null;

         public EmailService()
         {
           // Name the Windows Service
             ServiceName = "WCFWindowsBulkEmailService";
         }

         public static void Main()
         {
             ServiceBase.Run(new EmailService()); //-------- Stops right here..
         }

         // Start the Windows service.
         protected override void OnStart(string[] args)
         {
             if (serviceHost != null)
             {
                 serviceHost.Close();
             }

             try
             {
                 Console.WriteLine("Testing 1");
                 System.Diagnostics.Debugger.Break();
                 serviceHost = new ServiceHost(typeof(TestBulkEmailService.IBulkEmailService));

                 serviceHost.Open();

                 Console.WriteLine("Testing 1");
                 string logBaseDirectory = "C:\\BulkEmailPrototype\\BulkEmailWindowsService\\BulkEmailWindowsService\\Logs\\BulkEmailWindowsService";
                 int loggingLevel = int.Parse("5");
                 int maximumLogFileSize = int.Parse("2");
                 AppLogger.TraceInfo("Initialization(): Reading configuration settings from config file...");
                 AppLogger.Init(logBaseDirectory, 0, loggingLevel, "WCFBulkEmail.log", maximumLogFileSize);
                 AppLogger.TraceInfo("Bulk Email Processing Service is starting....");

                 using (BulkEmailWindowsService.TestBulkEmailService.BulkEmailServiceClient wfc1 = new BulkEmailWindowsService.TestBulkEmailService.BulkEmailServiceClient())
                 {
                     try
                     {
                         AppLogger.TraceInfo("Database and Email Processing starting....");
                         BulkEmailDTOList result1 = new BulkEmailDTOList();
                         result1 = wfc1.GetBulkEmailInfo(1);
                         AppLogger.TraceInfo("Database and Email Processing done....");
                     }
                     catch
                     {
                         AppLogger.TraceInfo("Error in processing Database and Email....");
                     }

                 }

                 serviceHost.Close();
                 serviceHost = null;
             }
             catch (Exception ex)
             {
                 // Log the exception.
                 Console.WriteLine("Error in ONStart ");
                 AppLogger.TraceInfo("Error in OnStart of Bulk Email Processing Service....");
             }

         }

         protected override void OnStop()
         {
             if (serviceHost != null)
             {
                 serviceHost.Close();
                 serviceHost = null;
             }
         }

     }
 } 
```

这是我的 app.config 文件：

```
 <system.serviceModel>
     <bindings>
       <basicHttpBinding>
         <binding name="BasicHttpBinding_IBulkEmailService" closeTimeout="00:01:00"
           openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:10:00"
           allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
           maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
           messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
           useDefaultWebProxy="true">
           <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
             maxBytesPerRead="4096" maxNameTableCharCount="16384" />
           <security mode="TransportCredentialOnly">
             <transport clientCredentialType="Windows" proxyCredentialType="None"
               realm="" />
             <message clientCredentialType="UserName" algorithmSuite="Default" />
           </security>
         </binding>
       </basicHttpBinding>
     </bindings>
     <client>
       <endpoint address="http://localhost/TestBulkEmailService/TestBulkEmailService.svc/BulkEmailService"
         binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IBulkEmailService"
         contract="TestBulkEmailService.IBulkEmailService" name="BasicHttpBinding_IBulkEmailService" />
     </client>
   </system.serviceModel>
   <startup>
     <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
   </startup>
 </configuration> 
```

请注意，托管在 IIS 上的 WCF 服务运行良好，我使用 Web 应用客户端对其进行了测试。因为我需要自己不断地运行这个服务（从数据库中为一堆行发送电子邮件），所以我试图把它放在一个带有启动和停止的 Windows 服务中。如果您知道任何其他更简单并且可以做同样的方法，请告诉我。

这就是我的安装程序

```
namespace BulkEmailWindowsService
{

  // Provide the ProjectInstaller class which allows 
  // the service to be installed by the Installutil.exe tool
  [RunInstaller(true)]
  public class ProjectInstaller : Installer
  {
     private ServiceProcessInstaller process;
     private ServiceInstaller service;

     public ProjectInstaller()
     {
        process = new ServiceProcessInstaller();
        process.Account = ServiceAccount.LocalSystem;
        service = new ServiceInstaller();
        service.ServiceName = "WCFWindowsBulkEmailService";
        Installers.Add(process);
        Installers.Add(service);
     }
  }
 } 
```

所以这是不对的吗？我很困惑 Main 会来哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:01:37.290

在你的 Main 方法中试试这个。

```
private static void Main()
{
    try
    {
        ServiceBase[] ServicesToRun;
        ServicesToRun = new ServiceBase[]
        {
            new WindowsService()
        };
        ServiceBase.Run(ServicesToRun);
    }
    catch (Exception ex)
    {
        Logger.Error(ex.Message)); // if you have a logger?
    }
} 
```

windows服务的实现应该是这样的：

```
public partial class WindowsService : ServiceBase
{
    internal static ServiceHost myServiceHost = null;

    public WindowsService()
    {
        InitializeComponent();
    }

    protected override void OnStart(string[] args)
    {
        if (myServiceHost != null)
        {
            myServiceHost.Close();
        }
        myServiceHost = new ServiceHost(typeof (EmailService));
        myServiceHost.Open();
    }

    protected override void OnStop()
    {
        if (myServiceHost != null)
        {
            myServiceHost.Close();
            myServiceHost = null;
        }
    }
} 
```

祝你好运！

# opencv - Windows 8 中 OpenCV 的摄像头

> ID：15148909
> 
> 赞同：1
> 
> 时间：2013-03-01T01:28:31.463
> 
> 标签：opencv, windows-8, camera

我在增强现实项目中使用 OpenCV。最初的平台是 Windows 7，一切正常——全屏 1080p。但是，当我在 Windows 8 上启动我的程序时，它会显示分辨率为 640x480 的实时视频。相同硬件上的相同程序，但使用不同的操作系统 Windows 显示不同的结果。我写了一个简单的测试程序，它显示了同样的问题：

```
include "highgui.h"

int main()
{

cvNamedWindow("VideoTest", CV_WINDOW_AUTOSIZE);

CvCapture *capture = cvCreateCameraCapture(0);

CvSize size = cvSize(1920, 1080);

cvSetCaptureProperty(capture, CV_CAP_PROP_FRAME_WIDTH , size.width);

cvSetCaptureProperty(capture, CV_CAP_PROP_FRAME_HEIGHT , size.height);

IplImage* frame;

while(1)

{

    frame = cvQueryFrame(capture);

    if(!frame) break;

    cvShowImage("VideoTest", frame);

    char c = cvWaitKey(33);

    if(c == 27) break;
}

cvReleaseCapture(&capture);

cvDestroyWindow("VideoTest");

return 0;

} 
```

我认为 - cvSetCaptureProperty(capture, CV_CAP_PROP_FRAME_WIDTH, size.width); 有问题 但我不知道如何解决它。

我会很高兴任何帮助。

附言

我有一些新信息：我编写了使用 DirectShow 的测试程序。它将网络摄像头“USB Web-camera Microsoft LifeCam Studio”捕获为 1080p 质量的全屏实时视频。然而，当我在 Windows 8 上启动这个程序时，它只显示了 640x480 分辨率的实时视频。

简单测试表明，IAMStreamConfig 的方法 SetFormat() 在 Windows 7 上产生 HRESULT 值 S_OK，在 Windows 8 上产生 E_FAIL。

它显示在下一个清单中：

```
 hr = streamConfTest->SetFormat(&mtGroup); 

 if(SUCCEEDED(hr))
 {
  printf("Success SetFormat( &mtGroup )"); 

 }else
 {
 printf("Error SetFormat( &mtGroup )");
 } 
```

第一个分支是在 Windows 7 上选择的，第二个是在 Windows 8 上选择的。

我不知道如何解决它。我会很高兴任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:13:42.600

一段时间后，我找到了这个问题的合适决定。我已经在我的项目中包含了 Media Foundation，并为此编写了简单的 C++ 类。[Media Foundation 在 Windows 7 和 8 上从网络摄像头捕获视频](http://www.codeproject.com/KB/audio-video/559437.aspx "Capturing of video from web-camera on Windows 7 and 8 by Media Foundation")中展示了有关它的短文

# php - 新服务器 - 无法创建 wordpress 页面 - 空白 /wp-admin/post.php

> ID：15148911
> 
> 赞同：0
> 
> 时间：2013-03-01T01:28:52.460
> 
> 标签：php, wordpress

最近我把一个网站搬到了一个新的服务器上。该网站在共享服务器上运行良好，但自从迁移到 EC2 后，我遇到了许多权限问题和其他问题。我已将 /var/www/html 文件夹的所有权更改为 apache，以允许更改 WordPress 后端的设置。奇怪的是，我可以创建新帖子，但是当我尝试更新现有页面或创建新页面时，我收到一个空白页面。[http://example.com/wp-admin/post/php] 最初我认为这是另一个基于权限的问题，但经过研究似乎并非如此。

到目前为止我采取的步骤：1）将目录的所有权更改为 apache 2）禁用我的所有插件 3）添加：php_flag output_buffering on to .htaccess（虽然我不确定 .htaccess 文件中的位置是否重要应该把那个命令）

根据我所做的研究，似乎 ?> 之后的空白可能是原因。任何人都知道我怎么知道哪个文件会有这个空白？我的几个文件实际上甚至没有 PHP 关闭标记。补充一点，我以前的服务器是 5.2.17 到 5.3.20 版本。还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T04:06:53.147

检查错误日志后，我发现我缺少 mbstring PHP 库，该库有一个由我的一个主题文件调用的函数。添加后，我可以毫无问题地在 WordPress 后端创建和更改页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T07:16:06.997

对于所有遇到这种页面不显示错误的人，必须检查选项。如果您已在您的`wp-config.php`

```
@ini_set('display_errors','Off'); 
```

然后检查错误。如果它有这样的错误

```
PHP Warning: Cannot modify header information - headers already sent by (output started at /[server info]/wp-config.php:77) 
```

而不是检查 `wp-config.php`页面顶部和底部的额外空间。甚至删除额外的行空间。然后重新上传`wp-config.php`. 大多数情况下，这将解决您的问题。

快乐编码！！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-29T18:32:33.797

我遇到了类似的问题，并在“<?php”修复问题之前删除了多余的空格。尽管显然是导致问题的不同主题功能文件。确保查看 php 警告中引用的 php 文件。在这个例子中，它是“wp-config”，但它实际上可以是任何东西。

PHP 警告：无法修改标头信息 - 标头已发送（输出开始于 /[server info] **/wp-config.php** :77）

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-10T14:09:05.917

基本上这个问题发生是因为您直接在 cpanel 编辑器或其他简单的文本编辑器上编辑了文件。只需创建一个新的 .php 文件并将您的 post.php 代码粘贴到该文件中。现在保存这个文件并用旧的 post.php 替换这个新文件。

# php - 如何将此 MySQL 语句转换为 symfony Propel？

> ID：15148913
> 
> 赞同：1
> 
> 时间：2013-03-01T01:28:58.393
> 
> 标签：php, mysql, orm, symfony-1.4

这是MySQL：

```
SELECT *
FROM tbl1
WHERE name > (
  SELECT name
  FROM tbl1
  WHERE id = 3
)
ORDER BY name 
```

这是我对 Propel 代码的最佳猜测，但它不起作用：

```
$c = new Criteria();
$c->addAscendingOrderByColumn(CartPeer::ITEM_NAME);
$c->add(CartPeer::CATEGORY, $c->add(CartPeer::ITEM_ID, $item->getItemId()), Criteria::GREATER_THAN); 
```

在回答[这个问题](https://stackoverflow.com/questions/15148365/how-to-retrieve-all-records-after-one-with-an-id-in-symfony#15148613)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:42:06.427

Propel 没有将子查询作为标准一部分的标准方法*。*

您可以分离查询（首先获取要比较的值，然后将其用于原始查询）或`CUSTOM`在推进查询中使用子查询的条件。

这是第二个选项的示例：

```
$c = new Criteria();

$subSelect = "cart.category > (
  SELECT cart.category
  FROM carts
  WHERE carts.id = 3)";

$c->add(CartPeer::CATEGORY, $subSelect, Criteria::CUSTOM); 
```

**编辑：**这是第一个选项的示例

```
// find the object we want to compare against
$c = new Criteria();
$c->add(CartPeer::ID, 3); 
$cart = CartPeer::doSelectOne($c)

// then make the actual criteria
$c = new Criteria();
$c->add(CartPeer::CATEGORY, $cart->getCategory(), Criteria::GREATER_THAN) 
```

此选项的唯一问题是您正在执行*两个查询*而不是一个，这可能会影响您的性能，但这当然取决于您的应用程序。

# python - python递增字符循环

> ID：15148914
> 
> 赞同：0
> 
> 时间：2013-03-01T01:29:02.500
> 
> 标签：python, python-3.x

好的，我正在尝试创建一个增量列表循环。

希望实现一个执行以下操作的循环：循环通过 charset1 aZ。如果没有找到匹配项，则添加到循环中，所以 aa-ZZ 等等。似乎找不到做循环的好方法。

```
import itertools
result = "password"
charset1 = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z']
charset2 = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z']
charcount = 1

while i != result
    finalchar = charset1[-1]
    finalset = charset1[-1] * charcount
    for check in 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T06:22:15.473

您可以使用以下`itertools.product`与`repeat`参数一起使用的模板：

```
from string import ascii_letters
from itertools import product

for i in range(1, 3): # do 1 and 2 chars
    chars = product(ascii_letters, repeat=i)
    for combo in chars:
        print(''.join(combo)) 
```

# php - PHPflock函数限制和txt缓存文件

> ID：15148915
> 
> 赞同：1
> 
> 时间：2013-03-01T01:24:27.567
> 
> 标签：php, linux, caching, cache-control, process

我有一个相当基本的 PHP 脚本，可以将数据缓存到文本文件中。我需要想出一个解决方案来防止脚本的两个正在运行的实例同时写入文件。我已经查看了 PHP 群函数，但是，PHP 手册（[http://php.net/manual/en/function.flock.php](http://php.net/manual/en/function.flock.php)）提到了一个很大的限制：

> 在某些操作系统上，flock() 是在进程级别实现的。当使用像 ISAPI 这样的多线程服务器 API 时，您可能无法依靠 flock() 来保护文件免受在同一服务器实例的并行线程中运行的其他 PHP 脚本的影响！

关于这个警告，我有两个问题希望有人能回答。首先，我如何检查我的flock 实现是否在进程级别完成？顺便说一句，我正在使用 cPanel 运行 CentOS。

其次，如果我的实现是在进程级别，这是否意味着我的脚本的一个运行实例不会知道同一脚本的另一个运行实例完成的锁定？还是脚本实例在单独的线程而不是单独的进程上运行？非常感谢对此的任何澄清。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:33:58.630

唯一常见的情况是使用某种线程（非分叉）npm 运行 Apache。99% 的情况下你没有运行 PHP 线程。这是一个相对安全的假设。

除此之外，尝试避免锁定可能是值得的。

您遇到的最大问题是 2 个进程可能同时在写入，或者 1 个进程在缓存未完全生成时读取缓存。解决这个问题的最简单方法是让 PHP 脚本在临时位置的不同文件中生成缓存。写入文件后，只需将其移动到位（使用 rename()）。当文件移动发生在同一个挂载上时，它保证是原子的。

# mysql - MySQL内部连接与where子句排序和限制，子查询？

> ID：15148916
> 
> 赞同：0
> 
> 时间：2013-03-01T01:29:06.077
> 
> 标签：mysql, join, limit

以下查询中的所有内容都会为每个具有正确信息的 invBlueprintTypes 行生成一行。但我正在尝试添加一些东西。请参阅下面的代码块。

```
Select
  blueprintType.typeID,
  blueprintType.typeName Blueprint,
  productType.typeID,
  productType.typeName Item,
  productType.portionSize,
  blueprintType.basePrice * 0.9 As bpoPrice,
  productGroup.groupName ItemGroup,
  productCategory.categoryName ItemCategory,
  blueprints.productionTime,
  blueprints.techLevel,
  blueprints.researchProductivityTime,
  blueprints.researchMaterialTime,
  blueprints.researchCopyTime,
  blueprints.researchTechTime,
  blueprints.productivityModifier,
  blueprints.materialModifier,
  blueprints.wasteFactor,
  blueprints.maxProductionLimit,
  blueprints.blueprintTypeID
From
  invBlueprintTypes As blueprints
  Inner Join invTypes As blueprintType On blueprints.blueprintTypeID = blueprintType.typeID
  Inner Join invTypes As productType On blueprints.productTypeID = productType.typeID
  Inner Join invGroups As productGroup On productType.groupID = productGroup.groupID
  Inner Join invCategories As productCategory On productGroup.categoryID = productCategory.categoryID
Where
  blueprints.techLevel = 1 And
  blueprintType.published = 1 And
  productType.marketGroupID Is Not Null And
  blueprintType.basePrice > 0 
```

所以我需要在这里输入下表及其下方的列，以便我可以使用值时间戳并按利润小时对整个结果进行排序

```
tablename: invBlueprintTypesPrices
columns:   blueprintTypeID, timestamp, profitHour 
```

我需要此信息并考虑以下选择。使用选择来显示我对 JOIN/in-query 选择或任何可以做到这一点的意图。

```
SELECT * FROM invBlueprintTypesPrices 
WHERE blueprintTypeID = blueprintType.typeID 
ORDER BY timestamp DESC LIMIT 1 
```

即使 invBlueprintTypesPrices 没有结果，我也需要表 invBlueprintTypes 中的主行仍然显示。LIMIT 1 是因为我想要最新的行，但删除旧数据不是一个选项，因为需要历史记录。

如果我理解正确，我认为我需要一个子查询选择，但该怎么做呢？我已经厌倦了在查询关闭后使用 AS blueprintPrices 添加上面的确切查询），但没有出现错误

```
WHERE blueprintTypeID = blueprintType.typeID 
```

部分是错误的焦点。我不知道为什么。谁能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:50:16.433

你没有说你把子查询放在哪里。如果在`select`子句中，那么您遇到了问题，因为您返回了多个值。

您不能将其`from`直接放入子句中，因为您有一个相关的子查询（不允许）。

相反，您可以这样放入：

```
from . . .
     (select *
      from invBLueprintTypesPrices ibptp
      where ibtp.timestamp = (select ibptp2.timestamp
                              from invBLueprintTypesPrices ibptp2
                              where ibptp.blueprintTypeId = ibptp2.blueprintTypeId
                              order by timestamp desc
                              limit 1
                             )
     ) ibptp
     on ibptp.blueprintTypeId = blueprintType.TypeID 
```

`blueprintTypeid`这标识了子查询中所有 s 的最新记录。然后它加入匹配的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T01:51:41.293

您需要使用 a`LEFT JOIN`检查 invBlueprintTypesPrices 中的 NULL 值。要模仿`LIMIT 1`每个 TypeId，您可以使用`MAX()`or 来真正确保只返回一条记录，使用行号——这取决于您是否可以为每个类型 id 设置多个最大时间戳。假设不是，那么这应该很接近：

```
Select
  ...
From
  invBlueprintTypes As blueprints
  Inner Join invTypes As blueprintType On blueprints.blueprintTypeID = blueprintType.typeID
  Inner Join invTypes As productType On blueprints.productTypeID = productType.typeID
  Inner Join invGroups As productGroup On productType.groupID = productGroup.groupID
  Inner Join invCategories As productCategory On productGroup.categoryID = productCategory.categoryID
  Left Join (
    SELECT MAX(TimeStamp) MaxTime, TypeId
    FROM invBlueprintTypesPrices 
    GROUP BY TypeId
  ) blueprintTypePrice On blueprints.blueprintTypeID = blueprintTypePrice.typeID 
  Left Join invBlueprintTypesPrices blueprintTypePrices On 
    blueprintTypePrice.TypeId = blueprintTypePrices.TypeId AND
    blueprintTypePrice.MaxTime = blueprintTypePrices.TimeStamp 
Where
  blueprints.techLevel = 1 And
  blueprintType.published = 1 And
  productType.marketGroupID Is Not Null And
  blueprintType.basePrice > 0
Order By
  blueprintTypePrices.profitHour 
```

假设您可能具有相同的最大时间戳和 2 个不同的记录，请将上面的 2 个左连接替换为类似于获取行号的内容：

```
Left Join (
    SELECT @rn:=IF(@prevTypeId=TypeId,@rn+1,1) rn, 
         TimeStamp, 
         TypeId, 
         profitHour, 
         @prevTypeId:=TypeId
    FROM (SELECT * 
          FROM invBlueprintTypesPrices 
          ORDER BY TypeId, TimeStamp DESC) t
       JOIN (SELECT @rn:=0) t2
  ) blueprintTypePrices On blueprints.blueprintTypeID = blueprintTypePrices.typeID AND blueprintTypePrices.rn=1 
```

# java - 多线程 Java Web 服务器 - java.net.SocketTimeoutException

> ID：15148917
> 
> 赞同：0
> 
> 时间：2013-03-01T01:29:09.027
> 
> 标签：java, multithreading, sockets, webserver

我已经实现了一个简单的兼容 HTTP/1.1 的多线程 Web 服务器，它处理 GET 和 HEAD 请求。当我通过 Web 服务器发出请求时，虽然它可以工作，但在我设置的 12 秒超时后我得到了 SocketTimeoutException。

我正在测试我的网络服务器，方法是在 Eclipse 中运行它并将浏览器定向到 localhost:portnumber，然后尝试在本地打开文件。我只有超时值，因为如果我没有它，任何读取不存在文件的请求都不会返回，而它应该返回 404 Not Found 错误。

我收到的 SocketTimeoutExceptions 的数量等于为处理请求而打开的套接字数量。我怀疑我应该以某种方式处理这个异常，但我不确定在哪里或如何做。任何有关如何处理此问题的示例或解释都将非常有用。

我的代码被拆分成一个简短的网络服务器组件，后面跟着一个单独的 ThreadHandler 类来处理请求。当我创建一个新的客户端套接字时，我使用一个新线程来处理请求。如有必要，我可以提供 ThreadHandler 类，但它要长得多。

这是 WebServer 组件：

```
public class MyWebServer
{
    public static void main(String[] args) throws Exception
    {

        int port = 5000;
        String rootpath = "~/Documents/MockWebServerDocument/";

        if(rootpath.startsWith("~" + File.separator))
        {
            rootpath = System.getProperty("user.home") + rootpath.substring(1);
        }

        File testFile = new File(rootpath);

        //If the provided rootpath doesn't exist, or isn't a directory, exit
        if(!testFile.exists() || !testFile.isDirectory())
        {
            System.out.println("The provided rootpath either does not exist, or is not a directory. Exiting!");
            System.exit(1);
        }

        //Create the server socket
        ServerSocket serverSocket = new ServerSocket(port);

        //We want to process requests indefinitely, listen for connections inside an infinite loop
        while(true)
        {
            //The server socket waits for a client to connect and make a request. The timeout ensures that
            //a read request does not block for more than the allotted period of time. 
            Socket connectionSocket = serverSocket.accept();
            connectionSocket.setSoTimeout(12*1000);

            //When a connection is received, we want to create a new HandleRequest object
            //We pass the newly created socket as an argument to HandleRequest's constructor
            HandleThreads request = new HandleThreads(connectionSocket, rootpath);

            //Create thread for the request
            Thread requestThread = new Thread(request);

            System.out.println("Starting New Thread");

            //Start thread
            requestThread.start();
        }
    }

} 
```

在 ThreadHandler 类中，我从套接字读取请求，解析请求并通过套接字以适当的响应进行响应。我已经实现了持久连接，因此只有当请求在请求中包含“连接：关闭”令牌时，每个套接字才会关闭。但是，我不确定这是否正确发生，尤其是在我尝试打开一个不存在的文件并且应该返回 404 Not Found 错误的情况下。

有谁知道如何处理这些异常。我应该做些什么来关闭线程吗？

任何帮助将非常感激。

编辑：这是我在 run() 的 try catch 语句中调用的 handleRequest()

```
//This method handles any requests received through the client socket
    private void handleRequest() throws Exception
    {
        //Create outputStream to send data to client socket
        DataOutputStream outToClient = new DataOutputStream(clientsocket.getOutputStream());
        //Create BufferedReader to read data in from client socket
        BufferedReader inFromClient = new BufferedReader(new InputStreamReader(clientsocket.getInputStream()));
        //Create SimpleDateFormat object to match date format expected by HTTP
        SimpleDateFormat HTTPDateFormat = new SimpleDateFormat("EEE MMM d hh:mm:ss zzz yyyy");

        //Keep running while the socket is open
        while(clientsocket.isConnected())
        {

                String line = null;
                //HashMap to record relevant header lines as they are read
                HashMap<String,String> requestLines = new HashMap<String,String>();
                String ifModSince = null;
                Date ifModifiedSince = null;
                Date lastModifiedDate = null;

                //Keep reading the request lines until the end of the request is signalled by a blank line
                while ((line = inFromClient.readLine()).length() != 0) 
                {
                    //To capture the request line
                    if(!line.contains(":"))
                    {
                        requestLines.put("Request", line);
                    }

                    //To capture the connection status
                    if(line.startsWith("Connection:"))
                    {
                        int index = line.indexOf(':');
                        String connectionStatus = line.substring(index + 2);
                        requestLines.put("Connection", connectionStatus);
                    }

                    //To capture the if-modified-since date, if present in the request
                    if(line.startsWith("If-Modified-Since"))
                    {
                        int index = line.indexOf(':');
                        ifModSince = line.substring(index + 2);
                        requestLines.put("If-Modified-Since", ifModSince);
                    }

                    System.out.println(line);

                }

                //Get the request line from the HashMap
                String requestLine = (String)requestLines.get("Request");
                //Create Stringtokenizer to help separate components of the request line
                StringTokenizer tokens = new StringTokenizer(requestLine);

                //If there are not 3 distinct components in the request line, then the request does
                //not follow expected syntax and we should return a 400 Bad Request error
                if(tokens.countTokens() != 3)
                {
                    outToClient.writeBytes("HTTP/1.1 400 Bad Request"+CRLF);
                    outToClient.writeBytes("Content-Type: text/html"+CRLF);
                    outToClient.writeBytes("Server: BCServer/1.0"+CRLF);
                    outToClient.writeBytes("Connection: keep-alive"+CRLF);
                    outToClient.writeBytes(CRLF);
                    outToClient.writeBytes("<html><head></head><body>Error 400 - Bad Request</body></html>"+CRLF);

                    outToClient.flush();
                }
                else
                {
                    //Get the specific request, whether "GET", "HEAD" or unknown
                    String command = tokens.nextToken();
                    //Get the filename from the request
                    String filename = tokens.nextToken();

                    //Tidy up the recovered filename. This method can also tidy up absolute
                    //URI requests
                    filename = cleanUpFilename(filename);

                    //If the third token does not equal HTTP/1.1, then the request does 
                    //not follow expected syntax and we should return a 404 Bad Request Error
                    if(!(tokens.nextElement().equals("HTTP/1.1")))
                    {
                        outToClient.writeBytes("HTTP/1.1 400 Bad Request"+CRLF);
                        outToClient.writeBytes("Content-Type: text/html"+CRLF);
                        outToClient.writeBytes("Server: BCServer/1.0"+CRLF);
                        outToClient.writeBytes("Connection: keep-alive"+CRLF);
                        outToClient.writeBytes(CRLF);
                        outToClient.writeBytes("<html><head></head><body>Error 400 - Bad Request</body></html>"+CRLF);
                        outToClient.flush();                    
                    }
                    else
                    {
                        //Add the supplied rootpath to the recovered filename
                        String fullFilepath = rootpath + filename;

                        //Create a new file using the full filepathname
                        File file = new File(fullFilepath);

                        //If the created file is a directory then we look to return index.html
                        if(file.isDirectory())
                        {
                            //Add index.html to the supplied rootpath
                            fullFilepath = rootpath + "index.html";

                            //Check to see if index.html exists. If not, then return Error 404: Not Found
                            if(!new File(fullFilepath).exists())
                            {
                                outToClient.writeBytes("HTTP/1.1 404 Not Found"+CRLF);
                                outToClient.writeBytes("Content-Type: text/html"+CRLF);
                                outToClient.writeBytes("Server: BCServer/1.0"+CRLF);
                                outToClient.writeBytes("Connection: keep-alive"+CRLF);
                                outToClient.writeBytes(CRLF);
                                outToClient.writeBytes("<html><head></head><body>Error 404 - index.html was not found</body></html>"+CRLF);
                                outToClient.flush();
                            }
                        }
                        //If the created file simply does not exist then we need to return Error 404: Not Found
                        else if(!file.exists())
                        {
                            System.out.println("File Doesn't Exist!");
                            outToClient.writeBytes("HTTP/1.1 404 Not Found"+CRLF);
                            outToClient.writeBytes("Content-Type: text/html"+CRLF);
                            outToClient.writeBytes("Server: BCServer/1.0"+CRLF);
                            outToClient.writeBytes("Connection: keep-alive"+CRLF);
                            outToClient.writeBytes(CRLF);
                            outToClient.writeBytes("<html><head></head><body>Error 404 - " + filename + " was not found</body></html>"+CRLF);
                            outToClient.flush();

                        }
                        //Otherwise, we have a well formed request, and we should use the specific command to
                        //help us decide how to respond
                        else
                        {
                            //Get the number of bytes in the file
                            int numOfBytes=(int)file.length();

                            //If we are given a GET request
                            if(command.equals("GET"))
                            {
                                //Open a file input stream using the full file pathname
                                FileInputStream inFile = new FileInputStream(fullFilepath);

                                //Create an array of bytes to hold the data from the file
                                byte[] fileinBytes = new byte[numOfBytes];

                                //We now check the If-Modified-Since date (if present) against the file's
                                //last modified date. If the file has not been modified, then return 304: Not Modified
                                if(ifModSince != null)
                                {
                                    //Put the string version of If-Modified-Since data into the HTTPDate Format
                                    try
                                    {
                                        ifModifiedSince = HTTPDateFormat.parse(ifModSince);
                                    }
                                    catch(ParseException e)
                                    {
                                        e.printStackTrace();
                                    }

                                    //We now need to do a bit of rearranging to get the last modified date of the file
                                    //in the correct HTTP Date Format to allow us to directly compare two date object

                                    //1\. Create a new Date using the epoch time from file.lastModified()
                                    lastModifiedDate = new Date(file.lastModified());
                                    //2\. Create a string version, formatted into our correct format
                                    String lastMod = HTTPDateFormat.format(lastModifiedDate);

                                    lastModifiedDate = new Date();
                                    //3\. Finally, parse this string version into a Date object we can use in a comparison
                                    try
                                    {
                                        lastModifiedDate = HTTPDateFormat.parse(lastMod);
                                    }
                                    catch (ParseException e)
                                    {
                                        e.printStackTrace();
                                    }

                                    //Comparing the last modified date to the "If-Modified Since" date, if the last modified
                                    //date is before modified since date, return Status Code 304: Not Modified
                                    if((ifModifiedSince != null) && (lastModifiedDate.compareTo(ifModifiedSince) <= 0))
                                    {
                                        System.out.println("Not Modified!");
                                        //Write the header to the output stream 
                                        outToClient.writeBytes("HTTP/1.1 304 Not Modified"+CRLF);
                                        outToClient.writeBytes("Date: " + HTTPDateFormat.format(new Date())+CRLF);
                                        outToClient.writeBytes("Server: BCServer/1.0"+CRLF);
                                        outToClient.writeBytes("Last-Modified: " + lastModifiedDate+CRLF);
                                        outToClient.writeBytes("Content-Length: " + (int)file.length()+CRLF);
                                        outToClient.writeBytes(CRLF);
                                    }                                   

                                }
                                else
                                {
                                    //Read in the data from the file using the input stream and store in the byte array
                                    inFile.read(fileinBytes);

                                    //Write the header to the output stream 
                                    outToClient.writeBytes("HTTP/1.1 200 OK"+CRLF);
                                    outToClient.writeBytes("Date: " + HTTPDateFormat.format(new Date())+CRLF);
                                    outToClient.writeBytes("Server: BCServer/1.0"+CRLF);
                                    outToClient.writeBytes("Connection: keep-alive"+CRLF);
                                    outToClient.writeBytes("Last-Modified: " + HTTPDateFormat.format(file.lastModified())+CRLF);
                                    outToClient.writeBytes("Content-Length: " + numOfBytes +CRLF);
                                    outToClient.writeBytes(CRLF);

                                    //Write the file
                                    outToClient.write(fileinBytes,0,numOfBytes);
                                    outToClient.flush();                                    
                                }

                            }   
                            //If we are given a HEAD request
                            else if(command.equals("HEAD"))
                            {
                                //Write the header to the output stream 
                                outToClient.writeBytes("HTTP/1.1 200 OK"+CRLF);
                                outToClient.writeBytes("Date: " + HTTPDateFormat.format(new Date())+CRLF);
                                outToClient.writeBytes("Server: BCServer/1.0"+CRLF);
                                outToClient.writeBytes("Connection: keep-alive"+CRLF);
                                outToClient.writeBytes("Last-Modified: " + HTTPDateFormat.format(file.lastModified())+CRLF);
                                outToClient.writeBytes("Content-Length: " + numOfBytes +CRLF);
                                outToClient.writeBytes(CRLF);

                                outToClient.flush();
                            }
                            //If the command is neither GET or HEAD, then this type of request has
                            //not been implemented. In this case, we must return Error 501: Not Implemented
                            else
                            {
                                //Print the header and error information            
                                outToClient.writeBytes("HTTP/1.1 501 Not Implemented"+CRLF);
                                outToClient.writeBytes("Date: " + HTTPDateFormat.format(new Date())+CRLF);
                                outToClient.writeBytes("Server: BCServer/1.0"+CRLF);
                                outToClient.writeBytes("Connection: keep-alive"+CRLF);
                                outToClient.writeBytes("Content-Type: text/html"+CRLF);
                                outToClient.writeBytes(CRLF);
                                outToClient.writeBytes("<html><head></head><body> Desired Action Not Implemented </body></html>"+CRLF);

                                outToClient.flush();

                            }
                        }                                               
                    }
                }

                //Get the connection status for this request from the HashMap
                String connect = (String)requestLines.get("Connection");
                //If the connection status is not "keep alive" then we must close the socket
                if(!connect.equals("keep-alive"))
                {
                    // Close streams and socket.
                    outToClient.close();
                    inFromClient.close();
                    clientsocket.close();                   
                }
                //Otherwise, we can continue using this socket
                //else
                //{                 
                    //continue;
                //}
            }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:37:24.327

设置读取超时的原因是为您准备等待对等方向您发送数据所花费的时间设置一个上限。只有您知道该限制应该是多少，以及您准备重试读取的频率（如果有的话：很可能一次超时就足够了），以及多长时间太长，但在某些时候您会决定并关闭连接。大多数 HTTP 服务器都可以进行配置，以便用户自行决定。

# android - 列表活动 Android 的自定义布局

> ID：15148920
> 
> 赞同：2
> 
> 时间：2013-03-01T01:29:24.687
> 
> 标签：android, android-layout, listactivity

我知道有很多类似的问题，但我没有找到对我有帮助的答案，所以这是我的问题。我设法做到了： ![原样](../Images/7130d354556190fb059875464b74b9f4.png)

但我想要的是这样的： ![成为](../Images/62dfb9db09b22a373190551466176d9c.png)

所以我想在屏幕底部有一个固定按钮。我的布局是 ListActivity 的自定义布局，它看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<RelativeLayout
    android:id="@+id/relativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"
    >
 <Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:text="Delete" />

<TextView
    android:id="@+id/label"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_toRightOf="@+id/button1"
    android:text="@+id/label"
    android:gravity="center"
    android:textSize="20px" >
</TextView>

<ImageButton 
    android:id="@+id/rightArrow"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:background="@null"
    android:layout_alignParentRight="true"
    android:src="@drawable/right_arrow" 
    /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T01:37:14.067

您粘贴的内容看起来像是列表行的自定义布局，而不是`ListActivity`.

从[此处](http://developer.android.com/reference/android/app/ListActivity.html)找到的 Android 文档中：

> 屏幕布局
> 
> ListActivity 有一个默认布局，它由屏幕中央的单个全屏列表组成。但是，如果您愿意，您可以通过在 onCreate() 中使用 setContentView() 设置您自己的视图布局来自定义屏幕布局。为此，您自己的视图必须包含一个 ID 为“@android:id/list”的 ListView 对象（如果它在代码中，则为列表）

# css - 使用较少的 css 测试两个类不存在

> ID：15148923
> 
> 赞同：1
> 
> 时间：2013-03-01T01:29:38.827
> 
> 标签：css, less

我有一个元素可以说它可以有 .foo 或 .bar 或两者都有或没有作为一个类：

```
<div class="foo bar">green</div>
<div class="foo">green</div>
<div class="bar">green</div>
<div class="something-else">red</div> 
```

我如何测试该元素没有任何一个类。

我尝试了这样的事情，但它没有按预期工作：

```
div {
  background: green;
  &:not(.foo) and &:not(.bar) {
    background: red;
  }
} 
```

我没有看到很多使用 less 和 not() 的示例，在他们的文档中只有 1 个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T01:38:40.313

要说*不要*在 CSS 选择器中使用多个条件，您需要将它们链接在一起： `div:not(.foo):not(.bar)`

```
div {
  background: green;
  &:not(.foo):not(.bar) {
    background: red;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T01:32:44.647

总是有纯 css 替代品。

```
div { background: red; }
div.foo, div.bar { background: green; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T01:41:45.190

我可以通过嵌套两个 &:not() 规则来做到这一点，但我不确定这是最好的方法。

```
div {
  background: green;
  &:not(.foo) {
    &:not(.bar) {
      background: red;
    }
  }
} 
```

# c# - 一键关闭两个表单？

> ID：15148925
> 
> 赞同：1
> 
> 时间：2013-03-01T01:29:46.420
> 
> 标签：c#, forms

我正在开发具有登录功能的项目

当我运行项目时，有一个表单 ( `form1`) 运行登录。在我点击登录按钮后构建另一个表单（`form2`） - 这是我的程序的表单。并使第一个表单 ( `form1`) 隐藏。

问题是当我按下 form2 中的 X 按钮时，它已关闭，但 form1 仍在运行。

我试图关闭`form1`而不是隐藏...但这将`form2`在启动前关闭

在`form1`：

```
this.Hide();
Form2 x = new Form2();                 
x.Show(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T01:43:19.940

我认为你的表格是错误的。

Form1 应该是您的应用程序，并在首次加载时将 Form2 显示为对话框，然后当它关闭时，您可以处理结果并决定是继续还是关闭应用程序。

就像是：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        Load += new EventHandler(Form1_Load);
    }

    void Form1_Load(object sender, EventArgs e)
    {
        Form2 myDialog = new Form2();
        if (myDialog.ShowDialog() == System.Windows.Forms.DialogResult.Cancel)
        {
            // failed login
            // exit application
        }
        // all good, continue
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T01:43:48.693

您可以订阅子表单`FormClosed`事件并使用它来调用`Close`父表单。

```
x.FormClosed += new FormClosedEventHandler(x_FormClosed);

void x_FormClosed(object sender, FormClosedEventArgs e)
{
    this.Close();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T08:33:05.667

你去你的form2然后在表单的情况下寻找FormClosed。

将此代码放入您的事件处理程序中：

```
private void Form2_FormClosed(object sender, FormClosedEventArgs e)
    {
        Application.Exit();
    } 
```

FormClosed 是用户关闭表单时的事件。因此，当您关闭表单时，输入一个将退出您的应用程序的代码，即 -applicationn.exit();-

希望这会奏效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T01:43:40.603

试试这个，如果授予访问权限，在登录按钮中

```
private void logInBtn_Click(object sender, EventArgs e)
        {
            Form2 frm = new Form2();
            frm.ShowDialog();
            this.Hide();
        } 
```

然后在form2中，如果你想退出

```
private void exitBtn_Click(object sender, EventArgs e)
        {
            Application.Exit();
        } 
```

希望这可以帮助。

# c# - 如何对列表进行排序，既不是 asc 也不是 desc 而是自定义

> ID：15148935
> 
> 赞同：2
> 
> 时间：2013-03-01T01:31:30.197
> 
> 标签：c#, .net

我需要对列表内的对象实例中的属性进行排序，如下所示：

```
 public List<CustomClass> lCustomClasses = new List<CustomClass>(); 
```

CustomClass 有一个属性 MyField，它可以具有以下值之一：

```
 1,2,3 
```

我需要对列表进行排序，而不是 asc 或 desc，而是按 3、1、2 排序

在不复制到另一个列表的情况下执行此操作的任何快捷方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T01:40:21.293

使用采用自定义比较器的 List.Sort的[重载。](http://msdn.microsoft.com/en-us/library/w56d4y5z.aspx)[请参阅此](http://msdn.microsoft.com/en-us/library/tfakywbh.aspx)MSDN 页面上的代码示例：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T02:05:40.997

奇怪的要求。:)
无论如何，假设您只支持 1、2 和 3，正如其他人建议的那样，您可以编写自己的[`IComparer<T>`](http://msdn.microsoft.com/en-us/library/8ehhxeaf.aspx). 例如

```
class Program
{
    static void Main(string[] args)
    {
        List<CustomClass> list = new List<CustomClass>() 
        {
            new CustomClass(){MyField = 3},
            new CustomClass(){MyField = 2},
            new CustomClass(){MyField = 1},
        };
        PrintList(list);
        list.Sort(new CustomClassComparer());
        PrintList(list);
        Console.ReadLine();
    }
    private static void PrintList(List<CustomClass> list)
    {
        foreach (var item in list)
        {
            if (item != null)
                Console.WriteLine("MyField: {0}", item.MyField);
            else
                Console.WriteLine("MyField: null");
        }
    }
}

public class CustomClass
{
    public int MyField { get; set; }
}
public class CustomClassComparer : IComparer<CustomClass>
{
    public int Compare(CustomClass x, CustomClass y)
    {
        if (x == null)
        {
            if (y == null)
                return 0;
            return -1;
        }
        if (y == null)
            return 1;

        if (x.MyField == y.MyField)
            return 0;

        if (x.MyField == 2)
            return 1;
        if (x.MyField == 1)
            if (y.MyField == 3)
                return 1;
            else
                return -1;

        return -1;
    }
} 
```

或者，您可以制作您的`CustomClass` [`IComparable<T>`](http://msdn.microsoft.com/en-us/library/4d7sx9hd.aspx).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T01:40:28.480

AFAIK[`List.Sort`](http://msdn.microsoft.com/en-us/library/3da4abas.aspx)就地运作。如果您使用自定义比较运算符，如[this answer](https://stackoverflow.com/a/4668558/520779)中建议的那样，您可能能够实现您想要的：

```
lCustomClasses.Sort((x, y) => my_compare(x.MyField, y.MyField)); 
```

# cocos2d-iphone - 对象通过对象 Box2d

> ID：15148948
> 
> 赞同：0
> 
> 时间：2013-03-01T01:32:28.073
> 
> 标签：cocos2d-iphone, box2d, box2d-iphone

我有两个对象......一个静态和一个动态（它是一个球）。静态对象具有多边形形状。有时当我击球时，球会穿过静态物体:(。我玩过密度和其他属性，但没有成功。有人知道我如何让静态物体变得不可穿透。

这是我的代码

```
// Create ball body
b2BodyDef ballBodyDef;
ballBodyDef.type = b2_dynamicBody;
ballBodyDef.position.Set(110 / 2 / PTM_RATIO, 300 / PTM_RATIO);
ballBodyDef.userData = playerCartoonSprite;
ballBodyDef.bullet = YES;
playerCartoonBody = localWorld->CreateBody(&ballBodyDef);

// Create circle shape
b2CircleShape circle;
circle.m_radius = 10.0 / PTM_RATIO;

// Create shape definition and add to body
b2FixtureDef ballShapeDef;
ballShapeDef.shape = &circle;
ballShapeDef.density = 0.0f;
ballShapeDef.friction = 0.3f;
ballShapeDef.restitution = 1.f;
playerCartoonFixture = playerCartoonBody->CreateFixture(&ballShapeDef);

// static polygon object

    b2BodyDef bodyDef;
    bodyDef.type = b2_staticBody;

    int num = 6;
    b2Vec2 verts[] = {
        b2Vec2(8.6f / PTM_RATIO, 89.3f / PTM_RATIO),
        b2Vec2(5.0f / PTM_RATIO, 81.7f / PTM_RATIO),
        b2Vec2(10.5f / PTM_RATIO, 61.9f / PTM_RATIO),
        b2Vec2(13.1f / PTM_RATIO, 9.1f / PTM_RATIO),
        b2Vec2(17.3f / PTM_RATIO, 9.9f / PTM_RATIO),
        b2Vec2(12.7f / PTM_RATIO, 70.6f / PTM_RATIO)
    };

    b2PolygonShape boxShape;
    boxShape.Set(verts, num);
    b2FixtureDef fixtureDef;
    fixtureDef.shape = &boxShape;
    bodyDef.position.Set(teeterSprite.position.x / PTM_RATIO, teeterSprite.position.y / PTM_RATIO);
    fixtureDef.shape = &boxShape;
    m_bodyA = world->CreateBody( &bodyDef );
    m_bodyA->CreateFixture( &fixtureDef ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:20:26.233

我认为这可以解决我的问题[http://www.emanueleferonato.com/2008/12/19/understanding-custom-polygons-in-box2d/](http://www.emanueleferonato.com/2008/12/19/understanding-custom-polygons-in-box2d/)

# c++ - 如何将 DLL 反转为 C++ 代码？

> ID：15148950
> 
> 赞同：7
> 
> 时间：2013-03-01T01:32:45.817
> 
> 标签：c++, dll, reverse-engineering, decompiling

我知道将 dll 反转为 c++ 代码是不可能的，所以我想从中收集尽可能多的细节。这不是我的dll，所以我当然没有源代码。我应该使用哪个程序？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-01T01:36:17.377

好吧，如果你熟练的话，你可以反汇编 DLL 并理解它的所有功能。这需要大量时间，但如果您这样做，您可以手动将其反转回源。

否则，您可以先使用 Dependency Walker 之类的工具来获取它所依赖的 DLL 和函数，以及它导出的函数。从那里你可以找到你感兴趣的函数，并使用像 IDA 这样的反汇编程序来查看它们的作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T01:40:25.770

您可以使用[dumpbin](http://msdn.microsoft.com/en-us/library/756as972%28v=vs.71%29.aspx)工具查看导出的函数列表。如果导出 C++ 函数，您可能能够通过名称 mangling 推断参数。

您可以从 DLL 中提取所有资源，只需将其作为文件“打开”即可在 Visual Studio 中查看资源。如果 DLL 是基于 COM 的 DLL，则类型库作为资源嵌入其中的可能性很小。如果你有类型库，你可以#import它来重建公共接口的头文件。

这几乎是最好的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T01:35:28.810

您需要一个 PE 文件查看器。这将告诉您从 DLL 导出的内容，您可以在 .text 部分中获取数据以查看机器代码。

# powershell - PowerShell - Win32_OperatingSystem 中的 Select-Object 显示相当奇怪

> ID：15148951
> 
> 赞同：0
> 
> 时间：2013-03-01T01:32:52.933
> 
> 标签：powershell, if-statement, wmi, psobject

第一次在这里发布海报，我有点初学者，我一直热衷于让我的 PowerShell 脚本技能达到标准，但我遇到了一些相当令人困惑的事情......

我制作了一个脚本来查询一组计算机，我想查询 Win32_OperatingSystem 但只推断内部版本号，以便我可以用它填充我的 PSObject。我正在尝试添加一些 If 逻辑，以便如果内部版本号是 7601，我可以在我的 OS 列下写一条消息。

我遇到的问题是 BuildNumber 值以 @{BuildNumber=7601} 而不是 7601 的形式出现。那，我的 If 语句很无聊。

```
$Machines = Get-Content .\Computers.txt

Foreach($Machine in $Machines)
{
    $sweet = (Get-WmiObject -Class Win32_OperatingSystem -computer $Machine | Select-Object BuildNumber)
    $dversion = if ($sweet -eq "@{BuildNumber=7601}") {Yes!} else {"Nooooo!"}

    New-Object PSObject -Property @{
    ComputerName = $Machine
    Sweet = $sweet
    OS = $dversion

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T02:38:29.480

问题是 Get-WMIObject cmdlet 正在返回一个哈希表。然后 Select-Object 只返回您想要的 BuildNumber 部分、BuildNumber 属性及其值。您需要添加 -ExpandProperty 参数以仅获取值，而不是名称/值对。

```
 Get-WMIObject -Class Win32_OperatingSystem | Select-Object BuildNumber 
```

退货

```
 @{BuildNumber=7601} 
```

使用 ExpandProperty

```
 Get-WMIObject -Class Win32_OperatingSystem | Select-Object -ExpandProperty BuildNumber 
```

退货

```
 7601 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:58:35.450

ping 测试跳过不可用机器的另一种选择。

```
Get-Content .\Computers.txt | Where-Object {Test-Connection -ComputerName $_ -Count 1 -Quiet} | Foreach-Object {

    $sweet =  Get-WmiObject -Class Win32_OperatingSystem -ComputerName $_ | Select-Object -ExpandProperty BuildNumber

    New-Object PSObject -Property @{
        ComputerName = $_.__SERVER
        Sweet =  $sweet
        OS = if ($sweet -eq 7601) {'Yes!'} else {'Nooooo!'}    
    }

} 
```

# javascript - xpath 选择另一个属性是谓词的属性值

> ID：15148955
> 
> 赞同：2
> 
> 时间：2013-03-01T01:33:44.833
> 
> 标签：javascript, xpath

假设我的 XML 节点很简单：

```
<foo>
    <bar id="1" name="John" />
    <bar id="2" name="Bill">
        <qwert name="Tony" />
    </bar>
</foo> 
```

选择我已经匹配 id 的名称值的 xpath 表达式是什么？

`//foo/bar@name`将返回名称属性，但如果我想匹配现有属性然后返回名称，a-la

`//foo/bar[id='1']@name`

投掷

> 未捕获的错误：INVALID_EXPRESSION_ERR：DOM XPath 异常 51

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T01:41:36.643

我认为这只是

```
//foo/bar[@id='1']/@name 
```

# javascript - 用元素替换内联 JavaScript 函数调用

> ID：15148958
> 
> 赞同：0
> 
> 时间：2013-03-01T01:33:54.097
> 
> 标签：javascript, html

这样的事情可能吗？

```
<head>
<script language="javascript">
function createElement(this) {
    var ele = document.createElement('div');
    ele.setAttribute('style', 'display: inline-block; width: 100px; height: 20px; background: rgb(35,150,215);');
    ele.setAttribute('onclick', 'alert(\'Yay!\');');
    this.replaceWith(ele);
}
</script>
</head>

<body>
blah blah blah some text <script language="javascript">createElement(parentTag);</script> blah blah more text.
</body 
```

我想做的是制作一个按钮，我可以将 INLINE 动态添加到调用此函数的任何页面。除了要替换的脚本标签之外，它还有其他参数。我希望按钮准确地转到调用函数的位置。

# perl - Perl 无需 getstore 即可下载 .gz 文件的最快方法

> ID：15148964
> 
> 赞同：1
> 
> 时间：2013-03-01T01:34:25.253
> 
> 标签：perl, perl-module, lwp, lwp-useragent

我有兴趣使用 perl 下载 .gz 文件并将其提取到脚本本身而不存储到文件中。Getstore 将文件存储到磁盘。是否可以使用 perl LWP::Simple 或 LWP::Useragent 通过代理下载 .gz 文件。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T02:44:46.340

代替`getstore`，您可以使用`get()`，它可以存储在标量中。该`IO::Compress::Gzip`模块可以接受标量引用作为输入。这是一个例子：

```
use LWP::Simple;
use IO::Compress::Gunzip qw(gunzip $GunzipError);

my $content = get('http://someurl');
die if !defined($content);

my $uncompressed;
gunzip(\$content => \$uncompressed) or die "Failed to uncompress content: $GunzipError"; 
```

# ruby-on-rails-3.2 - 是否嵌套资源

> ID：15148967
> 
> 赞同：1
> 
> 时间：2013-03-01T01:34:35.133
> 
> 标签：ruby-on-rails-3.2

用户有很多分类广告。分类仅由其所有者更新、修改、显示/隐藏。所有公开的分类都有一个索引和显示页面。使用嵌套资源有什么好处，还是我应该只通过权限/current_user 管理进程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:29:16.377

如果您正在考虑易于过滤，则使用具有多态关联的嵌套资源有一个优势。您可以拥有`/classifieds`或`/user/1/classifieds`用于访问全部或按用户过滤。它还将使关联更易于管理。例如，您不需要将 user_id 传递给在 访问的分类更新表单`/user/1/classifieds/1/edit`。我发现这些资源不需要很长时间即可设置并提供一些不错的好处。您甚至可以查看这个似乎很受欢迎的宝石，它似乎使整个过程更容易：[Inherited Resources](https://github.com/josevalim/inherited_resources)。

# ios - 如何将 AFNetworking AFJSONRequestOperation 包装到单独的数据管理器类中

> ID：15148971
> 
> 赞同：2
> 
> 时间：2013-03-01T01:35:00.503
> 
> 标签：ios, objective-c-blocks, afnetworking

我是在 iOS 中使用块的新手，我认为这可能是我问题的症结所在。

我只想构建一个简单的静态 DataManager 类，它的唯一工作是从我的 Restful 服务中获取数据。

我会从我所有的各种 UIViewControllers（或 collectionview/table 控制器）中调用它

在我的课堂上，我有一个看起来像这样的函数

```
+ (NSArray *) SearchByKeyword: (NSString*) keyword {
    __block NSArray* searchResults = [[NSArray alloc] init];
    NSString *baseURL = @"http://someURL.com/api/search";
    NSString *requestURL = [baseURL stringByAppendingString:keyword];
    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:baseURL]];
    NSMutableURLRequest *request = [httpClient requestWithMethod:@"GET"
                                                      path:requestURL
                                                      parameters:nil];
    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        searchResults = [JSON valueForKeyPath:@""];
    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
        NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
    }];
    [operation start];
    return searchResults;
} 
```

但是，这会一直返回零数据。有人可以建议这样做的正确方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T06:58:31.677

您正在尝试使用异步任务（JSON 操作）的结果作为同步方法调用的返回值，这就是您没有获得数据的原因。

你可以为你的视图控制器提供一个接受完成块和失败块的 API，类似于 AF 网络。然后，视图控制器可以在将结果传递到块时对其执行所需的操作。

根据您的问题修改您的代码：

```
typedef void (^SearchCompletionBlock)(NSArray *results);
typedef void (^SearchFailureBlock)(NSError *error);

+ (void)searchByKeyword:(NSString*)keyword completionBlock:(SearchCompletionBlock)completionBlock failureBlock:(SearchFailureBlock)failureBlock;
{
    NSString *baseURL = @"http://someURL.com/api/search";
    NSString *requestURL = [baseURL stringByAppendingString:keyword];
    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:baseURL]];
    NSMutableURLRequest *request = [httpClient requestWithMethod:@"GET"
                                                            path:requestURL
                                                      parameters:nil];
    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request
                                                                                        success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
                                                                                            if (completionBlock) {
                                                                                                completionBlockc([JSON valueForKeyPath:@""]);
                                                                                            }
                                                                                        } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
                                                                                            NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
                                                                                            if (failureBlock) {
                                                                                                failureBlock(error);
                                                                                            }
                                                                                        }];
    [operation start];
} 
```

然后客户端可以传递存储结果并重新加载他们的视图的完成块。就像是：

```
^ (NSArray *results) {
    self.results = results;
    [self.tableView reloadData];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T06:53:11.627

您的 JSON 请求操作是异步的，这意味着它将启动请求 ( `[operations start]`，然后立即返回您的结果，该结果将为空。当完成块运行时，它会分配您的数据，但什么也不做。您的搜索方法可以t 返回一个对象，除非它等待请求完成。

你有几个选择：

1.  将完成块传递给对结果执行某些操作的搜索方法。一旦完成所有特定于服务的内容（处理 JSON 等），就会在请求的完成块中调用完成块。（阻止启动！）

2.  让请求的完成块分配数据管理器的属性，然后调用委托方法或通知让其他人知道结果可用。

我更喜欢选项1。

# c++ - Eclipse c++11 // 向量

> ID：15148972
> 
> 赞同：0
> 
> 时间：2013-03-01T01:35:03.483
> 
> 标签：c++, eclipse, multithreading, vector, c++11

这真的让我发疯：

```
#include <iostream>
#include <vector>
#include <string.h>
#include <thread>

using namespace std;

void test() {
    vector<string> myvector;
    string a("Teststring");
    myvector.push_back(a);
    cout << myvector.begin()->length() << endl;
}

int main() {
    thread(test).join();
    return 0;
} 
```

代码可以通过编译器的 -std=c++11 标志和链接器的 -pthread 标志正常编译。

但是：Eclipse 确实知道 std::thread 或 myvector.begin()->length()，即使代码运行良好 eclipse 也会警告我**"Method 'length' could not be resolved"**。

我在这里尝试了所有可能的解决方案：[Eclipse CDT C++11/C++0x support](https://stackoverflow.com/questions/9131763/eclipse-cdt-c11-c0x-support)，但没有成功。这花了我这么多小时，我做错了什么？！

有没有人在这个代码没有问题的情况下进行项目设置？

**编辑：其他代码示例 - 同样的问题：**

```
#include <iostream>
#include <vector>
#include <thread>

using namespace std;

class TestClass {
public:
    void test() {
        cout << "test" << endl;
    }
};

void test() {
    vector<TestClass> testClassVector;
    TestClass x;
    testClassVector.push_back(x);
    testClassVector.begin()->test();
}

int main() {
    thread(test).join();

    return 0;
} 
```

编译并运行正确，但在 Eclipse 中返回：**无法解析方法“测试”**

**编辑：**

*工作版本：*

```
((TestClass)*(testClassVector.begin())).test();

TestClass foo2 = *(testClassVector.begin());
    foo2.test(); 
```

*还是行不通：*

```
testClassVector.begin()->test(); 
```

最后一个编译并像上面两个一样工作，但 eclipse 仍然声称：

*方法“测试”无法解决*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:45:46.967

也许我错了，但我认为你的问题不是来自 Eclypse。Juste，向量上的 begin() 返回`std::vector<T>::iterator`第一个，这不是指针，也没有方法长度，但`myvector.size();`如果这是你想要的，你可以询问向量的大小。问题可能来自于您`#include <string.h>`的不同`#include <string>`，string.h 用于字符串操作，如 strcmp、strstr 等...... juste string 将定义 std::string 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T22:54:35.637

**找到的解决方案：**

我下载了eclipse[开普勒开普勒](http://www.eclipse.org/downloads/index-developer.php)

创建了一个新项目并尝试编译此源代码（如上）：

```
#include <iostream>
#include <vector>
#include <thread>

using namespace std;

class TestClass {
public:
    void test() {
        cout << "test" << endl;
    }
};

void test() {
    vector<TestClass> testClassVector;
    TestClass x;
    testClassVector.push_back(x);
    testClassVector.begin()->test();
}

int main() {
    thread(test).join();
    return 0;
} 
```

在第一次运行时，eclipse 告诉我，线程属于新的 c++11 标准，我必须将 **-std=c++11**添加到编译器标志中。为了使用线程，我还在链接器标志中添加了**-pthread 。**通过这些步骤，可以编译代码，但 eclipse 将线程标记为未知。为了解决这个问题，我进行了以下步骤：

*在 C/C++ Build（在项目设置中）下，找到 Preprocessor Include Path 并转到 Providers 选项卡。取消选择除 CDT GCC Builtin Compiler Settings 之外的所有选项。然后取消标记共享设置条目...。将选项 -std=c++11 添加到名为 Command 的文本框中以获取编译器规范。*

[在这里](https://stackoverflow.com/questions/9131763/eclipse-cdt-c11-c0x-support)找到。

现在 - 令人难以置信但真实 - 它可以工作，即使没有任何 eclipse 标记的错误。解决方案是使用 eclipse 的（测试版）版本，它似乎以更好的方式处理这个问题。

感谢你的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T02:12:18.910

我没有设置 Eclipse，但问题似乎在`std::string`. 如果从示例中删除线程，问题会消失吗？（我也改为`#include <string>`代替string.h）

```
#include <iostream>
#include <vector>
#include <string>
#include <thread>

using namespace std;

#if 0
void test() {
    vector<string> myvector;
    string a("Teststring");
    myvector.push_back(a);
    cout << myvector.begin()->length() << endl;
}
#endif

int main() {
    //thread(test).join();
    vector<string> myvector;
    string a("Teststring");
    myvector.push_back(a);
    cout << myvector.begin()->length() << endl;
    return 0;
} 
```

那应该有希望打印出来`10`。

**从评论更新：**

这会生成 Eclipse 警告吗？

```
auto tmp = *(myvector.begin());
std::cout << tmp.length() << std::endl; 
```

那这个呢？

```
std::string foo("abc123");
std::cout << foo.length() << std::endl; 
```

我猜还有一个：

```
std::string foo2 = *(myvector.begin());
std::cout << foo2.length() << std::endl; 
```

# java - 以类似弹簧的方式使用 Seam 处理属性

> ID：15148973
> 
> 赞同：0
> 
> 时间：2013-03-01T01:35:15.387
> 
> 标签：java, spring, properties, jboss, seam

我最喜欢的 Spring 特性之一是如何处理从文件加载的属性。你只需要像下面这样设置一个bean

```
<bean id="propertyConfigurer" 
      class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
  <property name="location" value="/WEB-INF/app.properties" />
</bean> 
```

现在，您可以使用 xml（见下文）或注解将从 app.properties 加载的属性值注入到您的 bean 中。

```
<bean class="com.example.PersonDaoImpl">
    <property name="maxResults" value="${results.max}"/>
</bean> 
```

results.max 是属性之一。

我非常喜欢此功能，因为它使我能够创建非常灵活的应用程序，我只需更改一个属性即可打开/关闭某些功能 - 无需重新部署应用程序。

现在我正在使用 JBoss Seam，我一直在努力寻找一种方法来使用这个框架做类似的事情。

有谁知道该怎么做？如果没有，是否有人知道我如何使用 Seam 以一种很好的方式处理属性（我已经看到了一些方法 - 但它们都不够好）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:19:11.903

如果没有适当的方式使用您的软件堆栈（真的没有依赖注入！？）。我会说：使用 Google Guice ( [https://code.google.com/p/google-guice/](https://code.google.com/p/google-guice/) , [https://code.google.com/p/google-guice/wiki/Motivation?tm=6](https://code.google.com/p/google-guice/wiki/Motivation?tm=6) ) ！

Guice 的坏处：您可能需要大量阅读才能了解它是如何工作的，以及您可以用它做什么。但是在它运行之后，你只需将你的`Properties`对象注入你需要的地方：

```
class YourClass {
  @Inject Properties myProperties;

  @Inject
  public YourClass() { ... }

  public void someMethod() {
    use the property
  }
} 
```

或者如果你需要构造函数中的属性，你也可以这样做：

```
class YourClass {
  final Properties myProperties;

  @Inject
  public YourClass(Properties myProperties) { 
    this.myProperties = myProperties;
  }

  public void someMethod() {
    use the property
  }
} 
```

使用 Guice 可能会强制您重构整个应用程序。

但是如果你已经有一些 DI 框架，你应该简单地使用它:)

# c++ - 可以获得 Eigen::MatrixBase 的类型 &

> ID：15148978
> 
> 赞同：0
> 
> 时间：2013-03-01T01:35:45.970
> 
> 标签：c++, eigen

有一个 Eigen::MatrixBase & 数据，有什么办法可以得到它是浮点矩阵还是双精度矩阵？我需要创建一个与 MatrixBase 大小和类型相同的新复杂矩阵。

如果是 MatrixXf，那么我需要创建 MatrixXcf，如果是 MatrixXd，我需要 MatrixXcD。？

```
template <typename A>
        int dowork(const Eigen::MatrixBase<A>& data) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:55:11.487

这很简单，只需使用 A::RealScalar typedef 来构建您的复杂类型：

```
template <typename A>
int dowork(const Eigen::MatrixBase<A>& data) {
    typedef Matrix<std::complex<typename A::RealScalar, Dynamic, Dynamic> MatCplx;
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:48:10.767

我不是 100% 确定我理解所提出的问题，但我认为您要求在满足某些条件后分配另一个相同时间类型的矩阵？您是否希望这个新矩阵不允许与类型不匹配的数据类型？

如果没有，因为您使用的是模板类，所以您有很多自由，可以只使用通用模板数据类型。还考虑使用矢量格式表示矩阵以方便使用。甚至可能像这样的稀疏格式的东西

```
// Local variables used.
int a = 0;
int b = 0;
int endN, endM;

// Iterates through matrix checking when last matrix value is reached for end point.
while (endN != sizeN && endM != sizeM) {
    if (a == sizeN) {
        b++;
        a = 0;
        endM = b;
    } else {
        if (Matrix[a][b] != 0) {
            // Stores non-zero matrix values in queue SpareseFormat.
            SparseFormat.push(a);
            SparseFormat.push(b);
            SparseFormat.push(Matrix[a][b]);
        }
        endN = a;
        a++;
    }
} 
```

对不起，如果我完全不明白你的问题。这是一个漫长的夜晚：P

# python - 寻找一种更有效的方法来在 Python 中重组大量 CSV

> ID：15148983
> 
> 赞同：3
> 
> 时间：2013-03-01T01:36:11.947
> 
> 标签：python, algorithm, list, iteration, data-processing

我一直在解决一个问题，即我有来自大型输出 .txt 文件的数据，现在必须以 .csv 的形式解析和重新组织某些值。

我已经编写了一个脚本，根据数据类型（航班 ID、纬度、经度等）将所有数据输入到列中的 .csv 中，但顺序不正确。所有值都应根据相同的航班 ID 进行分组，从最早的时间戳到最晚的时间戳。幸运的是，我的 .csv 中的所有值都按正确的时间顺序排列，但没有根据航班 ID 适当地组合在一起。

为了澄清我的描述，它现在看起来像这样，

（“时间 x”只是为了说明）：

```
20110117559515, , , , , , , , ,2446,6720,370,42  (Time 0)                               
20110117559572, , , , , , , , ,2390,6274,410,54  (Time 0)                               
20110117559574, , , , , , , , ,2391,6284,390,54  (Time 0)                               
20110117559587, , , , , , , , ,2385,6273,390,54  (Time 0)                               
20110117559588, , , , , , , , ,2816,6847,250,32  (Time 0) 
... 
```

它应该像这样订购：

```
20110117559515, , , , , , , , ,2446,6720,370,42  (Time 0)
20110117559515, , , , , , , , ,24xx,67xx,3xx,42  (Time 1)
20110117559515, , , , , , , , ,24xx,67xx,3xx,42  (Time 2)
20110117559515, , , , , , , , ,24xx,67xx,3xx,42  (Time 3)
20110117559515, , , , , , , , ,24xx,67xx,3xx,42  (Time N)
20110117559572, , , , , , , , ,2390,6274,410,54  (Time 0)
20110117559572, , , , , , , , ,23xx,62xx,4xx,54  (Time 1)
... and so on 
```

为了让事情变得更容易，我输出的 .csv 中有 130 万行。我 99% 确信我编写的下一个用于修复排序的脚本中的逻辑是正确的，但我担心它的效率极低。我最终添加了一个进度条，只是为了看看它是否取得了任何进展，不幸的是，这就是我所看到的：

![在此处输入图像描述](../Images/ef682321381ab6976bbbcc35cae11e26.png)

这是我处理处理的代码（如果您愿意，可以跳到问题区域）：

```
## a class I wrote to handle the huge .csv's ##
from BIGASSCSVParser import BIGASSCSVParser               
import collections                                                              

x = open('newtrajectory.csv')  #file to be reordered                                                  
linetlist = []                                                                  
tidict = {}               

'' To save braincells I stored all the required values
   of each line into a dictionary of tuples.
   Index: Tuple ''

for line in x:                                                                  
    y = line.replace(',',' ')                                                   
    y = y.split()                                                               
    tup = (y[0],y[1],y[2],y[3],y[4])                                            
    linetlist.append(tup)                                                       
for k,v in enumerate(linetlist):                                                
    tidict[k] = v                                                               
x.close()                                                                       

trj = BIGASSCSVParser('newtrajectory.csv')                                      
uniquelFIDs = []                                                                
z = trj.column(0)   # List of out of order Flight ID's                                                     
for i in z:         # like in the example above                                                           
    if i in uniquelFIDs:                                                        
        continue                                                                
    else:                                                                       
        uniquelFIDs.append(i)  # Create list of unique FID's to refer to later                                               

queue = []                                                                              
p = collections.OrderedDict()                                                   
for k,v in enumerate(trj.column(0)):                                            
    p[k] = v 
```

到目前为止一切都很好，但是在下一部分中，我的计算机要么窒息，要么我的代码很烂：

```
for k in uniquelFIDs:                                                           
    list = [i for i, x in p.items() if x == k]                                  
    queue.extend(list) 
```

这个想法是，对于每个唯一值，按顺序迭代 130 万个值并按顺序返回每个出现的索引，并将这些值附加到列表中。在那之后，我将读取那个大的索引列表并将该行数据的内容写入另一个 .csv 文件。达达！可能效率非常低。

这里有什么问题？有没有更有效的方法来解决这个问题？我的代码有缺陷，还是我对笔记本电脑太残忍了？

**更新：**

我发现，根据我处理的数据量，需要 9 到 10 个小时。我在 4.5 中正确吐出了一半。我现在可以摆脱一夜之间的紧缩，但下次可能会考虑使用数据库或其他语言。如果我提前知道我要做什么，我会的，哈哈。

为我的 SSD 调整睡眠设置后，只用了 3 个小时就可以搞定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T02:19:59.100

您可以尝试 UNIX`sort`实用程序：

```
sort -n -s -t, -k1,1 infile.csv > outfile.csv 
```

`-t`设置分隔符并`-k`设置排序键。`-s`稳定排序，并`-n`使用数值比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T01:40:47.370

如果 CSV 文件适合您的 RAM（例如小于 2GB），那么您可以阅读整个内容并`sort`对其进行操作：

```
data = list(csv.reader(fn))
data.sort(key=lambda line:line[0])
csv.writer(outfn).writerows(data) 
```

如果你不摔跤，那应该不会花很长时间。请注意，这`.sort`是一个*stable sort*，因此当键相等时它将保留文件的时间顺序。

如果它不适合 RAM，您可能会想做一些聪明的事情。例如，您可以存储每行的文件偏移量以及该行的必要信息（时间戳和航班 ID），然后对它们进行排序，并使用行偏移信息写入输出文件。

# php - 让重新订购以忽略 magento 中的库存水平

> ID：15148987
> 
> 赞同：0
> 
> 时间：2013-03-01T01:36:22.280
> 
> 标签：php, magento, cart

我的任务是创建一个系统，客户可以在订单到达处理阶段之前对其进行编辑，我认为最简单的方法是使用购物车，但对其进行一些编辑以检测您正在编辑订单而不是制作一个新的

到目前为止，我一直在测试理论，一切似乎都成功了，理论上我一直在努力工作，是利用相同的流程重新订购，以便用之前的订单填充购物车，但是我遇到了问题，如果一个项目缺货，它不会被添加，直到客户确认更改他们的订单，我可以去释放他们订购的东西，我可以存储客户订购的数量，但前提是该项目被添加到购物车

那么有没有办法让magento通过重新订购将商品添加到购物车，同时忽略库存水平

编辑：

我已经尝试`Mage_Sales_Controller_Abstract`在函数中删除 Try Catch`reorderAction()`并且它正在添加项目但是这意味着我也无法捕捉到它的异常，如果它只是一个通知或者是否有任何其他原因导致它无法添加项目到购物车除了没有库存

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:43:48.230

现在开始工作了，诀窍是启用延期交货并修改magento的部分内容，以防止卖家在正常订购时超过库存水平（因为如果一件商品只有6个库存，启用延期交货，客户可以购买10个），之后它只是在购物车中设置一个系统来检测您何时编辑订单并只允许在那里延期交货，因为所有订单都在仓库中检查

# java - 如何在java中使用EPOCH时间？

> ID：15148990
> 
> 赞同：0
> 
> 时间：2013-03-01T01:36:53.397
> 
> 标签：java, integer, epoch

我必须发送一条带有系统当前时间（EPOCH）的消息，该消息将根据以下详细信息发送。还以纳秒为单位发送 EPOCH 时间。

```
field - current_time
type - UINT64
byte size - 8
value - 0 to 1.84467E+19 
```

我的消息结构如下，

```
class MsgHeader {
   int message_length;
   String sender_sys;
   String destination_sys;
   **int current_time;**
   char message_type;

................

} 
```

谁能建议我如何使用java来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T02:55:56.730

```
long current_time = System.currentTimeMillis() * 1000000L; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T03:43:31.873

我将 current_time 的 long 值转换为字节，如下所示。

```
public static byte[] longToBytes(long current_time) throws IOException {
        ByteArrayOutputStream baos = new ByteArrayOutputStream(Long.SIZE / 8);
        DataOutputStream dos = new DataOutputStream(baos);
        dos.writeLong(current_time);
        byte[] result = baos.toByteArray();
        dos.close();
        System.out.println(result.length);//length=8bytes
        return result;
    } 
```

# python - 所有斐波那契数的总和高达一百万

> ID：15148995
> 
> 赞同：-2
> 
> 时间：2013-03-01T01:37:39.840
> 
> 标签：python

我刚刚开始做项目 Euler 问题 2，想知道是否有人可以帮我修复这个脚本：

```
def fib():
    x,y = 0,1
    while True:
        yield x
        x,y = y, x+y

def even(seq):
    for number in seq:
        if not number % 2:
            yield number

def under_a_million(seq):
    for number in seq:
        if number > 4000000:
            break
        yield number   

print sum(even(under_a_million(fib()))) 
```

这段代码应该找到所有斐波那契数的总和，直到一百万。现在我在第 7 行遇到了一些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:50:10.327

您的代码可以毫无问题地运行。
至少是我的版本之后的版本。

如果您的代码确实出错，可能是因为**缩进错误**？我运行这段代码没有问题。

**请注意，问题是“值不超过四百万**的斐波那契数列，求偶数项之和”

所以

```
def fib():
    x,y = 0,1
    while True:
        yield x
        x,y = y, x+y

def even(seq):
    for number in seq:
        if not number % 2:
            yield number

def under_a_million(seq):
    for number in seq:
        if number > 4000000: # <------------
            break
        yield number   

print sum(even(under_a_million(fib()))) 
```

顺便说一句，很高兴看到正在使用生成器。这几乎就像 Haskell 中的惰性求值 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T02:18:27.917

你好 Seamonkey，欢迎来到 SO。我很高兴你在这个问题上比上一个问题付出了更多的努力:)

我将与您一起逐步完成代码。对于简单的问题，我发现*不*使用函数会更容易，因为当必须处理全局变量时它们会很烦人

```
#This part of the code gets the entire fibonacci sequence
list_of_numbers = []
even_fibs = []
x,y = 0,1 #sets x to 0, y to 1
while y <= 4000000: #Gets numbers till 4 million
    list_of_numbers.append(y)
    x, y = y, x+y #updates the fib sequence 
```

在这段代码中，（如果您愿意，可以将其更改为函数），我们计算完整的斐波那契数列，最多 400 万。我们还创建了两个列表，`list_of_numbers`和`even_fibs`。第一个用于存储全序列，第二个用于帮助我们存储偶数。进入下一个街区。

```
coord = 0
for number in range(len(list_of_numbers)):
    test_number = list_of_numbers [coord]

    if (test_number % 2) == 0:
        even_fibs.append(test_number)
    coord+=1 
```

在这里，我测试了列表中的数字是否`list_of_numbers`是偶数。如果是，我将它们添加到`even_fibs`列表中。[您可以在此处](http://www.sthurlow.com/python/lesson06/)阅读列表。

```
print "Normal:  ", list_of_numbers #outputs full sequence
print "\nEven Numbers: ", even_fibs #outputs even numbers
print "\nSum of Even Numbers:  ", sum(even_fibs) #outputs the sum of even numbers 
```

这只是输出了我们的发现。

* * *

由于您似乎喜欢函数，因此我在此处添加了代码。解释和上面的一样。

```
#This part of the code gets the entire fibonacci sequence
list_of_numbers = []
even_fibs = []

def fib(list_of_numbers):

    x,y = 0,1 #sets x to 0, y to 1
    while x+y <= 4000000: #Gets numbers till 4 million
        list_of_numbers.append(y)
        x, y = y, x+y #updates the fib sequence
    return list_of_numbers

def even(list_of_numbers, even_fibs):
    coord = 0
    for number in range(len(list_of_numbers)):
        test_number = list_of_numbers [coord]

        if (test_number % 2) == 0:
            even_fibs.append(test_number)
        coord+=1
    return even_fibs

fib(list_of_numbers) #call fib function

even(list_of_numbers, even_fibs) #Call the even function
#Output
print "Normal:  ", list_of_numbers
print "\nEven Numbers: ", even_fibs
print "\nSum of Even Numbers:  ", sum(even_fibs) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-19T07:41:23.530

下面是我对欧拉 2 挑战的简单函数。在 Python 3.0 中，我希望它能提供一些见解。

```
def sum_even_fib(n):#n is the upper_limit value for item in fib list
    list_numbers=[]
    a,b=0,1#initializing
    while b<n:#exits if condition fail
        list_numbers.append(b)
        a,b=b,a+b
    even_fib =[i for i in list_numbers if i%2==0]
    result=sum(even_fib)
    return result 
```