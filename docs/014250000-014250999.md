# StackOverflow 问答 14250000-14250999

# php - 如何使用 PHP 在用户定义的日期和时间发送电子邮件？

> ID：14250003
> 
> 赞同：1
> 
> 时间：2013-01-10T02:39:13.100
> 
> 标签：php, email, cron, appointment

我有一个议程系统，您可以在其中安排活动和约会，并为每个约会/活动选择日期和时间。

用户会选择接收其约会的提醒，提醒可以是活动开始前5分钟、活动开始前1小时、活动开始前2天等...

因此，如果用户的约会安排在今天晚上 10:00 并且提醒是“10m 之前”，我需要让 php 在晚上 9:50 向用户发送电子邮件。现在，我必须在活动开始前 5m、10m、30m、1h、2h、5h、12h、1d 和 2d 发送提醒。

如何让 PHP 在用户定义的时间发送电子邮件？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T02:50:23.317

您需要将系统分成两个应用程序：

*   用户用来安排事情的应用程序。
*   发送电子邮件的后端应用程序。

第一个应用程序应将计划项目写入数据库，后端应用程序将从数据库中读取并发送电子邮件。

您可以构建它的一种方法是让计划的项目存储如下：

```
ScheduledItems
--------------
ID (int)
Title (string)
EventTime (datetime)
ReminderType (int)
ReminderSent (bool) 
```

`ReminderType`可能是您提到的提醒查找列表的外键：

> 活动开始前5m、10m、30m、1h、2h、5h、12h、1d、2d

然后将通过 cron 安排第二个应用程序可能每 5 分钟运行一次（因为这是最精细的提醒时间）并扫描`ScheduledItems`哪里`ReminderSent`是假的（尚未发送）并`EventTime`减去`ReminderType`查找表中的一些时间跨度值小于或等于当前日期时间。

For each record it finds, send the reminder and update `ReminderSent` to true.

# ruby - 如何使用 Highline 测试 rspec 用户输入和输出？

> ID：14250005
> 
> 赞同：2
> 
> 时间：2013-01-10T02:39:18.943
> 
> 标签：ruby, rspec, io, highline

我想测试对用户输入的响应。使用[Highline](https://github.com/JEG2/highline)查询该输入：

```
def get_name
  return HighLine.new.ask("What is your name?")
end 
```

我想做与[这个问题](https://stackoverflow.com/questions/6335282/can-i-use-rspec-to-mock-stdin-stdout-to-test-console-reads-writes)类似的事情并将其放入我的测试中：

```
STDOUT.should_receive(:puts).with("What is your name?")
STDIN.should_receive(:read).and_return("Inigo Montoya")
MyClass.new.get_name.should == "Inigo Montoya" 
```

使用 Highline 执行此操作的正确方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T08:15:49.700

了解如何测试 Highline 的最佳方法是查看作者如何测试他的包。

```
class TestHighLine < Test::Unit::TestCase
  def setup
    @input    = StringIO.new
    @output   = StringIO.new
    @terminal = HighLine.new(@input, @output)..
  end
..
  def test_agree
    @input << "y\nyes\nYES\nHell no!\nNo\n"
    @input.rewind

    assert_equal(true, @terminal.agree("Yes or no?  "))
    assert_equal(true, @terminal.agree("Yes or no?  "))
    assert_equal(true, @terminal.agree("Yes or no?  "))
    assert_equal(false, @terminal.agree("Yes or no?  "))
....
    @input.truncate(@input.rewind)
    @input << "yellow"
    @input.rewind

    assert_equal(true, @terminal.agree("Yes or no?  ", :getc))
  end

   def test_ask
     name = "James Edward Gray II"
     @input << name << "\n"
     @input.rewind

     assert_equal(name, @terminal.ask("What is your name?  "))
 ....
     assert_raise(EOFError) { @terminal.ask("Any input left?  ") }
   end 
```

等等，如他的代码所示。[您可以在highline 源代码](https://github.com/JEG2/highline/blob/master/test/tc_highline.rb#L23-L27,29-43)中找到此信息，密切关注我在链接中突出显示的设置。

请注意他是如何使用 STDIN IO 管道来代替在键盘上键入键的。

实际上，这表明您不需要使用`highline`来测试那种东西。他的测试中的设置在这里真的很关键。随着他的使用 `StringIO`作为一个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T01:26:02.267

Highline 已经有自己的测试，以确保它输出到 STDOUT 并从 STDIN 读取。没有理由编写这些类型的测试。这与您不会编写 ActiveRecord 测试以确保可以保存属性并从数据库中读取的原因相同。

但是...如果 Highline 有一个框架，它的工作方式与 Capybara 用于 Web 表单的方式相似，那将非常有用...实际上驱动来自 UI 的输入并测试您的命令行实用程序的逻辑。

例如，以下类型的假设测试会很好：

```
run 'my_utility.rb'
highline.should :show_menu
select :add
highline.should(:ask).with_prompt("name?")
enter "John Doe"
output.should == "created new user" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-07T14:32:51.717

我已经发布了 HighLine::Test - 它允许您在一个进程中运行您的测试并在另一个进程中运行您的应用程序（与使用 Selenium 进行基于浏览器的测试的方式相同）。

*   GitHub链接：[https ://github.com/joeyates/highline-test](https://github.com/joeyates/highline-test)
*   宝石：'高线测试'

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-03T13:58:11.333

我研究了这个 DSL 来尝试解决这个问题：

[https://github.com/bonzofenix/cancun](https://github.com/bonzofenix/cancun)

```
require 'spec_helper'

describe Foo do
  include Cancun::Highline
  before { init_highline_test }

  describe '#hello' do
    it 'says hello correctly' do
    execute do
      Foo.new.salute
    end.and_type 'bonzo'
    expect(output).to include('Hi bonzo')
  end 
```

# ruby-on-rails - 如何在 Ruby 中的 .each 内创建哈希哈希

> ID：14250010
> 
> 赞同：4
> 
> 时间：2013-01-10T02:39:30.803
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我正在开发一个跟踪不同事件及其状态的 Rails 应用程序。

这是我的`Status`模型：

```
class Status < ActiveRecord::Base
  attr_accessible :value

  has_many :events
end 
```

有一个添加其他状态类型的界面。

我的`Event`模型如下所示：

```
class Event < ActiveRecord::Base
  attr_accessible :status_id

  belongs_to :status

  class << self
    Status.all.each do |status|
      define_method(status.value.downcase) do
        send("where", :status_id => Status.find_by_value(status.value.downcase))
      end
    end
  end
end 
```

因此，例如，我有三个不同的状态值：`Outage`、`Slow`、`Error`等。

有了这个我可以做到：

```
Event.outage 
```

或者：

```
Event.slow 
```

我将取回`ActiveRecord::Relation`具有该状态的所有事件。这按预期工作。

[我有一个使用Highcharts](http://highcharts.com)动态生成一些图表的视图。这是我的视图代码：

```
<script type="text/javascript" charset="utf-8">
  $(function () {
    new Highcharts.Chart({
        chart: { renderTo: 'events_chart' },
        title: { text: '' },
        xAxis: { type: 'datetime' },
        yAxis: {
          title: { text: 'Event Count' },
          min: 0,
          tickInterval: 1
        },
        series:[
              <% { "Events" => Event,
                   "Outages" => Event.outage, 
                   "Slowdowns" => Event.slow, 
                   "Errors" => Event.error,
                   "Restarts" => Event.restart }.each do |name, event| %>
            {
              name: "<%= name %>",
              pointInterval: <%= 1.day * 1000 %>,
              pointStart: <%= @start_date.to_time.to_i * 1000 %>,
              pointEnd: <%= @end_date.to_time.to_i * 1000 %>,
              data: <%= (@start_date..@end_date).map { |date| event.reported_on(date).count}.inspect %>
            },
            <% end %>]
          });
        });
</script>

<div id="events_chart"></div> 
```

我想使用`Status`数据库中的类型列表动态生成此哈希：

```
<% { 
     "Outage" => Event.outage, 
     "Slow" => Event.slow, 
     "Error" => Event.error,
     "Restart" => Event.restart }.each do |name, event|
%> 
```

使用这样的东西：

```
hash = Status.all.each do |status|
  hash.merge("#{status.value}" => Event) ||= {}
end 
```

我想调用`each`哈希来生成我的图表。不过，这并没有给我一个哈希值，它给了我一个`Array`，就像`Status.all`它本身一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T04:05:03.980

这就是我的做法，使用[`Enumerable#each_with_object`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_with_object)and [`Object#send`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)：

```
hash = Status.select(:value).each_with_object({}) do |s, h|
  h[s.value.upcase] = Event.send s.value.downcase
end 
```

# r - 如何使用 R 的多项式估算缺失值

> ID：14250015
> 
> 赞同：-2
> 
> 时间：2013-01-10T02:40:05.967
> 
> 标签：r

假设我的数据框`DF`有两个列`$A`和`$B`. `$A`始终存在。`$B`当值丢失时，有时编码为 NaN。我想预测`$B.predicted`、 的缺失值`$B`，并创建一个新列`$B.complete`，如果`$B.complete[i]`是NaN，否则是。`$B.predicted``$B[i]``$B[i]`

我使用需要一个因子作为因变量的多项式来预测我有完整观察的B，使用：

```
DF$B.factor <- factor(DF$B)
model.results <- multinom(formula=B.factor ~ A,
                          data=DF[!is.na(DF$B),])
B.predicted <- predict(model.result, newdata=DF, type="class") 
```

变量`B.predicted`是一个因素。

我的`DF$B`专栏不是一个因素。

Mu 的问题是如何合并`DF$B`和`B.predicted`创建`B.complete`？特别是，既然`B.predicted`是一个因素而`DF$B`不是一个因素，那么这段代码是否选择了正确的值？

```
B.complete <- ifelse(is.na(DF$B), $B.predicted, DF$B) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T02:54:38.323

利用`replace`

```
set.seed(1)

DF <- data.frame(A = factor(sample(letters[1:5],30, TRUE)), 
 B = sample(c(letters[1:3],NA), 30 , TRUE, prob = rep(c(0.3,0.1),c(3,1))), 
 stringsAsFactors = F)

DF$B.factor <- factor(DF$B)

# no need to include is.na(DF$B) as multinom will omit anyway
model <- multinom(B.factor ~ A, data = DF)

# use replace to replace the NA values (converting to character when necessary)
DF$B.complete <- replace(DF$B, is.na(DF$B),  as.character(predict(model, newdata = DF[is.na(DF$B),]))) 
```

# javascript - 对话框内容在 Jquery Post 或 Form Submit 时为空

> ID：14250019
> 
> 赞同：0
> 
> 时间：2013-01-10T02:40:31.537
> 
> 标签：javascript, asp.net-mvc, dom

我有一个呈现局部视图的视图，在这个视图中有一个包含复选框列表的对话框。此视图称为创建。

该页面的流程为：

1）用户第一次打开此页面时，他们通过选择文件并点击上传按钮来上传文件。action 方法解析文件并返回模型，并以复选框列表的形式在对话框中显示一组日期。

2）从这个对话框中，他们选择/检查日期并使用对话框中的选择按钮，向控制器操作发出一个发布请求，该操作基于选定的复选框计算一些表单字段并返回部分视图。

3）一旦用户对返回的预填充字段没有问题，他们点击保存并保存记录。

在创建页面上一切正常。在编辑页面中，它似乎是一个不同的故事。第一次加载页面时，在创建时保存的列表会出现在对话框中。但是，当他们在对话框中点击 Select 时，操作方法的帖子会将此列表接收为空。我不确定为什么它为空。不确定我到底做错了什么，但编辑代码如下。

谢谢！！

**JS文件：**

变量运行对话框；

```
$(document).ready(function () {

    $(document).ajaxStart($.blockUI).ajaxStop($.unblockUI);

    RunDialog = $("#runDatestreeview").dialog({ closeOnEscape: true, stack: false, autoOpen: false,
        modal: false, resizable: true, draggable: true, title: 'Select Run Dates to Auto-Populate Form Fields:',
        width: 600, height: 500, position: 'center',
        buttons: { Select: function () {
            $.post("/RunLogEntry/LogFileConfirmation",
              $("#form").serialize(),
               function (data) {
                   $("#runDatestreeview").remove();
                   $("#testExceptiontreeview").remove();
                   $("#main").html(data);
                   $(RunDialog).dialog("close");
               }, "html");
        },
            Cancel: function () {
                $(this).dialog("close");
            }
        }
    });

    RunDialog.closest("div.ui-dialog").appendTo("#form");

    $('#RunDatesChildDialogLink').click(function () {
        $(RunDialog).dialog("open");
    });

    //Region Auto-Open Modal Box
    var modalOpen = $("#LogModals").val();

    if (modalOpen == "0") {
        $("#runDatestreeview").dialog({ autoOpen: true });
    }
    //End Auto Open Modab Box Regiom

}); 
```

**编辑视图**

```
@model RunLog.Domain.Entities.RunLogEntry
@{
    ViewBag.Title = "Update";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/runLogEntry.js")" type="text/javascript"></script>
<script type="text/javascript">
    var runlogListErrorsUrl = '@Url.Action("ListErrorCodes", "RunLogEntry")';
</script>
@using (Html.BeginForm("Edit", "RunLogEntry", FormMethod.Post, new { enctype = "multipart/form-data" }))
{ 
    <div id="main">
        @Html.Partial("_RunLogEntryPartialViewEdit", Model)
    </div>

}
<script src="@Url.Content("~/Scripts/exitCode.js")" type="text/javascript"></script> 
```

**部分编辑视图**为了便于阅读，我没有发布整个模型。Dialog div 称为`runDAtestreeview`.

```
@model RunLog.Domain.Entities.RunLogEntry
<script src="@Url.Content("~/Scripts/runDates.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/testexception.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.blockUI.js")" type="text/javascript"></script>
@Html.ValidationSummary(true)

<div class="bodyContent">
    @if (Model.RunDatesDisplay != null && Model.RunDatesDisplay.Count() > 0)
    {
        <span class="leftContent">
            @Html.Label("Run Dates")
        </span><span class="rightContent"><span id="RunDatesChildDialogLink" class="treeViewLink">
            Click here to Select/View Run Dates</span>
            <br />
            <span id="RunDatesDisplayy" style="cursor: pointer; text-decoration: underline;">
            </span></span>
    }
</div>

<div id="runDatestreeview" title="Dialog Title" style="font-size: 10px; font-weight: normal;
    overflow: scroll; width: 400px; height: 450px; display: none;">
    <table class="grid" style="width: 600px; margin: 3px 3px 3px 3px;">
        <thead>
            <tr>
                <th>
                    Run Dates:
                </th>
                <th>
                    Minimum Replicate:
                </th>
            </tr>
        </thead>
        <tbody>
            @Html.EditorFor(x => x.RunDatesDisplay)
        </tbody>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T05:55:53.220

好的，这似乎微不足道，但通过包含“id = form”将表单更改为以下形式使其工作。看起来早些时候，当我单击选择按钮时，表单为空。

```
@using (Html.BeginForm("Create", "RunLogEntry", FormMethod.Post, new { id = "form", enctype = "multipart/form-data" }))
{ 
```

# javascript - 使用java脚本和php的文本字段的日期格式

> ID：14250023
> 
> 赞同：0
> 
> 时间：2013-01-10T02:40:53.627
> 
> 标签：javascript, jquery

我正在使用文本字段制作一个具有日期字段的表单，我希望我的日期字段在文本字段内具有标签格式，这是图片： ![在此处输入图像描述](../Images/bf63bbfe76e7f49c0861868c3fff13ab.png) 单击文本字段后，格式将被删除，连字符将保持如下图所示： ![在此处输入图像描述](../Images/b07f1438a89d62dc5b2f9ed2dddfdf5f.png) 我已经为标签格式编写了代码，这是我的代码：

```
<input type="text" name="date" value="DD_MM_YYYY" id="date" style="width:180px" onclick="if(this.value=='DD_MM_YYYY'){this.value=''}"  />
</p> 
```

我现在的问题是单击文本字段后将保留的hypen。

有谁知道该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T02:44:25.140

我会推荐屏蔽输入插件。
[http://digitalbush.com/projects/masked-input-plugin/](http://digitalbush.com/projects/masked-input-plugin/)

您可以使用以下代码定义自己的掩码类型：

```
jQuery(function($){
   $("#myinput").mask("99-99-9999",{placeholder:" "});
}); 
```

然后您可以为输入定义一个占位符：

```
<input id='myinput' placeholder='dd-mm-yyyy'> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T02:44:34.350

您可以使用占位符属性。

```
<input placeholder="  -  -    " value="DD-MM-YYYY" /> 
```

当元素获得焦点时，您可以继续将该值设置为空。在模糊时将值设置回`DD-MM-YYYY`.

请注意，并非所有浏览器都支持此属性。

# iphone - UIApplication -scheduleLocalNotification：由 UIApplication -appWillTerminate 调用时非常慢：

> ID：14250031
> 
> 赞同：0
> 
> 时间：2013-01-10T02:41:48.830
> 
> 标签：iphone, ios, performance, cocoa-touch, uilocalnotification

![当我按下主页按钮时，我的应用程序的时间分析器](../Images/daad8162ca6a67b00b118572161ba8d6.png)

我在我的中设置了“应用程序不在后台运行” `info.plist`，所以当用户点击主页按钮时，应用程序退出。

当我 `[UIApplication -appWillTerminate:]`打电话时，我会安排 64 个本地通知到系统，所有这些都是非重复的。

但这在装有 iOS6.0.1 的 iPhone4 上似乎需要很长时间（6.17 秒）。当我查看时间分析器时，我发现曲线很奇怪，它不会占用太多 CPU 时间，但确实需要很多时间。

此外，当我查看调用树时，93% 的时间都花在`[UIApplication -scheduleLocalNotification:]`了图像中显示的时间范围内。为什么？

这就是我生成通知的方式：

```
UILocalNotification *n = [[[UILocalNotification] alloc] init] autorelease];
n.alertBody = @"some body";
n.hasAction = YES;
n.alertAction = @"some action";
n.fireDate = @"some date";
n.repeatInterval = 0;
n.soundName = @"my sound"
n.userInfo = aDictionaryWithAStringAbount10CharacterLongAnd2NSNumber.
[self.notifications addObject:n]; 
```

这是我安排通知的方式：

```
-(void)endProxyAndWriteToSystemLocalNotification
{
        _proxying = NO;
        NSDate *dateAnchor = [NSDate date];

        NSEnumerator *enumerator = [self.notifications objectEnumerator];
        NSInteger i = 0;
        while (i < maxLocalNotifCount) {
            UILocalNotification *n = [enumerator nextObject];
            if (!d) {
                break;
            }

            if ([n.fireDate timeIntervalSinceDate:dateAnchor] >= 0) {
                [[UIApplication sharedApplication] scheduleLocalNotification:n];
                i++;
            }
        }

        [self.notificationDatas removeAllObjects];

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-24T13:01:42.380

这将有助于：

```
-(void)endProxyAndWriteToSystemLocalNotification {

    [[UIApplication sharedApplication] setScheduledLocalNotifications:self.notifications];
} 
```

iOS 4.2 及更高版本

阅读 UIApplication 类参考以获得详细描述

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T02:50:13.193

我认为问题在于您正在尝试安排 64 个本地通知。是否有理由在应用程序终止时执行所有这些操作？苹果的 scheduleLocalNotification 没有被设计为在终止时被调用这么多次

# jquery - 插入 DOM 的表单的 jQuery 验证

> ID：14250032
> 
> 赞同：5
> 
> 时间：2013-01-10T02:41:52.927
> 
> 标签：jquery, asp.net, asp.net-mvc-4, jquery-validate

我在页面上有这个标记：

```
 <div data-bind="visible: found">
        <div data-bind="with: eventDetails">
            <!-- Some stuff -->
        </div>
        <div style="clear: left">
            <div id="newShow" title="Add a Show"></div>
            <a href="#" class="btn btn-primary" id="addShow" data-bind="click: addShow">Add a Show</a> <!-- this is bound to a knockout viewmodel which calls addShowDialog() function -->
        </div>
 </div> 
```

这是加载到的表格`div#newShow`

```
<form action="/MyEvents/AddShow/events-385" id="addShowForm" method="post" novalidate="novalidate">    <div>
        <div class="editor-label">
            <label for="Name">Name</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line" data-val="true" data-val-required="The Name field is required." id="Name" name="Name" type="text" value="">
            <span class="field-validation-valid" data-valmsg-for="Name" data-valmsg-replace="true"></span>
        </div>
        <div class="editor-label">
            <label for="Date">Date</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line hasDatepicker" data-val="true" data-val-date="The field Date must be a date." data-val-required="The Date field is required." id="Date" name="Date" type="datetime" value="10 January 2013">
            <span class="field-validation-valid" data-valmsg-for="Date" data-valmsg-replace="true"></span>
        </div>
        <div class="editor-label">
            <label for="ReportingTime">ReportingTime</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line hasDatepicker" data-val="true" data-val-date="The field ReportingTime must be a date." data-val-required="The ReportingTime field is required." id="ReportingTime" name="ReportingTime" type="datetime" value="03:26 p.m.">
            <span class="field-validation-valid" data-valmsg-for="ReportingTime" data-valmsg-replace="true"></span>
        </div>
        <div class="editor-label">
            <label for="JudgingStarts">JudgingStarts</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line hasDatepicker" data-val="true" data-val-date="The field JudgingStarts must be a date." data-val-required="The JudgingStarts field is required." id="JudgingStarts" name="JudgingStarts" type="datetime" value="03:26 p.m.">
            <span class="field-validation-valid" data-valmsg-for="JudgingStarts" data-valmsg-replace="true"></span>
        </div>
    </div>
</form> 
```

这是插入表单并处理从表单返回的 Javascript：

```
function addShowDialog() {
        $.get('/myevents/addShow/' + eventId,
            null,
            function (data, textStatus, xhr) {
                refreshTarget($('#newShow'), data);
                $('#newShow').dialog('open');
            });
    };

$('#newShow').dialog({
        autoOpen: false,
        modal: true,
        resizable: false,
        buttons: {
            "Create a Show": function () {
                var form = $('#addShowForm');
                var valid = form.valid(); //<-- this always returns true!
                if (valid) {
                    var formData = form.serialize();
                    formData = formData + '&EventId=' + encodeURIComponent(eventId);
                    $.post(
                        form.attr('action'),
                        formData,
                        function(data) {
                            if (data == "Success") {
                                $('#newShow').dialog("close");
                            }
                        }
                    );
                }
            },
            "Cancel": function () {
                $(this).dialog("close");
            }
        },
        close: function () {
            loadData();
        }
    }); 
```

我无法输入表格`div#newShow`进行验证。检查`form.valid()`总是返回真。我的头（和眼球）有点像整个事情一样游泳，所以我希望这是有道理的。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T08:57:18.033

有一种更简单的方法可以做到这一点 Dany - 我更喜欢在 ajax 响应之后重新绑定表单，因为你可以让自己陷入困境，试图管理 dom 中哪些字段已更改或被替换。

我有一个非常庞大且复杂的应用程序，它对许多表单进行了许多更改，因此更容易养成完全重新绑定的习惯。这可以使用以下方法完成：

```
 var forms = $("body").find("form");
        for (var i = 0; i < forms.length; i++) {
            var form = $(forms[i]);

            form.removeData("validator")
                .removeData("unobtrusiveValidation");

            $.validator.unobtrusive.parse(form);
        } 
```

我们有一个稍微优雅的用法，其中使用相同的主体传入特定的容器。

当一个元素被替换为验证器中的引用与新的 dom 元素不同时，要解决的痛苦问题就会发生。很难调试和追踪。您会发现只需销毁验证器并重新解析整个表单，以 1 大小适合所有方法，而删除、替换或其他方式无关紧要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T02:57:41.427

文档指出，在使用 valid() 之前，您需要在表单上调用 validate()

```
var form = $('#addShowForm');
form.validate();
var valid = form.valid(); 
```

[http://docs.jquery.com/Plugins/Validation/valid](http://docs.jquery.com/Plugins/Validation/valid)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T10:36:57.567

一些建议：

*   尝试调试并进入 $('form').validate()。有一点是 jQuery 在表单上附加了验证（如果还没有的话）。验证它是否是正确的形式。
*   jQuery UI 对话框获取调用它的元素并将其附加到页面的末尾。我不确定在调用表单所在的 elemebt`.validate()`之前或之后调用时这是否会导致问题。`.dialog()`试一试也排除

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-13T19:11:18.757

我在这个问题中找到了答案：[jquery.validate.unobtrusive not working with dynamic injection elements](https://stackoverflow.com/questions/4406291/jquery-validate-unobtrusive-not-working-with-dynamic-injected-elements)

Steve Lamb 的回答对我帮助最大。据我了解，所有验证器都在页面加载时连接起来。如果稍后添加表单或字段，则必须手动连接其验证器。我用史蒂夫的小插件把它们连接起来。

# objective-c - 如何获取从 UITableview 边缘到 UITableViewCell 的填充

> ID：14250034
> 
> 赞同：3
> 
> 时间：2013-01-10T02:42:22.907
> 
> 标签：objective-c, uitableview, padding

在 iPad 上，Grouped 样式的 tableview 的单元格比在 iPhone 上从 tableview 的边缘插入得更深。

我需要检索从表格视图边缘到单元格开始位置的左右距离。我指的是类似于“边距”。我上下阅读了 UITableview API，找不到返回这个的属性。

我需要在计算中使用它来计算在我的单元格中放置内容的位置。

提前致谢！亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T03:14:07.727

我还没有测试过这个，但我很确定你应该能够拿起两者的框架，然后从那里进行比较。

```
CGRect cellFrame = yourCell.frame;

CGRect tableFrame = yourUITableView.frame; 
```

CGRect 值为`(x coordinate, y coordinate, width, height)`.

您也可以使用以下方法打印出帧：

```
 NSLog(@"your cell frame is %@",NSStringFromCGRect(yourCell.frame);
 NSLog(@"your table frame is %@",NSStringFromCGRect(yourUITableView.frame); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:30:15.877

我通过覆盖 iPad 的 layoutSubviews 调用并将分组视图边距设置为我想要的，而不是明显隐藏的值来解决这个问题。Stack 中的其他答案指出它的宽度可以在 10 到 45 像素之间变化。

```
In your CustomTableViewCell class
- (void)layoutSubviews
{
    CGRect f = self.bounds;
    f = CGRectInset(f, 10, 0);
    self.contentView.frame = f;
    self.backgroundView.frame = f;
} 
```

您可以强制它保持 contentView 和 backgroundView 等于 TableCell 的宽度，即 TableView 的宽度，但在这种情况下，我仍然希望我的分组视图稍微插入一点。它还允许您更好地匹配自定义页眉/页脚视图，无需工作即可边缘到边缘。

# php - Jquery ajax contentType 让我很困惑

> ID：14250040
> 
> 赞同：1
> 
> 时间：2013-01-10T02:44:05.680
> 
> 标签：php, jquery, asp.net, ajax

我正在使用 jquery ajax 函数。当我将 JSON 数据发布到服务器时，我注意到了一个问题。

发布数据的类型是 JSON。所以我添加了代码来指定我发送的是 JSON。

```
contentType: "application/json". 
```

我写了下面的代码：

```
var data = {"data": "mytestdata" };
var option = {
     url: 'Handler1.ashx',
     type: 'POST',
     dataType: 'html',
     success: function (result) {
         alert(result);
     },
     data: data,
     contentType: "application/json"
 };
 $.ajax(option); 
```

在服务器端，我使用了以下代码：

```
string s = context.Request["data"]; 
```

但结果`s`是`null`。

从逻辑上讲，设置`contentType="application/json"`和发布 json 数据是完美的。但这是错误的。

我还尝试了 php 文件中的代码：

```
echo $_POST["data"]; 
```

PHP 说`$_POST["data"] doesn't exist`。

所以我试图删除代码 - `contentType: "application/json"`。

现在，一切正常。

但这让我很困惑。为什么我们在发布真正的 json 数据时不需要将 contentType 设置为 json？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T02:54:01.377

您不需要这样做`contentType: "application/json"`，当您不指定内容类型时，它会将要在 http 参数中发送的数据从 json 转换为可通过 $_GET 或 $_POST 参数访问的数据。

但是如果你只想发送 json 数据..你可以在服务器端尝试这个代码来获取数据：

```
<?php
$data = @file_get_contents('php://input');
print_r(json_decode($data));
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T02:52:50.537

您没有发回 JSON 数据。当 ajax 内容类型设置为接受 JSON 时，jQuery 认为这是一个错误，但会返回格式错误的 JSON。

`echo $_POST['data']`可能会抛出异常“可捕获的致命错误：stdClass 类的对象无法转换为字符串”——因此实际上会被打印出来。那不是有效的 JSON。

你可能想要做的是`echo json_encode($_POST['data']);`

# c++ - 将文件解析为十六进制

> ID：14250046
> 
> 赞同：0
> 
> 时间：2013-01-10T02:44:33.780
> 
> 标签：c++

假设我有一个 .img 文件。我想解析文件并以十六进制显示。这是我在互联网上的代码参考。但应用程序显示为空。请帮我解决它。

```
 int _tmain(int argc, _TCHAR* argv[])
      {
    const char *filename = "test.img";
    ifstream::pos_type size;
    char * memblock;
    ifstream file(filename, ios::in|ios::binary|ios::ate);
      if (file.is_open())
      {
        size = file.tellg();
        memblock = new char [size];
        file.seekg (0, ios::beg);
        file.read (memblock, size);
        file.close();

        std::string tohexed = ToHex(std::string(memblock, size), true);
        cout << tohexed << endl;
      }
      }

        string ToHex(const string& s, bool upper_case)  { 

    ostringstream ret;

    for (string::size_type i = 0; i < s.length(); ++i)
    {
        int z = (int)s[i];
        ret << std::hex << std::setfill('0') << std::setw(2) << (upper_case ? std::uppercase : std::nouppercase) << z;
    }

    return ret.str();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T03:01:12.327

代码太多了。

它可以帮助定义一个类`operator<<`来封装自定义格式。

[https://ideone.com/BXopcd](https://ideone.com/BXopcd)

```
#include <iostream>
#include <iterator>
#include <algorithm>
#include <iomanip>

struct hexchar {
    char c;
    hexchar( char in ) : c( in ) {}
};
std::ostream &operator<<( std::ostream &s, hexchar const &c ) {
    return s << std::setw( 2 ) << std::hex << std::setfill('0') << (int) c.c;
}

int main() {
    std::copy( std::istreambuf_iterator<char>( std::cin ), std::istreambuf_iterator<char>(),
        std::ostream_iterator< hexchar >( std::cout ) );
} 
```

# ruby-on-rails - rails新项目错误

> ID：14250049
> 
> 赞同：0
> 
> 时间：2013-01-10T02:44:55.390
> 
> 标签：ruby-on-rails

只是想知道是否有人遇到过这种情况，一直在网上四处寻找修复它，还没有偶然发现任何东西。

使用本机扩展安装 json (1.7.6) Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension 。

```
C:/RailsInstaller/Ruby1.9.3/bin/ruby.exe extconf.rb 
```

创建 Makefile

Gem 文件将继续安装在 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9 .1/gems/json-1.7.6 以供检查。结果记录到 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/json-1.7。6/ext/json/ext/generator/gem_make.out 安装json（1.7.6）时出错，Bundler无法继续。在捆绑之前确保 gem install json -v '1.7.6' 成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:04:32.920

您需要 Ruby DevKit 女巫提供编译器来创建 gem。你可以在这里得到它：

[http://rubyinstaller.org/downloads/](http://rubyinstaller.org/downloads/)

# python - Scipy inv(A) 与 AI

> ID：14250051
> 
> 赞同：3
> 
> 时间：2013-01-10T02:45:03.967
> 
> 标签：python, numpy, scipy

我对 Python 还很陌生，我想知道两者之间有什么区别：

```
inv(A) 
```

和

```
A.I 
```

两者都返回一个 Numpy 数组，其中包含矩阵**A**的逆矩阵。

`A.I`在我看来，它正在从存储矩阵逆的矩阵类中访问一个变量；但是，这意味着每次更改**A时，都必须重新计算****A**的倒数（这对我来说似乎不合逻辑）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T02:57:49.557

`A.I`并且`numpy.linalg.inv`不一样。

`A.I`是一个调用[matrix.getI的](https://github.com/numpy/numpy/blob/master/numpy/matrixlib/defmatrix.py#L817)[属性](https://github.com/numpy/numpy/blob/master/numpy/dual.py#L36)：

```
def getI(self):
    M,N = self.shape
    if M == N:
        from numpy.dual import inv as func
    else:
        from numpy.dual import pinv as func
    return asmatrix(func(self)) 
```

因此，根据矩阵的形状，`getI`要么调用[numpy.dual.inv](http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.inv.html#numpy-linalg-inv)（方阵的乘法逆）或[numpy.dual.pinv](http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.pinv.html)（Moore-Penrose 伪逆）。

如果您跟踪定义（在[dual.py](https://github.com/numpy/numpy/blob/master/numpy/dual.py#L36)中），您会发现 `numpy.dual.inv`is`numpy.linalg.inv`和`numpy.dual.pinv`is `numpy.linalg.pinv`。

```
In [69]: s = np.random.random((3,4))

In [70]: t = np.matrix(s)

In [71]: t.I
Out[71]: 
matrix([[ 1.09509751, -0.56685735,  0.51704085],
        [-1.59777153,  0.2777383 ,  1.25579378],
        [ 0.81899054,  0.7594223 , -0.82760378],
        [ 0.02845906,  0.50418885, -0.2091376 ]])

In [72]: np.linalg.inv(t)
...
LinAlgError: Array must be square 
```

* * *

此外，`np.linalg.inv`可以应用于 numpy 数组（并返回一个 numpy 数组），也可以应用于 numpy 矩阵。该`matrix.I`属性特定于 numpy 矩阵，并返回另一个 numpy 矩阵。

```
In [60]: x = np.random.random((3,3))

In [62]: y = np.matrix(x)    

In [64]: type(y.I)
Out[64]: <class 'numpy.matrixlib.defmatrix.matrix'>

In [65]: type(np.linalg.inv(x))
Out[65]: <type 'numpy.ndarray'> 
```

* * *

一个属性，like`A.I`在语法上看起来像一个属性，但它实际上调用了一个函数（在本例中为`A.getI`）。所以倒数的值没有被存储。每次 Python 求值`A.I`时，`A.getI()`都会调用函数，并返回函数的结果。

有关属性的更多信息，请参阅[属性：由 get/set 方法管理的](http://www.python.org/download/releases/2.2.3/descrintro/#property)属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T02:49:53.860

根据您的 Python 版本和`numpy`, `I`（以及`T`类似的等）是 a[`@property`](http://docs.python.org/2/library/functions.html#property)或同一事物的自定义实现。

如果您以前从未见过这种情况，那么您的想法是您可以创建一些看起来像数据属性（也称为“成员变量”）的东西，但每次访问它时都会调用一个 getter 方法。

因此，不是`A.I`每次更改都强制重新计算`A`，而是每次访问时都强制重新计算`A.I`。

当然，这可能不会更好，这取决于您的使用模式；它甚至可能更糟。但是，就像任何其他方法一样，`numpy`如果有帮助的话，没有什么可以停止记忆（缓存结果）。

在幕后，getter`A.I`是`A.getI()`，所以它们是等价的，而且两者都可能等价于`inv(A)`。（拥有做同样事情的自由函数`foo(A)`和方法在全世界都很普遍。）除了，正如 unutbu 指出的那样，有不止一种方法叫做; 将等同于其中之一，但不一定与您直接导入到主命名空间中的相同。`A.foo()``numpy``inv``A.I`

# bash - TAR 不能与 crontab 一起正常工作

> ID：14250054
> 
> 赞同：0
> 
> 时间：2013-01-10T02:45:06.993
> 
> 标签：bash, backup, mysqldump, freebsd, tar

首先，我说它不能与 crontab 一起正常工作，因为当我手动运行脚本时它工作正常。

问题是，当我使用 cronjob 运行备份脚本并且......它来压缩 mysql 转储时，tar 存档只有`16`字节大小（并且它是空的，所以看起来没有文件可以打包到存档），奇怪的是，当我手动运行脚本时，它运行了将近 5~ 分钟，并且 tar 包大小为`~1.8GB`.

这是我的 bash 代码：

```
#!/usr/local/bin/bash
# Configuration
BACKUPD="/backup/mysql"
MySQLuser='root'
MySQLpass='xxxx'
# End configuration
ROK=`date +%Y`
MIESIAC=`date +%m`
DZIEN=`date +%d`
GIM=`date +%H-%M`

if [ -d $BACKUPD/$ROK/$MIESIAC/$DZIEN ]
then
echo
else
mkdir -p $BACKUPD/$ROK/$MIESIAC/$DZIEN
fi

for db in $(echo "SHOW DATABASES;" | mysql --user=$MySQLuser --password=$MySQLpass | grep -v -e "Database" -e "information_schema")
do
    mysqldump --skip-lock-tables --ignore-table=log.log --user="$MySQLuser" --password="$MySQLpass" $db >$BACKUPD/$ROK/$MIESIAC/$DZIEN/$db.sql
done

cd $BACKUPD/$ROK/$MIESIAC/$DZIEN && tar jcPf $BACKUPD/$ROK/$MIESIAC/$DZIEN/mysql-$GIM.tar.bz2 *.sql && rm -rf *.sql 
```

哪里有问题？以前有没有人遇到过这样的问题？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T02:54:29.080

我的猜测是最后一行是你的问题。shell glob ( `*.sql`) 在：

```
cd $BACKUPD/$ROK/$MIESIAC/$DZIEN && tar jcPf $BACKUPD/$ROK/$MIESIAC/$DZIEN/mysql-$GIM.tar.bz2 *.sql && rm -rf *.sql 
```

在当前目录中展开，而不是*在*`cd`您可能期望的之后。请尝试以下方法，它更安全。

```
old_dir=`pwd`
cd "$BACKUPD/$ROK/$MIESIAC/$DZIEN"
tar jcPf mysql-$GIM.tar.bz2 *.sql
rm -fr *.sql
cd "$old_dir" 
```

`.sql`tar 球可能仍然没有任何文件。我没有`mysql`安装，但我怀疑`for`循环也搞砸了。请尝试以下方法：

```
mysqlshow | \
xargs mysqldump --databases | \
bzip2 > $BACKUPD/$ROK/$MIESIAC/$DZIEN/mysql-$GIM.bz2 
```

您可能需要为`mysqlshow`and`mysqldump`命令插入其他参数。当然，这不会创建一个 tarball，但它会给你一个压缩备份。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T04:59:40.120

您可以尝试在脚本中`mysqldump`使用完整路径名吗？`mysql`

所以：

> 如果`which mysql`等于`/usr/local/mysql/bin/mysql`
> 
> 和
> 
> 如果`which mysqldump`等于`/usr/local/mysql/bin/mysqldump`

将您的脚本修改为：

```
for db in $(echo "SHOW DATABASES;" | /usr/local/mysql/bin/mysql --user=$MySQLuser --password=$MySQLpass | grep -v -e "Database" -e "information_schema")
do
    /usr/local/mysql/bin/mysqldump --skip-lock-tables --ignore-table=log.log --user="$MySQLuser" --password="$MySQLpass" $db >$BACKUPD/$ROK/$MIESIAC/$DZIEN/$db.sql
done 
```

# actionscript-3 - 在有限的咨询中列出照片

> ID：14250055
> 
> 赞同：1
> 
> 时间：2013-01-10T02:45:09.383
> 
> 标签：actionscript-3, api, facebook-graph-api, facebook-as3-api

我发现了这个问题，因为当我意识到我的个人资料中有一张包含 30 张照片的相册时，何时通过命令仅列出部分的查询出现了 20 张照片，这是一个单独的分页值，但不尊重逻辑！有人经历过这个或知道我使用的是“ID_ALBUMS / PHOTOS”，并且在“ME / PHOTOS”中发生了同样的错误，他并不总是列出所有专辑页面......没有显示其余部分！上帝的爱有人帮助我！

哈！这不是因为缺乏许可或在互联网上用于隐私的应用程序，他列出了我所有的照片！

# sendmail - Sendmail DSN 错误 - 旧标题（使用 TLS 的 Sendmail 智能主机 - 主机拒绝）

> ID：14250056
> 
> 赞同：4
> 
> 时间：2013-01-10T02:45:37.340
> 
> 标签：sendmail, smarthost

我正在尝试在我的 FreeBSD 服务器上使用双 MTA SA/VS 实施设置新的 Sendmail 安装。当我自己处理邮件时，一切似乎都运行良好，但是当我尝试通过我的智能主机发送邮件（我在其他服务器上没有问题）时，我从主机收到一条服务不可用消息。看起来好像我的 sendmail 正在尝试使用 TLS 向我的智能主机发送邮件，因此被智能主机拒绝。

这是我的 sendmail.cf 文件中定义我的智能主机的行：

```
define(`SMART_HOST', `smtp.comcast.net')dnl 
```

这是我尝试发送消息时的日志输出：

> 1 月 9 日 20:36:51 shep sendmail[4814]：STARTTLS=client，relay=smtp.comcast.net，version=TLSv1/SSLv3，verify=FAIL，cipher=DHE-RSA-AES256-SHA，bits=256/256
> 1 月 9 日 20:36:51 shep sendmail[4814]: r0A1apXE004812: to=myemail@gmail.com, ctladdr=root (0/0), delay=00:00:00, xdelay=00:00:00, mailer=中继，pri=30038，relay=smtp.comcast.net [68.87.26.155]，dsn=5.0.0，stat=服务不可用

我希望它只是将它发送到没有密码废话的智能主机，我该如何禁用它？

这是来自我的其他服务器的日志条目，它与智能主机一起正常工作：

> 1 月 9 日 21:48:09 业力 sm-mta[89472]: r0A2m2d8089469: to=, ctladdr= (1001/0), delay=00:00:02, xdelay=00:00:01, mailer=relay, pri= 30351, relay=smtp.comcast.net [68.87.26.155], dsn=2.0.0, stat=Sent (m2tP1k00o3Nw2a03Y2tQjg 邮件接受投递)

谢谢，

娄

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T04:15:55.210

所以我打算删除这篇文章，因为标题具有误导性。我已经解决了这个问题，我决定保留问题和答案，因为它似乎对其他人来说是个问题，所以我希望它有所帮助。

上面观察到的真正问题是 DSN 错误，不是 DNS，而是 DSN。sendmail DSN 或传递状态通知是 sendmail MTA 的一部分。

发生的事情是，当我从命令行发送邮件时，我收到了 DSN 错误，因为我的 sendmail.cf 文件中没有设置主机名。

当我从另一个邮件客户端发送邮件时我注意到了这一点并且它通过了 OK，然后我进一步查看了 sendmail DSN 本身。

将以下行添加到我的 mc 文件中，然后将其重新编译到其相应的 cf 文件中解决了该问题：

```
define(`confDOMAIN_NAME', `your.domainnamehere.com')dnl 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-01-28T10:35:15.193

解决了我发出的sendmail。

我将以下内容放入 sendmail.mc

```
define(`confDOMAIN_NAME', `smtp.gmail.com')dnl

define(`SMART_HOST', `smtp.gmail.com')dnl

define(`confAUTH_MECHANISMS`, `EXTERNAL GSSAPI DIGEST-MD5 CRAM-MD5 LOGIN PLAIN`)dnl

FEATURE('authinfo','hash /etc/mail/auth/client-info')dnl 
```

# python - python从父包导入模块

> ID：14250058
> 
> 赞同：18
> 
> 时间：2013-01-10T02:45:38.917
> 
> 标签：python, import, module, package, parent

我有以下目录结构

```
foo/
    __init__.py
    settings.py
    bar/
        __init__.py
        myfile.py 
```

在 myfile.py 我有：导入设置

我收到以下错误：`ImportError: No module named settings`，为什么？如何有效地`settings`从`myfile.py`

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-10T02:54:50.710

从[http://docs.python.org/2/tutorial/modules.html#intra-package-references](http://docs.python.org/2/tutorial/modules.html#intra-package-references)：

```
from .. import settings 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-10-14T15:01:48.060

这是另一种似乎更清楚的方法：

在`foo.__init__.py`：

```
 __all__ = ['settings', ..(all other modules at 'foo' level you want to show)...] 
```

在`myfile.py`：

```
# instead of "from .. import..." 
  from foo import settings 
  print settings.theThing 
```

# css - 如何阻止 div 在页面调整大小时折叠？

> ID：14250060
> 
> 赞同：5
> 
> 时间：2013-01-10T02:45:45.757
> 
> 标签：css, html, collapse

HTML：

```
<div id="wrapper">

    <div id="tabs">   
    </div> <!-- tabs close !-->

    <div id="verticalStack">

        <div id="accordion">
        </div> <!-- accordion close !-->

        <div id="usersBox">
        </div><!-- usersBox close !-->

        <div id="displayProductButtons">
        </div> <!-- displayProductButtons close !-->

    </div>  <!-- verticalStack !-->

</div> <!-- wrapper close !--> 
```

CSS：

```
body {
   margin:0;
   padding:0;
   font-family: Verdana, Times, serif;
   font-size: 12px;
   color: #333333;
   background-color: #F9F9F9;
   min-width: 944px;
}

#wrapper{
    margin:10px;
    width:90%;
}

#tabs {
    float:left;
    width:700px;
    margin-right: 10px; 
}

#verticalStack{
    float:left;
    width:400px;
    height:500px;
}

#accordion{
    float:left; 
}

#usersBox{
    width:100%;
    margin-top:10px;
    float:left;
    border:1px solid #aaa;
    border-radius:5px;
}

#display{
    margin-top:25px;
    float:left;
} 
```

页面如下所示：

```
 ------------------------------------
| wrapper                            |
    -----   ------------------
|  |tabs|   |verticalStack    |      |
   -----   ------------------- 
|          |  |accordion   |  |      |
            -------------           
|          |  |usersBox    |  |      |
            -------------        
|          |  |display     |  |      |
            --------------
|          |                  |      |
            ----------------         
|------------------------------------- 
```

当我调整页面大小时，`veritcalStack`div（以及内部 div）位于选项卡 div 下。有人可以向我解释为什么会发生这种情况以及我能做些什么，谢谢。

**更新 1：**在结构图中添加了包装器 div

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T02:50:36.350

你正在浮动你的元素；只要水平空间足以提供它们，它们就会并排放置。如果您不希望它们折叠，则应将它们放在具有明确宽度的容器中；不过，这将在您调整大小的某个时间点创建一个水平滚动条。

```
<!-- these images will not collapse -->
<div id="container">
  <img src="http://placekitten.com/300/200" />
  <img src="http://placekitten.com/200/200" />
</div>

<!-- these images will collapse -->
<img src="http://placekitten.com/300/200" />
<img src="http://placekitten.com/200/200" /> 
```

工作小提琴：http: [//jsfiddle.net/jonathansampson/EChrr/](http://jsfiddle.net/jonathansampson/EChrr/)

我的建议是接受这一点；查看[*响应式网页设计*](http://www.alistapart.com/articles/responsive-web-design/)，了解如何利用浏览器的自然行为为您带来优势。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T02:58:44.397

浮动元素将并排放置，直到空间不足（即浏览器窗口宽度小于 1110 像素时）。如果这是必须的设计，那么您应该将#wrapper 上的**width**或**min-width**设置为 1110px 宽。

您还可以尝试设置浮动元素相对于其他元素的宽度（即使用百分比），以便设计也适用于较小的分辨率。

# ruby - 在 Datamapper 中，得到“NoMethodError - 未定义的方法‘get！’ 对于 nil:NilClass:"

> ID：14250062
> 
> 赞同：2
> 
> 时间：2013-01-10T02:45:54.900
> 
> 标签：ruby, orm, ruby-datamapper

我有两个表，为数据映射器映射：

```
class User
  include DataMapper::Resource

  property :id,                     Serial,     :field => 'ID'
  property :user_first_name,        String,     :field => "USER_FIRST_NAME"
  property :user_last_name,         String,     :field => "USER_LAST_NAME"

  has n, :login_sessions, :child_key => [ :user_id ], :parent_key => [ :id ]
end 
```

和

```
class LoginSession
  include DataMapper::Resource

  property :id,                     Serial,     :field => 'ID'
  property :user_id,                Integer,    :field => "USER_ID"
  property :login_time,             DateTime,   :field => "LOGIN_TIME"

  belongs_to :user, :parent_key => [ :user_id ], :child_key => [ :id ]
end 
```

给定一个 LoginSession 对象，我想获取相应的用户：

```
session = LoginSession.first(:id => 1)
if session
  # code reaches here, meaning that session is not nil.
  user = session.user
end 
```

当我在 user = session.user 处运行此代码时，我收到以下错误：

```
NoMethodError - undefined method `get!' for nil:NilClass:
/Users/Tom/.rvm/gems/ruby-1.9.3-p362/gems/dm-core-1.2.0/lib/dm-   core/property_set.rb:88:in `block in get!'
/Users/Tom/.rvm/gems/ruby-1.9.3-p362/gems/dm-core-1.2.0/lib/dm-core/support/subject_set.rb:210:in `block in each'
/Users/Tom/.rvm/gems/ruby-1.9.3-p362/gems/dm-core-1.2.0/lib/dm-core/support/ordered_set.rb:319:in `block in each'
/Users/Tom/.rvm/gems/ruby-1.9.3-p362/gems/dm-core-1.2.0/lib/dm-core/support/ordered_set.rb:319:in `each'
/Users/Tom/.rvm/gems/ruby-1.9.3-p362/gems/dm-core-1.2.0/lib/dm-core/support/ordered_set.rb:319:in `each'
/Users/Tom/.rvm/gems/ruby-1.9.3-p362/gems/dm-core-1.2.0/lib/dm-core/support/subject_set.rb:210:in `each'
/Users/Tom/.rvm/gems/ruby-1.9.3-p362/gems/dm-core-1.2.0/lib/dm-core/property_set.rb:88:in `map'
/Users/Tom/.rvm/gems/ruby-1.9.3-p362/gems/dm-core-1.2.0/lib/dm-core/property_set.rb:88:in `get!'
/Users/Tom/.rvm/gems/ruby-1.9.3-p362/gems/dm-core-1.2.0/lib/dm-core/associations/many_to_one.rb:289:in `source_key_different?'
/Users/Tom/.rvm/gems/ruby-1.9.3-p362/gems/dm-core-1.2.0/lib/dm-core/associations/many_to_one.rb:179:in `lazy_load'
/Users/Tom/.rvm/gems/ruby-1.9.3-p362/gems/dm-core-1.2.0/lib/dm-core/resource/persistence_state/persisted.rb:23:in `lazy_load'
/Users/Tom/.rvm/gems/ruby-1.9.3-p362/gems/dm-core-1.2.0/lib/dm-core/resource/persistence_state/persisted.rb:8:in `get'
/Users/Tom/.rvm/gems/ruby-1.9.3-p362/gems/dm-core-1.2.0/lib/dm-core/model/relationship.rb:340:in `user'
/Users/Tom/Projects/api_server/app.rb:197:in `block in <class:MyApp>'
... 
```

我无法弄清楚我做错了什么。我假设 LoginSession 对象找不到相应的用户方法或什么？请帮忙！

# css - 为响应式 Twitter Bootstrap 更改手机/桌面过渡宽度截止

> ID：14250063
> 
> 赞同：0
> 
> 时间：2013-01-10T02:46:02.027
> 
> 标签：css, twitter-bootstrap, less

我想将 Bootstrap 从小型桌面模式（即一行中的网格元素仍水平放置）更改为电话模式（即一行中的网格元素放置在顶部）的“截止”宽度（当前为 767px）彼此并填充屏幕宽度）。具体来说，Bootstrap 使用类似`@media (min-width: 768px) and (max-width: 979px)`. 不过，767 和 768 似乎被硬编码到 LESS 源代码中。是否有支持的方法来做到这一点，或者我只需要手动进行更改并希望它不会破坏任何东西？

编辑：是的，我知道 Twitter 选择这些值是有原因的……让我感到奇怪的是，框架中的其他一切似乎都是模块化和可定制的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-03T07:41:34.973

您寻找的 LESS 值是

```
@grid-float-breakpoint: 123px; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T14:37:52.763

您必须覆盖 Bootstrap 的***响应***部分。我不会加载引导响应并加载我自己的。一切都在`responsive*.less`文件中定义。

# java - javac在指定类型时“使用未经检查或不安全的操作”

> ID：14250064
> 
> 赞同：4
> 
> 时间：2013-01-10T02:46:02.067
> 
> 标签：java, types, interface, casting

以下代码：

```
public void addGrillaListener(Stage stageToClose,Grilla listener)
{
    GrillaHandler<WindowEvent> handy = new GrillaHandler<>(listener);
    if(stageToClose!=null)
    {
        stageToClose.addEventHandler(WindowEvent.WINDOW_HIDDEN,handy);
    }
} 
```

导致编译器显示该消息。我怎样才能避免它？

额外信息：

*   Grilla 是一个舞台界面
*   GrillaHandler 是一个 EventHandler 子类，它采用 Grilla 作为构造函数参数
*   使用 JDK 7，允许使用 GrillaHandler<>
*   编译器消息相当不具体 - 它指出此方法使用未经检查或不安全的操作
*   Stage 是 oracle 提供的一个类，它是 javafx 的一部分

GrillaHandler：

```
public class GrillaHandler<T> implements EventHandler {

    private Grilla win;

    public GrillaHandler(Grilla win) {
        this.win=win;
    }

    @Override
    public void handle(Event t) {
        win.loadTable();
    }
} 
```

格里拉：

```
public interface Grilla { 
    public void loadTable();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T04:11:54.150

将代码更改为

```
public class GrillaHandler<T extends Event> implements EventHandler<T>{ 
//...
} 
```

JavaFX [EventHandler](http://docs.oracle.com/javafx/2/api/javafx/event/EventHandler.html)是一种参数化类型。您在声明中缺少该`GrillaHandler`. 您被迫在类声明中提供类型参数或重新声明类型参数，正如您似乎根据声明所要求的那样。

# php - symfony 表单元素选项

> ID：14250071
> 
> 赞同：2
> 
> 时间：2013-01-10T02:47:25.423
> 
> 标签：php, forms, file-upload, symfony

好吧，这有点令人费解，所以请耐心等待。我会尽量保持简洁明了。

我正在使用 Symfony2 非常好的表单构建器系统来进行简单的 crud，但是基本的文件上传元素并不能完全满足我的需求，所以我想通过添加缩略图预览和其他一些细节来扩展它。

读到这里，我发现我可以创建自己的自定义模板块来渲染文件元素：

[http://symfony.com/doc/master/cookbook/form/form_customization.html#twig](http://symfony.com/doc/master/cookbook/form/form_customization.html#twig)

这真的很酷，而且似乎工作得很好。但是，基于此，我将文件上传的路径存储在实体中的单独属性中：

[http://symfony.com/doc/master/cookbook/doctrine/file_uploads.html](http://symfony.com/doc/master/cookbook/doctrine/file_uploads.html)

所以，我需要一些方法让模板访问路径字段。我创建了一个这样的自定义 FileType 类：

```
<?php

namespace TechPeople\InvoiceBundle\Component\Form\Type;

use Symfony\Component\Form\FormInterface;
use Symfony\Component\Form\FormView;

use Symfony\Component\Form\Extension\Core\Type\FileType as SymfonyFileType;

class FileType extends SymfonyFileType {
    /**
     * {@inheritdoc}
     */
    public function buildView(FormView $view, FormInterface $form, array $options)
    {
        $view->vars = array_replace($view->vars, array(
            'type'  => 'file',
            'value' => '',
            'path' => $options['path'],
        ));
    }
} 
```

然后我将文件路径传递给表单构建器，如下所示：

```
<?php

namespace TechPeople\InvoiceBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class InvoiceType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        echo 'test';
        $builder
            ->add('month')
            ->add('year')
            ->add('expenses')
            ->add('due')
            ->add('paid')
            ->add('created')
            ->add('expense_amount', 'money')
            ->add('total_amount', 'money')
            ->add('attachment', 'file', array('path'=>$options['data']->getAttachmentPath()))
            ->add('vendor')
        ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'TechPeople\InvoiceBundle\Entity\Invoice'
        ));
    }

    public function getName()
    {
        return 'techpeople_invoicebundle_invoicetype';
    }
} 
```

好吧，这看起来很时髦，但是我在加载表单时遇到了这个错误：

```
The option "path" does not exist. Known options are: "attr", "block_name", "by_reference", "cascade_validation", "compound", "constraints", "csrf_field_name", "csrf_protection", "csrf_provider", "data", "data_class", "disabled", "empty_data", "error_bubbling", "error_mapping", "extra_fields_message", "intention", "invalid_message", "invalid_message_parameters", "label", "label_attr", "mapped", "max_length", "pattern", "post_max_size_message", "property_path", "read_only", "required", "translation_domain", "trim", "validation_constraint", "validation_groups", "virtual"
500 Internal Server Error - InvalidOptionsException 
```

所以，看起来某处有一个允许选项的列表，但我找不到它。此外，我不能 100% 确定 InvoiceType 中的 add() 方法是否将选项数组传递给 FileType 中的 buildView() 方法。我在追踪这两件事之间的代码时遇到了麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T09:55:04.820

首先，一旦你创建了你的自定义类，你应该声明它（注册它）用作`file`类型： [http ://symfony.com/doc/current/reference/dic_tags.html#form-type](http://symfony.com/doc/current/reference/dic_tags.html#form-type)

```
<?php

namespace TechPeople\InvoiceBundle\Component\Form\Type;

use Symfony\Component\Form\FormInterface;
use Symfony\Component\Form\FormView;

use Symfony\Component\Form\Extension\Core\Type\FileType as SymfonyFileType;

class FileType extends SymfonyFileType 
{
/**
 * {@inheritdoc}
 */
public function buildView(FormView $view, FormInterface $form, array $options)
{
    $view->vars = array_replace($view->vars, array(
        'type'  => 'file',
        'value' => '',
        'path' => $options['path'],
    ));
}

/**
 * {@inheritdoc}
 */
public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        'path' => null,
    ));
}

/**
 * {@inheritdoc}
 * 
 * POTENTIALLY declare it as child of file type.
 */
public function getParent()
{
    return 'file';
}
} 
```

# html - 使多个 div 在父 div 中彼此相邻排列

> ID：14250075
> 
> 赞同：0
> 
> 时间：2013-01-10T02:48:13.383
> 
> 标签：html, css, twitter-bootstrap

我已经搜索了许多类似的问题，但没有一个解决方案有效。还应该注意的是，**我正在使用 twitter bootstrap**。我想要一堆 div 跨越它底部的父 div 的整个长度。我尝试将它们放在 text-align:center 的 div 中，然后在 gridPics 类中使用 float-left ，并使用 display: inline-block, text-align :left ，但似乎什么也没做。下面示例中的两个在完全相同的位置，我希望它们并排。这是我所拥有的：

HTML：

```
 <div class="row-fluid">
    <div class="span8 offset2 articleContent">
        <!-- These are the divs to span across, when it works there would be more than two -->
        <div class="gridPics"></div>
        <div class="gridPics"></div>
        <!-- They will also go over this image -->
        <img id="sidePic" src="img/about/aboutHeader_Mid1.png" alt="about">
    </div>
    <div class="span2"></div>
</div> 
```

CSS：

```
 .gridPics{
   position: absolute;
   z-index: 1;
   width: 10%;
   height: 20%;
   background: #0000b3;
   bottom: 0;
   float: left;
 }

 .articleContent{
   position: relative;
   box-shadow: 0 0 5px 5px #888;
  }

 #sidePic{
   position: relative;
   z-index: -1;
 } 
```

这是我这样做的地方，蓝色的 div 将是可以单击的图片（类似于缩略图）。我希望他们一路走来：

/ScreenShot2013-01-09at85450PM_zps550e8e4a.png[/IMG]![我正在努力实现这一目标](../Images/244754e3292870a5dcb1156d8b56f63b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T06:50:36.157

这是一个小提琴：http: [//jsfiddle.net/pureux/Er9eG/](http://jsfiddle.net/pureux/Er9eG/)

您需要一个用于 gridPics 的容器，并将其绝对定位（而不是 gridPics）在底部。然后将 gridPics 漂浮在容器内。

```
.picContainer {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  min-height: 50px;
}

.gridPics {
   width: 50px;
   height: 50px;
   float: left;
   display: block;
   margin-right: 4px;
   margin-top: 4px;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T03:21:46.690

这是你想要做的：[**DEMO**](http://jsfiddle.net/Vainglory07/BH4cA/)

**HTML**

```
<div class="row-fluid">
  <div class="span8 offset2 articleContent">
      <div class="gridPics"></div>
      <div class="gridPics"></div>
      <div class="clear"></div>
      <img id="sidePic" src="img/about/aboutHeader_Mid1.png" alt="about">
  </div>
  <div class="span2"></div>
</div> 
```

**CSS**

```
.gridPics{
    width: 10%;
    height: 20px;
    background: #0000b3;
    float: left;
    border:solid #FFF 1px;
 }
 .articleContent{
    box-shadow: 0 0 5px 5px #888;
 }

 #sidePic{
    z-index: -1;
 } 
```

# java - 反序列化在 java 中使用 mfc CArchive 创建的文件

> ID：14250079
> 
> 赞同：0
> 
> 时间：2013-01-10T02:48:43.347
> 
> 标签：java, serialization, mfc, carchive

我有一个基于 mfc 的 Windows 应用程序，它使用 CArchive (MFC) 序列化类保存其文档

我想将这些文件加载​​到我的新 Android 应用程序中，但需要一些 Java 代码来理解序列化数据文件格式。一旦我把它拆开，我就可以处理数据了，但我真的不想自己剖析 CArchive 创建的文件。任何人都可以帮忙，也许是某个地方的图书馆？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T03:03:37.793

请参阅此问题的先前答案（关于 Ruby 而不是 Java）- [Parsing CArchive (MFC classes) files in Ruby](https://stackoverflow.com/questions/2599056/parsing-carchive-mfc-classes-files-in-ruby)

不幸的是，我认为您将自己剖析它。

# c# - 使文本框可见/不可见c#

> ID：14250082
> 
> 赞同：0
> 
> 时间：2013-01-10T02:48:59.267
> 
> 标签：c#, winforms, visible

我正在开发一个 Windows 窗体应用程序，其中有一个按钮和一个`textbox`。

按下按钮时，它应该使`textbox`可见和隐藏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T02:49:58.947

```
myTextbox.Visible = !myTextbox.Visible; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T02:50:38.813

你试过谷歌吗？

```
textBox1.Visible = false; 
```

您可以通过执行以下操作来切换可见性：

```
if(textBox1.Visible == true)
    textBox1.Visible = false;
else
    textBox1.Visible = true; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T02:54:40.310

赢表格：

```
private void button1_Click(object sender, System.EventArgs e)
{
    textBox.Visible = !textBox.Visible;
} 
```

WPF：

```
private void button1_Click(object sender, RoutedEventArgs e)
{
        if (textBox.Visibility != System.Windows.Visibility.Hidden)
            textBox.Visibility = System.Windows.Visibility.Hidden;
        else
            textBox.Visibility = System.Windows.Visibility.Visible;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-15T21:33:05.107

```
textbox.visible=true; 
```

你应该在 buttonClick 事件上试试这个

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-10T02:50:07.873

[你可以在这里](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.hide.aspx)找到一个例子

```
private void button1_Click(object sender, System.EventArgs e)
{
   /* If the CTRL key is pressed when the 
      * control is clicked, hide the control. */ 
   if(Control.ModifierKeys == Keys.Control)
   {
      ((Control)sender).Hide();
   }
} 
```

# django - 别名 Django 模板标签

> ID：14250093
> 
> 赞同：0
> 
> 时间：2013-01-10T02:50:18.823
> 
> 标签：django, django-templates

所以我经常不得不在我的 Django 模板中使用类似下面的东西：

```
{% include "conname.html" %} 
```

我希望能够拥有自己的标签，而只需要输入类似

```
{% conname %} 
```

是否有一种简单的方法来设置某种别名，以便模板引擎看到`conname`它知道实际上应该是特定包含标签的标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T02:53:47.943

很简单，在一个模块中只需添加以下代码（我的通常称为 custom_tags.py：

```
from django import template

register = template.Library()

@register.simple_tag
def conname():
    return '''{% include "conname.html" %}''' 
```

* * *

```
#to make it available everywhere (i generally add this to my urls.py
from django.template.loader import add_to_builtins
#this will be aded to all templates
add_to_builtins('custom_tags') 
```

* * *

在您的模板中，您只需使用`{% conname %}` 或者您可以使其更复杂并以编程方式调用`IncludeNode`，但这有点过头了。

# windows - 在 Windows 中，当启动一个新进程时，会发送什么 Windows 消息？

> ID：14250107
> 
> 赞同：0
> 
> 时间：2013-01-10T02:51:37.993
> 
> 标签：windows, process, message

在 Windows 中，当一个新进程启动时，发送什么 Windows 消息？[http://www.autoitscript.com/autoit3/docs/appendix/WinMsgCodes.htm](http://www.autoitscript.com/autoit3/docs/appendix/WinMsgCodes.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T05:39:18.487

我不确定您是否在询问应用程序在子进程启动时收到的消息。或者，如果在同一台计算机上的另一个进程启动时发送了一条消息。或者，如果您要询问每个进程都会收到的默认消息。

但答案是一样的：没有。

没有发送关于启动新进程的窗口消息。

如果有你会怎么做？

# directory - 如何复制包含符号链接的整个目录？

> ID：14250110
> 
> 赞同：1
> 
> 时间：2013-01-10T02:52:06.293
> 
> 标签：directory, copy, symlink, freebsd, cp

我想将完整的目录内容从复制`/home/private_html/userx/`到 中`/home/private_html/usery/`，问题是该目录`userx`包含很少的符号链接，并且在使用时`cp`它只是跳过它们（跳过发生，如果符号链接指向 a `file`，如果它指向目录，它只需复制整个目录...）。

我使用的命令如下所示：

```
# cp -iprv /home/private_html/userx/ /home/private_html/usery/ 
```

有没有人将目录“原样”复制到其他地方的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T17:34:23.980

Roland 对 -R 标志的看法是正确的。您还可以使用一对 tar 进程，这将使您的命令更加独立于系统：

```
tar -C /home/private_html/userx/ -cpf - . | tar -C /home/private_html/usery/ -epf - 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:37:54.563

在 FreeBSD 上，`cp`没有`-r`选项。它确实有`-R`，它应该做你想要的：

```
 -R    If source_file designates a directory, cp copies the directory and
       the entire subtree connected at that point.  If the source_file
       ends in a /, the contents of the directory are copied rather than
       the directory itself.  This option also causes symbolic links to be
       copied, rather than indirected through, and for cp to create spe‐
       cial files rather than copying them as normal files.  Created
       directories have the same mode as the corresponding source direc‐
       tory, unmodified by the process' umask. 
```

# java - 使用 Java 方法将数据从 Matlab 发布到 Pachube (Cosm)

> ID：14250114
> 
> 赞同：1
> 
> 时间：2013-01-10T02:52:22.100
> 
> 标签：java, matlab, post, cosm

我正在使用[JPachube.jar](http://code.google.com/p/jpachube/downloads/list)和 Matlab 将数据发送到我的数据流。这个java代码在我的机器上工作：

```
package smartclassroom;
import Pachube.Data;
import Pachube.Feed;
//import Pachube.FeedFactory;
import Pachube.Pachube;
import Pachube.PachubeException;

public class SendFeed {     

    public static void main(String arsg[]) throws InterruptedException{
        SendFeed s = new SendFeed(0.0);
        s.setZainteresovanost(0.3);
        double output = s.getZainteresovanost();      
        System.out.println("zainteresovanost " + output);             

        try {
                Pachube p = new Pachube("MYAPIKEY");
                Feed f = p.getFeed(MYFEED);
                f.updateDatastream(0, output);
            } catch (PachubeException e) {
                System.out.println(e.errorMessage);
            }
    }

    private double zainteresovanost;    
    public SendFeed(double vrednost) {
        zainteresovanost = vrednost;
    }
    public void setZainteresovanost(double vrednost) {
        zainteresovanost = vrednost;
    }
    public double getZainteresovanost() {
        return zainteresovanost;
    }

} 
```

但我需要从 Matlab 执行此操作。我已经尝试重写[示例](https://stackoverflow.com/a/11056140/530813)（来自链接的示例正在我的机器上运行）：我已经使用 javac 编译了 java 类并将 JPachube.jar 和 SendFeed.class 添加到路径中，然后在 Matlab 中使用此代码：

```
javaaddpath('C:\work')
javaMethod('main','SendFeed','');    
pachubeValue = SendFeed(0.42); 
```

我收到一个错误：

```
??? Error using ==> javaMethod
No class SendFeed can be located on Java class path

Error in ==> post_to_pachube2 at 6
javaMethod('main','SendFeed',''); 
```

这很奇怪，因为正如我所说，链接中的示例正在运行。

之后，我决定将 JPachube 直接包含在 Matlab 代码中，并在 Matlab 中编写等效代码：

```
 javaaddpath('c:\work\JPachube.jar')

import Pachube.Data.*
import Pachube.Feed.*
import Pachube.Pachube.*
import Pachube.PachubeException.*

pachube = Pachube.Pachube('MYAPIKEY');
feed = pachube.getFeed(MYFEED);
feed.updateDatastream(0, 0.54); 
```

我得到这个错误：

```
??? No method 'updateDatastream' with matching signature found for class 'Pachube.Feed'.

Error in ==> post_to_pachube2 at 12
feed.updateDatastream(0, 0.54); 
```

所以我几乎什么都试过了，一无所获！任何使这项工作的方法对我来说都很好。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:54:17.557

这对我来说已经完成了（从[这里](https://stackoverflow.com/questions/11064979/how-to-send-data-from-matlab-to-rails)回答）

```
javaaddpath('c:\work\httpcore-4.2.2.jar');
javaaddpath('c:\work\httpclient-4.2.3.jar');

import org.apache.http.impl.client.DefaultHttpClient
import org.apache.http.client.methods.HttpPost
import org.apache.http.entity.StringEntity

httpclient = DefaultHttpClient();

httppost = HttpPost('http://api.cosm.com/v2/feeds/FEEDID/datastreams/0.csv?_method=put');
httppost.addHeader('Content-Type','text/plain');
httppost.addHeader('X-ApiKey','APIKEY');

params = StringEntity('0.7');
httppost.setEntity(params);

response = httpclient.execute(httppost); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:02:03.603

我宁愿使用内置方法。Matlab 有[`urlread`](http://www.mathworks.co.uk/help/matlab/ref/urlread.html)/ [`urlwrite`](http://www.mathworks.co.uk/help/matlab/ref/urlwrite.html)，如果你想做的只是从 Cosm API 请求一些 CSV 数据，它可以工作。如果确实需要使用 JSON，可以[通过插件在 Matlab](https://stackoverflow.com/questions/7663061/how-to-use-restful-webservices-in-matlab)中处理。

传递 Cosm API 密钥，可以通过`key`如下参数完成：

```
cosm_feed_url = "https://api.cosm.com/v2/feeds/61916.csv?key=<API_KEY>"
cosm_feed_csv = urlread(cosm_feed_url) 
```

但是，标准库方法`urlread`/`urlwrite`相当[有限](http://undocumentedmatlab.com/blog/expanding-urlreads-capabilities/)。事实上，这个`urlwrite`函数只是为文件输入而设计的，我什至看不到任何官方的例子来说明如何使用格式化的字符串。创建一个临时文件是合理的，除非它只有几行 CSV。您可能需要[`urlread2`](http://www.mathworks.co.uk/matlabcentral/fileexchange/35693-urlread2)用于更严重的事情。

*更新：看来这`urlread2` [可能是有问题](https://stackoverflow.com/a/14471241/717998)的。*

# android - 有没有人在 Linux 上安装过 Android ADT（Android 开发者工具）

> ID：14250116
> 
> 赞同：1
> 
> 时间：2013-01-10T02:52:40.113
> 
> 标签：android, android-debug

我下载了适用于 Windows 和 Linux 的最新捆绑版本的 Android 开发者工具（Eclipse 已经在包中包含了很多 android 部件）。这是一个非常好的改进，包含许多有用的工具和功能。

但是有一个问题，Linux 的下载是一个 zip 文件，当您解压缩时，您似乎必须自己设置可执行文件的权限。这是真的？

过去，下载的 tgz 文件恢复了正确的文件权限。

有谁知道为 Linux安装 ADT [http://developer.android.com/sdk/index.html#download的正确方法？](http://developer.android.com/sdk/index.html#download)

谢谢。

# google-maps - 带有 Coffeescript 的 Google Maps API v3 不同颜色标记

> ID：14250118
> 
> 赞同：1
> 
> 时间：2013-01-10T02:53:03.297
> 
> 标签：google-maps, google-maps-api-3, coffeescript, google-maps-markers

我正在尝试根据来自 google maps api 的类型设置不同的颜色标记，但由于某种原因，它仅显示请求对象内数组中的橙色，但 console.log 显示了所有不同的类型。

我究竟做错了什么？我怎样才能让标记变成不同的颜色，而不是全是橙色。

我在下面的咖啡脚本中写了它：

```
jQuery ($) ->

map = null
infowindow = null
request = null
icons = null
specific_icon = null
marker = null
markers = null
value = null
collection = null

init = () ->
    # Setup map options
    mapOptions =
        center: new google.maps.LatLng(47.54809, -122.1230)
        zoom: 11
        streetViewControl: false
        panControl: false
        mapTypeId: google.maps.MapTypeId.ROADMAP
        zoomControlOptions: 
            style: google.maps.ZoomControlStyle.SMALL
        mapTypeControlOptions:
            mapTypeIds: [google.maps.MapTypeId.ROADMAP, 'map_style']

    # Create the map with above options in div
    map = new google.maps.Map(document.getElementById("map"),mapOptions)

    # Drop marker in the same location
    marker = new google.maps.Marker
        map: map
        animation: google.maps.Animation.DROP
        position: mapOptions.center
        icon: 'http://www.google.com/intl/en_us/mapfiles/ms/micons/red-dot.png'

    # Create a request field to hold POIs
    request = 
        location: new google.maps.LatLng(47.54809, -122.1230)
        radius: 4000
        types: ['store','food','park','school']

    # Create the infowindow(popup over marker)
    infowindow = new google.maps.InfoWindow()

    # Setup places nearby search (it setups points near the center marker)
    service = new google.maps.places.PlacesService(map)
    service.nearbySearch(request, callback)

# Create the callback function to loop thru the places (object)
callback = (results, status) ->
        if status is google.maps.places.PlacesServiceStatus.OK
            for index, attrs of results
                 createMarker results[index]

# Create the actual markers for the looped places
createMarker = (place) ->

    collection = request.types

    icons =
        store: 'http://www.google.com/intl/en_us/mapfiles/ms/micons/blue-dot.png'
        food: 'http://www.google.com/intl/en_us/mapfiles/ms/micons/yellow-dot.png'
        park: 'http://www.google.com/intl/en_us/mapfiles/ms/micons/green-dot.png'
        school:'http://www.google.com/intl/en_us/mapfiles/ms/micons/orange-dot.png'

    for index, value of collection 
        marker = new google.maps.Marker
            map: map
            position: place.geometry.location
            icon: icons[value]
        console.log value

        # Create a click listener that shows a info window with places name
        google.maps.event.addListener marker, 'click', ->
            infowindow.setContent(place.name)
            infowindow.open(map,@)

init() 
```

任何和所有的帮助表示赞赏 - 大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:36:24.733

由于问题已通过评论解决，因此建议如何将图标保存在单个对象中：

创建一个函数（您在其中填充了 URL 的对象）。

当你调用没有参数的函数时，返回一个带有键的数组（你可以将它用作请求的类型选项）。

当使用参数（place.types）调用函数时，在对象内找到所需的图标并返回 url（您可以将其用作标记的图标选项）

**示例功能：（**
*如果编码风格不好，请原谅我，这是我的第一个咖啡脚本）*

```
gettypes = (types=[]) ->
    icons =
        store: 'http://www.google.com/intl/en_us/mapfiles/ms/micons/blue-dot.png'
        food: 'http://www.google.com/intl/en_us/mapfiles/ms/micons/yellow-dot.png'
        park: 'http://www.google.com/intl/en_us/mapfiles/ms/micons/green-dot.png'
        school:'http://www.google.com/intl/en_us/mapfiles/ms/micons/orange-dot.png'

    if !types.length
      for key of icons
        key
    else
      for icon in types
        if icon of icons
          return icons[icon]
        'http://www.google.com/intl/en_us/mapfiles/ms/micons/info_circle.png' 
```

演示：http: [**//jsfiddle.net/doktormolle/3TN7f/**](http://jsfiddle.net/doktormolle/3TN7f/)

# will-paginate - 瘦 Web 服务器找不到 will_paginate 和 packaged_uncompressed.js

> ID：14250119
> 
> 赞同：1
> 
> 时间：2013-01-10T02:53:26.570
> 
> 标签：will-paginate, thin

我最近安装了 Thin 用于在 Heroku 上为我们的 Rails 2.3.5 应用程序提供服务。但是我遇到了这样的错误：

Errno::ENOENT：没有这样的文件或目录 - /app/tmp/members_packaged_uncompressed.js

NoMethodError：未定义的方法“will_paginate”用于#

当我在生产模式下使用 Thin 运行我们的应用程序时，这些错误也会在本地发生。似乎需要为 Thin 配置一些东西才能与我们的代码正常工作？Webrick 不会为我们的应用程序提供这些错误。

有什么建议吗？

# javascript - Greasemonkey 脚本在每个网站上运行

> ID：14250121
> 
> 赞同：5
> 
> 时间：2013-01-10T02:53:41.677
> 
> 标签：javascript, greasemonkey

我设置了一个仅包含在一个网站上的greasemonkey 脚本：

```
http://example.com/* 
```

但它也在我去的每个网站上运行.. 我删除它并再次添加它，只有 1 个包含但它仍然在每个页面上运行，我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T03:03:42.797

这通常是由格式错误的元数据块引起的。

必须没有前导空格，并且指令（通常）区分大小写。

**好的：**

```
// ==UserScript==
// @name     YOUR_SCRIPT_NAME
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// ==/UserScript== 
```

**坏的：**

```
 // ==UserScript==
    // @name     YOUR_SCRIPT_NAME
    // @include  http://YOUR_SERVER.COM/YOUR_PATH/*
    // ==/UserScript== 
```

**坏的：**

```
//==UserScript==
//@name     YOUR_SCRIPT_NAME
//@include  http://YOUR_SERVER.COM/YOUR_PATH/*
//==/UserScript== 
```

**坏的：**

```
// ==UserScript==
// @name     YOUR_SCRIPT_NAME
// @INCLUDE  http://YOUR_SERVER.COM/YOUR_PATH/*
// ==/UserScript== 
```

等等

* * *

* * *

脚本选项也可以覆盖元数据块中的内容。检查它们或只是卸载并重新安装脚本。

# php - 谷歌驱动器 php API 授权失败，授权无效

> ID：14250123
> 
> 赞同：2
> 
> 时间：2013-01-10T02:53:46.570
> 
> 标签：php, oauth-2.0, google-drive-api

我**在 PHP 中使用 google drive API**。首先，我请求一个 Auth url 并将用户发送到该 url。用户授权并被重定向到我的 url，授权代码在查询字符串中，如预期的那样。接下来，我调用`$client->authorize()`并传入查询字符串中的代码。我收到以下错误：

```
Uncaught exception 'Google_AuthException' with message 'Error fetching OAuth2 access token, message: 'invalid_grant'' in
/home/a5874817/public_html/custom/google/src/auth/Google_OAuth2.php:113
Stack trace:
#0 /home/a5874817/public_html/custom/google/src/Google_Client.php(131): Google_OAuth2->authenticate(Array, '4/jN5JfD_ejozBj...')
#1 /home/a5874817/public_html/custom/docs_reply.php(10): Google_Client->authenticate('4/jN5JfD_ejozBj...')
#2 {main}
thrown in /home/a5874817/public_html/custom/google/src/auth/Google_OAuth2.php on line 113 
```

这个账号之前已经授权过这个app，但是auth url一直包含access_type=online，而且是一个多小时前，所以access token应该已经过期了。这个错误的具体原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T23:23:59.427

由于您只有在线访问权限，因此您将无法在新的访问令牌用完时刷新它。

如果您想要永久访问，请要求 access_type=offline，并确保存储刷新令牌以供以后使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T00:30:11.503

好吧，问题已经消失了，但我不记得我所做的许多更改中的哪一个解决了它。我认为问题在于我的身份验证网址中的 access_type 类型错误，或者客户端设置错误。如果其他人有类似的问题，我建议确保范围正确并实际阅读所有 auth url 以确保它有意义。

# jquery - 自动选择一个 通过动态加载的 JQuery Based on cool StackOverflow code, I successfully created a series of dynamically-loaded <select>drop-downs. However, when processing the form (e.g., if there's an error in the submitted information) I need to a ID：14250125 赞同：0 时间：2013-01-10T02:53:51.330 标签：jquery, html, select, dynamic, option 回答 #1 赞同：0 时间：2013-01-10T02:59:25.083 .load 是一个异步函数。jQuery 将在 .load 运行时继续执行这些行，因此第二个$("#category_A1").val("<?php echo $_POST['category_A1']; ?>");将始终被以下结果覆盖$("#category_A1").load("http://domain.com/loader/"+$("#category_A0").val());</select>

# c++ - 使用 OpenCV 从视频中提取图像模式的一些逻辑

> ID：14250129
> 
> 赞同：0
> 
> 时间：2013-01-10T02:54:05.683
> 
> 标签：c++, opencv

![在此处输入图像描述](../Images/8241804a15a8162b83d3cde9477991e2.png)我熟悉openCV，一个强大的开源库，并使用它来处理农场工业项目，老鼠将被注射药物，它被保持在所谓的舞台上，被圆柱体包围，并涂有连续的白色条带和黑色。所以我需要找出鼠标将旋转它的头部多少次来表示圆柱体的旋转。（这是因为它有药物的窍门）。我怎样才能做到这一点任何opencv专家都可以帮助我。

我在下面添加了一张图片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T05:24:31.317

看起来很有趣，这些是我的初步建议......

1.  取决于相机的分辨率以及您的对象（鼠标）与相机的距离...因为鼠标是一个小对象，因此鼠标的图像需要覆盖图像中的大量像素以区分头部运动。 .

2.  我不认为鼠标会粘在一个位置......它会在笼子里继续移动......所以你需要跟踪鼠标......

3.  在鼠标的每个位置，您都需要找到头部相对于身体的位置......您可以使用模板匹配来做到这一点（创建鼠标头部的模板）

    因此，需要更多信息和一些示例图片才能清楚地了解场景

**上传图片后编辑**

4.  由于相机是固定的，因此创建了一个感兴趣的圆形区域......所以只有这个圆圈内的运动与您有关，而不是圆圈外的移动圆柱体 ![像这样](../Images/65d8f130af8141808a866d10451ac0b1.png)

5.  从前一帧中减去当前帧（帧微分）并存储图像中差异的绝对值。

    absdiff(frameNow,framePrevs,diffofFrames);

    根据需要阈值 diffofFrames 以获得大鼠的当前位置...

6.  现在，如果图像清楚地显示了它的鼻子，那么任务就更容易了……因为鼻子有尖的形状，它可以通过一些模板匹配来检测……但是从图像中你很难辨认出鼻子与黑色背景...但是我只能建议您以下过程...![此处显示](../Images/195d4d424019994ab6013da876b731d9.png)绿色圆圈表示鼻尖...我要做的就是使头部朝向身体方向...永远结果你需要有好的图像......

# apache - 在 Mountain Lion libtool 问题上构建 Apache

> ID：14250130
> 
> 赞同：3
> 
> 时间：2013-01-10T02:54:11.230
> 
> 标签：apache, libtool, libtool-xcode

我正在尝试在我的 Mac 上从源代码安装 apache。但不断遇到问题。我尝试了很多不同的东西，但无法构建它。

首先，我无法正确配置，所以我重新安装了 apache apr。现在，我可以进行配置，但是当我运行 make 时，我得到了这个错误：

```
libtool: compile: unable to infer tagged configuration
libtool: compile: specify a tag with `--tag' 
```

我尝试将此添加到 libtool 标记中：

```
./configure LIBTOOL='/usr/local/bin/glibtool --tag=CC' 
```

这仍然给出了同样的错误。我读到山狮 glibtool 是类 unix 的 libtool，所以这就是我在这里尝试的原因。仍然无济于事。我还尝试将使用的 libtool 符号链接到我机器上的其他版本，但仍然无济于事，因为我遇到了同样的错误。

这是make命令运行的内容，我试过了`symlinking /usr/share/apr-1/build-1/libtool`

```
/usr/share/apr-1/build-1/libtool --silent --mode=compile /usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/gcc-4.2 -std=gnu99   -O2 -arch x86_64   -DDARWIN -DSIGPROCMASK_SETS_THREAD_MASK  -I/opt/local/include -I/opt/X11/include  -I. -I/usr/local/src/httpd-2.4.3/os/unix -I/usr/local/src/httpd-2.4.3/include -I/usr/include/apr-1 -I/usr/local/include -I/usr/local/src/httpd-2.4.3/modules/aaa -I/usr/local/src/httpd-2.4.3/modules/cache -I/usr/local/src/httpd-2.4.3/modules/core -I/usr/local/src/httpd-2.4.3/modules/database -I/usr/local/src/httpd-2.4.3/modules/filters -I/usr/local/src/httpd-2.4.3/modules/ldap -I/usr/local/src/httpd-2.4.3/modules/loggers -I/usr/local/src/httpd-2.4.3/modules/lua -I/usr/local/src/httpd-2.4.3/modules/proxy -I/usr/local/src/httpd-2.4.3/modules/session -I/usr/local/src/httpd-2.4.3/modules/ssl -I/usr/local/src/httpd-2.4.3/modules/test -I/usr/local/src/httpd-2.4.3/server -I/usr/local/src/httpd-2.4.3/modules/arch/unix -I/usr/local/src/httpd-2.4.3/modules/dav/main -I/usr/local/src/httpd-2.4.3/modules/generators -I/usr/local/src/httpd-2.4.3/modules/mappers  -prefer-non-pic -static -c exports.c && touch exports.lo 
```

这仍然没有奏效。

最后，如果我像这样运行配置，我会走得更远，`./configure --with-apr='/usr/local/src/apr/apr-config`（我安装系统的地方，但这仍然是坏的。）这让我更进一步，但它仍然无法完成 make，并给了我很多这样的错误。

```
exports.c:1809: error: redefinition of 'ap_hack_apr_version_string'
exports.c:1141: error: previous definition of 'ap_hack_apr_version_string' was here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:22:11.163

我终于想通了 ...

对于在 Mountain Lion 上安装 apache 时遇到问题的任何人，看起来源的 build/config_vars.mk 文件中的默认 LIBTOOLS 位置错误。

我用自制软件重新安装了 LIBTOOLS（将它放在 /usr/local/bin/glibtool 中）并将其设置为变量并且一切正常。

# css - 如何在动态驱动 css 流体/固定布局上强制 100% 高度

> ID：14250138
> 
> 赞同：2
> 
> 时间：2013-01-10T02:55:06.247
> 
> 标签：css

[这里的例子小提琴](http://jsfiddle.net/AMSgY/)

我正在使用流体/固定布局。我需要我的固定侧占据页眉和页脚内容之间 100% 的空间。

我的右栏：

```
#rightcolumn{
float: left;
width: 200px; /*Width of right column in pixels*/
margin-left: -200px; /*Set left margin to -(RightColumnWidth) */
background: #FDE95E;
height:100%;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T03:24:10.940

所以你可以用css“display：table”和“table-cell”来做到这一点。[这是我开始工作](http://jsfiddle.net/DrCord/AMSgY/2/)的小提琴的副本，但我所做的是将你的 #rightcolumn 嵌套到 #contentwrapper div 中，然后像这样修改 css：

```
#contentwrapper{ display: table; }
#rightcolumn{ display: table-cell; }
#contentcolumn{ display: table-cell; } 
```

还有“#rightcolumn” - 删除“float：left;” 财产

# sql-server - SQL Server 不接受别名

> ID：14250140
> 
> 赞同：0
> 
> 时间：2013-01-10T02:56:21.647
> 
> 标签：sql-server, sql-server-2008, alias

今天第一次构造 SQL Server 查询，惊讶地发现这个别名不起作用：

```
SELECT
    INVOICE_INVOICE_NUMBER AS invno,
    INVOICE_INVOICE_SEQ AS lineno
FROM
    INVOICED 
```

但这确实：

```
SELECT
    INVOICE_INVOICE_NUMBER AS invoice,
    INVOICE_INVOICE_SEQ AS line
FROM
    INVOICED 
```

更改别名没什么大不了的 - 但最好知道为什么这个特定别名不起作用，以及如何防止或了解任何未来要避免的关键字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T02:58:06.670

`LineNo`是保留字。您可以将其括在括号中以使用它。

```
SELECT INVOICE_INVOICE_SEQ AS [lineno] 
```

[保留字](http://msdn.microsoft.com/en-us/library/ms189822.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T03:26:51.313

答案就在你的问题本身。关键字会改变颜色，您应该可以轻松识别出来，除非您在记事本中键入 SQL 查询。理想情况下，对别名使用关键字不是一个好习惯，但如果必须，请将它们括在方括号 - [ ] 中。

通常，保留字变为蓝色，函数变为粉红色，系统对象变为绿色。当然，您确实可以更改 SSMS 中的字体（选项 > 环境 > 字体和颜色）

拉吉

# google-chrome - Chrome 正在对应用了嵌套 CSS 比例的图像进行像素化/修改

> ID：14250141
> 
> 赞同：4
> 
> 时间：2013-01-10T02:56:35.877
> 
> 标签：google-chrome, css, webkit, css-transforms

小提琴在这里：http: [//jsfiddle.net/ZArwT/18/](http://jsfiddle.net/ZArwT/18/)

我正在做一个项目，我需要有几个嵌套的 div 相对于彼此缩放。

父 div 放大 10 倍并旋转，然后该父 div 的子 div 反向旋转以标准化旋转，然后 THAT 的子 div 缩放到 .1x 以标准化其比例。

所有图像均为高分辨率 png。

在 Chrome 中，子图像出现严重像素化和损坏，就好像该软件试图放大一个非常小的图像一样。

在所有其他浏览器（甚至，gasp，IE）中，图像看起来都非常清晰和锐利（因为它“应该”，因为它的显示尺寸低于其实际分辨率）。

如果您在 Firefox、IE 或 Safari 中检查上述小提琴，您会发现穿着明亮连帽衫的家伙看起来清晰而清晰。

如果你看一下 Chrome 中的小提琴，你会看到那个穿着连帽衫的家伙看起来被破坏和像素化了。

不幸的是，我无法在一开始就以最佳最大尺寸创建图像，因为它旨在从相对较小的尺寸放大到覆盖整个屏幕。

我已经查看并尝试了多种解决方案，包括“图像渲染：-webkit-optimize-contrast;”，以及在各种化身中使用“webkit-transform-style：preserve-3d”。

非常感激任何的帮助。

谢谢！

HTML：

```
<div class="frame"></div>

<div class="frameInner">
  <div class="counterRotate"> <!--normalizes coordinates for content so that x and y are really x and y instead of diagonals -->
    <div class="content">
      <img class="guy" src="http://abraxasleads.com/misc/chromeImageSmash/guy.png" />
    </div>
  </div>
</div> 
```

CSS：

```
.wrapper {
  display: block;
  width: 718px;
  height: 800px;  
}

.frame {
  display: block;
  width: 718px;
  height: 800px;
  background: url('http://abraxasleads.com/misc/chromeImageSmash/frame.png') 0 0 no-repeat;
  position: absolute;
  top: 0;
  left: 0;
  z-index: 10;
}

.frameInner {
  display: block;
  width: 470px;
  height: 573px;
  overflow: hidden;
  position: absolute;
  top: 114px;
  left: 123px;
  z-index: 1;
}

.counterRotate {
  display: block;
  width: 100%;
  height: 100%;
}

.content {
  display: block;
  width: 1920px;
  height: 1080px;
  background: url('http://abraxasleads.com/misc/chromeImageSmash/content.png');
  position: absolute;
  top: -483px;
  left: -898.5px;
}

.guy {
  display: block;
  position: absolute;
  top: 25%;
  left: 50%;
} 
```

JS：

```
var frame = $('.frame'),
    frameInner = $('.frameInner'),
    counterRotate = $('.counterRotate'),
    content = $('.content'),
    guy = $('.guy'),
    frameRotation = -45,
    counterRotation = 45;

frame.css({
  "webkitTransform" : 'translate3d(0px, 0px, 0px) rotateZ('+ frameRotation +'deg) scale(10, 10)',
  "msTransform" : 'translate(0px, 0px) scale(10, 10) rotate('+ frameRotation +'deg)',
   "-moz-Transform" : 'translate3d(0px, 0px, 0px) rotateZ('+ frameRotation +'deg) scale(10, 10)'
})

frameInner.css({
  "webkitTransform" : 'translate3d(0px, 0px, 0px) rotateZ('+ frameRotation +'deg) scale(10, 10)',
  "msTransform" : 'translate(0px, 0px) scale(10, 10) rotate('+ frameRotation +'deg) ',
  "-moz-transform" : 'translate3d(0px, 0px, 0px) rotateZ('+ frameRotation +'deg) scale(10, 10)'
})

counterRotate.css({
  "webkitTransform" : 'translate3d(0px, 60px, 0px) rotateZ('+ counterRotation +'deg)',
  "msTransform" : 'translate(0px, 60px) rotate('+ counterRotation +'deg)',
  "-moz-transform" : 'translate3d(0px, 60px, 0px) rotateZ('+ counterRotation +'deg)'
})

guy.css({
   "webkitTransform" : 'translate3d(-120px, -200px, 0px) scale(.1,.1)',
   "msTransform" : 'translate(-120px, -200px) scale(.1,.1)',
   "-moz-transform" : 'translate3d(-120px, -200px, 0px) scale(.1,.1)'
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T04:41:28.723

在缩放图像时，Webkit 会光栅化图像，从而导致像素化。为了防止这种情况，从低于 1 的初始比例（比如 0.1）开始，然后让最终放大版本的比例为 1。这样，渲染引擎会以全尺寸渲染图像并缩小它，当缩放时，它不会产生您提到的像素化。

# php - Android 应用程序使用 php 将字符串传输到服务器

> ID：14250144
> 
> 赞同：0
> 
> 时间：2013-01-10T02:56:45.603
> 
> 标签：php, android

在我的项目中，我需要将图像和字符串传输到服务器（服务器端使用 php）。我完成了将图像上传到服务器。所以唯一的问题是如何将字符串发送到服务器。谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T03:11:19.570

这是一些应该为您指明正确方向的代码。

首先，在您的应用程序端使用类似的东西：

**爪哇：**

```
// generate your params:
String yourString = "This is the string you want to send";
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("your_string", yourString));

// send them on their way
try {
    DefaultHttpClient httpClient = new DefaultHttpClient();
    HttpPost httpPost = new HttpPost("http://xyz/your_php_script.php");
    httpPost.setEntity(new UrlEncodedFormEntity(nameValueParams));  
    HttpResponse httpResponse = httpClient.execute(httpPost);
    HttpEntity httpEntity = httpResponse.getEntity();   
} catch (UnsupportedEncodingException e) {
    e.printStackTrace();
} catch (ClientProtocolException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

[并在您的服务器端（ http://xyz/your_php_script.php](http://xyz/your_php_script.php)）使用类似的东西来获取它：

**PHP：**

```
<?php
    if (isset($_POST['your_string']) && $_POST['your_string'] != '') {
        $your_string = $_POST['your_string'];
        echo 'received the string: ' . $your_string;
    } else {
        echo 'empty';
    }
?> 
```

编辑，根据您的评论：

它更复杂，因为您必须使用`OutputStream`and `BufferedWriter`，所以我不知道为什么我的解决方案对您不起作用。使用谷歌，我找到了以下可能对您有所帮助的答案：

*   [https://stackoverflow.com/a/13486223/586859](https://stackoverflow.com/a/13486223/586859)
*   [Android HTTPUrlConnection POST](https://stackoverflow.com/q/10759782/586859)
*   [http://digitallibraryworld.com/?p=189](http://digitallibraryworld.com/?p=189)

# ios - 向 UITextView 添加大纲/描边

> ID：14250148
> 
> 赞同：6
> 
> 时间：2013-01-10T02:57:30.883
> 
> 标签：ios, objective-c, core-graphics, uitextview, core-text

我想`UITextView`在用户键入时为可编辑文本添加轮廓或笔划。完全像模因： http: [//t.qkme.me/3oi5rs.jpg](http://t.qkme.me/3oi5rs.jpg)

![在此处输入图像描述](../Images/e21f95a905922eab29f16dcfd4e5151b.png)

我必须使用 a`UITextView`因为我需要多线支持。我已经尝试了所有方法并得出了我必须使用的结论`CoreText`。我得到了几乎所有解决方案的工作，但卡在了 textview 中的文本换行的地方。我的例程`drawRect`正确地绘制了大纲文本，直到文本换行。即使用户输入的文本被换行，我绘制的大纲文本也不会。这是我对该方法的实现：[https](https://gist.github.com/4498988) ://gist.github.com/4498988 。在第 29 行，我正在使用 char 包装：`subview``UITextView``drawRect`

```
CTLineBreakMode linebreakmode = kCTLineBreakByCharWrapping; 
```

我已经尝试过 wordwrapping 选项（这也是默认选项）没有用。

我的问题是：如何让我绘制的文本正确换行，使其显示为键入文本的轮廓？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-06T05:57:05.593

```
// make your UITextView as a subclass of UITextView
// and override -drawRect: method in your UITextView subclass 
- (void)drawRect:(CGRect)rect
{
    self.textColor = [UIColor clearColor];

    [self setTypingAttributes:[NSDictionary dictionaryWithObjectsAndKeys:self.font, NSFontAttributeName, _textBaseColor, NSForegroundColorAttributeName, nil ]]; // _textBaseColor is any color of your choice
    CGRect newRect = CGRectMake(0, 0, CGRectGetWidth(self.frame), CGRectGetHeight(self.frame));
    CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextSetTextDrawingMode(context, kCGTextStroke);
    // Make the thickness of the outline shadow. and increase the y position of shadow rect by 2.
    CGContextSetLineWidth(context, (TEXTOUTLINE_PERCENT/100 * self.font.pointSize)+1); // TEXTOUTLINE_PERCENT can be 25.
    CGContextSetLineJoin(context, kCGLineJoinRound);
    CGContextSetLineCap(context, kCGLineCapButt);
    CGContextSetStrokeColorWithColor(context, [UIColor clearColor].CGColor);
    CGRect shadowrect = newRect;
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
    {
        shadowrect.origin.y += 0.5;
    }
    else
    {
        shadowrect.origin.y += 2;
    }

    [self.text drawInRect:shadowrect withAttributes:[NSDictionary dictionaryWithObjectsAndKeys:self.font, NSFontAttributeName, SHADOW_COLOR , NSForegroundColorAttributeName, nil]]; // SHADOW_COLOR can be [UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:0.3]

    // Make the thickness of the outline border of the text.
    CGContextSetLineWidth(context, TEXTOUTLINE_PERCENT/100 * self.font.pointSize); // TEXTOUTLINE_PERCENT can be 25.
    CGContextSetStrokeColorWithColor(context, [[UIColor clearColor] CGColor]);
    [self.text drawInRect:newRect withAttributes:[NSDictionary dictionaryWithObjectsAndKeys:self.font, NSFontAttributeName, self.textOutlineColor , NSForegroundColorAttributeName,  nil]];

    // Draw filled text. This is the actual text.
    CGContextSetTextDrawingMode(context, kCGTextFill);
    CGContextSetFillColorWithColor(context, [[UIColor clearColor] CGColor]);
    [self.text drawInRect:newRect withAttributes:[NSDictionary dictionaryWithObjectsAndKeys:self.font, NSFontAttributeName, _textBaseColor, NSForegroundColorAttributeName,_textBaseColor, NSStrokeColorAttributeName, nil]];
    [super drawRect:rect];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:12:54.037

在可编辑的文本字段 (TextArea) 中制作一个带有红色发光文本的 HTML 文件。

将所有元素的背景设置为透明。

将其制成一个字符串并将其加载到 UIWebView 中，该 UIWebView 位于您要放置文本的图像之上。

将 HTML 字符串加载到 UIWebView 中，并使 UIWebView 本身透明。

*此外，您可能需要将 UIWebView 设为属性并对其进行综合。

这是代码（没有综合和属性）

。H：

```
@interface ViewController : UIViewController <uiwebviewdelegate></uiwebviewdelegate> {
    IBOutlet UIWebView *webView;
    //... other objects you already have can go here too..
} 
```

米：

```
self.webView.delegate = self;
NSString *htmlstring = [[NSString alloc] initWithFormat:@"<html><body style='background-color: transparent;'><textarea name='myTextArea'cols='20' rows='10' style='text-shadow: 0 0 0.2em #F87, 0 0 0.2em #F87; background-color:transparent; border:none'>You Can Edit This Text.</textarea></body></html>"];
[self.webView loadHTMLString:htmlstring baseURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]]];
self.webView.opaque = NO;
self.webView.backgroundColor = [UIColor clearColor]; 
```

编辑：这是“webView”的属性和合成代码

```
@property(nonatomic,retain)IBOutlet UIWebView *nubrowser; //put in .h file at end of "@Interface" function after the closing curly bracket ("}")

@synthesize webView; //put in .m file directly after "@implementation" function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T04:12:02.660

只需用 CSS 制作一个字符串

```
NSString *htmlstring = [[NSString alloc] initWithFormat:@"<html><font style=\"text-shadow: 0 0 0.2em #F87, 0 0 0.2em #F87\">%@</font></html>", YourTextView.text, nil]; 
```

^这将使 TextView 中的任何文本在网页上发光。（如果你愿意，你也可以给它一个黑色背景......使用这个：

```
NSString *htmlstring = [[NSString alloc] initWithFormat:@"<html><body bgcolor=\"#000000\"><font style=\"text-shadow: 0 0 0.2em #F87, 0 0 0.2em #F87\">%@</font></body></html>", YourTextView.text, nil]; 
```

现在将其保存为 html 文件并将其加载到 UIWebView 中。或者通过 javascript 将其注入 URL 并将该 URL 加载到 UIWebView 中。

设置 UIWebView 框架和位置以匹配您的 UITextView 的框架和位置，这样它就会在它上面，并显示带有黑色背景的红色发光文本。

# php - 如何将时间（秒）与名称相关联

> ID：14250150
> 
> 赞同：2
> 
> 时间：2013-01-10T02:57:41.013
> 
> 标签：php, getdate

我正在尝试从服务器获取时间（秒），然后将其与学生姓名相关联：

```
 $info = getdate();
    $sec = $info['seconds'];
    $current_sec = $sec;
    echo $current_sec;
    echo " | ";
    if ($current_sec == '1') {echo 'John';}
    else if ($current_sec == '2') {echo 'Mary';}
    else if ($current_sec == '3') {echo 'Bill';}
    ~~~
    else if ($current_sec == '60') {echo 'Bob';}
    echo " | ";
    echo $current_sec; 
```

但是，无论何时刷新页面，我似乎每次都得到相同的结果：

**15 | 约翰 | 1**

其中 15 是实际秒数。

如果有任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T02:59:49.883

你是 if 语句有一个错字：

```
 if ($current_sec = '1') 
```

永远是真的。尝试：

```
 if ($current_sec == '1') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T02:59:55.783

因为比较运算符 is `==`, not`=`

# javascript - CasperJs单击嵌套循环中的链接

> ID：14250151
> 
> 赞同：1
> 
> 时间：2013-01-10T02:57:42.710
> 
> 标签：javascript, loops, phantomjs, casperjs

我正在尝试使用 PhantomJS/CasperJS 来抓取网页。最近几天我一直在阅读文档，并在网上搜索，但我被困住了。

我正在抓取的页面显示了三个级别的链接——年、月和日。当您选择年、月和日时，#count div 中会显示一个计数。此外，月份实际上是更改 #imageLoad div 中的图像的输入（我不需要）。

```
<div id="years">
    <span class="year">2010</span>
    <span class="year">2011</span>
    <span class="year">2012</span>
    etc...
</div>  
<div id="months">
    <input type="image" class="month" src="jan_image.png" onclick="changepic('jan')" />
    <input type="image" class="month" src="feb_image.png" onclick="changepic('feb')" />
    <input type="image" class="month" src="mar_image.png" onclick="changepic('mar')" />
    etc...
</div>
<div id="days">
    <span class="day">1</span>
    <span class="day">2</span>
    <span class="day">3</span>
    etc...
</div>

<div id="imageLoad">
</div>
<div id="count">
</div> 
```

我正在尝试遍历链接并记录每个年、月和日组合出现的计数。如您所见，月份是改变情况的输入。

我尝试了很多东西。我想做的主要事情是一个嵌套循环，它循环通过每组链接，在我去的时候点击它们。这是代码（我正在使用 jQuery）：

```
casper.start(link);

casper.then(function() {

    pageInfo =  this.evaluate(function(){
        values = [];
        for(var y = 0; y < $('#years').length; y++){
            year= $('#years span').get(y);
            $(year).click();

            for(var m = 0; m < $('#months').length; m++){
                month= $('#months input').get(m);
                $(month).click();

                for(var d = 0; d < $('#days').length; d++){
                    day= $('#days span').get(d);
                    $(day).click();

                    values.push($('#count').text());
                }
            }
        }
        return values;

    });
}); 
```

我认为这将按顺序遍历每组链接，并且我会从年、月和日的每个变化中获取所有值。

但是，当我单击脚本中的月份输入时，脚本会中断并转到下一个 casper.then 语句。我有更好的方法吗？

我有一种感觉，我正在以错误的方式解决这个问题，但我尝试过的其他任何事情也没有任何成果。似乎一旦中断到下一个“然后”，就再也没有回到我的循环了。

我试过用 循环`Casper.each`，但我不知道手头会有多少元素。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-09T22:20:15.043

只是为了记录，这个例子展示了使用 casperjs 在嵌套循环中执行操作的正确方法：

[https://github.com/n1k0/casperjs/blob/master/samples/dynamic.js](https://github.com/n1k0/casperjs/blob/master/samples/dynamic.js)

It won't take you too much to adapt it to what you need.

# c# - c# Do-While 回调

> ID：14250152
> 
> 赞同：0
> 
> 时间：2013-01-10T02:57:42.137
> 
> 标签：c#, if-statement, return, switch-statement, do-while

我被困在我的代码中！

我有一个 Do -While 循环，里面有 Switch-Case，每个案例都有这样的 If Else 条件：

这是问题一旦我按下重试按钮（在 If-Else 条件下），我想回到 Do 循环的中间并再次重新运行它以进行检查......我不太确定我应该怎么做。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T03:00:11.293

如果开关盒位于循环体的底部，您可以`continue`从一开始就调用并重复循环。

如果您需要从循环的中间开始，而不是从开始，我能想到的唯一方法是将中间包裹在另一个循环体中。现在`continue`将应用于内部循环，你会得到你想要的。

如果没有其他选择，您可以使用[goto](http://msdn.microsoft.com/en-us/library/13940fs2%28v=vs.71%29.aspx)，但[要注意后果](http://www.u.arizona.edu/~rubinson/copyright_violations/Go_To_Considered_Harmful.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T03:01:00.313

我真的不知道你为什么要在一个巨大的循环和 switch 语句中构造你的代码。对我来说，我可能会打破它。这将使其更易于遵循。但也许你有一个理由。

如果可以，请创建一个内部循环并继续执行该循环，直到返回一个非重试值。

如果这真的不起作用，那么我不在上面使用`goto`. 我知道这对很多人来说是禁忌，但我的目标是编写清晰的代码。如果你知道你在做什么并且`goto`产生了最清晰的代码，那么我说去吧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T03:07:06.273

您可能希望将代码拆分为功能，以提高可读性和维护性。我建议你试试这个：

```
do
{
  if(eErrorCode!=0)
  {
     if( GetResult(eErrorCode) == "Break")
      break;
  }
}

private string GetResult(eErrorCode)
{
  switch(eErrorCode)
  ...
} 
```

# delphi - 如何确定主线程没有响应 Omni 线程库的原因？

> ID：14250159
> 
> 赞同：2
> 
> 时间：2013-01-10T02:59:10.740
> 
> 标签：delphi, freeze, omnithreadlibrary, otl

平台：Delphi with VirtualTreeView SVN 5.1.0 & OmniThreadLibrary 3 SVN & Delphi XE2

本来以为是VirtualTreeView的问题。我需要每隔 1 秒或更短的时间将节点添加到 VST。但似乎迟早 CPU 速率会达到 50% 或更多，直到整个应用程序变得完全无响应。

```
 var FAbort:Boolean;
  .....

  procedure TrmMain.btnAddNodeClick(Sender: TObject);
    begin
      while not FAbort do
      begin
        VstMain.RootNodeCount:= VstMain.RootNodeCount + 1;
        Sleep(10);
        Application.ProcessMessages;
      end;
    end; 
```

任何人都可以帮忙吗？蒂亚！

**编辑：**似乎问题来自**OTL**。使用上面的代码时，将应用程序的 CPU 最小化始终小于 1%，甚至将 10ms sleep 更改为 1ms。

但是，下面的代码将重现困扰我的问题。

```
procedure TForm1.btn5Click(Sender: TObject);
var
  I: Integer;
begin
  for I := 0 to 1 do
    CreateTask(
      procedure(const Task: IOmniTask)
      begin
        while not FAbort do
        begin
          Task.Comm.Send(1, 0);
          Sleep(10);
        end;
      end).OnMessage(
      procedure(const Task: IOmniTaskControl; const Msg: TOmniMessage)
      begin
        vst1.AddChild(nil);
      end).Run;
end; 
```

PS：为了避免 OTL 默认的 1000 队列大小泛滥，我在每个线程中都有一个锁，等待添加节点在下一个 Task.Comm.Send 操作之前完成。

PPS：这里的 10ms 只是为了快速重现问题，而不是在实际情况下。所以不要费心问为什么？

好的，结论是：如果您需要定期更新该节点，则不要在单个节点上添加太多节点，节点越多更新它们的cpu时间越多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:51:35.097

在我看来，当底层模型发生变化时，你不应该同步更新视图，尤其是每次都不要。

VirtualTreeView 是一个可视化控件。人类不需要实时看到树更新，每秒浪费超过 3 倍。所以不要这样做。

相反，更新您的模型（对象、类），设置通知标志，然后（从 TTimer）执行 VirtualStringTree.RootNodeCount 的异步 SINGLE 更新，最多每秒发生 3 次。（每 333 毫秒设置多个此更新标志会导致最短等待时间为 333 毫秒，直到它实际更新。）这是我的任意用户界面“比这更快，它只是闪烁和流失，没有任何用处”常量.

Delphi 自己的开发人员使用 VirtualTreeView 遇到了这个问题，我知道是因为我记录了所涉及的 QC 错误。如果您在 Delphi 2009 中执行了足够多的“OutputDebugString”消息，IDE 将变得无响应。为什么？因为他们做了你正在做的事。不要这样做。我并不是说用户点击应该导致屏幕刷新前等待 333 毫秒。我的意思是，某些连续生成树内容的进程应该只通知树的“视图控制器”每秒最多 3 次更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T06:53:37.260

如果您使用 AddChild() 函数添加节点，则可能会比访问 RootNodeCount 属性更好。

例如：

```
procedure TMyForm.OnTimer( Sender: TObject );
var
  Node: PVirtualNode;
begin
  Node := MyTree.AddChild( nil );
  // fill in details with GetNodeData( Node );

end; 
```

更好的是：使用计时器并尝试在每个时间间隔添加一些项目：

```
procedure TMyForm.OnTimer( Sender: TObject );
begin
  AddToList( ... );
end;

procedure TMyForm.OnTimer( Sender: TObject );
var
  Node: PVirtualNode;
  Item: <Some iterator>;
begin
  MyTree.BeginUpdate();
  try
    for Item in <somelist> do begin
      Node := MyTree.AddChild( nil );
      // fill in details with GetNodeData( Node );
    end;
  finally
    MyTree.EndUpdate();
  end; 
end; 
```

# wpf - ManipulationStarted 未能激活回调方法

> ID：14250165
> 
> 赞同：1
> 
> 时间：2013-01-10T03:00:20.387
> 
> 标签：wpf, mouseevent, .net-4.5

我有一个带有 .NET-4.5 的 WPF 画布。

我添加了事件（为其自动创建方法）`MouseLeftButtonDown`和`MouseDown`. 使用`MessageBox`，我已经确认当用户单击画布时会调用这些方法，但我找不到从`MouseButtonEventArgs`.

当我添加事件（和自动创建的方法）`ManipulationStarted`并且`ManipulationStarting`那些`MessageBox`es 没有出现时。

```
private void CenterCanvas_ManipulationStarted(object sender, ManipulationStartedEventArgs e)
{
        MessageBox.Show("Doesn't show up");   // never shows up
}

private void CenterCanvas_MouseDown(object sender, MouseButtonEventArgs e)
{
        MessageBox.Show("Shows up");   // shows up, but can't seem to get click position
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:11:44.193

为了从 a 中获取鼠标位置，`MouseEventArgs`您必须调用[GetPosition](http://msdn.microsoft.com/en-us/library/system.windows.input.mouseeventargs.getposition.aspx)方法。

```
private void Canvas_MouseDown(object sender, MouseButtonEventArgs e)
{
    var pos = e.GetPosition((IInputElement)sender);

    System.Diagnostics.Trace.TraceInformation("MouseDown at {0}", pos);
} 
```

要获取操作事件，您需要将[IsManipulationEnabled](http://msdn.microsoft.com/en-us/library/system.windows.uielement.ismanipulationenabled.aspx)设置为`true`。您可能想查看MSDN [Input Overview中的](http://msdn.microsoft.com/en-us/library/ms754010.aspx)[Touch and Manipulation](http://msdn.microsoft.com/en-us/library/ms754010.aspx#touch_and_manipulation)部分。

# c# - 通过 UDPClient 广播相同节目的 2 个实例

> ID：14250168
> 
> 赞同：1
> 
> 时间：2013-01-10T03:00:48.690
> 
> 标签：c#, .net-3.5, udpclient

我正在使用 UdpClient 广播我的程序位置，以便中央计算机可以找到它并开始使用它。

效果很好，直到同一台计算机上的 2 个用户同时尝试广播。由于这是一个有效的用例（想想 Windows 终端服务器），我试图找出解决它的最佳方法：

这是我目前正在尝试的代码：

```
 m_UDPClients = new List<UdpClient>();
  IPAddress[] localIPs = Dns.GetHostAddresses(Dns.GetHostName());
  foreach (IPAddress ip in localIPs)
  {
    string ipStr = ip.ToString();
    if (!ipStr.Contains("."))  // I only want readable addresses
      continue;

    IPEndPoint ipLocalEndPoint = new IPEndPoint(ip, port);
    try
    {
      UdpClient udpClient = new UdpClient();
      udpClient.Client.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReuseAddress, true);
      udpClient.Client.Bind(ipLocalEndPoint);
      m_UDPClients.Add(udpClient);
    }
    catch (Exception e)
    {
      BSSLog.Error(e);
    }
  } 
```

如果程序的另一个实例已经在运行，则绑定将抛出此异常：

```
 An attempt was made to access a socket in a way forbidden by its access permissions 
```

这个广播只是节目“广告”一些关于如何连接到它的服务的细节；广播每隔几秒发生一次，它的有效载荷可能小于 1k。

我确实尝试根据需要创建和销毁 UDPclients 并接受冲突，但这很丑陋。

所以......问题是：我如何处理同一程序的 30 个实例，它们都试图通过同一台计算机上的同一个 UDP 端口（不监听，只发布有效负载并继续）来宣传自己？

我知道我可以构建一个 Windows 服务并扮演交通警察等......但我试图保持这种简单和“有限用户权限”的友好性。

在我跑掉并尝试使用预定义的系统范围命名管道或其他东西之前，我以为我是在寻求帮助。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T20:22:34.230

代码没有任何问题。在我们的测试环境中，我们有一个没有正确打开端口的监控程序。

还好我们浪费了 2 天时间去追逐一条红鲱鱼。

谢谢大家。

# flash - 使用 flash spark videoplayer 组件进行伪流

> ID：14250171
> 
> 赞同：0
> 
> 时间：2013-01-10T03:01:02.297
> 
> 标签：flash, apache-flex, video-player

我正在开发一个需要伪流和实时流的应用程序。所以我们用flash和jwplayer做了很多测试。我真的很喜欢 jwplayer，因为它适用于伪流和实时流 (rmtp)，而且很酷的是它有 html5。但问题是，在我们的应用程序中，我们可能同时有许多流，我们需要一个接口来处理它们。我们仍在试图弄清楚如何使用 jwplayer。但与此同时，我尝试直接使用 flash/flex 和 AS3 直接执行此操作，我看到有一个 VideoPlayer 组件，我想知道它是否支持伪流。
我如何将它指向我的文件。我可以使用控件快进吗？我的网络服务器配置正确，伪流与 jwplayer 一起工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T05:36:23.863

是的，VideoPlayer 支持视频流和渐进式下载（“伪流”）。只需将源属性设置为视频文件的位置。例子：

```
<s:VideoPlayer 
  source="http://yourserver.com/video.f4v"
  width="75%" height="75%"
  autoPlay="false"
  loop="true"/> 
```

# facebook - Facebook Feed Dialog - 我们可以使用应用程序徽标作为图像吗？

> ID：14250173
> 
> 赞同：1
> 
> 时间：2013-01-10T03:01:26.507
> 
> 标签：facebook

我正在使用[Facebook Feed Dialog](http://developers.facebook.com/docs/reference/dialogs/feed/)来促进我网站上的简单分享。

帖子（URL）中有“图片”选项。

有没有办法可以将我的 Facebook 应用程序中的现有徽标用作图像？

![在此处输入图像描述](../Images/c00fdb0497e706e261522f6a7c778983.png)

![在此处输入图像描述](../Images/2e44df3e36096d3a8724662231af65b6.png)

例如，有没有一种方法可以以编程方式创建我的 Facebook 应用程序徽标的 URL？（使用应用程序 ID）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T07:41:44.773

您可以使用[https://graph.facebook.com/APP_ID](https://graph.facebook.com/APP_ID)执行此操作， 然后获取 logo_url。

编辑：只是想补充一点，沙盒模式下的应用程序显然需要访问令牌才能将您识别为管理员/测试人员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T06:37:11.920

您不能在提要对话框中使用该徽标，因为它保存在 facebook 服务器中。（脸书不允许）

直接的解决方案是 - 使用服务器中的图像。

# python - 使用条件删除列表中的元素

> ID：14250174
> 
> 赞同：2
> 
> 时间：2013-01-10T03:01:30.480
> 
> 标签：python, list, conditional-statements

我有一个名为 Info 的类，其中 Info 有一个字符串类型的实例变量，可以通过`Info.getName()`

我还有一个实例信息列表，例如`class_list = [Info('Aleck'), Info('John')]`.

给定 a `name_list = ['Aleck', 'Bob']`，我想删除 class_list 中 name_list 中具有相同名称的元素，同时我还需要知道某个名称（例如 Bob）是否不在 class_list 中（例如打印出 bob 不在列表中）

对于上面的例子，结果应该是 class_list = [Info('John')] 并打印出 bob 不在列表中。

我知道这样做的丑陋方式，例如以下代码（我实际上并没有运行它，只是一个例子），是否有优雅或 Pythonic 的方式来做到这一点？

```
def removeElement(name_list, class_list):
    list_to_be_removed = []
    for name in name_list:
        is_name_in_list = false
        for obj in class_list
            if name == obj.getName():
                list_to_be_removed.add(obj)
                is_name_in_list = true
                break
        if is_name_in_list == false:
            print name + ' is not in the list'
        is_name_in_list = false

    for obj in list_to_be_removed:
        class_list.remove(obj) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T03:06:49.177

你没有类，你有类实例。`Info('Alice')`是一个构造函数调用，它创建 Info 类的一个实例。

这个怎么样：

```
filtered = [info for info in info_list if info.get_name() not in name_list] 
```

或者：

```
filtered = filter(lambda o: o not in name_list, info_list) 
```

如果您有很多名称，请将您的 name_list 转换为一组并使用它。

```
name_set = set(name_list) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T03:05:14.207

列表推导是你的朋友。

```
def remove_names(names_to_remove, info_list):
    return [info
            for info in info_list
            if info.getName() not in names_to_remove] 
```

我将大多数变量的名称更改为更接近我认为您的意思。

# php - Preg_match 匹配电话号码

> ID：14250175
> 
> 赞同：1
> 
> 时间：2013-01-10T03:02:00.313
> 
> 标签：php, preg-match

我有一个包含大约 2000 个网站的 csv 文件，我有一个脚本可以处理每个网站的 file_get_contents，并查找电话号码。

我的预赛不工作！？？我需要找到确切的数字字符串 800-885-7505

我试过了：

```
preg_match('/^800-885-7505$/', $page, $matches); 
```

但是没有用....谁能告诉我为什么？谢谢！

我试过了：

```
<?
$file = fopen('file.csv', 'r');
while (($line = fgetcsv($file)) !== FALSE) {
  //$line is an array of the csv elements
  $page = file_get_contents("http://www.".$line[0]);
 preg_match('/800-885-7505/', $page, $matches);
 echo "http://www.".$line[0]." = ".$matches[1] . "<br><br>";
}
fclose($file);
?> 
```

这个 DID 工作，我有相同的脚本来寻找页面上的 iframe，它工作得很好：

```
<?
$file = fopen('file.csv', 'r');
while (($line = fgetcsv($file)) !== FALSE) {
  //$line is an array of the csv elements
  $page = file_get_contents("http://www.".$line[0]);
  preg_match('/<iframe.*src=\"(.*)\".*><\/iframe>/isU', $page, $matches);
  if (($matches[1]!=="http://www.url.com/lmapp.html") && ($matches[1]!=="http://www.url.com/mc_NewApp2.html"))
  {echo "http://www.".$line[0]." = ".$matches[1] . "<br><br>";}
}
fclose($file);
?> 
```

所以我认为我需要做的就是为电话号码进行正确的预匹配

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T03:11:31.477

您可以使用：

```
preg_match('/800-885-7505/', $page, $matches); 
```

或更快：

```
if ( strpos('800-885-7505',$page) !== false ) 
```

# facebook - facebook喜欢结果到第403页

> ID：14250176
> 
> 赞同：-1
> 
> 时间：2013-01-10T03:02:22.590
> 
> 标签：facebook, joomla, facebook-like

如果我喜欢我网站上的页面。它被发布到脸书。问题是当第二个用户点击 facebook 上的类似内容时。他们被带到一个 403 禁止页面。

喜欢[http://www.cmypictures.com/photos/index.html](http://www.cmypictures.com/photos/index.html) 结果到

[http://www.cmypictures.com/photos/index.html?fb_action_ids=10151367960904866&fb_action_types=og.likes&fb_source=timeline_og&action_object_map=%7B%2210151367960904866%22%3A10150286116634264%7D&action_type_map=%7B%2210151367960904866%22%3A%22og.likes% 22%7D&action_ref_map=%5B%5D](http://www.cmypictures.com/photos/index.html?fb_action_ids=10151367960904866&fb_action_types=og.likes&fb_source=timeline_og&action_object_map=%7B%2210151367960904866%22%3A10150286116634264%7D&action_type_map=%7B%2210151367960904866%22%3A%22og.likes%22%7D&action_ref_map=%5B%5D)

我注意到，如果我`%3A"og.likes"%7D&action_ref_map=%5B%5D`在链接末尾手动删除，则会打开所需的页面。

为什么 facebook 在最后添加此代码，可以做些什么来避免这种情况？顺便提一下，我在 joomla 上运行我的网站。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T13:32:50.047

Facebook 将其添加用于推荐目的，因此您可以在 /analytics 中查看数据。正如@igy 所提到的，您需要检查您的CMS，因为它没有正确处理参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:51:15.867

我遇到了同样的问题，我联系了我的托管服务提供商并提交了一张票，我不知道他们做了什么来解决这个问题，但很快就解决了。链接中的某些内容可能已被列入黑名单或“。”的某种组合。并且链接的长度可能导致了问题。请联系您的托管服务提供商寻求解决方案。

# mediawiki - 在 MediaWiki 页面中，如何包含指向文件和文件描述页面的链接

> ID：14250178
> 
> 赞同：2
> 
> 时间：2013-01-10T03:02:31.943
> 
> 标签：mediawiki, wiki, mediawiki-templates, transclusion

在 MediaWiki 页面中，我想要一个指向文件和文件描述页面的链接。我以前见过这个，但我现在找不到它......它看起来像

```
{{file|MyFileName|pdf|This is my PDF file}} 
```

最后页面显示“这是我的 PDF 文件”作为直接链接，旁边有一个 PDF 小图标，实际上是说明页面的链接。我相信这适用于 pdf、doc、docx、ppt、pptx 等。开头的前缀始终是“文件”，第二个选项是您放置文件类型的位置。

当然，我只是在我的 MediaWiki 1.19.0 安装上尝试过，但它不起作用。

它看起来像是某种模板嵌入，要么我的配置错误，要么我没有模板，或者我的 MediaWiki 版本太旧。我有文件模板，但因为我可以让它的一半像这样工作：

```
[[:File:MyFileName.pdf|This is my PDF file]] 
```

我什至记得看到一个页面将这两种格式描述为链接到文件的“旧”和“新”方式，但我现在也找不到那个页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:44:25.977

您可以像这样创建此类模板的简单版本：

```
[[Media:{{{1}}}.{{{2}}}|{{{3}}}]] [[:File:{{{1}}}.{{{2}}}|(description)]] 
```

[`Media`命名空间](http://www.mediawiki.org/wiki/Help%3aNamespaces#Media)用于直接链接文件[；](http://www.mediawiki.org/wiki/Help%3aNamespaces#Media)`:`指定要链接到描述页面而不显示文件。

如果您想为每种文件类型设置一个图标，则需要[`{{#switch}}`](http://www.mediawiki.org/wiki/Help%3aExtension%3aParserFunctions#.23switch)在文件类型上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:46:10.593

详细地说，模板可能有这样的结构：

**模板：文件**

```
[[Media:{{{1|}}}.{{{2|}}}|{{{3|}}}]]<!--
-->[[File:{{{2|}}} icon.png|link=File:{{{1|}}}.{{{2|}}}]] 
```

继续为您计划使用的每种文件类型加载图标图像。（如果图像不是图标大小，您还需要在其中添加宽​​度修饰符。）使用此模板，应该生成您描述的输出：一个名为“这是我的 PDF 文件”`{{file|MyFileName|pdf|This is my PDF file}}`的直接链接`MyFileName.pdf`，后跟一个嵌入图像，该图像`File:Pdf icon.png`也是 的描述页面的链接`MyFileName.pdf`。

# git - git子模块推送？

> ID：14250183
> 
> 赞同：2
> 
> 时间：2013-01-10T03:03:05.950
> 
> 标签：git, git-submodules

我更改了子模块中的代码并希望与其他团队成员共享。
（哇 git 子模块很难）

```
> cd to submodule
> git add/commit
> git push prompts me Username: and Password:
> Username: 
> Password: 
> error: The requested URL returned error: 403 while accessing 
> https://github.com/hovel/pybbm.git/info/refs 
```

我读到我必须先`push`进行更改，然后其他人才能`git submodule update`看到更改。
我以为我要把它推到一些本地回购？为什么错误显示我 github(original repo)，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:07:12.607

> 我必须先推送更改，然后其他人才能执行 git submodule update 以查看更改

你必须：

*   推送子模块中所做的更改
*   *并*在父 repo 中返回上一级，提交并推送

当其他人进行 git submodule update 时，他们是从同一个父 repo 的克隆中进行的，其中包含每个子模块的引用（地址和 SHA1）。
如果您没有推送*父*repo记录的那些[特殊条目](https://stackoverflow.com/questions/2297899/checkout-past-git-submodule-commit/2300638#2300638)，即使您从子模块推送了 modif，也无法进行更新。

 *子模块是 git repo 的克隆：您从[https://github.com/hovel/pybbm.git](https://github.com/hovel/pybbm.git)克隆了它，这是一个您无权推回的地址（子模块与否）。
您需要先[分叉该 repo](https://stackoverflow.com/questions/9257533/what-is-the-difference-between-origin-and-upstream-in-github/9257901#9257901)，然后将该分叉用作您的子模块 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:09:26.797

那个子模块是你自己的吗？当您尝试推送到其他人的存储库时，您可能会收到 403 错误。如果要更新基于某人工作的子模块，则应改为创建该项目的分支，然后将该分支用作子模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T03:38:27.307

检查你的 git 版本。如果您不使用 git 1.7.10 或更高版本，Github 将使用 https 显示错误，如您在[https://help.github.com/articles/https-cloning-errors](https://help.github.com/articles/https-cloning-errors)中所见。*

# python - 如果迭代器为空，Python迭代器中下一个元素的默认值？

> ID：14250184
> 
> 赞同：42
> 
> 时间：2013-01-10T03:03:35.027
> 
> 标签：python, iterator

我有一个对象列表，我想找到给定方法为某个输入值返回 true 的第一个对象。这在 Python 中相对容易做到：

```
pattern = next(p for p in pattern_list if p.method(input)) 
```

但是，在我的应用程序中，通常没有这样`p`的`p.method(input)`情况为真，因此这将引发`StopIteration`异常。有没有一种惯用的方法来处理这个而不写一个 try/catch 块？

特别是，用类似条件的东西来处理这种情况似乎会更干净`if pattern is not None`，所以我想知道是否有一种方法可以扩展我的定义，`pattern`以便在迭代器为空时提供一个`None`值——或者是否有更多处理整体问题的 Pythonic 方式！

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-01-10T03:10:39.413

[`next`](https://docs.python.org/3/library/functions.html#next)接受默认值：

```
next(...)
    next(iterator[, default])

    Return the next item from the iterator. If default is given and the iterator
    is exhausted, it is returned instead of raising StopIteration. 
```

所以

```
>>> print next(i for i in range(10) if i**2 == 9)
3
>>> print next(i for i in range(10) if i**2 == 17)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
StopIteration
>>> print next((i for i in range(10) if i**2 == 17), None)
None 
```

请注意，出于语法原因，您必须将 genexp 包含在额外的括号中，否则：

```
>>> print next(i for i in range(10) if i**2 == 17, None)
  File "<stdin>", line 1
SyntaxError: Generator expression must be parenthesized if not sole argument 
```

# ruby-on-rails-3.2 - rails 如何根据 url 动态决定控制器

> ID：14250189
> 
> 赞同：0
> 
> 时间：2013-01-10T03:03:48.250
> 
> 标签：ruby-on-rails-3.2

假设我有两个控制器`apple`，`banana`并且我想根据 url 动态分配它们。例如，我想做类似的事情

```
match 'eat/:fruit' => ':fruit#eat' 
```

在我的`routes.rb`. 我希望当我访问 url 时`eat/apple`，rails 会使用`apple#eat`. 否则，rails 将使用`banana#eat`for `eat/banana`。

有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T03:51:48.767

来自[http://guides.rubyonrails.org/routing.html#bound-parameters](http://guides.rubyonrails.org/routing.html#bound-parameters)

我认为这会起作用：

```
match ':action/:controller' 
```

# java - Eclipse 插件或工具，可以以图形 pic 格式显示表之间的连接

> ID：14250191
> 
> 赞同：0
> 
> 时间：2013-01-10T03:03:57.160
> 
> 标签：java, database, eclipse, db2

我曾经通过 eclipse 数据库浏览器透视图连接到数据库，我可以看到我的数据库的所有故事，请告知是否有任何插件或工具可以说我通过主键和外键在三个不同的表之间建立连接，以便我可以以图形方式显示这三个表是如何连接的，因为我必须将其放入幻灯片中，虽然我有查询但最终用户会更清楚地掌握图片。

请指教 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:18:06.177

这在带有 DB2 的 Eclipse 中可能是不可行的。[SchemaSpy](http://schemaspy.sourceforge.net/)将完全按照您的意愿行事。我已经使用过它，如果数据库中有需要处理的东西（fks 设置或健全的命名方案），它就可以工作。不要担心这个工具有点过时，它会产生好看的输出。

# netty - Netty HashedWheelTimer 可以处理多少次超时？

> ID：14250192
> 
> 赞同：4
> 
> 时间：2013-01-10T03:03:58.730
> 
> 标签：netty

[文档](http://static.netty.io/3.6/api/org/jboss/netty/util/HashedWheelTimer.html)说“每个轮子的默认刻度数（即轮子的大小）是 512。如果您要安排很多超时，您可以指定一个更大的值。”

这是否意味着默认情况下它只能处理 512 个超时？如果我想要 25 秒的 10 万次超时（对于[SockJS](https://github.com/sockjs/sockjs-client)），我应该将什么值设置为每个轮子的滴答数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T05:43:23.160

轮子基本上是一个带有单独链接的哈希表，其哈希函数是“通知时间”。单独的链接被实现为无界有序集，因此轮子实际上可以容纳无限数量的超时。

如果您安排一个在遥远的将来超时的超时（即大延迟），大延迟将除以`wheelSize * tickDuration`，并将其余数用作超时的哈希值。因此，轮子中的​​当前槽可以同时保存将在下一个到期`tickDuration`的超时和将在`(tickDuration * wheelSize * n)`毫秒内到期的超时，其中变量`n`将随着计时器线程在轮子上迭代而减小。当计时器线程访问插槽时，后者将花费一些 CPU 时间，因为实际上并没有轮到它们过期。（这类似于传统哈希表中的冲突）。为了减少碰撞的机会，您可以增加车轮的尺寸。

例如，如果您确定大多数计划的超时将在一分钟内到期，您可以`wheelSize * tickDuration`设置一分钟（例如 600 个时隙 * 100 毫秒）。

有关散列轮的详细信息，请阅读[此](http://www.cse.wustl.edu/~cdgill/courses/cs6874/TimingWheels.ppt)。

# bash - 如何处理 linux find 命令没有结果

> ID：14250195
> 
> 赞同：1
> 
> 时间：2013-01-10T03:04:30.610
> 
> 标签：bash, find, xargs, rm

> 寻找 。-name "*.pyc" -print0| xargs -0 rm

我使用此命令删除 python 编译文件，但如果当前目录没有任何 *.pyc 文件，则此 cmd 将无法使用 rm 命令打印错误需要运算符 args

如果当前目录没有 *.pyc 文件这种情况如何处理这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T03:10:51.993

使用查找`-exec`：

```
find -name '*.pyc' -exec rm {} \; 
```

或丢弃输出技术：

```
find . -name "*.pyc" -print0| xargs -0 -I{} rm {} &> /dev/null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T03:12:32.300

如果您可以假设 GNU find，那么您可以使用`find . -name '*.pyc' -delete`.

或者，`find . -name '*.pyc' -exec rm -rf {} '+'`。

# java - java.lang.StackOverflowError 由 setImageResource

> ID：14250198
> 
> 赞同：4
> 
> 时间：2013-01-10T03:04:49.607
> 
> 标签：java, android

初始化tabhost时我的android应用程序崩溃了。但是来自用户的崩溃日志很奇怪！

大部分崩溃来自 android 2.3.x，在 android 4.x 上运行良好。

我可以看到当我调用“setImageResource”时代码遇到了无限递归，但我不明白为什么。代码：

```
    查看 tabIndicator = LayoutInflater.from(this).inflate(R.layout.tab_indicator, getTabWidget(), false);   
    ImageView 图标 = (ImageView) tabIndicator.findViewById(R.id.icon);
    icon.setImageResource(drawableId); // 崩溃了

```

```
 java.lang.StackOverflowError
at android.graphics.drawable.StateListDrawable$StateListState.<init>(StateListDrawable.java:257)
at android.graphics.drawable.StateListDrawable.<init>(StateListDrawable.java:303)
at android.graphics.drawable.StateListDrawable.<init>(StateListDrawable.java:70)
at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:787)
at android.graphics.drawable.Drawable.createFromXml(Drawable.java:728)
at android.content.res.Resources.loadDrawable(Resources.java:1712)
at android.content.res.Resources.getDrawable(Resources.java:590)
at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:162)
at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:787)
at android.graphics.drawable.Drawable.createFromXml(Drawable.java:728)
at android.content.res.Resources.loadDrawable(Resources.java:1712)
at android.content.res.Resources.getDrawable(Resources.java:590)
at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:162)
at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:787)
at android.graphics.drawable.Drawable.createFromXml(Drawable.java:728)
at android.content.res.Resources.loadDrawable(Resources.java:1712)
at android.content.res.Resources.getDrawable(Resources.java:590)
at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:162)
at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:787)
at android.graphics.drawable.Drawable.createFromXml(Drawable.java:728)
at android.content.res.Resources.loadDrawable(Resources.java:1712)
at android.content.res.Resources.getDrawable(Resources.java:590)
at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:162)
at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:787)
at android.graphics.drawable.Drawable.createFromXml(Drawable.java:728)
at android.content.res.Resources.loadDrawable(Resources.java:1712)
at android.content.res.Resources.getDrawable(Resources.java:590)
at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:162)
at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:787)
at android.graphics.drawable.Drawable.createFromXml(Drawable.java:728)
at android.content.res.Resources.loadDrawable(Resources.java:1712)
at android.content.res.Resources.getDrawable(Resources.java:590)
at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:162)
at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:787)
at android.graphics.drawable.Drawable.createFromXml(Drawable.java:728)
at android.content.res.Resources.loadDrawable(Resources.java:1712)
at android.content.res.Resources.getDrawable(Resources.java:590)
at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:162)
at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:787)
at android.graphics.drawable.Drawable.createFromXml(Drawable.java:728)
at android.content.res.Resources.loadDrawable(Resources.java:1712)
at android.content.res.Resources.getDrawable(Resources.java:590)
at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:162)
at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:787)
at android.graphics.drawable.Drawable.createFromXml(Drawable.java:728)
at android.content.res.Resources.loadDrawable(Resources.java:1712)
at android.content.res.Resources.getDrawable(Resources.java:590)
at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:162)
at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:787)
at android.graphics.drawable.Drawable.createFromXml(Drawable.java:728)
at android.content.res.Resources.loadDrawable(Resources.java:1712)
at android.content.res.Resources.getDrawable(Resources.java:590)
at android.widget.ImageView.resolveUri(ImageView.java:564)
at android.widget.ImageView.setImageResource(ImageView.java:280)
at com.thankcreate.care.MainActivity.addTab(MainActivity.java:95)
at com.thankcreate.care.MainActivity.setTabs(MainActivity.java:78)
at com.thankcreate.care.MainActivity.onCreate(MainActivity.java:36)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1794)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1851)
at android.app.ActivityThread.access$1500(ActivityThread.java:132)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:143)
at android.app.ActivityThread.main(ActivityThread.java:4277)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T07:14:01.553

这是由执行无限循环引起的。这可能是由用作图标的可绘制对象中的循环调用引起的。具有指定的 Drawable`drawableId`可能正在调用第二个可绘制对象，而第二个可绘制对象又会调用第一个。

提供有关您正在使用的可绘制对象的更多详细信息。这可能有助于提供更好的答案。

# php - 通过 PHP Toolkit 获取 NetSuite 中自定义列表的内容

> ID：14250203
> 
> 赞同：2
> 
> 时间：2013-01-10T03:05:46.623
> 
> 标签：php, netsuite

使用最新的 NetSuite PHP Toolkit v2012_2，我如何获取列表的内容，尤其是自定义列表？

例如，我们有一个自定义列表，其中包含客户如何了解我们的选项。我们会不时修改此列表。当我们网站的访问者进入我们的注册屏幕时，我们希望从 NetSuite 中提取 id 为 3 的自定义列表的列表项（以及每个列表项的 id），这样我们就可以填写一个下拉框以供何时使用在 NetSuite 中创建联系人。这样我们就可以在 NetSuite 中维护一个列表，并且它在网站中始终是最新的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T16:32:50.293

感谢 Saqib！

作为参考，下面是一个正在运行的代码示例：

```
$service = new NetSuiteService();
$service->setSearchPreferences(false, 20);

$recordRef = new RecordRef();
$recordRef->internalId = 1;

$searchField = new SearchMultiSelectField();
$searchField->operator = "anyOf";
$searchField->searchValue = $recordRef;

$search = new CustomListSearchBasic();
$search->internalId = $searchField;

$request = new SearchRequest();
$request->searchRecord = $search;

$searchResponse = $service->search($request);
var_dump($searchResponse);
die(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:08:49.293

也许[http://tellsaqib.github.com/NSPHP-Doc/](http://tellsaqib.github.com/NSPHP-Doc/)可以帮助您自己编写代码。

# django - 如何使用子查询 django ORM？

> ID：14250206
> 
> 赞同：4
> 
> 时间：2013-01-10T03:05:54.527
> 
> 标签：django, orm, subquery

sql子查询是：

```
SELECT  * 
FROM   ( SELECT * 
         FROM   article 
         ORDER BY Fid desc 
         LIMIT 0, 200
       ) as l 
 WHERE  keyId = 1 
 AND  typeId = 0 
```

我试过这个：

```
rets = Article.objects.order_by("-Fid").values('Fid')
kwargs['keyId'] = 1
kwargs['typeId'] = 0
re =  Article.objects.filter(Fid__in=rets).filter(**kwargs).values() 
```

但它不起作用。谁能解释我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T04:10:52.423

在您的情况下，我想您可以[使用原始 SQL](https://docs.djangoproject.com/en/dev/topics/db/sql/)（未经测试）。请注意，使用原始 SQL 您必须知道真实的表名和列名（只需先直接在数据库上测试该语句，看看它是否有效）。

例如：

```
Article.objects.raw("""SELECT * from (
                         SELECT * FROM yourapp_article 
                         ORDER BY fid DESC
                         LIMIT 0, 200
                       ) AS q1 WHERE key_id=1 AND type_id=0""") 
```

[更新]

wuent 写道：

> 谢谢你的帮助。但原始 SQL 不是我想要的。我需要保持我的程序 orm 风格。– 呜呜

如果您习惯于更强大/一致的 ORM，例如[SQLAlchemy](http://www.sqlalchemy.org/)甚至[peewee](http://peewee.readthedocs.org/en/latest/)，请放弃您的希望。Django ORM 有一个非常残缺的设计，AFAIK 你不能用它做这种事情——这个答案的第一个版本开始于对此的咆哮。

再次查看您的查询，我的印象是您不需要子查询，请尝试直接查询表 - 我的猜测是结果将是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-10T07:48:57.387

这个怎么样？

```
rets = Article.objects.order_by("-Fid").values_list('Fid', flat=True)
kwargs['keyId'] = 1
kwargs['typeId'] = 0
re =  Article.objects.filter(Fid__in=rets).filter(**kwargs).values() 
```

# facebook - 与 OpenGraph 协议一样

> ID：14250207
> 
> 赞同：0
> 
> 时间：2013-01-10T03:06:13.983
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我可以使用 facebook api OpenGraph 毫无问题地发布，但我看不到如何使用 OpenGraph 自动“喜欢”一个页面，事实上我希望用户在接受我的应用程序时自动喜欢一个页面，关于如何继续？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T04:27:39.000

您不能使用 API 以编程方式让用户喜欢 Facebook 上的页面...... Facebook 的明智选择也是如此，想象一下会发生的滥用情况。您应该改用 facebook like 按钮。

确认：

[使用 Facebook Graph API 为页面“点赞”](https://stackoverflow.com/questions/3061054/like-a-page-using-facebook-graph-api)

# javascript - Three.js - 如何旋转对象以查看一个点并朝向另一个点

> ID：14250208
> 
> 赞同：12
> 
> 时间：2013-01-10T03:06:13.510
> 
> 标签：javascript, 3d, three.js

一般来说，我对 three.js 和 3d 编程很陌生，所以这似乎是一个非常简单的问题。理想情况下，我希望答案可以帮助我理解基本原理。

我有一个对象需要“指向”另一个点（为简单起见，在本例中为原点），这可以通过该`Object3D.lookAt(point)`函数轻松完成。这将对象的 Z 轴很好地指向该点。

我还想`looker`围绕它的 Z 轴旋转我的对象，称为 ，使其 X 轴通常指向另一个对象，`refObj`。我知道 X 轴不能直接指向`refObj`除非该对象与原点成直角。我希望 的 X 轴位于和`looker`创建的平面上`origin`，如下图所示：`refObj``looker`

![问题示意图](../Images/f857f58df1b6ed6ccbfc7ea288d0397b.png)

进行旋转的最简单方法似乎是 modify `looker.rotation.z`，但我不知道如何计算该值应该是什么。

一般来说，我想要一个扩展版本的`lookAt`函数，它采用 X 轴所指向的第二个坐标。像这样的东西：

```
function lookAtAndOrient(objectToAdjust, pointToLookAt, pointToOrientXTowards)
{
  // First we look at the pointToLookAt
  objectToAdjust.lookAt(pointToLookAt);

  // Then we rotate the object
  objectToAdjust.rotation.z = ??;
} 
```

我[用上面的例子创建了一个 jsFiddle](http://jsfiddle.net/rQasN/5/)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-10T04:51:19.297

您真正要说的是您希望对象的 y 轴（对象的`up`-vector）与平面正交。

您所要做的就是`up`在调用之前设置对象的 -vector `lookAt( origin )`。

`up`您通过取两个已知位于平面上的向量的叉积来计算所需的向量。

这是一个工作小提琴：http: [//jsfiddle.net/rQasN/43/](http://jsfiddle.net/rQasN/43/)

请注意，您的问题有两种解决方案，因为计算出的向量和它的否定都将与平面正交。

编辑：小提琴更新为three.js r.71

# xamarin.ios - Monotouch 对话框：让 SimpleMultilineEntryElement 尊重其“大小”

> ID：14250209
> 
> 赞同：1
> 
> 时间：2013-01-10T03:06:17.257
> 
> 标签：xamarin.ios, monotouch.dialog

我在 Elements Pack（[此处](https://github.com/xamarin/monotouch-element-pack)）中的 MonotouchDialog 中使用 SimpleMultilineEntryElement。

无论高度设置如何，此元素都会继续出现在“默认”表格单元格高度处。实际的可编辑部分有所不同，但背景单元格轮廓没有。许多浏览表明需要实现 SizingSource，我已经做到了。所以，使用一个非常脆弱的解决方法，我现在可以有选择地调整单元格的大小。在 Root 元素上使用 UnevenRows 属性没有帮助。试图获取该索引处的单元格会杀死应用程序，即使肯定会返回索引。

*   有没有办法让它使用我为 Multiline entryelement 定义的高度属性？

    使用系统；使用 System.Drawing；使用 MonoTouch.Dialog；使用 MonoTouch.Foundation；使用 MonoTouch.UIKit；使用元素包；使用 System.Collections.Generic；

    namespace MyNameSpace { // 编辑现有项目，如果不存在则添加一个

    公共部分类 ProjectEdit : DialogViewController { Project _p; UINavigationController _nc;

    ```
    public ProjectEdit (Project p, UINavigationController nc) : base(null, true)
    {
        _p = p;
        _nc = nc;

        if (_p == null)
        {
            _p = new Project();
            _p.InitialiseProjectDefaults();
        }

    }

    public override Source CreateSizingSource (bool unevenRows)
    {
        //if (unevenRows)
        {
            return new unevenSizingSource(this);
        }
    }

    public class unevenSizingSource : DialogViewController.SizingSource
    {
        public unevenSizingSource(DialogViewController vc) : base (vc)
        {

        }

        public override float GetHeightForRow (UITableView tableView, NSIndexPath indexPath)
        {
            // workaround to resize selectively

            // location
            if (indexPath.Section == 1 && indexPath.Row == 0)
            {
                return 200;
            }
            // description
            if (indexPath.Section == 2 && indexPath.Row == 0)
            {
                return 200;
            }

            return 200;
        }
    }

    public override void ViewDidLoad ()
    {
        base.ViewDidLoad ();

    }

    public override void ViewWillAppear (bool animated)
    {
        base.ViewWillAppear (animated);

        // Client selection
        ClientListViewController cl = new ClientListViewController(_nc, _p);

        var basicDetailsSection = new Section("Client") {
            new StringElement(_p.ClientDisplayName, delegate { _nc.PushViewController(cl, true); })
            //new UIViewElement ("", new GapElement (), true)
        };

        var locationSection = new Section("Location") {
            new SimpleMultilineEntryElement ("", "This is the\n location.") { Editable = true, Height = 200,  } 
        };

        var descSection = new Section ("Job Description"){
            new SimpleMultilineEntryElement ("", "This is the\n description") { Editable = true, Height = 200 } 
        };

        Root = new RootElement ("Project Details") {
            basicDetailsSection, locationSection, descSection
        };

    } 
    ```

    }

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T07:42:55.070

您必须在视图出现之前设置 Root.UnevenRows。控制器示例 -

```
using System;
using MonoTouch.Dialog;
using ElementPack;

namespace Test1
{
    public class Test2ViewController : DialogViewController
    {
        public Test2ViewController (): base(new RootElement("test"))
        {
            Root.UnevenRows = false;

            Root.Add (new Section () 
                      {
                        new SimpleMultilineEntryElement(string.Empty, "value")
                        {
                            Height = 150, Editable = true
                        },
                        new SimpleMultilineEntryElement(string.Empty, "value2")
                        {
                            Height = 250, Editable = true
                        }});
        }
    }
} 
```

# javascript - 在 Chrome 内容脚本中使用模板的建议方法是什么？

> ID：14250210
> 
> 赞同：6
> 
> 时间：2013-01-10T03:06:21.637
> 
> 标签：javascript, google-chrome, google-chrome-extension

我在 Chrome 内容脚本中使用了几个模板来`elements`添加到匹配的页面。

目前我将这些模板存储`string`在脚本中，但我想知道是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T05:29:38.640

**tl;博士回答**- 是的，您可以将它们存储在`<script type="text/html">`标签中或通过 ajax 动态加载它们。示例[here](http://knockoutjs.com/documentation/template-binding.html)（来自 KnockoutJS）和[here](http://underscorejs.org/#template)。将它们存储在具有适当扩展名的文件中，并使用 id X 的空标签，然后`$("#X").load("/path/to/template", function() { renderX(); })`

长篇大论，有见地的想法，请继续阅读...

## 请确保系统的模板/视图或相关 GUI 组件位于单独的文件中[（继续阅读以了解原因）]

作为一名前端工程师，我学会了将层尽可能分开；这有助于您的团队更好地理解您的代码并使其更易于维护。在模块中分离你的层，然后通过“组装”机制组装它们可能是软件工程中的最佳实践之一。这种做法的一些好处包括：

*   **可维护性**：多个开发人员可以浏览和编辑代码的单个部分，以创建更强大的软件。
*   **可读性**：随着语言的数量越来越多，你不能指望每个人都能理解这些 X 或 Y 语言的所有语法；在一个文件中混合语言只是让代码审查员感到困惑并使他花费比需要更多的时间的一个步骤。
*   **可访问性**：例如，html、jade、haml、smarty、twig、erb 或其他模板文件。这些文件应始终以正确的扩展名命名，以帮助代码编辑器和 IDE 突出显示语法。开发人员只需要浏览一个文件夹就知道这些文件应该做什么。脚本或机器人可以从扩展中获取重要信息。

通过将视图保存在单独的文件中，其他编码人员可以查看它们并了解系统的重要层，而无需了解整个应用程序；当开发人员只需要查看这些特定文件时，甚至协作也会变得更加容易。通过 bashing 或脚本，甚至可以过滤具有数千个“视图”之类的文件的大型体系结构系统，以便输出需要审查的内容。

*（现在我希望我说服你从你的代码中删除你的字符串并在那里创建一个新文件，否则我真的需要提高我的写作技巧）*

那么，在我们将模板移动到外部文件之后，**我们接下来要做什么呢？**

### 关于 Javascript 和 Chrome 扩展的一句话

Javascript 没有默认的模板功能（哎呀，它甚至没有模块化功能，尽管一些聪明的人正在为 ECMAScript Ed. 6 开发它，耶！），这意味着我们需要使用模板图书馆。假设您正在使用 Mustache、Underscore 类似的模板，因此使用它的库来渲染它。

大多数模板引擎都使用臭名昭著`eval`的 . Chrome 扩展开发团队甚至强制执行该`manifest.json`文件的新版本以禁止`eval`，并让开发人员选择使用[沙盒页面](http://developer.chrome.com/apps/sandboxingEval.html)来执行此操作。对我们来说幸运的是，他们决定稍微放宽政策，我们可以[继续](http://www.html5rocks.com/en/tutorials/security/content-security-policy/)在`manifest.json`.

这意味着我们需要解决两个问题而不仅仅是一个问题：“加载模板”和“以一种不会吓坏新传入 CSP 版本的方式渲染模板，以防 Chrome 扩展开发团队更改他们的头脑”。

### 加载模板

幸运的是，加载模板可以通过 AJAX 的 XML HTTP 请求来完成。只需将 url 指向文件名，您就可以将模板作为字符串接收，这可能是您最初的设置。这是我用 KnokcoutJS 做的一个例子：

```
 $("#aiesecTemplate").load('js/libs/aiesec/aiesecTemplate.html', function() {
      ko.applyBindings(AIESECViewModel);
 }); 
```

`#aiesecTemplate`是`<script type="text/html">`浏览器不会呈现为 DOM 的一部分的标签。您可以将其与其他模板机制一起使用，以便实际组装您的 DOM。如果您已经对此有解决方案，那么这可能是答案的结束，您可以继续您的生活。如果您想知道我们如何从那里渲染代码，请继续阅读。

### 渲染模板

[由于大多数模板引擎库不兼容 CSP（ AngularJS](http://angularjs.org/)是一个例外），Chrome 开发团队建议我们将渲染过程沙箱化。这是 Sandbox 页面的代码摘录。

```
iframe.contentWindow.postMessage(message, '*'); 
```

具有模板引擎的页面属性`iframe`的沙盒页面中的特定 DOM Iframe 元素在哪里？具有先前加载的字符串模板，因此在 iframe 内发布消息后 a for可以毫无问题地呈现它。可以在[此处阅读有关沙盒评估的更多信息](http://developer.chrome.com/apps/sandboxingEval.html)`src``message``window.addEventListener``message`

### 结论

如果你能到这里，太棒了！我的回答可能不会那么无聊。最后一点，您可能在想“AMD 或 RequireJS 怎么样？”；老实说我没有尝试过，但[真正聪明的人](http://tomdale.net/2012/01/amd-is-not-the-answer/)认为 AMD 不是最好的方法。通过 XML HTTP 请求加载可能不会更好，但如果您认为它会影响您的性能（我在我的应用程序中使用过它，但它没有），您总是可以使用一些[事件页面](http://developer.chrome.com/dev/extensions/event_pages.html)和[Web Worker](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers)。

# internet-explorer-9 - 为什么有些 IE9 支持 css 选择器，而有些不支持？

> ID：14250211
> 
> 赞同：1
> 
> 时间：2013-01-10T03:06:22.250
> 
> 标签：internet-explorer-9, css-selectors

我桌面上的 IE9 完美支持 css 选择器。
但其他计算机上的相同 IE9 没有。

我已经在[http://tools.css3.info/selectors-test/test.html](http://tools.css3.info/selectors-test/test.html)上进行了测试。

两台计算机都运行 Windows7。
为什么它发生在同一个浏览器、同一个操作系统中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T03:09:48.597

IE9 应该以相同的方式运行，无论它在什么机器上。获得像这样的可变行为的唯一方法是，如果您有不同的*浏览器模式*或*文档模式*，指示浏览器的行为就好像它是旧版本一样。除此之外，文档必须处于兼容模式，或者通过用户的指示，或者通过放置在兼容性视图列表中。

按 F12 打开您的开发者工具。在那里，您将看到浏览器模式和工具右上角的文档模式。我正在使用 IE10，但您可以在下面看到我所指的内容：

![在此处输入图像描述](../Images/d77e6e9a708bc8d2e6e8cfe495defb13.png)

延伸阅读：[兼容模式](http://msdn.microsoft.com/en-us/library/ie/hh920756%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T03:12:30.240

我的第一个想法是，在其中一台机器上，IE 可能[在兼容模式下运行，](http://msdn.microsoft.com/en-us/library/ie/gg622935%28v=vs.85%29.aspx)而您使用的 css 选择器在该渲染模式下不起作用。

# haskell - 带有约束的类型列表

> ID：14250212
> 
> 赞同：3
> 
> 时间：2013-01-10T03:06:25.687
> 
> 标签：haskell, types, type-constraints, constraint-kinds

我正在尝试在类型级别构建一个列表，但是在弄清楚如何强制执行约束时遇到了一些麻烦。

我的基本代码是：

```
data Foo z q = Foo1 (z q)
             | Foo2 (z q)

class Qux q -- where ...
class Baz z -- where ...

class Bar a where             -- a has kind *->*
  type BCtx a q :: Constraint -- using ConstraintKinds to allow constraints on the concrete type
  f :: (BCtx a q) => a q -> a q -> a q
  g :: (BCtx a q, BCtx a q') => a q -> a q'

instance (Baz z) => Bar (Foo z) where
  type BCtx (Foo z) q = (Num (z q), Qux q) -- for example
  f (Foo1 x) (Foo1 y) = Foo1 $ x+y -- these functions need access to the type q to do arithmetic mod q
  f (Foo1 x) (Foo2 y) = Foo2 $ x-y
  -- ... 
```

您可以认为`q`上面的 s 代表主要权力。我还想使用`qi`s 的类型列表来表示合数。我在想像：

```
data QList qi qs = QCons qi qs
                 | QNil 
```

与数据

```
data FList c q = FNil 
               | FCons (c (Head q)) (FList c (Tail q)) 
```

where`(Head q)`应该对应`qi`和`(Tail q)`应该对应`qs`。请注意，`q`参数 for`FList`不是（必然） a `(Qux q)`，它是的*列表*。`(Qux qi)`（我不想详细说明这个列表，因为这是我提出的设计问题之一）。我想在以下方面“按模数”工作`FList`：

```
instance (Bar c) => Bar (FList c) where
   type BCtx (FList c) q = () -- Anything I put here is not enough
   f (FCons x xs) (FCons y ys) = FCons (f x y) (f xs ys)
   -- the left call to `f` calls a concrete instance, the right call to `f` is a recursive call on the rest of the list
   -- ... 
```

在 GHC 中将这些代码片段一起编译会导致（模转录、抽象和输入错误）：

```
Could not deduce (BCtx c (Head q), BCtx c (Tail q)) 
```

接着

```
Could not deduce (BCtx c (Head (Tail q)), BCtx c (Tail (Tail q))) 
```

等等

我明白为什么会收到此错误，但不知道如何解决。

具体来说，我期待一个`FList c q`类型 where`c~Foo z`和`q~QCons q1 (QCons q2 QNil)`，当然我的列表*将*满足每个级别的所有 BCtx 约束。

我不确定修复这些特定错误是否会导致编译代码，但这是一个开始。整个 Bar 类基本是固定的（必须有 Constraint kind，Bar 的实例必须有 kind * -> *）。我不相信我可以使用存在类型来创建通用对象列表，因为我需要访问`qi`参数。我愿意更改类型`FList`并`QList`允许我*在 Bars 集合上按模数工作*。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T06:03:07.877

要处理类型列表，有必要区分空列表和非空列表并分别处理它们。代码中出现“无法推断”错误是因为您的实例假定一个非空列表，而实际上该列表可能为空，也可能不为空。这是使用扩展名`TypeFamilies`、`TypeOperators`、`DataKinds`和的解决方案`GADTs`。

使用`DataKinds`，类型列表是预定义的。它们有 kind `[*]`，但它们将在需要 kind 的上下文中使用`*`，因此需要一个运算符来转换它们：

```
data InjList (qs :: [*]) 
```

使用类型列表，`FList`定义为

```
data FList c q where
  FNil :: FList c (InjList '[])
  FCons :: c h -> FList c (InjList t) -> FList c (InjList (h ': t)) 
```

它被定义为 GADT 来表达如何只能在某些 type-list`FList`的类型上构造 s 。例如，术语具有类型。另一方面，因为is 不是 形式，所以没有类型的项（⊥ 除外）。通过对 an 进行模式匹配，函数可以验证它是否被赋予了一个非⊥ 参数，并进一步确定它是否被传递给一个空类型列表。`InjList q'``q'``FCons [True] FNil``FList [] (InjList (Bool ': '[]))``Bool``InjList q'``FList [] Bool``FList`

`Bar`for s的实例`FList`必须分别处理 nil 列表和 cons 列表。一个 nil 列表有一个空的上下文。一个 cons 列表具有列表头部和尾部的组件。这通过在 的关联类型实例中的类型列表上进行模式匹配来表示`BCtx`。该函数`f`检查它的参数以验证它不是 ⊥ 并确定它是否是一个空列表。

```
instance (Bar c) => Bar (FList c) where
  -- Empty context for '[]
  type BCtx (FList c) (InjList '[]) = ()
  -- Context includes components for head and tail of list
  type BCtx (FList c) (InjList (h ': t)) = (BCtx c h, BCtx (FList c) (InjList t))

  f FNil FNil = FNil
  f (FCons x xs) (FCons y ys) = FCons (f x y) (f xs ys) 
```

我们可以将代码加载到 GHCi 中以验证它是否有效：

```
instance Bar [] where
  type BCtx [] q = Num q
  f xs ys = zipWith (+) xs ys

instance Show (FList c (InjList '[])) where
  show FNil = "FNil"

instance (Show (c h), Show (FList c (InjList t))) => Show (FList c (InjList (h ': t))) where
  show (FCons h t) = "FCons (" ++ show h ++ ") (" ++ show t ++ ")" 
```

```
$ ghci

> :load Test
> f (FCons [1,2] FNil) (FCons [3,4] FNil)
FCons ([4,6]) (FNil) 
```

# amazon-s3 - 我如何通过 s3.amazonaws.com 托管

> ID：14250214
> 
> 赞同：1
> 
> 时间：2013-01-10T03:06:39.697
> 
> 标签：amazon-s3, website-hosting

我为朋友创建了一个静态网站模型，并决定将其放在我的 s3 帐户上作为临时托管点。所以我上传了网站文件并将它们公开。

我很惊讶地发现我可以通过以下方式访问该站点（实际路径已编辑，但示例说明了这一点）：

```
https://s3.amazonaws.com/my/s3/path/to/file.html 
```

这怎么可能？我希望在 url 中有某种标识符，引用我的帐户，但显然情况并非如此。

有人能解释一下亚马逊是如何做到的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T03:12:00.930

可以通过多种方式保护对 s3 的访问，但人们经常希望将这些文件直接托管在 s3 之外，因此它们提供公共访问。您必须对您的存储桶/对象具有设置访问权限，以便它们是公开的。

您还可以将存储桶名称设置为您选择的 ala files.yourdomain.com 的域，添加指向 s3 的 CNAME，它们会自动确定文件应该来自您的公共存储桶，使用一点内部重写.

# javascript - 使用 JavaScript 使用 Web 服务 - 传递类型 apachesoap:Map

> ID：14250216
> 
> 赞同：0
> 
> 时间：2013-01-10T03:06:54.833
> 
> 标签：javascript, web-services, apache, soap

我正在尝试使用使用 JavaScript 以 Java 构建的 Axis 服务。

一切都很好，除了一个要求`apachesoap:Map`类型的搜索操作。这是该操作的 WSDL 部分：

```
<wsdl:message name="queryRequest">
   <wsdl:part name="collection" type="xsd:string"/>
   <wsdl:part name="service"type="xsd:string"/>
   <wsdl:part name="lang" type="xsd:string"/>
   <wsdl:part name="nameToValsMap" type="apachesoap:Map"/>
   ... 
```

有什么方法可以使用 JavaScript 传递这种类型的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:18:06.053

`apachesoap:Map` is a complex type (an element) as opposed to `xsd:string` which is a value.

If I'm not mistaken `apachesoap` refers to the `http://xml.apache.org/xml-soap` namespace. You are probably calling some legacy SOAP web service that exposes a `java.util.Map` directly (very bad for interoperability if I'm not mistaken).

The WSDL `<types>` should contain the definition for the complex type `apachesoap:Map` and should look something like this in the message (the WSDL should tell you the exact form):

```
<nameToValsMap>
  <item>
    <key>...</key> 
    <value>...</value> 
  </item>
  ....
  <item>
    <key>...</key> 
    <value>...</value> 
  </item>
</nameToValsMap> 
```

# database - 处理 CodeIgniter 中的数据库错误 [错误号：1062]

> ID：14250221
> 
> 赞同：1
> 
> 时间：2013-01-10T03:07:21.440
> 
> 标签：database, codeigniter

执行数据库查询时出现以下错误：

> 发生数据库错误
> 
> 错误号：1062
> 
> 键“P​​RIMARY”的重复条目“1”
> 
> 更新`tbl_galeri`集`id_galeri`= '1', `galeri_kat_id`= '1', `nama`= 'Elyza Okiliyandass', `foto`= 0, `deskripsi`= 'Elyza Okiliyanda'
> 
> 文件名：C:\xampp\htdocs\indonesiausher\system\database\DB_driver.php
> 
> 行号：330

控制器：

```
 $pilih['id_galeri'] = $this->uri->segment(3);
        $dt_galeri = $this->app_model->getSelectedData("tbl_galeri",$pilih);
        foreach($dt_galeri->result() as $db)
        {
            $bc['id_galeri'] = $db->id_galeri;
            $bc['galeri_kat_id'] = $db->galeri_kat_id;
            $bc['nama'] = $db->nama;
            $bc['foto'] = $db->foto;
            $bc['deskripsi'] = $db->deskripsi;
            $bc['stts'] = "edit";
        }

        $this->load->view('backend/gallery/bg_input_usher',$bc);
    } 
```

模型：

`public function getSelectedData($table,$data) { return $this->db->get_where($table, $data); }`

如何处理这个错误？谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:37:03.903

一次尝试通过在查询中删除以下`id_galeri`类似内容`UPDATE`

```
UPDATE tbl_galeri SET galeri_kat_id = '1', nama = 'Elyza Okiliyandass', foto = 0, deskripsi = 'Elyza Okiliyanda' WHERE id_galeri = '1' 
```

**编辑**

可能你不需要更新`PRIMARY`&`AUTO INCREMENT`键。所以删除`id_galeri`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:41:35.160

我不认为你的 SQL 语句是完整的。您应该具有以下内容：

UPDATE 表 SET 字段 = '$value' WHERE id = '$id'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-10T12:42:48.573

您可以查看您的主键字段自动递增字段。如果在您的表中存储了任何数据，则首先进行数据备份，然后删除数据并 ALTER TABLE `table`CHANGE `your primary key field` `your primary key field`INT(11) NOT NULL AUTO_INCREMENT;

# verilog - 状态太多时如何构建FSM？

> ID：14250225
> 
> 赞同：0
> 
> 时间：2013-01-10T03:07:38.320
> 
> 标签：verilog, fsm

正如我从其他示例中看到的那样，我正在开发一个自动售货机项目并尝试构建一个状态机。我正在尝试制造的机器最多可容纳 100 美元。它需要五分钱、一角钱和四分之一。所以，我应该一一定义大约 2000 个状态。如何以更简单的方式构建 FSM？我只是想提出一个建议。

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T04:34:30.040

为什么你觉得机器现金余额的每一个可能值都需要一个单独的状态？这听起来像是对 FSM 的不当使用。

只需使用一个整数寄存器来保存机器的总余额，或者使用单独的寄存器来保存各种硬币和纸币的数量并从中计算总数。

状态可能是`process payment`,`dispense item`或`refund change`. 不是机器的平衡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T09:53:04.887

仅仅因为您有 2000 个“状态”并不意味着您必须在案例语句中枚举它们中的每一个。

正如其他人所提到的，您需要将一些状态存储在计数器中。

# solr - 如何配置 Nutch 只抓取 seeklist 中的 URL？（无需爬回）

> ID：14250226
> 
> 赞同：0
> 
> 时间：2013-01-10T03:07:41.120
> 
> 标签：solr, nutch

我有一个 url 种子列表包含超过 100000 个 url。我知道 nutch 不仅会抓取种子列表中的 url，还会抓取网站内的任何 url 链接。但是，我想知道有没有办法阻止这种行为？这样只需要抓取种子列表中指定的 url。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T06:18:41.290

在您的 nutch-site.xml 配置中，将“db.ignore.external.links”属性设置为 true。

这将忽略注入列表之外的域的任何 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T03:45:51.223

如果您使用[crawl 命令](http://wiki.apache.org/nutch/NutchTutorial#A3.1_Using_the_Crawl_Command)，请检查 depth 参数。

> -depth depth 表示从根页面开始应该爬取的链接深度。

使用它，您可以控制 Nutch 爬行所需的深度。值为 1 可能会将其限制在仅基本页面。

# c# - C# 应用程序需要在 Citrix 环境中引用远程工作站

> ID：14250234
> 
> 赞同：1
> 
> 时间：2013-01-10T03:09:04.130
> 
> 标签：c#, winforms, network-programming, citrix

我有一个 C# 独立的 Windows 窗体应用程序。它连接到需要工作站名称作为识别过程一部分的后台系统。我正在使用 Environment.MachineName 来获取它。但是，使用此应用程序的客户偶尔会在 Citrix 环境下运行它，并且当他们这样做时，他们希望它引用远程机器名称，而不是安装它的机器。我以前从未编写过这样的代码，并且对 Citrix 不熟悉（所以我开始飞速发展）。如何获取远程机器名称？任何想法都非常感谢。

提前非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T03:14:54.433

在 Citrix 系统上，有一个名为的环境变量`CLIENTNAME`，其中包含用户连接到 Citrix 的机器的名称。它只是一个常规的 Windows 环境变量，因此您可以使用`Environment.GetEnvironmentVariable`它来读取它。

你可以像这样快速而肮脏地做一些事情：

```
var workstationName = Environment.GetEnvironmentVariable("CLIENTNAME") ?? Environment.MachineName; 
```

对于更健壮的东西，Citrix 环境还具有`SESSIONNAME`标识 Citrix 会话的变量。这两个变量一起存在可能是在 Citrix 会话中运行的更好测试。

所以你可以做这样的事情：

```
public bool IsCitrixSession() {
    return Environment.GetEnvironmentVariable("CLIENTNAME") != null
        && Environment.GetEnvironmentVariable("SESSIONNAME") != null;
}

public string GetWorkstationName()
{
    return IsCitrixSession() ? Environment.GetEnvironmentVariable("CLIENTNAME")
                             : Environment.MachineName;
} 
```

# ios - 如何使用 NSDateFormatter 获取字符串“昨天”？

> ID：14250235
> 
> 赞同：10
> 
> 时间：2013-01-10T03:09:07.917
> 
> 标签：ios, nsdate, nsdateformatter

我想格式化我`NSDate`的，以便昨天发生的日期将显示为“昨天”。这可以使用完成`NSDateFormatter`吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-10T04:04:47.227

利用，

`[dateFormatter setDoesRelativeDateFormatting:YES]`

指示是否需要在短语中打印日期组件的输出，例如“Today”、“Tomorrow”等。但是，输出短语`locale`取决于`dateFormatter`

阅读[NSDateFormatter 类参考的](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)**管理自然语言支持**以获取更多详细信息。

# iphone - 绘制两个 CGMutablePathRef 的问题

> ID：14250238
> 
> 赞同：2
> 
> 时间：2013-01-10T03:09:33.640
> 
> 标签：iphone, ios, objective-c, ipad

所以我似乎无法绘制 2 CGMutablePathRef。这是代码：

```
CGRect mainRect = CGRectMake(2, 2, rect.size.width-4, 210);
    CGMutablePathRef mainPathRef = createRoundedRectForRect(mainRect, 4);

    if (self.imageExists_){

        [[UIColor colorWithRed:0 green:0 blue:0 alpha:1.0] set];

        CGContextAddPath(context, mainPathRef);
        CGContextClip(context);
        UIGraphicsBeginImageContext(mainRect.size);

        //need to flip the images to that it is drawn appropriately as CALayer uses a different coordinate system
        CGContextSaveGState(context);
        CGContextTranslateCTM(context, 0.0, 210);
        CGContextScaleCTM(context, 1.0, -1.0);
        CGContextDrawImage(context, mainRect, self.highlightItem_.highlightStoryImage.CGImage);

        UIImage* scaledImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
        [scaledImage drawAtPoint:CGPointMake(0, 0)];
        CGContextRestoreGState(context); 
```

这可以在我指定的路径上很好地绘制图像，剪裁。但后来我想在它下面画另一个圆角矩形，所以我做了：

```
 [[UIColor colorWithRed:0 green:0 blue:0 alpha:1.0] set];

     CGFloat colors [] = {
     0.20, 0.20, 0.20, 1.0,
     0.17, 0.17, 0.17, 1.0
     };

     CGColorSpaceRef baseSpace = CGColorSpaceCreateDeviceRGB();
     CGGradientRef gradient = CGGradientCreateWithColorComponents(baseSpace, colors, NULL, 2);
     CGColorSpaceRelease(baseSpace), baseSpace = NULL;

     CGContextSaveGState(context);

     CGRect commentRect = CGRectMake(2, 215, rect.size.width-4, rect.size.height - 215);
     CGMutablePathRef pathRef = createRoundedRectForRect(commentRect, 3);

     CGContextAddPath(context, pathRef);
     CGContextClip(context);

     CGPoint startPoint = CGPointMake(CGRectGetMidX(commentRect), CGRectGetMinY(commentRect));
     CGPoint endPoint = CGPointMake(CGRectGetMidX(commentRect), CGRectGetMaxY(commentRect));

     CGContextDrawLinearGradient(context, gradient, startPoint, endPoint, 0);
     CGGradientRelease(gradient), gradient = NULL;

     CGContextRestoreGState(context);

     CGContextAddPath(context, pathRef);
     CGContextDrawPath(context, kCGPathStroke); 
```

知道为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T06:48:26.617

您已将绘图剪切到第一个矩形，但在第二次绘制之前尚未重置剪切路径。我相信，您需要在调用第一个剪切路径之前保存图形状态。

您的第一个片段应如下所示：

```
CGContextSaveGState(...);
CGContextAddPath(...);
CGContextClip(...);
UIGraphicsBeginImageContext(...);
... rest of your drawing code...
CGContextRestoreGState(...); 
```

然后是第二个代码片段。

# php - PHP 和 Apache - 如何阻止系统写入访问日志？

> ID：14250241
> 
> 赞同：1
> 
> 时间：2013-01-10T03:09:44.933
> 
> 标签：php, apache, access-log

> **可能重复：**
> [禁用 apache 日志记录到 access.log](https://stackoverflow.com/questions/13552312/disabling-apache-logging-to-access-log)

我认为由于所有磁盘访问，访问日志本身会占用大量系统资源。如何防止任何访问日志数据写入我的 PHP/Apache 设置中的 access_log 文件？

谢谢！

# javascript - 无法弄清楚我的语法错误来自哪里

> ID：14250243
> 
> 赞同：-1
> 
> 时间：2013-01-10T03:09:54.307
> 
> 标签：javascript, syntax

我在这里有一个非常小的函数，我不断收到语法错误：“缺少;之前的语句”。我一遍又一遍地看这个，无法弄清楚我做错了什么。

```
generate() {
 var generateButton = document.getElementById("generateButton");
 generateButton.onclick = addBox;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T03:13:24.927

在 JavaScript 中，声明函数时必须使用`function`关键字：

```
function generate() {
    var generateButton = document.getElementById("generateButton");
    generateButton.onclick = addBox;
} 
```

你也可以这样做：

```
var generate = function() {
    var generateButton = document.getElementById("generateButton");
    generateButton.onclick = addBox;
} 
```

**编辑：**

正如@jerome.s 指出的那样，重要的是要记住，在第二个声明中，`generate`函数只能在声明**后**调用，而第一个没有这个要求

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T03:13:03.877

addBox 缺少关键字函数和函数定义

```
function generate() {
    var generateButton = document.getElementById("generateButton");
    generateButton.onclick = addBox;
}
function addBox()
{
    alert('button clicked');
} 
```

# java - Java小程序可以使用其他lib for web吗

> ID：14250247
> 
> 赞同：1
> 
> 时间：2013-01-10T03:11:12.783
> 
> 标签：java, security, jar, applet, digital-signature

这是小程序的网络代码

```
<applet code=test.class name=test archive="thisDemo.jar">
</applet> 
```

我写了一个类，该类访问本地数据，所以我使用key对applet进行签名。但我需要使用其他库，比如 Apache jar。

如何在applet中使用jar？

我可以在eclipse中使用Apache jar，但是当web调用applet时不能在applet中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T04:15:33.167

这对我有用：

```
<applet code=test.class name=test archive="thisDemo.jar,apache.jar" width="800" height="600">
</applet> 
```

并放在`apache.jar`旁边`thisDemo.jar`

您可能需要对每个依赖项 jar 进行签名：

[https://stackoverflow.com/questions/14229863/must-sign-all-jars-of-applet](https://stackoverflow.com/questions/14229863/must-sign-all-jars-of-applet)

# javascript - Chrome中奇怪的javascript记忆

> ID：14250254
> 
> 赞同：7
> 
> 时间：2013-01-10T03:11:56.573
> 
> 标签：javascript, google-chrome

我在 index.html 中有以下内容：

```
<html><body><pre>
<script src="program.js"></script>
</pre></body></html> 
```

以及 program.js 中的以下内容：

```
document.writeln(JSON.stringify(name));
name = "Bob"; 
```

第一次打开 index.html，产生了（输出 A）：

```
> "" 
```

然后，在刷新页面后，生成（输出 B）：

```
> "Bob" 
```

我从来没有在 Firefox 中看到输出 B。

回到 Chrome：但是，如果我使用“name”以外的其他变量，例如“val”：

```
document.writeln(JSON.stringify(val));
val = "Bob"; 
```

我得到一个例外：

```
Uncaught ReferenceError: val is not defined 
```

因此，由于“名称”恰好在全局范围内，我认为 Chrome 会以某种方式记住旧页面加载中的全局变量，并在新页面加载中设置这些变量的默认值。但是，如果我改用全局变量“状态”，我总是会看到输出 A。

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T03:28:53.380

看起来`name`全局上下文中的变量是 chrome 中的某种保留名称。这同样适用于变量，`status`因为它们只能`String`取值。

该`name`属性指的是窗口对象的名称，只要窗口处于活动状态，该对象就会被持久化，因此该值在多个文档之间共享。

例如：`var status = {}; alert(status)`将警告`[Object object]`与`name`也相同。

我没有任何参考文档来提供这种行为，但我注意到我的一个项目的错误报告导致了一些事情。

# playframework-2.0 - 我可以在 Play Framework 2 中为一个动作定义多个 HTTP 动词吗？

> ID：14250256
> 
> 赞同：3
> 
> 时间：2013-01-10T03:12:00.723
> 
> 标签：playframework-2.0

我有一个应用程序，需要我为 HEAD 和 GET 动词定义一个动作。另一个应用程序（Mozilla Open Badges）使用两个 HTTP 请求调用我的应用程序。它首先使用 HEAD 来验证我的 URL 看起来是否返回了正确类型的响应，然后对同一 URL 使用 GET 来获取内容。以下方法有效：

```
GET   /assertion                        controllers.Assertion.index
HEAD  /assertion                        controllers.Assertion.index 
```

...这行得通，但违反了 DRY（不要重复自己）。

我更喜欢这样的东西：

```
(GET, HEAD)   /assertion                        controllers.Assertion.index 
```

...但这是不允许的。如果 GET 免费为您提供 HEAD，我也会很高兴，但我可能不明白阻止 HEAD 执行 GET 操作的原因。

我想冗余的 Path-to-Action 定义并不是世界末日，但我喜欢尽可能保持代码整洁。

根据 HEAD 的 W3C 规范 (http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)，我相信 Play Framework 2 的行为不正确，因为不允许在为 GET 定义的路由上调用 HEAD：

```
9.4 HEAD

The HEAD method is identical to GET except that the server MUST NOT return a 
message-body in the response. The metainformation contained in the HTTP headers in
response to a HEAD request SHOULD be identical to the information sent in response 
to a GET request. This method can be used for obtaining metainformation about the
entity implied by the request without transferring the entity-body itself. This 
method is often used for testing hypertext links for validity, accessibility, and 
recent modification. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:56:40.623

在 Play 2.0+ 中，不可能使用通配符动词（如`*`或`ANY`或多值）（这可能是您的解决方案），因此在这种情况下，您使用的“ *DRY 违规*”只是官方方式。

**编辑**

其实你可以尝试另一种方法：

*   在`routes`文件的末尾放上 ' *catch-all HEAD* ` rulez
*   如果没有为`HEAD /path`' *catch-all* ' 指定路线，则将其发送到`autoHead(path: String)`行动。
*   [在那里，您可以使用WebServices](http://www.playframework.org/documentation/2.0.4/JavaWS)将所有标头从请求转发到`GET`路由版本，然后获取响应并仅返回标头。

我将这种方法的工作示例（仅限 Java）添加到[play-simple-rest](https://github.com/biesior/play-simple-rest)示例应用程序中。重定向重要的事情是：

*   [Application.autoHead(String originalPath)](https://github.com/biesior/play-simple-rest/blob/master/app/controllers/Application.java#L69-L100)：

```
public static Result autoHead(String originalPath) throws IllegalAccessException {

    WS.WSRequestHolder forwardedRequest = WS.url("http://" + request().host() + request().path());
    // this header will allow you to make additional choice i.e. avoid tracking the request or something else
    // see condition in index() action
    forwardedRequest.setHeader("X_FORWARD_FROM_HEAD", "true");

    // Forward original headers
    for (String header : request().headers().keySet()) {
        forwardedRequest.setHeader(header, request().getHeader(header));
    }

    // Forward original queryString
    for (String key : request().queryString().keySet()) {
        for (String val : request().queryString().get(key)) {
            forwardedRequest.setQueryParameter(key, val);
        }
    }

    // Call the same path but with GET
    WS.Response wsResponse = forwardedRequest.get().get();

    // Set returned headers to the response
    for (Field f : Http.HeaderNames.class.getFields()) {
        String headerName = f.get(null).toString();
        if (wsResponse.getHeader(headerName) != null) {
            response().setHeader(headerName, wsResponse.getHeader(headerName));
        }
    }

    return status(wsResponse.getStatus());
} 
```

*   [Application.forwardedFromHead()](https://github.com/biesior/play-simple-rest/blob/master/app/controllers/Application.java#L106-L108) +[使用它的条件](https://github.com/biesior/play-simple-rest/blob/master/app/controllers/Application.java#L29-L33)

```
public static boolean forwardedFromHead() {
    return (request().getHeader("X_FORWARD_FROM_HEAD") != null && "true".equals(request().getHeader("X_FORWARD_FROM_HEAD")));
} 
```

*   [和文件路由文件末尾的](https://github.com/biesior/play-simple-rest/blob/master/conf/routes#L34-L35)两个路由 HEAD

    ```
    HEAD    /               controllers.Application.autoHead(originalPath:String ?= "/")
    HEAD    /*originalPath  controllers.Application.autoHead(originalPath:String) 
    ```

PS 如果您想在 Scala 中编写类似的东西，那就太好了 :)

# git - 解决合并冲突：强制覆盖所有文件

> ID：14250257
> 
> 赞同：47
> 
> 时间：2013-01-10T03:12:02.197
> 
> 标签：git, git-merge, git-pull

我自己正在开发一个 git 存储库（所以是的，*我*知道这样做的含义和警告），并且不知何故，其中一棵树在不应该被推送后得到了提交。

现在我正试图撤退，它抱怨数百个合并冲突。

有没有办法告诉 git*强制*覆盖本地来自远程服务器的所有文件？有没有比做`git reset --hard HEAD~1`然后做拉更快的方法？

同样，有没有办法通过简单的合并来做同样的事情？我所看到的一切都建议在合并冲突解决阶段检查每个文件，但是对于数百个文件，手动这样做是不可能的。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-01-10T03:31:12.733

有三种简单的解决方案可以复制远程存储库中的最后一个版本，丢弃您在本地所做的所有更改：

1.  丢弃您的存储库并再次克隆。这是最简单的解决方案，但是如果您的存储库很大，则可能需要很长时间，并且可能需要额外的努力，例如重新`configure`编译等。

2.  丢弃本地更改，`git reset --hard <hash>`然后执行`git pull`. 问题是您需要首先找到在您试图避免的任何更改历史之前的提交。重置为该提交哈希后，执行`git pull`.

3.  执行 a`git fetch`将更新带到远程分支的本地引用（通常是 origin/master），然后执行`git reset --hard`传递此引用，即`git reset --hard origin/master`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-10-04T06:20:39.950

```
git reset --hard {remote_repository_name}/{branch_name} 
```

例子：

```
git reset --hard upstream/branch1 
```

如果您正在使用分支，则可以使用上面的代码。但在此之前，您必须将（上游或源）设置为本地存储库，

```
git remote add upstream https://github.com/lakini/example.git 
```

这里，[https://github.com/lakini/example.git](https://github.com/lakini/example.git)是远程上游存储库。

与此相同，我们也可以在远程存储库（源）中工作。

```
git reset --hard origin/branch1 
```

# database - 如何在 Eclipse 中从 Android 连接 MySQL 数据库？

> ID：14250258
> 
> 赞同：0
> 
> 时间：2013-01-10T03:12:03.227
> 
> 标签：database, eclipse

嗨，我对 Android 开发比较陌生。

我正在创建一个 Android 应用程序，使用户能够下订单。

我还创建了一个功能齐全的网站+数据库，其中包括登录、购物车和累计总金额。

问题是，我如何使用与我的网站相同的数据库将其链接到我的 android 应用程序？（这应该使已经在网站上注册的用户使用相同的用户名+密码并登录android应用程序。此外，当用户选择商品时，购物车会检测到它们并自动计算总金额）。

请帮我。

非常欣赏

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T03:17:15.773

让您的应用程序联系您的数据库。也许一个 SOAP 实现或类似的东西就足够了。[http://en.wikipedia.org/wiki/SOAP](http://en.wikipedia.org/wiki/SOAP)。

# meteor - 为什么流星撤消对嵌套在观察者方法中的集合的更改？

> ID：14250259
> 
> 赞同：4
> 
> 时间：2013-01-10T03:12:10.770
> 
> 标签：meteor

我正在尝试实现这样的事情：

```
/* We use the command pattern to encode actions in
   a 'command' object. This allows us to keep an audit trail
   and is required to support 'undo' in the client app. */
CommandQueue.insert(command);

/* Queuing a command should trigger its execution. We use
   an observer for this. */
CommandQueue
   .find({...})
   .observe({
       added: function(command) {
           /* While executing the action encoded by 'command'
              we usually want to insert objects into other collections. */
           OtherCollection.insert(...)
       }
   }); 
```

不幸的是，meteor 似乎保持了在`OtherCollection`执行交易时的先前状态`CommandQueue`。对`OtherCollection`. 但是，一旦事务完成，就会恢复`CommandQueue`先前的状态，并且我们的更改就会消失。`OtherCollection`

任何想法为什么会发生这种情况？这是预期的行为还是错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T23:03:26.987

这是预期的行为，尽管它有点微妙，并且不能保证（只是一个实现细节）。

当命令插入时，观察的回调立即触发`CommandQueue`。因此，插入`OtherCollection`发生在`CommandQueue.insert`方法运行时，作为同一调用堆栈的一部分。这意味着`OtherCollection`插入被认为是插入的本地“模拟”的一部分`CommandQueue`，并且不会发送到服务器。服务器运行`CommandQueue`插入并将结果发回，此时客户端丢弃模拟结果并应用从服务器发送的结果，使`OtherCollection`更改消失。

更好的方法是编写自定义方法。就像是：

```
Meteor.methods({
  auditedCommand: function (command) {
    CommandQueue.insert(command);

    var whatever = someProcessing(command)
    OtherCollection.insert(whatever);
  }
}); 
```

然后：

```
Meteor.call('auditedCommand', command); 
```

这将立即显示在客户端上（延迟补偿），并且更安全，因为客户端无法插入到`CommandQueue`而不添加到`OtherCollection`.

**编辑**：这可能会改变。添加的回调不应真正被视为 CommandQueue.insert 的本地模拟的一部分。这就是它现在的工作方式。也就是说，自定义方法可能仍然是更好的方法，即使其他人将命令添加到命令队列，它也可以工作，并且更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T04:08:32.497

我不确定您的观察行为，但我们使用服务器端[允许](http://docs.meteor.com/#allow)方法完成了同样的事情：

```
CommandQueue.allow ({
  insert: function (userId, doc) {
    OtherCollection.insert(...);
    return (userId && doc.owner === userId);
  }
}); 
```

这也比把这个逻辑放在客户端更安全。

# c - C: 分配比需要更多的内存有好处吗？

> ID：14250261
> 
> 赞同：3
> 
> 时间：2013-01-10T03:12:25.363
> 
> 标签：c, memory-management

我正在处理一个字符串密集型的 Windows C 项目：我需要将标记的字符串从一种形式转换为另一种形式。基本流程是这样的：

```
DWORD convert(char *point, DWORD extent)
{
   char *point_end = point + extent;
   char *result = memory_alloc(1);
   char *p_result = result;

   while (point < point_end)
   {
      switch (*point)
      {
        case FOO:
          result_extent = p_result - result;
          result = memory_realloc(12);
          result += result_extent;
          *p_result++ = '\n';
          *p_result++ = '\t';
          memcpy(result, point, 10);
          point += 10;
          result += 10;
          break;
        case BAR:
          result_extent = p_result - result;
          result = memory_realloc(1);
          result += result_extent;
          *result++ = *point++;
          break;          
        default:
          point++;
          break;
      }
   }

   // assume point is big enough to take anything I would copy to it
   memcpy(point, result, result_extent);

   return result_extent;
} 
```

memory_alloc() 和 memory_realloc() 是假函数，以突出我的问题的目的。我事先不知道结果“字符串”会有多大（从技术上讲，它不是我正在使用的 C 样式/空终止字符串，只是指向内存地址和长度/范围的指针），所以我' 需要动态调整结果字符串的大小（它可能大于输入，也可能更小）。

在我最初的传球中，我使用 malloc() 为第一个字节/字节创建空间，然后在需要附加另一个字节/少数字节时使用 realloc() ......它有效，但感觉这种方法是不必要的锤击操作系统，并可能导致内存中的字节一遍又一遍地移动。

所以我进行了第二次传递，它确定了 result_string 在转换的单个单元之后将持续多长时间（上面用 FOO 和 BAR 案例说明）并选择一个“首选分配大小”，例如 256 字节。例如，如果 result_extent 是 250 字节并且我处于 FOO 情况，我知道我需要将内存增加 12 字节（换行符、制表符和输入字符串中的 10 字节）——而不是重新分配 260 字节的内存，我'd 达到 512 字节，对冲我可能会继续添加更多数据的赌注（因此我可以为自己节省一些对 realloc 的调用）。

关于我的问题：后一种想法是合理的，还是编译器/操作系统可能已经为我处理的过早优化？除了不浪费内存空间之外，根据需要将内存重新分配几个字节是否有优势？

我对在单个转换实例中可能期望的内容有一些粗略的想法，例如，更糟糕的情况可能是带有几百字节标记的 2MB 输入字符串，这将导致将 50-100 字节的数据添加到结果中字符串，每个标记实例（例如，200 次重新分配将字符串拉伸 50-100 字节，另外 100 次重新分配是由简单地将输入字符串中的数据复制到结果字符串中引起的，除了标记之外）。

对此主题的任何想法将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T03:21:05.677

您可能知道，`realloc`可以在每次通话时移动您的数据。这会产生额外的副本。在这种情况下，我认为分配一个很可能足以满足操作（上限）的大缓冲区要好得多。最后，您可以为结果分配确切的数量并进行最终复制/免费。这更好，根本不是过早的优化。在这种情况下，使用 realloc 的 IMO 可能被认为是过早的优化。

# javascript - Javascript - 存储/使用我的大型对象列表的有效方法

> ID：14250264
> 
> 赞同：3
> 
> 时间：2013-01-10T03:12:39.447
> 
> 标签：javascript, arrays, list, object

我正在创建一个在线指南。它将调查用户，并根据他们的回答，输出最适合他们需求的列表。

我将收集大量对象和属性，但在我花太多时间之前，我想解决一些问题：

为了让您了解我的目标，这里有一个使用交互式指南查找旅行目的地的示例：

给用户的问题：

```
<form name="equator" action="">
<p>What side of the equator do you want to visit?</p>
<input type="radio" name="equator" value="north">North<br />
<input type="radio" name="equator" value="south">South<br />
</form>
<br />
<form name="english" action="">
<p>Does English need to be the first language?</p>
<input type="radio" name="english" value="yes">Yes<br />
<input type="radio" name="english" value="no">No<br />
</form>
<br />
<form name="beach" action="">
<p>Do you want a nearby beach?</p>
<input type="radio" name="beach" value="yes">Yes<br />
<input type="radio" name="beach" value="maybe">Maybe<br />
<input type="radio" name="beach" value="no">No<br />
</form> 
```

以下是我计划创建对象列表的方式：

```
destinations = [

{
    name: "Moscow", equator: "north", english: "no", beach: "no"
},

{
    name: "Lima", equator: "south", english: "no", beach: "no"
},

{
    name: "Nantucket", equator: "north", english: "yes", beach: "yes"
},

] 
```

在我正在处理的项目中，对象列表实际上将有数百个，最多有两打属性。也就是说，这是我的担忧（如果它影响你的答案，我应该注意我的 Javascript 经验只能追溯到大约两周）：

*   考虑到它的潜在大小，我上面的示例是存储对象列表的有效方法吗？如果没有，你能推荐一些更好的东西吗？
*   到目前为止，我对 Javascript 的体验包括浏览“w3schools”教程和创建迷你项目以感受该语言......到目前为止，我创建的每个脚本都已即时处理。考虑到我的项目（如概述），我是否应该担心任何性能损失？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T03:24:01.503

[*数组*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)和[*对象*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object)擅长存储这样的数据。在 JavaScript 中， *Array*只是*Object*的一种特定类型。

您应该考虑的是如何使数据尽可能“基本”；即，如果一个答案只有两个答案，请考虑使用布尔值`true`或`false`. 如果它更多，那么下一站应该是整数`0`, `1`, ..[在 JavaScript 中的某些情况下，整数比布尔值更有效](https://stackoverflow.com/q/7221963/1615483)。我试图传达的想法是，通常只在您实际需要字符串时才使用字符串更有效，例如名称。

学习 JavaScript 的最佳资源之一可能是[Codecademy](http://www.codecademy.com/tracks/javascript)，w3schools 不是一个好的资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T03:19:49.007

就像 Joseph Silber 在评论中所说的那样，您需要将类型更改为布尔值，即 IE `english`：或`beach``true``false.`

至于存储你的对象，理论上我喜欢插件。[查看www.knockoutjs.com](http://www.knockoutjs.com)上的教程。首先，他们将向您展示如何创建具有`name`、`equator`、`english`和`beach`属性的对象。它还将向您展示您可以使用这些数据做的许多很酷的事情，这些事情将改善用户体验。

编辑：抱歉，要直接回答您的问题，请查看 JSON。您已经走在正确的轨道上，我只是不确定您是如何生成数组的。

# javascript - dojo.xhrPost 修复 Access-Control-Allow-Origin 问题

> ID：14250265
> 
> 赞同：0
> 
> 时间：2013-01-10T03:12:47.137
> 
> 标签：javascript, xmlhttprequest, dojo

我正在尝试使用 dojo 使用我的子域发布数据，但 dojo 向我返回此错误。

> XMLHttpRequest 无法加载[http://uri.com/](http://uri.com/)来源 [http://sub.uri.com/](http://sub.uri.com/)是 Access-Control-Allow-Origin 不允许的。

```
 var form= dojo.byId("form");
    dojo.connect(formSignIn, "onsubmit", function(event){
        event.preventDefault();
        var xhrArgs = {
          form: form,
          handleAs: "text",
          load: function(data){
            //dojo.byId("response").innerHTML = "Form posted.";
          },
          error: function(error){
            //dojo.byId("response").innerHTML = "Form posted.";
          }
        }
        var deferred = dojo.xhrPost(xhrArgs);
        console.log(deferred);
    }); 
```

这是我的代码。dojo.xhrPost 中是否有任何可用选项可以让我访问我的主网站，以便我可以处理我的 POST？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T03:25:18.150

查看文档上的 JSONP 信息：

[http://dojotoolkit.org/reference-guide/1.8/dojo/request/script.html](http://dojotoolkit.org/reference-guide/1.8/dojo/request/script.html)

还有本教程：

[http://dojotoolkit.org/documentation/tutorials/1.8/jsonp/](http://dojotoolkit.org/documentation/tutorials/1.8/jsonp/)

作为临时解决方案，您可以禁用 Chrome 的安全性以允许使用参数的跨域 JavaScript 请求`--disable-web-security`。看到[这个问题](https://stackoverflow.com/questions/3102819/chrome-disable-same-origin-policy)。

# html - 垂直滚动而不是水平滚动时元素停留在顶部

> ID：14250266
> 
> 赞同：-1
> 
> 时间：2013-01-10T03:12:50.213
> 
> 标签：html, css

所以我正在开发一个 html 和 css 项目，我希望我的工具栏在查看器向下滚动时留在页面上，但是当窗口太窄而无法显示我的完整工具栏时，我希望能够水平滚动看看剩下的

顺便说一句，如果有帮助，我使用了一个表格元素来制作工具栏

谢谢再见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T03:18:03.323

没那么难。。

您只需要：

```
position: fixed; 
```

为了使它能够在窗口狭窄时水平滚动，只需设置一些任意像素长度（无论您希望工具栏有多宽）。

# web-applications - HTTP 流与 Comet 的服务器推送有何不同？

> ID：14250267
> 
> 赞同：0
> 
> 时间：2013-01-10T03:12:54.827
> 
> 标签：web-applications, comet, long-polling, server-push, http-streaming

我想在我的 Java Web 应用程序中实现服务器推送。HTTP Streaming 是我可以打开与客户端的连接，并且它始终打开并在服务器获取数据时发送数据。1\. 但这与彗星有什么不同？2\. 我想使用服务器推送而不使用 Web Sockets。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:00:48.367

HTTP 流是 Comet 的一部分。Comet 术语是用来指 HTTP 流式传输和 HTTP 长轮询的。请参阅此答案以获取更多详细信息：[Comet 现在是否已被服务器发送事件和 WebSocket 淘汰？](https://stackoverflow.com/questions/12078550/is-comet-obsolete-now-with-server-sent-events-and-websocket/12082152#12082152)

您可以使用现成的 Comet 服务器。其中有很多，包括商业和免费的，包括封闭托管和开源解决方案。其中一些支持 Comet 和 WebSockets。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:56:19.813

> 1.  我想在不使用 Web 套接字的情况下使用服务器推送。如何做到这一点？

Servlet 规范 3.0 支持异步请求，可以满足您的要求。但是，在此基础上实现服务器推送系统并不简单。我的建议是使用[Atmosphere](https://github.com/Atmosphere/atmosphere)或[Portal](https://github.com/flowersinthesand/portal)框架。

# encoding - 为什么 Notepad++ 可以正确显示 ANSI 编码的非 ASCII 字符而 Sublime Text 2 不能？

> ID：14250269
> 
> 赞同：2
> 
> 时间：2013-01-10T03:13:18.727
> 
> 标签：encoding, notepad++, sublimetext2

我使用 utf-8 作为 notepad++ 和 sublime text 2 中新创建文件的默认编码。

在 notepad++ 中创建一个只包含 ASCII 字符的新文件，保存并关闭它。在记事本++中重新打开它，检查“编码”菜单，它是“ANSI编码”。然后我在文件中添加了一些非ASCII字符（例如：中文）并保存它，它仍然是ANSI编码但显示正确（在Windows默认记事本中也正确），但是用sublime text 2打开文件，出现乱码。

当使用 sublime text 2 做同样的事情时，当输入非 ASCII 字符时，文件会自动转换为 utf-8。

那么为什么notepad++和sublime text 2表现不同，为什么notepad++能正确显示ANSI编码的非ASCII字符呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T04:14:59.577

ANSI 不是一种编码，是一个非常模糊的术语。它通常表示 Windows-1252 或活动操作系统代码页，可能是*ANSI/OEM 简体中文（中国、新加坡）；简体中文 (GB2312)*为您服务。

Sublime Text 2 无法检测除 UTF-8、UTF-16 和 ASCII 以外的编码。在这种情况下，默认的回退编码是 Windows-1252，而不是活动系统代码页。

# java - 在 IMAP 帐户中，如何创建仅包含交换附件的邮件的精确副本？

> ID：14250272
> 
> 赞同：1
> 
> 时间：2013-01-10T03:13:23.850
> 
> 标签：java, python, email, command-line, imap

在 IMAP 邮件帐户中，我想减小带有大图像作为附件的邮件的大小。要以编程方式为给定消息执行此操作，我想我需要

1.  将消息复制到本地
2.  缩小附加图像的大小。（我当然知道如何做这部分。）
3.  将新消息写回 IMAP 存储
4.  删除原始消息

最简单的方法是什么？如果我编写一个应用程序，我想使用 java 或 python 框架。但也许已经有一个（命令行）工具可以做到这一点？有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:04:25.763

在 Python 中，这应该不会太难。有`imaplib`, 随 python 一起提供。网上有很好的教程，例如，[here](http://yuji.wordpress.com/2011/06/22/python-imaplib-imap-example-with-gmail/)，尤其是[here](http://www.doughellmann.com/PyMOTW/imaplib/)

```
import imaplib
mail = imaplib.IMAP4_SSL('imap.gmail.com')
mail.login('username@gmail.com', 'password')
mail.select("inbox") 

...

result, data = mail.fetch(email_id, "(RFC822)")

...

c.append('inbox', '', imaplib.Time2Internaldate(time.time()), str(new_message)) 
```

我的示例只是向您展示这些概念。有关详细信息，请参阅教程

顺便说一句：您可以在 Python 中使用 PIL（Python Imaging Library）来调整图像大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T02:02:29.813

从[Thorsten Kranz 的回答](https://stackoverflow.com/a/14252475/65889)开始，我对 python 中的 IMAP 框架进行了更多研究，发现[`IMAPclient`](http://imapclient.freshfoo.com/)了一个更易于使用的 IMAP 库。它基于`imaplib`，但以更 Pythonic 的方式向您呈现数据。

# c# - 如何访问视图模型中的查询字符串值？

> ID：14250275
> 
> 赞同：3
> 
> 时间：2013-01-10T03:13:42.707
> 
> 标签：c#, silverlight, mvvm, query-string, silverlight-5.0

我想将检查的 Id ( `checkedParcels`) 列表传递到另一个页面以相应地显示详细信息列表。

为此，在第一个 ViewModel 中，我实现了可以导航到另一个页面的命令。这是该代码：

```
Uri uri = new Uri("/UnitListForParcelPage?checkedParcel=" + checkedParcels,UriKind.Relative);
navigationService.NavigateTo(uri); 
```

我可以导航到第二页，这是浏览器中显示的地址：

> `http://example.com/PropMgmtTestPage.aspx#/UnitListForParcelPage?checkedParcel=System.Linq.Enumerable+WhereEnumerableIterator%601%5BPropMgmt.ParcelServiceRef.Parcel%5D`

我的问题是我正在使用 ViewModel 在此页面上执行操作，但我找不到任何方法来访问通过查询字符串传递的值。

**更新**：在页面代码隐藏我添加了以下代码：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    string PSTR = NavigationContext.QueryString["checkedParcel"];
    MessageBox.Show(PSTR);
} 
```

MessageBox 显示正确的值现在我只想将它绑定到 viewmodel 属性

我已经使用此方法将视图模型绑定到视图：

```
<navigation:Page.Resources>
    <helpers:SimpleViewModelLocator ViewModelKey="UnitTransFormViewModel" x:Key="viewModelLocator"/>
</navigation:Page.Resources>
<navigation:Page.DataContext>
    <Binding Source="{StaticResource viewModelLocator}" Path="ViewModel"/>
</navigation:Page.DataContext> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T13:44:52.520

另一种方法是创建一个公共属性并使用 checkedParcel 的值对其进行分配，现在您可以在 ViewModel Cheers 中使用它:)

**更新：**

只做一个

```
public static string checkedParcel = string.Empty; 
```

在 App.Xaml.cs 中

当你打电话时

```
App.checkedParcel = checkedParcels;
this.navigationService.NavigateTo(uri); 
```

在此之前，您需要将值赋予 App.checkedParcel =checkedParcels;

并在您的导航页面方法中

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    string PSTR = App.checkedParcel;
    MessageBox.Show(PSTR);
} 
```

希望你能理解。您可以通过创建一个属性并相应地设置来实现这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:13:43.503

您可以使用广播服务（如果您使用 MVVM Light，例如 Messenger）发送“更改视图”通知以及您的参数。

然后，您可以轻松地让 View 做出反应（导航）并且 ViewModel 获取它的参数。

# c# - 尝试动态显示用户控件，如何实现？

> ID：14250279
> 
> 赞同：-5
> 
> 时间：2013-01-10T03:14:35.093
> 
> 标签：c#, .net, winforms

我想利用一个自定义控件（用户界面就像一个按钮）在用户点击它时动态显示一个树。当自定义控件失去焦点时隐藏树。如何得到它？（另外不能使用Form控件。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:51:54.323

创建一个从一开始就隐藏的控件（树）。

```
yourControl.Visible = false; 
```

创建你的按钮和你的点击事件处理程序

```
yourButton.Click += yourButton_Click;
private void yourButton_Click(object sender, EventArgs e)
{
    yourControl.Visible = true;
} 
```

要在失去焦点时隐藏，您需要创建另一个方法/事件处理程序：

```
yourButton.LostFocus += yourButton_LostFocus;
    void yourButton_LostFocus(object sender, EventArgs e)
    {
        yourControl.Visible = false;
    } 
```

# c++ - 使用什么技术注入 DLL？

> ID：14250280
> 
> 赞同：0
> 
> 时间：2013-01-10T03:14:41.023
> 
> 标签：c++, dll-injection

我正在尝试将 DLL 注入另一个进程，但没有取得多大成功。在进行研究时，我发现有不止一种方法可以做到这一点。问题是：什么是最佳方式或者我应该什么时候使用让我们说 CreateRemoteThread() 而不是 LoadLibrary()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T03:19:17.090

请看[弯路](http://research.microsoft.com/en-us/projects/detours/)？

还有这个 - [http://www.codeproject.com/Articles/30140/API-Hooking-with-MS-Detours](http://www.codeproject.com/Articles/30140/API-Hooking-with-MS-Detours)

# ruby - .map(&:chomp) 到底是做什么的？

> ID：14250281
> 
> 赞同：1
> 
> 时间：2013-01-10T03:14:49.583
> 
> 标签：ruby

> **可能重复：**
> [你如何称呼 Ruby 中的 &: 运算符？](https://stackoverflow.com/questions/2259775/what-do-you-call-the-operator-in-ruby)

我总是看到'.map(&:chomp)'

我知道 chomp 和 map 做什么，但我想知道 &: 做什么，我想知道为什么在谷歌搜索 30 分钟后我无法在网上找到它.....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T03:17:48.720

它是[`Symbol#to_proc`](http://pragdave.pragprog.com/pragdave/2005/11/symbolto_proc.html), 它将符号转换为一个 proc，它尝试在其参数上调用给定的方法，并返回结果。

```
x = :reverse.to_proc

x.call("asdf") # "fdsa", like calling "asdf".reverse 
```

在您的情况下，`.map(&:chomp)`相当于`.map { |x| x.chomp }`.

如果你在谷歌上找不到它，那是因为你在谷歌上搜索错了。这是一个著名的 Ruby 习语。

# twitter - 使用 ios6 twitter 框架执行 oauth

> ID：14250284
> 
> 赞同：1
> 
> 时间：2013-01-10T03:15:02.863
> 
> 标签：twitter, ios6

是否可以通过 ios6 twitter 框架对 twitter 进行 oauth 登录，而不必使用非官方的第三方库，例如 twitter+oauth。使用 ios6 官方 twitter 框架更好，因为它有据可查。任何帮助表示赞赏。

# vb6 - 在VB6中初始化一个UDT数组

> ID：14250287
> 
> 赞同：0
> 
> 时间：2013-01-10T03:15:23.500
> 
> 标签：vb6, initialization, user-defined-types

我已经声明了一个 UDT，我需要用 UDT 的特定记录初始化一个数组，我将如何在模块级别执行此操作。

这是我尝试过的

```
Public Type MyType
    id     As Integer
    name   As String
    values As Double
End Type

private MY_TYPES(1) As MyType
My_TYPES(0) = newMyType(1, "Item 1", 15.9)
My_TYPES(1) = newMyType(2, "Item 2", 30.2)

Private Function newMyType(byval id as Integer, byval name as String, _ 
                           byval v as Double) As MyType
    Dim t As MyType
    t.id = id
    t.name = name
    t.value = v
    newMyType = t
End Function 
```

我得到的错误是`Invalid outside procedure`

如您所见，我尝试重现 java 的静态初始化，`Collection`例如 a`List`或 `Set`

我想将集合公开为常量，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T08:43:17.737

您必须将以下 2 行放在 sub 中，然后调用 sub 来初始化 udt

```
My_TYPES(0) = newMyType(1, "Item 1", 15.9)
My_TYPES(1) = newMyType(2, "Item 2", 30.2) 
```

或者您可以将这两行放在 if..then 内的工作子中，并带有模块级 init boolean

# java - 在 sql jdbc 查询中使用 datediff

> ID：14250288
> 
> 赞同：0
> 
> 时间：2013-01-10T03:15:30.283
> 
> 标签：java, sql, jdbc, datediff

我正在尝试使用以下语句创建 JDBC 查询

```
String query = "SELECT COLUMN1,DATECOLUMN2 FROM tableName +
            "where datediff(d,DATECOLUMN2,getdate()) <= 1";
st = conn1.createStatement();
rs = st.executeQuery(query);  //receiving error here 
```

我收到以下错误消息

```
java.sql.SQLException: "d" is not a recognized table hints option. If it is intended as a parameter to a table-valued function or to the CHANGETABLE function, ensure that your database compatibility mode is set to 90. 
```

我确定查询由于某种原因无法识别 datediff 函数我不知道为什么，因为我以前在同一个应用程序中使用 HQL 并检索值。

为了尝试使用我使用的替代功能

```
{fn TIMESTAMPADD( SQL_TSI_DAY, 1, CURRENT_TIMESTAMP)} 
```

但它也失败了我后来发现这仅用于德比数据库

有人可以帮助我使用正确的 sql 函数来使用 JDBC 将日期与当前日期进行比较

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T03:17:25.487

```
String query = "SELECT COLUMN1,DATECOLUMN2 FROM tableName "+
               "where datediff(day,DATECOLUMN2,getdate()) <= 1"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T09:29:54.963

The posted snippet doesn't have a closing double quote between `tableName` and `+`, but I figure that is just a typo. However, in your real code, where precisely is the double quote? Is it directly after `tablename`, like this

```
String query = "SELECT COLUMN1,DATECOLUMN2 FROM tableName" + 
```

or after the space that follows `tablename`, like this

```
String query = "SELECT COLUMN1,DATECOLUMN2 FROM tableName "+ 
```

It is very likely the former, because in that case the resulting query would look exactly the way as to cause the error you are getting. Take a look at this:

```
SELECT COLUMN1,DATECOLUMN2 FROM tableNamewhere datediff(d,DATECOLUMN2,getdate()) <= 1 
```

You can see that `where` merges with the table name and `datediff` becomes an alias. What follows is interpreted as table hints. (You can specify table hints without WITH in older versions of SQL Server/older compatibility levels.) Consequently, SQL Server stumbles over `d`, as that is indeed an incorrect table hint.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T03:54:43.380

“d”后面的逗号应该是一个点：

```
where datediff(d.DATECOLUMN2,getdate())
--------------- ^ dot here 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T03:32:21.773

from 之前有一个逗号。根据您对 SQL Server 运行此错误消息。

```
String query = "SELECT COLUMN1,DATECOLUMN2 FROM tableName " 
              +" where datediff(d,DATECOLUMN2,getdate()) <= 1"; 
```

# facebook - 是否可以在不向公众公开我们的访问令牌的情况下从客户端向 Facebook Graph API 发送请求？

> ID：14250291
> 
> 赞同：1
> 
> 时间：2013-01-10T03:15:54.233
> 
> 标签：facebook, facebook-graph-api, facebook-oauth, facebook-access-token, app-secret

[我的问题与这个问题](https://stackoverflow.com/questions/7633234/get-public-page-statuses-using-facebook-graph-api-without-access-token)有关，但不完全是。

我目前正在开发一个企业目录网站（类似于 Yelp），其中企业有自己的页面。让我们称之为这个应用程序`DIRECTORY_APP`。

企业可能希望在我们目录上托管的页面上显示其最新的 Facebook 状态更新。假设我们有一个名为 的企业`BIZ_1`。假设这些页面是公共页面。

显然 Facebook Graph API 可用于此目的。因此，我可以向 Facebook 发送请求以检索以下内容的最新状态更新`BIZ_1`：

```
https://graph.facebook.com/BIZ_1_PROFILE_ID/posts?
        access_token=DIRECTORY_APP_ACCESS_TOKEN
        &callback=callbackName 
```

但是，如果我从客户端使用它，我们网站的访问令牌将暴露给公众，所以这不是一个合理的解决方案。

现在在[上述问题](https://stackoverflow.com/questions/7633234/get-public-page-statuses-using-facebook-graph-api-without-access-token)中，Anatoly 提到我们可以通过首先发送此请求来检索访问令牌：

```
https://graph.facebook.com/oauth/access_token?
        client_id=YOUR_APP_ID&client_secret=YOUR_APP_SECRET
        &grant_type=client_credentials 
```

但是，如果有人检查网络日志，这也会暴露我们网站的访问令牌（这是正确的还是不同类型的访问令牌？）。此解决方案还公开了我们网站的应用程序机密（这安全吗？）。

总而言之，在不要求浏览用户首先登录 Facebook 的情况下，我可以从客户端检索网页的最新状态更新的安全方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T23:59:49.610

也许这里的聪明技巧是使用社交插件。[Like Box](https://developers.facebook.com/docs/reference/plugins/like-box/ "喜欢盒子")会做你想做的事，没有任何问题。但是，它不是可定制的。即便如此，也可以让它在页面上看起来不错！

它还会跳过您提到的任何登录问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T13:14:17.393

经过一番谷歌搜索后，我找到了答案。简而言之，答案是否定的。

[以下是Facebook](https://developers.facebook.com/docs/concepts/login/access-tokens-and-types/)的摘录：

# 安全最佳实践

## App Secret 和 App Access Token

App Secret 在某些登录流程中用于生成访问令牌，并且 Secret 本身旨在保护您的 App 的使用仅限于那些受信任的人。该秘密可用于轻松创建应用访问令牌，该令牌可以代表应用的任何用户发出 API 请求，这使得应用秘密不被泄露非常重要。

因此，App Secret 或 App Access 令牌不应包含在任何代码中，任何代码都不能被除应用程序开发人员之外的任何人访问。这适用于所有不受保护的代码方法，例如可以反编译的客户端代码（例如 HTML 或 Javascript）或本机应用程序（例如 iOS、Android 或 Windows 桌面应用程序）。

我们建议仅应直接从您的应用服务器使用应用访问令牌，以提供最佳安全性。对于原生应用，我们建议应用与您自己的服务器通信，然后服务器使用应用访问令牌向 Facebook 发出 API 请求。因此，如果您在 App Dashboard 的 Advanced Settings 下的“App Type”设置为 Native/Desktop，我们假设您的原生应用在二进制文件中包含 App Secret 或 App Access Token，并且我们不允许使用签名的调用应用访问令牌以继续。API 的行为就像没有提供访问令牌一样。

如果您的 App Secret 被泄露，您应该立即在 App Dashboard 的基本设置中重置它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T06:46:45.463

> 我可以从客户端检索网页的最新状态更新，而无需要求浏览用户首先登录 Facebook

你不能在没有登录的情况下做到这一点。

而且我猜访问令牌**没有**暴露。

# php - 如何在 PHP 中使用图像链接模仿 jQuery.append()

> ID：14250292
> 
> 赞同：1
> 
> 时间：2013-01-10T03:15:58.260
> 
> 标签：php, image

我正在构建一个数据库支持的网站，该网站根据关键字搜索动态显示缩略图。现在，我正在使用`jQuery.append()`基于搜索创建缩略图和链接。这具有将搜索和结果页面合二为一的优点。

对于开始开发的目的，这具有快速、易于设置并具有可靠结果的优点。但是这种方法依赖于浏览器来完成繁重的工作，我想优化这个功能以更多地关注服务器。如何将此过程卸载到服务器？

# javascript - 与 Google maps V3 API 和 MooTools 冲突

> ID：14250293
> 
> 赞同：0
> 
> 时间：2013-01-10T03:16:02.950
> 
> 标签：javascript, google-maps, mootools

我与 Google Maps v3 API 和 Mootools 有冲突。出于某种原因，当加载地图所在的页面时，它看起来很好，但大约 10 秒后，地图以及除了 1 个针点之外的所有内容都消失了。

你可以在这里看到它：http: [//goo.gl/Sr0b2](http://goo.gl/Sr0b2)

如果我删除加载在页脚中的 mootools.js，问题就会消失，但是我的 WordPress 主题上的一些 javascript 不起作用，例如标题中的下拉菜单，因此删除 mootools 不是一个选项。

任何人都知道可能导致冲突的原因以及我该如何解决？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T20:07:28.407

我通过为地图使用 iframe 解决了这个问题，这样页面上的 mootools.js 不会影响地图脚本。我通常不使用 iframe，但在这种情况下，它不会影响网站的 SEO 或其他任何内容，这是一个完美的解决方案。因此，如果您有同样的问题，您可以在自己的页面上加载地图（除了地图之外什么都没有），然后将其插入到任何地方

# android - 如何在Android上通过A_app调用B_app

> ID：14250294
> 
> 赞同：0
> 
> 时间：2013-01-10T03:16:17.337
> 
> 标签：android, android-intent

我写了 2 个应用程序，A_app 和 B_app。
在 A_app 中，我想调用 B_app 并启动​​ B_app 的 CalledActivity。
但是 B_app 的 MAINActivity 是 MainActiity 而不是 CalledActivity。
在 A_app 中，我尝试使用以下代码调用 B_app：

```
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.setComponent(new ComponentName("com.example.bapp","com.example.bapp.BActivity"));
intent.putExtra ("test2abc", "abctest2");
startActivity(intent); 
```

而在 B_app 的 BActivity 中，onCreate 中的代码如下：

```
Bundle params = getIntent().getExtras();
if (params != null) {
    String temp = params.getString ("test2abc");
    Toast.makeText (BActivity.this, temp, Toast.LENGTH_LONG).show();
} 
```

但是有一些错误如下：

```
01-10 10:47:16.904: E/AndroidRuntime(8355): java.lang.SecurityException: Permission Denial: starting Intent { act=android.intent.action.MAIN cmp=com.example.bapp/.BActivity (has extras) } from ProcessRecord{418a3788 8355:com.dlink.nas/u0a7} (pid=8355, uid=10007) not exported from uid 10115 
```

我希望 B_app 仅由 A_app 直接调用，而无需其他调用。
我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T03:19:42.917

您需要将此添加到`BActivity`'s`<activity>`节点下的“B_app”Android Manifest：

```
 android:exported="true" 
```

所以它看起来像：

```
<activity android:name=".Bactivity" 
  android:label="@string/b_activity"
  android:exported="true">
<!--rest of activity node -->
</activity> 
```

“导出”的另一种方法是设置一个意图过滤器（也在清单中）：

```
<intent-filter>
    <action android:name="myFilter" />
    <category android:name="android.intent.category.DEFAULT" />
 </intent-filter> 
```

由于 Android 默认情况下不允许访问所有活动，仅允许访问主要活动。

要回答您编辑的问题，有**一种**方法可以让应用程序在不导出的情况下调用彼此的组件，如[this](https://stackoverflow.com/a/6354073) SO answer所示。您必须在清单中添加`sharedUserLabel`和属性。`sharedUserId`但是，他们指出不建议这样做，因为它可能会导致操作发生轻微变化。

# javascript - Javascript 在 20 个字符后拆分

> ID：14250296
> 
> 赞同：0
> 
> 时间：2013-01-10T03:16:34.903
> 
> 标签：javascript, regex, split

给定

```
string = 'Stackoverflow is awesome. It answers all my questions';
string = 'Stackoverflow. Q and A site'; 
```

我可以在句号之前得到一切`string.split('.')[0];`

但是我只想在句号出现在一定数量的字符之后才这样做，否则会在句号之前返回所有内容。

我正确地需要一个正则表达式来做到这一点，但不知道如何。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T03:18:23.630

`/^.{20,}?\./`应该这样做。`^`告诉它开始查看搜索字符串的开头，第一个意味着`.`匹配任何字符，它`{20,}`是一个量词，表示“至少 20”，并且`?`使其匹配尽可能少（否则它将返回所有内容最后一个点）。最后`\.`匹配一个文字点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T03:19:40.050

最简单的方法应该是

```
var result = string.split('.')[0].length > 20 ? string.split('.')[0] : string; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T03:24:13.657

不需要正则表达式。

你可以这样做：

```
function trimToDot(s) {
    var head = s.split('.')[0];
    return ( head.length > 20 ) ? head : s;
} 
```

# magento-1.7 - 创建规则交易价格超过 200

> ID：14250298
> 
> 赞同：1
> 
> 时间：2013-01-10T03:17:14.600
> 
> 标签：magento-1.7

嗨，我只想说你们都是你们非常了解的救生员。

好的，有一个商店 1.72 magento 并且一切正常，所以我分配了一个注册人员到 Trade，他们获得了每个产品的贸易组的所有贸易价格。

问题是或者我应该说无法解决。

我如何创建这个高达 200 英镑的小计，他们得到标准价格而不是交易，以阻止人们一次购买一个顶部。

我从小计中看到折扣金额，但由于他们选择的产品是随机的，因此无法计算。

# html - 使文本向下而不是向上流动？

> ID：14250302
> 
> 赞同：2
> 
> 时间：2013-01-10T03:17:33.510
> 
> 标签：html, css

我正在尝试仅使用 CSS 制作这些图标（白色图标除外）。我遇到的问题是，如果我的图标名称超过宽度并开始包裹文本开始与图像重叠（因为它向上移动，如第二个元素所示），我需要让文本做的是 shift向下（如第三个元素所示）。

![在此处输入图像描述](../Images/4172d7bdffb267e6c1ec42586383b25a.png)

这是我的html：

```
 <div class=circle><label>Manage Queries</label></div> 
```

这是我的CSS：

```
.circle
 {
  float:left;
  position:relative;
  border-radius: 50%;
  width: 128px;
  height: 128px; 
  background: #C70C11 url('myimage.png') no-repeat center center;
  }

  .circle > label
  {
    font-family:arial;
    position: absolute; 
    bottom: -20px; 
    text-align:center;
    width:inherit;
  } 
```

我已经尝试过`vertical-align`，但我没有发现任何成功。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T03:20:09.370

而不是`bottom:-20px`，尝试`top:100%`

这是一个概念证明：http: [//jsfiddle.net/eZcRk/](http://jsfiddle.net/eZcRk/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T03:27:02.323

只需将 的`top`属性设置`label`为的高度`div`

```
.circle > label
{
    top: 128px; 
} 
```

[**演示**](http://jsfiddle.net/mowglisanu/u6hJN/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T03:19:39.327

要开始`vertical-align`工作，您需要将父标签设置为 have `display: table`。然后使用以下属性设置标签：

```
display: table-cell;
vertical-align: bottom; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T03:20:15.467

尝试设置 vertical-algin:bottom; 和显示：内联；为你的标签？

# php - PHP 配置文件

> ID：14250303
> 
> 赞同：2
> 
> 时间：2013-01-10T03:17:45.283
> 
> 标签：php, web-applications, configuration

创建配置文件的更好选择是什么？
解析 config.ini 或需要包含配置数组的 config.php？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T03:33:04.293

config.php 文件更好，因为它是原生 php 代码，因此不需要编译。我还要指出，ini 文件支持节和键值对，任何需要更深层次嵌套层次的东西都不能用 ini 格式表示。

有些人担心所涉及的安全问题，但网站的安全已经是一项复杂的任务，具有许多不同的内在方法。

FWIW，您忽略了 yaml 和 xml 作为配置的替代方案，这些配置受许多框架支持，并且有库来处理它们中的每一个。

# javascript - 复制和更改 javascript 函数范围

> ID：14250309
> 
> 赞同：2
> 
> 时间：2013-01-10T03:18:31.890
> 
> 标签：javascript

有没有办法将 JavaScript 函数 Scope 复制到另一个函数？

```
(function(v){
     var Ct=v.Ct=function(){
     }
     var a="asdf";

     Ct.prototype.fun=function(){
          console.log(a);    //prints 'asdf'
     }
})(window)

-------------------------------------------------- 
```

上面的代码不能改：

如何重写 Ct.prototype.fun 以使其打印“asdfasdf”

下面的例子不能得到“a”

```
Ct.prototype.fun=function(){
    console.log(a+a);   //It's not work
}

var o=new Ct();
o.fun(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T03:41:18.327

```
(function(v){
 var Ct=v.Ct=function(){
 };
 var a="asdf";

 Ct.prototype.fun=(function(){
    return function(){
      console.log(a+a);    //prints 'asdf' 
 }
 })(a);
})(window);
var o=new Ct();
o.fun(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T03:45:13.390

如果您想要访问一个预先存在的变量或类似的东西，您可以在初始闭包中提供一个 getter，然后通过上下文访问它。

```
(function(v){
     var Ct=v.Ct=function(){
     }
     var a="asdf";

     Ct.prototype.fun=function(){
          console.log(a);    //prints 'asdf'
     }
     Ct.prototype.getA = function() {
        return a; 
     }
})(window)

Ct.prototype.fun=function(){
    console.log(this.getA()+this.getA());
}

var o=new Ct();
o.fun(); 
```

对于更多计划，您最好重新考虑如何使用对象。

# xml - Apple 的 PLIST 是开放标准吗？

> ID：14250310
> 
> 赞同：-3
> 
> 时间：2013-01-10T03:18:44.347
> 
> 标签：xml, macos, plist

我已经在 Google 上搜索了一段时间，但我似乎找不到任何东西，我想知道因为我希望创建自己的操作系统，而 plist 似乎是一种很棒的格式。（我知道它永远不会有任何意义，但请保持话题。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T03:21:42.563

[GnuStep](http://www.gnustep.org/)使用它所以它必须没问题

**编辑** 早在 1 月份就提供并接受了上述答案，但四个月后，MarcusJ 没有*接受*它，原因很明显，该问题已被多次否决（我认为这是错误的）。

为了让答案重新被接受，我提供了以下证据：

[http://opensource.apple.com/plist/mac-os-x-108.plist](http://opensource.apple.com/plist/mac-os-x-108.plist)

苹果开源项目列表，以... plist 格式提供

[http://lists.apple.com/archives/unix-porting/2004/Dec/msg00051.html](http://lists.apple.com/archives/unix-porting/2004/Dec/msg00051.html)

IANAL 对问题的回答：**plist 格式的许可证**

请记住，在法庭上进行测试之前，这类事情都不是确定的。为了更加确定，我建议联系 GnuStep 的人（他们会考虑这个）或者通过电子邮件给 Tim Cook 搅动马蜂窝......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:55:22.247

有 3 种样式的属性列表，xml、二进制和旧 NeXT 时代的旧样式，它仍在工作。我通常更喜欢旧式的人类读/写能力，尽管它不像 LDAP 那样人性化。简而言之，每种格式都应该适合您。除非有人想严重破坏某些向后兼容性，否则它不会轻易改变。

# distance - 如何在 MKAnnotation 的引脚上添加距离？

> ID：14250311
> 
> 赞同：0
> 
> 时间：2013-01-10T03:18:44.240
> 
> 标签：distance, mkannotation

我有一个在地图视图上绘制 mkannotations 的应用程序（我希望我的术语正确......它有点令人困惑）。

当您点击它们时，我已经包含了字幕。

我一直在网上寻找一种将距离包含在这些标注中的方法，但我还没有完全做到。我遇到了两个部分解决方案，我想知道它们是否应该结合起来。

1.  首先，我没有将 CoreLocation 添加到我的项目中，我需要它吗？不断更新我的用户位置并能够计算到每个点的距离？或者 Mapkit 是否以某种方式包含我可以使用的用户位置数据？

2.  部分解决方案 A 使用以下代码：

`-(void)locationManager:(CLLocationManager *)manager

```
didUpdateToLocation:(CLLocation *)newLocation

       fromLocation:(CLLocation *)oldLocation {

if(!newLocation) return;

if ((oldLocation.coordinate.latitude != newLocation.coordinate.latitude) &&

    (oldLocation.coordinate.longitude != newLocation.coordinate.longitude)){

    CLLocation *loc1 = [[CLLocation alloc] initWithLatitude:oldLocation.coordinate.latitude longitude:oldLocation.coordinate.longitude];

    CLLocation *loc2 = [[CLLocation alloc] initWithLatitude:newLocation.coordinate.latitude longitude:newLocation.coordinate.longitude];

    CLLocationDistance distance = ([loc2 distanceFromLocation:loc1]) * 0.000621371192;

    //distance = distance;

    NSLog(@"Total Distance %f in miles",distance);

} 
```

}

我了解此方法计算 2 点之间的距离。我会以某种方式需要循环浏览我的注释并创建距离。看起来这会更有用，因为它会不断地根据当前的 userLocation 重新计算距离。虽然，我确实想知道它的有效性。一旦你知道某物有多远，你就很少希望被不断地提醒它有多远。

1.  部分解决方案 B 使用此代码：

`- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control{

```
CLLocation *pinLocation = [[[CLLocation alloc] initWithLatitude:[(MyAnnotation*)[view annotation] coordinate].latitude longitude:[(MyAnnotation*)[view annotation] coordinate].longitude]];

CLLocation *userLocation = [[CLLocation alloc] initWithLatitude:self._mapView.userLocation.coordinate.latitude longitude:self._mapView.userLocation.coordinate.longitude];

CLLocationDistance distance = [pinLocation distanceFromLocation:userLocation];

NSLog(@"Distance to pin %4.0f", distance); 
```

} `

在这种情况下，只要轻敲销钉，就会计算距离。但我不清楚 MyAnnotation [查看注释] 的代码，我猜原始发帖人的位置基于 MyAnnotation 类，所以我将其更改为 MyLocation 并且除了 1 个错误之外的所有错误都消失了。出于某种原因，我在最后一个方括号的 pinLocation 行收到了 Expected Identifier 错误。

我觉得解决方案就在我的舌尖。只需要一点额外的推动:)

多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:29:02.377

只需将 calloutAccessoryControlTapped 方法中的代码移动到创建 MKAnnotation 的行之后，无论您拥有它。给 MKAnnotation 子类一个浮动距离属性并将其设置为字幕。

# .htaccess - htaccess mod重写

> ID：14250312
> 
> 赞同：0
> 
> 时间：2013-01-10T03:18:51.267
> 
> 标签：.htaccess

我想将我网站的时事通讯页面重写为 url.com/newsletter/ 问题是，我有另一个与此步骤重叠的规则。规则如下所示：

```
RewriteRule ^([^/]*)/$ /index.php?categories=$1 [L,QSA]  //Primeryrule overlapping the secondary rule 
RewriteRule ^newsletter/$ /?newsletter=$1 [L] 
```

是否有可能应用特殊情况规则或类似的东西（我不想使用任何解决方法，如 .html 或 .php 扩展名或类似的东西，只是上面的 url）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T03:22:24.483

Apache 自上而下读取这些规则。因此，先放置新规则，然后再放置现有规则并尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T03:21:55.590

刚刚找到了解决方案，我需要将时事通讯规则置于其他规则之上，以使其首先应用。

# ruby-on-rails - 没有路线匹配 {:action=>"edit", :controller=>"users"}

> ID：14250315
> 
> 赞同：2
> 
> 时间：2013-01-10T03:19:32.907
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

出于某种原因，我的 rails 应用程序试图访问我的控制器中的一个我没有计划的操作，这反过来给了我一个路由错误。我正在使用 rails 中的资源功能来获取我的所有路线。

![在此处输入图像描述](../Images/2646c2c9250873de0cc34c43a4a19088.png)

这就是我的控制器中的内容

![在此处输入图像描述](../Images/e41913a3ca66d829b69d018cb8448532.png)

最后，当我执行 rake 路由时，我得到了以下路由，我想知道为什么当它在控制台中清楚地向我显示正确的路由时会出现路由错误 ![在此处输入图像描述](../Images/0c82a3ae18f1d2e7eb2567146e26c928.png)

编辑：下面是我的 routes.rb ![在此处输入图像描述](../Images/976200ec33b1f0f3201c20d62662adbc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T03:56:54.467

我有同样的错误

您可以签入文件views/layout/_header.html.erb

我的错误是 <%= link_to "Settings", edit_user_path(current_user) %>

但它必须 <%= link_to "Settings", edit_user_path(current_user) %>

# javascript - 为什么 Javascript 函数调用在函数名称后不包含“()”？

> ID：14250318
> 
> 赞同：1
> 
> 时间：2013-01-10T03:19:41.120
> 
> 标签：javascript, syntax, dom-events

```
window.onload = function() {
  document.getElementById('clickMe').onclick = runTheExample;
}

function runTheExample() {
  alert('running the example');
} 
```

这是一个简单的事件处理程序，用于`onclick`id = clickMe 的 html 输入按钮的事件。

在第 2 行中，为什么对函数的调用`runTheExample`没有紧跟在后面`()`？我认为要调用一个函数，你必须在一个开/关括号中传递它期望的任何变量/对象，如果函数不期望任何东西，你仍然必须包括开闭括号，如`runTheExample()`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T03:23:07.557

```
document.getElementById('clickMe').onclick = runTheExample; 
```

此处的目的不是调用*runTheExample()*，而是**将对函数 runTheExample 的引用**分配给*onclick*事件。

在内部，当*onclick*事件被触发时，Javascript 能够通过您在上面的代码中提供的引用调用函数*runTheExample 。*

## 片段

```
var myFunction = function() { return 42; };

// Assigning the reference
myObject.callback = myFunction;

myObject.callback(); // Has the same effect as calling myFunction();

// Assigning by calling the function
myObject.callback = myFunction();

myObject.callback;   // Returns 42
myObject.callback(); // Exception! Cannot call "42();" 
```

这不是特定于 Javascript 的。通过引用传递函数有多种语言版本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-10T03:21:40.207

您仅使用括号来*调用*（调用）函数。当您将其分配给 时`onclick`，您只是通过引用传递它。

为了更好地理解这一点，请考虑另一种声明函数的方法：

```
var runTheExample = function () {
  alert('running the example');
} 
```

无论您使用哪种方法，`runTheExample`都将包含对该函数的引用（存在一些差异，例如函数引用在分配之前不可用，但这是另一回事）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T03:22:22.737

它不是调用它，而是设置属性`onclick`。当调用 时`onclick()`，它将运行您定义的函数。但是请注意， 的上下文`this`将是调用它的对象 ( `document.getElementById('clickMe')`)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-10T03:23:00.397

函数是javascript中的对象。该行将 click me 元素的 onclick 属性设置为 runTheExample 函数，它不会立即调用该函数。

```
var a =runTheExample; //sets a to runTheExample
a(); //runs the runTheExample function 
```

因此，当引用函数名而不带 () 时，它指的是函数对象，当您添加 () 时，它是对函数的调用，并且函数执行。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-10T03:22:15.840

在这种情况下，runTheExample 函数被视为变量并分配给 onclick 事件处理程序。在函数名之后使用 () 来调用函数。如果您在此处添加它们，将会发生的情况是 runTheExample() 将在加载期间调用一次，显示警报，然后将 null 值分配给 onclick 处理程序。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-10T03:22:22.470

您没有在这里调用该函数。您将函数设置为事件处理程序，并且在触发事件之前不会实际调用该函数。你写的引用了这个函数；这与实际调用它是一个不同的概念。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-10T03:21:54.393

因为它绑定`runTheExample`到`onclick`事件。
添加`()`时会触发该功能。

# air - Adobe AIR 能否用于创建以 Javascript 编写的使用 Web Audio API 的桌面/移动应用程序？

> ID：14250321
> 
> 赞同：0
> 
> 时间：2013-01-10T03:19:56.767
> 
> 标签：air, web-audio-api

我可以使用 Adob​​e AIR 使用 Javascript 和 Web 音频 API 创建应用程序，然后说应用程序在变成独立的桌面/移动应用程序后仍保留其音频功能。我还没有开始使用 Adob​​e AIR，所以我不熟悉该软件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:11:30.940

我不认为 AIR 的运行时包含 Web Audio 支持；如果用户安装了 iOS6，它可能在 iOS 上；现在不会在 Android 上使用它，并且怀疑他们是否将其与桌面上的当前 Chromium 保持同步。

# mysql - MySQL数据库更改数据表路径或位置？

> ID：14250326
> 
> 赞同：1
> 
> 时间：2013-01-10T03:20:40.917
> 
> 标签：mysql, database, database-design, location, mysql-workbench

我正在使用适用于 Windows 的 MySQL Workbench，有没有办法更改 MySQL 数据的存储路径？例如，我想将一些数据存储在 C: 驱动器中，而我想将其他数据存储在另一个驱动器 (E:) 中还是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T03:26:31.113

所有数据都应该存储在 MySQL 中的单个“datadir”下，但是您可以通过符号链接获得创意，以便给定数据库的数据可以存储在其他地方。

见[http://dev.mysql.com/doc/refman/5.1/en/windows-symbolic-links.html](http://dev.mysql.com/doc/refman/5.1/en/windows-symbolic-links.html)

# joomla2.5 - joomla 访问级别在 k2 后端中不起作用

> ID：14250330
> 
> 赞同：0
> 
> 时间：2013-01-10T03:21:26.037
> 
> 标签：joomla2.5, backend, user-permissions, joomla-k2

（我所有的问题都在 joomla 管理员界面（后端）中）作为示例。在 joomla 访问级别查看我创建一个访问级别并设置只是超级管理员用户组可以访问此级别。在后端：在 joomla 内容中，当我创建具有此访问级别的文章时，当其他用户组登录到后端时，他们无法看到具有此访问权限的文章，只有超级管理员可以在后端看到这篇文章。但是在k2中这个选项不起作用：当我在后端创建具有超级用户访问权限的项目时：当其他用户组登录到后端时，他们可以在后端看到这个项目。这是个大问题 。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T21:59:22.433

您的问题很难阅读和具体理解您的问题。

我猜你的问题是你不知道如何正确设置 Joomla ACL，所以这就是你面临这些问题的原因。

我建议你阅读[这篇文章](http://magazine.joomla.org/issues/issue-may-2012/item/761-Joomla-ACL-Configuring-back-end)来帮助理解 Joomla ACL 的概念。[或者，我建议你在Lynda.com](http://www.lynda.com)上观看作者的视频教程，它们非常好。

# workflow-foundation - 尝试使用包含 CSharpValue 表达式的 4.5 以编程方式创建 Windows 工作流服务的问题

> ID：14250344
> 
> 赞同：2
> 
> 时间：2013-01-10T03:22:27.183
> 
> 标签：workflow-foundation

我已经使用 Windows Workflow 4.0 以编程方式成功创建了一个 Windows 工作流服务。Windows Workflow 4.0 不支持 CSharp 表达式，所以我需要使用 VisualBasic 表达式。现在我们已经升级到 4.5，我想将它们转换为 VisualBasic 表达式到 CSharp 表达式。不幸的是，我在尝试使用工作流程时遇到了一些错误。

在 4.0 中，为了正确生成和序列化工作流，我需要告知它要使用哪些命名空间。例如，我有以下内容：

```
 private static void AddVbNamespaceSettings(WorkflowService service, params Type[] types)
    {
        var vbsettings = VisualBasic.GetSettings(rootObject) ?? new VisualBasicSettings();

        foreach (Type t in types)
        {
            vbsettings.ImportReferences.Add(
                new VisualBasicImportReference
                {
                    Assembly = t.Assembly.GetName().Name, 
                    Import = t.Namespace
                });
        }

        VisualBasic.SetSettings(service, vbsettings);
    } 
```

执行上述操作后，我能够告知工作流服务评估 Visual Basic 表达式所需的类型。

我相信我需要为 CSharp 做一些等效的事情，但我无法发现那是什么。有没有等价的东西？

此外，我能够通过执行以下操作来验证工作流程：

```
 ValidationResults results = ActivityValidationServices.Validate(service.Body); 
        if (results.Errors.Count > 0)
        {
            throw new Exception();
        } 
```

现在我的表达式在 CSharpValues 中，验证器似乎没有捕捉到错误的表达式。验证工作流程的正确方法是什么？

谢谢，埃里克

# ruby-on-rails - 将 Rails 2.3.11 升级到 2.3.15 的正确步骤是什么？

> ID：14250345
> 
> 赞同：1
> 
> 时间：2013-01-10T03:22:32.960
> 
> 标签：ruby-on-rails

鉴于[最近](http://weblog.rubyonrails.org/2013/1/8/Rails-3-2-11-3-1-10-3-0-19-and-2-3-15-have-been-released/)的 Rails 安全补丁，应采取哪些正确步骤将 Rails 2.3.11 成功更新到 2.3.15？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T04:10:30.090

*   运行测试并确保一切正常
*   `git checkout -b new_rails`通过 git ( )开辟一个新的分支
*   在 Gemfile 中将 Rails 2.3.11 更改为 2.3.15
*   在 environment.rb 中将 RAILS_GEM_VERSION 更改为“2.3.15”
*   跑`bundle update rails`
*   运行测试，看看一切是否仍然有效
*   `git checkout master`如果不是，则通过执行;退回到旧分支 可选地通过执行删除新分支`git branch -D new_rails`

仅在新分支上执行此操作可确保不会中断。

# apache - htaccess 重写仅在特定 URL 上中断

> ID：14250348
> 
> 赞同：1
> 
> 时间：2013-01-10T03:23:27.560
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

访问：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /
RewriteRule ^dev/(.*)/$ /out.php?q=$1 [L]
RewriteRule ^dev/(.*)/([a-z]+)$ /out.php?q=$1&s=$2 [B,L] 
```

网址请求：

```
http://example.com/dev/100%25%20Booster%20Juice%20(6%20Hours)/supply 
```

出于某种原因，上述请求会导致服务器错误，而这些：

```
http://example.com/dev/100%25%20Booster%20Juice%20(6%20Hours)/
http://example.com/dev/Energy%20Juice%20(6%20Hours)/supply
http://example.com/dev/Energy%20Juice%20(6%20Hours)/ 
```

工作完美，不会产生错误。我不知道为什么只有一个特定的 URL 不起作用。

# ruby - 我将如何在 ruby 中重用随机数？

> ID：14250352
> 
> 赞同：0
> 
> 时间：2013-01-10T03:23:38.537
> 
> 标签：ruby, random

我正在尝试创建一个随机数学方程式（只需简单的加法），其中给您两个随机数，您需要将它们相加。我的问题是用于答案的两个随机数与方程式中使用的随机数不同

```
puts "Choose the number range (difficulty of the equation)"
difficulty = gets.chomp
a = rand(difficulty)
b = rand(difficulty)
answer = a + b
puts "#{a} + #{b}"
UserAnswer = gets.chomp

if UserAnswer == answer
  puts "good"
else
  puts "bad"
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T06:54:12.887

您的问题与随机数无关。问题是您正在将一个数字（随机数的总和）与一个字符串（来自用户输入）进行比较。您应该将相关行替换为：

```
UserAnswer = gets.to_i 
```

顺便说一句，我看不出有什么理由在这里使用常量。使用局部变量（如`user_answer`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T03:31:53.030

尝试将 a 和 b 的值存储在其他两个变量中，例如 a_aux 和 b_aux，然后在每次使用 a 和 b 时引用它们而不是 a 和 b。

# ruby - ruby 1.8.7 中 SSL 客户端身份验证的示例代码

> ID：14250354
> 
> 赞同：1
> 
> 时间：2013-01-10T03:23:54.633
> 
> 标签：ruby, ssl, ssl-certificate, authentication

伙计们，

谁能提供一个如何在 ruby​​ 1.8.7 中进行 SSL 客户端身份验证的工作示例？作为记录，我正在尝试使用 GoDaddy 认证向[Windows Phone 推送通知服务](http://msdn.microsoft.com/en-us/library/hh221551.aspx)执行经过身份验证的发布请求。在这种情况下，我的命令行客户端使用 API 密钥或不记名令牌之类的证书。

我为 GoDaddy 提供了一个 mydomain.com.key 文件，GoDaddy 为我提供了一个 gd_bundle.crt 文件和一个 mydomain.com.crt 文件。

在我的 Net::HTTP 对象上，我设置了以下参数：

```
my_cert = File.read(File.join(File.dirname(__FILE__), "mydomain.com.crt")) # from godaddy
my_key = File.read(File.join(File.dirname(__FILE__), "mydomain.com.key")) # i made

http.use_ssl = true
http.cert = OpenSSL::X509::Certificate.new(my_cert)
http.key = OpenSSL::PKey::RSA.new(my_key)
http.verify_mode = OpenSSL::SSL::VERIFY_PEER 
```

但推送通知服务继续报告 403 错误，提示“您无权使用您提供的凭据查看此目录或页面”。

由于有人成功推送，我假设我在 ruby​​ 中配置 Net::HTTP 对象的方式不正确。有没有人有关于如何使用 ruby​​ 执行 SSL 客户端身份验证的示例代码？

# android - 活动更改时显示对话框

> ID：14250356
> 
> 赞同：0
> 
> 时间：2013-01-10T03:24:05.747
> 
> 标签：android

我使用活动 A 开始后台下载`AsyncTask`，下载完成后`AsyncTask.postExecute`会弹出一个`AlertDialog`. 但是，在下载过程中，我切换到另一个 Activity B**或任何其他活动**。结果就是`AlertDialog`显示不出来。`AlertDialog`使用活动上下文（这里应该是 A）。那么，我该如何展示`AlertDialog`呢？

```
AlertDialog.Builder builder = new  AlertDialog.Builder(context);
builder.setMessage(context.getString(R.string.install));
builder.setPositiveButton(R.string.ok, new DialogInterface.OnClickListener()
{
    @Override
    public void onClick(DialogInterface dialog, int which)
    {
        //onSure();
    }
});
builder.setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener()
{
    @Override
    public void onClick(DialogInterface dialog, int which)
    {
        //onCancle();
    }
});

builder.create().show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T03:44:20.187

如果这是一个长时间运行的任务，在完成之前无法完成，`Activity A`那么我建议使用[IntentService](http://developer.android.com/reference/android/app/IntentService.html)。但这取决于你需要什么。这样做将允许它在后台完成，而不是阻止`UI`. 可能还有其他选择，但根据我对您的情况的了解，这听起来是最好的。除此之外，您可以等待开始下一个活动，并在`AsyncTask`完成后使用对话框中的按钮启动它，如果这是一个选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T06:09:17.227

您可以做的一个选择是拥有一个 BaseActivity ，您的所有活动都从该 BaseActivity 扩展，它有一个成员变量来保存您的前台活动。当您的 AsyncTask 完成时，您可以使用 BaseActivity 中的 Activity 引用来显示您的 AlertDialog。例如：

*文件：MyBaseActivity.java*

```
public class MyBaseActivity extends Activity {

    protected static Activity sForegroundActivity;

    class MyAsyncTask extends AsyncTask<Object, Object, Object> {

        @Override
        protected Object doInBackground(Object... params) {
            // do stuff
            return null;
        }

        protected void onPostExecute(Object result) {

            // cover the edge case where the AsyncTask finished while we are transitioning 
            // between activities and we have not set the foreground activity instance 
            if(sForegroundActivity == null) {
                return;
            }

            AlertDialog.Builder builder = new AlertDialog.Builder(sForegroundActivity);
            builder.setMessage("Showing Dialog in Foreground Activity");
            builder.setPositiveButton(R.string.ok,
                    new DialogInterface.OnClickListener() {
                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            // handle ok clicked
                        }
                    });
            builder.setNegativeButton(R.string.cancel,
                    new DialogInterface.OnClickListener() {
                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            // handle cancel clicked
                        }
                    });

            builder.create().show();
        }
    }

    @Override
    public void onStart() {
        super.onStart();
        sForegroundActivity = this;
    }

    @Override
    public void onStop() {
        super.onStop();
        sForegroundActivity = null;
    }
} 
```

*文件：ActivityA.java*

```
public class ActvityA extends MyBaseActivity {

    private void startAsyncTaskAndGoToActivityB() {

        // start our AsyncTask
        new MyAsyncTask().execute();

        // go to ActivityB.  When the AsyncTask finishes, the AlertDialog will be shown in ActivityB
        Intent myIntent = new Intent(this, ActivityB.class);
        startActivity(myIntent);
    }
} 
```

# python - 使用正确的分页从 twitter 获取用户的所有 follower_id

> ID：14250359
> 
> 赞同：1
> 
> 时间：2013-01-10T03:24:26.107
> 
> 标签：python, twitter, pagination, tweepy

我对使用 tweepy api 非常陌生，并且设法为特定的未经身份验证的 Twitter 用户获取了 follower_ids。我现在想知道如何获取 twitter 用户的所有 follower_id，因为第一次调用只给了我 5000 个 id，并且用户有更多的关注者。我已经浏览了 tweepy 文档，但仍然不清楚如何使用 tweepy 光标实际执行分页。我非常感谢对如何执行分页的简单解释以及对我当前代码的一些帮助，以执行上述获取 twitter 用户的所有 follower_ids 的任务。

```
 import tweepy
    user = tweepy.api.get_user('someuser')
    cursors = tweepy.Cursor(user.followers_ids, id='screen_name')
    for cursor in cursors.items():
        print cursor.screen_name 
```

我在使用它时遇到的一个错误如下：

tweepy.error.TweepError：此方法不执行分页

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-25T13:37:00.460

我认为您首先需要有一个经过身份验证的 tweepy.API 实例。我尝试时遇到了同样的错误

```
user = api.get_user('username')
c = tweepy.Cursor(user.follower_ids) 
```

但是，这对我有用：

```
import tweepy
## first set up authenticated API instance
auth = tweepy.OAuthHandler(consumer_key, consumer_secret)
auth.set_access_token(access_token_key, access_secret)
api = tweepy.API(auth)

for block in tweepy.Cursor(api.followers_ids, 'username').items():
  ## do something with the block of 5000 follower ids 
```

希望有帮助！

# windows - 查找并模拟单击系统托盘图标？

> ID：14250362
> 
> 赞同：4
> 
> 时间：2013-01-10T03:24:53.797
> 
> 标签：windows, winapi, click, contextmenu, system-tray

我需要弄清楚如何以编程方式从单独的应用程序的系统托盘图标中查找和选择上下文菜单项。我能想到的唯一方法是使用 mouse_event() 和一些硬编码的 x/y 值，并将图标设置为始终显示。除了一般硬编码的骇人听闻的使用之外，这里的问题是假设图标将保留它的位置（这可能会在另一个应用程序加载/卸载时中断）。我想知道是否有人知道其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T03:56:14.247

根据应用程序的编写方式，从上下文菜单中选择项目将导致将`WM_COMMAND`消息发布到属于应用程序的窗口。您可以使用 Spy++ 之类的工具来检查这一点。如果是这种情况，那么您所要做的（理论上）就是模拟该消息。

如果应用程序不`WM_COMMAND`用于接收来自上下文菜单的选择，那么您的工作就会困难得多。没有发现系统托盘项目的位置和标识的记录方法，因此硬编码 x/y 值的方法可能是您拥有的最佳选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T04:03:55.980

请参阅这篇[MSDN 论坛文章](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/4c4f60ce-3573-433d-994e-9c17f95187f0/)，该文章讨论了如何找到 systemTray 的句柄。然后这篇文章引用了一篇关于如何找到您正在搜索的应用程序句柄的[CodeProject 文章。](http://www.codeproject.com/Articles/10497/A-tool-to-order-the-window-buttons-in-your-taskbar)我还没有尝试过，但它看起来可能是一个可行的起点。

# java - Xbooting 一个 Java 类

> ID：14250363
> 
> 赞同：0
> 
> 时间：2013-01-10T03:25:09.960
> 
> 标签：java, jvm, overriding, jvm-arguments

基本上我想`Canvas`在运行时用一个使用我的自定义`Canvas`类的应用程序替换这个类，我听说`xbooting`可以做到这一点，但没有教程或任何东西。

所以我只是想知道 vm 参数是什么，你能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T04:30:24.913

你`xboooting`可能是指`-Xbootclasspath`参数？

您可以使用`-Xbootclasspath`覆盖 VM 启动时正在加载的类。通过这种方式，您可以为 VM 提供您自己的某个类的实现，它将在 VM 启动时立即使用。你可以这样做：

```
java -Xbootclasspath/p:path_to_the_jar_with_myCanvas_class.jar HelloWorld.class 
```

但是`-Xbootclasspath`不会`Canvas`在运行时替换类，替换将在 VM 启动时发生。

这是一篇关于 Xbootclasspath 的好文章：[When to use -Xbootclasspath on HotSpot?](http://xmlandmore.blogspot.com/2012/09/when-to-use-xbootclasspath-on-hotspot.html)

# mysql - 存储过程上的 MySQL 语法错误

> ID：14250366
> 
> 赞同：3
> 
> 时间：2013-01-10T03:25:29.597
> 
> 标签：mysql, sql, stored-procedures

```
#1064 - You have an error in your SQL syntax; 
check the manual that corresponds to your MySQL server version for the right syntax 
to use near = -1 else SELECT audit_id INTO t_new_id FROM a_audit_reg at line 11

delimiter //
CREATE  FUNCTION get_audit_id (p_pubco_id int(10),
                              p_audit_id int(10),
                              p_fiscal_date date) 
       RETURNS int(10) 
BEGIN 

   DECLARE t_new_id int(10);

#check paremeters here
if p_pubco_id = 0 or p_audit_id = 0
then set t_new_id = -1
else
   set t_new_id = (SELECT audit_id
     FROM a_audit_reg 
    WHERE p_pubco_id = a_audit_reg.pubco_id
      and p_audit_id = a_audit_reg.audit_id
      and p_fiscal_period = a_audit_reg.fiscal_period_date);

   if found_rows() = 0
   then
        insert into a_audit_reg (pubco_id, audit_id, fiscal_period_date)
               values (p_pubco_id, p_audit_id, p_fiscal_date);
        set t_new_id = last_insert_id();
   end if;
end if;
   return t_new_id;

END //
delimiter ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T03:29:16.570

*   改变`DELIMITER`
*   利用`SET`

询问，

```
DELIMITER //
CREATE  FUNCTION get_audit_id
(
    p_pubco_id INT, 
    p_audit_id INT, 
    p_fiscal_date DATE
) 
RETURNS INT
BEGIN 
    DECLARE t_new_id INT;

    IF p_pubco_id = 0 or p_audit_id = 0 THEN    
        SET t_new_id = -1;
    ELSE
        SET t_new_id = (SELECT audit_id
                        FROM a_audit_reg 
                        WHERE p_pubco_id = a_audit_reg.pubco_id
                            and p_audit_id = a_audit_reg.audit_id
                            and p_fiscal_period = a_audit_reg.fiscal_period_date);

        IF found_rows() = 0 then
            insert into a_audit_reg (pubco_id, audit_id, fiscal_period_date)
            values (p_pubco_id, p_audit_id, p_fiscal_date);

            SET t_new_id = last_insert_id();
        end if;
    end if;
    return t_new_id;
END //
DELIMITER ; 
```

# asp.net-mvc-3 - 淘汰赛验证和清除控制的正确方法

> ID：14250370
> 
> 赞同：2
> 
> 时间：2013-01-10T03:25:58.673
> 
> 标签：asp.net-mvc-3, knockout.js, knockout-validation

我有以下代码，它工作正常，**除非**您在插入项目后清除属性。错误立即出现。

```
ko.validation.configure({
        insertMessages: false,
        decorateElement: true,
        errorElementClass: 'error'
    });

FirstName: ko.observable().extend({
            required: true
        }), 
```

我在淘汰视图模型中添加了方法

```
addItem: function () {
            if (!viewModel.isValid()) {
                viewModel.errors.showAllMessages();
                return false;
            } else {
                //DO SOMETHING
                this.SomeCollection.push(newInterviewee);
                this.FirstName(null);
                }
        }, 
```

我在 HTML 中有以下内容：

```
<div>
<label>First Name</label>
<input data-bind="value: FirstName, validationElement: FirstName, valueUpdate: 'keyup'" class="input" type="text">
</div>
<div>
<div>
<input data-bind="click: addItem" class="button" type="button">
</div> 
```

问题是在我调用 this.FirstName(null) 之后。错误立即出现！我希望只有在他们按下按钮时才会显示错误，即使在属性被清除后也是如此

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T16:19:25.137

这是 Steve Greatrex 提供的解决方案：[https ://github.com/Knockout-Contrib/Knockout-Validation/issues/210](https://github.com/Knockout-Contrib/Knockout-Validation/issues/210)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T09:26:16.253

我们的项目也有同样的问题。我们通过强制 isValid 为 true 解决了这个问题。

```
addItem: function () {
            if (!viewModel.isValid()) {
                viewModel.errors.showAllMessages();
                return false;
            } else {
                //DO SOMETHING
                this.SomeCollection.push(newInterviewee);
                this.FirstName(null);
                viewModel.isValid(true);
            }
        }, 
```

为了能够做到这一点，您需要覆盖 ko.validation 对 isValid 计算的定义，如下所示：

```
observable.isValid = ko.computed({
    read: function() {
        return observable.__valid__();
    },
        write: observable.__valid__
    }
); 
```

# ruby-on-rails - “模型的未定义方法`build'（id：整数，created_at：datetime，updated_at：datetime）：类”

> ID：14250371
> 
> 赞同：1
> 
> 时间：2013-01-10T03:26:13.670
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我想创建功能 1) 用户在表单中输入名字、姓氏 2) 表单已提交 3) 显示视图已加载，文本的某些部分被参数替换 4) 如果表单无效，即名字存在不正确，则显示错误

* * *

我已经设法为步骤 1-3 创建了功能。当一个人在表单中输入详细信息时，它会转移到不同的视图。现在，我想做的是验证表单的某些部分。

这些信息都没有保存在数据库中，但我记得我可以使用模型来验证表单。

我试图做的是创建一个模型，添加一个 attr_accessor，并对其进行验证。当表单发布时，它会在创建操作中构建一个变量，我可以做一个 if/than 语句。

当我尝试这个时，我得到了错误：

```
NoMethodError in ContentController#create

undefined method `build' for Content(id: integer, created_at: datetime, updated_at: datetime):Class 
```

这是我的 Content#create 的样子

```
def create
    @content = Content.build(:params)
    if @content.valid?
        render 'content/show'
    else
        render 'content/new'
    end

end 
```

这是表单的视图：

```
<%= form_tag("/content", :method => "post", :id => "form" ) do %>

      <h4>The Doctor's Name</h2>
  <div class="row">
      <div class="span4">
      <%= label_tag(:first_name, "First Name") %>
      <%= text_field_tag :first_name, nil, placeholder: "ex: James" %>
      </div>
      <div class="span4">
      <%= label_tag(:last_name, "Last Name") %>
      <%= text_field_tag :last_name, nil, placeholder: "ex: Bond" %>
      </div>
      <div class="span4">
      <%= label_tag(:full_name, "Full Name") %>
      <%= text_field_tag :full_name, nil, placeholder: "ex: James Bond" %>
      </div>

  </div><!--form_item row-->
  <div class="form_explanation">
    <div class="alert alert-block">
        Enter's The Doctor's First Name, Last Name, And Than The Full Name. Do NOT include "Dr."
    </div>
  </div>

  <div class="pagination-centered">
  <%= submit_tag( raw("Generate The Content!"), :class => "btn btn-large btn-primary", :style => "font-weight:bold") %>
  </div>

<% end %> 
```

这就是我的模型的样子：

```
class Content < ActiveRecord::Base

    attr_accessible :first_name, :last_name, :full_name
    attr_accessor :first_name
    attr_accessor :last_name
    attr_accessor :full_name

    validates :first_name, presence: true
    validates :last_name, presence: true
    validates :full_name, presence: true

end 
```

我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T04:02:21.827

我正在寻找解决我问题的短语是“无表格模型”。

本教程向您展示如何做到这一点[——http://railscasts.com/episodes/219-active-model](http://railscasts.com/episodes/219-active-model)

您现在可以使用 form_for，而不是使用 form_tag，这就是我的模型最终的样子：

```
class Content
  include ActiveModel::Validations
  include ActiveModel::Conversion
  extend ActiveModel::Naming

    attr_accessor :first_name, :last_name, :full_name

    validates :first_name, presence: true
    validates :last_name, presence: true
    validates :full_name, presence: true

  def initialize(attributes = {})
    attributes.each do |name, value|
      send("#{name}=", value)
    end
  end

  def persisted?
    false
  end

end 
```

# .net - 如何动态更改表单的语言

> ID：14250381
> 
> 赞同：0
> 
> 时间：2013-01-10T03:27:11.657
> 
> 标签：.net, winforms, localization, globalization

> **可能重复：**
> [如何在运行时更改 WinForms 应用程序的文化](https://stackoverflow.com/questions/7556367/how-do-i-change-the-culture-of-a-winforms-application-at-runtime)

我使用 xml 文件作为具有 lang_en 和 lang_de 的语言属性文件，从“名称”“值”对读取，但是如何单击“确定”按钮，表单应该动态更改。？我正在使用下拉列表来选择语言。

# javascript - 在 JavaScript 中设置变量的值

> ID：14250382
> 
> 赞同：0
> 
> 时间：2013-01-10T03:27:14.837
> 
> 标签：javascript, jquery

正如您在以下代码中看到的那样，我正在从 MySQL 数据库中获取数据，但是当我想使用获取的“位置”来设置谷歌地图上标记的“位置”时，我遇到了困难。

```
<head>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=xxxxxxxxxxxxxxxxxxxxx&sensor=true"></script>
<script>
  $.getJSON('http://www.wawhost.com/appProject/fetchmarker.php?callback=?', function(data) {
    for (var i = 0; i < data.length; i++) {
      localStorage.loc = data[i].location;
    }
  });
</script>
<script>
  function initialize() {
    var myLatlng = new google.maps.LatLng(-25.363882, 131.044922);
    var mapOptions = {
      zoom: 4,
      center: myLatlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

    var marker = new google.maps.Marker({
      position: 'new google.maps.LatLng(' + localStorage.loc + ')',
      map: map,
      title: 'Hello World!'
    });
  }
</script>
</head>

<body onload="initialize()">
<div id="map_canvas"></div>
</body> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T03:32:47.917

在页面加载后发出请求，并`initialize`从 AJAX 成功回调中调用该函数。

```
$(function() {
  $.getJSON('http://www.wawhost.com/appProject/fetchmarker.php?callback=?', function(data) {
     for (var i = 0; i < data.length; i++) {
       localStorage.loc = data[i].location;
     }
     initialize();
  });
}); 
```

此外，这条线看起来有点粗略。`position`应该是新的`google.maps.LatLng`。

```
position: 'new google.maps.LatLng(' + localStorage.loc + ')'. 
```

`LatLng`采用纬度和经度参数来构造对象。您从请求中存储的是一个*字符串*，其中包含逗号分隔的 lat 和 long 值。

```
// First split the string into lat and long.
var pos = localStorage.loc.split(",");
// Parse the strings into floats.
var lat = parseFloat(pos[0]);
var lng = parseFloat(pos[1]);    
// Create a new marker with the values from the request.  
var marker = new google.maps.Marker({
  position: new google.maps.LatLng(lat, lng),
  map: map,
  title: 'Hello World!'
}); 
```

在这里试试[。](http://jsfiddle.net/BWfxw/3/)

# oauth-2.0 - 2-legged oauth 在 OAuth 2.0 中如何工作？

> ID：14250383
> 
> 赞同：56
> 
> 时间：2013-01-10T03:27:17.407
> 
> 标签：oauth-2.0, 2-legged

在 OAuth 1.0 中，2-legged 非常容易：只需像往常一样发送请求并省略`access_token`标头。

OAuth 2.0 中的情况似乎发生了变化（正如我今天发现的那样：)）。在 OAuth 2.0 中，请求不再有诸如随机数、消费者密钥、时间戳等标头。这只是替换为：

```
Authorization: OAuth ya29.4fgasdfafasdfdsaf3waffghfhfgh 
```

我了解 OAuth 2.0 和应用程序流程中的 3 条腿授权如何工作。但是 2-legged 在 2.0 中是如何工作的呢？是否可以设计一个同时支持 2-legged 和 3-legged OAuth 2.0 的 API？

我一直在寻找有关这方面的信息，但我在 1.0 的 2-legged 上找到了很多东西，而 2.0 几乎没有。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-01-10T05:03:55.713

经过大量研究，我发现`client_credentials`授予类型适用于这种情况。一旦你把这个词打进谷歌，你会发现很多非常有用的资源。

这是 3-legged OAuth 2.0 的正常流程（我们希望用户登录）：

假设我们的应用中有以下端点用于身份验证：

```
/oauth/auth

/oauth/token 
```

通常（对于授权码授予），我们指导用户`/oauth/auth?state=blah&client_id=myid&redirecturl=mysite.com/blah`

然后在认证后，用户被重定向到`mysite.com/blah?code=somecode`

然后我们`somecode`使用`/oauth/token?code=somecode&client_id=myid&client_secret=mysecret`

然后我们可以使用令牌进行调用。

* * *

这是`client_credentials`实现 2-legged OAuth 2.0 的应用程序流程，它明显更简单：

*   在这种方法中，我们不需要执行任何身份验证。

*   我们只需 POST 到`/oauth/token`以下表单数据：

    ```
     grant_type=client_credentials&scope=view_friends 
    ```

请注意，范围是可选的。然后端点直接返回一个访问令牌供我们使用（不提供刷新令牌）。由于没有提供刷新令牌，因此当令牌过期时，您将需要重新进行身份验证并请求一个新令牌。

这导致以下警告：

*   仅将其用于（非常非常）受信任的应用程序，例如内部应用程序。
*   您需要设计自己的身份验证方式。例如，[RFC 的示例](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31#section-4.4.2)使用基本身份验证。

另一种解决方案是使用 JWT（JSON Web 令牌），例如[google OAuth API](https://developers.google.com/accounts/docs/OAuth2ServiceAccount#libraries)。这是一个非常复杂的过程，但是存在许多用于生成 JWT 的库。然后，您发布以下表单数据（当然是 url 编码）：

```
grant_type=urn:ietf:params:oauth:grant-type:jwt-bearer&assertion=generated_jwt 
```

这是`/oauth/token`为了获取您的令牌而发布的。

* * *

至于**是否可以创建支持 2-legged 和 3-legged OAuth 2.0 的 API**的问题，**是的，可以**。

然后`/auth`端点仅在用户需要对服务进行身份验证时使用。

在`/token`端点中，只需检查`grant_type`GET 参数中的值`urn:ietf:params:oauth:grant-type:jwt-bearer`是否使用 JWT 或`client_credentials`client_credentials。

请注意，在生成 client_id 和 client_secret 以提供给用户时，如果您支持 multiple `grant_types`，请确保您有一个数据库列来存储生成 id 和 secret 的授权类型。如果需要为每个用户提供多种授权类型，请为每种授权类型生成一组不同的凭据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-22T02:11:30.993

您还可以查看 Google 的[2-legged OAuth2](http://developers.google.com/accounts/docs/OAuth2ServiceAccount)实现（我相信该文档最近才发布）。

[Google Drive SDK 委托文档](https://developers.google.com/drive/delegation)也应该有助于理解 Google的2-legged OAuth2 实现。

# php - Paypal 立即购买按钮传递一些变量但不是全部

> ID：14250384
> 
> 赞同：1
> 
> 时间：2013-01-10T03:27:23.383
> 
> 标签：php, paypal

我在为客户的网站创建 Paypal 立即购买按钮时遇到问题。名字、姓氏、电子邮件地址和商品名称都在通过，但帐单地址和价格都在通过。对于应该是一个简单的过程来说非常奇怪。这是我的代码：

```
$invoicenumber = $row['InvoiceNumber'];
$totalquantity = $row['TotalQuantity'];
$totalprice = $row['TotalPrice'];
$costofshipping = $row['CostOfShipping'];
$firstname = $row['FirstName'];
$lastname = $row['LastName'];
$billingstreetaddress = $row['BillingStreetAddress'];
$billingapartmentnumber = $row['BillingApartmentNumber'];
$billingcity = $row['BillingCity'];
$billingstate = $row['BillingState'];
$billingzipcode = $row['BillingZipCode'];
$emailaddress = $row['EmailAddress'];
echo "<form action='https://www.paypal.com/cgi-bin/webscr' method='post'>
<input type='hidden' name='cmd' value='_s-xclick'>
<INPUT TYPE='hidden' NAME='business' VALUE='payments@companyname.com'>
<INPUT TYPE='hidden' NAME='invoice' VALUE='$invoicenumber'>
<INPUT TYPE='hidden' NAME='undefined_quantity' VALUE='$totalquantity'>
<INPUT TYPE='hidden' NAME='item_name' VALUE='CompanyNamePurchase'>
<INPUT TYPE='hidden' NAME='amount' VALUE='$totalprice'>
<INPUT TYPE='hidden' NAME='shipping' VALUE='$costofshipping'>
<INPUT TYPE='hidden' NAME='currency_code' VALUE='USD'>
<INPUT TYPE='hidden' NAME='first_name' VALUE='$firstname'>
<INPUT TYPE='hidden' NAME='last_name' VALUE='$lastname'>
<INPUT TYPE='hidden' NAME='address1' VALUE='$billingstreetaddress'>
<INPUT TYPE='hidden' NAME='address2' VALUE='$billingapartmentnumber'>
<INPUT TYPE='hidden' NAME='city' VALUE='$billingcity'>
<INPUT TYPE='hidden' NAME='state' VALUE='$billingstate'>
<INPUT TYPE='hidden' NAME='zip' VALUE='$billingzipcode'>
<INPUT TYPE='hidden' NAME='lc' VALUE='US'>
<INPUT TYPE='hidden' NAME='email' VALUE='$emailaddress'>
input type='hidden' name='hosted_button_id' value='paypalclientnumber'>
<input type='image' id='paypalsubmitbutton' style='top:750px;left:65%;position:absolute;'     src='https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif' border='0'    name='submit' alt='PayPal - The safer, easier way to pay online!'>
<img alt='' border='0' src='https://www.paypalobjects.com/en_US/i/scr/pixel.gif'    width='1' height='1'>
</form>"; 
```

/* 这是源代码——你可以看到没有发票号码通过，价格和数量为零，地址在那里，但没有通过贝宝。运费也在那里。*/

```
<form action='https://www.paypal.com/cgi-bin/webscr' method='post'>
<input type='hidden' name='cmd' value='_s-xclick'>
<INPUT TYPE='hidden' NAME='business' VALUE='payments@companyname.com'>
<INPUT TYPE='hidden' NAME='invoice' VALUE=''>
<INPUT TYPE='hidden' NAME='undefined_quantity' VALUE='0'>
<INPUT TYPE='hidden' NAME='item_name' VALUE='CompanyNamePurchase'>
<INPUT TYPE='hidden' NAME='amount' VALUE='0.00'>
<INPUT TYPE='hidden' NAME='shipping' VALUE='7.00'>
<INPUT TYPE='hidden' NAME='currency_code' VALUE='USD'>
<INPUT TYPE='hidden' NAME='first_name' VALUE='Multigrain'>
<INPUT TYPE='hidden' NAME='last_name' VALUE='Cheerios'>
<INPUT TYPE='hidden' NAME='address1' VALUE='2 Spoonful Way'>
<INPUT TYPE='hidden' NAME='address2' VALUE='myemailaddress@email.com'>
<INPUT TYPE='hidden' NAME='city' VALUE='Brooklyn'>
<INPUT TYPE='hidden' NAME='state' VALUE='New York'>
<INPUT TYPE='hidden' NAME='zip' VALUE='11203'>
<INPUT TYPE='hidden' NAME='lc' VALUE='US'>
<INPUT TYPE='hidden' NAME='email' VALUE=''>
<input type='hidden' name='hosted_button_id' value='paypalidjumbledletters&#s'>
<input type='image' id='paypalsubmitbutton'     style='top:750px;left:65%;position:absolute;' src='https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif' border='0' name='submit' alt='PayPal - The safer, easier way to pay online!'>
<img alt='' border='0' src='https://www.paypalobjects.com/en_US/i/scr/pixel.gif' width='1' height='1'>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T23:49:14.377

除了确保按钮是非托管按钮之外，如果您在传递地址变量时遇到问题，请确保状态是缩写的，即 MA 而不是马萨诸塞州。这一直是我的解决方案。

# c# - 使用 Revit API 的 BDD/TDD

> ID：14250387
> 
> 赞同：0
> 
> 时间：2013-01-10T03:28:09.897
> 
> 标签：c#, .net, nunit, revit, revit-api

我的问题与[这个](https://stackoverflow.com/q/12336047/1815825)问题有关，但我以某种方式更进一步并使用 nunit 实现了一个测试框架。

当我在 Revit 中运行测试框架插件时，测试框架会以某种方式锁定测试程序集，从而无法重新编译测试程序集。为了解决这个问题，我尝试制作一个影子副本，以便 nunit 测试运行器在复制的程序集上运行。但是一旦我第一次运行测试，**后续**的测试运行就不能在更新的副本上运行。这就像测试运行器缓存 dll 并总是尝试在缓存的副本上运行测试。

所以每次更新测试程序集时，我都需要关闭重新打开 Revit 来运行测试，这真的很痛苦。我为 Revit 实施测试框架的主要原因是能够使用 Revit API 进行 BDD/TDD。

这是我如何运行测试的代码片段：

```
 TestPackage theTestPackage = new TestPackage(testDll);
    RemoteTestRunner testRunner = new RemoteTestRunner();
    testRunner.Load(theTestPackage);
    TestResult testResult = testRunner.Run(new NullListener()); 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:15:27.097

您可以尝试加载程序集以使用该`Assembly.Load(byte[])`方法进行测试。我不确定您的测试运行程序是否可以处理此问题，但这将为您提供一个从内存中的字节流加载的程序集。因此，可以随时重新编译原始程序集文件，并且您可以根据需要加载任意多个此程序集的并发版本。它们都是独立的，具有不同的类型。

我使用 RevitPythonShell 脚本[loadplugin.py](http://code.google.com/p/revitpythonshell/wiki/FeaturedScriptLoadplugin)的类似策略在运行时加载插件，然后运行它们进行测试。除了在 XAML 中定义的 WPF 控件外，这似乎工作得很好。我怀疑 XAML 解析器和加载器会保留类型的缓存，但由于时间限制，还无法对此进行调查。

# c# - 在 C# 中更改 DataTable 的方法？

> ID：14250388
> 
> 赞同：1
> 
> 时间：2013-01-10T03:28:21.597
> 
> 标签：c#, datetime, datatable, formatting

我会尽可能清楚地解释我的情况。

我有一个包含多个数据的 DataTable，这些数据稍后会生成报告。它的一列是 DateTime 类型。问题是当报告显示日期时，它们以长格式“10/14/1996 12:00:00 AM”显示，它们需要以“DD-MMM-YYYY”格式显示。

我尝试了几件事来将 dataTable 中的值更改为所需的格式。我试过这个：

```
 for (int i = 0; i < dt.Rows.Count; i++)
            {
                DateTime cellValueDateOfBirth=Convert.ToDateTime(dt.Rows[i][indexDateOfBirth]);
                string formattedDateOfBirth = cellValueDateOfBirth.ToString("DD-MMM-YYYY");
                dt.Rows[i].SetField(indexDateOfBirth, formattedDateOfBirth);
                dt.Rows[i].ItemArray.SetValue(formattedDateOfBirth, indexDateOfBirth);
             } 
```

哪个不起作用，因为当我调试时，我看到

```
string test = dt.Rows[i].ItemArray[indexDateOfBirth].ToString(); 
```

正如我所料，未设置为 formattedDateOfBirth 的值。并且仍然使用未格式化的日期生成报告。

我尝试了更多方法来更改该日期的值，但没有成功。

我真的不关心所有的 dateTime 数据，所以我认为创建一个包含所有格式化值的数组是一个好主意（如果不能简单地更改日期列的值），然后找到一种方法来删除具有未格式化日期的列，并将其替换为使用格式化日期创建的新数组（如果可能，在其原始位置）。我已经创建了数组，但不知道如何用数组中的值替换列值。这是我到目前为止所拥有的：

```
 string[] FormattedDatesOfBirth = new string[dt.Rows.Count];
                for (int i = 0; i < dt.Rows.Count; i++)
                {
                    DateTime cellValueDateOfBirth=Convert.ToDateTime(dt.Rows[i][indexDateOfBirth]);
                    string formattedDateOfBirth = cellValueDateOfBirth.ToString(EMR.HelperClasses.Core.chsDateFormat);

                    FormattedDatesOfBirth[i] = formattedDateOfBirth;

                }
                //then here I would create a column with the data in FormattedDatesOfBirth[] 
```

其他一些想法是复制 DataTable，但不复制未格式化的列，而是添加格式化值的数组。

你认为这可能吗？还有另一种方法可以做到这一点吗？也许我尝试以错误的方式更改值...

我真的不确定是否还有其他更好的解决方案，我很乐意听到您的所有建议，我对此一无所知。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T03:33:25.290

您可以查看 C# 中的帖子[如何更改 DataTable 中的数据吗？](https://stackoverflow.com/questions/1666087/c-sharp-how-to-change-data-in-datatable)看看它们中的任何一个是否适用于你？特别是[https://stackoverflow.com/a/9998257/1520364](https://stackoverflow.com/a/9998257/1520364)

你不能只使用[ToShortDateString](http://msdn.microsoft.com/en-us/library/system.datetime.toshortdatestring.aspx)函数来直接输出`DateTime`你想要的对象吗？[或者，使用ToString](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)的这种重载来提供您想要的格式，类似于 Brian 建议的。

# asp.net - 将 .aspx 页面放入文件夹时，母版页中的图像消失

> ID：14250398
> 
> 赞同：1
> 
> 时间：2013-01-10T03:30:23.530
> 
> 标签：asp.net, html, master-pages

我知道这可能是一个愚蠢的问题，但我在这里找不到任何关于它的信息。我的解决方案资源管理器的根目录中有一个母版页，只需将一个 .aspx 页面放在一个新文件夹中。母版页正在引用另一个文件夹中的图像，当我预览页面时，它是一个损坏的图像。我需要做什么才能让页面从母版页加载图像？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T03:38:12.083

您必须使用相对路径。下面是一个例子：

```
<asp:Image ImageUrl="~/Images/orderedList1.png" runat="server" />
<img src="~/Images/orderedList0.png" runat="server" /> 
```

不使用asp.net控件别忘了加上runat="server"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T03:33:11.933

好吧，通过不发布带有图像引用的标记，您让我们猜测发生了什么。

但是这个怎么样：您只有图像的部分（相对）路径，并且该路径从您的 aspx 文件的位置无效。

我猜对了吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T03:33:34.657

您可能正在引用没有路径的图像。

在 MasterPage 中加载子页面时，“当前”目录将更改为子页面的目录。所以相对路径发生了变化。

# amazon-web-services - AWS 支持 EBS 的实例也可以访问“实例存储吗？

> ID：14250399
> 
> 赞同：1
> 
> 时间：2013-01-10T03:30:31.613
> 
> 标签：amazon-web-services

我以为我清楚地理解了实例存储和 EBS 支持的 AMI 之间的区别。
但是[http://aws.amazon.com/maintenance-help/](http://aws.amazon.com/maintenance-help/)说“如果您正在运行由 EBS 支持的 AMI，您可以停止然后重新启动您的实例，以便轻松地重新启动它。这将导致您保存在实例的本地实例存储中的任何数据"

停止/启动不会丢失 sysvol 数据，所以这让我很困惑。

我假设在这里，“本地实例存储”是指支持 EBS 卷（sysvol），我认为他们的意思是说“终止”而不是停止。我对么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T03:34:29.970

终止 EBS 支持的实例不会导致您的数据被删除。您仍然可以访问 EBS 卷，直到您将其删除（除非您将其设置为在实例终止时删除）。

本地实例存储是指运行实例的实际物理服务器上的硬盘空间。您可以通过执行来查看可用的实例存储`sudo fdisk -l`。一些映像附带一些已安装的实例存储卷（请参阅 参考资料`df -h`）。否则，您必须先挂载和格式化实例存储卷，然后才能使用它们。

当您停止（而不是终止）实例时，实例存储卷上的数据会丢失，因为它位于物理服务器的本地，并且您的实例可能会在新服务器上启动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T03:46:01.697

很简单，EC2 在某个物理服务器上运行您的虚拟服务器。根文件系统可以位于本地磁盘（临时存储）或网络附加存储（EBS）上。使用 EBS，他们可以对其进行快照以进行备份或制作副本，因此 EBS 更加灵活，尽管不如运行实例的服务器中的本地磁盘快。

为了使这一切正常工作，当您关闭临时服务器时，亚马逊会擦除磁盘以便将其重新分配给下一个客户。他们没有必要也没有理由对 EBS 这样做，因为它一开始并没有物理连接到该服务器。

您可能会注意到，即使是 EBS 支持的实例（取决于大小）也带有临时存储分配 (2-500gig+)，可用于交换、日志或您想要对它们执行的任何其他操作。当然，唯一的问题是如果服务器关闭，或者出现灾难性磁盘或硬件错误，您将丢失该数据。您仍然可以手动备份它，就像人们多年来备份传统服务器一样。

从 EBS 支持的服务器创建您自己的 AMI 现在很简单，并且可以通过 AWS Web 界面轻松完成。上次我尝试做一个非 EBS 支持的 AMI 是一项非常复杂的任务。话虽如此，在某些用例中，考虑使用纯临时存储是很有意义的。不需要持久化数据的计算或内存/缓存节点将更快且成本更低。

# java - 无法与 Android 自定义对话框交互

> ID：14250404
> 
> 赞同：3
> 
> 时间：2013-01-10T03:31:53.353
> 
> 标签：java, android, customdialog, dice

好吧，请多多包涵，因为我没有太多地使用自定义对话框（或真正的 Android 编程），而且我确信我犯了一个愚蠢的初学者错误。

所以我有一个简单的掷骰子应用程序，我正试图将它整合到我现有的应用程序中，但我想把它作为一个弹出窗口来做。到目前为止，我发现的解决方案是扩展一个对话框类并将应用程序中的 xml 用作自定义布局。这实际上显示了预期的输出，但不允许我与之交互（即它在屏幕上显示骰子但我不能滚动它们！）。

我正在调用的 java 类是这样的：

```
import java.io.IOException;
import java.util.Random;
import com.zeldar.scanner.R;
import android.app.Activity;
import android.content.res.Resources;
import android.graphics.drawable.Drawable;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.media.MediaPlayer;

import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageView;
import android.widget.LinearLayout;

public class RollDice extends Activity implements SensorEventListener {
    private final int rollAnimations = 50;
    private final int delayTime = 15;
    private Resources res;
    private final int[] diceImages = new int[] { R.drawable.d1, R.drawable.d2, R.drawable.d3, R.drawable.d4, R.drawable.d5, R.drawable.d6 };
    private Drawable dice[] = new Drawable[6];
    private final Random randomGen = new Random();
    @SuppressWarnings("unused")
    private int diceSum;
    private int roll[] = new int[] { 6, 6 };
    private ImageView die1;
    private ImageView die2;
    private LinearLayout diceContainer;
    private SensorManager sensorMgr; 
    private Handler animationHandler;
    private long lastUpdate = -1;
    private float x, y, z;
    private float last_x, last_y, last_z;
    private boolean paused = false;
    private static final int UPDATE_DELAY = 50;
    private static final int SHAKE_THRESHOLD = 400;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        paused = false;
        super.onCreate(savedInstanceState);
        setContentView(R.layout.dice);
        setTitle(getString(R.string.app_name));
        res = getResources();
        for (int i = 0; i < 6; i++) {
            dice[i] = res.getDrawable(diceImages[i]);
        }
        diceContainer = (LinearLayout) findViewById(R.id.diceContainer);
        diceContainer.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                try {
                    rollDice();
                } catch (Exception e) {};
            }
        });
        die1 = (ImageView) findViewById(R.id.die1);
        die2 = (ImageView) findViewById(R.id.die2);
        animationHandler = new Handler() {
            public void handleMessage(Message msg) {
                die1.setImageDrawable(dice[roll[0]]);
                die2.setImageDrawable(dice[roll[1]]);
            }
        };
        sensorMgr = (SensorManager) getSystemService(SENSOR_SERVICE);
        boolean accelSupported = sensorMgr.registerListener(this,
                sensorMgr.getDefaultSensor(SensorManager.SENSOR_ACCELEROMETER), SensorManager.SENSOR_DELAY_GAME);
        if (!accelSupported) sensorMgr.unregisterListener(this); //no accelerometer on the device
        rollDice();
    }

    private void rollDice() {
        if (paused) return;
        new Thread(new Runnable() {
            @Override
            public void run() {
                for (int i = 0; i < rollAnimations; i++) {
                    doRoll();
                }
            }
        }).start();
        MediaPlayer mp = MediaPlayer.create(this, R.raw.roll);
        try {
            mp.prepare();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        mp.start();
    }

    private void doRoll() { // only does a single roll
        roll[0] = randomGen.nextInt(6);
        roll[1] = randomGen.nextInt(6);
        diceSum = roll[0] + roll[1] + 2; // 2 is added because the values of the rolls start with 0 not 1
        synchronized (getLayoutInflater()) {
            animationHandler.sendEmptyMessage(0);
        }
        try { // delay to alloy for smooth animation
            Thread.sleep(delayTime);
        } catch (final InterruptedException e) {
            e.printStackTrace();
        }
    }

    public void onResume() {
        super.onResume();
        paused = false;
    }

    public void onPause() {
        super.onPause();
        paused = true;
    }

    @Override
    public void onSensorChanged(SensorEvent event) {
        Sensor mySensor = event.sensor;
        if (mySensor.getType() == SensorManager.SENSOR_ACCELEROMETER) {
            long curTime = System.currentTimeMillis();
            if ((curTime - lastUpdate) > UPDATE_DELAY) {
                long diffTime = (curTime - lastUpdate);
                lastUpdate = curTime;
                x = event.values[SensorManager.DATA_X];
                y = event.values[SensorManager.DATA_Y];
                z = event.values[SensorManager.DATA_Z];
                float speed = Math.abs(x + y + z - last_x - last_y - last_z) / diffTime * 10000;
                if (speed > SHAKE_THRESHOLD) { //the screen was shaked
                    rollDice();
                }
                last_x = x;
                last_y = y;
                last_z = z;
            }
        }
    }

    @Override
    public void onAccuracyChanged(Sensor sensor, int accuracy) {
        return; //this method isn't used
    }
} 
```

这是布局xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

    android:id="@+id/diceContainer"
    android:orientation="vertical"
    android:gravity="center"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp" >

    <ImageView
        android:id="@+id/die1" 
        android:src="@drawable/d6"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_marginBottom="15dp"
        android:contentDescription="@string/content_dice" />

    <ImageView
        android:id="@+id/die2"
        android:src="@drawable/d6"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:contentDescription="@string/content_dice" />

</LinearLayout> 
```

最后，我用来创建对话框的调用：

```
private Dialog rollDice;

rollDice = new Dialog(ScanActivity.this);
rollDice.setContentView(R.layout.dice);
rollDice.setTitle("Roll Dice");
rollDice.setCancelable(true);
rollDice.show(); 
```

澄清一下：最令人困惑的部分是我没有收到错误，无论是在编译还是运行时，它只是弹出窗口并且不会让我对它做任何事情（除了关闭）！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T03:53:41.617

如果您想要对话框之类的东西，我建议您使用带有对话框主题的活动。恕我直言，这将允许它像对话框一样“弹出”，但为您提供更大的灵活性和更容易操作。创建一个单独的活动以打开并将其添加到活动的清单中

`<activity android:theme="@android:style/Theme.Dialog">`

[主题](http://developer.android.com/guide/topics/ui/themes.html)

可能有更好的方法来做到这一点，但我认为这可能对你有用。

# linux - 如何用awk比较linux中多个文件中的两列

> ID：14250405
> 
> 赞同：2
> 
> 时间：2013-01-10T03:32:15.953
> 
> 标签：linux, awk

我有这个代码

```
[motaro@Cyrax ]$ awk '{print $1}' awk1.txt awk2.txt
line1a
line2a
file1a
file2a 
```

它显示了两个文件中的 ccolumns

我怎样才能找到`$1(of file 1)`and `$1(of file2)`，分别

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T06:04:47.987

根据上面的评论，对于三个或更多文件，设置条件如下：

```
FILENAME == ARGV[1] 
```

例如：

```
awk 'FILENAME == ARGV[1] { print $1 } FILENAME == ARGV[2] { print $1 } FILENAME == ARGV[3] { print $1 }' file1.txt file2.txt file3.txt 
```

或者，如果您有大量文件：

将条件更改为：

```
FILENAME == "file1.txt" 
```

例如：

```
awk 'FILENAME == "file1.txt" { print $1 } FILENAME == "file2.txt" { print $1 } FILENAME == "file3.txt" { print $1 }' *.txt 
```

* * *

您可能还想阅读有关变量[ARGC 和 ARGV](http://www.gnu.org/software/gawk/manual/html_node/ARGC-and-ARGV.html)的更多信息。如果有什么需要更多解释，请告诉我。干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T06:23:33.677

我不确定你到底需要什么。可能您需要预定义的变量：`FILENAME`

```
awk '{print $1,FILENAME}' awk1.txt awk2.txt 
```

上述命令将输出：

```
line1a awk1.txt 
line2a awk1.txt 
file1a awk2.txt 
file2a awk2.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T03:48:40.297

```
awk 'NR==FNR{a[FNR]=$0;next} {print a[FNR],$0}' file_1 file_2 
```

在[这里找到](http://objectmix.com/awk/762171-how-merge-two-files-row-row.html)

# php - 使用 PHP 通过表单发布 URL 时触发错误 403

> ID：14250412
> 
> 赞同：6
> 
> 时间：2013-01-10T03:32:50.853
> 
> 标签：php, javascript, forms, url

在 apache 共享主机上使用 PHP 通过表单发布 URL 时遇到 403 Forbidden 错误。

从现有问题（[表单提交上的错误 403](https://stackoverflow.com/questions/2092056/error-403-on-form-submit)）来看，这很可能是由服务器上安装的 mod_security 引起的。

由于我使用的是共享主机，因此我无法轻松禁用该模块，因此我实施了一个[JavaScript 解决方案](http://edrackham.com/javascript/solution-to-form-submit-403-error/)来在发布数据之前去除**http:// 。**

这工作了一段时间，但不幸的是，错误仍然是由一些较长的网址触发的。

在发布 URL 之前，我是否可以使用其他方法来清理 URL，这样它就不会触发这样的安全模块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T10:49:24.017

我遇到了类似的问题，我所做的是要求我的托管服务提供商为该特定页面添加 mod_security 排除项，并且已修复。另一种方法是禁用 mod_security，他们不想这样做:)

您可能会尝试的另一件事是在提交按钮上使用 Javascript 操作，该操作对 URL 进行 base64 编码，然后使用该编码值提交表单。然后，在服务器端，你解码它。

希望这可以帮助。

# html - CSS/HTML 代码不工作，字体没有被应用

> ID：14250414
> 
> 赞同：5
> 
> 时间：2013-01-10T03:33:00.890
> 
> 标签：html, css, input

当我尝试运行这个 CSS/HTML 代码（这是在 webkit 浏览器中）时，它不起作用。输入框中的字体没有应用 Lato 字体：

```
<html>
    <head>
        <link href='http://fonts.googleapis.com/css?family=Lato:300' rel='stylesheet'
        type='text/css'>
        <title>Dumb Search</title>
        <meta name="apple-mobile-web-app-capable" content="yes"
        />
        <link rel="apple-touch-icon-precomposed" href="../ds.png" />
        <meta name="viewport" content="width = device-width, user-scalable = no, initial-scale = 0.8">
        <style>
            .box {
                padding:20px;
                width:290px;
                box-shadow:0px 1px 3px -1px #c3c3c3;
                background-color:white;
                color:gray;
                font-family:Lato;
                text-align:left;
            }

        </style>
    </head>
    <body bgcolor="#f5f5f5">
        <center>
            <br>
            <div style="position:relative;width:342px;">
                <form action="searchcompleted.php" style="display:inline;">
                    <input name="q" value="Search, or tap the camera" class="box" style="border:0;outline:0;width:340px;color:#A0A0A0;padding-top:15px;padding-bottom:15px;"
                    onfocus="if (this.value == 'Search, or tap the camera') {this.value = '';}"
                    onblur="if (this.value == '') {this.value = 'Search, or tap the camera';}">
                </form>
                <img src="http://i45.tinypic.com/30vkbhj.jpg" style="position:absolute;top:0px;left:278px;opacity:0.4;height:30px;padding:15px;padding-right:17px;"
                onclick='void(0);document.getElementById("thisone").click();'>
                <form style="display:inline;" action="http://www.dumbsearch.com/dumbocr/post.php"
                method="post" enctype="multipart/form-data" id="sniff">
                    <input accept="image/*" type="file" style="display:none;" id="thisone"
                    onchange='document.getElementById("scan").style.display="block";' name="photo">
                    <div onclick='void(0);document.getElementById("sniff").submit();' style="position:absolute;top:65px;left:195px;background-color:white;border:0;box-shadow: 0px 1px 3px -1px #C3C3C3;padding:20px;color:#0EBFE9;padidng-left:25px;padding-right:25px;z-index:4;display:none;font-family:Lato;"
                    id="scan">Touch to scan</div>
                </form>
            </div>
            <br>
            <div class="box">ï»¿</div>
    </body>

</html> 
```

非常感谢你hh！提前！

**编辑：**看这里： http: [//pastehtml.com/view/cokmdi9yg.html](http://pastehtml.com/view/cokmdi9yg.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T08:29:40.763

在字体系列中试试这个

```
 @font-family
{
font-family: FirstFont;
src: url('.ttf');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T12:23:04.683

这个问题显然根本不是关于字体，或者特别是关于谷歌字体，而是关于*字体大小*。浏览器通常会在输入框中应用缩小的字体大小，例如复制文本大小的 90%。如果您使用 Chrome 中的开发人员工具 (F12) 检查页面，您可以看到应用于元素的声明之一是`font: -webkit-small-control`. 这将设置字体系列和字体大小，您现在只覆盖字体系列部分。

例如，要使输入框中的文本与一般文档正文中的文本相同（或者，正式地，与周围元素中的文本相同），只需添加以下 CSS 规则：

```
input { font-size: 100%; } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-10T05:48:45.333

字体系列“lato”在 CSS 中不可用，因此请使用此代码导入“Lato”。下载Lato的ttf和eot文件。

```
@font-face
{
font-family: FirstFont;
src: url('.ttf'),
     url('.eot'); 
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-10T04:45:22.337

像这样键入`font family`声明：`font-family: 'Lato';`它必须用引号引起来。

# ios - 自定义“按下” UIBarButtonItem 背景

> ID：14250419
> 
> 赞同：8
> 
> 时间：2013-01-10T03:33:18.610
> 
> 标签：ios, objective-c, uiimage, uibarbuttonitem

我正在尝试为我的 UIBarButtonItem 设置自定义按下的图像，但似乎没有任何效果。据我了解，下面的代码应该可以工作，但是尽管将图像设置为突出显示状态，但按下时按钮看起来完全一样。

有任何想法吗？

```
UIImage *barButtonBackground = [[UIImage imageNamed:ANBarButtonItemBackgroundImageName] resizableImageWithCapInsets:UIEdgeInsetsMake(5.0f,5.0f, 5.0f, 5.0f)];
UIImage *barButtonPressedBackground = [[UIImage imageNamed:ANBarButtonPressedImageName] resizableImageWithCapInsets:UIEdgeInsetsMake(5.0f,5.0f, 5.0f, 5.0f)];

[self.navigationItem.leftBarButtonItem setBackgroundImage:barButtonBackground forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[self.navigationItem.rightBarButtonItem setBackgroundImage:barButtonBackground forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];

[self.navigationItem.leftBarButtonItem setBackgroundImage:barButtonPressedBackground forState:UIControlStateHighlighted barMetrics:UIBarMetricsDefault];
[self.navigationItem.rightBarButtonItem setBackgroundImage:barButtonPressedBackground forState:UIControlStateHighlighted barMetrics:UIBarMetricsDefault]; 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-19T11:04:57.970

我认为您应该为与您的配色方案匹配的不同**控件状态**`custom UIButton`创建一个带有**背景图像**，然后将其用作.**`UIButton``custom UIBarButtonItem`**

 **```
UIButton *customButton = [UIButton buttonWithType:...];

[customButton setBackgroundImage:barButtonBackground  forState:UIControlStateNormal];
[customButton setBackgroundImage:barButtonPressedBackground  forState:UIControlStateSelected];

UIBarButtonItem *barButtonItem = [[UIBarButtonItem alloc] initWithCustomView: customButton]; 
```

如果您想要其他参考，那么您可以通过这个漂亮的链接：[使用外观代理设置应用程序样式](http://useyourloaf.com/blog/2012/08/24/using-appearance-proxy-to-style-apps.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T19:38:06.527

你可能可以这样尝试。为我工作。

```
UIImage* image3 = [UIImage imageNamed:@"mail-48_24.png"];
CGRect frameimg = CGRectMake(0, 0, image3.size.width, image3.size.height);
UIButton *someButton = [[UIButton alloc] initWithFrame:frameimg];
[someButton setBackgroundImage:image3 forState:UIControlStateNormal];
[someButton addTarget:self action:@selector(sendmail)
     forControlEvents:UIControlEventTouchUpInside];
[someButton setShowsTouchWhenHighlighted:YES];

UIBarButtonItem *mailbutton =[[UIBarButtonItem alloc] initWithCustomView:someButton];
self.navigationItem.rightBarButtonItem=mailbutton;
[someButton release]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T00:13:08.413

也许这会对您有所帮助（只需将该文件添加到项目中）：

UIBarButtonItem+customLook.h

```
#import <UIKit/UIKit.h>

@interface UIBarButtonItem (customLook)

+ (UIBarButtonItem *)barButtonItemWithImage:(UIImage *)image selectedBackGroundImage:(UIImage *)selected target:(id)target action:(SEL)selector;

@end 
```

UIBarButtonItem+customLook.m

```
#import "UIBarButtonItem+customLook.h"

@implementation UIBarButtonItem (customLook)

+ (UIBarButtonItem *)barButtonItemWithImage:(UIImage *)image selectedBackGroundImage:(UIImage *)selected target:(id)target action:(SEL)selector
{
    UIButton* someButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [someButton setImage:image forState:UIControlStateNormal];
    [someButton setBackgroundImage:selected forState:UIControlStateSelected];

    CGSize size = image.size;
    CGRect frame = CGRectZero;
    frame.size.width = size.width;
    frame.size.height = 30.0f; // Standart height
    someButton.frame = frame;

    [someButton addTarget:target action:selector forControlEvents:UIControlEventTouchUpInside];

    UIBarButtonItem* backButton = [[UIBarButtonItem alloc] initWithCustomView:someButton];

    return backButton;
}

@end 
```

一些视图控制器：

```
#import "UIBarButtonItem+customLook.h"
...

- (void)viewDidLoad
{
    [super viewDidLoad];

    UIBarButtonItem *bbi = [UIBarButtonItem barButtonItemWithImage:[UIImage imageNamed:@"29-heart-selected.png"]
                                          selectedBackGroundImage:[UIImage imageNamed:@"DarkButton_Pressed.png"]
                                                            target:self
                                                            action:@selector(someAction:)];
    self.navigationItem.rightBarButtonItem = bbi;
} 
```

...

```
- (void)someAction:(id)sender
{
    [(UIButton *)sender setSelected:YES];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-10T23:33:03.050

```
 UIImage* btnImage = [UIImage imageNamed:@"share-icon-deselected-16x16.png"];
    CGRect frameimg = CGRectMake(0, 0, btnImage.size.width, btnImage.size.height);
    UIButton *someButton = [[UIButton alloc] initWithFrame:frameimg];
    [someButton setBackgroundImage:btnImage forState:UIControlStateNormal];
    [someButton addTarget:self action:@selector(share:)
         forControlEvents:UIControlEventTouchUpInside];
    [someButton setShowsTouchWhenHighlighted:YES];

    UIBarButtonItem *mailbutton =[[UIBarButtonItem alloc] initWithCustomView:someButton];
    self.navigationItem.rightBarButtonItem=mailbutton;

- (void)share:(id)sender{
    UIButton*btn = (UIButton*)sender;
    if (btn.isSelected)
    {
        [btn setSelected:NO];
        [btn setBackgroundImage:[UIImage imageNamed:@"share-icon-deselected-16x16.png"] forState:UIControlStateNormal];
    }
    else
    {
        [btn setSelected:YES];
        [btn setBackgroundImage:[UIImage imageNamed:@"share-icon-selected-16x16.png"] forState:UIControlStateNormal];
    }
}; 
```**

# python - Python - Retrieving an element from a tuple from a list

> ID：14250422
> 
> 赞同：1
> 
> 时间：2013-01-10T03:33:27.213
> 
> 标签：python, arrays, list, tuples

I am a beginner in Python and am struggling on retrieving an element out of a tuple from a list. What I am trying to do is to get the value of a fruit and multiply it by the quantity needed. An example below will show you what I mean. I can not figure out how to get the second element in the tuple.

```
##Cost of [('apples', 2.0), ('pears', 3.0), ('limes', 4.0)] is 12.25

fruitPrices = {'apples':2.00, 'oranges': 1.50, 'pears': 1.75,'limes':0.75,   
               'strawberries':1.00}

def buyLotsOfFruit(orderList):
##    orderList: List of (fruit, numPounds) tuples        
## Returns cost of order

totalCost = 0.0 
for fruit,price in fruitPrices.items():
  if fruit not in fruitPrices:
    print 'not here!'
  else:
    totalCost = totalCost +fruitPrices[fruitPrices.index(fruit)].key() * price            
return totalCost 
```

It is mostly in my else statement that I can not get it working. All help is greatly appreciated!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T03:41:58.170

Why are you looping over the dictionary? Loop over your list instead, and add to `totalCost` accordingly.

```
for fruit, n in orderList:
    if fruit in fruitPrices:
        totalCost += fruitPrices[fruit] * n
    else:
        print fruit, 'not here!' 
```

* * *

You can simplify all this and do something like

```
sum(fruitPrices.get(fruit, 0) * n for fruit, n in orderList) 
```

Note that `fruitPrices.get(fruit, 0)` will return `fruitPrices[fruit]` if `fruit` is in `fruitPrices` and `0` otherwise.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T03:40:23.200

Could get this down to one line, but I dont think it will help. You are looping over the prices dictionary, but should be looping over the orderList, and then looking up the fruit in the dictionary.

```
def buyLotsOfFruit(orderList):
    totalCost = 0.0 
    for fruit, quantity in orderList:
       if fruit not in fruitPrices:
           print 'not here!'
       else:
           totalCost = totalCost +fruitPrices[fruit]* quantiy            
    return totalCost 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T03:41:06.960

```
fruitPrices = {'apples':2.00, 'oranges': 1.50, 'pears': 1.75,'limes':0.75,   
               'strawberries':1.00}

def buyLotsOfFruit(orderList):
    ##    orderList: List of (fruit, numPounds) tuples        
    ## Returns cost of order

    totalCost = 0.0 
    for fruit,price in fruitPrices.items():
        if fruit not in fruitPrices:
            print 'not here!'
        else:
            #totalCost = totalCost +fruitPrices[fruitPrices.index(fruit)].key() * price            
            totalCost = totalCost +fruitPrices[fruit] * price

    return totalCost 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T03:43:11.583

# **NOTE**:

You can put this entire function into a one-liner like this:

```
buyLotsOfFruit = lambda ol: sum(fruitPrices[f] * p for f, p in ol if f in fruitPrices) 
```

Or this other way:

```
def buyLotsOfFruit(orderList):
    ##    orderList: List of (fruit, numPounds) tuples        
    ## Returns cost of order

    totalCost = 0.0 
    for fruit, pounds in orderList:
        if fruit not in fruitPrices:
            print 'not here!'
        else:
            totalCost += fruitPrices[fruit] * pounds
    return totalCost 
```

To retrieve a key from a dictionary all you need is this: `dictionary[key]` and it returns the value

# android - 安卓谷歌驱动流

> ID：14250424
> 
> 赞同：1
> 
> 时间：2013-01-10T03:34:01.503
> 
> 标签：android, google-drive-api

> **可能重复：**
> [通过 google drive api 恢复视频 url，以便在 html5 播放器中流式传输视频](https://stackoverflow.com/questions/10331837/recover-video-url-through-google-drive-api-in-order-to-stream-the-video-in-an-ht)

概述：我正在开发用于视频流的 android 应用程序。视频文件存储在 Google Drive 上。我使用 GoogleDrive 中的“共享 - 任何知道链接的人”功能创建了指向视频文件的 URL 链接

问题：如何从 Google Drive 上的视频共享链接获取直接流 URL 到我的 android 设备？

谢谢您的帮助

# javascript - Javascript onClick 确认不触发

> ID：14250425
> 
> 赞同：-1
> 
> 时间：2013-01-10T03:34:14.663
> 
> 标签：javascript, html

我在下面的超链接上放置了一个 onClick goconfirm：

```
<a href="http://google.com" onclick="goConfirm('This link is to an external site. You are now 
leaving mysite.,'href=http://google.com');' target="_blank">Online Account Opening</a> 
```

如何确保在将用户发送到新站点之前触发确认 Javascript 消息？

非常感谢您的帮助和指导。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T03:36:49.527

您不会以任何方式阻止默认操作。试试这个：

```
<a href="..." onclick="return confirm('This link is... ');">...</a> 
```

或者如果`goConfirm`实际上是您的功能，您应该添加`return false;`到 onclick 的末尾。

还要修复不匹配的引号；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T03:36:34.850

我想这是一个错字。试试这个：

```
<a href="http://google.com" onclick="goConfirm('This link is to an external site. You are now leaving mysite.','href=http://google.com');return false;" target="_blank">Online Account Opening</a> 
```

我还在`return false`末尾添加了一个以确保当前网页不会被重定向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T04:45:40.863

用于`<a href="javascript:void(0)" onclick="return confirm('This link is... ');">...</a>`避免 url 发生任何变化

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T03:46:49.443

您应该删除从锚标记到 JS 函数打开新页面的代码，以便它等待您确认。

```
<script>
function goConfirm(message, url) {
  var choice = confirm(message);
  if (choice) {
    window.open(url, "_blank");
  }
}
</script>
<a href="#" onclick="goConfirm('This link is to an external site. You are now leaving mysite.,\'href=http://google.com\'', 'http://google.com');">Online Account Opening</a> 
```

小提琴 - [http://jsfiddle.net/poonia/2bYKV/](http://jsfiddle.net/poonia/2bYKV/)

# java - JodaTime 没有解析它应该解析的内容？

> ID：14250426
> 
> 赞同：0
> 
> 时间：2013-01-10T03:34:16.053
> 
> 标签：java, parsing, date, jodatime, strptime

这会引发无效格式异常：

```
DateTimeFormat.forPattern("%E, %d %M %Y %H:%m:%s %z").parseMillis("Sun, 20 May 2012 01:07:11 +0000") 
```

为什么它不起作用？根据[规范](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html#forPattern%28java.lang.String%29)，它似乎应该工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T03:36:04.837

这是因为你的`z`参数是错误的。例如，它应该是 PST。将其大写（使用`Z`）或更改输入字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T03:38:12.533

我认为模式应该更像：

```
EEE, dd MMM YYYY HH:mm:ss Z 
```

# iphone - 如何使用 Facebook SDK 3.1 使用弹出视图登录 Facebook，而不是通过 safari？

> ID：14250430
> 
> 赞同：3
> 
> 时间：2013-01-10T03:34:34.263
> 
> 标签：iphone, facebook, login

请帮我解决这个问题！我想创建应用登录 facebook，如果设备安装了 Facebook 应用，我的应用会在用户登录 Facebook 时调用 Facebook 应用，如果没有安装 Facebook 应用，我的应用会显示弹出登录视图，没有 sarafi？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T03:50:56.757

如果您使用共享工具包，则转到 SDK 中的 facebook.m 类，找到此方法：

```
- (void)authorize:(NSArray *)permissions
         delegate:(id<FBSessionDelegate>)delegate 
```

然后替换你的最后一行：`[self authorizeWithFBAppAuth:YES safariAuth:YES];`

用这一行：`[self authorizeWithFBAppAuth:YES safariAuth:NO;` &检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T04:57:02.993

这将处理打开一个 facebook 会话。

```
[FBSession openActiveSessionWithReadPermissions:nil
                                   allowLoginUI:YES
                              completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
                                  if (status == FBSessionStateOpen || status == FBSessionStateOpenTokenExtended)
                                  {
                                      NSLog(@"Logged in!");
                                  }
}]; 
```

确保您的应用程序委托也处理回调 url。

```
- (BOOL) application:(UIApplication *)application handleOpenURL:(NSURL *)url
{
    return [FBSession.activeSession handleOpenURL:url];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T05:05:33.470

如果您使用的是 Facebook SDK，您可以使用 FBSession 打开会话。

```
- (void)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {

// NSLog(@"openSessionWithAllowLoginUI:");

NSArray *permissions = [[NSArray alloc] initWithObjects:

                        @"user_photos",
                        @"publish_actions",
                        @"read_stream",
                        @"friends_photos",
                        @"email" ,

                        nil];//You can add similar permissions according to your app.

[FBSession setActiveSession:[[FBSession alloc] initWithPermissions:permissions]];

[[FBSession activeSession] openWithBehavior:FBSessionLoginBehaviorForcingWebView

                          completionHandler:^(FBSession *session,

                                              FBSessionState state,

                                              NSError *error) {

                              NSLog(@" state=%d",state);

                              // handle the completion handler...

                          }]; 
```

}

如果 Facebook 应用程序安装在您的手机中，这将打开它，如果您未登录，它将显示弹出窗口。如果您的设备中未安装本机应用程序，它将使用 safari。

在对 Facebook 执行任何操作之前，请始终使用以下命令检查 FBSession 是否打开并处于活动状态： if (FBSession.activeSession.isOpen)

# rmi - rmi - 连接异常

> ID：14250432
> 
> 赞同：0
> 
> 时间：2013-01-10T03:35:18.480
> 
> 标签：rmi

这是我第一次使用 RMI，基本上我设法在我的 PC 上本地运行以下 RMI 示例，而不是通过两台单独的 Linux 机器。

服务器界面：

```
public interface PowerService extends Remote{
public BigInteger square ( int number )
    throws RemoteException;

public BigInteger power  ( int num1, int num2) 
    throws RemoteException;
} 
```

服务器：

```
public class PowerServiceServer extends UnicastRemoteObject implements
    PowerService {

public PowerServiceServer() throws RemoteException {
    super();
}

public BigInteger square(int number) throws RemoteException {
    imp .....
    return (bi);
}

public BigInteger power(int num1, int num2) throws RemoteException {
    imp .....
    return bi;
}

public static void main(String[] args) throws Exception {

    PowerServiceServer svr = new PowerServiceServer();
    // ... and bind it with the RMI Registry
    Naming.bind("PowerService", svr);
    System.out.println("Service bound....");
}
} 
```

客户端：

```
public class PowerServiceClient {
public static void main(String args[]) throws Exception {
    // Call registry for PowerService
    PowerService service = (PowerService) Naming.lookup("rmi://" + args[0]
            + "/PowerService");
    DataInputStream din = new DataInputStream(System.in);
    for (;;) {
        System.out.println("1 - Calculate square");
        System.out.println("2 - Calculate power");
        System.out.println("3 - Exit");
        System.out.println();
        System.out.print("Choice : ");

        String line = din.readLine();
        Integer choice = new Integer(line);

        int value = choice.intValue();

        switch (value) {
        case 1:
            // Call remote method
            ....................
            break;
        case 2:
            // Call remote method
            ....................
            break;
        case 3:
            System.exit(0);
        default:
            System.out.println("Invalid option");
            break;
        }
    }
} 
```

客户端接口和服务器一样

这是我为了运行 rmi 示例所做的：

1）在服务器端我创建了存根

2) 运行 rmiregisrty

3）运行服务器

4）我将存根从服务器端复制到客户端到同一个包中

5）运行客户端

运行客户端后，我收到以下错误消息：

线程“主”java.rmi.ConnectException 中的异常：连接拒绝主机：127.0.0.1；嵌套异常是：java.net.ConnectException：连接在 sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:601) 在 sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:198) 处被拒绝在 sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:184) 在 sun.rmi.server.UnicastRef.invoke(UnicastRef.java:110) 在 compute.PowerServiceServer_Stub.square(未知来源)

可能是由于某些防火墙我无法连接或者我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T20:28:25.010

这是`java.rmi.server.hostname.`RMI FAQ 中的 A.1 项解决的问题。在导出任何远程对象之前，您需要修复导致它的 /etc/hosts 错误配置，或者将`java.rmi.server.hostname`服务器 JVM 中的系统属性设置为服务器的正确 IP 地址。

# wordpress - 在 WordPress do_action 中调用 JS 函数

> ID：14250435
> 
> 赞同：1
> 
> 时间：2013-01-10T03:35:33.337
> 
> 标签：wordpress

我有这个名为“myjsfunction()”的 JS 函数。

```
function myjsfunction() {

jQuery('#html_admin_show').hide();
jQuery('#html_admin_edit').show();

} 
```

如何在 Wordpress do_action 钩子中调用这个 JS 函数？

我更喜欢将它添加为第三个参数，因为我已经在使用第二个参数，所以类似于：

```
do_action('myhelp', 'mysecondfunction', 'myjsfunction'); 
```

但是当页面运行时它没有显示元素#html_admin_edit。任何想法如何调用这个函数？

谢谢你的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:02:33.253

我在这里有我的答案：[https ://wordpress.stackexchange.com/questions/79969/adding-js-function-as-third-parameter-in-do-action/79970#79970](https://wordpress.stackexchange.com/questions/79969/adding-js-function-as-third-parameter-in-do-action/79970#79970)

诀窍是将 Javascript 函数包含在 PHP 中，并使用 do_action 将它们一一调用。希望这可以帮助。

# android - Android 包括 xml 布局到活动

> ID：14250444
> 
> 赞同：0
> 
> 时间：2013-01-10T03:37:26.330
> 
> 标签：android, android-layout

我有一个`activity.java`文件，其中有我的`setContentView(R.layout.x);`现在，我有一个文件，我必须`y.xml`在我的视图`Linear Layout`中附加一个`onclick()`方法。附件`onclick()`必须在我的`activity.java`文件中，如何包含`y.xml`.

我试过这个，

```
1\.     layout = (LinearLayout) findViewById(R.layout.y);
       eView = (EditText)layout. findViewById(R.id.editview);

2\.      eView = (EditText)findViewById(R.id.editview); 
```

但两者都给出了我的`null pointer exception`，我如何包括我的`editText`

**更新**

```
final LayoutInflater lyInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        showLinearLayout = (LinearLayout) lyInflater.inflate(R.layout.y, null);
         showView = (EditView) showLinearLayout.findViewById(R.id.edittext); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:10:27.820

您可以使用ViewGroup 的[addView](http://developer.android.com/reference/android/view/ViewGroup.html#addView%28android.view.View,%20int,%20android.view.ViewGroup.LayoutParams%29)方法。

```
addView(layout, new ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T03:53:15.773

`LayoutInflater`用于将布局 XML 文件实例化为其对应的视图对象。换句话说，它将 XML 文件作为输入并从中构建视图对象。

在您的场景中，您必须使用`LayoutInflater`. 阅读这篇[文章](http://myandroidsolutions.blogspot.com/2012/06/android-layoutinflater-turorial.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T03:41:02.200

您可以使用通货膨胀，如下所示：

```
final LayoutInflater lyInflater = (LayoutInflater) mContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
LinearLayout yLayout = (LinearLayout) lyInflater .inflate(
                R.layout.y, null);
eView = (EditText)yLayout.findViewById(R.id.editview); 
```

所以你不会再有异常了。希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T04:03:42.317

内存。如果要将`y`xml 文件包含到`x`xml 文件中，请按照以下步骤操作。

我假设您想在单击按钮或其他方法时包含`Linear Layout`在您`Activity`的单击方法中，然后将其添加到您的xml 文件中并在开始时添加，因此您无法显示线性布局。`onclick()``Linear Layout``x``android:visibility="gone"`

```
 <LinearLayout
        android:id="@+id/history_value_body"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:visibility="gone" >    <<<<<<<<<<<   HERE

 ----------------------------
 -----------------------------
 </LinearLayout> 
```

现在，从 java 类中使它在需要时可见，在您的情况下进入`onclick`方法。喜欢...

```
linear.setVisibility(View.VISIBLE);   // linear is the object of your Linearlayout 
```

如果有任何问题然后问我。

祝你好运。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T04:08:05.207

如果我正确理解了这个问题，那么您的 Activity 使用`x.xml`，并且您还希望包含在 中定义的另一个布局`y.xml`。

您可以使用`<merge>`or`<include>`标记来执行此操作，[如文档中所述](http://developer.android.com/training/improving-layouts/reusing-layouts.html)。

或者，您可以使用[ViewStub](http://developer.android.com/reference/android/view/ViewStub.html)在布局中的给定位置有条件地扩展另一个布局。例如，您可以在 中包含一个`ViewStub`标签，并在视图层次结构中的同一位置进行`x.xml`膨胀。`y.xml`然后，您可以附加您需要的任何点击侦听器（通过使用`findViewById()`）。

# android - 向现有 xml Preferences 元素添加自定义属性

> ID：14250454
> 
> 赞同：4
> 
> 时间：2013-01-10T03:38:47.383
> 
> 标签：android, android-preferences

是否可以向现有的 Preferences 元素添加自定义属性，如下所示`myFormat`？

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
    <EditTextPreference
        android:defaultValue="0.3"
        myFormat="Format 123"
        android:inputType="numberDecimal"
        android:key="steering_threshold" />
</PreferenceScreen> 
```

或者我是否需要按照[此处](https://stackoverflow.com/questions/2695646/declaring-a-custom-android-ui-element-using-xml)的说明创建自定义元素，如下所示`MyCustomPreference`？

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
    <com.example.yourpackage.MyCustomElement
    [...] 
```

# oauth - 缺少“onload.js”文件会破坏 Chrome 扩展 OAuth

> ID：14250455
> 
> 赞同：1
> 
> 时间：2013-01-10T03:38:56.177
> 
> 标签：oauth, google-chrome-extension

我正在经历将 Google Chrome 扩展从 Manifest v1 更新到 Manifest v2 的过程。我不会说事情进展顺利，主要是因为谷歌自己的[Chrome 扩展网站上](http://developer.chrome.com/extensions/index.html)的文档过时了。

这是最新的：

Google 关于在扩展中使用 OAuth 的文档告诉我在清单中包含以下三个文件：

```
chrome_ex_oauth.html  
chrome_ex_oauth.js  
chrome_ex_oauthsimple.js 
```

这些文件中的第一个文件 chrome_ex_oauth.html 基本上是扩展程序首次使用 OAuth 获取初始请求令牌时打开的重定向页面。在这个非常空闲的网页的更新版本中，head 部分列出了*三个*要加载的 javascript 文件：上面列出的两个，一个名为：

```
onload.js 
```

当我的扩展程序打开 chrome_ex_oauth.html 时，除了无法加载不存在的“onload.js”文件之外，我没有收到任何错误指示。显然，我在这里遗漏了一些东西。OAuth 序列永远不会成功完成，并且确实没有迹象表明它曾经被启动过。

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T01:51:39.170

发布此问题后，我比较了 chrome_ex_oauth.html 的新旧版本。我看到在前者中，虽然没有提到 onload.js 脚本，但脑子里有以下内容：

```
<script type="text/javascript">
    function onLoad() {
        ChromeExOAuth.initCallbackPage();
    };
</script> 
```

这个函数被称为内联：

```
<body onload="onload();">
... 
```

从 Manifest v2 开始，据我了解，内联 javascript 是严格禁止的，所以这行不通。对加载 onload.js 的调用被添加到文档头部。看起来好像忽略了 Google 文档中指向实际文件的链接。写起来很容易，但这是我在 onload.js 中的内容：

```
window.onload = function() { ChromeExOAuth.initCallbackPage(); }; 
```

之后，重定向工作得很好，我能够完成 OAuth 过程。

让我知道它是否不适合你。

# python - GAE中关键字参数的多个值

> ID：14250459
> 
> 赞同：0
> 
> 时间：2013-01-10T03:39:59.860
> 
> 标签：python, google-app-engine

我在 Google App Engine (localhost) 上遇到了似乎是 Python 的错误我正在尝试使用 Model.get_by_id() 函数，但我遇到了多个关键字参数错误，正如我在下面的代码。从底部开始的第 3 行

我确定这是一个简单的错误，我只是看不到它。

提前致谢！

```
'''
Created on 09/01/2013

@author: jonathan
'''
import webapp2_extras.security as security
from google.appengine.ext import db
import hashlib
import datetime

class User(db.Model):
    username = db.StringProperty(required=True)
    passhash = db.StringProperty(required=True)
    email = db.EmailProperty()
    created = db.DateTimeProperty(auto_now_add=True)
    authtoken = db.StringProperty(required=True)

    def __init__(self, username, password, email=None):
        authtoken = security.generate_random_string(entropy=256)
        passhash = security.generate_password_hash(password)
        super(User, self).__init__(username=username,
                                   passhash=passhash,
                                   email=email,
                                   authtoken=authtoken)

    def __str__(self):
        return self.username

    def check_password(self, password):
        return security.check_password_hash(password, self.passhash)

    @classmethod
    def check_unique_user(cls, username):
        return not bool(cls.all().filter('username =', username).count())

    def get_session_token(self, dt=None):
        ID = self.key().id()
        if not dt:
            dt = datetime.datetime.now().strftime("%d%m%y%H%M%S")
        hashstring = "{0}${1}${2}".format(ID, dt, self.authtoken)
        return '{0}${1}${2}'.format(ID, dt, hashlib.sha256(hashstring).hexdigest())

    @classmethod
    def check_session_token(cls, session_token):
        if session_token:
            ID, dt = session_token.split("$")[:2]
            if ID.isdigit():
                user = cls.get_by_id(ids=int(ID))  # Raises TypeError: __init__() got multiple values for keyword argument 'username'
                if user and user.check_session_token(session_token, dt):
                    return user 
```

我的其余代码：

common.py #这个还在进行中...

```
'''
Created on 06/01/2013

@author: jonathan
'''
import os
import webapp2
import jinja2

template_dir = os.path.join(os.path.dirname(__file__), 'templates')
jinja_env = jinja2.Environment(loader=jinja2.FileSystemLoader(template_dir),
                               autoescape=True)

class Handler(webapp2.RedirectHandler):
    def write(self, *args, **kwargs):
        self.response.out.write(*args, **kwargs)

    def render_str(self, template, **params):
        templated_html = jinja_env.get_template(template)
        return templated_html.render(params)

    def render(self, template, **kwargs):
        self.write(self.render_str(template, **kwargs))

if os.environ['SERVER_SOFTWARE'].startswith('Development'):
    app_scheme = 'http'
else:
    app_scheme = 'https' 
```

注册.py

```
'''
Created on 07/01/2013

@author: jonathan
'''
import common
from webapp2_extras.routes import RedirectRoute
import re
from models.user import User

def getroutes():
    return [RedirectRoute(r'/signup', handler=SignupPage, name='signup', schemes=common.app_scheme, strict_slash=True),
            (RedirectRoute(r'/welcome', handler=WelcomePage, name='welcome', strict_slash=True)),
            (RedirectRoute(r"/login", handler=LoginPage, name="login", schemes=common.app_scheme, strict_slash=True)),
            (RedirectRoute(r'/logout', handler=LogoutPage, name="logout", strict_slash=True))]

username_pattern = re.compile(r"^[a-zA-Z0-9_-]{3,20}$")
password_pattern = re.compile(r"^.{3,20}$")
email_pattern = re.compile("^[\S]+@[\S]+\.[\S]+$")
def valid_username(username):
    return username_pattern.match(username)

def valid_password(password):
    return password_pattern.match(password)

def verify_password(password, verify):
    return password == verify

def valid_email(email):
    return email_pattern.match(email)

class SignupPage(common.Handler):
    def render(self, **kwargs):
        super(SignupPage, self).render("signup.html", **kwargs)

    def get(self):
        session_token = self.request.cookies.get("session")
        if User.check_session_token(session_token):
            self.redirect_to("welcome")
        self.render()

    def post(self):
        v_username = v_password = v_email = False
        username = self.request.get("username")
        password = self.request.get("password")
        verify = self.request.get("verify")
        email = self.request.get("email")
        params = {'username_error':'',
                  'password_error':'',
                  'verify_error':'',
                  'email_error':'',
                  'username':username,
                  'email':email}

        if valid_username(username):
            if User.check_unique_user(username):
                v_username = True
            else:
                params['username_error'] = "Username taken"
        else:
            params['username_error'] = "Invalid username"

        if valid_password(password):
            if verify_password(password, verify):
                v_password = True
            else:
                params['verify_error'] = "Passwords do not match"
        else:
            params['password_error'] = "Invalid password"

        if valid_email(email):
            v_email = True
        else:
            params['email_error'] = "Invalid email"

        if v_username and v_password:
            if v_email:
                user = User(username=username,
                            password=password,
                            email=email)
            else:
                user = User(username=username,
                            password=password)
            user.put()
            session_token = user.get_session_token()
            self.response.set_cookie("session", session_token)
            self.redirect(r'/welcome')
        else:
            self.render(**params)

class WelcomePage(common.Handler):
    def get(self):
        session_token = self.request.cookies.get("session")
        user = User.check_session_token(session_token)
        if not user:
            self.response.delete_cookie('session')
            self.redirect_to("signup")
        else:
            self.render("welcome.html", {'user':user})

class LoginPage(common.Handler):
    def get(self):
        session_token = self.request.cookies.get("session")
        user = User.check_session_token(session_token)
        if not user:
            self.response.delete_cookie('session')
            self.redirect_to("signup")
        else:
            self.render("login.html")

    def post(self):
        username = self.request.get('username')
        password = self.request.get('password')
        remember = self.request.get('remember')
        params = {}
        user = None

        if valid_username(username):
            user = User.all().filter('username =', username).get()
            if not user:
                params['username_error'] = "Can't find username"
        else:
            params['username_error'] = "Invalid username"

        if user and user.check_password(password):
            self.redirect_to('welcome')
        else:
            params['password_error'] = "Mismatched password"
            self.render('login.html', params)

class LogoutPage(common.Handler):
    def get(self):
        self.response.delete_cookie("session")
        self.redirect(r'/signup') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T03:48:45.773

您的数据存储区中可能有一个用户实例，其中“用户名”不是一个`StringProperty`，而是一个列表。当 db 库获取实体并对其进行解析时，它无法将列表转换为`StringProperty`.

我建议使用数据存储查看器并检查您的实体是否确实具有有效的用户名字符串。

编辑：刚刚再次浏览了代码。重写**init**是一个非常糟糕的主意。User 类不是一个典型的类，而是一个用于生成 User 实例的元类。即，您的 User 实例实际上并不是您的用户类的实例。我怀疑你在那里遇到了问题。

# c - 将二叉搜索树保存到磁盘

> ID：14250461
> 
> 赞同：0
> 
> 时间：2013-01-10T03:40:07.630
> 
> 标签：c, binary-tree

尝试将树的内容保存到文件时，没有保存任何内容，我不知道为什么。这些是我正在进行的函数调用：

```
insert(tree, cust.id, filePos);
saveTree(tree, "cIndex.dat", 0); 
```

这些是涉及的功能：

```
struct NODE *insert(struct NODE *node, char info[], int pos) 
{ 
int length = strlen(info);
// 1\. If the tree is empty, return a new, single node 
if (node == NULL) 
{ 
    struct INFO stuff; 
    //stuff = (struct INFO*)malloc(sizeof(struct INFO));

    strncpy(stuff.data, info, DATA_LENGTH);
    stuff.filePos = pos;

    node = malloc(sizeof(struct NODE));

    node->data = stuff; 
    node->left = NULL; 
    node->right = NULL;

    return(node); 

}    

else 
{ 
    // 2\. Otherwise, recur down the tree 
    if (strncmp(info, node->data.data, length) <= 0) 
    {
        node->left = insert(node->left, info, pos); 
    }

    else 
    {
        node->right = insert(node->right, info, pos);
    }

    return(node); // return the (unchanged) node pointer 
} 
}

int saveTree(struct NODE *node, char filename[], int posInFile) 
{
FILE *file;
file = fopen(filename, "r+b"); //r+ so as to overwrite existing data instead of appending

char c;
char posStr[POS_LENGTH];

fseek(file, posInFile, SEEK_SET);

while((c = fgetc(file)) != EOF)
{
    if(node != NULL)
    {
        fseek(file, -1, SEEK_CUR);

        fwrite(node->data.data, sizeof(char), DATA_LENGTH, file);
        sprintf(posStr, "%d", node->data.filePos); 
        fwrite(posStr, sizeof(char), POS_LENGTH, file);

        posInFile = ftell(file);

        saveTree(node->left, filename, posInFile);
        saveTree(node->right, filename, posInFile);
    }
}

fclose(file);

return 1;
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T03:48:08.210

这可能是几件事。从您的最后一个问题中，我注意到您实际上并没有存储您创建的树（在 中`loadTree`）。你修好了吗？

但只要看看你的保存功能......你应该打开文件一次并`FILE*`递归传递。为方便起见，请在外面执行并传递`FILE*`名称而不是名称。您正在使用没有刷新的缓冲输出，否则您将遇到麻烦。

```
int saveTree( struct NODE *node, FILE *fp );

// ...

FILE *fp = fopen( filename, "wb" );
saveTree( tree, fp );
fclose(fp); 
```

您使用文本值编写二进制文件是否有原因？您确定不想以文本模式打开并使用`fprintf`吗？

# javascript - 在javascript中添加一个正方形

> ID：14250463
> 
> 赞同：1
> 
> 时间：2013-01-10T03:40:24.557
> 
> 标签：javascript, html

我想在 JavaScript 中创建一个正方形。我用正方形在 CSS 中做了一个类。我想创建类似 a 的东西，`<div class="square></div>`以便在单击按钮时显示正方形。我尝试使用`createElement`并将语句传递为`innerHTML`. 然而，这似乎并没有奏效。有人可以帮我建议我缺少什么吗？我正在尝试使用用户输入的数字创建一个正方形矩阵

```
<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<!-- <meta charset="utf-8" /> -->
<title>Form Validation</title>
<script>
    function validateForm()
    {
        var x = document.forms["MyForm"]["Numval"].value;

        if ((!x.match(/^\d+/)) || ((x.length) > 1)) {
            alert("Please only one enter numeric character (Allowed input:1-9)");
        }
        else {
            for (i = 0; i < Number(x) ; i++) {
                for (j = 0; j < Number(x) ; j++) {
                    document.writeln(x);

                    var square = document.createElement('div');
                    square.className = 'squared';
                    document.body.appendChild(square)

                }
                document.writeln("</br>");
                }

        }

        return false;

    }
</script>

<style type="text/css">
.squared {
border: 2x solid black;
width: 50px;
height: 50px;
background:black;
color:black;
}
</style>

</head>
<body>
<form name="MyForm" onsubmit="return validateForm()" method="post" >

    Please enter a number between 1-9 : 
    <input type ="text" name="Numval"/>
   <input type="Submit" value="Submit" />

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T03:42:24.170

```
var square = document.createElement('div');
square.className = 'square';
document.body.appendChild(square); 
```

这是小提琴：http: [//jsfiddle.net/Ysw9n/](http://jsfiddle.net/Ysw9n/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T03:44:21.117

如果您使用 jquery，这确实是一件简单的事情：

```
$("#your-button-id").click(function() { 
   $("#your-square-parent-id").append('<div class="your-square-class">&nbsp;</div>');
}); 
```

但是你可以在没有 jquery 以及上面提到的 Joseph 的情况下做到这一点。无论如何，希望它有用。

# javascript - 在 JQuery 方法中设置匿名函数的“this”上下文

> ID：14250466
> 
> 赞同：1
> 
> 时间：2013-01-10T03:40:46.900
> 
> 标签：javascript, jquery, this, jquery-events

我想通过以下单击绑定方法传递特定上下文：

```
$(document).ready(function(){

    var o = {
        name : 'I\'m object O'
    };

    $('#my-button').click(function(){
        alert(this.name);
    }.call(o));
}); 
```

问题是一旦页面加载就会触发。有没有一种方法可以将上下文绑定到单击处理程序的匿名函数并仅在触发单击事件时触发？您还可以解释为什么它是在页面加载而不是点击事件时触发的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T03:42:42.967

采用[`$.proxy`](http://api.jquery.com/jQuery.proxy/)

```
$("#my-button").click($.proxy(function () {
   alert(this.name);
}, o)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T03:44:14.867

它不起作用，因为您在声明时正在调用此匿名函数。试试这个：

```
$(document).ready(function(){

    var o = {
        name : 'I\'m object O'
    };

    $('#my-button').click(function(){
        function(){
            alert(this.name);
        }.call(o)
    });
    /*
     * Or shorter:
     * $('#my-button').click(function(){
     *     alert(o.name);
     * });
     */
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T04:25:18.370

$(文档).mousedown(函数(e){

//做东西

}

# c# - 使用 XmlReader 读取 XML 文件

> ID：14250468
> 
> 赞同：-1
> 
> 时间：2013-01-10T03:40:52.293
> 
> 标签：c#, asp.net, xml

我有一个这样的xml文件。

```
<response>    
    <status>ok</status>\r\n
    <number>125698</number>
    </response> 
```

如果状态为“ok”，我想读取数字。所以这是我的代码

```
using (XmlReader reader = XmlReader.Create(new StringReader(Response)))
                {
                    reader.ReadToFollowing("response");
                    reader.MoveToFirstAttribute();

                    reader.ReadToFollowing("status");
                    output.AppendLine(reader.ReadElementContentAsString());
                }
                OrderResponse = output.ToString();
                OrderResponse = OrderResponse.Replace("\r\n", "");

                if (OrderResponse == "ok")
                {
                    using (XmlReader reader = XmlReader.Create(new StringReader(Response)))
                    {
                        reader.ReadToFollowing("response");
                        reader.MoveToNextAttribute();

                        reader.ReadToFollowing("number");
                        output.AppendLine(reader.ReadElementContentAsString());
                    }

                    string orderNo = output.ToString();
                    orderNo = orderNo.Replace("\r\n", "");
                    HttpContext.Current.Session["orderNo"] = orderNo; 
```

但 orderNo 输出像“ok125698”。但我只想要“125698”这个。怎么读？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T03:45:27.500

您`output`在第二次调用之前没有重置`AppendLine`，导致`output`包含（至少）两行：“ok”和“125698”。然后你设置`orderNo`这个字符串，替换掉`\r\n`，产生“ok125698”。

也许您打算使用不同的`output`变量或清除其内容？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T03:53:51.733

发生这种情况是因为您在已将状态值附加到输出变量后将订单号附加到输出变量：

```
reader.ReadToFollowing("status");
output.AppendLine(reader.ReadElementContentAsString());

reader.ReadToFollowing("number");
output.AppendLine(reader.ReadElementContentAsString()); 
```

这段代码比它需要的要长得多。请试试这个：

```
using (XmlReader reader = XmlReader.Create(new StringReader(Response)))
{
    reader.ReadToFollowing("response");

    reader.ReadToFollowing("status");
    string status = reader.ReadElementContentAsString();
    if (status == "ok")
    {
        reader.ReadToFollowing("number");
        string orderNo = reader.ReadElementContentAsString();
        HttpContext.Current.Session["orderNo"] = orderNo;
    }
} 
```

# c - 数组访问，指针混淆

> ID：14250475
> 
> 赞同：0
> 
> 时间：2013-01-10T03:41:34.903
> 
> 标签：c, pointers

我有一些继承的代码和一个将字符数组作为参数的函数。

```
typedef char myString[256];

void MyFunc(myString param)
{
  int i;

  for (i = 0; i < 256; i++)
  {
     if (param[i] .... 
```

我想让这更有效，并将指针传递给 char 数组：

```
void MyFunc(myString *param)
{
  int i;

  for (i = 0; i < 256; i++)
  {
     if (*param[i] <========= Thsi is wrong 
```

当我尝试引用数组元素时，我得到了错误的值，所以显然我的指针取消引用有问题。自从我用 C 编码以来已经有一段时间了，所以我看不到明显的错误。

有人可以指出吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T03:44:28.967

您可能不想通过指针传递它；当您在参数中使用类型时，它无论如何都会变成指针，并且第二级间接效率较低。

如果您确实使用“指向数组的指针”表示法，那么您需要括号来获得正确的优先级：

```
if ((*param)[i] ...)
    ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T03:53:00.183

`myString *`是指向具有 256 个元素的 char 数组的指针，即`param`具有类型

```
char (*)[256] 
```

所以你必须先取消引用`param`，然后访问它的元素。

1.  通过取消引用参数，你得到了数组`param`指向的第一个元素的地址。
2.  `(*param)[i]`然后是相关数组的第 i 个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T03:49:26.493

// 这没关系：数组可以被视为“char *”，反之亦然 char myString[256];

```
void MyFunc(char * param)
{
  int i;

  for (i = 0; i < 256; i++)
  {
     if (param[i] ... 
```

> 问：我想让它更高效，并传递一个指向 char 数组的指针

A：无论传递“param[]”还是“*param”，效率绝对*没有区别*

```
for (i = 0; i < 256; i++)
  {
     if (*param[i] <==== <========= Thsi is wrong 
```

是的 - 这是错误的。同样，" `param[]`" 和 " `*param`" 应该以同样的方式对待。

有或没有“typedef”也一样:)

最后，这是带有 typedef 的相同程序：

```
typedef char myString[256];

void MyFunc(myString param) 
// This is treated as "MyFunc(char param[256])" 
// It is *identical* to "MyFunc(char * param)"
{
  int i;

  for (i = 0; i < 256; i++)
  {
     if (param[i] .... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T05:20:55.560

使用如下：

```
if (*(param +i) ...)
... 
```

# maven - Maven依赖：get不下载斯坦福NLP模型文件

> ID：14250476
> 
> 赞同：14
> 
> 时间：2013-01-10T03:41:36.873
> 
> 标签：maven, models, stanford-nlp

[斯坦福自然语言处理工具包](http://nlp.stanford.edu/software/corenlp.shtml)的核心组件在一个文件中包含 Java 代码`stanford-corenlp-1.3.4.jar`，并且在一个单独的文件中包含（非常大的）模型`stanford-corenlp-1.3.4-models.jar`文件。Maven 不会自动下载模型文件，但前提是您将`<classifier>models</classifier>`行添加到 .pom。这是一个获取代码和模型的 .pom 片段。

```
 <dependency>
        <groupId>edu.stanford.nlp</groupId>
        <artifactId>stanford-corenlp</artifactId>
        <version>1.3.4</version>
        <classifier>models</classifier>
    </dependency> 
```

我试图弄清楚如何从命令行做同样的事情。似乎 Maven[`dependency:get`](http://maven.apache.org/plugins/maven-dependency-plugin/get-mojo.html)插件任务是执行此操作的方法。以下命令行似乎是正确的

```
mvn dependency:get \
    -DgroupId=edu.stanford.nlp \
    -DartifactId=stanford-corenlp \
    -Dversion=LATEST \
    -Dclassifier=models \
    -DrepoUrl=repo1.maven.org 
```

但是，它只下载代码 Jar 文件，而不下载模型 Jar 文件。

知道为什么会这样吗？我不确定这只是斯坦福 NLP 软件包的问题，`classifier`​​还是`dependency:get`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T17:17:05.253

首先感谢您的提问。它回答了我关于如何同时包含数据和库的问题。我将分享我对 Maven 所做的事情，但我不确定这是否满足您的问题：

```
<dependency>
  <groupId>edu.stanford.nlp</groupId>
  <artifactId>stanford-corenlp</artifactId>
  <version>1.3.4</version>
  <classifier>models</classifier>
</dependency>
<dependency>
      <groupId>edu.stanford.nlp</groupId>
      <artifactId>stanford-corenlp</artifactId>
      <version>1.3.4</version>
    </dependency>
    <dependency>
      <groupId>edu.stanford.nlp</groupId>
      <artifactId>stanford-parser</artifactId>
      <version>2.0.4</version>
    </dependency> 
```

另外，请确保我的 jar 包含我使用的库：

```
 <build>
  <plugins>
    <plugin>
      <artifactId>maven-assembly-plugin</artifactId>
      <configuration>
        <archive>
          <manifest>
            <mainClass>org.example.nlpservice.NLP</mainClass>
          </manifest>
        </archive>
        <descriptorRefs>
          <descriptorRef>jar-with-dependencies</descriptorRef>
        </descriptorRefs>
      </configuration>
      <executions>
        <execution>
          <id>make-assembly</id> <!-- this is used for inheritance merges -->
          <phase>package</phase> <!-- bind to the packaging phase -->
          <goals>
            <goal>single</goal>
          </goals>
        </execution>
      </executions>
    </plugin>
  </plugins>
   </build> 
```

最后，你试过了吗`mvn deploy`？`mvn install`您可以从本地 mvn cache/repo 复制到 /lib 目录。

# php - 如何使用删除按钮删除数据库中的行

> ID：14250477
> 
> 赞同：0
> 
> 时间：2013-01-10T03:41:39.707
> 
> 标签：php, mysql, database

我正在尝试在我的应用程序中添加一个“删除”按钮。该按钮的功能是在单击时删除数据库行。我想我需要创建类似的东西`delete.php`并将按钮链接到它。但我不知道该怎么做。任何人都可以帮忙吗？

下面是我的代码：

```
<table id="edit_accounts" class="tablesorter">
<thead>
<tr><?php
while($v=mysql_fetch_field($result)) if($v->name!="paid_for_year_date" && $v->name!="approved"){
?><th class="header"><?php echo display_version($v->name);?></th>
<?php
}
?>
<th class="header">Actions</td>
</tr>
</thead>
<?php
while($row=mysql_fetch_assoc($result)){
$row["category"]=$categories[$row["category"]]["category_name"];
$pfydate=$row["paid_for_year_date"];
unset($row["paid_for_year_date"]);
$extra_link="";
if($pfydate==$row["join_date"]){
    $extra_link="<br/><a href='mark_as_paid.php?account_id=".$row["account_id"]."&auth_code=".md5("lgotadmin".$row["account_id"])."'>Mark as Paid</a>";
}
if($row["approved"]==0){
    $extra_link.="<br/><a href='approve.php?account_id=".$row["account_id"]."&auth_code=".md5("lgotadmin".$row["account_id"])."'>Approve</a>";
}
unset($row["approved"]);

?>
<tr><td><?php echo implode("</td><td>",$row);?></td><td><a href="edit_account.php?account=<?php echo $row["account_id"];?>">Edit Account</a><br><a href="view_transactions.php?account=<?php echo $row["account_id"];?>">Edit Transactions</a><br/><a href="delete.php?account_id=".$row[account_id"]<?php echo $row["account_id"];?>">Edit Account</a><?php echo $extra_link;?></td></tr>
<?php 
}
?>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:01:42.583

按着这些次序

1）您需要创建一个文件deleteFile.php（或）您可以创建一个文件并使用if条件执行插入，更新和删除等所有操作。

2）然后，您应该将行 id 或某些标识符传递给页面，以识别必须删除的行。

3）在那，您应该编写一个查询以使用此标识符删除该行。

4）然后您可以发出警报消息并重定向到页面。

5）单个文件的情况下，需要向页面发送一个操作类型如删除，带有id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T04:06:56.913

你没有提到你想如何更新你的页面。刷新页面基本上有两种方法。

1.  刷新整个页面。

在此您将使用一些参数调用您的 delete.php。在 delete.php 中，您根据给定的参数执行删除操作，然后将其发送回负责生成页面的代码。新生成的页面不会有删除行。

1.  AJAX

如果您使用基于 AJAX 的调用来删除项目这在浏览器相关代码上变得有点复杂。- 您通过 AJAX 调用将 id/参数传递给 delete.php。- delete.php 删除行并将状态消息发送回浏览器。- 如果操作成功，您的 javascript 会处理响应并执行所需的 DOM 操作以从表中删除行。

# c++ - Poco::Logger 线程安全吗？

> ID：14250480
> 
> 赞同：8
> 
> 时间：2013-01-10T03:42:09.160
> 
> 标签：c++, poco-libraries

在我下面的测试代码中似乎是线程安全的。我可以`Poco::Logger`在多线程程序中使用吗？

```
static Poco::Logger *pLogger;    
class MyRunnable : public Poco::Runnable {
   private:
      std::string _name;
      Poco::Random _rnd;
   public:
      void setName(std::string name) {
            _name = name;
         }
      void run() {
         for (int i=0; i<200; i++) {
            pLogger->information("info from: " + _name);
            _rnd.seed(_rnd.next(65532) * _name.size());
            Poco::Thread::sleep(_rnd.next(13) + 1);
         }
      }
}; 
```

这是测试主要：

```
int
main ( int argc, char *argv[] )
{
   Poco::Thread thr1, thr2, thr3;
   MyRunnable *pMyR1 = new MyRunnable(),
              *pMyR2 = new MyRunnable(),
              *pMyR3 = new MyRunnable();
   pMyR1->setName("r1");
   pMyR2->setName("ra2");
   pMyR3->setName("runable3");

   Poco::FormattingChannel *pFCFile = new Poco::FormattingChannel(new Poco::PatternFormatter("%Y-%m-%d %H:%M:%S.%c %N[%P]:%s: %q:%t"));
   pFCFile->setChannel(new Poco::FileChannel("test.log"));
   pFCFile->open();
   pLogger = &(Poco::Logger::create("FileLogger", pFCFile, Poco::Message::PRIO_INFORMATION));

   thr1.start(*pMyR1);
   thr2.start(*pMyR2);
   thr3.start(*pMyR3);

   std::cout << "starting..." << std::endl;
   thr1.join();
   thr2.join();
   thr3.join();
   std::cout << "end." << std::endl;
   return EXIT_SUCCESS;
}           /* ----------  end of function main  ---------- */ 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-15T11:17:15.803

这个问题很老了，但我也有同样的疑问，所以在图书馆论坛上查找我发现： [http](http://pocoproject.org/forum/viewtopic.php?f=12&t=1233&p=2681&hilit=logger#p2681)
://pocoproject.org/forum/viewtopic.php?f=12&t=1233&p=2681&hilit=logger#p2681 重要的报价是：“对于不同的日志记录功能，Logger 是线程安全的。如果您在另一个线程当前正在使用 Logger 时尝试更改连接到 Logger 的 Channel，这可能会导致问题。”

# regex - Fail2Ban 正则表达式，其中 IP 在一条线上，失败消息在另一条线上

> ID：14250481
> 
> 赞同：1
> 
> 时间：2013-01-10T03:42:14.637
> 
> 标签：regex, multiline

我正在尝试创建一个正则表达式来匹配 Xen 的 XAPI 日志。问题是 IP 存储在第一行，失败消息存储在第二行。这是一个例子：

```
Jan  8 23:07:42 myserver stunnel: LOG5[6732:3073162128]: xapi connected from 1.1.1.1:55002
Jan  8 23:07:42 myserver xapi: pam_unix(xapi:auth): authentication failure; logname= uid=0 euid=0 tty= ruser= rhost=  user=root 
```

我的正则表达式是：

```
^.*xapi connected from <HOST>:[0-9]*\n.*xapi: pam_unix.xapi:auth.: authentication failure;.*$ 
```

这在 VI 中可以正常工作（显然没有 ），但在 fail2ban 中不行。我的测试似乎表明问题出在 \n. 这可能与fail2ban吗？

我发现这篇 Stackoverflow 文章：[Can regex match be based on two line of text?](https://stackoverflow.com/questions/2962204/can-regex-match-be-based-on-two-lines-of-text) . 我只是将换行视为一个字符。有没有人开发了支持多行信息的 Fail2Ban 过滤器？（我正在使用 Fail2Ban v0.8.4。如果重要的话）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-04T21:01:58.283

使用fail2ban v0.9.0，这是可能的（没有检查旧版本）。您必须指定`maxlines`选项。尝试以下过滤器文件：

```
[Init]
maxlines = 2

[Definition]

failregex = ^.*xapi connected from <HOST>:[0-9]*\n.*xapi: pam_unix.xapi:auth.: authentication failure;.*$

ignoreregex = 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:05:39.110

免责声明：我不知道 Fail2Ban。一个可能的问题是您`^`同时`&`使用`\n`. 我不认为他们混合得很好。它们是指示线边界的不同且同时的方式。

你最好`\n`系统地使用。

还要将 .* 替换为 .*?，以避免在整个日志中产生...

# c# - Logparser 在 C# 中不起作用

> ID：14250483
> 
> 赞同：0
> 
> 时间：2013-01-10T03:42:38.610
> 
> 标签：c#, logparser

解析查询时出错：指定的 FROM-ENTITY "<1>" 无效 [文件名、目录名或卷标语法不正确。]

`<1>`在 Log Parser 2.2 中的 sql 中使用时正在工作，该文件夹存在。如果我关注文章 - [ADO.NE 的 LogParser DataProvider，查询正在工作](http://www.codeproject.com/Articles/18749/LogParser-DataProvider-for-ADO-NET)

```
 try
        {
            ILogRecord rowLP = null;
            ILogRecordset rsLP = null;

            LogQueryClass logQuery = new LogQueryClass();
            COMW3CInputContextClass comW3CInputContext = new COMW3CInputContextClass();

            string strSQL = @"SELECT " +
                         @"COUNT(*) AS [Requests], " +
                         @"DIV(DIV(SUM(cs-bytes), 1024), 1024) AS [MBytes received], " +
                         @"DIV(DIV(SUM(sc-bytes), 1024), 1024) AS [MBytes sent], " +
                         @"c-ip AS [IP Address], cs(User-Agent) AS [User agent], " +
                         @"MAX(date) AS [Last visit] " +
                         @"FROM <1> " +
                         @"GROUP BY [IP Address], [User agent] " +
                         @"ORDER BY [Requests] DESC";

            // run the query against W3C log
            rsLP = logQuery.Execute(strSQL, comW3CInputContext);
            rowLP = rsLP.getRecord();

        }
        catch (System.Runtime.InteropServices.COMException exc)
        {
            Console.WriteLine("Unexpected error: " + exc.Message);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T09:35:03.130

*<1>* “魔术快捷方式”仅适用于**IISW3C**输入格式，即解析IIS 生成的W3C 日志文件的格式。在您的代码中，您使用的是**W3C输入格式，它解析通用 W3C 格式的日志，因此对***<1>*一无所知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T04:23:38.790

我发现他们没有按照这个[http://www.codeproject.com/Articles/13504/Simple-log-parsing-using-MS-Log-Parser-2-2-in-C-NE](http://www.codeproject.com/Articles/13504/Simple-log-parsing-using-MS-Log-Parser-2-2-in-C-NE)这是行

```
COMW3CInputContextClass comW3CInputContext = new COMW3CInputContextClass();
rsLP = logQuery.Execute(strSQL, comW3CInputContext); 
```

通过进行如下更改，查询可以正常工作

```
rsLP = logQuery.Execute(strSQL, null); 
```

# c# - Convert.ToDateTime 在两个服务器中产生不同的值

> ID：14250485
> 
> 赞同：1
> 
> 时间：2013-01-10T03:42:48.303
> 
> 标签：c#, .net, vb.net, datetime

我们有一个使用 Convert.ToDateTime 在 windows 2003 服务器上运行的 vb.net 2.0 exe。两台服务器都将区域选项设置为英语（澳大利亚）。但其中一个是生产 dd/MM/yyyy，另一个是生产 MM/dd/yyyy。

现在很难更改代码，因为它已经运行了一段时间。有没有人知道它为什么会发生以及如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T03:46:48.800

也许您在服务器上有不同的自定义格式。无论如何，您始终可以在代码中指定精确的格式，这可能是最好的解决方案，因为您的应用程序可以在任何服务器上正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T05:04:10.103

使用控制面板将区域设置设置为相同的日期格式。

# java - 为什么子类构造函数必须显式调用超类构造函数？

> ID：14250486
> 
> 赞同：5
> 
> 时间：2013-01-10T03:42:48.440
> 
> 标签：java

> **可能重复：**
> [为什么 this() 和 super() 必须是构造函数中的第一个语句？](https://stackoverflow.com/questions/1168345/why-does-this-and-super-have-to-be-the-first-statement-in-a-constructor)

为什么子类构造函数必须显式调用超类构造函数？这是什么原因？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-10T03:43:59.463

他们没有。

如果不显式调用超构造函数，则相当于调用无参数超构造函数。

```
public class Sub
{
    public Sub()
    {
        // Do some stuff
    }
} 
```

相当于：

```
public class Sub
{
    public Sub()
    {
        super();
        // Do some stuff
    }
} 
```

如果*要*指定参数，则必须显式调用超级构造函数。这很合理，IMO——你真的想让编译器*猜测*你想提供哪些参数吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T04:02:57.293

子类甚至隐式调用非参数化的超类中存在的默认构造函数。当我们将参数传递给构造函数时，我们必须显式调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T04:05:22.267

如上所述，如果父类中没有默认构造函数，则只需调用超级构造函数。

这是必需的，因为父类必须由其构造函数之一初始化，如果没有默认构造函数，java 编译器无法知道要调用哪个构造函数，或者需要传递哪些参数。

为了更好地理解为什么必须调用父级中的至少一个构造函数，请考虑以下几点：

```
class Person {
    private Person mother;
    private Person father;

    public Person(Person mother, Person father) {
        assert mother != null && father != null: "Parents can't be null!";

        this.mother = mother;
        this.father = father;
    }

    public boolean hasAnyLivingParents() {
        return mother.isAlive() || father.isAlive();
    }

    public boolean isAlive() { return true; }
} 
```

如果您`Person`直接创建 a，则必须指定人员的`mother`and `father`，并且该`hasAnyLivingParents()`方法期望指定这些。

现在，假设您有一个子类 Employee，并且您不关心 Employee 的父母，因此您想编写如下内容：

```
class Employee extends Person {
    double salary;

    public Employee(double salary) { 
        this.salary = salary;
    }
} 
```

这不会编译，因为我们没有调用 的构造函数`Person`，并且没有默认构造函数。如果这*确实*编译，调用*总是*`(new Employee(50000d)).hasAnyLivingParents()`会抛出一个，因为甚至没有初始化and字段。*`NullPointerException``mother``father`*

 *简而言之，java*要求*每个类都由某个构造函数初始化。如果类上没有默认构造函数，则*必须*调用其其他构造函数之一才能初始化对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T03:48:41.183

```
class Parent
{ 
   Parent(int x) {}
}

class Child extends Parent
{
   Child(){} // will not compile.
} 
```

编译器尝试`super()`作为构造函数的第一行调用，`Child()`但父级没有*无参数构造函数*。因此，在这种情况下，您必须通过调用来明确地执行此操作`super(5)`，例如。*

# actionscript-3 - AIR iOS 和 Android 登录

> ID：14250488
> 
> 赞同：0
> 
> 时间：2013-01-10T03:42:48.697
> 
> 标签：actionscript-3, air

我正在为 iOS 和 Android 在 AIR/AS3 中构建一个应用程序，该应用程序需要提交用户信息并将其存储在远程数据库中。我想我需要构建一个注册/登录屏幕，但只是想知道在应用程序中存储会话信息的最佳方法是什么。

我希望如果用户关闭应用程序，会话在他们再次启动时仍然存在。我目前在 app.xml 文件中退出时暂停。我应该删除这个吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T03:51:38.330

对于一些高级想法，可能值得一试（没有研讨会，很难从中获得细节） [http://www.slideshare.net/marcocasario/local-persistent-data-with-actionscript-3-和空气](http://www.slideshare.net/marcocasario/local-persistent-data-with-actionscript-3-and-air)

如果您使用的是 Flex，我建议您从这里开始：http: [//help.adobe.com/en_US/flex/mobileapps/WSb0a29bf92525419c-54dd253312afbec3ecb-8000.html](http://help.adobe.com/en_US/flex/mobileapps/WSb0a29bf92525419c-54dd253312afbec3ecb-8000.html)

否则，使用 File/FileStream 类和 XML 文件或 SQLite 选项都很好，这取决于您需要保存/恢复什么以及您将如何处理数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T03:23:43.643

了解 sqllite、xml 文件和 php 文件。使 flash 文件调用与 php 文件对话的 xml 文件，该文件与 mysql 服务器对话。否则看这里：[http ://active.tutsplus.com/tutorials/actionscript/create-a-flash-login-system-using-php-and-mysql-part-1/](http://active.tutsplus.com/tutorials/actionscript/create-a-flash-login-system-using-php-and-mysql-part-1/)

# iphone - 启动应用程序时收到消息“无法启动应用程序”

> ID：14250490
> 
> 赞同：0
> 
> 时间：2013-01-10T03:42:56.397
> 
> 标签：iphone, ios, objective-c

我已经创建了应用程序的 .ipa 文件。我已通过 iTunes 将其安装到设备上。它正在安装在设备上，但是当我启动应用程序时，它会显示消息`"Could not launch application"`。我已将 deviceId 添加到配置文件中。请给我一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T05:10:26.410

从 iPAD 中删除您以前的相同应用程序，现在删除所有配置文件并安装您的应用程序的新副本。我希望它看起来有效....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T05:20:54.400

我在创建 iPA 文件时遇到了同样的问题。我已经以这种方式解决了问题。

首先检查您的设备中是否有以前的版本。然后您需要重新启动您的 xcode，使用`CMD+SHIFT+K`然后创建 iPA 文件并尝试安装到设备中来构建和清理您的项目。确保您已删除所有以前的应用程序实例，如果可能，请重新启动您的设备。另一件事是检查您的 xcode 中是否提供了相同的配置文件`Organizer`。

这对我来说很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T04:07:34.120

这种情况有时会发生在我身上，但是当我进入我的设备并滚动到应用程序所在的屏幕时，它无法启动应用程序，如果我自己手动启动它，它仍然可以工作......不知道是什么原因，希望能帮到你。

# delphi - 使用 Delphi 6 处理 Unicode 字符

> ID：14250491
> 
> 赞同：6
> 
> 时间：2013-01-10T03:42:59.867
> 
> 标签：delphi, unicode, ado, delphi-6, tadoquery

我有一个在 Delphi 6 中开发的轮询应用程序。它读取文件，根据规范解析文件，执行验证并上传到数据库（**SQL Server 2008 Express Edition**）

我们必须为具有双字节字符集 (DBCS) 的操作系统提供支持，例如日文操作系统。因此，我们将 SQL Server 中的数据库字段从 varchar 更改为 nvarchar。

轮询在带有 DBCS 的操作系统中运行良好。如果系统区域设置为日文/中文/韩文并且操作系统具有相应的语言包，它也适用于非 DBCS 操作系统。但是，如果 Locale 设置为英语，那么数据库包含双字节字符的垃圾字符。

我进行了一些测试，但未能确定解决方案。

例如，如果我使用 TStringList 从**UTF-8**文件中读取数据并将其保存到另一个文件，则保存 Unicode 数据。但是，如果我使用文件的内容使用 TADOQuery 组件运行更新查询，则会显示垃圾字符。该数据库还包含垃圾字符。

PFB示例代码：

```
var
    stlTemp : TStringList;
    qry : TADOQuery;
    stQuery : string;
begin
    stlTemp := TStringList.Create;
    qry := TADOQuery.Create(nil);
    stlTemp.LoadFromFile('D:\DelphiUnicode\unicode.txt');
    //stlTemp.SaveToFile('D:\DelphiUnicode\1.txt'); // This works. Even though 
    //the stlTemp.Strings[0] contains junk characters if seen in watch

    stQuery := 'UPDATE dbo.receivers SET company = ' + QuotedStr(stlTemp.Strings[0]) +
        ' WHERE receiver_cd = N' + QuotedStr('Receiver'); 
    //company is a nvarchar field in the  database
    qry.Connection := ADOConnection1;
    with qry do
    begin
        Close;
        SQL.Clear;
        SQL.Add(stQuery);
        ExecSQL;
    end;
    qry.Free;
    stlTemp.Free
end; 
```

上面的代码在 DBCS 操作系统中运行良好。

我尝试过使用字符串、宽字符串和 UTF8String。但是，如果语言环境设置为英语，这在英语操作系统中不起作用。

请为此问题提供任何指示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T11:56:00.330

在非 Unicode Delphi 版本中，基础是您需要使用`WideString`s (Unicode) 而不是`String`s (Ansi)。

忘记`TADOQuery.SQL`(TStrings)，使用`TADODataSet.CommandText`or `TADOCommand.CommandText`(WideString) 或 typecast `TADOQuery`as `TADODataSet`。例如：

```
stlTemp: TWideStringList; // <- Unicode strings - TNT or other Unicode lib
qry: TADOQuery;
stQuery: WideString; // <- Unicode string

TADODataSet(qry).CommandText := stQuery;
RowsAffected := qry.ExecSQL; 
```

您也可以使用`TADOConnection.Execute(stQuery)`直接执行查询。

* * *

对参数化查询要格外小心：`ADODB.TParameters.ParseSQL`is Ansi。如果`ParamCheck`为真（默认情况下）`TADOCommand.SetCommandText`->`AssignCommandText`如果您的查询是 Unicode（`InitParameters`是 Ansi），则会导致问题。

（请注意，您可以`Command.Parameters`直接使用 ADO - 使用`?`字符作为参数的占位符，而不是 Delphi 的约定`:param_name`）。

* * *

`QuotedStr`返回 Ansi 字符串。您需要此功能的 Wide 版本 (TNT)

* * *

此外，正如@Arioch '提到的[`TNT Unicode Controls`](http://www.yunqa.de/delphi/doku.php/products/tntunicodecontrols/index)套件是您制作 Delphi Unicode 应用程序的最佳选择。它具有在应用程序中成功管理 Unicode 任务所需的所有控件和类。

简而言之，您需要考虑**Wide** :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T08:54:58.987

1.  您没有指定数据库服务器，因此这项调查仍由我们负责。您应该检查您的数据库服务器如何支持 Unicode。这意味着如何为数据库和其中的表/列/索引/排序规则/等指定 Unicode 字符集。您必须确保整个数据库的每个细节都普遍支持 Unicode，以避免数据丢失。

2.  通常，您还应该检查您的数据库连接（使用选择的数据库访问库）是否也启用了 unicode。通常，Microsoft ADO 与 OLE 一样，都应该启用 Unicode。但仍然检查您的数据库服务器手册如何在连接字符串中指定 unicode 代码页或字符集。非 Unicode 连接也可能导致数据丢失。

3.  当您告诉您阅读了一些 unicode 文件时-它是模棱两可的。什么 ius unicode 文件？是 UTF-8 吗？还是 UTF-16 的四种风格之一？还是 UTF-7 ？还是其他一些 Unicode 传输格式？通常的 windows WideChar 大致对应于旧版 UCS-2，并且预计是 UTF-16 的 BOM 剥离 Intel-Endian 风格。 [http://msdn.microsoft.com/en-us/library/windows/desktop/ms221069.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221069.aspx)

4.  如果文件肯定是 UTF-16 的风格，那么您可以使用 Delphi`TWideStringList`或 Jedi CodeLibrary加载它`TJclWideStringList`。查看您从未使用字符串变量处理数据的代码 - 在任何地方使用 WideString 以避免数据丢失。
    由于 D6 是 bug 最多的版本之一，我宁愿确保安装 Delphi 的每个更新，然后安装和使用 JCL。JCL 还提供代码页转换功能，这可能比普通`AnsiStringVar := WideStringVar`方法更灵活。
    对于 UTF-8 文件，可以通过`TWideStringList`JCL 类加载（但不能`TJclWideStringList`）。

5.  调试时，将列表的行加载到`WideString`变量并查看其内容是否保留。

6.  不要写这样的查询。请参阅[http://bobby-tables.com/](http://bobby-tables.com/)即使您没有预料到恶意破解者 - 您也可以自己犯错误或获取意外数据。随时随地使用参数化查询！曾经！
    请参阅此类示例： http: [//docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/ADODB_TADOQuery_Parameters.html](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/ADODB_TADOQuery_Parameters.html)
    检查每个`SQL VARCHAR`参数是否`ftWideString`包含 Unicode，而不是`ftString`. 检查有关字段（列）的相同内容。

7.  想想是否可以抛弃遗留技术，因为它们的支持只会随着时间的推移而变得更加困难。

    7.1。由于 Microsoft ADO 已弃用（例如较新版本的 Microsoft SQL Server 不支持它），请考虑切换到“实时”数据访问库。像 AnyDAC、UniDAC、ZeosDB 或其他一些库。Torry.net 可能会给你一些提示。

    7.2\. 由于 Delphi 6 RTL 和 VCL 不支持 Unicode，如果您设法找到它们的免费版本或购买它们，请考虑将您的应用程序迁移到 TNT Unicode 组件。或者迁移到较新的 Delphi 版本。

    7.3\. 由于 Delphi 6 非常陈旧且长期不受支持，而且它是最有漏洞的 Delphi 版本之一，因此请考虑迁移到较新的 Delphi 版本或免费工具，如 CodeTyphoon 或 Lazarus。作为奖励，Lazarus 在其最近的 beta 版本中开始迁移到 Unicode，并且在迁移结束时，您可能会让您的应用程序准备好 unicode。

    7.4 迁移可能是重构应用程序和摆脱遗留意大利面条的借口和刺激。

# google-apps-script - ImportXML 失败 - 替代方案？

> ID：14250492
> 
> 赞同：2
> 
> 时间：2013-01-10T03:43:08.067
> 
> 标签：google-apps-script, google-sheets

我创建了一个电子表格，从我家附近的两个河流测量仪中提取数据，以尝试跟踪它们与经过我们时的水位的关系（这是一个旧磨坊），因为这个国家似乎越来越多地被洪水淹没！

基本上，工作表可以完美运行，但在电子表格未打开/关闭笔记本电脑时无法正常工作。我想`openById`并且`getSheetByName`会解决这个问题，但我没有运气。

`ImportXML`当工作表未打开时，我构造的命令仅返回 N/A。该脚本每 15 分钟触发一次。我有另一个基本脚本，它将单元格的内容重写为值，以便一次只有一行`ImportXML`命令。这个脚本也是一个定时触发器。

我已经粘贴了下面的脚本 - 如果它们不是很有说服力，请道歉，这是我的第一次尝试！

```
function fetchData() {

var sheet = SpreadsheetApp.openById("0AgG7jQSg2ljFdGNpbFRjUTA1LXJwdmtPcmxkQnZpUHc").getSheetByName("River Levels");

var bredURL = "http://www.environment-agency.gov.uk/homeandleisure/floods/riverlevels/120743.aspx?stationId=4004";

var belURL = "http://www.environment-agency.gov.uk/homeandleisure/floods/riverlevels/120743.aspx?stationId=4002";

var ssBredLevel = "substring((//div[@class='plain_text']/p)[2],35,4)";

var ssBelLevel = "substring((//div[@class='plain_text']/p)[2],31,4)";

var ssTime = "substring(//div[@class='plain_text']/p[2],34,5)";

var ssDate = "substring(//div[@class='plain_text']/p[2],43,10)";

var commandBredLevel = "ImportXML(\"" + bredURL + "\",\"" + ssBredLevel + "\")";   // build ImportXML() command

var commandBredTime = "ImportXML(\"" + bredURL + "\",\"" + ssTime + "\")";   // build ImportXML() command

var commandBredDate = "ImportXML(\"" + bredURL + "\",\"" + ssDate + "\")";   // build ImportXML() command

var commandBelLevel = "ImportXML(\"" + belURL + "\",\"" + ssBelLevel + "\")";   // build ImportXML() command

var commandBelTime = "ImportXML(\"" + belURL + "\",\"" + ssTime + "\")";   // build ImportXML() command

var commandBelDate = "ImportXML(\"" + belURL + "\",\"" + ssDate + "\")";   // build ImportXML() command

sheet.appendRow(['Bredwardine',' ',' ',' ',' ','Belmont',' ',' ',' ',' ','=now()']); // append row

var lastrow = sheet.getLastRow(); // define last row

var bredLevel = sheet.getRange(lastrow, 2); // define ImportXML cell

var bredTime = sheet.getRange(lastrow, 3); // define ImportXML cell

var bredDate = sheet.getRange(lastrow, 4); // define ImportXML cell

var belLevel = sheet.getRange(lastrow, 7); // define ImportXML cell

var belTime = sheet.getRange(lastrow, 8); // define ImportXML cell

var belDate = sheet.getRange(lastrow, 9); // define ImportXML cell

bredLevel.setFormula(commandBredLevel);

bredTime.setFormula(commandBredTime);

bredDate.setFormula(commandBredDate);

belLevel.setFormula(commandBelLevel);

belTime.setFormula(commandBelTime);

belDate.setFormula(commandBelDate);

writeFormats();

}

function writeRows() {

  var sheet = SpreadsheetApp.openById("0AgG7jQSg2ljFdGNpbFRjUTA1LXJwdmtPcmxkQnZpUHc").getSheetByName("River Levels");
  var range = sheet.getRange(1, 1, sheet.getLastRow(), sheet.getLastColumn());
  range.setValues(range.getValues());

};

function writeFormats() {

var sheet = SpreadsheetApp.openById("0AgG7jQSg2ljFdGNpbFRjUTA1LXJwdmtPcmxkQnZpUHc").getSheetByName("River Levels");

var lastcol = sheet.getLastColumn(); // define width of sheet

var lastrow = sheet.getLastRow(); // define last row

var penrow = lastrow-1; // define penultimate row

var formatting = sheet.getRange(penrow,1,1,lastcol); // fetch formatting from penultimate row

formatting.copyFormatToRange(sheet,1,lastcol,lastrow,lastrow); // paste formatting to last row

}; 
```

# hadoop - Hadoop 方法输出数百万个小型二进制/图像文件

> ID：14250494
> 
> 赞同：2
> 
> 时间：2013-01-10T03:43:24.500
> 
> 标签：hadoop, mapreduce, reduce

我需要在 Hadoop 作业中处理和操作许多图像，输入将通过网络传输，使用`MultiThreadedMapper`.

但是减少输出的最佳方法是什么？我想我应该将原始二进制图像数据写入序列文件，将这些文件传输到它们最终的位置，然后编写一个小应用程序来将单个图像从其中提取`SequenceFile`到单个 JPG 和 GIF 中。

还是有更好的选择可以考虑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T12:32:09.860

如果你觉得可以（或者通过一些谷歌搜索你可以找到一个实现），你可以编写一个 FileOutputFormat ，它用 ZipOutputStream 包装一个 FSDataOutputStream [，](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipOutputStream.html)为每个减速器提供一个 Zip 文件（从而节省你编写 seq 的工作量文件提取程序。

不要被自己编写的 OutputFormat 吓倒，它真的没有那么难（而且比编写必须担心拆分的自定义 InputFormat 容易得多）。事实上，这是一个起点——你只需要实现 write 方法：

```
// Key: Text (path of the file in the output zip)
// Value: BytesWritable - binary content of the image to save
public class ZipFileOutputFormat extends FileOutputFormat<Text, BytesWritable> {
    @Override
    public RecordWriter<Text, BytesWritable> getRecordWriter(
            TaskAttemptContext job) throws IOException, InterruptedException {
        Path file = getDefaultWorkFile(job, ".zip");

        FileSystem fs = file.getFileSystem(job.getConfiguration());

        return new ZipRecordWriter(fs.create(file, false));
    }

    public static class ZipRecordWriter extends
            RecordWriter<Text, BytesWritable> {
        protected ZipOutputStream zos;

        public ZipRecordWriter(FSDataOutputStream os) {
            zos = new ZipOutputStream(os);
        }

        @Override
        public void write(Text key, BytesWritable value) throws IOException,
                InterruptedException {
            // TODO: create new ZipEntry & add to the ZipOutputStream (zos)
        }

        @Override
        public void close(TaskAttemptContext context) throws IOException,
                InterruptedException {
            zos.close();
        }
    }
} 
```

# iphone - 如何制作管理两个子视图控制器的父视图控制器

> ID：14250499
> 
> 赞同：2
> 
> 时间：2013-01-10T03:43:46.850
> 
> 标签：iphone, ios, uiviewcontroller

我正在向一个应用程序添加一些功能，该功能与 iOS 上 Springboard 上的应用程序切换抽屉非常相似。我希望能够有一个我可以点击的按钮，它将动画视图的 y 坐标向上，以便在底部显示另一个视图。就像我说的，非常类似于 iOS 上的主页按钮双击功能。

环顾四周后，似乎我需要将两个子视图控制器包装到一个父视图控制器中。

我该怎么做呢？现有的视图控制器非常复杂，所以我很难弄清楚从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T04:33:54.137

我不知道您需要使用父视图控制器来执行此操作。这段代码让我可以做我认为你想做的事。我有一个 BOOL ivar 来跟踪底部视图是否已显示，并使用主视图中的相同按钮在两种状态之间切换。

```
-(IBAction)slideInController:(UIButton *) sender {
    if (viewRevealed == NO) {
        next = [self.storyboard instantiateViewControllerWithIdentifier:@"Blue"];
        next.view.frame = CGRectMake(self.view.frame.origin.x, self.view.frame.origin.y + self.view.frame.size.height, self.view.frame.size.width, 100); // my NextController's view was made 100 points high in IB.
        [self.view.window addSubview:next.view];
        [UIView animateWithDuration:.6 animations:^{
            self.view.center = CGPointMake(self.view.center.x, self.view.center.y - 100);
            next.view.center = CGPointMake(next.view.center.x, next.view.center.y - 100);
        } completion:^(BOOL finished) {
            viewRevealed = YES;
        }];
    }else{
        [UIView animateWithDuration:.6 animations:^{
            self.view.center = CGPointMake(self.view.center.x, self.view.center.y + 100);
            next.view.center = CGPointMake(next.view.center.x, next.view.center.y + 100);
        } completion:^(BOOL finished) {
            [next.view removeFromSuperview];
            viewRevealed = NO;
        }];
    }
} 
```

我通常确实使用容器视图控制器来做这种事情，但这很有效，而且非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T03:57:06.173

您可能想要使用 UINavigationController，然后在点击按钮后推送新的视图控制器。所以你会有你的主 UIViewController 有你不同的选择。当点击该按钮时，您将创建视图控制器的一个实例并将该视图控制器推送到堆栈的顶部。您的代码可能看起来像这样

```
-(IBAction)ViewControllerOneTapped:(id)sender
{   
    UIViewController *vcOne = [[UIViewController alloc] initWithNibName:@"ViewControllerOne" bundle:nil];
    [self.navigationController pushViewController:vcOne animated:YES];
} 
```

您的最终代码将比有人一直为您编写的要复杂得多，但这是您可能想要采取的总体方向。

# jquery - jQuery 不会在 Firefox 中选择 XML 元素

> ID：14250500
> 
> 赞同：-1
> 
> 时间：2013-01-10T03:43:50.907
> 
> 标签：jquery, firefox, xslt

**更新：已编辑问题以添加更多信息。**

我的应用程序直接在浏览器中查看 XML 数据——经过一些轻量级的客户端 XSLT 处理之后，我们可以假设这里只是一个瘦 HTML 包装器中的身份转换。

```
<xsl:output method="xml" indent="no" encoding="utf-8" />

<xsl:template match ="/">
  <html xmlns="http://www.w3.org/1999/xhtml" >
    <head>

    </head>
    <body>

      <xsl:template match="@*|node()">
        <xsl:copy>
           <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
      </xsl:template>

    </body>
  </html>
</xsl:template> 
```

使用 jQuery 1.8.3，这

```
$("*[target]").click(function (event) {
    alert("click");
}); 
```

将（或应该）选择具有@target 属性的元素。

这在 IE 和 Chrome 中运行良好，但在 Firefox 中，除非我将 XSLT 输出更改为“html”，否则 jQuery 不会选择任何内容，这会弄乱其他东西。

在 Firefox 中，让 jQuery 选择非 HTML、XML 元素的正确方法是什么，或者——这可能以不同的方式说同样的事情——让 jQuery 选择自定义 HTML 元素？

**更新：找到问题的根源。**选择器不会选择，因为它们在 $(document).ready() 内，并且不会触发在 Firefox 中使用 XSLT (output='xml') 样式的 XML 文档。其他人有同样的问题：http: [//forum.jquery.com/topic/document-ready-with-xslt-in-xhtml](http://forum.jquery.com/topic/document-ready-with-xslt-in-xhtml)

我还没有找到参数和代码顺序的组合来触发它。到目前为止，我的解决方法是使用 $(window).load() 而不是 $(document).ready()。

**更多更新**现在有一个**jQuery 错误报告**，#13193。[http://bugs.jquery.com/ticket/13193](http://bugs.jquery.com/ticket/13193)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:34:36.360

将 jQuery 代码包装在

```
$(window).load(function(){
    // jQuery bindings here
}); 
```

代替

```
$(document).ready(function(){
    // jQuery bindings here
}); 
```

这将延迟 jQuery 绑定的可用性，但它们会成功

jQuery 团队已将其视为错误。[http://bugs.jquery.com/ticket/13193](http://bugs.jquery.com/ticket/13193)

`$(document).ready`修复错误后切换回。

# php - 由于下拉脚本，动态下拉列表不起作用

> ID：14250502
> 
> 赞同：3
> 
> 时间：2013-01-10T03:43:54.400
> 
> 标签：php, html, css, drop-down-menu, twitter-bootstrap

这是我最初遇到的问题。 [Bootstrap 响应式导航栏问题](https://stackoverflow.com/questions/14215577/bootstrap-responsive-navbar-for-phones-and-other-devices)

然后我得到了“wandarkaf”发布的解决方案。它工作得很好，解决了我的问题。

现在我的问题是，我的网站有一个动态下拉文件上传系统。它在本地主机上完美运行，但在网络服务器上却不行。我意识到，由于我为克服移动导航下拉问题而添加的下拉脚本，因此不会出现第二级和第三级的下拉菜单。删除它可以解决当前问题，但会导致先前的问题。而解决之前的问题，就会产生现在的问题。

我如何解决这两个问题并使事情正常进行。

这是我的文件上传的链接：[动态下拉文件上传](http://ankursinha.net/TestSite/upload.php)

它应该像这样工作：[示例](http://ankursinha.net/upload.php) 选择计算机科学工程选项！其他的都被我禁用了。

请帮助我克服这两个问题。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T04:19:26.653

```
}(window.jQuery);

$(function () {
  $('html').on('click.dropdown.data-api', clearMenus)
  $('body').on('click.dropdown touchstart.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })
       .on('click.dropdown.data-api touchstart.dropdown.data-api'  , toggle, Dropdown.prototype.toggle)
       .on('keydown.dropdown.data-api touchstart.dropdown.data-api', toggle + ', [role=menu]' , Dropdown.prototype.keydown)
}); 
```

应该，

```
$(function () {
  $('html').on('click.dropdown.data-api', clearMenus)
  $('body').on('click.dropdown touchstart.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })
       .on('click.dropdown.data-api touchstart.dropdown.data-api'  , toggle, Dropdown.prototype.toggle)
       .on('keydown.dropdown.data-api touchstart.dropdown.data-api', toggle + ', [role=menu]' , Dropdown.prototype.keydown)
});

}( window.jQuery ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T14:37:37.637

好的，你们所有人。尽管变形者一直对我很有耐心，并尽其所能帮助我。这是另一个解决方案。

显然，最新版本的 Twitter Bootstrap 2.2.2 或其他版本存在问题。发生的情况是，当您使用引导下拉子菜单时，通过触摸设备触摸链接时，您不会被重定向到该链接，而是下拉列表或菜单只是切换回来并关闭。所以暂时，他们要求输入一些代码并修复它（就像上面的答案和 github 上的许多其他答案一样），但添加此代码有时可能会禁用您的正常下拉列表或给出其他问题。某些东西或其他东西总是出错，而且它也不适用于所有的触摸设备。在朋友的帮助下，我亲自在 iPhone、Galaxies、Windows 手机、诺基亚等设备上试用过。

所以在 GitHub 上浏览了很多类似的问题后，我发现他们中的许多人切换回 Twitter Bootstrap 版本 2.0.4，它完全没有问题，无论是下拉菜单还是触摸设备。这个版本的 boostrap.js 可以在所有设备上正常工作，无需用户编辑或进行任何更改。

如果有人遇到类似的问题，我暂时给你解决了。Bootstrap 开发人员正在研究它。如果你想要 2.0.4 版本，这里是链接： [Twitter Bootstrap 2.0.4](https://github.com/sindrenm/meteor/tree/e26672a50d033bb484876f9128d8b75be1eecc40/packages/bootstrap)

谢谢大家！

# git - 在 RHEL 5 上安装 git 文档包

> ID：14250505
> 
> 赞同：1
> 
> 时间：2013-01-10T03:44:11.937
> 
> 标签：git, makefile, rhel5, manpage

我正在尝试在 RHEL 5 系统上安装 git 1.8.1，并且在处理构建的文档部分时遇到了很多困难。即，`asciidoc`。Docbook 在 RHEL5 上确实过时存在问题。

所以，我想使用安装自述文件中指定的`make quick-install-doc`,`make quick-install-man`和命令。`make quick-install-html`但是，我完全不知道在哪里实际下载文件以实现这一点。根据自述文件：

> 要使用这些构建目标，您需要在 git 本身的克隆旁边克隆两个单独的 git-htmldocs 和 git-manpages 存储库。

“git-htmldocs”和“git-manpages”到底在哪里？

**编辑：**我想我找到了它的位置。

此 git url 用于手册页：git://git.kernel.org/pub/scm/git/git-manpages.git

这个 git url 用于 html 页面：git://git.kernel.org/pub/scm/git/git-htmldocs.git

我还在这个 Google 代码网站上找到了它们：[http ://code.google.com/p/git-core/downloads/list](http://code.google.com/p/git-core/downloads/list)

现在...我如何安装它们？我不明白它说的是什么意思：“在 git 本身的克隆旁边”。这意味着*在*git 源目录中，还是直接在它之外？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T04:38:10.327

我想到了！这些是在 1.8.1 版的 RHEL 5 上执行此操作的说明：

您需要做的是首先使用以下命令构建和安装 git：

```
$ make prefix=/usr all
$ sudo make prefix=/usr install 
```

安装完成后，您需要`cd`在 git 源代码目录之外克隆文档：

```
$ cd ../
$ git clone git://git.kernel.org/pub/scm/git/git-manpages.git
$ git clone git://git.kernel.org/pub/scm/git/git-htmldocs.git 
```

接下来，您需要导航回 git 源代码目录，并运行以下命令：

```
$ sudo make prefix=/usr quick-install-doc
$ sudo make prefix=/usr quick-install-html 
```

这样做会安装手册页和 html 页面文档！

# javascript - 按钮上的变量值会更改，但不会更改显示

> ID：14250516
> 
> 赞同：-1
> 
> 时间：2013-01-10T03:45:38.117
> 
> 标签：javascript

我正在尝试创建一个按钮，将 onclick 从 Migrate 更改为 migrated。当我点击它时，值会改变，但显示保持不变。我该如何回去处理这种情况

```
function migrate(p){
    $$('dlmisc_a10').value = "Migrated";
    alert ($$('dlmisc_a10').value);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:11:28.893

我将假设按钮是 a`<button></button>`并`$$`返回一个带有传递 id 的元素。然后要更改文本，您必须更改`innerHTML`.

```
function migrate(p){
    $$('dlmisc_a10').innerHTML = "Migrated";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T04:07:33.347

假设您使用的是原型（我只能通过您的 $$ 函数调用猜测），您可以为此更改按钮的按钮标签：

```
$$('dlmisc_a10').first().update("Migrated"); 
```

无论如何很奇怪，因为我不认为“dlmisc_a10”是一个有效的选择器。您能否发布具有该按钮的 html 部分并澄清您使用的是原型还是任何其他 js fwk？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T04:09:06.533

假设您有这样的声明按钮：

```
<input type="button" id='button1' value="M1" onclick="migrate();"></input> 
```

然后，如果您按如下方式编写javascript，那么它将根据需要更改值：

```
<script type="text/javascript">
function migrate()
{
    document.getElementById("button1").value='M2';
    alert(document.getElementById("button1").value);
}
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T04:11:57.400

我认为您正在尝试这样做。

HTML：

```
<input type="button" value="Migrate" onclick="migrate(this)"/> 
```

JavaScript：

```
function migrate(p) {
    p.value = "Migrated";
    alert(p.value);
} 
```

# ruby - 用 Ruby 制作计时器

> ID：14250517
> 
> 赞同：3
> 
> 时间：2013-01-10T03:45:45.783
> 
> 标签：ruby, timer

我想在 Ruby 中制作一个计时器，在用户选择一定时间后，计时器响起或弹出一条消息。此外，是否可以让计时器响起，直到用户做了某件事（例如数学问题）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T17:03:00.753

使用线程：

```
user_input = Thread.new do
  print "Enter something: "
  Thread.current[:value] = gets.chomp
end

timer = Thread.new { sleep 3; user_input.kill; puts }

user_input.join
if user_input[:value]
  puts "User entered #{user_input[:value]}"
else
  puts "Timer expired"
end 
```

这段代码中运行了三个线程：

1.  线程，它`user_input`从用户那里获取一个字符串并设置它的`value`线程变量
2.  `timer`线程，休眠三秒，然后杀死`user_input`线程
3.  主线程，它产生另外两个，然后等待`user_input`线程完成

如果没有`timer`线程，代码看起来就像单线程的一样，它会提示用户输入然后继续。两个线程的执行使用#join 进行序列化。主线程通过查看`user_input`的`value`线程变量来获取用户交互的结果。

添加`timer`线程会导致`user_input`线程提前终止（在这种情况下为 3 秒）。发生这种情况时，`user_input`线程尚未设置其`value`线程变量，因此当主线程询问它以获取此变量时返回 nil。这是主线程如何确定是`user_input`由于接受用户输入而终止，还是被`timer`线程杀死。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:05:29.843

有人这样想？

```
puts "In how many Seconds you want me to beep?"
t = gets.to_i

sleep t
puts "\a WAKE UP!" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-26T12:16:07.333

我的方式 ：

```
comt = 0
while (comt < 10)
    sleep(1)
    comt = comt +1
    puts comt
end#while 
```

那个显示：1 2 3 ... 10

# c# - 确保使用 ssl 调用操作？

> ID：14250520
> 
> 赞同：3
> 
> 时间：2013-01-10T03:46:26.703
> 
> 标签：c#, asp.net-mvc

使用 c# mvc，如何确保通过 ssl 调用特定的操作？

例如在支付页面上，我的服务器允许 https/http，但我想强制用户访问它使用 https？

我正在考虑类似 actionfilter 的东西，如果他们不使用它会将它们重定向到 https 吗？

这是一个正确的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T03:47:34.407

两秒钟后，当然是框架的一部分。

[RequireHttps属性](http://msdn.microsoft.com/en-us/library/system.web.mvc.requirehttpsattribute%28v=vs.108%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T03:51:09.467

在您的情况下 `[RequireHttp]`，如果您清除登录 cookie，则属性可能会起作用 - 或者您将以明文形式通过网络发送它。避免进一步的轻微成本可能比值得做的工作更多`HTTPS calls.`SO 都是关于回收问题的，其他阅读您的问题的用户可能会认为在登录后下拉到 HTTP 是可以的，而这通常是错误的做法。

该`[RequireHttps]`属性可**用于控制器类型**或操作方法，表示**“只能通过 SSL 访问”。** 对控制器或操作的非 SSL 请求将被重定向到 SSL 版本（如果是 HTTP GET）或被拒绝（如果是 HTTP POST）。如果您愿意，您可以覆盖 RequireHttpsAttribute 并更改此行为。没有内置的 [RequireHttp] 属性可以做相反的事情，但是如果您愿意，您可以轻松地制作自己的属性。

还有 Html.ActionLink() 的重载，它采用协议参数；您可以明确指定“http”或“https”作为协议。这是有关此类重载的[MSDN 文档。](http://msdn.microsoft.com/en-us/library/dd460522.aspx)如果您未指定协议或调用没有协议参数的重载，则假定您希望链接具有与当前请求相同的协议。

我们在 MVC 中没有 [RequireHttp] 属性的原因是它并没有太多好处。它不像[RequireHttps]那么有趣，它鼓励用户做错事。例如，许多网站通过 SSL 登录并在您登录后重定向回 HTTP，***这绝对是错误的做法***。您的登录 cookie 与您的用户名 + 密码一样保密，现在您通过网络以明文形式发送它。此外，在 MVC 管道运行之前，您已经花时间执行握手并保护通道（这是使 HTTPS 比 HTTP 慢的主要原因），因此 [RequireHttp] 不会发出当前请求或未来请求更快。

# ios5 - 有条件地从 AppDelegate 加载故事板文件和第一个场景

> ID：14250521
> 
> 赞同：0
> 
> 时间：2013-01-10T03:46:37.667
> 
> 标签：ios5, xcode4.5, uistoryboard, appdelegate

我最近将我的应用程序转换为通用二进制文件，并将现有的情节提要复制到 iPad 格式。我的印象是我可以有条件地从该方法加载情节提要文件，

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

我在上述方法中有以下代码，但我的初始场景没有从情节提要文件中加载。我得到一个没有任何内容的白屏，但​​我确实看到了状态栏。

```
// iPad Legacy 1024 x 768
    if([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad) {
        // the iOS device is in the iPad family.

        NSLog(@"the iOS device = %@",[UIDevice currentDevice]);

        CGSize iOSDeviceScreenSize = [[UIScreen mainScreen] bounds].size;

        NSLog(@"The size of screen is %f",iOSDeviceScreenSize.height);

            if (iOSDeviceScreenSize.height == 1024) {

                // load storyboard , load rootviewcontroller, show initial scene

                UIStoryboard *sbipad = [UIStoryboard storyboardWithName:@"iPad" bundle:nil];

                ViewControllerWelcome *vcwelcome = [sbipad instantiateInitialViewController];

                self.window.rootViewController = vcwelcome;

                [self.window makeKeyAndVisible];

                NSLog(@"iPad storyboard file loaded");
            }
    }

    if([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPhone) {

        CGSize iOSDeviceScreenSize = [[UIScreen mainScreen] bounds].size;

            if (iOSDeviceScreenSize.height == 480) {

                // iphone 3GS, 4, 4S, and iPod Touch 3rd and 4th gen 3.5 inch screen diagnolly measured

                UIStoryboard *sbiphone = [UIStoryboard storyboardWithName:@"iPhone" bundle:nil];

                ViewControllerWelcome *vcwelcome = [sbiphone instantiateInitialViewController];

                self.window.rootViewController = vcwelcome;

                [self.window makeKeyAndVisible];

                NSLog(@"iPhone storyboard file loaded");
            }

            if (iOSDeviceScreenSize.height == 568) {

                // iphone 5 and ipod touch 5th gen: 4 inch screen diagnolly measured

                UIStoryboard *sbiphone = [UIStoryboard storyboardWithName:@"iPhone" bundle:nil];

                ViewControllerWelcome *vcwelcome = [sbiphone instantiateInitialViewController];

                self.window.rootViewController = vcwelcome;

                [self.window makeKeyAndVisible];

                NSLog(@"iPhone storyboard file loaded for iPhone 5 (4inch screen)");
            }
    }

    return YES; 
```

# algorithm - 计算光束指向角

> ID：14250525
> 
> 赞同：-1
> 
> 时间：2013-01-10T03:47:08.680
> 
> 标签：algorithm, math, projection, plane

我在 2 个不同的平面上有椭圆光束的图像。我确实知道两个平面之间的距离（d = 平面 A 和平面 B 之间的距离），并且我知道通过知道两个平面上椭圆的中心坐标计算得出的旋转角 theta (θ)。如何计算投影回光源原点的距离 R？我可以找到从平面 A 到原点的距离 (D)。我一直在考虑这个问题，但无法完全弄清楚。我想实现一个算法来计算 C# 中的 R。编程部分很简单，但数学我不太确定如何去做。

![在此处输入图像描述](../Images/5fbd049876db96afa895c41709b1e8a5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T05:34:24.923

如果图像是使用长焦镜头拍摄的，其轴穿过光束源，因此透视缩短和离轴效果是微不足道的，那么最好从绘制时的右侧观察这种情况。然后你有两个相似的直角三角形，在光源处有共同的顶点。

```
 |^--..._
 rA |   rB| ^^__
    |_____|______o   (Pardon my ascii art skills.)
    <--d-->
    <--------x--> 
```

您似乎知道或可以轻松找到 rA 和 rB 是从光束源图像到椭圆中心的平面内距离，以及 d 是平面间距离。你想知道x。

为此只需设置比例

```
x / rA = (x-d) / rB. 
```

现在您可以轻松求解 x。

如果使用普通镜头从相对靠近光束源的位置拍摄图像，则需要了解相机几何形状，以便考虑透视效果。即使那样，镜头失真也会导致错误，除非您对相机有很多了解并进行一些花哨的校正。

# c++ - OpenCV 不会显示分辨率大于 640x480 的相机源

> ID：14250527
> 
> 赞同：0
> 
> 时间：2013-01-10T03:47:27.290
> 
> 标签：c++, opencv, camera, resolution

我有一个用 C++ 编写的带有 openCV 的程序，它从两个摄像头获取视频，在单独的窗口中显示，然后将其写入文件。

当相机分辨率设置为 640x480（或更低）时，该程序可以完美运行，但一旦我将其设置为大于该分辨率（即使是几个像素），它就会拒绝显示视频源。窗口将打开，程序会说它运行良好（没有报告错误），但提要没有出现在窗口中。

我已尝试删除部分代码以进行故障排除，包括将其设置为只有一个摄像头处于活动状态。当只有一台相机时，我可以拥有任何我喜欢的分辨率，无论是哪一款相机。只有当我尝试使用两台相机时它才会失败。

有谁知道它为什么这样做？我真的很难过，我需要它以比 640x480 更高的分辨率工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T06:36:57.133

原来问题是计算机中的火线总线。将第二个摄像头更改为不同的端口可以解决问题。

# c++ - 带有结构的列表映射（包含列表） - 无法通过映射访问结构内的列表

> ID：14250528
> 
> 赞同：4
> 
> 时间：2013-01-10T03:47:31.720
> 
> 标签：c++, struct, stdlist

我启动了搜索引擎，但找不到我的问题的相应答案：

基本上我想要一个地图，每个条目都包含一个结构列表。一个结构本身包含 2 个`std::string`变量和一个`std::list<string>`.

尽管访问了结构中的列表，但一切都按预期工作。

一种方法（此处为：getRules）在必要时创建一个映射条目，并为其附加一个列表，并向其添加一个结构（此处为：Rule）元素。在此方法中，调用了另一个方法（此处为：getRuleParams），该方法应负责将元素添加到结构内的列表中。

在 getRuleParams 方法中，添加元素的列表可以通过 struct 元素正确访问。在“环绕”方法中，添加元素的列表也可以通过结构元素直接访问。

**但是**，如果我想访问结构的列表，或者更好的是列表元素，那么奇怪的事情就会发生。我发现地址发生了变化（结构，结构内的列表......）

您可以在我的代码产生的输出中看到（假设它编码正确）。

由于我是 C++ 新手，也许我错过了一些非常简单/必要的东西。它是否与一些被调用的复制构造函数有关，但为什么只使用指向所有“变量”的指针的行为相同？

我真的希望这里有人可以启发我。

我尽可能地简化/隔离了我的问题。（方法的签名必须是这样的，例如`void*`，因为我依赖于其他功能）

请参阅下面的代码并提前致谢：

```
#include <list>
#include <map>
#include <string>
#include <iostream>

using namespace std;

struct Rule {
    string target;
    string action;
    list<string> params;
};

static int getRuleParams(void *prule) {
    Rule* rule = (Rule*) (prule);
    string param = "Entry!";

    //Fill struct with ruleparams
    rule->params.push_back(param);
    cout << "Method getRuleParams()\n" << "parameter: "
    << *(rule->params.begin()) << " \nadress of rule:\t\t\t" << rule
    << " \nadress of rule.params:\t\t" << &(rule->params) << std::endl
    << std::endl;
    return 0;
}

static int getRules(void *dbpolicies) {
    string policy = "FileIO";
    string target = "TARGET";
    string action = "DENY";

    std::map<std::string, std::list<Rule> >* policies = (std::map<std::string,
                                                         std::list<Rule> >*) (dbpolicies);

    //Create std::list<DBRule> (list) for Policy Map-Entry, if not existing
    if ((*policies).find(policy) == (*policies).end())
        (*policies)[policy] = std::list<Rule>();

    //Fill struct
    Rule rule = { target, action };
    (*policies).find(policy)->second.push_back(rule);

    //call Method which manipulates params in struct
    getRuleParams(&rule);

    cout << "Method getRulesforPackage() (access rule directly):";
    cout << "\nparameter = " << *(rule.params.begin())
    << "\naddress of rule:\t\t" << &rule;
    cout << "\nadress of rule.params:\t\t" << &(rule.params) << std::endl
    << std::endl;

    cout << "Method getRulesforPackage() access rule via map:" << std::endl;

    //READ params from map entry -> EVIL
    std::list<Rule> dbrules = (*policies).find(policy)->second;
    Rule firstrule = *dbrules.begin();
    std::list<std::string> dbruleparams = firstrule.params;
    string ruleparam = *(firstrule.params.begin()); //EVIL!
    //  string ruleparam = *(dbruleparams.begin()); // <- REALLY EVIL! (program crashes)

    //Variant 2: pointers only
    std::list<Rule>* dbrules2 = &(*policies).find(policy)->second;
    Rule* firstrule2 = &*(dbrules2->begin());
    std::list<std::string>* dbruleparams2 = &(firstrule2->params);

    cout << "rule.target = " << firstrule.target << "\nrule.action = "
    << firstrule.action << std::endl;
    cout << "address of rule:\t\t" << &firstrule << std::endl;
    cout << "address of rule (pointer):\t" << firstrule2 << std::endl;

    //  string ruleparam2 = *(dbruleparams2->begin()); //REALLY EVIL! (program crashes)

    //  cout << "parameter: " << ruleparam << std::endl;
    //  cout << "parameter (pointer): " << ruleparam2 << std::endl;

    return 0;
}

static std::map<std::string, std::list<Rule> > getPolicies() {
    std::map<std::string, std::list<Rule> > policies;
    getRules(&policies);
    return policies;

}

int main() {
    std::map<std::string, std::list<Rule> > policies = getPolicies();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T04:05:13.533

这本身就是一个重大问题：

```
Rule rule = { target, action };
(*policies).find(policy)->second.push_back(rule);

//call Method which manipulates params in struct
// **NOTE**: Fills the local variable "rule", not the one just pushed into the list
getRuleParams(&rule); 
```

尽管我不一定建议使用此模型，但您可以通过以下方式解决此问题：

```
Rule rule = { target, action };
getRuleParams(&rule); // fill here, before the push

// then push.
(*policies).find(policy)->second.push_back(rule); 
```

但要正确执行此操作，您应该将空白规则推入列表，然后引用*该*规则对象（列表中的那个）进行初始化：

```
Rule rule = { target, action };
(*policies)[policy].push_back(rule);
getRuleParams(&(*policies)[policy].back()); 
```

老实说，范式本身需要做一些工作，这里有很多不必要的`find()`事情，有条不紊地使用引用和迭代器可以清理很多。

* * *

**返工示例：**

以下已剥离所有输出子句。他们实际上使发现问题*变得更加*困难。请查看以下内容，希望能给您一些想法：

```
#include <list>
#include <map>
#include <string>
#include <iostream>

using namespace std;

// basic rule with strin parameter list
typedef std::list<std::string> ParamList;
struct Rule
{
    string target;
    string action;
    ParamList params;
};

typedef std::list<Rule> RuleList;
typedef std::map<std::string, RuleList> MapStringToRuleList;

static int getRuleParams(void *prule)
{
    Rule* rule = (Rule*) (prule);
    rule->params.push_back("Entry!");
    return 0;
}

static int getRules(void *dbpolicies) {

    string policy = "FileIO";
    string target = "TARGET";
    string action = "DENY";

    MapStringToRuleList* policies = (MapStringToRuleList*)(dbpolicies);

    // push a new rule into the list.
    Rule rule = {target, action};
    RuleList& rules = (*policies)[ policy ];
    rules.push_back(rule);

    //call Method which manipulates params in struct
    getRuleParams(&rules.back());

    // for each rule in our policy's rule list...
    for (RuleList::const_iterator rit = rules.begin(); rit != rules.end(); rit++)
    {
        cout << "Rule: " << policy << endl;

        // for each rule in our curent rule's params list
        const ParamList& params = rit->params;
        for (ParamList::const_iterator pit = params.begin(); pit != params.end(); pit++)
        {
            cout << "  Rule Param: " << *pit << endl;
            // TODO: use current param for something.
        }            
    }
    return 0;
}

static MapStringToRuleList getPolicies()
{
    MapStringToRuleList policies;
    getRules(&policies);
    return policies;
}

int main()
{
    MapStringToRuleList policies = getPolicies();
} 
```

# objective-c - Mac桌面连接IOS设备

> ID：14250538
> 
> 赞同：0
> 
> 时间：2013-01-10T03:49:15.393
> 
> 标签：objective-c, cocoa

苹果是否为 Mac 桌面提供任何框架或库让我查找或连接到 IOS 设备？

多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T05:36:41.347

苹果不提供任何正式的东西。幕后是私有的 MobileDeviceAccess.framework。

看看[https://bitbucket.org/tristero/mobiledeviceaccess](https://bitbucket.org/tristero/mobiledeviceaccess) - 它把 Objective-C 助手放在一堆功能上。

# javascript - 如何根据最终用户给出的数字重复一个表 n 次？

> ID：14250540
> 
> 赞同：0
> 
> 时间：2013-01-10T03:49:23.827
> 
> 标签：javascript, html

我需要重复`<table>`一定次数（最终用户提供的数量）。如何实施？

这是表格：

```
External Sources of funds:<input type="text" size="10">
<table border=1>
    <tr>
        <th>Name of the external Source</th>
        <th>CFY</th>
        <th>CFYm1</th>
        <th>CFYm2</th>
    </tr>

    <tr>
        <td> <input type="text" size="10"> </td>
        <td> <input type="text" size="10"> </td>
        <td> <input type="text" size="10"> </td>
        <td> <input type="text" size="10"> </td>
    </tr>
    <tr>
        <td> <input type="text" size="10"> </td>
        <td> <input type="text" size="10"> </td>
        <td> <input type="text" size="10"> </td>
        <td> <input type="text" size="10"> </td>
    </tr>

    <tr>
        <td><b>Total</b></td>
        <td> <input type="text" size="10"> </td>
        <td> <input type="text" size="10"> </td>
        <td> <input type="text" size="10"> </td>    
    </tr>
</table>
</p>` 
```

在第一行代码中，即外部资金来源，用户输入一些数字`n`。该表必须重复`n`多次。我该如何实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T03:50:32.947

for循环简介：

```
for (var i = 0; i < 20; i++) {
    alert("Hello for the " + i + "th time");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T04:01:38.867

重复该表 10 次：

```
var i = 0, tableCount = 10;
var html = '<table border=1>
    <tr>
        <th>Name of the external Source</th>
        <th>CFY</th>
        <th>CFYm1</th>
        <th>CFYm2</th>
    </tr>

    <tr>
        <td> <input type="text" size="10"> </td>
        <td> <input type="text" size="10"> </td>
        <td> <input type="text" size="10"> </td>
        <td> <input type="text" size="10"> </td>
    </tr>
    <tr>
        <td> <input type="text" size="10"> </td>
        <td> <input type="text" size="10"> </td>
        <td> <input type="text" size="10"> </td>
        <td> <input type="text" size="10"> </td>
    </tr>

    <tr>
        <td><b>Total</b></td>
        <td> <input type="text" size="10"> </td>
        <td> <input type="text" size="10"> </td>
        <td> <input type="text" size="10"> </td>    
    </tr>
</table>';

for(i; i < tableCount; i++){
    $('body').append(html);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T04:11:41.417

您必须`event handler`在文本框中添加一个。

```
<input type="text" size="10" onkeypress="updateTables();"> 
```

当用户在文本框中输入内容时，将调用 JavaScript 函数。在函数内部，您必须使用 a`loop`添加表格元素。

# vba - 移动 Outlook 的邮件代码不移动最后一项

> ID：14250543
> 
> 赞同：1
> 
> 时间：2013-01-10T03:49:37.183
> 
> 标签：vba, outlook, move, outlook-2010

我正在尝试将标记为已**读**的邮件从我的`errorMails`文件夹移动到我的`sentErrors`文件夹，这两个文件夹都在我的`mailOne`文件夹中。我拥有的当前代码适用于我标记为已读的大多数邮件，但只留下最后一封已读邮件。

我错过了什么吗？

```
Public Sub moveToSentFolder()

Dim obj As Object
Dim Items As Outlook.Items
Dim OutMail As Outlook.MailItem

Dim archiveFolder As Outlook.Folder
Dim mailOneFolder As Outlook.Folder
Dim sentErrorFolder As Outlook.Folder
Dim dumpErrorFolder As Outlook.Folder

Set archiveFolder = Outlook.Session.Folders("Archives")
Set mailOneFolder = archiveFolder.Folders("mailOne")
Set errorFolder = ehealthFolder.Folders("errorMails")
Set dumpErrorFolder = ehealthFolder.Folders("sentErrors")

'Dim Message As MailItem

Set Folder = Application.Session.GetDefaultFolder(olFolderInbox)
Set Items = errorFolder.Items

For i = Items.Count - 1 To 0 Step -1

    With Items(i)

        ''Error 438 is returned when .receivedtime is not supported
        On Error Resume Next

        If .UnRead = False Then
            If Err.Number = 0 Then
                .Move dumpErrorFolder
            Else
                Err.Clear
            End If
        End If
    MsgBox i 'debug
    End With

Next

'For some reason the commented out code below only seems to move half of all the read mails, so I have to run the macro more than once to clear folder of read mails - this code now unused
'For Each Message In Items
    'If Message.UnRead = False Then
    ''Message.Move dumpErrorFolder
    'i = i + 1
    'End If
'Next Message

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:18:57.350

在 VBA 中，项目可以有不同的索引边界 - 使用[`option base`](http://msdn.microsoft.com/en-us/library/aa266179%28v=vs.60%29.aspx)or`To`子句控制。在 Office 中，数组从位置 1（**基于 1**）开始索引，而不是从 0（*基于 0*）开始。您需要更改`FOR`循环以适应此更改。

```
For i = Items.Count To 1 Step -1 
```

作为另一种选择，您可以利用[`UBound`](http://msdn.microsoft.com/en-us/library/95b8f22f%28v=vs.80%29.aspx)并[`LBound`](http://msdn.microsoft.com/en-US/library/t9a7w1ac%28v=vs.80%29.aspx)确定适当的索引边界。

```
For i = UBound(Items) To LBound(Items) Step -1 
```

# ruby-on-rails - Rails 3.2 - 未定义的方法 compute_public_path

> ID：14250546
> 
> 赞同：1
> 
> 时间：2013-01-10T03:50:00.233
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

在升级到 Rails 3.2 之前，我的一个视图中有以下代码：

```
<%= compute_public_path('some_file.m4a', 'media-files') %> 
```

升级 Rails 后，出现以下错误：

**未定义的方法“compute_public_path”**

查看[文档](http://apidock.com/rails/ActionView/AssetPaths/compute_public_path)，似乎 compute_public_path 方法已移至 ActionView::AssetPaths。但是，它在我的视图层中不可用。

是否有可能使此功能可用或有其他选择吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T05:19:01.703

可以[`asset_path`](http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html)改用吗？

# android - 启动我的 Android 应用程序时获取 Facebook 会话？

> ID：14250547
> 
> 赞同：0
> 
> 时间：2013-01-10T03:49:59.970
> 
> 标签：android

首先，我必须在我的应用程序中登录 Facebook 帐户。但是，当我退出我的应用程序并再次启动 mp 应用程序时，我仍然需要再次登录帐户 facebook 而无需输入

我的密码，因为我的应用程序已经有会话。我必须保存我的 facebook 会话吗

`SharedPreferance`如果我想让我的应用程序在重新启动时自动登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T05:13:41.303

因为您不想在您的应用程序中一次又一次地登录到 Facebook。您只需要保存其中的`Access Token`内容即可`SharedPreference`：)。

# mysql - 列表类别和子类别的 SQL 查询

> ID：14250559
> 
> 赞同：3
> 
> 时间：2013-01-10T03:51:36.580
> 
> 标签：mysql, sql, e-commerce, categories, product

电子商务网站的此类别/子类别表。
子类别的级别是无限的，管理员可以创建许多级别的子类别。

![在此处输入图像描述](../Images/3d2db97e6c59808103a25b7bcb632b6b.png)

输出
书籍
书籍>英文
书籍>英文>语录

Stationary
Stationary>Paper
Stationary>Paper>Art
Stationary>Paper>Art>Cover
Stationary>Paper>Art>Cover>A4 Size

建议我使用 SQL 查询来显示如下输出：

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T04:01:24.763

使用这种方法，`parent_id`您不能拥有具有无限子类别的 MySql-Query，因为 MySql 不支持递归。您必须通过服务器端编程来做到这一点。

我建议阅读有关[嵌套集](http://en.wikipedia.org/wiki/Nested_set_model)或[闭包表](http://karwin.blogspot.de/2010/03/rendering-trees-with-closure-tables.html)的信息。

使用这些方法，您将能够通过一个查询获得所有树级别。

# scala - Scala 对存在类型的类型推断

> ID：14250561
> 
> 赞同：3
> 
> 时间：2013-01-10T03:51:40.783
> 
> 标签：scala, types, type-inference, scala-2.10, existential-type

考虑以下代码片段，它是我原来问题的简化版本：

```
case class RandomVariable[A](values: List[A])
case class Assignment[A](variable: RandomVariable[A], value: A)

def enumerateAll(vars: List[RandomVariable[_]], evidence: List[Assignment[_]]): Double = 
  vars match {
    case variable :: tail =>
      val enumerated = for {value <- variable.values
        extendedEvidence = evidence :+ Assignment(variable, value)
      } yield enumerateAll(tail, extendedEvidence)
      enumerated.sum
    case Nil => 1.0
  } 
```

这会失败并出现编译时错误，该错误在required type时`variable`被推断为具有type 。**为什么****也不推断有类型****？**我尝试为存在类型命名，以便通过使用向编译器提供提示，但这也不会编译（说它找不到类型 T，我也有兴趣对此进行解释）。`RandomVariable[_0]``Assignment``Any` **`value` **`_0`**`case (variable: RandomVariable[T forSome {type T}]) :: tail =>`******

 ******为了进一步推动，请考虑何时捕获类型参数，如下所示：

```
case variable :: tail =>
  def sum[A](variable: RandomVariable[A]): Double = {
    val enumerated = for {value <- variable.values
      extendedEvidence = evidence :+ Assignment(variable, value)
      } yield enumerateAll(tail, extendedEvidence)
    enumerated.sum
  }
  sum(variable) 
```

这编译没有警告/错误。我可以在第一个示例中修改某些内容以不需要此额外功能吗？

**编辑**：更明确地说，我想知道为什么`value`不被推断为类型`_0`，即使`variable`是类型`_0`并且每个值都来自`List[_0]`in `variable`。另外我想知道是否有任何其他方法可以告诉编译器这个事实（除了捕获我上面给出的函数中的类型）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T06:03:40.850

另一种编译解决方案，即比使用函数捕获类型更清洁（？）。然而，这使得类型推断在原始情况下失败的原因更加令人费解。

```
def enumerateAll(vars: List[RandomVariable[_]], evidence: List[SingleAssignment[_]]): Double = vars match {
  case (variable@RandomVariable(values)) :: tail =>
    val enumeration = for {value <- values
      assignment = SingleAssignment(variable, value)
      extendedEvidence = evidence :+ assignment
    } yield enumerateAll(tail, extendedEvidence)
    enumeration.sum
  case Nil => 1.0
} 
```

它还返回以下警告：

```
scala: match may not be exhaustive.
It would fail on the following input: List((x: questions.RandomVariable[?] forSome x not in questions.RandomVariable[?]))
  def enumerateAll(vars: List[RandomVariable[_]], evidence: List[SingleAssignment[_]]): Double = vars match { 
```

截至发稿时，我无法破译。`RandomVariable`此外，使用参数列表中的 int、double 和 string 的 s 使用几个测试用例运行它会产生所需的结果，而不会出现匹配错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T04:21:52.647

您不应该将 RandomVariable 和 Assignment 的类型绑定在一起吗？

```
 def [A] enumerateAll(vars: List[RandomVariable[A]], evidence: List[Assignment[A]]): Double = 
```

实际上，你可以更宽容一些，直接说

```
 def [A] enumerateAll(vars: List[RandomVariable[A]], evidence: List[Assignment[_ <: A]]): Double = 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T05:40:36.240

错误代码给出了解决方案的一些指示。

```
<console>:15: error: type mismatch;
 found   : RandomVariable[_0] where type _0
 required: RandomVariable[Any]
Note: _0 <: Any, but class RandomVariable is invariant in type A.
You may wish to define A as +A instead. (SLS 4.5)
           extendedEvidence = evidence :+ Assignment(variable, value) 
```

它告诉你它看到了比它推断的更具体的类型，甚至建议让 RandomVariable 允许协变 A。这将允许它在需要时向下改变类型。

```
case class RandomVariable[+A](values: List[A]) 
```

或者，您可以在 enumerateAll 中为这两个参数显式设置泛型类型。通过这种方式，它可以推断出适当的类型，而不是被迫推断出任何类型。此定义不需要 RandomVariable 协变更改，因为这两个参数属于同一类型。

```
def enumerateAll[A](vars: List[RandomVariable[A]], evidence: List[Assignment[A]]): Double = 
```

这个问题可能有助于解释。[为什么示例不编译，也就是（co-，contra-和in-）方差如何工作？](https://stackoverflow.com/questions/663254/scala-covariance-contravariance-question)******

# mysql - Magento 删除属性值/选项 MySQL

> ID：14250562
> 
> 赞同：7
> 
> 时间：2013-01-10T03:51:42.943
> 
> 标签：mysql, magento, attributes

我有一个包含数千个选项的属性。这些选项是由一个脚本以编程方式创建的，该脚本从一个提要中导入我的所有产品。该网站运行速度很慢，所以我想我会摆脱所有过时的选项。问题是我无法从 magento 管理员加载编辑页面。如何使用 MySQL 查询识别属性选项？或者如何以编程方式删除所有属性选项？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T06:37:58.163

这将为您提供所有选项的列表

```
$attribute_code = 'color';
$attribute = Mage::getModel('eav/config')->getAttribute('catalog_product',$attribute_code);
$options = $attribute->getSource()->getAllOptions(); 
```

这允许您更新属性和删除选项

```
$options['delete'][$option_id] = true; 
$options['value'][$option_id] = true;

$options['delete'][$another_option_id] = true; 
$options['value'][$another_option_id] = true;

// (...)

$setup = new Mage_Eav_Model_Entity_Setup('core_setup');
$setup->addAttributeOption($options); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-22T07:27:05.040

在这里，我将向您解释如何在 magento 中以编程方式删除所有属性选项值。您还可以从 magento 的管理面板中删除属性选项值，但是如果属性选项值太多，那么从管理员中删除需要很长时间，因此您可以在 magento 中以编程方式添加属性选项值。为此，您只需要在您的 magento 根文件夹中创建 deleteattributeoptions.php 文件，并在其中添加以下代码并将**ATTRIBUTE_CODE_HERE**替换为您的属性代码。

```
<?php

require_once 'app/Mage.php';$app = Mage::app('admin');umask(0);
$attribute_code = 'ATTRIBUTE_CODE_HERE';
$attribute = Mage::getModel('eav/config')->getAttribute('catalog_product', $attribute_code);
$options = $attribute->getSource()->getAllOptions();
$optionsDelete = array();
foreach($options as $option) {
if ($option['value'] != "") {
$optionsDelete['delete'][$option['value']] = true;
$optionsDelete['value'][$option['value']] = true;
}
}
$installer = new Mage_Eav_Model_Entity_Setup('core_setup');
$installer->addAttributeOption($optionsDelete);

?> 
```

我希望它会帮助你。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-19T13:06:40.177

这是一个查询，它显示了与所涉及的表的关系。我希望这有帮助。您可以通过这种方式为每个商店视图单独获取它们。

要将标签获取到属性的存储视图（或存储在这些表中的任何其他内容），请使用：

```
SELECT 
    EA.attribute_id,
    EA.entity_type_id,
    EA.attribute_code,
    EAL.value AS label
FROM `magento_eav_attribute` AS EA
    INNER JOIN `magento_eav_attribute_option` 
        AS EAO  ON EAO.attribute_id = EA.attribute_id
    INNER JOIN `magento_eav_attribute_label` 
        AS EAL ON EAL.attribute_id = EA.attribute_id
WHERE 
    EAL.store_id = 0 AND
    EA.attribute_code = 'color' LIMIT 0,1'; 
```

要获取与您的处理选项相关的选项值，请使用以下内容：

```
SELECT * 
    FROM `magento_eav_attribute_option_value` 
    WHERE store_id = 0 
       AND option_id = YOUR_OPTION_ID; 
```

或者使用一些连接直接连接这些表

```
SELECT
      EA.attribute_id,
      EA.entity_type_id,
      EA.attribute_code,
      EAOV.option_id,
      EAOV.value_id,
      EAOV.value,
      EAL.value AS label
      FROM `magento_eav_attribute` AS EA
      INNER JOIN `magento_eav_attribute_option` 
          AS EAO  ON EAO.attribute_id = EA.attribute_id
      INNER JOIN `magento_eav_attribute_option_value` 
          AS EAOV  ON EAOV.option_id = EAO.option_id
      INNER JOIN `magento_eav_attribute_label` 
          AS EAL ON EAL.attribute_id = EA.attribute_id
  WHERE
  EAOV.store_id = 0 AND
  EAOV.option_id = YOUR_OPTION_ID AND
  EAL.store_id = '0' AND
  EA.attribute_code = 'color'; 
```

我知道这不是删除值的方法，但也许它可以帮助您确定获取所需数据集的方法。

一切顺利。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-23T14:51:26.853

我就是这样做的

```
// Deleting attribute options by GUID

$setup = new Mage_Eav_Model_Entity_Setup('core_setup');
$attribute  = Mage::getSingleton("eav/config")->getAttribute("customer", "position");

//Values have to be deleted one at a time
// Eav Setup.php
$updates = array();
foreach ($attribute->getSource()->getAllOptions() as $option) {
        $update['value'] = array();
        $update['delete'][$option['value']] = true;
        $update['attribute_id'] = $attribute->getId();
        $update['value'][$option['value']] = true;
        $updates[] = $update;
}

$setup->addAttributeOption($updates);
die(); 
```

# objective-c - uitableviewcontroller 中使用情节提要的动态原型单元

> ID：14250563
> 
> 赞同：3
> 
> 时间：2013-01-10T03:51:44.647
> 
> 标签：objective-c, uitabbarcontroller, storyboard, uitableview

两天来我一直在为这个问题挠头，我真的不知道为什么会发生这种行为......这真的让我感到恶心！

我有一个 iOS 应用程序，它使用由界面生成器构建的故事板。打开视图是拥有 2 个选项卡的 TabBarVC：

选项卡 1：导航控制器 -> TableView Controller1 -> TableView Controller2

选项卡 2：集合视图控制器 -> 导航控制器 -> TableView Controller3 -> TableView Controller2（是的，我的意思是这样写）

在 TableView 控制器 1 和 3 中的每一个中，我都使用了动态原型单元格（样式 = 正确的细节，附件 = 披露指示器）。在第一个中，我设置了一个重用标识符，比如说 TableView1Cell。在我的 tableview 实现中，我使用以下代码返回一个单元格：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"TableView1Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    SFBottles *bottleAtIndex = [self.dataController getCellarBottleAtIndex:indexPath.row];
    [cell.textLabel setText:bottleAtIndex.houseName];
    [cell.detailTextLabel setText:bottleAtIndex.productName];

    return cell;
} 
```

...并且我使用以下代码来 segue 到 TableView Controller2 ：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"ShowBottleDetails"])
    {
        CellarDetailViewController *detailVC = [segue destinationViewController];
        detailVC.bottle = [self.dataController getCellarBottleAtIndex:[self.tableView indexPathForSelectedRow].row];
    }
} 
```

以上所有工作都按预期工作。我在 TableView Controller3 中做同样的事情：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"TableView3Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    SFBottles *bottleAtIndex = [self.bottlesArray objectAtIndex:indexPath.row];
    [cell.textLabel setText:bottleAtIndex.houseName];
    [cell.detailTextLabel setText:bottleAtIndex.productName];

    return cell;
} 
```

...并且当此视图控制器在运行时加载时，我收到以下错误：

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法将具有标识符 TableView3Cell 的单元格出列 - 必须为标识符注册一个 nib 或类或连接情节提要中的原型单元格”

但是，我可以通过将此行添加到 TableView Controller3 的 viewDidLoad 来清除此错误：

```
[self.tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@"TableView3Cell"]; 
```

但是当我这样做时，右侧的字幕或披露指示符都不会出现在显示的单元格上。

此外，即使代码与 TableView Controller1 的实现中的代码相同，选择单元格也不会触发应有的 segue：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"OverviewListToBottleDetails"])
    {
        CellarDetailViewController *detailVC = [segue destinationViewController];
        detailVC.bottle = [self.bottlesArray objectAtIndex:[self.tableView indexPathForSelectedRow].row];
        detailVC.navigationItem.rightBarButtonItem = nil;
    }
} 
```

那么，为什么 2 个看起来相似的 TableView 控制器使用相同的单元格并以相同的方式连接到同一个控制器，却表现得完全不同呢？

我知道这是很多信息，请提出您的问题，我会尽快回答。

谢谢！

# javascript - 无法从 ajax 调用 XrayWrapper 获取 responseText

> ID：14250565
> 
> 赞同：0
> 
> 时间：2013-01-10T03:52:05.753
> 
> 标签：javascript, ajax

我正在使用 IUI 框架并试图从 ajax 调用中获取结果。

如萤火虫所见，该调用返回“XrayWrapper [Object XMLHttpRequest{}”，但是我无法从对象中提取responseText。

在 Firebug 中展开时，responseText 被列为属性，但是它以浅灰色文本为前缀，带有 get: "get ResponseText"

```
 var data = iui.ajax('login.php',{'userName':'sysadm','password':'sysadm'},'POST',null,xxxx(data))
    console.log(data.responseText); 
```

我尝试了许多不同的方法，包括 data.get.responseText、data.get('responseText') 等，但仍然无法获取响应。

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T03:54:43.067

AJAX 调用是异步的，这意味着它会触发 AJAX 请求并立即记录`data`到控制台。此时，AJAX 调用尚未完成。我对您使用的框架不熟悉，但是您需要使用仅在异步请求完成后才执行的回调函数。

[在这里](http://www.iui-js.org/documentation/latest/iui-documentation.html)阅读 IUI 文档，似乎第四个参数是回调函数。所以你需要这样做：

```
iui.ajax('login.php',{
        'userName':'sysadm',
        'password':'sysadm'
    },'POST', function(data) {
        // callback function. Only executes after ajax request completes
        console.log(data);
    }   
); 
```

PS - 另外，你有一个额外的论点。文档仅显示四个参数`url`、`params`和。`method``callback`

# hash - umbraco 在其会员提供者中使用什么样的散列

> ID：14250566
> 
> 赞同：5
> 
> 时间：2013-01-10T03:52:12.840
> 
> 标签：hash, umbraco

我需要将用户从 Umbraco 转移到另一个 CMS，并且他们的所有密码都经过哈希处理。我想阻止用户重置他们的密码，并希望在新的 CMS 中实现相同的哈希算法。

Umbraco 在其会员提供者中使用什么散列类型？

例如

"W477AMlLwwJQeAGlPZKiEILr8TA=" 是 "test" 的哈希

我不能使用 .net，必须在 javascript 中重新实现这个散列。

更新答案：

```
//not sure why I can't use cryptojs's utf16LE function
//words = CryptoJS.enc.Utf16LE.parse("test");
//utf16 = CryptoJS.enc.Utf16LE.stringify("test");

function str2rstr_utf16le(input) {
  var output = [],
      i = 0,
      l = input.length;

  for (; l > i; ++i) {
    output[i] = String.fromCharCode(
      input.charCodeAt(i)        & 0xFF,
      (input.charCodeAt(i) >>> 8) & 0xFF
    );
  }

  return output.join('');
}

var pwd = str2rstr_utf16le("test");
var hash = CryptoJS.HmacSHA1(pwd, pwd);

var encodedPassword = CryptoJS.enc.Base64.stringify(hash);
alert(encodedPassword); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T23:06:09.200

更具体地说，它使用[这个特定](http://msdn.microsoft.com/en-us/library/system.security.cryptography.hmacsha1.aspx)的类来散列密码。[这](http://our.umbraco.org/wiki/reference/api-cheatsheet/users,-user-types-and-permissions/add-user-with-hashed-password)应该作为一个简单的实现示例。

不过，就像 Martijn 指出的那样，Umbraco 使用标准提供者模型。因此，您既可以通过抽象类轻松访问它，也可以**创建**自己的成员资格提供程序实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T08:21:42.660

Umbraco 使用 ASP.NET Membership Provider 模型，这意味着所有随 ASP.NET 开箱即用提供的抽象类都能够访问 Umbraco 成员。检查[此链接](http://msdn.microsoft.com/en-us/library/tw292whz.aspx)以获取有关 ASP.NET 成员资格提供程序的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-12T15:15:54.420

如果您想在 C# 中执行此操作，可以使用以下哈希方法：

```
public static string GetHash(string password) { 
    byte[] passwordBytes = Encoding.Unicode.GetBytes(password);
    using (var hash = new HMACSHA1(passwordBytes)){ 
       return Convert.ToBase64String(hash.ComputeHash(passwordBytes)); 
    }
} 
```

# c - C：检查 0 或 1 的最低有效字节和最高有效字节

> ID：14250567
> 
> 赞同：1
> 
> 时间：2013-01-10T03:52:22.337
> 
> 标签：c

我正在尝试分别检查 int 的最低和最高有效字节。

我想检查最低有效字节中的任何位是否为 1。如果为真，我想返回 1，如果为假，我想返回 0。我的尝试：

```
int lsb_one(int x) {
  return ( (x & 0xffff) != 0 );
} 
```

我想检查最高有效字节中的任何位是否为零。如果为真，我想返回 1，如果为假，我想返回 0。我的尝试：

```
int msb_zero(int x) {
  return ( (~(x & 0x0000ffff)) != 0 );
} 
```

任何指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T03:55:21.723

尝试：

```
int lsb_one(int x) {
    return ((x & 0xff) != 0 );
}

int msb_zero(int x) {
    return ((x & 0xff000000) != 0xff000000);
} 
```

请注意，第二个版本取决于平台，假设 int 是 32 位值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T04:26:29.437

正如其他答案已经指出的那样，您的掩码应该`0xff`代替，`0xffff`因为一个字节通常是 8 位。为了保持`msb_zero`函数实现独立，使用`CHAR_BIT`和`sizeof()`如下：

```
#include <limits.h>

int msb_zero(int x) {
  return (x & (0xff << (sizeof(int) * CHAR_BIT - CHAR_BIT))) != 0;
} 
```

`CHAR_BIT`in为您提供的`limits.h`位数是一个字符/字节。

**编辑**为了完整起见，`lsb_one`函数：

```
int lsb_one(int x) {
    return ((x & 0xff) != 0 );
} 
```

# ember.js - 如何在 Emberjs 视图类的所有实例上设置属性

> ID：14250568
> 
> 赞同：1
> 
> 时间：2013-01-10T03:52:46.113
> 
> 标签：ember.js

我有一个名为`App.BlockView`. 它有一个名为的属性`selected`，单击此视图会切换该`selected`属性。

当我捕获某些事件（例如单击容器的背景）时，我想`selected`在所有视图（或将其设置为 true 的视图）上将属性设置为 false。ember 中是否有任何方法可以收集视图类的所有实例——无论它们在何处以及如何实例化——并在它们上设置属性？

请注意，我的视图是在车把模板中创建的`{{View App.BlockView}}`，因此我不保留对它们的引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T05:15:04.503

您可以让视图在类上注册和注销自己来完成此操作。例如

```
App.BlockView.reopenClass({
  blockViews: [],
  deselectAll: function() {
    this.blockViews.forEach(function(blockView) {
      blockView.set('selected', false);
    });
  }
});

App.BlockView.reopen({
  init: function() {
    this._super();
    App.BlockView.blockViews.pushObject(this);
  },
  destroy: function() {
    App.BlockView.blockViews.removeObject(this);
    this._super();
  }
}); 
```

# html - Primefaces 在 IE7 中混乱的外观和感觉

> ID：14250570
> 
> 赞同：0
> 
> 时间：2013-01-10T03:53:05.700
> 
> 标签：html, css, primefaces, internet-explorer-7

我在我的应用程序中使用 Primefaces 3.2 版，它在所有其他浏览器上运行完美。但是当我在 IE7 上打开它时，所有的外观和感觉都非常混乱。谁能告诉我可以做些什么来克服这个问题？我附上截图以供参考。

![在此处输入图像描述](../Images/d582e5d3e69b1f20d73d2596434272e6.png)

```
 <p:panel id="p_QDEF0061" style="height:auto;">
<div style="width:100%;height:auto;border:none;margin:0px 2px 0px 2px;" id="QDEF0061_content">
<p:dataTable value="#{reportRunManager.getResult('QDEF0061', '1')}" var="row" id="QDEF0061table" rows="20" styleClass="report" style="width:1216px;" rowClasses="odd-row, even-row" paginator="true" paginatorAlwaysVisible="false" paginatorPosition="bottom" paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowIndexVar="index">
  <p:column style="width:91px !important;" colspan="1">
    <f:facet name="header" styleClass="rHdr">
      <div style="text-align:left;">
        <h:outputText value="Completed by" />
      </div>
    </f:facet>
    <div style="text-align:left;word-wrap:break-word;width:91px">
      <h:outputText value="#{row.get('crc_review_user_login')}" escape="false" />
    </div>
  </p:column>
  <p:column style="width:93px !important;" colspan="1">
    <f:facet name="header" styleClass="rHdr">
      <div style="text-align:left;">
        <h:outputText value="Completed On" />
      </div>
    </f:facet>
    <div style="text-align:left;word-wrap:break-word;width:93px">
      <h:outputText value="#{row.get('crc_review_complete_date')}" escape="false">
        <f:convertDateTime type="date" pattern="MM/dd/yyyy" />
      </h:outputText>
    </div>
  </p:column>
  <p:column style="width:93px !important;" colspan="1">
    <f:facet name="header" styleClass="rHdr">
      <div style="text-align:left;">
        <h:outputText value="Date of Service" />
      </div>
    </f:facet>
    <div style="text-align:left;word-wrap:break-word;width:93px">
      <h:outputText value="#{row.get('crc_review_svc_date')}" escape="false">
        <f:convertDateTime type="date" pattern="MM/dd/yyyy" />
      </h:outputText>
    </div>
  </p:column>
  <p:column style="width:79px !important;" colspan="1">
    <f:facet name="header" styleClass="rHdr">
      <div style="text-align:left;">
        <h:outputText value="Post Date" />
      </div>
    </f:facet>
    <div style="text-align:left;word-wrap:break-word;width:79px">
      <h:outputText value="#{row.get('crc_review_post_date')}" escape="false">
        <f:convertDateTime type="date" pattern="MM/dd/yyyy" />
      </h:outputText>
    </div>
  </p:column>
</p:dataTable>
</div>
</p:panel> 
```

# html - 是否有 Keygen 示例？

> ID：14250571
> 
> 赞同：2
> 
> 时间：2013-01-10T03:53:08.123
> 
> 标签：html

我似乎找不到任何实际使用 keygen 元素的实现。我发现的最好的演示只是简单地回显了公钥。

有使用示范吗？即实际身份验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-16T10:01:52.683

[那里](http://lists.whatwg.org/pipermail/whatwg-whatwg.org/attachments/20080714/07ea5534/attachment.txt)有一个使用 PHP 和 Apache 的完整 TLS 身份验证示例。

然而，根据[BrowserAuth.net](http://www.browserauth.net/tls-client-authentication)的说法，这种身份验证存在多个问题。

在我看来，最烦人的是凭证可移植性问题。也就是说，私钥不能从底层平台提取，也不能从一个设备移动到另一个设备。

可能没有标准的 API 来提取私钥（因为这将是一种不好的安全做法），因此您不能将该`<keygen>`元素用作私钥/公钥生成器。

另请参阅[https://security.stackexchange.com/questions/27955/what-are-the-benefits-and-drawbacks-of-the-html5-keygen-element](https://security.stackexchange.com/questions/27955/what-are-the-benefits-and-drawbacks-of-the-html5-keygen-element)

# java - 在 SPOJ 上提交 JAR 文件时出现编译错误

> ID：14250572
> 
> 赞同：4
> 
> 时间：2013-01-10T03:53:09.993
> 
> 标签：java, jar

我正在为SPOJ 上的[TEST问题提交 JAR 文件，但出现编译错误。](http://spoj.com/problems/TEST)

```
2
/bin/bash: line 5: mkdir: command not found
/bin/bash: line 6: META-INF/MANIFEST.MF: No such file or directory
/bin/bash: line 7: META-INF/MANIFEST.MF: No such file or directory
/bin/bash: line 8: META-INF/MANIFEST.MF: No such file or directory
   zip warning: name not matched: META-INF

zip error: Nothing to do! (try: zip -r tested.zip . -i META-INF) 
```

我的 JAR 文件的内容已经包含 META-INF/MANIFEST.MF 文件，所以我不明白编译错误。

```
$ jar tf Main.jar
META-INF/
META-INF/MANIFEST.MF
Main.class 
```

以下是我用于创建 JAR 文件的 JAVA 代码。

```
import java.io.BufferedReader;
import java.io.InputStreamReader;

public class Main {
        public static void main (String[] args) throws Exception {
                BufferedReader r = new BufferedReader(new InputStreamReader(System.in));
                String s;
                while (!(s=r.readLine()).startsWith("42")) System.out.println(s);
        }
} 
```

在解决编译错误的方向上的任何帮助将不胜感激。

编辑：我正在使用 java 归档工具创建 jar。

```
jar -cfm Main.jar manifest Main.class 
```

清单包含

```
Main-Class: Main 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-23T15:29:14.577

尝试通过 Java (Hotspot 8u) 选项而不是 JAR (JavaSE6) 选项提交解决方案。这在我的情况下有效！

在任何情况下，您都应该首先尝试[Ideone](http://ideone.com/)您的解决方案以验证它是否完美运行，然后将其提交给 SPOJ 评委

# c# - 如何防止虚拟方法被嘲笑？

> ID：14250575
> 
> 赞同：4
> 
> 时间：2013-01-10T03:53:18.343
> 
> 标签：c#, unit-testing, abstract-class, rhino-mocks

我们有一个提供一些默认实现的基类`INotifyPropertyChanged`（这个类被许多其他类使用并且不能轻易更改）：

```
public class ObservableBase : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    // this is virtual so derived classes can override it (rarely used, but it is used)
    protected virtual void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

现在我有一个接口和一个抽象基类，该接口派生`ObservableBase`并实现该接口，提供一些默认实现（主要用于属性）：

```
public interface INamedTrigger
{
    string Name { get; }
    void Execute();
}

public abstract class ObservableNamedTriggerBase : ObservableBase, INamedTrigger
{
    private string _Name;
    public string Name
    {
        get { return _Name; }
        set { _Name = value; OnPropertyChanged("Name"); }
    }

    public abstract void Execute();
} 
```

现在我想对`ObservableNamedTriggerBase`（使用 NUnit 和 RhinoMocks）的默认实现进行单元测试：

```
[TestFixture]
public class ObservableNamedTriggerBaseTest
{
    [Test]
    public void TestNameChangeRaisesPropertyChanged()
    {
        var prop = "";
        var mocks = new MockRepository();
        var namedBase = mocks.PartialMock<ObservableNamedTriggerBase>();
        namedBase.PropertyChanged += (s, e) => prop = e.PropertyName;
        namedBase.Name = "Foo";
        Assert.AreEqual("Name", prop);
    }
} 
```

不幸的是，这个测试失败了，因为 Rhino 似乎覆盖`OnPropertyChanged`了`ObservableBase`.

这个[SO question](https://stackoverflow.com/questions/5732611/rhino-mocking-classes-and-not-overriding-virtual-methods)和[Rhino 文档](http://ayende.com/wiki/Rhino+Mocks+Partial+Mocks.ashx)表明不**应该**`PartialMock`这样做。另一方面，这个[SO question](https://stackoverflow.com/questions/806073/why-does-my-partial-mock-have-all-virtual-methods-mocked-even-if-no-expectation)的答案表明，无论模拟类型如何，Rhino 总是覆盖虚拟方法。

 **那么文档有错吗？我该如何正确测试呢？

**更新**：如果我创建自己的模拟类，仅为抽象方法提供虚拟实现，则测试通过，但我想使用 Rhino 模拟来节省我做这件事的工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T09:45:51.630

不确定您使用的是哪个版本，但您似乎将 RR（*Record-Replay*）语法用法与更新的 AAA（*Arrange-Act-Assert*）混合在一起。基本上，这样做：

```
var repo = new MockRepository();
var mock = repo.PartialMock<ObservableNamedTriggerBase>(); 
```

还要求您至少这样做：

```
repo.ReplayAll(); 
```

缺少它，将导致模拟行为不端（`repo.Record()`如果您也设置期望/存根，则可能需要调用）。考虑到现代语法可用（[从](http://blog.benhall.me.uk/2008/05/rhino-mocks-35-goodbye-record-and.html) [Rhino 3.5](http://ayende.com/wiki/Rhino+Mocks+3.5.ashx#WhatsNewinRhinoMocksDF)开始），这是不必要的努力：

```
// no repository needed at all
var mock = MockRepository.GeneratePartialMock<ObservableNamedTriggerBase>(); 
```

新的静态方法`MockRepository`正在处理引擎盖下的记录重放设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T04:00:05.507

一个想法是创建一个方法不可覆盖的测试子类。

```
public abstract class TestingObservableNamedTriggerBase : ObservableNamedTriggerBase {
  protected override sealed void OnPropertyChanged(string propertyName) {
    base.OnPropertyChanged(propertyName);
  }
} 
```

然后通过这个子类进行测试。

我还没有测试这是否有效......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-10T09:11:36.863

您可以使用`CallBase`布尔属性来告诉 moq 是使用原始虚拟方法还是使用默认值覆盖它们。正如它在其财产摘要中所说：

> CallBase 摘要：如果没有匹配的设置，是否将为模拟类调用基成员虚拟实现。默认为假。

所以使用这个：

`mock.CallBase = true;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T05:16:43.707

您可以使用 Rhinomocks 的[CallOriginalMethod](http://ayende.com/wiki/Rhino+Mocks+Method+Options+Interface.ashx)方法来调用原始方法。

```
namedBase.Expect(x => x.OnPropertyChanged(Arg<string>.Is.Anything))
         .CallOriginalMethod(OriginalCallOptions.NoExpectation); 
```

如果测试下的类包含来自测试程序集的其他程序集，您可能需要为测试程序集制作`OnPropertyChanged`方法`protected internal`并添加`InternalVisibleToAttribute`。

同样如您所知，添加`InternalVisibleToAttribute("DynamicProxyGenAssembly2")`到模拟内部类型。**

# html - iPad (iOS6) 上的 Safari 无法缩放 HTML5 视频以填充 100% 的页面宽度

> ID：14250583
> 
> 赞同：35
> 
> 时间：2013-01-10T03:54:05.563
> 
> 标签：html, mobile-safari, html5-video, responsive-design

我正在使用以下 CSS 在响应式 HTML5 页面上以全宽 (100%) 显示视频。视频的原始尺寸为 480x270。视频被缩放以在所有桌面浏览器上填充页面的整个宽度，同时保持纵横比。

但是，我的 iPad (iOS 6.0.1) 上的 Mobile Safari 和 Chrome 显示一个与页面宽度相同的黑色矩形。视频很小，并以其原始尺寸 (480x270) 显示在黑色矩形的中心。

```
video {
    width: 100%;
    max-width: 100%;
    height: auto;
} 
```

灵感来自[http://webdesignerwall.com/tutorials/css-elastic-videos](http://webdesignerwall.com/tutorials/css-elastic-videos)。此页面上有一条评论让我相信 iOS6 中存在回归。

> 由于将我的 iPad 升级到 iOS 6，这个修复似乎不再起作用，我认为它的 height: auto 导致了这个问题。有没有人遇到过类似情况并有解决办法？

还有其他人遇到这个问题吗？我有什么方法可以在 iPad (iOS6) 上全宽显示 HTML5 视频，同时仅使用 CSS 保持纵横比？

HTML如下：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, maximum-scale=1.0, minimum-scale=1.0, initial-scale=1" />
<style>
video {
    width: 100%;
    max-width: 100%;
    height: auto;
    border: 1px solid red;
}
</style>
</head>
<body>
<video preload autoplay controls>
          <source src="file.mp4"  type="video/mp4">
          <source src="file.webm" type="video/webm; codecs=vp8, vorbis">
          <source sr="file.ogv" type="video/ogg; codecs=theora, vorbis">
</video> 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-11T05:43:37.690

我在这里看到两个问题：

1.  移动 Safari 不会为您计算出您的视频尺寸（或纵横比）。您必须在元素属性或 CSS 中指定高度和宽度，因为在您开始播放之前，它根本不会下载视频文件头。请参阅[此页面](http://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html#//apple_ref/doc/uid/TP40009523-CH5-SW10)，第三部分。

2.  即使您这样做，浏览器似乎也不在乎。当您将其设置为自动时，它会返回到默认高度 150 像素。老实说，我不知道为什么。这可能是一个错误。但...

...有一个解决方法。

iOS 似乎对画布没有同样的问题。因此，您可以将画布和您的视频放在一个 div 中，该 div 设置为`position: relative`. 像缩放视频一样缩放画布。将视频设置为`position: absolute`，高度和宽度都设置为 100%。这样，画布将强制 div 为您想要的大小，并且视频将扩展以填充 div。

此处的工作示例：http: [//jsbin.com/ebusok/135/](http://jsbin.com/ebusok/135/)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-01-17T19:27:14.043

结合@brianchirls 答案的一部分，这就是我所做的。到目前为止，这似乎适用于桌面、Android 和 iOS。利用响应式填充技巧，其中 padding-top 的百分比将是宽度的百分比。我的视频是 16:9，所以这是我的代码：

```
#video-container {
 position: relative;
 padding-top: 56.25%;
}

video, object {
  display: block;
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-07T13:08:36.043

我有一个与 IOS6 类似的场景，并且一个视频对象没有调整到它的父级。我通过使用 CSS 定位包含视频的父 div 中的所有元素来解决它。因此，在您的示例中，您必须用 div 包围您的视频（例如 class="DivWithVideo"）并添加以下 CSS：

```
 .DivWithVideo * {max-width: 100%} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-18T13:17:50.810

我不得不对用户上传的视频做类似的事情。这意味着：我不知道视频的分辨率，它甚至可能是纵向模式。

我的解决方法是在加载元数据时通过 javascript 设置高度。对于大多数浏览器，视频的大小从一开始就正确；在 iPad 上，用户点击播放时会调整视频大小。对我来说，只要我知道它必须有多大，就让视频增长是可以的。

代码（使用 object.id 是因为在我的设置中，同一页面上可能有多个视频）：

```
<script type="text/javascript">
    // set height and width to native values
    function naturalSize_{{ object.id }}() {
        var myVideo = document.getElementById('video-{{ object.id }}');
        var ratio = myVideo.videoWidth / myVideo.videoHeight;
        var video_object = $('#video-{{ object.id }}');
        video_object.animate({
            height: (video_object.width() / ratio) + "px"
        }, 1000);
    }

    $(document).ready(function() {
        var myVideo = document.getElementById('video-{{ object.id }}');
        myVideo.addEventListener('loadedmetadata', naturalSize_{{ object.id }}, false);
    })
</script> 
```

如果有人有一个更清洁的解决方案，也许是纯 CSS，我想看看......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-05T12:40:57.720

您可以使用它来根据需要将视频设置在具有边距的容器中。无需添加额外的元素。专门修复 iOS 7。如果需要，请注意`-webkit-calc`前缀

```
width: 100%;
position: absolute;
top: calc(50% - 10px);
left: 50%;
height: calc(100%);
-webkit-transform: translateY(-50%) translateX(-50%); 
```

# actionscript - 移动到另一帧

> ID：14250587
> 
> 赞同：0
> 
> 时间：2013-01-10T03:54:32.250
> 
> 标签：actionscript, actionscript-2

我正在尝试使用 actionscript 2.0 制作隐藏对象游戏。

当所有列出的项目都已找到时，我需要帮助才能移动到另一个框架。任何帮助的家伙。我真的不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T05:45:08.690

```
stop();
_root.onEnterFrame = function() {
if (objectcount == 5) { //or however many hidden objects you have
play(); //goes to next frame... add the "stop();" code on the next frame to stop it from continuing to move onto the next frames... additionally you could use _root.goToAndStop(2);
}
}

object1.onPress = function() {
trace("object1found");
objectcount ++; //adds "1" to the number of objects found
object1._visible = false; //hides the object this was just found
}

object2.onPress = function() {
trace("object1found");
objectcount ++; //adds "1" to the number of objects found
object2._visible = false; //hides the object this was just found
}

object3.onPress = function() {
trace("object1found");
objectcount ++; //adds "1" to the number of objects found
object3._visible = false; //hides the object this was just found
}

object4.onPress = function() {
trace("object1found");
objectcount ++; //adds "1" to the number of objects found
object4._visible = false; //hides the object this was just found
}

object5.onPress = function() {
trace("object1found");
objectcount ++; //adds "1" to the number of objects found
object5._visible = false; //hides the object this was just found
}

//and so on... 
```

# php - 如何从具有表单元素的 php 页面在 pdf 文档中创建静态填充表单

> ID：14250590
> 
> 赞同：1
> 
> 时间：2013-01-10T03:54:42.507
> 
> 标签：php, html, email, pdf

我正在使用 php 做一个网站，我需要从 html 页面创建一个 pdf 文档并将该 pdf 文档附加到电子邮件中。我试过`dompdf`了，但它不起作用，它不会显示复选框和图像，我正在附加我的 html 页面![在此处输入图像描述](../Images/094ab5da8484b8a619a2126526999d83.png)

该表单包含很多复选框、选择框、文本区域、图像。他们有什么方法可以创建 pdf 文档吗？我不想更改表格，只需将其转换为 pdf 即可。请帮忙。

## 文档

```
$html=$this->load->view('controller/viewfile', $data, true);
   $this->load->helper(array('dompdf','file'));
     pdf_create($html, 'designdaytona.com');
    $data = pdf_create($html, '', false);
   write_file('name', $data); 
```

## dompdf 助手

```
if (!defined('BASEPATH')) exit('No direct script access allowed');
function pdf_create($html, $filename='', $stream=TRUE) 
{
    require_once("dompdf/dompdf_config.inc.php");

    $dompdf = new DOMPDF();
    $dompdf->load_html($html);
    $dompdf->render();

    if ($stream) {
        $dompdf->stream($filename.".pdf");
    } else {
        return $dompdf->output();
    }

    /*$var=$dompdf->get_canvas();
   $var->new_page('bonjour', '2');*/

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T04:03:36.897

为什么不试试[tcpdf](http://www.tcpdf.org/examples.php)库，我发现它非常有用。
您可以在 pdf 中创建表单，请查看[http://www.tcpdf.org/examples/example_014.pdf](http://www.tcpdf.org/examples/example_014.pdf)

# apache - Apache日志到数据库

> ID：14250592
> 
> 赞同：1
> 
> 时间：2013-01-10T03:54:50.453
> 
> 标签：apache, logging

我正在为托管多个网站的公司设置各种 Web 服务器。一些站点可以在任何时间点托管在任何服务器上（浮动 IP）。

为了便于使用，我想将所有 Apache 日志信息发送到数据库。我有使用 cronolog 每天轮换日志的经验，但我想更频繁地更新数据库。似乎 cronolog 或只是直接的 Apache，两者都流式传输到日志文件（可能出于性能原因）。如果我要移动文件进行数据库处理，他们会继续写入所述文件。

有没有人这样做并且对设置这样的东西有任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:39:25.997

您需要研究使用 logtail 并获取所需的内容。

# batch-file - 解析制表符分隔的文本文件

> ID：14250593
> 
> 赞同：1
> 
> 时间：2013-01-10T03:54:59.900
> 
> 标签：batch-file, dos, file-processing

我需要通过抓取特定列（如第 1 列和第 5 列）来解析一个制表符分隔的文本文件，并将这些列中的每一个输出到一个文本文件中。请查找数据文件的示例和代码：

数据文件：

```
COL1 COL2 COL3 COL4 COL5 COL6
123  345  678  890  012  234
234  456  787  901  123  345
etc 
```

批处理文件：

```
@echo off & setlocal 
For /F "tokens=1,5*" %%i in (myFile.dat) do call :doSomething "%%i" "%%j"
goto :eof 

:doSomething 
Set VAR1=%1
Set VAR2=%2
@echo %VAR1%>>Entity.txt
@echo %VAR2%>>Account.txt 
```

这可行，但是，`For`循环在第一行停止。

你能帮我找出问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T10:14:12.000

你的代码对我来说很好，但也许试试这个缩短的版本？

```
@echo off
for /F "tokens=1,5*" %%i in (myFile.dat) do (
echo %%i >>Entity.txt
echo %%j >>Account.txt
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:36:07.883

虽然我建议使用 Bali C 的缩短版本，但上面的代码**可能**在第一行之后停止的原因是`goto :eof`or`exit`命令不在函数的末尾`:doSomething`。

```
@echo off & setlocal 
For /F "tokens=1,5*" %%i in (myFile.dat) do call :doSomething "%%i" "%%j"
goto :eof 

:doSomething 
Set VAR1=%1
Set VAR2=%2
@echo %VAR1%>>Entity.txt
@echo %VAR2%>>Account.txt
goto :eof 
```

或者如果扩展被禁用，它将输出以下错误消息：

```
/F was unexpected at this time. 
```

要解决此问题，请添加`EnableExtensions`到您的`setlocal`命令中。

```
@echo off & setlocal EnableExtensions 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T04:14:26.753

您的代码工作正常，请检查下面的输出。

**帐号.txt**

“COL5”

“012”

“123”

“”

**实体.txt**

“COL1”

“123”

“234”

“ETC”

# java - java程序中的代理设置

> ID：14250600
> 
> 赞同：10
> 
> 时间：2013-01-10T03:55:58.340
> 
> 标签：java, proxy

我正在尝试通过 Eclipse 中的 java 程序使用从 wsdl 生成的客户端连接到 Web 服务。我通过代理服务器传递我的请求。但似乎该请求没有通过。相同的代理设置在 SoapUI 上运行良好。请在下面找到我设置的系统属性。

```
Properties props= new Properties(System.getProperties()); 

props.put("http.proxySet", "true"); 

props.put("http.proxyHost", "10.x.x.x"); 

props.put("http.proxyPort", "80");

props.put("http.proxyUser","domainName\\xxx");

props.put("http.proxyPassword","xxx");

Properties newprops = new Properties(props); 
```

Java程序抛出异常为`java.net.UnknownHostException:`

我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-29T09:10:42.793

```
java -Dhttp.proxyHost=proxyhostURL
     -Dhttp.proxyPort=proxyPortNumber
     -Dhttp.proxyUser=someUserName
     -Dhttp.proxyPassword=somePassword javaClassToRun 
```

[http://i4t.org/2007/05/04/java-http-proxy-settings/](http://i4t.org/2007/05/04/java-http-proxy-settings/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-18T14:31:22.490

如果您使用 HTTPS 连接 web 服务，则要设置的代理属性是

```
https.proxyHost
https.proxyPort 
```

（[http://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html](http://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html)）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-10T12:39:56.007

我使用以下代码（并且有效）：

```
 String host = "10.x.x.x";
    String port = "80";
    System.out.println("Using proxy: " + host + ":" + port);
    System.setProperty("http.proxyHost", host);
    System.setProperty("http.proxyPort", port);
    System.setProperty("http.nonProxyHosts", "localhost|127.0.0.1"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-03T06:01:35.577

除了设置系统属性外，还使用 ​​java.net.Authenticator 来设置代理配置。

```
final String authUser = "user";
final String authPassword = "password";
Authenticator.setDefault(
   new Authenticator() {
      public PasswordAuthentication getPasswordAuthentication() {
         return new PasswordAuthentication(
               authUser, authPassword.toCharArray());
      }
   }
);

System.setProperty("http.proxyUser", authUser);
System.setProperty("http.proxyPassword", authPassword); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-12-29T07:11:26.860

您可以使用设置代理`System.setProperty()`

```
System.setProperty("http.proxyHost","122.183.139.107");
System.setProperty("http.proxyPort","8080"); 
```

如果你想删除

```
System.setProperty("http.proxyHost","");
System.setProperty("http.proxyPort",""); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-07-21T12:40:49.017

通过使用以下代码，我能够通过代理。

在 Snehasish 代码中添加了一些新行

```
final String authUser = "username";
final String authPassword = "password";
Authenticator.setDefault(
   new Authenticator() {
      public PasswordAuthentication getPasswordAuthentication() {
         return new PasswordAuthentication(
               authUser, authPassword.toCharArray());
      }
   }
);
url = new URL("http://www.somewebsite.com/sendmyrequest");

connection = (HttpURLConnection) url.openConnection();
connection.setDoInput(true);
connection.setDoOutput(true);
connection.setRequestMethod("POST");
connection.setFollowRedirects(true);

System.getProperties().put("http.proxyHost", "proxy.xyz.com");
System.getProperties().put("http.proxyPort", "portNumber");
System.setProperty("http.proxyUser", authUser);
System.setProperty("http.proxyPassword", authPassword);
System.getProperties().put("http.proxySet", "true"); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-05-17T08:52:41.403

我有同样的问题。只有以下代码适用于我设置代理。

```
System.setProperty("java.net.useSystemProxies", "true"); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-10T12:32:47.800

没有这样的属性`http.proxySet`。

您需要在使用任何 HTTP URL 之前设置其他属性，之后更改它们没有任何效果。

如果您需要动态更改代理，请参阅 java.net.Proxy。

“明文连接？” 正是它所说的意思：您正在将 SSL 用于非 SSL 目标，可能是纯文本目标。

* * *

## 回答 #9

> 赞同：-5
> 
> 时间：2013-01-10T12:39:02.787

在 Eclipse IDE 中，转到 Window->Preferences。在左侧的小方框中写入**代理。**您应该看到**Network Connections**，输入您将使用的请求的代理设置（HTTP 应该足够）。我相信无需在代码本身中设置代理即可解决您的问题。

# hibernate - 条件环境审计

> ID：14250612
> 
> 赞同：9
> 
> 时间：2013-01-10T03:57:48.247
> 
> 标签：hibernate, jboss7.x, hibernate-envers

我有一个要求，我只想在状态字段更改时审核记录。我遵循了文档章节教程“15.8。条件审计”。

第 1 步：关闭自动 Envers 事件侦听器注册。我有以下内容：

```
<prop key="hibernate.listeners.envers.autoRegister">false</prop> 
```

第 2 步：为适当的事件侦听器创建子类。

```
public class DeleteEnversListener extends EnversPostDeleteEventListenerImpl {   
    private static final long serialVersionUID = 5906427978349712224L;
    private static Log log = LogFactory.getLog(DeleteEnversListener.class);

    public DeleteEnversListener(AuditConfiguration enversConfiguration) {
        super(enversConfiguration);
    }

    @Override
    public void onPostDelete(PostDeleteEvent event) {
        log.info("!!! just logging entity !! "+ event.getEntity());
        super.onPostDelete(event);
    }   
} 
```

以类似的方式，我有

*   插入环境监听器
*   更新环境监听器
*   删除EnversListener
*   CollectionRecreateEnversListener
*   PreCollectionRemoveEnversListener
*   PreCollectionUpdateEnversListener

第 3 步：创建自己的实现`org.hibernate.integrator.spi.Integrator`

```
public class CustomEnversIntegrator extends EnversIntegrator   {

    private static Log log = LogFactory.getLog(CustomEnversIntegrator.class);

    @Override
    public void integrate(Configuration configuration,
            SessionFactoryImplementor sessionFactory,
            SessionFactoryServiceRegistry serviceRegistry) {

        super.integrate(configuration, sessionFactory, serviceRegistry);
        final AuditConfiguration enversConfiguration = AuditConfiguration.getFor( configuration, serviceRegistry.getService( ClassLoaderService.class ) );
        EventListenerRegistry listenerRegistry = serviceRegistry.getService( EventListenerRegistry.class );

        System.out.println("Registering event listeners");
        if (enversConfiguration.getEntCfg().hasAuditedEntities()) {
            listenerRegistry.appendListeners(EventType.POST_INSERT, new InsertEnversListener(enversConfiguration));
            listenerRegistry.appendListeners(EventType.POST_UPDATE, new UpdateEnversListener(enversConfiguration));
            listenerRegistry.appendListeners(EventType.POST_DELETE, new DeleteEnversListener(enversConfiguration ) );
            listenerRegistry.appendListeners(EventType.POST_COLLECTION_RECREATE, new CollectionRecreateEnversListener(enversConfiguration ) );
            listenerRegistry.appendListeners(EventType.PRE_COLLECTION_REMOVE, new PreCollectionRemoveEnversListener(enversConfiguration ) );
            listenerRegistry.appendListeners(EventType.PRE_COLLECTION_UPDATE, new PreCollectionUpdateEnversListener(enversConfiguration ) );
        }

    }
} 
```

第 4 步：要在 Hibernate 启动时自动使用积分器，您需要添加一个`META-INF/services/org.hibernate.integrator.spi.Integrator`文件。这是`org.hibernate.integrator.spi.Integrator`文件的内容

```
com.hib.sample.listener.CustomEnversIntegrator 
```

我不确定，如果我错过了什么。我正在使用 JBOSS AS 7.0 和 Hibernate 4.1.8

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2019-03-28T15:51:47.073

这是一个仅用于条件`Envers`审计的 Spring 解决方案，没有丑陋的`META-INF`文件夹等。您所需要的只是配置类中的一个 bean 和一个`CustomEnversEventListener`.

```
@Bean
public EventListenerRegistry listenerRegistry(EntityManagerFactory entityManagerFactory) {
    ServiceRegistryImplementor serviceRegistry = entityManagerFactory.unwrap(SessionFactoryImpl.class).getServiceRegistry();

    final EnversService enversService = serviceRegistry.getService(EnversService.class);
    EventListenerRegistry listenerRegistry = serviceRegistry.getService(EventListenerRegistry.class);

    listenerRegistry.setListeners(EventType.POST_UPDATE, new CustomEnversEventListener(enversService));
    return listenerRegistry;
  } 
```

和

```
 public class CustomEnversEventListener extends EnversPostUpdateEventListenerImpl {

    CustomEnversEventListener(EnversService enversService) {
      super(enversService);
    }

    @Override
    public void onPostUpdate(PostUpdateEvent event) {

      // custom conditional stuff

      super.onPostUpdate(event);
    }
  } 
```

如果您只想自定义一个监听器，即 EnversPostUpdateEventListener，则无需禁用`hibernate.listeners.envers.autoRegister`即可让 Envers 注册另一个监听器。

然后你可以覆盖`Envers`监听器`listenerRegistry.setListeners`或附加`listenerRegistry.appendListeners`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T13:59:35.630

尝试将积分器文件放入：

```
sample.war\WEB-INF\classes\META-INF\services\... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-11T20:38:09.707

也许...

在我的情况下，我使用 Maven，并且我必须包含在`pom.xml`以下行 : `<include>**/*.Integrator</include>`中，因为该文件未打包在`.ear`.

我的`pom.xml`：

```
<resources>
       <resource>
           <directory>src/main/resources</directory>
           <filtering>true</filtering>
           <includes>
                <include>**/*.xml</include>
               <include>**/*.Integrator</include>
           </includes>
       </resource>
       ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-25T09:58:43.427

@ComponentScan(basePackages = {"com.example.demo"},lazyInit = true)

添加lazyInit = true，为我触发了自定义积分器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-06T13:34:01.040

**在我的 maven 项目的src/main/resources**下的**META-INF/services/**文件夹中创建文件**org.hibernate.integrator.spi.Integrator**（包含我的自定义集成器的限定名称）使我的自定义集成器代码被调用。

# mysql - 如何检索没有评论？

> ID：14250614
> 
> 赞同：1
> 
> 时间：2013-01-10T03:58:04.973
> 
> 标签：mysql, sql, select, count

```
items table(the users will select and store into mysql

itemID | name   | item 
1      | Mary   | pants, jeans
2      | John   | jacket, shirt
3      | Jack   | jacket, shirt

description table 

descID | item         
1      | jacket, shirt
2      | pants, jeans  
3      | dress, jeans 

comment table (retrieve the no of comments made)
commentId| item          | comment
1        | jacket        | great
2        | jacket        | nice
3        | jeans         | comfortable 
```

如何从评论表示例中检索评论数，约翰登录。它应该检索 2。

到目前为止，我有这个 SQL 语句：

```
SELECT DISTINCT(COUNT(comment)) AS comment
FROM comment co
INNER JOIN item i
WHERE co.item = i.item; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T05:41:58.097

您应该使用外键而不是文本字符串来关联您的表。答案是修复你的桌子设计。

看来您想要用户和项目之间的多对多关系。这需要另一个表来存储多对多关联。

用户：

```
ID     | name
1      | Mary
2      | John
3      | Jack 
```

项目：

```
ID     | description         
1      | jacket
2      | pants  
3      | dress
4      | shirt
5      | jeans 
```

用户项目关联：

```
UserID | ItemID
1      | 2
1      | 5
2      | 1
2      | 4
3      | 1
3      | 4 
```

注释：

```
ID       | itemID        | comment
1        | 1             | great
2        | 1             | nice
3        | 5             | comfortable 
```

您的查询将是：

```
select count(distinct c.ID) from 
Users as u JOIN UserItemAssoc as uaa on (u.id = uaa.userID)
JOIN Items as i on (i.ID = uaa.itemID)
JOIN Comments as c on (c.itemID = i.ID)
WHERE u.Name = 'John' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T05:20:56.650

尝试这个：

```
SELECT COUNT(DISTINCT c.comment) AS commentCount 
FROM comment c 
INNER JOIN item i ON FIND_IN_SET(c.item, i.item) 
WHERE i.name = 'John'; 
```

# opengl - OpenGL 总是在 cl-opengl (Common Lisp) 中返回 glGetFloatv GL_MODELVIEW_MATRIX 的单位矩阵

> ID：14250616
> 
> 赞同：3
> 
> 时间：2013-01-10T03:58:59.767
> 
> 标签：opengl, matrix, common-lisp

在获取模型视图矩阵方面，glGetFloatv 似乎遇到了一些意想不到的麻烦（这也发生在尝试获取投影矩阵时）。

怎么了？好吧，不管矩阵实际上是什么，该函数都会返回单位矩阵，即使在平移和旋转之后也是如此！我知道这两个矩阵都不是单位矩阵，因为在游戏世界中移动时屏幕上的视觉效果完全符合预期。

我的功能是一点点 Common Lisp 代码（修改为在立即更改矩阵后打印矩阵以进行调试），并在下面进一步说明：

```
(defun apply-camera-gl (camera)
  (declare (type scene-camera camera))
  (declare (optimize (speed 3) (safety 1) (debug 3) (space 0)))
  "Passes the necessary OpenGL commands to apply the position and fov for the camera."
  (let ((pos (scene-camera-position camera))
        (rot (scene-camera-rot camera))
        (fov (scene-camera-fov camera)))
    (declare (type single-float rot fov)
             (type vec3 pos))

    (gl:matrix-mode :projection)
    (gl:load-identity)
    (set-perspective fov +sr+ 0.1 24.0)

    (gl:matrix-mode :modelview)
    (gl:load-identity)

    (gl:rotate -90.0 1.0 0.0 0.0)
    (gl:rotate rot 0.0 0.0 1.0)
    (gl:translate (- (the single-float (vec3-x pos)))
                  (- (the single-float (vec3-y pos)))
                  (- (the single-float (vec3-z pos))))

    ;; this always returns the following:
    ;; mv = #(1.0 0.0 0.0 0.0 0.0 1.0 0.0 0.0 0.0 0.0 1.0 0.0 0.0 0.0 0.0 1.0)
    (format t "mv = ~a~%" (gl:get-float :modelview-matrix))

    nil)) 
```

一些附加说明：

*   我也尝试过，只是想看看会发生什么，将 (gl:get-float :modelview-matrix) 的打印输出更早地放在我的代码中的另一个文件的其他位置，实际上是在创建 OpenGL 上下文之后，我在其中应用一些随机的旋转和翻译调用——在那里它工作得很好，返回了我期望的矩阵！然而，在其他任何地方，它都会返回单位矩阵。我使用这个函数作为例子是因为它最容易理解，即使对于可能不熟悉 Lisp 的读者也是如此。
*   我只能在 2001 年初的某个时候在 OpenGL 论坛上通过 Google 搜索其他人在 Internet 上找到一个实例。不幸的是，该线程以我的编程理智的祸根结束 - “哈哈，没关系，我找到了"的结论。
*   我没有使用固定管道，但即使现代 OpenGL 最佳实践建议“在执行可编程管道时使用自己的矩阵”，我从未读过任何关于 OpenGL 禁用或以某种方式削弱与 OpenGL 相关的矩阵操作功能的某些部分的内容使用可编程流水线时拥有自己的矩阵。但是，为了确定起见，我还尝试了包装在一些代码中的 get-float 调用，它暂时禁用了可编程管道，并且在固定管道模式下它仍然返回单位矩阵。
*   为了确保这不是 nvidia OpenGL 驱动程序中的一些奇怪的错误，我设法在使用英特尔图形驱动程序的笔记本电脑上重现了这个奇怪的异常。结果相同。
*   %gl:get-float-v 也会发生这种情况，它将输出转储到预先分配的外部数组中，而不是像 gl:get-float 那样返回 Lisp 数组。
*   另外，在上面的代码中，我之前在 translate+rotate 调用之后和 get-float 调用之前尝试了 gl:finish (glFinish) 和 gl:flush (glFlush)，基于某种模糊的怀疑，也许，只是也许，有些东西是发生故障。但是这些添加没有效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:21:17.050

我找到了它，实际上我很尴尬，我发布了这个巨大的文字墙问题，关于什么相当于我的一个非常愚蠢的疏忽。但也许像我一样大声说出这个问题，最终帮助我的大脑在睡了一夜之后理清第二天早上该做什么。

那么发生了什么：它返回了单位矩阵，因为我忘记了，几个月前，我在另一个文件中的代码的其他地方更广泛地调用了 apply-camera-gl 函数，在该文件中，它正在构建一个显示列表，旋转和平移作为显示列表本身的一部分（如果这对任何人来说听起来很奇怪，游戏是一个逐步移动的游戏，不像飞行模拟或 FPS）。

在显示列表构造块中，OpenGL 命令不会立即执行。

我重新安排了另一个文件中的代码，只在任何显示列表构造外壳之外调用 apply-camera-gl ......现在它得到了预期的矩阵，因为翻译和旋转被立即调用而不是被推迟到任何时候（ gl:call-list ...) 发生。从现在开始，我将专门为几何使用显示列表——或者更好的是，完全停止使用它们并使用 VBO 来处理几何。

这也解释了为什么它在我把它放在 apply-camera-gl 之外的项目的其他地方返回单位矩阵——它们都恰好在显示列表构造块下，我昨晚甚至没有​​有意识地注意到（道德故事：“隧道视觉”是真实的）

我很抱歉，这个问题可能可以关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T09:55:35.080

嗯，我无法重现该问题，但我会展示我所做的，以便您看到。我正在使用 sbcl、quicklisp（获取 cl-opengl）并运行以下命令

```
CL-USER> (ql:quickload :cl-opengl)
To load "cl-opengl":
   Load 1 ASDF system:
     cl-opengl
; Loading "cl-opengl"
....
(:CL-OPENGL)
CL-USER> (ql:quickload :cl-glut)
 To load "cl-glut":
  Load 1 ASDF system:
    cl-glut
; Loading "cl-glut"
(:CL-GLUT)
CL-USER> (defclass smooth-window (glut:window)
            ()
            (:default-initargs :width 500 :height 500 :pos-x 100 :pos-y 100
                               :mode '(:single :rgb) :title "smooth.lisp"))
#<STANDARD-CLASS SMOOTH-WINDOW>

CL-USER> (defmethod glut:idle ((w smooth-window)) 
           (sleep 2)
           (gl:matrix-mode :modelview)
           (format t "~%~%(~{~5,3f~^ ~})" (coerce (gl:get-float :modelview-matrix) 'list))
           (gl:rotate 10 1.0 0.0 0.0)
           (format t "~%~%(~{~5,3f~^ ~})" (coerce (gl:get-float :modelview-matrix) 'list)))
STYLE-WARNING:
   redefining CL-GLUT:IDLE (#<STANDARD-CLASS SMOOTH-WINDOW>) in DEFMETHOD
#<STANDARD-METHOD CL-GLUT:IDLE (SMOOTH-WINDOW) {1005CB9363}>
CL-USER> (glut:display-window (make-instance 'smooth-window))

(1.000 0.000 0.000 0.000 0.000 1.000 0.000 0.000 0.000 0.000 1.000 0.000 0.000 0.000 0.000 1.000)

(1.000 0.000 0.000 0.000 0.000 0.985 0.174 0.000 0.000 -.174 0.985 0.000 0.000 0.000 0.000 1.000)

(1.000 0.000 0.000 0.000 0.000 0.985 0.174 0.000 0.000 -.174 0.985 0.000 0.000 0.000 0.000 1.000)

(1.000 0.000 0.000 0.000 0.000 0.940 0.342 0.000 0.000 -.342 0.940 0.000 0.000 0.000 0.000 1.000)

(1.000 0.000 0.000 0.000 0.000 0.940 0.342 0.000 0.000 -.342 0.940 0.000 0.000 0.000 0.000 1.000)

(1.000 0.000 0.000 0.000 0.000 0.866 0.500 0.000 0.000 -.500 0.866 0.000 0.000 0.000 0.000 1.000)

(1.000 0.000 0.000 0.000 0.000 0.866 0.500 0.000 0.000 -.500 0.866 0.000 0.000 0.000 0.000 1.000)

(1.000 0.000 0.000 0.000 0.000 0.766 0.643 0.000 0.000 -.643 0.766 0.000 0.000 0.000 0.000 1.000)

(1.000 0.000 0.000 0.000 0.000 0.766 0.643 0.000 0.000 -.643 0.766 0.000 0.000 0.000 0.000 1.000)

(1.000 0.000 0.000 0.000 0.000 0.643 0.766 0.000 0.000 -.766 0.643 0.000 0.000 0.000 0.000 1.000)
; No value 
```

如果这个简单的例子有效，那么 (gl:rotate rot 0.0 0.0 1.0) 肯定有问题...我有可能它正在撤消旋转，所以它可以恢复身份？

对不起，我不能更精确，希望其他人可以填补我错过的位。李斯平快乐！

# .htaccess - 使一个域上的文件夹看起来像另一个域？

> ID：14250619
> 
> 赞同：0
> 
> 时间：2013-01-10T03:59:53.883
> 
> 标签：.htaccess, redirect, masking

我确信这已经被问到并得到了回答，答案的链接会很棒，因为我找不到我需要的东西，而且我感到困惑和沮丧！

我在 GoDaddy 注册了一个域名：www.mybusiness.com

我在 BlueHost 托管，该网站的文件位于 www.myname.com/mybusiness。www.mybusiness.com 设置为 BlueHost 的停放域。

我已经通过 BlueHost 设置了重定向，因此当您输入 www.mybusiness.com 时，您会转到 www.myname.com/mybusiness。好极了。

但是，我希望 URL 仍然显示 www.mybusiness.com ...

我该怎么做呢？如果这是一个 htaccess 答案，我会在 www.myname.com/mybusiness 中做 htaccess 的事情吗？还是在 www.myname.com？

如果这是重复的，谢谢并道歉！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T04:21:34.537

您要的是 iframe 吗？还是你想让[http://example.com/sometext和](http://example.com/sometext)[http://example.org/sometext](http://example.org/sometext)一样，目录也一样？

# java - 使用 MappedByteBuffer 的 READ_Write 模式时发生异常

> ID：14250621
> 
> 赞同：0
> 
> 时间：2013-01-10T03:59:55.867
> 
> 标签：java

我想测试`MappedByteBuffer`READ_WRITE 模式。但我得到一个例外：

```
Exception in thread "main" java.nio.channels.NonWritableChannelException
 at sun.nio.ch.FileChannelImpl.map(FileChannelImpl.java:755)
 at test.main(test.java:13) 
```

我不知道必须修复它。提前致谢。

**现在我修复了程序，也不例外。但是系统返回的是一个垃圾字符序列，但实际上 in.txt 文件中只有一个字符串“asdfghjkl”。我想可能是编码方案导致了这个问题，但我不知道如何验证和修复它。**

```
import java.io.File;
import java.nio.channels.*;
import java.nio.MappedByteBuffer;
import java.io.RandomAccessFile;

class test{
    public static void main(String[] args) throws Exception{

    File f= new File("./in.txt");
    RandomAccessFile in = new RandomAccessFile(f, "rws");
    FileChannel fc = in.getChannel();
    MappedByteBuffer mbb = fc.map(FileChannel.MapMode.READ_WRITE, 0, f.length());

    while(mbb.hasRemaining())
        System.out.print(mbb.getChar());
    fc.close();
    in.close();

    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:07:33.853

`FileInputStream`仅供阅读，您正在使用`FileChannel.MapMode.READ_WRITE`. 应该是`READ`为了`FileInputStream`。用于地图`RandomAccessFile raf = new RandomAccessFile(f, "rw");`。`READ_WRITE`

**编辑：** 文件中的字符可能是 8 位，而 java 使用 16 位字符。因此 getChar 将读取两个字节而不是单个字节。

使用`get()`方法并将其转换`char`为获得所需的字符：

```
while(mbb.hasRemaining())
        System.out.print((char)mbb.get()); 
```

或者，由于该文件可能是基于 US-ASCII 的，您可以使用`CharsetDecoder`来获取`CharBuffer`，例如：

```
import java.io.*;
import java.nio.*;
import java.nio.channels.*;
import java.nio.charset.*;

public class TestFC {
        public static void main(String a[]) throws IOException{
                File f = new File("in.txt");
                try(RandomAccessFile in = new RandomAccessFile(f, "rws"); FileChannel fc = in.getChannel();) {
                        MappedByteBuffer mbb = fc.map(FileChannel.MapMode.READ_WRITE, 0, f.length());

                        Charset charset = Charset.forName("US-ASCII");
                        CharsetDecoder decoder = charset.newDecoder();
                        CharBuffer cb = decoder.decode(mbb);

                        for(int i=0; i<cb.limit();i++) {
                                System.out.print(cb.get(i));
                        }
                }
        }
} 
```

也会给你想要的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T04:11:24.640

会计。到 Javadocs：

> **NonWritableChannelException** - 如果模式是 READ_WRITE 或 PRIVATE 但此通道未打开用于读写
> 
> **FileInputStream** - 用于读取原始字节流，例如图像数据。
> 
> **RandomAccessFile** - 此类的实例支持读取和写入随机访问文件

代替`FileInputStream`, 使用`RandomAccessFile`。

# javascript - 未知 JS 向元素添加边距（找不到 JS 在哪里）

> ID：14250622
> 
> 赞同：0
> 
> 时间：2013-01-10T03:59:56.520
> 
> 标签：javascript, jquery, html, css, web

我的网站有一个背景视频（html5 视频元素），不知何故，它显示在页面的一半（而不是拉伸整个页面）。检查时，视频元素具有：

```
element.style {width: 1349px; margin-top: -344px; margin-left: 0px; } 
```

但我不知道这`margin-top: -344px`是从哪里来的。我买了网站模板。有人可以就我如何找出原因提供一些建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T04:10:48.227

首先，您收到以下错误：

```
Uncaught TypeError: Cannot set property 'volume' of null 
```

因为在第 385 行，您尝试设置尚未在 HTML 中创建的元素“jazz_player”的音量。

如果您想覆盖在插件的 JS 中设置的任何 CSS 设置，您可以使用`!important`，例如：

```
.my-overriding-class{
   margin-top: 0 !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T04:10:15.823

这是一个快速提示。1349可能和你的屏幕一样宽，但有些屏幕可能会更大或更小。HTML5 视频很好，因为它可以根据帧调整视频。这是实际答案：将 1349px 替换为 100%。还要增加宽度，使其为 100%。比，删除 margin-top 和 margin-left 与 margin: 0px 0px 0px 0px。最终代码：element.style {width: 100%; 高度：100%；边距：0px 0px 0px 0px；}

在具有不同屏幕尺寸的移动设备上，我会让视频不显示 btw。

这看起来是对的，但如果我错了，有人纠正我。

# php - mysql在给定后查找下一个日期

> ID：14250623
> 
> 赞同：1
> 
> 时间：2013-01-10T04:00:02.003
> 
> 标签：php, mysql

有没有办法检索与给定日期变量最接近的日期的记录？

例如：

今天的日期是`Thursday, 10th January 2012`

我的数据库有一个灯具列表，我想从中列出下周三的“下周”灯具，即：`Wednesday, 16th January 2012`

如何获取文件以输出日期列中包含此内容的所有行？

提前致谢！

**编辑**：

这是我的带有示例数据的表 - `bowl-track_fixtures`：

```
| fixture_id | league_id | fixture_team_1 | fixture_team_2 | fixture_date             |
---------------------------------------------------------------------------------------
| 1          | 2         | 5              | 6              | Wednesday, 30th January  |
| 2          | 2         | 4              | 1              | Wednesday, 30th January  |
| 3          | 2         | 2              | 3              | Wednesday, 30th January  |
| 1          | 2         | 5              | 6              | Wednesday, 06th February |
| 2          | 2         | 4              | 1              | Wednesday, 06th February |
| 3          | 2         | 2              | 3              | Wednesday, 06th February |

etc.. 
```

我希望系统只向我显示离今天日期最近和之后的行。

我尝试了以下方法；

```
SELECT * FROM `bowl-track_fixtures` WHERE STR_TO_DATE(`fixture_date`, '%l, %d%S %F %Y') >= NOW() ORDER BY STR_TO_DATE(`fixture_date`, '%l, %d%S %F %Y') LIMIT 1; 
```

然而，这不返回任何结果

@尼卡洛斯

这是我正在使用的 MySQL 代码：

```
SELECT fixture_id, MIN( STR_TO_DATE(
fixture_date,  '%l, %d%S %F %Y'
) ) AS  `next_fixture_date` 
FROM  `bowl-track_fixtures` 
WHERE STR_TO_DATE(
`fixture_date` ,  '%l, %d%S %F %Y'
) & gt ; = NOW( ) 
GROUP BY  `fixture_id`
)b ON ( a.`fixture_id` = b.`fixture_id` ) 
AND (
STR_TO_DATE(
a.`fixture_date` ,  '%l, %d%S %F %Y'
) = b.`next_fixture_date`
)
LIMIT 0 , 30 
```

它返回这个：

```
MySQL said: 

#1305 - FUNCTION db.STR_TO_DATE does not exist 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:03:35.980

只需选择日期大于的位置：

```
SELECT * FROM table WHERE STR_TO_DATE(yourdatecol, '%l, %d%S %F %Y') >= NOW() ORDER BY STR_TO_DATE(yourdatecol, '%l, %d%S %F %Y') LIMIT 1; 
```

应该可以，但未经测试

编辑：将 STR_TO_DATE 格式更改为`%l, %d%S %F %Y`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T04:08:24.500

采用

```
SELECT * FROM table WHERE yourdatecol >= NOW() order by yourdatecol LIMIT 1; 
```

*   `order by`会给你最新的日期
*   `limit`将限制你只有一排。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T05:01:49.623

试试这个怎么样：

```
SELECT
    a.*
FROM
    `bowl-track_fixtures` a
JOIN
    (
    SELECT
        fixture_id,
        MIN(STR_TO_DATE(fixture_date, '%l, %d%S %F %Y')) AS next_fixture_date
    FROM
        `bowl-track_fixtures`
    WHERE
        STR_TO_DATE(fixture_date, '%l, %d%S %F %Y') >= NOW()
    GROUP BY
        fixture_id;
    ) b
    ON  (a.fixture_id = b.fixture_id)
    AND (STR_TO_DATE(a.fixture_date, '%l, %d%S %F %Y') = b.next_fixture_date); 
```

这将返回夹具的最近和更大（“下一个”）日期。如果有多个相同的日期，它将返回它们。

我做了两个假设，所以你可能需要稍微调整一下：

1.  字符串的日期格式。确保这是正确的，否则您可能会得到 0 条记录。

2.  您确定“下一个”日期的粒度。我认为它是在 ，`fixture_id`因为日期被命名为`fixture_date`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T04:14:08.177

试试这个

```
SELECT
    DATE_FORMAT(STR_TO_DATE(t.datestring, '%d/%m/%Y'), '%Y-%m-%d') AS ORDER_DATE ,*
FROM t 
WHERE
       DATE_FORMAT(STR_TO_DATE(t.datestring, '%d/%m/%Y'), '%Y-%m-%d') >= NOW()
ORDER BY
       ORDER_DATE DESC
LIMIT 1;
```

有关更多信息，请参阅 ==> [http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)

**测试代码**

```
-- --------------------------------------------------------

--
-- Table structure for table `dates`
--

CREATE TABLE IF NOT EXISTS `dates` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `date` varchar(200) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=7 ;

--
-- Dumping data for table `dates`
--

INSERT INTO `dates` (`id`, `date`) VALUES
(1, 'Wednesday, 30th January 2013'),
(2, 'Wednesday, 30th January 2013'),
(3, 'Wednesday, 30th January 2013'),
(4, 'Wednesday, 06th February 2013'),
(5, 'Wednesday, 06th February 2013'),
(6, 'Wednesday, 06th February 2013');

<?php

    $connection = mysql_connect('localhost','root','')or die(mysql_error());
    $database   = mysql_select_db('stackoverflow')or die(mysql_error());

    $query = "SELECT
                STR_TO_DATE(date, '%W, %D %M %Y') AS ORDER_DATE,dates.*
            FROM 
                dates
            WHERE
                STR_TO_DATE(date, '%W, %D %M %Y') >= NOW()
            ORDER BY
                ORDER_DATE ASC
            LIMIT 1;";
    $result = mysql_query($query)or die(mysql_error());
    echo "<table width='100%' border='1'><tr><td>ID</td><td>DATE</td></tr>";
    while($row = mysql_fetch_assoc($result)){
        echo "<tr><td>".$row['id']."</td><td>".$row['ORDER_DATE']."</td></tr>";
    }
    echo "</table>";
?>
```

**不要忘记在 mysql 日期字符串中添加年份。**

# ios - 如何在 UITableViewCell 中动态添加 UIWebview？

> ID：14250625
> 
> 赞同：1
> 
> 时间：2013-01-10T04:00:12.357
> 
> 标签：ios, objective-c, uitableview

我对如何`uitableviewcell`重用有点困惑。

所以这是我的原始代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath {
  static NSString *CellIdentifier = @"ProductsViewCell";
  UITableViewCell *cell = 
      [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
  if (cell == nil) {
    cell =
        [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
        reuseIdentifier:CellIdentifier] autorelease];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;

    UIWebView* webView = [[UISynchedWebView alloc] initWithFrame:
                          CGRectMake(0,0, 320, 44)];
    webView.autoresizingMask = UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth;
    webView.tag = 1001;
    webView.userInteractionEnabled = NO;
    webView.opaque = NO;
    webView.backgroundColor = [UIColor clearColor];

    [cell addSubview:webView];
  }

  UIWebView* webView = (UIWebView*)[cell viewWithTag:1001];
  UIFont *font = [UIFont fontWithName:@"Arial" size:15.0f];

  NSString *html =
  [NSString stringWithFormat:
   @"<html>\n"
   "<head>\n"
   "</head>\n"
   "<body><div style=\"padding:5px 0px; text-align:center\"><b>test</b></div></body>\n"
   "</html>"];

  [webView loadHTMLString:html
                  baseURL:nil];

  return cell;
} 
```

我有一个如下的 if 条件：

```
- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath {
  static NSString *CellIdentifier = @"ProductsViewCell";
  UITableViewCell *cell = 
      [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
  if (cell == nil) {
    cell =
        [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
        reuseIdentifier:CellIdentifier] autorelease];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;

    UIWebView* webView = [[UISynchedWebView alloc] initWithFrame:
                          CGRectMake(0,0, 320, 44)];
    webView.autoresizingMask = UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth;
    webView.tag = 1001;
    webView.userInteractionEnabled = NO;
    webView.opaque = NO;
    webView.backgroundColor = [UIColor clearColor];

    [cell addSubview:webView];
  }

  //some process here to get isHTML...

  if (isHTML) {
    UIWebView* webView = (UIWebView*)[cell viewWithTag:1001];
    UIFont *font = [UIFont fontWithName:@"Arial" size:15.0f];

    NSString *html =
    [NSString stringWithFormat:
    @"<html>\n"
    "<head>\n"
    "</head>\n"
    "<body><div style=\"padding:5px 0px; text-align:center\"><b>test</b></div></body>\n"
    "</html>"];

    [webView loadHTMLString:html
                    baseURL:nil];
  }
  else{
    cell.textLabel.text = @"Not HTML";
  }
  return cell;
} 
```

因为我的内容是动态的，所以我只想加载`webview`if 内容`html`，否则我想将它作为普通文本加载`cell UILabel`并使用上面的 if 条件，我会得到`webview`与 cell 的重叠`UILabel`。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:43:06.347

试试这个

```
- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath {
  static NSString *CellIdentifier = @"ProductsViewCell";
  UITableViewCell *cell = 
      [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
  if (cell == nil) {
    cell =
        [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
        reuseIdentifier:CellIdentifier] autorelease];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
  }

  //some process here to get isHTML...

  if (isHTML) {
    UIWebView* webView = [[UISynchedWebView alloc] initWithFrame:
                          CGRectMake(0,0, 320, 44)];
    webView.autoresizingMask = UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth;
    webView.tag = 1001;
    webView.userInteractionEnabled = NO;
    webView.opaque = NO;
    webView.backgroundColor = [UIColor clearColor];
    [cell addSubview:webView];

    NSString *html =
    [NSString stringWithFormat:
    @"<html>\n"
    "<head>\n"
    "</head>\n"
    "<body><div style=\"padding:5px 0px; text-align:center\"><b>test</b></div></body>\n"
    "</html>"];

    [webView loadHTMLString:html
                    baseURL:nil];
  }
  else{
      UIWebView* webView = (UIWebView*)[cell viewWithTag:1001];
      if(webView)
      {
           [webView removeFromSuperview];
      }
      cell.textLabel.text = @"Not HTML";
  }
  return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T04:41:40.847

```
UIWebView* webView = (UIWebView*)[cell viewWithTag:1001];
if (isHTML) {
    UIFont *font = [UIFont fontWithName:@"Arial" size:15.0f];
    NSString *html =
    [NSString stringWithFormat:
    @"<html>\n"
    "<head>\n"
    "</head>\n"
    "<body><div style=\"padding:5px 0px; text-align:center\"><b>test</b></div></body>\n"
    "</html>"];

    [webView loadHTMLString:html
                    baseURL:nil];
    webView.hidden = NO;
} else {
    cell.textLabel.text = @"Not HTML";
    webView.hidden = YES;
} 
```

# c# - 如何修复gridviev中的页码？

> ID：14250626
> 
> 赞同：1
> 
> 时间：2013-01-10T04:00:20.210
> 
> 标签：c#, asp.net, html, gridview

我找不到在gridviev中修复页码的方法，因为它们没有根据gridview的内容改变位置。

HTML：

```
<asp:GridView ID="tableResults" runat="server" DataSourceID="sourcePoints"
 CssClass = "table table-bordered" AutoGenerateColumns="False" OnDataBound="tableResults_Bound"
 OnRowDataBound = "tableResults_DataBound" DataKeyNames="i_id" PageSize="4" AllowPaging="true"
 AutoGenerateDeleteButton="True" OnRowDeleted="tableResults_RowDeleted" Height="300px" Width="100%"
 AutoGenerateEditButton = "True" OnRowUpdating="tableResults_RowUpdating"
 AllowSorting="true" OnRowUpdated="tableResults_RowUpdated" BorderStyle="None"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:04:44.757

**简而言之：**`GridView`在 asp.net控件中使用页码时有一些技巧。

要使 Paging 工作，您的数据源必须支持它。如果没有，例如 DataTable，那么您必须自己执行此操作。

下面的代码可能会对您有所帮助：

```
OnPageIndexChanging="myGridview_PageIndexChanging"

protected void myGridview_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridView gv = (GridView)sender;
    DataView dv = gv.DataSource as DataView;
    DataTable dataTable = dv.Table;

    gv.DataSource = myDataTable;
    gv.PageIndex = e.NewPageIndex;
    gv.DataBind();
} 
```

**参考**看：

这里有一些 ** 补充文章** ，逐步解释它们：

*   [使用 ASP.NET GridView 分页时的一些提示和技巧](http://www.dotnetcurry.com/ShowArticle.aspx?ID=244)
*   [使用 ROW_NUMBER() 分页 GridView](http://www.codeproject.com/Articles/12962/Paging-GridView-with-ROW_NUMBER)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T04:10:06.547

使用 `PagerStyle`.

```
 <PagerStyle cssClass="YourPagerCss" HorizontalAlign="Right" /> 
```

并定义你的`css`.

有关详细信息，请参阅链接。 [http://www.west-wind.com/weblog/posts/2007/Aug/18/GridView-and-Paging-Alignment](http://www.west-wind.com/weblog/posts/2007/Aug/18/GridView-and-Paging-Alignment)

# java - 双击鼠标事件后捕获图像

> ID：14250629
> 
> 赞同：1
> 
> 时间：2013-01-10T04:00:27.910
> 
> 标签：java, swing, events, awt, mouselistener

有没有办法在用java双击鼠标事件后捕获图像？我只能在双击事件的鼠标释放时捕获图像。但捕获图像不是双击事件后的图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T04:04:21.913

使用[`MouseEvent.getClickCount()`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseEvent.html#getClickCount%28%29).

> 返回与此事件关联的鼠标单击次数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T04:11:10.343

[http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)

官方 java 教程，带有使用 MouseListener 的示例

# sql - 无法获取不同的记录

> ID：14250635
> 
> 赞同：0
> 
> 时间：2013-01-10T04:02:53.580
> 
> 标签：sql, sql-server

我有一个包含 ID 的表，带有一个备用标识符。

```
ID| Alternate
1 | 100000000
1 | 8471
1 | 1248

2 | 578887518
2 | 8415
2 | 3574

3 | 100000000
3 | 1248 
```

有两种类型的备用标识符.. 9 位和 4 位。每个 ID 都有一个 9 位数字，然后最多有四个不同的 4 位数字。

我的问题是该表不是唯一的。存在类似于上述示例 ID 1 和 3 的情况。可能也存在这种情况，虽然我还没有找到一种情况，其中 9 位标识符匹配，但有不同的 4 位标识符..

```
ID | Alternate
5  | 200000000
5  | 1234

6  | 200000000
6  | 4567 
```

我的目标是创建一个表，并以备用标识符值为中心，但是我目前正在为同一用户获取两行。

有人知道我将如何解决这个问题吗？
当前代码

```
SELECT  ID,  [THCI], [2101] , [2202], [2245] 
FROM          
    (SELECT     
        T1.[ID], 
        T1.[IDENTIFIER],
        CASE WHEN T2.[MAIN_IDENT] IS NULL THEN 'THCI' ELSE T2.[MAIN_IDENT] END AS PIV

    FROM MYTABLE T1
        LEFT OUTER JOIN TABLE2 AS T2 ON T2.[REFNO] = T1.[REFNO]
    WHERE 
        (LEN(T2.[MAIN_IDENT]) = 4 OR T2.[MAIN_IDENT] IS NULL)
        AND (LEN(T1.[IDENTIFIER]) = 4 OR LEN(T1.[IDENTIFIER]) = 9)
    ) AS SourceTable 
PIVOT (MAX([IDENTIFIER]) FOR PIV IN ([THCI], [2245], [2202], [2101],[2345],[2303])) AS MYPIV 
```

编辑：预期的输出将是。另请注意，它是四个备用标识符，而不是三个。虽然变化不大

```
[ID] | [THCI]      | [2245] | [2202] | [2101] | [2345] 
1    | 100000000   | 4817   | 6824   | NULL   | 1587
2    | 845279514   | 2359   | 7847   | 1234   | NULL
3    | 415784521   | 2415   | NULL   | NULL   | 8747 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T04:47:32.320

如果您的目标只是检索省略重复值的数据，则可以通过首先检索 9-character 的数据`IDENTIFIER`（按 MAX(ID) 分组）然后加入同一个表以过滤 4-character 来完成`IDENTIFIER`。因此，内部的 SELECT 语句将与此类似（在其上应用 PIVOT）：

```
SELECT 
    IDENT9.ID,
    IDENT9.IDENTIFIER,
    IDENT4.IDENTIFIER
FROM
    (SELECT     
    MAX([ID]) ID, 
    [IDENTIFIER],
    FROM MYTABLE
    WHERE LEN([IDENTIFIER]) = 9
    GROUP BY [IDENTIFIER]) AS IDENT9
LEFT OUTER JOIN
    (SELECT     
    MAX([ID]) ID, 
    [IDENTIFIER],
    FROM MYTABLE
    WHERE LEN([IDENTIFIER]) = 4
    GROUP BY [IDENTIFIER]) AS IDENT4
ON IDENT4.ID = IDENT9.ID 
```

这里的想法是在单独的列中包含 9 个字符的标识符和 4 个字符的标识符。IDENT4 和 IDENT9 视图的目的是删除重复项。

但是，如果您的目标是修复数据库完整性，那么您需要考虑将 9 个字符和 4 个字符的标识符分隔在两个单独的表中。根据您所说，我可以假设每个 ID 都有一个 9 字符标识符和至少一个（或更多）4 字符标识符。因此，您将创建一个以 IDENT9 查询为基础的包含 9 个字符 ID 的主表，以及一个“从属”4 个字符 ID 表。使用这些表，您将能够在数据库级别创建约束以执行重复检查

# javascript - 如何从 AngularJS 范围内的数组中删除一个项目？

> ID：14250642
> 
> 赞同：154
> 
> 时间：2013-01-10T04:04:10.453
> 
> 标签：javascript, html, angularjs

简单的待办事项列表，但在每个项目的列表页面上都有一个删除按钮：

[![在此处输入图像描述](../Images/97d08584df1e16c2c73b8419ca0fe631.png)](https://i.stack.imgur.com/s0Oxd.jpg)

相关模板HTML：

```
<tr ng-repeat="person in persons">
  <td>{{person.name}} - # {{person.id}}</td>
  <td>{{person.description}}</td>
  <td nowrap=nowrap>
    <a href="#!/edit"><i class="icon-edit"></i></a>
    <button ng-click="delete(person)"><i class="icon-minus-sign"></i></button>
  </td>
</tr> 
```

相关控制器方法：

```
$scope.delete = function (person) {
  API.DeletePerson({ id: person.id }, function (success) {
    // I need some code here to pull the person from my scope.
  });
}; 
```

我试过`$scope.persons.pull(person)`了`$scope.persons.remove(person)`。

尽管数据库已成功删除，但我无法从范围中提取此项目，并且我不想为客户端已经拥有的数据对服务器进行方法调用，我只想将这个人从范围中删除。

有任何想法吗？

* * *

## 回答 #1

> 赞同：311
> 
> 时间：2013-01-10T04:08:33.613

您必须找到数组`person`中的索引`persons`，然后使用数组的[`splice`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)方法：

```
$scope.persons.splice( $scope.persons.indexOf(person), 1 ); 
```

* * *

## 回答 #2

> 赞同：260
> 
> 时间：2013-01-10T04:11:21.660

您的问题不在于 Angular，而在于 Array 方法。从数组中删除特定项目的正确方法是使用[`Array.splice`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice). 此外，当使用 ng-repeat 时，您可以访问特殊`$index`属性，即您传入的数组的当前索引。

解决方案实际上非常简单：

**看法：**

```
<a ng-click="delete($index)">Delete</a> 
```

**控制器：**

```
$scope.delete = function ( idx ) {
  var person_to_delete = $scope.persons[idx];

  API.DeletePerson({ id: person_to_delete.id }, function (success) {
    $scope.persons.splice(idx, 1);
  });
}; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-07-02T09:32:00.993

我会使用包含有用函数列表的[Underscore.js库。](http://underscorejs.org/)

## [`without`](http://underscorejs.org/#without)

> ```
> without_.without(array, *values) 
> ```
> 
> 返回删除所有值实例的数组副本。
> 
> ```
> _.without([1, 2, 1, 0, 3, 1, 4], 0, 1);
> // => [2, 3, 4] 
> ```

### 例子

```
var res = "deleteMe";

$scope.nodes = [
  {
    name: "Node-1-1"
  },
  {
    name: "Node-1-2"
  },
  {
    name: "deleteMe"
  }
];

$scope.newNodes = _.without($scope.nodes, _.findWhere($scope.nodes, {
  name: res
})); 
```

请参阅[JSFiddle](http://jsfiddle.net/9Ymvt/2462/)中的演示。

* * *

## [`filter`](http://underscorejs.org/#filter)

> ```
> var evens = _.filter([1, 2, 3, 4, 5, 6], function(num){ return num % 2 == 0; });
> 
> // => [2, 4, 6] 
> ```

### 例子

```
$scope.newNodes = _.filter($scope.nodes, function(node) {
  return !(node.name == res);
}); 
```

[请参阅Fiddle](http://jsfiddle.net/9Ymvt/2463/)中的演示。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-09-11T18:07:47.197

```
$scope.removeItem = function() {
    $scope.items.splice($scope.toRemove, 1);
    $scope.toRemove = null;
}; 
```

这对我有用！

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-09-04T12:33:03.477

如果您有任何与列表关联的功能，当您制作拼接功能时，关联也会被删除。我的解决方案：

```
$scope.remove = function() {
    var oldList = $scope.items;
    $scope.items = [];

    angular.forEach(oldList, function(x) {
        if (! x.done) $scope.items.push( { [ DATA OF EACH ITEM USING oldList(x) ] });
    });
}; 
```

列表参数名为**items**。参数**x.done**指示该项目是否将被删除。

另一个参考：[另一个例子](https://stackoverflow.com/questions/18303040/how-to-remove-elements-nodes-from-angular-js-array/25665526#25665526)

希望能帮到你。问候。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-04-14T18:29:08.177

对于@Joseph Silber 的公认答案不起作用，因为 indexOf 返回-1。这可能是因为 Angular 添加了一个哈希键，这对于我的 $scope.items[0] 和我的项目是不同的。我试图用 angular.toJson() 函数解决这个问题，但它不起作用:(

啊，我找到了原因……我使用块方法通过查看我的 $scope.items 在我的表中创建两列。对不起！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-01-04T09:05:46.373

你也可以使用这个

```
$scope.persons = $filter('filter')($scope.persons , { id: ('!' + person.id) }); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-08-01T05:37:52.157

Angular 有一个名为 的内置函数`arrayRemove`，在您的情况下，该方法可以简单地是：

```
arrayRemove($scope.persons, person) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-05-20T22:44:55.520

```
array.splice(array.pop(item)); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-03-02T07:43:49.080

要从范围中删除元素，请使用：

```
// remove an item
    $scope.remove = function(index) {
        $scope.items.splice(index, 1);
    }; 
```

从[此处输入链接描述](https://noahbass.com/posts/angular-adding-removing-arrays)

# .net - Netduino 没有“Console.WriteLine”，当前上下文中不存在控制台

> ID：14250645
> 
> 赞同：11
> 
> 时间：2013-01-10T04:04:34.720
> 
> 标签：.net, .net-micro-framework, netduino

我似乎无法让我非常简单的 netduino 程序写入调试控制台；VS 抛出错误

> 当前上下文中不存在名称“控制台”

有什么想法可能导致它不存在吗？

```
using System;
using System.Text;
using System.Net;
using System.Net.Sockets;
using System.Threading;
using Microsoft.SPOT;
using Microsoft.SPOT.Hardware;
using SecretLabs.NETMF.Hardware;
using SecretLabs.NETMF.Hardware.NetduinoPlus;

namespace LumenReader
{
public class Program
{
    public static void Main()
    {

        AnalogInput photoResistor = new AnalogInput(Pins.GPIO_PIN_A0);
        int photoVolt;
        while (true)
        {
            photoVolt = photoResistor.Read();
            Console.WriteLine(photoVolt);
        }

    }

}
} 
```

# 编辑

`Debug.Print`确实有效

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-10T08:17:27.003

嵌入式设备上没有控制台。因此，正如您所发现的，您必须使用 Debug.Print。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-31T22:22:00.417

这是一个常见错误——控制台是您用于开发微框架应用程序的 PC 命令行，它在设备上运行，而不是 PC。

Debug.Print works because there is a debugger running that can and does communicate with the device. The output is generally directed to the Output window of your development PC. This is accomplished through the connection to the development board from the PC (Usually USB, or Serial Port.)

It is possible to write a separate Console application to accomplish this, but -- you would have to write the communications code, as well, which is not a good task for a beginner. (If you want to try, use the SerialPort object in .NET, but -- the one provided is just as good and already written.)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T08:41:23.513

它在 3.0、4.0 中可用。和 System.Ext 命名空间中的 4.1（MFDpwsExtensions.dll 程序集）

MSDN：

[http://msdn.microsoft.com/en-us/library/ee432029.aspx](http://msdn.microsoft.com/en-us/library/ee432029.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-26T09:16:53.907

as @kfuglsang said, I would use just `Debug.WriteLine()`

Don't forget to use `using System.Diagnostics;`

# php - 将照片发布到 facebook 粉丝页面 - php

> ID：14250648
> 
> 赞同：-1
> 
> 时间：2013-01-10T04:04:44.910
> 
> 标签：php, facebook-graph-api

> **可能重复：**
> [普通非管理员用户通过 iOS 应用程序将照片发布到 Facebook 粉丝页面](https://stackoverflow.com/questions/10912901/posting-photo-to-facebook-fan-page-via-ios-app-by-regular-non-admin-users)
> [Facebook PHP SDK 应用程序将照片上传到页面](https://stackoverflow.com/questions/11227369/facebook-php-sdk-app-to-upload-photo-to-page)

我正在使用以下代码将图片发布到我拥有 manage_pages 权限的粉丝页面，但是当我尝试发布照片时它会发布到我自己的时间线而不是我的粉丝页面，但是当我尝试发布时效果很好文本 ！

```
$fb = new Facebook(array(
            'appId'  => $appID,
            'secret' => $appSecret,
            'cookie' => true,
            'fileUpload' => true
        ));
        $comic_info = get_records('comics',1,0,'main_pic,title','id  DESC','sent=0');

        $photo = '../../uploads/pics/'.$comic_info[0]['main_pic']; // Path to the photo on the local filesystem

            $fb->setAccessToken('AAAFw2ez8BtQBANifSkVR9WvZBfVsuhHZCtiZCtOaJ9OaXeANHLBpc7hJuEWFuQSZBWZCvpiuFGWE7my396OFd3KbkrkyW8Pu8ndPx4tFBBAZDZD');
            $postResult = $fb->api('/150391721775239_35388/photos', 'POST', array(
                                     'source' => '@' . realpath($photo),
                                     'message' => $comic_info[0]['title']
                                     )
                                  ); 
```

150391721775239_35388是时间轴相册，我也试过用我的page id，但没有成功！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-10T04:16:29.640

我尝试了一种方法：- 1- 获取页面的访问令牌 2- 设置此访问令牌

您可以通过转到图形资源管理器并调用来找到您的访问令牌

```
/PAGE_ID?fields=access_token 
```

然后你只需在那里替换它，所以它会返回页面的访问令牌而不是你的时间线的访问令牌！

# python - Python Setuptools/setup.py 安装新贵配置

> ID：14250652
> 
> 赞同：2
> 
> 时间：2013-01-10T04:05:07.023
> 
> 标签：python, setuptools, egg, upstart

有没有一种优雅的方式让 setuptools 存放和安装 Upstart 配置，或者我应该从自定义的 pre-hook (cmdclass) 中完成它？

一般来说，Setuptools 可以用来在任意位置安装文件吗？

谢谢你。

达斯汀

# c++ - 为什么使用 G++ 生成随机数时会出现浮点错误？

> ID：14250656
> 
> 赞同：-2
> 
> 时间：2013-01-10T04:05:25.987
> 
> 标签：c++, g++

我正在使用 G++ 编译器。以下代码正在正确编译。

```
#include<iostream>
#include<cstdlib>
#include<stdio.h>

using namespace std;

int random(int max)
    {
    return rand() / (RAND_MAX / max + 1);
    }

int main()
  {
    for(int iteration=0; i<10; i++)
    {
    int myNum=random(130);
    myNum=myNum-(myNum%iteration); /* This line causes exception. */
    (myNum<0)?(myNum=myNum*-1):myNum;
    cout<<"\nRandom number is "<<myNum<<"\n";
    }
  } 
```

在运行时，它正在生成以下异常..

```
g++ 实现.cc
./a.out
浮点异常

```

你能帮我纠正这个错误吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-10T04:10:09.903

你`%`反对 0

```
for(int iteration=0; i<10; i++)
                  ^^^ 
```

# python - Python 3：测试命令行参数

> ID：14250658
> 
> 赞同：0
> 
> 时间：2013-01-10T04:05:33.567
> 
> 标签：python, python-3.x

我是 Python 的新手。我想编写一个在 Linux 上运行的脚本。要测试用户是否输入所有脚本参数：

*   如果用户类型：myscript =>`print "Usage: myscript [Dir] [Old] [New]"`
*   如果用户类型：myscript Dir =>`print "Please enter Old and New"`
*   如果用户类型：myscript Dir Old =>`print "Please enter New"`
*   如果用户键入所有必需的参数，则执行 main()。

如何编写 myscript？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T04:19:09.283

```
#! /usr/bin/python3.2

import sys

if __name__ == '__main__':
    if len (sys.argv) < 4:
        print ( ['Usage: myscript [Dir] [Old] [New]',
            'Please enter Old and New',
            'Please enter New'] [len (sys.argv) - 1] ) 
```

或者你可以使用 argparse。这不会满足您在问题中的要求，但希望能安抚 JF Sebastian。

```
#! /usr/bin/python3.2

import argparse

if __name__ == '__main__':
    p = argparse.ArgumentParser (description = 'What your program does.')
    p.add_argument ('dir', metavar = 'dir', type = str, help = 'The directory')
    p.add_argument ('old', metavar = 'old', type = str, help = 'The old value')
    p.add_argument ('new', metavar = 'new', type = str, help = 'The new value')
    args = p.parse_args () 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T04:14:26.367

只需检查 的值`len(sys.argv)`。请注意，第一个参数将是 python 文件名本身。

像这样：

```
import sys

argc = len(sys.argv)

if argc < 2:
    print "Usage: myscript [Dir] [Old] [New]"
    sys.exit();
elif argc < 3:
    print "Please enter Old and New"
    sys.exit();
elif argc < 4:
    print "Please enter New"
    sys.exit();

main() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T04:14:11.247

运行脚本时传递的所有参数都将放在`sys.argv`. 你必须`import sys`先。然后按照您的意愿进行论证。您可能会考虑计算您必须决定要做什么的参数。请注意，第一个参数始终是脚本的名称。

# gwt - GWT 中流畅的类 jQuery 动画

> ID：14250659
> 
> 赞同：17
> 
> 时间：2013-01-10T04:05:35.313
> 
> 标签：gwt, animation, jquery-animate

我正在玩 GWT 的动画课程作为练习。我的目标不是为 GWT 创建另一个小部件/动画库。另外，我很清楚有很多图书馆可以做到这一点。**我想做的是学习如何做到这一点，而不是如何使用某些库。**这仅用于教育目的......

话虽如此，我已经实现了一个简单的类，它在一些小部件上执行 4 种不同的动画：淡入、淡出、滑入和滑出（遵循 jQuery 的动画模型）。请参阅下面的代码了解我是如何实现它的。

**现场演示：** [http ://www.rodrigo-silveira.com/gwt-custom-animation/](http://www.rodrigo-silveira.com/gwt-custom-animation/)

**我的问题：一旦触发另一个动画，我怎样才能顺利[并成功地]停止动画，并在旧动画停止的地方继续当前动画？**

例如，如果在调用 slideOut() 时，slideIn() 已完成一半，我如何才能从小部件的 50% 的自然高度开始滑出？我尝试保留一个始终跟踪当前进度的成员变量，以便我可以在新动画中使用它，但似乎无法正确处理。有任何想法吗？

```
import com.google.gwt.animation.client.Animation;
import com.google.gwt.dom.client.Style.Unit;
import com.google.gwt.user.client.Element;

public class RokkoAnim extends Animation {

    private Element element;
    private int currentOp;
    private final static int FADE_OUT = 0;
    private final static int FADE_IN = 1;
    private final static int SLIDE_IN = 2;
    private final static int SLIDE_OUT = 3;

    public RokkoAnim(Element element) {
        this.element = element;
    }

    public void fadeOut(int durationMilli) {
        cancel();
        currentOp = RokkoAnim.FADE_OUT;
        run(durationMilli);
    }

    public void fadeIn(int durationMilli) {
        cancel();
        currentOp = RokkoAnim.FADE_IN;
        run(durationMilli);
    }

    public void slideIn(int durationMilli) {
        cancel();
        currentOp = RokkoAnim.SLIDE_IN;
        run(durationMilli);
    }

    public void slideOut(int durationMilli) {
        cancel();
        currentOp = RokkoAnim.SLIDE_OUT;
        run(durationMilli);
    }

    @Override
    protected void onUpdate(double progress) {
        switch (currentOp) {
        case RokkoAnim.FADE_IN:
            doFadeIn(progress);
            break;
        case RokkoAnim.FADE_OUT:
            doFadeOut(progress);
            break;
        case RokkoAnim.SLIDE_IN:
            doSlideIn(progress);
            break;
        case RokkoAnim.SLIDE_OUT:
            doSlideOut(progress);
            break;
        }
    }

    private void doFadeOut(double progress) {
        element.getStyle().setOpacity(1.0d - progress);
    }

    private void doFadeIn(double progress) {
        element.getStyle().setOpacity(progress);
    }

    private void doSlideIn(double progress) {
        double height = element.getScrollHeight();
        element.getStyle().setHeight(height * (1.0d - progress), Unit.PX);
    }

    private void doSlideOut(double progress) {
            // Hard coded value. How can I find out what
            // the element's max natural height is if it's 
            // currently set to height: 0 ?
        element.getStyle().setHeight(200 * progress, Unit.PX);
    }
} 
```

**用法**

```
// 1\. Get some widget
FlowPanel div = new FlowPanel();

// 2\. Instantiate the animation, passing the widget
RokkoAnim anim = new RokkoAnim(div.getElement());

// 3\. Perform the animation

// >> inside mouseover event of some widget:
anim.fadeIn(1500);

// >> inside mouseout event of some widget:
anim.fadeOut(1500); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-19T17:36:03.093

您需要根据当前值（相当于`+=`或`-=`赋值）更新不透明度：

```
private void doFadeOut(double progress) {
    double opacity = element.getStyle().getOpacity();
    element.getStyle().setOpacity(opacity - 1.0d - progress);
}

private void doFadeIn(double progress) {
    double opacity = element.getStyle().getOpacity();
    element.getStyle().setOpacity(opacity + progress);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:08:40.300

1.  添加一个实例方法 bool 取消到您的动画类
2.  仅在未取消的情况下运行动画。
3.  添加一个方法 cancelAnnimation 并在每次新动画开始时调用此方法。

    ```
    private bool canceled = false;

    public void cancelAnnimation() {
        canceled = true;
    }

    private void doFadeOut(double progress) {
        if(!canceled) {
           element.getStyle().setOpacity(1.0d - progress);
        }
    }

    ... etc. 
    ```

所以这就是你可以停止动画的方式。但是现在，您需要从当前点开始新的动画。所以最好是再次修改类。

1.  添加两个实例变量 currentProgress 和 offset (double)
2.  向构造函数添加双偏移
3.  取消动画时返回 currentProgress。
4.  以第一个动画的偏移量开始新动画。

    ```
    private bool canceled = false;
    private double currentProgress = 0;
    private double offset = 0;

    public RokkoAnim(Element element, double offset) {
        this.element = element;
        this.offset = offset;
    }

    public double cancelAnimation() {
        canceled = true;
        return currentProgress;
    }

    private void doFadeOut(double progress) {

        if(!canceled && ((progress + offset) <= 1)) {
           element.getStyle().setOpacity(1.0d - (progress+offset));
           currentProgress = progress+offset;
        }
    }

    ... etc.

    double offset = anim1.cancelAnimation();
    RokkoAnim anim2 = new RokkoAnim(div.getElement(), offset); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-13T07:04:11.150

为了滑入和滑出，我修改了您的课程以使用小部件屏幕坐标：

```
public class WidgetAnimation extends Animation {

    private Element element;
    private int currentOp;
    private int startX=-1;
    private int finalX=-1;
    private final static int FADE_OUT = 0;
    private final static int FADE_IN = 1;
    private final static int SLIDE_IN = 2;
    private final static int SLIDE_OUT = 3;

    public WidgetAnimation(Element element) {
        this.element = element;
    }

    public void fadeOut(int durationMilli) {
        cancel();
        currentOp = WidgetAnimation.FADE_OUT;
        run(durationMilli);
    }

    public void fadeIn(int durationMilli) {
        cancel();
        currentOp = WidgetAnimation.FADE_IN;
        run(durationMilli);
    }

    public void slideIn(int durationMilli) {
        cancel();
        currentOp = WidgetAnimation.SLIDE_IN;
        run(durationMilli);
    }

    public void slideOut(int durationMilli) {
        cancel();
        currentOp = WidgetAnimation.SLIDE_OUT;
        run(durationMilli);
    }

    @Override
    protected void onUpdate(double progress) {
        switch (currentOp) {
        case WidgetAnimation.FADE_IN:
            doFadeIn(progress);
            break;
        case WidgetAnimation.FADE_OUT:
            doFadeOut(progress);
            break;
        case WidgetAnimation.SLIDE_IN:
            doSlideIn(progress);
            break;
        case WidgetAnimation.SLIDE_OUT:
            doSlideOut(progress);
            break;
        }
    }

    private void doFadeOut(double progress) {
        element.getStyle().setOpacity(1.0d - progress);
    }

    private void doFadeIn(double progress) {
        element.getStyle().setOpacity(progress);
    }

    private void doSlideIn(double progress) {
        if(startX==-1){
            finalX = element.getAbsoluteLeft();
            startX = - Window.getClientWidth();
        }

        int positionX = (int) (startX + (progress * (this.finalX - startX)));

        this.element.getStyle().setLeft(positionX, Unit.PX);
    }

    private void doSlideOut(double progress) {
        if(startX==-1){
            startX = element.getAbsoluteLeft();
            finalX = - Window.getClientWidth();
        }

        int positionX = (int) (startX + (progress * (this.finalX - startX)));
        GWT.log("StartX:" + startX);
        GWT.log("finalX:" + finalX);
        GWT.log("positionX:" + positionX);
        GWT.log("progress:" + progress);

        this.element.getStyle().setLeft(positionX, Unit.PX);
    } 
```

}

我是水平滑出和滑入，但您可以修改代码。

我希望这会有所帮助。

# javascript - jQuery 滚动事件

> ID：14250661
> 
> 赞同：6
> 
> 时间：2013-01-10T04:05:51.407
> 
> 标签：javascript, jquery, fadein, fadeout

我正在尝试以下 jQuery 代码。
当我向上或向下滚动时，我想要`fadeOut`一个 div 并且当滚动停止`fadeIn`同一个 div 时。

我所拥有的是：

```
$(document).ready(function(){
   $(window).scroll(function(e){
     $('#search_tab').fadeOut('slow'); 
   }); 
}); 
```

我知道`fadeOut`当滚动开始时这将是 div，但诀窍是在我停止滚动后将其淡出。

现在，我已经看到了（但仍然不是我想要的）

```
 //Firefox
 $('#elem').bind('DOMMouseScroll', function(e){
     if(e.detail > 0) {
         //scroll down
         console.log('Down');
     }else {
         //scroll up
         console.log('Up');
     }

     //prevent page fom scrolling
     return false;
 }); 
```

上述功能根本不起作用，如下所示：

```
 $(window).bind('DOMMouseScroll', function(e){
     if(e.detail > 0) {
         //scroll down
         $('#search_tab').fadeOut('slow');
     }else {
         //scroll up
         $('#search_tab').fadeOut('slow');
     }

     //prevent page fom scrolling
     return false;
 }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T04:31:11.527

没有`scrollstop`监听事件，但您可以通过使用`setTimeout()`函数来模拟一个，然后在`timer`每次页面滚动时清除。这是一个示例[小提琴](http://jsfiddle.net/A6Vme/2/)。

```
var timer;     
$(window).scroll(function(e){
         clearTimeout(timer);
         $('#search_tab').fadeOut('slow');
         timer = setTimeout(checkStop,150);
 });

function checkStop(){
  $('#search_tab').fadeIn('slow');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T04:25:43.003

您可以检查每一帧：

```
// shim for frame listener
window.requestAnimFrame = (function(){
      return  window.requestAnimationFrame       || 
              window.webkitRequestAnimationFrame || 
              window.mozRequestAnimationFrame    || 
              window.oRequestAnimationFrame      || 
              window.msRequestAnimationFrame     || 
              function( callback ){
                window.setTimeout(callback, 1000 / 60);
              };
    })();

    // on every frame, call render()
    (function animloop(){
      requestAnimFrame(animloop);
      render();
    })();

var lastScroll = 0, isScrolling = false;
function render(){
  var thisScroll = $(window).scrollTop();
  if(lastScroll !== thisScroll){
     if(!isScrolling){
        // scrolling has started, fade out div
        $('#search_tab').stop().fadeOut('slow'); 
     }
     isScrolling = true;
   }else{
     if(isScrolling){
       // scrolling has stopped, fade in div
       $('#search_tab').stop().fadeIn('slow'); 
     }
     isScrolling = false;
  }
  lastScroll = thisScroll;
} 
```

# php - JQuery 表单提交随机工作

> ID：14250663
> 
> 赞同：1
> 
> 时间：2013-01-10T04:06:44.540
> 
> 标签：php, javascript, jquery, magento

我有以下一组 Javascript/jQuery sprint 来处理表单提交：

```
 $('#addtocart').click(function (e){

        // No Accessories: normal submit
        if ($('#accessories ul li').size()==0) {
            $('#quickbuyform').submit();
            return true;
        }
        strName = "<?php echo $_product->getName() ?>";

        // Pop with loading
        popAccessories();
        $('.pop_accessories_area_button').show();$('.pop_accessories_area_button').show();
        e.preventDefault();
    });

    $('#nothanks').click( function (){
        $('#quickbuyform').unbind('submit').submit();
    });

    $('.aceimg').click( function (){    
        $('#quickbuyform').unbind('submit').submit();
    }); 
```

要求：所以你可以看到什么时候`addtocart`被点击它检查是否有任何匹配的配件适用于这个特定的产品。如果没有，只需提交表格。如果有附件，则一个`div`部分将显示为弹出窗口。从该弹出窗口中，如果用户单击任何附件产品，则应提交`quickbuyform`.

问题：现在表单提交变得如此随机。有时它会提交表单，而其他时候则不会。

帮助：任何人都可以看到，我在这里做错了什么......？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:41:32.353

这似乎是问题所在：

在你的里面`<div class="aceimg>`你有一个`<a href="some-product-link.html">`

实际上，浏览器`<a>`在评估您的 JQuery 之前开始转到标记中的链接。

您可以做的是删除链接（因为它只是为了选择配件而不是查看它）。

如果您需要任何进一步的帮助，请告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T04:28:16.487

这里有几件事可能会出错，尤其是间歇性的：

*   如果 $_product->getName() 未设置或由于任何原因在 PHP 中引发错误，它将根据您的服务器配置将错误消息（包括 HTML 格式）放入 strName 的值中。这通常会破坏 js 并导致它停止工作。检查您的错误控制台以获取语法错误消息。

为什么你需要这样做两次：

> $('.pop_accessories_area_button').show();$('.pop_accessories_area_button').show();

和这个：

> > $('#quickbuyform').unbind('submit').submit();

而不是这个：

> $('#quickbuyform').submit();

这表明您可能一次在页面上拥有多个这些表单，并且您正在尝试解决它。您可能正在提交不可见的表格，而不是您打算提交的表格，等等。

这不是一个真正的解决方案，我将不得不看到更多您正在查看的内容，但我遇到了上述情况。

我刚刚检查过，您这里也有 404 错误：

[http://www.impressiveinvitations.com.au/skin/frontend/dreamday/imtheme/js/jquery.form.js](http://www.impressiveinvitations.com.au/skin/frontend/dreamday/imtheme/js/jquery.form.js)

这可能与它有关...

# java - 当我使用 CQL 时，Cassandra 报告：“无法完成请求：一个或多个节点不可用”：“select * from User”

> ID：14250664
> 
> 赞同：2
> 
> 时间：2013-01-10T04:06:43.683
> 
> 标签：java, python, cassandra, cql

Cassandra工作在3个节点的集群模式下。当所有节点都“UP”时，我在cqlsh中使用cql“select * from User”，Cassandra返回正确的结果。但是在一个节点死了之后，当我再次使用“select”时，没有结果返回但报告：“无法完成请求：一个或多个节点不可用”。我转而使用 cassandra-cli 命令：“get Users”，它返回了正确的数据，没有任何错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T13:09:21.960

我希望当您使用 CQL 时，您会收到一个一致性级别为“ALL”的请求。在这种情况下，它将等待所有服务器（托管该节点的副本）的回复，然后再返回。当一个节点关闭时，它会失败，因为它无法联系到关闭的节点。

当您通过 Cassandra-cli 执行此操作时，我希望一致性级别默认为“QUORUM”或“ONE”或“ANY”，因此即使一个副本已关闭，也会很高兴地返回您的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T17:26:35.033

1.  您用于键空间的复制因子是什么？
2.  “用户”列族有多少行数据？

我发现自己处于类似的情况（昨天），复制因子设置为 1，“用户”列族只有一行。

集群信息：AWS 上的 3 个节点 相同的数据中心名称

键空间名称：rf1 SimpleStrategy Replication factor 1 列族名称：users 使用 cqlsh 查询，默认一致性

场景一：

集群中的一两个节点宕机

我发现如果 3 个节点中的任何一个节点出现故障，查询“从用户中选择 *”将返回“无法完成请求：一个或多个节点不可用”。

场景二：

节点 1 已关闭。节点 2 已关闭。节点 3 已启动。

查询“select * from users where user_name='abhishek'”将返回该行。

我认为是这种情况，因为该行似乎在节点 3 上。

我对场景的理解：

当您进行查询“select * from users”时，您要求 Cassandra 返回列族中的所有行。它无法这样做，因为一个或多个节点已关闭，并且它无法为您提供整个列族，因为节点上可能有一些行已关闭。

但是带有 where 子句的查询将返回该行，因为它在节点 3 上可用并且节点 3 已启动。

那有意义吗？

这种解释的一个缺陷是，我希望 Cassandra 使用“select * from users”返回集群中所有可用的行

我现在要做更多的挖掘，如果我发现任何有用的东西会更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-16T08:04:28.660

如果您的 cassandra 集群在 aws 中，则更改“cassandra.yaml”中的配置只需将 endpoint_snitch 再次更改为 Ec2Snitch 可能的一件事是您的数据中心实际上是 ec2 实例的“区域”，它应该像“ us-east','us-west'。在你的情况下，它应该只是'eu-west'。

根据 datastax 所说，EC2Snitch¶

使用 EC2Snitch 在 Amazon EC2 上进行简单的集群部署，其中集群中的所有节点都在一个区域内。该区域被视为数据中心，可用区被视为数据中心内的机架。例如，如果一个节点在 us-east-1a 中，us-east 是数据中心名称，1a 是机架位置。由于使用了私有 IP，因此此告密者不适用于多个区域。

在定义您的 keyspace strategy_options 时，使用 EC2 区域名称（例如，us-east）作为您的数据中心名称。

链接 - [http://www.datastax.com/docs/1.0/cluster_architecture/replication](http://www.datastax.com/docs/1.0/cluster_architecture/replication) [http://www.datastax.com/documentation/cql/3.1/cql/cql_using/update_ks_rf_t.html](http://www.datastax.com/documentation/cql/3.1/cql/cql_using/update_ks_rf_t.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T11:07:19.913

您的键空间放置采用哪种策略？如果你使用 NetworkTopologyStrategy，你可以尝试如下：

```
 CREATE KEYSPACE gxsim with placement_strategy = 'org.apache.cassandra.locator.NetworkTopologyStrategy' and strategy_options = {'DC1' : 1 , DC2' : 1} AND durable_writes = true; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T18:34:53.353

cqlsh 和 cli 都默认为 CL.ONE。我怀疑区别实际上是您的 cqlsh 查询说“选择*所有*用户”，而 cli 中的“获取”是“仅选择一个用户”。

# azure - 与本地相比，Windows Azure DateTime 现在关闭 1 天

> ID：14250669
> 
> 赞同：2
> 
> 时间：2013-01-10T04:07:15.850
> 
> 标签：azure

所以在过去的 4 个小时里，我一直在试图解决这个问题。Windows Azure 上的 DateTime.Now 是 2013 年 1 月 10 日，而本地时间是 2013 年 1 月 9 日。我已经尝试了书中的所有内容以使其对齐调用 DateTime.Now.ToLocalTime()，执行 UTC，但我仍然无法解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:18:23.420

```
 private DateTime ConvertToCentral()
        {
            DateTime timeUtc = DateTime.UtcNow;
            TimeZoneInfo cstZone = TimeZoneInfo.FindSystemTimeZoneById("Central Standard Time");
                 DateTime cstTime = TimeZoneInfo.ConvertTimeFromUtc(timeUtc, cstZone);
            return cstTime;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T07:15:19.533

答案与 Gaurav 发布的相同 - Azure 服务器在 UTC（格林威治标准时间）上运行，而不是您的当地时间。例如，Arizona 是 UTC - 7 小时，因此我们将本地时间添加 7 小时以获得 UTC。Azure 门户和浏览器可能会根据您的本地时间调整一些时间，但是在代码中使用 DateTime.Now 时，您需要使用 DateTime.Now.UTC - 如果您想调整在 Azure 中运行的应用程序的用户显示，然后添加TimeZoneOffset 的 ServiceConfiguration 设置（即 -7）并显示 DateTime.Now.AddHours(TimeZoneOffset)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T00:48:41.197

Windows Azure 机器供您使用，因此如果您想要不同的时区，请直接进行设置。

最简单的方法是创建一个非常简单的启动任务并使用**tzutil**，即 Windows 时区实用程序。我们使用以下内容：

```
tzutil /s "GMT Standard Time" 
```

默认情况下，它仅安装在 Windows Server 2008 R2 或 Windows Server 2012 映像上。

完整的细节在这里：[http ://wely-lau.net/2011/06/26/setting-timezone-in-windows-azure-3/](http://wely-lau.net/2011/06/26/setting-timezone-in-windows-azure-3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T08:08:31.110

当前 Windows Azure VM 使用 UTC，即使它们不使用，您也不应该期望它们使用与您相同的时区。

在分布式应用程序中，如果您尽可能频繁地使用 UTC，并且在您不能使用 UTC 的情况下，您可以将 UTC 与本地时间一起使用或单独使用本地时间，但每次您使用本地时间时，您会省去很多麻烦你应该具体知道你所在的时区。

如果您忽略这些考虑，您也可以[在 2555 年找到自己（不是开玩笑——这是真的）](https://stackoverflow.com/q/13118178/57428)。

# .htaccess - .htaccess：此处不允许订购

> ID：14250674
> 
> 赞同：4
> 
> 时间：2013-01-10T04:07:59.103
> 
> 标签：.htaccess, apache2

我正在尝试将身份验证用于在 apache2 中访问我的文档根目录...这是我的配置文件

```
<VirtualHost *:80>

        ServerAdmin webmaster@localhost
        AccessFileName .htaccess
        DocumentRoot /home/user/workspace
        <Directory />
                Options FollowSymLinks
                AllowOverride None.htaccess
        </Directory>
        <Directory /home/vishu/workspace>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride AuthConfig
                Order allow,deny
                allow from all
        </Directory>
......
......

</VirtualHost> 
```

这是我在 /home/user/workspace 文件夹中的 .htaccess 文件：

```
<FilesMatch >
.....
</FilesMatch>

    AuthType Basic
    AuthName "MY ZONE"
    #AuthBasicProvider file
    AuthUserFile /home/vishu/workspace/passwordfile
    AuthGroupFile /dev/null
    Require valid-user
.....
... 
```

Apache 给出`.htaccess:order not allowed here`错误，我从浏览器收到 500 错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-16T09:09:57.157

看看你的`AllowOverride`指令。我也有这个问题，但以下配置对我有用：

```
<Directory /var/www/>
    Options Indexes FollowSymLinks
    AllowOverride AuthConfig Limit
    Require all granted
</Directory> 
```

`AllowOverride All`也可能会起作用，这取决于您要允许多少。

查看这两个链接以获取更多信息：

[https://drupal.org/node/10133](https://drupal.org/node/10133)

[http://httpd.apache.org/docs/2.2/howto/auth.html](http://httpd.apache.org/docs/2.2/howto/auth.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-09T08:04:16.627

我遇到了同样的问题，这是由于我的主机的限制不允许我添加任何带有“允许，拒绝”或其他内容的内容。所以基本上我必须注释掉所有不“允许”的东西才能让它工作。

如果这对您来说是个问题，可能需要切换主机。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T06:40:07.693

我不确定为什么你会得到“''order not allowed here''”，因为你`Order`的 htaccess 文件中没有指令，但我猜它可能是你的`/`目录中的东西，因为你有覆盖集到`None`.

`<Directory />`您可以尝试在容器中添加覆盖，例如：

```
AllowOverride Limit 
```

根据[Apache 文档](http://httpd.apache.org/docs/2.2/mod/mod_authz_host.html#order)

# ruby-on-rails - Rails file_field_tag 未上传文件

> ID：14250678
> 
> 赞同：11
> 
> 时间：2013-01-10T04:08:52.050
> 
> 标签：ruby-on-rails, ruby-on-rails-3, file-upload

我有一个表格：

```
<%= form_tag :controller => "foo", :action => "boo", :multipart => true do %>
    <%= file_field_tag "foo[bar]" %>
<% end %> 
```

当我提交它时，`param foo[bar]`给出`"foo[bar]"=>"filename.png"`而不是`ActionDispatch`对象。

有人知道这里可能是什么原因吗？

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-10T04:14:23.793

解决了。需要将 form_tag 行更改为：

```
<%= form_tag ({:controller => "foo", :action => "boo"}), :enctype =>"multipart/form-data" do %>
    <%= file_field_tag "foo[bar]" %>
<% end %> 
```

# sql-server - 支持 PDF 文件和 SQL Server 数据库

> ID：14250679
> 
> 赞同：0
> 
> 时间：2013-01-10T04:08:59.143
> 
> 标签：sql-server, windows, windows-server-2008, windows-server

我有自己的 Windows Server 一个现场托管的 Asp.Net 应用程序。该应用程序允许用户上传 CV PDF 文件，我在该服务器上也有数据库。即使在硬盘驱动器发生故障的情况下，我应该采取哪些步骤来确保所有数据始终存在？

我知道可以做 RAID5，但我只想备份硬盘上的某些文件夹。我听说过 SQL 服务器复制可以防止硬盘驱动器故障时数据丢失。

您在服务器上为此目的使用了哪些策略？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:16:37.590

仅当您将这些 PDF 存储在 SQL Server 中时，SQL Server 复制才会解决（而不是使用本地文件系统并存储它们的位置 (C:\somefolder\cf\001.pdf)。复制将需要另一个您不需要的框t 指定是否有。

乍一看，我会尝试类似[Amazon Glacier](http://aws.amazon.com/glacier/)的东西。它很便宜，而且它可以解决比单独复制更多的情况（哦，你的房子被烧毁了，两台服务器都烤了？）还有这篇让我想到 Glacier 的帖子，但在这种情况下它可能不会适用于[长期使用 Amazon Glacier 进行备份存储](http://www.brentozar.com/archive/2012/11/long-term-backup-storage-with-amazon-glacier/)。

# c# - 是否可以针对 iis express 在 Visual Studio 内的 app_code 中调试类文件或 razor 文件？

> ID：14250684
> 
> 赞同：1
> 
> 时间：2013-01-10T04:09:39.723
> 
> 标签：c#, asp.net, umbraco, iis-express, webmatrix-2

有一个有趣的情况。使用 umbraco 网站并在 Visual Studio 中对其进行调试。刚刚在项目结构中的 app_code 文件夹中添加了一个 .cs 文件。想要测试将类添加到 app_code 文件夹以获得灵活性，因此我不必创建类库项目并将代码编译为 .dll。我正在使用带有 IIS express 8 的 webmatrix 2 来预览我的网站（那些知道 umbraco 的人，你不是从 Visual Studio 内部运行的，只是将它用于编码和调试）。

我的问题是从 Visual Studio 中附加调试器后，我无法调试 app_code .cs 文件。我所有的其他文件都捕获了断点（例如：macroScript 文件夹）。只是想知道这是否可能，因为我知道 app_code 文件夹会在运行时由 aspnet 自动编译，所以我想知道这是否是问题所在？位于 app_code 文件夹中的 .cshtml 也会如此吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:10:29.247

其他值得尝试的方法是在 Visual Studio 中运行该站点，使用您的 IIS 设置作为自定义服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T12:49:58.157

它可能就像更改一些 web.config 设置一样简单。在尝试此操作之前，请务必备份您的 web.config。

将编译/调试设置为“true”。从编译器/编译器/编译器选项中删除“/优化+”。

参考：[http ://forums.asp.net/t/958358.aspx/1](http://forums.asp.net/t/958358.aspx/1)

# javascript - Javascript 的 String.slice() 输入值

> ID：14250685
> 
> 赞同：1
> 
> 时间：2013-01-10T04:09:55.667
> 
> 标签：javascript, string, slice

我也可以便携地使用它来切掉字符串的末尾吗？

`"01abc23".slice(2,-2)``"abc"`在 Safari 上制作。我没有发现记录的负输入值。但我更喜欢使用它们，因为这意味着我可以跳过将字符串声明为变量！

因为否则我需要

```
var x = "01abc23"; x.slice(2,x.length-2) 
```

# javascript - 如何控制画布对象的 z-index？

> ID：14250697
> 
> 赞同：5
> 
> 时间：2013-01-10T04:11:08.037
> 
> 标签：javascript, html, canvas

当我在画布上绘制一些对象时，有时新对象会放在旧对象之下。例如，我在画布上添加一些图像，然后画一条线。当我运行代码时，图像是最重要的。我在网上搜索解决方案。但是没有一个直接的解决方案。:( 在某些情况下，它被视为一个错误！在资源管理器中。如何控制 z-index？

**编辑：这是我的代码**

```
<img id="black_checkers_piece" src="egsdk/BlackCheckersPiece.png" style="display: none;">
<canvas id="c1" style="border:1px solid #998800"></canvas>
<script type="text/javascript">
var canvasID = document.getElementById('c1');
var ctx = canvasID.getContext('2d');
var img = new Image();
img.src = document.getElementById('black_checkers_piece').src;
img.onload = function(){
ctx.drawImage(img, 10, 10, 32, 32);
}
ctx.beginPath();
ctx.strokeStyle = 'red';
ctx.moveTo(0, 0);
ctx.lineTo(50, 50);
ctx.stroke();
</script> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T16:35:53.657

您很可能在绘制图像之前等待图像加载。

此外，您可能会尽快画线。

您需要等待所有图像加载，**然后**按您想要的顺序绘制所有内容（从最远的 z 顺序到最近）。在加载所有图像之前不要绘制**任何东西**，否则您的 z 顺序将不正确。

如果要在加载所有图像之前在屏幕上显示项目，则必须在每次图像加载时重绘*所有内容*，而不仅仅是绘制那张图像。

这是一个示例，我在其中绘制了 3 个对象：一个圆圈、一个图像和一个窗口。无论图像是否加载，我都会立即绘制它们，但是一旦加载图像，我就会再次绘制*它们*，以确保图像正确位于其他两个对象之间：

[http://jsfiddle.net/U5bXf/32/](http://jsfiddle.net/U5bXf/32/)

速记相关代码（以防 jsfiddle 出现故障）是：

```
var img = new Image()
img.onload = function() {
  draw()
};
img.src = "http://placekitten.com/100/140";

draw();

function draw() {
// object one

// Now we'll draw the image in between, if its loaded
ctx.drawImage(img, 100, 30);

// object two
} 
```

* * *

# 此行下方的代码是对评论的回应

您已经发布了代码，但您会注意到您在函数中绘制的唯一内容`onload`是图像。

onload 函数通常发生*在*其他绘图命令之后（除非页面已经加载，否则它可能是）。您需要将所有绘图代码移动到 onload 函数中，或者创建自己的绘图函数来加载所有内容。例如：

```
<img id="black_checkers_piece" src="egsdk/BlackCheckersPiece.png" style="display: none;">
<canvas id="c1" style="border:1px solid #998800"></canvas>
<script type="text/javascript">
var canvasID = document.getElementById('c1');
var ctx = canvasID.getContext('2d');
var img = new Image();
img.src = document.getElementById('black_checkers_piece').src;
img.onload = function(){
  // assuming we want the image drawn before the line:
  ctx.drawImage(img, 10, 10, 32, 32);

  ctx.beginPath();
  ctx.strokeStyle = 'red';
  ctx.moveTo(0, 0);
  ctx.lineTo(50, 50);
  ctx.stroke();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T07:02:45.837

Canvas 没有任何“z-index”的概念。画布中没有对象 - 画布只是位图，只是像素。

您确定您是在画布上绘制线条和图像，而不仅仅是创建新元素（如 img 元素？）。

如果是，请检查调用诸如填充（）和描边（）之类的绘图方法的顺序。直到你这样做（无论你在哪里有你的 moveTo 和 lineTo 调用），形状才真正被绘制出来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-21T16:29:08.130

我一直在使用 fabric.js，它有一些你可能会觉得有用的特性。虽然本身不​​是 z-index，但它可以设置背景或覆盖 - 下面是[http://fabricjs.com/customization/上的示例](http://fabricjs.com/customization/)

var canvas = new fabric.Canvas('c13'); canvas.add(new fabric.Circle({ radius: 30, fill: '#f55', top: 100, left: 100 })); canvas.setOverlayImage('../assets/jail_cell_bars.png', canvas.renderAll.bind(canvas)); this.__canvases.push(canvas);

# java - Rendering UTF-8 as text to a modalbox with jQuery .Post

> ID：14250699
> 
> 赞同：0
> 
> 时间：2013-01-10T04:11:13.487
> 
> 标签：java, spring, grails, utf-8

I'm using the grails framework have have the following action:

```
def showText () {
    def myInstace = User.get(params.id)
    def myText = myService.getText(myInstance.id)
    render (text: myText, encoding: "UTF-8", contentType: "text/plain")
} 
```

The above works fine since when I try to see the data returned by this method uding cUrl I get something that is acceptable:

**From cUrl**

```
The (<b>quick</b>) [brown] {fox} jumps!
Over the $43,456.78 <lazy> #90 dog
& duck/goose, as 12.5% of E-mail
from aspammer@website.com is spam.
Der ,,schnelle” braune Fuchs springt
iiber den faulen Hund. Le renard brun
<<rapide» saute par-dessus le chien
v ‘$5’ paresseux. La volpe marrone rapida
“TATVPKOY ‘~35 salta sopra_1l cane pigro. El zorro

“ marron répido salta sobre el perro
perezoso. A raposa marrom rzipida
salta sobre o e50 preguicoso. 
```

**However, when this loads up on the modalbox is looks like this:**

```
 The (quick) [brown] {fox} jumps! Over the $43,456.78 #90 dog & duck/goose, 
  as 12.5% of E-mail from aspammer@website.com is spam. Der ,,schnelle” 
  braune Fuchs springt iiber den faulen Hund. Le renard brun < 
```

My jQuery code is simple enough:

```
$('a[id^="myText"]').click (function () {
   $.post($(this).data('url'), function (data){
      $("#msg").html(data);
   });
   $('#showText').modal()
}); 
```

So, I can't seem to understand what am I doing wrong? The above content is loaded into a div which gets displayed as a modal box. Additionally, my `config.groovy` has the UTF-8 settings:

```
grails.views.gsp.encoding = "UTF-8"
grails.converters.encoding = "UTF-8" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T05:29:38.607

You text is automatically transferred to html format, which regards `<b>, <lazy>, <rapide>` as html tags, and when `<<rapide` is rendered, there is a format error.

The solution is modify the render method in your controller with StringEscapeUtils.unescapeHtml method, as:

```
render (text: StringEscapeUtils.unescapeHtml(myText), encoding: "UTF-8", contentType: "text/plain") 
```

# ios - 从 UIimageview 创建具有旋转和缩放的 CGpath 以用作 cglayer 蒙版

> ID：14250711
> 
> 赞同：1
> 
> 时间：2013-01-10T04:12:26.240
> 
> 标签：ios, ios6, uiimageview, calayer, cgpath

我对 iOS 还是很陌生，虽然我不知道为什么这不起作用。

我有 2 个单独的 UIImageView

1.  的背景'。这是一张将应用图层蒙版的图片，因此您只能看到图像的一部分。
2.  “蒙版图像”是它自己的独立图像，可以旋转、平移、捏缩放。旋转/缩放的代码工作正常，是标准代码。

我要做的是创建一个与“蒙版图像”的当前位置/旋转/比例相匹配的 CGPath

这是我的代码，用于获取“蒙版图像”的位置并创建一个 CGPAth 以用作图层蒙版。

如果你去 Xcode 并创建一个新的“单视图应用程序”项目，这里是 ViewController 的完整复制粘贴

视图控制器.h：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UIGestureRecognizerDelegate>
{
    UIImageView *makskedImageView;
    UIImageView *maskImageView;
}

@end 
```

视图控制器.m

```
#import "ViewController.h"
#import <QuartzCore/QuartzCore.h>

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    UIImage *sourceImage = [UIImage imageNamed:@"forest.jpg"];
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, (sourceImage.size.width/2), (sourceImage.size.height/2))];
    imageView.image = sourceImage;

    [self.view addSubview:imageView];

    makskedImageView = imageView;

    //    Movable Mask
    UIImage *frameBorder = [UIImage imageNamed:@"semiTransSquare.png"];
    maskImageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, (frameBorder.size.width/2), (frameBorder.size.height/2))];
    maskImageView.image = frameBorder;

    UIPanGestureRecognizer *panGesture2 = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)];
    [panGesture2 setDelegate:self];
    [maskImageView addGestureRecognizer:panGesture2];
    UIPinchGestureRecognizer *pinchGesture2 = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(handlePinch:)];
    [pinchGesture2 setDelegate:self];
    [maskImageView addGestureRecognizer:pinchGesture2];
    UIRotationGestureRecognizer *rotateGesture2 = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(handleRotate:)];
    [rotateGesture2 setDelegate:self];
    [maskImageView addGestureRecognizer:rotateGesture2];

    UITapGestureRecognizer *tapGR =[[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(handleTap:)];
    [tapGR setDelegate:self];
    [tapGR setNumberOfTapsRequired:1];
    [maskImageView addGestureRecognizer:tapGR];

    [maskImageView setUserInteractionEnabled:YES];
    // Add to view to make visible;
    [self.view addSubview:maskImageView];

    // apply layer mask to makskedImageView
    [self grabTransform:maskImageView];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)grabTransform:(UIView *)currentView
{
    // build the transform you want
    CGAffineTransform t = CGAffineTransformIdentity;
    CGFloat angle = [(NSNumber *)[currentView valueForKeyPath:@"layer.transform.rotation.z"] floatValue];
    CGFloat scale = [(NSNumber *)[currentView valueForKeyPath:@"layer.transform.scale"] floatValue];
    t = CGAffineTransformConcat(t, CGAffineTransformMakeScale(scale, scale));
    t = CGAffineTransformConcat(t, CGAffineTransformMakeRotation(angle));
    NSLog(@"angle: %f, scale: %f", angle, scale);

    // Create a mask layer
    // Create a mask layer and the frame to determine what will be visible in the view.
    CAShapeLayer *maskLayer = [[CAShapeLayer alloc] init];
    // CGRect maskRect = currentView.bounds;
    // Frame works a lot better.
    CGRect maskRect = currentView.frame;

    maskRect.origin.x = currentView.frame.origin.x;
    maskRect.origin.y = currentView.frame.origin.y;

    // Make a Path friendly transform.

    CGPoint center = CGPointMake(CGRectGetMidX(currentView.frame), CGRectGetMidY(currentView.frame));
    CGAffineTransform transform = CGAffineTransformIdentity;

    transform = CGAffineTransformTranslate(transform, center.x, center.y);
    transform = CGAffineTransformScale(transform, scale, scale);
    transform = CGAffineTransformRotate(transform, angle);
    transform = CGAffineTransformTranslate(transform, -center.x, -center.y);

    // Create a path and from the rectangle in it.
    CGPathRef path = CGPathCreateWithRect(maskRect, &transform);
    // Set the path to the mask layer.
    [maskLayer setPath:path];
    // Release the path since it's not covered by ARC.
    CGPathRelease(path);
    // Set the mask of the view.
    makskedImageView.layer.mask = maskLayer;

}

#pragma mark - Gestures

-(void)handlePan:(UIPanGestureRecognizer *)recognizer
{
    CGPoint translation = [recognizer translationInView:self.view];
    recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x,
                                         recognizer.view.center.y + translation.y);
    [recognizer setTranslation:CGPointMake(0, 0) inView:self.view];
    [self grabTransform:[recognizer view]];
}

-(void)handlePinch:(UIPinchGestureRecognizer *)recognizer
{
    recognizer.view.transform = CGAffineTransformScale(recognizer.view.transform, recognizer.scale, recognizer.scale);

    recognizer.scale = 1;
    [self grabTransform:[recognizer view]];
}

-(void)handleRotate:(UIRotationGestureRecognizer *)recognizer
{
    recognizer.view.transform = CGAffineTransformRotate(recognizer.view.transform, recognizer.rotation);
    recognizer.rotation = 0;
valueForKeyPath:@"layer.transform.rotation"] floatValue];
    [self grabTransform:[recognizer view]];
}

-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return YES;
}

- (void)handleTap:(UIGestureRecognizer *)recognizer
{
    [self grabTransform:[recognizer view]];

}

@end 
```

加 2 张图片：[Forest.jpg](http://i.stack.imgur.com/H5b1P.jpg)和[semiTransSquare.png](http://i.stack.imgur.com/Vgcus.png)

现在，当它运行时，它适用于平移，直到我缩放。旋转图像。（由于其他一些代码，现在轮换工作）。

据我所知，比例与中心一起作为它增长/收缩的点，路径似乎从根 x,y 坐标向外扩展。

这可能是设计使然（[根据文档 CGPathCreateWithRect](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGPath/Reference/reference.html#//apple_ref/c/func/CGPathCreateWithRect)），但我看不到将转换应用于 CGPath 并让它与 UIImageView 'Mask Image' 出现在同一位置的方法

性能是一个大问题，使用 CIImage 的类似解决方案非常滞后，因此希望在 CGPath 创建图层蒙版的情况下解决这个问题，如果可能的话，或者同样快的东西。

我错过了什么？对仅限 iOS 6 的解决方案感到满意。

**更新：**我发现从边界更改为框架让我达到了 90% 的目标：

```
CGRect maskRect = currentView.frame; 
```

路径现在将匹配视图的旋转和位置。剩下的唯一问题是规模是错误的。它与原始大小匹配，但如果你缩小它就会变得太小，或者如果你增长它就会变得太大。看起来比例不是1：1。现在这么近。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:05:10.263

你看过函数吗

> `CGPathCreateCopyByTransformingPath`?

它需要一个`CGRect`仿射变换，它应该可以实现你所追求的。

仅供参考，它是 iOS 5 +

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:23:17.027

我不确定我是否完全理解您对问题的描述，所以一个虚拟应用程序真的很有帮助。但这是我现在所看到的分析：

你说你有两个 UIImageView，Background 和 MaskImage。从这个，从你的代码，我明白你想要做的是：

1.  在应用了各种变换之后，从（可能）一个超级视图或某个高于超级视图的角度来看，得到一个表示 MaskImage 实际形状的 CGPath。
2.  使用该 CGPath 定义一个 CAShapeLayer，您将使用它作为其他视图的支持层上的掩码，大概是背景 UIImageView

在这种情况下，文本中的 MaskImage 对应于您的代码`currentView`（因为那是您获得转换的地方），而文本中的 Background 对应于您的代码`currentImageView`（因为那是您要更改图层蒙版的地方）。正确的？

如果所有这些都是正确的，那么您的代码存在两个关键问题：

1.  你想得到一个 CGPath 代表 currentView 的*变换形状*。但你在抢`currentView.frame`。这是错误的。`currentView.frame`将表示最小的矩形，在 的坐标中`currentView.superview`，它可以包含当前视图的变换形状。因此，例如，如果 currentView 是一个旋转了 45 度的正方形，那么 currentView.frame 仍然是一个正方形，只是一个更大的正方形。相反，您应该做的是获取`currentView.bounds`，它是表示 currentView 在其自己的坐标系中的形状的矩形，从中生成路径，然后应用于`currentView.transform`该路径。

2.  您没有在代码或文本中的任何地方指定如何从坐标系映射`currentView.superview`到 MaskImage 的坐标系。您还需要在将形状应用到 MaskImage.layer.mask 之前执行此操作。

例如，我可以想象一个应用程序，屏幕被分成左右两个相等的边，它在屏幕的左侧呈现了一个大的照片图像，在屏幕的右侧它允许你平移、旋转，并缩放黑色矩形的图像。然后，该应用程序将使用右侧的黑色矩形来定义一个 CAShapeLayer，该 CAShapeLayer 用作左侧图像上的蒙版。这听起来像你想要的。所以我要说的是，你需要的逻辑步骤是：

1.  获取黑色矩形*边界*的 CGPath，这将是一个未转换的矩形。
2.  使用应用于黑色矩形的相同变换来变换此 CGPath。
3.  在仅包含屏幕右侧的矩形的坐标系中表示此 CGPath。由于左右两边是全等的，所以现在也在坐标系中，可以直接应用到屏幕的左边。
4.  使用 CGPath 定义一个 CALayer，将此 CALayer 应用于代表屏幕左侧的视图，并在该视图的图层上调用 setNeedsDisplay。

PS 顺便说一下，还有第三个问题。请注意，从技术上讲，当您向图层添加 .mask 时，该图层不应具有超级图层。所以你不应该在视图层次结构中添加一个 .mask 到 UIView 的支持层，因为它将有一个超级层。所以，我相信，你应该做的是暂时从视图层次结构中删除 UIView，添加遮罩层，然后将视图重新添加到视图层次结构中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-26T06:58:45.073

您可以使用以下方法获得有效的比例因子：

```
CGFloat zoomScale = sqrtf( powf(currentView.transform.a, 2) + powf(currentView.transform.c, 2) ); 
```

不等于：

```
CGFloat scale = [(NSNumber *)[currentView valueForKeyPath:@"layer.transform.scale"] floatValue]; 
```

# ormlite-servicestack - servicestack ormlite sqlite DateTime 在插入时获取时区调整

> ID：14250715
> 
> 赞同：3
> 
> 时间：2013-01-10T04:13:19.520
> 
> 标签：ormlite-servicestack

我正在尝试 ormlite。我发现当我插入一个具有 DateTime 属性的对象时，它会被 ormlite 应用到 -8:00（我的时区是 +8）。它应该按字面意思插入时间。就我而言，它已经是UTC。

但是从 ormlite 中读取值，+8 并没有被重新应用。

这是一个已知的错误？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T20:59:27.617

所以你的问题看起来与这个拉取请求有关： [https ://github.com/kojoru/ServiceStack.OrmLite/commit/d3f63ccd40f945b8dc03fd627ad49a895d4277de](https://github.com/kojoru/ServiceStack.OrmLite/commit/d3f63ccd40f945b8dc03fd627ad49a895d4277de)

如果您检查代码`SqlServerOrmLiteDialectProvider.cs`，看起来设置`SqlServerOrmLiteDialectProvider.EnsureUtc(true)`可以解决您的问题。

```
var dialect = new SqlServerOrmLiteDialectProvider();
dialect.EnsureUtc(true);
var factory = new OrmLiteConnectionFactory(cnnStr, dialect);
var connection = factory.Open(); 
```

检查`EnsureUtcTest.cs`一个例子。老问题，我知道，但我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:37:54.260

我认为它是以 UTC 类型插入的。从数据库中读取 DateTime 后尝试应用`.ToLocalTime()`

# jquery - jQuery validate - onclick 功能问题

> ID：14250716
> 
> 赞同：0
> 
> 时间：2013-01-10T04:13:21.433
> 
> 标签：jquery, forms, jquery-validate

我有一个 PayPal 表单，我想在用户单击它时将“提交”按钮图像更改为不同的图像（前提是表单有效）。

我遇到的问题是，当我将 .validate() 和 click 函数添加到脚本时，它会破坏一切。不再验证任何内容 + 提交按钮不会更改。

有人可以告诉我我做错了什么吗？

这是我的代码：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js"></script>

<form action="https://www.paypal.com/cgi-bin/webscr" id="paypal_form" method="post">
<table align="center">
<tr><td><b>Registration Code</b>:</td><td><input type="text" size="25" name="os0" id="os0" value=""></td></tr>
<tr><td><b>E-Mail Address</b>:</td><td><input type="text" size="25" name="os1" id="os1" value=""></td></tr>
<tr><td><b>Confirm E-Mail</b>:</td><td><input type="text" size="25" name="os2" id="os2" value=""></td></tr>
<div id="error_messages"></div>
<input name="submit" id="submit" class="submit" type="image" src="/images/paypal.gif">
</td></tr></table></form>

<script>
jQuery(document).ready(function($) {

$('#paypal_form').validate();

$('#submit').click(function()
{
    if ($("#paypal_form").valid() === true)
    {
        document.getElementById('submit').src = "http://www.example.com/images/loading.gif";
    }
});

$.validator.addMethod("RegCodeRegex", function(value, element) {
    return this.optional(element) || /^[bB][A-Za-z]{6}[-][A-Za-z][0-9]+$/i.test(value);
}, "Invalid registration code!");

$('#paypal_form').validate({

rules: {

    os0: {
        required: true,
        RegCodeRegex: true
    },

    os1: {
        required: true
    },

    os2: {
        required: true,
        equalTo: "#os1"
    }
},

messages: {

    os0: {
        RegCodeRegex: "Invalid Registration Code!"
    },

    os1: {
        required: "Please enter in your email address<br>"
    },

    os2: {
        required: "Please confirm your email address",
        equalTo: "Email addresses do not match!"
    }
},

errorContainer: "#error_messages",
errorLabelContainer: "#error_messages"
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T04:21:52.263

你打`$('#paypal_form').validate`了两次电话，一次没有争论，一次有争论。删除第一个应该使它工作。

# haskell - haskell 解析 n+k 模式的模式错误

> ID：14250717
> 
> 赞同：17
> 
> 时间：2013-01-10T04:13:25.767
> 
> 标签：haskell, pattern-matching, ghci

我已经开始通过 Erik Meijer 的[13 部分讲座](http://lambda-the-ultimate.org/node/3642)（和 Graham Hutton 的[幻灯片](http://www.cs.nott.ac.uk/~gmh/book.html#slides)）来学习 Haskell。

在第 13 页第 4 章的幻灯片中，它介绍了 n+k 模式的模式匹配语法。特别是，它说：

> 与数学一样，整数函数可以使用 n+k 模式定义，其中 n 是整数变量，k>0 是整数常量。

```
pred :: Int -> Int
pred (n+1) = n 
```

当我在 REPL 中自己尝试此操作时，我收到一条错误消息：

```
*Main> let mypred (n+1) = n

<interactive>:65:13: Parse error in pattern: n + 1 
```

同样，如果我在`*.hs`文件中尝试

```
mypred :: Int -> Int
mypred (n+1) = n 
```

编译器给出了类似的抱怨：

```
/Users/pohl/Code/praxis-haskell/helloworld.hs:14:9:
    Parse error in pattern: n + 1 
```

我不了解如何使用 n+k 模式吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-10T04:18:34.997

您必须通过 启用它`-XNPlusKPatterns`。

```
ghci -XNPlusKPatterns
Prelude> let mypred (n+1) = n
Prelude> mypred 2
1 
```

同样在一个`hs`文件中。

```
{-# LANGUAGE NPlusKPatterns #-}

mypred :: Int -> Int
mypred (n+1) = n 
```

After loading in ghci

```
*Main> mypred 2
1 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-10T04:46:43.610

> Am I not understanding how n+k patterns are intended to be used?

Actually, nowadays `n+k` patterns are considered bad practice. The main reason for this is that the syntax doesn't really look like anything else in Haskell, the `+` part isn't really using the `+` that is in scope, unlike say how the `do` notation works. Also, the [viewpatterns](http://hackage.haskell.org/trac/ghc/wiki/ViewPatterns) extension is kind of a generalization that is useful in *many* more settings.

There is more info [here](http://hackage.haskell.org/trac/haskell-prime/wiki/RemoveNPlusK) on why it was removed.

# ruby-on-rails - api调用列表的考拉批量请求实现

> ID：14250720
> 
> 赞同：-2
> 
> 时间：2013-01-10T04:13:49.253
> 
> 标签：ruby-on-rails, ruby-on-rails-3, facebook-graph-api, koala, koala-gem

我想找到所有带有评论的提要以及对帖子发表评论的用户的个人资料图片。我发现它可以通过批处理请求来完成。现在我这样做会触发大量 API 请求。

```
@facebook = FacebookToken.find_by_id(token.id)
@graph = Koala::Facebook::API.new(@facebook.access_token)
@results = @graph.get_connections("me", self.content)
@results.each do |post|
     post['comments']['data'].each do |comment|
         commnentor_image = @graph.get_picture(comment["from"]["id"])
     end
end 
```

我怎样才能将这些放入一个批处理请求中，以便它会给我所有带有评论者图像的帖子。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:58:00.520

批处理请求肯定会加快您的查询速度，但我也会考虑查看 FQL - FB 文档指出 FQL 多查询甚至比批处理查询更快！更好的是，您可以批量处理您的 FQL 多查询......

你可以试试这个批次（有关更多信息，请参阅**[Koala Wiki](https://github.com/arsduo/koala/wiki/Batch-requests)**）：

```
@graph.batch do |batch|
   r = batch.get_connections("me", self.content)
   r.each do |post|
      post['comments']['data'].each do |comment|
         commnentor_image = @graph.get_picture(comment["from"]["id"])
     end
   end 
```

查看[**FQL 文档**](https://developers.facebook.com/docs/reference/fql/stream)以获取更多信息...

为了让你开始：

```
@graph.fql_multiquery(SELECT .....your FQL Query) 
```

# local - 如何在本地两个 pjsip 应用程序之间进行调用？

> ID：14250721
> 
> 赞同：1
> 
> 时间：2013-01-10T04:13:58.347
> 
> 标签：local, sip, pjsip

我是 SIP 新手，我使用[pjsip](http://www.pjsip.org/)作为我的堆栈。

我已经`pjsua`在 Windows 上成功构建了。`pjsua`在 SIP 服务器的帮助下，我可以呼叫另一个实例。

有没有办法在本地或 LAN 中运行 2 个 pjsua 实例，并且**没有**任何 SIP 服务器（注册、代理、...）并允许在它们之间进行呼叫？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-07T10:31:25.297

猜猜你可能已经得到了答案，可能会对遇到此页面的任何人有所帮助。

对的，这是可能的。在 2 个不同的端口上启动 2 个 pjsua 实例。尝试*“--local-port”*选项。通过隐式指定端口*"sip:178237@192.168.10.10:5090"*从第 1 次调用到第 2 次。每个实例都将充当 incall 的 uas 和 outcall 的 uac

# php - php scandir、readdir 等不显示文件列表并返回 false 甚至一直在使用 chmod -R 0777

> ID：14250729
> 
> 赞同：1
> 
> 时间：2013-01-10T04:14:31.653
> 
> 标签：php

如果这个问题已经回答或另一个愚蠢的问题，首先抱歉，如果已经回答，请告诉我在哪里可以找到答案。

今天，我使用 scandir 从另一个站点获取列表目录，该站点位于同一台机器，但即使我运行 chmod -R 0777 也无法获取列表。

```
# all bellow code run from site2.com
$location = "/var/www/vhosts/site1.com/site1.com/httpdocs/webdata/";

# this return FALSE
$files = scandir($location);  # return FALSE
$res = opendir($location);
$files = readdir($res);  # return FALSE
closedir($res);

# i try this after chmod -R 0777 /var/www/vhosts/site1.com/site1.com/httpdocs/webdata/
# from terminal with admin account, but still ... FALSE :-(
print(is_readable($location) ? 'TRUE' : 'FALSE');  # print FALSE 
```

我通过使用 exec 函数解决了这个问题，但似乎不推荐（尤其是在 cpanel 上）。问题是为什么在 chmod 之后我仍然无法让 is_readable 函数返回 true ？从搜索 google 和 php 它自己并没有解释为什么会发生这种情况，我已经找到了获取文件列表的方法，但我仍然想知道它为什么会发生（在运行 chmod -R 0777 之后）。

注意：我是那台机器的管理员，那台机器上的所有网站都属于我，所以我不会尝试破解任何客户端网站并使用 ehcp 托管控制面板。

谢谢你。

我喜欢它，这会导致 'open_basedir' 在 php 设置或 apache 设置上受到限制。

很抱歉。

# user-interface - 我正在寻找实际有效的 Kendo-UI Grid 的工作副本（就像在道场中一样）

> ID：14250730
> 
> 赞同：-1
> 
> 时间：2013-01-10T04:14:33.130
> 
> 标签：user-interface, grid, kendo-ui

我已经从 Kendo UI 运行了道场，但我似乎无法让它在本地工作。这是我的示例（源自 DOJO）：

```
<!DOCTYPE html>
<html>
<head>
    <script src="js/kendo.all.min.js" type="text/javascript"></script>
    <script src="js/kendo.core.min.js" type="text/javascript"></script>
    <script src="js/kendo.data.min.js" type="text/javascript"></script>
    <script src="js/jquery.min.js" type="text/javascript"></script>
    <link href="styles/kendo.common.min.css" rel="stylesheet" type="text/css"/>
    <link href="styles/kendo.default.min.css" rel="stylesheet" type="text/css"/>
    <script src="js/jquery.min.js" type="text/javascript"></script>
    <script src="js/kendo.web.min.js" type="text/javascript"></script>
    <script src="js/kendo.grid.min.js" type="text/javascript"></script>

    <script>
        var movies = [
            { Title: "Star Wars: A New Hope", Year: 1977 },
            { Title: "Star Wars: The Empire Strikes Back", Year: 1980 },
            { Title: "Star Wars: Return of the Jedi", Year: 1983 }
        ];

        $("#grid").kendoGrid({
            dataSource: new kendo.data.DataSource({
                data: movies
            })
        });
    </script>
</head>
<body>
<div id="grid"></div>

</body>
</html> 
```

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T06:52:17.200

您已经包含了几乎每一个剑道 JavaScript 文件。您只需要包含 kendo.all.min.js - 它包含所有其他文件。可以在[JavaScript 依赖](http://docs.kendoui.com/getting-started/javascript-dependencies)项帮助主题中找到更多信息。

还有一个问题。您的代码会立即执行，并且网格的 DIV 还不是 DOM 的一部分。$("#grid") 不会返回任何内容。

这是您的代码的固定版本：http: [//jsbin.com/esalih/1/edit](http://jsbin.com/esalih/1/edit)

# asp.net - 如何管理 ASP.NET 网站项目中的多个 web.config 文件？

> ID：14250733
> 
> 赞同：3
> 
> 时间：2013-01-10T04:14:49.110
> 
> 标签：asp.net, visual-studio-2010, web-config, web-site-project

我花了最后几个小时寻找解决日益严重的问题的最佳方法：

*   我们有越来越多的网站（在 VS 2010 中），因此需要管理的 web.config 文件也越来越多。dev 和 prod 环境之间有很多差异（连接字符串、跟踪/电子邮件配置等）。
*   此外，根据某人正在工作的团队（例如：网页设计团队），他无法访问某些密码和加密密钥（位于 web.config 文件中）。

目前我们有：

*   包含 prod 值（连接字符串、密码）的**web.config文件。**
*   包含 dev 值的**web.config.dev文件。**
*   一个**web.config.restricted**文件，其中包含允许 Web 设计人员完成工作所需的最低值。

所以：

*   每次开发人员想要在 web.config 文件中添加新行时，他还需要将该行插入到 web.config.dev 文件（最终是 web.config.restricted 文件）中。
*   入住后：
    *   **开发**团队的所有成员都必须从 web.config.dev 文件中复制所有内容并覆盖他们的 web.config 文件。
    *   **网页设计**团队的所有成员都必须从 web.config.restricted 文件中复制所有内容并覆盖他们的 web.config 文件。
*   这些手动操作会引发很多错误（人们忘记反映所有文件中的更改）。
*   必须将 TFS 配置为不允许 Web 设计团队访问 web.config 文件（他们必须手动创建文件）。

我正在寻找一种不那么[老套](http://andrewtwest.com/2010/02/25/using-web-config-transformations-in-web-site-projects/)的方法：

*   无需复制所有 web.config 文件内容即可管理多个环境 (dev/prod)。
*   管理 TFS 权限以便对某些团队隐藏一些敏感值。

注意：

*   我正在使用网站项目（不是 Web 应用程序），所以我不能使用 web.config 转换。
*   看起来 Web 部署项目在 VS 2012 中将不再可用，所以我宁愿避免现在开始使用它。
*   [发布配置文件](http://www.diaryofaninja.com/blog/2012/08/26/visual-studio-2012-web-deployment-projects-are-dead-ndash-long-live-publishing-profiles)可能是一个很好的解决方案，但我们仍在使用 VS 2010。

我确信不是第一个遇到这个问题的人。我很想知道人们是如何处理的:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T04:25:36.017

对于安装在机器上的每个版本的 .NET Framework，您都会获得机器级别`web.config`和`machine.config`文件。对于您计划使用的每个框架版本，您可以将所有特定于环境的值（例如连接字符串）放在这些文件中。

例如，在您的开发机器中，将您的连接字符串或 appSettings 值放入`C:\Windows\Microsoft.NET\Framework64\v4.0.3031\CONFIG\machine.config`（或您的确切版本），并对生产中的不同值执行相同操作。配置文件继承，所以你不需要在你的代码中做任何不同的事情。

但是，这将要求每个开发人员设置适当的机器级配置文件。这可能指向您的开发环境，甚至是开发人员机器上的本地路径。

# php - file_get_contents 显示图像不正确

> ID：14250739
> 
> 赞同：3
> 
> 时间：2013-01-10T04:15:23.520
> 
> 标签：php, file-get-contents

我正在尝试将通用网站和 URL 显示为我自己网站的一部分。这是我正在使用的相对简单的代码的一部分：

**浏览.php**

```
<?   
$enteredurl = $_GET["url"];
$page = file_get_contents($enteredurl);
echo $page;
?> 
```

如果 URls 是相对的而不是绝对的，则忽略某些链接/图像将不起作用的事实，这很好。使用 $_GET 访问页面，例如

**browse.php?url= [http://itracki.com](http://itracki.com)**

该网页将按预期显示。但是，当我尝试获取其他内容（例如图像）时，我会得到类似的内容，我认为这是二进制的还是什么？

**browse.php?url= [http://images.itracki.com/2011/06/favicon.png](http://images.itracki.com/2011/06/favicon.png)**

```
‰PNG  IHDRóÿa%IDAT8Ëc8sæÌJ0M ```ã3`xaÔ€aa]r#f.–ÄíNIEND®B`‚ 
```

我一直在网上寻找并尝试修改页眉，例如

```
<? header('Content-type: image/png;'); ?> 
```

但我仍然得到同样混乱的结果。如果我只是通过在地址栏中键入“ [http://images.itracki.com/2011/06/favicon.png](http://images.itracki.com/2011/06/favicon.png) ”来访问它，有谁知道我如何才能真正看到图像？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T05:50:19.103

试试这个：

```
<?php
  $img = 'http://images.itracki.com/2011/06/favicon.png';
  $info = getimagesize($img);
  header('Content-type: ' . $info['mime']);
  readfile($img);
?> 
```

您应该在这种情况下使用`readfile()`而不是，`file_get_contents()`因为`readfile()`会将文件内容直接发送到浏览器，而不是将其存储在内存中以供以后检索，这就是这样`file_get_contents()`做的。

另请注意，它`content-type`是动态检索的，因此您不必担心在标题中错误地指定它。

`content-type`某些图像的扩展名可能与其or不匹配`mime-type`，因此可以纠正这些类型的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-06T10:45:41.777

试试这个

```
$image = 'http://images.itracki.com/2011/06/favicon.png';
// Read image path, convert to base64 encoding
$imageData = base64_encode(file_get_contents($image));

// Format the image SRC:  data:{mime};base64,{data};
$src = 'data: '.mime_content_type($image).';base64,'.$imageData;

// Echo out a sample image
echo '<img src="',$src,'">'; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-09-07T01:55:37.357

```
echo 'data:;base64,'.base64_encode(file_get_contents('http://images.itracki.com/2011/06/favicon.png')); 
```

# php - 在 PHP 中将浮点数和整数相乘

> ID：14250741
> 
> 赞同：1
> 
> 时间：2013-01-10T04:15:37.340
> 
> 标签：php, floating-point

我是 php 的初学者。当我尝试将整数值与小数相乘时，得到如下结果。

1.00 * 5 = 0 。我希望输出为 5.00 如何使用 php 完成？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-10T04:18:02.827

我想你正在寻找[`number_format`](http://php.net/manual/en/function.number-format.php)：

```
number_format(1.00 * 5, 2); // "5.00" 
```

在此处查看实际操作：[http ://codepad.viper-7.com/mSFpqH](http://codepad.viper-7.com/mSFpqH)

# asp.net-mvc - 获取 LDAP 用户名无效过滤器

> ID：14250744
> 
> 赞同：0
> 
> 时间：2013-01-10T04:16:09.063
> 
> 标签：asp.net-mvc

我正在使用下面的代码块来获取 LDAP 用户名（我只给出第一行）

```
using (PrincipalContext context = new PrincipalContext(ContextType.Domain))
{

} 
```

一旦我将 asp.net MVC 应用程序发布到服务器，它就会给我一个错误。

> *ArgumentException: (&(objectCategory=user)(objectClass=user)(|(userPrincipalName=)(distinguishedName=)(name=))) 搜索过滤器无效。]*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:39:50.397

尝试像这样传递域参数。

```
using(PrincipalContext pc = new PrincipalContext(ContextType.Domain, domain)) {
        // validate the credentials 
        result = pc.ValidateCredentials(username, password);
} 
```

# c# - 查看模型数据在发布到控制器后丢失

> ID：14250749
> 
> 赞同：0
> 
> 时间：2013-01-10T04:17:08.813
> 
> 标签：c#, asp.net, asp.net-mvc, razor

这是我的视图模型：

```
public class AgencyViewModel
{
    public int VendorId { get; set; }

    public IEnumerable<Vendor> Vendors { get; set; }

    public HttpPostedFileBase SpreadsheetFile { get; set; }
} 
```

这是我的两个控制器方法：

```
public ActionResult Upload()
{
    var viewModel = new AgencyViewModel
    {
        Vendors = _vendorsRepository.Vendors.OrderBy(v => v.Name)
    };

    return View(viewModel);
}

[HttpPost]
public ActionResult Upload(AgencyViewModel viewModel)
{
    // do stuff
} 
```

而我的观点：

```
@model MyModels.AgencyViewModel

@using (Html.BeginForm("Upload", "Agencies", FormMethod.Post,
    new { enctype = "multipart/form-data" }))
{
    @Html.DropDownListFor(model => model.VendorId,
        new SelectList(Model.Vendors, "VendorID", "Name"),
        "- Select a Vendor -")

    @Html.TextBoxFor(model => model.SpreadsheetFile, new { type = "file" })

    <p>
        <input type="submit" value="Next" />
    </p>
} 
```

当我导航到`Upload`时，`Vendors`已正确加载。但是当我提交表单时，我的视图模型只包含`VendorId`and`SpreadsheetFile`和`Vendors`is `null`。

提交表单后，我需要对集​​合进行一些处理`Vendors`，并且我不想将所有数据加载两次。

如何将数据保存在我的视图模型中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T04:22:00.373

您必须再次设置您的 ViewData，如果您想让它保持干燥，您可以使用 ActionFilter，另一种选择是覆盖控制器 OnActionExecuted 方法并在那里加载您的数据。

如果你很好地使用了 MVC 模式，你应该只需要在验证失败时加载视图数据，因为在这种情况下你会再次加载相同的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:16:37.440

提交表单后，我们可以仅使用其**name**属性获取 HTML 控件的值，并且您的下拉列表在 html 中呈现如下：

```
<select name="VendorId" id="VendorId"><option value="1">XYZ</option> 
```

这就是为什么您能够获得 VendorId 的值而不是 Model.Vendors 的原因，因为没有创建名为 Vendors 的控件。

您可以将此列表存储在会话中，也可以在提交表单后再次调用数据库过程以获取列表。

# python - 如何在 python select() 中增加文件描述符的范围

> ID：14250751
> 
> 赞同：5
> 
> 时间：2013-01-10T04:17:16.100
> 
> 标签：python, sockets, select, file-descriptor

我测试python套接字编程。并修改如下所示的选项在Mac中

```
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
file size               (blocks, -f) unlimited
max locked memory       (kbytes, -l) unlimited
max memory size         (kbytes, -m) unlimited
open files                      (-n) 100000
pipe size            (512 bytes, -p) 1
stack size              (kbytes, -s) 8192
cpu time               (seconds, -t) unlimited
max user processes              (-u) 709
virtual memory          (kbytes, -v) unlimited 
```

**但是出现了以下错误。**

```
Traceback (most recent call last):
  File "ssub.py", line 63, in createMqttClient
    rc = mqttc.loop()
  File "/Library/Python/2.7/site-packages/mosquitto.py", line 633, in loop
    socklist = select.select(rlist, wlist, [], timeout)
**ValueError: filedescriptor out of range in select()** 
```

增加filedescriptor`select ()`函数怎么写？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T04:45:37.287

支持的文件描述符的数量是有限制的`select()`- 最简单的解决方案是简单地使用[poll()](http://docs.python.org/2/library/select.html#select.poll)代替，它不受此限制的影响。

严格来说，`select()`它可以支持的最高文件描述符受到限制，而不是给定调用中的数量 - 请参阅[select() 手册页的](http://www.kernel.org/doc/man-pages/online/pages/man2/select.2.html)**注释**部分的开头。我不确定OSX 上是什么，但在 Linux 上是 1024。没有实用的方法可以从 Python 增加这个限制。`FD_SETSIZE`

顺便说一句，如果你想保持可移植性，你可以考虑使用类似[pyev](http://pypi.python.org/pypi/pyev/)的东西，它是一个 Python 包装器，`libev`它使用在给定平台上等待 IO 的最佳方法。

# java - 如果我没有与 JRuby 中的 Ruby 脚本共享它们，它可以使用我的 Java 类吗？

> ID：14250753
> 
> 赞同：1
> 
> 时间：2013-01-10T04:17:42.300
> 
> 标签：java, ruby, jruby

如果我的应用程序中有一个由of`Ruby`执行的脚本，**如果我没有与脚本共享任何内容，该脚本**是否能够访问或使用我在应用程序中定义的类？`ScriptingContainer``JRuby``Java``Ruby``Java`

 **通过分享这就是我的意思：

```
ruby = new ScriptingContainer(LocalVariableBehavior.PERSISTENT);
ruby.put("main", MyClass.class);
ruby.runScriptlet(readFile("Test.rb")); 
```

如您所见，我正在与`Ruby`脚本共享一个名为 main 的变量，其值为`MyClass.class`.

**如果我不共享任何内容**，该`Ruby`脚本是否仍然能够`MyClass`在我的应用程序中使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T09:50:54.140

是的，根据[我的回答](https://stackoverflow.com/a/14226171/289466)：如果`MyClass`在您的 classpath/ 上`$LOAD_PATH`，JRuby 会在您使用它时拾取`java_import`它。**

# clang - libclang：缺少 AST 中的一些语句？

> ID：14250754
> 
> 赞同：5
> 
> 时间：2013-01-10T04:17:47.103
> 
> 标签：clang, abstract-syntax-tree, libclang

我编写了一个测试程序 (parse_ast.c) 来解析 ac 源文件 (tt.c) 以查看 libclang 是如何工作的，输出是 AST 的层次结构：

这是测试文件：

```
/* tt.c */                                    // line 1
#include <unistd.h>
#include <stdio.h>

typedef ssize_t (*write_fn_t)(int, const void *, size_t);

void indirect_write(write_fn_t write_fn) {    // line 7
    (*write_fn)(1, "indirect call\n", 14);
}

void direct_write() {                         // line 11
    write(1, "direct call\n", 12);            // line 12 mising in the ast?
}

int main() {                                  // line 15
    direct_write();
    indirect_write(write);                    // line 17 missing in the ast?

    return 0;
} 
```

输出显示如下：

```
 ...
 ...
 inclusion directive at tt.c (2, 1) to (2, 20)
 inclusion directive at tt.c (3, 1) to (3, 19)
 TypedefDecl at tt.c (5, 1) to (5, 57)
 TypeRef at tt.c (5, 9) to (5, 16)
 ParmDecl at tt.c (5, 31) to (5, 35)
 ParmDecl at tt.c (5, 36) to (5, 49)
 ParmDecl at tt.c (5, 50) to (5, 56)
 FunctionDecl at tt.c (7, 1) to (9, 2)
 ParmDecl at tt.c (7, 21) to (7, 40)
  TypeRef at tt.c (7, 21) to (7, 31)
 CompoundStmt at tt.c (7, 42) to (9, 2)
  CallExpr at tt.c (8, 5) to (8, 42)
   UnexposedExpr at tt.c (8, 5) to (8, 16)
    ParenExpr at tt.c (8, 5) to (8, 16)
     UnaryOperator at tt.c (8, 6) to (8, 15)
      UnexposedExpr at tt.c (8, 7) to (8, 15)
       DeclRefExpr at tt.c (8, 7) to (8, 15)
   IntegerLiteral at tt.c (8, 17) to (8, 18)
   UnexposedExpr at tt.c (8, 20) to (8, 37)
    UnexposedExpr at tt.c (8, 20) to (8, 37)
     StringLiteral at tt.c (8, 20) to (8, 37)
   IntegerLiteral at tt.c (8, 39) to (8, 41)
 FunctionDecl at tt.c (11, 1) to (13, 2)
 CompoundStmt at tt.c (11, 21) to (13, 2)        <- XXX no line 12?
 FunctionDecl at tt.c (15, 1) to (20, 2)
 CompoundStmt at tt.c (15, 12) to (20, 2)
  CallExpr at tt.c (16, 5) to (16, 19)
   UnexposedExpr at tt.c (16, 5) to (16, 17)
    DeclRefExpr at tt.c (16, 5) to (16, 17)      <- XXX no line 17?
  ReturnStmt at tt.c (19, 5) to (19, 13)
   IntegerLiteral at tt.c (19, 12) to (19, 13) 
```

我们可以看到三个函数（第 7 行的 direct_write/第 11 行的 indirect_write/第 15 行的 main），大多数语句都可以在 AST 中找到，但我找不到任何代表第 12 行的语句和第17行。有人知道原因吗？

我在 debian 2.6.32 上挤压，在 clang 3.1 和 3.2 上测试过（从源代码编译）。

这是程序 parse_ast.c：

```
#include <stddef.h>
#include <stdio.h>
#include <clang-c/Index.h>

enum CXChildVisitResult visit_fn(CXCursor cr, CXCursor parent,
        CXClientData client_data) {

    unsigned depth;
    unsigned line, column, offset;
    enum CXCursorKind kind;
    CXSourceRange extent;
    CXSourceLocation start, end;
    CXString kind_spelling, filename;
    CXFile file;

    depth = (unsigned)client_data;

    // print cursor kind
    kind = clang_getCursorKind(cr);
    kind_spelling = clang_getCursorKindSpelling(kind);
    fprintf(stdout, "%*s%s at", depth, " ", clang_getCString(kind_spelling));
    clang_disposeString(kind_spelling);

    // get extent
    extent = clang_getCursorExtent(cr);
    start = clang_getRangeStart(extent);
    end = clang_getRangeEnd(extent);

    // print start position
    clang_getExpansionLocation(start, &file, &line, &column, &offset);
    filename = clang_getFileName(file);
    fprintf(stdout, " %s (%u, %u) to", clang_getCString(filename), line,
            column);
    clang_disposeString(filename);

    // print end position
    clang_getExpansionLocation(end, &file, &line, &column, &offset);
    fprintf(stdout, " (%u, %u)\n", line, column);

    // recursive
    clang_visitChildren(cr, visit_fn, (CXClientData)(depth + 1));

    return CXChildVisit_Continue;

}

int main(int argc, const char * const *argv) {
    CXIndex Index = clang_createIndex(0, 0);
    CXTranslationUnit TU = clang_parseTranslationUnit(Index, NULL,
            argv, argc, 0, 0, CXTranslationUnit_DetailedPreprocessingRecord);

    clang_visitChildren(clang_getTranslationUnitCursor(TU),
            visit_fn, 0);
    clang_disposeTranslationUnit(TU);
    clang_disposeIndex(Index);

    return 0;
} 
```

**更新**：

问题是由于缺少头文件 stddef.h，它在 libclang 的邮件列表[http://clang-developers.42468.n3.nabble.com/libclang-missing-some-statements-in-the-AST-td4029641中得到答复.html](http://clang-developers.42468.n3.nabble.com/libclang-missing-some-statements-in-the-AST-td4029641.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-12T09:10:51.430

检查生成的诊断`clang_parseTranslationUnit()`- 即使遇到错误，也会生成一个 AST，但显然不能保证它是有意义的。

我发现注释掉这些`#include`行会导致编译错误，但是生成了一个类似于你的 AST（特别是缺少第 17 行）。

`#include`用 typedef`size_t`和`ssize_t`(as )替换这些行`int`会导致关于 的隐式声明的编译警告`write()`，但 AST 包含第 17 行。

因此，我认为您的头文件中存在问题，诊断应该显示该问题。诊断可以通过例如检索

```
for (unsigned I = 0, N = clang_getNumDiagnostics(TU); I != N; ++I) { 
    CXDiagnostic Diag = clang_getDiagnostic(TU, I);
    CXString String = clang_formatDiagnostic(Diag, clang_defaultDiagnosticDisplayOptions());
    fprintf(stderr, "%s\n", clang_getCString(String));
    clang_disposeString(String);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-27T14:14:35.417

我正在使用 libclang 来解析和优化 c 代码，但是用你的代码解析 c 源文件我看不到 CompoundStmt 中的 CXCursor_BinaryOperator

例如

```
void OCTS_C_TimerMiliseconds_reset_Timers(OCTS_outC_C_TimerMiliseconds_Timers *outC)
{
    outC->init = kcg_true;
    /* 1 */ OCTS_Sign_INT_reset_Math(&outC->_1_Context_1);
    /* 2 */ OCTS_Sign_INT_reset_Math(&outC->Context_2);
    /* 1 */ OCTS_FallingEdge_reset_Edge(&outC->Context_1);
} 
```

结果是：

```
FunctionDecl at s.cpp (10, 1) to (17, 2) OCTS_C_TimerMiliseconds_reset_Timers 
ParmDecl at s.cpp (11, 3) to (11, 44) outC 
 TypeRef at s.cpp (11, 3) to (11, 38) OCTS_outC_C_TimerMiliseconds_Timers 
CompoundStmt at s.cpp (12, 1) to (17, 2) 
```

# ruby - 我可以使用 Ruby1.9 在运行时创建具有动态名称的目录吗？

> ID：14250758
> 
> 赞同：0
> 
> 时间：2013-01-10T04:18:08.980
> 
> 标签：ruby, ruby-1.9.3

我必须通过几个请求从网上下载文件。每个请求的下载文件必须放在与请求编号同名的文件夹中。

例如：

我的脚本现在正在运行以下载请求号 87665 的文件。所以所有下载的文件都将放在目标文件夹`Current Download\Attachment87665`中。那么我该怎么做呢？

***目标文件夹：*** `Current Download`已修复。只需要`Attachmentxxxxxx`动态创建，`xxxxxx`任何请求号的地方。

**这是代码的 Python 版本：** *但我希望它在 Ruby 中，仅供参考以了解我在寻找什么*

```
request_number = 82673

# base dir
_dir = "D:\Current Download"       

# create dynamic name, like "D:\Current Download\Attachment82673"
_dir = os.path.join(_dir, 'Attachment%s' % request_number)

# create 'dynamic' dir, if it does not exist
if not os.path.exists(_dir):
    os.makedirs(_dir) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T04:48:46.233

使用`Dir.mkdir("#{Rails.root}/#{whatever}/#{example.join('bla')}")`.
[http://www.ruby-doc.org/core-1.9.3/Dir.html#method-c-mkdir](http://www.ruby-doc.org/core-1.9.3/Dir.html#method-c-mkdir)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T06:26:32.603

可以同时进行多个下载吗？如果是这样，您需要一些可以随机创建数字而不会发生冲突的东西。

看看 Ruby 的 Tempfile 模块，它是用来做你正在谈论的事情的，特别是[`open`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/tempfile/rdoc/Tempfile.html#method-c-open)方法。

> 用于管理临时文件的实用程序类。当您创建一个 Tempfile 对象时，它将创建一个具有唯一文件名的临时文件。

```
require 'tempfile'

file = Tempfile.new('foo')
file.path      # => A unique filename in the OS's temp directory,
            #    e.g.: "/tmp/foo.24722.0"
            #    This filename contains 'foo' in its basename.
file.write("hello world")
file.rewind
file.read      # => "hello world"
file.close
file.unlink    # deletes the temp file 
```

另请阅读有关“显式关闭”和“创建后取消链接”的文档。

无论您做什么，给定文件夹中存在的文件越多，系统或您的代码生成唯一文件名所需的时间就越长。

您也可以使用数据库来跟踪序列号。

并且，“[生成唯一文件名](http://www.ruby-forum.com/topic/64226)”也谈到了这个问题，有很多解决方案。最好的可能是`uuidgen`在 *nix 系统上使用。

> uuidgen 命令生成一个通用唯一标识符 (UUID)，一个 128 位的值，保证在空间和时间上都是唯一的。

# excel - VBA Excel - 从 Excel 发送邮件

> ID：14250764
> 
> 赞同：3
> 
> 时间：2013-01-10T04:19:03.313
> 
> 标签：excel, vba

我有以下代码行在命令按钮单击事件下发送邮件。

```
Private Sub CommandButton1_Click()
Dim cdoConfig
Dim msgOne

Set cdoConfig = CreateObject("CDO.Configuration")
With cdoConfig.Fields
    .Item(cdoSendUsingMethod) = cdoSendUsingPort
    .Item(cdoSMTPServerPort) = 557  
    .Item(cdoSMTPServer) = "smtp.emailsr.com" 'SMTP server goes here
    '.Item(cdoSendUserName) = "My Username"
    '.Item(cdoSendPassword) = "myPassword"
    .Update
End With

Set msgOne = CreateObject("CDO.Message")
Set msgOne.Configuration = cdoConfig
msgOne.To = "adbc@adbc.com"
msgOne.from = "bcda@adbc.com"
msgOne.Subject = "Test CDO"
msgOne.TextBody = "It works just fine."
msgOne.Send
End Sub 
```

当我执行此操作时，我遇到了类似**RunTime Error-2147220977(8004020f): Automation Error 此订阅的事件类位于无效分区中的错误**

```
msgOne.Send 
```

上面的行在执行期间给出了错误。所以我转向 CDO 方法来发送电子邮件。现在我正在执行以下代码。

```
Dim iMsg As Object
Dim iConf As Object
Dim strbody As String
    Dim Flds As Variant

Set iMsg = CreateObject("CDO.Message")
Set iConf = CreateObject("CDO.Configuration")

    iConf.Load -1    ' CDO Source Defaults
    Set Flds = iConf.Fields
    With Flds
        .Item("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2
        .Item("http://schemas.microsoft.com/cdo/configuration/smtpserver") = "mysmtpserver.com"
        .Item("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25
        .Item("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate") = 1
        .Item("http://schemas.microsoft.com/cdo/configuration/sendusername") = "mymailId"
        .Item("http://schemas.microsoft.com/cdo/configuration/sendpassword") = "Mypassword"
        .Update

    End With

strbody = "Hi there" & vbNewLine & vbNewLine & _
          "This is line 1" & vbNewLine & _
          "This is line 2" & vbNewLine & _
          "This is line 3" & vbNewLine & _
          "This is line 4"

With iMsg
    Set .Configuration = iConf
    .To = "tomailid"
    .CC = ""
    .BCC = ""
    .From = "mymailid"
    .Subject = "New"
    .TextBody = strbody
    .Send
End With 
```

但是**发送**给我一个错误，比如**运行时错误 -2147220977(8004020f)：服务器拒绝了一个或多个收件人地址。服务器响应是：554 5.7.1：发件人地址被拒绝：访问被拒绝**有时就像**运行时错误-'2147220975（80040211）自动化错误**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T04:56:21.090

如果您注册了 CDO 类型库，您正在使用的代码可以在 VBScript 或其他类似语言中运行。类型库包含属性`cdoSendUsingMethod`等，因此您不必使用完整的骨灰盒。在 VBA 中，您必须使用完整的 urn。[Ron De Bruin 在http://www.rondebruin.nl/cdo.htm](http://www.rondebruin.nl/cdo.htm)对此有很好的参考。

在他的网站上，您可以看到您的代码与 VBA 所需的代码之间的区别，特别是在这里：

```
 Set Flds = iConf.Fields
        With Flds
            .Item("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2
            .Item("http://schemas.microsoft.com/cdo/configuration/smtpserver") _
                           = "Fill in your SMTP server here"
            .Item("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25
            .Update
        End With 
```

# cuda - 如何使用 CUDA C 快速重新分组/透视数据？

> ID：14250767
> 
> 赞同：2
> 
> 时间：2013-01-10T04:19:20.660
> 
> 标签：cuda, pivot, grouping, simulation, gpgpu

在 SIR 感染模拟中，一个人可能对 (S) 易感、被 (I) 感染或从 (R) 疾病中恢复。`t`到时，人群`t+1`中的人的感染状况可能会发展如下（左表）：`i``P`

![第 2 人和第 9 人被感染，第 6 人康复。](../Images/8a87347f093965bd4b71b00a8dd221df.png)

（*这里，人 2 和 9 被感染，而人 6 康复。注意一个人的状态只能从 S → I → R 向一个方向发展。*）

现在，我还想按人员的状态对他们进行*分组*，就像在右侧的表格中一样，就像 Excel 数据透视表一样。在模拟中的每个时间段之后，我都需要更新分组，理想情况下，每个“分组数组”都经过排序（按索引升序列出人员`i`）。

因此，如何在每个时间段以最快的方式重新计算/更新这 3 个分组数组？（我考虑过使用原子操作，但由于速度慢，建议尽可能避免原子操作。）

模拟将在 CUDA C 中实现，每个线程映射到 population 中的每个人`P`。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T05:24:17.077

```
__global__
static void find_groups(int *locs, int *sorted, int num)
{
    int bid = blockIdx.y * gridDim.x + blockIdx.x;
    int tid = bid * blockDim.x + threadIdx.x;

    if (tid < num) {
        int curr = sorted[tid];
        if (tid == 0 || curr != sorted[tid - 1]) locs[curr] = tid;
    }

}

int main()
{
    int h_P0[N] = {0, 0, 1, 2, 1, 1, 0, 2, 0, 0};
    int h_P1[N] = {0, 1, 1, 2, 1, 2, 0, 2, 1, 0};

    thrust::host_vector<int> th_P0(h_P0, h_P0 + N);
    thrust::host_vector<int> th_P1(h_P1, h_P1 + N);

    thrust::device_vector<int> td_P0 = th_P0;
    thrust::device_vector<int> td_P1 = th_P1;

    thrust::device_vector<int> td_S0(N);
    thrust::device_vector<int> td_S1(N);

    thrust::sequence(td_S0.begin(), td_S0.end());
    thrust::sequence(td_S1.begin(), td_S1.end());

    thrust::stable_sort_by_key(td_P0.begin(), td_P0.end(), td_S0.begin());
    thrust::stable_sort_by_key(td_P1.begin(), td_P1.end(), td_S1.begin());

    thrust::device_vector<int> td_l0(3, -1); // Changed here
    thrust::device_vector<int> td_l1(3, -1); // And here

    int threads =  256;
    int blocks_x = (N + 256) / 256;
    int blocks_y = (blocks_x + 65535) / 65535;
    dim3 blocks(blocks_x, blocks_y);

    int *d_l0 = thrust::raw_pointer_cast(td_l0.data());
    int *d_l1 = thrust::raw_pointer_cast(td_l1.data());
    int *d_P0 = thrust::raw_pointer_cast(td_P0.data());
    int *d_P1 = thrust::raw_pointer_cast(td_P1.data());

    find_groups<<<blocks, threads>>>(d_l0, d_P0, N);
    find_groups<<<blocks, threads>>>(d_l1, d_P1, N);

    return 0;
} 
```

该算法可以用简单的步骤来解释。

*   按键排序 P0
*   按键排序 P1
*   键现在包含第二个表

现在将 P0 和 P1 传递给 find_groups 内核。由于您知道只有 3 个组，因此组号从 n-1 变为 n 的线程写入全局内存。线程 0 将始终写入 0，因为这是所有向量的第一组的开始。

我试着把它们打印出来。这就是我得到的。请记住，一切都是 0 索引。

```
Sorted
t    t+1
0    0
1    6
6    9
8    1
9    2
2    4
4    8
5    3
3    5
7    7
Ranges
Groups   t   t + 1
S    [0-4]   [0-2]
I    [5-7]   [3-6]
R    [8-9]   [7-9] 
```

如果您需要访问完整代码（包括打印代码），请访问[此链接](https://gist.github.com/4508156)。

我不确定这是否足够。但是，如果我在这里遗漏了什么，请告诉我。

*编辑*

更改了代码以处理缺少类的位置。用 -1 初始化相关向量。因此，当您遇到 -1 的起点时，这意味着该类不会出现在该迭代中。

# ios - 为什么动画在 ipad mini 中运行不流畅？

> ID：14250770
> 
> 赞同：0
> 
> 时间：2013-01-10T04:19:59.990
> 
> 标签：ios, animation, ipad-mini

这是我的动画代码：

```
CGRect newRect = [self paraStyle:STYLE_DOWNUP currRect:myView.frame];
[UIView animateWithDuration:0.5 animations:^{
    myView.frame = newRect;
} completion:^(BOOL finished) {
    ......
}]; 
```

它是实现`UIView`动画的常用动画代码。这段代码在 iPhone 4 和 iPad 2 上运行得很好。但在 iPad mini 上，它并不流畅。有一点颤抖。

有人有这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:02:58.030

这是我的假。原因是：

```
1\. The ipad mini is not very power in image process.
2\. The background image of the animation view is translucent. So it cost very murch! 
```

# list - 方案 - 从列表列表中删除子列表

> ID：14250771
> 
> 赞同：2
> 
> 时间：2013-01-10T04:20:01.553
> 
> 标签：list, scheme, r5rs

我有一个列表列表，例如。`((x y z) (y z) (x y))`，我想知道是否`R5RS Scheme`有办法从这个列表中只删除子列表：例如。`(y z)`是一个子列表，因为它已经在 'inside'`(x y z))`中，在我们的示例中将离开`((x y z))`。

这可能比我想象的更复杂，但我猜它会使用地图或过滤器，但我不确定你如何以这种方式“清理”整个列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T06:30:15.993

这个问题比看起来要棘手一些。我将使用 Racket，因此可能会出现一些非标准功能，但如果您坚持使用基本的 R5RS 程序（如有疑问，请查看[文档](http://docs.racket-lang.org)）。另请注意，我的解决方案更喜欢函数式编程风格，因此会有`map`s、`filter`s 和其他高阶过程。

首先，我们需要一种方法来测试一个列表是否是另一个列表*在任何位置*的子列表；我正在使用[这篇文章](https://stackoverflow.com/a/8112139/201359)中的想法来生成所有可能的连续子列表：

```
(define (inits lst)
  (let loop ((acc '())
             (n (length lst)))
    (if (negative? n)
        acc
        (loop (cons (take lst n) acc) (sub1 n)))))

(define (tails lst)
  (let loop ((acc '())
             (n (length lst)))
    (if (negative? n)
        acc
        (loop (cons (drop lst n) acc) (sub1 n)))))

(define (contiguous-sublists lst)
  (cons '()
        (remove* '(())
                 (append-map inits (tails lst)))))

(define (sublist? l1 l2)
  (if (member l1 (contiguous-sublists l2)) #t #f)) 
```

现在是实际过程，请注意我假设输入列表是无重复的：

```
(define (remove-sublists lst)
  (filter
   (lambda (l1)
     (andmap
      (lambda (l2)
        (not (sublist? l1 l2)))
      (remove l1 lst)))
   lst)) 
```

它按预期工作：

```
(remove-sublists '((x y z) (y z) (x y)))
=> '((x y z)) 
```

# php - 如何使用 PHP 从文本文件中删除某些行？

> ID：14250773
> 
> 赞同：1
> 
> 时间：2013-01-10T04:20:12.617
> 
> 标签：php, file

我有一个包含这些数据的文本文件：

> 947 11106620030 Ancho Khoren MKK6203 Introduction Busy 2,00
> 948 balblalbllablab
> 949 balblalbllablab
> 950 balblalbllablab
> 951 11106620031 Adagasa Goo MKB6201 Economy Inside 3,00
> 952 balblalbllablab
> 953 balblalbllablab
> 954 balblalbllablab
> 962 11106620032 The Fumiou Moon MKB6201 The Book of World 3,00

但是，我需要删除所有包含 'balblabllablab' 的行，只留下 tge 特定的数据行，如下所示：

> 947 11106620030 Ancho Khoren MKK6203 简介 忙碌 2,00
> 951 11106620031 Adagasa Goo MKB6201
> 经济内部 3,00
> 962 11106620032 文月 MKB6201 世界之书 3,00

我知道如何打开和写入文件以及关闭文件，但我不知道如何使用 php 删除行/内容。如何使用 php 从文件中删除不需要的行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T05:08:18.687

使用该`file($path)`函数将行放入数组中，然后循环遍历它。

```
$lines = file($path, FILE_IGNORE_NEW_LINES);
$remove = "balblalbllablab";
foreach($lines as $key => $line)
  if(stristr($line, $remove)) unset($lines[$key]);

$data = implode('\n', array_values($lines));

$file = fopen($path);
fwrite($file, $data);
fclose($file); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T04:48:56.277

文件中的内容不清楚，你到底想从文本文件中获取什么？

通常使用正则表达式你可以获取所需的内容，只有当它有一些共同的模式。

您能否发布完整的文件内容并解释您想要从中过滤的内容。

参考： http: [//php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

# java - 使用javamail api将多个产品详细信息发送到android中的邮件

> ID：14250776
> 
> 赞同：0
> 
> 时间：2013-01-10T04:20:26.130
> 
> 标签：java, android, jakarta-mail, sendmail

我必须开发一个 android 示例。

使用 javamail api 从我的 android 应用程序发送多个项目详细信息到邮件。

在这里我必须运行该应用程序意味着仅将最新添加的产品发送到邮件。但我必须将所有添加的产品详细信息发送到电子邮件。我该怎么办。请帮助我。我的代码有什么问题。请检查代码并为我提供解决方案。

我使用了以下代码：

```
 public class InvoiceOrder extends Activity {

String mGrandTotal;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub  
    super.onCreate(savedInstanceState);
    setContentView(R.layout.invoice);
    ListView mLstView1 = (ListView) findViewById(R.id.listView1);

    CustomerAdapter mViewCartAdpt = new CustomerAdapter(
            InvoiceOrder.this);
    mLstView1.setAdapter(mViewCartAdpt);

            Button login = (Button) findViewById(R.id.mBtnSubmit);
            login.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            Properties props = new Properties();
            props.put("mail.smtp.host", "smtp.gmail.com");
            props.put("mail.smtp.socketFactory.port", "465");
            props.put("mail.smtp.socketFactory.class",
                    "javax.net.ssl.SSLSocketFactory");
            props.put("mail.smtp.auth", "true");
            props.put("mail.smtp.port", "465");

            Session session = Session.getDefaultInstance(props,
                new javax.mail.Authenticator() {
                    protected PasswordAuthentication getPasswordAuthentication() {
                        return new PasswordAuthentication("krishnaveniv96@gmail.com","xxxxxx");
                    }
                });

            try {

                Message message = new MimeMessage(session);
                message.setFrom(new InternetAddress("krishnaveni.veeman@gmail.com"));
                message.setRecipients(Message.RecipientType.TO,
                        InternetAddress.parse("mercy.krishnaveni@gmail.com"));
                message.setSubject("Testing Subject");
                StringBuilder sb = new StringBuilder();                  
              //  message.setContent("This is your product name : "+
                    //    "Hi Krishna" +"<br></br>This is your price : "+ "Hi veni", "text/html; charset=utf-8");
                for (int i = 0; i < Constants.mItem_Detail
                        .size(); i++) {

                    String title = Constants.mItem_Detail
                            .get(i).get(
                                    SingleMenuItem.KEY_PNAME);

                    String qty = Constants.mItem_Detail.get(i)
                            .get(SingleMenuItem.KEY_QTY);

                    String cost = Constants.mItem_Detail.get(i)
                            .get(SingleMenuItem.KEY_PRICE);

                    String total = Constants.mItem_Detail
                            .get(i).get(
                                    SingleMenuItem.KEY_TOTAL);

                message.setContent("<tr>" + "<td>" + title
                            + "</td><td>" + qty + " * " + cost
                            + "</td>" + " = <td>" + total
                            + "  " + "</td></tr>", "text/html; charset=utf-8"); 

                }

                Transport.send(message);

                System.out.println("Done");

            } catch (MessagingException e) {
                throw new RuntimeException(e);
            }
           }

  }); 
```

**编辑**：

```
 try {

                Message message = new MimeMessage(session);
                message.setFrom(new InternetAddress("krishnaveni.veeman@mercuryminds.com"));
                message.setRecipients(Message.RecipientType.TO,
                        InternetAddress.parse("mercy.krishnaveni@gmail.com"));
                message.setSubject("Testing Subject");
                //StringBuilder sb = new StringBuilder();     
                StringBuilder body = new StringBuilder();

                body.append("<html><body><table>");

              //  message.setContent("This is your product name : "+
                    //    "Hi Krishna" +"<br></br>This is your price : "+ "Hi veni", "text/html; charset=utf-8");
                for (int i = 0; i < Constants.mItem_Detail
                        .size(); i++) {

                    String title = Constants.mItem_Detail
                            .get(i).get(
                                    SingleMenuItem.KEY_PNAME);

                    String qty = Constants.mItem_Detail.get(i)
                            .get(SingleMenuItem.KEY_QTY);

                    String cost = Constants.mItem_Detail.get(i)
                            .get(SingleMenuItem.KEY_PRICE);

                    String total = Constants.mItem_Detail
                            .get(i).get(
                                    SingleMenuItem.KEY_TOTAL);

                    body.append("<tr>" + "<td>" + title
                            + "</td><td>" + qty + " * " + cost
                            + "</td>" + " = <td>" + total
                            + "  " + "</td></tr>");
                }

                body.append("<tr>" + "<td>" + "Grand Total is:-  "
                        + "</td><td>" + mGrandTotal + " "
                        + "</td></tr>");
                body.append("</table></body></html>");
            message.setContent(body);
             Transport.send(message);                   
        System.out.println("Done");

            } catch (MessagingException e) {
                throw new RuntimeException(e);
            }
           } 
```

我已经更改了上面的代码。这里我必须得到以下错误：

Part 类型中的方法 setContent(Multipart) 不适用于参数（StringBuilder）

在这些线上 message.setContent(body);

如何清除这些错误。请帮助我。如何使用 javamail api 从我的 android 应用程序发送多个产品详细信息。

# html - required 属性是否适用于模式中的输入元素？

> ID：14250779
> 
> 赞同：1
> 
> 时间：2013-01-10T04:21:23.627
> 
> 标签：html, twitter-bootstrap, modal-dialog, pug

我在模式中有一些`required=true`作为属性的输入字段。元素在 a 内`<form>`，但是当按下提交按钮时，当字段留空时，不会显示所需的警告。我使用 Jade 作为模板引擎和 Bootstrap。

**编辑：**如果我从提交按钮中删除关闭模式的属性，则所需的属性有效。

所以问题是我怎样才能延迟模式解雇，直到填写必填字段？

这是模态框上的 Jade：

```
div#passwordModal.modal.hide.fade
        div.modal-header
            button.close(type='button', data-dismiss='modal', aria-hidden='true') x
            h3 Password Reset
        div.modal-body
            form.form-horizontal.form-align-center(action='/changePass', method='post', enctype='multipart/form-data')
                div.control-group
                    label.control-label(for='currentpass') Current Password
                    div.controls
                        input#currentpass(type='password', name='passOld', placeholder='enter old password', required=true)
                div.control-group
                    label.control-label(for='newpass') New Password
                    div.controls
                        input#newpass(type='password', name='passNew', placeholder='enter new password', required=true)
                div.control-group
                    label.control-label(for='newpassconfirm') Confirm
                    div.controls
                        input#newpassconfirm(type='password', name='passNew', placeholder='confirm new password', required=true)
                div.control-group
                    button.btn.btn-success.offset3(type='submit', data-dismiss='modal', aria-hidden='true') Change Password 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T23:57:11.387

正如[PéCé](https://stackoverflow.com/users/1075027/pece)所说，不应该在提交时关闭模式。

我用了两个按钮。一个用于验证输入，使用表单中的数据构造一个 JSON 对象，并执行 $.post 到服务器。在该请求的回调中，我决定是否关闭模式，并显示警报。另一个按钮仅用于关闭模式。

如果我找到更好的方法来明智地处理这个 UX，我会更新答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-26T00:22:31.987

```
function goRegEvent() {

  var connect,form,titulo,detalle,tipo,fechaPublicacion,fechaVencimiento,fechaEvento,horaEvento,lugar,horaInicio,horaFin;

titulo=return document.getElementById('titulo').value;

 if(titulo != '') {
      form ='titulo='+titulo;
     connect = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');
 connect.open('POST','ajax.php?mode=regEvent',true);
      connect.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
    connect.send(form);

 }else {
      result = '<div class="alert alert-dismissible alert-danger">';
      result += '<button type="button" class="close" data-dismiss="alert">x</button>';
      result += '<h4>ERROR</h4>';
      result += '<p><strong>Los campos con * son obligatorios</strong></p>';
      result += '</div>';
      __('_AJAX_REG_EVENTO_').innerHTML = result;
    }
}

function runScriptReg(e) {
  if(e.keyCode == 13) {
    goRegEvent();
  }
}
```

```
<div class="modal fade" id="RegistroEvento" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">

            <div id="_AJAX_REG_EVENTO_"></div>

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 style="color:red;"> Registrar Evento</h4>
            </div>
            <div class="modal-body">

                <div role="form" onkeypress="return runScriptReg(event)">

                    <div class="form-group">
                        <label for="titulo"><span class="glyphicon glyphicon-user">  </span> Titulo*</label>
                        <input type="text" class="form-control" id="titulo" placeholder="Introduce un Titulo para el evento" ">
                    </div>

                    <button type="button" onclick="goRegEvent()" class="btn btn-default btn-success btn-block"><span class="glyphicon glyphicon-ok-sign"></span> Registrar</button>
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default btn-default pull-left" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> Cancelar</button>
            </div>

        </div>
    </div>
</div>

<script src="views/app/js/regEvento.js"></script>
```

# c - 制作 zImage 的错误

> ID：14250783
> 
> 赞同：-2
> 
> 时间：2013-01-10T04:21:59.680
> 
> 标签：c, linux, linux-kernel

以下是我在制作 zImage 时遇到的错误。任何人都可以帮助我吗？谢谢

```
make: arm-linux-gcc: Command not found
  CHK     include/linux/version.h
make[1]: `include/asm-arm/mach-types.h' is up to date.
  CHK     include/linux/utsrelease.h
  SYMLINK include/asm -> include/asm-arm
  CC      kernel/bounds.s
/bin/sh: arm-linux-gcc: not found
make[1]: *** [kernel/bounds.s] Error 127
make: *** [prepare0] Error 2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T04:52:01.167

看起来你没有 GNU arm 工具链，即`arm-linux-gcc`

如果您没有安装它，请安装 Sourcery Codebench Lite。如果您有二进制文件，请`bin`在 PATH 变量中设置目录路径。您可以通过`export PATH=$PATH:/path/to/arm/binaries/`

# sql - MSDTC 日志文件 (MSDTC.LOG) 如何工作？

> ID：14250785
> 
> 赞同：5
> 
> 时间：2013-01-10T04:22:03.073
> 
> 标签：sql, msdtc, distributed-transactions

最近遇到一个错误： **Microsoft Distributed Transaction Coordinator (MS DTC) has cancelled transaction**

在一个[论坛](http://www.sqlservercentral.com/Forums/Topic1170215-146-1.aspx)的一个回复中提到，其中一个原因可能是-

**已超出 MS DTC 日志文件可以容纳的最大活动事务数。如果您希望启动更多并发事务，则必须增加 MS DTC 日志文件的大小。**

所以，我很好奇 MS DTC 的日志记录是如何工作的。
1.是否是每个分布式事务，并且每次事务结束时都会清理文件？
或
2\. 是否像所有事务日志一样持续存在并且文件随着时间的推移而增长？（直到达到为 MSDTC.log 文件设置的最大文件大小限制）

我将文件容量从 4MB 更改为 16MB，并注意到文件大小立即增加，所以我猜测 1。

但如果有人能详细解释这种**“日志记录”**是如何工作的，那就太好了。

注意：我很清楚 MS DTC 的工作原理。

# jquery - 日期选择器无法在 jquery 中同时设置默认日期和最小日期

> ID：14250790
> 
> 赞同：0
> 
> 时间：2013-01-10T04:22:33.300
> 
> 标签：jquery, datepicker

我想使用 jquery 为我的日期选择器设置默认日期和最小日期。

这是我的jQuery代码：

在设置日期之前有一个ajax调用：

在那之后 ：

```
$('#'+categoryedit ).datepicker();
$('#'+categoryedit ).datepicker('setDate', valnew);
$( "#"+categoryedit ).datepicker( 'option', 'minDate', new Date(nextdate) ); 
```

在这里`valnew`并`nextdate`有日期。mindate 工作，但默认日期未设置。

我的代码有什么问题？

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:23:55.670

您可以在初始化日期选择器时全部设置：

```
$('#'+categoryedit ).datepicker({
    setDate: valnew,
    minDate: new Date(nextdate)
}); 
```

# android - 当字符串来自 SQLiteDatabase 时，将字符串与字符串进行比较不起作用

> ID：14250791
> 
> 赞同：0
> 
> 时间：2013-01-10T04:22:36.927
> 
> 标签：android

我正在从我的 sqlitedatabase 中检索字符串数据并与我的本地变量进行比较。但它不起作用。它就像下面的代码。

```
String hole1 = " ";
Cursor cc = save.rawQuery("Select *from " +data + " where Mobile = '"+ number +"'", null);
cc.moveToFirst();
hole1 = cc.getString(cc.getColumnIndex("Hole1"));
ArrayAdapter<String> adapter1 = new ArrayAdapter<String>(  
                    this,  
                    R.layout.spinnerlayout,  
                    new String[] { hole1,"1", "2", "3", "4","5","6","7","8","9" });  adapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 
((Spinner) findViewById(R.id.soloscorehole1front9)).setAdapter(adapter1);

if( ((Spinner) findViewById(R.id.soloscorehole1front9)).getSelectedItem().toString() == hole1){
                Toast.makeText(Activity.this,"True!", Toast.LENGTH_LONG).show();
            } 
```

谁能指出这个简单的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T04:26:30.180

像这样的字符串组合会更好

```
().getSelectedItem().toString().equals(hole); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T04:27:13.563

你不应该`==`用来比较字符串。改为使用`string1.equals(string2)`。`==`如果对每个字符串的引用相等，则使用比较，而`.equals()`比较字符串的值

# r - R中的偏相关

> ID：14250792
> 
> 赞同：6
> 
> 时间：2013-01-10T04:22:39.860
> 
> 标签：r, partial, correlation

我正在尝试计算 R 中的偏相关。我有两个要比较的数据集，目前只有一个受控变量。（这将在未来改变）

我已经在网上查看并尝试自己解决这个问题，但很难理解我查看过的网站上使用的术语。有人可以解释一下我将如何做到这一点，并可能提供一个简单的例子吗？

数据格式如下：

```
 Project.Name Bugs.Project Changes.Project Orgs.Project
1     platform_external_svox            4             161            2
3 platform_packages_apps_Nfc           13             223            2
5      platform_system_media           36             307            2
7     platform_external_mtpd            2              30            2
9            platform_bionic           42            1061            4 
```

我希望将 Bugs.Project 和 Orgs.Project 之间的相关性与 Changes.Project 作为控制变量。我已经下载了该`ppcor`库，因为它看起来具有我需要的功能。但是，我不确定如何使用它。如何将我的数据添加到矩阵并使用该`pcor`函数？

这是我一直在尝试的：

```
y.data <- data.frame(
bpp=c(projRelateBugsOrgs[2]),
opp=c(projRelateBugsOrgs[4]),
cpp=c(projRelateBugsOrgs[3])
)

test <- pcor(y.data) 
```

我只是使用了一个我找到的示例，并尝试使用我的数据代替他们的数据。我不明白我的输出。

它看起来像这样：

```
$estimate
                Bugs.Project Orgs.Project Changes.Project
Bugs.Project       1.0000000    0.3935535       0.9749296
Orgs.Project       0.3935535    1.0000000      -0.1800788
Changes.Project    0.9749296   -0.1800788       1.0000000

$p.value
                Bugs.Project Orgs.Project Changes.Project
Bugs.Project     0.00000e+00  2.09795e-07       0.0000000
Orgs.Project     2.09795e-07  0.00000e+00       0.0264442
Changes.Project  0.00000e+00  2.64442e-02       0.0000000

$statistic
                Bugs.Project Orgs.Project Changes.Project
Bugs.Project        0.000000     5.190442       53.122165
Orgs.Project        5.190442     0.000000       -2.219625
Changes.Project    53.122165    -2.219625        0.000000

$n
[1] 150

$gp
[1] 1

$method
[1] "pearson" 
```

我想我想从 $estimate 表中得到一些东西，但我不确定它给了我什么，

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T05:50:32.507

`help('pcor')`从值部分读取

> ## 价值
> 
> *估计* 两个变量之间的偏相关系数矩阵
> 
> *p.value* 测试的 p 值的矩阵
> 
> *statistic* 检验统计量值的矩阵
> 
> *n* 样本数
> 
> *gn* 给定变量的数量
> 
> *method* 使用的相关方法

详细信息部分给出

> ## 细节
> 
> 偏相关是两个变量在控制第三个或更多其他变量时的相关性。

为了你的结果

```
$estimate
                Bugs.Project Orgs.Project Changes.Project
Bugs.Project       1.0000000    0.3935535       0.9749296
Orgs.Project       0.3935535    1.0000000      -0.1800788
Changes.Project    0.9749296   -0.1800788       1.0000000 
```

`Changes.Project`和的偏相关`Orgs.Project` 是`-0.1800788`。这是相关性 `Changes.Project`和`Orgs.Project` 控制性`Bugs.Project`

`Changes.Project`和的偏相关`Bugs.Project`是 `0.9747296`。这是相关性 `Changes.Project`和`Bugs.Project` 控制性`Orgs.Project`

`Orgs.Project`和的偏相关`Bugs.Project`是`0.3935535`。这是相关性 `Orgs.Project`和`Bugs.Project` 控制性 `Changes.Project`

您可以从

```
pcor.test(y.data$Orgs.Project, y.data$Bugs.Project, y.data$Changes.Project) 
```

# c# - StreamWriter 有错误？

> ID：14250795
> 
> 赞同：0
> 
> 时间：2013-01-10T04:23:09.890
> 
> 标签：c#

这只是每次将文本框中的文本写入同一个文件......我不明白为什么如果我输入新字符或更改字符而删除字符不起作用，它为什么能完美工作......

```
 private void ContentChanged(object sender, TextChangedEventArgs e)
        {
            Console.WriteLine("cur before:" + this.Box.SelectionStart);
            FileStream f = File.Open(path, FileMode.OpenOrCreate, FileAccess.ReadWrite, FileShare.ReadWrite);
            StreamWriter writer = new StreamWriter(f);
            model.Cursor = this.Box.SelectionStart;
            writer.Write(this.Box.Text);
            writer.Close();
            Console.WriteLine("cur after:" + this.Box.SelectionStart);
            Console.WriteLine("write:" + count++);
            Console.WriteLine("after write:" + this.Box.Text);
            Console.WriteLine("after write:" + model.Content);
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T04:25:55.400

您没有关闭`f`或刷新 - 数据完全有可能被缓冲，这就是为什么它永远不会进入文件的原因。

两个建议：

*   使用`using`带有一次性资源的语句，例如流和写入器
*   用于[`File.CreateText`](http://msdn.microsoft.com/en-us/library/system.io.file.createtext.aspx)创建`TextWriter`一个通话 - 或者更好的是，用于[`File.WriteAllText`](http://msdn.microsoft.com/en-us/library/system.io.file.writealltext.aspx)避免完全不必担心打开和关闭。

所以是这样的：

```
private void ContentChanged(object sender, TextChangedEventArgs e)
{
    Console.WriteLine("cur before:" + this.Box.SelectionStart);
    File.WriteAllText(path, this.Box.Text);
    Console.WriteLine("cur after:" + this.Box.SelectionStart);
    Console.WriteLine("write:" + count++);
    Console.WriteLine("after write:" + this.Box.Text);
    Console.WriteLine("after write:" + model.Content);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T04:27:44.320

**简而言之：**`using`您需要像下面的示例中的关键字一样重写代码。因为它可以防止泄漏，并且是处理 .NET Framework 中非托管资源的推荐方法。

```
using(StreamWriter writer = new StreamWriter(Response.OutputStream))
{
    writer.WriteLine("col1,col2,col3");
    writer.WriteLine("1,2,3");
    writer.Close(); //not necessary I think... end of using block should close writer
} 
```

**编辑：**在您的代码示例中，您正在打开`FileStream`但不要关闭它，这会导致问题。因此，可以使用方便的 using 语句来防止这种情况发生。否则，您只需要关闭您的 filstream 或任何非托管资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T19:27:30.537

我发现了原因。

我使用的 StreamWriter 构造函数无法将属性“append”设置为 false，因此每次我都覆盖现有文本，而不是从头开始。

由于出于多线程原因我必须使用 FileStream，我想我必须找到另一种写入文件的方式。

# xml - 挪威字符的撒克逊问题

> ID：14250798
> 
> 赞同：0
> 
> 时间：2013-01-10T04:23:20.310
> 
> 标签：xml, encoding, saxon

使用 Saxon 处理 xml 文件： http: [//meltwaternews.com/magenta/xml/html/18/2/rss/v2_406837.rss2.XML](http://meltwaternews.com/magenta/xml/html/18/2/rss/v2_406837.rss2.XML) 其中包括一些挪威字符，如 Æ、Ø、Å。xml编码为utf-8

但是，出现错误：非法 html 字符：十进制 152。 (http://meltwater.vacau.com/s2.png)

但是在原始 xml 文件中找不到十进制 152，即 ~。

如果我使用 windows-1252 用 Saxon 处理这个 xml 文件，我实际上可以看到 Æ、Ø、Å 被错误解析为 Ã~ Ã¥（你可以在这里看到小数点 152）（http://meltwater.vacau .com/s1.png)。

有人可以建议如何使它正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-13T13:48:59.240

使用字符映射。

```
<xsl:character-map name="meltwater_fix">
  <xsl:output-character character="&#152;" string="˜"/>
</xsl:character-map> 
```

然后添加到输出元素：

```
<xsl:output> or <xsl:result-document> 
```

以下属性：

```
use-character-maps="meltwater_fix" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-02T13:31:21.360

我对挪威字符“Ø”也有同样的问题。该问题不是特定于撒克逊人的，该问题也存在于 apache xalan 中。`Illegal HTML character: decimal 152`

我通过确保 XML 和 XSL 文档都被正确编码（一些文本编辑器可能显示正确的文本但仍将文档保存为 UTF-8 或其他一些编码）来设法让它工作。我使用 vim 保存了所有测试文档`:write ++enc=ISO-8859-1`，以确保文档以正确的编码保存。

我还必须指定 XSL-Transformer 的输出编码：

```
String encoding = "ISO-8859-1";
Transformer transformer = transformerFactory.getTransformer(xsltDocumentSource);
transformer.setOutputProperty(OutputKeys.ENCODING, encoding); 
```

# android - 模拟器至少需要运行哪些文件？

> ID：14250799
> 
> 赞同：0
> 
> 时间：2013-01-10T04:23:20.507
> 
> 标签：android, android-emulator, android-ndk

我已经从源代码构建了一个带有新内核的模拟器。

有了构建的文件和源，项目文件夹是如此巨大。所以，我想把它们分开。在这里，我下载了sdk工具。

所以，我想知道模拟器至少需要哪些文件？比如 system.img 和什么？

（更重要的是，我还构建了一个新内核，我想用这个新内核运行模拟器）

thx，提前！

附：经过长时间的搜索，我将最小的文件放在一个文件夹中，如：

```
:~/droidls
hardware-qemu.img  system.img    userdata-qemu.img
ramdisk.img        userdata.img  zImage 
```

然后，我 cd 到这个文件夹并将 android-sdk-linx/tools 路径放入主机操作系统的 PATH 变量中。

最后，我尝试使用以下命令启动模拟器：

```
emulator -kernel zImage -ramdisk ramdisk.img -sysdir ~/droid -datadir ~/droid -data userdata-qemu.img -system system.img -initdata userdata.img 
```

但它失败了。

![在此处输入图像描述](../Images/1192142a9c31225a10508fe37cfe4d4a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:54:47.020

> 并且有了构建的文件和源，项目文件夹是如此巨大。

请描述一下项目文件夹在构建后是如何变大的。

> 所以，我想知道模拟器至少需要哪些文件？比如 system.img 和什么？

是的，这是个好问题。根据官方文档，

> 要使用模拟器，您首先必须创建一个或多个 AVD 配置。在每个配置中，您指定要在模拟器中运行的 Android 平台以及要使用的一组硬件选项和模拟器皮肤。然后，当您启动模拟器时，您指定要加载的 AVD 配置。
> 
> 每个 AVD 都作为一个独立的设备运行，具有自己的用户数据专用存储、SD 卡等。当您使用 AVD 配置启动模拟器时，它会自动从 AVD 目录加载用户数据和 SD 卡数据。默认情况下，模拟器将用户数据、SD 卡数据和缓存存储在 AVD 目录中。

您可以通过[此处查看更多说明](http://developer.android.com/tools/devices/emulator.html)

> 更重要的是，我还构建了一个新内核，我想用这个新内核运行模拟器

有关使用您的新内核运行并使用您的模拟器运行它的查询，您可以通过 [Android 内核编译和使用 Android 模拟器进行测试](https://stackoverflow.com/questions/1809774/android-kernel-compile-and-test-with-android-emulator)

希望它会有所帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-10T04:46:16.833

`Android Package .apk`需要在设备或模拟器文件上运行应用程序。一个`.apk`文件包含**.dex 文件（转换为 Dalvik 字节码的文件）、资源文件 .arsc、未编译资源和 AndroidManifest.xml**。有关更多详细信息，请参阅[开发人员指南文档 Building and Running](http://developer.android.com/tools/building/index.html)。

# java - 使用 AppleScript 在终端中运行 Java 类

> ID：14250804
> 
> 赞同：0
> 
> 时间：2013-01-10T04:23:40.063
> 
> 标签：java, macos, terminal, applescript

我有一个名为 Adventure.class 的 java 类。我有一个名为 Adventure 的 AppleScript 应用程序。我正在尝试让 Adventure 应用程序在 Mac 上的终端中运行 Adventure.class。基本上，我试图将它放在可下载文件夹的位置，里面是应用程序和标有“文件”的文件夹。files里面是一个bin文件夹，里面是class文件。Adventure.app 位于主目录中，带有文件夹。到目前为止，这是我的 AppleScript。

```
set filepath to POSIX path of (path to me)
set newpath to text 1 thru ((offset of "Adventure.app" in filepath) - 1) of filepath
do shell script "java " & newpath & "files/bin/Adventure" 
```

无论如何，它抛出了这个错误：

```
java.lang.NoClassDefFoundError: /Users/Russell/Documents/Adventure/files/bin/Adventure (wrong name: Adventure)
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

`java Adventure`当我在正确的文件夹中时，我通常可以通过在终端中键入来启动课程。但是，我无法在 AppleScript 中导航到该文件夹​​，因为当您执行下一行时它不会停留在该文件夹中。任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T03:28:44.020

我最终让它与它一起工作（在命令执行之前也提供了一堆空行和东西）：

```
set filepath to POSIX path of (path to me)
set newpath to text 1 thru ((offset of "TextAdventure.app" in filepath) - 1) of filepath
do shell script "open /Applications/Utilities/Terminal.app"
tell application "Terminal"
    activate
    do script "cd \"" & newpath & "TextAdventure.app/Contents/Java/\""
    do script "echo \"

 \"" in window 1
    do script "java Adventure" in window 1
end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T20:05:21.753

您可以结合“cd”命令来设置 shell 脚本的路径。例如，在这里我 cd 到桌面，然后获取文件列表...

```
set desktopFolder to path to desktop
do shell script "cd " & quoted form of POSIX path of desktopFolder & "; ls" 
```

# error-handling - 在视图中显示错误

> ID：14250809
> 
> 赞同：0
> 
> 时间：2013-01-10T04:24:33.733
> 
> 标签：error-handling, asp.net-mvc-4, partial-views

是否有任何标准做法可以在视图中显示错误？目前它正在从 TempData 显示。

我从基本控制器实现了一个派生类，并在我的每个控制器中使用了该派生类。然后从控制器分配错误或成功消息。

```
public class TestController : Controller
{
    public string ErrorMessage
    {
        get { return (string) TempData[CommonHelper.ErrorMessageKey]; }

        set
        {
            if (TempData.ContainsKey(CommonHelper.ErrorMessageKey))
            {
                TempData[CommonHelper.ErrorMessageKey] = value;
            }
            else
            {
                TempData.Add(CommonHelper.ErrorMessageKey,value);
            }

            TempData.Remove(CommonHelper.SuccessMessageKey);
        }
    }

    public string SuccessMessage
    {
        get { return (string)TempData[CommonHelper.SuccessMessageKey]; }

        set
        {
            if(TempData.ContainsKey(CommonHelper.SuccessMessageKey))
            {
                TempData[CommonHelper.SuccessMessageKey] = value;
            }
            else
            {
                TempData.Add(CommonHelper.SuccessMessageKey, value);
            }

            TempData.Remove(CommonHelper.ErrorMessageKey);
        }
    }
} 
```

**CommonHelper 类**

```
public class CommonHelper
{

    public const string SuccessMessageKey = "successMessage";

    public const string ErrorMessageKey = "errorMessage";

    public static string GetSuccessMessage(object data)
    {
        return data == null ? string.Empty : (string) data;
    }

    public static string GetErrorMessage(object data)
    {
        return data == null ? string.Empty : (string) data;
    }

} 
```

**然后创建了一个具有这个的局部视图**

```
@using Web.Helpers

@if (!string.IsNullOrEmpty(CommonHelper.GetSuccessMessage(TempData[CommonHelper.SuccessMessageKey])))
{
<div class="alert alert-success">
    @CommonHelper.GetSuccessMessage(TempData[CommonHelper.SuccessMessageKey])
</div>
}
else if   (!string.IsNullOrEmpty(CommonHelper.GetErrorMessage(TempData[CommonHelper.ErrorMessageKey])))
{
<div class="alert alert-success">
    @CommonHelper.GetErrorMessage(TempData[CommonHelper.ErrorMessageKey])
</div>
} 
```

**并且在每个视图中，都会渲染局部视图。**

```
<div>
        @Html.Partial("_Message")
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:20:05.087

我更喜欢使用 ModelState.AddModelError()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T14:28:22.397

这是一个非常常见的显示错误的实现。

控制器

```
public class UserController : Controller 
{
     [HttpPost]
     public ActionResult Create(User model)
     {
         //  Example of manual validation            
         if(model.Username == "Admin")
         {
            ModelState.AddModelError("AdminError", "Sorry, username can't be admin")
         }

         if(!ModelState.IsValid() 
         {
            return View(model)
         }
     }
} 
```

模型

```
public class User
{
    [Required]
    public string Username {get; set;}

    public string Name {get; set; }
} 
```

看法

```
@Html.ValidationSummary(true)
@using(Html.BeginForm())
{
   // Form Html here 
} 
```

您不需要您创建的所有基础架构。这是由框架处理的。如果您需要添加成功消息的方法，您可以查看 Nuget Package MVC FLASH

# java - 正则表达式在 Java 中查找类似 excel 的单元格地址

> ID：14250815
> 
> 赞同：0
> 
> 时间：2013-01-10T04:25:39.230
> 
> 标签：java, regex

我正在用 Java 编写类似电子表格的软件。单元格可能包含数字、字符串或方程式。方程式包含单元格引用。

我需要一个 java 正则表达式来挑出单元格引用。单元格引用将是一个大写字母后跟一个数字。

我想出了：

```
 String pattern=".[A-Z]{1}\\d"; 
```

但这仅在数字小于 10 时才有效。您能帮我找到合适的正则表达式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:26:58.680

```
[A-Z]{1}\d+ 
```

这将允许 1 个或多个数字

# asp.net - 在 GridView 的内部标签中将日期时间格式化为小写

> ID：14250818
> 
> 赞同：1
> 
> 时间：2013-01-10T04:26:17.867
> 
> 标签：asp.net, gridview

这是`GridView`来自数据库的日期片段：

```
<asp:GridView ID="grid" runat="server" ...>
<asp:TemplateField HeaderText="Date">
<ItemTemplate> 
<asp:Label ID="dateLbl" runat="server" Text='<%# Bind("datevalue", "{0:dd MMM yy, ddd}") %>' />
</ItemTemplate>
... 
```

日期看起来像`07 Jan 13, Mon`

我希望他们看起来像`07 jan 13, mon`

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:51:28.030

行。唯一可用的选项是 CSS :)

```
<asp:Label ID="accdateLbl" runat="server" Text='<%# Bind("accvaluedate", "{0:dd MMM yy, ddd}") %>' CssClass="grid_date" />

.grid_date
{
    text-transform: lowercase;
} 
```

现在它起作用了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T05:30:05.803

您可以在 gridview rowdatabound 事件中执行此操作：

```
protected void grid_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        Label dateLbl= (Label)e.Row.FindControl("dateLbl");
        string date=dataLbl.text.tolower();
        dateLBl.text=date;
    }          
} 
```

# css - 使用背景图像而不是响应式设计的图像有什么缺点吗？

> ID：14250819
> 
> 赞同：2
> 
> 时间：2013-01-10T04:26:23.057
> 
> 标签：css, responsive-design, media-queries

为一个糟糕的标题道歉。我一直在自学响应式设计技术，我阅读的所有博客似乎都在谈论为移动平台下载桌面大小的图像、加载多个图像或需要 javascript 时存在问题。 [我写了一个小小提琴](http://jsfiddle.net/xRXhc/1/embedded/result/)，它使用媒体查询和填充顶部纵横比技巧进行动态调整大小。它工作正常，并在启动时加载正确的图像（至少此时在 Chrome 中），并且正确地上下移动（你必须打开网络监视器才能看到）。

我很高兴它有效，但是我担心在我的页面上使用它——这会对我使用谷歌蜘蛛产生任何严重影响（因为它们是背景图像而不是图像）。有什么我在这里明显遗漏的警告吗？

代码很简单：

**HTML：**

```
<!-- padding top equal to aspect ratio -->
<div style="padding-top:75%;width:100%;" id="image"></div> 
```

**CSS：**

```
html, body { margin: 0; padding: 0; }

#image {
  background-repeat: no-repeat;
  background-size:   100%;
  border: 1px solid #000;
}

@media screen and (max-width: 320px) { 
    body { width: 240px; margin: 0 auto; }
    #image { background-image: url('http://farm3.staticflickr.com/2747/5865212227_75ae8e0bec_n.jpg');
}}
@media screen and (max-width: 500px) {
    #image { background-image: url('http://farm3.staticflickr.com/2747/5865212227_75ae8e0bec.jpg');
}}
@media screen and (max-width: 640px) {
    #image { background-image: url('http://farm3.staticflickr.com/2747/5865212227_75ae8e0bec_z.jpg');
}}
@media screen and (min-width: 641px) {
    #image { background-image: url('http://farm3.staticflickr.com/2747/5865212227_75ae8e0bec_b.jpg');
}} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T04:49:19.287

将背景图像用于实际内容图像在语义上是不正确的。但是，响应式地设置背景图像的样式会更容易。这完全取决于您正在处理的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T05:11:34.193

小心使用背景图像作为您的内容照片。如果这些图像对内容至关重要，那么如果关闭 CSS（例如 RSS 阅读器），它们将不会被看到，并且屏幕阅读器的可用性也不会很好，因为它们没有替代文本。如果您想被搜索，也不要忘记 SEO 的替代文本。

但是，如果您的图像不是必需的并且仅仅是装饰，那么据我所知，使用背景图像没有问题。

# visual-studio - 是什么让这个 F# 在 VS2012 中这么慢？

> ID：14250824
> 
> 赞同：0
> 
> 时间：2013-01-10T04:26:41.033
> 
> 标签：visual-studio, f#

在 Visual Studio 2012 中，为什么这段代码在交互模式下执行得如此之快，而在作为控制台应用程序运行时却如此缓慢？我有一台速度很快的计算机，但在运行时功能完成之前我可以数到 4，甚至在交互式工作室窗口中也不能数到 1。

让我感到厌烦的另一部分是，当我为 Project Euler #4 测试其他人的 F# 代码时，它们都运行良好。所以这让我相信这段代码有一些不是最优的。（而且它也很整洁>：P）

```
let reverse(digits:string) = 
     digits.ToCharArray() |> Array.rev |> System.String.Concat    

let isPalindrome(number:int) =        
    let text = number.ToString()
    if text.Length % 2 = 0 then                        
        text = reverse(text)        
    else
        false

let palindromes(floor:int, ceiling:int) =     
    seq {
        for i1 = floor to ceiling do
            for i2 = floor to ceiling do
                let result = i1 * i2
                if isPalindrome result then
                    yield result 
    }

let run = 
    palindromes(100, 999)    
    |> Seq.max 
```

**概括**

为了后代，我将列出最有效的性能变化。

*   删除 Concat 并创建一个新字符串。
*   只保留最大的回文而不是收集所有回文
*   用计算反向替换字符串版本的反向

它仍然没有解释我原来的问题。但现在它是如此微不足道，很难说服自己再花时间在上面。我感谢大家的意见。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T08:14:22.943

*如果您在 Release 模式下编译项目（`Optimize code`打开选项），您几乎看不出在 F# Interactive 中运行程序和执行之间的区别。*

如果你读过其他人的版本，你可以看到`isPalindrome`可以直接对数字进行检查。但是，快速修复仍在使用`String`：

```
let reverse(digits:string) = 
     System.String (digits.ToCharArray() |> Array.rev) 
```

请注意，与 String 构造函数调用相比，字符串连接速度较慢。

正如@wsanville 所说，奇数长度也可能是回文数：

```
let isPalindrome(number:int) =        
    let text = number.ToString()
    text = reverse(text) 
```

在函数中，执行时间可以通过从以下开始`palindromes`迭代减少一半：`i2``i1`

```
let palindromes(floor:int, ceiling:int) =     
    seq {
        for i1 = floor to ceiling do
            for i2 = i1 to ceiling do
                let result = i1 * i2
                if isPalindrome result then
                    yield result 
    }

let run = 
    palindromes(100, 999)    
    |> Seq.max 
```

通过这些简单的优化，您的代码在我的机器上运行速度提高了 5 倍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T07:08:50.107

这个问题很老了，我以前也有同样的问题

F#（或任何 F# 应用程序）中的控制台应用程序在执行期间加载“Fsharp.Core.dll”文件，因此为了获得更快的 exe 文件，请执行以下操作。

1.）使用“发布”模式构建，（比如 Hello.exe）

2.) 使用 ILMERGE ( [http://www.microsoft.com/en-us/download/details.aspx?id=17630](http://www.microsoft.com/en-us/download/details.aspx?id=17630) )将文件“Fsharp.Core.dll”合并到您的 exe 文件中

- 打开命令提示符和 CD 到“发布文件夹”

ILMERGE Hello.exe Fsharp.Core.dll /out:Hello2.exe

尝试运行 Hello2.exe，并检查它是否加载更快。

# html - 没有位置的动态填充div上的图像叠加：绝对

> ID：14250830
> 
> 赞同：0
> 
> 时间：2013-01-10T04:27:06.267
> 
> 标签：html, css

我知道必须有办法做到这一点。这是我的问题。我动态填充了位于容器 div 内的 div。动态填充的 div 由图像传播，我将它们设置为，`display: inline`以便它们排列整齐。我似乎不能做的是在动态 div 上添加一个叠加层。以下是代码的概要：

```
<div id="container" style="width:800px">
   <div class="dynamic"><a href="#"><img src="" alt="" /></a></div>
   <div class="dynamic"><a href="#"><img src="" alt="" /></a></div>
   <div class="dynamic"><a href="#"><img src="" alt="" /></a></div>
</div> 
```

我有动态 div 使用背景图像设置样式，并且 url 和 img 是通过脚本传递的。我想做的是创建一个可以应用于这些 div 的叠加图像。使用`position:absolute`不起作用，因为它们需要在有序列表中流过页面。

这是一些代码：http: [//jsfiddle.net/Juccq/](http://jsfiddle.net/Juccq/)

如您所见，它并没有真正按预期工作。我希望每个 .dribbble-shots 排列整齐，然后让 .dribbble-shots-overlay 分别应用 png。该代码适用于一个实例，但是当它成倍增加时，它会中断。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:44:05.123

您仍然可以使用`position:absolute;`，您只需将 css 属性添加`pointer-events:none;`到叠加层，但请注意这在 IE 或 Opera 中不起作用。

[http://jsfiddle.net/5XqkP/](http://jsfiddle.net/5XqkP/)（也修复了一些 CSS）

或者你可以用一些 javascript 来尝试这样的事情：

[http://jsfiddle.net/jt8bh/](http://jsfiddle.net/jt8bh/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:34:33.213

您可以使用覆盖图像作为背景，并在 :hover 上将内嵌图像的不透明度降低到 0。内联图像将保留其位置，并且不会破坏布局，但覆盖（实际上是*底层*）图像将是可见的。

# c# - 如何从控制台应用程序读取浏览器的内容

> ID：14250831
> 
> 赞同：-1
> 
> 时间：2013-01-10T04:27:06.407
> 
> 标签：c#, console-application, ui-automation

我需要从 C# 中的控制台应用程序读取浏览器窗口的内容。

最好的方法是什么。

我正在尝试使用自动化 UI（通过捕获浏览器的进程并创建该进程的 AutomationElement），但因为我对这个概念很陌生。我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T05:52:44.390

我了解您要完成的工作，但还请注意，AutomationElement 仅适用于某些浏览器，而不是所有浏览器，其中 Opera 将首先被击落。

# android - ImageView 可以在 android min sdk 2.2 上工作，但当我改为 3.0 时就不行了？

> ID：14250835
> 
> 赞同：0
> 
> 时间：2013-01-10T04:27:13.450
> 
> 标签：android, json, android-compatibility, android-version, loadimage

我正在制作一个使用互联网数据的安卓应用程序。我在 min sdk 版本 2.2 上开发，但现在我将其更改为 3.0。我的问题是现在某些组件不起作用。我的猜测是 2.2 版中的某些代码可能会在 3.0 版中被弃用。但我不知道该怎么做才能让它发挥作用。

例如，我的 ImageView 在 2.2 中工作。但在 3.0 中不是。

```
 //******satellite url
    private void satellite() {
        // TODO Auto-generated method stub
        ImageView imgView =(ImageView)findViewById(R.id.satellite);
        Drawable drawable = LoadImageFromWeb("http://www.pagasa.dost.gov.ph/wb/sat_images/satellite.gif");
        imgView.setImageDrawable(drawable);

    } 
```

另一个是我的 json 解析器。它在 2.2 中也能完美运行，但在 3.0 中却不行

```
//json stuffs , setText on textViews in main menu
    private void jsonStuffs() {
        // TODO Auto-generated method stub
    //JSON PARSER & HOME PAGE TEXTVIEWS

        client = new DefaultHttpClient();
        //new Read().execute("id");
        //http client codes only no parser !!
        GetMethodEx test = new GetMethodEx();
        String returned;
        try {
            returned = test.getInternetData();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        try{
            String jsonStr = test.getInternetData(); //punta sa GetMethodEx
                JSONObject obj = new JSONObject(jsonStr);

                //find temperature sa JSON sa webpage
                String temperature = obj.getString("temperature");
                TextView tvTemp = (TextView)findViewById(R.id.temp);
                tvTemp.setText(temperature);

                //find sunrise sa JSON sa webpage
                String sunrise = obj.getString("sunrise");
                TextView tvSunrise = (TextView)findViewById(R.id.sunrise);
                tvSunrise.setText("Sunrise: " + sunrise);

                //find sunset sa JSON sa webpage
                String sunset = obj.getString("sunset");
                TextView tvSunset = (TextView)findViewById(R.id.sunset);
                tvSunset.setText("Sunset: " + sunset);

        }
        //catch (JSONException e) {
             // e.printStackTrace();
            //} 
        catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
    } 
```

我没有收到关于这个项目的任何错误。只是数据不显示，图像视图不显示等。

我希望有人能帮帮忙。提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T04:34:31.420

我认为原因是Android 3.0及以上，你需要做像http请求这样的网络操作，所有这些都在单独的线程中，然后是UI线程。您直接在 UI 线程中使用代码，因此它在 HoneyComb 下工作。因此，您需要将 Web 请求放在单独的线程中，然后是 UI。`AsyncTask`是一个不错的选择。

有关更多详细信息，[请查看此链接。](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)

# c# - 实体框架中的通用存储库模式

> ID：14250841
> 
> 赞同：2
> 
> 时间：2013-01-10T04:27:47.183
> 
> 标签：c#, entity-framework, repository-pattern

我是通用存储库模式的新手。我尝试创建一个示例来使用通用存储库添加、更新、删除和查找方法。找到我的示例代码，

通用存储库接口和类：

```
public interface IRepository<T> : IDisposable where T : class
{        
    IEnumerable<T> Find(Func<T, bool> predicate);
    void Add(T entity);
    void SaveChanges();
}

public class DataRepository<T> : IRepository<T> where T : class
{
    private ObjectContext _context;
    private IObjectSet<T> _objectSet;

    public DataRepository(ObjectContext context)
    {
       _context = context;
       _objectSet = _context.CreateObjectSet<T>();
    }
    public IEnumerable<T> Find(Func<T, bool> predicate)
    {
        return _objectSet.Where(predicate);
    }
    public void Add(T entity)
    {
       _objectSet.AddObject(entity);
    }
} 
```

我使用了这种方法，如下所示，

```
DataRepository<tblUser> _tblUser = new DataRepository<tblUser>(new SampleRepositoryEntities());
DataRepository<TestingTable> sampleRepository = new DataRepository<TestingTable>(new SampleRepositoryEntities());
public void GetRecords()
{
    var record1 = sampleRepository.Find(f => f.id == 1).FirstOrDefault();
    var record = _tblUser.Find(f => f.emailid == "karthik@abc.com").FirstOrDefault();
} 
```

我可以使用 Find 方法从 SampleRepositoryEntities 中的“TestingTable”表中找到记录。因为这个表的记录非常少，大约 10 条记录。

但是我试图从 tbluser 表中找到与电子邮件 ID 匹配的第一条记录，该表有超过 50,000 条记录，我无法得到结果，此时继续加载，也没有任何异常。我做错了什么..有人可以让我澄清一下吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T06:06:36.667

每当我使用 EF 实现通用存储库时，我都会使用`Expression<Func<T, bool>>`而不是`Func<T, bool>`谓词。

我认为您的情况是在应用谓词之前检索了所有 50,000 条记录。相反，只需改变

```
public IEnumerable<T> Find(Func<T, bool> predicate) 
```

至

```
public IEnumerable<T> Find(Expression<Func<T, bool>> predicate) 
```

看看这是否能提高性能。

**编辑：**

为了扩展@ashutoshrina 的观点，我决定测试这两种方法以查看生成的 SQL。使用良好的旧 Northwind 数据库，我发现以下内容：

**查询`Where(Func< T, bool>)`**

```
using (ConsoleApplication2.NorthwindEntities entities =
    new ConsoleApplication2.NorthwindEntities())
{
    Func<Product, bool> f = (p => p.Discontinued);
    var result = entities.Products.Where(f).ToList();
} 
```

生成以下 SQL

```
SELECT  [Extent1].[ProductID] AS [ProductID],
    [Extent1].[ProductName] AS [ProductName],
    [Extent1].[SupplierID] AS [SupplierID],
    [Extent1].[CategoryID] AS [CategoryID], 
    [Extent1].[QuantityPerUnit] AS [QuantityPerUnit],
    [Extent1].[UnitPrice] AS [UnitPrice],
    [Extent1].[UnitsInStock] AS [UnitsInStock],
    [Extent1].[UnitsOnOrder] AS [UnitsOnOrder],
    [Extent1].[ReorderLevel] AS [ReorderLevel],
    [Extent1].[Discontinued] AS [Discontinued]
    FROM [dbo].[Products] AS [Extent1] 
```

**查询`Where(Expression<Func< T, bool>>)`**

```
using (ConsoleApplication2.NorthwindEntities entities =
    new ConsoleApplication2.NorthwindEntities())
{
    Expression<Func<Product, bool>> f2 = (p => p.Discontinued);
    var result2 = entities.Products.Where(f2).ToList();
} 
```

生成以下 SQL：

```
SELECT  [Extent1].[ProductID] AS [ProductID],
    [Extent1].[ProductName] AS [ProductName],
    [Extent1].[SupplierID] AS [SupplierID],
    [Extent1].[CategoryID] AS [CategoryID],
    [Extent1].[QuantityPerUnit] AS [QuantityPerUnit],
    [Extent1].[UnitPrice] AS [UnitPrice],
    [Extent1].[UnitsInStock] AS [UnitsInStock],
    [Extent1].[UnitsOnOrder] AS [UnitsOnOrder],
    [Extent1].[ReorderLevel] AS [ReorderLevel],
    [Extent1].[Discontinued] AS [Discontinued]
    FROM [dbo].[Products] AS [Extent1] 
    WHERE [Extent1].[Discontinued] = 1 
```

这表明使用该`Expression<Func<T, bool>>`方法生成的查询将谓词考虑在内，从而让 SQL Server 完成更多工作，这往往会解释您在使用`Func<T, bool>`.

# iis-7 - Web 应用程序的 URL 重写错误

> ID：14250842
> 
> 赞同：8
> 
> 时间：2013-01-10T04:27:51.107
> 
> 标签：iis-7, web-config, url-rewrite-module

我在 Windows Server 2008 R2 上使用 IIS7 运行 ASP.NET 4.0 网站。

该站点在主域（~/site1、~/site2、~/site3 等）下有许多 Web 应用程序。每个 Web 应用程序都是同一网站源文件夹 (D:\Websites\MySite) 的一个实例，因此您可以通过以下任一 URL 访问同一网站：

www.mydomain.com

www.mydomain.com/site1

www.mydomain.com/site2

www.mydomain.com/site3

每次都返回相同的网站，但内容略有不同，具体取决于调用的特定 URL。

几个月来一切都运行良好，直到我被要求使用 URL Rewrite 添加一些 SEO 优化。我添加的每个 URL 重写规则都会产生以下错误：

HTTP 错误 500.52 - URL 重写模块错误。由于发生内部服务器错误，无法显示该页面。

配置错误：无法添加类型为“规则”且唯一键属性“名称”设置为“AddTrailingSlashRule1”的重复集合条目

我已经阅读了 web.config 文件中围绕 <system.webServer> configSection 的其他地方：

```
<location path="." inheritInChildApplications="false"> 
```

将解决这个问题。

但是，虽然它阻止了错误消息的出现，但它也阻止了 URL 重写规则在任何 Web 应用程序（~/site1、~/site2、~/site3）中的工作。

如何让 URL 重写模块与 Web 应用程序一起使用？

谢谢你尽你所能的帮助。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-11T20:14:51.817

添加清除以防止子站点上的重复错误。

```
 <rules>
    <clear />
    <rule name="Redirect rule for /maps">
      ....
    </rule>
 </rules> 
```

# python - 将 numpy ndarray 添加到稀疏矩阵

> ID：14250847
> 
> 赞同：0
> 
> 时间：2013-01-10T04:28:32.837
> 
> 标签：python, numpy, sparse-matrix

我正在尝试将一个 numpy ndarray 添加到一个稀疏矩阵中，但我没有成功。我想知道是否有办法做到这一点，而无需将我的稀疏矩阵转换为密集矩阵。

另一个问题是是否可以添加两个稀疏矩阵。

```
 x = np.dot(aSparseMatrix, weights)
 y = x + bias 
```

其中 x 是我的稀疏矩阵，bias 是 numpy 数组。我目前得到的错误是：

```
NotImplementedError: adding a scalar to a CSC or CSR matrix is not supported

aSparseMatrix.shape (1, 10063)

weights.shape  (10063L, 2L)

bias.shape  (2L,) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T13:23:12.300

有不同种类的 scipy.sparse 矩阵： csr_matrix 对矩阵代数来说很快但更新很慢， coo_matrix 对代数来说很慢/更新很快。它们在[scipy.org/SciPyPackages/Sparse](http://www.scipy.org/SciPyPackages/Sparse)中进行了描述。

如果一个稀疏矩阵是 99% 0，那么`sparsematrix + 1`99% 就是密集的。
例如，您可以手动将其扩展
`y = dot( x + bias, npvec )`
到以后使用的`dot( x, npvec ) + bias * npvec`
任何地方`y`——可能适用于短代码，但没有乐趣。

我强烈推荐[IPython](http://ipython.org)进行尝试：

```
# add some combinations of scipy.sparse matrices + numpy vecs
# see http://www.scipy.org/SciPyPackages/Sparse

from __future__ import division
import numpy as np
from scipy import sparse as sp

npvec = np.tile( [0,0,0,0,1.], 20 )
Acsr = sp.csr_matrix(npvec)
Acoo = Acsr.tocoo()

for A in (Acsr, Acoo, npvec):
    print "\n%s" % type(A)
    for B in (Acsr, Acoo, npvec):
        print "+ %s = " % type(B) ,
        try:
            AplusB = A + B
            print type(AplusB)
        except StandardError, errmsg:
            print "Error", errmsg 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T05:07:12.797

代替 numpy 点积，使用简单的 * 积。Python 将广播并获得正确的结果。

加法不起作用，因为通过 numpy 点积，结果矩阵的大小与预期不匹配，因此无法在具有不同形状的两个矩阵之间进行加法。

# javascript - 将子菜单定位在相关父菜单下

> ID：14250850
> 
> 赞同：0
> 
> 时间：2013-01-10T04:29:01.997
> 
> 标签：javascript, jquery, css, navigation

我在水平列表中有一个菜单，下面有垂直子菜单。`<ul>`我有一个简单的 JQuery 脚本，当父母悬停时显示孩子：

```
$('#menulist li').hover(
function() {
  $(this).children('ul').stop().fadeIn(200);
},
function () {
    $(this).children('ul').stop().fadeOut(200);
  }
); 
```

我的问题是孩子 ul 没有将自己定位在各自的父列表项下。

没有为每个子 UL 硬编码一个剩余边距，有没有人知道解决这个问题的方法？

在这里重新提出问题：http: [//jsfiddle.net/MeltingDog/S8smw/5/](http://jsfiddle.net/MeltingDog/S8smw/5/)

CSS：

```
#menulist ul li {
  display: inline;
  list-style-type: none;
  padding-right: 10px; 
}

#menulist ul li ul{
    display:none;
    background-color:#FFF;
    padding: 10px;
    position: absolute;
    z-index: 100;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T04:51:21.417

添加`position:relative`到 parent `li`，如下所示，也给 child 一些偏移量`ul`：

```
#menulist ul li {position:relative;}
#menulist ul li ul{top:30px;left:0;} 
```

# django - 资源树中的累积计数？

> ID：14250851
> 
> 赞同：1
> 
> 时间：2013-01-10T04:29:05.713
> 
> 标签：django, django-mptt

使用[`django-mppt`](https://github.com/django-mptt/django-mptt)我想浏览我的类别层次结构，显示与它的任何子项中的当前类别相关的对象数量。

[`drill_down_for_node`](http://django-mptt.github.com/django-mptt/templates.html#examples)与所示示例非常相似，但仅限于当前节点的子节点...

最佳的将是

```
{% recursetree obj.get_children cumulative count model.Foreignkey.category in o_count%}
<li>
    <h2><a href="{{ node.get_absolute_url }}">{{ node }}</a></h2>
    {% if not node.is_leaf_node %}
    <ul class="children">
        <a href="{{ children.get_absolute_url }}">{{ children }} ({{o_count}})</a>
    </ul>
    {% endif %}
</li>
{% endrecursetree %} 
```

任何指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T23:13:27.350

在 TreeManager 上找到了一个函数：

[https://github.com/django-mptt/django-mptt/blob/master/mptt/managers.py#L250](https://github.com/django-mptt/django-mptt/blob/master/mptt/managers.py#L250)

将计数添加到视图中的查询集：

```
context['qs_with_related_count'] = model1.objects.add_related_count(
                                          obj.get_children(),
                                          model2, 
                                          'category',
                                          'o_count',
                                          True
                                   ) 
```

在模板中：

```
{% recursetree qs_with_related_count %}
    <li>
        <h2><a href="{{ node.get_absolute_url }}">{{ node }} ({{ node.o_count }})</a></h2>
        {% if not node.is_leaf_node %}
           <ul class="children">
               {{ children }}
           </ul>
        {% endif %}
    </li>
 {% endrecursetree %} 
```

不幸的是，我试图使用`ManyToManyField`as `rel_field`：

[https://github.com/django-mptt/django-mptt/issues/90](https://github.com/django-mptt/django-mptt/issues/90)

但看起来你很幸运（'类别'而不是'类别'）:)

# linq - 使用 LINQ 比存储过程有什么优势

> ID：14250855
> 
> 赞同：3
> 
> 时间：2013-01-10T04:29:35.533
> 
> 标签：linq, stored-procedures

> **可能重复：**
> [LINQ-to-SQL 与存储过程？](https://stackoverflow.com/questions/14530/linq-to-sql-vs-stored-procedures)
> [Linq over 存储过程](https://stackoverflow.com/questions/726908/linq-over-stored-procedures)

使用 LINQ 比存储过程有什么优势？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T04:33:18.700

有很多：

1.  **调试**- 调试存储过程确实非常困难，但由于 LINQ 是 .NET 的一部分，您可以使用 Visual Studio 的调试器来调试查询。

2.  **部署**- 使用存储过程，我们需要为存储过程提供额外的脚本，但使用 LINQ，所有内容都被编译到单个 DLL 中，因此部署变得容易。

3.  **类型安全**- LINQ 是类型安全的，因此查询错误在编译时进行类型检查。编译时遇到错误而不是运行时异常真是太好了！

4.  **内置安全性**——在 LINQ 之前我更喜欢存储过程的一个原因是它们强制使用参数，有助于减少 SQL 注入攻击。LINQ to SQL 已经参数化输入，这同样安全。

5.  **减少工作**- 在 LINQ 之前，我花了很多时间构建 DAL，但现在我的 DataContext 是 DAL。我也使用过 OPF，但现在我有 LINQ，它附带多个提供程序和许多其他 3rd 方提供程序，让我从之前的观点中受益。

**注意：**如果您所做的只是简单的 INSERT、UPDATE 和 DELETE 语句 LINQ 是可行的方法（在我看来）并且所有优化都是为您完成的，对于更复杂的工作我会说坚持使用存储过程。

有关更多详细信息，请参阅：[LINQ 与存储过程相比有什么优势？](http://social.msdn.microsoft.com/Forums/en-US/linqtosql/thread/019228c5-1435-4833-94f7-32a9a8e2a417/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T04:36:38.687

如果你谷歌，你会发现一些与你的问题类似的问题。

你可以看到这个[linq-to-sql-vs-stored-procedures](https://stackoverflow.com/questions/14530/linq-to-sql-vs-stored-procedures)，[linq-over-stored-procedures](https://stackoverflow.com/questions/726908/linq-over-stored-procedures)

# makefile - 错误制作：***没有规则制作目标`puff ....“

> ID：14250857
> 
> 赞同：0
> 
> 时间：2013-01-10T04:29:48.110
> 
> 标签：makefile

我收到错误`make: *** No rule to make target `puff'`

我的makefile代码是

```
puff: puff.c puff.h
    cc -DTEST -o puff puff.c

test: puff
    puff zeros.raw

clean:
    rm -f puff puff.o 
```

在我的目录中，我有文件`puff.c`, `puff.h`, `zeros.raw`, `makefile`. 请帮忙 - 我坚持下去。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-10T04:35:24.030

您应该使用制表符在下一行编写命令。与目标名称位于同一行的文件是依赖项。应该是这样的

```
puff: puff.c puff.h 
    CC -DTEST -o puff puff.c 
```

以及类似的其他规则。不要忘记在第二行放置一个制表符。这些不是空格，而是制表符。还有我认为的抄送，而不是抄送。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-10T04:46:53.827

删除“puff:”之后的所有字符。

```
puff: 
    gcc -DTEST -o puff puff.c

test: puff
    puff zeros.raw

clean:
    rm -f puff puff.o 
```

# android - Android strace 错误：“strace：2：语法错误：”&“意外”

> ID：14250859
> 
> 赞同：1
> 
> 时间：2013-01-10T04:30:30.997
> 
> 标签：android, linux, android-emulator, strace

`strace`我在模拟器的目录中使用了内置的`/system/xbin/`，它给了我错误的系统调用集，例如Android`msgget()`甚至`msgrecv()`不支持的系统调用。

`strace4.7`我从[Source Forge](http://sourceforge.net/projects/strace/)下载了一个新的，并按照[此链接](http://muzso.hu/2012/04/21/how-to-compile-strace-for-use-on-an-android-phone-running-an-arm-cpu)给出的说明进行构建。然后我重新安装后将其推送到`/system/xbin/`目录`adb`。现在当我跑

```
strace -p <myPID> 
```

它给了我这个错误：

```
trace: 2: Syntax error: "&" unexpected 
```

我在互联网上看过，但似乎没有人有同样的问题。任何我应该从哪里开始调试或任何其他建议的想法将不胜感激。

# unicode - 解码包含 Unicode 字符的 URL

> ID：14250860
> 
> 赞同：2
> 
> 时间：2013-01-10T04:30:36.407
> 
> 标签：unicode, python-2.7, escaping, cherrypy, mako

我在 Mako 模板中有以下代码：

```
<a href="#" onclick='getCompanyHTML("${fund.investments[inv_name].name | u}"); return false;'>${inv_name}</a> 
```

这会将 url 转义应用于代表公司的对象的名称字符串。然后在 url 中使用生成的转义字符串。Mako 文档指出 url 编码是使用`urllib.quote_plus(string.encode('utf-8'))`.

在服务器上，我将公司名称部分接收到参数中`investment_name`：

```
def Investment(client, fund_name, investment_name, **kwargs):
    client          = urllib.unquote_plus(client)
    fund_name       = urllib.unquote_plus(fund_name)
    investment_name = urllib.unquote_plus(investment_name) 
```

然后，我使用 investment_name 作为键返回到模板中从中提取它的同一个字典。

这适用于所有标准情况，例如公司名称中的空格、斜杠和单引号。但是，如果公司名称包含 ascii 字符集之外的 unicode 字符，则会失败。

例如，公司名称“Eptisa Servicios de Ingeniería SL”的 url 呈现为“Eptisa+Servicios+de+Ingenier%C3%ADa+SL” 当该值返回服务器时，我正在反转 url 转义但是显然无法正确解码 unicode，因为我尝试将结果用作字典键会产生键错误。

我试过以这两种形式添加 unicode 解码，但没有运气：

```
 investment_name = urllib.unquote_plus(investment_name.decode('utf-8'))
    investment_name = urllib.unquote_plus(investment_name.encode('raw_unicode_escape').decode('utf-8')) 
```

任何人都可以建议我必须对“Eptisa+Servicios+de+Ingenier%C3%ADa+SL”做些什么才能将其变回“Eptisa Servicios de Ingeniería SL”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T05:04:39.790

以相反的顺序执行：首先取消引用然后`.decode('utf-8')`

不要混合字节和 Unicode 字符串。

### 例子

```
import urllib

q = "Eptisa+Servicios+de+Ingenier%C3%ADa+S.L."
b = urllib.unquote_plus(q)
u = b.decode("utf-8")
print u 
```

注意：`print u`可能会产生 UnicodeEncodeError。要解决这个问题：

```
print u.encode(character_encoding_your_console_understands) 
```

*或者*设置`PYTHONIOENCODING`环境变量。

在 Unix 上，您可以尝试`locale.getpreferredencoding()`作为字符编码，在 Windows 上查看输出`chcp`

# java - BlockPoolSliceScanner 池不会停止

> ID：14250861
> 
> 赞同：0
> 
> 时间：2013-01-10T04:30:39.577
> 
> 标签：java, hadoop, mapreduce, cloudera

当 Hadoop 数据节点启动时，BlockPoolSliceScanner 每 5 秒保持一次池化并且不会停止。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T04:05:30.590

此错误已通过[https://issues.apache.org/jira/browse/HDFS-3194](https://issues.apache.org/jira/browse/HDFS-3194)修复。您可以通过将集群升级到包含此补丁的 Hadoop 版本来解决该问题。

# django - 如何重定向登录页面并检查 Django userena 中的登录会话

> ID：14250865
> 
> 赞同：0
> 
> 时间：2013-01-10T04:31:58.013
> 
> 标签：django

我是 django 和 userena 的新手。我已经实现了 django userena 和运行良好的登录页面。目前，成功登录后，用户将被重定向到个人资料页面。我想改变这一点并做两件事：1.成功登录后将用户重定向到主页而不是个人资料页面，第二个2.主页和所有其他页面应该检测用户会话并使用特定用户的会话变量自定义页面。请让我知道我应该如何实现这一目标。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:36:27.143

要重定向使用：

```
USERENA_SIGNIN_REDIRECT_URL = 'your_url' 
```

用户应该始终可用，您可以在视图中执行 self.request.user.is_authenticated() 或模板中的 {{ user.is_authenticated }} 之类的操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-31T10:27:14.770

这就是我如何检查用户是否已登录。

```
#views.py
from userena.views import signup, signin

def sign_up(request):
    #if user is authenticated, redirect to user's profile page
    #otherwise use userena signup view, with my own form,SignupFormExtra, instead of userena's

    if request.user.is_authenticated():
        username = request.user.username
        return HttpResponseRedirect('/accounts/'+username)
    else:
        return signup(request,signup_form=SignupFormExtra)

def sign_in(request):
    if request.user.is_authenticated():
        username = request.user.username
        return HttpResponseRedirect('/accounts/'+username)
    else:
        return signin(request) 
```

在我的 urls.py 我有

```
url(r'^accounts/signup/$', 'accounts.views.sign_up'),
url(r'^accounts/signin/$', 'accounts.views.sign_in'), 
```

# python - Python WebSocket 解码消息

> ID：14250867
> 
> 赞同：1
> 
> 时间：2013-01-10T04:32:18.107
> 
> 标签：python, sockets, websocket

因此，我出于自己的目的在 Python 中制作了一个 WebSocket 服务器，我需要对从网络接收到的数据进行解密。都是些乱七八糟的东西，谁能帮我弄清楚这是什么意思？

```
while True:
    data = self.socket.recv(1024)
    print bytes(data) 
```

这是我当前的代码，虽然它只是返回一些奇怪的字符。你怎么把它变成普通文本？我已经阅读了关于它的另一个主题，但答案没有帮助（特定于他奇怪的 PHP 东西）并且链接已经死了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T05:01:55.177

如果你想实现一个 WebSocket 服务器，你应该详细研究[WebSocket RFC](https://www.rfc-editor.org/rfc/rfc6455)。特别是，您希望查看描述从客户端到服务器的初始请求和服务器必须发送的响应的[第 4](https://www.rfc-editor.org/rfc/rfc6455#section-4)节，以及描述进出客户端的各个数据包的编码方式的[第 5 节。](https://www.rfc-editor.org/rfc/rfc6455#section-5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T04:59:52.957

默认 websockets 使用 base64 编码，所以：

```
import base64
print base64.decodestring(message_from_socket) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:37:59.343

打印字节（data.decode（））

也许这可能有效？对不起，我第一次在这里回答。而且我知道我个人必须在发送数据之前对其进行编码，然后在数据到达时对其进行解码。

# android - 如何解决错误：预期：/br 读取：div？

> ID：14250870
> 
> 赞同：0
> 
> 时间：2013-01-10T04:33:14.357
> 
> 标签：android, xml, parsing

我正在使用以下代码进行 XML 解析：

```
public void getfile(String url) {
    try{
        String URL = url;
        ALL_URL = new ArrayList<String>();
        XMLParser parser = new XMLParser();

        String xml = parser.getXmlFromUrl(URL);
        Document doc = parser.getDomElement(xml);

        Log.i("URLis: ", url);

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);

        for (int i = 0; i < nl.getLength(); i++) {
            Element e = (Element) nl.item(i);
            Log.i("valueis " , e.getAttribute("src").trim());
            String value = base + e.getAttribute("src").trim();
            ALL_URL.add(value);         
        }
    } catch(Exception ex) { }
} 
```

它曾经工作，但我不知道发生了什么。

日志猫：

```
01-10 13:01:30.206: E/Error:(8632): expected: /br read: div (position:END_TAG </div>@13:7 in java.io.StringReader@44ededa0) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T05:15:02.940

您的 xml 文件中有错误，文件格式不正确。它在 a 中包含一个不平衡的`<br>`标签`<div>`。解析器在看到`<div>`.

# asp.net - IE7 css 样式应用不一致

> ID：14250872
> 
> 赞同：1
> 
> 时间：2013-01-10T04:33:21.313
> 
> 标签：asp.net, html, css, internet-explorer

如果之前有人问过这个问题，我深表歉意。我对 CSS 和 Web 开发比较陌生。我正在开发一个必须针对 IE7 的网络应用程序。对于我的一生，我无法弄清楚为什么在“作业”页面上无序列表被格式化为一种方式，而在“员工数据”页面上它根本没有被格式化。两个页面都使用相同的样式表。我只在 IE7 和 IE8 中遇到这个问题，较新的版本可以正常工作。

这是该网站的链接

[http://www.j-holmes.net/](http://www.j-holmes.net/)

再次，如果之前有人问过这个问题，我深表歉意。我想不出更多的搜索条件来谷歌搜索这个答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:54:52.037

看起来您的 ul 元素嵌套在 nav 元素中，但在 EmployeeData.aspx 页面上，nav 元素似乎已关闭，就像此处的链接图像一样：[http ://www.kruegerwebdesign.com/images/questions/关闭导航.png](http://www.kruegerwebdesign.com/images/questions/closednav.png)

只需确保 nav 元素已打开并包含您的无序列表，并且它的样式应该相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T04:55:43.287

IE 7 不支持 <nav> 您可以替换为 div：nav ul li a

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T04:57:54.917

我不确定为什么，但该`nav`元素在员工数据页面上不起作用。浏览器认为`nav`元素之前有一个元素，`menu`元素之后有一个元素，而不是元素周围的一个`menu`元素。由于 CSS 依赖于`menu`元素中的`nav`元素，因此它不适用。

我在 HTML 代码中看不到任何错误，但可能有一些错误使浏览器无法正确解析代码。

另一个可能的原因可能是您使用的是 IE7 无法理解的 HTML5 特定元素。它似乎在某些页面中仍然有效，但它是一个可能使浏览器对标记错误更敏感的因素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T01:15:17.867

如果问题是 HTML5 标记，例如在 IE7 浏览器中不起作用，我发现这个文件很有用。它为老式浏览器翻译 HTML5：[http](http://code.google.com/p/html5shiv/) ://code.google.com/p/html5shiv/这当然值得一试。

# php - 一切的PHP全局变量？

> ID：14250874
> 
> 赞同：4
> 
> 时间：2013-01-10T04:33:35.887
> 
> 标签：php, performance, global-variables, scope, global

> **可能重复：**
> [注册表设计模式……好还是坏？](https://stackoverflow.com/questions/1151341/registry-design-pattern-good-or-bad)

我正在开发一个使用 PHP 的游戏脚本，并以类似于我构建许多网站的方式来处理它。我有一个习惯，即声明一个变量，它是一个 stdClass，它包含许多其他对执行很重要的变量。然后，如果我需要函数内部的某些东西（如果它没有传入参数），我只需使用全局 $variable，在本例中为 $ar。

```
$ar = new stdClass;
$ar->i = new stdClass;
$ar->s = new stdClass;

$ar->i->root = "/home/user";

/* Directory where log files are to be stored. */
$ar->i->logs = "{$ar->i->root}/logs";

/* Directory where the banlist is. */
$ar->i->bl = "{$ar->i->root}/customize/settings/bannedaccounts.txt";

/* Directory where the silencelist is. */
$ar->i->sl = "{$ar->i->root}/customize/settings/silencedaccounts.txt";

/* How many points should be awarded for 1st place, 2nd place... etc. */
$ar->s->points = array(10, 7, 5, 4, 3, 2, 1, 1, 1, 1,1,1,1,1,1,1,1,1,1,1,1,1,1); 
```

因此，如果我要在函数中使用上述变量之一，我会这样处理它。

```
public function run() {
  global $ar;
  //do something with the variable..
} 
```

有人会建议不要这样做吗？使用单个变量并将其包含在许多函数中是一种避免的坏习惯吗？我知道创建只使用给定参数的函数是可取的，但我问的是 PHP 性能而不是编程清晰度。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:36:53.867

聚集在一起表示一个对象的数据元素应该是一个对象。如果你有不相关的东西，不要把它塞进同一个对象里。

如果您需要全局范围（通常不需要），您可以使用`$GLOBALS`. 但是，对于大多数项目，我建议您遵循 OOP 原则。至少，使用函数参数。

如果您有一个像`run()`这样的函数库需要这些变量（或者，甚至只是`run()`！），请拥有一个实用程序类，其中这些变量是该类的成员。

# opengl - glViewport、窗口大小和裁剪

> ID：14250879
> 
> 赞同：1
> 
> 时间：2013-01-10T04:34:26.003
> 
> 标签：opengl, opengl-es

我试图了解屏幕和 OpenGL 用来决定是否应该渲染图元的逻辑之间的关系，即它是否在屏幕上。

例如，假设您将视口设置为大于屏幕（没有理由这样做，但为了举例）。OpenGL 不“知道”屏幕大小，所以只要正交投影将它们放在视口内，它就会“绘制”屏幕外的点，对吗？

但是，如果我将顶点位置定义为由投影确定的视口之外，OpenGL 是否将其包含在渲染中？

```
 glViewport(0,0,100,100);
  ApplyOrtho(50,50); // custom ES 2.0 utility to apply 2D orthographic projection 
```

现在位置顶点`(75,75)`不会被 OpenGL 渲染，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T04:59:20.580

> OpenGL 用于决定是否应渲染图元的逻辑

OpenGL 只使用一个逻辑来决定是否应该渲染图元。如果图元没有被剪裁/剔除，那么阻止它被光栅化的唯一方法是用户是否禁用*了所有*图元光栅化`glEnable(GL_RASTERIZER_DISCARD)`。否则，OpenGL 规范定义*所有*未作为裁剪的一部分剔除的图元都将被光栅化。

现在，它们是否会产生任何*可见的效果*是一个不同的问题。而且由于屏幕外的图元不能产生可见的效果（除非您正在使用图像加载/存储），因此符合要求的 OpenGL 实现可以随意剔除此类三角形。但更有可能的是，它将光栅化它们并简单地检查片段是否落在窗口之外。如果是这样，它将丢弃这些片段。

一般来说，这不应该是你应该关心的事情。只要设置一个合理的视口，你会没事的。

# perl - perl 聊天服务器中的错误

> ID：14250886
> 
> 赞同：2
> 
> 时间：2013-01-10T04:34:49.170
> 
> 标签：perl

我正在尝试使用 Perl 中的套接字创建一个聊天服务器。但是，当我运行服务器程序时，出现错误：

> “错误：（9）（错误的文件描述符）（6）（+句柄无效）在 Server.pl 第 21 行。”

当我运行客户端程序时，我收到错误：

> “无法创建套接字：无法建立连接，因为目标机器主动拒绝了它。”

这是服务器程序：

```
#!usr/bin/perl
#server.pl

use IO::Socket;
$| = 1;

print "Server Program\n";
my $lp = 12000;

my $server_socket, $new_client, $addr, $port;

$server_socket = new IO::Socket::INET (
LocalHost => '127.0.0.1',
LocalPort => $lp,
Proto => 'tcp',
Reuse => 1) or die "Cannot create the socket: $!\n";

print "Server started at port $lp \n";

while (1) {
    $new_client = $server_socket->accept() or die sprintf "ERROR:(%d)(%s)(%d)(+%s)", $!,$!,$^E,$^E;

$addr = $new_client->peerhost();
$port = $new_client->peerport();
print "Connected to client at $addr at port $port ";
while(<$new_client>) {
    print "Following is the text entered by client: \n";
    print "$_";
}
print "Client now disconnecting..\n";
close $new_client;
}

$server_socker->close(); 
```

这是客户：

```
#!usr/bin/perl
#client.pl

use IO::Socket;
$| = 1;

print "Client Program\n";

my $lp = 12000;

my $client_socket = new IO::Socket::INET (
PeerHost => '127.0.0.1',
PeerPort => $lp,
Proto => 'tcp',
Reuse => 1) or die "Cannot create the socket: $!\n";

print "Server connected at port $lp \n";
print "Enter the text to sent to the server: \n";
$user_input = <>;
chomp $user_input;
print $plient_socket;
$client_socket->send($user_input);
$client_socket->close(); 
```

我是新手，我没有找到我要去的地方。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T04:47:29.053

您试图接受来自未监听的套接字的连接。添加

```
Listen => SOMAXCONN, 
```

* * *

现在关于您的代码的题外话评论：

*   始终使用`use strict; use warnings;`. 它将突出显示您的代码的其他一些问题。

*   对 shebang 线上的相对路径没有任何意义。你缺少一个`/`.

*   在样式方面，在使用变量之前声明变量被认为是不好的形式。声明变量的全部目的是限制它们的范围，因此在程序顶部声明它们违背了目的。

*   `LocalHost => '127.0.0.1'`（最好写成`LocalHost => INADDR_LOOPBACK`）使您只能接收来自 127.0.0.1 的连接。这可能很有用，但我不知道你是否故意这样做。默认值 ,`INADDR_ANY`允许来自任何接口的连接。

# java - 为什么扩展不能与工具一起使用？

> ID：14250887
> 
> 赞同：0
> 
> 时间：2013-01-10T04:34:49.703
> 
> 标签：java, inheritance, multiple-inheritance

我知道它应该工作，但它没有。我有一个定义如下的类继承：

```
public class VisitManagementForm extends FormWithTitle implements Property.ValueChangeListener { 
```

现在它只允许覆盖扩展中的方法，它不会，甚至不允许我从 Property.ValueChangeListener 实现/覆盖方法。这是为什么？我用扩展交换了工具的位置，然后只有工具有效，扩展似乎不可见。

我最近将项目转向了 Maven，是否可能是 Maven 导致了这种疯狂？也许我需要指定一些东西来允许它？还是我只是在这里遗漏了什么？

Property.ValueChangeListener 应该像这样强制实现这个方法：

```
 @Override
public void valueChange(ValueChangeEvent event) {
    // TODO Auto-generated method stub

} 
```

但是现在我得到它需要覆盖或实现超类型方法的错误......

编辑：我在项目中使用 Java 1.6。

编辑：另外，如果我尝试实现其他东西（同时将扩展保留在那里），它建议我实现这些方法，但是如果我实现 ValueChangeListener 它并不建议我实现任何东西，但是如果你删除扩展并离开只是实现了ValueChangeListener，然后建议再次实现它的方法。但只要我保留扩展，我似乎得到了上面提到的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T04:43:54.427

> 请注意，您不能将 @Override 注释添加到在 Java 5 中实现接口的方法 - 它会产生错误。在 Java 6 中是允许的

[来源](https://stackoverflow.com/questions/212614/should-a-method-that-implements-an-interface-method-be-annotated-with-override)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T04:42:01.657

你正在做的是*非法的多重继承*。[从 Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#d5e9799)检查这个例子

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T04:51:52.663

如果这是在您切换到 maven 之前工作的代码，原因可能是 maven 编译器插件默认将源版本设置为`1.5`，这意味着，正如另一个答案中已经提到的，您不能`@Override`用于接口方法。

# java - Flex 应用程序无法解析 Web 服务返回的 xml

> ID：14250888
> 
> 赞同：2
> 
> 时间：2013-01-10T04:35:02.963
> 
> 标签：java, web-services, apache-flex, soap, flash-builder4.5

我的 Flex 应用程序正确调用了 Web 服务，但它没有填充下拉框。

运行应用程序后，下拉框为空。

我的弹性代码如下

```
<fx:Script>

    <![CDATA[
        import mx.controls.Alert;
        import mx.events.FlexEvent;

        protected function  
                    dropDownList2_creationCompleteHandler(event:FlexEvent):void
        {
            mycustomersResult2.token = hellos.mycustomers();
        }

    ]]> 
</fx:Script>

    <fx:Declarations>

    <hellos:Hellos id="hellos" fault="Alert.show(event.fault.faultString + '\n' 
             + event.fault.faultDetail)"
             showBusyCursor="true"/>

    <s:CallResponder id="mycustomersResult2"/>

</fx:Declarations>

 <s:FormItem label="Label">
  <s:DropDownList id="dropDownList2"
       creationComplete="dropDownList2_creationCompleteHandler(event)"
       labelField="age">
       <s:AsyncListView list="{mycustomersResult2.lastResult}"/>
  </s:DropDownList>
  </s:FormItem> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T09:45:24.937

调试时不需要使用服务器/网络监视器。

只需创建一个临时`const`保存您的 XML 代码并使用它：

```
/*private static*/ const MY_XML:XML =
<soapenv:Envelope 
  xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
  xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
 <soapenv:Body>
    <mycustomersResponse xmlns="http://Services.com">
      <mycustomersReturn>
          <age>28</age>
          <name>Jack</name>
      </mycustomersReturn>
      <mycustomersReturn>
          <age>29</age>
          <name>Ben</name>
      </mycustomersReturn>
   </mycustomersResponse>
 </soapenv:Body>
</soapenv:Envelope>; 
```

（是的，不要使用上面的任何引号）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T06:37:27.060

你能在调试模式下使用监视表达式检查这一行吗？

```
mycustomersResult2.lastResult.mycustomersResponse 
```

确保您的 lastResult 应该具有 mycustomersResponse 属性。

谢谢， 迪拉吉

# eclipse - 是否可以在多台计算机之间同步 Eclipse 插件？

> ID：14250894
> 
> 赞同：1
> 
> 时间：2013-01-10T04:35:48.580
> 
> 标签：eclipse, synchronization, sync

我一直在尝试为 Eclipse 设置插件的自动同步，但到目前为止我还没有运气。有没有办法在跨不同操作系统（如 Mac、Windows 和 Linux）的多个 Eclipse 安装之间自动同步 Eclipse 插件（如 EGit）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:45:18.837

我认为 Eclipse Sync 插件应该这样做。它可以使用 Dropbox 或本地文件夹来同步插件。 [http://marketplace.eclipse.org/content/eclipse-sync](http://marketplace.eclipse.org/content/eclipse-sync)

不过一年没更新了。

# javascript - jQuery动画失败

> ID：14250895
> 
> 赞同：0
> 
> 时间：2013-01-10T04:35:58.000
> 
> 标签：javascript, jquery, html, jquery-animate

加载消息的动画由 JQuery 完成。当页面即将被重定向到另一个页面时，会显示加载消息。这里动画的作用是增加`DIV`元素的宽度。
`$('#loading').css({"width:":value});`

上面，'value' 通过 增加`setInnterval()`，我的问题是，当页面要重定向到另一个页面时（一段时间为 4 ,5 秒），动画不会发生。任何人都让我知道为什么会发生这种情况以及如何避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:43:29.603

为什么不使用内置的 jQuery animate 而不是您自己的`setInterval`？

```
$('#loading').animate({ width: finalValue }); 
```

你只需要告诉它你想要的最终宽度是多少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T04:47:51.477

您需要显示代码的更多细节，基本上重定向可能发生在动画之前，您可以观看该值，然后当该值达到最大值时，进行重定向。

```
var value = 0;
var timer = setInterval(function(){
    if(value >= someValue){
        clearInterval(timer);
        location.href = 'someURL';
    }else{
        $('#loading').css('width', value++);
    }
}); 
```

还没有测试。

# c - 使用 scanf 从标准输入获取任意长度的输入

> ID：14250896
> 
> 赞同：1
> 
> 时间：2013-01-10T04:36:12.247
> 
> 标签：c, stdin, scanf

因此，在 CI 中采用用户键盘输入的方法之一如下：

```
char buffer[LENGTH_KNOWN] = "";
scanf("%s",buffer); 
```

我想知道是否有任何方法可以获取任意长度的用户输入。我尝试了以下方法，但最终出现了段错误。

```
char* buffer = "";
scanf("%s",buffer);
printf("%s",buffer); 
```

然而，这似乎工作：

```
char* buffer = "TEST........keeps going....................."
scanf("%s",buffer);
printf("%s",buffer); 
```

任何人都可以解释为什么我会收到此错误，是否有任何简单的方法可以在不使用 malloc 和检查缓冲区溢出的情况下扫描任意用户输入？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T04:39:40.490

实际上两者都是错误的，因为您无法写入字符串文字（在您的两个示例中都`buffer`指向字符串文字）。

通过单个`scanf`. 您需要在循环中获取输入并不断添加到真实缓冲区。

> 是否有任何简单的方法可以在不使用 malloc 和检查缓冲区溢出的情况下扫描任意用户输入

使用现成的功能为您完成它。类似的东西`getline(3)`（不幸的是非标准）。

```
ssize_t getline (char **lineptr, size_t *n, FILE *stream) 
```

> 此函数从流中读取整行，将文本（包括换行符和终止空字符）存储在缓冲区中，并将缓冲区地址存储在`*lineptr`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T04:39:47.967

`char *buffer = "...";`是完全错误的。这不是您分配内存的方式，因为双引号中的内容是字符串文字并且它是只读的。您可以像这样分配内存：

```
char buffer[1024]; 
```

或动态使用 malloc：

```
char *buffer = malloc(1024);

/* .... */

free(buffer); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T05:05:15.827

```
 char* buffer = "";
 scanf("%s",buffer);
 printf("%s",buffer); 
```

在上面的代码中，您没有为缓冲区分配内存，因此为缓冲区分配内存并将值读入缓冲区。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T05:21:37.063

你永远不知道你可能会读取多少字节，因此会相应地分配内存。所以我想你需要在循环中获取输入并添加到缓冲区中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T06:23:30.767

```
char* buffer;

buffer = malloc(sizeof(char) * 1024); // 1024 is max user input length, or use whatever you want..

scanf("%s", buffer);

buffer = realloc (buffer, strlen(buffer) + 1); // re-allocating the buffer according  to user input..( + 1 for counting NULL character)

printf("%s",buffer); 
```

# java - 只读类/方法

> ID：14250897
> 
> 赞同：2
> 
> 时间：2013-01-10T04:36:22.540
> 
> 标签：java, oop

在准备面试时，有人提到知道如何将 java 中的类/方法设为只读。我一直在做一些搜索，但没有找到任何真正具体的东西。

也许这个问题比我想象的更容易回答，但是在java中使类或方法只读的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T04:56:25.403

一种解决方案是创建`immutable`属于只读类的对象。您可以定义一个类，使类中的任何方法都不会导致对象的内部状态发生变化。在这样的类中，别名没有影响，因为您只能读取内部状态，因此如果许多代码正在读取同一个对象，则没有问题。

要创建不可变对象，请查看以下链接：

1.  [如何在 Java 中创建不可变对象](https://stackoverflow.com/questions/6305752/how-to-create-immutable-objects-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-27T19:00:09.190

类`Read-only`意味着，我们正在谈论“IMMUTABLE”的概念。

以下示例描述了相同的内容：

```
public class ImmutableString { 
    static String upcase(String s) { 
        return s.toUpperCase(); // here local variable s vanishes 
                // it return the value to a new String object 
    } 

    public static void main(String[] args) { 
        String s = new String("abc");  
        System.out.println(s); //abc 

        String s1 = upcase(s);  

        System.out.println(s1); //ABC 
        System.out.println(s); //abc 
    } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-27T18:02:25.270

以下代码将确保您的课程始终是只读的，但如果您发现任何漏洞，请在此处发布。

```
import java.io.Serializable;

final public class ImmutableClass implements Cloneable,Serializable {
    private static final long serialVersionUID = 6488148163144293060L;
    private static volatile ImmutableClass instance;

    private ImmutableClass() {
        // no-op
        System.out.println("instance created : " + this.hashCode());
    }

    /**
     * Lazy Instantiation
     * 
     * @return
     */
    public static ImmutableClass getInstance() {
        if (instance == null) {
            synchronized (ImmutableClass.class) {
                System.out.println("aquired lock");
                if (instance == null) {
                    instance = new ImmutableClass() {
                    };
                }
                System.out.println("released lock");
            }
        }
        return instance;
    }

    public Object readResolve() {
        System.out.println("readResolve()");
        return getInstance();
    }

    @Override
    public Object clone() throws CloneNotSupportedException {
        throw new CloneNotSupportedException();
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-21T03:03:31.757

假设您想要一个对象的只读版本，

情况 1：如果您的类包含不是指向任何其他对象的指针的字段，例如：

```
public class Person{
private String name;
//Getters n Setters
} 
```

在这种情况下，您可以返回此类的副本，编写一个接受 Person 的构造函数，任何想要获取 Person 对象的人都将拥有该对象的副本，因此任何 Setter 操作都不会影响原始对象（字符串是不可变的）

情况 2：如果您的对象包含指向另一个对象或列表或映射的指针

在这种情况下，使类实现一个只有只读方法（Getters）的接口，并且无论您在何处返回对象，都将其更改为返回此接口，因此客户端将只能访问只读方法

例如：

```
class Person implements ReadOnly{
String name;
.. assume pointers also in here
// Getter n Setters 

 public PersonReadOnly(){
  return this;
}
}

interface PersonReadOnly {
public String getName();
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-10T04:41:10.477

简单规则：没有任何公共字段和没有公共设置方法。

例如，请参见下面的类：

```
final class AReadOnlyClass
{
    private int anInt;

    public int GetAnInt()
    {
        return anInt;
    }
} 
```

# sql - 数据库中的通配符

> ID：14250901
> 
> 赞同：0
> 
> 时间：2013-01-10T04:36:43.310
> 
> 标签：sql, regex

任何人都有任何指示我如何将通配符存储在数据库中并查看字符串匹配的行？可以做到吗？

例如 DB 包含如下表：

![第一列中带有通配符的两列表](../Images/9b17590facc1854b2dd95be4edafaa42.png)

所以 john3136 应该得到他正常工资的 10 倍。fred3136 将得到他正常工资的一半。harry3136 可能会使应用程序崩溃，因为没有匹配的数据；-)

代码需要执行以下操作：

```
foreach(Employee e in all_employees) {
    SELECT Multiplier FROM PayScales WHERE
        //??? e.Name matches the PayScales.Name wildcard
} 
```

谢谢！

**编辑** 这是一个现实世界的问题：我有一个包含通配符的参数文件。该代码当前遍历员工，遍历参数文件以寻找匹配项-您可以看到我为什么要对其进行“数据库化” ;-)

通配符是可选的。该行可能会说“john3136”以仅匹配一名员工。（真正的应用程序实际上并不是员工，所以即使在这个简单的示例中看起来有点矫枉过正，它也确实有意义）

有一个选择：在开始之前我确实知道所有员工的姓名，因此我可以遍历它们并有效地扩展临时表中的通配符。（所以如果我在起始表中有 john3136*，它可能会根据员工列表扩展到 john3136、john31366 等）。我希望找到比这更好的方法，因为它需要更多的维护（例如，如果我们添加功能来添加员工，我们需要维护扩展的通配符表）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:28:06.450

```
SELECT * FROM payscales 
 WHERE e.Name 
  LIKE regexp_replace(name, E'^\\*|\\*$', '%', 'g'); 
```

不知道你用的是哪个数据库。上面的查询适用`postgresql`，只需用 替换尾随和前导通配符`%`，即`LIKE`通配符。

如果不存在通配符，则它必须匹配完整的字符串。

# android - 计算特定时间点的坐标

> ID：14250903
> 
> 赞同：0
> 
> 时间：2013-01-10T04:36:52.603
> 
> 标签：android, timestamp, coordinates

在android上绘图时，有什么方法可以找出特定时间戳的坐标？当用户在屏幕上绘制某些东西时，我想知道每 5 毫秒后的 x 和 y 坐标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T05:36:42.397

覆盖`onTouchEvent`并保存`x,y`从 object 获得的坐标，使用and类`MotionEvent`每 5 毫秒读取一次变量。`TimerTask``Timer`

# apache - 每天在日志文件中添加时间戳

> ID：14250906
> 
> 赞同：1
> 
> 时间：2013-01-10T04:37:00.263
> 
> 标签：apache, logging, log4j

我想每天在我的日志文件末尾添加时间戳。意味着每天的日志文件应该看起来像 test.2013-01-10.log

我的新 log.properties 文件如下。请帮助

```
log4j.rootLogger=info,myapp
log4j.appender.myapp=org.apache.log4j.DailyRollingFileAppender
log4j.appender.myapp.ImmediateFlush=true
log4j.appender.myapp.DatePattern='.'yyyy-MM-dd-HH
log4j.appender.myapp.layout.ConversionPattern=%d{yyyy-MM-dd}%m%n
log4j.appender.myapp.file=${catalina.base}/logs/myapplog/test
log4j.appender.myapp.DatePattern='_'yyyy-MM-dd
#log4j.appender.myapp.MaxFileSize=999MB
#log4j.appender.myapp.MaxBackupIndex=20
log4j.appender.myapp.layout=org.apache.log4j.PatternLayout
log4j.appender.consoleAppender = org.apache.log4j.ConsoleAppender
log4j.appender.consoleAppender.layout = org.apache.log4j.PatternLayout
log4j.appender.consoleAppender.layout.ConversionPattern=%m%n
log4j.logger=info,stdout,myapp
log4j.logger.org.hibernate=warn 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T05:10:34.437

尝试在您的配置中使用 DailyRollingFileAppender 而不是 RollingFileAppender

编辑 ：

尝试这个。它将生成 test.log 并且当您的计算机日期更改时，它将生成新的 test.log 和 test.logyyyy-mm-dd

log4j.properties：

```
log4j.rootLogger=info,A1
log4j.appender.A1=org.apache.log4j.DailyRollingFileAppender
log4j.appender.A1.ImmediateFlush=true
log4j.appender.A1.DatePattern='.'%d{yyyy-mm-dd}
log4j.appender.A1.layout.ConversionPattern=%d{yyyy-MM-dd}%m%n
log4j.appender.A1.File=c:/test.log
log4j.appender.A1.DatePattern='.'yyyy-MM-dd
#log4j.appender.A1.MaxFileSize=999MB
#log4j.appender.A1.MaxBackupIndex=20
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.consoleAppender = org.apache.log4j.ConsoleAppender
log4j.appender.consoleAppender.layout = org.apache.log4j.PatternLayout
log4j.appender.consoleAppender.layout.ConversionPattern=%m%n
log4j.logger=info,stdout,A1
log4j.logger.org.hibernate=warn 
```

代码 ：

```
import org.apache.log4j.Logger;

public class test {
         public static void main(String[] args) {
        Logger barlogger = Logger.getLogger(test.class);
            barlogger.info("test");
    }
} 
```

**更新**

如果要将日志更改为 .txt，请更改：

```
log4j.appender.A1.File=${catalina.base}/logs/test.log 
```

至：

```
log4j.appender.A1.File=${catalina.base}/logs/test.txt 
```

# c++ - 单个构造函数来创建具有不同数据类型的对象

> ID：14250909
> 
> 赞同：0
> 
> 时间：2013-01-10T04:38:07.697
> 
> 标签：c++, constructor

如何使用单个构造函数仅使用 C++ 创建以下对象：

```
A x;
A y("Hello", 7);
A z(3, "Hello", 2.4); 
```

A 类应该有一个构造函数来适应对象 x、y 和 z 的创建。上面指定的 3 行不允许更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T04:45:40.997

你不能（而不应该！）有一个构造函数来创建所有这些对象。
由于这个原因，您可以拥有可以采用不同参数的构造函数。

要问的重要问题是：
**您到底想达到什么目标？这有什么需要？**
也许您正试图以错误的方式解决问题。如果你能提供一些细节我们可以帮助你更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T04:46:35.380

呸！！！！

无论如何，如果我*被迫*（例如，假设这是一个*家庭作业*问题），我会使用某种变体：

```
class Variant {
  public:
    Variant();
    Variant( int );
    Variant( double );
    Variant( const char * );
    ~Variant();

  private:
    union data { ... };
    enum type { ... };
}; 
```

然后在我可怕的单个构造函数中使用它，以及允许空构造的默认参数。

```
A::A( Variant p1 = Variant(), Variant p2 = Variant(), Variant p3 = Variant() ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T04:49:58.960

与`c++11`：

```
#include <iostream>

struct A
{
    template<typename... Args> A(Args&&... x)
    {   
        std::cout << "construct A\n";
    }   
};

int main()
{
  A x;
  A y("Hello", 7); 
  A z(3, "Hello", 2.4);
  return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T05:01:56.323

在 C++03 中，您可以使用初始化函数：

```
class A
{
public:
    A(int x, const char* y, double z)
    {
        Init(x, y, z);
    }

    A(const char* y, int x)
    {
        Init(x, y);
    }

    A()
    {
        Init();
    }

private:
    void Init(int x = 0, const char* y = 0, double z = 0)
    {
    }
}; 
```

在 C++11 中，您可以使用[构造函数委托](http://en.wikipedia.org/wiki/C++11#Object_construction_improvement)：

```
class A
{
public:
    A(int x, const char* y, double z)
    {
    }

    A(const char* y, int x)
        : A(x, y, 0)
    {
    }

    A()
        : A(0, 0, 0)
    {
    }
}; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-05-10T22:25:44.777

为什么不只是：？

```
class A {
public:
    A(...) { }
};

// test:
int main() {
    A x;
    A y("Hello", 7);
    A z(3, "Hello", 2.4); 
} 
```

# iphone - 是否有在电子邮件、短信或其他“分享此应用”信息中使用的全球 iTunes URL？

> ID：14250914
> 
> 赞同：0
> 
> 时间：2013-01-10T04:38:56.600
> 
> 标签：iphone, ios, ios5, app-store, itunes

复制应用程序的 iTunes 链接包括我的祖国，但与香港人共享同一链接无法显示该应用程序。

这篇[SO 帖子](https://stackoverflow.com/questions/2408509/itunes-app-url-in-sms-content)展示了如何使用应用名称制作一个，但是如果我们想要引用应用 ID 而不是应用名称（因为我们可能会根据用户调查更改名称）怎么办？

用于全球共享的正确 iTunes 应用程序 URL 是什么？换句话说，无论用户的国家/地区如何，同一个 URL 都应该指向应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:48:59.397

用这个

```
http://phobos.apple.com/WebObjects/MZStore.woa/wa/viewSoftware?id=516500375&mt=8 
```

只需将 id 替换为您的应用程序 id 即可。

希望这可以帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:06:33.080

iTunes 不提供任何真正全球性的链接。

您可以使用免费的第三方服务，例如[GeoRiot](http://georiot.com)或[SmartURL](http://smarturl.it)，它们是专门为 iTunes 商店解决此问题而构建的。

只需将任何 iTunes 链接复制/粘贴到主页上的表格中，每个服务都会返回一个可在全球范围内使用的链接。

# forms - 在 wordpress 中编码时防止双重表单提交

> ID：14250915
> 
> 赞同：1
> 
> 时间：2013-01-10T04:39:01.710
> 
> 标签：forms, wordpress, double, submission

我目前正在使用 wordpress 3.5 并创建自己的页面模板。我在该模板中有自己的表单，当我单击提交按钮时，它已成功将数据保存到我的数据库中。不幸的是，当我在浏览器上单击 F5 或刷新按钮时，它会提示一个警报，提示如果我继续，将会提交双重表单。

通常我通过使用“提交后重定向到同一页面”技术来防止这种情况。但我不能使用 header("location: ") 进行重定向，因为它会生成错误：**警告：无法修改标头信息 - 标头已由**. 可能在其他 wordpress 文件上存在阻止重定向的回声。

有谁知道如何解决这个问题？或者有没有人知道除了重定向之外的其他技术来防止双重表单提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:05:19.877

我一直用 Javascript 来做这个：

```
<?php if(isset($_POST['submit_flag'])){ ?>

<script type='text/javascript'>
    window.location='URL';
</script>

<?php } ?> 
```

但是现在我考虑了一下，您可以轻松地在主题的某个位置创建另一个 PHP 页面，该页面不包含在主题的其余部分中，以处理表单数据并重新定向回您的表单。

我也大约 98% 确定您可以包含 $wpdb 而无需发送标头，只需要求“wp-blog-header.php”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T05:00:19.923

除了在您的模板文件中没有输出。那会是什么？查看您网站的源代码，它只是您告诉 Wordpress 创建的内容。

所以这是第一个：您可以在首先调用的模板文件的顶部使用 header("Location: ") 。通常是 header.php。

其次，您可以（并且通常应该）使用钩子来处理表单。例如：

```
add_action( 'init', function() { 
    // Handle stuff
} ); 
```

但也许有不同的钩子（我不记得有任何最佳实践）。这里和那里的教程会给你建议。在这种情况下，您肯定会在有任何输出之前调用 header("Location: " )。你的主题甚至还没有涉及。

# php - 需要在 linux(centos) 中托管 php-sqlsrv 应用程序的解决方案

> ID：14250924
> 
> 赞同：1
> 
> 时间：2013-01-10T04:41:04.967
> 
> 标签：php, sql-server, linux

我们在windows环境下开发了一个php web应用程序，可以远程联系sql server。现在，如果我们尝试在 linux 环境（Centos）中托管相同的应用程序，它不会通过我的 php 应用程序连接到 sql server。请找到以下配置..

**视窗：**

应用：PHP（版本：5.3.8）

服务器：Wamp 服务器

数据库：远程连接到 SQL Server 2008 R2

用于连接的代码：sqlsrv_connect（安装和连接的 Sql 驱动程序）

使用的 DLL：所有 php_sqlsrv_53_ts.dll 文件

还安装了 SQL Server 2012 本机客户端

现在我怎么能用上面（配置）提到的 php 应用程序在 centos 中托管我的网站？？？

**Linux（Centos）：**

甚至我们尝试在 centos 中使用免费的 TDS。这有助于远程联系 SQL 服务器，但我们的 php 应用程序不支持此功能。我知道 dll 文件和激活这些激活对于远程连接 sql server 和 php 应用程序起着重要作用。但是 DLL 文件不能用于 linux 环境。那么有什么建议可以解决这个问题吗？

任何建议/解决方案将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T12:03:14.953

对于 Microsoft 的 php_sqlsrv 驱动程序，不存在 Linux 驱动程序。从文档中：

> **支持的操作系统**：Windows 2000 Service Pack 4；Windows Server 2003 服务包 2；视窗服务器 2008；Windows 小型企业服务器 2003；Windows Vista 服务包 1；Windows XP 服务包 2

虽然驱动程序的源代码可用，但尚未移植到 Linux。您可以通过以下选择将 Web 应用程序移植到 Linux：

*   尝试使用 mssql 驱动程序（如果可能）
*   尝试使用 odbc 驱动程序（如果可能）
*   迁移到不同的数据库，如 mysql、postgres ...
*   自己将驱动程序移植到 Linux（硬）
*   使用 Windows ;)

另一种（**非常hacky**）方式（如果你真的需要这个）可能是：`wine`在CentOS上安装以及将php作为fcgi运行，其中解释器是一个wine应用程序。然后你可以使用 php_sqlsrv Windows dll。我没有对此进行测试，但它可能会起作用。

# python - Gtk 在网格中滚动窗口大小

> ID：14250927
> 
> 赞同：4
> 
> 时间：2013-01-10T04:41:17.237
> 
> 标签：python, gtk

在 python 中试验 Gtk+3。

尝试将滚动窗口容器内的“Gtk.TreeView”与输入框一起添加到网格窗口。问题是滚动区域很小，因此您几乎看不到任何滚动窗口/TreeView。这是输出的图像：

![在此处输入图像描述](../Images/63531e139df6635d1a032c2aa8b12659.png)

相关代码为：

```
scroll = Gtk.ScrolledWindow()    # Create scroll window
scroll.add(self.MatchTree)       # Adds the TreeView to the scroll container

grid = Gtk.Grid()                # Create grid container
self.add(Grid)                   # Add grid to window (self)
Grid.add(scroll)                 # Add scroll window to grid
Grid.attach_next_to(self.Entry, scroll, Gtk.PositionType.BOTTOM, 1, 1)  # Attach entry to bottom of grid. 
```

那么如何控制滚动区域的大小呢？

干杯，菲尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T06:53:48.970

您需要做的是设置 to的`hexpand`和`vexpand`属性。您可以像这样在对象创建上执行此操作：`GtkScrolledWindow``True`

```
scroll = Gtk.ScrolledWindow(hexpand=True, vexpand=True) 
```

如果您愿意，我建议您使用[Glade](http://glade.gnome.org/)来处理您的程序界面，因为您可以轻松访问所有小部件属性，因此解决此类问题会变得更加简单。

# android - 在 Android 上解析 RSS 和字符串提取

> ID：14250930
> 
> 赞同：1
> 
> 时间：2013-01-10T04:41:36.727
> 
> 标签：android, xml, string, xml-parsing

我正在将应用程序从 iOS 移植到 Android。该应用程序只是一个博客应用程序。我想让列表视图仅显示 XML 描述标记中的前 7 个字符，然后单击时显示 XML 链接标记中的网页。关于提取前 7 个字符并将其用于列表视图标题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T04:51:30.997

您可以将 TextView 上的最大文本长度设置为 7 个字符。您可以在 xml中使用[setInputFilter](http://developer.android.com/reference/android/widget/TextView.html#setFilters%28android.text.InputFilter%5b%5d%29)`android:maxLength`或在 java中设置它

# php - jquery数据表按字母顺序添加新行

> ID：14250933
> 
> 赞同：-2
> 
> 时间：2013-01-10T04:41:52.713
> 
> 标签：php, jquery, datatables

我目前在我的一个项目中使用 jQuery 数据表。我坚持的是能够动态添加新行，同时按字母顺序位置添加行。

我知道我需要使用 API 中的 fnadddata 来添加一行，但这个函数只会将新行添加到表的末尾。它不按字母顺序添加。因此，我编写了自己的代码来找到手动添加行的位置。

```
$(".rowList").each(function( ) {
    if( $(this).text( ).toLowerCase( ) > eObj.response.name.toLowerCase( ) ) {
        $(this).closest("tr").before( eObj.response.html ); // html is the new row from server
        return false;
    }
} 
```

上面的代码查找字母位置并相应地在表中创建一个新行。但是，当然，由于我没有使用 datatables fnaddData 函数，一旦添加了行并且当我单击表上的某个事件（例如：排序、搜索、过滤）时，新行就消失了。

由于数据表的 DOM 和缓存问题，我理解这一点。那么有没有办法让我处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:20:41.340

fnAddData 肯定会在运行后对表进行排序 - 例如： http: [//live.datatables.net/aceyed/edit#javascript,html](http://live.datatables.net/aceyed/edit#javascript,html)。请链接到显示问题的测试用例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T05:00:00.680

您不能使用 fnadddata 在末尾插入它，然后根据列的字母值对行进行排序吗？

# authentication - 向 Laravel 的 auth 用户添加更多信息

> ID：14250937
> 
> 赞同：2
> 
> 时间：2013-01-10T04:42:47.357
> 
> 标签：authentication, laravel

我是 Laravel 的新手，我正在尝试向从 Auth::user() 返回的用户变量添加更多信息

更详细地说，我与“特权”表存在多对多关系。顾名思义，该表拥有用户可以拥有的特定权限。在数据透视表中，我只保存了 user_id 和 privilege_id。我已经设置了必要的模型，如果我在之前的过滤器中执行此操作，一切正常：

```
$user = Auth::user(); 
$user->priviledges()->get(); 
```

现在，我真的很想避免每次我想查找权限时都查询，并且希望 Laravel 的 Auth 类包含权限信息，这样当我这样做时

```
$user = Auth::user(); 
```

我可以做一个

```
$user->privileges; 
```

获取用户拥有的所有权限的数组。

对最佳方法有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-11T13:03:57.777

上面答案的链接不起作用。但是，我在[这里](http://laravel.io/forum/02-26-2014-how-to-add-additional-data-in-auth)找到了另一个对我有用的解决方案，如下所示：

首先，我在自己的案例中创建了一个名为 EmailPref.php 的模型；

应用程序/模型/EmailPref.php

```
class EmailPref extends Eloquent {
      protected $table = 'email_pref';

      public function user()
      {
         return $this->belongsTo('User');
      }
} 
```

然后我像这样在 User 模型中创建了一个关系（在我自己的情况下）；

应用程序/模型/User.php

```
 public function emailPref()
    {
        return $this->hasOne('EmailPref');
    } 
```

我随后在我的应用程序中所需的任何地方引用它，如下所示：

```
 Auth::user()->emailPref; 
```

因此，我能够向 Auth 用户添加更多信息。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-10T07:22:22.090

我不是 Laravel 专业人士，但我认为这会解决你的问题：[http ://forums.laravel.io/viewtopic.php?id=1652](http://forums.laravel.io/viewtopic.php?id=1652)

# extjs - Extjs 4 将焦点放在数字字段上

> ID：14250947
> 
> 赞同：0
> 
> 时间：2013-01-10T04:43:39.397
> 
> 标签：extjs, extjs4, extjs-mvc

我的表单中有一个名为 cashPay 的数字字段，另一个字段名称是 totalPayable。现在，如果 cashPay 小于 totalPayable 我需要提醒一条消息并关注 cashPay 字段。但我无法做到。focus 方法适用于其他形式的文本字段，但在数字字段上它不适用于我。谁能帮我解决这个问题。下面是我的代码：

在我的视图页面中>>>

```
{
            xtype: 'numberfield',
            name: 'cashPay',
            id: 'cashPay',
            keyNavEnabled: false,
            mouseWheelEnabled: false,
            enableKeyEvents: true,
            allowBlank: false,
            hideTrigger: true,
            fieldLabel: 'Cash Pay',
            action: 'cashCalculation'
        } 
```

在我的控制器中>>>

```
Ext.Msg.alert("Warning !","Sorry Cash Pay is less than this month's installment. Please pay the right amount")
        Ext.getCmp('cashPay').focus(false, 1); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T08:28:41.920

焦点方法由 Ext.component 定义并继承自 Ext.component。因此，如果它适用于文本字段，它也应该适用于数字字段。它可能是别的东西。您可以尝试使用延迟多一点

```
numberfield.focus(undefined, 20); 
```

顺便说一句：如果您的数字字段在 Ext JS 表单中，我认为您不应该使用 Ext.getCmp。如果可以，请使用`up`和`down`方法从将事件触发到您的数字字段的组件中获取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T14:49:52.117

使用“显示”和回调：

```
Ext.Msg.show({
    title: 'Warning !',
    msg: "Sorry Cash Pay is less than this month's installment. Please pay the right amount",
    width: 300,
    buttons: Ext.Msg.OK,
    closable: false,
    fn: justAnotherFunc
});

justAnotherFunc: function() {
   Ext.getCmp('cashPay').focus(false, 1);
} 
```

警报是异步的，因此当您关闭警报消息时，该字段会获得焦点并自动失去焦点。

# java - ServiceName 未反映在 Web 服务中

> ID：14250956
> 
> 赞同：1
> 
> 时间：2013-01-10T04:45:07.530
> 
> 标签：java, web-services

我`serviceName`在我的网络服务中有`MYService`. 但在`wsdl`我没有得到这个名字。我还在`http://localhost:8080/rpc/soap/getResult?wsdl=Info.wsdl`

```
@WebService(portName="portname", serviceName = "MYService", targetNamespace="http://test.com/webservices")
@SOAPBinding(style = SOAPBinding.Style.RPC, use= SOAPBinding.Use.LITERAL, parameterStyle= SOAPBinding.ParameterStyle.WRAPPED)
public interface Info {

    ........
} 
```

有人可以告诉如何纠正它。

谢谢。

# android - 我怎样才能得到最近的地方（村庄或街道名称）

> ID：14250964
> 
> 赞同：0
> 
> 时间：2013-01-10T04:45:45.893
> 
> 标签：android, gps, geocoding, google-places-api, reverse-geocoding

在我的应用程序中，当用户插入数据时，我想捕获用户的确切位置。我试过很多方法。但他们都没有显示确切的位置。（我的意思是它们只显示国家和管理区域的详细信息。我使用了 getLocality 和 getFeatureName。如果在该纬度和经度上没有找到 Locality 或 Featurename，那么它将返回一个空值）。我的代码是

```
Geocoder coder=new Geocoder(MainActivity.mContext,Locale.getDefault());
    try
    {
        List<Address> listaddress=coder.getFromLocation(lat, lon, 1);
        Address obj=listaddress.get(0);
        String add=obj.getAddressLine(0);
        add = add+"\n"+obj.getLatitude();
        add = add+","+obj.getLongitude();
        add = add + "," + obj.getCountryName();
        add = add + "," + obj.getAdminArea();
        add = add + "\n" + obj.getPostalCode();//null
        add = add + "," + obj.getSubAdminArea();
        add = add +","+obj.getFeatureName();//null
        add = add+ "," +obj.getPremises();//null
        add = add + "\n" + obj.getLocality();//null
        add = add + "," + obj.getSubThoroughfare();//null
        add = add+ "," +obj.getSubLocality();//null
        add = add+"\n"+obj.getThoroughfare();

        Log.v("IGA", "Address" + add);
        //Toast.makeText(this, "Address=>" + add,Toast.LENGTH_SHORT).show();
        t.setText(" "+add);

    } 
```

所以我不知道如何解决它。但我有一个想法。我需要找到离我的确切纬度和经度值最近的地方，以便我可以使用那个地方。但我不知道如何找到最近的地方（最近的地方是指村庄或街道，而不是其他任何地方）。

此外，在 Android 手机中，有一个应用程序“Places”。它显示了关于我确切位置的正确区域。有没有可能使用应用程序“地点”来找到我的确切或最近的区域。（我需要最近的村庄或街道，而不是 subAdminArea（州）。如果是，请解释。

谁能帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T05:03:35.363

使用谷歌反向地理编码 api，您可以通过提供纬度和纬度值来获取您的实际街道地址。

[通过 Android 中的 GPS 接收器获取纬度和局域网](http://www.incurlybraces.com/gps-location-coordinates-android.html)

然后调用 google reverse geocoding api top fecth 实际街道地址：

```
 MapManager in = new MapManager(
                    "http://maps.google.com/maps/geo?output=xml&oe=utf-8&ll="
                            + lattitude                             + "%2C"
                            + lantitude                         + "&key=get-key-from-google-map-api");
            content = in.URLRequest();
            System.out.println("Addrss:"+in.parseMapData(content));

Class MapManager{
  String url ="";

  MapManager(String url){
         this.url = url;
  }

  public String parseMapData(String data) {
            String addr = "";
            try {
                InputStream in = new ByteArrayInputStream(data.getBytes());
                DocumentBuilder builder = DocumentBuilderFactory.newInstance()
                        .newDocumentBuilder();
                Document doc = builder.parse(in, null);
                NodeList address = doc.getElementsByTagName("address");
                addr = address.item(0).getTextContent();
            } catch (Throwable t) {
                Log.v("Exception", "Exception: " + t.toString());
            }
            return addr;
        }

     public String URLRequest() {

        httpclient = new DefaultHttpClient();
        try {
            httpget = new HttpGet(url);
            httpresponse = httpclient.execute(httpget);
            httpentity = httpresponse.getEntity();
            response = EntityUtils.toString(httpentity);
            response = response.trim();
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            IsServerConn = false;
            e.printStackTrace();
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (Exception e) {
            IsServerConn = false;
        }
        return response;

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T12:03:35.313

```
 private class MatchingNearByLocationTask extends
        AsyncTask<Void, Void, Void> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        // Showing progress dialog
        progressDialog = new ProgressDialog(getContext());
        progressDialog.setMessage("Loading...");
        progressDialog.setCancelable(true);
        progressDialog.show();

    }

    @Override
    protected Void doInBackground(Void... arg0) {

        jsonStr = getLocationInfo(latitude, longitude).toString(); // put longitude and      latitude value from which u want find nearer palce
        if (jsonStr != null) {
            Log.i("location--??", jsonStr);

            JSONObject jsonObj;
            try {
                jsonObj = new JSONObject(jsonStr);

                JSONObject responseJsonObject = jsonObj
                        .getJSONObject("response");

                JSONArray venues = responseJsonObject
                        .getJSONArray(("venues"));

                for (int index = 0; index < venues.length(); index++) {

                    locationObject = new NearByLocationObject();

                    String id = "", name = "", longitude = "", latitude = "";

                    JSONObject venuesJsonObj = venues.getJSONObject(index);

                    id = venuesJsonObj.getString("id");
                    name = venuesJsonObj.getString("name");

                    JSONObject latLngJsonObj = venuesJsonObj
                            .getJSONObject("location");

                    longitude = latLngJsonObj.getString("lng");
                    latitude = latLngJsonObj.getString("lat");

                    locationObject.setId(id);
                    locationObject.setNameOfLocation(name);
                    locationObject.setLocationOfLatitude(latitude);
                    locationObject.setLocationOfLongitude(longitude);

                    nearByLocationArrayList.add(locationObject);

                }

            } catch (JSONException e) {

                e.printStackTrace();
            }

        }

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        // Dismiss the progress dialog
        if (progressDialog.isShowing()) {
            progressDialog.dismiss();
        }

        adapter = new NearByLocationArrayAdapter(getContext(),
                R.layout.nearby_location_item, nearByLocationArrayList);
        nearByLocationListView.setAdapter(adapter);
    }

    @Override
    protected void onCancelled() {

        super.onCancelled();
        progressDialog.dismiss();

    }

}

private JSONObject getLocationInfo(double lat, double lng) {

    HttpGet httpGet = new HttpGet(
            "https://api.foursquare.com/v2/venues/search?ll="
                    + lat
                    + ","
                    + lng
                    + "&radius=100&oauth_token=TNFKWLITLCJYWPSLAXQNHCSDPHZ4IS5PWVDD45OI224JGFFM&v=20140407&intent=checkin");
    HttpClient client = new DefaultHttpClient();
    HttpResponse response;
    StringBuilder stringBuilder = new StringBuilder();

    try {
        response = client.execute(httpGet);
        HttpEntity entity = response.getEntity();
        InputStream stream = entity.getContent();
        int b;
        while ((b = stream.read()) != -1) {
            stringBuilder.append((char) b);
        }
    } catch (ClientProtocolException e) {
    } catch (IOException e) {
    }

    JSONObject jsonObject = new JSONObject();
    try {
        jsonObject = new JSONObject(stringBuilder.toString());
    } catch (JSONException e) {
        e.printStackTrace();
    }

    return jsonObject;
}

public class NearByLocationObject {

String id = "", nameOfLocation, locationOfLatitude, LocationOfLongitude;

public NearByLocationObject() {
    super();
    // TODO Auto-generated constructor stub
}

public NearByLocationObject(String id, String nameOfLocation,
        String locationOfLatitude, String locationOfLongitude) {
    super();
    this.id = id;
    this.nameOfLocation = nameOfLocation;
    this.locationOfLatitude = locationOfLatitude;
    LocationOfLongitude = locationOfLongitude;
}

public String getId() {
    return id;
}

public void setId(String id) {
    this.id = id;
}

public String getNameOfLocation() {
    return nameOfLocation;
}

public void setNameOfLocation(String nameOfLocation) {
    this.nameOfLocation = nameOfLocation;
}

public String getLocationOfLatitude() {
    return locationOfLatitude;
}

public void setLocationOfLatitude(String locationOfLatitude) {
    this.locationOfLatitude = locationOfLatitude;
}

public String getLocationOfLongitude() {
    return LocationOfLongitude;
}

public void setLocationOfLongitude(String locationOfLongitude) {
    LocationOfLongitude = locationOfLongitude;
} 
```

}

# android - 相对布局 - 右对齐 textview 中的数据

> ID：14250965
> 
> 赞同：0
> 
> 时间：2013-01-10T04:45:47.093
> 
> 标签：android, android-layout, textview

我正在使用以下 xml 在列表视图中生成一行。虽然我已经设置了`gravity`as`center_Vertical`和`right`. 仅`center_Vertical`应用但不应用“正确”重力。我什至在代码内部尝试过。“正确的”重力不起作用。请帮助我更正代码。提前致谢 ![在此处输入图像描述](../Images/0970b0212ff8413eb6699d540ddc2836.png)

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/tvTicketID"
        android:layout_width="wrap_content"
        android:layout_height="52dp"
        android:layout_centerVertical="true"  
        android:layout_alignParentLeft="true"  
        android:gravity="center_vertical|left"  
        android:text="Ticket ID"
        android:textSize="15dp" />

    <TextView
        android:id="@+id/tvCreationHour" 
        android:gravity="center_vertical|right" 
        android:layout_width="wrap_content"
        android:layout_height="52dp"
        android:layout_alignParentTop="true" 
        android:layout_marginLeft="40dp"
        android:layout_toRightOf="@+id/tvTicketID" 
        android:text="Hour" />

    <TextView
        android:id="@+id/tvTableNumber"
        android:gravity="center_vertical|right" 
        android:layout_width="wrap_content"
        android:layout_height="52dp"
        android:layout_alignParentTop="true" 
        android:layout_marginLeft="24dp"
        android:layout_toRightOf="@+id/tvCreationHour" 
        android:text="Table #" />

    <TextView
        android:id="@+id/tvAmount"
        android:gravity="center_vertical|right" 
        android:layout_width="wrap_content"
        android:layout_height="52dp"
        android:layout_alignParentTop="true"   
        android:layout_marginLeft="18dp"
        android:layout_toRightOf="@+id/tvTableNumber" 
        android:text="Amount" />

</RelativeLayout> 
```

我用上面的代码创建一行`xml`

```
holder.tvTicketID.setText(String.valueOf(ticket.getId())) ;   
holder.tvCreationHour.setText(String.valueOf(ticket.getCreationHour())) ; 
holder.tvTableNumber.setText(String.valueOf(ticket.getTableNumber())) ;  
holder.tvAmount.setText(String.valueOf(ticket.getTotalAmount()))  ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T04:47:55.543

尝试设置`android:layout_gravity="right"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T04:54:02.303

一般来说，`android:gravity="right"`不同于`android:layout_gravity="right"`.

第一个影响文本本身在视图中的位置，所以如果你希望它右对齐，那么`layout_width=`应该是`"fill_parent"`or `"match_parent"`。

第二个影响视图在其父视图内的位置，换句话说 - 在父视图内对齐对象本身（编辑框或文本视图）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T04:13:44.640

最后，我找到了答案。我已将 TEXTVIEW 中的 android:layout_width="wrap_content" 更改为 android:layout_width="30dp"。现在它起作用了..

# arduino - Arduino char[] 末尾的意外字符

> ID：14250966
> 
> 赞同：2
> 
> 时间：2013-01-10T04:46:03.943
> 
> 标签：arduino

我在 Arduino 草图中有 char[] 。代码：

```
int i = 0;

void setup(){
Serial.begin(9600);

}

void loop(){
  i++;
  Serial.println(i);
  char fff[8] = {'0','0','0','0','0','0','0','0'};
  Serial.println(fff);
  delay(200);
} 
```

听我看到的端口：

```
1
00000000²
2
00000000²
3
00000000²
4
00000000² 
```

...

如何在可打印字符末尾使用意外字符解决此问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T12:10:11.833

该`fff`字符串不是以空值结尾的，因此该`Serial.println()`函数不知道何时停止从内存中读取字符并将它们发送到串行端口。一旦在内存中找到第一个空字节，它就会停止 - 导致不可预测的行为。

要解决此问题，您需要在字符串末尾放置一个空字符（并确保已分配足够的内存来覆盖它）。在字符数组中，空字符可以编码为数字 ( `0`) 或使用转义序列 ( `'\0'`) 的字符。

因此，将 的定义更改`fff`为：

```
char fff[9] = { '0', '0', '0', '0', '0', '0', '0', '0', 0 }; 
```

或者：

```
char fff[9] = { '0', '0', '0', '0', '0', '0', '0', '0', '\0' }; 
```

# authentication - Google 联合登录/openId 重定向

> ID：14250968
> 
> 赞同：0
> 
> 时间：2013-01-10T04:46:12.217
> 
> 标签：authentication, openid

这是来自[谷歌联合登录描述](https://developers.google.com/accounts/docs/OpenID)

“一旦 Google 接受身份验证请求，用户将被重定向到 Google 身份验证页面。此时身份验证序列接管。身份验证成功后，Google 将用户重定向回原始请求的 openid.return_to 参数中指定的 URL 。”

我假设我的网络应用程序负责此处提到的重定向“到 Google 身份验证页面”？我看不到谷歌如何进行此重定向。如果我的 webapp 进行重定向，openid 请求参数如何发送到谷歌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T03:57:06.530

在阅读更多内容时，只有一次“[一旦 Google 接受身份验证请求](https://developers.google.com/accounts/docs/OpenID#Response)”（我假设请求方获得 200 http 状态），请求的 Web 应用程序现在添加已发布到 google 登录端点的相同参数到google 身份验证 url，然后将用户重定向到此 url

# linux - lftp 的记录位置

> ID：14250975
> 
> 赞同：3
> 
> 时间：2013-01-10T04:46:57.403
> 
> 标签：linux, bash, logging, lftp

使用 lftp 时，当 xfer:log 设置为“yes”时，它会将文件传输记录到 ~/.lftp/transfer_log。

当同时运行两个 lftp 实例时会发生什么？日志文件会混淆吗？

有没有办法改变日志文件的写入位置？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-04-06T08:55:50.403

当 lftp 的多个实例写入同一个日志文件时，它可能会混淆（因为当前的 lftp 4.7.1 不对日志文件使用文件锁定）。充其量这些行将被交错。

设置 xfer:log-file 出现在 lftp 版本 4.2.0 中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T15:33:07.667

我不知道第一个和第二个问题的答案，但是对于第三个问题：

```
set xfer:log-file "/path/to/your/file.log" 
```

# c++ - Consexpr 构造和静态成员不起作用

> ID：14250977
> 
> 赞同：1
> 
> 时间：2013-01-10T04:47:04.077
> 
> 标签：c++, c++11, static-methods, constexpr

考虑以下代码：

```
#include <iostream>
#include <type_traits>

template<typename Type>
class Test
{
    public:
        constexpr Test(const Type val) : _value(val) {}
        constexpr Type get() const {return _value;}
        static void test()
        {
            static constexpr Test<int> x(42);
            std::integral_constant<int, x.get()> i;
            std::cout<<i<<std::endl;
        }
    protected:
        Type _value;
};

int main(int argc, char *argv[])
{
    Test<double>::test();
    return 0;
} 
```

在 g++ 4.7.1 下，它返回错误：

```
main.cpp: In static member function ‘static void Test<Type>::test()’:
main.cpp:13:48: error: invalid use of ‘Test<Type>::get<int>’ to form a pointer-to-member-function
main.cpp:13:48: note:   a qualified-id is required
main.cpp:13:48: error: could not convert template argument ‘x.Test<Type>::get<int>()’ to ‘int’
main.cpp:13:51: error: invalid type in declaration before ‘;’ token 
```

我不明白这个问题：它是编译器错误还是真正的问题？如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:50:30.663

它看起来像一个[GCC 错误](http://liveworkspace.org/code/1pINqc%242)，clang 3.2[编译没有任何错误](http://liveworkspace.org/code/1pINqc%240)

# android-layout - Horizo ntalScrollView 不会滚动

> ID：14250979
> 
> 赞同：3
> 
> 时间：2013-01-10T04:47:14.397
> 
> 标签：android-layout

我在使用 Horizo​​ntalScrollView 时遇到问题，我已将子布局 (LinearLayout) 设置为 2000dp，但仍然不会滚动。我以编程方式设置内容。

这是我的活动布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".AktifitasUtama" >
    <HorizontalScrollView
        android:id="@+id/scroll_album_holder"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_margin="5dp"
        android:fillViewport="true">
        <LinearLayout
            android:id="@+id/album_holder"
            android:layout_width="2000dp"
            android:layout_height="wrap_content"
            android:orientation="horizontal"></LinearLayout>
    </HorizontalScrollView>
    <GridView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/thumbnail_holder"
        android:numColumns="auto_fit"
        android:gravity="center"
        android:columnWidth="180dp"
        android:verticalSpacing="10dp"
        android:horizontalSpacing="10dp"
        android:stretchMode="columnWidth"
        android:layout_width="match_parent"
        android:layout_height="match_parent"/>
</RelativeLayout> 
```

这是我的适配器布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dp" > 
    <ImageView
        android:id="@+id/grid_item_image"
        android:layout_width="fill_parent"
        android:layout_height="160dp"
        android:layout_marginRight="160dp" >
    </ImageView> 
    <TextView
        android:id="@+id/grid_item_label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:layout_marginTop="5dp"
        android:textSize="15sp" 
        android:layout_below="@id/grid_item_image"
        android:layout_centerHorizontal="true">
    </TextView> 
</RelativeLayout> 
```

这是我的活动课

```
public class AktifitasUtama extends SherlockActivity {

    Session session;
    HorizontalScrollView scroll_album_holder;
    LinearLayout album_holder;
    List<String> album_label = new ArrayList<String>();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.aktifitas_utama);
        if (Build.VERSION.SDK_INT < Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
            Drawable ab = getResources().getDrawable(R.drawable.header);
            getSupportActionBar().setBackgroundDrawable(ab);
        }
        setSupportProgressBarIndeterminateVisibility(true);
        getSupportActionBar().setHomeButtonEnabled(false);
        getSupportActionBar().setDisplayHomeAsUpEnabled(false);
        session = new Session(getApplicationContext());
        scroll_album_holder = (HorizontalScrollView) findViewById(R.id.scroll_album_holder);
        album_holder = (LinearLayout) findViewById(R.id.album_holder);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.menu.aktifitas_utama, menu);
        return (super.onCreateOptionsMenu(menu));
    }

    @Override
    protected void onResume(){
        super.onResume();
        scroll_album_holder.setVisibility(View.GONE);
        if(session.is_login()){
            fill_album();
        } else {
            startActivity(new Intent(getApplicationContext(), AktifitasMasuk.class));
            finish();
        }
    }

    public void fill_album(){
        album_label.clear();
        int i = 2;
        if(i==1){
            album_label.add("Photo From Camera");
        } else if (i==2){
            album_label.add("Photo From Camera");
            album_label.add("Album 1");
            album_label.add("Album 2");
            album_label.add("Album 3");
            album_label.add("Album 4");
            album_label.add("Album 5");
            album_label.add("Album 6");
        } else if(i==3) {
            album_label.add("Album 1");
            album_label.add("Album 2");
            album_label.add("Album 3"); 
            album_label.add("Album 4");
            album_label.add("Album 5");
            album_label.add("Album 6");     
        }
        if(!album_label.isEmpty()){
            scroll_album_holder.setVisibility(View.VISIBLE);
            for(int j=0;j<album_label.size();j++){
                album_holder.addView(set_album(album_label.get(j)));
            }
        }
    }

    private View set_album(String label){
        LayoutInflater inflater = (LayoutInflater) getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View album = inflater.inflate(R.layout.grid, null, false);
        ImageView grid_item_image = (ImageView) album.findViewById(R.id.grid_item_image);
        TextView grid_item_label = (TextView) album.findViewById(R.id.grid_item_label);
        Drawable grid_image = getResources().getDrawable(R.drawable.custom_menu_archive);
        grid_item_image.setImageDrawable(grid_image);
        grid_item_label.setText(label);
        return album;
    }

} 
```

所以你怎么看？有什么建议吗？

# image - enctype="multipart/form-data" 的表单在某些机器上挂起

> ID：14250982
> 
> 赞同：1
> 
> 时间：2013-01-10T04:47:30.963
> 
> 标签：image, forms, upload

我有一个上传图片的表单，因此设置了属性 enctype="multipart/form-data"。问题出在几台机器上，在任何浏览器上，提交表单后，它一直在搜索，最后得到一个 404 错误。

一旦我删除“enctype =“multipart/form-data”，表单就会正常处理（当然图片无法上传）。

它在我的电脑上工作得很好，任何人都会知道什么会导致这个问题？

完整的表单标签是这样写的：

```
<form method="post"  id="add-property" action="<?=BASE_URL;?>admin/cms-add-property-action.php" enctype="multipart/form-data"> 
```

非常感谢。

# web-applications - 在 Web 应用程序中使用 Restlet

> ID：14250984
> 
> 赞同：1
> 
> 时间：2013-01-10T04:47:33.670
> 
> 标签：web-applications, restlet

即使我没有在 Java Web 应用程序中实现 Web 服务，我也可以使用 restlet 框架吗？我正在开发一个 Web 应用程序，它有一个 Web 服务以及一些可以在 servlet 中实现的服务。我打算将 Restlet 框架用于 Web 服务，但我可以将相同的技术用于不是 Web 服务的服务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T06:48:01.953

是的，你可以，你可以使用像 freemarker 这样的模板语言来生成 html 输出，你可以使用熟悉的 restlet 方法来提取查询参数并形成发布数据。

# android - 如何在 Android 中正确使用 AsyncTask

> ID：14250989
> 
> 赞同：45
> 
> 时间：2013-01-10T04:47:54.343
> 
> 标签：android, android-asynctask

我不想将任何参数传递给`doInBackground`AsyncTask 的方法。

那么代码应该是什么样的呢？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-01-10T05:01:40.897

```
import android.app.Activity;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;

public class AsyncExample extends Activity{

private String url="http://www.google.co.in";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();

    new AsyncCaller().execute();

}

private class AsyncCaller extends AsyncTask<Void, Void, Void>
{
    ProgressDialog pdLoading = new ProgressDialog(AsyncExample.this);

    @Override
    protected void onPreExecute() {
        super.onPreExecute();

        //this method will be running on UI thread
        pdLoading.setMessage("\tLoading...");
        pdLoading.show();
    }
    @Override
    protected Void doInBackground(Void... params) {

        //this method will be running on background thread so don't update UI frome here
        //do your long running http tasks here,you dont want to pass argument and u can access the parent class' variable url over here

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);

        //this method will be running on UI thread

        pdLoading.dismiss();
    }

    }
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-10T05:20:06.067

根据[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)，它的

```
 AsyncTask<Params, Progress, Result> 
```

*   Params，执行时发送给任务的参数类型。
*   进度，在后台计算期间发布的进度单元的类型。
*   Result，后台计算结果的类型。

因此，如果您想在**doInBackground**中传递 void，只需传递 void 来代替 Params。

示例代码：

```
class DownloadLink extends AsyncTask<Void, Void, Void> {

        @Override
        protected Void doInBackground(Void... params) {
            // TODO Auto-generated method stub

            //Do Your stuff here..
            return null;
        }
    } 
```

并将其称为：

```
 new DownloadLink().execute(); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-10T04:52:11.430

创建您的`AsyncTask`类，就好像您不想将任何参数传递给`doInBackground`：

```
 public class LongOperation extends AsyncTask<Void, Void, String> {

          public LongOperation(Context context) {

          }

          @Override
          protected void onPreExecute() {

          }

          @Override
          protected String doInBackground(Void... params) {

              return null;
          }      

          @Override
          protected void onPostExecute(String result) {                           

          }
    } 
```

并在不传递任何参数的情况下启动 AsyncTask ：

```
 LongOperation longOperation = new LongOperation(this);
   longOperation.execute(); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-01-10T04:51:38.297

你为什么不想向它传递任何参数？你应该解释...

这是它通常的工作方式（示例）：

```
 private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
     protected Long doInBackground(URL... urls) {
         int count = urls.length;
         long totalSize = 0;
         for (int i = 0; i < count; i++) {
             totalSize += Downloader.downloadFile(urls[i]);
             publishProgress((int) ((i / (float) count) * 100));
             // Escape early if cancel() is called
             if (isCancelled()) break;
         }
         return totalSize;
     }

     protected void onProgressUpdate(Integer... progress) {
         setProgressPercent(progress[0]);
     }

     protected void onPostExecute(Long result) {
         showDialog("Downloaded " + result + " bytes");
     }
 } 
```

并执行它你调用：

```
new DownloadFilesTask().execute(url1, url2, url3); 
```

来源：[Android 文档](http://developer.android.com/reference/android/os/AsyncTask.html)

# http - 服务器在收到整个请求之前发送 HTTP 响应是否可以接受？

> ID：14250991
> 
> 赞同：49
> 
> 时间：2013-01-10T04:48:22.780
> 
> 标签：http

考虑一个大的 HTTP 请求：

```
POST /upload HTTP/1.1
Content-Type: multipart/form-data
Content-Length: 1048576

... 
```

客户端现在开始上传 1 兆字节的数据，这可能需要一段时间。但是，服务器确定需要 HTTP 授权，因此它决定将使用`HTTP 401 Unauthorized`.

服务器必须等到它收到整个请求（IE，标头 + CRLF CRLF +`Content-Length`字节）才能响应？

实际上，这种行为会破坏任何浏览器吗？浏览器是否会继续上传文件，或者如果收到“过早”响应，它们会停止传输吗？

更重要的是，在这种情况下，他们是否能够成功验证并再次开始上传（使用凭据），还是像这样切断上传不可靠？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-23T15:59:53.357

查看定义协议的 RFC 2616，在第 8.2.2 节监视连接以获取错误状态消息，它指出

> 发送消息正文的 HTTP/1.1（或更高版本）客户端应该在传输请求时监视网络连接的错误状态。如果客户端看到错误状态，它应该立即停止传输正文。

所以我会说使用你可以跳入发送 401 错误。然后查看 10.4.2 401 Unauthorized

> 该请求需要用户身份验证。响应必须包含一个 WWW-Authenticate 头字段（第 14.47 节），其中包含适用于所请求资源的质询。客户端可以使用合适的 Authorization 头域重复请求

声明客户端可以使用合适的凭据重试。

然而，我还没有进行任何实验来查看浏览器的实际性能。

# matlab - 编写分类树...如何存储？

> ID：14250999
> 
> 赞同：2
> 
> 时间：2013-01-10T04:49:08.193
> 
> 标签：matlab, machine-learning, dataset, binary-tree

我在这里寻找一个基本的伪代码大纲。

我的目标是从头开始编写分类树（我正在学习机器学习并希望获得直觉）。但我的训练数据非常庞大：40000 个示例和 1000 个特征。鉴于所需拆分数量的上限是 2 ^(40000)，我不知道如何跟踪所有这些分区数据集。

假设我从完整的数据集开始并进行一次拆分。然后我可以将落在拆分一侧的 20000 个示例保存到数据集中，然后重新运行拆分算法以找到该数据集的贪婪拆分。然后说我一直这样做，沿着树的最左边的树枝分裂了几十次。

当我对所有最左边的分割感到满意时，然后呢？如何存储多达 2 ^(40000)个单独的子集？以及在对测试示例进行分类时，如何跟踪我进行的所有拆分？这是对我来说没有意义的代码组织。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:05:23.857

感谢@natan 的详细回答。

但是，如果我理解正确，您关心的主要问题是如何在每个训练样本通过决策树传播时**有效地跟踪它。**

这可以很容易地完成。

您所需要的只是一个大小向量，`N=40000`每个训练样本都有一个条目。该向量将告诉您每个样本在树中的位置。让我们称这个向量`assoc`。

如何使用这个向量？

在我看来，最优雅的方法是创建`assoc`类型`uint32`并使用位来编码每个训练样本在树中的传播。

中的每个位`assoc(k)`代表树的某个深度，如果该位设置为（1），则表示样本`k`向右，否则表示样本`k`向左。

如果您决定采用此策略，您会发现以下 Matlab 命令很有用[`bitget`](http://www.mathworks.com/help/matlab/ref/bitget.html)，[`bitset`](http://www.mathworks.com/help/matlab/ref/bitset.html)以及[`bitshift`](http://www.mathworks.com/help/matlab/ref/bitshift.html)其他一些位函数。

让我们考虑以下树

> ```
>  root
>       /    \
>      a      b
>            / \
>           c   d 
> ```

因此，对于所有到节点*a*的示例，它们的`assoc`值是`00b`- 因为它们在根处离开（对应于最低有效位 (LSB) 处的零）。

所有去叶节点*c*的例子，它们的`assoc`值是`01b`- 它们在根处向右走（LSB=1），然后向左转（第 2 位 = 0）。

最后，所有到达叶子节点*d*的例子，它们的`assoc`值是`11b`——它们的分支太右了。

现在，您如何找到通过节点*b*的所有示例？

这简单！

```
>> selNodeB = bitand( assoc, 1 ); 
```

其 LSB 所在的所有节点`1`在根处右转并通过节点*b*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T07:38:20.067

如果您认为有一种方法可以存储 2^40000 位，那么您还没有意识到这个数字有多大，并且您错了大约 10000 个数量级。查看 Matlab 的[classregtree](https://www.mathworks.com/help/stats/decision-trees.html;jsessionid=bdd9edf2457b92dad56e60d6fbd5)文档。

我从@Amro 的详细答案中复制了（在[此处](https://stackoverflow.com/questions/1960430/decision-tree-in-matlab)找到）：

” 下面是分类树模型的几个常用参数：

*   **x**：数据矩阵，行是实例，列是预测属性
*   **y**：列向量，每个实例的类标签
*   **categorical** : 指定哪些属性是离散类型（相对于连续）
*   **method** : 是生成分类树还是回归树（取决于类类型）
*   **names** : 为属性命名
*   **prune**：启用/禁用减少错误修剪
*   **minparent/minleaf**：如果要进一步拆分，允许指定节点中的最小实例数
*   **nvartosample**：用于随机树（考虑每个节点上随机选择的 K 个属性）
*   **weights**：指定加权实例
*   **cost** : 指定成本矩阵（各种错误的惩罚）
*   **splitcriterion**：用于在每次拆分时选择最佳属性的标准。我只熟悉基尼指数，它是信息增益标准的一种变体。
*   **priorityprob**：明确指定先验类概率，而不是根据训练数据计算

一个完整的例子来说明这个过程：

```
%# load data
load carsmall

%# construct predicting attributes and target class
vars = {'MPG' 'Cylinders' 'Horsepower' 'Model_Year'};
x = [MPG Cylinders Horsepower Model_Year];
y = strcat(Origin,{});

%# train classification decision tree
t = classregtree(x, y, 'method','classification', 'names',vars, ...
                'categorical', [2 4], 'prune','off');
view(t)

%# test
yPredicted = eval(t, x);
cm = confusionmat(y,yPredicted);           %# confusion matrix
N = sum(cm(:));
err = ( N-sum(diag(cm)) ) / N;             %# testing error

%# prune tree to avoid overfitting
tt = prune(t, 'level',2);
view(tt)

%# predict a new unseen instance
inst = [33 4 78 NaN];
prediction = eval(tt, inst) 
```

[![树](../Images/81fb1d92bb51822db139aeb31495db5c.png)](https://i.stack.imgur.com/vHxyc.png)