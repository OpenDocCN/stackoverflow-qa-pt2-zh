# StackOverflow 问答 14155000-14155999

# android - 在Android中显示系统对话框时，当我的活动对话框失去焦点时如何处理状态

> ID：14155002
> 
> 赞同：0
> 
> 时间：2013-01-04T10:07:30.153
> 
> 标签：android, android-dialog

在我的应用程序中，如果显示的对话框失去焦点（例如，如果显示我的对话框并且任何系统对话框（如低电量对话框或电源按钮对话框）出现在其上），我想处理状态。

有什么办法可以捕捉到这种情况？我没有找到任何对话`onWindowFocusChanged`方法。

我的活动`onWindowFocusChanged`在这里不起作用。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-04T10:17:06.983

如果您在活动进入后台时使用[DialogFragment](https://developer.android.com/reference/android/support/v4/app/DialogFragment.html)`onPause` （或在您的应用程序的前台出现某些内容），则将调用该对话框，然后在返回您的应用程序/活动/对话框时，`onResume`将调用该对话框。

始终使用`DialogFragment`，`Activity`对话生命周期方法因某种原因而贬值。

`DialogFragment`可以在[此处](https://developer.android.com/reference/android/app/DialogFragment.html)的文档中找到如何使用的示例。

# ios - 应用拒绝原因？附上teston ios 6.0.1崩溃报告

> ID：14155004
> 
> 赞同：-1
> 
> 时间：2013-01-04T10:07:45.333
> 
> 标签：ios

以下是苹果在 iOS 6.0.1 上测试应用程序时的崩溃报告，请求指南的原因是什么。提前致谢

Apple 拒绝报告是“我们发现您的应用程序在运行 iOS 6.0.1 的 iPhone 5 和 iPad（第三代）上崩溃，这不符合 App Store 审查指南。

请指导天气我必须在 iOS 6.0.1 或一些基本 SDK 设置上构建..”

```
Incident Identifier: BBFADB44-63E8-4343-AF28-B7C8DA057AB4
CrashReporter Key:   465bb86d153ff6b62730d3db38fa01695f889a4d
Hardware Model:      xxx
Process:         KalExample [1987]
Path:            /var/mobile/Applications/45DA6EAC-5C68-462F-993B-725CC8D2B774/KalExample.app/KalExample
Identifier:      KalExample
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2013-01-03 17:29:20.402 -0800
OS Version:      iOS 6.0.1 (10A523)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Crashed Thread:  0

Last Exception Backtrace:
(0x329ce29e 0x396b097a 0x32919b70 0x3320 0x34333a64 0x329c299c 0x32924b66 0x3433372a 0x3a9fe11a 0x3a9fd4b2 0x3aa021b8 0x329a1f36 0x32914eb8 0x32914d44 0x35e592e6 0x387322f4 0x2af6 0x2aac)

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x318f8350 __pthread_kill + 8
1   libsystem_c.dylib               0x3964f11e pthread_kill + 54
2   libsystem_c.dylib               0x3968b96e abort + 90
3   libc++abi.dylib                 0x37858d4a abort_message + 70
4   libc++abi.dylib                 0x37855ff4 default_terminate() + 20
5   libobjc.A.dylib                 0x396b0a74 _objc_terminate() + 144
6   libc++abi.dylib                 0x37856078 safe_handler_caller(void (*)()) + 76
7   libc++abi.dylib                 0x37856110 std::terminate() + 16
8   libc++abi.dylib                 0x3785750e __cxa_throw + 118
9   libobjc.A.dylib                 0x396b09ba objc_exception_throw + 90
10  CoreFoundation                  0x32919b70 -[__NSArrayM objectAtIndex:] + 160
11  KalExample                      0x00003320 0x1000 + 8992
12  AssetsLibrary                   0x34333a66 __block_global_1 + 26
13  CoreFoundation                  0x329c299e __NSArrayEnumerate + 394
14  CoreFoundation                  0x32924b66 -[NSArray enumerateObjectsWithOptions:usingBlock:] + 58
15  AssetsLibrary                   0x3433372a __block_global_0 + 606
16  libdispatch.dylib               0x3a9fe11c _dispatch_call_block_and_release + 8
17  libdispatch.dylib               0x3a9fd4b4 _dispatch_client_callout + 20
18  libdispatch.dylib               0x3aa021b8 _dispatch_main_queue_callback_4CF$VARIANT$mp + 220
19  CoreFoundation                  0x329a1f36 __CFRunLoopRun + 1286
20  CoreFoundation                  0x32914eb8 CFRunLoopRunSpecific + 352
21  CoreFoundation                  0x32914d44 CFRunLoopRunInMode + 100
22  GraphicsServices                0x35e592e6 GSEventRunModal + 70
23  UIKit                           0x387322f4 UIApplicationMain + 1116
24  KalExample                      0x00002af6 0x1000 + 6902
25  KalExample                      0x00002aac 0x1000 + 6828

Thread 1:
0   libsystem_kernel.dylib          0x318f8d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x39626cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x39626a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x396268a0 start_wqthread + 4

Thread 3:
0   libsystem_kernel.dylib          0x318f8d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x39626cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x39626a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x396268a0 start_wqthread + 4

Thread 4 name:  WebThread
Thread 4:
0   libsystem_kernel.dylib          0x318e7eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x318e8048 mach_msg + 36
2   CoreFoundation                  0x329a3040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x329a1d9e __CFRunLoopRun + 878
4   CoreFoundation                  0x32914eb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x32914d44 CFRunLoopRunInMode + 100
6   WebCore                         0x33871a40 RunWebThread(void*) + 440
7   libsystem_c.dylib               0x3963130e _pthread_start + 306
8   libsystem_c.dylib               0x396311d4 thread_start + 4

Thread 0 crashed with ARM Thread State (32-bit):
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000000      r3: 0x3c4a0534
    r4: 0x00000006    r5: 0x3c4a0b88      r6: 0x00191e34      r7: 0x2fdfe974
    r8: 0x00191e10    r9: 0x00000300     r10: 0x000000d4     r11: 0x00000002
    ip: 0x00000148    sp: 0x2fdfe968      lr: 0x3964f123      pc: 0x318f8350
  cpsr: 0x00000010

Binary Images:
    0x1000 -    0x14ffb +KalExample armv7  <c8019e5b766b31109397326a88291e35> /var/mobile/Applications/45DA6EAC-5C68-462F-993B-725CC8D2B774/KalExample.app/KalExample
0x2fe96000 - 0x2feb666b  dyld armv7  <75594988728831d98e1f7c4c7b7ca29d> /usr/lib/dyld
0x31827000 - 0x3182bfff  libGFXShared.dylib armv7  <6a8f59f89218372d9f24c4193a179008> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x3182d000 - 0x31839fff  libbsm.0.dylib armv7  <e98708fbfa683df2a91d45dc765071a7> /usr/lib/libbsm.0.dylib
0x318e7000 - 0x318fdffd  libsystem_kernel.dylib armv7  <4c2862d2e8f23119bfe114b0662c6241> /usr/lib/system/libsystem_kernel.dylib
0x31900000 - 0x31938fff  Preferences armv7  <b00cd07629303d4f96b20c6f582e48b2> /System/Library/PrivateFrameworks/Preferences.framework/Preferences
0x31b05000 - 0x31b5cffb  SAObjects armv7  <93fe8149b03538edb4b78bd374050a00> /System/Library/PrivateFrameworks/SAObjects.framework/SAObjects
0x31b67000 - 0x31b6dffe  libsystem_dnssd.dylib armv7  <6c1c1aaf9a3537d7ada4b519d14da7ab> /usr/lib/system/libsystem_dnssd.dylib
0x31b6e000 - 0x31b96fff  PrintKit armv7  <a8ef6136b9773d42ac20f7eb54279039> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x31bb7000 - 0x31bb8ffc  IOAccelerator armv7  <de8af6be681832008d180d7424d55f0d> /System/Library/PrivateFrameworks/IOAccelerator.framework/IOAccelerator
0x31c32000 - 0x31c7dfff  libstdc++.6.dylib armv7  <55a7612b28c43cfcad7089b688591b80> /usr/lib/libstdc++.6.dylib
0x31e8f000 - 0x31e99fff  MailServices armv7  <f31a7844317a3f2484cffe092e9fd7c2> /System/Library/PrivateFrameworks/MailServices.framework/MailServices
0x31e9a000 - 0x31ea1fff  OpenGLES armv7  <e035b741746c316dba8f1e59a568bf17> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x31f02000 - 0x31f11fff  CoreVideo armv7  <092f3aa965803a1aaea69af2ac5143f5> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x32141000 - 0x3215aff9  DictionaryServices armv7  <e1f8d258d02c344cb0d17cec31818d3f> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x32269000 - 0x3226cffe  libmacho.dylib armv7  <2a9fe0b48f473d0f8fe2bf076cd12753> /usr/lib/system/libmacho.dylib
0x3226d000 - 0x32276fff  AssetsLibraryServices armv7  <e51cbfefefbc30b6b47d99739123033e> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x32277000 - 0x32288fff  libvMisc.dylib armv7  <a3d025234d1a3880a0e5f87879633ee0> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x32289000 - 0x32306ff6  HomeSharing armv7  <50bd2fe02665322695fbab9f2693bcd7> /System/Library/PrivateFrameworks/HomeSharing.framework/HomeSharing
0x3253f000 - 0x3253ffff  libSystem.B.dylib armv7  <f2cad3bd15f63f448a9c5be732c65819> /usr/lib/libSystem.B.dylib
0x325e3000 - 0x32721ff3  vImage armv7  <a7fd7fcd7041356db2ca297402ab6e8c> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x32722000 - 0x3272effb  AccountSettings armv7  <0b7524e9a8ef36bf9e9f6a5c445478af> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x3272f000 - 0x3287ffff  MusicLibrary armv7  <2010302aff03397d97f7f91b446ec661> /System/Library/PrivateFrameworks/MusicLibrary.framework/MusicLibrary
0x328a2000 - 0x328c2fff  libxslt.1.dylib armv7  <7f6f63b31f333c41952f685fdd54a6cb> /usr/lib/libxslt.1.dylib
0x328e0000 - 0x328e1ffc  libsystem_sandbox.dylib armv7  <46cd200d99323aebbf6d81e5fb16424f> /usr/lib/system/libsystem_sandbox.dylib
0x328e2000 - 0x328f7fff  libmis.dylib armv7  <3afeeea531013420af75315d8d6dd332> /usr/lib/libmis.dylib
0x3290c000 - 0x32a3eff1  CoreFoundation armv7  <e30fc309df7b3c9f8ac57f0f6047d65f> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x32a3f000 - 0x32cc4ff7  MediaToolbox armv7  <e8b0007c7e3c3275a5c1fe8ce98839d1> /System/Library/Frameworks/MediaToolbox.framework/MediaToolbox
0x32cda000 - 0x32d3cff7  CoreText armv7  <4a0bece315e9316fa1aa1b5923740f55> /System/Library/Frameworks/CoreText.framework/CoreText
0x32d66000 - 0x32d72fff  libz.1.dylib armv7  <a3bba3842596315a81aa171a8bbda7b5> /usr/lib/libz.1.dylib
0x32d73000 - 0x32d74ffd  CoreSurface armv7  <aa216ca3e2e0381ea8cf9abbd6f430f4> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x32d7e000 - 0x32e65ffe  CoreMediaStream armv7  <b54695ea687837468f05ecd140356a0e> /System/Library/PrivateFrameworks/CoreMediaStream.framework/CoreMediaStream
0x32e8f000 - 0x32e98ffd  MediaRemote armv7  <dbc251adcad43e72a31427f836a060cd> /System/Library/PrivateFrameworks/MediaRemote.framework/MediaRemote
0x32eab000 - 0x32ec6ffb  libRIP.A.dylib armv7  <51845c89677f3e77aeb221c44bda48f1> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x32ef1000 - 0x33029fff  CoreGraphics armv7  <903960bfcfe93adb943752851f88491e> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x332bb000 - 0x332f0ff3  libcorecrypto.dylib armv7  <ebd023957d853fa8bd35309592e92dac> /usr/lib/system/libcorecrypto.dylib
0x332f1000 - 0x33349ffd  ManagedConfiguration armv7  <fa250e174ca43d3c93a61e41f0df9771> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x3335d000 - 0x3335dfff  libsystem_blocks.dylib armv7  <993c9bfe8bf031548b9ddba63cc17015> /usr/lib/system/libsystem_blocks.dylib
0x3335e000 - 0x333c3ff6  CoreMedia armv7  <28a1fe1e729d37e0bb623201b2652a45> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x33412000 - 0x33445ff8  AppleAccount armv7  <2af09d814a5a382192613b68b9327d49> /System/Library/PrivateFrameworks/AppleAccount.framework/AppleAccount
0x3349a000 - 0x3349bffe  libMobileCheckpoint.dylib armv7  <814d50d817503020b0a31c04996f4ded> /usr/lib/libMobileCheckpoint.dylib
0x3349c000 - 0x33674ffb  ImageIO armv7  <fdfa8aa6307235b29435e5c8f6bc9819> /System/Library/Frameworks/ImageIO.framework/ImageIO

0x336a3000 - 0x336aaffa  CaptiveNetwork armv7  <c1a469c6ca4a3718bef325ec0f4e1885> /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x336b7000 - 0x336f1ff7  iTunesStore armv7  <90c74a32628d3905aa224948b4d52bcf> /System/Library/PrivateFrameworks/iTunesStore.framework/iTunesStore
0x33773000 - 0x3377afff  MobileIcons armv7  <c7b5eb7ec2283f0b9611448ddccdd352> /System/Library/PrivateFrameworks/MobileIcons.framework/MobileIcons
0x3378f000 - 0x33793ffd  IOSurface armv7  <959e67366a553eca85e6ccfa2d668366> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x3382c000 - 0x33850ff7  Bom armv7  <c76b4156e0463ecb922608d44c126d86> /System/Library/PrivateFrameworks/Bom.framework/Bom
0x33867000 - 0x34196ff5  WebCore armv7  <29cc251f63fe3a9eb16e96742b88ac4f> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x34197000 - 0x3419affa  libcache.dylib armv7  <e08b913e17753180b91728a8bd5dda7b> /usr/lib/system/libcache.dylib
0x3432c000 - 0x3433affc  AssetsLibrary armv7  <54378427c94535c3b54b3aaaa250b5f7> /System/Library/Frameworks/AssetsLibrary.framework/AssetsLibrary
0x3433b000 - 0x34391ff5  CoreAudio armv7  <a3a2eb3a29443b42a23aa8ecb1232846> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x343b6000 - 0x343ceff7  libsystem_info.dylib armv7  <be3d5625aed733ffb2d53400655fe110> /usr/lib/system/libsystem_info.dylib
0x343cf000 - 0x3440dff3  VideoToolbox armv7  <250b8df69b3c3f929f30463d218b7462> /System/Library/Frameworks/VideoToolbox.framework/VideoToolbox
0x3440e000 - 0x3443dfff  BulletinBoard armv7  <7005f2d1da533442a1756bd176d4aac5> /System/Library/PrivateFrameworks/BulletinBoard.framework/BulletinBoard
0x3443e000 - 0x3445bfff  CoreServicesInternal armv7  <0162575a2e8b35d2915faee400c2bf30> /System/Library/PrivateFrameworks/CoreServicesInternal.framework/CoreServicesInternal
0x34771000 - 0x347a7ffb  MMCS armv7  <4cbc5fa9369231f392390328d492488a> /System/Library/PrivateFrameworks/MMCS.framework/MMCS
0x347a8000 - 0x347d5ff3  MobileAsset armv7  <7ef1c10c0c493ad4b0073de317f2448d> /System/Library/PrivateFrameworks/MobileAsset.framework/MobileAsset
0x34963000 - 0x34968fff  CommonUtilities armv7  <cb484bdaf5003e4baa13f83bafff62a9> /System/Library/PrivateFrameworks/CommonUtilities.framework/CommonUtilities
0x3496d000 - 0x34974ffb  liblockdown.dylib armv7  <257ecb171a363e4298a63f72d7fffea2> /usr/lib/liblockdown.dylib
0x34a73000 - 0x34a85fff  DataAccessExpress armv7  <000fb77814ee3ca0841e14bbba48867d> /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x34b6a000 - 0x34bb4ff0  libc++.1.dylib armv7  <a361a382693032b9bdfb2860033b3024> /usr/lib/libc++.1.dylib
0x34bf3000 - 0x34c08ff9  libxpc.dylib armv7  <9fbb123276823c2383fc34b7a55404d7> /usr/lib/system/libxpc.dylib
0x34ccb000 - 0x34d76fff  MediaControlSender armv7  <fba51e235adc368b8132db578723a8fa> /System/Library/PrivateFrameworks/MediaControlSender.framework/MediaControlSender
0x34d8e000 - 0x34e6aff9  WebKit armv7  <2b33136aa86e383a83d32908bddc9667> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x34e6c000 - 0x34e6fffc  MobileInstallation armv7  <e6b6ae9d4f5f3831a40fcc370afc1429> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x34e7e000 - 0x34e94fff  libCRFSuite.dylib armv7  <9b3fd56781103f209be2c43e48c1efc9> /usr/lib/libCRFSuite.dylib
0x34e9f000 - 0x34ea4fff  liblaunch.dylib armv7  <021ff140d6003f3281dfa29b79fa9e6e> /usr/lib/system/liblaunch.dylib
0x34eda000 - 0x34ee1fff  libsystem_notify.dylib armv7  <6e39f8511ecc3c3489829714eb6fde12> /usr/lib/system/libsystem_notify.dylib
0x3524e000 - 0x352fbff7  libxml2.2.dylib armv7  <ef245c0afc113f54b6f30921671edab2> /usr/lib/libxml2.2.dylib
0x35334000 - 0x35747ffd  FaceCoreLight armv7  <0cb7a12beb3d32c1abd1834be8328b7c> /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x35748000 - 0x357cfff3  CoreMotion armv7  <a3df71772fe1315aa6d176cac1ac48e2> /System/Library/Frameworks/CoreMotion.framework/CoreMotion
0x357d2000 - 0x357dfffb  TelephonyUtilities armv7  <19dbc34167323bca9510012b926d8cf7> /System/Library/PrivateFrameworks/TelephonyUtilities.framework/TelephonyUtilities
0x358e4000 - 0x358e8ffc  CoreTime armv7  <c9986c16fe8b3fa68cf90ccd4f014ab9> /System/Library/PrivateFrameworks/CoreTime.framework/CoreTime
0x358fc000 - 0x35945fff  IOKit armv7  <635953fdb81237e991ab57ccff92e97d> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x35e4d000 - 0x35e53ffd  MobileKeyBag armv7  <a81d768a49cf37a1a111594d39cea3fe> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x35e54000 - 0x35e5ffff  GraphicsServices armv7  <c5879083e8693aba827c78a32abe2391> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x35ff9000 - 0x3607efff  libsqlite3.dylib armv7  <759ca29f533a33e88a81fddc3364bf19> /usr/lib/libsqlite3.dylib
0x36088000 - 0x36177fff  GeoServices armv7  <60e2738ccb9635e9874907d54ea27b68> /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x3617f000 - 0x3617ffff  vecLib armv7  <66204595f7653ef29e5e26cb8629177a> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x361a1000 - 0x361c7fff  libtidy.A.dylib armv7  <134c41c587fb33dca014bd525f68a0c7> /usr/lib/libtidy.A.dylib
0x362bc000 - 0x36311ff3  CoreTelephony armv7  <e5b7289acd1231acb950569a81c10ac1> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x36758000 - 0x36775fff  TelephonyUI armv7  <0a989fb0318432ed89d91254f99a66ba> /System/Library/PrivateFrameworks/TelephonyUI.framework/TelephonyUI
0x36776000 - 0x36793fff  PersistentConnection armv7  <cd76b3fcb0db3922ad62f547ab2e55fb> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x36b6c000 - 0x36b8bffd  WebBookmarks armv7  <ed705f425035329d96ede473f023ed84> /System/Library/PrivateFrameworks/WebBookmarks.framework/WebBookmarks
0x36b8d000 - 0x36c65fff  StoreServices armv7  <49ff779e3e783e7ca6b56b5788c2c119> /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices
0x36c9a000 - 0x36cb2ff3  ChunkingLibrary armv7  <13652bd5c5ba3e6f98435e40e91684d9> /System/Library/PrivateFrameworks/ChunkingLibrary.framework/ChunkingLibrary
0x36cb4000 - 0x36cb6fff  TCC armv7  <f641dd0500fa3f0087d93da665ea84b8> /System/Library/PrivateFrameworks/TCC.framework/TCC
0x36cb7000 - 0x36d9aff7  libBLAS.dylib armv7  <56d8e00447133cd89457deec007327cb> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x36d9b000 - 0x36dc9ffc  Security armv7  <fb75984442a435cd84aac722142d5a44> /System/Library/Frameworks/Security.framework/Security
0x36dca000 - 0x36dccfff  MessageSupport armv7  <44d449b4959a33b99d4ab4a9cd161ee6> /System/Library/PrivateFrameworks/MessageSupport.framework/MessageSupport
0x36dcd000 - 0x36e26fff  MobileCoreServices armv7  <d831f1f9285535acac5035a29d84aaaf> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x36f38000 - 0x36fedff2  CoreImage armv7  <ad658acd554a386fb81bb137a237b5f4> /System/Library/Frameworks/CoreImage.framework/CoreImage
0x370a5000 - 0x37145fff  UIFoundation armv7  <795a2f216cc3379c95eb645c633cc527> /System/Library/PrivateFrameworks/UIFoundation.framework/UIFoundation
0x37283000 - 0x3728bfff  ProtocolBuffer armv7  <359ccc7700c93d58adbbd74ecfda80d9> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
0x372ac000 - 0x372b2ffc  libAccessibility.dylib armv7  <9e8bfe02e370375ea8439ab895528982> /usr/lib/libAccessibility.dylib
0x37403000 - 0x3740fffe  GenerationalStorage armv7  <74d50f4c8d243a35ad3ae89d85f2793a> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x37410000 - 0x37413fff  MobileSystemServices armv7  <6edd9c74c5a73c33809152446abe1538> /System/Library/PrivateFrameworks/MobileSystemServices.framework/MobileSystemServices
0x37426000 - 0x3750aff7  PhotoLibraryServices armv7  <e2bb6e80e87530aea4a0535430b61c57> /System/Library/PrivateFrameworks/PhotoLibraryServices.framework/PhotoLibraryServices
0x37525000 - 0x375dffff  AddressBookUI armv7  <3da0ecfaea4937148cd365af1d7515c2> /System/Library/Frameworks/AddressBookUI.framework/AddressBookUI
0x376fc000 - 0x37721ff9  OpenCL armv7  <f7e2cb8404653022bf5cdea17bc5d06f> /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x37747000 - 0x3774dffd  XPCKit armv7  <60376ac506bc365d85d28d8de617211a> /System/Library/PrivateFrameworks/XPCKit.framework/XPCKit
0x3774e000 - 0x3783bff2  libiconv.2.dylib armv7  <faa5abb937e3306ab87c7f7c38315839> /usr/lib/libiconv.2.dylib
0x37855000 - 0x37868fff  libc++abi.dylib armv7  <c5a5f03138353747b539e620ef2bb5c0> /usr/lib/libc++abi.dylib
0x3798d000 - 0x37a73fff  AVFoundation armv7  <d3f2b9d750c83e818c39cbb5ed609244> /System/Library/Frameworks/AVFoundation.framework/AVFoundation
0x37a7d000 - 0x37c23ffa  JavaScriptCore armv7  <8171afa18a08371c89cab6c9d823d1c5> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x37c24000 - 0x37c25fff  libremovefile.dylib armv7  <6a0dd04f0710329b9c1722db2235f5c3> /usr/lib/system/libremovefile.dylib
0x37c26000 - 0x37cebfff  CFNetwork armv7  <3e973794a4d13428bb974edcb2027139> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x37cec000 - 0x37d45ff3  libvDSP.dylib armv7  <ad4c53081a263f0d96f63b9a80f2ae91> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x37d46000 - 0x37d81ff0  libCGFreetype.A.dylib armv7  <bc5b8d4a10863ce192acf26428e68da7> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x37f43000 - 0x37f50ffa  ApplePushService armv7  <420684556cd430b09a6d9ec6d328d53d> /System/Library/PrivateFrameworks/ApplePushService.framework/ApplePushService
0x37f56000 - 0x37f62ffb  libMobileGestalt.dylib armv7  <0338ce49444332ec88cfc45c624bb39b> /usr/lib/libMobileGestalt.dylib
0x37f63000 - 0x37f68ffa  IOMobileFramebuffer armv7  <3a351ca1d4ae3146a787f3e13564294b> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x37fa4000 - 0x37fbcff4  EAP8021X armv7  <c3678853424030f9a2e410c5488aea5f> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x37fd1000 - 0x38029ff7  CoreLocation armv7  <7bca9c29b3d23f61ba0e28af9e8ee357> /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x380b9000 - 0x380bcffb  AggregateDictionary armv7  <df4096b1cdc5335790db9a2a51e6b029> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x38109000 - 0x38109fff  Accelerate armv7  <22bee3e96cbc3538bfc50ca5be618cc0> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x3810a000 - 0x38253ff7  libicucore.A.dylib armv7  <0253932c1b9038a0849ef73c38e076ca> /usr/lib/libicucore.A.dylib
0x382b7000 - 0x382b9ffc  libcompiler_rt.dylib armv7  <7add7c91a2673641b0c5f0433a203da6> /usr/lib/system/libcompiler_rt.dylib
0x382c0000 - 0x38334ff7  ProofReader armv7  <cc89a352199a393ba0e46af69e670ef9> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x3836d000 - 0x38437ff6  Celestial armv7  <bf58f2db2e333ea18da2f7abd0d89ae6> /System/Library/PrivateFrameworks/Celestial.framework/Celestial
0x38544000 - 0x38544ffd  liblangid.dylib armv7  <a04b639c18593885bd81bfa623a6f07c> /usr/lib/liblangid.dylib
0x385da000 - 0x385dbfff  libdyld.dylib armv7  <3a149b4730663b1ea84e4a0a68ccc689> /usr/lib/system/libdyld.dylib
0x3865d000 - 0x3865dfff  libCVMSPluginSupport.dylib armv7  <1fd63e8305ab3ca190b1ef6ab2555f9d> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x3865e000 - 0x38665ffe  XPCObjects armv7  <5bc4f7282e9d3945a6c1885217670667> /System/Library/PrivateFrameworks/XPCObjects.framework/XPCObjects
0x386ac000 - 0x386dafff  ToneLibrary armv7  <86305b3c7f323bf3a592e9ad06dcf36c> /System/Library/PrivateFrameworks/ToneLibrary.framework/ToneLibrary
0x386db000 - 0x38c2effb  UIKit armv7  <4f85b22a1eb73af08641066b29c4edb2> /System/Library/Frameworks/UIKit.framework/UIKit
0x38c51000 - 0x38c65ffb  SpringBoardUI armv7  <6db3ef412bce34cbabc921e728133932> /System/Library/PrivateFrameworks/SpringBoardUI.framework/SpringBoardUI
0x38c9e000 - 0x38ca3fff  CrashReporterSupport armv7  <7bde3532f2953f3894eb725379575926> /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport
0x38ef2000 - 0x38efcffd  IAP armv7  <6703a23c7d263f33992f15c7f407b50a> /System/Library/PrivateFrameworks/IAP.framework/IAP
0x38efd000 - 0x38f0effe  Accounts armv7  <07b95faa96e73ffeb52694cbad7f3528> /System/Library/Frameworks/Accounts.framework/Accounts
0x38f0f000 - 0x38f4afff  AppSupport armv7  <74ed50d2f7d23ce696b029dd817749c0> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x38f71000 - 0x39134ff9  Foundation armv7  <2e1ac190c4f837e2a1059043dd7b1c63> /System/Library/Frameworks/Foundation.framework/Foundation
0x39135000 - 0x39148ffc  AirTraffic armv7  <050ad0f6ad67391d9ff4ac52b3989981> /System/Library/PrivateFrameworks/AirTraffic.framework/AirTraffic
0x3914b000 - 0x39160fff  libresolv.9.dylib armv7  <e79b59a3406f34d9b37f8085955115ce> /usr/lib/libresolv.9.dylib
0x39161000 - 0x3916afff  libbz2.1.0.dylib armv7  <5258dce78afc3fd7934a5674b92ad785> /usr/lib/libbz2.1.0.dylib
0x391b0000 - 0x391fcfff  IMFoundation armv7  <fd1c50ba98f9307f8b06d074aed412b0> /System/Library/PrivateFrameworks/IMFoundation.framework/IMFoundation
0x39212000 - 0x39229fff  BackBoardServices armv7  <a5570d37cd3f30cbb9572a9cdb824126> /System/Library/PrivateFrameworks/BackBoardServices.framework/BackBoardServices
0x39270000 - 0x39270fff  libkeymgr.dylib armv7  <8a2e3a8fdf9335e2867a33e2d1a9baf8> /usr/lib/system/libkeymgr.dylib
0x392bb000 - 0x392bdffd  libCoreVMClient.dylib armv7  <4fd03b13dbfe32628adc789367f48ce1> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x393b9000 - 0x393cfffb  VoiceServices armv7  <9f5307bc0cf3398e8b0770d924acb29e> /System/Library/PrivateFrameworks/VoiceServices.framework/VoiceServices
0x393d0000 - 0x393e4ffb  MediaStream armv7  <6407c7a70ae73ab5b0be275904748ac7> /System/Library/PrivateFrameworks/MediaStream.framework/MediaStream
0x393e5000 - 0x393eafff  libcopyfile.dylib armv7  <15aa2c3c8d523273913d4fc6717d3b7c> /usr/lib/system/libcopyfile.dylib
0x393eb000 - 0x395a0ba7  CoreData armv7  <a42aa4f0f01833c390bc8c6c394dda1c> /System/Library/Frameworks/CoreData.framework/CoreData
0x395a1000 - 0x3961efff  Social armv7  <372107c520dc3ff8ac018bd2b7485027> /System/Library/Frameworks/Social.framework/Social
0x39620000 - 0x396a6ff4  libsystem_c.dylib armv7  <d45dc8901531343caf9b7e703d3eba50> /usr/lib/system/libsystem_c.dylib
0x396a8000 - 0x397a6b77  libobjc.A.dylib armv7  <5224e803eca737a4b2c6451d136b3d28> /usr/lib/libobjc.A.dylib
0x397bf000 - 0x397d7ffb  AssistantServices armv7  <be4226adb57e389093367b0b923afa9b> /System/Library/PrivateFrameworks/AssistantServices.framework/AssistantServices
0x397d8000 - 0x39a8dfff  libLAPACK.dylib armv7  <dd6f3958c3d536d6be90836682d2ffee> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x39acd000 - 0x39b0cfff  SystemConfiguration armv7  <44d84d23d10f344c90b4d9e9611ec976> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x39b7e000 - 0x39b87ffa  MobileWiFi armv7  <43de6d03af0838f2a1eeec10d4149e9d> /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
0x3a109000 - 0x3a11aff8  SpringBoardServices armv7  <8b9821bc87ba354297392cb50da7be58> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x3a11b000 - 0x3a3a1ffe  AudioToolbox armv7  <6a4804d0e35e362dbad6f047c25227ca> /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x3a3b2000 - 0x3a4c7fff  QuartzCore armv7  <d96571a6986c3012b315cb860f4d65ca> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x3a6c7000 - 0x3a6cdfff  libcommonCrypto.dylib armv7  <690aaa493b5c3f9582499f174adf4964> /usr/lib/system/libcommonCrypto.dylib
0x3a6ce000 - 0x3a6cfffc  DataMigration armv7  <25f8874067393208acc083124bc3eb86> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x3a74f000 - 0x3a750fff  libdnsinfo.dylib armv7  <6c912cedc1e938ad914dfce91a529b68> /usr/lib/system/libdnsinfo.dylib
0x3a751000 - 0x3a753fff  OAuth armv7  <d3e2bc9ae64b31f0a89c52dc1c2797fc> /System/Library/PrivateFrameworks/OAuth.framework/OAuth
0x3a78d000 - 0x3a7f1ffb  AddressBook armv7  <bdf14ca2b4fb32e5bdb2a9fafb460f09> /System/Library/Frameworks/AddressBook.framework/AddressBook
0x3a7f2000 - 0x3a98bfff  MediaPlayer armv7  <b283f42b49793e61b25341fea2830ff5> /System/Library/Frameworks/MediaPlayer.framework/MediaPlayer
0x3a9b4000 - 0x3a9b4fff  libunwind.dylib armv7  <85e7546accc23ae1a973da4758512b7f> /usr/lib/system/libunwind.dylib
0x3a9c0000 - 0x3a9ceffd  libsystem_network.dylib armv7  <d0fb0eda6cb53a4da859d598c59e7522> /usr/lib/system/libsystem_network.dylib
0x3a9fc000 - 0x3aa19ff9  libdispatch.dylib armv7  <4abccf75caf33fa5a0c6037b2e1c5f41> /usr/lib/system/libdispatch.dylib
6cdfff  libcommonCrypto.dylib armv7  &lt;690aaa493b5c3f9582499f174adf4964&gt; /usr/lib/system/libcommonCrypto.dylib
0x3a6ce000 - 0x3a6cfffc  DataMigration armv7  &lt;25f8874067393208acc083124bc3eb86&gt; /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x3a6d0000 - 0x3a70dff9  libGLImage.dylib armv7  &lt;7db25f3d55b93f31868e37326fba1e57&gt; /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x3a74f000 - 0x3a750fff  libdnsinfo.dylib armv7  &lt;6c912cedc1e938ad914dfce91a529b68&gt; /usr/lib/system/libdnsinfo.dylib
0x3a751000 - 0x3a753fff  OAuth armv7  &lt;d3e2bc9ae64b31f0a89c52dc1c2797fc&gt; /System/Library/PrivateFrameworks/OAuth.framework/OAuth
0x3a78d000 - 0x3a7f1ffb  AddressBook armv7  &lt;bdf14ca2b4fb32e5bdb2a9fafb460f09&gt; /System/Library/Frameworks/AddressBook.framework/AddressBook
0x3a7f2000 - 0x3a98bfff  MediaPlayer armv7  &lt;b283f42b49793e61b25341fea2830ff5&gt; 
</string>
    <key>displayName</key>
    <string>KalExample</string>
    <key>name</key>
    <string>KalExample</string>
    <key>os_version</key>
    <string>iPhone OS 6.0.1 (10A523)</string>
    <key>system_ID</key>
    <string></string>
    <key>version</key>
    <string>??? (???)</string>
</dict>
</plist> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:11:20.093

从崩溃报告中，我了解到您的应用程序此时已崩溃

```
10  CoreFoundation                  0x32919b70 -[__NSArrayM objectAtIndex:] + 160
11  KalExample                      0x00003320 0x1000 + 8992 
```

在 KalExample 中，您尝试使用边界超出 NSArray 索引的对象，因此您的应用程序正在崩溃。所以解决这个问题并重新提交申请

# android - 阅读存储在我的 android gmail 应用程序中的邮件

> ID：14155008
> 
> 赞同：0
> 
> 时间：2013-01-04T10:07:54.213
> 
> 标签：android, gmail, android-contentresolver

是否可以使用 a或任何其他方式阅读在我的 android **gmail 应用程序中排序的电子邮件？**`content resolver`我知道这是一种肮脏的方式，但该应用程序不会发布。

**不能通过 javamail 访问 gmail。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:28:14.660

除非您创建一个电子邮件应用程序并且用户使用相同的 gmail 凭据从该应用程序登录，否则无法访问 Gmail 应用程序的电子邮件。

# c# - 带有字符串的 Sql 查询不符合条件

> ID：14155009
> 
> 赞同：0
> 
> 时间：2013-01-04T10:08:00.287
> 
> 标签：c#, sql-server

我有一个 sql 查询

```
Select Itemcode from StocktransferlocationDetails 
where Projectname='" +  projectname_stockout + "'  and 
       Stocktransferlocation !='" + location_stockout + "' and Status='Open' 
```

在 C# 中使用时无法正常工作，但在 SQl 中正确工作我在 sql 中使用了以下查询

```
 Select Itemcode from StocktransferlocationDetails 
  where Projectname='iupl'  and Stocktransferlocation !='Chennai-Bangalore' 
        and Status='Open' 
```

这个怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:17:56.647

它必须是带引号的字符串，您应该使用 SqlParameter 来防止 Sql 注入。

```
var sql = "Select Itemcode 
              from StocktransferlocationDetails 
              where Projectname = @ProjectName  
              and Stocktransferlocation <> @Stocktransferlocation 
              and Status='Open'";

var param1 = new SqlParameter("@ProjectName", projectname_stockout);
var param2 = new SqlParameter("@Stocktransferlocation", location_stockout); 
```

这只是解决方案的一部分，您应该使用 SqlCommand 对象来使用参数填充查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:21:46.400

在 C# 中你应该这样使用：-

```
string query="Select Itemcode from StocktransferlocationDetails"+ 
+" where Projectname=" +  projectname_stockout + "  and "+
      +" Stocktransferlocation !=" + location_stockout + " and Status='open'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T10:42:37.330

找出发送到 SQL Server 的查询。

1.  来自代码（您的查询字符串）。
2.  使用 SQL Server Profiler（从 Microsoft SQL Server Management Studio > 工具 > SQL Server Profiler 打开）。

来自代码的查询和管理工作室中的查询肯定有所不同。

# cordova - phonegap v2.2 支持的最低黑莓版本？

> ID：14155010
> 
> 赞同：0
> 
> 时间：2013-01-04T10:08:06.570
> 
> 标签：cordova, blackberry

我正在尝试从 phonegap 网站和谷歌群组中查找此信息，但没有可用的信息。我无法在 Blackberry v4.6 上部署一个简单的 hello world 应用程序。这是phonegap的要求还是我错过了什么？PS：在尝试在设备上部署之前，我已经使用从 Blackberry 获得的密钥对应用程序进行了签名。我还尝试`ant blackberry load-device`通过黑莓桌面管理器进行部署。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:52:41.913

根据此[列表](http://phonegap.com/about/feature "Phonegap 支持：黑莓")，支持 Blackberry OS 5.x 和 Blackberry OS 6.0+。在[Apache Cordova 文档](http://docs.phonegap.com/en/2.2.0/guide_getting-started_blackberry_index.md.html#Getting%20Started%20with%20Blackberry "黑莓入门")中，它提到

> 用于 BlackBerry 的 Cordova 使用 BlackBerry WebWorks 框架。BlackBerry WebWorks 工具可用于 Windows 或 Mac 环境。WebWorks 应用程序只能部署到运行 OS 5.0 或更高版本的 BlackBerry 设备或 BlackBerry PlayBook 操作系统。

# javascript - Fancybox表单ajax提交，只有一个ajax请求

> ID：14155013
> 
> 赞同：1
> 
> 时间：2013-01-04T10:08:21.583
> 
> 标签：javascript, jquery, html, fancybox

我有一个关于 ajax 提交的问题。

我有一个 html 表单

```
<div style="display:none">
    <form id="myform" method="post" action="">
        <input type="text" id="name" />
        <input type="submit" id="sbmt" />
    </form>
</div> 
```

和按钮打开fancybox：

```
<a id="sbtfancybox" href="#myform">
    <input type="button" value="Add new" 
           onClick="defineFancybox();" />
</a> 
```

我用jquery定义了一个fancybox：

```
<script type="text/javascript">
    function defineFancybox() {
        $('#sbtfancybox').fancybox({
            //...some json parameters
        });

        $('#myform').submit(function() {//the main problem is here
             //....calling an ajax
             return false;
        });
    }
</script> 
```

我的问题是如何做到`$('#myform').submit(..)`提交总是被调用一次，而不是如果我第一次打开fancybox，`$('#myform').submit()`调用一次，如果我第二次打开fancybox，`$('#myform').submit()`调用两次，如果我打开fancybox第三次则`$('#myform').submit()`称为树次等。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:12:52.720

jQuery 事件处理程序不会相互覆盖，即使在您再次绑定同一个函数的情况下也是如此。每次调用此代码时：

```
$('#myform').submit(function() {//the main problem is here
    //....calling an ajax
    return false;
}); 
```

添加了另一个事件处理程序。由于该代码位于单击按钮时调用的函数中，因此第一次单击会产生一个事件处理程序。第二次点击添加了另一个，所以你现在有两个。第三次点击添加了另一个，所以你有三个...

由于表单似乎不是动态创建的，因此您可以在页面加载时绑定单个事件处理程序：

```
$(document).ready(function() {
    $('#myform').submit(function() {
        //....calling an ajax
        return false;
    });
}); 
```

然后将其移出该`defineFancybox()`功能。

如果您绝对*必须*将事件处理程序绑定保留在该函数中，那么您可以使用[`.off()`](http://api.jquery.com/off/)（或者[`.unbind()`](http://api.jquery.com/unbind/)如果您使用的是 1.7 之前的版本）函数在绑定新事件处理程序之前删除任何现有的事件处理程序：

```
$('#myform').off('submit').submit(function() {
    //....calling an ajax
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T10:13:37.493

您是否尝试过`.one()`处理程序：

```
$('#myform').one('submit', function() {//This will make it submitted once
    //....calling an ajax
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T10:30:29.667

你可以做类似的事情

```
 $('#myform').unbind('submit');
    $('#myform').bind('submit',function() {//the main problem is here
         //....calling an ajax
         return false;
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T19:19:56.127

您可以尝试以下方法

```
$("#myform").each(function(i) {
    var handler = i.on("submit", function() {
        handler.stop();
        // do stuff
    });
    // other stuff
}); 
```

# javascript - jQuery Mobile 绑定 Spinner 到 ChangePage

> ID：14155019
> 
> 赞同：1
> 
> 时间：2013-01-04T10:08:49.140
> 
> 标签：javascript, jquery, jquery-mobile, binding, jquery-events

经过很多谷歌和阅读论坛后，我还没有找到合适的答案。

到目前为止，我发现的内容如下：

*   显示加载消息
*   呼叫变更页面
*   隐藏加载消息

这会起作用，但每次我调用加载/更改页面时我都必须这样做（这很多）。

这将使我要么使中间人功能如下：

```
function customLoader(url){
    showLoader();
    $.mobile.changePage(url);
    hideLoader();
} 
```

无论如何将其绑定到更改页面事件？这样它就显示从第二个 changePage 被调用，但一旦 changePage 离开就隐藏......

我知道上面的中间人方法会起作用，但由于有很多 html/js 文件，我希望实现更整洁、更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T10:16:29.693

像这样的东西：

```
$('#index').live('pagebeforeshow',function(e,data){    
    $('#test-button').live('click', function(e) {
        $.mobile.showPageLoadingMsg(true);
        setTimeout(function () {
            $.mobile.changePage('#second');
        }, 1000);
    });    
});

$("#second").live('pageshow', function () {
    $.mobile.hidePageLoadingMsg();
}); 
```

超时只是在这里，您可以看到它正在成功运行。这是一个轻量级的示例，因此过渡会快速触发。在您的真实代码中删除它。

这是一个例子：http: [//jsfiddle.net/Gajotres/arrHd/](http://jsfiddle.net/Gajotres/arrHd/)

当页面 A 转换到页面 B 时，每个更改页面事件周期都会发生事件顺序。无论使用哪个操作来触发更改页面，您始终可以在页面 B i 成功加载时禁用它。如果您想了解有关页面加载顺序的更多信息，请查看此链接：[https](https://stackoverflow.com/a/14010308/1848600) ://stackoverflow.com/a/14010308/1848600 。在那里你会发现很多关于 jQM 页面动态的信息。

如果您想在每个页面转换中实现这一点，请使用：

```
$('[data-role="page"]').live('pageshow', function () {
    $.mobile.hidePageLoadingMsg();
}); 
```

每次成功加载和显示不同的页面时，这将隐藏一个 ajax 加载器（如果它是打开的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-10T02:45:23.413

也许对很多人来说太多了，但我找到了一个与[这个问题](https://stackoverflow.com/questions/18405508/how-to-stop-jquery-mobile-calling-mobile-loadinghide-during-changepage/25225037#25225037)的评论中写的不同的解决方案。

我使用[jquery 移动路由器](http://github.com/azicchetti/jquerymobile-router)并在页面的“显示”事件中使用`$.mobile.loading("show");`，所以当页面出现时，它会显示加载微调器。

我更多地使用 Jquery Mobile Router，但它解决了这个问题。

虽然要隐藏微调器，但我不得不使用`$('.ui-loader').hide();`，这很奇怪，我知道......

（也许只听正确的事件并触发微调器也可以工作，因为这就是 JQMR 所做的......）

我正在使用 JQM 1.4.2 ...

# google-maps - 标记集群关于位置、市场等的附加信息

> ID：14155023
> 
> 赞同：0
> 
> 时间：2013-01-04T10:09:02.410
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我使用 Google Maps Api v3 生成地图。

当然，地图上包含标记，它们中的一些被分组到集群中（取决于缩放）。

我需要它来获取这些集群的“内容”，以及分组标记的 ID，并添加带有附加信息的简单覆盖层。

你能帮我如何获得分组标记的信息吗？

预先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:49:21.637

最简单的方法是使用[MakerClusterPlus](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/docs/reference.html)。有方法getClusterClass()。

# ruby-on-rails - 无法在 Rails “remote: true” 表单中显示错误？

> ID：14155024
> 
> 赞同：2
> 
> 时间：2013-01-04T10:09:05.340
> 
> 标签：ruby-on-rails, ajax, forms

我试图在我的 ajax 表单中显示错误消息（代码基于[这个](https://stackoverflow.com/questions/5306380/error-handling-with-ajax-in-rails-3)问题）：

**post_controller.rb：**

```
 def create
    @post = current_user.posts.build(params[:post])
    if params[:commit] == "Publish"
      @post.status = "Published"
    elsif params[:commit] == "Save Draft"
      @post.status = "Draft"
    end

    respond_to do |format|
      format.html do
        if @post.save && @post.status == "Published"
          flash[:success] = "Post published"
          redirect_to @post
        elsif @post.save && @post.status == "Draft"
          flash[:success] = "Post saved as draft"
          render 'edit'
        else
          render 'new'
        end
      end
      format.js do
        @post.save
      end
    end
  end 
```

**帖子/create.js.erb：**

```
<% if @post.errors.any? %>
  alert('There are errors.');
  <%= render :partial=>'js_errors', :locals=> { :target=> @post } %>
<% else %>
  $('.busy').html('Saved.');
<% end %> 
```

**js_errors.js.erb：**

```
<% target.errors.full_messages.each do |error| %>
  $('.busy').append('<p><%= escape_javascript( error ) %></p>');
<% end %> 
```

**帖子/new.html.erb：**

```
<%= form_for(@post, remote: true, :html => { :multipart => true }) do |f| %>
  <%= render 'fields', f: f %>
  <div class="form-actions">
    <%= f.submit "Publish", class: "publish btn btn-primary pull-left" %>
    <%= f.submit "Save Draft", class: "save-draft btn btn-default pull-left" %>
    <div class="busy pull-left">
    </div>
  </div>
<% end %> 
```

但由于某种原因，什么都没有显示（`.busy`始终保持空白）。

在控制台中，我可以看到`js_errors.js.erb`正在显示：

> 在 2013-01-04 18:02:18 +0800 开始 POST "/posts" for 127.0.0.1 由 PostsController#create as JS 参数处理：{"utf8"=>"✓", "authenticity_token"=>"Qfn6HsPPDxyB1t4bM/ OQKPbJ/aoAMkp74y0Z6xkoXCY=", "post"=>{"title"=>"", "content"=>"", "tag_list"=>""}, "_wysihtml5_mode"=>"1", "commit"= >"Save Draft"} 用户负载 (0.7ms) SELECT "users".* FROM "users" WHERE "users"."remember_token" = 'ljl0ZsuoiHg0Jilz8bgy-g' LIMIT 1 (0.2ms) 开始事务
> (0.2ms) 回滚事务渲染的帖子/_js_errors.js.erb (3.8ms) 渲染的帖子/create.js.erb (7.5ms）在 25ms 内完成 200 OK（查看：11.2ms | ActiveRecord：1.0ms | Solr：0.0ms）

可能是什么问题呢？

（如果我`remote:true`从表单中删除，我确实会看到验证消息）。

**编辑：**

我注意到`alert('There are errors.');`没有被触发。奇怪的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:38:49.027

I have been facing a similar problem a few days ago. I used `remote => true` option in my form to use Ajax in my Rails 3 application. After that, I have been looking for solution for validating my form fields. After trying a good number of jQuery / Javascript approaches (none of them worked for me though) I came to know about a superb gem called client_side_validations. It is very easy to install by following the instructions on github link ([https://github.com/bcardarella/client_side_validations](https://github.com/bcardarella/client_side_validations)). It works like charm for client side validation of form fields, an awesome gem indeed. Hope this helps with people who are tired of looking for a simple solution for client side validation of model fields after using Ajax in Rails 3 application.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:16:41.833

它看起来像一个命名问题。您要求渲染*partial* `js_errors`，这将被称为`_js_errors.js.erb`; 但你说你的文件实际上是被调用的`js_errors.js.erb`（没有前导下划线）。

尝试添加下划线，看看是否有帮助。

# haskell - repa 中的动态规划

> ID：14155032
> 
> 赞同：6
> 
> 时间：2013-01-04T10:09:30.867
> 
> 标签：haskell, repa

两个相关的问题。

*   [repa](http://repa.ouroborus.net/)数组没有可变（ST monad）实现是否有原因？等效于[Data.Vector.Mutable](http://hackage.haskell.org/packages/archive/vector/0.5/doc/html/Data-Vector-Mutable.html)但具有形状。

*   与此相关，应该如何在未装箱的表示中实现动态编程算法（从**同一**数组的其他元素计算的数组元素）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T22:00:16.960

Repa 专为批量数据并行编程而设计。必须可以以任意顺序计算数组元素，否则 Repa 评估方法将不起作用。

如果您想根据其他数组元素破坏性地更新数组元素，那么这会限制评估顺序。如果您不能以批量数据并行方式表达您的算法，那么 Repa 不会帮助您。

# python - Python IRC bot 奇怪的输出

> ID：14155036
> 
> 赞同：0
> 
> 时间：2013-01-04T10:09:38.490
> 
> 标签：python, irc

我写了一个 pms 并通知指定昵称的代码：

```
 @hook.command
    def privatemsg(inp,nick="",conn=None):
        conn.cmd('PRIVMSG',[inp,''])
    @hook.command
    def notice(inp,nick="",conn=None):
        conn.cmd('NOTICE',[inp,'']) 
```

但是当我执行 .notice Tom hi 时，问题就出现了，它输出类似 -Bot-hi*的内容*：* * .privatemsg Tom hi 也一样，输出 -Bot-hi：

如何删除**:**？我试过改变''但它仍然显示：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:37:02.860

我认为通知的正确语法是

```
conn.cmd('NOTICE', [nick, msg]) 
```

但是 skybot 中已经有一个内置功能可以做到这一点。看看它是如何使用的[告诉插件](https://github.com/rmmh/skybot/blob/master/plugins/tell.py#L59)（它可能已经实现了你想要做的事情？）。

# ios - 为什么 UIProgressView 不更新？

> ID：14155042
> 
> 赞同：1
> 
> 时间：2013-01-04T10:09:48.913
> 
> 标签：ios, xcode, uiprogressview

我正在尝试设置 UIProgressView 的进度，但 progressView 没有“更新”。为什么？你知道我做错了什么吗？

这是我在 ViewController.h 中的代码：

```
 IBOutlet UIProgressView *progressBar; 
```

这是 ViewController.m 中的代码：

```
- (void)viewDidLoad
{
[super viewDidLoad];

progressBar.progress = 0.0;

[self performSelectorOnMainThread:@selector(progressUpdate) withObject:nil waitUntilDone:NO];

}

-(void)progressUpdate {

float actual = [progressBar progress];
if (actual < 1) {
    progressBar.progress = actual + 0.1;
    [NSTimer scheduledTimerWithTimeInterval:1.0 target:self `selector:@selector(progressUpdate) userInfo:nil repeats:NO];`
}
else {

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:23:28.860

尝试打电话`[progressBar setProgress:<value> animated:YES];`而不是`progressBar.progress = <value>`

编辑：看看这个，它看起来很像你的例子：[Objective c : How to set time and progress of uiprogressview dynamic?](https://stackoverflow.com/questions/12759243/objective-c-how-to-set-time-and-progress-of-uiprogressview-dynamically)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T10:24:08.990

仔细检查 ProgressBar 在 Interface Builder 中是否正确链接。

如果它仍然不起作用，请尝试使用`[progressBar setProgress:0];`and `[progressBar setProgress:actual+0.1];`。

也知道 UIProgressView 有一个`[progressBar setProgress:<value> animated:YES];`方法。可能看起来更干净。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-07T10:28:06.077

它应该是这样的：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    progressBar.progress = 0.0;
    [self performSelectorInBackground:@selector(progressUpdate) withObject:nil];
}

-(void)progressUpdate {
    for(int i = 0; i<100; i++){
        [self performSelectorOnMainThread:@selector(setProgress:) withObject:[NSNumber numberWithFloat:(1/(float)i)] waitUntilDone:YES];   
    }
}

- (void)setProgress:(NSNumber *)number
{
   [progressBar setProgress:number.floatValue animated:YES];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-09T15:18:12.720

今天早上我遇到了同样的问题。似乎progressBar 部分位于UITableView 之上。我移动了一点，使它不再重叠。

我不确定这是为什么。它应该在原来的情况下工作，但这就是我解决它的方法。

# objective-c - 加载 .xib 时出错 - 应用程序崩溃

> ID：14155044
> 
> 赞同：0
> 
> 时间：2013-01-04T10:09:51.077
> 
> 标签：objective-c, ios, interface-builder, exc-bad-access

我正用头撞砖墙。我正在尝试以通常的方式将视图推送到 UINavigationController 上：

```
[[self navigationController]pushViewController:vc animated:YES]; 
```

当我这样做时，应用程序崩溃并出现以下错误：

```
 __CFStringEncodeByteStream + 17
Thread 1: EXC_BAD_ACCESS (code=2,address=xxxxx) 
```

现在，我用 XCode 提供的模板替换了有问题的 ViewController，但我没有收到错误，所以问题一定出在我的 UIViewController 类上。此外，如果我将笔尖名称替换为模板 UIViewController 类的名称，它就可以工作。即

```
MyViewController *myVc = [[MyViewController alloc]initWithNibName:@"XCodeViewController" bundle:nil]; 
```

这让我认为问题实际上出在笔尖上，而不是课程本身。我检查了所有连接，没有错误或警告。

希望有人可以提供帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T17:06:53.550

我正在处理一个与您类似的非常令人沮丧的错误，并且一切就绪。新创建的 xib 被添加到 Bundle 资源中，没有 nil 指针或释放指针，设置了 NSZombieEnabled。文件的所有者也设置为正确的 ViewController

和学长坐了30分钟后，我们终于明白哪里不对了——

在新创建的 Xib 中，即使您将文件的所有者分配给 ViewController，您还需要采取额外的步骤。您还需要将主视图的引用插座设置为文件的所有者。最简单的方法是将引用出口（从连接检查器）上的“+”号拖到文档大纲中的“文件所有者”。在此之后，您只需要单击弹出的“查看”，您应该会很好。

希望对您或其他面临同样问题的人有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:28:32.650

需要更多信息来回答，我可以提供一些可能性。

检查类名称是否在您的身份检查器中正确映射。并检查您的连接。如果您的视图在 xib. 等中映射。如果您在 6.0 以下的操作系统中运行应用程序并使用自动布局等功能构建，则会导致崩溃。

有多种可能性。

希望这能提供一个见解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T10:17:40.477

检查您的 nib 是否已添加到应用程序包中。你可以通过选择你的项目文件->构建阶段->复制捆绑资源来做到这一点。如果它不存在，请添加它。

我昨天遇到了同样的问题，这就是问题所在。

我希望它有所帮助。

# gcc - 如何在没有扩展内联 asm 的情况下在 gcc 内联汇编中声明和初始化局部变量？

> ID：14155046
> 
> 赞同：5
> 
> 时间：2013-01-04T10:09:57.587
> 
> 标签：gcc, scope, inline-assembly, local-variables

我知道这是一个非常基本的问题，但我真的坚持下去。事实上，我绝对是 GCC 语法的新手。

我想在不使用扩展内联汇编的情况下拥有局部变量（带标签的堆栈地址）。类似于 Intel 语法中的以下代码：

```
DATA1  DB  100 
MOV AL, DATA1 
```

这是我猜想可以在 GCC 中替代的代码：

```
int someFunction(int x)
{
    __asm__ volatile(
                     "function1:"
                     ".data;"
                     ".2byte $4 data1   ;"

                     ".text;"
                     "pushq %rbp;"
                     "movq %rsp , %rbp ;"

                     "movl var , %eax;"  // this is source of error

                     "popq %rbp;"
                     "leaveq;"
                     "retq ; "
                    ); 
} 
```

但是这段代码会导致这个错误：

> 未找到体系结构 x86_64 的符号

我可以在 x86 中使用全局变量，但同样的结果出现在 x64 或 x86_x64 中。

设置：LLVM 4.1；Xcode 4 中使用的 Cocoa

什么是正确的语法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T07:54:43.523

GCC 内联汇编器不支持局部变量，使用[GCC 的扩展语法](https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html)。

如果您对 AT&T 语法感到不舒服，可以通过多种方式[在 GCC 上使用 Intel 语法](https://xorl.wordpress.com/2009/01/01/intel-syntax-on-gcc/)。

这是[GCC asm 的一个很好的操作指南](https://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html)。

# java - 来自国家名称的 ISO2 国家代码

> ID：14155049
> 
> 赞同：45
> 
> 时间：2013-01-04T10:10:09.493
> 
> 标签：java, country-codes

Java中是否有一种简单的方法可以从给定的国家名称获取ISO2代码，例如“瑞士”时的“CH”？

目前我能想到的唯一解决方案是将所有国家代码和名称保存在一个数组中并对其进行迭代。还有其他（更简单的）解决方案吗？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-01-04T10:19:24.813

您可以使用内置`Locale`类：

```
Locale l = new Locale("", "CH");
System.out.println(l.getDisplayCountry()); 
```

例如打印“瑞士”。请注意，我没有提供语言。

因此，您可以为反向查找做的是从可用国家/地区构建地图：

```
public static void main(String[] args) throws InterruptedException {
    Map<String, String> countries = new HashMap<>();
    for (String iso : Locale.getISOCountries()) {
        Locale l = new Locale("", iso);
        countries.put(l.getDisplayCountry(), iso);
    }

    System.out.println(countries.get("Switzerland"));
    System.out.println(countries.get("Andorra"));
    System.out.println(countries.get("Japan"));
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-04T10:16:10.587

正如其他人提到的那样，地图是最简单的方法，这就是我在遇到相同问题时编写/使用的内容。

```
 import java.util.Map;
 import java.util.TreeMap;

 public class CountryCodes {
     final Map<String, String> map = new TreeMap<String, String>   (String.CASE_INSENSITIVE_ORDER);
    public CountryCodes() {

     map.put("Andorra, Principality Of", "AD");
     map.put("United Arab Emirates", "AE");
     map.put("Afghanistan, Islamic State Of", "AF");
     map.put("Antigua And Barbuda", "AG");
     map.put("Anguilla", "AI");
     map.put("Albania", "AL");
     map.put("Armenia", "AM");
     map.put("Netherlands Antilles", "AN");
     map.put("Angola", "AO");
     map.put("Antarctica", "AQ");
     map.put("Argentina", "AR");
     map.put("American Samoa", "AS");
     map.put("Austria", "AT");
     map.put("Australia", "AU");
     map.put("Aruba", "AW");
     map.put("Azerbaidjan", "AZ");
     map.put("Bosnia-Herzegovina", "BA");
     map.put("Barbados", "BB");
     map.put("Bangladesh", "BD");
     map.put("Belgium", "BE");
     map.put("Burkina Faso", "BF");
     map.put("Bulgaria", "BG");
     map.put("Bahrain", "BH");
     map.put("Burundi", "BI");
     map.put("Benin", "BJ");
     map.put("Bermuda", "BM");
     map.put("Brunei Darussalam", "BN");
     map.put("Bolivia", "BO");
     map.put("Brazil", "BR");
     map.put("Bahamas", "BS");
     map.put("Bhutan", "BT");
     map.put("Bouvet Island", "BV");
     map.put("Botswana", "BW");
     map.put("Belarus", "BY");
     map.put("Belize", "BZ");
     map.put("Canada", "CA");
     map.put("Cocos (Keeling) Islands", "CC");
     map.put("Central African Republic", "CF");
     map.put("Congo, The Democratic Republic Of The", "CD");
     map.put("Congo", "CG");
     map.put("Switzerland", "CH");
     map.put("Ivory Coast (Cote D'Ivoire)", "CI");
     map.put("Cook Islands", "CK");
     map.put("Chile", "CL");
     map.put("Cameroon", "CM");
     map.put("China", "CN");
     map.put("Colombia", "CO");
     map.put("Costa Rica", "CR");
     map.put("Former Czechoslovakia", "CS");
     map.put("Cuba", "CU");
     map.put("Cape Verde", "CV");
     map.put("Christmas Island", "CX");
     map.put("Cyprus", "CY");
     map.put("Czech Republic", "CZ");
     map.put("Germany", "DE");
     map.put("Djibouti", "DJ");
     map.put("Denmark", "DK");
     map.put("Dominica", "DM");
     map.put("Dominican Republic", "DO");
     map.put("Algeria", "DZ");
     map.put("Ecuador", "EC");
     map.put("Estonia", "EE");
     map.put("Egypt", "EG");
     map.put("Western Sahara", "EH");
     map.put("Eritrea", "ER");
     map.put("Spain", "ES");
     map.put("Ethiopia", "ET");
     map.put("Finland", "FI");
     map.put("Fiji", "FJ");
     map.put("Falkland Islands", "FK");
     map.put("Micronesia", "FM");
     map.put("Faroe Islands", "FO");
     map.put("France", "FR");
     map.put("France (European Territory)", "FX");
     map.put("Gabon", "GA");
     map.put("Great Britain", "UK");
     map.put("Grenada", "GD");
     map.put("Georgia", "GE");
     map.put("French Guyana", "GF");
     map.put("Ghana", "GH");
     map.put("Gibraltar", "GI");
     map.put("Greenland", "GL");
     map.put("Gambia", "GM");
     map.put("Guinea", "GN");
     map.put("Guadeloupe (French)", "GP");
     map.put("Equatorial Guinea", "GQ");
     map.put("Greece", "GR");
     map.put("S. Georgia & S. Sandwich Isls.", "GS");
     map.put("Guatemala", "GT");
     map.put("Guam (USA)", "GU");
     map.put("Guinea Bissau", "GW");
     map.put("Guyana", "GY");
     map.put("Hong Kong", "HK");
     map.put("Heard And McDonald Islands", "HM");
     map.put("Honduras", "HN");
     map.put("Croatia", "HR");
     map.put("Haiti", "HT");
     map.put("Hungary", "HU");
     map.put("Indonesia", "ID");
     map.put("Ireland", "IE");
     map.put("Israel", "IL");
     map.put("India", "IN");
     map.put("British Indian Ocean Territory", "IO");
     map.put("Iraq", "IQ");
     map.put("Iran", "IR");
     map.put("Iceland", "IS");
     map.put("Italy", "IT");
     map.put("Jamaica", "JM");
     map.put("Jordan", "JO");
     map.put("Japan", "JP");
     map.put("Kenya", "KE");
     map.put("Kyrgyz Republic (Kyrgyzstan)", "KG");
     map.put("Cambodia, Kingdom Of", "KH");
     map.put("Kiribati", "KI");
     map.put("Comoros", "KM");
     map.put("Saint Kitts & Nevis Anguilla", "KN");
     map.put("North Korea", "KP");
     map.put("South Korea", "KR");
     map.put("Kuwait", "KW");
     map.put("Cayman Islands", "KY");
     map.put("Kazakhstan", "KZ");
     map.put("Laos", "LA");
     map.put("Lebanon", "LB");
     map.put("Saint Lucia", "LC");
     map.put("Liechtenstein", "LI");
     map.put("Sri Lanka", "LK");
     map.put("Liberia", "LR");
     map.put("Lesotho", "LS");
     map.put("Lithuania", "LT");
     map.put("Luxembourg", "LU");
     map.put("Latvia", "LV");
     map.put("Libya", "LY");
     map.put("Morocco", "MA");
     map.put("Monaco", "MC");
     map.put("Moldavia", "MD");
     map.put("Madagascar", "MG");
     map.put("Marshall Islands", "MH");
     map.put("Macedonia", "MK");
     map.put("Mali", "ML");
     map.put("Myanmar", "MM");
     map.put("Mongolia", "MN");
     map.put("Macau", "MO");
     map.put("Northern Mariana Islands", "MP");
     map.put("Martinique (French)", "MQ");
     map.put("Mauritania", "MR");
     map.put("Montserrat", "MS");
     map.put("Malta", "MT");
     map.put("Mauritius", "MU");
     map.put("Maldives", "MV");
     map.put("Malawi", "MW");
     map.put("Mexico", "MX");
     map.put("Malaysia", "MY");
     map.put("Mozambique", "MZ");
     map.put("Namibia", "NA");
     map.put("New Caledonia (French)", "NC");
     map.put("Niger", "NE");
     map.put("Norfolk Island", "NF");
     map.put("Nigeria", "NG");
     map.put("Nicaragua", "NI");
     map.put("Netherlands", "NL");
     map.put("Norway", "NO");
     map.put("Nepal", "NP");
     map.put("Nauru", "NR");
     map.put("Neutral Zone", "NT");
     map.put("Niue", "NU");
     map.put("New Zealand", "NZ");
     map.put("Oman", "OM");
     map.put("Panama", "PA");
     map.put("Peru", "PE");
     map.put("Polynesia (French)", "PF");
     map.put("Papua New Guinea", "PG");
     map.put("Philippines", "PH");
     map.put("Pakistan", "PK");
     map.put("Poland", "PL");
     map.put("Saint Pierre And Miquelon", "PM");
     map.put("Pitcairn Island", "PN");
     map.put("Puerto Rico", "PR");
     map.put("Portugal", "PT");
     map.put("Palau", "PW");
     map.put("Paraguay", "PY");
     map.put("Qatar", "QA");
     map.put("Reunion (French)", "RE");
     map.put("Romania", "RO");
     map.put("Russian Federation", "RU");
     map.put("Rwanda", "RW");
     map.put("Saudi Arabia", "SA");
     map.put("Solomon Islands", "SB");
     map.put("Seychelles", "SC");
     map.put("Sudan", "SD");
     map.put("Sweden", "SE");
     map.put("Singapore", "SG");
     map.put("Saint Helena", "SH");
     map.put("Slovenia", "SI");
     map.put("Svalbard And Jan Mayen Islands", "SJ");
     map.put("Slovak Republic", "SK");
     map.put("Sierra Leone", "SL");
     map.put("San Marino", "SM");
     map.put("Senegal", "SN");
     map.put("Somalia", "SO");
     map.put("Suriname", "SR");
     map.put("Saint Tome (Sao Tome) And Principe", "ST");
     map.put("Former USSR", "SU");
     map.put("El Salvador", "SV");
     map.put("Syria", "SY");
     map.put("Swaziland", "SZ");
     map.put("Turks And Caicos Islands", "TC");
     map.put("Chad", "TD");
     map.put("French Southern Territories", "TF");
     map.put("Togo", "TG");
     map.put("Thailand", "TH");
     map.put("Tadjikistan", "TJ");
     map.put("Tokelau", "TK");
     map.put("Turkmenistan", "TM");
     map.put("Tunisia", "TN");
     map.put("Tonga", "TO");
     map.put("East Timor", "TP");
     map.put("Turkey", "TR");
     map.put("Trinidad And Tobago", "TT");
     map.put("Tuvalu", "TV");
     map.put("Taiwan", "TW");
     map.put("Tanzania", "TZ");
     map.put("Ukraine", "UA");
     map.put("Uganda", "UG");
     map.put("United Kingdom", "UK");
     map.put("USA Minor Outlying Islands", "UM");
     map.put("United States", "US");
     map.put("Uruguay", "UY");
     map.put("Uzbekistan", "UZ");
     map.put("Holy See (Vatican City State)", "VA");
     map.put("Saint Vincent & Grenadines", "VC");
     map.put("Venezuela", "VE");
     map.put("Virgin Islands (British)", "VG");
     map.put("Virgin Islands (USA)", "VI");
     map.put("Vietnam", "VN");
     map.put("Vanuatu", "VU");
     map.put("Wallis And Futuna Islands", "WF");
     map.put("Samoa", "WS");
     map.put("Yemen", "YE");
     map.put("Mayotte", "YT");
     map.put("Yugoslavia", "YU");
     map.put("South Africa", "ZA");
     map.put("Zambia", "ZM");
     map.put("Zaire", "ZR");
     map.put("Zimbabwe", "ZW");

    }

     public String getCode(String country){
     String countryFound = map.get(country);
     if(countryFound==null){
             countryFound="UK";
     }
     return countryFound;
     }
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-02-15T04:59:06.070

**com.neovisionaries** [:nv-i18n:1.11](http://search.maven.org/#artifactdetails%7Ccom.neovisionaries%7Cnv-i18n%7C1.11%7Cjar)（或更高版本）中包含的 CountryCode 枚举具有`findByName`列出名称与给定模式匹配的国家代码的方法。

```
List<CountryCode> findByName(String regex);
List<CountryCode> findByName(Pattern pattern); 
```

从“瑞士”得到“CH”：

```
String code =  CountryCode.findByName("Switzerland").get(0).name(); 
```

## GitHub

[https://github.com/TakahikoKawasaki/nv-i18n](https://github.com/TakahikoKawasaki/nv-i18n)

## JavaDoc

[http://takahikokawasaki.github.io/nv-i18n/](http://takahikokawasaki.github.io/nv-i18n/)

## 马文

```
<dependency>
    <groupId>com.neovisionaries</groupId>
    <artifactId>nv-i18n</artifactId>
    <version>1.11</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-01-04T10:14:07.917

使用 a `Map`，而不是数组，那么您不必遍历它，只需查找它。

O(1) 与 O(n)

```
//Do this once
Map<String,Locale> map = new HashMap<String,Locale>();
for (Locale locale : Locale.getAvailableLocales()) {
  map.put(locale.getDisplayCountry(), locale);
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-07-02T21:45:43.870

这绝对是您正在寻找的答案，它已经很晚了，但希望它会帮助某人

```
String[] isoCountries = Locale.getISOCountries();
    for (String country : isoCountries) {
        Locale locale = new Locale("en", country);
        String iso = locale.getISO3Country();
        String code = locale.getCountry();
        String name = locale.getDisplayCountry();
        System.out.println(iso + " " + code + " " + name);

    } 
```

我添加了打印语句，以便您可以很好地查看结果。您可以在第三行中将“CH”替换为该国家/地区变量，它将为您提供“阿富汗”。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-01-04T10:19:13.977

不，您已经有了简单的解决方案：数组（或 DB 表，或像哈希映射这样的键控结构）解决方案几乎是执行此操作的标准方法。我想可能还有一些可用的 Web 服务可以提供该列表，但我认为这太过分了（不值得依赖第三方系统来为这么简单的事情工作）。如果您需要该级别的详细信息，类似的数组将用于一个国家/地区内的县/省/州列表。

唯一需要注意的是，如果您接受国家/地区名称作为用户输入，则需要注意拼写错误、不正确的大小写以及使用国家/地区的替代名称（例如“瑞士”可以合法地被提及如“Schweiz”或“Suisse”或“The Swiss Confederation”，或其他一些变体。

更常见的是，通过提供下拉列表将用户输入限制为已知的国家代码，以便用户选择他想要的国家，并且程序立即知道它是“CH”。这也需要相同的数组，但在另一个方向上引用，并且更可靠（因为每个国家只有一个可能的代码）。

另请注意，尽管世界上的国家/地区列表没有太大变化，但*确实*发生了变化。您应该确保它保持最新。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-11-12T10:24:43.530

```
public static void main(String[] args) throws Exception {
    System.out.println(getCountryCodeFromName("Switzerland"));
}

public static String getCountryCodeFromName(String country) {
    return Arrays.asList(Locale.getISOCountries())
            .stream()
            .map((s) -> new Locale("", s))
            .filter((l) -> l.getDisplayCountry().toLowerCase().equals(country.toLowerCase()))
            .findFirst()
            .map((l) -> l.getCountry().toLowerCase())
            .orElse("UNKNOWN");
} 
```

请注意，每次调用该方法时都会遍历流，使用映射或将结果保存在查找表中会更有效

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-03T11:32:52.893

我想最简单的 Java 8+ 方法是使用 Java 的 Locale 类。

两种简单的方法来匹配每种语言的每个国家。

```
public static Optional<String> getCountryCodeByName(String name, String lang){
    Optional<Locale> locale = getLocaleByName(name,lang);
    return locale.map(Locale::getCountry);
}

public static Optional<Locale> getLocaleByName(String name, String lang){
    return Arrays.stream(Locale.getAvailableLocales())
            .filter(l -> l.getDisplayCountry(Locale.forLanguageTag(lang)).equalsIgnoreCase(name))
            .findFirst();
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-02-12T12:44:38.697

对于那些需要德语的人：

```
package at.ciit.apf.common.util;

import java.util.HashMap;
import java.util.Map;

public class CountryUtil {
private static Map<String,String> map = new HashMap<>();

static {
    initCountries();
}

public static String getCountryFromCountryCode(String countryCode){
    if (countryCode==null) return "";
    String result = map.get(countryCode.toUpperCase());
    if (result==null) result = "";
    return result;
}

private static void initCountries() {
    map.put("AF","Afghanistan");
    map.put("EG","Ägypten");
    map.put("AX","Ålandinseln");
    map.put("AL","Albanien");
    map.put("DZ","Algerien");
    map.put("AS","Amerikanisch Samoa");
    map.put("AD","Andorra");
    map.put("AO","Angola");
    map.put("AI","Anguilla");
    map.put("AQ","Antarktis");
    map.put("AG","Antigua und Barbuda");
    map.put("GQ","Äquatorialguinea");
    map.put("AR","Argentinien");
    map.put("AM","Armenien");
    map.put("AW","Aruba");
    map.put("AZ","Aserbaidschan");
    map.put("ET","Äthiopien");
    map.put("AU","Australien");
    map.put("BS","Bahamas");
    map.put("BH","Bahrain");
    map.put("BD","Bangladesch");
    map.put("BB","Barbados");
    map.put("BY","Belarus");
    map.put("BE","Belgien");
    map.put("BZ","Belize");
    map.put("BJ","Benin");
    map.put("BM","Bermuda");
    map.put("BT","Bhutan");
    map.put("BO","Bolivien");
    map.put("BQ","Bonaire, Sint Eustatius und Saba");
    map.put("BA","Bosnien und Herzegowina");
    map.put("BW","Botswana");
    map.put("BV","Bouvetinsel");
    map.put("BR","Brasilien");
    map.put("IO","Britisches Territorium im Indischen Ozean");
    map.put("BN","Brunei");
    map.put("BG","Bulgarien");
    map.put("BF","Burkina Faso");
    map.put("BI","Burundi");
    map.put("CL","Chile");
    map.put("CN","China");
    map.put("CK","Cookinseln");
    map.put("CR","Costa Rica");
    map.put("CW","Curaçao");
    map.put("DK","Dänemark");
    map.put("CD","Demokratische Republik Kongo");
    map.put("DE","Deutschland");
    map.put("DM","Dominica");
    map.put("DO","Dominikanische Republik");
    map.put("DJ","Dschibuti");
    map.put("EC","Ecuador");
    map.put("SV","El Salvador");
    map.put("CI","Elfenbeinküste");
    map.put("ER","Eritrea");
    map.put("EE","Estland");
    map.put("SZ","Eswatini");
    map.put("FK","Falklandinseln");
    map.put("FO","Färöer-Inseln");
    map.put("FJ","Fidschi");
    map.put("FI","Finnland");
    map.put("FR","Frankreich");
    map.put("GF","Französisch-Guayana");
    map.put("PF","Französisch-Polynesien");
    map.put("TF","Französische Süd- und Antarktisgebiete");
    map.put("GA","Gabun");
    map.put("GM","Gambia");
    map.put("GE","Georgien");
    map.put("GH","Ghana");
    map.put("GI","Gibraltar");
    map.put("GD","Grenada");
    map.put("GR","Griechenland");
    map.put("GL","Grönland");
    map.put("GP","Guadeloupe");
    map.put("GU","Guam");
    map.put("GT","Guatemala");
    map.put("GG","Guernsey");
    map.put("GN","Guinea");
    map.put("GW","Guinea-Bissau");
    map.put("GY","Guyana");
    map.put("HT","Haiti");
    map.put("HM","Heard und McDonaldinseln");
    map.put("HN","Honduras");
    map.put("HK","Hongkong");
    map.put("IN","Indien");
    map.put("ID","Indonesien");
    map.put("IM","Insel Man");
    map.put("IQ","Irak");
    map.put("IR","Iran");
    map.put("IE","Irland");
    map.put("IS","Island");
    map.put("IL","Israel");
    map.put("IT","Italien");
    map.put("JM","Jamaika");
    map.put("JP","Japan");
    map.put("YE","Jemen");
    map.put("JE","Jersey");
    map.put("JO","Jordanien");
    map.put("VG","Jungferninseln (UK)");
    map.put("VI","Jungferninseln (US)");
    map.put("KY","Kaimaninseln");
    map.put("KH","Kambodscha");
    map.put("CM","Kamerun");
    map.put("CA","Kanada");
    map.put("CV","Kap Verde");
    map.put("KZ","Kasachstan");
    map.put("QA","Katar");
    map.put("KE","Kenia");
    map.put("KG","Kirgisistan");
    map.put("KI","Kiribati");
    map.put("CC","Kokosinseln");
    map.put("CO","Kolumbien");
    map.put("KM","Komoren");
    map.put("XK","Kosovo");
    map.put("HR","Kroatien");
    map.put("CU","Kuba");
    map.put("KW","Kuwait");
    map.put("LA","Laos");
    map.put("LS","Lesotho");
    map.put("LV","Lettland");
    map.put("LB","Libanon");
    map.put("LR","Liberia");
    map.put("LY","Libyen");
    map.put("LI","Liechtenstein");
    map.put("LT","Litauen");
    map.put("LU","Luxemburg");
    map.put("MO","Macau");
    map.put("MG","Madagaskar");
    map.put("MW","Malawi");
    map.put("MY","Malaysia");
    map.put("MV","Malediven");
    map.put("ML","Mali");
    map.put("MT","Malta");
    map.put("MA","Marokko");
    map.put("MH","Marshallinseln");
    map.put("MQ","Martinique");
    map.put("MR","Mauretanien");
    map.put("MU","Mauritius");
    map.put("YT","Mayotte");
    map.put("MX","Mexiko");
    map.put("FM","Mikronesien");
    map.put("MD","Moldawien");
    map.put("MC","Monaco");
    map.put("MN","Mongolei");
    map.put("ME","Montenegro");
    map.put("MS","Montserrat");
    map.put("MZ","Mosambik");
    map.put("MM","Myanmar");
    map.put("NA","Namibia");
    map.put("NR","Nauru");
    map.put("NP","Nepal");
    map.put("NC","Neukaledonien");
    map.put("NZ","Neuseeland");
    map.put("NI","Nicaragua");
    map.put("NL","Niederlande");
    map.put("NE","Niger");
    map.put("NG","Nigeria");
    map.put("NU","Niue");
    map.put("KP","Nordkorea");
    map.put("MP","Nördliche Marianen");
    map.put("MK","Nordmazedonien");
    map.put("NF","Norfolkinsel");
    map.put("NO","Norwegen");
    map.put("OM","Oman");
    map.put("AT","Österreich");
    map.put("TL","Osttimor");
    map.put("PK","Pakistan");
    map.put("PS","Palästina");
    map.put("PW","Palau");
    map.put("PA","Panama");
    map.put("PG","Papua-Neuguinea");
    map.put("PY","Paraguay");
    map.put("PE","Peru");
    map.put("PH","Philippinen");
    map.put("PN","Pitcairninseln");
    map.put("PL","Polen");
    map.put("PT","Portugal");
    map.put("PR","Puerto Rico");
    map.put("CG","Republik Kongo");
    map.put("RE","Réunion");
    map.put("RW","Ruanda");
    map.put("RO","Rumänien");
    map.put("RU","Russland");
    map.put("MF","Saint Martin");
    map.put("SB","Salomonen");
    map.put("ZM","Sambia");
    map.put("WS","Samoa");
    map.put("SM","San Marino");
    map.put("BL","Sankt Bartholomäus");
    map.put("ST","São Tomé und Príncipe");
    map.put("SA","Saudi-Arabien");
    map.put("SE","Schweden");
    map.put("CH","Schweiz");
    map.put("SN","Senegal");
    map.put("RS","Serbien");
    map.put("SC","Seychellen");
    map.put("SL","Sierra Leone");
    map.put("ZW","Simbabwe");
    map.put("SG","Singapur");
    map.put("SX","Sint Maarten");
    map.put("SK","Slowakei");
    map.put("SI","Slowenien");
    map.put("SO","Somalia");
    map.put("ES","Spanien");
    map.put("LK","Sri Lanka");
    map.put("SH","St. Helena");
    map.put("KN","St. Kitts und Nevis");
    map.put("LC","St. Lucia");
    map.put("PM","St. Pierre und Miquelon");
    map.put("VC","St. Vincent und die Grenadinen");
    map.put("ZA","Südafrika");
    map.put("SD","Sudan");
    map.put("GS","Südgeorgien und die Südlichen Sandwichinseln");
    map.put("KR","Südkorea");
    map.put("SS","Südsudan");
    map.put("SR","Suriname");
    map.put("SJ","Svalbard und Jan Mayen");
    map.put("SY","Syrien");
    map.put("TJ","Tadschikistan");
    map.put("TW","Taiwan");
    map.put("TZ","Tansania");
    map.put("TH","Thailand");
    map.put("TG","Togo");
    map.put("TK","Tokelau");
    map.put("TO","Tonga");
    map.put("TT","Trinidad und Tobago");
    map.put("TD","Tschad");
    map.put("CZ","Tschechien");
    map.put("TN","Tunesien");
    map.put("TR","Türkei");
    map.put("TM","Turkmenistan");
    map.put("TC","Turks und Caicosinseln");
    map.put("TV","Tuvalu");
    map.put("UG","Uganda");
    map.put("UA","Ukraine");
    map.put("HU","Ungarn");
    map.put("UY","Uruguay");
    map.put("UZ","Usbekistan");
    map.put("VU","Vanuatu");
    map.put("VA","Vatikanstadt");
    map.put("VE","Venezuela");
    map.put("AE","Vereinigte Arabische Emirate");
    map.put("US","Vereinigte Staaten von Amerika");
    map.put("GB","Vereinigtes Königreich");
    map.put("VN","Vietnam");
    map.put("WF","Wallis und Futuna");
    map.put("CX","Weihnachtsinsel");
    map.put("EH","Westsahara");
    map.put("CF","Zentralafrikanische Republik");
    map.put("CY","Zypern");
}

} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-11-25T12:48:32.727

将标志连接到 url ( [https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/0.8.2/flags/1x1/](https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/0.8.2/flags/1x1/) )

```
INSERT INTO `countries` (`name`, `code`, `c_code`, `flag`) VALUES

('Afghanistan', '+93', 'AF', 'af.svg'),
('Albania', '+355', 'AL', 'al.svg'),
('Algeria', '+213', 'DZ', 'dz.svg'),
('American Samoa', '+1 684', 'AS', 'as.svg'),
('Andorra', '+376', 'AD', 'ad.svg'),
('Angola', '+244', 'AO', 'ao.svg'),
('Anguilla', '+1 264', 'AI', 'ai.svg'),
('Antigua and Barbuda', '+1 268', 'AG', 'ag.svg'),
('Argentina', '+54', 'AR', 'ar.svg'),
('Armenia', '+374', 'AM', 'am.svg'),
('Aruba', '+297', 'AW', 'aw.svg'),
('Australia', '+61', 'AU', 'au.svg'),
('Austria', '+43', 'AT', 'at.svg'),
('Azerbaijan', '+994', 'AZ', 'az.svg'),
('Bahamas', '+1 242', 'BS', 'bs.svg'),
('Bahrain', '+973', 'BH', 'bh.svg'),
('Bangladesh', '+880', 'BD', 'bd.svg'),
('Barbados', '+1 246', 'BB', 'bb.svg'),
('Belarus', '+375', 'BY', 'by.svg'),
('Belgium', '+32', 'BE', 'be.svg'),
('Belize', '+501', 'BZ', 'bz.svg'),
('Benin', '+229', 'BJ', 'bj.svg'),
('Bermuda', '+1 441', 'BM', 'bm.svg'),
('Bhutan', '+975', 'BT', 'bt.svg'),
('Bolivia', '+591', 'BO', 'bo.svg'),
('Bosnia and Herzegovina', '+387', 'BA', 'ba.svg'),
('Botswana', '+267', 'BW', 'bw.svg'),
('Brazil', '+55', 'BR', 'br.svg'),
('British Indian Ocean Territory', '+246', 'IO', 'io.svg'),
('British Virgin Islands', '+1 284', 'VG', 'vg.svg'),
('Brunei', '+673', 'BN', 'bn.svg'),
('Bulgaria', '+359', 'BG', 'bg.svg'),
('Burkina Faso', '+226', 'BF', 'bf.svg'),
('Burundi', '+257', 'BI', 'bi.svg'),
('Cambodia', '+855', 'KH', 'kh.svg'),
('Cameroon', '+237', 'CM', 'cm.svg'),
('Canada', '+1', 'CA', 'ca.svg'),
('Cape Verde', '+238', 'CV', 'cv.svg'),
('Cayman Islands', '+ 345', 'KY', 'ky.svg'),
('Central African Republic', '+236', 'CF', 'cf.svg'),
('Chad', '+235', 'TD', 'td.svg'),
('Chile', '+56', 'CL', 'cl.svg'),
('China', '+86', 'CN', 'cn.svg'),
('Christmas Island', '+61', 'CX', 'cx.svg'),
('Colombia', '+57', 'CO', 'co.svg'),
('Comoros', '+269', 'KM', 'km.svg'),
('Congo', '+242', 'CG', 'cg.svg'),
('Congo, Dem. Rep. of (Zaire)', '+243', 'CD', 'cd.svg'),
('Cook Islands', '+682', 'CK', 'ck.svg'),
('Costa Rica', '+506', 'CR', 'cr.svg'),
('Croatia', '+385', 'HR', 'hr.svg'),
('Cuba', '+53', 'CU', 'cu.svg'),
('Curacao', '+599', 'CW', 'cw.svg'),
('Cyprus', '+537', 'CY', 'cy.svg'),
('Czech Republic', '+420', 'CZ', 'cz.svg'),
('Denmark', '+45', 'DK', 'dk.svg'),
('Djibouti', '+253', 'DJ', 'dj.svg'),
('Dominica', '+1 767', 'DM', 'dm.svg'),
('Dominican Republic', '+1 809', 'DO', 'do.svg'),
('East Timor', '+670', 'TR', 'tr.svg'),
('Ecuador', '+593', 'EC', 'ec.svg'),
('Egypt', '+20', 'EG', 'eg.svg'),
('El Salvador', '+503', 'SV', 'sv.svg'),
('Equatorial Guinea', '+240', 'GQ', 'gq.svg'),
('Eritrea', '+291', 'ER', 'er.svg'),
('Estonia', '+372', 'EE', 'ee.svg'),
('Ethiopia', '+251', 'ET', 'et.svg'),
('Falkland Islands', '+500', 'FK', 'fk.svg'),
('Faroe Islands', '+298', 'FO', 'fo.svg'),
('Fiji', '+679', 'FJ', 'fj.svg'),
('Finland', '+358', 'FI', 'fi.svg'),
('France', '+33', 'FR', 'fr.svg'),
('French Guiana', '+594', 'GF', 'gf.svg'),
('French Polynesia', '+689', 'PF', 'pf.svg'),
('Gabon', '+241', 'GA', 'ga.svg'),
('Gambia', '+220', 'GM', 'gm.svg'),
('Georgia', '+995', 'GE', 'ge.svg'),
('Germany', '+49', 'DE', 'de.svg'),
('Ghana', '+233', 'GH', 'gh.svg'),
('Gibraltar', '+350', 'GI', 'gi.svg'),
('Greece', '+30', 'GR', 'gr.svg'),
('Greenland', '+299', 'GL', 'gl.svg'),
('Grenada', '+1 473', 'GD', 'gd.svg'),
('Guadeloupe', '+590', 'GP', 'gp.svg'),
('Guam', '+1 671', 'GU', 'gu.svg'),
('Guatemala', '+502', 'GT', 'gt.svg'),
('Guinea', '+224', 'GN', 'gn.svg'),
('Guinea-Bissau', '+245', 'GW', 'gw.svg'),
('Guyana', '+595', 'GY', 'gy.svg'),
('Haiti', '+509', 'HT', 'ht.svg'),
('Honduras', '+504', 'HN', 'hn.svg'),
('Hong Kong', '+852', 'HK', 'hk.svg'),
('Hungary', '+36', 'HU', 'hu.svg'),
('Iceland', '+354', 'IS', 'is.svg'),
('India', '+91', 'IN', 'in.svg'),
('Indonesia', '+62', 'ID', 'id.svg'),
('Iran', '+98', 'IR', 'ir.svg'),
('Iraq', '+964', 'IQ', 'iq.svg'),
('Ireland', '+353', 'IE', 'ie.svg'),
('Israel', '+972', 'IL', 'il.svg'),
('Italy', '+39', 'IT', 'it.svg'),
('Ivory Coast', '+225', 'CI', 'ci.svg'),
('Jamaica', '+1 876', 'JM', 'jm.svg'),
('Japan', '+81', 'JP', 'jp.svg'),
('Jordan', '+962', 'JO', 'jo.svg'),
('Kazakhstan', '+7 7', 'KZ', 'kz.svg'),
('Kenya', '+254', 'KE', 'ke.svg'),
('Kiribati', '+686', 'KI', 'ki.svg'),
('Kuwait', '+965', 'KW', 'kw.svg'),
('Kyrgyzstan', '+996', 'KG', 'kg.svg'),
('Laos', '+856', 'LA', 'la.svg'),
('Latvia', '+371', 'LV', 'lv.svg'),
('Lebanon', '+961', 'LB', 'lb.svg'),
('Lesotho', '+266', 'LS', 'ls.svg'),
('Liberia', '+231', 'LR', 'lr.svg'),
('Libya', '+218', 'LY', 'ly.svg'),
('Liechtenstein', '+423', 'LI', 'li.svg'),
('Lithuania', '+370', 'LT', 'lt.svg'),
('Luxembourg', '+352', 'LU', 'lu.svg'),
('Macau', '+853', 'MO', 'mo.svg'),
('Macedonia', '+389', 'MK', 'mk.svg'),
('Madagascar', '+261', 'MG', 'mg.svg'),
('Malawi', '+265', 'MW', 'mw.svg'),
('Malaysia', '+60', 'MY', 'my.svg'),
('Maldives', '+960', 'MV', 'mv.svg'),
('Mali', '+223', 'ML', 'ml.svg'),
('Malta', '+356', 'MT', 'mt.svg'),
('Marshall Islands', '+692', 'MH', 'mh.svg'),
('Martinique', '+596', 'MQ', 'mq.svg'),
('Mauritania', '+222', 'MR', 'mr.svg'),
('Mauritius', '+230', 'MU', 'mu.svg'),
('Mayotte', '+262', 'YT', 'yt.svg'),
('Mexico', '+52', 'MX', 'mx.svg'),
('Micronesia', '+691', 'FM', 'fm.svg'),
('Moldova', '+373', 'MD', 'md.svg'),
('Monaco', '+377', 'MC', 'mc.svg'),
('Mongolia', '+976', 'MN', 'mn.svg'),
('Montenegro', '+382', 'ME', 'me.svg'),
('Montserrat', '+1664', 'MS', 'ms.svg'),
('Morocco', '+212', 'MA', 'ma.svg'),
('Myanmar', '+95', 'MM', 'mm.svg'),
('Namibia', '+264', 'NA', 'na.svg'),
('Nauru', '+674', 'NR', 'nr.svg'),
('Nepal', '+977', 'NP', 'np.svg'),
('Netherlands', '+31', 'NL', 'nl.svg'),
('Saint Kitts and Nevis', '+1', 'KN', 'kn.svg'),
('New Caledonia', '+687', 'NC', 'nc.svg'),
('New Zealand', '+64', 'NZ', 'nz.svg'),
('Nicaragua', '+505', 'NI', 'ni.svg'),
('Niger', '+227', 'NE', 'ne.svg'),
('Nigeria', '+234', 'NG', 'ng.svg'),
('Niue', '+683', 'NU', 'nu.svg'),
('Norfolk Island', '+672', 'NF', 'nf.svg'),
('North Korea', '+850', 'KP', 'kp.svg'),
('Northern Mariana Islands', '+1 670', 'MP', 'mp.svg'),
('Norway', '+47', 'NO', 'no.svg'),
('Oman', '+968', 'OM', 'om.svg'),
('Pakistan', '+92', 'PK', 'pk.svg'),
('Palau', '+680', 'PW', 'pw.svg'),
('Panama', '+507', 'PA', 'pa.svg'),
('Papua New Guinea', '+675', 'PG', 'pg.svg'),
('Paraguay', '+595', 'PY', 'py.svg'),
('Peru', '+51', 'PE', 'pe.svg'),
('Philippines', '+63', 'PH', 'ph.svg'),
('Poland', '+48', 'PL', 'pl.svg'),
('Portugal', '+351', 'PT', 'pt.svg'),
('Puerto Rico', '+1 787', 'PR', 'pr.svg'),
('Qatar', '+974', 'QA', 'qa.svg'),
('Reunion', '+262', 'RE', 're.svg'),
('Romania', '+40', 'RO', 'ro.svg'),
('Russia', '+7', 'RU', 'ru.svg'),
('Rwanda', '+250', 'RW', 'rw.svg'),
('Samoa', '+685', 'WS', 'ws.svg'),
('San Marino', '+378', 'SM', 'sm.svg'),
('Saudi Arabia', '+966', 'SA', 'sa.svg'),
('Senegal', '+221', 'SN', 'sn.svg'),
('Serbia', '+381', 'RS', 'rs.svg'),
('Seychelles', '+248', 'SC', 'sc.svg'),
('Sierra Leone', '+232', 'SL', 'sl.svg'),
('Singapore', '+65', 'SG', 'sg.svg'),
('Slovakia', '+421', 'SK', 'sk.svg'),
('Slovenia', '+386', 'SI', 'si.svg'),
('Solomon Islands', '+677', 'SB', 'sb.svg'),
('South Africa', '+27', 'ZA', 'za.svg'),
('South Georgia and the South Sandwich Islands', '+500', 'GS', 'gs.svg'),
('South Korea', '+82', 'KR', 'kr.svg'),
('Spain', '+34', 'ES', 'es.svg'),
('Sri Lanka', '+94', 'LK', 'lk.svg'),
('Sudan', '+249', 'SD', 'sd.svg'),
('Suriname', '+597', 'SR', 'sr.svg'),
('Swaziland', '+268', 'SZ', 'sz.svg'),
('Sweden', '+46', 'SE', 'se.svg'),
('Switzerland', '+41', 'CH', 'ch.svg'),
('Syria', '+963', 'SY', 'sy.svg'),
('Taiwan', '+886', 'TW', 'tw.svg'),
('Tajikistan', '+992', 'TJ', 'tj.svg'),
('Tanzania', '+255', 'TZ', 'tz.svg'),
('Thailand', '+66', 'TH', 'th.svg'),
('Timor Leste', '+670', 'TL', 'tl.svg'),
('Togo', '+228', 'TG', 'tg.svg'),
('Tokelau', '+690', 'TK', 'tk.svg'),
('Tonga', '+676', 'TO', 'to.svg'),
('Trinidad and Tobago', '+1 868', 'TT', 'tt.svg'),
('Tunisia', '+216', 'TN', 'tn.svg'),
('Turkey', '+90', 'TR', 'tr.svg'),
('Turkmenistan', '+993', 'TM', 'tm.svg'),
('Turks and Caicos Islands', '+1 649', 'TC', 'tc.svg'),
('Tuvalu', '+688', 'TV', 'tv.svg'),
('Uganda', '+256', 'UG', 'ug.svg'),
('Ukraine', '+380', 'UA', 'ua.svg'),
('United Arab Emirates', '+971', 'AE', 'ae.svg'),
('United Kingdom', '+44', 'GB', 'gb.svg'),
('United States', '+1', 'US', 'us.svg'),
('Uruguay', '+598', 'UY', 'uy.svg'),
('Uzbekistan', '+998', 'UZ', 'uz.svg'),
('Vanuatu', '+678', 'VU', 'vu.svg'),
('Venezuela', '+58', 'VE', 've.svg'),
('Vietnam', '+84', 'VN', 'vn.svg'),
('Wallis and Futuna', '+681', 'WF', 'wf.svg'),
('Yemen', '+967', 'YE', 'ye.svg'),
('Zambia', '+260', 'ZM', 'zm.svg'),
('Zimbabwe', '+263', 'ZW', 'zw.svg') 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-10-06T06:03:12.417

这是创建包含英文国家名称作为键和 ISO2 代码作为值的排序地图的方法：

```
static Map<String, String> countriesMap = Arrays.stream( Locale.getISOCountries() ).collect(
            Collectors.toMap( (String code)-> new Locale( "", code ).getDisplayCountry(Locale.ENGLISH),
                    Function.identity(),(o1, o2) -> o1, TreeMap::new )); 
```

您可以将其作为 statc 字段启动，以避免每次使用都重新计算。

# c - 如何将 pthread_t id 保存到数组中

> ID：14155055
> 
> 赞同：4
> 
> 时间：2013-01-04T10:10:51.000
> 
> 标签：c, pthreads

如何将 p_thread 的 id 保存到数组中？

```
int i;
pthread_t t[N];
float arrayId[N];

for (i = 0; i < N; i++) {
    pthread_create(&t[i], NULL, f, (void *) &i);
    printf("creato il thread id=%lu\n", t[i]);
    arrayId[i] = t[i];
    printf("a[%d]=%f\n", i, arrayId[i]);
} 
```

可以打印，但是保存不了。。。

我必须对这个数组进行排序，然后我必须首先执行所有按 id 排序的线程

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T16:16:47.273

所有线程都将收到相同的值，`i`因为您通过值（相同的地址）传递它。这应该解决它：

```
int i;
pthread_t t[N];
float arrayId[N];

int indexes[N];

for (i = 0; i < N; i++) {
    indexes[i] = i;
    pthread_create(&t[i], NULL, f, (void *) &indexes[i]);
    printf("creato il thread id=%lu\n", t[i]);
    arrayId[i] = t[i];
    printf("a[%d]=%f\n", i, arrayId[i]);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-04T22:26:07.647

```
I'll have to sort this array and then i'll have to execute first all the thread 
ordered by id 
```

`pthread_create`正如 man 所说，已经执行了一个线程：

```
The  pthread_create() function starts a new thread in the calling process. 
```

所以你的循环已经启动了 N 个线程。您也不能指定线程 ID，它们会在创建线程时返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-05T15:12:44.907

您不需要保存数组。您只需定义一个`f`希望对这些数字进行运算的函数 ，然后，就像您在 中所做的那样`pthread_create()`，将该函数 ,`f`作为输入。

每次`pthread_create()`调用函数时`f`，都会执行。

# javascript - JQuery 弹出消息

> ID：14155059
> 
> 赞同：7
> 
> 时间：2013-01-04T10:10:59.727
> 
> 标签：javascript, jquery

我正在尝试制作一条自定义弹出消息，该消息向用户显示 5 秒钟，然后淡出。这可以正常工作，但如果使用多次触发事件并且超时已经在运行，则消息很快就会消失。

到目前为止我的功能...

```
function showMessage(message) {
    $(".messageText").text(message);

    $(".message").fadeIn("slow");    

    closeBox = function(){
        $(".message").fadeOut("slow");    
    }

    clearInterval(closeBox);
    setInterval(closeBox, 5000);
} 
```

非常感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T10:16:40.307

试试这个：

```
var interval;

function showMessage(message) {
    $(".messageText").text(message);

    $(".message").fadeIn("slow");
    if(interval){ // If a interval is set.
        clearInterval(interval);
    }
    interval = setInterval(closeBox, 5000);
}

function closeBox(){
    $(".message").fadeOut("slow");    
} 
```

您需要将返回分配`setInterval`给一个变量。此句柄可用于以 结束间隔`clearinterval`。（不能按函数清除间隔，只能通过间隔句柄）

另外，我把`closeBox`函数从函数中拉了出来，`showMessage`不需要每次`showMessage`调用都声明。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T10:17:35.797

使用 jQuery 延迟怎么样？

样本：

```
$("#container").fadeIn().delay(amoutOfTimeInMiliseconds).fadeOut(); 
```

你的功能：

```
function showMessage(message) {
    $(".messageText").text(message);

    $(".message").fadeIn("slow").delay(5000).fadeOut("slow");    
} 
```

它应该工作......问候。

# java - jsoup 超时，xml 出现空白错误，基本遍历页面很耗时

> ID：14155062
> 
> 赞同：0
> 
> 时间：2013-01-04T10:11:20.783
> 
> 标签：java, parsing, html-parsing, jsoup

我想制作一个解析html页面并选择有用信息并显示它的程序。我通过打开一个流然后逐行搜索这个适当的内容来做到这一点，但这是一个耗时的过程。所以我决定把它当作一个xml然后使用xpath来做。我通过在我的系统上创建一个 xml 文件并从流中加载内容来做到这一点，我得到了空白错误，然后我决定将打开的文档定向为

```
doc = (Document) builder.parse(inputStream); 
```

但同样的错误仍然存​​在。在这里询问后，有人建议我使用 jSoup 进行 html 解析，现在当我执行以下代码时：

```
Document doc= Jsoup.connect(url).get(); 
```

我读到超时。当用 python 制作相同的程序并使用简单的策略（如使用字符串的 find 方法和搜索）时，我显示的内容太快了。如何让它在java中快速运行？

完整代码：

```
import java.io.*;
import org.jsoup.Jsoup;
import org.jsoup.helper.Validate;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
public class Parser {
public static void main(String[] args) {
    Validate.isTrue(true, "usage: supply url to fetch");
    try{
        String url="http://www.spoj.com/ranks/PRIME1/";
        Document doc= Jsoup.connect(url).get();
        Elements es=doc.getElementsByAttributeValue("class","lightrow");
        System.out.println(es.get(0).child(0).text());

    }catch(Exception e){e.printStackTrace();}
} 
```

}

例外：

```
java.net.SocketTimeoutException: Read timed out
at java.net.SocketInputStream.socketRead0(Native Method)
at java.net.SocketInputStream.read(Unknown Source)
at java.net.SocketInputStream.read(Unknown Source)
at java.io.BufferedInputStream.fill(Unknown Source)
at java.io.BufferedInputStream.read1(Unknown Source)
at java.io.BufferedInputStream.read(Unknown Source)
at sun.net.www.http.HttpClient.parseHTTPHeader(Unknown Source)
at sun.net.www.http.HttpClient.parseHTTP(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
at java.net.HttpURLConnection.getResponseCode(Unknown Source)
at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:412)
at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:393)
at org.jsoup.helper.HttpConnection.execute(HttpConnection.java:159)
at org.jsoup.helper.HttpConnection.get(HttpConnection.java:148)
at Parser.main(Parser.java:12) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:53:36.947

您的防火墙或操作系统是否阻止了您的请求（也许它阻止了 java 访问互联网）？您使用的是 PC 还是例如。安卓？您的 HTML 页面是网站还是（本地）HTML 文件？请发布更多代码或您得到的异常。

请确保您不使用 DOM 文档，而是使用`org.jsoup.nodes.Document`.

> 显示内容

你想如何显示内容？如果您只需要这样的值：

```
...
<div>some value</div>
... 
```

您可以使用 jsoup 执行此操作：

```
Document doc = ... // parse html file or connect to website

final String value = doc.select("div").first().text();

System.out.println(value); 
```

## 编辑：

由于默认连接超时为 3 秒（3000 毫秒），因此应该为大型网站更改它，因为加载数据可能需要一些时间：

```
final String url = "http://www.spoj.com/ranks/PRIME1/";
final int timeout = 4000; // or higher

Document doc = Jsoup.connect(url).timeout(4000).get(); 
```

# node.js - nodejs + extjs webkit 应用程序的分析

> ID：14155063
> 
> 赞同：0
> 
> 时间：2013-01-04T10:11:27.980
> 
> 标签：node.js, webkit, google-analytics, analytics, usage-statistics

我正在开发 nodejs webkit 应用程序。我正在为 UI 使用 extjs。任何人都可以安装应用程序，我们想使用一些分析系统来跟踪应用程序的使用情况，可能是谷歌分析或任何开源跟踪器。我知道谷歌分析不支持桌面应用程序的使用情况跟踪。由于应用程序是在 nodejs webkit 上开发的，因此它也可以在平板电脑和智能手机上运行。请指导可能的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:57:41.490

我们在服务器上创建页面并从应用程序请求相同。我们使用 piwik 来跟踪页面。有效。

# iphone - 使用 XCode for iOS 的编译/运行时间非常慢

> ID：14155064
> 
> 赞同：4
> 
> 时间：2013-01-04T10:11:34.700
> 
> 标签：iphone, ios, xcode, ipad, build

我有一个项目，其中包含很多非常大的媒体资产，总计几 GB。构建/下载/运行时间非常慢，即使我什么也没做。在 iPad 上干净的构建/下载/运行可能需要 20 分钟，但即使只是在没有更改的情况下进行调试也可能需要 5 分钟或更长时间。似乎瓶颈在于它决定了哪些新资产需要复制。删除大部分资产加快了构建/下载/运行周期。我当前的解决方法是使用资产构建，将它们从项目中删除，并且由于资产没有从设备中清理，只要我不需要资产更新，我就可以使用快速构建时间。

我想其他人以前也遇到过这个问题，我想知道人们有什么修复/解决方法。

我有一些想法，但我没有对它们进行足够的研究以知道它们是否可行。

1) 有 2 个项目，1 个带有资产，另一个带有代码，都使用相同的应用 ID，因此它们都编译到设备上的同一个应用文件夹。在资产更改时使用资产构建，并为一般工作使用代码构建。

2) 越狱我的 iPad，这样我就可以根据需要将资产直接下载到 app 文件夹中并构建代码

3）使用很小的占位符资产，并偶尔用真实资产进行测试。

任何帮助将非常感激。

最大限度

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T10:14:12.910

不要将数据作为应用程序资产。将它们复制到应用程序`Documents`文件夹或应用程序可以访问的其他文件夹（例如临时文件夹）。

# php - 关于在 php 中使用 strtotime 的警告？

> ID：14155066
> 
> 赞同：-10
> 
> 时间：2013-01-04T10:11:39.500
> 
> 标签：php, strtotime

警告：mysql_result() 至少需要 2 个参数，1 个在这一行给出

```
$time   = mysql_result( date('d F Y', strtotime($i["time_stamp"]))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:16:18.340

如果您查看[mysql_result](http://php.net/manual/en/function.mysql-result.php)的文档，您会发现它需要查询资源作为第一个参数，行号作为第二个参数，并且（可选）字段名称或偏移量作为第三个参数。无论如何，您都没有使用该功能，甚至类似于其目的。

**编辑：**

根据您上面的评论（“我的时间戳显示 1357294428 我想以正确的格式显示 H:mm:ss DD-MM-YY”），您正在寻找这个：

```
date('H:i:s d-m-y', strtotime($i["time_stamp"])); 
```

虽然 if`$i["time_stamp"]`已经是一个时间戳，那么你只需要这个：

```
date('H:i:s d-m-y', $i["time_stamp"]); 
```

# sql-server - 将 SQL Server CLR UDT 编写为 `struct` 或 `class` 的相对优点是什么？

> ID：14155070
> 
> 赞同：4
> 
> 时间：2013-01-04T10:12:02.140
> 
> 标签：sql-server, sqlclr, user-defined-types

几乎每个 SQL Server CLR 用户定义类型的代码示例都将类型实现为`struct`. 但是，[Microsoft 表示创建它们`class`也是一种选择](http://msdn.microsoft.com/en-us/library/ms131082.aspx)，但我似乎找不到任何文档，甚至找不到关于每种替代方案的相对优点的讨论。

在什么情况下会选择将 SQL CLR UDT 分别实现为结构或类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:00:45.237

好吧，建议是将它们作为结构。但请注意：

> 但是，您可以在构建类时使用继承，并且可以在该类型的托管代码实现中调用此类方法。

现在，由于`struct`s 不能继承，如果你打算*使用*继承，你将不得不将它作为一个`class`.

# ios - 更改部分文本 uitableview

> ID：14155080
> 
> 赞同：0
> 
> 时间：2013-01-04T10:12:53.513
> 
> 标签：ios, uitableview

我正在寻找一种方法来更改 a 中的`section headers`标题`UITableView`。我一直在看网络和这个论坛，但找不到答案。这种性质的大多数主题都围绕更改`section header title`.

因此，tableview 填充了比方说**3 个部分： Section 1, Section 2, Section 3**。现在我怎样才能将这些标题更改为我想要的任何内容？

菲利普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:15:35.263

您可以更改 UITableView 部分标题如下

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    NSString *name;
    switch (section)
        {
        case 0:
            name = firstHeader;
            break;
        case 1:
            name =  secondHeader;
            break;

        default:
            name = @"";
            break;
    }    
    return name;
} 
```

**更新：** 当您收到对 UITableView 中任何部分的修改时，为什么不调用此方法来更新该部分

```
 - (void)reloadSections:(NSIndexSet *)sections withRowAnimation:(UITableViewRowAnimation)animation 
```

这将使用漂亮的动画更新 Selected 部分

# python - Unrecognized or unsupported array type in function cvGetMat in python opencv

> ID：14155081
> 
> 赞同：7
> 
> 时间：2013-01-04T10:12:54.143
> 
> 标签：python, opencv

I am trying to code in python opencv-2.4.3, It is giving me an error as below

```
Traceback (most recent call last):
 File "/home/OpenCV-2.4.3/cam_try.py", line 6, in <module>
cv2.imshow('video test',im)
 error: /home/OpenCV-2.4.3/modules/core/src/array.cpp:2482: error: (-206)           Unrecognized or unsupported array type in function cvGetMat 
```

I am not understanding what does that mean, Can anybody help me out? Thankyou.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T15:10:52.477

The relevant snippet of the error message is `Unrecognized or unsupported array type in function cvGetMat`. The `cvGetMat()` function converts arrays into a `Mat`. A `Mat` is the matrix data type that OpenCV uses in the world of C/C++ (Note: the Python OpenCV interface you are utilizing uses Numpy arrays, which are then converted behind the scenes into `Mat` arrays). With that background in mind, the problem appears to be that that the array `im` you're passing to `cv2.imshow()` is poorly formed. Two ideas:

1.  This could be caused by quirky behavior on your webcam... on some cameras null frames are returned from time to time. Before you pass the `im` array to `imshow()`, try ensuring that it is not null.

2.  If the error occurs on *every* frame, then eliminate some of the processing that you are doing and call `cv2.imshow()` immediately after you grab the frame from the webcam. If that still doesn't work, then you'll know it's a problem with your webcam. Else, add back your processing line by line until you isolate the problem. For example, start with this:

    ```
    while True:
        # Grab frame from webcam
        retVal, image = capture.read(); # note: ignore retVal

    #   faces = cascade.detectMultiScale(image, scaleFactor=1.2, minNeighbors=2, minSize=(100,100),flags=cv.CV_HAAR_DO_CANNY_PRUNING);

        # Draw rectangles on image, and then show it
    #   for (x,y,w,h) in faces:
    #       cv2.rectangle(image, (x,y), (x+w,y+h), 255)
        cv2.imshow("Video", image)

        i += 1; 
    ```

source: [Related Question: OpenCV C++ Video Capture does not seem to work](https://stackoverflow.com/questions/3940780/opencv-c-video-capture-does-not-seem-to-work)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-01T19:12:45.887

I was having the same error, and after about an hour of searching for the error, I found the path to the image to be improperly defined. It solved my problem, may be it will solve yours.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-10T17:22:38.063

I solved the porblem by using a BGR-picture. the one from my cam was YUYV by default!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T17:15:46.937

I am working in Windows with Opencv 2.3.1 and Python 2.7.2, so, I had the same problem, I solved it pasting the following DLL files: opencv_ffmpeg.dll and opencv_ffmpeg_64.dll in the installation folder of Python. Maybe it help you with a similar solution in Ubuntu.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T04:16:20.507

For me, like Gab Hum did, I copied opencv_ffmpeg245.dll to my python code folder. Then it works.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-04T07:44:41.640

Check your Image Array (or NpArray),(by printing it) whether you are trying to pass an array of images at one shot instead of passing each image at once.

A single image array would look like :

> [[[ 76 85 103] ... [ 76 85 103]], ... ]

Rows encloses each columns, each matrix(pixes) encloses no of rows, each image comprises of matrices (pixels).

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-21T09:58:09.177

It is always good to have a sanity check, to be sure your camera is working. In my case my camera is

raspistill -o test.jpg

# zend-framework2 - Zend Framework 2 ACL 实现

> ID：14155085
> 
> 赞同：0
> 
> 时间：2013-01-04T10:13:08.853
> 
> 标签：zend-framework2, acl

我一直在我的应用程序中将 Auth 和 Acl 与 ZF2 集成。我已按照教程进行操作。[http://p0l0.binware.org/index.php/2012/02/18/zend-framework-2-authentication-acl-using-eventmanager/](http://p0l0.binware.org/index.php/2012/02/18/zend-framework-2-authentication-acl-using-eventmanager/)

但是，我无法获得 ACL 的功能。我在 Auth 模块中使用了 ACL 而不是用户。如何限制访客的访问？如何允许会员对所有页面进行访问？

我没有改变任何东西。请检查教程。

谁能解决我的问题？否则指导我做。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T06:56:25.287

[五分钟内设置 ACL](http://ivangospodinow.com/zend-framework-2-acl-setup-in-5-minutes-tutorial/)这是在您的 zendframework 2 应用程序中设置 acl 的快速简便的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T15:44:47.010

Just starting to explore ACL. your problem comes up first in google search result. It is clear that the namespaces in use in the tutorial are wrong (use Zend\Acl\Acl as ZendAcl,).

The ACL namespace is:

```
namespace Zend\Permissions\Acl;

class Acl implements AclInterface 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-14T13:24:56.893

我在解决 auth+acl 控制问题时遇到了同样的问题，最终我得到了它。这很简单：

1 - 创建一个全局或特殊模块 acl 配置文件：`....module/Profil/config/acl.config.php`

您可以将它放在应用程序的全局配置目录下

```
return array(
    'acl' => array(
        'roles' => array(
            'guest'   => null,
            'member'  => 'guest',
            'admin'  => 'member'
        ),
        'resources' => array(
            'Profil' => array(
                'Index' =>  array(
                    'allow' => array(
                    // action   => member
                        'signup'    => 'guest',
                        'index'     => 'guest', // signin ;)
                        'home'      => 'member',
                        'signout'   => 'member',
                        'all'       => 'admin',
                    ),
                    'deny' => array(
                        'home'    => 'guest',
                    ),
                ),
            ),
        ),
    ),
); 
```

在这里，我定义了我的模块“Profil”如何工作以及可以使用它的角色以及每个角色的限制。

角色：

客人没有父母。
成员从来宾权限继承。
boss admin 继承自 member 和 guest。

# c - 只有某些输入的 C 中的分段错误

> ID：14155090
> 
> 赞同：0
> 
> 时间：2013-01-04T10:13:31.770
> 
> 标签：c, algorithm, data-structures, malloc, knapsack-problem

好的，所以我正在尝试解决背包问题。

在小的输入情况下，程序运行没有问题并提供最佳解决方案，但是当输入大小很大，或者输入文件中的数字变大时，程序会给我一个分段错误。我不太明白为什么会发生这种情况，因为 INT 的最大值也超过了这些数字中的任何一个。

这是我的代码。

```
 #include<stdio.h>
    #include<stdlib.h>
    int main(void)
    {
        int W,n,i,j,k ;
        scanf("%d %d",&W,&n); // capacity of knapsack and number of total items
        int value[n+1],weight[n+1];
        int** A;
        A = (int **)malloc((n+1)*sizeof(int*));
        for(i=0;i<W+1;i++)
            A[i]=(int *)malloc(sizeof(int)*(W+1));
        for(i=1;i<n+1;i++)
        {
            scanf("%d %d",&value[i],&weight[i]); //taking value and weight of each item
        }
        for(i=0;i<W+1;i++)
            A[0][i]=0;
        for(i=0;i<n+1;i++)
            A[i][0]=0;
        for(i=1;i<n+1;i++)
        {   
            for(j=1;j<W+1;j++)
            {
                if(j-weight[i]<0)
                {
                    A[1][j]=A[0][j];
                }
                else
                {
                    if(A[0][j]>A[0][j-weight[i]]+value[i])
                        A[1][j]=A[0][j];
                    else
                        A[1][j]=A[0][j-weight[i]]+value[i];
                }
            }
            for(k=0;k<W+1;k++)
                A[0][k]=A[1][k];
        }   
        int max=0;
        i=1;
        for(i=0;i<2;i++)
            for(j=0;j<W+1;j++)
            {
                if(A[i][j]>max)
                    max=A[i][j];
            }
        printf("%d\n",max);
        return(0);
    } 
```

它为此输入运行完美[http://spark-public.s3.amazonaws.com/algo2/datasets/knapsack1.txt](http://spark-public.s3.amazonaws.com/algo2/datasets/knapsack1.txt)

但是当输入大小是链接中给出的大小时，它会提供一个段错误[http://spark-public.s3.amazonaws.com/algo2/datasets/knapsack2.txt](http://spark-public.s3.amazonaws.com/algo2/datasets/knapsack2.txt) 感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T10:15:31.660

为第二维分配数组时，您可以：

```
for(i=0;i<W+1;i++)
     A[i]=(int *)malloc(sizeof(int)*(W+1)); 
```

它应该`n+1`而不是`W+1`在循环中。您应该遍历“项目”维度并分配“重量”维度。

该解决方案将完美地工作`n <= W`，但对于大量的项目（`W < n`） - 你会得到**未定义的行为**，因为你试图`A[n][0]`在某个时候访问，但你没有为第`n`th 项目分配数组。

所以基本上 - 你需要将第二维的初始化更改为：

```
for(i=0;i<n+1;i++)
     A[i]=(int *)malloc(sizeof(int)*(W+1)); 
```

# visual-c++ - c++ ODBC连接字符串

> ID：14155092
> 
> 赞同：0
> 
> 时间：2013-01-04T10:13:43.423
> 
> 标签：visual-c++, odbc

在 VC++ 中，我使用 ODBC 将数据库与以下字符串连接起来：

```
SQLDriverConnect (sqlconnectionhandle, 
             NULL, 
             L"Driver={SQL Server};Server=serverIP, 1433;Database=DBName;Uid=aaa;Pwd=bbb;",
             SQL_NTS, 
             retconstring, 
             1024, 
             NULL,
             SQL_DRIVER_NOPROMPT)) 
```

我的问题是如何在没有硬编码的情况下一般输入 userName 和 userPw。

在这里，L 表示 Unicode。

例如：（这个例子不起作用）

```
SQLWCHAR userName = L"aaa";
SQLWCHAR userPw = L"bbb";
SQLWCHAR connString = L"Driver={SQL Server};Server=serverIP, 1433;Database=DBName;Uid=" + userName + ";Pwd=" + userPw + ";", 
```

这是连接字符串的示例：（有效！）

```
wchar_t* subString = L" currentDate = '2013-01-04' ";

SQLWCHAR queryString[] = L"select * from Table1 WHERE ";
wcscat_s(queryString, subString ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:41:45.490

最后，我使用 SQLBindParameter 来绑定 SQLStatement 和 SQLExecDirect 来执行语句。

```
eg: SQLExecDirect(sqlstatementhandle, queryString, SQL_NTS) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:48:56.863

L"stringName" 表示这是 Unicode 字符串，使用 SQLDriverConnectA 可以解决问题。

例如：

```
SQLDriverConnectA(sqlconnectionhandle, 
         NULL, 
         "Driver={SQL Server};Server=serverIP, 1433;Database=DBName;Uid=aaa;Pwd=bbb;",
         SQL_NTS, 
         retconstring, 
         1024, 
         NULL,
         SQL_DRIVER_NOPROMPT)) 
```

# iphone - Cocos2d iphone中的弹丸运动

> ID：14155093
> 
> 赞同：0
> 
> 时间：2013-01-04T10:13:44.683
> 
> 标签：iphone, ios, cocos2d-iphone, game-physics

我想扔一个有抛射运动的球。我在屏幕中心有一只猴子，onTouchBegin 我正在获取触摸的起点，而 onTouchEnded 我正在获取终点。从起点和终点我取它们之间的角度值。比如 30 度、45 度或 90 度。这是我的代码，我通过它计算了起点到终点的角度

```
 float angleRadians = atan2(startTouchPoint.x - touchPoint.x, startTouchPoint.y -    touchPoint.y);
    float angleDegrees = CC_RADIANS_TO_DEGREES(angleRadians);
    float cocosAngle = -1 * angleDegrees; 
```

现在我正在使用抛射运动公式以我根据上述公式计算的角度投掷球。

**内部初始化方法**

```
 gravity = 9.8; // metres per second square
        X = 0;
        Y = 0;
        V0 = 50; // meters per second -- elevation
        VX0 = V0 * cos(angle); // meters per second
        VY0 = V0 * sin(angle); // meters per second
        gameTime = 0; 
```

**并且 onTouchEnded 我已经调用了会扔球的 fire 方法**。

```
-(void)fire:(ccTime) dt
{

    CCLOG(@"Angle 1: %.2f",angle);
    gameTime += dt*6;

    // x = v0 * t * cos(angle)
    X = (V0 * gameTime * cos(angle))/2+120;

    // y = v0 * t * sin(angle) - 0.5 * g * t^2
    Y = (V0 * gameTime * sin(angle) - 0.5 * gravity * pow(gameTime, 2))/2+255;

    if (Y > 50)

    {
        sprite_webfire.position = ccp(X,Y);
        flag = true;
    }

    else
    {

        //angleValue += 15;
        angleValue = angle;
        angle = [self DegreesToRadians:angleValue];
        gravity = 9.8; // metres per second square
        X = 0;
        Y = 0;
        V0 = 50; // meters per second -- elevation
        VX0 = V0 * cos(angle); // meters per second
        VY0 = V0 * sin(angle); // meters per second
        gameTime = 0;

        // [self pauseSchedulerAndActions];
    }

    if (Y < 50)

    {
        [self unschedule:@selector(fire:)];        
    }

    NSLog(@"ball (%lf,%lf), dt = %lf angle value %d", X, Y, dt,angleValue);
} 
```

此代码正在运行。通过这段代码，我可以以弹丸运动的方式扔球，但我不能把它扔到我想扔的地方。我不能从起点到终点将 wrt 扔到给定的角度。

我可以像红色标记一样扔它，但我想用刷卡扔它蓝色标记。但它不像我在刷屏幕那样扔。

![在此处输入图像描述](../Images/18e50527d689c8e39dc8e355cc85dc93.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T23:45:15.763

我不确定您使用什么数学来执行此操作，我发现您的文档有点混乱。

通常，对于项目瓷砖运动，这是您需要做的：

找出相对于水平面的起飞角度。然后根据您希望对象具有的任何初始速度，使用它并触发方程将您的初始速度放入矩形分量中。

例如：

如果初速度为 10，则 y 方向的初速度为 10sin(angle)，x 方向的初速度为 10cos(angle)。

然后在更新精灵的位置时，您应该使用运动学方程：[http ://www.physicsclassroom.com/class/1dkin/u1l6c.cfm](http://www.physicsclassroom.com/class/1dkin/u1l6c.cfm)

首次更新速度：

Y方向的速度：V = v（初始）+重力*（增量时间）

X 方向的速度是恒定的，除非您想考虑某种阻力以使事情变得更加复杂。

然后位置 y = oldPositionY + 速度（在 Y 方向）*（增量时间）+ 1/2（重力）（增量时间）^2。

和位置 x = oldPositionX + Xvelocity*delta-time

我做了一些抛射运动的东西，我发现你需要将重力设为一个很大的常数，大约 500 以使其看起来栩栩如生。让我知道这是否令人困惑或者您不知道如何实现它。

我建议你看看下面的教程：[http](http://www.raywenderlich.com/4756/how-to-make-a-catapult-shooting-game-with-cocos2d-and-box2d-part-1) ://www.raywenderlich.com/4756/how-to-make-a-catapult-shooting-game-with-cocos2d-and-box2d-part-1 .

它向您展示了如何使用物理引擎，因此您不需要做太多的数学运算。教程中的所有“子弹”也随着弹丸运动而移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T10:22:25.423

我将在已经说过的内容中添加一些内容（这很好）。首先，您不应该浪费时间计算任何角度。坚持使用矢量来提高速度。换句话说，从触摸开始和结束位置获取初始速度矢量，这将是您的 (v0x, v0y)。例如：

```
CGPoint initialVelocity = ccpSub(touchPoint, startTouchPoint);
float v0x = initialVelocity.x;
float v0y = initialVelocity.y; 
```

如果您希望为初始速度矢量分配不同的大小，只需对其进行归一化，然后将其乘以一个新的大小。

```
CGPoint unitVelocity = ccpNormalize(initialVelocity);
float magnitude = 200; // or whatever you want it to be
CGPoint velocity = ccpMult(unitVelocity, magnitude); 
```

无论如何，正确设置此速度后，您可以像以前一样在位置计算中使用它，但不会增加计算角度的复杂性。

```
-(void) fire:(ccTime)dt
{
    .
    .
     gameTime += dt;
     // if x(t) = x0 + v0x*t, then dx = v0x*dt
     x += v0x*dt;

     // if y(t) = y0 + v0y*t - 0.5t^2, then dy = v0y*dt - g*t*dt
     y += (v0y * dt - g*gameTime*dt);
     .
     .
} 
```

你也不应该设置`v0 = 50`. 按照我的建议计算矢量的速度。

需要考虑的重要一点是，您正在计算基于米单位的物理世界中的运动应该是什么。屏幕以点而不是米为单位运行，因此您可能必须将缩放因子应用于新位置 (x,y) 以获得您想要的外观。

编辑：我的错，我不得不在位置计算中重新审视我的数学。我的差速器有点生锈了。

# ember.js - 如何在 Ember-Data 上设置映射

> ID：14155094
> 
> 赞同：4
> 
> 时间：2013-01-04T10:13:47.663
> 
> 标签：ember.js, ember-data

我开始使用 ember-data，但映射数据时遇到问题

这是我的代码示例（我已将 jsonTest 作为从后端接收的数据的示例，我不在后端工作，也无法修改来自服务器的响应）

```
Clive = Ember.Application.create();
// MODEL

Clive.Deadline = DS.Model.extend({
    title : DS.attr('string'),
});

jsonTest = '{"items":[{"id":93,"title":"title","date":"14-11-2012"}]}';

// Adapter 
Clive.adapter = DS.Adapter.create({
    findAll : function(store,type){
        var  self = this;        
        self.didFindAll(store, type, jsonTest);
    }
});

Clive.store = DS.Store.create({
  revision: 11,
  adapter: 'Clive.adapter'
});

Clive.deadlineList = Clive.Deadline.find().get('items'); 
```

当我运行代码时出现此错误：

```
Uncaught Error: assertion failed: Your server returned a hash with the key 0 but you have no mapping for it 
```

这是一个带有示例的jsfidlle：http: [//jsfiddle.net/gilles/6D5BC/](http://jsfiddle.net/gilles/6D5BC/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T17:03:38.837

“服务器返回密钥为 0 的哈希”是因为 didFindAll() 需要一个 javascript 对象而不是字符串。所以再次尝试：

```
json = {"items":[{"id":93,"title":"title","date":"14-11-2012"}]};
// -> "Your server returned a hash with the key items but you have no mapping for it" 
```

下一步是将对象转换为具有 ember 所期望的命名约定。由于您的模型名为 Deadline，请使用以下内容：

```
jsonTransformed = '{"deadlines": [{"id":93,"title":"title 1","date":"14-11-2012"},{"id":94,"title":"title 2","date":"14-11-2012"}]}'; 
```

我添加了第二条记录，但你明白了。最后，您需要更改`Clive.deadlineList`变量的设置方式：`Clive.Deadline.find()`返回 Clive.Deadline 模型的集合，因此只需：

```
Clive.deadlineList = Clive.Deadline.find()
console.log(Clive.deadlineList.getEach('title'));
// -> title1, title2 
```

这是一个带有工作示例的更新 jsfiddle：http: [//jsfiddle.net/mgrassotti/6D5BC/9/](http://jsfiddle.net/mgrassotti/6D5BC/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-28T20:17:51.040

另一个简单的解决方案是使用以下 Gem。它只会让你的生活更轻松。您不需要手动生成或构建 json。

```
gem 'active_model_serializers' 
```

如需更多帮助，请查看此免费[截屏视频](http://railscasts.com/episodes/409-active-model-serializers)

# c# - 分页后 TableCell 拆分：剩余拆分部分丢失原始单元格属性

> ID：14155099
> 
> 赞同：12
> 
> 时间：2013-01-04T10:14:08.947
> 
> 标签：c#, .net, wpf, flowdocument

`TableCell`我对 WPF的拆分策略有疑问`FlowDocument` `Table`。

这是一个允许重现问题的简单代码：

**主窗口.xaml.cs**

```
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        var table = new Table() { BorderThickness = new Thickness(1), BorderBrush = Brushes.Black, CellSpacing = 0 };
        var rowGroup = new TableRowGroup();
        var tableRow = new TableRow();
        var cell1 = new TableCell() { Background = Brushes.Red, BorderThickness = new Thickness(0, 0, 1, 0), BorderBrush = Brushes.Black };
        var cell2 = new TableCell() { Background = Brushes.Red };

        cell1.Blocks.Add(new Paragraph(new Run("Cell 1 ******************************************************************************")));
        cell2.Blocks.Add(new Paragraph(new Run("Cell 2")));
        tableRow.Cells.Add(cell1);
        tableRow.Cells.Add(cell2);
        rowGroup.Rows.Add(tableRow);
        table.RowGroups.Add(rowGroup);

        var flowDocument = new FlowDocument();
        flowDocument.Blocks.Add(table);

        Content = flowDocument;
    }
} 
```

这是结果：

![表格单元拆分](../Images/96d1b17feab55b55ef0172a04553723b.png)

正如您在第二页上看到的，右侧单元格的背景颜色丢失了。

有没有人遇到过这个问题？欢迎任何解决方案/解决方法！

**编辑 1：**所有属性都丢失了，因此在行/列上设置背景颜色不会解决我的问题（我主要有关于 TableCell 边框厚度的问题）

这是一个显示边框问题的屏幕：

![在此处输入图像描述](../Images/89b14a1f557b04ffe0372188dabd44c3.png)

**编辑 2：**查看可视化树很有启发性。分页过程似乎只为第二页的 Row 生成了一个 ParagraphVisual，从而解释了所有视觉效果的损失。没有视觉，因此没有背景/边框/等...解决方案可能是[调整](http://msdn.microsoft.com/en-us/library/system.windows.documents.documentpaginator.aspx)与`FlowDocument`

![在此处输入图像描述](../Images/bbb8d8095445795b538ac0ad4be37a6f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T17:51:03.713

我已经更改了您的代码，以进一步展示 Eyal H 所说的内容：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        var table = new Table() { BorderThickness = new Thickness(1), BorderBrush = Brushes.Black, CellSpacing = 4 };
        var rowGroup = new TableRowGroup();
        var tableRow = new TableRow();
        var cell1 = new TableCell() { RowSpan = 1, Background = Brushes.Red, BorderThickness = new Thickness(3, 3, 3, 3), BorderBrush = Brushes.Green };
        var cell2 = new TableCell() { RowSpan = 1, Background = Brushes.Red, BorderThickness = new Thickness(2, 2, 2, 2), BorderBrush = Brushes.Blue };

        var correctContent = "**************************************************************************************************************************************************************************************************************************************";

        cell1.Blocks.Add(new Paragraph(new Run("Cell 1" + correctContent)));
        cell2.Blocks.Add(new Paragraph(new Run("Cell 2" + correctContent.Replace("*","   ")+".")));
        tableRow.Cells.Add(cell1);
        tableRow.Cells.Add(cell2);
        rowGroup.Rows.Add(tableRow);
        table.RowGroups.Add(rowGroup);

        var flowDocument = new FlowDocument();
        flowDocument.Blocks.Add(table);

        Content = flowDocument;
    }
} 
```

单元格 2 有许多以点结尾的空格。单元格 1 适合第 1 页，而没有边框（也没有颜色）的空单元格放置在第二页上。我无法在层次结构中找到任何`Table`或`DocumentPaginator`对象的属性来处理单元格内的分页符。

![单元格 1 变短](../Images/a8f6e0b9f79acedc9149cfbf7724f90f.png)

“由于 Cell2 比它不拆分的页面短，因此“空”单元格位于第二页（没有属性）”

也许是时候写一篇 Connect 文章了？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T16:14:24.770

可悲的是，我无法找到解决方案。这似乎是 WPF FlowDocument 固有的错误，在分页过程中找到入口点并不容易。

我的主要目标是让表格在文档中的页面之间正确拆分，所以我最终决定允许表格拆分，但不允许单元格拆分。

这很容易做到，我只需要将单元格内容包装成`BlockUIContainer`这样：

```
cell1.Blocks.Add(new BlockUIContainer() { Child = new TextBlock () { Text = "Cell 1 ******************************************************************************", TextWrapping = TextWrapping.Wrap}}); 
```

这使我可以避免在拆分表中缺少边框，但单元格不能再拆分。

这并不令人满意，但这是我能够达到的最好的。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-12T13:55:51.653

我认为添加 TableColumn 将解决您的问题。下面是示例代码。

```
var table = new Table() { BorderThickness = new Thickness(1), BorderBrush = Brushes.Black, CellSpacing = 0 };
        var rowGroup = new TableRowGroup();
        var tableRow = new TableRow();
        var tableColumn1 = new TableColumn { Background = Brushes.Red };
        var tableColumn2 = new TableColumn { Background = Brushes.Red };
        var cell1 = new TableCell() { Background = Brushes.Red, BorderThickness = new Thickness(0, 0, 1, 0), BorderBrush = Brushes.Black };
        var cell2 = new TableCell() { Background = Brushes.Red };

        cell1.Blocks.Add(new Paragraph(new Run("Cell 1 ******************************************************************************")));
        cell2.Blocks.Add(new Paragraph(new Run("Cell 2")));
        tableRow.Cells.Add(cell1);
        tableRow.Cells.Add(cell2);
        rowGroup.Rows.Add(tableRow);
        table.Columns.Add(tableColumn1);
        table.Columns.Add(tableColumn2);
        table.RowGroups.Add(rowGroup);

        var flowDocument = new FlowDocument();
        flowDocument.Blocks.Add(table);

        Content = flowDocument; 
```

# php - XML 文件似乎随机损坏，无法弄清楚

> ID：14155100
> 
> 赞同：0
> 
> 时间：2013-01-04T10:14:09.853
> 
> 标签：php, xml, simplexml

我在我们的 wordpress 网站上使用了一个 xml 文件，每次有人查看帖子时都会使用帖子 ID 进行更新。

文件结构是这样的……</p>

```
 <?xml version="1.0"?>
  <posts>
     <refresh>
        <datetime>2013-01-04 08:48:21</datetime>
     </refresh>
     <post id="21931">
        <postviews>5</postviews>
     </post>
     <post id="25420">
        <postviews>18</postviews>
     </post>
     <post id="17770">
        <postviews>25</postviews>
     </post>
     <post id="24925">
        <postviews>4</postviews>
     </post>
  </posts> 
```

每次有人查看帖子时，如果帖子 ID 不在文件中，它会添加一个新节点，或者如果它存在，则会将当前值更新 1。

我遇到的问题是，有时文件没有被正确写入，最终被损坏并如下所示（错误总是在文件的底部）......</p>

```
 <?xml version="1.0"?>
  <posts>
     <refresh>
        <datetime>2013-01-04 08:48:21</datetime>
     </refresh>
     <post id="21931">
        <postviews>5</postviews>
     </post>
     <post id="25420">
        <postviews>18</postviews>
     </post>
     <post id="17770">
        <postviews>25</postviews>
     </post>
   </posts>         
   id="24925">
        <postviews>4</postviews>
     </post>
  </posts> 
```

我已经和我们的托管公司谈过了，问题没有显示为服务器错误。写入 XML 文件的脚本可能有问题吗？我写的脚本如下……</p>

```
<?php

 // echo get_the_ID();

if($post->post_status != "publish" || is_user_logged_in()) { 

    //Get the wordpress postID
$postID = get_the_ID();

$postData = get_post($postID);  

// Don't do anything if the post isn't published or being viewed by logged in users - will give a false impression
// echo $postID.'<br />'.$postData->post_title.'<br />'.$postData->post_date_gmt.'<br />';

} else { 

//Get the wordpress postID
$postID = get_the_ID();

$postData = get_post($postID);  

// echo $postID.'<br />'.$postData->post_title.'<br />'.$postData->post_date_gmt.'<br />';

$xmlFile = get_stylesheet_directory().'/most-read/most-read-posts.xml';

// load the document
$xml = simplexml_load_file($xmlFile);

// Get the server time
$serverTime = date('Y-m-d H:i:s');

// Is their a refresh node with an entry of datetime?
$refreshNodeExists = $xml->xpath("//refresh");

// Count it if 
$countrefreshNodeExists = count($refreshNodeExists);

// If it does exists
if($countrefreshNodeExists != 0) { // If the ID is already in the file

    $xmlRefresh = $xml->refresh->datetime;

    // echo 'Refresh time is already set<br /><br />';

} else {

    // echo 'Refresh time is not set<br /><br />';

    $refreshNode = $xml->addChild('refresh');

    $refreshNode->addChild('datetime', $serverTime);

}

// Check the time elapsed between the server time and the refreshNode

// Get and format the refreshNode
$to_time = strtotime($xmlRefresh);

// Get and format the server time
$from_time = strtotime($serverTime);

// Calculate the time elapsed
$refreshTimeElapsed = round(abs($to_time - $from_time) / 60,2);

// How long do we want to have between file refreshing - in minutes?
$refreshInterval = 120;

// Check if the time elapsed is more or less than $refreshInterval
if ($refreshTimeElapsed > $refreshInterval) {

    // FOR TESTING ONLY - Show the time elapsed
    // echo 'Ooops were over the refresh limit. It\'s currently at: '.$refreshTimeElapsed.' minutes.<br /><br />';

    $fh = fopen($xmlFile, 'w') or die("can't open file");

    $stringData = '<?xml version="1.0"?><posts><refresh><datetime>'.date('Y-m-d H:i:s').'</datetime></refresh></posts>';

    fwrite($fh, $stringData);

    fclose($fh);

                /*$test = $xml->xpath("//post");

                if (!empty($test)) {

                    echo 'Houston, we have posts';

                } else {

                    echo 'That\'s a negative Houston, we have no posts here';

                }*/

    // Reset the datetime node with the current datetime to start the refresh loop again.
    $xml->refresh->datetime = date('Y-m-d H:i:s');

} else { // Don't need to do anything here really

    // FOR TESTING ONLY - show how much time has elapsed
    // echo 'No need to change the refresh node. It\'s only at '.$refreshTimeElapsed.' minutes.<br /><br />';

    // Check to see if the post id is already in the xml file - has it already been set?
    $nodeExists = $xml->xpath("//post[@id=".$postID."]");

    //Count the results
    $countNodeExists = count($nodeExists);

    if($countNodeExists > 0) { // If the ID is already in the file

        // echo 'ID already here';

        // get the correct node
        $result = $xml->xpath("//post[@id=".$postID."]/postviews");

        // heres the trick - the first result of xpath, and the node value (stored in [0])
        $result[0][0] = $result[0][0]+1;

    } else { // If the ID isn;'t there, add a new entry in the xml file for the post

        //echo 'ID added';

        $postNode = $xml->addChild('post'); // adding a new <post> to the top level node
        $postNode->addAttribute('id', $postID); // adding a <postid> inside the new <post>
        $postNode->addChild('postviews', 1); // adding a postviews inside the new <post>
    }

    // save the updated document and format it using the DOMDocument class

    //$xml->asXML($xmlFile);
    $dom = new DOMDocument('1.0');
    $dom->preserveWhiteSpace = false;
    $dom->formatOutput = true;
    $dom->loadXML($xml->asXML());
    $dom->save($xmlFile);

} // End if ($refreshTimeElapsed > $refreshInterval) {

} // End if logged in or not published

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:16:50.607

> 每次有人查看帖子时，如果帖子 ID 不在文件中，它会添加一个新节点，或者如果它存在，则会将当前值更新 1。

我敢打赌这是由多个同时处决引起的。您是否锁定了对该文件的访问权限？如果两个人同时查看一个帖子会发生什么？

我认为（长期）您最好将此信息存储在数据库或类似数据库中。我认为写入通用 XML 文件不会扩展。

# objective-c - 在iOS中将文本插入字符串

> ID：14155101
> 
> 赞同：1
> 
> 时间：2013-01-04T10:14:11.913
> 
> 标签：objective-c, ios

我需要我的用户输入数字来输入他的电话号码。用户只能输入 8 个数字（例如 XXXXXXXX）。我需要将电话号码更改为 XX-XX-XXXX 格式。

这是我尝试过的：

```
[tfDID.text insertString:@"-" atIndex:2];
[tfDID.text insertString:@"-" atIndex:5]; 
```

但它返回给我一个错误说：

```
No Visible @interface for 'NSString' declares the selector 'insertString:atIndex:' 
```

在这方面需要一些指导。对不起，如果这是一个愚蠢的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T10:18:42.970

`No Visible @interface for 'NSString' declares the selector 'insertString:atIndex:'`

当你试图改变文本框的值时，它会返回你 NSString。

NSString 对象不能被变异，所以将它转换成一个可变字符串然后对其进行操作。

制作你的字符串`NSMutableString`。

作为，

```
NSMutableString *tfDIDString=[NSMutableString stringWithString:tfDID.text];
[tfDIDString insertString:@"-" atIndex:2];
[tfDIDString insertString:@"-" atIndex:5]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T10:22:22.127

`[UITextField text]`就是`NSString`，你需要声明局部变量 of`NSMutableString`并对其进行`insertString`操作

希望对你有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T10:24:52.413

实施`<UITextFieldDelegate>`然后执行：

```
-(void)textFieldDidChange:(UITextField*)textField
{
    if( textField.text.length == 2 || textField.text.length == 5 ){
        textField.text = [textField.text stringByAppendingString:@"-"];
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T10:25:40.147

完全同意建议将其设为可变字符串的答案。只是扮演魔鬼倡导者，你可以这样做：

```
NSString *partOne = [NSString stringWithRange:NSMakeRange(0,2)];
NSString *partTwo = [NSString stringWithRange:NSMakeRange(2,2)];
NSString *partThree = [NSString stringWithRange:NSMakeRange(4,4)];

NSString *formattedNumber = [NSString stringWithFormat:@"%@-%@-%@",partOne,partTwo,partThree]; 
```

我已经把它写出来了，但是如果你不介意嵌套和牺牲一点可读性，你可以将部分的字符串声明压缩到 stringWithFormat 调用中。

# ruby-on-rails - Rails 使用上下文验证表单输入

> ID：14155104
> 
> 赞同：2
> 
> 时间：2013-01-04T10:14:13.457
> 
> 标签：ruby-on-rails, validation

在我的应用程序中，我有一个这样的验证规则

```
validates_presence_of :name, :on => :custom_context 
```

当我保存我使用的数据时

```
@obj.save(:context => :custom_context) 
```

这样我的上下文验证规则就被应用了。这工作正常。在我的表单中，名称字段没有用星号标记。我如何告诉我的表单助手我们在`:custom_context`上下文中并且必须根据需要标记名称字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:25:26.833

我不明白您要做什么，但了解情况。您可以在模型中使用 attribute_accessor -

> 属性访问器：上下文

在您的视图（.html.erb 文件）中，在您的 <% form_for %> 中执行以下操作

```
<%= f.hidden_field :context, :value => "custom_context" %> 
```

在你的模型中：

> validates_presence_of :name, :if => Proc.new { |variable| variable.context == "custom_context"}

我认为这应该有所帮助：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:58:36.143

好的，我想没有完美的方法可以做到这一点。最终我做了这样的事情：

```
<%= f.input :name, :required => required_in_context?(:name, :custom_context) %> 
```

我写了一个辅助方法：

```
def required_in_context? field, context
  required = false
  MyClass.validators.each do |v|
    required = true if v.kind == :presence && v.attributes.include?(field) && v.options == {:on => context}
  end
  required
end 
```

# android - Http响应错误android

> ID：14155105
> 
> 赞同：1
> 
> 时间：2013-01-04T10:14:19.787
> 
> 标签：android, http, forceclose, internet-connection

我正在从 android 应用程序向 cgi php 服务器发出 HTTP 请求以获取 json 响应。我的应用程序在发出 HTTP 请求之前验证 Internet 连接是否可用。到目前为止，所有事情都正常工作。问题是我有时会因为发出 HTTP 请求后 Internet 连接突然中断而强制关闭。

所以我的问题是

1.  我如何理解我收到了服务器的响应？
2.  我是否需要为响应保留一个计时器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T10:51:54.680

这是我完美的网络请求处理运行代码

```
public JSONObject connectToService(String url, final Context context ) {

    try {
        if(!isConnected(context)){
            return;
        }

        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet(url);

        HttpParams httpParameters = httpGet.getParams();
        // Set the timeout in milliseconds until a connection is established.
        int timeoutConnection = 7500;
        HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
        // Set the default socket timeout (SO_TIMEOUT) 
        // in milliseconds which is the timeout for waiting for data.
        int timeoutSocket = 7500;
        HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

        HttpResponse httpResponse = httpClient.execute(httpGet);
        HttpEntity httpEntity = httpResponse.getEntity();
        InputStream is = httpEntity.getContent();

        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();

        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();

        String jsonString = sb.toString();
        Log.e("WebServiceHandler", "JSON string returned is"+jsonString.toString());

        JSONObject jsonObject = new JSONObject(jsonString);
        return jsonObject;
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (SocketTimeoutException e) {
        e.printStackTrace();
    } catch (ConnectTimeoutException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (JSONException e) {
        e.printStackTrace();
    }

      return null;
}

public boolean isConnected(Context context) {
    ConnectivityManager connMgr = (ConnectivityManager) 
            context.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();
    if (networkInfo != null && networkInfo.isConnected()) {
        return true;
    } else {
        return false;
    }
} 
```

此代码用于 GET 请求，如果您想使用 POST 请求访问 url，则只需相应地更改此行

```
HttpGet httpGet = new HttpGet(url); 
```

和

```
HttpPost httpPost = new HttpPost(url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:40:15.520

首先将所有 HTTP 进程设置为 asyncTask，因为它可能会由于连接速度慢而导致 ANR（应用程序无响应）强制关闭，然后进行适当的异常处理。可以使用以下代码检查服务器响应：

```
 HttpClient httpclient = new DefaultHttpClient(httpParameters);

        HttpGet httpget = new HttpGet(url + encodedData);

        response = httpclient.execute(httpget); 
```

# php - 获取 PHP 包含的试用路径

> ID：14155107
> 
> 赞同：1
> 
> 时间：2013-01-04T10:14:41.427
> 
> 标签：php

`include`是否可以以任何方式告诉 PHP 在失败时我想要一个尝试过的路径列表？该文件在那里，但 PHP 告诉我`include`失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:17:34.380

您可以使用[get_include_path()](http://www.php.net/get_include_path)找出`include`/`require`方法使用了哪些路径来获取源文件。

它是一个设置`php.ini`（当然可以被您的应用程序覆盖），它决定了这些方法应该放在哪里。他们不会看其他地方。

如果您需要这些方法在别处查找，只需附加另一个文件夹路径`PATH_SEPARATOR`，如下所示：

```
set_include_path(get_include_path() . PATH_SEPARATOR . $newPath); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:17:29.707

它检查的唯一路径是包含路径。你可以只使用[`get_include_path`](http://us1.php.net/get_include_path).

```
 $dirs = explode(PATH_SEPARATOR, get_include_path()); 
```

* * *

[有关此处](http://us1.php.net/manual/en/ini.core.php#ini.include-path)包含路径设置的更多信息。

# javascript - 无法从 adobe air xmlhttprequest 获取响应状态

> ID：14155112
> 
> 赞同：0
> 
> 时间：2013-01-04T10:15:14.310
> 
> 标签：javascript, air, xmlhttprequest

这是 html/javascrpt 文件中的代码：

```
var console = console || 
    {log:function(msg){window.runtime.trace(msg);}};
function waitToFinish(){
    console.log("this is wait to finish loading the url");
    console.log(this.readyState);
    console.log(this.status);
    if(this.readyState != 4){
        return;
    }
    console.log("readystate is 4");
    console.log("response text length is:"+this.responseText.length);
    if (this.status === 200 || this.status == 304) { // status is allways 0
        console.log("success");
        console.log("response text length is:"+this.responseText.length);
    }
}
function openURL(url){
    console.log("opening link:"+url);
    xmlhttp = new XMLHttpRequest();
    xmlhttp.open("GET", url 
            ,true);
    xmlhttp.onreadystatechange
        =waitToFinish;
    xmlhttp.send(null);
    return false; 
<input type=button onclick="openURL('http://www.yahoo.com');" value="click me" />
} 
```

这是空气中的输出：

```
opening link:http://www.yahoo.com
this is wait to finish loading the url
4
0
readystate is 4
response text length is:0 
```

这是在 firefox 中激活 forcecors 插件的输出：

```
opening link:http://www.yahoo.com
GET http://www.yahoo.com/ 200 OK        4.3s    
this is wait to finish loading the url
1
0
this is wait to finish loading the url
2
200
this is wait to finish loading the url
... a bunch of times readystate change is called
this is wait to finish loading the url
4
200
readystate is 4
response text length is:317163
success
response text length is:317163 
```

在空中 onreadystate 被调用一次，就是这样，状态立即为 4 但状态保持为 0 并且 responseText 为空。

[http://help.adobe.com/en_US/AIR/1.5/devappshtml/WS5b3ccc516d4fbf351e63e3d118666ade46-7eb3.html](http://help.adobe.com/en_US/AIR/1.5/devappshtml/WS5b3ccc516d4fbf351e63e3d118666ade46-7eb3.html)

显示 xmlhttprequest 仅检查 readystate 的示例，但如果我这样做，则 responseText 每次都是空的。同步请求有效，但异步无效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T11:22:41.860

在 Windows AIR 上使用 IE，所以当我的 IE 设置为脱机工作时，我的请求发生了奇怪的事情。有些没问题，因为它们在缓存中，有些会失败。

将 IE 设置为在线工作，一切都再次“正常”工作。

# itk - 使用 GDCM git 存储库构建 itk 时出错

> ID：14155119
> 
> 赞同：0
> 
> 时间：2013-01-04T10:15:37.193
> 
> 标签：itk, gdcm

我用gdcm官方发布的windows构建ITK。但它没有我在进一步编码中使用的一些文件。所以我必须使用 gdcm 的 git 版本，因为它具有我需要的那些，但是当我尝试使用 ITK_USE_SYSTEM_GDCM 构建 ITK 并使用 gdcm git 版本构建 gdcm bin 时遇到以下错误。

```
>------ Build started: Project: ITKIOGDCM, Configuration: Debug Win32 ------
80>Compiling...
80>itkGDCMImageIO.cxx
80>..\..\..\..\..\src\Modules\IO\GDCM\src\itkGDCMImageIO.cxx(41) : fatal error C1083: Cannot open include file: 'gdcmImageHelper.h': No such file or directory
80>itkGDCMSeriesFileNames.cxx
80>D:\ITK\src\Modules\IO\GDCM\include\itkGDCMSeriesFileNames.h(154) : error C2664: 'void gdcm::SerieHelper::AddRestriction(const gdcm::TagKey &)' : cannot convert parameter 1 from 'const std::string' to 'const gdcm::TagKey &'
80>        Reason: cannot convert from 'const std::string' to 'const gdcm::TagKey'
80>        No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called
80>..\..\..\..\..\src\Modules\IO\GDCM\src\itkGDCMSeriesFileNames.cxx(29) : error C2248: 'gdcm::SerieHelper::SerieHelper' : cannot access protected member declared in class 'gdcm::SerieHelper'
80>        D:\GDCM\gdcm\src\gdcmSerieHelper.h(198) : see declaration of 'gdcm::SerieHelper::SerieHelper'
80>        D:\GDCM\gdcm\src\gdcmSerieHelper.h(64) : see declaration of 'gdcm::SerieHelper'
80>..\..\..\..\..\src\Modules\IO\GDCM\src\itkGDCMSeriesFileNames.cxx(160) : error C2027: use of undefined type 'gdcm::File'
80>        D:\GDCM\gdcm\src\gdcmSerieHelper.h(34) : see declaration of 'gdcm::File'
80>..\..\..\..\..\src\Modules\IO\GDCM\src\itkGDCMSeriesFileNames.cxx(160) : error C2227: left of '->IsReadable' must point to class/struct/union/generic type
80>..\..\..\..\..\src\Modules\IO\GDCM\src\itkGDCMSeriesFileNames.cxx(163) : error C2027: use of undefined type 'gdcm::File'
80>        D:\GDCM\gdcm\src\gdcmSerieHelper.h(34) : see declaration of 'gdcm::File'
80>..\..\..\..\..\src\Modules\IO\GDCM\src\itkGDCMSeriesFileNames.cxx(163) : error C2227: left of '->GetFileName' must point to class/struct/union/generic type
80>..\..\..\..\..\src\Modules\IO\GDCM\src\itkGDCMSeriesFileNames.cxx(166) : error C2027: use of undefined type 'gdcm::File'
80>        D:\GDCM\gdcm\src\gdcmSerieHelper.h(34) : see declaration of 'gdcm::File'
80>..\..\..\..\..\src\Modules\IO\GDCM\src\itkGDCMSeriesFileNames.cxx(166) : error C2227: left of '->GetFileName' must point to class/struct/union/generic type
80>itkGDCMImageIOFactory.cxx
80>Generating Code...
80>Build log was saved at "file://d:\ITK\binGDCM\Modules\IO\GDCM\src\ITKIOGDCM.dir\Debug\BuildLog.htm"
80>ITKIOGDCM - 9 error(s), 0 warning(s) 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:30:21.517

您将非常旧且已弃用的 GDCM 1.x 与 GDCM 2.x 混合在一起。它们实际上是**API**不兼容的。

# go - 如何从 Go 中的另一个文件调用函数

> ID：14155122
> 
> 赞同：155
> 
> 时间：2013-01-04T10:15:44.480
> 
> 标签：go

我想从 Go 中的另一个文件调用函数。任何人都可以帮忙吗？

`test1.go`

```
package main

func main() {
    demo()
} 
```

`test2.go`

```
package main

import "fmt"

func main() {
}

func demo() {
    fmt.Println("HI")
} 
```

如何`demo`拨入？`test2`_`test1`

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-01-04T10:17:32.317

您的包裹中不能有多个`main`。

更一般地说，一个包中不能有多个具有给定名称的函数。

删除`main`in`test2.go`并编译应用程序。该`demo`功能将从中可见`test1.go`。

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2017-05-13T13:16:14.053

Go Lang 默认只构建/运行提到的文件。要链接所有文件，您需要在运行时指定所有文件的名称。

运行以下两个命令之一：

```
$go run test1.go test2.go. //order of file doesn't matter
$go run *.go 
```

如果你想构建它们，你应该做类似的事情。

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2017-11-16T15:20:08.467

我一直在寻找同样的东西。要回答您的问题“*如何从 test1 调用 test2 中的演示？* ”，这是我的做法。`go run test1.go`使用命令运行此代码。*将current_folder*更改为test1.go所在的*文件夹。*

**test1.go**

```
package main

import (
    L "./lib"
)

func main() {
    L.Demo()
} 
```

**lib\test2.go**

将 test2.go 文件放在子文件夹中`lib`

```
package lib

import "fmt"

// This func must be Exported, Capitalized, and comment added.
func Demo() {
    fmt.Println("HI")
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2020-11-23T15:17:09.100

一个实用、客观、简单的快速示例：

main.go

```
package main

import "pathToProject/controllers"

func main() {
    controllers.Test()
} 
```

控制.go

```
package controllers

func Test() {
// Do Something
} 
```

永远不要忘记：可见的外部函数、变量和方法以大写字母开头。

IE：

```
func test() {
    // I am not Visible outside the file
}

func Test() {
    // I am VISIBLE OUTSIDE the FILE
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-10-02T03:00:43.690

```
文件夹结构

复制
  |
  |--duplicate_main.go
  |
  |--countLines.go
  |
  |--abc.txt

```

## 重复的_main.go

```
 package main

    import (
        "fmt"
        "os"
    )

    func main() {
        counts := make(map[string]int)
        files := os.Args[1:]
        if len(files) == 0 {
            countLines(os.Stdin, counts)
        } else {
            for _, arg := range files {
                f, err := os.Open(arg)
                if err != nil {
                    fmt.Fprintf(os.Stderr, "dup2: %v\n", err)
                    continue
                }
                countLines(f, counts)
                f.Close()
            }
        }

        for line, n := range counts {
            if n > 1 {
                fmt.Printf("%d\t%s\n", n, line)
            }
        }
    } 
```

## countLines.go

```
 package main

    import (
        "bufio"
        "os"
    )

    func countLines(f *os.File, counts map[string]int) {
        input := bufio.NewScanner(f)
        for input.Scan() {
            counts[input.Text()]++
        }
    } 
```

1.  `go run ch1_dup2.go countLines.go abc.txt`
2.  `go run *.go abc.txt`
3.  `go build ./`
4.  `go build ch1_dup2.go countLines.go`
5.  `go build *.go`

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-07-14T05:42:01.013

如果您只是运行`go run test1.go`并且该文件引用了同一包中另一个文件中的函数，则会出错，因为您没有告诉 Go 运行整个包，而是告诉它只运行那个文件。

您可以通过在 run commaned 中以多种方式将文件分组为一个包来告诉 go 作为一个完整的包运行。以下是一些示例（如果您的终端位于包的目录中）：

`go run ./`

或者

`go run test1.go test2.go`

或者

`go run *.go`

您可以使用 build 命令获得相同的行为，并且在运行创建的可执行文件后将作为分组包运行，其中文件知道彼此的功能等。示例：

`go build ./`

或者

`go build test1.go test2.go`

或者

`go build *.go`

然后，当您将所有文件作为一个完整的包一起运行时，只需从命令行调用可执行文件即可为您提供与使用 run 命令类似的输出。前任：

`./test1`

或者你的可执行文件名在创建时碰巧被调用。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2021-08-06T23:58:33.233

您可以通过将另一个文件声明为模块来从另一个文件导入函数。将这两个文件保存在同一个项目文件夹中。第一个文件`test1.go`应如下所示：

```
package main

func main() {
    demo()
} 
```

从第二个文件中删除 main 函数，因为一个包中只能存在一个 main 函数。第二个文件`test2.go`应如下所示：

```
package main

import "fmt"

func demo() {
    fmt.Println("HI")
} 
```

现在从将项目目录设置为工作目录的任何终端运行命令： `go mod init myproject`. 这将创建一个`go.mod`在项目目录中调用的文件。该`mod`文件的内容可能如下所示：

```
module myproject

go 1.16 
```

现在从终端只需运行命令`go run .`！演示功能将根据需要从第一个文件执行！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-08T19:18:37.250

作为一个不知道 go 模块发生了什么的愚蠢的人应该说：

1.  创建你的 main.go
2.  在同一目录中将其写入您的终端

> go mod init "你的模块名称"

3.  创建一个新目录并进入其中
4.  创建一个新的 .go 文件并将目录的名称写为包名称
5.  编写任何你想要的函数；请注意您的函数必须以大写字母开头
6.  回到 main.go 和

> 导入“您的模块名称/新目录的名称”

7.  最后你需要的是在它后面写下包的名称和你的函数名

> "你的新目录的名字" + . + 你的函数（）

8.  并在终端中写下

> 去跑步 。

你可以改写***go run main.go***。有时您不想创建目录并想在同一目录中创建新的 .go 文件，在这种情况下您需要注意，是否以大写字母开头并不重要，您应该运行所有 .go 文件

> 去运行*.go

因为

> 去运行 main.go

不起作用。

# c++ - VS2012 使用 C++ 编译器 2012 年 11 月 CTP (v120) 强调错误错误

> ID：14155138
> 
> 赞同：1
> 
> 时间：2013-01-04T10:16:45.673
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012

我下载并安装了[Microsoft 的 Visual Studio 2012 预发布 C++ 编译器](http://www.microsoft.com/en-us/download/details.aspx?id=35515)。我的项目所有配置的平台工具集设置为：“Microsoft Visual C++ Compiler Nov 2012 CTP (v120_CTP_Nov2012)”。

这允许我的项目使用 Microsoft 在其预发布版本中实现的新 C++11 功能。使用新功能的代码编译并运行得非常好，但我仍然得到红色下划线曲线，就好像我的代码有错误一样。

到目前为止，我最好的选择是完全禁用“C/C++ Squiggles”。有什么方法可以让 Visual Studio 2012 意识到我正在使用 v120 进行编译，并相应地 squiggle 吗？

# 例子

以下代码按预期运行：

```
int values[] {4, 3, 2, 1, 0};

for(int i : values)
{
    std::cout << i << ' ';
} 
```

它产生输出：

> 4 3 2 1 0

但是，Visual Studio 2012用波浪形红色强调了第一个*值，并带有工具提示：*

> *int values[]*
> *错误：不允许不完整的类型*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T10:43:17.797

您没有使用 v120 进行编译。您正在使用 v120 CTP 进行编译。CTP 代表“社区技术*预览*”，“预览”位的一部分是 Intellisense 不识别任何新结构。此行为是为 CTP 设计的，不会被修复，也没有变通方法。

您将不得不等待 Microsoft 完成对 CTP 的错误修复并将其作为适当的更新发布，其中可能包含对新功能的 Intellisense 支持。

# iphone - 获取错误（断点）“线程 1：信号 SIGBRT”

> ID：14155139
> 
> 赞同：0
> 
> 时间：2013-01-04T10:16:48.050
> 
> 标签：iphone, ios, xcode, uiwebview, breakpoints

在尝试`tab-bar app`使用许多不同的功能（例如`UITableView`和`mapview`注释）运行我时，我最近`webview`在我的`firstviewcontroller`. 据我所知，那里的编码没有任何问题，尽管自从我尝试在我的第一个选项卡上添加 webview 以来，我一直`breakpoint/error`在尝试运行应用程序：`Thread 1: signal SIGBRT.`

我已经阅读了一些，有人说如果我将 mi xib 文件/storyboard 的部署更改为 iOS 5.0 而不是 6.0（我目前正在使用）并且没有`"Use Autolayout"`检查它应该摆脱它。虽然它没有。对此有何想法或解决方案？

这是我的 firstviewcontroller.h 的编码

```
#import <UIKit/UIKit.h>

@interface FirstViewController : UIViewController
@property (weak, nonatomic) IBOutlet UIWebView *webView;

@end 
```

第一视图控制器.m

```
#import "FirstViewController.h"

@interface FirstViewController ()

@end

@implementation FirstViewController
@synthesize webView;

- (void)viewDidLoad
{

    NSString *website = @"http://www.google.com";
    NSURL *url = [NSURL URLWithString:website];
    NSURLRequest *requestUrl = [NSURLRequest requestWithURL:url];
    [webView loadRequest:requestUrl];
    [super viewDidLoad];

}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];

}

@end 
```

主.m：

```
#import <UIKit/UIKit.h>

#import "AppDelegate.h"

int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));      // <--- HERE's where it says SIGBRT
    }
} 
```

所有输出：

```
2013-01-04 11:27:06.697 My Corp[784:13d03] Unknown class ViewController in Interface Builder file.
2013-01-04 11:27:06.716 My Corp[784:13d03] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<FirstViewController 0x808fbf0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key myWebView.'
*** First throw call stack:
(0x1800012 0x11c5e7e 0x1888fb1 0xc72711 0xbf3ec8 0xbf39b7 0xc1e428 0x32a0cc 0x11d9663 0x17fb45a 0x328bcf 0x1ede37 0x1ee418 0x1ee648 0x1ee882 0x20fed9 0x20fd14 0x20e1ea 0x20e06c 0x20c1cc 0x20c9b6 0x1f0753 0x1f0a7b 0x1f1964 0x154877 0x15b5a3 0x153eed 0x13db56 0x13ddbf 0x13df55 0x146f67 0x10afcc 0x10bfab 0x11d315 0x11e24b 0x10fcf8 0x1cc9df9 0x1cc9ad0 0x1775bf5 0x1775962 0x17a6bb6 0x17a5f44 0x17a5e1b 0x10b7da 0x10d65c 0x289d 0x27c5)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:25:07.853

在 .h 文件中设置 UIWebViewDelegate 并在 xib 中附加 webview 的委托

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T10:37:27.827

您所犯的错误已在崩溃报告中明确说明

```
[<FirstViewController 0x808fbf0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key myWebView.' 
```

要解决这个问题，请在InterfaceBuilder 左侧窗格中`XIB`右键单击该类。`File owner`您将找到一个名称`myWebView`带有黄色警告图标的对象，单击该插座连接上的删除并编译您的代码。您已经连接了插座，后来您删除了代码中的 IBOutlet，却忘记了删除 XIB 中的连接。

# python - Django - 如何以相同的形式使用多个 ModelForm？

> ID：14155140
> 
> 赞同：0
> 
> 时间：2013-01-04T10:16:48.470
> 
> 标签：python, django, modelform, django-forms

我有 4 个模型需要一次存储数据。为此，我正在考虑使用 ModelForms。

我同时测试了 2 个 ModelForm，但它不起作用。这是代码。

模型：

```
class Main(models.Model):
    section             = models.ForeignKey(Section)
    user                = models.ForeignKey(User)
    title               = models.CharField(max_length=250)
    date_inserted       = models.DateTimeField(auto_now_add=True)
    date_last_update    = models.DateTimeField(auto_now=True)

    def __unicode__(self):
    return self.title

    # To order in the admin by name of the section
    class Meta:
    ordering = ['date_inserted']

class BicycleAd(models.Model):
    main                = models.ForeignKey(Main)
    bicycleadtype       = models.ForeignKey(BicycleAdType)
    bicycleaditemkind   = models.ForeignKey(BicycleAdItemKind) # MPTT Model
    bicycleadcondition  = models.ForeignKey(BicycleAdCondition)
    country             = models.ForeignKey(GeonamesCountry)       
    city                = models.ForeignKey(GeonamesLocal) 
    date_inserted       = models.DateTimeField(auto_now_add=True)
    date_last_update    = models.DateTimeField(auto_now=True)

    # To order in the admin by name of the section
    class Meta:
    ordering = ['date_inserted'] 
```

形式：

```
class MainForm(forms.ModelForm):
    class Meta:
    model = Main
    exclude = ('user', 'section')

class BicycleAdForm(forms.ModelForm):
    class Meta:
    model = BicycleAd
    exclude = ('main', 'bicycleadtype', 'bicycleaditemkind', 'bicycleadcondition', 'city') 
```

看法：

```
def submit_data_entry_view(request):
    form_main      = MainForm(request.POST)
    form_bicyclead = BicycleAdForm(request.POST)

    return render_to_response('app/submit_data_entry.html', {'form_main': form_main, 'form_bicyclead': form_bicyclead}, context_instance=RequestContext(request)) 
```

模板：

```
<form method="post" action="">
    {{form_main}}
    {{form_bicyclead}}
</form> 
```

最后我只得到浏览器中输出的“form_bicyclead”？我怎样才能同时获得这两个表格？

最好的祝福，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T10:19:50.007

你也`submit_data_entry_view`用来渲染表格吗？不应该是这样——

```
def submit_data_entry_view(request):

    if request.method == 'POST': #form submit
        form_main      = MainForm(request.POST)
        form_bicyclead = BicycleAdForm(request.POST)

        #now process and save the form

        return <whatever_you_want>
    elif request.method == 'GET': #first time rendering the form
        form_main      = MainForm()
        form_bicyclead = BicycleAdForm()

        return render_to_response('app/submit_data_entry.html', {'form_main': form_main, 'form_bicyclead': form_bicyclead}, context_instance=RequestContext(request)) 
```

# assembly - 了解汇编中的符号和溢出标志

> ID：14155145
> 
> 赞同：7
> 
> 时间：2013-01-04T10:16:55.520
> 
> 标签：assembly, x86

这个问题是关于`cmp`汇编指令的。我无法理解我的书是如何对`SF`和`OF`标志进行推理的。

```
 cmp vleft, vright 
```

根据我的书：对于有符号整数，有三个重要的标志：零`(ZF)`标志、溢出`(OF)`标志和符号`(SF)`标志。如果操作结果上溢（或下溢），则设置上溢标志。如果操作的结果是否定的，则设置符号标志。如果`vleft = vright`，`ZF`则设置 （就像无符号整数一样）。如果`vleft > vright`,`ZF`未设置并且`SF = OF`. 如果`vleft < vright`,`ZF`未设置并且`SF != OF`. 不要忘记其他指令也可以更改 FLAGS 寄存器，而不仅仅是`CMP`.

首先，让我们考虑一下这种`vleft > vright`情况。我的书是这样说的：

> *如果 vleft > vright，为什么 SF = OF？如果没有溢出，那么差值将具有正确的值并且必须是非负的。因此，SF = OF = 0。但是，如果发生溢出，则差值将不具有正确的值（实际上是负值）。因此，SF = OF = 1。*

第一部分我明白了`SF = OF = 0`。例如，它可以是：

`0111 - 0101 = 0111 + 1010 + 1 = 10010 = 7 - 5 = 2`

这不会设置`OF`or`SF`标志。

这种情况也可能是：

`1100 - 0101 = 1100 + 1010 + 1 = 10111 = -4 - 5 = 7 (-9 if we had more bits)`

这不会设置`SF`标志（因为答案是肯定的 7）但会设置`OF = 1`，因此`SF != OF`。这显然违背了我的书的解释，即它们应该是平等的。

我在这里想念什么？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T13:05:36.350

你会把头撞到墙上，对此感到抱歉:)

在您的示例中，**-4 不大于 5**！所以是的，`OF`will be`1`和`SF`will be `0`，它们不会相等，这意味着 -4 小于 5，这是正确的。

为了说明`SF = OF = 1`反转操作数的情况：检查是否`5 > -4`通过做

`5 - (-4) = 5 + 4 = 1001b = -7`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T10:43:35.863

当两个操作数具有相同的符号时，您的书关于 OF== (SF!=CF) 是正确的。当操作数的符号不同时，不能有OF。

但是，在 RTL 级别中，OF 标志最常被计算为在符号位计算的进位输入的差异！= 进位输出。

```
i.e. for 1100-0101 = 1100+1010+1
bit position 0:  c_in=c_0= 1, a_0 = 0, b_0 = 0;  result=1, c_out=0
             1:  c_in=c_1= 0, a_1 = 0, b_1 = 1;  result=1, c_out=0
             2:  c_in=c_2= 0, a_2 = 1, b_2 = 0;  result=1, c_out=0
             3:  c_in=c_3= 0, a_3 = 1, b_3 = 1;  result=0, c_out=1 
```

这里c_in_3 != c_out_3，表示溢出。

# powershell - 如何附加到传递给函数的powershell中的字符串

> ID：14155149
> 
> 赞同：1
> 
> 时间：2013-01-04T10:17:09.930
> 
> 标签：powershell, powershell-2.0, string-concatenation

我有一个将字符串作为参数的方法。此字符串与值连接。在处理结束时，我需要完整的连接字符串

```
function MyFunction()
{
    Param ($output)

    $msg = "x " #say this x was different per call
    $output += $msg
}

$output = "start "
MyFunction -output $output
MyFunction -output $output
MyFunction -output $output

Write-Host $output 
```

**输出**

```
"start " 
```

**预期的**

```
"start 1 2 3 " 
```

我使用 [ref] 进行了查找，但这适用于值类型而不是引用类型。

**更新**

你如何将不同的命名变量传递给函数，即

```
$output1 = "start1 "
$output2 = "start2 "

MyFunction -output $output1
MyFunction -output $output2

WriteHost($output1)
WriteHost($output2) 
```

期待结果

start1.... 从 MyFunction 中附加 start2.... 从 MyFunction 中附加

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T10:29:15.363

在您的函数内部，您与脚本的其余部分不在同一范围内。因此，当您使用 $script:output 更新 $output 时，您必须指定脚本范围：

```
$output= "start "
function MyFunction()
{
    Param ($output)

    $msg = "x " #say this x was different per call
    $script:output+=$msg

}

MyFunction -output $output
MyFunction -output $output
MyFunction -output $output

Write-Host $output 
```

# java - JUnit4：在多种测试方法中测试 System.out

> ID：14155150
> 
> 赞同：1
> 
> 时间：2013-01-04T10:17:16.657
> 
> 标签：java, junit4, system.out

我有一个应用程序，我想编写单元测试来测试输出，写入 System.out（可能还有 System.err）。每个单独的测试都按预期工作，但是当在同一个类中添加多个测试时，一些测试会失败，因为 JUnit4 似乎是多线程的（因此不能保证何时确切地重置流）。当我在自己的类中分离所有测试方法并使用测试套件时，也会发生同样的情况。

有任何想法吗？

```
private static final PrintStream SYS_OUT = System.out;
private static final PrintStream SYS_ERR = System.err;

private final ByteArrayOutputStream outContent = new ByteArrayOutputStream();
private final ByteArrayOutputStream errContent = new ByteArrayOutputStream();

@Before
public final void setUpStreams() throws UnsupportedEncodingException {
    System.setOut(new PrintStream(this.outContent, true, CHARSET));
    System.setErr(new PrintStream(this.errContent, true, CHARSET));
}

@After
public final void cleanUpStreams() {
    System.setOut(SYS_OUT);
    System.setErr(SYS_ERR);
}

@Test
public final void listServicesAndMethods() throws ServiceException, UnsupportedEncodingException {
    com.example.Main.main(new String[]{"--list-services"});
    LOG.debug(this.outContent.toString(CHARSET));
    assertTrue("String not found", this.outContent.toString(CHARSET).contains("Some string"));
    assertFalse("Other string found", this.outContent.toString(CHARSET).contains("Some other string"));
    this.outContent.reset();
    this.errContent.reset();
} 
```

***编辑：***事实证明，测试失败的问题不是（只是？）因为流，而是因为我将选项存储在我的主类的静态字段中。这具有在连续测试期间几个选项保持活动的效果。我意识到，在实现了 Arian 的建议之后，我使用第二个类作为实例，而不是调用静态方法，从而解决了我的问题。

感谢所有回复的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:33:52.053

如果尚未这样做，请重写应用程序的部分以将输出作为参数，而不是直接写入`System.out`. 无论测试如何，这通常都是更好的设计。

在每个测试中，创建一个**新**的输出流（如果必须的话，也可以[监视](http://docs.mockito.googlecode.com/hg/org/mockito/Mockito.html#13)`System.out`）并将其传递给被测代码单元。

# java - 记住使用 Java Applet 访问 Keystore 的 SmartCard PIN

> ID：14155152
> 
> 赞同：1
> 
> 时间：2013-01-04T10:17:21.197
> 
> 标签：java, applet, keystore, smartcard, pkcs#11

我可以使用 MS CryptoAPI 和 PKCS#11（使用 .dll 注册提供程序）访问带有 Java Applet（嵌入式）的智能卡。我可以同时使用两者，但现在我使用 CryptoAPI 来更轻松地支持所有键盘/Windows 版本：

```
keystore = KeyStore.getInstance("Windows-MY");
keystore.load(null,null); 
```

我正在使用 Javascript 与 Java 通信，以在我正在开发的 Web 应用程序中签署一些操作。

默认用例正是我所需要的：

*   我获取/加载密钥库
*   我尝试签署一些东西，它要求输入 PIN，并且一旦引入它就会记住直到会话结束（当我提取智能卡或缓存超时时）。

问题是：它是一个嵌入式小程序。当我在网页 A 上签名然后转到网页 B（例如，通过链接或重定向）时，Applet 被销毁/创建（就像 JVM 一样）并且会话丢失，所以我必须介绍再次输入密码。当然，如果我不离开/重新加载实际网页，则不会发生这种情况。

问题：有没有办法以编程方式重用会话/Applet/JVM？或以可以避免此问题的方式加载密钥库？

我已经知道的可能的解决方法：

*   自由浮动小程序。我不能，它没有 GUI，我需要与 JS 通信......
*   框架集/iframe 中的 Web。肮脏的。
*   Ajaxify web（只有一个页面 + Ajax 中的所有操作 + 某种历史 JS 插件或 PushState）。这是我更喜欢的解决方案，但需要一些重构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:45:58.143

我最终以完全不同的方式完成了它：为签名创建客户端桌面应用程序。这个应用程序安装在所有桌面客户端中（这对我来说没问题，因为它是一个公司环境）。这个新应用程序使用`HttpListener`. 我通过 javascript (jsonp) 从网络连接，发送要签名的字符串，然后返回带有签名结果的 js 回调。

*   它现在会记住 PIN，因为它不会丢失会话。
*   因此，不需要Java。

# c - 程序将小数四舍五入为我不想要的指数

> ID：14155162
> 
> 赞同：1
> 
> 时间：2013-01-04T10:17:47.520
> 
> 标签：c

我有一个文件，其中包含这样的数据

USDINR12AUGFUT 58 `1344396605` 627906 2012-08-08 09:00:05 贸易 55.1600 2 55179.50 839 USDINR12AUGFUT 59 `1344396605` 627910 2012-08-08 09:00:05 贸易 55.1600

在我的 C 代码中，我通过这一行从文件中读取了这些数据

```
void as(char line[300])
{
    sscanf(line,"%s %lf %lf %lf %s %s %s %lf %ld %lf %ld",symbol, &trade_no, &utc_sec,&utc_nano,date,time,trade_type,&ltp,&ltq,&vwap,&volume);
        if (!strcmp(trade_type,"BID"))
        {
        cout<<endl;
        printf("%s %lf %lf %lf %s %s %s %lf %ld %lf %ld\n",symbol,trade_no,utc_sec,utc_nano,date,time,trade_type,ltp,ltq,vwap,volume);

//      cha/i);
        }

        else if (!strcmp(trade_type,"ASK"))
        {
        cout<<endl;
        printf("%s %lf %lf %lf %s %s %s %lf %ld %lf %ld\n",symbol,trade_no,utc_sec,utc_nano,date,time,trade_type,ltp,ltq,vwap,volume);
//      char li[100] = "Only Ask.txt";
//      wr(li);
        }

        else if (!strcmp(trade_type,"TRADE"))
        {
        cout<<endl;
        printf("%s %lf %lf %lf %s %s %s %lf %ld %lf %ld\n",symbol,trade_no,utc_sec,utc_nano,date,time,trade_type,ltp,ltq,vwap,volume);

//          char li[100] = "Only Trades.txt";
//          wr(li);
        } 
```

我把这个数字作为双utc_nano ..问题是当我通过另一个函数将它写入另一个文件时，我得到的输出是

USDINR12AUGFUT 58 `1.344e+009`627906 2012-08-08 09:00:05 贸易 55.1600 2 55179.50 839 USDINR12AUGFUT 59 `1.344e+009`627910 2012-08-08 09:00:05 贸易 55.1600

我不想要以指数形式突出显示的数字，我想要它在输入文件中的样子..请帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T10:27:49.323

我认为您不想在其中很多字段中使用 float 。除非您准备好接受交易编号中的四舍五入错误，Utc sec（秒），utc nano（大概是纳秒）

在这种情况下，您需要更改这些字段的类型以匹配并使用不同的 scanf 字符串来指示您正在读取（可能是 long 或 long long）整数。

此外，您似乎对所有这些都使用全局变量，这不是一个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T10:45:36.653

显然你有一个不寻常的 printf 实现。它应该[像这样](http://www.manpagez.com/man/3/printf/)工作，但显然不是。

`%f`对于 float 或 double 类型应该是正确的。`%g`您应该只获得带有or的指数`%e`。顺便说一句，`%lf`应该和`%f`.

您可以尝试添加精度修饰符：

```
printf("%100.20f", utc_sec); 
```

该示例应提供 100 个字符的最小字段宽度和 20 位的最大精度。当然，这些数字完全是疯狂的，但也许你会找到一个有效的技巧。

但是，如果您没有亚秒级的精度，则确实不需要浮点类型；整数将提供更大的范围，并且，如果您不打算对其进行数学运算，则字符串仍将提供更好的范围。

# asp.net - Linq/实体：一切或无（在数据库中）

> ID：14155163
> 
> 赞同：4
> 
> 时间：2013-01-04T10:17:50.337
> 
> 标签：asp.net, linq, entity-framework

我正在尝试实现一种仅在没有发生错误（“一切”）时将数据（实体对象）放入数据库的方法。如果发生错误，则不会在数据库中创建任何内容（“或什么都没有”）。我称之为“一切或一切”。

问题是我必须创建依赖于其他实体的实体。这是一个例子：

0) 我创建了一个上下文

```
DBContext ctx = new DBContext(); 
```

1) 我创建了一个 Invoice 实体对象并将其添加到上下文中：

```
Invoice inv1 = new Invoice();
inv1 .Number = "Invoice-2546432";

if(!ctx.Invoice.Exists(i => i.Number == "Invoice-2546432")) // problem n°1
   ctx.AddObject(inv1 );
else 
   throws new Exception('blah blah'); 
```

2) 发票有发票行：

```
InvoiceLine line = new InvoiceLine();
line .ID_INVOICE = in1.ID; // problem n°2
line .Label = "Line 1";
line .Ammount = 5.3;
ctx.AddObject(line ); 
```

3）最后：

```
ctx.SaveChanges(); 
```

所以，如果一切顺利，我有这样的事情：

```
 Table INVOICE
=====================
ID  |      NUMBER
_____________________
 0  |  Invoice-2454876
_____________________
 1  |  Invoice-2487432
_____________________
 2  |  Invoice-2546432

           Table INVOICE_LINE
=========================================
ID  |  ID_INVOICE  |   LABEL   |  AMOUNT 
_________________________________________
 0  |       0      |   Line 1  |   2.6    
_________________________________________
 1  |       0      |   Line 2  |   7.6    
_________________________________________
 2  |       1      |   Line 1  |   7.6    
_________________________________________
 3  |       2      |   Line 1  |   8.6    
_________________________________________ 
```

正如评论中提到的，有两个问题：

## 问题 1：

存在测试总是返回 false，因为它只在数据库中检查，而不是在我刚刚添加新对象的上下文本身中检查。

## 问题二：

因为发票只是添加到上下文中而不是在数据库中，所以我没有发票的未来 ID。所以我不能将它设置到发票行。

1）你知道如何做到这一点，基本上，一种将数据添加到数据库的安全方法吗？我正在开发一个财务应用程序，我想确保数据库中没有插入损坏的数据（例如：如果插入发票行失败，我希望不要将整个发票插入数据库）

2）我没有找到任何与那种东西相关的设计模式。你认识一个吗？

3）我不确定实体框架中的上下文对象是否很好理解：这是我的理解：

上下文（基本上）是与数据库的连接。当我添加一个实体时，它会保存在内存中的某个位置，并在我调用 SaveChanges() 后插入到数据库中。它是否正确 ？您知道任何详细介绍 ADO /entity 框架如何工作的网站或书籍吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T10:24:42.967

似乎您仍在思考一种`sql`或`record`心态 - EF 是一个 ORM，并且执行您所描述的大部分低级内务处理。

`Invoice`理想情况下，由于和之间存在 1:many 关系似乎很明显，因此`InvoiceLine`您应该在 EF 中对这种 1:N 关系建模，然后让 EF 担心修复/分配标识列，即：

```
Invoice invoice = new Invoice();
invoice.InvoiceLines.Add(new InvoiceLine() { ... set fields here })
... add more details

// Now add just the invoice to the context. The lines will be added automatically
ctx.AddObject(invoice);
ctx.SaveChanges(); 
```

要回答您的第二个问题，您可以考虑使用[`TransactionScope()`](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)在单个工作单元下聚合多个数据库操作。

要回答您的最后一个问题-您不应该将上下文视为数据库连接-它是一个更高级别的概念，它管理由它管理的实体的状态。

另请注意，`SaveChanges()`它本身应确保对上下文的所有更改都将保留在事务下，因此如果您使用单个上下文，通常不需要额外的事务控制。

这些SO帖子[here](https://stackoverflow.com/questions/6028626/ef-code-first-dbcontext-and-transactions)和[here](https://stackoverflow.com/questions/815586/entity-framework-using-transactions-or-savechangesfalse-and-acceptallchanges)应该有帮助吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T10:44:00.893

要回答您的 sec 问题，您可以在发票表中添加一个额外字段，例如 Status as bit。如果您最终保存了所有发票行，没有任何例外，您将更新相关发票并设置 Status = true。

使用 TransactionScope 使逻辑非常复杂。transactionscope 不够聪明，无法弄清楚所有事情。

# iphone - iPhone-避免 UIImagePickerController 中的视频压缩

> ID：14155166
> 
> 赞同：2
> 
> 时间：2013-01-04T10:17:55.250
> 
> 标签：iphone, objective-c, ios, uiimagepickercontroller

在我的应用程序中，我将视频上传到服务器。我使用本机`UIImagePickercontroller`从图库中挑选视频。

我的代表是；

```
imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 
```

我的应用程序必须在后台工作，并且在从图库中挑选大型视频时，压缩时间非常长，以至于用户有些恼火并退出应用程序。虽然发生这种情况，但`beginbackgroundTaskWithExpirationhandler`给了我 10 分钟的时间`bgTask`。但如果压缩当应用程序在后台时，进程超过 10 分钟操作系统暂停/杀死我的应用程序。

你知道我怎样才能避免这种情况吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:02:55.720

可悲的是，没有办法完全避免压缩。不过，将视频质量设置为高应该会有所帮助。

`myController.videoQuality = UIImagePickerControllerQualityTypeHigh;`

**编辑：**我没有对此进行测试，但听起来它会起作用。它是 UIImagePickerController 的翻版，声称可以提供对图像和视频的原始访问权限。

GitHub：[https ://github.com/elc/ELCImagePickerController](https://github.com/elc/ELCImagePickerController)

有关它的更多信息：http: [//www.icodeblog.com/2010/10/07/cloning-uiimagepickercontroller-using-the-assets-library-framework/](http://www.icodeblog.com/2010/10/07/cloning-uiimagepickercontroller-using-the-assets-library-framework/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-16T08:30:23.700

如果您知道如何获取 PHAsset 对象，请使用它而不是第三方解决方案（更精细的控制，永远不必升级）：

```
[[PHImageManager defaultManager] requestAVAssetForVideo:phAsset options:nil resultHandler:^(AVAsset *avAsset, AVAudioMix *audioMix, NSDictionary *info) {
    NSURL *url = (NSURL *)[[(AVURLAsset *)avAsset URL] fileReferenceURL];
    NSLog(@"url = %@", [url absoluteString]);
    NSLog(@"url = %@", [url relativePath]);
 }]; 
```

而 phAsset 是 PHAsset 对象，而 avAsset 是由 PHImageManager 生成的 AVAsset 对象，上述代码到控制台的输出将产生，例如：

```
2016-04-16 01:15:40.155 ChromaEpsilon[3423:933358] url = file:///.file/id=16777218.8262005
2016-04-16 01:15:40.155 ChromaEpsilon[3423:933358] url = /private/var/mobile/Media/DCIM/108APPLE/IMG_8421.MOV 
```

我相信不止这两个，但从这里开始。

# sql - 如果未知的列数SQL服务器如何将行转换为列

> ID：14155168
> 
> 赞同：1
> 
> 时间：2013-01-04T10:18:00.913
> 
> 标签：sql, sql-server, tsql, pivot, unpivot

我有这样的数据：

```
 MaGiangVienID  |  SoTiet1  |  SoTiet2  |  DateID
79000G07.000206 |      60   |    60.00  |     t11
79000G07.000206 |      54   |    54.00  |     t12 
```

我想要这样的结果：

```
 MaGiangVienID  | SoTiet1_t11 | SoTiet2_t11 | SoTiet1_t12 | SoTiet2_t12
79000G07.000206 |          60 |       60.00 |          54 |       54.00 
```

我不知道有多少列，因为`MaGiangVienID`有很多`DateID`

请帮助我！非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:36:35.280

对于这种类型的数据转换，您需要同时应用[`UNPIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)和[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)函数。从多列中`UNPIVOT`获取数据并将其放入行中，然后`PIVOT`获取行并将其转换回列。

要执行`UNPIVOT`转换为行的所有值，必须是相同的数据类型，因此可能需要进行转换。

**反透视**：

```
select MaGiangVienID, 
    value, 
    col +'_'+DateId col
from
(
  select MaGiangVienID, 
    cast(SoTiet1 as varchar(50)) SoTiet1, 
    cast(SoTiet2 as varchar(50)) SoTiet2,
    DateID
  from yourtable
) src
unpivot
(
  value
  for col in (SoTiet1, SoTiet2)
) unpiv 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/1b1cf/1)。unpivot 的结果是：

```
|   MAGIANGVIENID | VALUE |         COL |
-----------------------------------------
| 79000G07.000206 |    60 | SoTiet1_t11 |
| 79000G07.000206 | 60.00 | SoTiet2_t11 |
| 79000G07.000206 |    54 | SoTiet1_t12 |
| 79000G07.000206 | 54.00 | SoTiet2_t12 | 
```

如您所见，`UNPIVOT`生成新的列名`DateId`并附加到它的末尾。现在您应用该`PIVOT`功能。

**静态枢轴：**

```
select MaGiangVienID, SoTiet1_t11, SoTiet2_t11, SoTiet1_t12, SoTiet2_t12
from
(
  select MaGiangVienID, 
    value, 
    col +'_'+DateId col
  from
  (
    select MaGiangVienID, 
      cast(SoTiet1 as varchar(50)) SoTiet1, 
      cast(SoTiet2 as varchar(50)) SoTiet2,
      DateID
    from yourtable
  ) src
  unpivot
  (
    value
    for col in (SoTiet1, SoTiet2)
  ) unpiv
) src
pivot
(
  max(value)
  for col in (SoTiet1_t11, SoTiet2_t11, SoTiet1_t12, SoTiet2_t12)
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/98519/8)

现在，如果您有已知数量的`DateId`值，但您声明没有，则上述版本非常有效，因此您将希望使用动态 sql 实现相同的查询。

**动态枢轴：**

```
DECLARE @colsUnpivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX)

select @colsUnpivot = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('yourtable') and
               C.name not in ('MaGiangVienID', 'DateID')
         for xml path('')), 1, 1, '')

select @colsPivot = STUFF((SELECT DISTINCT ',' 
                      + quotename(c.name + '_'+t.DateId)
                    from yourtable t
                    cross apply sys.columns as C
                   where C.object_id = object_id('yourtable') and
                         C.name not in ('MaGiangVienID', 'DateID')

            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'select MaGiangVienID, '+@colsPivot+'
      from
      (
          select MaGiangVienID, value, col +''_''+DateId col
          from
          (
            select MaGiangVienID, 
              cast(SoTiet1 as varchar(50)) SoTiet1, 
              cast(SoTiet2 as varchar(50)) SoTiet2,
              DateID
            from yourtable
          ) src
          unpivot
          (
            value
            for col in ('+@colsUnpivot+')
          ) unpiv
      ) src
      pivot
      (
        max(value)
        for col in ('+ @colspivot +')
      ) p'

exec(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/ec903/4)

两个版本产生相同的结果：

结果是：

```
|   MAGIANGVIENID | SOTIET1_T11 | SOTIET2_T11 | SOTIET1_T12 | SOTIET2_T12 |
---------------------------------------------------------------------------
| 79000G07.000206 |          60 |       60.00 |          54 |       54.00 | 
```

如果您无权访问`UNPIVOT`/`PIVOT`函数，则可以复制查询。该`UNPIVOT`函数可以使用 a 复制`UNION ALL`，并且`PIVOT`可以使用`CASE`带有聚合函数的语句生成：

```
select MaGiangVienID,
  max(case when col = 'SoTiet1_t11' then value end) SoTiet1_t11,
  max(case when col = 'SoTiet2_t11' then value end) SoTiet2_t11,
  max(case when col = 'SoTiet1_t12' then value end) SoTiet1_t12,
  max(case when col = 'SoTiet2_t12' then value end) SoTiet2_t12
from
(
  select MaGiangVienID, 'SoTiet1_t11' col, cast(SoTiet1 as varchar(50)) value
  from yourtable
  where DateID = 't11'
  union all
  select MaGiangVienID, 'SoTiet2_t11' col, cast(SoTiet2 as varchar(50)) value
  from yourtable
  where DateID = 't11'
  union all
  select MaGiangVienID, 'SoTiet1_t12' col, cast(SoTiet1 as varchar(50)) value
  from yourtable
  where DateID = 't12'
  union all
  select MaGiangVienID, 'SoTiet2_t12' col, cast(SoTiet2 as varchar(50)) value
  from yourtable
  where DateID = 't12'
) src
group by MaGiangVienID 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/1b1cf/4)

所有版本都将产生相同的结果。

# unit-testing - 自定义 CakePHP 测试套件消息

> ID：14155171
> 
> 赞同：0
> 
> 时间：2013-01-04T10:18:09.173
> 
> 标签：unit-testing, cakephp, cakephp-2.0

我想确认一下，这是否可以将 Cakephp 测试套件（单元测​​试）消息自定义为我们想要的默认成功和失败消息？它显示以下消息

![在此处输入图像描述](../Images/9c827e85f63f4ac3d458d25222741fd1.png)

现在我想通过舍入函数自定义持续时间微秒到秒，并将传递的消息更改为成功或我自己的消息。我怎样才能实现这个目标？提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:24:14.440

您可以在其中`./lib/Cake/TestSuite/Reporter/CakeHtmlReporter.php`修改 TestSuite 报告统计信息的方式。

我正在使用不同版本的 CakePHP，但对我来说，第 151 行是这样的：

```
echo '<p><strong>Time:</strong> ' . $result->time() . ' seconds</p>'; 
```

您可以`$result->time()`通过任何 PHP 函数获取并运行它，以获得所需的输出。因为那`$result`是在你的测试用例中设置的，不是吗？

# boost - Cuda 生成的 VC++ 解决方案上的 Boost 错误（错误 C2675）

> ID：14155172
> 
> 赞同：1
> 
> 时间：2013-01-04T10:18:09.510
> 
> 标签：boost, cuda, compiler-errors

我在 Visual Studio 中创建了一个 Cuda 5 项目 (VC++)，我想使用 boost chrono API。当我包含时`boost/chrono.hpp`，我有以下错误：

```
Error   89  error C2675: unary '-' : 'T' does not define this operator or a conversion to a
 type acceptable to the predefined operator D:\StandaloneApp\Library\Vc\boost_1_52_0\boost\ratio\detail\mpl\abs.hpp
68  1   ThrustCompareSoaAndAos 
```

第 68 行附近的代码块：

```
#if defined(BOOST_MPL_CFG_NO_NESTED_VALUE_ARITHMETIC_2)
namespace aux {
template< typename T, T n > struct abs_wknd
{
    BOOST_STATIC_CONSTANT(T, value = (n < 0 ? -n : n));
    typedef integral_c<T,value> type; // line 68
};
}
#endif 
```

是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-23T13:16:30.477

我改变了这一行： BOOST_STATIC_CONSTANT(T, value = (n < 0 ? -n : n)); 到 BOOST_STATIC_CONSTANT(T, value = (n < 0 ? (n * -1) : n));

这符合要求。

# javascript - 打印页面命令

> ID：14155173
> 
> 赞同：-2
> 
> 时间：2013-01-04T10:18:12.943
> 
> 标签：javascript

> **可能重复：**
> [打印网页时如何隐藏元素？](https://stackoverflow.com/questions/355313/how-do-i-hide-an-element-when-printing-a-web-page)

我在下面使用`code`-`print`但如果打印`full page`. 我必须做什么才能打印`limited area`页面（在打印按钮区域下方）？

```
<SCRIPT LANGUAGE="JavaScript"> 
if (window.print) {
document.write('<form><input type=button name=print value="Print Page"onClick="window.print()"></form>');
}
</script> 
```

上面的脚本工作正常，但仅适用于整个页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:20:45.397

使用 CSS：

```
@media print{
  /* in here hide all elements you dont want printed e.g.:
   * div#header{ display: none; }
   */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:22:07.877

您可以添加`@media print`css 来隐藏页面上不想打印的所有元素。您可以将它们设置为 display:none 并且它们不会显示在打印页面上

# c# - 如何删除最大无效密码尝试的功能

> ID：14155174
> 
> 赞同：-1
> 
> 时间：2013-01-04T10:18:16.383
> 
> 标签：c#, asp.net, asp.net-membership

如何从 Asp.Net Membership 中删除 max Invalid Password Attempts 的功能。？

```
<membership>
            <providers>
                <clear/>
                <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" 
             connectionStringName="con"
             enablePasswordRetrieval="false"
             enablePasswordReset="true" 
             requiresQuestionAndAnswer="false" 
             requiresUniqueEmail="false"
             maxInvalidPasswordAttempts="5"
             minRequiredPasswordLength="6"
             minRequiredNonalphanumericCharacters="0" 
             passwordAttemptWindow="10" 
             applicationName="/"/>
            </providers>
        </membership> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T10:22:21.240

该线程可能会帮助您：

[使用 SqlMembershipProvider 禁用帐户锁定](https://stackoverflow.com/questions/796472/disabling-account-lockout-with-the-sqlmembershipprovider)

基本上你可以将尝试次数设置为 Int32.MaxValue。这不完全是您想要的，但它适用于大多数情况。

# maven - 詹金斯以不同的方式运行 maven 目标

> ID：14155176
> 
> 赞同：1
> 
> 时间：2013-01-04T10:18:30.350
> 
> 标签：maven, jenkins, javadoc, pmd, emma

我使用[maven](https://maven.apache.org/plugins/index.html)构建项目并对代码进行静态分析。但是，当我在 Jenkins 作业中运行这些命令时，reuslt 是不同的。

本地

```
$ mvn emma:emma pmd:cpd pmd:pmd javadoc:javadoc 
```

然后我得到目标\站点![在此处输入图像描述](../Images/73cb9f781d5be7db82af878690f92400.png)

在 Jenkins 工作中，构建部分，目标和选项

```
emma:emma pmd:cpd pmd:pmd javadoc:javadoc 
```

遇到错误，因为缺少带有报告的 target\site\emma 文件夹。![在此处输入图像描述](../Images/fd9285581ce44e442958334080432937.png)

```
...
Emma: looking for coverage reports in the entire workspace: /home/jenkins/jenkins-home/workspace/Atlas_Master_Maven
Emma: no coverage files found in workspace. Was any report generated?
Build step 'Record Emma coverage report' changed build result to FAILURE
... 
```

本地是 Windows 7 64x，远程 Jenkins 是 CentOS。两者都有 Maven 3.0.4。

为什么会发生这种情况，以及如何在 Jenkins 中获得相同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T06:27:27.003

仔细查看 Jenkins 作业输出，我发现未执行单元测试，因此 emma 没有数据可继续。谢谢@eis。是的，没有魔法。

```
[INFO] --- maven-surefire-plugin:2.10:test (default-test) @ atlas ---
[INFO] Surefire report directory: /home/jenkins/jenkins-home/workspace/Atlas_Master_Maven/target/surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
org.apache.maven.surefire.util.SurefireReflectionException: java.lang.reflect.InvocationTargetException; nested exception is java.lang.reflect.InvocationTargetException: null
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)
Caused by: java.lang.NoClassDefFoundError: com/funshion/base/service/ServiceException
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2427)
    at java.lang.Class.getMethod0(Class.java:2670)
    at java.lang.Class.getMethod(Class.java:1603)
    at org.apache.maven.surefire.util.ReflectionUtils.tryGetMethod(ReflectionUtils.java:57)
    at org.apache.maven.surefire.common.junit3.JUnit3TestChecker.isSuiteOnly(JUnit3TestChecker.java:65)
    at org.apache.maven.surefire.common.junit3.JUnit3TestChecker.isValidJUnit3Test(JUnit3TestChecker.java:60)
    at org.apache.maven.surefire.common.junit3.JUnit3TestChecker.accept(JUnit3TestChecker.java:55)
    at org.apache.maven.surefire.common.junit4.JUnit4TestChecker.accept(JUnit4TestChecker.java:52)
    at org.apache.maven.surefire.util.DefaultDirectoryScanner.locateTestClasses(DefaultDirectoryScanner.java:80)
    at org.apache.maven.surefire.junit4.JUnit4Provider.scanClassPath(JUnit4Provider.java:174)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:83)
    ... 9 more
Caused by: java.lang.ClassNotFoundException: com.funshion.base.service.ServiceException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 21 more

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

mojoSucceeded org.apache.maven.plugins:maven-surefire-plugin:2.10(default-test)
[JENKINS] Recording test results
forkedProjectSucceeded com.funshion.microlens:atlas:1.1.5.BUILD-SNAPSHOT
mojoStarted org.codehaus.mojo:emma-maven-plugin:1.0-alpha-3(default-cli)
[INFO] 
[INFO] --- emma-maven-plugin:1.0-alpha-3:emma (default-cli) @ atlas ---
processing input files ...
mojoSucceeded org.codehaus.mojo:emma-maven-plugin:1.0-alpha-3(default-cli)1 file(s) read and merged in 114 ms
nothing to do: no runtime coverage data found in any of the data files 
```

# silverlight - 从 Silverlight 发布和显示网页

> ID：14155185
> 
> 赞同：1
> 
> 时间：2013-01-04T10:19:14.720
> 
> 标签：silverlight, post

我想从我的 Silverlight 应用程序发布到网页并让网页出现在新窗口中。

我可以使用 GET 方法在新窗口中显示网页，使用以下代码：

```
var options = new HtmlPopupWindowOptions();
HtmlPage.PopupWindow(new Uri("http://localhost:12345/test.aspx"), "_blank", options); 
```

我可以发布到网页并使用以下代码获取结果数据：

```
var request = (HttpWebRequest)WebRequest.Create(new Uri("http://localhost:12345/test.aspx"));
request.Method = "POST";
request.ContentType = "text/xml";
request.BeginGetRequestStream(requestResult =>
{
    using (var stream = request.EndGetRequestStream(requestResult))
    {
        using (var writer = new StreamWriter(stream))
        {
            writer.Write("hello");
        }
    }

    request.BeginGetResponse(responseResult =>
    {
        var response = request.EndGetResponse(responseResult);
        using (var stream = response.GetResponseStream())
        {
            using (var reader = new StreamReader(stream))
            {
                var str = reader.ReadToEnd();
            }
        }
    }, null);
}, null); 
```

但我不能将两者放在一起 - 发布到页面而不是取回数据，而是在浏览器窗口中显示结果页面。我不知道这是否可能，但任何帮助实现这一点将不胜感激。

# google-app-engine - XMPP sendMessage 不发送消息

> ID：14155187
> 
> 赞同：0
> 
> 时间：2013-01-04T10:19:30.087
> 
> 标签：google-app-engine

我正在使用 XMPPservice 的 sendMessage 方法向谷歌邮件发送消息，但如果没有任何错误日志，则无法发送消息。

感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:07:11.653

一个常见的错误来源是接收者首先必须接受来自发送者的邀请。只有这样，消息才会被转发给接收者。您是否已发送邀请并被接受？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T07:33:20.783

如果 Gmail 收件人使用**Google Apps**（例如 Google Apps for Business），则收件人域必须[在其 DNS 中发布 SRV 记录，](http://support.google.com/a/bin/answer.py?hl=en&answer=34143)以允许将 XMPP 数据包路由到 Gmail 聊天后端。绝大多数 Google Apps 域可能不会配置 SRV 记录。

如果收件人是@gmail.com / @googlemail.com 帐户，那么（正如*@schuppe*建议的那样）此问题的最可能原因是收件人没有接受发件人的邀请。

# javascript - 验证 JavaScript

> ID：14155189
> 
> 赞同：1
> 
> 时间：2013-01-04T10:19:36.473
> 
> 标签：javascript, sql, asp.net-mvc

我从我的数据库加载了很多 JavaScript 进行验证和服装验证，可以通过我的客户上传，所以我想验证给定的 JavaScript 是否有效，同时在我的页面上渲染它时我正在使用 MVC 3.0 razer 视图引擎

请帮我找到解决方法

谢谢阿什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:27:47.327

根本不推荐您的任务。直接从数据库渲染 JavaScript 代码是危险的，因为您为 XSS 攻击敞开了大门。

但是，是的，您可以使用 JSLint 正常验证 JSCode。

有一个用于 Visual Studio 的插件，当然可能有一种方法可以使用 JSLint DLL 中包含的功能，以便您可以检查您的 JavaScript。

这两个帖子可能会让您朝着“正确”的方向前进。（我还是要说渲染用户输入的JS代码是根本错误的）

[http://www.codeproject.com/Articles/21438/JSLint-VS-JavaScript-Verifier-for-Visual-Studio](http://www.codeproject.com/Articles/21438/JSLint-VS-JavaScript-Verifier-for-Visual-Studio)

[http://blog.outsharked.com/2011/08/sharplinter-command-line-tool-for.html](http://blog.outsharked.com/2011/08/sharplinter-command-line-tool-for.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:03:33.280

我假设您正在使用 Visual Studio 2010/2012。

正如阿德里安萨拉查所说：

> 根本不推荐您的任务。直接从数据库渲染 JavaScript 代码是危险的，因为您为 XSS 攻击敞开了大门。

话虽如此，我强烈建议您重新考虑您当前的设计。如果您打算这样做，您应该查看 Web Essentials，它是 NuGet 提供的一个插件。这集成了 JSHint，它将在保存文件或在 Visual Studio 中构建应用程序后检查您的 Javascript。

也可作为安装程序下载：

[http://visualstudiogallery.msdn.microsoft.com/6ed4c78f-a23e-49ad-b5fd-369af0c2107f](http://visualstudiogallery.msdn.microsoft.com/6ed4c78f-a23e-49ad-b5fd-369af0c2107f)

或 2012 年：

[http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T10:39:54.177

Javascript 语法检查很棘手，因为基于原始处理方式（例如）生成静默运行时错误的空间很大。

有可用的 JSLint 等验证器，您可以构建自己的验证技术。

如果脚本完全运行，我对 javasript 文件（使用 jquery）使用以下结构在 body 标记上设置一个类（“scriptVerified”） - 这可以快速告诉您脚本是否在语法上看起来不错。但是当事件被触发时，事件处理程序仍然可能出错。

@AdiranSalazar 的安全警告值得一听。

```
$(document).ready(function () {
    pageScript.Init();
});

var pageScript =
{
    Init: function()
    {
        pageScript.CleanUp();
        pageScript.RegisterHandlers();
        pageScript.Start();
        pageScript.Final();
    },

    CleanUp: function()
    {
        //put page cleanup stuff in here
    },

    RegisterHandlers: function()
    {
        //register event handlers in here
    },

    Start: function()
    {
        //put page js code in here
    },

    Final: function () {
        $("body").addClass("scriptVerified"); //add class to body to say this has run
    }
}; 
```

# php - 使用 php PDO 从数据库中获取所有用户的列表

> ID：14155194
> 
> 赞同：-1
> 
> 时间：2013-01-04T10:19:55.500
> 
> 标签：php, json, pdo

我正在尝试从具有特定纬度和经度范围的数据库中获取玩家列表。查询工作正常并给我结果。然而，这些结果可能包括不止一名玩家。如下所示的当前代码只给了我一个 JSON 编码的玩家。我怎样才能让所有玩家 JSON 编码。

```
function GetPlayersInRange() 
    {
        try {
            $conn = $this->GetDBConnection();

            $long1 = trim($_REQUEST['long1']);
            $long2 = trim($_REQUEST['long2']);
            $lat1  = trim($_REQUEST['lat1']);
            $lat2  = trim($_REQUEST['lat2']);

            $statement = $conn->prepare('SELECT * FROM players WHERE longitude > :long1 AND longitude < :long2 AND latitude > :lat1 AND latitude < :lat2');
            $statement->bindParam(':long1', $long1, PDO::PARAM_STR);
            $statement->bindParam(':long2', $long2, PDO::PARAM_STR);
            $statement->bindParam(':lat1' , $lat1, PDO::PARAM_STR);
            $statement->bindParam(':lat2' , $lat2, PDO::PARAM_STR);
            $statement->execute();

            if(!($row = $statement->fetch(PDO::FETCH_ASSOC))) 
            {
                return "No Players";
            }

            $conn = null;
        } catch(PDOException $e) {
            throw $e;
        }

        return $row;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:24:05.400

更改`$statement->fetch`为`$statement->fetchAll`。[Fetch](http://php.net/manual/en/pdostatement.fetch.php)只会“从结果集中获取下一行”，而[fetchAll](http://php.net/manual/en/pdostatement.fetchall.php)将“返回包含所有结果集行的数组”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:25:08.300

您不应该在查询中将字符串与 int/double 进行比较。使用 PDO::PARAM_STR 时，它会将您的数据用单引号括起来。尝试在此处使用 PDO::PARAM_INT。

# android - 将背景设置为空

> ID：14155198
> 
> 赞同：18
> 
> 时间：2013-01-04T10:20:08.990
> 
> 标签：android

如果我在 xml 布局中使用以下行：

```
android:background="@null" 
```

1.  安全吗？
2.  从性能的角度来看是否有效？或者最好将实际代码中的布局或组件的背景设置为空？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-04T10:41:15.030

1.  `android:background="@null"`绝对安全。如果你想在代码中根据你的逻辑设置背景，你绝对可以使用这个；如果你没有在代码中设置背景，它仍然是一样的，永远不会引起任何问题。

2.  从性能的角度来看，您应该通过 XML 而不是以编程方式加载背景，因为您的布局只会从 XML 加载一次。如果您根据您的逻辑在代码中设置它，它可能会被多次加载。但是，无论哪种情况，性能几乎相同，差别不大。您应该从逻辑的角度决定使用哪种方法（如果您永远不会更改背景，请使用 XML 方法）。关键是，使用适当大小的图像作为背景。这将在性能上产生真正的差异。在任何一种方法中，大图像都需要更多时间来加载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T10:25:11.737

我认为，因为你不需要在代码端找到这个视图，它会对性能产生积极影响。而且我认为这不安全。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-15T13:04:19.437

我想你正在寻找这个：

```
android:background="@android:color/transparent" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T10:46:02.250

如果不需要背景，则无需在 xml 中提及。至少它将减少对 XML 元素的解析。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-22T13:54:37.067

It can be used for a number of things. I specifically use it to remove that underline in my EditText's. It is safe to use but just be sure that you require it in your code.

# uitableview - 在 XIB 文件中添加具有动态内容的 UITableView

> ID：14155203
> 
> 赞同：10
> 
> 时间：2013-01-04T10:20:35.123
> 
> 标签：uitableview, interface-builder, xib

有没有办法添加一个`UITableView`（不是一个`Table View Controller`，而是**另一个视图中的 TableView**）并将其内容设置为`"Dynamic Prototype"`一个`XIB file`？

在. `UITableView`_ `storyboard`但是，当我尝试在 XIB 文件中执行相同操作时，我无法将其内容设置为`"Dynamic Prototype"`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-12-31T12:53:03.193

**更新**

最近在思考这个问题，有一个相当直接的解决方案，那就是使用容器视图模式。

1.  基本上，将容器视图添加到您的 xib（或情节提要）。
2.  选择默认附加到容器视图的视图控制器。
3.  删除选定的视图控制器并将法线`uitableviewcontroller`拖到 IB 画布上。
4.  接下来，从容器视图中按住 control`uitableviewcontroller`并从可用的 segues 类型中选择“嵌入”。
5.  根据您的喜好调整容器视图的大小，并为表视图控制器创建适当的代码文件。
6.  重构`uitableviewcontroller`为单独的故事板/xib。

**注意**- 表格视图控制器将可作为视图控制器的子视图控制器访问，该视图控制器在代码中保存容器视图。

为什么这是正确的模式？1 个故事板，1 个控制器。TableView 有它自己的控制器，因为它足够复杂，需要一个单独的控制器。使用容器视图模式允许您维护单一职责模式。避免控制器膨胀。

**原始答案的解决方法**

如果您调整表格视图的大小，请注意一个问题；xml 将由 Xcode 重新生成并要求您重新添加属性。我已确认此编辑在 9.3+ 版本中仍然有效。示例存根可在[https://github.com/mingsai/test-stub-tableviewdynamic-inxib.git](https://github.com/mingsai/test-stub-tableviewdynamic-inxib.git)获得。

**原始答案**

1.  打开文件导航器
2.  右键单击 YourCustomView.xib 文件
3.  打开方式 > 源代码

[![开放式](../Images/111b4ff23792bcedabb3777c1fadc46f.png)](https://i.stack.imgur.com/7bJGG.jpg)

4.  查找以开头的 XML

[![表视图-xml](../Images/3184388b6734c2922774a458f8a07d3c.png)](https://i.stack.imgur.com/y9dvK.jpg)

5.  在 XML`tableview`标记中找到样式属性
6.  在样式标签前留一个空格，粘贴进去 `dataMode="prototypes"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-27T21:31:11.343

对此不是 100% 确定，但我认为没有办法在 XIB 文件中将 UITableView 内容设置为“动态原型”。

但是，您可以通过创建另一个名为“MyTableViewCell.xib”的 XIB 文件来实现相同的功能，该文件仅包含一个 UITableViewCell，给单元格一个标识符，转到文件所有者并在身份检查器中将其设置为相同的视图控制器类作为您的表视图 xib，然后在您的视图控制器中创建一个 IBOutlet，如下所示：

```
 @property (nonatomic, assign) IBOutlet UITableViewCell *customCell; 
```

然后在 XIB 中，单击 File's Owner 并按住 control 拖动到 uitableviewcell 并将单元格的出口设置为“customCell”属性。

（如果您在图形编辑器左下角的圆圈内找到看起来像播放按钮的按钮，单击它，然后在该列中拖动，这可能会更容易完成）。

毕竟，在 cellForRowAtIndexPath 中使用类似于以下的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{

    static NSString *CellIdentifier = @"CustomCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        [[NSBundle mainBundle] loadNibNamed:@"MyTableViewCell" owner:self options:nil];

        cell = customCell;
    }

    // Other cell configurations....
} 
```

希望这有意义并适合您的需求！

# javascript - 引导模式中的客户端验证

> ID：14155213
> 
> 赞同：1
> 
> 时间：2013-01-04T10:21:01.973
> 
> 标签：javascript, ruby-on-rails, html, twitter-bootstrap, simple-form

我有客户端验证，但有些原因它在 twitter 引导模式窗口中不起作用。如果我把我的表格放在其他地方然后是模态的，那么它就像一个魅力。有什么我错过的吗？

这是我的表单代码

```
<div id="myModal" class="modal hide fade invite-modal" data-backdrop="true">
          <%= simple_form_for User.new, url: :invite_teacher_organizations, validate: true do |f| %>
          <%= f.input :full_name,  required:true, validate: { :presence => true, :message => "Name cant be blank" }, placehold: "John Doe" %>
        <%= f.input :email, required: true, validate: { presence: true}%>
        <%= f.submit 'Send Invite', class: 'btn-primary' %>
        <% end %>
  </div> 
```

# github - 审计/搜索特定代码的私有 Github 存储库

> ID：14155214
> 
> 赞同：0
> 
> 时间：2013-01-04T10:21:03.293
> 
> 标签：github

Google Maps v2 即将退役，因此我需要审核我们在 Github 上的所有私有存储库以供使用。我可以将它们全部克隆下来并运行 a `grep`，但是有很多（中间 3 个数字），所以如果可能的话，我宁愿在服务器上做所有事情。不幸的是，Github 的搜索只会搜索公共项目（据我所知），我在 API 中看不到任何东西来做我想做的事。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:02:51.507

如果您知道您正在寻找或多或少一致的模式，您可以使用 Github API 仅对您可能感兴趣的文件进行 grep。

例如，您可以通过 API 获取文件的内容：http: [//developer.github.com/v3/repos/contents/#get-contents](http://developer.github.com/v3/repos/contents/#get-contents)

但是，这假设您知道您拥有哪些文件（适用于 Ruby 中的 Gemfile 或 Python 中的 requirements.txt，对于 Javascript 不是很好）。

另一种选择是在本地自动搜索存储库。完全可以编写一个脚本来依次 git clone 每个 repo、grep 并输出结果（假设你有运行它所需的时间和磁盘空间）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T21:38:13.470

请注意，私有 GitHub 存储库中*已经有*一个代码功能：`grep`

![截屏](../Images/0462320dcd6077dec0907bb2290953b1.png)

但是，它没有 API，因此您需要使用以下格式对链接进行一些旧的抓取：

[https://github.com/creaktive/WUB/search?q=BEGIN&choice=code&l=&start=](https://github.com/creaktive/WUB/search?q=BEGIN&choice=code&l=&start=)

要遍历多个存储库，您可以使用 iMacros for [Chrome](https://chrome.google.com/webstore/detail/imacros-for-chrome/cplklnmnlbnpmjogncfgfijoopmnlemp) / [Firefox](https://addons.mozilla.org/en-US/firefox/addon/imacros-for-firefox/)，如果您使用 Perl-fu，则可以使用[WWW::Mechanize](https://metacpan.org/module/WWW::Mechanize) ，如果您是 JavaScript 忍者，则可以使用[PhantomJS 。](http://phantomjs.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T20:08:43.723

我以前见过[OpenGrok](http://opengrok.github.io/OpenGrok/)的使用，并且通常有像你这样的用例。

# json - ExtJS 4 - Json Writer 没有像 Json Reader 那样的 Record 配置

> ID：14155215
> 
> 赞同：0
> 
> 时间：2013-01-04T10:21:03.333
> 
> 标签：json, cakephp, extjs, extjs4, cakephp-2.1

好的，伙计们，正在使用 ExtJS4，我遇到了这个人所做的几乎完全相反的问题：
[如何让 ExtJS JsonStore 将 JSON 数据直接放入请求正文中？](https://stackoverflow.com/questions/2925751/how-do-i-get-an-extjs-jsonstore-to-put-the-json-data-directly-into-the-request-b)

在我的应用程序中，我有一个嵌套数据结构正在加载相关模型。

后端的 CakePHP 需要（在伪代码中）保存以下格式：

```
[
  {
    [Model]
      [Field1]: [Value1],
      [Field2]: [Value2],
      [Field3]: [Value3]
  },
  {
    [Model]
      [Field1]: [Value1],
      [Field2]: [Value2],
      [Field3]: [Value3]
  }
] 
```

这是 ExtJS 当前发送到服务器的内容：

```
[
  {
    [Field1]: [Value1],
    [Field2]: [Value2],
    [Field3]: [Value3],
    [Model] : null
  }
] 
```

因此，出于某种原因，它将模型作为空值包含在内，并将参数放在 Json 对象的根节点中。

服务器以类似的方式将数据发送到客户端，但 Json 代理的 Json Reader 有一个记录参数（[请参阅此处](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.reader.Json-cfg-record)）。不幸的是，Json Writer 没有这样的属性（甚至没有记录，因为我尝试设置它）。

目前我在后端的解决方法是：
`$json = Set::insert($json, 'Model', $json);`
但如果有更好的方法来实现这一点会很好。

**更新：** 为了进一步扩展，我正在加载一个加载嵌套 Json 数据的商店，该数据会自动填充客户端中的关联模型。（这一切都是用 Extjs 方法完成的，没有任何自定义代码）。

我已经在 J​​son 编写器中尝试了 root 属性，但不幸的是，它使用批处理记录来格式化请求，如下所示：

```
{
  [Root] : [
    {
      [Field1]: [Value1],
      [Field2]: [Value2],
      [Field3]: [Value3],
      [Model] : null
    },
    {
      [Field1]: [Value1],
      [Field2]: [Value2],
      [Field3]: [Value3],
      [Model] : null
    }
  ]
} 
```

我也尝试过 Bancha（[http://banchaproject.org](http://banchaproject.org)），但我无法让它与 Sencha Architect（用于该项目）一起工作，他们目前提供的解决方案是一种“解决方法”（我无法开始工作）。

谢谢，-T6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:23:27.697

带有 modelName:null 的东西看起来你已经有一些自定义代码。为了在命名对象中获取数据，Writer 在 ExtJS 中有一个属性“root”，在 Sencha Touch 中有一个“rootProperty”，这可能会有所帮助。

还有一个框架可以为您完成所有这些编组，请参阅 banchaproject.org 它有点成本，类似于 ExtJS，但它会为您完成很多这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:36:26.030

在我需要自定义 Writer 发送请求的格式的情况下，我只是创建了自己的自定义 writer（扩展 Ext.data.writer.Json），并用任何逻辑覆盖了 writeRecords() 方法我需要正确格式化请求。

# android - 如何在 Android 中自定义 Facebook 好友生日

> ID：14155219
> 
> 赞同：-1
> 
> 时间：2013-01-04T10:21:17.437
> 
> 标签：android, facebook

我制作了一个应用程序，其中我正在获取我所有**Facebook 朋友生日**的列表，如下所示：

> 瑞奇

1990 年 2 月 13 日

但现在我想展示这样的东西：

> 瑞奇

1990 年 2 月 13 日

代码：-

**我的适配器.java**

```
 TextView name = (TextView) v.findViewById(R.id.label);
    name.setText(friend.getName());

    TextView bday = (TextView) v.findViewById(R.id.label2);
    if (!friend.getBday().trim().equals("")) {
        bday.setText(friend.getBday());
    } else {
        bday.setText("Not Mentioned");
    }

    return v;
} 
```

**我的Facebook.java**

```
 public void init(Main main) {
    this.main = main;
    mFacebook = new Facebook(APP_ID);
    isReady = false;
    mAsyncRunner = new AsyncFacebookRunner(mFacebook);
    mFacebook.authorize(main, new String[] { "publish_stream",
            "friends_birthday" }, new MyAuthorizeListener());
}

// ref- http://developers.facebook.com/docs/reference/api/user/
public Report reLoadAllFriends() {
    if (!isReady) {
        Log.v(TAG, "myfacebook.reloadallfriends Not ready yet!");
        return new Report(false, "Not ready yet!");
    }

    Bundle params = new Bundle();
    params.putString("fields", "id,name,birthday,picture");
    mAsyncRunner.request("me/friends", params, new MyRequestListener(
            RequestType.FRIEND_LIST));

    Log.v(TAG, "myfacebook.reloadallfriends Fetch started.");
    return new Report(true, "Fetch started");
}

public List<MyFriend> getAllFriends() {
    return getFilteredFriends(null);
}

public List<MyFriend> getFilteredFriends(com.january.floogoo.Filter week) {
    return Main.db.getFriendsFilteredBy(week);
}

public List<Map<String, String>> getAllFriendsAsMap() {
    return getFilteredFriendsAsMap(null);
}

 public List<Map<String, String>> getFilteredFriendsAsMap(Filter filterBy) {
    List<MyFriend> friendList = Main.db.getFriendsFilteredBy(filterBy);

    List<Map<String, String>> list = new ArrayList<Map<String, String>>();
    for (MyFriend friend : friendList) {
        list.add(friend.getMap());
    }
    return list;
}

public void post(String receiver, String message) {
    if (isReady) {
        Bundle params = new Bundle();
        params.putString("message", message);

        mAsyncRunner.request(receiver + "/feed", params, "POST",
                new MyRequestListener(RequestType.FEED_POST));
    }
}

class MyAuthorizeListener extends BaseDialogListener {
    public void onComplete(Bundle values) {
        Log.i(TAG, "Authorization successfull");
        isReady = true;
        main.loadContents();
    }
}

class MyRequestListener extends BaseRequestListener {
    private RequestType type;

    public MyRequestListener(RequestType type) {
        this.type = type;
    }

    public void onComplete(final String response) {
        try {
            switch (type) {
            case FRIEND_LIST:
                 Log.d(TAG, "myfacebook.friendlist Response: "
                 + response.toString());
                myFriends.clear();
    JSONArray jarr = Util.parseJson(response).getJSONArray(
                        "data");
                for (int i = 0; i < jarr.length(); i++) {
                    JSONObject json = jarr.getJSONObject(i);
                    String fbID = json.getString("id");
                    String name = json.getString("name");
                    String bday = json.optString("birthday");
                    String pic = json.getString("picture");

                myFriends.add(new MyFriend(fbID, name, bday, pic));
                }
                main.notifyMain(Note.FRIENDLIST_RELOADED); 
                break;
            case FEED_POST:
                Log.d(TAG, "myfacebook.feedpost Response: "
                        + response.toString());
                break;
            default:
                break;
            }
        } catch (JSONException e) {
            Log.e(TAG, "JSONException: " + e.getMessage());
        } catch (FacebookError e) {
            Log.e(TAG, "FacebookError: " + e.getMessage());
        }
    }
} 
```

**我的朋友.java**

```
 public class MyFriend {
private String fbID = " ";
private String name = " ";
private String bday = " "; // can be missing, be in form of mm/dd or
                           // mm/dd/yyyy
private String pic = " ";
private String bdayMessage = " ";
private boolean isAutoPost = false;

public MyFriend() {

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:32:49.007

尝试使用`SimpleDateFormate`来格式化您的日期：

```
if (!friend.getBday().trim().equals("")) {
    SimpleDateFormat curFormater = new SimpleDateFormat("dd/MM/yyyy");   
    Date dateObj = curFormater.parse(bday.setText(friend.getBday()));   
    SimpleDateFormat postFormater = new SimpleDateFormat("MMMM dd, yyyy");   
    String newDateStr = postFormater.format(dateObj);
    bday.setText(newDateStr); // <--------- Set your date after formatting.
} else {
    bday.setText("Not Mentioned");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:41:51.113

参考：[使用 Java 进行日期格式转换](https://stackoverflow.com/questions/3778202/android-date-format-conversion)

你需要这样的东西：

```
try {
  DateFormat df1 = new SimpleDateFormat("MM/dd/yyyy");
  DateFormat df2 = new SimpleDateFormat("MMM dd, yyyy");
  return df2.format(df1.parse(input));
}
catch (ParseException e) {
  return null;
} 
```

========================================= 试试这个：

```
 TextView bday = (TextView) v.findViewById(R.id.label2);
    if (!friend.getBday().trim().equals("")) {

        try {
            // If this line is in loop you can declare thie two SimpleDateFormat //before loop
            SimpleDateFormat df1 = new SimpleDateFormat("MM/dd/yyyy");
            SimpleDateFormat df2 = new SimpleDateFormat("MMMM dd, yyyy");

            bday.setText(df2.format(df1.parse(friend.getBday().trim())));

            Log.i("Nimish", df2.format(df1.parse("12/13/1990")));

        } catch (ParseException e) {
            bday.setText("Not Mentioned");
            Log.i("Nimish", "" + e);
        }

    } else {
        bday.setText("Not Mentioned");
    } 
```

输出：01-04 17:51:29.299：I/Nimish(5042)：1990 年 12 月 13 日

# php - MySQL数据库中加密数据的通配符搜索？

> ID：14155221
> 
> 赞同：7
> 
> 时间：2013-01-04T10:21:33.270
> 
> 标签：php, mysql, security, encryption, encode

我正在构建一个小型 Web 应用程序，它将为每个插入的人保存大约 10 条信息。由于数据保护，大部分信息必须加密。

使用 CodeIgniter 框架和 CodeIgniter 加密类，我可以在将应用程序端的信息存储到数据库之前对其进行编码。CodeIgniter 加密类使用 PHP 的 mcrypt 函数以及 AES_256 密码。

我遇到的问题是我需要允许应用程序的用户使用通配符搜索来搜索存储的信息，也可能在以后通过 API。

任何机构都会遇到类似问题的解决方案。我已经阅读了有关 MySQL AES_ENCRYPT 和 AES_DECRYPT 的信息，但它们仍然需要以纯文本来回传递密钥，而我不愿意这样做。

我目前的结论是，如果我希望继续这条路线，那么每次进行搜索时，全表解密是我唯一的解决方案（显然不好）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T10:27:50.663

好吧，你不能在没有先解码的情况下搜索解密的文本，这是真的。

但是，这并不意味着没有办法解决这个问题。例如，您可以创建数据的[倒排索引](https://en.wikipedia.org/wiki/Inverted_index)并散列（sha1、md5、crc32、选择一个）用于搜索的键。然后，您所要做的就是散列您正在使用的搜索词，在索引中查找它们并检索任何匹配的记录，这将只是表的一小部分而不是整个记录。

通过散列数据（使用盐！），您可以避免以不安全的方式存储数据，同时您仍然可以搜索数据，因为您为它创建了索引。在您真正确定哪些文件匹配之前，无需解密。

# cmd - 带有 IF 语句的 CMD 脚本错误级别错误行为

> ID：14155230
> 
> 赞同：0
> 
> 时间：2013-01-04T10:22:05.203
> 
> 标签：cmd, errorlevel

以下脚本的预期结果：如果用户按 P，则为 PERMPING，如果用户按 T，则为 PINGLOOP。但是，无论用户按什么，脚本都会回显**两者**。知道什么给出了吗？

```
CHOICE /C:PT /N /M "Ping permanently (P) or temporarily (T) (%pingTimes% times)?"
echo %ERRORLEVEL%
IF ERRORLEVEL 1 ECHO PERMPING
IF ERRORLEVEL 2 ECHO PINGLOOP 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:49:07.123

我怀疑您没有准确地报告代码的结果。如果按下 P，您发布的代码应该同时打印，如果按下 T，则仅打印 PINGLOOP。该行为是由于 IF ERRORLEVEL 语句的工作方式造成的，正如帮助中所解释的那样。要获得任何命令的帮助，只需在命令提示符下键入`HELP commandName`或`commandName /?`。在您的情况下，您可以使用`IF /?`查看以下内容

```
Performs conditional processing in batch programs.

IF [NOT] ERRORLEVEL number command
...
  ERRORLEVEL number Specifies a true condition if the last program run
                    returned an exit code equal to or greater than the number
                    specified.
... 
```

您有 2 种选择可以使您的代码正常工作：

按数字递减顺序测试条件并使用 ELSE 子句

```
CHOICE /C:PT /N /M "Ping permanently (P) or temporarily (T) (%pingTimes% times)?"
echo %ERRORLEVEL%
IF ERRORLEVEL 2 (
  ECHO PINGLOOP
) ELSE IF ERRORLEVEL 1 (
  ECHO PERMPING
) 
```

或使用`IF %ERRORLEVEL%==N`

```
CHOICE /C:PT /N /M "Ping permanently (P) or temporarily (T) (%pingTimes% times)?"
echo %ERRORLEVEL%
IF %ERRORLEVEL% == 1 ECHO PERMPING
IF %ERRORLEVEL% == 2 ECHO PINGLOOP 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T21:11:54.177

如果打开[命令扩展，要扩展](http://ss64.com/nt/cmd.html)[上面](https://stackoverflow.com/a/14159327/1126551)的答案，您还可以使用：

[if %errorlevel% equ 1 echo PERMPING](http://ss64.com/nt/if.html)
[if %errorlevel% equ 2 echo PINGLOOP](http://ss64.com/nt/if.html)

# java - Java：比较字符串时的顺序有区别吗？

> ID：14155240
> 
> 赞同：1
> 
> 时间：2013-01-04T10:22:23.433
> 
> 标签：java, string, comparison

我注意到有些人在比较两个字符串时似乎有所不同，例如将变量与常量进行比较时。例如，假设我们有一个常量字符串和一个输入法：

```
public final String CONSTANT_STRING = "A constant string";
BufferedReader br = new BufferedReader(new InputStreamReader(System.in)); 
```

首先使用未知输入是更好还是更快：

```
br.readLine().equals(CONSTANT_STRING) 
```

或将常数与未知数进行比较：

```
CONSTANT_STRING.equals(br.readLine()); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-04T10:23:32.783

这不是性能问题。第二个版本永远不会产生 NullPointerException，即使 br.readLine() 返回 null。第一个虽然。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T10:23:38.573

它不是更好或更快，但如果你*知道*它`CONSTANT_STRING`存在，你保证`NullPointerException`如果你用第二种方法你永远不会得到。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T10:29:08.627

`equals()`如果两个比较字符串的长度不同，则类的方法`String`将返回。`false`只有当两个字符串的长度相等时，它才会比较内容。所以顺序不影响性能。

正如您在其他答案中看到的那样，不会出现第二种方法`NullPointerException`。所以，第二种方法更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T10:26:09.237

公共**摘要？**String CONSTANT_STRING = "一个常量字符串";

# javascript - 巨大的数据字符串传入 url

> ID：14155242
> 
> 赞同：2
> 
> 时间：2013-01-04T10:22:35.343
> 
> 标签：javascript, url, parameter-passing

我创建了一个 html 页面，其中有一个显示图像的 div。我必须将 base 64 图像字符串传递到 url 中的这个 html 页面，以便我可以在加载时设置图像 div 源。

可以从任何应用程序调用 html 页面，可以是 java/javascript 或 any。但是图像字符串必须与 url 一起传递给页面。这是调用我的html页面的示例html应用程序-

```
<!DOCTYPE html>
<html>
<body>
<script>
imagestring ="R0lGODlhEAAOALMAAOazToeHh0tLS/7LZv/0jvb29t/f3//Ub//ge8WSLf/rhf/3kdbW1mxsbP//mf///yH5BAAAAAAALAAAAAAQAA4AAARe8L1Ekyky67QZ1hLnjM5UUde0ECwLJoExKcppV0aCcGCmTIHEIUEqjgaORCMxIC6e0CcguWw6aFjsVMkkIr7g77ZKPJjPZqIyd7sJAgVGoEGv2xsBxqNgYPj/gAwXEQA7";
</script>
<button type="button" onclick="window.open('URL?image='+imagestring)">open the html page </button>

</body>
</html> 
```

这里的 URL 指向部署在服务器上的 html 页面。这只有在 imagestring 值很小的情况下才能正常工作。但是，如果由于几个浏览器的限制而导致大小很大，它将无法正常工作。我可以采用哪些替代方法？

我的要求是在 url 中传递巨大的数据字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:32:04.623

您需要发布图像数据。

```
<!DOCTYPE html>
<html>
 <body>

  <form action="URL" method="POST">
   <input type="hidden" name="image" value="R0lGODlhEAAOALMAAOazToeHh0tLS/7LZv/0jvb29t/f3//Ub//ge8WSLf/rhf/3kdbW1mxsbP//mf///yH5BAAAAAAALAAAAAAQAA4AAARe8L1Ekyky67QZ1hLnjM5UUde0ECwLJoExKcppV0aCcGCmTIHEIUEqjgaORCMxIC6e0CcguWw6aFjsVMkkIr7g77ZKPJjPZqIyd7sJAgVGoEGv2xsBxqNgYPj/gAwXEQA7"/>
   <button type="submit">open the html page</button>
  </form>

 </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:29:32.510

默认情况下使用方法的标准 URL`GET`的长度限制约为 8KB。

如果要将大数据发送到服务器，则必须使用`POST`方法。在这种情况下，URL 仍然很短，实际数据将作为提交表单中的参数发送到服务器。

您还可以使用 ajax 发布数据，[如下所示](http://www.openjs.com/articles/ajax_xmlhttp_using_post.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T10:31:30.743

您正在使用 GET 方法来传递您的数据。
您不能通过 GET 方法传递大量数据。看看这个：[HTTP URI GET 限制](https://stackoverflow.com/questions/266322/http-uri-get-limit)

使用**POST**方法。

# mongodb - MongoDB 两个看似相同的查询 - 一个使用索引，另一个不使用

> ID：14155244
> 
> 赞同：4
> 
> 时间：2013-01-04T10:22:38.323
> 
> 标签：mongodb, mongodb-query

我在 Mongo 日志中注意到一些查询花费的时间比预期的要长。

```
Fri Jan  4 08:53:39 [conn587] query mydb.User query: { query: { someField: "eu", lastRecord.importantValue: { $ne: nan.0 }, lastRecord.otherValue: { $gte: 1000 } }, orderby: { lastRecord.importantValue: -1 } } ntoreturn:50 ntoskip:0 nscanned:40681 scanAndOrder:1 keyUpdates:0 numYields: 1 locks(micros) r:2649788 nreturned:50 reslen:334041 1575ms 
```

考虑到我已经在 {someField : 1, "lastRecord.otherValue" : 1, "lastRecord.importantValue" : -1} 上建立了索引，我就去调查了。

在此期间，我注意到对我来说似乎是两个相同的查询，只是语法上的措辞不同，返回相同的值，MongoDB 以不同的方式执行 - 一个按预期使用索引，而另一个没有。

我的 Web 应用程序调用不使用索引的版本。

我显然在这里误解了一些基本的东西。

索引使用良好：

```
> db.User.find({}, {_id:1}).sort({"lastRecord.importantValue" : -1}).limit(5).explain()
{
    "cursor" : "BtreeCursor lastRecord.importantValue_-1",
    "isMultiKey" : false,
    "n" : 5,
    "nscannedObjects" : 5,
    "nscanned" : 5,
    "nscannedObjectsAllPlans" : 5,
    "nscannedAllPlans" : 5,
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "millis" : 0,
    "indexBounds" : {
            "lastRecord.importantValue" : [
                    [
                            {
                                    "$maxElement" : 1
                            },
                            {
                                    "$minElement" : 1
                            }
                    ]
            ]
    },
    "server" : "whatever"
} 
```

未使用的索引：

```
> db.User.find({$query: {}, $orderby : {"lastRecord.importantValue": -1}}, {_id:1}).limit(5).explain()
{
    "cursor" : "BasicCursor",
    "isMultiKey" : false,
    "n" : 0,
    "nscannedObjects" : 67281,
    "nscanned" : 67281,
    "nscannedObjectsAllPlans" : 67281,
    "nscannedAllPlans" : 67281,
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "millis" : 133,
    "indexBounds" : {

    },
    "server" : "whatever"
} 
```

提示没有帮助：

```
> db.User.find({$query: {}, $orderby : {"lastRecord.importantValue": -1}, $hint : {"lastRecord.importantValue" : -1}}, {_id:1}).limit(5).explain()
{
    "cursor" : "BasicCursor",
    // snip
} 
```

但是返回的值是相同的（如预期的那样）：

```
> db.User.find({}, {_id:1}).sort({"lastRecord.importantValue" : -1}).limit(5)
{ "_id" : NumberLong(500280899) }
{ "_id" : NumberLong(500335132) }
{ "_id" : NumberLong(500378261) }
{ "_id" : NumberLong(500072584) }
{ "_id" : NumberLong(500071366) }

> db.User.find({$query: {}, $orderby : {"lastRecord.importantValue": -1}}, {_id:1}).limit(5)
{ "_id" : NumberLong(500280899) }
{ "_id" : NumberLong(500335132) }
{ "_id" : NumberLong(500378261) }
{ "_id" : NumberLong(500072584) }
{ "_id" : NumberLong(500071366) } 
```

存在索引（我创建这个索引是为了测试更简单的查询，复合索引也仍然存在）：

```
> db.User.getIndexes()
[
// snip other indexes

    {
            "v" : 1,
            "key" : {
                    "lastRecord.importantValue" : -1
            },
            "ns" : "mydb.User",
            "name" : "lastRecord.importantValue_-1"
    }
] 
```

Morphia 代码仅供参考（不确定我是否可以获得它生成的确切命令）：

```
 ds.find(User.class).filter("someField =", v1)
                .filter("lastRecord.importantValue !=", Double.NaN)
                .filter("lastRecord.otherValue >=", v2)
                .order("-lastRecord.importantValue")
                .limit(50); 
```

有任何想法吗？

编辑 1 月 6 日：

刚刚在日志中注意到另一个实例：

```
TOKEN ip-10-212-234-60 Sun Jan  6 09:20:54 [conn249] query mydb.User query: { query: { someField: "eu", lastRecord.otherValue: { $gte: 1000 } }, orderby: { lastRecord.importantValue: -1 } } cursorid:9069510232503855502 ntoreturn:50 ntoskip:0 nscanned:2042 keyUpdates:0 locks(micros) r:118923 nreturned:50 reslen:344959 118ms 
```

注意我已经从查询中删除了 $ne 。所以它在 118 毫秒内执行并且（如果我解释正确的话）只扫描 2042 行。

但是，如果我从同一服务器上的控制台执行以下操作：

```
> db.User.find({$query: { someField: "eu", "lastRecord.otherValue": { $gte: 1000 } }, $orderby: { "lastRecord.importantValue": -1 } }).explain()
{
 "cursor" : "BasicCursor",
 "isMultiKey" : false,
 "n" : 0,
 "nscannedObjects" : 70308,
 "nscanned" : 70308,
 "nscannedObjectsAllPlans" : 70308,
 "nscannedAllPlans" : 70308,
 "scanAndOrder" : false,
 "indexOnly" : false,
 "nYields" : 1,
 "nChunkSkips" : 0,
 "millis" : 847,
 "indexBounds" : {

 },
 "server" : "ip-whatever:27017"
} 
```

那么它真的只是解释中的一个错误吗？

编辑 - 1 月 6 日进一步更新：

另一方面，在我的本地系统上（相同的索引，包括 "{someField : 1, "lastRecord.otherValue" : 1, "lastRecord.importantValue" : -1}"）我设法在负载下获得以下内容：

```
Sun Jan 06 17:43:56 [conn33] query mydb.User query: { query: { someField: "eu", lastRecord.otherValue: { $gte: 1000 } }, orderby: { lastRecord.importantValue: -1 } } 
cursorid:76077040284571 ntoreturn:50 ntoskip:0 nscanned:183248 keyUpdates:0 numYields: 2318 locks(micros) r:285016301 nreturned:50 reslen:341500 148567ms 
```

**148567 毫秒**:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-29T14:33:38.900

事实上，问题在于混淆了这两种语法。

根据文档：[http ://docs.mongodb.org/manual/reference/operator/query/](http://docs.mongodb.org/manual/reference/operator/query/)

因此，当您在 .explain 中使用时：

```
db.User.find({}, {_id:1}).sort({"lastRecord.importantValue" : -1}).limit(5).explain() 
```

很好，但是当你使用这个时：

```
db.User.find({$query: {}, $orderby : {"lastRecord.importantValue": -1}}, {_id:1}).limit(5).explain() 
```

Explain 用于第一种语法：你应该在 $query 中使用 $explain:1 而不是 .explain 之后。

另请参阅此问题：[MongoDB $query operator ignores index?](https://stackoverflow.com/questions/14608642/mongodb-query-operator-ignores-index/14613502#14613502)

这完全是同一个问题。

# java - 从 ArrayList 填充 ListView >

> ID：14155246
> 
> 赞同：3
> 
> 时间：2013-01-04T10:22:41.913
> 
> 标签：java, android

我有一个`ArrayList<HashMap<Contact, Name>>`，我想`ListView`用它填充一个。这是我的尝试（不起作用）

```
 ArrayList<HashMap<String, String>> lista = new ArrayList<HashMap<String, String>>();

    // Array of strings "titulos"
    String titulos[] = { "Dolar (Transferencia)", "Euro (Transferencia)",
        "Dolar (Efectivo)", "Euro (Efectivo)", "Dolar (cúcuta)",
        "Euro (cucuta)" };

    try {
        JSONObject json = result; // result is a JSONObject and the source is located here: https://dl.dropbox.com/u/8102604/dolar.json
        JSONObject root = json.getJSONObject("root"); 
        JSONArray items = root.getJSONArray("item");
        int j = 0; 

        for (int i = 0; i < items.length(); i++) {
            JSONObject item = items.getJSONObject(i);
            String key = item.getString("key");
            String mount = item.getString("mount");
            if (key.equals("TS") || key.equals("TE") || key.equals("EE")
                    || key.equals("CE") || key.equals("ES")
                    || key.equals("CS")) { // i did this since i only need the items where the key is equal to TS, TE, EE, CE, ES or CS.
                HashMap<String, String> map = new HashMap<String, String>();
                map.put("id", String.valueOf(i));
                map.put(key, mount);
                lista.add(map);
                System.out.println(titulos[j] + "(" + key + "). BsF = " + mount); // just for debugging purposes
                j++; // add 1 to j if key is equal to TS, TE, EE, CE, ES or CS. In this way i can associate the two arrays (item and titulos)
            }
        }

        ListView lv = (ListView) myMainActivity.findViewById(R.id.listView1); // create a list view 
        lv.setAdapter(new ArrayAdapter<String>(contexto, android.R.layout.simple_list_item_1, lista)); // set adapter to the listview (not working)

    } catch (JSONException e) {
        Log.e("log_tag", "Error parsing data " + e.toString());
    }
} 
```

最后一行在 Eclipse 中引发错误：

```
The constructor ArrayAdapter<String>(Context, int, ArrayList<HashMap<String,String>>) is undefined 
```

我已经尝试了所有方法，但仍然无法使其正常工作，您能帮帮我吗？

提前致谢。

PS：完整来源：[https ://gist.github.com/4451519](https://gist.github.com/4451519)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T10:42:56.280

只需使用 SimpleAdapter。

```
String[] from = new String[] { /* all your keys */};
int[] to = new int[] { /* an equal number of android.R.id.text1 */};
ListAdapter adapter = new SimpleAdapter(contexto, lista, android.R.layout.simple_list_item_1, from, to); 
```

如果列表中的每个项目都包含一个类似形成的对象，而不是每次都使用不同的键，那将很简单（也更合乎逻辑）。

我会替换

```
map.put(key, mount); 
```

经过

```
map.put("key", key);
map.put("value", mount); 
```

然后`from`and`to`很简单：

```
String[] from = new String[] { "value" };
int[] to = new int[] { android.R.id.text1 }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T10:26:52.307

如果您真的想传递`HashMap`s 的整个列表，则必须创建自己的适配器，因为`ArrayAdapter<String>`在您的情况下期望第三个参数是 type `List<String>`。

您应该在评论中遵循 @的建议，并从 HashMap 值`Tomislav Novoselec`创建一个。`List<String>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T10:32:59.480

您需要像下面一样使用自己的 CustomArrayAdapter 并在代码中使用此类。

```
public class CustomArrayAdapter extends BaseAdapter {
    private JSONArray jsonArray = null;
    public ImageAdapter(Context c, JSONArray jsonArray) {
        context = c;
        this.jsonArray = jsonArray;
    }
    public int getCount() {
        return jsonArray.length();
    }
    public View getView(int position, View convertView, ViewGroup parent) {
        //DO YOUR CODE HERE
        LayoutInflater inflater = (LayoutInflater)       context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

       if (convertView == null) {
          convertView = inflater.inflate(R.layout.list_item_view, null);
       }else{
          //Set values for your listview on the list item.
          convertView.findViewById(R.id.someID).setText("GetJSONTEXT");
       }
    }
} 
```

我对您的主要活动的建议

```
package com.kustomrtr.dolarparalelovenezuela;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import com.loopj.android.http.*;
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        AsyncHttpClient client = new AsyncHttpClient();
        client.get("http://192.168.1.5/dolar.json", new AsyncHttpResponseHandler() {
            @Override
            public void onSuccess(String response) {
                System.out.println(response);
                try {
                    JSONObject json = new JSONObject(response); // result is a JSONObject and the source is located here: https://dl.dropbox.com/u/8102604/dolar.json
                    JSONObject root = json.getJSONObject("root"); 
                    JSONArray items = root.getJSONArray("item");

                    ListView lv = (ListView) myMainActivity.findViewById(R.id.listView1); // create a list view 
                    lv.setAdapter(new CustomArrayAdapter<String>(contexto, android.R.layout.simple_list_item_1, items));

                } catch (JSONException e) {
                    Log.e("log_tag", "Error parsing data " + e.toString());
                }

            }
        });
    } 

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T10:35:16.160

您必须通过在 Android 中扩展 BaseAdapter 来创建自己的自定义适配器。然后，您可以使用列表视图的 setAdapter 方法将自定义适配器设置为 ListView。

供您参考，请参阅下面的 BaseAdapter 小示例。您需要将 ArrayList< HashMaP > 传递给适配器。

[http://jimmanz.blogspot.in/2012/06/example-for-listview-using-baseadapter.html](http://jimmanz.blogspot.in/2012/06/example-for-listview-using-baseadapter.html)

希望这可以帮助。

# javascript - appMobi onClick 不起作用

> ID：14155247
> 
> 赞同：1
> 
> 时间：2013-01-04T10:22:45.480
> 
> 标签：javascript, html, appmobi

我对 appMobi、HTML 和 JavaScript 真的很陌生。我唯一想做的就是我有一个带有 onClick 方法的按钮，这个方法应该做任何事情。我已经定义了一个脚本，我有一个按钮，但没有调用该方法。有人可以告诉我为什么吗？appMobi 提供的示例并没有什么不同——我认为。这是我的代码：

```
 <head>
    <!-- the line below is required for access to the appMobi JS library -->
    <script type="text/javascript" charset="utf-8" src="http://localhost:58888/_appMobi/appmobi.js"></script>

    <script type="text/javascript" language="javascript">
        // This event handler is fired once the AppMobi libraries are ready
        function onDeviceReady() {
            //use AppMobi viewport to handle device resolution differences if you want
            //AppMobi.display.useViewport(768,1024);

            //hide splash screen now that our app is ready to run
            AppMobi.device.hideSplashScreen();
        }

        //initial event handler to detect when appMobi is ready to roll
        document.addEventListener("appMobi.device.ready",onDeviceReady,false);
        function myfunction(){
            AppMobi.debug.log("test");
            alert("Hallo Welt");

        }

    </script>

    <script type="text/javascript">

        function myfunction(){
            AppMobi.debug.log("test");
            alert("Hallo Welt");
        }
        </script>

</head>
<body >
    <br>

       <button onclick="myfunction();">MyButton</button>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:27:51.593

最后，我找到了解决方案！而不是 `onclick="myfunction"` 你必须使用`ontouchstart="myfunction"`！
如果有人能告诉我为什么会很好。

# java - CSS和JS文件的映射

> ID：14155250
> 
> 赞同：0
> 
> 时间：2013-01-04T10:22:47.180
> 
> 标签：java, spring, jakarta-ee, spring-mvc

我的项目适用于“/”模式。但是当我连接 js 和 css 时，它不能正常工作，因为调度程序 servlet 没有映射 css 和 js。当我指定“.htm”模式 css 和 js 工作时，但我的所有页面（例如“/polls/categories”）都不起作用。这是我的 web.xml 文件。

```
<servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
</servlet-mapping> 
```

和调度员-servlet：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping"/>

    <bean id="jspViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver" 
            p:prefix="/WEB-INF/jsp/" p:suffix=".jsp" p:order="1"/>

</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:34:52.770

将此位添加到您的 dispatcher-servlet.xml ：

```
<resources mapping="/resources/**" location="/resources/" /> 
```

你应该把静态资源放在这个位置：

```
PROJECT_ROOT/src/main/webapp/resources 
```

然后像这样从您的视图中访问它们（css 示例）：

```
<link rel="stylesheet" href="<c:url value="${webappRoot}/resources/css/style.css" />" type="text/css"> 
```

答案更新（dispatcher-servlet.xml）：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xsi:schemaLocation="
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <!-- Enables the Spring MVC @Controller programming model -->
    <annotation-driven />

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <resources mapping="/resources/**" location="/resources/" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
    <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/jsp/" />
        <beans:property name="suffix" value=".jsp" />
            <beans:property name="order" value="1" />
    </beans:bean>

</beans:beans> 
```

不知道你想在这里用这个位完成什么：

```
<bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping"/> 
```

但是，如果您尝试创建控制器，您所要做的就是向您的类添加注释，如下所示：

```
@Controller
class ControllerClassNameHandlerMapping{
....body omitted..
} 
```

**更新 2**

如果这没有帮助，为什么要这么辛苦。下载 spring 工具套件（易于 google）。使用此工具，您只需创建新的 spring 项目，该工具将创建具有有效配置的适当结构。看看这个，真的很简短：

[https://github.com/SpringSource/spring-mvc-showcase/blob/master/MasteringSpringMVC3.pdf?raw=true](https://github.com/SpringSource/spring-mvc-showcase/blob/master/MasteringSpringMVC3.pdf?raw=true)

# android - SSLcertificate 验证失败：在 android 应用程序中没有使用 ACRA 的对等证书

> ID：14155251
> 
> 赞同：1
> 
> 时间：2013-01-04T10:22:53.587
> 
> 标签：android, crash, acra

上周我看到了一个名为 ACRA（Android 应用程序崩溃报告）的库，了解更多详细信息，请 [单击此处](http://code.google.com/p/acra/wiki/ACRA3HowTo)：

我在我的 android 应用程序中实现了相同的程序，并在我的三星手机中安装了该应用程序，它将所有崩溃报告文件发送到我注册的 Gmail 文档中。而在使用其他一些 android 手机时，我遇到了异常，如查看日志：

```
01-01 20:55:35.193: E/ACRA(985): Failed to send crash report for 1262378355000-    approved.stacktrace
01-01 20:55:35.193: E/ACRA(985): org.acra.sender.ReportSenderException: Error while  sending report to Google Form.
01-01 20:55:35.193: E/ACRA(985):    at org.acra.sender.GoogleFormSender.send(GoogleFormSender.java:88)
01-01 20:55:35.193: E/ACRA(985):    at org.acra.SendWorker.sendCrashReport(SendWorker.java:178)
01-01 20:55:35.193: E/ACRA(985):    at org.acra.SendWorker.checkAndSendReports(SendWorker.java:141)
01-01 20:55:35.193: E/ACRA(985):    at org.acra.SendWorker.run(SendWorker.java:77)
01-01 20:55:35.193: E/ACRA(985): Caused by: javax.net.ssl.SSLPeerUnverifiedException: No peer certificate
01-01 20:55:35.193: E/ACRA(985):    at org.apache.harmony.xnet.provider.jsse.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:289)
01-01 20:55:35.193: E/ACRA(985):    at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:124)
01-01 20:55:35.193: E/ACRA(985):    at org.apache.http.conn.ssl.SSLSocketFactory.createSocket(SSLSocketFactory.java:412)
01-01 20:55:35.193: E/ACRA(985):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:195)
01-01 20:55:35.193: E/ACRA(985):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:195)
01-01 20:55:35.193: E/ACRA(985):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:150)
01-01 20:55:35.193: E/ACRA(985):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:390)
01-01 20:55:35.193: E/ACRA(985):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:586)
01-01 20:55:35.193: E/ACRA(985):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:518)
01-01 20:55:35.193: E/ACRA(985):    at org.acra.util.HttpRequest.sendPost(HttpRequest.java:132)
01-01 20:55:35.193: E/ACRA(985):    at org.acra.sender.GoogleFormSender.send(GoogleFormSender.java:85)

it seems to be a untrusted signature/cerfication in the mobile.will u guys know about this problem 
```

# java - 如何限制上传到 Spring MVC3 控制器的文件类型

> ID：14155254
> 
> 赞同：18
> 
> 时间：2013-01-04T10:23:04.127
> 
> 标签：java, spring, spring-mvc, file-upload

我正在使用 Spring MVC3 来处理我的 Web 应用程序的文件上传。现在，我可以使用在我的 xml 上下文文件中定义的以下配置来限制上传的文件大小：

```
<beans:bean id="multipartResolver"
    class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    <beans:property name="maxUploadSize" value="200000"/> 
</beans:bean> 
```

我在网上搜索了如何限制文件类型，但无济于事。我发现的大多数文章只教如何限制文件大小而不是文件类型。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T10:28:53.953

尝试在控制器的请求处理程序方法中执行检查/路由：

```
@RequestMapping("/save")
public String saveSkill(@RequestParam(value = "file", required = false) MultipartFile file) {   
        if(!file.getContentType().equalsIgnoreCase("text/html")){
            return "normalProcessing";
        }else{
            return "redirect: /some/page";
        }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-04T10:53:33.300

您可以通过文件类型限制文件上传，您可以扩展`org.springframework.web.multipart.commons.CommonsMultipartResolver`类。并添加使用 . 检查文件内容类型或文件类型的方法`MultipartFile`。

提供文件类型，您希望在配置中限制的文件类型，例如 -

```
 <beans:bean id="multipartResolver"
    class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    <beans:property name="maxUploadSize" value="200000"/> 
    <beans:property name="restrictFileTypes" value="html,pdf,..."/> 
</beans:bean> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-08-19T11:31:08.387

您可以创建一个用户定义的方法来执行此检查：

```
String fileExtensions = ".exe,.dmg,.mp3,.jar";
String fileName = multipartFile.getOriginalFilename();
int lastIndex = fileName.lastIndexOf('.');
String substring = fileName.substring(lastIndex, fileName.length()); 
```

并检查条件：

```
if (!fileExtensions.contains(substring.toLowerCase()))
    //reject logic
else
    //accept logic 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-14T07:04:26.340

您还可以检查 Mime 类型，并据此限制用户上传 JMimeMagic 库将在此处使用的文件。

```
MagicMatch match = Magic.getMagicMatch(file.getBytes());
        System.out.println(match.getMimeType()); 
```

# file - 在理解 logrotate 行为方面需要帮助

> ID：14155255
> 
> 赞同：2
> 
> 时间：2013-01-04T10:23:20.933
> 
> 标签：file, logrotate

/etc/logrotate.conf 说`rotate logs "weekly"`

/etc/logrotate.d/ssh 说

```
/var/log/ssh.log {
compress
dateext
maxage 120
rotate 99
missingok
notifempty
size +4096k
create 640 root p4admin
sharedscripts
postrotate
/etc/init.d/syslog reload
endscript
} 
```

/var/lib/logrotate.status 表示上次旋转的 ssh 在“/var/log/ssh.log”2013-1-4

但以上与我们在文件上看到的数据不匹配......

```
-rw-r----- 1 root user 201M Jan 4 09:47 /var/log/ssh.log
-rw-r----- 1 root user 65M Oct 19 04:02 /var/log/ssh.log-20121019.gz
-rw-r----- 1 root user 64M Nov 28 04:02 /var/log/ssh.log-20121128.gz
-rw-r----- 1 root user 63M Oct 23 04:02 /var/log/ssh.log-20121023.gz 
```

任何想法，我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T08:18:20.083

*   `weekly`在你的`/etc/logrotate.conf`意思是你所有的日志文件将每周轮换一次，如果这个选项没有被本地覆盖。

    手册说：

    ```
    Each configuration file can set global options (local definitions over-
    ride global ones, and later  definitions  override  earlier  ones)  and
    specify  logfiles  to  rotate. 
    ```

*   如果`size`使用该选项，logrotate 将忽略[此处](https://serverfault.com/questions/391538/logrotate-daily-and-size/434645#434645)`daily`所述的、`weekly`、`monthly`和`yearly`选项

*   *logrotate*每天执行一次，以检查大小等标准。如果适用，日志会同时轮换。

    手册说：

    ```
    Normally, logrotate is run as a daily cron job.  It will not  modify  a
    log  multiple  times  in  one  day unless the criterion for that log is
    based on the log's size and logrotate is being run multiple times  each
    day, or unless the -f or --force option is used. 
    ```

因此，*logrotate*每天都会检查日志的大小，并在必要时执行轮换。

# jenkins - 如何使用 Jenkins 在主服务器上构建多个版本的分支？

> ID：14155256
> 
> 赞同：4
> 
> 时间：2013-01-04T10:23:21.290
> 
> 标签：jenkins, continuous-integration, versioning

我正在使用 Jenkins CI 自动构建我的项目 2.9 版。现在我也必须构建 2.10。如何在 Jenkins 上设置 2.10？因为 2.9 的存储库将是相同的，所以构建失败。

如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:31:45.140

如果您计划让两个版本一起运行一段时间，并且需要为两个分支连续构建，您可以为不同版本设置两种不同的构建配置，或者使用参数配置构建，如果您只希望 Jenkins 执行部署文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:17:51.217

使用“复制现有作业”选项非常容易，但类似构建的单独构建配置最终会让你发疯。假设您需要稍微调整配置。你可以做 2 个工作，5 个工作，10 个工作吗？

**适当的解决方案**

如果您想拥有多个具有相似配置的单独作业 - 创建一个模板作业。[模板工作流插件](https://wiki.jenkins-ci.org/display/JENKINS/Template+Workflows+Plugin)将为您解决问题。它允许创建带有一些参数的模板并在其顶部生成多个作业，指定某些值。模板更改将影响所有从属作业。

*模板参数示例* ![在此处输入图像描述](../Images/0bc78907cbe9952a0d906a99c516bcfb.png)

*具体创造就业* ![在此处输入图像描述](../Images/28019662857ff43d95977a46f3891249.png)

与开发相同的规则：不要使用*COPY&PASTE*

# c# - c# 在另一个线程上更改表单字符串

> ID：14155257
> 
> 赞同：1
> 
> 时间：2013-01-04T10:23:22.827
> 
> 标签：c#, multithreading, backgroundworker

我的代码更改了导航栏项目的标题：

```
OverviewOrgan_NavBarHelper cNavBarHelper = new OverviewOrgan_NavBarHelper(Organization);

foreach (NavBarItem item in GetNavigationBar.Items)
{                       
    string cCaption = cNavBarHelper.UpdateNavBarItemCaption(item);
    item.Caption = cCaption;
} 
```

现在它在主线程上，但我必须将它移动到另一个线程。我知道 UI 不应该从另一个威胁中改变，然后它就被制作出来了，所以我考虑使用 BackgroundWorker。事实上，我不使用线程，有人可以为我的任务建议最佳解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T10:24:56.947

您可以使用 Invoke 从另一个线程更新 UI。

看看这篇文章：[如何从 C# 中的另一个线程更新 GUI？](https://stackoverflow.com/questions/661561/how-to-update-the-gui-from-another-thread-in-c)

例如：

```
MethodInvoker NavBarItemInvoker = (delegate
{
   OverviewOrgan_NavBarHelper cNavBarHelper = new OverviewOrgan_NavBarHelper(Organization);

   foreach (NavBarItem item in GetNavigationBar.Items)
   {                       
       string cCaption = cNavBarHelper.UpdateNavBarItemCaption(item);
       item.Caption = cCaption;
   }
});

if (InvokeRequired)
{
   Invoke(NavBarItemInvoker);
}
else
{
    NavBarItemInvoker();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T10:27:31.713

我认为您应该为此使用调度程序

在本文中了解更多信息：http: [//msdn.microsoft.com/en-us/magazine/cc163328.aspx](http://msdn.microsoft.com/en-us/magazine/cc163328.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T10:46:47.590

[看看这个线程中的第一个答案。](https://stackoverflow.com/questions/5483565/how-to-use-wpf-background-worker) 它解释了如何使用 BackgroundWorker。

但问题是，导航栏的项目是在 UI 线程中创建的（假设您使用的是 WPF），并且无法从另一个线程进行操作。

为什么你必须在另一个线程中这样做？

# mysql - 在 cakephp 上使用算术查找条件

> ID：14155266
> 
> 赞同：1
> 
> 时间：2013-01-04T10:23:50.893
> 
> 标签：mysql, cakephp

我需要将以下 mysql 条件转换为 Cakephp 查找条件。

```
select * from bookings where (check_out_date - check_in_date) <=600 ; 
```

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:50:10.700

```
$this->Booking->find('all', array(
    'conditions' => array(
        '(Booking.check_out_date - Booking.check_in_date) <=' => 600
    )
)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T10:37:23.047

尝试以下代码并对其进行调试。

```
$bookings = $this->Booking->find('all',array
(
    'conditions' => array
    (
        '(Booking.check_out_date - Booking.check_in_date) <=' => 600
    ),
    'fields' => array
    (
        'Booking.*'
    ),
    'recursive' => -1
));
```

上面的代码已经过测试并且像魅力一样工作。

# sql - 想从 sql server 显示 12 个月的名字

> ID：14155268
> 
> 赞同：11
> 
> 时间：2013-01-04T10:23:55.793
> 
> 标签：sql, sql-server, tsql

我想从 sql server 显示 12 个月的名称。我虽然完成将月份名称插入临时表，然后在该表上触发 select 语句。所以我不得不写 12 个插入表来插入 12 个月的名字。所以我搜索谷歌找到更好的解决方案，我明白了。

## 这是sql语句

```
WITH R(N) AS
(
    SELECT 0
    UNION ALL
    SELECT N+1 
    FROM R
    WHERE N < 12
)

SELECT LEFT(DATENAME(MONTH,DATEADD(MONTH,-N,GETDATE())),3) AS [month]
FROM R 
```

上面的脚本完美运行，但我的问题是我只是不明白它是如何工作的。我从不与 CTE 合作。

所以告诉我是什么意思 `WITH R(N) AS`

并看到这个 sql

```
SELECT LEFT(DATENAME(MONTH,DATEADD(MONTH,-N,GETDATE())),3) AS [month] FROM R
when above sql execute how it is getting value for -N ??
because here i have not set anything for -N ?? 
```

所以请任何人帮助我了解整个事情是如何运作的。谢谢

## 我的第二阶段问题

看看然后告诉我

```
;WITH months(MonthNumber) AS
(
    SELECT 0
    UNION ALL
    SELECT MonthNumber+1 
    FROM months
    WHERE MonthNumber < 12
) 
```

我不清楚为什么只有第一次执行以下部分

```
SELECT 0
UNION ALL
SELECT MonthNumber+1 
FROM months
WHERE MonthNumber < 12 
```

从第二次开始，仅执行以下部分

```
SELECT MonthNumber+1 
FROM months
WHERE MonthNumber < 12 
```

每当我们使用 Union 编写两个 sql 语句并执行时，它总是从两个 sql 状态返回数据，但特别是在这种情况下，从第二次开始，为什么只执行下面的部分

```
SELECT MonthNumber+1 
FROM months
WHERE MonthNumber < 12 
```

基本上我不熟悉递归技术的 CTE，这就是为什么事情对我来说不清楚的原因。如果可能，请讨论 CTE 递归的工作原理。

```
DECLARE @TotaDays SMALLINT
DECLARE @Month VARCHAR(15)
DECLARE @Year SMALLINT
DECLARE @date DATETIME 
SET @Month = 'January'
SET @Year = 2015
SET @date = '01 ' + @Month + ' ' + CONVERT(VARCHAR(4),@Year)
SET @TotaDays = 0
SELECT @TotaDays = DATEDIFF(DAY, @date, DATEADD(MONTH, 1, @date))

;WITH months(MonthNumber) AS
(
    SELECT 1
    UNION ALL
    SELECT MonthNumber+1 
    FROM months
    WHERE MonthNumber < @TotaDays
)

select * from months; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-04T10:57:36.007

这`With R(N)`是一个[公用表表达式](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)。来自 MDSN：

> 可以将公用表表达式 (CTE) 视为在单个 SELECT、INSERT、UPDATE、DELETE 或 CREATE VIEW 语句的执行范围内定义的临时结果集。CTE 类似于派生表，因为它不存储为对象，并且仅在查询期间持续存在。与派生表不同，CTE 可以是自引用的，并且可以在同一查询中多次引用。

这`R`是您正在生成的结果集（或表）的名称。是`N`数字`month`。

这个 CTE 特别是一个[递归公用表表达式](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.105%29.aspx)。来自 MSDN：

> 公共表表达式 (CTE) 提供了能够引用自身的显着优势，从而创建递归 CTE。递归 CTE 是一种重复执行初始 CTE 以返回数据子集直到获得完整结果集的 CTE。

使用 CTE 时，我的建议是对名称更具描述性。因此，对于您的示例，您可以使用以下内容：

```
;WITH months(MonthNumber) AS
(
    SELECT 0
    UNION ALL
    SELECT MonthNumber+1 
    FROM months
    WHERE MonthNumber < 12
)
select *
from months; 
```

在我的版本中，这`months`是您正在生成的结果集的名称，并且`monthnumber`是值。这会生成一个从 0 到 12 的月份编号列表（参见[演示](http://sqlfiddle.com/#!3/d41d8/7505)）。

结果：

```
| MONTHNUMBER |
---------------
|           0 |
|           1 |
|           2 |
|           3 |
|           4 |
|           5 |
|           6 |
|           7 |
|           8 |
|           9 |
|          10 |
|          11 |
|          12 | 
```

然后紧随其后的`SELECT`语句使用 CTE 结果集的值来获取月份名称。

最终查询（参见[演示](http://sqlfiddle.com/#!3/d41d8/7507)）：

```
;WITH months(MonthNumber) AS
(
    SELECT 0
    UNION ALL
    SELECT MonthNumber+1 
    FROM months
    WHERE MonthNumber < 12
)
SELECT LEFT(DATENAME(MONTH,DATEADD(MONTH,-MonthNumber,GETDATE())),3) AS [month]
FROM months; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-04-03T08:46:30.107

此查询用于获取所有月份名称和月份编号

```
SELECT DATENAME(MONTH, DATEADD(MM, s.number, CONVERT(DATETIME, 0))) AS [MonthName], 
MONTH(DATEADD(MM, s.number, CONVERT(DATETIME, 0))) AS [MonthNumber] 
FROM master.dbo.spt_values s 
WHERE [type] = 'P' AND s.number BETWEEN 0 AND 11
ORDER BY 2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-21T16:35:02.680

试试这个，

```
with Months as 
( 
    select month(GETDATE()) as Monthnumber, datename(month, GETDATE()) as name, 1 as number
    union all
    select month(dateadd(month,number,(GETDATE()))) Monthnumber ,datename(month, dateadd(month,number,(GETDATE()))) as name, number+1 
    from Months 
    where number<12
)   
select Monthnumber, name 
from Months 
order by Monthnumber 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T10:43:44.667

`R`定义 CTE 的名称，并`(N)`定义 CTE 中列的名称 - 在这种情况下，只有一列。

您可以在语句的第二部分看到您从 R 中进行选择。

您确实在设置`(N)`when you的值`select 0`，即 CTE 定义的锚部分中的第一列也是唯一的列，稍后在 CTE 定义`select N+1`的递归部分中指定时。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-04T10:48:17.960

尝试更改代码的第二部分，这样您将看到递归部分中生成的内容：

```
WITH R(N) AS
(
    SELECT 0
    UNION ALL
    SELECT N+1 
    FROM R
    WHERE N < 12
)

SELECT *
FROM R 
```

您将获得以下结果：

```
Row# | N
     |
 1   | 0
 2   | 1
 3   | 2
 4   | 3
 5   | 4
 6   | 5
 7   | 6
 8   | 7
 9   | 8
 10  | 9
 11  | 10
 12  | 10
 13  | 12 
```

顺便说一句，我认为最好不要这样做`SELECT 1`，`SELECT 0`这样您就可以生成正好 12 个数字，因此您最终不会有额外的一个月

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-02T15:41:55.020

此查询获取每个时间段的信息并获取列表：

```
set language  'SPANISH'
DECLARE @table table(fechaDesde datetime , fechaHasta datetime ) 
INSERT @table VALUES('20151231' , '20161231');
WITH x AS 
    (
        SELECT   DATEADD( m , 1 ,fechaDesde ) as fecha  FROM @table
        UNION ALL
        SELECT  DATEADD( m , 1 ,fecha )
        FROM @table t INNER JOIN x ON  DATEADD( m , 1 ,x.fecha ) <= t.fechaHasta
    )
SELECT LEFT( CONVERT( VARCHAR, fecha , 112 ) , 6 ) as Periodo_Id 
,DATEPART ( dd, DATEADD(dd,-(DAY(fecha)-1),fecha)) Num_Dia_Inicio
,DATEADD(dd,-(DAY(fecha)-1),fecha) Fecha_Inicio
,DATEPART ( mm , fecha ) Mes_Id
,DATEPART ( yy , fecha ) Anio
,DATEPART ( dd, DATEADD(dd,-(DAY(DATEADD(mm,1,fecha))),DATEADD(mm,1,fecha))) Num_Dia_Fin
,DATEADD(dd,-(DAY(DATEADD(mm,1,fecha))),DATEADD(mm,1,fecha)) ultimoDia
,datename(MONTH, fecha) mes
,'Q' + convert(varchar(10),  DATEPART(QUARTER, fecha)) Trimestre_Name
FROM x 
OPTION(MAXRECURSION 0) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-01T09:33:27.817

我修改了之前共享的代码，以按要求的顺序给出 12 个月的名称以及它们各自的月份编号。此外，通过添加 1900 年 1 月 1 日作为固定日期来消除对当前日期的依赖。

```
WITH R (N)
AS
(SELECT
        0
    UNION ALL
    SELECT
        N + 1
    FROM R
    WHERE N < 12)

SELECT
    N
   ,DATENAME(MONTH, DATEADD(MONTH, N - 1, '1 Jan 1900')) AS [month]
FROM R
WHERE N > 0 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-01-21T12:54:53.753

我想你看到这个你会期待这个，你可以理解谢谢。

with months(mnum) as (select 0 union all select mnum+1 from months where mnum <11) select left(datename(month,dateadd(month,mnum,getdate())),3) as mn from months

大卫·拉贾

# java - 垂直进度条有奇怪的背景，不可更改

> ID：14155269
> 
> 赞同：3
> 
> 时间：2013-01-04T10:23:56.547
> 
> 标签：java, swing, jprogressbar

进度条由以下代码创建

```
 bar = new JProgressBar(JProgressBar.VERTICAL);
    bar.setEnabled(true);

    bar.setBackground(Color.YELLOW);
    bar.setForeground(Color.GREEN);

    bar.setStringPainted(true);     

    getReflectedComponent().setLayout(new BorderLayout());
    getReflectedComponent().add(bar, BorderLayout.CENTER); 
```

请注意，getReflectedComponent() 返回一个 JComponent。在另一种方法中，显示的字符串、最大值和当前值被操纵，而不是更多。

我真的不知道为什么这个非常奇怪的灰色条纹会显示在顶部。如果我水平显示进度条，它们不存在...

![这就是我的进度条的样子](../Images/0b1680246661d1e83634839e25d4f31e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:34:31.657

我没有观察到您的代码存在问题，因此它必须来自您未向我们展示的其他内容（提供[SSCCE](http://sscce.org)的另一个论点）

这是一个让自己入门的示例：

```
import java.awt.BorderLayout;
import java.awt.Color;

import javax.swing.JFrame;
import javax.swing.JProgressBar;
import javax.swing.SwingUtilities;

public class TestScrollbars {

    protected void initUI() {
        final JFrame frame = new JFrame();
        frame.setTitle(TestScrollbars.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JProgressBar bar = new JProgressBar(JProgressBar.VERTICAL);
        bar.setEnabled(true);

        bar.setBackground(Color.YELLOW);
        bar.setForeground(Color.GREEN);

        bar.setStringPainted(true);
        bar.setString("2000 g");
        bar.setValue(65);
        frame.setLayout(new BorderLayout());
        frame.add(bar, BorderLayout.CENTER);
        frame.setSize(500, 400);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestScrollbars().initUI();
            }
        });
    }

} 
```

结果图像（进度条正确显示所选颜色）：

![结果](../Images/f19a2964e081fac2bf01f527e0b810d2.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T11:38:59.183

还要考虑一个自定义，[这里](https://stackoverflow.com/a/13465982/230513)`ProgressBarUI`提到并显示[在这里](https://stackoverflow.com/a/8886795/230513)。

![图片](../Images/18a34474e049b8e6365455c4ed4b95de.png)

# c# - 在带有定位器的 DataGridView 中显示来自 WCF 的大量记录

> ID：14155270
> 
> 赞同：0
> 
> 时间：2013-01-04T10:24:01.473
> 
> 标签：c#, winforms, wcf, entity-framework, pagination

我有这个基于 Clarion TPS 的商业软件，我想用我用 C# 编写的软件替换它，使用以下技术：

*   SQL Server 2008 R2 速成版
*   实体框架 4
*   具有 wsHttpBinding 和使用 UserNamePassword 凭据的基于消息的安全性的 WCF 服务
*   Windows 窗体客户端

[Clarion](http://en.wikipedia.org/wiki/Clarion_%28programming_language%29)软件使用 TPS 文件作为数据库表。TPS 数据库文件使用[ISAM](http://en.wikipedia.org/wiki/ISAM)文件格式，允许所有索引和多个数据文件包含在一个磁盘文件中。这种方法的优点是记录访问速度非常快，但主要缺点是当多个客户端访问时数据库损坏的可能性很高，并且表中数据不一致的可能性很高。

我想替换它，因为我想更好地控制我的数据库访问（例如谁可以访问什么），我不想让客户直接访问数据库，我发现 WCF 服务非常适合任务。

这在理论上都很好，但是真正的使用场景让我暂时放弃了实现它。例如，当我使用 Datagridview 打开一个需要显示相对较大的记录列表（大约 20.000 条）的对话框时，它需要大约 10 秒才能显示。在 Clarion 中，它立即发生。Clarion 中有一个称为“定位器”的功能，它允许您通过键入记录属性（例如名称）开头的那些字母来定位记录。

我知道通过 WCF 对数据进行序列化和反序列化需要一些时间。至于序列化，我已经优化了代码，因此 WCF 服务使用**DataContractSerializer**（具有循环引用感知行为）。我已使用 EF POCO 实体生成器将 EF 生成的默认实体更改为 POCO 实体。我添加了预编译视图，并且我的 WCF 服务正在返回称为“ViewModels”的对象，而不是我认为需要的 POCO。

我创建了类似于 Clarion 的“定位器”行为的东西，它看起来像这样：

```
private void locator_TextChanged(System.Object sender, System.EventArgs e)
{
    if (!string.IsNullOrWhiteSpace(locator.Text))
    {
        for (int idx = 0; idx <= dataGrid1.RowCount - 1; idx++)
        {
            var row = dataGrid1.Rows[idx];
            if ((row.DataBoundItem != null) && ((SomeViewModel)row.DataBoundItem).Name.ToUpper().StartsWith(locator.Text.ToUpper()))
            {
                row.Cells[0].Selected = true;
                break;
            }
        }
    }
} 
```

它适用于几百甚至几千条记录。但是大量的记录看起来和感觉都很糟糕。正如您在看到代码时可​​能已经猜到的那样。这种方式也不会更快地工作：

```
if (!string.IsNullOrWhiteSpace(locator.Text)) {
    var r = dataGrid1.Rows.Cast<DataGridViewRow>().FirstOrDefault(x => ((SomeViewModel)(x.DataBoundItem)).PrezimeIme.ToUpper().StartsWith(locator.Text.ToUpper()));
    if (r != null) 
    {
        r.Cells[0].Selected = true;
    }
} 
```

这个问题。如果我们知道我使用上面列出的那些技术，如何模仿 Clarion 将这么多记录的快速数据加载到 datagridview 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-05T23:55:35.250

当多个程序访问它们时，Clarion TPS 文件不会损坏，因为它们使用文件锁定协议。如果他们通过使用机会锁定 (oplocks) 的文件共享进行访问，这可能会变得一团糟，因为锁定/解锁的顺序可能会出现偏差，或者如果您有任何运行 Microsoft Security Essentials 的客户端（它有一个“功能”混合锁定/解锁的顺序，不，它不会被修复），但否则它工作得“很好”。

您的代码很慢的原因是因为它必须遍历文件中的所有行，这很慢，因为它都是磁盘 I/O 并且 Clarion 不做任何缓存。

[要访问数据，您可以： 1) 使用此工具](http://www.ctrl-alt-dev.nl/Projects/TPS-to-CSV/TPS-to-CSV.html)将您的 TPS 文件转换为 CVS并将它们导入您的 SQL 数据库。这以前已经回答[here](https://stackoverflow.com/questions/21152886/convert-from-tps-to-csv/22203355)。

2) 从 SoftVelocity 购买 TPS-ODBC 驱动程序并通过 SQL 查询访问 TPS 文件。TPS 驱动程序有一些怪癖，您需要一个函数来转换日期和时间，您无法访问大尺寸，某些查询可能返回的行数少于 TPS 文件包含的行数（取决于您的主键的构造方式），并且您必须在所有文件中都有唯一的主键。这与直接访问文件一样快/慢，因此我建议仅使用此方法将数据导出到您的 MSSQL 数据库。

还有一些工具可以通过将 DCT 导出到文本文件 (dtcx) 将您的 Clarion DCT 转换为 SQL，您还可以通过将表类型从 TPS 更改为 MSSQL 来使 Clarion 生成结构。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-21T18:30:27.707

看起来您正在遍历所有记录，但 Clarion 代码从文件索引中获取了一个新位置。

# c# - 使用（不使用）Active Directory 进行开发

> ID：14155271
> 
> 赞同：5
> 
> 时间：2013-01-04T10:24:02.207
> 
> 标签：c#, active-directory

我正在开发一个系统的某些部分依赖于 Active Directory 的项目。但是，我在客户办公室，无法访问他们的广告（繁文缛节）。

有没有办法在我开发时模拟 AD？

我正在使用 C# 和 .NET 进行开发

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T13:45:08.673

*我们的服务需要向 AD 查询用户组和电子邮件地址*

另一个选择是使用存储库模式实现 AD 访问，并至少有**两个**实现。

```
public interface IRepository 
{
    IEnumerable<Something> GetUsers();
}

public class ActiveDirectoryRepository : IRepository ...

public class AnotherRepository : IRepository ... 
```

这样，您可以在部署时轻松切换到所需的实现 - 您针对数据库、xmlfiles、内存以及已部署的应用程序与 AD 对话之外的任何内容进行开发 - 因为您针对存储库接口进行编码，您只需重新配置应用程序并进行零更改在代码中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T11:31:17.793

您可以使用 Active Directory 轻量级目录服务（以前称为 ADAM）。这允许您设置多用户 AD 环境。

[http://blogs.technet.com/b/askds/](http://blogs.technet.com/b/askds/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T11:46:26.330

这就是“专业”和“开发环境”的用武之地。

客户端必须有一个单独的开发环境，包括 AD 服务器等。这是虚拟化非常方便的地方，可以设置许多小型低功耗虚拟机来运行 AD 和所有其他所需的服务。

拥有一个（或多个）单独的网络，隔离的，具有单独的域，并使用它们进行开发。

标准做法。

# c# - 如何在silverlight中将一个可观察集合与另一个可观察集合排序？

> ID：14155272
> 
> 赞同：3
> 
> 时间：2013-01-04T10:24:02.420
> 
> 标签：c#, silverlight

我有一个名为“A”的字符串可观察集合，其中包含一些值。另一个名为“B”的字符串可观察集合包含一些值。

“A”有 13 个值，“B”有 5 个值。“A”包含“B”值，但顺序不同。我希望“A”中的“B”值在组合框中获得第一优先级。

所以我必须做.. 写一些 linq 查询。请给出一些想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:46:41.407

我没有方便的 IDE，但应该这样做。

这个假设两个集合中存在相同的实例。

```
var sortedA = observableA.OrderBy(item=>observableB.Contains(item) ? 0 : 1); 
```

如果它们不是相同的实例，并且您想比较一个属性，`name`您也可以这样做。

```
var sortedA = observableA.OrderBy(item=>observableB.Any(item2 => item2.Name == item.Name) ? 0 : 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:47:43.567

```
var a = "1,2,3,4,5,6,7,8,9,10,11,12,13".Split(',').ToList();
var b = "7,8,9,10,11".Split(',').ToList();

var c = a.OrderByDescending(x => b.IndexOf(x)); 
```

# c# - WinRT 共享图像接收器失败（访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）

> ID：14155276
> 
> 赞同：2
> 
> 时间：2013-01-04T10:24:11.550
> 
> 标签：c#, windows-runtime, sharing

我很难解决这个问题。我想要实现的是为我的应用程序提供共享（接收点）功能，以便应用程序可以处理接收到的图像。

1）接收*通常*有效（我只从一个应用程序遇到这个问题）2）无法与我的应用程序连接的“捐助者”应用程序将图像共享给另一个应用程序（例如 SkyDrive）很好 3）我的清单看起来很好对我来说，注册了数据格式并选择了文件类型

当我调试时，我从捐赠者应用程序中获得了正确的数据格式（它是一个“位图”），并且位图格式也可以（png）。

此外，当我启动池进程时，从 RandomAccessStreamReference 中获取 IRandomAccessStreamWithContentType 并正确显示流大小。

当我尝试将此流读取到 DataReader 时，我得到一个异常：“访问被拒绝。（来自 HRESULT 的异常：0x80070005（E_ACCESSDENIED））”

同样，如果我尝试从另一个应用程序共享图像 - 它工作得很好，如果我从给我的另一个应用程序（不是我的）问题的“捐助者”应用程序共享它也可以工作。那么捐助者和我的应用程序集之间肯定存在“信任”问题吗？这甚至可能吗？

这是应该做所有需要做的事情的代码片段。

```
 protected override async void OnNavigatedTo(NavigationEventArgs e)         
    {
        _sharedData = (ShareOperation)e.Parameter;

        try
        {
            IBuffer theBuffer = null;
            _sharedData.ReportStarted();

            if (_sharedData.Data.Contains("bitmap") || _sharedData.Data.Contains("Bitmap"))
            {
                var refe = await _sharedData.Data.GetBitmapAsync();

                using (var originalImageStream = await refe.OpenReadAsync())
                {
                    var dataReader = new DataReader(originalImageStream.GetInputStreamAt(0));
    failure -->     await dataReader.LoadAsync((uint) originalImageStream.Size);
                    theBuffer = dataReader.ReadBuffer((uint) originalImageStream.Size);                      
                }
            }
            ....
        }
        catch (Exception ex)
        {

        }
    } 
```

和清单文件

```
 <?xml version="1.0" encoding="utf-8"?>
  <Package xmlns="http://schemas.microsoft.com/appx/2010/manifest">
  <Identity Name="enter your guid" Publisher="CN=author" Version="1.0.0.2" />
  <Properties>
    <DisplayName>My App</DisplayName>
    <PublisherDisplayName>Author</PublisherDisplayName>
    <Logo>Assets\LogoForStore.png</Logo>
  </Properties>
  <Prerequisites>
    <OSMinVersion>6.2.1</OSMinVersion>
    <OSMaxVersionTested>6.2.1</OSMaxVersionTested>
  </Prerequisites>
  <Resources>
    <Resource Language="x-generate" />
  </Resources>
  <Applications>
    <Application Id="App" Executable="$targetnametoken$.exe" EntryPoint="MyApp.App">
      <VisualElements DisplayName="MyApp" Logo="Assets\Logo.png" SmallLogo="Assets\SmallLogo.png" Description="MyApp" ForegroundText="light" BackgroundColor="#464646" ToastCapable="false">
        <DefaultTile ShowName="allLogos" WideLogo="Assets\WideLogo.png" ShortName="MyApp" />
        <SplashScreen Image="Assets\SplashScreen.png" />
        <InitialRotationPreference>
          <Rotation Preference="landscape" />
          <Rotation Preference="landscapeFlipped" />
        </InitialRotationPreference>
      </VisualElements>
      <Extensions>
        <Extension Category="windows.accountPictureProvider" />
        <Extension Category="windows.cameraSettings" />
        <Extension Category="windows.shareTarget">
          <ShareTarget>
            <SupportedFileTypes>
              <FileType>.png</FileType>
              <FileType>.jpg</FileType>
              <FileType>.gif</FileType>
            </SupportedFileTypes>
            <DataFormat>Bitmap</DataFormat>
            <DataFormat>StorageItems</DataFormat>
          </ShareTarget>
        </Extension>
      </Extensions>
    </Application>
  </Applications>
  <Capabilities>
    <Capability Name="picturesLibrary" />
    <DeviceCapability Name="webcam" />
  </Capabilities>
</Package> 
```

任何想法将不胜感激！

M。

# javascript - 从浏览器打印图像飞行

> ID：14155279
> 
> 赞同：1
> 
> 时间：2013-01-04T10:24:30.503
> 
> 标签：javascript, css, html, firefox

我正在尝试从浏览器打印图像。

例如： http: [//www.canadianpetconnection.com/wp-content/uploads/2011/09/Cats1.jpg](http://www.canadianpetconnection.com/wp-content/uploads/2011/09/Cats1.jpg)

我希望我的打印页面在任何一侧都没有任何边距，以便图像从页面的左上角开始。

我还希望打印图像的宽度应该是固定的，比如 8 英寸。

是否有任何 CSS/JS/HTML 解决方法？

编辑：如果我需要在出现的打印输出弹出窗口中更改一些设置，我会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:33:44.453

在 CSS 中使用`@media print`并将图像宽度和高度设置为所需的尺寸。您可以在浏览器打印部分管理其余设置。

```
@media print {
    img {width: ?px; height: ?px; }
} 
```

您甚至可以对图像属性使用相对单位。

至于您要求将图像宽度扩展到设备屏幕分辨率，然后打印生成的图像，我认为这几乎是不可能的，因为您是从打印机设备驱动程序管理这些设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:39:36.943

`CSS MEdia Types`会帮助你。请参阅下面的链接。（使用@media 打印）

[http://www.w3schools.com/css/css_mediatypes.asp](http://www.w3schools.com/css/css_mediatypes.asp)

```
<html>
<head>
<style>
@media screen
  {
  p.test {font-family:verdana,sans-serif;font-size:14px;}
  }
@media print
  {
  p.test {font-family:times,serif;font-size:10px;width:300px;}
  }
@media screen,print
  {
  p.test {font-weight:bold;}
  }
</style>
</head>

<body>
....
</body>
</html> 
```

# jquery - 向特定客户端发送消息以及发送消息的用户

> ID：14155281
> 
> 赞同：3
> 
> 时间：2013-01-04T10:24:35.630
> 
> 标签：jquery, asp.net, signalr

我是 SignalR 的初学者。我创建了一个基于 SignalR 的基本聊天应用程序。我面临的问题是我想向特定客户端以及发送消息的用户发送消息。这个怎么做？

我知道要向特定客户端发送消息，我们可以这样做：

```
Clients.Client(Context.ConnectionId).addMessage(data); 
```

它只向指定的客户端发送消息，而不是发送消息的客户端。

我什至可以使用 jQuery 将消息附加到用户本身，从而错误地认为消息已发送给指定的用户。我不想这样做。

PS：我可以在这里使用`done()`吗？如果是，请解释一下？

**编辑**：

**.js 文件**

```
txtMsg.keypress(function (e) {
   chat.server.send(chatUsername, selectedUsername, txtMsg.val(), showChatName, _invokeChat);
});

chat.client.addMessage = function (chatUsername, message, showChatName, invokeChat) {
    if (invokeChat) {
        selectedUsername = chatUsername;
        _invokeChat = false;
        chatTitleName.text("Chat with: " + selectedUsername);
    }
    if (showChatName) {
        //To show Username with the typed message
        showMessage.append('<b>' + chatUsername + '</b>' + ':&nbsp;' + message + '</br>');
    }
    else {
        //To show only typed message, not the username
        showMessage.append('&nbsp;&nbsp;' + message + '</br>');
    }
    previousUsername = chatUsername;
    //To keep scroll always bottom
    showMessage.scrollTop(showMessage[0].scrollHeight);
}; 
```

* * *

**.cs 文件**（*通过查看 Samir hafez 答案更改*）

```
public void Send(string from, string to, string message, bool blnShowChatName, bool blnInvokeChat)
    {
        string ConnectionID = selectUsername(to);
        // Call the addMessage method on all clients    
        Clients.Client(ConnectionID).addMessage(from, message, blnShowChatName, blnInvokeChat);
        if (!from.Equals(to))
        {
            blnInvokeChat = false;
            Clients.Caller.addMessage(from, message, blnShowChatName, blnInvokeChat);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T06:20:21.410

我不会费心将文本发送回服务器。您可以只使用 javascript 来附加消息

### 客户

```
txtMsg.keypress(function (e) {
   chat.server.send(chatUsername, selectedUsername, txtMsg.val(), showChatName, _invokeChat);

   //add this message locally so we don't have to round trip to the server
   addMessage(chatUsername, txtMsg.val(), showChatName, _invokeChat);
});

chat.client.addMessage = addMessage;

function addMessage(chatUsername, message, showChatName, invokeChat) {
    if (invokeChat) {
        selectedUsername = chatUsername;
        _invokeChat = false;
        chatTitleName.text("Chat with: " + selectedUsername);
    }
    if (showChatName) {
        //To show Username with the typed message
        showMessage.append('<b>' + chatUsername + '</b>' + ':&nbsp;' + message + '</br>');
    }
    else {
        //To show only typed message, not the username
        showMessage.append('&nbsp;&nbsp;' + message + '</br>');
    }
        previousUsername = chatUsername;
    //To keep scroll always bottom
    showMessage.scrollTop(showMessage[0].scrollHeight);
}; 
```

### 服务器

```
public void Send(string from, string to, string message, bool blnShowChatName, bool blnInvokeChat)
    {
        string ConnectionID = selectUsername(to);
        // Call the addMessage method on all clients    
        Clients.Client(ConnectionID).addMessage(from, message, blnShowChatName, blnInvokeChat);
} 
```

这也简化了您的服务器代码......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T11:44:34.787

`Clients.Caller`会给你打电话的客户。

或者更详细的方式：`Clients.Client(Context.ConnectionId)`

所有这些都可以在 SignalR Wiki for Hubs [Here上为您提供](https://github.com/SignalR/SignalR/wiki/Hubs)

# java - UIManager 只改变一次颜色 (Nimbus)

> ID：14155284
> 
> 赞同：0
> 
> 时间：2013-01-04T10:24:51.183
> 
> 标签：java, swing, colors, nimbus, uimanager

参考这个错误：

[4848910：UIManager 只更新一次颜色](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4848910)

我在 JFrame 上有两个按钮。从第一个按钮开始，我将 LAF 颜色更改为

```
UIManager.put( "Button.background", new ColorUIResource(Color.red) );
SwingUtilities.updateComponentTreeUI( this.getContentPane() ); 
```

在第二个按钮上，我正在更改 LAF 颜色

```
UIManager.put( "Button.background", new ColorUIResource(Color.green) );
SwingUtilities.updateComponentTreeUI( this.getContentPane() ); 
```

在这里，我使用的是 ColorUIResource （如错误的解决方案所述），但我的问题与引用的错误中描述的相同。即 UIManager 会在第一次单击任何按钮时更改颜色，但不会在后续单击时更改颜色。

我错过了什么吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:57:09.760

*   不可能改变那种直接的方式

*   有可能通过重置当前的 Nimbus 配色方案 ( `UIManager.getLookAndFeel().uninitialize();`)

*   [另一个（类似）问题是我关于 Nimbus & Font 的问题](https://stackoverflow.com/questions/9958004/change-font-at-runtime)

代码

```
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Random;
import javax.swing.JFrame;
import javax.swing.LookAndFeel;
import javax.swing.SwingUtilities;
import javax.swing.Timer;
import javax.swing.UIDefaults;
import javax.swing.UIManager;
import javax.swing.UIManager.LookAndFeelInfo;
import javax.swing.UnsupportedLookAndFeelException;

public class NimbusTestButtonsBackground extends JFrame {

    private static final long serialVersionUID = 1L;
    private javax.swing.JButton button;

    public NimbusTestButtonsBackground() {
        button = new javax.swing.JButton();
        button.setText("Text");
        add(button);
        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        this.pack();
        Timer t = new Timer(1000, new ActionListener() {

            private Random r = new Random();

            @Override
            public void actionPerformed(ActionEvent e) {
                Color c = new Color(r.nextInt(256), r.nextInt(256), r.nextInt(256));
                try {
                    LookAndFeel lnf = UIManager.getLookAndFeel().getClass().newInstance();
                    UIDefaults uiDefaults = lnf.getDefaults();
                    uiDefaults.put("nimbusBase", c);
                    UIManager.getLookAndFeel().uninitialize();
                    UIManager.setLookAndFeel(lnf);
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }
                UIDefaults defaults = UIManager.getDefaults();
                defaults.put("Button.background", c);
                SwingUtilities.updateComponentTreeUI(button);
            }
        });
        t.start();
    }

    public static void main(String args[]) {
        try {
            for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (Exception e) {
            return;
        }

        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new NimbusTestButtonsBackground().setVisible(true);
            }
        });
    }
} 
```

# liferay-6 - 如何从liferay禁用管理员角色的选定权限？

> ID：14155287
> 
> 赞同：1
> 
> 时间：2013-01-04T10:24:56.677
> 
> 标签：liferay-6, liferay-ide

我只想从liferay的管理员角色的控制面板中隐藏一些选项。诸如“监控、移动设备规则、门户设置、插件安装、更新管理器...等”之类的选项。. 如何从“portal-ext.properties”中隐藏每个？或者有没有其他方法？请帮我..

# magento - Magento 搜索问题

> ID：14155289
> 
> 赞同：2
> 
> 时间：2013-01-04T10:25:03.670
> 
> 标签：magento, web

我在使用我们的 Megento 商店时遇到了一些搜索问题。我们正在尝试向我们的商店添加拼写差异，因此当有人在我们的搜索栏中拼错产品名称时，它会显示他们正在搜索的产品。

起初我认为这将是一件轻而易举的事，只需转到目录 > 搜索词 > 单击产品并为其添加同义词......但这不起作用。

如果它对我们的商店有帮助，可以在这里找到：http: [//bit.ly/aOZqBv](http://bit.ly/aOZqBv)，搜索栏可以在屏幕的右上角找到。

作为产品搜索词的示例，我们尝试为其生成产品结果如下：如果用户搜索工作*优化*，我们希望我们的网站随后显示产品*optimeyes*的结果。

我相信在这个网站的早期开发阶段，搜索栏已经以某种方式从基本搜索框（在搜索产品时会显示看似随机的结果）到高级搜索框以提供更好的结果。

我认为这个问题可能需要一些代码来进行更改，而不仅仅是通过管理面板进行简单的修复，但是我不确定这段代码看起来像什么。

任何帮助将不胜感激。

Ps Magento 版本。1.7.0.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-10T23:53:58.920

Stock Magento 不允许自动包含拼写错误。您可能希望将一些常见的产品拼写错误添加到关键字列表中，并将这些关键字包含到搜索索引中。

或者，您可以查看[高级搜索扩展](http://www.magentocommerce.com/magento-connect/advanced-search-with-auto-complete-and-weighted-attributes.html)，它允许添加“搜索相似性”，即还根据单词的“soundex”索引查找搜索关键字的类似发音或拼写错误的版本。

# iphone - UIButton在滚动视图中更改位置时隐藏

> ID：14155293
> 
> 赞同：1
> 
> 时间：2013-01-04T10:25:14.133
> 
> 标签：iphone, ios, ipad

我有一个带有 imageview 和半透明按钮的滚动视图。使用 [addsubview] 将按钮和图像视图添加到滚动视图。现在我需要更改图像视图和按钮位置（更改框架属性）

埃斯：

```
button.frame = CGRectMake( x, y, w, h ); 
```

完成此操作后，按钮隐藏。如果我只更改按钮位置，它会完美运行。

PS：我刚刚尝试使用 Bringtofront。

滚动视图内容创建：

```
 int index = 0;
    int x = OFFSETXCOPERTINA;
    int y = 0;
    int w = LARGHEZZACOPERTINA;
    int h = ALTEZZACOPERTINA;
    int riga = 0;
    int indexriga = 0;
    int testindex = 0;

    if (self.interfaceOrientation == UIInterfaceOrientationPortrait || self.interfaceOrientation ==UIInterfaceOrientationPortraitUpsideDown) {
        testindex = NRCopertineVerticale;
    }
    else {
        testindex = NRCopertineOrizzontale;
    }

    for (NSDictionary *rigaordine in ElencoOrdini)
    {

        if (indexriga > 0) x = x + OFFSETXCOPERTINA + w;
        y = OFFSETYCOPERTINA + (riga * (h + OFFSETYCOPERTINA));

        UIButton *buttonCopertina = [UIButton buttonWithType:UIButtonTypeCustom];
        buttonCopertina.frame = CGRectMake(x, y, w, h);

        [buttonCopertina setBackgroundColor:[UIColor colorWithRed:(255/255.0) green:(255/255.0) blue:(0/255.0) alpha:0.3]];

        UIImage *image = [[UIImage alloc] initWithData: [NSData dataWithContentsOfURL: [NSURL URLWithString: [NSString stringWithFormat: @"%@image.php?CODe=%@", URLXXX, [rigaordine objectForKey:@"cod_isb"]]]]];

        UIImageView *copertina = [[UIImageView alloc] initWithImage: image];
        [copertina setTag:TAGCopertine + index];
        [copertina setFrame:CGRectMake(x, y, w, h)];

        [buttonCopertina setTag:TAGButtonCopertine + index];
        [buttonCopertina addTarget:self action:@selector(buttonCopertinaClicked:) forControlEvents:UIControlEventTouchUpInside];

        [scrollView addSubview:copertina];
        [scrollView addSubview:buttonCopertina];

        index++;
        indexriga++;

        if (indexriga >= testindex) {
            indexriga = 0;
            riga++;
            x = 10;
        }

    } 
```

当我旋转 iPad 时：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {

    int index = 0;
    int x = OFFSETXCOPERTINA;
    int y = 0;
    int w = LARGHEZZACOPERTINA;
    int h = ALTEZZACOPERTINA;
    int riga = 0;
    int indexriga = 0;
    int testindex = 0;

    if (toInterfaceOrientation == UIInterfaceOrientationPortrait || toInterfaceOrientation ==UIInterfaceOrientationPortraitUpsideDown) {
        testindex = NRCopertineVerticale;
    }
    else {
        testindex = NRCopertineOrizzontale;
    }

    for(int j = 0; j< 999; j++) {
        if (indexriga > 0) x = x + OFFSETXCOPERTINA + w;
        y = OFFSETYCOPERTINA + (riga * (h + OFFSETYCOPERTINA));

        UIImageView *copertina = (UIImageView *)[self.scrollView viewWithTag:(TAGCopertine + j)];
        if (copertina != nil) {
            copertina.frame = CGRectMake( x, y, LARGHEZZACOPERTINA, ALTEZZACOPERTINA );
        }

        UIButton *button = (UIButton *)[self.scrollView viewWithTag:(TAGButtonCopertine + j)];
        if (button != nil) {
            button.frame = CGRectMake( x, y, LARGHEZZACOPERTINA, ALTEZZACOPERTINA );
        }

        index++;
        indexriga++;

        if (indexriga >= testindex) {
            indexriga = 0;
            riga++;
            x = 10;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:33:53.603

可能您正在设置一些不正确的按钮框架，它会离开屏幕。这里正确的方法是创建一个`UIView`子类，其中包含 a`UIImageView`和 a `UIButton`。公开一个用于设置和图像的属性，并创建一个`delegate`用于触摸按钮的属性。然后，使用按钮实例化您的视图，设置图像，设置其委托并将其添加为子视图，`UIScrollView`并仅使用按钮更改视图的框架 - 一切都会相应地重新定位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:08:23.767

经过数千次测试，我发现的唯一方法是在 willRotateToInterfaceOrientation 中更改 UIImageViews 的位置。

并在 didRotateFromInterfaceOrientation 中更改 UIButtons 位置。

这似乎没有解释，但它有效。

# javascript - 如何验证具有相同验证要求的 2 个文本框？

> ID：14155296
> 
> 赞同：0
> 
> 时间：2013-01-04T10:25:25.257
> 
> 标签：javascript, html

我发现很难验证 2 个文本框以将其与 2012-13 等学术年的模式匹配。我为两个文本框提供了不同的 id，n 试图单独验证，但它没有发生。你们中的任何人都可以帮忙吗？我是一个新鲜人。我附上了我的js代码。如果两个文本框都找不到模式，我想要一条错误消息。

```
 <html>
<body>
<script type="text/javascript">

window.onchange=function check_it() {
    var ay = document.getElementById("ayear").value;
    var fy=document.getElementById("fyear").value;

    var pattern = /\d{4}-\d{2,4}$/;

    if(pattern.test(ay) && pattern.test(fy)){
        return true;
    } else {

       window.alert ("invalid");
        return false;
    }
}
</script>
<form   >

<p> This Report is prepared for the Current Acadamic Year(<input type="text" size="10"  id="ayear" >) and the Current Financial Year (<input type="text" size="10"  id="fyear" >) on behalf of the Institution.</p>

</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:30:20.883

试试这个：

```
window.onchange=function check_it() {
    var ay = document.getElementById("ayear").value;
    var fy=document.getElementById("fyear").value;

    var pattern = /^\d{4}-\d{2,4}$/;
    if(pattern.test(ay) && pattern.test(fy)){
        return true;
    } else {
        window.alert ("invalid");
        return false;
    }
} 
```

另外，我建议用这个替换你的正则表达式：

```
/^\d{4}-\d{2,4}$/ 
```

因为其他正则表达式也将验证`122012-2012345`

`true`现在，上面的函数只有在两个字段都通过测试时才会返回。否则，它将返回`false`。

* * *

另外，我建议始终在您的 's 中使用方括号 ( `{}`) 。`if/else`你的代码中有一个小问题。

这：

```
if (pattern.test(ay))
    return false;
else
    window.alert ("invalid");
return true; 
```

本来应该：

```
if (pattern.test(ay)){
    return false;
} else {
    window.alert ("invalid");
    return true;
} 
```

**[工作样本](http://fiddle.jshell.net/r8ppw/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T04:45:00.380

我希望当您将光标从文本字段移动时，此解决方案将`onBlur`自动触发。如果你愿意，你也可以添加一个`onClick`功能。这是你的代码。在适当的地方使用它。

```
<script>
function validate(){
var y = document.getElementById("errorResponse");
var x=document.forms["myForm"]["fval"].value;
var z=document.forms["myForm"]["sval"].value;

//Compare the expression

    if (x!=z){
        y.innerHTML = "Values not missing";
    }else{
        y.innerHTML = "Correct";
    }
 }
</script>

<form name="myForm">
First value: <input type="text" name="fval"/><br>
Second value: <input type="text" name="sval" onBlur = "validate()"/>
<div id = "errorResponse"></div>
<input type="submit" value="Submit">
</form> 
```

# sql - 如何从同一个连接表中选择不同的值，但在不同的外键上

> ID：14155304
> 
> 赞同：0
> 
> 时间：2013-01-04T10:26:01.590
> 
> 标签：sql, sql-server, tsql, join, view

我有一个`Users`链接到多次的表，如下所示：

![在此处输入图像描述](../Images/6b74acbe03aa70f2cdd8c0bd001b7f63.png)

所以当我向用户请求`Name`一个`Request`名字时，我会得到一个名字，我想要两个，这是我第一次遇到这种情况，我不知道如何从 SQL 中做到这一点。

查询可能像：

```
SELECT Name as Originator, Name as Requestee FROM View ... JOIN ... WHERE Id = 123 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T10:30:13.393

很简单，你需要两个用户，你加入`Users`表两次，比如：

```
SELECT ou.Name as Originator, ru.Name as Requestee 
FROM Requests r
  INNER JOIN Users ou ON r.Originator_Id = ou.Id
  INNER JOIN Users ru ON r.Requestee_Id = ru.Id
WHERE r.Id = 123 
```

# python - 使用 shell 保存带有日期和时间的文件

> ID：14155308
> 
> 赞同：1
> 
> 时间：2013-01-04T10:26:21.163
> 
> 标签：python, bash, shell, datetime

我在 Python 中有一些东西，它以以下日期时间格式保存文件：

```
>>> s = time.strftime('%Y%m%d%H%M%S')
>>> print s
20121208145544 
```

情况略有变化，现在需要在 shell 中完成。有没有办法使用 shell 以完全相同的格式获取日期时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T10:28:12.613

就像是

```
touch filename_`/bin/date +%Y%m%d%H%M%S`.txt 
```

创建一个空文件

```
filename_20130104112845.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T10:29:12.880

使用[`date`command](http://unixhelp.ed.ac.uk/CGI/man-cgi?date)，它采用完全相同的格式参数，前面是 a `+`：

```
date +%Y%m%d%H%M%S 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:10:05.257

这也有效：

```
>>> z = time.strftime('%Y%m%d%H%M%S')
>>> file_ = open(z+'.txt', 'w')
>>> file_.close() 
```

这将创建 20130104160557.txt。

# forms - magento，编辑时表单中的文件字段出错

> ID：14155309
> 
> 赞同：1
> 
> 时间：2013-01-04T10:26:22.050
> 
> 标签：forms, validation, magento, input

我的表单包含一个用于图像上传的文件字段。

```
 protected function _prepareForm()
   {
       $form = new Varien_Data_Form();
       $this->setForm($form);
       $fieldset = $form->addFieldset('image_form', array('legend'=>'Image  Informations'));

        $fieldset->addField('img_label', 'text',
                       array(
                          'label' => 'Label',
                          'class' => 'required-entry',
                          'required' => true,
                          'name' => 'img_label',

                    ));
        $fieldset->addField('img_src', 'file',
                         array(
                             'label' => 'Upload Image',
                             'class' => 'required-entry',                      
                             'required' => false,
                             'name' => 'img_src',
                            ));

        $fieldset->addField('img_desc', 'textarea',
                    array(
                        'label'     => 'Description',
                        'required' => false,
                        'name' => 'img_desc',
                 ));

        $fieldset->addField('img_link', 'text',
                    array(
                        'label'     => 'Link',
                        'required' => false,
                        'name' => 'img_link',
                ));

 if ( Mage::registry('image_data') )
 {
    $form->setValues(Mage::registry('image_data')->getData());
  }
  return parent::_prepareForm();
 } 
```

我只将文件名保存在我的数据库中，而不是整个 URL，当我在编辑时，字段值只包含图像名称。如果我不做任何更改（图片）：

*   Magento 验证将该字段检测为空。

你能帮忙吗！
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:18:18.063

尝试更改`addField('img_src', 'file'...`为

```
$fieldset->addField('img_src', 'image', array(
      'label'     => Mage::helper('tag')->__('Upload Image'),
      'required'  => true,
      'name'      => 'img_src',
)); 
```

# javascript - 将文件作为字符串上传到 JavaScript 变量

> ID：14155310
> 
> 赞同：21
> 
> 时间：2013-01-04T10:26:27.917
> 
> 标签：javascript, forms, file-upload

客户端有没有办法仅使用 JavaScript 将 HTML 表单（例如 .txt 或 .csv 格式）的文件作为字符串上传到 JavaScript 变量？如果是这样，你能提供一个简单的例子吗？我不想使用任何 PHP。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-04T10:43:27.190

这是一个基于名为“myform”的表单的快速而肮脏的示例，该表单包含一个名为“myfile”的文件输入：

```
document.forms['myform'].elements['myfile'].onchange = function(evt) {
    if(!window.FileReader) return; // Browser is not compatible

    var reader = new FileReader();

    reader.onload = function(evt) {
        if(evt.target.readyState != 2) return;
        if(evt.target.error) {
            alert('Error while reading file');
            return;
        }

        filecontent = evt.target.result;

        document.forms['myform'].elements['text'].value = evt.target.result;
    };

    reader.readAsText(evt.target.files[0]);
}; 
```

这是相关的 HTML 表单：

```
<form id="myform">
  <p>
    <input id="myfile" name="files[]" multiple="" type="file" />
    <textarea id="text" rows="20" cols="40">nothing loaded</textarea>
  </p>
</form> 
```

和一个[jsfiddle](https://jsfiddle.net/vgepw79u/)来演示它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-11-28T13:29:43.900

[yent 答案的](https://stackoverflow.com/questions/14155310/upload-file-as-string-to-javascript-variable/14155586#14155586)这种变体管理多个上传并使用 jquery：

HTML：

```
<form id="myform">
  <p>
    <input id="myfile" name="files[]" multiple="" type="file" />
    <textarea id="text" rows="20" cols="40">nothing loaded</textarea>
  </p>
</form> 
```

脚本：

```
$("#myfile").on("change", function (changeEvent) {
  for (var i = 0; i < changeEvent.target.files.length; ++i) {
    (function (file) {               // Wrap current file in a closure.
      var loader = new FileReader();
      loader.onload = function (loadEvent) {
        if (loadEvent.target.readyState != 2)
          return;
        if (loadEvent.target.error) {
          alert("Error while reading file " + file.name + ": " + loadEvent.target.error);
          return;
        }
        console.log(loadEvent.target.result.length); // Your text is in loadEvent.target.result
      };
      loader.readAsText(file);
    })(changeEvent.target.files[i]);
  }
}); 
```

值得注意：

*   对于每个（并发）文件读取，您必须使用一个 FileReader。否则，您会看到类似的异常`The object is already busy reading`。
*   loadEvent 回调将以任意顺序调用，可能取决于上传的大小。
*   loadEvent 闭包将看到`i`结束循环的值。
*   FileReader 结果不是数组；他们没有 forEach。

这个[jsfiddle](https://jsfiddle.net/8375hbnq/)演示通过在更改处理程序中布置 div 来保留上传顺序。

# c# - 如何在收到错误 404 或超时时继续应用程序

> ID：14155311
> 
> 赞同：0
> 
> 时间：2013-01-04T10:26:30.343
> 
> 标签：c#, winforms

有没有办法让代码即使超时或 404 错误仍然继续...... HttpWebRequest 和 HttpWebResponse 案例：

这是我的代码：

```
string argumentTest = textBox1.text.Trim(); 

string[] lines = textBox1.Text.Split(new string[] { "\r\n", "\n" }, StringSplitOptions.None);
string newLine = ((char)13).ToString() + ((char)10).ToString();

 foreach (string vr in lines)
{
  string sourceCode = getSourceCode(vr);
  if (sourceCode != null)
  {
    //if this code is up
  } else {
    //if this code is down
  }

}

public static string getSourceCode(string url)
        {
            HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
            req.ContentType = "text/html; charset=ISO-8859-15";
            //ERROR in here 404 or timeout
            HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
            StreamReader sr = new StreamReader(resp.GetResponseStream()); 
            string sourceCode = sr.ReadToEnd();
            sr.Close();
            resp.Close();
            return sourceCode;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:28:16.487

[您可以使用try-catch](http://msdn.microsoft.com/en-us/library/0yd65esw%28v=vs.80%29.aspx)块处理异常，如果您必须清理分配的任何资源，您可以使用[finally](http://msdn.microsoft.com/en-us/library/zwc8s4fz%28v=vs.80%29.aspx)块，这两种情况下都会执行。

```
public static string getSourceCode(string url)
{
       string sourceCode = string.Empty;
       try
       { 
        HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
        req.ContentType = "text/html; charset=ISO-8859-15";
        //ERROR in here 404 or timeout
        HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
        StreamReader sr = new StreamReader(resp.GetResponseStream()); 
        sourceCode = sr.ReadToEnd();
        sr.Close();
        resp.Close();

      }
      catch(Exception ex){}
      return sourceCode;
} 
```

# linux - 使用 awk 搜索多个条件字符串

> ID：14155315
> 
> 赞同：6
> 
> 时间：2013-01-04T10:26:48.423
> 
> 标签：linux, unix, sed, awk

我有一组看起来像这样的数据

```
col1    col2    col3    col4
ABC1    DEF1    GHI1    cond1
ABC2    DEF2    GHI2    cond1-cond2
ABC3    DEF3    GHI3    cond2/cond1
ABC4    DEF4    GHI4    cond2 cond1
ABC5    DEF5    GHI5    cond4/cond1
ABC6    DEF6    GHI6    cond1
ABC7    DEF7    GHI7    mcond1
ABC8    DEF8    GHI8    cond2
ABC9    DEF9    GHI9    cond1 at 50
ABCa    DEFa    GHIa    con cond1
ABCb    DEFb    GHIb    no. cond1
ABCc    DEFc    GHIc    cond1 something
ABCc    DEFc    GHIc    Mcond1 
```

我正在尝试编写几个命令来根据“col4”分离数据以获得：

1.  一个包含字符串“cond1”的文件，在它之前或之后都有任何内容，除了“M”和“m”字母。我目前正在为此使用此命令（显然不排除 M 和 m）：

    ```
    awk 'BEGIN{IGNORECASE=1} $4 ~ /.cond1/ || $4 ~ /cond1./ ' /filepath.tab 
    ```

    也请不要第 4、第 9 和第 11 行数据包含“cond1”和其他字符串之间的空格，我希望将其包含在文件中。（命令中的“.”是否包含空格？）

2.  我写了一个命令来获取一个仅在“col4”中包含“cond1”的文件

    ```
    awk 'BEGIN{IGNORECASE=1} $4 ~ /^cond1$/ '  /filepath.tab 
    ```

    尽管我在结果中发现了这 2 个错误，但大多数数据都可以正常工作：

    ```
    ABC9    DEF9    GHI9    cond1 at 50
    ABCc    DEFc    GHIc    cond1 something 
    ```

谁能帮我用这两个命令？谢谢。

我正在寻找不包含任何重复的 3 个文件的输出，这是一个示例： File1（包含与 cond1 的所有组合）：

```
col1    col2    col3    col4
ABC2    DEF2    GHI2    cond1-cond2
ABC3    DEF3    GHI3    cond2/cond1
ABC4    DEF4    GHI4    cond2 cond1
ABC5    DEF5    GHI5    cond4/cond1
ABC9    DEF9    GHI9    cond1 at 50
ABCa    DEFa    GHIa    con cond1
ABCb    DEFb    GHIb    no. cond1
ABCc    DEFc    GHIc    cond1 something 
```

File2（仅包含 cond1）：

```
col1    col2    col3    col4
ABC1    DEF1    GHI1    cond1
ABC6    DEF6    GHI6    cond1 
```

File3（包含 file1 和 file2 中未包含的任何内容）：

```
col1    col2    col3    col4
ABC7    DEF7    GHI7    mcond1
ABC8    DEF8    GHI8    cond2
ABCc    DEFc    GHIc    Mcond1 
```

请注意，这 3 个文件的总行数与原始文件相同，如果这听起来相当复杂，我很抱歉，但我实际上就是这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:49:16.087

问题是第 4 列中有空格，并且您的文件未按预期格式化尝试`awk -F'\t' {print $4} file`并注意它可能不是您所期望的。

首先将文件转换为 CSV 格式`sed`

```
$ sed 's/\s\+/,/;s/\s\+/,/;s/\s\+/,/;' file
col1,col2,col3,col4
ABC1,DEF1,GHI1,cond1
ABC2,DEF2,GHI2,cond1-cond2
ABC3,DEF3,GHI3,cond2/cond1
ABC4,DEF4,GHI4,cond2 cond1
ABC5,DEF5,GHI5,cond4/cond1
ABC6,DEF6,GHI6,cond1
ABC7,DEF7,GHI7,mcond1
ABC8,DEF8,GHI8,cond2
ABC9,DEF9,GHI9,cond1 at 50
ABCa,DEFa,GHIa,con cond1
ABCb,DEFb,GHIb,no. cond1
ABCc,DEFc,GHIc,cond1 something
ABCc,DEFc,GHIc,Mcond1 
```

这只会将前 3 个空白组转换为逗号，从而根据需要留下 col4。要将更改存储在文件中，请使用以下`-i`选项：

```
sed -i 's/\s\+/,/;s/\s\+/,/;s/\s\+/,/;' file 
```

`,`现在可以使用字段分隔符。

```
awk 'BEGIN{FS=",";OFS="\t"} NR==1{print $1,$2,$3,$4} $4~/cond1./|| $4~/[^mM]cond1/{print $1,$2,$3,$4}' file
col1    col2    col3    col4
ABC2    DEF2    GHI2    cond1-cond2
ABC3    DEF3    GHI3    cond2/cond1
ABC4    DEF4    GHI4    cond2 cond1
ABC5    DEF5    GHI5    cond4/cond1
ABC9    DEF9    GHI9    cond1 at 50
ABCa    DEFa    GHIa    con cond1
ABCb    DEFb    GHIb    no. cond1
ABCc    DEFc    GHIc    cond1 something

$ awk 'BEGIN{FS=",";OFS="\t"} NR==1{print $1,$2,$3,$4} $4~/^cond1$/{print $1,$2,$3,$4}' file 
col1    col2    col3    col4
ABC1    DEF1    GHI1    cond1
ABC6    DEF6    GHI6    cond1

$ awk 'BEGIN{FS=",";OFS="\t"} $4!~/cond1/ || $4~/[Mm]cond1/{print $1,$2,$3,$4}' file
col1    col2    col3    col4
ABC7    DEF7    GHI7    mcond1
ABC8    DEF8    GHI8    cond2
ABCc    DEFc    GHIc    Mcond1 
```

只需重定向以保存新文件`awk '{...}' > file1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T10:38:51.267

由于您的字段是制表符分隔的，请`FS="\t"`在`BEGIN`块中使用。你的条件也不合适。所以我改变了它。

```
awk 'BEGIN{IGNORECASE=1; FS="\t"; } $4 ~ /cond1/ && $4 !~ /mcond1|cond1m/' data 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T04:45:31.617

您只需通过一次即可完成任务。像这样运行：

```
awk -f script.awk file 
```

内容`script.awk`：

```
BEGIN {
    FS="\t"
}

NR==1 {
    r=$0
    next
}

{
    i = ($4 == "cond1" ? 2 : ($4 ~ /cond1/ && $4 !~ /[Mm]cond1/ ? 1 : 3))
    print (!a[i]++ ? r ORS : "") $0 > "file" i ".txt"
} 
```

结果`grep . file[1-3].txt`：

```
file1.txt:col1  col2    col3    col4
file1.txt:ABC2  DEF2    GHI2    cond1-cond2
file1.txt:ABC3  DEF3    GHI3    cond2/cond1
file1.txt:ABC4  DEF4    GHI4    cond2 cond1
file1.txt:ABC5  DEF5    GHI5    cond4/cond1
file1.txt:ABC9  DEF9    GHI9    cond1 at 50
file1.txt:ABCa  DEFa    GHIa    con cond1
file1.txt:ABCb  DEFb    GHIb    no. cond1
file1.txt:ABCc  DEFc    GHIc    cond1 something
file2.txt:col1  col2    col3    col4
file2.txt:ABC1  DEF1    GHI1    cond1
file2.txt:ABC6  DEF6    GHI6    cond1
file3.txt:col1  col2    col3    col4
file3.txt:ABC7  DEF7    GHI7    mcond1
file3.txt:ABC8  DEF8    GHI8    cond2
file3.txt:ABCc  DEFc    GHIc    Mcond1 
```

或者，这是单线：

```
awk -F "\t" 'NR==1 { r=$0; next } { i = ($4 == "cond1" ? 2 : ($4 ~ /cond1/ && $4 !~ /[Mm]cond1/ ? 1 : 3)); print (!a[i]++ ? r ORS : "") $0 > "file" i ".txt" }' file 
```

# android - 在 Google Play 上更新应用程序时出现指纹不匹配错误

> ID：14155322
> 
> 赞同：2
> 
> 时间：2013-01-04T10:27:32.417
> 
> 标签：android

我正在开发一个应用程序。我用钛 appcelerator 开发了第一个版本，并将其安装在 google play 上。但我用 Eclipse 开发了它的第二个版本。现在，当我尝试将其上传到 google play 时，它给出了指纹不匹配的错误，这意味着第一个版本的证书与第二个版本的证书不匹配。谁能告诉我钛应用加速器使用哪些证书以及我需要在第二版中进行哪些更改，以便我可以将其上传到市场上。

谢谢

# variables - 将值转发到下一个着色器

> ID：14155323
> 
> 赞同：0
> 
> 时间：2013-01-04T10:27:35.117
> 
> 标签：variables, glsl, shader

我想将值从顶点着色器传递到片段着色器。这是我现在要做的。

```
#version 150

in vec2 texcoord;
out vec2 f_texcoord;

void main()
{
    f_texcoord = texcoord;
} 
```

如何在不定义两个变量名并最终摆脱该行的情况下达到相同`texcoord`的`f_texcoord`行为`f_texcoord = texcoord;`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:39:41.707

在 GLSL 中，将属性从顶点着色器传递到片段着色器的唯一方法就是您现在正在做的事情 - 特别是纹理坐标，因为这些通常会更改每个顶点（在大多数情况下与位置或法线一起）。

对于其他属性，例如颜色或灯光位置，您可以声明“全局”变量，而不是通过添加`uniforms`两个着色器都可以使用的变量，而无需将它们作为输入输出对从顶点传递到片段。Uniforms 通常是在一批顶点上操作的常量，而不是改变每个顶点的值。

# c - C中解析器组合器的更好方法？

> ID：14155327
> 
> 赞同：6
> 
> 时间：2013-01-04T10:27:47.500
> 
> 标签：c, parsing, compiler-construction, parser-combinators

我正在尝试从头开始引导（一个子集）C，而不使用额外的依赖项（解析器生成器、库等）。我还想利用[**解析器组合**](http://en.wikipedia.org/wiki/Parser_combinator)器的想法，这是函数式编程中的一项绝妙技术。我想以简洁实用的方式将函数世界中的这个想法借用到程序 C 中。

我尝试为以下玩具语法实现一些必要的解析器组合器，这也是Simon Peyton Jones的《*实现功能语言 - 教程》一书中的一个示例。*

```
greeting -> hg person "!"
hg       -> "hello"
          | "goodbye" 
```

`person`任何以字母开头的标记在哪里。例如，令牌列表

```
["goodbye", "James", "!"] 
```

被解析成

```
[(("goodbye", "James"), ["!"])] 
```

（这本书使用 Haskell，很难让它与语言无关，但你明白了 :-)

我用 C 实现了这个，你可以在这里查看代码：[https ://gist.github.com/4451478](https://gist.github.com/4451478)

这个实现需要 200 多行 C 代码，这远远超过了书中所写的大约 20 行 Haskell 代码。所以我不确定我是否在 C 中做解析器组合器的正确轨道，以及是否有任何可能的改进。欢迎任何建议。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-09-02T01:57:38.033

我自己正在研究这个主题，我正在关注mpc 的作者[Daniel Holden的工作，](https://github.com/orangeduck/mpc) **mpc**是一个编写得非常好的C**解析器组合**库，除其他外，它允许在 C 代码中嵌入**EBNF**和**Regex ：**

```
 mpc_parser_t *Expr  = mpc_new("expression");
  mpc_parser_t *Prod  = mpc_new("product");
  mpc_parser_t *Value = mpc_new("value");
  mpc_parser_t *Maths = mpc_new("maths");

  mpca_lang(MPCA_LANG_PREDICTIVE,
    " expression : <product> (('+' | '-') <product>)*; "
    " product : <value>   (('*' | '/')   <value>)*;    "
    " value : /[0-9]+/ | '(' <expression> ')';         "
    " maths : /^/ <expression> /$/;                    "
    Expr, Prod, Value, Maths, NULL); 
```

Daniel Holden 也写了一本在线[书籍](http://www.buildyourownlisp.com)，他在其中展示了使用他的库编写一门新语言是多么容易。这本书的标题是“构建你自己的 Lisp”。我认为您会发现这对您的项目非常有用。最后但同样重要的是，在库的示例中，有一个现成的程序可以为 C 的子集生成解析器。**;-)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T10:48:11.493

尝试[Cesium3](https://github.com/wbhart/Cesium3/tree/combinators)，它是 C 的解析器组合器的实现。（LLVM。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-01T18:09:30.083

在 C 中实现解析器组合器也是我感兴趣的一个话题，最近，我用 C 写了一个解析器组合器：[https ://github.com/petercommand/cparc](https://github.com/petercommand/cparc)

以下是我的代码中的一个测试用例，它尝试将逗号分隔的数字解析为数字列表。我使用解析器列表（并通过在代码中调用 parser_chain 从“解析器列表”生成解析器）来模仿 Haskell 中的“do notation”，尽管没有那么优雅。

```
parser_dp_return test_parser7_rest_dp(dynamic_parser_closure* ctx, input_t input) {
  parser_dp_return dp_ret;
  dp_ret.obj = ctx->objs[1]->obj;
  dp_ret.status = PARSER_NORMAL;
  dp_ret.i = input;
  dp_ret.discard_obj_callback = NULL;
  return dp_ret;
}

parser_dp_return test_parser7_full_dp(dynamic_parser_closure* ctx, input_t input) {
  parser_dp_return dp_ret;
  list* result = list_new();
  list_push_back(result, ctx->objs[0]->obj);//num
  if(ctx->objs[1] && ctx->objs[1]->obj) {
    list_append(result, ctx->objs[1]->obj);
  }
  dp_ret.status = PARSER_NORMAL;
  dp_ret.i = input;
  dp_ret.discard_obj_callback = (void (*)(void *))&list_delete;

  dp_ret.obj = result;
  return dp_ret;
}

bool test_parser7() {//comma separated values
  parser* number = num();
  parser* comma = symbol(',');
  parser* rest_parser = parser_chain_final(test_parser7_rest_dp);
  list* parser_chain_list = list_new();
  list_push_back(parser_chain_list, comma);//ctx 0
  list_push_back(parser_chain_list, number);//ctx 1
  list_push_back(parser_chain_list, rest_parser);

  parser* rest = parser_chain(parser_chain_list);
  list_delete(parser_chain_list);
  parser* many_rest = many(rest);

  list* parser_chain_full = list_new();
  list_push_back(parser_chain_full, number);//ctx 0
  list_push_back(parser_chain_full, many_rest);//ctx 1
  parser* full_parser = parser_chain_final(test_parser7_full_dp);
  list_push_back(parser_chain_full, full_parser);
  parser* final = parser_chain(parser_chain_full);

  const char* input = "1,20,300,4000,50000";
  input_t i;
  input_init(&i, input);
  parser_dp_return dp_ret = parse(final, i);
  parser_delete(number);
  parser_delete(comma);
  parser_delete(rest_parser);
  parser_delete(rest);
  parser_delete(many_rest);
  parser_delete(full_parser);
  parser_delete(final);
  bool result = true;
  test_true(&result, dp_ret.status == PARSER_NORMAL);
  list* l = dp_ret.obj;
  list_item* li = l->head;
  test_true(&result, ptr_to_int(li->item) == 1);
  li = li->next;
  test_true(&result, ptr_to_int(li->item) == 20);
  li = li->next;
  test_true(&result, ptr_to_int(li->item) == 300);
  li = li->next;
  test_true(&result, ptr_to_int(li->item) == 4000);
  li = li->next;
  test_true(&result, ptr_to_int(li->item) == 50000);
  return result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T19:51:01.850

我认为你的 C 代码对于你正在做的事情来说相当紧凑。Haskell 对这类事情更紧凑。从闭包开始。您需要在周围范围内关闭函数才能执行此操作，并且您的代码会部分模拟这些函数。Haskell 对列表有简洁的表示法，并且正确使用它们对于像 AST 这样的树非常好，而 C 要求您构建自己的 AST 库并使用“->left”和“->right”，否则尝试将它们包装在简洁的宏。

即使在我见过的 C 语言实现以及我自己编写的未完善的 C++ 实现中，我认为解析器组合器是递归下降代码的令人满意的替代方案，递归下降代码是我过去选择的解析方法。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-01-04T10:37:36.513

想知道，为什么不使用 Yacc 或 Bison 之类的东西呢？

我对 Erlang 中的 LALR 语法有一些经验，看起来对我很有用。更少的代码行。

干杯...

[http://www.erlang.org/doc/man/yecc.html](http://www.erlang.org/doc/man/yecc.html)

# sql-server - 从 SQL Server 2012 存储过程发送电子邮件

> ID：14155335
> 
> 赞同：2
> 
> 时间：2013-01-04T10:28:15.817
> 
> 标签：sql-server, stored-procedures, sql-server-2012, database-mail

我们需要能够通过 SMTP 从存储过程 (SQL Server 2012) 发送电子邮件。

我们需要保留对电子邮件“发件人”地址和“显示名称”的控制权，所以我认为这排除了数据库邮件，因为这些在创建的配置文件中是硬设置的（最好能超越！有人知道怎么做吗？）

我们还有哪些其他选择？

谢谢保罗

更新：在代码中创建所需的临时数据库邮件配置文件，使用它发送一次所需的电子邮件，然后删除配置文件会很愚蠢吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T14:11:46.067

从 2008 年起，您可以创建基本配置文件，然后使用`@from_address/reply_to`;覆盖详细信息

```
EXEC msdb.dbo.sp_send_dbmail
    @profile_name = 'my profile',
    ...
    @subject = 'The Spice must flow',
    @from_address = '"Bob Smith" <xxx@yyy.com>',
    @reply_to = 'xxx@yyy.com' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:56:12.667

这是一种选择。创建一个 SSIS 包。

允许您的存储过程将电子邮件信息排队到数据库表中。您的 SSIS 包将查询此表并根据表中每一行的表值发送一封电子邮件，并在电子邮件发送后删除每条记录（或将其标记为已处理，以便您保留已发送电子邮件的记录）。然后安排一个 SQL 作业，在最适合您要求的任何时间间隔内运行您的包。

# ios - 父视图控制器调用自身而不是子视图

> ID：14155336
> 
> 赞同：0
> 
> 时间：2013-01-04T10:28:17.720
> 
> 标签：ios, uiviewcontroller, addsubview

我正在（试图）实现一个主视图控制器容器，首先实例化介绍视图控制器，然后再实例化实际的应用程序视图控制器。但我无法让它工作，我觉得我错过了一些非常基本的东西。介绍视图控制器在 initWithFrame 的介绍视图中加载：

使用以下界面：

```
@interface ViewControllerMain : UIViewController
@property (strong, nonatomic) ViewControllerIntroduction *viewControllerIntroduction;
@end 
```

以及以下实现

```
@implementation ViewControllerMain

- (void)loadView
{
    //  Instantiate the view controller for the adventure view
    self.viewControllerIntroduction = [ [ [ ViewControllerIntroduction alloc] init ] autorelease ];
}

- (void)viewDidLoad
{
    [ super viewDidLoad ];

    //  Instantiate the view controller for the introduction view
    [ self addChildViewController: self.viewControllerIntroduction ];
    [ self.view addSubview: self.viewControllerIntroduction.view ];
    [ self.viewControllerIntroduction didMoveToParentViewController: self ];
}

@end 
```

当我跳过 addSubView 语句时，它会返回到 addChildViewController 语句。

我一直在努力解决这个问题几个小时，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:39:30.090

`-loadView`只有在显式创建视图控制器 ( `self.view`)的视图时，才应覆盖该方法。删除您的`-loadView`方法并将初始化移动`self.viewControllerIntroduction`到`-viewDidLoad`。

# javascript - 如何调整 CKEditor 的大小以适合其父 div

> ID：14155337
> 
> 赞同：6
> 
> 时间：2013-01-04T10:28:19.510
> 
> 标签：javascript, jquery, ckeditor

我有一个放置在父 div 中的 CKeditor。让 CKEditor 完全适合 div 并在 div 调整大小时调整大小的最佳方法是什么？如果可能的话，我更喜欢不涉及 jQuery 的解决方案。如果这是不可能的解决方案，使用 jQuery 就可以了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T10:35:38.087

```
var editor = CKEDITOR.replace( 'editor' ); 
```

...

然后，如果您选择，请执行以下操作：

```
editor.resize($("#elem").width(),$("#elem").height()); 
```

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:36:15.723

调用 ckeditor 时使用 width 属性。

```
<script type="text/javascript">
//<![CDATA[

CKEDITOR.replace( 'page_content',
{
    toolbar : 'MyToolbar',
    width : '100%'

});

//]]>
</script> 
```

由于初始化编辑器的调用是使用 jquery 完成的，因此这是最好的方法。

编辑：这将导致 ckeditor 在 div 宽度也发生变化时自动调整大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-23T00:35:17.347

如果有人现在需要这个，我将它添加到我的 css 文件中：

```
#cke_id_text {
  width: fit-content!important;
} 
```

# php - PHP：如何在 foreach 中获取数组以输出 foreach

> ID：14155340
> 
> 赞同：-1
> 
> 时间：2013-01-04T10:28:31.710
> 
> 标签：php, mysql, codeigniter, foreach

我有自动查询，我使用代码点火器，结构表组织有字段 ID 和名称。

```
 $get_organization = $this->db->query("SELECT id,name FROM organization")->result_array(); 
```

如果我 print_r 变量 $get_organization 如下：

```
 Array (
         [0] => Array
          ( 
             [id] => 1
             [name] => orgone
          )

         [1] => Array
          (
             [id] => 2
             [name] => orgtwo
          )
   ) 
```

对于我得到自动总和，我编写如下代码：

```
 foreach($get_organization as $bit){
     $id=$bit['id'];
     $name=preg_replace("/[^a-zA-Z0-9\-]/", "", $bit['name']);
     $getcabang[] = "SUM(CASE WHEN org_id = '$id' THEN total END) as $name";     
 }

 $cabang = implode(',',$getcabang); 
```

并且在表中正在寻找搜索结果是带有字段**id, total, tanggal_laporan, org_id 的****laporan**。

 **```
 $query = $this->db->query("SELECT id, $cabang, tanggal_laporan FROM laporan GROUP BY tanggal_laporan")->result_array(); 
```

然后如果我 print_r 变量 $query 我得到如下结果：

```
Array (
     [0] => Array
      ( 
         [orgone] => 218000
         [orgtwo] => 112000
         [tanggal_laporan] => 2012-11-04
      )

     [1] => Array
      (
         [orgone] => 198000
         [orgtwo] => 411000
         [tanggal_laporan] => 2012-11-05
      )

     [2] => Array
      (
         [orgone] => 513000
         [orgtwo] => 147000 
         [tanggal_laporan] => 2012-11-06
      )
 ) 
```

所以我的问题，我想自动生成如下：

```
$array_transform = array(
   [orgone] => "218000, 198000, 411000",
   [orgtwo] => "112000, 411000, 147000",
   [tanggal_laporan] => "2012-11-04, 2012-11-05, 2012-11-06",
); 
```

当它再出现一行表格组织时，例如一行名称=orgthree，所以我想要的结果是：

```
$array_transform = array(
   [orgone] => "218000, 198000, 411000",
   [orgtwo] => "112000, 411000, 147000",
   [orgthree] => "0, 0, 0",
   [tanggal_laporan] => "2012-11-04, 2012-11-05, 2012-11-06",
); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:31:47.967

更改问题后更新的答案。这会将字段处理成您想要的结构，而无需对字段名称进行硬编码。

**[演示](http://codepad.org/KL6Sdd9r)**

```
$array_transform = array();

foreach($array_from_mysql as $row)
{
    foreach($row as $field => $value)
    {
        if(isset($array_transform[$field]))
        {
            $array_transform[$field][] = $value;
        }
        else
        {
            $array_transform[$field] = array($value);
        }
    }
}

print_r($array_transform); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T10:31:00.310

```
$result = array();
foreach ($array_from_mysql as $sub_array) {
    $result['total'][] = $sub_array['total'];
    $result['tanggal_laporan'][] = $sub_array['tanggal_laporan'];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T10:32:46.470

如果它来自 SQL 查询（如变量名所暗示的那样），您可能可以使用`GROUP BY`查询`GROUP_CONCAT`来从数据库中获取所需格式的数据，而 PHP 不需要做任何聪明的事情。

我对实际查询无能为力，因为您没有向我们展示原始查询，但请在此处的 MySQL 手册中阅读更多信息：http: [//dev.mysql.com/doc/refman/ 5.0/en//group-by-functions.html](http://dev.mysql.com/doc/refman/5.0/en//group-by-functions.html)

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T10:30:46.593

这应该有效：

```
<?php
    $array_transform = array();
    foreach ($array_from_mysql as $row) {
        foreach ($row as $name => $value) {
            if (!isset($array_transform[$name])) {
                $array_transform[$name] = array();
            }
            $array_transform[$name][] = $value;
        }
    }
?> 
```**

# c# - 在 MVC 3 的某些页面上不显示菜单？

> ID：14155355
> 
> 赞同：2
> 
> 时间：2013-01-04T10:29:20.607
> 
> 标签：c#, asp.net-mvc-3, razor

我正在开发一个 MVC 3 网站。我在网站上有一个 jquery 菜单。并非所有页面都使用菜单。所以登录页面或注销如果没有授权页面没有菜单。我通过在我的 _Layout 页面中有一个如下所示的 RenderSection 来做到这一点。

```
 @RenderSection("Menu", required: false) 
```

然后在应该有菜单的页面中，我包含以下部分：

```
@section Menu{
    <ul id="menu" style="width: 150px; height: 150px; margin-right: 10px; z-index: 9999;">
        <li>@Html.ActionLink("Dashboard", "Dashboard", "Home", null, new { @class = "menu-text" })</li>
        <li>@Html.ActionLink("History", "ViewHistory", "History", null, new { @class = "menu-text" })</li>
        <li><a class="menu-text" href="#">Reports</a>
            <ul style="z-index: 9999;">
                <li>@Html.ActionLink("File Report", "ViewFileReport", "Reports", null, new { @class = "menu-text" })</li>
                <li><a class="menu-text" href="#">New Files</a></li>
                <li><a class="menu-text" href="#">Old Files</a></li>
            </ul>
        </li>
        <li><a class="menu-text" href="#">Admin</a>
            <ul style="z-index: 9999;">
                <li>@Html.ActionLink("Change Password", "ChangePassword", "Home", null, new { @class = "menu-text" })</li>
            </ul>
        </li>
        <li>@Html.ActionLink("Log Off", "LogOff", "Home", null, new { @class = "menu-text" })</li>
    </ul>
} 
```

当我现在添加到菜单并更改内容并添加更多页面时，我意识到在我需要的所有页面上都有这个 RenderSection，但不在我的登录页面或第一个登陆页面上，因为我必须在 8 中编辑它/目前有 9 个地方，而且只会增加。什么是实现我想要的更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T10:37:34.923

是的，你想把你的菜单标记放在你的 中`_Layout.cshtml`，但只在需要时才渲染它。

您可以`bool`在您的值中输入一个值`ViewBag`以打开需要它的页面中的菜单。

在您的控制器操作中，输入：

```
ViewBag.ShowMenu = true; 
```

然后`_Layout.cshtml`你可以输入这样的条件：

```
@if ( ViewBag.ShowMenu == true )
{
  <ul id="menu" ... your menu markup here
  </ul>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:38:20.883

您可以将其放入文件`App_Code`夹中的文件中，如下所示：

`App_Code\Helpers.cshtml`：

```
@helper Menu()
{
    <ul id="menu" style="width: 150px; height: 150px; margin-right: 10px; z-index: 9999;">
        <li>@Html.GetPageHelper().ActionLink("Dashboard", "Dashboard", "Home", null, new { @class = "menu-text" })</li>
        <li>@Html.GetPageHelper().ActionLink("History", "ViewHistory", "History", null, new { @class = "menu-text" })</li>
        <li><a class="menu-text" href="#">Reports</a>
            <ul style="z-index: 9999;">
                <li>@Html.GetPageHelper().ActionLink("File Report", "ViewFileReport", "Reports", null, new { @class = "menu-text" })</li>
                <li><a class="menu-text" href="#">New Files</a></li>
                <li><a class="menu-text" href="#">Old Files</a></li>
            </ul>
        </li>
        <li><a class="menu-text" href="#">Admin</a>
            <ul style="z-index: 9999;">
                <li>@Html.GetPageHelper().ActionLink("Change Password", "ChangePassword", "Home", null, new { @class = "menu-text" })</li>
            </ul>
        </li>
        <li>@Html.GetPageHelper().ActionLink("Log Off", "LogOff", "Home", null, new { @class = "menu-text" })</li>
    </ul>
} 
```

并为您的项目添加另一个类，用于从以下代码中`GetPageHelper()`获取`HtmlHelper<T>`实例所需的方法`App_Code`：

```
public static class PageHelper
{
    public static HtmlHelper<object> GetPageHelper(this System.Web.WebPages.Html.HtmlHelper html)
    {
        return ((WebViewPage)WebPageContext.Current.Page).Html;
    }

    public static UrlHelper GetUrlHelper(this System.Web.WebPages.Html.HtmlHelper html)
    {
        return ((WebViewPage) WebPageContext.Current.Page).Url;
    }
} 
```

现在您可以在视图或布局中使用这样的菜单：

```
@Helpers.Menu() 
```

# php - PHP从数组中删除除x之外的所有内容

> ID：14155358
> 
> 赞同：1
> 
> 时间：2013-01-04T10:29:34.703
> 
> 标签：php, arrays

有没有一种明智的方法可以从我指定的数组 APART 中删除所有字段？

我在想一些`array_diff`可以工作的东西，但我只想列出我想允许的字段键，然后说“删除其他所有内容”。这样做的最佳方法是什么？

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T10:41:21.653

如果复制数组没问题， [array_intersect_key()应该可以工作。](http://php.net/manual/en/function.array-intersect-key.php)

```
$arr = array(
    'A' => 'alpha',
    'B' => 'bravo',
    'C' => 'charlie',
    'D' => 'delta'
);

$allowedKeys = array('B', 'C');

print_r(array_intersect_key($arr, array_flip($allowedKeys)));

# Array
# (
#    [B] => bravo
#    [C] => charlie
# ) 
```

否则，您可以使用 foreach 循环：

```
foreach ($arr as $key => $value) {
    if (!in_array($key, $allowedKeys)) {
        unset($arr[$key]);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:38:07.790

试试下面的代码..这可能对你有用

```
foreach($array as $key=>&$value) {
        if($key!='yourx') {
            unset($array[$key])
        }
    } 
```

# iphone - 转换为浮点数并计算

> ID：14155360
> 
> 赞同：0
> 
> 时间：2013-01-04T10:29:38.883
> 
> 标签：iphone, objective-c, ios

我有一个包含多个数字和运算符的字符串

@ `"5+4-9/10"`.

如何从中得到结果？

我想在我正在使用的计算器中使用它。当按下数字或运算符时，我将不得不动态显示结果。

**我在android**中使用了 arity jar 文件。但我无法在**iPhone**中实现类似的目标。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T10:50:34.430

那这个呢 -

```
NSString *formula = @"1+5*6";
NSExpression *exp = [NSExpression expressionWithFormat:formula];
NSNumber *resultForCustomFormula = [exp expressionValueWithObject:nil context:nil];
NSLog(@"%f", [resultForCustomFormula floatValue]); 
```

**编辑：** 现在我考虑了您的要求并使用了`NSScanner`您不会相信在[Borrrden 先生](https://stackoverflow.com/users/1155387/borrrden)`NSScanner`建议我使用它之前我没有使用它并且我发现它很棒。见下面的方法 -

```
-(NSMutableString *)formatString:(NSString *)formula
{
    // Let's check if there any wrong (.) value exm: 1/.2 or .7+3 
    // 1/0.2 and 0.7+3 are okay but above are incorrect so first fix them

    NSString *str = formula;
    NSInteger c = 0;
    for(int i=0; i<[str length]; i++)
    {

        if([[NSString stringWithFormat:@"%c",[str characterAtIndex:i]] isEqualToString:@"+"] ||
           [[NSString stringWithFormat:@"%c",[str characterAtIndex:i]] isEqualToString:@"-"] ||
           [[NSString stringWithFormat:@"%c",[str characterAtIndex:i]] isEqualToString:@"/"] ||
           [[NSString stringWithFormat:@"%c",[str characterAtIndex:i]] isEqualToString:@"*"])
        {
            if([str length] > i+1)
            {
                if([[NSString stringWithFormat:@"%c",[str characterAtIndex:i+1]] isEqualToString:@"."])
                {
                    formula = [formula stringByReplacingCharactersInRange:NSMakeRange(i+1+c, 1) withString:@"0."];
                    c++;
                }
            }
        }
    }

    // Now we will convert all numbers in float

    NSString *aString;
    float aFloat;
    NSMutableString *formattedString = [[NSMutableString alloc]init];

    NSScanner *theScanner = [NSScanner scannerWithString:formula];
    while ([theScanner isAtEnd] == NO) 
    {

        if([theScanner scanFloat:&aFloat])
        {
            [formattedString appendString:[NSString stringWithFormat:@"%f",aFloat]];
        }

        if([theScanner scanUpToCharactersFromSet:[NSCharacterSet decimalDigitCharacterSet] intoString:&aString])
        {
            [formattedString appendString:aString];
        }
    }
    return formattedString;
} 
```

这会将**(2.222/.4)+9999-7+0.7*.13**转换为**(2.222000/0.400000)+9999.000000-7.000000+0.700000*0.130000**。
只需在使用之前调用此方法`NSExpression`。

```
NSString *formula = @"(2.222/.4)+9999-7+0.7*.13";
NSString *formattedString = [self formatString:formula];
NSExpression *exp = [NSExpression expressionWithFormat:formattedString];
NSNumber *resultForCustomFormula = [exp expressionValueWithObject:nil context:nil];
NSLog(@"Result = %f", [resultForCustomFormula floatValue]);

//OutPut: Result = 9997.646484 
```

***注意：我并不是说它适用于所有公式字符串。可能在某些情况下它不起作用。但它适用于一般方程。***

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T10:37:00.183

`Note that :` **您必须至少传递一个浮点值**。

我知道这不是最好的方法，但是这样的东西可以为你工作。

```
NSString *formula = @"5+4-9/10";
NSString *str = [formula lastPathComponent];
formula = [formula stringByReplacingOccurrencesOfString:str withString:[NSString stringWithFormat:@"%@.0",str]];
NSString *strCal=[NSString stringWithString:formula];
NSExpression *exp=[NSExpression expressionWithFormat:strCal];
float result=[[exp expressionValueWithObject:nil context:nil] floatValue];
NSLog(@"result:%f",result); 
```

您可以使用[GCMathParser](http://apptree.net/parser.htm)或[DDMathParser](https://github.com/davedelong/DDMathParser)。

不知道这是否是最有效的方法，但还是写来帮助你......！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-15T16:12:25.650

您可以将“所有”数字解析为浮动：

```
NSMutableString *numericExpression = [NSMutableString stringWithString:@"4+3/2-7/4"];

NSMutableString *nExp=[NSMutableString stringWithString:@""];
BOOL innum=false;
BOOL dotfound=false;

for (NSInteger charIdx=0; charIdx<numericExpression.length; charIdx++){
        NSString *substr=[NSString stringWithFormat:@"%C",[numericExpression characterAtIndex:charIdx]];
        if (isdigit([numericExpression characterAtIndex:charIdx])) {
            // in number
            innum=true;
        }else if ([substr isEqualToString:@"."]){
            // dot found ...
            innum=true;
            dotfound=true;
        }else{
            // not in number
            if (innum && dotfound) {
                NSLog(@"all good (*).*");
            }else if(innum && !dotfound){
                NSLog(@"adding .0");
                [nExp appendString:@".0"];
            }
            innum=false;
            dotfound=false;
        }
    [nExp appendString:substr];
    NSLog(@"%@",nExp);
}

NSExpression *expression = [NSExpression expressionWithFormat:nExp];
NSNumber *result = [expression expressionValueWithObject:nil context:nil];
 NSLog(@"calc %@ = %@",nExp,result); 
```

# playframework - Play 框架中的 PDF 数字签名

> ID：14155361
> 
> 赞同：2
> 
> 时间：2013-01-04T10:29:47.280
> 
> 标签：playframework, pdf-generation, digital-signature, playframework-1.x

我正在使用播放框架（v1.2）并在播放框架中使用 PDF 模块来呈现 PDF。我想使用 renderPDF() 方法在 PDF 中实现数字签名。

我浏览了选项，但找不到任何与签名相关的东西。

从 Google 搜索 play 使用 YaHP 转换器将 HTML 转换为 PDF，并且 YaHP 可以选择提供与签名相关的属性。

我们是否可以选择在 Play 中使用 PDF 模块来实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:29:21.170

这可以在 Play 框架中轻松完成，只需在 application.conf 中配置以下属性

```
yahp.USE_PDF_SIGNING=true
yahp.PDF_SIGNING_PRIVATE_KEY_FILE=<keystore file>
yahp.PDF_SIGNING_KEYSTORE_PASSWORD=<password>
yahp.PDF_SIGNING_PRIVATE_KEY_PASSWORD=<password> 
```

Play 将在生成 PDF 时读取此属性。

# c++ - 将 std::cout 的副本重定向到文件

> ID：14155364
> 
> 赞同：7
> 
> 时间：2013-01-04T10:29:56.873
> 
> 标签：c++

我需要将std::cout**的副本重定向到文件。**即我需要在控制台和文件中查看输出。如果我使用这个：

```
// redirecting cout's output
#include <iostream>
#include <fstream>
using namespace std;

int main () {
  streambuf *psbuf, *backup;
  ofstream filestr;
  filestr.open ("c:\\temp\\test.txt");

  backup = cout.rdbuf();     // back up cout's streambuf

  psbuf = filestr.rdbuf();   // get file's streambuf
  cout.rdbuf(psbuf);         // assign streambuf to cout

  cout << "This is written to the file";

  cout.rdbuf(backup);        // restore cout's original streambuf

  filestr.close();

  return 0;
} 
```

然后我将字符串写入文件，但我在控制台中看不到任何内容。我该怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-04T10:55:45.730

您可以做的最简单的事情是创建一个输出流类来执行此操作：

```
#include <iostream>
#include <fstream>

class my_ostream
{
public:
  my_ostream() : my_fstream("some_file.txt") {}; // check if opening file succeeded!!
  // for regular output of variables and stuff
  template<typename T> my_ostream& operator<<(const T& something)
  {
    std::cout << something;
    my_fstream << something;
    return *this;
  }
  // for manipulators like std::endl
  typedef std::ostream& (*stream_function)(std::ostream&);
  my_ostream& operator<<(stream_function func)
  {
    func(std::cout);
    func(my_fstream);
    return *this;
  }
private:
  std::ofstream my_fstream;
}; 
```

请参阅此 ideone 链接以了解此代码的实际运行情况：http://ideone.com/T5Cy1M[我](http://ideone.com/T5Cy1M) 目前无法检查文件输出是否正确完成，尽管这应该不是问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T10:56:00.010

你也可以使用`boost::iostreams::tee_device`. 有关示例，请参见[C++“hello world”Boost tee 示例程序](https://stackoverflow.com/questions/999120/c-hello-world-boost-tee-example-program)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T10:43:33.960

您的代码不起作用，因为它`streambuf`决定了写入流的输出的最终位置，而不是流本身。

C++ 没有任何支持将输出定向到多个目的地的流或流缓冲区，但您可以自己编写一个。

# java - 向 127.0.0.1:8084/ (Tomcat) 发送请求大约需要 1000 毫秒，而向 127.0.0.1/ (Wamp) 发送请求大约需要 20 毫秒

> ID：14155365
> 
> 赞同：1
> 
> 时间：2013-01-04T10:29:57.873
> 
> 标签：java, http, tomcat, servlets, post

```
 HttpParams params = new BasicHttpParams();
    params.setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);
    HttpClient httpclient = new DefaultHttpClient(params);
    HttpPost httppost = new HttpPost(address);

    try {
        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);
    } catch (IOException ex) {
        logger.log(Level.SEVERE, null, ex);
    } 
```

我正在使用此代码片段向驻留在本地主机上的 Apache Tomcat 上的 servlet 发送 HTTP POST 请求。对 Tomcat 地址的发布请求（不带任何参数），即`http://127.0.0.1:8084`大约需要1000毫秒。虽然将相同的请求发送到地址的 Apache（wamp 服务器）`http://127.0.0.1`只需要 20 毫秒。

我已经尝试过使用两个 Http 版本（1.0/1.1），但是响应时间没有效果。

任何可能出错的线索？或者如何提高这个性能？还是Tomcat本身太慢了，我对此问题无能为力？（但是浏览器能够加载 servlet 而没有任何明显的网络延迟！）

**附加信息：**

这段代码本身在一个 Servlet 中，它基本上什么都不做，只是发出这个请求。应该处理请求的 servlet 也是“空白”。此外，整个场景中不涉及 JSP。并且计时记录不适用于冷tomcat。第一次和（有时）第二次调用需要超过 2000 毫秒。但是连续的请求被标准化到超过 1000 毫秒。所以，这肯定不是一个冷的 tomcat 问题。

现在，这里的人也向我询问了 servlet 代码。这是我正在研究的基本设计：

Servlet A 应该做一些工作并使用我编写的 AgniLogger 类记录它。该类位于库中，并计划从多个组件中使用。反过来，它使用上述编写的代码将 POST 请求发送到 servlet B。Servlet B 将执行实际的日志记录。现在，这个 servlet B 还没有实现。Servlet A 和 B 是不同 Web 应用程序的一部分。

小服务程序 A： http: [//pastebin.com/tQjtvG3g](http://pastebin.com/tQjtvG3g)

AgniLogger：[http ://pastebin.com/nGJypmCN](http://pastebin.com/nGJypmCN)

小服务程序 B： http: [//pastebin.com/psCxLCYY](http://pastebin.com/psCxLCYY)

PS：我正在使用Netbeans进行开发，目前项目中没有web.xml。

**解决方法（虽然很奇怪！）**

如果我将 Servlet B 中 processRequest() 函数的定义从 {blank} 更改为：

```
 PrintWriter out = response.getWriter();
    try {
        //do nothing
    } finally { 
        out.close();
    } 
```

问题得到解决。响应时间减少到 20 毫秒左右，就像端口 80 上的 Apache (WAMP) 服务器一样。但是，我不知道，为什么这工作正常！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:32:16.507

你不知道你的 servlet 做了什么。例如，如果它在其响应中嵌入了一个 jsp，则该 jsp 可能需要在第一次访问时编译成一个 servlet（实现 jsp 的方式）。在这种情况下尝试第二个请求，它应该比第一个快很多。

您还可以从“冷”tomcat 请求页面，例如，并非所有内容都已初始化 - 类似于第一个选项，这将执行一些不会出现在以后的请求中的一次性操作。

过去，当 Web 或应用程序服务器配置为解析客户端的 IP 地址（反向查找 DNS 地址）时，我也看到过这种行为。如果失败，通常需要一段时间 - 并且此操作过去一直阻止请求。

（澄清：我见过网络服务器为他们的日志文件反向解析IP地址。这在成功的地方相对较快（但有代价），但是当请求的IP地址无法解析时，它被记录下来就像IP一样(正如你所期望的那样),但是在请求的响应时间中也可以看到严重的滞后.我不希望任何应用服务器都像这样开箱即用地配置,但我已经看到了过去的问题。缺点是，如果您只在日志中看到滞后和 IP 地址，则可能很难判断您是否正在遭受这种痛苦。只有在您看到 DNS 名称与 IP 地址混合时才清楚各种请求主机的日志）

此外，您以“127.0.0.1”为例 - 如果这不是真实地址，请确保两种方式都可以访问同一个端点。例如，如今“localhost”通常解析为“::1”（本地 IPV6 地址），而不是“127.0.0.1”（IPV4 本地地址）。并不是说我期望两种访问 servlet 的方式有显着差异，但是如果您可以确定两种访问选项之间的不同路径，您可能会更接近发现潜在的问题。

# php - 使用 PHP 脚本和 cron 删除目录中超过 x 天的文件

> ID：14155367
> 
> 赞同：1
> 
> 时间：2013-01-04T10:29:58.933
> 
> 标签：php, cron

我环顾了这个站点和其他站点，找到了一个简单的 php 脚本，我可以使用它与 cron 一起删除目录中超过 X 天的文件。似乎有很多，但没有一个对我有用。我在共享服务器（GC 解决方案）上，主机很棒，但我所在的包不包括 shell 访问，所以我认为我不能使用 .sh 或 bash 命令。

我有一个简洁的 php 脚本来执行我的数据库的 Mysqldump，将其复制到我家区域的目录（ /​​home/mysite/backups ）并通过电子邮件向我发送一份副本 - 这一切都很好。现在我试图运行一个脚本，它只会在备份目录中留下 5 天的备份。我目前正在尝试这个脚本：-

```
<?php

$dir = opendir('/home/mysite/backups");
if ($dir) {

        // Read directory contents
    while (false !== ($file = readdir($dir))) {

        // Check the create time of each file (older than 5 days)
        if (filemtime($file) < (time() - 60*60*24*5)) {
            unlink($file);
        }
    }
}
?> 
```

它不起作用，我的 cron 设置字符串是：- php -q /home/mysite/public_html/scripts/delold6.php

我试过从 html_public 上面运行它，不高兴，备份目录权限设置为 755，当我的备份脚本将转储复制到此目录时，文件设置为 644。我尝试将这些更改为 777 - 不高兴. 任何人都可以在这里帮忙。*find /path/to/your_directory -mtime +5 -exec rm -f {} \;* 在 cron 中也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:36:55.957

您只能使用 bash 来执行此操作。不需要php：

```
 find /your/directory -type f -mmin +720 -exec rm {} \; 
```

--mmin 参数是以分钟为单位的文件年龄

如果您在共享服务器上，您仍然可以尝试使用 shell_exec() 执行此操作，大多数托管服务商都允许这样做

你也忘了跳过'。和 '..' 在循环中

# session - 当会话已过期异步请求时，Grails 显示登录页面

> ID：14155369
> 
> 赞同：0
> 
> 时间：2013-01-04T10:30:12.583
> 
> 标签：session, grails, asynchronous, request

我正在 Grails 中构建一个 Web 应用程序。来自视图的所有请求都以异步方式完成。每个控制器使用“render”构造返回一个模板。

我想在会话过期时将用户显示/转发到登录视图。

（当请求以同步方式执行时，这是由 grails 自动完成的）。

我怎样才能达到这个结果？或者我怎样才能拦截会话超时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:49:17.710

鉴于[应该使用 What http status code 来告诉客户端会话已超时？](https://stackoverflow.com/questions/1653493/what-http-status-code-is-supposed-to-be-used-to-tell-the-client-the-session-has)，我认为将会话过期访问重定向到登录页面的一种简单方法是向 UrlMappings 添加如下内容：

```
"403"(view:'/login') 
```

# mongodb - mongoskin 插入两条记录而不是一条

> ID：14155370
> 
> 赞同：1
> 
> 时间：2013-01-04T10:30:14.360
> 
> 标签：mongodb, mongoskin

我是新来的，也是 mongo 等的新手，我遇到了一个奇怪的问题，需要帮助。

我创建了一个 app.js 文件，我正在使用 node 运行它。它监听网络请求并调用函数使用 mongoskin 驱动程序将记录写入 mongodb。它有点工作，但由于某种原因，它将两条记录插入到 mongodb 中，而不是一条。

我意识到代码不是一个好的设计，目前它是硬编码的，因为我只是想了解它在这个阶段是如何结合和协同工作的。无论如何，这是我的 app.js 中的代码：

```
var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end( hello() );
}).listen(3000, '127.0.0.1');
console.log('Server running at http://127.0.0.1:3000/');

function hello()
{
    // test mongodb and mongoskin driver
    var msg = "";
    var db = require('mongoskin').db('localhost:27017/mydb'); 

    db.collection('users').insert({site: "test.com", email: "fredbloggs@gmail.com", firstname: "Fred", lastname: "Bloggs", password: "hello"}, 
        function(err, result) {
            if (err) msg = "fail";
            if (result) msg="success";
        });

    return msg; 
} 
```

我的原始安装遇到了一些问题，想知道我是否可能安装了两次 mongo 或类似的东西？是否有可能两个 mongo 实例正在接收我的请求并指向同一个数据库？可能有点脆弱，但任何帮助将不胜感激。

非常感谢凯利。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:35:59.707

嗨这是一个简单的驱动程序与您的示例一起使用。请注意，我们使用 MongoClient 连接到数据库一次，对 Web 服务器的每个请求现在都将重用连接池。

```
var   http = require('http');
    , MongoClient = require('mongodb').MongoClient;

MongoClient.connect("mongodb://localhost:27017/mydb", function(err, db) {

  http.createServer(function (req, res) {
    res.writeHead(200, {'Content-Type': 'text/plain'});
    hello(res);
  }).listen(3000, '127.0.0.1');

  console.log('Server running at http://127.0.0.1:3000/');

  function hello(res) {
    // test mongodb and mongoskin driver
    db.collection('users').insert({
        site: "test.com"
      , email: "fredbloggs@gmail.com"
      , firstname: "Fred"
      , lastname: "Bloggs"
      , password: "hello" }, function(err, result) {
        var msg;

        if(err) msg = "fail";
        if(result) msg="success";

        res.end(msg);
      });
  }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:48:01.423

由于您刚刚开始，您可能希望使用本[机驱动程序](https://github.com/mongodb/node-mongodb-native)，而不是 mongoskin。或者至少用它测试你的配置。Mongoskin 建立在本机驱动程序之上，并且两者都在积极开发中，因此很容易成为版本偏差问题的牺牲品。一旦您对本机驱动程序感到满意，并且需要未来模式的便利性，那么您应该能够轻松切换到 mongoskin。

# android - admob广告出现时如何让退出按钮出现？

> ID：14155376
> 
> 赞同：0
> 
> 时间：2013-01-04T10:30:35.847
> 
> 标签：android, admob

我放了一个退出按钮，如果点击它可以消失广告，但我想让这个按钮在广告出现时出现，在广告消失时消失。我怎样才能做到这一点？这是我退出广告的代码：

```
Button exit = (Button) findViewById(R.id.button1);
        exit.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {

                LinearLayout adscontainer = (LinearLayout) findViewById(R.id.Ll);

                View admobAds = (View) findViewById(R.id.adView1);

                adscontainer.removeView(admobAds);

            }
        }); 
```

这是 xml 文件：

```
 <Button
        android:id="@+id/button1"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:background="@drawable/exit" />

<com.google.ads.AdView
        xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:id="@+id/adView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    ads:adSize="BANNER"
        ads:adUnitId="a150ce9a2bd8"
        android:layout_column="0"
        android:layout_span="3"
        /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:47:33.463

试试这种方式：

> ```
>  AdView adView = (AdView)this.findViewById(R.id.adView1);
>     adView.setVisibility(View.INVISIBLE); 
> ```

# javascript - Html5 和 data-* 属性？

> ID：14155377
> 
> 赞同：6
> 
> 时间：2013-01-04T10:30:37.313
> 
> 标签：javascript, jquery, html, custom-data-attribute

*尊重 Html5 数据属性*

当我有这样的代码时：

```
 <li class="user" data-name="Royi Namir" data-city="Boston" data-lang="js" data-food="Bacon"> </li> 
```

我在文档中添加了很多冗余字符。

我*只*需要这种类型的`data-XXX`才能做到：

`myDomElement.dataset[xxx];`

但是，我可以*轻松*做到这一点

```
<li class="user" dn="Royi Namir" dc="Boston" dl="js" df="Bacon"> </li> 
```

没有那些额外的`data-`前缀（并为我节省了很多额外的字符）。并通过[“start with”选择器来阅读它，比如 [d^] – jQuery API](http://api.jquery.com/attribute-starts-with-selector/)

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-04T10:32:13.297

你可以使用这个：

```
<li class="user" data-user='{"name":"Royi Namir", "city":"Boston", "lang":"js", "food":"Bacon"}'> </li> 
```

进而

```
var user = JSON.parse(element.dataset.user); 
```

使用 jQuery，它更简单：

```
var user = $(element).data('user'); 
```

如果您想获得所有用户：

```
var ​users = $('[data-user]').map(function(){return $(this).data('user')}); 
```

会有更少的冗余和直接可用的结构，尤其是具有更深层次的属性。数据属性不仅适用于字符串。

但是关于属性的要点`data-`是规范一种做法。现在在查看 HTML 时很清楚，哪些属性是标准 HTML（视图）属性，哪些属性是数据属性（特定于您的应用程序逻辑）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T10:50:51.890

我有时使用的另一种方法是像查询字符串一样塑造 data-* 字符串，例如

```
<li class="user" data-cn="dn=Royi Namir&dc=Boston&dl=js&df=Bacon"> 
```

并使用以下方法将其转换为对象：

```
function getData(id,el){
    var data = el.getAttribute('data-'+id).split('&'), ret = {};
    data.map(
        function(a){
            var curr = a.split('=');
            this[curr[0]] = curr[1];
            return a;
        }, ret
    );
    return ret;
} 
```

它不易出错（不用担心撇号等）并且可读性更好恕我直言。

[**jsFiddle**](http://jsfiddle.net/KooiInc/ydqjg/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T10:37:46.153

如果您要添加*大量*冗余字符，您可能希望以[客户端 MVC 风格](http://addyosmani.github.com/todomvc/)重构您的应用程序- 基本上将数据作为 JSON 传递，并通过模板处理它。

`data-*`属性很酷，它们可以让您在 DOM 中注入内容，同时保持文档标准兼容，但是如果您依赖使用 DOM 本身作为应用程序的数据层，我强烈建议您使用上述解决方案。

# ios - 为什么我应该在这种情况下使用自动释放？

> ID：14155379
> 
> 赞同：1
> 
> 时间：2013-01-04T10:30:41.467
> 
> 标签：ios, memory-management, autorelease, reference-counting

我是一个 Objective-c 新手，我只是不明白为什么释放不属于我的对象是个坏主意。

假设我在名为的方法中有这个`Europe`

```
//initForStringTheory is a class init method;
Collider *LHC = [Collider initForStringTheory]; 

//Colliders is a NSMutableArray
[Colliders addObject: LHC]  

[LHC release] 
```

建议我不要`LHC`在`Europe`as `Europe`does not own中发布`LHC`，它只有一个指向它的指针。因此我应该充分利用自动释放池并做

```
//newCollider is a pointer for the newly created instance in initForStringTheory
return [newCollider autorelease]; 
```

在`initForStringTheory`. 但为什么？

指针不是也指向`Europe`实例吗？为什么我不能只释放`LHC`而不是在 init 方法`Europe`中返回自动释放？`newCollider`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:08:23.583

Stavash 基本上涵盖了是否释放它取决于方法是否返回保留实例。

但是，您不应该真的需要知道一个方法的作用是为了正确使用内存管理。Cocoa MRC 内存管理遵循基于方法*名称的方法的*规则。根据规则，名称以`alloc`, `retain`, `new`,开头的方法`copy`，或者`mutableCopy`返回一个保留的实例，调用者负责释放它。所有其他名称的方法都返回一个非保留实例，调用者不应释放它。

因此，假设（当然，这是一个很大的假设）`initForStringTheory`正确遵循规则，它不应该返回保留实例（这并不意味着它一定是`autorelease`d；它可能被其他东西保留并直接返回给您）。

*问题的*另一部分是拥有一个名为`init...`. 通常，以构造函数开头的实例方法是在创建实例`init`的结果上立即运行的。`alloc`那么一个名为的类方法到底是做什么的`init...`呢？此外，按照惯例，`init`方法有一个特殊规则，即它“消耗”由返回的保留实例`alloc`，并返回一个（不一定相同）保留实例。但这将如何适用于这种情况，它是在一个类上调用的？它会“消耗”类对象的保留计数（什么都不做），然后返回一个保留的实例吗？没人知道。

所以总而言之，这段代码确实需要重写。绝对没有命名的类方法`init...`。并确保您编写的所有方法都具有正确遵循规则的内存管理行为，基于它们的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:35:20.613

这完全是一个返回什么的问题`initForStringTheory`- 如果这是一个方便的初始化方法，例如`[NSArray arrayWithObjects...]`or `[NSString stringWithFormat...]`，它会创建一个**自动释放**的实例，您不需要在将它添加到您的集合后释放它。但是，如果这是一个返回初始化的**非自动释放**实例的初始化，则您有责任在将本地实例定义添加到集合后立即在您的方法中释放它。

对象的保留计数在添加时增加 1，因此您不希望它为 2，因为您在实例化后没有释放/自动释放它（会导致**内存泄漏**，因为对象永远不会被释放，即使它不在数组中）。

阅读：http: [//developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFMemoryMgmt/Concepts/Ownership.html](http://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFMemoryMgmt/Concepts/Ownership.html)

# objective-c - iPad uiviewcontroller - 为什么边界和框架大小不同？

> ID：14155383
> 
> 赞同：2
> 
> 时间：2013-01-04T10:30:46.200
> 
> 标签：objective-c, ios, uiviewcontroller

在 xcode 4.5.1 中，启动单视图 iOS 应用程序项目，并在 plist 或目标设置中，使其仅支持横向左右方向。然后在 ViewController 中，将其放入：

```
- (void)viewDidAppear:(BOOL)animated {
    NSLog(@"bounds: %.2f,%.2f",self.view.bounds.size.width,self.view.bounds.size.height);
    NSLog(@"frame:  %.2f,%.2f",self.view.frame.size.width,self.view.frame.size.height);
} 
```

当你运行它时你会得到这个：

```
bounds: 1024.00,748.00
frame:  748.00,1024.00 
```

任何想法为什么？它给我带来了各种关于过渡、核心动画层等的问题。尽管视图是横向的，但视图的 CALayer 之类的东西似乎仍然是纵向的。

编辑：

如果你尝试这样的事情：

```
CATransition* transition = [CATransition animation];
transition.duration = 2.2;
transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
transition.type = kCATransitionPush;
transition.subtype = kCATransitionFromBottom;
[self.navigationController.view.layer addAnimation:transition forKey:nil];
[self.navigationController popToRootViewControllerAnimated:NO]; 
```

请注意，它来自右侧而不是底部，并且新视图与旧视图重叠，因为它是基于纵向尺寸进行的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T10:34:21.090

an 的边界`UIView`是矩形，表示为相对于其自身坐标系 (0,0) 的位置 (x,y) 和大小 (width,height)。

an 的框架`UIView`是矩形，表示为相对于其中包含的位置 (x,y) 和大小 (width,height) `superview`。

所以，你得到了这个结果。

# magento - 如何在 Magento 中获取完整的产品图片 url

> ID：14155385
> 
> 赞同：9
> 
> 时间：2013-01-04T10:30:54.863
> 
> 标签：magento

如何在**magento**中获取完整的产品图片url ，我需要将数据从magento迁移到 **django**，所以我需要获取产品**完整图片的url**来迁移网站

这是我的代码

```
<?php
@ob_start();
@session_start();
ini_set('display_errors', 1);
//for order update
include '../../../../app/Mage.php';
Mage::app('default');
echo '<pre>';
if(isset($_REQUEST['productid'])){
$productId = $_REQUEST['productid'];
}else{
echo 'Default Product => ';
$productId = '12402'; // product ID 10 is an actual product, and used here for a test
}
$product = Mage::getModel('catalog/product')->load($productId);  //load the product     

print_r($product->getthumbnail());<br/>
print_r($product->getcreated_at());
?> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-04T11:07:49.503

您可以首先尝试以下代码调用目录的助手

```
echo  Mage::helper('catalog/image')->init($product, 'thumbnail'); 
```

从此代码中，您还可以获得缓存路径。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-04T10:37:43.423

使用加载产品后，`load()`您可以在代码中使用以下内容：

全尺寸图片：

```
$imageUrl = Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_MEDIA) . 'catalog/product' . $product->getImage(); 
```

调整大小/缓存图像：

```
$imageCacheUrl = Mage::helper('catalog/image')->init($product, 'image')->resize(135, 135); 
```

如果您需要不同的缓存大小，请使用其他数字作为调整大小的方法。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-05-17T15:46:52.210

试试这个

```
$product = Mage::getModel('catalog/product')->load($product_id);
$full_path_url = Mage::helper('catalog/image')->init($product, 'thumbnail'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-28T11:20:45.910

```
 <img src="<?php echo Mage::helper('catalog/image')->init($_products, 'small_image')->resize(200,200);?>" width="200" alt=""> 

    <?php ini_set('display_errors','on');
    require_once 'app/Mage.php';
    Mage::app('default');
    $_products = Mage::getResourceModel('catalog/product_collection')->toOptionArray();
    $product_id = $this->getRequest()->getParam('id');
    $_products=Mage::getModel('catalog/product')->load($product_id);?> 
```

# android - 工具命名空间的可用属性列表

> ID：14155387
> 
> 赞同：2
> 
> 时间：2013-01-04T10:31:02.900
> 
> 标签：android, android-layout, android-widget, android-tools-namespace

我注意到有一个额外的命名空间“工具”可用于 android 布局。然后我尝试了，但失败了:) 找到一个可以使用的所有属性的列表。

到目前为止，我知道这一点：

```
tools:ignore
tools:listitem 
```

我想找到所有属性的列表，最好有一些解释。另外，如果有人能告诉我我可以为工具使用什么值，那就太好了：忽略。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-26T23:57:40.420

这是要点：

**tools:ignore** 此属性可以在任何 XML 元素上设置，并且是一个逗号分隔的 lint 问题 ID 列表，应该在此元素或其任何子元素上递归地忽略。

**tools:targetApi** 此属性类似于 Java 类中的 @TargetApi 注释：它允许您指定一个 API 级别，可以是整数或代码名称，该元素已知在其上运行。

**tools:locale** 此属性可以在资源值文件的根元素上设置，并且应该对应于一种语言和可选的区域。这将使工具知道假定文件中的字符串是什么语言（区域设置）。例如，values/strings.xml 可以有这个根元素：

**tools:context** 这个属性通常设置在布局 XML 文件中的根元素上，并记录布局与哪个活动相关联（在设计时，因为显然一个布局可以被多个布局使用）。例如，布局编辑器将使用它来猜测默认主题，因为主题是在清单中定义的，并且与活动相关联，而不是布局。您可以使用与清单中相同的点前缀来指定活动类，而无需完整的应用程序包名称作为前缀。

**tools:layout** 此属性通常设置在标签中，用于记录您希望在设计时看到呈现的布局（在运行时，这将由标签列出的片段类的操作确定）。

**工具：listitem / listheader / listfooter** 这些属性可以在设计时用于（或其他 AdapterView 子视图等）以指定用于列表项的布局，以及列表页眉和列表页脚。该工具将填充虚拟数据以显示具有一些代表性内容的列表。

您可以在此处找到此列表和更多信息：[http ://tools.android.com/tech-docs/tools-attributes](http://tools.android.com/tech-docs/tools-attributes)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-04-27T09:05:26.057

谈到工具：忽略 我想指定此属性允许您设置 Lint 工具以抑制对 XML 文件中特定属性的警告。例如：tools:ignore="ContentDescription"

基本上 tools:ignore 类似于 Java 的 @SupressWarning 注解。如果您想了解更多关于有用的工具属性和其他一些用于 Android 开发的便利工具，我建议您看看这篇详细的评论：[http ://cases.azoft.com/4-must-know-tools -for-effective-android-development/](http://cases.azoft.com/4-must-know-tools-for-effective-android-development/)

至于工具属性的完整列表，可以在这里找到：[http ://tools.android.com/tech-docs/tools-attributes](http://tools.android.com/tech-docs/tools-attributes)

# iphone - 如何在 iPhone 的 MKMapView 中显示带点（圆圈）的蓝色图钉

> ID：14155389
> 
> 赞同：8
> 
> 时间：2013-01-04T10:31:07.807
> 
> 标签：iphone, mkmapview

我的问题可能看起来有点复杂，但让我澄清一下。我正在使用 mkmapview ，在此我想用蓝点和圆圈显示当前用户位置，但这并不是我真正想要的。当我正在制作一个 iPhone 应用程序时，因为我是地图集成的新手，所以我很难做同样的事情。如果有人可以为我提供其演示的链接或可以解释我如何用带圆圈的蓝点显示用户位置在地图上，那对我有很大帮助。提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-12-02T22:59:22.543

这是 MKMapView 类的属性之一。默认值为 No，因此只需在代码中将其设置为 YES。

请注意，如果您在 Storyboard 中的 ViewController 上添加 MapView，请查看属性检查器，默认情况下，您的 MapView 上会检查其他注释（建筑物、兴趣点），但用户位置除外。我花了一段时间才找到这个，感觉就像我在玩捉迷藏，不知道为什么不检查它如此重要。

```
self.mapView.showsUserLocation = YES; 
```

正如[thexande](https://stackoverflow.com/users/4293021/thexande)提到的，对于 swift3，您必须将其设置为 true：

```
self.mapView.showsUserLocation = true; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-04T10:35:55.970

将此添加到 viewForAnnotation 方法的顶部：

```
if ([annotation isKindOfClass:[MKUserLocation class]])
return nil; 
```

特殊的用户位置注释是 MKUserLocation 类型，在这种情况下返回 nil 会告诉地图视图为其绘制默认视图，即蓝点。并进入 MKMapview 属性并检查显示用户位置....

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-01-20T00:34:31.190

**对于 SWIFT 3**

```
if (annotation.isKind(of: MKUserLocation.self)){
        return nil
    } 
```

这将允许您在 swift 3 中为您的用户位置显示一个蓝点。

将此代码放在mapView viewFor annotation func

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-10T10:04:57.353

@Ohmy 的答案是正确的，但在我的程序中情况不同：

从 iOS10 开始，您需要根据您的要求添加`NSLocationWhenInUseUsageDescription`或 `NSLocationAlwaysUsageDescription`键入您的应用程序。`Info.plist`

# java - java中的pl/sql varchar2类型是什么？

> ID：14155390
> 
> 赞同：1
> 
> 时间：2013-01-04T10:31:14.410
> 
> 标签：java, plsql

1.  java中是否有varchar2变量类型？需要将pl/sql中的如下varchar2变量转换成java。
2.  如果是，需要哪个库？（例如进口...）

例如：

a) 在 pl/sql 中：

```
SE      VARCHAR2(5) := 0;
FIME    VARCHAR2(100) := P_FIME; 
```

b）在java中（这是正确的吗？还是需要用string []替换varchar2？）：

```
varchar2 SE[5] = 0;
varchar2 FIME[100] = P_FIME; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T10:33:19.683

`VARCHAR2`在 Java 中是常规字符串

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T10:34:21.513

`VARCHAR2`在 java 中可以是`String`or `char[]`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T10:34:39.070

您可以在 java 中使用 String 来表示 VARCHAR2

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T10:36:45.653

Varchar2 可以在 java 中用作普通字符串以获取有关`jdbc data types` [参考这里的更多信息](http://www.tutorialspoint.com/jdbc/jdbc-data-types.htm)

# iphone - 如何限制一个身体在 Box2d 中强制另一个身体？

> ID：14155396
> 
> 赞同：2
> 
> 时间：2013-01-04T10:31:33.067
> 
> 标签：iphone, box2d-iphone

我正在创建简单的突围游戏，其中我不断落下的砖块，当球击中它时它们会消失。但是当球击中那块砖时，它会向它施加力，砖会向上移动。所以我想让球停止强迫砖块！？，Box2d中是否有这样做的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:37:06.433

将运动学实体用于砖块

```
body->SetType( b2_kinematicBody ); 
```

# php - 在选择时添加更多内容的动态表单

> ID：14155397
> 
> 赞同：0
> 
> 时间：2013-01-04T10:31:33.447
> 
> 标签：php, html, forms, dynamic

我不确定它到底叫什么，但我真的很想有一个底部有两个单选按钮的表单，说你有一个客户是/否，如果他们点击是，还有一点表格出现。这是文件中的代码，它是 PHP。

```
<html>
<body>

<?php
if (isset($_REQUEST['email']))
//if "email" is filled out, send email
{
//send email
$to = "email" ;
$subject = "New Enquiry" ;
$name = $_REQUEST['name'] ;
$email = $_REQUEST['email'] ;
$address = $_REQUEST['address'] ;
$address2 = $_REQUEST['address2'] ;
$postcode = $_REQUEST['postcode'] ;
$city = $_REQUEST['city'] ;
$tel = $_REQUEST['tel'] ;
$tel2 = $_REQUEST['tel2'] ;
$club = $_REQUEST['club'] ;
$which = ", " . $_REQUEST['which'] ;
$passdetails = $_REQUEST['updates'] ;
$cname = $_REQUEST['cname'] ;
$ctel = $_REQUEST['ctel'] ;
$cloan = $_REQUEST['cloan'] ;
$creasons = $_REQUEST['creasons'] ;
$message = "Name: " . $name . "\n Email: " . $email . "\n Address: " . $address . ", " .     $address2 . "\n Postcode: " . $postcode . "\n City: " . $city . "\n Telephone Number: " . $tel . "\n Alternative Number: " . $tel2 . "\n Member of a club?: " . $club . $which . "\n Can use details: " . $passdetails . "\n" . "\n Client Details (Optional): " . "\n" . "\n Client Name: " . $cname . "\n Client Telephone Number: " . $ctel . "\n Loan Amount: " . $cloan . "\n Reasons for loan: " . $creasons ;
$from = "Introducer Registration" ;

mail($to,$subject,$message,"From: " . $from) ;

echo "<p style='font-size:12px;font-family:helvetica;color:#000000;'>Thank you for using our enquiry form, a member of the team will contact you as soon as they can.</p>";
}
else
//if "email" is not filled out, display the form
{
echo "<form action='register.php' method='post' style='width:21cm;font-family:helvetica;font-size:12px;'>

<p style='font-size:12px;padding-bottom:3px;margin-bottom:3px;'><I>* = required</I></p>
<label>Name*</label><label style='margin-left:353px;'>Email*</label><br />
<input type='text' style='width:10cm;padding-top:4px;' name='name' />
<input type='text' style='width:10cm;padding-top:4px;margin-left:10px;' name='email' />
<br />

<label>Address Line One*</label><label style='margin-left:289px;'>Address Line Two</label><br />
<input type='text' style='width:10cm;padding-top:4px;' name='address' />
<input type='text' style='width:10cm;padding-top:4px;margin-left:10px;' name='address2' />
<br />

<label>Town/City</label><label style='margin-left:338px;'>Postcode*</label><br />
<input type='text' style='width:10cm;padding-top:4px;margin-bottom:0px;' name='city' />
<input type='text' style='width:10cm;padding-top:4px;margin-left:10px;' name='postcode' />
<br />

<label>Phone Number*</label><label style='margin-left:304px;'>Alternative Number</label><br />
<input type='text' style='width:10cm;padding-top:4px;margin-bottom:0px;' name='tel' />
<input type='text' style='width:10cm;padding-top:4px;margin-left:10px;margin-bottom:0px;' name='tel2' />
<br />

<br />
<label style='margin-top:-10px;'>Are you a member of a club?*</label><label style='margin-left:231px;margin-top:-10px;'>If yes, which club?</label><br />
<input type='radio' name='club' value='Yes' style='margin-top:-10px;' /><span style='font-family:source sans pro;color:#000000;'>Yes</span>
<input type='radio' name='club' value='No' /><span style='font-family:source sans pro;color:#000000;'>No</span>
<input type='text' name='which' style='font-family:source sans pro;color:#000000;;width:10cm;margin-left:320px;margin-top:0px;' />
<br />
<br />
<input type='hidden' name='updates' value='Yes' />
<input type='checkbox' name='updates' value='No'/><label style='font-family:source sans pro;color:#000000;' value='updates'>*If you <u>DO NOT</u> wish to be contacted by affiliated companies with potentially helpful products and services, please tick this box.</label>
<br />
<br />
<h9 style='font-size:14px;'>Enter Client Details for assessment <i>(optional)</i></h9>
<br />
<br />
<label>Name</label><label style='margin-left:360px;'>Phone Number</label><br />
<input type='text' style='font-family:source sans pro;color:#000000;width:10cm;padding-top:4px;' name='cname' />
<input type='text' style='font-family:source sans pro;color:#000000;width:10cm;padding-top:4px;margin-left:10px;' name='ctel' />
<br />

<label>Loan Amount</label><label style='margin-left:319px;'>Reasons for loan</label><br />
<input type='text' style='font-family:source sans pro;color:#000000;width:10cm;padding-top:4px;' name='cloan' />
<input type='text' style='font-family:source sans pro;color:#000000;width:10cm;padding-top:4px;margin-left:10px;' name='creasons' />
<br />

<br />
<input style='margin-left:713px;padding:0;' type='submit' value='Submit' />

</form>";
}
?>

</body>
</html> 
```

在“输入客户详细信息以进行评估”之前，我真的很想拥有它，这样他们就可以选择是否拥有它们，然后如果有，则表格会下拉，但这一切都是通过电子邮件发送的，我希望如此他们将在同一封电子邮件中。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:41:30.387

将“输入客户详细信息以进行评估”部分放在 DIV 中，并将此 DIV 的 CSS 设置为：

```
display:none 
```

这会将其隐藏起来。

在“是”单选元素中放置一个 onclick，以便在选择它时运行一个 JavaScript 函数，该函数会将 div 的样式更改为：

```
display:inline 
```

然后，您可能希望将另一个 onclick 添加到“否”单选元素，这样如果选择了该元素，它会将显示转回隐藏状态。

# java - 使用 ApprovalTest 验证多个图像

> ID：14155409
> 
> 赞同：3
> 
> 时间：2013-01-04T10:32:33.877
> 
> 标签：java, approval-tests

我有一种方法可以生成一些图像（1.jpg、2.jpg...），并将它们写入文件系统。我想用 ApprovalTest 验证这个方法的结果。问题在于`Approvals.verify(image)`将接收和批准的文件命名为测试方法的名称。因此，我无法通过一次测试验证多个图像。

如何在一次测试中验证多个图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T10:23:39.850

您可以使用`NamerFactory`更改附加到文件末尾的信息。为下一次测试。

```
[TestFixture]
class Program
{
    [Test]
    [UseReporter(typeof(WinMergeReporter))]
    public void Test1()
    {
        var image1 = @"firstImage.png";
        var image2 = @"secondImage.png";

        NamerFactory.AdditionalInformation = Path.GetFileNameWithoutExtension(image1);
        ApprovalTests.Approvals.Verify(image1);

        NamerFactory.AdditionalInformation = Path.GetFileNameWithoutExtension(image2);
        ApprovalTests.Approvals.Verify(image2);
    }
} 
```

`Approval Tests`已经在 end`firstImage`和之前创建了两个文件。`secondImage`为了清楚起见，请参阅屏幕截图：

![在此处输入图像描述](../Images/6ef7d8bd9fd63c4f393daf22e586b011.png)

我的对象是字符串，但是对于您的图像来说都是一样的。您会像以前一样调用，但只是像示例中一样进行`Approvals.Verify(image)`更改。`AdditionalInformation`

**注意：**我不太建议在一次测试中验证两个图像，因为如果一个验证将失败 - 将不会执行下一个验证。并且 Approval Tests 无法在一个步骤中连接图像并验证它们，至少如果您自己这样做的话。

**编辑：**对于 Java 尝试使用，位于`NamerFactory`

```
public static void asMachineSpecificTest(Function0<String> environmentLabeller)
{
    additionalInformation = environmentLabeller.call();
} 
```

并提供适当的功能，这将返回您的图像名称

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T18:43:51.680

Ilya 的回答是正确的，但在 java 中略有不同，所以我想在这里发布一个完整的示例：

```
package org.approvaltests.namer.tests;

import junit.framework.TestCase;

import org.approvaltests.Approvals;
import org.approvaltests.namer.NamerFactory;
import org.lambda.functions.Function0;

public class NamerFactoryTest extends TestCase
{
  public static class MultipleFiles implements Function0<String>
  {
    private int count = 1;
    @Override
    public String call()
    {
      return "" + (count++);
    }
  }
  public void testMultipleFiles() throws Exception
  {
    MultipleFiles f = new MultipleFiles();
    NamerFactory.asMachineSpecificTest(f);
    Approvals.verify("one");
    NamerFactory.asMachineSpecificTest(f);
    Approvals.verify("two");
  }
} 
```

附言。我会把它添加到下一个版本中，所以它只是

```
package org.approvaltests.namer.tests;

import junit.framework.TestCase;

import org.approvaltests.Approvals;
import org.approvaltests.namer.MultipleFilesLabeller;
import org.approvaltests.namer.NamerFactory;

public class NamerFactoryTest extends TestCase
{
  public void testMultipleFiles() throws Exception
  {
    MultipleFilesLabeller labeller = NamerFactory.ApprovalResults.useMultipleFiles();
    Approvals.verify("one");
    labeller.next();
    Approvals.verify("two");
  }
} 
```

# windows-8 - Combobox DropDown 关闭过渡，如“商店”应用程序

> ID：14155410
> 
> 赞同：1
> 
> 时间：2013-01-04T10:32:41.820
> 
> 标签：windows-8, combobox, microsoft-metro

我想制作`combobox`类似的 Windows`Store`应用程序。当`dropdown`组合框关闭时，comboboxitem 会像走到组合框一样移动到组合框。很`smooth`.

我放置了一个简单的组合框，但是当它的下拉菜单关闭时它会闪烁。它不光滑。怎么让它光滑？

# android - 如何使用 putExtra 在其他活动中调用 Intent

> ID：14155413
> 
> 赞同：-2
> 
> 时间：2013-01-04T10:32:52.973
> 
> 标签：android, android-intent

这是我的代码，我想在我放置 TextView 以显示已保存数据的不同类中使用此活动。

```
 public void onItemClick(AdapterView<?> arg0, View v, int position, long id) {
            // TODO Auto-generated method stub

            TextView tv = (TextView) v;
            String content = tv.getText().toString();

            Intent i=new Intent(getApplicationContext(),ShowNote.class);
            i.putExtra("Title", content);
            //i.putExtra("id", getListView.get(arg2).getID());
            startActivity(i); 
```

这段代码是什么意思。我只是不明白 putExtra 值

```
 i.putExtra("Title", content);
              i.putExtra("id", getListView.get(arg2).getID()); 
```

请帮助我理解这段代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:37:12.253

`i.putExtra("Title", content);`它定义了您正在将一些数据从一个活动传递到另一个活动以进行访问。

要了解有关`Intent`查看[链接的更多信息](http://www.vogella.com/articles/AndroidIntent/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:37:59.350

您正在将一些信息放入您的意图中，因此被调用的 Activity 可以提取它们，并基于它执行业务逻辑

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T10:39:40.697

它很简单，但作为初学者很难理解。

`i.putExtra("Title", content);`

您将价值从一项活动传递到另一项活动。

在上面这行代码`Title`中是一个关键。第二个活动通过它来了解您发送的值。这对`i.putExtra("id", getListView.get(arg2).getID());`.

希望能帮助到你。

# java - 如何序列化包含 nio.Buffer 的类？

> ID：14155416
> 
> 赞同：0
> 
> 时间：2013-01-04T10:33:00.980
> 
> 标签：java

我有一个包含 nio 缓冲区作为数据成员的类。我想知道如何序列化这个类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:39:48.007

您是否在问如何在实现 Serializable 时防止特定字段被序列化？如果是这样，请制作该字段`transient`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T10:49:33.107

使其成为瞬态的，因此默认情况下它不会被序列化。如果您需要序列化其中的 dat，您可以添加自己的`writeObject`方法`readObject`来执行此操作。

# java - 以降序或升序排列日期的 ArrayList

> ID：14155417
> 
> 赞同：4
> 
> 时间：2013-01-04T10:33:03.483
> 
> 标签：java, date, arraylist

我有一个日期数组列表，我想按日期按升序和降序对其进行排序。任何人都可以为此提供完整的代码片段吗？我见过很多这样的问题，但找不到合适的答案。

列表会是这样的

```
 List<Date> dates= new ArrayList<Date>(); 
```

任何形式的帮助将不胜感激，非常感谢，

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-04T10:34:11.647

由于`Date`已经实现了 Comparable，您可以简单地使用：

```
Collections.sort(dates); 
```

升序排序，降序排序：

```
Collections.sort(dates, Collections.reverseOrder()); 
```

# oracle - oracle如何旋转我的表

> ID：14155418
> 
> 赞同：-1
> 
> 时间：2013-01-04T10:33:05.597
> 
> 标签：oracle, pivot-table

我有这些数据显示在图像中。

![在此处输入图像描述](../Images/6b599bf09a5b921df495b002344f2572.png)

我想像这样显示这些数据

```
CYNAME    04 JAN 2012   03 JAN 2012 02 JAN 2012 01 JAN-2012
CUL            12           12             12         12 
```

我怎样才能在 oracle 10g 中实现这一点才能像那样显示。

**更新**

我当前的 Sql 查询是这样的

```
SELECT CY_NAME,
           NVL(MAX(DECODE ( CA_DATE , (SELECT MAX(CA_DATE)   FROM COTTON_ARV), CA_VALUE )),0) "04 JAN 2013",
           NVL(MAX(DECODE ( CA_DATE , (SELECT MAX(CA_DATE)-1 FROM COTTON_ARV), CA_VALUE )),0) "03 JAN 2013",
           NVL(MAX(DECODE ( CA_DATE , (SELECT MAX(CA_DATE)-2 FROM COTTON_ARV), CA_VALUE )),0) "02 JAN 2013",
           NVL(MAX(DECODE ( CA_DATE , (SELECT MAX(CA_DATE)-3 FROM COTTON_ARV), CA_VALUE )),0) "01 JAN 2013",
           NVL(MAX(DECODE ( CA_DATE , (SELECT MAX(CA_DATE)-4 FROM COTTON_ARV), CA_VALUE )),0) "31 DEC 2012",
           NVL(MAX(DECODE ( CA_DATE , (SELECT MAX(CA_DATE)-5 FROM COTTON_ARV), CA_VALUE )),0) "30 DEC 2012",
           NVL(MAX(DECODE ( CA_DATE , (SELECT MAX(CA_DATE)-6 FROM COTTON_ARV), CA_VALUE )),0) "29 DEC 2012"
    FROM      V_COTTON_ARV
    GROUP BY  CY_NAME 
```

问题是别名是固定的，但查询中的日期是动态的。如何根据查询更改别名。或者有什么办法可以做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:09:17.760

if you wan't a dynamic number of columns you'd either have to do this approach and use a type to hold the columns (as static sql has a fixed number of columns).

```
SQL> create table my_table (cy_name varchar2(3), ca_date date, ca_value number);

Table created.

SQL> alter session set nls_date_format='mm/dd/yyyy';

Session altered.

SQL> insert into my_table
  2  select 'CUL' cy_name, to_date('1/4/2013') ca_date, 12 ca_value from dual
  3  union all
  4  select 'CUL' cy_name, to_date('12/31/2012') ca_date, 12 ca_value from dual
  5  union all
  6  select 'CUL' cy_name, to_date('1/3/2013') ca_date, 12 ca_value from dual
  7  union all
  8  select 'CUR' cy_name, to_date('1/6/2013') ca_date, 12 ca_value from dual
  9  union all
 10  select 'CUR' cy_name, to_date('12/6/2013') ca_date, 12 ca_value from dual;

5 rows created.

SQL>
SQL> drop type colTab;

Type dropped.

SQL> drop type colType;

Type dropped.

SQL> create type colType as object (colname varchar2(30), value number);
  2  /

Type created.

SQL> create type colTab as table of colType;
  2  /

Type created.

SQL> alter session set nls_date_format='mm/dd/yyyy';

Session altered.

SQL> col val format a80
SQL> set linesize 90
SQL> select cy_name,
  2         cast(multiset(select ca_date, ca_value
  3                         from my_table d
  4                        where d.cy_name = a.cy_name) as coltab) val
  5    from my_table a
  6  group by cy_name;

CY_ VAL(COLNAME, VALUE)
--- --------------------------------------------------------------------------------
CUR COLTAB(COLTYPE('01/06/2013', 12), COLTYPE('12/06/2013', 12))
CUL COLTAB(COLTYPE('01/04/2013', 12), COLTYPE('12/31/2012', 12), COLTYPE('01/03/2013
    ', 12)) 
```

or generate the sql first dynamically..eg:

```
SQL> select 'select CY_NAME, ' from dual
  2  union all
  3  select case when rownum != 1 then ',' end || str
  4    from (select distinct  'MAX(DECODE(CA_DATE, TO_DATE(''' || to_char(ca_date, 'dd-mm-yyyy') || ''', ''DD-MM-YYYY''), CA_VALUE, NULL)) as "' || to_char(ca_date, 'dd-mm-yyyy
') || '"' str
  5            from my_table a)
  6  union all
  7     select 'FROM MY_TABLE
  8  GROUP BY  CY_NAME; ' from dual
  9  ;

'SELECTCY_NAME,'
------------------------------------------------------------------------------------------
select CY_NAME,
MAX(DECODE(CA_DATE, TO_DATE('04-01-2013', 'DD-MM-YYYY'), CA_VALUE, NULL)) as "04-01-2013"
,MAX(DECODE(CA_DATE, TO_DATE('06-12-2013', 'DD-MM-YYYY'), CA_VALUE, NULL)) as "06-12-2013"
,MAX(DECODE(CA_DATE, TO_DATE('31-12-2012', 'DD-MM-YYYY'), CA_VALUE, NULL)) as "31-12-2012"
,MAX(DECODE(CA_DATE, TO_DATE('03-01-2013', 'DD-MM-YYYY'), CA_VALUE, NULL)) as "03-01-2013"
,MAX(DECODE(CA_DATE, TO_DATE('06-01-2013', 'DD-MM-YYYY'), CA_VALUE, NULL)) as "06-01-2013"
FROM MY_TABLE
GROUP BY  CY_NAME;

7 rows selected. 
```

and run it:

```
SQL> select CY_NAME,
  2  MAX(DECODE(CA_DATE, TO_DATE('04-01-2013', 'DD-MM-YYYY'), CA_VALUE, NULL)) as "04-01-2013"
  3  ,MAX(DECODE(CA_DATE, TO_DATE('06-12-2013', 'DD-MM-YYYY'), CA_VALUE, NULL)) as "06-12-2013"
  4  ,MAX(DECODE(CA_DATE, TO_DATE('31-12-2012', 'DD-MM-YYYY'), CA_VALUE, NULL)) as "31-12-2012"
  5  ,MAX(DECODE(CA_DATE, TO_DATE('03-01-2013', 'DD-MM-YYYY'), CA_VALUE, NULL)) as "03-01-2013"
  6  ,MAX(DECODE(CA_DATE, TO_DATE('06-01-2013', 'DD-MM-YYYY'), CA_VALUE, NULL)) as "06-01-2013"
  7  FROM MY_TABLE
  8  GROUP BY  CY_NAME;

CY_ 04-01-2013 06-12-2013 31-12-2012 03-01-2013 06-01-2013
--- ---------- ---------- ---------- ---------- ----------
CUR                    12                               12
CUL         12                    12         12 
```

UPDATE to your edit: if the number of cols in your edit is say 7:

```
SQL> select 'select CY_NAME, ' from dual
  2  union all
  3  select case when rownum != 1 then ',' end || str
  4    from (select 'MAX(DECODE(CA_DATE, TO_DATE('''
  5                 || to_char((d-rownum+1), 'dd-mm-yyyy')
  6                 || ''', ''DD-MM-YYYY''), CA_VALUE, NULL)) as "'
  7                 || to_char((d-rownum+1), 'dd-mm-yyyy') || '"' str
  8            from (select max(ca_date) d from cotton_arv) a
  9          connect by level <= 7 /* change to the number of cols needed */)
 10  union all
 11     select 'FROM V_COTTON_ARV
 12  GROUP BY  CY_NAME; ' from dual
 13  ;

'SELECTCY_NAME,'
------------------------------------------------------------------------------------------------
------------------------
select CY_NAME,
    MAX(DECODE(CA_DATE, TO_DATE('04-01-2013', 'DD-MM-YYYY'), CA_VALUE, NULL)) as "04-01-2013"
    ,MAX(DECODE(CA_DATE, TO_DATE('03-01-2013', 'DD-MM-YYYY'), CA_VALUE, NULL)) as "03-01-2013"
    ,MAX(DECODE(CA_DATE, TO_DATE('02-01-2013', 'DD-MM-YYYY'), CA_VALUE, NULL)) as "02-01-2013"
    ,MAX(DECODE(CA_DATE, TO_DATE('01-01-2013', 'DD-MM-YYYY'), CA_VALUE, NULL)) as "01-01-2013"
    ,MAX(DECODE(CA_DATE, TO_DATE('31-12-2012', 'DD-MM-YYYY'), CA_VALUE, NULL)) as "31-12-2012"
    ,MAX(DECODE(CA_DATE, TO_DATE('30-12-2012', 'DD-MM-YYYY'), CA_VALUE, NULL)) as "30-12-2012"
    ,MAX(DECODE(CA_DATE, TO_DATE('29-12-2012', 'DD-MM-YYYY'), CA_VALUE, NULL)) as "29-12-2012"
    FROM V_COTTON_ARV
    GROUP BY  CY_NAME; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:43:11.720

在 Oracle 11g 之前，您不能使用简单的 SQL 语句对表进行透视。

您需要一个 PL/SQL 过程来动态构建一个像这样的透视查询：

```
SELECT CYNAME    
     , MAX(DECODE(CA_DATE, TO_DATE('01-01-2013', 'DD-MM-YYYY'), CA_VALUE, NULL)) AS "01-01-2013"
     , MAX(DECODE(CA_DATE, TO_DATE('02-01-2013', 'DD-MM-YYYY'), CA_VALUE, NULL)) AS "02-01-2013"
     , MAX(DECODE(CA_DATE, TO_DATE('03-01-2013', 'DD-MM-YYYY'), CA_VALUE, NULL)) AS "03-01-2013"
     , ...
FROM MY_TABLE
GROUP BY  CYNAME; 
```

或者如果您只需要运行一次，则手动构建它。

# fortran - 如何并行化总和？并行循环和 worshare 的不同结果

> ID：14155419
> 
> 赞同：1
> 
> 时间：2013-01-04T10:33:05.153
> 
> 标签：fortran, openmp, intel-fortran

正如标题所述，我想使用 OpenMP 并行化总和。我搜索了不同的方法，但我要么不明白他们做了什么，要么他们没有工作。这是我发现的：

1)

```
!$OMP PARALLEL WORKSHARE
P_pump_t = 0.5d0 * dcv / pi**2 * sum( k * p_pump_k * dk )
!$OMP END PARALLEL WORKSHARE 
```

有效，但我不明白会发生什么以及我得到什么好处。

2)

```
!$OMP PARALLEL DO REDUCTION(+:P_pump_t)
do l = 1, n
P_pump_t = P_pump_t + 0.5d0 * dcv / pi**2 * k(l) * p_pump_k(l) * dk(l)
end do
!$OMP END PARALLEL DO 
```

给出错误（不同于 1）或 3））结果。

3）当然，我可以计算一个新数组（并行化）并让这个数组最终总结出来......

关于如何做到最好的提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:51:25.410

根据您共享的代码量，我猜“但我没有 2）”意味着循环版本给出了不正确的（不同的？）结果。这可能是您在求和循环之前省略了`P_pump_t`to的初始化。`0.0`另请注意，由于浮点运算的非关联性，两种代码可能会产生略微不同的结果 - 例如，由于每次运算后应用的舍入和归一化，`(a+b)+c`可能会产生略微不同的结果。`a+(b+c)`像这样的东西会更好地匹配你的代码的矢量化版本：

```
P_pump_t = 0.0
!$OMP PARALLEL DO REDUCTION(+:P_pump_t)
do l = 1, n
  P_pump_t = P_pump_t + k(l) * p_pump_k(l) * dk(l)
end do
!$OMP END PARALLEL DO
P_pump_t = 0.5d0 * dcv / pi**2 * P_pump_t 
```

很有可能`ifort`已经在循环之后提取了公共乘法 - 它非常擅长执行此类优化。

另请注意，在 Intel 的 OpenMP 实现中，该指令`WORKSHARE`被简单地转换为`SINGLE`x87 FPU 的内部精度。

# java - 如何为 TChart Bar 创建渐变？

> ID：14155421
> 
> 赞同：0
> 
> 时间：2013-01-04T10:33:10.540
> 
> 标签：java, android, teechart

我在 Excel 中创建了这个。如何在我的 中创建这样的效果`TChart`？如您所见，梯度基于最小值/最大值。

![每个条的渐变相同](../Images/8d47f4fdb74785439a0929a23a2d477f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:50:55.070

Bar 系列有一个 GradientRelative 属性可以做到这一点。但是，我发现它没有按预期工作，因此我已将其添加到缺陷列表中，以便在将来的版本中修复 (TJ71016478)。

# java - 使用 Apache POI 通过 Cell 引用字母标识符获取 Cell

> ID：14155423
> 
> 赞同：16
> 
> 时间：2013-01-04T10:33:11.733
> 
> 标签：java, excel, apache-poi

我正在尝试通过单元格引用从行中获取单元格，但我遇到了问题。例如我有：

```
row.getCell(CellReference.convertColStringToIndex("B")); 
```

如果 Column 索引是 ，那工作得很好`1`，但是如果 Column 被删除所以`B`Column 索引变成`2`了并且 method:`CellReference.convertColStringToIndex("B")`仍然将它转换为`1`在这种情况下我无法得到我的 Column，我得到`null`.

所以问题是如何根据单元格标识符（一个字母）从行中获取列？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-04T10:50:41.743

看看[我对上一个问题的回答](https://stackoverflow.com/questions/14053055/how-to-get-the-value-of-a-cell-at-a-specified-position-in-an-excel-sheet-using-j/14062181#14062181)：

您可能希望使用[CellReference](http://poi.apache.org/apidocs/org/apache/poi/ss/util/CellReference.html)实用程序类来帮助您。它提供 Excel 样式字母+数字引用和 POI 样式基于 0 的行+列之间的转换。使用它时，您可以执行以下操作：

```
 Sheet sheet = workbook.getSheet("MyInterestingSheet");

 CellReference ref = new CellReference("B12");
 Row r = sheet.getRow(ref.getRow());
 if (r != null) {
    Cell c = r.getCell(ref.getCol());
 } 
```

这将让您在给定的 Excel 样式引用中找到单元格（如果已定义，则为 null）

# java - 如何选择 JTable 中最后插入的行？

> ID：14155429
> 
> 赞同：3
> 
> 时间：2013-01-04T10:33:30.777
> 
> 标签：java, swing, jtable

我有一个带有两列的 JTable 和一个使用与哈希映射一起使用的类的表模型。该地图的元素是表格行。

每次我添加一个新元素时，我都需要选择该元素，而不管任何排序。现在，我尝试使用以下方法：

```
int lastRow = table.convertRowIndexToView(tableModel.getRowCount() - 1);
table.setRowSelectionInterval(lastRow, lastRow); 
```

问题是，这仅在我以排序方式添加数据时才有效（例如，“A”、“B”、“C”，甚至因为“D”，例如，一旦添加就放在 A 之前） . 有人可以告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T11:23:42.450

问题很可能出在您的 中`TableModel`，因为您发布的代码很好。您提到您使用 a`HashMap`来存储`TableModel`. a 的问题`HashMap`是它没有任何排序。向其中添加元素可能会改变您在地图中获取元素的顺序。

最好使用尊重排序的数据结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T10:43:34.437

更好的方法是使用[prepareRendered 从 XxxTableModel 突出显示最大行索引](https://stackoverflow.com/a/6909039/714968)

[`JTable`也可以`Sorted and Filtered`](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)，然后最后添加的行在`JTables`视图中不可见

取决于[ListSelectionMode](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#selection)，但默认情况下你可以做

```
table.setRowSelectionInterval(lastRow, lastRow);
table.setColumnSelectionInterval(columnMinIndex, columnMaxIndex); 
```

为了获得更好的帮助，请尽快发布一个 SSCCE，简短，可运行，可编译，差不多，`JFrame`以及`JTable in JScrollPane`一个新`addRow`的从`swing.Timer`

# algorithm - 计算大量文件中单词出现的一般方法

> ID：14155431
> 
> 赞同：-2
> 
> 时间：2013-01-04T10:33:41.820
> 
> 标签：algorithm

这是一个算法问题。为了清楚起见，我对工作代码不感兴趣，而是对如何普遍处理任务感兴趣。

> 我们有一个有 4 个 CPU 的服务器，没有数据库。有 100,000 个 HTML 文档存储在磁盘上。每个文档的大小为 2MB。我们需要一种有效的方法来确定出现在该集合中的单词“CAMERA”（不区分大小写）的计数。

我的方法是

*   解析 HTML 文档以仅提取单词
*   然后对单词进行排序，
*   然后对该集合使用二进制搜索。

换句话说，我会创建线程，让它们使用所有 4 个 CPU 将 HTML 文档解析为单个大型单词集合文本文件，然后对其进行排序，然后使用二进制搜索。

你觉得这怎么样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T21:24:44.573

你试过grep吗？这就是我会做的。

可能需要进行一些实验才能找出传递大量数据的正确方法，并提前确保结果正确，因为这需要一点时间。

我不建议对那么多数据进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:09:17.847

您可以使用 Boyer-Moore 算法。很难说哪种编程语言适合制作这样的应用程序，但是您可以使用 C++ 制作它，以便直接优化您的本机代码。显然你需要使用多线程。
在 HTML 文档解析库中，您可以选择 Xerces-C++。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T10:51:38.780

如果您的文档位于单个本地硬盘驱动器上，您将受到 I/O 的限制，而不是 CPU。

我会使用非常简单的方法，简单地将每个文件串行加载到内存中并扫描内存以搜索目标词并增加计数器。

如果您尝试使用 4 个线程来加速它（例如每个线程 25000 个文件），它可能会使其变慢，因为 I/O 不喜欢来自竞争进程/线程的重叠访问模式。

但是，如果文件分布在多个硬盘驱动器上，则应启动与驱动器一样多的线程，并且每个线程应仅从该驱动器读取数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T10:53:44.793

好吧，这不是一个完整的伪代码答案，但我认为没有。要获得最佳性能，您需要了解很多有关硬件架构的知识。以下是注释：

1.  根本**不需要对数据进行排序**，也不需要使用二分查找。只需读取文件（从磁盘顺序读取每个文件），然后搜索是否出现相机一词。
2.  程序中的**瓶颈很可能是 IO**（磁盘读取），因为磁盘访问比 CPU 计算慢得多。因此，要优化程序 - 应该专注于优化磁盘读取。
3.  要优化磁盘读取，应该知道它的架构。例如，**如果您只有一个磁盘（并且没有 RAID），**假设磁盘可以同时处理单个请求，那么多线程实际上没有意义。如果是这种情况 - 使用单个线程。
4.  但是，如果您有多个磁盘 - 无论您有多少内核，您都应该**生成 #disks 线程**（假设文件在磁盘之间均匀分离）。既然是瓶颈，通过多个线程同时向磁盘请求数据，你就可以让它们都工作，有效地减少时间消耗。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T10:54:40.490

就像是？

```
htmlDocuments = getPathsOfHtmlDocuments()
threadsafe counter = new Counter(0)
scheduler = scheduler with max 4 threads
for(htmlDocument: htmlDocuments){
  scheduler.schedule(new SearchForCameraJob("Camera",htmlDocument,counter))
}
wait while scheduler.hasUnfinishedJobs
print Found camera +counter+ times

class SearchForCameraJob(searchString, pathToFile, counter){
    document = readFile(pathToFile);
    while(document.findNext(searchString)){
    counter.increment();    
   }
} 
```

# intellij-idea - IntelliJ Datanucleus Enhancer 插件不起作用

> ID：14155437
> 
> 赞同：3
> 
> 时间：2013-01-04T10:34:03.360
> 
> 标签：intellij-idea, datanucleus

我正在开发的项目使用 Datanucleus 2.0.3，因此我使用这些库进行增强（插件也配置为使用模块依赖项）。Ubuntu 12.4 机器上的 IntelliJ 版本 12.0.1。我知道 2.0.3 是古老的历史，但至少现在升级它对我来说不是一个选择。

从 gradle 开始一切正常。我按项目导入 IntelliJ，当我从 junit 运行测试时，我得到了通常的 ClassNotPersistenceCapableException，所以我记得我需要一个插件。

我安装了最新的插件（尝试了 beta 和最后一个稳定版本）并配置了插件来增强我的这个模块。我选择了 JDO 并应用了它，它发现了所有为持久性注释的类，我重建了整个项目，再次运行测试并出现同样的错误。

我注意到/检查了一些事情： - Enchaner 在“Build / Datanucleus Enhancer”中打勾 - 寻找多个 datanucleus jar，但只有一个 - 在事件日志中的 IntelliJ 中没有看到任何消息说已经完成增强（gradle 增强器记录这样的消息） - 在 IntelliJ 中没有看到任何错误消息说增强失败，我也没有在 IntelliJ 之外找到任何日志文件（应该有吗？） - 当我手动添加构建的 gradle测试通过的测试类路径顶部的类 - 但这并不好 - 该模块的类路径上有以下 datanucleus 2.0.3 jar：datanucleus-core、datanucleus-enhancer、datanucleus-connectionpool、datanucleus-rdbms 和asm-3.1.jar （依赖项说它是 3.0-4.0 所以这个应该适合）

我不知道为什么它会看到这些类但没有增强它们，或者它确实尝试并默默地失败了......但是我不知道如何诊断问题

我没有想到其他想法，请告知要检查什么或尝试什么。

# actionscript-3 - 如何在 Flex 中处理 DataGrid Data Provider 值？

> ID：14155443
> 
> 赞同：-1
> 
> 时间：2013-01-04T10:34:26.593
> 
> 标签：actionscript-3, apache-flex, flex4, flex3

这是我在 Flex 应用程序中的 DataGrid 代码，但它给出了错误的输出..

```
<mx:DataGrid id="userListDataGrid" x="60" y="40" width="520" height="148" dataProvider="{schedule}">
    <mx:columns>
        <mx:DataGridColumn dataField="courseDate" headerText="Date"/>               
        <mx:DataGridColumn id="usertype" dataField="userType" headerText="User Type"/>          
        <mx:DataGridColumn id="button1" headerText="Reminder">
            <mx:itemRenderer>
                <mx:Component>
                    <mx:HBox  dataChange="join_changeHandler()">
                             <mx:Script>
                            <![CDATA[
                                import mx.controls.Alert;
                                import valueObjects.CalendarVO;
                                [Bindable]public var labelString:String = null;
                                public var calendar:CalendarVO;
                                protected function join_changeHandler():void
                                {
                                    for each(var cal:Object in outerDocument.schedule)
                                    {
                                        calendar = new CalendarVO();//Hear CalendarVO has Enum in java(HOST,ATTENDEE)only
                                        calendar.userType = cal.userType;
                                        //Alert.show(calendar.userType.toString());
                                        if(calendar.userType.toString() == "HOST")
                                        {
                                            join.visible = true;
                                            start.visible = false;
                                        }
                                        else
                                        {
                                            join.visible = false;
                                            start.visible = true;
                                        }
                                    }

                                }
                            ]]>
                        </mx:Script>
                        <mx:Button id="join" label="Join" borderColor="#5d93b9" color="#04becf">
                        </mx:Button>  
                        <mx:Button id="start" label="Start" borderColor="#5d93b9" color="#04becf"/>

                    </mx:HBox>
                </mx:Component>
            </mx:itemRenderer>
        </mx:DataGridColumn>    
    </mx:columns>
</mx:DataGrid> 
```

其实我的意图是 UserType 值

```
 Host----Start Button
Attendee----JOin Button will be visiable 
```

最后我想要这个输出但我没有得到..我认为有些东西是覆盖...给我建议..

![Fanally 我的 DataGrid Visiable 完全像这样..](../Images/8861f9449569b10d3376539c36abfebf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:17:21.137

最后我得到了结果，听到的是我的代码..

```
<mx:DataGrid id="userListDataGrid" x="60" y="40" width="520" height="148" dataProvider="{schedule}">
    <mx:columns>
        <mx:DataGridColumn dataField="courseDate" headerText="Date"/>               
        <mx:DataGridColumn dataField="courseName" headerText="Course Name"/>
        <mx:DataGridColumn id="usertype" dataField="userType" headerText="User Type"/>

        <mx:DataGridColumn headerText="Reminder">
            <mx:itemRenderer>
                <mx:Component>
                    <mx:HBox  dataChange="join_changeHandler()">

                        <mx:Script>
                            <![CDATA[
                                protected function join_changeHandler():void
                                {
                                  if(join.label == 'HOST')
                                        join.label="Start";
                                    else
                                        join.label="Join";
                                }
                            ]]>
                        </mx:Script>
                        <mx:Button id="join" label="{data.userType}" borderColor="#5d93b9" color="#04becf"/>
                    </mx:HBox>
                </mx:Component>
            </mx:itemRenderer>
        </mx:DataGridColumn>

    </mx:columns>
</mx:DataGrid> 
```

# xmpp - 将存在从一台 ejabberd 服务器复制到不同的 ejabberd 服务器

> ID：14155448
> 
> 赞同：0
> 
> 时间：2013-01-04T10:34:38.907
> 
> 标签：xmpp, ejabberd, user-presence

我们有一个独立的服务器，我们无法深入了解它。（如果我们可以是 roo，这已经解决了，但我们不能）它有 2 打用户的存在（即：电话、空闲、离开、假期、自定义等）。让我们将此服务器称为 A。让我们将其视为记录服务器（即：它为每个用户保留的存在是正确的）。

现在，我们有自己的 ejabberd（让我们称之为服务器 B）运行相同的 2 打用户，以及另外 2 打不在服务器 A 上的用户。每个人都使用服务器 B 与每个人进行日常 IM .

我们的目标是将服务器 A 上的 2 打用户的存在复制到服务器 B。

用例是这样的，服务器 A 上的用户将状态更改为“离开”，如果它将那个人从“可用”更改为“离开”，这将被推送到服务器 B。同样，它会将“on phone”的存在推送到服务器 B，在那里它会说 Tim 在“on phone”。

我怎样才能做到这一点？

我可以每 60 秒为每个用户“拉”一次存在，然后（仅在有变化的情况下）将其“推送”到服务器 B？我可以使用**mod_rest**或**mod_xmlrpc**之类的东西将存在写入服务器 B 吗？

一旦我们在几周内完成，我将在这里发布我的结果以供所有人受益，从而使社区受益。

# javascript - Facebook 发送请求返回错误

> ID：14155452
> 
> 赞同：-2
> 
> 时间：2013-01-04T10:34:56.237
> 
> 标签：javascript, php, facebook, facebook-graph-api, facebook-javascript-sdk

我正在尝试以这种方式与预先指定的收件人弹出对话框：

```
FB.init({
  appId      : 'MYAPPID',
  status     : true,
  cookie     : true, 
  xfbml      : true,  
  frictionlessRequests: true
}); 

function sendRequestToRecipients() 
{
    FB.ui({method: 'apprequests',
      message: 'You have just received a PP request.',
      to: '100000526845569'
    }, requestCallback);
}

sendRequestToRecipineds(); 
```

当弹出窗口打开时，我有错误：`An error occurred. Please try later`

当我查看弹出窗口的请求 URL 时，我看到以下内容：

[https://www.facebook.com/dialog/apprequests?message=You%20have%20just%20received%20a%20PP%20request.&to=100000526845569&api_key=&app_id=&locale=en_US&sdk=joey&display=popup&frictionless=false&next=http%3A% 2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D18%23cb%3Df23f09878cdaf1e%26origin%3Dhttp%253A%252F%252Fmyhost.com%252Ff1868d80900b7a%26domain%3Dmyhost.com%26relation%3Dopener2% 3Df27cb35acbd146c%26result%3D%2522xxRESULTTOKENxx%2522](https://www.facebook.com/dialog/apprequests?message=You%20have%20just%20received%20a%20PP%20request.&to=100000526845569&api_key=&app_id=&locale=en_US&sdk=joey&display=popup&frictionless=false&next=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D18%23cb%3Df23f09878cdaf1e%26origin%3Dhttp%253A%252F%252Fmyhost.com%252Ff1868d80900b7a%26domain%3Dmyhost.com%26relation%3Dopener%26frame%3Df27cb35acbd146c%26result%3D%2522xxRESULTTOKENxx%2522)

我认为一些信息尚未发送： `api_key, app_id`

怎么会？有任何想法吗？

使用 facebook 登录可以完美运行。多人选择器也是。

* * *

```
<script>
window.fbAsyncInit = function() {
 // init the FB JS SDK
FB.init({
  appId      : 'MYAPPID', // App ID from the App Dashboard
  channelUrl : '//mydomain.com/channel.html', // Channel File for x-domain communication
  status     : true, // check the login status upon init?
  cookie     : true, // set sessions cookies to allow your server to access the session?
  xfbml      : true,  // parse XFBML tags on this page?
  frictionlessRequests: true
});

};

 // Load the SDK's source Asynchronously

 (function(d, debug){
   var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
   if (d.getElementById(id)) {return;}
   js = d.createElement('script'); js.id = id; js.async = true;
   js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
   ref.parentNode.insertBefore(js, ref);
 }(document, /*debug*/ false));

function sendRequestToRecipients() {

    FB.ui({method: 'apprequests',
      message: 'You have just received a PP request.',
      to: '100000143396036'
    }, requestCallback);
  }

  function sendRequestViaMultiFriendSelector() {
    FB.ui({method: 'apprequests',
      message: 'My Great Request'
    }, requestCallback);
  }

  function requestCallback(response) {
    // Handle callback here
  }

 </script> 
```

这就是它在这里制作的方式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:53:12.770

尝试在调用之前异步加载 javascript SDK `FB.init()`（如果没有），如下所示：

```
<script>

  window.fbAsyncInit = function() 
  {
    FB.init({
      appId      : APP_ID,
      status     : true, 
      cookie     : true, 
      xfbml      : true,  
      frictionlessRequests: true
    });
    //Additional Code here
  };        

 // Load the SDK Asynchronously
 (function(d){
   var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
   if (d.getElementById(id)) {return;}
   js = d.createElement('script'); js.id = id; js.async = true;
   js.src = "//connect.facebook.net/en_US/all.js";
   ref.parentNode.insertBefore(js, ref);
   }
 (document));

</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T11:56:40.277

固定的。

奇怪，但是 ASYNC SDK 的存在把这一切搞砸了。

谢谢

# java - Java EE 5 安全注释在 glassfish v2 中的方法上被忽略

> ID：14155453
> 
> 赞同：3
> 
> 时间：2013-01-04T10:34:58.683
> 
> 标签：java, security, glassfish, java-ee-5, glassfish-2.x

我有一个简单的 EE5 应用程序，带有一个 Web 客户端和一个运行 glassfish 2 的 ejb 模块。ejb 中方法上的安全注释被忽略，但类级别的安全注释却没有。

例如我有以下bean：

```
 @Stateful(mappedName = "ejb/PurchaseOrderDao")
 @DeclareRoles("employees")
 @RolesAllowed(value = { "employees" })
 public class PurchaseOrderDao implements PurchaseOrderDaoLocal {

   @Resource
   private EJBContext ejbContext;

   @DenyAll
   public final void add(final PurchaseOrder instance) {
     log.debug("Is User in Role employees: {}", ejbContext.isCallerInRole("employees"));
     delegate.add(instance);
   }

   [...]
} 
```

每个用户都可以调用此方法。调试语句返回正确的值。

web.xml 中定义的 web 客户端中的 Web 资源的安全约束按预期工作，但不是 mwthods 上的注释中定义的那些。

在我的 application.xml 中，我定义了领域和角色。我将它们映射到 sun-application.xml 中。

可能是什么原因？这是 glassfish v2 的已知问题吗？它在 glassfish v3 中正常工作。

**其他资源：**

**sun-ejb-jar.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sun-ejb-jar PUBLIC "-//Sun Microsystems, Inc.//DTD Application Server 9.0 EJB 3.0//EN" "http://www.sun.com/software/appserver/dtds/sun-ejb-jar_3_0-0.dtd">
<sun-ejb-jar>
    <enterprise-beans>
    </enterprise-beans>
</sun-ejb-jar> 
```

**ejb-jar.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<ejb-jar xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:ejb="http://java.sun.com/xml/ns/javaee/ejb-jar_3_0.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/ejb-jar_3_0.xsd"
version="3.0">
    <display-name>ejb</display-name>
</ejb-jar> 
```

**应用程序.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<application xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:application="http://java.sun.com/xml/ns/javaee/application_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/application_5.xsd"
    id="ocea" version="5">
    <display-name>ocea</display-name>
    <module>
        <ejb>ejb.jar</ejb>
    </module>
    <module>
        <web>
            <web-uri>web.war</web-uri>
            <context-root>ocea</context-root>
        </web>
    </module>

    <security-role>
        <description>Employees</description>
        <role-name>employees</role-name>
    </security-role>
    <security-role>
        <description>Suppliers</description>
        <role-name>suppliers</role-name>
    </security-role>
    <library-directory>/lib</library-directory>
</application> 
```

**太阳应用程序.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sun-application PUBLIC '-//Sun Microsystems, Inc.//DTD Application Server 9.0 Java EE Application 5.0//EN' 'http://www.sun.com/software/appserver/dtds/sun-application_5_0-0.dtd'>
<sun-application>
    <security-role-mapping>
        <role-name>employees</role-name>
        <group-name>employees</group-name>
    </security-role-mapping>

    <security-role-mapping>
        <role-name>suppliers</role-name>
        <group-name>suppliers</group-name>
    </security-role-mapping>

</sun-application> 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>web</display-name>
  <!-- [...] -->
  <login-config>
    <auth-method>FORM</auth-method>
    <form-login-config>
      <form-login-page>/login</form-login-page>
      <form-error-page>/loginfailed</form-error-page>
    </form-login-config>
  </login-config>
  <security-constraint>
    <web-resource-collection>
      <web-resource-name>PublicContent</web-resource-name>
      <description>Publically available Content needs no authorization.</description>
      <url-pattern>/static/*</url-pattern>
      <url-pattern>/logout</url-pattern>
      <url-pattern>/loggedout</url-pattern>
      <url-pattern>/decorator</url-pattern>
    </web-resource-collection>
  </security-constraint>
  <security-constraint>
    <web-resource-collection>
      <web-resource-name>Add Requests</web-resource-name>
      <description>accessible by employees</description>
      <url-pattern>/requestadd</url-pattern>
      <url-pattern>/requestaddreal</url-pattern>
      <url-pattern>/orderadd</url-pattern>
    </web-resource-collection>
    <auth-constraint>
      <role-name>employees</role-name>
    </auth-constraint>
  </security-constraint>
  <security-constraint>
    <web-resource-collection>
      <web-resource-name>Add Bids</web-resource-name>
      <description>accessible by suppliers</description>
      <url-pattern>/bidadd</url-pattern>
    </web-resource-collection>
    <auth-constraint>
      <role-name>suppliers</role-name>
    </auth-constraint>
  </security-constraint>
  <security-constraint>
    <web-resource-collection>
      <web-resource-name>Webapplication</web-resource-name>
      <description>accessible by authorized users</description>
      <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
      <description>For Employees and Suppliers</description>
      <role-name>employees</role-name>
      <role-name>suppliers</role-name>
    </auth-constraint>
  </security-constraint>
  <!-- [...] -->
  <ejb-local-ref>
    <ejb-ref-name>ejb/Dao</ejb-ref-name>
    <local>ejb.dao.DaoLocal</local>
  </ejb-local-ref>
  <!-- [... other ejb-local-ref ...] -->
</web-app> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T02:31:40.103

您是否看过此页面： [如何保护 GlassFish 2 上的 Web 服务？](https://stackoverflow.com/questions/4819368/howto-secure-webservices-on-glassfish-2)

您还应该在 sun-ejb-jar.xml 中为您的 EJB 添加项目以满足身份验证要求。你也做过？

# windows-installer - 如何为 Win 7 安装分发 WinHlp？

> ID：14155454
> 
> 赞同：0
> 
> 时间：2013-01-04T10:34:59.000
> 
> 标签：windows-installer, redistributable

本文指出除非安装`.HLP`，否则文件不会在 Windows Vista 及更高版本上加载：http: [//support.microsoft.com/kb/917607](http://support.microsoft.com/kb/917607)`Update KB917607`

如何在`MSI`基于安装的情况下分发此更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:13:44.497

我的理解是 Microsoft 不提供重新分发此更新的权利。如果这是正确的，那么无论技术问题如何，您都可能不会按照您的建议去做。

作为安装先决条件的一般答案，请在引导程序中寻找对安装可再发行组件的支持。您很少应该考虑从您的 Windows Installer 程序包启动另一个可再发行组件。

# c# - 自动完成尝试捕获（非标准异常）

> ID：14155459
> 
> 赞同：4
> 
> 时间：2013-01-04T10:35:26.357
> 
> 标签：c#, exception, autocomplete

是否有调用自动完成 try catch 块的快捷方式。但主要问题是我不想捕捉简单的异常，而是捕捉所选代码段中可能发生的所有异常。

例如：

```
 try
        {
            Directory.CreateDirectory("test");
        }
        catch (IOException)
        {
            // code
        }
        catch (UnauthorizedAccessException)
        {
            // code
        }
        .
        .
        .
        . 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T10:37:14.653

不，这是不可能的，因为没有什么可以告诉您方法可以引发哪些异常（文档除外，这并不总是准确的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:40:55.870

我认为您在问两件事，1\. 抛出异常（自动完成 try catch 块） 2\. 在 catch 块中使用 Exception 类（用于捕获所有异常）。

下面的链接详细描述了 C# 中的异常处理。并且可以更好地回答您的问题。 [http://www.codeproject.com/Articles/125470/Exception-Handling-for-C-Beginners](http://www.codeproject.com/Articles/125470/Exception-Handling-for-C-Beginners)

# android - opencv4android cvcapturefromfile() 返回 NULL

> ID：14155461
> 
> 赞同：1
> 
> 时间：2013-01-04T10:35:49.140
> 
> 标签：android, opencv, ffmpeg

我在我的项目中使用opencv for android。但是当我调用方法 cvCreateFileCapture() 时，它总是返回 NULL。我知道这种方法在 Windows 或 Linux 中工作时需要编解码器，那么当我将此方法移植到 Android 时我该怎么办？FFMPEG 工作正常吗？如何构建使用 FFMPEG 解码输入视频文件的 opencv4android？谢谢。

这些是我的代码：

```
//Retrieve data from Java, and construct needed structures or instances
char* filePath = (char*)env->GetStringUTFChars(aviPath, false);

int result=-1;

LOGD(filePath);

CvCapture* pCvCapture = cvCreateFileCapture( filePath );
    //pCvCpature always NULL
if( NULL == pCvCapture)
{
    result = -100;
}
else
{
    cvReleaseCapture( &pCvCapture );
    result = 100;
}

env->ReleaseStringUTFChars(aviPath, filePath);

return (jint)result; 
```

# python - 如何在 QGraphicsItem 上使用 QGraphicsRotation

> ID：14155465
> 
> 赞同：1
> 
> 时间：2013-01-04T10:35:57.313
> 
> 标签：python, qt, pyqt, qgis

我有一个[QGraphicsItem](http://doc.qt.digia.com/qt/qgraphicsitem.html) (self.rb)。我想使用[QGraphicsRotation](http://doc.qt.digia.com/qt/qgraphicsrotation.html)围绕一个点（self.originPoint）旋转这个项目。但是当我尝试执行下面的代码时，它给了我下面显示的错误。有人可以帮忙吗？

> 在 canvasMoveEvent self.rb.setTransform(rotationItem) TypeError: QGraphicsItem.setTransform(QTransform, bool combine=False): argument 1 has unexpected type 'QGraphicsRotation'
> 
> Python 版本：2.7.2（默认，2011 年 6 月 12 日，15:08:59）[MSC v.1500 32 位（英特尔）]

**代码：**

```
def canvasPressEvent(self, event):
        self.rb = QgsRubberBand(self.canvas, True)
        self.originPoint = self.rb.boundingRect().center()
        if self.rb:return                    

def canvasMoveEvent(self,event):
        if not self.rb:return
        currpoint = self.toLayerCoordinates(self.layer,event.pos())
        angle = center.azimuth( currpoint )

        rotationItem = QGraphicsRotation()
        rotationItem.setAngle = angle
        rotationItem.setOrigin = QVector3D(self.originPoint)
        self.rb.setTransform(rotationItem) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:47:57.757

[QGraphicsItem.setTransform()](http://doc.qt.digia.com/qt/qgraphicsitem.html#setTransform)函数将QTransform[作为](http://doc.qt.digia.com/qt/qtransform.html)其第一个参数。让你措手不及的是[QGraphicsRotation](http://doc.qt.digia.com/qt/qgraphicsrotation.html)不是 QTransform！它处于不同的层次结构中；它继承自[QGraphicsTransform](http://doc.qt.digia.com/qt/qgraphicstransform.html)，后者继承自[QObject](http://doc.qt.digia.com/qt/qobject.html)。

所以你不能传入一个 QGraphicsRotation 来旋转你的 QGraphicsItem，这是违反直觉的。您必须制作一个 QTransform 来满足您的需求，并使用它。

或者 - 这可能更容易 - 使用[QGraphicsItem.setRotation()](http://doc.qt.digia.com/qt/qgraphicsitem.html#setRotation)和[QGraphicsItem.setTransformOriginPoint()](http://doc.qt.digia.com/qt/qgraphicsitem.html#setTransformOriginPoint)函数来应用您想要的转换，而不必担心自己创建任何转换对象。

希望有帮助！

# java - Android 项目获取 java.lang.NoClassDefFoundError

> ID：14155466
> 
> 赞同：0
> 
> 时间：2013-01-04T10:36:01.580
> 
> 标签：java, android, eclipse

我将项目 B 添加到 A 的 java 构建路径： ![在此处输入图像描述](../Images/fe1bf620ad3056c3b6861f13394da128.png)

并在我的 A.java 中导入 packageB：

`import com.example.mysensorlistener.MySensorListener;`

但仍然出现运行时错误：

```
01-04 18:31:38.533: E/dalvikvm(9746): Could not find class 'com.example.mysensorlistener.MySensorListener', referenced from method com.example.huaweiproj.HuaweiProj.<init> 
```

我该如何解决？不要告诉我直接复制和粘贴java文件....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:47:00.483

在项目属性中添加到项目库中，然后尝试导入。

# file - 在 Emacs 中打开文件的速度非常快，类似于 Sublime 的 Goto Anything

> ID：14155467
> 
> 赞同：17
> 
> 时间：2013-01-04T10:36:04.647
> 
> 标签：file, emacs, sublimetext2

是否可以像 Sublime Text 2 那样在 Emacs 中打开文件（`Cmd`+`P`或`Ctrl`+ `P`）？我非常想念这个功能。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-04T10:49:56.977

你试过[Helm](https://github.com/emacs-helm/helm)吗？它提供了统一的历史记录和缓冲区选择器，看起来与您想要的相似。您可以将`helm-mini`命令绑定到一个方便的键，如 F5。

![Helm-迷你](../Images/8b725ed90f3b9fd9fdc1b9027a1a9975.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-06T07:55:59.777

您可以查看[Projectile](https://github.com/bbatsov/projectile)。它基本上是为了提供类似于 的东西而创建的`C-p`，但也有很多额外的项目级功能。Projectile 还有一个 Helm 插件，可以使用 Helm 显示项目文件和缓冲区。

# spring - 使用 ExtJS + Spring + MySQL 的 Saas

> ID：14155470
> 
> 赞同：0
> 
> 时间：2013-01-04T10:36:22.930
> 
> 标签：spring, jpa, spring-security, saas, multi-tenant

我们有一个使用以下技术开发 SaaS 应用程序的想法。

**前端 HTML5 UI 框架**- ExtJS
**后端应用程序**- Spring + JPA
**数据库**- MySQL

请澄清以下事项。

1.  考虑到“现代 Web 应用程序应该是无状态的”这一事实以用于扩展目的，在这种情况下我如何管理会话？

2.  Spring Security 是否足够成熟以支持 SaaS 应用程序。

3.  作为一个 SaaS 应用程序，我需要对每个租户进行大量自定义（即在表单中显示自定义字段，在表格中显示自定义列）。实现这一目标的推荐方法是什么？

4.  根据登录的用户类型，我需要不同的应用程序外观和感觉。假设我需要根据用户角色显示/隐藏选项卡。如何做到这一点？这些角色是否需要下载到浏览器并根据用户角色切换 UI 元素？

5.  我选择使用单独的架构多租户。Hibernate 是要走的路还是我可以使用任何 JPA（EclipseLink）？

6.  我需要注意这种组合的任何其他技术限制。

任何输入都会有所帮助。

谢谢，约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:08:32.503

1：我拒绝“现代 Web 应用程序应该是无状态的”的前提，我希望看到一些关于该声明的引用。您可以在有状态的应用程序中实现可扩展性，就像您可以构建一个根本无法扩展的无状态应用程序一样。

2：更多的是一个“商业应用是否足够成熟”的问题？我会说是的，是的。根据您的应用程序的实际要求，它可能适合也可能不适合，但这与成熟度的关系不如功能。

3：根据提供的非常有限的信息很难说。从创建自定义视图实例（jsps、velocity-files、JSF2 视图或您使用的任何视图技术）到动态、数据库驱动的视图再到成熟的 CMS 平台。

4：见上面的答案 3。不过，我一般来说，您构建视图的方式是不呈现用户无权查看的元素。Spring-security 具有用于此类功能的标记库

5：同样，没有足够的信息。Hibernate 4 表面上支持多租户，但您必须验证它是否满足您的特定要求。AFAIK，JPA 标准中还没有多租户的概念。

6：毫无疑问，但不能根据您提供的信息说什么。您提到的技术之间没有固有的不兼容性，但始终存在限制。春天不能煮咖啡。JPA 在开车送孩子上学方面很糟糕。

# java - InputStream - 处理网络变化

> ID：14155471
> 
> 赞同：5
> 
> 时间：2013-01-04T10:36:32.227
> 
> 标签：java, android, network-programming, inputstream

我正在使用 Java 邮件 API 下载附件，每当网络状态发生微小变化时，我的应用程序就会卡住，我必须重新启动它，它甚至没有崩溃。这是代码片段：

```
InputStream is = bodyPart.getInputStream();

String fileName = MimeUtility.decodeText(bodyPart.getFileName());

// Downloading the file
File f = new File(Constants.getPath() + fileName);
try {
    FileOutputStream fos;
    fos = new FileOutputStream(f);

    byte[] buf = new byte[8*1024];
    int bytesRead;

    while ((bytesRead = is.read(buf)) != -1) {
    fos.write(buf, 0, bytesRead);
    }
    fos.close();
} 
```

处理这个问题的最佳方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T23:03:05.273

您的应用程序卡住了。解决方案是设置读取超时，如[本问题](https://stackoverflow.com/questions/4620102/how-to-properly-set-javamail-timeout-setting)所述。如果发生超时，将抛出 SocketTimeoutException。

# jquery - 使用jquery悬停效果定位列表

> ID：14155474
> 
> 赞同：1
> 
> 时间：2013-01-04T10:36:45.583
> 
> 标签：jquery, css, list, hover, positioning

需要帮助获取包装器 div 中的列表。此外，我作为“项目”的图像宽度略有不同，无论哪种方式我都觉得有解决方案，但是，我似乎无法找到它。如果有人知道淡化悬停效果的更简单代码，那可能是最简单的。jquery 在这里非常好，只是定位有问题。谢谢！

这是到目前为止的样子 - [http://marisareviewsfilms.com/demo](http://marisareviewsfilms.com/demo)

这就是我想要的样子 - [http://marisareviewsfilms.com/lisa#](http://marisareviewsfilms.com/lisa#)

我的 CSS（边框现在只是为了指导我）：

```
#wrapper {
width: 827px;
height: 577px;
padding: 0px;
margin-top: 50px;
margin-right: auto;
margin-left: auto;
border: 1px solid blue;
}

.gallery li {
float: left;
margin-left: 0px;
margin-right:0px;
margin-top: 0px;
margin-bottom: 0px;
list-style-type: none;
height: 577px;
display: ;
width: 129px;
position: relative;
border: 1px solid green;
}

img.grey {
position: absolute;
left: 0;
top: 0;
z-index: 10;
}

img.color {
position: absolute;
left: 0; 
top: 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:52:43.303

您的代码似乎很好。但是，浏览器默认设置会影响定位。

只需更改以下内容

1.  在 css 的开头应用一个[**reset css**](http://meyerweb.com/eric/tools/css/reset/)。
2.  将[**clearfix**](http://www.webtoolkit.info/css-clearfix.html)类添加到`ul.gallery`

**更新**

您使用的图像切片是`131px`，除了第一个和最后一个（`148px`分别是`151px`）。
所以在 CSS 中改变它：

```
.gallery li {
    width: 131px;
}
.gallery li:first-child {
    width: 148px;
}
.gallery li:last-child {
    width: 151px;
} 
```

但是，这适用于所有现代浏览器。
如果您想支持`IE7,8`，请将类添加到 first 和 last `li`，然后相应地放置 css（如上）。

```
<li class="first">
...
<li class="last"> 
```

**注意**：请删除绿色/蓝色边框，因为它们每个都需要 1px 宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:54:48.760

这里有几件事可以帮助您：

首先，如果将 margin: 0 和 padding: 0 添加到 .gallery，它会将其放置在包装器中。

其次，我会改变您导出图像的方式。弯曲的深色背景应该是 ul 的一部分，您可以在 css/图像中创建它。

然后，导出每列彩色块（具有透明背景），并按照您现在所做的方式定位它们。

这样做会少很多问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T10:55:55.887

在某些浏览器中`<ul>`（`.gallery`此处）有 40px `padding-left`，您可以使用[css 重置](http://meyerweb.com/eric/tools/css/reset/ "css reset")
来纠正它

或者通过写作

```
ul.gallery{
  padding-left:0;
} 
```

# php - 如何使用一个参数创建一个函数，该函数将在 php 中模糊图像

> ID：14155476
> 
> 赞同：-1
> 
> 时间：2013-01-04T10:36:50.123
> 
> 标签：php, imagemagick, blur

我正在为 php 使用 Image Magick（函数[Imagick::blurImage](http://pl1.php.net/manual/pl/imagick.blurimage.php)），它有 2 个参数 radius 和 sigma。如何根据模糊百分比计算这两个参数。

我需要的是一个功能

```
function blur($image, $percent) {
   // how to calculate sigma and radius
}

$image = new Imagick($_GET['image']);
blur($image, $_GET['blur']);
echo $image; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:35:39.433

我发现我用的都是一样的。

```
function blur($image, $percent) {
   $blur = $percent*20/100;
   $image->gaussianBlurImage($blur, $blur);
} 
```

# javascript - 使用 Jquery 动态更改图像 src 在 IE 和 firefox 中不起作用

> ID：14155480
> 
> 赞同：7
> 
> 时间：2013-01-04T10:37:02.557
> 
> 标签：javascript, jquery

我正在为电子邮件实施验证码。单击`linkEmail`按钮时，电子邮件模式将打开。`linkEmail`我必须在单击按钮时设置处理程序（CaptchaGenerator.ashx）生成的验证码图像。这是代码。

```
$(".linkEmail").click(function () {
  //Load captcha image
  $('.imgCaptcha').attr('src', '/Custom/AppCode/Utilities/CaptchaGenerator.ashx');
  $('#emailModal').modal();
}); 
```

上面的代码在 crome 中运行良好，但在 IE 和 firefox 中**无法运行。**尽管我尝试了以下方法，但没有运气。

HTML：

```
<p id="captchacontainerp" class="captchacontainer"></p>
-------------------------------------------------------------
$('#captchacontainerp').prepend($("<img id='imCaptcha' class='imgCaptcha' src='/Custom/AppCode/Utilities/CaptchaGenerator.ashx'></img>"));
-------------------------------------------------------------
var img = $('<img id="imCaptcha" class="imgCaptcha">');
img.attr('src', '/Custom/AppCode/Utilities/CaptchaGenerator.ashx');
$('#captchacontainerp').empty();
img.appendTo('#captchacontainerp');
---------------------------------------------------------------
$('#captchacontainerp').empty();
$('#captchacontainerp').append($("<img id='imCaptcha' class='imgCaptcha' src='/Custom/AppCode/Utilities/CaptchaGenerator.ashx'></img>")); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T10:38:48.710

IE 缓存所有 GET 请求，因此在您的请求 URL 中添加时间戳，例如：

```
$(".linkEmail").click(function () {
   //Load captcha image
   $('.imgCaptcha').attr('src', '/Custom/AppCode/Utilities/CaptchaGenerator.ashx?'+new Date().getTime());
   $('#emailModal').modal();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T10:39:20.750

您是否尝试在再次更改之前将 src 属性设置为 ''？此外，您使用的缓存设置是什么（本地和服务器上）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-27T08:08:38.677

如果您指定任何内联样式属性，例如高度或宽度，

```
<img src="themes/images/01.png" height="100" width="100" />
<img src="themes/images/01.png" style="height:100px; width=100px;" /> 
```

> 然后先将其删除并重试。

即使您使用样式标签从外部指定样式，

```
 #imageId{
    height : 100px;
    width : 100px;
  } 
```

然后也先将其删除并尝试。从图像中删除样式属性后，它将显示图像。

高度属性可能适用于 IE，但宽度属性不起作用。

如果上述解决方案不起作用，则：有时 PNG 文件也无法显示。所以尝试使用他们的 JPG 图片。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-24T12:24:28.937

尝试调用重新验证码按钮时我遇到了同样的问题。经过一番搜索，现在功能在几乎所有著名的浏览器（chrome、Firefox、IE、Edge、...）中都能正常工作：

```
function recaptcha(theUrl) {
  $.get(theUrl, function(data, status){});
  document.getElementById("captcha-img").src = "";
  setTimeout(function(){
    document.getElementById("captcha-img").src = "captcha?"+new Date().getTime();
  }, 0);
} 
```

'theUrl' 用于渲染新的验证码图像，在您的情况下可以忽略。最重要的一点是生成新的 URL，它会强制 FF 和 IE 重新渲染图像。

# android - 通过蓝牙将图像从硬件设备传输到 Android 中的 Android 设备？

> ID：14155483
> 
> 赞同：0
> 
> 时间：2013-01-04T10:37:12.200
> 
> 标签：android, bluetooth, bytearray, data-transfer

我正在开发一个蓝牙应用程序，我在其中创建了 Android 设备和硬件设备之间的连接。

我成功地从硬件设备**发送和接受文本数据。**

我在从硬件设备到 Android 设备的图像传输中遇到问题。

我正在使用以下代码从 BYTE ARRAY 创建位图并将其保存到 SDCard：

```
 public synchronized void connected(BluetoothSocket socket, BluetoothDevice device) {
        if (D) Log.d(TAG, "connected");

        // Cancel the thread that completed the connection
        if (mConnectThread != null) {
            mConnectThread.cancel();
            mConnectThread = null;
        }

        // Cancel any thread currently running a connection
        if (mConnectedThread != null) {
            mConnectedThread.cancel();
            mConnectedThread = null;
        }

        // Start the thread to manage the connection and perform transmissions
        mConnectedThread = new ConnectedThread(socket);
        mConnectedThread.start();

        //CREATE IMAGE FILE
        File empowered=new File(Environment.getExternalStorageDirectory(), "ImageFile.jpeg");

        if (empowered.exists()) {
            empowered.delete();
        }

        try {
            fos = new FileOutputStream(empowered.getPath());
        } catch (FileNotFoundException e1) {
            e1.printStackTrace();
        }
        try {

            //fos.write(buffer);
            bitmap = BitmapFactory.decodeByteArray(buffer , 0, buffer.length);

            bitmap.compress(CompressFormat.JPEG, 100, fos);

        } catch (OutOfMemoryError e) {
            e.printStackTrace();
        }catch (Exception e) {
            e.printStackTrace();
        }

        setState(STATE_CONNECTED);
    } 
```

**接收代码：**

```
public void run() {
        Log.i(TAG, "BEGIN mConnectedThread");

        // Keep listening to the InputStream while connected
        //while (true) {

        try {
            // Read from the InputStream
            bytes = mmInStream.read(buffer);
            if (bytes != -1) {
                //ensure DATAMAXSIZE Byte is read.
                int byteNo2 = bytes;
                int bufferSize = 7340;
                while(byteNo2 != bufferSize){
                    bufferSize = bufferSize - byteNo2;
                    byteNo2 = mmInStream.read(buffer,bytes,bufferSize);
                    if(byteNo2 == -1){
                        break;
                    }
                    bytes = bytes+byteNo2;
                }
            }
        }

    } catch (IOException e) {
        Log.e(TAG, "disconnected", e);
        testModeOnScreen.sendMailTest("emailAddress","Received bytes"+e.toString(),"IOEXCEPTION");
        connectionLost();
        //break;
    }
} 
```

# android - 如何在真实设备中查看我的应用程序的 sqlite db 的内容？

> ID：14155495
> 
> 赞同：4
> 
> 时间：2013-01-04T10:37:34.577
> 
> 标签：android, sqlite

我想在部署它的设备中查看在我的应用程序中创建的数据库的内容。我可以在 shell 中使用 sqlite 命令并在模拟器中查看，但不能在真实设备中查看。

谁能知道如何在真实设备中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T13:01:29.643

如果应用程序被标记为可调试，则不需要 root。您可以使用`run-as`adb 命令。

例如使用 sqlite ：

```
adb shell "run-as com.your.package sqlite3 databases/database_name" 
```

或复制并拉取数据库：

```
adb shell "run-as com.your.package cat databases/database_name > /sdcard/some_name"
adb pull /sdcard/some_name 
```

不幸的是，似乎 pre-ICS`run-as`有很多错误，例如问题[20792](https://code.google.com/p/android/issues/detail?id=20792)或[13965](https://code.google.com/p/android/issues/detail?id=13965)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T10:40:08.403

实际上你的**真实设备没有root**，所以你**没有访问** `/data/data/<Application>/database/`目录的权限。

只有一个解决方案**将该文件复制到外部存储**.. 并在**SQLiteManager**或任何其他**SQLite**工具中查看它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T10:41:34.167

我认为您需要有根设备才能访问 sqlite。

看看这个[讨论](https://stackoverflow.com/questions/4856210/access-sqlite-database-on-android-device)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T10:45:55.547

尝试这个，

您可以将数据库复制到您的 sdcard 中，您可以在其中看到您的数据库

```
 public void backup() {
        try {
            File sdcard = Environment.getExternalStorageDirectory();
            File outputFile = new File(sdcard,
                    "YourDatabase.db");

            if (!outputFile.exists()) 
                 outputFile.createNewFile(); 

            File data = Environment.getDataDirectory();
            File inputFile = new File(data,
                    "data/"+getPackageName()+"/databases/"+"YourDatabase.db");
            InputStream input = new FileInputStream(inputFile);
            OutputStream output = new FileOutputStream(outputFile);
            byte[] buffer = new byte[1024];
            int length;
            while ((length = input.read(buffer)) > 0) {
                output.write(buffer, 0, length);
            }
            output.flush();
            output.close();
            input.close();
        } catch (IOException e) {
            e.printStackTrace();
            throw new Error("Copying Failed");
        }
    } 
```

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T10:46:44.187

试试这个功能

`copyFile(new File("data/data/<app>/database"),new File("mnt/sdcard/...."))`.

```
public void copyFile(File filesrc, File filedst)
 {
  try
 {
  FileInputStream localFileInputStream = new FileInputStream(filesrc);
  FileOutputStream localFileOutputStream = new FileOutputStream(filedst);
  byte[] arrayOfByte = new byte[1024];
  while (true)
  {
    int i = localFileInputStream.read(arrayOfByte);
    if (i == -1)
    {
      localFileOutputStream.close();
      localFileInputStream.close();
      break;
    }
    localFileOutputStream.write(arrayOfByte, 0, i);
  }
}
catch (Exception localException)
{
  Log.d("XXX", "ExceptioncopyFile:" + localException.getMessage(), localException);
} 
```

}

# amazon-web-services - 如何使用 Jenkins 支持 S3 IAM 角色？

> ID：14155496
> 
> 赞同：1
> 
> 时间：2013-01-04T10:37:40.717
> 
> 标签：amazon-web-services, amazon-s3, jenkins, jenkins-plugins

我对詹金斯很陌生。我安装了[S3 插件](https://wiki.jenkins-ci.org/display/JENKINS/S3+Plugin)。我希望使用 AWS IAM S3 角色来使插件工作。

但是，我找不到在此插件中配置 IAM 角色的任何方法。我只能看到设置访问密钥和密钥。

有人在这个插件中使用过 IAM 角色吗？

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:26:57.953

IAM 角色在启动时分配给 EC2 实例。无需配置其他任何东西，因此您的 S3 插件应该会自动工作。这取决于支持 IAM 角色的插件，它看起来像根据您的链接所做的那样。您必须使用链接中的说明分配正确的存储桶策略。

# java - 无法生成 hibernate.reveng.xml，因为 hibernate.connection.url 是动态的

> ID：14155500
> 
> 赞同：5
> 
> 时间：2013-01-04T10:37:48.303
> 
> 标签：java, hibernate, hibernate-tools

我想生成一个**hibernate.reveng.xml**，但是 hibernate.cfg.xml 中的“ **hibernate.connection.URL** **”**是一个变量。

 **```
jdbc:jtds:sqlserver://${database.server.name}:1433/XXX_DB 
```

所以我的问题是如何让**休眠工具**知道变量在哪里定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T13:03:22.420

您可以在 ant 任务中指定**.properties**文件的路径（该文件将包含此内容）：

```
hibernate.connection.url=jdbc:mysql://127.0.0.1:1433/XXX_DB
hibernate.connection.username=xxx
hibernate.connection.password=yyy 
```

然后，在蚂蚁任务中：

```
<hibernatetool ...>

   <jdbcconfiguration configurationfile="pathTo/your.cfg.cml"
                      propertyfile="pathTo/your.file.properties"/> 
```

希望它有所帮助，迭戈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-06T11:05:53.750

您似乎期望在数据库连接 URl 中动态更改 IP 地址，并希望在运行时建立数据库连接。

*   如果是这样，您需要在项目中创建一个新的休眠配置实例。

或者

*   更改属性文件中的机器名称并重新启动服务器。

通常，应在构建项目之前确定数据库机器名称。这些机器详细信息应该作为输入传递给您的构建过程，它将相应地构建您的 DB URL（您可以使用 Spring 表达式语言来执行此操作）。**

# audio - MPlayer：独立改变音高和速度

> ID：14155501
> 
> 赞同：4
> 
> 时间：2013-01-04T10:37:54.407
> 
> 标签：audio, signal-processing, mplayer

我花了一些时间试验[MPlayer 从模式协议](http://www.mplayerhq.hu/DOCS/tech/slave.txt)：在一个自定义应用程序中，我有两个控件：一个用于改变音高，一个用于改变速度。

*使用 MPlayer API 中的scaletempo*过滤器和 *speed_set* / *speed_mult* 命令很容易实现。

但是，如果我尝试独立修改音高和速度，则会出现问题。举个例子：我希望能够将速度降低 20%，同时将音高调高两个或三个半音。

我尝试通过添加两个 scaletempo 过滤器来做到这一点，但没有成功：

```
af_add scaletempo=scale=1.0:speed=pitch
speed_mult 1.1224620482959342
af_add scaletempo=scale=0.8:speed=tempo 
```

此方法改变速度，保留原始音高。

是否有任何其他解决方案可以使用 MPlayer 或任何其他媒体播放器来做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T10:59:48.197

有趣的问题。就 mplayer 而言，[这](https://markplusplus.wordpress.com/2006/10/01/pitch-correct-play-speed-with-mplayer/)是一个想法，它看起来是免费的。[这](http://sourceforge.net/projects/scaletempo/)可能是你所追求的。当然，您可以使用[this](http://www.surina.net/soundtouch/)朝不同的方向发展。网上的东西挺多的。我希望这可以帮助您入门！干杯！

# jquery - 带有if结构的jquery

> ID：14155502
> 
> 赞同：0
> 
> 时间：2013-01-04T10:37:55.590
> 
> 标签：jquery, wordpress, conditional

如何使用 jquery 根据用户是否登录来调出两个不同的 div 之一？

对于我的 wordpress 网站，我有一个菜单项，我需要提示用户首先登录或注册（通过我的 fancybox iframe），如果已经登录则打开另一个 div（访问帖子）。这两个选项都已设置，我只是不知道如何将代码构造为 IF 结构或某种条件代码。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:48:59.363

不要使用 JQuery。登录用户与访问者内容之间的区别只能在**服务器端**进行。您不希望服务器仅向访问者发送针对已登录用户的信息。这使您的登录系统具有很强的渗透性——至少可以这么说——因为信息已经在客户端并且他可以很容易地访问它（例如，只需关闭 JS 或查看页面源代码）。

使用 WP 内置函数的基本结构是：

```
<?php if (is_user_logged_in()): ?>
    //logged user info
<?php else: ?>
    //login form
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T10:40:50.013

只需根据条件改变选择器：

```
var selector = loggedIn ? '#log-in' : '#view-posts';
$(selector).show(); 
```

显然，您需要更改选择器以实际匹配您的页面，以及`loggedIn`匹配您的条件的条件。

# jquery-ui - 隐藏在容器外的可拖动元素

> ID：14155503
> 
> 赞同：25
> 
> 时间：2013-01-04T10:37:57.620
> 
> 标签：jquery-ui, jquery-ui-draggable

使用 jQuery UI，我正在尝试创建一个带有两个可滚动容器的界面，每个容器都包含许多可拖动元素。用户可以将元素从一个容器拖到另一个容器。

*丢弃功能不是问题*。删除时，该元素将分离并在其新父项下的正确位置重新创建。

我的问题是，当容器已**应用时，****可拖动元素无法显示在其容器外`position:relative;`**，因此在拖动时，将元素移出容器边界时会消失。

这种默认行为是有意义的，因为通常用户希望在其容器内拖动一个元素。作为一种解决方法，我假设解决方案是使用可拖动属性“appendTo”，我认为这会将元素移到其容器之外，但不幸的是，这似乎没有任何效果。

* * *

DOM：（每个视图都是可滚动的，每个容器都有 position:relative 并且与容纳所有元素所需的一样大）

```
BODY
    VIEW 1
        CONTAINER
            DRAGGABLE ELEMENTS
    VIEW 2
        CONTAINER
            DRAGGABLE ELEMENTS 
```

Javascript：

```
$('div.card').draggable({
    appendTo: 'body',
    scroll: false //stops scrolling container when moved outside boundaries
}); 
```

请参阅 JSFiddle 以获得对该问题的简化说明。我不想用可放置的代码使示例变得臃肿，所以这只是说明了拖动问题。[http://jsfiddle.net/Em7Ak/](http://jsfiddle.net/Em7Ak/)

* * *

提前谢谢了。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-02-18T17:16:48.527

我不确定这是否会解决您的确切问题，但我遇到了这个问题以寻找相同的答案，这就是我发现的。

在 .draggable() 的选项中，传入`helper:'clone'`以自动克隆项目，以便将其拖出容器。并用于将其放在标签`appendTo:'body'`的末尾。`<body>`所以在我的情况下，我的选项看起来有点像这样，`revert:'invalid'`如果它没有被丢弃在某个有效的地方，则添加它会导致它弹回：

```
jQuery(".myselector").draggable({
    helper: 'clone',
    revert: 'invalid',
    appendTo: 'body'
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-10-08T00:49:30.373

使用“克隆”助手并在拖动时隐藏该项目并在停止时再次显示它。

```
$(".removalbe-recom").draggable({
    appendTo: "body",
    helper: "clone",
    revert: "invalid",
    cursor: "move",
    containment: "document",
    zIndex: 10000,
    scroll:false,
    start: function (event, ui) {
    $(this).hide();
    },
    stop: function (event, ui) {
        $(this).show();
    }
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-05T08:39:03.587

几个月前我遇到了类似的问题。

**我的需要是能够使用其他人的一个大容器的自动滚动**

这是我有关更多详细信息的问题，[JqueryUI，将元素拖动到包含大表的滚动可拖放 div 的单元格中](https://stackoverflow.com/questions/12670124/jqueryui-drag-elements-into-cells-of-a-scrolling-dropable-div-containing-large)

我找到了解决方法。想法是在帮助器构造回调期间将元素克隆附加到可滚动容器，然后在 1ms 后使用 setTimeout 函数将帮助器附加到主体。辅助位置必须映射到鼠标位置以避免偏移问题。

这是我的解决方案（JSFiddle 现在似乎已关闭，如果窗口中没有显示代码，请稍后再试）：http: [//jsfiddle.net/QvRjL/134/](http://jsfiddle.net/QvRjL/134/)

```
$('[id^="drag-"]').each(function() {
    $(this).draggable({
        opacity: 0.7,
        cursorAt: { top: 15, left: 50 },
        appendTo: 'body',
        containment: 'body',        
        scroll: true,
        helper: function(){ 
            //Hack to append the cartridge to the body (visible above others divs), 
            //but still belonging to the scrollable container  
            $('#container').append('<div id="clone" class="cartridge">' + $(this).html() + '</div>');   
            $("#clone").hide();
            setTimeout(function(){
                $('#clone').appendTo('body'); 
                $("#clone").show();
            },1);
            return $("#clone");
        }    
    });
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T11:57:14.543

添加位置：绝对卡样式：

```
div.card {
    position:absolute;
    width:100px; height:50px;
    border:1px black solid;
    background-color:orange;
    text-align:center; vertical-align:middle;
} 
```

# java - 如何在不使用 ANT 的情况下生成 xslt 报告

> ID：14155506
> 
> 赞同：2
> 
> 时间：2013-01-04T10:38:05.017
> 
> 标签：java, xslt, ant, selenium, testng

我正在从事硒测试项目。我需要在不使用 ANT 的情况下构建 XSLT 报告。我引用了这个链接：[Junit create report without ant/maven](https://stackoverflow.com/questions/9890530/junit-create-report-without-ant-maven)，但给定的解决方案是针对 JUnit 的。我正在使用TestNG。那么是否可以在不使用 ANT 的情况下使用 TestNG 创建 xslt 报告。

谢谢， 维卡斯

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-18T21:17:35.483

使用以下过程：

*   安装[testng-xslt](https://github.com/prashanth-sams/testng-xslt-1.1.2)
*   [使用 testng-xslt](http://seleniumtesting-nx.blogspot.com/2012/03/testng-xslt-report-generation.html)配置报告

# android - 版本 4.0.3 的 Android Http 请求问题

> ID：14155509
> 
> 赞同：0
> 
> 时间：2013-01-04T10:38:19.087
> 
> 标签：android, http, httpclient

我遇到了使用 HttpClient 的 http 请求，该请求适用于 2.2 或 2.3.X 版本。但是当我尝试从版本为 4.0.3 的 android 平板电脑发送该请求时，它给了我**401 错误**

这是我已经实现的代码。

```
HttpClient client = new DefaultHttpClient();
    HttpConnectionParams.setConnectionTimeout(client.getParams(), 10000); //Timeout Limit
    HttpResponse response;
    JSONObject json = new JSONObject();
    try{
        HttpPost post = new HttpPost("MYURL");
        json.put("username", username);
        json.put("password", password);
        StringEntity se = new StringEntity( json.toString());  
        se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
        post.setEntity(se);
        response = client.execute(post);
        /*Checking response */
        statusCode = response.getStatusLine().getStatusCode();
        System.out.println("Status Code=>" + statusCode);
        if (statusCode == 200) {
            result = EntityUtils.toString(response.getEntity());
            Log.v("Login Response", "" + result);
        } else {
            response = null;
        }
    }
    catch(Exception e){

        e.printStackTrace();
        //createDialog("Error", "Cannot Estabilish Connection");
    } 
```

用你最好的建议帮助我解决这个问题。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:41:37.953

```
I'm getting stuck with http request using HttpClient that is working fine with 2.2 or 2.3.X versions. 
```

我对`NetworkOnMainThread`异常有疑问。

看看[如何修复 android.os.NetworkOnMainThreadException？](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)

Android [AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)是最好的解决方案。

**更新：**

此外，您还会收到 401 错误状态代码。

```
401 means "Unauthorized", so there must be something with your credentials. 
```

只需在请求 Web 服务之前检查凭据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T10:49:24.713

您正在主线程上运行网络操作。使用异步任务在后台线程中运行网络操作。这就是为什么你得到`android.os.NetworkOnMainThreadException`.

在这样的异步任务中执行此操作：

```
class MyTask extends AsyncTask<String, Void, RSSFeed> {

    protected void onPreExecute() {
        //show a progress dialog to the user or something
    }

    protected void doInBackground(String... urls) {
        //do network stuff
    }

    protected void onPostExecute() {
        //do something post execution here and dismiss the progress dialog
    }
 }

 new MyTask().execute(null); 
```

如果您不知道如何使用异步任务，这里有一些教程供您参考：

[教程 1](http://mobileorchard.com/android-app-developmentthreading-part-2-async-tasks/)
[教程 2](http://www.vogella.com/articles/AndroidPerformance/article.html)

这是[官方文档](https://developer.android.com/reference/android/os/AsyncTask.html)

# php - 从一个页面导航到另一个页面

> ID：14155511
> 
> 赞同：0
> 
> 时间：2013-01-04T10:38:21.190
> 
> 标签：php, forms, wordpress

我正在创建 WP 插件并在用户单击按钮时导航到另一个页面。

```
echo '<form name="coup" action="/DbForm.php" >';
         echo '<input type="submit" value="Add new Cities" />';
    echo '</form>'; 
```

当我点击链接时，它会转到我的

```
Site_address/wp-admin/DbForm.php? 
```

这背后的原因是什么。你能告诉我原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:06:24.680

因为您正在提交一个空表单，其操作位于`/DbForm.php`. 为什么不能使用简单的`<a>`元素？

```
<a href="/DbForm.php">Add new Cities</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:03:37.970

您需要使用 Javascript：
[http ://html-bin.appspot.com/aghodG1sLWJpbnIMCxIEUGFnZRiu5UkM](http://html-bin.appspot.com/aghodG1sLWJpbnIMCxIEUGFnZRiu5UkM)

希望我有所帮助。

# javascript - 工具提示字符限制 -title 属性

> ID：14155513
> 
> 赞同：3
> 
> 时间：2013-01-04T10:38:39.560
> 
> 标签：javascript, html, tooltip

我有一个标签，其中显示了 30 个字符的字符串。如果字符串超过，我会在 30 处中断，后跟省略号 (...)，并使用实际文本设置该标签的标题属性。

因此，如果我的文字是 100 个字符，那么我的标签将显示 30 个字符……但在悬停时我可以读取 100 个字符。

问题：工具提示似乎在某个点（大约 400-500）有一个限制，因此我的目的失败了。

有什么方法可以在我的标签工具提示上显示任何字符长文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:04:44.447

对于这种情况，您可以使用 jquery 工具提示。您还可以在工具提示中使用图像，例如[jqfaq.com](http://jqfaq.com/how-to-add-icons-and-title-to-jquery-tooltip/)示例。这是 jquery-ui 工具提示的文档[。](http://api.jqueryui.com/tooltip/)

使用工具提示应该是这样的，

```
$( ".selector" ).tooltip(); 
```

# java - 优化java代码以获得更好的内存

> ID：14155519
> 
> 赞同：0
> 
> 时间：2013-01-04T10:39:20.137
> 
> 标签：java, algorithm, jakarta-ee

我需要编写一个函数来执行以下功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:43:14.483

请注意：

```
fqField.substring(quoteEnd+1, fqField.length()); 
```

使用被引用字符串的字符数组，而不是创建一个新字符串。也就是说，如果我有一个 100,000 个字符的数组并且我取了一个 2 个字符的子字符串，那么该子字符串将引用原始的 100,000 个字符。即使您处置对原始字符串的引用也是如此。

如果你这样做：

```
new String(fqField.substring(quoteEnd+1, fqField.length())); 
```

那么这将创建一个带有新底层字符数组的新字符串。然后，您可以处理原件，并且您不会为原件消耗内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T10:47:45.397

您正在创建的 ArrayList “前缀”具有列表的默认大小。您可以为其添加合理的尺寸。

使用 char 而不是 String 怎么样，您可以选择将其作为参数传递吗？

如何从一开始就将“前缀”设置为字符串（或字符）数组，而不是先将其设置为 ArrayList，然后再对其进行转换。

# c# - 从另一个页面中的另一个类访问按钮

> ID：14155547
> 
> 赞同：-1
> 
> 时间：2013-01-04T10:40:56.540
> 
> 标签：c#, asp.net, vb.net, c#-4.0, c#-3.0

我的目标是访问按钮并使 vb.net 中另一个类的可见性为 false

```
Dim obj = New MyClass()
obj.btnName.Visible = False 
```

但它抛出错误`"Object reference not set to an Instance"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:53:43.243

尝试调试以查看您的按钮在您访问它时是否已初始化，我认为不是。这可能是您在加载表单或页面之前使用此按钮。由于实例化按钮将发生在代码的初始化部分。

尝试初始化你的类

```
protected void Page_Load(object sender, EventArgs e)
{
   dim obj = new Myclass();
} 
```

并在“MyClass”类的 New 函数中确保您正在初始化所有要使用的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:12:33.180

嗯怎么样？

将 obj 调暗为 New MyClass()

obj.btnName.Visible = False

# c# - 在数据库中上传检查

> ID：14155548
> 
> 赞同：4
> 
> 时间：2013-01-04T10:41:00.543
> 
> 标签：c#, sql, epplus

我正在`xlsx`使用免费库在数据库中上传文件`EPPlus`。这工作正常，上传在数据库中可见。
我想检查上传状态，如“ `upload successfull`”或“ `upload failed`”。

有没有办法做到这一点？

我希望我已经清楚并为我糟糕的英语感到抱歉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:45:23.933

这取决于您如何上传文件。如果不是通过 ajax，那么您可以根据成功或失败进行重定向。

```
try
{
    // Code to process upload
    Response.Redirect("/success.aspx");
}
catch (Exception)
{
    Response.Redirect("/failure.aspx");
} 
```

# excel - Excel VBA 调用 .exe，该 exe 被编程为在调用者工作簿中修改/更改

> ID：14155550
> 
> 赞同：0
> 
> 时间：2013-01-04T10:41:20.073
> 
> 标签：excel, vba, exe

是否可以调用`.exe`并操作此调用者工作簿`VBA`？`.exe`（如添加工作表，修改一些数据）。

我如何实现这一目标？
可以`.exe`访问调用者工作簿吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:12:58.423

有两种方法可以做到这一点： 1\. 运行 VBA 宏并通过命令行发送路径。.exe 然后打开工作簿并执行其操作。2\. 更难：VBA 仍然发送路径/或工作簿名称，exe 找到所有正在运行的 excel.exe 进程，将它们连接起来并检查它们的工作簿。如果您使用“您的”工作表找到了该进程，则可以通过 COM 控制它。

第二种方法应该更稳定，但 1\. 也是可能的，特别是如果您可以保存对工作簿的所有更改并通过 VBA 保存退出 Excel。您的程序可以简单地等到文件被解锁并且可写。

# c# - Visual Studio 调试速度慢得离谱

> ID：14155561
> 
> 赞同：17
> 
> 时间：2013-01-04T10:41:40.013
> 
> 标签：c#, visual-studio-2010, debugging

我正在尝试使用带有布尔条件的断点调试 VS2010 中的程序。这个特殊的断点非常慢，使我的程序运行速度比没有条件或使用常规无条件断点慢数百倍。

我的问题是，这是 Visual Studio 的常见问题吗，我不敢相信调试器会这么慢？布尔表达式非常简单，它只是说当 i == x 在 for 循环中时中断程序。

任何帮助表示赞赏，因为它使调试非常痛苦。

谢谢理查德

```
 public static RawNetCalculationResults newCATXLNets(IList<Loss> RawLosses, IList<ReinsuranceProgramme> Programme) //Loss contains the properties Year, EventID, Loss Value
    {
        List<Recoveries> NetRawLosses = new List<Recoveries>(RawLosses.Count * Programme.Count);    //Initiate list with required capacity

        //Loop over each element in RawLosses List and do some calculations
        foreach (var e in RawLosses)
        {                           //<----BREAK POINT HERE (e.Year == x)
            foreach (var layer in Programme.Where(x => x.Type == ReinsuranceType.CATXL))
            { 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-04T10:44:40.167

是的，条件断点很慢。

作为替代方案，您可以使用 Debug.Assert：

```
Debug.Assert( i != x ); 
```

这将导致断言何时触发`i == x`，您可以从那里进行调试。

# git - 存在于 branchA 和 branchB 中的文件列表

> ID：14155562
> 
> 赞同：1
> 
> 时间：2013-01-04T10:41:40.183
> 
> 标签：git

假设我们需要获取`branchA`和中存在的文件列表`branchB`。

简单的解决方案是为每个分支获取两个单独的文件列表，然后将它们与`bash`或其他东西相交：

```
# pseudocode
let α = git ls-tree -r --name-only branchA
let β = git ls-tree -r --name-only branchB
intersect α β 
```

似乎`ls-tree`命令在这里不是排他的方法。有没有办法只通过 git 得到答案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-06T15:04:44.843

也许是这样的（假设是一个`bash`外壳）：

```
comm -12 <(git ls-tree -r --name-only branchA | sort) <(git ls-tree -r --name-only branchB | sort) 
```

如果您没有`bash`，或者您`bash`的年龄足够大，不支持这种形式的流程替代，您可以将输出保存到临时文件中：

```
git ls-tree -r --name-only branchA | sort > /tmp/file1
git ls-tree -r --name-only branchB | sort > /tmp/file2
comm -12 /tmp/file1 /tmp/file2
rm /tmp/file1 /tmp/file2 
```

我不认为你可以单独使用你想要的东西`git`，因为任何形式`git diff`都会查看文件的*内容*以及名称，而且看起来你只想要一个通用名称列表，无论是否内容相同与否..

# azure-storage - Azure 存储客户端的推荐生命周期？

> ID：14155564
> 
> 赞同：1
> 
> 时间：2013-01-04T10:41:44.197
> 
> 标签：azure-storage

`CloudBlobClient`Azure 存储客户端（如和）`CloudQueueClient`的推荐生命周期是`CloudTableClient`多少？

我通常创建一个`CloudStorageAccount`我传递的（通过注入） - 我应该对例如 a 做同样的事情`CloudBlobClient`还是应该在每次使用时创建一个新实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T08:04:52.680

一个小时前我刚刚问了同样的问题：[正确的 CloudTableClient 实例生命周期？](https://stackoverflow.com/questions/14169539/proper-cloudtableclient-instance-lifecycle)

因为 *Client 类不是线程安全的，所以应该为每个请求实例化它们。

# oracle - Oracle Enterprise Manager 12c 插件开发

> ID：14155569
> 
> 赞同：2
> 
> 时间：2013-01-04T10:42:19.250
> 
> 标签：oracle, plugins

我是为 Oracle Enterprise manager 开发插件的新手。我已经设置了我的工作环境（安装了 Adob​​e Flex builder、Extensibility Development Kit(Edk) 和所有）。我还成功地将示例插件部署到 OEM 网格控件。现在我有一些问题可以由已经在 OEM 中完成插件的人解决（希望 SE 包含一些）。我在oracle的论坛上发帖，但没有得到任何回应。这是我的查询：

```
1) Is it possible to add the Sample plugin created also to be listed when selecting the targets from Enterprise>Monitoring>Logs? If yes, how can I do that.
2) Also, in that case can I add a custom UI instead of showing logs in table. 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:26:46.873

对于那些遇到同样问题并通过谷歌到达这里的人，请访问[https://forums.oracle.com/forums/thread.jspa?threadID=2481432&tstart=15](https://forums.oracle.com/forums/thread.jspa?threadID=2481432&tstart=15)了解详细信息。

# java - JPA 多对多关系：零个或多个

> ID：14155570
> 
> 赞同：1
> 
> 时间：2013-01-04T10:42:21.887
> 
> 标签：java, jpa

我是 JPA 的新手，所以我有一个关于多对多关系的问题（零到更多的实现）：

如果你有这样的关系：

![在此处输入图像描述](../Images/289164ae41869aa52744a41956a329cf.png)

如前所述，一个产品可以在没有订单的情况下存在（通常它们将在新产品到达时添加）稍后它可以用于一个或多个订单。订单必须包含至少 1 个或多个产品。

你必须说明关系

```
@Entity(name = "ORDERS") 
public class Order {
       @Id 
       @Column(name = "ORDER_ID", nullable = false)
       @GeneratedValue(strategy = GenerationType.AUTO)
       private long orderId;

   @Column(name = "CUST_ID")
   private long custId;

   @Column(name = "TOTAL_PRICE", precision = 2)
   private double totPrice;     

   @ManyToMany(fetch=FetchType.EAGER)
   @JoinTable(name="ORDER_DETAIL",
           joinColumns=
           @JoinColumn(name="ORDER_ID", referencedColumnName="ORDER_ID"),
     inverseJoinColumns=
           @JoinColumn(name="PROD_ID", referencedColumnName="PROD_ID")
   )
   private List<Product> productList;       
 ...............
   The other attributes and getters and setters goes here
} 
```

和

```
@Entity(name = "PRODUCT") 
public class Product {
       @Id
       @Column(name = "PROD_ID", nullable = false)
       @GeneratedValue(strategy = GenerationType.AUTO)
       private long prodId;

   @Column(name = "PROD_NAME", nullable = false,length = 50)
   private String prodName;

   @Column(name = "PROD_DESC", length = 200)
   private String prodDescription;

   @Column(name = "REGULAR_PRICE", precision = 2)
   private String price;

   @Column(name = "LAST_UPDATED_TIME")
   private Date updatedTime;
   @ManyToMany(mappedBy="productList",fetch=FetchType.EAGER)
   private List<Order> orderList;       
   ...............
   The other attributes and getters and setters goes here
} 
```

我想知道零对多的关系是否仍然可以仅保留（目前）未链接到订单的产品？

但是当订单使用产品时，应该更新产品中的订单列表，并且也应该更新产品列表。我如何执行此操作或 JPA 是否为我执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:52:01.413

1.  您仍然可以在没有订单的情况下保留产品。

2.  您必须手动更新关系的另一方。JPA 不会为您这样做。（当然，如果您保存一个订单，然后重新获取产品，您的订单集合将被更新）

**编辑** 解释第二点：

```
Product persitentProduct = ... //some product
Order newOrder = new Order();
newOrder.getProducts().add(persitentProduct);
//at this point : persistentProduct.getOrders().contains(newOrder)==false
entityManager.persist(newOrder);
//at this point nothing has changed on the other side of the relationship:
// i.e. : persistentProduct.getOrders().contains(newOrder)==false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:22:39.617

然后你会得到类似的东西：

```
public class Order {
private List products;
...
public void addProduct(Product product) {
    this.products.add(product);
    if !(product.getOrders().contains(product) {
        product.getOrders().add(this);
    }
}
...
}

public class Product {
    private List orders;
    ...
    ...
} 
```

对？还是我看错了

# php - 通过未检查的未定义变量

> ID：14155572
> 
> 赞同：0
> 
> 时间：2013-01-04T10:42:30.467
> 
> 标签：php, ajax

我不确定问题出在哪里，但是我正在通过 ajax 传递一个变量，如果我在使用 !$varname 检查它时传递一个空白，它不会被捕获

这是我的ajax函数：

```
var subscribe = function(){
  var dataString = $("#subinput").val();
   $.ajax ({
   url: '<?php echo $path ?>',
   type: 'POST',
   data: 'email=' + dataString.value,
   datatype: 'JSON',
   success: function(results){
     if(results.err == '1'){
        $('.onconfirmation').css('color','#f00');
     }else{
        $('.onconfirmation').css('color','#5A5A5A');
     }

     $('.onconfirmation').innerHTML(results.message);
     $('.onconfirmation').fadeIn();
     //alert(results);
   }
 }); 
```

这是我的PHP：

```
<?php
$email = $_POST['email'];

if(!$email){
    $o['err'] = '1';
    $o['message'] = 'Please do not leave this field blank';
}/*elseif(filter_var($email, FILTER_VALIDATE_EMAIL)){
    $o['err'] = '1';
    $o['message'] = 'Please enter a valid email address';
}else{
    $o['err'] = '0';
    $o['message'] = 'Thank you for your subscription';
}*/

ob_start();
var_dump($o);
$out = ob_get_clean();

mail('[REDACTED]','debug',$out);
//$o = json_encode($o);
//return ($o);
?> 
```

正如您所看到的，它目前处于调试状态，但如果我将一个空白值传递给它，我收到的电子邮件是`NULL`. 如果我通过电子邮件给自己发送`$email`变量而不是`$out`变量，我收到的电子邮件是`undefined`，但是如果我`!`从 if 语句中删除 ，我收到的电子邮件是：

```
array(2) {
  ["err"]=>
  string(1) "1"
  ["message"]=>
  string(36) "Please do not leave this field blank"
} 
```

我确定我只是错过了一些非常简单的东西，我一直都是，但老实说，我无法弄清楚这一点。任何帮助将不胜感激。干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:46:20.927

```
var subscribe = function(){
  var dataString = $("#subinput").val();
   $.ajax ({
   url: '<?php echo $path ?>',
   type: 'POST',
   data: { email : dataString },
   datatype: 'JSON',
   success: function(results){
     if(results.err == '1'){
        $('.onconfirmation').css('color','#f00');
     }else{
        $('.onconfirmation').css('color','#5A5A5A');
     }

     $('.onconfirmation').innerHTML(results.message);
     $('.onconfirmation').fadeIn();
     //alert(results);
   }
 }); 
```

看线

> 数据：{电子邮件：数据字符串}

Once you have the val() you shouldn't use " .value " and when POST-ing data this way is the correct way to add keys and values.

At PHP do those things..

```
<?php
$o = array();

if(!isset($_POST['email']) OR empty($_POST['email'])){
    $o['err'] = '1';
    $o['message'] = 'Please do not leave this field blank';
    echo json_encode($o);
    exit();
}

$email = $_POST['email']; 

.......other code 
```

The exit() stops PHP from reading the next lines at your file so IF emial is not set or empty it wont do any further tasks.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T10:58:00.053

Replace this:

```
var subscribe = function(){
  var dataString = $("#subinput").val();
   $.ajax ({
   url: '<?php echo $path ?>',
   type: 'POST',
   data: 'email=' + dataString.value,
   datatype: 'JSON',
   success: function(results){
     if(results.err == '1'){
        $('.onconfirmation').css('color','#f00');
     }else{
        $('.onconfirmation').css('color','#5A5A5A');
     }

     $('.onconfirmation').innerHTML(results.message);
     $('.onconfirmation').fadeIn();
     //alert(results);
   }
 }); 
```

with this:

```
var subscribe = function(){
  var dataString = $("#subinput").val();
   $.ajax ({
   url: '<?php echo $path ?>',
   type: 'POST',
   data: 'email=' + dataString,
   datatype: 'JSON',
   success: function(results){
     if(results.err == '1'){
        $('.onconfirmation').css('color','#f00');
     }else{
        $('.onconfirmation').css('color','#5A5A5A');
     }

     $('.onconfirmation').innerHTML(results.message);
     $('.onconfirmation').fadeIn();
     //alert(results);
   }
 }); 
```

val() actually returns the value of an element.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T11:12:03.500

```
var dataString = $("#subinput").val();
// ...
data: 'email=' + dataString.value, 
```

You used [.val()](http://api.jquery.com/val/) to get the value of #subinput, which is a string. Then, you attempted to read a "value" property of that string, which does not exist. When you concatenate the undefined value with "email=", JavaScript converts it to the string "undefined".

To fix this, you can just change `dataString.value` to `dataString`. However, for the sake of those who use the `+` symbol in their e-mail addresses ([especially Gmail users](http://nedbatchelder.com/blog/200908/plus_signs_in_email_addresses.html)), which your PHP code would interpret as a space, you probably should change the entire line to:

```
data: {email: dataString}, 
```

Passing a JavaScript object with the name-value pairs to jQuery allows it to properly query string escape the `+`.

# c - 如何在 ARM 上使用 kgdb？

> ID：14155577
> 
> 赞同：14
> 
> 时间：2013-01-04T10:42:54.693
> 
> 标签：c, linux-kernel, arm, kgdb

我`ARMv7`用作目标机器。我已经`2.6.34.13`为目标编译了 Linux 源代码。

Target 使用 minicom 通过串口与主机（Linux 开发机）连接。

**Target**加载了新内核，并在命令提示符下启用了 KGDB。

```
$ echo ttyAMA0 > /sys/module/kgdboc/parameters/kgdboc 
$ echo g > /proc/sysrq-trigger 
```

Entering KGDB... 显示消息并等待命令。

在**主机端**，

```
$arm-none-linux-gnueabi-gdb vmlinux

    gdb > set remotebaud 115200
    gdb > set debug remote 1
    gdb > target remote /dev/ttyS0 
```

在此之后，默认情况下会进行一些命令通信。

1.  `qSupported`从主机发送到目标。但目标不支持 qSupoted，因此返回 $#00。同样`?`，`HC-1`命令已发送但收到正确的响应。

2.  但是`qOffsets`命令没有收到来自目标的任何响应。

我怀疑vmlinux。因为如果我提供`list`gdb，它不会显示 10 行代码，而是说

```
arch/arm/kernel/head.S : No such file or directory. 
```

注意：：内核编译在服务器中完成。所以开发机器中没有可用的源。但 arm-gdb 似乎在寻找 head.S。

我不确定我在做什么错误。我需要为整个内核加载符号。在这方面指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:54:49.897

那 kgdb 正在寻找 head.S 不是错误。如果你看[这里，](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=arch/arm/kernel/head.S;h=4eee351f4668e2bbee54c3771a5389ce8900c10c;hb=HEAD)你会看到源代码树中有一个 head.S 文件。这是一个汇编文件。该平台有几个用汇编程序编写的源文件。

这是正常的，因为一些指令，尤其是引导序列和其他“低级”功能是用汇编程序编写的，因为它更容易。

正如评论中已经写的那样，gdb 需要在调试时浏览它们的源代码。在包含调试符号并在运行 gcc 时生成的调试部分中，`-g`“仅”引用源文件和行和列等。有关使用 gcc 的调试符号的更多信息和更多链接，请参见[此处。](http://en.wikipedia.org/wiki/DWARF)

kgdb 正在寻找的`head.S`是一个好兆头，表明您正在做正确的事情。如果你有可用的源（它可以像解压缩正确版本的压缩包一样简单）只需在这个源树中运行 kgdb 或使用`-d`参数来添加源搜索路径，当然是在你的开发机器上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:23:59.457

最后，主机到目标的通信只建立了线路延迟的 bcos。开发机器中的内核源与超时问题没有关系。

对于某些命令的超时问题，通过使用 GtkTerm`qOffset`而`qSupported`不是 minicom 作为串行端口通信工具来解决。区别在于 GtkTerm 中的“线路延迟”选项。因此，当它配置为 ~250 时，此后没有超时消息。只需建立连接并在默认断点处等待。如果有人知道如何`"line delay"`在 minicom 中给出这个将对每个人都有更大的帮助。

是的，当然，我们需要`list`执行命令的源代码。但也没有这些源，我们可以调试 ie`si, bt`可以在`vmlinux`and的帮助下执行`system.map`。

注意：：设置调试远程 1 不是必需的。这给出了主机到命令通信的详细显示。如需更详细的视图，`set debug serial 1`.

# android - Service Android中Activity的访问控制

> ID：14155579
> 
> 赞同：0
> 
> 时间：2013-01-04T10:42:57.827
> 
> 标签：android, android-service, android-mediaplayer, android-broadcast

我是安卓新手。我知道我们无法通过服务访问对活动的控制。但是每当我调用服务的方法时，我都想更改按钮的 ImageSource。

这是我在服务中创建的方法：

```
public void play()
    {
        if (mp.isPlaying()) {
            if (mp != null) {
                mp.pause();
                // Changing button image to play button
                btnPlay.setImageResource(R.drawable.btn_play); // not allowed
            }
        } else {
            // Resume song
            if (mp != null) {
                mp.start();
                // Changing button image to pause button
                btnPlay.setImageResource(R.drawable.btn_pause); // not allowed
            }
        }
    } 
```

在活动中，我在播放按钮单击时调用此方法。如何在服务中实现此功能。如何更改按钮的图像源。请清除我的疑问。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:15:06.203

为这些事件创建自定义事件对象并将您的活动注册为侦听器。

注意：不要忘记注销它，因为它可能会导致内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:18:27.597

试试这个代码

```
 public class MainActivity extends Activity
 {
/** Called when the activity is first created. */

public static MainActivity mThis;
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mThis = this;

} 
```

}

```
public void play()
{

 Button btnPlay=((Button)MainActivity.mThis.findViewById(R.id.btnPlay));
  if (mp.isPlaying()) {
    if (mp != null) {
        mp.pause();
        // Changing button image to play button

        btnPlay.setImageResource(R.drawable.btn_play); 
    }
} else {
    // Resume song
    if (mp != null) {
        mp.start();
        // Changing button image to pause button
        btnPlay.setImageResource(R.drawable.btn_pause); 
    }
} 
```

# html - ul 列出具有不同背景大小的项目

> ID：14155590
> 
> 赞同：0
> 
> 时间：2013-01-04T10:43:36.770
> 
> 标签：html, css

我正在尝试为我的网站制作页脚。它应该包含 5 行联系信息，黑色背景上的白色文本和中间的空白。所以基本上它看起来像 5 个黑色条带，上面有白色文字。

问题是当我希望它们大致是文本的长度时，所有黑色条的长度都相同。我尝试浮动列表项而不是`<ul>`在每个项之后放置换行符。背景现在大小合适了，但我无法在它们之间添加空白而不弄乱它。

HTML：

```
<ul>
                <li>Company name</li>
                <li>Adressadress 123444</li>
                <li>023311 postal code</li>
                <li>+358 12385495955</li>
                <li>info@company.com</li>
</ul> 
```

CSS：

```
ul {float:left;
li {
    list-style:none;
    background-color:black;
    color:white;
    text-transform:uppercase;
    font-weight:bold;
    margin-bottom:5px;
    padding-left:5px;
    padding-right:5px;
    }
    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:54:05.340

在文本周围添加跨度标签应该可以解决您的问题。

```
<ul>
    <li><span>one</span></li>
    <li><span>two</span></li>
    <li><span>three</span></li>
    <li><span>four</span></li>
    <li><span>five</span></li>
</ul>​

ul {
    margin:10px;
}

ul li {
    margin-bottom:15px;
}

ul li span {
    background:black;
    padding:5px;
    color:white;
}
​ 
```

[http://jsfiddle.net/uwPcv/](http://jsfiddle.net/uwPcv/)

# postgresql - Postgresql，将文本视为数字以获取 MAX 函数结果

> ID：14155592
> 
> 赞同：-1
> 
> 时间：2013-01-04T10:43:38.313
> 
> 标签：postgresql

仍然没有解决以字符串形式写入的日期的问题，这是另一个问题。
我有文本列，其中只有数字作为写入（如文本）。
通过使用函数 MAX，我得到不正确的结果，因为 9 大于 30。
这里是否有任何内联函数，如 VAL 或 CINT，或者我可以比较和使用文本数据（仅限数字），如 SELECT、MAX 和其他类似查询中的数字?

在以下示例中看起来如何：

```
 mCmd = New OdbcCommand("SELECT MAX(myTextColumn) FROM " & myTable, mCon) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:55:47.337

你需要使用`max(to_number(myTextColumn, '999999'))`

更多详细信息在手册中：[http ://www.postgresql.org/docs/current/static/functions-formatting.html](http://www.postgresql.org/docs/current/static/functions-formatting.html)

如果所有“数字”都是整数，您还可以使用强制转换运算符：`max(myTextColumn::int)`

如果您的文本值格式正确，您可以简单地将它们转换为双精度，例如：`'3.14'::numeric`.

如果文本未根据您需要使用`to_number()`包含小数点分隔符的格式掩码的语言设置进行格式化：`to_number('3.14', '9.99')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T10:56:36.353

要使 MAX 工作得更好，您需要首先将文本字段转换为数字格式

```
mCmd = New OdbcCommand("SELECT MAX(TO_NUMBER(myTextColumn, '99999')) FROM " & myTable, mCon) 
```

# sql - 在地图表中，我需要为每个人选择行上的子集

> ID：14155593
> 
> 赞同：1
> 
> 时间：2013-01-04T10:43:37.990
> 
> 标签：sql

我有一个包含 3 列 a、b 和权重的表，代表一个人的映射。该表有 +- 1 T 行。

简单的问题可以这样解释：

我需要 givin a 的前 20 名关系，例如：

```
SELECT * FROM my_table WHERE a = ? ORDER BY weight LIMIT 20; 
```

真正的问题是我需要为 1000 次执行此操作，并且执行此查询 1000 次很慢。我的问题是：如何在单个 SQL 查询中做到这一点。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:07:11.180

使用`Row_number()`功能。我在这里根据重量（即按重量排序）假设前 20 名。

获取所有a的前20名记录；

```
select a,b, weight 
from (
    select a,b, weight, Row_number() over (partition by a order by weight) rn
    from my_table  
) AB
where rn<21
order by rn 
```

获得单a的前20名记录；

```
select top(20) a,b, weight
from my_table
where a = yourValue
order by weight 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:03:32.583

试试这个解决方案：

```
SELECT *
  FROM my_table t1
 WHERE 20 <= ( SELECT COUNT(*) FROM my_table t2 WHERE t2.a=t1.a AND t2.weight < t1.weight)
 ORDER BY a, weight; 
```

# linux - 如何替换复杂文本文件中的 shell 变量

> ID：14155596
> 
> 赞同：121
> 
> 时间：2013-01-04T10:43:48.940
> 
> 标签：linux, shell, string-interpolation

我有几个文本文件，我在其中引入了 shell 变量（例如 $VAR1 或 $VAR2）。

我想把这些文件（一个一个）保存在所有变量都被替换的新文件中。

为此，我使用了以下 shell 脚本（在 StackOverflow 上找到）：

```
while read line
do
    eval echo "$line" >> destination.txt
done < "source.txt" 
```

这对非常基本的文件非常有效。

但是在更复杂的文件上，“eval”命令做的太多了：

*   以“#”开头的行被跳过

*   XML 文件解析导致大量错误

有更好的方法吗？（在 shell 脚本中......我知道这很容易用 Ant 完成）

亲切的问候

* * *

## 回答 #1

> 赞同：269
> 
> 时间：2013-01-04T12:54:10.743

看，原来在我的系统上有一个[`envsubst`](https://www.gnu.org/software/gettext/manual/html_node/envsubst-Invocation.html)命令，它是 gettext-base 包的一部分。

所以，这很容易：

```
envsubst < "source.txt" > "destination.txt" 
```

请注意，如果您想对两者使用相同的文件，则必须使用类似 moreutil's 的东西`sponge`，正如 Johnny Utahh 所建议的那样：`envsubst < "source.txt" | sponge "source.txt"`。（因为 shell 重定向会在读取之前清空文件。）

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2014-01-21T17:31:18.823

关于答案 2，在讨论 envsubst 时，您问：

> 如何使它与在我的 .sh 脚本中声明的变量一起工作？

答案是您只需在调用`envsubst`.

您还可以使用参数限制要在输入中替换的变量字符串`envsubst` `SHELL_FORMAT`（避免使用公共 shell 变量值意外替换输入中的字符串 - 例如`$HOME`）。

例如：

```
export VAR1='somevalue' VAR2='someothervalue'
MYVARS='$VAR1:$VAR2'

envsubst "$MYVARS" <source.txt >destination.txt 
```

将分别用and替换`$VAR1`and的所有实例`$VAR2`（并且只有`VAR1`and `VAR2`）。`source.txt``'somevalue'``'someothervalue'`

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2018-02-13T08:35:24.190

我知道这个话题很老，但我有一个更简单的工作解决方案，无需导出变量。可以是oneliner，但我更喜欢使用`\`在线端拆分。

```
var1='myVar1'\
var2=2\
var3=${var1}\
envsubst '$var1,$var3' < "source.txt" > "destination.txt"

#         ^^^^^^^^^^^    ^^^^^^^^^^     ^^^^^^^^^^^^^^^
# define which to replace   input            output 
```

需要将变量定义到与`envsubst`被视为环境变量相同的行。

是可选的`'$var1,$var3'`，仅替换指定的。`${VARIABLE_USED_BY_JENKINS}`想象一个包含不应被替换的输入文件。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-01-16T12:21:59.603

1.  定义你的 ENV 变量

```
$ export MY_ENV_VAR=congratulation 
```

2.  使用以下内容创建模板文件 ( **in.txt )**

```
$MY_ENV_VAR 
```

您还可以使用系统定义的所有其他 ENV 变量，例如（在 linux 中）$TERM、$SHELL、$HOME...

3.  运行此命令以替换**in.txt**文件中的所有环境变量并将结果写入**out.txt**

```
$ envsubst "`printf '${%s} ' $(sh -c "env|cut -d'=' -f1")`" < in.txt > out.txt 
```

4.  检查 out.txt 文件的内容

```
$ cat out.txt 
```

你应该看到“祝贺”。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-05-11T17:17:49.223

如果您希望在源文件中替换 env 变量，同时保留所有非 env 变量，您可以使用以下命令：

```
envsubst "$(printf '${%s} ' $(env | sed 's/=.*//'))" < source.txt > destination.txt 
```

[此处解释了](https://unix.stackexchange.com/questions/294378/replacing-only-specific-variables-with-envsubst)仅替换特定变量的语法。上面的命令使用子 shell 列出所有定义的变量，然后将其传递给`envsubst`

因此，如果定义了一个名为 的环境变量`$NAME`，并且您的`source.txt`文件如下所示：

```
Hello $NAME
Your balance is 123 ($USD) 
```

将`destination.txt`是：

```
Hello Arik
Your balance is 123 ($USD) 
```

请注意，`$NAME`被替换了，而`$USD`则保持不变

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-12-06T15:54:17.337

还有这个选项：

### 在文件中定义变量

```
$ cat variables.env 
# info about what this var is
export var1=a
# info about var again
export var2=b 
```

### 定义一个使用变量的模板文件

```
$ cat file1-template.txt
This is var1: "${var1}"
This is var2: "${var2}" 
```

### 生成最终文件，将变量替换为值

```
$ source variables.env
$ envsubst < file1-template.txt > file1.txt
$ cat file1.txt 
This is var1: "a"
This is var2: "b" 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-02-16T19:14:35.023

```
while IFS='=' read -r name value ; do
    # Print line if found variable
    sed -n '/${'"${name}"'}/p' docker-compose.yml
    # Replace variable with value. 
    sed -i 's|${'"${name}"'}|'"${value}"'|' docker-compose.yml
done < <(env) 
```

**注意：**变量名称或值**不应包含“|”** , 因为它被用作分隔符。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-04T11:03:02.280

如果您真的只想使用 bash （和 sed），那么我将检查您的每个环境变量（由`set`posix 模式返回）并从中构建一堆`-e 'regex'`for sed ，以 a 终止`-e 's/\$[a-zA-Z_][a-zA-Z0-9_]*//g'`，然后将所有这些传递给赛德。

Perl 会做得更好，您可以将环境变量作为数组访问，并且可以执行可执行替换，因此您只匹配任何环境变量一次。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-04T11:07:23.160

实际上，您需要更改您的`read`to `read -r`which 将使其忽略反斜杠。

此外，您应该转义引号和反斜杠。所以

```
while read -r line; do
  line="${line//\\/\\\\}"
  line="${line//\"/\\\"}"
  line="${line//\`/\\\`}"
  eval echo "\"$line\""
done > destination.txt < source.txt 
```

尽管如此，这仍然是一种可怕的扩张方式。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-09-15T07:14:40.873

导出所有需要的变量，然后使用 perl onliner

`TEXT=$(echo "$TEXT"|perl -wpne 's#\${?(\w+)}?# $ENV{$1} // $& #ge;')`

这将用实际值替换 TEXT 中存在的所有 ENV 变量。报价也被保留:)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-08-17T04:55:20.597

`-pi`通过在单引号中运行 perl 代码 ( the ) 在每行模式 ( the ) 中搜索和替换 perl 二进制文件，该代码`-e`迭代`%ENV`包含导出变量名称作为键和导出变量值的特殊哈希的键键的值和每次迭代简单地将包含 a 的字符串替换`$<<key>>`为其`<<value>>`.

```
 perl -pi -e 'foreach $key(sort keys %ENV){ s/\$$key/$ENV{$key}/g}' file 
```

警告：对于两个或多个变量以相同字符串开头的情况，需要额外的逻辑处理......

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-07-03T10:37:32.543

`envsubst`看起来完全像我想使用的东西，但`-v`选项让我有点惊讶。

虽然`envsubst < template.txt`工作正常，但 option`-v`不起作用：

```
$ cat /etc/redhat-release
Red Hat Enterprise Linux Server release 7.1 (Maipo)
$ envsubst -V
envsubst (GNU gettext-runtime) 0.18.2
Copyright (C) 2003-2007 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
Written by Bruno Haible. 
```

正如我所写，这不起作用：

```
$ envsubst -v < template.txt
envsubst: missing arguments
$ cat template.txt | envsubst -v
envsubst: missing arguments 
```

我必须这样做才能使其工作：

```
TEXT=`cat template.txt`; envsubst -v "$TEXT" 
```

也许它可以帮助某人。

# jmeter - 有条件地发送带有 HTTP 请求的 jmeter 变量

> ID：14155598
> 
> 赞同：5
> 
> 时间：2013-01-04T10:43:53.440
> 
> 标签：jmeter

我正在使用 JMeter 发送 HTTP POST 请求。

我的请求正文是 JSON，例如`{"Var1": "${Var1}","Var2": ${Var2},"Var3":"${Var3}"}`.

这些是在 HTTP 请求的参数中设置的，没有参数名称。这工作正常，我可以使用我在 beanshell 预处理器中设置的变量发送请求（通过设置变量并使用 vars.put() ）。

我的问题是如何通过参数的预处理器部分以编程方式发送？例如：

```
if(a){
send parameters `{"Var1": "${Var1}","Var2": ${Var2}` as my JSON
}
else {
send parameters `{"Var3":"${Var3}"}` as my JSON
} 
```

vars.remove() 对我不起作用，因为它从变量中删除了值，但仍将其发送到请求中（例如 as `"${Var1}"`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-05T01:55:36.880

只需使用“身体数据”选项卡。您可以有条件地创建 JSON 字符串，然后使用普通占位符在正文数据中“打印”变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:32:53.220

将预处理器替换为 Beanshell 采样器，该采样器将计算布尔值**a**并将其作为 var：

```
vars.put("a", value) 
```

然后使用 2 个[If Controller](http://jmeter.apache.org/usermanual/component_reference.html#If_Controller)，其中每个将包含一个具有不同参数的采样器。

第一个条件将是 ${a} 并且它将是 ${a} 的否定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-10T12:12:02.000

实现您想要做的最简单和最快的方法是使用 JMeter if controller **(Add -> Logic controller -> If controller)**。

您将 if 控制器添加到您正在处理的线程组中，并将返回布尔值的表达式放在**Condition (default Javascript)**中。作为 if 控制器的子节点，您放置要在 if 成功时触发的 HTTP 请求采样器。

假设您想要发送一个请求，如果您传递给 JMeter 的属性存在：

```
${__P(media)}.length > 0 
```

您为刚刚使用另一个 HTTP 请求采样器检查的内容添加另一个带有否定条件的 if 控制器。

你完成了。

# android - 触摸事件：当手指从项目上移开时

> ID：14155599
> 
> 赞同：8
> 
> 时间：2013-01-04T10:43:55.630
> 
> 标签：android, events, touch

当我从物品上移开手指时，我需要实现功能。所以我需要一些活动。

```
***Scenario:*** 

1\. Touch the image view using finger.
2\. Remove the finger.
3\. Now implement the functionality. 
```

**我想要第 2 步的事件回调。**

如果存在一些预定义的事件，请建议名称。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-04T10:47:34.387

行。当您触摸屏幕并移除手指事件调用时：

1.  **ACTION_DOWN** - 当你第一次触摸
2.  **ACTION_MOVE** - 当您在屏幕上移动手指时
3.  **ACTION_UP** - 当您将手指从屏幕上移开时

祝你好运！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-04T10:46:04.593

对于这种情况，您可以为 ImageView 实现[**OnTouchListener**](http://developer.android.com/reference/android/view/View.OnTouchListener.html)。

```
yourImageView.setOnTouchListener(new OnTouchListener () {
  public boolean onTouch(View view, MotionEvent event) {

    if (event.getAction() == android.view.MotionEvent.ACTION_DOWN) {
      Log.d("TouchTest", "Touch down");
    } 
    else if (event.getAction() == android.view.MotionEvent.ACTION_UP) {
      Log.d("TouchTest", "Touch up");
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T11:36:12.250

```
public class TestTouchEvents extends Activity implements OnTouchListener {
  ImageView imageView;
  Bitmap bitmap;
  Canvas canvas;
  Paint paint;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    imageView = (ImageView) this.findViewById(R.id.ImageView);

    Display currentDisplay = getWindowManager().getDefaultDisplay();
    float dw = currentDisplay.getWidth();
    float dh = currentDisplay.getHeight();

    bitmap = Bitmap.createBitmap((int) dw, (int) dh,Bitmap.Config.ARGB_8888);
    canvas = new Canvas(bitmap);
    paint = new Paint();
    paint.setColor(Color.GREEN);
    imageView.setImageBitmap(bitmap);
    imageView.setOnTouchListener(this);
  }

  public boolean onTouch(View v, MotionEvent event) {
    int action = event.getAction();

    switch (action) {
    case MotionEvent.ACTION_DOWN:
      // Do Something
      Log.d("Touch", "Touch down");
      break;

    case MotionEvent.ACTION_MOVE:

      // Do Something
      Log.d("Touch", "Touch move");
      //imageView.invalidate();

      break;

    case MotionEvent.ACTION_UP:

      // Do Something
      Log.d("Touch", "Touch up");
      //imageView.invalidate();
      break;

    case MotionEvent.ACTION_CANCEL:

      Log.d("Touch", "Touch cancel");
      break;

    default:
      break;
    }
    return true;
  }
} 
```

# php - 0 到 1.0 php 之间的随机浮点数

> ID：14155603
> 
> 赞同：63
> 
> 时间：2013-01-04T10:44:13.677
> 
> 标签：php, random, floating-point, integer

> **可能重复：**
> [php中的随机浮点数](https://stackoverflow.com/questions/14141212/random-float-in-php)

是否可以在 0 和 1.0 之间创建一个随机浮点数，例如 0.4、0.8 等。我使用了 rand 但它只接受整数。

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2013-01-04T10:51:40.390

```
mt_rand() / mt_getrandmax(); 
```

避免使用该`rand()`函数，因为它通常取决于平台的 C`rand()`实现，通常使用非常简单的模式创建数字。在 php.net 上查看[此评论](http://php.net/manual/en/function.mt-rand.php#107738)

**更新**：在 php 7.1 中，`rand()`[已更改](https://www.php.net/manual/en/migration71.incompatible.php#migration71.incompatible.rand-srand-aliases)，现在只是`mt_rand()`. 因此，现在也可以使用`rand()`了。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-01-04T10:46:35.343

简单地除以 10 怎么样？

```
$randomFloat = rand(0, 10) / 10;
var_dump($randomFloat);

//eg. float(0.7) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-04T10:47:23.153

```
$v = mt_rand() / mt_getrandmax(); 
```

会这样做。

* * *

如果您只想要一位小数（如问题中的示例），`round()`那么您得到的值...

```
$v = round( $v, 1 ); 
```

...或计算 0 到 10 之间的数字并除以 10：

```
$v = mt_rand( 0, 10 ) / 10; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-04T10:48:12.590

根据 PHP 文档，如果您使用的是 PHP 7，则可以使用[random_int生成加密安全的伪随机整数](http://php.net/manual/en/function.random-int.php)

话虽如此，这是一个利用它在两个数字之间生成随机浮点数的函数：

```
function random_float($min, $max) {
    return random_int($min, $max - 1) + (random_int(0, PHP_INT_MAX - 1) / PHP_INT_MAX );
} 
```

尽管 random_int() 比 mt_rand() 更安全，但请记住它也更慢。

> 此答案的先前版本建议您使用 PHP rand()，但实现很糟糕。我想改变我的答案而不重复其他人已经说过的话，现在我们到了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-17T06:09:47.793

尝试这个

```
// Generates and prints 100 random number between 0.0 and 1.0 
$max = 1.0;
$min = 0.0;
for ($i = 0; $i < 100; ++$i)
{
    print ("<br>");
    $range = $max - $min;
    $num = $min + $range * (mt_rand() / mt_getrandmax());    
    $num = round($num, 2);
    print ((float) $num);
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-04T10:48:16.430

这个简单的解决方案怎么样：

```
abs(1-mt_rand()/mt_rand()) 
```

或者

```
/**
 * Generate Float Random Number
 *
 * @param float $Min Minimal value
 * @param float $Max Maximal value
 * @param int $round The optional number of decimal digits to round to. default 0 means not round
 * @return float Random float value
 */
function float_rand($Min, $Max, $round=0){
    //validate input
    if ($min>$Max) { $min=$Max; $max=$Min; }
        else { $min=$Min; $max=$Max; }
    $randomfloat = $min + mt_rand() / mt_getrandmax() * ($max - $min);
    if($round>0)
        $randomfloat = round($randomfloat,$round);

    return $randomfloat;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-04T10:45:19.330

转换为 float ^*并除以`getrandmax()`.

* * *

[* 在 PHP 的任意类型杂耍规则中似乎不需要强制转换。不过，它会是其他语言。]

# email - 使用发件人标头避免 Gmail 的“此邮件可能不是由其发送”

> ID：14155604
> 
> 赞同：13
> 
> 时间：2013-01-04T10:44:17.083
> 
> 标签：email, gmail

我正在创建一个朋友类型的电子邮件系统，我需要我们的邮件服务器将电子邮件从网站用户发送给他们的朋友，即从 fred@gmail.com 到 tony@gmail.com。

如果像本例中的情况一样，用户都是 Gmail 的一部分，那么朋友将收到一封电子邮件，其中包含警告“此邮件可能不是由：fred@gmail.com 发送的。

我认为到那时在我们的电子邮件中添加一个“发件人”标头（例如 us@company.com），这应该向 Gmail 表明我们是发件人，并且在他们的要求下有效地公开欺骗发件人。这是真的吗，您可以使用“发件人”标头绕过 Gmail 的警告吗？

我意识到这类似于以下问题，但我更感兴趣的是发件人标头是否*应该*产生影响：[从 Web 服务器发送的电子邮件导致 gmail 将其视为网络钓鱼。如何摆脱这个？](https://stackoverflow.com/questions/10378814/email-sent-from-web-server-causes-gmail-to-treat-as-phishing-how-to-get-rid-of)

更多信息：我正在使用 netmailbot 使用带有 'sender' 和 'x-sender' 的 '-customheader' 参数从我们的邮件服务器发送电子邮件，例如 '-customheader sender:us@company.com x-sender:us@company .com'

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-04T11:04:09.987

如果 gmail 没有惨遭失败，那么您将无法抑制此警告。
Google 控制着这两个帐户，因此知道这封邮件不是由 fred 使用他们的基础设施发送的。
使用了一些第三方基础设施（你的），这就是这个警告的全部内容。您可以将任意电子邮件地址设置为“发件人”，Google 不知道这是否合法使用（如果 fred 真的写了邮件）。任何人都可以写下这条信息。通常弗雷德会使用谷歌的基础设施来发送邮件，然后他们就会知道是他。

更简洁的解决方案是将您的电子邮件地址（“noreply@company.com”）作为标头（老实说）并将 fred@gmail.com 设置为回复标头（这样他就可以收到回复）。

# asp.net-mvc - 我可以使用不同的凭据登录到不同的 asp.net mvc4 区域，而不会发生登录会话冲突吗？

> ID：14155605
> 
> 赞同：1
> 
> 时间：2013-01-04T10:44:18.613
> 
> 标签：asp.net-mvc, session, asp.net-mvc-areas, simplemembership

我有一个 asp.net mvc4 应用程序，使用 simplemembership 进行身份验证。
在这个应用程序中，我有一个管理区域，前端是应用程序的根（不是区域）。
我希望能够在不覆盖另一个登录会话的情况下登录这两个区域。
是否可以将管理区域定义为单独的应用程序，如何定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:26:57.337

如果我理解正确，您希望管理员能够登录网站的管理部分和网站的“常规”认证部分，但非管理员用户只能登录“常规”验证网站的一部分？

您是否可以仅使用角色来装饰仅对管理员可用的控制器操作与对任何授权用户可用的控制器操作？

[Authorize(Roles="Admininstrator")] 仅用于管理员操作

[Authorize] 用于任何授权的用户操作

[http://geekswithblogs.net/tyarmer/archive/2010/02/25/strongly-typed-roles-in-mvc-with-authorize-attribute.aspx](http://geekswithblogs.net/tyarmer/archive/2010/02/25/strongly-typed-roles-in-mvc-with-authorize-attribute.aspx)

还是我误解了你在问什么？

# wcf - 无法让 WCF 服务在使用 IIS 的共享服务器上运行

> ID：14155608
> 
> 赞同：1
> 
> 时间：2013-01-04T10:44:31.003
> 
> 标签：wcf, iis, iis-7

**我无法让 WCF 服务在使用 IIS 的共享服务器上运行。**

我尝试了几个教程： [http](http://technologyriver.blogspot.com/2012/02/prerequisites-check-windows-7.html) ://technologyriver.blogspot.com/2012/02/prerequisites-check-windows-7.html http://msdn.microsoft.com/en-us/library/ms733766.aspx

我已阅读有关执行命令行指令以在 IIS 上启用 WCF 支持的博客。但是，托管公司拒绝在他们的盒子上运行命令。

这些服务在我的开发机器上运行良好。但是，我无法让服务在远程服务器上运行。

单击 svc 文件时，出现以下错误：

HTTP 错误 404.3 - 未找到

由于扩展配置，无法提供您请求的页面。如果页面是脚本，则添加处理程序。如果应该下载文件，请添加 MIME 映射。*

.svc 文件：

```
<% @ServiceHost Language=C# Debug="true" Service="MyService" Factory="MyServiceHostFactory" CodeBehind="~/App_Code/Service.cs" %> 
```

网络配置：

```
<service name="MyService" behaviorConfiguration="MyServiceBehavior">
    <endpoint contract="IMyService" binding="basicHttpBinding">
      <identity>
        <dns value="http://www.mydomain.com" />
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />

    <host>
      <baseAddresses>
        <add baseAddress="http://www.mydomain.com:8732/Services/Service/" />
      </baseAddresses>
    </host>
  </service> 
```

服务.cs：

```
using System;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Activation;

// A WCF service consists of a contract (defined below as IMyService, DataContract1), 
// a class which implements that interface (see MyService), 
// and configuration entries that specify behaviors associated with 
// that implementation (see <system.serviceModel> in web.config)

[ServiceContract()]
public interface IMyService
{
    [OperationContract]
    string MyOperation1(string myValue1);
    [OperationContract]
    string MyOperation2(DataContract1 dataContractValue);
}

public class MyService : IMyService
{
    public string MyOperation1(string myValue1)
    {
        return "Hello: " + myValue1;
    }
    public string MyOperation2(DataContract1 dataContractValue)
    {
        return "Hello: " + dataContractValue.FirstName;
    }
}

[DataContract]
public class DataContract1
{
    string firstName;
    string lastName;

    [DataMember]
    public string FirstName
    {
        get { return firstName; }
        set { firstName = value; }
    }
    [DataMember]
    public string LastName
    {
        get { return lastName; }
        set { lastName = value; }
    }
}

public class MyServiceHostFactory : ServiceHostFactoryBase
{
    protected virtual ServiceHost CreateServiceHost(Type serviceType, Uri[] baseAddresses)
    {
        // Specify the exact URL of your web service
        Uri webServiceAddress = new Uri("http://www.mydomain.com/MyService.svc");

        MyServiceHost webServiceHost = new MyServiceHost(serviceType, webServiceAddress);
        return webServiceHost;
    }

    public override ServiceHostBase CreateServiceHost(string constructorString, Uri[] baseAddresses)
    {
        throw new NotImplementedException();
    }
}

public class MyServiceHost : ServiceHost
{
    public MyServiceHost(Type serviceType, params Uri[] baseAddresses)
        : base(serviceType, baseAddresses)
    { }

    protected override void ApplyConfiguration()
    {
        base.ApplyConfiguration();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T07:51:13.730

我不得不切换主机。

我最初使用的是 DiscountASP.Net，但他们拒绝了我确保启用 WCF 设置的请求，并告诉我需要聘请开发人员或遵循 MS IIS 规范。（PS 他们不知道我实际上是一名 SDET。）

结果，我不得不切换到另一个提供商（即 Winhost）。事情现在就可以正常工作，而无需我进行任何疯狂的 webconfig 更改或 ServiceHostFactory 编码废话，以前的主机希望我这样做，但没有成功。

我花了 5 天时间在他们的技术支持下重新开票，直到我最终切换到一家真正支持 WCF 服务的托管公司。

感谢 Winhost 结束了这场可怕的噩梦！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T09:27:00.050

这似乎是远程服务器上的访问/可配置性问题。

尝试检查已部署服务的以下区域。

*   WCF 服务的绑定配置正确，DNS 和端口（默认为 80）
*   服务的认证方式（通过WSDL允许匿名访问浏览器）
*   授予网站的权限（目录和用户权限）

如果它们都不起作用，那么您能否列出部署服务时遵循的步骤？

# java - 与 ASM 字节码检测功能不兼容的参数

> ID：14155614
> 
> 赞同：5
> 
> 时间：2013-01-04T10:45:06.220
> 
> 标签：java, bytecode, java-bytecode-asm, bytecode-manipulation, verifyerror

我在使用 Guava 库运行一个简单的主程序时遇到了一些麻烦。

我已经使用我的代码从这里对类进行了检测以获取方法参数：[ASM 中的 Java 方法参数值](https://stackoverflow.com/questions/13911142/java-method-parameters-values-in-asm)

问题是，虽然代码适用于小型项目（又名河内塔），但使用 Guava 我有错误和异常。

特别是在测试 Joiner.join 方法时，我有这个错误：

```
Exception in thread "Jalen Agent" java.lang.VerifyError: (class: com/google/common/base/Joiner, method: withKeyValueSeparator signature: (Ljava/lang/String;)Lcom/google/common/base/Joiner$MapJoiner;) Incompatible argument to function
at Main.joinBench(Main.java:42)
at Main.main(Main.java:20) 
```

在使用 -noverify 运行示例时，我有一个例外：

```
Exception in thread "Jalen Agent" java.lang.ArrayIndexOutOfBoundsException: 1
at com.google.common.base.Joiner.<init>(Joiner.java)
at com.google.common.base.Joiner.on(Joiner.java:71)
at Main.joinBench(Main.java:42)
at Main.main(Main.java:20) 
```

方法的字节码是一致的：

```
 public static com.google.common.base.Joiner on(java.lang.String);
      Code:
         0: bipush        1
         2: anewarray     #4                  // class java/lang/Object
         5: astore_1      
         6: aload_1       
         7: bipush        0
         9: aload_0       
        10: aastore       
        11: ldc           #20                 // int 369
        13: ldc           #21                 // String com/google/common/base/Joiner
        15: ldc           #22                 // String on
        17: aload_1       
        18: invokestatic  #28                 // Method jalen/MethodStats.onMethodEntry:(ILjava/lang/String;Ljava/lang/String;[Ljava/lang/Object;)V
        21: new           #2                  // class com/google/common/base/Joiner
        24: dup           
        25: aload_0       
        26: invokespecial #32                 // Method "<init>":(Ljava/lang/String;)V
        29: ldc           #20                 // int 369
        31: invokestatic  #36                 // Method jalen/MethodStats.onMethodExit:(I)V
        34: areturn 
```

我知道该错误可能与库版本有关，但主要的 java 程序是针对已检测的库编译的，并使用该库的同一个 jar 运行。

关于为什么会发生这种情况的任何想法？以及如何解决？

谢谢 ：）

**编辑**

下面是方法 withKeyValueSeparator 检测前后的字节码

原始字节码：

```
public com.google.common.base.Joiner$MapJoiner withKeyValueSeparator(java.lang.String);
Code:
   0: new           #33                 // class com/google/common/base/Joiner$MapJoiner
   3: dup           
   4: aload_0       
   5: aload_1       
   6: aconst_null   
   7: invokespecial #34                 // Method com/google/common/base/Joiner$MapJoiner."<init>":(Lcom/google/common/base/Joiner;Ljava/lang/String;Lcom/google/common/base/Joiner$1;)V
  10: areturn 
```

检测字节码：

```
public com.google.common.base.Joiner$MapJoiner withKeyValueSeparator(java.lang.String);
Code:
   0: bipush        1
   2: anewarray     #4                  // class java/lang/Object
   5: astore_1      
   6: aload_1       
   7: bipush        1
   9: aload_1       
  10: aastore       
  11: ldc           #199                // int 390
  13: ldc           #21                 // String com/google/common/base/Joiner
  15: ldc           #200                // String withKeyValueSeparator
  17: aload_1       
  18: invokestatic  #28                 // Method jalen/MethodStats.onMethodEntry:(ILjava/lang/String;Ljava/lang/String;[Ljava/lang/Object;)V
  21: new           #8                  // class com/google/common/base/Joiner$MapJoiner
  24: dup           
  25: aload_0       
  26: aload_1       
  27: aconst_null   
  28: invokespecial #203                // Method com/google/common/base/Joiner$MapJoiner."<init>":(Lcom/google/common/base/Joiner;Ljava/lang/String;Lcom/google/common/base/Joiner$1;)V
  31: ldc           #199                // int 390
  33: invokestatic  #36                 // Method jalen/MethodStats.onMethodExit:(I)V
  36: areturn 
```

以下是 joiner 类的完整字节码：

原文： http: [//pastebin.com/VsccVX18](http://pastebin.com/VsccVX18)

检测：http : [//pastebin.com/xtke1a8y](http://pastebin.com/xtke1a8y)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-13T07:41:45.763

的原始代码`withKeyValueSeparator`将一堆参数传递给`MapJoiner`构造函数。您正在添加将数组存储在局部变量表的第二个槽中的检测代码（使用`astore_1`）。这会覆盖 的第一个参数`withKeyValueSeparator`，即 a `String`。（局部变量表的第一个槽是一个`MapJoiner`实例本身，又名`this`。）因此，当原始函数的代码尝试将局部变量表的第二个槽中的对象传递给构造函数时，就会出现“不兼容的参数”错误。

为了解决这个问题，你应该在局部变量表中为你的数组分配一个新的槽；[这个答案](https://stackoverflow.com/a/11670349/149330)概述了如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:40:40.240

首先，我不明白为什么这应该与库版本有关。似乎字节码未正确检测，如果使用 -noverify，则会导致验证失败和异常。

关于校验错误，说明Joiner.withKeyValueSeparator()有错误。此方法的代码尝试使用不兼容的方法参数调用另一个方法。你能给出 withKeyValueSeparator() 方法的检测字节码吗？（最好是非仪器仪表）

您在 -noverify 中看到的错误发生在 Joiner 的构造函数中，Joiner.on() 方法似乎没有任何问题。同样，您能否发布 Joiner 的字节码。方法？（仪器仪表和非仪器仪表）

# opengl - OpenGL。使用 glBufferData 更新顶点缓冲区

> ID：14155615
> 
> 赞同：16
> 
> 时间：2013-01-04T10:45:06.910
> 
> 标签：opengl, streaming, vertex-buffer

我`OpenGL`用来实现某种批量绘图。为此，我创建了一个`vertex buffer`来存储数据。

注意：这个缓冲区通常会在每一帧更新，但永远不会减小大小（但仍然可以增加）。

我的问题是：使用`glBufferData`(with s `treaming write-only mode`) 更新它(而不是 eg `glMapBuffer`) 在技术上是否正确？我想没有必要映射它，因为完整的数据已经更新，所以我一次发送一个完整的包。如果当前缓冲区大小小于我发送的大小，它会自动增加，不是吗？我现在才确定它的真正工作方式（也许它会在每次调用时重新创建缓冲区，不是吗？）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-04T11:11:01.757

最好有固定大小的缓冲区并且不要每帧都重新创建它。

您可以通过以下方式实现：

*   创建最大大小的缓冲区，例如 1000 verts 的空间
*   仅用新数据更新缓冲区的开头。因此，如果您更改了 500 个顶点的数据，则使用 glMapBuffer 填充缓冲区的前半部分
*   绘制时更改绘制顶点的数量。例如，您可以仅使用整个 1000 个顶点缓冲区中的某个顶点范围（例如，从 200 到 500）。使用**glDrawArrays(mode, first, count)**

评论中的想法：

*   glMapBufferRange 和 glBufferSubData 也可以提供帮助
*   还考虑缓冲区的双缓冲

链接：[http ://hacksoflife.blogspot.com/2010/02/double-buffering-vbos.html](http://hacksoflife.blogspot.com/2010/02/double-buffering-vbos.html)

希望有帮助

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-05T00:04:00.050

除了 fen 和 datenwolf 说的，参见[OpenGL Insights 的第 22 章](http://www.seas.upenn.edu/~pcozzi/OpenGLInsights/OpenGLInsights-AsynchronousBufferTransfers.pdf)；特别是，它包括各种硬件和技术的时序。

# android - Android 机会通信与电源管理（当手机进入睡眠状态时服务会发生什么）

> ID：14155621
> 
> 赞同：0
> 
> 时间：2013-01-04T10:45:45.733
> 
> 标签：android, networking, power-management

我正在为 android 编写一个使用机会通信的应用程序。因此，当两个设备在附近时，它们会交换数据。目前，当他们在同一个 wifi 网络中（使用 mdns）或当他们有配对的蓝牙接口时，就会发生这种情况。

我从电源管理器的角度想知道。当手机进入睡眠模式时，我正在进行的服务会暂停吗？如果是，我该如何预防？

还有任何一般提示如何使其消耗尽可能少的功率？我正在考虑不时唤醒它，但它有可能会错过其他设备发送的 mdns 查询，我想避免该查询以最大限度地提高吞吐量。

澄清一下——是的，我确实想使用机会主义通信，不，我不想使用任何涉及连接到互联网的解决方案。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:56:11.297

使用 Wakelock 指示您的应用程序需要让设备保持开启状态。但它会消耗相当大的电量。您还可以使用 AlarmManager 在 wifi 可用的特定时间启动您的应用程序

# c - 宏计数参数

> ID：14155622
> 
> 赞同：6
> 
> 时间：2013-01-04T10:45:50.563
> 
> 标签：c, gcc, c-preprocessor, variadic-macros

为了让编译器满意，我必须计算传递给的参数，否则当 pedantic 标志打开并且只传递一个参数时`A()`gcc 会引发“ ”`warning: ISO C99 requires rest arguments to be used`

```
#include <stdio.h>

/* Count params */
#define N_ARGS(...) N_ARGS_IMPL(__VA_ARGS__,n,n,n,n,n,n,n,n,n,1,1)
#define N_ARGS_IMPL(_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,N,...) N

#define A_fmt_void
#define A_arg_void

/* link */
#define A_fmt_link_1(fmt) " href=\""fmt"\""
#define A_fmt_link_n(fmt, ...) " href=\""fmt"\""
#define A_fmt_link_N(n, ...) A_fmt_link_##n(__VA_ARGS__)
#define A_fmt_link_X(n, ...) A_fmt_link_N(n,__VA_ARGS__)
#define A_fmt_link(...) A_fmt_link_X(N_ARGS(__VA_ARGS__), __VA_ARGS__)

#define A_arg_link_1(fmt)
#define A_arg_link_n(fmt, ...) , __VA_ARGS__
#define A_arg_link_N(n, ...) A_arg_link_##n(__VA_ARGS__)
#define A_arg_link_X(n, ...) A_arg_link_N(n,__VA_ARGS__)
#define A_arg_link(...) A_arg_link_X(N_ARGS(__VA_ARGS__), __VA_ARGS__)

/* text */
#define A_fmt_text_1(fmt) fmt
#define A_fmt_text_n(fmt, ...) fmt
#define A_fmt_text_N(n, ...) A_fmt_text_##n(__VA_ARGS__)
#define A_fmt_text_X(n, ...) A_fmt_text_N(n,__VA_ARGS__)
#define A_fmt_text(...) A_fmt_text_X(N_ARGS(__VA_ARGS__), __VA_ARGS__)

#define A_arg_text_1(fmt)
#define A_arg_text_n(fmt, ...) , __VA_ARGS__
#define A_arg_text_N(n, ...) A_arg_text_##n(__VA_ARGS__)
#define A_arg_text_X(n, ...) A_arg_text_N(n,__VA_ARGS__)
#define A_arg_text(...) A_arg_text_X(N_ARGS(__VA_ARGS__), __VA_ARGS__)

/* macro */
#define A(link, text) \
    printf("<a"A_fmt_##link">"A_fmt_##text"</a>\n" A_arg_##link A_arg_##text)

int main(void)
{
    A(link(), void);
    A(void, text());
    A(link("http://www.google.es"), void);
    A(link("%s/%s", "http://www.google.es", "home"), text("Visit google"));
    A(void, text("%s today", "Visit google"));
    A(link("http://%s/%s", "www.google.es", "home"), text("%s today", "Visit google"));
    A(void,void);
    return 0;
} 
```

通过这种实现，`N_ARGS`我只能使用 10 个参数，是否有另一种方法来检查宏中是否有多个无限制的参数？

我知道`, ## __VA_ARGS__`gcc 扩展，但我想避免警告

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:20:29.100

最后我修复了使用`__ extension__`

```
#include <stdio.h>

#define A_fmt_void
#define A_arg_void
#define A_fmt_link(fmt, ...) " href=\""fmt"\""
#define A_arg_link(fmt, ...) , ## __VA_ARGS__
#define A_fmt_text(fmt, ...) fmt
#define A_arg_text(fmt, ...) , ## __VA_ARGS__
#define A(link, text) \
    __extension__ printf("<a" A_fmt_##link ">" A_fmt_##text "</a>\n" A_arg_##link A_arg_##text)

int main(void)
{
    A(
        link("%s", "http://wwww.google.com"),
        text("%s", "Visit google")
    );
    A(
        link("http://wwww.google.com"),
        void
    );
    A(
        void,
        text("Visit google")
    );
    A(
        void,
        void
    );
    return 0;
} 
```

这可以防止在迂腐标志打开时发出警告:)

# android - Android ActionBarSherlock 标题已裁剪

> ID：14155623
> 
> 赞同：1
> 
> 时间：2013-01-04T10:45:51.530
> 
> 标签：android, actionbarsherlock, title, crop

有没有人体验过裁剪的标题/标签和 ActionBarSherlock？

使用

```
<application
    android:name="WasserwegeApp"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/Theme.AppTheme" > 
```

和字符串：

```
<string name="app_name">Wasserwege  </string> 
```

我不认为 App-Theme 与它有任何关系，但这就是我使用的：

```
<style name="Theme.AppTheme" parent="@style/Theme.Sherlock.Light">
<item name="android:windowBackground">@color/blue_light</item>
<item name="textColorPrimary">@color/blue_light</item>
<item name="android:textColor">@color/blue_light</item>
<item name="actionBarStyle">@style/Widget.AppTheme.ActionBar</item>
<item name="android:actionBarStyle">@style/Widget.AppTheme.ActionBar</item>

<item name="actionMenuTextColor">@color/white</item>
<item name="android:actionMenuTextColor">@color/white</item>      

<item name="actionBarDivider">@drawable/actionbar_divider</item>
<item name="android:actionBarDivider">@drawable/actionbar_divider</item>
</style> 
```

它总是看起来像这样：

![在此处输入图像描述](../Images/8eab4f41f2d24582c36490c275bf8a3b.png)

我什至试图通过在字符串后面添加一个空格来解决这个问题，但它不起作用。看起来*斜体字体样式*使它变得困难。

谢谢你的帮助，

托拜厄斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T17:54:45.390

实际上，这不仅仅是 ABS 的问题，而是一个问题`TextView`（即，请参阅[Italic TextView with wrap_contents 似乎在右边缘剪辑文本](https://stackoverflow.com/questions/4353836/italic-textview-with-wrap-contents-seems-to-clip-the-text-at-right-edge)）。

解决方案确实是在末尾添加一个空格。如果您使用的是 XML，空间将被切掉，因此您必须执行以下操作来强制使用空格：

```
<string name="app_name">Wasserwege\u0020\u0020</string> 
```

# c++ - 使用 Gridbagsizer 进行 wxWidgets 对话框布局

> ID：14155630
> 
> 赞同：0
> 
> 时间：2013-01-04T10:46:22.653
> 
> 标签：c++, visual-c++, visual-studio-2005, wxwidgets

我基本上是在尝试制作一个简单的对话。它的问题是，无论我在 wxGridbagsizer 的帮助下做什么，按钮总是出现在左角（彼此重叠）。

代码片段：

```
wxPanel* panel = new wxPanel(this,-1);

wxButton* b1 = new wxButton(panel,wxID_ANY,L"OK",wxDefaultPosition,wxDefaultSize,0);
wxButton* b2 = new wxButton(panel,wxID_ANY,L"Cancel",wxDefaultPosition,wxDefaultSize,0);
gbs->Add(b1,wxGBPosition(1,1));
gbs->Add(b2,wxGBPosition(2,2));

gbs->Fit(panel); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:38:40.957

未执行 sizer 布局。很难确定出了什么问题，因为您的代码片段遗漏了太多内容 - 例如，我假设您正在调用 sizer 的构造函数，但您没有显示代码。无论如何，我认为问题在于您没有告诉专家组您的尺寸测定器。

```
panel->SetSizer( gbs ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T11:46:49.667

尝试使用 DialogBlocks 并查看它生成的代码以了解 grid bag sizer 的使用工作流程。

```
void Yarrr1::CreateControls()
{    
////@begin Yarrr1 content construction
    Yarrr1* itemPanel1 = this;

    wxGridBagSizer* itemGridBagSizer2 = new wxGridBagSizer(0, 0);
    itemGridBagSizer2->SetEmptyCellSize(wxSize(10, 20));
    itemPanel1->SetSizer(itemGridBagSizer2);

    wxButton* itemButton3 = new wxButton( itemPanel1, ID_BUTTON6, _("Button"), wxDefaultPosition, wxDefaultSize, 0 );
    itemGridBagSizer2->Add(itemButton3, wxGBPosition(0, 0), wxGBSpan(1, 1), wxALIGN_CENTER_HORIZONTAL|wxALIGN_CENTER_VERTICAL|wxALL, 5);

    wxButton* itemButton4 = new wxButton( itemPanel1, ID_BUTTON7, _("Button"), wxDefaultPosition, wxDefaultSize, 0 );
    itemGridBagSizer2->Add(itemButton4, wxGBPosition(1, 1), wxGBSpan(1, 1), wxALIGN_CENTER_HORIZONTAL|wxALIGN_CENTER_VERTICAL|wxALL, 5);

////@end Yarrr1 content construction
} 
```

产生[http://screencast.com/t/mANmpGmGb20](http://screencast.com/t/mANmpGmGb20)

# html - 使用 @font-face 时，Firefox 和 IE 中的负上边距

> ID：14155634
> 
> 赞同：0
> 
> 时间：2013-01-04T10:46:35.623
> 
> 标签：html, css, internet-explorer, google-chrome, firefox

我一直在用谷歌浏览器开发一个网站，最后决定看看它在 IE 和 Firefox 中的样子。令我惊讶的是，与 chrome 相比，Firefox 和 Internet Explorer 都存在同样的问题。当使用@font-face 导入字体时，谷歌浏览器会以我想要的方式显示内容，但 Firefox 和 Internet Explorer 都以假想的“负上边距”显示字体。我附上了一些截图，因为它有点难以解释。

谷歌浏览器

![谷歌浏览器](../Images/e60ec4406c6a4de307f34a58bf2c8050.png)

火狐

![火狐](../Images/9fcda4a019a33e82a21fa04c92a45a52.png)

IE浏览器

[Internet Explorer http://img846.imageshack.us/img846/3021/a78c216586e54bc2b05d2a8.png](http://img846.imageshack.us/img846/3021/a78c216586e54bc2b05d2a8.png)

谷歌浏览器

[![谷歌浏览器](../Images/9bcef895b0eb49e533f05ee24b2eca83.png)](https://i.stack.imgur.com/lSPod.png)

火狐

[![火狐](../Images/25b13356cd52e20cdc8037edc20e2357.png)](https://i.stack.imgur.com/4vOGa.png)

IE浏览器

[![IE浏览器](../Images/d8900a997f92bdcf15e453138726bc0f.png)](https://i.stack.imgur.com/7oDXK.png)

有谁知道是什么原因造成的？我还没有实现浏览器修复，所以导航栏的所有 CSS 都是：

```
<div id="nav">
    <ul>
        <li>
            <a href="#main">HOME</a>
        </li>
        <li>
            <a href="#news">NEWS</a>
        </li>
        <li>
            <a href="#events">EVENTS</a>
        </li>
        <li>
            <a href="#about">ABOUT</a>
        </li>
        <li>
            <a href="#music">MUSIC</a>
        </li>
        <li>
            <a href="#study">STUDY</a>
        </li>
        <li>
            <a href="#gallery">GALLERY</a>
        </li>
        <li>
            <a href="#shop">SHOP</a>
        </li>
        <li>
            <a href="#contact">CONTACT</a>
        </li>
    </ul>
</div> 
```

```
#nav a {
    height: 60px;
    margin-bottom: 0px;
    width: 105px;
    display: block;
    line-height: 60px;
    text-align: center;
    font-family: bebas;
    text-decoration: none;
    color: #555555;
    font-size: 25px;
} 
```

事件列表的标记是：

```
<div class="entry">
    <div class="date">
        <div class="day">15</div>
        <div class="month">Nov</div>
    </div>      
    <div class="location">
        <div class="city">Melbourne</div>
        <div class="club">St Judes Anglican Church</div>
    </div>  
    <div class="clear"></div>
</div> 
```

```
#events .entry{
    text-transform: uppercase;
    font-family: bebas;
    font-size: 30px;
    color: #555555;
    word-spacing: 4px;
    border-top: 2px solid #4A3948;
}
.city{
    font-size: 40px;
}

.location{
    padding-left:10px;
}
.day{
    font-size: 65px;
    line-height: 55px;
}
.date{
    text-align: center;
    width: 95px;
    border-right: 4px solid;
}
.club{
    font-size: 28px;
    line-height: 31px;
} 
```

有没有人有关于这个问题的任何信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:53:45.310

这里“#nav a”而不是高度尝试删除高度并使用填充：20px 25px;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:07:42.207

我已经根据您的字体大小提到了示例填充，您可以添加使用填充....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:35:54.573

如果一切都失败了，您可以引入 LINE-HEIGHT 吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T10:18:52.207

正如 Boris Zbarsky 在评论中所建议的那样，这是字体指标的问题。我从一个专门的 @font-face 网站下载了一个新的 typekit 副本，它现在可以工作了！

# android - 为 UI 小部件的 Android 活动运行 JUnit 测试用例时出现异常的原因是什么？

> ID：14155635
> 
> 赞同：2
> 
> 时间：2013-01-04T10:46:40.260
> 
> 标签：android, unit-testing, junit

我已经为 Android 编写了一个 JUnit 测试用例。

代码如下：

```
package com.endeavour.clarity.test;

import com.endeavour.clarity.LoginScreen;
import com.endeavour.clarity.R;

import android.test.ActivityInstrumentationTestCase2;
import android.test.TouchUtils;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class LoginScreenTest extends
ActivityInstrumentationTestCase2<LoginScreen> implements OnClickListener {

private LoginScreen mActivity;
private EditText username,password,Url;
private Button signin;

public LoginScreenTest() {
    super("com.endeavour.clarity",LoginScreen.class);
}

@Override
protected void setUp() throws Exception {
    super.setUp();
    super.setUp();

    setActivityInitialTouchMode(false);

    mActivity = getActivity();

    username = (EditText)mActivity.findViewById(R.id.username_edit_text);
    password = (EditText)mActivity.findViewById(R.id.password_edit_text);
    Url = (EditText)mActivity.findViewById(R.id.url_edit_text);
    signin = (Button)mActivity.findViewById(R.id.singin);
    signin.setOnClickListener(this);
}

public void testPreConditions(){
    assertTrue(username != null);
    assertTrue(password != null);
    assertTrue(Url != null);
    assertTrue(signin != null);
}

public void testLogin(){
    final String n1 = "ts_apr1";
    final String p1 = "clarity7";
    String name, pass;
    username.clearComposingText();
    password.clearComposingText();
    assertTrue(signin != null);
    TouchUtils.tapView(this, username);
    sendKeys("ts_apr1");
    TouchUtils.tapView(this, password);
    sendKeys("clarity7");
    mActivity.runOnUiThread(new Runnable() {

        public void run() {
            signin.performClick();
        }
    }); 

    name = username.getText().toString();

    pass = password.getText().toString();

    Log.i("name",name); 
    Log.i("Password",pass);
    assertEquals(n1, name);
    assertEquals(p1, pass);
}

public void onClick(View v) {
    // TODO Auto-generated method stub

}
} 
```

但是这段代码抛出了异常 `java.lang.NullPointerException LoginScreenTest$1.run(LoginScreenTest.java:62)`

runOnUIThread 中的登录按钮为空，在方法开始时不为空。

这段代码有什么问题？任何帮助将不胜感激。谢谢。

# c# - 无参数catch和其他catch的区别

> ID：14155638
> 
> 赞同：7
> 
> 时间：2013-01-04T10:46:44.653
> 
> 标签：c#, exception, exception-handling

我有一段代码

```
//Code 1                        Code 2                          Code 3
try                             try                             try
{                               {                               {
    //Exp occur                     //Exp occur                     //Exp occur 
}                               }                               }
catch (Exception e)             catch (Exception)               catch
{                               {                               {
    //Handle exp                    //Handle exp                    //Handle exp
}                               }                               } 
```

所有三个代码之间有什么区别
**P.S.** 我是新手，**`C#`**就**`Java`**或**`Objective-C`**担心这种语法会引发错误

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-04T10:56:01.453

**代码 1**

它在对象中捕获异常，`e`以后可以用于异常处理。例如，您可以使用`e.Message`或记录 Message 属性或查看堆栈跟踪`e.StackTrace`

**代码 2**

您正在捕获基本类型的所有异常，`Exception`但由于您没有任何与之相关的对象，您只能抛出该异常，以便它可以冒泡，或者您可能会忽略该异常。如果在该代码中您有：

```
catch(InvalidCastException) 
```

然后所有的`InvalidCastException`将在**没有异常对象的块中处理**

**代码 3**

您正在捕获所有类型的异常，无论它们的类型如何，这类似于您的代码 2 与基类`Exception`

[尝试捕捉 - MSDN](http://msdn.microsoft.com/en-us/library/vstudio/0yd65esw.aspx)

> 尽管可以在不使用参数的情况下使用 catch 子句来捕获任何类型的异常，但不建议使用这种用法。通常，您应该只捕获那些您知道如何从中恢复的异常。

如果您在捕获基本异常之前捕获特定异常，它总是会更好。就像是。

```
try
{
}
catch(InvalidCastException ex)
{
}
catch(Exception ex)
{
} 
```

[尝试 - 捕捉 - MSDN](http://msdn.microsoft.com/en-us/library/vstudio/0yd65esw.aspx)

> 在同一个 try-catch 语句中可以使用多个特定的 catch 子句。在这种情况下，catch 子句的顺序很重要，因为 catch 子句是按顺序检查的。在不太具体的异常之前捕获更具体的异常。如果您对 catch 块进行排序以使后面的块永远无法到达，编译器会产生错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T10:52:39.480

代码 1 - 相当正常的捕获，希望不需要解释

代码 2 - 您希望在发生特定异常时执行特定代码，但您无意与异常对象进行实际交互。应该几乎总是`throw;`在最后有一个声明，以便其他在堆栈中关心`catch`它的人可以做到。

代码 3 - 您希望代码针对*任何*异常 (*) 执行（被`catch`相同的早期子句捕获的任何异常除外`try`）。同样，应该几乎总是包含一个`throw;`，以便更高的代码可以`catch`并且实际处理异常。

在某个级别（可能只是在顶层，在您所处的任何环境的未处理异常处理程序中），*应该*检查异常对象并可能记录它（如果可能）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T10:52:55.897

在这里，如果您想使用变量“e”来获取异常消息、行或类型。

```
//Code 1                       
try                            
{                              
 //Exp occur                
}                              
catch (Exception e)            
{                              
 //Handle exp               
} 
```

下面的代码用于获取特定类型的异常而不处理异常变量。

```
//Code 2
try                            
{                              
  //Exp occur                
}                              
catch (Exception)
{                              
 //Handle exp           
} 
```

下面的代码捕获所有类型的异常。

```
//Code 3
try
{
 //Exp occur    
}     
catch 
{                  
 //Handle exp   
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T10:50:42.173

如果您打算实际使用异常对象，将其属性记录到日志文件或显示消息框或抛出另一种异常并将当前异常传递给其构造函数，那么您必须使用三个中的第一个 (最左边的一个）。

一般来说，最常用的方法是第一种方法，如果你想分别处理不同类型的异常，你可以有多个 catch 块，从最专业的顶部开始，把你写的那个放在底部，这样所有的异常都还没有处理将在通用 catch 块中结束。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-04T10:50:49.543

没有。它们都捕获了所有可能发生的异常（通过捕获基本类型`Exception`或任何类型）。这通常是不受欢迎的，这是有充分理由的。您应该按照您期望的顺序捕获特定异常，然后如果您确实想捕获所有异常`Exception`，请在最后捕获。

```
try
{
}
catch (MyCustomException)
{
    // do something for your custom exception
}
catch (Exception)
{
    // do something for everything else
} 
```

当您为异常指定变量时，例如`catch (Exception e)`您将可以通过`e.Property`或仅`e.ToString()`访问完整消息来访问堆栈跟踪（和其他异常信息）。这也是`throw`捕获异常时的最佳实践（好吧，除非您想在此级别抑制它并且不允许您的调用代码看到异常），因此它会冒泡并保留堆栈跟踪：

```
catch (Exception e)
{
    // do something with e

    throw;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-04T10:56:49.020

代码 1 捕获每个异常（在您的情况下！）并声明它，因此您可以稍后将其用于错误消息。

```
MessageBox.Show(e.Message); 
```

代码 2 还捕获每个异常（在您的情况下！），但您不能使用它，因为它没有被声明。

这两种方法不是为此而设计的，它们旨在捕获特定或自定义异常。

```
 try
    {
     //mycode
    }catch(MyException myExc)
    {   
    //TODO HERE  
    Console.Write(myExc.Message);  
    } 
```

第三个捕获所有异常。因为没有定义。

看看：http: [//msdn.microsoft.com/de-de/library/0yd65esw%28v=vs.80%29.aspx](http://msdn.microsoft.com/de-de/library/0yd65esw%28v=vs.80%29.aspx)

了解有关 C# 中异常的更多信息。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-04T11:18:19.777

差异：

1.  **声明异常参数 ex**允许您访问异常对象，以便查看和使用其属性、字段、方法等。这个“ex”变量的工作方式与任何方法中的任何参数一样。

2.  **声明不带参数 ex 的异常类型**允许您为不同类型的异常分隔多个“捕获”区域。它没用，功能上等同于您在此处定义的*代码示例 3*，但是如果您需要根据异常的类型执行不同的操作，并且您不需要访问异常对象（您只需要知道异常的类型），那么这就是你要走的路。

3.  **Untyped Catch Exception Handler**允许您为可能抛出的任何异常添加回退，无论其类型如何。但是，由于它没有参数化，您将无法访问 Exception 对象的属性或方法。因此，*代码示例 2*和*代码示例 3*是等效的。

例子：

```
try{ // code that throws exception }
catch(TypeException ex) 
{ 
    // code to handle exceptions of type TypeException
    // I can access ex parameter, for example to show its Message property
    MessageBox.Show(ex.Message);
}
catch(OtherTypeException) 
{ 
    // code to handle exceptions of type OtherTypeException 
    // I cannot access the ex parameter since it is not declared, but I know
    // the exact type of the exception
    MessageBox.Show("There was an exception of Other Type");
}
catch
{
    // code to handle any other exception
    // this is functionally equivalent to catch(Exception) since all typed exceptions
    // inherit from the base type Exception
    MessageBox.Show("An unknown exception has been thrown.");
}
... 
```

# ios - NSDateFormatter 产生错误的日 期

> ID：14155640
> 
> 赞同：0
> 
> 时间：2013-01-04T10:46:50.397
> 
> 标签：ios, nsdateformatter

我正在使用 NSDateFormatter 将字符串转换为 NSDate

```
1 NSDateFormatter *df = [[NSDateFormatter alloc]init];
2 [df setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
3 [df setDateFormat:@"YYYY-MM-dd"];
4 NSDate *dueDate = [df dateFromString:@"1970-01-01"]; 
```

当我检查到期日期时，它错了一年：

```
po dueDate
(NSDate *) $0 = 0x1cdc08d0 1971-01-01 00:00:00 +0000 
```

我做错了吗，或者这可能与“请勿打扰”功能中的错误相同？

[http://www.forbes.com/sites/adriankingsleyhughes/2013/01/03/apples-ios-6-do-not-disturb-bug-means-your-iphone-wont-disturbed-you-until-next-星期/](http://www.forbes.com/sites/adriankingsleyhughes/2013/01/03/apples-ios-6-do-not-disturb-bug-means-your-iphone-wont-disturbed-you-until-next-week/)

# c# - 如何根据预期返回值以不同方式处理动态类

> ID：14155642
> 
> 赞同：0
> 
> 时间：2013-01-04T10:46:51.503
> 
> 标签：c#, .net, dynamic, dynamicobject

我必须重写哪种方法`DynamicObject`才能根据使用实例的上下文获得不同的行为（在动态类中）？

这是我要完成的一个示例：

```
class DynamicTest : DynamicObject
{
    public DynamicTest(string xyz)
    {
        _xyz = xyz;
    }

    private string _xyz;

    //TODO: what do I need to implement to get required behaviour?
}

class Program
{
    static void Main(string[] args)
    {
        dynamic foo = new DynamicTest("test);

        if (foo)  // treat foo as boolean
        { // jump in here when _xyz of foo has a value
            System.Console.WriteLine(foo); //treat foo as string
        }
        else
        { // jump in here when _xyz of foo is null
            System.Console.WriteLine("No Value In Object");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:01:54.107

我不知道你为什么要这样做，我绝对**不会**推荐这样做，但你可以覆盖 DynamicObject 上的 TryConvert 方法，如：

```
class DynamicTest : DynamicObject
{
    public DynamicTest(string xyz)
    {
        _xyz = xyz;
    }
    private string _xyz;

    public override bool TryConvert(ConvertBinder binder, out Object result)
    {
        Console.WriteLine ("TryConvert was called");
        Console.WriteLine ("Is explicit: "+binder.Explicit);
        if(binder.Type == typeof(bool))
        {
            result = true;
            return true;
        }
        else if(binder.Type == typeof(string))
        {   
            result = _xyz;
            return true;
        }

        result = null;
        return false;
    }

    public override string ToString()
    {
        return _xyz;
    }
} 
```

现在有一些问题：`ToString`是必需的`Console.WriteLine`，如果不存在隐式转换（因为重载），它不会尝试转换`WriteLine`，所以它调用`ToString`. 要传递的隐式和显式转换`bool`，但如果你在 if - 中使用 foo，你会得到`RuntimeBinderException: Cannot implicitly convert type 'DynamicTest' to 'bool'`.

**例子：**

```
dynamic foo = new DynamicTest("test:");
bool boolFoo = foo; //passes, TryConvert is called with `binder.Explicit` == false
bool boolFoo1 = (bool)foo; //passes, TryConvert is called with `binder.Explicit` == true
if(foo) //throws RuntimeBinderException 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:56:03.983

我认为[隐式运算符](http://msdn.microsoft.com/en-us/library/z5z9kes2%28v=vs.71%29.aspx)可以帮助你

示例代码：

```
class DynamicTest : DynamicObject
{
    public DynamicTest(string xyz)
    {
        _xyz = xyz;
    }

    private string _xyz;

    public static implicit operator bool(DynamicTest rhs)
    {
        return rhs._xyz != null;
    }

    public static implicit operator string(DynamicTest rhs)
    {
        return rhs._xyz;

    }

    //TODO: what to override to get required behaviour
}

class Program
{
    static void Main(string[] args)
    {
        dynamic foo = new DynamicTest("test");

        if (foo)  // treat foo as boolean
        { // jump in here when _xyz of foo has a value
            System.Console.WriteLine((string)foo); //treat foo as string   //Importat: (string)foo to go operatorstring 
        }
        else
        { // jump in here when _xyz of foo is null
            System.Console.WriteLine("No Value In Object");
        }

    }
} 
```

# javascript - JavaScript 修复坏的 html 标签

> ID：14155644
> 
> 赞同：1
> 
> 时间：2013-01-04T10:47:01.420
> 
> 标签：javascript, sharepoint

我在一个 Sharepoint 网站上工作。我无权访问 webparts 代码。我只能使用 JavaScript 更改母版页。

其中一个 Web 部件有错误。它改变了`<img>`一个不好的`SRC`值。

例子：

应该有

```
<img alt="img" src="http://www.apicture.png" style="margin:5px" /><br /><br /> 
```

但有

```
<img alt="img" src="<a href="http://www.apicture.png">http://www.apicture.png</a>" style="margin:5px" /><br /><br /> 
```

我试图匹配和替换，但 innerHtml 破坏了其他脚本。

如何用 JavaScript 修复我的问题？

编辑：

我有代码：

```
var markup = document.documentElement.innerHTML;
markup = markup.replace(/src=\".*?(http:\/\/[^\"]+)\"/g,'src=\"$1\"');
document.documentElement.innerHTML = markup; 
```

但它打破了我的网页。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T13:06:03.157

由于 DOM 已经被破坏，您需要退后一步并尝试挽救 HTML。

1）找到破碎元素的父母。虽然 search&replace 内部`document.body.innerHTML`可能会起作用，[但您不应该真正让正则表达式靠近大块 HTML](https://stackoverflow.com/a/1732454/499214)。性能也是一个问题，尽管是一个较小的问题。

`<img alt="img" src="<a href="http://...`将被浏览器解析为带有源“ `<a href=`”的图像。

使用 jQuery，您可以简单地请求`$('img[src="<a href"]')`获取图像。除了在 IE<8 中，您可以使用`querySelectorAll`相同的选择器。如果你没有 jQuery，并且想支持 IE7，你需要使用`getElementsByTagName`手动过滤。

如果你真的很幸运，你可以通过`getElementByID`（或等效的 jQuery）找到父级。

这是简单的部分。

* * *

2) 您的 HTML 没有通过验证，并且浏览器已经做出了一些努力来修复它。你需要扭转这个过程。预测浏览器操作是有问题的，但让我们尝试一下。

让我们看看浏览器做了什么

```
<img src="<a href="http://www.test.com/img/image-20x20.png">http://www.test.com/img/image-20x20.png</a>" style="margin:5px" />​ 
```

这是 Chrome 和 Firefox 修复它的方式：

```
<img src="&lt;a href=" http:="" www.test.com="" img="" image-20x20.png"="">http://www.test.com/img/image-20x20.png" style="margin:5px" /&gt; 
```

IE9 按`img`字母顺序对`innerHTML`(o_0) 中的属性进行排序，并且不会对`<`内部 src 进行 HTML 转义。IE7-8 还`=""`从属性中剥离。

图像属性将难以挽救，但文本内容完好无损。无论如何，可以看到模式：

应该保留从开始到`<img`结束的所有内容。`src=`不幸的是，在 IE 中，参数被重新排列，所以你也必须保留不正确的标签。`src="..."`本身必须被删除。在现代浏览器中，过去的一切都是[不正确的]，但在 IE 中，正确的属性可能已经悄悄出现（反之亦然）。然后图像标签结束。

后面的所有内容都是真实的 URL，直到双引号。从双引号直到 HTML 转义`/>`是属于图像标签的属性。让我们*希望*它们不包含 HTML。CSS 很好（出于我们的目的）。

* * *

3) 让我们构建正则表达式：一个打开的 IMG 标记，任何属性（*希望*它们不包含 HTML）（捕获），`src`属性及其特定值（转义或未转义），任何其他属性（捕获），结束标记、URL（捕获）、更多属性（捕获）和 HTML 转义结束标记。

```
/<img([^>]*?)src="(?:<|\&lt\;)a href="([^>]*?)>([^"]+?)"(.*?)\/&gt;/gi 
```

您可能对[RegexPal.com 如何看待它感兴趣](http://regexpal.com/?flags=gi&regex=%3Cimg(%5B%5E%3E%5D*%3F)src%3D%22(%3F%3A%3C%7C%5C%26lt%5C%3B)a%20href%3D%22(%5B%5E%3E%5D*%3F)%3E(%5B%5E%22%5D%2B%3F)%22(.*%3F)%5C%2F%26gt%3B&input=%3Cimg%20src%3D%22%26lt%3Ba%20href%3D%22%20http%3A%3D%22%22%20www.test.com%3D%22%22%20img%3D%22%22%20image-20x20.png%22%3D%22%22%3Ehttp%3A%2F%2Fwww.test.com%2Fimg%2Fimage-20x20.png%22%20style%3D%22margin%3A5px%22%20%2F%26gt%3B)。

* * *

它应该被替换为：具有适当属性的图像连接，并与`src`打捞。过滤属性可能是值得的，所以让我们选择回调替换。普通属性的键中只包含单词字符。更重要的是，普通属性通常是非空字符串（IMG 标签没有布尔属性，[除非您使用服务器端地图](https://developer.mozilla.org/en-US/docs/HTML/Element/Img#attr-ismap)）。这将匹配所有空属性但不匹配有效的属性键：`/\S+(?:="")?(?!=)/`

* * *

这是代码：

```
//forEach, indexOf, map need shimming in IE<9
//querySelectorAll cannot be reliably shimmed, so I'm not using that.

//author: Jan Dvorak
// https://stackoverflow.com/a/14157761/499214

var images = document.getElementsByTagName("img");
var parents = [];
[].forEach.call(images, function(i){
  if(
    /(?:<|\&lt\;)a href=/.test(i.getAttribute("src"))
    && !~parents.indexOf(i.parentNode)
  ){ 
    parents.push(i.parentNode)
  }
})

var re = /<img([^>]*?)src="(?:<|\&lt\;)a href="([^>]*?)>([^"]+?)"(.*?)\/&gt;/gi;
parents.forEach(function(p){
  p.innerHTML = p.innerHTML.replace(
    re, 
    function(match, attr1, attr2, url, attr3){
      var attrs = [attr1, attr2, attr3].map(function(a){
        return a.replace(/\S+(?:="")?(?!=)/g,"");
      }).join(" ");
      return '<img '+attrs+' src="'+url+'" />';
    }
  );
}); 
```

小提琴：http: [//jsfiddle.net/G2yj3/1/](http://jsfiddle.net/G2yj3/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T11:11:33.293

您可以`src`使用正则表达式修复属性，但它不会修复整个页面。原因是 Web 浏览器试图解析这种糟糕的 HTML 并在 JS 执行之前产生奇怪的输出（额外的元素等）。由于您不能干扰 HTML 解析/渲染引擎，因此除了更改原始内容来解决此问题外，没有其他合理的方法。

# database - 使用 Slony-I 替代 Linux 设置到 Shell 脚本的数据库复制

> ID：14155645
> 
> 赞同：0
> 
> 时间：2013-01-04T10:47:02.223
> 
> 标签：database, linux, postgresql, replication, slony

正如标题所示，

到目前为止，我发现的当前教程使用 Shell 脚本文件中的嵌入式 SLON 命令来设置 Slony-I 主从复制所需的配置。例如：[Slony-I 安装教程](http://www.linuxjournal.com/article/7834?page=0,0)

我想知道是否可以嵌入 SLON 设置命令并在另一种语言中调用它们，例如在 linux 环境中工作的 C/C++/Python？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:59:00.570

SLONIK 脚本通常通过将 STDOUT 写入 slonik 二进制文件来工作。任何语言都应该具有复制这种风格的能力，但与使用 shell 脚本方法没有什么区别，而且根据我的经验，它往往会遮挡正在做的事情。毕竟，您仍然在写入 STDOUT 并将该信息发送到 slonik 二进制文件。

我过去曾编写过 perl 模块来帮助解决这个问题，但它们感觉非常笨拙，我只在需要动态修改复制设置时才使用它们。我发现很少需要这样的东西，并且对于绝大多数 slony 工作来说，shell 脚本管理起来要简单得多。

总结一下：是的，你可以，但这可能只会让事情变得更复杂。

如何在 python 中做到这一点的一个例子是：

```
p = subprocess.Popen('/usr/bin/slonik',stdout=subprocess.PIPE,stdin=subprocess.PIPE)
p.stdin.write('<slon commands here>')
p.stdin.close() 
```

# php - 使用 PHP 创建图像的虚拟缩略图

> ID：14155651
> 
> 赞同：1
> 
> 时间：2013-01-04T10:47:30.273
> 
> 标签：php

我想在显示时间的同时显示图像的缩略图，但不想保存图像。

我尝试了一些`notorious ;)`脚本，但它不起作用:(。请看一下，让我知道你有什么想法

```
<?php
    function print_thumb($src, $desired_width = 100){
        /* read the source image */
        $source_image = imagecreatefromjpeg($src);
        $width = imagesx($source_image);
        $height = imagesy($source_image);

        /* find the "desired height" of this thumbnail, relative to the desired width  */
        $desired_height = floor($height * ($desired_width / $width));

        /* create a new, "virtual" image */
        $virtual_image = imagecreatetruecolor($desired_width, $desired_height);

        /* copy source image at a resized size */
        imagecopyresampled($virtual_image, $source_image, 0, 0, 0, 0, $desired_width, $desired_height, $width, $height);

        // Set the content type header - in this case image/jpeg
        header('Content-Type: image/jpeg');

        // Output the image
        imagejpeg($virtual_image);

    }
?>

<img src="<?php print_thumb("s1.jpg"); ?>" /> 
```

我将此文件保存为`thumbs.php`（单个文件），同时通过 localhost 访问它，它显示如下

`<img src="http://localhost/test/thumbs.php">`

如果我将两者都写在单独的文件中，它工作正常。

喜欢`file.html`_

`<img src="thumb.php?img=s1.jpg" />`

和

拇指.php

```
<?php
    function print_thumb($src, $desired_width = 100){
        /* read the source image */
        $source_image = imagecreatefromjpeg($src);
        $width = imagesx($source_image);
        $height = imagesy($source_image);

        /* find the "desired height" of this thumbnail, relative to the desired width  */
        $desired_height = floor($height * ($desired_width / $width));

        /* create a new, "virtual" image */
        $virtual_image = imagecreatetruecolor($desired_width, $desired_height);

        /* copy source image at a resized size */
        imagecopyresampled($virtual_image, $source_image, 0, 0, 0, 0, $desired_width, $desired_height, $width, $height);

        // Set the content type header - in this case image/jpeg
        header('Content-Type: image/jpeg');

        // Output the image
        imagejpeg($virtual_image);

    }

    print_thumb($_REQUEST['img']);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:53:49.370

您需要 2 个单独的脚本。

1 输出图像`image/jpg`，1 输出 HTML。您似乎正在尝试将图像直接渲染到`src`属性。

HTML页面：

```
<html>
    <body>
        <img src="http://localhost/test/thumbs.php?img=s1.jpg">
    </body>
</html> 
```

PHP页面：

```
<?php
    function print_thumb($src, $desired_width = 100){
        // your function as is
    }

    // you should probably sanitize this input
    print_thumb($_REQUEST['img']);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:49:54.540

尝试使用“TimThumb”（[点击这里](http://www.binarymoon.co.uk/projects/timthumb/)），它确实让这样的事情变得非常容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T10:51:32.947

如果`<img src="<?php print_thumb("s1.jpg"); ?>" />`是您显示的代码中 thumbs.php 的一部分，那么您必须将其删除。我还建议`?>`从 thumbs.php 中删除

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T11:09:19.603

## 在'thumb.php'里面

```
<?php

  function print_thumb($src, $desired_width = 100){

    if( !file_exists($src) )
      return false;

    /* read the source image */
    $source_image = imagecreatefromjpeg($src);
    $width = imagesx($source_image);
    $height = imagesy($source_image);

    /* find the "desired height" of this thumbnail, relative to the desired width  */
    $desired_height = floor($height * ($desired_width / $width));

    /* create a new, "virtual" image */
    $virtual_image = imagecreatetruecolor($desired_width, $desired_height);

    /* copy source image at a resized size */
    imagecopyresampled($virtual_image, $source_image, 0, 0, 0, 0, $desired_width, $desired_height, $width, $height);

    // Set the content type header - in this case image/jpeg
    header('Content-Type: image/jpeg');

    // Output the image
    imagejpeg($virtual_image);

    return true;

  }

  if( isset( $_GET['file'] ) && !empty( $_GET['file'] ) ){

    if( !print_thumb( $_GET['file'] ) ){

      echo 'Failed to create thumb for "'.$_GET['file'].'"';

    }else{

      // The Thumb would have been returned

    }

  }else{

    echo 'No File specified';

  }
?> 
```

## 在显示缩略图的任何页面内

```
<img src="thumb.php?file=s1.jpg" /> 
```

您现有代码的问题是您将错误的代码放在错误的文件中。thumb.php文件什么*都不*做，只是查看它正在发送的参数（它打算变成缩略图的文件）并返回图像。

因此，将`<img....`标记放在该文件的末尾是您的问题所在。

相反，您必须查看您试图使图像出现的位置。您必须将该图像文件名传递到标记中，以便*thumbs.php*文件知道您希望它缩略图并返回什么。

正如另一位受访者指出的那样，有一些库可以为您做这件事，比自己编写要容易得多。

# postgresql - postgres 中的 to_char(number) 函数

> ID：14155656
> 
> 赞同：27
> 
> 时间：2013-01-04T10:47:38.083
> 
> 标签：postgresql, postgresql-9.1

我想使用 to_char() 函数将数字显示/转换为字符（长度相同）。

在 oracle 中我可以这样写

```
SELECT to_char(1234) FROM DUAL 
```

但是在 postgres `SELECT to_char(1234)` 中不起作用。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-04T10:53:05.537

您需要提供格式掩码。在 PostgreSQL 中没有默认值：

```
select to_char(1234, 'FM9999'); 
```

如果您不知道有多少位数，只需估计最大值：

```
select to_char(1234, 'FM999999999999999999'); 
```

如果数字的位数较少，则不会产生任何副作用。

如果您不需要任何格式（如小数点、千位分隔符），您也可以简单地将值转换为文本：

```
select 1234::text 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-04T10:53:12.370

您必须指定数字格式，即：

```
to_char(1234, '9999') 
```

在这里查看更多信息：[http ://www.postgresql.org/docs/current/static/functions-formatting.html](http://www.postgresql.org/docs/current/static/functions-formatting.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-25T00:55:30.430

CAST 功能对我有用。

```
SELECT CAST(integerv AS text) AS textv
FROM (
       SELECT 1234 AS integerv
     ) x 
```

或者

```
SELECT integerv::text AS textv
FROM (
       SELECT 1234 AS integerv
     ) x 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-09-21T19:53:21.483

您可以使用：

```
1234||'' 
```

它适用于大多数数据库。

# java - 将进度条添加到备份

> ID：14155659
> 
> 赞同：0
> 
> 时间：2013-01-04T10:47:50.220
> 
> 标签：java, android, backup

我正在使用以下代码在我的应用程序上创建文件夹结构的备份（备份到远程 USB）

它工作正常，但是现在我正在尝试弄清楚如何指示当前的运行百分比等。实际上，我想我不明白副本的工作原理足以列出有多少文件在文件夹中计算出一个百分比？或者增加什么。

任何提示真的将不胜感激。

这是我的备用代码：

```
 public void doBackup(View view) throws IOException{

        Time today = new Time(Time.getCurrentTimezone());
        today.setToNow();

        SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMdd_HHmmss");
        final String curDate = sdf.format(new Date());

        final ProgressDialog pd = new ProgressDialog(this);
        pd.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        pd.setMessage("Running backup. Do not unplug drive");
        pd.setIndeterminate(true);
        pd.setCancelable(false);
        pd.show();
        Thread mThread = new Thread() {
        @Override
        public void run() {
        File source = new File(Global.SDcard); 
        File dest = new File(Global.BackupDir + curDate);
        try {
            copyDirectory(source, dest);
        } catch (IOException e) {

            e.printStackTrace();
        }
        pd.dismiss();

        }
        };
        mThread.start();

    }

    public void copyDirectory(File sourceLocation , File targetLocation)
            throws IOException {

                Log.e("Backup", "Starting backup");
                if (sourceLocation.isDirectory()) {
                    if (!targetLocation.exists() && !targetLocation.mkdirs()) {
                        throw new IOException("Cannot create dir " + targetLocation.getAbsolutePath());
                    }

                    String[] children = sourceLocation.list();
                    for (int i=0; i<children.length; i++) {
                        copyDirectory(new File(sourceLocation, children[i]),
                                new File(targetLocation, children[i]));
                    }
                } else {

                    Log.e("Backup", "Creating backup directory");
                    File directory = targetLocation.getParentFile();
                    if (directory != null && !directory.exists() && !directory.mkdirs()) {
                        throw new IOException("Cannot create dir " + directory.getAbsolutePath());
                    }

                    InputStream in = new FileInputStream(sourceLocation);
                    OutputStream out = new FileOutputStream(targetLocation);

                    byte[] buf = new byte[1024];
                    int len;
                    while ((len = in.read(buf)) > 0) {
                        out.write(buf, 0, len);
                    }
                    in.close();
                    out.close();
                    Log.e("Backup", "Finished");
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:57:28.070

您可以在最顶层调用以下函数`File`来获取其内容的总大小......

```
long getFileSize(File aFile) {

    //Function passed a single file, return the file's length.
    if(!aFile.isDirectory())
        return aFile.length();

    //Function passed a directory.
    // Sum and return the size of the directory's contents, including subfolders.
    long netSize = 0;
    File[] files = aFile.listFiles();
    for (File f : files) {
        if (f.isDirectory())
            netSize += getFileSize(f);
        else
            netSize += f.length();
    }
    return netSize;
} 
```

然后跟踪已复制文件的总大小。使用`SizeOfCopiedFiles/SizeOfDirectory`应该会给你一个粗略的进度估计。

编辑：更新进度条...

以下循环似乎是进行更新的好地方...

```
while ((len = in.read(buf)) > 0) {
    out.write(buf, 0, len);
    sizeOfCopiedFiles += len;
    pd.setProgress((float)SizeOfCopiedFiles/SizeOfDirectory);
} 
```

（注意，我假设 pd.setProgress(float f) 取值从 0 到 1。）

为此，您的 copyDirectory(...) 需要获取对 ProgressDialog 的引用，还需要获取 SizeOfCopiedFiles（用于先前调用的文件写入总和）和 SizeOfDirectory。该函数需要返回 sizeOfCopiedFiles 的更新值，以反映每次递归调用后的更新值。

最后，你会得到这样的东西......（注意：为了清楚起见，伪代码）

```
public long copyDirectory(File source, File target, long sizeOfCopiedFiles,
        long sizeOfDirectory, ProgressDialog pd) {

    if (source.isDirectory()) {
        for (int i = 0; i < children.length; i++) {
            sizeOfCopiedFiles = copyDirectory(sourceChild, destChild,
                    sizeOfCopiedFiles, sizeOfDirectory, pd);
        }
    } else {
        int len;
        while ((len = in.read(buf)) > 0) {
            out.write(buf, 0, len);
            sizeOfCopiedFiles += len;
            pd.setProgress((float)sizeOfCopiedFiles / sizeOfDirectory);
        }

    }
    return sizeOfCopiedFiles;
} 
```

# python - 使用参数从 bash 调用 Python 脚本

> ID：14155669
> 
> 赞同：123
> 
> 时间：2013-01-04T10:48:28.177
> 
> 标签：python, linux, bash, shell, debian

我知道我可以使用以下命令从我的 bash 脚本运行 python 脚本：

```
python python_script.py 
```

但是，如果我想从我的 bash 脚本向我的 python 脚本传递一个变量/参数呢？我怎样才能做到这一点？

基本上 bash 会计算出一个文件名，然后 python 会上传它，但是当我调用它时，我需要将文件名从 bash 发送到 python。

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2015-09-23T22:07:07.797

要在 bash 脚本中执行 python 脚本，您需要调用与在终端中相同的命令。例如

```
> python python_script.py var1 var2 
```

要在 python 中访问这些变量，您需要

```
import sys
print sys.argv[0] # prints python_script.py
print sys.argv[1] # prints var1
print sys.argv[2] # prints var2 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-04T10:55:36.413

[此外](http://docs.python.org/dev/library/argparse.html)[`sys.argv`](http://docs.python.org/3.0/library/sys.html#sys.argv)，还可以查看argparse模块，它有助于定义脚本的选项和参数。

> argparse 模块使编写用户友好的命令行界面变得容易。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-01-04T10:50:37.720

采用

```
python python_script.py filename 
```

在你的 Python 脚本中

```
import sys
print sys.argv[1] 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-03-21T16:56:05.380

嵌入式选项：

将 python 代码包装在 bash 函数中。

```
#!/bin/bash

function current_datetime {
python - <<END
import datetime
print datetime.datetime.now()
END
}

# Call it
current_datetime

# Call it and capture the output
DT=$(current_datetime)
echo Current date and time: $DT 
```

使用环境变量将数据传递到您的嵌入式 python 脚本。

```
#!/bin/bash

function line {
PYTHON_ARG="$1" python - <<END
import os
line_len = int(os.environ['PYTHON_ARG'])
print '-' * line_len
END
}

# Do it one way
line 80

# Do it another way
echo $(line 80) 
```

[http://bhfsteve.blogspot.se/2014/07/embedding-python-in-bash-scripts.html](http://bhfsteve.blogspot.se/2014/07/embedding-python-in-bash-scripts.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-27T15:31:12.550

在脚本中使用：

```
echo $(python python_script.py arg1 arg2) > /dev/null 
```

或者

```
python python_script.py "string arg"  > /dev/null 
```

该脚本将在没有输出的情况下执行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-16T19:28:31.260

我有一个 bash 脚本，它调用一个小的 python 例程来显示一个消息窗口。因为我需要使用 killall 来停止 python 脚本，所以我不能使用上述方法，因为这意味着运行 killall python 可能会取出其他 python 程序，所以我使用

**`pythonprog.py "$argument"`&** # & 将控制权直接返回给 bash 脚本，因此必须在反引号之外。由于某种原因，此消息的预览显示它在命令的任何一侧都没有“`”。

只要 python 脚本将按名称从 cli 运行，而不是 python pythonprog.py，它就可以在脚本中运行。如果您需要多个参数，只需在引号内的每个参数之间使用一个空格。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-18T10:49:16.450

打印所有没有文件名的参数：

```
for i in range(1, len(sys.argv)):
print(sys.argv[i]) 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-01-04T11:07:00.467

并查看[getopt](http://docs.python.org/2/library/getopt.html)模块。它对我很有用！

# python - py.test 圈复杂度插件

> ID：14155670
> 
> 赞同：0
> 
> 时间：2013-01-04T10:48:35.930
> 
> 标签：python, unit-testing, complexity-theory, pytest

有谁知道 py.test 是否有[圈复杂度](http://en.wikipedia.org/wiki/Cyclomatic_complexity)插件？

# iphone - 在 Apple 地图上绘制路线 (iOS 6+)

> ID：14155671
> 
> 赞同：2
> 
> 时间：2013-01-04T10:48:37.833
> 
> 标签：iphone, objective-c, ios, mkmapview, ios6-maps

我一直在寻找许多代码示例，说明如何在[此链接](https://stackoverflow.com/questions/2834523/drawing-a-route-in-mapkit-in-iphone-sdk)`polyline`中绘制`MKMapView`第二个答案（从上面）。但是，该解决方案是否适用于 iOS 6 Apple 地图？如果没有，您能否提供指向在 Apple 地图上绘制路线的示例代码的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:57:43.070

是的，它会起作用的。

谷歌地图和苹果地图略有不同，可能有一些不准确的地方。所有 API 几乎相同。

PS我从iOS5开始在我的应用程序中使用谷歌路由，并且在为iOS6更新应用程序时没有任何问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-26T11:52:51.377

```
-(void)load_mapView{

    Place* home = [[[Place alloc] init] autorelease];
    home.name = strAdd;
    CLLocationCoordinate2D loc=[self geoCodeUsingAddress:strAdd Status:1];

    home.latitude =loc.latitude;
    home.longitude =loc.longitude;

    Place* office = [[[Place alloc] init] autorelease];
    office.name = endAdd;

    CLLocationCoordinate2D  loc2=[self geoCodeUsingAddress:endAdd Status:2];;
    office.latitude = loc2.latitude;
    office.longitude = loc2.longitude;

   //*******

    routeView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, mapView.frame.size.width, mapView.frame.size.height)];
    routeView.userInteractionEnabled = NO;
    [mapView addSubview:routeView];

    lineColor = [UIColor colorWithWhite:0.2 alpha:0.5];

    [self showRouteFrom:home to:office];
    [activityIndicator stopAnimating];
}

- (CLLocationCoordinate2D) geoCodeUsingAddress:(NSString *)address Status:(NSInteger )sts
{
    double latitude = 0, longitude = 0;
    NSString *esc_addr =  [address stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    NSString *req = [NSString stringWithFormat:@"http://maps.google.com/maps/api/geocode/json?sensor=false&address=%@", esc_addr];
    NSString *result = [NSString stringWithContentsOfURL:[NSURL URLWithString:req] encoding:NSUTF8StringEncoding error:NULL];
    if (result) {
        NSScanner *scanner = [NSScanner scannerWithString:result];
        if ([scanner scanUpToString:@"\"lat\" :" intoString:nil] && [scanner scanString:@"\"lat\" :" intoString:nil]) {
            [scanner scanDouble:&latitude];
            if ([scanner scanUpToString:@"\"lng\" :" intoString:nil] && [scanner scanString:@"\"lng\" :" intoString:nil]) {
                [scanner scanDouble:&longitude];
            }
        }
    }

    CLLocationCoordinate2D center;
    center.latitude = latitude;
    center.longitude = longitude;
    return center;
}

-(NSMutableArray *)decodePolyLine: (NSMutableString *)encoded {
    [encoded replaceOccurrencesOfString:@"\\\\" withString:@"\\"
                                options:NSLiteralSearch
                                  range:NSMakeRange(0, [encoded length])];
    NSInteger len = [encoded length];
    NSInteger index = 0;
    NSMutableArray *array = [[[NSMutableArray alloc] init] autorelease];
    NSInteger lat=0;
    NSInteger lng=0;
    while (index < len) {
        NSInteger b;
        NSInteger shift = 0;
        NSInteger result = 0;
        do {
            b = [encoded characterAtIndex:index++] - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        NSInteger dlat = ((result & 1) ? ~(result >> 1) : (result >> 1));
        lat += dlat;
        shift = 0;
        result = 0;
        do {
            b = [encoded characterAtIndex:index++] - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        NSInteger dlng = ((result & 1) ? ~(result >> 1) : (result >> 1));
        lng += dlng;
        NSNumber *latitude = [[[NSNumber alloc] initWithFloat:lat * 1e-5] autorelease];
        NSNumber *longitude = [[[NSNumber alloc] initWithFloat:lng * 1e-5] autorelease];
        //                  printf("[%f,", [latitude doubleValue]);
        //                  printf("%f]", [longitude doubleValue]);
        CLLocation *loc = [[[CLLocation alloc] initWithLatitude:[latitude floatValue] longitude:[longitude floatValue]] autorelease];
        [array addObject:loc];
    }

    return array;
}

-(NSArray*) calculateRoutesFrom:(CLLocationCoordinate2D) f to: (CLLocationCoordinate2D) t {
    NSString* saddr = [NSString stringWithFormat:@"%f,%f", f.latitude, f.longitude];
    NSString* daddr = [NSString stringWithFormat:@"%f,%f", t.latitude, t.longitude];

    Reachability *reachability = [Reachability reachabilityForInternetConnection];
    NetworkStatus internetStatus = [reachability currentReachabilityStatus];
    if (internetStatus != NotReachable){

    NSString* apiUrlStr = [NSString stringWithFormat:@"http://maps.google.com/maps?output=dragdir&saddr=%@&daddr=%@", saddr, daddr];
    NSURL* apiUrl = [NSURL URLWithString:apiUrlStr];
    //  NSLog(@"api url: %@", apiUrl);
    NSString *apiResponse = [NSString stringWithContentsOfURL:apiUrl];
    NSString* encodedPoints = [apiResponse stringByMatching:@"points:\\\"([^\\\"]*)\\\"" capture:1L];
    //    NSLog(@"encodedPoints.....%@",encodedPoints);
    //    NSLog(@"self decodePolyLine:[encodedPoints mutableCopy].....%@",[self decodePolyLine:[encodedPoints mutableCopy]]);

     NSLog(@"return %@ ",[encodedPoints mutableCopy]);

    return [self decodePolyLine:[encodedPoints mutableCopy]];
    }else{

        [activityIndicator stopAnimating];
        UIAlertView *alert =[[UIAlertView alloc]initWithTitle:@"Oops!" message:@"Railway server is either busy or not responding at the moment. Try again later." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];

        return 0;
    }

}

-(void) centerMap {
    MKCoordinateRegion region;

    CLLocationDegrees maxLat = -90;
    CLLocationDegrees maxLon = -180;
    CLLocationDegrees minLat = 90;
    CLLocationDegrees minLon = 180;
    for(int idx = 0; idx < routes.count; idx++)
    {
        CLLocation* currentLocation = [routes objectAtIndex:idx];
        if(currentLocation.coordinate.latitude > maxLat)
            maxLat = currentLocation.coordinate.latitude;
        if(currentLocation.coordinate.latitude < minLat)
            minLat = currentLocation.coordinate.latitude;
        if(currentLocation.coordinate.longitude > maxLon)
            maxLon = currentLocation.coordinate.longitude;
        if(currentLocation.coordinate.longitude < minLon)
            minLon = currentLocation.coordinate.longitude;
    }
    region.center.latitude     = (maxLat + minLat) / 2;
    region.center.longitude    = (maxLon + minLon) / 2;
    region.span.latitudeDelta  = maxLat - minLat;
    region.span.longitudeDelta = maxLon - minLon;

    [mapView setRegion:region animated:YES];
}

-(void) showRouteFrom: (Place*) f to:(Place*) t {
    if(routes) {
        [mapView removeAnnotations:[mapView annotations]];
        [routes release];
    }
    PlaceMark* from = [[[PlaceMark alloc] initWithPlace:f] autorelease];
    PlaceMark* to = [[[PlaceMark alloc] initWithPlace:t] autorelease];
    [mapView addAnnotation:from];
    [mapView addAnnotation:to];

    Reachability *reachability = [Reachability reachabilityForInternetConnection];
    NetworkStatus internetStatus = [reachability currentReachabilityStatus];
    if (internetStatus != NotReachable){

    routes = [[self calculateRoutesFrom:from.coordinate to:to.coordinate] retain];
    [self drawRoute];
    [self centerMap];

    }else{
        [activityIndicator stopAnimating];
        UIAlertView *alert =[[UIAlertView alloc]initWithTitle:@"Oops!" message:@"Railway server is either busy or not responding at the moment. Try again later." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];
    }
}

- (void)drawRoute
{
    int numPoints = [routes count];
    if (numPoints > 1)
    {
        CLLocationCoordinate2D* coords = malloc(numPoints * sizeof(CLLocationCoordinate2D));
        for (int i = 0; i < numPoints; i++)
        {
            CLLocation* current = [routes objectAtIndex:i];
            coords[i] = current.coordinate;
        }

        objPolyline = [MKPolyline polylineWithCoordinates:coords count:numPoints];

        free(coords);

        [mapView addOverlay:objPolyline];
        [mapView setNeedsDisplay];
    }
}

- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{
    MKPolylineView *thePolylineView = [[MKPolylineView alloc] initWithPolyline:overlay];
    thePolylineView.strokeColor =  [UIColor colorWithRed:((float) 204.0 / 255.0f)green:((float) 7.0 / 255.0f)blue:((float) 40.0 / 255.0f)alpha:1.0f]; // <-- So important stuff here
    thePolylineView.lineWidth = 5.0;
    return thePolylineView;
} 
```

# asp.net-mvc-3 - 提交更改下拉列表的表格

> ID：14155672
> 
> 赞同：4
> 
> 时间：2013-01-04T10:48:38.253
> 
> 标签：asp.net-mvc-3, forms, razor

我正在使用 MVC 3 和 razor 并有一个包含下拉列表的表单。当下拉列表中的值发生变化时，如何提交表单？我没有提交按钮。

```
@using (Html.BeginForm())
{
...

<div class="row">
                    <label>
                        Type of Card</label>
                    <div class="item">
                        @Html.DropDownList("PaymentFormModel.CardType", cardTypes, new { required = "required" })
                    </div>
                </div>
...
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T10:54:06.437

像这样试试

```
@Html.DropDownList("PaymentFormModel.CardType", cardTypes, new { required = "required", @onchange="submitform();" }) 
```

这是它的脚本：

```
function submitform()
{
  $('form').submit();
} 
```

希望能帮助到你

# python-2.7 - 使用 Beautiful Soup4 可以获得嵌入的文本吗？

> ID：14155673
> 
> 赞同：0
> 
> 时间：2013-01-04T10:48:47.523
> 
> 标签：python-2.7, beautifulsoup

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:00:34.300

# java - 重建序列化对象时出现类错误

> ID：14155674
> 
> 赞同：0
> 
> 时间：2013-01-04T10:48:57.237
> 
> 标签：java, deserialization

我有两个程序，HunterClient 和 HunterServer

这两个程序都有一个主类和一个消息类。除了一个在 HunterClient 项目中和一个在 HunterServer 项目中之外，消息类是一个精确的副本。（都在班内有项目减速）

这就是我通过客户端发送第一个对象的方式

```
String str = scanner.next();
//Send down Stream
out.writeObject(new Message(str));
out.flush(); 
```

这就是我在另一端接收对象的方式

```
try {
 Message message = (Message) in.readObject();
 } catch (Exception ex) {
            System.out.println("err... " + ex);
        } 
```

但是，运行此程序并尝试将消息从客户端发送到服务器，我收到以下错误消息。

错误... java.lang.ClassNotFoundException: hunterclient.Message

该消息是在 HunterMessenger 而不是 HunterClient 上收到的。这两个程序都是作为netbeans项目构建的......我理解这个错误的方式是程序正在寻找huntermessenger程序中的hunterclient类......我怎样才能让它使用它的本机信使类？

这是我的两个消息类

服务器

```
package huntermessenger;

import java.io.Serializable;

public class Message implements Serializable{

private String message;

public Message(String message) {
    this.message = message;
}

public String getMessage(){
    return message;
}
} 
```

客户端

```
package hunterclient;

import java.io.Serializable;

public class Message implements Serializable{

private String message;

public Message(String message) {
    this.message = message;
}

public String getMessage(){
    return message;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:54:30.453

您是否使 HunterClient 类可序列化？

# javascript - 带有 ruby 变量的 Ajax js 语法

> ID：14155675
> 
> 赞同：1
> 
> 时间：2013-01-04T10:48:56.740
> 
> 标签：javascript, jquery, ruby-on-rails, ajax

我试图切换按钮而不使用 ajax 刷新

在我的 micropost_helper.rb

```
def toggle_like_button(micropost, user)
  if user.voted_for?(micropost)
    link_to "undo", like_micropost_path(micropost), :class => "btn btn-mini btn-primary", :id =>"unvote_form_#{micropost.id}", :remote => true
  else
    link_to "Into it!", like_micropost_path(micropost), :class => "btn btn-mini btn-primary", :id =>"vote_form_#{micropost.id}", :remote => true
  end
end 
```

在 microposts/like.js.erb

```
$("#vote_form_#{@micropost.id}").html("undo")
$("#unvote_form_#{@micropost.id}").html("Into it!") 
```

我认为语法是混乱的。该`#{@micropost.id}`部分不工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:00:16.223

代替

```
$("#vote_form_#{@micropost.id}").html("undo")
$("#unvote_form_#{@micropost.id}").html("Into it!") 
```

和

```
$("#vote_form_<%=@micropost.id}%>").html("undo");
$("#unvote_form_<%=@micropost.id}%>").html("Into it!"); 
```

# spotify - libspotify：我可以用图像 ID 做什么和不能做什么？

> ID：14155679
> 
> 赞同：1
> 
> 时间：2013-01-04T10:49:03.103
> 
> 标签：spotify, libspotify

各种 libspotify API 函数处理图像 ID：

这些都返回一个图像 ID 作为`const byte*`：

```
sp_album_cover
sp_artist_portrait
sp_artistbrowse_portrait
sp_image_image_id 
```

`sp_image_create`将图像 ID 参数作为`const byte[20]`，而`sp_playlist_get_image`将图像 ID 参数作为`byte[20]`并用图像 ID 值填充它。

在这个问题中，一位 Spotify 员工表示图像 ID 的内容是不透明的，并且 20 的大小不一定是图像 ID 的准确长度：[libspotify API：图像 ID 格式？](https://stackoverflow.com/questions/10882295/libspotify-api-image-id-format)

> > sp_image_create 采用 20 字节长的 image_id 参数。这是否意味着图像 id 的最大长度为 20 字节？
> 
> 不。 sp_subscribers 是我们为编译器输入假号码的另一个例子。图像 id 指针的内容是不透明的，并且可能在不同版本之间发生变化。不要编写对它们做出假设的代码，因为它会破坏。

但是，为了使用`sp_playlist_get_image`，调用者*需要*分配数组来存储图像 ID。这似乎是不一致的建议，或者至少令人惊讶。以下内容哪些是对的？

*   **解释 A：**图像 ID 总是正好是 20 个字节。
*   **解释 B：**图像 ID 的长度可能不超过 20 个字节。
*   **解释 C：**图像 ID 可以是任意长度，但返回的图像 ID`sp_playlist_get_image`保证不超过 20 个字节。
*   **解释 D：**图像 ID 可能是任意长度，`sp_playlist_get_image`根本无法安全使用。

我认为链接问题的答案排除了 A 和可能的 B，所以我认为答案可能是 C，尽管如此令人沮丧。一个彻头彻尾的悲观主义者可能会选择 D。

我很感兴趣，因为我正在尝试编写比现有[libspotify.net](http://libspotifydotnet.codeplex.com/)更安全和更高级别的 .NET 包装器，并且我不确定如何在托管代码中显示图像 ID。我认为唯一的事情是有两种替代实现 - 一种具有 20 字节缓冲区，表示从 返回的图像 ID `sp_playlist_get_image`，另一种具有 IntPtr，表示从其他任何东西返回的图像 ID。如果库对图像 ID 的大小和性质做出了足够的保证，我总是可以使用自己的缓冲区并在必要时复制到其中，但我担心 libspotify 不太可能做出足够强大的保证来允许这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T12:07:32.120

对于当前版本的 libSpotify，**解释 C**对特定调用是正确的。由于它需要字节 [20]，因此该函数保证如果您分配 20 个字节，您将始终有足够的播放列表的图像 ID。如果该保证在未来发生变化，则函数签名将被更改，假设那时我们还没有让它像其他所有东西一样工作。

考虑到该 API 的状态，您的混合解决方案实际上听起来是目前最好的。当这种讨厌的事情消失`IntPtr`时，在你可以使用的地方使用将更具前瞻性。`sp_playlist_get_image`

我希望你的项目进展顺利——我们多年来一直想要一个像样的 .NET 包装器，但从来没有时间自己做这件事。如果它是开源的，我很乐意贡献。

# asp.net-mvc-3 - 如何在 mvc3 中将剃刀视图导出为 word

> ID：14155680
> 
> 赞同：0
> 
> 时间：2013-01-04T10:49:03.590
> 
> 标签：asp.net-mvc-3, razor, ms-word

在我的项目中，我有许多操作返回视图。视图很简单，它们只是通过 ViewModel 呈现 Html，没有图像，没有 javascript，没有 flash，只有简单的 html 标签（table、h2、title）。我想在页面底部或顶部有一个按钮，并将视图结果导出到 ms word。我尝试了几种方法，

这是我尝试过的两种方法，但都失败了：

*   [http://www.daniweb.com/web-development/aspnet/threads/228074/exporting-web-page-to-word-in-asp.netc](http://www.daniweb.com/web-development/aspnet/threads/228074/exporting-web-page-to-word-in-asp.netc)
*   [http://www.revium.com.au/articles/sandbox/aspnet-mvc-convert-view-to-word-document/](http://www.revium.com.au/articles/sandbox/aspnet-mvc-convert-view-to-word-document/)

那么有什么简单的方法可以做到吗？我发现一些第三方代码可以解决这个问题，但它需要手动附加字符串，我有太多页面要做，所以这种方式工作量太大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:50:49.033

```
string htmlString = this.RenderActionResultToString(PartialView("_feedbackInExcel", feedbackModel));

            Response.AddHeader("Content-Disposition", "filename=EFFReport.doc");
            Response.ContentType = "application/msword";
            Response.Write(htmlString); 
```

# java - 如何用字符串数组覆盖类的equals（）？

> ID：14155684
> 
> 赞同：1
> 
> 时间：2013-01-04T10:49:18.787
> 
> 标签：java

我需要澄清 Object 的 equal 方法中的 String[] 比较。下面是我的代码快照。当我执行这段代码时，它给出的是真假而不是真假。同样在我的情况下，任务类为每个调用生成唯一的 id。我究竟做错了什么？任何建议将不胜感激。

```
public class JobTask extends Task {

    String[] args;

    public WFTask(String[] args) {
        this.args = args;
    }
    @Override
    public boolean equals(Object obj) {        
            if (! ( obj instanceof String[] ) ){
            return false;           
            }
            String[]  arguments = (String[] ) obj;
            boolean ret = Arrays.equals(this.args , arguments );
            return ret;
    }
    @Override
    public void execute(TaskExecutionContext context) throws RuntimeException {
            --------------
            --------------
    }
    public static void main(String[] args) {
            String[] arg1 = {"a","b","c"};
            String[] arg2 = {"a","b","c"};
            System.out.println( Arrays.equals(arg1,arg2));
            JobTask t1 = new JobTask(arg1);
            JobTask t2 = new JobTask(arg2);
            System.out.println( t1.equals(t2));
    }
}

public abstract class Task {
    private Object id = GUIDGenerator.generate();
    public Task() {
    }
    Object getId() {
       return id;
    }
    public abstract void execute(TaskExecutionContext context)                  throws RuntimeException;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T10:51:19.207

```
@Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        JobTask other = (JobTask)obj;
        if (!Arrays.equals(args, other.args))
            return false;
        return true;
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T10:52:32.487

您将能够在调试器、提示、提示中看到这一点，但是

你在测试

```
System.out.println( t1.equals(t2)); 
```

但你写了

```
 if (! ( obj instanceof String[] ) ){
        return false;           
        } 
```

并且由于 t2 不是 a`String[]`这将返回 false。我怀疑你打算写

```
 if (!(obj instanceof JobTask))
        return false;           

    JobTask other= (JobTask ) obj;
    return Arrays.equals(this.args , other.args); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T10:52:45.953

您的`equals`方法接收 a `JobTask`，而不是 a `String[]`。您需要像这样重写它，例如：

```
@Override
public boolean equals(Object obj) {
    if (! ( obj instanceof JobTask ) ){
        return false;
    }
    String[]  arguments = ((JobTask) obj).args;
    boolean ret = Arrays.equals(this.args , arguments );
    return ret;
} 
```

# html - Internet Explorer 中的 HTML div 中心对齐

> ID：14155690
> 
> 赞同：3
> 
> 时间：2013-01-04T10:49:32.250
> 
> 标签：html, css, internet-explorer

我写了以下代码。它在 Mozilla 和 Chrome 中显示得非常好。但在 Internet Explorer 中，它不是居中对齐并显示在左侧。这是代码：

```
<html>
<head>
<title>ProgramEngine Website Registration</title>
<style type="text/css">
div#login
{
background-color:#f1f1f1;
width: 510px;
height: 1024px;
border: 1px solid grey;
margin-left: auto;
margin-right: auto;
}
</style>
</head>
<body>
<div id="login"></div>
</body>
</html> 
```

那么任何人都可以建议我是什么问题以及如何克服它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T11:09:35.360

您可以使用 jquery 获得良好的解决方案。

[看到这个链接](http://jsfiddle.net/NpTsa/)

```
$(document).ready( function(e){    
        var screen = $('body').width();
        screen -= 51;  //51 is width of div
        screen /= 2;
        $('#login').offset({top:0,left:screen});
    });​ 
```

如果您需要在偏移值中使用顶部。

在这里，浏览器不会出问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T10:57:24.383

你使用正确的 DOCTYPE 吗？如果没有 DOCTYPE，IE 会自动进入 Quirks 渲染模式——这可能是你的问题。

# html - 在 div 上使用框阴影，但我仍然可以通过底层元素进行选项卡

> ID：14155691
> 
> 赞同：0
> 
> 时间：2013-01-04T10:49:36.833
> 
> 标签：html, css

我创建了一个对话框，当您单击页面上的元素时会出现该对话框。然后 div 框会出现一个巨大的框阴影，以防止用户访问页面上的底层（原始）元素。除了它没有，用户仍然可以通过 .overlayme div 下的项目进行选项卡

我已经缩小了我的代码并写了这个小例子来说明我的意思。如果您单击第一个按钮并通过其余按钮单击，那么实际上我想要实现的是阻止用户单击第一个按钮并且只能在“最终您”、“将到达这里”按钮上进行选项卡.

我的标记在这里

```
<html><head></head><body><input type="button" value="click me first" />
&nbsp;
<input type="button" value="now tab to me" />
&nbsp;
<input type="button" value="now tab to me" />
&nbsp;
<input type="button" value="now tab to me" />
<br/>&nbsp;<br/>
<input type="button" value="now tab to me" />
&nbsp;
<input type="button" value="now tab to me" />
&nbsp;
<input type="button" value="now tab to me" />
&nbsp;
<input type="button" value="now tab to me" />
<br/>&nbsp;<br/>
<input type="button" value="now tab to me" />
&nbsp;
<input type="button" value="now tab to me" />
&nbsp;
<input type="button" value="now tab to me" />
&nbsp;
<input type="button" value="now tab to me" />
<br/>&nbsp;<br/>
<input type="button" value="now tab to me" />
&nbsp;
<input type="button" value="now tab to me" />
&nbsp;
<input type="button" value="now tab to me" />
&nbsp;
<input type="button" value="now tab to me" />   
<div class="overlayme">
<br/>&nbsp;<br/>
<input type="button" value="eventually you" />
&nbsp;
<input type="button" value="will get here" /></div></body></html>​​​​ 
```

我的CSS在这里

```
.overlayme input{ background-color:lightgrey; }
.overlayme {
max-width: 250px;
margin: 0 auto;
margin: 20px;
padding: 20px;
border-radius: 20px;
overflow: hidden;
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5), 0 0 0 10000px rgba(0, 0, 0, 0.3);
position: relative;
background: white;}
input{
background-color:white;} 
```

所以基本上简而言之..问题是我仍然可以访问底层元素并且我希望它们被禁用并且只能访问.overlayme div上的项目。

是否可以使用 css 禁用这个较低级别或者这必须是 js 的东西？这里的例子：http: [//jsfiddle.net/8BPMk/1/](http://jsfiddle.net/8BPMk/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T10:56:30.690

使用这个：http: [//jsfiddle.net/gQEUx/](http://jsfiddle.net/gQEUx/)

您需要添加具有绝对定位和 100% 宽度和高度的固定器 div

```
.fixer {
    width: 100%;
    height: 100%;
    left: 0;
    top: 0;
    position: absolute;
} 
```

和

```
<div class="fixer">
  <div class="overlayme">
    <br/>&nbsp;<br/>
    <input type="button" value="eventually you" />
    &nbsp;
    <input type="button" value="will get here" />
  </div>
</div> 
```

和这个小提琴 - [http://jsfiddle.net/gQEUx/1/](http://jsfiddle.net/gQEUx/1/)，感谢**@AbstractChaos**

```
$('.fixer').hide();

$('#example').click(function() {
  $('.fixer').toggle('slow');
  if($('.fixer').is(':visible')) {
    $('input').attr('tabIndex','-1');    
  }
  else {
      $('input').attr('tabIndex','1');
  }
}); 
```

所以从这里 - [http://www.w3.org/TR/html401/interact/forms.html#tabbing-navigation](http://www.w3.org/TR/html401/interact/forms.html#tabbing-navigation)

这 - [http://nemisj.com/focusable/](http://nemisj.com/focusable/)

这 - [http://msdn.microsoft.com/en-us/library/ie/ms534654%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ie/ms534654%28v=vs.85%29.aspx)

可以使用 tabindex 的元素是：

微博：

```
The following elements can have focus and are tab stops by default: a, BODY, button, frame, iframe, img, input, isIndex, object, select, textArea.

The following elements can have focus by default but are not tab stops. These elements can be set as tab stops by setting the tabIndex property to a positive integer. applet, div, frameSet, span, table, td. 
```

w3c：

```
The following elements support the tabindex attribute: A, AREA, BUTTON, INPUT, OBJECT, SELECT, and TEXTAREA. 
```

而且我还没有阅读第三篇文章，认为已经足够了

**编辑：应该做的工作 - [http://jsfiddle.net/gQEUx/3/](http://jsfiddle.net/gQEUx/3/)**

```
$('.fixer').hide();

$('#example').click(function() {
    $('.fixer').toggle('slow');
    if($('.fixer').is(':visible')) {
      $('a, AREA, BODY, button, frame, iframe, img, input, isIndex, object, select, textArea, applet, div, frameSet, span, table, td')
      .attr('tabIndex','-1');    
    }
    else {
      $('a, AREA, BODY, button, frame, iframe, img, input, isIndex, object, select, textArea, applet, div, frameSet, span, table, td')
      .attr('tabIndex','1');
    }

}); 
```

# asp.net - 即使我在 IIS 中暂停或停止网站，System.Timers.Timer 对象仍然有效

> ID：14155695
> 
> 赞同：1
> 
> 时间：2013-01-04T10:49:56.057
> 
> 标签：asp.net, iis-7, timer

我有一个 System.Timers.Timer 对象，它从 ASP.net 中的 Global.Application_Start 开始，并将日志记录保存在一个表中，每 5 秒一次。即使我在 IIS 中停止或暂停网站，该对象仍然有效吗？

我怎样才能停止它或者当我暂停或停止 IIS 时，在哪种全局触发方法中，我可以通过代码来停止它？

# sql - sql srss 显示没有值的行

> ID：14155710
> 
> 赞同：1
> 
> 时间：2013-01-04T10:51:06.697
> 
> 标签：sql, sql-server, return-value, rows

我有以下查询：

```
SELECT COUNT(H.RootID) AS [Anzahl], hlrpttreeitem.displaypath AS Kategorie, DATEPART(month, SRQuery.Datum) AS [Monat]
FROM sereresystem
INNER JOIN sereregeneral ON sereresystem.caseid = sereregeneral.caseid
INNER JOIN sereresperou ON sereresystem.caseid = sereresperou.caseid
INNER JOIN sererekeywordskeyword ON sereresystem.caseid = sererekeywordskeyword.caseid
INNER JOIN Hierarchy H ON sererekeywordskeyword.sererekeywordskeywordid = H.childid
INNER JOIN SRQuery ON sereresystem.referencenumber = SRQuery.Ticketnummer
INNER JOIN SRInnerQuery ON SRQuery.Ticketnummer = SRInnerQuery.Ticketnummer
LEFT JOIN hlrpttreeitem ON hlrpttreeitem.treeitemid = H.RootID
WHERE (sereregeneral.inpcha NOT IN (102800, 102993))
AND (sereresperou.assrol IN (102961, 107075, 107074))
AND hlrpttreeitem.languageid = '7'
AND (DATEPART(month, sereresystem.registrationtime) IN (@Monat))
AND (DATEPART(year, sereresystem.registrationtime) = @Jahr)
AND SRQuery.Anzahl = SRInnerQuery.Anzahl
GROUP BY hlrpttreeitem.displaypath, DATEPART(month, SRQuery.Datum) 
```

在 SRSS 中，我使用矩阵将类别列表（大约 20 个）创建为行，并计算每个类别一年中每个月的值的数量。

有些类别中没有值。

我现在的问题是，我希望它们显示在值为“0”的类别列表中。

我读过关于左连接或外连接的东西，但不能让它们工作。有谁知道我怎么能

# python - wxPython - wxGrid - 如何检测哪一列移动到哪里

> ID：14155711
> 
> 赞同：2
> 
> 时间：2013-01-04T10:51:06.680
> 
> 标签：python, wxpython, wxwidgets

当用户将列拖动到新索引时，将`wx.grid.EVT_GRID_COL_MOVE`触发该事件。处理程序接收一个`wx.grid.GridEvent`包含属性的属性，该属性`Col`包含移动列的旧索引。该事件似乎不包含任何详细说明该列已移动*到*何处的属性。我怎么知道呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:00:24.660

如果`EVT_GRID_COL_MOVE`发生事件，`GridEvent.GetCol()`则返回正在移动的列的**ID 。**柱子的实际位置可以用 得到`Grid.GetColPos(colId)`。但是，wxWidgets 2.8 和 wx 2.9 之间是有区别的：

In `wx 2.8`,在列被移动**后**`EVT_GRID_COL_MOVE`发送，这将阻止您否决该事件。因此，在事件期间调用将返回该列的*新*位置。**`GetColPos()`**

 ***在`wx 2.9`,在列被移动**之前**`EVT_GRID_COL_MOVE`触发，否决事件将阻止列被移动。在事件期间调用将返回列的*当前*位置。**`GetColPos()`**

 ***列的新位置是根据鼠标位置在内部计算的。在 python 中复制该代码可能会与可能破坏程序的未来版本冲突。

使用`wx 2.9+`您可以实现一种解决方法，该解决方法将为您提供新的列位置并允许您“否决”（或更确切地说是撤消）移动：

```
self.Bind(wx.grid.EVT_GRID_COL_MOVE, self.OnColMove) 
```

```
def OnColMove(self,evt):
    colId = evt.GetCol()
    colPos = self.grid.GetColPos(colId)
    wx.CallAfter(self.OnColMoved,colId,colPos)
    # allow the move to complete

def OnColMoved(self,colId,oldPos):
    # once the move is done, GetColPos() returns the new position
    newPos = self.grid.GetColPos(colId)
    print colId, 'from', oldPos, 'to', newPos
    undo = False
    if undo: # undo the move (as if the event was veto'd)
        self.grid.SetColPos(colId,oldPos) 
```

请注意，`SetColPos`如果必须撤消移动，将调用两次（一次在内部，第二次在 中`OnColMoved`）。

或者，您可以查看`wx.lib.gridmovers`.******

# asp.net - 如何获取我的项目中的 xml 的 URL？

> ID：14155712
> 
> 赞同：1
> 
> 时间：2013-01-04T10:51:07.320
> 
> 标签：asp.net, xml, path

我是asp.net 的新手。我`xml`的`web site`. 我想在我只想使用中使用 该`XML`文件。如何获得该 Path 而不是.`code behind``relative path``Absolute path`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:56:15.570

您可以像这样轻松地在项目中读取您的 xml 文件

```
 XmlDocument doc = new XmlDocument();
    doc.Load(Server.MapPath("~/App_Data/sample.xml")); 
```

用于`Server.MapPath`读取项目中的 xml 文件，如上面的代码

* * *

有以下方法可以获取文件的相对路径

1.站点根目录相对路径，根据站点根目录解析。

以下示例路径假定图像文件夹位于网站根目录下。

```
<img src="/Images/SampleImage.jpg" /> 
```

2.针对当前页面路径解析的相对路径。

```
<img src="Images/SampleImage.jpg" /> 
```

3.Arelative path 被解析为当前页面路径的对等路径。

```
<img src="../Images/SampleImage.jpg" /> 
```

查看 MSDN 了解详细信息：[ASP.NET Web 项目路径](http://msdn.microsoft.com/en-us/library/ms178116%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:55:40.737

您需要使从根目录开始的 xml 路径直接访问您的 xml。您可以`~`在将成为站点根目录的路径中使用。

```
"~/yourfolder/yourxml.xml" 
```

从根使用的相对路径

```
 "/yourfolder/yourxml.xml" 
```

如果您想创建相对于当前页面的相对路径

```
"yourfolder/yourxml.xml" 
```

**[您可以在此处](http://www.uvsc.edu/disted/decourses/dgm/2120/IN/steinja/lessons/06/06_04.html)**阅读有关相对路径的更多信息

# javascript - Javascript/Jquery 链接更改表单下拉列表

> ID：14155726
> 
> 赞同：0
> 
> 时间：2013-01-04T10:51:57.260
> 
> 标签：javascript, jquery, html, forms

这可能会让人感到困惑或简单，我不知道。

我有一张图片，当您单击图片中的元素时，我需要下一个 div 中的下拉菜单进行更改。

```
<a href="eastern#browse" class="areaselect" rel="region_7" id="eastern" title="Eastern England image">Eastern England</a>
<a href="western#browse" class="areaselect" rel="region_8" id="western" title="Western England image">Western England</a> 
```

这是链接的示例，这是下拉列表的示例。

```
<select name='areapick' id='apick'>
    <option value='placea'>Placea</option>    
    <option value='placeb'>Placeb</option>    
    <option value='placec'>Placec</option>
    <option value='placed'>Placed</option>    
    <option value='placee'>Placee</option>
</select> 
```

在单击任何内容之前，我不希望出现菜单，但是当他们单击说东英格兰时，我希望地方 A 和 B 出现在下拉列表中，如果他们选择西英格兰，我希望出现地方 C、D 和 E。

我尝试使用 onclick，我可以轻松地让选择菜单出现，但我无法让它过滤和删除元素等或显示/隐藏 div。我已经在页面上使用最新的 Jquery min 库。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:06:16.077

这是新的 html（东西方有不同的类）：

```
<select name='areapick' id='apick'>
        <option value='placea' class="eastern">Placea</option>    
        <option value='placeb' class="eastern">Placeb</option>    
        <option value='placec' class="western">Placec</option>
        <option value='placed' class="western">Placed</option>    
        <option value='placee' class="western">Placee</option>
    </select> 
```

这是我会使用的javascript：

```
 $(document).ready(function(){
        $('.areaselect').on('click', function(event){
            var id = $(this).attr('id')
            $('#apick option').not('.'+id).css('display','none');
            $('.'+id).css('display','inline').first().attr('selected','selected');
            event.preventDefault();
        });
    }); 
```

`<a> #id`注意和之间的“链接” `<option> .class`
（脚本未测试）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:27:08.610

使用相同的结构，您可以尝试使用jQuery的***gt***和***lt选择器。***

```
$(document).ready(function(){
     $('.areaselect').on('click', function(){
         $('#apick').css('display','none');
         $('#apick option').css('display','inline');
         var title = $(this).attr('id');
         if(title.indexOf('eastern') != -1){
              $('#apick option:gt(1)').css('display','none');//Zero based index
         }
         else{
              $('#apick option:lt(2)').css('display','none');//Zero based index
         }
         $('#apick').css('display','inline-block');
     });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T11:42:38.973

我会给`a`标签和相应的`option`标签同一类。然后，`onclick`我将显示相关选项：

```
<a href="eastern#browse" rel="region_7" class="eastern" title="Eastern England image">Eastern England</a>
<a href="western#browse" rel="region_8" class="western" title="Western England image">Western England</a>

<select name='areapick' id='apick'>
        <option value='placea' class="eastern">Placea</option>    
        <option value='placeb' class="eastern">Placeb</option>    
        <option value='placec' class="western">Placec</option>
        <option value='placed' class="western">Placed</option>    
        <option value='placee' class="western">Placee</option>
    </select> 
```

JS：

```
$("a").click(function(){
this_class= $(this).attr("class");
$("#apick").find("option").hide(); // reset
$("#apick").find("." + this_class).show(); // show desired options
}); 
```

# javascript - Javascript函数绑定对象中指定的事件

> ID：14155730
> 
> 赞同：0
> 
> 时间：2013-01-04T10:52:13.147
> 
> 标签：javascript, jquery, javascript-events

首先：对不起我的英语不好。

我正在创建一个函数，它可以输入具有这种格式的 javascript 对象：

```
var input = {
    'selector1' : {
        'event1'    : function(element,value){
            // ...
        },
        'event2'    : function(element,value){
            // ...
        },
        ...
        'eventN'    : function(element,value){
            // ...
        }
    },
    'selector2' : {
        'event1'    : function(element,value){
            // ...
        },
        'event2'    : function(element,value){
            // ...
        },
        ...
        'eventN'    : function(element,value){
            // ...
        }
    }
} 
```

我的函数以这种方式绑定事件：

```
function event_binder(events_fns){
    for(sel in events_fns){
        for(ev in events_fns[sel]){
            $(sel).on(ev,function(){
                console.log(sel+'+'+ev);
                var th = $(this);
                var func_to_call = events_fns[sel][ev];
                func_to_call(th,th.html());
            });
        }
    }
} 
```

但是当我运行它时，它显示每个事件都已绑定到最后一个事件。

我创建了一个 jsFiddle 以更好地解释我的问题：http: [//jsfiddle.net/Polmonite/6rRgr/](http://jsfiddle.net/Polmonite/6rRgr/)

正如console.log 所暗示的，事件绑定似乎总是使用对象中的最后一个函数。如果我的解释正确，似乎“.on”函数的评估只发生在最后，所以它使用“sel”和“ev”变量的最后一个值（范围问题），但我不'不太明白如何解决它。

谢谢你。

**编辑：**我需要指定一件事：我想创建 'event_binder' 函数的工作版本，而不是 jsfiddle 的工作版本，这只是一个示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:07:03.750

问题是范围 - 整个函数中只有一个变量`sel`，`ev`每次都会被覆盖。要创建一个新范围（带有自己的变量），您必须将它们包装在它们自己的函数中。幸运的是，jQuery 提供了一个迭代函数，您可以将函数传递给它，这样您就不会遇到这个问题：`$.each`. 请参阅：http: [//jsfiddle.net/6rRgr/3/](http://jsfiddle.net/6rRgr/3/)。

```
$.each(events_fns, function(sel, funcs) {
    $.each(funcs, function(ev, func) {
        $(sel).on(ev,function(){
            console.log(sel+'+'+ev);
            var th = $(this);
            func(th,th.html());
        });
    });
}); 
```

# excel - 通过电子邮件组件的 Cakephp .xls 文件附件

> ID：14155732
> 
> 赞同：0
> 
> 时间：2013-01-04T10:52:21.813
> 
> 标签：excel, email, cakephp, attachment, xls

我正在使用 CakePHP，需要发送带有 .xls 文件附件的邮件。

虽然我尝试了很多但没有成功。

**注意 -**仅供参考，邮件中仅附有 PDF 文件。

请在下面找到我的代码 -

```
$this->Email->to = 'email address';    
$this->Email->from = 'From email address';
$this->Email->subject = 'Subject'; 
$this->Email->template = 'template name'; 
$Path = TMP;
$fileName = 'testfile.xls';        
$this->Email->filePaths = array($Path);
$this->Email->attachments = array($fileName);                
$this->Email->send(); 
```

每次我执行此代码段时，甚至邮件都在接收但没有附件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:31:09.043

文档（[http://book.cakephp.org/2.0/en/core-utility-libraries/email.html#sending-attachments](http://book.cakephp.org/2.0/en/core-utility-libraries/email.html#sending-attachments)）对此非常清楚。您需要将其作为数组提交，文件名作为键，路径作为数组键“文件”：

```
$email->attachments(array(
    'photo.png' => array(
        'file' => '/full/some_hash.png',
        'mimetype' => 'image/png',
    )
)); 
```

我不知道你从哪里得到你的“filePaths”属性。

# javascript - jqGrid 从子网格中删除列标题

> ID：14155735
> 
> 赞同：6
> 
> 时间：2013-01-04T10:52:32.443
> 
> 标签：javascript, jquery, jqgrid

我正在使用`jqGrid-4.4.1`subGrid 功能。

就我而言，我想从**subGrid**中为每一行删除列标题。

我试过

```
var grid = $("#list");
var gview = grid.parents("div.ui-jqgrid-view"); 
gview.children("div.ui-jqgrid-hdiv").hide(); 
```

从这个[链接](http://www.trirand.com/blog/?page_id=393/treegrid/removing-column-header-row/)。但是，它删除了主表的标题，而不是子网格。

我找到了一个替代方案，但它是基于 HTML 的。 [如何从 Jqgrid 子网格中删除表格列标题](https://stackoverflow.com/questions/10839824/how-to-remove-the-table-column-headers-from-jqgrid-subgrid)

另外，当行展开时，如何从第一列中删除胡萝卜符号。

这是快照。我想删除标记为红色的边框。

![在此处输入图像描述](../Images/37ad531324ccb077757890c0955aa637.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T15:28:24.820

通常，您使用正确的方法来隐藏列标题。唯一的问题是您需要使用正确的网格隐藏。`subGridRowExpanded`通常，在回调内部创建子网格作为网格。jqGrid 创建`<div>`应该放置新子网格的位置。`id`您作为`subGridRowExpanded`回调的第一个参数获得的 div （有关更多详细信息，请参阅文档[）](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:subgrid_as_grid#definition)。因此，人们创建了具有通常基于 div 的 id 构造的一些 id 的子网格。如果您使用*子网格的 id*而不是`#list`您将能够隐藏子网格的列标题。

[该演示](http://www.ok-soft-gmbh.com/jqGrid/SubgridWithLocalGridAndHiddenColumnHeaders.htm)演示了这样的实现：

![在此处输入图像描述](../Images/fe503ac49efd0de7fc619f3a626f261f.png)

下面是我用于[演示的代码](http://www.ok-soft-gmbh.com/jqGrid/SubgridWithLocalGridAndHiddenColumnHeaders.htm)

```
var myData = [
        {
            id: "10",
            c1: "My Value 1",
            c2: "My Value 1.1",
            subgridData: [
                { id: "10", c1: "aa", c2: "ab" },
                { id: "20", c1: "ba", c2: "bb" },
                { id: "30", c1: "ca", c2: "cb" }
            ]
        },
        {
            id: "20",
            c1: "My Value 2",
            c2: "My Value 2.1",
            subgridData: [
                { id: "10", c1: "da", c2: "db" },
                { id: "20", c1: "ea", c2: "eb" },
                { id: "30", c1: "fa", c2: "fb" }
            ]
        },
        {
            id: "30",
            c1: "My Value 3",
            c2: "My Value 3.1",
            subgridData: [
                { id: "10", c1: "ga", c2: "gb" },
                { id: "20", c1: "ha", c2: "hb" },
                { id: "30", c1: "ia", c2: "ib" }
            ]
        }
    ],
    $grid = $("#list"),
    mainGridPrefix = "s_";

$grid.jqGrid({
    datatype: "local",
    data: myData,
    colNames: ["Column 1", "Column 2"],
    colModel: [
        { name: "c1", width: 180 },
        { name: "c2", width: 180 }
    ],
    rowNum: 10,
    rowList: [5, 10, 20],
    pager: "#pager",
    gridview: true,
    ignoreCase: true,
    rownumbers: true,
    sortname: "c1",
    viewrecords: true,
    autoencode: true,
    height: "100%",
    idPrefix: mainGridPrefix,
    subGrid: true,
    subGridRowExpanded: function (subgridDivId, rowId) {
        var $subgrid = $("<table id='" + subgridDivId + "_t'></table>"),
            pureRowId = $.jgrid.stripPref(mainGridPrefix, rowId);

        $subgrid.appendTo("#" + $.jgrid.jqID(subgridDivId));
        $subgrid.jqGrid({
            datatype: "local",
            data: $(this).jqGrid("getLocalRow", pureRowId).subgridData,
            colModel: [
                { name: "c1", width: 178 },
                { name: "c2", width: 178 }
            ],
            height: "100%",
            rowNum: 10000,
            autoencode: true,
            gridview: true,
            idPrefix: rowId + "_"
        });
        $subgrid.closest("div.ui-jqgrid-view")
            .children("div.ui-jqgrid-hdiv")
            .hide();
    }
});
$grid.jqGrid("navGrid", "#pager", {add: false, edit: false, del: false}); 
```

**更新**：[答案](https://stackoverflow.com/a/14265456/315935)显示了如何在调整主网格列的大小后实现子网格列的大小调整。

# html - 无法垂直对齐顶部的两个按钮

> ID：14155743
> 
> 赞同：0
> 
> 时间：2013-01-04T10:53:02.707
> 
> 标签：html, css, alignment, vertical-alignment

在具有一行的表中，第一列和第二列分别具有 20% 和 60% 的宽度，是第二列的该行中的*html*。有一个浏览按钮和一个提交按钮。我希望它们都在顶部垂直对齐。我在 css 中提到了这一点，但我没有看到想要的结果。这可能是什么原因？

*html片段：*

```
 <form method="post" action="#">
                 <div id="Files_to_be_shared"> 
                       <input type="file" id="File" name="FileTag" />
                       <input type="submit" value="Share" /> 
                 </div>
                </form> 
```

*对应的css片段：*

```
#Files_to_be_shared {
    color:#FFEC94;
    vertical-align:top;
} 
```

这是我看到的输出*（并且我已经标记了我希望它放置的位置）*：

![在此处输入图像描述](../Images/5b8d5bef6b0235df8df1958d24793bb7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:56:37.987

如果您正在使用，请`table`添加`valign="top"`到`td`

& 添加`align="center"`使其与中心对齐`td`

**[演示](http://jsfiddle.net/wKzEF/3/)**

* * *

或试试这个

```
 #Files_to_be_shared {
      color:#FFEC94;
      vertical-align:top; 
      text-align:center 
    }
    td{
     border:1px solid grey; 
     vertical-align:top;
    } 
```

​</p>

**[演示 2](http://jsfiddle.net/wKzEF/6/)**

# postgresql - 如何将线串开始和结束顶点对齐到最近的点？

> ID：14155749
> 
> 赞同：3
> 
> 时间：2013-01-04T10:53:17.900
> 
> 标签：postgresql, gis, postgis, spatial

我有一个点层和一个线层。点是道路交叉点，使用 DGPS 收集，而线是连接道路，通过手持 GPS 在跟踪模式下收集。结果，这些线实际上并没有连接到这些点。

![示例网络图像](../Images/9e8ade9d808eb4cb0e98c01dfde4d862.png)

现在我想：

1.  从每个线串中删除所有中间节点，使其成为一条直线。

2.  将线的开始和结束顶点捕捉到最近的点。

我正在使用 PostGIS 2.0。到目前为止，我所做的是：

```
UPDATE line
SET geom = ST_Simplify(geom, 1000); 
```

问：有没有其他更好的方法来完成它？（因为我使用了一个荒谬的容忍度）

```
UPDATE line
SET geom = ST_AddPoint(
(SELECT geom FROM line WHERE id = 1),
(SELECT p.geom FROM point AS p, line AS l
    ORDER BY ST_Distance(p.geom,(SELECT ST_StartPoint(l.geom) FROM lt WHERE l.id=1)) LIMIT 1),
0)
WHERE id=1; 
```

这会将线（id=1）延伸到最近的点（在线的开头添加的点）。

Q. 上面看起来有点复杂，还有其他有效的方法/功能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T13:54:36.240

在同一个查询上执行这两种操作似乎是合理的（未经测试）：

```
UPDATE line l
SET geom = ST_MakeLine(
    (SELECT geom FROM point p ORDER BY ST_Distance(p.geom, ST_StartPoint(l.geom)) LIMIT 1),
    (SELECT geom FROM point p ORDER BY ST_Distance(p.geom, ST_EndPoint(l.geom)) LIMIT 1)
); 
```

如果数据集很小并且您只运行一次查询，则性能不是问题 - 但您可以添加额外的 bbox 比较来加快速度：

```
SELECT geom FROM point p WHERE p.geom && ST_Expand(ST_StartPoint(l.geom), 100) ORDER BY ST_Distance(p.geom, ST_StartPoint(l.geom)) LIMIT 1 
```

# c# - 在打开程序中进行更改

> ID：14155750
> 
> 赞同：-2
> 
> 时间：2013-01-04T10:53:17.980
> 
> 标签：c#, visual-studio-2008

如何通过运行 WindowsApplication 打开程序（例如：Word,Paint），然后在其中进行更改（例如在 Word 中写入文本）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:47:25.970

如果您想以编程方式访问 ms office 程序，您可以查看*Microsoft.Office.Interop命名空间。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:59:01.663

查看[Process](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)类。

您可以`MS-Word file`使用此类打开。在操作系统选择的文件编辑器中编辑它。并且当您关闭时，`Process`将通知该对象。

该链接下面还有一个示例程序。

# .net - .Net 2.0 中的对象到对象映射

> ID：14155751
> 
> 赞同：1
> 
> 时间：2013-01-04T10:53:24.663
> 
> 标签：.net

我想知道是否有人可以推荐一个可以在 .NET2.0 中工作的 Automapper 的替代品。

我有一个 dll 描述了一个相当复杂的结构。dll 位于 web 服务的两端，但是当通过 web 服务检索数据时，命名空间会阻止对象的直接映射，因此我不得不求助于编码映射类。

我合并了 Automapper，它完全符合我的要求，但它不适用于 .NET2.0。我需要使用 .NET2.0，因为有数百台远程机器将运行客户端软件，并且它们仅限于 .NET2.0。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:06:11.387

由于这是 2.0，我猜这是一个常规的基于 wsdl 的 Web 服务，通过（与默认`XmlSerializer`使用的 WCF 不同）工作。`DataContractSerializer`如果是这种情况，您*应该*可以使用`XmlSerializer`两次：

```
FromType fromObj = ...;
ToType toObj;
using(var ms = new MemoryStream())
{
    new XmlSerializer(typeof(FromType)).Serialize(ms, fromObj);
    ms.Position = 0;
    toObj = (ToType) new XmlSerializer(typeof(ToType)).Deserialize(ms);
} 
```

也许不理想，但只要类型兼容，它就应该工作。

令人沮丧的是，WCF 工具内置了对重用现有类型定义的支持，以避免这样的重复。但这显然是 3.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:07:59.390

根据结构复杂性，您*可以*使用反射来获取第一个对象的属性列表，并将关联值设置为具有相同名称的第二个对象属性。

如果你的结构只有简单的属性，它会很有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T11:09:36.457

在这种情况下，反射是你最好的朋友。

下面是属性复制器的粗略实现。您只需要新建一个目标类型的实例并将其与设置了所有属性值的源实例一起传递给它。

**编辑**：正如 Marc 所指出的，这只会在琐碎的属性映射方面起到作用。带上一粒盐。

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Reflection;

namespace StackOverflow
{
    public static class ReflectionHelper
    {
        public static void CopyPropertyValues(object source, object target)
        {
            if (source == null) throw new ArgumentNullException("source");
            if (target == null) throw new ArgumentNullException("target");

            var sourceType = source.GetType();
            var targetType = target.GetType();
            var sourceProperties = sourceType.GetProperties();

            foreach (var sourceProperty in sourceProperties)
            {
                if (sourceProperty.CanRead)
                {
                    var targetProperties = targetType.GetProperties();

                    foreach (var targetProperty in targetProperties)
                    {
                        if (targetProperty.Name == sourceProperty.Name &&
                            targetProperty.PropertyType == sourceProperty.PropertyType)
                        {
                            if (targetProperty.CanWrite)
                            {
                                var value = sourceProperty.GetValue(source, null);

                                targetProperty.SetValue(target, value, null);
                            }

                            break;
                        }
                    }
                }
            }
        }
    }
} 
```

# javascript - HTML 选择框显示为多项，但禁用多项选择？

> ID：14155752
> 
> 赞同：19
> 
> 时间：2013-01-04T10:53:29.913
> 
> 标签：javascript, jquery, select, option, multiple-select

我需要：

*   `<select>`一个显示为垂直扩展框（不是下拉菜单）的 html框。所以我将其设置为`multiple`.

然后它正确显示为：

```
<select id="gagaga" multiple>
    <option>A</option>
    <option>B</option>
    <option>C</option>
</select> 
```

*   那我怎样才能使它不可多选呢？（到`allow only 1 selection`）

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-04T10:58:48.513

用这个 `size="3"`

```
<!DOCTYPE html>
<html>
<body>
<select id="gagaga" size="3">
    <option>A</option>
    <option>B</option>
    <option>C</option>
</select>
</body>
</html> 
```

如果 size 属性的值大于 1，但小于列表中的选项总数，浏览器会添加一个滚动条，表示还有更多选项可以查看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T10:59:08.560

不要使用multiple 属性来设置它的大小。

引自 w3schools：

> size 属性指定下拉列表中可见选项的数量。
> 
> 如果 size 属性的值大于 1，但小于列表中的选项总数，浏览器会添加一个滚动条，表示还有更多选项可以查看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T10:59:00.137

你需要提供`size`给它：

```
<select id="gagaga" size='3'>
   <option>A</option>
   <option>B</option>
   <option>C</option>
</select> 
```

只需删除`multiple`那里，它将使您能够在列表中仅选择一个选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T11:07:30.530

你可以使用这个：

```
<html>
<body>
<select id="gagaga" size="3">
   <option>A</option>
   <option>B</option>
    <option>C</option>
</select>
</body>
</html> 
```

# android - HowTo：每当 SQLite 表更新时向 Android 应用程序提供通知

> ID：14155757
> 
> 赞同：4
> 
> 时间：2013-01-04T10:53:44.857
> 
> 标签：android, database, triggers, android-asynctask, android-sqlite

我正在使用 sqllite 3.7.4 开发一个 Android 平板电脑应用程序，该应用程序将执行以下操作：

1.  从 UI 获取信息

2.  执行一些逻辑并将相关信息存储到 sqlite 数据库

3.  存储的信息必须立即或按计划间隔（例如在 xyz 日期的 5:00）通过网络发送

目前，我们开发了一种调度机制（线程），它不断地轮询数据库以获取数据库中插入的新信息。线程获取信息并发送到网络模块。

但是，我觉得这不是正确的方法，因为每次轮询都是开销。有时没有什么可以执行，这不是实时的，因为我们每 5 秒轮询一次

所以

有没有办法在数据库中更新信息后立即向我的网络模块发送触发器？

或者有什么更好的方法来完成这个任务？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-24T15:41:14.967

这个问题大约是一年前的问题，但我认为这是一个常见问题。这就是我处理数据库更改的方式：

在我的适配器（SQL ADAPTER）中，我显然有更新/删除或将数据插入数据库的方法。像这种方法：

```
public long addProduct(String code, String name ... String gid, String gdate) {

  ContentValues initialValues = new ContentValues();
  initialValues.put(KEY_CODE, code);
  initialValues.put(KEY_NAME, name);
  ...
  initialValues.put(KEY_CHECK, this.checkfalse);
  initialValues.put(KEY_GID, gid);

---------
    Intent i = new Intent("data_inserted");
    i.putExtra("date", date);

    sendBroadcast(i);
---------

  return mDb.insert(SQLITE_TABLE, null, initialValues);
 } 
```

* * *

更改发生后，它将发送广播意图。要获取这个，首先在您的**onCreate**方法（uploaderClass 或其他）中**注册**您的广播接收器。这将如下所示：

 **```
registerReceiver(Updated, new IntentFilter("data_inserted")); 
```

* * *

而这个方法来处理下面的动作！

```
private final BroadcastReceiver Updated= new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {

        doSomething(); // Data was inserted upload it 
    }
}; 
```

* * *

**编辑 ：**

为了只从数据库中获取新项目，我签署了新产品。我有一个“信息”列，其中可以包含“上传”、“更新”或“删除”等字符串。然后我从数据库中获取包含这些特殊字符串的所有项目并上传它们。之后，我将它们设置为 null 或空字符串。随心所欲。希望我解释得不复杂:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:49:25.873

您可以创建自己的数据库侦听器，只要数据库有更新，它将获取信息并发送到网络。我认为会清除一些实现这个东西的想法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-12-12T06:54:20.617

现在我们可以使用 Room 来实现这一点。

```
database.getInvalidationTracker().addObserver(new InvalidationTracker.Observer(tableToObserve) {
        @Override
        public void onInvalidated(@NonNull Set<String> tables) {

        }
    }); 
```

*database*是 RoomDatabase 的一个实例，它是所有 Room 数据库的基类。所有使用“@Database”（这是使用 Room Libary 的方式）注释的类都必须扩展该类。

在 InvalidationTracker.Observer 的 creator 方法中，你可以传入一个 String 数组（或者以 varargs 的形式）来指示你想观察的表，如果这些表发生任何更新，则调用回调方法 onInvalidated .

一些链接可以参考： [https://developer.android.com/reference/android/arch/persistence/room/InvalidationTracker.html#addObserver(android.arch.persistence.room.InvalidationTracker.Observer)](https://developer.android.com/reference/android/arch/persistence/room/InvalidationTracker.html#addObserver(android.arch.persistence.room.InvalidationTracker.Observer))

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-04T11:41:28.460

希望这会对你有所帮助

```
 private Handler h;
    // in create time
        h = new Handler();

// call where you want
h.postDelayed(myRunnable2, 1000); // after 1000 millisecond this function call automatically 

// this function 
private Runnable myRunnable2 = new Runnable() {
        public void run() {
                              // do some thing

                h.postDelayed(myRunnable2, 1000);

        }
    }; 
```**

# jquery - 嵌套排序中的放置事件

> ID：14155759
> 
> 赞同：3
> 
> 时间：2013-01-04T10:54:02.923
> 
> 标签：jquery, nested-sortable

我正在使用这个嵌套的可排序插件[http://mjsarfatti.com/sandbox/nestedSortable/](http://mjsarfatti.com/sandbox/nestedSortable/)从我的内容管理系统中对图像幻灯片进行排序。

我尝试使用 html5 ondrop 事件，以便每当发生 drop 事件时，排序将通过 ajax post 保存，但仍然在 drop 时不会转到 save_order 函数

HTML：

```
<div ondrop="save_order(event)" ondragover="return false;>
    <ol class="sortable">
        <li id="list_1" draggable="true" class="mjs-nestedSortable-no-nesting"><div><img src="{image_path}"/></div></li>
        <li id="list_2" draggable="true" class="mjs-nestedSortable-no-nesting"><div><img src="{image_path}"/></div></li>
    </ol>
</div> 
```

JS：

```
$(document).ready(function(){
    $('.sortable').nestedSortable({
        disableNesting  : 'mjs-nestedSortable-no-nesting',
        handle          : 'div',
        items           : 'li',
        toleranceElement: '> div'
    });
});

function save_order(event)
{
   serialized = $('ol.sortable').nestedSortable('serialize');
    $.post({my_ajax_url}',serialized,function(data){
      alert('save!');
    });
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T17:32:13.007

只需要弄清楚这一点。使用停止属性。就像是...

```
$(document).ready(function(){
  $('.sortable').nestedSortable({
    disableNesting  : 'mjs-nestedSortable-no-nesting',
    handle          : 'div',
    items           : 'li',
    toleranceElement: '> div',
    stop: function() { save_order(); }
  });
}); 
```

# javascript - 打开层 2.12 选择功能控制“结束”回调触发两次

> ID：14155765
> 
> 赞同：2
> 
> 时间：2013-01-04T10:54:16.013
> 
> 标签：javascript, openlayers

我正在使用[Open Layers (v2.12)](http://openlayers.org/)，并且正在尝试使用[SelectFeature](http://dev.openlayers.org/releases/OpenLayers-2.12/doc/apidocs/files/OpenLayers/Control/SelectFeature-js.html#OpenLayers.Control.SelectFeature.selectStyle)。

我已经设法让事情正常进行，但是通过一个有趣的行为，“over”回调似乎被触发了两次。这不好，因为我想在用户将鼠标悬停在多边形上时显示工具提示。如果我按原样使用我的代码，它会添加两次工具提示，这充其量看起来会闪烁。

更新：我也刚刚意识到“over”回调覆盖了“selectStyle”突出显示，这是一个问题，我现在已经删除了 over 回调，直到我得到更好的解决方案。

这是选择功能代码片段...

```
var selectControl = new OpenLayers.Control.SelectFeature(vectorLayer, {
    hover: true,
    toggle: true,
    selectStyle: {
        fillOpacity: 0.5,
        fillColor: "#ffffff",
        strokeColor: "#ffffff",
        cursor: "pointer"
    },
    callbacks: {
        click: function(event){
            console.log("clicked");
        },
        over: function(event){
            console.log("mouse over");
        }
    }
})

map.addControl(selectControl);

selectControl.activate(); 
```

为了让它工作，您需要创建一个地图和矢量图层，如果有人真的需要它，我可以添加它们。

所以总而言之，我需要弄清楚如何阻止“over”回调多次触发。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:34:23.673

我发现有一种方法可以做我想做的事，但这似乎有点可怕，因为它使用第二种语法来添加回调，而且我不明白为什么会有不止一种方法将处理程序添加到层。希望这将在下一个版本中被采纳。

这是我修改鼠标悬停处理程序的代码...

```
var selectControl = new OpenLayers.Control.SelectFeature(vectorLayer, {
    hover: true,
    toggle: true,
    selectStyle: {
        fillOpacity: 0.5,
        fillColor: "#ffffff",
        strokeColor: "#ffffff",
        cursor: "pointer"
    },
    callbacks: {
        click: function(event){
            console.log("clicked");
        }
        //removed 'over' callback
    },
    //here is the extra handler.
    eventListeners: {
        featurehighlighted: function(event){
            console.log("mouse over");
        }
    }
})

map.addControl(selectControl);

selectControl.activate(); 
```

所以这只会触发一次，但正如您所见，它有 2 个用于添加鼠标事件类型处理程序的变体。

我不想将此作为我的答案，因为它似乎不是一个很好的解决方案。

更新：没有人想出替代方案，所以我想我不得不接受自己的答案，没关系。

# android - 我在服务中的 for 语句不会循环。

> ID：14155766
> 
> 赞同：0
> 
> 时间：2013-01-04T10:54:17.480
> 
> 标签：android, json, for-loop, println

我提供了一项服务来更新我的应用程序，它应该从网上获取 JSON，如果数据是新的，它会将其插入数据库中：

```
protected void onHandleIntent(Intent intent) {

            datasource = new pollDataSource(this);
            datasource.open();

            // Creating JSON Parser instance
            JSONParser jParser = new JSONParser();

            // getting JSON string from URL
            JSONObject json = jParser.getJSONFromUrl(url);

            try {

                // Getting Array of Contacts
                domanda = json.getJSONArray(TAG_DOMANDE);
                System.out.println("inside the try");
                // looping through All Contacts
                System.out.println("length: " + domanda.length());
                for(int i = 0; i < domanda.length(); i++){
                    System.out.println("in the for!: " + i);
                    JSONObject c = domanda.getJSONObject(i);
                    System.out.println("raw: "+ c.getString(TAG_CATEGORIA));
                    // Storing each json item in variable
                    String id = c.getString(TAG_ID);
                    String testoDomanda = c.getString(TAG_TESTODOMANDA);
                    String categoria = c.getString(TAG_CATEGORIA);
                    int quanteRisposte = c.getInt(TAG_QUANTERISPOSTE);
                    System.out.println("string: "+categoria);

                    datasource.createCategoria(categoria);
                    //TEOTODO inserimento della categoria, se necessario
                    //TEOTODO inserimento della domanda                 

                    for(int ua = 0; ua < quanteRisposte; ua++){
                    //TEOTODO inserimento dei testi risposte.   

                    }

                }
            } catch (JSONException e) {
              //  e.printStackTrace();
            }
... 
```

所有 println 的 logcat 是：

```
01-04 10:47:06.213: I/System.out(653): inside the try
01-04 10:47:06.223: I/System.out(653): length: 3
01-04 10:47:06.233: I/System.out(653): in the for!: 0
01-04 10:47:06.233: I/System.out(653): raw: zodiaco
01-04 10:47:26.773: I/System.out(653): inside the try
01-04 10:47:26.773: I/System.out(653): length: 3
01-04 10:47:26.773: I/System.out(653): in the for!: 0
01-04 10:47:26.785: I/System.out(653): raw: zodiaco
01-04 10:47:47.414: I/System.out(653): inside the try
01-04 10:47:47.423: I/System.out(653): length: 3
01-04 10:47:47.423: I/System.out(653): in the for!: 0
01-04 10:47:47.423: I/System.out(653): raw: zodiaco
01-04 10:48:07.963: I/System.out(653): inside the try
01-04 10:48:07.963: I/System.out(653): length: 3
01-04 10:48:07.963: I/System.out(653): in the for!: 0
01-04 10:48:07.973: I/System.out(653): raw: zodiaco 
```

如您所见，我有两个问题，第一个， for 应该进行 3 次迭代，但它只做一次……为什么？

第二，如果我打印出原始数据，我会得到“zodiaco”，这是我从网上获得的一个类别，但如果我将它分配给一个字符串变量，那么 println 会忽略整行......任何人的想法？:D

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:08:00.197

你可能会在你的 for 循环中遇到一个异常，你决定用一个空的 catch 块来忽略它。

在处理异常时，您通常有两种可能的情况：

*   要么您不知道如何处理它=> 不要捕获它并让调用代码处理它（如果您想避免强制关闭，您需要在某个阶段捕获它）
*   或者你可以用它做一些有用的事情（比如重试或让​​用户知道有问题），在这种情况下你抓住它并处理它。

当您仍处于开发阶段时，简单的日志记录就足够了，但至少您会得到关于正在发生的事情的反馈。

仅仅用空的 catch 语句吞下异常（几乎）从来都不是一个好的选择。

# python - 带模拟转换的音频加密

> ID：14155767
> 
> 赞同：-4
> 
> 时间：2013-01-04T10:54:22.533
> 
> 标签：python, audio, cryptography, analog-digital-converter, digital-analog-converter

我最近开始使用python，我对密码学没有特别的了解。

我想做的事：我想通过模拟信号传输数字编码数据（语音/wav），记录这个模拟信号并在之后解码。有点像这样：[http](http://www.cryptomuseum.com/crypto/voice.htm#digital) ://www.cryptomuseum.com/crypto/voice.htm#digital但使用 AES 而不是 XOR 操作。

我的问题：我录制了一个 WAV 文件并用 AES 加密它。该文件的解密工作正常。现在我通过扬声器播放此信号并再次用麦克风录制。现在，当我解密麦克风录制的文件时，我只得到一个充满噪音的文件。

我是否会因为它的 2 倍模拟/数字转换而丢失太多信息而无法在此之后破译？AES 可能是我的应用程序的错误加密吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:16:49.340

据我所知，没有基于块的加密/解密方案允许位错误“优雅地”通过解密，但我可能错了。如果存在任何此类方案，它们可能是安静的异国情调，并且会给您带来一堆其他问题。因此，您需要进行无损模拟传输。

幸运的是，这个问题之前已经解决了。解决方案是调制解调器。它应该是为传输通道量身定制的，这意味着您不能将同一调制解调器用于电话和空中传输通道。

调制解调器实际上很难设计和实施（即使它们非常便宜），所以除非您在这方面有经验，否则我建议您寻求帮助:-)

问候

# sql-server - 如何在我的查询附加的存储过程中通过不同的用户 ID 获取用户信息？

> ID：14155771
> 
> 赞同：0
> 
> 时间：2013-01-04T10:54:35.243
> 
> 标签：sql-server, database, stored-procedures

我想做的是我将 id 传递给 SP 然后我的查询得到 uder Id's Against it 我的查询如下所示，

```
select RequestFrom from UserReqest where RequestTo=10 and IsApprove=0

select * from user where user_ID= (i have to use all five id's here ?) 
```

当我将“10”传递给 sp 时，它将得到五个不同的 id 与 id“10”，那么我将如何获取所有这 5 个 id 的数据？我将如何实施它？我必须使用循环？我需要建议...

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:01:13.103

您可以使用以下查询：

```
select * from user where user_ID in
(
    select RequestFrom from UserReqest where RequestTo=10 and IsApprove=0
) 
```

# graphviz - 标签超链接 Graphviz

> ID：14155773
> 
> 赞同：20
> 
> 时间：2013-01-04T10:54:40.053
> 
> 标签：graphviz

我试图在 Graphviz 中找出如何使标签“1”着色并同时成为超链接。这可能吗？请看下面的例子。

F

```
 <graphviz>

 digraph vvv
 {
 rankdir=LR
 a2 [href="http://www.apple.com"]
 {
 a0->a1[href="http://www.uk.com"] [label="1"] [color =red];
 a1->a2 
 }

 a2[style=filled,color=yellow]
 a0[style=filled,color=lightgrey]

 </graphviz> 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-04T12:52:50.000

是的，这是可能的。

我假设您正在生成 SVG 输出。

如果通过*将标签设置为“1”颜色*表示**标签文本的字体颜色**，那么就像在边缘属性中指定它一样简单：

```
a0->a1[href="http://www.uk.com", fontcolor=yellow, color=red label="1"]; 
```

[`fontcolor`](http://www.graphviz.org/docs/attrs/fontcolor/)指标签文本[`color`](http://www.graphviz.org/docs/attrs/color/)的颜色，而 是边缘本身的颜色。

如果你想要一个**带有彩色背景的边缘标签**，[`fillcolor`](http://www.graphviz.org/docs/attrs/fillcolor/)应该可以工作。但是，它没有（可能取决于 graphviz 的版本）。因此，您可以使用[**类似 HTML 的标签**](http://www.graphviz.org/doc/info/shapes.html#html)并指定`BGCOLOR`：

```
 a0->a1[href="http://www.uk.com", fontcolor=red, label=<
     <TABLE CELLBORDER="0" CELLPADDING="0" CELLSPACING="0" BORDER="0">
         <TR><TD BGCOLOR="yellow">1KMK</TD></TR>
     </TABLE>
 >, color =red]; 
```

# ruby-on-rails - cucumber 显示页面未显示页面（解决方案：它在错误的行上）

> ID：14155775
> 
> 赞同：2
> 
> 时间：2013-01-04T10:54:45.803
> 
> 标签：ruby-on-rails, ruby, cucumber

将“然后向我显示页面”行添加到黄瓜场景中可以在我同事的计算机上使用相同的设置，但在我的计算机上不行。实际上，添加暂停步骤定义并调用它似乎完全被忽略了。

步骤定义：

```
Then /^show me the page$/ do
  save_and_open_page
end

AfterStep('@pause') do
  print "Press Return to continue"
  STDIN.getc
end 
```

特征：

```
(line 25) Scenario Outline: An authorised user visits the blah..,
Given a blah: ... blah ...
  And I am logged in as <role>
  And the date is 1 April 2012
When I go to the blah page
 And I click "foobar"
Then I should see "Blah foobar"
And I should see "Foobar on Mon Apr 1 00:00:00 2012 by <email>"
Then show me the page
And ... 
```

命令行：

```
cucumber features/blah/foos.feature:25 --require features --tags @pause 
```

使用 Firefox 16.02（避免 17 中的 bug）

两台机器都有 git-fetch'd、pull'd、bundle install'd，所以所有 gem 都是相同的，都使用 Rbenv 版本 * 1.9.3-p327-perf。我可能遗漏了一些明显的东西......

更新： tmp/capybara/ 不包含该文件，所以它现在没有被保存......

感谢 Beerlington 的解决方案：将显示的页面向上移动一个。在向我显示页面之前出现故障，因此没有显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-09T04:53:50.567

复制评论中的答案，以便从“未回答”过滤器中删除此问题：

> 感谢[Beerlington](https://stackoverflow.com/users/167614/beerlington)的解决方案：将向我展示的页面向上移动一个。在向我显示页面之前出现故障，因此没有显示。

# android - zxing 条码扫描仪结果为空

> ID：14155778
> 
> 赞同：1
> 
> 时间：2013-01-04T10:55:10.330
> 
> 标签：android, zxing

我按照[此](http://code.google.com/p/zxing/wiki/ScanningViaIntent)页面的指南进行操作，并激发了意图。它还发现了条形码。然而当

```
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
      IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);
      if (scanResult != null) {

          showMessage("result", scanResult.toString());

      }
      // else continue with any other code you need in the method

} 
```

到达对话框（`showMessage`函数基本上只是创建带有标题和文本的对话框）显示以下文本：

> 格式：null 内容：null 原始字节：（0bytes） 方向：null EC 级别：null

我错过了某些部分还是只是条形码问题？我已经尝试过所有带有条形码的产品，但没有任何变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T08:00:22.093

// 在 onActivityResult() 中，试试这段代码

```
if (resultCode == IntentIntegrator.REQUEST_CODE) {

            Log.e("inside Request code~~~~~~~~>", "Barcode>>>>");
            IntentResult scanResult = IntentIntegrator.parseActivityResult(
                    requestCode, resultCode, data);
            if (scanResult == null) {
                       Log.e("Scan Result~~~~~~~~>", "value>>> Null");
                return;
            }
            final String result = scanResult.getContents();
            final String result1 = scanResult.getFormatName();
            if (result != null) {
                handlerBarcode.post(new Runnable() {
                    @Override
                    public void run() {
                        // txtScanResult.setText(result);
                        // txtScanResultFormat.setText(result1);
                        Toast.makeText(Activity_Form_Data_4.this,
                                "Code:" + result + "  Format:" + result1,
                                Toast.LENGTH_SHORT).show();
                    }
                });
            }

        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T11:05:21.357

我的项目曾经做过这样的事情：

```
public class MenuScreen extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_menu_screen);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_menu_screen, menu);
        return true;
    }

    public void onScanCodeClick(View view) {
        Intent intent = new Intent("com.google.zxing.client.android.SCAN");
        intent.setPackage("com.google.zxing.client.android");
        intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
        try {
            startActivityForResult(intent, 0);
        } catch (ActivityNotFoundException aex) {
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setTitle("No Application Found");
            builder.setMessage("We could not find an application to scan QR CODES."
                    + " Would you like to download one from Android Market?");
            builder.setPositiveButton("Yes, Please",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            Intent marketIntent = new Intent(Intent.ACTION_VIEW);
                            marketIntent.setData(Uri
                                    .parse("market://details?id=com.google.zxing.client.android"));
                            startActivity(marketIntent);
                        }
                    });
            builder.setNegativeButton("No, Thanks", null);
            builder.create().show();

        }
    }

    public void onActivityResult(int requestCode, int resultCode, Intent intent) {

        if (requestCode == 0) {
            if (resultCode == RESULT_OK) {
                String contents = intent.getStringExtra("SCAN_RESULT");
                String format = intent.getStringExtra("SCAN_RESULT_FORMAT");

                // Handle successful scan

                Intent intent2 = new Intent();
                intent2.setClass(this, MenuCodeSuccess.class);
                intent2.putExtra("qrDetails", contents);
                startActivity(intent2);

            } else if (resultCode == RESULT_CANCELED) {
                // Handle cancel
            }
        }
    }

} 
```

`onScanCodeClick`只是按钮的 onClickListener。您当然可以初始化您的按钮并改用此代码。

这是一个xml布局：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:columnCount="2" >

    <Button
        android:id="@+id/menuScreen_SCANCODE"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="onScanCodeClick"
        android:text="@string/scanButton" />

</TableLayout> 
```

请不要在意布局的风格，您所需要的只是在 java 类中。:) 但无论如何它应该可以工作。

# java - 编码为泛型类型

> ID：14155781
> 
> 赞同：3
> 
> 时间：2013-01-04T10:55:31.507
> 
> 标签：java, generics

我对 Java 泛型有一点奇怪的问题。实际上，这可能根本不是问题，可能只是我试图在设计中错误地使用泛型。我不会给出应用程序的全部细节（这是无关紧要和无聊的）。

我创建了一个小片段来捕捉问题的本质。

有一个 Producer 界面，看起来像这样。

```
public interface Producer<P> {
public P produce(); 
} 
```

这个接口有一个实现，看起来像这样

```
public class IntegerProducer<P> implements Producer<P> {

@Override
public P produce() {
    return (P)new Integer(10);
}
} 
```

我在生产方法中真正需要做的是

```
if (P instanceOf Integer) return (P)new Integer(10);
else throw new Exception("Something weird happened in the client app"); 
```

现在当然 P instanceOf Integer 将不起作用。但是，如果您了解我正在尝试做的事情的精髓，请您分享一个解决方案。

感谢您的帮助。

澄清1：问题不在于我只想返回整数。问题是在函数produce() 中，我需要检查客户端程序使用的泛型类型，并据此更改函数的行为。这并不是说我想将泛型类型限制为特定类型的 Object（我可以在其中使用通配符），而是我需要函数 generate() 根据泛型中使用的 Object 类型略有不同客户端代码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-04T10:56:32.060

怎么样：

```
public class IntegerProducer implements Producer<Integer> {

    @Override
    public Integer produce() {
        return 10;
    }
} 
```

由于您仅`IntegerProducer`处理`Integer`s，因此您不需要它是通用的。然后你可以写：

```
Producer<Integer> p = new IntegerProducer();
Integer i = p.produce(); 
```

**编辑**

根据您的评论，我认为唯一的方法是传递一个类参数：

```
public class Producer<T> {

    public static void main(String[] args) throws InterruptedException {
        Producer<Integer> t1 = new Producer<> ();
        Producer<String> t2 = new Producer<> ();
        System.out.println(t1.get(Integer.class)); //prints 10
        System.out.println(t1.get(String.class)); //does not compile
        System.out.println(t2.get(String.class)); //throws exception
    }

    public T get(Class<T> c) {
        if (c == Integer.class) {
            return (T) (Object) 10;
        }
        throw new UnsupportedOperationException();
    }
} 
```

或者，您可以在构造函数中传递它（例如 EnumSets 和 EnumMaps 使用的策略）：

```
public class Producer<T> {

    public static void main(String[] args) throws InterruptedException {
        Producer<Integer> t1 = new Producer<> (Integer.class);
        Producer<Integer> t1 = new Producer<> (String.class); //does not compile
        Producer<String> t2 = new Producer<> (String.class);
        System.out.println(t1.get()); //prints 10
        System.out.println(t2.get()); //throws exception
    }

    private final Class<T> c;

    public Producer(Class<T> c) {
        this.c = c;
    }

    public T get() {
        if (c == Integer.class) {
            return (T) (Object) 10;
        }
        throw new UnsupportedOperationException();
    }
} 
```

这显然使代码混乱，我个人会重新考虑设计以避免这种情况。

# php - 使用 php 从静态 html 文件中提取/抓取 javascript window.open

> ID：14155782
> 
> 赞同：0
> 
> 时间：2013-01-04T10:55:33.810
> 
> 标签：php, web-scraping, simple-html-dom, scrape

我正在尝试抓取一堆本地 html 文件。每个文件中都嵌入了一段 javascript，具有不同的 window.open 路径，如下所示：

```
<script>

function goTo() {

if (document.getElementById('somedomain').checked) {
window.open("http://www.somedomain.com");
}

if (document.getElementById('visit').checked) {
window.open("http://extract-this-url.com/?somevar=12345&anothervar=59305&etc=etc");
}

}
</script> 
```

我正在尝试提取第二个 URL - 每个文件的 URL 将是不同的（与第一个“somedomain”URL 一样）。

我一直在看[SimpleHTMLDOM](http://simplehtmldom.sourceforge.net/)，但它看起来不像它可以做嵌入在 HTML 文件中的 javascript。

有什么体面的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:00:07.590

只需使用正则表达式：

```
preg_match('#visit.*?window\.open\("(.*?)"#is',$text,$matches);
print_r($matches); 
```

# jquery - 使用 jquery mobile 在移动网站中下载移动应用通知

> ID：14155783
> 
> 赞同：1
> 
> 时间：2013-01-04T10:55:34.460
> 
> 标签：jquery, html, jquery-mobile

我们有一个移动网站将在一段时间内上线。我们需要在页面标题的顶部放置一个下载 [iphone/ipad/mobile] 本机应用程序。***但是是否可以将 jquery 移动页面标题向下推送以显示此通知。***当我们单击此条上的关闭按钮时，此通知已消失。

我看到[目标站点](http://m.target.com)的相同。在标签/移动设备中尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:09:54.017

You can easily use second header and hide it when you are done:

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
</head>
<body>
    <div data-role="page" id="index">
        <div data-theme="a" data-role="header" id="custom_header">
            <h3>
                Nothing prevents you to create a custom header
            </h3>
        </div>        
        <div data-theme="a" data-role="header">
            <h3>
                First Page
            </h3>
            <a href="#second" class="ui-btn-right">Next</a>
        </div>

        <div data-role="content">
            <a href="#" data-role="button" id="test-button">Test button</a>
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>  
</body>
</html> 
```

This solution also need a custom css:

```
#custom_header {
    background: #000 !important;
} 
```

This will hide it:

```
$('#index').live('pagebeforeshow',function(e,data){    
    $('#close-custom-header').live('click', function(e) {
        $('#custom_header').toggle();
    });    
}); 
```

Example: [http://jsfiddle.net/Gajotres/w6vBK/](http://jsfiddle.net/Gajotres/w6vBK/)

# html - 除非调整浏览器窗口大小，否则使用 AJAX 加载的图像将被隐藏

> ID：14155790
> 
> 赞同：0
> 
> 时间：2013-01-04T10:55:51.207
> 
> 标签：html, ajax, rendering-engine

请参阅[http://new.damir.com.au](http://new.damir.com.au)。单击投资组合部分下显示的两个投资组合项目之一。

我正在使用 AJAX 从一个文件加载 HTML（包括图像标签）并将其插入到父文件中。一切都按预期工作，只是没有渲染图像。HTML 图像标签在那里，但它不会显示在屏幕上，除非您调整浏览器窗口的大小。调整窗口大小会以某种方式刷新屏幕上呈现的内容，并且图像可以正确显示。这是我的代码：

```
$.ajax({
            cache: false,
              type: 'POST',
              url: theURL,
              beforeSend:function(){
                // this is where we append a loading image
              },
              success:function(data){
                // successful request; do something with the data
                $(expandedElement).find('.wrap').append(data);
                expandedElement.addClass('loaded');
                // HTML has been loaded. Show it.
                // Initiate Flexslider
                  $(expandedElement).find('.wrap').flexslider({
                    animation: 'slide',
                    animationLoop: false,
                    prevText: '<span>Previous</span>',
                        nextText: '<span>Next</span>',   
                    slideshow: false
                  });
                  // Animate in the project
                $(expandedElement).fadeIn(1000);
                $('html, body').animate({
                    scrollTop: $(expandedElement).offset().top - 20
                }, 1000);

              },
              error:function(){
                // failed request; give feedback to user

              } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:44:42.630

好的，似乎问题与我在问题中所说的无关。我使用的是 picturefill.js 库，这导致通过 AJAX 加载图像时无法正确渲染。

# javascript - 将 jquery-multifile 绑定到动态加载的表单

> ID：14155793
> 
> 赞同：1
> 
> 时间：2013-01-04T10:55:57.727
> 
> 标签：javascript, jquery, dom, multifile-uploader

我正在使用此处找到的 jquery 多文件插件：

[http://www.fyneworks.com/jquery/multiple-file-upload/](http://www.fyneworks.com/jquery/multiple-file-upload/)

我过去使用过它并且没有任何问题，但现在我试图以动态加载的形式使用它，这导致了一个奇怪的问题。

根据本文加载表单时，我正确绑定了该功能，因此请理解这是与此处发布的问题不同但相关的问题：

[无法从动态加载的表单将输入事件绑定到 jQuery 多文件](https://stackoverflow.com/questions/8973539/cannot-bind-input-event-to-jquery-multifile-from-dynamically-loaded-form)

```
$('#reportWindow').on('click', '#continueReport', function () {
    var data = $('.reportForm').serializeObject();
    $('<div/>').load('/Forms/report.aspx', data, function () {
        doReportForm(this);
    });
}); 
```

一个 ASPX 文件被加载到`div`使用 jquery`load`中，`doReportForm`功能是调用各种绑定方法到动态生成的 HTML，如下所示：

```
function doReportForm(ele) { 
    $(ele).makeModal('', 800);
    FB.XFBML.parse();
    checkLogin();
    clearNetIds($('#reportForm2'));

    $("#datePicker").datepicker({
        changeMonth: true,
        changeYear: true
    });

    $('[class*="toolTip"]').setupTip();
    $(".multi").MultiFile(); // input[type=file]

    $('#right').on('click', '#savePost', function () {
        var data = $('.reportForm2').serializeObject();
    });
}; 
```

那里的第一行`$(ele).makeModal('', 800);`只是我为创建模态窗口所做的一个 jQuery 扩展，所以它就是将元素添加到 DOM 的位置，然后向下几行我绑定了`MultiFile`插件`$(".multi").MultiFile();`

第一次这样做，它工作正常。但是，当用户关闭模式窗口然后尝试再次加载表单时，我会收到错误消息。

```
Uncaught TypeError: Cannot call method 'apply' of undefined 
```

（关闭模态窗口会将其从 DOM 中完全删除`jQuery.remove()`，因此任何未来的窗口都是完全从新编写的）。

经过一番摆弄，这似乎是由于 jQuery 无法访问`MultiFile`脚本......我*想*

该`MultiFile`脚本加载在父文档的头部，因此应该始终可用。

# jboss - JBoss 上的 WSO2 ESB

> ID：14155797
> 
> 赞同：1
> 
> 时间：2013-01-04T10:56:06.463
> 
> 标签：jboss, wso2, wso2esb

我正在尝试在 JBoss AS 上部署 WSO2ESB 以启用事务。

据了解，我还没有找到任何官方指南。

1) WSO2ESB 4.5.1 支持的最新JBoss 版本是什么？2）我可以遵循一些官方指南吗？（我找到了以下博客，但它可以追溯到 2010 年：[http](http://wso2.org/library/knowledge-base/2010/03/deploying-wso2esb300-jboss510ga) ://wso2.org/library/knowledge-base/2010/03/deploying-wso2esb300-jboss510ga ）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:05:35.567

在当前版本中，WSO2 不支持在应用服务器中部署 WSO2 ESB。您可以立即使用独立产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T03:08:31.203

您不再需要在应用程序服务器（支持分布式事务）中部署 WSO2 ESB 来使用事务管理器来处理分布式事务。默认情况下，我们使用 WSO2 ESB 提供事务管理器实现（atomikos，如果没有其他容器提供的事务管理器可用，这将是默认事务管理器），它为您提供与分布式事务相关的完整功能堆栈。因此，只需在您的 ESB 配置中使用事务中介即可，而无需经历太多麻烦。

希望这可以帮助！

干杯，普拉巴斯

# service - WiX 服务安装程序卡在 Windows XP 上

> ID：14155800
> 
> 赞同：0
> 
> 时间：2013-01-04T10:56:16.913
> 
> 标签：service, wix, windows-xp

我有一个 WiX 安装程序，它安装（作为域管理员）我编写的服务并在完成后启动它。它必须在 Windows XP 和 Windows 7 上运行。它在两种操作系统上都运行良好。

然后我不得不对服务本身进行一些更改。所以我进行了更改，增加了我的安装程序的版本号，以便它更新服务，并重新编译了服务及其安装程序。我没有对安装程序进行任何其他更改。

安装程序在 Windows 7 上仍然可以完美运行，但在 Windows XP 上却不能。在 Windows XP 上，它会以某种方式卡住。安装进度条没有填满。您不能单击取消按钮（您可以单击它，但它会在窗口中显示取消，但没有任何反应）。根据任务管理器的说法，该程序没有响应，您仍然可以毫无问题地移动窗口。

我试图查看服务的安装文件夹，看看是否有一些操作正在进行，但如果你打开它，资源管理器就会冻结。我还尝试查看该服务是否已经在服务中注册，但是如果您打开服务，计算机管理也会冻结。错误日志中没有产生错误。CPU 和 RAM 的使用是绝对正常的。

有没有人知道发生了什么或者我对服务本身所做的更改如何破坏了我在 XP 上的安装程序？非常感谢您的帮助。

编辑 2013 年 1 月 7 日：

我只添加了一个`Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo("de-DE");`to main 服务的方法和这个服务启动的所有线程。这就是我改变的一切。

如果您进行全新安装或升级，这没有什么区别。

我发现在您终止服务并（因为按下关机会导致整个操作系统冻结）重新启动计算机后，安装程序退出并出现错误，告诉我我没有足够的权限来安装系统服务。我在管理员组。而且安装程序无论如何都不应该使用我的帐户进行安装。在此之后，安装程序通过删除它添加的文件来取消其操作。如果您再次重新启动计算机并尝试安装该服务，它会按所述卡住（与第一次尝试产生错误的步骤完全相同[我注意到通过运行安装程序并按照 Daniel 的建议启用了日志记录]）

我还发现安装程序不会从服务中删除服务，因为它会在错误发生后取消它的操作，但会删除服务的注册表项。好的，服务消失了。刷新 yust 没有像我预期的那样工作。

显然，问题根本不是我更改的结果，因为以前工作的安装程序和服务版本现在产生了完全相同的行为！

# c++ - C++ 设计模式帮助；具有私有访问权限的抽象类？

> ID：14155801
> 
> 赞同：1
> 
> 时间：2013-01-04T10:56:26.070
> 
> 标签：c++

我正在编写的库中有几个 C++ 中的“强相互依赖”类。第一个类是“DataSet”，和它的名字一样，管理数据。第二个类是“Renderer”，在 DataSet 中绘制数据。这两个类都是抽象的。这是我想要的两个类之间的“流程”：

*   应用程序创建已实现的 DataSet 对象 (DataSetImpA,B,C) 并将它们传递给已实现的渲染器 (RendererImp)。

*   应用程序告诉渲染器它的相机指向哪里。

*   渲染器使用相机参数在每个 DataSet 上调用私有“更新”方法，以便 DataSet 准备所有相关对象。

*   渲染器调用私有的“get”方法来检索新准备的对象。

*   Renderer 偶尔会调用私有的“clear”方法来销毁 DataSet 的对象。

'update'、'get' 和 'clear' 方法将是 DataSet 中的纯虚函数。朋友类在这里不起作用，因为我希望实现对使用 lib 的人是开放和可扩展的；当'class x'根据要使用的实现而变化时，期望有人写“friend class x”是不好的。

有人可以建议一种方法/设计模式来实现上述内容吗？随意提出不同的做事方式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:00:17.590

我不明白为什么`update`，`get`并且`clear`需要`private`。对我来说，这看起来是一个糟糕的设计。如果您打算从其他类调用它们，并且从逻辑上讲，它们应该从其他类调用，请将它们设为`public`. 事实上，我可能只是将`update`其设为私有并`DataSet`在需要时在内部调用它（例如，在 开头调用它`get`）。

您可以通过结交`Renderer`朋友并仅通过渲染器访问这些方法来按照您想要的方式进行操作，但是老实说，这看起来一点也不干净。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T11:09:34.360

给`DataSet`一个公共`render`函数，然后传递`Renderer`给它。

如果您需要更新独立于渲染，也请`update`公开。

A good design principle is [Tell, Don't Ask](http://pragprog.com/articles/tell-dont-ask). Don't write getters, rearrange your design so that they are not needed.

The name `DataSet` hides the true meaning of the objects. They are visible, renderable, scene objects, props, solids.

It sounds as though you want to render a particular view of a scene, depending upon the camera position. The view is dynamic:

```
View view(scene);    
...
view.render(renderer); 
```

# asp.net - 如何在 SQL Server 中记录插入、更新？

> ID：14155809
> 
> 赞同：1
> 
> 时间：2013-01-04T10:56:51.590
> 
> 标签：asp.net, sql-server

我想知道当用户从我的 ASP.NET 应用程序插入或更新一些数据时，记录的最佳实践是什么。

在我的应用程序中，我需要知道哪个用户进行了更改，我想我必须选择：

> *   将我的 ASP.NET 用户注册到 SQL Server 中，为他们添加所需表的权限，并为我的每个用户存储单独的连接字符串。因此，我可以在连接到数据库时使用当前登录用户的连接字符串，这样我就可以为 SELECT 和 UPDATE 编写 T-SQL 触发器。
>     
>     
> *   我想到的另一个选择是我可以编写存储过程，将 ASP.NET 用户名作为输入参数并为我制作日志（我在应用程序中只使用一个连接字符串）。从应用程序修改数据库后，我将调用此过程，给出当前登录用户的用户名。

第二个选项对我来说似乎更简单，但我认为为此我应该选择第一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:42:02.143

选择第二个选项。在数据库中管理用户让您更加头疼，如果您必须移动数据库服务器会发生什么？您需要更新所有用户的所有连接字符串。它只会产生额外的管理开销。

此外，如果您需要记录数据库中的所有更改，那么我想出了一些我过去使用的东西来存储随着时间的推移对数据库所做的所有更改。看看吧，也许有用。

[http://richhooper.wordpress.com/2012/06/11/sql-server-row-level-versioning/](http://richhooper.wordpress.com/2012/06/11/sql-server-row-level-versioning/)

# javascript - 将 xml 分解为多个 xml

> ID：14155812
> 
> 赞同：0
> 
> 时间：2013-01-04T10:57:00.067
> 
> 标签：javascript, xml

我有以下 xml，**xmlDoc**看起来像这样：

```
<root>
<a>
 <Row>
</a>
<b>
 <Row>
</b>
<c>
 <Row>
</c>
</root> 
```

我希望每个字母（a、b、c）都有一个 xml。我希望将它们分配给这些**xmlA**、**xmlB**、**xmlC**。

那么我如何在Javascript中做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:36:38.503

当有为这项工作设计的语言时，为什么要在 Javascript 中这样做？这是 XSLT 中的解决方案：

```
<xsl:stylesheet xmlns="http://www.w3.org/1999/XSL/Transform" version="2.0">

<xsl:template match="/">
  <xsl:for-each select="/root/*">
    <xsl:result-document href="xml{name()}.xml">
      <xsl:copy-of select="."/>
    </xsl:result-document>
  </xsl:for-each>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:00:40.407

使用 jQuery：

```
var $xml = $('<root><a><Row></a><b><Row></b><c><Row></c></root>');

$xml.find('*').each(
                 function(i,d){
                     if(d.firstChild)
                           d.innerHtml = '<p>WHATEVER</p>';
                  }); 
```

# facebook - 如何安排帖子

> ID：14155819
> 
> 赞同：3
> 
> 时间：2013-01-04T10:57:34.307
> 
> 标签：facebook, post, schedule, facebook-feed

我目前正在开发一个页面应用程序，它允许用户安排他们的页面帖子。正如 facebook 文档中给出的那样，我必须使用，但由于应用程序存储在服务器中，它总是会使用相应的服务器时间`unix time stamp`创建一个 unix 时间戳。`mktime()`

现在假设来自不同地方的不同人需要安排帖子，我如何在给定时间安排他们的帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:15:26.593

您必须设置一个时区来创建时间戳。

```
$timezone= ''Americas/New_York';
$date = new DateTime($dateStr, new DateTimeZone($timezone));

or

date_default_timezone_set('Americas/New_York');
$date = strtotime($dateStr);

$attachment = array(
                'message' => $data['facebook_text'],
                'name' => $data['name'],
                'link' => $this->getLinkToLatestNews(),
                'description' => '',
                'scheduled_publish_time' => $date 
            );

$facebook->api('/PAGE ID/feed/', 'post', $attachment); 
```

注意：页面帖子应该上线的时间，应该是发布帖子后的 10 分钟到 6 个月。

看：

1.  [http://www.php.net/manual/en/function.date-default-timezone-set.php](http://www.php.net/manual/en/function.date-default-timezone-set.php)
2.  [http://php.net/manual/en/datetime.construct.php](http://php.net/manual/en/datetime.construct.php)
3.  [脸书文件](https://developers.facebook.com/docs/reference/api/page/#posts)

# ssis - 如何将 oracle 表与 ax 2009 表链接？

> ID：14155826
> 
> 赞同：1
> 
> 时间：2013-01-04T10:58:05.383
> 
> 标签：ssis, oracle10g, integration, axapta, dynamics-ax-2009

我必须每天从 Oracle 的“A-Table”中提取数据并将其插入 Ax“A-Table”。

谁能告诉我我怎样才能做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:45:12.473

您需要下载适用于 Windows 的 Oracle 驱动程序 ( [http://www.oracle.com/technetwork/developer-tools/visual-studio/downloads/index.html](http://www.oracle.com/technetwork/developer-tools/visual-studio/downloads/index.html) )。

然后看看这个[http://floditt.blogspot.mx/2011/08/using-adonet-with-x.html](http://floditt.blogspot.mx/2011/08/using-adonet-with-x.html)。您必须使用之前安装的 Oracle 类（System.Data.OracleClient.OracleConnection、OracleCommand、OracleReader 等），而不是使用 System.Data.SqlClient 数据类型。

如果您希望它每天运行，只需设置一个新的批处理作业（在 Base -> Inquiries -> Batch job 中）。

# ios - 是否可以将应用程序添加到本机共享对话框？

> ID：14155827
> 
> 赞同：4
> 
> 时间：2013-01-04T10:58:11.120
> 
> 标签：ios, objective-c, iphone

我假设不可能将应用程序添加到本机共享对话框中，就像在相机胶卷中使用的那样。但是，我在对话框中看到了不同应用程序的屏幕截图。

![](../Images/b17e532aca77cdfe90de03a0df13997e.png) ![](../Images/c89b4e1926f203f011f5082454783f1b.png)

是否只有集成在操作系统中的应用程序才能出现在此对话框中？或者是否有可能通过某种方案或其他方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T21:25:01.697

我研究了`UIDocumentInteractionController`“老虎”提到的可能性，得出的结论是不可能的。

我查看了 Apple 文档，声明 info.plist 中的文档类型适用于其他应用程序，但不适用于邮件、图像/相机胶卷等；本机共享对话框。

编辑：我真的没有得到反对意见......这里有一些参考资料说这是不可能的：

*   [https://devforums.apple.com/thread/140939?tstart=0](https://devforums.apple.com/thread/140939?tstart=0)
*   [为什么不能我注册我的 ios 应用程序来处理图像文件类型](https://stackoverflow.com/questions/9197757/why-cant-i-register-my-ios-application-to-handle-the-image-file-type)
*   [注册应用程序以打开图像文件](https://stackoverflow.com/questions/9481534/register-app-to-open-image-files)
*   [将音频和视频类型与 iPhone 应用程序关联](https://stackoverflow.com/questions/11523723/associate-audio-and-video-types-with-iphone-app)
*   [在 ios 上添加文件关联与 tiff 文件](https://stackoverflow.com/questions/5094088/add-a-file-association-with-tiff-files-on-ios)
*   [Associate-image-file-types-utis-with-ios-app-doesnt-show-open-in-in-m](https://stackoverflow.com/questions/5401144/associate-image-file-types-utis-with-ios-app-doesnt-show-open-in-in-m)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T11:01:08.480

您需要继承 UIActivity 来实现这一点。有一个 Dropbox 的例子： [https ://github.com/goosoftware/GSDropboxActivity](https://github.com/goosoftware/GSDropboxActivity)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-06T22:00:27.183

将您的应用注册为支持您要打开的文件类型并添加代码以打开它们。请参阅[文档交互编程主题](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010403)。

# prolog - 序言，用适当的括号列出结果

> ID：14155831
> 
> 赞同：2
> 
> 时间：2013-01-04T10:58:30.070
> 
> 标签：prolog

我想知道如何用我拥有的元素获得一个看起来不错的列表！我一直在尝试查找有关此内容的内容，但我发现的实际示例似乎都不起作用

这是我在网上找到的一种方法：

```
create_list(Item, List, [Item|List]). 
```

如果我运行此查询：

```
Hi = [1,2], Hey = [3,4], create_list(Hi, Hey, Output). 
```

结果变得很奇怪：

```
Output = [[1,2], 3,4] 
```

括号都错了！它应该是：

```
[[1,2], [3,4]] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:02:04.467

> 括号都错了！它应该是：
> 
> ```
> [[1,2], [3,4]] 
> ```

这是因为您`create_list`使用`[Item|List]`. 如果您希望周围`[3,4]`的括号保持原位，请替换`[Item|List]`为`[Item,List]`. 当然`List`现在含义不正确，所以我将它重命名，如下：

```
list_of_two(First, Last, [First, Last]). 
```

但是，这不适用于两个以上的项目。您原来的一条规则会起作用，如下所示：

```
create_list([1,2],[],O1), create_list([3,4],O1,O2), create_list([5,6],O2,O3). 
```

这产生

```
[[5, 6], [3, 4], [1, 2]] 
```

在`O3`列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T12:22:48.540

与其他语言相比，列表是 Prolog 中非常基本的数据结构：

`[]`是/创建一个空列表
`[1]`是/创建一个具有单个元素
`[1,2,3,4,....,n]`的列表是/创建一个具有`n`元素的列表
`[1|[2,3,4]]`是/通过在列表中插入来创建一个列表`1`（`[2,3,4]`结果是`[1,2,3,4]`）

因此，您不需要谓词来“创建”列表：如果您有`n`元素，只需将它们放在括号中；如果元素是递归生成的，则用于`|`创建包含新元素的列表。例如：

```
put_in_list(A1,A2,A3, L):- L = [A1,A2,A3]. 
```

或者：

```
put_in_list(A1,A2,A3, [A1,A2,A3]). 
```

还：

```
generate(0, []).
generate(N, [ [N, NN]| Rest ]):-
   NN is N-1,
   NNN is N-2,
   generate(NNN, Rest). 
```

总而言之，你应该小心类型；在您的情况下，您有一个数字列表（我们称之为 X），并且您想要一个数字列表列表（所以这将是一个 X 列表）。当您将 X 列表作为参数而不是 X 给谓词时，就会产生问题。

# java - Log4j，根据环境禁用附加程序

> ID：14155832
> 
> 赞同：13
> 
> 时间：2013-01-04T10:58:37.230
> 
> 标签：java, log4j, rollingfileappender

我想要一个 log4j.xml 配置，并能够在开发我的应用程序时登录到控制台。一旦部署到环境中，我只想登录到文件附加程序而不是控制台。我怎样才能做到这一点？

这是我当前的配置：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">

    <appender name="ConsoleAppender" class="org.apache.log4j.ConsoleAppender">
        <param name="Threshold" value="DEBUG" />
        <param name="Target" value="System.out" />
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d{dd-MM-yyyy HH:mm:ss} %-5p%c{1} - %m%n" />
        </layout>
    </appender>

    <appender name="LogFileAppender" class="org.apache.log4j.RollingFileAppender">
        <param name="File" value="${log-base-dir}/${adapter-name}.log" />
        <param name="MaxFileSize" value="5000KB" />
        <param name="MaxBackupIndex" value="99" />
        <param name="append" value="true" />        
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d{dd-MM-yyyy HH:mm:ss} %-5p%c{1} - %m%n" />
        </layout>
    </appender>

    <root>
        <level value="info" />
        <appender-ref ref="ConsoleAppender" />
        <appender-ref ref="LogFileAppender" />
    </root>

</log4j:configuration> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-04T12:21:22.323

解决方案之一可能是为*开发*和*生产*环境分离 log4j 配置文件，例如：

*   `log4j-development.xml`- 用于开发环境
*   `log4j-production.xml`- 用于生产环境

然后您的应用程序启动命令可能具有指定 log4j 配置文件的参数，例如`java -Dlog4jconfig=log4j-development.xml -jar Application.jar`

您可以通过获取代码中的属性值来配置 log4j，`log4jconfig`例如`System.getProperty("log4jconfig")`。

该解决方案的优点如下：

*   您可以独立指定记录器（在开发中`ConsoleAppender`且`LogFileAppender`仅`LogFileAppender`在生产中）
*   您可以指定每个环境的日志记录级别（例如`error`在生产和`debug`开发中）
*   您可以独立配置文件记录器，例如在生产中保留日志 X 天（出于审计目的等），并且在开发中只有一个日志文件等。

该模式用于许多具有多个环境（开发、UAT、暂存、生产等）的应用程序服务器。

示例`log4j-development.xml`

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">

    <appender name="ConsoleAppender" class="org.apache.log4j.ConsoleAppender">
        <param name="Threshold" value="DEBUG" />
        <param name="Target" value="System.out" />
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d{dd-MM-yyyy HH:mm:ss} %-5p%c{1} - %m%n" />
        </layout>
    </appender>

    <root>
        <level value="debug" />
        <appender-ref ref="ConsoleAppender" />
    </root>

</log4j:configuration> 
```

示例`log4j-production.xml`

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">

    <appender name="LogFileAppender" class="org.apache.log4j.RollingFileAppender">
        <param name="File" value="${log-base-dir}/${adapter-name}.log" />
        <param name="MaxFileSize" value="5000KB" />
        <param name="MaxBackupIndex" value="99" />
        <param name="append" value="true" />        
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d{dd-MM-yyyy HH:mm:ss} %-5p%c{1} - %m%n" />
        </layout>
    </appender>

    <root>
        <level value="error" />
        <appender-ref ref="LogFileAppender" />
    </root>

</log4j:configuration> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-11-21T21:23:24.137

`Threshold`使用 appender 的参数和**JVM**系统属性很容易做到。例如

```
<appender name="CONSOLE" class="org.apache.log4j.ConsoleAppender">
    <param name="Threshold" value="${my.console.level}" />
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d %-5p [%c{1}] %m%n" />
    </layout>
</appender> 
```

然后在产品使用上启动应用程序时`-Dmy.console.level=OFF`

同时在本地启动时使用`-Dmy.console.level=ALL`

`OFF`和都是`ALL`有效的 log4j 级别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-25T12:24:50.837

使用 Log4j2，您可以选择使用 Java 系统属性切换 appender 引用，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="error">
    <Appenders>
        <!-- Log file location uses Tomcat system variable, change for other web servers -->
        <RollingFile name="rolling-file"/>
        <Console name="console"/>
    </Appenders>
    <Loggers>
        <Root level="info">
            <AppenderRef ref="${sys:log4j.loggers.root.appender:-rolling-file}"/>
        </Root>
    </Loggers>
</Configuration> 
```

`-`（由于某种原因，sys prop 变量中默认值前面的减号是必需的）

从默认的“滚动文件”切换到控制台“

```
-Dlog4j.loggers.root.appender=console 
```

# iphone - 我们可以使用企业帐户将 WebGL 应用程序部署为原生 iOS 应用程序吗

> ID：14155834
> 
> 赞同：1
> 
> 时间：2013-01-04T10:58:53.710
> 
> 标签：iphone, ios, webgl, enterprise

我们可以使用 Enterprise Account 将 WebGL 应用程序部署为原生 iOS 应用程序吗？

我的应用程序将有一个 webview 我想在其中启用 webgl

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:53:41.880

是的，没有针对企业应用程序的评论。您可能会使用私有 API（以及与之相关的所有警告）。

# c# - 如何以编程方式将控件的文本字体颜色更改为自定义颜色

> ID：14155836
> 
> 赞同：3
> 
> 时间：2013-01-04T10:58:57.627
> 
> 标签：c#, asp.net

我有一个按钮控件。我想以编程方式将其文本的字体颜色更改为我想要的自定义颜色 #33CCFF。

我目前的代码是

```
Button1.ForeColor = Color.#33CCFF; 
```

我也试过

```
Button1.ForeColor = #33CCFF; 
```

两个都没用。。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T11:00:50.460

你可以使用：

```
Button1.ForeColor = (Color)ColorConverter.ConvertFromString("#33CCFF"); 
```

供参考：[MSDN 上的 ColorConverter](http://msdn.microsoft.com/de-de/library/system.drawing.colorconverter.aspx)

或者，您可以使用`ColorTranslator`：

```
Button1.ForeColor = System.Drawing.ColorTranslator.FromHtml("#33CCFF"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:00:34.190

```
Button1.ForeColor = Color.FromArgb(0x0033CCFF); 
```

参考：[Color.FromArgb 方法](http://msdn.microsoft.com/en-us/library/system.drawing.color.fromargb.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T11:05:44.610

```
Button1.BackColor = System.Drawing.ColorTranslator.FromHtml("#FFFF00"); 
```

您可以在其中使用 RGB 十六进制代码。

# java - 使用配置文件的条件方面

> ID：14155839
> 
> 赞同：2
> 
> 时间：2013-01-04T10:58:59.687
> 
> 标签：java, spring, aspectj

使用 spring 3.2 和 AspectJ 1.6，我使用 AspectJ 实现了一个分析方面来获取我的应用程序的性能指标。

它正在工作，但现在我需要这个方面的执行是有条件的。我的意思是，此分析仅在某些时候有用，因此我想在不需要时将其关闭。

我所做的第一种方法是添加一个由 spring 注入的新属性到方面。然后此属性用于使执行有条件。像这样的东西：

方面：

```
...
private boolean active;
@Pointcut("execution(public * *(..))")
    public void anyPublicOperation() {
}
@Around("anyPublicOperation()")
public Object profile(final ProceedingJoinPoint pjp)
    throws Throwable {
if (active){
            ...
    }
} 
```

豆配置：

```
<!-- Profiling aspect -->
<bean class="example.ProfilingAspect" factory-method="aspectOf">
    <property name="active" value="true"/>
</bean> 
```

这可行，但我想完全停用它以避免执行方面，然后它就不需要了。

但是，我发现的唯一解决方案是在“aop.xml”文件中注释方面，但我更喜欢使用属性来激活/停用分析。

任何想法？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:10:11.910

you could create two aop.xml files... one normal and one for profiling. choose the profiling one with this argument:

```
-Dorg.aspectj.weaver.loadtime.configuration=META-INF/aop-profiling.xml 
```

or you could check in the aspect, if it should do any work... but i would not do it that way...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T09:49:23.520

这可以通过以下方式实现：

1.  在你的属性文件中声明一个属性，它告诉你应该启用还是禁用方面。例如：`enableAspect =true`
2.  创建两个扩展抽象类的方面类：

    ```
     AbstractAspectClass (contains blank implementation of advices)
                       /     \
                      /        \
                     /           \
        EnableAspectClass           DisableAspectClass 
    ```

    （包含所有必需的建议（不包含任何方法）与实施）

3) 创建一个 bean 类，它将根据属性返回所需的 Aspect

```
@Bean
public AbstractAspectClass abstractAspectClass() {

    return enabeAspect ? new EnableAspectClass() : new DisableAspectClass();
} 
```

# php - JSON.php 在服务器之间解码行为不同

> ID：14155843
> 
> 赞同：2
> 
> 时间：2013-01-04T10:59:10.663
> 
> 标签：php, json

我有以下问题：在我的本地开发服务器 PHP 5.3.10 / Apache 2 上，一切正常。当我使用生产服务器 PHP 版本 5.2.13 / Apache 2 运行相同的代码时，代码会失败，但在某些情况下并非总是如此。

更多细节 ：

上下文：我在屏幕上有一个可以更新的 dojox.data.grid 表。修改后的数据以 JSON 字符串的形式正确传递给服务器。像这样 ：

```
data = {
    "deletedItems":{}
    ,"newItems":{}
    ,"modifiedItems":{
        "2890":{"idFacture":"2890"
                ,"idClient":"175"
            ,"idAffaire":"1323"
            ,"idContrat":"2234"
            ,"raisonSociale":"xxxxxx"
            ,"nomAffaire":"xxxxxx"
            ,"nrFacture":"xxxxx"
            ,"dateFacture":"2012-12-06"
            ,"montantFacture":"160000.00"
            ,"pourcentageFacture":"64.88"
            ,"pourcentageCalcule":"32.44"
            ,"noteFacture":""
            ,"dateTransfert":""
            ,"aTransferer":true
            ,"typeDocument":"Facture"
            ,"factureSoldee":false
            ,"montantTotalHeures":"0.00"
            ,"pourcentageTotalHeures":"0.00"
            ,"montantTotalMateriel":"0.00"
            ,"pourcentageTotalMateriel":"0.00"
            ,"montantTotalSousTraitance":"160000.00"
            ,"pourcentageTotalSousTraitance":"40.94"
    }
    ,"2892":{"idFacture":"2892"
        ,"idClient":"50"
                    ,"idAffaire":"1649"
            ,"idContrat":"2713"
            ,"raisonSociale":"xxxxx"
            ,"nomAffaire":"xxxxx"
            ,"nrFacture":"xxxxx"
            ,"dateFacture":"2012-12-07"
            ,"montantFacture":"12004.50"
            ,"pourcentageFacture":"0.00"
            ,"pourcentageCalcule":"41.94"
            ,"noteFacture":""
            ,"dateTransfert":""
            ,"aTransferer":true
            ,"typeDocument":"Facture"
            ,"factureSoldee":false
            ,"montantTotalHeures":"12004.50"
            ,"pourcentageTotalHeures":"41.95"
            ,"montantTotalMateriel":"0.00"
            ,"pourcentageTotalMateriel":"0.00"
            ,"montantTotalSousTraitance":"0.00"
            ,"pourcentageTotalSousTraitance":"0.00"
        }
    }
} 
```

可以看到数据包含三个元素“deletedItems”（空）、“createdItems”（空）和“modifiedItems”。

在 php 代码中，我有以下命令：

```
$srvJson = new Services_JSON(SERVICES_JSON_LOOSE_TYPE);

$data = $srvJson->decode($data); 
```

$data 像上面那样填充的地方。通常在最后一条语句之后设置以下 PHP 变量：

*   $数据[“已删除项目”]
*   $data["createdItems"]
*   $data["modifiedItems"]

这是问题所在：如果在生产服务器上表中有很多修改的行（大约> 30），则修改后的数据正确传递给服务器但是 $data["modifiedItems"] 没有设置？？？如果我只是为几行修改数据集，$data["modifiedItems"] 就设置好了。我可以逐个修改整个数据集，但不能一次性修改整个数据集。

我想这是服务器设置的问题，但是什么？

我会很感激任何建议。

此致，

罗杰

PS：对不起我的英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:23:58.663

由于它不是有效的 JSON（通过[http://jsonlint.com/](http://jsonlint.com/)检查），因此 PHP 5.3.10 和 PHP 5.2.13 中 json_decode() 的结果是不同的！

虽然 5.3 不返回任何内容，但 5.2.13 返回初始字符串。可能您的代码在某处有一些错误更正......

[**在3v4l.org**](http://3v4l.org/ffYj4)上查看不同 PHP 版本的不同结果！

当我们`data =`从您的 JSON中删除时[不会引发错误。](http://3v4l.org/sv4X4).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:13:22.923

根据您的上述问题，您可以在服务器上检查以下内容

*   magic_quotes 在类似于本地服务器的服务器上打开或关闭
*   Services_JSON 是否兼容 PHP 5.3
*   Services_JSON 是 pear php 库，所以请检查它是否与 php [http://pear.php.net/bugs/search.php?cmd=display&package_name%5B%5D=Services_JSON的所有扩展一起正常工作](http://pear.php.net/bugs/search.php?cmd=display&package_name%5B%5D=Services_JSON)

或者您可以使用默认的 php json 库进行编码和解码

愿这对你有帮助

# oracle - 从函数返回结果集

> ID：14155844
> 
> 赞同：4
> 
> 时间：2013-01-04T10:59:18.540
> 
> 标签：oracle, oracle11g

我需要从函数返回一个结果集，并像处理普通表一样使用这个结果集。

所以我需要以下内容：

```
select * from table(querydb('select * from dual')) 
```

该`querydb`函数应返回传递给它的查询的结果集。

可以在oracle中实现吗？

将不胜感激任何信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T10:27:17.393

如果您需要一个结果集并且引用游标不适用于名为 sys.anydataset 的数据类型。即您似乎想要的是一个[流水线函数](http://docs.oracle.com/cd/E11882_01/appdev.112/e10765/pipe_paral_tbl.htm)，但当然，对于一个常规的流水线函数，您需要定义输出结构，在您的情况下它不是静态的。

输入任何数据集。这种类型允许我们动态生成类型（仅在硬解析时），以允许我们定义具有不同输出的流水线函数。

不幸的是，编码有点复杂。

首先，我们定义一个类型来处理传入的 SQL 语句。

```
SQL> create type dyn_pipeline as object
  2  (
  3    atype anytype,
  4
  5    static function ODCITableDescribe(rtype out anytype,
  6                                      stmt  in  varchar2)
  7      return number,
  8
  9    static function ODCITablePrepare(sctx      out dyn_pipeline,
 10                                     tf_info   in  sys.ODCITabfuncinfo,
 11                                     stmt      in  varchar2)
 12      return number,
 13
 14    static function ODCITableStart(sctx  in out dyn_pipeline,
 15                                   stmt  in     varchar2)
 16      return number,
 17
 18    member function ODCITablefetch(self  in out dyn_pipeline,
 19                                   nrows in     number,
 20                                  rws   out    anydataset)
 21      return number,
 22
 23    member function ODCITableClose(self in dyn_pipeline)
 24      return number
 25  );
 26  / 
```

接下来，我们创建一个包规范，它基本上就是你的`querydb`函数调用：

```
SQL> create package pkg_pipeline
  2  as
  3
  4    /*
  5     * Global Types
  6     */
  7    -- Describe array.
  8    type dynamic_sql_rec is record(cursor    integer,
  9                                   column_cnt  pls_integer,
 10                                   description dbms_sql.desc_tab2,
 11                                   execute     integer);
 12    -- Meta data for the ANYTYPE.
 13    type anytype_metadata_rec is record(precision pls_integer,
 14                                        scale     pls_integer,
 15                                        length    pls_integer,
 16                                        csid      pls_integer,
 17                                        csfrm     pls_integer,
 18                                        schema    varchar2(30),
 19                                        type      anytype,
 20                                        name      varchar2(30),
 21                                        version   varchar2(30),
 22                                        attr_cnt  pls_integer,
 23                                        attr_type anytype,
 24                                        attr_name varchar2(128),
 25                                        typecode  pls_integer);
 26
 27
 28    /*
 29     * Global Variables
 30     */
 31    -- SQL descriptor.
 32    r_sql dynamic_sql_rec;
 33
 34    /*
 35     * function will run the given SQL
 36     */
 37    function querydb(p_stmt in varchar2)
 38      return anydataset pipelined using dyn_pipeline;
 39
 40  end pkg_pipeline;
 41  /

Package created. 
```

那里的类​​型将仅包含有关 SQL 结构本身的一些信息（我们将使用`DBMS_SQL`它来描述输入 SQL，因为它具有从任何给定 SQL 语句中获取列数、数据类型等的功能。

主要类型体是处理发生的地方：

```
SQL> create type body dyn_pipeline
  2  as
  3
  4    /*
  5     * DESC step. this will be called at hard parse and will create
  6     * a physical type in the DB Schema based on the select columns.
  7     */
  8    static function ODCITableDescribe(rtype out anytype,
  9                                      stmt  in  varchar2)
 10      return number
 11    is
 12
 13      /* Variables */
 14      -- Type to hold the dbms_sql info (description)
 15      r_sql   pkg_pipeline.dynamic_sql_rec;
 16      -- Type to create (has all the columns) of the sql query.
 17      t_anyt  anytype;
 18      -- SQL query that will be made up from the 2 passed in queries.
 19      v_sql   varchar2(32767);
 20
 21    begin
 22
 23      /*
 24       * Parse the SQL and describe its format and structure.
 25       */
 26      v_sql := replace(stmt, ';', null);
 27
 28      --  open, parse and discover all info about this SQL.
 29      r_sql.cursor := dbms_sql.open_cursor;
 30      dbms_sql.parse( r_sql.cursor, v_sql, dbms_sql.native );
 31      dbms_sql.describe_columns2( r_sql.cursor, r_sql.column_cnt, r_sql.description );
 32      dbms_sql.close_cursor( r_sql.cursor );
 33
 34      -- Start to create the physical type.
 35      anytype.BeginCreate( DBMS_TYPES.TYPECODE_OBJECT, t_anyt );
 36
 37      -- Loop through each attribute and add to the type.
 38      for i in 1 .. r_sql.column_cnt
 39      loop
 40
 41        t_anyt.AddAttr(r_sql.description(i).col_name,
 42                       case
 43                         when r_sql.description(i).col_type in (1,96,11,208)
 44                         then dbms_types.typecode_varchar2
 45                         when r_sql.description(i).col_type = 2
 46                         then dbms_types.typecode_number
 47                         when r_sql.description(i).col_type in (8,112)
 48                         then dbms_types.typecode_clob
 49                         when r_sql.description(i).col_type = 12
 50                         then dbms_types.typecode_date
 51                         when r_sql.description(i).col_type = 23
 52                         then dbms_types.typecode_raw
 53                         when r_sql.description(i).col_type = 180
 54                         then dbms_types.typecode_timestamp
 55                         when r_sql.description(i).col_type = 181
 56                         then dbms_types.typecode_timestamp_tz
 57                         when r_sql.description(i).col_type = 182
 58                         then dbms_types.typecode_interval_ym
 59                         when r_sql.description(i).col_type = 183
 60                         then dbms_types.typecode_interval_ds
 61                         when r_sql.description(i).col_type = 231
 62                         then dbms_types.typecode_timestamp_ltz
 63                       end,
 64                       r_sql.description(i).col_precision,
 65                       r_sql.description(i).col_scale,
 66                       r_sql.description(i).col_max_len,
 67                       r_sql.description(i).col_charsetid,
 68                       r_sql.description(i).col_charsetform );
 69      end loop;
 70
 71      t_anyt.EndCreate;
 72
 73      -- set the output type to our built type.
 74      ANYTYPE.BeginCreate(dbms_types.TYPECODE_TABLE, rtype);
 75      rtype.SetInfo(null, null, null, null, null, t_anyt,
 76                    dbms_types.TYPECODE_OBJECT, 0);
 77      rtype.EndCreate();
 78
 79      return ODCIConst.Success;
 80
 81    end ODCITableDescribe;
 82
 83
 84    /*
 85     * PREPARE step. Initialise our type.
 86     */
 87    static function ODCITableprepare(sctx      out dyn_pipeline,
 88                                     tf_info   in  sys.ODCITabfuncinfo,
 89                                     stmt      in  varchar2)
 90      return number
 91    is
 92
 93      /* Variables */
 94      -- Meta data.
 95      r_meta   pkg_pipeline.anytype_metadata_rec;
 96
 97    begin
 98
 99      r_meta.typecode := tf_info.rettype.getattreleminfo(
100                           1, r_meta.precision, r_meta.scale, r_meta.length,
101                           r_meta.csid, r_meta.csfrm, r_meta.type, r_meta.name
102                         );
103
104      sctx := dyn_pipeline(r_meta.type);
105      return odciconst.success;
106
107    end;
108
109
110    /*
111     * START step. this is where we execute the cursor prior to fetching from it.
112     */
113    static function ODCITablestart(sctx  in out dyn_pipeline,
114                                   stmt  in     varchar2)
115      return number
116    is
117
118      /* Variables */
119      r_meta pkg_pipeline.anytype_metadata_rec;
120      v_sql varchar2(32767);
121    begin
122
123      v_sql := replace(stmt, ';', null);
124      pkg_pipeline.r_sql.cursor := dbms_sql.open_cursor;
125      dbms_sql.parse(pkg_pipeline.r_sql.cursor, v_sql, dbms_sql.native);
126      dbms_sql.describe_columns2(pkg_pipeline.r_sql.cursor,
127                                 pkg_pipeline.r_sql.column_cnt,
128                                 pkg_pipeline.r_sql.description);
129
130      -- define all the columns found to let Oracle know the datatypes.
131      for i in 1..pkg_pipeline.r_sql.column_cnt
132      loop
133
134        r_meta.typecode := sctx.atype.GetAttrElemInfo(
135                             i, r_meta.precision, r_meta.scale, r_meta.length,
136                             r_meta.csid, r_meta.csfrm, r_meta.type, r_meta.name
137                           );
138
139        case r_meta.typecode
140          when dbms_types.typecode_varchar2
141          then
142            dbms_sql.define_column(pkg_pipeline.r_sql.cursor, i, '', 32767);
143          when dbms_types.typecode_number
144          then
145            dbms_sql.define_column(pkg_pipeline.r_sql.cursor, i, cast(null as number));
146          when dbms_types.typecode_date
147          then
148            dbms_sql.define_column(pkg_pipeline.r_sql.cursor, i, cast(null as date));
149          when dbms_types.typecode_raw
150          then
151            dbms_sql.define_column_raw(pkg_pipeline.r_sql.cursor, i, cast(null as raw), r_meta.length);
152          when dbms_types.typecode_timestamp
153          then
154            dbms_sql.define_column(pkg_pipeline.r_sql.cursor, i, cast(null as timestamp));
155          when dbms_types.typecode_timestamp_tz
156          then
157            dbms_sql.define_column(pkg_pipeline.r_sql.cursor, i, cast(null as timestamp with time zone));
158          when dbms_types.typecode_timestamp_ltz
159          then
160            dbms_sql.define_column(pkg_pipeline.r_sql.cursor, i, cast(null as timestamp with local time zone));
161          when dbms_types.typecode_interval_ym
162          then
163            dbms_sql.define_column(pkg_pipeline.r_sql.cursor, i, cast(null as interval year to month));
164          when dbms_types.typecode_interval_ds
165          then
166            dbms_sql.define_column(pkg_pipeline.r_sql.cursor, i, cast(null as interval day to second));
167          when dbms_types.typecode_clob
168          then
169            case pkg_pipeline.r_sql.description(i).col_type
170              when 8
171              then
172                dbms_sql.define_column_long(pkg_pipeline.r_sql.cursor, i);
173              else
174                dbms_sql.define_column(pkg_pipeline.r_sql.cursor, i, cast(null as clob));
175            end case;
176        end case;
177      end loop;
178
179      -- execute the SQL.
180      pkg_pipeline.r_sql.execute := dbms_sql.execute(pkg_pipeline.r_sql.cursor);
181
182      return odciconst.success;
183
184    end ODCITablestart;
185
186
187    /*
188     * FETCH step.
189     */
190    member function ODCITablefetch(self   in out dyn_pipeline,
191                                   nrows  in     number,
192                                   rws    out    anydataset)
193      return number
194    is
195
196      /* Variables */
197      -- Buffers to hold values.
198      v_vc_col       varchar2(32767);
199      v_num_col      number;
200      v_date_col     date;
201      v_raw_col      raw(32767);
202      v_raw_error    number;
203      v_raw_len      integer;
204      v_int_ds_col   interval day to second;
205      v_int_ym_col   interval year to month;
206      v_ts_col       timestamp;
207      v_tstz_col     timestamp with time zone;
208      v_tsltz_col    timestamp with local time zone;
209      v_clob_col     clob;
210      v_clob_offset  integer := 0;
211      v_clob_len     integer;
212      -- Metadata
213      r_meta  pkg_pipeline.anytype_metadata_rec;
214
215    begin
216
217      if dbms_sql.fetch_rows( pkg_pipeline.r_sql.cursor ) > 0
218      then
219
220        -- Describe to get number and types of columns.
221        r_meta.typecode := self.atype.getinfo(
222                             r_meta.precision, r_meta.scale, r_meta.length,
223                             r_meta.csid, r_meta.csfrm, r_meta.schema,
224                             r_meta.name, r_meta.version, r_meta.attr_cnt
225                           );
226
227        anydataset.begincreate(dbms_types.typecode_object, self.atype, rws);
228        rws.addinstance();
229        rws.piecewise();
230
231        -- loop through each column extracting value.
232        for i in 1..pkg_pipeline.r_sql.column_cnt
233        loop
234
235          r_meta.typecode := self.atype.getattreleminfo(
236                               i, r_meta.precision, r_meta.scale, r_meta.length,
237                               r_meta.csid, r_meta.csfrm, r_meta.attr_type,
238                               r_meta.attr_name
239                             );
240
241          case r_meta.typecode
242            when dbms_types.typecode_varchar2
243            then
244              dbms_sql.column_value(pkg_pipeline.r_sql.cursor, i, v_vc_col);
245              rws.setvarchar2(v_vc_col);
246            when dbms_types.typecode_number
247            then
248              dbms_sql.column_value(pkg_pipeline.r_sql.cursor, i, v_num_col);
249              rws.setnumber(v_num_col);
250            when dbms_types.typecode_date
251            then
252              dbms_sql.column_value(pkg_pipeline.r_sql.cursor, i, v_date_col);
253              rws.setdate(v_date_col);
254            when dbms_types.typecode_raw
255            then
256              dbms_sql.column_value_raw(pkg_pipeline.r_sql.cursor, i, v_raw_col,
257                 v_raw_error, v_raw_len);
258              rws.setraw(v_raw_col);
259            when dbms_types.typecode_interval_ds
260            then
261              dbms_sql.column_value(pkg_pipeline.r_sql.cursor, i, v_int_ds_col);
262              rws.setintervalds(v_int_ds_col);
263            when dbms_types.typecode_interval_ym
264            then
265              dbms_sql.column_value(pkg_pipeline.r_sql.cursor, i, v_int_ym_col);
266              rws.setintervalym(v_int_ym_col);
267            when dbms_types.typecode_timestamp
268            then
269              dbms_sql.column_value(pkg_pipeline.r_sql.cursor, i, v_ts_col);
270              rws.settimestamp(v_ts_col);
271            when dbms_types.typecode_timestamp_tz
272            then
273              dbms_sql.column_value(pkg_pipeline.r_sql.cursor, i, v_tstz_col);
274              rws.settimestamptz(v_tstz_col);
275           when dbms_types.typecode_timestamp_ltz
276           then
277              dbms_sql.column_value(pkg_pipeline.r_sql.cursor, i, v_tsltz_col);
278              rws.settimestampltz(v_tsltz_col);
279           when dbms_types.typecode_clob
280           then
281             case pkg_pipeline.r_sql.description(i).col_type
282               when 8
283               then
284                 loop
285                   dbms_sql.column_value_long(pkg_pipeline.r_sql.cursor, i, 32767, v_clob_offset,
286                                              v_vc_col, v_clob_len);
287                   v_clob_col := v_clob_col || v_vc_col;
288                   v_clob_offset := v_clob_offset + 32767;
289                   exit when v_clob_len < 32767;
290                 end loop;
291               else
292                 dbms_sql.column_value(pkg_pipeline.r_sql.cursor, i, v_clob_col);
293             end case;
294             rws.setclob(v_clob_col);
295          end case;
296        end loop;
297
298        rws.endcreate();
299
300      end if;
301
302      return ODCIConst.Success;
303
304    end;
305
306    /*
307     * CLOSE step. close the cursor.
308     */
309    member function ODCITableClose(self in dyn_pipeline)
310      return number
311    is
312
313
314    begin
315      dbms_sql.close_cursor( pkg_pipeline.r_sql.cursor );
316      pkg_pipeline.r_sql := null;
317      return odciconst.success;
318    end ODCITableClose;
319
320  end;
321  /

Type body created. 
```

完成后，您可以查询如下：

```
SQL> select * from table(pkg_pipeline.querydb('select * from dual'));

D
-
X

SQL> select * from table(pkg_pipeline.querydb('select * from v$mystat where rownum <= 2'));

       SID STATISTIC#      VALUE
---------- ---------- ----------
       230          0          1
       230          1          1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T11:52:09.603

如果我理解正确，你想这样做：

```
select * from (select * from dual) 
```

...需要注意的是子查询在某种程度上是动态的？您可以使用 PL/SQL 块，使用引用游标来执行此操作：

```
declare
  subQuery         varchar2(1000);
  mainQuery        varchar2(1000) := 'select * from (';

  type myRefCursor is ref cursor;
  myResultset      myRefCursor;

  myField1         FIELDTYPE;
  ...
  myFieldN         FIELDTYPE;
begin
  -- Generate this dynamically
  subQuery := 'select * from dual';

  -- Create main query and open cursor
  mainQuery := mainQuery || subQuery || ')';
  open myResultset for mainQuery;

  -- Loop through records
  loop
    fetch myResultset into myField1, ..., myFieldN;
    exit when myResultset%NOTFOUND;

    -- Do something with the record data
    dbms_output.put_line(myField1 || ' ... ' || myFieldN);
  end loop;

  close myResultset;
end;
/ 
```

请注意`fetch into`，您可以一次填充整个记录，而不是使用单个变量，只要您可以定义记录的字段类型。也就是说，如果您创建了自定义类型，或者您的记录类型与架构中已有的表匹配。对于后者，您可以使用：

```
myRecord someTable%ROWTYPE; 
```

...在声明块中，然后将`fetch into`语句更改为：

```
fetch myResultset into myRecord; 
```

...并使用点表示法访问记录字段（例如，`myRecord.some_field_name`）。

您在评论中说动态 SQL 位来自其他查询的结果。因此，在我的示例代码中，您可以使用常规游标来循环这些数据以`subQuery`在每个实例中创建变量......尽管顺便说一句，有什么理由无法完成您想要实现的目标一个简单的`join`？

# asp.net-mvc - Razor - 访问异物的属性

> ID：14155845
> 
> 赞同：0
> 
> 时间：2013-01-04T10:59:20.803
> 
> 标签：asp.net-mvc, entity-framework, razor, asp.net-mvc-4

**这个问题与带有实体框架的 MVC4 项目有关（数据库优先）**

我将“公司”对象的（EF）集合传递给视图。

我需要显示在每个“公司”对象中存储为 int（外键）的“主要用户”的**名称。**

我能够像这样获得 PrimaryUserID：

```
@foreach (var item in Model)
{
      <div>@item.PrimaryUserID</div>     
} 
```

但我不知道如何从 ID 访问 PrimaryUser 对象？

有没有办法在不将包含 PrimaryUser 对象的自定义模型传递给我的视图的情况下做到这一点？

任何帮助将非常感激！

//EDIT - 这是我当前将集合传递给我的视图的方式

```
 public ActionResult Installers(int id = 0)
    {
        CompanyType installer = db.CompanyTypes.Single(ct => ct.Description == "Installer");

        return View(installer.Companies.ToList());
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:03:00.847

您是否在 EDMX 中为您的用户表设置了导航属性（大概是什么）？`<div>@item.PrimaryUser.Name</div>`通常，如果设置好了，您就可以做类似的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:03:25.043

您可以在模型中使用导航属性。

确保您已在 EF 查询中包含该属性。（这称为“急切加载”）

```
public ActionResult Installers(int id = 0)
{
    CompanyType installer =
      db.CompanyTypes
        .Include( ct => ct.Companies.Select( c => c.PrimaryUser ) )
        .Single( ct => ct.Description == "Installer" );

    return View( installer.Companies.ToList() );
} 
```

然后只需访问标记中的属性：

```
<div>@item.PrimaryUser.Name</div> 
```

# join - Hive Join - 减速器问题

> ID：14155847
> 
> 赞同：0
> 
> 时间：2013-01-04T10:59:31.477
> 
> 标签：join, hadoop, hive

我正在尝试加入 hive 中的两个大表。即使我将减速器的数量设置为 500，连接也只发生在最后一个减速器上。由于那个工作被杀死。我知道相同的密钥用于相同的减速器。在这两个表中，都有许多唯一键。你能告诉我如何解决这个问题吗？你也可以告诉我为什么 map reduce 需要最后一个 reducer 来执行连接。

# magento-1.7 - 尝试复制产品时出现 Magento 错误

> ID：14155848
> 
> 赞同：2
> 
> 时间：2013-01-04T10:59:37.627
> 
> 标签：magento-1.7, magento

我正在使用magento 1.7。我有问题，我不知道为什么会这样。我只是在后端打开产品进行编辑然后单击重复然后我收到以下错误

```
Warning: Illegal string offset 'new_file' in D:\wamp\www\easyshop\app\code\core\Mage\Catalog\Model\Product\Attribute\Backend\Media.php on line 158 
```

当我尝试以下代码来调试文件时：

```
print_r($newImages);
die; 
```

然后我得到了以下数据

```
Array
(
    [/s/a/samsung_galaxy_s2_front1.jpg] => /s/a/samsung_galaxy_s2_front1_4.jpg
    [/s/g/sgs2p1.jpg] => /s/g/sgs2p1_4.jpg
    [/s/g/sgs2_11.jpg] => /s/g/sgs2_11_4.jpg
    [/s/g/sgs2-4386.jpg] => /s/g/sgs2-4386_4.jpg
) 
```

我的东西数组键是错误的，你能给出解决这个问题的解决方案吗

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T12:59:13.770

我在 1.7.02 上遇到了同样的问题。我找到的解决方案是更改 Magento（恕我直言）的错误代码。

在 Mage_Catalog_Model_Product_Attribute_Backend_Media 我已经更改了您找到的行：

```
 // For duplicating we need copy original images.
        $duplicate = array();
        foreach ($value['images'] as &$image) {
            if (!isset($image['value_id'])) {
                continue;
            }
            $duplicate[$image['value_id']] = $this->_copyImage($image['file']);
            $newImages[$image['file']] = $duplicate[$image['value_id']];
        } 
```

为了：

```
 // For duplicating we need copy original images.
        $duplicate = array();
        foreach ($value['images'] as &$image) {
            if (!isset($image['value_id'])) {
                continue;
            }
            $duplicate[$image['value_id']] = $this->_copyImage($image['file']);
            $newImages[$image['file']] = array();
            $newImages[$image['file']]['new_file'] = $duplicate[$image['value_id']];
            $newImages[$image['file']]['label'] = $image['label'];
        } 
```

它对我有用......图像现在被正确复制并在新产品上启用。

# apache - 奇怪的.htaccess ErrorDocument 错误

> ID：14155849
> 
> 赞同：1
> 
> 时间：2013-01-04T10:59:38.660
> 
> 标签：apache, .htaccess

我的 .htaccess 文件中有以下行，该文件位于我的 PC 上`G:/xampp/htdocs/project/public_html/.htaccess`

```
ErrorDocument 404 /404.html 
```

因此，当我输入任何无效地址时，例如`http://localhost/project/public_html/blabla`，会出现以下消息：

```
Not Found

The requested URL /project/public_html/blabla was not found on this server.

Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request.
Apache/2.2.17 (Win32) mod_ssl/2.2.17 OpenSSL/0.9.8o PHP/5.3.4 mod_perl/2.0.4 Perl/v5.10.1 Server at localhost Port 80 
```

但这不是我的 404.html 页面！

但是当我编辑`ErrorDocument`语法并包含完整链接时，即：

```
ErrorDocument 404 http://localhost/project/public_html/404.html 
```

但这会将不存在的链接正确重定向到 404.html，但重定向不是我想要的！我想要一个简单的 404 错误页面！

还有一件更奇怪的事情是，当我从 .htaccess 文件中完全删除该行时，错误变为：

```
Object not found!

The requested URL was not found on this server. If you entered the URL manually please check your spelling and try again.

If you think this is a server error, please contact the webmaster.
Error 404
localhost
1/4/2013 4:27:46 PM
Apache/2.2.17 (Win32) mod_ssl/2.2.17 OpenSSL/0.9.8o PHP/5.3.4 mod_perl/2.0.4 Perl/v5.10.1 
```

令人毛骨悚然，是吗？所以有人可以帮助我并告诉我发生了什么事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:10:57.307

`/`引用网络根目录，因此您的路径不太有意义。将文件移动到 Web 根目录，或更改路径以反映相对于 Web 根目录的路径。（要么将文件移动到`/xampp/htdocs`，要么将路径更改为`/project/public_html/404.html`。）

# c# - 如何在 MDI 表单的所有元素的顶部显示子表单

> ID：14155850
> 
> 赞同：0
> 
> 时间：2013-01-04T10:59:42.037
> 
> 标签：c#, vb.net, parent-child, mdi, dock

我创建了一个 MDI 表单和一个子表单。但是，我的 MDI 表单包含停靠在顶部的功能区菜单、停靠在左侧的侧边栏和停靠以填充的面板容器。

现在，当我调用子窗体时，它会显示在所有这些 MDI 停靠控件的后面。

在显示子表单后，如果我让`panel_container1.visible = false`子表单显示在那个地方。

我不想将其他控件的可见性设置为 false，然后再设置为 true。

有什么方法可以让子表单自动出现在所有这些停靠项目的顶部？

# wcf - WCF 会话并不特定于特定用户

> ID：14155852
> 
> 赞同：0
> 
> 时间：2013-01-04T10:59:55.203
> 
> 标签：wcf, wcf-sessions

WCF 函数

```
 public void SetSession(string name)
    {
            HttpContext.Current.Session["abc"]=name;
    }
    public string GetSession(string name)
    {
            return HttpContext.Current.Session["abc"].ToString();
    } 
```

代理

```
 using (ServiceReference1.BlackjackClient proxy = new ServiceReference1.BlackjackClient())
        {
            proxy.SetSession("Hello");
        } 
```

我的问题是当多个客户端访问该服务时，每个客户端都访问最后设置的会话。会话不是基于浏览器请求并且不识别客户端。哪个客户端发送了哪个请求。我应该怎么做才能使它们特定于每个客户。意味着每个客户都必须有自己的会话。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:16:16.817

该服务无法知道哪个客户端正在调用该服务。常规的 asp.net 使用`Session`使用 cookie，该 cookie 识别每个请求并进行一些内部巫术以将请求映射到正确的会话。

在您的情况下，您必须使用客户端登录来确保服务可以识别请求，但这并不能自行解决问题。

由于您可以访问服务实现，因此最简单的解决方案可能是将会话标识符 (a `Guid`) 存储在客户端中，然后将其与每个请求一起发送到 Web 服务，从而改变

```
 public void SetSession(string name)
    {
            HttpContext.Current.Session["abc"]=name;
    }
    public string GetSession(string name)
    {
            return HttpContext.Current.Session["abc"].ToString();
    } 
```

类似于

```
public void SetSession(string name, Guid sessionId)
{
        HttpContext.Current.Session[sessionId + "_abc"]=name;
}
public string GetSession(string name, Guid sessionId)
{
        return HttpContext.Current.Session[sessionId + "_abc"].ToString();
} 
```

像这样修改方法签名虽然相当难看，但想法是，客户端帮助服务器识别调用者，从而识别会话。

使用传输协议来识别调用者会更简洁，因此如果您正在创建 HTTP 服务，您可以使用一些 http 标头（可能是授权）来包含会话标识符。如果您使用的是 SOAP，则消息头可能包含相同的信息。

会话标识符也可以在服务中通过名为`Guid CreateSession()`. 但是也可以在客户端中创建一个 Guid。

但同样：您需要在客户端中存储一些唯一的会话 ID 或用户凭据，并在每个请求中将它们传达给服务器。

# java - 浏览器如何处理小程序？

> ID：14155854
> 
> 赞同：0
> 
> 时间：2013-01-04T10:59:56.827
> 
> 标签：java, browser, applet, japplet

我想知道当我的浏览器进入这样的网页时会发生什么。当我尝试用谷歌搜索“浏览器”和“小程序”时，它主要找到了如何将小程序添加到浏览器和故障排除，但不知道它是如何工作的。

```
<html>
<head><title>My Applet</title></head>
<body>
    <applet code="org/mypackage/MainClass.class" archive="MyApplet.jar,libA.jar,libB.jar" width="1600" height="860"></applet>
</body>
</html> 
```

如果网页是远程的，那么我猜浏览器必须将`archive`参数中所有提到的 jar 下载到某个临时文件夹，然后浏览器要求 Java 插件接下来进行处理。所以插件会找到那个已经`MainClass`并且会开始执行Java程序的jar。

**我的理解正确吗？**

我的小程序需要许多外部 jar，所以我只将我的类打包到`MyApplet.jar`. 然后放在一个单独的文件夹中

```
MyApplet.jar
libA.jar
libB.jar
applet.hmtl 
```

并双击`applet.html`

在 MyApplet.jar 的清单中有

```
Rsrc-Class-Path: ./ libA.jar libB.jar
Class-Path: . 
```

**真的有必要将这些行放在清单中吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:22:32.960

> 我的理解正确吗？

基本上，禁止使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)部署的小程序并根据需要或以编程方式懒惰地下载库 Jars。

> 真的有必要将这些行放在清单中吗？

如果 Jars 如下所示，则不需要在清单中引用它们。

*   列在元素的`archive`属性中。`applet`
*   作为一个元素列在`resources`JNLP 部分中。`jar`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T07:29:32.110

这是从 Java 控制台回答我自己的问题：

```
CacheEntry[http://localhost/applet/MyApplet.jar]: updateAvailable=true,lastModified=Tue Jan 08 16:10:19 KST 2013,length=2128455
network: Connecting http://localhost/applet/MyApplet.jar with proxy=DIRECT
network: Connecting http://localhost:80/ with proxy=DIRECT
network: Downloading resource: http://localhost/applet/MyApplet.jar
    Content-Length: 2,128,450
    Content-Encoding: null

network: Wrote URL http://localhost/applet/MyApplet.jar to File C:\Users\Nikolay\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\0\1367c940-4740e460-temp
security: The jar file isnt signed so the blacklist check will be skipped
security: Trusted libraries list file not found

cache: Replacing MemoryCache entry (cnt=0) for http://localhost/applet/MyApplet.jarwas=com.sun.deploy.cache.CacheEntry (749595) now=com.sun.deploy.cache.CacheEntry (15535897)
basic: Applet loaded.
basic: Applet resized and added to parent container
basic: PERF: AppletExecutionRunnable - applet.init() BEGIN ; jvmLaunch dt 1039162 us, pluginInit dt 903077 us, TotalTime: 1942239 us 
```

# c# - 如果在 WCF 中跨越 maxConCurrentInstances，我可以避免排队吗？

> ID：14155862
> 
> 赞同：0
> 
> 时间：2013-01-04T11:00:28.163
> 
> 标签：c#, wcf

我的要求如下：服务只能服务一个客户。如果额外的客户端尝试提供呼叫服务，它应该以错误/异常（或错误代码）通知客户端。

MaxConCurrentInstances 可以一次限制请求的数量，但我不想将来自其他客户端的请求排队。我只是想以异常或错误终止该请求？

是否可以使用 MaxConCurrentInstances 来实现，还是我需要使用其他任何东西？

提前致谢， 乌杰瓦尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:22:17.080

有两种方法怎么样 -*网关*方法，它将设置一个标志并输入*真实*方法，为第一个用户工作并在标志打开时为其他用户抛出异常/返回 false？然后，当真正的方法完成时，它会放下标志，另一个“第一个”用户可以使用该方法吗？

# tfs - 如何使用 tfs Api 查找应用于项目的流程模板

> ID：14155865
> 
> 赞同：0
> 
> 时间：2013-01-04T11:00:33.970
> 
> 标签：tfs

我已经看到了可能的链接，但它们都不能正常工作。在所有情况下，templateid 都为-1 或 processtemplate 为空。

```
 private ProjectProperty[] GetProcessTemplateDetailsForTheSelectedProject(string prjname)
    {
        var vcs = _tfs.GetService<VersionControlServer>();
        var ics = _tfs.GetService<ICommonStructureService>();
        ProjectProperty[] ProjectProperties = null;

        var p = vcs.GetTeamProject(prjname);
        string ProjectName = string.Empty;
        string ProjectState = String.Empty;
        int templateId = 0;
        ProjectProperties = null;

        ics.GetProjectProperties(p.ArtifactUri.AbsoluteUri, out ProjectName, out ProjectState, out templateId, out ProjectProperties);
        IProcessTemplates processTemplates = (IProcessTemplates)_tfs.GetService(typeof(IProcessTemplates));

        XmlNode node = processTemplates.GetTemplateNames();

        return ProjectProperties;
    } 
```

请在这方面提供帮助。我想找出以编程方式应用于项目的流程模板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:57:42.273

如果在上传到 TFS 之前为流程模板指定了名称，则您只能获取流程模板名称。

![在此处输入图像描述](../Images/bdbc1dcd26351cf07af466ee25a0fc20.png)

正如您在图像中看到的，这里有一个属性“Process Template”，它有一个值，即模板的名称。如果您查找不存在的属性，api 将返回 -1，这就是您使用上面的代码运行的内容。

此处博客链接中的代码将再次帮助您获取流程模板名称，前提是您在上传流程模板之前为其命名。[http://geekswithblogs.net/TarunArora/archive/2011/11/15/tfs-api-process-template-currently-applied-to-the-team-project.aspx](http://geekswithblogs.net/TarunArora/archive/2011/11/15/tfs-api-process-template-currently-applied-to-the-team-project.aspx)

请注意，TFS 2012 中的所有流程模板都已默认命名。TFS 2010 并非如此。

希望这能回答你的问题。

# joomla - Joomla calendar.setup 错误

> ID：14155871
> 
> 赞同：1
> 
> 时间：2013-01-04T11:00:51.257
> 
> 标签：joomla

通常在 Joomla 的管理员中，网站挂起，我收到一条弹出错误消息，提示在 Calendar.setup 中找不到任何内容

似乎很多其他 Joomla 用户都遇到了这个问题，他们都使用不同的主题和扩展。在我搜索过的任何论坛上似乎都没有决定性的答案。想知道这里的聪明大脑是否可以解决这个问题？:)

就个人而言，我使用的是 Joomla 2.5 并且没有安装日历扩展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T08:40:37.787

尝试更改您的所见即所得编辑器：站点 -> 全局配置 -> 默认编辑器。更改它们后，按保存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T15:15:36.577

你需要这个

```
<jdoc:include type="component" /> 
```

# java-me - 在J2ME中如何找到模拟器的能力来检查它是否可以播放某些媒体文件

> ID：14155875
> 
> 赞同：0
> 
> 时间：2013-01-04T11:01:10.000
> 
> 标签：java-me, media-player, emulation, media, mmapi

在 J2ME 中，我如何知道模拟器播放某些媒体文件的能力，尽管它是 .mp3 或 .wav 或任何其他文件

我正在将 Netbeans 与 WTK 模拟器和诺基亚 SDK 1.1.0 模拟器一起使用....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:18:00.793

试试这个代码。它使用您在上一个问题中使用的相同[Manager API 。](http://www.blackberry.com/developers/docs/5.0.0api/javax/microedition/media/Manager.html#getSupportedContentTypes%28java.lang.String%29)

```
import javax.microedition.media.Manager; 
```

...

```
 String supportedTypes[] = Manager.getSupportedContentTypes(null);
  for (int i = 0; i < supportedTypes.length; i++) {
     if (supportedTypes[i].startsWith("audio")) {
        System.out.println("Device supports " + supportedTypes[i]);
     }
  } 
```

为我运行此程序在 BlackBerry 9550 上产生以下输出：

```
[0.0] Device supports audio/x-tone-seq
[0.0] Device supports audio/midi
[0.0] Device supports audio/mpeg
[0.0] Device supports audio/x-wav
[0.0] Device supports audio/amr
[0.0] Device supports audio/x-gsm
[0.0] Device supports audio/mp4
[0.0] Device supports audio/aac
[0.0] Device supports audio/x-ms-wma 
```

# mysql - 使用条件左连接

> ID：14155877
> 
> 赞同：0
> 
> 时间：2013-01-04T11:01:21.717
> 
> 标签：mysql, select, join, left-join

我有这个问题。

我需要从我的匹配表中获取这些字段：

```
date, points 
```

然后`epos_id`我的匹配表中也有一个字段..

我有另一个`rbpos_epos`表，其中有`epos_id`和`location`字段。

我需要`location`从`rbpos_epos` 使用连接中获取 .. 是这样的：

```
SELECT matching.date, matching.points, matching.time,matching.location,matching.epos_id,rbpos_epos.epos_id,rbpos_epos.location
FROM matching  WHERE matching.user_id="'.$id_user.'"
LEFT JOIN rbpos_epos where matching.epos_id=rbpos_epos.epos_id; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:02:19.270

使用 on 代替 -

```
 SELECT matching.date, matching.points, matching.time,matching.location,matching.epos_id,rbpos_epos.epos_id,rbpos_epos.location
   FROM matching LEFT JOIN rbpos_epos ON matching.epos_id=rbpos_epos.epos_id      
      WHERE matching.user_id="'.$id_user.'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:05:17.410

试试这个：

```
SELECT m.date, m.points, m.time,m.location,m.epos_id,re.epos_id,re.location
FROM matching  m 
LEFT JOIN rbpos_epos re ON m.epos_id=re.epos_id
WHERE m.user_id= 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T11:07:15.857

```
SELECT 
    first_table.date,
    first_table.points,
    first_table.time,
    first_table.location,
    first_table.epos_id,
    rbpos_epos.epos_id,
    rbpos_epos.location
FROM
    first_table
LEFT JOIN
    rbpos_epos ON first_table.epos_id = rbpos_epos.epos_id
WHERE
    first_table.user_id = "'.$id_user.'"; 
```

# objective-c - 如何将基于委托的回调系统转换为基于块的回调系统？

> ID：14155878
> 
> 赞同：6
> 
> 时间：2013-01-04T11:01:29.603
> 
> 标签：objective-c, delegates, objective-c-blocks

我有一个类，它有一个基于委托的系统，用于发送不同类型的请求。它使用委托来告诉对象请求何时完成，以及它是否成功或错误。

现在，我还必须检查它是什么类型的请求以响应采取适当的措施。

我有一个包装类，它应该给我一个基于块的接口。

我将完成块和错误块传递给应在内部使用此基于委托的类的请求方法。

当响应到来时，应该自动调用该请求类型的适当处理程序，并取决于成功和错误。

我在 SO 上看到了一个类似的问题，但对我来说有点不清楚，所以请大致了解如何去做，而不是立即将其标记为重复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:58:31.340

这是一种方法。使用此[RAExpendable](https://github.com/evadne/RAExpendable/tree/master/RAExpendable)类来动态构建具有基于块的实现的委托。

假设您的代表是：

```
@protocol XDelegate
-(void) foo:(id)response;
@end 
```

[将来自https://github.com/evadne/RAExpendable](https://github.com/evadne/RAExpendable)的RAExpendable.h、RAExpendable.m 添加到您的项目中。动态添加委托方法：

```
 RAExpendable *expendable = [RAExpendable new];
    [expendable addMethodForSelector:@selector(foo:) types:"v@:@" block:^(id x, SEL sel, id response){
        NSLog(@"response is %@", response);
    }]; 
```

并将`expendable`班级设置为您的代表：

```
 someObject.delegate = expendable; 
```

现在，如果你这样做：

```
 [expendable performSelector:@selector(foo:) withObject:@"OK"]; 
```

你得到了字符串`response is OK`。将 NSLog 替换为您认为合适的任何成功/失败实现。从现在开始，当您调用 时`foo:`，将改为执行该块。

如果您想针对您的用例进行修改，请注意此示例的参数是`v@:@`，根据运行时的[类型编码](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html)指南，这意味着：void return、self、SEL、object。`self`并且`SEL`是每个 Objective-C 方法中存在的两个隐藏参数，第三个参数是该方法的第一个非隐藏参数。块的签名必须与方法的签名匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T11:40:22.650

使用[REKit](https://github.com/zuccoi/REKit)，您可以动态地创建委托，如下所示：

```
id dynamicDelegate;
dynamicDelegate = [[NSObject alloc] init];
[dynamicDelegate respondsToSelector:@selector(foo:) withKey:nil usingBlock:^(id receiver, id response) {
    NSLog(@"response is %@", response);
}];
someObject.delegate = dynamicDelegate; 
```

# php - 我的 htaccess 文件破坏了我的 CSS 和 JavaScript 文件

> ID：14155879
> 
> 赞同：0
> 
> 时间：2013-01-04T11:01:42.050
> 
> 标签：php, .htaccess, mod-rewrite

我的 .htaccess 中遗漏了一些东西，

```
重写引擎开启
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# 类别
    RewriteRule ^categories/(.*)$ /newwebsite/rewrite_cats.php?category=$1 [L,NC]

# 产品和服务
    重写规则 ^(.*)/(.*)$ /newwebsite/rewrite.php?sub=$1&second=$2 [L,NC]

```

我不知道这有什么问题，但是当我访问我的网站时，我看不到正在应用的样式和 JavaScript，如果我删除这一行，它就可以工作：

```
    RewriteRule ^categories/(.*)$ /newwebsite/rewrite_cats.php?category=$1 [L,NC]

```

我在 Chrome 控制台中遇到的错误如下：

```
资源解释为图像，但使用 MIME 类型 text/html 传输：
资源解释为脚本，但使用 MIME 类型 text/html 传输：
资源解释为样式表，但使用 MIME 类型 text/html 传输：

```

如果我删除或评论第一条 RewriteRule 行，一切正常。我不知道发生了什么，有人可以帮助我吗？

我已经意识到这是关于结合这两个规则的东西。当我评论第二个时，一切都很完美。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:07:51.680

添加

```
RewriteCond  %{REQUEST_FILENAME} !-f
RewriteCond  %{REQUEST_FILENAME} !-d 
```

在你的规则之前

哦，我希望你为你的 CSS 使用**绝对**路径

# android - 如何使用 Android 的 ListView 获取可滚动的背景图像

> ID：14155881
> 
> 赞同：2
> 
> 时间：2013-01-04T11:01:49.677
> 
> 标签：android, listview, android-listview, scroll

我有一个可平铺的图像，我想用作`ListView`. `setCacheColorHint(android.R.color.transparent)`为了正确查看背景图像，我已经使用`setBackgroundDrawable()`.

我的问题是当我滚动时`ListView`，图像保持在原位并且不会滚动。我假设这是正常行为，但我希望图像与文本一起滚动。

有什么办法可以做到这一点，而无需自行滚动`ListView`或设置每个单元格视图的背景？我没有为此使用 XML，因为我希望它是动态的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:11:15.330

创建一个类并用 ListView :: 扩展它

```
public class MyCustomListView extends ListView
{
        private Bitmap background;

        public MyCustomListView(Context context, AttributeSet attrs) 
        {
            super(context, attrs);
            background = BitmapFactory.decodeResource(getResources(), R.drawable.yourImage);//yourImage means your listView Background which you want to move
        }

        @Override
        protected void dispatchDraw(Canvas canvas) 
        {
            int count = getChildCount();
            int top = count > 0 ? getChildAt(0).getTop() : 0;
            int backgroundWidth = background.getWidth();
            int backgroundHeight = background.getHeight();
            int width = getWidth();
            int height = getHeight();

            for (int y = top; y < height; y += backgroundHeight)
            {
                for (int x = 0; x < width; x += backgroundWidth)
                {
                    canvas.drawBitmap(background, x, y, null);
                }
            }
            super.dispatchDraw(canvas);
        }
} 
```

现在在您的 XML 文件中，取一个这样的列表视图 ::
//根据您的要求设置其他属性

```
 <com.test.MyCustomListView
    android:id="@+id/listview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
 </com.test.MyCustomListView> 
```

# iphone - 应用程序启动时如何从文档目录中检索数据？

> ID：14155882
> 
> 赞同：1
> 
> 时间：2013-01-04T11:01:49.740
> 
> 标签：iphone, ios, nsdocumentdirectory

我创建了录制声音并在`tableview`. 在该应用程序中，当声音被记录时，`filepath`它将存储在一个数组中，我使用该数组来填充我的`tableview`. 但我的问题是，当我关闭应用程序时，我的数组将为空，并且我丢失了录制的文件。

所以现在当我第二次打开我的应用程序时如何获取我的录制文件。我将声音文件存储在文档目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:03:40.283

将数组存储在`NSUserDefaults`. 检索并将数组存储在`NSUserDefaults` .. 中查看示例`NSUserDefaults`

在`AppDelegate.h`文件中只声明变量...

```
 NSUserDefaults  *userDefaults;
    NSMutableArray *yourArray;
    after... 
```

`AppDelegate.m`填入`applicationDidFinishLonching:`法_

```
 userDefaults = [NSUserDefaults standardUserDefaults];
    NSData *dataRepresentingtblArrayForSearch = [userDefaults objectForKey:@"yourArray"];
    if (dataRepresentingtblArrayForSearch != nil) {
        NSArray *oldSavedArray = [NSKeyedUnarchiver unarchiveObjectWithData:dataRepresentingtblArrayForSearch];
        if (oldSavedArray != nil)
            yourArray = [[NSMutableArray alloc] initWithArray:oldSavedArray];
        else
            yourArray = [[NSMutableArray alloc] init];
    } else {
        yourArray = [[NSMutableArray alloc] init];
    }
    [yourArray retain]; 
```

之后，当您想在此`UserDefaults`使用波纹管代码中插入数据时...

```
 [appDelegate.yourArray addObject:yourDataString];///set your value or anything which you want to store here...
    NSData *data=[NSKeyedArchiver archivedDataWithRootObject:appDelegate.yourArray];
    [appDelegate.userDefaults setObject:data forKey:@"yourArray"];
    [appDelegate.userDefaults synchronize]; 
```

我希望这可以帮助你...

# asp.net-mvc-3 - 为什么我的模型所需的属性在 MVC3 中不起作用

> ID：14155883
> 
> 赞同：0
> 
> 时间：2013-01-04T11:01:52.830
> 
> 标签：asp.net-mvc-3, validation

在我的模型所在的类文件中，我具有必需的属性，例如：

```
[Required]
        [Range(0, 99, ErrorMessage = "Sorry, you must select a range between 0 - 99.")]
        public int MaxConcurrentUsers { get; set; } 
```

因此，您会认为，当我单击页面上的提交按钮以发布值时，因为我为 MaxConcurrentUsers 键入了不正确的值，所以它不会到达我的 C# 代码中的 actionResult 方法。但确实如此。我注意到的一件事是我的模型状态 .valid 是错误的，但我希望客户端阻止它使用该方法。我究竟做错了什么？

**我的模型**

```
//------------------------------------------------------------------------------
// <auto-generated>
//    This code was generated from a template.
//
//    Manual changes to this file may cause unexpected behavior in your application.
//    Manual changes to this file will be overwritten if the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace UserManager.Models
{
    using System;
    using System.Collections.Generic;
    using System.ComponentModel.DataAnnotations;

    public partial class vw_UserManager_Model
    {
        public string rowtype { get; set; }
        public System.Guid applicationid { get; set; }
        public System.Guid userid { get; set; }

    //    [StringLength(12, MinimumLength = 6,
    //ErrorMessage = "Username must be between 6 and 12 characters.")]
        public string UserName { get; set; }

        [Required]
        [Range(0, 99, ErrorMessage = "Sorry, you must select a range between 0 - 99.")]
        public int MaxConcurrentUsers { get; set; }

        [Required(ErrorMessage = "First name is a required field")]
        [Display(Name = "First name")]
        public string firstname { get; set; }

        [Required(ErrorMessage = "Last name is a required field")]
        [Display(Name = "Last name")]
        public string lastname { get; set; }

        public string salutation { get; set; }

        [Required]
        [DataType(DataType.Password)]
        [Display(Name = "Password")]
        public string password { get; set; }

        [Required(ErrorMessage = "Email is required.")]
        [DataType(DataType.EmailAddress)]
        [Display(Name = "Email address")]
        public string email { get; set; }

        public string group_name { get; set; }
        public Nullable<long> group_id { get; set; }
        public int moduleid { get; set; }
        public Nullable<int> session_status { get; set; }
        public Nullable<int> islockedout { get; set; }
        public Nullable<bool> isactive { get; set; }

        public bool IsApproved { get; set; }

        public bool alf { get; set; }
        public bool brad { get; set; }

        public string module_name { get; set; }

        public string CompanyName { get; set; }
        public string CompanySearch { get; set; }

        public string selected_module { get; set; }
        public string selected_group { get; set; }

        public string selected_moduleAlf { get; set; }
        public string selected_moduleBrad { get; set; }

        public string selected_groupAlf { get; set; }
        public string selected_groupBrad { get; set; }
    }
} 
```

**我的观点**

```
@model UserManager.Models.vw_UserManager_Model 
<h2 style="padding-left: 25px;">
    Create user</h2>
@using (Html.BeginForm())
{
    <!-- ALF/BRAD selection -->
    @Html.ValidationSummary(true)
    <fieldset style="width: 400px; padding-left: 15px;">
        <legend>Select module type:</legend>
        <div class="module-selection">
            @Html.Label("Select ALF")
            <input type="checkbox" checked="checked" id="chkAlf" name="selection" value="Alf"
                onclick="chkSelection()" />
            @Html.Label("Select BRAD")
            <input type="checkbox" id="chkBrad" name="selection" value="Brad" onclick="chkSelection()" />
        </div>
    </fieldset>

    <!-- Module selection -->
    <fieldset style="width: 400px; padding-left: 15px;">
        <legend>Select module:</legend>
        <div id="alfModules">
            @{Html.RenderAction("_CreateUserModulesAlf", "UserManager");}
        </div>
        <br />
        <div id="bradModules">
            @{Html.RenderAction("_CreateUserModulesBrad", "UserManager");}
        </div>
    </fieldset>

    <!-- Check if group exists -->
    <fieldset style="width: 400px; padding-left: 15px;">
        <legend>Group Checker</legend>
        <div id="createuser-groupnamesearch">
            @{Html.RenderAction("_txtGroupSearchForm", "UserManager");}
        </div>
    </fieldset>

    <fieldset style="width: 400px; padding-left: 15px;">
        <legend>New User Details</legend>
        <div class="editor-label">
            @Html.LabelFor(Model => Model.salutation)
        </div>
        <div class="editor-field">
            @Html.DropDownListFor(Model => Model.salutation, new List<SelectListItem>
                     {
                        new SelectListItem{ Text="Mr", Value = "Mr" }, 
                        new SelectListItem{ Text="Mrs", Value = "Mrs" },
                        new SelectListItem{ Text="Miss", Value = "Miss" },
                        new SelectListItem{ Text="Ms", Value = "Ms" },
                        new SelectListItem{ Text="Dr", Value = "Dr" }
                     })
            @Html.ValidationMessageFor(model => Model.salutation)
        </div>
        <div id="createuser-usernamesearch">
            @{Html.RenderAction("_txtUsernameSearch", "UserManager");}
        </div>
        <div class="editor-label">
            @Html.Label("Firstname")
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => Model.firstname)
            @Html.ValidationMessageFor(model => Model.firstname)
        </div>
        <div class="editor-label">
            @Html.Label("Surname")
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => Model.lastname)
            @Html.ValidationMessageFor(model => Model.lastname)
        </div>
        <div class="editor-label">
            @Html.Label("Password")
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => Model.password)
            @Html.ValidationMessageFor(model => Model.password)
        </div>
        <div class="editor-label">
            @Html.Label("Email")
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => Model.email)
            @Html.ValidationMessageFor(model => Model.email)
        </div>
        <div class="editor-label">
            @Html.Label("Is active")
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => Model.isactive)
            @Html.ValidationMessageFor(model => Model.isactive)
        </div>
        <div class="editor-label">
            @Html.Label("Maximum concurrent users")
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => Model.MaxConcurrentUsers)
            @Html.ValidationMessageFor(model => Model.MaxConcurrentUsers, "Enter a number between 0-99.")
        </div>
        <div id="moduleSelection">
            @Html.HiddenFor(Model => Model.selected_moduleAlf, new { id = "hdnModuleAlf" })
            @Html.HiddenFor(Model => Model.selected_moduleBrad, new { id = "hdnModuleBrad" })
        </div>
        <input type="submit" value="Create" onclick="return submitWith();" />
        <span id="validationMessage"></span>
        <br />
        <br />
        @Html.ActionLink("Back to List", "Index")
    </fieldset>

    <div>
        @Html.ValidationSummary()
    </div>

}
<script type="text/javascript">

    // Count checkboxes that are checked.
    function submitWith() {
        var checkedCount = $("input:checked").length;
        var valid = checkedCount > 0;

        // Check that one checkbox is checked first
        if (!valid) { // IF false
            $('#validationMessage').html('You must select at least one option').css("background-color", "red");
        }

        // Second check ALF
        else if ($('.module-selection #chkAlf').is(':checked')) {
            if ($("#txtGroupnameExistsAlf").val() == "Alf Group doesn't exist.") {
                valid = false;
                $('#validationMessage').html('Group must exist in ALF Database first').css("background-color", "red");
            }
            if ($("#txtGroupnameExistsAlf").val() == "") {
                valid = false;
                $('#validationMessage').html('A group must be picked when creating a new user.').css("background-color", "red");
            }
        }

        // Third check
        else if ($('.module-selection #chkBrad').is(':checked')) {
            if ($("#txtGroupnameExistsBrad").val() == "Brad Group doesn't exist.") {
                valid = false;
                $('#validationMessage').html('Group must exist in BRAD Database first').css("background-color", "red");
            }
            if ($("#txtGroupnameExistsBrad").val() == "") {
                valid = false;
                $('#validationMessage').html('A group must be picked when creating a new user.').css("background-color", "red");
            }
        }

        else {
            valid = true;
        }

        return valid;
    }

    function chkSelection() {
//        alert("check selection");
        filters = new Object();

        if ($('.module-selection #chkAlf').is(':checked')) {
            // Show Div
            $("#alfModules").show();
            $("#groupname-checker-alf").show();

            // Show username checker for Alf
            $("#username-checker-alf").show();
            // Set ALF model property to true
            $("#hdnAlf").val("true");
            // Set alf value for one to be passed to Ajax request
            filters.alf = 1;

            var selectedVal = $("#ddlSelectedAlf :selected").val();
            $('#hdnModuleAlf').val(selectedVal);

        }
        else {
            $("#alfModules").hide();
            $("#groupname-checker-alf").hide();
            $("#hdnAlf").val("false");
            $("#username-checker-alf").hide();
            filters.alf = 0;

            $('#hdnModuleAlf').val("false");
            $("#txtGroupnameExistsAlf").val("").css("background-color", "white");
        }

        if ($('.module-selection #chkBrad').is(':checked')) {
            // Show Div
            $("#bradModules").show();
            $("#groupname-checker-brad").show();
            // Show username checker for Alf
            $("#username-checker-brad").show();
            // Set alf value for one to be passed to Ajax request
            filters.brad = 1;

            var selectedVal = $("#ddlSelectedBrad :selected").val();
            $('#hdnModuleBrad').val(selectedVal);

        }
        else {
            $("#bradModules").hide();
            $("#groupname-checker-brad").hide();
            $("#hdnBrad").val("false");
            $("#username-checker-brad").hide();
            filters.brad = 0;

            $('#hdnModuleBrad').val("false");
            $("#txtGroupnameExistsBrad").val("").css("background-color", "white");
        }
        filters.username = $('#createuser-usernamesearch #user_name').val();
        return filters;
    }

    function searchUsername() {
        var filters = chkSelection();
        $.ajax({
            url: '@Url.Action("UsernameSearch", "UserManager")',
            type: "POST",
            async: true,
            dataType: "json",
            data: "username=" + filters.username,
            success: function (data) {
                var usernameExistsAlf = parseInt(data.usernameAlf);
                if (usernameExistsAlf > 0) {
                    $('#txtUsernameExistsAlf').val("Username already exists").css("background-color", "red");
                }
                else {
                    $('#txtUsernameExistsAlf').val("Username doesn't exist").css("background-color", "#33ff00");
                }

                var usernameExistsBrad = parseInt(data.usernameBrad);
                if (usernameExistsBrad > 0) {
                    $('#txtUsernameExistsBrad').val("Username already exists").css("background-color", "red");
                }
                else {
                    $('#txtUsernameExistsBrad').val("Username doesn't exist").css("background-color", "#33ff00");
                }
            },
            error: function (data) {

            }
        });
    }

    $("#group_name").autocomplete({
        source: function (request, response) {
            $.ajax({
                url: '@Url.Action("LookUpGroupName", "UserManager")',
                dataType: "json",
                data: {
                    featureClass: "P",
                    style: "full",
                    maxRows: 12,
                    value: request.term
                },
                success: function (data) {
                    response($.map(data, function (item) {
                        //                            alert(item.group);
                        return {
                            label: item.group,
                            value: item.group
                        } // end of return

                    })); // end of response

                }, // end of success
                error: function (jqXHR, textStatus, errorThrown) {
                    alert(textStatus);
                } // end of error
            }); // end of ajax
        },
        minLength: 2,
        select: function (event, ui) { // Assign to hidden values to trigger onchange ajax call.

            $.ajax({
                url: '@Url.Action("GroupnameCheck", "UserManager")',
                dataType: "json",
                data: {
                    featureClass: "P",
                    style: "full",
                    maxRows: 12,
                    value: ui.item.label
                },
                success: function (data) {
                    $.each(data, function (index, value) {
                        if (index == "AlfGroup") {
                            $("#txtGroupnameExistsAlf").val(value);
                            if ($("#txtGroupnameExistsAlf").val() == "Alf Group doesn't exist.") {
                                $("#txtGroupnameExistsAlf").css("background-color", "red");
                            }
                            else {
                                $('#txtGroupnameExistsAlf').css("background-color", "#33ff00");
                            }
                        }

                        if (index == "BradGroup") {
                            $("#txtGroupnameExistsBrad").val(value);
                            if ($("#txtGroupnameExistsBrad").val() == "Brad Group doesn't exist.") {
                                $("#txtGroupnameExistsBrad").css("background-color", "red");
                            }
                            else {
                                $('#txtGroupnameExistsBrad').css("background-color", "#33ff00");
                            }
                        }
                    });
                }, // end of success
                error: function (jqXHR, textStatus, errorThrown) {
                    alert(textStatus);
                } // end of error
            }); // end of ajax

            $('#hdnGroupAlf').val(ui.item.label);
            $('#hdnGroupBrad').val(ui.item.label);
        },
        open: function () {
            $(this).removeClass("ui-corner-all").addClass("ui-corner-top");
        },
        close: function () {
            $(this).removeClass("ui-corner-top").addClass("ui-corner-all");
        }
    });

    $(document).ready(function () {
        chkSelection();
    });
</script> 
```

**我的所有脚本布局**

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>
    <!-- Javascript -->
    <script src="../../Scripts/jquery-1.8.3.min.js" type="text/javascript"></script>
    @* <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>*@
    <script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")" type="text/javascript"></script>
    @* <script src="@Url.Content("~/Scripts/jquery.autocomplete.js")" type="text/javascript"></script>
         <script src="@Url.Content("~/Scripts/Custom/autocompleteGroup.js")" type="text/javascript"></script>*@
    <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>

    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <!-- Javascript -->
    <!-- Stylesheets -->
    <link href="@Url.Content("~/Content/themes/base/jquery.ui.autocomplete.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/themes/base/jquery.ui.autocomplete.custom.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <!-- Stylesheets -->
</head>
<body>
    <div class="page">
        <div id="header">
           <div id="title" >
    <h1>ALF and BRAD User Manager</h1>
</div>
<div id="logindisplay">
    <span style="color:Black; background-color:white;  text-align:right;">
        Logged in as:&nbsp<strong>@Context.User.Identity.Name</strong>
    </span> 
</div>

            <nav>
                <ul id="menu">
                    @Html.ActionLink("User Manager Dashboard", "Index", "UserManager")&nbsp&nbsp
                    @Html.ActionLink("User Analytics", "Index", "UserStatus")&nbsp&nbsp
                    @Html.ActionLink("Email Distibution", "Index", "EmailDistributionList")&nbsp&nbsp
                    @Html.ActionLink("Email User Details", "Index", "EmailUserDetails")&nbsp&nbsp
                </ul>
            </nav>
        </div>
        <section id="main">
            @RenderBody()
        </section>
        <footer>
        </footer>
    </div>
</body>
</html>
@*  <script type="text/javascript">
            $(document).ready(function () {
                doAutocomplete('@Url.Action("LookUpGroupName", "UserManager")');
            });
</script>*@ 
```

那么有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:05:39.630

这就是它应该如何工作的方式。您仍然会使用该方法，但可以检查 ModelState 以决定要做什么，例如...

```
if (ModelState.IsValid) {
    // Save, redirect to action
}

return View(model); // send them back to correct the problem! 
```

您还可以在视图上显示错误，因为它们将存在。您可以使用 a`ValidationSummary`或拥有单独的`ValidationFor`元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:11:05.667

Check the below link. It may help you.

[Client side validation](http://geekswithblogs.net/stun/archive/2011/01/28/aspnet-mvc-3-client-side-validation-summary-with-jquery-validation-unobtrusive-javascript.aspx)

**Update:**

You need to enable clientside validation, unobtrusivejavascript and refer the script files in master page.

[web.config]

```
<appSettings>
<add key="webpages:Version" value="1.0.0.0" />
<add key="ClientValidationEnabled" value="true" />
<add key="UnobtrusiveJavaScriptEnabled" value="true" />
</appSettings> 
```

[layout.cshtml]

```
 <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
   <script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")" type="text/javascript"></script>
  <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
  <script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
  <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script> 
```

# asp.net - 如何使用 FormsAuthentication 在默认页面上重定向页面？

> ID：14155885
> 
> 赞同：0
> 
> 时间：2013-01-04T11:01:54.653
> 
> 标签：asp.net, logout, linkbutton

我在 VS2005 中使用了一个小应用程序。我使用 Visual Studio 提供的登录控件创建了一个登录面板。

我为此使用了表单身份验证。它工作正常。现在我想使用表单身份验证在**链接按钮**上创建注销功能。

我怎样才能实现这个功能？请提供有价值的回应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:11:33.243

your Log-out link button code should be:

```
//sign out from form authentication

FormsAuthentication.SignOut();

//abandon session

Session.Abandon();

Response.Redirect("logon.aspx"); 
```

you can find more detail at below link . [Log-Out using form Authentication](http://www.codeproject.com/Articles/6773/Form-Authentication-Tickets)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:06:49.937

注销时应实施这些事情-

```
FormsAuthentication.SignOut(); //Removes the forms-authentication ticket from the browser.
Session.Clear();               //clear all session values
Session.Abandon();             //Remove session objects

FormsAuthentication.RedirectToLoginPage(); //redirect the user back to the login page
//OR
Response.Redirect("/Default.aspx"); //whichever page you need. 
```

# android - 全屏对话框

> ID：14155886
> 
> 赞同：0
> 
> 时间：2013-01-04T11:01:56.317
> 
> 标签：android, android-dialog

我的问题是我不想在下面全屏显示透明对话框是我使用的代码

```
 dialog = new Dialog(this, R.style.CustomDialogTheme);
    dialog.setContentView(R.layout.enterjoinseecode_dialog); 
```

自定义对话框主题

```
 <style name="CustomDialogTheme" parent="@android:style/Theme.Translucent.NoTitleBar">
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:windowFullscreen">false</item>
</style> 
```

请有人帮助我哪里出错了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:14:13.660

一些如何通过以下步骤获得具有透明效果的对话框而不是全屏

无需定义样式“CustomDialogTheme” 需要将构造函数的主题参数传递为 android.R.style.Theme_Translucent_NoTitleBar

并在膨胀的 xml 中使用背景作为 android:background="#29000000" 使其透明效果和 layout_gravity 属性来定位对话框

如果我使用上述样式 CustomDialogTheme 以某种方式显示为窗口而不是对话框，因为我应用了直接主题以将其显示为对话框（不是全屏）并使其在 xml 中具有透明效果，我设置了属性背景

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:02:58.970

创建一个具有透明背景的活动，并为该特定活动定义这样的主题

```
<activity android:theme="@android:style/Theme.Dialog" /> 
```

而且，如果您希望该活动与对话框完全相同，那么您也可以使用它

```
android:excludeFromRecents="true" 
```

将其从最近的应用程序列表中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T11:21:33.193

试试这个。创建您的视图，`Dialog`如下所示。

```
 <RelativeLayout
    android:layout_width="450dp"
    android:layout_height="250dp"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:orientation="vertical" >

// Here you can add your component.

</RelativeLayout> 
```

并设置你的对话框这个视图。

```
 dialog = new Dialog(this, R.style.CustomDialogTheme);
 dialog.setContentView(R.layout.enterjoinseecode_dialog); 
```

就是这样。希望这会对你有所帮助。

# ruby-on-rails - 如何将引导程序应用于通过脚手架生成的现有 Rails 文件？

> ID：14155891
> 
> 赞同：1
> 
> 时间：2013-01-04T11:02:22.060
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sass, less

通过 railscasts，我发现[http://railscasts.com/episodes/328-twitter-bootstrap-basics](http://railscasts.com/episodes/328-twitter-bootstrap-basics)与

```
gem 'less-rails' (this is the gem https://github.com/seyhunak/twitter-bootstrap-rails) 
```

我可以用

```
rails g bootstrap:themed scaffold-name -f 
```

它将引导程序应用于各种类，如表格、按钮等。这是惊人的节省时间，但我无法为 SASS 找到它，因为我将 SASS 用于我的 rails 应用程序（我正在使用这个 gem [https://github.com/thomas -mcdonald/bootstrap-sass](https://github.com/thomas-mcdonald/bootstrap-sass)）

有什么方法可以将引导程序应用于现有的脚手架代码，因为我手动执行此操作可能需要很多时间？或者是否有任何简单的方法可以将类放入 .erb 文件中？

谢谢

# activemq - 在 activemq 服务器上获取 queuename 以推送消息

> ID：14155892
> 
> 赞同：0
> 
> 时间：2013-01-04T11:02:25.340
> 
> 标签：activemq

我在 activemq 服务器上有 10 个队列。我有生产者想在其中一个队列上推送消息（生产者将随机选择队列运行时间以将消息放入队列），如何在 createProducer 方法中传递目标名称。我知道我需要传递一个 Destination 类型的对象。生产者会知道服务器上的队列名称。是否可以将字符串传递（或转换）为 Destination 对象类型并将其传递给 createproducer 方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:18:18.437

如果我正确理解您的问题；

如果你正在运行 Java 并且有一个有效的会话，你可以使用[Session.createQueue()](http://docs.oracle.com/javaee/1.4/api/javax/jms/Session.html#createQueue(java.lang.String))；

```
// Create a Destination using the queue name
Destination destination = session.createQueue("queue name");

// Create a MessageProducer from the Session to the Queue
MessageProducer producer = session.createProducer(destination); 
```

[这是在 Apache 站点上执行此操作的完整示例](http://activemq.apache.org/hello-world.html)。

# google-app-engine - 非数据库应用程序的 GAE 数据存储设置

> ID：14155895
> 
> 赞同：2
> 
> 时间：2013-01-04T11:02:43.033
> 
> 标签：google-app-engine, google-cloud-datastore

我在 GAE 上有一个**不**使用任何数据库功能的应用程序，我将来也不打算这样做。在*应用程序设置*中，它说*主/从复制已弃用！*.

我的问题：出于某种原因，我是否仍应将我的应用程序迁移到*High Replication Datastore*还是没有任何区别？

一个想法：如果连接到我的应用程序的数据库服务器宕机了怎么办？如果不是 HRD，我的申请也会被停止吗？可能还有其他问题/考虑因素。

另一个想法：听起来[SLA](https://developers.google.com/appengine/sla)仅适用于 HRD 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:13:04.563

是的，无论如何你都应该升级。

您不仅会获得仅适用于 HRD 的 SLA，而且还会从较新的数据中心为您的应用程序提供服务。另外，即使您不直接使用数据存储，如果您使用会话或任务队列，这些服务也会在内部使用数据存储为您存储状态。

另外，我注意到升级后内存缓存性能有所提高......所以，是的。进行升级时，不推荐使用 M/S 数据存储，因为 HRD 基础架构是基于更新、更好的技术构建的。

# iphone - 发件人地址的 MFMailComposeViewController 问题

> ID：14155897
> 
> 赞同：2
> 
> 时间：2013-01-04T11:02:45.840
> 
> 标签：iphone, ios, ipad, sendmail

我使用以下代码发送邮件：

```
- (IBAction)sendMailPressed:(id)sender
{
    Class mailClass = (NSClassFromString(@"MFMailComposeViewController"));
    if (mailClass != nil)
    {
        // We must always check whether the current device is configured for sending emails
        if ([mailClass canSendMail])
        {
            [self displayComposerSheet];
        }
        else
        {
            [self launchMailAppOnDevice];
        }
    }
    else
    {
        [self launchMailAppOnDevice];
    }
}

// Displays an email composition interface inside the application. Populates all the Mail fields.
-(void)displayComposerSheet
{
    MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
    picker.mailComposeDelegate = self;

    [picker setSubject:self.strMailSubject];

    // Attach pdf to the email
    NSURL *urlToLoad = [[NSBundle mainBundle] URLForResource:self.strSorce withExtension:self.strExtention];
    NSData *myData = [NSData dataWithContentsOfURL:urlToLoad];
    [picker addAttachmentData:myData mimeType:@"application/pdf" fileName:[NSString stringWithFormat:@"%@.%@", self.strSorce, self.strExtention]];

    //  [self presentModalViewController:picker animated:YES];
    [[Singleton sharedInstance] pushModalViewController:picker whereCurrentController:self animated:YES];
    [picker release];
}

// Dismisses the email composition interface when users tap Cancel or Send. Proceeds to update the message field with the result of the operation.
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
{
    // Notifies users about errors associated with the interface
    switch (result)
    {
        case MFMailComposeResultCancelled:
            break;
        case MFMailComposeResultSaved:
            break;
        case MFMailComposeResultSent:

            break;
        case MFMailComposeResultFailed:
            break;
        default:
            break;
    }

    [[Singleton sharedInstance] popModalViewControllerAnimated:YES];
}

// Launches the Mail application on the device.
-(void)launchMailAppOnDevice
{
    NSString *recipients = [NSString stringWithFormat:@"mailto:&subject=%@", self.strMailSubject];

    NSString *email = [NSString stringWithFormat:@"%@", recipients];
    email = [email stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:email]];
} 
```

我得到了这个观点： ![在此处输入图像描述](../Images/ace953674962b057f47c8c9e47c43d1e.png)

但我需要这个视图（请只注意来自字符串，而不是图像）。

我不知道如何让 From 字符串出现

![在此处输入图像描述](../Images/ebd7d34f87ca62ca6b28afe51f0ae05e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:16:25.877

您可以`setCcRecipients:`在代码中使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T11:33:19.723

`displayComposerSheet` 只需在创建后在您的方法中添加这一行，`MFMailComposeViewController`还只需设置`NSArray`收件人名称...

```
 NSString *strFullName = [NSString stringWithFormat:@"From : %@",yourSenderEmailAddress];/// here write your email address which dynamic get from your string 
 NSArray *arrRecipients = [[NSArray alloc]initWithObjects:strFullName, nil];
[picker setCcRecipients:arrRecipients]; 
```

我也用一个例子更新了代码......

维沙尔的回答也是正确的，我只是完成它..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-12T12:08:21.697

如果添加了多个邮件帐户，发件人字段将可见，以便从多个帐户中选择发件人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-16T12:21:03.850

您可以在 iOS 11 及更高版本中使用“setPreferredSendingEmailAddress”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-22T21:56:33.540

可能出于安全原因，无法以编程方式设置 MFMailComposeViewController 的 From: 字段。设备的所有者可以控制在设备上注册了哪些帐户，因此允许“发件人：”字段包含哪些内容。

发件人：字段仅显示设备上是否配置了多个电子邮件帐户；然后，该字段允许用户选择从哪个帐户发送。如果设备上只有一个帐户，则不会显示（它“不言而喻”正在使用哪个帐户）。

# iphone - 如何在 NSString 中使用 stringByTrimmingCharactersInSet

> ID：14155901
> 
> 赞同：2
> 
> 时间：2013-01-04T11:02:56.057
> 
> 标签：iphone, ios, nsstring, nscharacterset

我有一个给出日期的字符串（如下）

```
NSString*str1=[objDict objectForKey:@"date"];

 NSLog(@" str values2%@",str1); --> 04-Jan-13 
```

现在问题是我需要`"-13"`从这里修剪。我知道`NSDateFormatter`要格式化日期。但我不能在这里这样做。我需要修剪它

为此，我正在使用：-

```
 NSCharacterSet *charc=[NSCharacterSet characterSetWithCharactersInString:@"-13"];

 [str1 stringByTrimmingCharactersInSet:charc]; 
```

但这不起作用。这不修剪...怎么做...帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T11:08:00.903

不知道为什么不使用 NSDateFormatter 但这是一种非常具体的方法来解决这个问题（我认为非常糟糕的编码实践）：

```
NSString *theDate = str1;
NSArray *components = [theDate componentsSeparatedByString:@"-"];
NSString *trimmedDate = [NSString stringWithFormat:@"%@-%@",[components objectAtIndex:0],[components objectAtIndex:1]]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T11:10:16.830

Something like this:

```
NSString *trimmed = [textStr stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]]; 
```

or this:

```
NSString *trimmed = [textStr stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"-13"]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-04T11:11:05.173

what you have done is correct. Only thing is `stringByTrimmingCharactersInSet` returns `NSString`. So you need to assign this value to `NSString`, like

```
str1 = [str1 stringByTrimmingCharactersInSet:charc]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-04T11:13:11.107

> 但这不起作用。这不修剪......

它确实修剪，但由于`NSString`是*immutable*，修剪后的字符串被丢弃，因为您没有将它分配给任何东西。

这会起作用**（但不要那样做！）**

```
str1 = [str1 stringByTrimmingCharactersInSet:charc]; 
```

您所做的不是修剪，而是采用子字符串。`NSString`为此提供了更好的方法：

```
str1 = [str1 substringToIndex:6]; // Take the initial 6 characters 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-04T11:12:46.577

如果您确定您的字符串始终格式化为“NN-CCC-NN”，您可以只修剪前 6 个字符：

```
NSString* stringToTrim = @"04-Jan-13";
NSString* trimmedString =  [stringToTrim substringToIndex:6];
NSLog(@"trimmedString: %@", trimmedString); // -> trimmedString: 04-Jan 
```

# javascript - 从非全屏 UIWebView 获取 javascript 中的设备高度

> ID：14155907
> 
> 赞同：0
> 
> 时间：2013-01-04T11:03:22.963
> 
> 标签：javascript, iphone, uiwebview

我尝试将**非全屏**（320x216）的 Iphone 5**设备**与javascript 区分开来。我使用屏幕高度作为开关，因为这似乎是在 javascript 中执行此操作的[唯一](https://stackoverflow.com/questions/12505618/detecting-iphone-5-and-any-ios-device-below-it)[方法。](https://stackoverflow.com/questions/2979854/uiwebview-get-total-height-of-contents-using-javascript) **`UIWebview`**

 **问题是执行此操作的通常方法报告 0 或高度，而`UIWebview`不是设备的高度。

```
document.body.offsetHeight //returns 216
screen.availHeight //returns 0
document.documentElement.clientHeight //returns 216
window.innerHeight //returns 216
screen.height //returns 0 
```

有人知道这样做的方法吗？不幸的是，我无法控制`UIWebview`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-26T21:00:39.913

我知道你说过你已经尝试过了，但`screen.availHeight`对于 iPhone 5 返回 568，即使实际`UIWebView`框架要小得多（即 216）。我在 iOS 7 上。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T11:09:21.473

Did u used this `document.write("Total Height: " + screen.height);` `screen.height` , The height property returns the total height of the visitor's screen, in pixels.**

# java - Hibernate 验证器验证不是 @NotEmpty 的空字段

> ID：14155911
> 
> 赞同：0
> 
> 时间：2013-01-04T11:03:40.220
> 
> 标签：java, spring, validation, spring-mvc, hibernate-validator

我对 Hibernate Validator 4.3.1 有疑问。

问题是，验证器正在验证字段为空且没有 @NotEmpty 注释。

当提交人的 web 表单并且未设置地址、电话、传真和网页时，将引发验证错误。我认为这是错误的，因为没有 @NotEmpty 注释。我想跳过没有 @NotEmpty 注释的字段。

谁能解释问题出在哪里？谢谢你。

```
public class Person{

    private String name;
    private String notifiedBodyCode;
    private Address address;
    private String webpage;
    private String phone;
    private String fax;
    private String email;

    @Column(name = "name", length = 100)
    @NotEmpty(message = "{NotEmpty.NotifiedBody.name}")
    @Length(max = 100)
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @NotEmpty
    @Column(name = "notified_body_code", length = 25)
    @Length(max = 25)
    public String getNotifiedBodyCode() {
        return notifiedBodyCode;
    }

    public void setNotifiedBodyCode(String notifiedBodyCode) {
        this.notifiedBodyCode = notifiedBodyCode;
    }

    @Valid
    @ManyToOne(cascade = { CascadeType.ALL }, fetch = FetchType.LAZY)
    public Address getAddress() {
        return address;
    }

    public void setAddress(Address address) {
        this.address = address;
    }

    @Pattern(regexp = "^(https?://)?[a-z_0-9\\-\\.]+\\.[a-z]{2,4}.*$")
    @Column(name = "web", length = 50)
    public String getWebpage() {
        return webpage;
    }

    public void setWebpage(String webpage) {
        this.webpage = webpage;
    }

    @Length(min = 9, max = 20)
    @Pattern(regexp ="[0-9\\+\\s]")
    @Column(name = "phone", length = 20)
    public String getPhone() {
        return phone;
    }

    public void setPhone(String phone) {
        this.phone = phone;
    }

    @Length(min = 9, max = 20)
    @Column(name = "fax", length = 20)
    public String getFax() {
        return fax;
    }

    public void setFax(String fax) {
        this.fax = fax;
    }

} 
```

**地址**

```
public class Address{

    private String city;
    private String street;
    private String zip;
    private Country country;

    @Length(max = 50)
    @Column( name = "city", length= 50)
    public String getCity() {
        return city;
    }

    public void setCity(String city) {
        this.city = city;
    }

    @Length(max = 100)
    @Column( name = "street", length= 100)
    public String getStreet() {
        return street;
    }

    public void setStreet(String street) {
        this.street = street;
    }

    @Length(min = 5, max = 6)
    @Pattern(regexp = "^[\\d\\s]$")
    @Column(name = "zip", length = 6)
    public String getZip() {
        return (zip == null ? "" : zip);
    }

    public void setZip(String zip) {
        this.zip = zip;
    }

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "country_id")
    public Country getCountry() {
        return country;
    }

    public void setCountry(Country country) {
        this.country = country;
    }

} 
```

**国家**

```
public class Country{

    private String countryName;

    @NotEmpty
    @Length(max = 45)
    @Column(name = "country_name", length = 45)
    public String getCountryName() {
        return countryName;
    }

    public void setCountryName(String countryName) {
        this.countryName = countryName;
    }

    @Override
    public String toString() {
        return "Country [id=" + id + ", countryName=" + countryName + "]";
    }

} 
```

**编辑 - 问题已解决。**

问题在于`"^"`表达。我必须`"[^|]"`改用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:18:49.107

很难理解您的问题，但我假设您是说当手机为空时出现验证错误。

那是因为您有一个带有已定义最小值的 @Length 注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T14:23:58.447

我相信您需要创建一个自定义约束注释以在 null 和空时返回“true”。您可能遇到的问题是，当用户单击输入框但未输入任何内容时，该字段会自动将自身设置为空，而没有与该字段进行任何交互将（应该）返回 null。

一个非常简单的 tut >>> [http://codetutr.com/2013/05/29/custom-spring-mvc-validation-annotations/](http://codetutr.com/2013/05/29/custom-spring-mvc-validation-annotations/)然后你有弹簧参考文档 >>> [http://docs.spring.io /spring/docs/3.2.x/spring-framework-reference/html/validation.html](http://docs.spring.io/spring/docs/3.2.x/spring-framework-reference/html/validation.html)，还有，[http: //docs.jboss.org/hibernate/validator/4.0.1/reference/en/html/validator-usingvalidator .html](http://docs.jboss.org/hibernate/validator/4.0.1/reference/en/html/validator-usingvalidator.html)

# html - 通过在 (X)HTML 中嵌入 Prolog 创建动态网页

> ID：14155912
> 
> 赞同：1
> 
> 时间：2013-01-04T11:03:42.453
> 
> 标签：html, prolog

是否可以在 (X)HTML 标记中嵌入 Prolog 代码，就像在 PHP、ASP 或 JSP 中一样？我看过 XSB 和 SWI-Prolog，但没有找到类似的东西。

例如，在 ASP 中，您可以毫无问题地执行以下操作：

```
<!DOCTYPE html>
<html>
<body>
<%
response.write("Hello World!")
%>
</body>
</html> 
```

如何以类似的方式组合 (X)HTML 和 Prolog？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:14:18.157

看看[prospear](http://prospear.sourceforge.net/)，它似乎提供了你想要的东西。

一般来说，很少有人有同样的想法，谷歌搜索“Prolog Server Pages”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T03:55:52.447

SWI-Prolog 有一个内置的 html 生成方案，它基于将文档的 DOM 定义为 Prolog 数据结构并从中生成 HTML 的稍微不同的想法（如果你已经拥有它们，你可以插入 HTML 块）。

看

[http://www.pathwayslms.com/swipltuts/html/](http://www.pathwayslms.com/swipltuts/html/)

或者

[http://www.swi-prolog.org/pldoc/doc_for?object=section%283,%273.17%27,swi%28%27/doc/packages/http.html%27%29%29](http://www.swi-prolog.org/pldoc/doc_for?object=section%283,%273.17%27,swi%28%27/doc/packages/http.html%27%29%29)

# java - 从 MySQL 流式传输大量数据的 Java HttpURLConnection 问题

> ID：14155914
> 
> 赞同：2
> 
> 时间：2013-01-04T11:03:55.737
> 
> 标签：java, mysql, jersey, httpurlconnection

我们有一个 java 计划任务来在 java 程序中运行查询并将结果发送到基于 Jersey 的 restful web 服务。虽然这在某些情况下似乎可以正常工作，但在一种情况下它不起作用并最终出现`Java.lang.OutOfMemoryError: Java heap space`

在以下程序中，数据以块的形式流式传输，但对于其中一个查询，数据不会被刷新一次以上。因此，所有块都在内存中累积，导致内存不足异常。

我们已经看到[Java - Upload OutputStream as HTTP File Upload](https://stackoverflow.com/questions/12623532/java-upload-outputstream-as-http-file-upload) [HttpURLConnection 超时问题](https://stackoverflow.com/questions/2799938/httpurlconnection-timeout-question) 和 [在 Java EE 应用程序中处理大型记录](https://stackoverflow.com/questions/2180835/handling-large-records-in-a-java-ee-application)

他们中的许多人建议使用 HTTPClient，但我们希望尽可能避免使用它。

```
 for (int i = 0; i < arr.length(); i++) {
            try {
                JSONObject obj = arr.getJSONObject(i);
                StringBuffer query = new StringBuffer((String) obj.get("query")); // Getting one query from list of queries
                int size =500;
                int count = 0;
                URL url = new URL("http://urltomyserver.com");
                java.security.Security.addProvider(new com.sun.net.ssl.internal.ssl.Provider());
                System.setProperty("java.protocol.handler.pkgs", "com.sun.net.ssl.internal.www.protocol");
                httpcon = (HttpURLConnection) url.openConnection();
                httpcon.setChunkedStreamingMode(1024 * 1024);
                httpcon.setAllowUserInteraction(false);
                httpcon.setDoOutput(true);
                httpcon.setRequestProperty("Content-type", "application/x-www-form-urlencoded");
                httpcon.setRequestMethod("POST");
                OutputStream rawOutStream = httpcon.getOutputStream();
                BufferedWriter w = new BufferedWriter(new OutputStreamWriter(rawOutStream));
                do {
                    Query q = new Query(query + " limit " + count + ", " + size);
                    count += size;
                    Map[] results = q.runQuery();
                    JSONArray resultArr = new JSONArray(results);
                    w.write(resultArr.toString(1));
                    w.flush();
                } while (results != null && results.length > 0);
                InputStream inputStream = httpcon.getInputStream();
                w.close();
            } catch (Exception ex) {
                EcwLog.AppendExceptionToLog(ex);
            }
        } 
```

服务器端接收函数定义如下

```
public String saveResultsMP(@QueryParam("apuId") final String apuId, @QueryParam("tableName") String tableName, @QueryParam("queryId") String query_id, InputStream uploadedInputStream) { 
```

# c# - 限制一个aspx页面上的客户端验证器数量？

> ID：14155920
> 
> 赞同：0
> 
> 时间：2013-01-04T11:04:24.510
> 
> 标签：c#, asp.net

我在一个 aspx 页面上有 5 个必填字段验证器。激活所有验证器后，页面上任何命令按钮后面的代码都不会触发。但是，如果有五分之四的验证器处于活动状态，则按钮都可以正常工作。

可以在单个页面上使用的验证器数量是否有限制？还有其他原因会发生这种情况吗？

帮助表示赞赏，谢谢..

达夫。

标记看起来像这样..

```
> <%@ Page Title="" Language="C#" MasterPageFile="~/MasterPages/Admin.Master" AutoEventWireup="true" CodeBehind="RegisterUser.aspx.cs" Inherits="LectureQuestions.Interface.Admin.RegisterUser" %>
<asp:Content ID="Content1" ContentPlaceHolderID="PageTitle" runat="server">Register New User
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="TitleTxt" runat="server">Register New User
</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="MainContent" runat="server">
    <table ID="tblInputField" runat="server" width="100%" cellspacing="15">
            <tr>
                <td width="10%"></td>
                <td width="20%">First Name</td>
                <td width="60%">
                    <asp:TextBox ID="txtFirstName" runat="server" Width="98%"></asp:TextBox>
                </td>
                <td width="10%">
                    <asp:RequiredFieldValidator ID="txtFirstNameRequired" runat="server" 
                        ControlToValidate="txtFirstName" ErrorMessage="*" ForeColor="Red"></asp:RequiredFieldValidator>
                </td>
            </tr>
            <tr>
                <td width="10%"></td>
                <td width="20%">Last Name</td>
                <td width="60%">
                    <asp:TextBox ID="txtLastName" runat="server" Width="98%"></asp:TextBox>
                </td>
                <td width="10%">
                    <asp:RequiredFieldValidator ID="txtLastNameRequired" runat="server" 
                        ControlToValidate="txtLastName" ErrorMessage="*" ForeColor="Red"></asp:RequiredFieldValidator>
                </td>
            </tr>
            <tr>
                <td width="10%"></td>
                <td width="20%">E-mail</td>
                <td width="60%">
                    <asp:TextBox ID="txtEmail" runat="server" Width="98%"></asp:TextBox>
                </td>
                <td width="10%">
                    <asp:RequiredFieldValidator ID="txtEmailRequired" runat="server" 
                        ControlToValidate="txtEmail" ErrorMessage="*" ForeColor="Red"></asp:RequiredFieldValidator>
                </td>
            </tr>
            <tr>
                <td width="10%"></td>
                <td width="20%">Phone</td>
                <td width="60%">
                    <asp:TextBox ID="txtPhone" runat="server" Width="98%"></asp:TextBox>
                </td>
                <td width="10%">
                    <asp:RequiredFieldValidator ID="txtPhoneRequired" runat="server" 
                        ControlToValidate="txtPhone" ErrorMessage="*" ForeColor="Red"></asp:RequiredFieldValidator>
                </td>
            </tr>
            <tr>
                <td width="10%"></td>
                <td width="20%">Password</td>
                <td width="60%">
                    <asp:TextBox ID="txtPassword" runat="server" Width="98%"></asp:TextBox>
                </td>
                <td width="10%">
                    <asp:RequiredFieldValidator ID="txtPasswordRequired" runat="server" 
                        ControlToValidate="txtPassword" ErrorMessage="*" ForeColor="Red"></asp:RequiredFieldValidator>
                </td>
            </tr>
            <tr>
                <td width="10%"></td>
                <td width="20%">User Type</td>
                <td width="60%">
                    <asp:DropDownList ID="txtUserType" runat="server" Width="99.5%">
                        <asp:ListItem>-- Please Select --</asp:ListItem>
                        <asp:ListItem>Student</asp:ListItem>
                        <asp:ListItem>Lecturer</asp:ListItem>
                        <asp:ListItem>Admin</asp:ListItem>
                    </asp:DropDownList>
                </td>
                <td width="10%">
                    <asp:Label id="txtUserTypeValidation" runat="server" ForeColor="Red"></asp:Label>
                </td>
            </tr>
            <tr>
                <td width="10%"></td>
                <td width="20%">Course</td>
                <td width="60%">
                    <asp:DropDownList ID="txtCourse" runat="server" Width="99.5%">
                        </asp:DropDownList>
                </td>
                <td width="10%"></td>
            </tr>
        </table>

        <table ID="tblAllValidationMsg" runat="server" width="100%" cellspacing="5">
            <tr>
                <td width="10%"></td>
                <td width="80%" align="center">
                    <asp:Label id="allValidationMsg" runat="server" height="22px" ForeColor="Red"></asp:Label>
                </td>
                <td width="10%"></td>
            </tr>
        </table>

        <table ID="tblCommandButtons" runat="server" width="100%" cellspacing="10">
            <tr>
                <td width="25%"></td>
                <td width="25%" align="right">
                    <asp:Button class="navbutton" ID="btnRegister" runat="server" 
                        Text="Register User" OnClick="btnRegister_Click" />
                </td>
                <td width="25%" align="left">
                    <asp:Button class="navbutton" ID="btnCancel" runat="server" 
                        Text="Cancel" onclick="btnCancel_Click" />
                </td>
                <td width="25x%"></td>
            </tr>
        </table>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:07:10.790

**答：** 不，页面上的验证没有限制。

**杂项：** Pranay 在他的回答中提供了解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:33:34.947

最后，我在其中一个字段上放置了第二个正则表达式验证器进行测试。当我删除这个验证器时，问题就停止了。不知道如何或为什么；欢迎对此提出任何建议..

# .net - 如果有 Microsoft SQL Server 实例，则绕过安装 SQLExpress

> ID：14155921
> 
> 赞同：5
> 
> 时间：2013-01-04T11:04:24.550
> 
> 标签：.net, windows, installation, windows-installer, bootstrapper

我已经开发了一个 .net 项目，现在我正在做安装程序。我的项目需要 Microsoft SQL 2008 或 Microsoft SQL 2008 Express。我创建了一个安装 Microsoft SQL 2008 Express 的引导程序，它工作正常，除非有人已经安装了 Microsoft SQL 2008。如果已安装 Microsoft SQL 2008，如何绕过安装？

**编辑：** 此解决方案适用于 Microsoft SQL 2008：

```
<Product xmlns="http://schemas.microsoft.com/developer/2004/01/bootstrapper" ProductCode="AAA">
   <InstallChecks>
      <RegistryCheck Property="IsInstalled" Key="HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\Instance Names\SQL" Value="SQL2008" />
   </InstallChecks>

   <Commands Reboot="Defer">
      <Command PackageFile="setup.exe" EstimatedInstallSeconds="15" >
         <InstallConditions>
            <BypassIf Property="IsInstalled" Compare="ValueExists" />
         </InstallConditions>
      </Command>
   </Commands>

   ...

</Product> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:10:00.693

老实说，我不是您尝试做的事情的专家。但是 SQL Server 发现报告对您有用吗？: [SQL server 发现报告](http://msdn.microsoft.com/en-us/library/bb510455.aspx)

或者

[确定安装的 sql 服务器实例](https://stackoverflow.com/questions/141154/how-can-i-determine-installed-sql-server-instances-and-their-versions)

编辑：

我在想类似的事情：

```
<Product xmlns="http://schemas.microsoft.com/developer/2004/01/bootstrapper" ProductCode="AAA">
   <InstallChecks>
      <RegistryCheck Property="IsInstalled" Key="HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\Instance Names" Value="SQL" />
   </InstallChecks>

   <Commands Reboot="Defer">
      <Command PackageFile="setup.exe" EstimatedInstallSeconds="15" >
         <InstallConditions>
            <BypassIf Property="IsInstalled" Compare="ValueExists" />
         </InstallConditions>
      </Command>
   </Commands>

   ...

</Product> 
```

# android - 以编程方式构建 LinearLayout

> ID：14155923
> 
> 赞同：3
> 
> 时间：2013-01-04T11:04:29.067
> 
> 标签：android, graph, android-linearlayout

我试图让我的布局看起来像这样：

![在此处输入图像描述](../Images/f7acd26578623a2f54383a1a54654a9b.png)

包含此代码的我的类扩展了 Linelayout 本身并使用 addView 添加不同的元素

```
 setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

        LinearLayout line = new LinearLayout(context);
    line.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
    viewVerLabels = new VerLabelsView(context);

            // add y axis linearlayout & graphview
    line.addView(viewVerLabels);
    line.addView(new GraphViewContentView(context), new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT, 1));
    line.setOrientation(LinearLayout.HORIZONTAL);

            // add to main linearlayout
    addView(line);

    LinearLayout line2 = new LinearLayout(context);
    line2.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
    viewHorLabels = new HorLabelsView(context);
    setOrientation(LinearLayout.VERTICAL);
            // add x axis labels
    line2.addView(viewHorLabels);
            // add to main linearlayout
    addView(line2); 
```

我的 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/graph2"
    android:layout_width="fill_parent"
    android:layout_height="250dp"
    android:orientation="vertical" /> 
```

使用此代码，我得到了 Y 轴标签和图表，但缺少 X 轴标签

我似乎无法得到我想要的，我尝试了几种组合，我做错了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T01:55:58.123

这似乎是一个大小问题，当将第一个布局添加到父级时，它们会填满整个区域，而其他的只是现在显示。

正如其他提到的，建议（我会尝试任何一个独立的） - 滚动视图在所有内容之上。- 创建一个单独的控件，该控件从 LinearLayout 扩展，其各自的 layout.xml 只是在内部膨胀。在这个 Activity 上显示时，只需实例化这个控件并添加一个包含所有这些的布局。- 在所有内容之上创建一个新的 LinearLayout，将所有内容添加到其中，然后将其添加到实际视图中。

如果有任何工作或您有解决方案，请将其发布，以便其他人可以看到并从中受益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T12:05:26.213

嗨，试试这段代码，我已经将一些值、视图和 setBackground 更改为颜色，它会提供与您想要的相同的输出。

LinearLayout MLayoutTm = (LinearLayout) findViewById(R.id.graph2);

```
 LinearLayout line = new LinearLayout(this);
    line.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, 0, 1));
    line.setBackgroundColor(Color.BLUE);
    TextView viewVerLabels = new TextView(this);

    viewVerLabels.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.MATCH_PARENT));
    viewVerLabels.setText("Nimsih");
    viewVerLabels.setBackgroundColor(Color.RED);
    line.addView(viewVerLabels);

    TextView GraphViewContentView = new TextView(this);
    GraphViewContentView.setBackgroundColor(Color.MAGENTA);
    GraphViewContentView.setText("Nimsih2");
    GraphViewContentView.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.MATCH_PARENT, 1));
    line.addView(GraphViewContentView);

    line.setOrientation(LinearLayout.HORIZONTAL);

    MLayoutTm.addView(line);

    LinearLayout line2 = new LinearLayout(this);
    line2.setBackgroundColor(Color.RED);
    line2.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

    TextView viewHorLabels = new TextView(this);
    viewHorLabels.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT,
            1));
    viewHorLabels.setBackgroundColor(Color.CYAN);
    viewHorLabels.setText("Nimsih3 ");

    MLayoutTm.setOrientation(LinearLayout.VERTICAL);
    line2.addView(viewHorLabels);

    MLayoutTm.addView(line2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T05:19:17.927

我正在使用 arnodenhond 的代码来实现 x 轴标签和 y 轴标签。你可以从 [http://android.arnodenhond.com/components](http://android.arnodenhond.com/components)

我的模拟器截图![在此处输入图像描述](../Images/fe75eefd5073e1cc9f5414fda8549e4b.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T20:32:50.413

尝试为您创建的布局设置不同的背景颜色以查看其真实区域。很可能某些布局占据了所有可用高度，因此 X 轴标签超出了边界。您可能希望为布局分配某种权重，例如总权重总和为 5，为绘图区域分配 4，并将 1 设置为包含 X 轴标签的布局

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T12:17:08.183

这是我的代码，可以让我解决这个问题

```
 graphViewStyle = new GraphViewStyle();
        paint = new Paint();
        graphSeries = new ArrayList<GraphViewSeries>();

        setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
        setOrientation(LinearLayout.VERTICAL);

        LinearLayout line = new LinearLayout(context);
        line.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
        line.setOrientation(LinearLayout.HORIZONTAL);

        LinearLayout line2 = new LinearLayout(context);
        line2.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
        line2.setOrientation(LinearLayout.HORIZONTAL);

        txt = new TextView(mContext);
        addView(txt);

        GraphViewContentView graphContentView = new GraphViewContentView(context);
        graphContentView.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, 260, 1));
        line.addView(graphContentView);
        viewVerLabels = new VerLabelsView(context);
        viewVerLabels.setLayoutParams(new LayoutParams(30, 260));
        viewHorLabels = new HorLabelsView(context);
        viewHorLabels.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, 15));

        line.addView(viewVerLabels);

        addView(line);

        line2.addView(viewHorLabels);
        TextView v = new TextView(context);
        v.setLayoutParams(new LayoutParams(30, 15));
        line2.addView(v);

        addView(line2); 
```

# java - GWT 按钮 onClick() 返回一个值

> ID：14155925
> 
> 赞同：1
> 
> 时间：2013-01-04T11:04:32.897
> 
> 标签：java, gwt

我需要创建 2 个名为 yes 和 no 的通用按钮，如果没有，则返回 2，如果是，则返回 1。我看到 onclick 方法是 void 并且不返回 int，我该怎么办？

```
YesButton.addClickHandler(new ClickHandler() {

        @Override
        public void onClick(ClickEvent event) {

            ??? result ??

        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:57:19.460

这不是这样做的方法。不知道您的具体要求会有点困难，但我会冒险提出建议。首先定义一个controller/mediator/whachamacallit，其中包含视图可以执行的操作：

```
public interface MyListener
{
    void onYesClick();
    void onNoClick();
} 
```

（也可以是一个具体的类，但是 yes 和 no click 看起来很通用，所以我们可以在其他地方重用它）

在您的视图类中，您将拥有

```
public class MyView
{
    private MyListener listener;

    private Button yesButton = new Button( "yessir!" );
    private Button noButton = new Button( "no way!" );

    public MyView( MyListener listener ) { this.listener = listener; }

    yesButton.addClickHandler( new ClickHandler() 
    {
        @Override
        public void onClick( ClickEvent event ) 
        {
            listener.onYesClick(); // similarly .onNoClick() for the "No" button
        }
    } );

    // etc
    ...
} 
```

希望对您有所帮助。

# java - 剩下的安卓天数

> ID：14155928
> 
> 赞同：7
> 
> 时间：2013-01-04T11:04:49.080
> 
> 标签：java, android, time

我需要`CountDown Days`从一个日期到第二个日期

例如

`CURRENT_DATE:3/1/2013` `NEXT_DATE:21/01/2013`

然后它显示::`17 DAYS LEFT`

我实现了这样的代码

```
String inputDateString = "01/22/2013";
Calendar calCurr = Calendar.getInstance();
Calendar calNext = Calendar.getInstance();
calNext.setTime(new Date(inputDateString)); 

if(calNext.after(calCurr)) 
{
    long timeDiff = calNext.getTimeInMillis() - calCurr.getTimeInMillis();
    int daysLeft = (int) (timeDiff/DateUtils.DAY_IN_MILLIS);
    dni.setText("Days Left: "+daysLeft);
}
else
{
    long timeDiff = calCurr.getTimeInMillis() - calNext.getTimeInMillis();
    timeDiff = DateUtils.YEAR_IN_MILLIS - timeDiff;
    int daysLeft = (int) (timeDiff/DateUtils.DAY_IN_MILLIS);
} 
```

有没有更好的方法来实现这些？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T11:10:57.323

使用`Calendar`方法：

```
String inputDateString = "01/22/2013";
Calendar calCurr = Calendar.getInstance();
Calendar day = Calendar.getInstance();
day.setTime(new SimpleDateFormat("MM/dd/yyyy").parse(inputDateString));
if(day.after(calCurr)){
               System.out.println("Days Left: " + (day.get(Calendar.DAY_OF_MONTH) -(calCurr.get(Calendar.DAY_OF_MONTH))) );
} 
```

输出：剩余天数：17

并且要将年份增加 1 ，您可以使用 Calendar.add() 方法

```
 day.add(Calendar.YEAR, 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T11:09:10.647

有几个库可以将日期转换为`n days`格式：

*   [漂亮时光](http://ocpsoft.org/prettytime/)
*   [乔达时间](http://joda-time.sourceforge.net/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-11T13:15:42.950

我用这个类

```
import android.text.format.DateUtils;

import java.util.Date;

import static android.text.format.DateUtils.FORMAT_NUMERIC_DATE;
import static android.text.format.DateUtils.FORMAT_SHOW_DATE;
import static android.text.format.DateUtils.FORMAT_SHOW_YEAR;
import static android.text.format.DateUtils.MINUTE_IN_MILLIS;

/**
 * Utilities for dealing with dates and times
 */
public class TimeUtils {

    /**
     * Get relative time for date
     *
     * @param date
     * @return relative time
     */
    public static CharSequence getRelativeTime(final Date date) {
        long now = System.currentTimeMillis();
        if (Math.abs(now - date.getTime()) > 60000)
            return DateUtils.getRelativeTimeSpanString(date.getTime(), now,
                    MINUTE_IN_MILLIS, FORMAT_SHOW_DATE | FORMAT_SHOW_YEAR
                    | FORMAT_NUMERIC_DATE);
        else
            return "Just now";
    }
} 
```

`TimeUtils.getRelativeTime(date)`返回文本，如
Just now,
2 min. 前,
2 小时前,
2 天前,
04.11.2013

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-28T22:42:06.250

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-01T15:05:55.173

我在互联网上搜索了此代码，但没有找到。虽然我回复晚了，但这将是一段有用的代码。

```
public static String getTimeLeft(String date) { // dateFormat = "yyyy-MM-dd"
    String[] DateSplit = date.split("-");
    int month = Integer.parseInt(DateSplit[1]) - 1, // if month is november  then subtract by 1
    year = Integer.parseInt(DateSplit[0]), day = Integer
            .parseInt(DateSplit[2]), hour = 0, minute = 0, second = 0;
    Calendar now = Calendar.getInstance();

    int sec = second - Calendar.getInstance().get(Calendar.SECOND), min = minute
            - Calendar.getInstance().get(Calendar.MINUTE), hr = hour
            - Calendar.getInstance().get(Calendar.HOUR_OF_DAY), dy = day
            - Calendar.getInstance().get(Calendar.DATE), mnth = month
            - Calendar.getInstance().get(Calendar.MONTH), daysinmnth = 32 - dy;

    Calendar end = Calendar.getInstance();

    end.set(year, month, day);

    if (mnth != 0) {
        if (dy != 0) {
            if (sec < 0) {
                sec = (sec + 60) % 60;
                min--;
            }
            if (min < 0) {
                min = (min + 60) % 60;
                hr--;
            }
            if (hr < 0) {
                hr = (hr + 24) % 24;
                dy--;
            }
            if (dy < 0) {
                dy = (dy + daysinmnth) % daysinmnth;
                mnth--;
            }
            if (mnth < 0) {
                mnth = (mnth + 12) % 12;
            }
        }
    }

    String hrtext = (hr == 1) ? "hour" : "hours", dytext = (dy == 1) ? "day"
            : "days", mnthtext = (mnth == 1) ? "month" : "months";

    if (now.after(end)) {
        return "";
    } else {
        String months = "", days = "", hours = "";
        months = (mnth > 0) ? mnth + " " + mnthtext : "";
        if (mnth <= 0) {
            days = (dy > 0) ? dy + " " + dytext : "";
            if (dy <= 0) {
                hours = (hr > 0) ? hr + " " + hrtext : "";
            }
        }
        //Log.d("DATE", months + " 1 " + days + " 2 " + hours);
        return months + days + hours;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-02T11:35:22.457

其他答案忽略时区，这可能至关重要，具体取决于您希望倒计时的准确程度。如果您不指定时区，您将获得[JVM](https://en.wikipedia.org/wiki/Java_virtual_machine)的默认值。

java.util.Date & .Calendar 类是出了名的麻烦。避开他们。使用[Joda-Time或](http://www.joda.org/joda-time)[Java 8](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8)中的新[java.time 包](http://download.java.net/jdk8/docs/api/java/time/package-summary.html)。

[Joda-Time](http://www.joda.org/joda-time) 2.3中的一些代码，未经测试（在我的脑海中）。搜索 StackOverflow 以获取*更多*示例。

```
String input = "01/22/2013";
DateTimeZone timeZone = DateTimeZone.forID( "Europe/Paris" );
DateTimeFormatter formatterInput = DateTimeFormat.forPattern( "MM/dd/yyyy" ).withZone( timeZone );
DateTime future = formatterInput.parseDateTime( input );

DateTime now = new DateTime( timeZone );

int days = Days.daysBetween( now, future ).getDays();
Interval interval = new Interval( now, future );
Period period = new Period( interval ); 
```

对这些变量进行一些`System.out.println`调用并感到惊讶。

您将看到的字符串格式是[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)。您也可以创建其他格式。

# html - 为什么 firefox 显示框与 Safari、IE、Chrome 等不同？

> ID：14155930
> 
> 赞同：2
> 
> 时间：2013-01-04T11:05:02.823
> 
> 标签：html, css, firefox, cross-browser

我一直在解决这个微小但非常烦人的跨浏览器 CSS 问题：由于某种原因，Firefox 显示的框/输入字段具有与其他浏览器不同的测量值。似乎 Firefox 以某种方式忽略了 box-sizing:border-box 并且仍然通过自己的措施来测量盒子。这里的原因是什么？有没有泡泡糖解决方案？我准备好了。

我在这里做的是动态 jquery 输入字段加法器。加号按钮旁边的字段是“假字段”，由于某种原因在 Firefox 中显示不同：

![在此处输入图像描述](../Images/70a251bfaae2f3e7a30e865c98a639d4.png)

文档类型：XHTML 1.0 Strict

CSS：

```
.fakeinpfield {
        border: 1px solid #C2C2C2 !important;
        -moz-border-radius: 2px;
        -webkit-border-radius: 2px;
        border-radius: 2px; 
}
input#fakeinpfield3 {
        width: 320px !important;
        margin-right: 6px;
        margin-top: 3px;
        -moz-box-sizing: border-box; 
        -webkit-box-sizing: border-box; 
        box-sizing: border-box;
        height: 26px;
        padding: 0;

}
input#fakeinpfield4 {
        width: 135px !important;
        margin-right: 6px;
        margin-top: 3px;
        -moz-box-sizing: border-box; 
        -webkit-box-sizing: border-box; 
        box-sizing: border-box;
        height: 26px;
        padding: 0;
}
input#fakeinpfield5 {
        width: 135px !important;
        margin-right: 6px;
        margin-top: 3px;
        -moz-box-sizing: border-box; 
        -webkit-box-sizing: border-box; 
        box-sizing: border-box;
        height: 26px;
        padding: 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:14:14.910

我不确定firefox为什么要这样做，但我总是遇到这个问题，最后一次我的解决方案是设置`border: none;`并添加一个（输入如）img作为背景，伪造一个输入字段，这样每个输入都会是相同的大小。

顺便说一句，如果我没记错的话，Opera 的尺寸也有另一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T12:03:26.450

好的，我用 box-sizing 解决了这个问题。似乎我需要为 firefox 使用不同的 box-sizing，因为它以不同的方式测量盒子（我也将元素设置为 inline-block，但我不确定这最终是否与它有关） ：[http ://www.quirksmode.org/css/box.html](http://www.quirksmode.org/css/box.html)

```
input#fakeinpfield3 {
        width: 318px !important;
        margin: 3px 6px 0 0;
        -moz-box-sizing: border-box; 
        box-sizing: content-box;
        height: 26px;
        padding: 0;
        display: inline-block;
} 
```

# svn - SVN 错误：无法将文件提交到 svn

> ID：14155931
> 
> 赞同：0
> 
> 时间：2013-01-04T11:05:06.757
> 
> 标签：svn, phpmyadmin, apache2, zend-studio

我已经使用 Zend 编辑器从 SVN 签出了一份工作副本。我无法将更改提交到 SVN。它抛出错误[某些选定的资源未提交。svn: 提交失败 (详情如下): svn: 无法读取 HTTP 状态行 svn: CHECKOUT request failed on '/project/!svn/bln/1798']

所有其他功能都正常工作，如更新，与存储库比较。一旦我删除了“phpmyadmin”并重新安装了 apache2，“commit”就会工作几天，同样的问题会重复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T08:28:11.553

问题是由于以太网连接造成的。特定的以太网网关连接会阻止将文件提交到暂存。更改以太网网关解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T14:19:38.470

看到此错误后，请尝试“更新”您的项目。
Eclipse 中的 PS - 项目 - 团队 - 更新，很有帮助。

# java - 通过单个调用更改项目的日志级别？

> ID：14155936
> 
> 赞同：0
> 
> 时间：2013-01-04T11:05:28.457
> 
> 标签：java, logging, log4j

我已将属性中的日志级别配置为 DEBUG 并且工作正常，但是如果发生某些事件，我想更改整个项目的日志级别。显然我的项目有很多类，它们使用如下所示的日志记录

```
 private static final Logger log  = Logger.getLogger(CommandOperations.class); 
```

我可以通过调用单独更改每个类的日志级别， `log.setLevel(Level.INFO)`但我更希望在项目范围内进行更改。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:04:26.863

尝试所有类的包前缀`Logger.getLogger("com.xx").setLevel(..);`在哪里。`com.xx`不要为个别班级设置级别。

当你给`com.xx`它时，它也适用于所有子包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:07:52.367

你试过使用吗？

```
LogManager.getRootLogger().setLevel((Level)Level.DEBUG); 
```

# javascript - Mixpanel 用户跟踪自 1 月 1 日起无法使用

> ID：14155940
> 
> 赞同：2
> 
> 时间：2013-01-04T11:05:49.297
> 
> 标签：javascript, asp.net, mixpanel

我一直在使用以下代码来识别 Mixpanel 的新用户：

```
 var mixpanelTries = 0;
    function handleMixpanelUser() {
        if ((window.mixpanel) && (window.mixpanel.alias)) {
            if ("@Auth.UserID" !== "0") {
                if ("@SessionWrapper.UserInitialized" === "False") {
                    try { mixpanel.alias("@Auth.UserID"); } catch (exception) {console.log("exception"); }
                    mixpanel.identify("@Auth.UserID");
                    mixpanel.people.set({
                        "$email": "@Auth.UserEmail",    // only special properties need the $
                        "$created": "@SessionWrapper.UserCreated",
                        "name": "@Auth.FullName"
                    }, function (resp) { });
                    var url = "http://" + "@Config.BaseUrl" + "/finalizeuser/" + "@Auth.UserID";
                    $.ajax({
                        type: 'POST',
                        url: url,
                        async: false
                    });
                }
                else {
                    mixpanel.identify("@Auth.UserID");
                }
            }
        }
        else {
            if (mixpanelTries < 5) {
                mixpanelTries++;
                setTimeout(handleMixpanelUser, 100);
            }
        }
    }

    $(function () {
        handleMixpanelUser();
    }); 
```

这段代码是在 2012 年 12 月编写的，运行良好。但是，自 1 月 1 日起，此代码不起作用，它不会崩溃，但不会在 Mixpanel 中创建新用户。代码没有变化。为什么我的代码在 2012 年很好，在 2013 年很糟糕？

我需要更改设置吗？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T09:15:06.043

我发现了问题：我的代码一直在工作，但我没有意识到，因为 Mixpanel UI 有一个很大的排序错误。如果我按创建时间降序对记录进行排序，则显示的第一个记录是在 12 月 31 日创建的。

但是，如果我按 Last Seen 对记录进行排序，它会显示几分钟前创建的用户。

这是一个排序错误。我相信当我们对日期进行排序时，Mixpanel 的日期排序会按字母顺序排序。

“2012 年 12 月 31 日”>“2013 年 1 月 7 日”

因此，2013 年 12 月 31 日的人比 2013 年 1 月 1 日的人“更新”。我将向 Mixpanel 发送电子邮件以通知他们该问题。

# c++ - 阵列超出范围检测

> ID：14155941
> 
> 赞同：0
> 
> 时间：2013-01-04T11:05:50.090
> 
> 标签：c++, qt, memory, overflow

> **可能重复：**
> [C++ 越界访问数组没有给出错误，为什么？](https://stackoverflow.com/questions/1239938/c-accesses-an-array-out-of-bounds-gives-no-error-why)

我在 Windows 上使用 Qt creator 时经常遇到数组问题。当我的程序尝试访问一个不存在的内存单元时，会出现随机崩溃，因此很难调试。

当我的程序访问不存在的内存单元时，是否有任何库或选项可以检查以停止程序？

例子：

```
int * toto = new int [4];
toto[6] =2; 
```

导致提到的随机行为。

我在使用 Qt creator 4.8.1 的 Windows 7 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:55:01.680

正如@axeoth 在评论中提到的，没有办法检查索引是否超出 C++ 数组的范围。

如果您正在寻找特定于 Qt 的容器类，您可以查看`QList<T>`或`QVector<T>`.

[您可以在Qt Container Classes](http://doc.qt.digia.com/qt/containers.html)中找到更多详细信息。

# wpf - 如何在 WPF 中为过程 1 个圆形变换设置动画并沿途创建一个形状？

> ID：14155949
> 
> 赞同：1
> 
> 时间：2013-01-04T11:06:32.947
> 
> 标签：wpf, animation, 3d, transform

我有 WPF 3D 动画的任务：我有 2 个圆，其中心点、半径和与已知矢量垂直。圆 1 需要平滑地“转换”为圆 2，我想为该转换过程设置动画并沿途创建一个形状（具有不同半径的扭曲管）。有人有想法或建议代码来实现这一点吗？提前致谢。

# android - 应用程序在android中意外停止？

> ID：14155956
> 
> 赞同：-9
> 
> 时间：2013-01-04T11:06:56.533
> 
> 标签：android

我的 android 应用程序仍然给我这个下面的错误。不幸的是，当我在模拟器中单击应用程序图标时，我的应用程序已停止工作。

**以下是Logcat错误**

```
01-04 11:20:57.440: E/AndroidRuntime(798): FATAL EXCEPTION: main
01-04 11:20:57.440: E/AndroidRuntime(798): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.oj2.currrencyconverter/com.oj2.currrencyconverter.MainConverter}: java.lang.NumberFormatException: Invalid int: ""
01-04 11:20:57.440: E/AndroidRuntime(798):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-04 11:20:57.440: E/AndroidRuntime(798):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-04 11:20:57.440: E/AndroidRuntime(798):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-04 11:20:57.440: E/AndroidRuntime(798):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-04 11:20:57.440: E/AndroidRuntime(798):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-04 11:20:57.440: E/AndroidRuntime(798):  at android.os.Looper.loop(Looper.java:137)
01-04 11:20:57.440: E/AndroidRuntime(798):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-04 11:20:57.440: E/AndroidRuntime(798):  at java.lang.reflect.Method.invokeNative(Native Method)
01-04 11:20:57.440: E/AndroidRuntime(798):  at java.lang.reflect.Method.invoke(Method.java:511)
01-04 11:20:57.440: E/AndroidRuntime(798):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-04 11:20:57.440: E/AndroidRuntime(798):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-04 11:20:57.440: E/AndroidRuntime(798):  at dalvik.system.NativeStart.main(Native Method)
01-04 11:20:57.440: E/AndroidRuntime(798): Caused by: java.lang.NumberFormatException: Invalid int: ""
01-04 11:20:57.440: E/AndroidRuntime(798):  at java.lang.Integer.invalidInt(Integer.java:138)
01-04 11:20:57.440: E/AndroidRuntime(798):  at java.lang.Integer.parseInt(Integer.java:359)
01-04 11:20:57.440: E/AndroidRuntime(798):  at java.lang.Integer.parseInt(Integer.java:332)
01-04 11:20:57.440: E/AndroidRuntime(798):  at com.oj2.currrencyconverter.MainConverter.onCreate(MainConverter.java:28)
01-04 11:20:57.440: E/AndroidRuntime(798):  at android.app.Activity.performCreate(Activity.java:5104)
01-04 11:20:57.440: E/AndroidRuntime(798):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-04 11:20:57.440: E/AndroidRuntime(798):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-04 11:20:57.440: E/AndroidRuntime(798):  ... 11 more 
```

**以下是代码**

```
package com.oj2.currrencyconverter;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.RadioButton;

public class MainConverter extends Activity {
    EditText dollars; 
    EditText rupees;
    RadioButton dTOr;
    RadioButton rTOd;
    Button convert;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //set Gui gui_main_converter for class MainConverter
        setContentView(R.layout.gui_main_converter);
        //Get the value from edittext in dollars
        dollars = (EditText)findViewById(R.id.dollaredtxt);
        //
        String rup = dollars.getText().toString();
        int convertrup = Integer.parseInt(rup);
        rupees = (EditText)findViewById(R.id.edtrup);
        dTOr = (RadioButton) findViewById(R.id.radioDtoR);
        dTOr.setChecked(true);
        rTOd = (RadioButton) findViewById(R.id.radioRtoD);
        convert = (Button) findViewById(R.id.btnConvert);
        convert.setOnClickListener(mylistner);
    }
    private OnClickListener mylistner = new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if (dTOr.isChecked()) {
                ConvertDollarToRup();
            }
            if (rTOd.isChecked()) {
                ConvertRupToDollar();
            }
        }
    };
    public void ConvertDollarToRup() {
        // TODO Auto-generated method stub
        double val = Double.parseDouble(dollars.getText().toString());
        rupees.setText(Double.toString(val*56));
    }
    public void ConvertRupToDollar() {
        // TODO Auto-generated method stub
        double val = Double.parseDouble(rupees.getText().toString());
        dollars.setText(Double.toString(val/56));

    }

} 
```

感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:40:04.233

您正在尝试将空字符串转换为整数：

```
dollars = (EditText)findViewById(R.id.dollaredtxt);
String rup = dollars.getText().toString();
int convertrup = Integer.parseInt(rup); 
```

`rup`就是这样：（`""`空字符串）
如果您的 EditText 最初不包含值，则字符串将始终为空。

您必须在`onClick`方法中而**不是**在`onCreate`方法中进行解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:15:08.137

像这样改变你的方法：

```
public void ConvertDollarToRup() {
    if(!dollars.getText().toString().equals("")) {
        double val = Double.parseDouble(dollars.getText().toString());
        rupees.setText(Double.toString(val*56));
    }
}

public void ConvertRupToDollar() {
    if(!rupees.getText().toString().equals("")) {
        double val = Double.parseDouble(rupees.getText().toString());
        dollars.setText(Double.toString(val/56));
    }
} 
```

# windows-phone-7 - WP7：实时视频流

> ID：14155967
> 
> 赞同：0
> 
> 时间：2013-01-04T11:07:28.013
> 
> 标签：windows-phone-7, video, live-streaming, smooth-streaming-player

我在 wp7 应用程序中有流畅的直播 SMF 播放器。在第一次启动时，它运行良好。

我的意思是视频流正在工作。但是当我第二次运行它时，它不起作用但没有产生任何错误。我的 XMAL 代码是：

```
 <StackPanel Orientation="Vertical">
                <TextBlock Text="WP7 Smooth Streaming Demo" Height="12" Width="266" FontSize="22" Foreground="Blue"/>
                <Core:SMFPlayer Name="strmPlayer"
        HorizontalAlignment="Stretch"
                     Margin="0"
                     VerticalAlignment="Stretch"/>
            </StackPanel> 
```

我的 C# 代码是

```
PlaylistItem item = new PlaylistItem();
 item.MediaSource = new Uri("http://video3.smoothhd.com.edgesuite.net/ondemand/Big%20Buck%20Bunny%20Adaptive.ism/Manifest");
            item.DeliveryMethod = Microsoft.SilverlightMediaFramework.Plugins.Primitives.DeliveryMethods.AdaptiveStreaming;
            strmPlayer.Playlist.Add(item);
            strmPlayer.Play(); 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:39:57.597

这是多分辨率视频的问题。因为 wp7 不支持所有分辨率的视频。

因此，当您当时在设备上运行应用程序时，请使用 RestrictTracks 方法。 [限制跟踪方法](http://msdn.microsoft.com/en-us/library/microsoft.web.media.smoothstreaming.streaminfo.restricttracks%28VS.90%29.aspx)

我认为它的视频比特率问题。

请参考本教程[诺基亚 lumia 开发者指南](http://www.developer.nokia.com/Community/Wiki/Video_playback_guidance_for_Nokia_Lumia_610)

如果有任何问题，请告诉我

# javascript - 从 Ctrl V 上的文本框中删除多余的字符

> ID：14155970
> 
> 赞同：-1
> 
> 时间：2013-01-04T11:07:36.983
> 
> 标签：javascript, dom-events, onkeypress

> **可能重复：**
> [使用 jquery 检测浏览器中的上下文菜单粘贴](https://stackoverflow.com/questions/4702814/detecting-a-context-menu-paste-in-the-browser-with-jquery)

我有一个多行文本框，最多 100 个字符。我已经编写了一个 JavaScript 来限制最多 100 个字符，但是当我在那个文本框上执行`Ctrl`+`V`时，它并没有删除多余的字符。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:09:54.813

Use `onkeypress`, `onkeyup` as well as `onkeydown` on input text.

Use the below Javascript finction:

```
<asp:TextBox ID="txtvalueAr" runat="server" TextMode="MultiLine" 
onkeypress="return CheckLength(this,160)" onkeyup="return CheckLength(this,160)"
onkeydown="return CheckLength(this,160)" onPaste="return CheckLength(this,160)">
</asp:TextBox> 
```

Javascript

```
 function CheckLength(txt, maxLen) {
        try {
            if (txt != null) {
                var iLength = txt.value.length
                if (iLength <= maxLen) //Check the Limit.
                {
                    //Display the remaining characters
                    document.getElementById('character').innerHTML = maxLen - iLength + " are remaining characters.";
                }
                else {
                    txt.value = txt.value.substring(0, maxLen);
                    return false;
                }
            }
        }
        catch (e) {
            return false;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:11:19.623

Call the javascript function in `onKeyUp` ,`onblur` and `onmouseout` events.

# java - 使用 Dropbox Java api: DropboxSSLException: javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated

> ID：14155971
> 
> 赞同：3
> 
> 时间：2013-01-04T11:07:40.603
> 
> 标签：java, ssl, dropbox, dropbox-api

我正在尝试使用 Dropbox java API 让我的 java 应用程序上传文件。不知何故，我最终遇到了我无法解决的相同 SSL 错误。有什么建议么？

我使用了这段代码（http://aaka.sh/patel/2011/12/20/authenticating-dropbox-java-api/）

```
 public class DropboxTest {

    // App key & secret that Dropbox's developer website gives your app
    private static final String APP_KEY = "myAppKey";
    private static final String APP_SECRET = "myAppSecret";
    // Define AccessType for DropboxAPI object
    final static private AccessType ACCESS_TYPE = AccessType.APP_FOLDER;
    private static DropboxAPI<WebAuthSession> mDBApi;

    public static void main(String[] args) throws Exception{

        // Initialize the goods/session
        AppKeyPair appKeys = new AppKeyPair(APP_KEY, APP_SECRET);
        WebAuthSession session = new WebAuthSession(appKeys, ACCESS_TYPE);

        // Initialize DropboxAPI object
        mDBApi = new DropboxAPI<WebAuthSession>(session);

        // Get ready for user input
        Scanner input = new Scanner(System.in);

        // Open file that stores tokens, MUST exist as a blank file
        File tokensFile = new File("TOKENS");

        System.out.println("Enter 'a' to authenticate, or 't' to test reauthentication: ");
        String command = input.next();

        if(command.equals("a")){

            try {

                // Present user with URL to allow app access to Dropbox account on
                System.out.println("Please go to this URL and hit \"Allow\": " + mDBApi.getSession().getAuthInfo().url);
                AccessTokenPair tokenPair = mDBApi.getSession().getAccessTokenPair();

                // Wait for user to Allow app in browser
                System.out.println("Finished allowing?  Enter 'next' if so: ");
                if(input.next().equals("next")){
                    RequestTokenPair tokens = new RequestTokenPair(tokenPair.key, tokenPair.secret);
                    mDBApi.getSession().retrieveWebAccessToken(tokens);
                    PrintWriter tokenWriter = new PrintWriter(tokensFile);
                    tokenWriter.println(session.getAccessTokenPair().key);
                    tokenWriter.println(session.getAccessTokenPair().secret);
                    tokenWriter.close();
                    System.out.println("Authentication Successful!");

                }

            } catch (DropboxException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        else if(command.equals("t")){

            Scanner tokenScanner = new Scanner(tokensFile);       // Initiate Scanner to read tokens from TOKEN file
            String ACCESS_TOKEN_KEY = tokenScanner.nextLine();    // Read key
            String ACCESS_TOKEN_SECRET = tokenScanner.nextLine(); // Read secret
            tokenScanner.close(); //Close Scanner 

            //Re-auth
            AccessTokenPair reAuthTokens = new AccessTokenPair(ACCESS_TOKEN_KEY, ACCESS_TOKEN_SECRET);
            mDBApi.getSession().setAccessTokenPair(reAuthTokens);
            System.out.println("Re-authentication Sucessful!");

            //Run test command
            System.out.println("Hello there, " + mDBApi.accountInfo().displayName);

        }
    }
} 
```

以 SSL 异常结束：

```
com.dropbox.client2.exception.DropboxSSLException: javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated
    at com.dropbox.client2.RESTUtility.execute(RESTUtility.java:416)
    at com.dropbox.client2.RESTUtility.execute(RESTUtility.java:337)
    at com.dropbox.client2.RESTUtility.streamRequest(RESTUtility.java:192)
    at com.dropbox.client2.session.WebAuthSession.setUpToken(WebAuthSession.java:218)
    at com.dropbox.client2.session.WebAuthSession.getAuthInfo(WebAuthSession.java:158)
    at com.dropbox.client2.session.WebAuthSession.getAuthInfo(WebAuthSession.java:128)
    at DropboxTest.main(DropboxTest.java:45)
Caused by: javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated
    at sun.security.ssl.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:397)
    at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:128)
    at org.apache.http.conn.ssl.SSLSocketFactory.createSocket(SSLSocketFactory.java:399)
    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:143)
    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:149)
    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:108)
    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:415)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:641)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:576)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:554)
    at com.dropbox.client2.RESTUtility.execute(RESTUtility.java:385)
    ... 6 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T13:03:57.673

弄清楚了。我在 OSX 上使用 OpenJDK。我运行了 JVM`-Djavax.net.debug=ssl`进行调试，最后得到了 root 异常

```
java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty 
```

经过一番研究，我在这里找到了解决方案：http: [//architecturalatrocities.com/post/19073788679/fixing-the-trustanchors-problem-when-running-openjdk-7](http://architecturalatrocities.com/post/19073788679/fixing-the-trustanchors-problem-when-running-openjdk-7)

现在工作正常！

# android - 在按钮中添加图像时如何在开始时添加空格

> ID：14155973
> 
> 赞同：0
> 
> 时间：2013-01-04T11:07:43.053
> 
> 标签：android

在按钮中添加图像时如何添加一些空间？这是我下面的代码，图像是显示图像按钮和按钮上的文本的[URL](https://imgur.com/Jmvqe)，但图像显示按钮的最左侧。

我想在图像的开头添加一些空格，比如这个[URL 是](https://imgur.com/sshdf)的图像。

```
 <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="45dp"   
    android:orientation="horizontal" >

    <Button android:id="@+id/MyAccountbutton"
            style="?android:attr/buttonStyleSmall"
            android:layout_height="25dip"
            android:layout_width="fill_parent"
            android:layout_marginRight="35dip"
            android:layout_marginLeft="35dip"
            android:drawableLeft="@drawable/Handshake"
            android:background="@drawable/curvedplanebutton"
            android:textColor="@drawable/button_text_color"
            android:layout_marginTop="15dip"
            android:text="Payments"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:12:47.137

`android:drawablePadding="16dip"`将和添加`android:paddingLeft="16dip"`到`Button`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T11:13:05.530

添加一些`android:drawablePadding`，使图像有一些空间。使用以下代码更改您的按钮代码：

```
<Button   android:id="@+id/MyAccountbutton"
             style="?android:attr/buttonStyleSmall"
             android:layout_height="25dip"
                android:layout_width="fill_parent"
                android:layout_marginRight="35dip"
                android:layout_marginLeft="35dip"
                android:drawableLeft="@drawable/Handshake"
             android:drawablePadding="5dp"
            android:background="@drawable/curvedplanebutton"
            android:textColor="@drawable/button_text_color"
            android:layout_marginTop="15dip"
            android:text="Payments"/> 
```

# c# - 如何在 LINQ 中查询基于链接表的数据

> ID：14155975
> 
> 赞同：2
> 
> 时间：2013-01-04T11:07:49.277
> 
> 标签：c#, linq

表 1：**学生**

`StudentID, StudentName`

表 2：**课程**

`CourseID, CourseName`

表 3：**组**

`GroupID, GroupName`

表 4：**学生课程组**

`StudentID, CourseID, GroupID`

我希望所有属于“xyz”课程的学生都采用以下格式

```
Class MyStudent

    string StudentName
    String [] Groups 
```

每个学生都可以是一个或多个组的成员，我需要在我的 LINQ 查询中填充“Class MyClass”，以便它包含`StudentName`每个对象中的组列表。

您能否建议一个可以这样做的 LINQ 查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:17:28.640

```
var query = from s in db.Student
            join scg in db.StudentCourseGroup on s.StudentID equals scg.StudentID
            join c in db.Course on scg.CourseID equals c.CourseID
            join g in db.Group on scg.GroupID equals g.GroupID
            where c.CourseName == "xyz"
            select new { s, g } into x
            group x by x.s into studentGroups
            select new MyStudent {
                StudentName = studentGroups.Key.StudentName,
                Groups = studentGroups.Select(sg => sg.g.GroupName)
            }; 
```

# javascript - 如何嵌入 youtube 播放器但不使用 iframe 方法？

> ID：14155982
> 
> 赞同：1
> 
> 时间：2013-01-04T11:08:00.060
> 
> 标签：javascript, html, iframe, youtube, html5-video

是否可以使用 div 来包装 youtube 播放器而不是 iframe？由于 iframe 默认情况下被 chrome 阻止。谢谢

```
<iframe class="youtube-player" type="text/html" width="640" height="385" src="http://www.youtube.com/user/ThePianoGuys" frameborder="0"></iframe> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:17:44.427

简短的回答：没有。

长答案：Youtube 播放器托管在 youtube.com 上，因此需要 iframe。如果您不想使用 iframe，则必须拥有自己的播放器应用程序，该应用程序必须能够访问 youtube 视频流（我认为这不可能是 ATM）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T11:25:57.770

您可以使用 youtube api。您可以为嵌入添加不同的参数，就像我对“showinfo=0”所做的那样。这是一个示例代码。

```
<object width="320" height="180">
              <param name="movie" value="http://www.youtube.com/v/9bZkp7q19f0&amp;showinfo=0">
              <param name="wmode" value="transparent">
              <embed src="http://www.youtube.com/v/9bZkp7q19f0&amp;showinfo=0" type="application/x-shockwave-flash" wmode="transparent" width="320" height="180">
</object> 
```

# asp.net - 存储过程中的返回值

> ID：14155985
> 
> 赞同：0
> 
> 时间：2013-01-04T11:08:38.963
> 
> 标签：asp.net, sql-server

我在 asp.net 和 SQL Server 2005 中工作。

我想知道如何从存储过程中返回一个值，或者我们如何知道查询是否已在存储过程中成功执行。例如，我将一些数据插入到 SQL Server 数据库中，我想通过使用返回值来检查它是否正确插入。这里是代码

存储过程..

```
 ALTER PROCEDURE [dbo].[practice]
-- Add the parameters for the stored procedure here

@thename varchar(50),
@thedate datetime,

   AS
  BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

-- Insert statements for procedure here
insert into tblpractice (name,date) values (@thename,@thedate)

END 
```

代码隐藏..

```
 string name=txtname.Text.Trim();
     DateTime date = Convert.ToDateTime(txtdate.Text);
     try
     {
        SqlCommand cmd = new SqlCommand("practice", lcon);
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.AddWithValue("@thename", name);
        cmd.Parameters.AddWithValue("@thedate", date);
        lcon.Open();
        cmd.ExecuteNonQuery();

     }
     catch
     {
       throw;

     }
     finally
     {
        if (lcon != null)
        {
            lcon.Close();
        }
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:11:12.000

使用输出参数，您可以从存储过程中获取值。这是一个很好的例子

[存储过程输出参数asp.net c#](https://stackoverflow.com/questions/11292940/stored-procedure-output-parameter-asp-net-c-sharp)

另一个例子

[http://www.c-sharpcorner.com/UploadFile/rohatash/get-out-parameter-from-a-stored-procedure-in-Asp-Net/](http://www.c-sharpcorner.com/UploadFile/rohatash/get-out-parameter-from-a-stored-procedure-in-Asp-Net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T11:14:40.323

好吧，类似于 C#/java sql server 可以有`try catch blocks` 这里是链接：

[http://msdn.microsoft.com/en-us/library/ms175976.aspx](http://msdn.microsoft.com/en-us/library/ms175976.aspx)

您可以执行错误处理（oracle 可以更好地解决这个问题），或者您可以相对容易`IF block`地通过程序解决您的问题。FE，如果您返回某个数字（必须> 0），您可以对其进行检查，然后返回-1，或者如果您在过程中的选择没有返回任何条目，则返回任何内容。

这些是解决您的问题的最常见方法。

`select count(*) FROM table where ....` 在您的情况下，您可以再次查询 DB 以获取具有您在过程中已经拥有的值的条目，如果返回值则返回 0/1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:49:36.507

`ExecuteNonQuery`返回一个 int，它是受查询影响的行数。在您的示例中，如果存储过程成功执行，将插入一条记录，因此 ExecuteNonQuery 应返回 1。

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)

你也应该`using`在处理`IDisposable`对象时使用，例如

```
using (var lcon = new SqlConnection(connectionString))
{
    using (var cmd = new SqlCommand("practice", lcon))
    {
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.AddWithValue("@thename", name);
        cmd.Parameters.AddWithValue("@thedate", date);
        lcon.Open();
        return cmd.ExecuteNonQuery();
    }
} 
```

这相当于`try catch finally`块，即无论是否有错误，它都会关闭您的连接。

# iphone - Adding a button with backgroundimage and action in navigation bar

> ID：14155987
> 
> 赞同：0
> 
> 时间：2013-01-04T11:08:42.100
> 
> 标签：iphone, xcode, uibutton, uinavigationbar

I need to add a button with no title and background image and perform action when clicked on it .I need to add a button to navigation bar. I have made the navigation bar like this :

```
-(void)viewDidLoad{
[super viewDidLoad];
    [self.navigationBar setFrame:CGRectMake(0,0,320,50)];
    self.navigationBar.tintColor=[UIColor whiteColor];
} 
```

I can see the white navigation bar to it.How can I add a button to it with image and action ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:13:38.877

使用此代码

```
-(void)viewDidLoad{
[super viewDidLoad];
    [self.navigationBar setFrame:CGRectMake(0,0,320,50)];
    self.navigationBar.tintColor=[UIColor whiteColor];

   UIBarButtonItem *item = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"yourImageName"]
                         style:UIBarButtonItemStyleBordered
                        target:self action:@selector(yourButtonPressMethodName:)];   
    self.navigationItem.leftBarButtonItem = item;//use rightBarButtonItem if you want to add button on right dife
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:13:29.640

您可以使用以下代码：

```
UIBarButtonItem *rightBar=[[UIBarButtonItem alloc]initWithImage:@"img.png" style:UIBarButtonItemStyleBordered target:self action:@selector(methodname:)]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T11:23:40.667

您可以`UIBarButtonItem`使用自定义视图进行制作：-

```
UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
[btn setFrame:CGRectMake(0.0, 0.0, 75.0, 40.0)];
[btn setImage:[UIImage imageNamed:@"anyImage.png"] forState:UIControlStateNormal];
[btn addTarget:self action:@selector(yourAction) forControlEvents:UIControlEventTouchUpInside];
UIBarButtonItem *barbutton = [[UIBarButtonItem alloc]initWithCustomView:btn];
self.navigationItem.leftBarButtonItem = barbutton; 
```

# jquery - gallery with auto resizing images

> ID：14155991
> 
> 赞同：0
> 
> 时间：2013-01-04T11:08:56.123
> 
> 标签：jquery, html, gallery, lightbox

i want to make a image gallery with auto resizing images. Is that even possible? this is how i want it to work

1.  the container of the gallery is an element with fixed height and width
2.  the preview of the images could be square so it doesn't matter if the images are portrait or landscape
3.  the previews should resize itself according to how much images are inside of the container
4.  then if you click on the preview a lightbox or something like that should open with navigation, description to the picture and close button

is there anybody who could help me with this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:33:30.283

这是一个示例解决方案：[**DEMO**](http://jsbin.com/iwaruv/4/)，[代码](http://jsbin.com/iwaruv/4/edit/)（仅适用于单行，请参阅下面的更新）。

我正在使用[fancybox](http://fancyapps.com/fancybox/)，但您可以使用其他一些插件。

**jQuery** :

```
var imgCount = $('.container img').length;
ContainerWidth = $('.container').outerWidth();
$('.container img').each(function() {
  $(this).css({
    'width' : Math.floor(ContainerWidth/imgCount),
    'height' : 'auto'
  });
}); 
```

* * *

**更新**

我找到[了这个插件](https://github.com/kdocki/jquery-collage)，它似乎提供了[你需要](http://www.keltdockins.com/2/post/2012/08/jquery-collage-plugin.html#145113000411941550)的东西。

# xml - Asterisks in XML attribute value

> ID：14155996
> 
> 赞同：0
> 
> 时间：2013-01-04T11:09:19.303
> 
> 标签：xml, validation, xhtml

I have an XHTML file, with this line:

```
<tr id="some-string-with-a-*"> 
```

and I get the validation error:

> Syntax of value for attribute id of tr is not valid

I changed it to `&#42;` and I still get the same error.
Any suggestions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:13:15.723

您不能使用星号：

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

[请参阅XHTML 规范](http://www.w3.org/TR/xhtml1/)的片段标识符部分：

> 请注意，XML 1.0 第 2.3 节，产品 5 中的合法值集合远大于允许在 HTML 4 中定义的 ID 和 NAME 类型中使用的值。当将片段标识符定义为向后兼容时，只有与模式匹配的字符串[A-Za-z][A-Za-z0-9:_.-]* 应该被使用。有关详细信息，请参阅 [HTML4] 的第 6.2 节。

请注意，如果您不想支持向后兼容性，则根据 XML 允许使用其他字符，但星号也不在该列表中：

[http://www.w3.org/TR/REC-xml/#NT-Name](http://www.w3.org/TR/REC-xml/#NT-Name)