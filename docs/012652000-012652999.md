# StackOverflow 问答 12652000-12652999

# c# - Windows 8 XAMl C# 向文本框添加水印？

> ID：12652007
> 
> 赞同：1
> 
> 时间：2012-09-29T10:40:11.810
> 
> 标签：c#, xaml, windows-8, windows-runtime

如何在 Windows 8 应用程序的 WINRT XAML C# 代码中向文本框添加水印。tooltip 有一个直接属性，但 Watermark 没有相同的属性，那么实现它的最短和有效的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T06:24:40.280

*   转到**ManageNugetPacageManager** -> 搜索**Winrt Xaml Toolkit** -> 然后安装 **winrt xaml 工具包**

*   然后转到要添加水印文本框的 xaml 页面

*   然后将以下命名空间定义为 xaml 页面 `xmlns:local="using:WinRTXamlToolkit.Controls"`

*   然后转到您要添加 **水印**文本框的位置在下面添加以下行`<local:WatermarkTextBox WatermarkText="MyWaterMarkText" />`

我希望这个对你有用！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T11:02:08.517

使用要显示的水印填充控件，例如[Image 控件](https://stackoverflow.com/questions/1118496/using-image-control-in-wpf-to-display-system-drawing-bitmap)，在其上放置一个 TextBox（例如将它们放在具有相同行和列的网格中）并将背景设置为[`Brushes.Transparent`](https://stackoverflow.com/questions/1118496/using-image-control-in-wpf-to-display-system-drawing-bitmap).

有关画笔和设置 TextBox pacground 的更多信息，请参阅[在 C# 代码中设置 WPF 文本框的背景颜色。](https://stackoverflow.com/questions/979876/set-background-color-of-wpf-textbox-in-c-sharp-code)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-29T21:47:45.593

您还可以使用 WinRT XAML 工具包中的[WatermarkTextBox](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/fe0226ad68bb#WinRTXamlToolkit%2fControls%2fWatermarkTextBox.cs)来实现开箱即用的解决方案。您还可以使用 Popup 或通过将水印 TextBlock（或任何其他水印 UIElement）注入到 TextBox 的可视化树中（尽管 Toolkit 尚不支持...），将其实现为附加行为。

# java - 我将如何处理从 Android 应用程序到服务器的安全通信

> ID：12652008
> 
> 赞同：0
> 
> 时间：2012-09-29T10:40:25.283
> 
> 标签：java, android, eclipse

我需要将有关应用程序用户的加密信息发送到我的服务器。服务器还可以验证发送的信息并发送回加密的响应，以便客户端知道根据响应做什么。我相信我应该使用 JSON 和 POST PHP 来解决这个问题，但不知道如何处理它的安全方面。

一个例子是。客户通过应用内结算购买硬币。服务器收到来自应用内计费的通知并更新客户端有多少硬币。然后客户端继续使用硬币购买游戏中的物品，并将其验证和 id 发送到服务器验证的服务器，然后发送响应代码，说明客户端因欺诈活动或硬币不足而被禁止或允许客户端购买有问题的项目。

我有一些问题。

1.  我知道任何应用程序或游戏总是可以在客户端被黑客入侵，但如果验证与服务器一致的事情会变得越来越难。我如何确保客户端很难弄乱响应代码以及发送验证？SSL就够了吗？如果是这样，您能否指导我阅读一篇关于如何为 Android php 发布实现 SSL 的文章？

2.  Google 结算如何验证其用户？通过电子邮件或设备 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T15:09:08.917

都写[在这里了](http://developer.android.com/guide/google/play/billing/billing_overview.html)。在硬币示例中，您可能需要[*非托管*](http://developer.android.com/guide/google/play/billing/billing_overview.html#purchasetypes)的应用内结算。*非托管*意味着 Google Play 不会存储交易，您负责跟踪用户（通过电子邮件、设备 ID 或用户名）。

关于安全性，这实际上取决于您的要求。Google Play 的应用内结算不需要您部署自己的服务器。您甚至不需要与网络对话：它全部由 Play 应用程序管理，其作用类似于代理。假设您想使用自己的服务器，SSL 仅授予*传输*安全性，即消息的*完整性*和*机密*性，通常不由 HTTP 保证，现在由 SSL 保证。这可以防止中间人攻击等，但它实际上并不能保护您的应用程序免受*应用程序级*缺陷的影响。

如果您的后端有一个标准的 RESTful 接口，您需要根据至少**一个私有**信息（例如密码）对用户进行身份验证。否则，任何人都可以冒充`1234567890`或请求`john@example.com`，这是公开数据。换句话说，您只需要为用户创建帐户并通过 HTTPS 进行通信。

# ios - Xcode：不使用 Control+drag 从控件创建 segue 的替代方法？

> ID：12652009
> 
> 赞同：4
> 
> 时间：2012-09-29T10:40:27.467
> 
> 标签：ios, xcode, storyboard, uistoryboard

我通过 VNC 连接运行 Xcode 4.3.3 到 Max OSX 框，其中 Control+drag 不起作用。我想创建一个从第一个场景上的按钮触发的 segue。通常的方法是控制+从按钮拖动到第二个场景，但由于 VNC，这不起作用。有没有其他方法可以做到这一点？要创建出口，可以通过右键单击控件并从事件列表拖动到 VC 的源代码来解决此问题。是否有类似的解决方法来触发 segue？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T10:59:34.067

如果它是 UIButton，右键单击它，您会看到触发的 segue 选项。单击其右侧的圆形圆圈并将其拖动到目的地。

如果它是 viewController，右键单击 First Responder（橙色框）旁边的 ViewController ，您还会看到触发的 segue 选项。单击其右侧的圆形圆圈并将其拖动到目的地以创建一个segue。

# c++ - 不能包含来自 boost 库的标头

> ID：12652011
> 
> 赞同：0
> 
> 时间：2012-09-29T10:40:47.653
> 
> 标签：c++, boost

我在使用时遇到问题 - 包括 boost 库。

```
#include <boost/dynamic_bitset.hpp> 
```

而且我收到错误：boost/dynamic_bitset.hpp：没有这样的文件或目录
我的项目所在的地方有一个 boost 文件夹......*如何修复它*？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T10:53:55.363

如果您`boost`的项目中有该文件夹，您可能只需要告诉编译器在该文件夹中查找头文件。

使用 gcc/g++ 这可以通过`-I</path/to/headers>`选项（不带角括号）来完成。

其他编译器的工作方式相同，但标志可能与`-I`.

# php - PDO 对象可以存储在会话中吗？

> ID：12652014
> 
> 赞同：10
> 
> 时间：2012-09-29T10:41:14.033
> 
> 标签：php, session, pdo

我有两个问题：

*   要从 PDO 准备语句中受益，我应该首先使用 PDO 对象准备语句：

    $statement = $pdo->prepare($query, $bindings);

然后将这个 $statement 存储在 $_SESSION 中并重用这个语句，或者下次我想要执行相同的查询（使用不同的绑定值）时是否应该再次执行相同的操作（PDO::prepare）？

*   在创建 PDO 对象时使用 PDO::ATTR_PERSISTENT 时将 PDO 对象存储在 $_SESSION 中是否有用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-29T10:49:50.887

您不应将 PDO 对象存储在会话中。

使用 PDO 对象的最佳（也是唯一正确）方法是在对服务器的每个请求时创建它们。

准备好的查询的好处有两种方式：

1.  多次执行相同的查询时有速度优势
2.  有参数绑定的可能，防止SQL注入。

在会话中存储 PDO 资源时，随着来自不同客户端的请求进入，将建立与数据库的打开连接。PDO进行*连接池*，试图将与数据库的连接保持在*最低限度*，但仍然有*一些连接打开*速度。通过将 pdo 连接存储在会话中，该机制被终止。并且性能会受到影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-19T18:34:49.070

实际上'您不能序列化或反序列化 PDOStatement 实例'（引用实际的异常消息）。这里是完整的消息：

```
PHP Fatal error:  Uncaught exception 'PDOException' with message 'You cannot serialize or unserialize PDOStatement instances' in [no active file]:0
Stack trace:
#0 [internal function]: PDOStatement->__sleep()
#1 {main}
  thrown in [no active file] on line 0 
```

至于为什么 - 这里已经回答[了](https://stackoverflow.com/a/25435734/1165646)。

# c# - 以编程方式设置 Visual Studio 2010 属性

> ID：12652019
> 
> 赞同：1
> 
> 时间：2012-09-29T10:41:46.953
> 
> 标签：c#, visual-studio-2010

我正在创建一个构建代码的应用程序。但我想以编程方式设置 Visual Studio 2010 属性。

例如，我想设置 INCLUDE Directories、Reference 目录、Library Directories 等所有目录，这些目录将从 VS GUI 设置，但我希望以编程方式进行设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T10:46:25.727

你可以看msdn文章来做到这一点：http://msdn.microsoft.com/en-us/library/microsoft.build.buildengine.engine.buildprojectfile(v=vs.90).aspx

```
 using System;
using System.Collections.Generic;
using System.Text;
using Microsoft.Build.BuildEngine;

namespace BuildAProjectCS
{
    class Program
    {       
        static void Main(string[] args)
        {
            // Instantiate a new Engine object
            Engine engine = new Engine();

            // Point to the path that contains the .NET Framework 2.0 CLR and tools
            engine.BinPath = @"c:\windows\microsoft.net\framework\v2.0.xxxxx";

            // Instantiate a new FileLogger to generate build log
            FileLogger logger = new FileLogger();

            // Set the logfile parameter to indicate the log destination
            logger.Parameters = @"logfile=C:\temp\build.log";

            // Register the logger with the engine
            engine.RegisterLogger(logger);

            // Build a project file 
            bool success = engine.BuildProjectFile(@"c:\temp\validate.proj");

            //Unregister all loggers to close the log file
            engine.UnregisterAllLoggers();

            if (success)
                Console.WriteLine("Build succeeded.");
            else
                Console.WriteLine(@"Build failed. View C:\temp\build.log for details");

        }
    }
} 
```

# javascript - 修复代码 Javascript（没有 Jquery！）

> ID：12652027
> 
> 赞同：1
> 
> 时间：2012-09-29T10:43:03.890
> 
> 标签：javascript

我这里有一些代码（对不起，因为我的代码太长但我是“鸡”，所以我不知道你需要什么来为我修复代码！谢谢你！而且我的英语太糟糕了我有一些语法错误）。我想问为什么当我单击 Hello 按钮时，它不会 appendChild() tbody 标记的子项，而只是 appendChild() tbody 标记？以及为什么我可以告诉浏览器只在使用或激活函数 BuildTable() 时运行这段代码。这是我要说的部分：

```
var table = document.getElementById("form");
var thead = table.getElementsByTagName("thead")[0];
var tbody = table.getElementsByTagName("tbody")[0];

var td = thead.getElementsByTagName("td");
var td_num = td.length;
var td_class = new Array();
for(a=0;a<tattribute.length;a++){
    td_class[a] = "td_" + a;
}
var td_tag = new Array();

for(a=0;a<elem;a++){
    var tr_tag = document.createElement("tr");
    for(b=0;b<td_num;b++){
        td_tag[b] = document.createElement("td");
        td_tag[b].className = td_class[b];
        td_tag[b].appendChild(document.createElement("input"));
        tr_tag.appendChild(td_tag[b]);
    }
    tbody.appendChild(tr_tag);
}

var tr = tbody.getElementsByTagName("tr");

function SubmitForm(){
    for(a=0;a<tr.length;a++){
        var td = tr[a].getElementsByTagName("td");
        for(b=0;b<td.length;b++){
            var input = td[b].getElementsByTagName("input");
            for(c=0;c<input.length;c++){
                td[b].innerHTML = "<p>" + input[c].value + "</p>";
            }
        }
    }
    document.getElementById("submit").value = "Edit";
    document.getElementById("submit").onclick = EditForm;
    document.getElementById("submit").parentNode.removeChild(document.getElementById("reset"));
}

function EditForm(){
    var p = tbody.getElementsByTagName("p");
    var p_value = new Array;
    for(i=0;i<p.length;i++){
        if("innerText" in p[i]){
            p_value[i] = p[i].innerText;
        }else{
            p_value[i] = p[i].textContent;
        }
    }
    for(a=0;a<tr.length;a++){
        var td = tr[a].getElementsByTagName("td");
        for(b=0;b<td.length;b++){
            td[b].innerHTML = "<input />";
        }
    }
    var input_tag = tbody.getElementsByTagName("input");
    for(i=0;i<input_tag.length;i++){
        input_tag[i].value = p_value[i];
    }
    document.getElementById("submit").value = "Save";
    document.getElementById("submit").onclick = SubmitForm;
    var reset = document.createElement("input");
    reset.className = "button";
    reset.id = "reset";
    reset.type = "reset";
    reset.value = "Reset";
    document.getElementById("submit").parentNode.appendChild(reset);
} 
```

这是我的完整代码！

这是我的 HTML 代码

```
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XTHML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Home</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="style.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <div id="wrapper">
            <h1>Periodic Table</h1>
            <form name="Periodic" method="post" action="#">
                <ul id="getInfo" style="list-style: none;">
                    <li id="elem">
                        <p>How many elements do you want to enter?</p>
                        <input />
                    </li>
                    <li id="content">
                        <ul></ul>
                    </li><!--END #content-->
                </ul>
            </form>
            <button onClick="getInfo(); BuildTable();">Hello</button>
        </div><!--END #wrapper-->
        <script src="settings.js" type="text/javascript"></script>
    </body>
</html> 
```

这是我的 Javascript 代码：

```
// This part will make the input for people so that they can enter the information
var content = document.getElementById("content");
var content_ul = content.getElementsByTagName("ul")[0];
function AddContent(){
    var p = document.createElement("p");
    p.appendChild(document.createTextNode("Attribute of the elements you want to enter"));
    var input = document.createElement("input");
    input.style.display = "block";
    var add_button = document.createElement("button");
    add_button.onclick = AddContent;
    add_button.style.display = "block";
    add_button.appendChild(document.createTextNode("Add More Attribute"));
    var delete_button = document.createElement("button");
    delete_button.onclick = DeleteContent;
    delete_button.style.display = "block";
    delete_button.appendChild(document.createTextNode("Remove Attribute"));
    var li = document.createElement("li");
    li.appendChild(p);
    li.appendChild(input);
    li.appendChild(add_button);
    li.appendChild(delete_button);
    content_ul.appendChild(li);
    return false;
}
function DeleteContent(){
    var li = content.getElementsByTagName("li");
    var last_li = li.length - 1;
    if(last_li>0){
        content_ul.removeChild(li[last_li]);
        return false;
    }else{
        alert("Error! You can't remove this attribute");
        return false;
    }   
}
(function (){
    AddContent();
})();

// This part will take the input of people
var attribute = new Array();
var content_li = content_ul.getElementsByTagName("li");
var getInfo =  function (){
    var elem = document.getElementById("elem").getElementsByTagName("input")[0].value;

    for(a=0;a<content_li.length;a++){
        attribute[a] = content_li[a].getElementsByTagName("input")[0].value;
    }
    return{
        "elem": elem 
    }
}
var elem = getInfo().elem;

// Build a table with above value
function BuildTable(){
    document.Periodic.removeChild(document.getElementById("getInfo"));
    var form = document.createElement("form");
    form.id = "form";
    var form_table = document.createElement("table");

    //Create THEAD Tag
    var form_table_thead = document.createElement("thead");
    var form_table_thead_tr = document.createElement("tr");
    var form_table_thead_td = new Array();
    for(a=0;a<attribute.length;a++){
        form_table_thead_td[a] = document.createElement("td");
        form_table_thead_td[a].className = "td_" + a;
        form_table_thead_td[a].appendChild(document.createTextNode(attribute[a]));
        form_table_thead_tr.appendChild(form_table_thead_td[a]);
    }
    form_table_thead.appendChild(form_table_thead_tr);

    // Create TBODY Tag
    var form_table_tbody = document.createElement("tbody");
    var form_table_tbody_tr = new Array();
    for(a=0;a<elem;a++){
        form_table_tbody_tr[a] = document.createElement("tr");
        var form_table_tbody_tr_td = new Array();
        for(b=0;b<attribute.length;b++){
            form_table_tbody_tr_td[b] = document.createElement("td");
            var form_table_tbody_tr_td_input = document.createElement("input");
            form_table_tbody_tr_td[b].className = "td_" + b;
            form_table_tbody_tr_td[b].appendChild(form_table_tbody_tr_td_input);
            form_table_tbody_tr[a].appendChild(form_table_tbody_tr_td[b]);
            alert(form_table_tbody_tr_td[b].innerHTML);
        }
        form_table_tbody.appendChild(form_table_tbody_tr[a]);
    }
    form_table.appendChild(form_table_thead);
    form_table.appendChild(form_table_tbody);
    document.Periodic.appendChild(form_table);
}
var table = document.getElementById("form");
var thead = table.getElementsByTagName("thead")[0];
var tbody = table.getElementsByTagName("tbody")[0];

var td = thead.getElementsByTagName("td");
var td_num = td.length;
var td_class = new Array();
for(a=0;a<tattribute.length;a++){
    td_class[a] = "td_" + a;
}
var td_tag = new Array();

for(a=0;a<elem;a++){
    var tr_tag = document.createElement("tr");
    for(b=0;b<td_num;b++){
        td_tag[b] = document.createElement("td");
        td_tag[b].className = td_class[b];
        td_tag[b].appendChild(document.createElement("input"));
        tr_tag.appendChild(td_tag[b]);
    }
    tbody.appendChild(tr_tag);
}

var tr = tbody.getElementsByTagName("tr");

function SubmitForm(){
    for(a=0;a<tr.length;a++){
        var td = tr[a].getElementsByTagName("td");
        for(b=0;b<td.length;b++){
            var input = td[b].getElementsByTagName("input");
            for(c=0;c<input.length;c++){
                td[b].innerHTML = "<p>" + input[c].value + "</p>";
            }
        }
    }
    document.getElementById("submit").value = "Edit";
    document.getElementById("submit").onclick = EditForm;
    document.getElementById("submit").parentNode.removeChild(document.getElementById("reset"));
}

function EditForm(){
    var p = tbody.getElementsByTagName("p");
    var p_value = new Array;
    for(i=0;i<p.length;i++){
        if("innerText" in p[i]){
            p_value[i] = p[i].innerText;
        }else{
            p_value[i] = p[i].textContent;
        }
    }
    for(a=0;a<tr.length;a++){
        var td = tr[a].getElementsByTagName("td");
        for(b=0;b<td.length;b++){
            td[b].innerHTML = "<input />";
        }
    }
    var input_tag = tbody.getElementsByTagName("input");
    for(i=0;i<input_tag.length;i++){
        input_tag[i].value = p_value[i];
    }
    document.getElementById("submit").value = "Save";
    document.getElementById("submit").onclick = SubmitForm;
    var reset = document.createElement("input");
    reset.className = "button";
    reset.id = "reset";
    reset.type = "reset";
    reset.value = "Reset";
    document.getElementById("submit").parentNode.appendChild(reset);
} 
```

谢谢你帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T14:20:26.467

这似乎是家庭作业（因为您的评论“我正在学习 Javascript，而我的老师说我只能使用 Javascript！”），所以我会给您一些提示来解决这个问题。

1.  `elem`在第 53 行定义为`var elem = getInfo().elem;`. 此脚本在页面加载时执行，您的 HTML 源代码没有输入值。Ergo，`elem`获取一个值，`""`所以你的循环添加`input`和`td`元素到表体永远不会运行。添加`value="1"`（或 2、30、400、30,000 等）的属性以供循环执行。

2.  假设您确实希望在用户单击“Hello”按钮后执行循环，您需要将该循环放在不同的函数中，然后需要在该函数之后调用`Build_Table();`或简单地将其放在函数定义中（最后）而`Build_Table`不是添加`value`属性。

3.  这段代码中的大多数错误将是两个文体问题的结果：

    *   您似乎不知道“[变量提升](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)”。您正在定义许多变量，由于提升，这些变量将无法正确初始化。在函数的顶部定义所有变量（因为这是在执行期间定义它们的地方），然后稍后在更合适的时间初始化它们。
    *   范围界定不足。大多数变量都在全局命名空间中声明（它们不需要在那里），这使得调试有点像噩梦。尝试将您的代码分解为更多函数，并且只声明这些函数的本地变量。如果您确实需要函数范围之外的变量（这种情况很少见或应该是），请定义一个全局变量并向其添加属性，以表示您在函数范围之外需要的变量。

以下是在全局命名空间中仅使用一个变量的示例：

```
var MyGlobalVar = {
    "someFunction": function () {
        var internalVariable = 0;
        if (!MyGlobalVar.externalVariable) {
            MyGlobalVar.externalVariable = 2;
        }
        return MyGlobalVar.externalVariable + internalVariable;
    },
    "logResults": function () {
        console.log(someFunction());
    };
};
MyGlobalVar.logResults(); 
```

我希望这对你的任务有所帮助并祝你好运。

# android - 将 ASP.NET 网站转换为原生 Android/iOS 应用程序

> ID：12652028
> 
> 赞同：5
> 
> 时间：2012-09-29T10:43:08.550
> 
> 标签：android, asp.net, ios, cross-platform

我有一个 ASP.NET 网站，我想将其转换为适用于 iOS/Android 设备的可下载本机应用程序。我想知道这是否可能 - 我知道使网站适合移动设备（服务器/客户端）所需的所有调整，但我目前不知道如何将网站编译为本机应用程序。

此外，由于我的网站具有服务器端逻辑，本机应用程序应该像我的普通网站一样工作，在客户端和服务器之间发送和接收数据。

谢谢，罗恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T14:04:24.140

虽然您认为原生应用程序和网站在从服务器发送和接收数据方面是相似的，但这可能是唯一的相似之处。

作为一个概念，原生应用程序和网站非常不同，我认为您不能期望在两者之间进行转换。根据网站的实施方式，工作量可能会增加或减少。

ASP.NET 鼓励一种开发模型，您不会将客户端和服务器视为单独的实体，并尝试将底层技术（HTTP、HTML、Web 服务器）抽象化。这就是为什么大多数 ASP.NET 网站通常以您在开发应用程序时不会遵循的方式实现。

我认为您最好的选择是使现有网站适合移动设备，或者只是从头开始实施本机应用程序。有关第一个建议的信息，您可以阅读 Scott Hanselman 的[博客文章](http://www.hanselman.com/blog/CreateAGreatMobileExperienceForYourWebsiteTodayPlease.aspx)。至于原生应用，我相信你可以通过谷歌找到很多资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-14T11:58:46.210

对于快速解决方案，为您现有的站点创建一个移动友好的响应式 CSS 并使用 Cordova/Apache Phonegap shell 将其嵌入为初始页面。

如果您的 ASP.NET 页面是使用 MVC 开发的，我建议您编写另一个使用 ASP.NET Web API 的 HTML5 页面并将其与 Cordova 一起使用。当然，如果可以转换成WEB API结构，你也可以选择用平台的原生语言（如IOS中的Swift或Android中的J2ME）开发原生应用。

将老式 ASP.NET 应用程序转换为移动原生应用程序将非常困难。有一次，我为类似的问题编写了一个 Cordava 混合应用程序，它使用浏览器对象在本机应用程序上打开一些本地和服务器页面。本机部分用于标题和选项卡控件导航。混合应用类似于原生应用，您可以从应用商店/google play 下载，但它们使用内部网络浏览器来显示内容。您的应用程序的某些部分仍然可以是原生的。

如果您对这种 Web/Hybrid 应用程序开发方法感兴趣，您还可以查看[Ionic Framework](http://ionicframework.com/)。

首先看看[Hybrid](http://www.icenium.com/blog/icenium-team-blog/2012/06/14/what-is-a-hybrid-mobile-app-)应用程序和[Cordova](http://cordova.apache.org/)。祝你好运！

# javascript - Emscripten：将结构指针作为参数传递

> ID：12652030
> 
> 赞同：1
> 
> 时间：2012-09-29T10:43:21.170
> 
> 标签：javascript, malloc, emscripten

我想为 emscripten 分配一个结构并使用 ccall 将其传递给一个函数。c 结构体如下所示：

```
typedef  float HPDF_REAL;
typedef  struct  _HPDF_Point {
  HPDF_REAL  x;
  HPDF_REAL  y;
} HPDF_Point; 
```

所以我在 Javascript 中分配了两个浮点数并将其作为参数传递

```
struct_ptr = Module['allocate']([123,321], 'float', ALLOC_NORMAL)
res = Module['ccall']('HPDF_Page_GetCurrentTextPos', 'number', ['number', 'number'], [page_ptr, struct_ptr]) 
```

但是当我得到结果结构数据时

```
FLOAT_SIZE = 4
point = {
  x: getValue(struct_ptr, 'float')
  y: getValue(struct_ptr+FLOAT_SIZE, 'float')
} 
```

我分配的内存没有被触及，仍然`point.x==123`和`point.y==321`。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T17:29:16.507

首先， allocate() 是一个内部函数 - 正如文档所说（参见函数定义上方的注释），它使用起来很棘手，不推荐使用。相反，最好只使用 _malloc 分配一些空间，然后使用 setValue 写入它。

其次，确保您的 C 函数将结构作为指针而不是引用（C++ 可以这样做）。将函数粘贴到此处（原始 C 和编译后的 JS）以便我们为您提供帮助，或者在其中添加调试语句以查看发生了什么。

# java - JAVA在线程中获取可运行对象

> ID：12652033
> 
> 赞同：0
> 
> 时间：2012-09-29T10:43:42.840
> 
> 标签：java, multithreading

我正在使用这个标准构造函数：

```
 new Thread(myRunnable); 
```

其中 myRunnable 是具有 Runnable 接口的自定义对象。

在线程过程中我需要访问那个可运行对象（告诉进程状态和进度），我该怎么办？

如果我的对象是一个线程，我会使用：

```
 (MyThread) Thread.getCurrentThread() 
```

但是作为参数传递的runnable我无法得到。

**编辑**

这是我的代码结构：

```
public abstract class ProgressThread{
    private float progress;     //... progress getter, setter...    
}

public class MyRunnable extends ProgressThread implements Runnable{
    public void run(){
        //starting processes...
        Job1 j1=new Job1().do();
        Job1 j2=new Job2().do();
    }

    private class Job1(){
        for(int i=0;i<10;i++){
            // do something
            float progress=i/10;
            // set job progress in thread
            Thread.getCurrentThread().getRUNNABLE().setProgress(progress);
        }
    }

} 
```

这就是为什么我需要 getRUNNABLE() 方法（或解决方法！）。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T10:47:57.613

只需保留对可运行对象的引用，以便在需要时访问它

```
Runnable myRunnable = ...
new Thread(myRunnable).start();

// do what you wish with the runnable
myRunnable.foo(); 
```

# symfony - 如何在 DQL 中按 NULL 排序？

> ID：12652034
> 
> 赞同：9
> 
> 时间：2012-09-29T10:43:59.127
> 
> 标签：symfony, doctrine-orm, dql

我正在使用 Symfony2 框架和 Doctrine ORM 构建一个应用程序。我有一张缺少一些 IATA 代码的航空公司的表格。我正在输出一个按此 IATA 代码排序的列表，但我得到了不希望的结果，即具有空 IATA 代码的记录被排序在顶部。

在 MySQL 中，这很简单，`ORDER BY ISNULL(code_iata), code_iata`但我对 DQL 的等价物一无所知。我试过

```
$er->createQueryBuilder('airline')->orderBy('ISNULL(airline.codeIata), airline.codeIata', 'ASC') 
```

但这给了我一个语法错误。

Doctrine 文档也没有给我答案。有办法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-04-11T08:44:30.277

您可以在 DQL 中使用以下技巧对 NULL 值进行最后排序

```
$em->createQuery("SELECT c, -c.weight AS HIDDEN inverseWeight FROM Entity\Car c ORDER BY inverseWeight DESC"); 
```

关键字（自`HIDDEN`Doctrine 2.2 起可用）将导致从结果集中省略该`inverseWeight`字段，从而防止不希望的[混合结果](http://doctrine-orm.readthedocs.org/en/latest/reference/dql-doctrine-query-language.html#pure-and-mixed-results)。

（排序字段值是倒置的，因此顺序也必须倒置，这就是查询使用`DESC`order，而不是`ASC`.)

学分属于[这个答案](https://stackoverflow.com/questions/2051602/mysql-orderby-a-number-nulls-last/8174026#8174026)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-02-03T17:36:22.187

最不显眼的通用解决方案是将`CASE`表达式与`HIDDEN`关键字结合使用。

```
 SELECT e,
     CASE WHEN e.field IS NULL THEN 1 ELSE 0 END HIDDEN _isFieldNull
     FROM FooBundle:Entity e
 ORDER BY _isFieldNull ASC 
```

适用于数字和其他字段类型，不需要扩展 Doctrine。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-03-11T08:35:17.640

如果您想在 SQL 中执行类似于“NULLS LAST”的操作（在我的情况下使用 PostgreSQL）：

```
ORDER BY freq DESC NULLS LAST 
```

您可以将 COALESCE 函数与 Doctrine Query Builder 一起使用（HIDDEN 将隐藏查询结果集中的字段“freq”）。

```
$qb = $this->createQueryBuilder('d')
           ->addSelect('COALESCE(d.freq, 0) AS HIDDEN freq')
           ->orderBy('freq', 'DESC')
           ->setMaxResults(20); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-02T11:45:41.663

这是一个自定义步行器的示例，可以准确地获得您想要的东西。我从 Doctrine 的 github 问题中获取了它：

[https://github.com/doctrine/doctrine2/pull/100](https://github.com/doctrine/doctrine2/pull/100)

但是那里的代码在 MySQL 中对我不起作用。我已经修改它以在 MySQL 中工作，但我根本没有测试其他引擎。

例如，将以下 walker 类放在`YourNS\Doctrine\Waler\`目录中；

```
<?php

namespace YourNS\Doctrine\Walker;

use Doctrine\ORM\Query\SqlWalker;

class SortableNullsWalker extends SqlWalker
{
   const NULLS_FIRST = 'NULLS FIRST';
   const NULLS_LAST = 'NULLS LAST';

   public function walkOrderByClause($orderByClause)
   {
      $sql = parent::walkOrderByClause($orderByClause);

      if ($nullFields = $this->getQuery()->getHint('SortableNullsWalker.fields'))
      {
         if (is_array($nullFields))
         {
            $platform = $this->getConnection()->getDatabasePlatform()->getName();
            switch ($platform)
            {
            case 'mysql':
               // for mysql the nulls last is represented with - before the field name
               foreach ($nullFields as $field => $sorting)
               {
                  /**
                   * NULLs are considered lower than any non-NULL value,
                   * except if a – (minus) character is added before
                   * the column name and ASC is changed to DESC, or DESC to ASC;
                   * this minus-before-column-name feature seems undocumented.
                   */
                  if ('NULLS LAST' === $sorting)
                  {
                     $sql = preg_replace_callback('/ORDER BY (.+)'.'('.$field.') (ASC|DESC)/i', function($matches) {
                        if ($matches[3] === 'ASC') {
                           $order = 'DESC';
                        } elseif ($matches[3] === 'DESC') {
                           $order = 'ASC';
                        }
                        return ('ORDER BY -'.$matches[1].$matches[2].' '.$order);
                     }, $sql);
                  }
               }
                  break;
            case 'oracle':
            case 'postgresql':
               foreach ($nullFields as $field => $sorting)
               {
                  $sql = preg_replace('/(\.' . $field . ') (ASC|DESC)?\s*/i', "$1 $2 " . $sorting, $sql);
               }
               break;
            default:
               // I don't know for other supported platforms.
               break;
               }
            }
         }

         return $sql;
   }
} 
```

然后：

```
use YourNS\Doctrine\Walker\SortableNullsWalker;
use Doctrine\ORM\Query;

[...]

$qb = $em->getRepository('YourNS:YourEntity')->createQueryBuilder('e');
$qb
   ->orderBy('e.orderField')
   ;

$entities = $qb->getQuery()
  ->setHint(Query::HINT_CUSTOM_OUTPUT_WALKER,  '\YourNS\Doctrine\Walker\SortableNullsWalker')
  ->setHint('SortableNullsWalker.fields', array(
     'sortOrder' => SortableNullsWalker::NULLS_LAST
  ))
  ->getResult(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-29T16:53:25.323

DQL 不包含普通 SQL 的所有功能。幸运的是，您可以定义**自定义 DQL 方法**来完成此操作。

**一些资源：**

[http://punkave.com/window/2012/07/24/for-the-php-crowd-adding-custom-functions-to-doctrine-2-dql](http://punkave.com/window/2012/07/24/for-the-php-crowd-adding-custom-functions-to-doctrine-2-dql)

[http://docs.doctrine-project.org/en/2.1/cookbook/dql-user-defined-functions.html](http://docs.doctrine-project.org/en/2.1/cookbook/dql-user-defined-functions.html)

[http://symfony.com/doc/2.0/cookbook/doctrine/custom_dql_functions.html](http://symfony.com/doc/2.0/cookbook/doctrine/custom_dql_functions.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-29T17:34:17.803

默认情况下，MySQL 仍然会对一个`NULL`值进行排序；如果已排序，它将仅将其放在结果集的开头，如果已排序`ASC`，则将其放在末尾`DESC`。在这里，您正在寻找 sort `ASC`，但您希望`NULL`值位于底部。

不幸的是，尽管 Doctrine 功能强大，但在这里不会提供太多支持，因为功能支持是有限的，而且大部分仅限于`SELECT`, `WHERE`, 和`HAVING`子句。如果 QueryBuilder 符合以下任何一项，那么您实际上根本不会遇到问题：

*   `select()`公认`ISNULL()`
*   `orderBy()`或`addOrderBy()`支持`ISNULL()`
*   该类支持`UNION`s 的概念（有了这个，您可以运行两个查询：一个是在哪里`codeIata`，`NULL`一个在哪里不是，你可以独立地对每个查询进行排序）

也就是说，您可以使用 ArtWorkAD 已经提到的用户定义函数，或者您可以使用两个不同的 Doctrine 查询复制最后一点：

```
$airlinesWithCode = $er->createQueryBuilder("airline")
    ->where("airline.iataCode IS NULL")
    ->getQuery()
    ->getResult();
$airlinesWithoutCode = $er->createQueryBuilder("airline")
    ->where("airline.iataCode IS NOT NULL")
    ->getQuery()
    ->getResult(); 
```

然后你可以将它们组合成一个数组，或者在你的模板中独立处理它们。

另一个想法是让 DQL 在一个数据集中返回所有内容，让 PHP 完成繁重的工作。就像是：

```
$airlines = $er->findAll();
$sortedAirlines = array();
// Add non-NULL values to the end if the sorted array
foreach ($airlines as $airline)
    if ($airline->getCodeIata())
        $sortedAirlines[] = $airline;
// Add NULL values to the end of the sorted array
foreach ($airlines as $airline)
    if (!$airline->getCodeIata())
        $sortedAirlines[] = $airline; 
```

这两者的缺点是您将无法`LIMIT`在 MySQL 中执行 s，因此它可能仅适用于相对较小的数据集。

无论如何，希望这能让你上路！

# mysql - 如何查找列表/集合是否包含在另一个列表中

> ID：12652037
> 
> 赞同：3
> 
> 时间：2012-09-29T10:44:11.547
> 
> 标签：mysql, sql, relational-division

我有一个产品 ID 列表，我想找出哪些订单包含所有这些产品。Orders 表的结构如下：

```
order_id | product_id
----------------------
1        | 222
1        | 555
2        | 333 
```

显然，我可以通过 PHP 中的一些循环来做到这一点，但我想知道是否有一种优雅的方法可以纯粹在 mysql 中做到这一点。我理想的幻想查询是这样的：

```
SELECT order_id
FROM orders
WHERE (222,555) IN GROUP_CONCAT(product_id)
GROUP BY order_id 
```

有没有希望或者我应该去读托尔金？:) 另外，出于好奇，如果在 mysql 中不可能，是否还有其他数据库具有此功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T10:45:25.377

你很亲近

```
SELECT order_id
FROM orders
WHERE product_id in (222,555) 
GROUP BY order_id
HAVING COUNT(DISTINCT product_id) = 2 
```

关于您在关系代数中的“出于好奇”问题，这可以通过[除法](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)来实现。AFAIK 没有 RDBMS 实现了任何扩展，使其在 SQL 中变得如此简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T14:26:39.287

我倾向于只在have子句中进行集合比较：

```
select order_id
from orders
group by order_id
having sum(case when product_id = 222 then 1 else 0 end) > 0 and
       sum(case when product_id = 555 then 1 else 0 end) > 0 
```

这就是说：给我所有订单，其中订单至少有一种产品 222 和至少一种产品 555。

我更喜欢这个有两个原因。首先是普遍性。您可以安排更复杂的条件，例如 222 或 555（只需将“and”更改为“or”）。或者，333 和 555 或 222 没有 555。

其次，当您创建查询时，您只需将条件放在一个地方，即`having`子句中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T15:14:03.867

```
CREATE TABLE orders
        ( order_id INTEGER NOT NULL
        , product_id INTEGER NOT NULL
        );
INSERT INTO orders(order_id,product_id) VALUES
 (1, 222 ) , (1, 555 ) , (2, 333 )
, (3, 222 ) , (3, 555 ) , (3, 333 ); -- order#3 has all the products

CREATE TABLE products AS (SELECT DISTINCT product_id FROM orders);

SELECT *
FROM orders o1
   --
   -- There should not exist a product
   -- that is not part of our order.
   --
WHERE NOT EXISTS (
        SELECT *
        FROM products pr
        WHERE 1=1
           -- extra clause: only want producs from a literal list
        AND pr.product_id IN (222,555,333)
           --  ... that is not part of our order...
        AND NOT EXISTS ( SELECT *
                FROM orders o2
                WHERE o2.product_id = pr.product_id
                AND o2.order_id = o1.order_id
                )
        ); 
```

结果：

```
 order_id | product_id 
----------+------------
        3 |        222
        3 |        555
        3 |        333
(3 rows) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T14:42:36.350

假设您的数据库已正确规范化，即给定订单上没有重复的产品

mysql主义：

```
select order_id
from orders
group by order_id
having sum(product_id in (222,555)) = 2 
```

标准 SQL：

```
select order_id
from orders
group by order_id
having sum(case when product_id in (222,555) then 1 end) = 2 
```

* * *

如果有重复：

```
CREATE TABLE tbl
    (`order_id` int, `product_id` int)
;

INSERT INTO tbl
    (`order_id`, `product_id`)
VALUES
    (1, 222),
    (1, 555),
    (2, 333),
    (1, 555)
; 
```

然后这样做：

```
select order_id
from tbl
group by order_id
having count(distinct case when product_id in (222,555) then product_id end) = 2 
```

现场测试：[http ://www.sqlfiddle.com/#!2/fa1ad/5](http://www.sqlfiddle.com/#!2/fa1ad/5)

# c# - 修剪或删除类型 (0x0000) 的字符

> ID：12652039
> 
> 赞同：0
> 
> 时间：2012-09-29T10:44:33.250
> 
> 标签：c#, xml

我编写了一个 C# 应用程序，它提取 pdf 中包含的所有文本并将其存储在数据库中。

我遇到的问题是重用存储的信息并使用 XML 在我的网站上显示它时。我收到一个错误，指出无效字符 0x0000 之类的内容，根据我的阅读，XML 中不允许使用 0x0000 字符。

所以，我的问题是；有谁知道如何在将其存储到数据库中之前使用 C# 删除所有类型为 0x0000 的字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T10:49:56.723

如何使用[替换](http://msdn.microsoft.com/en-us/library/system.string.replace.aspx)

> 返回一个新字符串，其中当前字符串中出现的所有指定 Unicode 字符或字符串都替换为另一个指定的 Unicode 字符或字符串。

```
string s = "a\0b";
string r = s.Replace('\0',' '); 
```

# c - 如何检查后台运算符'&'的命令？

> ID：12652046
> 
> 赞同：-1
> 
> 时间：2012-09-29T10:45:41.413
> 
> 标签：c, linux, shell, unix, background-process

我正在用 C 语言编写脚本。我从用户那里接受输入命令。现在我想确定输入命令中是否包含后台操作员？如果是，则在后台运行该 linux 系统命令，然后要求用户输入他要执行的另一个命令。我是这个领域的新手，所以没有太多想法，请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T10:59:40.197

您需要在字符串中找到您的 '&' 字符。

您可以使用`strrchr`, 从末尾开始搜索字符串中的字符。如果找到，它将返回指向该字符的指针，如果未找到，则返回 NULL。接下来，检查它是否是字符串的最后一个非空白字符。（你可以从这个指针迭代直到你的字符串结束（'\0'））

这不是一个完美的解决方案（你可以找到这样的 shell 命令 : `ls & ;`），但在你的情况下，我认为这就足够了。

# perl - 如果 `foreach-when` 语句中的最后一个 `when` 语句为假，则始终执行默认语句

> ID：12652047
> 
> 赞同：1
> 
> 时间：2012-09-29T10:45:42.677
> 
> 标签：perl

在我的程序中，我将`file names`命令行列表传递给我的程序，并检查每个文件是否为-`executable`和..`readable``writable`

我正在使用语句来解决上述问题..但是使用和语句`foreach-when`似乎存在一些问题，这可能是我没有正确使用，但它给了我意想不到的结果..`when``default`

这是我的代码： -

```
#!/perl/bin
use v5.14;
use warnings;

foreach (@ARGV) {
    say "*************Checking file $_ *******************";
    when (-r $_) { say "File is Readable"; continue; }
    when (-w $_) { say "File is Writable"; continue; }   # This condition is true
    when (-x $_) { say "File is Executable" }   # This condition is false
    default      { say "None of them" }      # Executed
} 
```

我`continue`只在前两个中添加了一个 ,`when`以使 perl 检查所有条件，而不管文件名如何。

另外，我没有`continue`在倒数第二个中添加 a `when`，因为我只希望`default`在没有执行的`when`情况下执行我的..

这里的问题是，如果**最后一个`when`条件为 false**，它不会进入块，然后**它继续执行`default`**即使**我的前两条`when`语句都已满足。**

我通过更改 my 的顺序检查了这个问题的原因，`when`发现如果只`when`执行最后一个，它会看到没有`continue`，因此它不会执行该`default`语句..

所以，在上面的代码中，我已经交换了`-x`..`-r`我的文件是可读的，所以最后`when`在这种情况下将被执行..然后我的`default`语句没有被执行..

```
#!/perl/bin
use v5.14;
use warnings;

foreach (@ARGV) {
    say "*************Checking file $_ *******************";
    when (-x $_) { say "File is Executable"; continue; }
    when (-w $_) { say "File is Writable"; continue; }
    when (-r $_) { say "File is Readable" }   # This condition is true
    default      { say "None of them" }   # Not executed
} 
```

所以，我想问一下，如何处理这些情况..我希望它像`given-when`添加到 Perl 中的语句一样工作..
它应该检查所有，如果至少执行了一个，则`when`跳过..`default``when`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T11:08:39.740

由于`default`不是“其他条件”，但可以看作是*when that always match*，因此对于您正在尝试做的事情来说，这并不是一个很好的匹配。在您的默认情况下，您对该块中的早期匹配一无所知，并且您不能在不知道以后`when`是否匹配的情况下更早地突破主题化器，因此您必须使用布尔值“破解”它表示较早匹配的一个，或者只是将其交换为处理“剩余”条件的时间；

```
foreach (@ARGV) {
    say "*************Checking file $_ *******************";
    when (-r $_)             { say "File is Readable";   continue; }
    when (-w $_)             { say "File is Writable";   continue; }
    when (-x $_)             { say "File is Executable"; continue; }
    when (!-r && !-w && !-x) { say "None of them" }      
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T05:29:15.930

请注意，perl 不会按文件名缓存统计结果，因此您将一遍又一遍地声明同一个文件。它确实提供了上次发布的统计信息的“_”缓存，因此您可以：

```
stat $file;
if ( -r _ ) { ... }
if ( -w _ ) { ... } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T01:02:13.607

switch 语句最适合用于“其中一个将匹配”。在多个案例可能匹配的情况下使用它会导致不得不滥用逻辑结构才能使其工作。必须使用失败，并且让您的案件依赖于订单，是一个危险信号。

更好的选择可能是创建匹配数组。

```
for my $file (@files) {
    my @flags;
    push @flags, "readable"   if -r $file;
    push @flags, "writable"   if -w $file;
    push @flags, "executable" if -x $file;

    if( @flags ) {
        printf "%s is %s\n", $file, join(", ", @flags);
    }
    else {
        say "$file has no flags set";
    }
} 
```

构建数组具有更灵活的好处。您可以打印出一行或多行。它还避免了必须在最后再次重复所有标志，这违反了[DRY 原则](https://secure.wikimedia.org/wikipedia/en/wiki/Don%27t_repeat_yourself)。

另一种方法是使用 do 块来设置标志。

```
for my $file (@files) {
    my $has_flags;
    do { say "$file is readable";   $has_flags = 1; } if -r $file;
    do { say "$file is writable";   $has_flags = 1; } if -w $file;
    do { say "$file is executable"; $has_flags = 1; } if -x $file;

    if( !$has_flags ) {
        say "$file has no flags set";
    }
} 
```

我提到这一点主要是为了强调构建一系列匹配项的优越性。使用标志的缺点是每个条件都必须立即采取行动，从而使其灵活性降低。您必须重复设置一个标志，违反 DRY 并且很容易被遗忘，而对于数组，数据和标志是一回事。

# ipad - 单元格内容出现在模拟器和 iPhone 上，但不在 iPad 上

> ID：12652048
> 
> 赞同：0
> 
> 时间：2012-09-29T10:45:50.647
> 
> 标签：ipad, ios-simulator, ios6

我在单独的 tableViews 中有两个非常简单的自定义单元格，因为我将我的项目移植到 iOS 6，所以只在模拟器和 iPhone 上显示它们的内容，而不是在 iPad 上显示它们的内容。奇怪的是，即使是我添加到单元格中的一些静态对象，甚至是背景的颜色，也没有显示出来，就像缺少故事板的一些链接一样，奇怪的是只出现在设备中。它可能是什么，我怎样才能更好地检查发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T14:53:08.690

事实上，我在模拟器和 iPad 中测试了两种不同的本地化，被我忘记翻译的字符串欺骗了。问题归结为故事板返回给我一个空原型，因此让我的程序运行一段旧代码，在这种情况下创建一个新（空）单元格。为什么故事板在要求原型单元时返回 nil 仍不清楚；然而，一旦我发现一个本地化有效，我将该配置复制到其他配置，一切都恢复正常。

# android - SimpleCursorAdapter 与 CursorAdapter？

> ID：12652049
> 
> 赞同：7
> 
> 时间：2012-09-29T10:46:00.390
> 
> 标签：android, simplecursoradapter, android-cursor, android-cursoradapter

我有一些带有数据的光标。我有 TextView 其可见性取决于光标项目的某些属性。我使用 SimpleCursorAdapter 并覆盖 getView 方法。但我实际上并没有使用 SimpleCursorAdapter 的 from 和 to 属性。

将我的适配器更改为 CursorAdapter 并覆盖 newView 和 bindView 方法会更好吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T12:12:00.217

CursorAdapter 是抽象的，需要扩展。另一方面，SimpleCursorAdapter 不是抽象的。

注意 newView(Context context, Cursor cursor, ViewGroup parent) 在 CursorAdapter 中是抽象的，但在 SimpleCursorAdapter 中实现。这是因为 SimpleCursorAdapter 有一个特定的机制来启动视图，而 CursorAdapter 将它留给开发人员。

来源：[SimpleCursorAdapter 和 CursorAdapter](https://stackoverflow.com/a/8382741/801437)

**添加：**

`I have TextView which visibility depends on some property of the item of cursor.`

为此，您可以检查[SimpleCursorAdapter.ViewBinder](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.ViewBinder.html)接口。

# python - Wx Python图像查看器-atfer打开图像文件菜单太紧

> ID：12652052
> 
> 赞同：3
> 
> 时间：2012-09-29T10:46:08.507
> 
> 标签：python, user-interface, uiimageview, wxpython, wxwidgets

我在 Ubuntu 12.04 上使用 Python 2.7 和 wx。

我使用 wx 在 Python 中编写了一个很小很小的图像查看器。一切都很好，但我的应用程序主窗口的大小有问题。

当我打开一张普通尺寸的图片时，我看到：

![在此处输入图像描述](../Images/ce23b6364366916a919a58f1706a44b5.png)

这很好。

但是当我打开另一个文件时，可以这样说（biiiiig 图的图像）：

![在此处输入图像描述](../Images/56d112016587791c0a926f2e285ec26f.png)

我的应用程序窗口的宽度错误，我的意思是看一下菜单，它.. 太紧了，您甚至看不到“编辑”选项。

如何解决？我刚开始在 Python 中使用 wx，所以请耐心等待 :)

我的代码：

```
# -*- coding: utf-8 -*-
#!/usr/bin/env python

import wx
import os

class MyGUIApp(wx.App):

    def __init__(self, redirect=False, filename=None):

        wx.App.__init__(self, redirect, filename)
        self.frame = wx.Frame(None, title='MyGUIApp v0.2')
        self.panel = wx.Panel(self.frame)

        self.filename = ''
        self.dirname = ''
        width, height = wx.DisplaySize()
        self.pictureMaxSize = 500

        img = wx.EmptyImage(self.pictureMaxSize, self.pictureMaxSize)
        self.imageCtrl = wx.StaticBitmap(self.panel, wx.ID_ANY, wx.BitmapFromImage(img))

        self.mainSizer = wx.BoxSizer(wx.VERTICAL)
        self.mainSizer.Add(self.imageCtrl, 0, wx.ALL|wx.CENTER, 5)
        self.panel.SetSizer(self.mainSizer)
        self.mainSizer.Fit(self.frame)

        self.createMenus()  
        self.connectItemsWithEvents()
        self.createKeyboardShortcuts()

        self.frame.SetMenuBar(self.menuBar)
        self.frame.Show()

    def connectItemsWithEvents(self) :
        self.Bind(wx.EVT_MENU, self.openEvent, self.openItem)
        self.Bind(wx.EVT_MENU, self.clearEvent, self.clearItem)

    def createKeyboardShortcuts(self) :
      self.accel_tbl = wx.AcceleratorTable([(wx.ACCEL_CTRL, ord('C'), self.clearItem.GetId()),
                                            (wx.ACCEL_CTRL, ord('O'), self.openItem.GetId()),
                                            ])
      self.frame.SetAcceleratorTable(self.accel_tbl)

    def createMenus(self) :
        self.menuBar = wx.MenuBar()
        self.menuFile = wx.Menu()

        self.menuBar.Append(self.menuFile, '&File')      
        self.openItem = wx.MenuItem(self.menuFile, wx.NewId(), u'&open ...\tCTRL+O')
        #self.openItem.SetBitmap(wx.Bitmap('images/document-open.png'))
        self.menuFile.AppendItem(self.openItem)

        self.menuEdit = wx.Menu()
        self.menuBar.Append(self.menuEdit, '&Edit')
        self.clearItem = wx.MenuItem(self.menuEdit, wx.NewId(), '&Clear\tCTRL+C')
        #self.clearItem.SetBitmap(wx.Bitmap('images/clear.png'))
        self.menuEdit.AppendItem(self.clearItem)

    def openEvent(self, event) :
        openDialog = wx.FileDialog(self.frame, u'Open file', "File", "", "*.*", wx.OPEN)
        if openDialog.ShowModal() == wx.ID_OK :
            self.filename = openDialog.GetFilename()
            self.dirname = openDialog.GetDirectory()
            self.draw(os.path.join(self.dirname, self.filename))
        openDialog.Destroy()

    def clearEvent(self, event) :
        img = wx.EmptyImage(self.pictureMaxSize, self.pictureMaxSize)
        self.imageCtrl = wx.StaticBitmap(self.panel, wx.ID_ANY, wx.BitmapFromImage(img))
        self.imageCtrl.SetBitmap(wx.BitmapFromImage(img))
        self.frame.SetSize((self.pictureMaxSize, self.pictureMaxSize))
        self.filename = ''
        self.dirname = ''

    def draw(self, filename) :
        image_name = filename
        img = wx.Image(filename, wx.BITMAP_TYPE_ANY)
        W = img.GetWidth()
        H = img.GetHeight()
        if W > H:
            NewW = self.pictureMaxSize
            NewH = self.pictureMaxSize * H / W
        else:
            NewH = self.pictureMaxSize
            NewW = self.pictureMaxSize * W / H
        img = img.Scale(NewW,NewH)
        self.imageCtrl.SetBitmap(wx.BitmapFromImage(img))
        self.panel.Refresh()
        self.mainSizer.Fit(self.frame)

if __name__ == '__main__':
    app = MyGUIApp()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T01:55:05.247

您可以调用 self.Frame.SetMinSize(w, h) 来强制窗口具有合理的最小高度和宽度，但您需要添加滚动条以便您可以看到所有图像......我试图这样做但我也是初学者，目前没有时间，对不起。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T22:02:31.383

问题中的代码示例[在 wxPython 中创建 ScrolledWindow 有](https://stackoverflow.com/questions/3392631/creating-scrolledwindow-in-wxpython)帮助吗？有一个[`wx.ScrolledWindow`](http://wxpython.org/docs/api/wx.ScrolledWindow-class.html)类看起来就像一个带有滚动条的面板。

# iphone - 如何在 iphone 中为动态内容添加 EventListener

> ID：12652053
> 
> 赞同：0
> 
> 时间：2012-09-29T10:46:09.813
> 
> 标签：iphone, titanium, titanium-mobile, addeventlistener

我正在 Titanium 中开发 iphone 应用程序。无法设置`addEventListener`为我的动态接收内容。

这是我的代码：

```
var receivedAccountsLength = Ti.App.userAccounts.length;

var topFrom = 100;
for(var i=1;i<receivedAccountsLength;i++)
{
    var cont = Ti.UI.createLabel({text: Ti.App.userAccounts[i].accountName , width: 100, height: 30, borderWidth: 1, top: topFrom });   
    win.add(cont);  

    cont.addEventListener('click', function()
    {
        alert("cont");
    });

    topFrom += 50;
} 
```

任何一个都可以。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T12:35:38.243

@suresh 试试这个代码，这绝对适合你。首先你得到你的“eventListener object”然后你可以得到它的属性，为了帮助只是复制粘贴这段代码

```
 var receivedAccountsLength = Ti.App.userAccounts.length;

    var topFrom = 100;
    for(var i=1;i<receivedAccountsLength;i++)
    {
        var cont = Ti.UI.createLabel({text: Ti.App.userAccounts[i].accountName , width: 100, height: 30, borderWidth: 1, top: topFrom });   

        cont.addEventListener('click', function(event)
        {
            alert("cont : "+ event.source.text);
        });
        win.add(cont);  
        topFrom += 50;
    } 
```

如果，工作享受钛......干杯......！

# html - Proper CSS Code For Id Selector Not Type Or Class For A Certain Event

> ID：12652064
> 
> 赞同：0
> 
> 时间：2012-09-29T10:47:28.520
> 
> 标签：html, css, css-selectors

I have two spans. Each span has an id tag. I don't want the spans to have a class tag. I want to use css to underline the text in the span when the mouse hovers over it. What is the proper code to do this on a single line in my css file?

```
<span id=spanImagePreview1>Text Here <img src=url></span>
<span id=spanImagePreview2>Text Here <img src=url></span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T10:48:55.560

Use a selector that matches both elements:

```
#spanImagePreview1:hover, #spanImagePreview2:hover { text-decoration: underline; } 
```

Demo: [http://jsfiddle.net/Guffa/9RxEb/](http://jsfiddle.net/Guffa/9RxEb/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T10:54:18.933

mutliple options:

if you have only these two spans: `span:hover {text-decoration:underline;}`

if they are descendants of a specific element `#element span:hover {text-decoration:underline;}`

if the spans you have have a pattern for their id try `span[id*="spanImagePreview"] {text-decoration:underline;}`

# php - CodeIgniter 中带有链接的动态语言切换

> ID：12652065
> 
> 赞同：0
> 
> 时间：2012-09-29T10:47:45.367
> 
> 标签：php, codeigniter-2

我应该如何将语言的配置文件值更改为单击`french`时间？`<a href="?language=french"...</a>`

我的意思是，当您单击可用的`<a>`标签链接时，在侧边栏上应该有一个更改网站语言的选项。

这是我呈现侧边栏块的代码：

```
 <h5>Change lang</h5>
        <ul>
            <li><a href="<?php echo base_url(). '?language=english';?>">English</a></li>
            <li><a href="<?php echo base_url(). '?language=french';?>">French</a></li>
        </ul>
        <p>
            Current lang is: <?php echo $this->config->item('language');?>
        </p> 
```

# entity-framework - EF：寻找模块化应用程序的 DatabaseFirst DbContext 的设计策略

> ID：12652070
> 
> 赞同：11
> 
> 时间：2012-09-29T10:48:02.857
> 
> 标签：entity-framework, generics

我正在寻找有关如何在模块化非单片应用程序设计中使用 ORM（在本例中为 EF5）的建议，其中包含核心部分和第 3 方模块，其中核心没有直接引用第 3 方模块和模块仅引用核心/公共表和类。

为了论证，一个足够接近的类比是 DNN。

代码优先：

在 CodeFirst 中，我使用的方法是通过反射来构建 Db 的模型：在 Core 的 DbContext 的 DbInitialation 阶段，我使用反射在任何用 IDbInitializer（自定义包含 Execute() 方法的合约）来定义 dll 的结构。每个 dll 都将它所知道的信息添加到 DbModel 中。任何后续播种也在同一个 wa 中处理（搜索特定的 IDbSeeder 合约并执行它）。

优点：*该方法目前有效。* 可以在所有存储库中使用相同的核心 DbContext，只要每个 repo 使用 dbContext.GetSet()，而不是期望它是 dbContext 的属性。没什么大不了的。缺点： * 它仅在启动时有效（即，添加新模块需要 AppPool 刷新）。* CodeFirst 非常适合 POC。*但是在 EF5 中，它对于企业工作来说还*不够成熟（我已经等不及要添加 EF6 for StoredProcs 和其他功能了）。* 我的 DBA 讨厌 CodeFirst，至少对于 Core，希望尽可能地使用存储过程优化该部分......我们是一个团队，所以我必须设法找到一种方法来取悦他，如果可以的话找到一种方法...

数据库优先：

DbModel 阶段似乎发生在 DbContext 的构造函数之前（从嵌入式 *.edmx 资源文件中读取）。DbInitialization 永远不会被调用（因为模型被认为是完整的），所以我不能添加比 Core 知道的更多的表。

如果我不能像使用 CodeFirst 那样动态地向模型添加元素，这意味着 * 核心 DbContext 的模型必须了解 Db 中的每个表——核心和每个第 3 方模块。使应用程序单体化和高度耦合，打败了我想要实现的目标。* 或者每个第 3 方必须创建自己的 DbContext，导入 Core 表，导致 * 版本控制问题（当 Core 的 *.edmx 更新时，模块不更新 *.edmx 等） * 在不同的内存上下文中到处重复 = 困难跟踪并发问题。

在这一点上，在我看来，CodeFirst 方法是使用 EF 实现模块化软件的唯一方法。但希望其他人知道如何让 DatabaseFirst 大放异彩——有没有办法将 DbSet '附加'到从嵌入式 *.edmx 文件创建的模型中？

还是有其他想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T00:24:18.123

我会考虑使用一种`plugin`架构，因为这是您对应用程序本身的总体设计。

您可以通过执行以下操作来完成此基础知识（请注意，此示例使用`StructureMap`- 这是[StructureMap 文档](http://docs.structuremap.net/)的链接）：

1.  创建一个接口，您的`DbContext`对象可以从中派生。

    ```
    public interface IPluginContext {
        IDictionary<String, DbSet> DataSets { get; }
    } 
    ```

2.  在您的依赖注入设置中（使用 StructureMap） - 执行以下操作：

    ```
    Scan(s => {
        s.AssembliesFromApplicationBaseDirectory();
        s.AddAllTypesOf<IPluginContext>();
        s.WithDefaultConventions();
    });
    For<IEnumerable<IPluginContext>>().Use(x =>
        x.GetAllInstances<IPluginContext>()
    ); 
    ```

3.  对于您的每个插件，要么更改`{plugin}.Context.tt`文件，要么添加一个`partial class`文件，使`DbContext`生成的文件派生自`IPluginContext`.

    ```
    public partial class FooContext : IPluginContext { } 
    ```

4.  更改`{plugin}.Context.tt`每个插件的文件以公开如下内容：

    ```
    public IDictionary<String, DbSet> DataSets {
        get {
            // Here is where you would have the .tt file output a reference
            // to each property, keyed on its property name as the Key - 
            // in the form of an IDictionary.
        }
    } 
    ```

5.  您现在可以执行以下操作：

    ```
    // This could be inside a service class, your main Data Context, or wherever
    // else it becomes convenient to call.
    public DbSet DataSet(String name) {
        var plugins = ObjectFactory.GetInstance<IEnumerable<IPluginContext>>();
        var dataSet = plugins.FirstOrDefault(p =>
            p.DataSets.Any(ds => ds.Key.Equals(name))
        );

        return dataSet;
    } 
    ```

如果语法不完美，请原谅我 - 我在帖子中执行此操作，而不是在编译器中。

最终结果使您可以灵活地执行以下操作：

```
 // Inside an MVC controller...
    public JsonResult GetPluginByTypeName(String typeName) {
        var dataSet = container.DataSet(typeName);
        if (dataSet != null) {
            return Json(dataSet.Select());
        } else {
            return Json("Unable to locate that object type.");
        }
    } 
```

* * *

显然，从长远来看 - 您会希望控件被反转，其中插件是实际绑定到架构中的插件，而不是服务器期望类型。但是，您可以使用这种延迟加载来完成同样的事情 - 主应用程序公开一个所有插件都绑定到的端点。

那将是这样的：

```
public interface IPlugin : IDisposable {
    void EnsureDatabase();
    void Initialize();
} 
```

您现在可以将此接口公开给任何将为您的架构（DNN 风格）创建插件的应用程序开发人员 - 您的`StructureMap`配置工作如下：

```
Scan(s => {
    s.AssembliesFromApplicationBaseDirectory(); // Upload all plugin DLLs here
    // NOTE: Remember that this gives people access to your system!!! 
    //       Given what you are developing, though, I am assuming you
    //       already get that.
    s.AddAllTypesOf<IPlugin>();
    s.WithDefaultConventions();
});
For<IEnumerable<IPlugin>>().Use(x => x.GetAllInstances<IPlugin>()); 
```

现在，当您初始化应用程序时，您可以执行以下操作：

```
// Global.asax
public static IEnumerable<IPlugin> plugins = 
    ObjectFactory.GetInstance<IEnumerable<IPlugin>>();

public void Application_Start() {
    foreach(IPlugin plugin in plugins) {
        plugin.EnsureDatabase();
        plugin.Initialize();
    }
} 
```

您的每个`IPlugin`对象现在都可以包含自己的数据库上下文，管理安装（如果需要）自己的数据库实例/表的过程，并优雅地处理自己。

显然这不是一个完整的解决方案——但我希望它能让你朝着一个有用的方向开始。:) 如果我可以帮助澄清这里的任何内容，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T21:23:44.750

虽然这是一种 CodeFirst 方法，而不是最干净的解决方案，但即使在启动后强制初始化运行又如何，如此处发布的答案所示：[强制代码优先以始终初始化不存在的数据库？](https://stackoverflow.com/questions/12724320/forcing-code-first-to-always-initialize-a-non-existent-database)（我对 CodeFirst 一无所知，但鉴于这是一个月前还没有帖子，值得一试）

# php - 用我们的自定义类扩展 Yii 框架 CHtml 助手类

> ID：12652071
> 
> 赞同：2
> 
> 时间：2012-09-29T10:48:08.087
> 
> 标签：php, mysql, utf-8, yii, encode

我必须将用户输入的数据编码为 utf-8，特别是如果它是数字编码，所以我决定使用以下代码片段进行编码，然后将其存储到数据库中

```
$convmap = 数组 (0x80, 0xffff, 0, 0xffff);
$str = htmlentities (mb_encode_numericentity($str, $convmap, 'UTF-8'),ENT_QUOTES,"UTF-8",false);

```

但 Yii 默认编码仅使用 CHtml::encode() 仅使用 htmlspecialchars() 函数

所以我决定扩展 CHtml 类来覆盖编码函数，但我不知道如何在 Yii 中做到这一点。建议一个很好的方法来扩展 Yii 助手类......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T12:58:12.567

你不能完全做到这一点，这个类紧密集成在框架中。（即用于小部件、activaeform 等...），

您可以做的一件事是......扩展它并创建您的类并在整个应用程序中使用它。在将模型数据发送到视图/小部件之前对其进行预处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T14:19:11.630

您总是可以在 中编辑 CHtml 类本身`/framework/web/helpers/CHtml.php`，为编码方法添加一个额外的参数？例如;

```
public static function encode($text,$extraEncode=false)
{
    if($extraEncode===true)
    {
        $convmap = array ( 0x80, 0xffff, 0, 0xffff );
        return htmlentities ( mb_encode_numericentity( $text, $convmap, 'UTF-8' ),ENT_QUOTES,"UTF-8",false );
    } else {
        return htmlspecialchars($text,ENT_QUOTES,Yii::app()->charset);
    }
} 
```

obv，根据口味编辑。

然后你可以这样称呼它`CHtml::encode($myString,true)`

# android - 如何提前终止 Toast 消息？

> ID：12652077
> 
> 赞同：3
> 
> 时间：2012-09-29T10:48:59.303
> 
> 标签：android, toast

我有一条在单击按钮时运行的吐司消息。我有另一个按钮可以启动另一个活动。如果用户在该活动上，则 toast 是好的，但如果用户在 Toast 完成显示之前导航到新活动，它看起来不合适。活动结束后如何结束吐司。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T11:02:23.807

[如果它正在显示，请关闭视图，如果尚未显示，请不要显示它。您通常不必调用它。通常视图会在适当的持续时间后自行消失。](http://developer.android.com/reference/android/widget/Toast.html#cancel%28%29)

我没试过这个...希望它会工作..

```
 toast.cancel(); 
```

**编辑：**

```
Toast t = new Toast(mContext);
t=Toast.makeText(mContext,"text", Toast.LENGTH_SHORT); 
t.show(); 
```

`t.cancel();`随时随地使用

# ios - iOS 中的合成动画、精灵

> ID：12652080
> 
> 赞同：0
> 
> 时间：2012-09-29T10:49:25.333
> 
> 标签：ios, animation, sprite

假设我想显示一个可自定义的（2D，卡通）角色，其中一些属性，例如眼睛颜色、发型、服装等，可以从一组预定义的选项中选择。现在我想为角色设置动画。处理自定义的最佳方法是什么？

1）例如，我可以为每个属性组合制作一个精灵表。这不是非常节省内存并且不是很灵活，但可能会提供最佳性能。

2）我可以从不同的层组成角色，每个属性只影响一个层。因此，我可以为身体制作一个精灵表，为眼睛制作一组精灵表（每种眼睛颜色一个）等。

2a) 在这种情况下，我可以合并选定的精灵表以生成包含自定义角色动画的单个精灵表。

2b) 或者，我可以将精灵表分开，并尝试将它们作为图层同时设置动画。我担心，这可能会成为性能方面的问题。

3）我可以尝试以编程方式修改图层，例如使用一个精灵表作为眼睛作为蒙版，并在其上映射一些纹理，然后将其合并为一个单独的精灵表。对于眼睛颜色等简单属性，我认为这是一种非常灵活的方法，但对于发型等问题可能会变得困难。我知道这在很大程度上取决于角色，可能很难做出一般性的回答。

我认为我的问题不是新问题，因此可能有一种标准方法。

关于平台，我对iOS特别感兴趣，并尽量避免使用OpenGL（好吧，我很开放）。也许有一个很好的框架可以在这里帮助我？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:07:23.973

你可能想看看[如何](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide%3asprites)在[cocos2d](http://www.cocos2d-iphone.org/)上创建精灵。

Cocos2d 附带了一组工具，可帮助您为单个部分制作动画并提供抽象来组合部分（如`CCBatchNode`或`CCNode`）。此外，它还附带了一些工具，可以帮助您将精灵打包到精灵表中（例如[Texture Packer](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Creating_and_using_Sprite_Sheets_in_Cocos2D-X_with_Texture_Packer)）和开发关卡（例如[Level Helper](http://maniacdev.com/2011/07/tutorial-building-complete-games-with-spritehelper-and-levelhelper/)）。

Cocos2d 是一个开源框架，应用广泛。你也有[cocos3d](http://www.cocos2d-iphone.org/archives/tag/cocos3d)但我从来没有用过它:)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T03:20:01.337

根据您的工作内容，您可能希望在其他工具（例如 Flash）中为外部动画部分/所有动画制作动画。使用视觉环境要容易得多。

然后有一些工具可以获取 swf 文件，并创建精灵表，然后您将在 cocos2d 中制作动画。

这是一个常见的游戏创建工作流程。

# java - 根su命令

> ID：12652081
> 
> 赞同：-1
> 
> 时间：2012-09-29T10:49:40.000
> 
> 标签：java, android, root

我正在开发一个也适用于有根设备的应用程序。

我有两个问题：

1.  当我启动应用程序时，它会检查 root，超级用户对话框出现，我点击接受，然后“记住我的选择”，我运行一个命令：

    ```
    Process process;
    try {
      process = Runtime.getRuntime().exec(new String[] 
                 {"su", "-c", "rm -r /data/data"});
      prefs = this.getSharedPreferences("Prefs", 
                 Context.MODE_WORLD_WRITEABLE);
      prefsEditor = prefs.edit();
      stopSelf(); 
    ```

    然后这里再次出现超级用户对话框。为什么它在同一个应用程序中出现多次？我检查了“记住我的选择”。

2.  我在用着

    ```
    process = Runtime.getRuntime().exec(new String[]
                {"su", "-c", "rm -r /data/data"}); 
    ```

有没有办法添加例外，例如`Do not delete "com.My.App"`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T11:39:17.957

您正在删除 /data/data 及其所有子目录。这是应用程序存储应用程序私有数据的地方，并且超级用户肯定会在此处存储授权应用程序的列表。

我相信您已经猜到发生了什么……您正在删除自己的授权。

您需要向超级用户添加一个例外。

要添加一个例外，我找不到一个简单的解决方案，因为只有有限的 shell 命令可用。如果你安装了busybox，它会让你有机会使用grep 命令来解析输入并排除你想要的行。

或者，您可以使用以下方法以编程方式执行此操作：

```
process = Runtime.getRuntime().exec(new String[] {"su", "-c", "ls /data/data"}); 

BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(process.getInputStream())); 

String line; 
ArrayList<String>  files = new ArrayList<String>();
files.add("su");
files.add("-c");
files.add("rm -r");

while ((line = bufferedReader.readLine()) != null){
  //test if you want to exclude the file before you add it
  files.add("/data/data/" + line);
}
//issue a new command to remove the directories
process = Runtime.getRuntime().exec(files.toArray(new String[0])); //changed this line 
```

希望它有所帮助。

--已编辑--

下面的代码在有根设备上运行良好。最后发出的命令也是 a `ls`，因为我不想删除我的文件，但你可以用其他任何东西替换它（参见文件中的注释）。

```
private void execCmd(){
    Process process;
    try {
        process = Runtime.getRuntime().exec(new String[] {"su", "-c", "ls /data/data"});
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return;
    } 

    BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(process.getInputStream())); 

    String line; 
    ArrayList<String>  files = new ArrayList<String>();
    files.add("su");
    files.add("-c");
//      files.add("rm -r");  //Uncomment this line and comment the line bellow for real delete 
    files.add("ls"); 

    try {
        while ((line = bufferedReader.readLine()) != null){
          //test if you want to exclude the file before you add it
          files.add("/data/data/" + line);
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    //comment lines bellow to stop logging the command being sent
    Log.d(TAG, "Command size: " + files.size());
    for(int i=0; i< files.size(); i++)
        Log.d(TAG, "Cmd[" + i + "]: " + files.get(i));

    try {
        process = Runtime.getRuntime().exec(files.toArray(new String[0]));
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } //changed this line
} 
```

问候

# javascript - 支持捏缩放的 HTML5 图表库

> ID：12652082
> 
> 赞同：5
> 
> 时间：2012-09-29T10:49:42.807
> 
> 标签：javascript, html, mobile, charts, highcharts

我需要制作一个跨平台的移动 Web 应用程序，该应用程序必须显示带有捏缩放的折线图。它需要显示价格序列，您可以在其中捏缩放以使轴缩放。

我用谷歌搜索了一下，但未能清楚地了解我的选择。所以在我开始测试像 highcharts 这样的各种库之前，我想听听是否有人可以推荐一个支持折线图缩放的图表 html5 库。它必须适用于 ios 和 android，并且基于 html5 和 javascript。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T11:10:24.350

我来自 jqChart 公司 - [http://www.jqchart.com/](http://www.jqchart.com/)。我认为我们的 jqChart 应该非常适合您。

# nhibernate - 使用 NHibernate 和 QueryOver 连接多个表

> ID：12652087
> 
> 赞同：7
> 
> 时间：2012-09-29T10:50:23.833
> 
> 标签：nhibernate, queryover, nhibernate-3

我有这个表：

```
Person -> PersonFavorites, PersonCompany
PersonCompany -> Company 
```

我现在必须使用 NHibernate 和 QueryOver 进行以下选择：

```
select * from Person 
  inner join PersonFavorites on Person.Id = PersonFavorites.PersonId 
  inner join PersonCompany on Person.Id = PersonCompany.PersonId 
  inner join Company on Company.Id = PersonCompany.CompanyId
where ... 
```

有人可以给我一个样品，我该怎么做？- 我的问题是，我必须加入多个 Tables Person -> PersonCompany -> Company。Join Person -> PersonCompany 和 Person -> PersonFavorites 没问题 - 但下一步是 PersonCompany -> Company。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-29T12:18:06.470

映射应类似于以下内容：

**实体**

```
 class Person
    {
        ICollection<PersonFavorites> favorites;
        ICollection<PersonCompany> companies;
    }

    class PersonFavorite
    {
        Person person;
        Favorite favorite;
    }

    class PersonCompany
    {
        Person person;
        Company company;
    } 
```

**询问**

```
 Person personAlias = null;
    PersonFavorite personFavoriteAlias = null;
    PersonCompany personCompanyAlias  = null;
    ICollection<PersonCompany> personCompaniesAlias = null;
    Company companyAlias = null;
    Favorite favoriteAlias = null;

    var query = Session.QueryOver<Person>(() => personAlias)
        .JoinAlias(() => personAlias.Favorites, () => personFavoriteAlias)
        .JoinAlias(() => personAlias.Companies, () => personCompanyAlias)
        // OR: .JoinAlias(() => personAlias.Companies, () => personCompaniesAlias)
        .JoinAlias(() => personfavoriteAlias.Favourite, () => favoriteAlias)
        .JoinAlias(() => personCompanyAlias.Company, () => companyAlias)
        .Where(() => personCompanyAlias.Person.Name == ...)
        // OR: .Where(() => personCompaniesAlias.Count() == ...)
        // ...
        ; 
```

# android - 删除列表视图中的项目

> ID：12652103
> 
> 赞同：1
> 
> 时间：2012-09-29T10:53:58.217
> 
> 标签：android

我通过扩展 ArrayAdapter 类来使用自定义列表视图。每行都有一些文本和图像。我想要做的是在单击 imagevView 时删除该行。所以我为每个图像视图设置了一个 onclick 监听器和一个标签，然后使用 onclick 监听器来更改适配器。然而，它只是拒绝工作。我到底做错了什么？

```
holder.image.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View view) 
                {

                    Toast.makeText(context, "ImageView clicked for the row = "+view.getTag().toString(), Toast.LENGTH_SHORT).show();
                    createEvent.list.remove(view.getTag());
                    createEvent.adapter.notifyDataSetChanged();
                } 
```

吐司打印正确。但是，该项目不会被删除。关于如何实现这一目标的任何想法？

# nsstring - + (NSString *)decodeFromPercentEscapeString:(NSString *)string 潜在泄漏

> ID：12652105
> 
> 赞同：1
> 
> 时间：2012-09-29T10:54:15.750
> 
> 标签：nsstring, memory-leaks

我在分析代码时遇到了问题。

特别是关于这种方法。

我在网上收集了这些台词。它运作良好，但我收到了一个潜在的泄漏消息

**对象上的潜在泄漏。（返回时）。**

```
// Encode a string to embed in an URL.    
+ (NSString *)encodeToPercentEscapeString:(NSString*)string {
        return (NSString *)
        CFURLCreateStringByAddingPercentEscapes(NULL,
                                                (CFStringRef) string,
                                                NULL,
                                                (CFStringRef) @"!*'();:@&=+$,/?%#[]",
                                                kCFStringEncodingUTF8);
    }

    // Decode a percent escape encoded string.
    + (NSString *)decodeFromPercentEscapeString:(NSString *)string {
        return (NSString *)
        CFURLCreateStringByReplacingPercentEscapesUsingEncoding(NULL,
                                                                (CFStringRef) string,
                                                                CFSTR(""),
                                                                kCFStringEncodingUTF8);
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T09:51:08.737

我刚刚发现这篇文章： [iPhone 内存泄漏？](https://stackoverflow.com/questions/4228348/iphone-memory-leaking)

我必须用 CFRelease(); 释放 CFString；

```
+ (NSString *)encodeToPercentEscapeString:(NSString*)string {

    CFStringRef str = CFURLCreateStringByAddingPercentEscapes(NULL,
                                            (CFStringRef) string,
                                            NULL,
                                            (CFStringRef) @"!*'();:@&=+$,/?%#[]",
                                            kCFStringEncodingUTF8);

    NSString *s = [NSString stringWithString:(NSString *)str];
    CFRelease(str);

    return s;
} 
```

# java - Android手机重启时共享偏好消失

> ID：12652109
> 
> 赞同：0
> 
> 时间：2012-09-29T10:54:43.987
> 
> 标签：java, android, android-emulator, sharedpreferences

为什么在设备重新启动时会删除我的 Android 应用程序中使用的共享首选项值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T11:11:54.753

可能是您无意中设置了此设置。

![在此处输入图像描述](../Images/8acb265f42a67789ee1acd2f502ccd6f.png)

如果没有，请确保您正确存储数据并在之后提交数据，如下所示：

```
SharedPreferences p = PreferenceManager.getDefaultSharedPreferences(this);
                  p.edit().putString("myKey", "myValue");
                  p.edit().commit(); //No commit = no persitance 
```

# javascript - 自动滚动侧边栏项目

> ID：12652110
> 
> 赞同：1
> 
> 时间：2012-09-29T10:54:59.077
> 
> 标签：javascript, google-maps-api-3, sidebar, autoscroll

我想知道是否有人可以帮助我。

我对 JavaScript 编程比较陌生，所以请您耐心等待。

我整理了[这个](http://www.mapmyfinds.co.uk/chris/test.php)页面，它允许用户通过“标记类别”复选框选择添加或删除谷歌地图标记。除了在地图中添加和删除相关标记外，每个标记的描述也会从“侧边栏”中添加或删除；以橙色文本显示。

如果用户单击“侧边栏”项目，将显示相关标记的信息窗口，如果选择了标记，侧边栏列表中的相关描述将以灰色背景突出显示。

我遇到的问题是，如果用户在地图上选择一个标记，则侧边栏不会自动滚动到与项目相关的列表项，如[本页](http://www.blocsoft.com/bmap/example12.V3.asp)示例所示。

我正在使用第三方脚本来创建滚动条，如下面的代码所示：

```
<script>
        (function($){
            $(window).load(function(){
                $("#sidebar").mCustomScrollbar({
                    scrollButtons:{
                        enable:true
                    }
                });
                //ajax demo fn
                $("a[rel='load-content']").click(function(e){
                    e.preventDefault();
                    var $this=$(this),
                        url=$this.attr("href");
                    $.get(url,function(data){
                        $("#sidebar .mCSB_container").html(data); //load new content inside .mCSB_container
                        $("#sidebar").mCustomScrollbar("update"); //update scrollbar according to newly loaded content
                        $("#sidebar").mCustomScrollbar("scrollTo","top"); //scroll to top
                    });
                });
                $("a[rel='append-content']").click(function(e){
                    e.preventDefault();
                    var $this=$(this),
                        url=$this.attr("href");
                    $.get(url,function(data){
                        $("#sidebar .mCSB_container").append(data); //append new content inside .mCSB_container
                        $("#sidebar").mCustomScrollbar("update"); //update scrollbar according to newly appended content
                    });
                });
            });
        })(jQuery);
</script> 
```

这是链接地图标记和侧边栏项目的代码部分。

```
google.maps.event.addListener(marker, 'click', function() { 
  infowindow.setContent(contentString);
  $("#sidebar a").css('background-color','');//remove sidebar links back colors
  sidebarlink = $("#sidebar a:contains('"+marker.mydescription+"')");
  sidebarlink.css('background-color','#DADADA');
  infowindow.open(map,marker); 
}); 
```

我试图`overflow`在这两个区域都放一个项目，希望这能解决问题。此外，我还省略了以下几行，以查看是否可以提出解决方案：

```
$("#sidebar").mCustomScrollbar("update"); //update scrollbar according to newly loaded content                          
$("#sidebar").mCustomScrollbar("scrollTo","top"); //scroll to top 
```

不幸的是，我的尝试并没有解决问题。

我只是想知道是否有人可以看看这个，让我知道我哪里出错了。

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T23:08:04.910

只需将以下行添加到您的标记单击事件处理程序中：

```
$("#sidebar").mCustomScrollbar("scrollTo","a:contains('"+marker.mydescription+"')"); 
```

所以你的代码看起来像：

```
google.maps.event.addListener(marker, 'click', function() { 
  infowindow.setContent(contentString);
  $("#sidebar a").css('background-color','');//remove sidebar links back colors
  sidebarlink = $("#sidebar a:contains('"+marker.mydescription+"')");
  sidebarlink.css('background-color','#DADADA');
  $("#sidebar").mCustomScrollbar("scrollTo","a:contains('"+marker.mydescription+"')");
  infowindow.open(map,marker); 
}); 
```

应该滚动到您单击的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T06:22:58.573

尝试在事件处理函数中添加一行：

```
google.maps.event.addListener(marker, 'click', function() { 
//......
  map.setCenter(marker.getPosition()); // <---Add this line
  infowindow.open(map,marker); 
}); 
```

# c# - 如何在 Firefox 中打印 RDLC 报告

> ID：12652115
> 
> 赞同：2
> 
> 时间：2012-09-29T10:56:06.557
> 
> 标签：c#, asp.net, firefox, rdlc

我想在 Firefox 中打印我的 RDLC 报告，但打印按钮图标未显示在 Firefox 浏览器中，但它在 IE 中运行良好。

谁能指导我如何在 Firefox 浏览器中打印我的报告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T10:12:36.403

不幸的是，没有办法在 Firefox 中打印 rdlc 报告。

由于 activeX 的要求，Rdlc print 仅适用于 ie。更多信息：[配置和使用 ReportViewer 工具栏](http://msdn.microsoft.com/en-us/library/ms251670%28v=vs.100%29.aspx)

msdn 上有一篇关于如何在没有预览的情况下打印本地报表的文章，但它仅适用于 winforms 报表查看器。在 asp.net 中，您无法访问客户端的打印机。 [演练：打印不带预览的本地报告](http://msdn.microsoft.com/en-us/library/ms252091%28v=vs.100%29.aspx)

不用在firefox中打印，可以直接导出rdlc。例如：

```
Warning[] warnings;
string[] streamIds;
string mimeType = string.Empty;
string encoding = string.Empty;
string extension = string.Empty;
string filename = "YourFileName";

// Setup the report viewer object and get the array of bytes
ReportViewer viewer = new ReportViewer();
viewer.ProcessingMode = ProcessingMode.Local;
viewer.LocalReport.ReportPath = "YourReportHere.rdlc";

byte[] bytes = viewer.LocalReport.Render("PDF", null, out mimeType, out encoding, out extension, out streamIds, out warnings);

// Now that you have all the bytes representing the PDF report, buffer it and send it to the client.
Response.Buffer = true;
Response.Clear();
Response.ContentType = mimeType;
Response.AddHeader("content-disposition", "attachment; filename=" + fileName + "." + extension);
Response.BinaryWrite(bytes); // create the file
Response.Flush(); // send it to the client to download 
```

# google-app-engine - Google Channel API 向所有客户端发送消息

> ID：12652132
> 
> 赞同：3
> 
> 时间：2012-09-29T10:59:42.890
> 
> 标签：google-app-engine, client, message, channel-api

我创建了一个有效的 Google Channel AP，现在我想向所有客户发送一条消息。

我有两个 servlet。第一个创建通道并告诉客户端`userid`and `token`。第二个由 an 调用`http post`并且应该发送消息。

要向客户端发送消息，我使用：

```
channelService.sendMessage(new ChannelMessage(channelUserId, "This is a server message!")); 
```

这只会将消息发送给一个客户端。我怎么能把这个发给所有人？

我是否必须存储用于创建频道并为每个 ID 发送消息的每个 ID？如何将 ID 传递给第二个 servlet？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T11:27:38.473

使用 Channel API 是不可能创建一个频道然后有很多订阅者的。[服务器为各个 JavaScript 客户端](https://developers.google.com/appengine/docs/java/channel/overview#Elements_of_the_Channel_API)创建一个唯一通道，因此如果您具有相同的客户端 ID，则消息将仅由一个接收。

如果您想向多个客户端发送相同的消息，简而言之，您必须跟踪活动客户端并向所有客户端发送相同的消息。

如果这种方法听起来既可怕又混乱，请考虑将 PubNub 用于您的推送通知消息，您可以在其中轻松创建[一个频道并拥有许多订阅者](https://pubnub-prod.appspot.com/console)。让它在 Google App Engine 上运行并不难，因为它们几乎支持任何[平台或设备](http://www.pubnub.com/devcenter)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T04:09:12.203

我知道这是一个老问题，但我刚刚完成了一个使用 Channel API 实现发布/订阅模型的开源项目，即您可以让多个用户订阅一个主题，然后所有这些订阅者都会收到通知任何人都会向该主题发布消息。它还具有一些不错的功能，如需要时自动消息持久性和“回执”，只要其他订阅者收到该消息，就可以通知订阅者。请参阅[https://github.com/adevine/gaewebpubsub#gae-web-pubsub](https://github.com/adevine/gaewebpubsub#gae-web-pubsub)。在 Apache 2.0 许可下获得许可。

# android - 当我退出应用程序时，声音在后台运行

> ID：12652133
> 
> 赞同：2
> 
> 时间：2012-09-29T10:59:43.243
> 
> 标签：android, audio, back

我“创建”了一个应用程序，当我返回或按下主页按钮退出应用程序时，我的应用程序的音频仍在运行！我必须关闭所有正在运行的应用程序才能让它停止。

按下主页按钮时如何停止音频运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T11:14:02.827

覆盖所有活动的[onPause()](http://developer.android.com/reference/android/app/Activity.html#onPause%28%29)方法，并在调用时关闭/暂停/停止音乐。您可能需要使用布尔标志来检查您是否在应用程序中移动，在这种情况下您希望音乐继续播放：

```
boolean movingInApp = false;
....
movingInApp = true;
Intent intent...
.....
public void onPause() {
    if(!movingInApp) {
        //stop service
    }
}

public void onResume() {
    movingInApp = false;
    //Rest of your code
} 
```

通过在启动任何意图等之前将值设置为`movingInApp`，`true`您可以防止您的应用停止播放音乐。请记住`false`稍后在您的`onResume()`方法中再次将其设置为。如果系统让你的应用程序进入后台，这将是错误的，你的音乐将被停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T11:17:15.530

当您单击返回时，应用程序会继续在后台运行。如果您想在退出某个活动时停止音乐，请覆盖 onStop 或 onPause 以停止声音。类似的东西

```
@Override
protected void onStop(){
    super.onStop();
    //your code for stopping the sound
} 
```

# java - Java将特殊字符串转换为数组数组

> ID：12652135
> 
> 赞同：1
> 
> 时间：2012-09-29T11:00:19.437
> 
> 标签：java, string

我想拆分这个字符串

```
['1','BR_1142','12,345','01-02-2012', 'Test 1'],['2','BR_1142','12,345','01-02-2012', 'Test 2'] 
```

到java中的数组字符串数组？

我可以用正则表达式来做，还是应该写一个递归函数来处理这个目的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T11:05:16.617

像下面这样的东西怎么样

```
String str= "['1','BR_1142','12,345','01-02-2012', 'Test 1'],['2','BR_1142','12,345','01-02-2012', 'Test 2']";

String[] arr = str.split("\\],\\[");
String[][] arrOfArr = new String[arr.length][];
for (int i = 0; i < arr.length; i++) {
    arrOfArr[i] = arr[i].replace("[", "").replace("]", "").split(",");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T12:01:35.787

由于最近的崩溃清除了我所有的程序，我无法对此进行测试，但我相信您可以使用 JSON 解析器来解析字符串。在解析之前，您可能必须将其包装在`[`and`]`或`{`and中。`}`

看

*   [http://answers.oreilly.com/topic/257-how-to-parse-json-in-java/](http://answers.oreilly.com/topic/257-how-to-parse-json-in-java/)
*   [http://www.json.org/java/](http://www.json.org/java/)
*   [如何解析 JSON 并将其值转换为数组？](https://stackoverflow.com/questions/2255220/how-to-parse-a-json-and-turn-its-values-into-an-array)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T11:16:45.850

```
String yourString = "['1','BR_1142','12,345','01-02-2012', 'Test 1'],['2','BR_1142','12.345','01-02-2012', 'Test 2']";
yourString = yourString.substring(1, yourString.lastIndexOf("]"));
String[] arr = yourString.split("\\],\\[");

String[][] arr1 = new String[arr.length][];
int i = 0;
String regex = "(?<=['],)";   // This regex will do what you want..
for(String a : arr) {
    arr1[i++] = a.split(regex);
}

for (String[] arrasd: arr1) {
    for (String s: arrasd) {
        System.out.println(s.replace(",", ""));
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T11:27:34.443

您可以组合使用`String.split`和正则表达式[后视](http://www.regular-expressions.info/lookaround.html)：

```
String str = "['1','BR_1142','12,345','01-02-2012', 'Test 1'],['2','BR_1142','12,345','01-02-2012', 'Test 2']";
String[] outerStrings = str.split("(?<=]),");
String[][] arrayOfArray = new String[outerStrings.length][];

for (int i=0; i < outerStrings.length; i++) {
   String noBrackets = outerStrings[i].substring(1, outerStrings[i].length() - 1);
   arrayOfArray[i] = noBrackets.split(",");
} 
```

# c++ - 我的计算机中缺少 SDL.dll - VS 2010

> ID：12652136
> 
> 赞同：6
> 
> 时间：2012-09-29T11:00:19.643
> 
> 标签：c++, visual-studio-2010, sdl

我正在尝试编译我编写的 SDL 程序，但是当我这样做时，会出现此错误：

> 程序无法启动，因为您的计算机缺少 SDL.dll。尝试重新安装程序以解决此问题

我不知道为什么。我有 SDL.dll。

*   我已将它放在正确的文件夹中：`C:\Windows\System32`.

*   我对所有 SDL 标头等都有正确的路径。

VS 说：

> 构建成功：1

然后屏幕上会弹出上面的错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T11:01:49.427

将其添加到您的调试文件夹或您的程序当前所在的任何目录中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-29T11:01:54.087

`SDL.dll`必须与您的应用程序位于同一目录中，或者位于`PATH`环境变量中的目录中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-29T18:23:05.963

如果`SDL.dll`是 32 位，并且您正在运行 64 位系统，则必须将 dll 放入`/Windows/SysWOW64/`而不是`/Windows/System32/`用于 64 位 dll 的 dll 中。

编辑：
您可能不应该通过将 DLL 复制到 System32 目录来部署它们，除非它们是多个应用程序使用的通用库，即使那样我也会谨慎行事。例如，应用程序可以更新 DLL，这可能会破坏其他依赖于旧版本库的应用程序。

Instead, copy the DLLs into the same directory that the executable is being built in. If you're building and executing with Visual Studio it will look for the DLL in the Project directory, where your source files are probably located.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-29T11:14:47.443

只需将您的 SDL.dll 放在同一个文件夹中，您的问题就会得到解决。为了回答您的 PATH 问题，您可以在 Visual Studio 中指定他将在调试时查找可执行文件的位置。也许这没有正确设置，这就是为什么 VS 找不到 SDL.dll？

# ios - 无法在 iOS 中查询当前用户语言

> ID：12652139
> 
> 赞同：1
> 
> 时间：2012-09-29T11:01:01.237
> 
> 标签：ios, nslocale

我正在尝试确定 iOS 中的用户语言。StackOverflow 有几个关于这个主题的答案，这对我有很大帮助，比如这个：[Getting current device language in iOS?](https://stackoverflow.com/questions/3910244/getting-current-device-language-in-ios)

我可以成功地检索到我在 NSLog 中寻找的值（即“en”或“de”），但每次我用 if/then 语句质疑它时，它似乎都不起作用。我的 viewDidLoad 中有这个用于测试：

```
- (void)viewDidLoad
{
[super viewDidLoad];
NSString *myLanguage = [[NSLocale preferredLanguages] objectAtIndex:0];
NSLog(@"The current languague is %@.", myLanguage);

if (myLanguage == @"de") {
    self.myLabel.text = @"German";
} else if (myLanguage == @"en") {
    self.myLabel.text = @"English";
} else {
    self.myLabel.text = @"didn't work";
}
} 
```

无论设备设置为英语还是德语，都只显示最后一个 else 语句。然而，NSLog 正确显示 en 或 de。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T11:10:07.993

NSString 比较是用`isEqualToString:`方法完成的。在您的代码中，您正在比较两个不同的 NSString 对象，而您必须比较每个对象的内容。

如果您有两个任意类型的对象，它们总是不同的，即使它们的所有成员具有相同的值。这就是为什么存在这样的方法，根据对象的成员来比较对象。

代替：

```
if (myLanguage == @"de") 
```

和

```
if ([myLanguage isEqualToString:@"de"]) 
```

对于`else if`代码中的 s 也是如此。

# ios - 未知类型，即使我正在导入

> ID：12652141
> 
> 赞同：-2
> 
> 时间：2012-09-29T11:01:25.177
> 
> 标签：ios, cocos2d-iphone

我收到这个错误，

```
Unknown type name ArrowWrapper 
```

从内部`BoxSprite.h`

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"
#import "BoxSum.h"
#import "ArrowWrapper.h"

@interface BoxSprite : CCSprite {

}
@property ArrowWrapper* arrowItem;
@end 
```

此外，`ArrowWrapper.h`包含这个。

```
#import "cocos2d.h"
#import "BoxSprite.h"

@interface ArrowWrapper : CCMenuItem {

}

@property BoxSprite* box;
@end 
```

错误曾经在 ArrowWrapper 中说它在我清理之前找不到 BoxSprite，现在在 BoxSprite 中说它找不到 ArrowWrapper。

我无法弄清楚我错过了什么。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T11:15:29.507

您有一个递归导入：“BoxSprite.h”导入“ArrowWrapper.h”，反之亦然。

您必须删除其中一个`import`语句并`@class`改用。例如在“BoxSprite.h”中替换

```
#import "ArrowWrapper.h" 
```

经过

```
@class ArrowWrapper; 
```

然后，如有必要，您可以在实现文件“BoxSprite.m”中导入“ArrowWrapper.h”。

**详细解释：** Xcode在“BoxSprite.h”中显示错误，但在“ArrowWrapper.m”编译时实际出现错误：

1.  “ArrowWrapper.m”导入“ArrowWrapper.h”。
2.  “ArrowWrapper.h”在定义`ArrowWrapper`类之前导入“BoxSprite.h”。
3.  “BoxSprite.h”导入“ArrowWrapper.h”：但是“ArrowWrapper.h”*已经被标记为导入*，所以编译器不会再读取它。
4.  因此，在读取“BoxSprite.h”时，`ArrowWrapper`该类尚未定义，导致编译器错误。

替换`import`为`@class`解决了问题，因为它使`ArrowWrapper`编译器知道该类，而无需读取接口文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T11:16:44.097

我认为问题在于导入语句。

您正在`#import "ArrowWrapper.h"`BoxSprite.h 中导入并`#import "BoxSprite.h"`在`ArrowWrapper.h`

所以改变 BoxSprite.h 像：

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"
#import "BoxSum.h"

@class ArrowWrapper;
@interface BoxSprite : CCSprite {

}
@property ArrowWrapper* arrowItem;
@end 
```

# android - 在 Android 中设置表格布局

> ID：12652146
> 
> 赞同：0
> 
> 时间：2012-09-29T11:02:08.423
> 
> 标签：android, xml, android-tablelayout

我试图在 Android 中制作这样的表格布局。

第一列 - 2 个按钮，下一列是第二行中的一个按钮。按钮的大小应该相同。我使用 0 宽度和重量 1 并拉伸列。

![布局](../Images/4d59f5e5be0ac3593c84c7d942f8b7cf.png)

在 XML 中：

```
 <TableLayout
        android:id="@+id/tableLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:stretchColumns="*" >

        <TableRow>

            <Button
                android:id="@+id/button_stereo_system_state"
                style="@style/StyleButton"
                android:background="@drawable/background_button_off"
                android:drawableTop="@drawable/icon_button_on_off"
                android:text="@string/button_text_option_off" />

            <Button
                android:id="@+id/button_stereo_system_radio"
                style="@style/StyleButton"
                android:background="@drawable/background_button_off"
                android:drawableTop="@drawable/icon_button_play"
                android:text="@string/button_text_play_radio" />
        </TableRow>
        <TableRow>
            <Button
                android:id="@+id/button_stereo_system_cd"
                style="@style/StyleButton"
                android:layout_column="0"
                android:background="@drawable/background_button_off"
                android:drawableTop="@drawable/icon_button_play"
                android:text="@string/button_text_play_cd" />
        </TableRow>
    </TableLayout> 
```

在风格上：

```
<style name="StyleButton">
        <item name="android:layout_height">wrap_content</item>
        <item name="android:layout_width">0dip</item>
        <item name="android:layout_weight">1</item>
        <item name="android:layout_margin">10dip</item>
        <item name="android:textSize">19sp</item>
        <item name="android:textColor">@color/color_text_button</item>
</style> 
```

使用第二行中的此源代码，按钮被拉伸并占据整行。这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T11:33:58.477

一种解决方案（正如您在评论中推测的那样）是添加另一个与其余按钮相同的按钮并将可见性设置为不可见。[（请参阅此处](http://developer.android.com/reference/android/view/View.html#attr_android%3avisibility)的文档）。

基本上只需将以下行添加到您的 XML 中：

```
android:visibility="invisible" 
```

# video - Kinect - 录制和使用视频

> ID：12652148
> 
> 赞同：4
> 
> 时间：2012-09-29T11:02:29.483
> 
> 标签：video, load, kinect

我打算购买 Kinect for Windows，因为我要和一个朋友一起做一个学校项目。我的问题很简单——我可以用 Kinect 录制一些手势视频，然后发送给他，因为他买不到 Kinect。他是否能够加载视频并在运行时使用它，就像来自 kinect 的流一样，所以我们俩都可以在项目上工作。该项目将使用 C# 编写，并且可能使用 Microsoft 的 Kinect SDK，如果需要，还可以使用 OpenCV 或 OpenNI。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T12:11:58.770

简短的回答：是的。这取决于您使用的 SDK。

除了 KinectSDK 之外，[Kinect Studio](http://msdn.microsoft.com/en-us/magazine/jj650892.aspx)还是一个方便的工具，用于记录和使用 kinect 数据。

OpenNI 还允许保存 kinect 数据。有一个 API，但最简单的方法是[NiViewer 示例](http://openni.org/docs2/Reference/samples.html)（按 s 开始录制，按 x 停止）。在 Windows 上，.oni 文件将在应用程序中注册，因此您可以简单地打开文件以查看或分析它（例如在具有 OpenNI 但没有 Kinect 的不同机器上）。

我没有尝试将 KinectSDK 和 OpenNI 结合起来，但[Kinect-MSSDK-OpenNI-bridge](http://code.google.com/p/kinect-mssdk-openni-bridge/)项目看起来很有希望。

总之，考虑一下您需要使用的功能（例如深度数据、rgb 数据、骨骼跟踪、音频数据、电机控制、加速度计等）。和目标操作系统。两边各有利弊：

*   KinectSDK 提供音频/电机/加速度计控制，但仅适用于 Windows 7
*   OpenNI 不提供上述功能（尽管它支持深度/rgb/骨架数据），但它是跨平台的，并且在最近的版本中[与 OpenCV 很好地集成](http://docs.opencv.org/doc/user_guide/ug_highgui.html#using-kinect-and-other-openni-compatible-depth-sensors)

# ios - Segue 目的地类型以及如何在代码中找到它们

> ID：12652150
> 
> 赞同：1
> 
> 时间：2012-09-29T11:02:36.337
> 
> 标签：ios, xcode, ipad, uistoryboard

谁能告诉我如何用`if ()`语句来发现 segue 的目标视图控制器是否会出现在 Detail Split 或 Master Split 中？

我想把`if()`声明放在我的`prepareForSegue:sender:`方法中。

**编辑**

我所有与这个问题相关的详细视图（目前）都符合协议，我目前正在使用以下方法对目标控制器进行自省：

```
if ([segue.destinationViewController conformsToProtocol:@protocol(myProtocol)])... 
```

我可以看到，如果我愿意，这是行不通的：

1.  为了能够不时在 splitView 的 Master 或 Detail 中显示相同的类，同时...
2.  我只希望在要在细节拆分中显示视图时 if() 语句为真。

诸如此类的东西似乎`segue.destinationViewController.navigationController == ...`也没有任何用处。

我希望，因为我们需要在设置 segue 时设置“Master Split”或“Detail Split”……有一种方法可以不那么迂回地访问这些信息。

**第二次编辑：**

我使用内省进行此设置的方式确实“有效”。它似乎不是很“面向对象”。我认为我根本不应该查询视图控制器来获取这些信息，我不明白为什么 VC 应该知道它将显示在 splitView 的哪一侧。当然，应该保留此信息的对象是 Segue，正如我所说，当我们选择“细节”或“主”拆分时，它似乎正在情节提要中“设置”。

也许它不是任何东西的属性，但我不知道如何得到它。

我想我可以在它的 viewWillAppear 中查询destinationViewController 以发现它出现在屏幕上后它所在的NavigationController，但同样，它似乎有点“hacky”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T15:11:31.613

我的经验有点有限，但我见过的大多数`prepareForSegue`情况下，`if()`块检查`segue.identifier`以执行任何需要专门用于处理构建新页面的操作。如果为所有 segue 设置标识符，则可以只使用代码来处理来自该控制器的每个 segue，并根据该 segue 是转到 masterViewController 还是 detailViewController 来更改代码的内容。这不是一种真正自动化的方式，但它可以完成工作。

编辑：哦，天哪，这个措辞有点令人困惑。如果你想要我，我可以放一个代码示例，但它必须等到星期一，因为在那之前我无法使用 Mac。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T14:49:34.507

我不知道可能有更好的更抽象和可重用的方法来做到这一点，但这里有一个建议可以帮助您的特定项目，只需要对您的特定项目有一点特殊知识。

如果您在为 segue 做准备时使用自省，则可以使用对方法的响应来检查方法是否存在。

因此，例如，在 splitview 控制器的典型实现中（注意 - 不是全部），详细视图将实现处理旋转的方法。因此，如果这在您的项目中是正确的，您可以执行以下操作：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if ([segue.destinationViewController respondsToSelector:@selector(splitViewController:shouldHideViewController:inOrientation:)]) {
    //do something
} 
```

}

您可以基于与主视图或详细视图相关的项目中独特但不变的内容使用相同的方法。

希望有帮助，一切都好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T16:44:42.347

关于课程和协议的讨论给了我另一个想法，但同样，我不确定它是否会起作用——我想在发布之前对其进行测试，但我不会很快有时间进行测试。

我认为您应该能够创建 2 个新类 UIMasterViewController 和 UIDetailViewController，它们只是 UIViewController 的子类。然后，对于每个实际屏幕，不要直接将它们设为 UIViewController 的子类，而是将它们设为 UIDetailViewController 或 UIMasterViewController。然后，在你的`prepareForSegue`,

```
if ([segue.destinationViewController isKindOfClass:UIMasterViewController])
{
  //do master view specific stuff
}
else if ([segue.destinationViewController isKindOfClass:UIDetailViewController])
{
  //do detail view stuff here
} 
```

只要您可以正确设置自定义视图控制器类，这应该是一种非常可靠的方式来告诉您的 segue 将您发送到哪里。这仍然不能解决问题中提到的第一个问题

> 1.  “为了能够不时在 splitView 的 Master 或 Detail 中显示相同的类，同时......”

这可以通过制作 2 个您希望能够显示为其中一个或两个的所有视图的副本来克服，然后将一个作为 UIMasterViewController 和另一个作为 UIDetailViewController - 复制粘贴应该对其余大部分都有好处。

让我知道这是否可行 - 我不完全确定如何在我的头顶上设置控制器，但我很确定它可以完成。如果可以的话，我可以看到这是一件非常有用的事情。

# javascript - 如何获得过滤后的集合

> ID：12652151
> 
> 赞同：1
> 
> 时间：2012-09-29T11:03:10.530
> 
> 标签：javascript, backbone.js, local-storage, backbone-views

假设我有一个`big collection`并且我想将这个大集合的一个子集用于不同的视图。

我尝试了以下代码，但它不起作用，因为它`filtered collection`实际上是一个新代码并且它不引用`BigCollection instance`.

我的问题是：
我怎样才能得到一个集合，它是一个子集`BigCollection instance`？

这是我的代码。请参阅评论以获取更多信息：

```
// bigCollection.js
var BigCollection = Backbone.Collection.extend({
    storageName: 'myCollectionStorage',
    // some code
});

// firstView.js
var firstView = Marionette.CompositeView.extend({
    initialize: function(){
        var filtered = bigCollection.where({type: 'todo'});
        this.collection = new Backbone.Collection(filtered);
        // the issue is about the fact 
        // this.collection does not refer to bigCollection
        // but it is a new one so when I save the data 
        // it does not save on localStorage.myCollectionStorage
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T12:56:42.950

用于`BigCollection`制作过滤集合，如下所示：

```
 // firstView.js
    var firstView = Marionette.CompositeView.extend({
        initialize: function(){
            var filtered = bigCollection.where({type: 'todo'});
            this.collection = new BigCollection(filtered);
            // now, it will save on localStorage.myCollectionStorage
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T12:13:50.107

您可以将原始模型保存在集合中的变量中，以便在取消应用过滤器后恢复它们，如下所示：

```
// bigCollection.js
var BigCollection = Backbone.Collection.extend({
    storageName: 'myCollectionStorage',
    // some code
});

// firstView.js
var firstView = Marionette.CompositeView.extend({
    initialize: function(){
        bigCollection.original_models = bigCollection.models;
        bigCollection.models = bigCollection.where({type: 'todo'});
    }
}); 
```

然后您可以在切换过滤器时恢复它们：

```
bigCollection.models = bigCollection.original_models; 
```

# mysql - 外键约束中的mysql循环依赖

> ID：12652152
> 
> 赞同：18
> 
> 时间：2012-09-29T11:03:26.287
> 
> 标签：mysql, sql, database-design, referential-integrity

给定架构：

![在此处输入图像描述](../Images/f57a4c26d7ec9b23c526f5bb864b13cc.png)

我需要的是让每一个`user_identities.belongs_to`参考资料都有一个`users.id`.

同时，每一个`users`都有一个`primary_identity`如图所示。

但是，当我尝试添加此引用时`ON DELETE NO ACTION ON UPDATE NO ACTION`，MySQL 说

> #1452 - 无法添加或更新子行：外键约束失败（`yap`. `#sql-a3b_1bf`, CONSTRAINT `#sql-a3b_1bf_ibfk_1`FOREIGN KEY ( `belongs_to`) REFERENCES `users`( `id`) ON DELETE NO ACTION ON UPDATE NO ACTION）

我怀疑这是由于循环依赖，但我该如何解决它（**并**保持参照完整性）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-29T11:34:20.693

解决这个问题的唯一方法（至少在 MySQL 的有限功能下）允许`NULL`两个 FK 列中的值。创建具有主要身份的新用户将如下所示：

```
insert into users (id, primary_identity)
values (1, null);

insert into identities (id, name, belongs_to)
values (1, 'foobar', 1);

update users 
  set primary_identity = 1
where id = 1;

commit; 
```

此解决方案的唯一缺点是您不能强制用户具有主要身份（因为该列必须可以为空）。

^(另一种选择是更改为支持延迟约束的 DBMS，然后您只需插入两行，并且只会在提交时检查约束。或者使用可以有部分索引的 DBMS，然后你可以使用带有`is_primary`列的解决方案)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-29T11:11:51.080

我不会以这种方式实现它。

`primary_identity`从表中删除字段，并在名为`users`的表中添加一个附加字段，并将其用作主要配置文件的指示符`user_profiles``is_primary`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T19:49:13.120

这将防止 NULL 存在`FKs`，但仍不会强制存在主要配置文件 - 必须由应用程序管理。

`{UserID, ProfileID}`注意 table上的备用键（唯一索引）`Profile`和匹配的 FK `PrimaryProfile`。

![在此处输入图像描述](../Images/0b70de6fce3ad28cf10abd09abca3e09.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T11:28:32.690

~~我没用过，但你可以试试[INSERT IGNORE](http://dev.mysql.com/doc/refman/5.0/en/insert.html)。我会做这两个，每个表一个，这样一旦它们都完成，参照完整性就会得到维护。如果您在事务中执行它们，如果插入第二个有问题，您可以回滚。~~

~~由于您忽略了此功能的约束，因此您应该在程序代码中进行检查，否则您的数据库中的数据可能会忽略您的约束。~~

感谢@Mihai 指出上述问题。另一种方法是在插入时禁用约束，然后重新启用它们。但是，在可能产生超出可接受的开销的大表上 - 试试看？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T09:36:37.093

问题似乎是您试图将主要身份信息保留在 user_identities 表中。

相反，我建议您将主要用户信息（姓名/电子邮件）放入用户表中。不要对 user_identities 表使用外键。

仅来自 user_identities 表的外键

所有约束现在都可以正常工作，因为它们只是一种方式。

除非主用户（在表 users 中）存在，否则无法输入 user_identities。同样，如果存在现有子身份（在 user_identities 中），则不应删除主用户。

您可能希望将表的名称更改为“primary_users”和“secondary_users”，以明确发生了什么。

听起来好吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-05T14:17:09.623

这个问题是在[如何](https://stackoverflow.com/questions/7843296/how-to-drop-tables-with-cyclic-foreign-keys-in-mysql)从删除方面在 MySQL 中删除带有循环外键的表时提出的，但我认为其中一个答案也适用于这里：

```
SET foreign_key_checks = 0;
INSERT <user>
INSERT <user identity>
SET foreign_key_checks = 1; 
```

将其作为一个事务并一次性提交。我没有尝试过，但它适用于删除，所以我不知道为什么它不适用于插入。

# android - 如何保护应用程序以在 android 中进行封闭测试？

> ID：12652153
> 
> 赞同：0
> 
> 时间：2012-09-29T11:03:46.893
> 
> 标签：android

我需要知道如何保护我的应用程序以进行封闭测试？

我想将我的应用程序发送给一些人，以便他们进行测试。但我不希望他们与其他人共享 .apk 并在某些日子里使用它。所以我需要实现某种试用/测试模式。

我需要一些东西，例如该应用程序只能运行 7 天左右。这个怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T11:09:41.967

有几种方法可以确保安全：

1.  获取服务器，并根据唯一的设备 ID（如 IMEI 或 MAC 地址）进行服务器端身份验证。任何不属于您的测试人员的设备都不会在您的服务器上列出，您可以停止该应用程序的运行。
2.  如果可能，让每个人来找您并自己安装 apk，而不是邮寄给他们
3.  建立试用制度。存储此人第一次从设备访问您的应用程序的日期，并在`n`几天后停止让他使用它。如果您将它与唯一 ID 一起存储在服务器上，它会更安全，就像它存储在共享首选项或其他东西中一样，用户可以通过清除数据或卸载并重新安装应用程序来绕过它。
4.  使用 ProGuard 之类的工具混淆您的代码。这将增加额外的安全层，以防有人反编译您的应用程序

请注意，这些只是一些建议，没有一个是 100% 安全的。AFAIK，没有办法确保 100% 的安全性，简而言之，将设备锁定在领导室中，并一次让一个测试人员进入。我敢打赌，也有办法解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T11:10:50.790

使用[hockeyapp](http://www.hockeyapp.net/)，将您的应用分发给封闭的一群人没有什么比这更容易的了。

# haskell - haskell函数定义IO

> ID：12652155
> 
> 赞同：-3
> 
> 时间：2012-09-29T11:03:49.297
> 
> 标签：haskell, io

给出函数 fmap :: (a->b) -> IO a -> IO b 的定义

其效果是通过将函数应用于其结果来转换交互。您应该使用 do 构造来定义它。

我应该如何定义 fmap？我对此一无所知？

有人可以帮我吗？

谢谢~！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T12:14:37.293

它看起来像家庭作业或其他东西，所以我会给你足够的提示，这样你就可以自己处理其余的细节。

```
fmap1 :: (a -> b) -> IO a -> IO b 
fmap1 f action = 
```

`action`is 作为`IO`动作，`f`是来自`a`to的函数`b`，因此是 type `a -> b`。

如果您熟悉`>>=`具有类型的 monadic bind（简化为`IO`monad）

```
(>>=) :: IO a -> (a -> IO b) -> IO b 
```

现在如果你看

```
action >>= f 
```

这意味着执行`IO`返回输出（例如`out`type `a`）并将输出传递给`f`type 的操作`a -> IO b`，因此`f out`是 type `IO b`。

如果您查看第二个调用`return`的具有类型的函数（再次简化为`IO`monad）

```
return :: a -> IO a 
```

它接受 type 的纯值`a`并给出 type 的`IO`动作`IO a`。

现在让我们回顾一下`fmap`。

```
fmap1 f action 
```

它执行`IO`动作，然后`f`在动作的输出上运行，然后将输出转换为另一个`IO`类型的动作`IO b`。所以

```
fmap1 f action = action >>= g 
    where
        g out = return (f out) 
```

现在是`do`符号的语法糖。这只是以另一种方式编写绑定`>>=`。

在`do`符号中，您可以通过以下方式获得操作的输出

```
out <- action 
```

所以 bind 只是减少到

```
action >>= f = do 
    out <- action 
    f out 
```

我认为现在您将能够将 fmap 的定义转换为 do 构造。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T11:08:36.473

你熟悉地图吗？

地图的类型是

地图 :: (a -> b) -> [a] -> [b]

如果你跑

地图 (*5) [1,2,3]

你得到

[5,10,15]

map 的重点是给它一个转换函数和一个源列表，并让它将转换应用于列表以获得结果列表。

map 是列表的 fmap。他们希望您为 IO 类型编写 fmap，这有帮助吗？

如果您想了解更多关于 fmap 的信息，请阅读[http://learnyouahaskell.com/making-our-own-types-and-typeclasses#the-functor-typeclass](http://learnyouahaskell.com/making-our-own-types-and-typeclasses#the-functor-typeclass)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T11:51:11.803

请注意，每个 monad 已经是一个仿函数。但是，如果你想重新实现`fmap`，你可以很容易地用一元函数来做到这一点。一个[单子定律](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Monad.html#t%3aMonad)是这样的：

```
fmap f xs = xs >>= return . f 
```

如果你对 do notation 的理解足够，你应该可以自己翻译。如果没有，请问。

# asp.net-mvc - 文本框下未显示 Jquery 自动完成建议

> ID：12652156
> 
> 赞同：1
> 
> 时间：2012-09-29T11:03:56.833
> 
> 标签：asp.net-mvc, jquery-ui, jquery-autocomplete

我一直在尝试让 jquery-ui 自动完成的简单示例起作用。我有一个控制器设置来处理查询，它返回看起来有序的字符串，但我没有收到任何建议。

这是我在该页面上包含的库

```
<link href="/Content/css/jquery-ui-1.8.12.custom.css" rel="stylesheet" type="text/css" />
<link href="/Content/css/jquery.fancybox-1.3.4.css" rel="stylesheet" type="text/css" />
<link href="/Content/css/Stylesheet.css" rel="stylesheet" type="text/css" />
<link href="/Content/css/coupon1.css" rel="stylesheet" type="text/css" />
<link href="/Content/Slider/slidder.css" rel="stylesheet" type="text/css" />  

<script src="/Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
<script src="/Scripts/jquery-ui-1.8.23.custom.min.js" type="text/javascript"></script>
<script src="/Scripts/el7r_notify.min.jq.js" type="text/javascript"></script>
<script src="/Scripts/ZeroClipboard.js" type="text/javascript"></script>
<script src="/Scripts/jquery.spellcheck.min.js" type="text/javascript"></script> 
<script src="/Scripts/jquery.fancybox-1.3.4.js" type="text/javascript"></script>
<script src="/Scripts/jquery.validate.min.js" type="text/javascript"></script>
<script src="/Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>
<script src="/Content/Slider/jquery.jcarousel.min.js" type="text/javascript"></script>
<script src="/Content/Slider/jquery-func.js" type="text/javascript"></script>
<script src="/Scripts/Coupon.js" type="text/javascript"></script> 
```

这是javascript和表单标签：

```
 $(document).ready(function () {
        $("#tags").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: '/Home/GetCompanyNames',
                    success: function (msg) {
                        response($.map(msg));
                    }

                });
            }
        });
    });

    <div class="ui-widget"> 
  <label for="tags">tags: </label> 
   <input id="tags" /> 
</div> 
```

我从控制器返回一个看起来合理的字符串响应：

“LTJRKK、KTOYQQ、GDADKT、PVFOQT、PVFOQT、YNKYVS、YNKYVS、DQBOVU、DQBOVU”

这个字符串似乎是自动完成正在寻找的默认命名。

但我一点也不高兴。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T14:57:26.923

您的呼叫[`$.map`](http://api.jquery.com/jQuery.map)不正确。您没有向 提供回调函数`$.map`，这可能是导致问题的原因。

在这种情况下，您根本不需要使用`$.map`，因为您的操作会以正确的格式返回数据。以下应该可以正常工作：

```
$(document).ready(function () {
    $("#tags").autocomplete({
        source: '/Home/GetCompanyNames'
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T11:21:47.633

可能你需要这个：

```
$("#tags").autocomplete({
  source: function(request, response) {
    $.ajax({
      url: "url",
      data: request,
      dataType: "json",
      method: "post",
      success: response
    }
  }
}); 
```

# iphone - 使用 Underscore.js 模板在 PhoneGap / Backbone.js 中未触发单击事件

> ID：12652161
> 
> 赞同：0
> 
> 时间：2012-09-29T11:04:40.467
> 
> 标签：iphone, cordova, backbone.js, underscore.js, cordova-2.0.0

我一直在用backbone.js制作一个Phonegap / Cordova 2.0应用程序，在我尝试构建一个表单之前一切都很好。显示表单，但单击事件不会触发键盘。

我玩了不同的事件，发现添加`ontouchstart="this.focus()"`键盘很好。我在视图函数中添加了一个包罗万象以带来焦点：

```
window.PageView = Backbone.View.extend({

    initialize: function() {
        this.template = _.template(tpl.get('page'));
    },

    render: function(eventName) {
        $(this.el).html(this.template(this.model.toJSON()));
        $('input', $(this.el)).bind('touchstart',function(event) {
            $(this).focus();
        });
        return this;
    }

}); 
```

但即使有了这个，如果我改变`bind('touchstart'...`它`'click'`也不会被触发。

我发现了其他一些帖子，例如：[click event doesn't fire in an underscore template](https://stackoverflow.com/questions/12543948/click-event-doesnt-fire-in-an-underscore-template)

这表明它与 underscore.js 模板过程有关，但没有什么很清楚。

我想我可以在 touchstart 上创建一个计时器功能来模拟这一点，但这有点神秘，所以我想知道到底发生了什么。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T14:34:39.510

尝试这个：

```
this.$(':input').bind(...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:06:54.617

原来是 iScroll 导致了这个问题。

```
 onBeforeScrollStart: function (e) { e.preventDefault(); }, 
```

具体来说。我刚刚评论了`e.preventDefault();`它，它很管用！

# sed - sed 仅提取模式

> ID：12652164
> 
> 赞同：1
> 
> 时间：2012-09-29T11:04:49.547
> 
> 标签：sed

我在使用 sed 时遇到了一些问题。什么是仅提取模式的正确方法？
例如以下返回`world`，我希望它只返回`w`

`echo "hello world" | sed -n 's|hello \(w\)|\1|p'`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T11:59:18.757

更好的是你可以使用这种方式。

**回声“你好世界” | sed -r 's/.+(w).*/\1/'**

这将只提取 w 字符。-r 选项是扩展的正则表达式。所以我们不使用转义“\”特殊字符。
. 匹配任何单个字符。* 星号将匹配零次或多次出现。+ plus 将匹配一个或多个匹配项。() 这是使用它的分组方法，您可以取回参考。s 用于替代方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T11:15:38.780

您忘记匹配并替换（删除）以下文本`w`：

```
echo "hello world" | sed -n 's|hello \(w\).*|\1|p' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T12:50:41.680

sed 命令如果匹配任何字符串如果只匹配第一个字符中的第二个单词

sed 's/([az].*) ([az]).*/\2/' 输入文件

# javascript - 为什么我的 d3.js 折线图不起作用？

> ID：12652167
> 
> 赞同：2
> 
> 时间：2012-09-29T11:04:55.367
> 
> 标签：javascript, svg, d3.js

我目前正在学习 d3.js，作为一项任务，我正在尝试使用自定义数据源构建折线图。出于某种原因，我无法让行生成器工作，而且它似乎无法为路径元素创建 d 属性。我似乎也没有收到任何错误消息。有人可以看看吗？

```
<!DOCTYPE html>
<meta charset="utf-8">
<style>
    rect.bar {
        //fill: steelblue;
    }
.axis text {
    font: 10px sans-serif;
}

.axis path, .axis line {
    fill: none;
    stroke: #000;
    shape-rendering: crispEdges;
}
</style>
<body>
<script src="http://d3js.org/d3.v2.js"></script>
<script>
data = [{
name:'A Negative',
data:[{x:1346103936,y:0.10252502},{x:1346190336,y:0.10838352},{x:1346276736,y:0.11182367},{x:1346363136,y:0.1469633},{x:1346449536,y:0.108044505},{x:1346535936,y:0.10141762},{x:1346622336,y:0.13505103},{x:1346708736,y:0.11661343},{x:1346795136,y:0.09985885},{x:1346881536,y:0.10367505},{x:1346967936,y:0.12067748},{x:1347054336,y:0.1329808},{x:1347140736,y:0.14677866},{x:1347227136,y:0.14087029},{x:1347313536,y:0.13160454},{x:1347399936,y:0.1313771},{x:1347486336,y:0.14144897},{x:1347572736,y:0.15051538},{x:1347659136,y:0.15604788},{x:1347745536,y:0.14364798},{x:1347831936,y:0.12961338},{x:1347918336,y:0.11450371},{x:1348004736,y:0.11712107},{x:1348091136,y:0.12876798},{x:1348177536,y:0.10429894},{x:1348263936,y:0.110398784},{x:1348350336,y:0.10483569},{x:1348436736,y:0.14220005},{x:1348523136,y:0.11701017},{x:1348609536,y:0.12221267},{x:1348696576,y:0.11133491}]},{
name:'A Positive',
data:[{x:1346105088,y:0.20869565},{x:1346191488,y:0.14895636},{x:1346277888,y:0.2819277},{x:1346364288,y:0.19342105},{x:1346450688,y:0.35833332},{x:1346537088,y:0.19473684},{x:1346623488,y:0.23015076},{x:1346709888,y:0.15840708},{x:1346796288,y:0.23293903},{x:1346882688,y:0.21885246},{x:1346969088,y:0.22707888},{x:1347055488,y:0.26593626},{x:1347141888,y:0.22822087},{x:1347228288,y:0.24236642},{x:1347314688,y:0.17460318},{x:1347401088,y:0.19075145},{x:1347487488,y:0.1594203},{x:1347573888,y:0.13432837},{x:1347660288,y:0.0},{x:1347746688,y:0.18100129},{x:1347833088,y:0.1605938},{x:1347919488,y:0.12987013},{x:1348005888,y:0.12683824},{x:1348092288,y:0.15542522},{x:1348178688,y:0.13584906},{x:1348265088,y:0.14351852},{x:1348351488,y:0.1322314},{x:1348437888,y:0.13709678},{x:1348524288,y:0.17438692},{x:1348610688,y:0.0},{x:1348700160,y:0.18169399}]},{
name:'A Uncertain',
data:[{x:1346104576,y:0.04397342},{x:1346190976,y:0.044665344},{x:1346277376,y:0.049782943},{x:1346363776,y:0.051038638},{x:1346450176,y:0.050243802},{x:1346536576,y:0.03118218},{x:1346622976,y:0.04424348},{x:1346709376,y:0.04498049},{x:1346795776,y:0.04105231},{x:1346882176,y:0.04970384},{x:1346968576,y:0.045589853},{x:1347054976,y:0.046243627},{x:1347141376,y:0.05226451},{x:1347227776,y:0.047814183},{x:1347314176,y:0.04413969},{x:1347400576,y:0.03914877},{x:1347486976,y:0.042237047},{x:1347573376,y:0.054126237},{x:1347659776,y:0.04697353},{x:1347746176,y:0.04476943},{x:1347832576,y:0.042521983},{x:1347918976,y:0.05310476},{x:1348005376,y:0.059566505},{x:1348091776,y:0.043783925},{x:1348178176,y:0.043761015},{x:1348264576,y:0.046513315},{x:1348350976,y:0.0384231},{x:1348437376,y:0.04024283},{x:1348523776,y:0.040613018},{x:1348610176,y:0.04732518},{x:1348696576,y:0.06337391}]},{
name:'A Positive',
data:[{x:1346104320,y:0.109645985},{x:1346190720,y:0.092952825},{x:1346277120,y:0.10988262},{x:1346363520,y:0.12258253},{x:1346449920,y:0.12162819},{x:1346536320,y:0.11145041},{x:1346622720,y:0.17937773},{x:1346709120,y:0.1605882},{x:1346795520,y:0.15555955},{x:1346881920,y:0.15066825},{x:1346968320,y:0.17311412},{x:1347054720,y:0.21528025},{x:1347141120,y:0.20169735},{x:1347227520,y:0.15779452},{x:1347313920,y:0.1469917},{x:1347400320,y:0.15995567},{x:1347486720,y:0.17675863},{x:1347573120,y:0.14658852},{x:1347659520,y:0.2049946},{x:1347745920,y:0.15699232},{x:1347832320,y:0.14301357},{x:1347918720,y:0.1457654},{x:1348005120,y:0.1532571},{x:1348091520,y:0.17817244},{x:1348177920,y:0.13126957},{x:1348264320,y:0.12135763},{x:1348350720,y:0.14930858},{x:1348437120,y:0.14171022},{x:1348523520,y:0.12027296},{x:1348609920,y:0.13843122},{x:1348696576,y:0.15421592}]},{
name:'A Uncertain',
data:[{x:1346103936,y:0.046369042},{x:1346190336,y:0.042160377},{x:1346276736,y:0.06631727},{x:1346363136,y:0.043078776},{x:1346449536,y:0.049522486},{x:1346535936,y:0.041241966},{x:1346622336,y:0.041665666},{x:1346708736,y:0.0461979},{x:1346795136,y:0.044713285},{x:1346881536,y:0.041361943},{x:1346967936,y:0.051421918},{x:1347054336,y:0.04684727},{x:1347140736,y:0.048165746},{x:1347227136,y:0.053684916},{x:1347313536,y:0.05550549},{x:1347399936,y:0.05435959},{x:1347486336,y:0.04710294},{x:1347572736,y:0.05433203},{x:1347659136,y:0.06015368},{x:1347745536,y:0.047590178},{x:1347831936,y:0.045565397},{x:1347918336,y:0.056516618},{x:1348004736,y:0.06080917},{x:1348091136,y:0.068452686},{x:1348177536,y:0.049881306},{x:1348263936,y:0.04221391},{x:1348350336,y:0.0484556},{x:1348436736,y:0.0402809},{x:1348523136,y:0.058744337},{x:1348609536,y:0.054147776},{x:1348696576,y:0.056016088}]},{
name:'A Negative',
data:[{x:1346104832,y:0.25386313},{x:1346191232,y:0.14606741},{x:1346277632,y:0.17222223},{x:1346364032,y:0.19863014},{x:1346450432,y:0.17857143},{x:1346536832,y:0.14606741},{x:1346623232,y:0.12448133},{x:1346709632,y:0.12931034},{x:1346796032,y:0.25714287},{x:1346882432,y:0.22222222},{x:1346968832,y:0.1764706},{x:1347055232,y:0.28846154},{x:1347141632,y:0.1826923},{x:1347228032,y:0.2236842},{x:1347314432,y:0.091836736},{x:1347400832,y:0.25},{x:1347487232,y:0.17567568},{x:1347573632,y:0.15384616},{x:1347660032,y:0.0},{x:1347746432,y:0.23584905},{x:1347832832,y:0.13718411},{x:1347919232,y:0.0},{x:1348005632,y:0.13533835},{x:1348092032,y:0.0},{x:1348178432,y:0.06315789},{x:1348264832,y:0.0},{x:1348351232,y:0.14457831},{x:1348437632,y:0.13253012},{x:1348524032,y:0.1},{x:1348610432,y:0.0},{x:1348700160,y:0.29826254}]}];

var x = d3.scale.linear()
        .range([0, "100%"])
        .domain(d3.extent(data[0].data, function(d) { return d.x }));

var y = d3.scale.linear()
        .domain([0, d3.max(data[0].data, function(d) { return d.y; })])
        .range([0, "100%"]);

var line = d3.svg.line()
        .x(function(d) { return x(d.x)})
        .y(function(d) { return y(d.y)})
        .interpolate("basis");

var svg = d3.select("body").append("svg")
            .attr("width", "100%")
            .attr("height", "500px");

var colors = d3.scale.category20().range();

var group = svg.selectAll("g").data(data);

group.enter().append("g")
        .attr("fill", function(d, i) { return colors[i % colors.length]; })
        .attr("opacity", "0.5").attr("stroke", "black").attr("stroke-width", "2");

group.selectAll("path")
        .data(function(d) {return d.data})
    .enter().append("path")
        .attr("d", line)
        .attr("class", "line");

</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T14:49:42.007

我看到了几个问题。首先是 SVG 元素的`width`和`height`属性应该被指定为无单位的数字——总是以像素为单位。这定义了 SVG 元素的坐标空间以及它在屏幕上的大小。您还可以使用 px 或百分比设置宽度和高度*样式属性*，但*除了*设置宽度和高度属性之外，您只应该这样做。典型的模式是：

```
var width = 960,
    height = 500;

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height); 
```

您可能还想查看[边距约定示例](http://bl.ocks.org/3019563)以获取更多信息。

我要改变的第二件事是使用这个坐标空间来设置你的比例范围，而不是使用百分比定位：

```
var x = d3.scale.linear()
    .domain(…)
    .range([0, width]);

var y = d3.scale.linear()
    .domain(…)
    .range([height, 0]); 
```

请注意，y 刻度的范围是倒置的，因此 y-0 位于图表的底部，而不是默认的顶部。同样，有关详细信息，请参阅约定示例。

最后，看起来您的 x 值是自 UNIX 纪元以来的秒数，因此我建议您将数据转换为 Date 对象，然后使用 d3.time.scale。这使得将来添加带有日期标签的 x 轴变得更加容易。您可以转换为日期作为预处理步骤，如下所示：

```
data.forEach(function(series) {
  series.data.forEach(function(d) {
    d.x = new Date(d.x * 1000);
  });
}); 
```

# c++ - C++使一个类函数成为另一个类函数的成员

> ID：12652169
> 
> 赞同：1
> 
> 时间：2012-09-29T11:05:23.837
> 
> 标签：c++, class, function, member

我真诚地希望在座的人不要介意这些问题。在搜索了很多次之后，也许使用了错误的搜索词 - 然而 - 我似乎无法在这方面找到任何东西。是的，我浏览了 cplusplus 的文档，但仍然找不到答案。

我的问题很简单，如何才能使一个函数只能通过另一个函数调用？

这是一个例子

```
class someclas{
public:
void screen():
void setsomevariable (int somevariable){}
}clas; 
```

而当我调用函数 setsomevariable() 时，它应该只有在调用 screen 函数后才能使用。像这样：

```
clas.screen().setsomevariable(..); 
```

同样，我如何使这个函数成为 screen() 的成员？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T11:20:57.887

这确实符合您的要求，但不一定满足您的需求。想提供更多帮助，但您顽固地拒绝提供详细信息...

```
class Screen {
    public:
    void setsomevariable (int somevariable) {}
};

class someclas {
    Screen s;
    public:
    Screen& screen() { return s; }
} clas; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T11:14:02.010

一个成员函数属于一个类。你不能让一个函数成为另一个函数的成员。

你可以在你的类中保留一个布尔值，如果之前没有调用屏幕，则抛出异常。但这是一个丑陋的解决方案..

```
class someclas{
public:
  someclas & screen() { // returns a reference to your class to enable the clas.screen().setsomevariable() syntax
    screenCalled = true;
    return *this;
  }
  void setsomevariable (int somevariable){
    if (!screenCalled) {
      throw std::exception();
    }
    // some code
    screenCalled = false;
  }
  bool screenCalled;
}clas; 
```

# vim - 有没有办法调整vim中折叠线的格式？

> ID：12652172
> 
> 赞同：3
> 
> 时间：2012-09-29T11:05:35.193
> 
> 标签：vim, folding

现在我的折叠线看起来像这样：

```
+-- 123 lines: doSomeStuff();--------------------------
+-- 345 lines: doSomeOtherStuff();--------------------- 
```

我想删除一行实际内容之前的所有内容（+-- xxx 行:)，使其更像 Notepad++/Eclipse 视觉方式 - 现在它太难阅读了，我实际上不在乎我有多少行有一定的折叠:) 那么有没有调整折叠线格式的命令？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-29T14:49:54.417

是的，`foldtext`romainl 已经提到的函数返回一个要在闭合折叠中显示的字符串（换句话说，就是你所看到的）。

您可以修改 fold 功能以显示您觉得有趣的任何内容。例如，

```
function! MyFoldText() " {{{
    let line = getline(v:foldstart)

    let nucolwidth = &fdc + &number * &numberwidth
    let windowwidth = winwidth(0) - nucolwidth - 3
    let foldedlinecount = v:foldend - v:foldstart

    " expand tabs into spaces
    let onetab = strpart('          ', 0, &tabstop)
    let line = substitute(line, '\t', onetab, 'g')

    let line = strpart(line, 0, windowwidth - 2 -len(foldedlinecount))
    let fillcharcount = windowwidth - len(line) - len(foldedlinecount)
    return line . '…' . repeat(" ",fillcharcount) . foldedlinecount . '…' . ' '
endfunction " }}}
set foldtext=MyFoldText() 
```

将返回与此类似的内容

```
" Basic settings --------------------------------------------- {{{...              6 ... 
```

表示折叠中有 6 行（包括带有关闭折叠标记的行）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T12:10:12.670

`:help fold-foldtext`拥有您需要的所有信息。

# php - 使用迭代获取存储的 id

> ID：12652175
> 
> 赞同：1
> 
> 时间：2012-09-29T11:06:43.430
> 
> 标签：php

我需要一些帮助：我有这个数据库，其中包含这些字段及其尊重值：

```
agency_id | hostess_id
3         | 12-4-6
5         | 19-4-7
1         | 1 
```

在 hostess_id 中存储了所有与该 agency_id 关联但用“-”分隔的 hostesses id

好吧，我以女主人身份登录，并且我有 id=4 我需要检索所有包含 id=4 的机构 ID，我不能用类似的操作员来做到这一点。我试图通过保存 hostess_id 行来做到这一点到一个数组，然后将其内爆，但我无法像这样解决它。

拜托，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T14:48:12.190

首先，让我说我完全同意@JvdBerg 的观点，即这是需要规范化的糟糕的数据库设计。

让我们想一想，您无法更改数据库布局，您必须使用 SQL 来解决这个问题，一个低效但可行的解决方案是

```
select agency_id from tablename where
  hostess_id LIKE '4-%' OR
  hostess_id LIKE '%-4-%' OR
  hostess_id LIKE '%-4' 
```

如果您正在搜索所有女主人 id 为 4 的代理商。我在 sqlfiddle 上构建它以更彻底地说明[http://sqlfiddle.com/#!2/09a52/1](http://sqlfiddle.com/#!2/09a52/1)

但请注意，该 SQL 语句很难优化，因为很少使用用于子字符串匹配的索引结构。不过，对于非常短的 id 列表，它可以正常工作。如果您有机会更改表结构，请像@JvdBerg 建议的那样规范化您的架构，并在 google 上查找数据库设计和正常形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T11:30:36.627

你应该改变你的数据库设计。您所描述的是典型的 N:N 关系

代理机构：

```
agency_id | name
3         | Miami
5         | Annapolis
1         | New York 
```

主持人

```
Hostes_id | name
4         | Helen
12        | May
19        | June 
```

代理主机

```
Hostes_id | agency_id
4         | 1
4         | 3
4         | 5
12        | 1
12        | 3
19        | 1 
```

# iphone - iPhone和iPad在设计上的区别

> ID：12652176
> 
> 赞同：2
> 
> 时间：2012-09-29T11:06:49.137
> 
> 标签：iphone, ios, ipad, uitextview

我在问一个非常基本的问题，我遇到了一些问题。我知道 iPad 支持的 iPhone 和 iPad 之间的区别`SplitView`，`popup over`但是在设计时我遇到了错误。我设计了一个`UITextView`

```
UITextView *textview = [[UITextView alloc] initWithFrame:CGRectMake(42, 150, 440, 60)]; 
```

这是设计文本视图的基本代码，但是当我在 iPad 模拟器上运行此代码时，对我来说似乎很好。但是当我在 iPhone 上运行它时，它并不顺利..因为那个 iPhone 的尺寸不同。在这种情况下，我应该怎么做才能在 iPhone 和 iPad 上运行它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T11:20:40.470

我假设您正在选择通用可执行文件，因此条件编译不是您的选择。

当您制作通用可执行文件时，您应该在根据设备类型进行调用之前检查您所依赖的功能。在这种特殊情况下，您依赖于具有特定尺寸的屏幕。与其硬编码“幻数”（42、15、440 和 60），不如从可用屏幕的当前大小计算它们：

```
CGFloat w = [UIScreen mainScreen].bounds.size.width;
CGFloat h = [UIScreen mainScreen].bounds.size.height;
// Do something like this if you can
UITextView *textview = [[UITextView alloc]
    initWithFrame:CGRectMake(w*0.025, h*0.25, w*0.5, h*0.125)
]; 
```

有可能无法从屏幕尺寸计算实际尺寸，因为您不希望视图与屏幕成比例缩放。在这种情况下，您可以检查 和 的值`h`，`w`检测设备尺寸，并使用相应的一组预定义尺寸来初始化您的视图。

# c++ - 编译 libjpeg

> ID：12652178
> 
> 赞同：29
> 
> 时间：2012-09-29T11:07:36.067
> 
> 标签：c++, image-processing, libjpeg

有没有人成功地将 libjpeg 包含在某些编译器中？我尝试了一切：Dev C++、VS10、CodeBlocks，手动复制标头和库，使用链接器添加，但没有。现在我真的很困惑，因为没有关于如何在任何编译器中编译它的官方指南。如果有人可以提供有关如何在任何编译器中编译库的教程，我将非常高兴。先感谢您。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-09-27T07:48:00.683

要在 Visual Studio 2012 中编译`libjpeg`9，请执行以下步骤（解压缩存档文件后）：

1.  下载该文件`WIN32.MAK`（例如，从[http://www.bvbcode.com/code/f2kivdrh-395674-down](http://www.bvbcode.com/code/f2kivdrh-395674-down)下载），并将副本放在源代码根目录中（可能是`C:\jpeg-9`，但这取决于您解压缩它的位置）。`%jpegsrc%`从现在开始，我将引用这个目录。拥有这个文件很重要；否则第 3 步将产生错误。

2.  在 Visual Studio 命令提示符下，打开到`%jpegsrc%`：

    `cd %jpegsrc%`

3.  在同一命令提示符下，执行以下命令：

    `NMAKE /f makefile.vc setup-v10`

    `%jpegsrc%`这将在:`jpeg.sln`和中创建两个 Visual Studio 2010 解决方案`apps.sln`。

4.  在 Visual Studio 2012 中打开每个解决方案。每个解决方案都会提示您将所有项目更新为 2012 格式。点击“更新”。我做了一次，提示没有出现。如果发生这种情况，请在解决方案资源管理器中右键单击`jpeg`解决方案，然后选择“更新 VC++ 项目...”，这将产生相同的提示。

5.  正常保存并构建每个解决方案。（您必须先构建`jpeg.sln`解决方案`apps.sln`，因为后者取决于前者。）

注意：这个过程在 Visual Studio 2010 中应该可以正常工作，无需更新，但我没有测试过。

**更新：**此方法在 Visual Studio 2015 中仍然适用于`libjpeg-9a`.

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-09-29T13:43:50.293

以下是我在 Windows 上使用 MinGW 构建 libjpeg 的方式：

## 1\. 使用 MSYS 获取 MinGW

我有一份来自[http://sourceforge.net/projects/mingw/](http://sourceforge.net/projects/mingw/)的副本。引自 www.mingw.org ：

> MSYS 是 GNU 实用程序（例如 bash、make、gawk 和 grep）的集合，允许构建依赖于存在的传统 UNIX 工具的应用程序和程序。

我们将需要它来运行`configure`libjpeg 源附带的脚本。

## 2.获取libjpeg源

从[http://www.ijg.org/](http://www.ijg.org/)获取 Unix 格式包（Windows 不适用于此过程）。我拿了`jpeg_8d`版本。

## 3.准备一个构建目录

我已经创建了一个名为`tmp`in的临时目录`D:\`，但您可以选择适合您需要的任何目录。重要的是 MSYS 中的路径名称。由于它为 Windows 带来了一些 * *Unixity* *，因此路径不能以其原始形式使用。简而言之：

`C:\path\to\file``/c/path/to/file`在 MSYS 土地上变成这样， 所以 `D:\tmp` 变成 `/d/tmp`.

将 libjpeg 源解压到 中`D:\tmp`，这样你就有了一个`jpeg-8d`目录。

在里面创建一个`jpeg-build`目录`D:\tmp`，它将保存构建的库。

现在一切都准备好了。

## 4../配置，制作，制作安装

这就是在 Unix 土地上建设的口头禅。应添加一个选项以将安装过程重定向到`D:\tmp\jpeg-build`.

在 MSYS shell（在 Windows 开始菜单中也称为 MinGW shell）中运行以下命令：

```
cd /d/tmp/jpeg-8d
./configure --prefix=/d/tmp/jpeg-build
make
make install 
```

作为附加步骤，您可以`make test`为安全而奔跑。

这些命令将构建 libjpeg 的静态和共享版本。

## 5.拿货，删除临时工

如果一切正常，您可以删除该`D:\tmp\jpeg-8d`目录，但保留该目录`jpeg-build`。它包含：

*   一个`include`目录，包含 libjpeg 头文件。您可以将它们移动到编译器的头文件目录。
*   一个`lib`目录，其中`.a`包含要传递给链接器的文件。您可以将它们移动到编译器的库目录。
*   一个`bin`目录，包含 libjpeg 共享库`libjpeg-8.dll`和 jpeg 工具。
*   一个`share`目录，包含`man`jpeg 工具的页面。

您现在可以通过指示正确的包含和库路径来构建您的程序并将其链接到 libjpeg。

`install.txt`您可以在源代码包中找到有关 libjpeg 构建和安装过程的许多详细信息。

我希望这会有用。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-09-29T16:24:22.443

用 VS10 构建 jpeg.lib 真的很简单。

首先，下载 zip 格式的 libjpeg 源代码。在我写这篇文章的时候，你可以在[这里](http://www.ijg.org/files/jpegsr8d.zip)找到它。

然后将 zip 文件的内容提取到您的磁盘。

然后打开 VS2010 命令提示符 shell（或在任何命令提示符窗口调用 vcvarsall.bat），cd 到 jpeg 源目录（上面引用的下载中的 jpeg-8d）并键入以下内容：

```
nmake -f makefile.win setup-v10 
```

这将生成两个 VS2010 解决方案，以及一堆项目文件。解决方案是：

*   `jpeg.sln`, 建立`jpeg.lib`
*   `apps.sln`，它构建示例应用程序。

祝你好运！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-05-28T17:45:03.313

如果您碰巧没有安装 Visual Studio 2010，以下是适用于 Visual Studio 2017 的内容：

**基本/常用步骤：**

1.  [从http://www.ijg.org/](http://www.ijg.org/) (zip 版本)下载最新版本的 libjpeg并将其解压到一个文件夹中
2.  打开“VS2017的开发者命令提示符”
3.  将目录 ( `cd`) 更改为您提取库源的位置

**VS 2017 方法：**

4.  **通过运行包括 Windows SDK v7.1A 目录**（Win32.Mak 稍后由 nmake 需要）：`set INCLUDE=%INCLUDE%;c:\Program Files (x86)\Microsoft SDKs\Windows\v7.1A\Include`

5.  运行`nmake /f makefile.win setup-v15`（请注意此处为 VS2017 的 v15）

从这里开始，按照@AthanasiusOfAlex 的说明将 Visual Studio 2010 解决方案升级到您正在运行的 Visual Studio 版本。如果您想要 Debug 配置，请按照 @SteveEng 的说明进行操作。

**您可能会遇到的错误：**

*   如果`nmake`失败并告诉您它不知道如何制作 jconfig.h，请手动将文件重命名`jconfig.vc`为`jconfig.h`
*   如果`nmake`失败并告诉您找不到 Win32.Mak，请手动将其从步骤 #4 中提到的 SDK 目录复制到 libjpeg 源目录。如果您碰巧没有安装该 SDK 版本，请从可信赖的资源下载该文件。
*   如果`nmake`失败并告诉您它不知道如何制作，从,等`setup-v15`开始尝试和错误... 这些是 VS 版本，只要您有任何 VS 2008 之后的版本安装。`setup-v10``setup-v11`

希望这可以帮助人们经历类似的痛苦。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-20T20:20:58.823

如果您还想在 MSVC 中使用调试模式。按照 AthanasiusOfAlex 的方法，构建版本，然后：

1.  右键单击项目并选择最底部的属性
2.  单击配置管理器，然后在活动解决方案配置下拉列表中选择 -new-
3.  将名称设置为调试并在下拉列表中选择从发布中复制配置设置，然后单击确定
4.  关闭对话框，进入常规设置并在目标名称下将广告添加到末尾，如下所示：$(ProjectName)d
5.  在 Whole Program Optimization 下拉菜单中选择：No Whole Program Optimization
6.  然后点击左侧配置属性下的C/C++，在Debug Information Format下拉菜单中选择C7 compatible (/Z7)
7.  在优化下选择禁用并为启用光纤安全优化和整个程序优化选择否
8.  在预处理器，预处理器定义下，单击编辑并使用以下内容：WIN32 _DEBUG DEBUG _LIB _CRT_SECURE_NO_WARNINGS
9.  在代码生成下，在运行时库下选择多线程调试 DLL (/MDd)

构建，你就完成了！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-16T04:39:27.900

[这是针对版本号 16.0 的 VS2019](https://i.stack.imgur.com/l9Zee.jpg)

像这样正确考虑 Visual Studio 版本名称以创建 .sln 文件。

产品名称 代号 版本号

Visual Studio 2019 Dev16 16.0

Visual Studio 2017 Dev15 15.0

Visual Studio 2015 Dev14 14.0

Visual Studio 2013 Dev12 12.0

# php - xDebug 会话不能被 stream_socket_client 调用

> ID：12652179
> 
> 赞同：0
> 
> 时间：2012-09-29T11:08:00.383
> 
> 标签：php, xdebug

我的电脑上有 2 个 wordpress 安装。一个安装是服务器类型，并在端口 80 上使用 stream_socket_client 函数调用其他安装。当我在客户端设置断点并在 eclipse 中进行调试会话时，这部分代码被执行，但 xdebug 调试器无法在断点处停止。使用 curl 调用相同的请求时，我没有同样的问题。

我使用 Mac OS，但在 Linux 上遇到同样的问题。

我的 xdebug 配置是：

```
zend_extension="/usr/lib/php/extensions/no-debug-non-zts-20090626/xdebug.so"
xdebug.remote_enable = on
xdebug.remote_handler="dbgp"
xdebug.remote_mode="req"
xdebug.remote_port=9000
xdebug.remote_host="127.0.0.1"
xdebug.remote_log=/var/log/xdebug_remote_log
xdebug.remote_autostart=1
xdebug.profiler_enable_trigger=on
xdebug.profiler_output_dir=/tmp
xdebug.profiler_output_name=cachegrind.out.%s.%t
xdebug.collect_return=on
xdebug.collect_vars=on
xdebug.auto_trace=0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:00:29.570

我找到了一个解决方案：

首先，它应该在 eclipse 的 xdebug 选项中启用多会话。

第二，它应该在请求头中添加以下行：

```
Cookie: XDEBUG_SESSION=ECLIPSE_DBGP; 
```

# php - IF 语句总是在 PHP 中执行

> ID：12652181
> 
> 赞同：-3
> 
> 时间：2012-09-29T11:08:23.527
> 
> 标签：php, if-statement

> **可能重复：**
> [为什么 PHP 认为 0 等于字符串？](https://stackoverflow.com/questions/6843030/why-does-php-consider-0-to-be-equal-to-a-string)
> [php字符串与0整数的比较返回true？](https://stackoverflow.com/questions/8671942/php-string-comparasion-to-0-integer-returns-true)

似乎在 PHP 中有一个 if 语句，其中函数 some_function() 返回零

```
<?php
if( some_function() == "whatever_you_want" ) { ... } 
```

该语句将始终执行，因为

```
<?php
echo some_function() == "whatever_you_want"; 
```

则为 TRUE。

为什么 PHP 以如此反直觉的方式表现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T11:13:39.080

这是[比较数字值和字符串值时 PHP 定义的行为](http://php.net/manual/en/language.operators.comparison.php)：

> 如果将数字与字符串进行比较或比较涉及数字字符串，则每个字符串都[将转换为数字](http://php.net/manual/en/language.types.string.php#language.types.string.conversion)并以数字方式执行比较。这些规则也适用于 switch 语句。比较时不会发生类型转换，`===`因为`!==`这涉及比较类型和值。

使用`===`or进行严格的值比较，`!==`您将获得预期的结果。

# java - 使用 HttpServletRequest 捕获重复的请求标头

> ID：12652182
> 
> 赞同：2
> 
> 时间：2012-09-29T11:08:24.920
> 
> 标签：java, servlets, tomcat6

我遇到了`HttpServlet`请求问题。我有一个用于检索请求标头的应用程序。如果应用程序发现重复的标头名称，它应该抛出一个错误。然而，经过一番谷歌搜索，我发现它`HttpServletRequest`忽略了重复的标题名称，并继续获取它遇到的第一个标题名称。我能做些什么来捕捉那些重复的请求标头吗？

我使用 Tomcat 6 作为应用程序容器。

这是代码：

```
int headerChecker=0;
for(Enumeration<String>names = request.getHeaderNames(); names.hasMoreElements(); ) {
    String name = (String)names.nextElement();
    if(name.equalsIgnoreCase("abcd")){
        headerChecker++; // add 1 to headerChecker if abcd header is encountered
    }
    for(Enumeration<String>values = request.getHeaders(name); values.hasMoreElements(); ) {
        String value=(String)values.nextElement();
        System.out.println("name: "+name+"\tvalue: "+value);
        }
    }

    if(headerChecker! = 1){
        logger.error("abcd is duplicated, returning HTTP 404");
    } else {
        //...proceed with application
    }
} 
```

这是日志：

> ```
> name:  host   value: localhost:8080  name: user-agent value:
> CocoaRestClient/8 CFNetwork/520.4.3 Darwin/11.4.2 (x86_64)
> (MacBookPro9%2C2)  name: content-length value: 23  name: accept   value:
> 
> **name: abcd  value: 1234556**  name: accept-language value: en-us  name: accept-encoding value: gzip, deflate  name: content-type    value:
> application/x-www-form-urlencoded  name: connection value: keep-alive 
> ```

这是测试截图：

![在此处输入图像描述](../Images/1bd406eab348507b89009205380975b7.png)

编辑：这是servlet

```
public class HeaderServlet extends HttpServlet
{
public void doPost(HttpServletRequest req, HttpServletResponse res)
{
    doGet(req, res);
}

public void doGet(HttpServletRequest req, HttpServletResponse res)
{
int xmsisdnChecker = 0;
String value = "";  
for(Enumeration<String> names = req.getHeaderNames();names.hasMoreElements();){
    String name = (String) names.nextElement(); 
    Enumeration<String> values = req.getHeaders(name);
    if(values != null)
    {
        while(values.hasMoreElements()) {
            if(name.equalsIgnoreCase("abcd"))
            {
                xmsisdnChecker++;
                System.out.println("ee: " + xmsisdnChecker) ;
            }

            value = (String) values.nextElement();

            System.out.println("header name: " + name + "\theader value: " + value);
        }

    }   
  }
}   
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T11:13:25.770

不，`HttpServletRequest`不会*忽略*重复的标题 - 它会收集它们。

从[`HttpServletRequest.getHeaders(String)`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getHeaders%28java.lang.String%29)

> 将指定请求标头的所有值作为字符串对象的枚举返回。
> 
> 客户端可以将某些标头（例如 Accept-Language）作为多个标头发送，每个标头具有不同的值，而不是将标头作为逗号分隔列表发送。

所以听起来你只需要调用[`getHeaderNames()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getHeaderNames())来检索所有存在的标题，然后`getHeaders(String)`用每个名称调用，看看返回的枚举是否有多个条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T12:51:25.187

你的增量是在错误的地方。`HttpServletRequest`将所有值收集在一起并将它们呈现为单个标头的多个值。`headerChecker`您应该在循环值的内部循环内进行测试和递增。外循环只会遇到 'abcd' 一次。

# asp.net - 统计 SSRS / SQL Query 中的第一行数据

> ID：12652186
> 
> 赞同：0
> 
> 时间：2012-09-29T11:08:42.110
> 
> 标签：asp.net, tsql, reporting-services

在我的 SSRS 报告中，有一个显示以下数据的矩阵......矩阵中的每一个数据都是动态的。

```
Departure    Arravial     Bus name        Tour
01:51        02:01        07 ABY 04
02:02        02:12        07 AB 978
02:21        02:31        07 ABY 04
02:32        02:42        07 AB 978
03:01        03:11        07 ABY 04
03:02        03:12        07 AB 978
03:31        03:41        07 ABY 04
03:42        03:52        07 AB 978
04:01        04:11        07 ABY 04 
```

我想要做的是计算第一行总线名称并将其放在它旁边。这可以通过表达式实现吗？或者我怎样才能在 SQL 中提出这样的查询？我该如何解决这个难题？

```
Departure    Arravial     Bus name        Tour
01:51        02:01        07 ABY 04       1
02:02        02:12        07 AB 978       
02:21        02:31        07 ABY 04       2
02:32        02:42        07 AB 978       
03:01        03:11        07 ABY 04       3
03:02        03:12        07 AB 978       
03:31        03:41        07 ABY 04       4
03:42        03:52        07 AB 978       
04:01        04:11        07 ABY 04       5 
```

顺便说一句，这是我的查询，

```
SELECT HCPD.DepartureTime, HCPD.ArrivalTime, V.BusName
FROM HAT_CALISMA_PLANI HCP WITH(NOLOCK)
INNER JOIN HAT_CALISMA_PLANI_DETAY HCPD WITH(NOLOCK) ON HCPD.HatCalismaPlaniKey = HCP.HatCalismaPlaniKey
INNER JOIN VALIDATOR V WITH(NOLOCK) ON V.ValidatorKey = HCPD.ValidatorKey
WHERE HCPD.DepartureTime = @Time AND HCP.HatKey = @HatKey
ORDER BY HCPD.DepartureTime 
```

编辑：总线名称是动态的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T13:55:24.163

您可以通过将 a`row_number()`应用于您的查询来做到这一点：

```
select DepartureTime, ArrivalTime, BusName,
  case when BusName ='07 ABY 04' 
        then cast(rn as varchar(10))
        else '' end Tour
from
(
  SELECT HCPD.DepartureTime, HCPD.ArrivalTime, V.BusName,
    row_number() over(partition by busname order by departure) rn
  FROM HAT_CALISMA_PLANI HCP WITH(NOLOCK)
  INNER JOIN HAT_CALISMA_PLANI_DETAY HCPD WITH(NOLOCK) 
    ON HCPD.HatCalismaPlaniKey = HCP.HatCalismaPlaniKey
  INNER JOIN VALIDATOR V WITH(NOLOCK) 
    ON V.ValidatorKey = HCPD.ValidatorKey
  WHERE HCPD.DepartureTime = @Time 
    AND HCP.HatKey = @HatKey
) x
order by DepartureTime; 
```

这是一个示例查询：

```
select departure, arrival, busname,
  case when busname ='07 ABY 04' 
        then cast(rn as varchar(10))
        else '' end Tour
from
(
  select departure, arrival, busname,
    row_number() over(partition by busname order by departure) rn
  from yourtable
) x
order by departure; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/326d0/7)

# iphone - 如何在 Iphone 中设置操作优先级？

> ID：12652188
> 
> 赞同：0
> 
> 时间：2012-09-29T11:08:44.473
> 
> 标签：iphone, action

例如，我有一个按钮，当点击这个按钮时，它会调用一个动作：doAction1。还有一个视图：当触摸它时，它调用一个动作doAction2。

点击这个按钮的话，我也触摸了视图。是否有任何属性可以设置调用 doAction1 或 doAction2 的优先级？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T14:38:54.570

我假设您将 Tapgesturerecognier 放入容器视图。如果用户点击了按钮，您可以忽略点击手势。只需覆盖愚弄方法

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {
// test if touched view is unbutton

    if ([touch.view isKindOfClass:[UIButton class]]) 
    {

        return NO; // ignore the touch
    }

return YES; 
```

}

# c - 在 C 中拆分字符串并将其保存在字符串数组中，但结果为垃圾

> ID：12652195
> 
> 赞同：1
> 
> 时间：2012-09-29T11:10:21.337
> 
> 标签：c, c-strings

一直在这里搜索，但如果这篇文章是重复的，请原谅我......我只是想澄清一些我不确定的事情......

首先，让我介绍一下我的想法：

*   将要求用户输入命令（类似于命令行/shell 命令）。
*   该命令将作为由空格分隔的字符串接收/输入。
*   接下来字符串将被标记化（拆分），单词的数量将被计算在内。
*   有了这个数量的单词，我将不得不创建一个动态的多维字符串数组，其中字符串的大小/数量是我们计算的单词数。

**例子：**

> 我叫 1234123 123123

该命令中的单词/字符串数为 4，因此字符串指针的数量将被动态分配。

我希望将此字符串存储在动态多维数组中，其中：

```
char ** arguments;
int count; 
```

我想访问*参数*数组中的值：

```
for(i = 0; i < count; i++)
    printf("%s", arguments[i]); 
```

**我的问题是**

当我尝试在我的主函数中访问这些变量时，*arguments*变量中的值是垃圾，并且*count*变量继续递增，因为我知道我已将*count*变量初始化回 0。

如果我做了一些模糊或错误的事情，你可以检查我的代码。谢谢！

* * *

以下是我能够创建的我认为有用的代码：

```
/* This function counts the number of words inside the command input. */
int word_count(char * str)
{
    int i, ctr;

    for(ctr = i = 0; str[i] != '\0'; i++)
    {
        while(isspace(str[i]))
            i++;

        if(str[i] != '\0')
        {
            ctr++;

            while(str[i] != '\0' && ! isspace(str[i]))
                i++;
        }
    }

    return ctr;
} 
```

* * *

```
/* This function splits the strings inside the command. */
void split_command(int count, char *** argv, char * command)
{
    char buffer[31];
    int i, j, k;

    *argv = (char **) malloc(sizeof(char *) * count);

    for(i = k = 0; command[i] != '\0'; i++)
    {
        while(isspace(command[i]))
            i++;

        if(command[i] != '\0')
        {
            for(j = 0 ;j < 30 && command[i] != '\0' && ! isspace(command[i]); j++, i++)
                buffer[j] = (j != 0) ? command[i] : toupper(command[i]);

            buffer[j] = '\0';

            if(strlen(buffer) > 0)
            {
                (*argv)[k] = (char *) malloc(sizeof(char) * (strlen(buffer) + 1));
                strcpy((*argv)[k], buffer);
                k++;
            }
        }
    }
} 
```

* * *

```
/* This function will re-initialize the provided arguments and counters. */
void prepare_command(int * count, char *** argv)
{
    int i;

    for(i = 0; i < *count; i++)
    {
        (*argv)[i] = NULL;
        free((*argv)[i]);
    }

    *count = 0;
    free(*argv);
    *argv = NULL;
} 
```

* * *

**主要的**

```
void main(void)
{
    char ** arguments, * command;
    int count, i;
    boolean end = False; // Assume I created an enum for boolean {False, True}

    /* Some initialization here. */
    count = 0;
    arguments = NULL;

    do
    {
        gets(command);
        count = word_count(command); /* This will return the number of strings inside the command */
        split_command(count, &arguments, command); /* This will allocate an array. */

        /* When I try to display something from here, some values are garbage and some are from the previous allocation...  */
        for(i = 0; i < count; i++)
            printf("%s\n", arguments[i]);

        prepare_command(&count, &arguments);
    }while(!end);

} 
```

* * *

PS：我知道 strtok，我只是不想使用它，而且我的任何库中都没有 strtok_r。所以我创建了自己的函数来处理类似的事情。

这可能是一个很长的帖子，但我希望你们能帮助我……谢谢！如有必要，将不得不编辑这篇文章。谢谢你，希望你能给我一些启发。:3 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:20:56.973

这是我正在使用的代码片段：

```
int parse_args(char** argv, char* data) {
    char c;
    int argc = 0;

    if (argv)
        *argv = data;

    int quoteopen = 0;
    int waitingnextarg = 1;
    for (;(c = *data); data++) {
        switch(c) {
            case '\n':
            case '\t':
            case ' ':
                if (!quoteopen) {
                    if (argv)
                        *data = 0;
                    waitingnextarg = 1;
                }
            break;
            case '"':
                if (argv)
                    *data = 0;
                if (quoteopen) {
                    waitingnextarg = 1;
                }
                quoteopen ^= 1;
            break;
            default:
                if (waitingnextarg) {
                    waitingnextarg = 0;
                    if (argv)
                        argv[argc] = data;
                    argc++;
                }
            break;
        }
    }

    return argc;
} 
```

打电话给

```
int argc = parse_args(0, input);
char* argv[argc+1];
parse_args(argv, input); 
```

小心：更改输入字符串。这不处理任何内存分配，而仅使用预分配的内存。如果使用 argv == NULL 调用，它只计算并返回 argc，如果使用有效指针 argv 调用，它将更改输入字符串并填充 argv。如果您需要保留输入字符串调用的副本

```
int argc = parse_args(0, input);
char input_copy[strlen(input) +1];
memcpy(input_copy, input, strlen(input) +1);
char* argv[argc+1];
parse_args(argv, input_copy); 
```

# ios - 以编程方式更改标题在 IB 中设置为属性的 UIButton 的标题

> ID：12652198
> 
> 赞同：20
> 
> 时间：2012-09-29T11:10:25.053
> 
> 标签：ios, uibutton, interface-builder

我`UIButton`在使用之前更改了 s 的标题：

```
- (void)setTitle:(NSString *)title forState:(UIControlState)state 
```

但是[我遇到了一种情况](/questions/9035246/center-multi-line-text-on-uibutton-using-ib/12619237#12619237)，`UIButton`我正在使用的标题是多行标题，并且只有在 IB 中从“普通”更改为“归属”时才会正确居中文本。以这种方式更改标题时，通常的`setTitle: forState:`方法不再更新按钮。

您如何更改 a 的**属性**标题`UIButton`？

为了澄清，所以你不要认为我只是犯了一个愚蠢的错误，我使用调试器来查看属性`UIButton`并记录输出

```
- (NSString *)titleForState:(UIControlState)state 
```

使用后

```
- (void)setTitle:(NSString *)title forState:(UIControlState)state 
```

设置它返回刚刚设置的值。问题是只要标题在 IB中设置为**属性，它就不会改变按钮的外观。**我的代码只需将其更改为**plain**即可正常工作。但这不是上面链接中描述的解决方案。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-10-02T01:04:57.273

属性标题通过以下方式获得

```
- (NSAttributedString *)attributedTitleForState:(UIControlState)state 
```

并通过设置

```
- (void)setAttributedTitle:(NSAttributedString *)title forState:(UIControlState)state 
```

格式化`NSAttributedString`对象有点复杂，但将其设置为`nil`将清除标题，这就是我所需要的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-29T11:55:42.477

您是否在视图控制器类中将按钮指定为 IBOutlet，并且它是否作为 Interface Builder 中的插座正确连接（从新的引用插座 ctrl 拖动到文件所有者并选择您的 UIButton 对象）？这通常是我看到这些症状时遇到的问题。首先指定 - `@property(non atomic,strong)IBOutlet UIButton *mybutton;`

然后

`[myButton setTitle: @"myTitle" forState: UIControlStateNormal];`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-29T11:16:11.027

这是一个

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button addTarget:self 
       action:@selector(aMethod:)
forControlEvents:UIControlEventTouchDown];
[button setTitle:@"Title" forState:UIControlStateNormal];
button.frame = CGRectMake(80.0, 210.0, 160.0, 40.0);
 [view addSubview:button]; 
```

无需更改`- (void)setTitle:(NSString *)title`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-17T22:31:43.523

Swift - 对于按钮标题中的红色删除线字体：

```
let attributedStringForInvalid = NSAttributedString(string: "I'm Invalid!", attributes: [
  NSStrikethroughStyleAttributeName: true,
  NSForegroundColorAttributeName: UIColor.redColor()
  ])
myButton.setAttributedTitle(attributedStringForInvalid, forState: UIControlState.Normal) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-07T13:14:59.320

我必须使用以下 4 行来显示属性字体。在 IB 中，标题设置为普通且不归属。

```
// Get the library font
UIFont *termsFont = [MTHGAppearanceController defaultFontOfSize:[MTHGAppearanceController defaultButtonFontSizeForDevice]];
// Set the font attributes required, using our librarby function for setting the colour
NSDictionary *fontAttributes = @{NSUnderlineStyleAttributeName: @(NSUnderlineStyleSingle),NSBackgroundColorAttributeName: [UIColor clearColor], NSFontAttributeName: termsFont, NSForegroundColorAttributeName:[UIColor mthg_color255WithRed:128.0f green:128.0f blue:128.0f alpha:1.0f]};
// Configure the text we want displayed using the font set above
NSAttributedString *termsString = [[NSAttributedString alloc]initWithString:@"Terms" attributes:fontAttributes];
// Now finally display the text in the required font
[self.termsButtonOutlet setAttributedTitle:termsString forState:UIControlStateNormal]; 
```

# java - 关于 EMR 错误的 Mahout：Java 堆空间

> ID：12652210
> 
> 赞同：2
> 
> 时间：2012-09-29T11:13:45.070
> 
> 标签：java, hadoop, amazon-web-services, mahout, emr

我在 EMR 上运行了一个集群作业。数据集很大。一切正常，直到：

```
2012-09-29 10:50:58,063 INFO org.apache.hadoop.mapred.JobClient (main):  map 100% reduce 23%
2012-09-29 10:51:31,157 INFO org.apache.hadoop.mapred.JobClient (main):  map 100% reduce 24%
2012-09-29 10:51:50,197 INFO org.apache.hadoop.mapred.JobClient (main):  map 100% reduce 25%
2012-09-29 10:52:17,236 INFO org.apache.hadoop.mapred.JobClient (main):  map 100% reduce 26%
2012-09-29 10:52:41,270 INFO org.apache.hadoop.mapred.JobClient (main):  map 100% reduce 27%
2012-09-29 10:53:08,350 INFO org.apache.hadoop.mapred.JobClient (main):  map 100% reduce 28%
2012-09-29 10:53:29,377 INFO org.apache.hadoop.mapred.JobClient (main):  map 100% reduce 29%
2012-09-29 10:53:54,411 INFO org.apache.hadoop.mapred.JobClient (main):  map 100% reduce 30%
2012-09-29 10:54:21,448 INFO org.apache.hadoop.mapred.JobClient (main):  map 100% reduce 31%
2012-09-29 10:54:48,486 INFO org.apache.hadoop.mapred.JobClient (main):  map 100% reduce 32%
Error: Java heap space
attempt_201209271139_0004_r_000000_0: SLF4J: Class path contains multiple SLF4J bindings.
attempt_201209271139_0004_r_000000_0: SLF4J: Found binding in [jar:file:/home/hadoop/lib/slf4j-log4j12-1.6.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]
attempt_201209271139_0004_r_000000_0: SLF4J: Found binding in [jar:file:/mnt/var/lib/hadoop/mapred/taskTracker/hadoop/jobcache/job_201209271139_0004/jars/job.jar!/org/slf4j/impl/StaticLoggerBinder.class]
attempt_201209271139_0004_r_000000_0: SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation. 
```

所以。基本问题是如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:18:12.043

我创建了 m1.large 实例而不是 m1.small 并运行了 s3://elasticmapreduce/bootstrap-actions/configurations/latest/memory-intensive 引导操作。它有帮助。

所以。我在我的工作流创建 cmd 行中添加了 2 行：

```
> --master-instance-type m1.large --slave-instance-type m1.large \
> --bootstrap-action s3://elasticmapreduce/bootstrap-actions/configurations/latest/memory-intensive 
```

那是。

# android - 层次结构查看器在模拟器中提供比我的真实设备更好的数字（xperia arc）

> ID：12652217
> 
> 赞同：1
> 
> 时间：2012-09-29T11:15:16.420
> 
> 标签：android, android-layout, android-emulator, android-widget

我的新闻应用程序有这个布局

```
<ScrollView >
 <RealativeLayout>
  <TextView/>
 <HorizontalListView> //a custom View that uses baseadapter and view recycling
  <ReativeLayout/>
   <ImageView/>
   <TextView/>
  <ReativeLayout/>
  <ReativeLayout/>
   <ImageView/>
   <TextView/>
  <ReativeLayout/>
   <ReativeLayout/>
   <ImageView/>
   <TextView/>
  <ReativeLayout/>
 <HorizontalListView/>
      .
      .
      five horizontal srollViews 
```

问题是在我的 xperia arc（我的调试设备）上，滚动视图非常滞后，并且层次结构查看器在所有视图上显示大量绘制时间，而当我在 Galaxy s3 规格模拟器上调试时，模拟器上的应用程序是更加流畅和层次分明的查看器提供了更好的绘图布局和测量数字。模拟器在模拟器上获得更快的数字是否正常？oris 与手机有关的东西，或者是代码：

注意：我的 xperia arc 有 CM9 布局中的所有图像都在单独的线程中下载并放入 Lrucache。

每次调用 onlayout 时，Horizo​​ntalscreenView onlayout() 方法都会创建一个新的可运行对象（这样我可以在滚动时请求布局以回收视图）

# android - 如何在 osm 地图上执行自定义 zoomIn()

> ID：12652220
> 
> 赞同：1
> 
> 时间：2012-09-29T11:15:30.023
> 
> 标签：android, openstreetmap

我有一张 osm 地图，上面有 zoomControls。我想在上面添加 zoomIn 和 zoomOut 功能。

我怎样才能做到这一点...？

我正在尝试这个..

```
myMapZoom.setOnZoomInClickListener(new OnClickListener() {

            public void onClick(View v) {
mapViewO.getController().setZoom(mapViewO.getZoomLevel()+1);
mapViewO.setMultiTouchControls(true);
mapViewO.getController().zoomIn();

}
}); 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:21:14.887

好的，请添加以下代码：

mapView.setBuiltInZoomControls(true);//显示缩放按钮

# iphone - 在iphone中解析XML时如何添加多个相同的XML标签？

> ID：12652233
> 
> 赞同：0
> 
> 时间：2012-09-29T11:17:25.930
> 
> 标签：iphone, xcode, xml-parsing, nsxmlparser

我正在解析一个 XML 文件，我的 XML 看起来像：

```
<List>
<CompanyallProvidersList>
    <CityDetails>
           <City>NewYork</City>
            <Id>1</Id>
    </CityDetails>
    <StateDetails>
            <State>Alabaster</State>
      </StateDetails>
    <CityDetails>
             <City>Newyork</City>
              <Id>1</Id>
    </CityDetails>
 <StateDetails>
               <State>California</State>
       </StateDetails>
 </CompanyallProvidersList>
</List> 
```

我的解析器代码是这样的：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {

if([elementName isEqualToString:@"CompanyallProvidersList"])
{
arr=[[NSMutableArray alloc] init];
drr=[[NSMutableDictionary alloc] init];
}
srr=[[NSMutableString alloc] init];
} 

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
[srr appendString:string];
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString    *)namespaceURI qualifiedName:(NSString *)qName {

if([elementName isEqualToString:@"City"])
{

[drr setObject:srr forKey:@"City"];
[srr release],srr=nil;
return;
} 

if([elementName isEqualToString:@"Id"])
{

[drr setObject:srr forKey:@"Id"];
[srr release],srr=nil;
return; 
}

if([elementName isEqualToString:@"State"])
{

[drr setObject:srr forKey:@"State"];
[srr release],srr=nil;
return;
}

if([elementName isEqualToString:@"CompanyallProvidersList"])
{
[arr addObject:drr];
[drr release],drr=nil;
}
[srr release],srr=nil;

} 
```

我的输出是这样的：

```
NewYork
1
California 
```

但我希望输出为：

```
 NewYork
 1
 Alabaster

NewYork
1
California 
```

`我无法得到它..我哪里错了？

任何帮助，将不胜感激......

谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T11:29:15.383

在您的代码问题中，您正在为相同的键添加两个值。所以第二个值替换了第一个值。您需要将以下代码添加到您的`- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName`委托

```
if([elementName isEqualToString:@"StateDetails"])
{
  [arr addObject:drr];
} 
```

并改变：

```
if([elementName isEqualToString:@"CompanyallProvidersList"])
{
[drr release];
} 
```

还将以下代码添加到您的`- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict`

```
if([elementName isEqualToString:@"CityDetails"])
{
   drr=[[NSMutableDictionary alloc] init];
} 
```

它会工作的！

现在代码将如下所示：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{    
  if([elementName isEqualToString:@"CompanyallProvidersList"])
  {
     arr=[[NSMutableArray alloc] init];
     drr=[[NSMutableDictionary alloc] init];
  }
  if([elementName isEqualToString:@"CityDetails"])
  {
     drr=[[NSMutableDictionary alloc] init];
  }
  srr=[[NSMutableString alloc] init];
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString    *)namespaceURI qualifiedName:(NSString *)qName
{
  if([elementName isEqualToString:@"City"])
  {
    [drr setObject:srr forKey:@"City"];
    [srr release],srr=nil;
    return;
  } 

  if([elementName isEqualToString:@"Id"])
  {

    [drr setObject:srr forKey:@"Id"];
    [srr release],srr=nil;
    return; 
  }

  if([elementName isEqualToString:@"State"])
  {
    [drr setObject:srr forKey:@"State"];
    [srr release],srr=nil;
    return;
  }

   if([elementName isEqualToString:@"StateDetails"])
   {
     [arr addObject:drr];
   }

  if([elementName isEqualToString:@"CompanyallProvidersList"])
  {
     [drr release],drr=nil;
  }
  [srr release],srr=nil;
} 
```

# mysql - Sql 查询删除特殊字符

> ID：12652234
> 
> 赞同：3
> 
> 时间：2012-09-29T11:17:37.083
> 
> 标签：mysql

我`varchar`在 mysql 表中有一个带有特殊字符的字段。我想使用 MYSQL QUERY 删除该字符串中的所有特殊字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T11:36:17.877

MySQL 不支持这样的查询。您在 MySQL 查询中的最佳选择是以下很多：

```
update TABLENAME
set FIELDNAME = replace(FIELDNAME,'_','') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-30T15:36:40.257

您可以使用以下功能

```
DROP FUNCTION IF EXISTS `stripSpeciaChars`;
DELIMITER ;;
CREATE FUNCTION `stripSpeciaChars`(`dirty_string` varchar(2048),allow_space TINYINT,allow_number TINYINT,allow_alphabets TINYINT,no_trim TINYINT) RETURNS varchar(2048) CHARSET utf8
BEGIN
/**
 * MySQL function to remove Special characters, Non-ASCII,hidden characters leads to spaces, accents etc
 * Downloaded from http://DevZone.co.in
 * @param VARCHAR dirty_string : dirty string as input
 * @param VARCHAR allow_space : allow spaces between string in output; takes 0-1 as parameter
 * @param VARCHAR allow_number : allow numbers in output; takes 0-1 as parameter
 * @param VARCHAR allow_alphabets : allow alphabets in output; takes 0-1 as parameter
 * @param VARCHAR no_trim : don't trim the output; takes 0-1 as parameter
 * @return VARCHAR clean_string : clean string as output
 * 
 * Usage Syntax: stripSpeciaChars(string,allow_space,allow_number,allow_alphabets,no_trim);
 * Usage SQL> SELECT stripSpeciaChars("sdfa7987*&^&*ÂÃ ÄÅÆÇÈÉÊ sd sdfgËÌÍÎÏÑ ÒÓÔÕÖØÙÚàáâã sdkarkhru",0,0,1,0);
 * result : sdfasdsdfgsdkarkhru
 */
      DECLARE clean_string VARCHAR(2048) DEFAULT '';
      DECLARE c VARCHAR(2048) DEFAULT '';
      DECLARE counter INT DEFAULT 1;

      DECLARE has_space TINYINT DEFAULT 0; -- let spaces in result string
      DECLARE chk_cse TINYINT DEFAULT 0; 
      DECLARE adv_trim TINYINT DEFAULT 1; -- trim extra spaces along with hidden characters, new line characters etc.     

         if allow_number=0 and allow_alphabets=0 then
        RETURN NULL;
      elseif allow_number=1 and allow_alphabets=0 then
      set chk_cse =1;
     elseif allow_number=0 and allow_alphabets=1 then
      set chk_cse =2;
      end if;     

      if allow_space=1 then
      set has_space =1;
      end if;

       if no_trim=1 then
      set adv_trim =0;
      end if;

      IF ISNULL(dirty_string) THEN
            RETURN NULL;
      ELSE

      CASE chk_cse
      WHEN 1 THEN 
      -- return only Numbers in result
      WHILE counter <= LENGTH(dirty_string) DO

                  SET c = MID(dirty_string, counter, 1);

                  IF ASCII(c) = 32 OR ASCII(c) >= 48 AND ASCII(c) <= 57  THEN
                        SET clean_string = CONCAT(clean_string, c);
                  END IF;

                  SET counter = counter + 1;
            END WHILE;
      WHEN 2 THEN 
      -- return only Alphabets in result
      WHILE counter <= LENGTH(dirty_string) DO

                  SET c = MID(dirty_string, counter, 1);

                  IF ASCII(c) = 32 OR ASCII(c) >= 65 AND ASCII(c) <= 90  OR ASCII(c) >= 97 AND ASCII(c) <= 122 THEN
                        SET clean_string = CONCAT(clean_string, c);
                  END IF;

                  SET counter = counter + 1;
            END WHILE;
      ELSE
       -- return numbers and Alphabets in result
        WHILE counter <= LENGTH(dirty_string) DO

                  SET c = MID(dirty_string, counter, 1);

                  IF ASCII(c) = 32 OR ASCII(c) >= 48 AND ASCII(c) <= 57 OR ASCII(c) >= 65 AND ASCII(c) <= 90  OR ASCII(c) >= 97 AND ASCII(c) <= 122 THEN
                        SET clean_string = CONCAT(clean_string, c);
                  END IF;

                  SET counter = counter + 1;
            END WHILE;      
    END CASE;            
      END IF;

      -- remove spaces from result
      if has_space=0 then
      SET clean_string =REPLACE(clean_string,' ','');
      end if;

       -- remove extra spaces, newline,tabs. from result
     if adv_trim=1 then
      SET clean_string =TRIM(Replace(Replace(Replace(clean_string,'\t',''),'\n',''),'\r',''));
      end if;    

      RETURN clean_string;
END
;;
DELIMITER ;
SELECT stripSpeciaChars("foo79ÒÓÔÕÖØÙÚàáâã 87*&bÄÅÆÇÈÉÊar",1,0,1,1); -- result foo bar 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T11:31:19.907

采用

```
update table_name set field_name = REPLACE(field_name,'/','') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-11T08:43:15.783

替换下面的字符

```
~ ! @ # $ % ^ & * ( ) _ +
` - = 
{ } |
[ ] \
: " 
; '

< > ?
, . 
```

用这个 SQL

```
SELECT note as note_original, 

    REPLACE(
        REPLACE(
            REPLACE(
                REPLACE(
                    REPLACE(
                        REPLACE(
                            REPLACE(
                                REPLACE(
                                    REPLACE(
                                        REPLACE(
                                            REPLACE(
                                                REPLACE(
                                                    REPLACE(
                                                        REPLACE(
                                                            REPLACE(
                                                                REPLACE(
                                                                    REPLACE(
                                                                        REPLACE(
                                                                            REPLACE(
                                                                                REPLACE(
                                                                                    REPLACE(
                                                                                        REPLACE(
                                                                                            REPLACE(
                                                                                                REPLACE(
                                                                                                    REPLACE(
                                                                                                        REPLACE(
                                                                                                            REPLACE(
                                                                                                                REPLACE(
                                                                                                                    REPLACE(
                                                                                                                        REPLACE(
                                                                                                                            REPLACE(
                                                                                                                                REPLACE(
                                                                                                                                    REPLACE(note, '"', ''),
                                                                                                                                '.', ''),
                                                                                                                            '?', ''),
                                                                                                                        '`', ''),
                                                                                                                    '<', ''),
                                                                                                                '=', ''),
                                                                                                            '{', ''),
                                                                                                        '}', ''),
                                                                                                    '[', ''),
                                                                                                ']', ''),
                                                                                            '|', ''),
                                                                                        '\'', ''),
                                                                                    ':', ''),
                                                                                ';', ''),
                                                                            '~', ''),
                                                                        '!', ''),
                                                                    '@', ''),
                                                                '#', ''),
                                                            '$', ''),
                                                        '%', ''),
                                                    '^', ''),
                                                '&', ''),
                                            '*', ''),
                                        '_', ''),
                                    '+', ''),
                                ',', ''),
                            '/', ''),
                        '(', ''),
                    ')', ''),
                '-', ''),
            '>', ''),
        ' ', '-'),
    '--', '-') as note_changed FROM invheader 
```

# php - 如何从另一个页面检索页面上的方法中使用的所有参数？

> ID：12652236
> 
> 赞同：0
> 
> 时间：2012-09-29T11:17:56.820
> 
> 标签：php, parsing, translate

我不确定我的代码结构是否错误，或者这是一个通常不会发现的问题，但我什至不知道如何开始为我的问题寻找解决方案。我有自己的简单翻译脚本，其名称如下：

```
<?php echo $Translate->text("Name"); ?> 
```

它将返回（并回显）带有关键字“名称”的字符串。问题是，出于多种原因（名称：错误翻译、报告、开发、原位翻译），我可能想要检索页面上所有字符串的关键字。一个简单的页面（example.com/campus/index.php）如下所示：

```
<h1> <?php echo $Translate->text(Campus); ?> </h1>

<p style="text-align:justify;">
  <?php echo $Translate->text(126); ?>
</p>

<p style="text-align:justify;">
  <?php echo $Translate->text(129); ?>
</p>

<a href="<?php $Link->create("campus/about"); ?>">
  <h2 class="bodymenu"><?php echo $Translate->text(About); ?> </h2>
</a>
<p style="text-align:justify;">
  <?php echo $Translate->text(146); ?>
</p>

<a href="<?php $Link->create("campus/learning_center"); ?>">
  <h2 class="bodymenu"><?php echo $Translate->text(Learning_center); ?> </h2>
</a>
<p style="text-align:justify;">
  <?php echo $Translate->text(147); ?>
</p>

<a href="<?php $Link->create("campus/residence"); ?>">
  <h2 class="bodymenu"><?php echo $Translate->text(Residence); ?> </h2>
</a>
<p style="text-align:justify;">
  <?php echo $Translate->text(128); ?>
</p> 
```

而且我想在某些情况下获得：**从另一个页面**`$Translations=array("Campus","126","129","About","146","Learning_center","147","Residence","128");`进行进一步处理（编辑）。

 **在某些情况下，页面中混合了更多的 php 逻辑，在其他一些情况下，就像这样。在每个页面之前和之后自动包含更多的逻辑代码和类。所以，基本上，我想知道（对于这个例子，但能够扩展它）我怎样才能检索所有的关键字。

我基本上在考虑两种方法，但我认为这两种方法都不是最佳的。首先是使用正则表达式解析 php 代码。因为我知道我正在寻找的位，我认为这是可能的。第二个是，根据 SESSION 变量，我渲染 html 并解析它，所以它`echo $Translate->text(Campus);`会返回类似的东西`<span id="Translation">Campus</span>`，然后只解析 html 并检索所有 id。在我开始之前，你能想出其他方法来检索 ID 吗？

PS，我**不想**在页面的开头或结尾对数组中的所有 id 进行硬编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T11:29:14.363

如果我理解正确，

稍微修改一下 Translate 类：添加一个变量，该变量将收集您正在使用的所有字符串，例如：

```
public $aStrings = array(); 
```

然后，在您的函数 text($arg) 中添加如下内容：

```
$this->aStrings[] = $arg; 
```

那么您将在 Translate->aStrings 变量中拥有页面上的所有字符串，然后使用类似以下内容进行打印：

```
print_r($Translate->aStrings); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T11:30:40.937

`Translate`使用一个在数组中收集值的类子类化该类，然后在您的页面中使用它：

```
class MyTranslate extends Translate {
  public $texts = array();
  public function text($which) {
    $this->texts[] = $which;
    return parent::text($which);
  }
}

$Translate=new MyTranslate($User->Language);

ob_start();
require('/path/to/other/page');
ob_end_clean();

var_dump($Translate->texts); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T11:43:49.650

不要通过实施翻译系统来重新发明轮子。[gettext 扩展](http://php.net/manual/en/book.gettext.php)用于无痛、即时的语言切换。

基本上，您使用默认语言编写您的网站：

```
<?php echo _("Name"); ?> 
```

不要写`<?php echo $Translate->text(147); ?>`，没人知道那是什么。写：

<`?php echo _("Learning Centre"); ?>`

对于管理翻译，可以选择适用于 Windows、Linux 和 Mac 的编辑器，例如[POEdit 。](http://www.poedit.net/)

切换到不同的语言很容易：

```
public function SetDomain( $path )
{
    define( 'DOMAIN', 'messages' );
    bindtextdomain( DOMAIN, $path );
    bind_textdomain_codeset( DOMAIN, "UTF-8" );
    textdomain( DOMAIN );
} 
```

**注意：**如果您将 short_open_tags 设置为 on，您可以编写：

```
<?= _("Name"); ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T17:07:27.713

***在英文文件夹中创建 2 个文件。（您可以稍后指定它，但通常是语言目录中语言文件的位置）***

***campus.about.php***：

```
<?php
$lang["Name"]               = "Name";
$lang["Address"]            = "Address";    
?> 
```

* **Campus.learning_center.php*** :

```
<?php
$lang["Learning"]               = "Learning";
$lang["Residence"]          = "Residence";  
?> 
```

**你的类翻译文件（根目录）**：

```
 class Translate {

    public $_text= array(); // Change it into private properties coz you create 
// text method for get the value, I set it public just for easy to debug it.
    private $_language;

    function __construct($language){ // Set Language
        $this->_language= $language;
    }

    public function create($page){ // Get Language File
        // $page= campus/about change into this campus.about
        // Get language file Ex: english/campus.about.php
        require($this->_language.'/'.$page.'.php');
        $this->_text= array_merge($this->_text, $lang);
    }

    public function text($text){ // Display Keywords
        echo $this->_text[$text];
    }
}
$Translate= new Translate('english');
$Translate->create('campus.about');
print_r($Translate->_text);
$Translate->create('campus.learning_center');
print_r($Translate->_text); 
```**

# .net - 如何在winforms组合框下拉菜单中设置滚动位置

> ID：12652240
> 
> 赞同：0
> 
> 时间：2012-09-29T11:18:39.290
> 
> 标签：.net, winforms, combobox, autoscroll

我在 UI 中有几个组合框，每个组合框都有一长串相似的条目（数字）。当用户从一个组合框中选择一个项目时，我知道用户会从其他组合框中选择一个具有相似值（但可能不相同）的条目。因此，在用户选择了一个值后，为了帮助避免强迫用户进行大量滚动，我想“自动滚动”下一个组合框下拉菜单到最后一个选定值附近（当这个下拉菜单还没有一个选择）。理想情况下，我希望设置滚动位置，以便最后选择的值出现在下拉列表的中间。

到目前为止，我已尝试通过在下拉事件中设置所选项目来做到这一点，但这有其自身的[问题](https://stackoverflow.com/questions/12640438/detecting-user-selection-in-combobox-dropdownclosed-in-winforms)。有没有办法设置下拉的滚动位置而不必选择一个项目？

到目前为止，我已经尝试过：

```
[DllImport("user32.dll", EntryPoint = "SendMessageW", CharSet = CharSet.Unicode)]
private static extern IntPtr SendMessageCb(IntPtr hWnd, int msg, IntPtr wp, out COMBOBOXINFO lp);

[DllImport("user32.dll")]
private static extern int SendMessage(IntPtr hWnd, int wMsg, IntPtr wParam, IntPtr lParam);

// P/Invoke declarations
private struct COMBOBOXINFO
{
   public Int32 cbSize;
   public RECT rcItem, rcButton;
   public int buttonState;
   public IntPtr hwndCombo, hwndEdit, hwndList;
}

private struct RECT
{
   public int Left, Top, Right, Bottom;
}

private const int LVM_FIRST = 0x1000;
private const int LVM_SCROLL = (LVM_FIRST + 20);

private const int WM_VSCROLL = 0x0115;
private const int SB_BOTTOM = 7;
private const int SB_PAGEDOWN = 3;

private void comboBox_DropDown(object sender, EventArgs e)
{
  COMBOBOXINFO info = new COMBOBOXINFO();
  info.cbSize = Marshal.SizeOf(info);
  SendMessageCb((sender as ComboBox).Handle, 0x164, IntPtr.Zero, out info); // seems to work
  SendMessage(info.hwndList, WM_VSCROLL, (IntPtr)SB_PAGEDOWN, IntPtr.Zero); // does nothing
  SendMessage(info.hwndList, LVM_SCROLL, IntPtr.Zero, (IntPtr) 50); // does nothing         
} 
```

但是，这似乎不起作用。COMBOBOXINFO 结构似乎已正确填充，但 SendMessage WM_VSCROLL 和 LVM_SCROLL 无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:05:45.153

事实证明，使用 WM_VSCROLL、LVM_SCROLL（以及调用 SetScrollInfo()）发送消息确实可以设置 ListView 的滚动位置，该位置显示为 ComboBox 的下拉列表；问题在于 DropDown 事件，该事件在 ListView 实际显示之前引发。我想通了，因为 GetScrollInfo() 在 DropDown 事件中调用时返回最小值，最大值为 0。从触发 DropDown 开始设置一个 1 秒延迟的计时器，并在该延迟返回合理的最小值、最大值后调用 GetScrollInfo()；在该延迟之后设置滚动位置也可以。

我显然不喜欢延迟，但我认为 ListView 显示时没有可用的事件？是否可以创建一些事件？

# mysql - 在 MySQL 的存储过程中编写可选参数？

> ID：12652241
> 
> 赞同：43
> 
> 时间：2012-09-29T11:18:49.123
> 
> 标签：mysql, stored-procedures

我想创建一个存储过程，它根据传递给它的参数更新表中的所有字段或仅更新其中的一些字段。

如何创建接受可选参数的存储过程？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-29T11:22:26.023

`Optional Parameters`MySQL 尚不支持。我建议您`null`在参数中传递值，并且在存储过程内部有一个`IF`语句。

```
DELIMITER $$
CREATE PROCEDURE procName
(IN param VARCHAR(25))
BEGIN
   IF param IS NULL THEN 
      -- statements ;
   ELSE commands
      -- statements ;
   END IF;
END$$
DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-22T14:02:35.990

一种特殊情况是参数不能为 NULL，即因为是键。对于这些情况，我使用了一个技巧：我将参数设置为 -1：

```
CREATE PROCEDURE procCreate
(IN id_cosa INT(11))
  BEGIN
    IF id_cosa != -1 THEN
      ~~(your code here)~~
    END IF
  END 
```

# scala - 如何在ScalaTest中显示“应该产生[异常]”中引发的异常

> ID：12652244
> 
> 赞同：7
> 
> 时间：2012-09-29T11:19:33.930
> 
> 标签：scala

我想显示在 scala 测试中抛出的异常消息。

```
 " iWillThrowCustomException Method Failure test.   
 " should "Fail, Reason: Reason for failing. " in {
 evaluating {
      iWillThrowCustomException();
   } should produce [CustomException]
} 
```

如果 CustomExeption 会为不同的输入抛出不同类型的消息，比如说

**（对于 -ve 金额 - 金额小于零，对于金额中的字符 - 无效金额）**，

如何显示在块中抛出的消息，因为它将通过 CustomException 并且它将显示测试成功，但是对于哪个 senario 它已经抛出了错误

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-29T11:32:45.503

或者，您可以查看`intercept`：

```
val ex = intercept[CustomException] {
    iWillThrowCustomException()
}
ex.getMessage should equal ("My custom message") 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-29T11:29:43.490

`evaluating`还会返回一个异常，以便您可以检查它或打印消息。这是[ScalaDoc](http://doc.scalatest.org/1.8/index.html#org.scalatest.matchers.ShouldMatchers)的示例：

```
val thrown = evaluating { s.charAt(-1) } should produce [IndexOutOfBoundsException]
thrown.getMessage should equal ("String index out of range: -1") 
```

据我所知，您不能在测试名称中包含异常消息。

* * *

您可以做的是添加有关测试的其他信息`info()`：

```
"iWillThrowCustomException Method Failure test." in {
    val exception = evaluating { iWillThrowCustomException() } should produce [CustomException]
    info("Reason: " + exception.getMessage)
} 
```

这将在测试结果中显示为嵌套消息。您可以[在 ScalaDoc](http://doc.scalatest.org/1.8/index.html#org.scalatest.Informer)中找到有关此的更多信息。

# vhdl - 无延迟锁存信号

> ID：12652255
> 
> 赞同：1
> 
> 时间：2012-09-29T11:21:34.053
> 
> 标签：vhdl

我想锁定一个信号，但是当我尝试这样做时，我得到一个周期的延迟，我该如何避免这种情况？

```
myLatch: process(wclk, we)   -- Can I ommit the we in the sensitivity list?
begin
    if wclk'event and wclk = '1' then
        lwe    <= we;
    end if;
end process; 
```

但是，如果我尝试这个并在模拟期间查看波浪，我们会延迟一个 wclk 周期。我想要实现的只是在 tp`we`的上升沿采样`wclk`并保持稳定直到下一个上升沿。然后我将锁存的信号分配给架构中定义的另一个实体端口映射。

===============================================

好吧，我发现我必须省略`wclk'event`以获得闩锁而不是触发器。这对我来说似乎很不直观。通过简单地缩短我对要锁存的信号进行采样的时间，我从锁存器到触发器。谁能解释为什么会这样以及我的看法是错误的。（我是一个 vhdl 初学者）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T15:00:58.683

首先，对您在上面粘贴的过程进行一些观察：

```
myLatch: process(wclk, we)
begin
  if wclk'event and wclk = '1' then
    lwe    <= we;
  end if;
end process; 
```

1.  *我们*可以从灵敏度列表中省略信号，因为您已经描述了一个时钟过程。像这样的进程的敏感度列表中唯一需要的信号是时钟和异步重置（如果您选择使用其中之一）（同步重置不需要添加到敏感度列表中）。

2.  而不是使用`if wclk'event and wclk = '1' then`你应该使用`if rising_edge(wclk) then`or ，[这里](http://vhdlguru.blogspot.co.uk/2010/04/difference-between-risingedgeclk-and.html)`if falling_edge(wclk) then`有一篇很好的博客文章说明了原因。

通过省略`wclk'event`您将进程从时钟进程更改为组合进程，如下所示：

```
myLatch: process(wclk, we)
begin
  if wclk = '1' then
    lwe    <= we;
  end if;
end process; 
```

在组合过程中，所有输入都应出现在敏感度列表中，因此将两者都包含在列表中是正确`wclk`的，`we`因为它们对输出有影响。通常，您会确保`lwe`在 if 语句的所有情况下都分配了 ，以避免推断闩锁，但是在这种情况下，这似乎是您的意图。

一般来说，应该避免使用闩锁，因此如果您发现自己需要一个闩锁，您或许应该停下来考虑一下您的方法。[Doulos 在这里](http://www.doulos.com/knowhow/fpga/latches/)和[这里](http://www.doulos.com/knowhow/vhdl_designers_guide/synthesising_latches/)有几篇关于闩锁的文章，您可能会发现它们很有用。

你说你想要实现的只是`we`在上升沿采样`wclk`并保持稳定直到下一个上升沿。以下过程将完成此操作：

```
 store : process(wclk)
  begin
    if rising_edge(wclk) then
      lwe <= we;
    end if;
  end process; 
```

在此过程中，`lwe`将`we`在每个上升沿更新 的值，`wclk`并将在单个时钟周期内保持有效。

让我知道这是否可以为您解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T15:01:30.740

信不信由你，问题实际上出在您的测试台上。这与 VHDL 仿真模型的工作方式有关。

VHDL 通常用于同步硬件设计——也就是说，使用在上升沿采样并在下降沿设置输出的触发器，因此在读取和写入之间没有竞争条件。但是在 VHDL 中，这个主/从逻辑实际上并没有使用相反的时钟沿来模拟。

考虑一个过程

```
process (clock) begin
    if rising_edge(clock) then
        a <= b;
    end if;
end process; 
```

在模拟时间步开始时，如果`clock`刚刚上升，`if`则将执行。然后`a <= b`将执行分配，这不会立即导致分配发生，而是将分配*安排*到时间步的末尾。

在所有进程都运行之后，所有计划的分配都会发生。这意味着`a`在下一个时间步之前没有进程会“看到” 的新值。

```
Time              a           b         Actions
Start of ts 1    '0'         '1'        a <= '1' is scheduled
End of ts 1      '1'         '0'        a <= '1' is executed
Start of ts 2    '1'         '0'        a <= '0' is scheduled
End of ts 2      '0'         '1'        a <= '0' is executed 
```

因此，当您查看波形查看器时，您会看到`a`显然设置在时钟的上升沿，然后`b`延迟一个时钟周期；您看不到导致这种情况发生的任务的中间安排。

当然，在现实生活中，没有“时间步的结束”，信号的实际变化`a`发生在触发器的从机部分触发时，即在下降沿。（也许 VHDL 只使用负边缘会不会那么混乱；但是，哦，好吧，这就是它的工作原理）。

这是您的闩锁代码的两个测试平台：

*   [测试台 1，使用上升沿](https://gist.github.com/3804247)
*   [测试台 2，使用下降沿](https://gist.github.com/3804249)

首先，如果您查看波形查看器，您将看到您所描述的确切内容 -`lwe`似乎延迟了 1 个时钟周期 - 但实际上，延迟发生在设置的非阻塞分配中`counter`- 所以当上升沿发生，`we`实际上还没有它的新值。在第二个中，你看不到这样的延迟；`lwe`恰好在上升沿设置为当时的值`we`。

有关 Verilog 中的相关主题，请参阅[Verilog 综合中的非阻塞分配，Coding Styles That Kill](http://www.sunburst-design.com/papers/CummingsSNUG2000SJ_NBA.pdf)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T11:05:12.777

根据您的描述，您拥有的过程就是您想要的，尽管“我们”应该从敏感列表中删除。如果这不起作用，你认为它应该几乎肯定是你的测试台/模拟的问题。（请参阅欧文的回答。）具体来说，您可能太迟更改“我们”的值，因此触发器会锁存前一个值而不是新值。

我很想知道这个信号的来源是什么，如果它是一个可以随时改变的异步信号，你将不得不添加一些逻辑来防止亚稳态。

要回答关于闩锁的第二个问题，省略 wclk'event 将导致闩锁是正确的。然而，这个过程不会做你想做的事，因为它会在时钟的整个正半周期内将“我们”的变化传播到“我”。对您的问题的简短回答是，实现这种类型的行为需要一个锁存器，而原始过程描述的行为需要一个触发器。

# android - Android -> webview 没有正确显示

> ID：12652257
> 
> 赞同：0
> 
> 时间：2012-09-29T11:22:03.780
> 
> 标签：android, webview, httpclient, webpage

有一个网页（[http://m.bonbon.hr/profile](http://m.bonbon.hr/profile)）。当我从网络浏览器登录到该网页时，我会看到这样的屏幕（图 1）：

![图片1](../Images/33b1eff3f78e021b8a9f3ac59f3523ba.png)

几秒钟后，它说加载的部分变成了这样（图2）：

![图二](../Images/1f66fe6fa4e21eb241b4542f9cd260e0.png)

一切都加载，并且工作完美。现在我的问题在于我的 android 应用程序。我有向该网页发送数据并获得响应（html 代码）的 HttpClient。然后我在我的应用程序中加载了对 webview 的响应，但我得到的是这个（图 3）：

![图三](../Images/923ed34277fdb75b8b9896cb7c2da62b.png)

webview 卡在这个加载上，它永远不会改变。所以我想知道如何做到这一点，以便 webview 向我显示包含所有数据的网页，如图片 2 上的浏览​​器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T11:53:52.650

看起来网页本身正在使用 jquery 或在浏览器或 web 视图中打开它时正在加载的其他库。

如果您只加载纯 html 的响应，您很可能不会加载额外的 CSS 以及其他库/框架，如 jquery。

查看网页源代码并检查标题中包含的内容。您可能必须以某种方式将其添加到您的 html 响应中。

# java - 如何在android中使用UDP套接字？

> ID：12652261
> 
> 赞同：10
> 
> 时间：2012-09-29T11:22:46.230
> 
> 标签：java, android, udp

我正在尝试在 android 中使用 UDP 套接字，在这里我从 android 模拟器发送我的字符串并通过我的 Java 程序在 PC 上接收它，但是我的 Java 程序没有收到任何东西，尽管当我使用 Java 程序作为客户端和服务器时（我做了两个不同的Java程序）它工作。

这是我的 android 主要活动：

```
public class First extends Activity {
Button b;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    b = (Button) findViewById(R.id.button1);
    b.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Thread t = new Thread(new Second());
            t.start();
        }
    }); 
```

这是我在 android 中的第二堂课：

```
 public class Second implements Runnable {
Second()
{
    run();
}
public void run() {
    // TODO Auto-generated method stub
    try {

        String messageStr = "Hello Android!";
        int server_port = 9876;
        DatagramSocket s = new DatagramSocket();
        InetAddress local = InetAddress.getByName("127.0.0.1");
        int msg_length = messageStr.length();
        byte[] message = messageStr.getBytes();
        DatagramPacket p = new DatagramPacket(message, msg_length, local,
                server_port);
        s.send(p);
    } catch (Exception e) {

    }
}
} 
```

这是我在 PC 上的 Java 代码：

```
 public static void main(String args[]) throws Exception
    {
            DatagramSocket serverSocket = new DatagramSocket(9876);
            byte[] receiveData = new byte[1024];
            byte[] sendData = new byte[1024];
            while(true)
            {
                    DatagramPacket receivePacket = new     DatagramPacket(receiveData,receiveData.length);
                    serverSocket.receive(receivePacket);
                    String sentence = new String(receivePacket.getData(),0,receivePacket.getLength());
                    InetAddress IPAddress = receivePacket.getAddress();
                    int port = receivePacket.getPort();
                    System.out.println("MESSAGE RECEIVED  "+sentence+"  "+IPAddress+"         "+port);
            }
     } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-29T11:25:29.847

在您的 Android 仿真（和 Android 设备）上，127.0.0.1 表示 Android 仿真机器，而不是主机 PC。您可以在[10.0.2.2访问您的主机](https://stackoverflow.com/questions/1621796/accessing-webserver-running-within-eclipse-from-outside-the-workstation/1630532#1630532)

# android - 支持应用程序的持久性和启动服务

> ID：12652263
> 
> 赞同：1
> 
> 时间：2012-09-29T11:22:47.807
> 
> 标签：android

我拥有一个 android 4.0.3 平板电脑，我正在使用 Java/SDK 编程，但还没有尝试过 NDK。现在，假设您想对这款平板电脑进行编程，将其放置在一个服务点中，使用一个单一的用例，比如餐厅，在那里它会显示菜单并让用户通过它们。我不想让用户关闭这个软件。此外，它必须在平板电脑启动时自动运行并持续打开，即如果它因某种原因关闭，平板电脑不应返回其标准 GUI，而是重新启动此应用程序。

我不知道任何起点，比如一些关键字等。我想在这里我必须编写一个服务（维护应用程序的持久性和启动）和应用程序本身。

您能否提供一些想法/关键字/潜在的起点/评论？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:38:08.180

> 我不想让用户关闭这个软件，所以它必须持续存在。

让它成为主屏幕。

> 此外，它必须在平板电脑启动时自动运行并持续运行，即如果它因某种原因关闭，平板电脑不应返回其标准 GUI，而是重新启动此应用程序并显示其 GUI。

让它成为主屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T11:47:32.383

这里有一些你需要检查的东西：

1.) 如何在启动时启动应用程序。

2.）如何在后台运行服务/线程以检查应用程序是否正在运行，如果不启动它。

3.) 如何停用按钮，例如“后退”按钮以不退出应用程序或以一种方式使活动永远不会因用户干扰而退出。（虽然这是非常糟糕的做法！）:)

4.) 出于维护目的，应该有一种退出应用程序的方法。在那个方面要有创意。也许只能用密码或其他东西退出。

# android - android media - 将音频作为服务播放的媒体控件

> ID：12652265
> 
> 赞同：0
> 
> 时间：2012-09-29T11:23:25.693
> 
> 标签：android

我想在我的 android 应用程序中作为服务播放音频，以便在用户转到其他应用程序时继续播放。我设法开发了服务的核心部分，但现在我需要应用程序一侧的控件来启动/停止音频。我很想使用 MediaControl 类，但它似乎绑定到同一应用程序中定义的媒体播放器。所以基本上我试图找出如何将基于服务的音频播放与媒体控制器或类似的东西连接起来。

任何建议高度赞赏

马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T14:53:46.080

自己找到了解决方案。

无需将 MediaController 与 MediaPlayer 的实际实例连接，您只需使用任何类实现接口 MediaPlayerControl 并通过接口方法将服务与 MediaController 小部件连接起来。

# matlab - 如何找到所有区域的边界框？

> ID：12652270
> 
> 赞同：0
> 
> 时间：2012-09-29T11:23:45.900
> 
> 标签：matlab

我正在使用[MNIST 数字图像](http://yann.lecun.com/exdb/mnist/index.html)进行机器学习实验，并且我试图根据位置而不是默认情况下以它们为中心的质心来居中每个图像。

我正在使用 regionprops 类 BoundingBox 方法来提取图像。我创建了灰度的黑白副本，使用它来确定 BoundingBox 属性（regionprops 仅适用于黑白图像），然后将其应用于灰度原始图像以提取精确的图像矩形。这适用于约 98% 的图像。

我遇到的问题是，另外约 2% 的图像在左上角有某种噪声或错误像素，我最终只提取了那个像素，而图像的其余部分被丢弃了。

如何将图像的所有元素合并到一个矩形中？

编辑：进一步的研究使我意识到我可以将这个问题总结并改写为“如何找到所有区域的边界框？”。我尝试调整标签矩阵，使所有区域都是相同的标签，但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T21:55:18.953

您可以使用具有相同大小的噪声的腐蚀掩码使其完全消失“使用 imerode 后跟 imdilate 以逆腐蚀”，或者您可以使用中值滤波器

# c# - 客户端服务器多线程应用程序

> ID：12652271
> 
> 赞同：0
> 
> 时间：2012-09-29T11:23:46.823
> 
> 标签：c#, multithreading, communication

我想问一下创建客户端服务器应用程序的最佳方法是什么。从服务器传输到客户端的数据最大为 15000 字节/会话（15 Kb）

客户端到服务器是 5000 字节/会话 (5 Kb)

在我期待的更新中（在应用程序启动并运行之后）.. 将传输更多流量.. 数据将是客户端到服务器*number_of_session_initiated（至少分发 800 万个会话）

我现在拥有的：

服务器 80% 完成，这里的答案将帮助我完成 100% .. 客户端正在建设中.. 但是会从服务器上花费很多，因为它们的工作方式相同但有一些限制。

对于代码，我使用下面的代码获取时间 (GMT)

```
DateTime time = DateTime.UtcNow;
string format = "M/d/yyyy HH:mm:ss tt";
Console.WriteLine(time.ToString(format)); 
```

发送到客户端/服务器的输出和数据基于输入。

那么，谁能指导我拥有一个可以处理多个线程的多线程客户端/服务器应用程序的最佳方法？

注意：线程将仅在服务器端。客户端只能与服务器打开一个会话，但服务器一次可以与多个客户端通信。

可以创建的最大线程数是多少？

此致。

**编辑**

忘了添加..所有数据都将被加密发送，因此服务器/客户端将有负载进行加密/解密（尚未决定加密机制）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T11:35:03.953

客户端服务器多线程应用程序的 .NET 解决方案是[WCF](http://msdn.microsoft.com/en-us/library/dd456779.aspx)。可以创建的最大线程数受 WCF 主机操作系统的限制，如果您要在 IIS 中托管服务器，那么您可以使用 AppPool 设置来管理您的线程，如果您选择在 Windows 服务中自托管 WCF您可以在代码中进行自己的线程管理。

WCF[在这里](http://msdn.microsoft.com/en-us/library/ms733137.aspx)提供了更多的加密机制。

# algorithm - 扩展ASCII的Base64计算？

> ID：12652272
> 
> 赞同：1
> 
> 时间：2012-09-29T11:23:55.123
> 
> 标签：algorithm, encoding, character-encoding, base64

据我所知 - base 64 可以代表*任何*字符。（包括二进制）

> 当需要对二进制（！）数据进行编码时，通常使用 Base64 编码方案，这些数据需要在旨在处理文本数据的媒体上存储和传输

所以我尝试将它应用于扩展的 ascii char（超过 127）

字符：

![在此处输入图像描述](../Images/5f535462599faac358b382611b1cb8fe.png)

遵循简单的[算法](http://en.wikipedia.org/wiki/Base64#Examples)后 ：

我必须：

![在此处输入图像描述](../Images/acec8f52cde22587923d0dd8bef147c8.png)

所以值应该是`Fy`

那么为什么当我使用[在线编码器](http://www.opinionatedgeek.com/dotnet/tools/Base64Encode/Default.aspx)并将值放在`alt`+`178`时，

![在此处输入图像描述](../Images/c02c300cbeb5eb3938320054eefaa228.png)

我得到这个结果：

![在此处输入图像描述](../Images/52af27332ee2ce5692ed4287d76cfe29.png)

这里发生了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T11:26:53.433

您的浏览器向编码网站发送了字符的 UTF-8 编码。此编码不是 178。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T11:37:57.120

也就是 Unicode 字符的 UTF-8 编码，`U+2593`和扩展的 ASCII 字符 178 一样。

[![U+2593](../Images/4f1538d83d0bda0dcc11ada7bbdbe284.png)](https://www.fileformat.info/info/unicode/char/2593/index.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T11:46:25.063

感谢 Damien_The_Unbeliever && zmbq &&Markus Jarderot：

![在此处输入图像描述](../Images/0564f9a06e860b7342914a5ca1effdab.png)

所以

![在此处输入图像描述](../Images/78f852e22a50ffc1506e450c88a4a1c6.png)

# qt - Qt 数组 QString

> ID：12652273
> 
> 赞同：0
> 
> 时间：2012-09-29T11:23:56.167
> 
> 标签：qt, qstring, qbytearray

我通过 selectall 查询从 db 获取结果，我想将结果保存在数组中并通过套接字发送。

```
db.open();

QSqlQuery *selectall = new QSqlQuery(db);
selectall->prepare("select * from phone_table");
selectall->exec();
selectall->first();
QString result;
QByteArray arrayresult;
int index = 0;
while (selectall->next())
{
    index += 1;
    // qint16 id = selectall->value(0).toString();
    QString name_ = selectall->value(1).toString();
    QString surname = selectall->value(2).toString();
    QString phone_number = selectall->value(3).toString();
    result = "*"+ name_+"*"+surname+"*"+phone_number;
    arrayresult[index] = result;
} 
```

我收到此错误二进制“=”：未找到采用“const char [16]”类型的右侧操作数的运算符

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T11:40:13.300

您正在尝试将 QByteRef 设置为 QString。

我想你可能想要一个 QList 和 arrayresult.append(result)。或者，如果你想要一个 QByteArray 与所有结果的 concat 使用 arrayresult+= 结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-09T09:18:27.197

您可以构建`QString`您想要初始化的`QByteArray`. 然后转换`QString`为`QByteArray`，你可以做

```
QByteArray array_ = string_.toLatin1(); 
```

如果编码是 Latin1。

您也可以使用附加

```
QByteArray & QByteArray::append ( const QString & str ) 
```

> 这是一个过载功能。
> 
> 将字符串 str 附加到此字节数组。Unicode 数据使用 QString::toAscii() 转换为 8 位字符。
> 
> 如果 QString 包含非 ASCII Unicode 字符，使用此函数可能会导致信息丢失。您可以通过在编译应用程序时定义 QT_NO_CAST_TO_ASCII 来禁用此功能。然后，如果要将数据转换为 const char *，则需要显式调用 QString::toAscii()（或 QString::toLatin1() 或 QString::toUtf8() 或 QString::toLocal8Bit()）。

`append`与操作员做同样的事情`+`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-26T15:23:22.320

您可以[使用](http://doc.qt.io/qt-5/qstring.html#toLatin1).`[QString](http://doc.qt.io/qt-5/qstring.html)`

```
// ...

QString result = QString( "*%1*%2*%3" ).arg( name_ )
                                       .arg( surname )
                                       .arg( phone_number );

QByteArray resultArray = result.toLatin1();
// Or ...
// QByteArray resultArray = result.toLocal8Bit();
// QByteArray resultArray = result.toUtf8(); 
```

并且您应该使用`QList< QByteArray >`包含结果的 for，或者您可以[`append`](http://doc.qt.io/qt-5/qbytearray.html#append)将最后一个结果项添加到最终结果对象中。

# iis - IIS 应用程序池和数据库（例如：SQL Server）之间有什么关系？

> ID：12652275
> 
> 赞同：4
> 
> 时间：2012-09-29T11:24:14.397
> 
> 标签：iis, pool

* * *

你好，

**IIS 应用程序池**和ASP.NET 应用程序的**数据库**（例如：SQL Server）之间有什么关系？IIS 应用程序池配置中的任何更改是否会影响数据库连接？或相反亦然？

SQL Server 如何与**应用程序池**一起维护**连接**池？如果它们使用相同的连接字符串并来自相同的应用程序池，它是否为所有不同的 asp.net 应用程序维护**单个连接池？**如果它们来自不同的应用程序池和相同的连接字符串怎么办？

# windows-7 - 部署智能设备应用程序时，Visual Studio 2003 IDE 在 Windows 7 上崩溃

> ID：12652276
> 
> 赞同：0
> 
> 时间：2012-09-29T11:24:20.403
> 
> 标签：windows-7, compact-framework, visual-studio-2003

我正在使用 Windows 7 32 位开发 PC。我必须支持在 Windows CE 设备上运行的 Compact Framework 1 智能设备应用程序。Visual Studio .NET 2003 可以很好地构建应用程序，但在将其部署到设备上进行调试时，它会因 Windows 7“停止工作，正在寻找解决方案”提示而崩溃。Windows 找不到任何东西。

此崩溃可能与 Windows Mobile 设备中心连接有关，因为无论是通过 USB 还是通过 DMA 建立到设备模拟器的连接都无关紧要。

我已经尝试了 devenv.exe 的 Windows 7 兼容性选项卡。Windows XP 或 Vista 选项不起作用。

Windows 7 XP Mode 是没有问题的，因为我需要连接到 USB 设备。XP Mode 在连接的设备上非常不成功。

我现在唯一的选择似乎是在 Windows XP 机器上工作。任何适用于我的 Windows 7 PC 的解决方案都将受到欢迎。

# vb.net - 在文本文件中搜索单词并从那里继续阅读 vb.net

> ID：12652277
> 
> 赞同：1
> 
> 时间：2012-09-29T11:24:24.777
> 
> 标签：vb.net, string, text, text-files, vb.net-2010

正如标题所说，我想在文本文件中搜索特定单词，然后从该点开始阅读文本。

代码片段如下

```
Dim path As String = "c:\temp\test.txt"
        Dim readall As String
        Dim i As Integer

            If File.Exists(path) Then
                File.Delete(path)
            End If

            Dim sw As StreamWriter = New StreamWriter(path)
            sw.WriteLine("Hello")
            sw.WriteLine("i am here")
            sw.WriteLine("to test")
            sw.WriteLine("the class")
            sw.Close()

            Dim sr As StreamReader = New StreamReader(path)
            readall = sr.ReadToEnd
            sr.Close() 
```

所以现在我已经阅读了文件并将其存储到字符串 readall 中。我怎样才能写回文件，但现在从“到”这个词开始例如输出文本文件将是

测试类

我希望我说清楚了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T11:31:02.030

搜索`readall`第一次出现的“to”并将其余的`readall`以“to”开头的内容存储到变量中`stringToWrite`：

```
Dim stringToWrite As String
stringToWrite = readall.Substring(IndexOf("to")) 
```

然后写入`stringToWrite`文件：

```
Dim sw As StreamWriter = New StreamWriter(path)
sw.write(stringToWrite)
sw.Close() 
```

# javascript - 使用 Zepto-js 和 iPad 在 doubleTap 上获取坐标

> ID：12652278
> 
> 赞同：1
> 
> 时间：2012-09-29T11:24:32.237
> 
> 标签：javascript, ios, ipad, mobile, zepto

有人熟悉zepto吗？

我也愿意接受其他移动框架的建议，如果他们有良好的 doubleTap 植入并且他们可以处理这项工作。

我需要在移动 Safari 中检测 doubleTap 事件的第二次点击时的坐标。

到目前为止，我一直在为 event-obj 使用**jQuery**，并且该语法很好

```
 x: e.pageX 
 y: e.pageY 
```

但它在 iPad 中不起作用

感谢任何帮助，BR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T16:56:16.403

正如我所提到的，我找到了一个解决方案，所以如果其他用户面临同样的问题，我会发布它：

```
// double tap (tapped twice within 250ms)
      if (touch.isDoubleTap) {
        touch.el.trigger('doubleTap')
        touch = {} 
```

上面 zepto.js 中的代码检测到触摸事件是 doubleTap 并触发其处理程序。这里有一点修改：

```
 // double tap (tapped twice within 250ms)
      ...............
        touch.el.trigger('doubleTap', {touch: touch}) 
```

通过将事件作为参数传递来覆盖它可以解决问题。现在可以使用包括坐标在内的所有属性访问事件对象。

这是一个如何从定义的处理程序中提取它们的示例：

```
 Zepto('selector').doubleTap(function(e){
       var dblTap = e.data.touch;
       var coord = {
          x: dblTap.x1,
          y: dblTap.y1
       }
    }); 
```

这对**v1.0.rc1**有效不知道以后的版本会是什么情况

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T15:17:02.360

我不知道这是否可以在 Zepto 上工作（我在 JQMobi 上遇到了同样的问题）但是如果你使用 HammerJS [http://eightmedia.github.com/hammer.js/](http://eightmedia.github.com/hammer.js/)而不是你可以得到实际的水龙头的位置

有关此示例，请参见我的 SoftPaws 游戏：[https ://github.com/gavD/soft-paws](https://github.com/gavD/soft-paws)

我希望这有帮助！

# opengl-es - 3D 应用程序无法在 Intel i3-2120 上运行

> ID：12652282
> 
> 赞同：0
> 
> 时间：2012-09-29T11:25:49.077
> 
> 标签：opengl-es

我的 windows7 PC 上有一台运行 Ubuntu 的虚拟机。该机配备英特尔 i3-2120 处理器。所以我认为它支持 OpenGL API，因为处理器具有内置的 Intel HD Graphics 2000 GPU。

我正在使用 ARM 的 OpenGL ES 2.0 Emulator 来构建和运行 3D 应用程序。我是 OpenGL ES 的新手。我已经构建了一个立方体应用程序，它附带了模拟器本身的示例，只是为了测试设置是否准备好运行 3D 应用程序。

该应用程序没有运行，并且在以下步骤中编译着色器失败：

```
 GL_CHECK(glCompileShader(*pShader));
  GL_CHECK(glGetShaderiv(*pShader, GL_COMPILE_STATUS, &iStatus)); 
```

这个问题与硬件有关吗？有人可以帮忙弄清楚设置有什么问题吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T21:20:53.033

如果着色器代码没有任何错误，那应该是由于虚拟化造成的。检查您的 ubuntu 是否支持 3D 加速。

在终端中执行：glxinfo | grep 渲染

如果你得到“直接渲染：否”，那就是你的问题。检查您的虚拟化应用程序是否支持 3D 加速以及如何启用它。

# jquery - jquery attr() 在 IE 中不起作用

> ID：12652284
> 
> 赞同：1
> 
> 时间：2012-09-29T11:25:58.817
> 
> 标签：jquery, internet-explorer, opera, attr

我使用jquery做一些事情，我使用`attr()`方法来获取`id`属性，它在Chrome和Firefox中运行良好，但在IE9和Opera中不行，部分代码如下：

```
parent = $(this).parents('.every_note');        
loan_id = parent.attr('id'); 
```

在行中

```
loan_id = parent.attr('id'); 
```

Opera 说：`Unhandled Error: 'parent.attr' is not a function`，而在 IE 中说：`does not support attr() method or attribute`。

但是如果我在浏览器的控制台中测试，我可以使用这种方法，所以任何人都可以告诉我为什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T12:19:43.223

有时 IE 不喜欢 "$" 而 "jQuery" 对我有用。在较旧的 IE 中，全局变量与 jQuery 结合使用还有另一个问题。

尝试：

```
var parent = jQuery(this).parents('.every_note');        
var loan_id = parent.attr('id'); 
```

[关于 jQuery-IE 问题的文章（德语）](http://felix-geenen.de/javascript/jquery-fallen-im-internet-explorer/)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-29T12:02:55.040

利用

```
parent = $(this).parents('.every_note');   
loan_id = $("+parent+").attr('id'); 
```

# ajax - ajax 无法刷新与 Sessionscoped managedBean 一起使用的 dataTable

> ID：12652285
> 
> 赞同：0
> 
> 时间：2012-09-29T11:26:06.620
> 
> 标签：ajax, jsf, datatable, primefaces, managed-bean

我正在使用会话范围的 bean 和 primefaces 3.4 我的数据表有问题，当我尝试添加一行时，数据表没有刷新我使用 ajax 更新属性来做到这一点，这里有一个完整的解释（代码 + 试过失败的解决方案）关于这个问题 [http://forum.primefaces.org/viewtopic.php?f=3&t=25113&p=79105#p79105](http://forum.primefaces.org/viewtopic.php?f=3&t=25113&p=79105#p79105)。那么加载数据表列表（包含要显示的数据）的最佳方法是什么？

我会试试这个，但这似乎不合逻辑

```
public List<Project> getFullproject() {
  return projectsList(); //<--- try to refresh the data from database when the 

  primeface   data table is updated 
```

}

# javascript - 使用本地文件夹如何存储谷歌标记

> ID：12652287
> 
> 赞同：0
> 
> 时间：2012-09-29T11:26:29.863
> 
> 标签：javascript, html, google-maps

1.  var newIcon = new google.maps.MarkerImage('images/red-pushpin.png');
2.  var newIcon = 'http://images/red-pushpin.png';
3.  var newIcon = 'http://maps.google.com/mapfiles/ms/icons/red-pushpin.png';

    var MarkerOption = {地图：地图，位置：MarkerLatLng，标题：名称，图标：newIcon }；var Marker = new google.maps.Marker(MarkerOption);

我正在使用 VB WebBrowser 控件加载 HTML 页面并通过 javascript 访问 Google 地图。一切正常，除了我只能通过上面的第 3 行访问标记，但我想使用本地图像文件夹（图像）但 javascrip 无法“看到”它，但它与 HTML 页面位于同一目录中。请问我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:20:09.040

根据[MarkerOptions 文档](https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions)，图标应该是一个 URL。

因此，如果网站通过**http**提供服务，您将只能访问 url 中的图像，并且嵌入**file:///**的本地文件往往会被浏览器忽略。所以只有你的 3 行在工作。

 **如果您想从本地驱动器访问您的图标图像，您可以这样做：

`var newIcon= "http://mysite.com/images/red-pushpin.png"`

> 代替 mysite 将其替换为您在运行它时为您的网站获取的 url**

# c++ - boost::multi_array 生成器上的编译错误

> ID：12652294
> 
> 赞同：0
> 
> 时间：2012-09-29T11:27:50.980
> 
> 标签：c++, boost, boost-multi-array

据说如果我们想更有效地使用multi_array，我们最好使用multi_array builder。但是，我对模板和 boost 都很陌生，我试图从书中复制一些代码。它看起来像这样：

```
class multi_builder : boost::noncopyable    
{
public:
    typedef boost::multi_array<T,N> array_type;
    typedef boost::shared_ptr<array_type > type;    
private:
    boost::any ext; 
public:
    multi_builder() : ext(boost::extents){}
    ~multi_builder(){}
    template<std::size_t n>
    void dim(std::size_t x)
    {
        BOOST_STATIC_ASSERT(n >= 0 && n < N);   
        ext = boost::any_cast<boost::detail::multi_array::extent_gen<n> >(ext) [x];
    }
    boost::type create(void)
    {
        return boost::type<array_type>(new array_type(boost::any_cast<boost::detail::multi_array::extent_gen<N> >(ext)));
    }
}; 
```

但是，当我尝试在这样的代码中使用它时：

```
multi_builder<int,2> builder;
builder.dim<0>(2);  
builder.dim<1>(2);  
BOOST_AUTO(mp,builder.create());   
for(int i = 0,v = 0; i < 2; ++i)
    for(int j = 0; j < 2; ++j)
        (*mp)[i][j] = v++; 
```

编译器生成以下错误：

```
error:invalid use of template-name 'boost::type' without an argument list
error:'class multi_builder<int, 2u>' has no member named 'create'.
error:invalid type in declaration before '=' token
error:'class multi_builder<int, 2u>' has no member named 'create'
error:invalid type argument of 'unary *' 
```

有人可以告诉我如何解决这些错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T14:28:46.147

从外观上看，返回类型`create()`缺少模板参数列表。我没有使用过这个 Boost 组件，但根据返回值的方式，它应该看起来像这样：

```
boost::type<array_type> create(void) 
```

# ios - 使应用程序在越狱设备上自行重启

> ID：12652297
> 
> 赞同：0
> 
> 时间：2012-09-29T11:28:07.937
> 
> 标签：ios, objective-c, jailbreak

每次用户访问他们的主屏幕时，我的 iOS 应用程序是否有可能自动重启？这是针对越狱设备的——该应用程序不适用于应用商店。

一般来说，在给定应用程序外部的特定用户操作的情况下，如何让我的应用程序重新启动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T21:26:40.410

## 加速度计

如果您只想在遇到某些加速度计条件时让您的应用程序运行，您可以使用`Activator`它。Activator 是[Ryan Petrich](https://stackoverflow.com/users/4007/rpetrich)开发的一款很棒的应用程序，可在 Cydia 上免费使用。它使您可以将设备配置为在执行特定用户操作时运行任何应用程序（或切换）。这可能是按下主页按钮、按下电源/锁定按钮或加速度计抖动。

![在此处输入图像描述](../Images/7512b41b0d53598ab11abf78fa9d738a.png)

如果您不想要基本的*摇动*，或者您正在构建一个应用程序来提供给许多用户，并且不希望他们必须自己设置 Activator，那么您可能需要自己编写一些代码。

例如，**除了您的主 UI 应用程序之外，您还可以编写一个**[Launch Daemon](http://chrisalvares.com/blog/7/creating-an-iphone-daemon-part-1/)，并让启动守护程序[监控加速度计。](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/MotionEvents/MotionEvents.html#//apple_ref/doc/uid/TP40009541-CH4-SW5)

 **当您检测到您感兴趣的特定类型的动作时，您可以使用[命令](https://stackoverflow.com/a/11713035/119114)[启动您的 UI 应用程序`open`](https://stackoverflow.com/a/11713035/119114)。如果这只是供您自己使用，只需`open`从 Cydia 下载软件包。如果这是为了发布给其他人，请确保您的应用依赖于`open`以确保它已安装。例如，如果打包在 Debian .deb 包中，则 DEBIAN/control 文件可能包含以下内容：

```
Depends: open 
```

以确保安装您的应用程序的用户也将自动获得`open`您的应用程序需要的。

## 开锁

您的另一个问题涉及在用户解锁手机时启动应用程序。同样，我会使用您的 Launch Daemon 来监听这种情况。在 iOS 5 上，我在解锁手机时看到此通知：

> 截获通知：com.apple.springboard.lockstate

（我通过`notificationWatcher`从命令行运行实用程序检测到这一点，而 SSH 连接到我的手机。Cydia 也提供 NotificationWatcher，作为 Erica Sadun 的**Erica Utilities**包的一部分）

所以，我会让你的启动守护进程注册[达尔文通知](https://developer.apple.com/library/mac/documentation/CoreFoundation/Reference/CFNotificationCenterRef/Reference/reference.html#//apple_ref/c/func/CFNotificationCenterAddObserver)。`"com.apple.springboard.lockstate"`像这样的东西：

```
CFNotificationCenterAddObserver(CFNotificationCenterGetDarwinNotifyCenter(), //center
                                self, // observer: can be NULL if callback doesn't need self
                                onLockStateChanged, // callback
                                CFSTR("com.apple.springboard.lockstate"), // name
                                NULL, // object
                                CFNotificationSuspensionBehaviorDeliverImmediately); 
```

回调函数在这里：

```
static void onLockStateChanged(CFNotificationCenterRef center, void *observer, CFStringRef name, const void *object, CFDictionaryRef userInfo) {
    // if you need access to member data (ivars):
    MyLaunchDaemon* this = (MyLaunchDaemon*)observer;

    //if (userInfo != nil) {
    //    CFShow(userInfo);
    //}
    NSDictionary* info = (NSDictionary*)userInfo;
    // I'm not sure if the userInfo object has any useful
    //  description for the lock state event

    if (/* unlocked */) {
        // force app to open, or resume from the background
        system("/usr/bin/open com.mycompany.MyAppName");
    }
} 
```

当屏幕被锁定或解锁时，我会看到同样的通知，因此您可能需要让启动守护程序跟踪锁定/解锁状态，或检查`userInfo`对象以查看是否告诉您这是锁定还是解锁事件. 我敢肯定还有其他方法。

**更新：**如果您需要帮助确定屏幕锁定或解锁时是否发生通知，您可以[在其他 SO 答案中查看我的](https://stackoverflow.com/a/14357568/119114)**更新 2** 。 可用于确定事件是打开还是关闭事件。`notify_get_state()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T11:34:10.527

`UIApplicationExitsOnSuspend`在应用程序的 Info.plist 文件 中将 的值设置为 YES。

> UIApplicationExitsOnSuspend (Boolean - iOS) 指定应用程序在退出时应该终止而不是移动到后台。与 iOS SDK 4.0 或更高版本链接的应用程序可以包含此键并将其值设置为 YES 以防止自动选择加入后台执行和应用程序暂停。**

# javascript - 在 ice 上调用 javascript 函数：panelConfirmation 的取消

> ID：12652300
> 
> 赞同：1
> 
> 时间：2012-09-29T11:28:33.290
> 
> 标签：javascript, jquery, jsf

我的 jsf 页面上有一个 commandButton，当用户单击它时，我会显示一个 ice:panelConfirmation 来确认，然后再将数据发送到该 commandButton 的 actionListern。

现在，当用户在我的 ice:panelConfirmation 上选择取消时，我想禁用此按钮。

我想当用户选择取消时我必须做一些事情来调用 JavaScript 函数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T13:46:35.087

下面是这个 taglib 如何工作的示例：[ICEfaces Showcase](http://icefaces-showcase.icesoft.org/showcase.jsf?grp=compatMenu&exp=confirmation)。但是生成的代码并不是很好。

```
<input class="iceCmdBtn" id="j_idt3344:j_idt3347" name="j_idt3344:j_idt3347" onblur="setFocus('');" onclick="new Ice.PanelConfirmation(this,event,'j_idt3344:genConfirm',true,false,false,'/xmlhttp/blank',function(event){iceSubmit(form,this,event);return false;});return false;" onfocus="setFocus(this.id);" type="submit" value="Generate a Random Number"> 
```

由于生成的 id，似乎很难处理这些生成的组件上的事件。我会推荐你​​使用[Jquery-ui](http://jqueryui.com/demos/dialog/#modal-confirmation)。它非常易于使用且功能强大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T09:34:27.743

这似乎有点棘手，或者有时它取决于其他要求/必要性。最后我找到了[ace:confirmationDialog](http://icefaces-showcase.icesoft.org/showcase.jsf;jsessionid=32FB93B716017C5ACBED90F122A8E2B9?grp=aceMenu&exp=confirmationDialogBean)我可以在“接受”和“拒绝”按钮上使用动作监听器。:)

# ios - iOS 5 与 iOS 6 上的 InApp 购买

> ID：12652301
> 
> 赞同：2
> 
> 时间：2012-09-29T11:28:38.297
> 
> 标签：ios, ios5, in-app-purchase, ios6

我一直在测试我的应用程序的新版本，其中将包括在下一次更新中的应用程序内购买，为期一个月。

在 iOS 6 和 5 上一切正常，但最近我开始`SKProduct`从我从 iOS 5 发出的请求中得到一个空的 s 数组。

奇怪的是，通过在 iOS 6 上执行相同的应用程序，我得到了正确的产品数组，其中包含我在 iTunes 连接中设置的所有元素。

有人有同样的问题吗？会是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:56:10.033

您使用越狱设备进行测试，不是吗？您可以将此添加到 productsRequest 方法以检查无效标识符

```
- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response {

    NSLog(@"Loaded list of products...");
    _productsRequest = nil;

    NSArray * skProducts = response.products;
    NSLog(@"Number of products: %d", [skProducts count]);
    for (SKProduct * skProduct in skProducts) {
        NSLog(@"Found product: %@ %@ %0.2f",
              skProduct.productIdentifier,
              skProduct.localizedTitle,
              skProduct.price.floatValue);
    }
    for (NSString *invalidProductId in response.invalidProductIdentifiers)
    {
        NSLog(@"Invalid product id: %@" , invalidProductId);
    }

    _completionHandler(YES, skProducts);
    _completionHandler = nil;

} 
```

关注这篇文章 [http://troybrant.net/blog/2010/01/in-app-purchases-a-full-walkthrough/](http://troybrant.net/blog/2010/01/in-app-purchases-a-full-walkthrough/)

# ruby - 使用 Nokogiri 提取可选地址组件

> ID：12652302
> 
> 赞同：0
> 
> 时间：2012-09-29T11:28:40.103
> 
> 标签：ruby, nokogiri

这是我第一次尝试使用 Nokogiri 解析网页。

我正在尝试从网页中提取地址并将它们存储在 CSV 文件中。到目前为止，我只能提取 City、State 和 Zip 字段。

我不知道如何提取设施名称、地址、电话、号码和公司信息。地址可能包含一个或两个街道组件。

对于电话，可能有一个或多个电话号码。电话号码可以是普通号码或传真号码，但它们仅在文本中显示，而不是在标签中。对于公司，我希望能够提取 URL 和名称。

页面上的每个地址都包含如下：

```
 <!-- address entry -->

  <div id='1234' class='address'> 

    <div class='address_header'> 
      <h1 class='header_name'>
        <strong><a href='{URL}'>Facility Name</a></strong>
      </h1>
      <h2 class='header_city'>
        New York
      </h2>
    </div> 

    <div class='address_details'> 
      <div class='info'> 
        <p class='address'>
      <span class='street'>123 ABC St</span><br />
      <span class='street'>Unit 1</span><br />
      <span class='city'>New York</span>, 
          <span class='state'>NY</span> 
          <span class='zip'>10022</span>
        </p>
        <p class='phone'>
          Phone: <span class='tel'>999.999.9999</span>
        </p>
        <p class='phone'>
          Fax: <span class='tel'>888.888.8888</span>
        </p>
        <p class='company'>
          Company: <a href='{URL}'>Company Name</a>
        </p>
      </div>  
    </div> 
  </div>  
  <!-- address entry -->

  <!-- address entry -->

  <div id='4567' class='address'> 

    <div class='address_header'> 
      <h1 class='header_name'>
        <strong><a href='{URL}'>Facility Name</a></strong>
      </h1>
      <h2 class='header_city'>
        New York
      </h2>
    </div> 

    <div class='address_details'> 
      <div class='info'> 
        <p class='address'>
      <span class='street'>456 DEF Rd</span><br />
      <span class='city'>New York</span>, 
          <span class='state'>NY</span> 
          <span class='zip'>10022</span>
        </p>
        <p class='phone'>
          Phone: <span class='tel'>555.555.5555</span>
        </p>
        <p class='company'>
          Company: <a href='{URL}'>Company Name</a>
        </p>
      </div>  
    </div> 
  </div>  
  <!-- address entry --> 
```

这是我非常基本的设置。

```
require 'nokogiri'
require 'open-uri'
require 'csv'

doc = Nokogiri::HTML(open('[URL]'))

Cities = Array.new
States = Array.new
Zips = Array.new

doc.css("p[class='address']").css("span[class='city']").each do |city|
  Cities << city.content
end

doc.css("p[class='address']").css("span[class='state']").each do |state|
    States << state.content
end

doc.css("p[class='address']").css("span[class='zip']").each do |zip|
    Zips << zip.content
end

CSV.open("myCSV.csv", "wb") do |row|
    row << ["City", "State", "Zip"]
    (0..Cities.length - 1).each do |index|
    row << [Cities[index], States[index], Zips[index]]
  end
end 
```

在这里将信息存储在单独的数组中似乎非常笨拙。我基本上想为源文档中地址节点的每次出现在 CSV 表中创建一个行条目，然后用字段（如果存在）填充它：

```
Facility  St_1  St_2  City  State  Zip  Phone  Fax  URL  Company
========  ===== ===== ===== ====== ==== ====== ==== ==== ============
xxxxxxxx  xxxx        xxxx  xxxxx  xxxx xxxxx       xxxx xxxxxxxx
xxxxxxxx  xxxx  xxxxx xxxx  xxxxx  xxxx xxxxx  xxxx xxxx xxxxxxxx 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:23:42.893

你要求很多，但我会让你开始：

```
fields = %w{street1 street2 phone fax city state zip}
doc.search('div.address').each do |div|
  address = {}
  address['street1'], address['street2'] = *div.search('span.street').map(&:text)
  address['phone'], address['fax'] = *div.search('span.tel').map(&:text)
  ['city', 'state', 'zip'].each{|f| address[f] = div.at("span.#{f}").text}
  csv << fields.map{|f| address[f]}
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T14:38:30.800

您可能有一些无法处理的边缘情况，但这会处理您的示例。您需要将文档更改为从实际页面而不是数据段读取，并且您需要将 csv 更改为打印到文件而不是像我所做的那样显示内联。

```
require 'nokogiri'
require 'open-uri'
require 'csv'

doc = Nokogiri::HTML(DATA.read)

CompanyInfo   = Struct.new :facility, :street1, :street2, :city, :state, :zip, :phone, :fax, :url, :company
company_infos = []

doc.css("div.address").each do |address_div|
  facility         = address_div.at_css('.address_header .header_name').text.strip
  info             = address_div.css('div.address_details .info')
  street1, street2 = info.css('.street').map(&:text)
  city             = info.at_css('.city').text
  state            = info.at_css('.state').text
  zip              = info.at_css('.zip').text
  phone, fax       = info.css('.phone .tel').map(&:text)
  url              = info.at_css('.company a')['href']
  company          = info.at_css('.company a').text

  company_infos << CompanyInfo.new(facility, street1, street2, city, state, zip, phone, fax, url, company)
end

csv = CSV.generate do |csv|
  csv << %w[Facility Street1 Street2 City State Zip Phone Fax URL Company]
  company_infos.each do |company_info|
    csv << company_info.to_a
  end
end

csv # => "Facility,Street1,Street2,City,State,Zip,Phone,Fax,URL,Company\nFacility Name,123 ABC St,Unit 1,New York,NY,10022,999.999.9999,888.888.8888,{URL},Company Name\n"

__END__
<!-- address entry -->

<div id='1234' class='address'> 

  <div class='address_header'> 
    <h1 class='header_name'>
      <strong><a href='{URL}'>Facility Name</a></strong>
    </h1>
    <h2 class='header_city'>
      New York
    </h2>
  </div> 

  <div class='address_details'> 
    <div class='info'> 
      <p class='address'>
        <span class='street'>123 ABC St</span><br />
        <span class='street'>Unit 1</span><br />
        <span class='city'>New York</span>, 
        <span class='state'>NY</span> 
        <span class='zip'>10022</span>
      </p>
      <p class='phone'>
        Phone: <span class='tel'>999.999.9999</span>
      </p>
      <p class='phone'>
        Fax: <span class='tel'>888.888.8888</span>
      </p>
      <p class='company'>
        Company: <a href='{URL}'>Company Name</a>
      </p>
    </div>  
  </div> 
</div> 
```

# windows - 如何在 Windows 7 中检查 PC 监视器是否打开或关闭任何工具或事件查看器

> ID：12652304
> 
> 赞同：2
> 
> 时间：2012-09-29T11:28:58.780
> 
> 标签：windows

我需要检查我的电脑显示器是否在 win7 操作系统中打开或关闭

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T16:53:11.310

[MSDN 电源管理文档](http://msdn.microsoft.com/en-us/library/ms703398%28v=vs.85%29.aspx)解释说，您可以在显示器打开或关闭时收到通知。基本上，您注册了电力广播消息，然后[`WM_POWERBROADCAST`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373247%28v=vs.85%29.aspx)只要有变化，您就会收到一条消息。有几种不同的 GUID 用于监视显示状态，具体取决于您使用的 Windows 版本。

在程序开始时（在创建主窗口之后），您执行以下操作：

```
HPOWERNOTIFY hPower =
  RegisterPowerSettingNotification(hwndMain, GUID_SESSION_DISPLAY_STATUS, 0); 
```

（GUID 有其他[选择，](http://msdn.microsoft.com/en-us/library/windows/desktop/hh448380%28v=vs.85%29.aspx)具体取决于您所针对的 Windows 版本。）

然后在您的主窗口过程中：

```
case WM_POWERBROADCAST:
  if (wParam == PBT_POWERSETTINGCHANGE) {
    const POWERBROADCAST_SETTING *pSetting =
      reinterpret_cast<const POWERBROADCAST_SETTING*>(lParam);
    if (pSetting->PowerSetting == GUID_SESSION_DISPLAY_STATUS) {
      assert(pSetting->DataLength >= sizeof(DWORD));
      DWORD data = *reinterpret_cast<const DWORD*>(&pSetting->Data);
      switch (data) {
        case 0: /* monitor is off */ break;
        case 1: /* monitor is on */ break;
        case 2: /* monitor is dimmed */ break;
        default:  /* ???? */ break;
      }
    }
  }
  break; 
```

如果在任何时候您不再关心电源通知，您可以取消注册：

```
UnregsisterPowerSettingNotification(hPower);
hPower = NULL; 
```

# javascript - 为什么 parseInt("08") = 0, parseInt("07") = 7

> ID：12652305
> 
> 赞同：7
> 
> 时间：2012-09-29T11:29:13.317
> 
> 标签：javascript

> **可能重复：**
> [JavaScript 函数 parseInt() 无法正确解析前导 0 的数字](https://stackoverflow.com/questions/4481524/javascript-function-parseint-doesnt-parse-numbers-with-leading-0-correctly)

在 JS 中解析时出现奇怪的问题。

```
parseInt("08")
//The result is: 0

parseInt("07")
//The result is: 7 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-29T11:30:30.603

因为 0 前缀。它告诉Javascript这个数字是八进制的，以8为底。8 不是合法的八进制数字。

改为使用`parseInt("8")`，或如@Gumbo 正确指出的那样 -`parseInt("08", 10)`

# php - 具有多个计数的 MySQL 枢轴

> ID：12652309
> 
> 赞同：3
> 
> 时间：2012-09-29T11:29:16.263
> 
> 标签：php, mysql, pivot

这是我的 MySQL 表的快照：

![在此处输入图像描述](../Images/c476ed7d7b30c6791571f2f34cbfb4f6.png)

是否可以编写查询来获得像输出这样的数据透视表...

![在此处输入图像描述](../Images/34510da3bd35bbe84c452d882775ac65.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T11:34:00.270

像这样的东西怎么样

```
SELECT url_host,
    SUM(CASE WHEN post_id = -1 THEN 1 ELSE 0 END) as post_id_minus1,
    SUM(CASE WHEN post_id = 0 THEN 1 ELSE 0 END) as post_id_0,
    etc...
FROM    YOUR_TABLE
GROUP BY url_host 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T11:31:34.080

您可以`CASE`在此使用语句来旋转您的表格。

```
SELECT  url_host,
        COUNT(CASE WHEN post_ID = -1 THEN 1 ELSE NULL END) Negative_One,
        COUNT(CASE WHEN post_ID = 0 THEN 1 ELSE NULL END) Zero,
        COUNT(CASE WHEN post_ID > 0 THEN 1 ELSE NULL END) Greater_Zero
FROM tableName
GROUP BY url_host 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/aa679/1)

# iphone - 在视图之间传递数据

> ID：12652312
> 
> 赞同：3
> 
> 时间：2012-09-29T11:29:33.880
> 
> 标签：iphone, objective-c, ios, xcode

所以我试图使用本教程[iphonedevsdk](http://www.iphonedevsdk.com/forum/iphone-sdk-development/54859-sharing-data-between-view-controllers-and-other-objects-link-fixed.html)在两个视图之间传递数据（第一个视图是 tableViewController，当按下单元格时数据发送到第二个视图，第二个视图得到 imageView，当数据发送时显示图像） 。

我在我的视图中使用相同的**theAppDataObject**方法：

```
- (AppDataObject*) theAppDataObject
{
    id<AppDelegateProtocol> theDelegate = (id<AppDelegateProtocol>) [UIApplication sharedApplication].delegate;
    AppDataObject* theDataObject;
    theDataObject = (AppDataObject*) theDelegate.theAppDataObject;
    return theDataObject;
} 
```

当按下单元格时，我正在尝试发送数据`theAppDataObject.imageString = tempImageString;`：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    tempImageString = (((championList *) [self.champions objectAtIndex:indexPath.row]).championImage);

    AppDataObject *theDataObject = [self theAppDataObject];
    NSLog(@"tempIm-g = %@",tempImageString);
    theDataObject.imageString = tempImageString;
    NSLog(@"theAppDataObject.imageString = %@",theDataObject.imageString);

    [self.navigationController popToRootViewControllerAnimated:YES];
} 
```

**NSLog 输出**：

tempIm-g = Champ_0.jpg

theAppDataObject.imageString = (null)

**SecondViewController（显示图像）**：

```
-(void)viewWillAppear:(BOOL)animated
{
    AppDataObject* theDataObject = [self theAppDataObject];
    UIImage *tempImage = [UIImage imageNamed:theDataObject.imageString];
    NSLog(@"temp image = %@",tempImage);
    [choosenChampionImageView setImage:tempImage];
} 
```

**NSLog 输出：**

临时图像 = (null)

我的问题是 theAppDataObject.imageString 始终为空

* * *

我知道的可能的解决方案：

不要将 AppDataObject 用作​​通用数据容器，而只是将数据保存在 appDelegate 中。

前任。：

```
AppDelegate *appdelegate = (AppDelegate *)[[UIApplication sharedApplication]delegate];
appdelegate.imageString = tempImageString; 
```

但我想弄清楚如何使用协议。

我尝试了什么：使 DataObject 全局化：

**视图1.h**

```
@interface championsListTableViewController : UITableViewController
{
    NSString *tempImageString;

    AppDataObject* theDataObject;
}

@property(strong,nonatomic) NSString *tempImageString;

@property(strong,nonatomic) AppDataObject* theDataObject; 
```

**NSLog 的输出**(@"theDataObject is %@",theDataObject); ：

theDataObject 为 (null)，这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T11:39:25.753

First Check 是否`theAppDataObject` 为空。

如果它为空，则：

在您的界面中写入`AppDataObject* theDataObject;`并将属性声明为`strong`

如果`theDelegate.theAppDataObject`返回 null ，则首先分配该对象。

如果它不为空，那么：

更改此行`theAppDataObject.imageString = tempImageString;`

至

```
theAppDataObject.imageString = [tempImageString retain]; 
```

如果您使用 ARC，请将 的属性设置`imageString`为`strong`。

或检查此

`theAppDataObject.imageString = [[NSString alloc] initWthString:tempImageString];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T13:26:04.197

在一个类中，如果你想使用一个协议，你可以使用如下：

```
 // this the way too declare  a protocal.
  // .h file
 @protocol TestProtocol <NSObject>

 -(void)testMyProtocolMethod:(NSString *)testvalue;

 @end

@interface TestProtocolClass: NSObject
{
   id <TestProtocol> delegate;

}
 @property (nonatomic , assign) id <TestProtocol> delegate;
 /* synthesize in the .m file   of          this      class*/
 @end

 //Now you have to use this protocol in any class where you want to use , Do like as:
 //let us suppose you want to use this protocal method in a class named "DemoProtocal".
 // .h file 
 import "TestProtocol.h"
 @interface DemoProtocal <TestProtocol>{

 }
 @end

//.m file
 #import "DemoProtocal.h"
 @implementation DemoProtocal

- (id)init{

  TestProtocol *test = [[TestProtocol alloc]init];
  test.delegate = self;

 }

-(void)testMyProtocolMethod:(NSString *)testvalue{

  // Do appropriate things.
 }
 @end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T11:48:15.737

在任何你想设置“AppDelegate Class”的任何变量的类中，你可以试试这个，这肯定会解决你的问题。

```
 //Declare a variable from where you want to set the value of the "AppDelegate Class". 
 //in the yourclass.h file.
 AppDelegate/* this is the main class of the Application*/ *appDel;

//and initialize it where you want to use or you can initialize at the init of the class.  

appDel = (AppDelegate *)[[UIApplication sharedApplication]delegate];

 // Then set the value.
 appDel.imageString = tempImageString; 
```

# c - 如何在 ANSI C 中打印重音字符（如 á é í ó ú）

> ID：12652313
> 
> 赞同：11
> 
> 时间：2012-09-29T11:29:36.150
> 
> 标签：c, printf, ansi, non-ascii-characters

我尝试`printf`使用一些重音字符，例如`á é í ó ú`：

`printf("my name is Seán\n");`

DEVC++ IDE 中的文本编辑器可以很好地显示它们——即源代码看起来很好。我想我需要一些库而不是`stdio.h`normal 的一些变体`printf`。

我正在使用在 Windows XP 上运行的 IDE Bloodshed DEVC。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T13:08:03.717

也许最好的方法是使用 Unicode。

就是这样...

首先，手动将您的控制台字体设置为“Consolas”或“Lucida Console”或您可以选择的任何 True-Type Unicode 字体（“Raster fonts”可能不起作用，那些不是 Unicode 字体，尽管它们可能包含您正在使用的字符有兴趣）。

接下来，将控制台代码页设置为 65001 (UTF-8)，使用`SetConsoleOutputCP(CP_UTF8)`.

然后使用`WideCharToMultiByte(CP_UTF8, ...)`.

最后，调用`WriteConsoleA()`输出 UTF-8 文本。

这是一个为您完成所有这些事情的小功能，它是 的“改进”变体`wprintf()`：

```
int _wprintf(const wchar_t* format, ...)
{
  int r;
  static int utf8ModeSet = 0;
  static wchar_t* bufWchar = NULL;
  static size_t bufWcharCount = 256;
  static char* bufMchar = NULL;
  static size_t bufMcharCount = 256;
  va_list vl;
  int mcharCount = 0;

  if (utf8ModeSet == 0)
  {
    if (!SetConsoleOutputCP(CP_UTF8))
    {
      DWORD err = GetLastError();
      fprintf(stderr, "SetConsoleOutputCP(CP_UTF8) failed with error 0x%X\n", err);
      utf8ModeSet = -1;
    }
    else
    {
      utf8ModeSet = 1;
    }
  }

  if (utf8ModeSet != 1)
  {
    va_start(vl, format);
    r = vwprintf(format, vl);
    va_end(vl);
    return r;
  }

  if (bufWchar == NULL)
  {
    if ((bufWchar = malloc(bufWcharCount * sizeof(wchar_t))) == NULL)
    {
      return -1;
    }
  }

  for (;;)
  {
    va_start(vl, format);
    r = vswprintf(bufWchar, bufWcharCount, format, vl);
    va_end(vl);

    if (r < 0)
    {
      break;
    }

    if (r + 2 <= bufWcharCount)
    {
      break;
    }

    free(bufWchar);
    if ((bufWchar = malloc(bufWcharCount * sizeof(wchar_t) * 2)) == NULL)
    {
      return -1;
    }
    bufWcharCount *= 2;
  }

  if (r > 0)
  {
    if (bufMchar == NULL)
    {
      if ((bufMchar = malloc(bufMcharCount)) == NULL)
      {
        return -1;
      }
    }

    for (;;)
    {
      mcharCount = WideCharToMultiByte(CP_UTF8,
                                       0,
                                       bufWchar,
                                       -1,
                                       bufMchar,
                                       bufMcharCount,
                                       NULL,
                                       NULL);
      if (mcharCount > 0)
      {
        break;
      }

      if (GetLastError() != ERROR_INSUFFICIENT_BUFFER)
      {
        return -1;
      }

      free(bufMchar);
      if ((bufMchar = malloc(bufMcharCount * 2)) == NULL)
      {
        return -1;
      }
      bufMcharCount *= 2;
    }
  }

  if (mcharCount > 1)
  {
    DWORD numberOfCharsWritten, consoleMode;

    if (GetConsoleMode(GetStdHandle(STD_OUTPUT_HANDLE), &consoleMode))
    {
      fflush(stdout);
      if (!WriteConsoleA(GetStdHandle(STD_OUTPUT_HANDLE),
                         bufMchar,
                         mcharCount - 1,
                         &numberOfCharsWritten,
                         NULL))
      {
        return -1;
      }
    }
    else
    {
      if (fputs(bufMchar, stdout) == EOF)
      {
        return -1;
      }
    }
  }

  return r;
} 
```

以下测试此功能：

```
_wprintf(L"\xA0\xA1\xA2\xA3\xA4\xA5\xA6\xA7"
         L"\xA8\xA9\xAA\xAB\xAC\xAD\xAE\xAF"
         L"\xB0\xB1\xB2\xB3\xB4\xB5\xB6\xB7"
         L"\xB8\xB9\xBA\xBB\xBC\xBD\xBE\xBF"
         L"\n"
         L"\xC0\xC1\xC2\xC3\xC4\xC5\xC6\xC7"
         L"\xC8\xC9\xCA\xCB\xCC\xCD\xCE\xCF"
         L"\xD0\xD1\xD2\xD3\xD4\xD5\xD6\xD7"
         L"\xD8\xD9\xDA\xDB\xDC\xDD\xDE\xDF"
         L"\n"
         L"\xE0\xE1\xE2\xE3\xE4\xE5\xE6\xE7"
         L"\xE8\xE9\xEA\xEB\xEC\xED\xEE\xEF"
         L"\xF0\xF1\xF2\xF3\xF4\xF5\xF6\xF7"
         L"\xF8\xF9\xFA\xFB\xFC\xFD\xFE\xFF"
         L"\n");

_wprintf(L"\x391\x392\x393\x394\x395\x396\x397"
         L"\x398\x399\x39A\x39B\x39C\x39D\x39E\x39F"
         L"\x3A0\x3A1\x3A2\x3A3\x3A4\x3A5\x3A6\x3A7"
         L"\x3A8\x3A9\x3AA\x3AB\x3AC\x3AD\x3AE\x3AF\x3B0"
         L"\n"
         L"\x3B1\x3B2\x3B3\x3B4\x3B5\x3B6\x3B7"
         L"\x3B8\x3B9\x3BA\x3BB\x3BC\x3BD\x3BE\x3BF"
         L"\x3C0\x3C1\x3C2\x3C3\x3C4\x3C5\x3C6\x3C7"
         L"\x3C8\x3C9\x3CA\x3CB\x3CC\x3CD\x3CE"
         L"\n");

_wprintf(L"\x410\x411\x412\x413\x414\x415\x401\x416\x417"
         L"\x418\x419\x41A\x41B\x41C\x41D\x41E\x41F"
         L"\x420\x421\x422\x423\x424\x425\x426\x427"
         L"\x428\x429\x42A\x42B\x42C\x42D\x42E\x42F"
         L"\n"
         L"\x430\x431\x432\x433\x434\x435\x451\x436\x437"
         L"\x438\x439\x43A\x43B\x43C\x43D\x43E\x43F"
         L"\x440\x441\x442\x443\x444\x445\x446\x447"
         L"\x448\x449\x44A\x44B\x44C\x44D\x44E\x44F"
         L"\n"); 
```

并且应该在控制台中产生以下文本：

```
¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿
ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞß
àáâãäåæçèéêëìíîïðñòóôõö÷øùúûüýþÿ
ΑΒΓΔΕΖΗΘΙΚΛΜΝΞΟΠΡ΢ΣΤΥΦΧΨΩΪΫάέήίΰ
αβγδεζηθικλμνξοπρςστυφχψωϊϋόύώ
АБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ
абвгдеёжзийклмнопрстуфхцчшщъыьэюя 
```

我不知道您的 IDE 在 .c/.cpp 文件中存储非 ASCII 字符的编码，也不知道您的编译器在遇到非 ASCII 字符时会做什么。这部分你应该自己弄清楚。

只要您提供`_wprintf()`正确编码的 UTF-16 文本或`WriteConsoleA()`使用正确编码的 UTF-8 文本调用，一切都应该正常。

PS 一些关于控制台字体的血腥细节可以在[这里](http://blogs.microsoft.co.il/blogs/pavely/archive/2009/07/23/changing-console-fonts.aspx)找到。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-29T11:38:22.410

Windows 控制台在字符编码方面通常被认为严重损坏。[例如，您可以在此处](http://mercurial.selenic.com/wiki/CharacterEncodingOnWindows)阅读有关此问题的信息。

问题是Windows通常使用ANSI代码页（假设您在西欧或美国Windows-1252），但控制台使用OEM代码页（CP850在相同假设下）。

你有几个选择：

*   在写入之前将文本转换为 CP850（请参阅 参考资料`CharToOem()`）。缺点是如果用户将输出重定向到文件 ( `> file.txt`) 并使用例如记事本打开文件，他会发现它是错误的。
*   更改控制台的代码页：您需要选择 TTF 控制台字体（例如 Lucida Console）并使用命令`chcp 1252`.
*   使用 UNICODE 文本和`wprintf()`：无论如何，您都需要 TTF 控制台字体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T13:28:34.940

Windows 控制台模式使用的[Windows-1252](http://en.wikipedia.org/wiki/Windows-1252)（也称为“ANSI”）字符集与 GUI 应用程序使用的字符集不同。因此，IDE 表示不同于运行时表示。

您的示例的快速而肮脏的解决方案是：

```
printf("my name is Se\xe9n\n"); 
```

这个问题的大多数解决方案都存在某种缺陷，对于需要大量多语言本地化的 Windows 应用程序，最简单的解决方案是使用 Unicode 将它们编写为 GUI 应用程序。

# c - 如何在C中传递一个char数组？

> ID：12652317
> 
> 赞同：0
> 
> 时间：2012-09-29T11:30:09.857
> 
> 标签：c, list

我有这个基本的链表结构：

```
struct node
{
    char *name;
    float salary;
    struct node *nextNode;
};

struct list
{
    struct node *firstNode;
}; 
```

这是我的`insert`功能：

```
void insert(struct list *pList, char *newName, float newSalary)
{
    struct node *newNode;
    newNode = (struct node *)malloc(sizeof(struct node));

    newNode->salary = newSalary;
    newNode->name = newName;

    if (pList->firstNode == NULL)
    {
        pList->firstNode = newNode;
        newNode->nextNode = NULL;
    }

    else
    {
        struct node *pos = pList->firstNode;
        for(; pos->nextNode; pos = pos->nextNode);
        pos->nextNode = newNode;
        newNode->nextNode = NULL;
    }

} 
```

这是我的`main()`：

```
int main(void)
{
    struct list lst;
    struct list *plst = &lst;

    createList(plst); //initializes the list

    char name1[] = "John";
    char name2[] = "Thomas";
    char name3[] = "Albert";

    insert(plst, name1, 1000);
    insert(plst, name2, 2000);
    insert(plst, name3, 3000);
} 
```

除了 char 数组的传输之外，一切都很好。我认为传递 char 数组的最佳方法是传递指向 char 数组中第一个 char 的指针，但我看不出我做错了什么。

另外，首先创建一个新的`node`然后将指向 this 的指针传递`node`给`insert`函数会更好吗？它很相似，但也许更容易接受？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T11:38:25.427

```
newNode->name = newName; 
```

这不是复制 c 字符串的正确方法。使用`strcpy`或`strncpy`：

```
strcpy(newNode->name,newName); 
```

正如@Pablo 指出的那样，您没有为字符串分配内存，因此首先分配然后复制：

```
newNode->name = malloc(strlen(newName)+1);
strcpy(newNode->name,newName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T11:39:15.657

代码对我来说似乎很好。*但是，除了 char 数组的传输之外，*您所说的效果很好是什么意思？您是否收到错误、段错误、意外情况，如果有，那是什么？

# asp.net - 在 DotNetNuke 的 Homepage.ascx 中添加 Javascript

> ID：12652318
> 
> 赞同：1
> 
> 时间：2012-09-29T11:30:25.933
> 
> 标签：asp.net, .net, dotnetnuke, dotnetnuke-5

我只想在 DNN homepage.ascx 文件中添加一个小 Javascript：

```
<script type="text/javascript">

//jkmegamenu.definemenu("anchorid", "menuid", "mouseover|click")
jkmegamenu.definemenu("megaanchor", "megamenu1", "mouseover")

</script> 
```

请高手帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T12:34:25.807

Hy Phillip 您必须在页面设置 - 高级设置 - 页面标题标签文本框中插入脚本或更改 .\portals_default\skins\DarkKnight\<>.ascx 中的 .ascx 文件

问候。Claudio Venturili DotNetNuke.it 员工

# wcf-data-services - WCF 数据服务配置

> ID：12652319
> 
> 赞同：0
> 
> 时间：2012-09-29T11:30:30.200
> 
> 标签：wcf-data-services

我发现要从 WCF 数据服务获取错误详细信息，我应该`config.UseVerboseErrors = true`在`InitializeService`. （我是 WCF 数据服务的新手）

似乎`config`类中的设置应该是硬编码的，我认为硬编码像`UseVerboseErrors`. web.config 中有没有这方面的部分？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T08:00:28.070

目前 .config 文件中没有对应的内容。另一方面，自己编写代码非常容易。无需在 InitializeService 中分配常量值，只需分配从配置文件中提取的值。

# c - C中的双向链表快速排序

> ID：12652328
> 
> 赞同：0
> 
> 时间：2012-09-29T11:31:09.800
> 
> 标签：c, quicksort

任何人都可以在这里帮助我，因为我不知道为什么我的排序功能对除头部之外的所有列表进行排序？这是输出：

> Forward way: 208 1 87 116 149 238 284 304 327 410 426 523 552 583 625 695 803 848 853 944
> Reverse way: 944 853 848 803 695 625 583 552 523 426 410 327 304 284 238 149 116 87 1 208

如您所见，它只是在 208 之后插入，并且即使它对所有列表进行排序，它也会保留 208。这是排序前的实际列表：

> Forward way: 208 523 284 410 304 426 583 848 552 803 87 238 1 695 853 149 625 944 327 116
> Reverse way: 116 327 944 625 149 853 695 1 238 87 803 552 848 583 426 304 410 284 523 208

这是我的代码：

```
void list_ins_aft ( node_t *old ,node_t *new )
{

  if ( old->next != NULL )
  {
    old->next->prev = new;
  }
  new->next = old->next;
  new->prev = old ;

  old->next = new ;
}

void list_detach( node_t *n , dlist_t *nlst)
{

  if (n->prev == NULL)
  {
    nlst->head = n->next;
  }
  else 
  {
    n->prev->next = n->next;
  }

  if(n->next == NULL )
  {
    nlst->tail = n->prev;
  } 
  else
  {
    n->next->prev = n->prev;
  }
}

void qsort_segment ( node_t *t1 , node_t *t2 , dlist_t *lst)
{

  /* skip 0 or 1 lengh segment */
  if ( t1 == t2 || t1->next == t2 )
    return;
  /*define pivot and make sure its the first element 
   * so put the less before pivot and bigger after pivot
   * */
  node_t *piv;
  piv = t1->next;
  node_t *s,*b,*temp = piv , *x  = t2 ? t2->next : NULL ;

  for ( s = piv->next ; s != x ; s = b )
  {

    b = s->next ;

    list_detach ( s ,lst ) ;

    if ( s->value < piv->value )
    {
      list_ins_aft(t1 , s );
    }
    else 
    {
      list_ins_aft ( piv , temp == piv ? ( temp = s ) : s );
    }
  }

  /* now sort new segments on right and left sides of pivot the same way */
  qsort_segment ( piv , temp ,lst );
  qsort_segment ( t1 , piv->prev , lst);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T13:38:24.763

您最初可能将其称为包含指向第一个响应的和指针的`qsort_segment(list.head, list.tail, &list);`位置。列表中的最后一个元素。`list``dlist_t``head``tail`

```
/*define pivot and make sure its the first element 
* so put the less before pivot and bigger after pivot
* */
node_t *piv;
piv = t1->next; 
```

这并不像评论中所说的那样，它将枢轴设置为列表中的第二个元素。考虑到您的递归调用，其意图似乎是`t1`指向要排序的部分之前的元素，以及`t2`该部分中的最后一个元素。但是在列表的前面，第一个之前没有元素。所以

```
 if ( s->value < piv->value )
    {
      list_ins_aft(t1 , s );
    } 
```

确保列表中的第一个节点在整个排序过程中保持不变。

您需要某种方法在列表的前面插入一个元素，无论是`list_ins_bef`模仿函数`list_ins_aft`还是显式`list_ins_front(node_t *new, dlist_t *lst)`.

# maven - 处理许可证的 Maven 插件？

> ID：12652332
> 
> 赞同：4
> 
> 时间：2012-09-29T11:31:41.460
> 
> 标签：maven, licensing

由于 Maven pom 可以包含许可证信息，是否有某种方式可以例如告诉您的构建“Apache v2”许可证是可以的，但 GPL 例如不是，并且当您构建 Maven 时，如果需要的依赖项具有禁止的许可证和最终要求你接受未知的？

我知道有可用的插件可以创建项目中所有已使用许可证的报告，但我找不到一个真正允许您定义什么是好的，什么不是的插件，如果它不知道则要求确认.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-04T12:54:03.320

Mojohaus（前 Codehaus）有相当灵活和成熟的[许可证插件](http://mojohaus.org/license-maven-plugin/)，应该可以完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T12:32:29.620

您是否正在寻找有关如何配置 maven-license-plugin 的信息？检查[此链接](http://code.google.com/p/maven-license-plugin/wiki/Configuration)

下面是一个使用示例：

```
<build>
    <plugins>
        <plugin>
            <groupId>com.mycila.maven-license-plugin</groupId>
            <artifactId>maven-license-plugin</artifactId>
            <configuration>
                <basedir>${basedir}</basedir>
                <header>${basedir}/src/etc/header.txt</header>
                <validHeaders>
                    <validHeader>/otherSupportedHeader.txt</validHeader>
                    <validHeader>http://www.company.com/yetAnotherSupportedHeader.txt</validHeader>
                </validHeaders>
                <quiet>false</quiet>
                <failIfMissing>true</failIfMissing>
                <aggregate>false</aggregate>
                <includes>
                    <include>src/**</include>
                    <include>**/test/**</include>
                </includes>
                <excludes>
                    <exclude>target/**</exclude>
                    <exclude>.clover/**</exclude>
                </excludes>
                <useDefaultExcludes>true</useDefaultExcludes>
                <mapping>
                    <jwc>XML_STYLE</jwc>
                    <application>XML_STYLE</application>
                    <myFileExtension>JAVADOC_STYLE</myFileExtension>
                </mapping>
                <useDefaultMapping>true</useDefaultMapping>
                <properties>
                    <year>${project.inceptionYear}</year>
                    <email>my@email.com</email>
                </properties>
                <encoding>UTF-8</encoding>
                <headerDefinitions>
                    <headerDefinition>def1.xml</headerDefinition>
                    <headerDefinition>def2.xml</headerDefinition>
                </headerDefinitions>
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>check</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T12:54:49.940

在这种情况下，我假设您正在谈论依赖项的许可证。为此，您可以查看[Maven License Verifier Plugin](http://khmarbaise.github.com/Maven-License-Verifier-Plugin/)，它可以准确地检查这些内容。最好看一下[示例部分](http://khmarbaise.github.com/Maven-License-Verifier-Plugin/example.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-05T12:32:47.433

我想我找到了我正在寻找的工具：http: [//www.sonatype.com/clm/overview](http://www.sonatype.com/clm/overview) 但该解决方案不仅包含一个 maven 插件，而且它提供了我正在寻找的服务，甚至更多。

# ios - 情节提要使用 segue 将数据从视图控制器传递到选项卡栏

> ID：12652334
> 
> 赞同：4
> 
> 时间：2012-09-29T11:31:56.327
> 
> 标签：ios, xcode, storyboard, uistoryboardsegue

我在标签栏控制器之前有一页（比如 X），它使用模型 segue 打开标签栏控制器。标签栏控制器的第一个屏幕也与 X 相同。

> 我想将数据从 X 传递到标签栏控制器的第一页。

很快，我想将数据从视图控制器传递到带有情节提要 segue 的标签栏控制器页面。有什么方法吗？

这是解决方案；

```
 locationsHome* vc = [[locationsHome alloc] init];
    UITabBarController* tbc = [segue destinationViewController];
    vc = (locationsHome *)[[tbc customizableViewControllers] objectAtIndex:0]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T07:14:22.693

这就是我解决问题的方法。您可以使用此方法将数据从 ViewController 传递到 TabBarController。

`prepareForSegue`在方法中使用此代码

```
locationsHome* vc = [[locationsHome alloc] init];
UITabBarController* tbc = [segue destinationViewController];
vc = (locationsHome *)[[tbc customizableViewControllers] objectAtIndex:0]; 
```

像这样：

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

    NSString * segueIdentifier = [segue identifier];
    if([segueIdentifier isEqualToString:@"tabbarGo"]){

        locationsHome* vc = [[locationsHome alloc] init];
        UITabBarController* tbc = [segue destinationViewController];
        vc = (locationsHome *)[[tbc customizableViewControllers] objectAtIndex:0];

        etc...

    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-24T07:01:54.210

```
//if sent to First Tab of Tab Bar Controller
UITabBarController *tabBarController = segue.destinationViewController;
UINavigationController *navigationController = (UINavigationController *)[[tabBarController viewControllers] objectAtIndex:0];
createTeamViewController *controller = (createTeamViewController *)[[navigationController viewControllers] objectAtIndex:0];

controller.userProfile = self.userProfile; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T12:33:11.500

向目标视图控制器（子类标签栏控制器）添加一个属性，然后在源视图控制器中，实现[`prepareForSegue`](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/ManagingDataFlowBetweenViewControllers/ManagingDataFlowBetweenViewControllers.html#//apple_ref/doc/uid/TP40007457-CH8-SW4)将信息传递给目标控制器。然后，您可以让目标视图控制器对源视图控制器`viewDidLoad`中传递给它的数据采取行动。`prepareForSegue`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-06T13:36:57.137

对于**Swift 2.2**，我不得不以这种方式修改接受的答案

```
override func prepareForSegue(segue: UIStoryboardSegue, sender: AnyObject?)
{
    if (segue.identifier == "userAccountSegue")
    {
        var firstTabViewController: UserAccountViewController = UserAccountViewController()
        let tabViewController: UITabBarController = segue.destinationViewController as! UITabBarController
        firstTabViewController = (tabViewController.customizableViewControllers![0] as! UserAccountViewController)
        firstTabViewController.userObj = arrayForTable![selectedIndex] as? User

    }
} 
```

注意：上述代码片段的提示

*   **用户**是我的**模型**对象存储用户信息
*   **我的视图控制器 segue 使用 segue =“ userAccountSegue** ”连接到情节提要中的 TabViewContoller

# python - Vertx SockJS 服务器与 sockjs-tornado

> ID：12652336
> 
> 赞同：2
> 
> 时间：2012-09-29T11:32:04.413
> 
> 标签：python, tornado, vert.x, sockjs

我一直在检查两个类似的解决方案，以使用独立的 Python 服务器通过 sockJS 支持 Web 套接字，到目前为止，我找到了两个解决方案。

我需要编写一个复杂的、可扩展的基于 Web 套接字的 Web 应用程序，而且恐怕很难扩展 Tornado，而且似乎 Vertx 对 Web 套接字的水平扩展更好。

我也知道 Redis 可以与 Tornado 一起用于水平扩展 pub/sub 系统，以及 HAproxy 用于扩展 SockJS 请求。

在 Vertx 和 Tornado 之间，编写支持 SockJS 的可扩展系统的首选解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T09:46:50.620

Vertx 具有内置的集群支持。我还没有在很多节点上尝试过，但它似乎在少数节点上运行良好。在内部，它使用 hazelcast 来组织节点。Vertx 也在 JVM 上运行，它已经有许多可能有用的监控/管理工具。所以 Vertx 在我看来就像“包含电池”的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-09T16:26:44.177

您还可以使用 Sockjs Tornado + Rabbit MQ + Memcached 来进行水平扩展。RabbitMQ broker 将扮演从物理服务器 A 到物理服务器 B 的消息总线的角色。有关服务器的所有信息都可能存储在 memcache 中。例如，您需要将消息 M 从客户端套接字 C1(A) 发送到客户端套接字 C2(B)：

*   如果 A 的接收者托管在同一台服务器上（通过检查 memcache），则使用 SockJS 路由器直接发送 msg
*   否则通过 RabbitMQ 代理 B1(A)（通过使用路由逻辑）将 M 发送到 B2(A)，其中 SockJS 路由器 B 可以直接将您的消息发送到原始接收器 C2(B)。

由于 RabbitMQ 的 AMQP 协议使用 Erlang，消息传递非常稳定，非常适合高负载的分布式应用程序。为了支持我的话，请看这里：[http ://www.rabbitmq.com/blog/2012/04/25/rabbitmq-performance-measurements-part-2/](http://www.rabbitmq.com/blog/2012/04/25/rabbitmq-performance-measurements-part-2/)

每个物理服务器（具有以下电源 Xenon 4 节点，MEM 4Gb，HDD-140 -1000Gb）可以处理 3-5 个 sockjs tornado 实例。SockJS 实现也很好地通过 url 中的附加参数利用了反向代理（HaProxy）。

对于分布式测试，您可以使用 gemetr 或 tsung（基于 erlang）。

我在几个分布式应用程序中使用了这种方法。

此外，不要忘记使用 Tornado 内存作为 L1 缓存。

# c# - 从许多动态生成的用户控件中定义的文本框中获取值

> ID：12652341
> 
> 赞同：1
> 
> 时间：2012-09-29T11:33:13.787
> 
> 标签：c#, user-controls, textbox, dynamically-generated

我正在用 c# 开发一个医疗商店应用程序。在其帐单生成期间，将打开以下窗口，该窗口使用名为 MediRow 的动态生成的用户控件添加项目。 ![在此处输入图像描述](../Images/412c84295d85bc8f55e7252866363b28.png) MediRow 包含一个数量的文本框。当文本框的值更改时，主窗口上的总金额标签应将所有生成的 MediRow 控件的文本框中输入的数量相加。我将以下代码添加到后台工作人员中，该工作人员检查所有文本框值并将它们相加，但它不起作用。

```
double amt = 0;
            foreach (Control c in panel1.Controls)
            {
                amt = amt + long.Parse(((MediRow)c).Controls.Find("textBox1",true)[0].Text);
            }
            lblAmt.Text = amt.ToString(); 
```

请告诉我如何在运行时动态获取这些文本框值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T11:38:13.497

我认为您需要通过**公共属性公开 TextBox 值**

**编辑：**

```
class MyCustomItem 
{ 

  public string ItemName 
  { 
    get { return TxtName.Text; } 
  } 

  public string ItemQuantity 
  { 
    get { return TxtQuantity.Text; } 
  }

  // other logic here
} 
```

# javascript - 在javascript中将css值分配给UpdateProgress

> ID：12652342
> 
> 赞同：0
> 
> 时间：2012-09-29T11:33:24.860
> 
> 标签：javascript, asp.net, updateprogress

我正在使用以下代码将值分配给 asp.net updateprogress 控件，但没有运气

```
 <script type="text/javascript">
  var updateProgress=document.getElementById ('<%=UpdateProgressLinkActivity.ClientID%>');
   updateProgress.style.position='absolute';
   updateProgress.style.width='250px';
   updateProgress.style.height='100px';
   updateProgress.style.top='0px';
   updateProgress.style.left='0px';
  </script> 
```

控件名称是复制粘贴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T11:40:35.990

您在函数中添加此代码并在事件中添加此代码（例如 onload）

```
<script type="text/javascript">
function VisibledProgress()
{
   var updateProgress=document.getElementById ('<%=UpdateProgressLinkActivity.ClientID%>');
   updateProgress.style.position='absolute';
   updateProgress.style.width='250px';
   updateProgress.style.height='100px';
   updateProgress.style.top='0px';
   updateProgress.style.left='0px';
} 
 </script> 
```

您的代码 Aspx ：

```
<asp:Button OnClientClick="VisibledProgress()" ..../> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T12:00:02.117

请试试这个：

```
var updateProgress=document.getElementById ('<%=UpdateProgressLinkActivity.ID%>'); 
```

或者

用这个：

```
<asp:UpdateProgress value="your getting cliend id" ID="UpdateProgressLinkActivity" runat="server" AssociatedUpdatePanelID="UpdatePanelLinkActivity" DynamicLayout="True"> <ProgressTemplate> <div style=" position:absolute; top:50%; left:50%; background-color:white;" id="divLoading"> <img src="Images/loading25.gif" alt="Loading..." style="" /> </div> </ProgressTemplate> </asp:UpdateProgress> 
```

指定值 =“您正在获取的客户 ID。”

并使用 jquery -- var updateProgress = $("#UpdateProgressLinkActivity").val();

# python - 无法识别 Django 错误

> ID：12652353
> 
> 赞同：1
> 
> 时间：2012-09-29T11:35:09.423
> 
> 标签：python, django

看到以下语法错误，但 urls.py 文件似乎是正确的。我错过了什么？

```
SyntaxError at /admin/
invalid syntax (urls.py, line 6)
Request Method: GET
Request URL:    http://127.0.0.1:8000/admin/
Django Version: 1.4.1
Exception Type: SyntaxError
Exception Value:    
invalid syntax (urls.py, line 6)
Exception Location: /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/utils/importlib.py in import_module, line 35
Python Executable:  /Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python
Python Version: 2.7.2 
```

这是 urls.py：

```
from django.conf.urls.defaults import *
from events import views

from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    (r'^events/', include('events.urls')),
    (r'^admin/', include(admin.site.root)),
) 
```

...

```
from django.conf.urls.defaults import *
from events import views

urlpatterns = patterns('',
    url(r'^create/$', views.create, name='ev_create')
    url(r'^tonight/$', views.tonight, name='ev_tonight'),   
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T11:39:29.837

您缺少一个逗号：

```
urlpatterns = patterns('',
    url(r'^create/$', views.create, name='ev_create')     # <-- comma missing
    url(r'^tonight/$', views.tonight, name='ev_tonight'),   
) 
```

请注意，这是在您的模块的第 5 行，但 Python 只能在第 6 行遇到您调用`urls.py`后不合适的内容时才能发现它。`url(...)`

# java - 如何在 Java 字符串中找到给定单词的存在？

> ID：12652354
> 
> 赞同：-5
> 
> 时间：2012-09-29T11:35:21.030
> 
> 标签：java, string

> **另请参阅：**
> [Java 1.4 中如何查看子字符串是否存在于另一个字符串中 在另一个字符串中搜索](https://stackoverflow.com/questions/687577/how-to-see-if-a-substring-exists-inside-another-string-in-java-1-4)
> [一个字符串](https://stackoverflow.com/questions/2940114/searching-for-one-string-in-another-string)
> [如何在另一个字符串中搜索一个字符串？](https://stackoverflow.com/questions/9276040/how-to-search-a-string-in-another-string)

我有两个字符串，如下所示：

```
String str1 = "He is doing very good";
String str2 = "doing"; 
```

我想知道如何在 string 中找到“doing”一词`str1`，即使`str1`更改如下：

```
str1 = "He isdoing very good"; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T11:36:16.463

最简单的方法是

```
str1.contains(str2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T11:37:07.100

[String.contains](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)方法怎么样？

# c++ - MDI 窗口和 QSignalMapper 基础知识

> ID：12652356
> 
> 赞同：1
> 
> 时间：2012-09-29T11:35:38.413
> 
> 标签：c++, qt

首先，我为看起来很大的问题道歉，但事实并非如此。我正在阅读《qt 开发基础》一书，在阅读第四章时，作者通过展示以下示例讲述了 MDI 窗口的基础知识：

```
MdiWindow::MdiWindow( QWidget *parent ) : QMainWindow( parent ) {
  setWindowTitle( tr( "MDI" ) );
  QWorkspace* workspace = new QWorkspace;
  setCentralWidget( workspace );
  connect( workspace, SIGNAL(windowActivated(QWidget *)), this, SLOT(enableActions()));
  QSignalMapper* mapper = new QSignalMapper( this );

  //my problem is in this line
  connect( mapper, SIGNAL(mapped(QWidget*)), workspace, SLOT(setActiveWindow(QWidget*)) );

  createActions();
  createMenus();
  createToolbars();
  statusBar()->showMessage( tr("Done") );
  enableActions();
} 
```

他的这段解释完全让我无法理解（是我还是其他人也有理解问题？）：

> 接下来，创建并连接一个名为 QSignalMapper 的信号映射对象。信号映射器用于将信号源与另一个信号的参数联系起来。在本例中，Window 菜单中每个窗口对应的菜单项的操作与实际的文档窗口相关联。这些动作又连接到映射器。当动作发出触发信号时，发送动作已经与对应文档窗口的QWidget*相关联。该指针用作信号映射对象发出的 mapped(QWidget*) 信号中的参数。

**我的问题**：我仍然不明白什么是信号映射器类，它是如何使用的以及在上面的示例中它的功能是什么？任何人都可以用简单的术语解释上述段落吗？如果你能用简单的例子教我关于映射器类的基础知识，那会很棒吗？可能用外行的话？

**PS**：一个困惑是当我们有 MDI 窗口时，菜单是否更改（尽管操作被禁用/启用）例如假设对于一个特定文档我们有菜单“文件/关闭”而对于其他文档我们有“文件/重映射器”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T15:54:39.220

`QSignalMapper`用于重新发出带有可选参数的信号。换句话说（来自[文档](http://qt-project.org/doc/qt-4.8/qsignalmapper.html)）：

> 此类收集一组无参数信号，并使用与发送信号的对象相对应的整数、字符串或小部件参数重新发出它们。

一个很好的例子（也来自文档 - 看看它）设置如下：

> 假设我们要创建一个包含一组按钮的自定义小部件（如工具面板）。一种方法是将每个按钮的 clicked() 信号连接到其自己的自定义插槽；但在本例中，我们希望将所有按钮连接到单个插槽，并通过单击的按钮对插槽进行参数化。

所以想象一下，你有许多按钮封装在一个类中，比如说`ButtonWidget`，带有一个自定义信号`void clicked(const QString &text)`。这是定义：

```
class ButtonWidget : public QWidget {
  Q_OBJECT

public:
  ButtonWidget(QStringList texts, QWidget *parent = 0);

signals:
  void clicked(const QString &text);

private:
  QSignalMapper *signalMapper;
}; 
```

然后可以像下面这样定义构造函数：

```
ButtonWidget::ButtonWidget(QStringList texts, QWidget *parent)
  : QWidget(parent)
{
  signalMapper = new QSignalMapper(this);

  QGridLayout *gridLayout = new QGridLayout;
  for (int i = 0; i < texts.size(); ++i) {
    QPushButton *button = new QPushButton(texts[i]);
    connect(button, SIGNAL(clicked()), signalMapper, SLOT(map()));
    signalMapper->setMapping(button, texts[i]);
    gridLayout->addWidget(button, i / 3, i % 3);
  }

  connect(signalMapper, SIGNAL(mapped(const QString &)),
          this, SIGNAL(clicked(const QString &)));

  setLayout(gridLayout);
} 
```

那么这里会发生什么？我们构建了一个网格布局和我们的按钮类型`QPushButton`。这些`clicked()`中的每一个的信号都连接到信号映射器。

使用的力量之一`QSignalMapper`是您可以将参数传递给重新发出的信号。在我们的示例中，每个按钮都应该发出不同的文本（由于我们信号的定义），所以我们使用`setMapping()`方法设置它。

现在剩下要做的就是将信号映射器映射到我们类的信号：

```
connect(signalMapper, SIGNAL(mapped(const QString &)),
        this, SIGNAL(clicked(const QString &))); 
```

假设我们有一个名为`TestClass`then的测试类，`ButtonWidget`可以这样使用：

```
TestClass::TestClass() {
  widget = new ButtonWidget(QStringList() << "Foo" << "Bar");
  connect(widget, SIGNAL(clicked(const QString &)),
          this, SLOT(onButtonClicked(const QString &)));
}

void TestClass::onButtonClicked(const QString &btnText) {
  if (btnText == "Foo") {
    // Do stuff.
  }
  else {
    // Or something else.   
  }
} 
```

通过以这种方式使用信号映射器，您不必声明和管理所有按钮及其单击的信号，只需一个信号 pr。`ButtonWidget`.

最重要的是，信号映射器非常适合捆绑多个信号，您甚至可以在重新发射信号时设置参数。我希望对`QSignalMapper`.

* * *

**您的示例代码**

解释（您的“para”）指出所有操作都单独映射到特定的`QWidget*`. 当触发一个动作时，其各自`QWidget*`将被传递到 的插槽`QWorkspace::setActiveWindow(QWidget*)`，`workspace`这反过来又激活了小部件。

另请注意，从操作到小部件的映射必须发生在代码中的某个位置。我认为它已经完成`createActions()`或`enableActions()`可能完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T16:00:00.493

QSignalMapper允许您在需要时向信号添加一些信息[。](http://qt-project.org/doc/qt-4.8/qsignalmapper.html)这个对象内部有一个像`QMap<QObject*,QVariant>`. 然后将一个对象连接到它，当调用槽时，它会重新发出具有相关值的信号。

工作流程：

```
mySignalMapper:
    [ obj1 -> 42       ]
    [ obj2 -> "obiwan" ]
    [ obj3 -> myWidget ]

connect(obj1,mySignal,mySignalMapper,SLOT(map())); // idem for obj2 and obj3

(obj2 emits "mySignal")
-> (mySignalMapper::map slot is called)
-> (sender() == obj2, associated data = "obiwan")
-> (mySignalMapper emits mapped("obiwan")) 
```

我打算添加一个更详细的示例，但 Morten Kristensen 比我快；）

# facebook - 从另一个域登录到 facebook 或 google

> ID：12652357
> 
> 赞同：-1
> 
> 时间：2012-09-29T11:35:42.363
> 
> 标签：facebook, login, request

无论如何，我从另一个域站点将用户登录到 facebook 和 google gmail？

还是有特定的 API 可以做到这一点？

我不是在谈论 fb 登录或连接或谷歌登录 API，我是在谈论“触发”登录表单或向网站发起请求以登录用户。

我想让用户能够从另一个站点登录到 facebook，设置 cookie，所以当他返回 facebook 时，他将被登录，反之亦然。

如果存在，是否合法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T11:42:42.247

那是不可能的，因为 Facebook 是发布 cookie 的人，我认为有可能生成一个 cookie 让您登录 Facebook，但这是非法的。迅速

# asp.net - 当可以从多个路径访问我的网页时，如何使用 web.sitemap 生成我的页面面包屑？

> ID：12652358
> 
> 赞同：1
> 
> 时间：2012-09-29T11:35:53.373
> 
> 标签：asp.net, breadcrumbs, web.sitemap

我正在使用`web.sitemap`在我的网站中生成面包屑，但我有一个可以使用多个路径导航的页面。

有没有一种方法可以支持多条路径使用`web.sitemap`？如果没有，有什么替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T12:47:47.883

标准且有效的 web.sitemap 不能有重复的 url，所以

我可以想到 3 个解决方案：

1-将一条路径作为标准路径并在您的 web.sitemap 中定义

2- 另一种选择是根据用户访问页面的方式以编程方式设置 SiteMapPath 控件的链接 url。

3-另一个解决方案可能是使用 Url-rewriting 。为以该页面结尾的每个路径创建一个单独的 url 。这样你可以避免重复的网址

# ios - 如何处理订阅用户的 iOS 应用内购买

> ID：12652363
> 
> 赞同：0
> 
> 时间：2012-09-29T11:36:22.300
> 
> 标签：ios, cordova, in-app-purchase

我是 iOS 开发的新手。

我正在使用 phonegap-plugin 实现 iOS 应用内购买应用。

如何查找登录用户是否已订阅？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:29:21.760

您应该在 inAppPurchaseManager 的回调中记录他们的订阅状态。即， `window.plugins.inAppPurchaseManager.onPurchased`

如果您的应用没有后端，我建议使用[ApplicationPreferences](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/ApplicationPreferences)插件来存储用户的订阅状态。

# mysql - 更改列的日期格式并基于其他列创建新列

> ID：12652370
> 
> 赞同：1
> 
> 时间：2012-09-29T11:37:43.803
> 
> 标签：mysql, date-format

我有一列“日期”及其格式（Ymd -time）。我需要使用 SQL 查询创建一个新列，它将与“日期”列相同，但它的格式将是 (Ymd) 仅不是小时等。

我想用 GROUP BY 对它们进行分组。我该如何编写这个查询？我必须创建一个临时列才能看到它们分组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T11:44:14.960

采用**[`DATE_FORMAT`](http://davidwalsh.name/format-date-mysql-date_format)**

```
SELECT DATE_FORMAT(columnName, '%Y-%m-%d') 
```

# gwt - GWT ClientBundle 缓存如何工作？

> ID：12652371
> 
> 赞同：3
> 
> 时间：2012-09-29T11:37:45.187
> 
> 标签：gwt, clientbundle

我试图更好地理解 GWT ClientBundle 和缓存的使用。

例如，如果我有一个大文本文件，我想提供给我的客户，我可以使用

```
public interface MyResources extends ClientBundle {
    public static final MyResources INSTANCE =  GWT.create(MyResources.class);    
      @Source("myText.txt")
      public TextResource myText();
}
//-- then later to use the text
String text = MyResources.INSTANCE.myText().getText(); 
```

这是否意味着客户端第一次运行应用程序时会从服务器下载文件“myText.txt”，然后将该文件存储在浏览器的缓存中，以便将来使用该应用程序时，该文件不会需要下载吗？

如果是这样，如果我更改“myText.txt”会发生什么，应用程序是否知道获取新版本？

最后，如果文件确实存储在缓存中，那么这与 HTML5 中的本地存储有何不同？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T17:33:00.123

*   正如 Daniel Kurka 已经提到的，资源可以内联在 js 文件（一个`*.cache.*`文件）中，其余已编译的 GWT 代码所在的位置。
*   客户端捆绑包中的所有资源都不会发生内联。例如，大图像永远不会内联，也可以使用 来防止`@ImageOptions.preventInlining()`，并且不会发生在 ExternalTextResources 中。

这两种情况的共同点是，结果将在`*.cache.*`文件中，其唯一名称会在源文件内容更改时自动更改（尽管您必须重新编译 GWT 应用程序！）

[这允许服务器使用适当的缓存 HTTP 标头](https://stackoverflow.com/q/2970938/291741)传递这些文件（您必须自己设置！）对于客户端，这意味着它不仅能够缓存内容（无论如何它都会缓存内容，即使这些标头未设置），但如果存在较新版本，它甚至可以跳过询问服务器。

ClientBundles 的一大优点是文件名会自动更改。最大的缺点是，当资源更改时，您*必须重新编译 GWT 应用程序。*如果您不希望这样，那么最好使用其他方法来加载文件：您仍然可以让浏览器缓存您喜欢的任何文件（通过设置 HTTP 标头），但是您必须小心当内容发生变化时，手动给它们一个新名称。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-29T15:27:38.523

如果您希望按需加载而不是作为已编译 JavaScript 的一部分，则应使用外部文本资源。

[https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#TextResource](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#TextResource)

如果您的用户需要整个文件，请使用一个文本资源。如果用户需要其中的一部分，请将此文件拆分为单独的较小文件：仅在需要时加载请求的文件。

外部文本资源可以像所有其他静态文件一样被缓存。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-29T12:35:41.340

clientbundle 中的文件被内联到您编译的 javascript 中。它们不会单独下载。如果您想在给定时间下载资源，您可以轻松地为此使用请求生成器。

如果您不想立即下载文件但仍想内联它，则可以使用代码拆分并将包放入应用程序的另一部分。

# asp.net-mvc - 如何在放置信息文件中确定包装器的位置（相对于模块而不是主题文件夹）？

> ID：12652372
> 
> 赞同：1
> 
> 时间：2012-09-29T11:37:53.900
> 
> 标签：asp.net-mvc, c#-4.0, orchardcms

我正在尝试将文件指定为文件中特定的`cshtml`包装器。`ContentType``placementinfo`

我的定义如下所示：

```
 <Place Parts_Estate="Content:4;Wrapper=OrderResultItemWrapper"/> 
```

现在的问题是，当我调查 ShapeTracing 窗口中的 contentItem 时，我发现 Wrapper 视图文件的搜索位置是主题文件夹。

```
 ~/Themes/EmlakTheme/Views/OrderResultItemWrapper.cshtml 
```

任何人都知道如何说服视图引擎在模块文件夹而不是主题文件夹中搜索。

非常感谢任何帮助。

**编辑：**

我的问题如下：

1 - 我在模块目录中放置了一个 cshtml 文件作为包装器。

2 - 我没有在主题文件夹中放置任何副本（而不是任何其他具有此名称的文件）

3 - 包装不会影响我的形状。

4 - 当我搜索问题时，我发现形状跟踪窗口显示

```
"~/Themes/EmlakTheme/Views/OrderResultItemWrapper.cshtml" 
```

path.that 意味着它不会在模块目录中搜索我的包装器文件，并导致不显示包装器。

**编辑**

我的问题已经解决了。我的错误是将包装器添加到`DisplayTemplate`目录中。我已将其放在 Views（根）目录中，现在它运行良好。**感谢所有参与回答的人**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:21:36.897

如果您在模块和主题中都有相同的 cshtml 文件，则后者将优先。如果您需要使用模块提供的那个 - 从主题中删除那个。

# android - 带有 Gallery 应用程序的 Android Intent 使用 File ContentProvider 显示图像

> ID：12652376
> 
> 赞同：1
> 
> 时间：2012-09-29T11:38:18.983
> 
> 标签：android, android-intent

我实现了一个文件 ContentProvider 以通过 http url 访问 wifi 网络上的文件服务器。

我要做的是启动具有特定意图和 uri 的 Android Gallery 应用程序，以显示文件服务器上特定目录中的图像文件。

如果我使用单个 uri 启动 Gallery 应用程序以通过以下代码显示一个图像，我就能成功：

```
Intent lance = new Intent();
lance.setAction(Intent.ACTION_VIEW);
String typedata = "image/*";
lance.setType(typedata);
String phuri = "content://" + URI_AUTORITE
                     + "/" + URI_CONTENU_FICHIERS
                     + directory + filename;
Uri uri = Uri.parse(phuri);
lance.setDataAndType(uri, "image/*");
startActivity(lance); 
```

但我试图更进一步来实现包含图像的目录的显示。我尝试通过以下代码使用 ClipData 对象显示多个图像：

```
Intent lance = new Intent();
lance.setAction(Intent.ACTION_VIEW);
String typedata = "image/*";
lance.setType(typedata);
String phuri = "content://" + URI_AUTORITE
                     + "/" + URI_CONTENU_FICHIERS
                     + directory + filename;
Uri uri = Uri.parse(phuri);
ClipData ensemble = ClipData.newRawUri("Photos", uri);
lance.setClipData(ensemble);
startActivity(lance); 
```

它不起作用：Gallery 应用程序已启动并显示专辑列表，并且不调用我的 File ContentProvider。

我错过了什么，还是画廊应用程序开发人员有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:01:19.270

您应该覆盖内容提供者的 getType() 方法以返回 mime 类型的图像，如下所示

```
@Override
public String getType(Uri uri) {
    return "image/*";
} 
```

# .net - 如何删除文本文件中以特定符号#开头的行

> ID：12652378
> 
> 赞同：0
> 
> 时间：2012-09-29T11:38:22.420
> 
> 标签：.net, regex, c#-4.0, windows-forms-designer

我正在开发简单的应用程序，它选择文件并读取该文本文件，我想删除所有以`#comments 行开头的行，这是代码

```
 private void button1_Click(object sender, EventArgs e)
        {
            try
            {

                OpenFileDialog fdlg = new OpenFileDialog();
                fdlg.Title = ".txt File Detector";
                fdlg.InitialDirectory = @"c:\";
                fdlg.Filter = "txt files (*.txt)|*.txt";
                fdlg.FilterIndex = 2;
                fdlg.RestoreDirectory = true;
                if (fdlg.ShowDialog() == DialogResult.OK)
                {
                    input = fdlg.FileName;
                    textBox1.Text = fdlg.FileName;
                }
            }
            catch (Exception eee)
            {
                MessageBox.Show(eee.ToString());
            }
            string taxt = File.ReadAllText(input);
            string[] lines = new string[100000];
            //string taxt = File.ReadAllText(input);
          while(  taxt != null)
            {

            int count = 0;

                if (taxt.Trim().StartsWith("#") != true)
                {

                    lines[count] = taxt;
                    richTextBox1.Text += lines.ToString();
                    count++;
                }        

            } 
```

我也尝试将正则表达式用作分隔符，但这在以 # 开头的注释行的正则表达式为：

> "@^#" 并在删除这些注释行后，我想存储在 arraylist 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T11:50:25.737

您的代码存在许多问题：

*   您正在将整个文件读入单个字符串，因此您实际上并没有遍历行
*   您正在循环 while`taxt`非空，但从不更改其值
*   你`string[].ToString`在每次迭代中调用，没有明显的原因

你想要这样的*东西*：

```
richTextBox1.Lines = File.ReadLines(input)
                         .Where(line => !line.TrimStart().StartsWith("#"))
                         .ToArray(); 
```

但是，您不应该在 UI 线程中进行文件处理。你真的想在 a 中显示结果`RichTextBox`，还是只是为了调试？

# ruby-on-rails - Nokogiri 在 Ruby 中解析 HTML 表

> ID：12652390
> 
> 赞同：3
> 
> 时间：2012-09-29T11:39:27.687
> 
> 标签：ruby-on-rails, ruby, html-parsing, nokogiri

我需要使用 Nokogiri 从 URL 解析 HTML 表。我的 HTML 如下所示：

```
<table class="tbl" cellspacing="1" cellpadding="4" id="gvResult" style="width:100%;">
   <tbody>
      <tr class="trh">
         <th scope="col"><a href="javascript:__doPostBack('ctl00$ctl00$b$b$gvResult','Sort$1')">Фирма</a></th>
         <th scope="col"><a href="javascript:__doPostBack('ctl00$ctl00$b$b$gvResult','Sort$2')">Артикул</a></th>
         <th scope="col">Инф.</th>
         <th scope="col"><a href="javascript:__doPostBack('ctl00$ctl00$b$b$gvResult','Sort$3')">Описание</a></th>
         <th scope="col"><a href="javascript:__doPostBack('ctl00$ctl00$b$b$gvResult','Sort$6')">Нал.</a></th>
         <th scope="col" style="width:55px;"><a href="javascript:__doPostBack('ctl00$ctl00$b$b$gvResult','Sort$8')">Мин. заказ, шт</a></th>
         <th scope="col"><a href="javascript:__doPostBack('ctl00$ctl00$b$b$gvResult','Sort$5')">Ожидаемый срок, дн. </a><a href="/help/hint/default.aspx?id=43" onclick="javascript:ShowTipLayer(this, event,this.href,30,20);return false;"><img src="http://s.exist.ru/img/q2.gif" alt="&#1055;&#1086;&#1084;&#1086;&#1097;&#1100;" /></a></th>
         <th scope="col"><a href="javascript:__doPostBack('ctl00$ctl00$b$b$gvResult','Sort$7')">Цена</a></th>
         <th scope="col">&nbsp;</th>
      </tr>
      <tr>
         <td class="tabletitle" colspan="12">Запрошенный артикул</td>
      </tr>
      <tr onclick="colorize(this);" id="item_0" tcolor="">
         <td class="artMerge" id="item_0" rowspan="2"><a onclick="javascript:ShowTipLayer(this,event,this.href, 30,130); return false;" href="hint/?s=47721138-000d-40c7-99f1-02d2f0005c83">Knecht (Mahle Filter)</a></td>
         <td class="artMerge" rowspan="2" style="white-space:nowrap;">O * * * D</td>
         <td class="artMerge" align="center" rowspan="2" style="white-space:nowrap;"></td>
         <td class="artMerge" rowspan="2" style="padding:10px 10px 0 10px;">Фильтр масляный</td>
         <td align="center">99</td>
         <td align="center">1</td>
         <td class="statis"><a class="stat" onclick="javascript:ShowTipLayer(this,event,this.href, 30,130); return false" href="/stat/hint/deliv.aspx?d=0&amp;s=0100f98e-5c00-38be-0297-2f1100002de2" target="_blank">0</a></td>
         <td class="price" align="right">56&nbsp;400 р.</td>
         <td class="basket"><a title="&#1050;&#1091;&#1087;&#1080;&#1090;&#1100;" href="/profile/orders/basket.aspx?pid=83A07C7A&amp;in=0100f98e-5c00-38be-0297-2f1100002de2&amp;sr=-4"></a></td>
      </tr>
      <tr onclick="colorize(this);" id="item_1" tcolor="">
         <td align="center">1782</td>
         <td align="center">1</td>
         <td class="statis"><a class="stat" onclick="javascript:ShowTipLayer(this,event,this.href, 30,130); return false" href="/stat/hint/deliv.aspx?d=1&amp;s=0100f98e-5c00-b5be-0297-0f1200002de2" target="_blank">1</a></td>
         <td class="price" align="right">55&nbsp;000 р.</td>
         <td class="basket"><a title="&#1050;&#1091;&#1087;&#1080;&#1090;&#1100;" href="/profile/orders/basket.aspx?pid=83A07C7A&amp;in=0100f98e-5c00-b5be-0297-0f1200002de2&amp;sr=-4"></a></td>
      </tr>
      <tr>
         <td class="tabletitle" colspan="12">Аналоги (заменители) для запрошенного артикула <a href="/news/newstext.aspx?id=1367" target="_blank"><img src="http://s.exist.ru/img/q2.gif" alt="&#1055;&#1086;&#1084;&#1086;&#1097;&#1100;" /></a></td>
      </tr>
      <tr onclick="colorize(this);" id="item_2" tcolor="">
         <td class="firmname" id="item_2"><a onclick="javascript:ShowTipLayer(this,event,this.href, 30,130); return false;" href="hint/?s=e0c712d8-215d-4000-9a64-f02c7200005c">Alco</a></td>
         <td style="white-space:nowrap;">M * * * 5</td>
         <td align="center" style="white-space:nowrap;"></td>
         <td>Фильтр масляный</td>
         <td align="center">1</td>
         <td align="center">1</td>
         <td class="statis"><a class="stat" onclick="javascript:ShowTipLayer(this,event,this.href, 30,130); return false" href="/stat/hint/deliv.aspx?d=0&amp;s=0100f98e-5c00-71fb-0241-720c00002c7d" target="_blank">0</a></td>
         <td class="price" align="right">37&nbsp;700 р.</td>
         <td class="basket"><a title="&#1050;&#1091;&#1087;&#1080;&#1090;&#1100;" href="/profile/orders/basket.aspx?pid=83A07C7A&amp;in=0100f98e-5c00-71fb-0241-720c00002c7d&amp;sr=-4"></a></td>
      </tr>
      <tr onclick="colorize(this);" id="item_3" tcolor="">
         <td class="firmname" id="item_3"><a onclick="javascript:ShowTipLayer(this,event,this.href, 30,130); return false;" href="hint/?s=b113459e-001c-4000-a33e-5021bd20005c">Bosch</a></td>
         <td style="white-space:nowrap;">1 * * * 9</td>
         <td align="center" style="white-space:nowrap;"></td>
         <td>Фильтр масляный</td>
         <td align="center">8</td>
         <td align="center">1</td>
         <td class="statis"><a class="stat" onclick="javascript:ShowTipLayer(this,event,this.href, 30,130); return false" href="/stat/hint/deliv.aspx?d=0&amp;s=0100f98e-5c00-3495-0002-bd11000021c2" target="_blank">0</a></td>
         <td class="price" align="right">30&nbsp;200 р.</td>
         <td class="basket"><a title="&#1050;&#1091;&#1087;&#1080;&#1090;&#1100;" href="/profile/orders/basket.aspx?pid=83A07C7A&amp;in=0100f98e-5c00-3495-0002-bd11000021c2&amp;sr=-4"></a></td>
      </tr>
      <tr onclick="colorize(this);" id="item_4" tcolor="">
         <td class="firmname" id="item_4"><a onclick="javascript:ShowTipLayer(this,event,this.href, 30,130); return false;" href="hint/?s=40f20c71-000a-400f-bd7d-02c720005c78">Champion</a></td>
         <td style="white-space:nowrap;">X * * * 6</td>
         <td align="center" style="white-space:nowrap;"></td>
         <td>Фильтр масляный</td>
         <td align="center">1</td>
         <td align="center">1</td>
         <td class="statis"><a class="stat" onclick="javascript:ShowTipLayer(this,event,this.href, 30,130); return false" href="/stat/hint/deliv.aspx?d=0&amp;s=0100f98e-5c00-713d-0142-720c00002cb0" target="_blank">0</a></td>
         <td class="price" align="right">59&nbsp;500 р.</td>
         <td class="basket"><a title="&#1050;&#1091;&#1087;&#1080;&#1090;&#1100;" href="/profile/orders/basket.aspx?pid=83A07C7A&amp;in=0100f98e-5c00-713d-0142-720c00002cb0&amp;sr=-4"></a></td>
      </tr>
      <tr onclick="colorize(this);" id="item_5" tcolor="">
         <td class="firmname" id="item_5"><a onclick="javascript:ShowTipLayer(this,event,this.href, 30,130); return false;" href="hint/?s=50d11138-0008-4436-b40f-02d2f0005cc4">Clean filters</a></td>
         <td style="white-space:nowrap;">M * * * 0</td>
         <td align="center" style="white-space:nowrap;"></td>
         <td>Фильтр масляный</td>
         <td align="center">100</td>
         <td align="center">1</td>
         <td class="statis"><a class="stat" onclick="javascript:ShowTipLayer(this,event,this.href, 30,130); return false" href="/stat/hint/deliv.aspx?d=0&amp;s=0100f98e-5c00-385f-012b-2f1100002df5" target="_blank">0</a></td>
         <td class="price" align="right">32&nbsp;500 р.</td>
         <td class="basket"><a title="&#1050;&#1091;&#1087;&#1080;&#1090;&#1100;" href="/profile/orders/basket.aspx?pid=83A07C7A&amp;in=0100f98e-5c00-385f-012b-2f1100002df5&amp;sr=-4"></a></td>
      </tr>
      <tr onclick="colorize(this);" id="item_6" tcolor="">
         <td class="firmname" id="item_6"><a onclick="javascript:ShowTipLayer(this,event,this.href, 30,130); return false;" href="hint/?s=e0cb777d-0ecd-4000-8f30-802be890005c">Filtron</a></td>
         <td style="white-space:nowrap;">O * * * 1</td>
         <td align="center" style="white-space:nowrap;"></td>
         <td>Фильтр масляный</td>
         <td align="center">10</td>
         <td align="center">1</td>
         <td class="statis"><a class="stat" onclick="javascript:ShowTipLayer(this,event,this.href, 30,130); return false" href="/stat/hint/deliv.aspx?d=0&amp;s=0100f98e-5c00-b781-0297-e80c00002be2" target="_blank">0</a></td>
         <td class="price" align="right">29&nbsp;000 р.</td>
         <td class="basket"><a title="&#1050;&#1091;&#1087;&#1080;&#1090;&#1100;" href="/profile/orders/basket.aspx?pid=83A07C7A&amp;in=0100f98e-5c00-b781-0297-e80c00002be2&amp;sr=-4"></a></td>
      </tr>
      <tr onclick="colorize(this);" id="item_7" tcolor="">
         <td class="firmname" id="item_7"><a onclick="javascript:ShowTipLayer(this,event,this.href, 30,130); return false;" href="hint/?s=64e20c71-000c-40c6-8e51-02c720005c0f">Fram</a></td>
         <td style="white-space:nowrap;">C * * * O</td>
         <td align="center" style="white-space:nowrap;"></td>
         <td>Фильтр масляный</td>
         <td align="center">31</td>
         <td align="center">1</td>
         <td class="statis"><a class="stat" onclick="javascript:ShowTipLayer(this,event,this.href, 30,130); return false" href="/stat/hint/deliv.aspx?d=0&amp;s=0100f98e-5c00-7151-00e8-720c00002c21" target="_blank">0</a></td>
         <td class="price" align="right">45&nbsp;500 р.</td>
         <td class="basket"><a title="&#1050;&#1091;&#1087;&#1080;&#1090;&#1100;" href="/profile/orders/basket.aspx?pid=83A07C7A&amp;in=0100f98e-5c00-7151-00e8-720c00002c21&amp;sr=-4"></a></td>
      </tr>
      <tr onclick="colorize(this);" id="item_8" tcolor="">
         <td class="firmname" id="item_8"><a onclick="javascript:ShowTipLayer(this,event,this.href, 30,130); return false;" href="hint/?s=a1135e09-11ba-4000-a216-d02b3670005c">Hengst</a></td>
         <td style="white-space:nowrap;">E * * * 8</td>
         <td align="center" style="white-space:nowrap;"></td>
         <td>Фильтр масляный</td>
         <td align="center">10</td>
         <td align="center">1</td>
         <td class="statis"><a class="stat" onclick="javascript:ShowTipLayer(this,event,this.href, 30,130); return false" href="/stat/hint/deliv.aspx?d=0&amp;s=0100f98e-5c00-35e4-0024-361100002b92" target="_blank">0</a></td>
         <td class="price" align="right">48&nbsp;900 р.</td>
         <td class="basket"><a title="&#1050;&#1091;&#1087;&#1080;&#1090;&#1100;" href="/profile/orders/basket.aspx?pid=83A07C7A&amp;in=0100f98e-5c00-35e4-0024-361100002b92&amp;sr=-4"></a></td>
      </tr>
      <tr onclick="colorize(this);" id="item_9" tcolor="">
         <td class="firmname" id="item_9"><a onclick="javascript:ShowTipLayer(this,event,this.href, 30,130); return false;" 
        ...
      </tr>
   </tbody>
</table> 
```

另请注意，它有俄罗斯符号。

我的 Ruby 代码如下所示：

```
html = open('http://exist.by/price.aspx?pcode=ox143d')
    require 'nokogiri'
    require 'pp'
    doc = Nokogiri::HTML(html)
    doc.encoding = 'utf-8'

    rows = doc.xpath('//table[@id="gvResultTable"]/tbody/tr[@id="item_1"]')
    @details = rows.collect do |row|
      detail = {}
      [
        [:firmname, 'td[1]/text()'],
        [:price, 'td[8]/text()'],
      ].each do |name, xpath|
        detail[name] = row.at_xpath(xpath).to_s.strip
      end
      detail
    end
    pp @details
    logger.warn("!!!!!!!!!!")
    logger.warn(@details) 
```

我不知道如何正确获取数据`tr`。`itemid`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T14:03:13.917

1.  HTML 有缺陷；`id`具有相同属性的元素不止一个： `<tr onclick="colorize(this);" id="item_2" tcolor=""> <td class="firmname" id="item_2">`.
2.  `id`HTML中的元素`table`是“ `gvResult`”，而在 Ruby 代码中，您要求 Nokogiri 查找“ `id=gvResultTable`”所在的表。
3.  Nokogiri 使用 UTF-8 编码在内部存储字符串，因此您不应该对俄语字符有任何问题。

如果可以修复 HTML，则可以正常工作：

HTML：

```
<table id="gvResult">
  <tbody>
    <tr id="item_1">
        <td class="firmname">Example1</td>
        <td class="price">42.00</td>
    </tr>
    <tr id="item_2">
       <td class="firmname">Example2</td>
       <td class="price">24.00</td>
    </tr>
  </tbody>
</table> 
```

红宝石：

```
require 'rubygems'
require 'nokogiri'
require 'pp'

html = open('http://www.example.com/page')

doc = Nokogiri::HTML(html)
doc.encoding = 'utf-8'

rows = doc.search('//tr[starts-with(@id, "item_")]')
  @details = rows.collect do |row|
      detail = {}
      [
        [:firmname, 'td[1]/text()'],
        [:price, 'td[2]/text()'],
      ].each do |name, xpath|
        detail[name] = row.at_xpath(xpath).to_s.strip
      end
      detail
  end
pp @details 
```

我假设您想从所有`tr`带有`id`“ `item_\d+`”的元素中获取数据，因此我使用了`doc.search('//tr[starts-with(@id, "item_")]')`. 更改它以满足您的需求。

# c++ - g++ 会将我的程序与它不从库中使用的类链接起来吗？

> ID：12652393
> 
> 赞同：8
> 
> 时间：2012-09-29T11:39:57.873
> 
> 标签：c++, compiler-construction, compilation, linker, g++

我创建了一个简单的静态库，包含在一个`.a`文件中。我可能会在各种项目中使用它，其中一些根本不需要 90%。例如，如果我想在 AVR 微型计算机上使用作为我的库的一部分的神经网络，我可能不需要大量其他东西，但是在我的代码中链接是否可能会生成一个相当大的文件？

我打算编译这样的程序：

`g++ myProg.cpp myLib.a -o prog`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T11:45:47.280

G++ 只会从您的库中提取它需要的目标文件，但这意味着如果使用单个目标文件中的一个符号，则该目标文件中的所有内容都会添加到您的可执行文件中。

一个源文件变成一个目标文件，因此只有在确定需要将它们放在一起时才将它们逻辑地组合在一起是有意义的。

这种做法因编译器而异（实际上因链接器而异）。例如，Microsoft 链接器会将目标文件分开并仅包含那些实际需要的部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T11:49:21.963

你也可以尝试将你的库分解成独立的小部分，只链接你真正需要的部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T11:44:16.110

当您链接到静态库时，链接器会拉入解析代码其他部分中使用的名称的内容。通常，如果不使用名称，则不会链接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T13:41:24.553

GNU 链接器会从你在一个目标文件上指定的库中提取它需要的东西。就 GNU 链接器而言，目标文件是原子单元。它不会将它们分开。如果目标文件定义了一个或多个未解析的外部引用，则链接器将引入该目标文件。该目标文件可能具有外部引用。链接器将尝试解决这些问题，但如果无法解决，则链接器会将其添加到需要解决的引用集中。

有几个陷阱可以使可执行文件比需要的大得多。比需要的大，我的意思是一个可执行文件，其中包含在程序执行期间永远不会被调用的函数，永远不会被检查或修改的全局对象。您将拥有无法访问的二进制代码。

当对象文件包含大量函数或全局对象时，这些陷阱之一会导致。您的程序可能只需要其中一个，但您的可执行文件会获取所有这些，因为目标文件是链接器的原子单元。这些额外的函数将无法访问，因为没有从您`main`到这些函数的调用路径，但它们仍在您的可执行文件中。确保不会发生这种情况的唯一方法是使用“每个源文件一个函数”规则。我自己并不遵循这条规则，但我确实理解它的逻辑。

当您使用多态类时，会出现另一组陷阱。构造函数包含自动生成的代码以及构造函数本身的主体。该自动生成的代码调用父类的构造函数，插入指向对象中类的 vtable 的指针，并根据初始化列表初始化数据成员。这些父类构造函数、vtable 和处理初始化列表的机制可能是链接器需要解析的外部引用。如果父类构造函数位于较大的头文件中，则您只是将所有这些内容拖到可执行文件中。

虚表呢？GNU 编译器选择一个关键成员函数作为存储 vtable 的位置。该键函数是类中第一个没有内联定义的成员函数。即使您不调用该成员函数，您也会在可执行文件中获得包含它的目标文件——并且您会获得该目标文件拖入的所有内容。

再次将源文件缩小到较小的大小有助于“看看猫拖入了什么！” 问题。最好特别注意包含该关键成员函数的文件。保持那个源文件很小，至少就猫会拖进来的东西而言。我倾向于在那个源文件中放置小的、独立的成员函数。不可避免地会拖入一堆其他东西的功能不应该放在那里。

vtable 的另一个问题是它包含指向类的所有虚函数的指针。这些指针需要指向真实的东西。您的可执行文件将包含定义为类定义的每个虚函数的目标文件，包括您从不调用的虚函数。而且您还将获得这些虚拟功能拖入的所有内容。

解决这个问题的一种方法是避免创建大类。他们倾向于把*一切都*拖进来。在这方面，特别是上帝类是有问题的。另一个解决方案是认真思考一个函数是否真的需要是虚拟的。不要仅仅因为你认为有一天有人需要重载它而使函数成为虚拟函数。那是推测性的普遍性，而对于虚函数，推测性的普遍性会带来高昂的成本。

# ios - iOS：如何进行正确的 URL 编码？

> ID：12652396
> 
> 赞同：28
> 
> 时间：2012-09-29T11:40:47.930
> 
> 标签：ios, url-encoding

我无法打开一个 URL，`UIWebView`所以我搜索并发现我需要对 URL 进行编码，所以我尝试对其进行编码，但是我在 URL 编码中遇到了问题：我的 URL 是`http://somedomain.com/data/Témp%20Page%20-%20Open.html`（它不是真正的 URL）。

我担心`%20`我试图替换 using `stringByReplacingOccuranceOfString:@"" withString:@""`，它给了我想要的 URL`http://somedomain.com/data/Témp Page - Open.html`但是它没有打开，`UIWebView`但令人惊讶的是它打开`Safari`并`FireFox`完美。即使我打开未编码的 URL，它也会自动转换并打开我正在寻找的页面。

我已经在谷歌上搜索了 URL 编码，它指出了我已经检查过的不同结果，但没有任何结果可以帮助我！！我在不同的 URL 编码问题中尝试了不同的函数答案，但它只是更改了所有特殊字符并使我的 URL 像，`http%3A%2F%2Fsomedomain.com%2Fdata%2FT...`它无法在任何浏览器中打开`UIWebView`，甚至无法在任何浏览器中打开。

它给出了以下`Error Log`内容`UIWebView delegate`

```
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error { } 
```

> 错误代码：101 & 描述：错误域 = WebKitErrorDomain 代码 = 101“操作无法完成。（WebKitErrorDomain 错误 101。）”用户信息 = 0x6e4cf60 {}

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-02T06:32:54.063

@Dhaval Vaishnani 提供的答案只是部分正确。此方法将`?`,`=`和`&`字符视为未编码，因为它们在 URL 中有效。因此，要将任意字符串编码为安全地用作 URL 的一部分，您不能使用此方法。相反，您必须回退到使用 CoreFoundation 和`CFURLRef`：

```
NSString *unsafeString = @"this &string= confuses ? the InTeRwEbZ";
CFStringRef safeString = CFURLCreateStringByAddingPercentEscapes (
    NULL,
    (CFStringRef)unsafeString,
    NULL,
    CFSTR("/%&=?$#+-~@<>|\\*,.()[]{}^!"),
    kCFStringEncodingUTF8
); 
```

不要忘记使用`CFRelease(safeString);`.

此外，似乎尽管有标题，OP 正在寻找**解码**而不是**编码** 字符串。`CFURLRef`有另一个类似的函数调用用于：

```
NSString *escapedString = @"%32%65BCDEFGH";
CFStringRef unescapedString = CFURLCreateStringByReplacingPercentEscapesUsingEncoding (
    NULL,
    (CFStringRef)escapedString,
    CFSTR(""),
    kCFStringEncodingUTF8
); 
```

同样，不要忘记正确的内存管理。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-02T10:03:49.277

我做了一些测试，我认为问题不是真正的问题，`UIWebView`而是`NSURL`因为“Témp”中的 é 编码不正确而不会接受 URL。这将导致`+[NSURLRequest requestWithURL:]`并`-[NSURL URLWithString:]`返回`nil`，因为字符串包含格式错误的 URL。我猜你最终会使用一个不好的`nil`请求。`-[UIViewWeb loadRequest:]`

例子：

```
NSLog(@"URL with é: %@", [NSURL URLWithString:@"http://host/Témp"]);
NSLog(@"URL with encoded é: %@", [NSURL URLWithString:@"http://host/T%C3%A9mp"]); 
```

输出：

```
2012-10-02 12:02:56.366 test[73164:c07] URL with é: (null)
2012-10-02 12:02:56.368 test[73164:c07] URL with encoded é: http://host/T%C3%A9mp 
```

如果你真的想借用 WebKit 对畸形 URL 的优雅处理并且不想自己实现它，你可以做这样的事情，但它非常难看：

```
UIWebView *webView = [[[UIWebView alloc]
                       initWithFrame:self.view.frame]
                      autorelease];

NSString *url = @"http://www.httpdump.com/texis/browserinfo/Témp.html";

[webView loadHTMLString:[NSString stringWithFormat:
                         @"<script>window.location=%@;</script>",
                         [[[NSString alloc]
                           initWithData:[NSJSONSerialization
                                         dataWithJSONObject:url
                                         options:NSJSONReadingAllowFragments
                                         error:NULL]
                           encoding:NSUTF8StringEncoding]
                          autorelease]]
                baseURL:nil]; 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-08-13T19:39:20.057

最直接的方法是使用：

```
NSString *encodedString = [rawString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

iDhaval 很接近，但他正在做相反的事情（解码而不是编码）。

Anand 的方法可行，但您很可能需要替换比空格和换行符更多的字符。请参阅此处的参考： [http ://en.wikipedia.org/wiki/Percent-encoding#Percent-encoding_reserved_characters](http://en.wikipedia.org/wiki/Percent-encoding#Percent-encoding_reserved_characters)

希望有帮助。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-29T11:47:25.713

在 iPhone 中对 URL 进行编码非常简单。如下

```
NSString* strURL = @"http://somedomain.com/data/Témp Page - Open.html";

NSURL* url = [NSURL URLWithString:[strURL stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]; 
```

这是对 URL 进行编码的完美方式，我正在使用它，而且它非常适合我。

希望对你有帮助！！！

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-05-06T09:08:00.647

这可能对解决 URL 编码问题的人有用，因为我的问题可能与*已解决和接受*的不同，这是我过去进行编码的方式，

```
-(NSString *)encodeURL:(NSString *)urlString
{
    CFStringRef newString = CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault, (CFStringRef)urlString, NULL, CFSTR("!*'();:@&=+@,/?#[]"), kCFStringEncodingUTF8);
    return (NSString *)CFBridgingRelease(newString);
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-12-10T13:20:26.917

你可以试试这个

```
NSString *url = @"http://www.abc.com/param=Hi how are you";

NSString* encodedUrl = [url stringByAddingPercentEscapesUsingEncoding:
 NSASCIIStringEncoding]; 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-07-19T09:57:53.340

我认为这对你有用

```
[strUrl stringByAddingPercentEncodingWithAllowedCharacters:NSCharacterSet.URLQueryAllowedCharacterSet] 
```

URL 编码的本机方法。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-11-16T05:01:48.603

**斯威夫特 4.x**

```
let originalString = "https://www.somedomain.com/folder/some cool file.jpg"
let escapedString = originalString.addingPercentEncoding(withAllowedCharacters: .urlQueryAllowed)
print(escapedString!) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-02T08:15:08.367

您可能需要将 URL 分解为其组成部分，然后 URL 对主机和路径进行编码，而不是对方案进行编码。然后再把它放回去。

使用该字符串创建一个 NSURL，然后使用其上的方法（如主机、方案、路径、查询等）将其分开。然后使用 CFURLCreateStringByAddingPercentEscapes 对这些部分进行编码，然后您可以将它们重新组合到一个新的 NSURL 中。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-10-02T06:17:13.063

你能试试这个。

```
 //yourURL contains your Encoded URL
    yourURL = [yourURL stringByReplacingOccurrencesOfString:@" " withString:@"%20"];
    yourURL = [yourURL stringByReplacingOccurrencesOfString:@"\n" withString:@""];
    NSLog(@"Keyword:%@ is this",yourURL); 
```

我不确定，但在我的情况下我已经解决了这个问题。希望这能解决你的问题。

# python - 如何使用 OpenCV 相机捕捉设置帧率

> ID：12652401
> 
> 赞同：1
> 
> 时间：2012-09-29T11:42:05.823
> 
> 标签：python, opencv

如何在 Python 中使用 OpenCV 设置捕获帧速率？这是我的代码，但生成的帧速率低于请求的 30fps。此外，视频质量非常差。

```
import cv
cv.NamedWindow ('CamShiftDemo', 1)
device = -1
cap = cv.CaptureFromCAM(device)
size = (640,480)
cv.SetCaptureProperty(cap, cv.CV_CAP_PROP_FPS,30)
cv.SetCaptureProperty(cap, cv.CV_CAP_PROP_FRAME_WIDTH, size[0])
cv.SetCaptureProperty(cap, cv.CV_CAP_PROP_FRAME_HEIGHT, size[1])
while True:
    frame = cv.QueryFrame(cap)
    cv.ShowImage('CamShiftDemo', frame)
    cv.WaitKey(10) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T17:00:42.707

您受到硬件的限制，即：

1.  你的相机的捕捉能力，和
2.  您计算机的系统资源。

如果其中任何一个都无法处理请求的捕获参数（在您的情况下为 30fps 的 640x480 分辨率），那么您就不走运了。您提供给 OpenCV 的参数*只是建议*——它会尽力匹配它们。

你用的是什么型号的相机？我会首先查看模型规格，看看它们是否宣传您想要的参数。

# batch-file - 批处理仅显示小数点后 2 个字符

> ID：12652402
> 
> 赞同：2
> 
> 时间：2012-09-29T11:42:12.933
> 
> 标签：batch-file

有谁知道如何只显示小数点后的 2 个字符。

示例：19.123948493114 变成 19.12

不能使用 %variable:~5% 因为小数点前的数字会发生变化，所以有时会是 19 其他时候会是 123451213.12345123

两者都只需要显示小数点后 2 个字符

-= 编辑 =- 这是我当前的脚本。

```
@ECHO OFF
SETLOCAL ENABLEEXTENSIONS
SETLOCAL ENABLEDELAYEDEXPANSION
CLS
FOR /F "tokens=1*" %%A IN ('fsutil fsinfo drives') DO SET "Drives=%%B"
FOR %%A IN (%Drives%) DO fsutil fsinfo statistics %%A |FINDSTR /I /C:"The FSUTIL utility requires a local NTFS volume." >nul || CALL:GetDriveInfo %%A
EXIT /B

:GetDriveInfo
SET "CurrentDrive=%~1"
SET "CurrentDrive=%CurrentDrive:\=%
FOR /F "tokens=7 delims= " %%A IN ('fsutil volume diskfree %~1 ^|FINDSTR /C:"Total # of free bytes"') DO Call:GetDriveInfo-Convert "CurrentDrive-FreeSpace" "%%A"
FOR /F "tokens=6 delims= " %%A IN ('fsutil volume diskfree %~1 ^|FINDSTR /C:"Total # of bytes"') DO CALL:GetDriveInfo-Convert "CurrentDrive-TotalSpace" "%%A"
FOR /F %%A IN ('powershell %CurrentDrive-TotalSpace% - %CurrentDrive-FreeSpace%') DO Set "CurrentDrive-UsedSpace=%%A"

FOR /F "tokens=1-2 delims=." %%A IN ('powershell %CurrentDrive-UsedSpace% / %CurrentDrive-TotalSpace% * 100') DO (
    SET "CurrentDrive-UsedSpace-Percent1=%%A"
    SET "CurrentDrive-UsedSpace-Percent2=%%B"
    SET "CurrentDrive-UsedSpace-Percent2=!CurrentDrive-UsedSpace-Percent2:~0,1!"
    SET "CurrentDrive-UsedSpace-Percent=!CurrentDrive-UsedSpace-Percent1!.!CurrentDrive-UsedSpace-Percent2!"
)

FOR /F "tokens=1-2 delims=." %%A IN ('powershell %CurrentDrive-FreeSpace% / %CurrentDrive-TotalSpace% * 100') DO (
    SET "CurrentDrive-FreeSpace-Percent1=%%A"
    SET "CurrentDrive-FreeSpace-Percent2=%%B"
    SET "CurrentDrive-FreeSpace-Percent2=!CurrentDrive-FreeSpace-Percent2:~0,1!"
    SET "CurrentDrive-FreeSpace-Percent=!CurrentDrive-FreeSpace-Percent1!.!CurrentDrive-FreeSpace-Percent2!"
)

ECHO Drive Information For %CurrentDrive%
ECHO/ Used Space: %CurrentDrive-UsedSpace% (%CurrentDrive-UsedSpace-Percent%%%)
ECHO/ Free Space: %CurrentDrive-FreeSpace% (%CurrentDrive-FreeSpace-Percent%%%)
ECHO/ Total Space: %CurrentDrive-TotalSpace%
ECHO/
EXIT /B

:GetDriveInfo-Convert
FOR /F %%A IN ('powershell %~2 / 1024 / 1024 / 1024') DO SET "CurrentDrive_Temp=%%A"
FOR /F "Tokens=1-2 delims=." %%A IN ("%CurrentDrive_Temp%") DO SET "CurrentDrive_Temp1=%%A" & SET "CurrentDrive_Temp2=%%B"
SET "CurrentDrive_Temp3=%CurrentDrive_Temp2:~0,2%"

:: Rounds Up to get a more accurate number. Used to counter the lost bytes.
IF "%CurrentDrive_Temp2:~2,1%" GEQ "5" SET /A "CurrentDrive_Temp3+=1"
IF "%CurrentDrive_Temp3%"=="100" SET "CurrentDrive_Temp3=00" & SET /A CurrentDrive_Temp1+=1"
SET "%~1=%CurrentDrive_Temp1%.%CurrentDrive_Temp3%"
EXIT /B 
```

问题？其中一个驱动器似乎无缘无故地不想切断。

我的结果：

```
Drive Information For C:
 Used Space: 103.21 (86.5%)
 Free Space: 16.04 (13.4%)
 Total Space: 119.25

Drive Information For D:
 Used Space: 481.37 (57.8%)
 Free Space: 350.14 (42.1%)
 Total Space: 831.51

Drive Information For E:
 Used Space: 530.02 (99.7%)
 Free Space: 1.49 (0.2%)
 Total Space: 531.51

Drive Information For F:
 Used Space: 86.4 (43.2%)
 Free Space: 113.60 (56.8%)
 Total Space: 200.00

Drive Information For G:
 Used Space: 0.129999999999995 (0.0%)
 Free Space: 199.87 (99.9%)
 Total Space: 200.00

Drive Information For I:
 Used Space: 86.83 (9.3%)
 Free Space: 844.68 (90.6%)
 Total Space: 931.51

Drive Information For J:
 Used Space: 699.09 (75.0%)
 Free Space: 232.39 (24.9%)
 Total Space: 931.48

Drive Information For Z:
 Used Space: 11.06 (22.1%)
 Free Space: 38.94 (77.8%)
 Total Space: 50.00 
```

我的缩短脚本调试文件。我切断了 C: 驱动器的整个功能以及 G: 驱动器之后的所有内容，因为这是问题所在的驱动器，我不能发布超过 30k 个字符 xD

```
D:\Desktop>SETLOCAL ENABLEEXTENSIONS 

D:\Desktop>SETLOCAL ENABLEDELAYEDEXPANSION 

D:\Desktop>CLS

D:\Desktop>FOR /F "tokens=1*" %A IN ('fsutil fsinfo drives') DO SET "Drives=%B" 

D:\Desktop>SET "Drives=C:\ D:\ E:\ F:\ G:\ H:\ I:\ J:\ K:\ L:\ X:\ Y:\ Z:\ " 

D:\Desktop>FOR %A IN (C:\ D:\ E:\ F:\ G:\ H:\ I:\ J:\ K:\ L:\ X:\ Y:\ Z:\) DO fsutil fsinfo statistics %A   | FINDSTR /I /C:"The FSUTIL utility requires a local NTFS volume."   1>nul  || CALL:GetDriveInfo %A 

D:\Desktop>fsutil fsinfo statistics D:\   | FINDSTR /I /C:"The FSUTIL utility requires a local NTFS volume."   1>nul  || CALL:GetDriveInfo D:\ 

D:\Desktop>SET "CurrentDrive=D:\" 

D:\Desktop>SET "CurrentDrive=D: 

D:\Desktop>FOR /F "tokens=7 delims= " %A IN ('fsutil volume diskfree D:\ |FINDSTR /C:"Total # of free bytes"') DO Call:GetDriveInfo-Convert "CurrentDrive-FreeSpace" "%A" 

D:\Desktop>Call:GetDriveInfo-Convert "CurrentDrive-FreeSpace" "375962980352" 

D:\Desktop>FOR /F %A IN ('powershell 375962980352 / 1024 / 1024 / 1024') DO SET "CurrentDrive_Temp=%A" 

D:\Desktop>SET "CurrentDrive_Temp=350.142810821533" 

D:\Desktop>FOR /F "Tokens=1-2 delims=." %A IN ("350.142810821533") DO SET "CurrentDrive_Temp1=%A"   & SET "CurrentDrive_Temp2=%B" 

D:\Desktop>SET "CurrentDrive_Temp1=350"   & SET "CurrentDrive_Temp2=142810821533" 

D:\Desktop>SET "CurrentDrive_Temp3=14" 

D:\Desktop>IF "2" GEQ "5" SET /A "CurrentDrive_Temp3+=1" 

D:\Desktop>IF "14" == "100" SET "CurrentDrive_Temp3=00"   & SET /A CurrentDrive_Temp1+=1" 

D:\Desktop>SET "CurrentDrive-FreeSpace=350.14" 

D:\Desktop>EXIT /B 

D:\Desktop>FOR /F "tokens=6 delims= " %A IN ('fsutil volume diskfree D:\ |FINDSTR /C:"Total # of bytes"') DO CALL:GetDriveInfo-Convert "CurrentDrive-TotalSpace" "%A" 

D:\Desktop>CALL:GetDriveInfo-Convert "CurrentDrive-TotalSpace" "892827856896" 

D:\Desktop>FOR /F %A IN ('powershell 892827856896 / 1024 / 1024 / 1024') DO SET "CurrentDrive_Temp=%A" 

D:\Desktop>SET "CurrentDrive_Temp=831.510738372803" 

D:\Desktop>FOR /F "Tokens=1-2 delims=." %A IN ("831.510738372803") DO SET "CurrentDrive_Temp1=%A"   & SET "CurrentDrive_Temp2=%B" 

D:\Desktop>SET "CurrentDrive_Temp1=831"   & SET "CurrentDrive_Temp2=510738372803" 

D:\Desktop>SET "CurrentDrive_Temp3=51" 

D:\Desktop>IF "0" GEQ "5" SET /A "CurrentDrive_Temp3+=1" 

D:\Desktop>IF "51" == "100" SET "CurrentDrive_Temp3=00"   & SET /A CurrentDrive_Temp1+=1" 

D:\Desktop>SET "CurrentDrive-TotalSpace=831.51" 

D:\Desktop>EXIT /B 

D:\Desktop>FOR /F %A IN ('powershell 831.51 - 350.14') DO Set "CurrentDrive-UsedSpace=%A" 

D:\Desktop>Set "CurrentDrive-UsedSpace=481.37" 

D:\Desktop>FOR /F "tokens=1-2 delims=." %A IN ('powershell 481.37 / 831.51 * 100') DO (
SET "CurrentDrive-UsedSpace-Percent1=%A"  
 SET "CurrentDrive-UsedSpace-Percent2=%B"  
 SET "CurrentDrive-UsedSpace-Percent2=!CurrentDrive-UsedSpace-Percent2:~0,1!"  
 SET "CurrentDrive-UsedSpace-Percent=!CurrentDrive-UsedSpace-Percent1!.!CurrentDrive-UsedSpace-Percent2!" 
) 

D:\Desktop>(
SET "CurrentDrive-UsedSpace-Percent1=57"  
 SET "CurrentDrive-UsedSpace-Percent2=8910656516458"  
 SET "CurrentDrive-UsedSpace-Percent2=!CurrentDrive-UsedSpace-Percent2:~0,1!"  
 SET "CurrentDrive-UsedSpace-Percent=!CurrentDrive-UsedSpace-Percent1!.!CurrentDrive-UsedSpace-Percent2!" 
) 

D:\Desktop>FOR /F "tokens=1-2 delims=." %A IN ('powershell 350.14 / 831.51 * 100') DO (
SET "CurrentDrive-FreeSpace-Percent1=%A"  
 SET "CurrentDrive-FreeSpace-Percent2=%B"  
 SET "CurrentDrive-FreeSpace-Percent2=!CurrentDrive-FreeSpace-Percent2:~0,1!"  
 SET "CurrentDrive-FreeSpace-Percent=!CurrentDrive-FreeSpace-Percent1!.!CurrentDrive-FreeSpace-Percent2!" 
) 

D:\Desktop>(
SET "CurrentDrive-FreeSpace-Percent1=42"  
 SET "CurrentDrive-FreeSpace-Percent2=1089343483542"  
 SET "CurrentDrive-FreeSpace-Percent2=!CurrentDrive-FreeSpace-Percent2:~0,1!"  
 SET "CurrentDrive-FreeSpace-Percent=!CurrentDrive-FreeSpace-Percent1!.!CurrentDrive-FreeSpace-Percent2!" 
) 

D:\Desktop>ECHO Drive Information For D: 
Drive Information For D:

D:\Desktop>ECHO/ Used Space: 481.37 (57.8%) 
 Used Space: 481.37 (57.8%)

D:\Desktop>ECHO/ Free Space: 350.14 (42.1%) 
 Free Space: 350.14 (42.1%)

D:\Desktop>ECHO/ Total Space: 831.51 
 Total Space: 831.51

D:\Desktop>ECHO/

D:\Desktop>EXIT /B 

D:\Desktop>fsutil fsinfo statistics E:\   | FINDSTR /I /C:"The FSUTIL utility requires a local NTFS volume."   1>nul  || CALL:GetDriveInfo E:\ 

D:\Desktop>SET "CurrentDrive=E:\" 

D:\Desktop>SET "CurrentDrive=E: 

D:\Desktop>FOR /F "tokens=7 delims= " %A IN ('fsutil volume diskfree E:\ |FINDSTR /C:"Total # of free bytes"') DO Call:GetDriveInfo-Convert "CurrentDrive-FreeSpace" "%A" 

D:\Desktop>Call:GetDriveInfo-Convert "CurrentDrive-FreeSpace" "1599143936" 

D:\Desktop>FOR /F %A IN ('powershell 1599143936 / 1024 / 1024 / 1024') DO SET "CurrentDrive_Temp=%A" 

D:\Desktop>SET "CurrentDrive_Temp=1.48931884765625" 

D:\Desktop>FOR /F "Tokens=1-2 delims=." %A IN ("1.48931884765625") DO SET "CurrentDrive_Temp1=%A"   & SET "CurrentDrive_Temp2=%B" 

D:\Desktop>SET "CurrentDrive_Temp1=1"   & SET "CurrentDrive_Temp2=48931884765625" 

D:\Desktop>SET "CurrentDrive_Temp3=48" 

D:\Desktop>IF "9" GEQ "5" SET /A "CurrentDrive_Temp3+=1" 

D:\Desktop>IF "49" == "100" SET "CurrentDrive_Temp3=00"   & SET /A CurrentDrive_Temp1+=1" 

D:\Desktop>SET "CurrentDrive-FreeSpace=1.49" 

D:\Desktop>EXIT /B 

D:\Desktop>FOR /F "tokens=6 delims= " %A IN ('fsutil volume diskfree E:\ |FINDSTR /C:"Total # of bytes"') DO CALL:GetDriveInfo-Convert "CurrentDrive-TotalSpace" "%A" 

D:\Desktop>CALL:GetDriveInfo-Convert "CurrentDrive-TotalSpace" "570704261120" 

D:\Desktop>FOR /F %A IN ('powershell 570704261120 / 1024 / 1024 / 1024') DO SET "CurrentDrive_Temp=%A" 

D:\Desktop>SET "CurrentDrive_Temp=531.509761810303" 

D:\Desktop>FOR /F "Tokens=1-2 delims=." %A IN ("531.509761810303") DO SET "CurrentDrive_Temp1=%A"   & SET "CurrentDrive_Temp2=%B" 

D:\Desktop>SET "CurrentDrive_Temp1=531"   & SET "CurrentDrive_Temp2=509761810303" 

D:\Desktop>SET "CurrentDrive_Temp3=50" 

D:\Desktop>IF "9" GEQ "5" SET /A "CurrentDrive_Temp3+=1" 

D:\Desktop>IF "51" == "100" SET "CurrentDrive_Temp3=00"   & SET /A CurrentDrive_Temp1+=1" 

D:\Desktop>SET "CurrentDrive-TotalSpace=531.51" 

D:\Desktop>EXIT /B 

D:\Desktop>FOR /F %A IN ('powershell 531.51 - 1.49') DO Set "CurrentDrive-UsedSpace=%A" 

D:\Desktop>Set "CurrentDrive-UsedSpace=530.02" 

D:\Desktop>FOR /F "tokens=1-2 delims=." %A IN ('powershell 530.02 / 531.51 * 100') DO (
SET "CurrentDrive-UsedSpace-Percent1=%A"  
 SET "CurrentDrive-UsedSpace-Percent2=%B"  
 SET "CurrentDrive-UsedSpace-Percent2=!CurrentDrive-UsedSpace-Percent2:~0,1!"  
 SET "CurrentDrive-UsedSpace-Percent=!CurrentDrive-UsedSpace-Percent1!.!CurrentDrive-UsedSpace-Percent2!" 
) 

D:\Desktop>(
SET "CurrentDrive-UsedSpace-Percent1=99"  
 SET "CurrentDrive-UsedSpace-Percent2=7196666102237"  
 SET "CurrentDrive-UsedSpace-Percent2=!CurrentDrive-UsedSpace-Percent2:~0,1!"  
 SET "CurrentDrive-UsedSpace-Percent=!CurrentDrive-UsedSpace-Percent1!.!CurrentDrive-UsedSpace-Percent2!" 
) 

D:\Desktop>FOR /F "tokens=1-2 delims=." %A IN ('powershell 1.49 / 531.51 * 100') DO (
SET "CurrentDrive-FreeSpace-Percent1=%A"  
 SET "CurrentDrive-FreeSpace-Percent2=%B"  
 SET "CurrentDrive-FreeSpace-Percent2=!CurrentDrive-FreeSpace-Percent2:~0,1!"  
 SET "CurrentDrive-FreeSpace-Percent=!CurrentDrive-FreeSpace-Percent1!.!CurrentDrive-FreeSpace-Percent2!" 
) 

D:\Desktop>(
SET "CurrentDrive-FreeSpace-Percent1=0"  
 SET "CurrentDrive-FreeSpace-Percent2=280333389776298"  
 SET "CurrentDrive-FreeSpace-Percent2=!CurrentDrive-FreeSpace-Percent2:~0,1!"  
 SET "CurrentDrive-FreeSpace-Percent=!CurrentDrive-FreeSpace-Percent1!.!CurrentDrive-FreeSpace-Percent2!" 
) 

D:\Desktop>ECHO Drive Information For E: 
Drive Information For E:

D:\Desktop>ECHO/ Used Space: 530.02 (99.7%) 
 Used Space: 530.02 (99.7%)

D:\Desktop>ECHO/ Free Space: 1.49 (0.2%) 
 Free Space: 1.49 (0.2%)

D:\Desktop>ECHO/ Total Space: 531.51 
 Total Space: 531.51

D:\Desktop>ECHO/

D:\Desktop>EXIT /B 

D:\Desktop>fsutil fsinfo statistics F:\   | FINDSTR /I /C:"The FSUTIL utility requires a local NTFS volume."   1>nul  || CALL:GetDriveInfo F:\ 

D:\Desktop>SET "CurrentDrive=F:\" 

D:\Desktop>SET "CurrentDrive=F: 

D:\Desktop>FOR /F "tokens=7 delims= " %A IN ('fsutil volume diskfree F:\ |FINDSTR /C:"Total # of free bytes"') DO Call:GetDriveInfo-Convert "CurrentDrive-FreeSpace" "%A" 

D:\Desktop>Call:GetDriveInfo-Convert "CurrentDrive-FreeSpace" "121982418944" 

D:\Desktop>FOR /F %A IN ('powershell 121982418944 / 1024 / 1024 / 1024') DO SET "CurrentDrive_Temp=%A" 

D:\Desktop>SET "CurrentDrive_Temp=113.60498046875" 

D:\Desktop>FOR /F "Tokens=1-2 delims=." %A IN ("113.60498046875") DO SET "CurrentDrive_Temp1=%A"   & SET "CurrentDrive_Temp2=%B" 

D:\Desktop>SET "CurrentDrive_Temp1=113"   & SET "CurrentDrive_Temp2=60498046875" 

D:\Desktop>SET "CurrentDrive_Temp3=60" 

D:\Desktop>IF "4" GEQ "5" SET /A "CurrentDrive_Temp3+=1" 

D:\Desktop>IF "60" == "100" SET "CurrentDrive_Temp3=00"   & SET /A CurrentDrive_Temp1+=1" 

D:\Desktop>SET "CurrentDrive-FreeSpace=113.60" 

D:\Desktop>EXIT /B 

D:\Desktop>FOR /F "tokens=6 delims= " %A IN ('fsutil volume diskfree F:\ |FINDSTR /C:"Total # of bytes"') DO CALL:GetDriveInfo-Convert "CurrentDrive-TotalSpace" "%A" 

D:\Desktop>CALL:GetDriveInfo-Convert "CurrentDrive-TotalSpace" "214748360704" 

D:\Desktop>FOR /F %A IN ('powershell 214748360704 / 1024 / 1024 / 1024') DO SET "CurrentDrive_Temp=%A" 

D:\Desktop>SET "CurrentDrive_Temp=199.999996185303" 

D:\Desktop>FOR /F "Tokens=1-2 delims=." %A IN ("199.999996185303") DO SET "CurrentDrive_Temp1=%A"   & SET "CurrentDrive_Temp2=%B" 

D:\Desktop>SET "CurrentDrive_Temp1=199"   & SET "CurrentDrive_Temp2=999996185303" 

D:\Desktop>SET "CurrentDrive_Temp3=99" 

D:\Desktop>IF "9" GEQ "5" SET /A "CurrentDrive_Temp3+=1" 

D:\Desktop>IF "100" == "100" SET "CurrentDrive_Temp3=00"   & SET /A CurrentDrive_Temp1+=1" 

D:\Desktop>SET "CurrentDrive-TotalSpace=200.00" 

D:\Desktop>EXIT /B 

D:\Desktop>FOR /F %A IN ('powershell 200.00 - 113.60') DO Set "CurrentDrive-UsedSpace=%A" 

D:\Desktop>Set "CurrentDrive-UsedSpace=86.4" 

D:\Desktop>FOR /F "tokens=1-2 delims=." %A IN ('powershell 86.4 / 200.00 * 100') DO (
SET "CurrentDrive-UsedSpace-Percent1=%A"  
 SET "CurrentDrive-UsedSpace-Percent2=%B"  
 SET "CurrentDrive-UsedSpace-Percent2=!CurrentDrive-UsedSpace-Percent2:~0,1!"  
 SET "CurrentDrive-UsedSpace-Percent=!CurrentDrive-UsedSpace-Percent1!.!CurrentDrive-UsedSpace-Percent2!" 
) 

D:\Desktop>(
SET "CurrentDrive-UsedSpace-Percent1=43"  
 SET "CurrentDrive-UsedSpace-Percent2=2"  
 SET "CurrentDrive-UsedSpace-Percent2=!CurrentDrive-UsedSpace-Percent2:~0,1!"  
 SET "CurrentDrive-UsedSpace-Percent=!CurrentDrive-UsedSpace-Percent1!.!CurrentDrive-UsedSpace-Percent2!" 
) 

D:\Desktop>FOR /F "tokens=1-2 delims=." %A IN ('powershell 113.60 / 200.00 * 100') DO (
SET "CurrentDrive-FreeSpace-Percent1=%A"  
 SET "CurrentDrive-FreeSpace-Percent2=%B"  
 SET "CurrentDrive-FreeSpace-Percent2=!CurrentDrive-FreeSpace-Percent2:~0,1!"  
 SET "CurrentDrive-FreeSpace-Percent=!CurrentDrive-FreeSpace-Percent1!.!CurrentDrive-FreeSpace-Percent2!" 
) 

D:\Desktop>(
SET "CurrentDrive-FreeSpace-Percent1=56"  
 SET "CurrentDrive-FreeSpace-Percent2=8"  
 SET "CurrentDrive-FreeSpace-Percent2=!CurrentDrive-FreeSpace-Percent2:~0,1!"  
 SET "CurrentDrive-FreeSpace-Percent=!CurrentDrive-FreeSpace-Percent1!.!CurrentDrive-FreeSpace-Percent2!" 
) 

D:\Desktop>ECHO Drive Information For F: 
Drive Information For F:

D:\Desktop>ECHO/ Used Space: 86.4 (43.2%) 
 Used Space: 86.4 (43.2%)

D:\Desktop>ECHO/ Free Space: 113.60 (56.8%) 
 Free Space: 113.60 (56.8%)

D:\Desktop>ECHO/ Total Space: 200.00 
 Total Space: 200.00

D:\Desktop>ECHO/

D:\Desktop>EXIT /B 

D:\Desktop>fsutil fsinfo statistics G:\   | FINDSTR /I /C:"The FSUTIL utility requires a local NTFS volume."   1>nul  || CALL:GetDriveInfo G:\ 

D:\Desktop>SET "CurrentDrive=G:\" 

D:\Desktop>SET "CurrentDrive=G: 

D:\Desktop>FOR /F "tokens=7 delims= " %A IN ('fsutil volume diskfree G:\ |FINDSTR /C:"Total # of free bytes"') DO Call:GetDriveInfo-Convert "CurrentDrive-FreeSpace" "%A" 

D:\Desktop>Call:GetDriveInfo-Convert "CurrentDrive-FreeSpace" "214605746176" 

D:\Desktop>FOR /F %A IN ('powershell 214605746176 / 1024 / 1024 / 1024') DO SET "CurrentDrive_Temp=%A" 

D:\Desktop>SET "CurrentDrive_Temp=199.867176055908" 

D:\Desktop>FOR /F "Tokens=1-2 delims=." %A IN ("199.867176055908") DO SET "CurrentDrive_Temp1=%A"   & SET "CurrentDrive_Temp2=%B" 

D:\Desktop>SET "CurrentDrive_Temp1=199"   & SET "CurrentDrive_Temp2=867176055908" 

D:\Desktop>SET "CurrentDrive_Temp3=86" 

D:\Desktop>IF "7" GEQ "5" SET /A "CurrentDrive_Temp3+=1" 

D:\Desktop>IF "87" == "100" SET "CurrentDrive_Temp3=00"   & SET /A CurrentDrive_Temp1+=1" 

D:\Desktop>SET "CurrentDrive-FreeSpace=199.87" 

D:\Desktop>EXIT /B 

D:\Desktop>FOR /F "tokens=6 delims= " %A IN ('fsutil volume diskfree G:\ |FINDSTR /C:"Total # of bytes"') DO CALL:GetDriveInfo-Convert "CurrentDrive-TotalSpace" "%A" 

D:\Desktop>CALL:GetDriveInfo-Convert "CurrentDrive-TotalSpace" "214748360704" 

D:\Desktop>FOR /F %A IN ('powershell 214748360704 / 1024 / 1024 / 1024') DO SET "CurrentDrive_Temp=%A" 

D:\Desktop>SET "CurrentDrive_Temp=199.999996185303" 

D:\Desktop>FOR /F "Tokens=1-2 delims=." %A IN ("199.999996185303") DO SET "CurrentDrive_Temp1=%A"   & SET "CurrentDrive_Temp2=%B" 

D:\Desktop>SET "CurrentDrive_Temp1=199"   & SET "CurrentDrive_Temp2=999996185303" 

D:\Desktop>SET "CurrentDrive_Temp3=99" 

D:\Desktop>IF "9" GEQ "5" SET /A "CurrentDrive_Temp3+=1" 

D:\Desktop>IF "100" == "100" SET "CurrentDrive_Temp3=00"   & SET /A CurrentDrive_Temp1+=1" 

D:\Desktop>SET "CurrentDrive-TotalSpace=200.00" 

D:\Desktop>EXIT /B 

D:\Desktop>FOR /F %A IN ('powershell 200.00 - 199.87') DO Set "CurrentDrive-UsedSpace=%A" 

D:\Desktop>Set "CurrentDrive-UsedSpace=0.129999999999995" 

D:\Desktop>FOR /F "tokens=1-2 delims=." %A IN ('powershell 0.129999999999995 / 200.00 * 100') DO (
SET "CurrentDrive-UsedSpace-Percent1=%A"  
 SET "CurrentDrive-UsedSpace-Percent2=%B"  
 SET "CurrentDrive-UsedSpace-Percent2=!CurrentDrive-UsedSpace-Percent2:~0,1!"  
 SET "CurrentDrive-UsedSpace-Percent=!CurrentDrive-UsedSpace-Percent1!.!CurrentDrive-UsedSpace-Percent2!" 
) 

D:\Desktop>(
SET "CurrentDrive-UsedSpace-Percent1=0"  
 SET "CurrentDrive-UsedSpace-Percent2=0649999999999975"  
 SET "CurrentDrive-UsedSpace-Percent2=!CurrentDrive-UsedSpace-Percent2:~0,1!"  
 SET "CurrentDrive-UsedSpace-Percent=!CurrentDrive-UsedSpace-Percent1!.!CurrentDrive-UsedSpace-Percent2!" 
) 

D:\Desktop>FOR /F "tokens=1-2 delims=." %A IN ('powershell 199.87 / 200.00 * 100') DO (
SET "CurrentDrive-FreeSpace-Percent1=%A"  
 SET "CurrentDrive-FreeSpace-Percent2=%B"  
 SET "CurrentDrive-FreeSpace-Percent2=!CurrentDrive-FreeSpace-Percent2:~0,1!"  
 SET "CurrentDrive-FreeSpace-Percent=!CurrentDrive-FreeSpace-Percent1!.!CurrentDrive-FreeSpace-Percent2!" 
) 

D:\Desktop>(
SET "CurrentDrive-FreeSpace-Percent1=99"  
 SET "CurrentDrive-FreeSpace-Percent2=935"  
 SET "CurrentDrive-FreeSpace-Percent2=!CurrentDrive-FreeSpace-Percent2:~0,1!"  
 SET "CurrentDrive-FreeSpace-Percent=!CurrentDrive-FreeSpace-Percent1!.!CurrentDrive-FreeSpace-Percent2!" 
) 

D:\Desktop>ECHO Drive Information For G: 
Drive Information For G:

D:\Desktop>ECHO/ Used Space: 0.129999999999995 (0.0%) 
 Used Space: 0.129999999999995 (0.0%)

D:\Desktop>ECHO/ Free Space: 199.87 (99.9%) 
 Free Space: 199.87 (99.9%)

D:\Desktop>ECHO/ Total Space: 200.00 
 Total Space: 200.00

D:\Desktop>ECHO/

D:\Desktop>EXIT /B 

D:\Desktop>fsutil fsinfo statistics H:\   | FINDSTR /I /C:"The FSUTIL utility requires a local NTFS volume."   1>nul  || CALL:GetDriveInfo H:\ 

D:\Desktop>fsutil fsinfo statistics I:\   | FINDSTR /I /C:"The FSUTIL utility requires a local NTFS volume."   1>nul  || CALL:GetDriveInfo I:\ 

D:\Desktop>SET "CurrentDrive=I:\" 

D:\Desktop>SET "CurrentDrive=I: 

D:\Desktop>FOR /F "tokens=7 delims= " %A IN ('fsutil volume diskfree I:\ |FINDSTR /C:"Total # of free bytes"') DO Call:GetDriveInfo-Convert "CurrentDrive-FreeSpace" "%A" 

D:\Desktop>Call:GetDriveInfo-Convert "CurrentDrive-FreeSpace" "906973425664" 

D:\Desktop>FOR /F %A IN ('powershell 906973425664 / 1024 / 1024 / 1024') DO SET "CurrentDrive_Temp=%A" 

D:\Desktop>SET "CurrentDrive_Temp=844.684825897217" 

D:\Desktop>FOR /F "Tokens=1-2 delims=." %A IN ("844.684825897217") DO SET "CurrentDrive_Temp1=%A"   & SET "CurrentDrive_Temp2=%B" 

D:\Desktop>SET "CurrentDrive_Temp1=844"   & SET "CurrentDrive_Temp2=684825897217" 

D:\Desktop>SET "CurrentDrive_Temp3=68" 

D:\Desktop>IF "4" GEQ "5" SET /A "CurrentDrive_Temp3+=1" 

D:\Desktop>IF "68" == "100" SET "CurrentDrive_Temp3=00"   & SET /A CurrentDrive_Temp1+=1" 

D:\Desktop>SET "CurrentDrive-FreeSpace=844.68" 

D:\Desktop>EXIT /B 

D:\Desktop>FOR /F "tokens=6 delims= " %A IN ('fsutil volume diskfree I:\ |FINDSTR /C:"Total # of bytes"') DO CALL:GetDriveInfo-Convert "CurrentDrive-TotalSpace" "%A" 

D:\Desktop>CALL:GetDriveInfo-Convert "CurrentDrive-TotalSpace" "1000202432512" 

D:\Desktop>FOR /F %A IN ('powershell 1000202432512 / 1024 / 1024 / 1024') DO SET "CurrentDrive_Temp=%A" 

D:\Desktop>SET "CurrentDrive_Temp=931.51110458374" 

D:\Desktop>FOR /F "Tokens=1-2 delims=." %A IN ("931.51110458374") DO SET "CurrentDrive_Temp1=%A"   & SET "CurrentDrive_Temp2=%B" 

D:\Desktop>SET "CurrentDrive_Temp1=931"   & SET "CurrentDrive_Temp2=51110458374" 

D:\Desktop>SET "CurrentDrive_Temp3=51" 

D:\Desktop>IF "1" GEQ "5" SET /A "CurrentDrive_Temp3+=1" 

D:\Desktop>IF "51" == "100" SET "CurrentDrive_Temp3=00"   & SET /A CurrentDrive_Temp1+=1" 

D:\Desktop>SET "CurrentDrive-TotalSpace=931.51" 

D:\Desktop>EXIT /B 

D:\Desktop>FOR /F %A IN ('powershell 931.51 - 844.68') DO Set "CurrentDrive-UsedSpace=%A" 

D:\Desktop>Set "CurrentDrive-UsedSpace=86.83" 

D:\Desktop>FOR /F "tokens=1-2 delims=." %A IN ('powershell 86.83 / 931.51 * 100') DO (
SET "CurrentDrive-UsedSpace-Percent1=%A"  
 SET "CurrentDrive-UsedSpace-Percent2=%B"  
 SET "CurrentDrive-UsedSpace-Percent2=!CurrentDrive-UsedSpace-Percent2:~0,1!"  
 SET "CurrentDrive-UsedSpace-Percent=!CurrentDrive-UsedSpace-Percent1!.!CurrentDrive-UsedSpace-Percent2!" 
) 

D:\Desktop>(
SET "CurrentDrive-UsedSpace-Percent1=9"  
 SET "CurrentDrive-UsedSpace-Percent2=32142435400586"  
 SET "CurrentDrive-UsedSpace-Percent2=!CurrentDrive-UsedSpace-Percent2:~0,1!"  
 SET "CurrentDrive-UsedSpace-Percent=!CurrentDrive-UsedSpace-Percent1!.!CurrentDrive-UsedSpace-Percent2!" 
) 

D:\Desktop>FOR /F "tokens=1-2 delims=." %A IN ('powershell 844.68 / 931.51 * 100') DO (
SET "CurrentDrive-FreeSpace-Percent1=%A"  
 SET "CurrentDrive-FreeSpace-Percent2=%B"  
 SET "CurrentDrive-FreeSpace-Percent2=!CurrentDrive-FreeSpace-Percent2:~0,1!"  
 SET "CurrentDrive-FreeSpace-Percent=!CurrentDrive-FreeSpace-Percent1!.!CurrentDrive-FreeSpace-Percent2!" 
) 

D:\Desktop>(
SET "CurrentDrive-FreeSpace-Percent1=90"  
 SET "CurrentDrive-FreeSpace-Percent2=6785756459941"  
 SET "CurrentDrive-FreeSpace-Percent2=!CurrentDrive-FreeSpace-Percent2:~0,1!"  
 SET "CurrentDrive-FreeSpace-Percent=!CurrentDrive-FreeSpace-Percent1!.!CurrentDrive-FreeSpace-Percent2!" 
) 

D:\Desktop>ECHO Drive Information For I: 
Drive Information For I:

D:\Desktop>ECHO/ Used Space: 86.83 (9.3%) 
 Used Space: 86.83 (9.3%)

D:\Desktop>ECHO/ Free Space: 844.68 (90.6%) 
 Free Space: 844.68 (90.6%)

D:\Desktop>ECHO/ Total Space: 931.51 
 Total Space: 931.51

D:\Desktop>ECHO/

D:\Desktop>EXIT /B 

D:\Desktop>pause
Press any key to continue . . . 

D:\Desktop>EXIT /B 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T12:52:36.603

**新答案**

当我看到您编辑的帖子时，我正在开发一个正确地对结果进行四舍五入的答案。

如果您打算使用 PowerShell，那么您不妨真正使用它。我发现了这个[Windows PowerShell Tip of the Week](http://technet.microsoft.com/en-us/library/ee692795.aspx)，它展示了如何格式化数字。

整个脚本可能最好使用 PowerShell 完成，但我对该语言没有任何专业知识。所以我把这个混合脚本放在一起。即使是混合解决方案，也可能有更好的方法，但这是可行的。它比原来的要快得多，因为它将 PowerShell 调用次数减少到每个驱动器一次。

```
@echo off
setlocal enableDelayedExpansion
cls
for /f "tokens=1*" %%A in ('fsutil fsinfo drives') do for %%C in (%%B) do (
  fsutil fsinfo statistics %%C |FINDSTR /I /C:"The FSUTIL utility requires a local NTFS volume." >nul || CALL:GetDriveInfo %%C
)
exit /b

:GetDriveInfo
set "free="
for /f "tokens=2 delims=:" %%A in ('fsutil volume diskfree %~1') do (
  if not defined free (set free=%%A) else (set total=%%A & goto :break)
)
:break
set "cmd=$used=%total%-%free%;$usedP=$used/%total%;$used=$used/1073741824;$freeP=%free%/%total%;$free=%free%/1073741824;$total=%total%/1073741824;"{0:N2}" -f $used;"{0:P1}" -f $usedP;"{0:N2}" -f $free;"{0:P1}" -f $freeP;"{0:N2}" -f $total"
set i=0
for /f "delims=" %%N in ('echo !cmd!^|powershell -Command -') do (
  set /a i+=1
  set n!i!=%%N
)
set "drive=%~1"
echo Drive Information For %drive:\=%
echo Used Space: %n1% (%n2: =%)
echo Free Space: %n3% (%n4: =%)
echo Total Space: %n5%
exit /b 
```

我不喜欢使用 FSUTIL，因为它需要管理员权限，它仅限于 NTFS 卷，而且您的脚本在每个驱动器上调用它两次，再加上一次。

我认为使用单个 WMIC 调用更简单、更好。此解决方案不限于 NTFS 驱动器。

*编辑 - 我通过学习如何正确格式化具有多个变量引用的整个字符串来简化了 powershell 代码。我可以对以前基于 FSUTIL 的解决方案做同样的事情*

我仍然对 PowerShell 输出进行后处理，以删除 PowerShell 在 % 符号之前插入的空间。

```
@echo off
setlocal enableDelayedExpansion
cls
set "printCmd=;"Used Space: {0:N2} ({1:P1}^)`nFree Space: {2:N2} ({3:P1}^)`nTotal Space: {4:N2}" -f $used,$usedP,$free,$freeP,$total"
for /f "skip=1 tokens=1-3 delims= " %%A in ('wmic logicalDisk get deviceId^, freeSpace^, size') do if "%%C" neq "" (
  set "defineVarsCmd=$used=%%C-%%B;$usedP=$used/%%C;$used=$used/1073741824;$freeP=%%B/%%C;$free=%%B/1073741824;$total=%%C/1073741824"
  echo Drive Information For %%A
  for /f "delims=" %%S in ('echo !defineVarsCmd!!printCmd!^|powershell -Command -') do (
    set "str=%%S"
    echo !str: %%=%%!
  )
  echo(
) 
```

我敢肯定，了解 PowerShell 的人可以轻松地从上面删除批处理部分，并提供更短的纯 PowerShell 脚本。

**原始答案**

*注意 - 这个原始答案在小数点后第二位被截断。它不做任何舍入*

把数字分成两部分，整数和小数。“00”附加到小数部分以确保它至少有 2 位数字。然后将数字重新组合在一起，在此过程中将小数部分截断为 2 位。

以下代码需要一个十进制数作为第一个也是唯一的参数。

```
@echo off
setlocal
set num=%1
set part1=%num:.=&rem %
set "part2=%num:*.=%"
if "%part2%" neq "%num%" (set "part2=%part2%00") else set "part2=00"
set "num=%part1%.%part2:~0,2%
echo num=%num% 
```

棘手的部分是获得整数部分。我使用变量扩展搜索和替换将 REM 命令注入到 SET 语句中。

如果 num =19.123，则`set part1=%num:.=&rem %`变为`set part2=19&rem 123`

**本机批处理方法将十进制数四舍五入到 1/100 精度**

我喜欢您使用 FOR /F 将数字解析为整数部分和小数部分。但是您的原始代码在舍入逻辑方面存在潜在问题。

我还没有准确诊断出您的一个驱动器号失败的原因，但是您的代码中存在一个问题，其值类似于`1.09`. SET /A 将解释`09`为十六进制并抛出错误，因为 9 不是有效的十六进制数字。如果在 之前缺少整数部分，您的方法也会出现问题`.`，尽管在您的情况下绝不应该发生这种情况。

我认为这些问题中的任何一个都不会导致您的特定失败，但我认为我会提供一种纯批处理方法，该方法应该可靠地将任何十进制数四舍五入到 1/100 精度。

同样，脚本需要一个十进制数作为第一个也是唯一的参数。

```
@echo off
setlocal
for /f "tokens=1,2 delims=." %%A in ("0%~1") do (
  set "part1=%%A"
  set "part2=1%%B000"
)
for /f "tokens=* delims=0" %%N in ("%part1%1") do (
  set /a "part1=%%N/10, roundup=%part2:~3,1%/5, part2=%part2:~0,3%+roundup, part1+=(part2/200)"
)
set "num=%part1%.%part2:~1,2%"
echo num=%num% 
```

最后，这是另一个版本，它将十进制位数作为第二个参数保留。只要输入数字小于 200000000 并且请求的小数位数小于或等于 9，它就应该始终有效。

```
@echo off
:roundDecimal  number  precision
setlocal enableDelayedExpansion
for /f "tokens=1,2 delims=." %%A in ("0%~1") do (
  set "part1=%%A"
  set "part2=1%%B0000000000"
)
set /a len=%~2+1
for /f "tokens=* delims=0" %%N in ("%part1%1") do (
  set /a "part1=%%N/10, roundup=!part2:~%len%,1!/5, part2=!part2:~0,%len%!+roundup"
  set /a "part1+=(!part2:~0,1!/2)"
)
if %~2 gtr 0 (set num=%part1%.!part2:~1,%~2!) else set num=%part1%
echo num=%num% 
```

# github - 为什么 git push origin master 死了？

> ID：12652403
> 
> 赞同：1
> 
> 时间：2012-09-29T11:42:27.817
> 
> 标签：github, commit, freeze, repository

我一直在尝试推送到我的 github 存储库之一，并且不确定是否有问题或问题出在哪里。

我的仓库在这里： [https ://github.com/frequent/tableview](https://github.com/frequent/tableview)

我克隆了这个：

```
git clone https://git.github.com/frequent/tableview 
```

把它放在本地，这工作正常，所以我`.git`在新克隆的`tableview`文件夹中有一个文件夹，里面有很多文件。然后我将所有文件添加到`tableview`文件夹和命令行中：

```
git add "all my files"
git commit -m "initial commit"
git push origin master 
```

然后什么也没有发生。没有错误，什么都没有。几分钟后，我`CTRL+C`逃脱并再次尝试，但没有任何成功。我尝试重新添加重新提交，但我的工作目录是干净的。

**问题：**
为什么我不能提交。从我的基本理解来看，我没有做错什么吗？或者我的回购有问题。

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T11:46:13.317

你有防火墙吗？也许它阻止了通过 git 端口的传出连接。Afaik 是 9418 端口。

# mysql - 将自动增量大小设置为 200001 和偏移量 10000

> ID：12652405
> 
> 赞同：1
> 
> 时间：2012-09-29T11:42:49.277
> 
> 标签：mysql, auto-increment

我正在尝试在 my.cnf 中设置`auto_increment_increment = 200001`和`auto_increment_offset = 10000` ，但是当我这样做时，`show variable like '%auto%'`它给出的最大增量值为 65535。

然后，我创建了一个自动增量值为 200001 的表，并插入了空值。当我这样做`select * from table;`时，它会给出不适当的结果。

如何将自动增量值设置为更多 65535，如果我在表中插入任何值，如何获得正确的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T12:19:15.347

看起来 auto_increment_increment 限制为 65535：

[http://dev.mysql.com/doc/refman/5.0/en/replication-options-master.html#sysvar_auto_increment_increment](http://dev.mysql.com/doc/refman/5.0/en/replication-options-master.html#sysvar_auto_increment_increment)

# mediaelement.js - 是否可以禁用 mediaelement.js 中的“mejs-time-float”元素？

> ID：12652408
> 
> 赞同：1
> 
> 时间：2012-09-29T11:43:28.850
> 
> 标签：mediaelement.js

是否可以禁用悬停时出现在 MediaElement 播放器上方的“mejs-time-float”元素（此处显示为 5:01）？

![](../Images/6646a9918377e619201176d8079a3fa2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:00:14.730

简单地隐藏 span.mejs-time-float 并不能解决这个问题，因为它已经默认隐藏，并且当您将鼠标悬停在 span.mejs-time-total 上时会显示（使用 jQuery .show()）：

```
total = controls.find('.mejs-time-total') 
```

...

```
total
.bind('mousedown', function (e) {
    // only handle left clicks
    if (e.which === 1) {
        mouseIsDown = true;
        handleMouseMove(e);
        $(document)
            .bind('mousemove.dur', function(e) {
                handleMouseMove(e);
            })
            .bind('mouseup.dur', function (e) {
                mouseIsDown = false;
                timefloat.hide();
                $(document).unbind('.dur');
            });
        return false;
    }
})
.bind('mouseenter', function(e) {
    mouseIsOver = true;
    $(document).bind('mousemove.dur', function(e) {
        handleMouseMove(e);
    });
    if (!mejs.MediaFeatures.hasTouch) {
        timefloat.show();
    }
})
.bind('mouseleave',function(e) {
    mouseIsOver = false;
    if (!mouseIsDown) {
        $(document).unbind('.dur');
        timefloat.hide();
    }
}); 
```

实际禁用小工具提示功能的快速而肮脏的选项是删除上面的“mouseenter”绑定或直接在其后面添加以下内容：

```
total.unbind('mouseenter'); 
```

这将取消绑定 mouseenter 事件。

但这有点难看，因为您正在修改库，并且如果您更新了库，所有更改都将被删除。更好的方法是在初始化 MediaElement 播放器后简单地取消绑定：

```
$('video').mediaelementplayer({ 
... your options ...
});

$('.mejs-time-total').unbind('mouseenter'); 
```

现在悬停时不会出现小工具提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T09:34:46.723

MediaElement 可以通过 CSS 换肤，因此您只需将其隐藏在 CSS 中即可。

```
.mejs-time-float{ 
    display: none;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-15T10:48:46.767

将此设置为“显示：无”没有帮助，但如果你使用“！important”除此之外，似乎工作得很好，因为重要将覆盖jQuery添加的内联样式：

```
.mejs-time-float {
  display: none !important;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T18:17:05.547

取消绑定 mouseeenter 可以解决悬停问题，但在某些浏览器中，当我们单击进度条时，我们仍然会看到时间浮动。我不认为这是理想的，但它可以工作，因为 jQuery .show() 不会触及可见性：

```
.mejs-time-float {
    visibility: hidden;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-13T07:01:42.767

禁用在进度条中显示时间弹出窗口的工具提示：

```
$('video, audio').mediaelementplayer({

    enableProgressTooltip: false

}); 
```

# c# - 新行不会添加到 datagridview

> ID：12652410
> 
> 赞同：0
> 
> 时间：2012-09-29T11:43:44.457
> 
> 标签：c#, .net, visual-studio-2010, c#-4.0, datagridview

我是 C# 的初学者。我有一个[XML 文件 (xmlfile.xml)](http://dl.dropbox.com/u/87374848/xmlfile.xml)，其中包含一些文本。

在表单加载事件中，我正在读取 XML 文件并将其显示在`datagridview1`表单`mainForm`中。

我正在使用下面的代码来做到这一点

```
DataSet ds = new DataSet();
ds.ReadXml(@"D:\xmlfile.xml");
dataGridView1.DataSource = ds.Tables[0].DefaultView;
dataGridView1.Tag = ds;   /* TAG */ 
```

我有另一种形式`noteForm`，其中有`textBox1`和`btnSub`按钮。每当用户单击`btnSub`按钮时`textBox1.Text`，应将其添加`dataGridView1`到`mainForm`

我正在尝试下面的代码来做到这一点

```
 string strTitle;
            string[] row = new string[] { strTitle, DateTime.Now.ToString("M/d/y"), "checked" };
            _parent.dataGridView1.Tag.Tables[0].Rows.Add(row);
            _parent.dataGridView1.Rows.Add();
            _parent.dataGridView1.DataSource = _parent.dataGridView1.Tag.Tables[0].DefaultView; 
```

上面的代码显示错误——“当控件绑定数据时，无法以编程方式将行添加到 DataGridView 的行集合中。”

我无法理解这个错误是什么。请帮忙。

**_parent 只是`mainForm`形式`noteForm`**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T11:54:20.310

将新行添加到您的 DataSet`ds`不要 `dataGridView1`

```
ds.Tables[0].Rows.Add(row) 
```

**编辑**

```
string strTitle;
string[] row = new string[] { strTitle, DateTime.Now.ToString("M/d/y"), "checked" };
DataSet ds = (DataSet)_parent.dataGridView1.Tag;
ds.Tables[0].Rows.Add(row); 
```

# php - 如何路由相同的 Codeigniter 控制器

> ID：12652411
> 
> 赞同：0
> 
> 时间：2012-09-29T11:43:46.593
> 
> 标签：php, codeigniter, routing, controller, remap

我的 Codeigniter 项目有一长串相同的类别，每个类别都有许多相同的方法。

为了使其动态和清晰，我使用 _remap 函数在控制器中加载相同的方法。现在我正在尝试复制控制器

例如，我的控制器 Antelope.php Bat.php Cuckoo.php Dog.php Elephant.php... Zebra.php 都具有以下这种格式（我使用 _remap 将所有类似的方法压缩为一个）。

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Antelope extends CI_Controller {

    function __construct() {
        parent::__construct();
    }

    private function _remap($method, $params=array()){
       $this->animal = ucwords($this->router->fetch_class());
       $allowed_methods = array("Tame", "Buy", "Sell", "Gift");
       if (in_array($method, $allowed_methods)):
           // Model zoo has been autoloaded      
           data["foobar"] = $this->zoo->get_data($this->animal, $method);
           // Stuff goes here
       else:
          $this->index();
       endif;
    }

    public function index(){
       // Stuff goes here
    }
}

/** End of file Antelope.php **/ 
```

重新映射对 Antelope 及其所有重新映射的方法都很好，但是有没有办法让我将相同的方法应用于所有其他文件**，这样我就可以只使用一个 Animal.php 控制器文件了**？

我想我可能会使用 routes.php，但是控制器列表太长了；如果我明确列出每个“动物”路由，我将在路由文件中有数百行。

有什么办法吗？

**编辑：** “动物类型”列在数据库中，并且会随着时间的推移而不断增加。我不想继续重新访问该项目以创建新控制器或为数据库中的新元素添加新类！这就是我想使用动态路由方法的原因。[此外，该项目是一个网站重新设计，所以像http://www.website.com/antelope/buy/3](http://www.website.com/antelope/buy/3)这样的 URL需要保持不变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T17:44:48.727

诀窍是要意识到动物类型是可变的，并且您正在尝试将其映射到静态文件。**不要这样做。**只需将动物作为第一个参数传递给索引函数。这就是参数的用途：变量。

```
class Animal extends CI_Controller{
    function __construct(){
        parent::__construct();
    }

    function index($animal){
        echo "I'm the {$animal}!";
    }
} 
```

并设置单条路线：

`$route['animal/(:any)'] = "animal/index/$1";`

现在，如果你前往`http://localhost/yourapp/animal/antelope`

CodeIgniter 将回显“我是羚羊！”

## 发表评论后编辑：

CodeIgniter 在你的路由文件中从上到下遍历，并在找到有效文件时中断。您可以将其放在文件的**底部**`config/routes.php`：

```
$route['(:any)/buy/(:id)'] = "animal/$1/buy/$2";
$route[':any'] = "animal/index/$1";
//etc 
```

您需要重新路由高于此的所有其他控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T12:11:28.650

您可以尝试的几个选项是：

1.  有一个 Animals.php 基类并像这样继承所有其他类别

动物.php

```
class Animal extends CI_Controller {
    //Your _remap() and other methods
} 
```

Antelope.php Bat.php Cuckoo.php Dog.php Elephant.php... Zebra.php

```
require_once 'animal.php';

class Antelope extends Animal {
    //Antelope inherits its methods from Animal, so this is blank 
} 
```

此方法需要您拥有 100 个几乎空白的控制器文件（每个动物/类别一个），因此动态性不是很大，但允许您在 Animal 基类中实现 __init() 方法并在子类中覆盖它类，允许您设置类别中的任何偏差（即腿数等）

* * *

1.  为所有动物使用一条路线

路由.php

```
//default index route http://www.sample.com/animal/type
$route['animal/(:any)']  = 'animal/reroute/$1/index';

//method route http://www.sample.com/animal/type/method
$route['animal/(:any)/(:any)']  = 'animal/reroute/$1/$2'; 
```

动物.php

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Animal extends CI_Controller {

    function __construct() {
        parent::__construct();
    }

    public function index(){
       // Stuff goes here
    }

    public function reroute($animal, $method) {
       //Check the $animal is valid
       //Check the $method is valid
       //Do stuff   
    }

}

/** End of file animal.php **/ 
```

这有点动态，因为您可以从数据库中加载有效动物的列表，但 URL 不会像[http://www.sample.com/bat/sell](http://www.sample.com/bat/sell)与[http://www.sample一样干净.com/animal/bat/sell](http://www.sample.com/animal/bat/sell)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T12:13:03.297

只需创建一个要继承的类

```
class Animal extends CI_Controller {
   function __construct() {
        parent::__construct();
    }

    public function _remap($method, $params=array()){
       $this->animal = ucwords($this->router->fetch_class());
       $allowed_methods = array("Tame", "Buy", "Sell", "Gift");
       if (in_array($method, $allowed_methods)):
           // Model zoo has been autoloaded      
           data["foobar"] = $this->zoo->get_data($this->animal, $method);
           // Stuff goes here
       else:
          $this->index();
       endif;
    }
}

class Antelope extends Animal {
    public function index(){
       // Stuff goes here
    }
} 
```

# css - 如何删除上传取消按钮

> ID：12652413
> 
> 赞同：1
> 
> 时间：2012-09-29T11:44:07.367
> 
> 标签：css, jsf, jsf-2, primefaces

在我使用的 JSF 2.0 - Primefaces 应用程序中，我不想拥有

1.  进度条
2.  上传按钮
3.  显示在所选图像旁边的取消按钮（一旦选择图像）

另一个问题是我想将它设置为 1 的“fileLimit”，但是当我这样做时，它说属性无效。

这是我的代码：

```
<p:fileUpload id="related_image" fileUploadListener="#{fileUploadController.handleFileUpload}"  
        mode="advance"  
        auto="false" 
        showButtons="false"
        sizeLimit="100000"
        fileLimit ="1"
        allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
        style="width: 310px"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T17:01:00.430

基本上你所要做的就是分配找出正确的*css*选择器并设置它们`display:none;`（将它们放在你的 .css 文件中并包含它`<h:outputStylesheet`）

一般来说（在css中，您需要使用在CSS选择器中处理元素ID中的冒号来转义冒号[，](https://stackoverflow.com/a/656463/617373)*而*在jquery中您应该使用）`\3a` `\\:`

```
#some_prefix_id\3a your_file_upload_component_id .someClass{
    display:none;
} 
```

> 其中 some_prefix_id 可能是某个表单 id 或某个命名容器 id ，

*或（有时your_file_upload_component_id*之前没有前缀）

```
#your_file_upload_component_id .someClass{
    display:none;
} 
```

尽管 INMO 最好的方法是为您的表单分配一个 id 并在 css 中使用此选择器：

```
#your_form_id .someClass{
    display:none;
} 
```

现在到确切的选择器...

所以要删除*上传按钮*

```
#related_image .start{
    display:none;
} 
```

或者如果你想对 jquery 做同样的事情

```
$("#related_image .start").hide(); 
```

删除*显示在所选图像旁边的取消按钮（一旦选择图像）*

```
#related_image .cancel{
    display:none;
} 
```

或者如果你想对 jquery 做同样的事情

```
$("#related_image .cancel").hide(); 
```

删除进度条

```
#related_image .progress{
    display:none;
} 
```

或者如果你想对 jquery 做同样的事情

```
$("#related_image .progress").hide(); 
```

如果需要，您可以在 primefaces 展示上测试 jquery 方法，`#related_image`只需`#j_idt19\\:j_idt20` 将`$("#j_idt19\\:j_idt20 .start").hide();`

* * *

没有这样`fileLimit`的属性，看看[Tag fileUpload](http://www.primefaces.org/docs/vdl/3.4/primefaces-p/fileUpload.html)

# matlab - 操纵张量matlab

> ID：12652417
> 
> 赞同：1
> 
> 时间：2012-09-29T11:44:48.637
> 
> 标签：matlab

我必须对 3-d 稀疏矩阵进行操作（如果我不精确地表示这是稀疏矩阵，则会出现“内存不足”错误）。但是，使用 matlab 的默认工具箱，我无法创建稀疏张量。所以我安装了一些工具箱（tensor-toolbox 2.5： http: [//www.sandia.gov/~tgkolda/TensorToolbox/index-2.5.html](http://www.sandia.gov/~tgkolda/TensorToolbox/index-2.5.html)），我正在尝试使用 SPTENSOR 功能。但是，我的程序不再起作用（不支持某些操作）。==> ??? 在 200 Invalid RHS 处使用 ==> sptensor.subsasgn 时出错

你有什么想法来解决我的问题（通过使用这个工具箱，或者不）？

# zend-framework - Zend Framework：删除 LDAP 属性

> ID：12652423
> 
> 赞同：1
> 
> 时间：2012-09-29T11:45:38.560
> 
> 标签：zend-framework, attributes, ldap

我需要从节点（来自 ZFW）中删除 LDAP 属性。

我通常在 LDAP 中（直接从控制台）执行此操作如下：

```
CODE: SELECT ALL
ldapmodify [... irrelevant data removed...]
dn: uid=someuser,ou=users,dc=company,dc=com
changetype: modify
delete: pwdAccountLockedTime 
```

在 PHP 中，可以使用 ldap_mod_del ( [http://php.net/manual/en/function.ldap-mod-del.php](http://php.net/manual/en/function.ldap-mod-del.php) ) 删除属性。

**Zend Framework 中是否有任何内置函数可以执行相同的操作？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T03:40:45.010

The password policy overlay delete that attributes when the lock time expires. To do it yourself you would at least require the appropriate permissions in slapd.conf. It's an admin action, not a general user action.

# css - 另一个 Div 中的一个 Div 中的 CSS Div

> ID：12652429
> 
> 赞同：-1
> 
> 时间：2012-09-29T11:46:27.350
> 
> 标签：css, html

我试图弄清楚如何在另一个 div 中的 div 中定位 div。这甚至可能吗？我看过一些关于在另一个 div 中定位 div 的文章，但对我来说没有任何意义。我对 CSS 有点陌生，但我仍在努力掌握这个概念。

基本上我正在尝试使用定位的 div 来创建自定义的类似表格的效果。我的主 div 以页面为中心，宽 1000 像素，高 1200 像素。然后我在其中还有另外两个 div，将它分成左右两列，每列宽 500 像素，高 1200 像素。我很容易得到那部分。我现在正在尝试使用右栏中的另一个 div 将我的文本向下推。在顶部，我有一张高 300 像素、宽 500 像素的图片。我希望文字就在图片下方。

HTML 代码：

```
<div id="mbody" style="position:relative;">    

    <div id="lbody" style="position:absolute;">  

        Some Text

    </div>

    <div id="rbody" style="position:absolute; right:0;">  

        <img src="photo.jpg" height="300" width="500">

        <div style="position:absolute; width:500; height:1200; top:350;">

            Some Text

        </div>

    </div>

</div> 
```

CSS 代码：

```
#mbody{
    margin: 0px;
    margin-left:auto;
    margin-right:auto;
    top:-73px;
    border: 2px solid green;
    width: 1000px;
    height:1200px;
    background: black;
    z-index:1;
}
#lbody{
    margin: 0px;
    padding:0px;
    left:0px;
    border:2px solid red;
    width:500px;
    height:1200px;
    background:black;
}
#rbody{
    margin: 0px;
    padding:0px;
    border:2px solid blue;
    width:500px;
    height:1200px;
    background:black;
} 
```

请记住，我是 CSS 新手，仍在学习。如果有人回答，请以即使像我这样的初学者也能理解的方式回答。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T12:00:53.030

您需要在 CSS 中的所有 div id 名称之前添加“#”，例如。#mbody、#lbody 等

只有这样 html 才会知道您正在为 div 赋值

此外，可以通过以下方式在右栏的文本上方显示图像 `<img src="photo.jpg" height="300" width="500" style="float:right;">`

此外，它通常有助于在设计阶段在 css 中提供背景颜色，例如。 `#lbody {background:red;}` 这将帮助您了解 css 在屏幕上的翻译方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T11:52:49.633

对于 Css 的初学者，我建议您先了解 Css 基础知识，最好的入门方法是先参考 O'Reilly 的 Css 和 Html 书籍。

现在谈论标签和它的嵌套，你可以嵌套尽可能多的 div，只要你定位它们，对齐它们，浮动它们是一种正确的方法。许多与 div 标签相关的属性会帮助你。

接下来是开发和查看设计使用 Firefox 的 Firebug 功能来跟踪高度和宽度属性以及许多很酷的东西，所以如果您使用 Firefox，请安装 FIREBUG 一个很酷的设计师工具，让您在设计中获得优势。

首先通过基础知识。

希望这可能会有所帮助。

# php - MySQL - 在多列中添加行总数

> ID：12652434
> 
> 赞同：0
> 
> 时间：2012-09-29T11:47:05.377
> 
> 标签：php, mysql, sql, phpmyadmin

我有一个大约 100 列的 MySQL 表。所有列都是 INT。我希望能够通过其 ID 选择一行，并获得加在一起的所有列的总数。

还有两个额外的考虑。字段标题差异很大，因此我希望能够通过引用字段编号而不是字段标题来使其工作。

最后，我希望能够指定一个范围，例如，将字段 35 到字段 76 的总和相加，其中 id = 50。

有没有办法做到这一点？非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T11:58:02.947

您需要动态构建查询。

首先你需要列名（你也可以自动检索它们，但需要一个额外的查询）。最好的办法是将它们放在一个数组中：

```
$Fields = array(
   'id', 'fld2', 'fld3', ..., 'fld99'
);

function getSumField($from, $to, $allow_null = False)
{
    GLOBAL $Fields;
    $a_sum = array();
    for($i = $from; $i <= $to; $i++)
    {
        if ($allow_null)
            $a_sum[] = "COALESCE({$Fields[$i]},0)";
        else
            $a_sum[] = $Fields[$i];
    }
    return '('.implode('+', $a_sum).')';
}

// So we want: sum of fields 17-42 of the ONE ROW where ID = 5

$fld = getSumField(17, 42);
$SQL = "SELECT $fld FROM tbl WHERE id = 5;";

// Sum of same, in rows with ids from 7 to 22
$SQL = "SELECT SUM($fld) AS total FROM tbl WHERE id BETWEEN 7 AND 22;"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T11:57:10.430

您可以使用 info_schema 获取列列表：

```
select * from information_schema.columns where table_name='table' 
```

使用它，您可以构建一个列数组，进行查询并对值求和。它不是一个“一步”的过程，但它就足够了。

# function - gnuplot 忽略多分支拟合中的第二个分支

> ID：12652438
> 
> 赞同：3
> 
> 时间：2012-09-29T11:47:32.757
> 
> 标签：function, branch, gnuplot, curve

我想用 gnuplot 做一个多分支拟合。我定义了两个函数 z1(x) 和 z2(x)，我希望 z1(x) 适合所有数据，直到第 49 行，从第 50 行开始，它应该适合 z2(x)。这就是我在配件部分所做的：

```
z(x,y) = (y < 50) ? z1(x) : z2(x)

fit z(x,y) 'data.txt' using  1:-1:2  via a, b 
```

但是 gnuplot 完全忽略了 z2(x) 部分。我什至可以注释掉 z2(x) 的定义，它甚至没有给出错误或警告。它永远不会达到 y >= 50 的情况，但 data.txt 文件有 100 行。

此外，如果我之后绘制 z1(x) 和 z2(x)，它们只是常数零（z1 = z2 = 0），但拟合参数 a 和 b 大致（不完全，因为忽略了第二个分支）在正确的顺序。

我在这里做错了吗？有没有一个很好的例子（官方的 gnuplot fit 演示没有帮助）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T00:11:58.323

假设您在“data.txt”文件中的行号是`x`您的函数的变量`z(x)`，您可以使其更简单（实际上，这是工作所必需的！！！）。您的函数`z(x,y)`实际上只是`z(x)`在两个间隔上单独定义的单变量函数。我使用示例数据文件重新创建了您的问题，其中的范围`z1(x)`和`z2(x)`中断在我的数据文件的第 10 点（您想要 49 或 50 那里）。

以下代码可以满足您的要求；为前 10 个数据点和其余数据点定义`z(x)`不同的函数（这是`x`HAS 等于行号的地方），

```
z1(x) = a*x + b
a = 1.2
b = 1.2
z2(x) = a + b
z(x) = x < 10 ? z1(x) : z2(x) 
```

然后使用数据点行号 ( `column(0)`) 作为 x 并将相应行 ( `1`) 上的值作为 y`a`来拟合数据文件`b`

```
 fit z(x) 'data.txt' using (column(0)):1 via a,b 
```

并密谋看看我们是怎么做的

```
 plot 'data.txt' using (column(0)):1, z(x) 
```

如果这不起作用，您可以查看`index`用于绘制数据文件的选项。这需要将数据文件中的数据范围（前 50 个点）用一个空行（或两个，不记得）分隔，并相应地修改脚本。

# javascript - 简单的数学游戏问题（初学者的东西）

> ID：12652441
> 
> 赞同：0
> 
> 时间：2012-09-29T11:48:00.050
> 
> 标签：javascript, html, math, project

我有一个学校项目，我们正在制作一个没有 UI 的小型 JavaScript 游戏；这意味着我们只能使用提示、警报或其他弹出脚本。

游戏应该可以运行，至少在我将其与模块分开之前它可以运行。这是一个简单的数学游戏，用户得到随机的+，问题并且必须正确回答

### 问题

我似乎无法向用户提供任何提示。我也无法在 chrome 开发工具中调试它，你能立即看到任何看起来不对的地方吗？非常感谢您的帮助:)

这是 JSfiddle

[http://jsfiddle.net/vuTGa/1/](http://jsfiddle.net/vuTGa/1/)

这是我们的代码，我只发布了重要部分——我省略了 index.html 和 Mathgame.js，因为它们看起来很完美，而且它们不包含很多代码。

## MathGame.logic.js

```
mathGame.logic = (function() {
    "use strict";
    var createQuestion, getQuestion;
    createQuestion = function() {
        var tal1, tal2;
        tal1 = Math.ceil(Math.random() * 10);
        tal2 = Math.ceil(Math.random() * 10);
        return {
            tal1: tal1,
            tal2: tal2,
            result: function() {
                return tal1 + tal2;
            }
        };
    };
    getQuestion = function() {
        return createQuestion();
    };
    return {
        getQuestion: getQuestion
    };
}()); 
```

## MathGame.play.js

```
mathGame.play = function() {
    "use strict";
    var question, guess, answer, correct, questionGuess;
    // Starts game for user
    mathGame.ui.startCountDown();
    // Starts the timer in .logic
    // mathGame.logic.startCountDown();
    // Get random math
    question = mathGame.logic.getQuestion();
    // Send random math to User
    questionGuess = mathGame.ui.askMathQuestion(question.tal1, question.tal2);
    // The users guess
    guess = mathGame.ui.returnMathGuess;
    // See if the question is the same as the guess
    correct = (question() === guess);
    // Show the user how it went
    mathGame.ui.showResult(correct, guess, question);

    ##Mathgame.ui.js##
    mathGame.ui = {

        startCountDown: function() {
            "use strict";
            // Visa ready set go
            alert("READY");
            alert("SET");
            alert("GO");
        },
        askMathQuestion: function() {
            "use strict";
            prompt("askMathQuestion");
            //shows a math question to user
            // return Number(prompt(value1 + symbol +  value2));
            // e.g. value1 = 12
            //      value2 = 13
            //        symbol = "+"
            // 12 + 13  
            // return user guess
        },
        returnMathGuess: function() {
            "use strict";
        },
        showResult: function() {
            "use strict";
        }
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T12:40:19.100

好吧，到目前为止，我只能查明您代码中的小问题。由于您使用的是严格模式，因此无法全局访问窗口对象的属性。所以你需要使用`window.alert`或设置一个变量：

```
var alert = this.alert; // "this" being the global, window object 
```

`math.play`我注意到的第一件事是你的函数声明没有右括号。我修好了。但是您遇到的真正问题是您`mathGame`在创建它们之前引用了它们的属性。例如，在 的定义中`mathGame.play()`，您运行了函数`mathGame.ui.startCountDown();`，但`mathGame.ui`在调用下方的函数中定义了该函数。所以我把它取出来，让它可以访问它。这是您的脚本的普遍问题。

还有一部分你调用一个对象，就好像它是一个函数一样：

```
correct = (question() === guess); 
```

`question`已经被定义为函数的返回值，`mathGame.logic.getQuestion();`它是一个字符串。我想你把它和这个混淆了：

```
question = mathGame.logic.getQuestion;

correct = (question() === guess); // now this works 
```

我还修复了一些我认为多余的东西。如果您希望整个脚本处于严格模式，则在严格模式下创建一个闭包：

```
(function() {
    "using strict";
    // everything below is in strict mode
})(); 
```

这是整个代码：

```
(function() {
    "using strict";
    var mathGame = {},
        alert = this.alert,
        prompt = this.prompt;

    mathGame.play = function() {
        var question, guess, answer, correct, questionGuess;
        // Starts game for user
        mathGame.ui.startCountDown();
        // Starts the timer in .logic
        // mathGame.logic.startCountDown();
        // Get random math
        mathGame.logic = (function() {
            var createQuestion, getQuestion;
            createQuestion = function() {
                var tal1, tal2;
                tal1 = Math.ceil(Math.random() * 10);
                tal2 = Math.ceil(Math.random() * 10);
                return {
                    tal1: tal1,
                    tal2: tal2,
                    result: function() {
                        return tal1 + tal2;
                    }
                };
            };
            getQuestion = function() {
                return createQuestion();
            };
            return {
                getQuestion: getQuestion
            };
        }());

        question = mathGame.logic.getQuestion();
        // Send random math to User
        questionGuess = mathGame.ui.askMathQuestion(question.tal1, question.tal2);
        // The users guess
        guess = mathGame.ui.returnMathGuess;
        // See if the question is the same as the guess
        correct = (question === guess);
        // Show the user how it went
        mathGame.ui.showResult(correct, guess, question);
    };

    mathGame.ui = {

        startCountDown: function() {
            // Visa ready set go
            alert("READY");
            alert("SET");
            alert("GO");
        },
        askMathQuestion: function() {
            prompt("askMathQuestion");
            //shows a math question to user
            // return Number(prompt(value1 + symbol +  value2));
            // e.g. value1 = 12
            //      value2 = 13
            //        symbol = "+"
            // 12 + 13  
            // return user guess
        },
        returnMathGuess: function() {},
        showResult: function() {}

    };
    mathGame.play();
}).call(this); // global object 
```

[**JSFiddle 演示**](http://jsfiddle.net/gBW27/)

请注意，在代码的 HTML 部分中，我取出了一些脚本文件，因为它们在网站中不存在。如果您再次需要它们，它们是：

```
<script src="mathGame.js"></script>
<script src="mathGame.logic.js"></script>
<script src="mathGame.ui.js"></script>
<script src="mathGame.play.js"></script> 
```

# varnish - Security.vcl 清漆配置。？

> ID：12652442
> 
> 赞同：0
> 
> 时间：2012-09-29T11:48:02.733
> 
> 标签：varnish, varnish-vcl

我已经配置清漆。现在我想在上面配置security.vcl。我正在关注此链接 [http://www.slideshare.net/kimlindholm/varnish-configuration-step-by-step](http://www.slideshare.net/kimlindholm/varnish-configuration-step-by-step)。

我已经仔细配置了每个步骤。但是当我尝试访问幻灯片上提供的链接时，没有。13以上链接。我无法得到想要的结果。请告诉我哪里有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:15:58.347

很难猜测您的设置有什么问题，但我建议您从较新版本的 Security VCL 之一开始。

[https://github.com/comotion/security.vcl](https://github.com/comotion/security.vcl) - 你也可以在那里提交问题取得一些成功。

# mysql - MySql查询将小写更改为大写

> ID：12652444
> 
> 赞同：44
> 
> 时间：2012-09-29T11:48:16.133
> 
> 标签：mysql, sql, string

如何使用 MySql Query 将字符串中的所有小写字母更改为大写字母？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-09-29T11:51:31.927

如果要更新：

```
UPDATE my_table SET my_column = UPPER(my_column) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-29T11:49:40.330

看看使用[UPPER](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_upper)

> 根据当前字符集映射，返回所有字符都变为大写的字符串 str。

从链接

> UCASE() 是 UPPER() 的同义词。

看看这个例子

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/9706a/1/0)

[这是更改表数据的示例](http://www.sqlfiddle.com/#!2/67b3b/1/0)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-29T11:51:11.553

使用 upper() 或 UCASE()

例子：

```
SELECT UCASE(columnName) FROM `table_name` 
SELECT UPPER(columnName) FROM `table_name` 
```

更新

```
UPDATE table_name SET field_name = UPPER(field_name)
UPDATE table_name SET field_name = UCASE(field_name) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-29T11:49:15.097

您可以[`UPPER`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_upper)为此使用：

```
select upper(MyColumn) 
from MyTable 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-08-13T09:37:25.540

您可以使用此代码更改查询 SQL 的大写：

```
UPDATE penduduk SET dusun = UPPER(dusun); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-10-27T22:15:27.587

对于表上的列更新，它可能取决于您的排序规则是否**不区分大小写**。如果是这种情况，请尝试使用**二进制比较**：

```
update table_name
set column_name = BINARY UPPER(column_name) 
```

否则这应该工作，

```
update table_name
set column_name = UPPER(column_name) 
```

如果您使用的是**MYSQL Workbench**并且有**安全更新**，请尝试：

```
update table_name
set column_name = BINARY UPPER(column_name)
WHERE  column_name = BINARY LOWER(column_name) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-12-27T01:07:44.570

如果您使用的是 phpMyAdmin，请转到 SQL，然后键入

```
UPDATE `tableName` SET `ColumnName`=UPPER(`ColumnName`) 
```

例如：

```
UPDATE`cars` SET `Model`=UPPER(`Model`) 
```

然后保存它。

PS：如果您是学习者，请遵循此提示

在键入 之前`tablename`，您需要在之前和之后键入此符号**`**，以及在键入列名时。

# php - Codeigniter - 停止直接访问页面

> ID：12652446
> 
> 赞同：0
> 
> 时间：2012-09-29T11:48:33.707
> 
> 标签：php, codeigniter

我正在构建一个密码重置页面，在此操作的完成步骤中，用户输入他的密码并通过再次输入密码来确认，比较两个输入，如果这些输入相等，则更改密码，如果不是，则用户被定向到带有“没有成功消息”的页面。

这是我的逻辑：

在密码重置页面：

**echo form_open("登录名/密码重置器");**

我的**控制器：**

```
 function password_reseter() {
        $password1 = $this->input->post('password');
        $password2 = $this->input->post('password2');
        if ($password1 == $password2) {
            $data["proof"]=1;
            $reg_code = $this->input->post('rec_code');
            $this->load->model("membership_model");
            $this->membership_model->password_reseter($reg_code, $password2);
        }
        else{
            $data["proof"]=0;
        }

        $data["main_content"] = "reset_password_result";
        $this->load->view("includes/template", $data);
    } 
```

和**观点**：

```
<?php
if ($proof == 1) {
    ?>
    <div id="loginform">
        Your password has been changed, you may now login.
    </div>
    <?php
} else {
    ?>
    <div id="loginform">
        Your passwords don't match! <a href="javascript:history.back()">Go back.</a>
    </div>
    <?php
}
?> 
```

我有一个很大的安全问题，如果这个页面是通过 URL 直接访问的，我数据库上的所有帐户都在重置密码，我想停止直接访问这个 password_reseter 页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T12:07:48.437

You code fails because all you do is compare password 1 to password 2\.

If a user access the password_reseter function directly, then password1 is null, and password2 is null, so it passes your 'test'.

Furthermore, you then check for "$this->input->post('rec_code')", which will also be null.

I am betting that inside your model code, because "$this->input->post('rec_code')" is null (or false), your WHERE condition is getting ALL the users, and thus resetting all your passwords.

There are so many security issues here I'm not even going to fix your one problem above, but outline how to fix the issue.

I will say this - no offense - but you should not be writing an authentication library. There are so many prepared GOOD STRONG SECURITY focused libraries for codeigniter that you should just use one of them.

I recommend [ion_auth](http://benedmunds.com/ion_auth/), but [tank_auth](http://konyukhov.com/soft/tank_auth/) and [community_auth](http://community-auth.com/) are also quite good.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T13:13:41.343

当**用户完成前面的步骤**时，您应该设置一些**会话变量**。然后检查**password_reseter** **如果设置了这些会话变量** 如果没有将它们**重定向**到您想要的位置。

 ******** * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-16T13:23:55.607

## 最好使用 CI_ 内置功能进行密码验证。

> $autoload['libraries'] = array('database','email','form_validation');
> 
> $autoload['drivers'] = array('session');

**CI_CONTROLLER**

```
function save_password_change(){
        $this->form_validation->set_rules('password','password','trim|required|min_length[4]|xss_clean');
        $this->form_validation->set_rules('password_confirm','Password Confirmation','trim|required|matches[password]');
        if($this->form_validation->run() === FALSE){
            echo " Password Change Unsuccessful";
        }
        else{
            $this->load->model('model_password_mgr');       
            $return_value = $this->model_password_mgr->save_password(); 
            if(!$return_value)
                echo " Password Change Unsuccessful ";
            else {
                echo " Password Change Successful";
                redirect("home");
            }   
        }
    } 
```

**CI_MODEL**

```
function save_password(){
    $this->db->where('email', $_SESSION['email'] );
    $arr = array( 'password' => $this->input->post('password'));
    $data = $this->db->update('users', $arr);
    if(!$data)
        echo "PASSWORD CHANGE UNSUCCESSFUL";
    else 
        return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-16T12:07:17.530

```
if (!$_SERVER['HTTP_REFERER'])
{
    $this->redirect('error');
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-29T11:54:11.847

使用 htaccess 阻止文件将是一种解决方案：

```
<files login/password_reseter.php>
order allow,deny
deny from all
</files> 
```*******

# c# - .NET 图像未显示在 PictureBox 中

> ID：12652447
> 
> 赞同：1
> 
> 时间：2012-09-29T11:48:34.660
> 
> 标签：c#, .net, visual-studio-2010, c#-4.0

.NET 再次来袭……

在某个随机点，它停止显示我的 2 个图片框中的图像。从那时起创建的任何图片框都有同样的问题。设计器文件（我开始认为如果我自己创建它们会节省很多时间，而不是让 Visual Studio 生成它们然后把它们弄乱）显示出对我来说看起来很奇怪的东西。有问题的图片框是 pbxVolume1 和 pbxVolume2。在像 pbxPitch1 这样的 2 之前创建的其他图片框工作正常。

请协助。

整个解决方案可以在[http://bazaar.launchpad.net/~robinj/quantum-mix/trunk/files/2找到](http://bazaar.launchpad.net/~robinj/quantum-mix/trunk/files/2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-10T09:56:18.883

我希望你现在已经找到了你的解决方案。但作为参考，对于同一问题的未来问题，我仍然想提及以下替代方案。

尝试创建资源文件的 .dll 并通过“添加引用”将其包含在您的项目中。这将确保您的图像始终可用，并且您不会遇到上述 Resource.resx 问题。将原始资源文件作为不同解决方案的一部分。包括您需要的图像并创建 .dll 文件。将此 .dll 文件包含在您的主要解决方案中。对资源文件的任何更改都应在单独的解决方案中进行，并重新生成 .dll 以更新更改。您只需在主解决方案中包含更新后的 .dll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T14:22:50.833

您是否尝试过重新创建 PictureBoxes 或图像资源？我会首先尝试从您的资源中删除图像并重新添加它。如果您在设计器代码中找不到问题，请查看您的资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T00:37:46.573

我有你的解决方案并自己尝试过。同样的问题：图像是在设计器中加载的，而不是在运行时加载的。**但是**如果我打开 Resources.resx 并保存它而不触及任何东西，当我运行项目时，一切都很好。

所以，看来你的VS坏了。您是否安装了[服务包](http://www.microsoft.com/en-us/download/details.aspx?id=23691)和相关更新？

# php - 通过增加内存限制来提高网站速度？

> ID：12652451
> 
> 赞同：-2
> 
> 时间：2012-09-29T11:49:08.777
> 
> 标签：php, mysql, wordpress, memory, xampp

我正在使用 ubuntu 服务器：512MB ram / 1 CPU 我想通过调整 php、mysql 内存限制以适合我的服务器规格来提高我的 wordpress 站点速度。我正在使用 xampp 服务器。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-29T11:54:04.960

您可以调用覆盖函数来更改应用程序的本地内存限制，只需在 php 文件的顶部调用它：

```
ini_set('memory_limit', '64M'); //change 64M to whatever you like... 
```

或者在 php.ini 中全局更改它（在位于 '\xampp\php\php.ini' 的 xampp 中）：

```
memory_limit = 8M // search for this "memory_limit" and adjust it by your needs. 
```

之后重新启动apache ...

*   但根据我的经验，内存负载问题更多地与 MySQL 查询的执行有关，而不是单独运行 php 脚本。CPU 负载也几乎总是与写得不好的查询有关。

对于一个严肃的网络服务器来说，512mb 也是非常低的数量。

# networking - 确定子网中可能的地址数量/地址属于哪个子网？

> ID：12652455
> 
> 赞同：1
> 
> 时间：2012-09-29T11:49:58.577
> 
> 标签：networking, ip-address, bitmask, subnet

假设我们有一个带有子网掩码的 B 类网络`255.255.240.0`。我们如何检查这个子网中的最大主机数是多少？以及如何确定具有 IP 地址的子网主机`130.50.31.6`属于哪个子网？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T12:56:43.640

子网掩码只是一些二进制数`1`，表示“此空间不可用”。以子网掩码为例：

```
255.255.240.0 
```

这实际上由四个字节组成，它们在视觉上用点分隔（所谓的“点四边形”）。因此，在二进制中，这将是：

```
11111111 11111111 11110000 00000000 
```

定义地址的前 20 位的“掩码”，为您留下 12 个可寻址位。所以你的地址空间是：

```
00000000 00000000 00000000 00000000 -
00000000 00000000 00001111 11111111 
```

...加上您的基址是什么。即，在这种情况下，4096 个唯一地址（从二进制转换`00001111 11111111`）

基地址是一个数字，其`1`位完全包含在给定 IP 地址的“掩码”部分中。这就是子网掩码的“掩码”部分的含义：子网掩码内的任何地址，与子网掩码进行二进制与运算，将为您提供子网的基地址。

所以，让我们看一下这个例子中的地址和掩码：

```
 |   dotted quad    |             binary
------------+------------------+------------------------------------
    Address | 130\. 50\. 31\.  6  | 10000010 00110010 00011111 00000110
Subnet Mask | 255.255.240\.  0  | 11111111 11111111 11110000 00000000 
```

使用上面的规则，我们可以找到基地址：

```
 10000010 00110010 00011111 00000110
 & 11111111 11111111 11110000 00000000
---------------------------------------
   10000010 00110010 00010000 00000000 
```

或者，作为一个虚线四边形，`130.50.16.0`.

作为描述子网的简写形式，而不是指定“基地址”和“子网掩码”，它通常写为`<base address>`/ `<number of 1 bits in the mask>`。因此，在`130.50.31.6`给定子网掩码的情况下`255.255.240.0`，子网的完整描述是`130.50.16.0/20`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T12:21:57.980

您可以使用此计算器获取所有信息：

[http://www.subnet-calculator.com/subnet.php?net_class=B](http://www.subnet-calculator.com/subnet.php?net_class=B)

# sql - SQL中的左外连接问题

> ID：12652461
> 
> 赞同：2
> 
> 时间：2012-09-29T11:50:46.453
> 
> 标签：sql, teradata

我的代码看起来像这样：

```
select t1.colId, t1.col1, t1.col2, t1.col3, count(t2.colId)
from table1 t1 left outer join

(select colId from db1.tb90) t2 
on t1.colId = t2.colId
group by 1,2,3,4 
```

我想从 t1 复制所有行，并且 t2 应该在匹配的地方加入。

但是，`t1.colId`可以包含重复项并希望这些重复项存在。

我当前的问题是 select 语句执行不同的，`t1.colId`所以我得到不同的数量而不是`t1.colId`包含重复项。

有问题`on t1.colId = t2.colId`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T12:00:52.403

你问：问题出在`on t1.colId = t2.colId`哪里？答案是，不，问题出在`group by`. 尝试在子查询中按 colId 聚合：

```
select t1.colId, t1.col1, t1.col2, t1.col3, n
from table1 t1 left outer join    
   (select colId, count(*) as n 
    from db1.tb90 group by colId) t2 
on t1.colId = t2.colId 
```

**编辑到期的操作评论**

好的，这里[有一些数据可以理解您的问题](http://sqlfiddle.com/#!2/1c1436/2)：

```
create table table1 (
  colId int,
  col1 int,
  col2 int,
  col3 int
);

create table tb90 (
  colId int
);

insert into table1 values
( 1,1,1,1),
( 1,1,1,1),
( 2,2,2,2);

insert into tb90 values
(1),
(1),
(3); 
```

您的查询结果：

```
select t1.colId, t1.col1, t1.col2, t1.col3, count(t2.colId)
from table1 t1 left outer join
(select colId from tb90) t2 
on t1.colId = t2.colId
group by 1,2,3,4;

| COLID | COL1 | COL2 | COL3 | COUNT(T2.COLID) |
------------------------------------------------
|     1 |    1 |    1 |    1 |               4 |
|     2 |    2 |    2 |    2 |               0 | 
```

我的查询结果：

```
select t1.colId, t1.col1, t1.col2, t1.col3, n
from table1 t1 left outer join    
   (select colId, count(*) as n 
    from tb90 group by colId) t2 
on t1.colId = t2.colId

| COLID | COL1 | COL2 | COL3 |      N |
---------------------------------------
|     1 |    1 |    1 |    1 |      2 |
|     1 |    1 |    1 |    1 |      2 |
|     2 |    2 |    2 |    2 | (null) | 
```

现在，写下加急结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:06:07.877

给定以下数据：

```
CREATE TABLE table1
(
    colID   INTEGER NOT NULL,
    col1    INTEGER NOT NULL,
    col2    INTEGER NOT NULL,
    col3    INTEGER NOT NULL,
    PRIMARY KEY(colID, col1, col2, col3)
);
INSERT INTO table1 VALUES(1, 1, 1, 1);
INSERT INTO table1 VALUES(1, 2, 1, 1);
INSERT INTO table1 VALUES(1, 1, 2, 1);
INSERT INTO table1 VALUES(1, 1, 1, 2);
INSERT INTO table1 VALUES(2, 2, 1, 1);
INSERT INTO table1 VALUES(2, 1, 2, 1);
CREATE TABLE db1.tb90
(
    colID   INTEGER NOT NULL,
    col4    INTEGER NOT NULL,
    PRIMARY KEY(ColID, Col4)
);
INSERT INTO db1.tb90 VALUES(1, 1);
INSERT INTO db1.tb90 VALUES(1, 2);
INSERT INTO db1.tb90 VALUES(1, 3);
INSERT INTO db1.tb90 VALUES(1, 4);
INSERT INTO db1.tb90 VALUES(1, 5); 
```

您的查询：

```
SELECT t1.colId, t1.col1, t1.col2, t1.col3, COUNT(t2.colId)
  FROM table1 t1
  LEFT OUTER JOIN (SELECT colId FROM db1.tb90) t2 
    ON t1.colId = t2.colId
 GROUP BY 1, 2, 3, 4; 
```

产生输出：

```
colid   col1    col2    col3    (count)
1       1       1       1       5
1       1       1       2       5
1       1       2       1       5
1       2       1       1       5
2       1       2       1       0
2       2       1       1       0 
```

在 Mac OS X 10.7.5 上针对 IBM Informix Dynamic Server 11.70.FC2 运行时。

如果这是 Teradata 针对相同数据给出的答案，那么查询计划执行重复消除这一事实就不是问题了；答案是正确的。如果这不是 Teradata 对相同数据给出的答案，那么 Teradata 中可能存在一个错误（IMNSHO，尽管我必须小心地对其他人的 DBMS 进行诽谤，因为我在 IBM 的 Informix 上工作）。

如果我误解了这个问题，那么请提供示例表模式和值以及实际和预期的输出，以便我们可以更清楚地查看正在发生的事情。您可能还想提供解释输出。

* * *

请注意，您可以将查询重写为：

```
SELECT t1.colId, t1.col1, t1.col2, t1.col3, t2.colId_count
  FROM table1 t1
  JOIN (SELECT t3.colID, COUNT(*) AS colId_count
          FROM (SELECT DISTINCT colID FROM table1) AS t3
          LEFT JOIN db1.tb90 AS t4 ON t3.colId = t4.colId
         GROUP BY t3.colID
       ) t2
    ON t1.colId = t2.colId; 
```

你可以看到`table1`在这个重新表述中有一个 DISTINCT 操作；可能是 Teradata 自动为您进行转换。

# mysql - 将facebook数据存储到mysql

> ID：12652468
> 
> 赞同：2
> 
> 时间：2012-09-29T11:51:39.547
> 
> 标签：mysql, facebook, user-data

> **可能重复：**
> [无法保存超过 2 条记录](https://stackoverflow.com/questions/12651241/unable-to-save-more-than-2-records)

我正在使用 Facebook Javascript SDK 登录并获取用户信息。当我将此数据保存到 mysql 数据库时，它只保存 1-2 条记录。虽然我每次都在获取用户记录。

```
if($user){
                print_r($userInfo);
                $userid = $userInfo[id];
                $username = $userInfo[name];
                $birthday = $userInfo[birthday];
                $birthday = date("Y-m-d", strtotime($birthday));
                $userlocation = $userInfo[location][name];
                $gender = $userInfo[gender];
                $useremail = $userInfo[email];
                $sql = "INSERT INTO users (userid, username, useremail, birthday, location, gender) VALUES ('$userid', '$username', '$useremail', '$birthday', '$userlocation', '$gender')";
                if($result = mysql_query($sql)) {
                    echo "success";
                }
            } 
```

用户的表定义是：

```
1   userid  int(20)         No  None          Change      Drop    Browse distinct values     Primary      Unique      Index  Spatial     Fulltext
 2  username    varchar(30) latin1_swedish_ci       No  None          Change      Drop    Browse distinct values      Primary     Unique      Index  Spatial      Fulltext
 3  useremail   varchar(50) latin1_swedish_ci       No  None          Change      Drop    Browse distinct values      Primary     Unique      Index  Spatial      Fulltext
 4  birthday    date            No  None          Change      Drop    Browse distinct values      Primary     Unique      Index  Spatial     Fulltext
 5  location    varchar(30) latin1_swedish_ci       No  None          Change      Drop    Browse distinct values      Primary     Unique      Index  Spatial      Fulltext
 6  gender  varchar(10) latin1_swedish_ci       No  None          Change      Drop    Browse distinct values      Primary     Unique      Index  Spatial      Fulltext 
```

使用 PDO 时：

```
if($user){
                $host = "internal-db.s130813.gridserver.com";
                $db = "db130813_fbmooz";
                $user = "db130813_adminu";
                $pass = "ansari786";
                $conn = new PDO("mysql:host=$host;dbname=$db",$user,$pass);
                $uid = $userInfo[id];
                $uname = $userInfo[name];
                $sql = "INSERT INTO users (userid,username) VALUES (:uid,:uname)";
                $q = $conn->prepare($sql);
                $q->execute(array(':uid'=>$uid, ':uname'=>$uname)); 
```

仍然无法挽救

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:33:33.457

有几个想法浮现在脑海：

*   使用 PDO 重写 - 'mysql_query' fn 已弃用
*   使用准备好的语句和“mysql_real_escape_string”来确保值没有任何坏字符
*   检查返回值并使用 'mysql_error()' 查看是否出现问题

# matlab - 在 Matlab 中以特定帧速率捕获视频（源网络摄像头）

> ID：12652469
> 
> 赞同：-1
> 
> 时间：2012-09-29T11:51:42.087
> 
> 标签：matlab

我想以 15 fps 的速度捕捉 45 秒的视频，并使用 Matlab 将其存储在文件中。视频的来源是我的笔记本电脑网络摄像头。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T16:36:58.367

我将从 imaqtool 的文档开始。

然后尝试这样的事情......（我假设你有 imaq 工具箱）

```
 vid = videoinput('winvideo', 1, 'RGB24_640x480'); % or any other mode needed
 src = getselectedsource(vid);
 src.FrameRate = '15.0000';
 vid.FramesPerTrigger = 15*45;
 start(vid); 
```

ETC...

# javascript - 如何识别第 3 方 iframe 中的 Ajax 更新

> ID：12652471
> 
> 赞同：1
> 
> 时间：2012-09-29T11:52:25.047
> 
> 标签：javascript, ajax, jquery, brightcove

当页面加载时，它包含一个第 3 方 iframe（阅读：文件上传器）。我选择一个文件，单击“开始上传”按钮，上传完成后，我会收到“谢谢 - 上传完成”消息。

*   没有 Ajax 响应（据我所知）。

*   第 3 方确实允许我指定消息。我还可以在该消息中添加 ...。

上传完成后，我需要使用从一开始就知道的 upload_file_id 更新隐藏的输入。如果“上传完成”消息/时刻/事件，我想捕捉/使用什么。但是页面的动态性对我来说有点新，我可以使用一些支持。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T11:57:39.233

不幸的是，您将无法访问 iframe 的任何有用属性，除非它与您的代码位于同一主机/域中。这是所有当前/有价值的浏览器都实现的安全功能 - 称为同源或跨域策略。

检测第三方 iframe 中更改的唯一选项是第三方代码是否支持向周围框架发送消息。有几种方法可以做到这一点，但他们需要支持它。如果他们不这样做，那么您无能为力。如果是我，我会检查以下内容：

1.  阅读第三方文档，看看他们是否支持触发任何js消息或事件
2.  看看第三方系统是否提供了除 iframe 之外的另一种方式来实现相同的功能。

## 脚本标签？

~~关于您可以添加的消息，您是否测试过是否可以向该消息添加任何 HTML 标记？这不太可能，但如果是这样，您可以添加自己的脚本标签以与您的框架进行通信，以触发您自己的功能（即`window.iframeSuccess`）并告诉您事件已经发生......~~

以下代码仅在双方属于同一域*（外框和 iframe）的*情况下才有效。否则会被同源策略屏蔽。

```
<script>
if( window && window.parent && window.parent.iframeSuccess ){
  window.parent.iframeSuccess();
}
</script> 
```

相反，您可以实现以下专为帧之间的通信而设计的内容。这是一个更现代的解决方案，因此不适用于旧版浏览器 - 要查看支持它的内容，您可以在此处阅读：

[现在有哪些浏览器支持 window.postMessage 调用？](https://stackoverflow.com/questions/6036418/what-browsers-support-the-window-postmessage-call-now)

一个如何使用的例子`window.postMessage`——首先是外框里的代码：

```
function messageListener(event){
  /// make sure we only get messages from where we expect
  if ( event.origin != "http://the-domain-we-expect-from.com" ){ return; }
  /// here you can do what you want depending on the message you get
  alert(event.data);
}

/// define for nearly every modern browser
if (window.addEventListener){
  addEventListener("message", messageListener, false);
} else {
  /// fallback for internet explorer
  attachEvent("onmessage", messageListener);
} 
```

然后将代码放在iframe中：

```
if( window && window.parent && window.parent.postMessage ){
  window.parent.postMessage('success', 
     'http://the-domain-we-are-sending-to.com');
} 
```

有关更多信息，您可以在此处阅读：

[https://developer.mozilla.org/en-US/docs/DOM/window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)

## 图片标签？

如果他们阻止脚本标签，他们可能会允许图像标签。如果是这种情况，您有一个稍微棘手的选项可用，即嵌入一个报告回服务器端脚本的图像，然后该脚本可以在数据库中标记事件......

```
<img src="http://mysite.com/image-that-is-actually-a-script.php?id=user-id" /> 
```

但是，要让您的 javascript 注意到此事件，您将需要某种轮询系统，该系统会不断地从您的 js *（通过 ajax 或 websockets）*检查您的服务器端数据库——并且您需要能够在两者上唯一地识别用户具有某种 id 的双方*（您的和第三方） 。*所以这种方法只有在第三方系统允许你在显示给用户的消息中插入用户 ID *（或其他一些唯一的用户信息）*时才真正可行。如果您别无选择，这几乎是最后的后备方案。

# iphone - iPad的美丽“等待视图”？

> ID：12652473
> 
> 赞同：1
> 
> 时间：2012-09-29T11:52:42.930
> 
> 标签：iphone, objective-c, ios, ipad, cocoa

是否有适用于 iPad 的开源、可重用、等待视图组件？

我认为 iOS 的 UIAcitivityIndi​​cator 太无聊了，我想向我的用户展示一些不错的“等待视图”。

提前感谢您的回答。

相关问题：[https ://stackoverflow.com/questions/640805/open-source-ios-components-reusable-views-controllers-buttons-table-cells-e](https://stackoverflow.com/questions/640805/open-source-ios-components-reusable-views-controllers-buttons-table-cells-e)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T14:24:15.153

在这里为 MBProgressHUD 再次投票。

查看可可控件。这是一个充满自定义、开源 iOS 控件的网站。

[http://www.cocoacontrols.com/](http://www.cocoacontrols.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T11:57:16.860

您可以使用以下链接获得有吸引力的等待视图。我正在使用它。

[https://github.com/jdg/MBProgressHUD](https://github.com/jdg/MBProgressHUD)

# python-2.7 - 在应用程序启动并运行后加载 python

> ID：12652475
> 
> 赞同：0
> 
> 时间：2012-09-29T11:52:54.627
> 
> 标签：python-2.7, runtime

在整个 python 程序启动并运行后加载 python 模块/文件的最佳方法是什么。我目前的想法是将新的 python 文件保存到磁盘并在其上调用 import。我正在使用 python 2.7。

每个新的 python 文件都将具有预先知道的函数，这些函数将由已经运行的应用程序调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T15:30:29.340

import 语句与任何其他可执行语句一样，可以在执行过程中的任何时候执行。

# api - 如何使用 github API 在 github 中搜索代码？

> ID：12652477
> 
> 赞同：1
> 
> 时间：2012-09-29T11:53:16.660
> 
> 标签：api, github-api

如何通过 github api 搜索一段代码，只知道一段代码中包含的关键字？

使用搜索词“preg_replace”，输入“代码”和语言“PHP”。在任何回购。

就像下面的链接一样，但是使用了专用的 API。

[https://github.com/search?q=preg_replace&repo=&langOverride=&start_value=1&type=Code&language=PHP](https://github.com/search?q=preg_replace&repo=&langOverride=&start_value=1&type=Code&language=PHP)

（检查了这个，但看不到如何搜索代码。http: [//developer.github.com/v3/search/#search-issues](http://developer.github.com/v3/search/#search-issues) https://github.com/search）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-22T08:36:05.123

自 2013 年 7 月起，可通过 API 进行代码搜索：

[https://github.com/blog/1564-code-search-api](https://github.com/blog/1564-code-search-api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T00:23:58.093

来自 GitHub 支持团队的回答（来自 Wynn - 感谢您的回答）

> 嗨，塞德里克。抱歉，API 目前不支持代码搜索。我们不断改进 API，因此请密切关注文档和 Twitter 上的 @GitHubAPI 以了解我们添加新功能时的更新。
> 
> 干杯，

我想我将不得不解析一些 HTML（来自[https://github.com/search](https://github.com/search) results）。

# jquery - jQuery重新排列图像

> ID：12652481
> 
> 赞同：0
> 
> 时间：2012-09-29T11:53:59.310
> 
> 标签：jquery, html

我正在使用 jQuery，我有以下 HTML：

```
<img id='1' src="1.jpg" />
<img id='2' src="2.jpg" />
<img id='3' src="3.jpg" />
<img id='4' src="4.jpg" />
<img id='5' src="5.jpg" /> 
```

在我的脚本中，它正在像这样重新排列：

```
<img id='1' src="1.jpg" />
<img id='4' src="4.jpg" />
<img id='2' src="2.jpg" />
<img id='5' src="5.jpg" />
<img id='3' src="3.jpg" /> 
```

我如何让它回到正确的安排？

```
<img id='1' src="1.jpg" />
<img id='2' src="2.jpg" />
<img id='3' src="3.jpg" />
<img id='4' src="4.jpg" />
<img id='5' src="5.jpg" /> 
```

蒂亚！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T11:59:30.567

您可以将它们放在一个数组中并使用 sort 函数。您可以[在此处](http://www.javascriptkit.com/javatutors/arraysort.shtml)阅读如何编写自定义comarator。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T12:00:54.567

```
var len = $('img').length;

for (var i = 1; i <= len; i++) {
  $('img[id='+i+']').appendTo('#container')
}
​ 
```

[http://jsfiddle.net/v35eX/](http://jsfiddle.net/v35eX/)

# java - 如何从ant以调试模式启动码头

> ID：12652489
> 
> 赞同：1
> 
> 时间：2012-09-29T11:54:27.110
> 
> 标签：java, debugging, jetty, embedded-jetty

如何从 ant 以调试模式启动嵌入式码头服务器？这是我的 build.xml 文件：

```
<target name="jettyRun">
    <delete dir="jetty-temp" quiet="true" />
    <jetty tempDirectory="jetty-temp">
        <webApp name="${application.name}" warfile="${fileToDeploy}" contextpath="/${application.name}"/>
        <webApp name="${application.name}resources" warfile="${resourcesToDeploy}" contextpath="/${application.name}resources"/>
    </jetty>
</target> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T12:26:51.620

这个链接应该可以帮助你 [http://swik.net/Peter-Thomas/Incremental+Operations/How+to+start+and+stop+Jetty+from+Ant/mut2](http://swik.net/Peter-Thomas/Incremental+Operations/How+to+start+and+stop+Jetty+from+Ant/mut2)

基本上你像这样启动码头服务器

```
<java jar="${jetty.home}/start.jar" fork="true" dir="${jetty.home}">
    <jvmarg value="-Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n"/>
    <jvmarg value="-Xdebug"/>
 </Java> 
```

希望这可以帮助。

# javascript - Twitter Bootstrap datepicker: how to enable only specific daterange

> ID：12652492
> 
> 赞同：7
> 
> 时间：2012-09-29T11:54:49.060
> 
> 标签：javascript, jquery, twitter, twitter-bootstrap, datepicker

I am working on some project based on Twitter Bootstrap which using a datepicker from [https://github.com/eternicode/bootstrap-datepicker](https://github.com/eternicode/bootstrap-datepicker) (that is a fork from some other version), but it's missing a very important feature that I need - how to enable only specific date range (eg. from past 15 days till today), so any other date can't be even selected (not clickable).

I found a similar solution here on SO, which disables Saturdays and Sundays: [Limit bootstrap-datepicker to weekdays only?](https://stackoverflow.com/questions/10234153/limit-bootstrap-datepicker-to-weekdays-only) [http://jsfiddle.net/katowulf/zNbUT/5/](http://jsfiddle.net/katowulf/zNbUT/5/) , but I dont know how to adjust it to my needs.

Thanks in advance.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-02T19:11:37.297

The similar question you linked to ended up using quite a hack, but what you want is a lot simpler -- you're looking for the `startDate` and `endDate` options:

```
$('#dp1').datepicker({
    format: 'mm-dd-yyyy',
    startDate: '-15d',
    endDate: '+0d' // there's no convenient "right now" notation yet
}); 
```

These options can take `Date` objects, timedelta strings (as I did here), or date strings following the given `format`.

Demo: [http://jsfiddle.net/zNbUT/131/](http://jsfiddle.net/zNbUT/131/)

Also, make sure you're using the code from github -- eyecon.ro's copy is the original code, with old bugs and without the newer features.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T12:32:27.127

```
var startDate = new Date();
startDate.setDate(startDate.getDate()-15);

var endDate = new Date();

$('#dp1')
.datepicker().on('changeDate', function(ev){
    if (ev.date.valueOf() > endDate.valueOf()){
       alert('The date selected is too far in the future.');
    } else if (ev.date.valueOf() < startDate.valueOf()){
        alert('The date selected is too far in the past');
    } else {
        alert('fine')
    } 
```

});

[http://jsfiddle.net/XSmx6/14/](http://jsfiddle.net/XSmx6/14/)

# c++ - 将类中的方法作为参数传递

> ID：12652493
> 
> 赞同：2
> 
> 时间：2012-09-29T11:55:04.023
> 
> 标签：c++

我有这样的课

```
class Keyboard
{
public:
    Keyboard(void);
    ~Keyboard(void);
    void SetHook(HINSTANCE hInstance);
    LRESULT CALLBACK keyboardHookProc(int nCode, WPARAM wParam, LPARAM lParam);
};

LRESULT CALLBACK Keyboard::keyboardHookProc(int nCode, WPARAM wParam, LPARAM lParam)
{
    bool bControlKeyDown=0;
    bool caps = GetKeyState(VK_CAPITAL) < 0;

...

void Keyboard::SetHook(HINSTANCE hInstance)
{
    KeyboardHook = SetWindowsHookEx(WH_KEYBOARD_LL, Keyboard::keyboardHookProc, hInstance, NULL);
} 
```

但声明

```
KeyboardHook = SetWindowsHookEx(WH_KEYBOARD_LL, Keyboard::keyboardHookProc, hInstance, NULL); 
```

导致编译错误

```
Error   7   error C3867: 'Keyboard::keyboardHookProc': function call missing argument list; use '&Keyboard::keyboardHookProc' to create a pointer to member 
```

如果我更改为 '&Keyboard::keyboardHookProc' 它也会出错，当我转换为 '(HOOKPROC) &Keyboard::keyboardHookProc' 它也会出错

任何人请帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T11:58:28.100

这是 C 回调的常见错误。

`Keyboard::keyboardHookProc`必须是静态的。

[更新]

如果`Keyboard`要`Keyboard`对`static Keyboard::keyboardHookProc`. 如果你有一个`Keyboard`，你可能会使用`singleton`模式，如果没有，那么每个静态方法都必须有自己的`Keyboard`对象。

[更新2]

将对象与全局函数链接的一种方法是通过模板对象引用。但这仅适用于全局对象：

```
class Keyboard
{
public:
    Keyboard();
    ~Keyboard(void);
    LRESULT keyboardHookProc(int nCode, WPARAM wParam, LPARAM lParam);
};

LRESULT Keyboard::keyboardHookProc(int nCode, WPARAM wParam, LPARAM lParam)
{
}
// global function interface 
template <Keyboard& k>
LRESULT CALLBACK keyboardHookProc(int nCode, WPARAM wParam, LPARAM lParam)
{
   return k.keyboardHookProc(nCode, wParam, lParam);
}

Keyboard k; // global keyboard

int main()
{
   // this works
   SetWindowsHookEx(0, keyboardHookProc<k>, NULL, NULL);
} 
```

# android - SearchView 展开抛出空指针异常

> ID：12652494
> 
> 赞同：3
> 
> 时间：2012-09-29T11:55:06.270
> 
> 标签：android, nullpointerexception, android-actionbar, android-4.0-ice-cream-sandwich

我正在三星 Galaxy Tab (P7500) (android 4.0.4) 中测试应用程序，我在尝试`SearchView`在操作栏中展开默认小部件时收到此错误。在 4.0.4 更新之前，我的应用程序运行良好。

错误日志：

```
09-29 14:18:28.460: E/AndroidRuntime(2814): java.lang.NullPointerException
09-29 14:18:28.460: E/AndroidRuntime(2814):     at android.widget.SearchView.adjustDropDownSizeAndPosition(SearchView.java:1244)
09-29 14:18:28.460: E/AndroidRuntime(2814):     at android.widget.SearchView.access$300(SearchView.java:92)
09-29 14:18:28.460: E/AndroidRuntime(2814):     at android.widget.SearchView$5.onLayoutChange(SearchView.java:336)
09-29 14:18:28.460: E/AndroidRuntime(2814):     at android.view.View.layout(View.java:11486)
09-29 14:18:28.460: E/AndroidRuntime(2814):     at android.view.ViewGroup.layout(ViewGroup.java:4232)
09-29 14:18:28.460: E/AndroidRuntime(2814):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1644)
09-29 14:18:28.460: E/AndroidRuntime(2814):     at android.widget.LinearLayout.layoutHorizontal(LinearLayout.java:1633)
09-29 14:18:28.460: E/AndroidRuntime(2814):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1417)
09-29 14:18:28.460: E/AndroidRuntime(2814):     at android.view.View.layout(View.java:11477)
.... 
```

我试图寻找这个错误。我检查了 4.0.3 和 4.0.4 源（API 15），`android.widget.SearchView`文件的第 1244 行方法结束： http: [//grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android /4.0.4_r2.1/android/widget/SearchView.java?av=f](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r2.1/android/widget/SearchView.java?av=f)

我认为三星修改了这个源文件。

之后，我尝试通过使用原始 4.0.4 源和调试信息来确定空指针在哪里。我发现问题可能在这里：

```
mQueryTextView.getDropDownBackground().getPadding(dropDownPadding); 
```

`mQueryTextView.getDropDownBackground()`返回 null，因为`SearchView.this.mQueryTextView.mPopup.mPopup.mBackground`是 null。

我不确定这是否完全错误，因为三星已经修改了源代码。而且我不知道接下来我能做什么。

这是我的 ActionBar 菜单 XML：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/menu_settings"
        android:title="@string/menu_settings"
        android:orderInCategory="100" />

    <item android:id="@+id/search"
        android:title="Search"
        android:showAsAction="ifRoom"
        android:actionViewClass="android.widget.SearchView" />
    <item 
        android:id="@+id/favorites" 
        android:title="Favourites"
        android:icon="@drawable/favorites">

    </item>
    <item 
        android:id="@+id/recent" 
        android:title="Recent"
        android:icon="@drawable/recent">

    </item>
    <item 
        android:id="@+id/downloaded" 
        android:title="Downloaded"
        android:icon="@drawable/downloaded">

    </item>
</menu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T12:06:16.103

此问题似乎与应用于操作栏 SearchView 中的 EditText 的样式有关。

您可以通过删除已应用于 EditText 的任何样式来解决此问题，例如：

res/values/styles.xml

```
<item name="android:editTextStyle">@style/editor</item> 
```

然后转到布局 XML 中的每个 EditText 视图并直接应用样式：

```
<EditText style="@style/editor" /> 
```

# java - Java SDK 和运行时的正确路径环境

> ID：12652495
> 
> 赞同：0
> 
> 时间：2012-09-29T11:55:14.997
> 
> 标签：java

我对 Java 相当陌生，想知道如何在 Windows XP 上设置路径。当我安装 Java v1.7 JDK 时，它似乎安装到 JDK 和 jre 目录。我首先假设编译器/开发的东西，例如 javac，后者用于 jvm / 运行时的东西。如果我将路径设置为 jdk\bin 目录，那么一切似乎都可以正常工作，但这是正确的吗？我需要设置 jre\bin 的路径吗？

我最初不会使用任何 IDE，例如 Eclipse。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T11:57:42.553

不，您不需要设置 jre/bin 目录的路径。JDK 目录实际上包含您需要的所有内容。*如果您只*安装JRE（出于非开发目的，仅用于运行代码），JRE 目录基本上就是您所获得的。老实说，我并不完全清楚为什么这两个是分开安装的，但你绝对不需要路径上的 jre/bin 目录。

# android - 为什么新创建的文件夹中的图像不显示？

> ID：12652498
> 
> 赞同：1
> 
> 时间：2012-09-29T11:55:22.930
> 
> 标签：android, camera, image-gallery

在我的应用程序中，我可以选择拍照，该照片将保存在文件夹中：

```
Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES) + "/my-images"; 
```

图像保存得很好，我还可以选择使用此代码的图像：

```
Intent intent = new Intent();
intent.setType("image/*");
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(Intent.createChooser(intent, "Select Picture"), SELECT_PICTURE); 
```

**最初在这里它用来展示 2 个画廊**

**1\. 相机**

**2\. 我的图片**

选择其中任何一个等等..，一切都很好。

但我无缘无故删除了 my-images 文件夹并再次运行该应用程序。再次创建相同的文件夹并按预期保存图像。

**问题是：**

当我单击选择图像按钮时，我的图像库现在没有显示。

除了删除 my-images 文件夹并重新启动应用程序之外，我没有更改任何代码，因为它曾经运行良好。

为什么会这样？

谢谢

**编辑：**

*我的活动代码，它允许用户拍照并存储在 SD 卡上，并浏览图片库：*

```
public class PictureFromAppActivity extends SherlockActivity {
    private File dir;
    private Bitmap photo;
    private String encodedString;
    private InputStream is;
    private ImageView imagePreview;
    private String selectedImagePath;
    private static final int CAMERA_REQUEST = 1888;
    private static final int SELECT_PICTURE = 1;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        imagePreview = (ImageView) findViewById(R.id.image_preview);
        Button takePicture = (Button) findViewById(R.id.take_a_picture);
        Button selectImage = (Button) findViewById(R.id.select_picture);

        takePicture.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {

                if (android.os.Environment.getExternalStorageState().equals(
                        android.os.Environment.MEDIA_MOUNTED)) {

                        Intent cameraIntent = new Intent(
                                android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                        startActivityForResult(cameraIntent, CAMERA_REQUEST);
                    }
            }
        });
        selectImage.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Intent intent = new Intent();
                intent.setType("image/*");
                intent.setAction(Intent.ACTION_GET_CONTENT);
                startActivityForResult(
                        Intent.createChooser(intent, "Select Picture"),
                        SELECT_PICTURE);
            }
        });

    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        super.onActivityResult(requestCode, resultCode, data);

        if (resultCode == RESULT_OK) {
            if (requestCode == CAMERA_REQUEST) {
                if (data != null) {

                    photo = (Bitmap) data.getExtras().get("data");
                    Bitmap bitmapOrg = photo;
                    ByteArrayOutputStream bao = new ByteArrayOutputStream();
                    bitmapOrg.compress(Bitmap.CompressFormat.PNG, 100, bao);
                    byte[] ba = bao.toByteArray();

                    try {
                        encodedString = Base64.encodeBytes(ba, 0);
                    } catch (IOException e1) {
                    }

                    if (android.os.Environment.getExternalStorageState()
                            .equals(android.os.Environment.MEDIA_MOUNTED)) {

                        File imagesFolder = new File(
                                Environment
                                        .getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES),
                                "/my-images");
                        if (!imagesFolder.exists()) {

                            imagesFolder.mkdirs();
                        } else {

                        }
                        String fileName = "image_" + count + ".jpg";
                        f = new File(imagesFolder, fileName);
                        while (f.exists()) {
                            count++;
                            fileName = "image_" + String.valueOf(count)
                                    + ".jpg";
                            f = new File(
                                    Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES)
                                            + "/my-images", fileName);
                        }
                    } else {

                    }
                    f.createNewFile();

                    FileOutputStream fo = new FileOutputStream(f);
                    fo.write(ba);
                    o.flush();
                    fo.close();
                    try {
                        File imageFile = new File(
                                Environment
                                        .getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES)
                                        + "/my-images" + "/image_" + count + ".jpg");
                        Bitmap bitmap = BitmapFactory.decodeFile(imageFile
                                .getAbsolutePath());
                        imagePreview.setImageBitmap(bitmap);
                        Log.d("Image Width", "+" + imagePreview.getWidth());
                        Log.d("Image Height", "+" + imagePreview.getHeight());
                    } catch (Exception e) {

                    }
                } else {

                    Intent intent = new Intent(PictureFromAppActivity.this,
                            PictureFromAppActivity.class);
                    startActivity(intent);
                }
            } else if (requestCode == SELECT_PICTURE) {

                if (data != null) {
                    Uri selectedImageUri = data.getData();
                    selectedImagePath = getPath(selectedImageUri);
                    try {
                        File imageFile = new File(selectedImagePath);
                        Bitmap bitmap = BitmapFactory.decodeFile(imageFile
                                .getAbsolutePath());
                        imagePreview.setImageBitmap(bitmap);
                    } catch (Exception e) {

                    }

                } else {

                }
            }
        }
    }

    private String getPath(Uri selectedImageUri) {

         String[] projection = { MediaStore.Images.Media.DATA };
            Cursor cursor = managedQuery(selectedImageUri, projection, null, null, null);
            int column_index = cursor
                    .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
            cursor.moveToFirst();
            return cursor.getString(column_index);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T13:59:44.207

可能是因为画廊与您的应用程序相关联并且它与它保持视图。因此，当您删除已从系统中删除的图像/文件夹但与您的应用程序关联的媒体库未更新时，会发生什么情况。请使用下面的代码，如果这能解决您的问题，请告诉我

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,
                Uri.parse("file://"
                        + Environment.getExternalStorageDirectory()))); 
```

请使用此代码从图库中打开图像

```
intent = new Intent(
                    Intent.ACTION_PICK,
                    android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);
            startActivityForResult(intent, PICK_PHOTO); 
```

在你的活动结果中

```
@Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        String path = "";
switch (requestCode) {
        case PICK_PHOTO:
            if (resultCode == RESULT_OK) {
               Uri uri = data.getData();
               path = pathFromUri(uri); // Now you can get the path of your selected image from here
           }
        break;
        }
    } 
```

从 URI 代码获取路径

```
/**
     * Method to get path from uri
     * 
     * @param Uri
     *            uri
     * @return String path
     * */
    private String pathFromUri(Uri uri) {
        String[] filePathColumn = { MediaStore.Images.Media.DATA };
        Cursor cursor = getContentResolver().query(uri, filePathColumn, null,
                null, null);
        cursor.moveToFirst();
        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
        String filePath = cursor.getString(columnIndex);
        cursor.close();
        return filePath;
    } 
```

# php - 向 IRC 机器人发送私人消息

> ID：12652500
> 
> 赞同：0
> 
> 时间：2012-09-29T11:55:34.457
> 
> 标签：php, bots, irc

我有一个 php 脚本来加入这个 IRC 服务器上的频道：irc.worldnet.net 感谢服务器的响应，我可以说我成功加入了频道，并且机器人在用户列表中。但是，此命令：

```
MSG bot_nickname hello my friend ! 
```

发出“味精：未知命令”响应。当我发送此行时：

```
PRIVMSG bot_nickname : hello my friend ! 
```

机器人没有响应（无论如何我没有任何错误消息）。我发送的命令有问题吗？

这是我使用的 php 代码：

```
<?php

$channel_sent = false;
$channel_joined = false;
$msg_sent = false;
set_time_limit(0);
ini_set('display_errors', 'on');

$config = array(
    'server' => 'irc.worldnet.net',
    'port' => 6667,
    'nick' => 'cesame'.rand(),
    'channel' => '#nc-irc-challs'
);

$server = array();
$server['SOCKET'] = @fsockopen($config['server'], $config['port'], $errno, $errstr, 2); 

if($server['SOCKET'])
{
    SendCommand("PASS NOPASS\n\r");
    SendCommand("NICK " . $config['nick'] . "\n\r"); 
    SendCommand("USER " . $config['nick'] . " USING PHP IRC\n\r");    
    SendCommand("JOIN " . $config['channel'] . "\n\r");

    while(!feof($server['SOCKET'])) {
            ReadServer();
            flush();
            sleep(1);
    }
}

function ReadServer(){
    global $server;
    global $config;
    global $channel_joined;
    global $channel_sent;
    global $msg_sent;
    $server['READ_BUFFER'] = fgets($server['SOCKET'], 1024);
    echo "[RECEIVE] ".$server['READ_BUFFER']."<br>\n\r";  

    if(substr($server['READ_BUFFER'], 0, 6) == "PING :") { 
        SendCommand("PONG :".substr($server['READ_BUFFER'], 6)."\n\r"); 
    }
    if(strpos($server['READ_BUFFER'], "#nc-irc-challs :End of /NAMES list")){
        $channel_joined = true;
    }
    if(trim($server['READ_BUFFER']) == "" && $channel_joined &&!$msg_sent) {
        SendCommand('PRIVMSG Daneel : .challenge_caesar start' . "\n\r");
        $msg_sent = true;
    }
}

function SendCommand ($cmd)
{
    global $server; //Extends our $server array to this function
    @fwrite($server['SOCKET'], $cmd, strlen($cmd)); //sends the command to the server
    echo "[SEND] $cmd <br>"; //displays it on the screen
} 

?> 
```

* * *

所以我听从了你的建议。这是我得到的日志：

```
[RECEIVE] :cesame1582!~cesame158@Wnet-59540.41.55.213.rev.sfr.net JOIN :#nc-irc-challs 
[RECEIVE] :Vidar.IRC.Worldnet.Net 332 cesame1582 #nc-irc-challs :NewbieContest -- http://www.newbiecontest.org/ (channel officiel : #newbiecontest) -- Rappel : aucune Ã©preuve ne peut se rÃ©soudre en bruteforce. 
[RECEIVE] :Vidar.IRC.Worldnet.Net 333 cesame1582 #nc-irc-challs zours 1195848644 
[RECEIVE] :Vidar.IRC.Worldnet.Net 353 cesame1582 = #nc-irc-challs :cesame1582 \o_ @Eole +Daneel 
[RECEIVE] :Vidar.IRC.Worldnet.Net 366 cesame1582 #nc-irc-challs :End of /NAMES list. 
[SEND] PRIVMSG Daneel : .challenge_caesar start 
[RECEIVE] :Global!Services@Worldnet.Net NOTICE cesame1582 :[Logon News - Apr 07 2004] Use irc.worldnet.net to join our network, thanks | Dorenavant, utilisez irc.worldnet.net pour joindre notre reseau, merci. 
[RECEIVE] :Global!Services@Worldnet.Net NOTICE cesame1582 :[Logon News - Jan 07 2007] If you see a connection on port 23, 1080, 3128 or 8080 from 194.117.194.78 this is NOT an attack! It's our insecure proxy detector. 
[RECEIVE] :Global!Services@Worldnet.Net NOTICE cesame1582 :[Logon News - Feb 07 2007] Vous pouvez utiliser le port 7000 pour une connexion en SSL. You can use port 7000 with a secure SSL connection. 
[RECEIVE] :Global!Services@Worldnet.Net NOTICE cesame1582 :[Logon News - Oct 14 2009] Salons officiels du reseau Worldnet : #worldnet - #help pour de l'aide sur IRC et l'informatique en general. - ##opers pour les problemes réseau spécifiques à Worldnet. 
[RECEIVE] :Global!Services@Worldnet.Net NOTICE cesame1582 :[Random News - Apr 24 2004] Pour avoir de l'aide sur les commandes des services, visitez http://help.irc.worldnet.net 
[RECEIVE] :NickServ!Services@Worldnet.Net NOTICE cesame1582 :Your nick isn't registered. 
[RECEIVE] 
[RECEIVE] PING :Vidar.IRC.Worldnet.Net 
[SEND] PONG :Vidar.IRC.Worldnet.Net 
[RECEIVE] 
[RECEIVE] PING :Vidar.IRC.Worldnet.Net 
[SEND] PONG :Vidar.IRC.Worldnet.Net 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T12:08:48.940

The IRC server generally does not send empty strings.

If you want a command to be issued once the BOT is in the channel, you should be sending it as soon as you know it's in the channel, which is at the end of the `/NAMES` list, or once you receive the `TOPIC`.

* * *

Also, the syntax for PRIVMSG is as follows:

```
PRIVMSG <NICKNAME> :<MESSAGE> 
```

Without the space after the `:`. If the recieving end is set to respond to `.command` but gets ` .command`, that may be the problem.

# ios - 更改隐私设置时被 SIGKILL 杀死的应用程序

> ID：12652502
> 
> 赞同：50
> 
> 时间：2012-09-29T11:55:43.717
> 
> 标签：ios, crash, assetslibrary, ios-privacy-settings

我的 iOS 应用程序使用`ALAssetsLibrary`. 当我更改应用程序的隐私设置（设置→隐私→照片）时，该应用程序被系统（`SIGKILL`）杀死。这是一个错误吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-17T16:11:41.720

我认为这是一个错误，或者至少是记录不充分的意外行为。但它不会崩溃，只是被迫重新启动。您将收到一条 SIGKILL 消息，但没有崩溃日志。

如果您是注册的苹果开发者，您可以查看他们的论坛以了解有关此问题的讨论

*   [https://devforums.apple.com/message/715855](https://devforums.apple.com/message/715855)
*   [https://devforums.apple.com/message/714178](https://devforums.apple.com/message/714178)

我不知道如何防止这种行为，但随时向苹果提交错误报告。据传他们使用错误重复作为衡量错误严重程度的一种方式。也许您可以存储您的应用程序状态，以便在重新启动时恢复它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-01T17:50:11.717

使用 UIImagePickerController 时也会发生这种情况。顺序是这样的：

1.  你展示了 UIImagePickerController。第一次，小警报要求用户允许使用照片库。假设用户说不。

2.  此时用户对选择器控制器所能做的就是取消，所以我们假设这就是发生的事情。

3.  稍后，您会显示 UIImagePickerController。它现在包含一条不可自定义的消息，说明无法访问照片库，但用户可以在“设置”中启用访问权限。

4.  用户切换到设置并允许访问此应用的照片库。

5.  应用程序在后台崩溃。用户是取消了选择器还是让它显示都没有关系。

我已经为此提交了一个错误，我建议您根据您的情况也这样做。Apple 在 iOS 6 中引入了一个新的隐私系统，显然问题还没有解决。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-11-23T17:47:15.127

在此 PDF 中搜索“kill”一词：http: [//adcdownload.apple.com/wwdc_2012/wwdc_2012_session_pdfs/session_710__privacy_support_in_ios_and_os_x.pdf](http://adcdownload.apple.com/wwdc_2012/wwdc_2012_session_pdfs/session_710__privacy_support_in_ios_and_os_x.pdf)

**当某些权限发生变化时，iOS 会终止应用程序。**

这个信息很难追踪。它不在任何“指南”中（例如，偏好编程指南）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-30T03:25:18.017

当您使用模拟器测试您的应用程序时。更改应用程序的权限会给您一个断点。您可以在控制台中键入“c”以使应用程序继续运行并恢复到原始状态。但是在您的真实设备中，不是故事。它只是重新启动应用程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-14T10:01:41.397

有时 SIGKILL 错误作为中断错误工作，它向 iOS 发出信号，表明您必须重新启动您的应用程序，同时我们正在管理应用程序任务，并且在该实例上，应用程序不处理发送中断消息的方式。

在我的情况下.....我不允许在应用程序中访问照片和相机，每当我允许访问这些功能时，我都会最小化应用程序并启用这些设置。当我启用这些时，iOS 会中断，应用程序会收到此中断，但无法处理并导致我们的应用程序终止或关闭。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-14T14:26:59.943

好的，我第一次写答案。我希望我做对了:)

您是否使用assetForURL:resultBlock:failureBlock: 访问资源库？

如果是这样，很可能您没有处理 ALAssetLibrary 的故障块。

你可以做类似的事情

```
ALAssetsLibraryAccessFailureBlock failureBlock = ^(NSError *error)
{
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Access to Photo Library is Denied "
                                                            message:@"Please allow <YOUR APP NAME> to access your Photo library from Privacy Settings"
                                                           delegate:nil
                                                  cancelButtonTitle:@"OK"
                                                  otherButtonTitles:nil];
            [alert show];
            [alert release];
} 
```

因此，当您的应用无法访问照片库时，它会要求用户这样做。

# php - 将行就绪文本格式化为人类可读的格式

> ID：12652506
> 
> 赞同：-3
> 
> 时间：2012-09-29T11:57:02.837
> 
> 标签：php, text, format, readable

有什么想法可以将行就绪的文本变成人类可读的格式？

例子

`On the other hand, we denounce with righteous indignation and dislike men who are so beguiled and demoralized by the charms of pleasure of the moment, so blinded by desire, that they cannot foresee the pain and trouble that are bound to ensue; and equal blame belongs to those who fail in their duty through weakness of will, which is the same as saying through shrinking from toil and pain. These cases are perfectly simple and easy to distinguish. In a free hour, when our power of choice is untrammelled and when nothing prevents our being able to do what we like best, every pleasure is to be welcomed and every pain avoided. But in certain circumstances and owing to the claims of duty or the obligations of business it will frequently occur that pleasures have to be repudiated and annoyances accepted. The wise man therefore always holds in these matters to this principle of selection: he rejects pleasures to secure other greater pleasures, or else he endures pains to avoid worse pains.On the other hand, we denounce with righteous indignation and dislike men who are so beguiled and demoralized by the charms of pleasure of the moment, so blinded by desire, that they cannot foresee the pain and trouble that are bound to ensue; and equal blame belongs to those who fail in their duty through weakness of will, which is the same as saying through shrinking from toil and pain. These cases are perfectly simple and easy to distinguish. In a free hour, when our power of choice is untrammelled and when nothing prevents our being able to do what we like best, every pleasure is to be welcomed and every pain avoided. But in certain circumstances and owing to the claims of duty or the obligations of business it will frequently occur that pleasures have to be repudiated and annoyances accepted. The wise man therefore always holds in these matters to this principle of selection: he rejects pleasures to secure other greater pleasures, or else he endures pains to avoid worse pains.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T12:22:55.663

您可以在其中添加换行符：-

```
$text = "Your pile of text is too long to put here. So I shortened it";
$paras = explode('.', $text);
$string = '<p>' . implode('.<br />', $paras) . '</p>';
echo $string; 
```

或者，也许您更喜欢单班轮：-

```
echo implode('.<br />', explode('.', "Your pile of text is too long to put here. So I shortened it")); 
```

输出：

```
Your pile of text is too long to put here
So I shortened it 
```

# linux - CouchDB 视图没有响应

> ID：12652507
> 
> 赞同：0
> 
> 时间：2012-09-29T11:57:04.377
> 
> 标签：linux, couchdb, couchdb-futon

我们将 .couch 文件从一个驱动器移动到另一个驱动器，因为原始驱动器已达到 100% 的空间。然后我们将新驱动器重新安装到旧/原始目录。换句话说，什么都没有改变。

现在我可以查看文档但无法运行视图。

它只是挂起。

知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:05:27.087

通常在不重新启动 CouchDB 的情况下随意移动文件就像在奶奶坐在椅子上时将椅子移动到椅子上一样。迟早，她会注意到.... 我猜您已经重新定位了 couchdb 文件夹的一部分，并且不足以使视图正常工作。

如果您`GET $COUCH/$DB/_design/$DDOC/_info`会看到一个`"signature": "e5c78acfda577dfba5abb602c432ead2"`字段，其中十六进制字符串与该 ddoc 的基础视图文件的名称相关。

如果您`GET $COUCH/_config`使用管理员凭据，您可以看到视图和索引目录的路径。您应该确保这些在重新安装期间没有被搞砸。

就我而言，它看起来像这样：

```
"database_dir": "/usr/local/var/lib/couchdb",
"index_dir": "/usr/local/var/lib/couchdb", 
```

在`index_dir`我可以看到`/usr/local/var/lib/couchdb/.testy_design/mrview/e5c78acfda577dfba5abb602c432ead2.view`。这是在 master 1.3.0-a 上，因此 1.2.0 及以下版本的位置不同。无论如何，config 中的 database_dir 和 index_dir 参数需要与磁盘上的内容相匹配。检查那个。

您应该重新安装整个`/usr/local/var/lib/couchdb`文件（包括视图，如果您不想重建它们）而不是其中的一些子组件。

或者，它可能只是一个缓存问题，在重新启动 CouchDB 之后，事情就会安定下来。通常，Couch 依赖于缓存内容，并且不希望椅子移动:-)。

# php - 处理卷曲帖子

> ID：12652513
> 
> 赞同：0
> 
> 时间：2012-09-29T11:57:29.910
> 
> 标签：php, curl, http-post

我正在尝试从另一台服务器接收 cURL POST，在脚本中处理该帖子，并根据第一个 POST 中包含的 URL，通过向网站发送另一个 cURL 帖子来返回响应。但我不知道如何在 PHP 脚本中接受 cURL 帖子。

是不是这样：

```
if (isset($_POST['test'])){
  //execute some code
} 
```

所以网站 45661 发布到服务器 1，服务器 1 上的脚本看到它的网站 45661 并通过 cURL 发回给它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:53:37.067

欢迎来到 SO！

您的代码是一个开始。仅供参考，无论您的脚本如何调用，无论是通过 curl、表单提交等，只要发送一个名为 test 的 post 参数即可。

您可以像这样完成代码：

```
<?php
    //Simply exiting when the condition is not true is more elegant than
    //putting everything in curly braces
    if(!isset($_POST['test'])) exit;

    //Execute some code...

    //Give feedback using json, not curl
    $feedback=array(
        'success' => true,
        'message' => 'success message'
    );
    echo json_encode($feedback);
?> 
```

使用 json 将数据传递给请求脚本的人比使用 curl 发回数据要容易得多。这样，您就不需要检查谁实际调用了您的脚本，并且测试也更容易，因为 json 对象反馈将显示在您的浏览器中。

# javascript - 如何使用对象对值求和？在 JavaScript 中

> ID：12652517
> 
> 赞同：2
> 
> 时间：2012-09-29T11:58:08.343
> 
> 标签：javascript, object

我创建了一个函数来对值求和，但它没有得到预期的结果，返回 0

```
function ints(t) { this.t=t; }

ints.prototype.sum = function() {
        var sum = 0;
        var value;
        for (var _ in this.t) {
                value = _;
                sum += value;
        }
        return sum;
}

var s = new ints(1, 2, 3, 4, 5);
if (s.sum() !== 15) {
        alert("FAIL: " + s.sum());
} 
```

如何使用该对象修复它？我不想使用原语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T12:06:09.027

如果要使用传递给函数的所有参数，请使用`arguments`对象：

```
function ints(t) {
    this.t = arguments;
} 
```

在函数中，使用绑定变量作为索引`sum`，在一段时间内迭代“数组” ：`for-in`

```
for (var _ in this.t) {
    value = this.t[_];
    sum += value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T11:59:53.963

您正在传递一组参数，但忽略除第一个之外的所有参数，您试图将其视为一个数组。

而是传递一个实际上是数组的参数。

```
var s = new ints([1, 2, 3, 4, 5]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T12:00:35.240

修改代码：更改。将所有参数保存在一个数组`this.t`中。使用普通的 for 循环而不是`for in`as`for in`也会添加原型属性。

```
function ints(t) 
{   
   if(typeof t == 'object'){ // if first argument itself an array.
    this.t = t;   
   }else{
    this.t = Array.prototype.slice.call(arguments, 0);
  } 
}

ints.prototype.sum = function() {
        var sum = 0;           
     console.log(this.t);
        for (var i =0; i<this.t.length; i++) {
                sum += this.t[i];
        }           
        return sum;
}

var s = new ints(1, 2, 3, 4, 5);
if (s.sum() !== 15) {
        alert("FAIL: " + s.sum());
}​ 
```

# spring-aop - 使用 Spring 3.1.2 实现 @AspectJ 时面临的问题

> ID：12652520
> 
> 赞同：1
> 
> 时间：2012-09-29T11:58:50.850
> 
> 标签：spring-aop

我正在尝试在 Spring 3.1.5 上使用 AOP 实现日志记录。但在运行时我得到以下异常

```
Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.context.support.ClassPathXmlApplicationContext]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.manh.fm.bid.ejb.BidMgr' defined in class path resource [appCtx-fm.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.adapter.UnknownAdviceTypeException: Advice object [null] is neither a supported subinterface of [org.aopalliance.aop.Advice] nor an [org.springframework.aop.Advisor]
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:162)
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:110)
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:280)
    ... 89 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.manh.fm.bid.ejb.BidMgr' defined in class path resource [appCtx-fm.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.adapter.UnknownAdviceTypeException: Advice object [null] is neither a supported subinterface of [org.aopalliance.aop.Advice] nor an [org.springframework.aop.Advisor]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:105)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:147)
    ... 91 more
Caused by: org.springframework.aop.framework.adapter.UnknownAdviceTypeException: Advice object [null] is neither a supported subinterface of [org.aopalliance.aop.Advice] nor an [org.springframework.aop.Advisor]
    at org.springframework.aop.framework.adapter.DefaultAdvisorAdapterRegistry.getInterceptors(DefaultAdvisorAdapterRegistry.java:88)
    at org.springframework.aop.framework.DefaultAdvisorChainFactory.getInterceptorsAndDynamicInterceptionAdvice(DefaultAdvisorChainFactory.java:61)
    at org.springframework.aop.framework.AdvisedSupport.getInterceptorsAndDynamicInterceptionAdvice(AdvisedSupport.java:482)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:188)
    at $Proxy136.getTransactionAttribute(Unknown Source)
    at org.springframework.transaction.interceptor.TransactionAttributeSourcePointcut.matches(TransactionAttributeSourcePointcut.java:36)
    at org.springframework.aop.support.AopUtils.canApply(AopUtils.java:227)
    at org.springframework.aop.support.AopUtils.canApply(AopUtils.java:264)
    at org.springframework.aop.support.AopUtils.findAdvisorsThatCanApply(AopUtils.java:296)
    at org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findAdvisorsThatCanApply(AbstractAdvisorAutoProxyCreator.java:117)
    at org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findEligibleAdvisors(AbstractAdvisorAutoProxyCreator.java:87)
    at org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.getAdvicesAndAdvisorsForBean(AbstractAdvisorAutoProxyCreator.java:68)
    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:359)
    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:322)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:407)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1461)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    ... 106 more 
```

以下是我的方面类的详细信息：

```
@Aspect
public class LoggingAspect {

    @Before("allGetters()")
    public void LoggingAdvice(){

        System.out.println("AspectJ Logging");
    }
    @Pointcut("execution(* com.manh.fm.kjb.MgrBean.processMyAction(..))")
    public void allGetters(){}

} 
```

这是我的弹簧上下文文件的详细信息

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.0.xsd
             http://www.springframework.org/schema/tx
              http://www.springframework.org/schema/tx/spring-tx-2.0.xsd
              http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">

<aop:aspectj-autoproxy/>
<bean
        id="com.manh.fm.bid.ejb.BidMgr"
        autowire="default"
        class="com.manh.fm.bid.ejb.BidMgrBean"
        dependency-check="default"
        lazy-init="default"
         >
    </bean>
<bean id="loggingAspect" 
           class="com.manh.fm.aspectj.logger.LoggingAspect"/>
</beans> 
```

我使用的 AspectJ 相关 jar 以及相关 spring jar 是 **aopalliance-1.0,asm-all-3.0,aspectjrt-1.6.10,aspectjweaver,cglib-nodep-2.2.2**

伙计们，我真的很困惑，而且我也是 Aop 的新手，请帮我解决这个问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-15T15:57:08.740

尝试实现“org.aopalliance.intercept.MethodInterceptor”，它是“org.aopalliance.aop.Advice”的“子接口”，如错误所示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:25:30.093

几天前我遇到了类似的问题，**org.springframework.beans.factory.BeanCreationException: Error creating bean**

就我而言，这是旧罐子的[问题 我的问题](https://stackoverflow.com/questions/13895963/aspectj-based-aop-with-spring-3-1)

您可以尝试使用最新的 jar 运行您的应用程序吗：

```
aopalliance-1.0.jar
asm-3.3.1.jar
aspectj-1.7.1.jar
aspectjrt-1.7.0.jar
aspectjweaver-1.7.0.jar
cglib-2.2.2.jar 
```

# java - Web和iOS应用程序之间的关系是什么

> ID：12652521
> 
> 赞同：0
> 
> 时间：2012-09-29T11:58:59.823
> 
> 标签：java, ios, web, relationship

首先很抱歉，因为我有这个想法，但我没有以正确的方式提出问题。但在这里。

iOS 中的应用程序是用objective-c 语言编写的，而在Android 中是用java 编写的。但 facebook 和 instagram 主要是网络应用程序。我听说 Instagram 是用 Django、Python 编写的。

这两种不同的语言如何协同工作。

我是一个新的程序员和开发人员，试图建立一个社交平台。我主要制作简单的游戏和应用程序，例如按下按钮和其他东西。

但我不明白像 facebook 这样的应用程序如何从网站访问您的所有数据，然后将其发布到那里。服务器如何介于两者之间以及所有东西。请解释这种关系，提供任何详细的资源。

我试图搜索很多，但正如我所说，我不知道要问什么？

如果被问到，我可以提供更多细节

即使是最微小的信息也会有很大帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T12:19:34.000

就像你提到的，有用于原生应用程序开发的语言，用于 android 的 Java，用于 ios 的 Objective-c。这些应用程序不是自给自足的，而是与服务器端代码进行通信，该代码以服务器上的任何语言编写，该语言可以是您提到的任何其他语言，php、python，甚至可以是 java，只要对开发人员有用。您看到的移动应用程序只是使用服务器上此类 Web 服务公开的服务。

您可能需要通读以下资源以了解客户端服务器架构以及本机应用程序与 Web 应用程序：本[机与 Web 应用程序](http://sixrevisions.com/mobile/native-app-vs-mobile-web-app-comparison/)、 [客户端服务器模型](http://en.wikipedia.org/wiki/Client%E2%80%93server_model)、[Web服务](http://en.wikipedia.org/wiki/Web_service)

所有这些都将为您提供所需的背景。

但是，您的问题非常广泛，请尝试缩小范围，以便您可以获得具体的帮助。

希望这可以帮助。干杯!

# css - 使 css :hover 只影响父元素

> ID：12652525
> 
> 赞同：7
> 
> 时间：2012-09-29T11:59:21.677
> 
> 标签：css, hover, pseudo-class

在css中，当子事件悬停时，如何停止`:hover`在父元素中触发的事件，以便仅在父元素本身悬停时触发？在这种情况下，我的子元素实际上以绝对定位定位在其父元素之外，因此当子元素悬停时父元素发生变化时，这有点奇怪。

我做了一个[JSFiddle](http://jsfiddle.net/4VwtU/)来说明这个问题。

*这是我的示例使用的解决方案的[JSFiddle](http://jsfiddle.net/4VwtU/4/)。*

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-29T20:58:03.867

有一个纯 css 解决方案（实际上甚至有两个），但两者都是有代价的。

1.  您可以添加指针事件：无；到您的子元素 - 但它也不会响应它自己的悬停样式。[不幸的是，IE 版本 11 ( http://caniuse.com/#search=pointer-events](http://caniuse.com/#search=pointer-events) )不支持[指针事件](https://developer.mozilla.org/en/docs/CSS/pointer-events)。

2.  将父元素的内容（除了定位的子元素）包装在另一个元素中（这是此方法的成本）并将悬停样式应用于此包装器。

两种方法的例子都[在这里](http://jsfiddle.net/theLitek/3CUfa/1/)。

```
.parent-2,
.parent { position:relative; background:#ddd; width:100px; height:100px; }
.parent:hover { background:blue; }
.child { position:absolute; top:0; left:130px; width:100px; height:50px; border:1px solid blue; pointer-events:none; }
/* doesn't work in opera and ie */

.content { position:absolute; top:0; left:0; width:100%; height:100%; z-index:0;}
.content:hover { background:blue; } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-29T12:14:29.043

简单地说：不要在`#inner` `div`里面筑巢。小演示：[小链接](http://jsfiddle.net/glee/Va5NN/)。请注意，我添加了：

```
html, body {
    position: relative;
} 
```

在这种情况下这是必要的。

**编辑：**如果您坚持将其嵌套，则需要一些 JavaScript。这是一个示例：

```
var inn = document.getElementById("inner"), outt = document.getElementById("holder");
outt.onmouseover = function() {
   this.style.backgroundColor = "rgb(0, 162, 232)"; /*I like this color :)*/
}
outt.onmouseout = function() {
   this.style.backgroundColor = "orange";
}
inn.onmouseover = function(ev) {
   ev.stopPropagation();
} 
```

（如果使用 jQuery 编写会更短，但想法是一样的）。

这是一个演示：[小链接](http://jsfiddle.net/glee/HRzxk/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T12:24:16.980

您需要使用一些 JavaScript 来阻止事件冒泡。看看这个例子：

[css :hover 只影响嵌套的顶部 div](https://stackoverflow.com/questions/6679283/css-hover-only-affect-top-div-of-nest)

# php - mysql插入查询不适用于php

> ID：12652528
> 
> 赞同：0
> 
> 时间：2012-09-29T11:59:52.713
> 
> 标签：php, mysql

```
$qry ="insert into `$table`(Number) values('".$msg2."')";
$result = mysql_query($qry); 
```

如果从 php 执行此查询，则会创建一个新行，但不会插入任何值。虽然 id 列会自动递增。msg2的格式有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:06:59.027

请检查列的数据类型 - PHPMYADMIN 中的数字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T12:12:53.657

打印 $qry 的值，看看它是否合适。IE 如果将其粘贴到 mysql 控制台中，它会达到您的预期吗？

另外 - 下次使用准备好的语句。这种方法容易受到注入式攻击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T12:50:01.567

请检查这个

```
$qry ="INSERT INTO $table(`Number`) VALUES ('$msg2')";
if($result = mysql_query($qry)){}
else{
 echo mysql_error();
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-29T12:07:00.390

尝试

```
$qry ="insert into `$table`(Number) values('$msg2')";
$result = mysql_query($qry); 
```

# jsf-2 - 在不同的用户页面中更新 JSF 组件

> ID：12652532
> 
> 赞同：0
> 
> 时间：2012-09-29T12:00:35.350
> 
> 标签：jsf-2, primefaces

我可以在另一个用户页面中更新 jsf 组件吗？

例如：我有一个保存按钮（用于用户 1 - user1/user1.xhtml）。

```
<p:commandButton value="Save" type="submit" update=":user2Form:datatable"/> 
```

数据表（对于 User2 - user2/user2.xhtml）

```
<p:dataTable id="datatable" ..../> 
```

在我的情况下，两个页面都在不同的文件夹中，现在我如何在 user1 保存记录时更新 user2 的数据表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:11:15.327

如果您的意思是：“用户打开了两个页面并希望从另一个页面内部更新一个”，那么出于安全原因，AFAIK 是不可能的。

也许另一种解决方案是使用 PrimeFaces 推送。这样您就可以将更新从服务器发送到客户端。

# google-bigquery - Bigquery GQL 支持

> ID：12652534
> 
> 赞同：0
> 
> 时间：2012-09-29T12:00:52.547
> 
> 标签：google-bigquery

BigQuery 是否计划支持 GQL？如果不是为什么不呢？我知道您可以在浏览器或命令行工具上使用类似 SQL 的语言，但您不能以编程方式使用它对我来说没有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T17:06:13.517

您希望 GQL 提供哪些 BigQuery 不支持的功能？BigQuery 和 GQL 语法之间的唯一区别是对其他数据类型的支持（BigQuery 中没有）和 appengine 密钥支持，这在 BigQuery 中没有意义。

而且您当然可以以编程方式使用 BigQuery。[此](https://developers.google.com/bigquery/docs/hello_bigquery_api)页面显示如何从 java 访问 BigQuery。如果 java 不是您最喜欢的语言，那么还有其他几种语言的客户端库，或者您可以针对原始 REST-ful HTTP 接口进行编码。

如果您对要解决的问题有更好的了解，我们可以更好地了解如何提供帮助以及 BigQuery 是否会支持它。

# android - 二进制 XML 文件第 14 行：膨胀类时出错

> ID：12652539
> 
> 赞同：0
> 
> 时间：2012-09-29T12:01:15.453
> 
> 标签：android, apk

我正在为 android 创建一个应用程序，起初我使用一个库项目在应用程序中包含面板功能，它运行良好。后来我发现我的 .apk 文件包含了我未使用的图像和库项目的 xml 文件，这增加了我的应用程序的大小，所以我决定自己实现面板功能。当我在进行更改后运行应用程序时出现错误`09-28 00:01:00.639: E/AndroidRuntime(1462): FATAL EXCEPTION: main 09-28 00:01:00.639: E/AndroidRuntime(1462): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.widgets.application/com.widgets.application.MainActivity}: android.view.InflateException: Binary XML file line #14: Error inflating class com.widgets.application.utils.Panel`

我在这里上传我的项目，请帮我解决这个问题

[http://www.mediafire.com/?m10u0y5cenqnb1u](http://www.mediafire.com/?m10u0y5cenqnb1u)

日志猫如下

```
09-28 00:01:00.639: E/AndroidRuntime(1462): FATAL EXCEPTION: main
09-28 00:01:00.639: E/AndroidRuntime(1462): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.widgets.application/com.widgets.application.MainActivity}: android.view.InflateException: Binary XML file line #14: Error inflating class com.widgets.application.utils.Panel
09-28 00:01:00.639: E/AndroidRuntime(1462):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
09-28 00:01:00.639: E/AndroidRuntime(1462):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
09-28 00:01:00.639: E/AndroidRuntime(1462):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
09-28 00:01:00.639: E/AndroidRuntime(1462):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
09-28 00:01:00.639: E/AndroidRuntime(1462):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-28 00:01:00.639: E/AndroidRuntime(1462):     at android.os.Looper.loop(Looper.java:123)
09-28 00:01:00.639: E/AndroidRuntime(1462):     at android.app.ActivityThread.main(ActivityThread.java:3683)
09-28 00:01:00.639: E/AndroidRuntime(1462):     at java.lang.reflect.Method.invokeNative(Native Method)
09-28 00:01:00.639: E/AndroidRuntime(1462):     at java.lang.reflect.Method.invoke(Method.java:507)
09-28 00:01:00.639: E/AndroidRuntime(1462):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-28 00:01:00.639: E/AndroidRuntime(1462):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-28 00:01:00.639: E/AndroidRuntime(1462):     at dalvik.system.NativeStart.main(Native Method)
09-28 00:01:00.639: E/AndroidRuntime(1462): Caused by: android.view.InflateException: Binary XML file line #14: Error inflating class com.widgets.application.utils.Panel
09-28 00:01:00.639: E/AndroidRuntime(1462):     at android.view.LayoutInflater.createView(LayoutInflater.java:518)
09-28 00:01:00.639: E/AndroidRuntime(1462):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
09-28 00:01:00.639: E/AndroidRuntime(1462):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
09-28 00:01:00.639: E/AndroidRuntime(1462):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
09-28 00:01:00.639: E/AndroidRuntime(1462):     at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
09-28 00:01:00.639: E/AndroidRuntime(1462):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
09-28 00:01:00.639: E/AndroidRuntime(1462):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
09-28 00:01:00.639: E/AndroidRuntime(1462):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
09-28 00:01:00.639: E/AndroidRuntime(1462):     at android.app.Activity.setContentView(Activity.java:1657)
09-28 00:01:00.639: E/AndroidRuntime(1462):     at com.widgets.application.MainActivity.onCreate(MainActivity.java:65)
09-28 00:01:00.639: E/AndroidRuntime(1462):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-28 00:01:00.639: E/AndroidRuntime(1462):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
09-28 00:01:00.639: E/AndroidRuntime(1462):     ... 11 more
09-28 00:01:00.639: E/AndroidRuntime(1462): Caused by: java.lang.reflect.InvocationTargetException
09-28 00:01:00.639: E/AndroidRuntime(1462):     at java.lang.reflect.Constructor.constructNative(Native Method)
09-28 00:01:00.639: E/AndroidRuntime(1462):     at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
09-28 00:01:00.639: E/AndroidRuntime(1462):     at android.view.LayoutInflater.createView(LayoutInflater.java:505)
09-28 00:01:00.639: E/AndroidRuntime(1462):     ... 22 more
09-28 00:01:00.639: E/AndroidRuntime(1462): Caused by: java.lang.IllegalArgumentException: Binary XML file line #14: The content attribute is required and must refer to a valid child.
09-28 00:01:00.639: E/AndroidRuntime(1462):     at com.widgets.application.utils.Panel.<init>(Panel.java:116)
09-28 00:01:00.639: E/AndroidRuntime(1462):     ... 25 more 
```

**编辑：Panel.java**；

```
public class Panel extends LinearLayout {

private static final String TAG = "Panel";

/**
 * Callback invoked when the panel is opened/closed.
 */
public static interface OnPanelListener {
    /**
     * Invoked when the panel becomes fully closed.
     */
    public void onPanelClosed(Panel panel);

    /**
     * Invoked when the panel becomes fully opened.
     */
    public void onPanelOpened(Panel panel);
}

private boolean mIsShrinking;
private int mPosition;
private int mDuration;
private boolean mLinearFlying;
private int mHandleId;
private int mContentId;
private View mHandle;
private View mContent;
private Drawable mOpenedHandle;
private Drawable mClosedHandle;
private float mTrackX;
private float mTrackY;
private float mVelocity;

private OnPanelListener panelListener;

public static final int TOP = 0;
public static final int BOTTOM = 1;
public static final int LEFT = 2;
public static final int RIGHT = 3;

private enum State {
    ABOUT_TO_ANIMATE, ANIMATING, READY, TRACKING, FLYING,
};

private State mState;
private Interpolator mInterpolator;
private GestureDetector mGestureDetector;
private int mContentHeight;
private int mContentWidth;
private int mOrientation;
private float mWeight;
private PanelOnGestureListener mGestureListener;
private boolean mBringToFront;

public Panel(Context context, AttributeSet attrs) {
    super(context, attrs);
    TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.Panel);
    mDuration = a.getInteger(R.styleable.Panel_animationDuration, 750); // duration
                                                                        // defaults
                                                                        // to
                                                                        // 750
                                                                        // ms
    mPosition = a.getInteger(R.styleable.Panel_position, BOTTOM); // position
                                                                    // defaults
                                                                    // to
                                                                    // BOTTOM
    mLinearFlying = a.getBoolean(R.styleable.Panel_linearFlying, false); // linearFlying
                                                                            // defaults
                                                                            // to
                                                                            // false
    mWeight = a.getFraction(R.styleable.Panel_weight, 0, 1, 0.0f); // weight
                                                                    // defaults
                                                                    // to
                                                                    // 0.0
    if (mWeight < 0 || mWeight > 1) {
        mWeight = 0.0f;
        Log.w(TAG, a.getPositionDescription()
                + ": weight must be > 0 and <= 1");
    }
    mOpenedHandle = a.getDrawable(R.styleable.Panel_openedHandle);
    mClosedHandle = a.getDrawable(R.styleable.Panel_closedHandle);

    RuntimeException e = null;
    mHandleId = a.getResourceId(R.styleable.Panel_handle, 0);
    if (mHandleId == 0) {
        e = new IllegalArgumentException(
                a.getPositionDescription()
                        + ": The handle attribute is required and must refer to a valid child.");
    }
    mContentId = a.getResourceId(R.styleable.Panel_content, 0);
    if (mContentId == 0) {
        e = new IllegalArgumentException(
                a.getPositionDescription()
                        + ": The content attribute is required and must refer to a valid child.");
    }
    a.recycle();

    if (e != null) {
        throw e;
    }
    mOrientation = (mPosition == TOP || mPosition == BOTTOM) ? VERTICAL
            : HORIZONTAL;
    setOrientation(mOrientation);
    mState = State.READY;
    mGestureListener = new PanelOnGestureListener();
    mGestureDetector = new GestureDetector(mGestureListener);
    mGestureDetector.setIsLongpressEnabled(false);

    // i DON'T really know why i need this...
    setBaselineAligned(false);
}

/**
 * Sets the listener that receives a notification when the panel becomes
 * open/close.
 * 
 * @param onPanelListener
 *            The listener to be notified when the panel is opened/closed.
 */
public void setOnPanelListener(OnPanelListener onPanelListener) {
    panelListener = onPanelListener;
}

/**
 * Gets Panel's mHandle
 * 
 * @return Panel's mHandle
 */
public View getHandle() {
    return mHandle;
}

/**
 * Gets Panel's mContent
 * 
 * @return Panel's mContent
 */
public View getContent() {
    return mContent;
}

/**
 * Sets the acceleration curve for panel's animation.
 * 
 * @param i
 *            The interpolator which defines the acceleration curve
 */
public void setInterpolator(Interpolator i) {
    mInterpolator = i;
}

/**
 * Set the opened state of Panel.
 * 
 * @param open
 *            True if Panel is to be opened, false if Panel is to be closed.
 * @param animate
 *            True if use animation, false otherwise.
 * 
 * @return True if operation was performed, false otherwise.
 * 
 */
public boolean setOpen(boolean open, boolean animate) {
    if (mState == State.READY && isOpen() ^ open) {
        mIsShrinking = !open;
        if (animate) {
            mState = State.ABOUT_TO_ANIMATE;
            if (!mIsShrinking) {
                // this could make flicker so we test mState in
                // dispatchDraw()
                // to see if is equal to ABOUT_TO_ANIMATE
                mContent.setVisibility(VISIBLE);
            }
            post(startAnimation);
        } else {
            mContent.setVisibility(open ? VISIBLE : GONE);
            postProcess();
        }
        return true;
    }
    return false;
}

/**
 * Returns the opened status for Panel.
 * 
 * @return True if Panel is opened, false otherwise.
 */
public boolean isOpen() {
    return mContent.getVisibility() == VISIBLE;
}

@Override
protected void onFinishInflate() {
    super.onFinishInflate();
    mHandle = findViewById(mHandleId);
    if (mHandle == null) {
        String name = getResources().getResourceEntryName(mHandleId);
        throw new RuntimeException(
                "Your Panel must have a child View whose id attribute is 'R.id."
                        + name + "'");
    }
    mHandle.setOnTouchListener(touchListener);
    mHandle.setOnClickListener(clickListener);

    mContent = findViewById(mContentId);
    if (mContent == null) {
        String name = getResources().getResourceEntryName(mHandleId);
        throw new RuntimeException(
                "Your Panel must have a child View whose id attribute is 'R.id."
                        + name + "'");
    }

    // reposition children
    removeView(mHandle);
    removeView(mContent);
    if (mPosition == TOP || mPosition == LEFT) {
        addView(mContent);
        addView(mHandle);
    } else {
        addView(mHandle);
        addView(mContent);
    }

    if (mClosedHandle != null) {
        mHandle.setBackgroundDrawable(mClosedHandle);
    }
    mContent.setClickable(true);
    mContent.setVisibility(GONE);
    if (mWeight > 0) {
        ViewGroup.LayoutParams params = mContent.getLayoutParams();
        if (mOrientation == VERTICAL) {
            params.height = ViewGroup.LayoutParams.FILL_PARENT;
        } else {
            params.width = ViewGroup.LayoutParams.FILL_PARENT;
        }
        mContent.setLayoutParams(params);
    }
}

@Override
protected void onAttachedToWindow() {
    super.onAttachedToWindow();
    ViewParent parent = getParent();
    if (parent != null && parent instanceof FrameLayout) {
        mBringToFront = true;
    }
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    if (mWeight > 0 && mContent.getVisibility() == VISIBLE) {
        View parent = (View) getParent();
        if (parent != null) {
            if (mOrientation == VERTICAL) {
                heightMeasureSpec = MeasureSpec.makeMeasureSpec(
                        (int) (parent.getHeight() * mWeight),
                        MeasureSpec.EXACTLY);
            } else {
                widthMeasureSpec = MeasureSpec.makeMeasureSpec(
                        (int) (parent.getWidth() * mWeight),
                        MeasureSpec.EXACTLY);
            }
        }
    }
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
}

@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    super.onLayout(changed, l, t, r, b);
    mContentWidth = mContent.getWidth();
    mContentHeight = mContent.getHeight();
}

@Override
protected void dispatchDraw(Canvas canvas) {
    // String name = getResources().getResourceEntryName(getId());
    // Log.d(TAG, name + " ispatchDraw " + mState);
    // this is why 'mState' was added:
    // avoid flicker before animation start
    if (mState == State.ABOUT_TO_ANIMATE && !mIsShrinking) {
        int delta = mOrientation == VERTICAL ? mContentHeight
                : mContentWidth;
        if (mPosition == LEFT || mPosition == TOP) {
            delta = -delta;
        }
        if (mOrientation == VERTICAL) {
            canvas.translate(0, delta);
        } else {
            canvas.translate(delta, 0);
        }
    }
    if (mState == State.TRACKING || mState == State.FLYING) {
        canvas.translate(mTrackX, mTrackY);
    }
    super.dispatchDraw(canvas);
}

private float ensureRange(float v, int min, int max) {
    v = Math.max(v, min);
    v = Math.min(v, max);
    return v;
}

OnTouchListener touchListener = new OnTouchListener() {
    int initX;
    int initY;
    boolean setInitialPosition;

    public boolean onTouch(View v, MotionEvent event) {
        if (mState == State.ANIMATING) {
            // we are animating
            return false;
        }
        // Log.d(TAG, "state: " + mState + " x: " + event.getX() + " y: " +
        // event.getY());
        int action = event.getAction();
        if (action == MotionEvent.ACTION_DOWN) {
            if (mBringToFront) {
                bringToFront();
            }
            initX = 0;
            initY = 0;
            if (mContent.getVisibility() == GONE) {
                // since we may not know content dimensions we use factors
                // here
                if (mOrientation == VERTICAL) {
                    initY = mPosition == TOP ? -1 : 1;
                } else {
                    initX = mPosition == LEFT ? -1 : 1;
                }
            }
            setInitialPosition = true;
        } else {
            if (setInitialPosition) {
                // now we know content dimensions, so we multiply factors...
                initX *= mContentWidth;
                initY *= mContentHeight;
                // ... and set initial panel's position
                mGestureListener.setScroll(initX, initY);
                setInitialPosition = false;
                // for offsetLocation we have to invert values
                initX = -initX;
                initY = -initY;
            }
            // offset every ACTION_MOVE & ACTION_UP event
            event.offsetLocation(initX, initY);
        }
        if (!mGestureDetector.onTouchEvent(event)) {
            if (action == MotionEvent.ACTION_UP) {
                // tup up after scrolling
                post(startAnimation);
            }
        }
        return false;
    }
};

OnClickListener clickListener = new OnClickListener() {
    public void onClick(View v) {
        if (mBringToFront) {
            bringToFront();
        }
        if (initChange()) {
            post(startAnimation);
        }
    }
};

public boolean initChange() {
    if (mState != State.READY) {
        // we are animating or just about to animate
        return false;
    }
    mState = State.ABOUT_TO_ANIMATE;
    mIsShrinking = mContent.getVisibility() == VISIBLE;
    if (!mIsShrinking) {
        // this could make flicker so we test mState in dispatchDraw()
        // to see if is equal to ABOUT_TO_ANIMATE
        mContent.setVisibility(VISIBLE);
    }
    return true;
}

Runnable startAnimation = new Runnable() {
    public void run() {
        // this is why we post this Runnable couple of lines above:
        // now its save to use mContent.getHeight() && mContent.getWidth()
        TranslateAnimation animation;
        int fromXDelta = 0, toXDelta = 0, fromYDelta = 0, toYDelta = 0;
        if (mState == State.FLYING) {
            mIsShrinking = (mPosition == TOP || mPosition == LEFT)
                    ^ (mVelocity > 0);
        }
        int calculatedDuration;
        if (mOrientation == VERTICAL) {
            int height = mContentHeight;
            if (!mIsShrinking) {
                fromYDelta = mPosition == TOP ? -height : height;
            } else {
                toYDelta = mPosition == TOP ? -height : height;
            }
            if (mState == State.TRACKING) {
                if (Math.abs(mTrackY - fromYDelta) < Math.abs(mTrackY
                        - toYDelta)) {
                    mIsShrinking = !mIsShrinking;
                    toYDelta = fromYDelta;
                }
                fromYDelta = (int) mTrackY;
            } else if (mState == State.FLYING) {
                fromYDelta = (int) mTrackY;
            }
            // for FLYING events we calculate animation duration based on
            // flying velocity
            // also for very high velocity make sure duration >= 20 ms
            if (mState == State.FLYING && mLinearFlying) {
                calculatedDuration = (int) (1000 * Math
                        .abs((toYDelta - fromYDelta) / mVelocity));
                calculatedDuration = Math.max(calculatedDuration, 20);
            } else {
                calculatedDuration = mDuration
                        * Math.abs(toYDelta - fromYDelta) / mContentHeight;
            }
        } else {
            int width = mContentWidth;
            if (!mIsShrinking) {
                fromXDelta = mPosition == LEFT ? -width : width;
            } else {
                toXDelta = mPosition == LEFT ? -width : width;
            }
            if (mState == State.TRACKING) {
                if (Math.abs(mTrackX - fromXDelta) < Math.abs(mTrackX
                        - toXDelta)) {
                    mIsShrinking = !mIsShrinking;
                    toXDelta = fromXDelta;
                }
                fromXDelta = (int) mTrackX;
            } else if (mState == State.FLYING) {
                fromXDelta = (int) mTrackX;
            }
            // for FLYING events we calculate animation duration based on
            // flying velocity
            // also for very high velocity make sure duration >= 20 ms
            if (mState == State.FLYING && mLinearFlying) {
                calculatedDuration = (int) (1000 * Math
                        .abs((toXDelta - fromXDelta) / mVelocity));
                calculatedDuration = Math.max(calculatedDuration, 20);
            } else {
                calculatedDuration = mDuration
                        * Math.abs(toXDelta - fromXDelta) / mContentWidth;
            }
        }

        mTrackX = mTrackY = 0;
        if (calculatedDuration == 0) {
            mState = State.READY;
            if (mIsShrinking) {
                mContent.setVisibility(GONE);
            }
            postProcess();
            return;
        }

        animation = new TranslateAnimation(fromXDelta, toXDelta,
                fromYDelta, toYDelta);
        animation.setDuration(calculatedDuration);
        animation.setAnimationListener(animationListener);
        if (mState == State.FLYING && mLinearFlying) {
            animation.setInterpolator(new LinearInterpolator());
        } else if (mInterpolator != null) {
            animation.setInterpolator(mInterpolator);
        }
        startAnimation(animation);
    }
};

private AnimationListener animationListener = new AnimationListener() {
    public void onAnimationEnd(Animation animation) {
        mState = State.READY;
        if (mIsShrinking) {
            mContent.setVisibility(GONE);
        }
        postProcess();
    }

    public void onAnimationRepeat(Animation animation) {
    }

    public void onAnimationStart(Animation animation) {
        mState = State.ANIMATING;
    }
};

private void postProcess() {
    if (mIsShrinking && mClosedHandle != null) {
        mHandle.setBackgroundDrawable(mClosedHandle);
    } else if (!mIsShrinking && mOpenedHandle != null) {
        mHandle.setBackgroundDrawable(mOpenedHandle);
    }
    // invoke listener if any
    if (panelListener != null) {
        if (mIsShrinking) {
            panelListener.onPanelClosed(Panel.this);
        } else {
            panelListener.onPanelOpened(Panel.this);
        }
    }
}

class PanelOnGestureListener implements OnGestureListener {
    float scrollY;
    float scrollX;

    public void setScroll(int initScrollX, int initScrollY) {
        scrollX = initScrollX;
        scrollY = initScrollY;
    }

    public boolean onDown(MotionEvent e) {
        scrollX = scrollY = 0;
        initChange();
        return true;
    }

    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
            float velocityY) {
        mState = State.FLYING;
        mVelocity = mOrientation == VERTICAL ? velocityY : velocityX;
        post(startAnimation);
        return true;
    }

    public void onLongPress(MotionEvent e) {
        // not used
    }

    public boolean onScroll(MotionEvent e1, MotionEvent e2,
            float distanceX, float distanceY) {
        mState = State.TRACKING;
        float tmpY = 0, tmpX = 0;
        if (mOrientation == VERTICAL) {
            scrollY -= distanceY;
            if (mPosition == TOP) {
                tmpY = ensureRange(scrollY, -mContentHeight, 0);
            } else {
                tmpY = ensureRange(scrollY, 0, mContentHeight);
            }
        } else {
            scrollX -= distanceX;
            if (mPosition == LEFT) {
                tmpX = ensureRange(scrollX, -mContentWidth, 0);
            } else {
                tmpX = ensureRange(scrollX, 0, mContentWidth);
            }
        }
        if (tmpX != mTrackX || tmpY != mTrackY) {
            mTrackX = tmpX;
            mTrackY = tmpY;
            invalidate();
        }
        return true;
    }

    public void onShowPress(MotionEvent e) {
        // not used
    }

    public boolean onSingleTapUp(MotionEvent e) {
        // not used
        return false;
    }
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T04:14:27.143

终于配置好了。仅仅一行代码就搞砸了整个应用程序。只需更改该行，应用程序即可启动并运行。发布解决方案，以便将来可能对某人有所帮助。此行应在布局文件中更改

`xmlns:panel="http://schemas.android.com/apk/res-auto"`

# ruby-on-rails - 在 Ruby on Rails 中结合显示和编辑操作？

> ID：12652540
> 
> 赞同：10
> 
> 时间：2012-09-29T12:01:22.913
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我只是想知道是否有人曾经构建过没有任何*Show*操作的 Rails 应用程序。

在我的应用程序中，如果用户从列表中选择一个项目，比如一个项目，他*可能*不仅想*显示*它，还想*编辑*它。

那么**不**实施任何显示操作而是将所有记录链接到编辑表单是一种好习惯吗？

我看到的唯一警告是用户可能会不小心编辑项目。但这可以通过使用 jQuery 在所有表单字段上设置*禁用的默认属性来防止。*这样，用户必须单击“编辑”按钮才能解锁表单字段以进行编辑。

这有意义还是我完全疯了？

谁知道，也许这会导致与 Rails 的 RESTful 架构发生冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T04:16:21.220

我认为，`show`如果您正在构建一个简单的、命名空间的 CMS 后端，那么采取行动通常是没有意义的。Django-admin 省略了它，类似的路径`/admin/blogs/post/241`直接进入编辑表单。我认为这种方式是有道理的，使用面向前端的网站作为`show`操作。

它确实违反了 Rails 的默认路由约定，但并没有那么大，以至于您冒着升级的风险。

您可以像这样覆盖路由：

```
resources :posts, except: [:show] do
  get ':id' => 'posts#edit', on: :member
end 
```

但是，我会说只是将路由保留为`resources`方法默认定义它们，并在其中抛出`except`选项以避免在有人尝试转到时丢失模板错误`/posts/241`。然后，您可以始终链接到编辑页面。

编辑：我会说，在构建 CMS 时，我确实喜欢使用该`show`操作，但不只是列出属性。我喜欢将它用作该记录的一种摘要，显示一些关键信息，创建时间/上次更新时间，版本列表以及编辑者（如果您喜欢这类事情），以及编辑、销毁或访问前端网站上的记录的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T12:24:03.033

第一个想法：

在我看来，这可能会使您的用户感到困惑，因为： 显示操作的常用网址如下所示：

> 产品/:id

但编辑看起来像：

> 产品/：ID/编辑

因此，如果您的一个用户只想查看（通过单击显示）项目，它可能会被显示的 url 混淆。你可以通过使用命名路由来解决这个问题，但我认为这肯定会与 REST 冲突。

第二个想法：

在实现 jQuery 逻辑只是为了对对象启用编辑操作之前，您应该使用带有显示和编辑页面/方法的内置机制，因为使用默认行为将保持可维护性和可读性更容易和干净。

如果我错了，请纠正我:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T10:46:50.097

单页网页是我们要走的路，尤其是 Ember.js 等。加载新页面以启用编辑这些天似乎有点过时了。您可以使用**最好的**宝石来处理它。

还有一个关于这个主题的 Railscast： [http ://railscasts.com/episodes/302-in-place-editing](http://railscasts.com/episodes/302-in-place-editing)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T17:02:47.213

我更喜欢将edit.html.erb 重命名为show.html.erb，然后让编辑操作在最后呈现显示视图。

如果 edit.html 是您的 web 文件夹中的唯一文件，您可能只需将其重命名为 index.html 对吗？而不是在新的 .htaccess 文件中编写“Index edit.html”只是为了使 edit.html 成为默认索引文件。

或者，如果您希望将视图文件命名为“edit.html.erb”，则可以删除 show.html.erb，并让 show 操作渲染编辑视图（使用“render :edit”）。

我不建议完全省略 show 操作，因为这会使 product/:id/edit 成为唯一可访问的 URL，而 product/:id 将返回 404。

如果您希望您的规范 URL 是 product/:id/edit 或 product/:id，这取决于您，但 product/:id 至少应该呈现相同的视图或重定向到 product/:id/edit

# ios - 每帧 Xcode 的图像数组和 if 语句

> ID：12652541
> 
> 赞同：1
> 
> 时间：2012-09-29T12:01:24.727
> 
> 标签：ios, xcode, arrays, if-statement

我已经尝试了几天来解决这个问题 - 我知道这很简单，我可能错过了，但作为 iOS 新手，我想我在某个地方错过了一些东西。

我在 XCode 中有一个图像视图数组，每个图像视图都分配了一个帧，我似乎无法开始工作的是我想在 if else if 语句之类的东西中比较数组中每个对象中的每个帧.. .我不知道如何让系统做这样的事情......

如果索引 0 处的数组对象中的帧是 (0,0) (90,90) 则执行某些操作，或者如果是 (90,90) (90,90) 则执行此操作，否则执行此操作...

我知道 if else 语句是如何工作的——我想我的主要问题是如何访问数组中对象的框架部分以进行比较？

我很困惑。请帮忙。我很感激。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T12:32:04.513

好吧，我看到了其他答案，但我认为 OP 想知道如何遍历视图数组。所以，这是这样做的方法：

```
for(UIImageView *imgView in yourViewsArray)
{
   if([imgView isMemberOfClass:[UIImageView class]])
   {
       //insert IF statements here like the other answers showed.
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T12:24:11.897

使用该`CGRectContainsRect(CGRect rectReference, CGRect rectToCompareTo)`功能。

`rectToCompareTo`如果在里面，它将返回 YES `rectReference`。

您可以在这里找到更多类似的功能： [https ://developer.apple.com/library/ios/#documentation/graphicsimaging/reference/CGGeometry/Reference/reference.html](https://developer.apple.com/library/ios/#documentation/graphicsimaging/reference/CGGeometry/Reference/reference.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T12:24:34.640

我想您必须分别比较 CGRect 中的每个属性。

```
CGRect aRect = [[array objectAtIndex:0] frame];
if (aRect.origin.x == 0 && aRect.origin.y == 0 && aRect.size.width == 90 && aRect.size.height == 90){
    //do something
}
else if (aRect.origin.x == 90 && aRect.origin.y == 90 && aRect.size.width == 90 && aRect.size.height == 90){
    //do something else 
} 
```

可能只有您在条件语句中关注的 origin.x，然后您可以简单地

```
CGRect aRect = [[array objectAtIndex:0] frame];
if (aRect.origin.x == 0){
    //do something
}
else if (aRect.origin.x == 90){
    //do something else 
} 
```

# ruby-on-rails-3 - 从 Rails 3.2 的每个类别中选择最新的 2 个产品

> ID：12652545
> 
> 赞同：0
> 
> 时间：2012-09-29T12:01:46.627
> 
> 标签：ruby-on-rails-3, activerecord, select, scope

我有一个 PRODUCTS 模型，它有 3 列：ID、NAME 和 CATEGORY 我现在想知道的是，是否可以使用 rails 3.2 为每个不同的类别选择 2 个产品。

所选产品的顺序无关紧要，它们也可能是随机的。但重要的是我每个类别最多只能有 2 个产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T13:36:49.350

模型中的关联：

**产品.rb**

```
belongs_to :categories 
```

**类别.rb**

```
has_many :projects 
```

**控制器：**

```
@categories = Category.all 
```

**看法：**

```
<% @categories.each do |categorie| %>
  <%= categorie.name %> has
  <% categorie.products.limit(2).each do |product| %>
    <%= product.name %>
  <% end %>
<% end %> 
```

# iphone - 在 iPhone 中从 ftp 服务器播放 m4v 视频的问题

> ID：12652549
> 
> 赞同：1
> 
> 时间：2012-09-29T12:02:47.457
> 
> 标签：iphone, video-streaming, mpmovieplayercontroller

```
[myplayer setContentURL:theMovieURL];
[myplayer play]; 
```

每当我播放任何视频时，它只会播放 1-2 秒，然后播放器就会停止。然后当我再次按下播放时，我再次继续并再次停止。

我想这一定是因为速度慢。但它甚至没有显示任何加载状态或类似的东西，它也不会在像你管视频一样流式传输时再次开始自动播放。

我从过去 20 小时开始查看它并失败了。

# session - 有什么方法可以检测用户是否登录到站点？

> ID：12652550
> 
> 赞同：0
> 
> 时间：2012-09-29T12:02:48.293
> 
> 标签：session, cookies, login, login-control

我想知道是否有任何方法可以检查用户是否登录到另一个站点域，例如 facebook、google 或 twitter。

这是合法的和可能的吗？

谢谢

不使用 API

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T12:08:55.237

您可能希望使用网站提供的 API：

1.  脸书：http: [//developers.facebook.com/](http://developers.facebook.com/)
2.  您不清楚您对谷歌的意思，但我假设您的意思是 google+，因为它与您的其他社交网络相关：- [https://developers.google.com/+/api/](https://developers.google.com/+/api/)
3.  推特：dev.twitter.com

编辑：在阅读更多内容后，您必须确保您的用户也同意。

编辑：由于您似乎非常反对使用 API，而我一点也不知道您为什么会这样做，因此出于安全考虑，没有使用 api 的简单方法。至少，没有可靠的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T12:09:03.020

有几种方法可以检查它。有些是hacky，其他是应该检查的方式。

以 facebook 为例，您可以使用他们的 api 并调用方法：FB.getLoginStatus [https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)

一个更骇人的替代方案（虽然不推荐）是在脚本标签中加载网站并在 javascript 中捕获错误。通常错误的具体细节会有所不同。不建议这样做

合法吗？好吧，这不是寻求法律建议的最佳场所，但我很确定这在已采用所谓的 cookie 法的国家/地区是不合法的（未经同意）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T12:22:16.153

这个问题很笼统。无论如何，简短的回答是（显然）不。

否，因为 cookie 不会发送到不同的域（其他服务器）：这意味着如果用户在 My-Site 上浏览，则无法从服务器端（My-Site）知道用户是否登录另一个网站，因为我没有收到任何 cookie。

现在移动到客户端。（浏览器）。您可以从 My-Site 下载“恶意 Javascript”，它试图向我发送来自其他站点的信息（例如 cookie）。

当这个恶意 Javascript 试图窃取信息时，必须面对“同源策略”（同域、同层协议和端口）。换句话说，您无法从 Javascript 访问来自另一个“来源”（如前所述）的信息/代码。

这是，或多或少的理论，那么安全漏洞可能存在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T18:51:33.377

是的。您可以查看登录页面或其他仅登录可访问的页面是否在其浏览器历史记录中。

福布斯：[历史嗅探：YouPorn 如何检查您访问过的其他色情网站以及广告网络如何测试其数据质量](http://www.forbes.com/sites/kashmirhill/2010/11/30/history-sniffing-how-youporn-checks-what-other-porn-sites-youve-visited-and-ad-networks-test-the-quality-of-their-data/)

> 它基于您的浏览器更改您已单击的链接的颜色。该网站上的一个脚本利用 Web 隐私泄漏来快速检查并查看您的浏览器是否显示指向许多其他色情网站的链接已被指定为“紫色”，这意味着您以前点击过它们。

[Mozilla 已经阻止了 CSS 的这个“功能”，](http://blog.mozilla.org/security/2010/03/31/plugging-the-css-history-leak/)因为它非常粗略。未经用户许可，请勿跟踪您的用户。

# google-maps - 谷歌地图没有在页面加载完全加载

> ID：12652551
> 
> 赞同：0
> 
> 时间：2012-09-29T12:02:49.730
> 
> 标签：google-maps

我在我的 Aspx 应用程序中实现谷歌地图。以下代码在 html 中运行良好。当我尝试在 CSHtml 中实现时，它不会在加载时完全显示地图。我在我的 aspx 中使用了以下代码来加载地图。

```
<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAAuPsJpk3MBtDpJ4G8cqBnjRRaGTYH6UMl8mADNa0YKuWNNa8VNxQCzVBXTx2DYyXGsTOxpWhvIG7Djw"
  type="text/javascript"></script>
<script src="http://www.google.com/uds/api?file=uds.js&amp;v=1.0" type="text/javascript"></script>

<script src="gmlocalsearch.js" type="text/javascript"></script>
<script type="text/javascript">

function initialize() {
  if (GBrowserIsCompatible()) {

    // Create and Center a Map
    var map = new GMap2(document.getElementById("map_canvas"));
    map.setCenter(new GLatLng(37.4419, -122.1419), 13);
    map.addControl(new GLargeMapControl());
    map.addControl(new GMapTypeControl());

    // bind a search control to the map, suppress result list
    map.addControl(new google.maps.LocalSearch(), new GControlPosition(G_ANCHOR_BOTTOM_RIGHT, new GSize(10,20)));
  }
}
GSearch.setOnLoadCallback(initialize);

</script> 
```

部分加载地图的 Img

我在以下 URL [http://imageshack.us/photo/my-images/7/mapdk.jpg/](http://imageshack.us/photo/my-images/7/mapdk.jpg/)中上传了屏幕截图。

如何在页面上完全加载地图在我的 CSHtml 页面中自行加载？对此有任何修复或解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:57:15.773

您链接到的图像显示了一张小地图，您的问题也是如此......

> 如何在页面上完全加载地图在我的 CSHtml 页面中加载自身

...意思是您希望地图填满整个页面？

使用上面的示例代码（我假设您将其放在 HTML 文档`<div id="map_canvas"></div>`的. 例如，

```
<style type="text/css">
  #map_canvas { width: 800px; height: 800px; }
</style> 
```

Google Maps API 会将地图呈现为地图包含的 div 的大小。

另请参阅此[Google Maps API 页面](https://developers.google.com/maps/documentation/javascript/tutorial)。他们的示例将呈现一个填满整个页面的地图：

```
<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
  #map_canvas { height: 100% }
</style> 
```

# c# - 如何根据用户的输入动态查看用户控件？

> ID：12652563
> 
> 赞同：2
> 
> 时间：2012-09-29T12:05:03.893
> 
> 标签：c#, wpf, mvvm

我是 MVVM/WPF 的新手，过去两周我一直在研究 Web 示例，但我仍然不知道如何处理以下问题：

我正在为公司的制造部门开发某种“缺陷插入软件”。用户可以“创建新记录”，然后根据用户的选择显示具有不同问题/单选按钮/组合框的不同用户控件。

我受到有关[Internationalized Wizard](http://www.codeproject.com/Articles/31837/Creating-an-Internationalized-Wizard-in-WPF)的精彩文章的启发，但此示例中的向导非常简单明了。

以下代码创建了我的第一个向导步骤：

```
 void CreatePages()
 {
      var welcomePage = new WelcomePageViewModel();
      var settings = new SettingsViewModel();
      var cellScrap = new WizardChooseCellScrapGradeViewModel(this.CellScrap);
      var manufacturer = new WizardChooseManufacturerViewModel(this.CellScrap);

      var pages = new List<WizardPageViewModelBase>(); 

      pages.Add(welcomePage);
      pages.Add(settings);
      pages.Add(cellScrap);
      pages.Add(manufacturer);

      _pages = new ReadOnlyCollection<WizardPageViewModelBase>(pages);
 } 
```

现在当用户选择制造商A时，程序应该要求他在usercontrol_1中填写数据，如果他选择制造商B，那么将显示usercontrol_2。

这样做的最佳做法是什么？我想我不能为此使用 ReadOnlyCollection，有更好的主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:17:23.940

您可以在以下链接中找到答案

*   [WPF：如何动态加载用户控件？](https://stackoverflow.com/questions/1774962/wpf-how-do-i-load-user-controls-dynamically)
*   [http://www.codeproject.com/Questions/222277/Dynamically-creating-usercontrol-in-WPF](http://www.codeproject.com/Questions/222277/Dynamically-creating-usercontrol-in-WPF)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:28:00.407

我通常将 a`ContentControl`设置为基于某个绑定值`ContentControl.Template`的 a 所需的任何模板`DataTrigger`

```
<DataTemplate x:Key="ManufacturerAView" TargetType="{x:Type local:WizardPageViewModelBase}">
    <TextBlock Text="I'm Manufacturer A" />
</DataTemplate>

<DataTemplate x:Key="ManufacturerBView" TargetType="{x:Type local:WizardPageViewModelBase}">
    <TextBlock Text="I'm Manufacturer B" />
</DataTemplate>

<ContentControl Content="{Binding }">
    <ContentControl.Style>
        <Style TargetType="{x:Type ContentControl}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding Manufacturer}" Value="A">
                    <Setter Property="ContentTemplate" Value="{StaticResource ManufacturerAView}" />
                </DataTrigger>
                <DataTrigger Binding="{Binding Manufacturer}" Value="B">
                    <Setter Property="ContentTemplate" Value="{StaticResource ManufacturerBView}" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </ContentControl.Style>
</ContentControl> 
```

`ManufacturerViewModel`无论选择哪个制造商，这仅在您的相同时才有效。

如果它不同，我会将一个 PropertyChange 事件附加到该事件，该事件将在属性更改时向集合`ChooseManufacturerViewModel`添加一个特定的事件。`ManufacturerViewModel``SelectedManufacturer`

```
manufacturer.PropertyChanged += ChooseManufacturer_PropertyChanged;
pages.Add(manufacturer);

....

void ChooseManufacturer_PropertyChanged(object src, PropertyChangedEventArgs e)
{
    if (e.PropertyName == "SelectedManufacturer")
    {
        switch ((WizardChooseManufacturerViewModel)src).SelectedManufacturer)
        {
            // You'll want to check any existing ManufactorerViewModels 
            // and remove them as well if needed
            case "A":
                Pages.Add(new ManufacturerAViewModel);
                break;

            case "B":
                Pages.Add(new ManufacturerBViewModel);
                break;
        }
    }
} 
```

为了正确通知 UI 已添加新页面，您需要使用类型的页面`ObservableCollection<WizardPageViewModelBase>`而不是`ReadOnlyCollection`

# asp.net - 将服务器端代码中的超链接与另一个 DataGrid 的列值绑定

> ID：12652564
> 
> 赞同：0
> 
> 时间：2012-09-29T12:05:37.457
> 
> 标签：asp.net, datagrid, bind

I'm Trying to Bind a Hyperlink Control " server side " to another Column's Value when Selected Index changed

```
<asp:HyperLink ID="HyperLinkID" runat="server"  NavigateUrl='<%# "WebPage.aspx?" & DataGridName.Items[DataGridName.SelectedIndex].Cells[8].Text]  %>'
                                     Visible="false">HyperLink Text</asp:HyperLink> 
```

`DataGridName.Items[DataGridName.SelectedIndex].Cells[8].Text]` 使用while binding有问题吗？我只是想获取所选索引以获取其对应的另一列的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:16:21.623

您尝试使用`ItemCommand event`您的 DataGrid。

在后面的代码中`ItemCommand`

```
void ItemsGrid_Command(Object sender, DataGridCommandEventArgs e)
{
 HyperLinkID.NavigateUrl = "WebPage.aspx" &  e.Item.Cells[8].Text
} 
```

Aspx 代码

```
 <asp:DataGrid id="ItemsGrid"  ...
                    OnItemCommand="ItemsGrid_Command">
 <Columns>
            <asp:ButtonColumn 
                 HeaderText="Select item" 
                 ButtonType="LinkButton" 
                 Text="Select" 
                 CommandName="Select"/>  

  </Columns>
  </asp:DataGrid 
```

# jquery - 当有新记录要自动显示时，如何在 Ruby on Rails 视图中刷新表

> ID：12652567
> 
> 赞同：2
> 
> 时间：2012-09-29T12:06:48.403
> 
> 标签：jquery, ruby-on-rails

感谢您抽时间阅读！

好吧，这就是我想要做的，我有 Rails 应用程序，它显示一个表，显示数据库中的一些信息，我需要它来自动重新加载表（如果可能在部分重新加载，所以我不必重新加载整个页面。）当新数据添加到数据库时。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T12:18:47.873

为了重新加载表数据，您必须首先通知客户端内容已更改，然后实际重新加载内容。为此，您必须在客户端使用 Javascript/Ajax：

*   向控制器添加一个操作，以 JSON 格式返回最后更新的时间戳
*   将时间戳存储在 JS 变量中
*   每 n 秒调用一次操作，以便您可以比较本地和远程时间戳
*   使用 Ajax 将您的表格部分替换为更新的表格

jQuery 随 Rails 一起提供，将非常有效地处理 Ajax 部分。请参阅[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)和[jQuery.replaceWith](http://api.jquery.com/replaceWith/)以用新内容替换旧内容。

在提供表格的控制器操作上，使用一个参数，以便您可以在从 Ajax 调用时禁用布局呈现。这样控制器将只提供相关内容（包含表格的视图）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T12:28:08.150

我会这样处理：

*   使用 Javascript 的 setInterval 函数和 jQuery 的 $.get() 函数来加载页面，例如 /catalog/1/new_items。

`setInterval(function(){
$.get("/catalog/1/new_items.js", function(data){
$("new_items").html(data);
},
"html")
}, 30000);`

*   创建一个 new_items.js.erb 并将其放在您的 app/views/posts 文件夹中。

new_items.js.erb 的内容：

```
<%= render partial: 'new_items', object: @catalog.new_items.last, as: :item %> 
```

*   使用您想要的任何内容创建上述部分（如果您不需要部分，您可以将 div 的全部内容写入 new_posts.js.erb 文件中。）

*   将最新方法添加到您的目录控制器中，该方法定义`@catalog`等以供`latest.js.erb`使用。

*   将 get '/latest' 添加到您的 routes.rb

# bash - 如何在 grep 中为新行提供模式？

> ID：12652568
> 
> 赞同：111
> 
> 时间：2012-09-29T12:06:50.173
> 
> 标签：bash, grep, newline

如何在 grep 中为新行提供模式？开头换行，结尾换行。不是正则表达式的方式。像\n这样的东西。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-10-01T17:46:57.000

尝试`pcregrep`代替常规`grep`：

```
pcregrep -M "pattern1.*\n.*pattern2" filename 
```

该`-M`选项允许它匹配多行，因此您可以搜索换行符为`\n`.

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2012-09-29T12:23:53.050

`grep`模式与单个行匹配，因此模式无法匹配输入中找到的换行符。

但是你可以找到像这样的空行：

```
grep '^$' file
grep '^[[:space:]]*$' file # include white spaces 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2018-03-09T11:10:50.590

感谢@jarno，我知道 -z 选项，并且我发现当使用带有 -P 选项的 GNU grep 时，*匹配`\n`是可能的*。:)

**例子：**

`grep -zoP 'foo\n\K.*'<<<$'foo\nbar'`

印刷`bar`

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2012-09-29T12:30:32.097

你可以用这种方式...

```
grep -P '^\s$' file 
```

*   `-P`用于 Perl 正则表达式（对 POSIX 的扩展`grep`）。
*   `\s`匹配空白字符；如果后跟`*`，它也匹配一个空行。
*   `^`匹配行的开头。`$`匹配行尾。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-10-18T12:04:28.923

至于解决方法（不使用 non-portable `-P`），您可以临时用不同的换行符替换换行符并将其改回，例如：

```
grep -o "_foo_" <(paste -sd_ file) | tr -d '_' 
```

基本上它正在寻找完全匹配的`_foo_`意思`_`（`\n`so `__`= `\n\n`）。您不必将其翻译回来`tr '_' '\n'`，因为无论如何每个模式都会打印在新行中，因此删除`_`就足够了。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-12-29T10:21:21.850

刚刚发现

```
grep $'\r' 
```

它`$'\r'`用于 Bash 中的 c 样式转义。

在[这篇文章中](https://superuser.com/questions/194668/grep-to-find-files-that-contain-m-windows-carriage-return)

# regex - GNU grep regex `[一-十]`（一到十）不匹配汉字四（四）

> ID：12652573
> 
> 赞同：6
> 
> 时间：2012-09-29T12:07:41.213
> 
> 标签：regex, grep, cjk

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T12:16:59.707

中文数字在 Unicode 中不按顺序排列。那个四是U+56DB，一是U+4E00，10是5341。所以4不适合。

阅读 Unicode 标准以获取更多信息，并参见[http://www.unicode.org/charts/PDF/U4E00.pdf](http://www.unicode.org/charts/PDF/U4E00.pdf)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T12:17:14.663

我在一个中文论坛上问过这个问题，alvin_rxg 回复了这个：

```
一 => U+4E00
十 => U+5341
四 => U+56DB 
```

所以我知道我只是做了一个愚蠢的假设！ `grep`没那么聪明。正则表达式 [一-十]（一到十）预计不会与中国数字匹配*。*它只匹配 '一' (U+4E00) 和 '十' (U+5341) 之间的任何字符。碰巧所有中文数字都在那个范围内，除了'四'（U + 56DB）！

不过，这可以用作冷笑话。;-)

# android - gap_bridge_mode prompt when starting a PhoneGap application

> ID：12652578
> 
> 赞同：1
> 
> 时间：2012-09-29T12:08:23.707
> 
> 标签：android, cordova, sencha-touch-2

I am building a Sencha Touch application that I then build using PhoneGap. When I installel the application on my android device for testing I got a strange prompt box asking me to provide a gap_bridge_mode?! What is this and how do I get rid of it (the prompt).

In my current situation I just click the Ok button without providing any value and all works fine. However I cannot release the application with this thing "welcoming" the user.

Please, help!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T07:20:25.807

我想我找到了问题所在。在我的 phonegap 配置文件中，我指出使用 phonegap 2.0.0 - 构建服务器上的最新可用版本 - 而在 index.html 中，我正在加载 2.1.0 - 可供下载的最新版本。

在我将 index.html 更改为指向 2.0.0 版本后，我不再收到此消息。

谢谢您的帮助。

# android - HTML anchor tag (in jquery mobile) doesn't work on Android

> ID：12652582
> 
> 赞同：2
> 
> 时间：2012-09-29T12:08:49.080
> 
> 标签：android, html, jquery-mobile, anchor

I'm making a mobile web page in jquery mobile, and I'm wondering why the html anchor tag `[<a name="one">` as your anchor, and then `<a href="#one">]` works fine in iOS, but doesn't work on Android. Why not?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T02:04:17.903

尝试将 分配给`id`您要定位的元素（页面应滚动/跳转到的元素），并将链接设置`href`为 that `id`，如下所示：

```
<a href="#second">Link</a>
<div id="first">
    ...
</div>
<div id="second">
    ...
</div> 
```

# asp.net - Sub routine for OnClick procedure in GridView is not executing

> ID：12652585
> 
> 赞同：0
> 
> 时间：2012-09-29T12:09:16.210
> 
> 标签：asp.net, vb.net, gridview, onclick

We have a GridView with a 2 buttons. One of the buttons is a select button and the other is a one without a command. It is supposed to activate an OnClick sub routine. The sub routine is not executing.

Here is the markup of the GridView with the buttons:

```
 <asp:GridView
            ID="GridViewParentsSummary" 
            runat="server" 
            AllowPaging="True" 
            AllowSorting="True" 
            AutoGenerateColumns="False" 
            DataKeyNames="ID"
            >

            <Columns>
                <asp:BoundField 
                    DataField="ID" 
                    HeaderText="ID" 
                    SortExpression="ID" InsertVisible="False" ReadOnly="True" Visible="False" />

                <asp:BoundField 
                    DataField="FatherName" 
                    HeaderText="FatherName" 
                    SortExpression="FatherName" />

                <asp:BoundField DataField="MotherName" HeaderText="MotherName" 
                    SortExpression="MotherName" />

                <asp:ButtonField 
                    ButtonType="Button" 
                    CommandName="Select" 
                    Text="Select Details" />

                <asp:TemplateField ShowHeader="False">

                    <ItemTemplate>
                        <asp:Button 
                            ID="ButtonNewPersonToReleaseChildren" 
                            runat="server" 
                            CausesValidation="false" 
                            Text="New Person To Release Children"
                            CommandArgument='<%# Eval("ID") %>'
                            OnClick="NewPersonToReleaseChildren" />
                    </ItemTemplate>

                </asp:TemplateField>
            </Columns>
        </asp:GridView> 
```

Here is the VB.Net code-behind coding with the sub routines for the buttons:

```
Protected Sub GridViewParentsSummary_SelectedIndexChanged(sender As Object, e As EventArgs) Handles GridViewParentsSummary.SelectedIndexChanged

    IntParentsID = GridViewParentsSummary.DataKeys(GridViewParentsSummary.SelectedIndex).Value

    Response.Redirect("AuthorizationForChildReleaseDetails.aspx")
End Sub

Protected Sub NewPersonToReleaseChildren(sender As Object, e As EventArgs)

    blnAddModeIsSelected = True

    MsgBox("The button was clicked.")

    Response.Redirect("AuthorizationForChildReleaseDetails.aspx")
End Sub 
```

I'm sure I am missing some coding but don't know what that could be because the sub routine for the Select button works, but not the sub routine for NewPersonToReleaseChildren.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T07:49:15.870

在网格视图中：

```
<asp:TemplateField HeaderStyle-HorizontalAlign="Center" ItemStyle-HorizontalAlign="Center"
                        FooterStyle-HorizontalAlign="Center">
                        <ItemTemplate>
                            <asp:ImageButton ID="ImgBtnDel" runat="server" ImageUrl="~/Images/icon-delete.gif" CommandName="del"
                                CommandArgument='<%# Eval("ID") %>' />
                        </ItemTemplate>
                    </asp:TemplateField> 
```

在 gridview 中使用 aspButton 或 Imagebutton，在后面的代码中：

```
Protected Sub gridview1_RowCommand(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewCommandEventArgs) Handles gridview1.RowCommand
    Dim myId As String = e.CommandArgument.ToString 
    If  e.CommandName = "del"  Then

    ElseIf e.CommandName = "upd" Then

    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T07:58:29.140

添加`Handles Handles NewPersonToReleaseChildren.Click`到您的处理程序

```
Protected Sub NewPersonToReleaseChildren(sender As Object, e As EventArgs) Handles NewPersonToReleaseChildren.Click

    blnAddModeIsSelected = True

    //MsgBox("The button was clicked.")

    Response.Redirect("AuthorizationForChildReleaseDetails.aspx")
End Sub 
```

我认为`MsgBox`在 asp.net 中没有类似的东西。如果`Handles`不起作用，请将该行替换为该行`Throw New Exception("My Button was called")`或在该行上放置一个断点，然后按 F5

# python - Bringing PyQt and PyChart together

> ID：12652587
> 
> 赞同：1
> 
> 时间：2012-09-29T12:09:23.953
> 
> 标签：python, qt, pyqt, pychart

I want to visualize some measurement values in realtime. I think - although not finally sure - I can do this with PyChart. The surrounding application is based on PyQt.

Now I', wondering how I can put the chart drawn using PyChart into some qt widget, may be a QGraphicWidget?

Could someone give me a bit advise?

Cheers, Wolfgang

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:55:47.147

我已经按照 Eli Benderski 的指示学会了这​​样做。

[在此线程中](https://stackoverflow.com/questions/3972158/how-to-plot-on-my-gui-from-pyqt)的此站点上已对此进行了回答

演示代码在[这里](http://eli.thegreenplace.net/files/prog_code/qt_mpl_bars.py.txt)

这使用 matplotlib 而不是 PyChart。matplotlib 的用法在[此处](http://matplotlib.org/contents.html)有详细记录。

Matplotlib 允许您与绘图画布交互以及导入导航工具栏。

希望这会有所帮助。

# java - JTable 和 DefaultTableModel 不刷新表数据

> ID：12652593
> 
> 赞同：0
> 
> 时间：2012-09-29T12:10:12.340
> 
> 标签：java, swing, jtable, jscrollpane, defaulttablemodel

我在更新/刷新表中的数据时遇到问题。我正在使用 DefaultTableModel。这是代码，因此请分享您的知识和建议。最好的祝福。

**编辑 1: ** 原始代码有一个函数正在更新表数据，但由于构造函数一遍又一遍地创建新的 JTable 和新的 JScrollPane，因此证明是错误的。这就是我创建新构造函数并修复该错误的原因。在我实现新的构造函数后，表数据仍然没有刷新。接下来，我尝试调试构造函数接收到的其他类（passDatatoTable 类）的数据。在我使用函数 setValueAt() 和 System.out.println(getValueAt(i,1)) 之后，输出为空。就是这样首先这里是创建gui的主类：

```
import javax.swing.*;
public class Glavni {
public static void main(String[] args)  {
// TODO Auto-generated method stub
SwingUtilities.invokeLater(new Runnable() {
    public void run() {
            gui Scanner = new gui();
            Scanner.setVisible(true);
    }
});
}

} 
```

第二个是向 gui 发送数据的类

```
public class passDatatoTable {
public void passData(){
String str1,str2,str3,str4;
for (int i =0;i<=10;i++){
        str1="Column 1 of row: "+i;
        str2="Column 2 of row: "+i;
        str3="Column 3 of row: "+i;
        str4="Column 4 of row: "+i;
        gui SendStringsToGUI = new gui(str1, str2, str3, str4);

}
}
} 
```

这是gui类。按钮“添加数据”用于填充数据。这是代码：

```
public class gui extends JFrame implements ActionListener {
private static final long serialVersionUID = 1L;
String[][] data = new String[100][4];

String[] columnNames = new String[]{
     "IP", "PC_NAME", "ttl", "db"
 };
 DefaultTableModel model = new DefaultTableModel(data,columnNames);

 JTable table =  new JTable(model);
 JScrollPane scrollPane = new JScrollPane(table);
 int i=0;
 public gui(String IP, String PC_NAME, String ttl, String gw) {
//Used this constructor to avoid creating new gui in other classes  
model.setValueAt(IP, i, 0);
    model.setValueAt(PC_NAME, i, 1);
    model.setValueAt(ttl, i, 2);
    model.setValueAt(gw, i, 3);
    i++;
    model.fireTableDataChanged();
    table.repaint();
    scrollPane.repaint();

}
    gui(){

    JButton addData= new JButton("Add Data");
    JButton next = new JButton("next");
    JButton prev = new JButton("prev");
    addData.addActionListener(this);
    next.addActionListener(this);
    prev.addActionListener(this);
    JPanel panel = new JPanel(new BorderLayout());
    JPanel buttonPanel = new JPanel();
    buttonPanel.add(addData);
    buttonPanel.add(prev);
    buttonPanel.add(next);
    panel.add(buttonPanel, BorderLayout.SOUTH);
    panel.add(table.getTableHeader(), BorderLayout.PAGE_START);
    panel.add(scrollPane, BorderLayout.CENTER);
    getContentPane().add(panel);
    } 
```

这是动作监听器。按钮 next 和 prev 用于分页，按钮“Add Data”用于创建类“passDatatoTable”的变量，用于填充表格数据

这是代码：

```
public void actionPerformed(ActionEvent e) {
if ("Add Data".equals(e.getActionCommand())){

    passDatatoTable passSomeData = new passDatatoTable();
    passSomeData.passData();
          }
if ("next".equals(e.getActionCommand())) {
     Rectangle rect = scrollPane.getVisibleRect();
     JScrollBar  bar = scrollPane.getVerticalScrollBar();
     int blockIncr = scrollPane.getViewport().getViewRect().height;
         bar.setValue(bar.getValue() + blockIncr);
         scrollPane.scrollRectToVisible(rect);
 }
 if ("prev".equals(e.getActionCommand())) {
     Rectangle rect = scrollPane.getVisibleRect();
     JScrollBar  bar = scrollPane.getVerticalScrollBar();
     int blockIncr = scrollPane.getViewport().getViewRect().height;
         bar.setValue(bar.getValue() - blockIncr);
         scrollPane.scrollRectToVisible(rect);
 }

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T12:32:16.250

您似乎正在为一个`Gui`与您当前显示的对象`Gui`无关的新对象设置表模型数据，因此`JTable` `table`.

拥有模型更新方法将允许您根据需要更新模型数据：

```
public void updateModel(String IP, String PC_NAME, String ttl, String gw) {
   model.setValueAt(IP, i, 0);
   model.setValueAt(PC_NAME, i, 1);
   model.setValueAt(ttl, i, 2);
   model.setValueAt(gw, i, 3);
   i++;
} 
```

您需要将`Gui`对象的引用传递给`PassDatatoTable`对象。后一个对象在其当前形式中几乎没有功能，因此将这个功能引入`Gui`类可能更好。

也没有必要打电话：

```
model.fireTableDataChanged(); 
```

这将自动发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T12:15:30.883

你的问题可能在这里：

```
class passDatatoTable {
   public void passData() {
      String str1, str2, str3, str4;
      for (int i = 0; i <= 10; i++) {
         str1 = "Column 1 of row: " + i;
         str2 = "Column 2 of row: " + i;
         str3 = "Column 3 of row: " + i;
         str4 = "Column 4 of row: " + i;
         gui SendStringsToGUI = new gui(str1, str2, str3, str4); // **** line (A)
      }
   }
} 
```

您似乎正在*(A) 行*上创建一个新的 gui 对象并将数据传递给它。请注意，这个 gui 对象与正在显示的 gui 对象完全没有关系，因此以这种方式传递数据不会导致显示的数据发生明显的变化。

一种可能的解决方案是通过构造函数参数传递对 gui 对象的引用，然后使用该 gui 对象（*不是*构造函数）的公共方法来设置或更改数据。

这是我的意思的一个简单示例：

```
import java.awt.event.ActionEvent;

import javax.swing.*;

public class GuiTest2 {
   private static void createAndShowGui() {
      Gui2 mainPanel = new Gui2();

      JFrame frame = new JFrame("Gui2");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

class Gui2 extends JPanel {
   private JTextField field = new JTextField(10);

   // pass a reference to the GUI object into the controller via
   // its constructor
   private JButton nextBtn = new JButton(new NextController(this, "Next"));

   public Gui2() {
      field.setEditable(false);
      field.setFocusable(false);

      add(field);
      add(nextBtn);
   }

   public void setTextFieldText(String text) {
      field.setText(text);
   }
}

class NextController extends AbstractAction {
   private static final String[] TEXTS = {"Monday", "Tuesday", "Wednesday", "Thursday", "Friday"};
   private Gui2 gui;
   private int index = 0;

   // pass the Gui2 object into the controller's constructor
   public NextController(Gui2 gui, String name) {
      super(name);
      this.gui = gui; // set the Gui2 field with the parameter
   }

   @Override
   public void actionPerformed(ActionEvent arg0) {
      // use the Gui2 object here
      gui.setTextFieldText(TEXTS[index]);
      index++;
      index %= TEXTS.length;
   }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T13:59:29.557

谢谢各位大侠。最后我解决了这个问题。最重要的是将一个对象发送到在表中填充数据的类。换句话说，这就是我所做的：

还记得将数据传递给表的类吗？像我在这里做的那样修改它：

```
public class passDatatoTable {
passDatatoTable(ScanFrame gui){
    String str1,str2,str3;

    for (int i =0;i<=10;i++){
            str1="Column 1 of row: "+i;
            str2="Column 2 of row: "+i;
            str3="Column 3 of row: "+i;
            gui.model.setValueAt(str1, gui.i, 0);
            gui.model.setValueAt(str2, gui.i, 2);
            gui.model.setValueAt(str3, gui.i, 3);
            gui.i++;
    }
}} 
```

现在让我们回到 gui 类。只需删除构造函数（只需将其重命名为您喜欢的任何内容并在主函数中调用它）。这是示例。注意：所有 2 个构造函数都消失了，因为您不需要它们。

代码：

```
public void CreateAndShowGUI(){
setVisible(true);//add this line to show gui
JButton addData= new JButton("Add Data");
JButton next = new JButton("next");
JButton prev = new JButton("prev");
addData.addActionListener(this);
next.addActionListener(this);
prev.addActionListener(this);
JPanel panel = new JPanel(new BorderLayout());
JPanel buttonPanel = new JPanel();
buttonPanel.add(addData);
buttonPanel.add(prev);
buttonPanel.add(next);
panel.add(buttonPanel, BorderLayout.SOUTH);
panel.add(table.getTableHeader(), BorderLayout.PAGE_START);
panel.add(scrollPane, BorderLayout.CENTER);
getContentPane().add(panel);
} 
```

现在重要的标准来了。还记得按钮“添加数据”吗？并非您需要做的就是将此 gui 的引用发送到将数据填充到表的类（passDatatoTable 类），它会起作用。

```
public void actionPerformed(ActionEvent e) {
if ("Add Data".equals(e.getActionCommand())){

passDatatoTable passSomeData = new passDatatoTable();
passSomeData.passData(this);//here!! just add this and it will work!!
      }
if ("next".equals(e.getActionCommand())) {
 Rectangle rect = scrollPane.getVisibleRect();
 JScrollBar  bar = scrollPane.getVerticalScrollBar();
 int blockIncr = scrollPane.getViewport().getViewRect().height;
     bar.setValue(bar.getValue() + blockIncr);
     scrollPane.scrollRectToVisible(rect);
}
if ("prev".equals(e.getActionCommand())) {
 Rectangle rect = scrollPane.getVisibleRect();
 JScrollBar  bar = scrollPane.getVerticalScrollBar();
 int blockIncr = scrollPane.getViewport().getViewRect().height;
     bar.setValue(bar.getValue() - blockIncr);
     scrollPane.scrollRectToVisible(rect);
}

} 
```

**编辑**

```
import javax.swing.*;
 public class Glavni {
public static void main(String[] args)  {
    // TODO Auto-generated method stub
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
                gui Scanner = new gui();
                Scanner.CreateAndShowGUI();
        }
    });
}

    } 
```

忘记添加主类。就这个。如果您有任何问题/疑问，请提出。感谢@Hovercraft Full Of Eels 和@Reimeus 为他们的时间提供的大力帮助。

# java - 使用类创建引用名称和使用接口创建引用名称有什么区别

> ID：12652596
> 
> 赞同：1
> 
> 时间：2012-09-29T12:11:04.160
> 
> 标签：java

任何人都可以解释一下，使用对象创建引用名称或使用接口创建引用名称有什么区别。

前一

```
ArrayList li=new ArrayList();// creating reference  using class name 
```

ex2

```
List li=new ArrayList()//creating reference  using interface name 
```

在实际场景中为什么开发人员使用 ex2？

使用 ex2 有什么好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T12:13:27.870

第二种方法是*对接口进行编程*。它清楚地表明，尽管您可能依赖于所选实现的*行为*的某些方面（例如其性能特征或排序顺序等），但您仅依赖于接口中声明的*成员*。这通常使以后更容易将一种实现换成另一种。

（如果您*依赖*于实现的某些非常具体的方面，我发现明确地说出来通常是个好主意，以避免以后出现意外。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T12:15:03.607

这意味着您正在编写合约而不是实现。在您的示例中，列表联系人。如果以后您需要不同类型的列表，您需要做的就是更改您进行声明的一行。它使将来更容易进行更改。

如果您需要 ArrayList 上不在列表中的特定方法，则使用 ex1 是有效的。虽然如果你从 ArrayList 改变它可能会更难。此链接可能有用[http://jdevelopment.nl/java-best-practices-5-code-to-interface-access-by-name-and-instance-data/](http://jdevelopment.nl/java-best-practices-5-code-to-interface-access-by-name-and-instance-data/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T11:50:02.613

第二个有更多的优点：

在 Set 类型的变量中存储对 a`HashSet`或的引用被认为是一种很好的风格。`TreeSet`例如：

```
Set<String> names = new HashSet<String>(); 
```

这样，如果您决定改用 TreeSet，则只需更改一行。

此外，对集合进行操作的方法应指定 Set 类型的参数：

```
public static void print(Set<String> s) 
```

然后该方法可用于所有集合实现。

# c++ - 二维数组作为函数的参数

> ID：12652598
> 
> 赞同：7
> 
> 时间：2012-09-29T12:11:15.480
> 
> 标签：c++

为什么不能像使用普通数组一样在函数中声明二维数组参数？

```
 void F(int bar[]){} //Ok
 void Fo(int bar[][]) //Not ok
 void Foo(int bar[][SIZE]) //Ok 
```

为什么需要声明列的大小？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-29T14:23:34.143

**静态数组：**

你似乎没有完全明白这一点。我想试着解释一下。正如上面的一些答案所描述的， a `2D Array`in`C++`作为 a 存储在内存中`1D Array`。

```
int arr[3][4] ;   //consider numbers starting from zero are stored in it 
```

在内存中看起来有点像这样。

```
1000    //ignore this for some moments       1011  
^                                             ^
^                                             ^

0   1   2   3   4   5   6   7   8   9   10   11
|------------|  |-----------|   |-------------|
  First Array    Second Array     Third Array

|----------------------------------------------|    
                Larger 2D Array 
```

考虑到这里，Bigger`2D Array`被存储为连续的内存单元。它由总`12`元素组成，从`0`到`11`。行是`3`，列是`4`。如果要访问第三个数组，则需要跳过整个第一个和第二个数组。也就是说，您需要跳过的元素等于您的数量`cols`乘以要跳过的数组数量。结果是`cols * 2`。

现在，当您指定要访问数组的任何单个索引的维度时，您需要事先告诉编译器要跳过多少元素。所以你给它确切的数字`cols`来执行剩下的计算。

那么它是如何进行计算的呢？假设它适用于`column major order`，也就是说，它需要知道要跳过的列数。当您将此数组的一个元素指定为...

```
arr[i][j] ; 
```

编译器自动执行此计算。

```
Base Address + (i * cols + j) ; 
```

让我们尝试一个指数的公式来检验它的真实性。我们要访问数组的`3rd`元素。`2nd`我们会这样做...

```
arr[1][2] ;   //access third element of second array 
```

我们把它放在公式中...

```
 1000 + ( 1 * 4 + 2 )
= 1000 + ( 6 )
= 1006   //destination address 
```

我们到达`1006`所在的地址`6`。简而言之，我们需要告诉编译器`cols`这个计算的数量。所以我们将它作为函数中的参数发送。

如果我们正在研究一个`3D Array`，像这样......

```
int arr[ROWS][COLS][HEIGHT] ; 
```

我们必须在函数中将数组的最后两个维度发送给它。

```
void myFunction (int arr[][COLS][HEIGHT]) ; 
```

现在的公式会变成这个..

```
Base Address + ( (i * cols * height) + (j * height) + k )  ; 
```

要像这样访问它...

```
arr[i][j][k] ; 
```

`COLS`告诉编译器跳过数字`2D Array`，并`HEIGHT`告诉它跳过数字`1D Arrays`。对于任何维度，依此类推。

**动态数组：**

当您询问在这样声明的动态数组的情况下的不同行为时..

```
int ** arr ; 
```

编译器对它们的处理方式不同，因为 a 的每个索引都`Dynamic 2D Array`包含另一个 的地址`1D Array`。它们可能出现在堆上的连续位置上，也可能不出现。它们的元素由它们各自的指针访问。我们上面的静态数组的动态对应物看起来有点像这样。

```
1000  //2D Pointer
^
^
2000       2001     2002
^          ^        ^
^          ^        ^
0          4        8
1          5        9
2          6        10
3          7        11

1st ptr  2nd ptr   3rd ptr 
```

假设是这种情况。这里的`2D Pointer`or Array 上的位置`1000`。它保存`2000`自己保存内存位置地址的地址。这里的指针运算是由编译器完成的，通过它来判断元素的正确位置。

要将内存分配给`2D Pointer`，我们这样做..

```
arr = new int *[3] ; 
```

并以这种方式为其每个索引指针分配内存..

```
for (auto i = 0 ; i < 3 ; ++i)
  arr[i] = new int [4] ; 
```

最后，每一个`ptr`本身`2D Array`就是一个数组。要访问你做的元素...

```
arr[i][j] ; 
```

编译器这样做...

```
*( *(arr + i) + j ) ;
   |---------|
     1st step
|------------------|
      2nd step 
```

在第一步中，`2D Array`被取消引用到其适当的位置`1D Array`，在第二步中，`1D Array`被取消引用以到达适当的索引。这就是为什么`Dynamic 2D Arrays`发送到函数而不提及它们的行或列的原因。

*注意：* 很多细节都被忽略了，很多东西都在描述中，特别是内存映射只是为了给你一个想法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-29T12:25:14.997

你不能写`void Foo(int bar[][])`，因为`bar`衰减到一个指针。想象以下代码：

```
void Foo(int bar[][]) // pseudocode
{
    bar++; // compiler can't know by how much increase the pointer
    // as it doesn't know size of *bar
} 
```

因此，编译器必须知道 的大小`*bar`，因此必须提供最右边数组的大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T12:23:54.337

编译器需要知道第二维计算偏移量的时间。二维数组实际上存储为一维数组。如果您想发送一个没有已知维度的数组，请考虑使用指向指针的指针和某种方式来自己了解维度。

这与例如 java 不同，因为在 java 中数据类型也包含维度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T12:32:46.610

由于静态 2D 数组就像 1D 数组，带有一些糖以更好地访问数据，因此您必须考虑指针的算术运算。
当编译器试图访问元素array[x][y]时，它必须计算元素的地址内存，即array+x*NUM_COLS+y。所以它需要知道一行的长度（它包含多少个元素）。
如果您需要更多信息，我建议您使用此[链接](http://www.cs.umd.edu/class/spring2003/cmsc311/Notes/BitOp/pointer.html)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-29T12:16:35.113

因为当您传递一个数组时，它会衰减为一个指针，因此排除最外面的维度是可以的，这是您可以排除的唯一维度。

```
 void Foo(int bar[][SIZE]) 
```

相当于：

```
 void Foo(int (*bar)[SIZE]) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-29T14:15:42.867

在 C/C++ 中分配二维数组基本上有三种方法

## 在堆上分配为二维数组

您可以使用以下方法在堆上分配一个二维数组`malloc`：

```
const int row = 5;
const int col = 10;
int **bar = (int**)malloc(row * sizeof(int*));
for (size_t i = 0; i < row; ++i)
{
    bar[i] = (int*)malloc(col * sizeof(int));
} 
```

这实际上存储为数组数组，因此在内存中不一定是连续的。请注意，这也意味着每个数组都会有一个指针，这会花费您额外的内存使用（本例中为 5 个指针，如果您以相反的方式分配它，则为 10 个指针）。您可以将此数组传递给具有签名的函数：

```
void foo(int **baz) 
```

## 在堆上分配为一维数组

由于各种原因（缓存优化、内存使用等），可能需要将二维数组存储为一维数组：

```
const int row = 5;
const int col = 10;
int *bar = (int*)malloc(row * col * sizeof(int)); 
```

知道第二维，您可以使用以下方法访问元素：

```
bar[1 + 2 * col]  // corresponds semantically to bar[2][1] 
```

有些人使用预处理器魔法（或 C++ 中的方法重载`()`）来自动处理这个问题，例如：

```
#define BAR(i,j) bar[(j) + (i) * col]
..
BAR(2,1) // is actually bar[1 + 2 * col] 
```

你需要有函数签名：

```
void foo(int *baz) 
```

为了将此数组传递给函数。

## 在栈上分配

您可以使用以下方法在堆栈上分配二维数组：

```
int bar[5][10]; 
```

这被分配为堆栈上的一维数组，因此编译器需要知道第二维才能到达您需要的元素，就像我们在第二个示例中所做的那样，因此以下也是正确的：

```
bar[2][1] == (*bar)[1 + 2 * 10] 
```

这个数组的函数签名应该是：

```
void foo(int baz[][10]) 
```

**您需要提供第二个维度，以便编译器知道在内存中到达的位置。您不必给出第一个维度，因为 C/C++ 在这方面不是一种安全的语言。**

让我知道我是否在某处混淆了行和列..

# google-maps - Google API 3 在一段时间后过期

> ID：12652603
> 
> 赞同：0
> 
> 时间：2012-09-29T12:11:48.507
> 
> 标签：google-maps, google-maps-api-3, jquery-gmap3

我正在使用[Gmap3-Jquery 插件](http://gmap3.net/)在我的一个 Web 应用程序中生成 Google 地图。目前我将[Google API](http://maps.google.com/maps/api/js?sensor=false)下载到我的本地驱动器并在我的 HTML 页面中使用它。

但是所有操作对我来说都很好，但是 3-4 天后 Google API 停止工作。如果我从同一个链接下载新的 Google API 到我的本地驱动器，一切正常。这种问题的原因可能是什么？是因为API Key吗？还是因为我下载到本地驱动器并从本地引用它？

但我正在下载不需要 API 密钥的谷歌地图 API3。

这是代码：

```
<script src="/site_media/js/google-map.js" type="text/javascript"></script>
<script type="text/javascript" src="/site_media/js/gmap3.js"></script> 
<script type="text/javascript">
    $(function(){
    $('#facility_map').gmap3(
        {    
      action:'init',
      options:{
                center:[26.327475, 50.20134],
            zoom: 18,
                mapTypeId: google.maps.MapTypeId.HYBRID
          }
        },      
            {
     action:'getRoute',
     options:{
               origin:['26.327475', '50.20134'], 
               destination:['{{facility.latitude}}', '{{facility.longitude}}'],
           travelMode: google.maps.DirectionsTravelMode.DRIVING
              },
     callback: function(results)
        { 
           if (!results) return;
           $(this).gmap3(
            { 
              action:'addDirectionsRenderer',
              options:{      
                            preserveViewport: true,         
                directions:results
                  }
            });
        }   
    },
           {
             action:'getDistance',
             options:{ 
                      origins:[['26.327475', '50.20134']], 
              destinations:[['{{facility.latitude}}', '{{facility.longitude}}']],
              travelMode: google.maps.TravelMode.DRIVING
             },
      callback: function(results)
      {
        var html = '';
        if (results)
            {
          for (var i = 0; i < results.rows.length; i++)
          {
         var elements = results.rows[i].elements;
         for(var j=0; j<elements.length; j++)
         {
            switch(elements[j].status)
           {
             case google.maps.DistanceMatrixStatus.OK:
                  html += results.destinationAddresses[j]+" -<b> "+elements[j].distance.text + ' (' + elements[j].duration.text + '</b>)<br />';
             break;
             case google.maps.DistanceMatrixStatus.NOT_FOUND:
              html += 'The origin and/or destination of this pairing could not be geocoded<br />';
             break;
             case google.maps.DistanceMatrixStatus.ZERO_RESULTS:
                  html += 'No route could be found between the origin and destination.<br />';
              break;
            }
        }
      } 
       } 
        else 
        {
           html = 'error';
         }
         $('#distance_msg').html("Distance From Rezayat Head Office Khobar to "+html);
       }
     }
    ); 
    });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T13:23:51.473

您是否将以下文件保存到您的硬盘驱动器/Web 应用程序：

> [http://maps.google.com/maps/api/js?sensor=false](http://maps.google.com/maps/api/js?sensor=false)

如果是这样，那么你的问题的答案......

> 还是因为我下载到本地驱动器并从本地引用它？

...是是的。

您引用的那个文件是缓存的，所以它总是在变化。我从未使用过您上面提到的 jQuery 地图插件（虽然它看起来真的很酷！），但在查看他们的 API 时，它提到您应该从 Google 调用该脚本，而不是直接存储它。

另外，请记住，让 Google 为您处理 JS 负载和带宽，并尽量避免将其存储在本地。API 可能会更改，并且使用您的缓存版本，您的地图可能会中断，因为它没有加载最新版本。

我还要添加一件事：让[Google 也加载您的 jQuery](https://developers.google.com/speed/libraries/devguide) - 使用该站点的人将有更好的体验。这篇文章将解释[为什么](http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/)更多。

# c++ - C++将类对象向量的向量保存到文件中

> ID：12652604
> 
> 赞同：1
> 
> 时间：2012-09-29T12:11:48.343
> 
> 标签：c++, file, object, vector, save

我在 C++ 中有一个类，如下所示：

```
class myCls
{
public:
   myCls();
   void setAngle(float angle);
   void setArr(unsigned char arr[64]);    
   unsigned char arr[64];
   double angle;
   int index;

   static float calcMean(const unsigned char arr[64]);
   static float sqrt7(float x);

}; 
```

现在在我的主程序中，我有一个类的 3D 矢量：

```
vector<vector<vector< myCls > > > obj; 
```

矢量的大小也是动态变化的。我的问题是如何将矢量的内容存储到文件中并在之后检索它？

我尝试了很多方法都没有成功。这是我的尝试：

```
std::ofstream outFile;
outFile.open(fileName, ios::out);
for(int i=0;i<obj.size();i++)
    {
        outFile.write((const char *)(obj.data()),sizeof(vector<vector<myCls> >)*obj.size());
    }
outFile.close(); 
```

并阅读它：

```
vector<vector<vector<myCls>>> myObj;
id(inFile.is_open())
{
    inFile.read((char*)(myObj.data()),sizeof(vector<vector<myCls> >)*obj.size());
} 
```

我得到的只是运行时错误。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T15:04:44.720

如果您不太关心性能，请尝试[boost::serialization](http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/tutorial.html)。由于他们已经为 stl 容器实现了序列化功能，因此您只需为 a 编写序列化功能`myCL`，其他一切都是免费的。由于您的成员变量都是公开的，您可以以侵入式[或非侵入式的](http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/tutorial.html#nonintrusiveversion)方式执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T18:07:27.980

在内部，a`vector`通常由两个数字组成，代表当前长度和分配的长度（容量），以及指向实际数据的指针。所以“原始”对象的大小是固定的，大约是指针大小的三倍。这是您的代码当前编写的内容。指针指向的值不会被存储。当您读回内容时，您将指针设置为在大多数情况下甚至不会分配内存的内容，因此会出现运行时错误。

一般来说，直接操作任何提供构造函数、析构函数或赋值运算符的类的内存是一个非常糟糕的主意。您的代码写入 的私有成员`vector`会彻底混淆内存管理，即使您也注意恢复指向的数据。出于这个原因，您应该只按照您的方式编写简单 ( [POD](http://en.wikipedia.org/wiki/Plain_old_data_structure) ) 数据。其他一切都应该定制为使用自定义代码。

对于向量，您可能会先存储长度，然后一次写入一个元素。对于阅读，您会读取长度，可能会相应地保留内存，然后一次读取一个元素。[Voltron 建议](https://stackoverflow.com/a/12653828)的`boost::serialization`模板可能会为您省去实现所有这些的麻烦。

# php - 使用 CSV 和 PHP 脚本更新 Magento 股票

> ID：12652607
> 
> 赞同：0
> 
> 时间：2012-09-29T12:12:15.340
> 
> 标签：php, magento, csv, stocks

刚刚发现这篇很棒的文章： http: [//www.blog.magepsycho.com/updating-product-qty-in-magento-in-an-easier-faster-way/](http://www.blog.magepsycho.com/updating-product-qty-in-magento-in-an-easier-faster-way/)但有些东西效果不佳。当我有一个包含“sku”和“is_in_stock”列的 CSV 并且我使用脚本时，它还会在“is_in_stock”为 0 时将“qty”设置为 0。这怎么可能？因为我只想更新“is_in_stock”，而不是“数量”。

你能帮我解决这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T12:25:20.987

链接脚本忽略标题行并将第二列视为数量，无论您将其命名为“is_in_stock”。这就是“数量”设置为 0 的原因。

如果您只需要一种将某些商品标记为无库存的快速方法：

1.  转到 admin，然后**Manage Products**。
2.  搜索您要更改的内容并在它们旁边打勾。
3.  在**Actions**框中选择**Update Attributes**然后单击**Submit**。
4.  在**库存**选项卡上，单击**库存可用性的****更改**框，然后选择**缺货**。
*****   单击**保存**。****

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T01:27:54.250

您可以改用此脚本，[http://www.sonassi.com/knowledge-base/magento-kb/mass-update-stock-levels-in-magento-fast/](http://www.sonassi.com/knowledge-base/magento-kb/mass-update-stock-levels-in-magento-fast/)

附带说明一下，如果您的 CSV 中有 5000 行，您应该保留之前上传的文件，然后对实际更改的行执行比较 - 这样，您只需要修改少量的产品。****

# ember.js - Ember.Controllers 是做什么用的？

> ID：12652609
> 
> 赞同：1
> 
> 时间：2012-09-29T12:12:25.527
> 
> 标签：ember.js

我想要一些关于如何使用 Ember.Controller 对象的示例。除了 StateManager 之外，我真的发现自己根本没有使用 Ember.Controllers。在 Ember 源代码中，它说`action`s 应该被发送到控制器，但我真的没有发现自己使用这些，因为我抽象了很多视图，因此使用内置`action`的 s，如`click`、`change`和`keyUp`。我抽象太多了吗？

例如，如果我在页面上显示一个按钮，那么我将在我的控制器视图中创建一个新的 Ember.View，然后将其简单地包含在页面上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T05:23:07.193

与控制器的最直接交互确实是通过`StateManager`/ `Router`。控制器的主要职责是将数据呈现给视图以进行渲染。他们通过代理模型以及维护瞬态来做到这一点。

您也正确的是，单个控制器通常可以负责视图的层次结构。

我最近做了一个关于 Ember 应用程序中各个层的职责的讨论。幻灯片在这里：[http ://www.lukemelia.com/devblog/archives/2012/08/23/architecting-ember-js-apps/](http://www.lukemelia.com/devblog/archives/2012/08/23/architecting-ember-js-apps/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T19:08:33.493

这个网站很好地介绍了如何使用 Ember 的 MVC 的每个部分，以及它们之间的关系：

[http://www.lukemelia.com/blog/archives/2012/08/23/architecting-ember-js-apps/](http://www.lukemelia.com/blog/archives/2012/08/23/architecting-ember-js-apps/)

# extjs - 如何在 Ext JS 中查找包含多个指定类的组件？

> ID：12652615
> 
> 赞同：2
> 
> 时间：2012-09-29T12:13:53.003
> 
> 标签：extjs, component-query

我试图找到一个 Ext JS 组件查询的示例，该查询搜索具有多个类的项目。

这是按类查找组件的标准：

```
Ext.Component.query('panel[cls~=my-cls]') 
```

我想做类似的事情：

```
Ext.Component.query('panel[cls~=my-cls && cls~=my-other-cls]') 
```

有人有这方面的例子吗？

谢谢

顺便说一句，该组件可能有 10 个类，但我只想指定 2 个它应该包含例如

```
cls: 'ths tht r1 c1' 
```

查找同时具有 ' `r1 & c1`' 的组件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T08:34:46.780

你指的是哪个版本的 Ext JS？4.1.2？

您应该能够链接属性搜索（在 Ext JS 4.1.1 中测试，还没有 ~= 运算符）：

```
Ext.ComponentQuery.query("panel[cls~=my-cls][cls~=my-other-cls]") 
```

# java - 在 catch 块内抛出异常

> ID：12652616
> 
> 赞同：0
> 
> 时间：2012-09-29T12:14:05.370
> 
> 标签：java, mysql, exception

```
 public void onClick() throws SQLException   
  try {
 // Do something
} catch(MySQLIntegrityConstraintViolationException e) { 
     //Can i convert this exception to SQL Exception
} 
```

我可以将 MySQLIntegrityConstraintViolationException 转换为方法抛出的 SQLException 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T12:18:17.693

但是 MySQLIntegrityConstraintViolationException 已经**是**一个 SQLExecption （通过继承）！所以没有必要重新抛出它（只需删除 try/catch 块）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T12:16:53.583

当然，您可以包装和重新抛出 - 如果您认为它会添加更多信息或使您的想法更普遍。我认为在这种情况下，您捕获的异常提供的信息比您考虑的要多。

不过，我不会选择 SQLException。这是一个检查异常。我认为潮流已经从受检异常转变为不受检异常。

Spring 将 SQLExceptions 包装到扩展 RuntimeException 的未经检查的 DataAccessException 中。我建议你效仿。

这是你应该如何做的：

```
catch(MySQLIntegrityConstraintViolationException e) { 
    throw new SQLException(e);
} 
```

不要只是传递信息。给出整个堆栈跟踪。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T12:40:48.953

由于`MySQLIntegrityConstraintViolationException`是`SQLException`重新抛出的子类是不必要的。如果您想从数据库特定细节中抽象出业务逻辑层，请确保在逻辑层中捕获 SQL 异常，以便即使数据库切换逻辑仍然有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T12:19:25.593

您可以使用构造函数`SQLException`在您的块中创建一个`Catch`..

```
try {
} catch (MySQLIntegrityConstraintViolationException e) {
    throw new SQLException(e);
} 
```

# jquery - 将 Zepto 与原型一起使用

> ID：12652618
> 
> 赞同：0
> 
> 时间：2012-09-29T12:14:31.593
> 
> 标签：jquery, prototypejs, zepto

我想在同时具有 jQuery 和 Prototype 的页面中使用 Zepto。`noConflict()`但我在 Zepto 文档中找不到。我在同一页面上将我的 jquery 代码与原型一起使用，因此无冲突非常重要。

有人可以让我知道如何在 noConflict 模式下使用 Zepto 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T12:28:27.730

如果您在 jQuery 或任何*将*获取的库之后包含 Zepto，它在源代码中看起来像[这里](https://github.com/madrobby/zepto/blob/master/src/zepto.js#L642)，它不会设置它（事实上）：*`$``noConflict()`*

 *```
// If `$` is not yet defined, point it to `Zepto`
window.Zepto = Zepto
'$' in window || (window.$ = Zepto) 
```*

# android - 如何将消息从 asytask 传递给 activite

> ID：12652620
> 
> 赞同：1
> 
> 时间：2012-09-29T12:14:46.143
> 
> 标签：android, android-asynctask, handler

我想从 asytask 向我的主要活动发送一些消息。我想用消息对象（处理程序）来做到这一点。在我的主要活动中，我创建了这个

```
 final Handler mHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        msg.toString(); 
    }

}; 
```

我传递给 asytask 的对象

```
 new splash(first.this,mHandler).execute(); 
```

以及从此方法向活动发送消息的 asytask

```
protected void onPostExecute(String result) {
    Message msg =  new Message();
    Bundle bundle = new Bundle();
    bundle.putString("ActivityName",this.newActivity);
    msg.setData(bundle);
    mHandler.sendMessage(msg);
    Dialog.dismiss(); 
```

日志猫

```
 09-29 11:55:41.631: E/AndroidRuntime(473): FATAL EXCEPTION: main
09-29 11:55:41.631: E/AndroidRuntime(473): java.lang.NullPointerException
09-29 11:55:41.631: E/AndroidRuntime(473):  at tools.splash.onPostExecute(splash.java:109)
09-29 11:55:41.631: E/AndroidRuntime(473):  at tools.splash.onPostExecute(splash.java:1)
09-29 11:55:41.631: E/AndroidRuntime(473):  at android.os.AsyncTask.finish(AsyncTask.java:417)
09-29 11:55:41.631: E/AndroidRuntime(473):  at android.os.AsyncTask.access$300(AsyncTask.java:127)
09-29 11:55:41.631: E/AndroidRuntime(473):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
09-29 11:55:41.631: E/AndroidRuntime(473):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-29 11:55:41.631: E/AndroidRuntime(473):  at android.os.Looper.loop(Looper.java:123)
09-29 11:55:41.631: E/AndroidRuntime(473):  at android.app.ActivityThread.main(ActivityThread.java:3683)
09-29 11:55:41.631: E/AndroidRuntime(473):  at java.lang.reflect.Method.invokeNative(Native Method)
09-29 11:55:41.631: E/AndroidRuntime(473):  at java.lang.reflect.Method.invoke(Method.java:507)
09-29 11:55:41.631: E/AndroidRuntime(473):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-29 11:55:41.631: E/AndroidRuntime(473):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-29 11:55:41.631: E/AndroidRuntime(473):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T12:35:26.507

根据您上面的评论，应用程序在`Dialog.dismiss()`. `Dialog`变量是否正确声明和实例化？您是否在某处使其为空？（我想`Dialog`是一个变量而不是一个类，对吧？）

编辑：

好的，但问题仍然存在。您是否检查过该`mHandler`对象是否已正确声明为 instatiated 而不是`null`？

您将它作为参数传递给`AsyncTask`. 您可以将代码发布到您获取的位置`mHandler`并将其存储在“某处”吗？

是否`AsyncTask`在同一范围内`Handler`？

# charts - Google 控件和仪表板 - 更改占位符值

> ID：12652628
> 
> 赞同：0
> 
> 时间：2012-09-29T12:16:16.190
> 
> 标签：charts, google-api, google-visualization

我需要更改 Google 图表类别过滤器的默认占位符值。谁能指定我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:33:37.967

最后我找到了我需要的答案。在选项中添加以下属性让我回家了。

```
 var categoryPicker = new google.visualization.ControlWrapper({
      'controlType': 'CategoryFilter',
      'containerId': 'control2',
      'options': {
        'filterColumnLabel': 'Project',
        'ui': {
        'labelStacking': 'vertical',
        'caption':'Select Project',
          'allowTyping': true,
          'allowMultiple': true
        }
      }
    }); 
```

标题属性起到了作用。

# sql - “外键”和“约束外键”的区别

> ID：12652629
> 
> 赞同：34
> 
> 时间：2012-09-29T12:16:19.303
> 
> 标签：sql, foreign-keys

我的意思是例如我可以创建像

```
create table XTable
( 
  idt int not null primary key,
  value nvarchar(50),
  idq int,
  constraint fk_idq foreign key(idq) references YTable(idq)
) 
```

我可以像这样创建它

```
create table XTable
(
  idt int not null primary key,
  value nvarchar(50),
  idq int,
  foreign key(idq) references YTable(idq)
) 
```

我通常像第二个例子一样创建表格，但现在我对第一个例子很好奇。有什么区别？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-29T12:17:42.790

第一个将用户定义的名称分配给外键，第二个将系统生成的名称分配给外键。

用户定义的外键名称可用于以下语句：

```
ALTER TABLE XTable DROP    CONSTRAINT fk_idq;
ALTER TABLE XTable ENABLE  CONSTRAINT fk_idq;
ALTER TABLE XTable DISABLE CONSTRAINT fk_idq; 
```

使用系统生成的名称更改约束更加困难，因为您必须首先发现这些名称。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-29T12:19:08.250

第一个选项纯粹用于命名约束。

从[SQL FOREIGN KEY 约束](http://www.w3schools.com/sql/sql_foreignkey.asp)

要允许命名`FOREIGN KEY`约束并在多列上定义`FOREIGN KEY`约束，请使用以下 SQL 语法

```
CREATE TABLE Orders
(
  O_Id int NOT NULL,
  OrderNo int NOT NULL,
  P_Id int,
  PRIMARY KEY (O_Id),
  CONSTRAINT fk_PerOrders FOREIGN KEY (P_Id)
  REFERENCES Persons(P_Id)
) 
```

此外，从[CREATE TABLE (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms174979%28v=sql.105%29.aspx)可以看出这`[ CONSTRAINT constraint_name ]`是可选的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-29T12:19:26.643

除了控制名字，真的没什么。如果您省略它，SQL Server 将提供一个名称。仅供参考，您只需要这种语法[（SQL Fiddle）](http://sqlfiddle.com/#!3/d59b2)：

```
create table XTable
(
  idt int not null primary key,
  value nvarchar(50),
  idq int references YTable(idq)
) 
```

这是一个[更完整的例子](http://sqlfiddle.com/#!3/47811/5/0)。

# javascript - JavaScript 中的多维数组？

> ID：12652634
> 
> 赞同：-5
> 
> 时间：2012-09-29T12:16:51.313
> 
> 标签：javascript, multidimensional-array

我有

```
var items = new Array('0,364,2113,0','0,0,0,0'); 
```

我想把它转换成多维数组，比如

```
var Finalitems = [[0, 364,2113,0], [0, 0, 0,0]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:23:04.993

您可以只循环 items 数组，然后在`,`. 这将返回一个新数组，您可以将其添加到新的`double dim array`.

像这样的东西：

```
declare double dim array "dimarray";
declare int i = 0;
foreach(...in "items")
{
  var "newarray" = split(...);
  dimarray[i] = newarray;
  i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T12:26:03.480

就像是

```
var items = new Array('0,364,2113,0','0,0,0,0');
var finalitems = [];

for (var i in items)
{
    vals = items[i].split(',');
    finalitems.push(vals);
} 
```

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T12:54:10.750

要提供您所要求的，一个数字数组*（不是字符串）*，请执行此操作。

```
var finalArray = items.map(function(item) {
                              return item.split(",").map(Number);
                           }); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-29T12:34:08.510

```
<!DOCTYPE html>
<html>
<head>
<script>

function onBtnPress()
{
    var items = new Array('0,364,2113,0','0,0,0,0');
    var nItems, i;
    var result = new Array();

    nItems = items.length;
    for (i=0; i<nItems; i++)
    {
        curStr = items[i];
        curItemArray = curStr.split(',');
        len = curItemArray.length;
        for (index=0; index<len; index++)
        {
            curItemArray[index] = parseInt(curItemArray[index]);
        }

        result.push(curItemArray);
    }
    console.log(result);
}
</script>

<title></title>
</head>
<body>
    <input type='button' onclick='onBtnPress();' value='click me' >
</body>
</html> 
```

# c - cflags '-Wl,-export-dynamic' 与链接器标志 '-export-dynamic'

> ID：12652641
> 
> 赞同：2
> 
> 时间：2012-09-29T12:17:47.747
> 
> 标签：c, cmake, clang

我在 CMake 中使用 Clang 编译了具有不同编译标志的相同程序（不是库）

1.  使用 CMAKE_C_FLAGS = -Wl,-export-dynamic
2.  使用 CMAKE_EXE_LINKER_FLAGS = -export-dynamic

但我注意到第二种方法似乎不起作用。我找不到导出的符号。我很惊讶只有第一种方式有效。我不知道 C 编译器是否会做一些棘手的事情，或者 Clang 或 CMake。但是如何让第二种方式起作用呢？第一种方法会打印很多警告。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T12:52:52.400

为第二个变体提供相同的选项。

> 设置（CMAKE_EXE_LINKER_FLAGS“-Wl，-导出-动态”）

因为在您的情况下编译器和链接器相同。

# c++ - 我可以在 Qt 中初始化一个继承的类

> ID：12652653
> 
> 赞同：1
> 
> 时间：2012-09-29T12:19:34.847
> 
> 标签：c++, qt, initialization-list, qdjango

我创建了一个名为 video 的 Qt 类，如下所示：

视频.h

```
class Video : public QDjangoModel {
    Q_OBJECT
//  ...

public:
    explicit Video(QObject *parent = 0);
//  ...
}; 
```

视频.cpp

```
Video::Video(QObject *parent) : QDjangoModel(parent) {} 
```

并发生以下错误：

```
In file included from ../OnlineVideoPlayer/video.h:7:0,
                 from ../OnlineVideoPlayer/video.cpp:28: ../../../bin/QtSDK/Desktop/Qt/4.8.1/gcc/include/QtCore/qobject.h: In
copy constructor 'QDjangoModel::QDjangoModel(const QDjangoModel&)':
../../../bin/QtSDK/Desktop/Qt/4.8.1/gcc/include/QtCore/qobject.h:333:5:
error: 'QObject::QObject(const QObject&)' is private
/usr/local/include/qdjango/db/QDjangoModel.h:72:22: error: within this
context In file included from ../OnlineVideoPlayer/video.cpp:28:0:
../OnlineVideoPlayer/video.h: In copy constructor 'Video::Video(const
Video&)': ../OnlineVideoPlayer/video.h:14:7: note: synthesized method
'QDjangoModel::QDjangoModel(const QDjangoModel&)' first required here 
```

此类扩展名为的类`QDjangoModel`（包含在[QDjango](https://code.google.com/p/qdjango/)中）并`QDjangoModel`扩展`QObject`。当我在 Qt creator 上创建类时，它会创建以下模板：

```
NewClass::NewClass(QObject *parent) : QObject(parent) {} 
```

我认为`: QObject(parent)`是父母的构造函数，所以我将其替换为`: QDjangoModel(parent)`但似乎不正确。

问题：

**Q1。什么`: QObject(parent)`意思？**

我搜索了初始化列表，我理解了以下代码的含义：

```
class NewClass {
public:
    FileReader(QString name);
private:
    QString m_name;
};

NewClass::NewClass(QString name) : m_name(name) {} 
```

在这种情况下，

```
m_name = name; 
```

在构造函数执行时执行，对吗？

但就我而言，

```
NewClass::NewClass(QObject *parent) : QObject(parent) {} 
```

或者

```
NewClass::NewClass(QObject *parent) : QDjangoModel(parent) {} 
```

不意味着

```
QObject = parent; 
```

或者

```
QDjangoModel = parent; 
```

显然，所以我对`m_name(name)`案例的理解不适用于`QObject(parent)`案例。

**Q2。我该如何解决这个错误？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T14:35:36.113

由于您没有在代码中提供复制构造函数，因此编译器会为您合成一个。

编译器合成的复制构造函数调用基类复制构造函数。

就像它以`:)`这种方式实现（嗯，合成）：

```
Video::Video(const Video&) : QDjangoModel::QDjangoModel(const QDjangoModel&) 
{ /* [...] */ } 
```

我认为问题在于，在从编译器合成的复制构造函数开始的调用流程中，有一个`QObject::QObject(const QObject&)`私有调用。

Qt 不想让你复制`QObject`，所以你不能这样做，否则你的代码将无法编译！

这（即，将复制 ctor 设为私有）是一种典型且良好的设计，用于不应该使对象可复制的情况。

作为一种解决方案，请尝试定义自己的复制构造函数，以免`QObect`调用复制构造函数。

例子：

```
Video::Video(const Video&) 
{;} 
```

# php - 使用 htaccess 隐藏文件扩展名

> ID：12652656
> 
> 赞同：1
> 
> 时间：2012-09-29T12:20:15.760
> 
> 标签：php, .htaccess, mod-rewrite, markdown

我在 mod rewrite 方面不是最好的，所以如果有人可以在这里帮助我，那就太好了。

我正在使用降价处理器脚本，它使用重写来获取以降价文件类型结尾的任何文件。但是，我希望这个脚本能够抓取文件夹中的任何文件，而不是任何以 markdown 文件类型结尾的文件。

这是`htaccess`：

```
# display Markdown as HTML by default
RewriteEngine on

RewriteRule .+\.(markdown|mdown|md|mkd)$ /static/includes/markdown/render.php
RewriteRule .+\.(markdown|mdown|md|mkd)\-text$ /static/includes/markdown/render.php [L] 
```

有没有办法抓取一个名为（比如说）“文件夹”的文件夹中的所有文件并最终消除文件类型？

所以也许有一个像

```
website.com/home 
```

那实际上是

```
website.com/home.md 
```

并使用降价脚本处理？

希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T12:31:09.683

重写模块及其`.htaccess`文件实际上是在每个文件夹的基础上工作的。`.htaccess`通常，在站点/服务器的 Web 根目录中会有一个主文件。但是，您可以`.htaccess`在整个站点的文件夹结构中添加大量文件，为每个单独的文件夹提供特定规则。

您所要做的就是将另一个`.htaccess`文件添加到您的降价文件夹并使其能够解析没有文件扩展名的 URL，将其转发到能够检测请求的原始文件的脚本 -

```
RewriteEngine on
RewriteRule ^(.*)$ /static/includes/markdown/render.php?file=$1 [L,QSA] 
```

基本上这里发生的情况是，此文件夹中请求的任何文件都将通过您的`render.php`文件传递。

现在在您的`render.php`文件中，您将有一个包含原始 URL的`$_GET`参数。`file`对于 url `http://example.com/markdown/foo`，您`render.php`将`foo`在`file`参数中包含 -

```
 /static/includes/markdown/render.php?file=foo 
```

如果您在其中设置正确的标题，`render.php`它将能够打印出任何格式的文件，将其扩展名隐藏在“假”URL中。

# java - 铸造代理 - 获取 ClassCastException

> ID：12652663
> 
> 赞同：3
> 
> 时间：2012-09-29T12:21:18.657
> 
> 标签：java, casting, proxy-classes

当我将动态代理类投射到我想要的对象时，我感到有些奇怪。在运行时，在某些情况下，我收到 ClassCastException。

为了更好地解释这一点，这里是我想要使用的类/接口的定义。任何（应该）不相关的扩展接口都被括号括起来。

```
public interface CommandSender (extends Permissible)
public interface ConsoleCommandSender extends CommandSender, (Conversable)
public interface Player extends (HumanEntity, Conversable), CommandSender, (OfflinePlayer, PluginMessageRecipient) 
```

完整的 Javadocs 可以在这里找到：http: [//jd.bukkit.org/apidocs/org/bukkit/command/CommandSender.html](http://jd.bukkit.org/apidocs/org/bukkit/command/CommandSender.html)

现在，这是我的代理类的代码：

```
public class CommandSignsMessagingProxy implements InvocationHandler {

    private Object sender;
    private Object receiver;
    private boolean silent;

    public static Object newInstance(Object proxy) {
        return newInstance(proxy, proxy, false);
    }
    public static Object newInstance(Object proxy, boolean silent) {
        return newInstance(proxy, proxy, silent);
    }
    public static Object newInstance(Object sender, Object receiver) {
        return newInstance(sender, receiver, false);
    }
    public static Object newInstance(Object sender, Object receiver, boolean silent) {
        return Proxy.newProxyInstance(
                sender.getClass().getClassLoader(),
                sender.getClass().getInterfaces(),
                new CommandSignsMessagingProxy(sender, receiver, silent));
    }

    private CommandSignsMessagingProxy(Object sender, Object receiver, boolean silent) {
        this.sender = sender;
        this.receiver = receiver;
        this.silent = silent;
    }

    // Is called whenever a method is invoked
    public Object invoke(Object p, Method m, Object[] args) throws Throwable {
        Object result = null;
        try {
            String name = m.getName();
            // If the receiver is being sent a message, only do so if the silent flag is not set
            if (name == "sendMessage" || name == "sendRawMessage") {
                if (!silent && receiver != null)
                    result = m.invoke(receiver, args);
            } else {
                result = m.invoke(sender, args);
            }
        } catch (InvocationTargetException e) {
            throw e.getTargetException();
        } catch (Exception e) {
            throw new RuntimeException("Unexpected invocation exception: " + e.getMessage());
        }
        return result;
    }

} 
```

这是该类的完整工作实例：

```
Player proxy = (Player)CommandSignsMessagingProxy.newInstance(player, false);
proxy.sendMessage("Hi! Silent is turned off, so you can see this!");
proxy.setOp(true);
proxy.other_stuff(); 
```

然而，这个不起作用：

```
ConsoleCommandSender ccs = plugin.getServer().getConsoleSender();
CommandSender cs = (CommandSender)CommandSignsMessagingProxy.newInstance(ccs, false); 
```

在运行时，此示例将生成以下内容：

```
java.lang.ClassCastException: $Proxy18 cannot be cast to org.bukkit.command.CommandSender 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T12:34:44.917

创建的代理类需要传递它应该实现的接口，

```
return Proxy.newProxyInstance(
                sender.getClass().getClassLoader(),
                sender.getClass().getInterfaces(),
                new CommandSignsMessagingProxy(sender, receiver, silent)); 
```

失败似乎是因为 CommandSender 接口可能不会从调用 sender.getClass().getInterfaces() 方法返回。所以尝试通过调试看看它是否正确通过。如果没有，请尝试手动将接口发送到该方法，看看它是否有效。

# c++ - 在凸包的 BENDING 点绘制圆

> ID：12652667
> 
> 赞同：0
> 
> 时间：2012-09-29T12:22:18.150
> 
> 标签：c++, opencv, convex-hull

我试图弄清楚在凸包的弯曲点绘制圆圈。使用[OpenCV 文档中的示例进行凸包](http://docs.opencv.org/doc/tutorials/imgproc/shapedescriptors/hull/hull.html)，我有一个凸包。但我不太确定如何在指尖所在的点绘制圆圈，这些点基本上是凸包的弯曲点。

我希望有人能指导我完成这个。

谢谢您的帮助

![凸包图像](../Images/a2816b70b658b10c75a470e1d4c1f8eb.png) ![原来的](../Images/39667f80a225fd034db96ad31a5eb92b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T15:02:09.677

[您的凸包](http://opencv.itseez.com/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=convexhull#convexhull)包含指尖点。您可以通过使用更简单的形状进行近似来找到这些点。你可以用[cv::approxPolyDP](http://opencv.willowgarage.com/documentation/cpp/structural_analysis_and_shape_descriptors.html#cv-approxpolydp)做到这一点。之后，用[cvCircle 或 cv::Circle](http://opencv.willowgarage.com/documentation/python/drawing_functions.html)在点上画圆。

# android - 注册活动的事件

> ID：12652670
> 
> 赞同：3
> 
> 时间：2012-09-29T12:22:58.400
> 
> 标签：android, android-activity, android-event

有没有办法注册活动的事件？我对 onStart / onStop 事件特别感兴趣，我不想为此在活动中添加特殊操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T13:18:28.257

从其他活动的生命周期中获取事件的一种方法是将您的类注册为`Application.ActivityLifecycleCallbacks`带有主实例的类，并为您感兴趣的`Application`过滤事件。`Activity`

这是一个简短的示例（您可能希望从另一个方法/类注册回调，`MainActivity.onCreate`否则您会错过该消息；）并且您可能有一个您不想要的依赖项）

在您要监视的活动上：

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Register a spy for this activity
        getApplication().registerActivityLifecycleCallbacks(new ActivitySpy(this));
    }
} 
```

然后间谍代码看起来像：

```
public class ActivitySpy implements ActivityLifecycleCallbacks {

    private final Activity mActivity;

    public ActivitySpy(Activity activity) {
        mActivity = activity;
    }

    @Override
    public void onActivityCreated(Activity activity, Bundle savedInstanceState) {
        if (mActivity == activity)
            Log.i("SPY", "Activity Created");
    }

    @Override
    public void onActivityDestroyed(Activity activity) {
        if (mActivity == activity)
            Log.i("SPY", "Activity Destroyed");
    }

    // (...) Other overrides

} 
```

如果您有对要关注的活动的引用，您也可以从其他地方注册间谍。

我希望这有帮助 ：）

**编辑：**我忘了提，这仅适用于**API 级别 14 及以上**...

# c++ - 如何将png图像保存在sdl中？

> ID：12652673
> 
> 赞同：0
> 
> 时间：2012-09-29T12:23:16.450
> 
> 标签：c++, png, sdl

好的，所以我想将图像保存在 sdl 中。
我只知道如何将内容保存在 .txt 文件中。
从理论上讲，我可以获取表面的所有位并将它们保存在 .txt 文件中，然后手动将所有这些位加载到表面中。
但我不想这样做，因为 sdl 中的表面必须抛出一些特定的过程，我真的不知道它们在做什么。
就像每个表面都必须通过 SDL_DisplayFormat(SDL_Surface *) 函数。
如果我加载函数 throws .txt 我将无法做到这一点。
并且可能有一个简单的功能可以做到这一点，所以我想采取简单的方法。
那么我在哪里可以获得将表面保存到 png 文件的函数（首选 SDL 函数）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:09:28.603

使用那个将屏幕保存为位图。

```
SDL_SaveBMP(main_global_stuff.sdl.surface, screenshot_filename); 
```

我只是快速看了一下；使用 SDL_Image 您可以加载 png 文件。在这里查看[更多解决方案和库](http://www.libsdl.org/libraries.php?order=name&category=-1&completed=0&os=-1&match_name=SDL_&perpage=25)。 [SDL_Image](http://www.libsdl.org/projects/SDL_image/)

# http - 由于标准 Google Chrome 脚本导致的 SSL 错误

> ID：12652677
> 
> 赞同：3
> 
> 时间：2012-09-29T12:23:52.910
> 
> 标签：http, google-chrome, ssl, certificate

当我访问使用 SSL 证书的应用程序时，我的控制台中总是出现以下错误：

```
The page at https://***************.php displayed insecure content from 
http://66.228.34.50/js/chromeServerV45.js. 
```

这是因为谷歌浏览器加载了这个脚本：

> var hkghawgalkgklrgjlargjsrhg_hejrghakwghakwegkawefak = (function(){ var e=null,f=[[15,18,7,19,2,0,17,14,6,3,11,20,16,1,9,4,8 ,13,12,5,10],[19,1,16,5,14,17,13,18,15,8,2,20,7,11,4,9,12,10,3,6 ,0],[4,1,5,17,0,19,11,7,13,8,18,12,20,3,14,9,6,15,16,10,2],[6 ,19,15,14,12,5,7,18,1,0,11,13,2,4,17,16,9,20,10,8,3],[26,28,24,18 ,13,27,22,10,5,15,0,19,29,21,12,17,2,20,9,11,25,6,4,1,23,8,14,16,7 ,3],[17,12,2,1,0,6,9,5,13,​​7,11,3,14,8,15,4,16,10],[5,23,27,16 ,21,20,15,13,​​18,2,29,0,28,7,24,4,9,3,25,12,22,11,1,19,17,10,6,8,26 ,14],
> 
> ..........更多代码在这里（已删除）.........
> 
> a href="http://twitter.com/share" class="twitter-share-button" data-text="OMG WOW - 此浏览器扩展允许您将 YouTube 视频下载为 MP3 或高清 MP4 -" data- url="http://www.oxytube.com/" data-count="horizo​​ntal">Tweet'; a=document.getElementById("shareBox");b=document.createElement("script");b.src="http://platform.twitter.com/widgets.js";a.appendChild(b);b =document.createElement("script");b.src="http://connect.facebook.net/en_US/all.js#xfbml=1";a.appendChild(b);a=document.createElement("脚本");a.type="text/javascript";a.async=!0;a.src="https://apis.google.com/js/plusone.js";b=document.getElementsByTagName("脚本")[0];b.parentNode.insertBefore(a,b)}else window.open(a,"
> 
> ..........更多代码在这里（已删除）.........
> 
> ,g,a,i,:,o,m".split(",");k(Wc,Xc);L=Xc.join("")}document.title=L}else if($.indexOf (jb())==0||$.indexOf(lb())==0){var Z=window.location.href;if(Z.indexOf(da())!=-1){var oc =Z.indexOf(ea());oc!=-1&&nc()}}else if($.indexOf(nb())==0){var Yc=window.location.href;Yc.indexOf(fa( ))==0?window.location.href=Yc.substring(41): Yc.indexOf(ga())==0&&window.stop()}document.body!=e?Vc():document.addEventListener( "DOMContentLoaded",function(){Vc()},!1); })();

因为这个脚本加载了一些带有“http://”协议的脚本，所以它返回了那个不安全的错误......

解决方案还是想法？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-29T12:39:38.833

通过禁用插件解决：YouTube 下载器：MP3/高清视频下载

# python - 如何在 Python 中初始化元组子类的实例？

> ID：12652683
> 
> 赞同：9
> 
> 时间：2012-09-29T12:24:40.233
> 
> 标签：python, python-3.x

> **可能重复：**
> [使用多个 __init__ 参数子类化 Python 元组](https://stackoverflow.com/questions/1565374/subclassing-python-tuple-with-multiple-init-arguments)

我想定义一个继承自 的类`tuple`，并且我希望能够使用不支持的语法来实例化它`tuple`。举个简单的例子，假设我想定义一个`MyTuple`继承自的类`tuple`，我可以通过传递两个值`x`和来实例化它`y`，以创建（我的）元组`(x, y)`。我试过以下代码：

```
class MyTuple(tuple):
    def __init__(self, x, y):
        print("debug message")
        super().__init__((x, y)) 
```

但是，例如，当我尝试时，`MyTuple(2, 3)`我得到了一个错误：`TypeError: tuple() takes at most 1 argument (2 given)`. 似乎我的`__init__`函数甚至没有被调用（基于我得到的错误和我的“调试消息”没有打印的事实）。

那么这样做的正确方法是什么？

我正在使用 Python 3.2。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-29T12:40:38.143

```
class MyTuple(tuple):
    def __new__(cls, x, y):
        return tuple.__new__(cls, (x, y))

x = MyTuple(2,3)
print(x)
# (2, 3) 
```

使用的困难之一`super`是您无法控制接下来将调用哪些类的同名方法。所以所有类的方法必须共享相同的调用签名——至少相同数量的项目。由于您正在更改发送到的参数数量`__new__`，因此您不能使用`super`.

* * *

或者正如 Lattyware 所建议的，你可以定义一个命名元组，

```
import collections
MyTuple = collections.namedtuple('MyTuple', 'x y')

p = MyTuple(2,3)
print(p)
# MyTuple(x=2, y=3)
print(p.x)
# 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T13:14:04.717

另一种方法是封装一个元组而不是从它继承：

```
>>> class MyTuple(object):
    count = lambda self, *args: self._tuple.count(*args)
    index = lambda self, *args: self._tuple.index(*args)
    __repr__ = lambda self: self._tuple.__repr__()
    # wrap other methods you need, or define them yourself,
    # or simply forward all unknown method lookups to _tuple
    def __init__(self, x, y):
        self._tuple = x,y

>>> x = MyTuple(2,3)
>>> x
(2, 3)
>>> x.index(3)
1 
```

这有多实用，取决于您需要多少功能和修改，以及您是否需要`isinstance(MyTuple(2, 3), tuple)`.

# asp.net - 现场有多个 Web 应用程序

> ID：12652684
> 
> 赞同：0
> 
> 时间：2012-09-29T12:24:55.840
> 
> 标签：asp.net, shared-hosting, plesk

1 - 我想在一个主机上部署两个网站，并且可能是不同的 ASP 版本，那么我该怎么做，并且完全相互隔离？

* * *

2 - 在 plesk 如何添加新的 Addone 域，我在 plesk 中看不到这个选项！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:30:53.907

Plesk 具有用于隔离的“webspace”或“订阅”概念。可能就是你所说的“主机”。为了使站点完全隔离并运行不同的 .Net 版本，您需要将站点放在不同的网站空间中（如果您是服务器所有者）。如果您使用的是共享主机，则需要向您的提供商索取另一个订阅。

您可以在一个网站空间/订阅中添加多个站点（插件域）。只需单击“网站和域”选项卡中的“添加新域”。这些站点可以放在不同的文件夹（docroot）中，但不是完全隔离的，即它们可以共享一些公共库和文件。

# actionscript-3 - 在八哥中设置四边形的透明度

> ID：12652690
> 
> 赞同：2
> 
> 时间：2012-09-29T12:26:19.363
> 
> 标签：actionscript-3, flash, transparency, starling-framework

好的，这让我大吃一惊，所以请帮帮我，我想在我的八哥项目中使用透明四边形，它有一个属性：ARGB 的颜色，所以我将 alpha 设置为 90，但它只是没有似乎不是那样工作的。现在我已经将它的混合模式更改为 MULTIPLY，所以它可以工作，但我不确定这是一个好的解决方案，也许有其他彩色背景，它看起来不像，我想要它有点灰色，所以用户知道，他现在不能进入舞台。那么还有比这更好的解决方案吗？谢谢，这是我的代码

```
package screens 
{
    import starling.display.Image;
    import starling.display.Quad;
    import starling.display.BlendMode

public class TransparentScr extends AbstractScr{
    private var trpImg:Image;

    public function TransparentScr() {
        super();
    }

    override protected function init():void {
        super.init();
        var quad:Quad = new Quad(Main.STAGE_WIDTH / 2, Main.STAGE_HEIGHT / 2, 0x90cccccc, true);
        quad.blendMode = BlendMode.MULTIPLY;
        addChild(quad);
    }

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T02:57:50.380

> 所以我将 alpha 设置为 90

在 Starling 中，`alpha`值从`0.0`到`1.0`。假设你想要 90% 的不透明度，你应该使用`0.9`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T10:47:31.467

我认为您只能使用 Quad 使其透明。至于使它成为单色，II 会推荐一个 ColorMatrixFilter：

```
var mat:Array = [ 
          .33,.33,.33,0,0,
          .33,.33,.33,0,0,
          .33,.33,.33,0,0,
          .33,.33,.33,1,0 ];
var colorMat:ColorMatrixFilter = new ColorMatrixFilter(mat);
this.filters = [colorMat]; 
```

# c# - C# Web 服务部署到 IIS 服务器

> ID：12652691
> 
> 赞同：0
> 
> 时间：2012-09-29T12:26:22.063
> 
> 标签：c#, web-services, iis-6

我使用 C# 创建了一个 Web 服务，并安装了 IIS Server 6.0。当我直接在项目中运行 Web 服务时，它运行良好。现在我想在我系统的 IIS 服务器上部署这个服务，以便我的 LAN 伙伴可以使用它。我该怎么做？我也想更改 IIS 的默认端口号，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:32:27.843

要在其下运行您的 Web 服务`IIS`，设置一个[虚拟目录非常简单](http://msdn.microsoft.com/en-us/library/zwk103ab.aspx)。

如果您希望测试发布构建，Web 部署项目是最佳选择，您可以从命令行和 VS.Net 中执行此操作，它启用了一个`"Publish" right-click`选项。

您的 Web 服务端点是您的`.asmx`文件（`.cs`部署中不需要文件），`DLL`bin 文件夹中包含您为 Web 服务编写的代码。

`SOAP, WSDL, Namespace`都由 IIS 和 ASP.NET 处理。

简单来说：

1.  创建一个类型的项目`"ASP.NET Web service"`。
2.  从位置下拉列表中选择`"HTTP"`（表示文件应放置在 Web 服务器上）
3.  在开发您的 Web 服务后，添加 Web 引用，`"browse UDDI Servers on the local network"`如果您想在不同的计算机之间共享 Web 服务，请选择选项。输入源`.asmx`文件 URL 并单击`"Go"`。
4.  选择`"Add References"`为 Web 服务添加您的参考名称，默认为`"localhost"`，您可以为其命名。
5.  在 .aspx 文件中声明 Web 服务的引用。
6.  您可以尝试在其他 PC 上运行您的应用程序。

# .net - Mono 的内部 LazyIinternalConnection 错误

> ID：12652692
> 
> 赞同：0
> 
> 时间：2012-09-29T12:26:29.210
> 
> 标签：.net, mysql, frameworks, mono, entity

我有一个*必须*在单声道上运行的 MySql 数据库控制台应用程序的错误。在 microsoft 的 .NET 上它运行完美，但在 Mono 2.11.4 上它就无法工作。

我已经尝试将引用的大部分“复制本地”设置设置为“true”，但无济于事。

在应用程序开始时，我立即得到以下异常：

```
Unhandled Exception:

System.TypeInitializationException: An exception was thrown by the type initializer for System.Data.Entity.ModelConfiguration.Utilities.TypeExtensions ---> System.InvalidProgramException: Invalid IL c
ode in System.Data.Metadata.Edm.PrimitiveType:GetEdmPrimitiveTypes (): method body is empty.

  at System.Data.Entity.ModelConfiguration.Utilities.TypeExtensions..cctor () [0x00000] in <filename unknown>:0
  --- End of inner exception stack trace ---
  at System.Data.Entity.Internal.DbSetDiscoveryService.GetSets () [0x00000] in <filename unknown>:0
  at System.Data.Entity.Internal.DbSetDiscoveryService.InitializeSets () [0x00000] in <filename unknown>:0
  at System.Data.Entity.DbContext.DiscoverAndInitializeSets () [0x00000] in <filename unknown>:0
  at System.Data.Entity.DbContext.InitializeLazyInternalContext (IInternalConnection internalConnection, System.Data.Entity.Infrastructure.DbCompiledModel model) [0x00000] in <filename unknown>:0
  at System.Data.Entity.DbContext..ctor (System.String nameOrConnectionString) [0x00000] in <filename unknown>:0
  at oldforum2vanille.NewForum.vforumEntities1..ctor () [0x00000] in <filename unknown>:0
  at oldforum2vanille.Program.ConvertDiscissionTopics (Int32 newforumid, System.String forumtitle) [0x00000] in <filename unknown>:0
  at oldforum2vanille.Program.Main (System.String[] args) [0x00000] in <filename unknown>:0
[ERROR] FATAL UNHANDLED EXCEPTION: System.TypeInitializationException: An exception was thrown by the type initializer for System.Data.Entity.ModelConfiguration.Utilities.TypeExtensions ---> System.In
validProgramException: Invalid IL code in System.Data.Metadata.Edm.PrimitiveType:GetEdmPrimitiveTypes (): method body is empty.

  at System.Data.Entity.ModelConfiguration.Utilities.TypeExtensions..cctor () [0x00000] in <filename unknown>:0
  --- End of inner exception stack trace ---
  at System.Data.Entity.Internal.DbSetDiscoveryService.GetSets () [0x00000] in <filename unknown>:0
  at System.Data.Entity.Internal.DbSetDiscoveryService.InitializeSets () [0x00000] in <filename unknown>:0
  at System.Data.Entity.DbContext.DiscoverAndInitializeSets () [0x00000] in <filename unknown>:0
  at System.Data.Entity.DbContext.InitializeLazyInternalContext (IInternalConnection internalConnection, System.Data.Entity.Infrastructure.DbCompiledModel model) [0x00000] in <filename unknown>:0
  at System.Data.Entity.DbContext..ctor (System.String nameOrConnectionString) [0x00000] in <filename unknown>:0
  at oldforum2vanille.NewForum.vforumEntities1..ctor () [0x00000] in <filename unknown>:0
  at oldforum2vanille.Program.ConvertDiscissionTopics (Int32 newforumid, System.String forumtitle) [0x00000] in <filename unknown>:0
  at oldforum2vanille.Program.Main (System.String[] args) [0x00000] in <filename unknown>:0 
```

我已经在[http://alpascual.com/post/2011/05/27/Error-Unable-to-find-the-requested-Net-Framework-Data-Provider-It-may-not-尝试了一个建议的解决方案be-installed.aspx](http://alpascual.com/post/2011/05/27/Error-Unable-to-find-the-requested-Net-Framework-Data-Provider-It-may-not-be-installed.aspx)（因为他的错误信息大致相等）所以我将这些行添加到我的 app.config

```
<system.data>
    <DbProviderFactories>
      <remove invariant="MySql.Data" />
      <add name="ADO.Net driver for MySQL" invariant="MySql.Data" description="ADO.Net driver for MySQL" type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data.MySqlClient, Version=6.6.2.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" />
    </DbProviderFactories>
</system.data> 
```

在对配置进行了一些修改之后，由于这些行，Entity Framework 现在再次使用 MySql，但 Mono 只是跳过了此配置并再次给出了上述 Unhandled Exception。:(

大家有什么想法吗？我是不是忘记了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:27:44.337

这不是 Mono 支持的方案。您不应该使用 Mono 运行 Microsoft 实现特定的运行时库，例如 System.Data.Entity.dll。

Entity Framework 最近已经开源（6.0 版），它与最新的 Mono 版本捆绑在一起。Mono 不支持早期版本的实体框架。

# javascript - Python 3 + Javascript

> ID：12652695
> 
> 赞同：0
> 
> 时间：2012-09-29T12:27:09.960
> 
> 标签：javascript, python, html

我下载了一个html页面。我需要解析一个字符串表单页面，但它在 javascripts 后面。当我在浏览器中运行此页面时 - 一切看起来都很漂亮，但在 html 代码中我看到如下内容：

```
<script type="text/javascript">function deobfuscate_html(){s007=null;s7125=6 ... #long long string 
```

我怎样才能解开这个？我想看到非常原始的，就像在浏览器中一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T12:35:06.477

我将使用 Selenium（在 Python 中触发和控制）在 Web 浏览器中运行该页面 - 然后您可以访问完全呈现的页面。

[此处](https://stackoverflow.com/questions/1816232/how-to-get-the-html-source-of-a-specific-element-with-selenium)选择的答案将向您展示如何从呈现的页面中获取 html。

# ruby-on-rails - 没有这样的文件或目录 - config/environment.rb phusion 乘客 apache centos 6.3 rails

> ID：12652697
> 
> 赞同：2
> 
> 时间：2012-09-29T12:27:39.477
> 
> 标签：ruby-on-rails, apache, centos, passenger

我试图在我的 apache/rails/phusion 乘客安装上允许子 url，以便我可以在顶层拥有 php 文件，然后在子目录（如 blog）中使用 rails 应用程序，例如：

我已经按照这里的文档：[http ://www.modrails.com/documentation/Users%20guide%20Apache.html#deploying_rails_to_sub_uri](http://www.modrails.com/documentation/Users%20guide%20Apache.html#deploying_rails_to_sub_uri)

这是我的 httpd.conf 虚拟主机条目：

```
<VirtualHost *:80>
ServerName xx.xx.xx.xx
DocumentRoot /var/www/html
<Directory /var/www/html>
Allow from all
</Directory>
RailsBaseURI /blog
<Directory /var/www/html/blog>   
Options -MultiViews               
</Directory>   
</VirtualHost> 
```

apache 用户拥有 /var/www/html，这是我的快捷链接： [http](http://d.pr/i/aLkP) ://d.pr/i/aLkP使用 ln 命令制作

这是错误：[http ://d.pr/i/M3r4](http://d.pr/i/M3r4)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T13:42:39.423

apache 组还必须能够读取和执行 config 和 public 文件夹以及所有*父*文件夹。尝试更改权限并重新启动 apache。

您的符号链接应与子网址同名，因此您的符号链接应命名为“blog”。看起来它现在被命名为“public”。您可能希望将符号链接放在`www`目录中的单独文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-05T14:21:03.120

我在尝试安装 Redmine 时遇到了同样的问题。为了解决这个问题，我必须更改`/etc/apache2/sites-available/default`并指定`PassengerAppRoot`：

```
<Directory /var/www/redmine>
    RailsBaseURI /redmine
    PassengerAppRoot /var/lib/redmine
    PassengerResolveSymlinksInDocumentRoot on
</Directory> 
```

我还修改`/etc/apache2/mods-available/passenger.conf`并指定了 `PassengerDefaultUser`.

```
<IfModule mod_passenger.c>
  PassengerRoot /usr
  PassengerRuby /usr/bin/ruby
  PassengerDefaultUser www-data
</IfModule> 
```

# documentation - 命令行选项文档的标准

> ID：12652698
> 
> 赞同：4
> 
> 时间：2012-09-29T12:27:44.790
> 
> 标签：documentation, command-line-arguments

我经常破解一些 Thor、Rake、Bash 甚至 PHP 命令行工具。我想以一致的方式记录命令行参数和变化。

此文档是否有官方或推荐标准？

就像一个选项是可选的[--foo=bar]，或者一个选项可以是一个 n 值（“yes|no”）等等。

当有一个官方（POSIX？）标准或指南已经列出了在 CLI 上记录工具和应用程序的注意事项时，我宁愿不提出自己的标准。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-10T18:30:45.737

我不确定您想到的是什么输出格式，但为什么不使用[手册页](https://en.wikipedia.org/wiki/Man_page)样式呢？它似乎非常适合命令行工具。

# xcode - 如何在mac的终端中使用g++？

> ID：12652701
> 
> 赞同：3
> 
> 时间：2012-09-29T12:28:18.737
> 
> 标签：xcode, macos, terminal, gdb

我已经安装了 Xcode，我可以在 Xcode 中编译 .cpp 文件。但是，我想在终端中使用 g++，但找不到命令：g++ now。
我的操作系统是 Mountain Lion Xcode 版本是 4.4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T12:32:41.367

您需要从[Apple Developer](https://developer.apple.com/downloads/index.action)下载并安装适用于 OSX Mountain Lion 的命令行工具（您需要一个可免费注册的 Apple ID）。这将安装 GCC（包括 g++），因此您可以直接从终端构建

当前确切的软件包是 Xcode 的命令行工具 (OS X Mountain Lion) - 2012 年 9 月

关于 Apple 包装的说明：

> 该软件包通过安装命令行开发工具以及 Mac OS X SDK 框架和头文件，通过终端实现 UNIX 风格的开发。包括许多有用的工具，例如 Apple LLVM 编译器、链接器和 Make。如果您使用 Xcode，这些工具也嵌入在 Xcode IDE 中，并且可以使用 Xcode 4.5 中的“下载”首选项窗格安装在您的系统上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:52:50.203

请注意，当您在安装了 Xcode 4.5 的情况下运行“g++”时，您会选择 llvm-g++-4.2（基于 gcc 4.2.1）——平台上提供但不再支持的编译器。我强烈建议使用 clang++，平台上积极支持/开发的编译器。

# javascript - UserScript 初始化问题

> ID：12652705
> 
> 赞同：1
> 
> 时间：2012-09-29T12:29:06.167
> 
> 标签：javascript, initialization, tostring, userscripts

现在，我正在为浏览器游戏使用用户脚本。**而且我在沙盒**和 **初始化**方面有一些问题。
作为解决方案，我找到了一种**创建新元素**（脚本）并将**对象插入元素的**方法。

```
var script = document.createElement("script");
script.type = "text/javascript";
script.innerHTML = "var Class = { ... }";
document.body.appendChild(script); 
```

但是我有一个非常大的对象并将其转换为一个相当有问题且耗时的字符串。
我有一个看起来像这样的对象：

```
{
addToStorage : Function,
getFromStorage : Function,
getID : Function
settings : Object,
langs : Object,
init : Function,
version : Number,
author: String
} 
```

任何想法，如何将其转换为*字符串*或插入全局*窗口*？

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T13:05:56.273

使用该[`unsafeWindow`对象](http://wiki.greasespot.net/UnsafeWindow)突破greasemonkey 沙箱。

要突破 Chrome 的孤立环境，根据[Are Chrome user-scripts 与 Greasemonkey 脚本之类的全局命名空间分离吗？](https://stackoverflow.com/q/6617361/1048572)您需要`<script>`在 DOM 中插入一个元素。

您不应该将该脚本的源代码存储在转义字符串中，最好获取一个 JS 对象并将其字符串化。对于普通的，您可以使用`JSON`, 对于更复杂的事情，将所有内容放入一个函数并调用`.toString()`它：

```
function moduleClosure(global) {
    // do something
    return some object
}
var script = document.createElement("script");
script.type = "text/javascript";
script.innerText = "var Class = "+moduleClosure+"(window);";
document.body.appendChild(script); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T15:31:25.297

在 Firefox 中，您可以`.toSource()`对对象使用该函数。所以答案是放弃 Chrome 并切换到 Firefox。(^_^)

但是假设你不想这样做，答案会变得混乱，因为`JSON.stringify()`如果对象作为函数属性，甚至不会工作，就像你的那样。

因此，您可以使用[多行字符串](https://stackoverflow.com/q/805107/331508)注入对象源（有关各种技术，请参见链接）。

或者，您可以制作或使用`objToString`如下的对象字符串化符。警告，`objToString`这只是一个快速而肮脏的第一次尝试，你可能更聪明地抓住[JavaScript var_export 之](http://phpjs.org/functions/var_export:578)类的东西。

```
var myObjX =  {
    someFunction:   function () {console.log ("foo");},
    settings:       {init: 2},
    langs:          {a: "En", b: "Jp"},
    version:        99,
    author:         "Anon"
}

function objToString (obj) {
    var str = '{ ';
    for (var p in obj) {
        if (obj.hasOwnProperty (p) ) {
            str += p + ': ';
            switch (typeof obj[p]) {
                case "object":
                    str += objToString (obj[p]);
                    break;
                case "string":
                    str += '"' + obj[p] + '"';
                    break;
                default:
                    str += obj[p];
                    break;
            }
            str += ',\n';
        }
    }
    return str.slice (0, str.length-2) + ' }';
}

var script          = document.createElement("script");
script.type         = "text/javascript";
script.textContent  = "var injectedX = " + objToString (myObjX);
document.body.appendChild (script); 
```

# java - 如何从txt中删除行？

> ID：12652706
> 
> 赞同：2
> 
> 时间：2012-09-29T12:29:07.613
> 
> 标签：java, android, fileoutputstream, android-file

我的意思是，我想从我在 android 上的文本中删除行。我怎样才能删除？我不想阅读一个 txt 并创建另一个删除行。我想从我现有的 txt 中删除行。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T13:58:47.740

这是一个非常棘手的问题，尽管它看起来微不足道。如果行长可变，也许您唯一的选择是逐行读取文件以识别目标`offset`行`length`。然后从 开始复制文件的以下部分`offset`，最终将文件长度截断为其原始大小减去目标行的长度。我使用 a`RandomAccessFile`来访问内部指针并按行读取。

该程序需要两个命令行参数：

*   `args[0]`是文件名
*   `args[1]`是目标行号（从 1 开始：第一行是 #1）

```
public class RemoveLine {
    public static void main(String[] args) throws IOException {
        // Use a random access file
        RandomAccessFile file = new RandomAccessFile(args[0], "rw");
        int counter = 0, target = Integer.parseInt(args[1]);
        long offset = 0, length = 0;

        while (file.readLine() != null) {
            counter++;
            if (counter == target)
                break; // Found target line's offset
            offset = file.getFilePointer();
        }

        length = file.getFilePointer() - offset;

        if (target > counter) {
            file.close();
            throw new IOException("No such line!");
        }

        byte[] buffer = new byte[4096];
        int read = -1; // will store byte reads from file.read()
        while ((read = file.read(buffer)) > -1){
            file.seek(file.getFilePointer() - read - length);
            file.write(buffer, 0, read);
            file.seek(file.getFilePointer() + length);
        }
        file.setLength(file.length() - length); //truncate by length
        file.close();
    }
} 
```

[这是完整的代码](http://pastebin.com/MpMKeKik)，包括一个 JUnit 测试用例。使用这个解决方案的优点是它应该在内存方面是完全可扩展的，也就是说，由于它使用一个固定的缓冲区，它的内存需求是可预测的，并且不会根据输入文件的大小而改变。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T12:32:42.210

尝试将文件存储到字符串缓冲区中，替换您要替换的内容，然后完全替换文件的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-23T21:50:59.680

您可以通过复制文件中的其余数据来删除一行，然后刷新文件并最后写入复制的数据。Thr 以下代码搜索要删除的字符串并跳过要复制的代码 stringBuider 。刷新后stringBuilder的内容被复制到同一个文件中

```
 try {
                InputStream inputStream = openFileInput(FILENAME);
                FileOutputStream fos = openFileOutput("temp", Context.MODE_APPEND);

                if (inputStream != null) {
                    InputStreamReader inputStreamReader = new InputStreamReader(inputStream);
                    BufferedReader bufferedReader = new BufferedReader(inputStreamReader);
                    String receiveString = "";
                    String deleteString = "<string you want to del>";
                    StringBuilder stringBuilder = new StringBuilder();

                    while ((receiveString = bufferedReader.readLine()) != null) {
                        if (!reciveString.equals(deleteline)) {
                            stringBuilder.append(receiveString);
                        }
                    }
                    fos.flush();

                    fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
                    fos.write(stringBuilder.toString().getBytes());
                    fos.close();
                    inputStream.close();
                   } 
```

# windows - 使用 Delphi 创建快捷方式并指定其权限级别

> ID：12652717
> 
> 赞同：1
> 
> 时间：2012-09-29T12:30:37.043
> 
> 标签：windows, delphi, winapi

我正在使用以下代码在 Delphi 中创建快捷方式。我想在快捷方式的权限级别属性中选中“以管理员身份运行此程序”框来创建快捷方式。有没有办法做到这一点？

```
function MakeShortcut(Dst, Src: String; Desc: String = ''; Arg: String = ''; WorkDir: String = ''; Icon: String = ''; IconI: Integer = 0; Show: Integer = SW_SHOWNORMAL; HotKey: Word = 0): Boolean;
var
  u: IUnknown;
  s: IShellLink;
  f: IPersistFile;
  p: WideString;
begin
try
  u := CreateComObject(CLSID_SHELLLINK);
  s := u as IShellLink;
  f := u as IPersistFile;
  s.SetPath(PChar(Src));
  if (WorkDir = '') then WorkDir := ExtractFileDir(Src);
  s.SetWorkingDirectory(PChar(WorkDir));
  if (Icon = '') then Icon := Src;
  s.SetIconLocation(PChar(Icon), IconI);
  s.SetDescription(PChar(Desc));
  s.SetArguments(PChar(Arg));
  s.SetShowCmd(Show);
  s.SetHotkey(HotKey);
  p := Dst;
  Result := Succeeded(f.Save(PWChar(p), False));
except
  Result := False;
end;
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T17:00:37.267

您需要使用[`IShellLinkDataList::SetFlags()`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774920.aspx)传递[`SLDF_RUNAS_USER`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762540.aspx)。

我手头没有任何代码示例。但基本方法是这样的：

```
sldl := s as IShellLinkDataList;
flags := sldl.GetFlags();
sldl.SetFlags(flags or SLDF_RUNAS_USER); 
```

# asp.net-mvc - 从 MVC 发布到 Twitter

> ID：12652733
> 
> 赞同：1
> 
> 时间：2012-09-29T12:32:54.153
> 
> 标签：asp.net-mvc, twitter, restsharp

我看到了几个我们可以用来发布到 twitter 的库。但我想创建自己的，因为稍后我们还需要将其扩展到其他社交网络。

我正在使用 RESTSharp 让事情变得简单。

在我的控制器中，我写了 2 个方法..

```
public ActionResult TwitterLogin()
        {
            var authorizeUrl = TwitterService.Authorize();
            if(!String.IsNullOrEmpty(authorizeUrl))
            {
                return Redirect(authorizeUrl);
            }
            else
            {
                return View();
            }
        }

public ActionResult AuthorizeCallback()
        {
            TwitterService.AuthorizeCallback();
            return View();
        } 
```

在 Twitter 服务中

```
public string Authorize()
    {
        client = new RestClient(BaseUrl) {Authenticator = OAuth1Authenticator.ForRequestToken(ConsumerKey, ConsumerSecret, CallbackUrl)};
        var request = new RestRequest("oauth/request_token", Method.POST);
        var response = client.Execute(request);
        if(response.StatusCode == HttpStatusCode.OK)
        {
            var qs = HttpUtility.ParseQueryString(response.Content);
            oauth_token = qs["oauth_token"];
            oauth_token_secret = qs["oauth_token_secret"];

            request = new RestRequest("oauth/authorize");
            request.AddParameter("oauth_token", oauth_token);
            return  client.BuildUri(request).ToString();
        }

        return String.Empty;
    }

public void AuthorizeCallback()
    {
        var verifier = "123456"; // <-- Breakpoint here (set verifier in debugger)
        var request = new RestRequest("oauth/access_token", Method.POST);
        client.Authenticator = OAuth1Authenticator.ForAccessToken(ConsumerKey, ConsumerSecret, oauth_token, oauth_token_secret, verifier);
        var response = client.Execute(request);

        var qs = HttpUtility.ParseQueryString(response.Content);
        oauth_token = qs["oauth_token"];
        oauth_token_secret = qs["oauth_token_secret"];
    } 
```

现在我关心的是我是否做得对？

关于 Oauth，据我了解，我们从 twitter 创建一个请求令牌，要求用户对其进行授权并使用它来获取访问令牌并使用它来签署其他请求。我写这段代码主要是看这个链接 [https://github.com/restsharp/RestSharp/blob/master/RestSharp.IntegrationTests/oAuth1Tests.cs](https://github.com/restsharp/RestSharp/blob/master/RestSharp.IntegrationTests/oAuth1Tests.cs)

我们是否可以写得更好？也有人可以指导我，如何使用 RestSharp 创建 OAuth 请求以使用 API 之类的 twitter。大多数互联网参考都基于自定义库

# html - 表格行中表单控件的垂直对齐方式

> ID：12652734
> 
> 赞同：0
> 
> 时间：2012-09-29T12:32:55.890
> 
> 标签：html, css

我正在尝试对齐表格控件的表格行，就像在这个 jsbin 示例中一样：

[http://jsbin.com/umeyud/6](http://jsbin.com/umeyud/6)

我只关心 IE8+、最近的 Firefox 和最近的 Chrome（对不起 Safari 和 Opera！）

虽然我可以非常接近，但我希望我可以让左侧的“标签”与所有其他控件上显示的所有文本的第一行很好地对齐。

一个额外的好处是让复选框垂直居中到第一行文本的中间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T14:36:42.010

干得好。享受！

IE 和 Opera 需要 4px，其他需要 6px

```
<!DOCTYPE html>
<html>
<!--
  Created using jsbin.com
  Source can be edited via http://jsbin.com/umeyud/6/edit
-->
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
<style id="jsbin-css">
div
{
    display: inline-block;
}

body,td,input,select,textarea 
{ 
    font: 14pt Arial 
}

.multi td 
{ 
    white-space: nowrap; 
}

.q, .vAlign
{ 
    padding-top: 0px;
    vertical-align: top;
    padding-top: 4px;
}

table
{
 display: inline-table;
}
</style>
</head>
<body>
  <table>
    <tr>
      <td class="q"><div>Label</div></td>
      <td class="a text" style='vertical-align: top'><input type="text" value="Hello, World!"/></td>
      <td class="a text" style='vertical-align: top'><textarea>Hello, World!</textarea></td>

      <td class="a yesno vAlign" style='vertical-align: top'><div><input type="checkbox"/>&nbsp;</div></td>
      <td class="a single" style='vertical-align: top'><select><option>Option 1</option></select</td>
      <td class="a multi vAlign" style='vertical-align: top'>
        <input type='checkbox'/>Option 1<br>
        <input type='checkbox'/>Option 2<br>
        <input type='checkbox'/>Option 3
      </td>
      <td class="a picture"><img src="#" width=160 height=120></td>
  </tr>
  </table>
  </body>
</html> 
```

# php - 如何在 FuelPHP 中组织自己的课程？

> ID：12652736
> 
> 赞同：0
> 
> 时间：2012-09-29T12:33:07.767
> 
> 标签：php, fuelphp

我把我所有的课程都放在“fuel/app/classes/”文件夹中，以便简单地调用`MyClass::MyMethod()`

使用给定的“命名空间库”开始将类存储在“fuel/app/classes/lib/”中。

调用`lib\MyClass::MyMethod()`或规定“使用 lib”比建议的要舒服得多，`Folder_MyClass::MyMethod()`请参阅[http://docs.fuelphp.com/general/classes.html](http://docs.fuelphp.com/general/classes.html)

有没有办法在“bootstrap.php”中加载特定的命名空间，不必在文件（控制器、模型）的开头写任何“use lib”，或者不必每次都添加像“lib\ “？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:30:10.023

FuelPHP 对不支持类名段而不是名称空间的类使用级联文件系统。唯一的要求是您的类位于类文件夹中的某个位置。

例如，假设您有一个名为 app/classes/some/sub/system/name/myclass.php 的文件。

您可以将此类定义为：

```
class Some_Sub_System_Name_Myclass {} 
```

但也作为

```
namespace Some\Sub\System\Name;
class Myclass {} 
```

或者介于两者之间的任何东西。通用规则是：将命名空间和类名粘合在一起，将其转换为小写，将所有下划线和反斜杠替换为 DIRECTORY_SEPARATOR，并在其上粘贴“.php”扩展名，然后您就有了文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:05:49.920

您可能可以添加`lib`为核心命名空间。在`bootstrap.php`： `Autoloader::add_core_namespace('lib');`

[http://docs.fuelphp.com/classes/autoloader.html#/method_add_core_namespace](http://docs.fuelphp.com/classes/autoloader.html#/method_add_core_namespace)

然后，您应该能够使用`\MyClass::MyMethod();`而不必在名称空间前加上前缀或不必`Use lib;`

# java - java邮件属性中mail.smtp.auth.ntlm.domain属性的用途是什么

> ID：12652751
> 
> 赞同：1
> 
> 时间：2012-09-29T12:35:32.763
> 
> 标签：java, jakarta-mail, exchange-server

我是第一次配置 MS Exchange Server 2007。虽然我已经配置成功了。我只想知道属性**mail.smtp.auth.ntlm.domain**。我的一位客户询问了该物业。

我可以在不设置此属性的情况下连接到 MS Exchange Server。那么这个属性的目的到底是什么。在什么情况下，这个属性是必需的？请给我一些指示，以便我可以朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T18:18:33.003

它是 NTLM 身份验证协议的一部分。如果将用户名指定为 domain\user，则无需指定此属性。

# android - Android - 在执行某些其他操作之前未注册 onClick 事件

> ID：12652755
> 
> 赞同：0
> 
> 时间：2012-09-29T12:35:45.937
> 
> 标签：android, onclick, actionbarsherlock, android-2.2-froyo

我有一个 SherlockFragmentActivity，它托管拆分的 ActionBar、ViewPager 和 FragmentList。actionBar 的底部是可点击的，当它被点击时，它会发送一个启动另一个活动的意图。

这一切在我的 4.1 设备上都可以正常工作，但在 2.2 设备上，直到滚动列表或分页视图才会注册点击。

只是强调一点——该功能在 4.1 设备上非常好。

我已经记录了点击，并且在 2.2 设备上，它们根本没有注册，直到发生滚动或分页。一旦用户滚动或翻页，似乎用户所做的每一次点击都会被存储起来，并且设备尝试执行 onClick 操作的次数与点击按钮的次数一样多。

onClickListener 是在一个 RelativeLayout 上设置的，如下：

```
relativeLayout.addView(inflatedView);

RelativeLayout relativeLayout2 = (RelativeLayout) inflatedView.findViewById(R.id.layout);
relativeLayout2.setOnClickListener(this); 
```

和 onClick()：

```
public void onClick(View v) {
    Log.i(TAG, "onCLick Registered");
    Intent startMusicPlayer = new Intent(MainActivity.this, MusicPlayerActivity.class);
    Log.i(TAG, "Intent Created. Should have moved on by now.");
    startActivity(startMusicPlayer);
} 
```

另一个值得注意的有趣事情是，带有 onClickListener 的 RelativeLayout 有一个 list_selector `android:background="@android:drawable/list_selector_background"`，它似乎也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:47:47.803

这是自 4.0 版以来 ABS 的当前问题。

有一些问题已经提交。搜索未解决的问题，您会找到它们。这是一种可能的解决方案：[https ://github.com/JakeWharton/ActionBarSherlock/issues/442](https://github.com/JakeWharton/ActionBarSherlock/issues/442)

# objective-c - 在 heightForRowAtIndexPath iOS 中的 EXC_BAD_ACCESS

> ID：12652761
> 
> 赞同：27
> 
> 时间：2012-09-29T12:36:51.243
> 
> 标签：objective-c, ios, uitableview

我正在开发一个应用程序，其中有一个 UITableViewCell 的自定义子类。我想根据其中的文本使单元格的高度动态化。我尝试在我的 heightForRowAtIndexPath 方法中这样做。但是我遇到了一些问题，以下代码导致和 EXC_BAD_ACCESS(code=2 address=0xb7ffffcc) 错误。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{

    PostCell *cell = (PostCell *)[tableView cellForRowAtIndexPath:indexPath];

    CGSize postTextSize;
    if (![cell.postText.text isEqualToString:@""]) {
        postTextSize = [cell.postText.text sizeWithFont:[UIFont systemFontOfSize:14] constrainedToSize:CGSizeMake(cell.postText.frame.size.width, 200)];
    } else {
        postTextSize = CGSizeMake(cell.postText.frame.size.width, 40);
    }

    return postTextSize.height + cell.userName.frame.size.height + 10;
} 
```

如果我有：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{   
    return 100;
} 
```

有用。

它似乎在这条线上崩溃了：`PostCell *cell = (PostCell *)[tableView cellForRowAtIndexPath:indexPath];`，我不知道为什么。我试图构建干净并重置模拟器，但都没有奏效。任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-29T13:42:46.280

我试图重现这个问题。事实证明，`cellForRowAtIndexPath:`内部调用`heightForRowAtIndexPath`会导致`heightForRowAtIndexPath`递归调用。这是 3 个递归步骤后堆栈回溯的摘录：

```
frame #0: 0x000042d0 DocInteraction`-[DITableViewController tableView:heightForRowAtIndexPath:] + 48 at DITableViewController.m:262
frame #1: 0x0054f688 UIKit`-[UISectionRowData refreshWithSection:tableView:tableViewRowData:] + 3437
frame #2: 0x0055040f UIKit`-[UITableViewRowData(UITableViewRowDataPrivate) _ensureSectionOffsetIsValidForSection:] + 144
frame #3: 0x00551889 UIKit`-[UITableViewRowData numberOfRows] + 137
frame #4: 0x00553dac UIKit`-[UITableViewRowData globalRowsInRect:] + 42
frame #5: 0x003f82eb UIKit`-[UITableView(_UITableViewPrivate) _visibleGlobalRowsInRect:] + 177
frame #6: 0x004001e6 UIKit`-[UITableView cellForRowAtIndexPath:] + 113
frame #7: 0x000042f2 DocInteraction`-[DITableViewController tableView:heightForRowAtIndexPath:] + 82 at DITableViewController.m:262
frame #8: 0x0054f688 UIKit`-[UISectionRowData refreshWithSection:tableView:tableViewRowData:] + 3437
frame #9: 0x0055040f UIKit`-[UITableViewRowData(UITableViewRowDataPrivate) _ensureSectionOffsetIsValidForSection:] + 144
frame #10: 0x00551889 UIKit`-[UITableViewRowData numberOfRows] + 137
frame #11: 0x00553dac UIKit`-[UITableViewRowData globalRowsInRect:] + 42
frame #12: 0x003f82eb UIKit`-[UITableView(_UITableViewPrivate) _visibleGlobalRowsInRect:] + 177
frame #13: 0x004001e6 UIKit`-[UITableView cellForRowAtIndexPath:] + 113
frame #14: 0x000042f2 DocInteraction`-[DITableViewController tableView:heightForRowAtIndexPath:] + 82 at DITableViewController.m:262
frame #15: 0x0054f688 UIKit`-[UISectionRowData refreshWithSection:tableView:tableViewRowData:] + 3437
frame #16: 0x0055040f UIKit`-[UITableViewRowData(UITableViewRowDataPrivate) _ensureSectionOffsetIsValidForSection:] + 144
frame #17: 0x00551889 UIKit`-[UITableViewRowData numberOfRows] + 137
frame #18: 0x003ff66d UIKit`-[UITableView noteNumberOfRowsChanged] + 119
frame #19: 0x003ff167 UIKit`-[UITableView reloadData] + 764 
```

最后程序崩溃了。在我的模拟器上，当回溯跟踪深度约为 57000 级时，就会发生这种情况。

* * *

**旧答案**（没有错，但没有解释 EXC_BAD_ACCESS）：

问题是

```
[tableView cellForRowAtIndexPath:indexPath] 
```

返回`nil`当前不可见的行。表格视图只分配显示当前可见行所需的这么多单元格。当您滚动表格视图时，单元格会被重用。

但是在显示任何行之前`heightForRowAtIndexPath`为表格视图的*所有单元格调用。*

因此，您不应该从表格视图单元格中获取文本来计算`heightForRowAtIndexPath`. 您应该改为从数据源中获取文本。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-29T15:26:33.260

`tableView heightForRowAtIndexPath`调用 before `cellForRowAtIndexPath`，在显示单元格之前，需要先计算高度。

你应该`text`从你的数据源获取，而不是从`cell`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-28T12:40:31.213

我遇到了类似的问题并遇到了，只是为了分享我现在所做的对我有用的事情

```
CGFloat mycell_height;

- (void)viewDidLoad
{
    [super viewDidLoad];
    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:@"MyCell"];
    mycell_height = cell.frame.size.height;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
  return mycell_height; //assuming all cells are the same
} 
```

希望这可以帮助任何寻找这个和像我一样的 iOS 编程新手:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-13T06:51:38.413

在这种情况下，您应该调用 UITableViewDataSource 方法来获取 indexPath 的单元格，而不是 UITableView 的 cellForRowAtIndexPath: 方法，因为在第一次调用 tableView: heightForRowAtIndexPath: 时，tableView 中没有任何单元格。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath: (NSIndexPath *)indexPath {
    PostCell *cell = (PostCell *)[self tableView:tableView cellForRowAtIndexPath:indexPath];

    CGSize postTextSize;
    if (![cell.postText.text isEqualToString:@""]) {
    postTextSize = [cell.postText.text sizeWithFont:[UIFont systemFontOfSize:14] constrainedToSize:CGSizeMake(cell.postText.frame.size.width, 200)];
    } else {
        postTextSize = CGSizeMake(cell.postText.frame.size.width, 40);
    }

    return postTextSize.height + cell.userName.frame.size.height + 10;
} 
```

它可以工作并且不会导致 EXC_BAD_ACCESS 异常。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-04-19T16:53:36.233

迅速：

使用它来了解表何时加载：

```
extension UITableView {
    func reloadData(completion: ()->()) {
        UIView.animateWithDuration(0, animations: { self.reloadData() })
            { _ in completion() }
    }
} 
```

创建一个布尔值

```
var tables_loaded = Bool(false) 
```

然后在 viewDidLoad 中：

```
tableView.reloadData {
    tables_loaded = true
    // call functions or other stuff regarding table manipulation.
    // tableView.beginUpdates()
    // tableView.endUpdates()
} 
```

然后在

```
override func tableView(tableView: UITableView, heightForRowAtIndexPath indexPath: NSIndexPath) -> CGFloat {
            if tables_loaded {
                let cell = tableView.cellForRowAtIndexPath(indexPath)
                 // Do your magic here!
             }

} 
```

# java - 自定义委托类加载器缓存 loadClass() 可以安全地产生结果吗？

> ID：12652765
> 
> 赞同：2
> 
> 时间：2012-09-29T12:38:08.383
> 
> 标签：java, caching, classloader

我们有一个自定义类加载器，称为here `MainClassLoader`，它位于Java Web 应用程序之上（特别是在父类加载器为 的Tomcat 7 上`WebAppClassLoader`）。这个自定义类加载器被设置为 Web 应用程序的 TCCL，其目的是将类路径资源（包括类和非类资源）的查找委托给一组其他自定义类加载器，每个类加载器代表一个可插入的模块到应用。（`MainClassLoader`本身不加载任何内容。）

`MainClassLoader.loadClass()`将进行 parent-first 委托，并在 a`ClassNotFoundException`上一个一个地通过可插入的子类加载器来查看它们中的哪一个将提供结果。如果它们都不能，则抛出`ClassNotFoundException`.

然而，这里的逻辑有点复杂，再加上我们的最终用户可能最终插入了几个（10 年代）这些子模块，我们发现类加载器最终是其中之一考虑到当今 Java 对基于反射的命令模式实现的依赖程度，应用程序的 CPU 密集程度更高的部分。（我的意思是在运行时有很多`Class.forName()`调用来加载和实例化类。）

我们首先在应用程序的定期线程转储中注意到这一点，以捕捉应用程序“正在运行”以查看它在做什么，并通过 JProfiler 分析某些已知比预期慢的用例。

我编写了一个非常简单的缓存方法，用于`MainClassLoader`将`loadClass()`（包括 a `ClassNotFoundException`）调用的结果缓存在具有弱值（由 String className 键控）的并发映射中，并且此类的性能足够高以至于完全下降JProfiler 的热点列表。

但是，我担心我们是否真的可以安全地做到这一点。这样的缓存会妨碍预期的类加载器逻辑吗？这样做可能会遇到哪些陷阱？

我预期的一些明显的：

(1) 内存——显然这个缓存会消耗内存，如果没有限制，可能会消耗内存。我们可以使用有限的缓存大小来解决这个问题（我们使用谷歌的 Guava CacheBuilder 来处理这个缓存）。

(2) 动态类加载，尤其是在开发中 - 因此，如果在我们的缓存有一个陈旧的结果之后将新的或更新的类/资源添加到类路径中，这会使系统感到困惑，可能导致更频繁地在`ClassNotFoundExceptions`类现在应该被抛出时可加载。缓存的“未找到”状态元素上的一个小 TTL 在这里可能会有所帮助，但我更关心的是，在开发过程中，当我们更新一个类并将它热交换到 JVM 时会发生什么。这个类很可能在一个类加载器中`MainClassLoader`委托给，因此它的缓存可能有一个陈旧（旧）版本的类。但是，由于我使用的是弱值，这是否有助于缓解这种情况？我对弱引用的理解是，即使有资格收集它们也不会消失，直到 GC 运行通过并决定回收它们。

这是我对这种方法的两个已知问题/担忧，但让我害怕的是，当你在这里做非标准的事情时，类加载有点像黑魔法（如果不是黑暗科学），它充满了陷阱。

那么我不担心我应该担心的是什么？

**更新/编辑**

我们最终选择不按照我上面的原型进行本地缓存（它看起来很危险并且与​​ JVM 完成的缓存/优化相比是多余的），但在我们的 loadClass() 方法中做了一些优化。基本上我们在这个 loadClass() 方法中的逻辑（见下面的评论）没有遵循代码中的“最佳情况”路径，例如，当没有“定制”模块时，我们仍然表现得像尽管有，但让该类加载器抛出 ClassNotFoundException 并捕获它并进行下一次检查。这种模式意味着给定的类加载操作几乎总是要经过至少 3 个 try/catch 块，每个块中都会抛出 ClassNotFoundException。相当昂贵。

但是，我仍然想对我原来的问题发表评论，以帮助保持问题的存在并得到回答。

**除了我已经列出的那些之外，在自定义类加载器中进行我们自己的缓存还有什么问题？**

# facebook - 授权后将数据传回 Facebook 应用程序

> ID：12652766
> 
> 赞同：0
> 
> 时间：2012-09-29T12:38:12.127
> 
> 标签：facebook, node.js, facebook-graph-api, express

我正在通过以下方式对我的应用程序进行自动化：

```
// authorize app!
                $('#authApp').click(function(){
                    var oauth_url = 'https://www.facebook.com/dialog/oauth/';
                    oauth_url += '?client_id=#{app.id}';
                    oauth_url += '&redirect_uri=' + encodeURIComponent('https://www.facebook.com/pages/null/#{fbPageId()}/?sk=app_#{app.id}');
                    oauth_url += '&scope=user_likes,user_photos';
                    oauth_url += '&app_data=7B%27game%27%3A+%27key%27%7D';
                    oauth_url += '&state=sbSbsbSb'; 
```

如您所见，我将“状态”参数设置为查询字符串的一部分。现在，当用户授权应用程序时，他将被重定向到重定向 url。

但是，在 state 参数中传递的数据不会发布到我的应用程序，也不是我的应用程序 iframe 查询字符串的一部分。我希望在签名请求中找到它，但没有。这是授权后发回的反序列化签名请求

```
{ algorithm: 'HMAC-SHA256',
  expires: 1348927200,
  issued_at: 1348921162,
  oauth_token: 'AAA...',
  page: { id: '490...', liked: true, admin: false },
  user: { country: 'ec', locale: 'en_US', age: { min: 21 } },
  user_id: '1...' } 
```

我确实看到该状态包含在父页面的查询字符串中。我需要从我的应用程序（在 iframe 中运行）访问该参数。我相信由于同源策略限制，我不能只访问父页面的窗口位置。

我已阅读文档并在线搜索。跨应用程序授权持久化数据需要使用 state 参数完成。但是，没有说明一旦重定向回您的应用程序如何检索该状态参数。

这是来自关于状态参数的[facebook 文档：](https://developers.facebook.com/docs/reference/dialogs/oauth/)

> 用于维护请求和回调之间的应用程序状态的唯一字符串。当 Facebook 将用户重定向回您的 redirect_uri 时，此参数的值将包含在响应中。您应该使用它来防止跨站点请求伪造。

我应该从父页面查询字符串中获取状态数据吗？还是我做错了什么？

***** 编辑***** 我将用户存储到状态参数中的用户请求 ID。例如，A 通过 Facebook 请求邀请 B 参与应用程序。一旦 B 授权应用程序 A 需要得到奖励。所以我需要知道 B 在 A 的邀请下来到了应用程序。因此，我将 requestId 存储在 state 参数中，因此一旦 B 授权了应用程序，我就可以采取适当的措施。**

 ***** 编辑 2（解决方案） **** 如果您的 redirect_uri 指向页面标签 URL，那么 facebook 将不会发回状态参数！仅当您重定向到 Canvas URL 时才会发回！！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T15:43:09.093

> 我应该从父页面查询字符串中获取状态数据吗？

不，不是在画布/页面选项卡应用程序中进行身份验证时。在这种情况下，唯一传递给您的应用程序的查询字符串参数是`app_data`参数的内容。

但你不需要`state`参数 - 验证`signed_request`绝对足够，因为它使用您的应用程序密码签名，只有您和 Facebook 知道。因此，这已经足以防止“被操纵”的请求了。

请参阅[https://developers.facebook.com/docs/authentication/canvas/resp](https://developers.facebook.com/docs/authentication/canvas/)。[https://developers.facebook.com/docs/authentication/pagetab/](https://developers.facebook.com/docs/authentication/pagetab/)了解更多详情。（看看他们怎么不提`state`参数。）

编辑：

> 我将用户存储到状态参数中的用户请求 ID。例如，A 通过 Facebook 请求邀请 B 参与应用程序。一旦 B 授权应用程序 A 需要得到奖励。所以我需要知道 B 在 A 的邀请下来到了应用程序。因此，我将 requestId 存储在 state 参数中，因此一旦 B 授权了应用程序，我就可以采取适当的措施。

这是对参数的滥用`state`......它应该实现完全不同的东西（CSRF保护，正如文档所说）。

虽然这*可能适用*于您的场景 - 为什么您不使用`app_data`参数来传输这条信息？这是将信息传输到画布/页面选项卡应用程序的*指定*方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T15:54:03.667

您引用的 Facebook 文档有点混乱。你应该对 state 参数做的唯一一件事是确保你不是 CSRF 的受害者。 [Facebook 的服务器端身份验证流程](https://developers.facebook.com/docs/authentication/server-side/)在 PHP 中给出了一个示例。简而言之，您应该将状态值存储在会话中，然后验证会话值是否与 Facebook 在请求中传回给您的值相同。他们的 PHP 示例中的关键行是：

```
if($_SESSION['state'] && ($_SESSION['state'] === $_REQUEST['state'])) {
   // Continue with application logic here because state matches.
   // Otherwise, exit immediately because you're a victim of CSRF! 
```

所以回到你的问题。从您的重定向 URL 和您收到的响应中，很明显您的应用位于 Facebook 页面选项卡上。请参阅[页面选项卡的身份验证流程，](https://developers.facebook.com/docs/authentication/pagetab/)了解您应该如何执行此操作。请注意，他们没有在步骤 2 中使用 state 参数，并且在页面选项卡身份验证流程中从未提及 state 参数。因此，即使您想将 state 参数用于预期用途之外的其他用途，您也不走运。

根据您的编辑，我建议您查看[有关 requests 的文档](http://developers.facebook.com/docs/requests/)。请注意，单击请求的用户将被重定向到您的**画布**应用程序，而不是页面选项卡。“画布 URL 还将包含一个额外的 GET 参数 request_ids，它是一个逗号分隔的列表，由用户尝试操作的请求 ID 分隔列表。” 因此，您无需自己尝试这样做。**

# html - 将 HTML 元素渲染到

> ID：12652769
> 
> 赞同：58
> 
> 时间：2012-09-29T12:38:57.077
> 
> 标签：html, html5-canvas

有没有办法在画布中呈现任意 HTML 元素（然后访问它的缓冲区......）。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-30T11:24:10.950

您目前不会获得真正的 HTML 渲染`<canvas>`本身，因为画布上下文没有渲染 HTML 元素的功能。

有一些仿真：

html2canvas 项目[http://html2canvas.hertzen.com/index.html](http://html2canvas.hertzen.com/index.html)（基本上是基于 Javascript + canvas 构建的 HTML 渲染器尝试）

`<canvas>`根据您的用例，HTML 到 SVG可能是可能的：

[https://github.com/miohtama/Krusovice/blob/master/src/tools/html2svg2canvas.js](https://github.com/miohtama/Krusovice/blob/master/src/tools/html2svg2canvas.js)

此外，如果您使用的是 Firefox [，您可以破解一些扩展](http://opensourcehacker.com/2012/08/22/accessing-priviledged-javascript-apis-from-your-web-page-in-firefox-with-selenium/)权限，然后渲染一个 DOM 窗口`<canvas>`

[https://developer.mozilla.org/en-US/docs/HTML/Canvas/Drawing_Graphics_with_Canvas?redirectlocale=en-US&redirectslug=Drawing_Graphics_with_Canvas#Rendering_Web_Content_Into_A_Canvas](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Drawing_Graphics_with_Canvas?redirectlocale=en-US&redirectslug=Drawing_Graphics_with_Canvas#Rendering_Web_Content_Into_A_Canvas)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-09-10T08:40:51.363

看看[MDN（存档）](http://web.archive.org/web/20140901100550/https://developer.mozilla.org/en-US/docs/Web/HTML/Canvas/Drawing_DOM_objects_into_a_canvas)

它将使用**创建 SVG 图像**来呈现 html 元素。

**例如：** 有`<em>I</em> like <span style="color:white; text-shadow:0 0 2px blue;">cheese</span>`HTML 元素。我想将它添加到`<canvas id="canvas" style="border:2px solid black;" width="200" height="200"></canvas>`画布元素中。

**这是将 HTML 元素添加到 canvas 的 Javascript 代码**。

```
var canvas = document.getElementById('canvas');
var ctx = canvas.getContext('2d');

var data = '<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200">' +
  '<foreignObject width="100%" height="100%">' +
  '<div xmlns="http://www.w3.org/1999/xhtml" style="font-size:40px">' +
  '<em>I</em> like <span style="color:white; text-shadow:0 0 2px blue;">cheese</span>' +
  '</div>' +
  '</foreignObject>' +
  '</svg>';

var DOMURL = window.URL || window.webkitURL || window;

var img = new Image();
var svg = new Blob([data], {
  type: 'image/svg+xml;charset=utf-8'
});
var url = DOMURL.createObjectURL(svg);

img.onload = function() {
  ctx.drawImage(img, 0, 0);
  DOMURL.revokeObjectURL(url);
}

img.src = url;
```

```
<canvas id="canvas" style="border:2px solid black;" width="200" height="200"></canvas>
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2017-05-01T18:12:24.180

这是将任意 HTML 渲染到画布中的代码：

```
function render_html_to_canvas(html, ctx, x, y, width, height) {
    var xml = html_to_xml(html);
    xml = xml.replace(/\#/g, '%23');
    var data = "data:image/svg+xml;charset=utf-8,"+'<svg xmlns="http://www.w3.org/2000/svg" width="'+width+'" height="'+height+'">' +
                        '<foreignObject width="100%" height="100%">' +
                        xml+
                        '</foreignObject>' +
                        '</svg>';

    var img = new Image();
    img.onload = function () {
        ctx.drawImage(img, x, y);
    }
    img.src = data;
}

function html_to_xml(html) {
    var doc = document.implementation.createHTMLDocument('');
    doc.write(html);

    // You must manually set the xmlns if you intend to immediately serialize     
    // the HTML document to a string as opposed to appending it to a
    // <foreignObject> in the DOM
    doc.documentElement.setAttribute('xmlns', doc.documentElement.namespaceURI);

    // Get well-formed markup
    html = (new XMLSerializer).serializeToString(doc.body);
    return html;
} 
```

例子：

```
const ctx = document.querySelector('canvas').getContext('2d');
const html = `
<p>this
<p>is <span style="color:red; font-weight: bold;">not</span>
<p><i>xml</i>!
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABWElEQVQ4jZ2Tu07DQBBFz9jjvEAQqAlQ0CHxERQ0/AItBV9Ew8dQUNBQIho6qCFE4Nhex4u85OHdWAKxzfWsx0d3HpazdGITA4kROjl0ckFrnYJmQlJrKsQZxFOIMyEqIMpADGhSZpikB1hAGsovdxABGuepC/4L0U7xRTG/riG3J8fuvdifPKnmasXp5c2TB1HNPl24gNTnpeqsgmj1eFgayoHvRDWbLBOKJbn9WLGYflCCpmM/2a4Au6/PTjdH+z9lCJQ9vyeq0w/ve2kA3vaOnI6k4Pz+0Y24yP3Gapy+Bw6qdfsCRZfWSWgclCCVXTZu5LZFXKJJ2sepW2KYNCENB3U5pw93zLoDjNK6E7rTFcgbkGYJtiLckxCiw4W1OURsxUE5BokQiQj3JIToVtKwlhsurq+YDYbMBjuU/W3KtT3xIbrpAD7E60lwQohuaMtP8ldI0uMbGfC1r1zyWPUAAAAASUVORK5CYII=">`;
render_html_to_canvas(html, ctx, 0, 0, 300, 150);

function render_html_to_canvas(html, ctx, x, y, width, height) {
  var data = "data:image/svg+xml;charset=utf-8," + '<svg xmlns="http://www.w3.org/2000/svg" width="' + width + '" height="' + height + '">' +
    '<foreignObject width="100%" height="100%">' +
    html_to_xml(html) +
    '</foreignObject>' +
    '</svg>';

  var img = new Image();
  img.onload = function() {
    ctx.drawImage(img, x, y);
  }
  img.src = data;
}

function html_to_xml(html) {
  var doc = document.implementation.createHTMLDocument('');
  doc.write(html);

  // You must manually set the xmlns if you intend to immediately serialize     
  // the HTML document to a string as opposed to appending it to a
  // <foreignObject> in the DOM
  doc.documentElement.setAttribute('xmlns', doc.documentElement.namespaceURI);

  // Get well-formed markup
  html = (new XMLSerializer).serializeToString(doc.body);
  return html;
}
```

```
<canvas></canvas>
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-02-24T08:00:57.027

CSS[`element()`函数](https://developer.mozilla.org/en-US/docs/Web/CSS/element)最终可能会帮助这里的一些人，即使它不是问题的直接答案。它允许您使用一个元素（以及所有子元素，包括视频、跨域 iframe 等）作为背景图像（以及您通常`url(...)`在 CSS 代码中使用的任何其他位置）。[这是一篇博客文章](https://iamvdo.me/en/blog/css-element-function)，展示了你可以用它做什么。

它自 2011 年以来已在 Firefox 中实现，并且[正在 Chromium/Chrome 中进行考虑](https://bugs.chromium.org/p/chromium/issues/detail?id=108972)（如果您关心此功能，请不要忘记给这个问题一个星号）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-12-02T11:21:19.647

RasterizeHTML 是一个非常好的项目，但如果您需要访问画布，它在 chrome 上将无法工作。由于使用`<foreignObject>`.

如果您需要访问画布，那么您可以使用 html2canvas

我正在尝试寻找另一个项目，因为 html2canvas 的性能非常慢

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-29T13:57:24.363

根据 HTML 规范，您不能访问 Canvas 的元素。您可以获取它的上下文，并在其中绘制操作它，但仅此而已。

但是，您可以使用 aa 将 Canvas 和 html 元素放在同一个 div 中`position: relative`，然后将 canvas 和其他元素设置为`position: absolute`. 这样，他们将处于彼此之上。然后您可以使用`left`和`right`CSS 属性来定位 html 元素。

如果元素没有出现，可能画布在它之前，所以使用`z-index`CSS 属性将它带到画布之前。

# c# - 电子邮件正文中未解释 Html IFrame 标记

> ID：12652770
> 
> 赞同：3
> 
> 时间：2012-09-29T12:39:07.280
> 
> 标签：c#, asp.net, email, iframe

我需要在电子邮件正文中发送一个 html 文件（其中包含一个 iframe）。该 html 文件在浏览器中工作正常并播放视频。但是当我在电子邮件正文中发送它时，iframe 标签没有得到解释，所以没有表现在体内。这是html文件。

```
<b>Aman</b>
<iframe height="390" frameborder="0" width="640"
src="http://www.youtube.com/embed/Sf5T5KjMpJU?wmode=transparent"
title="YouTube video player"></iframe> 
```

电子邮件正文仅以粗体显示“Aman”。这是 C# 代码。

```
 StreamReader reader = File.OpenText("C:\\Users\\Girish\\Desktop\\amrit\\Jeff_Project\\indeex.html");
        string getemail = textbox_email.Text;
        System.Net.Mail.MailMessage message = new System.Net.Mail.MailMessage();
        message.To.Add(getemail);
        message.Subject = "Hello";
        message.From = new System.Net.Mail.MailAddress("sendingemail");
        //message.Body = "This is message body";
        message.IsBodyHtml = true;
        message.Body = reader.ReadToEnd();
        System.Net.Mail.SmtpClient smtp = new System.Net.Mail.SmtpClient("smtp.gmail.com");
        smtp.Credentials = new System.Net.NetworkCredential("sendingemail", "password");
        smtp.EnableSsl = true;
        smtp.Send(message);
        Response.Write("Sent"); 
```

为什么 iframe 没有被解释？我错过了什么吗？

请帮助并提供解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T13:12:30.333

电子邮件不支持其中的对象标签。 [读这个](http://www.campaignmonitor.com/blog/post/1974/the-truth-about-1/)

我什至尝试从 youtube 向自己发送一个 youtube 视频，甚至他们也没有将视频嵌入到电子邮件正文中。

而不是尝试将视频作为链接嵌入（就像 youtube 一样）

![在此处输入图像描述](../Images/8aa413dd91454a1b64461656497fd39d.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T17:50:32.987

大多数电子邮件客户端仅支持非常基本的 html。为了安全起见，我们必须使用表格布局和简单的 a、span 和 img 标签来生成我们的时事通讯内容。

如果您尝试使用 div 进行布局，Outlook 客户端在尝试渲染它们时会出错。这是因为 Outlook 使用 microsoft word 来呈现 html 文档。作为一般规则，我们总是在 Microsoft Outlook 中测试布局，因为该客户端往往是最小的公分母。如果它看起来不错，它通常会在其他地方看起来不错。

# android - 谷歌地图启动链接以“当前位置”为源地址

> ID：12652776
> 
> 赞同：1
> 
> 时间：2012-09-29T12:39:49.497
> 
> 标签：android, iphone, google-maps, gps

我在创建必须将“当前位置”字符串作为源地址的 Google 地图启动链接时遇到了问题。

问题是当需要生成此链接并与某人共享时。在这种情况下，为了生成正确的链接，需要知道朋友智能手机的区域设置。

例如，以下链接仅适用于具有英语或英国语言环境的设备： http://maps.google.com/maps?saddr=Current%20Location&daddr= [32.026685,34.742092](http://maps.google.com/maps?saddr=Current%20Location&daddr=32.026685,34.742092)

是否有任何通用的方法来创建这样的链接，以便它可以在所有设备上工作，而不管它们的语言环境如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T07:24:43.923

问题在于`saddr`Google 地图启动链接中的参数。它必须是以下三个选项之一：

1.  源地址
2.  源位置 (lat,lng)
3.  “当前地址” - 告诉 Google 地图应用程序从当前位置开始的字符串。

前两个没有问题，但在大多数情况下，第三个被视为地址字符串而不是获取当前位置的命令。如果它与启动链接的电话位于相同的语言环境中，则它可以正常工作。例如，“Lieu actuel”在法语中是“当前位置”，适用于语言环境为法语的设备，但不适用于任何其他语言环境的设备（例如英语）本地的，但在大多数情况下你不是。

我的解决方案是使用帮助 HTML 页面，该页面接收目标地址/点作为 GET 参数，并生成 Google 启动链接，其中包含适当语言环境中的用户位置 pint 或“当前位置”字符串作为源地址/点

我正在使用浏览器的地理定位 api 来检索“当前位置”字符串的位置和翻译的静态数组。

这是 HTML 帮助页面的简单视觉结构：

![在此处输入图像描述](../Images/1ad8565901cc45808102b0734c2222ee.png)

这是完整的 HTML 页面代码：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html>
<head>
</style>
        <meta http-equiv="content-type" content="text/html;charset=iso-8859-8-i">
        <title>My Title!</title>
        <script type="text/javascript">

            function getQueryVariable(variable) {
                variable = variable.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
                var regexS = "[\\?&]" + variable + "=([^&#]*)";
                var regex = new RegExp(regexS);
                var results = regex.exec(document.URL);
                if (results == null)
                    return "";
                else
                    return decodeURIComponent(results[1].replace(/\+/g, " "));
            }

            var langArr = new Array();
            langArr["nl"] = "Huidige locatie";     
            langArr["en"] = "Current Location";    
            langArr["fr"] = "Lieu actuel";         
            langArr["de"] = "Aktueller Ort";       
            langArr["it"] = "Posizione attuale";   
            langArr["ja"] = "???";
            langArr["es"] = "Ubicacion actual";
            langArr["ar"] = "?????? ??????";     
            langArr["ca"] = "Ubicacio actual";   
            langArr["cs"] = "Soucasna poloha";    
            langArr["da"] = "Aktuel lokalitet";
            langArr["el"] = "???????? ?????????";
            langArr["en-gb"] = "Current Location";
            langArr["en-us"] = "Current Location";
            langArr["fi"] = "Nykyinen sijainti";   
            langArr["he"] = "????? ?????";        
            langArr["he-il"] = "????? ?????";     
            langArr["hr"] = "Trenutna lokacija";  
            langArr["hu"] = "Jelenlegi helyszin"   
            langArr["id"] = "Lokasi Sekarang";     
            langArr["ko"] = "?? ??";             
            langArr["ms"] = "Lokasi Semasa";      
            langArr["no"] = "Nav?rende plassering";
            langArr["pl"] = "Biezace polozenie";   
            langArr["pt"] = "Localizacao Atual";    
            langArr["pt-pt"] = "Localizacao actual"; 
            langArr["ro"] = "Loc actual";           
            langArr["ru"] = "Òåêóùåå ðàçìåùåíèå";
            langArr["ru-ru"] = "Òåêóùåå ðàçìåùåíèå";
            langArr["sk"] = "Aktualna poloha";      
            langArr["sv"] = "Nuvarande plats";      
            langArr["th"] = "???????????????";     
            langArr["tr"] = "Su Anki Yer";         
            langArr["uk"] = "Ïîòî÷íå ì³ñöå";      
            langArr["vi"] = "V? tri Hi?n t?i";  
            langArr["zh-cn"] = "????";
            langArr["zh-tw"] = "????";

            var coordinate = getQueryVariable("ll");     
            var language = window.navigator.userLanguage || window.navigator.language;
            language = language.toLowerCase();
            if (navigator.geolocation != undefined)
            {
                if  (coordinate != "")

                    navigator.geolocation.getCurrentPosition(successCallback,
                                                            errorCallback,
                                                            {maximumAge:000000});
            }

            else
            {   
                errorCallback("");
            }

            function successCallback(position) {
                if ( (navigator.userAgent.indexOf('iPhone') != -1)  || (navigator.userAgent.indexOf('iPad') != -1))
                              window.location = "comgooglemaps://?saddr=" + position.coords.latitude + "," + position.coords.longitude + "&daddr=" + coordinate;
                            else
                              window.location = "http://maps.google.com/maps?saddr=" + position.coords.latitude + "," + position.coords.longitude + "&daddr=" + coordinate;

            }

            function errorCallback(error) {
                alert("Sorry cannot determine your current location. Please select \"Current Location\" as point A in google maps");
                window.location = "http://maps.google.com/maps?saddr=" + langArr[language].replace(" ","+") + "&daddr=" + coordinate;
            }

        </script>
    </head>
    <body>
        <div STYLE="position:absolute; TOP:460px; LEFT:80px; WIDTH:370px; HEIGHT:50px" >    
            Please wait.<br/>Detecting your location...<br/>If nothing happens for long time please use the following link:
            <h3><a href="javascript:errorCallback('');">Manually launch Google Maps</a></h3>
        </div>
    </body>
</html> 
```

*   某些字符串无法正确传递并显示为问题。使用谷歌翻译来翻译这些。

# actionscript-3 - 使用字体或位图字体时性能显着下降

> ID：12652777
> 
> 赞同：1
> 
> 时间：2012-09-29T12:39:53.670
> 
> 标签：actionscript-3, starling-framework

我正在制作一张宾果卡，并使用八哥按钮类作为卡上的数字。

如果我使用位图字体或普通字体，fps 从 40 下降到 10。如果我只使用没有字体的纹理，则 fps 保持不变。

我做错了什么？

```
for(var i:int = 0; i < rows * cols ; i++)
        {
            var btn:Button = new Button(Assets.getTexture("btn"),String(i+1));
            btn.fontName="dig"
            btn.x = (i % cols) * (btn.width + spacerX) + btnXoffset;
            btn.y = Math.floor(i / cols) * (btn.height + spacerY) + btnYoffset;
            addChild(btn);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:25:37.293

我怀疑您最终会收到大量的抽奖电话。尝试启用统计监视器以查看。

在一个地方可以使用很多按钮。每个都包括按钮的纹理以及标签的单独文本字段。文本字段将导致额外的绘图调用，因为它会切换上下文。由于您有大量的图像（宾果游戏为 25 个），当上下文在图像和文本之间来回切换时，您最终会得到大约 50 个绘制调用。**即使**位图字体在您的纹理图集中，也会发生这种情况。

一种更好、更高效的方法是跳过 Button 并创建您自己的 Image 子类，该子类显示一个或多个数字图像并自行管理触摸事件。

# node.js - Node.js 中的 Mongodb 集合对象缓存

> ID：12652779
> 
> 赞同：4
> 
> 时间：2012-09-29T12:40:20.367
> 
> 标签：node.js, mongodb

我正在尝试在 Node.js 中实现到 MongoDB 数据库的 RESTful(ish) 接口。根据[文档](http://mongodb.github.com/node-mongodb-native/api-articles/nodekoarticle1.html)，基本的成语是这样的：

```
var mongo = require('mongodb'),
  Server = mongo.Server,
  Db = mongo.Db;

var server = new Server('localhost', 27017, {auto_reconnect: true});
var db = new Db('exampleDb', server);

db.open(function(err, db) {
     if(!err) {
        db.collection('test', function(err, collection) {
            // do stuff with collection
        });
     }
}); 
```

因此，基本数据库访问涉及三个对象（服务器、数据库和集合）。我的问题是其中哪些可以/应该在启动时加载并缓存在某个地方以便为每个 http 请求重用，哪些必须/应该在每个请求中重新创建。我的假设是服务器和数据库对象可以长期存在，但我不太确定集合对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T09:06:18.027

保存所有三件事（服务器连接、数据库和集合）并启动您的应用程序。[像Mongoose](http://mongoosejs.com)这样的 MongoDB 的 ODM会自己做，以防您怀疑。您可能希望使用[async](https://github.com/caolan/async)来避免将代码嵌套得太深。

就个人而言，我使用[mongo-lite](http://alexeypetrushin.github.com/mongo-lite/docs/index.html)，它可以让我做`var db = require('mongo-lite').connect('mongodb://localhost/exampleDb', ['test']);` 之后我可以摆弄 db.test，我的收藏。这为我节省了很多样板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T14:32:03.153

为什么不应该呢？集合对象本身并不消耗太多内存，它提供了与mongodb交互、查询、保存等所有功能。在每个请求上重新创建它并在之后删除它是没有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T13:19:08.563

集合可以长期存在，尤其是当服务器不运行时，如果有大量这样的集合。这只是您正在使用的内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T02:07:30.077

通常，来自 open 的回调应该启动逻辑以启动应用程序/服务器的其余部分。然后，您只需保留该数据库引用并根据请求调用 db.collection。我通常有一个可以调用的服务来从我的 REST 资源中获取 db ref 以保持一切清洁。同样，这可能会根据应用程序中的 db/collection 使用情况而有所不同。

# java - 如何将 int 数组添加到肥皂调用中

> ID：12652780
> 
> 赞同：0
> 
> 时间：2012-09-29T12:40:27.840
> 
> 标签：java, android, web-services, soap, ksoap2

我的网络服务有问题，它运行良好，但我需要在请求中发送一个数组并且不知道该怎么做......我读到，ksoap 不支持请求中的数组

我怎样才能欺骗服务并发送一个int数组？

这是我的代码，它适用于所有类型:)

```
SoapObject result = null;
SoapObject request = new SoapObject(NAMESPACE, methodname);

request.addProperty("int",new int[] {8,345,34,86,1,});
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet = true;
envelope.setOutputSoapObject(request);
HttpTransportSE aHT = new HttpTransportSE(URL); 
```

以下是失败后的 logcat 输出；)

```
09-20 10:25:53.156: E/AndroidRuntime(23865): FATAL EXCEPTION: main
09-20 10:25:53.156: E/AndroidRuntime(23865): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.wstest/com.example.wstest.MainActivity}: java.lang.NullPointerException
09-20 10:25:53.156: E/AndroidRuntime(23865):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
09-20 10:25:53.156: E/AndroidRuntime(23865):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
09-20 10:25:53.156: E/AndroidRuntime(23865):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
09-20 10:25:53.156: E/AndroidRuntime(23865):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
09-20 10:25:53.156: E/AndroidRuntime(23865):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-20 10:25:53.156: E/AndroidRuntime(23865):    at android.os.Looper.loop(Looper.java:123)
09-20 10:25:53.156: E/AndroidRuntime(23865):    at android.app.ActivityThread.main(ActivityThread.java:3683)
09-20 10:25:53.156: E/AndroidRuntime(23865):    at java.lang.reflect.Method.invokeNative(Native Method)
09-20 10:25:53.156: E/AndroidRuntime(23865):    at java.lang.reflect.Method.invoke(Method.java:507)
09-20 10:25:53.156: E/AndroidRuntime(23865):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-20 10:25:53.156: E/AndroidRuntime(23865):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-20 10:25:53.156: E/AndroidRuntime(23865):    at dalvik.system.NativeStart.main(Native Method)
09-20 10:25:53.156: E/AndroidRuntime(23865): Caused by: java.lang.NullPointerException
09-20 10:25:53.156: E/AndroidRuntime(23865):    at com.example.wstest.MainActivity.onCreate(MainActivity.java:42)
09-20 10:25:53.156: E/AndroidRuntime(23865):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-20 10:25:53.156: E/AndroidRuntime(23865):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
09-20 10:25:53.156: E/AndroidRuntime(23865):    ... 11 more 
```

希望你能帮我！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:44:50.793

检查此代码。

```
SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(
            SoapEnvelope.VER11);

SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);
soapEnvelope.setOutputSoapObject(Request);
soapEnvelope.dotNet = true;

List<Integer> companies =  new ArrayList<Integer>();
companies.add(65);
companies.add(66);
companies.add(67);

Request.addProperty("name", "test1");
SoapObject soapCompanies = new SoapObject(NAMESPACE, "companies");
for (Integer i : companies){
    soapCompanies.addProperty("int", i);
}
Request.addSoapObject(soapCompanies); 
```

# iphone - 保存数据后如何显示detailview

> ID：12652783
> 
> 赞同：0
> 
> 时间：2012-09-29T12:40:49.680
> 
> 标签：iphone, objective-c, ios, uinavigationcontroller

从 presentViewController 保存数据后，是否可以自动转到 detailView。

目前，我使用的是 Master (UITableView) ->Detail (UITextView) 的 NavigationController，因此用户可以添加数据并保存到 sqLite，从表单中保存数据后，表单被关闭并出现 MasterView。

我想要的是，在保存数据后，表单被关闭并自动转到 DetailView 而不是 MasterView。

主视图控制器.m

```
- (void)addNew{
  AddFormController *addFormController = [[AddFormController alloc]
                                        initWithNibName:@"AddFormView" bundle:nil];
  UINavigationController* navContainer = [[UINavigationController alloc] initWithRootViewController:addFormController];
  [[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"Header-Blank.png"] forBarMetrics:UIBarMetricsDefault];
  [[UIApplication sharedApplication] setStatusBarHidden:YES];
  [self.navigationController presentViewController:navContainer animated:YES completion:nil];
  [addFormController release];
} 
```

添加表单控制器.m

```
 - (IBAction) saveTemplate {
   .... // Saving data onto Sqlite
   [self dismissViewControllerAnimated:YES completion:nil];
 } 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T14:14:46.153

您可以展示您`DetailViewController`的`MasterViewController`.`viewDidAppear`

但是，由于您不希望每次都发生这种情况（例如，`DetailViewController`在应用程序启动时显示），您希望设置一个布尔属性标志，如`dataSaved`in`MasterViewController`并仅在标志为`YES`. 您可以将标志设置为`YES`from `[AddFormController saveTemplate]`。怎么做？有几种方法，但我会使用委托。

并且不要忘记在提交`DetailViewController`from后取消设置标志`viewDidAppear`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T17:21:11.687

```
I think you should use this code.It is simpler than above.

Masterviewcontroller.m
- (void)addNew{
  AddFormController *addFormController = [[AddFormController alloc]
                                        initWithNibName:@"AddFormView" bundle:nil];
  UINavigationController* navContainer = [[UINavigationController alloc] initWithRootViewController:addFormController];
  [[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"Header-Blank.png"] forBarMetrics:UIBarMetricsDefault];
  [[UIApplication sharedApplication] setStatusBarHidden:YES];
 [self.navigationController pushViewController:rvc animated:YES];
  [addFormController release];
}

AddFormController.m

 - (IBAction) saveTemplate {
   .... // Saving data onto Sqlite
   [self.navigationController popViewControllerAnimated:YES];
 }

I think it will work better. 
```

# haskell - 具有歧义检测的通用组合

> ID：12652784
> 
> 赞同：3
> 
> 时间：2012-09-29T12:40:54.100
> 
> 标签：haskell, composition, typeerror, synonym

我想定义一个适用于`a -> b`和适用于的通用组合`a -> Maybe b`：

```
class Comp m where
    (...) :: m a b -> m b c -> m a c

instance Comp (->) where
    (...) = (>>>)

instance Comp (a -> Maybe b) where
    (...) = (>=>) 
```

是否有可能使用所有最近的 GHC 扩展来定义第二个实例而无需`newtype`类似的包装器`Control.Arrow.Kleisli`？

另一个问题是实例重叠，因此对于`Just ... Just`两个同样合理的实例是可能的。是否有可能重新设计多态类型，所以两者`...`都是有效的类型？`Just ... Just``a -> Maybe (Maybe a)``a -> Maybe a`

如果不可能，也许可以以某种方式推迟实现选择。例如

```
data Comp a b = Comp a b

(...) = Comp
($$$) = 
```

`($$$)`将通用组合（可以是任何东西 - 不一定是函数）提升到函数。然后`Just ... Just $$$ (fromJust . fromJust)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:08:42.810

这可能不是您要查找的内容，但它将允许定义实例。通常需要显式类型注释来选择适当的实例。使用您的示例，`Just ... Just`键入为`Comp (->) a (Maybe a) b (Maybe b) => a -> Maybe b`. `FunctionalDependencies` *在需要显式类型注释时可能*有助于减少，但也会将可能的实例限制为少于您想要的实例。

```
{-# LANGUAGE MultiParamTypeClasses #-}
import Control.Category
import Control.Monad

class Comp m a b b' c where
  (...) :: m a b -> m b' c -> m a c

instance Comp (->) a b b c where
  (...) = (>>>)

instance Monad m => Comp (->) a (m b) b (m c) where
  (...) = (>=>) 
```

# mysql - 这是有效的表创建语法吗？

> ID：12652785
> 
> 赞同：-3
> 
> 时间：2012-09-29T12:40:56.030
> 
> 标签：mysql, sql, oracle

给定一个设计：

```
Player
===========
PlayerID
TeamID
FirstName
LastName
DateOfBirth

Team
===========
TeamID
TeamName
Grade

Match
===========
MatchID
HomeTeamID
AwayTeamID
Date
Result 
```

我正在使用这个：

```
 CREATE TABLE Match(
   MatchID VARCHAR2(5) NOT NULL,
   Dateofmatch date,
   Result VARCHAR2(1) ,
   HomeTeam VARCHAR2(5),
   AwayTeam VARCHAR2(5),
   CONSTRAINT MatchPK PRIMARY KEY(MatchID),
   CONSTRAINT HomeFK FOREIGN KEY(HomeTeamIDFK) REFERENCES TEAM(TeamID),
   CONSTRAINT AwayFK FOREIGN KEY(AwayTeamIDFK) REFERENCES TEAM(TeamID),
   CONSTRAINT Result
   Check (Result in (‘W’,’L’,’D’)
   ); 
```

假设 Match ID、Player ID 和 teamID 列是 data type 来创建 Match 表`VARCHAR2(5)`。比赛结果以主队为准，只能是 W、L 或 D。

这个对吗？

* * *

我已经出来了，请纠正我

```
CREATE TABLE Match (
    MatchID VARCHAR2(5) NOT NULL,
    Dateofmatch date,
    Result VARCHAR2(1) ,
    HomeTeam VARCHAR2(5),
    AwayTeam VARCHAR2(5),
    CONSTRAINT MatchPK PRIMARY KEY(MatchID),
    CONSTRAINT HomeFK FOREIGN KEY(HomeTeamIDFK) REFERENCES TEAM(TeamID),
    CONSTRAINT AwayFK FOREIGN KEY(AwayTeamIDFK) REFERENCES TEAM(TeamID),
    CONSTRAINT Result Check (Result in (‘W’,’L’,’D’)
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T12:53:02.993

我的目标更像是：

```
CREATE TABLE match
   ( match_id INTEGER, 
     date_of_match  DATE, 
     result_type  char(1), 
     home_team_id INTEGER, 
     away_team_id INTEGER,
     CONSTRAINT match_pk PRIMARY KEY(match_id),
     CONSTRAINT home_fk FOREIGN KEY(home_team_id_fk) REFERENCES TEAM(team_id),
     CONSTRAINT away_fk FOREIGN KEY(away_team_id_fk) REFERENCES TEAM(team_id)
     CONSTRAINT result_type CHECK (result_type in (‘W’,’L’,’D’)
  ) 
```

我知道 fk 的数据类型应该是 varchar2(5) 但我建议它们要么被更改，要么你发现那些表是真正的主键，它可以是一个整数或添加一个。这是正确的做法（尽管意见会有所不同）。

# javascript - 在 chrome javascript 控制台中触发表单提交

> ID：12652788
> 
> 赞同：8
> 
> 时间：2012-09-29T12:41:21.120
> 
> 标签：javascript, forms, google-chrome, submit

只是我一直想知道的一件小事：

是否可以在任何网页上提交表单，而不是单击表单提交按钮，我想从 chrome 控制台（chrome 中的 ctrl+shift+j）完成？

我已经尝试了几种方法，但我要么得到一个错误，比如

> 无法在未定义上使用函数提交

或者

> HTML 标签没有提交功能。

有什么帮助吗？

PS - 如果你去这里尝试通过控制台提交右侧的表格，请[单击此处](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_form_submit)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-29T13:07:46.383

```
form = document.getElementById("frm1")
form.submit() 
```

查看独立[iframe](http://www.w3schools.com/jsref/tryit_view.asp?filename=tryjsref_form_submit)时适用于您的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T13:20:58.070

对于使用 iframe 时的示例：

```
 // from http://stackoverflow.com/questions/1452871/how-can-i-access-iframe-elements-with-javascript
 function iframeRef( frameRef ) {
     return frameRef.contentWindow ? frameRef.contentWindow.document : frameRef.contentDocument
 }

 var inside = iframeRef( document.getElementsByTagName('iframe')[0] );

 // from @DeanGrobier
 form = inside.getElementById("frm1")

 form.submit() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T13:51:11.547

在您的示例中，它位于 iframe 内。在您的情况下，您必须在控制台中输入它才能工作：

```
var q = window.document.getElementsByTagName('iframe')[1];
var r = q.contentWindow.document.getElementById("frm1");
r.submit(); 
```

或者，仅一行：

```
window.document.getElementsByTagName('iframe')[1].contentWindow.document.getElementById("frm1").submit(); 
```

# objective-c - 使用正则表达式提取多个字符串匹配

> ID：12652789
> 
> 赞同：0
> 
> 时间：2012-09-29T12:41:25.507
> 
> 标签：objective-c, ios, regex

我正在尝试基于正则表达式提取字符串的多个部分，例如 (mymatch1|mymatch2|mymatch3)

我找到了一个类似下面的函数，它可以帮助我提取匹配项。

```
NSRange range = [myString rangeOfString:myRegex options:NSRegularExpressionSearch]; 
```

但是有任何函数可以返回一组范围吗？或直接匹配的子字符串数组？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:48:53.703

你看过 NSRegularExpression 的文档吗，方法 -[NSRegularExpression enumerateMatchesInString:options:range:usingBlock:]

# c# - TCP 客户端\服务器 - 客户端并不总是读取

> ID：12652791
> 
> 赞同：2
> 
> 时间：2012-09-29T12:41:37.147
> 
> 标签：c#, tcp, network-programming, tcpclient, networkstream

**客户代码：**

```
TcpClient client = new TcpClient();
NetworkStream ns;
private void Form1_Load(object sender, EventArgs e)
{
    try
    {
        client.Connect("127.0.0.1", 560);
        ns = client.GetStream();
        byte[] buffer = ReadFully(ns, client.Available);

        //working with the buffer...
    }
    catch
    {
        //displaying error...
    }
}

public static byte[] ReadFully(NetworkStream stream , int initialLength)
{
    // If we've been passed an unhelpful initial length, just
    // use 32K.
    if (initialLength < 1)
    {
        initialLength = 32768;
    }

    byte[] buffer = new byte[initialLength];
    long read = 0;

    int chunk;
    while ((chunk = stream.Read(buffer, (int)read, buffer.Length - (int)read)) > 0)
    {
        read += chunk;

        // If we've reached the end of our buffer, check to see if there's
        // any more information
        if (read == buffer.Length)
        {
            int nextByte = stream.ReadByte();

            // End of stream? If so, we're done
            if (nextByte == -1)
            {
                return buffer;
            }

            // Nope. Resize the buffer, put in the byte we've just
            // read, and continue
            byte[] newBuffer = new byte[buffer.Length * 2];
            Array.Copy(buffer, newBuffer, buffer.Length);
            newBuffer[read] = (byte)nextByte;
            buffer = newBuffer;
            read++;
        }
    }
    // Buffer is now too big. Shrink it.
    byte[] ret = new byte[read];
    Array.Copy(buffer, ret, read);
    return ret;
} 
```

**服务器代码：**

```
 private static TcpListener tcpListener;
        private static Thread listenThread;
        private static int clients;
        static void Main(string[] args)
        {
            tcpListener = new TcpListener(IPAddress.Any, 560);
            listenThread = new Thread(new ThreadStart(ListenForClients));
            listenThread.Start();
        }

        private static void ListenForClients()
        {
            tcpListener.Start();
            Console.WriteLine("Server started.");

            while (true)
            {
                //blocks until a client has connected to the server
                TcpClient client = tcpListener.AcceptTcpClient();

                //create a thread to handle communication
                //with connected client
                Thread clientThread = new Thread(new ParameterizedThreadStart(HandleClientComm));
                clientThread.Start(client);
            }
        }

        private static void HandleClientComm(object client)
        {
            clients++;
            TcpClient tcpClient = (TcpClient)client;
            NetworkStream clientStream = tcpClient.GetStream();
            ASCIIEncoding encoder = new ASCIIEncoding();
            Console.WriteLine("Client connected. ({0} connected)", clients.ToString());

            #region sendingHandler
            byte[] buffer = encoder.GetBytes(AddressBookServer.Properties.Settings.Default.contacts);

            clientStream.Write(buffer, 0, buffer.Length);
            clientStream.Flush();
            #endregion
        } 
```

* * *

正如您从代码中看到的那样，我正在尝试向`AddressBookServer.Properties.Settings.Default.contacts`连接的客户端发送（字符串，非空）。

问题是有时（这是奇怪的部分）客户端会收到字符串，有时它会一直被阻塞`ns.Read`在线等待接收某些东西。

我尝试通过在之后的行上放置一个断点来进行调试，`ns.Read`我发现当它不起作用时，它永远不会到达该行，因此它不会收到服务器发送的消息。

**我的问题：**我该如何解决？

**我的假设：**服务器在客户端收到消息之前发送消息，因此客户端永远不会收到它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T22:24:09.180

正如 Mark Gravell 指出的，这是一个框架问题。这是一个简单的客户端和服务器，向您展示如何在消息上使用长度前缀来构建消息。请记住，这只是帮助您入门的示例。我不会认为它是生产就绪代码：

**客户代码：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net.Sockets;
using System.Text;

namespace SimpleClient
{
    internal class Client
    {
        private static void Main(string[] args)
        {
            try
            {
                TcpClient client = new TcpClient();
                NetworkStream ns;
                client.Connect("127.0.0.1", 560);
                ns = client.GetStream();
                byte[] buffer = ReadNBytes(ns, 4);
                    // read out the length field we know is there, because the server always sends it.
                int msgLenth = BitConverter.ToInt32(buffer, 0);
                buffer = ReadNBytes(ns, msgLenth);

                //working with the buffer...
                ASCIIEncoding encoder = new ASCIIEncoding();
                string msg = encoder.GetString(buffer);
                Console.WriteLine(msg);
                client.Close();
            }
            catch
            {
                //displaying error...
            }
        }

        public static byte[] ReadNBytes(NetworkStream stream, int n)
        {
            byte[] buffer = new byte[n];
            int bytesRead = 0;

            int chunk;
            while (bytesRead < n)
            {
                chunk = stream.Read(buffer, (int) bytesRead, buffer.Length - (int) bytesRead);
                if (chunk == 0)
                {
                    // error out
                    throw new Exception("Unexpected disconnect");
                }
                bytesRead += chunk;
            }
            return buffer;
        }
    }
} 
```

**服务器代码：**

```
using System;
using System.Net;
using System.Net.Sockets;
using System.Text;
using System.Threading;

namespace SimpleServer
{
    class Server
    {
        private static TcpListener tcpListener;
        private static int clients;
        static void Main(string[] args)
        {
            tcpListener = new TcpListener(IPAddress.Any, 560);
            tcpListener.Start();
            Console.WriteLine("Server started.");

            while (true)
            {
                //blocks until a client has connected to the server
                TcpClient client = tcpListener.AcceptTcpClient();

                //create a thread to handle communication
                //with connected client
                Thread clientThread = new Thread(new ParameterizedThreadStart(HandleClientComm));
                clientThread.Start(client);
            }
        }

        private static void HandleClientComm(object client)
        {
            int clientCount = Interlocked.Increment(ref clients);
            TcpClient tcpClient = (TcpClient)client;
            NetworkStream clientStream = tcpClient.GetStream();
            ASCIIEncoding encoder = new ASCIIEncoding();
            Console.WriteLine("Client connected. ({0} connected)", clientCount);

            #region sendingHandler
            byte[] buffer = encoder.GetBytes("Some Contacts as a string!");
            byte[] lengthBuffer = BitConverter.GetBytes(buffer.Length);
            clientStream.Write(lengthBuffer, 0, lengthBuffer.Length);
            clientStream.Write(buffer, 0, buffer.Length);
            clientStream.Flush();
            tcpClient.Close();
            #endregion
        }
    }
} 
```

您的代码有时有效，有时失败的原因是 client.Available 可以返回 0。当它返回时，您将要读取的字节设置为 32k，因此 read 调用正在等待这些字节进入。他们从来没有这样做过，并且由于服务器从未关闭套接字，因此读取也不会出错。

希望这能让你朝着正确的方向前进。

**编辑：**

我忘了在我原来的帖子中提到字节序。您可以在此处查看有关字节序和使用 BitConverter 的文档：http: [//msdn.microsoft.com/en-us/library/system.bitconverter (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.bitconverter(v=vs.100).aspx)

基本上，您需要确保服务器和客户端都在具有相同字节序的架构上运行，或者根据需要处理从一个字节序到另一个字节序的转换。

**编辑2（回答评论中的问题）：**

1）为什么client.available可以返回0？

这是一个时间问题。客户端连接到服务器，然后立即询问哪些字节可用。根据正在运行的其他进程、可用处理器的时间片等，客户端可能会在服务器有机会发送任何内容之前询问可用的内容。在这种情况下，它将返回 0。

2) 为什么我使用 Interlocked 来增加客户端？

您最初编写的代码是在新创建的运行 HandleClientComm(...) 的线程中递增客户端。如果两个或多个客户端同时连接，则可能会在多个线程试图增加客户端时发生争用情况。最终结果将是客户数量少于应有数量。

3) 为什么我改变了 ReadFully 方法？

您的 ReadFully 版本（我将其更改为 ReadNBytes）接近正确，但有一些缺陷：

*   如果原始 initialLength 为零或更小，则将 initialLenth 设置为 32768。您永远不应该猜测您需要从套接字读取多少字节。正如 Mark Gravell 所提到的，您需要使用长度前缀或某种分隔符来构建您的消息。
*   NetworkStream.Read 阻塞直到读取了一些字节，或者如果套接字从其下方关闭，则返回 0。无需调用 stream.ReadByte，因为如果套接字断开连接，chunk 已经为 0。进行该更改简化了方法，尤其是因为我们根据简单的标头确切地知道需要读取多少字节。
*   现在我们知道要阅读多少，我们可以预先准确分配我们需要的内容。这消除了在返回时重新调整缓冲区大小的必要性。我们可以返回我们分配的内容。

4）我怎么知道长度缓冲区大小是4？

我序列化的长度是 32 位。您可以在 BitConverter.GetBytes(int value) 的文档中看到这一点。我们知道一个字节是 8 位，所以只需将 32 除以 8 得到 4。

5）为什么这还没有准备好生产/我该如何改进代码？

*   基本上没有真正的错误处理。NetworkStream.Read() 可以抛出几个异常，我没有处理这些异常。添加适当的错误处理将大大有助于使其做好生产准备。

*   除了粗略的运行之外，我还没有真正测试过代码。它需要在各种条件下进行测试。

*   没有规定客户端重新连接或重试，尽管您可能不需要这样做。

*   这是作为一个简单的示例编写的，实际上可能无法满足您要满足的要求。不知道这些要求，我不能声称这已经为您的生产环境做好了准备（不管是什么）。

*   从概念上讲，ReadNBytes 很好，但如果有人向您发送恶意消息，声称消息长度为 2 GB 或其他内容，您将尝试盲目分配 2 GB。大多数字节级协议（对通过网络传输的内容的描述）指定消息的最大大小。这需要检查，如果消息实际上可能很大，您需要以不同于分配缓冲区的方式处理它，可能在您读取它时写入文件或其他输出流。同样，不知道您的全部要求，我不能确定那里需要什么。

希望这可以帮助。

# php - 如何将带有图像的csv数据插入mysql数据库

> ID：12652795
> 
> 赞同：2
> 
> 时间：2012-09-29T12:42:13.290
> 
> 标签：php, mysql, csv

我做了一个在线考试网站，并通过 csv 将问题插入到 mysql 数据库中。在数学试卷中，它包含一些不在数据库中的图形和图像。那么如何将带有图像的数据插入mysql数据库？

```
@$fname = $_FILES['sel_file']['name']; 
$chk_ext = explode(".",$fname); 
if(strtolower(@$chk_ext[1]) == "csv") { 
    $filename = $_FILES['sel_file']['tmp_name']; 
    $handle = fopen($filename, "r"); 
    $q = mysql_query("select max(id) as 'key' from subject1"); 
    $row = mysql_fetch_array($q); 
    while (($datas = fgetcsv($handle, 1000, ",")) !== FALSE){
        @$sql = "INSERT INTO subject1(id,question) VALUES('".$datas[0]."')";
        mysql_query($sql)
    } 
    fclose($handle);
    echo "Successfully Imported"; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T14:33:26.217

将路径值存储到图像通常比图像本身更有效。但是，如果您打算存储图像，则可以使用 BLOB 样式列。

# android - EditText 一个焦点别人看不见？

> ID：12652796
> 
> 赞同：1
> 
> 时间：2012-09-29T12:42:30.240
> 
> 标签：android, focus, android-edittext, border

我的表格有问题。

我插入了 3 个 EditText，其中一个处于焦点位置，但其他的不可见，但我们可以单击。

问题是什么？即使没有焦点，我可以为其他编辑文本设置底部边框吗？

编辑 ：

这是问题的图像：

[http://hpics.li/2c79ed7](http://hpics.li/2c79ed7)

这是布局的代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/group_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/btnBackground"
    android:orientation="horizontal" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="10dp"
        android:background="@color/white" >

        <ScrollView
            android:id="@+id/scrollView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:layout_marginTop="10dp"
                    android:orientation="vertical" >

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content" >

                        <TextView
                            android:id="@+id/TextView05"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Titre du deal"
                            android:textColor="@color/hautLayout"
                            android:textSize="16dp" />

                        <EditText
                            android:id="@+id/EditText_titre"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginLeft="5dp"
                            android:layout_weight="1" >

                            <requestFocus />
                        </EditText>
                    </LinearLayout>

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content" >

                        <TextView
                            android:id="@+id/TextView04"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Lien du deal"
                            android:textColor="@color/hautLayout"
                            android:textSize="16dp" />

                        <EditText
                            android:id="@+id/EditText_lien"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginLeft="5dp"
                            android:layout_weight="1" />

                    </LinearLayout>

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content" >

                        <TextView
                            android:id="@+id/TextView03"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Prix sans réduction"
                            android:textColor="@color/hautLayout"
                            android:textSize="16dp" />

                        <EditText
                            android:id="@+id/EditText_PrixSansReduc"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginLeft="5dp"
                            android:layout_weight="1" />

                    </LinearLayout>

        </ScrollView>

    </RelativeLayout>

</RelativeLayout> 
```

# c# - 如何在控制台中正确编写英文转录？

> ID：12652797
> 
> 赞同：2
> 
> 时间：2012-09-29T12:42:32.727
> 
> 标签：c#, console, console-application, transcription

我想在控制台中写英文转录。

在调试器中我有这个`səˈdʒest` ，但在控制台中我有`s??d?est`.

如何解决这个问题？谢谢！

**向上**

获取转录的客户端

```
 class TranslationFormattedResult
    {
        public string Transcription { get; set; }
        public List<string> TranslatedWordList = new List<string>();
    }
    class TranslatorClient
    {
        private TranslationServiceSoapClient _client = new TranslationServiceSoapClient("TranslationServiceSoap");

       public async Task<TranslationFormattedResult> GetTranslationAsync(string word)
        {
            var result = await _client.GetTranslationAsync("er", "General",
                word,
                lang: "ru",
                limit: 3000,
                useAutoDetect: true,
                key: "",
                ts: "MainSite",
                tid: "");
            var translationResult = new TranslationFormattedResult {Transcription = await GetTranscriptionAsync(result)};
            return translationResult;
        }

        private async Task<string> GetTranscriptionAsync(TranslationResult result)
        {
            var task = new Task<string>(() =>
                                            {
                                                string pr = null;
                                                string pattern = "\\[.+\\]";
                                                var match = Regex.Match(result.result, pattern);
                                                if(match.Success)
                                                {
                                                    pr = match.Value.Trim('[', ']');
                                                }
                                                return pr;
                                            });
            task.Start();
            return await task;
        }
    } 
```

主要方法

```
class Program
            {
                static void Main(string[] args)
                {
//this works
                    var client = new TranslatorClient();            
             var ts = client.GetTranslationAsync("suggest")
                 .ContinueWith(r =>
                                   {
                                       var transcription = r.Result.Transcription;
                                       Console.OutputEncoding = Encoding.Unicode;
                                       Console.WriteLine(transcription);
                                       Console.WriteLine("press any key");
                                       Console.ReadKey();
                                   }
                     );
            ts.Wait();
    }
    } 
```

![文本可视化器](../Images/618a600a19fac06527121ebaac05263f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T13:29:53.457

你应该：

1.  设置`OutputEncoding`为`Unicode`：`Console.OutputEncoding = Encoding.Unicode;`
2.  运行你的程序
3.  右键单击控制台窗口
4.  在属性窗口中更改控制台字体并将其设置为`Consolas`.

* * *

```
class Program {
    static void Main( string[ ] args ) {
        Console.OutputEncoding = Encoding.Unicode;
        Console.WriteLine( "səˈdʒest" );
    }
} 
```

控制台中的结果是：

![在此处输入图像描述](../Images/143dca82026dd1bd51aa94d8f9af2420.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T13:12:33.640

这是俄罗斯人吗？

如果是这样，请尝试`chcp 866`在命令行运行。

请参阅此 [http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/chcp.mspx?mfr=true](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/chcp.mspx?mfr=true)

这个答案还建议可能需要在 Windows 命令行中选择特定（或至少不同）字体（不确定这是否适用于俄语）[Unicode 字符 - 如何？](https://stackoverflow.com/questions/388490/unicode-characters-in-windows-command-line-how)

# java - 从 sd 卡加载 drawable

> ID：12652798
> 
> 赞同：6
> 
> 时间：2012-09-29T12:42:34.493
> 
> 标签：java, android, path, drawable, sd-card

我正在尝试从我的设备 SD 卡加载一个 png 图像作为可绘制对象。我使用以下功能，但它不起作用：

```
public Drawable getDrawable()
{
return new BitmapDrawable(imagePath);
} 
```

图片路径为：mnt/sdcard/MyFolder/image.png

当我尝试调用该方法时应用程序崩溃，我应该如何加载位于我的 sdcard 中的 png 图像并将其转换为 Drawable 对象？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-29T13:20:36.760

实际上有一个直接来自文件路径的 BitmapDrawable 构造函数。您使用的方法已被废弃。尝试：

```
Drawable myDrawable = new BitmapDrawable(getResources(), pathName); 
```

如果这不起作用，请尝试获取位图并从中创建可绘制对象：

位图可以用`decodeFile`

你可以像这样使用它：

```
Bitmap myBitmap = BitmapFactory.decodeFile(pathName); 
```

然后您可以使用位图进行绘图等。

将位图转换为可绘制使用

```
Drawable myDrawable = new BitmapDrawable(getResources(), myBitmap); 
```

查看[此处（位图）](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeFile%28java.lang.String)和 [此处（位图可绘制对象）](http://developer.android.com/reference/android/graphics/drawable/BitmapDrawable.html#BitmapDrawable%28android.content.res.Resources,%20android.graphics.Bitmap%29)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T11:35:13.170

我很简单

```
public Drawable getDrawableFromPath(String filePath) {
    Bitmap bitmap = BitmapFactory.decodeFile(filePath);
    //Here you can make logic for decode bitmap for ignore oom error.
    return new BitmapDrawable(bitmap);
} 
```

# android - 如果不会调用 onStop，我如何签入 onPause？

> ID：12652801
> 
> 赞同：0
> 
> 时间：2012-09-29T12:43:27.703
> 
> 标签：android

仅当 onPause 后面没有 onStop 时，我才必须在 onPause 中设置一个标志。例如，当我的活动不在前面但部分可见时。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T12:47:29.247

当 onPause 被调用时，这意味着您的 Activity 已部分可见。我想，你现在无法知道以后会发生什么，因为人们通常无法知道未来。

# c# - “访问路径被拒绝” - 在不同的网站但在同一台服务器上创建目录

> ID：12652804
> 
> 赞同：2
> 
> 时间：2012-09-29T12:43:45.247
> 
> 标签：c#, asp.net, iis-7

在我的 asp.net 应用程序中，我试图将文件保存在不同的目录但在同一台服务器上，并且我不断收到“访问路径 '\\12.34.56.78\d$\blah\subdomains\static\ httpdocs\images\upload' 被拒绝。

两个站点都在 IIS7 上的同一个应用程序池下运行。我已经为 IUSR 和网络服务的图像文件夹添加了修改权限，并且没有任何更改。我还为该文件夹中的每个人添加了完全控制，但仍然没有。

将文件上传到网站之外的服务器上的某个位置时，我还需要修改什么？FTP会是更好的解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T13:12:37.413

**编辑**重试这个答案，因为原来是在电话上，几乎无法理解。

您提供的路径表明您正在尝试通过应用程序中的 UNC 路径名创建文件夹和文件。这是不可取的。通常，只有本地或域管理员组的成员才有权通过该管理共享访问任何内容，这意味着如果核心问题是通过 D$ 共享本身进行访问，则对较低级别文件夹的权限调整将无法解决问题.

如果您尝试在同一台物理机器上创建文件夹，我建议您只使用特定于机器的路径，例如 D:\folder1\folder2\etc，而不是 UNC 路径。此外，作为附加点（我假设这只是一个错字），提供的 UNC 路径仅以一个斜杠开头，而不是正常的两个斜杠，例如 \\12.34.56.789\D$...

# ms-access - 根据前一个字段填充另一个表单中的值

> ID：12652805
> 
> 赞同：1
> 
> 时间：2012-09-29T12:43:50.257
> 
> 标签：ms-access, ms-access-2007, vba

我正在为一所学校创建一个简单的数据库。我目前有两种形式，即**frmStudents**和**frmGrades**。我使用等级来指代 1、2、3、..、12 年级，而不是考试成绩。frmGrades 包含字段*等级*（主键）和*费用*。frmStudents 包含*ID*（主键）、*name*、*grade*、*fees*等。ID 是自动生成的数字，名称是文本，grade 与 frmGrades 中的字段 Grade 相关联。

我打算先用 frmGrades 输入所有成绩和相应的费用。然后我将学生信息输入到 frmStudents 从成绩列表中选择一个成绩。我的问题是如何根据所选等级自动填充费用值？

我需要在 VBA 中实现这一点，但我根本不熟悉这种语言。在伪代码中，这就是我想要实现的目标：

```
Private Sub frmStudents_Grade_AfterUpdate()

    frmStudents.Fees.text = "Select Fees from frmGrades where frmGrades.Grade = frmStudents.Grade"

End Sub 
```

我希望我的问题很清楚。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T13:31:31.833

首先，你真的想这样做吗？该费用已在 Grades 中可用，那么您需要在 Student 中使用它吗？如果你这样做，是因为费用发生了变化吗？另外，学生每年的费用和成绩不会不同，所以你需要第三张桌子：

```
StudentID
Date
Grade
Fee 
```

但是，如果您的设计真的如此简单，请将费用作为一个列包含在成绩组合中，并从组合列更新绑定到学生费用的文本框。

学生表格上的成绩组合

```
Row Source: SELECT Grade, Fee FROM Grades ORDER BY Grade
Bound Column : 1
Column Count : 2
Column Widthes: 2,0 
```

更新后

```
Me.txtFee = Me.cboGrade.Column(1) 
```

# ios - NSData 为不同的 NSURL 存储相同的信息

> ID：12652808
> 
> 赞同：1
> 
> 时间：2012-09-29T12:44:30.807
> 
> 标签：ios, xcode, nsdata, nsmutabledata

我正在解析 XML，当我想存储解析器所需的 url 的 NSData 时，我的问题就开始了。此 URL 包含用于身份验证的用户和密码（返回 XML），并且在我的第一个 UIview 中检查了此值。一切都很好，并且经过了正确的身份验证，但是一旦通过身份验证，如果我更改密码，则 url 会更改，但相应的 nsdata 会像以前一样存储，即：

**第一次：正确的用户+正确的通行证=正确的访问**。

**第二次：正确的用户+错误的通行证=正确的访问**

还：

**第一次：正确的用户+错误的通行证=错误的访问**

**第二次：正确的用户+正确的通行证=错误的访问**

就像第一个密码被保留并且连接可能仍然存在......所以我不知道我是否必须更改 HTTP 的默认标头......请帮助！

这是代码：

```
-(id) loadXMLByURL: (NSString *)urlString {
   NSURL *url = [NSURL URLWithString: urlString]; //The URL changes correctly
  NSMutableData *data = [[NSMutableData alloc] initWithContentsOfURL:url]; //Here is the problem
  parser = [[NSXMLParser alloc]initWithData:data];
  parser.delegate = self;
  [parser parse];
  return self;
} 
```

# php - 如何使用标头引荐来源网址重定向或允许访问网站

> ID：12652812
> 
> 赞同：1
> 
> 时间：2012-09-29T12:44:51.977
> 
> 标签：php, javascript, redirect, header

> **可能重复：**
> [基于 IP 和引荐来源的 PHP 重定向](https://stackoverflow.com/questions/6099535/php-redirect-based-on-ip-and-referrer)

如果用户从另一个位置访问该站点，是否可以重定向用户，我想要做的是当用户从谷歌访问该站点时，他将被重定向到主站点，但如果他从链接访问该网站来自“主站点”，将出现一个弹出窗口，其中包含受限站点，但由于用户来自“主站点”，他将被授予访问权限。

任何 php 或 javascript 都可以，只要它会检查用户是否来自主站点。

或者如果可能的话，检查用户来自哪个“IP”以授予访问权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:47:00.680

重定向用户可以使用 header() 方法并为新目标设置“Location:”标头来完成。条件可以通过评估客户端发送的Referer Header来表示，这应该在PHP系统变量之一中可用，请参阅 [http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

类似于以下内容：

```
if (preg_match("/your-domain/",$_SERVER['HTTP_REFERER']) {
  header('Location: /hidden_page.html');
} else {
  header('Location: /');
} 
```

应该做的伎俩。

要重定向 google bot 以及该操作的含义，请参阅[如果存在重定向](https://stackoverflow.com/questions/10356749/does-google-bot-crawl-entire-site-if-there-is-a-redirect)和[http://forums.digitalpoint.com/showthread.php?t=1210，Google bot 是否会抓取整个站点](http://forums.digitalpoint.com/showthread.php?t=1210)

要了解变量内部的内容以及如何在 PHP 中使用正则表达式，请使用此示例代码

```
<pre>
<?php 
    echo $_SERVER['HTTP_REFERER']."\n";
    echo $_SERVER['REMOTE_ADDR']."\n";

if (preg_match("/188.174.82.97/",$_SERVER['REMOTE_ADDR'])) {
        echo "Yes";
    } else {
        echo "No";
    }
?>
</pre> 
```

在您的脚本或类似 phpfiddle.org 的内容中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T12:50:52.080

检查条件中的 $_SERVER['HTTP_REFERER'] 变量以查看用户的引荐来源实际上是什么，然后使用 header() 方法实际重定向到另一个 URL。

# .net - CLR 安装在哪里？

> ID：12652814
> 
> 赞同：2
> 
> 时间：2012-09-29T12:45:10.213
> 
> 标签：.net, windows, clr

我需要知道 CLR 安装在启用 .Net 的 Windows 7 机器的什么位置。我在 /Windows 程序中查看了几个地方，但找不到 CLR。

# javascript - 在 MDN 上测试 JavaScript 示例

> ID：12652816
> 
> 赞同：1
> 
> 时间：2012-09-29T12:45:39.117
> 
> 标签：javascript, firefox, google-chrome

我在这里找到了以下 JavaScript 示例：

[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals)

```
/**
 * Example 2
 */
// will return a value of undefined
var myvar = "my value";

(function() {
  console.log(myvar); // undefined
  var myvar = "local value";
})(); 
```

为什么 `console.log(myvar)`返回`"my value"`而不是`undefined`评论中指定的？

我在 Firefox 和 Chrome 中对其进行了测试，得到了相同的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T12:59:23.087

```
var myvar = "my value";

(function() {
  console.log(myvar); // undefined   
  var myvar = "local value";
})();​ 
```

实际上，输出是未定义的。我认为这是因为 myvar 在范围内重新定义了。

但是，如果您在函数范围内注释 myvar，则输出将是“我的值”。就像 myvar 是一个全局变量一样。

-->[试试！](http://jsfiddle.net/zJ2fG/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T13:23:40.357

它的小提琴，由**xdazz**创建，类似于您的帖子->[局部变量声明](http://jsfiddle.net/kRpTh)

在您的小提琴中，您不会重新声明`myvar`为局部变量，只需重置其值 [全局变量更改值](http://jsfiddle.net/kXWXu)

```
var myvar = "local value";//redeclared variable as local
myvar = "local value";//reset global value 
```

# asp.net-mvc-3 - jQuery mobile + ASP .NET MVC 表单身份验证

> ID：12652817
> 
> 赞同：2
> 
> 时间：2012-09-29T12:45:42.283
> 
> 标签：asp.net-mvc-3, jquery-mobile, forms-authentication

> **可能重复：**
> [iOS 上的 Chrome 显示 jQuery Mobile 页面（ASP.NET MVC）的奇怪 url](https://stackoverflow.com/questions/11297287/chrome-on-ios-shows-weird-url-for-jquery-mobile-page-asp-net-mvc)

我已经使用 MVC 多年了，就在昨晚我开始使用 jQuery mobile。我开发了我的应用程序的一个不错的小型移动版本，但我无法弄清楚为什么在登录页面之外的所有 URL 中，我的查询字符串中都添加了这些垃圾。

它看起来像这样：

```
http://hostname.com/application_name/(F(iPF1BcLSVortwvEsPbnDww4OLya-IL_-pZtm4zHaqOdzX8XJXVMs-PT_8oaW66SMq2NI2W9p7seVyD1xlYD-Bpj9sVUbFSmENn5vQz-kQagyIJyJCeaE5a3z_RXbtC4GPuntcFkK6ggf6MkzvTFVjb2isOc1))/area_name/controller_name/action_name/id 
```

在另一篇文章中某人的推荐下，我将其添加到我的主要移动 js 库中，但它没有任何效果：

```
$(document).bind('mobileinit', function() {
    $.mobile.ajaxEnabled = false;
}); 
```

如果我在桌面浏览器上浏览该网站不会发生这种情况，当我在 iOS 版 Chrome 上选择“请求桌面网站”时也不会发生这种情况。

有人遇到过这个吗？

# iphone - 从 UIBarButtonItem 调用函数

> ID：12652818
> 
> 赞同：0
> 
> 时间：2012-09-29T12:45:43.270
> 
> 标签：iphone, objective-c, uinavigationcontroller, uinavigationbar, selector

我的视图中有一个`setAction`带有本地功能的按钮。在`GameOptions.m`我有下一个功能：

```
- (void) changeSettings (UIBarButtonItem *) sender  {

// do something 
} 
```

`GameOptions`和一个在.m中启动它的按钮：

```
[btn1 addTarget:self action:@selector(changeSettings:) forControlEvents:UIControlEventTouchUpInside]; 
```

现在我将它从他的视图移到导航控制器作为`rightBrButtonItem`. 这是一个具有所有设置`myVC`的小实例，每次我都使用它。`UIViewController``navigationBar``pop ,push`

```
 UIBarButtonItem *buttonNav1 = [[UIBarButtonItem alloc] initWithCustomView:settingsView];
        [myVC.navigationItem setRightBarButtonItem:buttonNav1]; 
```

问题是这个按钮不在他的类中，我希望它在.m`GameOptions`中启动相同的功能。`GameOptions`

我想做接下来的事情：

```
buttonNav1 setAction:changeSettings; 
```

但这是不可能的，changeSetting 无法识别...

试过：`buttonNav1.action = self.`但我没有得到这个函数，只有没有参数的函数。我如何从该按钮调用 chnageSettings`navigationBar`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T12:57:57.550

您需要做的就是告知您`UIBarButtonItem`该`GameOptions`对象的存在。这就是您在使用`self`in 时所做的：

`[btn1 addTarget:self action:@selector(changeSettings:) forControlEvents:UIControlEventTouchUpInside];`

在实例化你的之后`UIBarButtonItem *buttonNav1`，你可以给它发送消息`addTarget:action:forControlEvents:`，或者，如果你想使用`setAction`，别忘了也使用`setTarget`。

所以现在，您的问题是：将`GameOptions`对象的指针传递给`UIBarButtonItem`;)的最优雅/最有效的方法是什么

# android - 有没有办法将应用统计信息发送到游戏控制台？

> ID：12652820
> 
> 赞同：0
> 
> 时间：2012-09-29T12:46:08.717
> 
> 标签：android

我知道当应用程序崩溃时，错误报告会发送到我的开发者控制台。现在我想添加一个统计使用功能：例如每周应用程序收集我的应用程序的首选项设置并将它们发送到我的开发控制台。通过这种方式，我可以看到用户更喜欢什么，另一方面，我可以看到需要改进的地方。

是否可以使用一些android功能？我知道我可以做一些事情，比如发送电子邮件，或者与我的服务器建立隐藏连接，但我想要一种更“标准”的方式（此外，某些用户不喜欢这些隐藏的方法）......而且错误日志是发送所以有一个机制，问题是我是否可以附加到它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T13:12:13.103

好吧，这不是开发者控制台，但您可以使用**Google Analytics**。有一个 API 可以与 Android 一起使用，此处解释：[https ://developers.google.com/analytics/devguides/collection/android/](https://developers.google.com/analytics/devguides/collection/android/)

这取决于您，您究竟要跟踪什么，但这非常容易，而且对于处理统计数据，您手头拥有 Google Analytics 的所有功能。

编辑：为了以最少的努力获得最佳结果，您应该使用[EasyTracker](https://developers.google.com/analytics/devguides/collection/android/devguide#eztracker)库，它确保与服务器的通信在单独的线程中完成；否则您将在 UI 中体验到“打嗝”。

# android - Android admob 显示 adview 缺少必需的 XML 属性“adSize”

> ID：12652822
> 
> 赞同：1
> 
> 时间：2012-09-29T12:46:36.387
> 
> 标签：android

我正在使用下面的代码在我的应用程序中实现 admob

```
<LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:fitsSystemWindows="true"
            android:gravity="bottom"
            android:orientation="vertical" >

            <com.google.ads.AdView
                xmlns:ads="http://schemas.android.com/apk/lib/com.admobdemo"
                android:id="@+id/adView"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                ads:adSize="BANNER"
                ads:adUnitId="a24dbba084368tf" />
        </LinearLayout> 
```

但是当我运行应用程序时，我收到一条错误消息 adview missing required XML attribute 'adSize' 我无法得到这段代码中的实际问题。

这是我的清单文件代码

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.admobdemo"
    android:versionCode="3"
    android:versionName="1.2" >

    <uses-sdk android:minSdkVersion="8" />

    <supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true" >
    </supports-screens>

    <application
        android:icon="@drawable/app_icon"
        android:label="@string/app_name" >
        <activity
            android:name=".SplashScreen"
            android:configChanges="orientation|keyboardHidden"
            android:label="@string/app_name"
            android:noHistory="true"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.NoTitleBar" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
  <activity
            android:name="com.google.ads.AdActivity"
            android:configChanges="keyboard|keyboardHidden|orientation" />
<uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.CLEAR_APP_CACHE" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
    <uses-permission android:name=".Provider.Permission.WRITE" />
    <uses-permission android:name=".Provider.Permission.READ" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="com.android.vending.BILLING" />

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T12:50:38.120

可能是命名空间问题。您必须定义命名空间。

尝试添加

```
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads" 
```

# java - ColdFusion 使用 Javaloader 错误

> ID：12652824
> 
> 赞同：0
> 
> 时间：2012-09-29T12:47:09.773
> 
> 标签：java, coldfusion, javaloader

我有一个关于使用 Javaloader 1.1 从 ColdFusion 调用 java 类的问题。

我试图从本地服务器中的 ColdFusion 访问 java 类，没有问题。但是当我在办公室服务器上尝试同样的事情时，我得到了一个错误：

> “无法创建指定目录mypath\Javaloader/tmp/AEFACE9B-1C6F-6569-2329。这个错误的最可能原因是mypath \ / tmp/AEFACE9B-1C6F-6569-2329已经存在于您的文件系统上。”

还有一条消息

> “Javaloader.cfc 第 269 行出现错误”。Javaloader.cfc 第 269 行是 <cfdirectory action="create" directory="#path#" >

这些错误消息是什么意思？

这是我的代码：

```
//calling java from coldfusion
<cfscript>
sourcePaths = [expandPath("./src")];

loader = createObject("component", "javaloader.JavaLoader").init(sourceDirectories=sourcePaths);

obj = loader.create("myClass").init();
</cfscript> 
```

我真的不知道。任何解决方案将不胜感激。先感谢您...

# javascript - 问题..我正在尝试使用 javascript 分配 updateprogress css 值

> ID：12652827
> 
> 赞同：1
> 
> 时间：2012-09-29T12:48:35.730
> 
> 标签：javascript, asp.net, updateprogress

我正在尝试使用 javscript 分配 updateprogess css 值，但是控件的 clientID 正在获取错误的 clientid .. asp.net 的代码是

```
<div style="display: Block; clear: left;" runat="server" id="DivLike">
   <asp:UpdatePanel ID="UpdatePanelLike" runat="server" UpdateMode="Conditional">
      <ContentTemplate>
         <div style="position: relative;">
            <div style="position: absolute; top: 0px; left: 0px;">
               <asp:LinkButton ID="LinkButtonLike" runat="server" CommandName="<%#Eval("Like_Command") %>" Font-Size="XX-Small" OnCommand="LinkButton2_Command" Text="<%#Eval("Like_Command")%>">
               </asp:LinkButton>
            </div>
            <div class="popupstyle" style="position:absolute; top:0px; left:0px; display:none;" id="DivChapters" runat="server">
               <asp:UpdatePanel ID="UpdatePanelLinkActivity" runat="server" UpdateMode="Conditional">
                  <ContentTemplate>
                     <div>
                        Select Chapter:
                        <asp:DropDownList ID="DropDownListChapters" runat="server" AutoPostBack="true">
                        </asp:DropDownList>
                     </div>
                     <div>
                        Select Topic:
                        <asp:DropDownList ID="DropDownListTopics" runat="server">
                        </asp:DropDownList>
                     </div>
                     <div>
                        <asp:LinkButton ID="LinkButtonAddLink" runat="server" OnCommand="LinkButtonAddLink_Command" Text="Add" CssClass="UtilityClass">
                        </asp:LinkButton>
                     </div>
                     <asp:UpdateProgress ID="UpdateProgressLinkActivity" runat="server" AssociatedUpdatePanelID="UpdatePanelLinkActivity" DynamicLayout="True">
                        <ProgressTemplate>
                           <div style=" position:absolute; top:50%; left:50%; background-color:white;" id="divLoading">
                              <img src="Images/loading25.gif" alt="Loading..." style="" />
                           </div>
                        </ProgressTemplate>
                     </asp:UpdateProgress>
                  </ContentTemplate>
                  <Triggers>
                     <asp:AsyncPostBackTrigger ControlID="LinkButtonAddLink" EventName="Command" />
                  </Triggers>
               </asp:UpdatePanel>
            </div>
         </div>
      </ContentTemplate>
      <Triggers>
         <asp:AsyncPostBackTrigger ControlID="LinkButtonLike" EventName="Command" />
      </Triggers>
   </asp:UpdatePanel>
</div> 
```

JavaScript 代码是这样的：

```
var updateProgress = document.getElementById('<%=UpdateProgressLinkActivity.ClientID%>');
updateProgress.style.position = 'absolute';
updateProgress.style.width = '250px';
updateProgress.style.height = '100px';
updateProgress.style.top = '0px';
updateProgress.style.left = '0px'; 
```

我嵌套了两个更新面板。这可能是问题吗？

# javascript - 有没有办法让 CSS 中的每个单词都有不同的颜色？

> ID：12652830
> 
> 赞同：0
> 
> 时间：2012-09-29T12:49:34.503
> 
> 标签：javascript, html, css

所以我想让文本中的每个单词都变成不同的颜色，但我只找到了让文本中的每个字母都变成不同颜色的代码。有什么办法可以改变每个单词而不是每个字母的颜色？

```
<script type="text/javascript">
       var message = "The quick brown fox.";
       var colors = new Array("#ff0000","#00ff00","#0000ff"); // red, green, blue
       for (var i = 0; i < message.length; i++)
          document.write("<span style=\"color:" + colors[(i % colors.length)] + ";\">" + message[i] + "</span>");
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T12:57:22.533

需要小改动。

`" "`按空格 ( )将消息拆分为数组

```
 var message = "The quick brown fox.";
   var messageArr = message.split(" ");
   var colors = ["#ff0000","#00ff00","#0000ff"]; // red, green, blue
   for (var i = 0; i < messageArr .length; i++)
   {
      document.write("<span style='color:" + colors[(i % colors.length)] + ";'>" + messageArr[i] + " </span>");
   } 
```

[在这个 JSFiddle](http://jsfiddle.net/MAHNT/)上看到它

**注意：**我还将您的`colors`数组定义更改为使用数组文字表示法`[]`，这是一种更好的声明数组的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T12:58:13.573

```
var message = "The quick brown fox.",
    words   = message.split(/\s+/),
    colors  = ['#ff0000', '#00ff00', '#0000ff'];

for (var i = 0; i < words.length; i++) {
    document.write('<span style="color: ' + colors[(i % colors.length)] + ';">' + words[i] + '</span>');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T13:00:17.113

```
var text = "Glee is very very awesome!";
text = text.split(" ");
var colors = ["red", "green", "rgb(0, 162, 232)"]; //you can use color names, as well as RGB notation
var n = colors.length; //no need to re-grab length each time
for(var i = 0; i < text.length; i ++) {
    document.write('<span style = "color: ' + colors[i % n] + '">' + text[i] + '</span>');
} 
```

小演示：[小链接](http://jsfiddle.net/glee/7hGVs/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T13:03:51.900

让我们尝试一些不同的方式。***[现场演示。](http://jsfiddle.net/Paj7E/)***

```
var message = "The quick brown fox.",
    colors = ["#ff0000","#00ff00","#0000ff"],
    i = 0, len = colors.length;

message = message.replace(/\b(\w+)\b/g, function (match, word) {
    return '<span style="color: ' + colors[(i++ % len)] + ';">' + word + '</span>';
});
document.write(message);
​ 
```

# jquery - flash.warning 仅在页面刷新后显示

> ID：12652833
> 
> 赞同：0
> 
> 时间：2012-09-29T12:50:15.627
> 
> 标签：jquery, grails, gsp

嗨，我有一个 gsp，它将具有 jq 网格和一些最初将加载的模板。如果控制器有问题，它会抛出 flash.warning 之类的

```
def err = resp?.status?.message?:resp?.status?.message?:message(code:'common.unknown.error')
flash.warning = message(code:'common.error.default', args:[err]) 
```

在普惠制中，我会抓住它

```
<div id="errorPanel">
        <g:if test="${flash.warning}">
                <g:message code = "reporting.label" />
                <div class="message">${flash.warning}</div>
    </g:if>
   </div> 
```

如果控制器发出警告，则一切都很好，它仅在页面刷新后才显示。请帮帮我

我的gsp是

```
<%@ page language="java" import="com.cisco.rms.constants.TicketType" %>
<html>
    <head>
        <meta name="layout" content="main" />
        <g:set var="entityName" value="${message(code: 'incident.label', default: '<incident.label>')}" />
        <title><g:message code = "incident.list" /></title>
   </head>
   <body>
   <div id="errorPanel">
        <g:if test="${flash.warning}">
                <g:message code = "reporting.label" />
                <div class="message">${flash.warning}</div>
        </g:if>
   </div>
   <div class="ros-pageContainer">
       <div id="incidentListContainer" class="rosPanel">
           <div id="incidentListHeaderContainer">
               <div class="ui-widget-header">
                   <span class="ros-title"> <g:message code="incident.label.plural" /> </span>
                   <g:include controller="ticket" action="searchTicketsInclude"/>
                   <!--
                   <span class="header-quick-action">       
                       <select name="quickactions">
                              <option selected> <g:message code="common.quickActions.header" /> </option>
                              <option value="download"><g:message code="common.quickActions.download" /> </option>
                              <option value="list and details"><g:message code="common.quickActions.listAndDetails" /> </option>
                              <option value="list only"><g:message code="common.quickActions.listOnly" /> </option>
                              <option value="list all"><g:message code="common.quickActions.listAll" /> </option>
                              <option value="print list"><g:message code="common.quickActions.printList" /> </option>
                              <option value="columns"><g:message code="common.quickActions.columns" /> </option>
                       </select>                                    
                   </span> -->
               </div> 
            </div>
            <jqgrid:wrapper id="incident" />
        </div>
        <g:render template="details"/>

        <br/>
        <g:render template="/site/sitesAffected"/>

        <br/>
        <g:render template="/device/listForIncident"/>  
        <br/>
        <g:render template="/workLog/list"/>    
        <br/>

        <g:render template="/alarm/listForIncident"/>

    </div>
    <g:render template="/layouts/gridTemplate" />
    <script type="text/javascript"> 

        function searchByTicketId()
        {
            var ticketId = $('#ticketId').val();
            var id_type = $("input[@name=id_type]:checked").val();;

            var ext = false;
            if(id_type == 'external')
                ext = true;

            search(ticketId, ext);
        }

        function search(ticketId, ext)
        {   
            var grid = $('#incidentGrid');

            grid.jqGrid("clearGridData", true);                 
            grid.jqGrid('setGridParam',{postData:{ticketId:ticketId, extTicketId:ext}});            
            grid.trigger( 'reloadGrid' );

            // alert('ticketId: ' + ticketId + ' type: ' + id_type + ' external: ' + ext);
        }

        function resetSearch()
        {
            $('#ticketId').val('');

            var grid = $('#incidentGrid');
            grid.jqGrid("clearGridData", true)
            grid.jqGrid('setGridParam',{postData:{ticketId:null}});
            grid.trigger( 'reloadGrid' );

        }

        function onIncidentGridComplete() {
            var devCount = $('#incidentGrid').getGridParam("reccount");
            if (devCount == 1) {
                var rowId = $('#incidentGrid').getDataIDs()[0];
                $('#incidentGrid').setSelection(rowId, true);
            }
            $(window).trigger('resize');
        }

        var ticketId;
        var ticketType = '${com.cisco.rms.constants.TicketType.INCIDENT}';

        function quickActions(actionsList)
        {
            var sel = actionsList.selectedIndex

            if(sel == 1)
            {
                window.open('../workLog/addWorkLog?ticketId=' + ticketId + '&ticketType=' + ticketType, 'Add Worklog', 'width=600,height=600', false)
            }               
        }

        function resizeGrid(){
            //$('#incidentGrid').jqGrid('setGridHeight',$(window).outerHeight() - 255 - 25 - $("#incidentDetailsContainer").outerHeight());
        }

        function clearDetails() {
            clearIncDetails();
        }

        function onSelectRow(rowId) {
            clearDetails();
            $('#quickActions').show();

            ticketId = $('#incidentGrid').getCell(rowId, 'id');
            populateDetails(rowId);

            var rowMinus1 = parseInt(rowId) - 1;
            $("#incidentGrid tr").removeClass("ui-state-highlight-1");
            $("#incidentGrid tr:eq(" + rowMinus1 + ")").addClass("ui-state-highlight-1");
            resizeGrid();

            reloadDeviceGrid(ticketId);
            reloadWorklogs (ticketId, ticketType);
            reloadSitesAffectedGrid(ticketId, ticketType);
            reloadAlarms(ticketId);
        }

        function populateDetails(rowId) {
            var grid = $('#incidentGrid');
            var id = grid.getCell(rowId, 'id');
            var submitDate = grid.getCell(rowId, 'submitDate');
            var summary = grid.getCell(rowId, 'summary');
            var status = grid.getCell(rowId, 'status');
            var type = grid.getCell(rowId, 'type');

            var data = {id:id, submitDate:submitDate, summary:summary, status:status, type:type};
            populateIncDetails(data);
        }

        $(document).ready(function() {

            <jqgrid:grid
                id="incident"
                url="'${createLink(action: 'listByCompanyJSON', params: [ticketId: params.ticketId])}'"
                colNames="
                    '${g.message( code:'common.priority' )}',
                    '${g.message( code:'common.id' )}',
                    '${g.message( code:'user.details.site' )}',
                    '${g.message( code:'common.impact' )}',
                    '${g.message( code:'incident.opened' )}',
                    '${g.message( code:'common.parameters.duration' )}',
                    '${g.message( code:'common.status' )}',
                    '${g.message( code:'common.description' )}',
                    '${g.message( code:'common.type' )}'
                "
                colModel="
                    {name:'priority', editable: false, fixed: true, width:'55px'},
                    {name:'id', editable: false, fixed: true, width:'100px'},
                    {name:'siteName', editable: false, fixed: true, classes:'ellipsis', width: '200px'},
                    {name:'impact', editable: false, fixed: true, width:'125px'},
                    {name:'submitDate', editable: false, fixed:true, width:'125px'},
                    {name:'duration', editable: false, fixed:true, width:'95px'},
                    {name:'status', editable: false, fixed: true, width:'65px'},
                    {name:'summary', editable: false, classes:'ellipsis' },
                    {name:'type', editable: false, hidden: true}
                "

                gridComplete="onIncidentGridComplete"
                onSelectRow="onSelectRow"
                resizable="true"
                sortname="'id'"
                sortorder="'desc'"
                height="265"
                autowidth="true"
                shrinkToFit="true"
                scrollOffset="16"
                viewrecords="true"
                showPager="true"
                rowNum="12"
                datatype="'json'">
                <jqgrid:navigation  id="incident"   refresh="true" />
                <jqgrid:resize id="incident" resizeOffset="0" />
            </jqgrid:grid>

            //Strips garbage from grid
            $("#incidentListContainer").find("#incidentWrapper").first().removeClass("ui-widget-header");

            //Wires window resize so grid will fit properly at all sizes
            $(window).resize(resizeGrid);

            $(window).trigger('resize');

        }

        );

        </script>
</body>   
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T09:47:15.693

这是因为 flash 对象仅在下一个请求时可用，因此仅在页面刷新后可用。你可以在这里阅读 -> [http://grails.org/doc/latest/ref/Controllers/flash.html](http://grails.org/doc/latest/ref/Controllers/flash.html)

您是否尝试使用 Ajax？我不确定 Grails 2.x 但是当我使用 Grails 1.3.7 时，我们必须创建一个解决方法来强制消息在不使用 flash 范围的情况下出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T22:28:17.353

如果这是您期望的行为：

```
load page A -> call controller -> see flash.warning on page A 
```

那么恐怕您将不得不找出其他显示消息的方式。此外，在进行 ajax 调用时，flash 对象也不起作用。

如果你想用 ajax 来做，你可以`params`在模板中使用：

```
<g:if test="${params?.variable}"> ... 
```

# c++ - 在 windows 下获取实际屏幕 dpi/ppi

> ID：12652835
> 
> 赞同：23
> 
> 时间：2012-09-29T12:50:31.817
> 
> 标签：c++, windows, screen, dpi, ppi

我想获得**实际**的屏幕 dpi/ppi，而不是用于 C++ 中字体的 dpi 设置。

我尝试使用以下代码：

版本 1，报告 72 dpi，这是错误的。

```
SetProcessDPIAware(); //true
HDC screen = GetDC(NULL);
double hSize = GetDeviceCaps(screen, HORZSIZE);
double vSize = GetDeviceCaps(screen, VERTSIZE);
double hRes = GetDeviceCaps(screen, HORZRES);
double vRes = GetDeviceCaps(screen, VERTRES);
double hPixelsPerInch = hRes / hSize * 25.4;
double vPixelsPerInch = vRes / vSize * 25.4;
ReleaseDC(NULL, screen);
return (hPixelsPerInch + vPixelsPerInch) * 0.5; 
```

版本 2，报告 96 dpi，这是 Windows 字体的 dpi 设置，但不是实际的屏幕 dpi。

```
SetProcessDPIAware(); //true
HDC screen = GetDC(NULL);
double hPixelsPerInch = GetDeviceCaps(screen,LOGPIXELSX);
double vPixelsPerInch = GetDeviceCaps(screen,LOGPIXELSY);
ReleaseDC(NULL, screen);
return (hPixelsPerInch + vPixelsPerInch) * 0.5; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-29T16:36:56.880

不幸的是，您所要求的在一般情况下是不可能的。

Windows 不知道物理屏幕大小。Windows 可能知道您的屏幕有 1024x768 像素，但它不知道屏幕的实际大小。您可以将电缆从旧的 13" 屏幕中拔出，并将其连接到 19" 显示器，而无需更改分辨率。DPI 会有所不同，但 Windows 不会注意到您更改了显示器。

您可以获得打印机的真实物理尺寸和 DPI（假设驱动程序没有撒谎），但不能获得屏幕。至少不可靠。

**更新**

正如其他人所指出的，在较新的显示器和操作系统 (EDID) 之间存在双向通信标准，这可能使这些信息可用于某些设备。但我还没有找到提供此信息的监视器。

即使 EDID 普遍可用，但在一般情况下仍然无法解决，因为显示器可能是视频投影仪，其中 DPI 取决于变焦、焦点、镜头类型和投射距离。投影机极不可能知道投射距离，因此它无法报告实际的 DPI。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-02-02T06:08:30.963

老实说，我对这里的答案感到困惑。

微软有一个 GetDpiForMonitor 方法：

[https://msdn.microsoft.com/en-us/library/windows/desktop/dn280510(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/dn280510(v=vs.85).aspx)

监视器确实将其物理尺寸暴露给工具。您可以使用 HWiNFO64 工具读取显示器的宽度和高度（以厘米为单位）。因此，如果他们得到它（DDI？），那么您可以自己访问该信息是有道理的。

甚至另一个 Stack Overflow 帖子也提到使用 WmiMonitorBasicDisplayParams 来获取数据。

[如何获得显示器尺寸](https://stackoverflow.com/questions/32617615/how-to-get-monitor-size)

所以上面的帖子是完全错误的，100%是错误的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T11:33:02.673

发现使用以下方法获取 DPI 信息可以产生准确的值。

```
ID2D1Factory* m_pDirect2dFactory;
D2D1CreateFactory(D2D1_FACTORY_TYPE_SINGLE_THREADED, &m_pDirect2dFactory);
FLOAT dpiX, dpiY;
m_pDirect2dFactory->GetDesktopDpi( &dpiX, &dpiY ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-02T17:15:04.267

我想你追求的是：

`GetDeviceCaps(hdcScreen, LOGPIXELSX); GetDeviceCaps(hdcScreen, LOGPIXELSY);`

# php - 不提醒从 onclick php 函数传递的变量值

> ID：12652846
> 
> 赞同：0
> 
> 时间：2012-09-29T12:51:51.597
> 
> 标签：php, javascript, jquery

点击时，a）当我将 $picname 变量传递给 jquery img 函数时，我没有收到警报（$picname 的值是 tulips.jpg）

b）当我传递变量 $picid（$picid 的值为 22）时，我收到警报 (22)

我认为 jquery 函数不会提醒图像扩展，如果是这样，那么我如何将其值具有扩展名的图像名称变量传递给 jquery 函数以使用其值

```
function profile(){

$sql = mysql_query("SELECT * FROM profile");
    while ($row = mysql_fetch_array($sql)) {
        $picname= $row['picname'];
        $picid= $row['id'];

        ?>

    <table  style="margin-left: 110px">

        <tr><td><a href="#img" class="ok"><img style='width: 200px' src="images/<?php echo $picname ?>"   alt="name" onclick=img(<?php echo $picname ?>);  ></a></td></tr>

    </table>
<?php

}} 
```

jquery函数是

```
function img(n){
alert(n);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T12:54:36.623

`onclick`您需要对 JS 字符串使用单引号，并且使用双引号来包装属性 的值也不错

```
onclick="img('<?php echo $picname ?>')"
             ^                      ^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T13:29:50.517

这是问题所在

```
<a href="#img" class="ok"><img style='width: 200px' src="images/<?php echo $picname ?>"   alt="name" onclick=img(<?php echo $picname ?>);  ></a> 
```

应该

```
<a href="#img" class="ok"><img style='width: 200px' src="images/<?php echo $picname ?>"   alt="name" onclick="img('<?php echo $picname ?>')"  ></a> 
```

# javascript - 在 javascript 中创建和访问二维数组

> ID：12652849
> 
> 赞同：7
> 
> 时间：2012-09-29T12:52:20.493
> 
> 标签：javascript, multidimensional-array

我对如何在 javascript 中创建和访问二维数组感到困惑。下面是一个数组声明，我在其中存储人的姓名，然后是他们图像的 src。当我尝试访问 myArray[0][0] 元素时，我得到“D”，当我尝试访问 myArray[0,0] 时，我得到唐老鸭。如何访问 img src myArray[0][0] = "assets/scrybe.jpg" ？

JS代码：

```
var myArray = new Array(1);

myArray[0] = "Donald Duck";
myArray[1] = "Winnie Pooh";
myArray[2] = "Komal Waseem";
myArray[3] = "Hockey";
myArray[4] = "Basketball";
myArray[5] = "Shooting";
myArray[6] = "Mickey Mouse";

myArray[0][0] = "assets/scrybe.jpg";
myArray[1][0] = "assets/scrybe.jpg";
myArray[2][0] = "assets/scrybe.jpg";
myArray[3][0] = "assets/scrybe.jpg";
myArray[4][0] = "assets/scrybe.jpg";
myArray[5][0] = "assets/scrybe.jpg";
myArray[6][0] = "assets/scrybe.jpg"; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-29T13:01:49.100

首先，要创建一个数组，最好使用方括号表示法 ( `[]`)：

```
var myArray = []; 
```

这是在 JavaScript 中模拟多维数组的方式。它是一个数组中的一个或多个数组。

```
var myArray = [
    [], [] // two arrays
]; 
```

如果您问是否有办法将数组声明为多维，那么不，没有。您可以像这样访问它们：

```
myArray[0][0]; // the 1st element of the first array in myArray
myArray[1][1]; // the 2nd element of the second array in myArray 
```

这是您可能正在寻找的代码：

```
var myArray = [
    ["Donald Duck", "assets/scrybe.jpg"],
    ["Winnie Pooh", "assets/scrybe.jpg"],
    ["Komal Waseem", "assets/scrybe.jpg"]
    [/* and so on...*/]
]; 
```

但是由于您为所有名称提供了相同的 URL，因此您可以使用`for`循环来更快地执行此操作：

```
for (var i = 0; i < myArray.length; i++) {
    myArray[i][1]  = "assets/scrybe.jpg";
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-29T12:59:30.623

也许您真正想要的是一组对象：

```
var myArrray = [
  { name: "Donald Duck", image: "assets/scrybe.jpg" },
  { name: "Winnie Pooh", image: "assets/scrybe.jpg" },
  // ...
]; 
```

JavaScript 实际上并没有二维数组。您可以做的是创建一个数组，使每个元素也是一个数组。

```
var twoDim = [ [], [], [], [], [] ]; 
```

但是，就您而言，我认为这种结构不会有太大帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T12:59:39.797

不，不能那样做。必须这样做：

```
var myArray = new Array(1);

myArray[0] = new Array(1);

myArray[0][0] = "Donald Duck";
myArray[0][1] = "assets/scrybe.jpg"; 
```

或者使用 JS 语法

```
var myJSObj = {"Donald" :"assets/scrybe.jpg", "Donald2": "assets/scrybe2.jpg" }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-15T16:34:27.597

我遇到了同样的问题，我使用了 Lodash 的 minBy

[https://lodash.com/docs/4.17.4#minBy](https://lodash.com/docs/4.17.4#minBy)

```
var objects = [{ 'n': 1 }, { 'n': 2 }];

_.minBy(objects, function(o) { return o.n; });
// => { 'n': 1 }

// The `_.property` iteratee shorthand.
_.minBy(objects, 'n');
// => { 'n': 1 } 
```

# php - 用php检索的文本区域中的换行符/返回

> ID：12652851
> 
> 赞同：0
> 
> 时间：2012-09-29T12:52:44.573
> 
> 标签：php, html, web

**编辑：** 我的问题简化了，我想归结为无法完全删除换行符。

我试过：`$new_content = str_replace("\n", '<br/>', $_POST["new_content"]);` 而且我看不出这不起作用的原因..但是当我检查文本文件时，我仍然有一个神秘的新行，如下所示：

```
event:|:Test:|:Line 1
<br/>Line 2:|:September 29th, 2012 
```

**原始问题：**

我有一个带有文本字段和一个非常简单的“数据库”的表单，它只是一个 .txt 文件，我将提交的表单数据存储在其中。除了我刚刚注意到的一个主要问题之外，它一切正常。如果用户按下回车键进入文本框中的新行，无论结果字符串是什么，它都会弄乱我的文本文件，其中新行表示数据库中的另一行。

例如，文本文件通常应如下所示：

```
type:|:heading:|:content:|:date
event:|:Big Event 2012:|:More info and booking details.:|:September 29th, 2012
event:|:Website relaunch:|:Keep your eyes pealed.:|:September 25th, 2012 
```

现在，如果我要填写表格，请在文本框中按回车键以开始新段落，我的文本文件如下所示：

```
type:|:heading:|:content:|:date
event:|:Test:|:paragraph 1
paragraph 2:|:September 29th, 2012
event:|:Website relaunch:|:Keep your eyes pealed.:|:September 25th, 2012 
```

如您所见，该字符串已导致数据库中使用了一个新行，而我希望/希望类似..

```
event:|:Test:|:paragraph 1 \n paragraph 2 :|:September 29th, 2012 //or
event:|:Test:|:paragraph 1 <br/> paragraph 2 :|:September 29th, 2012 
```

我确实尝试在网上寻找类似的问题，但所有的解决方案都指向使用类似的东西，`nl2br($_POST["new_content"]);`但这似乎会产生一个格式如下的文本文件：

```
type:|:heading:|:content:|:date
event:|:Test:|:paragraph 1<br />

paragraph 2:|:September 29th, 2012
event:|:Website relaunch:|:Keep your eyes pealed.:|:September 25th, 2012 
```

原来的问题仍然存在。有人可以解释为什么会发生这种情况，或者您对我应该如何在将检索到的字符串`$_POST["new_content"]`保存在文本文件中之前对其进行格式化有什么建议吗？将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T12:56:56.597

尝试

```
$_POST["new_content"] = str_replace("\n", '<br/>', $_POST["new_content"]); 
```

编辑：

你也可以试试：

```
$_POST["new_content"] = ( preg_replace( '/\s+/', '<br/>', $_POST["new_content"] ) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T13:07:47.257

你有一个特殊字符的基本问题。换行符是文件格式中的特殊字符。您有两个选择：要么不允许在保存的内容中出现换行符，要么以某种方式对换行符进行转义/编码，例如`\n`在写入文件之前将其替换为。这也意味着这`\n`是一个特殊字符，因此您需要以`\n`某种方式转义文本中可能出现的实际字符。

有关特殊字符和转义的更多一般信息，请参阅[http://kunststube.net/escapism](http://kunststube.net/escapism)。您要么需要为您的文件格式制定自己的规则，要么采用一些已建立的格式，如 XML。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T15:29:23.620

在您的处理文件上尝试此操作以将新内容保存到 txt 文件中：就像 @TheShiftExchange 答案只需在变量内容上添加新换行符，然后再将其保存到 txt 文件中。

```
$file= 'log.txt';
$content= preg_replace('/\s+/', '', $_POST['new_content']);
$content.= "\n";
$fh= fopen($file, 'a+');
fwrite($fh, $content);
fclose($fh);
$all_contents= file_get_contents($file);
echo nl2br($all_contents); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T18:03:57.130

在 nl2br 的文档注释中找到答案：

```
strtr($text, array("\r\n" => '<br />', "\r" => '<br />', "\n" => '<br />')); 
```

来源： http: [//php.net/manual/en/function.nl2br.php#91828](http://php.net/manual/en/function.nl2br.php#91828)

# excel - Excel - 将多列合并为一列 3

> ID：12652853
> 
> 赞同：0
> 
> 时间：2012-09-29T12:52:56.063
> 
> 标签：excel, excel-2007, excel-formula

如果它们相同，我们可以在 Microsoft Excel 中使用什么公式从字符串 A 列和字符串 C 列得到值求和的结果？B 列和 D 列都是分配给其各自列的数字，即 A 列和 C 列。例如，“橙色”为 A 列保存值 6（在 B 列中），而在 C 列“橙色”保存该值2（在 D 列中）。最终结果应显示字符串“橙色”（E 列）的 6+2=8（在 F 列中）的总和。

谢谢卢佩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T17:48:18.237

如果你有这张桌子：

```
A B C D
橙色 1 橙色 6
苹果 2 苹果 7
葡萄 3 胡萝卜 8
胡萝卜 4 甜瓜 9

```

并且您想在 C 列中搜索每个 A 列值，您应该在 E 列中使用它：（对于 E2，然后向下拖动）

```
=IFERROR($B2+VLOOKUP($A2,$C$2:$D$5,2,FALSE), 0) 
```

确保将 $C$2:$D$5 更改为您的范围（在两个地方）。

```
ABCDE
橙色 1 橙色 6 7
苹果 2 苹果 7 9
葡萄 3 胡萝卜 8 0
胡萝卜 4 瓜 9 12

```

# python - 如何链接 Python C 模块

> ID：12652859
> 
> 赞同：2
> 
> 时间：2012-09-29T12:53:51.237
> 
> 标签：python, linux, ld

我已经编写了一个 Python C 模块（只是`ffmpeg.c`依赖于一些 FFmpeg 库和其他库），我想知道如何链接。

我正在编译：

`cc -std=c99 -c ../ffmpeg.c -I /usr/include/python2.7 -g`

我现在正在尝试链接：

`ld -shared -o ../ffmpeg.so -L/usr/local/lib -lpython2.7 -lavutil -lavformat -lavcodec -lswresample -lportaudio -lchromaprint ffmpeg.o -lc`

没有错误。但是，当我尝试使用`import ffmpeg`Python 时，我得到：

`ImportError: ./ffmpeg.so: undefined symbol: avio_alloc_context`

* * *

也许这已经是正确的了。我检查了结果`ffmpeg.so`，`ldd`它部分链接到错误的 FFmpeg。然而，这很奇怪，因为`-L/usr/local/lib`which 应该优先于默认值。可能是因为我自定义安装的 FFmpeg (in `/usr/local/lib`) 出于某种原因只安装了静态`*.a`库，并且`*.so`文件优先于`*.a`文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T13:30:16.553

您应该将要链接的库放在文件**之后**`.o`；IE：

```
ld -shared -o ../ffmpeg.so ffmpeg.o -L/usr/local/lib -lpython2.7 -lavutil -lavformat -lavcodec -lswresample -lportaudio -lchromaprint -lc 
```

链接器是愚蠢的，并且在依赖出现之前不会从它认为不需要的静态库中链接代码，即使用`avio_alloc_context`发生在中`ffmpeg.o`，并且因为它在使用库后没有列出，所以链接器不会根据需要考虑库中的代码，因此它不会被链接 - 这是使用`.a`文件链接失败的最大原因。

您还可以使用`--start-group`和`--end-group`围绕您要链接的所有文件 - 这允许您链接具有似乎无法通过其他方式解决的交叉依赖关系的静态库：

```
ld -shared -o ../ffmpeg.so -L/usr/local/lib -lpython2.7 --start-group -lavutil -lavformat -lavcodec -lswresample -lportaudio -lchromaprint ffmpeg.o --end-group -lc 
```

使用`.a`文件比文件有点棘手`.so`，但这两项通常可以解决您在链接时遇到的任何问题。

# node.js - NodeJS 托管主机与 VPS

> ID：12652863
> 
> 赞同：24
> 
> 时间：2012-09-29T12:54:20.460
> 
> 标签：node.js, hosting, cloud, vps

有一堆基于托管云的 nodejs 托管服务，[这些](https://github.com/joyent/node/wiki/Node-Hosting)服务看起来相对较新，有些仍处于测试阶段。

托管 nodejs 应用程序的另一种方法是在像 Linode 这样的 VPS 上设置堆栈。

我想知道这两种部署之间的基本区别是什么。在选择一个而不是另一个时应该考虑哪些因素？

考虑到这些服务的年轻程度，哪一种更适合生产。

需要明确的是，我不是要选择提供商，而是要决定是托管在托管的 nodejs 特定主机上还是在老式的自我设置 VPS 上。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-29T13:08:04.693

使用其中一项服务在很大程度上是无需动手的——您编写代码并让他们担心管理盒子、保持您的流程正常运行、创建发布渠道、修补操作系统等......

相比之下，拥有自己的 VM 可为您提供更多控制权，但需要更多的前期和持续时间投资。

另一个考虑因素是一些托管商和云提供商提供专有或独特的技术变体。它们有理由并且它们提供了价值，但这确实意味着如果你想切换云提供商，这可能意味着你必须重写代码、部署脚本等......另一方面，使用具有标准操作系统的虚拟机作为基线是很一般。如果您自动化/脚本/记录您的虚拟机配置并且您的代码保持通用，那么您的选项将保持开放。如果您确实依赖于专有云技术，那么最好将其抽象到接口后面，这样它就是一个解耦的组件，而不是散布在您的代码中。

我都做过。我最近做 VM 路径主要是因为我想要学习经验。我不得不：

*   从云提供商处获取 VM
*   我必须更新和修补操作系统
*   我必须安装和配置 git 作为发布渠道
*   我不得不编写一些脚本并使用像永远这样的东西来保持它运行
*   我必须配置反向 http-proxy 才能让它运行多个站点。
*   我必须使用云提供商配置 DNS，为 git 等打开端口……

名单还在继续。最后，它花费了我更多的前期时间而不是编码，但我学到了更多的东西。如果这些对你很重要，那就试一试。如果您想专注于编写代码，那么节点托管提供商可能适合您。

最后，我还有更多选择——我想添加第二个站点。我在我的反向代理中添加了一个条目，附加我的脚本以永远启动另一个应用程序，瞧，另一个站点。更多的控制。在那之后，我想试试 MongoDB - 很简单 - 安装了它。

成本方面它们大致相同，但是如果您开始使用许多其他软件包（如数据库等）托管多个站点，那么 VM 可以开始变得更便宜。

[Nodejitsu 开源](http://www.nodejitsu.com/open-source.html)了他们的工具，如果你自己做也可以更容易。

如果你自己做，这里有一些链接可以帮助你：

保持服务器正常运行：

[https://github.com/nodejitsu/forever/](https://github.com/nodejitsu/forever/)

[http://blog.nodejitsu.com/keep-a-nodejs-server-up-with-forever](http://blog.nodejitsu.com/keep-a-nodejs-server-up-with-forever)

[https://github.com/bryanmacfarlane/svchost](https://github.com/bryanmacfarlane/svchost)

Upstart 和 Monit 通用自动启动和通过监控重新启动

[http://howtonode.org/deploying-node-upstart-monit](http://howtonode.org/deploying-node-upstart-monit)

集群节点每个核心运行一个进程

[http://nodejs.org/docs/latest/api/cluster.html](http://nodejs.org/docs/latest/api/cluster.html)

反向代理

[https://github.com/nodejitsu/node-http-proxy](https://github.com/nodejitsu/node-http-proxy)

[https://github.com/nodejitsu/node-http-proxy/issues/232](https://github.com/nodejitsu/node-http-proxy/issues/232)

[http://blog.nodejitsu.com/http-proxy-middlewares](http://blog.nodejitsu.com/http-proxy-middlewares)

[https://github.com/nodejitsu/node-http-proxy/issues/168#issuecomment-3289492](https://github.com/nodejitsu/node-http-proxy/issues/168#issuecomment-3289492)

[http://blog.argteam.com/coding/hardening-node-js-for-production-part-2-using-nginx-to-avoid-node-js-load/](http://blog.argteam.com/coding/hardening-node-js-for-production-part-2-using-nginx-to-avoid-node-js-load/)

编写安装脚本

[https://github.com/bryanmacfarlane/svcinstall](https://github.com/bryanmacfarlane/svcinstall)

[基于进程退出代码的退出 Shell 脚本](https://stackoverflow.com/questions/90418/exit-shell-script-based-on-process-exit-code)

发布网站

[使用 git 发布到网站](https://stackoverflow.com/questions/4938239/using-git-to-publish-to-a-website)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-29T13:04:50.860

恕我直言，设置自己的堆栈的最大缺点是您需要管理诸如让 Node.js 运行`forever`、将其作为守护进程启动、将其置于 Nginx 等反向代理后面等事情......很棒的事情关于 Node.js - 让启动 Web 服务器成为单线 - 是它在生产就绪系统方面的最大缺点之一。

此外，您还遇到了自己管理、更新和保护服务器的所有问题。

这对主持人来说要容易得多：通常是这样`git push`，就是这样。缩放？简单的。复制？简单的。...？简单的。只需点击几下即可。

房东的缺点是您无法调整环境。好的，您可能可以选择运行哪个版本的 Node.js 和/或 npm，但仅此而已。您无法控制安装的第 3 方软件。您无法控制操作系统。您无法控制服务器的位置。等等 ...

当然，一些主机允许您访问其中的一些内容，但很少有主机支持所有这些。

所以，基本上关于 Node.js 的问题与其他技术的问题是一样的：这是个人主义、定价、可扩展性、可靠性、知识......

我个人选择和主持人一起去：我节省的时间和精力轻松胜过缺点。请注意：就我个人而言。

这个问题需要单独回答。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-02-19T19:58:56.030

使用 Docker 是在单个 Linux VPS 上简化设置的另一种方法。使用 Docker，开发和生产设置都更快、更健壮、更安全。

设置更快、更健壮，因为您将立即部署准备好的 Node.js 映像，而无需运行任何安装脚本。而且它会更加安全，因为内部依赖项，例如数据库，可以完全对外界隐藏，并且只能从 Docker 内部网络访问。最重要的是，Docker 显着简化了底层操作系统和 Node.js 运行时的升级过程。

有两种方法可以设置 Node.js Docker 环境。第一个 – 按照[此处](https://www.docker.com/blog/how-to-setup-your-local-node-js-development-environment-using-docker/)发布的说明如何对您的应用程序进行 docker 化并使用 Docker 部署它，并在需要时与数据库一起部署。该指南提供了开发设置的说明，生产设置将类似。

另一种方法是部署官方 Node.js docker 映像并将应用程序代码作为卷或文件夹安装到 Node.js 映像。这将允许在不重新构建和重新部署应用程序的情况下更新 Node.js 映像。这种方法解决[了长期存在](https://serverfault.com/questions/611082/how-to-handle-security-updates-within-docker-containers)的 Docker 镜像安全补丁问题。

要帮助在单台机器上设置 Docker - 您可以使用[Abberit Admin Panel](https://abberit.io/docs/app-add-nodejs/)。只需单击一个按钮，它将为您设置 Node.js 环境，包括数据库（如果您需要它们）。该工具是免费的，您可以在完成初始设置后将其关闭。另一方面，如果以后您决定减少生产的维护税 - 您可以迁移到托管服务，而无需对应用程序进行任何更改。

Disclaimer: I am one of the founders of Abberit.

# android - 片段支持中的 Actionbarsherlock ActionMode

> ID：12652864
> 
> 赞同：1
> 
> 时间：2012-09-29T12:54:35.780
> 
> 标签：android, actionbarsherlock, fragment

尝试在片段中使用 startActionMode 但出现此错误

mMode = startActionMode(new AnActionModeOfEpicProportions()); 第 55 行

[http://pastebin.com/d9jzg9UC](http://pastebin.com/d9jzg9UC)

![](../Images/4f5ca980d36aae9028ba76f7e0472d06.png)

如何解决这个问题？片段不支持动作模式？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T13:08:05.713

您正在尝试从*静态*片段（即与 Activity 实例分离的片段）调用 Activity 的*实例方法。*请记住，您始终可以使用. 所以：*`getActivity()`*

 *```
 if (getActivity() != null) {
    mMode = getActivity().startActionMode(new AnActionModeOfEpicProportions());
  } 
```

更简洁的方法是声明一个接口类来管理片段和活动之间的通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T10:26:13.903

在支持库中，您可以使用它：

```
((ActionBarActivity) getActivity()).startSupportActionMode (new AnActionModeOfEpicProportions()); 
```*

# c++ - WinHttpOpen 内存泄漏

> ID：12652868
> 
> 赞同：3
> 
> 时间：2012-09-29T12:55:06.257
> 
> 标签：c++, c, memory, memory-leaks, winhttp

我一直在尝试调试程序中的内存泄漏，并将其范围缩小到 WinHttp 通信。我已经能够在以下测试代码中重现该问题：

```
#include <windows.h>
#include "winhttp.h"

void main() {
    while (1) {
            HINTERNET send_session = WinHttpOpen(L"asdf", WINHTTP_ACCESS_TYPE_DEFAULT_PROXY, WINHTTP_NO_PROXY_NAME, WINHTTP_NO_PROXY_BYPASS, 0);
            WinHttpCloseHandle(send_session);
    }
} 
```

运行几秒钟后，程序已经使用了超过 20MB 的内存。为什么要这样做？[API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384098%28v=vs.85%29.aspx)声明您需要在不再需要句柄后调用 WinHttpCloseHandle - 我正在这样做。

我在 Arch Linux 上使用 mingw32 进行编译，并在 Windows 7 上运行代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T14:04:04.797

如果你稍微修改一下代码，你会看到发生了什么。

```
int _tmain(int argc, _TCHAR* argv[])
{
    for(INT n = 0; n < 1000000; n++)
    {
        if(!(n % 10000))
            _tprintf(_T("%d\n"), n / 10000);
        HINTERNET send_session = WinHttpOpen(L"asdf", WINHTTP_ACCESS_TYPE_DEFAULT_PROXY, WINHTTP_NO_PROXY_NAME, WINHTTP_NO_PROXY_BYPASS, 0);
        WinHttpCloseHandle(send_session);
    }
    _tprintf(_T("Done\n"));
    Sleep(INFINITE);
    return 0;
} 
```

随着创建/关闭一百万个会话，您将看到计数器攀升。API会创建包括线程在内的后台资源，并且不会立即释放，所以不断堆积。

然而，一旦你停止创建新会话并让它有几秒钟的空闲时间——你会看到所有的内存都被释放了。

底线是，在实际代码中，您不应该为每件小事创建单独的会话。一个会话可能承载多个连接和请求。

# android - 从可绘制文件夹Android中获取FilePath

> ID：12652869
> 
> 赞同：0
> 
> 时间：2012-09-29T12:55:33.423
> 
> 标签：android

我想重新调整位图图像的大小......所以我使用下面的代码

```
 BitmapFactory.Options bmOptions = new BitmapFactory.Options();
   bmOptions.inJustDecodeBounds = true;
   int photoW = bmOptions.outWidth;
   int photoH = bmOptions.outHeight;
   int scaleFactor = Math.min(photoW / 100, photoH / 100);
bmOptions.inJustDecodeBounds = false;
bmOptions.inSampleSize = scaleFactor;
bmOptions.inPurgeable = true;
Bitmap bitmap = BitmapFactory.decodeFile(path, bmOptions); 
```

但我的问题是我从这样的可绘制文件夹中获取图像

```
 Bitmap icon = BitmapFactory.decodeResource(getResources(),
                    Const.template[arg2]); 
```

那么如何将这些东西转换为文件路径，以便我可以在以下行中设置

```
 Bitmap bitmap = BitmapFactory.decodeFile(path, bmOptions); 
```

并且可以获得可调整大小的图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T13:11:52.140

没看懂，为什么要用`decodeFile()`？我很确定你可以使用

```
BitmapFactory.decodeResource(getResources(), Const.template[arg2]), bmOptions) 
```

[文档](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeResource%28android.content.res.Resources,%20int,%20android.graphics.BitmapFactory.Options%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T13:20:49.527

答案如下

```
 public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {

            BitmapFactory.Options bmOptions = new BitmapFactory.Options();

            // If set to true, the decoder will return null (no bitmap), but
            // the out... fields will still be set, allowing the caller to
            // query the bitmap without having to allocate the memory for
            // its pixels.
            bmOptions.inJustDecodeBounds = true;
            int photoW = bmOptions.outWidth;
            int photoH = bmOptions.outHeight;

            // Determine how much to scale down the image
            int scaleFactor = Math.min(photoW / 100, photoH / 100);

            // Decode the image file into a Bitmap sized to fill the View
            bmOptions.inJustDecodeBounds = false;
            bmOptions.inSampleSize = scaleFactor;
            bmOptions.inPurgeable = true;
            Bitmap bitmap = BitmapFactory.decodeResource(getResources(), Const.template[arg2],bmOptions);

            Drawable draw = new BitmapDrawable(getResources(), bitmap);

            /* place image to textview */
            TextView txtView = (TextView) findViewById(R.id.imgChooseImage);
            txtView.setCompoundDrawablesWithIntrinsicBounds(draw, null,
                    null, null);
            position = arg2;
        }
    }); 
```

# nested - 更改页面时从页面顶部开始

> ID：12652873
> 
> 赞同：1
> 
> 时间：2012-09-29T12:55:49.300
> 
> 标签：nested, scrollview

我有关于滚动视图的问题。我关于报纸的项目。我的问题是：更改页面时，我想从页面顶部开始。滚动视图有 8 个新闻。我希望在更改 2\. 或 3\. 或.. 新闻时从页面文本的顶部开始。

请帮帮我。因为我需要在星期一交付项目。因此我必须在今天或明天完成。项目代码在这里

```
myScrollview = [[UIScrollView alloc]initWithFrame:CGRectMake(0, 0, self.view.frame.size.width,self.view.frame.size.height)];
myScrollview.pagingEnabled = YES;
myScrollview.scrollEnabled =YES;
myScrollview.clipsToBounds = NO;
myScrollview.indicatorStyle = UIScrollViewIndicatorStyleWhite;
myScrollview.showsHorizontalScrollIndicator = YES;
myScrollview.backgroundColor = [UIColor blackColor];
myScrollview.delegate = self;

NSInteger viewcount=4;
NSArray *images = [NSArray arrayWithObjects:[UIImage imageNamed:@"photo1.png"],[UIImage imageNamed:@"photo2.png"],[UIImage imageNamed:@"photo3.png"],[UIImage imageNamed:@"photo4.png"],nil];

for (int i = 0; i <viewcount; i++)
{
    CGFloat x = i * self.view.frame.size.width;

    subView = [[UIScrollView alloc]initWithFrame:CGRectMake(x, 0, self.view.frame.size.width, self.view.frame.size.height)];

    [subView setBackgroundColor:[UIColor blackColor]];
    [subView setCanCancelContentTouches:NO];
    subView.clipsToBounds = NO;    // default is NO, we want to restrict drawing within our scrollview
    subView.indicatorStyle = UIScrollViewIndicatorStyleWhite;
    aImageView = [[UIImageView alloc ] initWithImage:[images objectAtIndex:i]];
    aImageView.frame=CGRectMake(0, 0, 320, 900);
    [aImageView setTag:viewcount];
    [subView addSubview:aImageView];
    [subView setContentSize:CGSizeMake(aImageView.frame.size.width, subView.frame.size.height)];
    subView.minimumZoomScale = 1;
    subView.maximumZoomScale = 9;
    subView.delegate = self;
    [subView setScrollEnabled:YES];
    subView.contentSize = aImageView.frame.size;
    [myScrollview addSubview:subView];
}

myScrollview.contentSize = CGSizeMake(self.view.frame.size.width*viewcount,self.view.frame.size.height);

[self.view addSubview:myScrollview]; 
```

[https://biliyomusunuz.com](https://biliyomusunuz.com)

# jquery - 单击 div 但不是其嵌套 div 时的 jquery 函数

> ID：12652874
> 
> 赞同：4
> 
> 时间：2012-09-29T12:55:59.250
> 
> 标签：jquery, css

我再次迫切需要你的帮助。

所以基本上我有一个 div，id="parent"，我希望能够隐藏它的内容，我还在这个 div 中嵌套了一个 div，id 为“nested”。“父”比“嵌套”更宽，所以我想要发生的是，当您单击“父”时，我希望激活隐藏功能，但是如果您单击“嵌套”，则此隐藏功能不会激活。

但是，当您单击“父级”和单击“嵌套”时，该功能会激活。这是代码：

HTML：

```
<div id="parent">
    <div id="nested">
        <p>Contents</p>
    </div>  
</div> 
```

JQUERY：（放一个console.log代表隐藏功能）

```
var parent = $('#parent');
var nested = $('#nested');

parent.not(nested).click(function(){
    console.log('Click');
}); 
```

看起来应该很简单，但我无法弄清楚！我的选择器错了吗？这是JQuery根本做不到的吗？非常感谢任何帮助！

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-29T13:00:44.970

事件总是冒出来的。因此，如果您单击嵌套的 div，它将将该单击事件冒泡到父级。

如果我理解正确，您只想在单击父级时执行单击事件，而不是嵌套 div 本身。

只需验证当前事件实际上是由父级触发的，然后才执行代码。

**编辑**
更新为使用[**event.target**](http://api.jquery.com/event.target/)，因为显然`event.srcElement`不兼容跨浏览器。

```
var parent = $('#parent');

parent.click(function(event){
    if(event.target === this){
      console.log("parent was clicked and we execute actions...");
    }
    else{
        console.log("something else within parent was clicked and is ingored...");
    }
});​ 
```

​</p>

### [演示](http://jsfiddle.net/FranWahl/5vJsB/)

> 我不建议将点击事件附加到您要忽略的每个 div 上。当最终需要对嵌套 div 执行操作时，这是一种需要大量维护且非常容易出错的方式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-29T13:00:15.880

尝试

```
$('#nested').click(function(e) { 
    e.stopPropagation();
  }); 
```

# opengl - 你如何在opengl中进行平铺

> ID：12652876
> 
> 赞同：0
> 
> 时间：2012-09-29T12:56:22.387
> 
> 标签：opengl

我正在尝试制作一个 rpg 游戏，我想展示一张平铺地图。

我现在正在做的是为每个图块计算它的位置，如果它在可见区域，我绑定纹理，设置纹理坐标并使用 2 个三角形绘制一个正方形。

一切都很好，但我发现我经常在一些瓷砖之间出现黑线，这很烦人。你如何摆脱那些黑线或者有没有更好的方法使用opengl进行平铺

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T16:56:23.957

如果没有任何代码或屏幕截图，我当然很难知道是什么导致了问题，但我可以给出我最好的猜测。首先，如果您的坐标在瓷砖之间紧密排列，则瓷砖之间不应出现任何裂缝。紧密排列是指瓦片的底部与下面瓦片的顶部具有完全相同的 Y 坐标值。

然而，这也可能是因为纹理重复和线性过滤给您带来了瓷砖边缘的问题。如果是这种情况，您可以使用以下方法解决它：

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); 
```

如果你转动纹理，裂缝是否仍然出现？如果是这样，您的瓷砖之间必须有一些几何间距。也许某些东西在您的代码中某处被四舍五入到 int 之类的？

这些是我最好的猜测，但我建议上传问题的屏幕截图以获得更好的答案。祝你好运！

# php - PHP：如何从 foreach 循环内部修改数组（通过引用）

> ID：12652877
> 
> 赞同：2
> 
> 时间：2012-09-29T12:56:34.820
> 
> 标签：php, arrays, multidimensional-array

> **可能重复：**
> [如何通过 foreach 循环修改数组的值？](https://stackoverflow.com/questions/7733290/how-to-modify-an-arrays-values-by-a-foreach-loop)

为什么这不起作用？

```
$user_list_array = array(
    1 => array( "first_name" => "Jim" ),
    2 => array( "first_name" => "Bob" )
)

foreach ($user_list_array as $item ) {
    echo $item["first_name"];
    $item["last_name"] = "test";
} 

var_dump($user_list_array ); 
```

我可以取回“first_name”，但不能添加“last_name”；

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T13:01:16.057

您正在修改 $item，它是来自 $user_list_array 的相关条目的副本

**EITHER：（** 修改原始数组）

```
foreach ($user_list_array as $key => $item ) { 
    echo $item["first_name"]; 
    $user_list_array[$key]["last_name"] = "test"; 
} 
```

**或：（** 参考）

```
foreach ($user_list_array as &$item ) { 
    echo $item["first_name"]; 
    $item["last_name"] = "test"; 
} 
unset($item); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T13:00:16.597

```
foreach ($user_list_array as &$item ) {
    echo $item["first_name"];
    $item["last_name"] = "test";
} 
```

在 $item 之前添加 & 将通过引用传递数组，这意味着您对其所做的任何修改都将被保存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T13:02:02.357

它不起作用，因为您没有修改实际的数组，这应该可以解决问题。

```
$user_list_array = array(
    1 => array( "first_name" => "Jim" ),
    2 => array( "first_name" => "Bob" )
)

foreach ($user_list_array as $id => $item ) { 
    echo $item["first_name"]; 
    $user_list_array[$id]["last_name"] = "test"; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T13:02:14.497

您应该修改原始数组，而不是`$item`循环创建的 tmp 变量。你可以那样做

```
foreach ($user_list_array as $key = $val) {
    echo $val["first_name"];
    $user_list_array[$key]["last_name"] = "test";
} 
```

# java - 通过 PHP 服务器将信息推送到 android 应用程序？

> ID：12652882
> 
> 赞同：2
> 
> 时间：2012-09-29T12:56:59.673
> 
> 标签：java, android, mobile, polling, long-polling

有没有办法在 Android 应用程序和 PHP 脚本之间保持连接打开，所以如果有任何更新，PHP 脚本可以将通知推送到 android 应用程序，而不是应用程序必须每 X 分钟发出一次 HTTP 请求询问任何更新？

我知道如果不在服务器端安装东西来启用它们，这是不可能通过 Ajax 实现的，但我想知道它在 Android 上是否有任何不同。

例如，如果我在 PHP 端执行以下操作：

```
<?
set_time_limit(0);
while (true)
{
   $updates = $updater->find();
   if ($updates)
      ob_flush( $updates->getAsJSON() );
   sleep(60);
}
?> 
```

像这样的东西可以保持连接打开并将更新推送到 android 应用程序吗？

服务器正在运行 Apache 和 PHP 5。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T14:35:13.540

您的代码*理论上*可以工作，但也会导致不必要的 CPU 使用，因为您每分钟都在查找更新，并且根据`$updater`实现，这可能会浪费 CPU、内存和 IO。如果您希望事件驱动的通信不浪费资源，那么您需要一个基于事件的后端——那里有很多后端，但在 PHP 中没有，这是因为它是 PHP 的限制。在 PHP 脚本中没有办法去多线程`wait()`，所以基本上你不能实现*观察者*模式，这反过来又阻止了他们用 PHP 编写事件驱动的库。

我不认为你想这样做。除非您可以**毫无疑问地**数数用户，否则 PHP 无法处理此任务。这不是网络服务器的问题，而是 PHP 本身的问题。每个 PHP 请求（通过`mod_php`、 fcgi 、`php-fpm`）都由一个新的 PHP 进程处理。这使得无法扩展，这就是为什么您需要安装使用其他服务器端技术来实现长轮询。

# mysql - 如何总结 MySQL 中的几列

> ID：12652889
> 
> 赞同：1
> 
> 时间：2012-09-29T12:57:57.957
> 
> 标签：mysql, sql

我有一个有几千行的表：从这里我需要为 column`WTE`中的每个值提取列的总计`band`，包括总计为 0 的那些。我还需要每个总计都在它自己的列中，所以我可以轻松地更新汇总表。

我目前拥有的代码返回相关行的值：

```
SELECT 
   IF(band="E",WTE,0) AS `Band6_WTE`
FROM  `orthoptists` AS o
LEFT JOIN `instances` AS i
ON o.instance_FK = i.id
WHERE i.region = 14 
```

但是当我添加 SUM() 时，返回不正确（零，应该是几千）：

```
SELECT 
   IF(band="E",SUM(WTE),0) AS `Band6_WTE`
FROM  `orthoptists` AS o
LEFT JOIN `instances` AS i
ON o.instance_FK = i.id
WHERE i.region = 14 
```

我查看了[http://en.wikibooks.org/wiki/MySQL/Pivot_table](http://en.wikibooks.org/wiki/MySQL/Pivot_table)，但我不明白应该如何将这种方法应用于我的问题。

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T13:04:29.020

如果出现以下情况，您必须求和：

```
SELECT
    SUM(IF(band="E",WTE,0)) AS `Band6_WTE`
FROM  `orthoptists` AS o
LEFT JOIN `instances` AS i
ON o.instance_FK = i.id
WHERE i.region = 14 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T13:21:18.810

在这种特殊情况下，使用起来不是更容易`WHERE`吗？

```
SELECT SUM(WTE) AS `Band6_WTE`
FROM  `orthoptists` AS o
LEFT JOIN `instances` AS i
ON o.instance_FK = i.id
WHERE i.region = 14
AND band = "E" 
```

对于一般情况，您可以使用，`GROUP BY`因为您说您需要每个波段的结果（列波段中的每个值）：

```
SELECT band, SUM(WTE) AS `WTE`
FROM  `orthoptists` AS o
LEFT JOIN `instances` AS i
ON o.instance_FK = i.id
WHERE i.region = 14
GROUP BY band 
```

这将给出 NULL 或 0，如果您愿意，您可以使用`IFNULL`将 NULL 转换为 0：

```
IFNULL(SUM(WTE), 0) 
```

**编辑**：正如您在评论中指出的那样，您希望不同波段的多列而不是多行。一般来说，您不应该从 SQL 中执行此操作（使用第二个查询并从您的代码中执行枢轴操作），但也有例外情况，在 SQL 之外执行此操作要复杂得多，因此您可以这样做：

```
SELECT
    (SELECT SUM(WTE)
    FROM  `orthoptists` AS o
    LEFT JOIN `instances` AS i
    ON o.instance_FK = i.id
    WHERE i.region = 14
    AND band = "E") AS `Band6_WTE`,
    (SELECT SUM(WTE)
    FROM  `orthoptists` AS o
    LEFT JOIN `instances` AS i
    ON o.instance_FK = i.id
    WHERE i.region = 14
    AND band = "F") AS `Band7_WTE`,
    (SELECT SUM(WTE)
    FROM  `orthoptists` AS o
    LEFT JOIN `instances` AS i
    ON o.instance_FK = i.id
    WHERE i.region = 14
    AND band = "G") AS `Band8_WTE` 
```

精确的语法可能需要一些调整（有些数据库要求每个`SELECT`都包含一个`FROM`子句，有些可能需要子选择中的每一列的名称，我认为 MySQL 没有，但我现在无法检查），但是无论如何，该原则都应适用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T14:39:06.190

Noody 已经解释了为什么您的原始查询会给您错误的结果。

原始查询在`SELECT`子句中有一个聚合函数。这告诉 MySQL 这是一个聚合。没有`GROUP BY`子句，因此它返回一行，将所有行视为一个组。

现在，`band`在这种情况下会发生什么？在 SQL 标准或任何其他 SQL 方言中，原始查询将返回错误，表示类似`band`未聚合。

MySQL 有一个称为隐藏列的（错误）功能，它允许这种语法。`band`它从所有行中取一个随机值进行比较。该值可能具有值“E”，在这种情况下，将返回所有 WTE 的总和。或者，它可能有另一个值，在这种情况下返回 0。

一般来说，您应该避免使用隐藏列。当您有聚合查询时，语句中的任何“裸”列`SELECT`也应该在子句中。`GROUP BY`

# php - 重构 ZF 控制器文件？

> ID：12652893
> 
> 赞同：2
> 
> 时间：2012-09-29T12:58:24.760
> 
> 标签：php, zend-framework, refactoring

我的控制器（IMO）太长（超过 1200 行）。主要问题是我有很多动作。我可以将此操作分为 3 组：

1.  日历相关操作

2.  与事件相关的操作（我们将事件称为日历的“子模块”）

3.  提供者相关的操作（也是日历的“子模块”）

重组代码的最佳方法是什么。
我可以以某种方式将其拆分为子类吗？或者是否有任何 ZF 特定的方法来实现这个目标，而无需为日历“子模块”创建额外的控制器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T13:31:01.797

没有最好的方法。

如果您认为您的班级太大，则必须根据关注点分离原则拆分班级。

关注点分离原则指出，系统元素应具有*排他性*和目的*单一性*。也就是说，任何元素都不应分担另一个元素的责任或包含不相关的责任。

关注点的分离是通过建立边界来实现的。边界是描述一组给定职责的任何逻辑或物理约束。

如果您的课程没有违反关注点分离原则，请保持原样。

# fluent-nhibernate - 可以在 FluentNHibernate 约定中控制 ICompositeUserType 的列名吗？

> ID：12652895
> 
> 赞同：1
> 
> 时间：2012-09-29T12:58:50.327
> 
> 标签：fluent-nhibernate

我创建了一个约定来对匹配类型的所有属性`IUserTypeConvention`使用实现：`ICompositeUserType`

```
public abstract class CompositeUserTypeConvention<TUserType> 
    : IUserTypeConvention
    where TUserType : ICompositeUserType, new()
{
    public virtual void Accept(IAcceptanceCriteria<IPropertyInspector> criteria)
    {
        var userType = new TUserType();

        criteria.Expect(x => x.Type == userType.ReturnedClass);
    }

    public virtual void Apply(IPropertyInstance instance)
    {
        instance.CustomType<TUserType>();
    }
} 
```

应用此功能时，FluentNHibernate 使用约定为复合类型的每个属性生成列名`{memberpropertyname}_{compositepropertyname}`。

对于`Money`具有属性`Amount`和的复合类型`Currency`，如果我的实体上有一个名为`Price`类型的属性`Money`，则预期的列称为`Price_Currency`和`Price_Amount`。

我想要更改此约定以删除下划线，但我不知道如何或是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T13:34:01.000

该`CustomType<T>()`方法有一个接受`columnPrefix`作为参数的重载。默认行为是将属性名称 +“_”作为此值传递。明确指定值给出了期望的结果：

```
public virtual void Apply(IPropertyInstance instance)
{
    instance.CustomType<TUserType>(instance.Name);
} 
```

# java - 看不懂Java类定义

> ID：12652896
> 
> 赞同：0
> 
> 时间：2012-09-29T12:58:59.220
> 
> 标签：java, api, class, variables, methods

首先让我感谢大家在许多情况下帮助我......我在一些java编码方面遇到了问题。我在学习 Java 时看到了这个编码，但无法理解它......下面是一些例子：

```
public class interface Set<E>

public class SocreManager extends ValueSortedMap<String,Integer> 
```

我无法理解的是 <> 里面的东西（在这个例子中是 E 和 String,Integer ）这个 <> 是什么意思？，我目瞪口呆，我仍然找不到答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T13:10:44.887

`ClassA<ClassB>`代表`ClassA`使用*泛型*- java 特性之一

`public class interface Set`

这意味着`Set`它将与某些其他类型（ ）有些相关`E`。Set 是一些对象的持有者。如果你声明它，`Set<String>`你可以只放字符串，或者转换成字符串的东西。这就是`<E>`这里的用途。

`public class SocreManager extends ValueSortedMap`

SocreManager 是包装器，`ValueSortedMap`它可以添加一些新方法，`ValueSortedMap`但它也可以添加注释，并且仅用作类名美化器。如果您不向 SocreManager 添加任何功能，那么您将拥有与 in 相同`ValueSortedMap`但名称更短且更简单的所有内容 - `SocreManager`。但是看这个名字告诉我，我将包含更多的东西，而不仅仅是来自超类的方法。

# parsing - 来自 Haskell 编程的函数式解析器示例

> ID：12652897
> 
> 赞同：3
> 
> 时间：2012-09-29T12:59:09.090
> 
> 标签：parsing, haskell

在第 76 页，我们将一个函数定义`item`为解析器——一个接受 a`String`并返回`[(Char, String)]`或`[]`失败的函数。

在第 78 页，我们定义了一个函数`sat`，它接受一个谓词`p`并围绕它“包装”一个解析器结构

```
p :: (Char -> Bool) -> Parser Char
sat p = do x <- item
           if p x then return x else failure 
```

我不明白的是魔法`<-`？如果 的结果`item`不为空，则此运算符应该解开列表并从元组中获取第一项，否则它应该产生不会阻塞谓词的东西。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T13:23:11.877

```
do x <- item
   if p x then return x else failure 
```

这是语法糖

```
item >>= (\x -> if p x then return x else failure) 
```

`>>=`是一元绑定运算符。

您缺少的是：类型的定义是`>>=`什么`Parser`？（书中定义的`Monad`实例在哪里`Parser`？它将开始`instance Monad Parser where`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T13:26:11.563

该`do`表示法对 monad 运算符的应用程序没有糖分`(>>=)`。更准确地说， 的定义`sat`被简化为以下定义。

```
sat p :: (Char -> Bool) -> Parser Char
sat p =
  item >>= \x -> if p x then return x else failure 
```

操作员`(>>=)`首先将`item`解析器应用于输入。正如您正确观察到的，此解析器产生第一个字符。然后，`(>>=)`将第一个解析器的结果传递给它的第二个参数，即函数`\x -> if p x then return x else failure`。此函数检查输入流的第一个字符是否满足谓词。如果满足，该函数将产生一个解析器 ( `return x`)，它不消耗任何输入并简单地产生`x`结果。如果它不满足谓词，则该函数会生成一个解析器，该解析器对于任何输入 ( `failure`) 都会失败。

# java - Java中包和目录的区别

> ID：12652899
> 
> 赞同：23
> 
> 时间：2012-09-29T12:59:25.173
> 
> 标签：java, directory, packages

在 *Java Project*中，将所有*.java*文件保存在同一个文件夹中是否意味着它们在同一个包中？

**与将所有项目文件保存在一个文件夹中相比，为我们的项目制作包有**什么区别？

 **[这个线程](https://stackoverflow.com/questions/9510932/java-package-vs-folder-structure-what-is-the-difference)并没有真正解决我的问题。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-29T13:22:28.187

包和目录之间存在关系，但这是**您**必须维护的关系。如果您有一个在“mypackage1.mypackage2”中的类，这意味着该`java`命令将期望在名为“mypackage1\mypackage2”的目录结构中找到它（假设“向后”Windows 表示法），该目录结构进一步嵌入在一个目录（我们称之为“myjava”）中，其名称在`classpath`（或者直接在“当前目录”）中。

因此，您的 Java 类（内部表示`package mypackage1.mypackage2;`）位于“\Users\myName\myjava\mypackage1\mypackage2\”中，并且您将“\Users\myName\myjava”放在类路径中，否则您将拥有当前的目录设置为“\Users\myName\myjava”。

如果你把它弄混了，要么根本找不到这个类，要么你会得到一个类似模糊不清的“NoClassDefFoundError”的错误。

至于*为什么*要使用包（和目录），原因与“名称空间”和“关注点分离”（查找这些）有关。如果没有包并且所有“java.lang”、“java.io”、“sun.misc”等类都在一起，Java 将更难保持直截了当。首先，必须使用名称“前缀”来保持它们的正确性并避免名称冲突。并且大部分逻辑分组都会丢失。

对于你自己的项目，你不需要为你自己编写的简单小程序使用包，但是如果你写了一些你可能会提供给别人的东西，使用诸如“myname.myproject”之类的包是有礼貌的（替换你的名字和当然是项目），所以你给它的人可以将它与其他人结合起来而不会发生名称冲突。

在大型应用程序中，您会发现使用更高级别的分离可以帮助您保持功能正常，因此您知道所有内容在哪里。它还阻止您在不同功能区域之间“跨越边界”，因此您不会将不相关的逻辑交织在一起。

Eclipse（如果你使用它）有点混淆了这个问题，因为它“想要”提供目录和包名称，并且有时（但不总是）使它们保持同步。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-29T13:24:51.017

*   **包**为您的类提供**逻辑**命名空间..

*   并且这些包以目录级别的形式存储（它们被转换为嵌套**目录**），以便为您的类提供**物理**分组（命名空间）。

另外，请注意`physical`命名空间必须与`logical`命名空间一致。你**不能**让你的类`package com.demo`在目录结构下： - `\com\demo\temp\`，**它必须**在`\com\demo\`，并且这个目录被添加到**类路径**中，以便你的类是运行代码时对 JVM**可见..**

假设您具有以下目录结构：-

> 一个
> |
> +-- Sample.java(包含**B包下的****Demo**类) | +-- Outer.java（包含**Demo**类 - 无包） | +--B | | | +-- 演示.class | +--C | | | +-- Abc.class | +-- Demo.class

 ****假设您的类`Abc.class`和`Demo.class`（在目录 A 下）未定义在任何包下，**而**您的类`Demo.class`（在目录 B 下）定义在`package B`. 所以，你需要在你的类路径中有两个目录： - `\A`（对于两个类： - `Demo.class`和`B.Demo.class`）和`\A\C`（对于 class `Abc.class`）..

*   不同包下的类可以使用相同的名称。这就是为什么上面定义的两者之间不会有任何冲突的原因`Demo.class`。因为它们在不同的`packages`. 这就是将它们划分为`namespaces`.. 的全部意义。这是有益的，因为您不会用完您的类的唯一名称..

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-11T05:04:00.677

了解类加载器子系统将回答您的查询。

参考[Bill Venners 的 Inside JVM](http://www.artima.com/insidejvm/ed2/jvm4.html)

> 给定一个完全限定的类型名称，原始类加载器必须以某种方式尝试使用该类型的简单名称加上“.class”来定位文件。因此，JVM 搜索存储在名为 CLASSPATH 的环境变量中的用户定义目录路径。原始加载程序按照目录出现在 CLASSPATH 中的顺序查找每个目录，直到找到具有适当名称的文件：类型的简单名称加上“.class”。除非该类型是未命名包的一部分，否则原始加载程序期望文件位于 CLASSPATH 中目录之一的子目录中。子目录的路径名是根据该类型的包名构建的。例如，如果原始类加载器正在搜索类 java.lang.Object，它将寻找 Object。******

# ios - Xcode：在 Instruments 中没有发现僵尸

> ID：12652901
> 
> 赞同：1
> 
> 时间：2012-09-29T12:59:35.957
> 
> 标签：ios, xcode, ipad, memory-leaks, nszombie

当我在“运行”方案中启用僵尸对象时，应用程序在 iPad 上运行良好，如果我取消选中此选项，它会崩溃。在搜索这些僵尸时，我在 Instruments 中运行了“Profile”和“Zombies”模板。它不会在模拟模式下崩溃，因此不会发出消息。还有什么其他方法可以找到僵尸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:29:17.747

[iOS 5 中存在一个错误，](https://stackoverflow.com/questions/12132325/xcode-instrument-allocations-instrument-not-finding-zombies/12133275#12133275)阻止在 ARC 和`NSZombieEnabled`. 这解释了有或没有僵尸时所描述的行为变化。

解决方法：切换到Mountain Lion下的iOS 6。

# ios - ios在图像中写入文本并旋转文本

> ID：12652903
> 
> 赞同：1
> 
> 时间：2012-09-29T12:59:42.747
> 
> 标签：ios, text, rotation, center, cgcontext

我对 ios 开发很陌生，我正在尝试在图像上写文本并旋转文本

我写了文字，但我试图围绕它的中心旋转它

这个想法是翻译文本以将其原点放在中心然后旋转然后重新翻译到原始位置

这是我的代码：

```
context = UIGraphicsGetCurrentContext();      

txt = @"Hello";
[[UIColor redColor] set];      

CGSize sz = [txt sizeWithFont:font];

rect= CGRectMake(tpoint.x,tpoint.y,sz.width, sz.height);

CGContextTranslateCTM(context, sz.width/2, sz.height/2);
CGContextRotateCTM(context, 0.3);
CGContextTranslateCTM(context, -sz.width/2, -sz.height/2);

[txt drawAtPoint:tpoint withFont:font];

UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
imageView.image = newImage; 
```

# android - 在 Google Maps Android 上绘制路线

> ID：12652904
> 
> 赞同：1
> 
> 时间：2012-09-29T12:59:53.077
> 
> 标签：android, google-maps, google-maps-api-3

> **可能重复：**
> [在谷歌地图上画一条线/路径](https://stackoverflow.com/questions/2176397/drawing-a-line-path-on-google-maps)

我将如何使用 Google Maps API 绘制路线？例如，将一堆航路点加载到地图上（我目前有这个）并从每个航路点画一条线，向用户显示他们可以采取的路线来查看所有航路点？当用户看到地图时，我将如何加载它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:07:05.500

看看[这个](https://stackoverflow.com/questions/2176397/drawing-a-line-path-on-google-maps)，这个问题已经被问过很多次了。基本上，在`onDraw()`您的`Overlay`班级中，您需要遍历您的航路点，构建一个`Path`. 然后最后在地图上绘制路径。如果这令人困惑，请阅读链接：D

# python - 以多种方式阅读字符

> ID：12652905
> 
> 赞同：0
> 
> 时间：2012-09-29T13:00:03.837
> 
> 标签：python, io

我有一个这种格式的文本文件：

```
abc? cdfde" nhj.cde' dfwe-df$sde..... 
```

我怎样才能忽略所有的特殊字符、空格、数字、行尾等，只写另一个文件中的字符？例如，上面的文件变成

```
abccdfdenhjcdedfwedfsde..... 
```

从这个输出文件中，

*   应该能够逐个字符地读取单个字符，直到文件结束。
*   应该能够一次读取两个字符，例如上面文件中的 ab,bc,cc,cd,df,...
*   应该能够一次读取三个字符，例如上述文件中的 abc,bcc,ccd,cdf,...

首先，我怎样才能只读字符并写入外部文件？
我可以通过使用 f.read(1) 读取单个字符直到文件末尾。我如何应用它来一次读取 2,3 个字符，这也只跳过一个字符（也就是说，如果我有 abcd，我应该阅读 ab,bc,cd 而不是 ab,cd（这个，我认为可以通过 f.read(2))）。谢谢。我这样做是为了密码分析工作，按频率分析密文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T13:11:51.283

如果您需要提前查看（一次读取几个额外的字符），您需要一个缓冲文件对象。下面的类就是这样做的：

```
import io

class AlphaPeekReader(io.BufferedReader):
    def readalpha(self, count):
        "Read one character, and peek ahead (count - 1) *extra* characters"
        val = [self.read1(1)]

        # Find first alpha character
        while not val[0].isalpha():
            if val == ['']:
                return ''  # EOF
            val = [self.read1(1)]

        require = count - len(val)
        peek = self.peek(require * 3)  # Account for a lot of garbage
        if peek == '':  # EOF
               return val[0]

        for c in peek:
            if c.isalpha():
               require -= 1
               val.append(c)
               if not require:
                   break

        # There is a chance here that there were not 'require' alpha chars in peek
        # Return anyway.
        return ''.join(val) 
```

这会*尝试*在您正在阅读的一个字符之外找到额外的字符，但不能保证它能够满足您的要求。如果我们在文件末尾或者下一个块中有很多非字母文本，它可能会读取更少。

用法：

```
with AlphaPeekReader(io.open(filename, 'rb')) as alphafile:
    alphafile.readalpha(3) 
```

演示，使用带有示例输入的文件：

```
>>> f = io.open('/tmp/test.txt', 'rb')
>>> alphafile = AlphaPeekReader(f)
>>> alphafile.readalpha(3)
'abc'
>>> alphafile.readalpha(3)
'bcc'
>>> alphafile.readalpha(3)
'ccd'
>>> alphafile.readalpha(10)
'cdfdenhjcd'
>>> alphafile.readalpha(10)
'dfdenhjcde' 
```

要`readalpha()`在循环中使用调用，您可以分别获取每个字符以及接下来的两个 2 字节，请使用[`iter()`](http://docs.python.org/library/functions.html#iter)带有标记的 ：

```
for alpha_with_extra in iter(lambda: alphafile.readalpha(3), ''):
    # Do something with alpha_with_extra 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T13:26:35.543

从文件中读取一行：

```
import fileinput

text_file = open("Output.txt", "w")
for line in fileinput.input("sample.txt"):
    outstring = ''.join(ch for ch in line if ch.isalpha())
    text_file.write("%s"%outstring)

text_file.close() 
```

# java - 应用程序关闭后，JOGL javaw.exe 仍然运行

> ID：12652913
> 
> 赞同：1
> 
> 时间：2012-09-29T13:01:18.717
> 
> 标签：java, opengl, jogl

我有一个使用 JOGL 的简单 Java 应用程序。当我从 Eclipse 运行它，然后关闭应用程序窗口时，javaw.exe 仍然在运行。以下是相关代码：

```
public class App {
    private Display mDisplay;
    private Shell mShell;
    private GL4 mGl;
    private int mProgramId;
    private int mVsId;
    private int mFsId;

    // ...

    public void start() {
        if (!initialize()) {
            return;
        }

        while (!mShell.isDisposed()) {
            if (!mDisplay.readAndDispatch()) {
                mDisplay.sleep();
            }
        }

        destroy();
    }

    private void initialize() {
        mDisplay = new Display();
        mShell = new Shell(mDisplay);

        // some SWT and opengl initialization code, which is irrelevant for this issue
        // (at least I think so)
        // getting GLProfile, GLContext, GL4 etc.

        final String vsText = ResourceManager.getShaderText(vsPath);
        final String fsText = ResourceManager.getShaderText(fsPath);

        mVsId = mGl.glCreateShader(GL4.GL_VERTEX_SHADER);
        mFsId = mGl.glCreateShader(GL4.GL_FRAGMENT_SHADER);

        mGl.glShaderSource(mVsId, 1, new String[] { vsText }, null, 0);
        mGl.glCompileShader(mVsId);

        mGl.glShaderSource(mFsId, 1, new String[] { fsText }, null, 0);
        mGl.glCompileShader(mFsId);

        mProgramId = mGl.glCreateProgram();

        mGl.glAttachShader(mProgramId, mFsId);
        mGl.glAttachShader(mProgramId, mVsId);

        // bind a constant attribute location for positions of vertices
        mGl.glBindAttribLocation(mProgramId, 0, "in_Position");
        // bind another constant attribute location, this time for color
        mGl.glBindAttribLocation(mProgramId, 1, "in_Color");
        mGl.glLinkProgram(mProgramId);

        // here error code is 0x0 (no error)
        int error = mGl.glGetError();

        mShell.open();

        return true;
    }

    private void destroy() {

        // here error code is 0x502 (GL_INVALID_OPERATION)
        int error = mGl.glGetError();

        mGl.glDetachShader(mProgramId, mFsId);
        mGl.glDetachShader(mProgramId, mVsId);

        mGl.glDeleteShader(mFsId);
        mGl.glDeleteShader(mVsId);
        mGl.glDeleteProgram(mProgramId);

        mDisplay.dispose();
    }
} 
```

我注释掉了所有渲染代码和大多数其他与 opengl/JOGL 相关的调用（除了获取 GLProfile、GLContext、GL4 和此示例中列出的所有内容），这个问题仍然存在。

一般来说，应用程序工作正常，着色器编译和链接没有问题（我使用了我没有在这个示例中显示的验证）并且它显示了它需要的内容。唯一的问题是 javaw.exe 在我关闭应用程序窗口后仍然运行（通过按窗口角落的 x）。

仅当我注释掉`mGl.glCompileShader(mVsId);`和后续行时，才会删除此问题。如果我离开这一行，javaw.exe 将继续运行，所以我猜这个问题与着色器初始化/销毁代码有关。

此外，glGetError() 在 initialize() 结束时返回 0（无错误），在 destroy() 开始时返回 0x502 (GL_INVALID_OPERATION)。中间只有主循环，没有我知道的 opengl 调用，因为为了测试，我注释掉了所有渲染代码。

有任何想法吗？

**编辑 2012-10-03：**

我仍然不知道问题是什么，但由于我更新了我的显卡驱动程序，'javaw.exe' 在应用程序关闭后应该终止。我有 AMD Radeon HD 6870。我当前的驱动程序版本是 2012-07-27 的 8.982，我不记得最后一个版本是什么，但我相信它是从 2011 年 1 月左右开始的。

但是，glGetError()在destroy开始的时候还是返回0x502，所以我猜还是有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T01:15:51.070

Assuming you use JOGL from jogamp.org, pls use either our [SWT GLCanvas](http://jogamp.org/git/?p=jogl.git;a=blob;f=src/test/com/jogamp/opengl/test/junit/jogl/swt/TestNewtCanvasSWTGLn.java;hb=HEAD) or our [NEWTCanvasSWT](http://jogamp.org/git/?p=jogl.git;a=blob;f=src/test/com/jogamp/opengl/test/junit/jogl/swt/TestNewtCanvasSWTGLn.java;hb=HEAD). The latter is preferred due to custom GLCapabilities, pls check API doc. This given plus you are doing everything SWT related on the SWT thread (read linked unit tests), IMHO it should work - at least our unit tests.

Since you mentioned after an update (GPU/driver) your troubles ceased to exist, it might have been a driver problem.

Now to your GL error. Trace GL errors can be simply done by setting the system property 'jogl.debug.DebugGL', i.e. on the commandline "-Djogl.debug.DebugGL". This will install the debug pipeline for your GL object automatically and checks for GL error, which will throw an GLException if appear.

You can also trace via the property 'jogl.debug.TraceGL'.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-29T09:57:14.410

我不知道这是否相关，但可能会帮助我猜想的人，所以我会在这里分享。请记住，我只是一个开始使用 Java SWT 的爱好者。

我使用 Java SWT 库在 Eclipse IDE 中创建了一个简单的应用程序。我在我的主窗口外壳中制作了一个“退出”按钮，当按下它时会调用它：

```
 quitBtn.addSelectionListener(new SelectionAdapter() {
        @Override
        public void widgetSelected(SelectionEvent e) {
            shell.getDisplay().dispose();
            System.exit(0);
        }
    }); 
```

将 .jar 文件导出到 Desktop 后，我使用 LaunchJ4 包装器将其转换为 .exe 文件，并使用 singleR3XPlayer 互斥锁在 Single instance 选项卡中选中“Allow only a single instance of the application”。

当我使用“退出”按钮关闭 .exe 文件时，一切都很好，javaw.exe 将终止。但是当我使用右上角窗口中的 X 按钮关闭 shell 时，javaw.exe 将继续运行。当我尝试删除 .exe 文件（Windows“使用的文件，仍然在 Java(TM) Platform SE 二进制文件中打开，关闭文件并重试”类型的错误弹出窗口）并且我无法打开时，我发现了这一点使用 X 按钮关闭文件后的另一个实例（因为单实例互斥锁）。此外，如果我执行一些 .jar 文件（即使在关闭它们之后，但仅使用 X 而不是“退出”按钮），javaw.exe 的多个实例将保持运行。

我发现用 X 按钮关闭窗口只会处理 shell 而不会退出程序。但是按下“退出”按钮会因为它调用 System.exit(0)。所以我这样做了：

```
 // SWT Event Loop
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) 
            display.sleep();
    }

    // To make sure javaw.exe terminates when Window is closed
    if (shell.isDisposed()) {
        System.exit(0);
    } 
```

因此，在我的 SWT 事件循环完成后（shell.isDisposed() == true），我确保将调用 System.exit(0)。这样，javaw.exe 以任何一种方式终止。

我不知道 SWT 是如何工作的，也不知道这是否是正确的方法，但它确保 javaw.exe 在应用程序关闭后终止。

希望有帮助。

# database - dababase 驱动的黑莓应用程序

> ID：12652915
> 
> 赞同：0
> 
> 时间：2012-09-29T13:01:40.230
> 
> 标签：database, mobile, blackberry

有人可以指点我一个基本教程，我可以在其中学习如何使用作为应用程序包一部分的本地数据库在 backberry 应用程序上显示内容。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T15:36:04.850

检查这个[官方BB网站部分](https://developer.blackberry.com/java/documentation/sqlite_intro_1981752_11.html)

看一下左侧的标尺，其中描述了使用 SQLite 的步骤。

[还有一个适用于 SQLite 的示例应用程序](https://developer.blackberry.com/java/documentation/data_sqlite_1988900_11.html)

# c - 制作队列程序

> ID：12652918
> 
> 赞同：0
> 
> 时间：2012-09-29T13:01:51.270
> 
> 标签：c, queue

有人可以帮我制作一个队列程序。我想将 设置`array[0]`为`array[1]`仅显示，但实际上我在`array[0]`. 我知道了如何对其运行添加功能，但我无法执行将从 ex 中查看的查看和删除命令。array[0] 到 array[4]，当显示 array[1] 到 array[5] 并插入值。

```
#include <stdio.h>
#include <stdlib.h>
#define p printf
#define s scanf

int rear = 0;
int front = 0;
int *q_array = NULL;
int size = 0;

main()
{
    int num, opt;
    char cont[] = { 'y' };
    clrscr();
    p("Queue Program\n\n");
    p("Queue size: ");
    s("%d", &size);
    p("\n");

    if(size > 0)
    {
        q_array = malloc(size * sizeof(int));
        if(q_array == NULL)
        {
            p("ERROR: malloc() failed\n");
            exit(2);
        }
    }
    else
    {
        p("ERROR: size should be positive integer\n");
        exit(1);
    }

while((cont[0] == 'y') || (cont[0] == 'Y'))
{
    clrscr();
    p("Queue Program");
    p("\n\nQueue size: %d\n\n", size);
    p("MAIN MENU\n1\. Add\n2\. Delete\n3\. View");
    p("\n\nYour choice: ");
    s("%d", &opt);
    p("\n");

    switch(opt) {
        case 1:
            if(rear==size)
            {
                p("You can't add more data");
            }
            else
            {
                p("Enter data for Queue[%d]: ", rear+1);
                s("%d", &num);
                add(num);
            }
            break;
        case 2:
            delt();
            break;
        case 3:
            view();
            break;
    }
    p("\n\nDo you want to continue? (Y\/N)");
    s("%s", &cont[0]);
}
}
add(int a)
{
    q_array[rear]=a;
    rear++;
}
delt()
{
    if(front==rear)
    {
        p("Queue Empty");
    }
    else
    {
        p("Queue[%d] = %d removed.", front, q_array[front]);
        front++;
    }
}
view()
{
    int i;
    for(i=front;i<=rear;i++)
        p("\nQueue[%d] = %d", i, q_array[i]);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T15:35:54.333

1.  这里的一个严重问题是

    ```
    char cont[] = { 'y' };
    ...
    s("%s", &cont[0]); 
    ```

    您只保留**了一个**字节，但`scanf`将写入至少 2 个字节，这意味着您将发生缓冲区溢出，然后整体行为是不可预测的。如果您想读取单个字符，则将其`"%c"`用作模式，但这里的问题是字符将在缓冲区中以供下次读取，因此您将不得不清除缓冲区。

    这样做要容易得多：

    ```
    char line[1024];
    fgets(line, sizeof line, stdin);
    if(line[strlen(line)-1] == '\n')
        line[strlen(line)-1] = 0;

    if(strcmp(line, "Y") == 0 || strcmp(line, "y")==0) 
    ```

    这是一个多一点的代码，但这样更安全。

2.  有很多队列，有fifo，lifo，根据它你选择如何构建它

3.  在处理队列时，最好使用函数名称，例如，`push`因为它们在其他程序员和队列库中被广泛使用。请改用这些名称。`pop``top`

4.  在您的情况下，如果记住 with `front`，`rear`您应该使用 `memmove`and 使用变量`len`来计算节点中当前的元素数。一旦你弹出一个元素，你就获得了更多元素的新空间。

另外，尝试使用更少的全局变量和更多的封装：（在我的示例中，我不关心`malloc`return `NULL`，我想保持简短）

```
#include <string.h> /* for size_t */

typefed struct {
    size_z len;
    size_z max_size;
    int    *data;
} queue;

void queue_init(queue *q, size_t max_size)
{  
    q->len      = 0; 
    q->max_size = max_size;
    q->data     = malloc(max_size * sizeof *(q->data));
    /* this is a good trick!
     * If you need to change the datatype of 'data',
     * you only need to change the definition of it.
     * This code is valid for any type */ 
}  

int push(queue *q, int data)
{  
    if(q->len == q->max_size)
        return 0; /* not enough space */ 

    q->data[q->len++] = data;
    return 1;
}

int top(queue *q, int *data)
{
    if(q->len == 0)
        return 0; /* no elements in the queue */
    *data = q->data[0];
    return 1;
}

int pop(queue *q, int *data)
{
    if(top(q, data) == 0)
        return 0;

    memmove(q->data, q->data + sizeof *(q->data), q->len--);
    return 1;
} 
```

顺便提一句：

```
#define p printf
#define s scanf 
```

就像 Daniel Fischer 说的，这很丑；不要那样做。

# java - 如何格式化我的文本？

> ID：12652919
> 
> 赞同：2
> 
> 时间：2012-09-29T13:01:51.080
> 
> 标签：java, text, string-formatting

**解决了**

嗨，伙计们，如果我有一个这样的程序：

```
import java.awt.*;
import javax.swing.*;

public class Tab extends JFrame
{
    public Tab()
    {
        super ("Swimming Pool Calculator");

        JTabbedPane tab = new JTabbedPane();

        // constructing the first panel
        JLabel l1 = new JLabel( "Welcome to blah,blah!", SwingConstants.CENTER); 

        JPanel p1 = new JPanel();
        p1.add( l1 );
        tab.addTab( "Tab#1", null, p1, " Panel #1" );

        // constructing the second panel
        JLabel l2 = new JLabel("Welcome to JTabbedPaneDemo",SwingConstants.CENTER);
        JPanel p2 = new JPanel();
        p2.setBackground( Color.blue );
        p2.add( l2 );
        tab.addTab( "Tab#2", null, p2, " Panel #2" );

    }
} 
```

我希望 JLabel l1 中的措辞是这样的：

```
 "Welcome! 
                              Thank you for using the
                              Swimming Pool Calculator. 
```

我该怎么做？

我尝试使用`\n`for new 行，但这对我来说效果不佳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T13:04:52.017

Swing 组件理解一些 HTML

```
JLabel l1 = new JLabel( "<html><center>Welcome!<br>Thank you for using the<br>Swimming Pool Calculator.</center>"); 
```

# entity-framework - 如何从 Entity Framework 4.3 升级到 EF 5

> ID：12652920
> 
> 赞同：16
> 
> 时间：2012-09-29T13:01:57.070
> 
> 标签：entity-framework, entity-framework-4, entity, entity-framework-5

目前我们正在开发 EF 4.3 。我们想将其升级到 EF5。我已经google了升级过程步骤，但没有得到任何结果。请帮我..！

谢谢.. ：）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-29T15:53:14.727

以下是我在 EF4.3 到 EF5 上创建的内容的两个链接：

文章：将现有项目迁移到 EF 5 [http://msdn.microsoft.com/en-us/magazine/jj618295.aspx](http://msdn.microsoft.com/en-us/magazine/jj618295.aspx)

视频：EF 4.3 中的实体框架 5 枚举和移动解决方案 [http://thedatafarm.com/blog/data-access/video-entity-framework-5-enums-and-moving-solution-from-ef-4-3/](http://thedatafarm.com/blog/data-access/video-entity-framework-5-enums-and-moving-solution-from-ef-4-3/)

朱莉

# c# - StreamReader 到树视图

> ID：12652928
> 
> 赞同：0
> 
> 时间：2012-09-29T13:03:52.523
> 
> 标签：c#, wpf, treeview, streamreader

我有一个具有以下结构的文本文件（.txt）：

*   [阿尔法] [勇敢] [查理]
*   [BRAVO] [ALPHA] [CHARLIE] [DELTA] [BRAVO]
*   [勇敢] [阿尔法] [查理] [探戈]

层次结构如下：

1.  Alpha > BRAVO > 查理
2.  BRAVO > ALPHA > CHARLIE > DELTA > BRAVO
3.  -------------------------------------> 探戈

此文本文件可能有 100-200 行。我想使用 StreamReader 读取行，然后在树视图中显示这些行。

到目前为止，我已经使用 StreamReader 成功读取了文件，并使用 .StartsWith 通过 [SECTION1] 过滤了这些行。

我想改进我的应用程序并将 StreamReader 的内容输出到某种形式的列表中，然后树视图组件可以读取这些列表。

我目前的代码如下：

```
string currentFilter = cbTagFilter.Text;

            Console.WriteLine(currentFilter);

            IEnumerable<string> lines = File.ReadLines(tbFileSelection.Text).Where(line => line.StartsWith(currentFilter));

            foreach (string line in lines)
            {
                lbContents.Items.Add(line);
                Console.WriteLine(line);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T13:33:51.370

创建一个代表父子关系的类并生成这些对象的列表。然后将列表绑定到`TreeView`Control using`ItemsSource`属性并使用`HierarchicalDataTemplate`来定义您的项目在`TreeView`.

# c# - 从 Delphi DLL 发送二进制数据做一个 C# 应用程序

> ID：12652936
> 
> 赞同：2
> 
> 时间：2012-09-29T13:05:04.837
> 
> 标签：c#, delphi, pinvoke, delphi-2010

我有一个 Delphi 2010 DLL，用于压缩来自 C# APP 的一些数据。DLL 函数如下所示：

```
function CompressString(aInputString: PAnsiChar; aInputStringSize: Integer; 
  var aOutPutString: PAnsiChar; var aOutPutStringSize: Integer; 
  var aErrorMsgBuffer: PAnsiChar; var aErrorMsgBufferSize: integer): Integer; 
  stdcall; export; 
```

C# 方法如下所示：

```
[DllImport("MyDLL.dll", CallingConvention=CallingConvention.StdCall, CharSet=CharSet.Ansi)]
public static extern int CompressString(string aInputString, 
  int aInputStringSize, ref string aOutPutString, 
  out int aOutPutStringSize, ref string aErrorMsgBuffer, 
  out int aErrorMsgBufferSize); 
```

我的问题是`aOutPutString`被截断，C# 应用程序只能看到部分数据。如果我`aOutPutString`在 Delphi DLL 中更改为一个简单的文字常量（仅用于测试），它可以正常工作。

在 DLL 中，我正在处理字符串。在函数结束时，我调用：

```
StrPCopy(aOutPutString, vOutOutAnsiStr); 
```

转换一个`AnsiString`do `PAnsiChar`。

我想我不应该使用`PAnsiChar`but `array of byte`，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T15:27:16.140

使用 PAnsiChar 会使字符串在第一个 '0' 字节处截断。

您可以有两个 out 参数，而不是 type 的`PAnsiChar`out 参数：其中一个是指向字节数组的指针，另一个是包含数组大小的整数。

您必须小心不要释放 DLL 上的数组，以便以后需要访问它。在 C# 方面，在外部函数声明中，您将捕获指针`IntPtr`并使用该`Marshal.Copy`方法将内容复制到 C# 字节数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T14:11:05.713

由于您确实在使用字节数组，因此我将在 C# 函数中声明它们。

```
[DllImport("MyDLL.dll")]
public static extern int CompressByteArray(
    byte[] InputBuffer,  
    int InputBufferLength, 
    byte[] Output, 
    ref int OutputBufferLength, 
    [MarshalAs(UnmanagedType.BStr)]
    out string ErrorMsg
); 
```

在 Delphi 方面，您当前正在使用`PAnsiChar`，但说您宁愿使用字节数组。然后我会`PByte`在 Delphi 端使用，函数看起来像这样：

```
function CompressByteArray(
  InputBuffer: PByte;
  InputBufferLength: Integer;
  OutputBuffer: PByte;
  var OutputBufferLength: Integer;
  out ErrorMsg: WideString
): Integer; stdcall; 
```

对于错误消息文本，我使用`WideString`和`MarshalAs(EnumeratedType.BStr)`使内存分配更容易。因为 a`BSTR`是从共享 COM 堆中分配的，所以它可以在 Delphi 代码中作为 a 进行分配`WideString`，然后在边界的另一侧正确地释放。

# java - 将列表传递给 HQL 或 SQL 中的 IN 子句？

> ID：12652937
> 
> 赞同：45
> 
> 时间：2012-09-29T13:05:17.037
> 
> 标签：java, hibernate, hql, in-clause

我`List<Strings>`通过执行查询得到。这必须传递给另一个**IN**子句值查询。如何在**HQL**中传递它们？

我们可以转换`List`并`Array`可以通过它，这不是问题。

最后，我必须将列表 in `List<String>`or `Array`or `String`form 传递给**IN**子句。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-10-01T06:49:41.693

```
from AUTOS a where a.model in (select m.model from MODELS m) 
```

或者

```
Query query1 = session.createQuery("select s.id from Salary s where s.salary < 50000 AND s.salary > 49980");
Query query2 = session.createQuery("from Employee e where e.id in (:ids)").setParameterList("ids", query1.list());
query2.list(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-13T09:28:28.330

我知道已经有一段时间了，您一直在尝试将不同查询的值作为 queryParameter 传递，您还可以使用“ *elements()* ”将集合或集合传递给 HQL 中的 in 子句 - 这是此类用法的简单示例： [Hibernate 查询：Set 是否包含某个 Object？](https://stackoverflow.com/questions/9116179/hibernate-query-does-a-set-contains-a-certain-object)

# java - 让音序器在 JavaSound (Java SE7) 中播放

> ID：12652940
> 
> 赞同：1
> 
> 时间：2012-09-29T13:06:27.670
> 
> 标签：java, javasound

这是我第一次尝试编写程序而不是书中的练习。完成后，它将是一个钢琴卷帘编辑器 MIDI 音序器。用户输入一组歌词。该程序将单词转换为钢琴卷帘编辑器上的音符，然后用户可以四处移动并构建旋律。我有用于歌词提交的 GUI 和一个基本的钢琴卷帘面板。我的笔记出现在面板上，上面印有歌词。现在我正处于尝试构建将播放这些音符的音序器/合成器的阶段。在这一点上，复杂性有点压倒性，所以我试图一步一步来。我研究了 Head First Java 一书中的音乐节拍盒，以及 Killer Game Programming 一书中的 MIDI 章节。我在 JavaSound 上反复阅读过 Java API。考虑到这一切，我构建了一个包含音序器和合成器的类，我试图简单地创建一系列音符并播放它们（甚至不用担心将它们连接到屏幕上的图形音符形状）。但是什么都没有播放。我现在有四门课（一门用于 GUI，一门用于钢琴卷帘面板，一门用于图形音符对象，一门用于音乐引擎）。我将尝试在下面发布一些此代码。如果有人可以帮助我弄清楚为什么什么都没有播放，我将不胜感激。一个用于钢琴卷帘面板，一个用于图形音符对象，一个用于音乐引擎）。我将尝试在下面发布一些此代码。如果有人可以帮助我弄清楚为什么什么都没有播放，我将不胜感激。一个用于钢琴卷帘面板，一个用于图形音符对象，一个用于音乐引擎）。我将尝试在下面发布一些此代码。如果有人可以帮助我弄清楚为什么什么都没有播放，我将不胜感激。

这是音乐引擎类。希望我在这里正确发布代码：

```
import javax.sound.midi.*;

public class MusicEngine {
private Sequencer sequencer;
private Sequence sequence;
private Synthesizer synthesizer;
private Track track;
MidiEvent event;

// Constructor
public MusicEngine() {
    createMidi();
}

// Get sequencer and sequence and track
public void createMidi() {
    try {
        sequencer =  MidiSystem.getSequencer();
        if (sequencer == null) {
            System.out.println("Cannot get a sequencer");
            System.exit(0);
        }
        sequencer.open();

        // If sequencer is not the same as synthesizer, link the two 
        // (required in J2SE 5.0)
        if (!(sequencer instanceof Synthesizer)) {
            System.out.println("Linking the sequencer to the synthesizer");
            synthesizer = MidiSystem.getSynthesizer();
            synthesizer.open();
            Receiver synthReceiver = synthesizer.getReceiver();
            Transmitter seqTransmitter = sequencer.getTransmitter();
            seqTransmitter.setReceiver(synthReceiver);
        } else 
            synthesizer = (Synthesizer)sequencer;
        sequence = new Sequence(Sequence.PPQ, 4);
        track = sequence.createTrack();
        sequencer.setTempoInBPM(120);
    } catch(MidiUnavailableException e) {
        System.out.println("No sequencer available");
        System.exit(0);
    } catch(Exception e) {
        e.printStackTrace();
        System.exit(0);
    }

}

// Create an individual MIDI event
public MidiEvent createEvent(int command, int channel, int one, int two, int tick) {
    event = null;
    try {
        ShortMessage a = new ShortMessage();
        a.setMessage(command, channel, one, two);
        event = new MidiEvent(a, tick);
    } catch(InvalidMidiDataException e) {
        e.printStackTrace();
    }
    return event;
}

    public void add(MidiEvent event) {
    track.add(event);
}

public void playSong(int tempo) {
    try {
        sequencer.setSequence(sequence);
    }
    catch (InvalidMidiDataException e) {
        e.printStackTrace();
    }

    sequencer.start();
}

} 
```

这是尝试弹奏一些音符的钢琴卷帘面板：

```
import javax.sound.midi.ShortMessage;
import javax.swing.*;
import javax.swing.event.MouseInputAdapter;
import javax.swing.border.*;
import java.awt.*;
import java.awt.event.*;
import java.util.ArrayList;

public class MelodyPanel extends JPanel {
private String[] lyricList;
private ArrayList<MovableNote> noteList = new ArrayList<>();
private int xCoord = 1;
private int yCoord = 50;
private int startX, startY, stopX, stopY, diffX, diffY;
private int lyricPosition;
private int noteWidth = 40;
private static final int DEFAULT_NOTE_HEIGHT = 15;
private static final int SIXTEENTH_BEAT_WIDTH = 50;
private MusicEngine musicEngine;

private String[] noteNames = {"C1","C#1/Db1","D1","D#1/Eb1","E1","F1","F#1/Gb1","G1","G#/Ab1","A1","A#1/Bb1","B1",
        "C2","C#2/Db2","D2","D#2/Eb2","E2","F2","F#2/Gb2","G2","G#2/Ab2","A2","A#2/Bb2","B2",
        "C3","C#3/Db3","D3","D#3/Eb3","E3","F3","F#3/Gb3","G3","G#3/Ab3","A3","A#3/Bb3","B3",
        "C4","C#4/Db4","D4","D#4/Eb4","E4","F4","F#4/Gb4","G4","G#4/Ab4","A4","A#4/Bb4","B4",
        "C5","C#5/Db5","D5","D#5/Eb5","E5","F5","F#5/Gb5","G5","G#5/Ab5","A5","A#5/Bb5","B5",
        "C6","C#6/Db6","D6","D#6/Eb6","E6","F6","F#6/Gb6","G6","G#6/Ab6","A6","A#6/Bb6","B6",
        "C7","C#7/Db7","D7","D#7/Eb7","E7","F7","F#7/Gb7","G7","G#7/Ab7","A7","A#7/Bb7","B7"};

// Measure length = default note length x number of beats
private static final int FOUR_FOUR_MEASURE_LENGTH = SIXTEENTH_BEAT_WIDTH * 16;
private static final int THREE_FOUR_MEASURE_LENGTH = SIXTEENTH_BEAT_WIDTH * 12;
private static final int SIX_EIGHT_MEASURE_LENGTH = SIXTEENTH_BEAT_WIDTH * 24;

private Font f = new Font("SansSerif", Font.BOLD, 14);
private MovableNote mNote;
private MovableNote selectedNote = null;
private boolean dragging = false;

// Create an INITIAL MelodyPanel with lyrics, RESET to flatline melody
public void showMelodyPanel(String[] lyricList) {
    setBackground(Color.BLACK);
    this.lyricList = lyricList;

    // Create the MusicEngine sequencer and synth
    musicEngine = new MusicEngine();

    // For every syllable in the lyricList, create a MovableNote and put it in the ArrayList
    for (int i = 0; i < lyricList.length; i++) {
        lyricPosition = i;
        mNote = new MovableNote((SIXTEENTH_BEAT_WIDTH * lyricPosition) + 2, DEFAULT_NOTE_HEIGHT * 10, noteWidth, DEFAULT_NOTE_HEIGHT, lyricList[i]);
        noteList.add(mNote);
        // try adding a musical note to the track
        musicEngine.add(musicEngine.createEvent(ShortMessage.NOTE_ON, 0, 60, 100, i * 16));
        musicEngine.add(musicEngine.createEvent(ShortMessage.NOTE_OFF, 0, 60, 100, i * 16 + 4));
    }

    // try to play the song
    musicEngine.playSong(120);

    // The panel responds when you click on it
    addMouseListener(new NoteListener());

    // The panel responds when you drag the mouse on it
    addMouseMotionListener(new NoteListener());
}

@Override /** Paint the melodyPanel */
protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    // Draw the note rows, iterating backwards through the noteNames array
    int counter1 = 1;
    int counter2 = 6;
    NoteRow row;
    for (int i = 83; i >= 0; i--) {
        row = new NoteRow(0, i * DEFAULT_NOTE_HEIGHT, SIXTEENTH_BEAT_WIDTH * 16 * lyricList.length, DEFAULT_NOTE_HEIGHT, noteNames[i]);
        row.draw(g);

        // Place horizontal lines to separate rows representing adjacent white piano keys
        if (counter1 % 12 == 0 || counter2 % 12 == 0) 
            g.setColor(Color.DARK_GRAY);
            g.drawLine(0, i * DEFAULT_NOTE_HEIGHT, this.getWidth(), i * DEFAULT_NOTE_HEIGHT);
        counter1++;
        counter2++;
    }

    // Draw the sixteenth note lines
    for (int i = 0; i < this.getWidth(); i += FOUR_FOUR_MEASURE_LENGTH / 16) {
        g.setColor(new Color(112,128,144));
        g.drawLine(i, 0, i, this.getHeight());
    }

    // Draw the eighth note lines
    for (int i = 0; i < this.getWidth(); i += FOUR_FOUR_MEASURE_LENGTH / 8) {
        g.setColor(new Color(95,158,160));
        g.drawLine(i, 0, i, this.getHeight());
    }

    // Draw the quarter note lines
    for (int i = 0; i < this.getWidth(); i += FOUR_FOUR_MEASURE_LENGTH / 4) {
        g.setColor(new Color(70,130,180));
        g.drawLine(i, 0, i, this.getHeight());
    }

    // Draw the measure lines
    for (int i = 0; i < this.getWidth(); i += FOUR_FOUR_MEASURE_LENGTH) {
        g.setColor(Color.WHITE);
        g.drawLine(i, 0, i, this.getHeight());
    }

    // For every MovableNote in the ArrayList draw a note on the MelodyPanel
    for (int i = 0; i < noteList.size(); i++) {
        if (noteList != null) {
            noteList.get(i).draw(g);

            // Paint the current syllable or word onto the current note
            g.setColor(Color.BLACK);
            g.setFont(f);
            g.drawString(noteList.get(i).getSyllable(), (int)noteList.get(i).getX() + 2, (int)noteList.get(i).getY() + 13);

        } else {
            // Code that informs user they need to submit some lyrics
            // Or something else if the user wishes to not use lyrics
        }
    }
}

private class NoteListener extends MouseInputAdapter {

    @Override
    public void mousePressed(MouseEvent e) {
        startX = e.getX();
        startY = e.getY();
        dragging = true;
        for (MovableNote n: noteList) {
            if (n.isHit(startX, startY)) {
                if (selectedNote != null) {
                    selectedNote = n;
                    System.out.println("You have selected a note");
                    selectedNote.setNoteColor(Color.BLACK);
                    repaint();
                } else {
                    selectedNote.setNoteColor(Color.YELLOW);
                    repaint();
                    selectedNote = null;
                }
            }
        }
        testPress(e.getX(), e.getY());
    }

    @Override public void mouseReleased(MouseEvent e) {
        dragging = false;
    }

    @Override
    public void mouseDragged(MouseEvent e) {
        stopX = e.getX();
        stopY = e.getY();

        for (MovableNote n: noteList) {
            if (n.isHit(e.getX(), e.getY())) {
                System.out.println("You tried to drag a note");
                diffX = stopX - startX;
                diffY = stopY - startY;
                n.translate(diffX, diffY);
                repaint();
            }
        }

        // code to reset the the old x, y values
        startX += diffX;
        startY += diffY;

        testDrag(e.getX(), e.getY());
    }

}

// When mouse is pressed on panel, a note is created without any connection to a lyric
private void testPress(int x, int y) {
    // Test to see if mouse listener works
    System.out.println("The mouse was clicked on coordinates " + x + ", " + y);
}

// When mouse drags a note, the note moves
private void testDrag(int x, int y) {
    // Test to see if mouse listener works
    System.out.println("The mouse dragged to this location: " + x + ", " + y);
}

// Individual row that represents a single pitch horizontally
private class NoteRow extends Rectangle {
    Color color = (Color.GRAY);
    private String pitch;

    // Constructor
    public NoteRow(int x, int y, int width, int height, String pitch) {
        super(x, y, width, height);
        this.x = x;
        this.y = y;
        this.width = width;
        this.height = height;
        this.pitch = pitch;

        // Set color of the row according to if it's a black keyboard key or a white keyboard key
        if (pitch.startsWith("C#") || pitch.startsWith("Db") || pitch.startsWith("D#") || 
                pitch.startsWith("Eb") || pitch.startsWith("F#") || pitch.startsWith("Gb") || pitch.startsWith("G#") || 
                pitch.startsWith("Ab") || pitch.startsWith("A#") || pitch.startsWith("Bb")) {
            this.color = (Color.DARK_GRAY);
        } else {
            this.color = (Color.LIGHT_GRAY);
        }
    }

    // Method for the note to draw itself
    void draw(Graphics gr) {
        Graphics2D g = (Graphics2D)gr;
        g.setColor(color);
        g.fill(this);
    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T13:39:15.773

看起来您忘记将您创建的 MidiEvent 添加到 Track 中。我找不到您调用 Track.add(MidiEvent) 的任何地方。可能你的序列是空的。

# android - 如何从服务器将视频保存在 android HTC 中？

> ID：12652941
> 
> 赞同：0
> 
> 时间：2012-09-29T13:07:06.680
> 
> 标签：android, video

我从服务器获取一个 url，我想在我的 android htc 设备中保存视频。我收到一些错误：----- java.io.FileNotFoundException: /mnt/sdcard/543b8417-6e67-4755-8c68-b93373f9d9e2.wmv (Permission denied) & address family not supported。我已经在清单文件中给予了所有许可。我的代码是：- videoUrl = "http://125.63.71.222/fliptest/uservideo/543b8417-6e67-4755-8c68-b93373f9d9e2.wmv";

```
 String LocalFilePath = videoUrl.substring(
            videoUrl.lastIndexOf("/") + 1, videoUrl.length());
    File dire = new File(android.os.Environment.getExternalStorageDirectory(), LocalFilePath);

        int bytesread = 0;
        byte[] bytes = new byte[8192];
        InputStream strm = null;
        HttpResponse response = null;
        HttpEntity entity = null;
        String LocalFile = null;
        FileOutputStream foStream;
        BufferedOutputStream writer = null;
        try {
            DefaultHttpClient httpclient = new DefaultHttpClient();
            videoUrl = videoUrl.replace(" ", "%20");
            HttpGet httpget = new HttpGet(videoUrl);

            response = httpclient.execute(httpget);

            entity = response.getEntity();
            strm = entity.getContent();

            LocalFile = android.os.Environment.getExternalStorageDirectory() + LocalFilePath;
            //directory = null;
            foStream = new FileOutputStream(dire);
            writer = new BufferedOutputStream(foStream);
            do {
                bytesread = strm.read(bytes, 0, bytes.length);
                if (bytesread > 0) {
                    writer.write(bytes, 0, bytesread);
                    writer.flush();
                }
            } while (bytesread > 0);

            writer.close();
            foStream.close();

            strm.close();
            return;

        } catch (Exception e) {
        //  dire.delete();              
            e.printStackTrace();

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T14:21:26.653

我会稍微修改你的代码：

```
String videoUrl = "http://125.63.71.222/fliptest/uservideo/543b8417-6e67-4755-8c68-b93373f9d9e2.wmv";
String LocalFilePath = videoUrl.substring(videoUrl.lastIndexOf("/") + 1, videoUrl.length());
File dire = new File(android.os.Environment.getExternalStorageDirectory(), LocalFilePath);

int bytesread = -1; // i would change it to -1
byte[] bytes = new byte[8192];
InputStream strm = null;
FileOutputStream foStream;

try {
    videoUrl = videoUrl.replace(" ", "%20");
    URL url = new URL(videoUrl);
    URLConnection connection = url.openConnection();
    connection.connect();

    strm = new BufferedInputStream(url.openStream());
    foStream = new FileOutputStream(dire);

    //typical pattern for reading
    while ((bytesread = strm.read(bytes)) != -1) {
        foStream.write(bytes, 0, bytesread);
    }

    foStream.flush();
    foStream.close();
    strm.close();

} catch (Exception e) {
   ...
} 
```

您需要两个权限才能运行此代码 - 您已经提到您拥有它们，但请快速提醒：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

并且不要忘记异步运行此任务。

此致

# objective-c - 在objective-c中为图像添加标签和排名元数据

> ID：12652949
> 
> 赞同：0
> 
> 时间：2012-09-29T13:08:18.510
> 
> 标签：objective-c, ios, exif, alassetslibrary

如何将自定义排名和关键字添加到`metaData`objective-c中的图像？我`CGImageProperties_` [在苹果文档中看到了参考，](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CGImageProperties_Reference/Reference/reference.html)但它没有任何排名和标记的关键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:05:39.667

我宁愿在里面创建自己的 CGImage 类，并配备排名和元数据字典

# vba - 从vba中字符串的开头和结尾删除空格

> ID：12652952
> 
> 赞同：5
> 
> 时间：2012-09-29T13:08:42.747
> 
> 标签：vba, excel

我编写了这个函数来删除字符串开头和结尾的空格，有什么想法为什么它不起作用？

```
Public Function PrepareString(TextLine As String)

    Do While Left(TextLine, 1) = " " ' Delete any excess spaces
        TextLine = Right(TextLine, Len(TextLine) - 1)
    Loop
    Do While Right(TextLine, 1) = " " ' Delete any excess spaces
        TextLine = Left(TextLine, Len(TextLine) - 1)
    Loop

    PrepareString = TextLine

End Function 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-29T13:24:24.330

我测试了你的功能，它在我的机器上运行良好。

您可以使用为您执行此操作的内置`Trim()`函数，而不是创建执行相同操作的 UDF。

```
Trim(TextLine) 
```

参考：[http ://www.techonthenet.com/excel/formulas/trim.php](http://www.techonthenet.com/excel/formulas/trim.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T14:24:25.483

这个怎么样。请注意 Worksheetfunction.Trim 的使用，它删除了 Application.Trim 没有的多个空格。

```
Option Explicit

Dim oRegex As Object

Sub test()
Dim dirtyString As String

    dirtyString = "   This*&(*&^% is_                          The&^%&^%><><.,.,.,';';';  String   "
    Debug.Print cleanStr(dirtyString)
End Sub

Function cleanStr(ByVal dirtyString As String) As String

    If oRegex Is Nothing Then Set oRegex = CreateObject("vbscript.regexp")
    With oRegex
        .Global = True
        'Allow A-Z, a-z, 0-9, a space and a hyphen -
        .Pattern = "[^A-Za-z0-9 -]"
        cleanStr = .Replace(dirtyString, vbNullString)
    End With
    cleanStr = WorksheetFunction.Trim(cleanStr)
End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T13:24:17.810

为什么不是这个？

```
Public Function PrepareString(TextLine As String)
    PrepareString = Trim(TextLine)
End Function 
```

Alexandre/slaver113 是绝对正确的，将内置函数包装在 UDF 中没有任何意义。我这样做的原因是为了指出如何使您的 UDF 工作。在现实生活中，我永远不会以这种方式使用 UDF。:)

# iframe - 在 Watin 中无法访问嵌套的 iframe

> ID：12652954
> 
> 赞同：2
> 
> 时间：2012-09-29T13:08:55.000
> 
> 标签：iframe, watin

我正在尝试使用 Watin 自动化 Web 应用程序。

我有 HTMLDialog Popup，当我单击 HTMLDialog Popup 中的图标时，iframe 刷新，HTML 内容看起来像这样。

```
<html>
<body>
<Form> </form>
<iframe Name = "A">
 <html>
  <Body>
   <Form Name="frmMain">
    <Table Name ="tblMain">
     <Tbody>
      <TR>  
        <TD>
          <iframe Name = "B">
            <Html>
              <Body>
                <frame Name="innerForm">
                 <Table>
                   <Div> My Object </Div>
                 </Table> ... 
```

我无法识别 iFrame'B' 内的元素，iframe'B' 的 InnerHtml 始终为空。

用于获取内部 HTML 的代码：

```
Browser.Frame(Find.ByName("A")).Form(Find.ByName("frmMain")).Table(Find.ById("tblMain")).TableBodies[0].TableRows[0].ElementWithTag("iframe", Find.ById("B")).InnerHtml; 
```

我可以看到 iFrame 'B' 包含我想使用 IE 'Developer Tool' 选择的项目。

我是否遗漏了什么，因为我想在 iFrame 'B' 中选择一个项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T14:12:24.020

如果我记得在`Browser`元素中找到了框架，那么您应该将 an`iframe`作为普通框架访问。我无法访问我的来源进行验证，但我建议您尝试

```
Browser.Frame(Find.ByName("A")).Frame(Find.ById("B")) 
```

访问您所需的框架。

# delphi - Delphi 7 - TDBGrid 风格

> ID：12652955
> 
> 赞同：0
> 
> 时间：2012-09-29T13:08:57.603
> 
> 标签：delphi, tdbgrid

如何在 Delphi 7 中使用程式化表格？例如：

![在此处输入图像描述](../Images/d869cd7c8248dfaee20968510e6ddbad.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T13:21:48.703

如果您的意思是要以 TDbGrid 组件为主题，您可以使用[`Themed DBGrid runtime replacement`](http://cc.embarcadero.com/item/24513)Jeremy North 和 Andreas Hausladen 提供的主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-25T18:53:08.460

我在 Delphi 7 和 Windows 8.1 上为您编写并测试了这个示例

使用 Event **DrawColumnCell**更改颜色或其他内容。

```
procedure TForm1.DBGrid1DrawColumnCell(Sender: TObject; const Rect: TRect;DataCol: Integer; Column: TColumn; State: TGridDrawState);
begin
  try
    if Column.FieldName = 'FIRST_NAME' then
      DBGrid1.Canvas.Brush.Color := clGreen;
  finally
    DBGrid1.DefaultDrawColumnCell(Rect, DataCol, Column, State);
  end;
end; 
```

下载完整示例： [文件](http://www.filedropper.com/tdbgridstyle)

# url - 如何使用过滤器或 servlet 更改 requestURL

> ID：12652957
> 
> 赞同：6
> 
> 时间：2012-09-29T13:09:13.053
> 
> 标签：url, servlets, request, port, servlet-filters

如何使用过滤器或 servlet 更改 requestURL。

例如，如果请求是“http://servername1:8080”，我想将其更改为“http://servername2:7001”

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-29T15:28:31.700

将以下[servlet 过滤器](http://docs.oracle.com/javaee/5/api/javax/servlet/Filter.html)添加到您的应用程序：

```
public class RequestUrlRewritingFilter implements Filter {

    //Empty init()/destroy() here

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        final HttpServletRequestWrapper wrapped = new HttpServletRequestWrapper(request) {
            @Override
            public StringBuffer getRequestURL() {
                final StringBuffer originalUrl = ((HttpServletRequest) getRequest()).getRequestURL();
                return new StringBuffer("http://servername2:7001");
            }
        };
        chain.doFilter(wrapped, response);
    }
} 
```

您要拦截的所有请求都必须通过它。如您所见，它采用原始方法并通过返回不同的值来`request`覆盖方法。`getRequestURL()`如果您想在旧 URL 上建立新 URL，您仍然可以访问原始请求。

最后，您必须继续处理请求`chain.doFilter()`，但提供包装的请求，而不是原始请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-27T20:49:00.117

与网络上使用 .forward() 的许多其他解决方案相比，上述解决方案是一个很好的解决方案，因为它会破坏过滤器链。该解决方案允许后续过滤器在修改后处理请求。

但是还有 2 个额外的方法必须实现，以使其对下游过滤处理“透明”，并且它们必须呈现相同的 URL 修改以呈现一致的请求对象。包装器必须实现：

```
@Override
public String getRequestURI() {
    final String originalUri = ((HttpServletRequest)getRequest()).getRequestURI();
    return "/"; // Must be consistent with getRequestURL()
}
@Override
public String getServletPath() {
    final String originalPath = ((HttpServletRequest)getRequest()).getServletPath();
    return "/"; // Must be consistent with getRequestURL()
} 
```

# c# - 分层数据的表模式应该是什么？

> ID：12652958
> 
> 赞同：2
> 
> 时间：2012-09-29T13:10:06.813
> 
> 标签：c#, sql-server, database-design, hierarchical-data

我刚刚参加了一次面试，我收到了一个问题，包括这个场景和一些示例数据：

`A`是`B`和`C`的老板`D`。 `D`是 和 的`E`老板`F`。然后`F`是 and 的老板`G`，`H`即我们有分层数据。

换句话说，我们可以说有项目经理，团队负责人，然后是开发人员。现在我们要创建表来存储数据。

此外，开发人员以后可以成为项目经理。

那么我们应该如何创建表呢？表应该包含哪些列？

我的回答是：

我们应该有一个项目经理表，其中包含列`PM_ID`，主键`PM_Name`在哪里。`PM_ID`然后我们应该为团队领导创建另一个表。在该表中，我们应该有`TL_ID`主键`TL_Name`和`PM_ID`外键。

然后我们应该创建开发人员表，我们应该将其`D_ID`作为主键，`D_Name`然后`TL_ID`作为外键。

你能告诉我我是否为表格提供了正确的架构吗？

如果有任何问题，您能否向我提供上述情况的正确架构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T13:15:39.363

您很可能需要一个层次结构表[http://msdn.microsoft.com/en-us/library/bb677174%28v=sql.100%29.aspx](http://msdn.microsoft.com/en-us/library/bb677174%28v=sql.100%29.aspx)，然后使用 cte 查询来显示结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T14:07:43.313

*   当开发人员成为项目经理时，该人是否不再是开发人员？
*   所有这些关系都会随着时间而改变。您是否需要知道哪些关系发生了变化，以及何时发生了变化？
*   每个人都必须有老板吗？
*   每个老板都必须有下属吗？
*   当老板去世或离开时，该老板的下属会怎样？
*   开发人员可以同时为多个团队负责人工作吗？

有时，面试问题不是关于结构，而是更多关于你识别和解决需求歧义的能力。（另外，这里不一定相关，但是当大多数人指向某物并说“层次结构”时，如果你仔细观察，你会发现“网络”。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T13:40:15.503

我认为最简单的表将包含此信息（仅在一个表中）：

```
EmployeeID | LineManager | Role
-----------+-------------+-----
A          | A           | boss
B          | A           | pm
C          | A           | pm
D          | A           | pm
E          | D           | tl
F          | D           | tl
G          | F           | dev
H          | F           | dev 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T13:14:37.353

在这种情况下，您的表需要有一个外键。

# spring - 将 Spring 3 应用程序层分离为公共共享组件

> ID：12652961
> 
> 赞同：1
> 
> 时间：2012-09-29T13:10:47.010
> 
> 标签：spring, spring-mvc

我创建了两个独立的 Web 应用程序以及一个 Restful API 服务器。
它们是在 Eclipse 中作为动态 Web 项目签出的 Maven 项目

我使用的一些依赖项包括 Spring 3 MVC、Spring Security、Hibernate 和 JPA。

我的 Web 应用程序和 API 都在每个应用程序中使用了大量相同的域模型、DAO 和服务。
他们都有自己独立的model、dao、service。

**结构：**

```
***Consumer App:***

-Model<br/>
..User.java<br/>
..Card.java<br/>
..Purchase.java<br/>
-Dao<br/>
..UserDAO.java<br/>
..CardDAO.java<br/>
..PurchaseDAO.java<br/>
-Services<br/>
..UserService.java<br/>
..CardService.java<br/>
..PurchaseService.java<br/>

***Admin App:***

Same with few different models, dao's and services.

***API Server:***

Same with few different models, dao's and services. 
```

用户：

```
@Entity
public class User implements Serializable
{
    /**
     * 
     */
    private static final long serialVersionUID = -5232533507244034448L;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    @NotEmpty
    @Size(min=2, max=15)
    private String firstname;

    @NotEmpty
    @Size(min=2, max=15)
    private String surname;

    @NotEmpty
    @Email
    private String email;

    @NotEmpty
    @Size(min=6, max=10)
    private String password;

    @OneToOne(mappedBy="user", cascade={CascadeType.ALL})
    private UserRole userRole;

    @OneToMany(mappedBy = "user", fetch = FetchType.EAGER, cascade = { CascadeType.ALL })
    private Set<Card> cards;

    @OneToMany(mappedBy = "user", fetch = FetchType.EAGER, cascade = { CascadeType.ALL })
    private Set<UserOffer> offers;

    @Temporal(TemporalType.TIMESTAMP)
    private Date dob;

    @NotEmpty
    private String sex;

        .......
} 
```

用户道：

```
@Repository
public class UserDAO extends AbstractJpaDAO<User> implements IUserDAO
{
    @PersistenceContext
    EntityManager entityManager;

    public UserDAO()
    {
        setClazz(User.class);
    }

    public User findOneByEmail(String email)
    {
        return (User) entityManager
                .createQuery("SELECT u FROM User u WHERE u.email = :email")
                .setParameter("email", email).getSingleResult();
    }
} 
```

用户服务：

```
@Service
public class UserService implements IUserService
{
    @Autowired
    private IUserDAO userDAO;

    public UserService()
    {

    }

    @Transactional
    public List<User> getAll()
    {
        return userDAO.findAll();
    }

    @Transactional
    public User getById(Long id)
    {
        return userDAO.findOne(id);
    }

        ...
} 
```

如您所见，我需要删除这些重复项，并在可能的情况下为每个模型、dao 和服务保留一份副本。

从 Web 应用程序和 API 中删除我的模型、dao 和服务并将它们放在应该作为 jar 包含的单独项目/模块中的最佳方法是什么？

有没有人建议如何处理和实施这个？

来自在多个 Spring 应用程序之间创建共享模块的经验丰富的人的简要概述会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T13:54:02.333

重复的代码，尤其是在如此大规模的情况下，总是一个坏主意。记住我的话。即使现在并不可怕，只要您必须修改其中一个共享类，它就会发生。您将立即遇到的问题：

*   更多的工作，需要在所有项目/类中复制更改
*   很容易犯错或忘记某事
*   在运行时和开发期间，不同步的类会让您头疼
*   未来的开发人员将不知道为什么要重复类以及细微的更改（由于不同步的修改）是否是故意的。

基本上你*必须*创建一个单独的模块（*通用*名称很好，*API*更好，与域相关的东西最好）并依赖它。这个单独的模块包含所有通用代码，并且构建为独立的 JAR，对客户端、服务器等没有任何依赖关系。

所有剩余的项目应该只依赖于公共工件。[maven](/questions/tagged/maven "显示标记为“maven”的问题")使用它来维护此类项目。

最后一个提示：普通 JAR 不仅可以包含类，还可以包含 XML 配置文件等资源。如果可以的话，也可以将通用配置文件提取到此 JAR 中，并将其简单地包含在每个客户端应用程序中。由于所有此类文件都将在 CLASSPATH 上可用，因此 Spring 不在乎它们来自何处。

# jsf-2 - Primefaces数据表：无法检索选定的行并且选择因分页而丢失

> ID：12652963
> 
> 赞同：0
> 
> 时间：2012-09-29T13:11:38.277
> 
> 标签：jsf-2, primefaces, pagination

我正在使用 primefaces 数据表进行基于复选框的选择，并尝试实现[给定的示例](http://www.primefaces.org/showcase/ui/datatableRowSelectionRadioCheckbox.jsf)。他们使用 Model 说，**userModel**可以实现 SelectableDataModel 接口。我不想使用模型，所以我为此使用**了 rowKey 。**

例如

数据表.xhtml

```
<p:dataTable id="table" var="item" value="#{userBean.allItems}"
       paginatorPosition="bottom" paginator="true" rows="3"
       selection="#{userBean.selectedItems}" rowKey="#{item[0]}">

       <p:column selectionMode="multiple"/>

       <p:columns value="#{userBean.itemColHeader}" columnIndexVar="colIndex" var="colName" >
       <f:facet name="header" >
           <h:outputText value="#{colName}"/>
       </f:facet>
           <h:outputText value="#{item[colIndex]}"/>
       </p:columns>
</p:dataTable> 
```

这里，

`allItems = ArrayList<ArrayList<String>>`

`selectedItems = ArrayList<ArrayList<String>>`

`selectedItems = ArrayList<String>`

用户Bean.java

```
@ManagedBean(name="userBean")
@ViewScoped
public class userBean implements SelectableDataModel {

    private ArrayList<ArrayList<String>> selectedItems;

    public ArrayList<ArrayList<String>> getSelectedItems() {
        return selectedItems;
    }

    public void setSelectedItems(ArrayList<ArrayList<String>> selectedUsers) {
        this.selectedItems = selectedItems;
    }
} 
```

我的问题：

```
1) When I select mulitple rows, selectedUsers remains empty.
2) After selecting next page, previous selection get lost. 
```

我浏览了@BelusC[博客](http://balusc.blogspot.in/2006/06/using-datatables.html)，发现绑定是可能的解决方案，但无法通过他的说明解决我的问题。是否需要转换器..？我的方法有什么问题吗。谢谢

**更新：1**

使用 Arraylist 的 Arraylist( **allItems** ) 的原因只是为了使数据表通用。在绘制数据表时，我不需要担心列数。这就是为什么我要检索不应依赖于对象的选定项目（[如](http://www.primefaces.org/showcase/ui/datatableRowSelectionRadioCheckbox.jsf)：car[] selectedcars）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T11:09:49.543

`rowKey="#{item[0]}"`对我来说没有意义。它将在每次迭代中指向相同的 (0) 对象。在 dataTable 演示中，它指向当前的`car.model`.

您是否尝试更改为#{item}？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T10:23:01.347

我有类似的问题，我使用`<p:ajax>`.

首先，我会按照 akoskm 所说的那样做，并拥有一个唯一的行键。

然后我会使用一个数组 ( `List<String>[]`) (`List`比`ArrayList`)更通用`selectedItems`

最后你可以添加：

```
<p:dataTable ...>
    <p:ajax event="rowSelectCheckbox" process="@this"/>
    <p:ajax event="rowUnselectCheckbox" process="@this"/>
    <p:ajax event="toggleSelect" process="@this"/>
</p:dataTable> 
```

只要确保你有一个`<h:form>`在桌子周围

这将确保组件将数据推送到 bean。我不确定它是否会解决分页问题，​​请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-05T20:15:49.490

正确答案：[仅选择复选框的 Primefaces 数据表](https://stackoverflow.com/questions/15128945/primefaces-datatable-with-checkbox-selection-only)

您可以使用解决此问题`rowSelectionMode="add"`

# f# - 我可以单独安装 F# 编译器吗？

> ID：12652975
> 
> 赞同：2
> 
> 时间：2012-09-29T13:12:54.700
> 
> 标签：f#

我希望安装 F# 编译器以在命令行上使用。有没有下载的地方，不用下载visual studio和所有其他的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T13:31:46.213

是的——至少，您可以轻松下载 F# 2.0 编译器： [https ://www.microsoft.com/en-us/download/details.aspx?id=600](https://www.microsoft.com/en-us/download/details.aspx?id=600)

F# 3.0 编译器的源代码最近在 Codeplex 上发布，因此如果您想使用该编译器，您需要下载它们并自己编译所有内容；或者您可以等待一个可下载的版本，它应该很快就会可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T13:41:10.733

[在没有 Visual Studio 2012 的情况下制作独立的 F# 3.0](https://stackoverflow.com/questions/12421873/is-there-a-way-to-install-f-3-0-without-visual-studio/14788567#14788567)

1.  首先，找到安装了 F# 3.0 的工作站。（来源）
2.  将所有内容复制到目标工作站。

> ```
> -> C:\Program Files (x86)\Microsoft SDKs\F#
> -> C:\Program Files (x86)\Reference Assemblies\Microsoft\FSharp
> -> C:\Windows\Microsoft.NET\assembly\GAC_MSIL\FSharp* 
> ```

3.  在目的地安装 .NET 4.5。
4.  将所有带有 FSC.exe 字符串的注册表项导出到目的地。
5.  将所有带有 FSharp 字符串的注册表项导出到目的地。

# r - 如何在 R 中引导戴明回归估计？

> ID：12652976
> 
> 赞同：3
> 
> 时间：2012-09-29T13:13:04.933
> 
> 标签：r, regression, statistics-bootstrap

我正在研究一个涉及变量误差（戴明）回归的咨询问题，以比较两种测量技术。详细信息在我在 CV 上提出的问题中给出。[这](https://stats.stackexchange.com/questions/38023/error-in-variables-regression-is-it-valid-to-pool-data-from-three-sites)是链接。Bill Huber 向我指出了解决戴明回归问题的`mcr`软件包。`cran`我被要求进行引导校正，因为某些数据点可能是相关的。

该网站上的任何专家都`R`可以告诉我如何将戴明回归嵌入到引导程序中吗？

# android - 我如何检查我的活动是否部分可见而不完全可见？

> ID：12652978
> 
> 赞同：0
> 
> 时间：2012-09-29T13:13:23.543
> 
> 标签：android

我有两个活动 A 和 BA 是应用程序类型活动，B 是对话框类型。当 A 处于前台并且 B 被调用时，A 进入前台并且调用它的 onPause 但不是 onStop。如果我的活动是部分可见而不是完全可见，那么有没有办法在我的 onPause 中知道？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T13:27:04.347

当您的活动可见并且任何其他对话框打开时，您的活动将暂停并且`onPause()`活动的方法将被调用。如果您的活动完全不可见`onStop()`，则将调用活动的方法。

# html - 如何增加 li inline-block list 元素之间的常量空间？

> ID：12652979
> 
> 赞同：1
> 
> 时间：2012-09-29T13:13:25.787
> 
> 标签：html, css, html-lists

默认情况下，如果所有方向的边距相同，则内联块列表项之间具有恒定的空格。我的问题是，如果我们必须使用 CSS，我们如何增加列表项之间的空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T14:37:07.853

方法#1：可以增加margin-left属性，从第2个LI开始：http: [//jsfiddle.net/Tw4LZ/](http://jsfiddle.net/Tw4LZ/)

方法 #2：将 UL 的 word-spacing/letter-spacing 更改为更高的值，然后将 LI 元素设置回“正常”：http: [//jsfiddle.net/Tw4LZ/1/](http://jsfiddle.net/Tw4LZ/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-11T08:19:10.363

尝试

```
font-size: 5em; 
```

它将增加行内块元素之间的空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-29T17:42:20.337

如果你想增加两个列表项之间的空间，你可以在 CSS 中轻松做到

```
li
  {
    margin-top : 2px;
  } 
```

您可以更改该值以适合所需列表之间的空间量。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-29T13:15:35.120

使用水平填充？`padding-left:5px`,`padding-right:5px;`

或者您可以使用相对定位和与左侧的距离：

```
ul li:nth-child(2) { /* second item */
    position:relative;
    left:5px;
}
ul li:nth-child(3) { /* third item */
    position:relative;
    left:10px;
}
ul li:nth-child(4) { /* fourth item */
    position:relative;
    left:15px;
} 
```

等等...

# jsf - org.xml.sax.SAXException：错误处理 /META-INF/primefaces-p.taglib.xml

> ID：12652980
> 
> 赞同：1
> 
> 时间：2012-09-29T13:13:32.020
> 
> 标签：jsf, primefaces, facelets

我正在尝试运行一个简单的 JSF（基于 PrimeFaces）应用程序。

主页面非常简单：

```
<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"

        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:p="http://primefaces.org/ui">
<head>
<title>Hello World</title>
</head>
<body>
        <p:editor />
</body>
</html> 
```

当我

1.  尝试使用`mvn jetty:run`和运行 Web 应用程序
2.  在浏览器中打开页面，

我收到以下错误：

```
java.io.IOException: Error parsing [jar:file:/C:/Users/DP118M/.m2/repository/org/primefaces/primefaces/3.4.1/primefaces-3.4.1.jar!/META-INF/primefaces-p.taglib.xml]:
        at com.sun.facelets.compiler.TagLibraryConfig.create(TagLibraryConfig.java:410)
        at com.sun.facelets.compiler.TagLibraryConfig.loadImplicit(TagLibraryConfig.java:431)
        at com.sun.facelets.compiler.Compiler.initialize(Compiler.java:87)
        at com.sun.facelets.compiler.Compiler.compile(Compiler.java:104)
        at com.sun.facelets.impl.DefaultFaceletFactory.createFacelet(DefaultFaceletFactory.java:197)
        at com.sun.facelets.impl.DefaultFaceletFactory.getFacelet(DefaultFaceletFactory.java:144)
        at com.sun.facelets.impl.DefaultFaceletFactory.getFacelet(DefaultFaceletFactory.java:95)
        at com.sun.facelets.FaceletViewHandler.buildView(FaceletViewHandler.java:517)
        at com.sun.facelets.FaceletViewHandler.renderView(FaceletViewHandler.java:567)
        at org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:115)
        at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:241)
        at javax.faces.webapp.FacesServlet.service(FacesServlet.java:199)
        at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
        at org.apache.myfaces.webapp.filter.ExtensionsFilter.doFilter(ExtensionsFilter.java:341)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
        at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)
        at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
        at org.mortbay.jetty.Server.handle(Server.java:326)
        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
        at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
        at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
        at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
        at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: org.xml.sax.SAXException: Error Handling [jar:file:/C:/Users/DP118M/.
m2/repository/org/primefaces/primefaces/3.4.1/primefaces-3.4.1.jar!/META-INF/primefaces-p.taglib.xml@5,17]
        at com.sun.facelets.compiler.TagLibraryConfig$LibraryHandler.error(TagLibraryConfig.java:376)
        at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:134)
        at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:384)
        at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:318)
        at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.rootElementSpecified(XMLDTDValidator.java:1621)
        at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.handleStartElement(XMLDTDValidator.java:1900)
        at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.startElement(XMLDTDValidator.java:764)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(XMLDocumentFragmentScannerImpl.java:1363)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$ContentDriver.scanRootElementHook(XMLDocumentScannerImpl.java:1318)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3103)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:922)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
        at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
        at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
        at javax.xml.parsers.SAXParser.parse(SAXParser.java:395)
        at javax.xml.parsers.SAXParser.parse(SAXParser.java:198)
        at com.sun.facelets.compiler.TagLibraryConfig.create(TagLibraryConfig.java:407)
        ... 31 more 
```

代码位于[https://dl.dropbox.com/u/11776689/2012_09_29_primefaces_app.zip](https://dl.dropbox.com/u/11776689/2012_09_29_primefaces_app.zip)。

我该如何解决这个错误？

**更新1：**

根据 BalusC 的建议，我注释掉了依赖项

```
<dependency>
    groupId>com.sun.facelets</groupId>
    <artifactId>jsf-facelets</artifactId>
    <version>1.1.14</version>
</dependency> 
```

在`pom.xml`.

代码中没有`faces-config.xml`（至少，我找不到）。

当我运行应用程序时，我收到另一个错误：

```
FATAL: Class com.sun.facelets.FaceletViewHandler not found
java.lang.ClassNotFoundException: com.sun.facelets.FaceletViewHandler
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        at org.codehaus.classworlds.RealmClassLoader.loadClassDirect(RealmClassLoader.java:195)
        at org.codehaus.classworlds.DefaultClassRealm.loadClass(DefaultClassRealm.java:255)
        at org.codehaus.classworlds.DefaultClassRealm.loadClass(DefaultClassRealm.java:274)
        at org.codehaus.classworlds.RealmClassLoader.loadClass(RealmClassLoader.java:214)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
        at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:401)
        at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:363)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:247)
        at org.apache.myfaces.shared.util.ClassUtils.classForName(ClassUtils.java:199)
        at org.apache.myfaces.shared.util.ClassUtils.simpleClassForName(ClassUtils.java:218)
        at org.apache.myfaces.shared.util.ClassUtils.buildApplicationObject(ClassUtils.java:515)
        at org.apache.myfaces.shared.util.ClassUtils.buildApplicationObject(ClassUtils.java:487)
        at org.apache.myfaces.config.FacesConfigurator.configureApplication(FacesConfigurator.java:551)
        at org.apache.myfaces.config.FacesConfigurator.configure(FacesConfigurator.java:416)
        at org.apache.myfaces.webapp.AbstractFacesInitializer.buildConfiguration(AbstractFacesInitializer.java:338)
        at org.apache.myfaces.webapp.Jsp21FacesInitializer.initContainerIntegration(Jsp21FacesInitializer.java:73)
        at org.apache.myfaces.webapp.AbstractFacesInitializer.initFaces(AbstractFacesInitializer.java:140)
        at org.apache.myfaces.webapp.StartupServletContextListener.contextInitialized(StartupServletContextListener.java:111)
        at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548)
        at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
        at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
        at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
        at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
        at org.mortbay.jetty.plugin.Jetty6PluginWebAppContext.doStart(Jetty6PluginWebAppContext.java:115)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
        at org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:152)
        at org.mortbay.jetty.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:156)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
        at org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:152)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
        at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
        at org.mortbay.jetty.Server.doStart(Server.java:224)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
        at org.mortbay.jetty.plugin.Jetty6PluginServer.start(Jetty6PluginServer.java:132)
        at org.mortbay.jetty.plugin.AbstractJettyMojo.startJetty(AbstractJettyMojo.java:441)
        at org.mortbay.jetty.plugin.AbstractJettyMojo.execute(AbstractJettyMojo.java:383)
        at org.mortbay.jetty.plugin.AbstractJettyRunMojo.execute(AbstractJettyRunMojo.java:210)
        at org.mortbay.jetty.plugin.Jetty6RunMojo.execute(Jetty6RunMojo.java:184)
        at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal(DefaultLifecycleExecutor.java:569)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:539)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
        at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        ... 
```

这个 FaceletViewHandler 在哪里使用？

这是更新的代码：[https ://dl.dropbox.com/u/11776689/2012_09_29_primefaces_app2.zip](https://dl.dropbox.com/u/11776689/2012_09_29_primefaces_app2.zip)

**解决方案：**

1）备份项目。

2）在 Maven 中重新创建它，如[http://myfaces.apache.org/build-tools/archetypes/myfaces-archetype-helloworld20/index.html](http://myfaces.apache.org/build-tools/archetypes/myfaces-archetype-helloworld20/index.html)中所述

1.  运行命令`mvn archetype:generate -DarchetypeCatalog=http://myfaces.apache.org`和
2.  `myfaces-archetype-helloworld20`从可用选项列表中进行选择。

3) 将 PrimeFaces 存储库和依赖项添加到`pom.xml`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T14:16:24.220

`com.sun.facelets.*`堆栈跟踪中的 存在表明您`jsf-facelets`在 web 应用程序的运行时类路径中拥有来自 Facelets 1.x 的 JAR 文件（并且您已`ViewHandler`在 web 应用程序的`faces-config.xml`! 中显式注册它）。

这个不对。从 JSF 2.0 开始，Facelets 已经捆绑在 JSF API/impl 库中（已移至`com.sun.faces.facelets.*`包中）。**删除**依赖项`jsf-facelets`及其`<view-handler>`从`faces-config.xml`. 一个干净的 JSF 2.0 / Facelets 设置可以*只*用`FacesServlet`in `web.xml`（甚至*没有*上下文参数和所有其他混乱）和一个空的`faces-config.xml`.

这个异常的原因基本上归结为 Facelets 2.0 兼容的标签库（如 PrimeFaces >=2.0）不能被 Facelets 1.x 识别。

在开始使用 JSF 2.0 时，请确保您没有查看 JSF 1.x 书籍/资源/示例。自 JSF 2.x 以来，很多事情都发生了变化，并且以不同的方式完成。[从我们的 JSF wiki 页面开始](https://stackoverflow.com/tags/jsf/info)。

# android - Android if else block 不会运行

> ID：12652981
> 
> 赞同：0
> 
> 时间：2012-09-29T13:13:35.640
> 
> 标签：android, if-statement, android-activity

我在启动时有一个应用程序，它执行 3 次检查（一切都发生在一个名为“应用程序”的单独文件中）：首先是互联网连接，然后是互联网连接类型，最后是应用程序启动主要活动的权限。

所有 3 项检查都正确通过，但是，在最后一次通过时，我得到了一个字符串值“False”，这很好，但是在启动屏幕中，当我想检查该值时，它不起作用。如果值为 false，我确实设置了 if block 以启动另一个活动，但它没有，它只是忽略该块。

这是代码：

```
 public void onCreate(Bundle savedInstanceState) {
    setFullScreen();
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout_activity_init);
    if(APP.connectionCheck(InitActivity.this) == "TRUE"){
        JSONObject JOBJC = APP.getJSON(APP.defaultUrl());
        String result = APP.checkPermission(JOBJC);
        if(result=="false"){
            Intent i = new Intent(this,app.pcg.notation.Notation.class);
            startActivity(i);
            finish();
        }else if(result=="true"){

        }
    }else{
        Intent i = new Intent(this,app.pcg.notation.Notation.class);
        startActivity(i);
        finish();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T13:15:17.113

改成这个`result.equals("false") or result.equalsIgnoreCase("false")`。您不能使用`==`运算符比较字符串。

对 else 部分做同样的事情。

`result.equals("true") or result.equalsIgnoreCase("true")`

**编辑代码**

```
if(APP.connectionCheck(InitActivity.this).equalsIgnoreCase("true")){
        JSONObject JOBJC = APP.getJSON(APP.defaultUrl());
        String result = APP.checkPermission(JOBJC);
        if(result.equalsIgnoreCase("false")){
            Intent i = new Intent(this,app.pcg.notation.Notation.class);
            startActivity(i);
            finish();
        }else if(result.equalsIgnoreCase("true")){

        }
    }else{
        Intent i = new Intent(this,app.pcg.notation.Notation.class);
        startActivity(i);
        finish();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T13:15:30.410

您无法在 Java 中将`String`s 与 s 进行比较。`==`改为使用`String.equals()`。

请参阅[如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)一个很好的解释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T13:15:32.000

字符串比较必须用`.equals()`. 使用`==`对象比较指针值（即它是同一个对象吗？）而不是值。

所以，`if(APP.connectionCheck(InitActivity.this).equals("TRUE"))`...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T13:19:32.457

总是使用**equals();** 当您比较两个字符串时

因为`==`运算符检查对对象的引用，同时`equals()`检查其值。

你会得到正确的结果

```
if( APP.connectionCheck(InitActivity.this).equals("true"))
{
} 
```

或者

```
if( APP.connectionCheck(InitActivity.this).equalsIgnoreCase("true"))
{
} 
```

# facebook - 发送 Facebook 请求并获得礼物 FB API

> ID：12652986
> 
> 赞同：2
> 
> 时间：2012-09-29T13:13:59.640
> 
> 标签：facebook, facebook-graph-api, request, facebook-javascript-sdk

我已经按照[此处的文档在 facebook 上为我的应用程序实现了“发送请求”功能](http://developers.facebook.com/docs/reference/dialogs/requests/)

现在，如果用户“A”接受用户“B”发送给他的请求，我希望用户“B”获得特定于应用程序的礼物（图片）。我的问题是，我怎么知道是用户“B”邀请了用户“A”？（而不是用户'C'）

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T14:15:02.000

将请求 ID 与发起请求的用户 B 一起存储在您的数据库中。

当用户 A 点击请求时，他们将被重定向到您的应用，Facebook 将向您发送请求 ID。在您的数据库中查找请求 ID 以获取发起的用户。

获取请求 ID 的一些示例包含在[有关删除请求的 Facebook 文档](http://developers.facebook.com/docs/requests/#deleting)中。

虽然不是技术性的，但您可能还想查看有关请求最佳实践的文档，其中包含[有关赠礼的部分](http://developers.facebook.com/docs/guides/games/requests/#gifting)。

另一种方法是从图形 api 获取发件人（注意这几乎总是比上述解决方案慢）。通过将 user_id 连接到 request_id，您可以获得特定的请求对象 ID，并且您可以`GET`向图形 API 发出请求，如下所示：

```
https://graph.facebook.com/<REQUEST_OBJECT_ID>?access_token=APP_ACCESS_TOKEN 
```

在响应中，发件人在`from`属性中：

```
{
  "id": "259855964134806_4", 
  "application": {
    "name": "Betcafe",
    "namespace": "betcafe-play", 
    "id": "240039049434634"
  }, 
  "to": {
    "name": "Zuck", 
    "id": "4"
  }, 
  "from": {
    "name": "Todd Chaffee", 
    "id": "532338216"
  }, 
  "message": "Join my team so we can pass balls to each other and help Milan win the weekly cup!", 
  "created_time": "2012-09-10T16:43:45+0000"
} 
```

# javascript - 将类添加到带有标题的链接

> ID：12652995
> 
> 赞同：0
> 
> 时间：2012-09-29T13:15:35.007
> 
> 标签：javascript, jquery, jquery-selectors

所以我正在为我的客户创建一个站点，并且我正在设计子菜单。我的问题是子菜单链接只包含标题和href，这对我不起作用。

*JS*

```
<script>
$(document).ready(function(){
$('a').removeClass("valittu");
$('a [title="Taaperokurssi"]).addClass("valittu");
});
</script> 
```

*HTML*

```
<a title="Taaperokurssi" href="xxx">Taaperokurssi</a>
<a title="Junnukurssi" href="xxx">Junnukurssi</a>
<a title="Yhteiseloa myötäkarvaan" href="xxx">Yhteiseloa myötäkarvaan</a>
<a title="Lapsi ja koira" href="xxx">Lapsi ja koira</a>
<a title="Pentutoko" href="http://hurttiajahuumoria.fi/kurssit/sujuva-arki/pentutoko">Pentutoko</a>
<a title="Aktivoi tokolla" href="xxx">Aktivoi tokolla</a>
<a title="Rallytoko" href="xxx">Rallytoko</a> 
```

还有一把[小提琴](http://jsfiddle.net/LUSgd/1/)。

我认为我可以将 CSS 选择器与 jQuery 一起使用？

我有 jQuery，不应该是这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T13:17:30.047

删除 和 之间的`a`空格`[`。有空格意味着选择带有 title 属性的标签的后代`Taaperokurssi`。

```
$('a[title="Taaperokurssi"]').addClass("valittu"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T13:18:30.687

您的代码中存在语法错误，您错过了*文档*`)`选择器，您还应该删除选择器之间的空格：

 *```
$(document).ready(function() {
 //  -----^
     $('a').removeClass("valittu");
     $('a[title="Taaperokurssi"]').addClass("valittu");
 //  ----^
}); 
```

[http://jsfiddle.net/y5Ymf/](http://jsfiddle.net/y5Ymf/)*

# c++ - 检索 C++ 向量中的第一个元素

> ID：12652997
> 
> 赞同：2
> 
> 时间：2012-09-29T13:15:40.437
> 
> 标签：c++, vector, iterator, std

我编写了一个包装类来对类型向量执行插入/删除操作。编码：

```
class GenericSymbolTable {
   public:
       virtual void pushBackAtom(Atom *atom) = 0;
       virtual Atom* peekAtom(void) = 0;
       virtual Atom* getAtom(void) = 0;

   protected:
      ~GenericSymbolTable(void){}
};

class SymbolTable : public GenericSymbolTable {
   private:
       vector<Atom*> atoms;

   protected:
       ~SymbolTable(void);

   public:
       void pushBackAtom(Atom *atom);
       Atom* peekAtom(void);
       Atom* getAtom(void);
}; 
```

在为这些方法编写实现时，编译器会抛出冲突的类型错误：

```
 Atom* SymbolTable::peekAtom(void) {
      if(atoms.empty()) {
          cout << "\t[W] Simbol table does not contain any atoms" << endl;
          return NULL;
      }

      Atom* first = atoms.begin(); // <== type error
      return first;
   }

   Atom* SymbolTable::getAtom(void) {
      if(atoms.empty()) {
          cout << "\t[W] Simbol table does not contain any atoms" << endl;
          return NULL;
      }

      Atom* first = atoms.begin(); // <== type error
      atoms.erase(atoms.begin());
      return first;
   } 
```

错误消息：无法在初始化中将 'std::vector::iterator {aka __gnu_cxx::__normal_iterator >}' 转换为 'Atom*'

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-29T13:18:21.590

```
 Atom* first = atoms.begin(); // <== type error 
```

这设置`first`等于一个迭代器。您想将其设置为等于迭代器指向的对象。尝试：

```
 Atom* first = *(atoms.begin()); 
```

或者：

```
 Atom* first = atoms.front(); 
```

因为这是一个 的向量`Atom*`，所以它的迭代器指向`Atom*`s。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-29T13:18:26.887

`std::vector::begin`不返回向量的第一个元素，它返回一个可用于遍历向量的迭代器（指向第一个元素）。

您正在寻找的方法很可能是[`std::vector::front()`](http://www.cplusplus.com/reference/stl/vector/front/).

# c# - 通过 NoRM 从 MongoDB 获取原始文档

> ID：12652998
> 
> 赞同：1
> 
> 时间：2012-09-29T13:15:46.663
> 
> 标签：c#, mongodb, norm

如何通过 MongoDB 的 NoRM 驱动程序或任何其他方式获取原始文档？

就像我在 shell 上运行命令一样

```
db.test.find({id:"235272479242"}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T04:09:19.100

相当于按 Id 获取单个文档的 NoRM 将是：

```
 db.GetCollection<test>().FindOne(new { Id = "235272479242" }); 
```

请注意，NoRM 已经好几年没有更新了，并且[不再](https://github.com/atheken/NoRM)受到原始开发人员的支持。

值得研究[支持 10gen 的 MongoDB C# / .NET 驱动程序](http://www.mongodb.org/display/DOCS/CSharp+Language+Center)，该驱动程序得到积极维护并支持最新的 MongoDB 服务器功能。

# jquery - 为什么我无法使用 GET 向 WebMethod 发送参数？

> ID：12652999
> 
> 赞同：2
> 
> 时间：2012-09-29T13:16:16.260
> 
> 标签：jquery, asp.net, ajax, web-services, getmethod

我的 WebMethod 看起来像这样：

```
[WebMethod]
[ScriptMethod(ResponseFormat=ResponseFormat.Json, UseHttpGet=true)]
public List<Person> HelloWorld(string hello)
{
   List<Person> persons = new List<Person> 
   {
      new Person("Sarfaraz", DateTime.Now),
      new Person("Nawaz", DateTime.Now),
      new Person("Manas", DateTime.Now)
   };
   return persons;
} 
```

我正在尝试使用 jQuery 调用此方法：

```
var params={hello:"sarfaraz"}; //params to be passed to the WebMethod
$.ajax
({
    type: "GET",   //have to use GET method
    cache: false,
    data: JSON.stringify(params),
    contentType: "application/json; charset=utf-8",
    dataType: 'json',
    url: "http://localhost:51519/CommentProviderService.asmx/HelloWorld",
    processData: true,
    success: onSuccess,
    error: onError      //it gets called!
}); 
```

但它不起作用。它不是调用`onSuccess`回调，而是调用`onError`我`alert`用作：

```
alert(response.status + " | " + response.statusText + " | " + response.responseText + " | " + response.responseXML ); 
```

打印这个：

> 500 | 内部服务器错误 | **{"Message":"无效的 Web 服务调用，缺少参数值：\u0027hello\u0027。"** ,"StackTrace":" 在 System.Web.Script.Services.WebServiceMethodData.CallMethod（对象目标，IDictionary `2 parameters)\r\n at System.Web.Script.Services.WebServiceMethodData.CallMethodFromRawParams(Object target, IDictionary`2 参数）\r\n 在 System.Web.Script.Services.RestHandler.InvokeMethod（HttpContext 上下文，WebServiceMethodData methodData，IDictionary `2 rawParams)\r\n 在 System.Web.Script.Services.RestHandler.ExecuteWebServiceCall(HttpContext context, WebServiceMethodData methodData)","ExceptionType":"System.InvalidOperationException"} | 不明确的

我不明白为什么我会收到这个错误。

如果我将 jQuery 调用更改为使用`POST`method 和 make `UseHttpGet=false`，那么效果很好。但我希望它与`GET`. 需要修复什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T13:43:18.820

HTTP GET 期望参数全部编码在 URL 中。

问题是您正在对有效负载执行[JSON.stringify](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)。[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)实际上只是在寻找可以将其转换为一系列查询字符串参数的简单字典。

因此，如果您有这样的对象：

```
{ name: "value" } 
```

jQuery 会将它附加到 URL 的末尾，如下所示：

```
?name=value 
```

使用 Firebug、Chrome 开发人员工具或 IE 开发人员工具检查传出 URL，我怀疑您会看到它采用 ASP.Net 无法翻译的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T04:05:54.183

要在 GET 中发出 $.ajax 请求，您必须将数据设置为`params="hello=sarfaraz"`

所以完整的代码片段可以简单地是

```
var params="hello=sarfaraz"; //params to be passed to the WebMethod
$.ajax
({
    type: "GET",   //have to use GET method
    cache: false,
    data: params,
    dataType: 'json',
    url: "http://localhost:51519/CommentProviderService.asmx/HelloWorld",
    success: onSuccess,
    error: onError    //it gets called!
}); 
```

希望有帮助！