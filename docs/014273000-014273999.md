# StackOverflow 问答 14273000-14273999

# django - django-models 数据库排序规则问题：声明一个支持 unicode 的字段？

> ID：14273003
> 
> 赞同：0
> 
> 时间：2013-01-11T06:38:07.340
> 
> 标签：django, django-models, collation, django-database

我遇到了这个问题。当我无法将 unicode 字符串分配给`models.CharField`.

```
DatabaseError: (1267, "Illegal mix of collations (latin1_swedish_ci,IMPLICIT) and (utf8_general_ci,COERCIBLE) for operation '='") 
```

我找到[了这个解决方案](https://stackoverflow.com/questions/1073295/django-character-set-with-mysql-weirdness)，但它似乎对我不起作用。数据库返回此错误：

```
Error Code: 1025\. Error on rename of './test_database/#sql-272e_1ba' to './test_database/[MY_TABLE_NAME]' (errno: 150) 
```

此外，所有这些解决方案似乎只有在创建表后才能工作，或者修改 python manage.py sql APP_NAME 输出并手动创建表。

有没有办法从最初在 python 代码中声明 django 模型时解决这个问题，所以 manage.py syncdb 只会生成正确的表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:08:53.813

This seems to be an issue with your database configuration, not with Django. My guess is that whatever DB you're using, it's configured to use latin1_swidish_ci for new tables. You can [hook syncdb](https://docs.djangoproject.com/en/dev/howto/initial-data/#providing-initial-sql-data) and alter the table there, but I think your better off fixing your DB config directly.

# c# - 查找面板上可见图像的 xy 坐标

> ID：14273008
> 
> 赞同：1
> 
> 时间：2013-01-11T06:38:20.443
> 
> 标签：c#, desktop-application

目前，我正在使用面板来显示图像。我已经实现了通过鼠标缩放和移动图像的逻辑。我的问题是，当我缩放或移动图像时，我只想裁剪并保存面板上可见的图像部分。

这是我用来缩放和移动图像的代码，

```
 namespace ImageZooming
{
    public partial class Form2 : Form
    {
        public class overRidePanel : Panel
        {
            protected override void OnPaintBackground(PaintEventArgs pevent) { }
        }
        Bitmap bitmap;
        BufferedGraphicsContext currentContext;
        BufferedGraphics myBuffer;
        PointF viewPortCenter;
        float Zoom = 1.0f;
        string sFilePath;
        bool draging = false;
        Point lastMouse;
        int cropX;
        int cropY;
        byte[] MyData = new byte[0];
        public Form2()
        {
            InitializeComponent();
            this.panel1.MouseWheel += new MouseEventHandler(panel1_MouseWheel);
            currentContext = BufferedGraphicsManager.Current;
            setup(false);
        }
        private void setup(bool resetViewport)
        {
            if (myBuffer != null)
                myBuffer.Dispose();
            myBuffer = currentContext.Allocate(this.panel1.CreateGraphics(), this.panel1.DisplayRectangle);
            if (bitmap != null)
            {
                if (resetViewport)
                    SetViewPort(new RectangleF(0, 0, bitmap.Width, bitmap.Height));
            }
            this.panel1.Focus();
            this.panel1.Invalidate();
        }
        private void SetViewPort(RectangleF worldCords)
        {
            //Find smallest screen extent and zoom to that
            if (worldCords.Height > worldCords.Width)
            {
                //Use With as limiting factor
                this.Zoom = worldCords.Width / bitmap.Width;
            }
            else
                this.Zoom = worldCords.Height / bitmap.Height;

            viewPortCenter = new PointF(worldCords.X + (worldCords.Width / 2.0f), worldCords.Y + (worldCords.Height / 2.0f));
            //  this.toolStripStatusLabel1.Text = "Zoom: " + ((int)(this.Zoom * 100)).ToString() + "%";

        }
        private void SetViewPort(Rectangle screenCords)
        {
        }
        private void PaintImage()
        {
            if (bitmap != null)
            {
                float widthZoomed = panel1.Width / Zoom;
                float heigthZoomed = panel1.Height / Zoom;

                //Do checks the reason 30,000 is used is because much over this will cause DrawImage to crash
                if (widthZoomed > 30000.0f)
                {
                    Zoom = panel1.Width / 30000.0f;
                    widthZoomed = 30000.0f;
                }
                if (heigthZoomed > 30000.0f)
                {
                    Zoom = panel1.Height / 30000.0f;
                    heigthZoomed = 30000.0f;
                }

                //we stop at 2 because at this point you have almost zoomed into a single pixel
                if (widthZoomed < 2.0f)
                {
                    Zoom = panel1.Width / 2.0f;
                    widthZoomed = 2.0f;
                }
                if (heigthZoomed < 2.0f)
                {
                    Zoom = panel1.Height / 2.0f;
                    heigthZoomed = 2.0f;
                }

                float wz2 = widthZoomed / 2.0f;
                float hz2 = heigthZoomed / 2.0f;
                Rectangle drawRect = new Rectangle(
                    (int)(viewPortCenter.X - wz2),
                    (int)(viewPortCenter.Y - hz2),
                    (int)(widthZoomed),
                    (int)(heigthZoomed));

                //this.toolStripStatusLabel1.Text = "DrawRect = " + drawRect.ToString();

                myBuffer.Graphics.Clear(Color.White); //Clear the Back buffer

                //Draw the image, Write image to back buffer, and render back buffer
                myBuffer.Graphics.DrawImage(bitmap, this.panel1.DisplayRectangle, drawRect, GraphicsUnit.Pixel);
                myBuffer.Render(this.panel1.CreateGraphics());
                // this.label1.Text = "Zoom: " + ((int)(this.Zoom * 100)).ToString() + "%";   //to show zooming %
            }
        }
        private void Form1_Resize(object sender, EventArgs e)
        {
            setup(false);
        }

        private void button1_Click(object sender, EventArgs e)
        {
            OpenFileDialog fdg = new OpenFileDialog();
            if (fdg.ShowDialog() == DialogResult.OK)
            {
                bitmap = (Bitmap)Bitmap.FromFile(fdg.FileName);
                setup(true);
            }
            sFilePath = fdg.FileName;
        }

        private void panel1_MouseDown(object sender, MouseEventArgs e)
        {

            if (e.Button == MouseButtons.Left)
                draging = true;
        }
       // public Pen cropPen;
        private void panel1_MouseMove(object sender, MouseEventArgs e)
        {
            //cropPen=new Pen(Color.Black,1);
            //cropX = e.X;
            //cropY = e.Y;
            if (draging)
            {

                viewPortCenter = new PointF(viewPortCenter.X + ((lastMouse.X - e.X) / Zoom), viewPortCenter.Y + ((lastMouse.Y - e.Y) / Zoom));
                panel1.Invalidate();
            }
            //panel1.CreateGraphics().DrawRectangle(cropPen, 0, 0, panel1.Width, panel1.Height);
            lastMouse = e.Location;
        }

        private void panel1_MouseUp(object sender, MouseEventArgs e)
        {
            if (e.Button == MouseButtons.Left)
                draging = false;
        }

        private void panel1_Paint(object sender, PaintEventArgs e)
        {
            PaintImage();
        }

        private void panel1_MouseWheel(object sender, System.Windows.Forms.MouseEventArgs e)
        {
            Zoom += Zoom * (e.Delta / 1200.0f); 
            if (e.Delta > 0 && e.Delta < 0) 
                viewPortCenter = new PointF(viewPortCenter.X + ((e.X - (panel1.Width / 2)) / (2 * Zoom)), viewPortCenter.Y + ((e.Y - (panel1.Height / 2)) / (2 * Zoom)));
            this.panel1.Invalidate();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-10T09:59:38.137

在面板中可见的图像坐标已经写在上面的代码中：即

```
Rectangle drawRect = new Rectangle(
                    (int)(viewPortCenter.X - wz2),
                    (int)(viewPortCenter.Y - hz2),
                    (int)(widthZoomed),
                    (int)(heigthZoomed)); 
```

从上面的代码中，您可以找到 drawRect 的 X 和 Y 坐标及其宽度和高度。

```
 X=drawRect.X;
  Y=drawRect.Y;
  width=widthZoomed;
  height=heightZoomed; 
```

# android - 为什么我的 android 应用程序的静态变量有时会返回 null？

> ID：14273011
> 
> 赞同：2
> 
> 时间：2013-01-11T06:38:24.623
> 
> 标签：android, sharedpreferences, static-variables

我试图从 SharedPreferences 中获取值并将其存储在静态变量中。问题是有时我从静态变量中获取空值，但 SharedPreferences 具有价值。我通过这个过程存储了价值：

```
 SharedPreferences sp = u.returnShare();
    SharedPreferences.Editor editor = sp.edit();

    StaticVariables.userId = sp.getString("UserId", "default"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T06:47:16.643

不要使用静态变量，这是不好的做法。Android 可以随时销毁您应用程序的进程，然后在必要时通过重新创建活动来重新创建它。如果您在“第一个”活动中创建静态变量，那么当第 2 个或第 3 个活动首先启动时它不会被初始化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T06:47:24.997

静态变量在 android 中不是一个好的长期存储。系统可能会在您的应用程序处于后台时随时终止它（例如，当其他任务需要内存时）。当应用程序重新启动时，所有存储在静态变量中的值都会消失。

# security - 具有非本地位置的 AIR HTML 控件不作为应用程序沙箱运行

> ID：14273012
> 
> 赞同：0
> 
> 时间：2013-01-11T06:38:27.587
> 
> 标签：security, air

我的主窗口上有 HTML 控件，如下所示：

```
<mx:HTML 
    id="hidHTML"
    location="http://localhost/index.html"
    enabled="true"
    paddingLeft="0"
    paddingRight="0"
    width="100%" height="100%"/> 
```

index.html 的内容是：

```
<!DOCTYPE html>
<html>
<head>
    <script>
        window.runtime.trace("wrong sandbox");
    </script>
</head>
<body>
    "remote" file
</body>
</html> 
```

打开应用程序让我：

```
TypeError: Result of expression 'window.runtime' [undefined] is not an object. 
```

将位置更改为“index.html”并在我的应用程序目录中有 index.html（index.html 中的内容相同）让我：

```
wrong sandbox 
```

显然，当位置设置为应用程序目录以外的其他内容时，AIR 已经改变了沙盒安全性。有趣的是，我在手册中找不到任何关于它的内容：

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/HTML.html#location](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/HTML.html#location)

我也找不到任何可以将沙盒安全设置回应用程序的东西，即 mx:HTML 的任何属性或方法。

有谁知道我如何获得 mx:HTML 的应用程序安全性或找到有关它为什么不在应用程序中运行的文档及其背后的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:56:37.327

在这里您可以找到所有安全知识：

[Adobe AIR 中的 HTML 安全性](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118666ade46-7f11.html)

# javascript - 如何在没有 jquery 的情况下获得固定元素的位置？

> ID：14273013
> 
> 赞同：9
> 
> 时间：2013-01-11T06:38:28.620
> 
> 标签：javascript, position, fixed

**你好呀**

我有一个位置固定的元素，我无法检测位置，必须清楚地使用 javascript，没有框架（jquery、mootools 等）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-09-23T13:32:19.317

利用：

```
var boundingBox = node.getBoundingClientRect(); 
```

查看结果，您有一个像这样的对象：

```
top    : 0,
right  : 0,
bottom : 0,
left   : 0,
width  : 0,
height : 0 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-11T06:41:06.773

这有帮助吗：

```
document.getElementById('id').offsetLeft // + window.scrollX
document.getElementById('id').offsetTop // + window.scrollY 
```

你可能想看看：**[这个问题](https://stackoverflow.com/questions/442404/dynamically-retrieve-the-position-x-y-of-an-html-element)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T06:44:34.517

```
function findPos(obj) {

    var curleft = curtop = 0;

    if (obj.offsetParent)
    do {
        curleft += obj.offsetLeft;
        curtop += obj.offsetTop;

    } while (obj = obj.offsetParent);

    return [curleft,curtop];
} 
```

[http://www.quirksmode.org/js/findpos.html](http://www.quirksmode.org/js/findpos.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-03T20:43:57.037

对于跨平台解决方案，您可能需要查看微框架[`Popper.js`](https://popper.js.org/)源。我通过尝试解决这个 popper 问题找到了你的问题，但我相信它适用于任何固定元素。

# android - 手机休眠时收到短信

> ID：14273015
> 
> 赞同：0
> 
> 时间：2013-01-11T06:38:55.700
> 
> 标签：android

我有一个应用程序接收短信（通过 BroadCastReceiver）并启动一个 Activity 来处理传入的短信（包括播放声音以通知用户、更新数据库和向用户显示消息）。

问题是有时该应用程序没有运行并且手机处于睡眠状态，我什么也没有收到，但一旦我解锁屏幕，我就会收到 4 或 5 条消息！

编辑：广播接收器的定义：

```
 <receiver
        android:name=".util.sms.SmsReceiver"
        android:enabled="true" >
        <intent-filter android:priority="999" >
            <action android:name="android.intent.action.DATA_SMS_RECEIVED" />
            <data android:scheme="sms" />
            <data android:port="56790" />
        </intent-filter>
    </receiver> 
```

我的活动的定义：

```
 <activity
        android:name=".MyActivity"
        android:launchMode="singleInstance">
    </activity> 
```

内部活动：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
            // ...
            handleNewMessage(this.getIntent());
    }

@Override
public void onNewIntent (Intent intent) {
    super.onNewIntent(intent);
    handleNewMessage(intent);       
} 
```

从 BroadcastReceiver 启动 MyActivity：

```
@Override
public void onReceive(Context context, Intent intent) {
        //...
        if( smsIsMine() ) {
    Intent intent = new Intent();
    intent.putExtra("MESSAGE_BODY", sms.getBody());
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    intent.setClass(context, MyActivity.class);
    context.startActivity(intent);                
        }
    } 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:42:56.663

在 Manifest 中注册您的接收方。像这样：

```
<receiver android:name="com.app.SMSReceiver" android:enabled="true"> 
        <intent-filter android:priority="999"> 
            <action android:name="android.provider.Telephony.SMS_RECEIVED"/> 
        </intent-filter> 
    </receiver> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T13:55:16.993

解决方案是使用 WakeLock 如下"

```
@Override
public void onReceive(Context context, Intent intent) {
    PowerManager powerManager = (PowerManager)                             context.getSystemService(Context.POWER_SERVICE);
    PowerManager.WakeLock wl = powerManager.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "");
    wl.acquire();
    // your code ...
    wl.release();
} 
```

# delegates - 代表程序（编写程序以使用代表三三两两计数）不起作用

> ID：14273016
> 
> 赞同：1
> 
> 时间：2013-01-11T06:38:56.430
> 
> 标签：delegates

所以，这个程序没有打印任何东西，我认为这是因为我需要放置`console.writeline()`但我不知道在哪里放置它或在`()`. 这是到目前为止的程序：

```
Module Module1
Public Delegate Sub MyDelegate()
Sub Main()
    Dim Fns As MyDelegate
    Fns = New MyDelegate(AddressOf FnsTwos)
    Fns()
    Fns = New MyDelegate(AddressOf FnsThrees)
    Fns()
End Sub
Sub FnsTwos()
    Dim x As Integer
    x = x + 2
    Do While 0 < x < 100
    Loop
    Stop
End Sub
Sub FnsThrees()
    Dim x As Integer
    x = x + 3
    Do While 0 < x < 100
    Loop
    Stop
End Sub
End Module 
```

# iphone - iPhone webapp禁用触摸并按住以保存图像

> ID：14273018
> 
> 赞同：0
> 
> 时间：2013-01-11T06:38:59.087
> 
> 标签：iphone, web-applications, mobile

我有一个小问题。我有一个适用于 iPhone 的移动网络应用程序...我的移动网站需要用户能够触摸并按住图像才能将其保存到手机中。但是，当作为网络应用程序打开时，与普通的 safari 浏览器不同，当您触摸按住和图像时，不会出现保存图像的对话框。

触摸并按住图像时，我需要出现此对话框...

有什么帮助让它工作吗？提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:43:30.123

首先检测用户点击图片并实际找出他们点击的图片网址。之后使用下面的代码下载并保存图像。检测图像使用此链接中的代码：[自定义 Uiwebview](http://iky1e.tumblr.com/post/5109242276/tutorial-customise-uiwebview-menu)。

```
UIImage * downloadImage = [[UIImage alloc] initWithContentsOfFile:path];
UIImageWriteToSavedPhotosAlbum(downloadImage,nil, nil, nil);

UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Saved" message:@"Wallpaper saved to your Gallery." delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil, nil];
[alert show]; 
```

它会将您的图像保存在图库中。

来源：[UIWebView，启用触摸保存图像，如在移动 Safari 中](https://stackoverflow.com/questions/12912617/uiwebview-enable-touch-hold-save-image-like-in-mobile-safari)

你也可以试试这个链接：[自定义 Uiwebview](http://iky1e.tumblr.com/post/5109242276/tutorial-customise-uiwebview-menu)

# c# - 一个 CSV 文件可以包含多少行？

> ID：14273020
> 
> 赞同：2
> 
> 时间：2013-01-11T06:39:10.727
> 
> 标签：c#

CSV 文件可以包含的最大行数是多少？

我想知道一个具体的数字，因为我的要求是允许最大数量的条目。这个数字是取决于操作系统，还是大小是固定的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T06:42:01.787

CSV 是一种文本格式。对文件大小以及列数或行数没有正式限制。如果您想要一些“正式”声明，最官方的规范是[RFC4180 。](https://www.rfc-editor.org/rfc/rfc4180)

读取文件的文件系统和程序可以施加自己的限制。即许多快速编写的工具无法正确处理大于 2Gb 的文件（整数大小限制），许多首先将内容读取到内存的工具将达到内存限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T07:10:33.350

添加到@Alexei 答案我想指定您可以使用它[`BinaryReader`](http://msdn.microsoft.com/en-in/library/system.io.binaryreader.aspx)来查找总行数（对于大于 2GB 的文件）。

```
 BinaryReader reader = new BinaryReader(File.OpenRead(@"C:\test.csv"));
 char lastChar = reader.ReadChar();
 char newChar = new char();
 int lineCount = 0;
 do 
 {
    newChar = reader.ReadChar();
    if (lastChar == '\r' && newChar == '\n')
    {  
        lineCount++;
    }
    lastChar = newChar;
 }  while( reader.PeekChar() != -1); 
```

# sql - MSDB 数据库处于 recovery_pending 状态，我没有 msdb 的备份？

> ID：14273029
> 
> 赞同：0
> 
> 时间：2013-01-11T06:39:40.270
> 
> 标签：sql, sql-server, database-administration

我的 SQL Server 2008 开发版出现 Microsoft SQL Server Error 945 错误，它处于 Recovery_Pending 状态。它要求恢复或恢复日志文件，但我没有 msdb 数据库的备份。我现在该怎么办 。我无法在对象资源管理器中查看我的数据库列表，并且 sql 代理服务也不可见。

请帮帮我。

谢谢 ，

尼特什·库马尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:09:27.333

BOL 中有一篇文章：[重建系统数据库](http://msdn.microsoft.com/en-us/library/dd207003%28v=sql.100%29.aspx)。

# html - HTML iframe 包含

> ID：14273030
> 
> 赞同：1
> 
> 时间：2013-01-11T06:39:41.680
> 
> 标签：html, iframe, streaming

我正在包含一个指向 HTML 文件的外部 URL，该 URL 具有在线流式传输，流式传输工作正常，但是当我将它嵌入到我的 html 中时，它丢失了流式传输。

网址：[http ://www.eboundservices.com:8888/iframe/connect/iframe.php?app=khybernews&stream=khybernews&screen=khybernews](http://www.eboundservices.com:8888/iframe/connect/iframe.php?app=khybernews&stream=khybernews&screen=khybernews)

如何使嵌入成为可能。

# ios - 需要帮助将 MYClass 对象存储在核心数据中

> ID：14273032
> 
> 赞同：0
> 
> 时间：2013-01-11T06:39:57.330
> 
> 标签：ios, objective-c, core-data

我正在尝试将我的类实例保存到 coredata

```
MYClass *myClassObject = [[MYClass alloc]init]; 
```

我将属性类型定义为可转换

创建 NSValueTransformable 的新子类

实现了它的四种方法

```
+ (BOOL)allowsReverseTransformation
{
    return YES;
}

+ (Class)transformedValueClass
{
    return [NSData class];
}

- (id)transformedValue:(id)value
{
}

- (id)reverseTransformedValue:(id)value
{
} 
```

在属性检查器中设置子类

我不知道在这些方法中实现什么

```
- (id)transformedValue:(id)value
{
    // ?
}

- (id)reverseTransformedValue:(id)value
{
    // ?
} 
```

所以我可以保存和获取对象。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-11T07:18:21.960

根据我的说法，最简单的方法是通过 NSCoding。您可以参考下面的链接进行 NSCoding 实现，本教程基本上是将类实例保存到 plist 但在您的情况下，您可以将其保存在核心数据中. [http://www.raywenderlich.com/1914/how-to-save-your-app-data-with-nscoding-and-nsfilemanager](http://www.raywenderlich.com/1914/how-to-save-your-app-data-with-nscoding-and-nsfilemanager)

# c# - 如何仅使用 2 替换替换完全匹配的字符串

> ID：14273033
> 
> 赞同：4
> 
> 时间：2013-01-11T06:40:08.843
> 
> 标签：c#

我正在尝试替换字符串，但由于匹配的单词很少，它正在替换两个字符串。

```
Val1 = "CASE WHEN [" + isParent + "] = 0 THEN 'False' WHEN [" + isParent + "] = 1 THEN 'True' END ";
Val2 = "CASE WHEN [" + isChild + "] = 0 THEN 'False' WHEN [" + isChild  + "] = 1 THEN 'True' END ";
val3 = str.Replace("IS_PARENT", Val1 ).Replace("IS_CHILD", val2); 
```

在我的

```
str = "IS_PARENT, IS_CHILD_WITH_ROLE, IS_CHILD"; 
```

IS_CHILD 出现在两个地方，因此它正在替换两个 IS_CHILD。

我只想替换确切的单词 IS_CHILD。

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:43:22.340

您可以使用[Regex.Replace](http://msdn.microsoft.com/en-us/library/xwewhkd1.aspx)

```
string newString = Regex.Replace(str, @"\bIS_CHILD\b", replacedText); 
```

编辑：如果您想用与 IS_CHILD 相同的条件替换 IS_PARENT *（仅替换整个单词）*

```
string  newString = Regex.Replace(newString, @"\bIS_PARENT\b", "NEW TEXT");
newString = Regex.Replace(str, @"\bIS_CHILD\b", replacedText); 
```

~~或~~ *（这未优化且在答案中，因为它是替换单个单词的一种方法）*

您可以根据空格拆分字符串，然后在替换完整单词后使用 string.Join 创建一个新字符串。

```
string str = "IS_PARENT, IS_CHILD_WITH_ROLE, IS_CHILD";
string replacedText = "SomeThing";
string newString = string.Join(" ", str.Split()
                                       .Select(r => r == "IS_CHILD" ? replacedText : r)); 
```

新字符串将是：

```
IS_PARENT, IS_CHILD_WITH_ROLE, SomeThing 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T06:50:35.820

最简单的方法是使用正则表达式：

```
val3 = Regex.Replace(Regex.Replace(str, @"\bIS_PARENT\b", Val1), @"\bIS_CHILD\b", Val2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T07:00:59.333

一个非常简单的方法是：

```
val3 = str.Replace("IS_PARENT", Val1 ).Replace(", IS_CHILD", ", "+val2); 
```

但在那种情况下，你为什么不这样做：

```
val3 = val1 + ", IS_CHILD_WITH_ROLE, " + val2; 
```

str 来自哪里？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T06:45:41.067

使用[LastIndexOf](http://msdn.microsoft.com/en-en/library/system.string.lastindexof.aspx)，手动剪切字符串并将替换插入正确的位置。像这样：

```
Val1 = "CASE WHEN [" + isParent + "] = 0 THEN 'False' WHEN [" + isParent + "] = 1 THEN 'True' END ";
Val2 = "CASE WHEN [" + isChild + "] = 0 THEN 'False' WHEN [" + isChild  + "] = 1 THEN 'True' END ";
ReplaceLast(str, "IS_PARENT", Val1 );
ReplaceLast(str, "IS_CHILD", Val2 );

public static string ReplaceLast(this string value, 
                                      string oldWord, string newWord)
{
    int index = value.LastIndexOf(oldWord);
    String modified = value.Remove(index, oldWord.Length);
    modified = modified.Insert(index, newWord);
    return modified;
} 
```

在这种情况下，它可能是处理能力和内存消耗最少的方法。也是最底层的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T06:49:41.780

您可以尝试在扩展方法中使用正则表达式来保留相同的语法样式：

```
public static class Extensions
{
    public static string ReplaceExact(this string value, 
                                      string oldWord, string newWord)
    {
        Regex r = new Regex(string.Format(@"\b{0}\b", oldWord));
        return r.Replace(value, newWord);
    }
} 
```

并使用它：

```
string str = "IS_CHILD, IS_CHILD ,IS_CHILD, IS_PARENT, IS_CHILD_WITH_ROLE, IS_CHILD";
string result = str.ReplaceExact("IS_CHILD", "000")
                   .ReplaceExact("IS_PARENT", "111");
Console.WriteLine(result); 
//prints: 000, 000 ,000, 111, IS_CHILD_WITH_ROLE, 000 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T06:50:51.097

可能这会有所帮助

```
string child = "IS_PARENT, IS_CHILD_WITH_ROLE, IS_CHILD", 
       resultString = string.Empty;

List<string> chunks = child.Split(' ').ToList();
chunks.ForEach(delegate(string i)
{
   if (string.Equals(i, "IS_CHILD", StringComparison.CurrentCultureIgnoreCase))
      resultString += "ReplaceString ";
   else
      resultString += i + " ";
});

Console.WriteLine(child);
Console.WriteLine(resultString);

Console.Read(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-12T12:13:41.950

像这样使用 Body.Replace("\bat\b", "at")

# asp.net - asp.net中电子邮件的正则表达式

> ID：14273039
> 
> 赞同：0
> 
> 时间：2013-01-11T06:41:12.177
> 
> 标签：asp.net, regex, validation

对于电子邮件的正则表达式，可能存在很多关于堆栈溢出的问题。我想我不会被标记为重复问题...:)

目前我正在使用正则表达式作为电子邮件地址：

```
\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)* 
```

这适用于以下内容：xyz@gmail.com

我想在这里允许的用户可以在开始或结束时提供空间，例如：“nihantanu@gmail.com”我想通过正则表达式传递它目前它给出了无效我相信它应该是。

我试过的`^[ \t]+|[ \t]+$ + \w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*`

但这不起作用我对如何编写正则表达式并不熟悉。目前我正在尝试从这里学习[http://www.regular-expressions.info/examples.html](http://www.regular-expressions.info/examples.html)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T06:48:03.067

试试`\s*\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*\s*`。

# ruby-on-rails-3 - 有没有办法使用 Backbone.js 和 Rails 3 在单个页面上显示多个集合？

> ID：14273042
> 
> 赞同：0
> 
> 时间：2013-01-11T06:41:16.140
> 
> 标签：ruby-on-rails-3, backbone.js, collections

我正在尝试使用 Rails 3 和backbone.js 开发单页应用程序。是否可以在路由器中实例化两个不同的集合？或者我需要两个路由器路由到同一条路由吗？（我认为这是不可能的）

我有两个系列，我不明白为什么这很难弄清楚。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T06:49:35.477

您可以在单个路由中实例化和获取任意数量的集合、模型或视图。

```
 function showBooksAndCars() {
    var carsCollection = new App.collections.Cars();
    var booksCollection = new App.collections.Books();
    carsCollection.fetch();
    booksCollection.fetch();
    var carsView = new App.views.CarsView({collection: carsCollection}).render();
    var booksView = new App.views.BooksView({collection: booksCollection}).render();
    $('div.cars').replaceWith(carsView.el);
    $('div.books').replaceWith(booksView.el);
  } 
```

# javascript - 使用 jQuery 将输入字段解析为格式化的 json

> ID：14273043
> 
> 赞同：0
> 
> 时间：2013-01-11T06:41:27.323
> 
> 标签：javascript, jquery, json

我正忙于表单重复，当按下提交时，我希望它以以下格式解析为 json：

```
{ "dependant1": [
  { "name": "daniel"},
  ],"dependant2": [
  { "name": "steve"},
  ]
} 
```

对于每个添加的依赖项，目前，如果我添加多个依赖项，则返回“{} {}”，但如果只有一个依赖项，则返回“{“name”：“steve”}。

非常感谢任何帮助。继承人的代码：

jQuery：

```
 //Clone Tracking
var g_counter = 1;
var d_counter = 1;
var dependant = ["dependant"];
var group;
//Clone Tracking
//General Variables
var name_input_groups = ["name-group-1"];
//General Variables
//Generate variables
var name_fields=[0];
var name_input = "<input class='name' />";
//Generate variables
jQuery(document).ready(function(e) {
    jQuery(name_fields).each(function() {
        jQuery(name_input).appendTo('#name-group-1');
    });
    //populate jquery generated fields
    //Cloning Function
    jQuery('#clone').click(function() {
        clone_dependant();
    });

    function clone_dependant() {
        // Store the value of the previous Id to insert the cloned div..
        var oldId = g_counter;
        g_counter++;
        // Clone the Dependant Div and set a new id
        var $clonedDiv = jQuery('#dependant-1').clone(false).attr('id', 'dependant-'+g_counter);
        var name_newDiv = 'name-group-'+ g_counter;
        // Find div's inside the cloned object and set a new id's
        $clonedDiv.find('#name-group-1').attr('id',"name-group-" + g_counter );
        // You don't need to Loop thru the inputs to set the value
        $clonedDiv.find('input').val('');
        // Insert the cloned object 
        $clonedDiv.insertAfter("#dependant-" + oldId);
        name_input_groups.push(name_newDiv);
    };
    //Cloning Function
    function validate_gen() {};
//submit function
var dep_counter = 0
jQuery('#submit').click(function(){
    $('.dependant').each(function(k, v){
        dep_counter++;
        var dependants = {};
    dependants['name'] = jQuery("#name-group-" + dep_counter).find('input').val();
        var json = JSON.stringify(dependants); 
        console.log(json);
    });
});
}); 
```

和继承人的HTML：

```
<div id="dependant-1" class="dependant">
    name<div id="name-group-1"></div>
</div>
<div id="test"></div>

<button id="clone">clone</button>
<button id="submit">submit</button> 
```

和 jsFiddle 链接 - [http://jsfiddle.net/dawidvdh/TzRu8/2/](http://jsfiddle.net/dawidvdh/TzRu8/2/)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:30:29.953

只需使用以下代码即可完美运行：

```
 var result = {};
var dependants;
jQuery('#submit').click(function(){
    $('.dependant').each(function(k, v){
        dependants = {};
        dependants['name'] = $(v).find('.name').val();
        dependants['surname'] = $(v).find('.surname').val();
        dependants['id'] = idNumber;
        dependants['age'] = $(v).find('.age').val();
        dependants['gender'] = $(v).find('.gender').val();
        dependants['cell'] = cell_values;
        dependants['passport'] = pass_values;
        dependants['relationship'] = $(v).find('.relationship:checked').val();
        result['dependant'+g_counter] = [dependants];
    });

    var jsonData = JSON.stringify(result);

    console.log(jsonData);

    $.ajax({
        type: "POST",
        url: "mail.php",
        dataType: "json",
        data: {parameters: jsonData}
    });

}); 
```

感谢大家 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:21:55.870

您的 json 格式错误。您可以使用[http://jsonlint.com/](http://jsonlint.com/)来验证您的 json 格式。

例如，这是一个正确的格式

```
 { "dependant1": [{ "name": "daniel"}] },
 { "dependant2": [{ "name": "steve" }] } 
```

您需要重新编写脚本以生成有效的 json 格式。按照上面的模式添加更多的依赖项....除非 steve 是 daniel 的子依赖项，否则结构更接近于您开始时的结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T07:23:58.947

您的代码中有两个错误。

1：

```
$clonedDiv.find('#name-group-1').attr('id',"#name-group-" + g_counter ); 
```

'name-group' 之前应该没有'#'：

```
$clonedDiv.find('#name-group-1').attr('id',"name-group-" + g_counter ); 
```

2：

```
dependants['name'] = jQuery("#name-group-" + g_counter ).val(); 
```

其中“g_counter”应该是“dep_counter”。

**[更新]**

哦，对不起，我忘记了第三个错误：

```
dependants['name'] = jQuery("#name-group-" + dep_counter ).val(); 
```

应该：

```
dependants['name'] = jQuery("#name-group-" + dep_counter ).find('input').val(); 
```

修复这些错误后，您可以使用以下代码获得所需的内容：

```
var dep_counter = 0
var result = {};
jQuery('#submit').click(function(){
    $('.dependant').each(function(k, v){
        dep_counter++;
        var dependants = {};
        dependants['name'] = jQuery("#name-group-" + dep_counter).find('input').val();
        result['dependant'+dep_counter] = [dependants];
    });
    console.log(JSON.stringify(result));
}); 
```

# php - JavaScript 不工作的句子

> ID：14273045
> 
> 赞同：0
> 
> 时间：2013-01-11T06:41:40.733
> 
> 标签：php, javascript

我有一个 php 程序，它应该会提醒点击的链接。例如，我有一个链接`hello`，当我点击该链接时，javascript 应该会发出警报`hello`。没有空格它可以正常工作，但是当我有一个像`hello world`它这样的链接时，它不会提醒任何东西。这些词是从数据库中提取的。

我的代码如下

```
function gmail(val)
{
    alert(val);
} 
```

对于 php

```
<?php
    $name="raj"; //this is just a dummy value
    $include "database_connectivity.php";
    $conn=odbc_connect($dsn,$database_username,$database_password);
    if(!$conn)
    {
        die('Could not connect to database.'.odbc_error());
    }
    $select="SELECT WHERE_TO_CHANGE FROM REQUEST_SEND_TABLE WHERE SENT_FROM ='$name'";
    $exe=odbc_exec($conn, $select);
    if(!$exe)
    {
        die("Could not execute query".odbc_error());
    }
    while($row_user=odbc_fetch_array($exe))
    {
        $show=$row_user['WHERE_TO_CHANGE'];
        echo "<input type='hidden' id='".$show."' value='".$show."'>";
        echo "<a href='#' id='check'  onClick='gmail(".$show.".value)' >".$show."            </a>";
        echo"<br>";
    }
    odbc_close($conn);
?> 
```

谁能告诉我这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:09:31.663

```
while($row_user=odbc_fetch_array($exe))
{
    $show=$row_user['WHERE_TO_CHANGE'];
    $show_nospace = str_replace(' ', '_', $show);
    echo "<input type='hidden' id='".$show_nospace."' value='".$show."'>";
    echo "<a href='#' id='check'  onClick='gmail(".$show_nospace.".value)' >".$show."            </a>";
    echo"<br>";
} 
```

如果`$show`可以包含 ID 中不允许的其他字符，您也需要替换它们。`value`在属性中使用它时，您还需要转义任何引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T06:49:53.953

在您的 onclick 事件中，将其更改为：

```
gmail(document.getElementById($show).value) 
```

不过，在你的函数中这样做可能会更好，只需传入 id：

```
gmail($show) 
```

这样，您可以在尝试调用 .value 之前先检查元素的存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T07:16:08.763

有空格时使用引号

onClick="gmail('".$show_nospace.".value');"

见单引号（'test test'）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T07:16:18.230

试试这个：

```
 echo "<input type='hidden' id='".$show."' value='".$show."'>";
    echo "<a href='#' id='check'  onClick='gmail(".$show.")' >".$show."</a>"; 
```

代替：

```
 echo "<input type='hidden' id='".$show."' value='".$show."'>";
    echo "<a href='#' id='check'  onClick='gmail(".$show.".value)' >".$show."</a>"; 
```

# python - python text rpg 库存系统

> ID：14273049
> 
> 赞同：0
> 
> 时间：2013-01-11T06:42:04.837
> 
> 标签：python

我正在使用 python 3.3 制作基于文本的 rpg，并且我想要一个更动态的游戏库存系统。我目前正在使用分配给每个项目的变量，但是对于函数，我作为参数传递的变量变得太多而且非常混乱。如果有更好的方法，我很乐意帮助创建一个更好的系统。

这是我的库存调用系统现在的样子：

```
print('Item1',item1)
print('Item2',item2)
print('Item3',item3) 
```

等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:46:21.647

好吧，我制作了一个旧文本游戏，而我使用的库存系统只是一个名为“inv”的列表。然后，当您获得任何类型的项目时，您所要做的就是在库存列表中附加字符串。

```
inv = []

inv.append('Item1') 
```

然后您可以创建一个字典，其中键作为项目名称，值是您可以引用的列表。尝试这个：

```
itemvalues = {'Item1':[0,0,0]
} 
```

列表可以是一堆不同的属性，例如买入卖出价格、强度或你有什么。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T06:46:34.767

您可以尝试使用列表：

```
inventory = []
inventory.append(some_item) 
```

您可以实施库存上限：

```
if len(inventory) > inventory_size:
    print('Inventory full.') 
```

例如，如果您想“使用”库存中的某个项目，那么它也很容易删除（这当然是假设索引存在）：

```
# use the item
del inventory[index] 
```

显然，您需要的大部分功能都可以通过标准列表方法访问，因此请查看[文档](http://docs.python.org/3/library/stdtypes.html#sequence-types-list-tuple-range)。

# jsp - Method 方法 Post 和 Get 方法 - 用户列表和用户配置文件

> ID：14273053
> 
> 赞同：0
> 
> 时间：2013-01-11T06:42:24.777
> 
> 标签：jsp, servlets, post, parameters, get

如何在jsp中做到这一点？用户将在哪里通过 id 处理用户配置文件的 java Servlet？这就是我将如何用 php 编写的方式：

```
Login name  lastname 
user1 name1 lastname1  <a href="User?id=1>profile</a>
user2 name2 lastname2  <a href="User?id=2>profile</a>
user3 name3 lastname3  <a href="User?id=3>profile</a> 
```

我想这样做 jsp 它可能是相同的，但我只需要获取 servlet User.java 以及根据行获取有关用户的某种信息。用户也是从 java bean 用户打印的，所以我可能会发布所有 java bean 用户。有可能吗？是否可以通过其他方式将参数发布到 servlet，然后通过发布或重定向获取参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:48:28.230

要从数据源获取用户列表并将其传递给 JSP，您可以`List`在 servlet 中填充 a 并将其作为属性添加到`request`对象上：

```
List<User> data = yourDao.list();
request.setAttribute("usersList", data); 
```

要在 JSP 中显示此用户列表，您可以使用一个简单的循环：

```
<c:forEach var="user" items="${usersList}">
    Name: ${user.name}
    ...
</c:forEach> 
```

**也可以看看：**

*   [了解 servlet、bean 和 JSP](https://stackoverflow.com/tags/servlets/info)
*   [JSP中如何避免Java代码](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)

# php - 后期静态绑定| 无需使用 `static` 关键字修改父类

> ID：14273057
> 
> 赞同：1
> 
> 时间：2013-01-11T06:42:40.647
> 
> 标签：php, late-static-binding

我有以下父子类。

```
class Parent_class {

    protected static function method_one() {
        echo "I am in Parent_class in method_one";
    }

    protected function execute() {
        static::method_one();
    }

    public function start() {
        $this->execute();
    }

}

class Child_class extends Parent_class {

    protected static function method_one() {
        echo "I am in Child_class in method_one";
    }

}

$obj = new Child_class();
$obj->start(); 
```

* * *

```
Result - it is calling Child class method. 
```

结果与预期一致，因为 php5.3 支持静态后期绑定，并带有已保留的关键字`static`。

但问题是，我没有对 Parent 类的写访问权限，因此我不能`static`在调用时使用`methode_one`，因此它没有执行后期静态绑定。

有什么方法可以访问覆盖方法吗？

父类是一个定义的库，我不能修改它。

出路是修改父类或完全放弃这个想法，但你能提出其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:55:37.870

为什么不在子类中实现执行或启动？

# statistics - 如何根据以前客户的等待时间计算客户的等待时间

> ID：14273067
> 
> 赞同：0
> 
> 时间：2013-01-11T06:43:38.040
> 
> 标签：statistics, future, prediction, time-estimation

任何人都可以提出一种方法来根据以前的等待时间计算餐厅的顾客等待时间。我的系统存储了每个客户的等待时间，并根据这个值来预测下一个客户的等待时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T22:58:47.117

[泊松过程](http://en.wikipedia.org/wiki/Poisson_process)是一个随机过程，它计算事件的数量以及这些事件在给定时间间隔内发生的时间。每对连续事件之间的时间，例如客户等待时间，具有[指数分布](http://en.wikipedia.org/wiki/Exponential_distribution)。来自维基：

> 当描述齐次泊松过程中的到达间隔时间长度时，指数分布自然发生。

# 预言

使用最大似然估计，您可以使用逆样本均值来获得`rate parameter`指数分布。

![在此处输入图像描述](../Images/570906090211d31fae2793db2be48496.png)

# 置信区间

来自维基：

> 计算 λ 估计的近似置信区间的一种简单快速的方法是基于中心极限定理的应用。对于包含至少 15 – 20 个元素的样品，此方法提供了一个很好的置信区间极限近似值。用 N 表示样本量，95% 置信区间的上限和下限由下式给出：

![在此处输入图像描述](../Images/a48a3345eff1b181b9be76025c72a4b1.png)

有关更多详细信息，请参阅[泊松过程](http://en.wikipedia.org/wiki/Poisson_process)和[指数分布](http://en.wikipedia.org/wiki/Exponential_distribution)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T10:16:50.113

你无法预测一个确切的数字。

但是一个简单的统计方法是：

```
average( waiting_time ) + ( 2 * standard_deviation( waiting_time ) ) 
```

也就是说，取平均值并添加两个标准偏差。

假设等待时间是正态分布的，上述等式的结果是大约[95%](http://en.wikipedia.org/wiki/68-95-99.7_rule)的客户会经历的*最大等待时间。*

# mysql - 是否可以在 IN 子句中传递两列或任何其他可能的方式

> ID：14273068
> 
> 赞同：0
> 
> 时间：2013-01-11T06:43:43.173
> 
> 标签：mysql, sql, oracle

我想像这样在 oracle 数据库中过滤我的数据，我知道这个查询是错误的，还有其他可能的方法吗？目前我正在尝试这样做。

```
 SELECT apd.first_name,
       apd.middle_name,
       apd.last_name,
       apd.first_thi_nme,
       apd.middle_thi_nme,
       apd.last_thi_nme
FROM applicant_detail apd
WHERE apd.application_number IN
    ( SELECT **apd.application_number,
               apd.industry_type_cde**
     FROM a_detail apd,
          a_type apt
     WHERE apt.application_number=apd.application_number
       AND apt.identification_code=apd.identification_code
       AND apt.guarantor_type='I' ) 
```

// 我必须在这两列基础上找到重新编码，它们都相同，它们返回唯一或任何其他方式来传递这些`apd.application_number`，`apd.industry_type_cde`in`IN`子句或任何其他。

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T06:55:34.943

我正在使用 mysql 和 postgresql 以下在两者上都可以正常工作我认为它也可以在 oracle 上工作

```
WHERE (column1,column2) IN ( select col1,col2 .....rest of the query) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:48:47.513

试试这个

```
WHERE apd.application_number in 
   (select apd.application_number FRoM ...)
OR
   apd.application_number in 
   (select apd.industry_type_cde FROM ...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T06:50:01.380

您可以使用联合：

```
select apd.application_number 
from a_detail apd,a_type apt
where 
    apt.application_number=apd.application_number and 
    apt.identification_code=apd.identification_code and
    apt.guarantor_type='I'
UNION
select apd.industry_type_cde 
from a_detail apd,a_type apt
where 
    apt.application_number=apd.application_number and
    apt.identification_code=apd.identification_code and
    apt.guarantor_type='I' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T07:10:52.687

最好显示表模式。但是**`JOIN`**可以模拟`IN`:)

```
 SELECT apd.first_name,
       apd.middle_name,
       apd.last_name,
       apd.first_thi_nme,
       apd.middle_thi_nme,
       apd.last_thi_nme
FROM applicant_detail apd
JOIN 
    (SELECT apd.application_number,
               apd.industry_type_cde
     FROM a_detail apd 
     INNER JOIN
     a_type apt
     ON apt.application_number=apd.application_number
       WHERE apt.identification_code=apd.identification_code
       AND apt.guarantor_type='I' ) as X
ON apd.application_number = CONCAT(X.application_number, X.industry_type_cde)
; 
```

*   ## [SQL JOINS 的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)。

# c# - 从 XML 格式的字符串中读取输入并以 TreeView 格式呈现

> ID：14273070
> 
> 赞同：0
> 
> 时间：2013-01-11T06:43:57.567
> 
> 标签：c#, xml, treeview, linq-to-xml

我正在尝试使用 TreeView 控件将 XML 格式的字符串加载到我的 GUI 中。但是，XML 格式的字符串采用专有布局。

XML 格式的字符串结构将如下所示：

```
<Response>
    <Data>
     <Settings>
        <Setting>
            <SettingsXml>
               <ScanJobs>
                  <ScanJobsData>
                    <Mailboxes>
                      <Name>user1@abc.com|DB1</Name>
                      <Value>true</Name>
                    </Mailboxes>
                    <Mailboxes>
                      <Name>user2@abc.com|DB1</Name>
                      <Value>true</Name>
                    </Mailboxes>
                    <Mailboxes>
                      <Name>user3@abc.com|DB2</Name>
                      <Value>true</Name>
                    </Mailboxes>
                    <Mailboxes>
                      <Name>user4@abc.com|DB2</Name>
                      <Value>true</Name>
                    </Mailboxes>
                    <Mailboxes>
                      <Name>user5@abc.com|DB3</Name>
                      <Value>true</Name>
                    </Mailboxes>
                    <Mailboxes>
                      <Name>user6@abc.com|DB3</Name>
                      <Value>true</Name>
                    </Mailboxes>
                  </ScanJobsData>
               </ScanJobs>
            </SettingsXml>
        </Setting>
      </Setting>
    </Settings>
  </Data>
</Response> 
```

在标签里面我们有一个和标签。标记表示邮箱名称，附加了该邮箱所属的数据库名称。例如，user1@abc.com 是与名称为 DB1 的数据库关联的邮箱名称。现在我在字符串中获取上述 xml 格式的数据，而不是作为 XML 文件。

我希望输出在 TreeView 中的结构如下：

+DB1

*   user1@abc.com

*   user2@abc.com

+DB2

*   user3@abc.com

*   user4@abc.com

+DB3

*   user5@abc.com

*   user6@abc.com

过去几个小时我一直在网上搜索，但没有任何结果有帮助。有些已经接近了，但可能属性不会显示，或者节点的名称不会显示，等等。

我在 Visual Studio 2010 中用 c# 编写。感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:07:18.573

Try this:

```
TreeView treeview = new TreeView();

// Get all the <Name> elements
XDocument doc = XDocument.Parse(xmlAsString);
var mailboxNames = doc.Element("Response").Element("Data").Element("Settings").Element("SettingsXml").Element("ScanJobs").Element("ScanJobsData").Elements("Mailboxes").Select(m => m.Element("Name"));

// Extract the email and db in each <Name> element
foreach (var name in mailboxNames)
{
    var namesSplit = name.Value.Split('|');
    var email = namesSplit[0];
    var db = namesSplit[1];

    // Create new db node if it not exists and add the email there
    if (!treeview.Nodes.ContainsKey(db))
    {
        TreeNode[] emails = new TreeNode[] { new TreeNode(email) };
        TreeNode node = new TreeNode(db, emails);
        treeview.Nodes.Add(node);
    }
    // If db node already exists, add email to currently existing node
    else
    {
        treeview.Nodes[db].Nodes.Add(email);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T07:26:51.397

`TreeNodes`此查询将返回您已添加邮件节点的 DB 序列：

```
XDocument xdoc = XDocument.Load(path_to_xml);
// or XDocument.Parse(xml_string);
var nodes = from m in xdoc.Descendants("Mailboxes")
            let name = m.Element("Name").Value.Split('|')
            select new {
                Mail = name[0],
                Db = name[1]
            } into md
            group md by md.Db into g
            select new TreeNode(g.Key, 
                                g.Select(x => new TreeNode(x.Mail)).ToArray()); 
```

然后简单

```
 treeView.Nodes.AddRange(nodes.ToArray()); 
```

# asp.net - MySql 连接器/Odbc 5.2(w) 生成异常

> ID：14273073
> 
> 赞同：1
> 
> 时间：2013-01-11T06:44:13.450
> 
> 标签：asp.net, mysql, odbc

您好我最近安装了 MySql Server 5.5 和 MySql Connector/Odbc 5.2(w)。现在，我在 MySql Server 5.1 和 Odbc Connector 3.51 中完美运行的旧 asp.net 在数据库操作时生成异常。

生成的异常是**ERROR [IM002] [Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified**

我已将连接字符串更改为`Driver={MySQL ODBC 5.2w Driver};Server=localhost;Database=efloxdb;User=root;Password=admin;Option=3;`

文档没有指定要进行的任何进一步更改。谁能找到我的问题的解决方案？任何帮助，将不胜感激

# linux - dos 或 linux 多行搜索和多行替换/添加

> ID：14273077
> 
> 赞同：-1
> 
> 时间：2013-01-11T06:44:31.520
> 
> 标签：linux, batch-file, sed, awk

我正在尝试在文件中查找多行模式，然后在其后添加 2 行或替换它。

这就是输入和输出的样子。

**输入**

```
$ DATE: Fri Apr 20 16:36:56 2012
$---------------------------$
$ FILE MANAGEMENT SECTION   $
$---------------------------$
$
$---------------------------$
$ EXECUTIVE CONTROL SECTION $
$---------------------------$ 
```

**输出**

```
$ DATE: Fri Apr 20 16:36:56 2012
$---------------------------$
$ FILE MANAGEMENT SECTION   $
$---------------------------$
$
BLKABLA
$
$---------------------------$
$ EXECUTIVE CONTROL SECTION $
$---------------------------$ 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:28:47.190

```
awk '1;/^\$$/{print "BLKABLA\n$"}' file 
```

一种方法是在第一次看到模式时做到这一点：

```
awk '1;/^\$$/ && !done{print "BLKABLA\n$"; done=1}' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:26:01.480

You can also use the holding buffer and read the whole file into it first and then apply the regular expression across the whole file. I described the solution already here - [multiline sed using backreferences](https://stackoverflow.com/questions/2807033/multiline-sed-using-backreferences)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T06:51:47.503

由于这是 Linux，您可能拥有 GNU sed。尝试：

```
sed -e '/^\$ FILE MANAGEMENT SECTION   \$$/,+2{/^\$-\+\$/,+1{/^\$$/afoo\
$
}
}' input 
```

它匹配三个正则表达式

```
^\$ FILE MANAGEMENT SECTION   \$$
^\$-\+\$$
^\$$ 
```

然后追加

```
foo
$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T11:32:25.080

这可能对您有用（GNU sed）：

```
sed '/^$ FILE MANAGEMENT SECTION   $$/!b;n;/^$--*$$/a$\nBLKABLA' file 
```

或者

```
sed '/^$ FILE MANAGEMENT SECTION   $$/!b;n;$!N;/^$--*$\n$$/aBLKABLA\n$' file 
```

# ios - iOS 6 MKMapview - 当前位置在模拟器中显示错误

> ID：14273080
> 
> 赞同：0
> 
> 时间：2013-01-11T06:44:49.167
> 
> 标签：ios, ipad, ios5, ios6, ios-simulator

我正在使用带有 XCode 4.5 的 iOS 6。

尝试创建基于地图的应用程序。我已经将 Mapview 放在 XIB 中，并`IBOutlet`与相应的视图控制器进行映射。

我现在没有设备，所以我在 iOS 6 模拟器中进行测试。当前位置显示为荷兰，这是无关紧要的。

**试图通过以下方式解决：**

1.  通过选中和取消选中允许位置模拟选项来编辑模式。
2.  iOS 模拟器菜单 -> 调试 -> 位置 -> 从无更改为 Apple 和其他。
3.  我在属性检查器中设置了显示用户位置。
4.  我也给了`mapView.showsUserLocation = YES`。

以上都没有帮助。

你能帮我解决这个问题吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:04:37.430

模拟器没有任何 GPS，因此无法显示正确的位置。通过在控制台中选择位置，您将找到一些预定义的位置。

![在此处输入图像描述](../Images/ec3f14de442a2a5f95ca5c3b6a50b25a.png)

![在此处输入图像描述](../Images/34a896ba4ed8b2520199c3463da0a79c.png)

您可以从这里获得一个不错的项目，用于[在模拟器中测试当前位置](https://github.com/futuretap/FTLocationSimulator)。

> FTLocationSimulator 允许在桌面上的 iPhone 模拟器中模拟核心位置。它发送从描述预定义路线的 KML 文件中获取的虚假核心位置更新。
> 
> 除了模拟的核心位置更新之外，它还更新了 MapKit 视图上的蓝色 userLocation 视图。示例项目展示了如何将 FTLocationSimulator 集成到现有应用程序中，在本例中为 Apple 的“面包屑”示例应用程序。

来源：[在 iPhone 模拟器上测试 CoreLocation](https://stackoverflow.com/questions/802156/testing-corelocation-on-iphone-simulator)

# haskell - 类型解构

> ID：14273085
> 
> 赞同：7
> 
> 时间：2013-01-11T06:44:57.150
> 
> 标签：haskell, types, type-constructor

我的数据类型总是至少有两个参数，最后两个参数总是'q'和'm'，分别：

```
{-# LANGUAGE TypeFamilies, FlexibleContexts, UndecidableInstances, TypeOperators, DataKinds, ConstraintKinds, FlexibleInstances #-}

data D1 q m = D1 q
data D2 t q m = D2 q

class Foo a where -- a has kind * -> *
   f :: a x -> a x

class (Foo b) => Bar b where -- b has kind * -> *
   -- the purpose of g is to change ONE type parameter, while fixing the rest
   -- the intent of the equality constraints is to decompose the parameter b into
   -- its base type and 'q' parameter, then use the same base type with a *different*
   -- `q` parameter for the answer
   g :: (b ~ bBase q1, b' ~ bBase q2) => b m -> b' m

instance (Foo (D2 t q), Integral q) => Bar (D2 t q) where
   g (D2 q) = D2 $ fromIntegral q -- LINE 1 
```

该程序导致错误

```
Could not deduce (bBase ~ D2 t0) (LINE 1) 
```

当我写这个实例时，我当然是打算`bBase ~ D2 t`. 我猜 t 没有以某种方式绑定（因此引入了 t0），而且我不知道 GHC 是否可以解构这种类型。或者，也许我只是在做一些愚蠢的事情。

更重要的是，如果我使 Bar 的参数具有种类 * -> * -> *，则不需要这种类型相等/类型解构。但后来我无法强制执行 Foo 约束：

```
class (Foo (b q)) => Bar b where -- b has kind * -> * -> *
  g :: b q m -> q b' -- this signature is now quite simple, and I would have no problem implementing it 
```

这不起作用，因为 q 不是 Bar 的参数，我不*希望*它成为 Bar 的参数。

我找到了一个使用两种额外“虚拟”关联类型的解决方案，但如果我不需要它们，我真的不喜欢有它们：

```
class (Foo b, b ~ (BBase b) (BMod b)) => Bar b where -- b has kind * -> *
  type BBase b :: * -> * -> *
  type BMod b :: *

  g :: (Qux (BMod b), Qux q') => b m -> (BBase b) q' m

instance (Foo (D2 t q), Integral q) => Bar (D2 t q) where
  type BBase (D2 t q) = D2 t
  type BMod (D2 t q) = q

  g (D2 q) = D2 $ fromIntegral q 
```

这可行，但它相当于显式解构类型，鉴于实例的简单类型，我认为这应该是不必要的。

我正在寻找任何一种方法的解决方案：要么告诉我如何对“更多应用”类型实施类约束，要么告诉我如何使 GHC 解构类型。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:45:22.697

根据您的描述，您有`b' :: * -> * -> *`希望限制应用的类型`b' t :: * -> *`（对于 all `t`）。

As you summise, you either need to deconstruct a type, which is your attempt here starting from a `b :: * -> *` assumed to be the result of a type application `b = b' t`, or to enforce a constraint on a "more-applied" type, instead from the start-point of a `b' :: * -> * -> *`.

Deconstructing a type is not possible, since the compiler does not know if `b` is even "deconstructable". Indeed, it may not be, e.g., I can make an instance `instance Bar Maybe`, but `Maybe` cannot be deconstructed into a type `b' :: * -> * -> *` and some type `t :: *`.

Starting instead from a type `b' :: * -> * -> *`, the constraints on an application of `b'` can be moved into the body of the class, where the variables are quantified:

```
 class Bar (b :: * -> * -> *) where
      g :: (Foo (b q1), Foo (b q2)) => b q1 m -> b q2 m 
```

For your example there is one further wrinkle: q1 and q2 may have their own constraints, e.g. for the `D2` instance you require the `Integral` constraint. However, `Bar` fixes the constraints on `q1` and `q2` for all instances (in this case the empty constraint). A solution is to use "constraint-kinded type families" which allow instances to specify their own constraints:

```
 class Bar (b :: * -> * -> *) where
      type Constr b t :: Constraint
      g :: (Foo (b q1), Foo (b q2), Constr b q1, Constr b q2) => b q1 m -> b q2 m 
```

(include `{-# LANGUAGE ConstraintKinds #-}` and import `GHC.Prim`)

Then you can write your `D2` instance:

```
 instance Bar (D2 t) where
      type Constr (D2 t) q = Integral q
      g (D2 q) = D2 $ fromIntegral q 
```

# python - 从 UDP 套接字接收后 Python 字节丢失

> ID：14273090
> 
> 赞同：0
> 
> 时间：2013-01-11T06:45:53.923
> 
> 标签：python, sockets, udp

```
import socket
import sys
import datetime
import os

try:
    username = "root"
    password = "Apacheah64"
    db_name = "DB_GPS"
    table_name = "Tbl_GPS"
    host = ""
    port = 6903
    buf = 4096

except IndexError:

    sys.exit(1)

s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
s.bind((host, port))

while 1:
    data = s.recv(buf)
    if not data:
        print("Client has exited!")
        break
    else:
        print("\nReceived message '", data,"'")

# Close socket
s.close() 
```

我收到的字节应该是 43 字节，但我从客户端收到的是

收到消息'b'\x0f\x00\x00\x00NR09G05164\x00''？只有 15 个字节。为什么？

下面是原始字节 43 字节

`00 00 00 01 00 06 ec 44 76 a6 21 c2 00 00 08 00 45 00 00 2b 08 43 00 00 34 11 81 2b cb 52 50 db 67 0d 7a 19 24 2d 1a f7 00 17 83 26 0f 00 00 00 4e 52 30 39 47 30 35 31 36 34 00`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:13:08.873

也许丢失的字节根本不显示`print`？检查`len(data)`值。

您不能通过 UDP 接收不完整的数据包，它会为您提供完整的数据报或什么也没有。

# c# - .NET 4.5 并行处理和 for 循环

> ID：14273091
> 
> 赞同：1
> 
> 时间：2013-01-11T06:45:55.593
> 
> 标签：c#, parallel-processing, task-parallel-library

我正在尝试创建一个取决于可用处理器数量的任务列表。我有一个 for 循环，它的行为似乎很奇怪。我知道 javascript 中的闭包概念，似乎这里可能会发生类似的事情：

```
 var tasks = new Task[Environment.ProcessorCount]; 
 for(int x = 0; x < Environment.ProcessorCount; x ++)
 {
      tasks[x] = Task.Run(() => new Segment(SizeOfSegment, x * SizeOfSegment, listOfNumbers).generateNewList());
 } 
```

我发现当我在 for 循环中换行时，变量 x 似乎是正确的，所以它从 0 开始到 3 结束（处理器数量为 4）。但是，当我在 Segment 的构造函数中放置断点时，我发现在返回调用堆栈时 x 实际上是 4。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T06:48:29.927

你`x`在你的 lambda 表达式中捕获 - 但是你有一个*变量* `x`在循环过程中改变值，所以当你的任务实际*运行*时，它很可能有不同的值。您需要在循环内创建变量的*副本*，在每次迭代时创建一个新的“变量实例”。然后您可以安全地捕获*该*变量：

```
for(int x = 0; x < Environment.ProcessorCount; x ++)
{
    int copy = x;
    tasks[x] = Task.Run(() => new Segment(SizeOfSegment,
                                          copy * SizeOfSegment,
                                          listOfNumbers).generateNewList());
} 
```

（我还建议您重命名`generateNewList`以`GenerateNewList`符合 .NET 命名约定。）

# lua - 使用 lua_yield 和 lua_resume 时的核心转储

> ID：14273092
> 
> 赞同：3
> 
> 时间：2013-01-11T06:46:01.680
> 
> 标签：lua, coroutine

我只想恢复 func 协程两次，如果 n==0 则产生，如果 n==1 则返回，但是它核心转储，这有什么问题？

“hello world”应该始终留在 LL 的堆栈中，我不知道出了什么问题。

```
[liangdong@cq01-clientbe-code00.vm.baidu.com lua]$ ./main 
func_top=1 top=hello world
first_top=1 top_string=hello world
Segmentation fault (core dumped)
[liangdong@cq01-clientbe-code00.vm.baidu.com lua]$ cat main.c 
#include "lua.h"
#include "lualib.h"
#include "lauxlib.h"

int n = 0;

int func(lua_State *L) {
    printf("func_top=%d top=%s\n", lua_gettop(L), lua_tostring(L, -1));
    if (!n) {
        ++ n;
        return lua_yield(L, 1);
    } else {
        return 1;
    }
}

int main(int argc, char* const argv[]) {
    lua_State *L = luaL_newstate();

    /* init lua library */    
    lua_pushcfunction(L, luaopen_base);
    if (lua_pcall(L, 0, 0, 0) != 0) {
        return 1;
    }
    lua_pushcfunction(L, luaopen_package);
    if (lua_pcall(L, 0, 0, 0 ) != 0) {
        return 2;
    }

    /* create the coroutine */
    lua_State *LL = lua_newthread(L);

    lua_pushcfunction(LL, func);
    lua_pushstring(LL, "hello world");

    /* first time resume */
    if (lua_resume(LL, 1) == LUA_YIELD) {
        printf("first_top=%d top_string=%s\n", lua_gettop(LL), lua_tostring(LL, -1));
        /* twice resume */
        if (lua_resume(LL, 1) == 0) {
            printf("second_top=%d top_string=%s\n", lua_gettop(LL), lua_tostring(LL, -1));
        }
    }

    lua_close(L);

    return 0;
} 
```

它在 lua5.1 中进行核心转储，但如果将 lua_resume(LL, 1) 更改为 lua_resume(LL, NULL, 1)，则在 lua5.2 中运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T03:43:05.257

编辑：我实际上完全错了。

[您不能恢复 C 函数。](http://lua-users.org/lists/lua-l/2010-04/msg00406.html)

# java - 将可变数据传递给非活动类

> ID：14273095
> 
> 赞同：-1
> 
> 时间：2013-01-11T06:46:27.310
> 
> 标签：java, android

将变量数据从类传递`Activty`到`non-Activty`类的最佳方法是什么？数据是在`onCreate`第一个类中创建的，`Acivity`我需要在不使用 Intent 的情况下将该数据传递给第二个类。任何代码示例将不胜感激。

因为我让它像我打算发布我所拥有的那样工作。就我而言，我已经有了一个`Constructor`，`ArrayList`并且对于我正在做的事情，我需要另一个相同类型的。所以这里是：

班级活动

```
public class Polygon extends Overlay {
ArrayList<GeoPoint> geoPoints;

public Polygon(ArrayList<GeoPoint> points){
    geoPoints = points;
}

public class Hex{
    public Hex(ArrayList<String> str) {
        // TODO Auto-generated constructor stub
     Log.i("string",str.toString());
    }
  } 
```

我的主要活动有

```
 Polygon main = new Polygon(null);
 Polygon.Hex mMainClass = (main.new Hex(color)); 
```

请注意，我之前必须创建主类的实例

```
Polygon.Hex mMainClass = (main.new Hex(color)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:51:25.030

在该活动类中创建一个类对象。

```
MyClass mc = new MyClass();
mc.yourVariable = "Your Value"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:52:31.650

如果您的 Class Name 是`MainClass`Create `Constructor`for that 并将值作为参数传递，下面是一个示例。

主类.java

```
public class MainClass {
    public MainClass(int i, String str) {
        // TODO Auto-generated constructor stub

    }
} 
```

使用下面的代码将值从 MainActivity 传递到 MainClass，这`i`是整数变量，`str`是字符串变量

```
MainClass mMainClass = new MainClass(i, str); 
```

# jquery - 将动态“a”标签添加到具有特定类的“li”元素

> ID：14273096
> 
> 赞同：0
> 
> 时间：2013-01-11T06:46:28.670
> 
> 标签：jquery, wordpress

请看下面的代码：

```
<ul id="all-movies">                    
  <li class="movie">
    <img src="pic.jpg" />
  </li>
  <li class="movie featured">
    <img src="pic.jpg" />
  </li>
  <li class="movie featured">
    <img src="pic.jpg" />
  </li>
</ul> 
```

在上面的代码中，我想`<a href="<?php bloginfo('url'); ?>/hello"></a>`在`li`元素前面加上一个类`featured`，使它看起来像这样：

```
<ul id="all-movies">                    
  <li class="movie">
    <img src="pic.jpg" />
  </li>
  <li class="movie featured">
    <a href="<?php bloginfo('url'); ?>/hello"></a>
    <img src="pic.jpg" />
  </li>
  <li class="movie featured">
    <a href="<?php bloginfo('url'); ?>/hello"></a>
    <img src="pic.jpg" />
  </li>
</ul> 
```

并将`<?php bloginfo('url'); ?>`替换为我的网站。

我怎样才能让它工作？我尝试了类似以下的方法，但没有奏效：

`$("#all-movies li").hasClass('featured').prepend('<a href="<?php bloginfo('url'); ?>/hello"></a>');`

注意：`featured`该类是动态添加的。

-edit- 这是我用来`featured`动态添加类的代码：

```
function wpse80098_filter_post_class( $classes ) {
    global $post;
    if ( 'yes' == get_post_meta( $post->ID, '_jsFeaturedPost', true ) ) {
        $classes[] = 'featured';
    }
    return $classes;
}
add_filter( 'post_class', 'wpse80098_filter_post_class' ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:48:45.013

`hasClass`返回一个没有`prepend`方法的布尔值，您可以使用类选择器。

```
$("#all-movies li.featured").prepend('<a href="<?php bloginfo("url"); ?>/hello"></a>'); 
```

或者：

```
$("#all-movies li").filter('.featured').prepend('<a href="<?php bloginfo("url"); ?>/hello"></a>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T06:55:36.770

```
<script>
$(document).ready(function(){
    var yourURL = "<?php bloginfo('url'); ?>/hello";
    $("#all-movies li.featured").prepend('<a href="'+yourURL+'"></a>');
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T07:08:30.253

Have you tried:

```
$("#all-movies li.featured").prepend('<a href="<?php bloginfo('url'); ?>/hello"></a>'); 
```

Thats assuming the `<?php ?>` stuff is actually processed on your server and doesn't make its way to the client.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T06:55:49.247

您可以尝试使用`.find()`功能：

```
var url = "<?php bloginfo('url'); ?>/hello";
$('ul#all-movies').find('li.featured').prepend("<a href='"+url+"'></a>"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T07:19:20.980

```
$('li.featured').each(function(){
   $(this).prepend('<a href="<?php bloginfo("url"); ?>/hello"></a>');
}); 
```

# java - 将 JSON 字符串处理成 Java 数组

> ID：14273105
> 
> 赞同：1
> 
> 时间：2013-01-11T06:47:07.953
> 
> 标签：java, php, arrays, json

我在 json 代码中有这个数组。

```
$info=array();
while($row = mysql_fetch_array($result,MYSQL_ASSOC)){
  array_push($info,$row);
}
$info;
$result_final->lugares_cercanos = $info; 
```

打印这个：

```
{"logstatus":"1","lugares_cercanos":[{"nombre":"Rio Amazonas","distancia":"5119.000"}{"nombre":"Swissotel Quito","distancia":"5823.000"}{"nombre":"Laguna de Yaguarcocha","distancia":"71797.000"}]} 
```

现在，问题是，如何将“lugares_cercanos”的字段放入 java ArrayList？

我尝试使用此代码：

```
{
  JSONArray jdata=post.getserverdata(postparameters2send, URL_connect);
  if (jdata!=null && jdata.length() > 0){
    JSONObject json_data;
    ArrayList<NameValuePair> lugares = new ArrayList<NameValuePair>();

    json_data = jdata.getJSONObject(0);
    logstatus=json_data.getInt("logstatus");                        
    lugaresCercanos=json_data.getJSONArray("lugares_cercanos");     

    for (int i = 0; i < lugaresCercanos.length(); ++i) {
      JSONObject rec = lugaresCercanos.getJSONObject(i);
      String name = rec.getString("nombre");
      String dist = rec.getString("distancia");
      lugares.add(new BasicNameValuePair(name,dist));
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:56:26.747

尝试这个：

```
JSONObject j = jdata.getJSONObject("obj");
JSONArray jArray = j.getJSONArray("lugares_cercanos");
int len = jArray .length(); 
for(int i=0; i <len; i++){
  String nombre = jArray .getJSONObject(i).optString("nombre");

  ---------
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:56:37.020

顶层结构（即您发布的 JSON 字符串）不是数组而是对象。

我不知道你的`post.getserverdata`方法是做什么的，如果有一个可以返回 JSONObject 的版本，你可以使用：

```
JSONObject jdata=post.getserverdataobject(postparameters2send, URL_connect);
logstatus=jdata.getInt("logstatus");
lugaresCercanos=jdata.getJSONArray("lugares_cercanos");

... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T07:01:48.540

显示此错误：

解析数据 org.json.JSONException 时出错：值 {"lugares_cercanos":[{"nombre":"Laguna de Yaguarcocha","distancia":"8686205.000"},{"nombre":"Swissotel Quito","distancia": org.json.JSONObject 类型的 "8728811.000"},{"nombre":"Rio Amazonas","distancia":"8729333.000"}],"logstatus":"1"} 无法转换为 JSONArray

# iphone - 如何在objective-c中创建自定义类集群..？

> ID：14273107
> 
> 赞同：3
> 
> 时间：2013-01-11T06:47:22.507
> 
> 标签：iphone, ios, objective-c

我有两个类`A`，`B`并且我想根据某些条件创建这些类中的任何一个的对象。我可以为此创建一个自定义类集群吗？如果是，如何？我知道这`NSMutableArray`也适用于相同的原则。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2014-02-17T21:56:33.533

您正在寻找的是类集群模式，您可以在 SO 以及[Apple Dev](https://developer.apple.com/library/ios/documentation/general/conceptual/CocoaEncyclopedia/ClassClusters/ClassClusters.html)页面本身上找到许多示例。看看@Frank C[在此处给出的这种模式的简单示例。](https://stackoverflow.com/questions/1844158/what-exactly-is-a-so-called-class-cluster-in-objective-c)

# c#-4.0 - SSIS 输入列 [Column] 和名为 [Column] 的引用列仅在服务器中具有不兼容的数据类型

> ID：14273111
> 
> 赞同：0
> 
> 时间：2013-01-11T06:47:52.663
> 
> 标签：c#-4.0, ssis

我的场景是我上传一个 Excel 并在 Excel 中获取一个类型为 DT_WSTR 的列 [ColumnExcel]，并将查找与类型为 CHAR(9) 的 DB2 字段 [ColumnDB2] 进行比较。我将 DT_WSTR 转换为 DT_STR 类型并进行查找。我通过 C# 代码执行这个包，在我的本地机器上工作得很好，但它不起作用并给出错误

```
"input column [ColumnExcelConverted] and reference column named [ColumnDB2] have incompatible data types." 
```

在生产机器中。

1) 我的系统有 BIDS 2008 但在生产中它没有 BIDS 但有 SQL server 2008 R2 的执行包实用程序。2) 我系统中的驱动程序是 IBM DB2 ODBC 驱动程序 8.01，而在生产中它是 IBM DB2 ODBC 驱动程序 9.01。

可能是什么问题和解决方案。我仍然无法找到确切的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:26:40.927

问题很可能是您的 ODBC 驱动程序版本不同。

# oracle - TO_char 在将数字转换为字符串后返回斜杠值

> ID：14273113
> 
> 赞同：3
> 
> 时间：2013-01-11T06:47:56.783
> 
> 标签：oracle, to-char

我有一个数据库列`amount [Data type Number(32,12)]`。当我`to_char`在`amount`字段上使用时，我会在输出中附加一个斜杠值。

![截屏](../Images/fae2e684ff179d598de9f4e86479e02d.png)

当我直接使用存储在金额字段中的值时，我得到了正确的值

`select TO_Char(0.000000000099,'FM99999999999999999999999999999990.099999999999') from dual;`

输出：- `0.000000000099`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:29:37.410

看起来您的表中的数据已损坏。这导致了一些问题，包括它是如何到达那里的，你能做些什么呢？

损坏的数字（或[日期](https://stackoverflow.com/a/12456242/266304)）值通常来自 OCI 程序，但有一些错误报告表明`imp`已知会导致损坏。内部表示记录在支持说明 1007641.6 中，但我发现在重新创建问题时更容易使用[这种解释](http://www.jlcomp.demon.co.uk/number_format.html)，并且可以使用 PL/SQL 块代替 OCI 程序。

您遇到问题的两个数字应在内部表示如下：

```
select dump(0.000000000099, 16) as d1,
    dump(0.000000001680, 16) as d2
from dual;

D1                 D2
------------------ ---------------------
Typ=2 Len=2: bb,64 Typ=2 Len=3: bc,11,51 
```

我还没有弄清楚你的表中有什么值，但我可以显示类似的结果：

```
create table t42 (amount number(32,12)) nologging;

declare
    n number;
begin
    dbms_stats.convert_raw_value('bb65', n);
    insert into t42 (amount) values (n);
    dbms_stats.convert_raw_value('bc100000', n);
    insert into t42 (amount) values (n);
end;
/ 
```

转储值表明它们看起来有点奇怪：

```
column d1 format a25
column d2 format a25
select amount, dump(amount) d1, dump(amount, 16) d2
from t42;

                     AMOUNT D1                        D2                      
--------------------------- ------------------------- -------------------------
              0.00000000010 Typ=2 Len=2: 187,101      Typ=2 Len=2: bb,65        
             0.000000001499 Typ=2 Len=3: 188,16,0     Typ=2 Len=3: bc,10,0 
```

运行您的格式会产生类似的结果：

```
select amount as actual__________amount,
    TO_CHAR(amount,'FM99999999999999999999999999999990.099999999999')
        as amount__________Changed
from t42
order by amount;    

     ACTUAL__________AMOUNT AMOUNT__________CHANGED                      
--------------------------- ----------------------------------------------
              0.00000000010 ############################################## 
             0.000000001499 0.00000000150/ 
```

如果您可以将`dump()`您自己的数据的输出添加到问题中，那么我可以看看我是否可以准确地重新创建您所看到的值。

有趣的是，可以通过更新数据来“纠正”这个问题，例如：

```
update t42 set amount = amount * 1;

select amount, dump(amount) d1, dump(amount, 16) d2
from t42;

                     AMOUNT D1                        D2                      
--------------------------- ------------------------- -------------------------
               0.0000000001 Typ=2 Len=2: 188,2        Typ=2 Len=2: bc,2         
             0.000000001499 Typ=2 Len=3: 188,15,100   Typ=2 Len=3: bc,f,64

select amount as actual__________amount,
    TO_CHAR(amount,'FM99999999999999999999999999999990.099999999999')
        as amount__________Changed
from t42
order by amount;

     ACTUAL__________AMOUNT AMOUNT__________CHANGED                      
--------------------------- ----------------------------------------------
               0.0000000001 0.0000000001                                   
             0.000000001499 0.000000001499 
```

但是，您必须询问实际正确的值是什么，这可能会回到它是如何/为什么/何时损坏的。如果这些数据非常重要，我会非常谨慎地接触这些数据，并且**真的**不得不接受@DazzaL 的建议，让 Oracle 支持部门参与进来对其进行整理。

# javascript - 将 Javascript 代码注入网页

> ID：14273116
> 
> 赞同：2
> 
> 时间：2013-01-11T06:48:05.757
> 
> 标签：javascript, html, jquery, javascript-injection

我想将网页下载为 html 文件。在我将网页源代码保存为 html 文件之前，我想先编辑一些页面内容。我假设我可以使用 Javascript 编辑内容。不幸的是，我对 Javascript 的经验很少。我想我必须将我的脚本注入网页，以便浏览器可以一起执行它们。我应该如何编写我的脚本？我是否应该编写一个独立的脚本并将页面 url 传递给我的脚本，以便它们可以同时执行？或者还有其他方法可以注入我的脚本？

编辑：为了让我的问题更清楚，请参阅[这篇文章](https://stackoverflow.com/questions/14271919/surrounding-selected-text-with-tags)和[这篇文章](https://stackoverflow.com/questions/14244498/web-page-source-annotation-tool)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T06:57:55.743

由于您只执行此操作一次，因此从浏览器 JavaScript 控制台启动脚本就足够了。打开开发人员工具，导航到控制台选项卡，粘贴脚本内容，然后按 Enter。

要获取编辑后的 ​​HTML，请`document.documentElement.outerHTML`在控制台中计算表达式。将输出复制到您选择的文本编辑器，在其前面添加一个 doctype，然后将其保存为 html。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T08:01:07.290

如果您想将修改后的源代码保存为 html，您可以使用不同的方法，具体取决于您要进行的主要操作。遗憾的是，使用 javascript 保存文件很棘手并且取决于很多事情，因此您可以使用选项手动复制粘贴文件源或编写浏览器和设置特定的文件保护程序。我更喜欢 javascript+php 组合解决方案。或者，如果不需要使用 javascript 来操作某些东西，我会完全在 php 中完成。

第 1 步 - 在 chrome 和 firefox 中使用控制台打开浏览器 CTRL+SHIFT+J 并允许弹出窗口。第 2 步 - 打开您想要的网页 第 3 步 - 将下一个代码复制到控制台

```
//Script loading function
function load_script( source ) {
    var new_script  = document.createElement('script');
    new_script.type = 'text/javascript';
    new_script.src = source;
    new_script.className = 'MyInjectedScript';
    document.getElementsByTagName('head')[0].appendChild(new_script);
}
function escapeHtml(unsafe) {
  return unsafe
      .replace(/&/g, "&amp;")
      .replace(/</g, "&lt;")
      .replace(/>/g, "&gt;")
      .replace(/"/g, "&quot;")
      .replace(/'/g, "&#039;");
}
//Load jQuery, if page do not have it by default
if (typeof(jQuery) != 'function') load_script('http://code.jquery.com/jquery-latest.js'); 
```

第 4 步 - 在控制台中进行操作

第 5 步 - 将下一个代码复制到控制台

```
//In the end remove your injected scripts
$('.MyInjectedScript').remove(); //Or jquery script will be in source
//get Document source
var doc_source = $('html',document).html();
doc_source = '<html>'+doc_source+'</html>';

var new_window = window.open('', '', 'scrollbars=yes,resizable=yes,location=yes,status=yes');
$(new_window.document.body).html('<textarea id="MySource">'+escapeHtml(doc_source)+'</textarea>'); 
```

第 6 步 - 从打开的窗口文本区域复制粘贴代码

如果你想用 PHP 来做，你可以很容易地用 curl 下载页面并根据需要操作内容和保存文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-12T04:47:07.577

您可以使用[Requestly 之类的浏览器扩展程序](https://chrome.google.com/webstore/detail/requestly-redirect-url-mo/mdnleldcmiljblolnjhpnblkcekpdkpa/)[在网页上注入自定义 Javascript/](https://requestly.io/feature/insert-custom-scripts/) CSS 。

这就是你可以做到的。

1.  下载请求和打开[规则页面](https://app.requestly.io/rules)
2.  创建新规则并选择插入自定义脚本/CSS 规则类型
3.  输入您的域（或页面 URL 模式）并定义您的脚本

## 屏幕截图 - 插入脚本规则

[![请求插入脚本功能](../Images/19b9e3d5434d23de2decaff495137122.png)](https://i.stack.imgur.com/G9Qwq.png)

如果您正在寻找**跨浏览器解决方案**，那么您可以使用[Requestly 桌面应用程序](https://requestly.io/desktop/)并类似地配置您的规则。

在您的特定情况下，您可以选择一个选项，例如在页面加载后运行脚本，以便在修改/注释它们之前所有 DOM 元素都存在于页面上。

*免责声明 - 我请求构建*

# operating-system - 管理程序和 Java 虚拟机

> ID：14273118
> 
> 赞同：7
> 
> 时间：2013-01-11T06:48:24.020
> 
> 标签：operating-system, jvm, virtualization

我想问的问题是：

1) 管理程序到底是做什么的？为什么需要它？

2）hypervisor和Java Virtual mMchine有什么区别？

3) JVM 是否使用管理程序？

4）当像linux这样的主机操作系统可以处理多个客户操作系统时，为什么要使用管理程序？

如果有人对此有所了解，将会有很大帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T06:58:03.620

在回答您的问题之前，我建议您在维基百科中搜索相关条目。管理程序用于运行多个客户操作系统，而 JVM 用于解释 Java 字节码。JVM 运行在操作系统之上，它不关心操作系统是运行在裸机之上还是在管理程序之上。实际上，linux 可以使用作为 linux 内核一部分的 KVM 处理多个客户操作系统。所以最后一个问题的描述是完全错误的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-02T08:26:48.120

1.  管理程序或虚拟机管理器是允许多个操作系统共享单个硬件主机的程序。
2.  JVM 或 Java 虚拟机为计算机处理器解释字节码，以便它可以执行 Java 程序指令。
3.  没有 JVM 不使用管理程序，因为它不是运行操作系统的虚拟机，而只是一个解释器。
4.  主机操作系统使用 Hypervisor 或虚拟机管理器管理不同的 VM

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-16T16:25:45.297

1.  Hypervisor 也称为硬件虚拟化，是一个虚拟化层，允许在其上运行一个或多个本机操作系统，就好像它们在物理机器上运行一样。它类似于仿真，但只运行在没有 Hyperviser 的情况下能够运行的操作系统，这要快得多。

2.  两者都是虚拟化层。然而，Java 针对性能和可移植性进行了优化。虽然 Java 在技术上是一个模拟器，但它比管理程序快得多。这是可以实现的，因为仿真平台是为快速仿真而设计的。Java 不运行 x86 或 x86_64/amd64 代码，它运行称为字节码的东西。字节码的技术术语是中间语言 (IL)。当您运行它时，它会被即时编译器 (JIT) 编译为处理器的本机代码。当 JIT 进行编译过程时，它可以确保程序遵循 Java:s 安全约束，只需不生成违反此类约束的代码。Hypervisor 通过拦截所谓的特权指令和模拟磁盘驱动器等设备来强制执行安全约束。这样做是因为原生 x86 或 x86_64/amd64 代码对于程序来说非常难以理解，并且更改它以使其自我实施安全约束几乎是不可能的。另一方面，Java 运行字节码，程序很容易理解和机会，因此它可以自我执行安全规则。

简短的回答：管理程序比 Java 慢，但允许您运行大量完整的操作系统以及所有可用的软件。这虽然 Java 速度更快，但您只能在其上运行 Java 软件。如果你想在你的虚拟机中运行 Windows 和 Office，你不能在 Java 中做到这一点。

1.  我想我在上面回答了这个问题，但没有，它使用代码检查并修改程序，以便它自我执行安全规则。可以这样做是因为可运行的 Java 应用程序处于称为字节码的中间状态，这对于 Java 来说很容易理解、检查、查找可能违反规则的代码并对其进行修改以遵守它们。这是一个相当复杂的过程，与管理程序相比有几个优势。第一个优点是“编译一次，到处运行”，因为 Java 是作为字节码编译和分发的。第二个优势是速度，即使在强制执行严格的安全性时，JIT:ed 代码也具有与非虚拟化代码相同的速度。缺点是只能运行字节码程序，所以你不能在虚拟机中运行 Windows 或 Linux。

2.  如果您正在运行另一个操作系统，如 Windows 或另一个 Linux 发行版 - 您正在运行一个 Hyperviser。KVM、Xen 和 VirtualBox 是 Hypervisor 的示例。您还可以使用一个共享内核运行多个 Linux 实例，称为基于操作系统的虚拟化或“容器”。但是一个容器共享内核，因此您只能使用您正在运行的操作系统的虚拟机。容器的优势在于它更轻量级，因为您不需要在彼此之上运行多个内核......

# javascript - 有没有办法仅在尚未安装应用程序的情况下为移动设备浏览器启动弹出窗口？

> ID：14273121
> 
> 赞同：3
> 
> 时间：2013-01-11T06:48:31.123
> 
> 标签：javascript, android, iphone, ipad

我正在寻找一种在通过移动浏览器查看网站时启动弹出窗口的方法，询问用户是否愿意安装我们的应用程序。但我只希望在尚未安装应用程序时出现弹出提示。

我使用了以下 JavaScript（适用于 Apple 设备：

```
<script type="text/javascript">
if( /iPad|iPhone/i.test(navigator.userAgent) ) {
var url=confirm("Would you like to download our mobile application?");
if (url==true)
{
var url = window.location.href = 'http://www.itunes.com';
url.show(); 
}
else
{
}
}
</script> 
```

正如这里所讨论的：[App notification popup mobile device web browser](https://stackoverflow.com/questions/11617748/app-notification-popup-mobile-device-web-browser)

但是，无论如何，此弹出窗口都会在 iOS 上启动。我知道您可以在此处检查应用程序 url 方案（并确定是否安装了应用程序）：[如何从移动浏览器启动应用程序（facebook/twitter/etc），但如果未安装应用程序，则回退到超链接](https://stackoverflow.com/questions/13675535/is-there-a-way-to-detect-if-you-can-launch-facebook-twitter-apps-from-the-browse)

我可以通过结合这两种技术来做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-17T14:12:13.790

如果您的应用具有自定义 URL 方案，您可以使用它：

```
<script type="text/javascript">
function startMyApp()
{
  document.location = 'appCustomScheme://';
  setTimeout( function()
  {
      if( confirm( 'Install app?'))
      {
        document.location = 'http://itunes.apple.com/us/app/yourAppId';
      }
  }, 300);
 }
</script> 
```

并在页面加载时调用该函数`startMyApp()`，或者如果您需要将其绑定到某个 javascript 事件（单击等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:59:43.947

如果您尝试检测设备中是否安装了 twitter 或 Facebook，您可以在脚本中使用它。

```
var url = window.location.href = 'fb://'; 
```

推特

```
var url = window.location.href = 'twitter://'; 
```

如果它不起作用，请尝试取出 //。上述语句将打开 twitter 或 facebook 应用程序，您可以在 if 循环或其他东西中使用它来检测设备上是否安装了应用程序。

# c - 迭代 int 指针时破坏堆栈

> ID：14273129
> 
> 赞同：0
> 
> 时间：2013-01-11T06:48:59.897
> 
> 标签：c, stack, gcc-warning, stack-smash

我对 C 很陌生，我正在尝试编写一个实用程序来打开所有处理 EV_KEY 事件的事件处理程序，并给我一个文件描述符列表（当它们仍然打开时）。执行所有这些操作的函数*似乎*运行正常，当我尝试遍历文件描述符时，我得到了一个粉碎的堆栈错误。我尝试使用 gcc 的 -Wall 标志编译每个 C 文件以查找可能导致问题的原因，但它并没有帮助我。这是我的代码：

```
int *get_key_handlers() {

    int *fds;
    int fd;
    int num_handlers = 0;
    struct dirent *dp;
    DIR *dir;
    char full_path[100];
    char *base_path = "/dev/input/";

    printf("Creating file descriptor array\n");
    fds = malloc(sizeof(int*)*32);   // not currently going to bother
                                     //   with more than 32 handlers

    printf("Opening event handler directory\n");
    if (!(dir = opendir(base_path))) {
        return 1;
    }

    printf("Beginning reading through directory\n");
    while ((dp = readdir(dir))) {

        if (dp->d_name && !strncmp(dp->d_name, "event", 5)) {

            // cat the base path and device name, store in full_path
            snprintf(full_path, sizeof(full_path), "%s%s", base_path, dp->d_name);
            printf("Found handler at %s\n", full_path);
            fd = open(full_path, O_RDONLY);

            printf("Detecting handler features...\n");
            unsigned char results[EV_MAX/8+1];
            memset(results, 0, sizeof(results));
            ioctl(fd, EVIOCGBIT(EV_KEY, EV_MAX), results); 
            printf("Features determined\n");
            printf("EV_KEY: %d\n", EV_KEY);
            if (test_bit(*results, EV_KEY)) {
                printf("EV_KEY feature detected on %s\n", full_path);
                fds[num_handlers] = fd;
                num_handlers++;
            } else {
                printf("EV_KEY feature NOT detected on %s\n", full_path);
                close(fd);
            }
            printf("Done with handler at %s\n", full_path);
        }
    }
    printf("Finished creating handler list\n");

    fds = realloc(fds, sizeof(int*) * num_handlers);
    printf("Handler list re-sized\n");
    return fds;
} 
```

下面是调用 get_key_handlers() 函数的代码：

```
int main() {
    int *fds = get_key_handlers();
    int i = 0;
    for (i = 0; i < (sizeof(fds)/sizeof(int*)); i++) {
        printf("Next file descriptor: %d\n", *(fds + (i * sizeof(int*))));
    }

    free(fds);
    return 0;
} 
```

最后，这是我正在运行以编译和链接的命令，以及程序的运行时输出：

```
tim@tim-ubuntu:~/Documents/Programming/C/clogger$ gcc -c -Wall thinput.c
thinput.c: In function ‘get_key_handlers’:
thinput.c:21:9: warning: return makes pointer from integer without a cast [enabled by default]
tim@tim-ubuntu:~/Documents/Programming/C/clogger$ gcc -c -Wall thinputtest.c
tim@tim-ubuntu:~/Documents/Programming/C/clogger$ gcc thinput.o thinputtest.o -o thinputtest
tim@tim-ubuntu:~/Documents/Programming/C/clogger$ sudo ./thinputtest
Creating file descriptor array
Opening event handler directory
Beginning reading through directory
Found handler at /dev/input/event15
Detecting handler features...
Features determined
EV_KEY: 1
EV_KEY feature NOT detected on /dev/input/event15
Done with handler at /dev/input/event15
Found handler at /dev/input/event14
Detecting handler features...
Features determined
EV_KEY: 1
EV_KEY feature detected on /dev/input/event3
Done with handler at /dev/input/event3
Found handler at /dev/input/event2
Detecting handler features...
Features determined
EV_KEY: 1
EV_KEY feature NOT detected on /dev/input/event1
Done with handler at /dev/input/event1
Found handler at /dev/input/event0
Detecting handler features...
Features determined
EV_KEY: 1
EV_KEY feature NOT detected on /dev/input/event0
Done with handler at /dev/input/event0
Finished creating handler list
Handler list re-sized
*** stack smashing detected ***: ./thinputtest terminated
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(__fortify_fail+0x37)[0x7f0ef8658807]
/lib/x86_64-linux-gnu/libc.so.6(__fortify_fail+0x0)[0x7f0ef86587d0]
./thinputtest[0x400ac7]
======= Memory map: ========
00400000-00401000 r-xp 00000000 08:02 7215828                            /home/tim/Documents/Programming/C/clogger/thinputtest
00601000-00602000 r--p 00001000 08:02 7215828                            /home/tim/Documents/Programming/C/clogger/thinputtest
00602000-00603000 rw-p 00002000 08:02 7215828                            /home/tim/Documents/Programming/C/clogger/thinputtest
01b88000-01ba9000 rw-p 00000000 00:00 0                                  [heap]
7f0ef8338000-7f0ef834d000 r-xp 00000000 08:02 5247337                    /lib/x86_64-linux-gnu/libgcc_s.so.1
7f0ef834d000-7f0ef854c000 ---p 00015000 08:02 5247337                    /lib/x86_64-linux-gnu/libgcc_s.so.1
7f0ef854c000-7f0ef854d000 r--p 00014000 08:02 5247337                    /lib/x86_64-linux-gnu/libgcc_s.so.1
7f0ef854d000-7f0ef854e000 rw-p 00015000 08:02 5247337                    /lib/x86_64-linux-gnu/libgcc_s.so.1
7f0ef854e000-7f0ef8703000 r-xp 00000000 08:02 5247958                    /lib/x86_64-linux-gnu/libc-2.15.so
7f0ef8703000-7f0ef8902000 ---p 001b5000 08:02 5247958                    /lib/x86_64-linux-gnu/libc-2.15.so
7f0ef8902000-7f0ef8906000 r--p 001b4000 08:02 5247958                    /lib/x86_64-linux-gnu/libc-2.15.so
7f0ef8906000-7f0ef8908000 rw-p 001b8000 08:02 5247958                    /lib/x86_64-linux-gnu/libc-2.15.so
7f0ef8908000-7f0ef890d000 rw-p 00000000 00:00 0 
7f0ef890d000-7f0ef892f000 r-xp 00000000 08:02 5255999                    /lib/x86_64-linux-gnu/ld-2.15.so
7f0ef8b08000-7f0ef8b0b000 rw-p 00000000 00:00 0 
7f0ef8b2b000-7f0ef8b2f000 rw-p 00000000 00:00 0 
7f0ef8b2f000-7f0ef8b30000 r--p 00022000 08:02 5255999                    /lib/x86_64-linux-gnu/ld-2.15.so
7f0ef8b30000-7f0ef8b32000 rw-p 00023000 08:02 5255999                    /lib/x86_64-linux-gnu/ld-2.15.so
7fffbd9b4000-7fffbd9d5000 rw-p 00000000 00:00 0                          [stack]
7fffbd9ff000-7fffbda00000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall] 
```

非常感谢您花时间帮助我解决这个问题；我感谢任何给我的建议或批评！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:10:14.470

`ioctl`尺寸错误：

```
ioctl(fd, EVIOCGBIT(EV_KEY, EV_MAX), results); 
```

将该行更改为：

```
ioctl(fd, EVIOCGBIT(EV_KEY, sizeof(results)), results); 
```

您`results`通过告诉`EVIOCGBIT`它有`EV_MAX`字节要填充而它只有`EV_MAX`÷8 来间接写入边界之外，因此您的堆栈被丢弃了。由于堆栈粉碎检测的工作方式，它只能检测一次`return`。

为了让您信服，请查看[drivers/input/evdev.c](http://lxr.linux.no/#linux+v3.7.1/drivers/input/evdev.c#L563)中的评论，它说：

```
/*
 * Work around bugs in userspace programs that like to do
 * EVIOCGBIT(EV_KEY, KEY_MAX) and not realize that 'len'
 * should be in bytes, not in bits.
 */ 
```

# database - 从数据库中检索magento中的客户密码

> ID：14273133
> 
> 赞同：0
> 
> 时间：2013-01-11T06:49:16.660
> 
> 标签：database, django, zend-framework, magento, passwords

我已将我的项目站点从 magento 迁移到 django，这是一个拥有数百万用户的站点。我已经成功地从站点导入了所有数据，但我遇到的主要问题是迁移客户数据库，尤其是使用密码，因为显然我不能为 django 站点上的每个客户提供新密码，因为它会非常耗时。并且为客户重新设置密码，会非常烦人，很多客户会从网站上流失。

请给我一些想法如何从数据库中检索magento中的客户密码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T06:58:50.893

您无法恢复密码。Magento 使用带盐的散列来存储密码（根据版本为 md5 和 sha1）。

只有您可以做的事情 - 重置密码或在您的站点中实现与在 magento 中相同的密码检查功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:33:39.470

乍一看，django 使用它来存储它的密码，`md5${salt}${hashed_password}`并且它们预先添加了盐。在这种情况下，您应该能够获取 Magento 密码并重新格式化字符串，以便它通过 django 密码检查。

```
$hashArr = explode(':', $hash);
$newPasswordString = 'md5$'.$hashArr[1].'$'.$hashArr[0]; 
```

此答案的可行性/准确性将取决于您使用的是社区/专业版还是企业版。该代码基于社区代码，因为我可以更自由地共享它，这取决于企业的实现可能或不可能，您需要检查`Mage_Core_Model_Encryption:validateHash`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T15:38:34.410

如果您从遗留系统中保留旧的和弱的哈希值，您就会危及您的用户。

如果某些攻击者（或某些邪恶的管理员）获得了对哈希值和用户数据的访问权，他可以轻松破解它们（参见例如[http://hashcat.net/oclhashcat-plus/](http://hashcat.net/oclhashcat-plus/)）并在全球范围内使用它们来对抗您的用户正在使用的任何服务（当然建议用户不要重复使用密码，使用强密码等，但许多人不会知道或忽略这一点）。

*除了*bcrypt、pbkdf2、shaXXX_crypt之外，弱散列是关于任何东西的。甚至像随机加盐的 sha256 这样的东西也必须被认为是弱的。

因此，一个健全的程序可能是：

1.  不要只直接支持弱哈希
2.  导入弱散列，但使用强算法再次散列它们：strong(weak(cleartext))
3.  在登录时，将双散列的东西升级为强（明文）
4.  以这种模式运行系统一段时间，您的频繁用户有时会拥有强（明文）哈希。
5.  要摆脱内部的 weak() 哈希，使所有此类哈希无效（这只会影响您不经常使用的用户），向用户发送密码重置链接和一些联系信息以备不时之需。在电子邮件中，您可以指出您非常关心安全性，并且重置对于改进它是必要的。如果不经常使用的用户仍然对您的服务感兴趣，他只会重置他的密码。如果他不再感兴趣，他将忽略该电子邮件。在任何情况下，您的密码存储中都不会再有一个双哈希密码，而只是一个无效密码。
6.  禁用对内部 weak() 散列的支持，以便在站点配置中进行双重散列。
7.  不赞成在软件中支持内部散列/双散列。
8.  稍后，删除软件中对内部哈希/双重哈希的支持，以简化它。

注意：如果遗留系统存在安全漏洞，则无法选择旧哈希，因为您必须考虑暴露密码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T19:14:58.377

Cags 的答案对我有用。我正在从 Magento 社区版 1.7 迁移到 Django-Oscar。

我只有几百个用户需要移动，但重置他们的密码不是一种选择。

为了方便...

他的代码的python版本：

```
hash = xxxxxxxxxxxxxxxxx:xx  # The hash from Magento DB table customer_entity_varchar
splithash = hash.split(':')
djangopass = 'md5$' + splithash[1] + '$' + splithash[0] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T08:19:57.173

这可能是您寻求的指南：

[如何解密magento企业版密码？](https://stackoverflow.com/questions/13643618/how-to-decrypt-magento-enterprise-edition-password)

# c++ - 使用 Assert 和 NULL 指针验证哪个更好用

> ID：14273137
> 
> 赞同：6
> 
> 时间：2013-01-11T06:49:35.073
> 
> 标签：c++, visual-c++, assert

在进行编程时，我使用断言以及 NULL 指针验证。

但据我所知，断言仅在**调试**模式下有用。

我的问题是假设我有一个内部指针，我确信它不能是返回指针的 N​​ULL 示例函数（但指针不是类的成员），在这种情况下我可以使用**断言**

```
test* ptr = fun(); // return a pointer of type test
assert(ptr);

//do some operation 
```

或**NULL**指针验证

```
test* ptr = fun(); // return a pointer of type test
assert(ptr);
if (NULL != ptr)
{
    //do some operation
} 
```

这里哪个代码实践是好的。根据我的理解，它将是第二个。因为我遇到过一些情况，由于一些我们甚至想不到的异常情况，**ptr**的值返回**NULL 。**

但是我们还有其他更好的选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T07:08:02.687

`assert`说“如果这不是真的，我的代码中有逻辑错误”。如果您正在编写代码来处理指针可能为空的事实，那么断言调用是多余的。您应该将日志记录和处理添加到“其他”案例中。这样，您的调试版本将以与发布版本相同的方式运行，即使在空指针情况下也是如此。

如果您的意思是断言并且您必须在空指针上中止，那么在您的发布版本中启用断言或使用另一种启用发布的断言机制。

仅调试断言的唯一原因是检查在发布代码中成本太高的逻辑错误。通常，对指针的空检查不属于此类别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T06:58:37.430

真正的解决方案取决于函数的语义`fun`。

如果返回`NULL`在语义上无效，那么我认为`fun`应该抛出一个适当的异常（例如`std::logic_error`¹）而不是返回`NULL`，并且您可以`assert`在调用站点上使用以确保它`fun`工作正常，如果它不能正常工作，则中止程序. 通过这种方式，错误`fun`不会传播到程序的其余部分，因为它会立即被捕获。

但是，如果`NULL`从`fun` 语义上返回是有效的，那么您应该检查调用站点上的返回值，`if`并且`assert`在这种情况下并不真正需要，因为`if`无论如何您都会使用。

^(1\. 或者你可以使用`std::runtime_error`or `std::domain_error`。)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T07:06:12.873

我建议您使用自己的代码进行断言。如您所说，断言仅在调试模式下有效。

所以，如果它在发布模式下工作，它就不起作用。

如果您使用自己的断言代码。您可以简单地找出问题所在。

```
test* ptr = fun(); // return a pointer of type test
MyOwnAssert(ptr); 

void MyOwnAssert(void* pPointer)
{
   if (NULL == pPointer)
     abort();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T06:57:10.677

正如您所提到的，断言仅在调试期间，帮助程序员确定他们出错的地方。它在生产中没有任何价值，因此，如果您对指针可能为 NULL 有任何疑问，我更喜欢使用第二种方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T07:11:41.873

你对 assert 所做的选择是你自己的选择：如果你愿意，你可以在生产中使用。

我想说，如果您想及早发现错误，使用 assert() 会更好。特别是如果它是一个 NULL 指针的事实不应该发生。
您甚至可以在其中插入一个[Google Breakpad](http://code.google.com/p/google-breakpad/)，这样每当您点击 NULL 指针时，您就会发送一份包含完整堆栈的报告。

在可能存在 NULL 指针的情况下（有时是预期的......），那么我猜 NULL 检查会更好。但我想说的是，此时你的代码在某种程度上是错误的，如果它必须适应被传递的 NULL 指针。

# opencv - OPEN CV 程序执行错误？

> ID：14273139
> 
> 赞同：0
> 
> 时间：2013-01-11T06:49:39.083
> 
> 标签：opencv

我在 Eclipse 中运行下面的代码，我已经成功地包含了路径和库，但是当运行代码时它显示一个错误。

```
 #include <cv.h>
 #include<stdio.h>
 #include <highgui.h>
  //using namespace cv;
 int main()
{     
 Mat image;
 image = imread( argv[1], 1 );

 if( argc != 2 || !image.data )
  {
    printf( "No image data \n" );
    return -1;
  }

 namedWindow( "Display Image", CV_WINDOW_AUTOSIZE );
 imshow( "Display Image", image );

 waitKey(0);
   printf("this is open cv programming");

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T06:59:40.053

您的 main() 签名不完整

尝试

```
int main(int argc, char* argv[]) 
```

这些参数代表：

```
argc  // an int indicating the number of arguments passed in to the function

argv[]  // an array of character strings, the actual arguments. 
```

第一个参数 argv[0] 是程序名……所以 argc 总是最小的 1。

第二个参数 argv[1] 将是您的用户传入的第一个参数，使 argc 达到 2。这就是您的程序所期望的，来自用户的单个参数 argc == 2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:01:06.637

尝试使用最新版本的 OpenCV 即 2.4.3 ....但是现在您可以尝试链接调试库，例如 opencv_core2.4.xd 并运行程序以使 Mat 图像格式正常工作。

你用的是什么版本的opencv？尝试以下代码并测试...获取一些图片并运行它...

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>

using namespace cv;

int main()
{
  Mat im = imread("C:\\some_picture.jpg");
  if(im.empty())
     return -1;
  imshow("TEST",im);
  waitKey();

  return 0;
} 
```

# spring - @Cacheable 与 Spring 3.1

> ID：14273141
> 
> 赞同：1
> 
> 时间：2013-01-11T06:49:42.857
> 
> 标签：spring, jakarta-ee, caching, ehcache

我将**@Cacheable**与**Spring 3.1**一起使用。我对 Cacheable 中的值和键映射参数有点困惑。这是我正在做的事情：

```
@Cacheable(value = "message", key = "#zoneMastNo")
public List<Option> getAreaNameOptionList(String local, Long zoneMastNo) {
//..code to fetch data form database..
return list;
}

@Cacheable(value = "message", key = "#areaMastNo")
public List<Option> getLocalityNameOptionList(String local, Long areaMastNo) {
//..code to fetch data form database..
return list;
} 
```

这里发生了什么，第二种方法取决于第一种方法的选定值，但问题是假设当我通过**zoneMastNo = 1 和 areaMastNo = 1**时，第二种方法返回第一种方法的结果。实际上，我有很多服务，因此我希望为特定用例使用可缓存的通用值。现在我的问题是：

*   我该如何解决这个问题？
*   为每个服务使用可缓存是个好主意吗？
*   指定时间后将缓存完全从内存中删除而不使用 @CacheEvict ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:58:58.070

> *   我该如何解决这个问题？

我假设`zoneMastNo`并且`areaMastNo`是完全不同的键，我的意思是`List<Option>`for `zoneMastNo`=`1`与`List<Option>`for `areaMastNo`=不同`1`。这意味着您需要**两个缓存**- 一个按区域键控，另一个按区域键控。但是，您只明确使用了一个名为`message`. 引用[*29.3.1 @Cacheable 注释*](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/cache.html#cache-annotations-cacheable)：

> ```
> @Cacheable("books")
> public Book findBook(ISBN isbn) {...} 
> ```
> 
> 在上面的代码片段中，方法 findBook 与名为 的缓存相关联`books`。

因此，如果我理解正确，您基本上应该使用两种不同的缓存：

```
@Cacheable(value = "byZone", key = "#zoneMastNo")
public List<Option> getAreaNameOptionList(String local, Long zoneMastNo)
//...
@Cacheable(value = "byArea", key = "#areaMastNo")
public List<Option> getLocalityNameOptionList(String local, Long areaMastNo) 
```

您还确定这些方法不会根据`local`参数产生不同的结果吗？如果不是，它是用来做什么的？

* * *

> 为每个服务使用可缓存是个好主意吗？

不，原因如下：

*   有些方法足够快
*   ...并且缓存本身引入了一些开销
*   某些服务调用其他服务，您是否需要在每个层次结构级别上进行缓存
*   缓存需要内存，很多
*   缓存失效很难

* * *

> 指定时间后将缓存完全从内存中删除而不使用 @CacheEvict ？

这完全取决于您的缓存实现。但是每个理智的实现都有这样的选择，例如 EhCache。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:57:02.500

问题3：这取决于你的缓存过期配置。如果您使用 ehcache，请更改 ehcache.xml 中的设置。

# html - CSS跨度浮动

> ID：14273147
> 
> 赞同：0
> 
> 时间：2013-01-11T06:50:05.277
> 
> 标签：html, css

在下面的 HTML 中，我想在同一行显示 span 和 h2，两者都向左浮动。span 中的文本较少，但 h2 的文本较多，因此应该继续到下一行，但似乎我做错了什么：

**HTML：**

```
<div>
    <span>hello</span>
    <h2>This should start after the span, and continue to next line.</h2>
</div> 
```

**CSS：**

```
div{  
  border: 1px solid red;
  width: 150px;
  overflow: hidden;
}

span{
  display: inline-block;
  float: left;
  border:1px solid green;
}

h2{
  display: inline-block;
  float: left;
} 
```

**演示：http:** [//jsfiddle.net/ZnSBJ/](http://jsfiddle.net/ZnSBJ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:52:48.570

删除`float:left`并`h2`更改`inline-block to inline`

```
h2{
  display: inline;
} 
```

**[演示](http://jsfiddle.net/ZnSBJ/2/)**

* * *

如果您希望 h2 像框一样，请指定宽度

```
h2{
  display: inline-block; width:100px
} 
```

**[演示 2](http://jsfiddle.net/ZnSBJ/3/)**

# python - ImportError：谷歌应用引擎上没有名为flask的模块

> ID：14273149
> 
> 赞同：3
> 
> 时间：2013-01-11T06:50:18.600
> 
> 标签：python, google-app-engine, flask, virtualenv

我正在学习本[教程](http://f.souza.cc/2010/08/flying-with-flask-on-google-app-engine.html)，并且正在尝试开发一个基本的 Flask 应用程序以在 Google App Engine 上运行。我正在使用 Windows，并且在每一步都完全按照指南进行操作。

1.  我已经设置了我的虚拟环境并使用虚拟环境解释器测试了烧瓶是否在其中`import sys`并且它在那里。simpleJson、Werkzeug 和 Jinja2 也在那里。`pip install`我在虚拟环境中安装了它们。

2.  检查日志后，我只得到一个`<type 'exceptions.ImportError'>`说法：

> ```
> <type 'exceptions.ImportError'>: No module named flask 
>       args = ('No module named flask',) 
>       message = 'No module named flask' 
> ```

1.  这是我的文件夹结构：

> ```
> gae/
>    /app/
>       __init__.py
>       models.py
>       settings.py
>       views.py
>    /venv/
>          /Include
>          /Lib
>          /Scripts
>    /flask/
>    /simplejson/
>    /werkzeug/
>    /jinja2/
> 
>    app.yaml
>    main.py 
> ```

我在这里阅读了不同的问题并搜索了类似的问题，但是在尝试了几种可能的解决方案之后，我仍然无法解决它。在这一点上，我不知道我错过了什么，我是烧瓶和 GAE 的新手。关于我做错了什么的任何建议？提前致谢。

这是我的**初始化**.py：

```
from flask import Flask
import settings

app = Flask('app')
app.config.from_object('app.settings')

import views 
```

这是我的 app.yaml：

```
application: app
version: 1
runtime: python
api_version: 1

handlers:
- url: .*
  script: main.py 
```

这就是我的 requirements.txt 的样子：

```
Flask==0.9  
Jinja2==2.6 
Werkzeug==0.8.3 
simplejson==3.0.7 
```

这是我的 main.py：

```
from google.appengine.ext.webapp.util
import run_wsgi_app from app import app

run_wsgi_app(app) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T20:05:12.227

查看我对类似问题的回答，逐步解释如何在 Windows 上运行 Python、Flask、Virtualenv 和 Google App Engine，并验证您是否以相同的方式进行操作： [Can't import Flask while using Google App Engine](https://stackoverflow.com/questions/10151294/cant-import-flask-while-using-google-app-engine/14248871#14248871)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:15:41.437

访问下面给出的链接；它是一个样板项目模板，用于在 Google App Engine (Python) 上运行基于 Flask 的应用程序
[https://github.com/kamalgill/flask-appengine-template](https://github.com/kamalgill/flask-appengine-template)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-11T22:15:22.203

尝试在根 gae 目录中粘贴一个空白的**init .py 文件，然后进行导入：**

```
from gae.flask import Flask 
```

# java - Intellij IDEA. Always show maven's `target` directory

> ID：14273153
> 
> 赞同：31
> 
> 时间：2013-01-11T06:50:37.787
> 
> 标签：java, maven, intellij-idea

When creating maven project using Intellij IDEA, by default `target` directory is not visible in Project explorer. But I can make it visible by removing it from excluded folders in module settings. But it work only for short period of time, and after 10-15 minutes `target` directory again invisible. So I need again go to module settings and remove `target` directory from Excluded directories.

How I can make visible maven's `target` directory forever?

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-11T13:33:10.823

Try to uncheck the **Exclude build directory** checkbox under `Settings - Project Settings - Maven - Importing`.

Description from IDEA help:

> Select this check box to exclude a build directory from the project. This might be useful, if you want to speed up the project's importing process . If this check box is cleared, IntelliJ IDEA will index files in the build directory every time you import a project which might take additional time.

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2014-11-23T14:39:42.117

In IDEA version 14 or higher you can try to uncheck "show excluded files" in the project panel set. It is checked by default. I found this solution [here](https://youtrack.jetbrains.com/issue/IDEA-129233#comment=27-791816).

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-31T12:34:24.173

This can be directly configured in File -> Project Structure -> Modules -> {select your module} -> Sources

There you will see which folders are excluded from being shown in Project explorer. Just remove the "target" from the exclusion list and it will be shown from that moment on.

# java - 如何将一个小程序的内容变成一个图像？

> ID：14273157
> 
> 赞同：1
> 
> 时间：2013-01-11T06:51:09.553
> 
> 标签：java, applet, bufferedimage, graphics2d

> **可能重复：**
> [将 Graphics2D 转换为 Image 或 BufferedImage](https://stackoverflow.com/questions/6575578/convert-a-graphics2d-to-an-image-or-bufferedimage)

对不起。这是一个非常基本的问题。但我对这个平台很陌生。我正在使用 graphics2d 绘图功能绘制一条线。我想将此作为图像保存到我的系统中。我用谷歌搜索了它，发现`BufferedImage`该类在执行此操作时很有用，然后使用 imagedraw 函数。

但我无法弄清楚如何在我的代码中准确使用它。谁能帮帮我吗？

这是我的代码。

```
import javax.imageio.ImageIO;
import javax.swing.*;
import java.awt.event.*;
import java.awt.geom.Line2D;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

public class DrawAndSaveImage extends JApplet {
    public void init() {
        setBackground(Color.lightGray);
    }

public void paint(Graphics g) {
    Graphics2D g2d = (Graphics2D) g;
    g2d.setPaint(Color.black);
    g2d.draw(new Line2D.Double(50,150,150,150 ));

}

public static void main(String s[]) {
    JFrame frame = new JFrame("sample image");
    JApplet applet = new DrawAndSaveImage();
    frame.getContentPane().add("Center", applet);
    applet.init();
    frame.setSize(200, 200);
    frame.show();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:58:16.180

首先，您可以像这样创建一个`BufferedImage`实例：

```
 private BufferedImage image = new BufferedImage(600, 800, BufferedImage.TYPE_INT_RGB); 
```

然后你可以从中获取`Graphics2d`对象：

```
 Graphics2D g2d = image.createGraphics(); 
```

然后，您可以使用[`ImageIO`](http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html)API 来保存图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T07:01:08.447

1.  `JFrame`并且`main`不应该在小程序中使用，除非您尝试创建混合应用程序。

2.  不要覆盖`paint()`方法

3.  用于`SwingUtilities.invokeLater()`创建 GUI

4.  Applet 不允许写入/读取外部文件，除非它已签名

5.  `ImageIO.write()`可以将图像写入文件

# assembly - 软件看门狗定时器复位 MPC875 CPU 太快

> ID：14273159
> 
> 赞同：3
> 
> 时间：2013-01-11T06:51:15.007
> 
> 标签：assembly, embedded, hardware, powerpc, watchdog

我在 MPC875 cpu 上使用软件看门狗定时器时遇到问题：

定时器触发复位信号非常快：在打开定时器和接收复位信号之间，我得到的时间不到半秒，尽管我在启用预分频的情况下将倒计时值 (SWTC) 设置为最大值。

这是我的做法（JTAG 脚本）：

```
CF   TAR      875
CF   GRP      400F

INN

SR  PLPRCRK 0x55CCAA33
SR  PLPRCR  0x1A4D5000  ; Configure Phase-Lock Loop

SR  SCCRK   0x55CCAA33
SR  SCCR    0xF47F0002  ; Configure System Clock

SR  SYPCR   0xFFFFFF87  ; Enable the Software Watchdog Timer

SR SWSR 0x556c  ; Reset the timer
SR SWSR 0xaa39

SR SWSR 0x556c
SR SWSR 0xaa39

SR SWSR 0x556c
SR SWSR 0xaa39

SR SWSR 0x556c
SR SWSR 0xaa39

SR SWSR 0x556c
SR SWSR 0xaa39

SR SWSR 0x556c
SR SWSR 0xaa39

SR SWSR 0x556c
SR SWSR 0xaa39  ; The HRESET issued after few moments from this point 
```

`SR SWSR`启用预分频（SYPCR 中的 SWP 位）后，它会在最后一次计数器复位（最新命令）后大约半秒内断言 HRESET 信号。如果我禁用预分频器，HRESET 信号甚至在第一次修改 SWSR 寄存器之前就断言（非常短的时间）。因此，Timer 似乎以某种方式响应了设置更改，但它的计时有问题。

系统时钟和锁相环应该配置正确，因为我们在已经建立和运行的应用程序（在 VxWorks 之上）上获得了相同的配置，但看门狗定时器关闭。

我还尝试清除 SYPCR 寄存器中的 SWF 位，以防止在 JTAG 停止 cpu 时计时器计数（通过断言 FRZ 信号）：然后它仅在我退出中断/步进模式之前工作，当我运行应用程序时，重置发生在很短的时间。

根据参考手册，定时器的工作方式如下：

![MPC885软件看门狗定时器图](../Images/7c5d961f80dc1a05284cda8976709e9d.png)

有一个递减计数器，当它达到零时，电路断言 HRESET 信号或引发系统复位中断。计数器有两个字节长，可选择预分频因子 2048。它以系统时钟除以 2048 的速率递减。因此，启用预分频器和最大计数器值的预期超时`1 / (80MHz / 2048) * (65535 * 2048)`约为 3435 秒。在禁用预分频器的情况下，它应该是大约 1.7 秒。实际值要小得多：预分频计数器约为 0.5 秒，而预分频器关闭时则小得多（甚至无法测量）。

根据图表，SWT 仅依赖于 Core Clock 和 SYPCR 寄存器，这里是寄存器描述：

![MPC885 系统保护控制寄存器 - 图](../Images/6fed299547eeef1bcc6e7010f7be6936.png) ![MPC885 系统保护控制寄存器 - 字段说明](../Images/d09b806186767c64b6801768157988b2.png)

我将值设置为 0xFFFFFF87 （实际上尝试了不同的选项），这意味着：

*   SWTC：0xFFFF（定时器计数，最大值在将魔术序列写入 SWSR 寄存器时加载到内部递减计数器（见图））。
*   BMT：0XFF（总线监控定时器计数，最大值）
*   BME：1（总线监视器已启用，并且没有必要关闭该位，因为无论配置的值如何，它始终使用 JTAG 启用）。
*   SWF：0（即使在 JTAG 断言 FRZ 信号时，定时器也会计数）。
*   SWE：1（看门狗已启用）。
*   SWRI：1（配置为断言 HRESET，切换到 NMI 没有帮助）。
*   SWP：1（SWTC 预标定系数为 2048）。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:59:21.957

你确定你的公式吗？看起来很奇怪。我希望像 1/(80MHz/2048/65536)=1.5 秒这样的值是看门狗最大周期的正确值。

# .net - Neo4jclient如何获取属性信息

> ID：14273165
> 
> 赞同：0
> 
> 时间：2013-01-11T06:51:43.417
> 
> 标签：.net, neo4j, neo4jclient

我是 neo4jclient 的新手，请考虑以下情况

节点：

```
name : Person A
age  : 25 
```

班级：

```
public class Person
{
    public string name { get; set; }
} 
```

使用以下查询

```
var persons = client
    .Cypher
    .Start("n", "node(*)")
    .Return<Node<Person>>("n")
    .Results
    .Select(un => un.Data); 
```

上述查询成功执行，但在`Person`对象中我只有“名称”属性，没有“年龄”属性。我的问题是：对于未在 Person 类中定义的属性，如何获取属性名称及其值。

是否可以获得所有属性名称和值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:11:07.090

在我看来，您想要获取未在您的 Person 类中定义的属性。我不相信有一种方法可以返回您的类中没有的属性。Neo4jClient 反序列化节点信息并将其放入您指定的对象类型中。为简单起见，我将更新您的 Person 类以反映添加到 Neo4j 中“Person”节点的任何新属性。

从节点获取所有属性名称和值需要对 Neo4jClient 进行一些修改并查询 Neo4j 的 REST API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T09:21:38.653

我同意@cameron-tinker，我认为没有办法直接从图形数据库中获取属性，不。

解决这个问题的最佳方法可能是创建一个类来简单地将节点的信息反序列化为，例如 PersonNode。

```
public class PersonNode
{
    public string Name { get; set; }
    public int Age { get; set; }
} 
```

然后，也许你可以在你的 person 类中有一个构造函数，它接受一个 person 节点来填充它。

```
public Person(PersonNode node)
{
    this.name = node.Name;
} 
```

然后您将调整您的密码查询以提取 PersonNodes，如下所示：

```
var persons = ((IRawGraphClient)client).ExecuteGetCypherResults<Node<PersonNode>>(
    new CypherQuery("start n=node(*) return n;", 
    null,CypherResultMode.Set)) .Select(un => un.Data); 
```

不是一个完全原创的答案，我真的只是在扩展卡梅伦的答案。但我希望这可以帮助您解决问题。

# ruby-on-rails - 配置资产在生产中压缩的错误

> ID：14273173
> 
> 赞同：0
> 
> 时间：2013-01-11T06:52:57.040
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2, production-environment

起初在production.rb

```
config.assets.compress = true 
```

我改变它并运行生产模式。现在所有的 css 和 js 都被组合起来并查看为

```
<link href="/assets/application-216f7d9bf69633b46766413cf646b8a5.css" media="all" rel="stylesheet" type="text/css" /> 
 <script media="all" src="/assets/application-cfa3f1d1e18cc9a8acfb0492bd8ae99e.js" type="text/javascript"></script> 
```

但现在我希望所有 css 和 js 单独加载而不是压缩模式所以我改变了

```
config.assets.compress = false 
```

现在我想让我的 ctrl U 像这样

```
<link href="/assets/bootstrap-wysihtml5/core.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/bootstrap-wysihtml5/wysiwyg-color.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/bootstrap-wysihtml5/index.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/app_modules.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/assets.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/authentications.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/bootstrap_and_overrides.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/companies.css?body=1" media="all" rel="stylesheet" type="text/css" /> 
```

我的意思是全部都是解压缩形式。但它不起作用..再次像以前一样以压缩形式出现。我是否必须清除缓存或我丢失的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:26:37.473

在您的 application.rb 中，您还需要为生产模式禁用资产管道。

*应用程序.rb*：

```
# Enable the asset pipeline
config.assets.enabled = false 
```

# c++ - 在向量中添加整数

> ID：14273174
> 
> 赞同：2
> 
> 时间：2013-01-11T06:53:08.663
> 
> 标签：c++, vector, integer

好的，我还有另一个挑战。我有一个问题要求我“将一组整数读入`vecto`r。打印每对相邻元素的总和。更改程序，使其打印出第一个和最后一个元素的总和，然后是第二个和倒数第二个，以此类推。”

目前，我已经设法让它添加连续的数字，而不是完全成对的，而是尽可能接近。

到目前为止`vectors`，我学到的唯一运算符以及问题想要我使用的是：`v.empty();` `v.size();` `v.push_back(t);` `v[n];` `v1 = v2;` `v1 = {a,b,c...};` `v1 == v2;` `v1 != v2;` `<`、、、、`<=``>``>=`

这是我现在的代码：

```
#include <iostream>
#include <string>
#include <vector>

using std::string; using std::vector; using std::cout; using std::cin; using std::endl;

int main ()
{
    vector<unsigned> numbers {5, 6, 7, 8, 9, 10, 11};
    unsigned sum;

    decltype(numbers.size()) count;
    for (count = 0; count < numbers.size(); ++count){
        sum = (numbers[count]++) + (numbers[count]);
        cout << sum << " ";
    }
} 
```

所以我可以得到它添加5 + 6；6+7；7 + 8 等等......但对于每一对和所有其他的，不是 100% 确定从哪里开始。任何指导将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:15:49.653

*打印每对相邻元素的总和。*

```
auto count = numbers.size();
for (auto i = 0; i < numbers.size()-1; i++)
{
    std::cout << (numbers[i] + numbers[i+1]) << "\t";
} 
```

*打印出第一个和最后一个元素的总和，然后是第二个和倒数第二个的总和，依此类推*

```
for (auto i = 0; i < count/2; ++i) 
{       
   std::cout << (numbers[i] + numbers[count - i -1]) << "\t";     
} 
```

注意：如果向量有奇数，第二次打印时不会计算中间的

查看[示例](http://ideone.com/jSBJb8)输出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:56:51.597

下面的两个循环打印（1）相邻对的总和和（2）相反元素的总和。

```
#include <cstddef>
#include <iostream>
#include <string>
#include <vector>

using namespace std;

int main ()
{
    vector<unsigned> numbers {5, 6, 7, 8, 9, 10, 11};
    auto N = numbers.size();

    std::cout << "first part\n";
    for (size_t i = 1; i < N; ++i) {
       std::cout << numbers[i-1] + numbers[i] << "\n";
    }

    std::cout << "second part\n";
    for (size_t i = 0; i < (N - 1 - i); ++i) {       
      std::cout << numbers[i] + numbers[N - 1 - i] << "\n";   
    }
    // in case you have an odd number of elements
    if (N % 2 == 1) std::cout << numbers[N / 2] << "\n";

} 
```

[LiveWorkSpace](http://liveworkspace.org/code/1Nnjhi%2412)上的输出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T08:49:14.683

嗨，我在 VS 上试过这个，它奏效了

```
vector <int> num;
num.push_back(5);
num.push_back(6);
num.push_back(7);
num.push_back(8);
num.push_back(9);
num.push_back(10);
int count = 0;
for(;count < (num.size()-1);count++)
{
        int sum =0;
        sum = num[count] + num[count+1];
        cout<<sum<<endl;
}
 for(int c =0; c < (num.size()-1);c++)
  {
   int altrsum = num[c]+ num[(num.size()-1)-c];
   cout<<altrsum<<endl;
  } 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T07:01:00.940

我认为您当前的代码不适用于不同的示例。您需要更改`numbers[count]++`为`numbers[count+1]`它才能工作，并将循环的结束条件更改为`size()-1`.

至于您的另一个问题，如果您只循环一半向量并添加`v[i] + v[v.size() - i - 1]`

编辑：按照 borisbn 在评论中的建议添加`-1`到`v[v.size() - i - 1]`

# ios - iOS 在我的应用程序中播放/执行 flash swf。Apple 会拒绝我的应用程序吗？

> ID：14273177
> 
> 赞同：1
> 
> 时间：2013-01-11T06:53:17.987
> 
> 标签：ios, flash, appstore-approval

我想在我的应用程序中使用诸如 lightspark / gnash / swfdec 之类的库来播放/执行 swf（任何 swf，从 Internet 加载）。
我想将此我的应用程序提交到应用商店。Apple 会拒绝我的应用程序播放 Flash 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:10:03.347

Yes, your application will be rejected, but not for the reasons you're thinking:

*   Many Flash applications are intended to be run from within a web browser, and will not function correctly outside of one. (For instance, they may load data from relative URLs, or attempt to interact with the browser Javascript context.)

*   Most of the open-source Flash runtimes are incomplete. For instance, Gnash does not fully support SWF versions beyond SWF7, nor all of ActionScript 2.0.

*   Many SWF files found online (especially games) will assume a keyboard and mouse are available, and will likely not be usable with a touchscreen alone.

These three issues will cause many SWF files found online to either not run, or to not be usable, under your app. This alone would lead to your app being rejected, as it will likely be unable to function reliably as described.

Additionally, Lightspark and Gnash are both licensed under the GNU Public License, which (roughly speaking) does not permit the use of their code in proprietary applications, or applications which the user cannot inspect and modify. This means that using them in an iOS application will constitute a copyright violation. If Apple does not identify this issue and reject your application, selling it through the App Store may subject you to significant financial liability.

To be clear, Apple does not have any issue with Flash in general. (Indeed, a number of popular iOS games, such as [Super Hexagon](https://itunes.apple.com/us/app/super-hexagon/id549027629), were created using Adobe's Flash tools.) The issues I'm calling out here are specific to what you're trying to do, and how you're trying to do it.

# ruby-on-rails - 另一个本地 gem 的“gem.add_dependency”

> ID：14273178
> 
> 赞同：3
> 
> 时间：2013-01-11T06:53:27.707
> 
> 标签：ruby-on-rails, ruby, rubygems

我正在创建一个 gem，它依赖于另一个已发布的 gem。在**my_gem.gemspec**中，我已将依赖项添加到另一个 gem：

`gem.add_dependency "other_gem", "~> 1.0.0"`

现在，我发现了一个可以在**other_gem**中调整的功能，所以我分叉了存储库，进行了更改并将其提交到了 fork（它还没有被拉入原始存储库）。

我的问题是如何告诉**my_gem**在本地查找**other_gem**？下面的代码片段无效，因为`:path`它不是`add_dependency`调用中的选项，如[Gem 规范参考](http://guides.rubygems.org/specification-reference/)中所述：

`gem.add_dependency "other_gem", "~> 1.0.0", :path => '/path/to/local/other_gem`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:17:52.823

在本地更容易：当您进行开发时，您可以包括：

```
gem "other_gem", :path => '/path/to/local/other_gem' 
```

或者

```
gem "other_gem", :git => "git@github.com:/your_github/other_gem.git" 
```

在您的 gemfile 中，因为这应该覆盖 gemspec

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:34:59.787

在本地，不太可能提供 gem 依赖项的路径，因为如果您这样做，这意味着您对自制 gem 施加了限制，它在本地依赖于任何其他 gem。

这是不可取的，因为当您上传它时，这将不起作用。所以解决方案是在自己插件的gemspec中添加远程依赖。

[在此处](https://stackoverflow.com/questions/13678957/how-to-add-dependency-of-a-local-gem-to-a-rails-plugin-engine-in-gemspec-file/13683662#13683662)查看我的 SO 帖子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T08:38:32.070

我会创建并安装一个新`other_gem`版本，例如“1.0.0.Subash_fix”并将其用作

```
gem.add_dependency "other_gem", "= 1.0.0.Subash_fix" 
```

当你的补丁有新的官方版本的 gem 时，你切换回官方版本：

```
gem.add_dependency "other_gem", "~> 1.0.1" 
```

# php - Ajax 相关下拉值未获取值

> ID：14273180
> 
> 赞同：0
> 
> 时间：2013-01-11T06:53:28.630
> 
> 标签：php, ajax

在我的页面中，我有以下代码

**主机添加.php**

```
<script language="javascript" type="text/javascript">
function getXMLHTTP() { //function to return the xml http object
    var xmlhttp=false;  
    try{
        xmlhttp=new XMLHttpRequest();
    }
    catch(e)    {       
        try{            
            xmlhttp= new ActiveXObject("Microsoft.XMLHTTP");
        }
        catch(e){
            try{
                xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
            }
            catch(e1){
                xmlhttp=false;
            }
        }
    }

    return xmlhttp;
}

function getState(countryId) {      
    var strURL="findState.php?country="+countryId;
    var req = getXMLHTTP();
    if (req) {

        req.onreadystatechange = function() {
            if (req.readyState == 4) {
                if (req.status == 200) {
                    document.getElementById('statediv').innerHTML=req.responseText;                     
                } else {
                    alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                }
            }               
        }           
        req.open("GET", strURL, true);
        req.send(null);
}       
}

</script>

<div style="margin-left: 51px;">State:
    <select name="country" id="country" onChange="getState(this.value)" style="margin-left: -3px;">
        <option ></option>

        <?php $qr = mysql_query("select * from ctm_state ");

        while($data= mysql_fetch_array($qr))

        {?>
            <option value="<?php echo $data['id']; ?>"><?php echo $data['state']; ?></option>
        <?php } ?>
    </select>
</div> 
```

**findstate.php**

```
<? $country=intval($_GET['country']);
include("../config/config.php");
$query="SELECT id,location FROM ctm_locationname WHERE stateid='$country'";
echo $query;
$result=mysql_query($query);
if($result)
{
    echo "success";
}
else
{
    echo "cant fetch";
}
?>
<div  style=""> location:<select name="state" id="state">
<option></option>
<? while($row=mysql_fetch_array($result)) { ?>
<option value=<?=$row['location']?>><?=$row['location']?></option>
<? } ?>
</select></div> 
```

但它显示“使用 xml http 请求时出现问题”的错误。我找不到我犯了什么错误。任何人都可以帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:27:54.067

I pressume your `var strURL="findState.php?country="+countryId;` is not proper.

Check your browser error console, you can see errors there.

If it is showing 404 page not found, It is because your strURL is not proper check the spelling or path.

# javascript - 将值作为 onchange() 事件中定义的函数的参数传递

> ID：14273185
> 
> 赞同：0
> 
> 时间：2013-01-11T06:53:49.320
> 
> 标签：javascript, zend-form-element

我想将一个值作为函数的参数传递。该函数在文本字段的 onchange() 上定义。我正在使用以下代码..我使用 zend 表单来创建元素。

```
$filedName = "cust_attr_".($i+1);
$fieldArr[$i]       =   $this->createElement('Text',$filedName)
-> setAttrib('class','k-textbox float_left input_width_295 k-invalid')
-> setAttrib('onchange','validateDataType('.$customerAttributes[$i]['data_type'].')')
-> setAttrib('maxlength','14')
-> setAttrib('tabindex',(++$tabStart)); 
```

当我运行代码时，我将值作为函数的参数......就像

`onchange="validateDataType(A)"`

但我收到一个错误 **Uncaught ReferenceError: A is not defined**

这个怎么解决？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T06:56:41.237

“A”应该作为字符串传递。如果没有引号，它会查找 A 作为对象。

```
-> setAttrib('onchange','validateDataType("'.$customerAttributes[$i]['data_type'].'")') 
```

您将需要更改`onchange="validateDataType(A)"`为单引号...`onchange='validateDataType("A")'`

# json - 用于 C++ 的简单 JSON 解析器/生成器（Windows VS 2010）

> ID：14273189
> 
> 赞同：2
> 
> 时间：2013-01-11T06:54:07.473
> 
> 标签：json, visual-c++, tcp, network-programming

有人可以为 C++ Windows VS 2010 建议简单的 JSON 解析器，它可以用于商业目的而没有许可问题。

要求是

1.  从 C++ 程序中获取并打包 JSON 格式的数据，
2.  它将通过网络（TCP 套接字）传输，并进一步从 Android 设备中读取。
3.  要发送的数据很轻，不是很重。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:07:48.267

[Boost](http://www.boost.org/)及其[属性树](http://www.boost.org/doc/libs/1_52_0/doc/html/property_tree.html)库可以创建和解析[JSON](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_propertytree/parsers.html#boost_propertytree.parsers.json_parser)。

# android - 仅当第一个非空android时才关注第二个edittext

> ID：14273190
> 
> 赞同：4
> 
> 时间：2013-01-11T06:54:13.550
> 
> 标签：android, validation, android-edittext, onfocus

目前我有两个编辑文本，假设我想对空编辑文本检查进行验证。什么是运行时验证的更好方法。

我的代码是；

```
 final EditText ev1 = (EditText) findViewById(R.id.editText1);
    final EditText ev2 = (EditText) findViewById(R.id.editText2);

    ev1.setOnFocusChangeListener(new OnFocusChangeListener() {

    @Override
    public void onFocusChange(View rv, boolean hasFocus) {
    if(!hasFocus && ev1.getText().length()==0)
    {    
        ev1.requestFocus();
        ev2.clearFocus();
    }
    }
}); 
```

在第二个editText的这个onclick中，当First Edittext为空时，它会清除第二个EditText的焦点，但键盘输入总是在第二个文本中完成，我们永远无法在第一个文本中获得焦点。

请不要为不同的 EditText 建议不同的不同焦点侦听器，因为这个 editText 也可以动态添加。

![在两个文本中都有焦点！！！！](../Images/252defa7d4f347f9b9a5848cadf118bf.png)

更清楚：在失去焦点之前验证 ev1 只是简单的事情，在输入任何字符之前不允许其他视图获得焦点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T07:16:24.017

```
 final EditText ev1 = (EditText) findViewById(R.id.editText1);
    final EditText ev2 = (EditText) findViewById(R.id.editText2);

    ev1.setOnFocusChangeListener(new OnFocusChangeListener() {      
        @Override
        public void onFocusChange(View rv, boolean hasFocus) {
            if(!hasFocus && ev1.getText().length()==0)
            {    
                  new Handler().postDelayed(new Runnable() {

                  @Override
                  public void run() {
                       ev2.clearFocus();
                   ev1.requestFocus();

                  }
            }, 100);

         }
      }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:11:54.593

试试这个 ：

**编辑 ：**

```
 final EditText ev1,ev2,ev3,ev4,ev5,ev6;

        ev1 = (EditText) findViewById(R.id.editText1);
        ev2 = (EditText) findViewById(R.id.editText2);
        ev3 = (EditText) findViewById(R.id.editText3);
        ev4 = (EditText) findViewById(R.id.editText4);
        ev5 = (EditText) findViewById(R.id.editText5);
        ev6 = (EditText) findViewById(R.id.editText6);

        setValidateAction(ev2);
        setValidateAction(ev3);
        setValidateAction(ev4);
        setValidateAction(ev5);
        setValidateAction(ev6); 
```

声明这个方法：

```
public void setValidateAction(final EditText edit_action) {
        edit_action.setOnFocusChangeListener(new OnFocusChangeListener() {
            public void onFocusChange(View v, boolean hasFocus) {
                if(hasFocus && ev1.getText().length()==0){    
                    ev1.requestFocus();               
                }
            }
        });
} 
```

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T07:12:44.537

我已经接受了具有两个文本框的 xml，并尝试了这种方式来解决您的问题。

检查下面的代码，告诉我你可以吗？

```
 setContentView(R.layout.activity_main);
    final EditText password = (EditText)findViewById(R.id.editText1);
    final EditText confirmpassword = (EditText)findViewById(R.id.editText2);

    password.addTextChangedListener(new TextWatcher() {

        public void onTextChanged(CharSequence s, int start, int before, int count) {
            if(password.getText().toString().trim().length()==0)
            {
                confirmpassword.setText("");
            }
        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
        }

        public void afterTextChanged(Editable s) {
        }
    });
    confirmpassword.setOnFocusChangeListener(new OnFocusChangeListener() {

        public void onFocusChange(View v, boolean hasFocus) {
            if(hasFocus && password.getText().toString().trim().length()==0)
            {
                // First fill password
                password.requestFocus();
            }
        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-19T14:25:54.997

```
 add.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v)
            {
                if (isEmpty(name)) {
                    return;
                }
            }
    });

public boolean isEmpty(EditText... editTexts)
    {
        boolean res=true;
        for (EditText editText:editTexts) {
            if (TextUtils.isEmpty(editText.getText())) {
                editText.setError("Fill field");
                editText.requestFocus();

                res = true;
                break;
            }
            else {
                res = false;
            }
        }
        return res;
    } 
```

# c++ - BOOST_PP_ITERATION 用于可变长度参数

> ID：14273192
> 
> 赞同：3
> 
> 时间：2013-01-11T06:54:43.720
> 
> 标签：c++, templates, boost, template-meta-programming, boost-preprocessor

我想将 a`luabind`合并到我的一个项目中。为此，我需要提供一个行为类似于`call_function`（见下文）的函数。这个函数使用了一些模板魔法（由 Boost 提供），我希望能得到一些帮助。这是我第一次真正遇到模板元编程（这就是所谓的吗？）所以我有点迷茫。这里有一些片段我会很感激帮助。

```
#define LUABIND_TUPLE_PARAMS(z, n, data) const A##n *
#define LUABIND_OPERATOR_PARAMS(z, n, data) const A##n & a##n 
```

我不太确定这个预处理器位是做什么的，我什至不知道它叫什么，所以搜索有点困难。`A`是模板类型。如果我没记错的话，`#a`会插入 的文字`a`，但是多重`#`有什么作用呢？在这个预处理器之后就是这个。

```
template<class Ret BOOST_PP_COMMA_IF(BOOST_PP_ITERATION()) BOOST_PP_ENUM_PARAMS(BOOST_PP_ITERATION(), class A)>
    typename boost::mpl::if_<boost::is_void<Ret>
            , luabind::detail::proxy_function_void_caller<boost::tuples::tuple<BOOST_PP_ENUM(BOOST_PP_ITERATION(), LUABIND_TUPLE_PARAMS, _)> >
            , luabind::detail::proxy_function_caller<Ret, boost::tuples::tuple<BOOST_PP_ENUM(BOOST_PP_ITERATION(), LUABIND_TUPLE_PARAMS, _)> > >::type
    call_function(lua_State* L, const char* name BOOST_PP_COMMA_IF(BOOST_PP_ITERATION()) BOOST_PP_ENUM(BOOST_PP_ITERATION(), LUABIND_OPERATOR_PARAMS, _) )
    {
        typedef boost::tuples::tuple<BOOST_PP_ENUM(BOOST_PP_ITERATION(), LUABIND_TUPLE_PARAMS, _)> tuple_t;
#if BOOST_PP_ITERATION() == 0
        tuple_t args;
#else
        tuple_t args(BOOST_PP_ENUM_PARAMS(BOOST_PP_ITERATION(), &a));
#endif

    } 
```

如您所见，它大量使用了 Boost。我用谷歌搜索`BOOST_PP_ITERATION`，但仍然无法真正弄清楚它在做什么。有人可以向我解释一下，最好是在这段代码的上下文中，这些`BOOST_PP`东西在做什么，以及它如何设法将参数放入`args`.

我的最终目标是`call_function`在我自己的代码中定义一个将生成的代码，我可以将其传递给我将定义`args`的重载。`call_function`这意味着我可以使用相同的调用约定，但也可以在调用之前应用一些预处理`luabind`。

这个问题在我的措辞上非常具体，但我希望这些概念足够笼统，可以在这里使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T08:09:06.550

BOOST_PP_* ist not related to template metaprogramming, its a preprocessor library. Like the name says, it's working with preprocessor magic, doing some really braintwisting things to generate a bunch of similar templates. In your case, that would be the following:

```
//preprocessor iteration 0
template<class Ret>
    typename boost::mpl::if_<boost::is_void<Ret>
            , luabind::detail::proxy_function_void_caller<boost::tuples::tuple<> >
            , luabind::detail::proxy_function_caller<Ret, boost::tuples::tuple<> > >::type
    call_function(lua_State* L, const char* name )
    {
        typedef boost::tuples::tuple<> tuple_t;
        tuple_t args;
    }

//preprocessor iteration 1
template<class Ret , class A0>
typename boost::mpl::if_<boost::is_void<Ret>
        , luabind::detail::proxy_function_void_caller<boost::tuples::tuple<const A0 *> >
        , luabind::detail::proxy_function_caller<Ret, boost::tuples::tuple<const A0 *> > >::type
call_function(lua_State* L, const char* name , const A0 & a0 )
{
    typedef boost::tuples::tuple<const A0 *> tuple_t;
    tuple_t args(&a0);
} 
```

and so on, up to some maximum defined elsewhere (e.g. `A0, A1, A2, A3... A9` if the maximum is 10)

The `##` is a token concatenation for the preprocessor, in this case concatenation A (or a) with whatever value n has (=> A0, A1, A2, ...). The whole code is in some preprocessing loop.

*   `BOOST_PP_ITERATION()` gives the current loop index (0, 1, 2...)
*   `BOOST_PP_COMMA_IF(X)` gives a comma, if the argument is not 0, e.g. the comma before "class A0" in iteration 1 in the template parameter list
*   `BOOST_PP_ENUM(n,B,C)` gives a comma separated list of B(?, N, C), where N runs from 0..(n-1), i.e. the macro B gets executed n times, so calling BOOST_PP_ENUM(3, LUABIND_TUPLE_PARAMS, _) gives `const A0 *, const A1 *, const A2 *`
*   `BOOST_PP_ENUM_PARAMS(n, X)` gives a comma separated list of X##n, e.g. `&a0, &a1, &a2` for `BOOST_PP_ENUM_PARAMS(3, &a)`

Many of the use cases for that Preprocessor magic can be done with variadic templates these days, so if you are lucky you will not come across that stuff again ;) It's not easy to grasp at first sight, because preprocessing does not work like other known C++ features and has some limitations that one has to work around, making it even less easy to understand.

# php - 从列表中选择行

> ID：14273204
> 
> 赞同：1
> 
> 时间：2013-01-11T06:55:42.800
> 
> 标签：php, html, mysql

向专家寻求帮助，我已经为此工作了很长一段时间。

这是逻辑：

已浏览的产品

```
serial | name      | description          
---+-----------+----------------
1      | name1      | desc1
2      | name2      | desc2
3      | name3      | desc3
4      | name4      | desc4 
```

我喜欢有一个脚本，如果我点击产品，另一个文件将打开并显示点击的产品。

感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:42:28.113

因此，假设您有一个页面上显示的产品列表。URL 必须是这样的：

```
$query = "SELECT * FROM series";
$sql = mysqli_query($conn, $query);
while ($row = mysqli_fetch_array($sql)) {
    echo "<a href='http://example.com/index.php?pag=products&productid={$row[id]}'>{$row[name]}</a>";
} 
```

所以基本上你将产品ID传递给一个页面。$_GET['pag'] 是我曾经知道我应该加载什么（即什么文件）的东西。

然后在产品页面上，您将获得产品 ID，并根据需要显示信息。

```
$productId = intval($_GET['product_id']);
$query = "SELECT * FROM series WHERE id = {$productId} LIMIT 1"; // we'll get a single product anyway

// show the HTML you want from here on 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:12:40.427

在查询字符串中传递所选产品的产品 ID，并在第二页中获取此 ID 并使用此 ID 从数据库中获取内容并将其显示在该页面中:)

# http - JBoss http 线程继续阅读 SPECjEnterprise 基准测试

> ID：14273205
> 
> 赞同：1
> 
> 时间：2013-01-11T06:55:47.510
> 
> 标签：http, web, threadpool, jboss7.x

我可以使用 8 核机器的 50% 利用率运行基准测试。我必须将 http 线程池配置为 9000 才能实现这一点。在 8 核机器上使用数千个线程是不合理的。大多数线程都在等待读取 http 输入。大约有 6000 个客户端线程驱动基准测试。但我认为不需要为一个连接保留一个线程。这是我的jboss配置：

# javascript - 如何恢复 jQuery 可调整大小的调整大小？

> ID：14273207
> 
> 赞同：3
> 
> 时间：2013-01-11T06:56:08.173
> 
> 标签：javascript, jquery, html, jquery-ui-resizable

我想在调整大小停止事件后将可调整大小的元素恢复为其原始状态。我正在使用以下代码执行此操作，但这种方法并不整洁，包装器和图像现在具有相同的大小，因此重新调整大小的句柄被移动了一个像素。

```
$images.resizable({ handles: 'all', stop: function (event, ui) {
    $(this).find(".ui-resizable").add($(this)).css(ui.originalSize);
  }
}); 
```

有没有一种巧妙的方法来实现这一目标？

这是jsfiddle链接。请使用火狐。请注意，在从上述代码还原后，调整大小手柄如何移动一个像素。 [http://jsfiddle.net/rohittt/j2JU6/105/](http://jsfiddle.net/rohhittt/j2JU6/105/) 谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-22T12:52:34.273

在停止回调中使用以下代码段，

```
// Move the element to its original position.
ui.element.css(ui.originalPosition);
// Modify the element's width& height to the original value.
ui.element.css(ui.originalSize); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T01:17:53.713

试着把这部分放在一个变量中`$(this).css(ui.originalSize);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-10T06:40:33.117

```
ui.element.css(ui.originalSize); 
```

这样就行了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-05T20:10:39.680

JQuery 1.11.3 中 JQuery Dialog 的宽度和大小即使在通过注释以下 2 行来调整对话框大小后仍保留

```
stop: function( event, ui ) of 
this.uiDialog.resizable({ in ui.dialog
//options.height = that.uiDialog.height();
//options.width = that.uiDialog.width(); 
```

# android - Android 应用程序在第二次或第三次启动后崩溃（显示内存错误）

> ID：14273212
> 
> 赞同：1
> 
> 时间：2013-01-11T06:56:36.217
> 
> 标签：android, memory, bitmap

我正在开发使用从我的应用程序下载的图像在后台显示的应用程序。当我启动应用程序时，它工作正常并且加载图像没有任何问题。但在几次重新启动后，应用程序因内存错误而崩溃。我使用以下方法获取 Drawable 以在视图中显示它。我已经使用了一个类，并且具有这种静态方法，我将它用于所有图像。我还为清除位图调用了另一种静态方法，但不知道它是否有效。可能是我关闭应用程序时无法清除内存。

```
 public static void recycle_bitmap() {
    if (myBitmap != null) {
        myBitmap.recycle();
        myBitmap = null;

    }

    }

    static Bitmap myBitmap = null;

    public static Drawable ImgDrawableFromFile(Resources res, String file_name) {

    myBitmap=null;
    File imgFile = new File("/data/data/com.appstart/app_my_sub_dir/"
            + file_name + ".jpg");
    if (imgFile.exists()) {

        myBitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath());
        if (myBitmap != null)
            return new BitmapDrawable(res, myBitmap);
        else
            return null;
    }
    return null;

    } 
```

Logcat 错误

```
01-11 12:09:41.860: D/dalvikvm(6047): GC_EXTERNAL_ALLOC freed 598K, 48% free                  3336K/6407K, external 8683K/10523K, paused 274ms
01-11 12:09:42.149: E/dalvikvm-heap(6047): 1671840-byte external allocation too large for this process.
01-11 12:09:42.480: I/dalvikvm-heap(6047): Clamp target GC heap from 16.094MB to 16.000MB
01-11 12:09:42.480: E/GraphicsJNI(6047): VM won't let us allocate 1671840 bytes
01-11 12:09:42.501: D/dalvikvm(6047): GC_FOR_MALLOC freed 1K, 48% free 3334K/6407K,    external 8674K/10523K, paused 247ms
01-11 12:09:42.501: D/skia(6047): --- decoder->decode returned false
01-11 12:09:42.501: W/dalvikvm(6047): threadid=15: thread exiting with uncaught exception (group=0x40015560)
01-11 12:09:42.560: E/AndroidRuntime(6047): FATAL EXCEPTION: Thread-18
01-11 12:09:42.560: E/AndroidRuntime(6047): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
01-11 12:09:42.560: E/AndroidRuntime(6047):     at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
01-11 12:09:42.560: E/AndroidRuntime(6047):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:470)
01-11 12:09:42.560: E/AndroidRuntime(6047):     at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:284)
01-11 12:09:42.560: E/AndroidRuntime(6047):     at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:309)
01-11 12:09:42.560: E/AndroidRuntime(6047):     at com.appstart.utility.LoadImage.ImgDrawableFromFile(LoadImage.java:30)
01-11 12:09:42.560: E/AndroidRuntime(6047):     at com.appstart.MainActivity.run(MainActivity.java:70)
01-11 12:09:42.560: E/AndroidRuntime(6047):     at java.lang.Thread.run(Thread.java:1019) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:02:13.743

遵循这三个教程以避免内存错误。

[避免内存泄漏](http://android-developers.blogspot.in/2009/01/avoiding-memory-leaks.html)

[攻击 Android 上的内存问题](http://ttlnews.blogspot.in/2010/01/attacking-memory-problems-on-android.html)

[面向未来的应用](http://android-developers.blogspot.in/2010/06/future-proofing-your-app.html)

特别是，使用静态变量可能会使事情变得更糟，而不是更好。所以请删除它。并将其放在静态方法之外。

这也可能是由于图像尺寸大。请将其缩放到小尺寸。或增加您的虚拟机的堆大小。

它可能会帮助你。

# d3.js - 如何在 d3.js 中使用扇入布局树？

> ID：14273222
> 
> 赞同：3
> 
> 时间：2013-01-11T06:57:29.610
> 
> 标签：d3.js, tree, directed-acyclic-graphs, force-layout

树的布局绝对很棒......对于树木。我们正在用扇入布置树。以下是我正在考虑的两种不同的可能方法：

*   通过任意删除具有多个父母的任何孩子的边来“树化” DAG。使用树形布局来决定顶点的去向，然后只需将边重新添加进去。这种方法的缺点是结果可能布局得不是很好。例如，很容易显示带有扇入布局的树，其中排列兄弟节点的顺序使其嵌入平面或不平面。
*   用力导向布局做一些棘手的事情——例如，将其嵌入，然后向下旋转所有子节点（如折叠中国扇子），使其看起来像树状。

有人对这个问题有意见或建议吗？两种方法？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T23:42:28.043

我一直在做一个用 JavaScript 绘制有向图的项目：[https](https://github.com/cpettitt/dagre) ://github.com/cpettitt/dagre 。它包括一些示例，展示如何将它与 D3 一起使用。您可以在此处找到演示，这应该有助于您了解这种方法是否能满足您的需求：

[http://cpettitt.github.com/project/dagre/latest/demo/demo-d3.html](http://cpettitt.github.com/project/dagre/latest/demo/demo-d3.html)

[http://cpettitt.github.com/project/dagre/latest/demo/demo.html](http://cpettitt.github.com/project/dagre/latest/demo/demo.html)

[http://cpettitt.github.com/project/dagre/latest/demo/demo-d3-large.html](http://cpettitt.github.com/project/dagre/latest/demo/demo-d3-large.html)

# android - 如何在应用程序图标或小部件中显示徽章计数

> ID：14273225
> 
> 赞同：4
> 
> 时间：2013-01-11T06:57:40.313
> 
> 标签：android, badge

例如：我的应用收到的消息很少，我需要将此通知用户。

我需要制作小部件吗？

我读过这篇[文章如何向启动器图标添加一个数字，如 HTC 邮件？](https://stackoverflow.com/questions/3721119/how-do-i-add-a-number-to-the-launcher-icon-like-htc-mail-does)，但看起来我不能这样做。仅适用于 HTC。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T07:04:47.737

由启动器管理的启动器图标，默认启动器没有此功能。

我建议使用[通知栏](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)，然后辅助一个可能的小部件，但它不是必需的。

请注意，具有此功能的启动器是 ADW，但我不相信它有 API，因此他们会管理哪些通知显示在哪些应用程序上。ADWNotifier：检查[**这里**](https://play.google.com/store/apps/details?id=org.adw.launcher.notifications&hl=en)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:22:38.503

Android 的用户通知设计原则是围绕通知栏展开的。应始终仅使用通知来提醒用户。

# html - CSS前面的三个句点

> ID：14273227
> 
> 赞同：2
> 
> 时间：2013-01-11T06:57:59.300
> 
> 标签：html, css, browser

这很奇怪，我收到的一封邮件对 css 有以下定义：

```
<style type="text/css">
...NL-default {
    font-family: "Arial";
    font-size: 12px;
    color: #000000;
}
...style1 {
    font-family: "Arial";
    font-size: 12px;
    color: #0000FF;
}
...style4 {
    text-align: center;
    background-color: #F3F3F3;
    font-family: "Arial";
    font-size: 12px;
    color: #000000;
}
...style7 {
    text-align: center;
    color: #FFFFFF;
    background-color: #000080;
    font-family: "Arial";
    font-size: 12px;
    font-weight: bold;
}
...style14 {
    font-family: "Arial";
    font-size: 14px;
    color: #FF3300;
    font-weight: bold;
} 
```

基本上所有样式前面都有三个句点。

它被应用在这样的事情上：

```
 <table style="width: 100%;" class="style41" cellSpacing="1" cellPadding="3">

        <tbody><tr>
            <td style="width: 233px;" class="style34" strong=""><strong>Notification</strong></td> 
```

我相信大多数人的第一直觉可能是……这行不通，你是对的。在 Chrome、Firefox 和 IE9 上，CSS 根本不应用于邮件正文。

然而，在 IE8 上，它得到了完美的应用，这让我有点困惑。在 CSS 定义前面加上三个句点的目的是什么？为什么这只适用于 IE8？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:34:33.667

众所周知，IE 将类选择器中的前导点视为常规类选择器，就像它在 quirks 模式下[仅将多个类选择器视为链中的最后一个一样。](https://stackoverflow.com/questions/10124254/css-rule-drop-a-being-applied-to-class-drag-a/10124317#10124317)

也就是说......这似乎是一个非常丑陋的黑客行为。我什至不确定它是作为 IE hack 的，因为代码看起来不像是只供 IE 使用的。在那种情况下，我不知道在这样的邮件样式中添加前导句点的真正目的是什么。

另外，我不确定为什么代码不能在 IE9 中运行，甚至在 quirks 模式下也不能。以下测试用例肯定会使所有 IE 版本（包括 9）中的文本变为红色：

```
<html>
  <head>
    <style type="text/css">
    ...foo {
        color: #FF0000;
    }
    </style>
  </head>
  <body>
    <p class="foo">This text should not be red.</p>
  </body>
</html> 
```

您可能已经猜到，这不是有效的 CSS。这就是为什么它在其他浏览器中不起作用，甚至在它们的怪癖模式下也不起作用。

# java - JPA 中的持久度量单位

> ID：14273229
> 
> 赞同：4
> 
> 时间：2013-01-11T06:58:15.573
> 
> 标签：java, jpa, units-of-measurement

这是我昨天问的[这个问题](https://stackoverflow.com/questions/14252520/is-there-any-available-api-to-represent-various-units-of-item-like-kg-litre-me)的延续。在浏览了各种资源并咨询了人们之后，我找不到任何支持 API 的 JPA 注释，用于映射测量单位。所以，我决定自己去创造它。

基于[Martin Fowler](http://martinfowler.com/)在他的著作《[分析模式：可重用对象模型](https://rads.stackoverflow.com/amzn/click/com/0201895420)》中描述的各种*观察和测量**模式*，我尝试创建一个基本实现来满足我的需求。我创建了两个实体，并且，如下所示： -*`Unit``Quantity`*

 *## 单位实体：-

```
@Entity
@Table(name = "unit")
public class Unit {

    @Id
    @Column(name = "symbol")
    private String symbol;

    @Column(name = "name")
    private String name;

    @Column(name = "multiplier")
    private Number multiplier;

    @ManyToOne(cascade = CascadeType.ALL)
    @JoinColumn(name = "symbol")
    private Unit baseUnit;

    public Unit() {

    }

    public Unit(String symbol, String name, Number multiplier, Unit baseUnit) {
        this.symbol = symbol;
        this.name = name;
        this.multiplier = multiplier;
        this.baseUnit = baseUnit;
    }

        /** Getters and Setters **/
} 
```

## 数量实体：-

```
@Entity
@Table(name = "quantity")
public class Quantity {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private int quantityId;

    private Number amount;

    @ManyToOne(cascade = CascadeType.ALL)
    @JoinColumn(name = "unit")
    private Unit unit;

    public Quantity() {

    }

    public Quantity(Number amount, Unit unit) {
        this.amount = amount;
        this.unit = unit;
    }

    /** Getters and Setters **/
} 
```

在`Item`实体中，我有一个`Quantity`实体的引用，代表我的`unitOfIssue`and `unitOfPurchase`。然后，无论我要处理一些数量，我都会有这个`Quantity`参考。

现在，这是我现在面临的问题。由于`Quantity`这里的课程将是一个`entity`. 因此，我们必须将其映射到*DB Table*。所以，这里需要注意的是，每次我想添加一些数量或更新数量时，都会先在`Quantity`表格中输入一个条目，然后在`Item`表格中更新它。我想，问题很清楚。我们将在`Quantity`表格中输入大量条目，这清楚地表明了一个糟糕的设计。

有人可以对我在 JPA 中实现此模式时的方法以及我有哪些选择提供见解吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:51:28.410

我会推荐这个。由于度量单位不太可能经常更改，因此值得将它们构建到代码中。这样您就可以有意义地使用程序本身中的值。

如果它将在其他任何地方使用，它还会使数据库更具凝聚力。您还可以将 Quantity 扩展为 LinearQuantity、AreaQuantity、VolumetricQuantity（等），以确保不会有人试图购买 30 英尺的石油。

```
@Embeddable
public class Quantity{

   public enum Unit {FEET,METERS,INCHES,MM}

   @Enumerated( value = EnumType.STRING)
   private Unit unit;

   private Number amount;

   public Quantity() {

   }
}

@Entity
Public Class PurchaseOrder
{
    @Embedded
    @AttributeOverrides({
      @AttributeOverride(name="unit", column=@Column(name="UNIT")),
      @AttributeOverride(name="amount", column=@Column(name="AMOUNT"))
    })
    private Quantity quantity;
    ....

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:31:08.413

*   您需要一个单位主表，其中包含固定的所有单位，以便您可以创建简单的脚本来填充它。
*   对于数量，我不会推荐一个单独的实体，它可以是事务表的属性，它可以简单地在项目的数量和单位之间建立关系，你可以`@OneToOne`使用单位实体来做到这一点。

这是示例示例

```
@Entity
Public Class PurchaseOrder
{
@OneToOne
private Unit unitOfPurchase;
@OneToOne
    private Unit unitOfIsuse;

-- Quanity number here ---
} 
```

*您应该`Cascade`非常小心地使用主表。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-13T15:08:42.613

查看这个 JPA 库，了解流行的 JScience 项目：[JScience-JPA](https://java.net/projects/jscience-jpa)

基于对[Java 货币类型](http://javamoney.org)(JSR 354) 的类似支持，我们还计划为[JSR 363添加类似的东西](http://unitsofmeasurement.github.io/)*

# objective-c - 不要重新加载/刷新图层和 CATextLayer (iphone)

> ID：14273233
> 
> 赞同：3
> 
> 时间：2013-01-11T06:58:37.263
> 
> 标签：objective-c, catextlayer

我有图层和 CATextLayer。我有代码，例如：

```
 CATextLayer *TextLayer = [CATextLayer layer];
        TextLayer.bounds = CGRectMake(0.0f, 0.0f, 245.0f, 290.0f);
        TextLayer.string = randomText;
        CTFontCreateWithName((CFStringRef)@"HelveticaNeue-Light", 0.0, NULL);
        TextLayer.backgroundColor = [UIColor blackColor].CGColor;
        TextLayer.position = CGPointMake(162.0, 250.0f);
        TextLayer.wrapped = YES;
        TextLayer.fontSize = 20;
        [self.view.layer addSublayer:TextLayer]; 
```

如何在添加 randomText 之前重新加载/刷新或清除图层？目前 textRandom 在添加文本之前加入（现有文本相互叠加），我什么也没看到。

感谢帮助！

# c# - 无论使用什么程序都无法获取登录用户

> ID：14273234
> 
> 赞同：1
> 
> 时间：2013-01-11T06:58:37.680
> 
> 标签：c#, asp.net

这就是问题所在，我正在使用 IIS7 来托管我的 asp.net 网站，现在问题是无论使用什么方法，我总是以当前登录用户的身份获取应用程序池身份（身份验证模式是 windows） . 以下是我用来获取登录用户的代码片段（它们都返回应用程序池标识）。

```
WindowsIdentity.GetCurrent().Name 
Convert.ToString(Request.ServerVariables["LOGON_USER"])
WindowsPrincipal p.Identity.Name
Convert.ToString(Request.ServerVariables["AUTH_USER"]).Trim() 
```

请帮助我解决这个问题，这让我很困扰。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:52:56.863

您应该使用 asp.net 模拟：

[http://support.microsoft.com/kb/306158](http://support.microsoft.com/kb/306158)

[http://msdn.microsoft.com/en-us/library/aa292118%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa292118%28v=vs.71%29.aspx)

[http://msdn.microsoft.com/en-us/library/ff647076.aspx](http://msdn.microsoft.com/en-us/library/ff647076.aspx)

```
<identity impersonate="true" /> 
```

- -更新 - -

查看 IIS 配置：

[ASP.NET 模拟问题](https://stackoverflow.com/questions/5985153/asp-net-impersonation-problem)

----更新2 ----

```
 public string GetLoggedUserName()
    {
        string rtn = string.Empty;

        if (CurrentContext.User != null)
        {
            if (CurrentContext.User.Identity.IsAuthenticated)
            {
                var gp = CurrentContext.User as WindowsIdentity;
                if (gp!=null)
                {                
                    rtn = gp.Identity.Name;
                }
            }
        }
        return rtn;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T11:39:03.523

感谢您所提供的所有信息。问题是由于 ASP.NET 中的某种错误，我正在做的是我在 Web 应用程序中从 default.aspx 重定向到 Home.aspx 但问题是在重定向后如何登录用户信息正在丢失。所以我将主页更改为 Home.aspx 并将所有需要的信息存储在那里，现在它可以正常工作了。

感谢 giammin 的帮助，非常感谢/。

# haskell - GADT 可以用来证明 GHC 中的类型不等式吗？

> ID：14273235
> 
> 赞同：22
> 
> 时间：2013-01-11T06:58:38.870
> 
> 标签：haskell, curry-howard

因此，在我不断尝试通过小型 Haskell 练习对 Curry-Howard 理解一半的过程中，我被困在了这一点上：

```
{-# LANGUAGE GADTs #-}

import Data.Void

type Not a = a -> Void

-- | The type of type equality proofs, which can only be instantiated if a = b.
data Equal a b where
    Refl :: Equal a a

-- | Derive a contradiction from a putative proof of @Equal Int Char@.
intIsNotChar :: Not (Equal Int Char)
intIsNotChar intIsChar = ??? 
```

显然，该类型`Equal Int Char`没有（非底部）居民，因此在语义上应该有一个`absurdEquality :: Equal Int Char -> a`函数......但对于我的生活，我想不出除了使用`undefined`.

所以要么：

1.  我错过了一些东西，或者
2.  语言的某些限制使这成为一项不可能完成的任务，我还没有设法理解它是什么。

我怀疑答案是这样的：编译器无法利用没有`Equal`没有 a = b 的构造函数这一事实。但如果是这样，那它是真的吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-11T11:35:57.207

这是 Philip JF 解决方案的较短版本，这是依赖类型理论家多年来一直在反驳方程的方式。

```
type family Discriminate x
type instance Discriminate Int  = ()
type instance Discriminate Char = Void

transport :: Equal a b -> Discriminate a -> Discriminate b
transport Refl d = d

refute :: Equal Int Char -> Void
refute q = transport q () 
```

为了表明事物是不同的，您必须通过提供导致不同观察结果的计算上下文来捕捉它们*的不同行为。*`Discriminate`恰好提供了这样一个上下文：一个类型级别的程序，它以不同的方式处理这两种类型。

没有必要求助于`undefined`解决这个问题。总编程有时涉及拒绝不可能的输入。即使在`undefined`可用的地方，我也建议不要在总方法足够的情况下使用它：总方法*解释了*为什么某事是不可能的并且类型检查器确认；`undefined`只是记录*你的承诺*。事实上，这种反驳方法就是 Epigram 如何在确保案例分析涵盖其领域的同时摒弃“不可能的案例”。

至于计算行为，请注意`refute`, via`transport`必须严格，`q`并且`q`不能在空上下文中计算到头范式，这仅仅是因为不存在这样的头范式（当然，因为计算保留了类型）。在总体设置中，我们确信它`refute`永远不会在运行时被调用。在 Haskell 中，我们至少可以确定它的论点会发生分歧或抛出异常，然后我们才有义务对其作出响应。一个*懒惰*的版本，例如

```
absurdEquality e = error "you have a type error likely to cause big problems" 
```

会忽略的毒性`e`并告诉你你有一个类型错误，而你没有。我更喜欢

```
absurdEquality e = e `seq` error "sue me if this happens" 
```

如果诚实的反驳太像努力工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-11T07:19:25.603

我不明白使用`undefined`每种类型的问题都存在于 Haskell 中。我们的语言没有强烈规范化......您正在寻找错误的东西。 `Equal Int Char`导致**类型错误**不好保存的异常。看

```
{-# LANGUAGE GADTs, TypeFamilies #-}

data Equal a b where
    Refl :: Equal a a

type family Pick cond a b
type instance Pick Char a b = a
type instance Pick Int a b = b

newtype Picker cond a b = Picker (Pick cond a b)

pick :: b -> Picker Int a b
pick = Picker

unpick :: Picker Char a b -> a
unpick (Picker x) = x

samePicker :: Equal t1 t2 -> Picker t1 a b -> Picker t2 a b
samePicker Refl x = x

absurdCoerce :: Equal Int Char -> a -> b
absurdCoerce e x = unpick (samePicker e (pick x)) 
```

你可以用它来创建你想要的功能

```
absurdEquality e = absurdCoerce e () 
```

但这将产生未定义的行为作为其计算规则。 `false`应该导致程序中止，或者至少永远运行。中止是类似于通过加非将最小逻辑变成直觉逻辑的计算规则。正确的定义是

```
absurdEquality e = error "you have a type error likely to cause big problems" 
```

至于标题中的问题：基本上没有。据我所知，类型不等式在当前的 Haskell 中无法以实际的方式表示。即将对类型系统进行的更改可能会导致这种情况变得更好，但截至目前，我们有平等但没有不平等。

# c - Glib：如何在另一个线程完成之前启动一个新线程？

> ID：14273238
> 
> 赞同：1
> 
> 时间：2013-01-11T06:58:58.210
> 
> 标签：c, multithreading, glib

我正在使用`Glib`开发多线程 C 软件。

我想要一组活线程。一旦某个线程完成，另一个线程就会以不同的参数开始。它类似于线程池。

我正在使用[glib 线程](http://developer.gnome.org/glib/2.30/glib-Threads.html)来实现多线程。但是我在谷歌上找不到很多教程。我现在可以启动一组线程，但不知道等待。我的一些代码：

```
GThread *threads[n_threads];
thread_aux_t *data = (thread_aux_t*) calloc(n_threads, sizeof(thread_aux_t));
for (i = 0; i < n_threads; ++i) {
    data[i].parameter = i;
    threads[i] = g_thread_create((GThreadFunc) pe_lib_thread, data + i,
            TRUE, NULL);
}

/* wait for threads to finish */
for (i = 0; i < n_threads; ++i) {
    g_thread_join(threads[i]); // How to start a new thread depending on the return value?
}
free(data); 
```

谢谢。

* * *

问题解决了。更新：

刚刚找到了一个 glib 的线程池实现：[Thread Pools](http://developer.gnome.org/glib/2.30/glib-Thread-Pools.html)。我已经运行它并且它工作正常。代码写成：

```
// 'query' is for this new thread, 
// 'data' is the global parameters set when initiating the pool
void *pe_lib_thread(gpointer query, gpointer data) {
}

void run_threads() {
    GThreadPool *thread_pool = NULL;
    // Global parameters by all threads.
    thread_aux_t *data = (thread_aux_t*) calloc(1, sizeof(thread_aux_t));

    data->shared_hash_table = get_hash_table();
    g_thread_init(NULL);
    thread_pool = g_thread_pool_new((GFunc) pe_lib_thread, data, n_threads,
            TRUE, NULL);
    // If n_threads is 10, there are maximum 10 threads running, others are waiting.
    for (i = 0; i < n_queries; i++) {
        query = &queries[i];
        g_thread_pool_push(thread_pool, (gpointer) query, NULL);
    }
    g_thread_pool_free(thread_pool, 0, 1);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:20:38.013

`g_thread_join`返回返回值，因此您只需检查它。假设您要创建一个新进程，如果返回值为 17。

```
for (i = 0; i < n_threads; ++i) {
    if (threads[i] && g_thread_join(threads[i]) == 17) {  
        /* Start a new thread. */
        threads[i] = g_thread_create((GThreadFunc) pe_lib_thread, data + i,
            TRUE, NULL);
    } else {
        threads[i] = NULL;
    }
} 
```

# ubuntu-10.10 - 找不到comrr-dev_2.1-1.41.12-1ubuntu2_i386.deb deian

> ID：14273239
> 
> 赞同：2
> 
> 时间：2013-01-11T06:59:11.547
> 
> 标签：ubuntu-10.10, php-5.2

我正在尝试在 Ubuntu 10.10 中安装 php-5.2.8，但安装过程没有 comerr-dev_2.1-1.41.12-1ubuntu2_i386.deb 并停止我的 php 安装

替代方法我尝试安装 comerr-dev_2.1-1.41.14-1ubuntu3_i386.deb 和 comerr-dev_2.1-1.41.12-4stable1_i386.deb 但它不兼容。我需要 comerr-dev_2.1-1.41.12-1ubuntu2_i386。 deb 或源代码，以便我可以从该代码构建 deb。

帮帮我。在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:35:14.777

请找到`comerr-dev_2.1-1.41.12-1ubuntu2_i386.deb`直接从[Launchpad.net](https://launchpad.net/ubuntu/maverick/i386/comerr-dev/2.1-1.41.12-1ubuntu2)下载的链接（这是针对 Ubuntu Maverick 的）。

# jquery - 向下滚动时如何更改背景？WordPress

> ID：14273243
> 
> 赞同：2
> 
> 时间：2013-01-11T06:59:23.373
> 
> 标签：jquery, wordpress, post, background, scroll

我想重现这里使用的效果[http://www.ixistore.be/](http://www.ixistore.be/)。我的意思是通过向下滚动页面来更改背景颜色。我知道如何在页面上使用静态 ID 和特定数量的元素使用例如航路点来执行此操作，但您必须在 JS -> 中定义 ID。我很想将它与 wordpress 一起使用——>这意味着动态。我假设每个帖子都会有一些属性“data-bgcolor”，并且会被 javascript 使用。但我有点不知道如何实现这一点。
谢谢你的帮助。

[向下滚动时如何更改背景颜色](https://stackoverflow.com/questions/10686661/how-to-change-the-background-color-when-scrolling-down)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:10:24.283

这不是我的逻辑，这些是他们用来改变身体背景的脚本，这取自您提供的链接。这可能会对您有所帮助。

```
function scrollHandler(e)
{
refreshFocus();
} 

function refreshFocus()
{
var closest_center_dist = 99999;
var $closest_block;

var max_visible_h;
var winner;

$("div.block").each(function(ind, ele)
{

    var $block = $(ele);
    var scrollTop = $(window).scrollTop();
    var ele_y = $block.offset().top - scrollTop;
    var ele_bottom_y = $block.height() + ele_y;
    var ele_h = $block.height();
    var ele_center_y = ele_y + ele_h/2;

    var win_h = $("#win_h_ref").height()//$(window).height();
    var win_center_y = win_h/2;

    var ele_top_cutoff = Math.abs(Math.min(ele_y, 0));// from 0 to ..
    var ele_bottom_cutoff = Math.abs(Math.max(ele_y + ele_h - win_h, 0));// from 0 to ..
    var visible_ele_h = ele_h - ele_top_cutoff - ele_bottom_cutoff;

    var top_center_distance = Math.abs(ele_y - win_center_y);
    var bottom_center_distance = Math.abs(ele_bottom_y - win_center_y);

    var shortest_center_distance = Math.min(top_center_distance, bottom_center_distance);
    if(shortest_center_distance < closest_center_dist)
    {
        closest_center_dist = shortest_center_distance;
        $closest_block = $block;            
    }
});

if($closest_block)
{
    if($closest_block.size() > 0)
    {
        if($closest_block.hasClass("focus") == false)
        {
            $("div.block.focus").removeClass("focus");
            $closest_block.addClass("focus");

            $('#menu li.current').removeClass('current');
            $("#menu li a").each(function()
            {
                if($(this).attr("href") == "#"+$closest_block.attr("id"))
                {
                    $(this).closest("li").addClass("current");
                }
            });

            var $bg = $($closest_block.data("background"));
            var bg_clr = $bg.css("backgroundColor");
            $("body").css({"backgroundColor":bg_clr});

        }           
    }
}

} 
```

# asp.net-web-api - 设计 REST ful ODATA API，当结果集为空时如何操作？404 还是 {}？

> ID：14273244
> 
> 赞同：5
> 
> 时间：2013-01-11T06:59:24.730
> 
> 标签：asp.net-web-api, odata

我正在使用 ASP.NET WebAPI 构建符合 ODATA 的 API？

有一个关于 $filter 没有结果时它应该如何表现的问题？

它应该返回一个空集合吗？或发送 HTTP 404 响应？

有什么想法/理由吗？我偏向于返回一个空集合，但这会违反推荐的做法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T08:14:30.310

鉴于您没有直接在特定的已知 Request-Uri（例如 /resource/{uid}）处寻址单个资源，**并且**您的集合也是已知的可寻址 Request-Uri（例如 /resource），那么 404 将是不合适的。

如果我正在使用您的 API，我会期望一个空集合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-24T14:23:49.040

坚持[OData 规范 3.0](http://www.odata.org/documentation/odata-version-3-0/odata-version-3-0-core-protocol/)：

9.1.1。200 OK 响应代码

如果操作成功完成，GET、PUT、MERGE 或 PATCH 请求可能会返回 200 OK。在这种情况下，**响应正文必须包含请求 URL 中指定的实体或属性的值**。

9.2.1。404 未找到响应代码

如果**请求 URL 指定的实体或集合不存在**，则服务应以 404 Not Found 和空响应正文进行响应。

甚至在[OData 规范 4.0中更精确](http://docs.oasis-open.org/odata/odata/v4.0/odata-v4.0-part1-protocol.html)

9.1.1 响应码 200 OK

不创建资源的请求如果成功完成**并且资源的值不为 null ，**则返回 200 OK 。在这种情况下，响应正文必须包含请求 URL 中指定的资源的值。

9.2.1 响应码404 Not Found 404 Not Found表示**请求URL指定的资源不存在**。响应主体可以提供附加信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T17:38:15.710

我认为不应该使用 HTTP 404。该代码用于指示对不存在资源的引用。

HTTP 代码 204（无内容）可能是比 404 更好的选择。但是空集合是一个更好的主意，因为它可以更容易地使用 API。

# xcode - Xcode 从 .xib 过渡到 Storyboard

> ID：14273245
> 
> 赞同：1
> 
> 时间：2013-01-11T06:59:26.570
> 
> 标签：xcode, storyboard

我有一个示例 xcode 项目，我下载了它来测试它。它有 2 个 .xib 文件（每个都有自己的视图控制器标题和主文件）。我添加了一个故事板，并将 ViewControllers 类设置为游戏和 ViewController（.xibs 的名称），并将主故事板设置为摘要中的故事板，但每当我运行应用程序时，它只运行 .xibs。 **我怎样才能让它运行故事板而不是 .xibs？** 我需要更改情节提要中的某个部分，还是每个 .xibs .h 和 .m 的代码中都有？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:18:15.850

看看你的 App Delegate。这是一个根据目标条件设置为使用 XIBS 或 Storyboard 运行的示例...

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
#ifdef FORMAT_XIB
    NSLog (@"XIB VERSION");
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    CVViewController* myViewController = nil;
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        myViewController = [ [CVViewController alloc] initWithNibName:@"CVViewController_iPhone" bundle:nil ];
    } else {
        myViewController = [ [CVViewController alloc] initWithNibName:@"CVViewController_iPad" bundle:nil ];
    }
    self.window.rootViewController = myViewController;
    [self.window makeKeyAndVisible];
#else
    NSLog (@"STORYBOARD VERSION");
#endif
    return YES;
} 
```

如果您正在运行 Storyboard 应用程序，则不需要所有这些。删除它，以便应用程序 didFinishLaunchingWithOptions: 方法只显示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
return YES;
} 
```

# r - R：可视化大量组之间的差异

> ID：14273248
> 
> 赞同：3
> 
> 时间：2013-01-11T06:59:41.713
> 
> 标签：r, visualization

[我有一个数据集](http://dl.dropbox.com/u/1791181/plot.csv)，其中包含制造单位的唯一 ID、其产出的行业分类 (CAT) 和每个单位雇用的人数 (EMP)。我想以图形方式显示 EMP 因 CAT 而异，即就业规模通常因单位生产的产出类型而异。我尝试了按 EMP 中值排列的箱线图：

```
a = read.csv("/filepath/plot.csv", header=T, stringsAsFactors=F)
bymedian = with(a, reorder(CAT, log(as.numeric(as.character(EMP))), median))
boxplot(log(EMP) ~ bymedian, data=a, horizontal=F, notch=T, pch=1, cex=.25, col="gray95", boxwex=.25, las=2, outline=F)
pch=1, cex=.25, col="gray95", boxwex=.25, las=2, outline=F) 
```

问题是因为类别太多（400+），情节变得很乱。有没有更简洁的方式来展示我正在尝试做的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T08:01:53.097

使用`ggplot2`你可以显示你试图用`scale_x_discrete`

![在此处输入图像描述](../Images/c38ff4c15a4e3a565774ef30546c1573.png)

```
library(ggplot2)
a$bymedian = with(a, reorder(CAT, log(EMP), median))
p <- ggplot(a,aes(y=log(EMP),x=bymedian))+
     geom_boxplot()

breaks <- levels(a$bymedian)[seq(1,nlevels(a$bymedian),20)]
p %+% scale_x_discrete(breaks = breaks,  labels = breaks) 
```

# git - cherrypick 没有提供所有文件

> ID：14273251
> 
> 赞同：1
> 
> 时间：2013-01-11T06:59:50.377
> 
> 标签：git, github, gerrit

有没有人遇到过你挑选一个gerrit并且所有文件都不存在的问题？以下是我执行的命令序列..关于可能是什么原因的任何想法？除了cherrypicking之外还有其他方法可以同步文件吗？

```
repo init -u git://git.company.com/platform/manifest.git -b jb_2.2_rb2_5
repo sync vendor/com/proprietary/code
git fetch ssh://username@review-android.company.com:29418/platform/vendor/com-proprietary/code refs/changes/42/185542/2 && git cherry-pick FETCH_HEAD 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:36:55.527

解决方案是挑选的文件中的更改已经存在

# c++ - 为什么我可以将 int 和 BOOL 强制转换为 void*，但不能浮动？

> ID：14273252
> 
> 赞同：15
> 
> 时间：2013-01-11T06:59:52.793
> 
> 标签：c++, objective-c, c

`void*`是 C 和衍生语言的一个有用特性。例如，可以用来`void*`在 C++ 类中存储 Objective-C 对象指针。

我最近正在研究一个类型转换框架，由于时间限制有点懒惰 - 所以我使用`void*`了......这就是这个问题的出现方式：

为什么我可以将 int 类型转换为 void*，但不能将浮点类型转换为 void*？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-11T07:09:31.250

BOOL is not a C++ type. It's probably typedef or defined somewhere, and in these cases, it would be the same as int. Windows, for example, has this in Windef.h:

```
 typedef int                 BOOL; 
```

so your question reduces to, why can you typecast int to void*, but not float to void*?

int to void* is ok but generally not recommended (and some compilers will warn about it) because they are inherently the same in representation. A pointer is basically an integer that points to an address in memory.

float to void* is not ok because the interpretation of the float value and the actual bits representing it are different. For example, if you do:

```
 float x = 1.0; 
```

what it does is it sets the 32 bit memory to 00 00 80 3f (the actual representation of the float value 1.0 in IEEE single precision). When you cast a float to a void*, the interpretation is ambiguous. Do you mean the pointer that points to location 1 in memory? or do you mean the pointer that points to location 3f800000 (assuming little endian) in memory?

Of course, if you are sure which of the two cases you want, there is always a way to get around the problem. For example:

```
 void* u = (void*)((int)x);        // first case
  void* u = (void*)(((unsigned short*)(&x))[0] | (((unsigned int)((unsigned short*)(&x))[1]) << 16)); // second case 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-11T07:10:41.157

指针通常由机器在内部表示为整数。C 允许您在指针类型和整数类型之间来回转换。（指针值可以转换为足够大的整数来容纳它，然后返回。）

用于以`void*`非常规的方式保存整数值。语言不能保证能正常工作，但如果你想马虎，把自己限制在 Intel 和其他普通平台上，它基本上会勉强过关。

实际上，您正在做的是`void*`用作通用容器，但机器使用了许多字节作为指针。这在 32 位和 64 位机器之间有所不同。所以在 32 位平台上转换`long long`为会丢失位。`void*`

至于浮点数， 的意图`(void*) 10.5f`是模棱两可的。您想将 10.5 舍入为整数，然后将其转换为无意义的指针吗？不，您希望将 FPU 使用的位模式放入无意义的指针中。这可以通过分配来完成`float f = 10.5f; void *vp = * (uint32_t*) &f;`，但请注意，这只是胡说八道：指针不是位的通用存储。

顺便说一下，最好的位通用存储是`char`数组。语言标准保证可以通过`char*`. 但是您必须注意数据对齐要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T09:31:59.533

[标准](http://c0x.coding-guidelines.com/6.3.2.3.html)规定*752 整数可以转换为任何指针类型*。没有说任何关于指针浮点转换的内容。

# database - phpmyadmin中的规划表关系

> ID：14273262
> 
> 赞同：0
> 
> 时间：2013-01-11T07:00:54.727
> 
> 标签：database, database-design, phpmyadmin

美好的一天，我需要有关如何在 phpmyadmin 中规划表格的帮助。这个网站有

用户表：用户名、密码、电子邮件、电话、国家、州、城市、地址等

评论表：comment1、comment2、comment3、....（这些评论在不同的页面上）

这个想法是，当用户登录时，他或她会发表评论。我想要一种方法来规划表格，以便当用户发表评论时，它会根据用户 ID 在评论中插入记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:11:37.920

一种可能性是将 PrimaryKey 添加`userId`到您的`users`表中，并将外键添加`userId`到您的`comments`表中。然后，您可以`userId`从登录的用户那里获取，并将其与相应的评论一起写入您的表格。

例如：

用户表：`userId, username, password, email, phone, country, state, city, address, ...`

意见表：`userId, comment1, comment2, comment3, ...`

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:49:34.190

正如您所说，每个评论都与特定页面和用户相关联，我建议您将评论表构建为：

`user_id, page_id, comment_id`

页面上每个用户的每条评论将在表中具有相应的行。如果您需要，这种结构将使管理添加新页面或重新排序现有页面变得更加容易。

# php - MongoDB RegEx 引擎完整性

> ID：14273263
> 
> 赞同：2
> 
> 时间：2013-01-11T07:00:57.287
> 
> 标签：php, regex, mongodb, unicode, word-boundary

根据 Mongo 文档，它使用 PCRE 引擎，并且 PCRE 支持 \b 和 \w 用于 unicode 字符，但遵循 RegEx 与 Unicode 字符串不匹配，是否有任何解决方案或替代语法？

```
// in Mongo console:
 db.col.find({word:/\b\pL\b/});

// in PHP
(new Mongo())->db->col->find(['word'=>new MongoRegex('/\b\pL\b/u')]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:54:28.900

我找不到任何关于 MongoDB 的 PCRE 实现支持哪些特性的文档，但如果它包括`\pL`Unicode 字符类以及前瞻和后瞻断言，那么一个支持 Unicode 的替代品`\b`将是：

```
(?:(?=\pL)(?<!\pL)|(?!\pL)(?<=\pL)) 
```

基本上，`(?=\pL)(?<!\pL)`如果下一个字符是字母而前一个不是，则`(?!\pL)(?<=\pL)`匹配，反之，如果前一个字符是字母而下一个不是，则匹配。

当然，如果我们已经知道相邻字符可以是什么，这个正则表达式可以被简化很多。例如，Unicode 感知版本`\b\pL+\b`可以简单地写成：

```
(?<!\pL)\pL+(?!\pL) 
```

# alfresco - cm:workingCopyOwner 和 cm:lockOwner 之间的区别

> ID：14273266
> 
> 赞同：4
> 
> 时间：2013-01-11T07:01:06.630
> 
> 标签：alfresco, alfresco-share

当我在 alfresce 跟踪代码时，我发现以下代码`node-header.get.html.ftl`

```
<#if item.workingCopy??>
    <#if item.workingCopy.isWorkingCopy??>
        <#assign lockUser = node.properties["cm:workingCopyOwner"]>
    <#else>
        <#assign lockUser = node.properties["cm:lockOwner"]>
    </#if>
......
<#elseif> 
```

我的理解是

> 当用户单击“**脱机编辑**”时，将创建文档的工作副本，并且 workingCopyOwner 与 lockOwner 相同。

如果是这样，为什么我们需要这样写？难道我的理解错了？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T09:52:19.817

属性 cm:workingCopyOwner 属于方面 cm:workingCopy，而 cm:lockOwner 属于 cm:lockable。

当您单击“脱机编辑”时，将创建节点副本并将方面 cm:workingCopy, cm:workingCopyOwner 设置为您的用户。原始节点被分配了方面 cm:lockable 并且这个节点获得了属性 cm:lockOwner。所以是的，这两个属性获得了相同的用户，但它们分配在不同的节点上。

/埃里克

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T12:10:10.323

除了@billerby 已经解释的内容之外，主要区别在于节点可以在没有被签出的情况下被锁定（例如，通过显式[锁定](http://dev.alfresco.com/resource/docs/java/repository/org/alfresco/service/cmr/lock/LockService.html#lock%28java.util.Collection,%20org.alfresco.service.cmr.lock.LockType,%20int%29)调用），而不会发生文档被签出但未锁定的情况。

因此，`cm:workingCopy`并`cm:lockable`捕获文档的两个不同的（尽管以某种方式相关）生命周期阶段，并且在签出文档时使用各自的属性来声明锁所有权只是保持一致。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T09:52:04.170

在 Alfresco 中，与大多数 CMS 一样，您可以签出文档。当您这样做时，原始文档将被锁定并创建一个工作副本供您安全编辑。

因此，在内容存储中实际上存在 2 个文档，包括原始文档和工作副本。

该`cm:workingCopyOwner`属性仅在工作副本节点上可用，而该`cm:lockOwner`属性仅在原始文档节点上可用。它们都拥有相同的功能信息（锁定用户），但在不同的节点上。

因此，在您上面的代码中，它通过测试来测试它是哪种节点（原始或工作副本）`node.workingCopy??`，`node.workingCopy.isWorkingCopy`然后相应地分配正确的属性以提供给锁定用户。

# c# - 如何在asp.net（不是系统日期）中直接从互联网获取当前日期？

> ID：14273271
> 
> 赞同：2
> 
> 时间：2013-01-11T07:01:39.973
> 
> 标签：c#, asp.net

我正在开发一个带有预订引擎的应用程序。所以基本上我需要一个来自互联网的日期。

```
System.DateTime.Now 
```

我已经使用了它，但它返回给我当前（本地）系统日期。我不想要系统日期，因为它可以在客户端更改。所以我正在寻找互联网（UTC）日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:06:31.313

In ASP.Net System.DateTime.Now returns the time of the *server*, not the *client*. This has no bearing to the date and time on a clients computer.

If you *really* want to get the date from a different server, try [this](http://nickstips.wordpress.com/2010/02/12/c-get-nist-internet-time/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:24:04.050

你为什么不使用

```
DateTime.UtcNow 
```

这将为您提供当前的 UTC 日期，然后您可以通过向其添加小时数来更改不同时区的日期，或者可以将其用作标准日期。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-11T07:10:43.957

使用 javascript 获取日期并将其存储在隐藏字段中。

document.getElementById("hdnTime").value = new Date();

然后从服务器端的隐藏变量中获取客户端日期。

# c# - 收到错误“对象引用未设置为对象的实例”

> ID：14273273
> 
> 赞同：0
> 
> 时间：2013-01-11T07:01:49.167
> 
> 标签：c#, .net, session-state

在下面的代码中，我在“if”条件行中收到错误“对象引用未设置为对象的实例”。任何人都可以帮助我解决我的代码有什么问题。

```
public string MemberLogOut()
    {
        string ret = string.Empty;
        try
        {
            if (HttpContext.Current.Session.Count > 0)
            HttpContext.Current.Session.Clear();
           ret="1";
        }
        catch (SqlException ex)
        {
            throw new Exception(ex.Message);
            ret="2";
        }
        return ret;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:57:17.713

只要您在 using 语句中引用了 System.Web，那么您应该能够使用它：

```
if (Session != null) {Session.Clear();} 
```

或者

```
if (Session != null) {Session.Abandon();} 
```

我不确定你为什么要返回一个包含整数的字符串。布尔值会更有意义，但在这种情况下你真的不需要任何东西。

此外，您的异常处理程序正在尝试捕获 sqlexception，这也可能是对象引用错误的来源，因为您在此函数中似乎没有任何 SQL 对象。

我可能会这样做：

```
protected bool MemberLogOut()
{
    try {
        if (Session != null) {Session.Abandon();}
        //do any logging and additional cleanup here
        return true;
    } catch {
        return false;
    }
} 
```

编辑：如果您实际上是从 Web 项目外部调用，则可以将当前 httpcontext 传递给以下方法：

```
protected bool MemberLogOut(HttpContext context)
{
    try {
        if (context != null && context.Session != null) {
            context.Session.Abandon();
        }
        //do any logging and additional cleanup here
        return true;
    } catch (Exception ex) {
        //log here if necessary
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T07:04:57.843

> 谁能帮我解决我的代码有什么问题

我猜您是在 ASP.NET 应用程序之外运行此代码。`HttpContext.Current`仅存在于 Web 应用程序的上下文中。如果您尝试在外部运行此代码（例如在控制台、桌面、单元测试中......），它永远不会工作。

因此，如果这是类库中的某种代码，旨在在不同的应用程序中重用，则必须从中删除`HttpContext`对它的依赖。

旁注：您的 if 条件似乎有点没用，因为您在 else 以及 if -> 清除会话中执行完全相同的操作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-11T07:07:17.633

try that code

```
public string MemberLogOut()
{
    string ret = string.Empty;
    try
    {
        if (HttpContext.Current.Session!=null)
        {HttpContext.Current.Session.Clear();}

    }
    catch (SqlException ex)
    {
        throw new Exception(ex.Message);
    }
    return "1";
} 
```

# php - 高效更新mysql数据库中的数据

> ID：14273275
> 
> 赞同：0
> 
> 时间：2013-01-11T07:01:54.067
> 
> 标签：php, mysql, optimization

现在我想创建一个游戏的排名系统，假设当前排名如下：

```
player  rank        
A       : 1 
B       : 2     
C       : 3 
D       : 4 
E       : 5 
```

玩家D在比赛中击败玩家B后，排名变化如下：

```
player  rank        
A       :  1    
D       :  2    
B       :  3    
C       :  4    
E       :  5 
```

我怎样才能有效地更新mysql数据库中的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:42:18.427

我不是存储过程方面的专家，但我认为如果您创建一个带有参数“player1”和“player2”的存储过程，其中 player1 是排名较高的玩家，这样的事情可能会起作用：

```
# Get current player ranks
SET @player1rank = (SELECT `Rank` FROM `RankTable` WHERE `Player` = player1);
SET @player2rank = (SELECT `Rank` FROM `RankTable` WHERE `Player` = player2);
# Drop ranks for player 1 down to player 2
UPDATE `RankTable` SET `Rank` = `Rank`+1 WHERE `Rank` >= @player1rank AND `Rank` < @player2rank;
# Now update player2's rank
UPDATE `RankTable` SET `Rank` = @player1rank WHERE `Player` = player2; 
```

作为一个存储过程，这将运行得非常快——如果您的表变大，这是一个额外的优势。

这是我的尝试，它没有使用 PhpMyAdmin（找不到版本）在 MySQL 4.0 中注册，但它可能适用于 MySQL 5+，并希望能让你朝着正确的方向前进......

```
DELIMITER $$
CREATE PROCEDURE rerank_players (IN player1 VARCHAR (100), IN player2 VARCHAR (100))
BEGIN
   DECLARE player1rank, player2rank INT;
   SET player1rank = (SELECT Rank FROM RankTable WHERE Player = player1);
   SET player2rank = (SELECT Rank FROM RankTable WHERE Player = player2);
   UPDATE RankTable SET Rank = Rank+1 WHERE Rank >= player1rank AND Rank < player2rank;
   UPDATE RankTable SET Rank = player1rank WHERE Player = player2;
END
$$ 
```

您需要将参数声明中 VARCHAR 的长度调整为您的数据长度以及重命名表和字段等...

# jquery - 下拉菜单中的选项更改时如何隐藏消息

> ID：14273276
> 
> 赞同：1
> 
> 时间：2013-01-11T07:01:58.053
> 
> 标签：jquery

嗨，下面我有一段代码，它使用 jquery 和一个 html div 标签显示存储在另一个 php 页面中的消息`'targetdiv`：

```
 function submitform() {    

    $.ajax({
        type: "POST",
        url: "updatestudentsession.php",
data: { 
    Idcurrent:  $('#currentid').val(),
    addtextarea:   $('#studentadd').val()
},
        dataType:'json',  //get response as json
        success: function(result){
                    if(result.errorflag){

       //do your stuff on getting error message
      var newHtml="<span style='color: red'>"+result.msg+"</span>"; 
      $("#targetdiv").html(newHtml);  //i am displaying the error msg here

    }else{
       //you got success message

       var newHtml="<span style='color: green'>"+result.msg+"</span>"; 
            $("#targetdiv").html(newHtml);

    $('#targetdiv').show();
        }
    }
  });        
} 
```

现在我要做的是，如果用户在该消息出现后从下拉菜单中进行了选择，我希望它隐藏该消息。问题是当我尝试这样做时，即使我提交了没有显示消息的表单，消息也不会出现。我的问题是我应该如何`#targetdiv`在选项更改时隐藏标签中的消息，但在用户提交表单后仍然能够显示消息？

以下是我尝试做的事情：

```
 $(document).ready( function(){

        $('#sessionsDrop').change( function(){

            $('#targetdiv').hide();
            var search_val = $(this).val();

    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:32:33.763

```
 Hi you can do like this
     $(document).ready( function(){

    $('#sessionsDrop').change( function(){

        $('#targetdiv').hide();

        var search_val = $("#targetdiv>span").text();

     });

   }); 
```

# javascript - 如何在画布中模拟 z-index

> ID：14273280
> 
> 赞同：6
> 
> 时间：2013-01-11T07:02:27.917
> 
> 标签：javascript, html, canvas, html5-canvas

我之前问过一个问题：[如何控制画布对象的z-index？](https://stackoverflow.com/questions/14250697/how-can-i-control-z-index-of-canvas-objects)我们达成的解决方案可能不适用于复杂的情况。

我发现画布没有 z-index 系统，而是一个简单的有序绘图系统。现在有一个新问题：如何模拟z-index系统来解决这个问题在复杂的情况下？

好的答案可以解决一个大问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T07:03:59.350

并不是canvas 没有z-index，而是canvas 不会保留与HTML 页面相反的对象。它只是在像素矩阵上绘制。

基本上有两种类型的绘图模型：

*   对象（通常是向量）：对象由引擎保存和管理。它们通常可以删除或更改。他们有一个 z-index
*   位图：没有对象。你只需改变一个像素矩阵

Canvas 模型是位图模型。要将对象绘制在其他对象之上，您必须**在 之后**绘制它们。这意味着您必须管理您绘制的内容。

画布模型非常快，但是如果您想要一个绘图系统来管理您的对象，也许您需要[SVG](https://developer.mozilla.org/en-US/docs/SVG)来代替。

* * *

如果您想使用画布，那么最好将您绘制的内容保留为对象。这是我刚刚制作的一个示例：我保留了一个方形列表，并且每一秒我都会随机化它们的 zindex 并重新绘制它们：

```
var c = document.getElementById('c').getContext('2d');
function Square(x, y, s, color) {
   this.x = x; this.y = y; this.s = s; this.color = color;
   this.zindex=0;
}
Square.prototype.draw = function(c) {
  c.fillStyle = this.color;
  c.fillRect(this.x, this.y, this.s, this.s);  
}
var squares = [
  new Square(10, 10, 50, 'blue'), new Square(40, 10, 40, 'red'), new Square(30, 50, 30, 'green'),
  new Square(60, 30, 40, '#111'), new Square(0, 30, 20, '#444'), new Square(70, 00, 40, '#999')
];

function draw() {
  c.fillStyle = "white";
  c.fillRect(0, 0, 1000, 500);
  for (var i=0; i<squares.length; i++) squares[i].draw(c);
}
setInterval(function(){
  // give all squares a random z-index
  squares.forEach(function(v){v.zindex=Math.random()});
  // sort the list accordingly to zindex
  squares.sort(function(a,b){return a.zindex-b.zindex});
  draw();
}, 1000); 
```

**[示范](http://jsfiddle.net/2PzBq/1/)**

这个想法是方形数组根据zindex进行排序。这可以很容易地扩展到其他类型的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T07:13:32.513

正如dystroy所说，最简单的z-index只是一个索引，告诉你在画布上以什么顺序绘制东西，以便它们正确重叠。

如果您打算做更多的事情，比如复制浏览器的现有工作原理，那么您将有更多的工作要做。在浏览器中绘制对象的顺序是一个复杂的计算，由以下因素驱动：

1.  DOM 树
2.  元素的`position`属性
3.  元素的`z-index`属性

规范的来源是[Stacking Contexts 的详细描述](http://www.w3.org/TR/CSS2/zindex.html)，它是 CSS 规范的一部分。

# java - 使用 Ant 更改 getter setter

> ID：14273282
> 
> 赞同：2
> 
> 时间：2013-01-11T07:02:39.270
> 
> 标签：java, ant

我的 Java 项目中有几个分布在不同包中的类，它们包含一个或多个属性，即对应的 getter 和 setter。我需要更改属性的名称以包含前缀。例如，如果我有一个变量

```
private String one; 
```

我想改为

```
private String m_one; 
```

我还需要相应的 getter 和 setter 来改变。**这里的限制是必须用 ant-scripts 来改变它。**

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:28:19.927

您可以在下面的 ant 代码的帮助下替换 java 文件中的 java 变量

```
 <replaceregexp match="one" replace="m_one" flags="g" byline="true">
    <fileset dir="${src.dir}" includes="**/*.java"/>
</replaceregexp> 
```

# c# - 如何通过读取 Excel 工作表中的数据生成 sql 脚本？

> ID：14273288
> 
> 赞同：1
> 
> 时间：2013-01-11T07:03:16.287
> 
> 标签：c#, asp.net, .net, excel

目前我正在研究 c# .net，我需要使用 Excel 工作表中存在的数据来生成脚本（sql 插入脚本）。

**更加具体，**

> 如果excel工作表有三列

```
**column name** ColumName1, ColumName2, ColumName3 
**data like**   Value1,     Value2,     Value3 
```

我需要编写代码来生成插入脚本，例如-

> 插入 [dbo].[TableName] ([ColumName1], [ColumName2], [ColumName3]) 值 ('Value1', 'Value2', 'Value3')

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:09:44.487

You would need to write a forumla for the final column for instance:

```
="insert into tblyourtablename (intmine, strval) values ("&B4&", N'"&C4&"'); set @intpane = scope_identity(); INSERT INTO tblpane (nameid_fk,strtext,bitmine,vbarmine) VALUES (@intpane ,N'"&D8&"' ,0 ,convert(varbinary,''));" 
```

This should get your started

**EDIT**

Why do some SQL strings have an 'N' prefix? You may have seen Transact-SQL code that passes strings around using an N prefix. This denotes that the subsequent string is in Unicode (the N actually stands for National language character set). Which means that you are passing an NCHAR, NVARCHAR or NTEXT value, as opposed to CHAR, VARCHAR or TEXT. See Article #2354 for a comparison of these data types.

For further reading please view the following link

[http://databases.aspfaq.com/general/why-do-some-sql-strings-have-an-n-prefix.html](http://databases.aspfaq.com/general/why-do-some-sql-strings-have-an-n-prefix.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:05:07.750

```
var myConnection = new OleDbConnection("provider=Microsoft.Jet.OLEDB.4.0;Data Source='c:\\Language_Batch1_OneClick.xls';Extended Properties=Excel 8.0;"); ;
var myCommand = new OleDbCommand();
var upCommand = new OleDbCommand();
int i = 0;
try
{

    string sql = null;
    string Value1 =null;
    string Value2=null;
    string Value3=null;
    myConnection.Open();
    myCommand.Connection = myConnection;
    sql = "select ColumName1,ColumName1from,ColumName3  [sheet-name]";
    myCommand.CommandText = sql;
    var dataReader = myCommand.ExecuteReader();
    {
      value1=dataReader["ColumName1"].ToString();
      value2=dataReader["ColumName2"].ToString();
      value3=dataReader["ColumName3"].ToString();

    string newQuery="INSERT [dbo].[TableName] ([ColumName1], [ColumName2], [ColumName3]) VALUES ('"+Value1+"', '"+Value2+"', '"+Value3+"')"
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-07T06:41:29.720

读取excel并获取数据，然后生成插入脚本

# ios - 在应用启动时将项目从另一个 plist 添加到 plist

> ID：14273290
> 
> 赞同：1
> 
> 时间：2013-01-11T07:03:21.860
> 
> 标签：ios, objective-c, xcode, plist

我的应用程序是用户可以评分和记笔记等的项目列表。所有这些项目（存储用户评分和笔记的字典）都存储在一个 plist 中，当应用程序首次加载时，该 plist 将移动到文档目录（如果文件目录中已经存在 plist 文件，则跳过此步骤）。现在我有一些评论，人们一直在说列表中应该有更多的项目。现在我试图弄清楚如何将新项目添加到 plist。如果我将它们添加到现有 plist 中，用户将永远不会看到新项目，因为应用程序会检查数据库是否已存在于文档目录中。所以他们永远不会收到新的名单。所以我计划创建一个包含项目的新 plist，如果项目没有，则将每个新项目附加到旧 plist t 已经存在（因为用户可以自己添加项目，所以我不希望有重复的条目，以防用户添加了同名的项目）。我的困境是我不确定在哪里/如何进行 plist 合并。我是否在 App Delegate 中执行此操作？我是否在`viewDidLoad`的主要观点？如果应用程序已将新项目添加到旧 plist 中，如何阻止它在每次加载应用程序时进行检查？我知道有不同的方法可以做到这一点。我只是在寻找最简单且“应用程序负载更少”的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:18:40.430

行。感谢其中一个 iOS 聊天中的几个人，我解决了这个问题。所以基本上在我的`application didFinishLaunchingWithOptions`方法中，我`AppDelegate.m`将两个 plist 加载到 2 个不同的`NSArrays`array1 和 array2 中，我还创建了一个 NSMutableArray array3，我用用户文档目录中的原始 plist 加载它。然后我循环检查它们以确保我没有根据它们添加任何重复的项目`Name_Key`（因为数组中的项目是字典）。如果项目不匹配，那么我会将它们添加到第三个数组（array3）。然后我将array3保存到原始plist文件路径中。然后我在用户默认值中设置了一个整数，所以它只会执行一次这个任务。我不希望应用程序在用户每次打开应用程序时都经历这个。下面是我使用的代码。

```
int haveMergedPlist = [[NSUserDefaults standardUserDefaults] integerForKey:@"merged plist"];

if (haveMergedPlist < 1){
    // I used a integer rather than a BOOL because if I ever want to perform this operation again with another app update all I have to do is change the number.

    // merge code here

    //new plist
      NSString *newPlistPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"NewPlist.plist"];
      NSArray *newPlistArray = [[NSArray alloc]initWithContentsOfFile:newPlistPath];

    //original plist in user documents directory
      NSArray *searchPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
      NSString *documentsDirectory = [searchPaths lastObject];
      NSString *originalPlistPath = [documentsDirectory stringByAppendingPathComponent:@"originalPlist.plist"];
      NSArray *originalPlistArray = [[NSMutableArray alloc]initWithContentsOfFile:originalPlistPath];
      NSMutableArray *combinedPlistArray = [[NSMutableArray alloc]initWithContentsOfFile:originalPlistPath];

    // Loop through both plists arrays and add if it does not match/exist.
      BOOL itemExists = YES;
    for (NSDictionary *newItem in newPlistArray) {

        for (NSDictionary *originalItem in originalPlistArray) {
            NSString * newItemNameString = [[newItem objectForKey:NAME_KEY] lowercaseString];
            NSString * origItemNameString = [[originalItem objectForKey:NAME_KEY] lowercaseString];

           //Compare lowercase strings and if they don't match then add them to the original plist array.
            if ([newItemNameString isEqualToString:origItemNameString]) {
                itemExists = YES;
                break;
            } else {
                itemExists = NO;
                //doesn't match so add it
            }
        }
        if (itemExists == NO) {
            [combinedPlistArray addObject:newItem];
            NSLog(@"newItem added");
            itemExists = YES;
        }

    }
    //Write Array With New Items Added to documents directory
    NSString *writeableDBPath = [documentsDirectory stringByAppendingPathComponent:@"originalPlist.plist"];
    [combinedPlistArray writeToFile:writeableDBPath atomically:YES];

    //set integer to 1 in user defaults so it only merge's once
    //I comment this out while getting the loops to work otherwise you will have to delete the app out of the simulator or the phone to make sure its working every time.
    [[NSUserDefaults standardUserDefaults] setInteger:1 forKey:@"merged plist"];
} 
```

# html - 使用 PostMessage 处理程序的跨域 iFrame RequestFullScreen

> ID：14273292
> 
> 赞同：2
> 
> 时间：2013-01-11T07:03:43.030
> 
> 标签：html, iframe, postmessage

我需要在域 A 上创建一个父 iFrame，从其 postMessage 事件处理程序全屏显示，该事件处理程序由域 B 中的窗口中的 postMessage 触发。我完美地设置了 postMessage 通信。“allowfullscreen”属性也在 iframe 上设置。但是 requestFullScreen() 方法似乎默默地退出了。搜索后我发现由于安全原因，requestFullScreen 仅适用于事件处理程序，用于处理鼠标单击、按键等事件。我尝试使用 jquery click() 在 iF​​rame 上强制执行单击，它也进入了单击处理程序，但 requestFullScreen不起作用。我尝试直接单击 iFrame 并全屏显示。

我该如何进行这项工作？

这是我的代码 - 用于 domainA 上的父级。 **我已确保当我在域 B 上的孩子发布消息时执行发布消息处理程序**

```
<!DOCTYPE HTML>
<html>
<script type="text/javascript" src="jquery.js"></script>
<script>
    var container;
    $(function(){
        container = $('#parentFrame')[0];
        container.addEventListener("click",goFullScreen);
        window.addEventListener("message", receiveMessage, false);
    });

        function receiveMessage(event)
        {
            /*  Use this code to restrict request from  only one particular domain & Port!
             Port not needed in this case*/
            if (event.origin !== "http://myChildDomain.com")
            {
                return;
            }
            /*Retrieving relevant variables*/
            var message=event.data;
            var source=event.source;
            var origin=event.origin;

            //Forcefully generating a click event because fullscreen won't work when directly requested!
            container.click();
        }

    goFullScreen = function (){
        if (container.mozRequestFullScreen) {
            // This is how to go into fullscren mode in Firefox
            // Note the "moz" prefix, which is short for Mozilla.
            container.mozRequestFullScreen();
        } else if (container.webkitRequestFullScreen) {
            // This is how to go into fullscreen mode in Chrome and Safari
            // Both of those browsers are based on the Webkit project, hence the same prefix.
            container.webkitRequestFullScreen();
        }
    }

</script>
<body>
<iframe id="parentFrame" src="http://myChildDomain/child.html" width="804" height="600" frameborder="0"  scrolling="no" allowfullscreen style="border: 5px solid #00ff00">
</iframe>
</body>
</html> 
```

# php - Xeround - 使用 PHP 连接到数据库

> ID：14273297
> 
> 赞同：0
> 
> 时间：2013-01-11T07:04:14.740
> 
> 标签：php, database, connection, cloud, xeround

我在通过 php 连接到我的 Xeround 数据库时遇到问题。我已在 java 中使用 JDBC 成功连接，但我试图从我的网站上进行连接，但它无法正常工作。

这是php代码，很简单。

```
<?php
  $con = mysql_connect("DATABASE INSTANCE","USERNAME","PASSWORD");
  if(!$con) {
  die ('Could not connect to mysql' . mysql_error());
}

mysql_select_db("DATABASE TABLE", $con);
?> 
```

我尝试连接时遇到的错误说：

```
Warning: mysql_connect() [function.mysql-connect]: Access denied for user
'USERNAME'@'192.168.1.1' (using password: YES) in     /www/zymichost.com/s/f/x/sfxol/htdocs/db_connect2.php on line 15
Could not connect to mysqlAccess denied for user 'USERNAME'@'192.168.1.1' (using password: YES) 
```

有谁知道这可能是什么？使用 php 连接到 Xeround 是不可能的吗？如果是这样，是否有人知道另一个允许远程连接的免费在线托管数据库？

非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:11:15.940

不要使用`mysql_connect`，它已弃用。改为尝试`PDO`：php.net/manual/en/ref.pdo-mysql.php

此外，在 Xeround 网站上，有一个教程`PDO`和`mysqli`扩展：

[http://xeround.com/developers/connecting-your-mysql-application-to-xeround-cloud-database/](http://xeround.com/developers/connecting-your-mysql-application-to-xeround-cloud-database/)

# bash - Cron 作业未运行 bash 脚本

> ID：14273298
> 
> 赞同：0
> 
> 时间：2013-01-11T07:04:20.857
> 
> 标签：bash, crontab

我有一个 ruby​​ 脚本，我想每 10 分钟执行一次，但我丢失了我的脚本，我正在尝试重写它并且无法让它工作。我保留的 cron 设置与它工作时保持不变，但这就是我所拥有的。

```
rvm_bin_path=/home/usr/.rvm/bin
GEM_HOME=/home/usr/.rvm/gems/ruby-1.9.3-p194
SHELL=/bin/bash
IRBRC=/home/usr/.rvm/rubies/ruby-1.9.3-p194/.irbrc
MY_RUBY_HOME=/home/usr/.rvm/rubies/ruby-1.9.3-p194
__array_start=0
rvm_path=/home/usr/.rvm
escape_flag=1
rvm_prefix=/home/usr
PATH=/home/usr/.rvm/gems/ruby-1.9.3-p194/bin:/home/usr/.rvm/gems/ruby-1.9.3-p194@global/bin:/home/usr/.rvm/rubies/ruby-1.9.3-p$
PWD=/etc
LANG=en_CA.UTF-8
_second=1
rvm_version=1.14.1 (stable)
_first=0
GEM_PATH=/home/usr/.rvm/gems/ruby-1.9.3-p194:/home/usr/.rvm/gems/ruby-1.9.3-p194@global
RUBY_VERSION=ruby-1.9.3-p194
_=/usr/bin/env

*/10    *       *       *       *       bash -li -c /home/usr/MeetCal-bot/run-bot.sh 
```

我将 cron 作为 su 运行，这就是为什么我需要添加所有这些环境变量，以确保它具有运行 ruby​​ 所需的一切。我以前使用过所有相同的信息，所以我认为我没有遗漏任何东西

我拥有的 bash 脚本是这样的：

```
#!/bin/bash
ruby /home/usr/bot/bot.rb >> /home/usr/bot/output.txt 
```

当作业运行时，它会生成 output.txt，但它是空的，我希望会有一些输出，可能是 ruby​​ 错误消息。

作为最后的手段，我为目录做了 chmod 777 * 以尝试修复任何权限问题，但这没有帮助。

如果我以本地用户身份运行 ruby​​ 脚本，它运行良好，没有任何错误，但我似乎无法弄清楚为什么它以我的用户身份运行，而不是以 su 身份运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T07:18:43.617

我会省略`-i`and `-c`，因为那些不是必需的。做就是了

```
*/10 * * * * bash -l /home/usr/MeetCal-bot/run-bot.sh 
```

作为一个开始。

在您的脚本中，插入 a`which ruby >>/home/usr/bot/output.txt`以查看它是否找到了 ruby​​。要查看任何错误消息，请添加`2>&1`到您的 ruby​​ 调用中

```
#!/bin/bash

which ruby >>/home/usr/bot/output.txt
ruby /home/usr/bot/bot.rb >>/home/usr/bot/output.txt 2>&1 
```

# java - Android 将字符串转换为日期

> ID：14273311
> 
> 赞同：0
> 
> 时间：2013-01-11T07:04:59.093
> 
> 标签：java, android, datetime

我是android开发的新手。我想将`String`"Mon, 11 Feb 2013 08:00:00 CST" 转换为 a `Date`，并且我还想将此日期添加到个人日历中。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:12:17.390

这个问题看起来有点类似于：[java string to datetime conversion issue](https://stackoverflow.com/questions/746259/java-string-to-datetime-conversion-issue)

```
String d1String = "Mon, 11 Feb 2013 08:00:00 CST";
DateFormat df = new SimpleDateFormat("EEE, dd MMM yyyy hh:mm:ss z");
Date d1 = df.parse(d1String); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:15:53.960

```
Date d= new SimpleDateFormat("Yourdateformathere").parse("yourstringhere"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T07:21:34.993

试试这个...

```
 String time1 = "Mon, 11 Feb 2013 08:00:00 CST";
    String str="";
    Date date;
    try {
        date = new SimpleDateFormat("EEE, dd MMM yyyy hh:mm:ss z").parse(time1);
         str = new SimpleDateFormat("YOUR REQUIRED FORMATE").format(date);

        System.out.println("output DATE== "+str);

    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

# ruby - Redis gem 中的“不可见”实例方法

> ID：14273313
> 
> 赞同：4
> 
> 时间：2013-01-11T07:05:07.683
> 
> 标签：ruby, redis

类上有一些实例方法`Redis`。它们在源代码中定义并且可以工作。但是它们没有出现在`Redis#methods`输出中！

```
require 'redis'

redis = Redis.new # => #<Redis client v3.0.2 for redis://127.0.0.1:6379/0>
redis.info['redis_version'] # => "2.6.4"

k = 'foo'
redis.setbit k, 1, 1
redis.setbit k, 3, 1
redis.setbit k, 11, 1

redis.bitcount k # => 3

redis.methods.grep(/bit/) # => [:setbit, :getbit]
# no bitcount in the methods! 
```

方法定义：[getbit](https://github.com/redis/redis-rb/blob/master/lib/redis.rb#L821)、[setbit](https://github.com/redis/redis-rb/blob/master/lib/redis.rb#L810)、[bitcount](https://github.com/redis/redis-rb/blob/master/lib/redis.rb#L844)、[bitop](https://github.com/redis/redis-rb/blob/master/lib/redis.rb#L856)。

据我所知，`bitcount`/`bitop` **应该**出现在`methods`. 但他们没有。有什么想法吗？

我需要将它们列在方法中，以便另一个 gem 工作（它定义了它从中获取的 redis 命令的代理方法`Redis#methods`）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:37:58.667

gem 的发布版本没有明确定义这些方法，您可以通过检查已安装的源或`redis.method :bitcount`

[https://github.com/redis/redis-rb/blob/v3.0.2/lib/redis.rb](https://github.com/redis/redis-rb/blob/v3.0.2/lib/redis.rb)

它们之所以起作用，是因为缺少的方法只是将它们盲目地传递给 redis 服务器。

# visual-c++ - GetOutputAvailableType() 返回 MF_E_TRANSFORM_TYPE_NOT_SET

> ID：14273314
> 
> 赞同：0
> 
> 时间：2013-01-11T07:05:12.820
> 
> 标签：visual-c++, video, h.264, ms-media-foundation

我正在尝试从我的相机解码 h264 视频我已将解码器配置如下。我无法弄清楚为什么 GetOutputAvailableType() 函数返回 MF_E_TRANSFORM_TYPE_NOT_SET。我还注意到 GetStreamIDs() 返回 E_NOTIMPL。我已经在 msdn 中检查了它给出的“MFT 具有固定数量的流，并且 \n 流标识符是从零开始的连续的。”。有人还可以解释这意味着什么吗？

```
HRESULT CH264_decodingDlg::ConfugureDecoder(IMFTransform *pDecoder)
{

HRESULT hr = S_OK;
IMFMediaType* pMediaTypeInput = NULL;

//Creating Input Media Type
hr  = MFCreateMediaType(&pMediaTypeInput);
if (FAILED(hr)) return hr;

DWORD dwIn = 0,dwOut = 0;
hr = pDecoder->GetStreamCount(&dwIn,&dwOut);
if (FAILED(hr)) return hr;
if (dwIn)
{
    DWORD dwInputID[2] ={0} ;
    DWORD dwOutputID[2]= {0};

            hr = pDecoder->GetStreamIDs(dwIn,dwInputID,dwOut,dwOutputID);

    //if (FAILED(hr)) return hr;
    GUID guidCurrent;
    GUID guidMajor;
    for (int i = 0; i< 8; i++)
    {

        hr = pDecoder->GetInputAvailableType(0,i,&pMediaTypeInput);
        hr  = pMediaTypeInput->GetGUID(MF_MT_MAJOR_TYPE, &guidMajor);
        if (guidMajor == MFMediaType_Video)    //safety check
        {
            if (hr == MF_E_NO_MORE_TYPES)
            {
                break;
            }

            hr  = pMediaTypeInput->GetGUID( MF_MT_SUBTYPE, &guidCurrent );

            if ( guidCurrent == MFVideoFormat_H264 )        //m_pVideoSubtype = MEDIASUBTYPE_WVC1
            {
                break;
            }
        }
    }
    // Set MF_MT_MAJOR_TYPE
    hr = pMediaTypeInput->SetGUID(MF_MT_MAJOR_TYPE ,MFMediaType_Video);
    if (FAILED(hr)) return hr;

    // Set MF_MT_SUBTYPE
    hr = pMediaTypeInput->SetGUID(MF_MT_SUBTYPE ,MFVideoFormat_H264);
    if (FAILED(hr)) return hr;

    // Set MF_MT_FRAME_RATE
    UINT32 nNumerator = 30;
    UINT32 nDenominator = 1;
    hr  = MFSetAttributeRatio(pMediaTypeInput,MF_MT_FRAME_RATE ,nNumerator,nDenominator);
    if (FAILED(hr)) return hr;

    // Set MF_MT_FRAME_SIZE
    UINT32 nWidth = 640 ;
    UINT32 nHeight = 480;
    hr = MFSetAttributeSize(pMediaTypeInput, MF_MT_FRAME_SIZE, nWidth, nHeight);
    if (FAILED(hr)) return hr;

    // Set MF_MT_MPEG2_PROFILE
    hr = pMediaTypeInput->SetUINT32(MF_MT_MPEG2_PROFILE, eAVEncH264VProfile_Base);
    if (FAILED(hr)) return hr;

    // Set MF_MT_INTERLACE_MODE
    hr = pMediaTypeInput->SetUINT32(MF_MT_INTERLACE_MODE ,MFVideoInterlace_Progressive);
    if (FAILED(hr)) return hr;

    // Set MF_MT_PIXEL_ASPECT_RATIO 
    hr = MFSetAttributeRatio(pMediaTypeInput,MF_MT_PIXEL_ASPECT_RATIO,1,1);
    if (FAILED(hr)) return hr;

    //Set Input Media Type
    hr = pDecoder->SetInputType(0,pMediaTypeInput,MFT_SET_TYPE_TEST_ONLY);
    if (FAILED(hr)) return hr;

    //Creating Output Media Type
    IMFMediaType* pMediaTypeOutput = NULL;
    hr  = MFCreateMediaType(&pMediaTypeOutput);
    if (FAILED(hr)) return hr;

    hr = pDecoder->GetOutputAvailableType(0,0,&pMediaTypeOutput);
    if (FAILED(hr)) return hr;` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:37:16.663

在获得输出媒体类型之前，您必须设置输入媒体类型。我没有看到你在做这个（`SetInputType`被称为`MFT_SET_TYPE_TEST_ONLY`）。

# matlab - 第二个子图消失

> ID：14273315
> 
> 赞同：6
> 
> 时间：2013-01-11T07:05:16.637
> 
> 标签：matlab, user-interface, plot, figure, subplot

我有一个奇怪的（而且可能很容易解决）问题。我试图绘制（使用面板）两个图：

```
a1 = subplot(2,1,1, 'Parent', handles.cpd_plot, 'Position', [0.1, 0.4, 0.85, 0.45]);
a2 = subplot(2,1,2, 'Parent', handles.cpd_plot, 'Position', [0.1, 0.1, 0.85, 0.15]); 
```

但是在绘制 a2 之后，a1 消失了。我看到它的位置有问题，当我稍微抬起 a1 ( `'Position', [0.1, 0.5, 0.85, 0.45]`) 它的工作（但它必须> = 0.5）。哪里有问题？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T07:50:05.547

所以它可能正在发生，因为子图在与前一个图重叠时删除了一个图。我怀疑这是因为具有自己的默认位置的子图图块编号（即 subplot(2,1,1) 等）与您输入的位置之间的位置值冲突。

因此`subplot(m,l,p, 'position', [ a b c d])`，您可以不使用 ，而仅使用位置信息来解决此问题，`subplot`如下所示：

```
subplot('position',  [0.1, 0.4, 0.85, 0.45])
plot(1:10);
subplot('position', [0.1, 0.1, 0.85, 0.15])
plot(1:10); 
```

![在此处输入图像描述](../Images/96954c9371579dc1298fb9195510e49c.png)

# c# - 如何使用 Respose.Redirect() 打开具有特定 div 的网页？

> ID：14273316
> 
> 赞同：1
> 
> 时间：2013-01-11T07:05:18.053
> 
> 标签：c#, javascript, asp.net, response.redirect

我想打开一个带有特定 div 的 asp.net 网页

就像

```
<a id="url" href="mypage.aspx#tab1">Home</a> 
```

我想使用

```
Response.Redirect("mypage.aspx"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:17:51.123

不，`<div>`存在客户端。使用重定向，您只能说应该在新地址再次提交当前请求。您无法指定重定向应在何处结束（frame、iframe、div、window ..）。

您必须从客户端执行此操作：从某个 url 加载 div（或其他）（可以进行重定向）。

或在`mypage.aspx`页面内部执行此 JQuery 动画并移动到特定 div

```
$(function(){
   $('html, body').animate({ scrollTop: $("#header1").offset().top });
}); 
```

# ajax - 我想通过 AJAX 提交表单，表单内容（多个文本框，多个图像）每次都是动态的

> ID：14273317
> 
> 赞同：0
> 
> 时间：2013-01-11T07:05:26.550
> 
> 标签：ajax, jquery

我想通过 AJAX 提交表单，表单内容（多个文本框，多个图像）每次都是动态的，我想拥有所有控件值和表单的所有图像，通过 AJAX 提交到数据库并重定向到下一步，

我试过的代码如下，

```
<script type="text/javascript" >

function makeAjaxCall()
{
     alert($('#step2_form').serialize());
     var base_url='<?php echo base_url();?>';
     var url_post=base_url+'property_list/property_add/add_step2';
     alert(url_post);
     $.ajax({
     type: 'POST',
     url: '<?php echo base_url(); ?>property_list/property_add/add_step2',
     success: function(data) {
}
</script> 
```

如果您需要进一步的解释，请告诉我。

# c# - 用 Rx 尝试 5 次

> ID：14273318
> 
> 赞同：2
> 
> 时间：2013-01-11T07:05:31.500
> 
> 标签：c#, linq, system.reactive

我想在五秒钟内每秒尝试一次，如果它们都是假的，则返回假，并在第一次为真时返回真。当务之急，它看起来像这样：

```
bool TryFiveTimes()
{
    for (int i = 0; i < 5; i++)
    {
        if (Fn())
            return true;
        System.Threading.Thread.Sleep(1000);
    }
    return false;
} 
```

我想使用 Rx 来做到这一点，但想不出一个简洁的方法。我目前的尝试是：

```
bool TryFiveTimes()
{
    return Observable.Interval(TimeSpan.FromSeconds(1))
        .Take(5)
        .Select(_ => Fn())
        .Scan(false, (curr, prev) => curr || prev)
        .Last();
} 
```

`Fn()`这将给出正确的结果，但如果在结束前返回 true ，则不会提前返回。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T07:36:49.903

对于您的实现，只需使用`.First()`方法而不是`.Last()`

```
 static bool TryFiveTimes()
    {
        return Observable.Interval(TimeSpan.FromSeconds(1))
            .Take(5)
            .Select(_ => Fn())
            .Scan(false, (curr, prev) => curr || prev)
            .FirstOrDefault(v => v);
    }

    static int counters = 0;
    static bool Fn()
    {
        counters++;
        Console.WriteLine(counters);
        return counters > 2;
    } 
```

[编辑]：添加的代码将证明该`Fn`方法只会在它第一次返回之前执行`True`

此外，您在这里并不需要`Scan()`，较短的版本是：

```
 return Observable
        .Interval(TimeSpan.FromSeconds(1))
        .Take(5)
        .Select(_ => Fn())
        .FirstOrDefault(v => v); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T10:37:25.477

您可以尝试使用`Concat`with`Return`像这样：

```
bool TryFiveTimes()
{
    return Observable
        .Interval(TimeSpan.FromSeconds(1))
        .Take(5)
        .Select(_ => Fn())
        .Where(x => x)
        .Concat(Observable.Return(false))
        .First();
} 
```

# python - 用于存储嵌套框的数据结构？

> ID：14273319
> 
> 赞同：3
> 
> 时间：2013-01-11T07:05:35.837
> 
> 标签：python, algorithm, data-structures, geospatial, r-tree

我有一个存储为点的矩形列表。目前，数据如下所示：

```
boxes = [{'p1': (0,0), 'p2': (100,20)},
         {'p1': (5,5), 'p2': (15,15)}, 
         {'p1': (20,5), 'p2': (30,15)},
         {'p1': (35,5), 'p2': (45,15)},
         {'p1': (70,5), 'p2': (80,15)}] 
```

我还有一个基本函数可以测试一个矩形是否包含在另一个矩形中：

```
def isChild(b1,b2):
    return (b1 != b2 and 
            (b1['p2'][0]-b1['p1'][0] * b1['p2'][1]-b1['p1'][1]) > (b2['p2'][0]-b2['p1'][0] * b2['p2'][1]-b2['p1'][1]) and
            b1['p1'][0] < b2['p2'][0] and 
            b1['p2'][0] > b2['p1'][0] and 
            b1['p1'][1] < b2['p2'][1] and 
            b1['p2'][1] > b2['p1'][1]) 
```

我想以一组矩形和它们的孩子结束，但我不确定我应该如何存储它们。我在想这样的事情：

```
[{'p1': (0,0), 
  'p2': (100,20),
  'children': [{'p1': (5,5), 'p2': (15,15)}, 
               {'p1': (20,5), 'p2': (30,15)},
               {'p1': (35,5), 'p2': (45,15)},
               {'p1': (70,5), 'p2': (80,15)}]}] 
```

上下文是这些框表示网页上的元素。数据结构是用来生成基本标记的，所以上面的结构最终会是这样的：

```
<div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
</div> 
```

1.  源/目标数据结构是否适合这种情况？如果不是，那是什么？
2.  我怎样才能从源头到达目标？
3.  一位朋友建议使用 r-trees。这有意义吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T07:11:13.787

使用类。这是面向对象编程的典型用例。创建一个矩形类

```
from random import random

class Rectangle(object):
    def __init__(self, x1, y1, x2, y2):
        self._p1 = (x1, y1)
        self._p2 = (x2,y2)
        self._children = []

    def __str__(self):
        return "Rectangle defined by %s, %s, %i children" % (self._p1, self._p2, len(self._children))

    def is_child_of(self, other):
        return (self is not other and 
            self._p1[0] > other._p1[0] and 
            self._p2[0] < other._p2[0] and 
            self._p1[1] > other._p1[1] and 
            self._p2[1] < other._p2[1])

    def add_child(self, other):
        self._children.append(other)

    def check_relation_and_connect(self, other):
        if self.is_child_of(other):
            other.add_child(self)
        elif other.is_child_of(self):
            self.add_child(other)

if __name__=="__main__":
    rectangles = [Rectangle(random()*5, random()*5, random()*5+5, random()*5+5) for i in range(10)]

    for i in range(len(rectangles)):
        for j in range(i):
            rectangles[i].check_relation_and_connect(rectangles[j])

    for rectangle in rectangles:
        print rectangle 
```

该类包括两个点，_p1 和 _p2，以及一个孩子列表。找到父子关系的逻辑进入这个类的一个方法（顺便说一句，你的方法有效吗？我改变了它，因为它对我来说是胡说八道。也许我对矩形是如何定义的有不同的理解。）

当您谈论网站`<div>`时，我假设您不会有数千个矩形。所以这种方法应该没问题。

此示例还可以扩展为绘制所有矩形，因此可以检查矩形和计算的亲属关系。保持类 Rectangle 不变，可以这样写：

```
if __name__=="__main__":
    import matplotlib.pyplot as plt
    from matplotlib import patches

    rectangles = [Rectangle(random()*5, random()*5, random()*5+5, random()*5+5) for i in range(5)]

    for i in range(len(rectangles)):
        for j in range(i):
            rectangles[i].check_relation_and_connect(rectangles[j])

    for rectangle in rectangles:
        print rectangle

    colormap = plt.get_cmap("Paired")
    for i, rect in enumerate(rectangles):
        ax = plt.axes()
        color = colormap((1.*i)/len(rectangles))
        patch = patches.Rectangle(rect.p1, rect.p2[0]-rect.p1[0], rect.p2[1]-rect.p1[1], fc="none", ec=color, lw=2)
        ax.add_patch(patch)
    plt.xlim(-1,11)
    plt.ylim(-1,11)
    plt.show() 
```

这给出了如下图： ![在此处输入图像描述](../Images/8e72f1ba91692cfa4e8a384ebfae86d4.png)

对于此示例，恰好一个 Rectangle 有一个孩子（紫罗兰色是绿色的孩子）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:19:42.453

四叉树或 R 树（或任何其他二维空间数据结构）将非常适合。但是如果你没有很多这样的嵌套框（几十个或几百个），你可以在每次需要查询数据结构时枚举它们。如果您有很多、数千或更多，并且需要有效地查询它们 - 使用空间数据结构。

# iphone - iPhone游戏中的邀请系统

> ID：14273321
> 
> 赞同：0
> 
> 时间：2013-01-11T07:05:49.537
> 
> 标签：iphone, facebook, facebook-graph-api

我正在使用 Facebook SDK 开发 iPhone 游戏。我希望能够在朋友的墙上发布带有游戏链接的邀请（App Store 链接）。我到处找，但找不到办法。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:56:08.060

解决方案是使用 Facebook 的请求系统 - [https://developers.facebook.com/docs/howtos/send-requests-using-ios-sdk/](https://developers.facebook.com/docs/howtos/send-requests-using-ios-sdk/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-11T10:49:58.327

首先，您必须设置权限-

```
'scope' => 'email,publish_stream,user_likes' 
```

然后，

```
$attachment = array
(
     'access_token'=>  $accessToken,
     'message' => 'Дадох прогноза в Лаком за гол!',
     'name' => 'Лаком за гол',
     'description' => $fname.' участва в играта на Actualno.com. Участвай и ти и го победи!',
     'link' => 'http://www.actualno.com/'.$this->appname.'/game?app_data='.$uid,
     'picture' => 'http://www.actualno.com/img/'.$this->appname.'/'.$this->appname.'_post.jpg'
);
$facebook->api('/me/feed/','post',$attachment); 
```

# iphone - How can i swipe zoom in & zoom out in KendoUI Line Chart for iPhone Application?

> ID：14273325
> 
> 赞同：0
> 
> 时间：2013-01-11T07:05:57.963
> 
> 标签：iphone, ios5, kendo-ui

I want to use KendoUI Line chart for iPhone application.

Can anybody help me how to implement zoom in/out functionality?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T23:20:04.373

不幸的是，平移和缩放仅在 StockChart 中可用。不幸的是，它还没有在其他图表类型中实现......

[http://www.kendoui.c​​om/forums/dataviz/chart/how-to-pan-and-zoom.aspx](http://www.kendoui.com/forums/dataviz/chart/how-to-pan-and-zoom.aspx)

# c++ - Derived constructor warning: will never be executed

> ID：14273326
> 
> 赞同：2
> 
> 时间：2013-01-11T07:05:59.517
> 
> 标签：c++, compiler-warnings

Good day, sirs and mams )

I've just got some strange problem, while proging c++, using Code::Blocks 10.05, FreeBSD 9.1

Source in lib.cpp:

```
class A{
  public:
    A();
    A(var1, var2);
};
A::A(){ imlementation }
A::A(va1, var2) {implementation }
class B : public A{
  public:
    B();
    B(var1, var2);
};
B::B() : A() {} // this is Astr#
B::B(var1, var2) : A(var1, var2) {} // this is Bstr# 
```

Source in lib.h:

```
class A{
  public:
    A();
    A(var1, var2);
};
class B : public A{
  public:
    B();
    B(var1, var2);
}; 
```

Source in main.cpp:

```
#include "lib.h"
...
int main(){
  ...
  B* Bptr = new B();
  B* Bptr2 = new B(var1, var2);
  ...
} 
```

And I get these build warnings:

```
.../lib.cpp||In constructor 'B::B(var1, var2)':
.../lib.cpp|Bstr#|warning: will never be executed
.../lib.cpp||In constructor 'B::B(var1, var2)':
.../lib.cpp|Bstr#|warning: will never be executed
.../lib.cpp||In constructor 'B::B()':
.../lib.cpp|Astr#|warning: will never be executed
.../lib.cpp||In constructor 'B::B()':
.../lib.cpp|Astr#|warning: will never be executed
||=== Build finished: 0 errors, 4 warnings ===| 
```

This warnings appear only in Debug mode, Release build seems goes ok. The code builds and runs fine, but what I'm doing wrong?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T07:27:05.547

`B(var1,var2)`lib.h 中的构造函数是私有的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:16:59.500

> 警告：永远不会被执行

是 GCC 的警告，可以使用`-Wunreachable-code`. `-Wunreachable-code`非常不可靠，不应该使用；出于这个原因，在较新版本的 GCC 中，整个选项被完全删除。（实际上，并没有完全删除：命令行选项`-Wunreachable-code`仍然存在，但它不再做任何事情。）

# android - Unable to get latitude and longitude in Android

> ID：14273327
> 
> 赞同：2
> 
> 时间：2013-01-11T07:06:10.103
> 
> 标签：android, gps

7I am unable to access the GPS using the following permissions

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" /> 
```

When I open the app, it will die on the following:

```
locationMangaer.requestLocationUpdates(LocationManager.GPS_PROVIDER, 5000, 10, locationListener); 
```

Logcat is shown below. I googled "`java.lang.SecurityException: invalid package name`" and got 7 results, so I hope I'm not in trouble :( Anyway, if anyone can point me in the right direction, that would be helpful. Also, a little background info, this is a **AOSP** rom, but I did verify from `GPS` Test app that the **GPS** is able to get a lock.

```
E/AndroidRuntime(  836): FATAL EXCEPTION: main
E/AndroidRuntime(  836): java.lang.SecurityException: invalid package name
E/AndroidRuntime(  836):    at android.os.Parcel.readException(Parcel.java:1425)
E/AndroidRuntime(  836):    at android.os.Parcel.readException(Parcel.java:1379)
E/AndroidRuntime(  836):    at android.location.ILocationManager$Stub$Proxy.getLastKnownLocation(ILocationManager.java:923)
E/AndroidRuntime(  836):    at android.location.LocationManager.getLastKnownLocation(LocationManager.java:1171)
E/AndroidRuntime(  836):    at com.derrick.rfsuite.MainActivity.processGPS(MainActivity.java:557)
E/AndroidRuntime(  836):    at com.derrick.rfsuite.MainActivity.access$12(MainActivity.java:525)
E/AndroidRuntime(  836):    at com.derrick.rfsuite.MainActivity$2.handleMessage(MainActivity.java:214)
E/AndroidRuntime(  836):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(  836):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(  836):    at android.app.ActivityThread.main(ActivityThread.java:4929)
E/AndroidRuntime(  836):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(  836):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(  836):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
E/AndroidRuntime(  836):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
E/AndroidRuntime(  836):    at dalvik.system.NativeStart.main(Native Method) 
```

I have pinpointed the following as this line in the Manifest, but I don't understand what is happening

```
android:sharedUserId="android.uid.system" 
```

# c# - Hardcode login credentials in c# for trello api

> ID：14273330
> 
> 赞同：5
> 
> 时间：2013-01-11T07:06:23.983
> 
> 标签：c#, login, credentials, trello, trello.net

I've been using trello.net api for trello to read through the boards etc.

I've been using the `trello.GetAuthorizationUrl();` to redirect the user to a login page for trello although I'm looking for an option where I can just hard code my login credentials into the C# code.

Let me know if anyone has done that or knows how to.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T14:42:06.757

您可以对令牌进行硬编码，而不是对凭据进行硬编码。

访问这个网址（先替换一些参数）：

```
https://trello.com/1/authorize?key=substitutewithyourapplicationkey&name=My+Application&expiration=never&response_type=token&scope=read,write 
```

硬编码您返回的令牌并执行以下操作：

```
trello.Authorize(hardcodedToken); 
```

（或者您可以让 Trello.NET 使用生成该 url，`trello.GetAuthorizationUrl()`但由于您只执行一次，我认为没有意义）。

[如何授权客户端（来自 Trello 文档）。](https://trello.com/docs/gettingstarted/authorize.html)

# vba - Version Checking on VBA (excel) code (redhat)

> ID：14273334
> 
> 赞同：0
> 
> 时间：2013-01-11T07:06:41.783
> 
> 标签：vba, excel

![enter image description here](../Images/3c571bb994cd4e8a6f14209b2244112c.png)

Here my example of thing that i will use.

On the left side is the patch it will use `NAME BASE REVISE` to check the version of package.

Can you convert the script here in to `VBA` code. I will study about it and integrate to my real work:

```
if (Patch name = Pack name) then   **** searching for same Name on patch column to reference for patch base and revise number    
       if (base(c column) > base(h column)) ***checknumber[cellbycell] 

           display "yes" in J cell

             or if (base(C column) = base(h column)) then

                    check if revise(D column) > revise(I column)

                      display "yes" in J cell
    else display No 
```

So if you can give me example code ; if you have sometime please explain to me that what each line of code is meaning.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:49:20.920

像这样的东西应该工作：

```
Option Explicit

Sub variousconditions()

Dim i As Integer, x As Integer
x = 0
For i = 2 To 10
    With Excel.ThisWorkbook.ActiveSheet
        If .Cells(i, 1) = .Cells(i, 7) Then '****searching for same Name on patch
            Select Case .Cells(i, 3) '***checknumber[cellbycell]
                    Case Is > .Cells(i, 8)
                            .Cells(i, 10) = "yes"
                    Case Is = .Cells(i, 8)
                            If .Cells(i, 4) > .Cells(i, 9) Then
                                .Cells(i, 10) = "yes"
                            End If
                End Select
        End If
    End With
Next i

End Sub 
```

我必须重申 Siddharth 的参考资料，因为它会告诉您需要在哪里保存此代码等：http: [//msdn.microsoft.com/en-us/library/office/ee814737%28v=office.14%29 .aspx](http://msdn.microsoft.com/en-us/library/office/ee814737%28v=office.14%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:29:25.027

这是一个比较两个点符号版本号的函数，您需要将其粘贴到 VBA 编辑器中的新模块中。

```
Option Explicit

Public Function VersionCompare(CurrentVersion As Range, _
                               TargetVersion As Range)

    Dim result As Integer
    result = CompareDotStrings(CurrentVersion.Cells(1, 1).Value, _
                               TargetVersion.Cells(1, 1).Value)

    If result = 1 Then
        VersionCompare = True
    Else
        VersionCompare = False
    End If
End Function

Private Function CompareDotStrings(LeftValue As String, _
                                  RightValue As String) _
                                  As Integer

    Dim CompareLeft() As String, CompareRight() As String, CompareLength As Integer

    CompareLeft = Split(LeftValue, ".")
    CompareRight = Split(RightValue, ".")
    CompareLength = UBound(CompareLeft)
    If UBound(CompareRight) < CompareLength Then CompareLength = UBound(CompareRight)

    Dim ElementLeft As Integer, ElementRight As Integer, Comparison As Integer
    Dim ElementNumber As Integer

    For ElementNumber = 0 To CompareLength
        ElementLeft = CInt(CompareLeft(ElementNumber))
        ElementRight = CInt(CompareRight(ElementNumber))
        Comparison = ElementRight - ElementLeft
        If Comparison <> 0 Then
            CompareDotStrings = Sgn(Comparison)
            Exit Function
        End If
    Next ElementNumber
    CompareDotStrings = 0
End Function 
```

有了这个，您可以`=VersionCompare(H2, C2)`用来比较两个版本号，并且您想要做的所有其他事情（例如拆分虚线版本）都可以使用工作表中的公式来完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T07:22:42.123

您不需要为此使用 vba

```
=IF($A2=$G2,IF($C2>$H2,"Yes",IF($C2=$H2,IF($D2>$I2,"Yes","No"),"No")),"No") 
```

在 J 列中

# android - Using ndk-stack on an SDK-only app

> ID：14273336
> 
> 赞同：0
> 
> 时间：2013-01-11T07:07:13.840
> 
> 标签：android, android-ndk, segmentation-fault, android-webview, htc-android

I am using some local HTML5 files within an embedded WebView in an Android app. This is built with only SDK, not NDK. When the WebView loads, there is a segmentation fault on HTC One X (not on any other phones), and the app crashes. I've read that the ndk-stack can be used to see the stack trace of the where the problem might arise. But without the obj directory, ie. with the sdk-only project, is it possible to use the ndk-stack?

```
01-11 12:19:40.286: I/DEBUG(139): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
01-11 12:19:40.286: I/DEBUG(139): Build fingerprint: 'htc_europe/endeavoru/endeavoru:4.0.3/IML74K/56722.9:user/release-keys'
01-11 12:19:40.286: I/DEBUG(139): pid: 7062, tid: 7078  >>> com.bose.sample.android <<<
01-11 12:19:40.286: I/DEBUG(139): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0000014c
01-11 12:19:40.286: I/DEBUG(139):  r0 00000000  r1 50a8d210  r2 43b40000  r3 505406cd
01-11 12:19:40.286: I/DEBUG(139):  r4 025c1ad8  r5 00000000  r6 023c0738  r7 02339588
01-11 12:19:40.286: I/DEBUG(139):  r8 51fa5aa0  r9 51fa5a34  10 51fa5ab8  fp 00000001
01-11 12:19:40.286: I/DEBUG(139):  ip 000000a0  sp 51fa5920  lr 505406d9  pc 50540342  cpsr a0000030
01-11 12:19:40.286: I/DEBUG(139):  d0  0000000000000000  d1  000001680000000c
01-11 12:19:40.286: I/DEBUG(139):  d2  3f80000000000000  d3  0000000000000000
01-11 12:19:40.286: I/DEBUG(139):  d4  8000000000000000  d5  000000003f800000
01-11 12:19:40.286: I/DEBUG(139):  d6  0000000000000000  d7  4140000043b40000
.............
01-11 12:19:40.286: I/DEBUG(139):  scr 20000013
01-11 12:19:40.436: I/DEBUG(139):          #00  pc 001b4342  /system/lib/libwebcore.so
01-11 12:19:40.436: I/DEBUG(139):          #01  pc 001b46d4  /system/lib/libwebcore.so
01-11 12:19:40.436: I/DEBUG(139):          #02  pc 003c8fbc  /system/lib/libwebcore.so
01-11 12:19:40.436: I/DEBUG(139):          #03  pc 003c9e32  /system/lib/libwebcore.so
............... 
```

Thanks,
Rajath

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:41:44.357

在这种情况下，您需要的目标文件位于设备上`/system/lib/libwebcore.so`，但您可能无权访问它。即使您设法得到它，该文件也被剥夺了调试符号 - 这意味着它不会告诉您任何有价值的东西。

# c# - SMTP over Socks Proxy

> ID：14273340
> 
> 赞同：0
> 
> 时间：2013-01-11T07:07:27.047
> 
> 标签：c#, proxy, smtp

I use the following code for SMTP:

```
 MailMessage mail = new MailMessage();
            mail.From = new System.Net.Mail.MailAddress(Global.username);
            mail.Subject = Global.subject;

            SmtpClient smtp = new SmtpClient();
            smtp.Port = 587;
            smtp.EnableSsl = true;
            smtp.DeliveryMethod = SmtpDeliveryMethod.Network;
            smtp.UseDefaultCredentials = false;
            smtp.Credentials = new NetworkCredential(Global.username, Global.password); 
            smtp.Host = "smtp.gmail.com";

            mail.To.Add(new MailAddress(Global.to));

            mail.IsBodyHtml = true;
            mail.Subject = Global.subject;
            mail.Body = Global.message;
            smtp.Send(mail); 
```

That works perfectly, but the problem is I need HTTP and Socks proxy support. I'm looking for ether free libraries that I can use for commercial purposes or what approach should I do to get proxies running. I also need this for POP3 and IMAP, I'm thinking it will be easier to write my own wrappers than finding something already out there, I'm just not sure where to start. I have got my own HTTP wrapper done with HTTP and Socks support, but I'm not sure how SMTP, IMAP and POP3 works through proxy.. Whats the best way for me to get this done? Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T04:48:36.793

使用[CNTLM](http://cntlm.sourceforge.net/)怎么样？我以前在 Python 中使用过它，但我还没有在其他编程语言中尝试过它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T06:27:31.043

Socks 支持需要嵌入到 SMTP 类本身（或者至少是它管理套接字连接的部分），这里不是这种情况。你有两个选择：

1.  使用一个替代品`MailMessage`，它支持内置的 SOCKS
2.  或者，您需要使用 SOCKS 代理/隧道应用程序或类，它将在本地系统上打开一个侦听套接字并接受其上的连接。然后它将充当 SOCKS 客户端并通过两种方式传递数据。您将设置您的`MailMessage`实例以使用此本地端口，并且将正确包装数据以供您通过 SOCKS。

# android - 不幸的是，我的应用程序已停止工作

> ID：14273342
> 
> 赞同：-1
> 
> 时间：2013-01-11T07:07:33.100
> 
> 标签：android, eclipse, google-maps

谁能澄清我的错误在哪里？Android 应用程序因错误“不幸的是，我的应用程序已停止工作”而崩溃。崩溃仅在我的`activity_main.xml`包含时发生`android:id="@+id/map"`：

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/map"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  class="com.google.android.gms.maps.MapFragment"/> 
```

我的 MainActivity.java 类同样简单：

```
public class MainActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }
} 
```

我已经添加了“google-play”依赖项，并且我的目标是“Google APIs”。同样，当我不尝试显示地图时，应用程序运行良好。

以下是 LogCat 错误：

```
01-11 02:04:24.608: E/AndroidRuntime(14416): FATAL EXCEPTION: main
01-11 02:04:24.608: E/AndroidRuntime(14416): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.myfirstapp/com.example.myfirstapp.MainActivity}: java.lang.ClassNotFoundException: com.example.myfirstapp.MainActivity
01-11 02:04:24.608: E/AndroidRuntime(14416):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2267)
01-11 02:04:24.608: E/AndroidRuntime(14416):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2387)
01-11 02:04:24.608: E/AndroidRuntime(14416):    at android.app.ActivityThread.access$600(ActivityThread.java:151)
01-11 02:04:24.608: E/AndroidRuntime(14416):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1331)
01-11 02:04:24.608: E/AndroidRuntime(14416):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-11 02:04:24.608: E/AndroidRuntime(14416):    at android.os.Looper.loop(Looper.java:155)
01-11 02:04:24.608: E/AndroidRuntime(14416):    at android.app.ActivityThread.main(ActivityThread.java:5485)
01-11 02:04:24.608: E/AndroidRuntime(14416):    at java.lang.reflect.Method.invokeNative(Native Method)
01-11 02:04:24.608: E/AndroidRuntime(14416):    at java.lang.reflect.Method.invoke(Method.java:511)
01-11 02:04:24.608: E/AndroidRuntime(14416):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1028)
01-11 02:04:24.608: E/AndroidRuntime(14416):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:795)
01-11 02:04:24.608: E/AndroidRuntime(14416):    at dalvik.system.NativeStart.main(Native Method)
01-11 02:04:24.608: E/AndroidRuntime(14416): Caused by: java.lang.ClassNotFoundException: com.example.myfirstapp.MainActivity
01-11 02:04:24.608: E/AndroidRuntime(14416):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
01-11 02:04:24.608: E/AndroidRuntime(14416):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
01-11 02:04:24.608: E/AndroidRuntime(14416):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
01-11 02:04:24.608: E/AndroidRuntime(14416):    at android.app.Instrumentation.newActivity(Instrumentation.java:1069)
01-11 02:04:24.608: E/AndroidRuntime(14416):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2258)
01-11 02:04:24.608: E/AndroidRuntime(14416):    ... 11 more 
```

**更新** 这里是清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.myfirstapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <!-- MAPS -->
    <permission android:name="com.example.myfirstapp.permission.MAPS_RECEIVE" android:protectionLevel="signature"/>
    <uses-permission android:name="com.example.myfirstapp.permission.MAPS_RECEIVE"/>

    <uses-permission android:name="android.permission.INTERNET"/>

    <!-- Allows the API to access Google web-based services -->
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>

    <!-- External storage for caching. -->
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

    <!-- My Location -->
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

    <!-- Maps API needs OpenGL ES 2.0\. -->
    <uses-feature
      android:glEsVersion="0x00020000"
      android:required="true"/>
    <!-- 8/17 oneX=16-->
    <uses-sdk
        android:minSdkVersion="12" 
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <!-- REMOVED user-library android:name="com.google.android.maps" / -->

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"/>

        <activity
            android:name="com.example.myfirstapp.MainActivity"
            android:label="@string/app_name" >

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

**UDPATED** New LogCat since changed android:minSdkVersion="12" "仅当您的目标是 API 12 及更高版本时才使用 MapFragment。否则，使用 SupportMapFragment。"

```
01-11 11:26:23.267: E/AndroidRuntime(27646): FATAL EXCEPTION: main
01-11 11:26:23.267: E/AndroidRuntime(27646): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.myfirstapp/com.example.myfirstapp.MainActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
01-11 11:26:23.267: E/AndroidRuntime(27646):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2351)
01-11 11:26:23.267: E/AndroidRuntime(27646):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2387)
01-11 11:26:23.267: E/AndroidRuntime(27646):    at android.app.ActivityThread.access$600(ActivityThread.java:151)
01-11 11:26:23.267: E/AndroidRuntime(27646):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1331)
01-11 11:26:23.267: E/AndroidRuntime(27646):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-11 11:26:23.267: E/AndroidRuntime(27646):    at android.os.Looper.loop(Looper.java:155)
01-11 11:26:23.267: E/AndroidRuntime(27646):    at android.app.ActivityThread.main(ActivityThread.java:5485)
01-11 11:26:23.267: E/AndroidRuntime(27646):    at java.lang.reflect.Method.invokeNative(Native Method)
01-11 11:26:23.267: E/AndroidRuntime(27646):    at java.lang.reflect.Method.invoke(Method.java:511)
01-11 11:26:23.267: E/AndroidRuntime(27646):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1028)
01-11 11:26:23.267: E/AndroidRuntime(27646):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:795)
01-11 11:26:23.267: E/AndroidRuntime(27646):    at dalvik.system.NativeStart.main(Native Method)
01-11 11:26:23.267: E/AndroidRuntime(27646): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
01-11 11:26:23.267: E/AndroidRuntime(27646):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
01-11 11:26:23.267: E/AndroidRuntime(27646):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
01-11 11:26:23.267: E/AndroidRuntime(27646):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
01-11 11:26:23.267: E/AndroidRuntime(27646):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-11 11:26:23.267: E/AndroidRuntime(27646):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-11 11:26:23.267: E/AndroidRuntime(27646):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:358)
01-11 11:26:23.267: E/AndroidRuntime(27646):    at android.app.Activity.setContentView(Activity.java:1912)
01-11 11:26:23.267: E/AndroidRuntime(27646):    at com.example.myfirstapp.MainActivity.onCreate(MainActivity.java:12)
01-11 11:26:23.267: E/AndroidRuntime(27646):    at android.app.Activity.performCreate(Activity.java:5066)
01-11 11:26:23.267: E/AndroidRuntime(27646):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1101)
01-11 11:26:23.267: E/AndroidRuntime(27646):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2307)
01-11 11:26:23.267: E/AndroidRuntime(27646):    ... 11 more
01-11 11:26:23.267: E/AndroidRuntime(27646): Caused by: android.app.Fragment$InstantiationException: Unable to instantiate fragment com.google.android.gms.maps.MapFragment: make sure class name exists, is public, and has an empty constructor that is public
01-11 11:26:23.267: E/AndroidRuntime(27646):    at android.app.Fragment.instantiate(Fragment.java:624)
01-11 11:26:23.267: E/AndroidRuntime(27646):    at android.app.Fragment.instantiate(Fragment.java:584)
01-11 11:26:23.267: E/AndroidRuntime(27646):    at android.app.Activity.onCreateView(Activity.java:4714)
01-11 11:26:23.267: E/AndroidRuntime(27646):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
01-11 11:26:23.267: E/AndroidRuntime(27646):    ... 21 more
01-11 11:26:23.267: E/AndroidRuntime(27646): Caused by: java.lang.ClassNotFoundException: com.google.android.gms.maps.MapFragment
01-11 11:26:23.267: E/AndroidRuntime(27646):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
01-11 11:26:23.267: E/AndroidRuntime(27646):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
01-11 11:26:23.267: E/AndroidRuntime(27646):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
01-11 11:26:23.267: E/AndroidRuntime(27646):    at android.app.Fragment.instantiate(Fragment.java:606)
01-11 11:26:23.267: E/AndroidRuntime(27646):    ... 24 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:15:02.633

```
Caused by: java.lang.ClassNotFoundException: com.example.myfirstapp.MainActivity 
```

像这样在 AndroidManifest 中定义您的活动

```
<activity
      android:name="com.example.myfirstapp.MainActivity"
      android:label="@string/app_name">
</activity> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T07:13:08.880

正如您所定义的`android:minSdkVersion="11"`和`MapFragment`仅在 api 12 或更高版本上受支持。

所以你必须使用`SupportMapFragment`而不是`MapFragment`如下：

```
 <fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.SupportMapFragment"/> 
```

不要忘记使用 扩展您的活动`FragmentActivity`。

```
 public class MainActivity extends FragmentActivity{

           SupportMapFragment mMap;
           GoogleMap googleMap;

        @Override
      protected void onCreate(Bundle savedInstanceState) {
               super.onCreate(savedInstanceState);
               setContentView(R.layout.activity_main);

             mMap = (SupportMapFragment) getSupportFragmentManager()
                  .findFragmentById(R.id.map);

               googleMap = mMap.getMap();
     }
   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T07:25:33.710

必须使用`SupportMapFragment`if`API version is below 11`

```
<fragment
android:id="@+id/map"
android:layout_width="match_parent"
android:layout_height="match_parent"
class="com.google.android.gms.maps.SupportMapFragment"/> 
```

*   不要忘记使用**FragmentActivity扩展您的****Activity**

     **```
    public class MainActivity extends FragmentActivity{

    SupportMapFragment mMap;
    GoogleMap googleMap;

      @Override
     protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

           mMap = (SupportMapFragment) getSupportFragmentManager()
            .findFragmentById(R.id.map);

            googleMap = mMap.getMap();
     }
    } 
    ```** 

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T07:49:15.813

更改 AndroidManifest.xml

```
<activity
      android:name="com.example.myfirstapp.MainActivity"
      android:label="@string/app_name">
</activity> 
```

并给予地图和互联网的许可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-16T04:40:44.253

几天来我一直遇到同样的问题，克隆这个 repo 对我有很大帮助，

[https://github.com/googlemaps/hellomap-android](https://github.com/googlemaps/hellomap-android)

祝你好运**

# r - 在 32 位 Ubuntu 上安装 RHadoop

> ID：14273352
> 
> 赞同：2
> 
> 时间：2013-01-11T07:09:11.753
> 
> 标签：r, hadoop, rhadoop

**目标：**在单个系统上安装**RHadoop**（不是 VM 版本）

**系统规格：** 32 位处理器、2GB RAM、Windows 7 和 Ubuntu 12.10

**说明：**我正在尝试使用`RHadoop`库与 R 一起运行 Hadoop。由于我的系统 RAM 较少，所以如果我尝试运行`Cloudera VM`，它会变得非常慢。我已经浏览了一些在线教程，例如 1.[安装 RHadoop](http://girishkathalagiri.blogspot.in/2012/09/installing-r-in-hadoop-rhadoop.html)
2\. [Amazon EC2 上的 RHadoop](http://blog.snap-interactive.com/post/26090105961/how-to-set-up-hadoop)

但它们都没有完整的步骤。我能够在 Ubuntu 中安装 R v2.15.2 和 Rstudio。我还为 RHadoop 克隆了 github 存储库。

谁能推荐一些在**32 位**系统上安装 RHadoop 的好教程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:27:08.853

不幸的是，不支持 32 位，并且由于序列化代码中的详细信息，它实际上不起作用。dev 中有一些修复，但我们不会在 32 位上进行测试，因此它们可能会或可能不会起作用。最后，我们有一个专门的 RHadoop 谷歌小组，我们正在尝试建立一个社区。我们是一个小社区，所以我们不能分散在 github、SO、FB、quora 上。

# iphone - 附件 PDF 在 MailComposer 中显示？

> ID：14273356
> 
> 赞同：2
> 
> 时间：2013-01-11T07:09:35.777
> 
> 标签：iphone, objective-c

我有一个问题。我将`PDF`文档附加到`MFMailComposer`. 问题是，如果我附加一个`PDF`仅包含一页的文档，那么当我呈现时`MFMailComposer`，附加的 PDF 正在打开并显示。但是，如果我附加了一个`PDF`以上的页面，那么它会显示为图标。

如果 pdf 有一页或更多页数，我需要显示为图标。

有没有人可以看看啊！！！！

**它应该在 iPad 上工作**

**如果它是默认功能，那么请与苹果文档链接。**

示例代码：

```
 MFMailComposeViewController *objMFMailComposeViewController = [[MFMailComposeViewController alloc] init];
  if([MFMailComposeViewController canSendMail])
        {            
            [objMFMailComposeViewController setMailComposeDelegate:self];
            [objMFMailComposeViewController setSubject:[NSString stringWithFormat:@"Generated Reports for %@",lbl_details.text]];
            NSString *path = [[NSBundle mainBundle] pathForResource:@"Material Details" ofType:@"pdf"];
            NSData *myData = [NSData dataWithContentsOfFile:path];
            [objMFMailComposeViewController addAttachmentData:myData mimeType:@"application/pdf" fileName:@"Material Details.pdf"];
            [objMFMailComposeViewController setMessageBody:@"" isHTML:NO];
            [self presentModalViewController:objMFMailComposeViewController animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:17:43.447

它是默认功能，您可以通过从照片库中通过电子邮件发送图像来尝试它。它显示图像预览

# facebook - 是否可以测试某些页面是否有类似 facebook 的按钮？

> ID：14273366
> 
> 赞同：-1
> 
> 时间：2013-01-11T07:10:10.430
> 
> 标签：facebook, facebook-like

我已经授权 Facebook 应用程序，即使用 FQL 的能力。

我必须知道互联网上的某些网址是否有类似 facebook 的按钮。我已经阅读了[手册](https://developers.facebook.com/docs/reference/fql/)并没有找到任何对我有帮助的东西。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:38:50.277

我想您需要抓取页面并查找相关的 Facebook 标签。另一件*可能*有效的事情是根据 Facebook 图形端点检查页面，如下所示（示例[1](http://graph.facebook.com/http://www.masteringapi.com/) - [2](http://graph.facebook.com/http://www.masteringapi.com/tutorials/how-to-use-facebook-registration-plugin-as-your-registration-system/15/)）：

```
http://graph.facebook.com/PAGE_URL_HERE
http://graph.facebook.com/http://www.masteringapi.com/
http://graph.facebook.com/http://www.masteringapi.com/tutorials/how-to-use-facebook-registration-plugin-as-your-registration-system/15/ 
```

如果字段喜欢`likes`或`shares`存在，那么可能有一个喜欢按钮。然而，这也可能意味着有人刚刚在 Facebook 上发布了该链接。

# jquery - 为什么我在 jQuery 中的偏移和位置得到相同的值？

> ID：14273370
> 
> 赞同：6
> 
> 时间：2013-01-11T07:10:24.800
> 
> 标签：jquery

我在段落标签内放置了一个跨度，现在位置顶部应显示为 0，偏移量应显示其他值（需要从文档计算），但我在两者中得到相同的值......

我错了？

这是我的代码：

HTML：

```
<div></div>
<p>paragraph<span>span</span>paragraph</p> 
```

查询：

```
$('span').click(function(){
console.log($(this).position().top,$(this).offset().top)
})

CSS:

p{
  color:green;
}

span{
  color:red;
}

div{
  height:100px;
  border:2px solid blue;
} 
```

[jsfiddle在这里](http://jsfiddle.net/BhsrS/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T07:16:05.970

将标签的`position`属性设置为：`p``relative`

```
p {
  color: green;
  position: relative;
} 
```

[http://jsfiddle.net/zPdxB/](http://jsfiddle.net/zPdxB/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T07:19:18.907

[jQuery：位置（）和偏移量（）之间的区别](https://stackoverflow.com/questions/3202008/jquery-difference-between-position-and-offset)

Position 指的是相对于**偏移父**级的位置，这实际上是您的示例中的文档，因为 p 不是定位元素，而是内联元素。这就是为什么你会得到相同的值。

如果您使您的 p 元素具有绝对或相对定位，则跨度的位置现在将如您最初预期的那样相对于 P 元素，因此与偏移量不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T07:23:18.200

来自`docs`

该`.position()`方法允许我们检索元素的当前位置`relative to the offset parent`。

`.offset()`将此与, which 进行对比`retrieves the current position relative to the document`。

当将新元素定位在另一个元素附近并在同一个包含 DOM 元素内时，.position() 更有用。

如果我们谈论您的情况，那么：

> 当前两者都`.position()`具有`.offset()`相同的父级，它们将获得文档的偏移位置。

现在，如果您在 css 类中再添加一个属性，`<p>` `position:relative;`您就可以找到不同之处。

简而言之：

`.offset().top`将从文档中获取顶部。

`.position().top`将从相对父级获得顶部。（如果父级相对设置）

你可以在这里找到不同之处：http: [//jsfiddle.net/BhsrS/1/](http://jsfiddle.net/BhsrS/1/)

检查小提琴：http: [//jsfiddle.net/BhsrS/1/](http://jsfiddle.net/BhsrS/1/)

# jquery - 在我的 php 文件解析和下载数据时调用 preloader(gif , loading image)

> ID：14273391
> 
> 赞同：0
> 
> 时间：2013-01-11T07:12:12.973
> 
> 标签：jquery, html, ajax, preloading

这是我的 php 文件，它正在从服务器下载图像和数据文件

```
<?php 
        header("Cache-Control: no-cache, must-revalidate");
        //header("Expires: Tue, 25 sep 2012 09:00:00 GMT+5.30");
        header("Content-Type: application/xml; charset=utf-8");
        clearstatcache();
 // download xml.....................................................   
        $url = "http://ippaddress/msn/getdata.php?result=3";
        //echo $url;
        $filename = "E://wamp/www/msn_mytype01-12-12/test.xml";

        $handle = file_get_contents($url);  
        file_put_contents($filename, $handle);      
        $doc = new DOMDocument();
        $doc->load( 'test.xml' );

        $employees = $doc->getElementsByTagName( "detail" );
        foreach( $employees as $employee )
        {
            $id = $employee->getElementsByTagName( "image" );
            $imgid = $id->item(0)->nodeValue; 
            // download Images.........................
            $imageUrl = "http://ippaddress/msn/IMAGE/".$imgid;
            $filename = "E://wamp/www/msn_mytype01-12-12/Images/".$imgid;
            $handle = file_get_contents($imageUrl); 
            file_put_contents($filename, $handle);          
        }       
        echo('XML Downloded-Successfullyy');

?> 
```

我从 j-query 按钮单击事件调用这个 php 文件...如下

```
$(document).on('click','#syncdata',function(){
    window.location.href="downloadfiles.php";
}); 
```

现在我想要 tp 调用这个文件进行下载，当它正在下载图像时，我想显示加载图像或进程轮 (.gif) 文件，当它完成下载这个图像时，它会从文件返回到我的 jquery/html 文件被调用；我也用 ajax 试过这个，但我的图像没有显示我不知道为什么？. 这两个文件都在同一个文件夹中，但是当我单击按钮并下载图像时，它不会回调到我的 html/juery 文件并且不显示预加载的 .gif 图像

下面是我如何使用ajax

```
 $(document).on('click','#test',function(){
                       makeRequest();
               });        
               function makeRequest(){
           var sendurl={address:'htp://localhost:8082/BMS_mytype/downloadfiles.php'}
                       $('#preloader').show();
                       $.ajax({
                               type:"POST",
                               url:"dummycall.php",
                               data:sendurl,                                
                               success:function(xml){
                                       alert(xml);
                                       var result= $(xml).find('status').text();
                                       if(result == "Success")
                                       {                
                                        $('#preloader').hide();
                                        window.location.href="option.html";
                                       }
                                       callback.call(null);
                               },
                               error: function(){
                                       alert("An error occurred while processing XML file.");
                               }        //error ends..                        
               });

               $('#preloader').hide();
           }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:28:00.983

use this:

just before ajax function:

```
$(document).ajaxStart(function(){
   $('#preloader').show();
}); 
```

just after ajax function:

```
$(document).ajaxComplete(function(){
   $('#preloader').hide();
}); 
```

# java - 在休眠中使用参数进行日期转换

> ID：14273394
> 
> 赞同：1
> 
> 时间：2013-01-11T07:12:17.100
> 
> 标签：java, hibernate, postgresql

我有这个代码。

```
 Query q = session.createQuery("FROM SugarLevels WHERE identification = :identification AND date_submitted BETWEEN :startDate AND :endDate ORDER BY date_submitted ASC");
        q.setParameter("identification", identification.toUpperCase());
        q.setParameter("startDate", startDate);
        q.setParameter("endDate", endDate); 
```

但是会有一个错误 ERROR: operator does not exist: date >= character varying 我试过做

```
 Cast(:startDate as DATE) 
```

但仍然是一个错误。任何人都知道如何将参数转换为日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:30:51.263

```
Query q = session.createQuery("FROM SugarLevels WHERE identification = ? AND date_submitted BETWEEN ? AND ? ORDER BY date_submitted ASC");
q.setParameter(identification.toUpperCase());
q.setParameter(startDate);
q.setParameter(endDate); 
```

也许您可以改用上面的代码。

# android - android 2.3.3、2.3.5 中的 gcm 注册 id 为空，但它不为空并且在 android 2.3.4、4.0.4 中工作

> ID：14273395
> 
> 赞同：6
> 
> 时间：2013-01-11T07:12:16.303
> 
> 标签：android, google-cloud-messaging

```
private void registerClient() {
    try {
        GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);
        regId = GCMRegistrar.getRegistrationId(this);
        if (regId.equals("")) {
            registrationStatus = "Registering...";
            GCMRegistrar.register(this, "1074338555805");
            regId = GCMRegistrar.getRegistrationId(this);
            registrationStatus = "Registration Acquired";
            sendRegistrationToServer();
        } else {
            registrationStatus = "Already registered";
        }
    } catch (Exception e) {
        e.printStackTrace();
        registrationStatus = e.getMessage();
    }
} 
```

android 2.3.3、2.3.5 中的 gcm 注册 id 为空，但它不为空并且在 android 2.3.4、4.0.4 中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-27T10:29:05.273

正如 Google Play 服务设置指南中非常清楚地说明的那样。

[https://developer.android.com/google/gcm/client.html](https://developer.android.com/google/gcm/client.html)

应用程序创建：

```
 // Check device for Play Services APK. If check succeeds, proceed with
    //  GCM registration.
    if (checkPlayServices()) {
        gcm = GoogleCloudMessaging.getInstance(this);
        regid = getRegistrationId(context);

        if (regid.isEmpty()) {
            registerInBackground();
        }
    } else {
        Log.i(TAG, "No valid Google Play Services APK found.");
    } 
```

后台注册代码：

```
/**
 * Registers the application with GCM servers asynchronously.
 * <p>
 * Stores the registration ID and app versionCode in the application's
 * shared preferences.
 */
private void registerInBackground() {
  new AsyncTask() {
    @Override
    protected String doInBackground(Void... params) {
        String msg = "";
        try {
            if (gcm == null) {
                gcm = GoogleCloudMessaging.getInstance(context);
            }
            regid = gcm.register(SENDER_ID);
            msg = "Device registered, registration ID=" + regid;

            // You should send the registration ID to your server over HTTP,
            // so it can use GCM/HTTP or CCS to send messages to your app.
            // The request to your server should be authenticated if your app
            // is using accounts.
            sendRegistrationIdToBackend();

            // For this demo: we don't need to send it because the device
            // will send upstream messages to a server that echo back the
            // message using the 'from' address in the message.

            // Persist the regID - no need to register again.
            storeRegistrationId(context, regid);
        } catch (IOException ex) {
            msg = "Error :" + ex.getMessage();
            // If there is an error, don't just keep trying to register.
            // Require the user to click a button again, or perform
            // exponential back-off.
        }
        return msg;
    }

    @Override
    protected void onPostExecute(String msg) {
        mDisplay.append(msg + "\n");
    }
  }.execute(null, null, null);
  ...
} 
```

# python - 无法使用 python 脚本连接到 SMTP 服务器

> ID：14273398
> 
> 赞同：-1
> 
> 时间：2013-01-11T07:12:21.123
> 
> 标签：python, python-3.x

以下是我连接到 SMTP 服务器并发送邮件的脚本。

```
from smtplib import SMTP
import datetime

debuglevel = 0

smtp = SMTP()
smtp.set_debuglevel(debuglevel)
smtp.connect('smtp.gmail.com', 26)
smtp.login('ashwini.jena@gmail.com', 'Pa***wd')

from_addr = "Ashwin<ashwini.jena@gmail.com>"
to_addr = "foo@bar.com"

subj = "hello"
date = datetime.datetime.now().strftime( "%d/%m/%Y %H:%M" )

message_text = "Hello\nThis is a mail from your server\n\nBye\n"

msg = "From: %s\nTo: %s\nSubject: %s\nDate: %s\n\n%s"%( from_addr, to_addr, subj, date, message_text )

smtp.sendmail(from_addr, to_addr, msg)
smtp.quit() 
```

但它会引发以下错误：-

```
Traceback (most recent call last):
  File "C:\Python33\Bidhoo.py", line 15, in <module>
    smtp.connect('smtp.gmail.com', 26)
  File "C:\Python33\lib\smtplib.py", line 317, in connect
    self.sock = self._get_socket(host, port, self.timeout)
  File "C:\Python33\lib\smtplib.py", line 288, in _get_socket
    self.source_address)
  File "C:\Python33\lib\socket.py", line 424, in create_connection
    raise err
  File "C:\Python33\lib\socket.py", line 415, in create_connection
    sock.connect(sa)
TimeoutError: [WinError 10060] A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond 
```

请帮助我找到此错误的根本原因。也有人可以共享替代代码来连接到 SMTP ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:20:17.623

我认为这在 smtp.connect 线上失败了？您可以通过在 Python 解释器中逐行运行脚本来验证这一点。

失败的原因是端口号不正确。而不是 26，尝试 587 看看会发生什么。

```
smtp.connect('smtp.gmail.com', 587) 
```

至于替代脚本，我通过谷歌搜索找到了一些脚本。这是[一个](http://segfault.in/2010/12/sending-gmail-from-python/)

# android - 如何使用 SIP 在 Android 中进行音频和视频通话？

> ID：14273399
> 
> 赞同：-1
> 
> 时间：2013-01-11T07:12:23.420
> 
> 标签：android, sip

我想开始在 Android 中使用 sip 进行音频和视频通话。我不知道 SIP。

我们首先需要具备哪些条件才能开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:16:29.717

试试 linphone 客户端，你真的应该在 wikipedia 下阅读 SIP 或者自己尝试一些客户端。不要问这样的问题：

比如什么是电脑？为什么我的电脑无法开机？

# javascript - mde/timezone-js - 与多个城市一起使用？（目前只有少数几个城市，比如印度的加尔各答）

> ID：14273401
> 
> 赞同：0
> 
> 时间：2013-01-11T07:12:29.277
> 
> 标签：javascript, datetime, timezone, dst

[https://github.com/mde/timezone-js](https://github.com/mde/timezone-js)

以上使用返回特定时区的日期：

```
var dt = new timezoneJS.Date('America/New_York');
var dt = new timezoneJS.Date('Asia/Kolkata'); 
```

根据我的研究，它接受的城市很少（比如只有来自印度的加尔各答）。我怎样才能使它适用于所有国家的所有主要城市？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:39:56.710

`tz@iana.org`这是邮件列表上反复讨论的主题。基本答案是奥尔森数据库中每个时区都有一个名称，对于印度，它是亚洲/加尔各答（例如，对于美国，太平洋时区由 America/Los_Angeles 标识）。通常，使用的名称标识了首次创建列表时所在时区的大陆和最大城市（还有其他标准；它们记录在 Olson 数据库数据随附的 Theory 文件中）。这些名称供内部使用；它们对人类来说是半有意义的，但它们并没有以最好的方式呈现（没有国家、用下划线代替空格的名称、英语化的名称等）。

处理此问题的推荐方法是创建您自己的城市名称列表，可能还包含国家信息，并将每个城市名称映射到适当的时区。

请注意，彻底做到这一点真的很难。有些区域很小。最近讨论的一个是欧洲/布辛根；这是一个德国的“飞地”，并不总是与周围的瑞士各州同时改变时间，而是保持柏林时间（或其他时间）。您在美国部分地区遇到了类似的问题；印第安纳州有许多地方在冬季和夏季（标准和夏令时）之间的时间变化不同，有些地方在东部时区，有些在中部，有些地方根本没有改变时区（所以时间冬季与东部相同，夏季与中部相同）。中国有一个城镇（地区），汉族（中国）人口使用中国时间（亚洲/上海，UTC+08:00），但当地人口使用不同的时区（UTC+06:00）；同一个地方，不同的时区，适合不同的人。区域为新疆；条目是亚洲/乌鲁木齐。

* * *

您可以从以下位置下载数据和代码：

*   [http://www.iana.org/time-zones/repository/releases/tzcode2012j.tar.gz](http://www.iana.org/time-zones/repository/releases/tzcode2012j.tar.gz)
*   [http://www.iana.org/time-zones/repository/releases/tzdata2012j.tar.gz](http://www.iana.org/time-zones/repository/releases/tzdata2012j.tar.gz)
*   [ftp://ftp.iana.org/tz/releases/tzcode2012j.tar.gz](ftp://ftp.iana.org/tz/releases/tzcode2012j.tar.gz)
*   [ftp://ftp.iana.org/tz/releases/tzdata2012j.tar.gz](ftp://ftp.iana.org/tz/releases/tzdata2012j.tar.gz)

我不确定是否所有历史版本都可以从 IANA 网站获得。

您需要知道此表示法的当前版本号（2012j — 2012 年第 10 版，于 2012-11-12 发布）。一般的“最新”版本链接是：

*   [http://www.iana.org/time-zones/repository/tzcode-latest.tar.gz](http://www.iana.org/time-zones/repository/tzcode-latest.tar.gz)
*   [http://www.iana.org/time-zones/repository/tzdata-latest.tar.gz](http://www.iana.org/time-zones/repository/tzdata-latest.tar.gz)
*   [ftp://ftp.iana.org/tz/tzcode-latest.tar.gz](ftp://ftp.iana.org/tz/tzcode-latest.tar.gz)
*   [ftp://ftp.iana.org/tz/tzdata-latest.tar.gz](ftp://ftp.iana.org/tz/tzdata-latest.tar.gz)

这些名称不会更改，因此它们将始终检索最新版本。但是，文件名并不能告诉您当前版本是什么；你必须向内看才能发现——你赢了一些，你也输了一些。

# c#-3.0 - 自定义尺寸水晶报告

> ID：14273405
> 
> 赞同：1
> 
> 时间：2013-01-11T07:12:56.123
> 
> 标签：c#-3.0

我开发了一个自定义尺寸的水晶报表，宽 25 高，高 15。此报告在服务器端正确显示。但是当我过去从 clint 一侧看到它时，我只能看到一半。实际上，我在自定义大小报告中遇到问题，只有其他报告在 clint 和服务器双方都正常工作。当我将报告大小设置为更大时，就会出现小报问题。我不需要打印它。我只需要查看。请任何人都可以帮助我。这个问题毁了我的头。

# php - 如何在不使用修饰符的情况下匹配正则表达式中的换行符？

> ID：14273406
> 
> 赞同：0
> 
> 时间：2013-01-11T07:12:55.973
> 
> 标签：php, regex

例如，如果我想匹配多行文本，我可以`/s`在 preg_match 中使用修饰符。

或者我可以使用一个字符类`[^!]+`而不是`.+`. （假设我的 RegEx 中没有任何感叹号）

问题是有时可能会有感叹号。此外，当我这样做时，它是贪婪的，并且一直匹配到最后。

很抱歉这个新手问题，但我无法`/s`在[http://regexpal.com/](http://regexpal.com/)中进行测试，我真的很喜欢它的界面。基本上我想要一个不会在文本中使用的字符类和一个不贪婪的字符类，因此它不会尝试尽可能地走得更远。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:15:54.287

怎么用

```
(.|\n) 
```

这也应该明确允许换行符。

# jquery - 从外部方法访问小部件工厂选项

> ID：14273408
> 
> 赞同：0
> 
> 时间：2013-01-11T07:13:05.550
> 
> 标签：jquery, jquery-plugins, widget

我想用小部件工厂中的所有选项名称填充一个选择列表，并在选择时显示选项值，但我无法获取语法并且我不断收到“未捕获的错误：无法调用 [小部件名称上的方法” ] 在初始化之前...

任何人都可以向我展示从小部件外部获取所有当前选项列表的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:35:21.690

我不确定正确地制定答案，因为几天以来我一直在尝试使用它，但是，我最近可以阅读以下文章，您将在里面找到答案：http: [//net.tutsplus.com/tutorials /javascript-ajax/an-in-depth-review-of-jquerys-widget-factory/](http://net.tutsplus.com/tutorials/javascript-ajax/an-in-depth-review-of-jquerys-widget-factory/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T02:11:22.960

听起来你正在这样做：

```
$('.some-element').yourWidget('option'); 
```

在您像这样实际实例化小部件之前：

```
$('.some-element').yourWidget(); 
```

# android - 平滑的水平滚动文本

> ID：14273415
> 
> 赞同：2
> 
> 时间：2013-01-11T07:13:42.960
> 
> 标签：android, scroll

我知道这可能是重复的，但我还没有找到答案......但是！

如何在我的 Android 应用程序中制作**平滑的水平滚动文本？**我希望文本像电视新闻中的股票行情一样滚动。滚动完成时我还需要一个回调，这样我就可以设置一个新的文本来滚动。

做这个的最好方式是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:33:14.653

好问题。

首先要做到这一点，在你的`layout`文件中放置以下代码`TextView`

```
android:ellipsize="marquee"
android:focusable="false"
android:marqueeRepeatLimit="marquee_forever"
android:scrollHorizontally="true"
android:singleLine="true" 
```

然后在您的代码文件中编写以下代码，

```
TextView txt = (TextView) findViewById(R.id.textView);
txt.setSelected(true); 
```

您必须`setSelected(true)`让 textview 自动滚动。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:22:36.790

用于手动滚动

```
<HorizontalScrollView android:layout_width="fill_parent"
  android:layout_height="fill_parent">
  <TextView android:layout_width="40dp"
    android:layout_height="wrap_content"
    android:scrollHorizontally="true"
    android:text="Horizontal scroll view is working"/>

</HorizontalScrollView> 
```

用于自动滚动

```
<TextView
    android:text="Single-line text view that scrolls automatically if the text is too long to fit " 
    android:singleLine="true" 
    android:ellipsize="marquee"
    android:marqueeRepeatLimit ="marquee_forever"
    android:focusable="true"
    android:focusableInTouchMode="true" 
    android:scrollHorizontally="true"
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"/> 
```

# ruby-on-rails - Rails 3：如何限制对 Web 界面的访问以使用 Doorkeeper gem 添加 oauth 授权应用程序

> ID：14273418
> 
> 赞同：9
> 
> 时间：2013-01-11T07:14:00.290
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我有一个使用设备 + 门卫的 Rails 应用程序。我还使用 cancan 进行角色管理。在我的应用程序中，我`http://localhost:3000/oauth/applications/new`用于注册我的应用程序以获取客户端和机密 ID。目前任何用户都可以通过Web界面注册应用程序以获取客户端和秘密ID，我需要限制访问，以便只有管理员可以注册应用程序。

我在`doorkeeper.rb`文件中看到了一些代码

```
# If you want to restrict access to the web interface for adding oauth authorized applications, you need to declare the block below.
  # admin_authenticator do
  #   # Put your admin authentication logic here.
  #   # Example implementation:
  #   Admin.find_by_id(session[:admin_id]) || redirect_to(new_admin_session_url)
  # end 
```

我尝试如下，但没有工作......

```
admin_authenticator do
  if(current_user)
    current_user.role? :admin
  else
    redirect_to(new_user_session_url)
  end
end 
```

提前致谢......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-05T21:07:15.793

我使用并且效果很好的代码是

```
admin_authenticator do
  redirect_to new_user_session_url unless current_user && current_user.admin?
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-15T16:04:17.230

好吧，你的逻辑不正确。基本上，您让所有 current_user 都可以访问。你真的想要这样的东西：

```
admin_authenticator do
  if(current_user && current_user.role?(:admin))
    #do nothing
  else
    redirect_to(new_user_session_url)
  end
end 
```

你也可以做

```
admin_authenticator do
  if(current_user)
    redirect_to(not_authorized_url) unless current_user.role?(:admin)
  else
    redirect_to(new_user_session_url)
  end
end 
```

这将使您将用户发送到正确的错误页面

# greendao - 如何为一个实体创建多个表？

> ID：14273419
> 
> 赞同：4
> 
> 时间：2013-01-11T07:14:00.993
> 
> 标签：greendao

如何为一个实体创建多个表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:32:48.617

在 greenDAO 中是不可能的，目前没有计划支持此功能。你能解释一下你为什么要这样做以及它应该如何工作吗？也许有更好的方法...

# java - XML文件的Java通用解析

> ID：14273420
> 
> 赞同：0
> 
> 时间：2013-01-11T07:14:07.203
> 
> 标签：java, html, xml

假设我有一个 XML 文件名 movies.xml 并且我知道其中的标签是什么，那么我很容易在 java 中使用 jsoup 进行解析。但是现在假设我不知道标签是什么，什么是否. 标签，但我想获取所有数据，那么我将如何获取它？我将如何一般地解析 XML？我应该使用什么算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:20:44.467

使用 DOM Parser/Builder 之类的解析器（开箱即用的支持）；您将找到一个名为 getChildNodes() 的方法，该方法将从根节点检索所有子节点。然后，您可以适当地处理其中的每一个。

您还可以查看： [which is the best library for XML parsing in java](https://stackoverflow.com/questions/5059224/which-is-the-best-library-for-xml-parsing-in-java) and Iterate [all XML node generation in java DOM](https://stackoverflow.com/questions/1034062/iterate-all-xml-node-generations-in-java-dom)以获得更多见解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:18:00.670

只需调用一个 XML 解析器，解析器就会告诉您它找到了哪些元素。

# java - java初始化一个类的字段

> ID：14273423
> 
> 赞同：0
> 
> 时间：2013-01-11T07:14:53.333
> 
> 标签：java, class, initialization, field

抱歉，刚接触java的c++程序员又来了

我有这个代码

```
public class MainView extends View {

    static final int DRAW_LIST_SIZE=100;
    class EventDrawStuff {
        int         a;
        int         b;
        int         c;
    }
    static EventDrawStuff   m_drawList[] = new EventDrawStuff[DRAW_LIST_SIZE];

    class DrumEventDrawStuff {
        int     x;
        int     y;
    } 
    static DrumEventDrawStuff m_eventDrawStuff = new DrumEventDrawStuff(); 
```

m_drawList 的声明似乎工作正常，m_eventDrawStuff 的声明无法编译。有什么区别，不能只是 m_drawList 是一个数组吗？我注意到如果我说

```
static DrumEventDrawStuff[] m_eventDrawStuff = new DrumEventDrawStuff[1]; 
```

没关系，但我真的不希望它是一个数组，因为它只是一个东西。我意识到修复原始代码的方法是在构造函数中初始化 m_eventDrawStuff 但这似乎很麻烦且不必要。

也许我的想法完全错误，请赐教，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:18:26.587

你可以通过两种方式做到这一点 -

1.  使您的内部类静态

2.  `DrumEventDrawStuff`在对象的帮助下创建`MainView`对象。

    `static DrumEventDrawStuff m_eventDrawStuff = new MainView().new DrumEventDrawStuff();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T07:22:54.093

问题是您试图`DrumEventDrawStuff`在静态上下文中实例化 a 。`DrumEventDrawStuff`是 的内部类`MainView`，这意味着 的每个实例都有对持有它`DrumEventDrawStuff`的实例的隐式引用（“外部 this”）。`MainView`

如果您创建`DrumEventDrawStuff`一个静态类，那么您就可以了，因为这将删除隐式外部`this`：

```
static class DrumEventDrawStuff {
    ...
} 
```

此时您可能想知道为什么非静态`EventDrawStuff`类可以在静态上下文中使用。

答案是您实际上并没有在创建数组时创建任何*实例*。`EventDrawStuff`与 C++ 不同，Java 在创建新数组时不会实例化任何对象。因此，静态声明和创建数组是完全可以的，`EventDrawStuff`因为它将填充空值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T07:21:01.313

由于 DrumEventDrawStuff 在这里是一个非静态内部类，它需要一个 MainView 的“环绕”实例。没有它，它就不能被实例化。

您的数组 m_drawList 只是没有 EventDrawStuff 实例的数组，否则您会遇到同样的问题。

如果你真的想要那些静态字段，类必须是静态的，所以它们不需要周围的实例：

```
public class MainView extends View {

static final int DRAW_LIST_SIZE=100;
static class EventDrawStuff {
    int         a;
    int         b;
    int         c;
}
static EventDrawStuff   m_drawList[] = new EventDrawStuff[DRAW_LIST_SIZE];

static class DrumEventDrawStuff {
    int     x;
    int     y;
} 
static DrumEventDrawStuff m_eventDrawStuff = new DrumEventDrawStuff(); 
```

# c# - 如何知道电子邮件是否被收件人标记为垃圾邮件

> ID：14273424
> 
> 赞同：6
> 
> 时间：2013-01-11T07:14:55.487
> 
> 标签：c#, web-services, email, amazon-web-services, spam

今天我们正在讨论我们团队中的电子邮件服务。我的一名团队成员告诉我们，`Amazon Web Service`他们正在他们的研究所使用来发送批量电子邮件。他说 AWS 还会给你一份电子邮件被退回的报告。我认为这不是一项艰巨的任务。但是，如果收件人将其标记为垃圾邮件，它也会向您报告。如何？？

真的有可能吗，因为我在这里想不出任何技巧。一旦电子邮件进入收件人的领土（SMTP 服务器），我们就没有关于它的信息。我是一个 Windows 窗体的人，对 Web 和 Web 服务了解不多。这次我尝试了谷歌搜索甚至 Binging，但没什么用。

不要指望代码参考或我尝试过的。我花了好几个小时来搜索，但没有任何好处。有时我觉得我的朋友在撒谎，如果真的是这样，那我必须说他对自己的面部表情控制得很好。

即使是[类似的问题](https://stackoverflow.com/questions/7161899/how-can-i-detect-that-an-email-has-been-rejected-as-spam-by-the-recipient)也没有让我很满意。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T09:14:58.877

许多电子邮件提供商，例如 Yahoo Mail！和 AOL 提供所谓的**反馈循环**。您或亚马逊等电子邮件服务提供商可以申请参加。如果接受，您（或亚马逊）将在每次您的一位收件人单击“此电子邮件是垃圾邮件”时通过电子邮件收到一份报告。还有一个报告标准，称为 ARF（滥用报告格式）。这样，您（亚马逊）可以找出您收到了多少投诉。（当然目标是删除投诉者。他们显然不想要你的电子邮件。）

一些感兴趣的资源：

1.  申请[雅虎！反馈回路](http://feedbackloop.yahoo.net/)
2.  [反馈循环](http://en.wikipedia.org/wiki/Feedback_loop_%28email%29)@wikipedia
3.  [反馈回路列表](http://blog.wordtothewise.com/isp-information/)（主要针对美国）
4.  AOL提供的有关[ARF 和 FBL 的信息](http://postmaster.aol.com/Postmaster.FeedbackLoop.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T07:21:19.770

我不认为你的朋友在撒谎，但我认为他可能误解了。

接收服务器（可能是最终收件人，也可能是中间 Web 服务）可以配置为自动发送您已被识别为垃圾邮件的回复。AWS 报告的可能就是这种流量。

这有利有弊，优点是合法的电子邮件发送者可以联系目标并将自己列入白名单，缺点是垃圾邮件发送者知道他有一个实时地址，虽然他不能使用它，但可以出售给其他垃圾邮件发送者。

# jquery - 在初始化之前无法调用 [widget name] 上的方法

> ID：14273428
> 
> 赞同：2
> 
> 时间：2013-01-11T07:15:20.590
> 
> 标签：jquery, jquery-plugins, widget

我已经初始化了我的插件，但是`cannot call methods on collapsableTabs prior to initialization`当我尝试调用插件中的方法时，我不断收到。

插件已加载并显示正常。我在页面上有一个输入控件：

```
<input type="button" id="allOptions" value="Options:" onclick="javascript:populateOptions();" /> 
```

...

```
function populateOptions() 
{ 
  var optionSelector = $(this).collapsableTabs('allOptions'); <-- FAILS 
} 
```

当我点击按钮时，我会收到`error`消息。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-01T19:13:50.357

您必须先初始化小部件，然后再对其调用方法，即：

```
$(this).collapsableTabs().collapsableTabs("allOptions") 
```

这种笨拙语法的一种替代方法是从小部件本身的 _create() 或 _init() 方法中调用 allOptions() 。

# html - 如何在 Firefox 中使用 selenium 选择菜单和子菜单

> ID：14273431
> 
> 赞同：0
> 
> 时间：2013-01-11T07:15:41.717
> 
> 标签：html, selenium

下面提到了菜单和子菜单的 HTML 源代码，我想点击子菜单。如何使用 selenium Webdriver 做到这一点。

下面是页面的 HTML 信息。

```
 <div id="topnav" class="row" role="navigation">
     <div id="nav" class="row-980">
      <div class="region region-nav"> 
```

//顶部导航菜单栏

```
 <div id="block-menu-block--navigation-top" class="block block-menu-block">
   <div class="content">
      <ul class="muchomenu-menu muchomenu-menu-horizontal">
        <li class="first leaf has-children active-trail active menu-mlid-838 muchomenu-parent on">
      <span class="muchomenu-parent-title">
   <div class="muchomenu-bin muchomenu-slots" style="left: 0px; right: auto; top: -9999px;">
      </li>
     <li class="leaf has-children menu-mlid-859 muchomenu-parent off">
      <span class="muchomenu-parent-title">
        <div class="muchomenu-bin muchomenu-slots" style="left: 111px; right: auto;  top: -9999px;">
         <div class="col-2">
           <div class="col left margin_0_20_0_0">
           <div class="panel-pane pane-menu-tree pane-main-menu">
   <ul> 
```

//菜单中的第一个菜单项

```
 <li class="pane-title">
      <a alignment="left" panel="our_businesses" href="/our-businesses/ukpil-          overview">UKPIL</a>
     </li>
    <li class="first leaf menu-mlid-1195">
    <li class="leaf has-children menu-mlid-1250">
    <li class="last leaf has-children menu-mlid-976">
     </ul>
      </div>
       </div>
    <div class="col left margin_0_20_0_0">
    <div class="clear"></div>
      </div>
     </div>
      </li>
       <li class="leaf has-children menu-mlid-835 muchomenu-parent special-center off">
        <span class="muchomenu-parent-title">
      <div class="muchomenu-bin muchomenu-slots" style="left: 0px; right: auto; top:  -9999px;">
       <div class="col-3">
           <div class="col left margin_0_20_0_0">
        <div class="panel-pane pane-menu-tree pane-main-menu">
        <ul>
        <li class="pane-title">
              <a href="/our-customers/customer-commitment">Customer commitment</a>
             </li>
             <li class="first leaf menu-mlid-982">
             <li class="last leaf menu-mlid-983">
            </ul>
                </div>
            <div class="panel-separator"></div>
                     <div class="panel-pane pane-menu-tree pane-main-menu">
              </div>
              <div class="col left margin_0_20_0_0">
              <div class="col left margin_0_20_0_0">
              <div class="clear"></div>
             </div>
              </div>
                </li>
          <li class="leaf has-children menu-mlid-853 muchomenu-parent special-center off">
         <li class="leaf has-children menu-mlid-860 muchomenu-parent special-center off">
         <li class="leaf has-children menu-mlid-858 muchomenu-parent special off">
         <li class="last leaf has-children menu-mlid-857 muchomenu-parent special off">
       </ul>
          </div>
    </div>
     </div> 
```

# youtube - youtube direct lite 视频无法播放

> ID：14273436
> 
> 赞同：0
> 
> 时间：2013-01-11T07:16:01.850
> 
> 标签：youtube, youtube-api

我已经配置和设置了 youtube direct lite 并将应用程序部署在谷歌应用程序引擎中。我能够提交视频并且这些视频被批准并且批准邮件已成功发送。但是当我尝试嵌入播放列表代码时上传的视频，

```
<object width="480" height="385">
<param name="movie" value="http://www.youtube.com/p/PLwNZwNRcLsUoRtvyzHc3dYz1uLV_z9R2M?   fs=1"></param>
<param name="allowFullScreen" value="true"></param>
<param name="allowscriptaccess" value="always"></param>
<embed src="http://www.youtube.com/p/PLwNZwNRcLsUoRtvyzHc3dYz1uLV_z9R2M?fs=1" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="480" height="385"></embed>
</object> 
```

我得到一个没有显示视频的白屏。生成的视频链接也表示链接已损坏。但这是自动生成的链接，它不能被打破。请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:16:22.583

根据您的描述，我相信您使用的是[YouTube Direct](https://code.google.com/p/youtube-direct/)，而不是[YouTube Direct Lite](https://code.google.com/p/youtube-direct-lite/)。我建议此时使用更新的、维护性更好的 YouTube Direct Lite。

无论如何，我刚刚更新了在 YouTube Direct 的管理界面中提供播放列表嵌入的代码，以使用新的 iframe 播放列表播放器语法，这应该会更好：

[https://code.google.com/p/youtube-direct/source/detail?r=633](https://code.google.com/p/youtube-direct/source/detail?r=633)

尝试更新您的 YouTube Direct 安装以获取该新代码，然后从管理界面重新生成您的播放列表嵌入代码。

# java - 在解析输入字符串时保留输入字符串的格式以加倍

> ID：14273440
> 
> 赞同：0
> 
> 时间：2013-01-11T07:16:09.157
> 
> 标签：java

我有一个从 csv 文件向表提供值的场景。

在那里，一些列具有双值。

关键是双精度值可以是任何双精度格式，即 81 或 81.0 或 8.1E1。

我只想在将字符串解析为双精度后保留双格式。

例如，如果字符串为 81.0，则格式模式应为 ##.#，双解析应为 81.0 而不是 81 或 81.00
，如果字符串为 12.12，则格式模式应为 ##.## 与上述相同。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:59:15.467

您需要自己的价值持有者类，如下所示：

```
public class Value<Raw> {
  private final Format format;
  private Raw value;
  private String display;

  public Value(String display, Format format) {
    this.format = format;
    this.display = display;
    value = format.parseObject(display);
  }

  public String getDisplay() {
    return display;
  }

  public Raw getValue() {
    return value;
  }

  public void setValue(Raw value) {
    this.value = value;
    display = format.format(value);
  }

  public void setDisplay(String display) {
    this.display = display;
    value = format.parseObject(display);
  }

  public int hashCode() {
    return value == null ? 0 : value.hashCode();
  }

  public boolean equals(Object other) {
    if (other == null || Value.class != other.getCLass()) {
      return false;
    }
    Object otherValue = ((Value)other).value;
    return value == null ? otherRaw == null : value.equals(otherValue);
  }

  public String toString() {
    return display;
  }
} 
```

最后是确定格式。根据语言环境和文件格式，这有点棘手。对于 DecimalFormat，您可以将所有数字替换为 # 并将前导 # 减少为 1。对于像德语这样的语言，您可以在解析格式之前替换小数点和分组分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:45:22.857

如果您尝试转换`double`为`string`，则没有机会保留每个值的格式`double`值。

因为`double`值以二进制形式存储。

尾随十进制零的想法，如 106.4000，在`double`值中是没有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T07:21:45.493

我认为[`Double.valueOf`](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#valueOf%28java.lang.String%29)涵盖了您的用例。

此外，`81.0 == 81`and `81.00 == 81.0`and`81 == 81.00`都将返回 true，这意味着如果您 p​​arsed `81.00`，它将存储在 Java double as 中`81`，不会改变这一点。

# c# - NSubstitute When...Do 定义不会被后续定义覆盖

> ID：14273446
> 
> 赞同：2
> 
> 时间：2013-01-11T07:16:23.913
> 
> 标签：c#, unit-testing, c#-4.0, nsubstitute

```
void ABC()
{
    var foo = Substitute.For<IFoo>();
    foo.When(x => x.Bar()).Do(x => counter++);
    <use Bar()>.... 1
    foo.When(x => x.Bar()).Do(x => counter--);
    <use Bar()>.... 2
} 
```

对于上面的代码片段，(1) 和 (2) 都显示了 counter++ 行为，表明 When...Do 行为没有被覆盖。我需要这种行为来生成我想要连接不同回调的测试场景。

我应该如何实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T01:57:14.570

`Do`回调不会被替换，但两者都应该执行。例如（使用 NSub 1.4.3.0）：

```
var counter = 0;
var sub = Substitute.For<IFoo>();
sub.When(x => x.Bar()).Do(x => counter++);
sub.Bar();
Console.WriteLine(counter);  // prints 1
sub.When(x => x.Bar()).Do(x => counter--);
sub.Bar();
Console.WriteLine(counter);  // prints 1, as counter gets inc'd to 2, then dec'd to 1 
```

我建议谨慎使用 When..Do，因为它的使用可能是封装失败的症状。将行为强制到替换对象中可以表明我们正在测试的类与依赖类的行为有深度耦合，而不是我们正在替换的接口。

使用该免责声明，您可以交换回调的一种方法是使用帮助程序类来提供特定的回调：

```
[Test]
public void Example() {
    var counter = 0;
    var helper = new CallbackHelper();
    helper.Callback = x => counter++;
    var sub = Substitute.For<IFoo>();

    sub.When(x => x.Bar()).Do(x => helper.Callback(x));
    sub.Bar();
    Console.WriteLine(counter);

    helper.Callback = x => counter--;
    sub.Bar();
    Console.WriteLine(counter);

    helper.Callback = x => { counter = (counter+1) * 10; };
    sub.Bar();
    Console.WriteLine(counter);
}

public class CallbackHelper {
    public Action<CallInfo> Callback;
}

/* Prints:
    1
    0
    10
*/ 
```

如果您发布您试图实现的行为交换的具体示例，我们可能会提出一个界面更改来完全避免使用它。

希望这可以帮助。:)

# oracle - 带有两个表的更新语句 -Oracle

> ID：14273449
> 
> 赞同：0
> 
> 时间：2013-01-11T07:16:40.537
> 
> 标签：oracle, dml

我有两个表，我需要使用基于公共列的第一个表中的值更新第二个表。

我使用了以下语句

```
UPDATE emp
  2      SET ename = ( SELECT dname
  3                    FROM dept
  4                    WHERE emp.deptno = dept.deptno)
  5      WHERE EXISTS
  6        ( SELECT dname
  7                    FROM dept
  8                    WHERE emp.deptno = dept.deptno); 
```

但我得到了错误

```
ORA-01427 - Single row subquery returns more than one row. 
```

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:22:09.763

```
SELECT dname
FROM dept
WHERE emp.deptno = dept.deptno 
```

查询必须返回单个记录。

检查

```
SELECT count(*), dname
FROM dept
group by dname
having count(*) > 1
order by 1 desc 
```

或使用

```
SELECT dname
FROM dept
WHERE emp.deptno = dept.deptno
and rownum = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:22:17.547

您需要检查第一个子查询是否仅返回 1 个值 bcz 如果此子查询返回多于 1 行您想用行中的 2 个值更新 1 个字段名称，这就是为什么我猜您有此错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T07:28:22.827

Your subquery to `dept` table is probably not returning one row. Add `min` or `max` operation to get one row from `dept` for each row from `emp`. Each setting value must be nonambigous.

```
UPDATE emp
    SET ename = ( SELECT min dname
                  FROM dept
                  WHERE emp.deptno = dept.deptno)
    WHERE EXISTS
      ( SELECT dname
                  FROM dept
                  WHERE emp.deptno = dept.deptno); 
```

Remark1: in default SCOTT schema `deptno` is primary key, so no error would be encountered.
Remark2: shouldn't your question to be placed in [serverfault.com](http://serverfault.com)?

# java - 使用 javafx 从 webview 获取内容

> ID：14273450
> 
> 赞同：22
> 
> 时间：2013-01-11T07:16:41.260
> 
> 标签：java, webview, javafx-2, javafx

我正在使用 JAVA FX 控件开发一个摇摆应用程序。在我的应用程序中，我必须打印出 webview 中显示的 html 页面。我正在尝试在 HtmlDocuement 的帮助下将 webview 的 html 内容加载到字符串中。

要从 web 视图加载 html 文件的内容，我正在使用以下代码，但它不起作用：

```
try
{
    String str=webview1.getEngine().getDocment().Body().outerHtml();
}
catch(Exception ex)
{
} 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-12-29T17:29:11.917

```
String html = (String) webEngine.executeScript("document.documentElement.outerHTML"); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-01-11T18:13:08.887

`WebEngine.getDocument`返回`org.w3c.dom.Document`，而不是您期望通过代码判断的 JavaScript 文档。

不幸的是，打印出来`org.w3c.dom.Document`需要相当多的编码。您可以尝试从[What is the shortest way to pretty print a org.w3c.dom.Document to stdout?](https://stackoverflow.com/questions/2325388/java-shortest-way-to-pretty-print-to-stdout-a-org-w3c-dom-document) ，请参见下面的代码。

请注意，在使用`Document`. 这就是`LoadWorker`这里使用的原因：

```
public void start(Stage primaryStage) {
    WebView webview = new WebView();
    final WebEngine webengine = webview.getEngine();
    webengine.getLoadWorker().stateProperty().addListener(
            new ChangeListener<State>() {
                public void changed(ObservableValue ov, State oldState, State newState) {
                    if (newState == Worker.State.SUCCEEDED) {
                        Document doc = webengine.getDocument();
                        try {
                            Transformer transformer = TransformerFactory.newInstance().newTransformer();
                            transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "no");
                            transformer.setOutputProperty(OutputKeys.METHOD, "xml");
                            transformer.setOutputProperty(OutputKeys.INDENT, "yes");
                            transformer.setOutputProperty(OutputKeys.ENCODING, "UTF-8");
                            transformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "4");

                            transformer.transform(new DOMSource(doc),
                                    new StreamResult(new OutputStreamWriter(System.out, "UTF-8")));
                        } catch (Exception ex) {
                            ex.printStackTrace();
                        }
                    }
                }
            });
    webengine.load("http://stackoverflow.com");
    primaryStage.setScene(new Scene(webview, 800, 800));
    primaryStage.show();
} 
```

# html - 在 HTML 中缩放图像映射

> ID：14273454
> 
> 赞同：0
> 
> 时间：2013-01-11T07:17:11.980
> 
> 标签：html, imagemap

我有一个现有的 HTML 页面，其中包含一个带有相应图像映射的图像。

我想在不同的页面中使用图像，但由于可用空间较小，需要对其进行缩放。问题是，如果我缩放图像，则图像映射不再适用于它。

如何实现与图像和图像映射组合相同的效果，但允许缩放图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:29:29.013

这是一个图像映射调整器：

[http://blog.outsharked.com/p/image-map-resizer.html](http://blog.outsharked.com/p/image-map-resizer.html)

它使用的基本代码的简化版本如下所示：

```
map.find('area').each(function() {
    var j,coordx,coordy,
        area = $(this),
        coords = area.attr('coords').split(','),
        isVisible=true,
        newCoords = ''; 

     for (j = 0; j < coords.length; j+=2) {
             coordx = parseInt(coords[j],10);
             coordy = parseInt( coords[j+1],10);

             // ignore last coord if uneven numbers (meaning it's a circle)

             newCoords += (!newCoords ? '' : ',') + Math.round(coordx * xAmount) + 
                (j+1<coords.length ? ','+ Math.round(coordy * yAmount) : '');
        }
} 
```

它基本上遍历每个区域，重新计算坐标数据。

您应该能够将此与`window.resize`事件协调以同时更改图像映射和图像的大小。因为 window.resize 在用户缩放窗口时会触发多次，所以您可能不想在每次触发事件时都尝试调整图像映射的大小。由于它是计算密集型的，因此可能会导致用户体验缓慢。相反，缓冲它并且每隔一段时间只做一次调整大小。

这是一个小提琴，展示了如何使用 ImageMapster jquery 插件缓冲 window.resize 事件以执行相同的操作：http: [//jsfiddle.net/jamietre/jQG48/](http://jsfiddle.net/jamietre/jQG48/)

# android - 如何使用 C++/Windows 识别新插入的 android USB 设备？

> ID：14273455
> 
> 赞同：2
> 
> 时间：2013-01-11T07:17:12.940
> 
> 标签：android, windows, usb, wmi

我正在尝试实现这样的功能：当将 android 设备插入 USB 时，获取其 pid 和 vid，然后使用它们进行一些处理。现在我使用 WMI 来检测 USB 插入和删除。但是每次插入设备时，我的程序都会收到多个事件。那是因为还检测到了其他设备，例如 USB 大容量存储卡。那么，我可以从哪些信息中识别新插入的 USB 设备是否是安卓手机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:41:34.447

我想我找到了解决这个问题的方法。我监听 win32_PnPEntity 创建的事件，Win32_pnpEntity 的 Service 属性可用于识别设备。

# jquery - 从分页Jquery中删除非中断空间

> ID：14273457
> 
> 赞同：1
> 
> 时间：2013-01-11T07:17:39.980
> 
> 标签：jquery

就在我以为我已经完成时，我发现在我选择的分页“5”之间，例如下面的双硬编码不间断空格`&nbsp;`。我无权访问 cms 来覆盖它，因此需要 jquery。

确保选择分页的解决方案是什么，而不是`&nbsp;`. 请查看小提琴，以便您演示确切的体验。

小提琴[http://jsfiddle.net/evanmoore/9AMnU/2/](http://jsfiddle.net/evanmoore/9AMnU/2/)

HTML

```
<a href="http://www.example.com">4</a>
&nbsp;5&nbsp;
<a href="http://www.example.com">6</a> 
```

这个 jquery 清理并跨越分页周围的标签

```
$('.pag').each(function () {
  $(this).contents().filter(function () {
    return this.nodeType === 3 && $.trim(this.textContent) !== '' 
  }).first().wrap('<div/>').parent().html(function (i, v) {
        return v.replace(/(\w)/, '<span>$1</span>')
      }).replaceWith(function () {
        return this.innerHTML;
      })
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:46:59.873

试试这个代码

```
$('.pag').each(function () {
  $(this).contents().filter(function () {
    return this.nodeType === 3 && $.trim(this.textContent) !== '' 
  }).first().wrap('<div/>').parent().html(function (i, v) {

        v= v.replace("&nbsp;","");

        return v.replace(/(\w)/, '<span>$1</span>')
      }).replaceWith(function () {
        return this.innerHTML;
      })
}) 
```

我变了

```
v= v.replace("&nbsp;",""); 
```

**`UPDATE`**

试试这个

```
v= v.replace(/&nbsp;/g,""); 
```

删除多次出现而不是重写上面的代码两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:22:56.107

您可以使用

[$.trim()](http://api.jquery.com/jQuery.trim/)

删除开头和结尾的空格

# jquery - 在将 .draggable 元素的子元素移动到目标之前，如何清除它们的样式？

> ID：14273461
> 
> 赞同：2
> 
> 时间：2013-01-11T07:17:43.413
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, fcbkcomplete

我有一个 div，我在其中使用出色的 fcbkcomplete jquery 插件对列表项进行了一些操作。然而，当我将它插入到我的可拖动和可排序页面中时，我意识到当我移动它时额外的装饰被冻结了。至少可以说，这使得最终结果感觉粗糙。我知道我可以在拖动之前拦截 mousedown 事件，但我不知道要修改哪些元素以保持样式简单。

[这是 fcbkcomplete 的演示](http://www.emposha.com/demo/fcbkcomplete_2/)，它类似于 facebook 的消息撰写功能。在我的 jsfiddle 中，一旦我准备好将 div 拖到下面的可排序列表中，我想要所有花哨的装饰（关闭图像，分成蓝色框，“开始输入...”工具提示，以及最终的空文本框被一个简单的字符串替换，这样当我点击 h1 标题时，我仍然可以检索值。有人知道怎么做吗？

```
 $("#draggable").draggable({
                            connectToSortable: "#sortable",
                            helper: "clone",
                            revert: "invalid",
                            distance: 20
                        });

                        $('#draggable').each(function () {
                            $(this).mousedown(function () {

                                // Need to clear styles here
                                //$(this).parent().children('.maininput').hide('blind', 500);
                            });
                        }); 
```

感谢您的关注。[JSFiddle 在这里。](http://jsfiddle.net/parikramatic/Pqp8S/6/)这[是问题的截图](http://i.imgur.com/LL4H8.png)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T10:35:22.627

[问了一个类似的问题](https://stackoverflow.com/questions/14299566/how-can-i-make-a-draggable-items-style-match-the-target-using-the-custom-helper)，答案也解决了这个问题。不得不使用自定义助手而不是克隆，但一切正常。至于可丢弃，

```
 $("#container").droppable({
                accept: '.product',
                drop: function (event, ui) {
                    var x = ui.helper.clone();
                    x.removeClass().attr('style', '');
                    x.addClass("ui-state-default");
                    x.appendTo('#container');
                    ui.helper.remove();
                }
            }); 
```

问题是，我没用过！

# c++ - 在 mbed 上使用智能指针

> ID：14273463
> 
> 赞同：1
> 
> 时间：2013-01-11T07:17:48.207
> 
> 标签：c++, embedded, mbed

有没有办法在[mbed 板上](http://mbed.org/)使用智能指针以及 mbed 库？需要什么编译器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T07:30:44.110

根据该网站，他们将编译器作为在线平台提供。我无法访问它，但假设它是启用了 C++ 的 GCC 的较新版本，但不是最近到 C++11 是一个选项，您可以使用 TR1 获得智能指针。

```
#include <tr1/memory>

std::tr1::shared_ptr< int > smart = std::make_shared( 5 ); 
```

啊，现在我看到他们支持“导出到外部工具链”选项。这应该让您可以自由升级 GCC。我不确定最低要求是多少`tr1::shared_ptr`，但它可能存在于任何版本的 GCC 4.x 中。

如果您选择 C++11，最好选择您可以获得的最新编译器版本。您可能必须从源代码构建。请务必指定必要的 ARM 目标平台。

# asp.net-mvc - 调试带有 Ninject 错误的 MVC3 源代码

> ID：14273468
> 
> 赞同：2
> 
> 时间：2013-01-11T07:18:24.903
> 
> 标签：asp.net-mvc, asp.net-mvc-3, ninject

我试图了解 Html Helpers 是如何在 MVC 3 中构建的。所以我下载了 MVC 3 源代码并将其作为另一个项目添加到同一解决方案中以对其进行调试。

我遵循了这个步骤。

1.  从我的 MVC 应用程序中删除了 System.web.Mvc 引用

2.  添加了用于调试的 System.web.Mvc 源代码项目参考。

3.  在 Web.config System.Web.Mvc 中，Version=3.0.0.0，Culture=neutral，PublicKeyToken=31BF3856AD364E35 到 System.Web.Mvc

但是，我在我的 3 应用程序中添加了其他`NInject`( `NInject`, `NInject.web.common`, `WebActivator`, `Microsoft.web.infrastructure`) 引用以`MVC`进行依赖注入。

现在我在源代码中出现错误，在下面***的***源代码中`System.Web.MVC`说***`An error occurred when trying to create a controller of type 'MVCApp.Controllers.HomeController'. Make sure that the controller has a parameterless public constructor.`***`MVC`

```
public IController Create(RequestContext requestContext, Type controllerType) 
{
    try
    {
        return (IController)(_resolverThunk().GetService(controllerType)
            ?? Activator.CreateInstance(controllerType));
    }
    catch (Exception ex) 
    {
        throw new InvalidOperationException(
            String.Format(CultureInfo.CurrentCulture,
                MvcResources.DefaultControllerFactory_ErrorCreatingController, controllerType),
                ex);
    }
} 
```

> 检查**DependencyResolver.Current**属性显示 DependencyResolver.Current 类型“System.Web.Mvc.DependencyResolver”存在于“System.Web.Mvc.dll”和“System.Web.Mvc.dll”中

为了使用 MVC3 源代码调试我的 MVC3App，还需要做些什么？我怎样才能避免这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-29T13:56:58.567

看看这个解决方案：[Ninject + MVC3 is not injection into controller](https://stackoverflow.com/questions/14343388/ninject-mvc3-is-not-injecting-into-controller/14354347#comment31644936_14354347)

将此添加到 Web.config

```
 <dependentAssembly>
    <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
    <bindingRedirect oldVersion="1.0.0.0" newVersion="4.0.0.0" />
    <bindingRedirect oldVersion="2.0.0.0" newVersion="4.0.0.0" />
    <!-- The following line was missing -->
    <bindingRedirect oldVersion="3.0.0.0" newVersion="4.0.0.0" /> 
  </dependentAssembly> 
```

它解决了这个问题：

> 检查 DependencyResolver.Current 属性显示 DependencyResolver.Current 类型“System.Web.Mvc.DependencyResolver”存在于“System.Web.Mvc.dll”和“System.Web.Mvc.dll”中

干杯。

# c# - 将文件拖放到程序中

> ID：14273471
> 
> 赞同：1
> 
> 时间：2013-01-11T07:18:49.020
> 
> 标签：c#, drag-and-drop, gtk#

我正在使用 MonoDevelop 工具。
我想用 GTK# 制作如下程序；

1\. 用户将文件拖到程序的 listView、tableView 或其他任何地方
2\. 拖拽文件的列表打印在程序的窗口上

但我几乎是 GTK# 的新手，并且找到了如何拖放的方法，
所以我搜索了有关它的信息并找到了如下所示的链接。
[http://developer.gnome.org/gtkmm-tutorial/3.0/sec-dnd-example.html.en](http://developer.gnome.org/gtkmm-tutorial/3.0/sec-dnd-example.html.en)

这是我试图让程序链接建议的代码
（这个链接解释了 C++ 中的拖放，我必须制作它像 C# 一样

使用 Gtk；使用系统；使用 System.Collections；使用 System.Collections.Generic；

```
namespace DragAndDrop
{
    public class SharpApp: Window
    {
        Button btnDrag;
        Label lblDrop;
        HBox hbox;

        public SharpApp (): base("Title")
        {
            btnDrag = new Button("Drag Here");
            lblDrop = new Label("Drop Here");
            hbox = new HBox();

            SetDefaultSize(250,200);
            SetPosition (Gtk.WindowPosition.Center);
            DeleteEvent += (o, args) => Application.Quit ();

            // Targets
            List<TargetEntry> list
                = new List<TargetEntry> ();
            list.Add (new TargetEntry
                      ("STRING", TargetFlags.Widget, 0));
            list.Add (new TargetEntry
                      ("text/plain", TargetFlags.Widget, 0));

            // Drag site -----
            // Make btnDrag a DnD drag source:
            TargetEntry[] entries = list.ToArray();
            TargetEntry[] se = new TargetEntry[] {entries[0]};

            Drag.SourceSet (btnDrag, Gdk.ModifierType.ModifierMask,
                            se, Gdk.DragAction.Copy);

            // Connect signals
            btnDrag.DragDataGet += delegate
                (object o, DragDataGetArgs args) {
                Console.WriteLine ("Test");
                OnDragDataGet(args.Context,
                              args.SelectionData,
                              args.Info,
                              args.Time);
            };

            hbox.PackStart (btnDrag);

            // Drop site -----
            // Make lblDrop a DnD drop destination:
            TargetEntry[] de = new TargetEntry[] {entries[1]};

            Drag.DestSet (lblDrop, DestDefaults.Drop,
                          de, Gdk.DragAction.Copy);

            // Connect signals
            lblDrop.DragDataReceived += delegate
                (object o, DragDataReceivedArgs args) {
                Console.WriteLine ("Test");
                OnDragDataReceived(args.Context,
                                   args.X,
                                   args.Y,
                                   args.SelectionData,
                                   args.Info,
                                   args.Time);
            };

            // hbox
            hbox.PackStart (lblDrop);

            Add (hbox);

            ShowAll ();
        }

        // event handlers
        protected override void OnDragDataGet
            (Gdk.DragContext context, SelectionData sdata,
             uint info, uint time)
        {
            Console.WriteLine ("OnDragDataGet");

            string tmp = "I'm data!";
            byte[] b = new byte[tmp.Length];
            for (int i=0; i<tmp.Length; ++i)
                b[i] = (byte)tmp[i];

            sdata.Set(sdata.Target, 8, b, tmp.Length);
        }
        protected override void OnDragDataReceived
            (Gdk.DragContext context, int x, int y,
             SelectionData sdata, uint info, uint time)
        {
            Console.WriteLine ("OnDragDataReceived");

            int length = sdata.Length;
            if ((length>=0) && (sdata.Format==8))
            {
                Console.WriteLine ("Received \"{0}\" in label",
                                   sdata.Data.ToString());
            }

            Drag.Finish (context, false, false, time);
        }

        // main
        public static void Main (string[] args)
        {
            Application.Init ();
            new SharpApp();
            Application.Run ();
        }
    }
} 
```

但结果告诉我我可能错了。我以为
拖动按钮时按钮会移动，但按钮根本没有移动。有没有人能解决我的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-24T08:06:28.857

以下示例将放置在其上的文件的完整路径打印到标签（称为 lblPath）中：

```
public partial class MainWindow: Gtk.Window
{
    /** Add a label to your project called lblPath **/
    public MainWindow () : base (Gtk.WindowType.Toplevel)
    {
        Build ();
        //media type we'll accept
        Gtk.TargetEntry [  ] target_table = 
            new TargetEntry [  ] {
            new TargetEntry ("text/uri-list", 0, 0),
            new TargetEntry ("application/x-monkey", 0, 1),
        };
        Gtk.Drag.DestSet (lblPath, DestDefaults.All, target_table, Gdk.DragAction.Copy);
        lblPath.DragDataReceived += new Gtk.DragDataReceivedHandler(OnLabelDragDataReceived);
    }

    void OnLabelDragDataReceived (object sender, Gtk.DragDataReceivedArgs args)
    {
        if (args.SelectionData.Length > 0) {
            byte[] data = args.SelectionData.Data;
            string files = System.Text.Encoding.UTF8.GetString (data);
            string file;
            string[] fileArray = files.Split ('\n');
            for (int i = 0; i < fileArray.Length - 1; i++) { //the last element is empty
                file = fileArray [i].Replace ("\r", "");
                if (file.StartsWith("file://"))
                    file = file.Substring(7); //for Windows should be 8
                lblPath.Text += file + "\n";
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T03:31:02.397

自我回答
我在这里找到了有关拖放的教程：
[https ://github.com/mono/gtk-sharp/blob/master/sample/TestDnd.cs](https://github.com/mono/gtk-sharp/blob/master/sample/TestDnd.cs)
[http://my.safaribooksonline.com/book/programming/mono/ 0596007922/gtksharp/monoadn-chp-4-sect-8](http://my.safaribooksonline.com/book/programming/mono/0596007922/gtksharp/monoadn-chp-4-sect-8)

我自己做了一个拖放教程。
这是放置文件教程。

```
using System;
using System.Collections;
using System.Collections.Generic;

// 1\. Drop file tutorial
namespace DropFile
{
    public class App: Gtk.Window
    {
        Gtk.Label lbldrop;

        public App (): base ("Drop file")
        {
            this.SetDefaultSize (250, 200);
            this.SetPosition (Gtk.WindowPosition.Center);
            this.DeleteEvent += OnTerminated;

            this.lbldrop = new Gtk.Label ("Drop here!");
            Gtk.Drag.DestSet (this.lbldrop, 0, null, 0);
            this.lbldrop.DragDrop
                += new Gtk.DragDropHandler
                    (OnLabelDragDrop);
            this.lbldrop.DragDataReceived
                += new Gtk.DragDataReceivedHandler
                    (OnLabelDragDataReceived);

            Gtk.VBox vbox = new Gtk.VBox ();
            vbox.PackStart (this.lbldrop, true, true, 0);

            this.Add (vbox);
            this.ShowAll ();
        }

        void OnLabelDragDrop (object sender, Gtk.DragDropArgs args)
        {
            Gtk.Drag.GetData
                ((Gtk.Widget)sender, args.Context,
                 args.Context.Targets[0], args.Time);
        }
        void OnLabelDragDataReceived
            (object sender, Gtk.DragDataReceivedArgs args)
        {
            if (args.SelectionData.Length > 0
                && args.SelectionData.Format == 8) {

                byte[] data = args.SelectionData.Data;
                string encoded = System.Text.Encoding.UTF8.GetString (data);

                // I don't know what last object is,
                //  but I tested and noticed that it is not
                //  a path
                List<string> paths
                    = new List<string> (encoded.Split ('\r', '\n'));
                paths.RemoveAll (string.IsNullOrEmpty);
                paths.RemoveAt (paths.Count-1);

                for (int i=0; i<paths.Count; ++i)
                {
                    Console.WriteLine ("Path {0}: {1}", i, paths[i]);
                }
            }
        }

        bool Test (string str)
        {
            return true;
        }

        void OnTerminated (object sender, EventArgs args)
        {
            Gtk.Application.Quit ();
        }

        public static void Main (string[] args)
        {
            Gtk.Application.Init ();
            new App ();
            Gtk.Application.Run ();
        }
    }
} 
```

这是拖动按钮教程。

```
using System;

// 2\. Drag button tutorial
namespace DragButton
{
    public class App: Gtk.Window
    {
        enum StatusType
        {
            Checked,
            NotChecked
        }

        Gtk.Button btnDrag;
        Gtk.Label lblDrop;
        bool isChecked;
        Gtk.Statusbar sBar;

        public App (): base("Drag And Drop Complete")
        {
            this.SetDefaultSize (250, 200);
            this.SetPosition (Gtk.WindowPosition.Center);
            this.DeleteEvent += OnTerminated;

            this.isChecked = false;
            this.sBar = new Gtk.Statusbar ();
            sBar.Push ((uint)StatusType.NotChecked, "Not checked");

            this.btnDrag = new Gtk.Button ("Drag here");
            Gtk.Drag.SourceSet
                (this.btnDrag,
                 Gdk.ModifierType.Button1Mask
                 | Gdk.ModifierType.Button3Mask,
                 null,
                 Gdk.DragAction.Copy | Gdk.DragAction.Move);
            this.btnDrag.DragDataGet
                += new Gtk.DragDataGetHandler
                    (HandleSourceDragDataGet);
            this.btnDrag.DragDataDelete
                += new Gtk.DragDataDeleteHandler
                    (HandleSourceDragDataDelete);

            // set drop label as destination
            this.lblDrop = new Gtk.Label ("Drop here");
            Gtk.Drag.DestSet (this.lblDrop, 0, null, 0);
            this.lblDrop.DragMotion
                += new Gtk.DragMotionHandler
                    (HandleTargetDragMotion);
            this.lblDrop.DragDrop
                += new Gtk.DragDropHandler
                    (HandleTargetDragDrop);
            this.lblDrop.DragDataReceived
                += new Gtk.DragDataReceivedHandler
                    (this.HandleTargetDragDataReceived);
            this.lblDrop.DragDrop
                += new Gtk.DragDropHandler
                    (this.HandleStatBarDragDrop);

            Gtk.MenuBar bar = new Gtk.MenuBar ();
            Gtk.MenuItem item = new Gtk.MenuItem ("File");
            Gtk.Menu menu = new Gtk.Menu ();
            item.Submenu = menu;
            bar.Append (item);

            // accel key
            Gtk.AccelGroup ag = new Gtk.AccelGroup ();
            this.AddAccelGroup (ag);
            item = new Gtk.MenuItem ("Quit");
            item.Activated += OnTerminated;
            item.AddAccelerator
                ("activate", ag, new Gtk.AccelKey
                 (Gdk.Key.Q, Gdk.ModifierType.ControlMask, 
                 Gtk.AccelFlags.Visible));
            menu.Append (item);

            Gtk.VBox vbox = new Gtk.VBox();
            vbox.PackStart (bar, false, false, 0);

            Gtk.HBox hbox = new Gtk.HBox ();
            hbox.PackStart (this.btnDrag, true, true, 0);
            hbox.PackStart (this.lblDrop, true, true, 0);
            vbox.PackStart (hbox, true, true, 0);
            vbox.PackStart (sBar, false, false, 0);

            this.Add (vbox);
            this.ShowAll ();
        }

        void OnTerminated(object sender, EventArgs args)
        {
            Gtk.Application.Quit ();
        }
        void HandleSourceDragDataGet
            (object sender, Gtk.DragDataGetArgs args)
        {
            Console.WriteLine ("Source Drag Data Get");
            args.SelectionData.Text = "I'm data!";
        }
        void HandleSourceDragDataDelete
            (object sender, Gtk.DragDataDeleteArgs args)
        {
            Console.WriteLine ("Source Drag Data Delete");
            Console.WriteLine ("Delete the data!");
        }
        void HandleTargetDragMotion
            (object sender, Gtk.DragMotionArgs args)
        {
            Gdk.Drag.Status (args.Context,
                             args.Context.SuggestedAction,
                             args.Time);
            args.RetVal = true;
        }
        void HandleTargetDragDrop
            (object sender, Gtk.DragDropArgs args)
        {
            Console.WriteLine ("drop");
            if (args.Context.Targets.Length != 0) {
                Gtk.Drag.GetData
                    ((Gtk.Widget)sender, args.Context,
                     args.Context.Targets[0], args.Time);
                args.RetVal = true;
            }

            args.RetVal = false;
        }
        void HandleTargetDragDataReceived
            (object sender, Gtk.DragDataReceivedArgs args)
        {
            Console.WriteLine ("received");
            if (args.SelectionData.Length >= 0
                && args.SelectionData.Format == 8) 
            {
                Console.WriteLine ("Hi!");

                Gtk.Drag.Finish (args.Context, true, false, args.Time);
            }
            Gtk.Drag.Finish (args.Context, false, false, args.Time);
        }
        void HandleStatBarDragDrop
            (object sender, Gtk.DragDropArgs args)
        {
            isChecked = !isChecked;
            if (isChecked)
                sBar.Push ((uint)StatusType.Checked, "Checked");
            else
                sBar.Pop ((uint)StatusType.Checked);
        }

        public static void Main (string[] args)
        {
            Gtk.Application.Init ();
            new App ();
            Gtk.Application.Run ();
        }
    }
} 
```

# macos - 它是否具有将所有 NSStringEncoding 更改为 NSUTF8StringEncoding 的功能

> ID：14273472
> 
> 赞同：0
> 
> 时间：2013-01-11T07:18:58.160
> 
> 标签：macos, nsstringencoding

我想下载 html 代码并将其保存为 html 文件。但是，有多种编码用于 html 文件，例如 NSUTF8StringEncoding、NSISOLatin1StringEncoding 等。它是否具有将不同的编码文件更改为相同的功能，并且当webview加载html文件时，它看起来就像正常一样。

# javafx - 在 Javafx 中将焦点设置在 FlowPane 上

> ID：14273483
> 
> 赞同：0
> 
> 时间：2013-01-11T07:20:06.523
> 
> 标签：javafx

我试过了

```
public void ChangeFocus(Button browse, final FlowPane mFlowPane)
{
    browse.addEventHandler(KeyEvent.KEY_PRESSED, new EventHandler<KeyEvent>() {

         @Override
         public void handle(KeyEvent event)
         {
             if (event.getCode() == KeyCode.TAB)
             {
                System.out.println("TAB pressed");
                mFlowPane.requestFocus();
                event.consume(); // do nothing
         }
       }
     });

} 
```

在上面的代码中，我在 Flowpane 中设置了一个 ImageView，但是当我按下浏览按钮上的 TAB 按钮时，我无法专注于 imageview 我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:50:15.903

FlowPane 默认情况下是不可聚焦的。调用 mFlowPane.setFocusTraversable(true) 使其成为遍历故事的一部分

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-17T13:40:54.213

更多细节来解决它。而不是关注流程窗格，您需要将焦点设置在流程窗格中的内容上，例如文本字段：

```
flowPane.setOnMouseClicked(new EventHandler<MouseEvent>()
{
   public void handle(MouseEvent mouseEvent)
   {
         textfield.requestFocus();
   }
}); 
```

# visual-studio-2008 - 在 vs 2008 中创建新的 web 表单时如何避免 aspx.designer 文件

> ID：14273485
> 
> 赞同：0
> 
> 时间：2013-01-11T07:20:17.207
> 
> 标签：visual-studio-2008

我发现有时会创建 aspx.designer 文件，有时则不会。你们能告诉我在哪里设置状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:29:57.663

我认为您创建的是网站项目，而不是 Web 应用程序项目。如果您创建网站项目，则不会生成 Designer.cs 文件。有关网站项目和 Web 应用程序项目之间的区别，请参阅[Web 应用程序项目与 Visual Studio 中的网站项目](http://msdn.microsoft.com/en-us/library/dd547590.aspx "Visual Studio 中的 Web 应用程序项目与网站项目")

# java - IPC 的 RMI 替代方案？

> ID：14273487
> 
> 赞同：1
> 
> 时间：2013-01-11T07:20:20.563
> 
> 标签：java, ipc, rmi, rpc

我有 2 个进程需要通过同一台 PC 和不同的 PC 进行通信。在本地情况下，进程通信是在不同进程之间进行的，例如 Process`A`和 Process `B`。
在远程情况下，它将是`A`在不同 PC 上运行的 2 个 Process 实例之一。
我将从头开始创建它们，我想知道最好的方法是什么。我知道 RMI 和套接字，但我想知道我所描述的情况，并且还考虑到交换的消息很小并且 API 的数量非常少，如果有一个标准的方法/库的话。
任何建议都非常受欢迎

**@EJP 评论后更新：**
我的兴趣是 1）以轻松的方式实现通信要求，因为暴露的 API 非常小，消息也会如此 2）如果可能的话，使用和学习一个新的流行框架（我已经知道 RMI和插座）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T07:44:49.327

如果您只是在寻找消息传递框架，那么有很多可用的，例如

*   RabbitMQ - [http://www.rabbitmq.com/](http://www.rabbitmq.com/)
*   ZeroC 冰 - [http://www.zeroc.com/ice.html](http://www.zeroc.com/ice.html)
*   AMQP - [http://www.amqp.org](http://www.amqp.org)
*   OpenSplice DDS - [http://www.prismtech.com/opensplice](http://www.prismtech.com/opensplice)

But when you use a 3rd party framework, you are then adding an additional dependency to your application. If it is something very simple like your case, perhaps writing a TCP client/server would be sufficient for a client/server paradigm or if you are looking for publisher/subscriber paradigm then you can look into using UDP multicast. You just need your data class to extends Serializable if you want to be able to marshal and unmarshal your data to buffer and send it over to network using typical JAVA socket API.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T07:28:05.053

我强烈建议看看 Thrift。在我使用过的所有技术（Web 服务、RMI、XML-RPC、Corba）中，它是我目前最喜欢的。基本上涉及的步骤是：

1.  下载 Thrift 编译器。
2.  添加 Maven 依赖项（确保它与编译器版本相同！）我目前使用 0.8.0。
3.  编写你的 Thrift IDL（非常简单，google 一下，因为有很多例子）。
4.  为 Java 编译它。
5.  编写您的服务器/客户端。

通常，您可以用大约 30 行代码将服务器和客户端组合在一起。在速度和可靠性方面，它从来没有让我失望过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T07:23:26.960

[JMX](http://docs.oracle.com/javase/1.5.0/docs/guide/jmx/examples.html)是一个不错的选择。

例子 ：

[http://www.javalobby.org/java/forums/t49130.html](http://www.javalobby.org/java/forums/t49130.html)

[IMB JMX 示例](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/cxml_javamanagementx.html)

[http://alvinalexander.com/blog/post/java/source-code-java-jmx-hello-world-application](http://alvinalexander.com/blog/post/java/source-code-java-jmx-hello-world-application)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T10:10:19.317

You might have a look at [Versile Java](https://versile.com/products/vjava/) (full disclosure: I am one of the developers), it satisfies at least your criteria #1\. From the API documentation, here are some examples of writing [remote-enabled objects](https://versile.com/doc/vjava/current/org/versile/orb/external/package-summary.html), running a [service](https://versile.com/doc/vjava/current/org/versile/orb/service/package-summary.html), and [connecting](https://versile.com/doc/vjava/current/org/versile/orb/url/package-summary.html) to a service.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-26T10:18:11.543

If you want to learn something new then I'd look at OpenSplice. The reason is pretty simple, among the technologies suggested above is the only one that provides you with Data-Centric abstractions.

The cool thing about OpenSplice is that gives you the abstraction of a Global Data Space, yet the implementation of this global data space is fully distributed and very high performance.

Take a look at some of the slides available at [http://www.slideshare.net/angelo.corsaro](http://www.slideshare.net/angelo.corsaro) and I am sure you'll get in love with the technology.

Finally OpenSplice is Open Source.

Happy Hacking.

A+

# silverlight-4.0 - 在 Silverlight 页面的 XamMenu 中的标题文本右侧显示图像

> ID：14273489
> 
> 赞同：0
> 
> 时间：2013-01-11T07:20:39.150
> 
> 标签：silverlight-4.0, infragistics, xamgrid

我在silverlight 页面中创建了一个XamMenu。它包含 4 个选项。第一项的标题是“订单”。我正在使用 xamMenuItem.icon 在标题文本的右侧添加图像。但它总是出现在标题文本的左侧。我怎样才能做到这一点？请帮忙。

我的 xaml 代码 id 是这样的：

```
<ig:XamMenu x:Name="xamOrderMenu" Height="22" Width="120" ExpandOnHover="True" Canvas.Left="361" Canvas.Top="10">
                   <ig:XamMenuItem Header="Order" SubmenuPreferredLocation="Bottom"  Background="LightGray" FontWeight="Bold" Cursor="Hand">      
                        <ig:XamMenuItem.Icon>
                            <Image Source="/Asset.View;component/Images/downarrow.PNG"/>
                        </ig:XamMenuItem.Icon>
                        <ig:XamMenuItem Header="Order1" StaysOpenOnClick="True" Background="LightGray" Click="ExportToExcel_Click" Cursor="Hand"/>
                        <ig:XamMenuItem Header="Order2" Background="LightGray" Click="DownloadFundCountTemplate_Click" Cursor="Hand"/>
                        <ig:XamMenuItem Header="Order3" Background="LightGray" Click="UploadTemplate_Click" Cursor="Hand"/>
                        <ig:XamMenuItem Header="Order4" Background="LightGray" Click="SearchAndExportToExcel_Click" Cursor="Hand"/>
                    </ig:XamMenuItem> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:03:51.460

您将需要重新模板 XamMenuItem 以将图标放置在不同的位置。在默认模板中，XamMenuItem 分为 3 列。图标放置在最左侧的列中，标题文本位于中心，子指示符位于最右侧的列中。

如果您安装了 Infragistics 产品，则可以访问默认模板。你可以在这里找到它：C:\Program Files (x86)\Infragistics\NetAdvantage（发行版本#）\Silverlight\DefaultStyles\XamMenu

打开 generic.xaml 文件并搜索 XamMenuItem，首先出现的应该是它的样式。模板可以在那里找到。将此样式及其依赖项添加到您的项目中，然后进行必要的调整以将图标放置在标题文本的右侧。然后，您可以将此样式分配给您的 XamMenuItems。

# rad - RAD 将应用程序发布到 IHS 和 WAS

> ID：14273490
> 
> 赞同：1
> 
> 时间：2013-01-11T07:20:39.693
> 
> 标签：rad, websphere-7, ibmhttpserver

我们正在使用 RAD 开发一个将在 WAS 7.0 上运行的动态 Web 项目。我们已在 RAD 中配置 WAS 7.0 以直接从 RAD 运行应用程序。我们还有一个 Web 服务器设置，我们需要从 Web 服务器提供动态 Web 项目中的静态文件。

不幸的是，当我们从 RAD 运行应用程序时，它不会在 web 服务器的 plugin.xml 文件中添加信息。因此，我们`<WebApplication_Name>/Manage Modules`在 WAS 管理控制台的部分中检查了这一点。我们也无法在那里指定 Web 服务器目标。

我们可以做些什么来告诉 RAD 将应用程序同时发布到 WAS 和 IHS？你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:48:46.363

I am afraid this cannot be done using the RAD IDE out-of-the-box, as it just publishes your appication to WAS.

A solution to this would be to build and publish the application using a tool like **Ant** and place in your build script an extra step to appropriately change the plugin-cfg file.

# xpages - 重定向到不同数据库后如何获取 URL 历史记录？

> ID：14273493
> 
> 赞同：0
> 
> 时间：2013-01-11T07:21:04.310
> 
> 标签：xpages

我在 xpage 上有一个 viewPanel，它链接到不同数据库中的文档。我可以单击链接打开文档。提交文档后，我想将 url 重定向到以前的 viewPanel。现在的问题是我无法再次打开 viewPanel 并且 url history(context.getHistoryUrl) 是空白的，用于重定向到不同的数据库。有关如何获取 URL 历史记录的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:48:28.940

如果您正在执行 context.redirecttopage 来重定向用户，您可以更改此代码，以便在更新完成时执行 oncomplete 并将客户端重定向到正确的 url。要计算正确的网址，您可以使用您在我的评论答案中给出的代码。

更多信息在这里： http://xpag.es/? [192E](http://xpag.es/?192E)

# javascript - JavaScript setInterval 相关问题

> ID：14273497
> 
> 赞同：2
> 
> 时间：2013-01-11T07:21:26.950
> 
> 标签：javascript, setinterval

我有两个与 JavaScript`setInterval()`方法有关的问题。我还没有找到与这些问题相关的任何实际案例（但我想这也不是不可能的），但出于好奇，我想问这些问题。

1.) 如果要执行的代码`setInterval()`花费的时间超过提供的时间间隔，会发生什么？上一个执行是否停止并且当前执行是否开始执行，或者两者都将并行运行。

2.）如果整个系统（OS）在`setInterval()`被调用的时间间隔之间挂起怎么办？在这种情况下，代码是否有可能以不同的时间间隔执行？我的意思是`setInterval()`保证代码只会在指定的时间间隔内执行吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T07:27:48.193

1.  JavaScript 使用单线程执行。`setTimeout`和之类的函数`setInterval`使许多人相信 JavaScript 中的多线程是可能的。实际上，`setInterval`只需`setTimeout`安排一个函数或表达式在指定时间执行，然后将这些函数添加到同一个单线程堆栈中。`setTimeout`如果当 a or被调度触发时浏览器正在处理其他事情`setInterval`，调度的函数将在浏览器可以访问它时立即执行。

2.  `setInterval`不保证函数只会在指定的时间间隔内执行。`setInterval`将尝试在指定时间执行一个函数，但任何数量的事情都可能延迟执行或完全阻止它执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:28:35.047

引用John Resing 的[这篇文章](http://ejohn.org/blog/how-javascript-timers-work/)：

> 如果计时器被阻止立即执行，它将被延迟到下一个可能的执行点（这将比所需的延迟更长）。
> 
> 如果间隔需要足够长的时间来执行（比指定的延迟时间长），则间隔可以无延迟地连续执行。

# ios - 故事板中的 UINavigationBar

> ID：14273500
> 
> 赞同：0
> 
> 时间：2013-01-11T07:21:37.120
> 
> 标签：ios, objective-c, xcode, uinavigationbar

我刚刚继承了一个完全在 Storyboards 中制作的项目。在segues之后，我必须解决一些间距和艺术资产管理不善的问题，而且我在处理某些组件时遇到了麻烦。

我的问题是：该应用程序基于`UINavigationController`层次结构，并且主屏幕不需要 a `UINavigationBar`（并且它在首次加载时与图像的间距有关）。

项目需要与 iOS 5.1 兼容（因此没有自动布局或仅 iOS 6 的功能）。

我需要隐藏`UINavigationBar`应用程序的启动时间。

通过执行以下操作，我可以在应用程序加载后将其“关闭”：

```
- (void)viewWillAppear:(BOOL)animated {

    /* Hide UINavigationBar for iPhone until a segue is performed*/

    [self.navigationController setToolbarHidden:YES animated:YES];

} 
```

即使改变也会`animated:NO`产生相同的结果。

作为一个快速纲要，我已经在`viewWillAppear`,`viewDidLoad`和`viewDidAppear`.

由于在视图加载**后**它会关闭，我认为调用隐藏 appDelegate`didFinishLaunchingWithOptions`方法中的 NavigationBar 可以解决问题，但由于 StoryBoard 的原因，我不确定如何在 App Delegate 中访问 Storyboard 的导航控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:27:07.030

我可能在这里叫错了树，但你不能通过故事板来设置它吗？在“Simulated Metrics”下，您可以为每个单独的 viewController 定义 TopBar，只需将主屏幕的 viewController 设置为“None”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:40:32.807

将导航栏从屏幕上移开怎么样？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:24:34.667

我删除了以编程方式推送到情节提要 中初始位置`UINavigationController`之后的初始 NavigationController。`ViewController`

这是更长的方法（4个多小时前），但最终为我工作。

感谢您的输入。

# android - 共享位图图像

> ID：14273501
> 
> 赞同：1
> 
> 时间：2013-01-11T07:21:38.523
> 
> 标签：android

在我的应用程序中，我想从文件夹中获取加密图像并将其显示在画廊中，当我单击要发送解密图像的图像时，我正在使用共享图像的代码。

```
 boolean share = false;

     share = true;

     if (share) 
     {
         try 
         {
             List<String> FileList = tFileList;
             Intent sendIntent  = new Intent(Intent.ACTION_SEND);
             sendIntent.setType("*/*");
             sendIntent.setClassName("com.android.mms", "com.android.mms.ui.ComposeMessageActivity");
             System.out.println("Global Position"+globalPosition);
             final File file1 = new File(FileList.get(globalPosition).toString());

             Uri uri = Uri.fromFile(file1);
             Log.e("Path", "" + uri);
             sendIntent.putExtra(Intent.EXTRA_STREAM, uri);
             startActivity(Intent.createChooser(sendIntent, ""));
             share = true;

         } catch (Exception e) 
         {
              share = false;
         }

     }
     else
     {
         share = false;
         Log.e("Path", "File Error");
     }
    return share; 
```

1.  此代码的问题在于它从 sd 卡中的位置发送实际的加密图像。
2.  我想发送存储在名为 globalBitmap 的位图中的数据。

# c# - 使用 JavaScript 将图像加载到图像控件

> ID：14273503
> 
> 赞同：0
> 
> 时间：2013-01-11T07:21:41.583
> 
> 标签：c#, javascript, asp.net, visual-studio-2010

现在我需要将显示图像更改为图像控件。帮我？

```
var imlocation1 = "Bhopal/";
var currentdate1 = 0;
var image_number1 = 0;
function ImageArray1(n) {
 this.length = n;
                   for (var i = 1; i <= n; i++) {
                       this[i] = ' '
                   }
               }
               image1 = new ImageArray1(3)
               image1[0] = '2.jpg'
               image1[1] = '4.jpg'
               image1[2] = '1.jpg'
               var rand1 = 100/ image1.length
               function randomimage1() {
                   currentdate1 = new Date()
                   image_number1 = currentdate1.getSeconds()
                   image_number1 = Math.floor(image_number1 / rand1)
                   return (image1[image_number1])
               }
               document.write("<img src='" + imlocation1 + randomimage1() + "'>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:33:23.390

“Img”元素具有指向服务器上图像的“src”属性。因此，您需要找到“img”元素，如果找到则设置 src 属性。

整个问题的基本搜索[http://www.bing.com/search?q=I+Load+an+Image+to+an+Image+Control+using+JavaScript&src=IE-SearchBox&FORM=IE8SRC](http://www.bing.com/search?q=I+Load+an+Image+to+an+Image+Control+using+JavaScript&src=IE-SearchBox&FORM=IE8SRC)给出以下链接：[http： //www.javascriptexamples.org/2011/01/18/how-to-dynamically-load-an-image-using-javascript/](http://www.javascriptexamples.org/2011/01/18/how-to-dynamically-load-an-image-using-javascript/)

来自上面链接的示例：

```
 <div id="imageContainer"></div>

var img = document.createElement("img");
img.onload = function(e) {
    var container = document.getElementById("imageContainer");
    container.appendChild(e.target);
}
img.setAttribute("src","images/puppy.jpg"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:30:51.083

控件的想法只存在于服务器端。在这种情况下，Javascript 仅在客户端、浏览器上运行。一旦服务器呈现图像控件，您最终会在客户端获得一个 IMG 标记。如果你用 ID 或 CSS 类标记它，你可以用 Javascript（或者更好的库，如 JQuery）找到它，并用它加载图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T07:27:59.247

```
$("#YourImageId").attr("src", "ImagePath") 
```

If you use webforms - probably

```
$("#<%=YourImageServerId.ClientID%>") 
```

If it doesn't help - post some code or some more info to your question

# c# - 如何定期制作动画？

> ID：14273506
> 
> 赞同：2
> 
> 时间：2013-01-11T07:21:57.993
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我有一个故事板，它可以让分针滑动 6 度。现在我希望分针永远每 59 秒滑动一次。是否有情节提要的任何属性或我可以做到的任何其他方式？

我的故事板

```
<Storyboard
                                    x:Name="myStoryboard2">
                                    <DoubleAnimation
                                        x:Name="minuteAnimation"
                                        Storyboard.TargetName="minHandTransform"
                                        Storyboard.TargetProperty="Angle"
                                        Duration="0:0:1"
                                        From="{Binding Time, Converter={StaticResource minuteHandTransform}}"
                                        To="{Binding Time, Converter={StaticResource minuteHandTransform}}"
                                        RepeatBehavior="1x">
                                        <DoubleAnimation.EasingFunction>
                                            <SineEase
                                                EasingMode="EaseOut" />
                                        </DoubleAnimation.EasingFunction>
                                    </DoubleAnimation>
                                </Storyboard> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:35:48.213

尝试以下操作：

```
<Storyboard
                                x:Name="myStoryboard2">
                                <DoubleAnimation
                                    x:Name="minuteAnimation"
                                    Storyboard.TargetName="minHandTransform"
                                    Storyboard.TargetProperty="Angle"
                                    Duration="0:0:59"
                                    From="{Binding Time, Converter={StaticResource minuteHandTransform}}"
                                    To="{Binding Time, Converter={StaticResource minuteHandTransform}}"
                                    RepeatBehavior="Forever">
                                    <DoubleAnimation.EasingFunction>
                                        <SineEase
                                            EasingMode="EaseOut" />
                                    </DoubleAnimation.EasingFunction>
                                </DoubleAnimation>
                            </Storyboard> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T20:25:21.257

这听起来不像是您想要依靠动画来管理的东西。只需管理从每分钟背后的代码开始动画，您就完成了。这样做比使用神秘的转换器来控制 From/To 值要容易得多。诸如 DoubleAnimation 之类的时间轴具有 BeginTime 属性，但我已经看到并验证了长动画持续时间（如 1 分钟或以上）在 WinRT 中遇到错误的报告。

编辑*（代码示例）

我通常用来按时间间隔触发事件的两种简单方法是使用带有回调事件的 DispatcherTimer 或异步循环。

1.调度器定时器

```
var timer = new DispatcherTimer { Interval = TimeSpane.FromSeconds(1) };
timer.Tick += (s, e) => { /* do your stuff */ };
timer.Start(); 
```

2.异步循环

```
RunMyLoop();

private async void RunMyLoop()
{
    while (true)
    {
        /* do your stuff */
        await Task.Delay(1000);
    }
} 
```

# ios - 当我的设备上运行其他应用程序（2 个或更多应用程序）时，ImagePickerController 使我的应用程序崩溃并显示“收到内存警告”

> ID：14273508
> 
> 赞同：1
> 
> 时间：2013-01-11T07:21:58.187
> 
> 标签：ios, objective-c, automatic-ref-counting, low-memory

当我从相机 ( )`Received Memory Warning`拍照时，我的应用程序崩溃并显示“ ”。`UIImagePickerController`

**当我遇到崩溃时的场景**：如果我的设备上正在运行其他应用程序（2 个或更多），我会遇到崩溃，并且如果在我启动我的应用程序之前只有一个其他应用程序正在运行或没有其他应用程序在运行，那么就没有崩溃了。

仅当我从相机中拍照时才会发生此崩溃，但是当我从照片库中选择图片时根本没有崩溃。

**我正在使用 Xcode 4.3.2 并且正在使用 ARC**。

谁可以帮我这个事？

这是我正在使用的代码

```
-(void)actionSheet:(UIActionSheet *)actionSheet didDismissWithButtonIndex: (NSInteger)buttonIndex 
{

    if (buttonIndex < 2) 
    {
        if([UIImagePickerController isSourceTypeAvailable:buttonIndex==0?UIImagePickerControllerSourceTypeCamera:UIImagePickerControllerSourceTypePhotoLibrary])
        {
            UIImagePickerController *ipc = [[UIImagePickerController alloc] init];
            [ipc setDelegate:(id<UIImagePickerControllerDelegate,UINavigationControllerDelegate>) self];
            [ipc setSourceType:buttonIndex==0?UIImagePickerControllerSourceTypeCamera:UIImagePickerControllerSourceTypePhotoLibrary];
            if (buttonIndex == 0) 
            {
                [ipc setAllowsEditing:NO];
            }
            [ipc setMediaTypes:[NSArray arrayWithObjects:(NSString *)kUTTypeImage, nil]];
            [self presentModalViewController:ipc animated:YES];
        }
        else 
        {
            UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@"Action Alert" message:@"Camera is not available in this device." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [alert show];
        }
    }
}

    -(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
    {

        [self dismissModalViewControllerAnimated:YES];
        UIImage *image = [info objectForKey:UIImagePickerControllerEditedImage];
        if (!image) image = [info objectForKey:UIImagePickerControllerOriginalImage];
        [NSThread detachNewThreadSelector:@selector(scallImage:) toTarget:self withObject:image];
}

 -(void) scallImage:(UIImage *) image
    {
    CGSize newSize = CGSizeMake(320, 480);
    UIGraphicsBeginImageContext(newSize);
    [image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
    image=nil;
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    NSString *cImage = [UIImageJPEGRepresentation(newImage, 0.5) base64EncodedString];
    [ImageButton setBackgroundImage:newImage forState:UIControlStateNormal];
    [ImageButton setHidden:NO];
    //[profileImageButton setBackgroundImage:newImage forState:UIControlStateNormal];
    newImage=nil;
} 
```

我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:59:47.273

尝试避免在该方法中分配 UIImagePickerController。而是在 viewDidLoad 中分配它。将这行代码放在 viewDidLoad 中：

```
 ipc = [[UIImagePickerController alloc] init]; 
```

并在 .h 文件中首先声明它。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-17T17:53:49.000

我终于意识到，通过从项目中删除一些不需要的图像/资源，我能够运行我的应用程序而不会崩溃......！！！感谢所有帮助过我的人！

# javascript - GWT 应用程序中使用的 Javascript 通用 clone() 方法

> ID：14273509
> 
> 赞同：5
> 
> 时间：2013-01-11T07:22:04.810
> 
> 标签：javascript, gwt, jsni, gwt-2.5

我正在尝试编写一个应该能够进行真正深度克隆的通用克隆函数。我遇到了这个链接，[How to Deep clone in javascript](https://stackoverflow.com/questions/4459928/how-to-deep-clone-in-javascript)并从那里获取了函数。

当我尝试使用直接 Javascript 时，该代码运行良好。我对代码做了一些小的修改，并尝试将 JSNI 代码放入 GWT。

克隆功能：

```
deepCopy = function(item)
{
    if (!item) {
        return item;
    } // null, undefined values check

    var types = [ Number, String, Boolean ], result;

    // normalizing primitives if someone did new String('aaa'), or new Number('444');
    types.forEach(function(type) {
        if (item instanceof type) {
            result = type(item);
        }
    });

    if (typeof result == "undefined") {
        alert(Object.prototype.toString.call(item));
        alert(item);
        alert(typeof item);
        if (Object.prototype.toString.call(item) === "[object GWTJavaObject]") {
            alert('1st');
            result = [];
            alert('2nd');
            item.forEach(function(child, index, array) {//exception thrown here
                alert('inside for each');
                result[index] = deepCopy(child);
            });
        } else if (typeof item == "GWTJavaObject") {
            alert('3rd');

            if (item.nodeType && typeof item.cloneNode == "function") {
                var result = item.cloneNode(true);
            } else if (!item.prototype) { 
                result = {};
                for ( var i in item) {
                    result[i] = deepCopy(item[i]);
                }
            } else {
                if (false && item.constructor) {
                    result = new item.constructor();
                } else {
                    result = item;
                }
            }
        } else {
            alert('4th');
            result = item;
        }
    }

    return result;
} 
```

传递给这个函数的列表是这样的：

```
List<Integer> list = new ArrayList<Integer>();
        list.add( new Integer( 100 ) );
        list.add( new Integer( 200 ) );
        list.add( new Integer( 300 ) );

        List<Integer> newList = ( List<Integer> ) new Attempt().clone( list );

        Integer temp = new Integer( 500 );
        list.add( temp );

        if ( newList.contains( temp ) )
            Window.alert( "fail" );
        else
            Window.alert( "success" ); 
```

`alert("2nd")`但是，当我执行此操作时，我在行后立即在克隆函数中得到空指针异常。

请帮忙。

PS：我想在这里获得一个通用的克隆方法，可以用来克隆任何对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:59:27.063

GWT 原型对象没有 forEach 方法；它们不继承标准的 javascript 对象原型，因为它们应该像 java 对象，而不是 javascript 对象。

您可能会摆脱 Object.prototype.forEach.call(item, function(){})

# python - 加载 https json 文件时 Ubuntu 中的 urllib2 python 异常

> ID：14273510
> 
> 赞同：0
> 
> 时间：2013-01-11T07:22:04.987
> 
> 标签：python, django, urllib2, urlopen

我正在尝试加载一个 json 文件，但它抛出了一个异常：

```
<urlopen error [Errno 104] Connection reset by peer> 
```

这是我的代码（我在 shell 上执行它以进行测试/调试）：

```
>>> import urllib2
>>> uri = 'https://api.mercadolibre.com/sites/MLA/search?q=camisas%20columbia'
>>> req = urllib2.Request(uri)
>>> resp = urllib2.urlopen(req)
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/opt/bitnami/python/lib/python2.7/urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "/opt/bitnami/python/lib/python2.7/urllib2.py", line 400, in open
    response = self._open(req, data)
  File "/opt/bitnami/python/lib/python2.7/urllib2.py", line 418, in _open
    '_open', req)
  File "/opt/bitnami/python/lib/python2.7/urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "/opt/bitnami/python/lib/python2.7/urllib2.py", line 1215, in https_open
    return self.do_open(httplib.HTTPSConnection, req)
  File "/opt/bitnami/python/lib/python2.7/urllib2.py", line 1177, in do_open
    raise URLError(err)
URLError: <urlopen error [Errno 104] Connection reset by peer> 
```

我正在使用在 VMWare 上虚拟化的 Ubuntu 12.04（64 位）Bitnami 的 Django Stack 1.4.3-0。

但是，我很好奇，并在我的主机（Windows 7 64 位）上尝试了相同的代码，我也安装了**相同版本**的 python，猜猜是什么......它完美地工作。

这是窗口输出：

```
C:\Users\Kevin>python
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import urllib2
>>> uri = "https://api.mercadolibre.com/sites/MLA/search?q=camisas%20columbia"
>>> req = urllib2.Request(uri)
>>> resp = urllib2.urlopen(req)
>>> resp.read()
'{"site_id":"MLA","query":"camisas columbia","paging":    {"total":43,"offset":0,"limit":50},"results":    [{"id":"MLA445360462","site_id":"MLA","title":"Ca
misa Columbia Silver Rider Hombre Tecnolog\xc3\xadas De Omni-dry" [...] 
```

如何在 Ubuntu 中解决此问题？我尝试更改请求中的用户代理和内容，但结果在 Ubuntu 上始终相同。

还尝试手动复制 json 文件并将其上传到保管箱并运行与上述相同的代码，但使用保管箱 url 并且它在两个系统上都可以完美运行。

希望你们能帮助我，这让我发疯了，我的整个项目都依赖于那个该死的 api :(

在此先感谢，并为我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:38:37.770

我找到了问题的根源：

[https://bugs.launchpad.net/ubuntu/+source/openssl/+bug/965371](https://bugs.launchpad.net/ubuntu/+source/openssl/+bug/965371)

# javascript - 如何在周末使用 javascript 更改图片？

> ID：14273514
> 
> 赞同：1
> 
> 时间：2013-01-11T07:22:22.627
> 
> 标签：javascript, html, date, getelementbyid

当聊天可用时，我想在我们的网站上显示。问题是它不会在周末开放。我如何排除它们？可以做到吗？

```
<html>
<body>
<script type="text/javascript">
function chatonoff(){
var now = new Date();
var hour = now.getHours();

if (hour >=9 && hour <=18)
{
document.getElementById("chat").src = "/bilder/butik/chat-open.png";
}
}
</script>
<img id="chat" src="/bilder/butik/chat.png" onload="chatonoff()">

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:28:25.017

你可以这样做

```
function chatonoff(){
    var now = new Date();
    var hour = now.getHours();
    var day = now.getDay();

    //Check if weekend : in this case, I assume that saturday == 6 and Sunday = 0
    //It depends on your location / timezone
    if(day != 6 && day != 0)
    {
        if (hour >=9 && hour <=18)
        {
            document.getElementById("chat").src = "/bilder/butik/chat-open.png";
        }
    }
} 
```

**编辑**

关于排除节假日：

您应该创建一个包含所有关闭日期的数组。然后，检查当前日期是否存在于数组中

```
 var offDaysListArray = ['2013-01-01','2013-01-02'];

  var now = new Date();
  var y = now .getFullYear();
  var d = (now .getDate() < 10) ? '0'+now .getDate() : now .getDate();
  var m = ((now .getMonth()+1) < 10) ? '0'+(now .getMonth()+1) : (now .getMonth()+1);

  //Check if it is a closed day
  if(offDaysListArray.indexOf(y + '-' + m + '-' + d) != -1)    
      return false; //It is a close day 
```

注意`indexOf`，像IE8这样的旧浏览器没有实现这个功能。检查[为什么 indexOf 在数组 IE8 上不起作用？](https://stackoverflow.com/questions/3629183/why-doesnt-indexof-work-on-an-array-ie8)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T07:29:54.840

这是一个非常简单的答案，尽管由于 JavaScript 在客户端运行，它不会完全按照您的意愿工作。

这意味着世界另一端的人将能够在他的星期五看到你的聊天，即使它是你的星期六（星期天/星期一的例子也适用于此）。理想情况下，您可以使用一些服务器端语言（例如 Java/.NET/PHP 或您正在使用的任何语言）来解决这个问题。

这是您的快速 JavaScript 修复：

```
 <html>
    <body>
        <script type="text/javascript">
        function chatonoff(){
            var now = new Date();
            var hour = now.getHours();
            var day = now.getDay();
            if (hour >=9 && hour <=18 && day >= 1 && day <= 5)
            {
                document.getElementById("chat").src = "/bilder/butik/chat-open.png";
            }
        }
        </script>
        <img id="chat" src="/bilder/butik/chat.png" onload="chatonoff()">
    </body>
    </html> 
```

# android - ActionBarSherlock 不确定进度指示器不会在模拟器中消失

> ID：14273515
> 
> 赞同：4
> 
> 时间：2013-01-11T07:22:24.687
> 
> 标签：android, progress-bar, actionbarsherlock, android-progressbar

我希望我的应用与 Android 2.1 兼容。在我的手机（HTC One X，Android 4+）上一切正常，但在模拟器（2.1）中，不确定的进度条不会消失。

我请求创建我的活动并开始加载任务的功能：

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstance);
    requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);

    new LoadDataTask().execute();
} 
```

在我的加载任务的 pre-和 postExecute 中，进度条显示/隐藏：

```
private class LoadDataTask extends AsyncTask<Void, Void, Void>
{
    @Override
    protected void onPreExecute()
    {
        setProgressBarIndeterminateVisibility(true);
    }

    @Override
    protected void onPostExecute(Void result)
    {
        setProgressBarIndeterminateVisibility(false);
    }
} 
```

这在我的手机上运行良好，但模拟器只会显示进度条，从不隐藏它。

我在这里使用错误的方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T08:58:50.210

使用正确的 ActionBarSherlock 方法来显示和隐藏进度。

```
setSupportProgressBarIndeterminateVisibility(visible); 
```

代替

```
setProgressBarIndeterminateVisibility(visible); 
```

# linux - 替换模式 *

> ID：14273522
> 
> 赞同：0
> 
> 时间：2013-01-11T07:22:59.673
> 
> 标签：linux, sed, awk, tr

`*`如果行以“ `LOADS*`”开头并且该行的最后一个字符不是“ ”，我正在尝试在位置 72 添加一个“ ”字符，`*`并且还在第 1 列添加一个带有“ `*`”字符的新行。

**输入**

```
LOAD*   720010013       1.5             1.0300          710010013
LOAD*   730010013       1.5             1.0300          710010013       *
*       10.73           1000001
LOAD*   720010014       1.5             1.0300          710010014       *
*
LOAD*   730010014       1.5             1.0300          710010014       *
*       10.73           1000001
LOAD        10013       1.5             1.0300              10013 
```

**输出**

```
LOAD*   720010013       1.5             1.0300          710010013       *
*
LOAD*   730010013       1.5             1.0300          710010013       *
*       10.73           1000001
LOAD*   720010014       1.5             1.0300          710010014       *
*
LOAD*   730010014       1.5             1.0300          710010014       *
*       10.73           1000001
LOAD        10013       1.5             1.0300              10013 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:38:59.280

单程：

```
awk '/^LOAD\*/{if (substr($0,73,1)!="*"){x=sprintf("%-72s%c",substr($0,0,72), "*"); $0=x "\n*";}}1' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:49:45.727

这可能对您有用（GNU sed）：

```
sed '/^LOAD\*.*[^*]$/!b;:a;/.\{72\}/!s/$/ /;ta;s/\(.\{72\}\).*/\1*\n*/' file 
```

注意使用您的测试数据，`*`在第 73 列似乎需要。

# selenium - Selenium+PHPUnit：在waitForElementPresent中设置最大等待时间

> ID：14273523
> 
> 赞同：1
> 
> 时间：2013-01-11T07:23:02.763
> 
> 标签：selenium, phpunit

我使用 Selenium 和 PHPUnit。在我的测试用例中，我使用

```
PHPUnit_Extensions_SeleniumTestCase::waitForElementPresent($xpath); 
```

等待一段时间，直到指定的元素`$xpath`出现。有什么办法可以改变最长等待时间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:20:13.063

`waitForElementPresent()`有*两个*参数。第一个是*定位器*，另一个是**超时（以毫秒**为单位） 。

例子 ：

```
waitForElementPresent("Your xpath","80000"). 
```

这将等待给定的 xpath 80 秒。

# iphone - 如何获取 MONTH 的第一个日期，以及传入日期的 YEAR 的第一个日期。在 iPhone 目标 c

> ID：14273524
> 
> 赞同：-2
> 
> 时间：2013-01-11T07:23:02.407
> 
> 标签：iphone, objective-c, nsdate, nscalendar, nsdatecomponents

> **可能重复：**
> [如何使用 iPhone 中的当前日期（今天）获取本周、本月、今年的所有日期/日期](https://stackoverflow.com/questions/14272489/how-to-get-all-the-days-dates-in-current-week-this-month-this-year-using-the-c)

我需要得到一个月的第一天，一年的第一天的日期

（大多数时候输入日期是当前日期`[NSDate date]`）

你能建议如何获得它吗？

EG**今天当前日期**=***`3-MAY-2015`***

所需输出如下：

**First_Date_month** =***`1-MAY-2015`***

**First_Date_year** =***`1-JAN-2015`***

在此先感谢您的时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T07:30:08.583

您可以使用 NSDateComponents 找到日期月份和年份，并且可以根据需要制作 NSDate

```
NSDateComponents *components = [calendar components:units fromDate:[NSDate date]];
[components setDay:1];
self.currentDate = [calendar dateFromComponents:components];
int m = components.month;
int y = components.year;
int d = components.day;

NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"yyyy MM dd"];
NSDate *firstDateOfMonth = [df dateFromString:[NSString stringWithFormat:@"%@ %@ 01",y,m]];
NSDate *firstDateOfYear = [df dateFromString:[NSString stringWithFormat:@"%@ 01 01",y]]; 
```

# git - 如何按 rc-XYZW 形式的版本字符串顺序对 git 标签进行排序？

> ID：14273531
> 
> 赞同：142
> 
> 时间：2013-01-11T07:23:44.347
> 
> 标签：git, sorting, tags

当我输入命令时：

```
git tag -l 
```

我得到这样的结果：

```
rc-0.9.0.0
rc-0.9.0.1
rc-0.9.0.10
rc-0.9.0.11
rc-0.9.0.12
rc-0.9.0.2
rc-0.9.0.3
rc-0.9.0.4
rc-0.9.0.5
rc-0.9.0.6
rc-0.9.0.7
rc-0.9.0.8
rc-0.9.0.9 
```

而不是这个，我想要：

```
rc-0.9.0.0
rc-0.9.0.1
rc-0.9.0.2
rc-0.9.0.3
rc-0.9.0.4
rc-0.9.0.5
rc-0.9.0.6
rc-0.9.0.7
rc-0.9.0.8
rc-0.9.0.9
rc-0.9.0.10
rc-0.9.0.11
rc-0.9.0.12 
```

如何对当前列表进行排序以获得这样的结果？

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2013-01-11T07:29:11.243

使用版本排序

```
git tag -l | sort -V 
```

或者对于 git 版本 >= 2.0

```
git tag -l --sort=v:refname
git tag -l --sort=-v:refname # reverse 
```

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2014-03-25T12:29:12.093

使用 Git 2.0（2014 年 6 月），您将能够指定排序顺序！

请参阅[提交 b6de0c6](https://github.com/git/git/commit/b6de0c633e60424d8d7e31a6557854683f2e4e43)，来自[提交 9ef176b](https://github.com/git/git/commit/9ef176b55c373ba087b2d84e77b5713578891927)，由[Nguyễn Thái Ngọc Duy ( `pclouds`)](https://github.com/pclouds)撰写：

```
 --sort=<type> 
```

> **按特定顺序排序**。
> 支持的类型是：
> 
> *   " `refname`" (字典顺序),
> *   “ `version:refname`”或“ `v:refname`”（标签名称被视为版本）。
> 
> 前置“ `-`”以反转排序顺序。

* * *

所以，如果你有：

```
git tag foo1.3 &&
git tag foo1.6 &&
git tag foo1.10 
```

这是你会得到的：

```
# lexical sort
git tag -l --sort=refname "foo*"
foo1.10
foo1.3
foo1.6

# version sort
git tag -l --sort=version:refname "foo*"
foo1.3
foo1.6
foo1.10

# reverse version sort
git tag -l --sort=-version:refname "foo*"
foo1.10
foo1.6
foo1.3

# reverse lexical sort
git tag -l --sort=-refname "foo*"
foo1.6
foo1.3
foo1.10 
```

* * *

自[提交 b150794](https://github.com/git/git/commit/b150794dafb0a7a1c5caba6fdf7d517a1a15cb59)（Jacob Keller，git 2.1.0，2014 年 8 月）以来，您可以指定默认顺序：

```
tag.sort 
```

> 此变量控制标签在显示时的排序顺序[`git-tag`](http://git-scm.com/docs/git-tag)。
> 如果没有`--sort=<value>`提供 " " 选项，此变量的值将用作默认值。

[罗宾斯特](https://stackoverflow.com/users/305973/robinst) [评论](https://stackoverflow.com/questions/14273531/how-to-sort-git-tags/22634649?noredirect=1#comment39746402_22634649)：

> 现在可以将版本排序顺序（Git 2.1+）配置为默认值：

```
git config --global tag.sort version:refname 
```

正如[Leo Galleguillos](https://stackoverflow.com/users/3195596/leo-galleguillos)在[评论](https://stackoverflow.com/questions/14273531/how-to-sort-git-tags-by-version-string-order-of-form-rc-x-y-z-w/22634649#comment109673763_22634649)中指出的那样：

> 要将 Git 配置为**首先显示最新标签**（**降序），只需****在 version 之前**添加一个连字符。
> 命令变为：
> 
> ```
> git config --global tag.sort -version:refname 
> ```

* * *

使用[Git 2.4 (Q2 2015)](https://github.com/git/git/commit/e80e85a52adfda053cafc3b23058a86aff35404f#diff-2dda503b6844ed42259098aa1d9db348R100)，**配置变量可用于指定****之前****的`versionsort.prerelease``v1.0-pre1``v1.0`**.

请参阅[Junio C Hamano (](https://github.com/gitster) [)](https://github.com/gitster)的[提交 f57610a](https://github.com/git/git/commit/f57610a1ff7a547d1e11e24f942b1703cea81f81)。[`gitster`](https://github.com/gitster)

^(注意（见下文）`versionsort.prereleaseSuffix`现在（2017 年）已弃用`versionsort.suffix`.)

* * *

git 2.7.1（2016 年 2 月）将提高`git tag`自身的输出。

请参阅[提交 0571979](https://github.com/git/git/commit/0571979bd60837d3c0802ecc1a47c48b4a6114d0)（2016 年 1 月 26 日）和[提交 1d094db](https://github.com/git/git/commit/1d094db936331abc42d859269181272a8539c7ae)（2016 年 1 月 24 日）由[Jeff King ( `peff`)](https://github.com/peff)。
^(（由[Junio C Hamano 合并 -- `gitster`--](https://github.com/gitster)在[8bad3de 提交中](https://github.com/git/git/commit/8bad3de2c8390d952308652493fb72f58820895e)，2016 年 2 月 1 日）)

> # `tag`：不要将模棱两可的标签名称显示为“ `tags/foo`”
> 
> 自[b7cc53e](https://github.com/git/git/commit/b7cc53e92c806b73e14b03f60c17b7c29e52b4a4) ( `tag.c`: use ' `ref-filter`' APIs, 2015-07-11) 以来，`git tag`已经开始将名称不明确的标签（即，当“ `heads/foo`”和“ `tags/foo`”都存在时）显示为“ `tags/foo`”，而不仅仅是“ `foo`”。
> 这是两者：
> 
> *   无意义; "" 的输出`git tag`包括 only `refs/tags`，所以我们知道 " `foo`" 表示" " 中的那个`refs/tags`。
> *   并且模棱两可；在原始输出中，我们知道“ `foo`”行意味着“ `refs/tags/foo`”存在。在新的输出中，不清楚我们是指“ `refs/tags/foo`”还是“ `refs/tags/tags/foo`”。
> 
> 发生这种情况的原因是提交 b7cc53e 切换`git tag`到使用 ref-filter 的“ `%(refname:short)`”输出格式，该格式改编自`for-each-ref`. 这个更通用的代码不知道我们只关心标签，并用于`shorten_unambiguous_ref`获取`short-name`.
> 我们需要告诉它我们只关心“ `refs/tags/`”，并且它应该相对于该值缩短。
> 
> 让我们为格式化语言添加一个新的修饰符“ **`strip`**”，以删除一组特定的前缀组件。
> 这修复了“ ”，并允许用户从他们自己的自定义格式（对于“ ”或“ ”）`git tag`调用相同的行为，同时让“ ”在所有地方都具有相同的一致含义。`tag``for-each-ref``:short`
> 
> 如果`strip=<N>`被附加，`<N>`则从 refname 的前面去除斜杠分隔的路径组件（例如，变成`%(refname:strip=2)`.必须是一个正整数。 如果显示的 ref 的组件少于，则命令中止并出现错误。`refs/tags/foo``foo`
> `<N>`
> `<N>`

对于`git tag`，当未指定时，默认为`%(refname:strip=2)`。

* * *

更新 Git 2.12（2017 年第一季度）

请参阅[SZEDER Gábor ( ) 的提交](https://github.com/szeder)[c026557](https://github.com/git/git/commit/c026557a37361b7019acca28f240a19f546739e9)、[提交 b178464](https://github.com/git/git/commit/b17846432da4f8530c7349561eac4a16f95bbd5b)、[提交 51acfa9](https://github.com/git/git/commit/51acfa9db588ddd8c3aff2acbc1a85ae7ac239f6)、[提交 b823166](https://github.com/git/git/commit/b8231660fa95f6e9e07b9e2483e254c2de045275)、[提交 109064a](https://github.com/git/git/commit/109064a0313c8a7c337f37936077ef3c9171d7ce)、[提交 0c1b487](https://github.com/git/git/commit/0c1b4878dec423a0d322bffc5607de584aab214e)、[提交 9ffda48](https://github.com/git/git/commit/9ffda48f53e086895975f2a435afff01c836dad2)、[提交 eba286e](https://github.com/git/git/commit/eba286e31012335370aedb7572ff51df549eb3f3)（2016 年 12 月 8 日[）](https://github.com/szeder)。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 1ac244d](https://github.com/git/git/commit/1ac244d5b20a9ea4a640e2ee80b9818f564aa237))^(中，2017 年 1 月 23 日）)[`szeder`](https://github.com/szeder)
^([`gitster`](https://github.com/gitster))

`versionsort.prereleaseSuffix`是不推荐使用的别名`versionsort.suffix`。

> “ ”`prereleaseSuffix`中使用的版本比较功能在`git tag -l`存在两个或多个相同版本的预发行版时不正确（例如，何时`2.0`、、`2.0-beta1`和`2.0-beta2` 存在并且代码需要比较`2.0-beta1`和`2.0-beta2`）。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-10-06T16:14:55.650

结合这里已有的答案：

## 本地存储库

```
git -c 'versionsort.suffix=-' tag --list --sort=-v:refname 
```

*   `suffix=-`将防止`2.0-rc`“之后”到来`2.0`
*   `--sort=-`会将最高版本号放在顶部。

## 远程存储库

```
git -c 'versionsort.suffix=-' ls-remote -t --exit-code --refs --sort=-v:refname "$repo_url" \
    | sed -E 's/^[[:xdigit:]]+[[:space:]]+refs\/tags\/(.+)/\1/g' 
```

这样做的好处是不会从远程下载任何对象。

有关更多信息，请参阅[此答案](https://stackoverflow.com/q/52661928/5353461)。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-06-18T10:21:56.560

根据这个[答案](https://stackoverflow.com/a/6091360/245945)`sort -V`，在Windows 和 OSX 等不支持的平台上，您可以使用

`git tag -l | sort -n -t. -k1,1 -k2,2 -k3,3 -k4,4`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-15T21:39:20.680

要使用该`sort -V`方法进行反向排序：

```
git tag -l | sort -V --reverse 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-09T17:09:56.890

调整[这个 perl 脚本](http://boinc.berkeley.edu/trac/wiki/VersionPathSorter)，它对看起来像的标签进行排序`client_release/7.2/7.2.25`，以适应您的特定标签方案。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-06-05T21:21:30.987

我最终编写了一个简单的 shell 脚本来简化这个任务。

```
#!/usr/bin/env bash

TAGS=$(git tag)
CODE=$?

if [ $CODE = 0 ]; then
    echo "$TAGS" | sort -V
fi

exit $CODE 
```

我将其保存`git-tags`在我的文件中`$PATH`，并`git tags`在需要列出标签时运行。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-08-07T09:05:25.490

**如果您在 Linux 上并使用 ZSH**；只需使用`gtl`命令。它应该为您预定义为别名。

> 别名代码：
> `gtl='gtl(){ git tag --sort=-v:refname -n -l "${1}*" }; noglob gtl'`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-11T06:52:08.467

尝试最后一个特殊甲酸盐的清单

`git tag -l --sort=refname | grep -E '^\d+\.\d+\.\d+.*' | tail -n 1`

或第一个

`git tag -l --sort=refname | grep -E '^\d+\.\d+\.\d+.*' | head -n 1`

# rest - REST 服务中的 ASP.NET 路由在 IIS 中不起作用

> ID：14273539
> 
> 赞同：1
> 
> 时间：2013-01-11T07:24:17.730
> 
> 标签：rest, routing, iis-7.5, http-status-code-404, asp.net-routing

我创建了一个启用路由的简单休息服务。当我在本地运行路由时，即使用 asp.net 开发服务器，路由工作正常。但是当我在 IIS（IIS 7.5）中部署应用程序并尝试访问服务中的方法时，我收到错误**HTTP 404.0 Not found**。这是我的代码：

```
[ServiceContract]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
public class HelloWorldService
{

    [WebGet(UriTemplate = "Date")]
    public DateTime Date()
    {
        return System.DateTime.Now;
    }

} 
```

全球.asax：

```
 protected void Application_Start(object sender, EventArgs e)
    {
        RegisterRoutes();
    }
    private void RegisterRoutes()
    {           
        RouteTable.Routes.Add(new ServiceRoute("ServiceData", new WebServiceHostFactory(), typeof(HelloWorldService)));
    } 
```

网络配置：

```
<configuration>
<system.web>
    <compilation debug="true" targetFramework="4.0" />
</system.web>

<system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
        <add name="UrlRoutingModule" type="System.Web.Routing.UrlRoutingModule, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    </modules>
</system.webServer>

<system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
    <standardEndpoints>
        <webHttpEndpoint>
            <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="true"/>
        </webHttpEndpoint>
    </standardEndpoints>
</system.serviceModel>

</configuration> 
```

我还在下启用了 HTTP 重定向功能

**Windows 功能 -> Internet 信息服务 -> 万维网服务 -> 通用 HTTP 功能**

我也尝试添加处理程序，如

```
<handlers>
  <add name="UrlRoutingHandler" preCondition="integratedMode" verb="*" path="UrlRouting.axd" type="System.Web.HttpForbiddenHandler, System.Web, 
       Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>
</handlers> 
```

我也尝试了网上建议的所有其他解决方案，但没有任何效果。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:38:38.140

您的 RegisterRoutes() 有问题。它应该是：

```
 private void RegisterRoutes()
    {
        // Edit the base address of Service1 by replacing the "Service1" string below
        RouteTable.Routes.Add(new ServiceRoute("HelloWorldService", new WebServiceHostFactory(), typeof(HelloWorldService)));
    } 
```

![在此处输入图像描述](../Images/7f7fbe84e854f47fafe56fbf13e9cb6e.png)

# extjs - 为什么替换默认图标后 TreePanel 中的节点不显示加载图标？

> ID：14273541
> 
> 赞同：1
> 
> 时间：2013-01-11T07:24:23.247
> 
> 标签：extjs, extjs4.1

我替换了 TreeStore 中树节点的默认图标：

```
 listeners: {
     append: function( oParentNode, oAppendedNode ) {
        oAppendedNode.set( 'icon', Ext.BLANK_IMAGE_URL );
     }
  } 
```

但是现在他们不再显示加载图标了。有什么简单的方法可以找回吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:58:30.513

似乎该`icon`属性一开始没有设置，新的会覆盖所有图标（文件夹、文件和加载），所以我构建了 2 个处理程序，它们在加载时删除该属性，然后再将其添加回来。

```
append: function( oParentNode, oAppendedNode ) {
  oAppendedNode.set( 'icon', Ext.BLANK_IMAGE_URL );

  oAppendedNode.on( 'beforeexpand', function() {
    oAppendedNode.set( 'icon', null );
  } );

  oAppendedNode.on( 'expand', function() {
    oAppendedNode.set( 'icon', Ext.BLANK_IMAGE_URL );
  } );
} 
```

# android - 没有命名空间的自定义 Android 属性

> ID：14273543
> 
> 赞同：1
> 
> 时间：2013-01-11T07:24:27.860
> 
> 标签：android

我正在制作自定义[LayoutInflater.Factory](http://developer.android.com/reference/android/view/LayoutInflater.Factory.html)并在 onCreateView() 方法中我想获取为当前视图指定的自定义属性。但是我不想为此属性声明样式。如果在这个视图的 xml 属性中指定了这个参数，我可以得到这个参数：如果它是在视图 `attrs.getAttributeValue(null, attributeName);`
的样式参数中指定的，我什至可以得到它使用： `context.obtainStyledAttributes(attrs, new int[]{R.attr.custom_attribute);`
但是，如果它在主题中指定，似乎不可能得到这个属性。任何帮助，将不胜感激。

这是我的xml资源：

```
<style name="CustomTheme"
       parent="android:Theme.DeviceDefault">
     <item name="android:textViewStyle">@style/TextView.Custom</item>
</style>

<style name="TextView.Custom">
    <item name="custom_attribute">"blabla"</item>
</style> 
```

PS 我知道我应该为自定义属性声明 slyleable 资源，如果我这样做，它会起作用，但我想确保否则不可能，因为使用这种方式更简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:17:43.543

原来你可以用这个得到它：

```
TypedValue value = new TypedValue();
theme.resolveAttribute(android.R.attr.textViewStyle, value, true);
typedArray = theme.obtainStyledAttributes(value.resourceId, new int[] {R.attr.custom_attribute}); 
```

# javascript - 影响行高的内联图像

> ID：14273544
> 
> 赞同：3
> 
> 时间：2013-01-11T07:24:31.457
> 
> 标签：javascript, image, inline, css

我有一个 div，我正在添加一个内嵌图像，问题是当图像大于行高时，它只会增加行高，而不是让图像越过文本。

这是我的代码：

```
<html>
  <body>
    <div style="height:130px; width:130px;">
      one two three four five 

<img src="http://ladyenews.files.wordpress.com/2011/03/smiley-emoticon.png" style="width: 20px; height: 20px; display:in-line;">

       six seven eight nine ten eleven twelve thirteen fourteen fifteen sixteen
    </div>
  </body>
</html> 
```

这里的例子：http: [//jsfiddle.net/dWkfq/1/](http://jsfiddle.net/dWkfq/1/)

 `那么如何在不增加行高的情况下将图像插入到 div 中，如果图像太大，我需要图像与文本重叠？

我在想也许以某种方式将图像放在另一个具有最大高度的 div 中，然后将溢出设置为可见或其他东西，但我担心答案会更难，并且涉及使用 javascript 进行绝对定位。

我绝对会自行定位图像，但文本可能会发生变化，因此我需要一个灵活的解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T07:29:34.207

代替

```
display:in-line; 
```

和

```
position:absolute; 
```

[http://jsfiddle.net/ENch9/](http://jsfiddle.net/ENch9/)

或者

```
vertical-align:text-top; 
```

[http://jsfiddle.net/c6YqG/](http://jsfiddle.net/c6YqG/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-03T17:07:25.893

我发现在图像上使用负边距是最灵活的解决方案：

```
img {
    margin-top:-6px; 
    position: relative; 
    top: 5px;
} 
```

[http://jsfiddle.net/dWkfq/4/](http://jsfiddle.net/dWkfq/4/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T07:28:42.873

for smiles you can try:

```
img {
vertical-align:middle;
} 
````

# iphone - iphone推送通知提供商限制

> ID：14273545
> 
> 赞同：0
> 
> 时间：2013-01-11T07:24:36.790
> 
> 标签：iphone, ios, push-notification, apple-push-notifications

我想在多台服务器上安装相同的推送通知证书。我想知道具有相同证书的提供者（服务器）计数是否有任何限制？

例如，我们有 10 个客户购买了我们的 Web 应用程序服务器。该服务器具有作为 iphone 用户推送通知提供程序的功能。App Store 上有适用于 Web 应用程序客户端的 iphone 应用程序。所有服务器都使用相同的 iphone 应用程序和相同的推送通知证书。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:35:20.387

您可以在多台服务器上安装证书，据我所知没有限制。唯一的建议是尽可能长时间地保持与 Apple 服务器的连接，并且避免向已卸载应用程序的设备发送通知。为此，您必须查询[Apple 的反馈服务](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html)。

# javascript - MomentJs 设计模式

> ID：14273546
> 
> 赞同：2
> 
> 时间：2013-01-11T07:24:41.047
> 
> 标签：javascript, design-patterns, momentjs

我真的搜索了很多，但我没有找到合适的结果。
我想知道，`MomentJs`设计模式是什么？

这有点像`Module Pattern`，但最终的公共 API 暴露于`Prototype`：

在第 917 行：[https ://github.com/timrwood/moment/blob/master/moment.js#L917](https://github.com/timrwood/moment/blob/master/moment.js#L917)

```
moment.fn = Moment.prototype = ... 
```

多谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T17:29:39.983

moment.js 的很多 api 设计都受到 jQuery 的启发。

构造函数不需要`new`关键字并接受各种输入。

`moment.fn`并且`jQuery.fn`都是主要原型的曝光。

getter 和 setter 都使用相同的命名空间，并根据是否提供输入来充当 getter 或 setter。`moment().date()`对`moment().date(1)`，`$().height()`对`$().height(200)`。

它们都使用方法链，也称为流式[接口模式](http://en.wikipedia.org/wiki/Fluent_interface)。`moment().date(1).month(5)`和`$().hide().addClass('something')`。

# php - devnagri（印地语）字体未存储在mysql中

> ID：14273549
> 
> 赞同：2
> 
> 时间：2013-01-11T07:25:02.673
> 
> 标签：php, mysql

我正在尝试将devnagri（印地语）字体存储在mysql中，但是在从执行php mysql插入代码的浏览器执行mysql插入之后，结果是

> à¤¹à¥‹à¤²à¥€ à¤•à¥‡ à¤¦à¥Œà¤°à¤¾à¤¨ à¤°à¤,à¤—à¥‹à¤, à¤¸à¥‡ à¤–à¥‡à¤²à¤¨à¤¾ à¤”à¤° à¤¦à¥‹à¤¸à¥à¤¤à¥‹à¤, à¤•à¥‡ à¤¸à ¤,à¤— à¤®à¤¸à¥à¤¤à¥€ à¤•à¤¿à¤¸à¥‡ à¤ªà¤¸à¤,à¤¦ à¤¨à¤¹à¥€ à¤,à¥¤ à¤²à¥‡à¤•à¤¿à¤¨ à¤•à¥à¤¯à¤¾ à¤†à¤ª</p>

试图存储

> 00 00  〖〗इसइसबीमारीमेंमुंहकेकीटाणुओंकेप्रतिअवरोधकतंत्रज्यादासक्रियजाताजाताजाताजाताजाताजाताजाताजाताजाताजाताजाताजाताजाताजाताजाताजाता

当我通过 phpmyadmin 将这些详细信息直接插入 mysql 行时，我能够存储表的印地语字体结构

```
 type text
   collation    utf8_unicode_ci 
```

我的mysql插入代码是

```
 mysql_query ("INSERT INTO tablea (tips) VALUES ('$tips') "); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:55:12.957

```
define('SQL_HOST','databasehost');
define('SQL_USER','user');
define('SQL_PASS','password');
define('SQL_DB','databasename');
$conn = mysql_connect(SQL_HOST, SQL_USER, SQL_PASS) or die('Could not connect to the database; ' . mysql_error());
mysql_select_db(SQL_DB, $conn) or die('Could not select database; ' . mysql_error());
mysql_query("SET NAMES 'utf8'"); 
```

使用`mysql_query("SET NAMES 'utf8'");`处理 UTF-8。就我而言，它适用于梵文。

不要忘记在元标记中提及相同的编码

```
< meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

# ruby-on-rails - 设置rails记录器使用的时区的任何方式（保留其他所有UTC）

> ID：14273553
> 
> 赞同：2
> 
> 时间：2013-01-11T07:25:51.220
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

有没有办法设置rails记录器使用的时区，同时保持所有其他时间处理UTC？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:26:45.940

看看这个自定义记录器：[http ://cbpowell.wordpress.com/2012/04/05/beautiful-logging-for-ruby-on-rails-3-2/](http://cbpowell.wordpress.com/2012/04/05/beautiful-logging-for-ruby-on-rails-3-2/)

您可以通过执行以下操作来设置自定义时区：

```
def call(severity, time, progname, msg)
  time = time.in_time_zone('Eastern Time (US & Canada)') 
```

# java - 如何使用像spring data jpa这样的spring代理接口？

> ID：14273558
> 
> 赞同：0
> 
> 时间：2013-01-11T07:26:36.673
> 
> 标签：java, spring

有接口，没有实现。

接口测试{

```
@MyAnnotation
pubilc void sayHello(); 
```

}

我想用spring来代理它，让它可以在其他bean中自动装配，比如

类应用{

@Autowired 测试测试；

}

在某些代理类中，我将根据其注释通过一些自定义操作处理“sayHello”的调用。

那么如何配置spring xml文件以及如何编写一些“MethodInvokeHandler”类？

我想向spring xml添加一些配置并分配“base-package”来扫描这些接口并将自动代理代码生成到spring上下文中，所以我可以使用@autowired将它们注入其他bean。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:42:17.057

This function is no standard spring functionality, so you can not configurate, you have to implement it.

But Java supports you with the [Dynamic Proxy API](http://docs.oracle.com/javase/1.4.2/docs/guide/reflection/proxy.html), and its core class [`Proxy`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Proxy.html).

# prolog - Prolog - 获取给定数字的因子不会停止？

> ID：14273559
> 
> 赞同：4
> 
> 时间：2013-01-11T07:26:47.780
> 
> 标签：prolog, failure-slice, program-slicing

我需要找到给定数字的因数，例如：

```
?- divisors2(40,R).
R = [40,20,10,8,5,4,2,1]. 
```

编码 ：

```
% get all the numbers between 1-X 
range(I,I,[I]).
range(I,K,[I|L]) :- I < K, I1 is I + 1, range(I1,K,L).
% calc the modulo of each element with the given number :
% any x%y=0 would be considered as part of the answer 
divisors1([],[],_).
divisors1([H|T],S,X):-divisors1(T,W,X),Z is X mod H,Z==0,S=[H|W].
divisors1([_|T],S,X):-divisors1(T,S,X).
divisors2(X,Result) :-range(1,X,Result1),divisors1(Result1,Result,X). 
```

但是当我运行时，`divisors2(40,RR).`我得到了无限循环，屏幕上没有任何内容。

为什么 ？

问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T00:27:29.887

你问为什么你得到一个无限循环的查询`divisors2(40,R)`。[我几乎想用failure-slice](/questions/tagged/failure-slice "显示标记为“故障切片”的问题")向你解释这一点。唉...

......答案是：不，你没有无限循环！你的程序也会找到答案。它是

```
R = [1, 2, 4, 5, 8, 10, 20, 40] 
```

这对我来说看起来很合理。它们按升序排列，您想要一个降序列表，但除此之外，这是一个完美的答案。不开玩笑。但是，我怀疑您没有足够的耐心得到答案。对于 36，我需要：

```
?- time(divisors2(36,R)).
% 10,744,901,605 inferences, 2248.800 CPU in 2252.918 seconds (100% CPU, 4778061 Lips)
R = [1, 2, 3, 4, 6, 9, 12, 18, 36] 
```

很不寻常......对于最多包含 36 个微不足道整数的列表，Prolog 需要 10 744 901 605 次推论，即小于 2 ^(34)。这会敲响警钟吗？无论如何，您的程序存在问题。事实上，有两个相当独立的问题。我们怎样才能找到它们？

也许我们看错了一面。只需返回查询。我们的第一个错误是我们如何使用 Prolog 的顶层。得到答案给我们留下了深刻的印象。但是 Prolog 为我们提供了进一步的答案！实际上：

```
?- time(divisors2(36,R)).
% 10,744,901,605 inferences, 2248.800 CPU in 2252.918 seconds (100% CPU, 4778061 Lips)
R = [1, 2, 3, 4, 6, 9, 12, 18, 36] ;
% 10 inferences, 0.000 CPU in 0.000 seconds (82% CPU, 455892 Lips)
R = [1, 2, 3, 4, 6, 9, 12, 18] ;
% 917,508 inferences, 0.192 CPU in 0.192 seconds (100% CPU, 4789425 Lips)
R = [1, 2, 3, 4, 6, 9, 12, 36] ... 
```

这太乏味了。也许*一个小例子*就足够了？

```
?- divisors2(6,R).
R = [1, 2, 3, 6] ;
R = [1, 2, 3] ;
R = [1, 2, 6] ;
R = [1, 2] ;
R = [1, 3, 6] ;
R = [1, 3] ;
R = [1, 6] ;
R = [1] ;
R = [2, 3, 6] ;
R = [2, 3] ;
R = [2, 6] ;
R = [2] ;
R = [3, 6] ;
R = [3] ;
R = [6] ;
R = [] ;
false. 
```

绰绰有余！也许我们坚持最小的例子`[]`并重申它：

```
?- divisors2(6,[]).
true ;
false. 
```

显然，这不是我们所期望的。我们希望这失败。如何定位问题？Prolog 中有一种通用的调试策略：

> 如果目标过于笼统，则将程序专门化。

我们可以通过添加进一步的目标来专门化程序，以使上述查询*仍然成功*。我将添加**`false`**一些**`(=)/2`**目标。**`false`**特别有趣，因为它消除了整个子句：

```
?- 除数2（6，[]）。

范围（I，I，[I]）：- I = 6。
范围（I，K，[I|L]）：- K = 6，
   我 < ķ,
   I1 是 I + 1，
   范围（I1，K，L）。

除数1（[]，[]，X）：- K=6。
divisors1([H|T],S,X):- **false** , 
   divisors1(T,W,X), 
   Z 是 X mod H, 
   Z=0, 
   S=[H|W]。
除数1([_|T],S,X):- S = [], X = 6 ,
   除数1（T，S，X）。

除数2（X，结果）：- X = 6，结果 = []。
   范围（1，X，结果1），
   除数1（结果1，结果，X）。

```

在其余部分的某个地方，有些东西太笼统了！事实上，递归规则`divisors1/3`太笼统了。您的这个新修改的程序称为*切片*，它是我们原始程序的特化**。**

解决这个问题的几种方法，最天真的方法是添加相应的条件，如下所示：

```
除数1（[]，[]，_）。
除数1（[H|T]，S，X）：-
   除数1（T，W，X），
   0 =:= X mod H,
   S=[H|W]。
除数1（[H|T]，S，X）：-
   除数1（T，S，X），
   0 =\= X 模 H。

```

但是，该程序的性能并没有提高。为了看到这一点，我将再次专门研究这个程序：

```
除数1（[]，[]，_）：-**假**。
除数1（[H|T]，S，X）：-
   divisors1(T,W,X), false ,
    0 =:= X mod H ,
    S=[H|W]。
除数1（[H|T]，S，X）：-
   除数1(T,S,X), false ,
    0 =\= X mod H。

```

因此：无论 后面是什么**`false`**，这个程序至少会尝试`3 * 2^N`推断长度列表`N`。

通过将递归目标放在最后，我们可以避免这种情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T08:26:59.807

如果你更正你的范围（对递归结束子句使用一个cut），你会得到它的工作。但是，您不会在找到所有除数后立即成功。

使用您的一般想法的解决方案，但也内置了 /3 和 bagof/3 （使打字更容易）：

```
divisors(X, Divs) :- bagof(D, divs(X,D), Divs).
divs(X,D) :- between(1,X,D), 0 is X mod D. 
```

请注意，此解决方案按升序返回除数。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-11T08:27:36.537

你这里有一个错误

```
divisors1([H|T],S,X):-
   divisors1(T,W,X),
   Z is X mod H,
   Z==0,S=[H|W]. <=== here 
```

如果 Z 为零，则 S = [H|W] 否则 S = W。

# vb.net - 在VB的富文本框中查找和替换粗体、斜体和下划线文本

> ID：14273560
> 
> 赞同：1
> 
> 时间：2013-01-11T07:26:47.537
> 
> 标签：vb.net

我需要在 VB 富文本框中找到粗体、斜体、下划线文本、段落和换行符，并将查找结果替换为以下内容：

带有'< b >粗体文本</ b >'的粗体文本

斜体文字带“<i>斜体文字</i>”

下划线文字'<u>下划线文字</u>'

带有'<p>段落文本</p>'的段落

用 '</br>' 换行

有人可以帮忙吗？我是 Vb 的新手。

提前致谢

# php - Mysql Select Query with match and against issue

> ID：14273562
> 
> 赞同：0
> 
> 时间：2013-01-11T07:26:51.733
> 
> 标签：php, mysql

这是我执行搜索的代码

```
 SELECT d.deal_id,
    d.deal_title,
    d.friendly_url
    FROM wp_deals AS d
   WHERE MATCH (d.deal_title) AGAINST ('Historic China eight day tour' IN BOOLEAN MODE)
   GROUP BY d.deal_id 
```

它工作正常。并给出 14 个结果。其中之一是

大桑迪海峡两晚自然邂逅之旅，包括日落巡游等。最高减$1,071！

但是当我搜索“with”或“more”时，它变成了

```
SELECT d.deal_id,
   d.deal_title,
   d.friendly_url
 FROM wp_deals AS d
WHERE MATCH (d.deal_title) AGAINST ('more' IN BOOLEAN MODE)
GROUP BY d.deal_id

 SELECT d.deal_id,
   d.deal_title,
   d.friendly_url
   FROM wp_deals AS d
   WHERE MATCH (d.deal_title) AGAINST ('with' IN BOOLEAN MODE)
   GROUP BY d.deal_id 
```

并且没有给出任何结果，尽管两者都是他们的。我不是这类搜索查询的专家。

但

当我用“旅游”搜索时，这也是他们的工作正常。他们发生了什么。不能理解为“tour”、“with”和“more”都包含四个字母以及它们的标题。

你们是天才..

你的建议，所以它会锻炼。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:31:54.400

在布尔全文搜索中，停用词列表适用，常用词（例如“some”或“then”...）是停用词，如果搜索字符串中存在则不匹配：http: [//dev.mysql.com/doc/ refman/5.5/en//fulltext-boolean.html](http://dev.mysql.com/doc/refman/5.5/en//fulltext-boolean.html)

停用词列表：[http ://dev.mysql.com/doc/refman/5.0/en/fulltext-stopwords.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-stopwords.html)

最著名的解决方案是禁用列表或从中添加/删除值：[如何在 MYSQL 中重置停用词？](https://stackoverflow.com/questions/796688/how-to-reset-stop-words-in-mysql)

还 ：

```
SELECT d.deal_id,
   d.deal_title,
   d.friendly_url
FROM 
   wp_deals AS d
WHERE MATCH (d.deal_title) AGAINST ('+more*' IN BOOLEAN MODE)
GROUP BY d.deal_id 
```

# cygwin - 使用 Cygwin 压缩文件夹中的单个文件并压缩整个文件夹

> ID：14273570
> 
> 赞同：2
> 
> 时间：2013-01-11T07:27:32.320
> 
> 标签：cygwin, 7zip, zipfile

我正在尝试将单个文件压缩到一个文件夹中。我可以使用压缩目录

```
tar -zcf <filename> <location to place the file after zipping> 
```

请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T17:38:32.567

我这样做

```
tar acf foo.tar.gz README.txt bar.txt dog.txt 
```

[**参考**](http://github.com/svnpenn/a/blob/master/install/rtmpdump/rtmpdump-dist-static.sh)

# java - Can Matlab generate Java Source Code?

> ID：14273573
> 
> 赞同：16
> 
> 时间：2013-01-11T07:27:43.490
> 
> 标签：java, matlab

MATLAB provides toolboxes (Matlab Coder, Matlab compiler, Simulink Coder) to generate C and C++ source codes for built in function. I am wondering if there is any toolbox or feature to generate java source code ( not encrypted JAR / class files) for the matlab code/built in functions?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T21:44:36.223

没有任何东西可以将 MATLAB 源代码转换为 Java 源代码。附加产品 MATLAB Builder JA 将存档和加密您的 MATLAB 源代码，并创建一个独立的 .jar 文件包装器，使您能够从 Java 调用 MATLAB 代码，但它不会生成 Java 源代码。

请注意，MATLAB Coder 和 Simulink Coder 生成 C 代码，而不是 C++ 代码，并且 MATLAB Compiler 的工作方式与 Builder JA 类似，归档和加密您的 MATLAB 代码并生成可执行包装器。

**编辑**：自 R2015b 版本以来，生成 .jar 文件的功能已从 MATLAB Builder JA 移至新产品 MATLAB Compiler SDK，该产品还将生成 .dll 文件和 .NET 程序集。MATLAB Builder JA 不再作为产品存在。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-11T08:08:29.673

I think that is the product you are looking for: [MATLAB Builder JA](http://www.mathworks.com/products/javabuilder/) (but the builder encrypts your MATLAB functions and generates a Java wrapper around them so that they behave just like any other Java class.)

# ios - 是否有相当于设置可以在以后取消和重新安排的计时器的 GCD？

> ID：14273579
> 
> 赞同：2
> 
> 时间：2013-01-11T07:28:04.330
> 
> 标签：ios, objective-c, macos, cocoa, grand-central-dispatch

我有一些使用大量 GCD 代码的代码。我需要实施一种方法来安排一些延迟后的工作单元，但如果需要，可以取消并移出更远的地方。

想一想点击处理程序；区分单击和双击的东西。要做到这一点，人们会得到点击事件，并设置一个短的计时器来处理它。如果在计时器触发之前发生了另一个点击事件，它将被取消并重新开始。当计时器最终触发时，它会有正确的点击次数。

无论如何，这很容易用 NSTimers 或 NSObject 上的 performSelector 来实现。也许像

```
NSUInteger tapCount = 0;

- (void)handleClickEvent
{
    [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(fireEvent:) object:nil];
    tapCount++;
    [self performSelector:@selector(fireEvent:) withObject:@(tapCount) afterDelay:2.0];
}

- (void)fireEvent:(NSNumber *)clickCount
{
    // Act on the coalesced event
    NSUInteger numClicks = [clickCount unsignedIntegerValue];
    if ( numClicks == 1 ) // single click
    if ( numClicks == 2 ) // double click
} 
```

然而，在这样做之前，我想知道是否有办法使用 GCD 函数来做到这一点。我知道您无法撤消对块的排队，因此 dispatch_after 并不是一个真正的选择。我知道有调度计时器源，但它们似乎更用于触发定期任务。我不知道它们是否可以像我需要的那样轻松取消并稍后开始。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T22:47:21.470

dispatch_source_set_timer() 将重新调度调度计时器源（如果您将 DISPATCH_TIME_FOREVER 作为间隔参数传递，它可以是一次性且非重复的）。

请注意，此 API 是非抢占式的，即除非您从计时器源的目标队列调用 dispatch_source_set_timer()，否则计时器处理程序可能在重新调度时已经在运行。

但是，一旦 dispatch_source_set_timer() 返回，就可以保证计时器将不再在之前设置的目标时间触发。

# javascript - 在javascript中将代词添加在一起

> ID：14273581
> 
> 赞同：2
> 
> 时间：2013-01-11T07:28:10.617
> 
> 标签：javascript, math

我希望 javascript 能够解释以下内容（`a`并且`b`总是会有所不同，所以这些只是一个示例）

```
a=(3x)+y  
b=x+(4y) 
```

并返回以下

```
a+b=(4x)+(5y) 
```

所有变量都是字符串而不是整数，因此数学不能应用于`a`, `b`,`x`或`y`

由于我不知道从哪里开始，我还没有开始处理这个特定的实例。

PS我对jQuery没有任何经验，所以如果可能的话，尽量避免它

编辑：该程序旨在帮助在我的世界游戏中寻找原材料。例如，如果您想要一把钻石剑 ( `a`) 和一把钻石镐 ( `b`)，则`a`需要 1 个木头 ( `x`) 和 2 个钻石 ( `y`)，并且`b`需要 1 个木头 ( `x`) 和 3 个钻石 ( `y`)。一旦我通过这个程序运行它，我想要一个回复说它需要 2 个木头和 5 个钻石。很抱歉之前的任何混淆...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:26:19.757

首先，让我们编写三个小辅助函数：

```
// exprToDict("3x + y") -> {x:3, y:1}
function exprToDict(e) {
    var d = {};
    e.replace(/(\d+)\s*(\w+)|(\w+)/g, function($0, $1, $2, $3) {
        d[$2 || $3] = parseInt($1 || 1);
    });
    return d;
}

// addDicts({x:1, y:2}, {x:100, y:3}) -> {x:101, y:5}
function addDicts(a, b) {
    var d = {};
    for(var x in a) d[x] = a[x];
    for(var x in b) d[x] = (d[x] || 0) + b[x];
    return d;
}

// dictToExpr({x:1, y:2}) -> x + (2 y)
function dictToExpr(d) {
    var e = [];
    for(var x in d)
        if(d[x] == 1)
            e.push(x);
        else
            e.push("(" + d[x] + " " + x + ")");
    return e.join(" + ")
} 
```

一旦我们有了这些，我们就可以编写 main 函数了：

```
function addThings(a, b) {
    return dictToExpr(
        addDicts(
            exprToDict(a),
            exprToDict(b)
    ))
} 
```

让我们测试一下：

```
sword = "(3 wood) + diamond"
pickaxe = "wood + (2 diamond)"

console.log(addThings(sword, pickaxe)) 
```

结果：

```
(4 wood) + (3 diamond) 
```

为了处理两个以上的东西，修改`addDicts`为接受数组：

```
function addDicts(dicts) {
    var sum = {};
    dicts.forEach(function(d) {
        for(var x in d)
            sum[x] = (sum[x] || 0) + d[x];
    });
    return sum;
} 
```

并改写`addThings`为：

```
function addThings(things) {
    return dictToExpr(
        addDicts(
            things.map(exprToDict)));
} 
```

例子：

```
sword = "(3 wood) + diamond"
pickaxe = "wood + (2 diamond)"
house = "10 wood + iron"

console.log(addThings([sword, pickaxe, house])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T08:00:02.743

首先，根据您的语法将输入字符串解析为要使用的对象：

```
function parseLine(input) { // pass a string like "a=(3x)+y"
    var parts = input.split("=");
    if (parts.length != 2) return alert("Invalid equation");
    for (var i=0; i<2; i++) {
        var summands = parts[i].split("+");
        parts[i] = {};
        for (var j=0; j<summands.length; j++) {
            summands[j] = summands[j].replace(/^\s*\(?|\)?\s*$/g, "");
            var match = summands[j].match(/^(-?\d*\.?\d+)?\s*([a-z]+)$/);
            if (!match) return alert("Parse error: "+summands[i]);
            var mul = parseFloat(match[1] || 1);
            if (match[2] in parts[i])
                parts[i][match[2]] += mul;
            else
                parts[i][match[2]] = mul;
         }
    }
    return parts;
}
// example:
parseLine("a=(3x)+y")
// [{"a":1},{"x":3,"y":1}] 
```

然后，在其上应用求解[线性方程组](http://en.wikipedia.org/wiki/System_of_linear_equations)的算法。我把它的实现留给你:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:05:34.727

哇，你的问题已经发生了根本性的变化，我会写一个全新的答案：

您可以为此使用对象。将工具所需的材料存储在 key-value-maps 中：

```
var diamondSword = {
    diamond: 2,
    stick: 1
};
var diamondPickaxe = {
    diamond: 3,
    stick: 2
}; 
```

那么一个加法函数就很简单了：

```
function add() {
    var result = {};
    for (var i=0; i<arguments.length; i++)
        for (var item in arguments[i])
            result[item] = (result[item] || 0) + arguments[i][item];
    return result;
}
// usage:
add(diamondSword, diamondPickaxe)
// {"diamond":5, "stick":3} 
```

# php - how to avoid email header Received: from unknown and email going to spam

> ID：14273582
> 
> 赞同：6
> 
> 时间：2013-01-11T07:28:11.987
> 
> 标签：php, email, smtp, spam, zend-mail

I try to send email from our server using php and Zend_Mail. I use smtp transport. This is confimation email of subscribing. But for some reason email that I send has strange headers and email goes to spam folder (I see them in gmail that receive letter):

```
 Message-Id: <50ee94f7.84fc440a.62dc.ffff9685SMTPIN_ADDED_MISSING@mx.google.com>
    Received: (qmail 10943 invoked from network); 10 Jan 2013 10:16:22 -0000
    Received: from unknown (HELO searchboxindustries.com)  (username@searchboxindustries.com@207.162.215.30) 
```

What does it mean list header "Recieved: from unknown"? Can it make email go to spam? How to avoid this strange header and make email avoid spam folder? Is there any problem with coode or maybe I have some problems with DNS settings of this domain?

Here's code for setting headers:

```
$mailer->setFrom($params['list_email'], $params['list_from_name']);
$mailer->setReplyTo($params['list_email']);

$mailer->addHeader('Sender', $params['list_email'] . '.searchboxindustries.com');                       
$mailer->setReturnPath($params['list_email'] . '.searchboxindustries.com');         

$mailer->addTo($params['email_address']); 
```

Code to configure transport:

```
$emailConfig = $this->getOption('email');                                   
        $transport = new Zend_Mail_Transport_Smtp($emailConfig['server'], $emailConfig);
Zend_Mail::setDefaultTransport($transport); 
```

Email config from application.ini:

```
 email.name  = searchboxindustries.com
   email.server = searchboxindustries.com
   email.username = user_name
   email.password = password
   email.auth = plain
   email.port = 587 
```

Here are headers of such email:

```
Delivered-To: gala19612009@gmail.com
Received: by 10.76.94.204 with SMTP id de12csp111150oab;
        Fri, 11 Jan 2013 01:58:49 -0800 (PST)
X-Received: by 10.69.0.8 with SMTP id au8mr228881813pbd.58.1357898329423;
        Fri, 11 Jan 2013 01:58:49 -0800 (PST)
Return-Path: <opp@mail15.com.searchboxindustries.com>
Received: from smtp1-1.searchboxindustries.com (mta1.searchboxindustries.com. [207.162.215.30])
        by mx.google.com with SMTP id d7si4727205paw.95.2013.01.11.01.58.48;
        Fri, 11 Jan 2013 01:58:48 -0800 (PST)
Received-SPF: pass (google.com: domain of opp@mail15.com.searchboxindustries.com designates 207.162.215.30 as permitted sender) client-ip=207.162.215.30;
Authentication-Results: mx.google.com;
       spf=pass (google.com: domain of opp@mail15.com.searchboxindustries.com designates 207.162.215.30 as permitted sender) smtp.mail=opp@mail15.com.searchboxindustries.com
Message-Id: <50efe258.a74b420a.3351.12fcSMTPIN_ADDED_MISSING@mx.google.com>
Received: (qmail 21583 invoked from network); 11 Jan 2013 09:58:48 -0000
Received: from unknown (HELO searchboxindustries.com) (username@searchboxindustries.com@207.162.215.30)
  by searchboxindustries.com with SMTP; 11 Jan 2013 09:58:48 -0000
From: Oleg <opp@mail15.com>
Reply-To: opp@mail15.com
Sender: opp@mail15.com.searchboxindustries.com
Return-Path: opp@mail15.com.searchboxindustries.com
To: gala19612009@gmail.com
Subject: List1: Confirm Subscription
Date: Fri, 11 Jan 2013 04:58:48 -0500
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
MIME-Version: 1.0 
```

Spf seems to be ok. The ip from which email is sent is not blacklisted.

Now there are changes in DNS and I have headers:

```
Message-Id: <50f41c80.67e3440a.2d32.6aabSMTPIN_ADDED_MISSING@mx.google.com>
Received: (qmail 18457 invoked from network); 14 Jan 2013 14:55:59 -0000
Received: from unknown (HELO smtp1-1.searchboxindustries.com) (username@searchboxindustries.com@207.162.215.30)
  by searchboxindustries.com with SMTP; 14 Jan 2013 14:55:59 -0000 
```

We have Reverse DNS set. 207.162.215.30 is resolved to stmp1.searchboxindustries.com. What's the problem then? I wonder what is strange format in brackets in the header Received : from unknow:

```
 username@searchboxindustries.com@207.162.215.30 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T12:46:13.037

这`Received: from unknown`只是意味着一个 SMTP 服务器从另一个不提供反向 DNS 的 SMTP 服务器接收它。通常，从一个 SMTP 服务器到另一个 SMTP 服务器的每个跃点都会`Received:`在消息顶部添加一个标头（除了`qmail`，它添加了两个；这在您的示例中可见）。

如果您担心缺少反向 DNS，并且如果 207.162.215.30 是您的，那么也许您可以说服您的 ISP 为其提供反向 DNS。许多 ISP 拒绝（如果您使用“消费者”宽带计划），或者需要与您签订不同的托管合同才能提供此服务。（“反向 DNS”意味着当有人向 DNS 查询“207.162.215.30 的 DNS 名称是什么”时，答案将是“searchboxindustries.com”或其他主机名，但不是“未知”。）

反向 DNS 查找通常基于 TCP 标头而不是消息文本执行。如果 SMTP 服务器接收到来自 123.45.67.89 的连接，那么它将对该地址执行反向 DNS，并将结果放在`Received:`它添加的标头中。换句话说，您的邮件标头或信封标头的内容根本不会影响此结果。

收件人可以对这些标头做任何他们想做的事情。仅此标头（此标头的存在，或从其内容中没有明显的反向 DNS 信息）不太可能足以让某人将您的邮件分类为垃圾邮件，但实际上没有办法控制收件人使用此信息。

如果有的话，您的问题表明您可能应该寻求专业服务来代表您发送这些消息，但需要付费。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:15:31.543

我的服务器需要额外的 (php.)ini 设置，这可以解决您的问题吗？

```
ini_set('sendmail_from', 'enterAValidEmailAddr@yourDomainHere'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:14:56.807

尝试以下选项以找出问题所在：

1.  电子邮件有正文吗？我相信有电子邮件正文。
2.  为了隔离问题，您可以尝试使用另一种替代 SMTP（例如：gmail smtp）。
3.  或者，您可以不使用 smtp 直接使用 PHP 邮件。

# html - css3 -ms-flex 在非 MS 浏览器上可用吗？

> ID：14273590
> 
> 赞同：2
> 
> 时间：2013-01-11T07:28:49.917
> 
> 标签：html, css, flexbox

我正在制作一些来自 Microsoft Virtual Academy 的视频，偶然发现了*-ms-flex或**css3*中所谓的*Flexbox*。

 *我想在*html5*和*css3*上实现一个网络应用程序，这个*-ms-flex*对我很有帮助。

这在移动设备上的基于*webkit*或*fennec的浏览器中是否可用？*如果可以使用，有没有使用限制？如果不支持，这些浏览器是否有任何等价物？

我发现：[safari](http://developer.apple.com/library/safari/#documentation/appleapplications/reference/safaricssref/articles/standardcssproperties.html)有*webkit-box*，其他浏览器可能还有其他的（Opera、Chrome 和 Mozilla 或 Dolphin）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:05:37.227

好吧，从评论延伸：

根据[can_i_use](http://caniuse.com/#feat=flexbox)，您可以在许多具有适当前缀的现代浏览器上使用弹性框：

*   `-webkit-`带有前缀的 WebKit 浏览器（Chrome、Safari、Android 库存浏览器、Android 版 Chrome、iOS Safari） ；
*   `-moz-`带有前缀的 Gecko/Fennec 浏览器（Firefox、Firefox for Android） ；
*   `-ms-`带前缀的三叉戟浏览器（IE 10） ；
*   没有前缀的 Presto 浏览器（Opera 桌面）。

您应该能够在[MDN](https://developer.mozilla.org/en-US/)或（像往常一样）[Google](http://www.google.com/search?hl=en&newwindow=1&q=flex+box+tutorial)上找到一些教程/示例。*

# python - 巨大的 Django 项目

> ID：14273593
> 
> 赞同：3
> 
> 时间：2013-01-11T07:29:02.663
> 
> 标签：python, django

我有一份新工作和一个巨大的 django 项目（15 个应用程序，超过 30 个位置）。从头开始很难理解它的架构。一开始有什么技巧可以简化我的工作吗？有时甚至很难理解在哪里可以找到我需要的表单或视图......提前。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T08:01:55.610

当我遇到这种问题时，我打开一个笔记本并回答以下问题：

**1\. 基础设施**

*   服务器配置、操作系统等
*   查看数据库类型（mysql、postgres、nosql）
*   外部 APIS（例如 Facebook Connect）

**2.后端**

*   写一个简单的描述
*   写出用户的输入/输出（尽量彻底；哪些字段是必需的，哪些不是）
*   写下它的 FK 以及它与任何其他应用程序的关系（以及为什么）
*   列出应用程序正在使用的每个插件。以及为了什么目的。例如在rails中我会写：'gem will_paginate - 在几个页面上显示留言簿应用程序结果'

**3.前端**

*   查看 JS 框架
*   检查主要样式表文件（用于模板）
*   用于创建基于模板的新页面的主要 html/haml (etc) 文件。

当你这样做了。我认为您已经做好了充分的准备，并且能够更深入地开发/调试应用程序。祝你好运。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T08:26:50.177

使用这个[http://packages.python.org/django-extensions/graph_models.html](http://packages.python.org/django-extensions/graph_models.html)

从模型生成关系图，以便您可以直观地看到模型是如何相互关联的。这将为您提供有关该应用程序的好主意

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T08:08:46.237

1) 尝试从头开始安装网站。您会发现网站运行需要哪些外部应用程序。

2) 逆向工程。浏览该站点并尝试找出您必须执行哪些操作才能更改该页面的内容。从 url 开始，在 urls.py 中查找，阅读视图，检查模型。是否有其他流程的提示？

3）试着写下你不明白的一切，并记录答案以备将来参考。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-11T08:12:44.207

我会克隆这个项目，这样你就可以无休止地搞砸了。

然后我会开始减少代码。“如果只是在这里删除这个功能会发生什么？

还可以得到 django 调试工具栏：

[https://github.com/django-debug-toolbar/django-debug-toolbar](https://github.com/django-debug-toolbar/django-debug-toolbar)

一个好的终端调试器也很重要，有很多，这里有一个例子：

[https://github.com/tomchristie/django-pdb](https://github.com/tomchristie/django-pdb)

这允许您停止代码，甚至在运行时注入和改变参数。就像 C 语言中的 GDB 一样。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-11T07:40:14.500

如果您使用 FireFox，则可以在其上安装 FireBug，例如，当您提交 ajax 表单时，您可以看到在哪个 url 向您发送请求，之后您可以轻松找到使用此表单数据的控制器。在 chrome 中，该实用程序默认嵌入并通过 F12 键调用。

# mysql - 加入树表并根据日期层次结构获取最后状态

> ID：14273596
> 
> 赞同：1
> 
> 时间：2013-01-11T07:29:15.273
> 
> 标签：mysql, sql, select

我有以下树表

表兵

```
身份证 | 姓名
---------------
22 | 弗兰克
23 | 保罗
24 | 账单

```

表士兵状态历史

```
士兵ID | 日期记录 | 士兵身份
-------------------------------------------------- ---------------          
22 | 2012-12-07 18:09:58 | 37
22 | 2012-12-08 18:10:11 | 38
22 | 2012-12-10 18:20:25 | 41
23 | 2011-08-17 23:59:10 | 37
23 | 2011-08-19 23:59:11 | 38
23 | 2011-08-22 00:00:00 | 41  
23 | 2011-08-25 12:00:22 | 38   
24 | 2011-08-24 19:18:43 | 37  
24 | 2011-08-29 19:18:44 | 38

```

表士兵值

```
编号 | 钥匙
----------------
37 | 值班
38 | 可用的
40 | 假期
41 | 患病的

```

是否可以进行选择以加入他们并仅返回我从表士兵状态历史记录中的记录，即特定士兵的最后一个日期记录的士兵状态不是“假期”或“生病”</p>

我的意思是，对于这个名为“Paul”的人，我们有树记录，但最后一个记录是他生病了，因此在其状态未更改之前不应显示此人。

```
23 | 2011-08-17 23:59:10 | 37
23 | 2011-08-19 23:59:11 | 38
23 | 2011-08-22 00:00:00 | 41

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:42:59.763

尝试这个：

```
SELECT
  h.*
FROM Soldier s 
INNER JOIN soldier_status_history h ON s.ID = h.soldier_id
INNER JOIN
(
  SELECT Soldier_id, MAX(date_record) latestDate
  FROM soldier_status_history 
  GROUP BY soldier_id
) l  ON h.soldier_id = s.ID
    AND DATE(l.latestDate) = DATE(h.date_record); 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/ffc29/2)

这会给你：

```
| SOLDIER_ID |                     DATE_RECORD | SOLDIER_STATUS |
-----------------------------------------------------------------
|         22 | December, 10 2012 18:20:25+0000 |             41 |
|         23 |   August, 25 2011 12:00:22+0000 |             38 |
|         24 |   August, 29 2011 19:18:44+0000 |             38 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:38:28.507

```
select * from 
soldier s
left join 
(select 
     soldier_id, 
     max(date_record) maxDate_record
   from soldier_status_history 
   group by soldier_id
) s2 
    on (s.id=s2.soldier_id)
left join soldier_status_history s3 
    on (s2.soldier_id=s3.soldier_id) and (s2.maxDate_record=s3.date_record)

where s3.soldier_status not in (40,41) 
```

# javascript - 测量工具（面积计算）在地图中无法正常工作

> ID：14273599
> 
> 赞同：0
> 
> 时间：2013-01-11T07:29:31.020
> 
> 标签：javascript, esri, units-of-measurement, measurement, arcgis-js-api

我在 esri 示例地图中创建了一个简单的测量工具，所有其他功能都使用 javascript。但测量工具面积计算显示错误计算。

但是距离和位置都很好（使用 wkid: 3435）。当我使用 wkid: 102100 时，它适用于面积计算，但地图图层不显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:10:08.977

你想用不同的 WKID 显示什么样的图层？

由于切片地图服务已缓存在特定投影中，因此无法重新投影，因此只能动态重新投影动态地图服务。

# ubuntu - 无法使用 CDH4 启动 hdfs 服务：Datanode 拒绝与 namenode 通信

> ID：14273601
> 
> 赞同：1
> 
> 时间：2013-01-11T07:29:41.647
> 
> 标签：ubuntu, hadoop, cloudera

Ubuntu 12.04 服务器 AMD64

有什么建议吗？

> 块池块池 BP-1276073141-127.0.1.1-1357815963565（存储 id DS-1319948814-127.0.1.1-50010-1357815971500）服务对 bpct-server-01/127.0.1.1:8020 org.apache.hadoop 的初始化失败。 ipc.RemoteException（org.apache.hadoop.hdfs.server.protocol.DisallowedDatanodeException）：Datanode拒绝与namenode通信：DatanodeRegistration（127.0.0.1，storageID = DS-1319948814-127.0.1.1-50010-1357815971500，infoPort = 50075，ipcPort =50020, storageInfo=lv=-40;cid=cluster6;nsid=850502448;c=0) 在 org.apache.hadoop.hdfs.server.blockmanagement.DatanodeManager.registerDatanode(DatanodeManager.java:566) 在 org.apache。 hadoop.hdfs.server.namenode.FSNamesystem.registerDatanode(FSNamesystem.java:3358) 在 org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.registerDatanode(NameNodeRpcServer.java:854) 在 org.apache。hadoop.hdfs.protocolPB.DatanodeProtocolServerSideTranslatorPB.registerDatanode(DatanodeProtocolServerSideTranslatorPB.java:91) at org.apache.hadoop.hdfs.protocol.proto.DatanodeProtocolProtos$DatanodeProtocolService$2.callBlockingMethod(DatanodeProtocolProtos.java:20018) at org.apache.hadoop.ipc .ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:453) 在 org.apache.hadoop.ipc.RPC$Server.call(RPC.java:898) 在 org.apache.hadoop.ipc.Server$Handler$1。 run(Server.java:1693) at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1689) at java.security.AccessController.doPrivileged(Native Method) at javax.security.auth.Subject org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1332) 上的 .doAs(Subject.java:396) org.apache.hadoop.ipc.Server$Handler。运行（Server.java:1687）

```
at org.apache.hadoop.ipc.Client.call(Client.java:1160)
at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:202)
at $Proxy10.registerDatanode(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:164)
at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:83)
at $Proxy10.registerDatanode(Unknown Source)
at org.apache.hadoop.hdfs.protocolPB.DatanodeProtocolClientSideTranslatorPB.registerDatanode(DatanodeProtocolClientSideTranslatorPB.java:149)
at org.apache.hadoop.hdfs.server.datanode.BPServiceActor.register(BPServiceActor.java:619)
at org.apache.hadoop.hdfs.server.datanode.BPServiceActor.connectToNNAndHandshake(BPServiceActor.java:221)
at org.apache.hadoop.hdfs.server.datanode.BPServiceActor.run(BPServiceActor.java:661)
at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T09:38:56.110

好吧，将主机名与错误的 IP 相关联，愚蠢的错误

编辑 /etc/hosts 解决了这个问题

# linux - 如何在真棒 WM 上使用快捷方式运行 bash

> ID：14273607
> 
> 赞同：2
> 
> 时间：2013-01-11T07:30:09.013
> 
> 标签：linux, bash, ubuntu, shortcut, awesome-wm

我是 Awesome WM 的新手，我尝试添加自定义快捷方式来运行 bash 文件，但它不起作用。

```
awful.key({ modkey, "Control", "Shift" }, function () awful.util.spawn(./layout-ir.sh) end), 
```

我在“标准程序”后面添加了这个。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T08:30:00.303

首先，我假设您使用了很棒的 3.4.something ，因为您将其标记为[ubuntu](/questions/tagged/ubuntu "显示标记为“ubuntu”的问题")。然后：您没有为快捷方式指定键，只有修饰符。最后：您应该为要运行的命令使用完整路径并将其放在双引号中。

请参阅绑定 Shift-e 以从用户主文件夹运行脚本的示例：

```
awful.key({ modkey,   "Shift" }, "e", function () awful.util.spawn("sh /home/USERNAME/myscript.sh") end), 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T08:24:36.173

你需要提供完整的路径`awful.util.spawn`，比如说`awful.util.spawn("~/.bin/layout-ir.sh")`。

另一个错误是您需要提供密钥作为`awful.key`. 因此，如果要绑定`Win+Control+Shift+k`为快捷方式，则需要以下行：

```
awful.key({ modkey, "Control", "Shift" }, "k", function () awful.util.spawn("~/.bin/layout-ir.sh") end), 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T17:12:22.747

尝试：

糟糕的.util.spawn_with_shell("./layout-ir.sh")

# android - 从服务类 Android 设置 ListView 数据

> ID：14273608
> 
> 赞同：3
> 
> 时间：2013-01-11T07:30:16.427
> 
> 标签：android, android-listview, android-service

我想在我的歌曲列表活动中显示列表视图，.. 为此，我创建了 MyService 类，我将用于播放服务。在那个 MyService 类中，我创建了可以在 SDCard 上获取所有可用歌曲的方法。我想通过使用服务在歌曲列表活动的列表视图中显示所有歌曲。

这是我在 songList Activity 中的代码：

```
private ServiceConnection serviceConnection = new ServiceConnection() {
        public void onServiceDisconnected(ComponentName name) {
            objservice = null;
        }

        public void onServiceConnected(ComponentName name, IBinder service) {
            // TODO Auto-generated method stub
            objservice = ((MyService.LocalBinder) service).getService();
            adapter = (ListAdapter) objservice.getSongList();
        }
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.playlist);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

        bindService(new Intent(PlayListActivity.this, MyService.class),
                serviceConnection, BIND_AUTO_CREATE);

        setListAdapter(adapter);
       } 
```

服务类代码：

```
public class MyService extends Service {

    private MediaPlayer mp = null;
    private ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();
    private ListAdapter adapter = null;

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return new LocalBinder();
    }

    @Override
    public void onCreate() {

    }

    public class LocalBinder extends Binder {
        MyService getService() {
            return MyService.this;
        }
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        return START_STICKY;
    }

    public ListAdapter getSongList() {
        final ArrayList<HashMap<String, String>> songsListData = new ArrayList<HashMap<String, String>>();

        Cursor cursor = getContentResolver().query(
                android.provider.MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
                null, null, null, null);
        if (cursor == null) {
            // Query Failed , Handle error.
        } else if (!cursor.moveToFirst()) {
            // No media on the device.
        } else {
            int titleColumn = cursor
                    .getColumnIndex(android.provider.MediaStore.Audio.Media.TITLE);
            int idColumn = cursor
                    .getColumnIndexOrThrow(android.provider.MediaStore.Audio.Media.DATA);
            int artistcolumn = cursor
                    .getColumnIndex(android.provider.MediaStore.Audio.Media.ARTIST);
            int durationcolumn = cursor
                    .getColumnIndex(android.provider.MediaStore.Audio.Media.DURATION);
            int id = cursor
                    .getColumnIndex(android.provider.MediaStore.Audio.Media._ID);
            for (int i = 0; i < cursor.getCount(); i++) {
                String thisTitle = cursor.getString(titleColumn);
                String path = cursor.getString(idColumn);
                String artist = cursor.getString(artistcolumn);
                Long duration = cursor.getLong(durationcolumn);
                Utilities objUtilities = new Utilities();
                String timeDuration = objUtilities
                        .milliSecondsToTimer(duration);
                String ID = cursor.getString(id);

                HashMap<String, String> song = new HashMap<String, String>();
                song.put("songTitle", thisTitle);
                song.put("songPath", path);
                song.put("artist", artist);
                song.put("duration", timeDuration);
                song.put("id", ID);
                songsList.add(song);
                cursor.moveToNext();
            }
        }

        for (int i = 0; i < songsList.size(); i++) {
            // creating new HashMap
            HashMap<String, String> song = songsList.get(i);
            // adding HashList to ArrayList
            songsListData.add(song);
        }

        String[] from = { "songTitle", "artist", "duration" };
        int[] to = { R.id.songTitle, R.id.songArtist, R.id.duration };
        return adapter = new SimpleAdapter(this, songsListData,
                R.layout.playlist_item, from, to) {
            public long getItemId(int position) {
                return songsListData.indexOf(getItem(position));
            }
        };
    }
} 
```

那么我的错误是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:52:45.710

我的问题已经解决了。我创建了一种将适配器设置为我的列表视图的方法。我已经将该方法称为连接到我的服务：

```
public void updateListView() {
        setListAdapter(adapter);
        ListView lv = getListView();
        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                int songIndex = (int) id;
                // Starting new intent
                Intent in = new Intent(getApplicationContext(),
                        AndroidBuildingMusicPlayerActivity.class);
                // Sending songIndex to PlayerActivity
                in.putExtra("songIndex", songIndex);
                in.putExtra("listFlag", 0);
                startActivity(in);

            }
        });
    } 
```

在这里调用这个方法：

```
public void onServiceConnected(ComponentName name, IBinder service) {
            // TODO Auto-generated method stub
            objservice = ((MyService.LocalBinder) service).getService();
            adapter = (ListAdapter) objservice.getSongList();
            updateListView(); // here was my problem
        } 
```

这是您可以使用 service 更新 listview 的方式。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T05:35:32.570

我在这个讨论中迟到了。

**我通过这种方式来绑定服务。**

*这是 Client.java 类*

```
package com.example.bindservice.binder;

import java.util.ArrayList;
import java.util.Calendar;

import com.example.bindservice.binder.Server.LocalBinder;

import android.app.Activity;
import android.content.ComponentName;
import android.content.Intent;
import android.content.ServiceConnection;
import android.os.Bundle;
import android.os.Handler;
import android.os.IBinder;
import android.os.Message;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class Client extends Activity {

 Handler handler;
 boolean mBounded;
 Server mServer = new Server();
 TextView text;
 ListView list;
 Button button;
 Calendar calendar;
 int minute;
 Intent mIntent;
 ArrayList<String> arlstText;
 ArrayAdapter<String> adapterList;
 static HandlerText handlerAct;
 @Override
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        //calendar = new GregorianCalendar();
        text = (TextView)findViewById(R.id.text);
        button = (Button) findViewById(R.id.button);
        list = (ListView) findViewById(R.id.list);
      //  minute = calendar.get(Calendar.MINUTE);
     //   Log.i("Log", "Minute is: "+minute);
       // final String[] data = mServer.names;
        handlerAct = new HandlerText();
        arlstText = new  ArrayList<String>();
        adapterList = new ArrayAdapter<String>(Client.this,android.R.layout.simple_list_item_1, arlstText );
       list.setAdapter(adapterList);
        button.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
       text.setText(mServer.getTime());

   }
  });
    }

 @Override
 protected void onStart() {
  super.onStart();
  Log.i("Log", "M in onStart");
  mIntent = new Intent(this, Server.class);
        bindService(mIntent, mConnection, BIND_AUTO_CREATE);

 }

 ServiceConnection mConnection = new ServiceConnection() {

  public void onServiceDisconnected(ComponentName name) {
      Log.i("Log", "M in onServiceDisconnected");
   Toast.makeText(Client.this, "Service is disconnected", 1000).show();
   mBounded = false;
   mServer = null;
  }

  public void onServiceConnected(ComponentName name, IBinder service) {
      Log.i("Log", "M in onServiceConnected");
   Toast.makeText(Client.this, "Service is connected", 100).show();
   mBounded = true;
   LocalBinder mLocalBinder = (LocalBinder)service;
   mServer = mLocalBinder.getServerInstance();

   Log.i("Log", "Server Instance is: "+mLocalBinder.getServerInstance().toString());
  }
 };

 @Override
 protected void onStop() {
  super.onStop();
  Log.i("Log", "M in onStop");
  if(mBounded) {
   unbindService(mConnection);
   mBounded = false;
  }
 }
    class HandlerText extends Handler{

        @Override
        public void handleMessage(Message msg) {
            // TODO Auto-generated method stub
            super.handleMessage(msg);
            String text= (String)msg.obj;
            //String text = mServer.a;
            arlstText.add(text);
            adapterList.notifyDataSetChanged(); 
        //  stopService(mIntent);
        //  startService(mIntent);
            //Toast.makeText(Client.this, "activity "+text, 1000).show();
        }
    }
} 
```

***这是扩展服务类的 Server.java 类***

```
package com.example.bindservice.binder;

import java.security.PublicKey;
import java.text.SimpleDateFormat;
import java.util.Date;

import android.app.Service;
import android.content.Intent;
import android.os.Binder;
import android.os.Handler;
import android.os.IBinder;
import android.os.Message;
import android.util.Log;
import android.widget.Toast;

public class Server extends Service implements Runnable {
    Message msg;
    static String[] names = {
            "Dwight D. Eisenhower",
            "John F. Kennedy",
            "Lyndon B. Johnson",
            "Richard Nixon",
            "Gerald Ford",
            "Jimmy Carter",
            "Ronald Reagan",
            "George H. W. Bush",
            "Bill Clinton",
            "George W. Bush",
            "Barack Obama"
    };
    private boolean isServiceRunning;

    /*Handler handler = new Handler()
    {
        @Override
        public void handleMessage(Message msg) {
            // TODO Auto-generated method stub
            super.handleMessage(msg);
            msg.obj= (Object)names;
            String[] data = Server.data(names);

            for(int  i = 0 ; i < data.length ; i++)
            {
                Log.i("Log", "data"+data[i]);
            }
            Toast.makeText(Server.this, "Service Started", 1000).show();
        }
    };*/

public static String[] data(String[] name)
{
    name = names;
    return name;
}

 IBinder mBinder = new LocalBinder();

 @Override
public int onStartCommand(Intent intent, int flags, int startId) {
    // TODO Auto-generated method stub
    return 0;
}
 public Server() {
    // TODO Auto-generated constructor stub
     Thread t = new Thread(this);
     t.start();
 }
 @Override
public void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    isServiceRunning = false;
    Log.i("Log", "The onDestroy is callled");
}
 @Override
public void onCreate() {
    // TODO Auto-generated method stub
    super.onCreate();

    /* ArrayAdapter<String> adapterList = new ArrayAdapter<String>(Server.this,android.R.layout.simple_list_item_1, names);

    list.setAdapter(adapterList);*/
    isServiceRunning = true;

}
 @Override
 public IBinder onBind(Intent intent) {
     Log.i("Log", "M in onBind of server" );
  return mBinder;
 }
 @Override
    public void onRebind(Intent intent) {
        // TODO Auto-generated method stub
        super.onRebind(intent);
        Log.i("Log", "M in onRebind");  
    }
 @Override
public boolean onUnbind(Intent intent) {
    // TODO Auto-generated method stub
    return true;
}
 public class LocalBinder extends Binder {

  public Server getServerInstance() {
      Log.i("Log", "M in getServerInstance of server" );
   return Server.this;
  }
 }

 public String getTime() {
     Log.i("Log", "M in getTime of server class");
  SimpleDateFormat mDateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
  //Log.i("Log", "Time"+mDateFormat.toString());
  return mDateFormat.format(new Date());
 }

@Override
public void run() {
    Log.i("Log", "run");
    int i = 0,ai;
    long millisec = 0,tempmilli;
    while(isServiceRunning)
    //while(millisec != 60000)
    {
        Log.i("Log", "while");
        Log.i("Log", "Its started");

        try {
            /*tempmilli = 10000;
            millisec = millisec + tempmilli;*/
            Thread.sleep(3000);

            for( ai = i ; ai< names.length; ai ++)
            {
                /*msg.obj = names[i];
                Client.handlerAct.sendMessage(msg);
                msg = Message.obtain();*/
                //msg.recycle();
                Log.i("Log", "ai is"+ai);
                Log.i("Log", "i is"+i);
                msg = Client.handlerAct.obtainMessage();
                msg.obj = names[ai];
                Client.handlerAct.sendMessage(msg);
                break;
            }
            i = i+1;
            Log.i("Log", "I outside loop"+i);
            //Message msg = new Message();
            //Message msg = Message.obtain();
            /*msg = handler.obtainMessage();
            msg.obj = "Hi";
            Client.handlerAct.sendMessage(msg);*/
        /*  msg = handler.obtainMessage();
            msg.obj = "Bye";
            Client.handlerAct.sendMessage(msg);*/
            Log.i("Log", "Loop breaked");
            }   
        catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        }
    }
}
} 
```

**希望这将清除并建立更多的想法。**

谢谢

# jquery - 如果选择框选项更改，则 JQuery 验证不起作用

> ID：14273612
> 
> 赞同：0
> 
> 时间：2013-01-11T07:30:39.240
> 
> 标签：jquery, jquery-plugins, jquery-validate

我有一个提交表单，我检查是否选择了某种类型的选项我的验证会根据它进行更改，但它无法以某种方式工作，任何机构都可以帮助我这是我的 HTML 表单：

```
<form method="post" id="addnews" action="/app/index.php/admin/sizes/save" enctype="multipart/form-data" style="margin-top:0px" name="addnews">
        <table width="100%" class="font">
            <tbody><tr>
                <td colspan="2"><span style="color: rgb(204, 0, 0); padding-left: 302px;">( Note:Fields marked with * are required )</span></td>
            </tr>
            <tr>
                <td colspan="2">&nbsp;</td>

            </tr>
            <tr>
                <td style="width:301px;text-align:right; vertical-align:top;"><label><font size="4" color="Red">*</font>&nbsp;Size Type: </label></td>
                <td style="text-align:left">
                   <select onchange="getForm(this.value);" style="width:206px;" name="size_type" id="size_type" class="common_form">
                        <option value="0">Template</option><option value="1"> Wallart</option>                  </select>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <table width="100%" cellspacing="3" cellpadding="0" style="display:block inline;" id="templateForm" class="font">
                        <tbody><tr>
                            <td style="text-align:right; vertical-align:middle;">
                                <label><font size="4" color="Red">*</font>&nbsp;Name: </label>
                            </td>
                            <td style="text-align:left">
                                <input type="text" value="" maxlength="200" id="name" name="name" class="common_form">
                                                                <label style="display:none;" id="name_lbl">Please enter name</label>
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align:right; vertical-align:top;"><label><font size="4" color="Red">*</font>&nbsp;Code: </label></td>
                            <td style="text-align:left">
                               <input type="text" value="" maxlength="200" id="code" name="code" class="common_form">        
                                                           <label style="display:none;" id="code_lbl">Please enter code</label>
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align:right; vertical-align:top;"><label><font size="4" color="Red">*</font>&nbsp;Num Code: </label></td>
                            <td style="text-align:left">
                               <input type="text" value="" maxlength="200" id="num_code" name="num_code" class="common_form">
                                                           <label style="display:none;" id="numc_lbl">Please enter num code</label>
                            </td>
                        </tr>
                    </tbody></table>
                                        <table width="100%" cellspacing="3" cellpadding="0" style="display:none;" id="wallartForm" class="font">
                        <tbody><tr>
                            <td style="text-align:right; vertical-align:middle;width:299px;">
                                <label><font size="4" color="Red">*</font>&nbsp;Width: </label>
                            </td>
                            <td style="text-align:left">
                                <input type="text" value="" maxlength="200" id="width" name="width" class="common_form">
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align:right; vertical-align:top;"><label><font size="4" color="Red">*</font>&nbsp;Height: </label></td>
                            <td style="text-align:left">
                               <input type="text" value="" maxlength="200" id="height" name="height" class="common_form">        
                            </td>
                        </tr>
                    </tbody></table>
                </td>
            </tr>            
            <tr>
                <td style="text-align:right"><label>Status: </label></td>
                <td style="text-align:left">
                    <input type="radio" checked="checked" value="1" name="is_active">Active
                    <input type="radio" value="0" name="is_active">Inactive
                </td>
            </tr>
            <tr>
                <td colspan="2">&nbsp;</td>

            </tr>
            <tr>
                <td>&nbsp;</td>
                <td style="text-align:left">
                    <input type="hidden" value="" name="id" id="id">
                    <input type="submit" value="Save" id="submitT" onclick="if($('#size_type').val() == 1){check('W',this.form);}else{check('T',this.form);}" class="button115_a">

                    <input type="button" onclick="back();" value="Back" class="button90_b">
                </td>
            </tr>
        </tbody></table>
    </form> 
```

在选择框更改时，如果之前完成了任何验证，我会隐藏表单的某些字段也会重置我的表单：

```
function getForm(id)
{
        var validator = $("#addnews").validate();
        validator.resetForm();
    if(id == 1)
    {
        $("#templateForm").attr("style","display:none;");
        $("#wallartForm").attr("style","display:block inline;");

    }
    else
    {
        $("#templateForm").attr("style","display:block inline;");
        $("#wallartForm").attr("style","display:none;");

    }
} 
```

这是我的验证功能：

```
function check(type){

            if(type == "T"){

            $('#addnews').validate({
            rules: {
                name:{required:true},
                code:{required:true},
                num_code:{required:true}
            },
            messages:{
                name:{required:"<br>Please enter size name"},
                code:{required:"<br>Please enter size code"},
                num_code:{required:"<br>Please enter size num code"}
            }
        });
            }
            else{
                alert("yes")
                $('#addnews').validate({
            rules: {
                width:{required:true},
                height:{required:true}

            },
            messages:{
                width:{required:"<br>Please enter width"},
                height:{required:"<br>Please enter height"}

            }
        });

            }

        } 
```

验证适用于模板选择，但不适用于 wallart 选择

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:45:31.390

这比您想象的要容易得多 - 默认情况下，jQuery 验证插件会忽略隐藏字段，从而为您提供“开箱即用”所需的功能。你需要做的是

首先确保您的插件版本 >= 1.9.0，然后

1.  为整个表单设置验证
2.  使用 getForm(...) 函数隐藏和显示表单的两个部分
3.  让 jQuery 验证完成剩下的工作

（所以你不需要你的 check(...) 功能）

保持你的 html 不变，用这个替换你的脚本

```
<script>

function getForm(id) {
    if (id == 1) {
        $("#templateForm").attr("style", "display:none;");
        $("#wallartForm").attr("style", "display:block inline;");

    }
    else {
        $("#templateForm").attr("style", "display:block inline;");
        $("#wallartForm").attr("style", "display:none;");
    }
}

$(function () {
    $('#addnews').validate({
        rules: {
            name: { required: true },
            code: { required: true },
            num_code: { required: true },
            width: { required: true },
            height: { required: true }
        },
        messages: {
            name: { required: "<br>Please enter size name" },
            code: { required: "<br>Please enter size code" },
            num_code: { required: "<br>Please enter size num code" },
            width: { required: "<br>Please enter width" },
            height: { required: "<br>Please enter height" }
        },
        submitHandler: function () {
            alert('form is valid');
        }
    });
});
</script> 
```

# validation - 绑定时如何拒绝来自bean的字段进行验证？

> ID：14273619
> 
> 赞同：0
> 
> 时间：2013-01-11T07:31:16.920
> 
> 标签：validation, spring-mvc, annotations, hibernate-validator

**`department_Id,department_Name,department_location`**在这个模型表单中，我有三个字段**`departmentForm`**作为模型对象。

我使用**注释**来验证字段。现在，我只想使用不同 jsp 页面中的两个字段 say**`create.jsp`**和不同 jsp 页面中的一个字段 say **`getDepartmentById`**。

当我按下提交按钮时**`create.jsp`**，验证正在发生，但在提供正确信息后，它未在此页面中提交原因。

我**没有给出一个`department_Id`**由我的 DAO 层自动生成的字段。所以，请帮助我，如何拒绝这个值来执行我的`create.jsp`页面以在数据库中成功创建部门。

当我打印**`BindingResult`**对象时，它显示如下：

```
Field error in object 'departmentForm' on field 'departmentId': rejected value [null]; 
codes [NotEmpty.departmentForm.departmentId,NotEmpty.departmentId,NotEmpty.java.lang.String,NotEmpty]; 
arguments [org.springframework.context.support.DefaultMessageSourceResolvable: 
codes [departmentForm.departmentId,departmentId]; arguments []; 
default message [departmentId],org.hibernate.validator.constraints.NotEmpty.message},
[Ljava.lang.Class;@4fc4a198,[Ljava.lang.Class;@764d2b11]; 
default message [may not be empty]` 
```

这就是我在控制器中编码的方式：

```
@RequestMapping(value = "/createDepartment", method = RequestMethod.POST)
public String createEmployee(@Valid DepartmentForm departmentForm,
        BindingResult bindingResult, Map<String, DepartmentForm> model)
        throws Exception {

    if (bindingResult.hasErrors()) {
        System.out.println(bindingResult);
        bindingResult.reject(departmentForm.getDepartmentId());
        return "departmentForm";
    }
    System.out.println("mr ankur jadiy");

    model.put("departmentForm", departmentForm);
    departmentForm.setUpdateStatus('A');
    if (departmentForm.getUpdateStatus() == 'A') {
        departmentServiceImpl
            .actionDecider(convertDeptFormToDeptBO(departmentForm));

    }
    return "Success";
} 
```

我的`DepartmentForm`代码如下：

```
package com.nousinfo.tutorial.model;

import javax.validation.constraints.Size;

import org.hibernate.validator.constraints.NotEmpty;

public class DepartmentForm {

    @NotEmpty
    @Size(min = 1, max = 20,message="")
    private String departmentId;
    @NotEmpty
    private String departmentName;

    private String departmentLocation;

    private Character updateStatus;
    public String getDepartmentId() {
        return departmentId;
    }

    public void setDepartmentId(String departmentId) {
        this.departmentId = departmentId;
    }

    public String getDepartmentName() {
        return departmentName;
    }

    public void setDepartmentName(String departmentName) {
        this.departmentName = departmentName;
    }

    public String getDepartmentLocation() {
        return departmentLocation;
    }

    public void setDepartmentLocation(String departmentLocation) {
        this.departmentLocation = departmentLocation;
    }

    public Character getUpdateStatus() {
        return updateStatus;
    }

    public void setUpdateStatus(Character updateStatus) {
        this.updateStatus = updateStatus;
    }
} 
```

我`create.jsp`的是

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://jakarta.apache.org/taglibs/input-1.0" prefix="input"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://www.springframework.org/tags" prefix="s"%>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Create Department</title>
<link rel="stylesheet" href="css/style.css" type="text/css"></link>
</head>

<body>

    <table width="1254" height="74" border="0" align="center">

        <tr>
            <td width="300" height="68" align="center" bgcolor="#99CCFF"><h2>
                    <span class="style1">Employee Details </span>
                </h2></td>
            <td width="100" height="68" align="center" bgcolor="#FFFFFF"><img
                src="./image/emps.jpg" width="190" height="92" /></td>
        </tr>
    </table>
    <p>
        <br />
    </p>
    <hr size="1" width="786">
    <form:form id="form" method="post" action="/EmployeeWebSpring/departmentController/createDepartment"
        modelAttribute="departmentForm">
        <table>
            <tr>
                <form:hidden path="updateStatus" />
            </tr>

            <tr>
                <td>
                    Department_Name:
                    <font color="red"><form:errors path="departmentName" /></font>
                </td>
            </tr>
            <tr>
                <td><form:input path="departmentName" /></td>
            </tr>

            <tr>
                <td>
                    Department_Location:
                    <font color="red"><form:errors path="departmentLocation" /></font>
                </td>
            </tr>
            <tr>
                <td><form:input path="departmentLocation" /></td>
            </tr>
        </table>

        <br>
        <br />
        <p>&nbsp;</p>
        <br>
        <tr>
            <td><input type="submit" name="method" value="save" /></td>
            <td><input type="submit" name="method" value="cancel" /></td>
        </tr>

        <hr size="1" width="786">
        <p>&nbsp;</p>
    </form:form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:24:56.823

What the error says is that you're missing value for `departmentId`, which is not surprising since you defined it as

```
@NotEmpty
@Size(min = 1, max = 20,message="") 
```

You don't really need to validate `departmentId` if it's autogenerated by your code. You probably should remove it from the `DepartmentForm`, especially since it's not in the form, or at least make it optional.

You can make it mandatory in your business object, but the form backing object should reflect what's in the form.

**update**

If `departmentId` is a database-generated id, you should set it as disallowed in your controller's `InitBinder`:

```
@InitBinder
public void initBinder(WebDataBinder binder) {
    binder.setDisallowedFields(new String[] { "departmentId" }); 
} 
```

# hadoop - 名称节点启动错误

> ID：14273620
> 
> 赞同：14
> 
> 时间：2013-01-11T07:31:21.547
> 
> 标签：hadoop, namenode

当我尝试在主节点上启动 hadoop 时，我得到以下输出。并且 namenode 没有启动。

```
[hduser@dellnode1 ~]$ start-dfs.sh
starting namenode, logging to /usr/local/hadoop/bin/../logs/hadoop-hduser-namenode-dellnode1.library.out
dellnode1.library: datanode running as process 5123\. Stop it first.
dellnode3.library: datanode running as process 4072\. Stop it first.
dellnode2.library: datanode running as process 4670\. Stop it first.
dellnode1.library: secondarynamenode running as process 5234\. Stop it first.
[hduser@dellnode1 ~]$ jps
5696 Jps
5123 DataNode
5234 SecondaryNameNode 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-08-17T08:45:33.300

“先停下来”。

*   首先调用 stop-all.sh

*   输入 jps

*   调用 start-all.sh（或 start-dfs.sh 和 start-mapred.sh）

*   输入 jps（如果 namenode 没有出现，输入“hadoop namenode”并检查错误）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-16T17:22:21.987

根据在较新版本的 hardoop 上运行“stop-all.sh”，这已被弃用。您应该改用：

`stop-dfs.sh`

和

`stop-yarn.sh`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-18T00:24:47.997

今天，在执行 pig 脚本时，我遇到了问题中提到的相同错误：

```
starting namenode, logging to /usr/local/hadoop/libexec/../logs/hadoop-training-namenode-localhost.localdomain.out
localhost: /home/training/.bashrc: line 10: /jdk1.7.0_10/bin: No such file or directory
localhost: Warning: $HADOOP_HOME is deprecated.
localhost: 
localhost: starting datanode, logging to /usr/local/hadoop/libexec/../logs/hadoop-training-datanode-localhost.localdomain.out
localhost: /home/training/.bashrc: line 10: /jdk1.7.0_10/bin: No such file or directory
localhost: Warning: $HADOOP_HOME is deprecated.
localhost: 
localhost: starting secondarynamenode, logging to /usr/local/hadoop/libexec/../logs/hadoop-training-secondarynamenode-localhost.localdomain.out
starting jobtracker, logging to /usr/local/hadoop/libexec/../logs/hadoop-training-jobtracker-localhost.localdomain.out
localhost: /home/training/.bashrc: line 10: /jdk1.7.0_10/bin: No such file or directory
localhost: Warning: $HADOOP_HOME is deprecated.
localhost: 
localhost: starting tasktracker, logging to /usr/local/hadoop/libexec/../logs/hadoop-training-tasktracker-localhost.localdomain.out 
```

所以，答案是：

```
[training@localhost bin]$ stop-all.sh 
```

然后输入：

```
[training@localhost bin]$ start-all.sh 
```

问题将得到解决。现在您可以使用 mapreduce 运行 pig 脚本了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-21T23:08:36.677

在 Mac 中（如果您使用自制软件安装）其中 3.0.0 是 Hadoop 版本。在 Linux 中相应地更改安装路径（只有这部分会更改 . `/usr/local/Cellar/`）。

```
> /usr/local/Cellar/hadoop/3.0.0/sbin/stopyarn.sh
> /usr/local/Cellar/hadoop/3.0.0/sbin/stopdfs.sh
> /usr/local/Cellar/hadoop/3.0.0/sbin/stop-all.sh" 
```

`alias`更适合专业用户在你的末尾写这个`~/.bashrc`或`~/.zshrc`（如果你是 zsh 用户）。每次您想停止 Hadoop 和所有相关进程时，只需`hstop`从命令行键入即可。

```
alias hstop="/usr/local/Cellar/hadoop/3.0.0/sbin/stop-yarn.sh;/usr/local/Cellar/hadoop/3.0.0/sbin/stop-dfs.sh;/usr/local/Cellar/hadoop/3.0.0/sbin/stop-all.sh" 
```

# c++ - 加载 xml 值并将其传递给 vc++ 中的字符串

> ID：14273621
> 
> 赞同：0
> 
> 时间：2013-01-11T07:31:26.637
> 
> 标签：c++, visual-c++, xml-parsing, tinyxml

我正在使用 vc++ 并尝试加载一个 xml 文件并将整个数据加载到一个字符串中，但没有得到结果

```
 char text[700] = {""};

 TiXmlDocument doc( "'demotest.xml" );
 bool loadOkay = doc.LoadFile();
 if ( !loadOkay )
 {
    printf( "Could not load test file 'demotest.xml'. Error='%s'. Exiting.\n", doc.ErrorDesc() );
    system("PAUSE");
    exit( 1 );
}

    printf( "** Demo doc read from disk: ** \n\n" );
    printf( "** Printing via doc.Print **\n" );
    //doc.Print( stdout );

    {
        printf( "** Printing via TiXmlPrinter **\n" );
        TiXmlPrinter printer;
        doc.Accept( &printer );
        fprintf( stdout, "%s", printer.CStr() );

//upto this line its working fine in console. but when I convert this string am getting struck

        wsprintf(text, "%s", (char*)printer.CStr());
        AddLOG_message(text, 0, true);

    } 
```

最后两行我应该得到 xml 的全部内容，包括标题、元素和值。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:39:41.443

我会这样做，使用更少的 C 代码、更多的 C++ 代码并弃用长度为 700 的有风险的 char 数组：

```
TiXmlPrinter printer;
doc.Accept( &printer );
doc.Print(); // simpler for stdout output
std::string text = printer.CStr(); // easier, safer this way
AddLOG_message( text.c_str(), 0, true ); 
```

# sql - sql列乘法错误

> ID：14273623
> 
> 赞同：0
> 
> 时间：2013-01-11T07:31:31.907
> 
> 标签：sql, multiplication

我试图在 sql 中执行乘法函数，但它不计算 d 值。d 问题是我忘记创建一个总行来存储相乘的值 ni 不能创建一个新表或添加 d 行..这是 d 代码我使用它显示的 nd 错误。帮忙。

```
<%
try
{
   Class.forName("com.mysql.jdbc.Driver");
   Connection conexion = DriverManager.getConnection("jdbc:mysql://localhost:3306/invent", "root", "hpdj850c");
   if (!conexion.isClosed())
   {
      Statement st = conexion.createStatement();
      ResultSet rs = st.executeQuery("select * from store");
      Statement sta = conexion.createStatement();
      ResultSet r = sta.executeQuery("select (rate*quantity) from store");

      out.println("<table class=\"twelve\"><thead><tr><th>Id</th><th>Name</th><th>Category</th><th>Rate</th><th>Quantity</th><th>Total</th></tr></thead>");
      while (rs.next() & r.next())
      {

         out.println("<tr>");
         out.println("<td>"+rs.getObject("itemno")+"</td>");
         out.println("<td>"+rs.getObject("name")+"</td>");
         out.println("<td>"+rs.getObject("category")+"</td>");
         out.println("<td>"+rs.getObject("rate")+"</td>");
         out.println("<td>"+rs.getObject("quantity")+"</td>"); 
         out.println("<td>"+r.getStatement() + "</td>");
         out.println("</tr>");

           }
      out.println("</table>");

      conexion.close();
   }
   else
      out.println("fail");
}
catch (Exception e)
{
   out.println("Exception " + e);
   e.printStackTrace();
}
%> 
```

全部的：

com.mysql.jdbc.StatementImpl@3b46c4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:36:48.770

而不是使用两个单独的查询使用单个查询来实现这一点

例如：

```
select            itemno ,
                  name ,
                  category ,
                  rate ,
                  quantity,
                  rate*quantity as total from Test 
```

# gcc - 我们可以用 -O0 标志交叉编译最新的 Linux 内核（3.0.1 或更高版本）吗？

> ID：14273626
> 
> 赞同：2
> 
> 时间：2013-01-11T07:31:44.557
> 
> 标签：gcc, linux-kernel, kernel, cross-compiling, compiler-optimization

我正在尝试使用 -O0 标志编译 Linux 内核以进行调试（以禁用 GCC 中的内联函数支持等优化，否则我会在堆栈帧中获得随机跳转/空洞）。

我做了一些谷歌搜索，发现很少有相关的帖子，但他们对这个想法并不十分鼓舞。一些人说它不可能，其他人则认为它可能不是很有用。我还在 KGDB 邮件列表中看到了一些补丁（针对 ARM）。现在我有点困惑。只是想知道是否有人尝试使用 -O0 标志编译最新内核。

我的 Linux 版本：Linux 3.0.1-rt11-svn9237 #2 PREEMPT RT Fri Dec 21 09:58:42 IST 2012 armv7l GNU/Linux

我的 GCC 版本：arm-none-linux-gnueabi-gcc-4.3.3

# java - Java测试框架

> ID：14273628
> 
> 赞同：-3
> 
> 时间：2013-01-11T07:31:47.350
> 
> 标签：java, testing, frameworks

我必须用 Java 编写一个自动化脚本来执行以下操作

1.  使用用户名和密码登录内部网站
2.  登录完成后，单击一个链接，该链接将打开另一个 Web 应用程序并确保该网站可用
3.  向指定组发送成功/失败电子邮件

上述作业必须每天在指定时间运行，以检查站点可用性。（我可以使用 Windows 调度程序将其安排为作业）

由于网络政策，我无法使用任何站点可用性网站来检查这一点。

市场上有很多基于 Java 的测试框架。

如果有人能指出我正确的框架，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:36:47.337

Selenium Web-Driver Automation 框架是最好的。它支持多种语言，以及 Java。您可以查看 seleniumorg 网站[http://seleniumhq.org/](http://seleniumhq.org/)

对于邮件，您可以使用 Java Mail API。

# ios - 应用程序从框架启动后立即呈现模态视图控制器

> ID：14273629
> 
> 赞同：1
> 
> 时间：2013-01-11T07:31:49.977
> 
> 标签：ios, objective-c, static-libraries, presentmodalviewcontroller, ios-frameworks

我正在创建一个框架，我会将其添加到一些项目中以完成特定功能。并且该框架将需要在应用程序启动后立即打开一个 presentModalViewController。为此，我需要知道主应用程序的第一个视图控制器的视图何时加载，之后，我将在框架内添加以下功能。

```
[firstLoadedViewController presentModalViewController:viewControllerInsideFramework]; 
```

如何通知框架已将 rootviewcontroller 分配给 Window 并完全加载它的视图？以及如何通过在框架内编写代码来找到 firstLoadedViewController 是什么？

请指教，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:47:10.140

如果您尝试从框架本身完成所有工作，那么您可以尝试通过将主包引用替换为包引用来仅修改主文件。

# php - 从 PHP 更改为 JS

> ID：14273632
> 
> 赞同：1
> 
> 时间：2013-01-11T07:31:59.243
> 
> 标签：php, javascript, html, input

我的问题可能是基本的，我只是缺乏技能。如何将以下代码转换为 javascript？：

```
 <?php
    for($i=1; $i<10; $i++){
        echo "<input type='text' placeholder='Word' name='word$i' /><br />";
    }
    ?> 
```

我想在用户每次按下按钮（已经构建）时添加一个输入，但我需要每个新输入的数字都比以前的数字低。例如：

输入 1 (... name='word1') *再次按下按钮* input 2 (... name='word2') *再次按下按钮* input 3 (... name='word3')

谢谢！2013 年快乐！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:42:44.047

```
for (var i = 0; i < 10; i++) {
  var input = document.createElement('input');
  input.setAttribute('type', 'text');
  input.setAttribute('placeholder', 'Word');
  input.setAttribute('name', 'word' + i);
} 
```

像这样的东西？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T07:39:49.200

好的，您创建了一个按钮，请在其上编写一个 onclick 事件，它会触发这样的功能，并创建一个可以添加元素的主 div

```
<input type="button" onclick="getElement();"/>
<di id="main"></div> 
```

请在函数 getElement 中编写以下代码：

```
var i=1;
function getElement(){
var str = "<input type='text' placeholder='Word' name='word"+i+"' />";
i++;
document.getElementById('main').innerHTML = str;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T07:49:27.933

在 Chrome 中测试

```
<input type="button" value="Magical pony time!" onclick="clickhandler()" />

<div id="container"></div>

<script type="text/javascript">
    // contains the counter for elements added
    window.__buttonClickCounter = 0; 

    // Keep reference to container
   var c = document.getElementById('container');

    // Click handler that appends to the contents of the container
    var clickhandler = function() {
        c.innerHTML = c.innerHTML + "<input type='text' placeholder='Word' name='word"+window.__buttonClickCounter+"' value="+window.__buttonClickCounter+" /><br />";
        window.__buttonClickCounter++;
    }
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T07:38:35.400

尝试

```
<?php
for($i=1; $i<10; $i++){
?>
<input type='text' placeholder='Word' name='word'<?php echo $i;?>/>
<?php
}
?> 
```

# asp.net - 编辑时如何使单元格只读？

> ID：14273635
> 
> 赞同：0
> 
> 时间：2013-01-11T07:32:22.063
> 
> 标签：asp.net, vb.net, devexpress

我想让单元格品牌代码仅在单击编辑时读取。但是当我使用只读属性时，它变得如此复杂。因为点击新建时，品牌代码无法点击。

这里我的代码

```
<dx:ASPxGridView id="gvBrand" runat="server" CssPostfix="Aqua" SettingsBehavior-ConfirmDelete="true" CssFilePath="~/App_Themes/styles.css" AutoGenerateColumns="False" 
  DataSourceID="SqlDataSource1" KeyFieldName="BrandCode" >
   <Styles CssPostfix="Aqua" CssFilePath="~/App_Themes/styles.css">
     <LoadingPanel ImageSpacing="8px" />
   </Styles>

   <SettingsPager>
      <AllButton Text="All" />
      <NextPageButton Text="Next &gt;" />
      <PrevPageButton Text="&lt; Prev" />
   </SettingsPager>

   <SettingsText CommandUpdate="Save" />
   <ImagesFilterControl>
        <LoadingPanel Url="~/App_Themes/Editors/Loading.gif"></LoadingPanel>
   </ImagesFilterControl>

   <Images SpriteCssFilePath="~/App_Themes/{0}/sprite.css">
      <LoadingPanelOnStatusBar Url="~/App_Themes/GridView/gvLoadingOnStatusBar.gif">     </LoadingPanelOnStatusBar>

       <LoadingPanel Url="~/App_Themes/GridView/Loading.gif"></LoadingPanel>
    </Images>

        <StylesEditors>
            <CalendarHeader Spacing="1px"></CalendarHeader>

            <ProgressBar Height="25px"></ProgressBar>
            </StylesEditors>
                <SettingsLoadingPanel ImagePosition="Top" />
                <Settings ShowFilterRow="True" ShowGroupPanel="true" />

                <Columns>
                    <dx:GridViewCommandColumn VisibleIndex="0">
                        <EditButton Visible="True" />
                        <NewButton Visible="True" />
                        <DeleteButton Visible="True" />
                    </dx:GridViewCommandColumn>

                <dx:GridViewDataTextColumn FieldName="BrandCode" VisibleIndex="1" Caption="Brand Code"
                        EditCellStyle-HorizontalAlign="Left" >
                        <EditFormSettings Visible="True" ColumnSpan="1" />
                        <PropertiesTextEdit MaxLength="3" Width="35px">
                            <ValidationSettings SetFocusOnError="True">
                                <RequiredField IsRequired="True" />
                            </ValidationSettings>
                        </PropertiesTextEdit>
                    </dx:GridViewDataTextColumn>

                    <dx:GridViewDataTextColumn FieldName="BrandName" VisibleIndex="2" 
                        Caption="Brand Name" >
                        <EditFormSettings ColumnSpan="2" />
                        <PropertiesTextEdit MaxLength="50">
                            <ValidationSettings SetFocusOnError="True">
                                <RequiredField IsRequired="True" />
                            </ValidationSettings>
                        </PropertiesTextEdit>
                    </dx:GridViewDataTextColumn>

                    <dx:GridViewDataCheckColumn FieldName="isBlock" Visible="false"  
                        EditCellStyle-HorizontalAlign="Left" >
                    <EditFormSettings Visible="true"  VisibleIndex="3" Caption="Block"/>
                    </dx:GridViewDataCheckColumn>

                </Columns>
            </dx:ASPxGridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:55:16.753

您需要处理[ASPxGridView.CellEditorInitilaize](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_CellEditorInitializetopic)事件：

```
protected void MyGridOnCellEditorInitialize(object sender, ASPxGridViewEditorEventArgs e) {
    ASPxGridView gridView = (ASPxGridView).sender;
    e.Editor.ReadOnly = !gridView.IsNewRowEditing && "BrandCode".Equals(e.Column.FieldName);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T07:58:47.160

感谢您的答案，我昨天才找到它。

VB.NET

```
 Protected Sub gvBrand_CellEditorInitialize(ByVal sender As Object, ByVal e As DevExpress.Web.ASPxGridView.ASPxGridViewEditorEventArgs) Handles gvBrand.CellEditorInitialize
        If (gvBrand.IsNewRowEditing) Then
            Return
        End If
        If (e.Column.FieldName = "BrandCode") Then
            e.Editor.ReadOnly = True

        End If
    End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-26T11:22:29.383

在内联模式下， e.Editor.ReadOnly 对我不起作用，但设置 e.Editor.Enabled 确实：

```
 protected void OnCellEditorInitialize(object sender, ASPxGridViewEditorEventArgs e)
    {
        List<string> editableFields = new List<string> {"Status"};
        e.Editor.Enabled = editableFields.Contains(e.Column.FieldName);
    } 
```

# css - 我们如何一次为一个 div 编写 3 个类的代码？

> ID：14273636
> 
> 赞同：-3
> 
> 时间：2013-01-11T07:32:25.933
> 
> 标签：css

我有 1`<div>`和 3 节课`.test1`，例如`.test2` , `.test3`。

我们如何一次为一个 div 编写 3 个类的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T07:35:36.107

```
<div class="test1 test2 test3"></div> 
```

据我了解，这似乎是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T07:39:42.427

如果你已经放置了三个不同的类，三个不同的内容，但想应用相同的样式，那么看看这个：[示例](http://jsfiddle.net/eQ9zp/)

HTML：

```
<div class="test1">
  Hey
</div>
<div class="test2">
  Heyy
</div>
<div class="test3">
  Heyyy
</div> 
```

CSS：

```
 .test1, .test2, .test3 {
  font: 20px;
  color: red;
  font-weight: bold;
} 
```

或者，如果您想要其他东西，例如将三个类应用于 div，那么 woutr_be 的答案是另一种选择。

抱歉，伙计，但无法完全理解您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T07:47:01.943

```
 .test1{
    font-weight:bold;
    }   

   .test2{
    font-size:26px;
   }

   .test3{
    text-decoration:underline;
   }

 <div class="test1 test2 test3">Text</div> 
```

[http://jsfiddle.net/nqRdM/1/](http://jsfiddle.net/nqRdM/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T07:47:42.913

只是为了补充以前的评论和回答：

从 html 的角度来看，您可以一次将这三个类添加到一个`div`中

```
<div class="test1 test2 test3"></div> 
```

另一方面，`div`从 css 的角度（具体地）参考你所做的

```
div.test1.test2.test3 {
 /* css properties here */
} 
```

...没有空格或逗号。

您还可以为每个类设置不同的属性

```
.test1 {  font-size: 12px; } 
.test2 {  color: red; } 
.test3 {  background-color: blue; } 
```

...这些属性将应用于`div`

# wpf - 使用 TextBlock 出价不起作用

> ID：14273640
> 
> 赞同：1
> 
> 时间：2013-01-11T07:32:51.143
> 
> 标签：wpf, c#-4.0, data-binding, binding

我的模型为：

```
namespace Forecast.MVVM.WPF.ViewModel
{
    public class ApplicationInfoViewModel
    {
       private string versionNumber;
       public ApplicationInfoViewModel()
        {
          versionNumber = Assembly.GetExecutingAssembly().GetName().Version.ToString();
        }
       public string VersionNumber
        {
            get { return versionNumber; }
            set { versionNumber = value; }
        }
} 
```

我的观点是，我正在设置 datContext 并将值设置为；

```
<UserControl .... xmlns:AppInfo="clr-namespace:Forecast.MVVM.WPF.ViewModel" .../>
 <UserControl.Resources>
        <AppInfo:ApplicationInfoViewModel x:Key="forecastVersionInfo"/>
    </UserControl.Resources>
<Grid>
<TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding VersionNumber}" VerticalAlignment="Bottom"/>
</Grid> 
```

但我看不到值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:34:26.863

**第一种方式：**

尝试 tro 替换`<UserControl.Resources>`为`<UserControl.DataContext>` ... 并删除“ `x:Key="forecastVersionInfo"`”。

**第二种方式：** 或设置`DataContext="{StaticResource forecastVersionInfo}"`在您的文本块上。

**第三种方式：** 根据[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/ms746695.aspx)，在您的文本块绑定上设置 Source 属性：

```
Text="{Binding VersionNumber, Source={StaticResource forecastVersionInfo}}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:35:54.483

您没有设置 DataContext

```
<UserControl.DataContext>
   <AppInfo:ApplicationInfoViewModel />
</UserControl.DataContext> 
```

如果要引用资源，可以将其设置为`Grid`或将资源移动到`App.Resources`并`DataContext`作为属性应用`UserControl`

```
<Grid DataContext="{Binding Path={StaticResource forecastVersionInfo}}">
    <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding VersionNumber}" VerticalAlignment="Bottom"/>
</Grid> 
```

# internet-explorer-9 - 使用 Selenium 2.28 时避免更改 IE 安全设 置的任何解决方法？

> ID：14273644
> 
> 赞同：0
> 
> 时间：2013-01-11T07:33:17.193
> 
> 标签：internet-explorer-9, selenium-webdriver

我正在使用 selenium-server-standalone-2.28.0.jar 来自动化 Web 应用程序行为。我正在使用 Internet Explorer 9 来测试应用程序。

以前我对同一组测试用例使用 selenium-server-standalone-2.17.0.jar 版本没有任何问题。但是当我将 jar 版本更新到 2.28 时，应用程序无法在 Internet Explorer 中运行测试用例。我发现对于这个 Selenium 版本，我需要有 IEDriverServer_Win32_2.28.0 并且需要使用 IEDriverServer 路径设置 webdriver.ie.driver 系统属性。

此外，我需要为 Internet Explorer 中的所有区域设置保护模式设置，这会导致系统中的防病毒软件阻止 IEDriverServer.exe 运行。我需要绕过防病毒软件来测试我的应用程序。

问题是在任何企业系统中，不允许开发人员更改任何与 IE 安全相关的设置。即使他们可以这样做，允许应用程序绕过防病毒软件也几乎是不可能的。我的问题是是否有任何解决方法可以实现这一目标？

谢谢，拉纳班纳吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:22:24.613

您有一些可用的选项。您可以在 IE 驱动程序上设置一项功能，该功能将绕过保护模式检查。但是，在您采用这种方法之前，我恳请您阅读（并让您的“企业 IT 安全”团队阅读）[这篇博](http://jimevansmusic.blogspot.com/2012/08/youre-doing-it-wrong-protected-mode-and.html)文，以彻底解释为什么这是一个坏主意。

此外，可能值得澄清一下您的防病毒软件“阻止 IEDriverSErver.exe 运行”是什么意思。它根本不启动吗？它可以运行，但您的 WebDriver 代码会引发异常吗？还是你的意思是别的？

如果防病毒软件实际上阻止了 IEDriverServer.exe 的执行，则由于保护模式设置，IEDriverServer.exe 可能没有问题。将随机命名的 .dll 提取到临时目录并加载它的可执行文件更有可能存在问题。IEDriverServer.exe 上有一个命令行开关，用于控制用于提取的目录；您需要查阅您的语言绑定以了解如何将其传递给可执行文件。

# ruby-on-rails - 如何从 Ubuntu 12.04 卸载 Nginx 并恢复 Apache

> ID：14273646
> 
> 赞同：0
> 
> 时间：2013-01-11T07:33:22.653
> 
> 标签：ruby-on-rails, apache, nginx, ubuntu-12.04

我已经在我的笔记本电脑上安装了 Ruby，Rails，我对 Ubuntu 不熟悉，当我安装 Ruby 时，未经我的许可也安装了 Nginx，我是一名 PHP 程序员，现在我的 apache 被 Nginx 覆盖了，请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:10:33.990

nginx 安装不应覆盖任何 apache 文件。我打赌你只需要停止它并启动 apache。

停止 nginx

```
/usr/bin/nginx -s stop 
```

启动阿帕奇

```
sudo /etc/init.d/apache2 start 
```

您也可以使用重新启动和停止而不是开始

使舒尔

```
apache2/conf/httpd.conf 
```

文件是正确的

卸载 nginx

```
sudo rm -f -R /usr/local/nginx && rm -f /usr/local/sbin/nginx 
```

# c - 队列结构中的“超自然”活动

> ID：14273650
> 
> 赞同：2
> 
> 时间：2013-01-11T07:33:44.883
> 
> 标签：c, string, char, queue

```
#include <stdio.h>
#include <stdlib.h>

/* Report an error and abort */
#define FATAL_ERROR(message)                        \
  {                                 \
    fprintf(stderr,"In %s(%d) [function %s]: %s\n",         \
        __FILE__, __LINE__, __FUNCTION__ , (message)  );        \
    abort();                                \
  }                                 \

/* Report a posix error (similar to perror) and abort */
#define FATAL_PERROR(errcode) FATAL_ERROR(strerror(errcode))

void* Malloc(size_t n)
{
  void* new = malloc(n);
  if(new==NULL) FATAL_ERROR("Out of memory.");
  return new;
}

typedef struct twit{
    char data[141];               //contains the actual data
    //struct twit *prev;      //pointer to previous node (Closer to front)
    struct twit *next;      //pointer to next node (Closer to back)
}twit;

typedef struct twitbuffer{
    twit *first;
    twit *last;
    int size;
}twit_buffer;

/*
   function for create a new buffer
*/
void new_twitbuffer(twit_buffer *a)
{
    a=Malloc(sizeof(twit)*12000);
    a->first = a->last = NULL;
    a->size = 0;
    return;
}

int twitbuffer_empty(twit_buffer *a) {
    if(a->first == NULL)
        return 1;
    else
        return 0;
}

/*
   function to insert a new twit in the buffer
*/
void insertTwit(twit_buffer *a, char *data)
{
    twit new;
    if (strlen(&data)<=140){
        strcpy(&new.data,data);
    }
    else{
        printf("Twit > 140 characters...");
    }
    if (new.data == NULL) {
            //errno = ENOMEM;
        printf("error!");
            return;
    }

    if(a->first==NULL){
        a->first = a->last = &new;
    }else{
        a->last->next=&new;
        a->last=&new;
    }
    new.next= NULL;
    a->size++;
    return;
}

char* popTwit(twit_buffer *a) {
    if (twitbuffer_empty(a)) {
        return NULL;
    }
    char *data;
    //strcpy(&data,a->first->data);
    data=a->first->data;
    if (a->first == a->last)
        a->first = a->last = NULL;
    else
        a->first = a->first->next;
    a->size--;
    return data;
}

twit_buffer mytwitbuffer;

int main()
{
    new_twitbuffer(&mytwitbuffer);

    //printf("a=%d",mytwitbuffer);

    char *a = "first twit\n";
    char *b = "second twit\n";
    char *c = "third twit\n";

    insertTwit(&mytwitbuffer, a);
    insertTwit(&mytwitbuffer, b);
    insertTwit(&mytwitbuffer, c);

    char *poppp;
    poppp = popTwit(&mytwitbuffer);
    printf("%s", poppp);

    poppp = popTwit(&mytwitbuffer);
    printf("%s", poppp);

    poppp = popTwit(&mytwitbuffer);
     printf("%s", poppp);
} 
```

这是我实现队列的代码。当我执行这个我得到这个结果：

```
thir�it
(null)(null) 
```

这意味着前两次插入没有正确完成，第三次以“超自然”方式进入标准输出！你有什么想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T07:45:21.570

您正在 twit 缓冲区中存储对局部变量“new”的引用。你应该 Malloc 它，而不是在本地声明它

# doctrine-orm - Doctrine 2 中的外键映射

> ID：14273652
> 
> 赞同：2
> 
> 时间：2013-01-11T07:33:57.350
> 
> 标签：doctrine-orm, zend-framework2

我有一个表用户，其中 id 作为主键，user_type_id 作为外键，它是表 user_type 的主键。有人可以发现我在用户实体中使用的映射中的错误吗？

```
/**
 * Primary Identifier
 * @OneToMany(targetEntity="user_type")
 * @JoinColumn(name="user_type_id", referencedColumnName="id")
 * @ORM\Column(name="user_type_id", type="integer")
 * @var integer
 * @access protected
 */
protected $userTypeId; 
```

我也应该在 user_type 表中给出映射。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:49:23.323

实际上似乎有很多错误。首先：在 ZF2 中，所有注释都需要在前面加上`@ORM\`so `@OneToMany`=>`@ORM\OneToMany`和`@JoinColumn`=> `@ORM\JoinColumn`。在这个`@ORM\Column`例子中甚至不需要 -Part，因为它会自动定义为`@ORM\JoinColumn`

要了解有关精确错误的更多信息，请使用 Doctrine-CLI-Tool 来验证您的 Annotation-Schemata

```
./vendor/bin/doctrine-module orm:validate-schema 
```

# r - R sqlite：使用两个表进行更新会给出语法错误“靠近”：

> ID：14273656
> 
> 赞同：1
> 
> 时间：2013-01-11T07:34:26.913
> 
> 标签：r, sqlite, sql-update

我想对 sqlite 上的两个表进行更新。

```
x1 <- data.frame(id = rep(1,3),
                  t = as.Date(c("2000-01-01","2000-01-15","2000-01-31"))
)
x1.h <- 0
x2 <- data.frame(id = 1, start = as.Date("2000-01-14")) 
```

更新是：

```
sqldf(paste("UPDATE x1"
        ," SET x1.h = 1"
        ," WHERE EXISTS (SELECT *"
        ,"               FROM x2"
        ,"               WHERE x1.id = x2.id"
        ,"                     AND x1.t < x2.start"
        ,"               )"
        )
  ) 
```

我收到以下错误：

```
Error in sqliteExecStatement(con, statement, bind.data) : 
   RS-DBI driver: (error in statement: near ".": syntax error) 
```

有人知道出了什么问题吗？感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:34:56.340

你为什么`sqldf`要更新？我认为`sqldf`仅用于`select`声明。

我会习惯`RSQLite`这个。

首先，我更正了您的 sql 语句。我更喜欢使用 sep '\n' 来获得与 cat 的漂亮请求

```
str.update <- paste(" UPDATE x1"
            ," SET h = 1 "              ## here the error
            ," WHERE EXISTS (SELECT * "
             ,"              FROM x2 "             ## here second error 
             ,"              WHERE x1.id = x2.id "
            ,"               AND x1.t < x2.start "
            ,"       )"
      ,sep ='\n'
)

cat(str.update)
 UPDATE x1
 SET h = 1 
 WHERE EXISTS (SELECT * 
              FROM x1,x2    ##
              WHERE x1.id = x2.id 
               AND x1.t < x2.start 
       ) 
```

然后你可以这样做：

```
library(RSQLite)
con <- dbConnect(SQLite(), ":memory:")
dbWriteTable(con, "x1", x1)            # I create my table x1
dbWriteTable(con, "x2", x2)            # I create my table x2
res <- dbSendQuery(con, str.update)   
dbReadTable(con,name='x1')            ## to see the result 
```

**编辑**

我在操作说明后编辑我的答案（`FROM x1,x2` 变为`FROM x2`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T10:14:01.330

我找到了这个解决方案：

```
x1$h <- 0
x1 <- sqldf(c("UPDATE x1
        SET h = 1
        WHERE EXISTS (SELECT x1.id
                        FROM x2
                        WHERE x1.id = x2.id
                          AND x1.t < x2.start
                     )",
        "SELECT * FROM main.x1")) 
```

给予：

```
> x1

  id          t h
1  1 2000-01-01 1
2  1 2000-01-15 0
3  1 2000-01-31 0 
```

来源： [https](https://code.google.com/p/sqldf/#8._Why_am_I_having_problems_with_update) ://code.google.com/p/sqldf/#8._Why_am_I_have_problems_with_update ？其他要提醒的事情：显然别名不起作用，例如UPDATE x1 a ...感谢您的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T08:34:06.560

我认为你内心的 SELECT 并没有说它从哪里选择。分开试试。我认为它应该看起来更像：

```
SELECT * FROM x1,x2 WHERE x1.id = x2.id AND x1.t < x2.start 
```

# html - 如何在播放器中隐藏音乐href？

> ID：14273658
> 
> 赞同：0
> 
> 时间：2013-01-11T07:34:43.620
> 
> 标签：html, download, mp3, jplayer

我在我的网站上使用 jplayer，但顶部只有一个播放器可以播放页面上的每个 mp3（如 deezer）。这就是我使用[demo04](http://jplayer.org/latest/demo-04/)的原因，因为我想显示当前正在播放的歌曲，并且我想即时添加 mp3（也许可以通过其他方式实现？）。我可以通过一个简单的链接向播放器添加音乐，例如：

```
 <a href="http://www.jplayer.org/audio/mp3/Miaow-05-The-separation.mp3" class="track">The Separation</a> 
```

所以我的问题来自演示，它不会阻止下载曲目（右键单击>将目标另存为），我需要这个功能。

简而言之，是否可以隐藏href或crypt呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:57:08.553

不，这是不可能的。

你可以让用户很难。但你无法阻止它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T07:51:48.833

不，这是不可能的。

您可以加密名称，但加密总是有解密。

此外，如果您查看 Google 的搜索结果，您会发现：

[如何防止从我的网站下载图像和视频文件？](https://stackoverflow.com/questions/1294501/how-to-prevent-downloading-images-and-video-files-from-my-website)

# .net - 创建一个允许在一行中声明/初始化的构造方法

> ID：14273659
> 
> 赞同：0
> 
> 时间：2013-01-11T07:34:57.710
> 
> 标签：.net, vb.net

如果我使用其中一种内置类型，`VB.NET`我可以在一行中声明和初始化......

```
Dim foo As String = "Привет мир" 
```

我用以下重载的构造方法创建了一个类“bar”......

```
Public Class bar

    Private fText As String

    Public Sub New()
        fText = ""
    End Sub

    Public Sub New(ByVal value As String)
        fText = value
    End Sub

    Public ReadOnly Property Text() As String
        Get
            Return fText
        End Get
    End Property

End Class 
```

如何编写构造函数，以便我可以执行较短版本的声明/初始化，而不是执行以下操作？

目前`bar`我这样做：

```
Dim myBar As bar
myBar = New bar("Привет мир") 
```

我该如何设置才能`bar`使这个较短的版本成为可能？： `Dim myBar As bar = "Привет мир"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:43:09.050

您想要的可以使用隐式转换运算符：

```
class bar
{
 //...
    public static implicit operator bar(string value)
    {
        return new bar(value);
    }
} 
```

虽然我不建议使用此功能来缩短构造线，但这将是一个不好的做法。

ps 对不起 c# 代码片段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T07:40:30.957

如果您使用公共设置器创建属性：

```
Public Class bar
    Public Property Text() As String

    Sub New()
        ' set a default value for the property
        Text = ""
    End Sub
End Class 
```

你可以使用类初始化语法：

```
Dim bar = New bar With {.Text = "Привет мир"} 
```

使用这种语法，您可以在实例化对象时设置任何公共属性。您不需要特定的构造函数：

```
Dim bar = New bar With {.Text = "Привет мир", .Foo = "foo", .Bar = "bar"} 
```

如果该属性应该是只读的并且只能通过构造函数进行初始化，那么您当前的代码就可以了。

# c# - 动态设置 html 表中的 OnClick 按钮

> ID：14273660
> 
> 赞同：2
> 
> 时间：2013-01-11T07:35:01.000
> 
> 标签：c#, asp.net, button

我正在动态创建一个表，每一行将包含一个按钮，这个按钮将调用一个函数，每个按钮将处理不同的参数，例如，

```
 string Parameter1 = "MyValue";
    string Parameter2 = "MyOthervalue";

    HtmlInputButton input = new HtmlInputButton();
    input.ID = "Button1";
    input.Value = "button";
    input.Attributes.Add("onclick", "MyFunction(" + Parameter1 + "," + Parameter2 + ");");

    td = new HtmlTableCell();
    td.Align = "center";
    td.Controls.Add(input);
    tr.Cells.Add(td); 
```

当用户单击按钮时，我需要运行 MyFunction 然后刷新页面以查看更改。

我知道也许我可以打开第二个页面并在 URL 中发送参数，但我想在同一页面中使用代码，然后重新加载页面。

什么是最好的方法。

谢谢，

编辑。

我能够通过以下方式解决它：

```
 input = new Button();
    input.Text = "Click Me";
    input.CommandArgument = "3|Parameter3";
    input.Command += new CommandEventHandler(Button_Handler);

    td = new HtmlTableCell();
    td.Align = "center";
    td.Controls.Add(input);

    tr.Cells.Add(td);
    tbTable.Rows.Add(tr);

public void Button_Handler(object sender, CommandEventArgs e)
{
    Button mybutton = (Button)sender;
    string[] Parameters = e.CommandArgument.ToString().Split('|');
    mybutton.Text = Parameters[0] + "-" + Parameters[1];
    //Call MyFunction(Parameters[0], Parameters[1]);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:42:41.550

我有一个技巧，您可以使用隐藏按钮和隐藏字段：

HTML：

```
<script type="text/javascript">
    function MyFunction() {
        // do something
        document.getElementById("<%= hid.ClientID %>").value = "some value";

        // trigger hidden button click
        document.getElementById("<%= hiddenButton.ClientID %>").click();
    }
</script>

<asp:HiddenField ID="hid" runat="server" />
<asp:Button ID="hiddenButton" runat="server" OnClick="hiddenButton_Click" style="display:none" /> 
```

后面的代码：

```
protected void hiddenButton_Click(object sender, EventArgs e)
{
     // your business goes here
     string value = hid.Value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T07:45:05.400

如果 MyFunction 是一个 javascript 函数，您可以`location.reload()`在其末尾添加以重新加载页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T07:55:16.263

在这里，我制作了一些关于如何动态添加点击事件的示例代码：

```
 void Page_Load(Object sender, EventArgs e)
  {
    HtmlInputButton NewButtonControl = new HtmlInputButton("submit");
    NewButtonControl.ID = "NewButtonControl";
    NewButtonControl.Value = "Click Me";

    // Create an EventHandler delegate for the method you want to handle the event
    // and then add it to the list of methods called when the event is raised.
    NewButtonControl.ServerClick += new System.EventHandler(this.Button_Click);

    // Add the new HtmlInputButton control to the Controls collection of the
    // PlaceHolder control. 
    ControlContainer.Controls.Add(NewButtonControl);
  }

  void Button_Click(Object sender, EventArgs e)
  {
    // Display a simple message. 
    Message.InnerHtml = "Thank you for clicking the button.";
  } 
```

要刷新页面，您可以调用 Javascript 函数，如下所示：

```
<script type="text/javascript">
  function reloadPage()
  {
    window.location.reload()
  }
</script> 
```

或试试这个：

```
Response.Redirect(Request.Url.AbsoluteUri); 
```

我希望它有帮助

# javascript - 为什么不调用 javascript onclick 函数？

> ID：14273661
> 
> 赞同：0
> 
> 时间：2013-01-11T07:35:07.863
> 
> 标签：javascript, onclick, alert

我创建了一个[JSFiddle](http://jsfiddle.net/5c4Tn/17/)来描述这个问题。`doSomething()`为什么我调用该函数时没有显示警报？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T07:39:24.210

这是因为`doSomething()`函数没有在 HTML 页面中定义。在 jsfiddle 中，您的函数（在 js 窗格中）由 jquery 的文档 onload 事件包装。（有关设置，请参见 jsfiddle 的左侧）。所以它是这样执行的，

```
$(document).ready(function() {
    function doSomething() {
      alert('Hello!'); 
    }
}); 
```

看看它是如何包装的。它无法访问。要修复它，您应该将其分配给`window`对象。在 js 窗格中将函数写为

```
window.doSomething=function() {
  alert('Hello!'); 
} 
```

它会工作

* * *

建议您不要使用`onclick`HTML 元素的属性。最好用 JS 分配事件处理程序。

```
$("img").click(function(){
  alert("Hello");
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-11T07:39:30.977

您需要禁用 jsfiddle 中的框架选项才能使 javascript 工作

[演示](http://jsfiddle.net/5c4Tn/22/)

```
function doSomething() {
  alert('Hello!'); 
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-11T07:40:48.190

这是一个“小提琴”。从“选择`nowrap (head)`框架”字段中的第一个选项中选择。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-11T07:45:02.590

JsFiddle 为您做的是为您创建`<HTML>`,`<head>`和`<body>`标签。您不应该将它们包含在您的 HTML 中，因为这会使标记在 JsFiddle 处理后无效。它还将您的 JS 包装在文档的 onload 事件中。因此，您的函数没有像您想象的那样在根范围内定义，而是在`document.onload`函数的范围内定义，您无法从主体内部访问它，因为那是该函数之外的。我将 JsFiddle 属性 'wrap in' 更改为 'no wrap (head)' 并且它起作用了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T07:37:31.947

您的功能`dosomeThing()`未在页面中定义，只需用这个替换标题标签

```
 <head>
    <script>
      function doSomething() {
  alert('Hello!'); 
}
    </script>
  </head> 
```

然后再试一次

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T08:05:47.053

这是您的完整代码。只需复制并粘贴您的编辑器。这是

```
<!doctype html>
<html lang='en'>
<head>
<meta charset='utf-8'>
<title>Javascript Events</title>
<script type='text/javascript'>
window.onload = function() {
    var image_one = document.getElementById('imageOne');
    var image_two = document.getElementById('imageTwo');

    image_one.onclick = function() {
        alert('Hello!');
    }

    image_two.onclick = function() {
        alert('Hello!');
    }

}
</script>
</head>
<body>
    <img id="imageOne" src="http://upload.wikimedia.org/wikipedia/commons/thumb/0/0c/White_and_yellow_flower.JPG/320px-White_and_yellow_flower.JPG" />
    <img id="imageTwo" src="http://upload.wikimedia.org/wikipedia/en/7/70/Example.png" /> 
</body>
</html> 
```

# pymongo - 如何在 mongo db 中否定复杂的 where 子句

> ID：14273664
> 
> 赞同：1
> 
> 时间：2013-01-11T07:35:16.087
> 
> 标签：pymongo

我有一个动态生成的 mongo db 复杂过滤器，它可能看起来像

```
where_condition = {"$and":[{"column_3": "Offer"}, {"column_2":"MSN"}]}
collection.find(where_condition) 
```

这种情况可能有未知的深度`$and`和`$or`

是否有可能找到 where_condition 的负数

这不起作用

```
not_condition = {"$not": where_condition} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T03:40:19.943

你会想要使用 $nor。像这样的东西：

```
where_condition = {"$and":[{"column_3": "Offer"}, {"column_2":"MSN"}]}
not_condition = {"$nor":[{"column_3": "Offer"}, {"column_2":"MSN"}]} 
```

[您可以在$nor](http://docs.mongodb.org/manual/reference/operator/nor/)的 mongodb 文档上找到更多信息。

# smalltalk - smalltalk 中的临时多态性

> ID：14273667
> 
> 赞同：1
> 
> 时间：2013-01-11T07:35:33.917
> 
> 标签：smalltalk

在不使用 if-test 或 is-a 测试进行类型检查的情况下，这如何在 smalltalk 中完成？

例如 ：

```
function Add( x, y : Integer ) : Integer;
begin
    Add := x + y
end;

function Add( s, t : String ) : String;
begin
    Add := Concat( s, t )
end; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T10:18:03.397

Smalltalk 没有您的示例中的全局方法。要实现您的示例，您可以将该方法添加`#add:`到两个类`Integer`并`String`作为类扩展：

```
Integer>>add: anInteger
  ^ self + anInteger

String>>add: aString
  ^ self , aString 
```

然后你可以编写如下代码：

```
1 add: 2\.                 " -> 3 " 
'foo' add: 'bar'.         " -> 'foobar' " 
```

不需要 if 测试，因为根据方法的接收者调用正确的方法`add:`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T10:15:48.897

您可以实现[Double Disptach](http://www.cincomsmalltalk.com/userblogs/ralph/blogView?showComments=true&entry=3485318158 "双重派送")：

```
String>>add: other
    ^ self, other adaptToString

String>>adaptToString
    ^ self

Number>>adaptToString
    ^ self asString

Number>>add: other
    ^ self + other adaptToInteger

... and so on 
```

# adobe-analytics - Omniture 表单完整跟踪器当前触发两次

> ID：14273672
> 
> 赞同：1
> 
> 时间：2013-01-11T07:35:57.050
> 
> 标签：adobe-analytics

我目前正在使用 Omniture 分析进行表单跟踪。当我在registration.cshtml页面上的按钮单击事件上粘贴以下文本时，它只触发一次，这是正确的。

```
var s = s_gi(s_account);
                s.linkTrackVars = 'prop1,prop8,eVar1,eVar8,events';
                s.prop1 = 'Registration'; s.prop8 = 'Tier 3|Form Complete';
                s.eVar1 = s.prop1;
                s.eVar8 = s.prop8;
                s.linkTrackEvents = 'event2,event8'; s.events = 'event2,event8';
                (s.tl(this, 'o', 'Form Complete')); 
```

但这不是正确的方法，因为用户在填写表格时可能会犯一些错误，因此从技术上讲，表格并不完整。

我在一个javascript函数中添加了这个，它检查表单是否有效，然后它应该触发omniture调用。但这样做会被解雇两次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:00:12.827

如果它发送两个图像请求，那么这意味着该函数被调用了两次，或者您在某处有两个 s.tl 函数。

我实际上建议在注册确认页面上将数据发送到 SiteCatalyst；这样您就知道数据已发送到您的服务器。如果您还想发送表单信息，请将其放入查询字符串中，并使用 getQueryParam 插件获取查询字符串值并将其作为图像请求的一部分传递。

# android - 来电屏幕上的活动对话框

> ID：14273674
> 
> 赞同：2
> 
> 时间：2013-01-11T07:36:12.177
> 
> 标签：android

每当来电屏幕上有来电时，我都会尝试显示来电者详细信息。

我有一个`BroadcastReceiver`启动一个`Intent Service`，它在来电屏幕上进一步启动一个活动。一切正常，除了用户接听电话的滑块消失了。一旦我点击返回，它就会再次出现，从那时起一切都很好。

我想要的是显示`Activity Dialog`来电屏幕。对话框应该对用户触摸事件起作用，以便用户可以在来电屏幕上的任何位置滑动活动对话框。当活动对话框出现在来电屏幕上时，用户也应该能够接听电话。

活动对话框是指显示为 Dilaog 即主题对话框的活动。

温暖的问候

```
public class IncomingCallDetailsDialogActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    String message = getIntent().getStringExtra("key");
    Log.e("TAG", "Message = "+message);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.dialog_activity);

    getWindow().addFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL);

        } 
```

# android - 如何在 Android 上监听 View 的可视化变化

> ID：14273675
> 
> 赞同：1
> 
> 时间：2013-01-11T07:36:19.987
> 
> 标签：android, view

我正在创建一个自定义视图（扩展 WebView）。我想听视图的可视状态。

可视状态是指视图是否显示在屏幕上。我不是说能见度。例如，视图位于 ScrollView 下，当用户滚动时，视图将滚动到屏幕外。它的可见性没有改变，它仍然可见但不可见，因为它被滚动出屏幕。

无论如何要听可见的变化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:52:39.607

由于在我看来`WebView`继承自`View`它，您可以覆盖这些`View`方法来监控您喜欢的内容。查看[developer.android.com 的查看文档](http://developer.android.com/reference/android/view/View.html)并查看“实施自定义视图”下的方法。对于您的滚动示例，您似乎可以覆盖该`onScrollChanged`方法。

# google-drive-api - 使用 Drive SDK 附加到文档

> ID：14273680
> 
> 赞同：0
> 
> 时间：2013-01-11T07:36:57.390
> 
> 标签：google-drive-api

是否可以使用 Drive SDK 将一些任意文本附加到文档的底部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:16:02.690

不直接使用 API，抱歉。

您可以通过下载文件、附加数据并更新它来完成。

# c# - 脚本 SQLite 数据库创建

> ID：14273681
> 
> 赞同：0
> 
> 时间：2013-01-11T07:36:57.893
> 
> 标签：c#, sqlite, nhibernate

我正在生成 Schema.sql 文件，我想以编程方式创建 sqllite db 文件并从文件中执行所有 sql 语句。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:58:01.437

您可以使用 SchemaExport 类生成脚本，和/或将它们应用于数据库： http: [//nhibernate.info/doc/tutorials/first-nh-app/your-first-nhibernate-based-application.html](http://nhibernate.info/doc/tutorials/first-nh-app/your-first-nhibernate-based-application.html)

```
public class GenerateSchema_Fixture
{
    [Test]
    public void Can_generate_schema()
    {
        var cfg = new Configuration();
        cfg.Configure();
        cfg.AddAssembly(typeof (Product).Assembly);

        new SchemaExport(cfg).Execute(true /*script*/, true /*export to db*/,
                 false /*just drop*/, true /*format schema*/);
    }
} 
```

# android - 如何在同一个按钮中对齐文本和图像

> ID：14273682
> 
> 赞同：-2
> 
> 时间：2013-01-11T07:37:00.637
> 
> 标签：android

如何将文本和图像与同一个按钮对齐？我想做这样的形象：

![在此处输入图像描述](../Images/9ef5c6e740fa3cce5ee5591903bafb3f.png)

但我的按钮看起来像这样，文本与图像重叠：

![在此处输入图像描述](../Images/aead19e3a32264cae014a1249a1ec768.png)

这是我下面的代码。如何在同一个按钮中的文本和图像之间留出空间？

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="15dp"
    android:layout_weight="0"
    android:weightSum="1"
    android:orientation="horizontal" >

       <Button android:id="@+id/btnUtilitybillpayments"
            style="?android:attr/buttonStyleSmall"
            android:layout_height="wrap_content"
            android:layout_width="0dp"
            android:layout_weight="1"
            android:drawableLeft="@drawable/handshake"
            android:layout_marginRight="55dip"
            android:layout_marginLeft="55dip"
            android:drawablePadding="-25dp"
            android:paddingLeft="10dip"
            android:paddingRight="50dip"
            android:layout_marginTop="10dip"
            android:background="@drawable/curvedplanebutton"
            android:textColor="@drawable/button_text_color"
            android:text="Utility Bills Payment"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:41:30.647

我认为您已将按钮设置为 Complex，

只需使用下面的代码，让我知道会发生什么..

```
<Button   android:id="@+id/btnUtilitybillpayments"
             style="?android:attr/buttonStyleSmall"
             android:layout_height="wrap_content"
             android:layout_width="0dp"
             android:layout_weight="1"
             android:layout_marginRight="55dip"
             android:layout_marginLeft="55dip"
             android:drawableLeft="@drawable/handshake"
             android:layout_marginTop="10dip"
             android:gravity="left"
             android:paddingLeft="20dip"
             android:background="@drawable/curvedplanebutton"
             android:textColor="@drawable/button_text_color"
             android:text="Utility Bills Payment"/> 
```

因为我也怀疑你的按钮的 layout_margin 属性。如果它不起作用，请尝试删除

```
 android:layout_marginRight="55dip"
 android:layout_marginLeft="55dip" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T07:48:01.707

尝试这个

```
<Button
 android:id="@+id/button1"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:drawableLeft="@android:drawable/btn_star_big_on"
 android:text="Drawable left">
Button>

For more info go to this link 
```

[http://izvornikod.com/Blog/tabid/82/EntryId/8/Creating-Android-button-with-image-and-text-using-relative-layout.aspx](http://izvornikod.com/Blog/tabid/82/EntryId/8/Creating-Android-button-with-image-and-text-using-relative-layout.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T08:03:42.633

像这样的东西。

```
 <Button
            android:id="@+id/btnUtilitybillpayments"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="0dp"
            android:layout_height="wrap_content"

            android:layout_weight="1"
            android:background="@drawable/curvedplanebutton"
            android:drawableLeft="@drawable/handshake"
            android:gravity="left|center"
            android:text="Utility Bills Payment"
            android:textColor="@drawable/button_text_color" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T08:10:37.283

更合适的方法是将按钮制作为 9patch 图像。这样，您可以通过修补右侧和底部来定义文本的位置。而且不需要这么复杂的按钮。

你可以去这里了解更多信息——

[http://developer.android.com/tools/help/draw9patch.html](http://developer.android.com/tools/help/draw9patch.html)

# javascript - 如何打开当图像重叠时，我试图在 HTML 元素前面重叠图像，以便我可以模拟具有不同的箭头图标。我成功地实现了这一点，但是即使我能够点击选择器的“文本”区域，如果我点击自定义图像的顶部显然什么也不会发生（因为它位于顶部并且与它无关）。我需要让它仅适用于 IE10，尽管我在 Chrome 中尝试过并且也不起作用。我做了一些研究，似乎将一些 JS 附加到图像以打开选择器选项很难，如果不是不可能的话，特别是对于 IE。作为一项单独的工作，我尝试为图像节点设置较低的 z-index，以便鼠标单击事件

> ID：14273686
> 
> 赞同：0
> 
> 时间：2013-01-11T07:37:10.157
> 
> 标签：javascript, html, dom, z-index

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:44:33.487

你可以通过`CSS :after`伪元素来做到这一点

html

```
<div class="custom-select">
<select>
<option>a</option>
<option>b</option>
<option>c</option>
</select>
</div> 
```

css

```
div.custom-select {
position: relative;
display: inline-block;
  }

.custom-select select {
display: inline-block;
padding: 4px 3px 3px 5px;
margin: 0;
font: inherit;
outline:none; /* remove focus ring from Webkit */
line-height: 1.2;
background: #000;
color:white;
border:0;
}

/* Select arrow styling */
.custom-select:after {
content: "▼";  /* Current arrow I would like to change */
position: absolute;
top: 0;
right: 0;
bottom: 0;
font-size: 60%;
line-height: 30px;
padding: 0 7px;
background: #000;
color: white;
}

.no-pointer-events .custom-select:after {
content: none;
} 
```

# c# - 如果依赖实体不再存在，是否可以强制 EF 取消提交？

> ID：14273691
> 
> 赞同：0
> 
> 时间：2013-01-11T07:38:00.703
> 
> 标签：c#, .net, entity-framework

我想在 EntityFrameWork 中存在另一个实体时创建一个新实体。

例如，假设如果 Db 中存在 ID=999 的 fooEntity，我想创建 barEntity 对象：

```
var fooEntity =GetFooByID(999);

if (fooEntity != null)
{
  var barEntity = new Bar()
        {
            Sweetness = 8,
            Bitterness = 5,
            // goes on...
        }

 SaveBarEntity(barEntity); 
} 
```

我担心的是什么是 fooEntity 在我调用 SaveBarEntity(barEntity); 时不再存在。

**问题：** 是否可以以某种方式强制 EntityFramework 以便如果 fooEntity 在保存时 Db 中不存在，它应该抛出异常？

（对我来说，这听起来像是让 fooEntity 成为“工作单元”的一部分。但它是如何在实体框架中实现的？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:50:32.867

我认为，由于数据库之间没有关系`Foo`，`Bar`唯一的方法是为`Bar`表创建插入和更新数据库触发器，以检查相关`Foo`实体是否存在。为了将相关`Foo`实体 ID 传递给数据库，您需要修改 EF 的保存行为以将 id 传递给 DB 的上下文。

这确实需要付出很多努力；我认为最好在模型之间`Foo`和`Bar`模型中创建关系（这似乎是一种正确的方式，因为 Foo 和 Bar 之间似乎存在关系）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:01:29.917

这是不必要的工作，但您可以对 Foo 记录执行更新。

```
var fooEntity =GetFooByID(999);

if (fooEntity != null) {
    var barEntity = new Bar() {
        Sweetness = 8,
        Bitterness = 5,
        // goes on...
    };

    SaveBarEntity(barEntity); 
    SaveFooEntity(fooEntity); // If necessary, do something to make sure EF performs an update
} 
```

# asp.net-mvc-3 - MVC3 调整图像大小而不损失质量？

> ID：14273696
> 
> 赞同：1
> 
> 时间：2013-01-11T07:38:29.027
> 
> 标签：asp.net-mvc-3

大家好，我想问一下如何在不损失质量的情况下调整图像大小？

这是我的控制器方法

```
var fileName = DateTime.Now.ToString("MM.dd.yyyy HH.mm.ss") + Path.GetFileName(file.FileName);
            var path = Path.Combine(Server.MapPath("~/uploads/"), fileName);
            file.SaveAs(path);
            System.Drawing.Image img = System.Drawing.Image.FromFile(Server.MapPath("~/uploads/") + fileName);
            System.Drawing.Image thumb = img.GetThumbnailImage(97, 114, null, IntPtr.Zero);
            img.Dispose();
            thumb.Save(Server.MapPath("~/uploads/") + fileName); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:44:59.857

那里有一些非常好的图像大小调整库——我会使用其中之一。我在我的一个项目中使用[ImageResizing](http://imageresizing.net/)，结果非常好。Bertrand LeRoy对一些主要库进行了一些[基准测试，您可能会发现这些库很有用。](http://weblogs.asp.net/bleroy/archive/2011/10/22/state-of-net-image-resizing-how-does-imageresizer-do.aspx)

# grails - 无法从命令提示符运行 Grails

> ID：14273699
> 
> 赞同：0
> 
> 时间：2013-01-11T07:38:35.997
> 
> 标签：grails, windows-7-x64

我添加了一个`GRAILS_HOME`环境变量，它指向我提取 Grails 分发 zip 的文件夹，并且我已经添加`%GRAILS_HOME%\bin`到我的路径中。然而，在我打开一个新的命令提示符后，仍然找不到“grails”命令。有没有人知道为什么会这样？

我在 Windows 7 上运行 Grails 2.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-24T08:53:46.290

我在 Windows 7 64 位和 Grails 版本 2 上遇到了同样的问题。*

通过删除本地 Maven 存储库和已安装的插件存储库都无济于事。我发现 - 只需将属性设置为`%GRAILS_HOME%/bin/grails.bat`并`startGrails.bat`以兼容模式运行：Windows XP (Service Pack 3)。

为此，您需要拥有本地 PC 管理员权限。

/igors

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T23:05:41.367

[如果工作空间路径有空格](https://issuetracker.springsource.com/browse/STS-2530)，您可能会遇到[STS-2530] 部署 Grails 应用程序问题。Jira 将问题显示为已解决，但检查您的工作区路径中是否没有空间并没有什么坏处，因为这是我的旅行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T20:07:07.333

您可能需要检查 grails 安装的 bin 文件夹。grails.bat 文件可能丢失。我今天遇到了这个问题，并通过再次下载 zip 文件解决了它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T09:12:09.000

你在那里创建了 JAVA_HOME 吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T03:48:25.163

请执行下列操作。

1.  转到您的命令提示符，执行 Path 命令。如果一切设置正确，您的路径应该显示为以 C:... 开头的完整路径。如果路径显示为**%**符号，则意味着您的路径需要正确设置。我确实注意到在您的示例中您使用了正斜杠 - 我假设这是一个错字，因为这将是一个问题。

2.  解决问题的另一种方法是 CD 到位置 C:\Grails\bin，执行命令 grails.bat，如果它执行，你就在一个好地方，这意味着你必须调整你的路径 - 遵循这条路径可能会给你关于其他问题的线索....

# android - 为什么 R.java 文件在几次清理后消失了？

> ID：14273702
> 
> 赞同：0
> 
> 时间：2013-01-11T07:38:49.810
> 
> 标签：android

我知道 R.java 文件对于 android 中的大部分功能都很重要。所以我了解到解决这个问题的方法是在创建一个新的 android 应用程序项目后清理你的项目。但经过几次清理后，您有很多代码，R.java 文件消失了，您留下了一个错误缠身的`MainActivity.java`文件！

我的 XML 文件没有错误。这就是为什么我真的很困惑。我的包/项目文件夹中的唯一错误是`MainActivity.java`

任何想法如何解决这个问题？

我正在使用 Eclipse 来制作 Android 应用程序，但是对于创建 android 应用程序的更稳定的 IDE 建议也将不胜感激！

这是我的xml文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/Quote"
/>
<EditText
android:id="@+id/Quote"
android:inputType="text"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
/>
<Button
android:id="@+id/go"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="@string/press"
/>
<Button
android:id="@+id/genRan"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="@string/genRan"
/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:41:13.250

在 Eclipse 中`Right click on your project->Build Project`，它将再次创建 R.java 文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T07:42:58.083

由于一些错误它曾经发生过..

不要导入 com.example.R .clean 你的项目，然后再试一次然后重新启动...尝试两次三遍 clean 和 build ，你会得到

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T07:43:12.947

该`R.java`文件由eclipse生成。因此，通过清理项目，eclipse 再次消除了所有生成的文件，以与您所做的更改并行。

但是，`R.java`如果您的文件夹有错误，该文件将不会生成`res`。最好检查你的`res`文件夹。

如果问题仍然存在，请检查您的进口。如果没有，请添加导入

`import packagename.R;`或者`import android.R`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T07:43:23.810

构建您的项目，将重新生成 R.java，如果仍然没有生成，请清理项目并彻底检查您的 XML 文件和代码，如果资源 xml 文件中有任何错误，则不会生成 R.java。

还要检查您是否在导入中导入了 packagename.R？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T07:44:51.607

这个类是自动生成的，只有在你的项目中有一些致命错误时才会消失。

这些错误在 Eclipse 控制台和错误消息中可见。一个常见问题，可能会向控制台报告一些错误，但不会像往常一样显示错误消息。在某些情况下（可能是错误）可能会出现带有 .out.xml 扩展名的空文件，这些也会破坏构建。

检查资源之间的空的和损坏的 xml 文件。

使用典型的默认设置，项目应该在清理或代码中的任何更改后自动重建，除非您以自己的方式扭曲了 Eclipse 设置。

# php - 从控制器传递参数以在代码点火器中查看

> ID：14273704
> 
> 赞同：1
> 
> 时间：2013-01-11T07:39:01.493
> 
> 标签：php, jquery, css, ajax, codeigniter

我是代码 Igniter 的新手，所以我不知道该怎么做。所以我的问题是我有一个从 ajax 提交的表单。所以我想要做的是表单提交成功然后通知或css div类将出现在表单上方然后消失。我不知道在接受从视图页面到控制器的参数后如何执行此操作我不知道如何将参数控制器发送到查看或如何执行所有这些。这是我的控制器：

```
 class categoryController extends CI_Controller {

 function index(){

         $data['main_content'] = 'categoryView'; 
    $this->load->view('dashboardTemplate/template',$data); 

}

function addCategory(){

    //getting parameters from view 
    $data = array(
            'cat_name' => $this->input->post('cat_name')

    );

    $is_ajax = $this->input->post('ajax'); //or use this line

    $this->load->model('categoryModel'); 
    $query = $this->categoryModel->addCategories($data);

          if ($query && $is_ajax){            

         $page['main_content'] = 'categoryView';
         $page['v'] = '1'; // i dont know how this variable is not accessing in view page by echo $v 
         $this->load->view('dashboardTemplate/template',$page);

    }
    else
     {
        //
    }
}} 
```

这是我的看法：

```
 <?php 
   $attributes = array('id' => 'form-horizontal',
                       'class' => 'form-horizontal'       

        );
   echo form_open('categoryController/addCategory', $attributes);

$cat_name = array(
    'name' => 'cat_name',
    'id' => 'cat_name',
    'class' => 'cat_name');
 $button = array(
'name' => 'button',
'id' => 'btn',
'class' => 'btn btn-primary',
'value' => 'submit',
'type' => 'submit',
'content' => 'Submit'

     );
?>
 <h3>Add Category</h3>

 //here i want to do this .. that if form is submitted succesfully then this class will                        load only and the whole page remain the same 

         <div> class="alert-heading">sucess or not success!<div> 

 </div>
      <div class="control-group">
<label for="basicround" class="control-label">Category Name:</label>
 <div class="controls">
  <?php echo form_input($cat_name); ?>
<div class="form-actions">
  <?php echo form_button($button); ?></div>

<script type="text/javascript">
       $('#btn').click(function() { 

var cat_name = $('#cat_name').val();

if (!cat_name || cat_name == 'Name') {
    alert('Please enter Category Name');
    return false;
}

var form_data = {
    cat_name: $('#cat_name').val(),
    ajax: '1'       

};

$.ajax({
    url: "<?php echo site_url('categoryController/addCategory'); ?>",
    type: 'POST',
    data: form_data,
    success: function(msg) {
        $('#message').html(msg);
    }
});

return false;
  });

 </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:52:38.797

由于是 Ajax 提交，所以需要将 JSON 数组从控制器传递给视图

```
echo json_encode($page); 
```

控制器

```
$page['main_content'] = 'categoryView';
$page['v'] = '1'; // i dont know how this variable is not accessing in view page by echo $v 
echo json_encode($page); 
```

对于上述步骤，您需要定义

```
data-type:JSON 
```

在您的 ajax 函数中。

阿贾克斯函数

```
$.ajax({
    url: "<?php echo site_url('categoryController/addCategory'); ?>",
    type: 'POST',
    data: form_data,
    data-type: "json",
    success: function(msg) {
        // Here you can access the values from controller like msg.v
        $('#message').html(msg);
    }
}); 
```

根据响应，您可以使用显示成功消息

```
$(".alert-heading").show(); 
```

# asp.net - 如何拆分字符串并在 vb.net 中包含分隔符？

> ID：14273706
> 
> 赞同：0
> 
> 时间：2013-01-11T07:39:08.200
> 
> 标签：asp.net, vb.net, string

我有如下字符串：

> 细绳：`"//cXML/Request/OrderRequest/ItemOut[]/ItemDetail/Extrinsic[]/home/idea[]"`

如果我用“[]”分隔字符串，那么输出应该是这样的

输出：

```
//cXML/Request/OrderRequest/ItemOut[]

/ItemDetail/Extrinsic[]

/home/idea[] 
```

有时我的字符串如下所示：

> string: "//cXML/Request/OrderRequest/ItemOut[]/@quantity"

然后输出应该如下所示

输出：

```
//cXML/Request/OrderRequest/ItemOut[]

/@quantity 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:55:25.053

怎么样：

```
Regex.Split(str, "(?<=\[])(?=.)"); 
```

这将包括`[]`在拆分结果中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:50:08.240

尝试这个。

```
Dim s As String = "//cXML/Request/OrderRequest/ItemOut[]/ItemDetail/Extrinsic[]/home/idea[]"
Dim results() As String = Regex.Split(s, "\\[]")
For Each s1 As String In results
    Console.WriteLine(s1)
Next 
```

要包含分隔符，请将其附加到拆分结果中

# java - 如何跟踪 Struts2 Web 应用程序运行的所有方法？

> ID：14273707
> 
> 赞同：-4
> 
> 时间：2013-01-11T07:39:11.383
> 
> 标签：java, eclipse, debugging, struts2, struts

我需要对其他开发人员编写的 Java-EE Struts2 Web 应用程序进行一些更改。

由于我不确切知道它是如何工作的，我想映射每个请求上调用的所有操作和方法，以便在更改之前更好地了解 Web 应用程序工作流程。

有没有办法实现这个目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T09:09:15.473

采用以下一种（或多种）方法：

1.  查看您的[struts.xml](https://struts.apache.org/docs/strutsxml.html)，了解[配置元素](https://struts.apache.org/docs/configuration-elements.html)（尤其是`Actions`和`methods`）是如何映射的以及如何在编译时重现应用程序的行为。

2.  [编写一个拦截器](https://struts.apache.org/docs/writing-interceptors.html)记录（或保存在某处）堆栈中传递的所有操作和方法的名称，从请求中读取它们；

3.  实现[Preparable 接口](https://struts.apache.org/docs/preparable-interface.html)并在方法内执行请求日志记录`prepare()`；

4.  通过动态获取类名和方法名

    ```
    Thread.currentThread().getStackTrace()[level].getMethodName(); 
    ```

    根据您的应用程序的结构，您可以选择将调用放在“某处”这一行，以记录所有调用的类名和方法。

    我建议你[这个实现](http://www.swbyjeff.com/index.php/Dynamically_Retreive_Method_Name)，它为你解决了深度级别的问题：

    ```
    public class Utilities {
        public static String getCurrentMethod() {
            return getCurrentMethodNameFromThread(0);
        }

        public static String getCallingMethodName() {
            return getCurrentMethodNameFromThread(1);
        }

        private static String getCurrentMethodNameFromThread(int stackLevel) {
            /*
             * 0 - dumpThreads
             * 1 - getStackTrace
             * 2 - thisMethod => getCurrentMethodNameFromThread
             * 3 - callingMethod => method calling thisMethod 
             * 4 - method calling callingMethod
             */
            StackTraceElement 
                stackTraceElement = 
                    Thread.currentThread().getStackTrace()[4 + stackLevel];

            String className = stackTraceElement.getClassName();
            String methodName = stackTraceElement.getMethodName();

            return className + "." + methodName;
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T13:20:00.033

*所有*方法？！还是只是您的应用程序中的那些？

最快、最简单的解决方案（无论如何对我来说）是使用 AOP 来检测您所有应用程序的代码，记录所有条目，并可能退出。IMO 这将超出您的实际需求，尽管这是您所要求的。一旦你有了这个输出，你就可以开始把它缩小到更现实的东西。

（你实际上可以用它玩一些有趣的游戏，包括创建序列图。）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-11T07:53:26.063

正如我从你的问题中得到的那样，你可以尝试这样使用。

如果您找到了动作类，`execute()` 那么这对您来说很容易，在调试模式下运行应用程序并从`execute()`函数开始开始调试。按`F6`逐行调试，如果您看到任何新功能，然后进入该功能按`F5`或手动转到该功能，在那里放置新断点，然后按`F6`转到该功能。

希望对你有帮助

# c# - wpf 等效于 Java EE 语法

> ID：14273710
> 
> 赞同：0
> 
> 时间：2013-01-11T07:39:24.283
> 
> 标签：c#, wpf, jakarta-ee, binding

昨天我只是在与一个多窗口 wpf 应用程序作斗争，试图让一个绑定在另一个窗口上工作，然后我放弃了，把所有东西都塞到了一个窗口中。但是，我注意到没有办法在表单中绑定（在常规 JSP 页面中）；

```
<ui:textField ...text="#{SessionBean1.choosePlaceAndTimeForm.checkOutDate}".../> 
```

如果有某种方法可以让 Session 对象在 WPF 应用程序期间保持活动状态，并且如果我可以从每个窗口绑定到它。我的生活会更轻松。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:03:36.847

根据这个答案：[WPF Application using a global variable](https://stackoverflow.com/questions/1161459/wpf-application-using-a-global-variable)

使用以下 Dictionary ：

```
Application.Current.Properties 
```

可以使用以下方式绑定（使用不带双引号的键字符串）：

```
<TextBlock Text="{Binding Path=Application.Current.Properties[MyPropertyKey]}" /> 
```

或者实现一个静态类：

```
public static class ConfigClass()
{
    public static int MyProperty { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:05:32.540

使用 App 对象。

您可以将资源放在 App 对象的 ResourceDictionay 中，并使用 StaticResource 绑定对其进行绑定。或者在每个窗口的ViewModel中引用。

# c# - 如何创建弹出通知表单？

> ID：14273718
> 
> 赞同：0
> 
> 时间：2013-01-11T07:39:59.233
> 
> 标签：c#, winforms

> **可能重复：**
> [在通知区域显示一个winform](https://stackoverflow.com/questions/3644315/show-a-winform-over-the-notification-area)

我正在开发一个 Windows 应用程序，我必须在其中向用户显示通知警报。通知应该从任务栏上方屏幕的右下角弹出，我该怎么做？有没有通用的解决方案？

[我在http://www.codeproject.com/Articles/2562/Taskbar-Notification-dialog](http://www.codeproject.com/Articles/2562/Taskbar-Notification-dialog)尝试了解决方案，但它是针对自定义对话框的，而我需要显示一个正常的表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:57:37.850

创建您的表单（如果我理解您的问题并且您想使用表单）并设置使用此方法向上滑动您的表单（在任务栏的位置）

```
public void Animate()
    {
        this.Location = new Point(SystemInformation.VirtualScreen.Width - this.Width, SystemInformation.VirtualScreen.Height);
        for (int i = 0; i < this.Height; i++)
        {
            this.Location = new Point(SystemInformation.VirtualScreen.Width - this.Width, SystemInformation.VirtualScreen.Height - i);
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T07:53:52.427

看看[NotifyIcon-Class](http://msdn.microsoft.com/en-us/library/system.windows.forms.notifyicon.aspx)，你可以在任务栏上创建一个图标，它可以显示一个`BalloonTip`；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T07:55:34.203

您必须找到工作区域的高度和宽度并将表单位置设置为此。检查下面的链接它将帮助您

[关联](https://stackoverflow.com/questions/3644315/show-a-winform-over-the-notification-area)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T09:18:32.273

Toolbox 中有一个控件，即 notifyIcon，它以 BaloonTip 格式显示所有信息。像这样

```
notifyIcon1.ShowBalloonTip(100, "Grab Status", "Location-" +  dsAutoSeachCriteria.Tables[0].Rows[autoRowCount][0].ToString() + Environment.NewLine + "New Records-" + newurls + Environment.NewLine + "Old Records-" + oldurls, ToolTipIcon.Info); 
```

# c# - 使用 C# 读取意外的 http 参数

> ID：14273719
> 
> 赞同：0
> 
> 时间：2013-01-11T07:40:07.013
> 
> 标签：c#, asp.net, web-applications, httprequest

我不知道为什么我会得到这样的结果。

如果我将以下 URL 加载到浏览器中：

```
http://localhost:57845/app.ashx?n=update&url=some_url&logo=long_logo_name 
```

app.ashx 文件包含以下代码：

```
public void ProcessRequest(HttpContext context)
{
    string strURL = context.Request.Params["url"];
} 
```

我的`strURL`变量变为`some_url,/app.ashx`. 知道为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T07:42:41.500

这是因为该`Params`属性“获取 QueryString、Form、Cookie 和 ServerVariables 项的组合集合”（请参阅[​​ http://msdn.microsoft.com/en-us/library/system.web.httprequest.params.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.params.aspx)）。

您应该使用`context.Request.QueryString["url"]`仅获取“some_url”。

# php - Sql 没有将 Select 选项放到数据库中？

> ID：14273722
> 
> 赞同：-1
> 
> 时间：2013-01-11T07:40:15.283
> 
> 标签：php, html, mysql, sql

对于上传到网站的照片或视频，我有三个选项，我有这个选择选项来选择要上传的文件，有点像标签。它没有将其放入数据库中。这是我的代码：

这是我呼吁的地方

```
$type1 = $_POST['type'];
$type = mysql_real_escape_string($type);

          $sql = mysql_query("INSERT INTO photos 
SET photo='$newname', title='$title', date='$date', author='$by' , type='$type'") 
```

这是它的制作地点

```
<select name="type" id="type">
  <option value="Pic">Picture</option>
  <option value="Video">Video</option>
  <option value="Gif">Animated picture (GIF)</option>
</select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T07:42:43.773

使用这个`INSERT`语法

```
INSERT INTO photos (photo, title, date, author, type )
VALUES ('$newname', '$title', '$date','$by' , '$type') 
```

作为旁注，查询很容易受到`SQL Injection`. 请阅读下面的文章如何防止它，

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:47:01.057

您发布的代码是真实的代码吗？看起来当您转义时，您没有使用 Select 中的实际数据。

```
$type = mysql_real_escape_string($type); // You are escaping the $type variable, which is NULL, it was just declared 
```

但是您正在使用这个变量名从 Select 中读取数据

```
$type1 = $_POST['type']; 
```

所以你在`$type1`某处使用，在其他地方使用`$type`。

# c# - 更新表中的值：sql - APSX

> ID：14273737
> 
> 赞同：-1
> 
> 时间：2013-01-11T07:41:11.247
> 
> 标签：c#, sql, ms-access, sql-update

我有以下代码：

**更新**

```
 try
    {
        ArticleId = Request.QueryString["ArticleId"].ToString();
        NewArticleTitle = Request.Form["ArticleTitle"].ToString();
        NewArticleDate = Request.Form["ArticleDate"].ToString();
        NewArticleBody = Request.Form["ArticleBody"].ToString();

        string dpath = Server.MapPath(@"App_Data") + "/MySite.mdb";
        string connectionstring = @"Data source='" + dpath + "';Provider='Microsoft.Jet.OLEDB.4.0';";
        OleDbConnection con = new OleDbConnection(connectionstring);
        string QuaryString = String.Format("update tblarticles set articletitle='{0}', articlebody='{1}', postdate='{2}'  where articleid={3}", NewArticleTitle, NewArticleBody, NewArticleDate, ArticleId);
        OleDbCommand cmd = new OleDbCommand(QuaryString, con);
        OleDbDataAdapter da = new OleDbDataAdapter(cmd);
        DataSet ds = new DataSet();
        da.Fill(ds, "tbl");
        con.Close();
        Response.Redirect("ArticlesTable.aspx");
    }
        catch { } 
```

ArticleId 是一个 AUTO INCREMENT（数字类型）当它到达这一行时 `da.Fill(ds, "tbl");`，程序会继续捕获。我的问题是如何防止它，以便表格真正更新？希望得到帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:46:15.757

由于`ArticleId`是数字，因此您需要替换它：

```
where ArticleId='{3}' 
```

有了这个：

```
where ArticleId={3} 
```

因此，您的 where 子句应如下所示：

```
"update tblArticles set ArticleTitle='{0}', ArticleBody='{1}',PostDate='{2}'  where ArticleId={3}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T07:46:17.297

如果`ArticleId`是数字数据类型，则必须删除它周围的引号。代替：

```
 where ArticleId='{3}' 
```

试试这个：

```
 where ArticleId = {3} 
```

但是，你不应该这样做。尝试使用准备好的语句或参数化查询而不是`String.Format`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T07:51:12.927

参数插入是一个坏主意。这是为`sql injection`. 使用参数而不是参数插入。Sql 参数对于快速查找错误也很有用。因为参数是强类型的，并且您不能将字符串作为数字参数的参数传递。

# qt - 未定义的引用 - 我包括正确的标题

> ID：14273742
> 
> 赞同：1
> 
> 时间：2013-01-11T07:41:41.173
> 
> 标签：qt, plugins

我正在尝试从 ProjectExplorer::ProjectExplorerPlugin 子类化，但我收到错误消息告诉我未定义的引用。任何想法如何解决它？

```
class MyPluginPlugin : public ProjectExplorer::ProjectExplorerPlugin
{
    Q_OBJECT
    ...
}; 
```

错误：未定义对` *imp* __ZN15ProjectExplorer21ProjectExplorerPluginC2Ev'的引用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:40:33.090

您没有收到编译错误但未定义引用的事实通常意味着您的项目知道头文件在哪里，但它不知道包含已编译源代码的库在哪里。

我从未为 Qt Creator 编写过插件，但我快速浏览了它的源代码结构，我看到了以下选项：

* * *

选项 A)

`projectexplorer.pro`Qt Creator 的源代码中有一个文件位于`src/plugins/projectexplorer`. 您可以手动构建该项目以获得 ProjectExplorer.lib（加上 .dll 或 .a），然后引用此库。
示例：假设库将创建在与其 .pro 文件相同的目录中（我不知道是否是这样），并且您使用 Qt Creator 的源代码在 下创建了插件`src/plugins/myplugin`，您将`LIBS`像这样定义变量：

```
LIBS += -L../projectexplorer \
        -lProjectExplorer 
```

第一行添加“../projectexplorer”作为附加库目录，第二行添加“ProjectExplorer”作为库以在任何定义的目录中搜索（它会自动添加特定于操作系统的文件扩展名，如 Windows 上的 .lib 等）。

显然，如果您的项目或库位于其他地方，则需要相应地更改第一行。

* * *

选项 B)

您可以使用和变量将目录的源文件和头文件包含`projectexplorer`到您自己的 .pro 文件中。我不确定这是否不会干扰任何其他插件（包括 projectexplorer 本身）。`HEADERS``SOURCES`

* * *

选项 C)

可能有一种方法可以包含该`projectexplorer.pro`文件，以便您拥有一个主项目，该项目首先构建项目资源管理器库，然后构建您自己的插件。这将是最安全的方法，因为它可以确保在您自己的项目链接到它之前构建 Project Explorer 库并且是最新的。但是我在这方面的经验有限。

*如果阅读本文的任何人都可以对此选项进行详细解释，请随时编辑或提供您自己的答案。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-28T21:54:55.087

如果您使用的是从 2013 年 4 月之后编码的源代码构建的 Qt Creator，其中包括[Commit: #66a3553 - make library and plugin dependencies declarative](https://qt.gitorious.org/qt-creator/qt-creator/commit/66a3553107a43f56372f756b218e268e71390d19)，那么您可以简单地在其 .pro 文件中为您的插件指定依赖项：

```
# myplugin.pro
QTC_PLUGIN_DEPENDS += \
    coreplugin \
    projectexplorer 
```

# jquery - AJAX: Bootstrap Typeahead: 意外的令牌错误

> ID：14273749
> 
> 赞同：0
> 
> 时间：2013-01-11T07:42:19.567
> 
> 标签：jquery, ajax, twitter-bootstrap, syntax-error

我在文档中的第一个字母上收到了意外的令牌错误。

```
$('#typeahead').typeahead({
source: function (typeahead, query) {
    return $.post('ajax/page.php', { query: query }, function (data) {
        alert(data);
        return typeahead.process(JSON.parse(data));
    });
}
}); 
```

在我的 page.php 中：

```
<?php 
        $array[] = array("test","treat","food");
        $json = json_encode($array);
        echo "<script>var query = ".$json.";</script>";
?> 
```

所以使用这段代码，我得到一个错误`Uncaught Syntax: Unexpected token <`

所以当我删除`<script></script>`它时`echo "var query=".$json.";"`，我得到了`Uncaught Syntax: Unexpected token v`。

所以我假设它只会继续给我意想不到的第一个字母的标记，这是从 page.php 中回显的第一个字母

有人可以告诉我有什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:01:28.847

```
$('#typeahead').typeahead({
source: function (query, process) {
    return $.post('ajax/page.php', { query: query }, function (data) {
        process(JSON.parse(data));
    });
}
});

//page.php
$array = array("test","treat","food");
echo json_encode($array); 
```

# cakephp - CakePHP：如果用户经过身份验证，则将用户重定向到/

> ID：14273759
> 
> 赞同：0
> 
> 时间：2013-01-11T07:43:02.823
> 
> 标签：cakephp, authentication

在使用 AuthComponent 的 CakePHP 2.2 上，如果用户已经通过身份验证，那么将用户从“/”重定向到“/users”的最佳方法是什么？我所有的搜索都刚刚找到了关于 AuthComponent 的 loginRedirect 和相关的信息。我阅读了一篇详细说明更改路线的帖子（在 1.x 中），但我不确定这是否仍然是最好的方法。我也可以插入

```
if($path[0] == 'home' && $this->Session->check('Auth.User')){
    $this->redirect('/users/');
} 
```

在 PageController::display() 中，但同样，不确定这是否是最理想的方法

此应用程序的索引页面将只是一个要求用户注册或登录的页面，因此对于已登录的成员而言并不重要。

编辑：重新访问 beforeFilter() 方法后，我想出了

```
public function beforeFilter() {
    $this->Auth->allow('*');

    if($this->request->params['pass'][0] == 'home' && $this->Session->check('Auth.User'))
        $this->redirect('/users');
} 
```

但这似乎真的是静态的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:45:51.913

正确的方法是从控制器的 beforeFilter 方法重定向用户。从 .ctp 文件重定向不好。

// 在 PagesController.cpp 中

```
beforeFilter() {
  if($path[0] == 'home' && $this->Session->check('Auth.User')){
      $this->redirect('/users/');
  }
} 
```

某种类似的：
[CakePHP Auth 组件重定向问题](https://stackoverflow.com/questions/2636274/cakephp-auth-component-redirect-issue/2636940#2636940)

# javascript - 如何将 json 对象名称转换为字符串格式

> ID：14273760
> 
> 赞同：0
> 
> 时间：2013-01-11T07:43:03.337
> 
> 标签：javascript, jquery, json

```
var Data = {    "1":"United States",
                "2":"United Kingdom",
                "3":"Aruba",
                "4":"United Kingdom",
                "5":"Aruba",
                "6":"Bahrain",
                "7":"United Kingdom",
                "8":"Algeria",
                "9":"Andorra",
                "10":"American Samoa"
}
var IdKeyValuePair = [{"DropD1":Data},{"DropD2":Data},{"DropD3":Data},{"DropD4":Data}];
var obj= {
            id           : IdKeyValuePair,
            MultiColuumn : true,
            Checkbox     : true,
            Pagination   : false,
            max_height   : 400

         }; 
```

我想打印 DropD1、DropD2 的名称。我正在尝试这种方式。但我无法做到这一点..

```
var idName = [],i;
idLen = obj.id.length;
for(i=0;i<idLen;i++){
    idName[i] = ''+obj.id[i];
    console.log(idName[i]);
} 
```

我得到了 DropD1，DropD2 .. 但问题是它是对象形式，所以我如何将它转换为字符串......我想要一个结果是这样的格式......

```
for(i=0;i<idLen;i++){
   console.log(idName[i]);
} 
```

字符串格式的预期输出不在对象中：

滴D1 滴D2 滴D3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:51:35.677

试试这个。它对我有用

```
var IdKeyValuePair = [{ "DropD1": Data["1"] }, { "DropD2": Data["2"] }, { "DropD3": Data["3"]}, { "DropD4": Data["4"]}]; so on and so forth. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:52:36.380

我得到了一种使用浏览器字符串化属性的解决方案::

```
var jsonobj={"name":"George", "age":29, "friends":["John", "Sarah", "Albert"]}
var jsonstr=JSON.stringify(jsonobj)
alert(typeof jsonstr) //string 
```

您可以通过以下方式将其转换为 javascript 对象::

```
var jsonstr='{"name":"George", "age":29, "friends":["John", "Sarah", "Albert"]}'
var george=JSON.parse(jsonstr) //convert JSON string into object
alert(george.age) 
```

有关 json 的更多信息，请参阅以下链接，

[http://www.javascriptkit.com/jsref/json.shtml](http://www.javascriptkit.com/jsref/json.shtml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T08:01:11.177

试试这个

```
var idName = [],i;
idLen = obj.id.length;
for(i=0;i<idLen;i++){
    idName[i] = obj.id[i];
}
console.log(idName.join(" ")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T08:02:35.593

试试这个：

```
 var Data = {    "1":"United States",
                  "2":"United Kingdom",
                  "3":"Aruba",
                  "4":"United Kingdom",
                  "5":"Aruba",
                  "6":"Bahrain",
                  "7":"United Kingdom",
                  "8":"Algeria",
                  "9":"Andorra",
                  "10":"American Samoa"
  }
  var IdKeyValuePair = [{"DropD1":Data},{"DropD2":Data},{"DropD3":Data},{"DropD4":Data}];
  var obj= {
              id           : IdKeyValuePair,
              MultiColuumn : true,
              Checkbox     : true,
              Pagination   : false,
              max_height   : 400

           };

  var idName = [],i;
  idLen = obj.id.length;
  for(i=0;i<idLen;i++){
    idName[i] = obj.id[i];
    console.info(JSON.stringify(idName[i]));
  } 
```

您通过向对象添加空字符串（“”+对象）不必要地将对象转换为字符串

# git - git - 重置为旧版本，尝试推送它

> ID：14273763
> 
> 赞同：0
> 
> 时间：2013-01-11T07:43:11.990
> 
> 标签：git

`git status`给了我这个：

> 您的分支在 11 次提交之后位于“来源/网络”之后，并且可以快速转发。

这是因为我重置为较早的版本（希望放弃我之后所做的一切）。

但是，如果我尝试推送该版本（或该版本进行了一些小的更改），这将不起作用。我不想要新的东西，我只想从我恢复到的旧版本开始新的！

我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T07:48:08.103

如果你是仓库的唯一用户，可以强制推送；但是如果其他人从回购中撤出，你不应该强制推送，因为它会弄乱其他人的历史。

你可以`git merge --ff-only origin/network`然后`git revert HEAD~11`或类似的东西来生成一个新的提交，撤销过去的十一次提交，而不改变提交历史。

另请参阅[对类似问题的回答](https://stackoverflow.com/a/3248984/480850])。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T08:41:18.037

Since you've already pushed the "future" code, you want to avoid rewriting history at all costs if you have other contributors. You would introduce pretty severe updating nightmares.

If you know that nobody else has pulled the newest code, you can do the following to "recreate" the branch at a specific point. The following rewrites the history of your `network` branch.

```
git reset --hard <commit-id>
git push --force origin network 
```

If you don't want to rewrite history (you should always avoid rewriting push-ed history), you can 'revert' the last 11 commits on the `network` branch. The following is done while on the `HEAD` of your `network` branch.

```
git revert OLDER_COMMIT^..NEWER_COMMIT 
```

This effectively creates commits which 'revert' existing commits. Though where you might find yourself in trouble on this is if you merge this branch into another branch later and wanted to preserve your existing 11 commits for the merged branch. See: the answer for [Revert Multiple git commits](https://stackoverflow.com/questions/1463340/revert-multiple-git-commits).

You could also revert the 11 commits in one commit.

```
# reset your network branch to be the same as the remote
git reset --hard origin/network

# Set your branch (soft) index to the commit point you want your branch state to have:
git reset --soft <commit-id>

# The index will change and the files will reflect a difference you can now commit:
git commit -a 
```

# ssrs-2008 - 从 ssrs 导出的 Excel 工作表。数据透视表和排序功能在工作表中不起作用

> ID：14273767
> 
> 赞同：0
> 
> 时间：2013-01-11T07:43:28.637
> 
> 标签：ssrs-2008

msoffice2007\. 当报告从 ssrs 导出到 excel 表时。PIVOT Table 和 SORTING 功能不起作用，它显示一些错误，例如：“”PovitTable 字段名称无效。要创建 PovitTable 报表，您必须使用按标签列组织的数据。如果要更改数据透视表字段的名称，则必须为该字段键入一个新名称。"" 用于数据透视表。

和 ""该操作要求合并的单元格大小相同。"" 用于排序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:27:02.770

这是因为您的报告没有完全对齐，它会导致表格中的不同单元格被合并，您应该做的是寻找没有合并的单元格（在 excel 表中），检查它们的大小报告生成器并将其他单元格更改为该大小。

附加提示，请确保您的数据（在本例中为表格）与屏幕的左上角对齐。

# hadoop - Hadoop - Hive：删除早于指定天数的数据

> ID：14273772
> 
> 赞同：6
> 
> 时间：2013-01-11T07:43:52.557
> 
> 标签：hadoop, hive, bigdata

我正在从事一个电信项目，该项目使用 Hadoop - hive 进行数据分析。一天，我们将获得数百万条记录。在指定天数后，我们需要删除旧数据，因为我们没有存储容量。删除记录的最佳方法是什么？

附加信息：

这些配置单元表将有一个具有填充日期的列。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T16:08:05.917

我认为您的用例非常适合在 Hive 表中使用“日”分区。如果“天”只是一列，那么维护和清理表格将变得很困难。

分区在 Hive 中的真正含义是每个“天”都有一个目录

例如：

```
create table mytable (
   ...
) partitioned by (day string) 
```

因此，当您添加数据时，您将在 HDFS 中拥有例如以下结构：

```
/user/hive/warehouse/mytable/day=2013-01-10
/user/hive/warehouse/mytable/day=2013-01-11
... 
```

在每个分区中，您将拥有当天的内容。

然后删除旧数据变得微不足道，例如，您可以有一个每天运行的 cron 作业并删除 x 天前的数据（例如使用 command `date --date '30 days ago' +\%Y-\%m-\%d`），然后只需执行以下命令：

```
hadoop fs -rmr -skiptrash /user/hive/warehouse/mytable/day=`date --date '30 days ago' +\%Y-\%m-\%d` 
```

此时，如果您对`show partitions mytable`已删除数据的分区进行任何查询，您的 Hive 表中仍将保留您的分区，但不会返回任何内容。如果要真正删除元存储中的分区，则必须使用以下命令：

```
ALTER TABLE mytable DROP PARTITION (day='xxxx-xx-xx'); 
```

一段时间以来，我一直在成功使用非常相似的模式，并且效果很好。

# shell - 如何将一系列任务切换到后台？

> ID：14273773
> 
> 赞同：0
> 
> 时间：2013-01-11T07:43:59.017
> 
> 标签：shell, background-process

我正在远程服务器上运行两个测试，这是我几个小时前使用的命令：

```
% ./test1.sh; ./test2.sh 
```

这两个测试应该一个接一个地运行。如果第二个在第一个完成之前运行，一切都将毁于一旦，我将不得不重新启动整个过程。

困境是，这两个任务花费了太多时间来完成，而当我准备注销服务器并等待结果时。我不知道如何将它们都切换到后台...如果我使用`Ctrl+Z`，则只有第一个任务将被挂起，而第二个任务在清除当前数据时开始无用。

是否可以将它们都切换到后台，保留它们的命令？实际上我**应该**在同一个进程组中完成这两个任务`(./test1.sh; ./test2.sh) &`，但遗憾的是，第一次测试**已经运行了几个小时**，很遗憾重新开始测试。

一种选择是在第二个测试开始之前杀死它，但是有什么机制可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:02:16.303

首先重命名`./test2.sh`为`./test3.sh`. 然后做`[CTRL+Z]`，然后是`bg`和`disown -h`。然后保存此脚本 ( `test4.sh`)：

```
while :; do
  sleep 5;
  pgrep -f test1.sh &> /dev/null
  if [ $? -ne 0 ]; then
   nohup ./test3.sh &
   break
  fi
done 
```

然后做：`nohup ./test4.sh &`。

你可以注销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:50:35.870

首先，[screen](http://www.gnu.org/software/screen/)或[tmux](http://tmux.sourceforge.net/)是您的朋友，如果您还没有使用它们（它们使远程机器工作更容易一个数量级）。

要使用条件连续执行，您可以编写：

```
./test1.sh && ./test2.sh 
```

`test2.sh`仅当`test1.sh`返回 0时才会执行（通常意味着：没有错误）。例子：

```
$ true && echo "first command was successful"
first command was successful

$ ! true && echo "ain't gonna happen" 
```

有关控制运算符的更多信息：[http ://www.humbug.in/docs/the-linux-training-book/ch08s01.html](http://www.humbug.in/docs/the-linux-training-book/ch08s01.html)

# javascript - 如何替换（重新执行）当前脚本函数？

> ID：14273776
> 
> 赞同：0
> 
> 时间：2013-01-11T07:44:28.200
> 
> 标签：javascript, jquery, replace, eval, execute

我想在 ajax 响应后将加载脚本替换为现有脚本。

由于我只会更新一些元素，因此不会重新加载整个页面，并且替换元素上的一些事件将丢失。

[在 ajax 加载的内容上重新运行应用程序 Javascript](https://stackoverflow.com/questions/4742835/re-run-application-javascript-on-ajax-loaded-content) <--- 这对我来说不是一个解决方案......

我尝试从加载的 html 和`eval()`它们中获取脚本标签。但是，这不会取代现有的功能，而是将它们加倍。

我想通过不使用来替换或重新执行脚本功能`$(document).html(data);`

我阅读了许多参考资料，例如 [http://www.javascriptkit.com/javatutors/loadjavascriptcss2.shtml](http://www.javascriptkit.com/javatutors/loadjavascriptcss2.shtml)

不过我不是很懂。。。。。。

请帮助和建议一个更容易理解的例子。非常感谢！

我现在的脚本是

```
 $script.each(function(index){ //data from loaded page, same page
    if(!$(this).attr('src')){    //replace where is not from external only

          $(document.getElementsByTagName( 'script' )).slice(index).remove(); 
          //remove existing script, no working

         eval($(this).text()); 
         // re-execute, wokring
     }; 
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:00:31.710

您可以尝试将您的逻辑与函数结合起来，并在需要时调用它。此外，如果您通过 ajax 加载的内容将包含 JS 函数，您可以在将检索到的 html 放置到页面后调用它。

当我需要将事件绑定到一些动态加载的组件时，我实现如下功能：

```
function rebindDynamic() {
  $('#elem1')
    .unbind()  //Or unbind('click') if you want to unbind specific handlers
    .click(function (e) { ... });

  $('#elem2')
    .unbind()  //Or unbind('keyup') if you want to unbind specific handlers
    .keyup(function (e) { ... });

  ...................
} 
```

我希望它会有所帮助。

# android - 是否有必要将图像存储在内存中以显示在 android 的列表视图中

> ID：14273783
> 
> 赞同：2
> 
> 时间：2013-01-11T07:44:59.720
> 
> 标签：android, image, listview, memory-management, drawable

我在列表的`ImageView`每一行都显示一个列表。

为此，我使用另一个 AsyncTask 从网络下载图像，`Drawable.createFromStream` 并将它们存储为**Drawable**，在`ArrayList`其中我传递给扩展 BaseAdapter 类的适配器类。

但是这些图像是用高分辨率相机拍摄的，因此尺寸可能非常大。我得到了`OutOfMemory`错误。

所以我的问题：

1.  将图像存储为可绘制或位图或任何其他格式更有效的是什么？

2.  通过将所有图像存储在内存中（在数组列表中），我做得对吗？即我在想，一旦我得到一张图像，我会在 ImageView 上显示它，而不是存储在 ArrayList 中。

3.  有什么办法吗，我可以在下载后压缩图像，这样它们会占用更少的内存空间。

我的总代码在[这里](https://stackoverflow.com/questions/14135091/java-lang-outofmemoryerror-bitmap-size-exceeds-vm-budget-on-line-drawable-creat)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:58:48.117

Android 文档提供了一个很好的示例，展示了如何在您的 android 应用程序中处理位图。该示例使用磁盘和内存缓存并在后台加载图像。通过这样做，主 UI 线程不会因加载图像而减慢速度。

[有效加载位图](http://developer.android.com/training/displaying-bitmaps/display-bitmap.html)

在示例中，图像是从 picasa 加载的。但是，修改该示例很容易，以便使用本地存储的图片。您只需编写自己的 ImageLoader，从“ImageResizer”扩展而来：

```
public class ImageLoader extends ImageResizer {
    public ImageLoader(Context context, int imageWidth, int imageHeight) {
        super(context, imageWidth, imageHeight);
    }
    public ImageLoader(Context context, int imageSize) {
        super(context, imageSize);
    }
    @Override
    protected Bitmap processBitmap(Object data) {
        return decodeSampledBitmapFromFile((String)data, imageWidth, imageHeight);
    }
} 
```

但是要直接回答您的问题：可以将图像加载为位图。但是您必须使用缓存和弱引用，以便可以对图像进行垃圾收集，以防它们在屏幕上不可见。缓存它们并使用后台任务进行加载可以实现流畅的 UI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T07:51:20.763

有很好的图书馆调用`AQuery`。您可以使用它，只需编写 2 行代码即可轻松获取内存和文件缓存等所有内容。所以你甚至不需要准备一个drawable，你可以直接从`Adapter.getView()`回调中调用它。

```
AQuery aq = new AQuery(rowView);
aq.id(R.id.image).image(url, false, true); 
```

希望对你有帮助！

来自 AQuery 文档：

> 下采样（处理大图像） 我们正在从网络加载一个大图像，但我们只需要图像大于 200 像素宽。传入 200 的目标宽度将对图像进行下采样以节省内存。Aquery 只会以 2 (2,4,8...) 的幂进行下采样以获得良好的图像质量和效率。生成的图像宽度将在 200 之间和 399 像素
> 
> `String imageUrl = "http://farm6.static.flickr.com/5035/5802797131_a729dac808_b.jpg";
> aq.id(R.id.image1).image(imageUrl, true, true, 200, 0);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T08:52:07.813

1.  我没有看到将高密度图像存储到内存中的任何效率 - 完全不建议将大量图像作为位图存储在内存中（对你有好处，你有一个好的设备；））
2.  见第 1 页
3.  尝试缩小图像以适应设备的需求——但这并不是一项简单的工作。另请参阅[View.setTag(Object tag)](http://developer.android.com/reference/android/view/View.html#setTag%28java.lang.Object%29)

**适配器**

```
public class MyImageListAdapter extends BaseAdapter implements ImageLoadingNotifier {

private LayoutInflater inflater = null;

public MyImageListAdapter() {
    inflater = LayoutInflater)HomeActivity.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

public int getCount() {
    return listImageInfo.size();
}

public Object getItem(int position) {
    return listImageInfo.get(position);
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi = convertView;
    if (convertView == null) {
        vi = inflater.inflate(R.layout.list_row, null);
    }

    TextView tvName = (TextView) vi.findViewById(R.id.tv_name);
    TextView tvTime = (TextView) vi.findViewById(R.id.tv_time);
    ImageView image = (ImageView) vi.findViewById(R.id.iv_image);
    final Button btnDelete = (Button) vi.findViewById(R.id.btn_delete);

    image.setImageDrawable(R.drawable.default_placeholder);//set default place-holder
    new GetDrawableFromUrl(listImageInfo.get(position), vi).execute();

    tvName.setText("Name: " + listImageInfo.get(position).getImage_name());
    tvTime.setText("Date: " + listImageInfo.get(position).getDate_created());

    btnDelete.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            final int position = listView.getPositionForView((View) v.getParent());
            positionOgBtnToDelete = position;
            Log.v("delete btn clicked", "delete btn no: " + position);
            Toast.makeText(HomeActivity.this, "Btn delete position: " + position, Toast.LENGTH_LONG).show();
            showAlertToConfirmDelete();
        }
    });
    return vi;
}

} 
```

**异步任务`GetDrawableFromUrl`**

```
public class GetDrawableFromUrl extends AsyncTask<Void, Void, Drawable> {
public ImageInfo imageInfoObj;
private ImageView view;

GetDrawableFromUrl(ImageInfo imageInfo, ImageView view) {
    imageInfoObj = imageInfo;
    this.view = view;
}

@Override
protected Drawable doInBackground(Void... params) {
    try {
        return Drawable.createFromStream(((java.io.InputStream) new java.net.URL(imageInfoObj.getImageUrl()).getContent()), "src_name");
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
}

protected void onPostExecute(Drawable drawable) {
    if (drawable != null) {
        //imageInfoObj.setImage(drawable);
        this.view.setImageDrawable(drawable);
        //listImageInfo.add(imageInfoObj); //this one is called when the json is parsed
        showImagesInList(); //don't know what it does (??)
    }
} 
```

}

**JSON解析**

```
JSONArray jsonArray = jsonObj.getJSONArray("result");
            for (int i = 0; i < jsonArray.length(); i++) {
                JSONObject jsonObjInner = jsonArray.getJSONObject(i);

                ImageInfo imageInfo = new ImageInfo();
                imageInfo.setImageUrl("http://www.dvimaytech.com/markphoto/" + jsonObjInner.getString("image"));

                //new GetDrawableFromUrl(imageInfo).execute(); //don't needed here

                imageInfo.setEmail(jsonObjInner.getString("emailid"));
                imageInfo.setImage_id(jsonObjInner.getString("image_id"));
                imageInfo.setImage_name(jsonObjInner.getString("image_name"));
                imageInfo.setAmount(jsonObjInner.getString("amount"));
                imageInfo.setImage_description(jsonObjInner.getString("image_description"));
                imageInfo.setDate_created(jsonObjInner.getString("date_created"));

                listImageInfo.add(imageInfo);
            } 
```

而且，使用任何类型的`List`图像都变得不必要了:)

解析 json 对象时，不用启动异步任务（`GetDrawableFromUrl`），可以在`getView(...)`方法中启动任务。这样，您将不会被限制将可绘制对象存储到 中`ArrayList`，因为您将`ImageView`在图像下载后进行修改。并且，默认情况下，您可以放置​​一个占位符，直到下载图像（或者如果有一些网络错误）。

`getView`这样，只有在为该特定项目调用该方法时，图像才会开始下载。

最重要的是，来自 的每个视图`ListView`都将保留对其特定可绘制对象的引用（使用`vi.setTag(image)`.

如果这有帮助，你知道该怎么做；）

# batch-file - 在 Windows Server 2003 中启用服务的批处理文件

> ID：14273788
> 
> 赞同：0
> 
> 时间：2013-01-11T07:45:19.690
> 
> 标签：batch-file, windows-server-2003

windows server 2003 中的 windows 服务每天都在禁用。我想编写一个批处理文件来检查服务的状态并在它没有运行时启动它。我用以下命令做到了

```
Net Start "Service_Name" 
```

它可以正常启动启动类型为“自动”或“手动”的服务，并且不会启动启动类型为“已禁用”的服务

我尝试了以下命令

```
enable "SERVICE_NAME" SERVICE_AUTO_START 
```

但是 Windows Server 2003 不支持这个命令。你们能帮我看看在 Windows Server 2003 中使用哪个命令来启用服务吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:55:57.920

我不能确认这适用于 Server 2003，但它适用于 Win7，所以值得一试。

```
sc config "Service_Name" start= auto
net start "Service_Name" 
```

# iphone - 使用加速度计进行动画和输出？

> ID：14273794
> 
> 赞同：1
> 
> 时间：2013-01-11T07:45:52.693
> 
> 标签：iphone, ios, accelerometer

我是 xcode 和目标 c 的新手，所以放纵一下 :)

我写了一个应用程序，我可以使用加速度计在显示屏上移动一个小球。

另外我想在显示器上输出加速度计数据。

问题是，当我想输出数据时，球不会移动。

感谢帮助！

```
xLabel.text = [NSString stringWithFormat:@"x: %f.02", acceleration.x];
yLabel.text = [NSString stringWithFormat:@"y: %f.02", acceleration.y];
zLabel.text = [NSString stringWithFormat:@"z: %f.02", acceleration.z]; 
```

这是初始化代码：

```
UIAccelerometer *accel = [UIAccelerometer sharedAccelerometer]; //Share reference 
accel.delegate = self;
accel.updateInterval = 1.0f / 60.0f; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:17:06.237

那可能是因为您尝试在主线程上同时执行这两个任务是不可能的。

我认为您可以使用核心动画（它使用自己的线程来执行其操作）来移动对象，而不是直接改变对象的框架（这需要主线程）。

# java - JSTL fmt:formatNumber

> ID：14273795
> 
> 赞同：3
> 
> 时间：2013-01-11T07:45:55.650
> 
> 标签：java, jsp, jstl, el, scriptlet

如何使用 <fmt:formatNumber> 格式化变量？我正在学习 JSTL 并从旧的 Struts 标签转换。这行不通。它无法读取距离变量！

```
 <%double distance=geo.getDistance(geo.getLatitude(), geo.getLongitude(), lat, lng);%>
    <c:set var="distanceEL" value="${distance}"/>
    ${distance}, 
    <fmt:formatNumber pattern="0.0" value="${distance}"/>, 
    <fmt:formatNumber pattern="0.0" value="${distanceEL}"/>, 
    <fmt:formatNumber pattern="0.0" value="1234.567"/>,
    <%= new java.text.DecimalFormat("0.0").format(distance) %> 
```

它显示为

```
, , , 1234.6, 19.3 
```

我正在使用 JSTL 1.2。到目前为止，我没有留下深刻的印象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T19:49:20.223

您将 oldschool [*scriptlet*](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)与[EL](https://stackoverflow.com/tags/el/info)混合，并期望它们共享相同的变量范围。这不是真的。EL（那些`${}`东西）分别在[page](http://docs.oracle.com/javaee/6/api/javax/servlet/jsp/PageContext.html)、[request](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html)、[session](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html)和[application](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html)范围内搜索`null`与给定名称匹配的第一个非属性并返回它。它不会以任何方式访问*scriptlet*本地范围。

基本上，使

```
<%double distance=geo.getDistance(geo.getLatitude(), geo.getLongitude(), lat, lng);%> 
```

可用 as `${distance}`，您需要将其设置在任何所需的 EL 范围内，例如请求范围

```
<%
  double distance=geo.getDistance(geo.getLatitude(), geo.getLongitude(), lat, lng);
  request.setAttribute("distance", distance);
%> 
```

完成后，您就可以使用

```
<fmt:formatNumber pattern="0.0" value="${distance}"/> 
```

顺便说一句，无需按摩`<c:set>`。

请注意，a 说，将*scriptlet*与 EL 混合不是正常做法。您使用其中一个或另一个。在这种特殊情况下，该 Java 代码属于预处理[servlet 类](https://stackoverflow.com/tags/servlets/info)。

另请注意，您的具体问题与[JSTL](https://stackoverflow.com/tags/jstl/info)无关。您只是指出它是一个不存在的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:59:39.753

如果要向其发布 java 变量，`${ExpressionLanguage}`则必须将其添加到上下文中。有应用程序、会话、请求和页面上下文。这就是我的测试页面中发生的情况。

*   使用`<% ... %>`标签总是表示“重量级”的 java 代码，变量在 JSTL 代码中不直接可见。
*   将 java 变量引入 JSTL 上下文，例如 pagecontext。现在您可以`${xx}`在 jsp 代码中使用 EL 变量。
*   我没有将 distance2 放到上下文中，而是通过`<%= .. %>`嵌入式 java scriptlet 使用它。有时这样做最容易。
*   你甚至可以将`${EL}`-only 变量引入重量级java 端，使用`jsp:useBean`标签创建java 变量。然后可以在`<%..%>`scriptlet中看到它。
*   我在 value 里面做了一个简单的数学表达式`${distanceEL3}`作为例子。
*   供您参考，如果使用 Tomcat，请查看该`tomcat/work/Catalina/localhost/mywebapp/org/apache/jsp/test_jsp.java`文件。您可以看到变量是如何创建的，就像手动编写的 java 文件一样。

**测试.jsp**

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %><%@ 
    taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %><%@page 
    contentType="text/plain; charset=UTF-8" pageEncoding="ISO-8859-1"
    import="java.text.*"
%><%

double distance=1234.567;
double distance2=3456.789;
pageContext.setAttribute("distance", distance);

%>Test Results

<fmt:setLocale value="en_US" scope="page"/>

<c:set var="distanceEL" value="${distance}" />
distance=${distance}
fmt1=<fmt:formatNumber pattern="0.0" value="${distance}" />
fmt2=<fmt:formatNumber pattern="0.00" value="${distanceEL}" />
fmt3=<fmt:formatNumber pattern="0.0" value="1234.567" />
fmt4=<%= new DecimalFormat("0.0").format(distance) %>

<c:set var="distanceEL2" value="<%= distance2 %>" />
distance2=${distanceEL2}
fmt1=<fmt:formatNumber pattern="0.0" value="<%= distance2 %>" />
fmt2=<fmt:formatNumber pattern="0.00" value="${distanceEL2}" />
fmt4=<%= new DecimalFormat("0.0").format(distance2) %>

<c:set var="distanceEL3" value="${765.432-2.2}" />
<jsp:useBean id="distanceEL3" type="java.lang.Double" />
distance3=${distanceEL3}
fmt1=<fmt:formatNumber pattern="0.0" value="<%= distanceEL3 %>" />
fmt2=<fmt:formatNumber pattern="0.00" value="${distanceEL3}" />
fmt4=<%= new DecimalFormat("0.0").format(distanceEL3) %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T19:37:54.417

我找到了！

```
<fmt:formatNumber pattern="0.0" value="<%=distance%>"/> 
```

这很奇怪，因为我试过

```
<%= geo.getDistance(geo.getLatitude(), geo.getLongitude(), ${lat}, ${lng}) %> 
```

爆炸了。太混乱了！没有在哪里解释哪个具有更高的优先级，<%%> 或 ${}

# svn - 如何在乌龟清理中不显示对话框？

> ID：14273796
> 
> 赞同：1
> 
> 时间：2013-01-11T07:45:55.320
> 
> 标签：svn, dialog, tortoisesvn, task, resource-cleanup

我在本地计算机上为 svn 运行一些计划任务，例如：更新。有时更新无法运行清理问题，所以我添加了清理计划任务，但没有我的干预它无法运行：总是显示对话框：

![在此处输入图像描述](../Images/97e525604eda2cd29fb99c31180292ea.png)

如何不显示此对话框？真的我什么都没有改变 - 只点击按钮确定。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T12:57:52.773

快速查看[文档](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-automation.html#tsvn-automation-basics)帮助：

> 使用**/noui**防止弹出结果对话框（告诉清理已完成或显示错误消息）。**/noprogressui**也禁用进度对话框。**/nodlg**禁用显示清理对话框，用户可以在该对话框中选择在清理中应该执行的确切操作。可用选项 /cleanup 用于状态清除、/revert、/delunversioned、/delignored、/refreshshell 和 /externals 可以指定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T10:31:05.670

TortoiseSVN 似乎不是一个很好的自动化工具。

考虑使用命令行 svn：

```
svn cleanup 
```

会做你需要的

# php - 在 PHP 中强制在 CSV 生成的文件中换行

> ID：14273801
> 
> 赞同：2
> 
> 时间：2013-01-11T07:46:19.747
> 
> 标签：php, file-io, download, fputcsv

我正在用 PHP 生成一个 CSV 可下载文件。我有一个问题，当我在 MS Excell 或 Ubuntu Libre Office 中打开文件时，格式与预期不同。

我想要这个输出，但我不能强制从新行开始。

```
Name           Slope   Length   Size(Inches)      Max Length         Location                                       
Name1            5      150       12"                500            location1   
Name2            8      350       12"                400            location 2  
Name3           16      326       12"                400            location3 
```

这是我的 PHP 代码

```
 $csv_data[] = $_POST['name'][$i];
        $csv_data[] = $_POST['slope'][$i];
        $csv_data[] = $_POST['length'][$i];
        $csv_data[] = $size;
        $csv_data[] = $max_length;
        $csv_data[] = $_POST['location'][$i].PHP_EOLE;

    header('Content-Type: text/csv; charset=utf-8');
    header('Content-Disposition: attachment; filename=file.csv');

    $output = fopen('php://output', 'w');
    fputcsv($output, array("Name", "Slope", "Length", "Size", "Max Length", "Location"));
    fputcsv($output, $csv_data); 
```

但是这段代码输出如下：

```
Name    Slope   Length  Size    Max Slope Length    Location                                                
Name1   5   150 12" 500 location1   Name2   8   350 12" 400 location 2  Name3   16  326 12" 400 location3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:17:03.153

我所做的是将`$csv_data`数组设为二维而不是一维，然后使用`foreach`循环。它有点慢，但对我有用。

这是更新的代码

```
 $csv_data[$i][] = $_POST['name'][$i];
    $csv_data[$i][] = $_POST['slope'][$i];
    $csv_data[$i][] = $_POST['length'][$i];
    $csv_data[$i][] = $size;
    $csv_data[$i][] = $max_length;
    $csv_data[$i][] = $_POST['location'][$i];

    header('Content-Type: text/csv; charset=utf-8');
    header('Content-Disposition: attachment; filename=file.csv');

    $output = fopen('php://output', 'w');
    fputcsv($output, array("Name", "Slope", "Length", "Size", "Max Length", "Location"));
    foreach ($csv_data as $value) {
        fputcsv($output, $value);
    } 
```

这是我需要的输出。

```
Name    Slope   Length  Size    Max Length  Location
Name1    5       150    12"        500      location1 
Name2    8       350    12"        400      location12
Name3    16      326    12"        400      location3 
Name4    36      127    12"        400      location4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T08:27:02.283

请执行下列操作：

```
$csv_headers = array(array("Name", "Slope", "Length", "Size", "Max Length", "Location"));
$csv_full_data = array_merge($csv_headers, $csv_data);
var_dump($csv_full_data);
fputcsv($output, $csv_full_data); 
```

并告诉我们输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T07:48:56.733

PHP_EOL 的值是什么使它成为“\r\n”并尝试

```
$csv_data[] = $_POST['location'][$i].PHP_EOL; change to 
$csv_data[] = $_POST['location'][$i]."\r\n"; 
```

# javascript - JQuery 整理代码

> ID：14273805
> 
> 赞同：0
> 
> 时间：2013-01-11T07:46:32.053
> 
> 标签：javascript, jquery

我正在使用一些 javascript 来为 div 类中的类设置动画。

```
$(".previouscontainer").mouseenter(function(){
    $("a.previousarrow").animate({left:'0px'},"fast");
  });
$(".previouscontainer").mouseleave(function(){
    $("a.previousarrow").animate({left:'10px'},"fast");
  });
$(".nextcontainer").mouseenter(function(){
    $("a.nextarrow").animate({right:'0px'},"fast");
  });
$(".nextcontainer").mouseleave(function(){
    $("a.nextarrow").animate({right:'10px'},"fast");
  }); 
```

想知道是否有更好/更清洁的方式来写这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:48:39.577

你可以把它们串起来。

```
$(".previouscontainer").mouseenter(function(){
    $("a.previousarrow").animate({left:'0px'},"fast");
  }).mouseleave(function(){
    $("a.previousarrow").animate({left:'10px'},"fast");
  });
$(".nextcontainer").mouseenter(function(){
    $("a.nextarrow").animate({right:'0px'},"fast");
  }).mouseleave(function(){
    $("a.nextarrow").animate({right:'10px'},"fast");
  }); 
```

或使用同时具有这两种功能的悬停

```
$(".previouscontainer").hover(function(){
    $("a.previousarrow").animate({left:'0px'},"fast");
  },function(){
    $("a.previousarrow").animate({left:'10px'},"fast");
  });
$(".nextcontainer").hover(function(){
    $("a.nextarrow").animate({right:'0px'},"fast");
  },function(){
    $("a.nextarrow").animate({right:'10px'},"fast");
  }); 
```

或者您可以发疯并创建自己的活动

```
$("a.previousarrow").on('moveme', function(){
    if ($(this).css('left')>0) $(this).animate({left:'0px'},"fast");
    else $(this).animate({left:'10px'},"fast");
}); 
```

如果您需要将其绑定到不能在同一个选择器中的各种操作

```
$(".previouscontainer").on('mouseover mouseleave', function(){ 
    $("a.previousarrow").trigger('moveme');
});

$('#somethingelse').on('click', function(){
    $("a.previousarrow").trigger('moveme');
}); 
```

还有其他方法可以摆动这只猫。`.hover()`是最明智的。

# google-maps - 谷歌地球加载 KML 2.2 但不加载谷歌地图

> ID：14273812
> 
> 赞同：0
> 
> 时间：2013-01-11T07:47:03.927
> 
> 标签：google-maps, kml

我拥有的[谷歌地图脚本](http://rioleo.org/dev/gps/data/map.php)似乎可以很好地[从芝加哥](http://gmaps-samples.googlecode.com/svn/trunk/ggeoxml/cta.kml)文件加载示例 KML，但是当[我添加自己的](http://rioleo.org/dev/gps/data/2013-01-09T04-36-27Z.kml)时，它会失败。KML 标准是 2.2 - 为什么 Google 地图无法读取它（Google 地球似乎工作正常）？当我尝试[验证文件](http://kmlvalidator.com)时，它说存在一些错误 - 鉴于这是我从应用程序获得的输出，有什么办法可以解决它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:09:41.563

[geoxml3、KmlLayer](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/2013-01-09T04-36-27Z_kml.xml)和[谷歌地图](https://maps.google.com/maps?q=http%3a%2F%2Fwww.geocodezip.com%2Fgeoxml3_test%2F2013-01-09T04-36-27Z_kml.xml&hl=en&ll=35.674903,139.741824&spn=0.009692,0.013797&sll=32.824552,-117.108978&sspn=0.691256,0.883026&t=m&z=16)为我加载你的 kml。我的服务器不支持扩展名为 .kml 的 KML，就像扩展名为 .xml 的 XML 一样，因为[它没有为 KML/KMZ MIME 类型配置](https://developers.google.com/kml/documentation/kml_tut#kml_server)，您的服务器上可能会遇到同样的问题。

[请在 Google Maps API v3 问题跟踪器上](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4776)查看此问题，以了解在线上的“尖峰”。

另一种选择是查看[KmlLayer.getStatus()](https://developers.google.com/maps/documentation/javascript/reference#KmlLayer)返回的内容（[Kml Status:DOCUMENT_NOT_FOUND](http://www.geocodezip.com/v3_GoogleEx_layer-kml_linktoB.html?filename=http://rioleo.org/dev/gps/data/2013-01-09T04-36-27Z.kml)）。cta.kml[示例](http://www.geocodezip.com/v3_GoogleEx_layer-kml_linktoB.html?filename=http://gmaps-samples.googlecode.com/svn/trunk/ggeoxml/cta.kml)返回 Kml Status:OK。

# c++ - boost asio 服务器挂起关闭 boost::socket 的调用

> ID：14273816
> 
> 赞同：6
> 
> 时间：2013-01-11T07:47:34.600
> 
> 标签：c++, sockets, boost, boost-asio

下面是我使用 boost asio 的套接字服务器的示例代码。

此服务器将在端口 10001 上等待任何客户端连接。当任何客户端连接时，它将启动线程从该客户端读取并等待另一个客户端。但是当我的客户端断开服务器套接字挂起时会发生什么`my_socket->close()`。

如果新客户端尝试连接服务器崩溃。

我正在使用 **g++ (Ubuntu 4.4.3-4ubuntu5.1) 4.4.3**

```
#include <ctime>
#include <iostream>
#include <string>
#include <boost/asio.hpp>
#include <sys/socket.h>
#include <unistd.h>
#include <string>
#include <boost/bind.hpp>
#include <boost/thread.hpp>
#include <boost/date_time.hpp>

using namespace std;
using boost::asio::ip::tcp;

void run(boost::shared_ptr<tcp::socket> my_socket)
{
    while (1)
    {
        char buf[128];
        boost::system::error_code error;

        size_t len = my_socket->read_some(boost::asio::buffer(buf, 128), error);
        std::cout << "len : " << len << std::endl;

        if (error == boost::asio::error::eof)
        {
            cout << "\t(boost::asio::error::eof)" << endl;
            if (my_socket->is_open())
            {
                boost::system::error_code ec;
                cout << "\tSocket closing" << endl;
                my_socket->shutdown(boost::asio::ip::tcp::socket::shutdown_both, ec);
                cout << "\tShutdown " << ec.message() << endl;
//                cout << "normal close : " << ::close(my_socket->native_handle()) << endl;
                my_socket->close(ec);
                cout << "\tSocket closed" << endl;
            }
            break; // Connection closed cleanly by peer.
        }
        else if (error)
        {
            std::cout << "Exception : " << error.message() << std::endl;
            break;
        }
        else
        {
            for (unsigned int i = 0; i < len; i++)
                printf("%02x ", buf[i] & 0xFF);
            printf("\n");
        }
    }
}

int main()
{
    const int S = 1000;
    vector<boost::shared_ptr<boost::thread> > arr_thr(S);

    try
    {
        for (uint32_t i = 0;; i++)
        {
            boost::asio::io_service io_service;

            tcp::endpoint endpoint(tcp::v6(), 10001);

            boost::shared_ptr<tcp::socket> my_socket(new tcp::socket(io_service));
            tcp::endpoint end_type;

            tcp::acceptor acceptor(io_service, endpoint);

            std::cout << "before accept" << endl;
            acceptor.accept(*my_socket, end_type);

            std::cout << "connected... hdl : " << my_socket->native_handle() << std::endl;

            boost::asio::ip::address addr = end_type.address();
            std::string sClientIp = addr.to_string();

            std::cout << "\tclient IP : " << sClientIp << std::endl;
            arr_thr[i] = boost::shared_ptr<boost::thread>(new boost::thread(&run, my_socket));
        }
    } catch (std::exception& e)
    {
        std::cerr << e.what() << std::endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T08:33:03.497

启动`run`线程后，main 中的 for 循环再次启动，销毁并重新初始化局部`io_service`变量，但套接字上的下一个事件仍将采用旧的 io_service 对象，从而导致崩溃。

您应该只使用一个`io_service`.

此外，您应该查看 boost::asio 提供的异步函数，例如`async_accept` and `async_read`，例如，请参见以下示例： http: [//www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/example /chat/chat_server.cpp](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/example/chat/chat_server.cpp)

# javascript - 如何将函数与 html 组件绑定？

> ID：14273818
> 
> 赞同：0
> 
> 时间：2013-01-11T07:47:49.023
> 
> 标签：javascript, html, web, components

这是我的设置。我创建了一个 html 页面，并在该页面上放置了一个类型为文本的输入组件。我为组件设置了只读属性，因为我想在此组件中显示日期和时间，因此用户无法更改它。我的问题是如何在这个组件中显示日期和时间，以便它的值随着时间的变化而不断变化。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:51:26.560

如果您使用的是 html 组件 ID，请尝试此操作

```
 $("#main").bind("click",function(){
      alert("The is id.");

//or you can call the function 
    }); 
```

或者，如果您使用的是 html 组件类，请尝试此操作

```
 $(".main").bind("click",function(){
      alert("The is class.");
//or you can call the function 
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:53:24.483

用于`jquery`那个

html

`<label id="clock"></label>`

jQuery

```
var updateClock = function() {
function pad(n) {
    return (n < 10) ? '0' + n : n;
}

var now = new Date();
var s = pad(now.getUTCHours()) + ':' +
        pad(now.getUTCMinutes()) + ':' +
        pad(now.getUTCSeconds());

 $('#clock').html(s);

var delay = 1000 - (now % 1000);
setTimeout(updateClock, delay);

}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T07:55:26.227

在每个日期时间更新运行此代码

```
 document.getElementById("input_id").value = "date content"; 
```

# null - 是否有一个词表示“不为空”？

> ID：14273820
> 
> 赞同：19
> 
> 时间：2013-01-11T07:47:59.413
> 
> 标签：null, terminology

在`if`陈述中，我习惯于看到`x != null`，并将其读作“x 不为空”。

但在函数名称中，不得不说“NotNull”或“IsNotNull”来解释类似的状态感觉过于复杂。不仅因为它是两三个字，而且还带有一种*双重否定*的感觉，用来表达一个积极的概念。

什么是好词，希望不是长词或复合词，与“不为空”的意思相同？

我已经集思广益并拒绝了一些想法，以及为什么：

*   “初始化”不会很好，因为在大多数编程语言中，您可以将变量初始化为空。

*   “某事”可能意味着“不是什么都没有”，因此对您来说“不为空”，但其他人的解释可能会有所不同......

如果没有这样的词，那么您可以创建一个 - 欢迎您的建议，我相信人们会喜欢为他们的最爱投票。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T07:50:52.727

在 PHP 中有一个名为的函数`isset`- 我认为没有比这更短的版本了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-11T09:31:24.103

我认为这是基于您的偏好，isset / is / set / exist / has / ...

但是你不觉得代码可读性更重要的是理解和编写，而不是缩短每个单词

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-05-10T15:36:00.047

**物有所值**

这里需要注意的是**NULL**在某些语言中可能被认为是一个值，因此普遍使用**VALUED**作为**NULL**的对立面是不合适的。

然而，在 PHP 中，**VALUED**完全反对**NULL**。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-11T07:59:00.547

我会使用术语`usable`，因为在我看来，如果它不为空，则引用是可用的......

但作为一个非英语为母语的人，我无法真正评估我的建议的相关性。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-11T08:03:01.130

我建议`is`或`exists`。许多与现有名称和语法冲突。

为了`is`工作，您需要将其发音为大写和粗体：

如果 ( **IS** x) ...

在实践中，我认为`exists`会更好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-11T07:53:31.947

我使用 IsSet 作为方法名称。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-01-27T20:54:47.170

我决定了`isKnown`。

`Set`是相反的`Undefined`。

`Null`是 a `Value`，因此它是`Set`，但它是一个`Unknown`值。

如果一个变量是`Known`，那么它是`Set`（隐含的），它是`not null`（未知的）。

**对象.js**

```
// Is Known
this.isKnown = function(value) {
  return !this.isUndefined(value) && !this.isNull(value);
}

// Is Undefined
this.isUndefined = function(value) {
  return typeof value == 'undefined';
}

// Is Null
this.isNull = function(value) {
  return value === null;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-02-16T23:44:05.207

**Extant**表示事物存在。如果您认为 null 是一种不存在的状态，那么“exant”可以被认为是相反的。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2021-01-05T18:56:07.573

`Straight = Not Null`

`Null = Odd`（1 个空值，3 个空值）

[![在此处输入图像描述](../Images/a71d87f7ac987421b6a7932289e2622f.png)](https://i.stack.imgur.com/eTm8g.jpg)

# iphone - 按下主页按钮时如何显示红色状态栏？

> ID：14273824
> 
> 赞同：6
> 
> 时间：2013-01-11T07:48:02.513
> 
> 标签：iphone, ios, ipad, core-audio

在我的重新编码应用程序进行某些录制时按下主页按钮时，如何显示红色状态栏？

我检查了这个问题：[录制时如何隐藏iOS状态下的红条？](https://stackoverflow.com/questions/13391311/how-to-hide-the-red-bar-under-the-ioss-status-when-recording)

但是，我使用 Core Audio 和 Extended Audio File Services 进行录音。我无法找到任何适当的文档来以编程方式执行此操作。任何帮助或指示将不胜感激。

![红色状态栏](../Images/60058ec4a88228589d30bf1b4b09463c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:08:11.950

我相信从说

> *按下主页按钮时显示红色状态栏*

您在询问是否可以在您的应用程序处于后台时将状态栏颜色设置为红色。

红色状态栏表示**应用程序正在录制音频**，它是由系统设置的。sdk 中没有任何内容支持我们在您的应用程序处于后台时更改状态栏颜色。

请参阅解决[此问题的官方论坛帖子](https://devforums.apple.com/message/740631#740631)（需要登录），回答此问题的人是 Apple 员工。

**编辑 ：**

如果您的应用程序尝试在后台录制，但您的问题是在状态栏上看不到红色，那么原因之一可能是您的录音会话正在终止/暂停。尝试为您的录制注册一个完成处理程序，并查看它是否比您预期的更早触发。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-11T09:13:38.510

这是私人的，但有效

```
 [[[UIApplication sharedApplication] statusBar] setTintColor:[UIColor redColor] withDuration:3.2] 
```

当然，这将在商店中被拒绝。

理想情况下，您可以在 UIStatusBar 和 override 上添加一个类别`drawRect:`，这就是我用来为导航栏着色的方式，但看起来该类也是私有的。

可能有一些运行时黑客可以让你绕过它，但你仍然会冒着稍后将你的应用程序扔掉的风险。

也许苹果稍后会打开这个，就像他们对导航栏和标签栏所做的那样？

# java - 模态 JDialog 避免卡住的最佳位置

> ID：14273836
> 
> 赞同：4
> 
> 时间：2013-01-11T07:48:39.400
> 
> 标签：java, swing, jframe, jdialog

我的 Swing 应用程序必须向用户显示一个模式对话框。很抱歉没有发布 SSCCE。

`topContainer`可能是`JFrame`或`JApplet`。

```
private class NewGameDialog extends JDialog {
     public NewGameDialog () {
         super(SwingUtilities.windowForComponent(topContainer), "NEW GAME", ModalityType.APPLICATION_MODAL);

         //add components here

         getContentPane().setLayout(new BoxLayout(getContentPane(), BoxLayout.Y_AXIS));

         //TODO:
         setSize(new Dimension(250, 200));
         setLocation(650, 300);
     }
} 
```

我在网络事件上开始这样的对话框

```
SwingUtilities.invokeLater(new Runnable() {
     @Override
     public void run() {
         NewGameDialog dialog = new NewGameDialog();
         dialog.setVisible(true);
     }
}); 
```

问题是为我的对话设置最佳位置。

1）如果它被设置为绝对值，并且我将应用程序框架移动到第二个屏幕，那么对话框会显示在第一个屏幕上，这很奇怪。

2) 如果将其设置为 JFrame 的相对值，则可能会出现用户将应用程序框架移动到屏幕之外，并且相对定位的对话框对用户来说将不可见。而且因为它是模态的，所以游戏会卡住。

**考虑到上述两个问题，最佳解决方案是什么？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T07:51:55.170

我认为，最好将对话框置于当前屏幕中间，如此处[所述](https://stackoverflow.com/questions/213266/how-do-i-center-a-jdialog-on-screen)。

```
Toolkit toolkit = Toolkit.getDefaultToolkit();
Dimension screenSize = toolkit.getScreenSize();
int x = (screenSize.width - d.getWidth()) / 2;
int y = (screenSize.height - d.getHeight()) / 2;
d.setLocation(x, y); 
```

这总是有效的，如果它就在屏幕的中心，它如何对用户不可见？也`setLocationRelativeTo`可以使用，但需要[在正确的时间调用它](https://stackoverflow.com/questions/3480102/java-jframe-setlocationrelativetonull-not-centering-the-window-on-ubuntu-10-0)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T08:05:15.293

这让我想起了我最喜欢的一篇文章，在 StackOverflow 上使用[Window.setLocationByPlatform(true) 。](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#setLocationByPlatform%28boolean%29)

[如何最好地定位 Swing GUI](https://stackoverflow.com/q/7143287/1057230)

**编辑 1：**

您可以将 a 添加`FocusListener`到您的`JDialog`and on`focusGained(...)`方法中，您可以`setLocationRelativeTo(null)`同时使用 the`JFrame`和 the `JDialog`，这样无论它们之前在哪里，它们都会出现在屏幕的中心。

```
import java.awt.*;
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

/**
 * Created with IntelliJ IDEA.
 * User: Gagandeep Bali
 * Date: 1/14/13
 * Time: 7:34 PM
 * To change this template use File | Settings | File Templates.
 */
public class FrameFocus
{
    private JFrame mainwindow;
    private CustomDialog customDialog;

    private void displayGUI()
    {
        mainwindow = new JFrame("Frame Focus Window Example");
        customDialog = new CustomDialog(mainwindow, "Modal Dialog", true);
        mainwindow.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        JPanel contentPane = new JPanel();
        JButton mainButton = new JButton(
                "Click me to open a MODAL Dialog");
        mainButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                if (!customDialog.isShowing())
                    customDialog.setVisible(true);
            }
        });
        contentPane.add(mainButton);
        mainwindow.setContentPane(contentPane);
        mainwindow.pack();
        mainwindow.setLocationByPlatform(true);
        mainwindow.setVisible(true);
    }

    public static void main(String... args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new FrameFocus().displayGUI();
            }
        });
    }
}

class CustomDialog extends JDialog
{
    private JFrame mainWindow;
    public CustomDialog(JFrame owner, String title, boolean modal)
    {
        super(owner, title, modal);
        mainWindow = owner;
        JPanel contentPane = new JPanel();
        JLabel dialogLabel = new JLabel(
                "I am a Label on JDialog.", JLabel.CENTER);
        contentPane.add(dialogLabel);
        setContentPane(contentPane);
        pack();

        addFocusListener(new FocusListener() {
            @Override
            public void focusGained(FocusEvent e) {
                mainWindow.setLocationRelativeTo(null);
                setLocationRelativeTo(null);
            }

            @Override
            public void focusLost(FocusEvent e) {
                /*
                 * Nothing written for this part yet
                 */
            }
        });
    }
} 
```

**编辑 2：**

我在这里和那里进行了一些搜索，结果证明，在我看来，实际上`Monitor Screen`您的应用程序首先出现在哪个实例上，将确定它是[GraphicsConfiguration](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#getGraphicsConfiguration%28%29)。虽然当我在 API 中漫游时，上述事物只有一个 getter 方法，`GraphicsConfiguration` 而没有相同的 setter 方法（您仍然可以通过任何顶级窗口的构造函数指定一个，即[JFrame(...)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html#JFrame%28java.lang.String,%20java.awt.GraphicsConfiguration%29) / [JDialog(. ..）](http://docs.oracle.com/javase/7/docs/api/javax/swing/JDialog.html#JDialog%28java.awt.Frame,%20java.lang.String,%20boolean,%20java.awt.GraphicsConfiguration%29)）。

现在你可以用这段代码来占据你的头脑，它可以用来确定你想要设置的适当位置，同样，`focusGain()`在我看来，你可能不得不使用方法来满足你问题的条件 2。看一下附加的代码，虽然不需要创建一个`new JFrame/JDialog`，只需看如何获取屏幕坐标（您可以在`focusGain()`方法中添加以确定整个应用程序的位置。）

```
GraphicsEnvironment ge = GraphicsEnvironment.
    getLocalGraphicsEnvironment();
GraphicsDevice[] gs = ge.getScreenDevices();
for (int j = 0; j < gs.length; j++) {
    GraphicsDevice gd = gs[j];
    GraphicsConfiguration[] gc =
            gd.getConfigurations();
    for (int i=0; i < gc.length; i++) {
        JFrame f = new
        JFrame(gs[j].getDefaultConfiguration());
        Canvas c = new Canvas(gc[i]);
        Rectangle gcBounds = gc[i].getBounds();
        int xoffs = gcBounds.x;
        int yoffs = gcBounds.y;
        f.getContentPane().add(c);
        f.setLocation((i*50)+xoffs, (i*60)+yoffs);
        f.show();
    }
} 
```

**编辑 3：**

尝试改变这一点：

```
int x = loc.getX() + (mainWindow.getWidth() - getWidth()) / 2;
int y = loc.getY() + (mainWindow.getHeight() - getHeight()) / 2;
setLocation(x, y); 
```

只是：

```
setLocationRelativeTo(mainWindow); 
```

为了测试上述内容，我`FrameFocus`按原样使用了我的类，尽管我已将您的更改添加到我的`CustomDialog`方法中，如修改后的`CustomDialog`类中所示。

```
class CustomDialog extends JDialog
{
    private JFrame mainWindow;
    public CustomDialog(JFrame owner, String title, boolean modal)
    {
        super(owner, title, modal);
        mainWindow = owner;
        JPanel contentPane = new JPanel();
        JLabel dialogLabel = new JLabel(
                "I am a Label on JDialog.", JLabel.CENTER);
        contentPane.add(dialogLabel);
        setContentPane(contentPane);
        pack();

        addFocusListener(new FocusListener() {
            @Override
            public void focusGained(FocusEvent e) {
                //mainWindow.setLocationRelativeTo(null);
                //setLocationRelativeTo(null);
                GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
                GraphicsDevice[] gs = ge.getScreenDevices();
                for (int j = 0; j < gs.length; j++) {
                    GraphicsDevice gd = gs[j];
                    GraphicsConfiguration[] gc = gd.getConfigurations();
                    for (int i=0; i < gc.length; i++) {
                        Rectangle gcBounds = gc[i].getBounds();

                        Point loc = mainWindow.getLocationOnScreen();
                        if (gcBounds.contains(loc)) {
                            System.out.println("at " + j + " screen");

                            int x = gcBounds.x + (gcBounds.width - mainWindow.getWidth()) / 2;
                            int y = gcBounds.y + (gcBounds.height - mainWindow.getHeight()) / 2;
                            mainWindow.setLocation(x, y);

                            //x = (int) (loc.getX() + (mainWindow.getWidth() - CustomDialog.this.getWidth()) / 2);
                            //y = (int) (loc.getY() + (mainWindow.getHeight() - CustomDialog.this.getHeight()) / 2);
                            //CustomDialog.this.setLocation(x, y);
                            CustomDialog.this.setLocationRelativeTo(mainWindow);

                            break;
                        }
                    }
                }
            }

            @Override
            public void focusLost(FocusEvent e) {
                /*
                 * Nothing written for this part yet
                 */
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-11T12:45:16.420

使用[JDialog.setLocation()](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#setLocation%28int,%20int%29)[在屏幕](http://docs.oracle.com/javase/7/docs/api/java/awt/Point.html)`JDialog`上的所需点上移动

```
import java.awt.GridLayout;
import java.awt.Point;
import java.awt.event.ActionEvent;
import javax.swing.AbstractAction;
import javax.swing.Action;
import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.border.EmptyBorder;

public class JDialogAtPoint {

    private JFrame frame = new JFrame();
    private JPanel panel = new JPanel();
    private JDialog dialog;
    private Point location;

    public JDialogAtPoint() {
        createGrid();
        createDialog();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(panel);
        frame.setLocation(100, 100);
        frame.pack();
        frame.setVisible(true);
    }

    private void createGrid() {
        panel.setLayout(new GridLayout(3, 3, 4, 4));
        int l = 0;
        int row = 3;
        int col = 3;
        JButton buttons[][] = new JButton[row][col];
        for (int i = 0; i < row; i++) {
            for (int j = 0; j < col; j++) {
                buttons[i][j] = new JButton("");
                buttons[i][j].putClientProperty("column", i + 1);
                buttons[i][j].putClientProperty("row", j + 1);
                buttons[i][j].setAction(updateCol());
                panel.add(buttons[i][j]);
                l++;
            }
        }
    }

    private void createDialog() {
        dialog = new JDialog();
        dialog.setAlwaysOnTop(true);
        dialog.setModal(true);
        dialog.setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);
        JPanel pane = (JPanel) dialog.getContentPane();
        pane.setBorder(new EmptyBorder(20, 20, 20, 20));
        dialog.pack();
    }

    public Action updateCol() {
        return new AbstractAction("Display JDialog at Point") {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                JButton btn = (JButton) e.getSource();
                System.out.println("Locations coordinates" + btn.getLocation());
                System.out.println("clicked column "
                        + btn.getClientProperty("column")
                        + ", row " + btn.getClientProperty("row"));
                if (!dialog.isVisible()) {
                    showingDialog(btn.getLocationOnScreen());
                }
            }
        };
    }

    private void showingDialog(final Point loc) {
        dialog.setVisible(false);
        location = loc;
        int x = location.x;
        int y = location.y;
        dialog.setLocation(x, y);
        Runnable doRun = new Runnable() {

            @Override
            public void run() {//dialog.setLocationRelativeTo(frame);
                dialog.setVisible(true);
            }
        };
        SwingUtilities.invokeLater(doRun);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                JDialogAtPoint cf = new JDialogAtPoint();
            }
        });
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-15T07:07:24.373

在所有 3 个回答者的帮助下，我提出了似乎正是我需要的代码。首先，`JFrame`放置在当前屏幕的中间，然后`JDialog`相应地放置。

```
GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
GraphicsDevice[] gs = ge.getScreenDevices();
for (int j = 0; j < gs.length; j++) {
    GraphicsDevice gd = gs[j];
    GraphicsConfiguration[] gc = gd.getConfigurations();
    for (int i=0; i < gc.length; i++) {
        Rectangle gcBounds = gc[i].getBounds();

        Point loc = mainWindow.getLocationOnScreen();
        if (gcBounds.contains(loc)) {
            System.out.println("at " + j + " screen");

            int x = gcBounds.x + (gcBounds.width - mainWindow.getWidth()) / 2;
            int y = gcBounds.y + (gcBounds.height - mainWindow.getHeight()) / 2;
            mainWindow.setLocation(x, y);

            int x = loc.getX() + (mainWindow.getWidth() - getWidth()) / 2;
            int y = loc.getY() + (mainWindow.getHeight() - getHeight()) / 2;
            setLocation(x, y);

            break;
        }
    }
} 
```

# c++ - 将输出（int）返回给其他程序的 C/C++ 程序

> ID：14273838
> 
> 赞同：-5
> 
> 时间：2013-01-11T07:48:41.487
> 
> 标签：c++, c, binary, return-value, executable

我想在 C/C++ 中创建一个程序，该程序调用其他程序（已编译为二进制）并将其“退出状态”（或 int 类型的返回值）用于其他操作。这两个程序都是用 C/C++ 编写的，并且将构建在单独的二进制可执行文件中。我想要他们两个的简单代码。
还请告知上述程序用于 linux/windows 的包含文件。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T08:05:01.027

假设你有 app1 和 app2。

然后使用 C++ system() 函数并将其返回值分配给一个整数。

例如：app1 的代码：

```
#include <cstdlib>

// code code code ...

int exit_status = system("app2");

// more code 
```

exit_status 将采用从 app2 的 main() 函数返回的值。

# mysql - MySql 按日期范围获取总和

> ID：14273845
> 
> 赞同：3
> 
> 时间：2013-01-11T07:49:12.183
> 
> 标签：mysql

以下是一些用于存储广告活动预算历史记录的表格：

Campaign_budgets_history

```
id_campaign  budget date
1            10     2013-01-01
1            15     2013-01-03
1            10     2013-01-05 
```

如果某个日期没有数据，则等于上次设置的预算。

如何按日期范围计算预算总和，例如从“2013-01-02”到“2013-01-06”。结果必须是 60 美元，因为“2013-01-02”的预算等于“2013-01-01”，“2013-01-04”的预算等于“2013-01-03” '。

有没有办法通过 SQL 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:11:07.897

这是给你的一个查询。它使用用户变量来表示查询范围的结束，但在最终版本中，您可能更愿意使用参数占位符。请注意，这是您查询的范围*之后*`@end`的第一天，即它是该范围的*唯一*结束。

 **```
SET @begin = '2013-01-02';
SET @end = '2013-01-07';

SELECT
  SUM(DATEDIFF(IF(CAST(c.end AS date) > CAST(@end AS date),
                  CAST(@end AS date),
                  CAST(c.end AS date)
                 ),
               IF(c.begin < CAST(@begin AS date),
                  CAST(@begin AS date),
                  c.begin
                 )
              ) * c.budget
     ) AS overall_budget
FROM
(SELECT a.id_campaign,
        a.date begin,
        MIN(IFNULL(b.date, CAST(@end AS date))) end,
        a.budget
 FROM campaign_budgets_history a
 LEFT JOIN campaign_budgets_history b
        ON a.id_campaign = b.id_campaign AND a.date < b.date
 WHERE a.date < CAST(@end AS date)
 GROUP BY a.id_campaign, a.date
 HAVING end > CAST(@begin AS date)
) c; 
```

[在SQL Fiddle](http://sqlfiddle.com/#!2/4c622/9)上测试。不知道为什么所有的演员都是必要的，也许有一种方法可以避免其中的一些。但是上面的方法似乎有效，而一些演员阵容较少的版本则没有。

这个想法是子查询创建一个*范围*表，每个范围表示给定预算生效的日期。您可能需要调整第一个范围的开头，以匹配查询范围的开头。然后，您只需减去日期即可获得每个日期的天数，并将该数字乘以每日预算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:20:19.490

此示例使用日历（实用程序）表...

```
SELECT * FROM calendar WHERE dt BETWEEN '2012-12-27' AND '2013-01-12';
+------------+
| dt         |
+------------+
| 2012-12-27 |
| 2012-12-28 |
| 2012-12-29 |
| 2012-12-30 |
| 2012-12-31 |
| 2013-01-01 |
| 2013-01-02 |
| 2013-01-03 |
| 2013-01-04 |
| 2013-01-05 |
| 2013-01-06 |
| 2013-01-07 |
| 2013-01-08 |
| 2013-01-09 |
| 2013-01-10 |
| 2013-01-11 |
| 2013-01-12 |
+------------+

SELECT SUM(budget) total
  FROM campaign_budgets_history a
  JOIN 
     ( SELECT MAX(y.date) max_date 
         FROM calendar x 
         JOIN campaign_budgets_history y 
           ON y.date <= x.dt 
        WHERE x.dt BETWEEN '2013-01-02' AND '2013-01-06'
        GROUP
           BY x.dt           
     ) b
    ON b.max_date = a.date; 
```**

# jakarta-ee - 在 ispmanager 中部署在 eApps Glassfish 服务器上

> ID：14273852
> 
> 赞同：0
> 
> 时间：2013-01-11T07:49:27.570
> 
> 标签：jakarta-ee, glassfish, web-deployment

我想在 eApps 上部署 JAVA Web 应用程序 Glassfish v3.1.1

最好的方法是什么，我无法通过 myip:4848 访问服务器域

> 我尝试使用 netbeans 进行远程部署，但失败了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:45:57.157

*   您可以使用 asadmin 命令部署应用程序：`asadmin deploy /path/to/file.war`asadmin 命令行实用程序位于`/GLASSFISH_HOME/glassfish/bin/`. 您可以将几个参数传递给 asadmin，这些参数在[此处进行了描述](http://docs.oracle.com/cd/E18930_01/html/821-2433/deploy-1.html#SJSASEEREFMANdeploy-1)

*   您可以手动部署您的应用程序。您必须将 .war 文件或包含 .war 文件内容的文件夹复制到文件夹 /GLASSFISH_HOME/glassfish/domains/domain1/autodeploy

*   **在正常情况下**，您可以通过 Glassfish 管理控制台部署 .war 和 .ear 文件。导航到`http://localhost:4848`，转到 Applications，单击 Deploy 并选择要部署的文件（可以在[此处](https://support.eapps.com/index.php?/Knowledgebase/Article/View/242/59/cloud-hosting-applications---glassfish-v30#deploying_applications_using_the_glassfish_admin_console)找到非常详细的说明）

# python - 在 Windows 上安装 Numpy 和 Scipy

> ID：14273853
> 
> 赞同：8
> 
> 时间：2013-01-11T07:49:40.170
> 
> 标签：python, numpy, scipy, blas, atlas

我已经成功安装了 Numpy。[但是在网站上](http://www.scipy.org/Installing_SciPy/Windows)，我有很多事情要做，比如构建 Numpy、Scipy、下载 ATLAS、LAPACK 等。我真的很困惑，甚至我也检查了其他一些查询。还是无法理解。

谁能解释一下我到底该怎么做？我的电脑上安装了 cygwin。

1.  如何构建 Numpy？建立numpy有什么用？
2.  如何安装 Scipy？
3.  什么是 ATLAS、LAPACK 等？

非常感谢（提前）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-05T14:53:33.607

我为同样的问题苦苦挣扎了很长时间，最终在[这里](https://stackoverflow.com/questions/2213551/installing-scipy-with-pip)找到了一个简单的解决方案`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T07:59:08.270

你真的应该尝试[Enthought Python Distribution](http://enthought.com/)。就一个msi安装文件，点几下`Next`就搞定了。其中包含很多科学包，包括numpy、scipy、matplotlib等，还有ipython环境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T07:52:59.540

WinPython 会是您的选择吗？除非有必要，我会看看这是否能满足我的需求

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-10T18:30:04.610

**我执行以下操作以在我的 Windows virtualenv 上安装 Scripy：**

1.  我在这里下载了文件：[http](http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy) ://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy然后选择了文件：`numpy-1.11.1+mkl-cp27-cp27m-win32.whl`

. 该文件适用于我，因为我正在运行 Python 2.7 并且我有一台 win32 机器。您可以通过在 cmd 提示符下运行 python 来检查这些信息。我的说：

```
Python 2.7.9 (default, Dec 10 2014, 12:24:55) [MSC v.1500 32 bit (Intel)] on win32 
```

我们之所以先下载numpy，是因为scipy与之相关。在同一网站上的 scipy 下：[http://www.lfd.uci.edu/~gohlke/pythonlibs/#scipy](http://www.lfd.uci.edu/~gohlke/pythonlibs/#scipy)，它说：

```
Requires numpy+mkl.
Install numpy+mkl before installing scipy. 
```

2.  为您下载适用的 scipy 文件，我的是这个：`scipy-0.18.0-cp27-cp27m-win32.whl`

现在，您可以将它们转储到 virtualenv 文件夹的根目录中。在您的 virtualenv 中发送以下命令：

```
pip install numpy-1.11.1+mkl-cp27-cp27m-win32.whl
pip install scipy-0.18.0-cp27-cp27m-win32.whl 
```

然后 Scipy 将成功安装。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-14T15:44:14.707

最简单的方法是按照以下步骤：修复 python [ 2.n < python < 3.n ] 的 scipy

从以下网址下载必要的文件：[http ://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/%7Egohlke/pythonlibs/)

下载 numpy+mkl 的版本（运行 scipy 需要），然后为你的 python 类型下载 scipy（2.n python 写成 2n）或（3.n python 写成 3n），n 是一个变量。请注意，您必须知道您使用的是 32 位还是 64 位处理器。

在您的计算机上的某处创建一个目录，例如 [C:\DIRECTORY] 以安装文件 numpy+mkd.whl 和 scipy.whl

下载这两个文件后，在您的计算机上找到该文件的位置并将其移动到您创建的目录中。

示例：scipy需要第一个文件安装在---> C:\DIRECTORY\numpy\numpy-0.0.0+mkl-cp2n-cp2nm-win_amd32.whl

示例：第二个文件安装在---> C:\DIRECTORY\scipy\scipy-0.0.0-cp2n-cp2nm-win_amd32.whl

转到您的命令提示符并继续以下 Python 版本 2.n 的示例：

py -2.n -m pip install C:\DIRECTORY\numpy\numpy-0.0.0+mkl-cp2n-cp2nm-win_amd32.whl

## 应该安装

py -2.n -m pip install C:\DIRECTORY\scipy\scipy-0.0.0-cp2n-cp2nm-win_amd32.whl

## 应该安装

在你的 python IDLE 上测试两个模块，如下所示： import numpy import scipy

## 如果没有返回错误，则模块正在工作。

国际食品药品监督管理局

# servlets - 未找到 HttpServletRequest getPart(")

> ID：14273856
> 
> 赞同：2
> 
> 时间：2013-01-11T07:50:06.333
> 
> 标签：servlets, glassfish, vaadin

我不知道为什么它不起作用。我试图在我的 servlet 中接受 multipart-formdata 但`request.getPart("")`没有显示。我正在使用 glassfish 3.1.2 服务器。使用的 Tha 框架是用于开发应用程序的 vaadin。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T15:07:08.500

假设您的具体问题确实是您的 IDE 没有`getPart()`在自动完成时显示该方法，那么这只能意味着该项目未配置为与 Servlet 3.0 兼容的项目。[该方法即在 Servlet 3.0 中引入](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getPart%28java.lang.String%29)。

您没有告诉任何关于您正在使用的 IDE 的任何信息，并且您的问题历史也没有提供任何线索，所以让我们假设它是 Eclipse，它被广泛使用。在这种情况下，您需要在 2 个位置对其进行配置，前提是您已将*动态 Web 项目*与 Servlet 3.0 兼容容器作为项目属性中的*目标运行*时正确关联（否则`HttpServletRequest`根本不会编译）：

1.  在项目属性的*Project Facets*部分中，*动态 Web 模块*版本必须设置为 3.0。

    ![在此处输入图像描述](../Images/6ec2c83230fe15b106087303be615530.png)

    * * *

2.  如果您的 IDE 生成了一个`/WEB-INF/web.xml`文件，那么您需要确保它的`<web-app>`根声明也与 Servlet 3.0 匹配，否则它在运行时仍然会失败。

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <web-app 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://java.sun.com/xml/ns/javaee" 
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
        version="3.0">

    </web-app> 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-02T19:17:37.777

我有同样的问题。这就是我最终发现的问题。我依赖于：

```
<dependency>
    <groupId>com.googlecode.jsontoken</groupId>
    <artifactId>jsontoken</artifactId>
    <version>1.1</version>
</dependency> 
```

结果发现 jsontoken 依赖于 servlet-api 2.5。所以解决问题的方法很简单：

```
<dependency>
    <groupId>com.googlecode.jsontoken</groupId>
    <artifactId>jsontoken</artifactId>
    <version>1.1</version>
    <exclusions>
        <exclusion>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
        </exclusion>
    </exclusions>
</dependency> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-21T02:32:11.363

maven.. pom.xml.. 修改这个依赖

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>javax.servlet-api</artifactId>
    <version>3.0.1</version>
</dependency> 
```

servlet api 2.5 不起作用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-19T08:03:28.877

对于那些后来偶然发现的人，如果 BalusC 建议的解决方案不能为您解决问题，请检查`provided`运行时与服务器运行时不匹配的库的构建路径。

例如，如果您的 Maven`pom.xml`包含提供类似这样的 java EE 库的条目...

```
 <dependency>
            <groupId>org.apache.openejb</groupId>
            <artifactId>javaee-api</artifactId>
            <version>5.0-1</version>
            <scope>provided</scope>
        </dependency> 
```

...它们可能会干扰您的 IDE 所认为的运行时环境，该运行时环境将用于提供代码完成建议。

跟踪问题的最简单方法是找出`HttpServletRequest`类的来源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-22T05:23:58.710

我有同样的问题，我想与你分享，以防其他人遇到同样的问题：

就我而言，我有一个自动下载的 j2ee.jar，它的版本可能很旧。它位于 Libraries --> j2ee Runtime Library 下（stackoverflow 不允许我在 eclipse 中添加图像 - 在 Project Explorer 中 - 展开项目 --> Java Resources --> 库 --> J2ee Runtime Library --> j2ee.jar)

我去了这个文件所在的文件系统（你在eclipse中的文件旁边有这个位置）并用一个更新的jar替换了它。[你可以从这里](http://mvnrepository.com/artifact/javax/javaee-api/6.0)拿罐子。

然后清理并重建项目。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-05T10:34:00.767

正如 Bjørn 的回答中所指出的，一个可能的原因是一个相互冲突的工件**servlet-api (Servlet 2.5 spec)**。就我而言，就是这种依赖

```
<groupId>com.google.api-client</groupId>
<artifactId>google-api-client-appengine</artifactId>
<version>1.30.10</version> 
```

要找出编译冲突库的依赖项，只需构建并打印依赖项树：

```
mvn org.apache.maven.plugins:maven-dependency-plugin:2.10:tree -Dverbose=true 
```

部分输出：

[![在此处输入图像描述](../Images/1e85daab3dd8aa447d16d3da8e869db8.png)](https://i.stack.imgur.com/xca97.png)

最后从依赖项中排除工件

```
<dependency>
    <groupId>com.google.api-client</groupId>
    <artifactId>google-api-client-appengine</artifactId>
    <version>1.30.10</version>
    <exclusions>
        <exclusion>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
        </exclusion>
    </exclusions>
</dependency> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-11-20T06:36:53.063

嗨朋友们，我也遇到了类似的问题，我会告诉你我做了什么。

我正在使用 eclipse juno 和 Tomcat 7 服务器。确保使用最新的 servlet API jar。Tomcat 7 将仅支持动态模块版本 2.5 不超过该版本。所以使用更高版本的Tomcat或更低的动态模块版本就可以了。

还有一件事：打开您的 servlet api jar 并查看它是否包含“Part”，您可以轻松检查它。

# ios - iOS CoreData 关系：使用可选的有或没有最小值

> ID：14273858
> 
> 赞同：4
> 
> 时间：2013-01-11T07:50:10.307
> 
> 标签：ios, core-data, relationship

在核心数据中，您可以将关系设置为可选，但您可以将其设置为最小检查或不检查...检查下面的图像以了解差异。我**想**我注意到的是，当您使用诸如 : 之类的谓词搜索对象时`@"object != %@", objectToSearchFor`，第一个设置返回 nil，但第二个设置不返回。我可能会误会，但有人知道这两种设置之间的区别吗？

![没有最低要求的可选关系](../Images/1d7933504f76124caa3210a3fccda093.png)

![与最小值的可选关系](../Images/631200199c67a918f6a20b98aac14cc3.png)

Ps 我不知道这是否重要，但我使用 SQLite 作为数据库引擎。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T09:02:45.593

[NSRelationshipDescription 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSRelationshipDescription_Class/NSRelationshipDescription.html)中有一些关于此的文档：

> **基数**
> 关系的最大和最小计数表示引用的对象数（1 表示一对一关系，-1 表示未定义）。仅当包含对象中的关系值不为零时才强制执行计数。也就是说，如果关系值是可选的，则关系中可能有零个对象，这可能小于最小计数。

例如，在可选的多对多关系的情况下：关系的值必须是`nil`，或者至少包含所需对象的最小数量。

在可选的一对一关系的情况下，关系值要么是`nil`要么指向另一个对象，所以我想不出最小计数是 0 还是 1 会有所不同的情况。

保存托管对象上下文时会检查所有约束，例如最小和最大计数等。

# joomla - 如何以编程方式编辑/更新 Joomla 文章

> ID：14273865
> 
> 赞同：1
> 
> 时间：2013-01-11T07:50:51.630
> 
> 标签：joomla, joomla2.5, edit-in-place

我希望以编程方式编辑/更新 joomla 2.5.8 文章。

我知道这可以做到，但我还不知道怎么做；我在网上找不到任何帮助..

理想情况下，我会寻找一种可以在客户端（Javascript / AJAX）上工作的解决方案，以减少服务器负载。

到目前为止，我已尝试将（随机 HTML / 文本）发布到***<site_root>/administrator/index.php?option=com_content&view=article&layout=edit&id=<article_id>*文件中的***'jform[articletext]'*字段但没有成功

 **有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:11:39.863

在 PHP 文件的帮助下，您只需要从数据库中更新所需的文章。**

# javascript - GWT 到 Javascript 的转换

> ID：14273869
> 
> 赞同：7
> 
> 时间：2013-01-11T07:51:16.660
> 
> 标签：javascript, gwt

如果我这样做，在 javascript 控制台中，

```
 a = [1,2,3]
   Object.prototype.toString.call(a) // gives me "[object Array]"
   typeof a  // gives me "object" 
```

如果我在 GWT 中创建一个数组列表并将其传递给本机方法并执行此操作，

```
// JAVA code
   a = new ArrayList<Integer>();
   a.push(1);
   a.push(2);

   //JSNI code
    Object.prototype.toString.call(a) // gives me "[object GWTJavaObject]"
    typeof a // returns "function" 
```

两者之间究竟有什么区别？GWTJavaObject与**Array**完全相似**吗**？

为什么在纯 javascript 中`typeof`返回“**对象”而在 GWT 中返回“****函数**”？

总结的问题是，在 Javascript 中转换成的 GWT 对象到底是什么？**完整代码**在这里。

```
 public void onModuleLoad()
        {
                List<Integer> list = new ArrayList<Integer>();
            list.add( new Integer( 100 ) );
            list.add( new Integer( 200 ) );
            list.add( new Integer( 300 ) );

            Window.alert(nativeMethodCode( list ));
                Window.alert(nativeMethodCode2( list ));
        }

        public static final native Object nativeMethodCode( Object item )
        /*-{
            return Object.prototype.toString.call(item);
        }-*/;

        public static final native Object nativeMethodCode2( Object item )
        /*-{
            return typeof item;
        }-*/; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T09:46:08.707

GWT 中的 an`ArrayList`不会转换为纯 JS 数组：它是一个扩展`AbstractList`并实现了一堆接口的类，并且在转换为 JS 时应保留此信息，以便`instanceof`检查（在您的 Java 代码中；例如`instanceof List`or `instanceof RandomAccess`）仍然按预期工作。因此， An`ArrayList`被实现为JS 数组的*包装器，请参阅*[https://code.google.com/p/google-web-toolkit/source/browse/tags/2.5.0/user/super/com/google/gwt /emul/java/util/ArrayList.java](https://code.google.com/p/google-web-toolkit/source/browse/tags/2.5.0/user/super/com/google/gwt/emul/java/util/ArrayList.java)。

请注意，Java 数组被转换为 JS 数组，但要非常小心在 JSNI 中对它所做的操作，因为您可能会破坏进一步的 Java 假设（例如，数组具有固定大小）。

# c# - 如何使用 Encoding.GetString 处理大量数据？（抛出 OutOfMemoryException）

> ID：14273873
> 
> 赞同：4
> 
> 时间：2013-01-11T07:51:30.390
> 
> 标签：c#, encoding, out-of-memory

我正在从 db 读取二进制数据并使用代码将其转换为文本。

```
 public String BinaryToText(byte[] data)
       {
         System.Text.Encoding encEncoder = System.Text.ASCIIEncoding.ASCII;

         return encEncoder.GetString(data);
       } 
```

上述程序正常工作，但是当二进制文件> = 85mb被转换时，出现OutOfMemoryException。如何将大型二进制数据转换为字符串而不会出错。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T08:01:57.177

除非您的内存不足等，否则我通常不会认为 85MB 也有问题。即使 x86 通常也可以在不暂停呼吸的情况下处理这个问题。

对于大量数据，最简单的答案始终是“不要一次将其全部保存在内存中”。ADO.NET 在数据读取器上有一个只转发 API，它允许连续调用来获取大型 BLOB 的不同部分：

```
using(var reader = cmd.ExecuteReader(CommandBehavior.SequentialAccess))
{  //                                    ^^ forwards-only mode ^^
  long offset = 0;
  int read;
  byte[] buffer = new byte[8096];
  while ((read = reader.GetBytes(colIndex, offset, buffer, 0, buffer.Length))>0)
  {
     ProcessBytes(buffer, 0, read);
     offset += read;
  }
} 
```

where`ProcessBytes(byte[] buffer, int offset, int count)`处理来自 的`count`字节`buffer`，从 开始`offset`。在 ASCII 的情况下，您可能*根本*不使用编码就可以逃脱；对于其他编码，您可以使用`Encoding.GetDecoder()`API 来解码数据流，虽然它有点乱。这两件事一起将允许您处理任意大（必要时为数 TB）的数据源，而无需一次将其全部存储在内存中。

那么，下一个问题是：你打算*如何*处理这些数据？

如果您*确实*需要一次将其全部存储在内存中，那么您**别无选择**，只能保留它。您*可以*使用迭代器块做一些事情，依次返回字符串的*片段*。

# cordova - 如何将浏览器文件 API 与 PhoneGap Web 应用程序一起使用？

> ID：14273876
> 
> 赞同：1
> 
> 时间：2013-01-11T07:51:38.447
> 
> 标签：cordova, fileapi

前段时间我创建了一个基于 PhoneGap 的网络应用程序。

由于现在可以在 iOS 6 上使用输入类型文件，因此我也想使用它和本机 File API，但继续使用 PhoneGap 以便能够将应用程序放入 Appstore。

顺便说一句：我找到[了这个链接](https://stackoverflow.com/questions/7564533/how-to-disable-phonegap-apis-functionality)，但这不起作用：每次我访问文件功能时，我都会从 PhoneGap 收到一个错误，它基本上什么都不做。

**更新：**

事实上，获取文件（图像）并将其发送到服务器工作正常，但在此之前我想使用[canvasResize](https://github.com/gokercebeci/canvasResize)调整图像大小（以减小文件大小） 。调用函数 reader.readAsDataURL(file) 时，出现以下错误：

```
-[CDVJKDictionary pathExtension]: unrecognized selector sent to instance 0x208892b0
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[CDVJKDictionary pathExtension]: unrecognized selector sent to instance 0x208892b0' 
```

**更新 2：**

这是我使用的相关代码：

```
var reader = new FileReader();
var fileInput = document.getElementById('ideaCommitFileInput');
var file = fileInput.files[0];
reader.readAsDataURL(file); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T23:04:59.817

如果您要在 iOS 和 Android 上部署 PhoneGap 应用程序，我建议您为 iOS 6 设备以及`navigation.camera`Android 和更早版本的 iOS 设备使用常规文件输入字段，假设您正在处理图像上传。

只要您的应用程序具有足够的“本机功能”，我怀疑 Apple App review 会介意您使用 HTML5 File API。

这是使用 File API 检索 Base64 编码图像字符串的一个很好的示例：[Phonegap encode image base64](https://stackoverflow.com/questions/14286014/phonegap-encode-image-base64/14287866#14287866)。

希望这可以帮助。

# iphone - iphone sdk中的引用错误？

> ID：14273878
> 
> 赞同：0
> 
> 时间：2013-01-11T07:51:43.353
> 
> 标签：iphone, ios, objective-c, xcode

在我的应用程序中，我创建了一个`Core.h`文件并声明了一些方法。在其他文件中，我导入“core.h”，创建一个对象并通过对象调用方法，但它没有显示任何错误。

但是当尝试运行我的应用程序时，它显示错误如：

架构 i386 的未定义符号：

“_OBJC_CLASS_$_Core”，引用自：

```
 objc-class-ref in ReadingDatabaseAppDelegate.o
  objc-class-ref in HomeController.o 
```

我的代码：

```
// HomeController.h

#import "Core.h"

//HomeController.m

- (void)startInitialising:(id)sender
{
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];    

    //NSLog(@"%@ %@", [UIDevice currentDevice].systemName, [UIDevice currentDevice].systemVersion);

    Core *coreObj = [[Core alloc] init];
    threadArray = [coreObj getPreferences];
    threadPrefereneRow = [coreObj getSavedPreferene];
    threadLastUpdated = [coreObj getSavedRequestTime];
    threadNumberOfUpdates = [coreObj getNumberOfUpdates:threadLastUpdated];
    [coreObj release];

    [[NSNotificationCenter defaultCenter] postNotificationName:FinishInitializing object:nil];
    [pool release];
}

-(void) finishInitializingHandler: (NSNotification *) sender
{
Core *coreObj = [[Core alloc] init];
    [coreObj setTabbarSyncValue:tabBar];
    [coreObj release];
} 
```

**我该如何解决这个问题**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:16:34.553

一个头文件本身是不够的。您需要匹配的实现文件（.m 文件、.a 库、dylib 或框架。

* * *

简化：

将 .h 文件视为网页的书签
（它们包含链接和描述，但没有实际内容）

# asp.net - 错误 25 连接子句中的表达式之一的类型不正确。调用“加入”时类型推断失败

> ID：14273879
> 
> 赞同：0
> 
> 时间：2013-01-11T07:51:44.340
> 
> 标签：asp.net, entity-framework, join

我通过在两个表上应用联接从表中获取数据，但出现此错误：

```
Error   40  The type of one of the expressions in the join clause is incorrect.  Type inference failed in the call to 'Join'.   C:\Documents and Settings\Ashir\My Documents\OpenLearningSolutions08-01-2013\OpenLearningSolutions\purchase.aspx.cs 70  21  C:\...\OpenLearningSolutions\ 
```

这是我的代码：

```
OLSContainer ols = new OLSContainer();
        var reSet = from l in ols.LEVEL_COURSE
                    join lp in ols.PACKAGES 
                    on new { l.course_ID, l.levelID } equals new { lp.course_ID, lp.level_ID }
                    select l; 
```

虽然所有四列都是 int nullabe 类型，但我收到了这个错误。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:02:22.117

在您的 LINQ 表达式中，成员的名称不同，因此类型最终不同，因此 C# 无法确定两者之间的共同类型。

试试这个。

```
OLSContainer ols = new OLSContainer();
var reSet = from l in ols.LEVEL_COURSE
                join lp in ols.PACKAGES 
                on new { l.course_ID, l.levelID } equals new { course_ID = lp.course_ID, levelID = lp.level_ID }
                select l; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T06:16:07.473

我通过这种方式从表中选择数据解决了我的问题：

```
OLSContainer ols = new OLSContainer();
        var reSet = (from l in ols.LEVEL_COURSE
                    from p in ols.PACKAGES
                    where l.course_ID == p.course_ID && l.levelID == p.level_ID &&    l.course_ID==courseID
                    select new { l.levelID, l.levelName }).Distinct(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:08:56.203

如果你在比较int？和 int 例如，您可以将 .Value 附加到可为空的属性。

# javascript - 会话管理和内存

> ID：14273883
> 
> 赞同：0
> 
> 时间：2013-01-11T07:51:56.247
> 
> 标签：javascript, node.js, express

我能够编写一个程序uisng expressjs。我已将用户名和密码写入 json 文件并在收到请求时访问。

```
req.body.password == users[req.body.username].password) 
```

我想复制创建的 sessionID (SID) 并发送给客户端。一旦我收到一个新请求，我想检查它是否在本地（内存）中，如果它不存在，我想向用户发送不同的错误代码。

```
if(req.session.id= 
```

我的问题是，当不使用 redis（或）任何数据库时，如何将这些会话 ID 存储在内存中？我知道如果它在重新启动时是内存中的所有数据都消失了。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:53:12.600

不要使用会话存储，Express（连接）默认为内存会话存储。

# java - 创建树状结构

> ID：14273886
> 
> 赞同：1
> 
> 时间：2013-01-11T07:52:14.063
> 
> 标签：java, collections

在数据库中，我有这种格式的数据：

![在此处输入图像描述](../Images/76d80ce67980dc0c91178de6ba6eb164.png)

要求是以这种格式表示 excel 中的数据：国家名称形成选项卡名称。

![在此处输入图像描述](../Images/43b31413cfa33112cdc9a53cfcfc9d5a.png)

我想把每个数据库行放在一个对象中。为了实现格式，我需要遍历国家列表，然后在每个国家列表（例如美国）中，选择国家列表（NY，NY），然后在该循环中遍历每个州（例如纽约），以便获得纽约和阿拉比。对其他州重复此操作，然后退出循环，然后以相同的方式遍历其他国家/地区。

但是我在这里面临的困难是，我如何在 Java 中表示这些数据，这将允许我以所需的格式进行迭代？所以当我迭代美国时，它给了我纽约和新泽西，当我迭代新泽西时，它给了我其中的城市。我很震惊。请给我一些建议，让我继续前进

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:12:18.720

使用`Map<String, Map<String, List<String>>>`.

1.  第一个字符串是国家的键。
2.  Map 是一张地图，其中键是州，值是城市列表。

确保在插入数据之前正确初始化数据。例如，在这里我插入“纽约市”作为纽约州的美国城市：

```
Map<String, Map<String, List<String>>> fullMap = new HashMap<String, Map<String, List<String>>>();
fullMap.put("US", new HashMap<String, List<String>>());
fullMap.get("US").put("NY", new ArrayList<String>());
fullMap.get("US").get("NY").add("New York"); 
```

要获取（美国、纽约）的城市列表，您必须执行以下操作：

```
List<String> nyCities = map.get("US").get("NY"); 
```

...给定我们的初始化过程应该返回一个包含一个项目的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:07:26.580

在 Java 中，您可以使用`List`包含另一个`List`元素的 a。

```
List<List<List<City>>> 
```

类`City`保存一个城市，内部列表保存一个州的所有城市，中间列表保存一个国家的所有州列表，外部列表保存国家。

另一个想法是从按国家和州排序的数据库中获取记录，然后逐个浏览它们，每当遇到新国家时启动新选项卡，遇到新州时启动新表。

# ruby-on-rails - YARD：如何创建指向类方法的链接？

> ID：14273891
> 
> 赞同：9
> 
> 时间：2013-01-11T07:52:43.517
> 
> 标签：ruby-on-rails, ruby, documentation, yard

如何使用 YARD创建指向 ruby*​​ 类方法的链接？*这是有关链接的[院子文档。](http://rubydoc.info/docs/yard/file/docs/GettingStarted.md#Linking_Objects______)

链接到同一命名空间内的*实例方法：*

```
{#my_instance_method} 
```

哪个工作正常。*但是，使用类方法*遵循相同的方法不会编译和修改它：

```
{#self.my_class_method} 
```

生成以下纯文本（不是链接）：

```
ObjectName#self#self.my_class_method 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T11:43:12.510

只需使用名称，裸露：

```
{class_method} 
```

或者如果它在不同的命名空间中

```
{Object.class_method} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T10:46:07.337

使用一个点。

```
{.class_method} 
```

或者，如果您使用 markdown 作为处理器，则需要转义下划线。

```
{.class\_method} 
```

# android - 不幸的是，提醒器已停止

> ID：14273900
> 
> 赞同：0
> 
> 时间：2013-01-11T07:53:33.743
> 
> 标签：android, android-emulator

嗨，我正在制作一个允许用户添加提醒的应用程序，但是当我单击“*添加新”*按钮时出现错误 - 不幸的是，提醒器已停止。

**AddTaskActivity.java 代码：**

```
 public class AddTaskActivity extends Activity {
Task mTask;
Handler mHandler = new AddHandler();

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.add_task);

Button add = (Button) this.findViewById(R.id.submit);
add.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {
    GrammarParser parser = new GrammarParser();
    parser.setAndroidContext(AddTaskActivity.this);
    EditText text = (EditText) findViewById(R.id.add_task);
    String input = text.getText().toString();
    mTask = parser.parse(input);
    String output = mTask.toString();
    TextView log = (TextView) findViewById(R.id.log_cat);
    log.setText(output);
    }

});

Button save = (Button) findViewById(R.id.save);
save.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {
    if (mTask != null)
        DatabaseInterface.addTask(AddTaskActivity.this, mHandler,
            mTask);

    }

});

Button cancel = (Button) findViewById(R.id.cancel);
cancel.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {
    finish();

    }

});

} 
```

add_task.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <EditText
        android:id="@+id/add_task"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="2"
        android:ems="10"
        android:inputType="text" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/submit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/add_new_task" />
</LinearLayout>

<TextView
    android:id="@+id/log_cat"
    android:layout_width="wrap_content"
    android:layout_height="0dip"
    android:layout_weight="1"
    android:text="@string/no_task"
    android:textAppearance="?android:attr/textAppearanceMedium" />

   <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/save"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/save" />

    <Button
        android:id="@+id/cancel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/cancel" />
</LinearLayout>

</LinearLayout> 
```

字符串.xml：

```
<resources>

<string name="hello">Hello World, RemindererActivity!</string>
<string name="app_name">Reminderer</string>
<string name="hello_world">Hello world</string>
<string name="add_new_task">Add new</string>
<string name="submit">Submit</string>
<string name="no_task">Sample tasks:\n
    buy eggs\n
    buy eggs 8pm\n
    buy eggs Monday 9am\n
    buy eggs July 1\n
    buy eggs next Monday\n
    buy eggs 8pm repeats daily</string>
<string name="due_now">These task(s) are due now:</string>
<string name="dismiss">Dismiss</string>
<string name="snooze">Snooze</string>
<string name="save">Save</string>
<string name="cancel">Cancel</string> 
```

**Logcat 说**：

```
 01-11 16:05:01.252: E/AndroidRuntime(943): FATAL EXCEPTION: main
01-11 16:05:01.252: E/AndroidRuntime(943): java.lang.NullPointerException
01-11 16:05:01.252: E/AndroidRuntime(943):  at com.frankandrobot.reminderer.AddTaskActivity$1.onClick(AddTaskActivity.java:39)
01-11 16:05:01.252: E/AndroidRuntime(943):  at android.view.View.performClick(View.java:4202)
01-11 16:05:01.252: E/AndroidRuntime(943):  at android.view.View$PerformClick.run(View.java:17340)
01-11 16:05:01.252: E/AndroidRuntime(943):  at android.os.Handler.handleCallback(Handler.java:725)
01-11 16:05:01.252: E/AndroidRuntime(943):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-11 16:05:01.252: E/AndroidRuntime(943):  at android.os.Looper.loop(Looper.java:137)
01-11 16:05:01.252: E/AndroidRuntime(943):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-11 16:05:01.252: E/AndroidRuntime(943):  at java.lang.reflect.Method.invokeNative(Native Method)
01-11 16:05:01.252: E/AndroidRuntime(943):  at java.lang.reflect.Method.invoke(Method.java:511)
01-11 16:05:01.252: E/AndroidRuntime(943):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-11 16:05:01.252: E/AndroidRuntime(943):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-11 16:05:01.252: E/AndroidRuntime(943):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:05:36.540

很难判断哪一行`onClick()`导致*NPE*，因为您没有提供行号。您需要在代码中执行更多错误检查，并`assert()`更频繁地使用：

```
@Override
public void onClick(View arg0) {
    GrammarParser parser = new GrammarParser();
    parser.setAndroidContext(AddTaskActivity.this);

    EditText text = (EditText) findViewById(R.id.add_task);
    assert(text != null);
    String input = text.getText().toString();
    mTask = parser.parse(input);
    if (mTask != null) {
        String output = mTask.toString();
        TextView log = (TextView) findViewById(R.id.log_cat);
        assert(log != null);
        log.setText(output);
    }
    else {
        Log.e(TAG, "Failed to parse text");
    }
} 
```

# c# - 我想在 datagrid 中查看它，每次用户单击按钮时都会添加输入

> ID：14273901
> 
> 赞同：0
> 
> 时间：2013-01-11T07:53:36.110
> 
> 标签：c#, asp.net, sql-server, stored-procedures

我想在数据网格中查看它，每次用户单击按钮时都会添加输入。我将如何做到这一点..现在它可以保存到数据库中......但我希望它在界面本身以datagrid顺序，每次用户单击添加数据时，它会一起保存到数据库中它以datagrid格式显示在前端..TQ

```
 protected void Button2_Click(object sender, EventArgs e)
    {
        if (Session["Time"].ToString() == ViewState["Time"].ToString())
        {
            SqlConnection connection = new SqlConnection("Data Source=RGUNASEL-   DESK\\SQLEXPRESS;Initial Catalog=eLogbook;User ID=sa;Password=1234");
            connection.Open();

            SqlCommand cmd = new SqlCommand("eform2", connection);
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.Add(new SqlParameter("@lot_num", SqlDbType.VarChar, 50)).Value = TextBox8.Text;
            cmd.Parameters.Add(new SqlParameter("@location", SqlDbType.VarChar, 50)).Value = TextBox9.Text;
            cmd.Parameters.Add(new SqlParameter("@total_in", SqlDbType.VarChar)).Value = TextBox10.Text;
            cmd.Parameters.Add(new SqlParameter("@first_test", SqlDbType.VarChar, 50)).Value = TextBox11.Text;
            cmd.Parameters.Add(new SqlParameter("@second_test", SqlDbType.VarChar)).Value = TextBox12.Text;
            cmd.Parameters.Add(new SqlParameter("@third_test", SqlDbType.VarChar, 50)).Value = TextBox13.Text;
            cmd.Parameters.Add(new SqlParameter("@total_out", SqlDbType.VarChar, 50)).Value = TextBox14.Text;
            cmd.Parameters.Add(new SqlParameter("@lot_status", SqlDbType.VarChar, 50)).Value = TextBox17.Text;
            cmd.Parameters.Add(new SqlParameter("@remark", SqlDbType.VarChar, 50)).Value = TextBox16.Text;

            cmd.ExecuteNonQuery();
            Response.Write("Submitted!");
            TextBox8.Text = null;
            TextBox9.Text = null;
            TextBox10.Text = null;
            TextBox11.Text = null;
            TextBox12.Text = null;
            TextBox13.Text = null;
            TextBox14.Text = null;
            TextBox17.Text = null;
            TextBox16.Text = null;

            Session["Time"] = DateTime.Now.ToString();
        }
        else
        {
            // Code for page refresh....
            TextBox8.Text = null;
            TextBox9.Text = null;
            TextBox10.Text = null;
            TextBox11.Text = null;
            TextBox12.Text = null;
            TextBox13.Text = null;
            TextBox14.Text = null;
            TextBox17.Text = null;
            TextBox16.Text = null;
            Response.Write("Page Refreshed!");
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:05:15.770

嘿，不需要检查时间，只需在每个数据/行添加后重新绑定网格视图。

喜欢

```
//Code to bind gridview
Dataset dst=yourFunctionToGetRequiredTableRows();
yourGridView.DataSource=dst;
yourGridView.Databind(); 
```

IE

```
protected void Button2_Click(object sender, EventArgs e)
    {
        SqlConnection connection = new SqlConnection("Data Source=RGUNASEL-   DESK\\SQLEXPRESS;Initial Catalog=eLogbook;User ID=sa;Password=1234");
        connection.Open();
        SqlCommand cmd = new SqlCommand("eform2", connection);
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.Add(new SqlParameter("@lot_num", SqlDbType.VarChar, 50)).Value = TextBox8.Text;
        cmd.Parameters.Add(new SqlParameter("@location", SqlDbType.VarChar, 50)).Value = TextBox9.Text;
        cmd.Parameters.Add(new SqlParameter("@total_in", SqlDbType.VarChar)).Value = TextBox10.Text;
        cmd.Parameters.Add(new SqlParameter("@first_test", SqlDbType.VarChar, 50)).Value = TextBox11.Text;
        cmd.Parameters.Add(new SqlParameter("@second_test", SqlDbType.VarChar)).Value = TextBox12.Text;
        cmd.Parameters.Add(new SqlParameter("@third_test", SqlDbType.VarChar, 50)).Value = TextBox13.Text;
        cmd.Parameters.Add(new SqlParameter("@total_out", SqlDbType.VarChar, 50)).Value = TextBox14.Text;
        cmd.Parameters.Add(new SqlParameter("@lot_status", SqlDbType.VarChar, 50)).Value = TextBox17.Text;
        cmd.Parameters.Add(new SqlParameter("@remark", SqlDbType.VarChar, 50)).Value = TextBox16.Text;

        cmd.ExecuteNonQuery();
        //Response.Write("Submitted!");

        //Code to bind gridview
        Dataset dst=yourFunctionToGetRequiredTableRows();
        yourGridView.DataSource=dst;
        yourGridView.Databind();

    } 
```

编辑：

```
public Dataset yourFunctionToGetRequiredTableRows()
{
 Dataset dst=new Dataset();
 //"your SQL SELECT statement here".
 return dst;
} 
```

# php - 在php中对循环项进行分组

> ID：14273906
> 
> 赞同：0
> 
> 时间：2013-01-11T07:54:11.123
> 
> 标签：php, loops

我试图将每个 5 个循环项目分组在 a 中`<li></li>`，然后将每个`li`项目进一步分成两组，以便每个项目的第一个项目`li`在一个组中，而其他 4 个在另一个组中。

使用以下代码，我可以将循环的每 5 个项目包装在一个 li 中，但我无法将每个 li 项目分成 2 组。由于循环中有超过 10 个项目，这就是为什么我不能硬编码的值`$i`来打印 div。

```
$i = 1;
while ($i < 10){
    echo ($i % 5 === 0) ? "<li>" : null;
        $i++;
        echo item $i;
    echo ($i % 5 === 0) ? "</li>" : null;   
}
echo ($i % 5 !== 0) ? "</li>" : null; 
```

这是所需的输出：

```
<li>
    <div class="left">
        Item 1
    </div>
    <div class="right">
        Item 2
        Item 3
        Item 4
        Item 5
    </div>
</li>

<li>
    <div class="left">
        Item 6
    </div>
    <div class="right">
        Item 7
        Item 8
        Item 9
        Item 10
    </div>
</li> 
```

**演示：** [http ://codepad.org/OztLPai8](http://codepad.org/OztLPai8)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:31:29.997

工作示例：[http ://codepad.org/uHYHl6MD](http://codepad.org/uHYHl6MD)

```
<?php
// Initial group size
$groupSize = 5;
$total = 22;

// To keep track of the group
$groupCounter = $groupSize;

$isFirst = true;
$i = 1;

while($i < $total){
    echo "<li>\n";
    // Left div
    if($isFirst){
        echo "\t<div class='left'>\n";
        echo "\tItem $i\n";
        $isFirst = false;
        $i++;
        echo "\t</div>\n";
    }

    // Right div
    echo "\t<div class='right'>\n";
    while($i <= $groupCounter && $i <= $total){
        echo "\tItem $i\n";
        $i++;
    }
    echo "\t</div>\n";

    // Get to the next group
    $groupCounter += $groupSize;

    // Start with the first, first.
    $isFirst = true;

    echo "</li>\n";
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T08:07:34.010

```
$items = array(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);

$lis = array_chunk($items, 5);

foreach($lis as $li)
{
    echo '<li>';

    echo '<div class="left">' . $li[0] . '</div>';

    echo '<div class="right">';

    foreach($li as $key => $value)
    {
        // Skip first item
        if($key == 0)
        {
            continue;
        }

        echo $value . '<br />';
    }

    echo '</div>';

    echo '</li>';
} 
```

# html - iOS：UIWebView文本句柄改变事件

> ID：14273907
> 
> 赞同：1
> 
> 时间：2013-01-11T07:54:18.650
> 
> 标签：html, ios, objective-c, webkit

我有一个`UIWebView`填写表格。`UITextFieldDelegate`我想以与 for or相同的方式捕获输入事件`UITextViewDelegate`。

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:22:30.543

这是不可能的，因为 uiwebview 表单上的元素（文本字段和其他）不是可可触摸对象。因此，他们可以通过其响应者链将事件传输到您的应用程序。

你可以使用javascript进行验证，但这不是应用程序的业务。这应该在服务器端完成，它为你提供了这个表单。

# mysql - 查询按范围限制对记录进行分组

> ID：14273910
> 
> 赞同：0
> 
> 时间：2013-01-11T07:54:27.530
> 
> 标签：mysql, sql, select, group-by

我有一个如下表。

```
CREATE TABLE budgets(limit_id INT NOT NULL PRIMARY KEY AUTO_INCREMENT, 
                     upper_limit INT, 
                     lower_limit INT); 
```

表中数值如下

```
INSERT INTO budgets(lower_limit, upper_limit)
             VALUES(0, 15000),
                   (10200, 15300),
                   (15200, 17002),
                   (30000, 45050),
                   (17002, 30000),
                   (27002, 30500),
                   (30500, 35200),
                   (45200, 55000),
                   (55000, 65020),
                   (25000, 30000),
                   (40000, 60000),
                   (65000, 75000); 
```

我使用如下选择查询来获取值

```
SELECT 'Betw 0 to 25000', COUNT(limit_id)
  FROM budgets
 WHERE lower_limit>=0  AND  upper_limit<=25000
 UNION ALL
SELECT 'Betw 25000 to 50000', COUNT(limit_id)
  FROM budgets
 WHERE lower_limit>=25000  AND  upper_limit<=50000
 UNION ALL
 SELECT 'Betw 50000 to 75000',COUNT(limit_id)
   FROM budgets
  WHERE lower_limit >=50000  AND  upper_limit<=75000 
```

我希望所有行都在上述限制范围内负责。

我在表中有 12 条记录。

我希望所有记录都属于任何一个范围类别。但是通过运行查询，在某些条件下我只得到 9 行。

输出是

```
Between 0 to 25000          3
Between 25000 to 50000      4
Between 50000 to 75000      2 
```

其余 3 条记录不属于任何范围。

帮助我知道我是否在数据库设计中犯了错误，或者我为上述要求编写了错误的查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:06:04.660

这将起作用

```
 SELECT 'Betw 0 to 25000', COUNT(limit_id)
  FROM budgets
 WHERE upper_limit>=0  and upper_limit<=25000  
 UNION ALL
SELECT 'Betw 25000 to 50000', COUNT(limit_id)
  FROM budgets
 WHERE upper_limit>=25000  and upper_limit<=50000   
 UNION ALL
SELECT 'Betw 50000 to 75000',COUNT(limit_id)
  FROM budgets
 WHERE upper_limit>=50000  and upper_limit<=75000 
```

**输出将是**

```
Between 0 to 25000          3
Between 25000 to 50000      5
Between 50000 to 75000      4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:50:02.003

尝试这个：

**编辑**

```
SELECT IFNULL(CONCAT('Between ', lowerLimit, ' to ',upperLimit), 'Not in Range') bType, COUNT(limit_id) budgetCount 
FROM budgets b 
LEFT JOIN (SELECT 0 lowerLimit, 25000 upperLimit 
           UNION 
           SELECT 25000 lowerLimit, 50000 upperLimit 
           UNION 
           SELECT 50000 lowerLimit, 75000 upperLimit
          ) A ON b.upper_limit >= A.lowerLimit AND b.lower_limit <= A.upperLimit
GROUP BY bType;

SELECT CONCAT('Between ', lowerLimit, ' to ',upperLimit) bType, COUNT(limit_id) budgetCount 
FROM budgets b 
INNER JOIN (SELECT 0 lowerLimit, 25000 upperLimit 
            UNION 
            SELECT 25000 lowerLimit, 50000 upperLimit 
            UNION 
            SELECT 50000 lowerLimit, 75000 upperLimit
          ) A ON b.upper_limit >= A.lowerLimit  AND b.lower_limit <= A.upperLimit
GROUP BY bType; 
```

检查此链接[**SQL FIDDLE DEMO**](http://www.sqlfiddle.com/#!2/2861c/9)

**输出**

```
|                  BTYPE | BUDGETCOUNT |
----------------------------------------
|     Between 0 to 25000 |           3 |
| Between 25000 to 50000 |           4 |
| Between 50000 to 75000 |           2 | 
```

# android - 如何从不同的可绘制文件夹访问图像

> ID：14273912
> 
> 赞同：1
> 
> 时间：2013-01-11T07:54:29.173
> 
> 标签：android, android-layout, android-image, android-drawable

我创建了一个在移动设备上运行的应用程序。但现在我希望它也能在平板电脑上运行。我在“Drawable-mdpi”文件夹中定义了最多的图像，其中一些为 xhdpi 屏幕调整了大小并将它们存储在“Drawable-xhdpi”文件夹中。当我尝试在平板电脑上运行该应用程序时，无法访问 xhdpi 文件夹中的图像。谁能给我一些解决问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:52:02.573

您正在为“设备碎片”而苦苦挣扎——这是 Android 开发中的一个主要困难。

您应该知道，屏幕尺寸和密度是相互独立的。大屏幕可以有低密度，小屏幕可以有巨大的密度。设备也可以具有不同的屏幕尺寸，但仍然具有相同的密度。

在您的情况下，您有一台中等密度的平板电脑和一部中等密度的手机。这就是为什么无论您使用平板电脑还是手机，Android 都会选择 mdpi 文件夹的原因。

为了解决这个问题，你必须让你的平板电脑有机会从不同的文件夹中挑选它的图像——但它仍然应该是 mdpi。为此，您**添加了一个名为 "drawable-xlarge-mdpi" 的新可绘制文件夹**。将平板电脑的图像放入新文件夹，并将手机的图像保存在“drawable-mdpi”中。

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# javascript - JWPlayer 帧数和帧数

> ID：14273913
> 
> 赞同：0
> 
> 时间：2013-01-11T07:54:49.020
> 
> 标签：javascript, asp.net-mvc, jwplayer

我在 asp.net MVC 应用程序中使用 JW Player。我可以使用以下方法获取当前位置：

```
jwplayer().getPosition() 
```

然而，这不是帧号，关于如何获得帧号的任何建议；我需要这个逐帧播放。提前致谢。

# java - Java Quartz-Scheduler 跨时区

> ID：14273917
> 
> 赞同：11
> 
> 时间：2013-01-11T07:55:24.590
> 
> 标签：java, timezone, scheduled-tasks, quartz-scheduler

我的服务器在欧洲/罗马时区运行-这是服务器上的默认 tz-，我需要根据用户的时区安排作业，因此，如果居住在太平洋/檀香山时区的用户安排一个 CronTrigger 触发每个在他所在地区的下午 22:00，我找到了这个解决方案：

```
CronTrigger trigger = newTrigger()
  .withIdentity("name", "group")
  .withSchedule(
    cronSchedule("0 0 22 ? * *").inTimeZone(TimeZone.getTimeZone("Pacific/Honolulu"))
  )
  .startNow()
  .build(); 
```

**在我的服务器上**，这项工作**从第二天“我的”上午 09:00 开始**。

[除了保持更新时区（即时区更新工具](http://www.oracle.com/technetwork/java/javase/tzupdater-readme-136440.html)）这一事实之外，还有一些特殊问题需要考虑？

如果我想为上一份工作定义 .startAt() 和 .endAt() ，这种日期可以吗？使用此过程可能的夏令时是安全的吗？

```
Calendar calTZStarts = new GregorianCalendar(TimeZone.getTimeZone("Pacific/Honolulu"));
calTZStarts.set(2013, Calendar.JANUARY, 10);

Calendar calTZEnds = new GregorianCalendar(TimeZone.getTimeZone("Pacific/Honolulu"));
calTZEnds.set(2013, Calendar.JANUARY, 30);

Calendar calStarts = Calendar.getInstance();
calStarts.set(Calendar.YEAR, calTZStarts.get(Calendar.YEAR));
calStarts.set(Calendar.MONTH, calTZStarts.get(Calendar.MONTH));
calStarts.set(Calendar.DAY_OF_MONTH, calTZStarts.get(Calendar.DAY_OF_MONTH));
calStarts.set(Calendar.HOUR_OF_DAY, calTZStarts.get(Calendar.HOUR_OF_DAY));
calStarts.set(Calendar.MINUTE, calTZStarts.get(Calendar.MINUTE));
calStarts.set(Calendar.SECOND, calTZStarts.get(Calendar.SECOND));
calStarts.set(Calendar.MILLISECOND, calTZStarts.get(Calendar.MILLISECOND));

Calendar calEnds = Calendar.getInstance();
calEnds.set(Calendar.YEAR, calTZEnds.get(Calendar.YEAR));
calEnds.set(Calendar.MONTH, calTZEnds.get(Calendar.MONTH));
calEnds.set(Calendar.DAY_OF_MONTH, calTZEnds.get(Calendar.DAY_OF_MONTH));
calEnds.set(Calendar.HOUR_OF_DAY, calTZEnds.get(Calendar.HOUR_OF_DAY));
calEnds.set(Calendar.MINUTE, calTZEnds.get(Calendar.MINUTE));
calEnds.set(Calendar.SECOND, calTZEnds.get(Calendar.SECOND));
calEnds.set(Calendar.MILLISECOND, calTZEnds.get(Calendar.MILLISECOND));

CronTrigger trigger = newTrigger()
  .withIdentity("name", "group")
  .withSchedule(
    cronSchedule("0 0 22 ? * *").inTimeZone(TimeZone.getTimeZone("Pacific/Honolulu"))
  )
  .startAt(calStarts.getTime())
  .endAt(calEnds.getTime())
  .build(); 
```

或者我必须简单地设置开始和结束使用：

```
Calendar calTZStarts = new GregorianCalendar();
calTZStarts.set(2013, Calendar.JANUARY, 10, 0, 0, 0);

Calendar calTZEnds = new GregorianCalendar();
calTZEnds.set(2013, Calendar.JANUARY, 30, 0, 0, 0);

CronTrigger trigger = newTrigger()
  .withIdentity("name", "group")
  .withSchedule(
    cronSchedule("0 0 22 ? * *").inTimeZone(TimeZone.getTimeZone("Pacific/Honolulu"))
  )
  .startAt(calTZStarts.getTime())
  .endAt(calTZEnds.getTime())
  .build(); 
```

那么工作在“太平洋/檀香山”定义的日子里正确开始/结束？

提前感谢您的每一个建议

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-16T08:22:20.027

我想我找到了解决方案，经过测试，它可以工作，直到证明不是这样；）

恢复 我的服务器运行在特定时区（即欧洲/罗马）

如果 Pacific/Honolulu TZ 上的用户想要安排从 2013 年 1 月 27 日星期日下午 3:00 开始到 2013 年 1 月 31 日星期四晚上 9:00 结束的作业，该作业从下午 2:00 到每天每五分钟触发一次10:55PM (0 0/5 14-22 * * ?) 正确的方法如下：

*   在 CronScheduleBuilder 的 inTimeZone 方法中设置用户时区
*   通过从太平洋/檀香山转换为欧洲/罗马来适应服务器时间 startAt 和 endAt 日期

示例代码：

```
// Begin User Input
String userDefinedTZ = "Pacific/Honolulu"; // +11

int userStartYear = 2013;
int userStartMonth = Calendar.JANUARY;
int UserStartDayOfMonth = 27;
int userStartHour = 15;
int userStartMinute = 0;
int userStartSecond = 0;

int userEndYear = 2013;
int userEndMonth = Calendar.JANUARY;
int UserEndDayOfMonth = 31;
int userEndHour = 21;
int userEndMinute = 0;
int userEndSecond = 0;
// End User Input

Calendar userStartDefinedTime = Calendar.getInstance();
// set start schedule by user input
userStartDefinedTime.set(userStartYear, userStartMonth, UserStartDayOfMonth, userStartHour, userStartMinute, userStartSecond);

Calendar userEndDefinedTime = Calendar.getInstance();
// set end schedule by user input
userEndDefinedTime.set(userEndYear, userEndMonth, UserEndDayOfMonth, userEndHour, userEndMinute, userEndSecond);

CronTrigger trigger = newTrigger()
  .withIdentity("name", "group")
  .withSchedule(
    // define timezone for the CronScheduleBuilder
    cronSchedule("0 0/5 14-22 * * ?").inTimeZone(TimeZone.getTimeZone("Pacific/Honolulu"))
  )
  // adapt user start date to server timezone
  .startAt( convertDateToServerTimeZone(userStartDefinedTime.getTime(), userDefinedTZ) )
  // adapt user end date to server timezone
  .endAt( convertDateToServerTimeZone(userEndDefinedTime.getTime(), userDefinedTZ) )
  .build(); 
```

基于 tz 转换日期的实用程序：

```
public Calendar convertDateToServerTimeZone(Date dateTime, String timeZone) {
    Calendar userDefinedTime = Calendar.getInstance();
    userDefinedTime.setTime(dateTime);
    if(!TimeZone.getDefault().getID().equalsIgnoreCase(timeZone)) {
    System.out.println        ("original defined time: " + userDefinedTime.getTime().toString() + " on tz:" + timeZone);
    Calendar quartzStartDate = new GregorianCalendar(TimeZone.getTimeZone(timeZone));
    quartzStartDate.set(Calendar.YEAR, userDefinedTime.get(Calendar.YEAR));
    quartzStartDate.set(Calendar.MONTH, userDefinedTime.get(Calendar.MONTH));
    quartzStartDate.set(Calendar.DAY_OF_MONTH, userDefinedTime.get(Calendar.DAY_OF_MONTH));
    quartzStartDate.set(Calendar.HOUR_OF_DAY, userDefinedTime.get(Calendar.HOUR_OF_DAY));
    quartzStartDate.set(Calendar.MINUTE, userDefinedTime.get(Calendar.MINUTE));
    quartzStartDate.set(Calendar.SECOND, userDefinedTime.get(Calendar.SECOND));
    quartzStartDate.set(Calendar.MILLISECOND, userDefinedTime.get(Calendar.MILLISECOND));
    System.out.println("adapted time for " + TimeZone.getDefault().getID() + ": " + quartzStartDate.getTime().toString());
    return quartzStartDate;
    } else {
    return userDefinedTime;
    }
} 
```

### == 开始更新 2012-01-24 ==

[Quartz Based Utility 使用DateBuilder](http://quartz-scheduler.org/api/2.1.0/org/quartz/DateBuilder.html)基于 tz 转换日期：

```
public Calendar convertDateToServerTimeZone(Date dateTime, String timeZone) {
    Calendar userDefinedTime = Calendar.getInstance();
    userDefinedTime.setTime(dateTime);
    if(!TimeZone.getDefault().getID().equalsIgnoreCase(timeZone)) {
      System.out.println("original defined time: " + userDefinedTime.getTime().toString() + " on tz:" + timeZone);

      Date translatedTime = DateBuilder.translateTime(userDefinedTime.getTime(), TimeZone.getDefault(), TimeZone.getTimeZone(timeZone));

      Calendar quartzStartDate = new GregorianCalendar();
      quartzStartDate.setTime(translatedTime);
      System.out.println("adapted time for " + TimeZone.getDefault().getID() + ": " + quartzStartDate.getTime().toString());
      return quartzStartDate;
    } else {
      return userDefinedTime;
    }
} 
```

### == 2012-01-24 更新结束 ==

所以**在我的 Europe/Rome Quartz 服务器上，这项工作计划从 2013 年 1 月 28 日星期一 02:00:00 CET 到 2013 年 2 月 1 日星期五 08:00:00 CET 开始，每天从上午 01:00 到 8 点每五分钟触发一次：下午 55 点**

在为开始和结束时间构建日期时，还要在实例化日期之前指定时区（在 java.util.Calendar 或日期格式字符串或 org.quartz.DateBuilder 上）。然后，quartz 将日期存储为自 1970 年 1 月 1 日以来在该特定时区的 UTC 中的毫秒数 - 因此，当服务器的时区更改时，触发器不会受到影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T13:52:38.090

Date 不携带任何 TZ 数据，而 Daylight Savings Time 实际上是它自己的 TZ（EST 是 Easter Standard Time，EDT 是 Eastern Daylight Savings Time）。唯一可能成为问题的是某些地方，例如亚利桑那州凤凰城，不承认 DST。任何时候您需要保留 TZ 数据，日历都是您的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-24T12:55:28.390

您可以`ZonedDateTime`从 java8/java8+ 使用，这样您就不需要将给定时间显式转换为服务器特定时间：

```
protected static Trigger createCronTrigger(String triggerName, ZonedDateTime startTime, String cronExpression, int misFireInstruction, ZoneId timeZone) {
    Trigger trigger = TriggerBuilder.newTrigger()
        .withIdentity(triggerName)
        .startAt(Date.from(startTime.toInstant())).withSchedule(CronScheduleBuilder.cronSchedule(cronExpression).inTimeZone(TimeZone.getTimeZone(timeZone)).withMisfireHandlingInstructionDoNothing())
        .build();
    return trigger;
} 
```

[您可以从此处](https://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html)阅读有关 ZonedDateTime的更多信息

# java - 如何设置优先级鼠标侦听器

> ID：14273923
> 
> 赞同：1
> 
> 时间：2013-01-11T07:55:35.217
> 
> 标签：java, swing, drag-and-drop, mouseevent, jlist

我有一个带有列表和按钮的面板。`MouseAdapter`用 设置的列表`mouseClick()`。`MouseAdapter`我用`mousePressed()`和`mouseReleased()`和加入了`MouseMotionAdapter`面板`mouseDragged`。

仅当您单击面板时，拖放才有效。

即使我单击了列表，如何使拖动工作？

简单的例子：

```
public class DragTest extends JFrame{
private boolean drag;
private Point btnCoord;
private Point startPoint;

public DragTest(){
    setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    setSize(500,500);
    setLayout(null);
    final JPanel panel = new JPanel();
    final JButton button = new JButton();
    button.setText("Button");
    button.setSize(30,60);
    button.setLocation(50, 50);
    panel.setLayout(null);
    setContentPane(panel);
    panel.addMouseMotionListener(new MouseMotionAdapter() {
        @Override
        public void mouseDragged(MouseEvent e) {
            if (drag){
                panel.setLocation(btnCoord.x-(startPoint.x-e.getX()),btnCoord.y-(startPoint.y-e.getY()));
            }
        }
    });
    panel.addMouseListener(new MouseAdapter() {
        @Override
        public void mousePressed(MouseEvent e) {
            drag = true;
            startPoint = e.getPoint();
            btnCoord = panel.getLocation();
        }

        @Override
        public void mouseReleased(MouseEvent e) {
            drag = false;
        }
    });
    getContentPane().add(button);
}

public static void main(String[] args) {
    JFrame frame = new DragTest();
    frame.setVisible(true);
}
} 
```

如果拖动面板，一切正常，如果开始拖动按钮，则按钮拦截事件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T10:46:10.380

上面的代码有很多错误...

*   不要使用`null`/ `Absolute` `LayoutManager`。[看看在容器内布局组件](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)。
*   不要调用`setSize`组件并且`JFrame`（如果实现了正确的布局管理器，您可以简单地添加组件并调用`pack()`.`JFrame`
*   在 EDT 上创建和操作 Swing 组件。阅读更多关于[Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)。
*   在从可见容器中添加/删除组件后，您应该在容器上调用`revalidate()`和。`repaint()`

我一直在开发自己的小`ComponentDrag`API，它允许我们将 Swing 组件拖到一个`JComponent`或多个`JComponent`s 上。虽然它绝不是没有错误的（尤其是今天刚刚完成的多个组件部分，所以你永远不会知道）

您将创建`JButton`并添加到`JPanel`：

```
 JButton button = new JButton("Text");

    JPanel panel1 = new JPanel() {
        @Override
        public Dimension getPreferredSize() {
            return new Dimension(300, 300);
        }
    };
    panel1.add(button); 
```

通过传递容器的参数来创建`ComponentDrag`类的实例，即`JFrame`/`JDialog`或`JWindow`注册可拖动组件并调用`setName("Droppable")`您`JPanel`以允许拖放正确发生，尤其是跨多个 JComponents 等，您只会为您的`JPanel`s 等执行此操作也希望能够删除 Swing 组件：

```
 JFrame frame=..;//has access to setGlassPane same applies for JDialog and JWindow
    frame.add(panel1);

    ComponentDrag cd=new ComponentDrag(frame);
    cd.registerComponent(button);
    panel1.setName("Droppable");//needed for the dragging and dropping to work correctly especailly over multiple components 
```

和你的好去:)。

以下是用于分析目的的 2 个完整示例：

1) 显示移动s 并相应地使用并覆盖其方法`JButton`重新定位的逻辑：`ComponentDrag``componentDropped`

拖动前：

![在此处输入图像描述](../Images/58d12cad3c94bc2dd490b581c9ce3b33.png)

4拖到1位置后：

![在此处输入图像描述](../Images/163ad78be5a75401a3ca8e4ecd436f40.png)

```
import java.awt.Component;
import java.awt.Container;
import java.awt.Cursor;
import java.awt.Graphics;
import java.awt.GridLayout;
import java.awt.Point;
import java.awt.event.ActionEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.image.BufferedImage;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Map;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

public class DragButtonsTest {

    ArrayList<JButton> buttons = new ArrayList<>();

    public DragButtonsTest() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        final JPanel panel = new JPanel(new GridLayout(2, 2));

        ComponentDrag cd = new ComponentDrag(frame) {
            @Override
            protected void componentDropped(MouseEvent me) {
                HashMap<Integer, JButton> collisions = new HashMap<>();
                JButton draggedButton = (JButton) me.getSource();

                for (JButton btn : buttons) {//iterate through all buttons and get the number of collsions of each
                    if (btn != draggedButton) {//dont chck button we were dragging
                        int col = checkPerPixelCollision(draggedButton, btn);
                        System.out.println("Button " + btn.getText());
                        System.out.println(col);
                        collisions.put(col, btn);
                    }
                }

                //lets get the button which had most collisions
                int maxCollisions = 0;
                JButton intersectingButton = null;
                for (Map.Entry<Integer, JButton> entry : collisions.entrySet()) {
                    Integer collisionCount = entry.getKey();
                    JButton button = entry.getValue();
                    if (collisionCount > maxCollisions) {
                        maxCollisions = collisionCount;
                        intersectingButton = button;
                    }
                }

                boolean reLayout = false;

                if (maxCollisions > 0) {//check if there was any
                    System.out.println("Button " + draggedButton.getText() + " is intersecting more of Button " + intersectingButton.getText());
                    System.out.println("Collisions: " + maxCollisions);
                    reLayout = true;
                } else {
                    System.out.println("No change made");
                    reLayout = false;
                }

                ArrayList<JButton> tmpButtons = (ArrayList<JButton>) buttons.clone();//create clone of buttons

                if (reLayout) {//a button as moved and panel needs to be layed out
                    buttons.clear();//clear old buttons

                    for (JButton b : tmpButtons) {//re-order jbuttons
                        if (b == intersectingButton) {
                            buttons.add(draggedButton);
                        } else if (b == draggedButton) {
                            buttons.add(intersectingButton);
                        } else {
                            buttons.add(b);
                        }
                    }
                    panel.removeAll();//remove all buttons
                    for (JButton btn : buttons) {//iterate through all buttons and get the number of collsions of each
                        panel.add(btn);//re-add buttons according to arraylist
                    }
                    panel.revalidate();
                    panel.repaint();
                }
                super.componentDropped(me);

            }
        };

        for (int i = 0; i < 4; i++) {
            JButton b = new JButton(String.valueOf(i + 1));
            panel.add(b);
            buttons.add(b);
            cd.registerComponent(b);
        }

        frame.add(panel);

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new DragButtonsTest();
            }
        });
    }

    public HashSet<String> getMask(JButton e) {
        HashSet<String> mask = new HashSet<>();
        int pixel, a;
        BufferedImage bi = componentToImage(e); //gets the current image being shown

        for (int i = 0; i < bi.getWidth(); i++) { // for every (x,y) component in the given box, 
            for (int j = 0; j < bi.getHeight(); j++) {
                pixel = bi.getRGB(i, j); // get the RGB value of the pixel
                a = (pixel >> 24) & 0xff;
                if (a != 0) {  // if the alpha is not 0, it must be something other than transparent
                    mask.add((e.getX() + i) + "," + (e.getY() - j)); // add the absolute x and absolute y coordinates to our set
                }
            }
        }
        return mask;  //return our set
    }

    public static BufferedImage componentToImage(Component component) {
        BufferedImage img = new BufferedImage(component.getWidth(), component.getHeight(), BufferedImage.TRANSLUCENT);
        Graphics g = img.getGraphics();
        component.paintAll(g);
        return img;
    }

    // Returns true if there is a collision between object a and object b   
    public int checkPerPixelCollision(JButton b, JButton b2) {
        // This method detects to see if the images overlap at all. If they do, collision is possible
        int ax1 = (int) b2.getX();
        int ay1 = (int) b2.getY();

        int ax2 = ax1 + (int) b2.getWidth();
        int ay2 = ay1 + (int) b2.getHeight();

        int bx1 = (int) b.getX();
        int by1 = (int) b.getY();

        int bx2 = bx1 + (int) b.getWidth();

        int by2 = by1 + (int) b.getHeight();

        if (by2 < ay1 || ay2 < by1 || bx2 < ax1 || ax2 < bx1) {
            return 0; // Collision is impossible.
        } else { // Collision is possible.
            // get the masks for both images
            HashSet<String> maskPlayer1 = getMask(b2);
            HashSet<String> maskPlayer2 = getMask(b);
            maskPlayer1.retainAll(maskPlayer2);  // Check to see if any pixels in maskPlayer2 are the same as those in maskPlayer1
            if (maskPlayer1.size() > 0) {  // if so, than there exists at least one pixel that is the same in both images, thus
                return maskPlayer1.size();
            }
        }
        return 0;
    }
}

class ComponentDrag {

    private MouseAdapter ma;
    private ArrayList<JComponent> components = new ArrayList<>();
    private int startingX, startingY;
    private boolean autoLayout = true;
    private final JFrame container;
    private JPanel glassPane;
    boolean firstTime = true;
    private JComponent lastClickedContainer;

    public ComponentDrag(final JFrame container) {
        this.container = container;
        glassPane = new JPanel();
        glassPane.setOpaque(false);
        glassPane.setLayout(null);
        this.container.setGlassPane(glassPane);

        new Timer(10, new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                if (container.isVisible()) {
                    glassPane.setVisible(true);
                    ((Timer) ae.getSource()).stop();
                }
            }
        }).start();

        ma = new MouseAdapter() {
            @Override
            public void mousePressed(MouseEvent me) {
                super.mousePressed(me);
                componentPressed(me);
            }

            @Override
            public void mouseReleased(MouseEvent me) {
                super.mouseReleased(me);
                componentDropped(me);
            }

            @Override
            public void mouseDragged(MouseEvent me) {
                super.mouseDragged(me);
                componentDragged(me);
            }
        };
    }

    public JComponent findDroppableUnderGlassPane(Point p, Container container, Component source) {
        JComponent c = null;
        Component[] comps = container.getComponents();
        for (Component com : comps) {
            if (com.getName() != null) {
                if (com.getName().equals("Droppable") && com instanceof JComponent) {
                    if (com.contains(SwingUtilities.convertPoint(source, p, com))) {
                        return (JComponent) com;
                    }
                } else if (com instanceof Container) {
                    findDroppableUnderGlassPane(p, (Container) com, source);
                }
            }
        }
        return c;
    }

    public boolean isAutoLayout() {
        return autoLayout;
    }

    public void setAutoLayout(boolean autoLayout) {
        this.autoLayout = autoLayout;
    }

    protected void componentDropped(MouseEvent me) {
        firstTime = true;
        Component droppedComponent = (Component) me.getSource();
        droppedComponent.setCursor(null);

        JComponent jc = findDroppableUnderGlassPane(me.getPoint(), container.getContentPane(), (Component) me.getSource());

        if (jc != null) {
            glassPane.removeAll();
            glassPane.revalidate();
            glassPane.repaint();

            jc.add(droppedComponent);
            System.out.println("Removed from glasspane and added to: " + jc);

            if (autoLayout) {
                if (lastClickedContainer != null) {
                    lastClickedContainer.revalidate();
                    lastClickedContainer.repaint();
                }
                droppedComponent.revalidate();
                droppedComponent.repaint();
                jc.revalidate();
                jc.repaint();
            }

        } else {
            glassPane.removeAll();
            glassPane.revalidate();
            glassPane.repaint();
            if (lastClickedContainer != null) {
                lastClickedContainer.add(droppedComponent);
                lastClickedContainer.revalidate();
                lastClickedContainer.repaint();
            }
        }
    }

    protected void componentPressed(MouseEvent me) {
        JComponent jc = findDroppableUnderGlassPane(me.getPoint(), container.getContentPane(), (Component) me.getSource());

        if (jc != null && jc.getName().equals("Droppable")) {
            lastClickedContainer = jc;
            System.out.println("Pressed: " + lastClickedContainer);
        }

        boolean clickedRegisteredComponent = false;

        Component clickedComponent = (Component) me.getSource();

        for (Component component : ComponentDrag.this.components) {
            if (component.equals(clickedComponent)) {
                clickedRegisteredComponent = true;
                break;
            }
        }

        if (clickedRegisteredComponent) {
            startingX = me.getX();
            startingY = me.getY();
            clickedComponent.setCursor(new Cursor(Cursor.MOVE_CURSOR));
        }
    }

    protected void componentDragged(MouseEvent me) {
        Component draggedComponent = (Component) me.getSource();

        if (firstTime && lastClickedContainer != null) {
            firstTime = false;
            lastClickedContainer.remove(draggedComponent);
            lastClickedContainer.revalidate();
            lastClickedContainer.repaint();
            glassPane.add(draggedComponent);
            glassPane.revalidate();
            glassPane.repaint();
            System.out.println("Removed from: " + lastClickedContainer + " \nAnd added to glasspane for dragging");
        }

        //MouseEvent will refire on each drag with the position being relative to the firing Component
        draggedComponent.setLocation((me.getX() - startingX) + draggedComponent.getLocation().x, (me.getY() - startingY) + draggedComponent.getLocation().y);
    }

    void registerComponent(JComponent draggableComp) {
        draggableComp.addMouseListener(ma);
        draggableComp.addMouseMotionListener(ma);
        components.add(draggableComp);
    }

    void deregisterComponent(JComponent draggableComp) {
        draggableComp.removeMouseListener(ma);
        draggableComp.removeMouseMotionListener(ma);
        components.remove(draggableComp);
    }
} 
```

2) 简单展示如何`JLabel`在s 上拖动 2 `JPanel`s

在*拖动我*之前拖动标签：

![在此处输入图像描述](../Images/4c7ec9f22cb8cef5c311d7fbfa91f965.png)

标签拖动后：

![在此处输入图像描述](../Images/c15e86a81a918ef2446aa461b9942181.png)

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.Container;
import java.awt.Cursor;
import java.awt.Dimension;
import java.awt.Point;
import java.awt.event.ActionEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.ArrayList;
import javax.swing.AbstractAction;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JSeparator;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

/**
 *
 * @author David
 */
public class DragOverMultipleComponentsTest {

    public DragOverMultipleComponentsTest() {
        createAndShowUI();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new DragOverMultipleComponentsTest();
            }
        });
    }

    private void createAndShowUI() {
        final JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JLabel draggableLabel = new JLabel("<- Drag me");
        JLabel draggableLabel2 = new JLabel("<- Drag me too");

        JLabel labelPanel1 = new JLabel("Drag 'em here");
        JPanel panel1 = new JPanel() {
            @Override
            public Dimension getPreferredSize() {
                return new Dimension(300, 300);
            }
        };
        panel1.add(labelPanel1);
        panel1.setName("Droppable");

        JLabel labelPanel2 = new JLabel("Drag 'em here");
        JPanel panel2 = new JPanel();
        panel2.add(labelPanel2);
        panel2.add(draggableLabel);
        panel2.add(draggableLabel2);
        panel2.setName("Droppable");

        JSeparator js = new JSeparator(JSeparator.VERTICAL);

        ComponentDrag cd = new ComponentDrag(frame);

        cd.registerComponent(draggableLabel);
        cd.registerComponent(draggableLabel2);

        frame.add(panel1, BorderLayout.WEST);
        frame.add(js);
        frame.add(panel2, BorderLayout.EAST);

        frame.pack();
        frame.setVisible(true);
    }
}
class ComponentDrag {

    private MouseAdapter ma;
    private ArrayList<JComponent> components = new ArrayList<>();
    private int startingX, startingY;
    private boolean autoLayout = true;
    private final JFrame container;
    private JPanel glassPane;
    boolean firstTime = true;
    private JComponent lastClickedContainer;

    public ComponentDrag(final JFrame container) {
        this.container = container;
        glassPane = new JPanel();
        glassPane.setOpaque(false);
        glassPane.setLayout(null);
        this.container.setGlassPane(glassPane);

        new Timer(10, new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                if (container.isVisible()) {
                    glassPane.setVisible(true);
                    ((Timer) ae.getSource()).stop();
                }
            }
        }).start();

        ma = new MouseAdapter() {
            @Override
            public void mousePressed(MouseEvent me) {
                super.mousePressed(me);
                componentPressed(me);
            }

            @Override
            public void mouseReleased(MouseEvent me) {
                super.mouseReleased(me);
                componentDropped(me);
            }

            @Override
            public void mouseDragged(MouseEvent me) {
                super.mouseDragged(me);
                componentDragged(me);
            }
        };
    }

    public JComponent findDroppableUnderGlassPane(Point p, Container container, Component source) {
        JComponent c = null;
        Component[] comps = container.getComponents();
        for (Component com : comps) {
            if (com.getName() != null) {
                if (com.getName().equals("Droppable") && com instanceof JComponent) {
                    if (com.contains(SwingUtilities.convertPoint(source, p, com))) {
                        return (JComponent) com;
                    }
                } else if (com instanceof Container) {
                    findDroppableUnderGlassPane(p, (Container) com, source);
                }
            }
        }
        return c;
    }

    public boolean isAutoLayout() {
        return autoLayout;
    }

    public void setAutoLayout(boolean autoLayout) {
        this.autoLayout = autoLayout;
    }

    protected void componentDropped(MouseEvent me) {
        firstTime = true;
        Component droppedComponent = (Component) me.getSource();
        droppedComponent.setCursor(null);

        JComponent jc = findDroppableUnderGlassPane(me.getPoint(), container.getContentPane(), (Component) me.getSource());

        if (jc != null) {
            glassPane.removeAll();
            glassPane.revalidate();
            glassPane.repaint();

            jc.add(droppedComponent);
            System.out.println("Removed from glasspane and added to: " + jc);

            if (autoLayout) {
                if (lastClickedContainer != null) {
                    lastClickedContainer.revalidate();
                    lastClickedContainer.repaint();
                }
                droppedComponent.revalidate();
                droppedComponent.repaint();
                jc.revalidate();
                jc.repaint();
            }

        } else {
            glassPane.removeAll();
            glassPane.revalidate();
            glassPane.repaint();
            if (lastClickedContainer != null) {
                lastClickedContainer.add(droppedComponent);
                lastClickedContainer.revalidate();
                lastClickedContainer.repaint();
            }
        }
    }

    protected void componentPressed(MouseEvent me) {
        JComponent jc = findDroppableUnderGlassPane(me.getPoint(), container.getContentPane(), (Component) me.getSource());

        if (jc != null && jc.getName().equals("Droppable")) {
            lastClickedContainer = jc;
            System.out.println("Pressed: " + lastClickedContainer);
        }

        boolean clickedRegisteredComponent = false;

        Component clickedComponent = (Component) me.getSource();

        for (Component component : ComponentDrag.this.components) {
            if (component.equals(clickedComponent)) {
                clickedRegisteredComponent = true;
                break;
            }
        }

        if (clickedRegisteredComponent) {
            startingX = me.getX();
            startingY = me.getY();
            clickedComponent.setCursor(new Cursor(Cursor.MOVE_CURSOR));
        }
    }

    protected void componentDragged(MouseEvent me) {
        Component draggedComponent = (Component) me.getSource();

        if (firstTime && lastClickedContainer != null) {
            firstTime = false;
            lastClickedContainer.remove(draggedComponent);
            lastClickedContainer.revalidate();
            lastClickedContainer.repaint();
            glassPane.add(draggedComponent);
            glassPane.revalidate();
            glassPane.repaint();
            System.out.println("Removed from: " + lastClickedContainer + " \nAnd added to glasspane for dragging");
        }

        //MouseEvent will refire on each drag with the position being relative to the firing Component
        draggedComponent.setLocation((me.getX() - startingX) + draggedComponent.getLocation().x, (me.getY() - startingY) + draggedComponent.getLocation().y);
    }

    void registerComponent(JComponent draggableComp) {
        draggableComp.addMouseListener(ma);
        draggableComp.addMouseMotionListener(ma);
        components.add(draggableComp);
    }

    void deregisterComponent(JComponent draggableComp) {
        draggableComp.removeMouseListener(ma);
        draggableComp.removeMouseMotionListener(ma);
        components.remove(draggableComp);
    }
} 
```

# c# - 应用程序嵌入连接字符串时的设置和部署

> ID：14273927
> 
> 赞同：-9
> 
> 时间：2013-01-11T07:55:49.680
> 
> 标签：c#, sql-server

```
SqlConnection con = new SqlConnection("Data Source =TWPL-PC\\SQLEXPRESS;Initial Catalog=TWPLSOFTWARE;Integrated security = True");
con.Open();
SqlCommand cmd = new SqlCommand("select IG_ID ,ITEM_GROUP_NAME ,MAIN_GROUP from ITEM_GROUP where ITEM_GROUP_NAME=@ITEM_GROUP_NAME", con);
cmd.Parameters.Add(new SqlParameter("@ITEM_GROUP_NAME", omboBox2.SelectedItem.ToString()));
SqlDataReader dr = cmd.ExecuteReader(); 
```

当我的程序具有指向我自己机器上的数据库的嵌入式连接字符串时，我如何在另一台机器上安装我的程序？当安装在另一台机器上时，它需要指向它自己的本地实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:11:40.260

如果`TWPL-PC`是您机器的名称，则只需将连接字符串更改为：

```
SqlConnection con = new SqlConnection("Data Source=.\\SQLEXPRESS;Initial Catalog=TWPLSOFTWARE;Integrated security = True"); 
```

请注意，`.`而不是特定的机器名称 - 它是一个简单的快捷方式，意思是`localhost`（即当前机器）。

如果`TWPL-PC`是安装了 SQL Express 实例的服务器的名称，那么您需要确保“另一台计算机”可以看到同一台服务器。

# django - 如何在 django-userena 中重定向注销页面？

> ID：14273930
> 
> 赞同：2
> 
> 时间：2013-01-11T07:56:13.793
> 
> 标签：django, django-login

我已经`LOGOUT_URL = '/home/'`在我的设置中，`settings.py`但仍然将注销页面重定向到 userena 的默认注销页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:59:50.203

你可以使用：

```
USERENA_REDIRECT_ON_SIGNOUT = '/home/' 
```

# ios - 在iOS应用程序中按下按钮时如何显示按钮列表

> ID：14273939
> 
> 赞同：1
> 
> 时间：2013-01-11T07:57:13.057
> 
> 标签：ios, button

我不知道要搜索什么或它叫什么，因为我是全新的。请帮助我，当我按下按钮时，它会显示其他按钮。我们在很多应用程序中找到了它，但我不知道它的名字。我在下面附上了它的图片。如何在 iOS 应用程序中执行此操作。

![选项](../Images/a790a77bbb46fbb0ac47de8fe31d0e56.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:07:09.063

被称为[`UIActionSheet`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIActionSheet_Class/Reference/Reference.html)。

这是一个评估者复杂的例子：

```
 UIActionSheet *actionSheet = [[UIActionSheet alloc] init] ;
    actionSheet.title = @"Change pincode?";
    actionSheet.delegate = self;
    actionSheet.tag = kChangePincode;

    [actionSheet addButtonWithTitle:@"Chacge pincode"];
    [actionSheet addButtonWithTitle:@"Remove pin code"];

    [actionSheet addButtonWithTitle:@"cancel"];
    [actionSheet setCancelButtonIndex:(actionSheet.numberOfButtons - 1)];

    [actionSheet showInView:self.view]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:12:40.097

浏览[UIActionsheet。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIActionSheet_Class/Reference/Reference.html) 做这样的插件

// 在 .h 类中

```
@interface MyViewController : UIViewController <UIActionSheetDelegate> {

    ...

}

...

-(IBAction)showActionSheet:(id)sender; 
```

@结尾

在.m

```
-(IBAction)showActionSheet:(id)sender {
    UIActionSheet *popupQuery = [[UIActionSheet alloc] initWithTitle:@"Title" delegate:self cancelButtonTitle:@"Cancel Button" destructiveButtonTitle:@"Destructive Button" otherButtonTitles:@"Other Button 1", @"Other Button 2", nil];
    popupQuery.actionSheetStyle = UIActionSheetStyleBlackOpaque;
    [popupQuery showInView:self.view];
    [popupQuery release];
}

// Handle Delegates-------------
    -(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
        if (buttonIndex == 0) {
            self.label.text = @"Destructive Button Clicked";
        } else if (buttonIndex == 1) {
            self.label.text = @"Other Button 1 Clicked";
        } else if (buttonIndex == 2) {
            self.label.text = @"Other Button 2 Clicked";
        } else if (buttonIndex == 3) {
            self.label.text = @"Cancel Button Clicked";
        }

        /**
         * OR use the following switch statement
         * 
         */
        /*
        switch (buttonIndex) {
            case 0:
                self.label.text = @"Destructive Button Clicked";
                break;
            case 1:
                self.label.text = @"Other Button 1 Clicked";
                break;
            case 2:
                self.label.text = @"Other Button 2 Clicked";
                break;
            case 3:
                self.label.text = @"Cancel Button Clicked";
                break;
        }
        */
    } 
```

# windows-phone-7 - 在 C# 代码中设置 listItem 文本颜色

> ID：14273947
> 
> 赞同：0
> 
> 时间：2013-01-11T07:58:03.073
> 
> 标签：windows-phone-7, listbox, windows-phone-7.1, foreground

我有一个列表框，它显然是通过数据绑定填满了列表项。您可能还知道，您可以使用 listItem 模板标签指定 listItem 的外观，如下所示：

```
<ListBox.ItemTemplate>
    <TextBlock Name="lblName" Text="{Binding Name}" Foreground="black" />
</ListBox.ItemTemplate> 
```

请注意，listItems Textbloxk 上的前景是黑色的...

现在在我的 C# 代码中，我想动态地将每个 listItems Textblock Foreground 设置为我想要的任何颜色。如何引用特定的 listItems 文本块并设置它的前景？

如果需要更多信息，请询问！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:23:48.497

你真的需要在代码隐藏中做吗？

首选的解决方案是将`Foreground`属性绑定到 ViewModel 的 ForegroundColor 属性（如果您使用 MVVM）。

如果您不使用 MVVM 并且不想使用属性“污染”您的模型类`Brush`，则可以将该属性绑定`Foreground`到您的类中已有的属性（例如`Name`or `Age`）并使用 a`Converter`使其成为 a `Brush`：

```
<ListBox.ItemTemplate>
    <TextBlock Name="lblName" Text="{Binding Name}" Foreground="{Binding Age, Converter={StaticResource AgeToColorConverter}}" />
</ListBox.ItemTemplate> 
```

以及转换器的代码：

```
public class AgeToColorConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        // Your code that converts the value to a Brush
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T08:15:12.387

更好和更简单的解决方案是向您的 SolidColorBrush 类型的项目添加一个属性，表示颜色，让我们调用 id ForegroundColor 并使用绑定

```
<ListBox.ItemTemplate>
    <TextBlock Name="lblName" Text="{Binding Name}" Foreground="{Binding ForegroundColor}" />
</ListBox.ItemTemplate> 
```

# javascript - SignalR：如果没有客户端方法，则不会调用 Hub OnConnected

> ID：14273949
> 
> 赞同：17
> 
> 时间：2013-01-11T07:58:24.087
> 
> 标签：javascript, signalr, signalr-hub, signalr.client

我正在 SignalR 中编写游戏。这个想法是你连接你的笔记本电脑，它将用作“显示器”，然后你连接你的智能手机，它将用作“操纵杆”。整个设置运行良好。

现在一切正常，我决定重构代码。我意识到操纵杆和显示器之间的关系是一种方式（显示器永远不需要将信息发送回操纵杆）。因此我决定在操纵杆上不需要任何 signalR 可调用的客户端函数（例如，`gameHub.client.joyStickMethod()`在操纵杆 js.

*就在那时我发现了一些奇怪的东西*

事实证明，`public override Task OnConnected()`除非我定义一个`myHub.client.clientSideMethod()`. 这是我正在处理的示例：

```
 var gameHub = $.connection.gameHub;
        gameHub.client.connection();
        $("#joystick").joystick({
            hub: gameHub
        });

        gameHub.client.activateJoystick = function () { };
        $.connection.hub.qs = "type=joystick&gameId=" + "@Model.Id";
        $.connection.hub.start();   //this will invoke on connected 
```

你看到那个空的客户端方法了吗？这就是为什么`OnConnected`在服务器端调用的原因。如果我删除那行代码，它将不会被调用。

```
 var gameHub = $.connection.gameHub;
        gameHub.client.connection();
        $("#joystick").joystick({
            hub: gameHub 
        });

        //gameHub.client.activateJoystick = function () { };
        $.connection.hub.qs = "type=joystick&gameId=" + "@Model.Id";
        $.connection.hub.start();   //this will invoke on connected 
```

这不起作用，因为集线器上没有客户端方法。我可能可以`RegistrateJoystick`在集线器上添加一个方法并调用它，但我认为这种行为是出乎意料的。因此，我的问题是：

**有没有办法手动“连接”到集线器，以便`OnConnect`调用该方法？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-11T16:34:11.617

这是设计使然。如果您没有对集线器的任何订阅，则该特定客户端将无法从服务器到客户端获取任何消息。您仍然可以调用集线器上的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-14T14:14:56.033

解决这个问题的一种方法是只拥有一个连接到的假集线器。什么都不做，返回无效。至少这样，当你引导你的游戏时，在连接上调用 .start() 之前，你连接到假集线器上的这个假方法。这将为您提供 onConnected() 方法。

我同意，这是一种奇怪的行为。如果您建立连接，即使您没有监听事件，也应该引发 onConnected()。

更奇怪的是，如果您正在进行 Hub 授权。如果您从 AuthorizeAttribute 派生，在您的情况下，将为您在客户端上调用的每个方法调用 AuthorizeHubMethodInvokation()，但永远不会调用 AuthorizeHubConnection()。

- 更新

我在我的项目中玩过这个。我最初的想法是在服务器上不存在的客户端上创建集线器代理，但这失败了。但是，您可以只连接到*真正的*集线器，但可以连接到虚假的回调。这确实有效，并且可以让您摆脱创建真正的方法。

这显然是一个可怕的工作，但面对没有别的，做这项工作。

# javascript - 在诺基亚地图中获得无限结果？

> ID：14273951
> 
> 赞同：0
> 
> 时间：2013-01-11T07:58:53.057
> 
> 标签：javascript, here-api

我正在使用诺基亚地图`nokia.places.search.manager.findPlaces`并获得最多 100 个结果。

但我需要无限的结果，比如 500 或 1000 左右。我怎样才能得到它？

我的诺基亚功能：

```
nokia.places.search.manager.findPlaces({ searchTerm: searchterm, searchCenter: lat,lng ,
limit:100, didYouMean: 5 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:00:08.193

`findPlaces`是本地搜索。本地搜索集中在一个小区域周围的结果。目前，地点搜索的限制为 100 个地点，因为超出设定距离的地点被视为不相关。添加`limit`参数并不能保证您无论如何都会在给定的搜索区域内找到 100 个相关地点。

这里的技巧不是尝试请求 1000 个结果，而是使用观察者并随着地图焦点的移动对最近的 100 个结果进行一系列异步请求。在任何地图上放置数千个标记都会导致它无法阅读、缓慢且无响应。

尝试以下类似的操作，当然还有您自己的[应用程序 ID 和令牌](http://www.developer.nokia.com/Community/Wiki/How_to_Obtain_Your_Own_Nokia_appID_and_Token)。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- 
    Example from Nokia Maps API Playground, for more information visit http://api.maps.nokia.com
 -->
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=7; IE=EmulateIE9"/>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
        <title>Nokia Maps API Example: Search by category</title>
        <meta name="description" content="Search by category"/>
        <meta name="keywords" content="search, services, places, category"/>
        <!-- For scaling content for mobile devices, setting the viewport to the width of the device-->
        <meta name=viewport content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
        <!-- By default we add ?with=all to load every package available, it's better to change this parameter to your use case. Options ?with=maps|positioning|places|placesdata|directions|datarendering|all -->
        <script type="text/javascript" charset="UTF-8" src="http://api.maps.nokia.com/2.2.3/jsl.js?with=all"></script>
        <!-- JavaScript for example container (NoteContainer & Logger)  -->
        <style type="text/css">
            html {
                overflow:hidden;
            }

            body {
                margin: 0;
                padding: 0;
                overflow: hidden;
                width: 100%;
                height: 100%;
                position: absolute;
            }

            #mapContainer {
                width: 80%;
                height: 80%;
                left: 0;
                top: 0;
                position: absolute;
            }
            #progress {
                width: 80%;
                height: 10%;
                left: 0;
                top: 80%;
                position: absolute;
            }
            #buttons {
                width: 80%;
                height: 10%;
                left: 0;
                top: 90%;
                position: absolute;
            }
        </style>
    </head>
    <body>
        <div id="mapContainer"></div>
        <div id="progress"></div>

        <script type="text/javascript" id="exampleJsSource">
/*  Set authentication token and appid 
*   WARNING: this is a demo-only key
*   please register on http://api.developer.nokia.com/ 
*   and obtain your own developer's API key 
*/
nokia.Settings.set("appId", "MY APP ID"); 
nokia.Settings.set("authenticationToken", "MY TOKEN");

// Get the DOM node to which we will append the map
var mapContainer = document.getElementById("mapContainer");
// Create a map inside the map container DOM node
var map = new nokia.maps.map.Display(mapContainer, {
    // Initial center and zoom level of the map
    center: [52.51, 13.4],
    zoomLevel: 13,
    components: [       
        new nokia.maps.map.component.Behavior()
    ]
});

var searchManager = nokia.places.search.manager,
    resultSet;

// Function for receiving search results from places search and process them
var processResults = function (data, requestStatus, requestId) {
    var i, len, locations, marker;
    if (requestStatus == "OK") {
        // The function findPlaces() and reverseGeoCode() of  return results in slightly different formats
        locations = data.results ? data.results.items : [data.location];
        // We check that at least one location has been found
        if (locations.length > 0) {
            // Remove results from previous search from the map
            if (resultSet) map.objects.remove(resultSet);
            // Convert all found locations into a set of markers
            resultSet = new nokia.maps.map.Container();
            for (i = 0, len = locations.length; i < len; i++) {
                marker = new nokia.maps.map.StandardMarker(locations[i].position, { text: i+1 });
                resultSet.objects.add(marker);
            }
            // Next we add the marker(s) to the map's object collection so they will be rendered onto the map
            map.objects.add(resultSet);
            // We zoom the map to a view that encapsulates all the markers into map's viewport
            //map.zoomTo(resultSet.getBoundingBox(), true);

        } else { 
            //alert("Your search produced no results!");
        }
         searching = false;
    } else {
        alert("The search request failed");
        searching = false;
    }
};

// Binding of DOM elements to several variables so we can install event handlers.
var progressUiElt = document.getElementById("progress");

// This function is called whenever we make a search
var searching = false;
search = function(searchCenter){
// Make a place search request
var category = "eat-drink"
progressUiElt.innerHTML = "Looking for places in the '" + category + "' category...'";
searchManager.findPlacesByCategory({
    category: category,
    onComplete: processResults,
    searchCenter: searchCenter,
    limit: 50,
});
}

search(new nokia.maps.geo.Coordinate(52.51, 13.4));

// This observer will call the search function if the center of the map is moved
// Beyond the area covered in the previous search
var centerObserver = function (obj, key, newValue, oldValue) {
    if ((searching == false) && (resultSet.getBoundingBox().contains(newValue) == false) ){
        searching = true;
        search(newValue);
    }

};

map.addObserver("center", centerObserver );

        </script>
    </body>
</html> 
```

# ruby - Ruby 命令行选项 - 打开详细模式并将代码放入输入循环

> ID：14273956
> 
> 赞同：2
> 
> 时间：2013-01-11T07:59:12.847
> 
> 标签：ruby, ruby-1.9

任何人都可以说出以下三个选项在 Ruby 中的不同之处吗？

***第一部分***

*   **--详细**
*   **-v**
*   **-w**

***第二部分***

*   **-n** _
***   -p **_****

 **所有人都在做同样的工作，即`verbose`mode `ON`。但从逻辑上讲，它们之间有何不同？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:02:19.403

`-v`只是一种较短的写作方式`--verbose`，所以它们是同一回事。`-w`打开警告，有关这些的更多信息，请参阅[http://www.caliban.org/ruby/rubyguide.shtml#warnings](http://www.caliban.org/ruby/rubyguide.shtml#warnings)。

第2部分：

`-n`并且`-p`与冗长无关。他们只是循环你的红宝石脚本。

从您的终端运行以下命令：

```
ruby -n -e "puts 'hello world'" 
```

现在按回车键几次。你应该看到：

```
hello world

hello world

hello world 
```

现在对`-p`:

```
ruby -p -e "puts 'hello world'" 
```

这只是重复您在按 Enter 之前键入的内容。

```
asdf
hello world
asdf

hello world

asdfs
hello world
asdfs
34644
hello world
34644 
```**

# flash - 如何找到主类文件 AS3

> ID：14273958
> 
> 赞同：0
> 
> 时间：2013-01-11T07:59:14.930
> 
> 标签：flash, actionscript

所以我反编译了一个 library.swf 文件，然后我有很多 AS3 文件，我怎么知道它们中的哪一个是 Main？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:12:47.740

您必须将 main 定义为文件，单击您的阶段并在属性面板中输入名称

# c# - LINQ to Entity Select 查询错误

> ID：14273959
> 
> 赞同：0
> 
> 时间：2013-01-11T07:59:26.270
> 
> 标签：c#, linq, select, entity

```
using (SmartEntities employeeverificationcontext = new SmartEntities())
{
    Employee emp = (from c in employeeverificationcontext.EmployeeEntity 
                    where c.Employee_ID == emp_detail.EmployeeID 
                    select new Employee {c.Status}).FirstOrDefault();
    emp.Status = emp_detail.Status;
    int i=employeeverificationcontext.SaveChanges();
    if (i > 0)
    {
        result = "Verification Process Completed";
    }
} 
```

> 错误：错误 1 ​​无法使用集合初始化程序初始化类型“SmartWCF.Employee”，因为它没有实现“System.Collections.IEnumerable”**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:01:51.243

而不是`select new Employee {c.Status}`您应该选择当前对象 ( `c`)

所以你的查询应该是：

```
Employee emp = (from c in employeeverificationcontext.EmployeeEntity 
               where c.Employee_ID == emp_detail.EmployeeID 
               select c).FirstOrDefault(); 
```

或者

```
Employee emp = employeeverificationcontext.EmployeeEntity
                      .FirstOrDefault(c=> Employee_ID == emp_detail.EmployeeID); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:16:00.510

只有选择`Status`是这样完成的：

```
var employeeStatus = (from c in employeeverificationcontext.EmployeeEntity 
                        where c.Employee_ID == emp_detail.EmployeeID 
                      select c.Status).FirstOrDefault(); 
```

但是，如果您想将其设置为新状态并将其保存到您的数据上下文中，这对您没有帮助。在这种情况下，您必须选择`Employee`。

这篇文章中提到了一些替代方案：[如何在不加载整行的情况下更新 LINQ 中的单个列？](https://stackoverflow.com/questions/221475/how-to-update-a-single-column-in-linq-without-loading-the-entire-row)

# extjs - 使用 sencha extjs3.4 创建列表视图？

> ID：14273962
> 
> 赞同：0
> 
> 时间：2013-01-11T07:59:39.517
> 
> 标签：extjs, extjs3

```
var listView = Ext.extend(Ext.list.ListView, {

    cls: '',
    loadMask: null,
   autoExpandColumn: 'Category',
   store: new Ext.data.JsonStore({
       url: '/System/DashboardUpdates/GetDashboardUpdates',
       remoteSort: true,

      totalProperty: 'RecordCount',
      root: 'PageItems',

        fields: [
            'Id',
            'Category',
           'CategoryId',
            'Description',
            'Source',
           'Created',
           'Actions'
        ]
    }),
    columns: [
        {
            header: 'Category',
            width: 80, fixed: true,
            sortable: true,
            dataIndex: 'Category'
        },
        {
            header: 'Description',
            sortable: true,
            id: 'Description',
            dataIndex: 'Description'
        },        
        {
            header: 'Source',
            width: 300, fixed: true,
            sortable: true,
            dataIndex: 'Source'
            renderer: function (v, m, r) {
                return '<a href="' + '/Utilities/Test/ViewTestVariable/' + r.data.Id + '">' + v + '</a>'; }
       },
        {
            header: 'Date', width: 90, fixed: true, sortable: true, dataIndex: 'Created'
        },
        {
            header: 'Actions',
            sortable: true,
            dataIndex: 'Actions'
        }
        ]
    ],
      initComponent: function () {
        listView.superclass.initComponent.call(this);
    }

});

Dashboard.Dashboard.DashboardUpdatesPanel = Ext.extend(Ext.Panel, {
    initComponent: function () {

        var actionPerModuleFields = ['Id',
            'CategoryId',
            'Description',
            'SourceId',
            'Created',
            'Actions'];
        this.actionsPerModuleStore = new Ext.data.JsonStore({
            url: '/System/DashboardUpdates/GetDashboardUpdates',
            root: 'PageItems',
            fields: actionPerModuleFields
        });
        this.items = [listView];
             this.listView = new listView({
                    store: new Ext.data.JsonStore({ fields: actionPerModuleFields })
                });
       this.on({
            afterlayout: {
                scope: this,
               single: true,
                fn: function () {
                    this.actionsPerModuleStore.load();
                }
            }
        });

        Dashboard.Dashboard.DashboardUpdatesPanel.superclass.initComponent.call(this);
    }

});
Ext.reg('UpdatePanel', Dashboard.Dashboard.DashboardUpdatesPanel); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:13:27.577

通过 JSLint 运行您的代码。您有语法错误 - 这肯定会导致问题。

正如埃文指出的那样，您实际上并没有提出问题。

# jquery - jQuery - 通过另一个事件停止延迟淡出

> ID：14273965
> 
> 赞同：2
> 
> 时间：2013-01-11T07:59:57.123
> 
> 标签：jquery, jquery-animate, settimeout, delay, fadeout

这是我当前的代码。它可以工作，但是当运行另一个事件（例如通过单击按钮）时，我需要它停止并重置淡出。

**代码**

```
$('#selector').delay(5000).fadeOut('slow'); 
```

*   我读过我需要使用`animate`or`setTimeOut`代替`delay`?
*   这样做的最佳方法是什么？

**例子**

就我而言，我在屏幕顶部有一个状态栏，如果我单击更新状态栏的内容，它不会消失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T12:39:52.093

**重置计时器**

这是在设置定时器之前调用的。如果我疯狂地点击，它会阻止计时器完成。它停止并重置计时器。

```
clearTimeout(my_timer); 
```

**设置定时器**

```
my_timer = setTimeout(function () {
    $('#selector').fadeOut('slow');
}, 5000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T08:03:22.990

只需调用`.stop()`淡入淡出元素上的方法：（`#selector2`是停止淡入淡出的按钮）

```
$('#selector2').click(
    function()
    {
        $('#selector').stop();
    }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-18T14:58:37.000

见函数 clearQueue() [https://api.jquery.com/clearQueue/](https://api.jquery.com/clearQueue/)

# sql - 正确使用 Coalesce

> ID：14273968
> 
> 赞同：0
> 
> 时间：2013-01-11T08:00:08.667
> 
> 标签：sql, sql-server

我在表 A b 和 c 中有三列。如果a不为null，那么我想返回a，但如果它为null，我想返回b + c。

我原以为这样 `Select Coalesce(a, b + c) from table1` 可以解决问题，但似乎并不表明我的语法有误。我尝试的每个变体似乎仍然为列 a 返回空值，因为 a 为空，它应该返回 b 和 c 的串联。我欢迎你的帮助。

我认为语法是正确的，但它是 Coalesce 的不正确使用。

三列的两个表：

```
Fred Flinstone Tyres    Fred    Flinstone
Norman Greembaum        Norman  Greenbaum
NULL                    Dave    Collins

NULL    2   3
4   5   6
8   6   8
NULL    2   7 
```

抱歉，第二个的格式不太好，但应该足够了。Coalesce 似乎在使用 int 数据类型时适用于下表，但在使用 nvarchar 时不适用于顶部。通常当然这是我感兴趣的顶级表，我希望 Dave Collins 返回第 3 行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T08:47:20.730

只需 ISNULL(a, b+c) 就可以了，此外它的 SQL 标准也用于连接

```
ISNULL(a, CAST(b as varchar) + CAST(c as Varchar)) 
```

和算术

```
ISNULL(a, ISNULL(b, 0) + ISNULL(c, 0)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:04:03.740

检查'b'和'c'，我认为其中一个为null，因为如果你将1 + null相加，它将为null

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T08:53:36.677

如果 A 或 B 可能为 NULL 的变化，那么；

```
ISNULL(a, ISNULL(b + c), 0) 
```

或者

```
COALESCE(a, b + c, 0) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T08:08:46.320

Use

```
SELECT COALESCE(a, b + c, b, c) FROM table1 
```

or

```
SELECT COALESCE(a, IsNull(b + c,0)) FROM table1 
```

Then you get a value for sure that is not null. In your case on of your values probably is null. Check also [http://msdn.microsoft.com/en-us/library/ms190349.aspx](http://msdn.microsoft.com/en-us/library/ms190349.aspx)

UPDATE:

```
DECLARE @table TABLE(a int, b int, c int);
INSERT INTO @table (a,b,c) VALUES (null, 1, 2);
INSERT INTO @table (a,b,c) VALUES (null, 2, 2);
INSERT INTO @table (a,b,c) VALUES (1, 3, 2);
INSERT INTO @table (a,b,c) VALUES (2, 4, 2);

SELECT COALESCE(a,b+c) FROM @table 
```

results in:

3 4 1 2

as expected.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-11T08:43:42.420

从 TABLE1 中选择 COALESCE(A,B+C) 有表 TABLE1 和列 A,B,C 如果 (A=NULL) 的值和 (B OR C) 的值是 NULL 那么它将返回 NULL 值
表

美国广播公司

1 2 3 1 空 3 2 空 3 2 空 4 空 2 4 空 2 空

之后，从 table1 中选择 coalesce (a,b+c)

1 1 2 2 6 空

# html - 如何旋转画布上下文以使其完全适合画布区域？

> ID：14273969
> 
> 赞同：0
> 
> 时间：2013-01-11T08:00:13.680
> 
> 标签：html, canvas, rotation

这是一个有点蹩脚的问题，因为我是画布的新手。我需要旋转放置在画布内的图像，**使其完全适合画布区域**。在下面给出的代码片段中，图像旋转得很好，但我不知道如何使它适合画布矩形。我可以尝试使用三角函数的数学方法，但我认为它太复杂了:)

[![旋转上下文以适合画布区域](../Images/3ddf758cb34846889aecadc0f42d8559.png)](https://i.stack.imgur.com/hG1Ey.jpg)
[（来源：[iconizer.net](http://iconizer.net/img/temp/how-to-rotate.jpg)）]

```
var imgObj=new Image();
imgObj.src='people.jpg';
var width=128;//dynamic
var height=128;//dynamic

$(imgObj).load(function() {
    context.clearRect(0, 0, canvas.width, canvas.height);

    var rad = 30 * Math.PI / 180;

    context.translate(0 + width / 2, 0 + height / 2);

    context.rotate(rad);

    //draw the image    
    context.drawImage(imgObj,width / 2 * (-1),height / 2 * (-1),width,height);

    //reset the canvas  
    context.rotate(rad * ( -1 ) );
    context.translate((0 + width / 2) * (-1), (0 + height / 2) * (-1));
}); 
```

在 PHP 中很容易通过简单地将旋转的图像放置在所需的坐标上，但在画布中并非如此。请帮忙 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:20:35.540

自己解决了这个问题。虽然，它有点自满。如果有人找到更优的解决方案，它会真正帮助我:)

 `````
 $(document).ready(function(){
    var canvas=document.getElementById('iconCanvas');//<canvas id="iconCanvas" width="128" height="128"></canvas>
    var context=canvas.getContext("2d");
    var imgObj=new Image();
    imgObj.src='/images/temp/kdmconfig.png';
    var iconWidth=128;
    var iconHeight=128;
    var width=200;
    var height=128;
    var angleToRotate=30;

    $(imgObj).load(function() {
        context.clearRect(0, 0, canvas.width, canvas.height);

        var rad = angleToRotate * Math.PI / 180;
        var newAngle=angleToRotate;

        //in case angle is >90
        if(newAngle>90 && newAngle<=180){
            newAngle=180-newAngle;
        }
        else if(newAngle>180 && newAngle<=270){
            newAngle=270-newAngle;
        }
        else if(newAngle>270){
            newAngle=360-newAngle;
        }

        context.translate(0 + iconWidth / 2, 0 + iconWidth / 2);

        context.rotate(rad);

        //draw the image

        if(width>height){
            var newImageHeight=Math.round((Math.cos((Math.atan(iconWidth/iconHeight)*180/Math.PI)*Math.PI/180)*height)/Math.sin((parseInt(90-newAngle)+Math.atan(iconWidth/iconHeight)*180/Math.PI)*Math.PI/180));

            var newImageWidth=Math.round(newImageHeight*iconWidth/iconHeight);
        }
        else{
            var newImageWidth=Math.round((Math.cos((Math.atan(iconHeight/iconWidth)*180/Math.PI)*Math.PI/180)*width)/Math.sin((parseInt(90-newAngle)+Math.atan(iconHeight/iconWidth)*180/Math.PI)*Math.PI/180));

            var newImageHeight=Math.round(newImageWidth*iconHeight/iconWidth);
        }

        context.drawImage(imgObj,newImageWidth / 2 * (-1),newImageHeight / 2 * (-1),newImageWidth,newImageHeight);

    });
    }); 
````  `* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T08:24:55.550

这是你想要的：

```
var newCanvas = document.createElement('canvas');
newCanvas.height="175";
newCanvas.width="175";
newCanvas.style.border="1px solid black";
document.body.appendChild(newCanvas);

var imgObj=new Image();
imgObj.src='people.jpg';
var width=imgObj.width;
var height=imgObj.height;

var angleToRotate = 30 * Math.PI / 180;

var requiredCanvasHeight = Math.sin(angleToRotate)*width+Math.cos(angleToRotate)*height;
var requiredCanvasWidth = Math.sin(angleToRotate)*height+Math.cos(angleToRotate)*width;
newCanvas.height=Math.ceil(requiredCanvasHeight);
newCanvas.width=Math.ceil(requiredCanvasWidth);

$(imgObj).load(function() {
    var context = newCanvas.getContext('2d');

    context.clearRect(0, 0, newCanvas.width, newCanvas.height);

    context.translate(0 + width / 2, 0);// + height / 2);

    context.rotate(angleToRotate);

    //draw the image    
    context.drawImage(imgObj, 0, 0, width, height);

    //reset the canvas  
    context.rotate(rad * ( -1 ) );
    context.translate((0 + width / 2) * (-1), (0 + height / 2) * (-1));
}); 
```

您无需在 drawImage 方法调用中偏移图像。``

# azure - 检测 Windows azure 中是否存在角色实例

> ID：14273972
> 
> 赞同：0
> 
> 时间：2013-01-11T08:00:55.750
> 
> 标签：azure

windows azure 中是否有服务可以查询角色实例的非缓存记录以查看角色实例是否存在，如果存在，它的 IP 地址和端口是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:12:29.300

是的，这可以从您的云服务中实现：

```
foreach (var role in Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.Roles)
{
    foreach (var instance in role.Value.Instances)
    {
        foreach (string endpointName in instance.InstanceEndpoints.Keys)
        {
            RoleInstanceEndpoint endpoint = instance.InstanceEndpoints[endpointName];
            IPEndPoint ipEndpoint = endpoint.IPEndpoint;                        
        }
    }
} 
```

如果您想从云服务外部执行此操作，则需要使用服务管理 API：*[获取部署操作](http://msdn.microsoft.com/en-us/library/windowsazure/ee460804.aspx)**返回部署的配置信息、状态和系统属性。*

# c# - PC和USB设备之间通信的最佳方式是什么

> ID：14273977
> 
> 赞同：3
> 
> 时间：2013-01-11T08:01:13.503
> 
> 标签：c#, usb, communication, usbserial, usb-flash-drive

场景是，我有一个带有闪存卡的 USB 设备用于存储。我将编写一个 PC 应用程序`c#`，用于与该设备通信/交换数据。类似于各种 SYNC 程序的东西

我想到的两个选择是：

1.  将闪存卡公开为大容量存储设备，只需复制所需的数据
2.  使用 CDC 数据

现在，如果我使用第一个选项，有什么方法可以`autorun.bat`在连接此设备时运行一些文件来检查是否安装了所需的 PC 应用程序，如果没有安装，引导用户从特定网站下载？

如果我使用第二个选项，那么我认为用户必须明确下载所需的 PC 应用程序，然后他/她才能交换数据（例如`iTune`）

请建议是否有其他方法可以实现相同的目标？

此致

巴拉特鬃毛

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:16:29.420

Windows的各个版本都支持自动运行功能，但我认为在以后的版本中已经在一定程度上禁用了它，因为它存在安全风险。

我会把它做成一个复合设备，其中一个功能是大容量存储，另一个功能是通用的（使用 WinUSB/libusb）。然后在 SD 卡上放一个名为 setup.exe 的小下载器，并告诉用户运行它来安装驱动程序和软件。

# node.js - 将 websockets 与标准 http.Server 集成

> ID：14273978
> 
> 赞同：12
> 
> 时间：2013-01-11T08:01:16.123
> 
> 标签：node.js, websocket

我有一个简单的[网络服务器](http://nodejs.org/api/http.html#http_class_http_server)，比如

```
var http = require('http'),
    url = require('url');
var server = http.createServer(function (req, res) {
  var uri = url.parse(req.url).pathname;
  if (uri == '/') {
    res.writeHead(200, {'Content-Type': 'text/plain'});
    res.end('Hello World\n');
    return;
  }

  res.writeHead(404, {'Content-Type': 'text/plain'});
  res.end('File not found');
});
server.listen(0, '127.0.0.1'); 
```

我现在想将单个路径（例如`/ws`）连接到 websocket，但保持服务器的其余部分保持不变。

但是，[ws](http://einaros.github.com/ws/)似乎需要我设置一个专用服务器（包括所有需要的东西，如 SSL 终止、安全配置和端口分配）。

如何仅终止`/ws`websocket 实现的路径？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T13:00:28.807

我建议使用[websocket 包](https://npmjs.org/package/websocket)，它是一个

> 实现 RFC 6455 中指定的 WebSocket 协议的 Websocket 客户端和服务器库。

这就是我想要的，所以这就是我使用它的原因。使用起来非常轻松，我实际上是在使用纯 javascript websockets 从 html 客户端到 node.js 的 wss 和 ws 连接。

git 项目处于活动状态，当我发布问题时，我在同一天得到了回复。上面链接中的一个示例显示了它是多么简单：

```
var WebSocketServer = require('websocket').server;
var http = require('http');

var server = http.createServer(function(request, response) {
    console.log((new Date()) + ' Received request for ' + request.url);
    response.writeHead(404);
    response.end();
});
server.listen(8080, function() {
    console.log((new Date()) + ' Server is listening on port 8080');
});

wsServer = new WebSocketServer({
    httpServer: server,
    autoAcceptConnections: false
});

function originIsAllowed(origin) {
  // put logic here to detect whether the specified origin is allowed.
  return true;
}

wsServer.on('request', function(request) {
    if (!originIsAllowed(request.origin)) {
      // Make sure we only accept requests from an allowed origin
      request.reject();
      console.log((new Date()) + ' Connection from origin ' + request.origin + ' rejected.');
      return;
    }

    var connection = request.accept('echo-protocol', request.origin);
    console.log((new Date()) + ' Connection accepted.');
    connection.on('message', function(message) {
        if (message.type === 'utf8') {
            console.log('Received Message: ' + message.utf8Data);
            connection.sendUTF(message.utf8Data);
        }
        else if (message.type === 'binary') {
            console.log('Received Binary Message of ' + message.binaryData.length + ' bytes');
            connection.sendBytes(message.binaryData);
        }
    });
    connection.on('close', function(reasonCode, description) {
        console.log((new Date()) + ' Peer ' + connection.remoteAddress + ' disconnected.');
    });
}); 
```

但是，我应该指出，子协议并不明显，因为没有示例。不过，该项目的 git 站点上有一些问题可以引导您朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T08:47:32.633

您可以将 socket.io 添加到与您的应用程序相同的端口上。如果您想要 /ws 路径，请使用：

```
var io = require('socket.io').listen(httpServer, { resource: '/ws/socket.io' }); 
```

或者有`/ws`指向`/ws/socket.io`

# actionscript-3 - 在动作脚本 3 flex 4 中使用 DisplayObject(Group ,UIComponent) 剪切复制粘贴

> ID：14273989
> 
> 赞同：3
> 
> 时间：2013-01-11T08:02:15.233
> 
> 标签：actionscript-3, apache-flex, flex4.5, flex4.6

我正在像[cacoo](http://www.cacoo.com)这样的应用程序中实现 Cut Copy Paste 。但我在这些操作中遇到问题。我在剪切复制粘贴后面使用想法

```
var className:String = getQualifiedClassName(objcut.getItemAt(i))
var klass:Class = getDefinitionByName(className) as Class
var cloneObject:* = new klass() 
```

所以我无法保留对象的所有属性。 **在 flex 4 中执行这些操作还有其他想法。我如何在 Flex 4(as3) 中复制图形对象。复制一个对象并多次粘贴。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:06:34.147

使用属性制作对象副本的最简单方法是使用 ByteArray：

```
public static function copy(value:Object):Object
{
    if (!value)
        return null;

    //register object class to prevent Error #1034: Type Coercion failed
    registerClassAlias(getQualifiedClassName(value), value.constructor);

    var buffer:ByteArray = new ByteArray();
    buffer.writeObject(value);
    buffer.position = 0;
    var result:Object = buffer.readObject();
    return result;
} 
```

但是对于嵌套类，您仍然会收到错误 #1034。在复制之前，您需要为所有嵌套类注册别名以防止这种情况发生，例如在某些启动方法中。

# testing - Cannot Like my testpage with the like button

> ID：14273998
> 
> 赞同：1
> 
> 时间：2013-01-11T08:02:42.153
> 
> 标签：testing, facebook-like, counter, facebook-social-plugins, facebook-iframe

I have a testing website and i tried out the fb likebutton there. But everytime when i click on the like button, the counter goes firstly to 1 and a second later to a Link with the count 0\. The only note from fb debug is that i should check my images, because they should not get bigger than 200px in both dimensions, but its only 100x100px.

What did i do wrong ?

Below there is my code. Thanks for your help.

```
<html>
  <head>
    <title>Test</title>
    <meta property="og:title" content="Timos Testpage" />
    <meta property="og:type" content="author" />
    <meta property="og:url" content="http://oimel1987.tipido.net/test.php" />
    <meta property="og:image" content="http://oimel1987.tipido.net/dummy.png">
    <meta property="og:site_name" content="oimel1987.tipido.net" />
    <meta property="fb:admins" content="100001556570293" />
  </head>
  <body>
    Test abc
    <iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Foimel1987.tipido.net%2Ftest.php&amp;send=false&amp;layout=button_count&amp;width=150&amp;show_faces=true&amp;font=tahoma&amp;colorscheme=light&amp;action=like&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:150px; height:21px;" allowTransparency="true"></iframe>
  </body>
</html> 
```