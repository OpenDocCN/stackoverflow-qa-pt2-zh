# StackOverflow 问答 15487000-15487999

# servicestack - 如何在 ServiceStack 中使用 Dapper

> ID：15487000
> 
> 赞同：10
> 
> 时间：2013-03-18T21:09:32.267
> 
> 标签：servicestack, dapper, ormlite-servicestack

目前，我正在使用 OrmLite 进行数据库操作。我也计划使用 Dapper ORM，但谁能指出我如何将 DapperORM 集成到 ServiceStack 中。我是否需要使用 Dapper 和插件在容器中实现 IDbConnection 和 IDbConnectionFactory 接口。

```
 public override void Configure(Container container) {
        container.Register<IDbConnectionFactory>(
          c => new OrmLiteConnectionFactory(ConfigurationManager.ConnectionStrings["default"].ConnectionString,
                                            SqlServerDialect.Provider));

        container.Register<IDbConnection>(c => c.Resolve<IDbConnectionFactory>().OpenDbConnection()).ReusedWithin(ReuseScope.Request);

      } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T21:55:22.430

Dapper 的工作方式与 OrmLite 类似，因为它们都是底层 ADO.NET `System.Data.*` [IDbConnection](http://msdn.microsoft.com/en-us/library/system.data.idbconnection.aspx)接口的扩展方法。这意味着您可以在从 OrmLite 的**IDbConnectionFactory**检索到的 IDbConnection上同时使用它们。

OrmLite在命名空间下的[ServiceStack.OrmLite](https://github.com/ServiceStack/ServiceStack.OrmLite)`ServiceStack.OrmLite.Dapper`中包含了最新版本的 Dapper 。

* * *

在 ServiceStack 的 v3.9.40 中，Dapper 的这个嵌入式版本将其 API 更改为包含“Dapper”后缀，以避免与同名的 OrmLite 方法发生冲突。您**不必**注册一个请求范围的 IDbConnection，因为 ServiceStack 的默认[服务](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Service.cs#L77)类已经为您从 IDbConnectionFactory 检索它。

鉴于此，以下是在 ServiceStack 服务中访问 Dapper ORM API 的方法：

```
public class MyService : Service
{
    public object Any(Request request)
    {
        base.Db.QueryDapper(...);
        base.Db.QueryMultipleDapper(...);
        base.Db.MultiMapDapper(...);
        base.Db.ExecuteDapper(...);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-28T01:08:25.773

我不了解其他人，但由于 Razor 命名空间中有关 Dapper 的信息，这个答案让我很困惑。

如果其他人有类似的经历，我试图以[基本的方式](https://stackoverflow.com/questions/16639251/servicestack-mars-multiple-active-result-sets-using-ormlite-and-output-paramet)回答同样的问题。

# python - 在标签上放一张图片 python tkinter

> ID：15487001
> 
> 赞同：0
> 
> 时间：2013-03-18T21:09:59.957
> 
> 标签：python, image, tkinter

我在这里找到了一个类似的问题，但答案没有帮助。

我有一个 python 脚本和一个 .gif

两者都在同一个目录中。我正在尝试以下操作：

```
 master = Tk()       
 left = PhotoImage(file = "A.gif") 
```

但是，我得到 gif 的“没有这样的文件或目录”异常。

我应该把它放在哪里以避免这种情况

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:17:32.597

您提到 the`.gif`和 the`.py`在同一个目录中，但这实际上并不相关。

相关的是它是否在你的 python 进程`.gif`的*当前工作目录中。*

尝试其中之一：

1.  将 shell 的当前工作目录设置为包含`.gif`, 或
2.  `PhotoImage`在调用中使用绝对路径名

# vb.net - 如何写入应用程序内部的文本文件

> ID：15487006
> 
> 赞同：1
> 
> 时间：2013-03-18T21:10:13.683
> 
> 标签：vb.net, resources, text-files, overwrite

基本上，我的应用程序中有一个文本文件（在应用程序属性的资源选项卡中）。

现在我正在尝试读写该文件，阅读效果很好，这是给我带来问题的写作部分。

我正在使用`dim str as string = my.resources.textfile`，它有效。

现在我正在尝试使用`my.resources.textfile = str2`，这给了我一个错误，说明文件是只读的。

我该如何解决这个问题？

注意：我不喜欢将文件写入用户的 PC，因为需要写入的数据并不多，而且它看起来有点不专业（在我看来），所以我更喜欢一种不写的方法文件到用户的 PC。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T21:52:11.443

> 当它只是一个包含 1 行文本的小文本文件时，将其写入另一个文件是一种浪费。

为什么会是“浪费”？这是一种奇怪的看待它的方式。如果首先写入文件是值得的，那么将其写入单独的文件也是值得的。

正如 Jacob 在评论中所说，修改可执行文件本身是一项非常重要的任务。让代码工作来实现这一点将是真正的浪费。这假设您可以通过病毒扫描程序、公司政策或基本代码审查获得类似的代码。

> 我不喜欢将文件写入用户的 PC，因为它不需要写入很多数据，而且因为它看起来有点不专业（在我看来），所以我更喜欢一种不写文件的方法用户的电脑。

你有正确的直觉来担心这一点，但在这种特殊情况下的担心是错误的。将文件写入用户的桌面，或者文档文件夹，甚至是硬盘的根目录，确实是不专业的。这些位置要么完全属于用户，要么属于系统，即使你可以成功地写入它们（UAC 会一直在磁盘的根级别上与你抗衡），你也不应该这样做。^([（[等等等等，我以前对此大不了不安。](https://stackoverflow.com/a/5210642/366904)）])

相反，请使用专门用于此目的的 Application Data 文件夹。保证您对该位置具有读/写权限，并且没有普通用户会查看那里，因此他们不会看到您扔进去的任何东西。查看那里的异常用户*希望*看到存储在那里的这种东西。

您唯一可能犯的错误是硬编码此类文件夹的路径。不要那样做——它会将位置从一台机器更改到另一台机器。相反，使用该[`Environment.GetFolderPath`](http://msdn.microsoft.com/en-us/library/system.environment.getfolderpath.aspx)方法检索其位置。该函数采用其中一个[`Environment.SpecialFolder`](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)值，其中有一个疯狂的数字。您对此感兴趣的三个是：

*   `ApplicationData`，用于存储应与用户帐户一起*漫游*的应用程序数据（即，当他们使用不同的机器登录时使用该帐户）
*   `LocalApplicationData`，用于存储不应随用户帐户漫游的应用程序数据*（*即，仅在当前机器上保持本地）
*   `CommonApplicationData`，用于存储所有用户通用的应用程序数据（即非用户特定的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-10T04:39:31.790

如果它只是登录凭据，为什么不使用 My.Settings？获取您的项目属性，然后到设置选项卡，添加您的设置，例如。“用户名”等并像这样使用： My.Settings.username = “Yorrick” My.settings.save

# django - 创建具有文件字段的 django 模型时键入错误

> ID：15487007
> 
> 赞同：0
> 
> 时间：2013-03-18T21:10:17.600
> 
> 标签：django, file-upload, filefield, django-models

尝试使用文件字段创建（&save）django 模型时出现以下错误：

> **/admin/app_name/template/add/ 处的类型错误**
> 
> **强制转换为 Unicode：需要字符串或缓冲区，找到 int**

```
 Request Method:     POST 

 Request URL:        http://localhost:8000/admin/app_name/template/add/

 Django Version:     1.4.3

 Exception Type:     TypeError

 Exception Value:    coercing to Unicode: need string or buffer, int found

 Exception Location: path_to_python\python\lib\site-packages\django\utils\encoding.py
                     in force_unicode, line 71 
```

这是models.py：-

```
class Template(models.Model):

    title = models.CharField(max_length=300, unique=True) 
    template = models.FileField(upload_to='templates')

    def __unicode__(self): 
        return self.title 

class TemplateAdmin(admin.ModelAdmin):

    def upload_file(request,*args, **kwargs):

        if request.method == 'POST':

            instance = Template(template=request.FILES['template'])
            instance.title =request.POST['title']
            instance.save()

admin.site.register(Template, TemplateAdmin) 
```

这是settings.py：-

```
MEDIA_ROOT = os.path.join(os.path.dirname(__file__), "media") 
```

此外，虽然在尝试保存（创建）模板对象时出现此错误，但文件似乎仍上传到指定目录中（因为我可以在该目录中找到它）......但是没有创建对象实例（如`Template.objects.all()`返回一个空列表）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:38:09.863

现在解决了...！

问题是由于这个愚蠢的打字错误（我直到现在才发现）---

```
class Template(models.Model):

    title = models.CharField(max_length=300, unique=True) 
    template = models.FileField(upload_to='templates')

    def __unicode__(self): 
        return self.title 

    def __unicode__(self):
        return self.id 
```

# javascript - 删除多个选定的行 + 行跨度

> ID：15487014
> 
> 赞同：1
> 
> 时间：2013-03-18T21:10:36.723
> 
> 标签：javascript

我想删除带有rowspan的选定行和一个额外的行，总共4行，您可以看到每4行堆栈代表1个条目。下面的函数 deleteSelectedRows() 不能正常工作；它只会删除选中的那个。能否请你帮忙！

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
</head>
<body>
<table  id="my_table" id="my_table" align="center" width="100%" border="1" cellpadding="0" cellspacing="0">
    <tbody>
    <thead>
      <tr>
        <th >No</th>
        <th >Location</th>
        <th >Time</th>
      </tr>
      <tr> <!-- new entry #1 -->
        <td rowspan="3"><input type="checkbox">1a<td>
        <td>1a</td>
      </tr>
      <tr>
        <td>2a</td>
        <td>2a</td>
      </tr>
      <tr>
        <td>3a</td>
        <td>3a</td>
      </tr>
      <tr >
        <td colSpan="3">4a</td>
      </tr>
      <tr> <!-- new entry #2-->
        <td rowspan="3"><input type="checkbox">1b<td>
        <td>1b</td>
      </tr>
      <tr>
        <td>2b</td>
        <td>2b</td>
      </tr>
      <tr>
        <td>3b</td>
        <td>3b</td>
      </tr>
      <tr >
        <td colSpan="3">4b</td>
      </tr>
     </thead></tbody>
    </table>
    <div><input type="button" value="Delete selected rows" onClick="deleteSelectedRows()"/></div>
</body>
</HTML>
   <SCRIPT language="javascript">
    function deleteSelectedRows() {    
     var table = document.getElementById('my_table'); //html table
     var rowCount = table.rows.length; //no. of rows in table          
     for(var i=0; i< rowCount; i++) { //loops for all row in table 

      var row = table.rows[i]; //return a particular row              
      var chkbox = row.cells[0].childNodes[0]; //get check box onject               
      if(null != chkbox && true == chkbox.checked) { //wheather check box is selected                   
       table.deleteRow(i); //delete the selected row   

       rowCount = rowCount-1; //decrease rowcount by 1                   
       i--;               
      }             
     }
    }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:50:08.253

提供的 HTML 有一些小的验证错误，我在下面进行了更正。这些是`<thead>`不包含您的整个表格，并且绝对不应该存在*于*`<tbody>`. `id`上也有重复`<table>`。请参阅[文档](http://www.w3.org/TR/html401/struct/tables.html#h-11.2.3)以了解有效的表格元素顺序。

您遇到的问题是代码只删除了与复选框匹配的一行。然后`rowCount`将减少 1（从 9 到 8），但删除行的逻辑仍然取决于找到的复选框，但这将永远不会再发生，因为您刚刚删除了该行！

~~更新后的 JavaScript 首先找到 rowIndex，就像您已经拥有的一样，但现在会中断，然后使用此索引作为起始位置向后迭代删除 4 行。~~

**编辑：**更新的 JavaScript 向后工作，避免了所有的递增和递减，现在在检查多个输入时工作。抱歉，我错过了我的第一个答案可以检查多个框的可能性！

[**请参阅下面的演示**](http://jsfiddle.net/rrAT5/3/)或代码。

**HTML**（现在有效）

```
<table  id="my_table" align="center" width="100%" border="1" cellpadding="0" cellspacing="0">
  <thead>
    <tr>
      <th>No</th>
      <th>Location</th>
      <th>Time</th>
    </tr>
  </thead>
  <tbody>
    <tr> <!-- new entry #1 -->
      <td rowspan="3"><input type="checkbox"/>1a</td>
      <td>1a</td>
      <td></td>
    </tr>
    <tr>
      <td>2a</td>
      <td>2a</td>
    </tr>
    <tr>
      <td>3a</td>
      <td>3a</td>
    </tr>
    <tr>
      <td colSpan="3">4a</td>
    </tr>
    <tr> <!-- new entry #2-->
      <td rowspan="3"><input type="checkbox"/>1b</td>
      <td>1b</td>
      <td></td>
    </tr>
    <tr>
      <td>2b</td>
      <td>2b</td>
    </tr>
    <tr>
      <td>3b</td>
      <td>3b</td>
    </tr>
    <tr>
      <td colSpan="3">4b</td>
    </tr>
   </tbody>
</table>
<div><input type="button" value="Delete selected rows" onClick="deleteSelectedRows()"/></div> 
```

**JavaScript**

```
function deleteSelectedRows() {    
  var table = document.getElementById('my_table'); //html table

  for (var rowIndex = table.rows.length - 1; rowIndex >= 0; rowIndex--) { //loops for all row in table 
    var row = table.rows[rowIndex]; //return a particular row              
    var chkbox = row.cells[0].childNodes[0]; //get check box object               

    if (null != chkbox && true == chkbox.checked) { //wheather check box is selected
      // rowIndex = row with checkbox on
      for (var i = rowIndex + 3; i >= rowIndex; i--) {
        table.deleteRow(i); //delete the selected row  
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:48:24.860

您的问题是您删除了一行，但由于您`rowspan=3`的行由 3 行表示。因此，您必须删除与 rowspan 值一样多的行（第四个为 +1）。像这样 ：

```
function deleteSelectedRows() {    
 var table = document.getElementById('my_table');
 var rowCount = table.rows.length;        
 for(var i=0; i< rowCount; i++) {

  var row = table.rows[i];            
  var chkbox = row.cells[0].childNodes[0];             
  if(null != chkbox && true == chkbox.checked) {
   nbRows = row.cells[0].rowSpan + 1; // the number of row to delete
   for(var j=0; j<nbRows; j++) {       
    table.deleteRow(i); //delete the selected rows  
    rowCount--; 
   }
   i--;               
  }             
 }
} 
```

# asp.net-mvc - signalR 将对象传递到集线器

> ID：15487015
> 
> 赞同：2
> 
> 时间：2013-03-18T21:10:42.220
> 
> 标签：asp.net-mvc, asp.net-mvc-4, signalr, signalr-hub

我需要能够以某种方式将`List<string>`（在我的控制器中加载）与`connectionId`在 HUB 中生成的关联。

在我的 MVC 应用程序中，我有一个`List<string>`包含一些数据的操作。加载页面后，在我的 Hub 中执行 OnConnected 方法，`ConnectionId`生成新的。我想将其`ConnectionId`与我的`List<string>`.

由于 OnConnected 在操作完成后执行，我不相信还有另一种方法。有没有？

我如何将列表（或其他对象）传递给我的集线器，以便与特定的 ConnectionId 相关联？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:29:30.977

与其将数据传递到您的集线器，不如从您的集线器获取数据。

因此，例如，您可以使用静态字典/列表让两者相互引用：

```
public class MyHub : Hub
{
    public override OnConnected()
    {
        MyController.Associate(Context.ConnectionId);
    }
}

public class MyController
{
    public static ConcurrentDictionary<string, List<string>> cidToList = new ConcurrentDictionary<string, List<string>>();
    public static List<string> mylist = new List<string>();

    public static void Associate(string cid)
    {
        cidToList.TryAdd(cid, mylist);
    }
} 
```

# linux - 使用 shell 从不同的 txt 文件中写入列

> ID：15487019
> 
> 赞同：-1
> 
> 时间：2013-03-18T21:11:04.697
> 
> 标签：linux, shell

我在尝试编写一个 shell 脚本来生成一个 txt 文件时遇到了麻烦，该文件将包含来自一个 txt 文件的一列，以及来自不同 txt 文件的另一列。

有人可以帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:13:04.750

你应该检查`join`命令。看这个[描述](http://linux.about.com/library/cmd/blcmdl1_join.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:13:34.803

如果您需要解析来自不同输入文件的不同列，一种方法是：

```
paste <(cut -d " " -f1 file1) <(cut -d " " -f2 file2) 
```

或使用[awk](/questions/tagged/awk "显示标记为“awk”的问题")：

```
paste <(awk -F, '{print $1}' file1) <(awk -F, '{print $2}' file2) 
```

你的问题有点含糊，所以我假设这些字段由空格 for`cut`和 a `,`in分隔`awk`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T21:14:36.820

假设您要从`file1`和加入整行`file2`，请使用`paste`：

```
% cat file1 
A
B
C
% cat file2 
1
2
3
% paste file1 file2 
A  1
B  2
C  3 
```

现在，如果您在每个文件中都有列（在此示例中由逗号分隔），则加入`file1.col1`and `file2.col2`，其中

```
% cat file1 
A,***
B,***
C,***
% cat file2 
***,1
***,2
***,3 
```

做

```
%paste  <(cut -d "," -f1 file1)  <(cut -d "," -f2 file2)
A  1
B  2
C  3 
```

# python - 在 Python pandas 中自定义 rolling_apply 函数

> ID：15487022
> 
> 赞同：3
> 
> 时间：2013-03-18T21:11:24.147
> 
> 标签：python, group-by, pandas, aggregate, data-analysis

## 设置

我有一个包含三列的 DataFrame：

*   “类别”包含真假，我已经`df.groupby('Category')`按这些值分组。
*   “时间”包含记录值的时间戳（以秒为单位）
*   “值”包含值本身。

在每个时间实例中，记录两个值：一个具有类别“真”，另一个具有类别“假”。

## 滚动申请问题

**在每个类别组**中，我想**计算一个数字并将其存储在每次的列结果中**。结果是时间**与****介于 1 和 3 之间****的值的百分比。`t-60``t`**

完成此操作的最简单方法可能是通过 计算该时间间隔内的值的总数`rolling_count`，然后执行`rolling_apply`以仅计算该时间间隔中介于 1 和 3 之间的值。

到目前为止，这是我的代码：

```
groups = df.groupby(['Category'])
for key, grp in groups:
    grp = grp.reindex(grp['Time']) # reindex by time so we can count with rolling windows
    grp['total'] = pd.rolling_count(grp['Value'], window=60) # count number of values in the last 60 seconds
    grp['in_interval'] = ? ## Need to count number of values where 1<v<3 in the last 60 seconds

    grp['Result'] = grp['in_interval'] / grp['total'] # percentage of values between 1 and 3 in the last 60 seconds 
```

find的正确`rolling_apply()`调用是`grp['in_interval']`什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T21:52:32.477

让我们看一个例子：

```
import pandas as pd
import numpy as np
np.random.seed(1)

def setup(regular=True):
    N = 10
    x = np.arange(N)
    a = np.arange(N)
    b = np.arange(N)

    if regular:
        timestamps = np.linspace(0, 120, N)
    else:
        timestamps = np.random.uniform(0, 120, N)

    df = pd.DataFrame({
        'Category': [True]*N + [False]*N,
        'Time': np.hstack((timestamps, timestamps)),
        'Value': np.hstack((a,b))
        })
    return df

df = setup(regular=False)
df.sort(['Category', 'Time'], inplace=True) 
```

所以 DataFrame`df`看起来像这样：

```
In [4]: df
Out[4]: 
   Category       Time  Value    Result
12    False   0.013725      2  1.000000
15    False  11.080631      5  0.500000
14    False  17.610707      4  0.333333
16    False  22.351225      6  0.250000
13    False  36.279909      3  0.400000
17    False  41.467287      7  0.333333
18    False  47.612097      8  0.285714
10    False  50.042641      0  0.250000
19    False  64.658008      9  0.125000
11    False  86.438939      1  0.333333
2      True   0.013725      2  1.000000
5      True  11.080631      5  0.500000
4      True  17.610707      4  0.333333
6      True  22.351225      6  0.250000
3      True  36.279909      3  0.400000
7      True  41.467287      7  0.333333
8      True  47.612097      8  0.285714
0      True  50.042641      0  0.250000
9      True  64.658008      9  0.125000
1      True  86.438939      1  0.333333 
```

现在，复制@herrfz，让我们定义

```
def between(a, b):
    def between_percentage(series):
        return float(len(series[(a <= series) & (series < b)])) / float(len(series))
    return between_percentage 
```

`between(1,3)`是一个函数，它以 Series 作为输入并返回位于半开区间中的元素的分数`[1,3)`。例如，

```
In [9]: series = pd.Series([1,2,3,4,5])

In [10]: between(1,3)(series)
Out[10]: 0.4 
```

现在我们将使用我们的 DataFrame`df`和 group by `Category`：

```
df.groupby(['Category']) 
```

对于 groupby 对象中的每个组，我们将要应用一个函数：

```
df['Result'] = df.groupby(['Category']).apply(toeach_category) 
```

函数 ,`toeach_category`将一个（子）DataFrame 作为输入，并返回一个 DataFrame 作为输出。整个结果将分配给`df`被调用的新列`Result`。

现在究竟必须`toeach_category`做什么？如果我们这样写`toeach_category`：

```
def toeach_category(subf):
    print(subf) 
```

然后我们看到每个`subf`都是一个 DataFrame，比如这个（什么时候`Category`是假的）：

```
 Category       Time  Value    Result
12    False   0.013725      2  1.000000
15    False  11.080631      5  0.500000
14    False  17.610707      4  0.333333
16    False  22.351225      6  0.250000
13    False  36.279909      3  0.400000
17    False  41.467287      7  0.333333
18    False  47.612097      8  0.285714
10    False  50.042641      0  0.250000
19    False  64.658008      9  0.125000
11    False  86.438939      1  0.333333 
```

我们想要获取 Times 列，并*为每个 time*应用一个函数。这是通过以下方式完成的`applymap`：

```
def toeach_category(subf):
    result = subf[['Time']].applymap(percentage) 
```

该函数`percentage`将时间值作为输入，并返回一个值作为输出。该值将是值在 1 和 3 之间的行的分数。`applymap`非常严格：`percentage`不能接受任何其他参数。

给定一个 time `t`，我们可以使用以下方法从中选择时间在半开区间内的`Value`s ：`subf``(t-60, t]``ix`

```
subf.ix[(t-60 < subf['Time']) & (subf['Time'] <= t), 'Value'] 
```

因此，我们可以`Values`通过应用找到介于 1 和 3 之间的百分比`between(1,3)`：

```
between(1,3)(subf.ix[(t-60 < subf['Time']) & (subf['Time'] <= t), 'Value']) 
```

现在请记住，我们需要一个函数`percentage`作为`t`输入并返回上述表达式作为输出：

```
def percentage(t):
    return between(1,3)(subf.ix[(t-60 < subf['Time']) & (subf['Time'] <= t), 'Value']) 
```

但是请注意，`percentage`取决于`subf`，并且我们不允许将`subf`to`percentage`作为参数传递（同样，因为`applymap`非常严格）。

那么我们如何摆脱这种困境呢？解决方案是定义`percentage`inside `toeach_category`。Python 的作用域规则说，`subf`首先在 Local 作用域中查找裸名称 like，然后是 Enclosure 作用域、Global 作用域，最后是 Builtin 作用域。当`percentage(t)`被调用并且 Python 遇到 时`subf`，Python 首先在 Local 范围内查找 的值`subf`。由于`subf`不是 中的局部变量`percentage`，Python 在函数的封闭范围内查找它`toeach_category`。它在`subf`那里找到。完美的。这正是我们所需要的。

所以现在我们有了我们的功能`toeach_category`：

```
def toeach_category(subf):
    def percentage(t):
        return between(1, 3)(
            subf.ix[(t - 60 < subf['Time']) & (subf['Time'] <= t), 'Value'])
    result = subf[['Time']].applymap(percentage)
    return result 
```

* * *

把这一切放在一起，

```
import pandas as pd
import numpy as np
np.random.seed(1)

def setup(regular=True):
    N = 10
    x = np.arange(N)
    a = np.arange(N)
    b = np.arange(N)

    if regular:
        timestamps = np.linspace(0, 120, N)
    else:
        timestamps = np.random.uniform(0, 120, N)

    df = pd.DataFrame({
        'Category': [True] * N + [False] * N,
        'Time': np.hstack((timestamps, timestamps)),
        'Value': np.hstack((a, b))
    })
    return df

def between(a, b):
    def between_percentage(series):
        return float(len(series[(a <= series) & (series < b)])) / float(len(series))
    return between_percentage

def toeach_category(subf):
    def percentage(t):
        return between(1, 3)(
            subf.ix[(t - 60 < subf['Time']) & (subf['Time'] <= t), 'Value'])
    result = subf[['Time']].applymap(percentage)
    return result

df = setup(regular=False)
df.sort(['Category', 'Time'], inplace=True)
df['Result'] = df.groupby(['Category']).apply(toeach_category)
print(df) 
```

产量

```
 Category       Time  Value    Result
12    False   0.013725      2  1.000000
15    False  11.080631      5  0.500000
14    False  17.610707      4  0.333333
16    False  22.351225      6  0.250000
13    False  36.279909      3  0.200000
17    False  41.467287      7  0.166667
18    False  47.612097      8  0.142857
10    False  50.042641      0  0.125000
19    False  64.658008      9  0.000000
11    False  86.438939      1  0.166667
2      True   0.013725      2  1.000000
5      True  11.080631      5  0.500000
4      True  17.610707      4  0.333333
6      True  22.351225      6  0.250000
3      True  36.279909      3  0.200000
7      True  41.467287      7  0.166667
8      True  47.612097      8  0.142857
0      True  50.042641      0  0.125000
9      True  64.658008      9  0.000000
1      True  86.438939      1  0.166667 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T21:55:56.633

`rolling count`如果我正确理解你的问题陈述，如果你只是为了计算百分比而使用它，你可能会跳过。`rolling_apply`将执行聚合的函数作为参数，即将数组作为输入并返回一个数字作为输出的函数。

考虑到这一点，让我们首先定义一个函数：

```
def between_1_3_perc(x):
    # pandas Series is basically a numpy array, we can do boolean indexing
    return float(len(x[(x > 1) & (x < 3)])) / float(len(x)) 
```

然后使用函数名作为`rolling_apply`for 循环中的参数：

```
grp['Result'] = pd.rolling_apply(grp['Value'], 60, between_1_3_perc) 
```

# ruby-on-rails-3 - Ubuntu 12.10 无法安装 pg gem？

> ID：15487026
> 
> 赞同：1
> 
> 时间：2013-03-18T21:11:40.493
> 
> 标签：ruby-on-rails-3, ubuntu, rvm, pg

我已经阅读了我能找到的每一篇文章，但尽管尝试了各种建议，但似乎还是有问题。

我在 Ubuntu 12.10 上使用 RVM。我所有其他的 gem 都安装得很好，但是 pg gem 失败了：

```
Can't find the PostgreSQL client library (libpq) 
```

我正在使用此处描述的 postgresql 存储库：[http ://wiki.postgresql.org/wiki/Apt](http://wiki.postgresql.org/wiki/Apt)

我使用 apt-get 安装了以下内容：

postgresql-9.1
postgresql-client-9.1
postgresql-server-dev-9.1
libpq-dev
build-essential
pgadmin3

这是今天刚刚加载和更新的 Ubuntu 12.10 的全新安装。

我通过 RVM 安装了 ruby​​ 1.9.3-p392。

pg_config 输出：

```
 BINDIR = /usr/lib/postgresql/9.1/bin
DOCDIR = /usr/share/doc/postgresql-doc-9.1
HTMLDIR = /usr/share/doc/postgresql-doc-9.1
INCLUDEDIR = /usr/include/postgresql
PKGINCLUDEDIR = /usr/include/postgresql
INCLUDEDIR-SERVER = /usr/include/postgresql/9.1/server
LIBDIR = /usr/lib
PKGLIBDIR = /usr/lib/postgresql/9.1/lib
LOCALEDIR = /usr/share/locale
MANDIR = /usr/share/postgresql/9.1/man
SHAREDIR = /usr/share/postgresql/9.1
SYSCONFDIR = /etc/postgresql-common
PGXS = /usr/lib/postgresql/9.1/lib/pgxs/src/makefiles/pgxs.mk
CONFIGURE = '--with-tcl' '--with-perl' '--with-python' '--with-pam' '--with-krb5' '--with-gssapi' '--with-openssl' '--with-libxml' '--with-libxslt' '--with-ldap' '--with-tclconfig=/usr/lib/tcl8.5' '--with-tkconfig=/usr/lib/tk8.5' '--with-includes=/usr/include/tcl8.5' 'PYTHON=/usr/bin/python' '--mandir=/usr/share/postgresql/9.1/man' '--docdir=/usr/share/doc/postgresql-doc-9.1' '--sysconfdir=/etc/postgresql-common' '--datarootdir=/usr/share/' '--datadir=/usr/share/postgresql/9.1' '--bindir=/usr/lib/postgresql/9.1/bin' '--libdir=/usr/lib/' '--libexecdir=/usr/lib/postgresql/' '--includedir=/usr/include/postgresql/' '--enable-nls' '--enable-integer-datetimes' '--enable-thread-safety' '--enable-debug' '--disable-rpath' '--with-ossp-uuid' '--with-gnu-ld' '--with-pgport=5432' '--with-system-tzdata=/usr/share/zoneinfo' 'CFLAGS=-g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -fPIC -pie' 'CPPFLAGS=-D_FORTIFY_SOURCE=2 -DLINUX_OOM_ADJ=0' 'LDFLAGS=-Wl,-Bsymbolic-functions -Wl,-z,relro -Wl,-z,now -Wl,--as-needed'
CC = gcc
CPPFLAGS = -D_FORTIFY_SOURCE=2 -DLINUX_OOM_ADJ=0 -D_GNU_SOURCE -I/usr/include/libxml2 -I/usr/include/tcl8.5
CFLAGS = -g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -fPIC -pie -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Wendif-labels -Wformat-security -fno-strict-aliasing -fwrapv -fexcess-precision=standard -g
CFLAGS_SL = -fpic
LDFLAGS = -Wl,-Bsymbolic-functions -Wl,-z,relro -Wl,-z,now -Wl,--as-needed -L/usr/lib -Wl,--as-needed
LDFLAGS_EX = 
LDFLAGS_SL = 
LIBS = -lpgport -lxslt -lxml2 -lpam -lssl -lcrypto -lkrb5 -lcom_err -lgssapi_krb5 -lz -ledit -lcrypt -ldl -lm 
VERSION = PostgreSQL 9.1.8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T19:31:44.057

尝试安装 PostgreSQL 开发头文件：

sudo apt-get install libpq-dev

### 

另请参阅 [如何在 Ubuntu 上安装 PostgreSQL 的 pg gem？](https://stackoverflow.com/questions/3116015/how-to-install-gem-pg-on-ubuntuXX)

# ios - 以下在同一通知有效负载中具有正文和 loc-args 的结构是否有效？

> ID：15487027
> 
> 赞同：1
> 
> 时间：2013-03-18T21:11:41.543
> 
> 标签：ios, push-notification, apple-push-notifications

如果您在同一个有效负载中包含正文和 loc-args 和 loc-key，以下有效负载通知会导致任何问题吗？

```
{"aps":{"alert":{"body" : "Bob wants to play poker", "loc-key":"general","loc-args":["Test DEFAULT."]},"badge":1,"sound":"default"}} 
```

我设置它的原因是这样的。是不是我不确定在应用程序期间是否会处理仅包含正文的通知，因此它将使用本地化的 loc-args 和可本地化字符串中的以下键值：

```
"general"="%@"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-01-09T16:30:51.603

我做了几个测试。

例如发送

```
{
    "aps": {
        "alert": {
            "body": "hello world!",
            "loc-args": ["andy", "my text"],
            "loc-key": "comment"
        }
    },
    "sound": "default",
    "extras": {}
} 
```

在我的设备上，我在 loc 文件中有一个字符串，如下所示：

```
"comment" = "%@ has comment %@"; 
```

所以我收到的通知是：

```
Andy has comment my text 
```

现在我发送了这样的新通知：

```
 {
        "aps": {
            "alert": {
                "body": "hello world!",
                "loc-args": ["andy", "my text"],
                "loc-key": "does_not_exist"
            }
        },
        "sound": "default",
        "extras": {}
    } 
```

使用不存在的 loc-key，我收到的通知是

```
does_not_exist 
```

正如 kadam 在他的回答中所说：

> 最终，可以从文档中推断出 body 和 loc-key 应该用于排他或关系。要么是其中的一个，要么是另一个，但不是两者兼而有之。
> 
> 块引用

根据[这篇文章](https://stackoverflow.com/a/16057160/5021766)，如果密钥丢失，则使用密钥。这就是为什么“身体”总是被忽略，要么是一个，要么是另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T19:01:10.753

有两个选项可以本地化嵌入在推送通知中的警报消息。一种是在服务器上进行本地化，并将本地化消息作为`alert`键的字符串值发送。例如：

`{"alert": "A localized sentence."}`

或者，如果您还想设置启动图像和/或让警报的查看按钮读取“查看”以外的内容，则可以将字符串值替换`alert`为字典。在这种情况下，字符串值应该是`body`字典中的值。例如：

`{'alert': {'body: "A localized sentence.", action-loc-key: "...", launch-image: "..."' }}`

[文档](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW9)警告说，如果您只有`body`字典中的键，请不要使用字典。而是将 的值设置`body`为 的字符串值`alert`。

另一种选择是使用`loc-key`, `loc-args`pair 并在设备上进行本地化。

虽然我还没有验证如果两者都出现在字典中，那么 iOS 默认是哪一个`body`，但我猜它会选择一个而忽略另一个。有权访问工作推送通知开发设置的人可以验证是哪一个。`loc-key``alert`

[最终，人们可以从文档](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW9)中推断出`body`并且`loc-key`应该在排他或关系中使用。要么是其中的一个，要么是另一个，但不是两者兼而有之。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-22T05:21:31.750

我还不到 50 岁，所以我无法发表评论，只能跟进@kadam 的回答，仅供将来访问此问题的人参考。

> 虽然我还没有验证如果 body 和 loc-key 都出现在 alert 字典中，iOS 默认是哪一个，但我猜它会选择一个而忽略另一个。有权访问工作推送通知开发设置的人可以验证是哪一个。

我已经尝试过了，如果它在应用程序本身上有一个值，它默认为 loc-key 的值。如果没有，那么它使用 body 的值。

# vb.net - 循环浏览表单上的多个浏览器控件？

> ID：15487031
> 
> 赞同：1
> 
> 时间：2013-03-18T21:12:01.907
> 
> 标签：vb.net

我了解如何遍历表单上的常规控件。例如，如果我想将表单上所有面板的背景颜色更改为红色，我会这样做......

```
 Dim IndividualControl As Control
    For Each IndividualControl In Me.Controls
        If (TypeOf IndividualControl Is Panel) Then
            IndividualControl.BackColor = Color.Red
        End If
    Next IndividualControl 
```

但是假设我不想更改表单上所有面板的属性，而是想更改表单上所有*Web 浏览器*控件的属性（不要问为什么我在一个表单上有多个 webbrowser 控件实例- 这是一个很长的故事，这正是项目所需要的:)

因此，例如，如果我想将表单上所有 WebBrowser 控件的“ScriptErrorsSuppressed”属性更改为 TRUE，我假设以下代码可以工作，但它不起作用（它只是返回一个错误，指出“ScriptErrorsSuppressed 不是System.Windows.Forms.Controls 的成员”。

```
 Dim IndividualControl As Control
    For Each IndividualControl In Me.Controls
        If (TypeOf IndividualControl Is WebBrowser) Then
            IndividualControl.ScriptErrorsSuppressed = True
        End If
    Next IndividualControl 
```

所以......有什么想法可以解决这个问题吗？使用 VB2010 / Winforms

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:38:45.963

您得到的错误非常有意义，因为您已声明`IndividualControl`为 type `Control`，并且 type 的对象`Control`没有`ScriptErrorsSuppressed`成员。

现在，您可能会对自己说，“我知道它确实如此，因为我知道这`IndividualControl`是一个类型的对象`WebBrowser`”。是的，*你*知道它确实如此，但编译器不知道这一点。`TypeOf`运算符只检查对象的类型并返回结果。它实际上并没有*将*对象转换为新类型，也没有将对象*重新声明*为新类型的对象。

事实上，大多数时候你使用`TypeOf`操作符，是为了检查一个强制转换是否合适。你已经有了那个部分，一旦你知道演员表会成功，你就忘了做实际的演员表。那么，修复很简单：

```
Dim IndividualControl As Control
For Each IndividualControl In Me.Controls
    If (TypeOf IndividualControl Is WebBrowser) Then
        ' We know that IndividualControl is of type WebBrowser now, so we can
        ' cast it directly to that type and be confident it will succeed.
        DirectCast(IndividualControl, WebBrowser).ScriptErrorsSuppressed = True
    End If
Next IndividualControl 
```

[请注意，我们在`DirectCast`这里使用了 VB.NET 运算符，这是可以接受的，因为我们已经使用该`TypeOf`运算符验证了强制转换是有效的。您可以将运算符替换为`DirectCast`运算`TryCast`符，然后省略`TypeOf`测试。代码将以基本相同的方式执行；选择对您的方案最有意义的一个。有关 VB.NET 中强制转换运算符的更多信息，请参阅[此问题](https://stackoverflow.com/questions/40764/how-should-i-cast-in-vb-net)。特别是，我`DirectCast`可以提请您注意[这篇内容丰富的帖子](https://stackoverflow.com/questions/102084/hidden-features-of-vb-net#103285)，我非常同意。]

好吧，你可能会说，我知道它是如何工作的，我知道如何修复我的代码。但是——为什么当我第一次尝试更改面板的背景颜色时它会起作用？我使用了完全相同的代码！

确实你做到了。问题是该`BackColor`属性是`Control`类的属性，它是`IndividualControl`. 编译器检查它`IndividualControl`是否有一个`BackColor`属性，看到它有，并接受你的代码。它*没有*看到它有一个`ScriptErrorsSuppressed`属性，所以它拒绝了那个代码。换句话说，该`BackColor`属性不是类型所*独有*的`Panel`，因此您不需要在那里执行强制转换。

# hyperlink - 在框架目标中打开链接 IE10 Start 应用程序 for Windows 8

> ID：15487033
> 
> 赞同：0
> 
> 时间：2013-03-18T21:12:02.993
> 
> 标签：hyperlink, frame, target, internet-explorer-10

我有一个页面显示在两个框架中

```
<frameset cols="140,*">
    <frame src="resources/nav-bar.html" id="nav-bar" frameborder=0 scrolling="no" noresize="noresize" />
    <frame src="resources/home.html" id="main" frameborder=0 scrolling="yes" noresize="noresize" />
</frameset> 
```

然后在名为*nav-bar*的框架中，我有指向*main*的链接，如下所示：

```
<a href="personal_details.html" target="main">Personal details</a> 
```

在 Google Chrome 和 Safari 中，这可以正常工作，但适用于 Windows 8 的 IE10 从“开始”运行时会在新选项卡中打开链接。不过，如果我从桌面运行 IE10，我就没有这样的问题。如何解决这个问题？提前致谢。

埃米利奥！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-23T04:19:20.390

这是一个可悲的小问题，显然微软已经意识到了这一点。（例如，请参见[http://support.microsoft.com/kb/2793437](http://support.microsoft.com/kb/2793437)。）更让人难过的是它似乎只出现在 Windows 8 上，而在 Windows 7 上运行的 IE10 则不会出现这个问题。我设法通过替换我用来导航的页面的标记来解决它，在你的例子中是*resources/nav-bar.html*文件。我变了：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.or/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Blah blah</title>
<link rel="stylesheet" href="./some.css" type="text/css" media="screen" />
</head>
... 
```

至

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Blah blah</title>
<link rel="stylesheet" href="./some.css" type="text/css" media="screen" />
</head>
... 
```

搏一搏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:16:48.650

尝试使用属性名称。

```
name="main" 
```

# php - 允许用户添加/删除/订购字段并记录在数据库中

> ID：15487041
> 
> 赞同：0
> 
> 时间：2013-03-18T21:12:27.920
> 
> 标签：php, jquery, mysql, jquery-ui-sortable

我正在尝试向我的网站添加一些功能，允许用户按顺序添加/删除/放置某些字段。

例如：有 5 个段落，我希望用户能够按照他们喜欢的顺序放置这些段落，如果他们觉得它们没有用，也可以删除一些。

我知道我将不得不为此使用 jQuery（可排序），但需要一些关于如何将此订单/选定元素存储在数据库中的建议（使用 mysql 和 php）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:24:10.933

您可以使用 JavaScript 中的二维数组与 MySQL 数据库中的索引字段相结合，如下所示：

```
var list_index = new Array();
list_index[0] = [245, 1, 1, 'BMW'];
list_index[1] = [256, 2, 2, 'Porsche']; 
```

第一个键是条目的 MySQL 索引。第二个索引键表示 HTML（实时）列表上的索引。第三个索引键代表数据库中的索引键。因此，当您将保时捷交换到列表的顶部时，它也可能看起来像这样：

```
list_index[0] = [256, 2, 1, 'BMW'];
list_index[1] = [245, 1, 2, 'Porsche']; 
```

牢记这些值，您可以使用 jQuery 将更新的索引键发布到您的 PHP 代码并在数据库中更新它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:26:42.710

来到我的第一件事是有一个表“偏好”。如果您的网站元素有限，您可以使用定义所有元素的列和一个页面来管理该用户的偏好。

如果您的网站很大并且总是在变化，您可能不得不考虑在一张表中定义属性、值和效果，并在首选项中存储 aples 的属性、值和元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T21:22:40.847

使用阿贾克斯。在数据库内部创建表 UsersParagraphs - 1 行将反映特定用户的段落顺序号。在您的网站上，您可以使用表格段落中的数据动态创建可移动的 div（带段落）。用户更改 div 顺序后，您可以将此操作反映在表格段落中。

# c# - 带计时器的自托管 WCF 服务

> ID：15487046
> 
> 赞同：0
> 
> 时间：2013-03-18T21:12:56.233
> 
> 标签：c#, .net, wcf

我正在按照[此](http://msdn.microsoft.com/en-us/library/ms731758%28v=vs.90%29.aspx)示例创建自托管 WCF 服务。理想情况下，如果某个值在数据库中更新，我希望服务与计时器连接每半小时检查一次，如果是，服务将执行一些任务，否则将每半小时检查一次。我在网上读到过，在 IIS 托管的 WCF 中使用计时器不是一个好主意，在自托管的 wcf 服务上使用它怎么样？有什么例子吗？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T21:17:44.423

我认为对您来说更好的选择是创建一个简单的控制台应用程序，如果值更新则执行您的任务，然后在 Windows 中创建一个计划任务，每半小时运行一次此控制台应用程序。这样，您可以让 Windows 管理计时部分，您只需编写检查数据库并在必要时更新它的代码。

不确定您运行的是哪个版本的 Windows，但您可以从控制面板访问计划任务。

[在 XP 上创建计划任务](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDMQFjAA&url=http://support.microsoft.com/kb/308569&ei=EoRHUbP5DIm4igLshoDADw&usg=AFQjCNHQ74G0LntAjxkCooH8PB4cDbf5cQ&bvm=bv.43828540,d.cGE)

[在 Windows 7 上创建计划任务](http://windows.microsoft.com/en-us/windows7/schedule-a-task)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:20:09.100

The reason a timer in a IIS hosted WCF service is "not a good idea" is a IIS service has a much different lifetime than a self hosted service. See this [SO question and answer](https://stackoverflow.com/questions/1037985/what-is-the-lifecycle-of-an-iis-hosted-http-wcf-service) for some details and this [MSDN article for even more details](http://msdn.microsoft.com/en-us/library/ms730158.aspx).

Basically a WCF service can be "shut down" while being hosted inside IIS if no-one has connected to it within a timeout period. If you need regular periodic maintenance like you are describing you will need to use a self hosted service and have that service start a timer up that fires every half hour in it's `OnStart()` call.

# select - IOCP 和非阻塞 IO

> ID：15487047
> 
> 赞同：1
> 
> 时间：2013-03-18T21:12:59.123
> 
> 标签：select, iocp

我有使用*非阻塞发送、recv*（在 Windows 中）的 3rd 方库，因此我可以将*libevent*（或*libev*）与**select**后端一起使用到事件循环。有没有简单的方法来使用**IOCP**后端（*libevent2*，*libuv*）？因为在不同的手册中，我必须使用带有一些附加参数的*WSASend、WSARecv*函数（指向 OVERLAPPED 结构的指针）。如何在不重写其代码的情况下将**IOCP后端事件循环与此 3rd 方库一起使用？**还是不是不可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-20T08:53:42.667

这是不可能的。

至少：

*   您需要将使用的套接字与要处理完成的 IOCP 相关联
*   您需要使用不同的标志创建套接字。

其中任何一个都可能需要您更改库代码。

# package - 转到包/文件位置

> ID：15487052
> 
> 赞同：0
> 
> 时间：2013-03-18T21:13:13.973
> 
> 标签：package, go

从 go 文档的外观来看，它们使您似乎必须将正在处理的代码放在 $GOPATH 下——对吗？

我想在我的 ~/Documents 下的目录中设置一个测试项目，但是每次我运行时`go install example/newmath`（就像在测试示例中一样）它都会显示以下内容 -

```
λ MacBook-Air src → go install example/newmath
warning: GOPATH set to GOROOT (/usr/local/go) has no effect
can't load package: package example/newmath: import "example/newmath": cannot find package 
```

这是否意味着我需要重置我的 $GOPATH/$GOROOT？我迷路了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T21:30:43.217

一般情况下无需设置`GOROOT`。`GOPATH`, OTOH, 应该设置（**和**导出）。

我建议从

```
 export GOPATH=$HOME 
```

然后只需将一个包`import "whatever"`放入`$GOPATH/src/whatever`.

`GOPATH`当您习惯了使用 Go 构建系统 ( `go {build, install}`)的工作方式时，您可以稍后根据您的需求进行优化。一个甚至可以有多个项目`$GOPATH`，但我真的不认为一开始会担心，有时甚至不会。

# sql - 点击流关键字维度

> ID：15487063
> 
> 赞同：2
> 
> 时间：2013-03-18T21:14:02.350
> 
> 标签：sql, sql-server, data-warehouse, dimension

我目前正在尝试确定如何构建关键字维度表。我们正在跟踪网站对我们网站的访问，并希望能够找到用于通过搜索引擎搜索网站的最常用关键字以及访问网站期间使用的任何搜索词（价格 > 100 美元，评论 > 4 星等）。由于关键字是完全动态的，并且可以用于无数种组合，因此我很难确定如何存储这些关键字。我有一个综合浏览量事实表，其中包含每次查看页面时的记录。我从中提取的来源包括分隔列表中的所有搜索词，我可以用正则表达式解析，我只是不知道如何将它存储在数据库中，因为关键字的数量可能与综合浏览量相差很大浏览量。我认为这可能更适合试图将其塞入 MSSQL 表的 NOSQL 解决方案，但我不知道。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:20:29.607

根据您想要分析数据的方式，有一些解决方案。

但是对于您可能正在分析的数据量，我只是创建一个使用事实的 PK 来存储每个关键字的表。

```
FACT_PAGEVIEW_ID bigint -- Surrogate key of fact table. Or natural key if you don't have a surrogate.
KEYWORD varchar(255) -- or whatever max len the keywords are
VALUE varchar(255) 
```

此表的粒度为每个 ID/关键字组合 1 行。如果您在查询字符串中允许多次使用相同的关键字，您可能还必须添加值。

这使您可以按综合浏览量对关键字进行分组，或者从综合浏览量事实开始，对其进行过滤，然后加入其中以识别关键字。

另一种选择是关键字维度和带有“关键字组”的多对多桥接表，但由于可以使用任意数量的组合，这可能是更快的方法，并且可能会达到 90%。大多数问题，例如“最常使用哪些关键字组合”和“前 10% 的用户群最常使用哪些关键字”，都可以用这种结构来回答。

# c# - LINQ 计算集合中的多个值

> ID：15487066
> 
> 赞同：2
> 
> 时间：2013-03-18T21:14:08.237
> 
> 标签：c#, linq

在 SQL 中，我想要完成的是

```
SELECT
            SUM(CASE WHEN Kendo=1 THEN 1 ELSE 0 END) as KendoCount,
            SUM(CASE WHEN Icenium=1 THEN 1 ELSE 0 END) as IceniumCount
FROM
            Contacts 
```

**我想在使用 LINQ 的 C# 程序中执行此操作。**

联系人是一个列表，其中联系人有许多布尔值，例如 Kendo 和 Icenium，我需要知道每个布尔值有多少是真的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T21:34:11.463

至少对于 LINQ to SQL，count 函数的缺点是每个 .count 方法需要单独的 SQL 请求。我怀疑 Jessie 试图对表进行一次扫描，而不是对每个谓词进行多次扫描。根据您创建的逻辑和列数，这可能效果不佳。更接近原始请求，尝试将 sum 与三元 if 子句一起使用（来自 Northwind）：

```
from e in Employees
group e by ""  into g
select new { 
    isUs = g.Sum (x =>  x.Country == "USA" ? 1 : 0),
    NotUs = g.Sum (x =>  x.Country != "USA" ? 0 : 1)
} 
```

LINQ to SQL 生成以下内容（带有其他 ORM 的 YMMV）：

```
 SELECT SUM(
    (CASE 
        WHEN [t1].[Country] = @p1 THEN @p2
        ELSE @p3
     END)) AS [isUs], SUM(
    (CASE 
        WHEN [t1].[Country] <> @p4 THEN @p5
        ELSE @p6
     END)) AS [NotUs]
FROM (
    SELECT @p0 AS [value], [t0].[Country]
    FROM [Employees] AS [t0]
    ) AS [t1]
GROUP BY [t1].[value] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T21:17:06.710

```
var KendoCount = db.Contacts.Where(x => x.Kendo).Count();
var IceniumCount = db.Contacts.Where(x => x.Icenium).Count(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T21:18:01.503

我会这样做作为两个单独的查询：

```
int kendoCount = db.Contacts.Count(c => c.Kendo);
int iceniumCount = db.Contacts.Count(c => c.Icenium); 
```

鉴于这些查询将自动转换为优化的 SQL，这可能在速度上与任何查询选项相似甚至可能更快，并且更易于理解。

* * *

请注意，如果这是针对实体框架的，则需要将其编写为：

```
int kendoCount = db.Contacts.Where(c => c.Kendo).Count();
int iceniumCount = db.Contacts.Where(c => c.Icenium).Count(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T04:18:59.603

```
var result = Contacts
.GroupBy(c => new
{
    ID = "",
})
.Select(c => new
{
    KendoCount = c.Sum(k => k.Kendo ? 1 : 0),
    IceniumCount = c.Sum(k => k.Icenium ? 1: 0),
})
.ToArray() 
```

# jquery - 使用 .before(); 之后（）; 包裹元素

> ID：15487067
> 
> 赞同：5
> 
> 时间：2013-03-18T21:14:08.073
> 
> 标签：jquery

我正在尝试包装`<label>`、`<input type="text" />`和`<select>`元素，`<div class="formItem"></div>`以修复我无法直接编辑的表单上的某些位置。出于某种原因，当我尝试使用以下代码时：

```
$("label").before("<div class=\"formItem\">");
$("input[type=text]").after("</div>");
$("select").after("</div>"); 
```

它不起作用。它只是`<div class="formItem"></div>`在每个`<label>`对我没有帮助的之前添加。

我已经看过了，`.wrap();`但不清楚如何使用它来包装多个元素，就像我正在尝试做的那样。这是 HTML 标记的示例：

```
<label>Text Box</label>
<input type="text" name="Text Box" />

<label>Select Menu</label>
<select name="Select Menu">
    <option>Example</option>
</select> 
```

如果重要的话，大约有 10 个集合、9 个文本框和 1 个选择框。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T21:16:24.203

这不是 jQuery API 的工作方式。完全没有。

[`.before()`：](http://api.jquery.com/before/)

> 在匹配元素集中的每个元素之前插入由参数指定的内容。

[`.after()`：](http://api.jquery.com/after/)

> 在匹配元素集中的每个元素之后插入由参数指定的内容。

* * *

不要考虑打开和关闭标签。考虑实际元素。

您可能正在寻找[`.wrapAll()`](http://api.jquery.com/wrapAll/).

```
$('label').each(function () {
    $(this).next('input, select').andSelf().wrapAll('<div class="formItem"/>');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:18:22.923

使用 jquery，您只能添加完整的元素。也就是说，它们必须包含结束标签。这是因为你真正在做的是调用`document.createElement('div')`. 所以要解决这个问题，尽可能接近原始代码，只需使用：

```
var newEl = $("select").after("<div class=\"formItem\"></div>");
$("input[type=text]").appendTo(newEl);
$("select").appendTo(newEl); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T21:18:43.353

试试这个：

```
$('label').next().andSelf().wrap("<div class=\"formItem\">"); 
```

它将标签元素和它的下一个兄弟元素包含在一个 div.formItem 中。

# php - CodeIgniter 框架/多个 MySQL 表

> ID：15487077
> 
> 赞同：0
> 
> 时间：2013-03-18T21:14:51.570
> 
> 标签：php, mysql, codeigniter

**第 1 部分（MySQL 部分）**

我正在使用 CI 和 MySQL（同一台服务器）。我从来没有使用过多个表一起工作，我不确定我是否需要设置关系或者 PHP 是否会为我说话。

这是我要完成的工作：

表：项目（此表是存储每个项目的位置）

表：用户（用户 ID、密码、帐户信息等）

表：集合（这个表会说用户 x 有 # 数量的项目 x）

我已经设置了 Items 和 Users 表，但我不知道如何处理集合表。

**第 2 部分（CI/PHP 部分）**

一旦我完成了 SQL 设置，让 PHP 在 Collection 中添加/删除/更新列表并根据某人的集合中的内容显示相关信息的最佳方法是什么

前任

项目字段（id、名称、值）

用户字段（id、姓名、密码 MD5、上次登录等）

集合字段（id、itemid、userid、amount）

我希望能够显示当前登录用户的所有项目，登录用户变量来自这里

```
function account_info($username)
    {
        $this->db->where('username', $username);
        $query = $this->db->get('user');

        $result = $query->row();

        return array(
            'id' => $result->id,
            'firstname' => $result->firstname,
            'lastname' => $result->lastname,
            'email' => $result->email,
            'joindate' => $result->joindate
            );

    } 
```

假设我的唯一用户 ID 是 1，并且 Collection 表中有以下几行：

编号 | 用户名 | 项目编号 | 数量

1 | 1 | 23 | 1

2 | 1 | 25 | 3

3 | 2 | 20 | 5

4 | 1 | 24 | 1

我希望它只返回第 1、2、4 行以及 itemid 23、25 和 24 的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:23:13.803

```
$query='SELECT * 
FROM Collections 
INNER JOIN Items ON Collections.itemid=Items.id 
WHERE userid=?';
$params=array();
$params[]=$user_id;

$result=$this->db->query($query,$params);
$result=$result->result_array();
//$result=$result->row_array(); // for single row

print_r($result); //for your debugging
return $result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:03:09.987

解决此问题的最佳方法是在 SQL 查询中使用连接语句。我们可以写出一个 SQL 查询，但是 CodeIgniter 的活动记录类将帮助我们简化这个（参见[http://ellislab.com/codeigniter/user-guide/database/active_record.html](http://ellislab.com/codeigniter/user-guide/database/active_record.html)）。在您的模型中，您可以编写类似于以下内容的查询：

```
$this->db->select('*');
$this->db->from('Collections');
$this->db->join('Items', 'Collections.itemid = Company.id', 'inner'); 
```

您还可以调整它以选择您想要的确切数据，就像任何 SQL 查询一样：

```
$this->db->select('Collections.userid, Collections.amount, Items.name, Items.value'); 
```

要选择特定个人的数据（例如：ID 为“1”的用户），您可以使用：

```
$this->db->where('Collections.userid', '1'); 
```

作为最终结果，您的完整查询可能类似于：

```
$this->db->select('*');
$this->db->from('Collections');
$this->db->join('Items', 'Collections.itemid = Company.id', 'inner');
$this->db->where('Collections.userid', '1');
$query = $this->db->get();
return $query->result_array(); 
```

您还可以添加左、右、外、内、左外或右外作为`$this->db->join()`函数的第三个参数，以允许左连接、右连接等。

我建议尽可能在您的 CodeIgniter 应用程序中使用 Active Record 类。它将帮助您的查询保持干净、有条理和可读性。绝对看看它：[http ://ellislab.com/codeigniter/user-guide/database/active_record.html](http://ellislab.com/codeigniter/user-guide/database/active_record.html)

# java - 当数据存在时，http 响应使用分块编码

> ID：15487081
> 
> 赞同：2
> 
> 时间：2013-03-18T21:15:06.213
> 
> 标签：java, google-app-engine, http, networking

我有一个网络服务，当被调用时，可能会或可能不会将正文与响应一起发回。出于某种原因，只要没有数据，就会出现 Content-Length 标头，但是当我发回正文时，会出现 Transfer-Encoding: Chunked 标头而不是 Content-Length 标头。实际上，发送的请求是分块的，但我不一定需要响应，因为我们希望有效负载尽可能小。

如以下代码所示，我尝试在数据发送回时强制设置内容长度，但即便如此，响应仍然没有 Content-Length 标头。我已经读过 Transfer-Encoding: Chunked 标头的存在将覆盖任何 CContent-Length 标头，但我无法弄清楚如何删除 Transfer-Encoding 标头，甚至不知道为什么它首先存在。

这是我对新请求的回调：

```
@Override
public void doGet(HttpServletRequest req, HttpServletResponse resp)
    throws ServletException, IOException {

    resp.setStatus(200);

    String mac = req.getHeader("x-kcid");
    String cmd = getCache(mac);

    if (cmd != null) {
        writeToStream(resp, cmd, "text/plain");
        clearCache(mac);
    }
} 
```

这是实际写入响应的方法：

```
private static void writeToStream(HttpServletResponse resp, String msg, String contentType) throws IOException {        
    resp.setContentType(contentType);
    resp.setContentLength(msg.getBytes().length);
    resp.getWriter().write(msg);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:31:28.700

GAE[不允许](https://developers.google.com/appengine/docs/java/runtime#Responses)设置`Transfer-Encoding`or`Content-Length`标头。（该标头和其他一些标头被**忽略并**从响应中删除）。

# javascript - 在运行时删除 Node.js 中的特定映射路由会删除静态映射？

> ID：15487084
> 
> 赞同：2
> 
> 时间：2013-03-18T21:15:10.653
> 
> 标签：javascript, node.js, express

根据[这个问题的答案](https://stackoverflow.com/a/14034355/362536)，我编写了这个函数来删除实时站点上的路由（使用 Express 和 Node）。

```
function deleteRoute(url) {

 for (var i = app.routes.get.length - 1; i >= 0; i--) {
   if (app.routes.get[i].path === "/" + url) {
     console.log(app.routes.get[i]);
     delete app.routes.get[i];
     console.log(app.routes.get)
   }
 }
} 
```

但是，当我运行它时，它似乎也删除了到我所有静态页面的路由，这些静态页面在启动时声明如下：

```
 app.use(express.static(__dirname + '/components')); 
```

我已经为此挣扎了一段时间，似乎无法掌握它。有人可以帮忙吗？每当我前后记录 app.routes.get 时，看起来操作都正确完成了。

具体来说，这是我在删除路由后重新加载任何静态页面时遇到的错误：

```
 TypeError: Cannot call method 'match' of undefined 
```

这是删除前的 app.routes：

```
 { get: 
  [ { path: '/',
   method: 'get',
   callbacks: [Object],
   keys: [],
   regexp: /^\/\/?$/i,
   params: [] },
 { path: '/index.html',
   method: 'get',
   callbacks: [Object],
   keys: [],
   regexp: /^\/index\.html\/?$/i,
   params: [] },
 { path: '/how_it_works.html',
   method: 'get',
   callbacks: [Object],
   keys: [],
   regexp: /^\/how_it_works\.html\/?$/i,
   params: [] },
 { path: '/about.html',
   method: 'get',
   callbacks: [Object],
   keys: [],
   regexp: /^\/about\.html\/?$/i,
   params: [] },
 { path: '/contribute.html',
   method: 'get',
   callbacks: [Object],
   keys: [],
   regexp: /^\/contribute\.html\/?$/i,
   params: [] },
 { path: '/contact.html',
   method: 'get',
   callbacks: [Object],
   keys: [],
   regexp: /^\/contact\.html\/?$/i,
   params: [] },
 { path: '/a.html',
   method: 'get',
   callbacks: [Object],
   keys: [],
   regexp: /^\/a\.html\/?$/i,
   params: [] } ],
post: 
 [ { path: '/admin-save.json',
   method: 'post',
   callbacks: [Object],
   keys: [],
   regexp: /^\/admin-save\.json\/?$/i,
   params: [] },
 { path: '/page-edit.json',
   method: 'post',
   callbacks: [Object],
   keys: [],
   regexp: /^\/page-edit\.json\/?$/i,
   params: [] },
 { path: '/get-pages.json',
   method: 'post',
   callbacks: [Object],
   keys: [],
   regexp: /^\/get-pages\.json\/?$/i,
   params: [] },
 { path: '/admin-delete.json',
   method: 'post',
   callbacks: [Object],
   keys: [],
   regexp: /^\/admin-delete\.json\/?$/i,
   params: [] } ] } 
```

之后是这样的：

```
{ get: 
 [ { path: '/',
   method: 'get',
   callbacks: [Object],
   keys: [],
   regexp: /^\/\/?$/i,
   params: [] },
 { path: '/index.html',
   method: 'get',
   callbacks: [Object],
   keys: [],
   regexp: /^\/index\.html\/?$/i,
   params: [] },
 { path: '/how_it_works.html',
   method: 'get',
   callbacks: [Object],
   keys: [],
   regexp: /^\/how_it_works\.html\/?$/i,
   params: [] },
 { path: '/about.html',
   method: 'get',
   callbacks: [Object],
   keys: [],
   regexp: /^\/about\.html\/?$/i,
   params: [] },
 { path: '/contribute.html',
   method: 'get',
   callbacks: [Object],
   keys: [],
   regexp: /^\/contribute\.html\/?$/i,
   params: [] },
 { path: '/contact.html',
   method: 'get',
   callbacks: [Object],
   keys: [],
   regexp: /^\/contact\.html\/?$/i,
   params: [] },
  ],
 post: 
  [ { path: '/admin-save.json',
   method: 'post',
   callbacks: [Object],
   keys: [],
   regexp: /^\/admin-save\.json\/?$/i,
   params: [] },
 { path: '/page-edit.json',
   method: 'post',
   callbacks: [Object],
   keys: [],
   regexp: /^\/page-edit\.json\/?$/i,
   params: [] },
 { path: '/get-pages.json',
   method: 'post',
   callbacks: [Object],
   keys: [],
   regexp: /^\/get-pages\.json\/?$/i,
   params: [] },
 { path: '/admin-delete.json',
   method: 'post',
   callbacks: [Object],
   keys: [],
   regexp: /^\/admin-delete\.json\/?$/i,
   params: [] } ] } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T03:40:30.003

`delete`用于从对象中删除键，而不是从数组中删除条目。通过调用`delete`，您实际上是将该数组位置的值设置为`undefined`，因此 Express 在查看路由时仍会尝试处理该路由。

请注意您之前的输入：

```
 { path: '/contact.html',
   method: 'get',
   callbacks: [Object],
   keys: [],
   regexp: /^\/contact\.html\/?$/i,
   params: [] },
 { path: '/a.html',
   method: 'get',
   callbacks: [Object],
   keys: [],
   regexp: /^\/a\.html\/?$/i,
   params: [] } ], 
```

与之后：

```
 { path: '/contact.html',
   method: 'get',
   callbacks: [Object],
   keys: [],
   regexp: /^\/contact\.html\/?$/i,
   params: [] },
  ], 
```

`,`您删除了“a.html”路径，但请注意在对象之后仍有 a `contact.html`。那是因为数组条目仍然存在，它只是没有价值。

您需要使用`splice`删除条目。

```
function deleteRoute(url) {
  for (var i = app.routes.get.length - 1; i >= 0; i--) {
    if (app.routes.get[i].path === "/" + url) {
      app.routes.get.splice(i, 1);
    }
  }
} 
```

您在问题中链接到的问题的第二个答案中也指出了这种方法。

# android - 从 x86（英特尔凌动）到 iOS 设备的 Android 4.2 仿真？

> ID：15487088
> 
> 赞同：0
> 
> 时间：2013-03-18T21:15:43.270
> 
> 标签：android, ios, emulation

我只是想知道是否可以本质上使用 iOS（或实际上是其他移动操作系统）作为 Android SDK 模拟器的外围设备。我目前正在我的 Macbook pro 上运行模拟器，但缺少触摸屏界面会影响测试体验。

目前我没有 Android (ARM) 设备（除了 RaspberryPi - 它有一个 v6 处理器，由于明显的原因无法运行 4.2），所以我必须在我的 Macbook 上使用 x86 仿真器映像运行它。但是，我确实有一个旧的第二代。iPod touch 随处可见。

是否可以从 x86 模拟器图像模拟 Android 4.2 并将其显示在 iOS 设备的显示器上并使用触摸屏界面。显然，它必须通过 USB 直接插入 Mac（除非您通过 wi-fi 使用某种远程桌面应用程序），并且可能需要一些严重的黑客攻击。

我要问的是——这可能吗？如果是这样，是否值得付出努力？

（抱歉任何拼写错误。我的英语很糟糕。）

# regex - 包含至少一个数值的单词的正则表达式？

> ID：15487089
> 
> 赞同：1
> 
> 时间：2013-03-18T21:15:43.597
> 
> 标签：regex, eclipse

作为我作业的一部分，我必须用至少一个数字替换单词 STOP，有没有使用正则表达式的方法？

> **单词** a1wew
> abc
> 1rr
> sd
> 
> **输出**
> STOP
> abc
> STOP
> sd

我在查找中使用 Eclipse 的正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:19:08.673

寻找：

```
(?=.*\d)\w+ 
```

代替：

```
STOP 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:48:38.470

一种可能的正则表达式是 grep '.*[0-9].*'

# java - Java 对象：if 语句中用于比较的值、运算符重载

> ID：15487091
> 
> 赞同：3
> 
> 时间：2013-03-18T21:15:45.713
> 
> 标签：java, object, return

是否可以定义用于自定义对象的 if 语句比较的值？

我有：

公共类元素实现 Comparable {

```
public int value;
public int[] sequence;
public int length;

public element(){}   

public element(int val){
    this.value = val;
}

@Override
public int compareTo(Object o) {
    return
} 
```

}

我想使用 if 语句如下：

> 如果（元素1>元素2）..

而不是传统的：

> 如果 (element1.value > element2.value) ..

我无法使用比较器、toString() 等来完成此操作

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T21:18:48.337

[根据JLS 15.20.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.20.1) ，您不能将对象引用与`>`运算符一起使用；Java 不支持运算符重载。但是使用.`Comparator`

```
if (comparator.compare(element1, element2) > 0)  // if (element1 > element2) 
```

如果您的类是`Comparable<Element>`，即与其他元素相当，也是可能的。

```
if (element1.compareTo(element2) > 0)  // if (element1 > element2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T21:19:17.367

不，这在 Java 中是不可能的。从[JLS §15.20.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.20.1)：

> **数值比较运算符的每个操作数的类型必须是可转换（[第 5.1.8 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.8)）为原始数值类型的类型，否则会发生编译时错误。**

这在像 Python 这样的语言中是可能的，其中几乎所有运算符都可以重载以使用非标准类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T21:24:16.773

Java 不支持这个。您可以改用以下内容：

```
if (element1.compareTo(element2) > 0) {

} 
```

在你的 compareTo 方法中，这样做：

```
public int compareTo(YourClassObject o) {
    return (this.value - YourClassObject.value);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T21:29:13.677

Since Java does not provide support for operator overloading, comparing the two objects using a method which performs the required comparision is the best option available.

```
WrapperClass.compare(object1, object2) > 0 for object1.value > object2.value
WrapperClass.compare(object1, object2) < 0 for object1.value < object2.value
WrapperClass.compare(object1, object2) = 0 for object1.value == object2.value 
```

String is one of the class which provides operator overloading like with the concatenation operator.

```
String str1 = "This ";
String str2 = "is a string";
str1 + str2 equals "This is a string" 
```

# javascript - 已编辑如何在循环中获取 localStorage 的 json 值

> ID：15487093
> 
> 赞同：0
> 
> 时间：2013-03-18T21:15:55.127
> 
> 标签：javascript, json, cordova, local-storage

**在 Oyeme 的建议下，我更改了代码，但仍然无法工作。它可以提醒“测试”，但不能提醒 DBuser_name 。**

通过以下编码，我可以创建如下图所示的内容。我的问题是，如果用户单击列表中的一个人，我想将其提取 `student.data.user_name`到 localStorage。但是，在我下面的编码中，似乎我做错了？

```
function getStudentList() {
$.getJSON('http://mydomain.com/getStudents.php?jsoncallback=?', function(data) {
    $('#studentList li').remove();
    $('#load').hide();
    //students = data.user_name;
    $.each(data, function(index, student) {
        //$('#studentList').append('<li><a href="tutor_student_detail.html?user_name=' + student.data.user_name + '">' +
        $('#studentList').append('<li><a href="tutor_student_detail.html">' +
                '<h4>' + student.data.user_name + '</h4>' +
                '<p>' + student.data.role + '</p>' +
                '</a></li>');

        $("li a").click(function() {
       window.localStorage["view"] = $(this).data('user_name');
    });
    });
    $('#studentList').listview('refresh');
}); 
```

}

以下是tutor_student_detail.html（js部分）的编码

```
function start(){

var localUsername=window.localStorage.getItem("view");

$.getJSON('http://mydomain.com/getStudent.php?user_name='+localUsername+'&jsoncallback=?', displayStudent);

    alert("testing");
}

function displayStudent(data) {
    var DBuser_name=data[0].data.user_name;
    alert(DBuser_name);
    var employee = data.item;
    $('#username').text(student.data.user_name);
    $('#pw').text(student.data.password);
    $('#id').text(student.data.id);

    $('#actionList').listview('refresh');

} 
```

json字符串的输出类似于

> ?([{"data":{"id":"4","user_name":"studentB","book":"4567","role":"Student"}}]);

![在此处输入图像描述](../Images/d3c2da922ba85fe7b87e12742567f3d8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:30:57.207

```
$('#studentList').append('<li><a href="tutor_student_detail.html"
                 data-name="'+student.data.user_name+'">' +
                '<h4>' + student.data.user_name + '</h4>' +
                '<p>' + student.data.role + '</p>' +
                '</a></li>');

$("li a").click(function() {
   window.localStorage["view"] = $(this).data('name');
}); 
```

# jsf - Commandlink ajax 在 primefaces 数据表内的标题方面内不起作用

> ID：15487094
> 
> 赞同：4
> 
> 时间：2013-03-18T21:15:58.237
> 
> 标签：jsf, primefaces

因此，在以下代码中，标头方面内的 ajax 不调用支持 bean（但我认为它似乎调用了执行和渲染）但数据表外部的链接工作得非常好，有人知道为什么吗？

```
 <h:commandLink value="Types"  >
            <f:ajax listener="#{typeBean.sortTypeList()}" execute="@this" render="@this"/>
      </h:commandLink>
    <p:dataTable id="fluidTable" widgetVar="fluidTable" var="vehBase" value="#{vehicleBean.currentVehicleBaseSet}" >
            <p:columnGroup type="header"> 
                <p:row>
                    <p:column rowspan="" >
                        <f:facet name="header">  
                            <h:panelGroup>
                                <h:commandLink value="Types" >
                                    <f:ajax listener="#{typeBean.sortTypeList()}" execute="@this" render="@this"/>
                                </h:commandLink>
                            </h:panelGroup>
                        </f:facet> 

                    </p:column>
                </p:row> 
            </p:columnGroup> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-07-19T20:00:44.060

将数据表放在 primefaces 面板中，而不是 h:commandLink 使用 primefaces 命令链接或按钮，如果您在页面中使用 primefaces，所有组件都应该在 primefaces 中。

# ios - 下面的 iOS 代码安全吗？（__autoreleasing 语义）

> ID：15487096
> 
> 赞同：2
> 
> 时间：2013-03-18T21:16:09.633
> 
> 标签：ios, automatic-ref-counting, autorelease

```
-(NSData *)jsonRepresentation:(NSError **error)error {
   NSDictionary *dict = [self getDictRepresentation];
   return [NSJSONSerialization dataWithJSONObject:dict options:nil error:error];
}

// Some other place...

NSError *__autoreleasing error = nil;
NSData *json = [obj jsonRepresentation:&error]; 
```

自动释放语义是否安全地将`error`堆栈传送到我的第二个代码块？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T21:22:29.237

根据[clang ARC 规范](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#indirect-parameters)，形式的方法参数`NSError **`（或者更确切地说，指向任何 obj-c 对象的指针）被隐式假定为`NSError * __autoreleasing *`. 这意味着错误将在方法中自动释放。

至于调用站点，如果您使用`__autoreleasing`变量调用它，那么一切都很好。事实上，我推荐这种模式。但是，如果您`__strong`改为使用变量调用它，它仍然可以工作。在这种情况下，编译器将生成一个未命名的`__autoreleasing`临时文件，将其地址传递给方法，然后在返回时，将临时文件分配给`__strong`. 所以如果你有

```
NSError *foo;
[bar callMethodWithError:&foo]; 
```

编译器会将其视为

```
NSError *foo;
NSError * __autoreleasing tmp = foo;
[bar callMethodWithError:&tmp];
foo = tmp; 
```

它实际上比标记 out-param[稍微复杂一些](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#passing-to-an-out-parameter-by-writeback)`out`，但这通常是它的工作方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T21:20:00.737

是的，它是正确的，但是你应该在方法声明中指定这个修饰符，而不是在变量的声明中。甚至 Apple 的官方文档也明确提到了这种情况：

> `__autoreleasing`用于表示通过引用 ( `id *`) 传递并在返回时自动释放的参数。

# jquery - 单击时的JQuery不起作用

> ID：15487104
> 
> 赞同：0
> 
> 时间：2013-03-18T21:16:37.133
> 
> 标签：jquery, click, coffeescript

我有奇怪的行为，在同一个文件中，更改事件正在工作，但点击事件却没有。我知道我可能没有发布足够的代码，但我只是想看看是否有人知道为什么 on event 可能有效但另一个不会。这是我的代码：

```
class AddBTS
  constructor: () ->

    $('#a').on 'change', (evt) => @a evt
    $('#b').on 'change', (evt) => @b evt
    $('#c').on 'click', (evt) => @c

  a: (evt) =>
    console.log 'a works'

  b: (evt) =>
    console.log 'b works'

  c: () =>
    console.log 'c works' 
```

它引用的html：

```
<input type="file" id="a">
<input type="file" id="b">
<button id="c">OK</button> 
```

事件在 a 和 b 上工作正常，但 click 事件在 c 上不起作用。

我编译的 JS 在 DOM 加载后执行。

谁能给我一些可能导致这种情况的指示，我会尝试一下。

有趣的是，当我双击 c 时，出现以下错误：

```
Error in event handler for 'undefined': IndexSizeError: DOM Exception 1 Error: Index or size was negative, or greater than the allowed value. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T21:34:35.740

你必须调用你的 c 函数：

```
@c() 
```

没有括号，您只能访问它。请记住，CoffeeScript 不是 Ruby ;)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:21:10.623

我认为您不需要它，`evt`因为您没有使用它。

```
$('#c').on 'click', () => @c 
```

# python - Python lxml xpath XPathEvalError: Invalid expression -- 为什么？

> ID：15487106
> 
> 赞同：2
> 
> 时间：2013-03-18T21:16:46.483
> 
> 标签：python, xml, xpath, lxml

我正在尝试使用`lxml`. 这是我的代码：

```
nsmap = {
    'svg': 'http://www.w3.org/2000/svg',
    'xlink': 'http://www.w3.org/1999/xlink',
}

root = etree.XML(svg)

# this works (finds the element with the given ID)
root.xpath('./svg:g/svg:g/svg:g[@id="route_1_edge"]', namespaces=nsmap)

# this yields "XPathEvalError: Invalid expression"
root.xpath('./svg:g/svg:g/svg:g[fn:startswith(@id,"route_1")]', namespaces=nsmap) 
```

有人知道为什么第一个有效而第二个无效吗？如果我将第三个更改`svg:g`为`svg:text`我没有得到异常，那么它似乎与`g`元素有关，特别是它不喜欢的元素，但是，再次，简单的`g[@id="foo"]`搜索工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T21:33:05.760

“startswith”函数拼写为[starts-with](http://www.w3.org/TR/xpath/#function-starts-with)。另外，省略`fn:`.

```
root.xpath('./svg:g/svg:g/svg:g[starts-with(@id,"route_1")]', namespaces=nsmap) 
```

* * *

```
import lxml.etree as etree
import lxml.builder as builder

nsmap = {
    'svg': 'http://www.w3.org/2000/svg',
    'xlink': 'http://www.w3.org/1999/xlink',
}

E = builder.ElementMaker(
    namespace='http://www.w3.org/2000/svg',
    nsmap=nsmap)

root = (
    E.root(
        E.g(
            E.g(
                E.g(id = "route_1_edge" )))))

print(etree.tostring(root, pretty_print=True))
print(root.xpath('./svg:g/svg:g/svg:g[@id="route_1_edge"]', namespaces=nsmap))
print(root.xpath('./svg:g/svg:g/svg:g[starts-with(@id,"route_1")]', namespaces=nsmap)) 
```

产量

```
<svg:root xmlns:svg="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <svg:g>
    <svg:g>
      <svg:g id="route_1_edge"/>
    </svg:g>
  </svg:g>
</svg:root>

[<Element {http://www.w3.org/2000/svg}g at 0xb7462c34>]
[<Element {http://www.w3.org/2000/svg}g at 0xb7462be4>] 
```

# highcharts - 如何在 highCharts 中添加自定义导出按钮？

> ID：15487111
> 
> 赞同：1
> 
> 时间：2013-03-18T21:17:25.457
> 
> 标签：highcharts, export

我们在我们的应用程序中使用 highcharts，我想在打印和导出按钮旁边添加一个按钮。我在[jsfiddle中有工作示例](http://jsfiddle.net/agorur/cCYZU/2/)

```
 var chart1;
        $(document).ready(function () {

            // Add Custom button to highchart
            chart1 = new Highcharts.Chart({
                chart: {
                    renderTo: 'container1',
                    shadow: true
                },
                title: { text: 'Sales' },
                xAxis: {
                    categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                                 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
                },
                yAxis: { title: { text: '$'} },
                series: [{
                    data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 
                           135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
                }],
                 exporting: {
                        buttons: {
                            'exportTo': {
                                _id: 'exportTo',
                                symbol: 'diamond',
                                x: -62,
                                symbolFill: '#B5C9DF',
                                hoverSymbolFill: '#779ABF',
                                onclick: function () {
                                    showDialog(this);
                                }
                            }
                        }
                    }

            });

 var showDialog = function (selectedChart) {

                var modal = $("#myModal").modal();
                $('#btnSaveImage').click(function () {
                    saveChartInNas(selectedChart);
                    modal.modal('hide');
                });
            };
        }); 
```

我们有很多图表，点击图表我想显示一个模式窗口并在保存按钮上做一些处理。而不是为所有不同页面中的所有图表创建模式和导出属性设置，我想知道是否可以**添加某种插件或添加？**如果是这样，有人可以告诉我如何实现这一目标。

我不想在所有页面中添加导出逻辑。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-23T14:40:21.470

```
exporting: {
                           filename: 'event-id-metadata-graph',
                            buttons: {
                                contextButton: {
                                    menuItems: [{
                                        text: 'Download PDF',
                                        onclick: function () {
                                            this.exportChart({
                                                type: 'application/pdf'
                                            });
                                        }
                                    }, {
                                        text: 'Print',
                                        onclick: function () {
                                                alert('Launch Print Table function')
                                        },
                                        separator: false
                                    }]
                                }
                            }
                        }, 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T09:20:49.087

我想您是在问是否有办法将其设置为某种默认值，而不是编辑每个图表定义？

你应该看看 Highcharts.setOptions() [http://api.highcharts.com/highcharts#Highcharts.setOptions()](http://api.highcharts.com/highcharts#Highcharts.setOptions()) 这允许你为所有图表设置默认值。

# ios6 - 有没有办法获得 AutoLayout XIB 的“视觉格式语言”？

> ID：15487119
> 
> 赞同：1
> 
> 时间：2013-03-18T21:17:47.027
> 
> 标签：ios6, autolayout

我撞在砖墙上。是否可以获得从 AutoLayout XIB 生成 的**视觉格式语言？**

我希望在代码中模拟 XIB 等效项。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T16:29:57.287

当您 NSLog 约束时，日志以可视格式语言显示它们。

```
NSLog(@"%@", self.view.constraints) ; 
```

我在 Interface Builder 中创建了一个 UIButton 并将其拖到视图的右上角， ![](../Images/b658ce82376f728badc1af1bc6b11dbf.png)这是 NSLog：

```
"<NSLayoutConstraint:0x75b19f0 H:[UIRoundedRectButton:0x75ae6a0]-(NSSpace(20))-|   (Names: '|':UIView:0x75ae560 )>",
"<NSLayoutConstraint:0x75b1a50 V:|-(NSSpace(20))-[UIRoundedRectButton:0x75ae6a0]   (Names: '|':UIView:0x75ae560 )>" 
```

它们与使用视觉格式语言创建约束相同：

```
H:[button]-20-|
V:|-20-[button] 
```

如果您对可视化格式语言足够熟悉，您应该能够用该语言表达您能想到的大多数约束，而无需在 Interface Builder 中创建它们并对其进行逆向工程。如果存在您无法在代码中构建的约束，请告诉我。

# asp.net-mvc - 果园CMS安装错误？

> ID：15487121
> 
> 赞同：4
> 
> 时间：2013-03-18T21:17:49.650
> 
> 标签：asp.net-mvc, orchardcms

我尝试从源代码安装果园 CMS。我在 VS 2012 中打开它，我使用的是 Sql Server 2012。

我收到以下错误。

![在此处输入图像描述](../Images/7812a2a20e53fc93f5428de6865f1381.png)

错误文字：

> 设置失败：无法执行查询 [ select rolerecord0_.Id as Id13_, rolerecord0_.Name as Name13_ from Test_Orchard_Roles_RoleRecord rolerecord0_ where rolerecord0_.Name=@p0 ] Name:p1 - Value:Anonymous [SQL: select rolerecord0_.Id as Id13_, rolerecord0_。名称为 Name13_ 来自 Test_Orchard_Roles_RoleRecord rolerecord0_ where rolerecord0_.Name=@p0]

我找不到此错误的任何解决方案。我哪里做错了？我该如何解决这个错误？当我选择内置存储时，它会运行。另外，如果我使用内置的有什么缺点吗？

更新（新的错误信息）

> 设置失败：无法执行查询 [ SELECT TOP (@p0) this_.Id as Id17_2_, this_.Number as Number17_2_, this_.Published as Published17_2_, this_.Latest as Latest17_2_, this_.Data as Data17_2_, this_.ContentItemRecord_id as ContentI6_17_2_, contentite1_.Id as Id16_0_, contentite1_.Data as Data16_0_, contentite1_.ContentType_id as ContentT3_16_0_, contenttyp4_.Id as Id18_1_, contenttyp4_.Name as Name18_1_ FROM Orchard_Framework_ContentItemVersionRecord this_ inner join Orchard_Framework_ContentItemRecord contentite1_ on this_.ContentItemRecord_id=contentite1_.Id left outer join Orchard_Framework_ContentTypeRecord contenttyp4_ on contentite1_.ContentType_id=contenttyp4_.Id WHERE contentite1_.Id = @p1 and this_.Published = @p2 ] 名称：cp0 - 值：2 名称：cp1 - 值：True [SQL: SELECT TOP (@p0) this_.Id 作为 Id17_2_ ， 这个_。编号为 Number17_2_, this_.Published 为 Published17_2_, this_.Latest 为 Latest17_2_, this_.Data 为 Data17_2_, this_.ContentItemRecord_id 为 ContentI6_17_2_, contentite1_.Id 为 Id16_0_, contentite1_.Data 为 Data16_0_, contentite1_.ContentType_id 为 ContentT3_16_0_, contenttyp4_.Id 为Id18_1_, contenttyp4_.Name as Name18_1_ FROM Orchard_Framework_ContentItemVersionRecord this_ 内连接 Orchard_Framework_ContentItemRecord contentite1_ on this_.ContentItemRecord_id=contentite1_.Id 左外连接 Orchard_Framework_ContentTypeRecord contenttyp4_ on contentite1_.ContentType_id=contenttyp4_.Id WHERE contentite1_.p2 = @p1Id as Id16_0_, contentite1_.Data as Data16_0_, contentite1_.ContentType_id as ContentT3_16_0_, contenttyp4_.Id as Id18_1_, contenttyp4_.Name as Name18_1_ FROM Orchard_Framework_ContentItemVersionRecord this_ inner join Orchard_Framework_ContentItemRecord contentite1_ on this_.ContentItemRecord_id=contentite1_.Id left outer join Orchard_Framework_ContentTypeRecord contenttyp4_ on contentite1_. ContentType_id=contenttyp4_.Id WHERE contentite1_.Id = @p1 和 this_.Published = @p2]Id as Id16_0_, contentite1_.Data as Data16_0_, contentite1_.ContentType_id as ContentT3_16_0_, contenttyp4_.Id as Id18_1_, contenttyp4_.Name as Name18_1_ FROM Orchard_Framework_ContentItemVersionRecord this_ inner join Orchard_Framework_ContentItemRecord contentite1_ on this_.ContentItemRecord_id=contentite1_.Id left outer join Orchard_Framework_ContentTypeRecord contenttyp4_ on contentite1_. ContentType_id=contenttyp4_.Id WHERE contentite1_.Id = @p1 和 this_.Published = @p2]Id 左外连接 Orchard_Framework_ContentTypeRecord contenttyp4_ on contentite1_.ContentType_id=contenttyp4_.Id WHERE contentite1_.Id = @p1 和 this_.Published = @p2]Id 左外连接 Orchard_Framework_ContentTypeRecord contenttyp4_ on contentite1_.ContentType_id=contenttyp4_.Id WHERE contentite1_.Id = @p1 和 this_.Published = @p2]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-04T12:08:01.920

在创建 SQL Server 数据库之前，将搭配设置为`Latin1_General_100_CI_AS`

执行此操作，右键单击 SQL Server 管理工具上的**Database** note 并单击**New Database**。当您看到“**新建数据库”**窗口时，输入数据库名称并单击“**新建数据库”**窗口左侧的**选项选项**卡。

 **您将看到新数据库窗口顶部的**搭配组合框。****将默认**更改为**Latin1_General_100_CI_AS**。然后再次运行 Orchard 设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-23T06:24:10.323

在您的 IIS 管理器中设置一个新的应用程序池，并让它作为有权查询您的 sql 服务器的帐户运行。然后分配您的果园网站以使用该应用程序池。这是设置应用程序池标识的屏幕截图，单击“高级设置”链接进入此菜单：

![iis 设置](../Images/3aaba7f1a7294efbad2961ad48b00bd3.png)

在“进程模型”部分 - 将身份设置为具有 SQL 服务器权限的帐户。设置“加载用户配置文件”=“假”。这将防止池在运行果园网站时尝试检索用户配置文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-23T18:04:56.967

我发现通常当我收到该错误消息时，这是因为正在执行的查询有语法错误，或者表/列名称不匹配。如果您可以在引发异常的地方停止执行，您可以检查 InnerException 以查看它是否提供了更多信息。如果没有，只需从消息中复制 SQL，用值填写参数@p0、@p1、@p2，然后尝试在您用于手动查询数据库的任何工具中运行它。它通常会给你一个更有帮助的错误信息。**

# c# - WinRT 中的透明组合框

> ID：15487123
> 
> 赞同：1
> 
> 时间：2013-03-18T21:17:55.297
> 
> 标签：c#, xaml, combobox, styles, windows-runtime

所以我尝试使用默认的 ComboBox 来显示选择列表。我想要在选择组合框为透明时弹出的上下文菜单的背景。我找不到可以做到这一点的属性或风格，而且我没有找到太多这样做的方法。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T22:15:00.440

您需要`ComboBox`使用 Visual Studio 设计器视图或 Blend提取当前模板的副本，并将名为“PopupBorder”的`Background`属性修改为. 默认情况下，它使用.`Border``Transparent``{StaticResource ComboBoxPopupBackgroundThemeBrush}`

`Style`这是更新资源的副本。

```
<Style
    x:Key="ComboBoxStyle1"
    TargetType="ComboBox">
    <Setter
        Property="Padding"
        Value="8,0" />
    <Setter
        Property="Foreground"
        Value="{StaticResource ComboBoxForegroundThemeBrush}" />
    <Setter
        Property="Background"
        Value="{StaticResource ComboBoxBackgroundThemeBrush}" />
    <Setter
        Property="BorderBrush"
        Value="{StaticResource ComboBoxBorderThemeBrush}" />
    <Setter
        Property="BorderThickness"
        Value="{StaticResource ComboBoxBorderThemeThickness}" />
    <Setter
        Property="TabNavigation"
        Value="Once" />
    <Setter
        Property="ScrollViewer.HorizontalScrollBarVisibility"
        Value="Disabled" />
    <Setter
        Property="ScrollViewer.VerticalScrollBarVisibility"
        Value="Auto" />
    <Setter
        Property="ScrollViewer.HorizontalScrollMode"
        Value="Disabled" />
    <Setter
        Property="ScrollViewer.VerticalScrollMode"
        Value="Auto" />
    <Setter
        Property="ScrollViewer.IsVerticalRailEnabled"
        Value="True" />
    <Setter
        Property="ScrollViewer.IsDeferredScrollingEnabled"
        Value="False" />
    <Setter
        Property="ScrollViewer.BringIntoViewOnFocusChange"
        Value="True" />
    <Setter
        Property="HorizontalContentAlignment"
        Value="Stretch" />
    <Setter
        Property="FontFamily"
        Value="{StaticResource ContentControlThemeFontFamily}" />
    <Setter
        Property="FontSize"
        Value="{StaticResource ControlContentThemeFontSize}" />
    <Setter
        Property="ItemsPanel">
        <Setter.Value>
            <ItemsPanelTemplate>
                <CarouselPanel />
            </ItemsPanelTemplate>
        </Setter.Value>
    </Setter>
    <Setter
        Property="Template">
        <Setter.Value>
            <ControlTemplate
                TargetType="ComboBox">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition
                            Width="*" />
                        <ColumnDefinition
                            Width="32" />
                    </Grid.ColumnDefinitions>
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup
                            x:Name="CommonStates">
                            <VisualState
                                x:Name="Normal" />
                            <VisualState
                                x:Name="PointerOver">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames
                                        Storyboard.TargetProperty="Background"
                                        Storyboard.TargetName="Background">
                                        <DiscreteObjectKeyFrame
                                            KeyTime="0"
                                            Value="{StaticResource ComboBoxPointerOverBackgroundThemeBrush}" />
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames
                                        Storyboard.TargetProperty="BorderBrush"
                                        Storyboard.TargetName="Background">
                                        <DiscreteObjectKeyFrame
                                            KeyTime="0"
                                            Value="{StaticResource ComboBoxPointerOverBorderThemeBrush}" />
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames
                                        Storyboard.TargetProperty="Fill"
                                        Storyboard.TargetName="Highlight">
                                        <DiscreteObjectKeyFrame
                                            KeyTime="0"
                                            Value="{StaticResource ComboBoxSelectedPointerOverBackgroundThemeBrush}" />
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState
                                x:Name="Pressed">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames
                                        Storyboard.TargetProperty="Background"
                                        Storyboard.TargetName="Background">
                                        <DiscreteObjectKeyFrame
                                            KeyTime="0"
                                            Value="{StaticResource ComboBoxPressedBackgroundThemeBrush}" />
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames
                                        Storyboard.TargetProperty="BorderBrush"
                                        Storyboard.TargetName="Background">
                                        <DiscreteObjectKeyFrame
                                            KeyTime="0"
                                            Value="{StaticResource ComboBoxPressedBorderThemeBrush}" />
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames
                                        Storyboard.TargetProperty="Foreground"
                                        Storyboard.TargetName="ContentPresenter">
                                        <DiscreteObjectKeyFrame
                                            KeyTime="0"
                                            Value="{StaticResource ComboBoxPressedForegroundThemeBrush}" />
                                    </ObjectAnimationUsingKeyFrames>
                                    <DoubleAnimation
                                        Duration="0"
                                        To="1"
                                        Storyboard.TargetProperty="Opacity"
                                        Storyboard.TargetName="PressedBackground" />
                                    <ObjectAnimationUsingKeyFrames
                                        Storyboard.TargetProperty="Foreground"
                                        Storyboard.TargetName="DropDownGlyph">
                                        <DiscreteObjectKeyFrame
                                            KeyTime="0"
                                            Value="{StaticResource ComboBoxArrowPressedForegroundThemeBrush}" />
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState
                                x:Name="Disabled">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames
                                        Storyboard.TargetProperty="Background"
                                        Storyboard.TargetName="Background">
                                        <DiscreteObjectKeyFrame
                                            KeyTime="0"
                                            Value="{StaticResource ComboBoxDisabledBackgroundThemeBrush}" />
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames
                                        Storyboard.TargetProperty="BorderBrush"
                                        Storyboard.TargetName="Background">
                                        <DiscreteObjectKeyFrame
                                            KeyTime="0"
                                            Value="{StaticResource ComboBoxDisabledBorderThemeBrush}" />
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames
                                        Storyboard.TargetProperty="Foreground"
                                        Storyboard.TargetName="ContentPresenter">
                                        <DiscreteObjectKeyFrame
                                            KeyTime="0"
                                            Value="{StaticResource ComboBoxDisabledForegroundThemeBrush}" />
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames
                                        Storyboard.TargetProperty="Foreground"
                                        Storyboard.TargetName="DropDownGlyph">
                                        <DiscreteObjectKeyFrame
                                            KeyTime="0"
                                            Value="{StaticResource ComboBoxArrowDisabledForegroundThemeBrush}" />
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                        <VisualStateGroup
                            x:Name="FocusStates">
                            <VisualState
                                x:Name="Focused">
                                <Storyboard>
                                    <DoubleAnimation
                                        Duration="0"
                                        To="1"
                                        Storyboard.TargetProperty="Opacity"
                                        Storyboard.TargetName="HighlightBackground" />
                                    <DoubleAnimation
                                        Duration="0"
                                        To="1"
                                        Storyboard.TargetProperty="Opacity"
                                        Storyboard.TargetName="Highlight" />
                                    <ObjectAnimationUsingKeyFrames
                                        Storyboard.TargetProperty="Foreground"
                                        Storyboard.TargetName="ContentPresenter">
                                        <DiscreteObjectKeyFrame
                                            KeyTime="0"
                                            Value="{StaticResource ComboBoxFocusedForegroundThemeBrush}" />
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState
                                x:Name="FocusedPressed">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames
                                        Storyboard.TargetProperty="Foreground"
                                        Storyboard.TargetName="ContentPresenter">
                                        <DiscreteObjectKeyFrame
                                            KeyTime="0"
                                            Value="{StaticResource ComboBoxPressedForegroundThemeBrush}" />
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames
                                        Storyboard.TargetProperty="Fill"
                                        Storyboard.TargetName="Highlight">
                                        <DiscreteObjectKeyFrame
                                            KeyTime="0"
                                            Value="{StaticResource ComboBoxPressedHighlightThemeBrush}" />
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState
                                x:Name="Unfocused" />
                            <VisualState
                                x:Name="PointerFocused" />
                            <VisualState
                                x:Name="FocusedDropDown">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames
                                        Duration="0"
                                        Storyboard.TargetProperty="Visibility"
                                        Storyboard.TargetName="PopupBorder">
                                        <DiscreteObjectKeyFrame
                                            KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <Visibility>Visible</Visibility>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                        <VisualStateGroup
                            x:Name="DropDownStates">
                            <VisualState
                                x:Name="Opened">
                                <Storyboard>
                                    <SplitOpenThemeAnimation
                                        ClosedTargetName="ContentPresenter"
                                        ContentTranslationOffset="0"
                                        ContentTargetName="ScrollViewer"
                                        ClosedLength="{Binding TemplateSettings.DropDownClosedHeight, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                        OffsetFromCenter="{Binding TemplateSettings.DropDownOffset, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                        OpenedTargetName="PopupBorder"
                                        OpenedLength="{Binding TemplateSettings.DropDownOpenedHeight, RelativeSource={RelativeSource Mode=TemplatedParent}}" />
                                </Storyboard>
                            </VisualState>
                            <VisualState
                                x:Name="Closed">
                                <Storyboard>
                                    <SplitCloseThemeAnimation
                                        ClosedTargetName="ContentPresenter"
                                        ContentTranslationOffset="40"
                                        ContentTranslationDirection="{Binding TemplateSettings.SelectedItemDirection, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                        ContentTargetName="ScrollViewer"
                                        ClosedLength="{Binding TemplateSettings.DropDownClosedHeight, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                        OffsetFromCenter="{Binding TemplateSettings.DropDownOffset, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                        OpenedTargetName="PopupBorder"
                                        OpenedLength="{Binding TemplateSettings.DropDownOpenedHeight, RelativeSource={RelativeSource Mode=TemplatedParent}}" />
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <Border
                        x:Name="Background"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        Background="{TemplateBinding Background}"
                        Grid.ColumnSpan="2" />
                    <Rectangle
                        x:Name="PressedBackground"
                        Fill="{StaticResource ComboBoxPressedHighlightThemeBrush}"
                        Margin="{TemplateBinding BorderThickness}"
                        Opacity="0" />
                    <Border
                        x:Name="HighlightBackground"
                        BorderBrush="{StaticResource ComboBoxFocusedBorderThemeBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        Background="{StaticResource ComboBoxFocusedBackgroundThemeBrush}"
                        Grid.ColumnSpan="2"
                        Opacity="0" />
                    <Rectangle
                        x:Name="Highlight"
                        Fill="{StaticResource ComboBoxSelectedBackgroundThemeBrush}"
                        Margin="{TemplateBinding BorderThickness}"
                        Opacity="0" />
                    <ContentPresenter
                        x:Name="ContentPresenter"
                        HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                        Margin="{TemplateBinding Padding}"
                        VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                    <TextBlock
                        x:Name="DropDownGlyph"
                        Grid.Column="1"
                        Foreground="{StaticResource ComboBoxArrowForegroundThemeBrush}"
                        FontWeight="Bold"
                        FontSize="{StaticResource ComboBoxArrowThemeFontSize}"
                        FontFamily="{StaticResource SymbolThemeFontFamily}"
                        HorizontalAlignment="Right"
                        IsHitTestVisible="False"
                        Margin="0,0,6,4"
                        Text="&#xE011;"
                        VerticalAlignment="Center" />
                    <Popup
                        x:Name="Popup">
                        <Border
                            x:Name="PopupBorder"
                            BorderBrush="{StaticResource ComboBoxPopupBorderThemeBrush}"
                            BorderThickness="{StaticResource ComboBoxPopupBorderThemeThickness}"
                            Background="Transparent"
                            HorizontalAlignment="Stretch">
                            <ScrollViewer
                                x:Name="ScrollViewer"
                                BringIntoViewOnFocusChange="{TemplateBinding ScrollViewer.BringIntoViewOnFocusChange}"
                                Foreground="{StaticResource ComboBoxPopupForegroundThemeBrush}"
                                HorizontalScrollMode="{TemplateBinding ScrollViewer.HorizontalScrollMode}"
                                HorizontalScrollBarVisibility="{TemplateBinding ScrollViewer.HorizontalScrollBarVisibility}"
                                IsHorizontalRailEnabled="{TemplateBinding ScrollViewer.IsHorizontalRailEnabled}"
                                IsVerticalRailEnabled="{TemplateBinding ScrollViewer.IsVerticalRailEnabled}"
                                IsDeferredScrollingEnabled="{TemplateBinding ScrollViewer.IsDeferredScrollingEnabled}"
                                VerticalSnapPointsType="OptionalSingle"
                                VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}"
                                VerticalScrollMode="{TemplateBinding ScrollViewer.VerticalScrollMode}"
                                VerticalSnapPointsAlignment="Near"
                                ZoomMode="Disabled">
                                <ItemsPresenter />
                            </ScrollViewer>
                        </Border>
                    </Popup>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-04T15:46:34.653

您是否尝试过以下操作？

```
 <ComboBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Background="Transparent" />
                </ItemsPanelTemplate>
            </ComboBox.ItemsPanel> 
```

这对我有用（无需重新定义`ControlTemplate`）。

# java - 无法在 textView 中显示下标文本

> ID：15487127
> 
> 赞同：0
> 
> 时间：2013-03-18T21:18:13.267
> 
> 标签：java, android, eclipse, textview, subscript

我对 Android 很陌生，我正在尝试在 customListView 中包含的 textView 中显示一些化学公式。我正在从 xml 解析中获取所有数据，然后我希望显示公式，例如 C₉H₈O₄。但我只能看到 1-4 位数字。

我正在以这种方式从“正常”转换为“下标”

```
str = str.replaceAll("0", "\u2080");
str = str.replaceAll("1", "\u2081");
str = str.replaceAll("2", "\u2082");
str = str.replaceAll("3", "\u2083");
str = str.replaceAll("4", "\u2084");
str = str.replaceAll("5", "\u2085");
str = str.replaceAll("6", "\u2086");
str = str.replaceAll("7", "\u2087");
str = str.replaceAll("8", "\u2088");
str = str.replaceAll("9", "\u2089"); 
```

str 包含从 xml 文件中获取的公式。

奇怪的行为是我可以在 Logcat 中看到应有的公式。

我也尝试过使用海关字体，但没有。

这里有两个结果：第一个是普通字体，第二个是自定义字体

[https://www.dropbox.com/s/jyk64p700up14db/cella.jpg](https://www.dropbox.com/s/jyk64p700up14db/cella.jpg) [https://www.dropbox.com/s/ab9h1b45j2hrods/Schermata%2003-2456370%20alle%2022.05.45.png](https://www.dropbox.com/s/ab9h1b45j2hrods/Schermata%2003-2456370%20alle%2022.05.45.png)

在网络上，我可以使用类似的方法阅读解决方案

setText(Html.fromHtml("X `<sub>2</sub>`"));

但我真的不知道如何在我的情况下使用它。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:33:07.610

尝试解决这个问题并不容易，`Html.fromHtml("X<sub>2</sub>")` 您需要一个可以帮助您实现这一目标的库

（JEuclid 是一个完整的 MathML 渲染解决方案，包括：）`http://jeuclid.sourceforge.net/`

查看示例，您将获得解决问题的方法

使用 TeX 渲染数学表达式的其他替代方法：

```
http://jmathtex.sourceforge.net/
http://sourceforge.net/projects/snuggletex/
http://forge.scilab.org/index.php/p/jlatexmath/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:12:51.080

最后我解决了这个问题：这是一个字体问题。我刚刚使用了 Calibri，它的工作原理！

# c# - 如何从组合框中删除更多项目？

> ID：15487128
> 
> 赞同：1
> 
> 时间：2013-03-18T21:18:22.153
> 
> 标签：c#, string, combobox

我正在尝试从组合框中删除更多项目，但应用程序一次只删除一个项目。

有`combobox`一个电子邮件地址列表。我想删除空项目`("")`，以及那些没有`@`文本内部的项目。

下面的代码一次只删除一项。

```
 for (int i = 0; i < cmbTo.Items.Count; i++)
    {
        string st = cmbTo.Items[i].ToString();
        if (st == "" || st.IndexOf("@") == -1)
        {               
            cmbTo.Items.RemoveAt(i);                    
        }
    } 
```

我该如何重写这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T21:24:48.373

您的代码不起作用，因为从集合中删除项目的那一刻， Count() 减少并且 for 循环在遍历所有项目列表之前退出。

您需要首先创建要删除的元素列表（将它们放在临时列表中），然后遍历新创建的列表调用`cmbTo.Items.Remove(currentElement);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T21:27:09.543

Hint: Think about what happens to the `i` variable when you remove an item

...

When you RemoveAt an item, the item is removed, and every subsequent item moves up one index. Your loop then hits the bottom, where it goes back to the top, increments `i`, and moves on.

Result? You just skipped an item. If this is the last item in the list, then the loop exists.

Instead, manually decrement `i` to offset your removal, so that everything works:

```
for (int i = 0; i < cmbTo.Items.Count; i++)
{
    string st = cmbTo.Items[i].ToString();
    if (st == "" || st.IndexOf("@") == -1)
    {               
        cmbTo.Items.RemoveAt(i);
        i--;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T21:26:40.980

当您从组合框中删除一个项目时，以下项目的索引会发生变化，您的项目数也会发生变化。这可以解释你所看到的行为吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T21:40:11.993

只需反方向（即从尾到前）进行移除，移除项目时您无需担心调整`i`¹：

```
var items = cmbTo.Items;
int i = items.Count;
while (i > 0) {
    --i;
    string st = items[i].ToString();
    if (st == "" || st.IndexOf("@") < 0)
        items.RemoveAt(i);
} 
```

* * *

¹您目前不这样做，因此跳过了一些应该可能被删除的项目，这会导致您的问题。

# wpf - 为空或为空时不显示多绑定工具提示

> ID：15487130
> 
> 赞同：2
> 
> 时间：2013-03-18T21:18:24.610
> 
> 标签：wpf, xaml, triggers, tooltip, multibinding

我假设这不起作用的原因是因为我的触发器正在检查空字符串或 null，但我真正拥有的是一个文本块，其 Text 属性为空（或 null）。有谁知道我可以如何轻松地修改我的触发器来实现这一点？我已经搞砸了半个小时，尝试不同的绑定/触发器/数据触发器方式，但没有运气。

```
<ListView.ItemContainerStyle>
   <Style TargetType="ListViewItem">

      <Setter Property="ToolTip">
         <Setter.Value>
            <!--Can't be directly in tool tip, cuz tool tip is object. StringFormat will only work with string-->
            <TextBlock>
               <TextBlock.Text>
                  <MultiBinding StringFormat="{}ID: {0}&#x0a;X: {1}&#x0a;Y: {2}">
                     <Binding Path="MyClass.Id"/>
                     <Binding Path="MyClass.x"/>
                     <Binding Path="MyClass.y"/>
                  </MultiBinding>
               </TextBlock.Text>
            </TextBlock>
         </Setter.Value>
      </Setter>

      <Style.Triggers>
         <Trigger Property="ToolTip.Content"  Value="{x:Static System:String.Empty}">
            <Setter Property="ToolTip.Visibility" Value="Collapsed" />
         </Trigger>
         <Trigger Property="ToolTip.Content" Value="{x:Null}">
            <Setter Property="ToolTip.Visibility" Value="Collapsed" />
         </Trigger>
     </Style.Triggers>

   </Style>
</ListView.ItemContainerStyle> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:43:25.513

所以我实际上保持了上面的样式完全相同。问题似乎是当我的“MyClass”对象为空时，会显示一个空的工具提示。

但是当“MyClass”为空时，我真的希望工具提示停止显示。

我使用以下数据触发器解决了这个问题：

```
 <DataTrigger Binding="{Binding Path=MyClass}" Value="{x:Null}">
     <Setter Property="ToolTip" Value="{x:Null}" />
  </DataTrigger> 
```

不再需要我在原始帖子中的其他触发器。通过在上面的代码段中设置`ToolTip`为 null，工具提示将自动不显示。

# assembly - ARM 汇编中的跳过指令

> ID：15487134
> 
> 赞同：1
> 
> 时间：2013-03-18T21:18:44.370
> 
> 标签：assembly, arm

我根本没有编写汇编的经验，所以我猜这个问题很容易回答。

有这个简单的循环：

```
mov r0,#3
loop:
   do some instructions
   ...
   last-instruction

subs r0,r0,#1
bne loop
afterloop: 
```

如果我理解得很好，这个循环应该从 3 减少到 0 并停止（如果我错了，请纠正我）。

但是，在最后一次迭代中，当 r0 == 0 时，我想跳过`last-instruction`并跳出循环。我认为`cmp`如果 r0 等于 0 然后跳转到`afterloop`. 但我想可能有一些更简单的方法来实现这一点。

**编辑：** 还有一个问题——如果要跳过更多指令怎么办？

在 C 中，它看起来像这样：

```
int i = 3;
while (1) {
  foo();

  if (i == 0) break;
  skipped_func();
  --i;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T21:24:14.113

除非最后一条指令依赖于 r0 和/或修改 CPSR，否则将`subs`行移动到最后一条指令的前一步，并使最后一条指令以 NE 条件为条件。像这样：

```
mov r0,#3
loop:
   do some instructions
   ...

    subs r0,r0,#1
    last-instructionNE
bne loop
afterloop: 
```

如果最后一条指令是 a `mov`，则将其设为 a `movne`。如果是`str`，则将其设为`strne`。等等。

如果最后一条指令已经有一个“s”后缀，这将不起作用 - 修改标志。如果是这样，它将破坏零标志并且`bne`不会按预期工作。此外，如果最后一条指令依赖于 r0 在减少之前的值，它也必须在`subs`.

在 ARM 上，与 Intel 不同，几乎每条指令都可以是有条件的，而不仅仅是 B(ranch)。除非它实际上是拇指。

编辑重新：编辑：您可以通过这种方式使多个指令有条件。或者，您也可以通过跳转复制相同的逻辑。像这样：

```
mov r0,#3
loop:
   do some instructions
   ...
    subs r0,r0,#1
    bz afterloop

   last-instructions
b loop
afterloop: 
```

这绝对是“智能”的组装方式。有人声称它更容易理解。对于 2-3 条条件行，我不会打扰。10+，我会的。中间有一个灰色区域。:)

`Bz`并且`be`是同义词。这样逻辑就更清楚了——你隐含地将 r0 与 0 进行比较。

在这种情况下，最后的指令可能会破坏他们想要的所有标志。从 r0 读取仍然会给你已经减少的值。

# delphi - Delphi XE2 列表视图工件

> ID：15487136
> 
> 赞同：8
> 
> 时间：2013-03-18T21:18:51.033
> 
> 标签：delphi, delphi-xe2, tlistview

我在 vsreport 虚拟模式下使用 listview，有两列，在填充列表后，选择一行，然后选择另一行，在先前选择的行上留下一个工件，见下图。如何解决这个问题？![在此处输入图像描述](../Images/032ab9387d1ed8f34c3ae4a36574a44c.png)

这是我从数组中获取数据的代码

```
procedure TForm1.ListView1Data(Sender: TObject; Item: TListItem);
begin
  Item.Caption := FloatToStr(Item.Index + 1);
  Item.SubItems.Add(FloatToStr(a[Item.Index]));
end; 
```

当我将鼠标悬停时，工件消失了。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T22:19:18.003

将列表视图的 DoubleBuffered 属性设置为 true 可以解决工件问题。

# java - ACM 竞赛中的斐波那契单词

> ID：15487137
> 
> 赞同：4
> 
> 时间：2013-03-18T21:18:51.940
> 
> 标签：java, algorithm

我试图弄清楚如何解决 ACM ICPC 决赛之一中的一个问题（从 2012 年开始，所以我猜是最近的）。它被称为斐波那契词，在问题 D 下进行了[描述](http://cm.baylor.edu/ICPCWiki/attach/Problem%20Resources/icpc2012.pdf)。

我想我已经很接近了，因为除了最后一个之外的所有测试用例都给出了正确的答案。但最后，我得到了 6440026026380244497，它处于正确的数量级，但仍然相差甚远——因为数量级很大。:)

这是我的 Java 代码，有很多注释（你认为太多了？可以重构吗？）：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class FibonacciWords {

public static StringBuilder[] updateChars(StringBuilder lastOneBack, StringBuilder firstTwoBack, StringBuilder lastTwoBack, StringBuilder firstThreeBack) {
    int pattLen = lastOneBack.length();
    StringBuilder[] newChars = new StringBuilder[2];
    newChars[0] = new StringBuilder(pattLen); // will become the new lastOneBack!
    newChars[1] = new StringBuilder(pattLen); // will become the new firstTwoBack!

    if(lastOneBack.charAt(0) == 'E') { // lastOneBack not full yet
        int shiftCharsBy = 0; // holds amount to shift lastOneBack by
        for(int i = 0; i < pattLen; i++) {
            if(firstTwoBack.charAt(i) != 'E') {
                shiftCharsBy++; // need to move whatever is at beginning of firstTwoBack to end of lastOneBack
            } else {
                break; // when first 'E' is reached in firstTwoBack, the rest are 'E' also
            }
        }

        for(int i = 0; i < pattLen-shiftCharsBy; i++) {
            newChars[0].append(lastOneBack.charAt(i+shiftCharsBy)); // shift lastOneBack by shiftCharsBy characters
        }
        for(int i = 0; i < shiftCharsBy; i++) {
            newChars[0].append(firstTwoBack.charAt(i)); // fill remainder of new lastOneBack with what's in firstTwoBack
        }
    } else { // lastOneBack already full
        newChars[0] = lastTwoBack; // make lastOneBack lastTwoBack (following pattern)
    }

    if(firstTwoBack.charAt(pattLen-1) == 'E') { // firstTwoBack not full yet
        if(lastOneBack.charAt(0) == 'E') {
            for(int i = 1; i < pattLen; i++) {
                if(lastOneBack.charAt(i) != 'E') {
                    newChars[1].append(lastOneBack.substring(i)); // move last characters of lastOneBack to front of new firstTwoBack
                    break;
                }
            }
            int charsAdded = newChars[1].length();
            for(int i = 0; i < pattLen-charsAdded; i++) {
                newChars[1].append('E'); // fill whatever might remain with 'E'
            }
        } else {
            //newChars[1] = lastOneBack;
            for(int i = 0; i < pattLen; i++) {
                if(firstTwoBack.charAt(i) != 'E') {
                    newChars[1].append(firstTwoBack.charAt(i));
                } else {
                    break;
                }
            }
            int charsAdded = newChars[1].length();
            // now take from firstThreeBack--which also isn't full if firstTwoBack isn't--until pattLen is reached
            for(int i = 0; i < pattLen-charsAdded; i++) {
                newChars[1].append(firstThreeBack.charAt(i));
            }
        }
    } else {
        newChars[1] = firstTwoBack; // firstTwoBack doesn't change when already full
    }

    return newChars;
}

public static void main(String[] args) throws IOException {
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    int n = Integer.parseInt(br.readLine());
    String pattern = br.readLine();

    long numPattTwoPrior = 0; // number of times pattern occurred in F(n-2)
    if(pattern.equals("0")) {
        numPattTwoPrior++; // since n starts at 2 below, increment this if pattern is F(0), or "0"
    }

    long numPattOnePrior = 0; // number of times pattern occurred in F(n-1)
    if(pattern.equals("1")) {
        numPattOnePrior++; // since n starts at 2 below, increment this if pattern is F(1), or "1"
    }

    int pattLen = pattern.length();
    StringBuilder lastCharsInOnePrior = new StringBuilder(pattLen); // keeps track of last pattLen characters in F(n-1)
    for(int i = 0; i < pattLen; i++) {
        lastCharsInOnePrior.append('E'); // 'E' stands for empty
    }
    lastCharsInOnePrior.setCharAt(pattLen-1, '1'); // since F(1) = "1"

    StringBuilder firstCharsInTwoPrior = new StringBuilder(pattLen);
    for(int i = 0; i < pattLen; i++) {
        firstCharsInTwoPrior.append('E');
    }
    firstCharsInTwoPrior.setCharAt(0, '0'); // since F(0) = "0"

    StringBuilder lastCharsInTwoPrior = null; // last characters always the same as 2 back, so keep track of this
    StringBuilder firstCharsInThreePrior = null; // used for special case in updateChars
    // number of times pattern occurs in F(n)
    long numPattCurr = (n == 0) ? numPattTwoPrior : (n == 1) ? numPattOnePrior : 0;

    for(int i = 2; i <= n; i++) { // finding F(n) up to the n given by the input
        numPattCurr = numPattTwoPrior + numPattOnePrior; // at least this many times in F(n)

        // adding to above all patterns found as part of concatenating F(n-1) and F(n-2), but not either on its own
        middle:
        for(int j = 1; j < pattLen; j++) { // starting at pos. 1 b/c [0, pattLen) is all F(n-1)
            if(lastCharsInOnePrior.charAt(j) == 'E') {
                continue;
            }

            StringBuilder compareWith = new StringBuilder(pattLen); // to compare with pattern
            for(int k = 0; k < pattLen; k++) {
                if(j + k >= pattLen) { // reached end of characters in F(n-1), start checking F(n-2)
                    int posInFirstChars = (j + k) % pattLen;
                    if(firstCharsInTwoPrior.charAt(posInFirstChars) == 'E') {
                        break middle; // none of the remaining overlap between F(n-1) and F(n-2) is as long as pattern, so can stop here
                    } else {
                        compareWith.append(firstCharsInTwoPrior.charAt(posInFirstChars));
                    }
                } else {
                    compareWith.append(lastCharsInOnePrior.charAt(j + k));
                }
            }

            if(pattern.equals(compareWith.toString())) {
                numPattCurr++; // this overlap matched pattern
            }
        }

        // changing characters of F(n-1) and F(n-2), as needed, for next iteration
        StringBuilder[] updatedChars = updateChars(lastCharsInOnePrior, firstCharsInTwoPrior, lastCharsInTwoPrior, firstCharsInThreePrior);
        lastCharsInTwoPrior = lastCharsInOnePrior;
        firstCharsInThreePrior = firstCharsInTwoPrior;
        lastCharsInOnePrior = updatedChars[0];
        firstCharsInTwoPrior = updatedChars[1];

        // changing number of times pattern found for F(n-1) and F(n-2) for next iteration
        numPattTwoPrior = numPattOnePrior;
        numPattOnePrior = numPattCurr;
    }
    System.out.println(numPattCurr);
    System.exit(0);
}
} 
```

我想我只留下了一行注释代码，当它是 else 块中的唯一一行时，它在所有测试用例中给出了完全相同的答案——尽管我用它替换它更正确。

关于我缺少什么或如何调试最后一个测试用例的任何建议？或者有兴趣与某人讨论，因为您正在为比赛做准备或只是在学习算法？请告诉我。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-15T16:43:11.703

带验证的[C++解决方案](http://codepad.org/PJ2Tkycb)[（在线判断）](https://www.hackerrank.com/acmfinals/challenges/fibonacciwords)

# java - MapReduce：将另一个桶中的对象映射到键列表（没有链接步行）？

> ID：15487140
> 
> 赞同：0
> 
> 时间：2013-03-18T21:18:54.040
> 
> 标签：java, scala, mapreduce, riak

**编辑：**看起来这个概念被称为“转发和收集”。看看这在 Riak-Java 客户端中是如何工作的。

现在在 Riak 中执行一个简单的 MapReduce，它返回一个`User`对象键列表。为了简单起见，我想简单地将 a 的值映射`User`到键并返回用户列表。这是我到目前为止在 Scala 中得到的（使用 Java 客户端），仅供参考，关键是复合的，看起来像`clientId-userId`：

```
val map = new JSSourceFunction("""
      function(riakObject){ 
            var rolek = riakObject.key;   
            return [rolek];
          }
    """)
        val reduce = new JSSourceFunction("""
      function(value){ 
            var returnValue=[], splitarr=[];  
            for(i=0;i<value.length;i++){ 
              splitarr=String(value[i]).split("-"); 
              returnValue = returnValue.concat([splitarr[1]]);  
            } 
            return returnValue; 
          }
    """)
    DB.client.mapReduce("rolesOfClientAdmins")
    .addKeyFilter(new TokenizeFilter("-", 1))
    .addKeyFilter(new MatchFilter(clientId))
    .addMapPhase(map)
    .addReducePhase(reduce)
    .execute().getResult(classOf[String]) 
```

我是否在 Reduce 阶段之后添加另一个 Map 阶段？我需要以某种方式更换水桶吗？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T23:19:54.143

我们以`rolesOfClientAdmins`bucket作为输入开始，拆分key得到`User`对象的ID。然后将存储桶名称“users”和用户 ID 传递到下一个映射阶段。

```
val mapRolesBucket = new JSSourceFunction("""
      function(value){
            var splitarr=value.key.split('-'); 
            return [[ 'users', splitarr[1] ]];
          }
    """)
val mapUsersBucket = new JSSourceFunction("""
      function(value){
            var obj = Riak.mapValuesJson(value)[0];
            return [ obj ];
          }
    """)
    DB.client.mapReduce("rolesOfClientAdmins")
    .addKeyFilter(new TokenizeFilter("-", 1))
    .addKeyFilter(new MatchFilter(clientId))
    .addMapPhase(mapRolesBucket)
    .addMapPhase(mapUsersBucket)
    .execute().getResult(classOf[String]) 
```

# c - 这个简单的 Queue 实现有什么问题吗？

> ID：15487141
> 
> 赞同：-1
> 
> 时间：2013-03-18T21:18:55.837
> 
> 标签：c, queue

假设，数组总是连续的，我想知道现在我正在做 memcpy 的 QPop 函数是否有什么问题？

```
-- C snip ---------
    int Q[5];
    int QPush();
    static int pushIdx;
    int QPush (int *q, int val)
    {
        int ret=0;

        if ( isQFull(q) )
            return -1;

        q[pushIdx++] = val;
        return ret;
    }

    int QPop ( int *q)
    {
        int i, ret=0;
        unsigned long size = pushIdx -1 ;

        if ( isQEmpty(q) )
            return -1;

        ret = q[0];

        if ( size > 0 )
            memcpy ( q, q+1, (size*sizeof(int)) );

        q[pushIdx-1] = 0;
        pushIdx--;
        return ret;
    }

    int main()
    {
    QPush(&Q , 11);
    QPush(&Q , 12);
    QPush(&Q , 13);

    printf ( "pop = %d ", QPop(&Q));
    printf ( "pop = %d ", QPop(&Q));
    } 
```

谢谢。-Nathan 它在我的所有条件下测试都很好[平台最新的 Linux gcc]，所以我正在寻找一个它可能会破坏的案例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T21:27:44.293

According to the manual of `memcpy()`, the memory areas must not overlap. But, *your* memory areas will. You should use `memmove()` for overlapping areas.

# java - JTable 列宽仅在两次请求后发生变化

> ID：15487143
> 
> 赞同：2
> 
> 时间：2013-03-18T21:18:57.430
> 
> 标签：java, swing, user-interface, jtable, preferredsize

在我的应用程序中，我有一个两列表，它将在程序的整个生命周期中动态填充。我有一个名为的方法`updateTableWidths`，当被调用时，它会执行以下操作：

*   使第一列与单元格内容所需的一样宽
*   使第二列与单元格内容所需的一样宽
*   如果整个表格比其容器宽，则启用水平滚动条
*   否则，让最后一列拉伸以填充容器

它似乎工作得很好，但由于某些非常奇怪的原因，它需要被调用**两次**（但仅在某些情况下，即当表格宽度增加而不是缩小时）。下面的 SSCCE 说明了我的困境。

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.UIManager;
import javax.swing.border.EmptyBorder;
import javax.swing.border.LineBorder;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableCellRenderer;

@SuppressWarnings("serial")
public class TableResizeTest extends JComponent {

    private JFrame frame;
    private JScrollPane scrollPane;
    private DefaultTableModel tableModel;
    private JTable table;
    private JPanel panel;

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (Throwable e) {
            e.printStackTrace();
        }
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    TableResizeTest window = new TableResizeTest();
                    window.frame.setVisible(true);
                    window.frame.requestFocusInWindow();
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    public TableResizeTest() {
        initialize();
    }

    private void initialize() {
        frame = new JFrame("Test");
        frame.setBounds(300, 300, 200, 300);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        tableModel = new DefaultTableModel(new Object[]{"Col_1", "Col_2"},0);

        table = new JTable(tableModel);
        table.setAutoResizeMode(JTable.AUTO_RESIZE_LAST_COLUMN);
        table.setAlignmentY(Component.TOP_ALIGNMENT);
        table.setAlignmentX(Component.LEFT_ALIGNMENT);
        table.setBorder(new EmptyBorder(0, 0, 0, 0));
        table.setFillsViewportHeight(true);
        table.setTableHeader(null);
        table.setEnabled(false);
        table.getColumnModel().setColumnMargin(0);
        frame.getContentPane().setLayout(new BoxLayout(frame.getContentPane(), BoxLayout.Y_AXIS));

        panel = new JPanel();
        frame.getContentPane().add(panel);
        panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));

        JButton btnFillTableShort = new JButton("Fill table short");
        btnFillTableShort.setAlignmentX(Component.CENTER_ALIGNMENT);
        panel.add(btnFillTableShort);

        JButton btnFillTableLong = new JButton("Fill table long");
        btnFillTableLong.setAlignmentX(Component.CENTER_ALIGNMENT);
        panel.add(btnFillTableLong);

        JButton btnUpdateTableWidths = new JButton("Update table widths");
        btnUpdateTableWidths.setAlignmentX(Component.CENTER_ALIGNMENT);
        panel.add(btnUpdateTableWidths);
        btnUpdateTableWidths.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                updateTableWidths();
            }
        });
        btnFillTableLong.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                fillTableLong();
            }
        });
        btnFillTableShort.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                fillTableShort();
            }
        });
        scrollPane = new JScrollPane(table);
        scrollPane.setPreferredSize(new Dimension(200, 100));
        scrollPane.setMaximumSize(new Dimension(32767, 100));
        frame.getContentPane().add(scrollPane);
        scrollPane.setAlignmentY(Component.TOP_ALIGNMENT);
        scrollPane.setBorder(new LineBorder(new Color(0, 0, 0)));

        frame.pack();
    }

    public void fillTableShort() {
        tableModel.setRowCount(0);
        tableModel.addRow(new Object[]{"short", "short"});
    }

    public void fillTableLong() {
        tableModel.setRowCount(0);
        tableModel.addRow(new Object[]{"looooooooooooooooooooong", "looooooooooooooooooooong"});
    }

    public void updateTableWidths() {
        int col_1_width = 0;
        for (int row = 0; row < table.getRowCount(); row++) {
            TableCellRenderer renderer = table.getCellRenderer(row, 0);
            Component comp = table.prepareRenderer(renderer, row, 0);
            col_1_width = Math.max (comp.getPreferredSize().width, col_1_width);
        }
        col_1_width += table.getIntercellSpacing().width;
        col_1_width += 10;
        table.getColumn("Col_1").setMinWidth(col_1_width);
        table.getColumn("Col_1").setMaxWidth(col_1_width);
        System.out.println("col_1_width was set to " + col_1_width);

        int col_2_width = 0;
        for (int row = 0; row < table.getRowCount(); row++) {
            TableCellRenderer renderer = table.getCellRenderer(row, 1);
            Component comp = table.prepareRenderer(renderer, row, 1);
            col_2_width = Math.max (comp.getPreferredSize().width, col_2_width);
        }
        col_2_width += table.getIntercellSpacing().width;
        int tableWidth = col_2_width + col_1_width;
        if (scrollPane.getVerticalScrollBar().isVisible()) {
            tableWidth += scrollPane.getVerticalScrollBar().getWidth();
        }
        if (tableWidth > scrollPane.getWidth()) {
            table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
            System.out.println("Auto resize was set to AUTO_RESIZE_OFF");
        } else {
            table.setAutoResizeMode(JTable.AUTO_RESIZE_LAST_COLUMN);
            col_2_width = scrollPane.getWidth() + col_1_width;
            System.out.println("Auto resize was set to AUTO_RESIZE_LAST COLUMN");
        }
        table.getColumn("Col_2").setPreferredWidth(col_2_width);
        table.getColumn("Col_2").setMinWidth(col_2_width);
        System.out.println("col_2_width was set to " + col_2_width + "\n");
    }
} 
```

以下是您可以遵循的一系列步骤来重现该行为：

1) 启动应用程序

2）点击按钮“填写表格短”

![在此处输入图像描述](../Images/8630842c6d689ea1429f5e434eeb8dfb.png)

3) 单击“更新表格宽度”按钮（在这种情况下，只需单击一次）

![在此处输入图像描述](../Images/3efc8d50534f5395a6d20223fad516ed.png)

4）点击按钮“填写表格长”

![在此处输入图像描述](../Images/a2891a867b5f0f4a7f5bf2b2d5641d32.png)

5）点击按钮“更新表格宽度”（第一次点击）

![在此处输入图像描述](../Images/642efcfad208d84a893f1a59e5afe94e.png)

6）点击按钮“更新表格宽度”（第二次点击）

![在此处输入图像描述](../Images/c9a7faa90d4fcb520c9b344f42683564.png)

第二次单击后，它正确显示。我有一些打印到控制台的调试信息，对于第一次和第二次单击，该方法似乎在做同样的事情：

```
col_1_width was set to 152
Auto resize was set to AUTO_RESIZE_OFF
col_2_width was set to 142 
```

因此，由于在第一次运行期间发生了更改，因此第二次发生的情况并没有明显的差异。正如我之前提到的，这只发生在表列增长而不是缩小时。

我真的很难过。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T21:33:58.407

您可能还需要为第一列指定首选大小，以便与滚动正常工作。尝试添加这一行：

```
table.getColumn("Col_1").setPreferredWidth(col_1_width); 
```

在处理方法中的`Col_1`计算的块中`updateTableWidths`。它解决了已发布的 SSCCE 中的问题。

***编辑：***

中存在对 maxWidth 和 minWidth 的依赖性`setPreferredWidth`。下面是`setPreferredWidth`. 所以顺序可能很重要。

```
public void setPreferredWidth(int preferredWidth) {
    int old = this.preferredWidth;
    this.preferredWidth = Math.min(Math.max(preferredWidth, minWidth), maxWidth);
    firePropertyChange("preferredWidth", old, this.preferredWidth);
} 
```

还探索`setMaxWidth`表明它也可以设置首选宽度：

```
public void setMaxWidth(int maxWidth) {
    int old = this.maxWidth;
    this.maxWidth = Math.max(minWidth, maxWidth);
    if (width > this.maxWidth) {
        setWidth(this.maxWidth);
    }
    if (preferredWidth > this.maxWidth) {
        setPreferredWidth(this.maxWidth);
    }
    firePropertyChange("maxWidth", old, this.maxWidth);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T21:34:14.487

尝试添加`TableColumn#setWidth`和/或`TableColumn#setPreferredWidth`

IE

```
table.getColumn("Col_1").setWidth(col_1_width);
table.getColumn("Col_1").setPreferredWidth(col_1_width);

//...///

table.getColumn("Col_2").setWidth(col_2_width);
table.getColumn("Col_2").setPreferredWidth(col_2_width); 
```

# android - 退出应用程序不会破坏数据

> ID：15487144
> 
> 赞同：0
> 
> 时间：2013-03-18T21:18:57.430
> 
> 标签：android, google-maps

我在手机上加载我的应用程序。使用它然后退出应用程序并重新开始。但它保留了以前的一些数据！如何？我怎么不能得到这些数据。我再次从头开始应用程序。在我的代码中有破坏功能。我应该放什么，这样每次我得到全新的数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:34:40.273

“退出应用程序”可能并不总是会破坏应用程序。也许它在内存中保持活跃并恢复而不是重新开始。尝试在 onPause() 或 onStop() 生命周期方法中清理“数据”。

# php - 如何将 facebook 评论框与我网站上 div 中的帖子相关联？

> ID：15487145
> 
> 赞同：-1
> 
> 时间：2013-03-18T21:19:05.137
> 
> 标签：php, javascript, html, facebook

我知道这是在这里[https://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/) 生成 javascript 和 html 代码。这是我的意思 [https://dl.dropbox.com/u/63111556/ubuntu.png](https://dl.dropbox.com/u/63111556/ubuntu.png)

在我的网站上，我正在尝试创建一个博客，以便用户发表评论 现在会有来自用户的不同帖子我如何制作与我网站上的特定帖子相关的评论框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:24:11.650

Facebook 页面生成的代码是这样的：

```
<div class="fb-comments" data-href="http://example.com" data-width="470" data-num-posts="10"></div> 
```

我建议给你的每篇文章一个单独的 URL 表示：/blog/food/my-sandwich /blog/food/my-chicken-fritter

`data-href`并且在呈现帖子列表时只需更改参数。

例如：

```
<?php
 foreach($posts as $post) {
  echo '<div class="post">';
  echo '<div class="post-title">' . $post->title . '</div>';
  echo '<div class="post-content">' . $post->content . '</div>';
  echo '<div class="post-comments"><div class="fb-comments" data-href="http://yoursite.com/blog/' . $post->url . '" data-width="470" data-num-posts="10"></div></div>';
  echo '</div>';
 }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:23:21.047

`data-href`为每次使用更改div 上的。您可以将其设置为元素 ID 或帖子编号，以使它们都不同：

```
 <div class="fb-comments" data-href="http://yourwebsite.com/#postIDorNumber" data-width="470" data-num-posts="10"></div>
<div class="fb-comments" data-href="http://yourwebsite.com/#postIDorNumber2" data-width="470" data-num-posts="10"></div>
<div class="fb-comments" data-href="http://yourwebsite.com/#postIDorNumber3" data-width="470" data-num-posts="10"></div> 
```

应该很容易在博客中实现动态地将帖子 ID 添加到`data-href`

# vba - VBA for PowerPoint 中是否有 IF 隐藏语句？

> ID：15487150
> 
> 赞同：0
> 
> 时间：2013-03-18T21:19:17.707
> 
> 标签：vba, ms-office, powerpoint

我正在尝试在 PowerPoint 中编写一个基本上是 IF 语句的宏。我有 4 个盒子，我有动画，当它们被点击时，它们会淡出。是否有可能有一个宏识别所有 4 个框何时都消失，然后淡入第五个框？

所以 4 个框在用户控制下消失，然后一旦它们都消失了，第五个会自动出现。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:46:08.470

不需要vba。给第五个动画你喜欢的任何动画，然后将其设置为 After Previous。如果需要，添加延迟。它会在前一个（即第四个形状）消失后动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:51:18.677

Ah. Thanks for clarifying.

Here you go:

```
' Give each of the four shapes an action setting of Run Macro:  HideMe

Sub HideMe(oSh As Shape)
    Dim oSl As Slide

    ' hide the clicked shape
    oSh.Visible = False

    ' test to see if all four shapes are hidden now
    ' edit to reflect the actual names of the shapes in use

    Set oSl = oSh.Parent    ' the slide containing the clicked shape
    With oSl
        If Not .Shapes("Rectangle 3").Visible Then
            If Not .Shapes("Rectangle 4").Visible Then
                If Not .Shapes("Rectangle 5").Visible Then
                    If Not .Shapes("Rectangle 6").Visible Then
                        ' they're all hidden, so make the new shape visible
                        .Shapes("Rectangle 7").Visible = True
                    End If
                End If

            End If
        End If
    End With

End Sub

Sub MakeMeInvisible()
' run this after selecting the final shape
' to make it invisible to begin with
    ActiveWindow.Selection.ShapeRange(1).Visible = False
End Sub 
```

# r - Aggregate a data frame based on unordered pairs of columns

> ID：15487151
> 
> 赞同：10
> 
> 时间：2013-03-18T21:19:21.423
> 
> 标签：r, aggregate, plyr

I have a data set that looks something like this:

```
 id1  id2   size
1   5400 5505      7
2   5033 5458      1
3   5452 2873     24
4   5452 5213      2
5   5452 4242     26
6   4823 4823      4
7   5505 5400     11 
```

Where `id1` and `id2` are unique nodes in a graph, and `size` is a value assigned to the **directed** edge connecting them *from* `id1` *to* `id2`. This data set is fairly large (a little over 2 million rows). What I would like to do is sum the size column, grouped by **unordered node pairs** of `id1` and `id2`. For example, in the first row, we have `id1=5400` and `id2=5505`. There exists another row in the data frame where `id1=5505` and `id2=5400`. In the grouped data, the sum of the size columns for these two rows would be added to a single row. So in other words I want to summarize the data where I'm grouping on an (unordered) set of (id1,id2). I've found a way to do this using `apply` with a custom function that checks for the reversed column pair in the full data set, but this works excruciatingly slow. Does anyone know of a way to do this another way, perhaps with `plyr` or with something in the base packages that would be more efficient?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-18T21:37:04.417

`pmax`一种方法是使用and `pmin`of`id1`和创建额外的列，`id2`如下所示。我将`data.table`在这里使用解决方案。

```
require(data.table)
DT <- data.table(DF)
# Following mnel's suggestion, g1, g2 could be used directly in by
# and it could be even shortened by using `id1` and id2` as their names
DT.OUT <- DT[, list(size=sum(size)), 
        by=list(id1 = pmin(id1, id2), id2 = pmax(id1, id2))]
#     id1  id2 size
# 1: 5400 5505   18
# 2: 5033 5458    1
# 3: 5452 2873   24
# 4: 5452 5213    2
# 5: 5452 4242   26
# 6: 4823 4823    4 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-20T21:10:31.373

另一种方法：

```
R> library(igraph)
R> DF
   id1  id2 size
1 5400 5505    7
2 5033 5458    1
3 5452 2873   24
4 5452 5213    2
5 5452 4242   26
6 4823 4823    4
7 5505 5400   11
R> g  <- graph.data.frame(DF, directed=F)
R> g  <- simplify(g, edge.attr.comb="sum", remove.loops=FALSE)
R> DF <- get.data.frame(g)
R> DF
   id1  id2 size
1 5400 5505   18
2 5033 5458    1
3 5452 2873   24
4 5452 5213    2
5 5452 4242   26
6 4823 4823    4 
```

# android - get Asset UriString

> ID：15487152
> 
> 赞同：0
> 
> 时间：2013-03-18T21:19:31.080
> 
> 标签：android, uri, inputstream, assets

I look for a solution to replace Images. Media. EXTERNAL_CONTENT_URI (type String uriString) by my asset

```
 InputStream ims = getAssets().open("a.jpg");
        // load image as Drawable
        Drawable d = Drawable.createFromStream(ims, null);
        Bitmap bitmap=drawableToBitmap(d);
        Uri imageUri = Uri.parse( Images.Media.EXTERNAL_CONTENT_URI + "/"  );
        bitmap = ImageLoader.loadFromUri( this, imageUri.toString(), 1024, 1024 );

        mImageView.setImageBitmapReset( bitmap,0,true); 
```

thank

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:43:39.233

你可以试试这个：

```
File file = new File("path_to_image_file");
Uri imageUri = Uri.fromFile(file); 
```

# python - load access log file into dataframe

> ID：15487164
> 
> 赞同：1
> 
> 时间：2013-03-18T21:20:20.610
> 
> 标签：python, python-2.7, pandas

I need to process a access log file and work on that. Is it posible to load a log file like access log into a data frame and work on that. I have a time stamp, response time and request url which I would like to work on.

example log line:

```
128.0.0.2 xml12.jantzens.dk - - [04/Mar/2013:07:59:29 +0100] 15625 "POST /servlet/XMLHandler HTTP/1.1" 200 516 "-" "dk.product.xml.client.transports.ServletBridge" "-" 
```

Update: I am extracting the response time and request using regular exp. So I am trying to create a dataset by adding DF.

```
df2 = pd.DataFrame({ 'time' : pd.Timestamp(timestamp),
                     'reponsetime' : responsetime,
                     'requesturl' : requesturl }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:01:10.933

我建议使用正则表达式并将数据加载到某种类型的内存结构中（我假设这就是您所说的数据框的意思）。

我喜欢使用 Kodos 开发正则表达式： http: [//kodos.sourceforge.net/](http://kodos.sourceforge.net/)

对于您在上面提供的日志片段，以下正则表达式将隔离一些重要部分：

```
^(?P<host>[0-9.a-zA-Z ]+)\s-\s-\s\[(?P<day>[0-9]{2})/(?P<month>[a-zA-Z]{3})/(?P<timestamp>[0-9:]+ \+[0-9]{4})]\s+[0-9]+\s+"([a-zA-Z0-9 /.']+)"\s+([0-9]{3})\s+([0-9]{3})\s+"([a-zA-Z0-9 /.-]+)"\s+"([a-zA-Z0-9 /.-]+)"\s+"([a-zA-Z0-9 /.-]+)" 
```

Kodos 也创建了一些有用的代码片段：

```
rawstr = r"""^(?P<host>[0-9.a-zA-Z ]+)\s-\s-\s\[(?P<day>[0-9]{2})/(?P<month>[a-zA-Z]{3})/(?P<timestamp>[0-9:]+ \+[0-9]{4})]\s+[0-9]+\s+"([a-zA-Z0-9 /.']+)"\s+([0-9]{3})\s+([0-9]{3})\s+"([a-zA-Z0-9 /.-]+)"\s+"([a-zA-Z0-9 /.-]+)"\s+"([a-zA-Z0-9 /.-]+)""""
embedded_rawstr = r"""^(?P<host>[0-9.a-zA-Z ]+)\s-\s-\s\[(?P<day>[0-9]{2})/(?P<month>[a-zA-Z]{3})/(?P<timestamp>[0-9:]+ \+[0-9]{4})]\s+[0-9]+\s+"([a-zA-Z0-9 /.']+)"\s+([0-9]{3})\s+([0-9]{3})\s+"([a-zA-Z0-9 /.-]+)"\s+"([a-zA-Z0-9 /.-]+)"\s+"([a-zA-Z0-9 /.-]+)""""
matchstr = """128.0.0.2 xml12.jantzens.dk - - [04/Mar/2013:07:59:29 +0100] 15625 "POST /servlet/XMLHandler HTTP/1.1" 200 516 "-" "dk.product.xml.client.transports.ServletBridge" "-""""

# method 1: using a compile object
compile_obj = re.compile(rawstr)
match_obj = compile_obj.search(matchstr)

# method 2: using search function (w/ external flags)
match_obj = re.search(rawstr, matchstr)

# method 3: using search function (w/ embedded flags)
match_obj = re.search(embedded_rawstr, matchstr)

# Retrieve group(s) from match_obj
all_groups = match_obj.groups()

# Retrieve group(s) by index
group_1 = match_obj.group(1)
group_2 = match_obj.group(2)
group_3 = match_obj.group(3)
group_4 = match_obj.group(4)
group_5 = match_obj.group(5)
group_6 = match_obj.group(6)
group_7 = match_obj.group(7)
group_8 = match_obj.group(8)
group_9 = match_obj.group(9)
group_10 = match_obj.group(10)

# Retrieve group(s) by name
host = match_obj.group('host')
day = match_obj.group('day')
month = match_obj.group('month')
timestamp = match_obj.group('timestamp') 
```

您可以很容易地在此基础上将日志加载到内存中并开始处理。

# java - Cannot read data from newly uploaded Excel file

> ID：15487166
> 
> 赞同：0
> 
> 时间：2013-03-18T21:20:29.147
> 
> 标签：java, excel, file-upload

I'm working on a system where the users need to be able to upload an excel file to the server, then the system needs to process the excel file to load data into the XMPie uProduce system.

I already have it working to load CSV files into the system. I can confirm that the excel files have been uploaded to the server successfully. However, when my program then tries to access the excel file in order to read the data, it gets this error:

`The Microsoft Jet database engine could not find the object 'Sheet1'. Make sure the object exists and that you spell its name and the path name correctly.`

I am setting the filter as:

`select * from [Sheet1]`

I have also tried it as:

`select * from [filename.xls]`

Neither have worked. Does anyone have any suggestions what the SQL filter should be for pulling data from a database?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T01:10:55.900

尝试这个..

编写 Excel 查询与在任何其他传统数据存储（如 SQL Server、Oracle 等）中编写查询类似。但是有一些区别。首先，您必须指定工作表名称而不是表名称。接下来，您必须提供起始和结束单元格引用。仔细看我下面的代码：

选择 * 从 [用户 $A1:F500]

这里的用户是电子表格名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T23:00:37.820

通过 ADO 或类似方法在 SQL 查询中指定 Excel 工作表名称时，您必须在工作表名称的末尾添加一个 $ 符号。尝试：

`SELECT * FROM [Sheet1$]`

更多信息[在这里](http://support.microsoft.com/kb/257819)

# r - quantmod get offset on date

> ID：15487168
> 
> 赞同：1
> 
> 时间：2013-03-18T21:20:40.487
> 
> 标签：r, quantmod

try following code

```
sp500 <- new.env()

getSymbols("^GSPC", env = sp500, src = "yahoo",
           from = as.Date("2008-01-04"), to = Sys.Date())

GSPC <- get("GSPC", envir = sp500) 
```

and the date is offset:

```
2013-03-03   1518.20   1525.27  1512.29    1525.20  3414430000       1525.20
2013-03-04   1525.20   1543.47  1525.20    1539.79  3610690000       1539.79
2013-03-05   1539.79   1545.25  1538.11    1541.46  3676890000       1541.46
2013-03-06   1541.46   1545.78  1541.46    1544.26  3634710000       1544.26
2013-03-07   1544.26   1552.48  1542.94    1551.18  3652260000       1551.18
2013-03-10   1551.15   1556.27  1547.36    1556.22  3091080000       1556.22
2013-03-11   1556.22   1556.77  1548.24    1552.48  3274910000       1552.48
2013-03-12   1552.48   1556.39  1548.25    1554.52  3073830000       1554.52
2013-03-13   1554.52   1563.32  1554.52    1563.23  3459260000       1563.23
2013-03-14   1563.21   1563.62  1555.74    1560.70  5175850000       1560.70 
```

the 2013-03-10 is Sunday...

Any ideas? thank you in advance.

Here is my sessionInfo output, and I've updated two packages, but the issue is still there:

```
 ===============================================================
R version 2.15.2 (2012-10-26)
Platform: i686-pc-linux-gnu (32-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] quantmod_0.4-0 TTR_0.21-1     xts_0.9-3      zoo_1.7-7      Defaults_1.1-1
[6] RMySQL_0.9-3   DBI_0.2-5     

loaded via a namespace (and not attached):
[1] grid_2.15.2     lattice_0.20-10 tools_2.15.2 
```

# .net - How to suicide a console app?

> ID：15487170
> 
> 赞同：1
> 
> 时间：2013-03-18T21:20:45.677
> 
> 标签：.net, windows, c#-4.0, process

I have a Console App which creates/launches other sub-processes. I need to check somehow if itself or his ProcessChilds are went to deadlock, and kill the youngest of the associated process tree.

With this objective, his process childs, may have the same "kind of recursive" algorithm.

The idea is not to kill the youngest process but instead to get the youngest to suicide by command (in a sort of speak).

Is there a way I can call an async method inside the process (maybe the same method that should exist in his childs) to do that?

Well of course I could use a persistent file and a "WatchDog/KeepAliveLook" of that file and when it does not exist anymore they do it (suicide) but I'm convinced there's a cleaner way to do this.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:24:05.620

我会使用某种进程间通信方法（远程处理、WCF、命名管道、窗口事件、DDE 等）来发送通知以“吃毒丸”。更大的问题是你为什么要这样设计？听起来有点古老和过时的建筑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:24:36.747

如果一个进程完全死锁，那么你就不能使用它的任何线程。您需要（外部）在进程中创建一个新线程，这只能通过 Windows 的调试 API 来完成。

如果你想杀死一个子进程，为什么不直接杀死它而不是让它杀死自己呢？

# asp.net-mvc - Using additional filters with PagedList and a ViewModel

> ID：15487173
> 
> 赞同：2
> 
> 时间：2013-03-18T21:20:59.343
> 
> 标签：asp.net-mvc, razor, automapper, pagedlist

I need to know how to get additional properties added to the object returned by [PagedList.Mvc package](https://github.com/TroyGoode/PagedList) when I use `ToPagedList` so that I can avoid using ViewBags to pass sort order parameters around.

I know that when using `ToPagedList` it converts an IEnumerable into an IPagedList and I've made my view Strongly Typed to `PagedList.IPagedList<MyModel>` which allows me to get paging and use a `foreach` to display the results in a table. However there doesn't seem to be any way for me to pass along additional values such as my sort order or filter string.

I'm using [AutoMapper](http://automapper.org/) to map between my domain and ViewModel like this to flatten my domain model into a ViewModel:

```
Mapper.CreateMap<ToDo, IndexToDoViewModel>()
      .ForMember(dest => dest.Priority, 
                 opt => opt.MapFrom(src => src.Priority.PriorityName))
      .ForMember(dest => dest.Staff, 
                 opt => opt.MapFrom(src => src.Staff.StaffName)); 
```

so that to return data in my controller I can do

```
var query = Session.QueryOver<ToDo>();
var result = query.Fetch(p=>p.Priority).Eager
                  .Fetch(s=>s.Staff).Eager
                  .List();

var viewModel = AutoMapper.Mapper.Map<IEnumerable<ToDo>, 
                                      IEnumerable<IndexToDoViewModel>>(result)
                                 .ToPagedList(pageNumber, PageSize);
return View(viewModel); 
```

So that in my View I can strongly type it like this

```
@model PagedList.IPagedList<TheWorkshop.Web.Models.Read.IndexToDoViewModel> 
```

Which in turn allows me to get the paging I want with a nice simple

```
@Html.PagedListPager(@Model, page => Url.Action("Index", new { page = page})) 
```

and to display my list of Todo Items use a

```
@foreach (var item in Model) { .... 
```

to iterate through them

As I said the trouble is that I also want to have properties such as the `SortOrder`, `SearchFilter` and `IncludeCompleted` in my ViewModel because at present they're being passed around in ViewBags and I'd like to clean that up.

```
@Html.ActionLink("Name", "Index", new {sortOrder=ViewBag.NameSortParam, 
                                  includeComplete = ViewBag.IncludeCompleted}) 
```

But because they're not part of the ToDo entity, they really belong on the ToPagedList extensions I'm stuck. Ideally I'd like to somehow pass them along with the other properties that are exposed by being a PagedList such as `PageCount` or `PageNumber`, but short of deriving my own PagedList or forking the original I don't see how I can support passing such properties. All the examples on the github page make heavy use of ViewBag.

I've been unable to add a wrapper class around my `IndexToDoViewModel` so it has an IEnumerable or IPagedList as well as the sorting properties as this then makes my AutoMappings invalid.

Am I stuck with using ViewBags for the SortOrder filter or is there a way to have my cake and eat it by getting the properties included in my ViewModel, using AutoMapper and keeping the view strongly typed?

# c# - 从动态创建的面板中清除动态控件

> ID：15487175
> 
> 赞同：0
> 
> 时间：2013-03-18T21:21:00.533
> 
> 标签：c#, winforms, visual-studio-2010, dynamic

我在winforms中有以下程序： ![在此处输入图像描述](../Images/6bb1d227266018bca101667c71288df2.png)

我想清除您在面板中看到的两个按钮。

我的代码似乎只清除了最后一个面板中的最后一个按钮。我需要清除所有面板。我在这里错过了什么：

```
 public Form1()
        {
            InitializeComponent();
        }

        Panel pnl1;
        Panel pnl2;
        Button btn;
        private void createPanels(int spacing)
        {
            pnl1 = new Panel();
            pnl1.Location = new Point(5, spacing);
            pnl1.BorderStyle = BorderStyle.FixedSingle;
            pnl1.Size = new Size(85, 93);
            this.Controls.Add(pnl1);

            pnl2 = new Panel();
            pnl2.Location = new Point(91, spacing);
            pnl2.BorderStyle = BorderStyle.FixedSingle;
            pnl2.Size = new Size(85, 93);
            this.Controls.Add(pnl2);

        }

        void addCons()
        {
            btn = new Button();
            btn.Size = new Size(40, 20);
            btn.Location = new Point(5, 5);

        }

        private void Form1_Load(object sender, EventArgs e)
        {
            addCons();
            createPanels(5);
            pnl1.Controls.Add(btn);

            addCons();
            createPanels(99);
            pnl1.Controls.Add(btn);
        }

        private void button1_Click(object sender, EventArgs e)
        {
            pnl1.Controls.Clear();
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T21:25:32.170

只有一个面板被清除的原因是因为您`pnl1`每次调用时都在重新分配变量的值`createPanels`。避免在此处使用全局`Panel`变量，并考虑将面板存储在列表中。

```
//class level variable
List<Panel> allPanels = new List<Panel>();

//...   

Panel pnl1 = new Panel();
//...panel code
this.Controls.Add(pnl1);
allPanels.add(pnl1);

Panel pnl2 = new Panel();
//...panel code
this.Controls.Add(pnl2);
allPanels.add(pnl2);

//..
private void button1_Click(object sender, EventArgs e)
{
    foreach(Panel p in allPanels) {
        while (p.Controls.Count > 0) p.Controls[0].Dispose();
    }
} 
```

或者，您可以遍历表单上的所有控件并获得`Panels`类似的结果，但使用列表可以为您提供更多控制权，并可能避免遍历大量控件。

# c++ - OpenCV's findHomography produces nonsense results

> ID：15487176
> 
> 赞同：5
> 
> 时间：2013-03-18T21:21:02.220
> 
> 标签：c++, opencv

I am making a program that tracks features with ORB from OpenCV (2.43) I followed [this tutorial](http://morf.lv/modules.php?name=tutorials&lasit=2#.UUclTxz7CSq) and used advice [from here](https://stackoverflow.com/questions/9919505/how-can-i-extract-fast-features-from-an-image).

My goal is to track the object in video feed (face) and draw a rectangle around it.

My program finds keypoints and matches them correctly, but when I try to use `findHomography` + `perspectiveTransform` to find new corners for the image usually returns some nonsense type values (though sometimes it returns correct homography).

Here is an example picture: ![example](../Images/8cd1f0ccd4b0adcf62ca80823423de6a.png)

Here is the corresponding problematic part:

```
Mat H = findHomography( obj, scene, CV_RANSAC );  

//-- Get the corners from the image_1 ( the object to be "detected" )
std::vector<Point2f> obj_corners(4);
obj_corners[0] = cvPoint(0,0); obj_corners[1] = cvPoint( img_object.cols, 0 );
obj_corners[2] = cvPoint( img_object.cols, img_object.rows ); obj_corners[3] = cvPoint( 0, img_object.rows );
std::vector<Point2f> scene_corners(4);

perspectiveTransform( obj_corners, scene_corners, H);

//-- Draw lines between the corners (the mapped object in the scene - image_2 )
line( img_matches, scene_corners[0] + Point2f( img_object.cols, 0), scene_corners[1] + Point2f( img_object.cols, 0), Scalar(0, 255, 0), 4 );
line( img_matches, scene_corners[1] + Point2f( img_object.cols, 0), scene_corners[2] + Point2f( img_object.cols, 0), Scalar( 0, 255, 0), 4 );
line( img_matches, scene_corners[2] + Point2f( img_object.cols, 0), scene_corners[3] + Point2f( img_object.cols, 0), Scalar( 0, 255, 0), 4 );
line( img_matches, scene_corners[3] + Point2f( img_object.cols, 0), scene_corners[0] + Point2f( img_object.cols, 0), Scalar( 0, 255, 0), 4 ); 
```

Rest of the code is practically the same as in the links I provided. The lines drawn seem completley random, my goal is only to get minimal rectangle of the source object in new scene, so if there is alternative to using homography that works too.

P.S. Source image to track is a region that is copied from video input and then tracked in new pictures from that input, does it matter?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-01T20:03:14.863

该函数**`perspectiveTransform`**在您的对应点集不易出错的假设下估计单应性。但是，在现实世界的数据中，您不能假设。解决方案是使用稳健的估计函数（例如 RANSAC）来解决作为超定方程组的单应性问题。

您可以改用**`findHomography`**返回单应性的函数。该函数的输入是一组点。这组至少需要 4 分，但更大的一组更好。单应性只是一个估计，但对错误更稳健。通过使用**CV_RANSAC**标志，它能够在内部删除异常值（错误的点对应）。

# plone - How to test Plone addon on Travis CI

> ID：15487177
> 
> 赞同：3
> 
> 时间：2013-03-18T21:21:08.530
> 
> 标签：plone

Currently there has been movement to start continuous integration of Plone addons on Travis CI service. I have seen a lot of packages doing their own this and that testing, from running unit tests to do source code linting of merge requests. I see this healthy development as it takes the pain of setting up your own test runner and makes it easier for less Python-sawy community members to have tests run for their patches.

However, I have not found a definite guide of best practices how one should test his/her addon on Travis CI. At least in my case this has resulted to [cargo cult programming](http://en.wikipedia.org/wiki/Cargo_cult_programming) and copy-pasting code from other random addons, because I don't know what's available and how one should do it.

Could authors, who have insight how Travis CI and Plone testing works clarify

*   What kind of tests you should run on Travis CI

*   How you should run these tests, in particulary in the context of collective package

*   What are the best examples you should look into

*   Where these practices are or should be documented*

*   How one should test against multiple Plone versions, or is it possbile

*   Where to pipe the result? Personal email?

*) Traditional Finnish carrot provided for those who open their text editor and spend five minutes to dump the contents of their brain

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T06:48:49.430

> 你应该在 Travis CI 上运行什么样的测试

所有不在 Plone 核心中且尚未在 jenkins.plone.org 上测试的集合或其他包。

> 你应该如何运行这些测试，特别是在集体包的情况下

[http://datakurre.pandala.org/2012/09/speed-up-your-plone-add-on-tests-on.html](http://datakurre.pandala.org/2012/09/speed-up-your-plone-add-on-tests-on.html)

另见 Nejc 的演讲：

[http://de.slideshare.net/zupo/travis-ci-fun-and-easy-ci-for-your-plone-packages](http://de.slideshare.net/zupo/travis-ci-fun-and-easy-ci-for-your-plone-packages)

> 您应该研究的最佳示例是什么

这些包都使用 Asko 的博文中描述的方法：

[https://github.com/collective/collective.mailchimp](https://github.com/collective/collective.mailchimp) [https://github.com/plone/plone.act](https://github.com/plone/plone.act) [https://github.com/plone/plone.app.collection](https://github.com/plone/plone.app.collection)

> 这些做法在哪里或应该记录在案*

测试团队目前正在编写包含 travis ci 最佳实践的测试文档。

> 应该如何针对多个 Plone 版本进行测试，或者是否可能

这应该是可能的。我不确定是否有人尝试过。也许其他人能够回答这个问题。

> 在哪里管道传输结果？个人电邮？

我想这取决于包装。我目前将我的个人电子邮件地址用于我正在处理的集体包裹。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T07:51:35.173

> 应该如何针对多个 Plone 版本进行测试，或者是否可能

plone.api 针对不同的 Python (2.6 & 2.7) 和 Plone (4.2 & 4.3) 版本进行测试：[https ://github.com/plone/plone.api/blob/master/.travis.yml](https://github.com/plone/plone.api/blob/master/.travis.yml)

> 在哪里管道传输结果？个人电邮？如果您将电子邮件通知留空，它将向触发构建的人（也就是最后一个提交者）发送电子邮件。我发现这是一个合理的默认设置。

除此之外，我总是向 IRC 频道发布消息：#niteoweb 用于我们维护的包，# *client*用于我们所做的客户端工作，#sprint 用于 plone.api（这个需要更改，Plone 需要一个 CI 频道，我们可以在其中发布此类通知）。

# linux - how to delete node on linux mint 13?

> ID：15487183
> 
> 赞同：1
> 
> 时间：2013-03-18T21:21:27.647
> 
> 标签：linux, node.js

Node will not delete on Linux Mint 13.

see the video here [http://youtu.be/tV8HhS1xw2g](http://youtu.be/tV8HhS1xw2g) and here [http://www.youtube.com/watch?v=g8DNvv3iFdI](http://www.youtube.com/watch?v=g8DNvv3iFdI)

I installed via git but node failed to run see [https://github.com/Jermolene/TiddlyWiki5/issues/73](https://github.com/Jermolene/TiddlyWiki5/issues/73) for the tests I ran to try to get node to play nice.

so I uninstalled the git version and installed the Ubuntu v. apt-get install node $ which node /usr/local/bin/node

```
$ node --version
v0.5.11-pre 
```

That node didn't work either... but I can't delete node now!

```
$ sudo apt-get remove node
[sudo] password for dennis: 
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Package node is not installed, so not removed 
```

It's not deleting but the system still sees it.

```
$ which node
/usr/local/bin/node 
```

I tried the advice found on: [Uninstall Node.JS using Linux command line?](https://stackoverflow.com/questions/5650169/uninstall-node-js-using-linux-command-line) but that didn't work either.

```
$./configure --prefix=$HOME/local/node sudo make uninstall
bash: ./configure: No such file or directory
dennis@64maya /usr/local/src/ipython/examples/notebooks $ sudo ./configure --prefix=$HOME/local/node sudo make uninstall
sudo: ./configure: command not found 
```

Node is still installed:

```
$ node --version
v0.5.11-pre

$ which node
/usr/local/bin/node

$ cd /usr/local/bin
$ ls
apt               ipcluster3     iplogger3  irunner3       pycolor
easy_install      ipcontroller   iptest     mint-md5sum    pycolor3
easy_install-3.2  ipcontroller3  iptest3    node           pygmentize
f2py3.2           ipengine       ipython    node-waf       search
highlight         ipengine3      ipython3   nosetests      yelp
ipcluster         iplogger       irunner    nosetests-3.2  zim 
```

I tried dpkg... no joy.

```
$ dpkg -r node
dpkg: error: requested operation requires superuser privilege
dennis@64maya /usr/local/bin $ sudo dpkg -r node
dpkg: warning: there's no installed package matching node
dennis@64maya /usr/local/bin $ which node
/usr/local/bin/node

dennis@64maya /usr/local/bin $ node --version
v0.5.11-pre 
```

How to delete all remnants of node so that I can eventually try to install it again?

Thank you Dennis

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:57:24.157

你不需要。只需再次下载并

```
git clone https://github.com/joyent/node
cd node
./configure --prefix=/usr/local
make
sudo make install 
```

然后，您将覆盖以前安装的所有文件，因为您保持`--prefix=/usr/local`不变，因此安装过程应将所有文件覆盖到相同的相对文件路径中，如下`/usr/local`

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:05:08.167

您需要再次从 git 获取源代码，以便您可以`./configure`从源目录中运行脚本和制作脚本。我认为，那里的问题也是你使用了错误的前缀。鉴于您的`which`命令的输出显示`node`安装在 中`/usr/local/bin/node`，我认为您`--prefix`是`/usr/local/`。所以试试：

```
./configure --prefix=/usr/local && sudo make uninstall 
```

从源目录中。

# c# - 如何使用 c# 和 asp.net 在我的页面粉丝墙上的 facebook 上发帖

> ID：15487184
> 
> 赞同：4
> 
> 时间：2013-03-18T21:21:33.993
> 
> 标签：c#, asp.net, facebook, facebook-graph-api

从 3 天开始，我尝试了如何使用 c# 创建我的粉丝页面墙的帖子，我注意到两件事：-Facebook 提供未更新的文档，没有完整和糟糕的示例（api 经常更改）-Facebook 经常更改他的 api 和大量帖子已过时。有人可以更正我的代码或为我提供完整的好代码吗？

这是我的代码：

```
 if (String.IsNullOrEmpty(Request.QueryString["code"]))
            {
                Response.Redirect("https://graph.facebook.com/oauth/authorize?client_id=157873644371673&redirect_uri=http://localhost:2551/Default.aspx&scope=publish_stream,manage_pages,offline_access&display=popup");
            }
            else
            {

    FacebookClient fb = new FacebookClient();
                    dynamic result1 = fb.Get("oauth/access_token", new
                    {
                        client_id = "MY_APP_ID",
                        client_secret = "MY_SECRET_ID",
                        grant_type = "client_credentials",
                        redirect_uri = "www.mysite.com"
                    });

                    fb.AppId = "MY_APP_ID";
                    fb.AppSecret = "MY_SECRET_ID";
                    fb.AccessToken = result1.access_token;

                     dynamic parameters = new ExpandoObject();
                    parameters.message = "Check out this funny article";
                    parameters.link = "http://www.example.com/article.html";
                    parameters.picture = "http://www.example.com/article-thumbnail.jpg";
                    parameters.name = "Article Title";
                    parameters.caption = "Caption for the link";
                    parameters.description = "Longer description of the link";
                    parameters.req_perms = "manages_pages";
                    parameters.scope = "manages_pages";

                    parameters.actions = new
                    {
                        name = "View on Zombo",
                        link = "www.zombo.com",
                    };
                    parameters.privacy = new
                    {
                        value = "ALL_FRIENDS",
                    };

                    try
                    {
                        var result = fb.Post("/" + "MY_FACEBOOK_FAN_PAGE_ID" + "/feed", parameters);
                    }
                    catch (FacebookOAuthException ex)
                    {
                        //handle something
                        Response.Write(ex.Message);
                    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T08:29:15.943

我希望这篇文章对很多人有帮助，我尽量简单明了：

1-创建您的 facebook 开发者帐户，并在您的计算机 ( `localhost`) 中测试您的代码，在“使用 facebook 身份验证的网站身份验证”字段中设置您的本地主机地址。对我来说，这将是`http://localhost:2551/Default.aspx`例如因为我在我的 wweb 应用程序的 Defaut.aspx 中进行测试。当您在您的网站上部署时，您将更改此地址（对我而言，我将在将代码部署到我的网站之前更改为[http://www.mywebsiteurl.com/Default.aspx ）。](http://www.mywebsiteurl.com/Default.aspx)

2- 使用您的 facebook 用户帐户，创建您的粉丝页面。

3-当你创建你的粉丝页面时，去你的粉丝页面查看获​​取你的 PAGE_ID 的 URL 例如我的是[http://www.facebook.com/pages/toto/446533181408238?ref=ts&fref=ts](http://www.facebook.com/pages/toto/446533181408238?ref=ts&fref=ts) 所以我的 PAGE_ID 是446533181408238

3-几乎完成了，只是一点点解释：因为我创建了粉丝页面，我是粉丝页面的管理员，我必须要求 facebook 的授权从我的开发者帐户发布，所以我必须获得 2 个操作的授权：publish_stream 和管理页面。

让我们开始编码：

```
 private void Do()
        {
            string app_id = "157873644371675";
            string app_secret = "c27a10c347af4280720fa3d76c9ae08c";
            string scope = "publish_stream,manage_pages";

            if (Request["code"] == null)
            {
                Response.Redirect(string.Format(
                    "https://graph.facebook.com/oauth/authorize?client_id={0}&redirect_uri={1}&scope={2}",
                    app_id, Request.Url.AbsoluteUri, scope));
            }
            else
            {
                Dictionary<string, string> tokens = new Dictionary<string, string>();

                string url = string.Format("https://graph.facebook.com/oauth/access_token?client_id={0}&redirect_uri={1}&scope={2}&code={3}&client_secret={4}",
                    app_id, Request.Url.AbsoluteUri, scope, Request["code"].ToString(), app_secret);

                HttpWebRequest request = System.Net.WebRequest.Create(url) as HttpWebRequest;

                using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
                {
                    StreamReader reader = new StreamReader(response.GetResponseStream());

                    string vals = reader.ReadToEnd();

                    foreach (string token in vals.Split('&'))
                    {
                        //meh.aspx?token1=steve&token2=jake&...
                        tokens.Add(token.Substring(0, token.IndexOf("=")),
                            token.Substring(token.IndexOf("=") + 1, token.Length - token.IndexOf("=") - 1));
                    }
                }

                string access_token = tokens["access_token"];

                var client = new FacebookClient(access_token);

                dynamic parameters = new ExpandoObject();
                parameters.message = "Check out this funny article";
                parameters.link = "http://www.natiska.com/article.html";
                parameters.picture = "http://www.natiska.com/dav.png";
                parameters.name = "Article Title";
                parameters.caption = "Caption for the link";

                //446533181408238 is my fan page
                client.Post("/446533181408238/feed", parameters);

            }
              } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:07:30.297

您通过 Graph API 请求传递的参数有一些问题。

1.  您不会有效地请求权限：
    *   该`req_perms`参数已弃用并已替换为`scope`,
    *   权限是通过登录链接传递的，而不是通过 Graph API 请求传递的！
2.  该`action`字段需要一个**数组**，而该`privacy`字段需要一个**JSON**。

数组的样子：`"actions": {'value': 'CUSTOM', 'allow': '{friend-list-id}'}`.

JSON 的样子：

```
"privacy": [   
    {
      "name": "Comment", 
      "link": "https://www.facebook.com/1234567890/posts/09876543210987654321"
    }, 
    {
      "name": "Like", 
      "link": "https://www.facebook.com/1234567890/posts/09876543210987654321"
    }
] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-22T07:28:18.807

我正在使用以下代码将图像发布到我的 Facebook 页面墙上

```
 string app_id = "*************";
string app_secret = "*************";
string scope = "publish_actions,manage_pages";
string accessToken = GetAccessToken(FacebookAppId, FacebookAppSecret);
            if (Request["code"] == null)
            {
Response.Redirect(string.Format("https://graph.facebook.com/oauth/authorize?client_id={0}&redirect_uri={1}&scope={2}",app_id, Request.Url.AbsoluteUri, scope));
            }
            else
            {
                FacebookClient fb = new FacebookClient();
                dynamic result1 = fb.Get("oauth/access_token", new
                {
                    client_id = "******",
                    client_secret = "*************",
                    grant_type = "publish_actions,manage_pages",
                    redirect_uri = "*************"
                });

                fb.AppId = "MY_APP_ID";
                fb.AppSecret = "MY_SECRET_ID";
                fb.AccessToken = result1.access_token;
// to make new object
                dynamic parameters = new ExpandoObject();
                parameters.message = "Check out this funny article";
                parameters.link = "*************";
                parameters.picture = "*************";
                parameters.name = "*************";
                parameters.caption = "*************";
                parameters.description = "*************";
                parameters.req_perms = "*************";
                parameters.scope = "*************";

                parameters.actions = new
                {
                    name = "*************",
                    link = "*************",
                };
                parameters.privacy = new
                {
                    value = "*************",
                };

                try
                {
                    var result = fb.Post("/" + "*************" + "/feed", parameters);
                } 
```

# sql - Find Gaps in Date Ranges using sql in Oracle

> ID：15487186
> 
> 赞同：2
> 
> 时间：2013-03-18T21:22:00.310
> 
> 标签：sql, oracle, datetime, plsql, gaps-and-islands

I need to find Gaps between DateRanges of base and test ranges using sql.here is my example SD and ED are start and End Dates. all rows for both A and B are in same table.

**A's Date**

```
ID    SD            ED
 A   20130101      20130531
 A   20130601      20131031 
```

**B's Date**

```
 ID  SD            ED
 B   20130120      20130420
 B   20130601      20130830
 B   20130910      20131130 
```

> ```
> Output should be: 
> the Dates that are in A but are not in B with no dates overlaps 
> ```

**Missing Gap Ranges**

```
SD           ED
20130101     20130119
20130421     20130531
20130831     20130909 
```

i looked at some example in here [http://asktom.oracle.com/pls/apex/f?p=100:11:0::::P11_QUESTION_ID:529176000346581356](http://asktom.oracle.com/pls/apex/f?p=100:11:0::::P11_QUESTION_ID:529176000346581356) but they did not scenario like mine.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:28:48.547

```
select 
   to_char(SD, 'yyyymmdd') as SD,
   to_char(ED, 'yyyymmdd') as ED
from
   (  -- prepare gaps in each A after removing all B
      select
         BED + 1 as SD,
         lead(BSD, 1, AED + 1) over (partition by ASD,AED order by BSD) - 1 as ED
      from
         (  -- prepare all intersections between A and B
            select AA.sd as ASD, AA.ed as AED, BB.sd as BSD, BB.ed as BED
            from AA join BB on least(AA.ed, BB.ed) >= greatest(AA.sd, BB.sd)
            union all
            select AA.sd, AA.ed, to_date('1000','yyyy'), AA.sd - 1
            from AA
         )
   )   
where SD <= ED  -- exclude empty gaps
order by 1 
```

[fiddle](http://www.sqlfiddle.com/#!4/da18c/3)

# java - Replace strings with incrementing value

> ID：15487187
> 
> 赞同：0
> 
> 时间：2013-03-18T21:22:02.190
> 
> 标签：java, parsing

I have an ArrayList that is built from posts in a forum, each entry is a post. When I am building the entry I am replacing all elements with the string "Image[x]". After the array list is filled I want to go back and replace all instances of "[x]" with an incrementing integer.

I am building my array list using this code:

```
Elements wholePosts = doc.select("div.post_body");
            for (Element wholePost : wholePosts) {
            Elements texts = wholePost.select("div[itemprop=commentText]");
            for (Element text : texts) {

                String nobr = text.html().replaceAll("(?i)<br[^>]*>", "newlineplaceholder");
                String formatted1 = nobr.replaceAll("<img src=.*?>", "Image[x]");
                Document finalPost = Jsoup.parse(formatted1);
                String almostfinalText = finalPost.text();
                String finalText = almostfinalText.replace("newlineplaceholder", "\n");

                datumList.add(finalText);

            } 
```

I have tried to replace the string and increment it in the above code but it only increments for each post element, so if there are multiple images in a post, post 1 would contain "Image1, Image1" and post 2 would contain "Image2, Image2". What I am looking for is for post 1 to contain "Image1, Image2" and post 2 to contain "Image3, Image4"

# c# - How to implement a SAFEARRAY(long) parameter?

> ID：15487188
> 
> 赞同：-1
> 
> 时间：2013-03-18T21:22:02.043
> 
> 标签：c#, c++, com, safearray

I currently have a C# method in an interface that has the following parameters when viewed in ITypeLib

```
HRESULT _stdcall SomeMethod ([in] Is_interface* inst, 
           [in] SAFEARRAY(long) bid); 
```

The above method is in an interface and is defined in C#.After generating a type library I am attempting to create an implementation of that interface in C++. However I cannot figure out the type required for

```
[in] SAFEARRAY(long) bid 
```

I am currently trying something like this

```
virtual HRESULT STDMETHODCALLTYPE SomeMethod (Is_interface* inst, CComSafeArray<long> bid); 
```

Any suggestions on what the equivalent of `[in] SAFEARRAY(long) bid` should be for the class implementing the C# interface.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:07:35.937

SAFEARRAY is the default interop type for an array. Just a plain int[] will do. For example:

```
[InterfaceType(ComInterfaceType.InterfaceIsDual)]
[ComVisible(true)]
public interface IFoo {
    void Method(object inst, int[] array);
} 
```

Produces this type library entry, obtained with OleView.exe, File + View TypeLib command:

```
[
  odl,
  uuid(2380B019-1E69-386E-BB6E-ECEF45257086),
  version(1.0),
  dual,
  oleautomation,
  custom(0F21F359-AB84-41E8-9A78-36D110E6D2F9, "ClassLibrary1.IFoo")    

]
interface IFoo : IDispatch {
    [id(0x60020000)]
    HRESULT Method(
                    [in] VARIANT inst, 
                    [in] SAFEARRAY(long) array);
}; 
```

# sql - 使用 SQL 在 oracle 中计算

> ID：15487189
> 
> 赞同：0
> 
> 时间：2013-03-18T21:22:03.883
> 
> 标签：sql, oracle

嗨，我正在使用 orcale，并且我在表之间创建了一个连接。我现在正在尝试插入一个计算，但它不断出现相同的错误消息“ORA-00933：SQL 命令未正确结束”我生成的代码是这个..

```
select   "CUSTOMER"."CUST_ID" as "CUST_ID",
 "CUSTOMER"."CUST_TITLE" as "CUST_TITLE",
 "CUSTOMER"."CUST_FORENAME" as "CUST_FORENAME",
 "CUSTOMER"."CUST_SURNAME" as "CUST_SURNAME",
 "CUSTOMER"."CUST_ADDRESS_1" as "CUST_ADDRESS_1",
 "CUSTOMER"."CUST_ADDRESS_2" as "CUST_ADDRESS_2",
 "CUSTOMER"."CUST_TOWN-CITY" as "CUST_TOWN-CITY",
 "CUSTOMER"."CUST_COUNTY" as "CUST_COUNTY",
 "CUSTOMER"."CUST_POST_CODE" as "CUST_POST_CODE",
 "CUSTOMER"."CUST_TEL" as "CUST_TEL",
 "CUSTOMER"."CUST_EMAIL" as "CUST_EMAIL",
 "MENU_ITEM"."PRODUCT_PRICE" as "PRODUCT_PRICE",
 "ORDER_ITEM"."QUANTITY" as "QUANTITY",
 "ORDER_ITEM"."ORDER_ID" as "ORDER_ID",
 "ORDER_DETAILS"."ORDER_ID" as "ORDER_ID"
from     "ORDER_DETAILS" "ORDER_DETAILS",
 "ORDER_ITEM" "ORDER_ITEM",
 "MENU_ITEM" "MENU_ITEM",
 "CUSTOMER" "CUSTOMER"
where   "ORDER_ITEM"."ORDER_ID"="ORDER_DETAILS"."ORDER_ID"
 and     "ORDER_DETAILS"."CUST_ID"="CUSTOMER"."CUST_ID"
 and     "MENU_ITEM"."MENU_ITEM_ID"="ORDER_ITEM"."MENU_ITEM_ID"` 
```

这是产生错误信息的代码

```
 select  "CUSTOMER"."CUST_ID" as "CUST_ID",
 "CUSTOMER"."CUST_TITLE" as "CUST_TITLE",
 "CUSTOMER"."CUST_FORENAME" as "CUST_FORENAME",
 "CUSTOMER"."CUST_SURNAME" as "CUST_SURNAME",
 "CUSTOMER"."CUST_ADDRESS_1" as "CUST_ADDRESS_1",
 "CUSTOMER"."CUST_ADDRESS_2" as "CUST_ADDRESS_2",
 "CUSTOMER"."CUST_TOWN-CITY" as "CUST_TOWN-CITY",
 "CUSTOMER"."CUST_COUNTY" as "CUST_COUNTY",
 "CUSTOMER"."CUST_POST_CODE" as "CUST_POST_CODE",
 "CUSTOMER"."CUST_TEL" as "CUST_TEL",
 "CUSTOMER"."CUST_EMAIL" as "CUST_EMAIL",
 "MENU_ITEM"."PRODUCT_PRICE" as "PRODUCT_PRICE",
 "ORDER_ITEM"."QUANTITY" as "QUANTITY",
 "ORDER_ITEM"."ORDER_ID" as "ORDER_ID",
 "ORDER_DETAILS"."ORDER_ID" as "ORDER_ID"
   from  "ORDER_DETAILS" "ORDER_DETAILS",
 "ORDER_ITEM" "ORDER_ITEM",
 "MENU_ITEM" "MENU_ITEM",
 "CUSTOMER" "CUSTOMER"
where   "ORDER_ITEM"."ORDER_ID"="ORDER_DETAILS"."ORDER_ID"
 and     "ORDER_DETAILS"."CUST_ID"="CUSTOMER"."CUST_ID"
 and     "MENU_ITEM"."MENU_ITEM_ID"="ORDER_ITEM"."MENU_ITEM_ID"
SELECT PRODUCT_PRICE,
       QUANTITY, 
       PRODUCT_PRICE * QUANTITY AS "TOTAL SPENT"
FROM   MENU_ITEM,ORDER_ITEM 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:57:46.627

SQL 的问题是您的第二个“SELECT”语句打开了一个新的 SQL 命令。如果您想在查询中添加一个名为“TOTAL_SPENT”的新列，该列将 PRODUCT_PRICE 和 QUANTITY 相乘，请将其添加到主查询的 SELECT 列表中。添加第二个 SELECT 语句不会将结果合并到第一个中。

你想要这样的东西：

```
select  "CUSTOMER"."CUST_ID" as "CUST_ID",
 "CUSTOMER"."CUST_TITLE" as "CUST_TITLE",
 "CUSTOMER"."CUST_FORENAME" as "CUST_FORENAME",
 "CUSTOMER"."CUST_SURNAME" as "CUST_SURNAME",
 "CUSTOMER"."CUST_ADDRESS_1" as "CUST_ADDRESS_1",
 "CUSTOMER"."CUST_ADDRESS_2" as "CUST_ADDRESS_2",
 "CUSTOMER"."CUST_TOWN-CITY" as "CUST_TOWN-CITY",
 "CUSTOMER"."CUST_COUNTY" as "CUST_COUNTY",
 "CUSTOMER"."CUST_POST_CODE" as "CUST_POST_CODE",
 "CUSTOMER"."CUST_TEL" as "CUST_TEL",
 "CUSTOMER"."CUST_EMAIL" as "CUST_EMAIL",
 "MENU_ITEM"."PRODUCT_PRICE" as "PRODUCT_PRICE",
 "ORDER_ITEM"."QUANTITY" as "QUANTITY",
 "ORDER_ITEM"."ORDER_ID" as "ORDER_ID",
 "ORDER_DETAILS"."ORDER_ID" as "ORDER_ID",
 PRODUCT_PRICE * QUANTITY AS "TOTAL SPENT"
   from  "ORDER_DETAILS" "ORDER_DETAILS",
 "ORDER_ITEM" "ORDER_ITEM",
 "MENU_ITEM" "MENU_ITEM",
 "CUSTOMER" "CUSTOMER"
where   "ORDER_ITEM"."ORDER_ID"="ORDER_DETAILS"."ORDER_ID"
 and     "ORDER_DETAILS"."CUST_ID"="CUSTOMER"."CUST_ID"
 and     "MENU_ITEM"."MENU_ITEM_ID"="ORDER_ITEM"."MENU_ITEM_ID" 
```

根据其他表中的列，您可能需要使用它们的表名来限定 PRODUCT_PRICE 和 QUANTITY，就像 SQL 中的其他列引用一样。

# c# - c# - DateTime 转换终止 foreach 循环

> ID：15487191
> 
> 赞同：-1
> 
> 时间：2013-03-18T21:22:07.173
> 
> 标签：c#, datetime, foreach

我从表格中获取车辆 ID 和两个日期，从表格中获取车辆 ID 和每日租金，以计算和显示预订成本。

我将`datetime`表单中的 s 转换为字符串，然后尝试将它们转换为`datetime`s。此转换终止 foreach 循环。我已经删除了转换，其他一切正常。

这是我的代码，其中有问题的转换被注释掉了。

```
 DataTable dt = database1DataSet.Tables["Fleet"];
        foreach (DataRow dr in dt.Rows)
        {
            string currentViD = dr["VehicleID"].ToString();
            string tableViD = vehicleIDTextBox.Text;
            string tableRate = dr["VehicleStdRate/day"].ToString();
            int numericRate = Convert.ToInt16(tableRate);
            int cost;
            string displayCost;
            TimeSpan x = dayInDateTimePicker - dayOutDateTimePicker;
            string y = dayOutDateTimePicker.ToString();
            string z = dayInDateTimePicker.ToString();
            //DateTime DayOut = Convert.ToDateTime(y);
            //DateTime DayIn = Convert.ToDateTime(z);
            int duration = 10; //placeholder
            if (currentViD.Equals(tableViD) == true)
            {
                cost = numericRate * duration;
                displayCost = cost.ToString();
                bookingCostTextBox.Text = displayCost;
                break;
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:29:11.247

来自**[MSDN](http://msdn.microsoft.com/en-us/library/e5dy31w8.aspx)**。

> *返回表示当前 DateTimePicker 控件的字符串。*

改为使用`dayOutDateTimePicker.Value.ToString()`。

# php - 如果 date() 函数和来自 mysqli 的日期，则为当前周

> ID：15487194
> 
> 赞同：1
> 
> 时间：2013-03-18T21:22:24.367
> 
> 标签：php, date, mysqli, strtotime

我有一个包含以下内容的表格：

```
StartWeek  | StartName |
2012-07-16 | 1         | 
```

我想做的事。取起始周，当前日期，并计算从那时到现在已经过去了多少时间。

到目前为止，我有这个：

```
function getCurrentWeekName() {
$mysqli = new mysqli(DB_SERVER, DB_USER, DB_PASSWORD, DB_NAME);
    if (!$mysqli) {
        die('There was a problem connecting to the database.');
    }
    else {
        date_default_timezone_set('UTC');
        echo "Current date: ".$current_date = date('Y-m-j')."<br>";
        $mysqli = new mysqli(DB_SERVER, DB_USER, DB_PASSWORD, DB_NAME);
        $query = $mysqli->prepare("SELECT StartWeek FROM Week");
        $query->execute();
        $query->bind_result($start_date);
        while ($query->fetch()){
            $start_date = $start_date;
        }
        echo "start date: ".$start_date."<br>";
        echo "time passed: ".$time_passed = strtotime($current_date) - strtotime($start_date)."<br>";
        echo "number of days since start: ".$num_of_days = ceil($time_passed/(86400*7))."<br>";
        $week_num = ceil($num_of_days/7);
        $query = $mysqli->prepare("SELECT StartName FROM Week");
        $query->execute();
        $query->bind_result($start_name);
        while ($query->fetch()){
            echo "Start name: ".$start_name = $start_name."<br>";
        }
        $week_num = $start_name + $week_num;
        echo "Week Number: ".$week_num;
    }
    $mysqli->close();
} 
```

问题是，这会返回以下信息：

```
Current date: 2013-03-18
start date: 2012-07-16
time passed: -1342394787
number of days since start: -2219
Start name: 1
Week Number: -316 
```

很明显我做错了。我认为这一定与我的时间计算有关，也许我不应该使用 strtotime。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T21:27:19.990

If you're looking for just a difference in days, you can do it [directly in MySQL](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_datediff):

```
SELECT DATEDIFF(now(), StartDate) AS diff_in_days 
```

for other differences, e.g. hours, you can also do things like

```
SELECT unix_timestamp(now()) - unix_timestamp(start_date) AS seconds 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:48:25.003

你可以用 php date-diff => [http://php.net/manual/en/function.date-diff.php做到这一点](http://php.net/manual/en/function.date-diff.php)

检查您是否可以使用：

```
//replace the values for $startDate and $endDate:
$startDate = strtotime($startDate); 
$endDate = strtotime($endDate); 
$intervalo = date_diff(date_create($startDate), date_create($endDate));
$out = $intervalo->format("Years:%Y,Months:%M,Days:%d,Hours:%H,Minutes:%i,Seconds:%s");
    if(!$out_in_array)
        return $out;
    $a_out = array();

   array_walk(explode(',',$out),
    function($val,$key) use(&$a_out){
        $v=explode(':',$val);
        $a_out[$v[0]] = $v[1];
    });
    print_r($a_out); 
```

# javascript - 如何在单个查询中搜索多个子字符串

> ID：15487195
> 
> 赞同：3
> 
> 时间：2013-03-18T21:22:28.147
> 
> 标签：javascript, regex, indexof

我遇到了一个我无法进一步思考的问题。简而言之，我有一个`ul`数百个`li`，每个`li`都有几十个单词作为文本；在列表的最顶部，我放置了一个输入框，供用户输入一些关键字；例如，假设我想从那个巨大的列表中只过滤掉同一行中存在以下三个单词的行：“ **red sweet strawberries** ”。点击搜索按钮后，这些行被过滤掉了，我只有两行包含我感兴趣的单词。

li1：“我迫不及待地想吃点**红甜草莓**”

li2：“现在是夏天，**红甜的草莓**现在很新鲜”

到此为止，一切都很好。

当三个查找的单词被字符串中的其他单词或字符分隔时，就会出现问题。因此，以上面的示例为例，过滤器永远不会向我显示以下行：

li3：“**又红又**甜的**草莓**已经上市了”

因此，在这里我列出了过滤和整理上例结果的整个函数：

```
$(document).ready(function() {
      var links = new Array();
      $("h4").each(function(index, element) {
      links.push({
            text: $(this).text(),
            element: element
        });
    });

    $("#searchbutton").click(function() {
        var query = $("#inputtext").val();
        var querywords = query.split(',');

        var results = new Array();
        for(var i = 0; i < querywords.length; i++) {
            for(var j = 0; j < links.length; j++) {
                if (links[j].text.toLowerCase().indexOf(querywords[i].toLowerCase()) > -1) {
                    results.push(links[j].element);                    
                    }
            }
        }

        $("h4").each(function(index, element) {
            this.style.display = 'none';
        });
        for(var i = 0; i < results.length; i++) {
            results[i].style.display = 'block';
        }

    });     

}); 
```

是否可以搜索多个子字符串并获得结果，即使子字符串由字符或其他单词分隔？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T17:48:18.473

这是做我认为你想要的一种方式。

```
var results = new Array();
for ( var i = 0; i < querywords.length; i++ ) {
    var regex = new RegExp( 
        '(?=.*\\b' + querywords[i].split(' ').join('\\b)(?=.*\\b') + '\\b)', 'i'
    );
    for ( var j = 0; j < links.length; j++ ) {
        if ( regex.test( links[j].text ) ) {
            results.push( links[j].element );
        }
    }
} 
```

例如，如果`querywords`包含 item `"red sweet strawberries"`，则`regex`创建的将是

```
/(?=.*\bred\b)(?=.*\bsweet\b)(?=.*\bstrawberries\b)/i 
```

使用三个正向[前瞻](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions#special-lookahead)，以便在同一行中包含三个单词的字符串通过测试（如果它们被单词边界包围）。

演示：[JSFIDDLE](http://jsfiddle.net/MWTtU/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:23:35.913

如果我理解正确，整个问题是：

```
var querywords = query.split(','); 
```

在示例查询中，您没有逗号。所以我想这是一个错误？用空格分割查询：

```
var querywords = query.split(' '); 
```

# ruby-on-rails - 在 Rails 中显示从 Nokogiri 抓取的数据？

> ID：15487198
> 
> 赞同：0
> 
> 时间：2013-03-18T21:22:34.520
> 
> 标签：ruby-on-rails, ruby, nokogiri

我最近开始学习 Rails，并试图构建一个简单的应用程序，它从网站上抓取足球赛程并将数据显示在我的 index.html 中。然后，用户可以尝试预测赛程的比分。

我设法使用 Nokogiri 将数据抓取到 fixtures.rb 文件中：

```
require 'nokogiri'
require 'open-uri'
doc = Nokogiri::HTML(open("http://www.bbc.co.uk/sport/0/football/21784836"))
doc.css("tr.row2").each do |item|
  puts item.at_css("td.left.first p").text
end 
```

将它添加到 Ruby on Rails 应用程序中的最简单方法是什么？我可以把它放到控制器中吗？我无法将文本完整粘贴为视图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T21:38:16.727

将其添加到数组中，然后在控制器中使用它。

```
@football = []
doc.css("tr.row2").each do |item|
  @football << item.at_css("td.left.first p").text
end 
```

然后在您看来，您可以参考以下内容：

```
<% if @football %>
  <ul>
    <% @football.each do |foot| %>
      <li><%= foot %></li>
    <% end %>
  </ul>
<% end %> 
```

# google-chrome - SVG线性渐变未显示在路径上（多个浏览器）

> ID：15487204
> 
> 赞同：1
> 
> 时间：2013-03-18T21:22:56.523
> 
> 标签：google-chrome, firefox, svg

我不明白为什么这个渐变在 Chrome/Firefox/IE 中不起作用。

它在 svg-editor（浏览器内部）和 Inkscape 中工作。

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<svg xmlns="http://www.w3.org/2000/svg" height="300" width="85" version="1.1">
 <defs>
  <linearGradient id="fill_bg" x2="0.5">
   <stop stop-color="#8e8e8e" offset="0"/>
   <stop stop-color="#d6d6d6" offset="0.59766"/>
  </linearGradient>
 </defs>
 <g>
  <path d="m3.5,16.5c12.5,6.6507,21,6.6507,33,0v271.47c-12.5,7.1172-22,7.1172-33,0v-135.74-135.73,0.00002,0.00001,0.00002,0.00001z" stroke="#352c2c" fill="url(#fill_bg)"/>
 </g>
</svg> 
```

描边显示正确，但填充完全缺失（透明），

我是否使用了浏览器不支持的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:39:16.730

抱歉，没关系我对所有路径元素都有 CSS 定义。

一旦我删除一切正常。

# spring - 使用 spring 测试上下文来初始化数据

> ID：15487206
> 
> 赞同：0
> 
> 时间：2013-03-18T21:23:07.267
> 
> 标签：spring, spring-test

我想知道是否可以通过实现 TestExecutionListener 接口来初始化测试数据并使用 beforeTestClass 和 afterTestClass 加载/处置数据。测试数据将在平面文件中提供，我希望数据文件位置作为测试类注释的一部分

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations={"classpath:spring/test-dao.xml"})
@TestExecutionListeners(
{ 
  DependencyInjectionTestExecutionListener.class,
  InsertTestDataExecutionListener.class
})
@DataSetLocation("classpath:data/test-dao-dataset.xml")
public abstract class AbstractDaoTests {
   public List testdata....
} 
```

在上面的伪代码中，InsertTestDataExecutionListener 将实现 TestExecutionListener 接口，并在 beforeClass 方法中，从注解中获取数据集位置。我试图找出如何使用 TestContext 设置属性“testdata”的内容。

```
public class InsertTestDataExecutionListener implements TestExecutionListener {
   public void beforeTestClass(TestContext aContext) {
       DataSetLocation dsLocation = aContext.getTestClass().getAnnotation(
            DataSetLocation.class
            );
       //Load the contents of the file using the dataset location.

       ?? How to set the property of 'testdata' from the Abstract class
   }
} 
```

我应该使用反射来完成这项工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:27:03.323

据我所知，在数据加载期间不需要访问 Spring 上下文（它只是类路径中的普通文件）。因此，您可以在没有听众的情况下完成工作：

```
public abstract class AbstractDaoTests {
   public List testdata;
   public List getTestData() {...}
   public abstract String getDataLocation();

   public AbstractDaoTests () {
       testData = loadDataFromLocation(getTestData());
   }
}

public class ConcreteTest extend AbstractDaoTests  {
    @Override
    public String getDataLocation() {return "classpath:data/test-dao-dataset.xml";}
} 
```

当然，您可以使用注解而不是抽象方法并从`this.getClass().getAnnotation`构造函数中获取它。

# javascript - 从 Javascript 中删除高度值

> ID：15487207
> 
> 赞同：0
> 
> 时间：2013-03-18T21:23:09.703
> 
> 标签：javascript, jquery, image, responsive-design

我创建了一个响应式站点，然后使用一些 JS 代码在图像上创建标题，这工作正常，但是当我重新调整浏览器大小时。图像不会像应有的那样缩放，我相信这是由于在 JS 中被赋予了高度值。如何删除此值并使标题起作用？

```
$(window).load(function(){ 
   // For each instance of p.caption
   $("p.caption").each(function(){
     $(this)
        // Add the following CSS properties and values
        .css({
             // Height equal to the height of the image
            "height" : $(this).children("img").height() + "px",
            // Width equal to the width of the image
            "width" : $(this).children("img").width() + "px"
        })
        // Select the child "span" of this p.caption
        // Add the following CSS properties and values
        .children("span").css(

            // Width equal to p.caption
            // But subtract 20px to callibrate for the padding
            "width", $(this).width() - 20 + "px")

        // find the <big> tag if it exists
        // And then add the following div to break the line
        .find("big").after('<div class="clear"></div>');

        // When you hover over p.caption
        $("p.caption").hover(function(){

            // Fade in the child "span"
            $(this).children("span").stop().fadeTo(400, 1);
            }, function(){
            // Once you mouse off, fade it out
            $(this).children("span").stop().delay(600).fadeOut(400);
        });
    // End $(this)   
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:34:12.557

我认为您应该尝试 window.resize。

```
$(window).resize(function() {
    $("p.caption").each(function() {
        var item = $(this);
        var big = item.find("big");

        item.css({
            "height" : item.children("img").height() + "px",
            "width" : item.children("img").width() + "px"
        }).children("span").css("width", item.width() - 20 + "px");
    });
}); 
```

我重构了您的代码并创建了一个小提琴：

[http://jsfiddle.net/VinnyFonseca/6Kv9U/1/](http://jsfiddle.net/VinnyFonseca/6Kv9U/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:27:17.213

`jQuery.resize()`将为您解决这个问题[http://api.jquery.com/resize/](http://api.jquery.com/resize/)

您只需将该程序代码存储为可重新执行（函数），然后根据相对（父）DOM 维度重新触发它。

```
'use strict';

removeHeight(){
    // That code here
}

$(document).ready(function(){
    // Initial removal
    removeHeight();

    // Removal when resizing
    $(window).resize(function() { removeHeight() });
}); 
```

# javascript - 配置 Turnip 和 Database_cleaner

> ID：15487209
> 
> 赞同：4
> 
> 时间：2013-03-18T21:23:17.363
> 
> 标签：javascript, ruby-on-rails, rspec, capybara, database-cleaner

我正在使用[Turnip](https://github.com/jnicklas/turnip)和 Ruby on Rails。我有使用和不使用 javascript 的场景。我想对`transaction`非 JavaScript 场景使用 DatabaseCleaner 策略，对`truncation`标记为 等的场景`@javascript`使用策略`@selenium`。

我正在为[Rspec 功能使用以下解决方案](https://www.relishapp.com/rspec/rspec-rails/docs/feature-specs/feature-spec)

```
config.around(:each, :js => true) do |ex|
  DatabaseCleaner.strategy = :truncation
  ex.run
  DatabaseCleaner.strategy = :transaction
end 
```

但它在萝卜的情况下不起作用。使它按我预期工作的最佳方法是什么？或者换句话说，如何指定由`@javascript`（或`@selenium`等）标签标记的萝卜场景`config.before`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T06:41:56.987

通过检查[萝卜的代码，](https://github.com/jnicklas/turnip/blob/master/lib/turnip/capybara.rb)我产生了这样的配置选项

```
 config.around(:each, type: :feature, javascript: true) do |example|
   DatabaseCleaner.strategy = :truncation
   example.run
   DatabaseCleaner.strategy = :transaction
 end 
```

在这种情况下，策略设置为`truncation`当场景被标签标记时，`@javascript`如下所示：

```
 @javascript
  Scenario: Viewing users
    Given the following users: 
```

但是在我的灵魂中，当您想在一种情况下使用例如 Selenium 时，您不应该`@javascrtipt`逐个标签替换标签，`@selenium`而是在`@selenium`标签后添加标签，`@javascript`如下所示

```
 @javascript @selenium
  Scenario: Viewing users
    Given the following users: 
```

# xmpp - Vines for XMPP Server 而不是其他解决方案

> ID：15487211
> 
> 赞同：3
> 
> 时间：2013-03-18T21:23:21.433
> 
> 标签：xmpp, ejabberd

我是 xmpp 的新手，这意味着。我是一名 RoR 开发人员，我需要为项目使用 xmpp 服务器。最重要的是，我需要进行一些重度定制，以便我的 rails 应用程序可以创建用户、让他们成为朋友、跟踪所有通信等。

作为一名 ruby​​ 开发人员，以及喜欢漂亮（外观）事物的人，我真的很想将 vines 用于 xmpp 服务器。它是红宝石，它很友好，我喜欢它：[http ://www.getvines.org/](http://www.getvines.org/)

但是，像 ejabberd、Tigase 等其他东西有更多的声誉，我猜他们有一个更好的社区。我猜这是因为寻找教程似乎太难了。

所以我正在找人告诉我为什么 Vines 不是 XMPP 的好解决方案，以及我应该使用什么来代替。因为否则，我选择使用 Vines =)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T02:53:16.067

对于以后阅读本文的任何人，我今天学到了一些关于藤蔓的知识。

首先，似乎整个事情都是由一位开发人员制作的，他后来开始为 twitter 和 github 做全职工作。因此，葡萄藤不太可能有新功能或更新。

其次，几乎没有围绕葡萄藤建立的社区。解决问题非常困难。

希望此信息对其他人有所帮助！

# android - 获取特定视图的样式名称 - Android

> ID：15487216
> 
> 赞同：3
> 
> 时间：2013-03-18T21:23:31.950
> 
> 标签：android, styles

我有一个 EditText 和一个自定义样式，我想知道如何以编程方式获取此样式的“名称”，如下所示：

```
<EditText
    android:id="@+id/idValue"
    style="@style/integerNumber"
    ... /> 
```

在代码中，

```
EditText edValue = findViewById (R.id.idValue); 
```

在这种情况下，我需要接收“integerNumber”。有没有特定的方法来获取这些信息？（比如edValue.getResources().getStyle()）……我根本找不到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T21:31:18.397

恐怕你不能。查看[视图构造函数](https://github.com/android/platform_frameworks_base/blob/21e6e2de1f0062f949fcc52d0b4559dfa3246e0e/core/java/android/view/View.java#L1902)（特别是 ），样式仅用于定义视图的属性，但之后就被丢弃了。它没有存储在任何地方，所以我猜你无法从视图对象中检索它。

如果您需要获得样式，您仍然可以（通常）向视图[添加标签](http://developer.android.com/reference/android/view/View.html#attr_android%3atag)并按照该样式行事。

# actionscript-3 - 允许事件侦听器访问其函数之外的变量

> ID：15487219
> 
> 赞同：0
> 
> 时间：2013-03-18T21:24:02.260
> 
> 标签：actionscript-3, flash, flashdevelop

```
public class Main extends MovieClip {

  public function Main():void {
    getOne()
  }

    function getOne():void {
      var varOne:Boolean = false;

      stage.addEventListener(MouseEvent.CLICK, dunClicked);
    }

    function dunClicked(e:Event):void {
      if(!varOne) trace("Nope...");
    }
} 
```

现在......我知道如果我将 varOne 放在 Class 中，它将被视为一种“全局变量”（如果我错了，请纠正我......）我想知道 EventListener 是否还有另一种方法可以查看varOne 的价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:53:32.053

将 'varOne' 声明为 Main 类的成员是最好的做法。创建闭包（内部函数）当然也可以，但不是一个很好的做法，因为您无法删除使用此类匿名函数定义的事件侦听器。

它不会是“全局的”，而是这个类实例的一个属性，从技术上讲，您应该通过编写 'this.varOne'（和 'this.getOne()'、'this.dunClicked'...）来访问它，但是在AS3/Java/等。你可以写'varOne'。

```
public class Main extends MovieClip {

   private var varOne:Boolean; // defaults to false;

   public function Main():void {
      getOne()
   }

   function getOne():void {
      stage.addEventListener(MouseEvent.CLICK, dunClicked);
   }

   function dunClicked(e:Event):void {
      if (!varOne) trace("Nope...");
      // if (!this.varOne) trace("Nope..."); // this is equivalent
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:31:51.450

您可以将侦听器放在函数内部，因此它将成为一个闭包并且可以访问本地函数 var。

```
function getOne():void {
  var varOne:Boolean = false;

  stage.addEventListener(MouseEvent.CLICK, dunClicked);

  function dunClicked(e:Event):void {
     if(!varOne) trace("Nope...");
  }
} 
```

# typescript - 打字稿原始类型：“数字”和“数字”类型之间有什么区别（TSC 不区分大小写）？

> ID：15487220
> 
> 赞同：123
> 
> 时间：2013-03-18T21:24:03.340
> 
> 标签：typescript, tsc

我打算写一个 type 的参数`number`，但我拼错了类型，`Number`而是写了。

在我的 IDE（JetBrains WebStorm）上，该类型`Number`使用与原始类型相同的颜色编写`number`，而如果我编写一个类的名称（已知或未知），它使用不同的颜色，所以我猜它以某种方式识别拼写错误的类型是正确/几乎正确/排序正确的类型。

当我编译代码时，TSC 没有抱怨编译器找不到名为 的类，而是`Number`写了以下错误消息：

```
Illegal property access 
```

这是否意味着`number`两者`Number`并存为不同的类型？

如果这是真的，那么这些类之间的区别是什么？

如果不是这种情况，那么为什么它根本没有编写它为未知类显示的相同错误消息（“当前范围内不存在名称'Number'”）

这是代码：

```
class Test
{
    private myArray:string[] = ["Jack", "Jill", "John", "Joe", "Jeff"];

    // THIS WORKS
    public getValue(index:number):string
    {
        return this.myArray[index];
    }

    // THIS DOESN'T WORK: ILLEGAL PROPERTY ACCESS
    public getAnotherValue(index:Number):string
    {
        return this.myArray[index]; 
    }
} 
```

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2017-03-07T17:26:59.070

在[TypeScript Do's and Don'ts 的](https://www.typescriptlang.org/docs/handbook/declaration-files/do-s-and-don-ts.html)指导下增加 Ryan 的答案：

> *永远不要*使用类型`Number`、`String`、`Boolean`、`Symbol`或`Object`这些类型指的是在 JavaScript 代码中几乎从未正确使用过的非原始装箱对象。
> 
> ```
> /* WRONG */
> function reverse(s: String): String; 
> ```
> 
> *请*使用类型`number`、`string`、`boolean`和`symbol`。
> 
> ```
> /* OK */
> function reverse(s: string): string; 
> ```

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2013-03-18T22:28:28.077

JavaScript 具有*原始*类型（数字、字符串等）和*对象*类型（数字、字符串等，它们在运行时显示）的概念。TypeScript 类型`number`并`Number`分别引用它们。JavaScript 通常会将对象类型强制转换为其原始等价物，反之亦然：

```
var x = new Number(34);
> undefined
x
> Number {}
x + 1
> 35 
```

TypeScript 类型系统规则处理这个（规范第 3.7 节）如下：

> 出于确定子类型、超类型和赋值兼容性关系的目的，Number、Boolean 和 String 原始类型被视为具有分别与“Number”、“Boolean”和“String”接口相同的属性的对象类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-10T20:46:11.137

正如 TypeScript 文档所说：

```
var Number: NumberConstructor
(value?: any) => number 
```

> 表示任何种类的数字的对象。所有 JavaScript 数字都是 64 位浮点数。

正如它所说，`any`作为参数并返回数字或`null`

它提供了一种简单的方法来检查值是否为数字

```
Number("1234");   // 1234
Number("1234.54") // 1234.54
Number("-1234.54") // -1234.54
Number("1234.54.33") // null
Number("any-non-numeric") // null 
```

因此，我们可以简单地使用来检查数字，例如：

```
if(Number(val)){
   console.log('val is a number');
} else {
   console.log('Not a number');
} 
```

# java - 为什么我的 .war 在部署到 tomcat 7 后无法启动，但运行嵌入式服务器工作正常？

> ID：15487236
> 
> 赞同：0
> 
> 时间：2013-03-18T21:25:00.277
> 
> 标签：java, spring, hibernate, tomcat, deployment

我能够在嵌入式服务器上`mvn clean install tomcat7:run`成功运行我的应用程序。我也可以通过运行`mvn tomcat7:depoly`or成功部署`mvn cargo:redeploy`，但应用程序失败并出现以下异常：

```
Mar 18, 2013 3:57:18 PM com.mchange.v2.c3p0.C3P0Registry banner
INFO: Initializing c3p0-0.9.1 [built 16-January-2007 14:46:42; debug? true; trace: 10]
15:57:19.183 [localhost-startStop-4] ERROR o.s.web.context.ContextLoader - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'accountDao': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire method: private void com.application.DAO.setSessionFactory(org.hibernate.SessionFactory); nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [applicationContext-business.xml]: Invocation of init method failed; nested exception is org.hibernate.MappingException: An AnnotationConfiguration instance is required to use <mapping class="com.application.data.MyEntity"/>
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:288) ~[spring-beans-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1122) ~[spring-beans-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461) ~[spring-beans-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295) ~[spring-beans-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223) ~[spring-beans-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292) ~[spring-beans-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194) ~[spring-beans-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:626) ~[spring-beans-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932) ~[spring-context-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479) ~[spring-context-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:389) ~[spring-web-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:294) ~[spring-web-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:112) [spring-web-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4797) [catalina.jar:7.0.37]
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5291) [catalina.jar:7.0.37]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) [catalina.jar:7.0.37]
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901) [catalina.jar:7.0.37]
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877) [catalina.jar:7.0.37]
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633) [catalina.jar:7.0.37]
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:977) [catalina.jar:7.0.37]
    at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1655) [catalina.jar:7.0.37]
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439) [na:1.6.0_41]
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) [na:1.6.0_41]
    at java.util.concurrent.FutureTask.run(FutureTask.java:138) [na:1.6.0_41]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895) [na:1.6.0_41]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918) [na:1.6.0_41]
    at java.lang.Thread.run(Thread.java:680) [na:1.6.0_41]
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire method: private void com.application.DAO.setSessionFactory(org.hibernate.SessionFactory); nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [applicationContext-business.xml]: Invocation of init method failed; nested exception is org.hibernate.MappingException: An AnnotationConfiguration instance is required to use <mapping class="com.application.data.MyEntity"/>
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:601) ~[spring-beans-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87) ~[spring-beans-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:285) ~[spring-beans-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    ... 27 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [applicationContext-business.xml]: Invocation of init method failed; nested exception is org.hibernate.MappingException: An AnnotationConfiguration instance is required to use <mapping class="com.application.data.MyEntity"/>
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1488) ~[spring-beans-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524) ~[spring-beans-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461) ~[spring-beans-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295) ~[spring-beans-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223) ~[spring-beans-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292) ~[spring-beans-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194) ~[spring-beans-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:910) ~[spring-beans-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:853) ~[spring-beans-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:768) ~[spring-beans-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:558) ~[spring-beans-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    ... 29 common frames omitted
Caused by: org.hibernate.MappingException: An AnnotationConfiguration instance is required to use <mapping class="com.application.data.MyEntity"/>
    at org.hibernate.cfg.Configuration.parseMappingElement(Configuration.java:1597) ~[hibernate-3.2.1.ga.jar:3.2.1.ga]
    at org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.java:1552) ~[hibernate-3.2.1.ga.jar:3.2.1.ga]
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1531) ~[hibernate-3.2.1.ga.jar:3.2.1.ga]
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1505) ~[hibernate-3.2.1.ga.jar:3.2.1.ga]
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1440) ~[hibernate-3.2.1.ga.jar:3.2.1.ga]
    at org.springframework.orm.hibernate4.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:283) ~[spring-orm-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1547) ~[spring-beans-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1485) ~[spring-beans-3.2.2.RELEASE.jar:3.2.2.RELEASE]
    ... 39 common frames omitted 
```

以下是相关的配置文件：

**applicationContext-business.xml**

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context-3.0.xsd
       http://www.springframework.org/schema/tx
       http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <!-- Component scan to find all Spring components -->
    <context:component-scan base-package="com.application">
    </context:component-scan>

    <!-- Data Source: HSQLDB + c3p0 connection pooling -->
    <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
          destroy-method="close"
          p:acquireIncrement="1"
          p:maxStatements="0"
          p:numHelperThreads="3">

        <property name="driverClass" value="org.hsqldb.jdbcDriver"/>
        <property name="jdbcUrl" value="jdbc:hsqldb:src/main/resources/schema/db"/>
        <property name="user" value="sa"/>
        <property name="password" value=""/>

        <property name="initialPoolSize" value="3"/>
        <property name="minPoolSize" value="3"/>
        <property name="maxPoolSize" value="50"/>
        <property name="idleConnectionTestPeriod" value="200"/>

    </bean>

    <!-- Hibernate Session Factory  -->
    <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />

        <property name="configLocation" value="classpath:hibernate.cfg.xml" />

        <!-- Hibernate configuration -->
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop>
            </props>
        </property>

        <!-- The packages that contain our Hibernate model classes -->
        <property name="packagesToScan">
            <list>
                <value>com.application.data</value>
                <value>com.application.dao</value>
                <value>com.application.service</value>
            </list>
        </property>
    </bean>

    <!-- Hibernate transaction management -->
    <bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager"/>

    <bean id="onStartupBean" class="com.application.StartUp">
        <property name="dataSource" ref="dataSource"/>
        <property name="platformTransactionManager" ref="transactionManager"/>
    </bean>

</beans> 
```

**休眠.cfg.xml**

```
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD//EN"
        "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
    <session-factory>

        <!-- SQL dialect -->
        <property name="dialect">org.hibernate.dialect.HSQLDialect</property>

        <!-- Connection handler: C3P0 -->
        <property name="hibernate.c3p0.min_size">5</property>
        <property name="hibernate.c3p0.max_size">20</property>
        <property name="hibernate.c3p0.timeout">1800</property>
        <property name="hibernate.c3p0.max_statements">50</property>

        <!-- DB schema will be updated if needed -->
        <property name="hbm2ddl.auto">update</property>

        <!-- Cache settings -->
        <!--
        <property name="hibernate.cache.region.factory_class">
            org.hibernate.cache.ehcache.EhCacheRegionFactory
        </property>
        -->
        <property name="cache.use_second_level_cache">false</property>
        <property name="cache.use_query_cache">false</property>
        <property name="cache.use_structured_entries">false</property>

        <!-- Echo all executed SQL to stdout -->
        <property name="show_sql">false</property>
        <property name="format_sql">true</property>
        <property name="default_batch_fetch_size">8</property>
        <property name="generate_statistics">true</property>
        <property name="use_sql_comments">true</property>
        <property name="jdbc.batch_size">10</property>

        <!-- List all the annotated classes we're using -->
        <mapping class="com.application.data.MyEntity"/>
        <mapping class="com.application.data.EntityOne"/>
        <mapping class="com.application.data.EntityTwo"/>
        <mapping class="com.application.data.EntityThree"/>

    </session-factory>
</hibernate-configuration> 
```

为什么这只在嵌入式 tomcat 服务器上运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T00:25:57.567

看来您正在使用`org.springframework.orm.hibernate4.LocalSessionFactoryBean`，但使用的是 Hiberate 3.2.4。要么使用 Hibernate 4.0.0 或更高版本，要么`org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean`改用。

# javascript - Google Calendar javascript api - 添加多个事件

> ID：15487238
> 
> 赞同：2
> 
> 时间：2013-03-18T21:25:09.813
> 
> 标签：javascript, google-api, google-calendar-api

当我尝试通过 javascript v3 api 向 Google 日历添加多个事件时，我遇到了一个问题。

我有一个数组，其中的条目是这样的事件：

> ```
> newEvent = {
>     "summary": response[i].name+" BDay!!",
>     "start": {
>       "dateTime": date
>     },
>     "end": {
>       "dateTime": date
>     }
>   };
> 
>   events[i]=newEvent; 
> ```

之后，我调用 Google Calendar api 以添加事件：

```
var request;
for(var j = 0; j<events.length; j++) {

  console.log(events[j]);

  request = gapi.client.calendar.events.insert({
    'calendarId': calendarId,
    'resource': events[j]
  });
  request.execute(function(resp) {
   console.log(resp);
 });
} 
```

然而，事实证明，所有事件都放在日历中的同一日期（实际上是数组 events[] 中的最后一个日期）。我相信这可能是因为请求是回调函数，但我不确定。

将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-08-13T14:44:14.667

如果要一次插入多个事件，则应使用批处理。

```
var batch = gapi.client.newBatch();
batch.add(gapi.client.calendar.events.insert({
    'calendarId': 'primary',
    'resource': events[0]
}));
batch.add(gapi.client.calendar.events.insert({
    'calendarId': 'primary',
    'resource': events[1]
}));
batch.add(gapi.client.calendar.events.insert({
    'calendarId': 'primary',
    'resource': events[2]
}));
            ......

batch.then(function(){
    console.log('all jobs done!!!')
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T12:27:33.433

`events[j]`正在 for 循环的每次迭代中反弹。尝试使用匿名函数绑定到正确的事件：

```
var request;
for(var j = 0; j<events.length; j++) {

  console.log(events[j]);

  request = function(resource) {  // Function that returns a request.
    return gapi.client.calendar.events.insert({
      'calendarId': calendarId,
      'resource': resource
    });
  }(events[j]);  // Bind to the current event.
  request.execute(function(resp) {
    console.log(resp);
  });
} 
```

有关 JavaScript 数组和闭包的更多详细信息，请参阅以下问题：[循环内的 JavaScript 闭包 - 简单实用示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)

这是上面代码的一个更易于阅读的版本，它将所有处理转移到一个函数中：

```
var makeRequest = function(resource) {
  console.log(resource);
  var request = gapi.client.calendar.events.insert({
    'calendarId': calendarId,
    'resource': resource
  });
  request.execute(function(resp) {
    console.log(resp);
  });
};

for(var j = 0; j<events.length; j++) {
  makeRequest(events[j]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-29T13:33:54.173

如前所述，您需要使用批处理来添加多个事件

**为什么要分批？** 使用批处理 API 的主要原因是减少网络开销，从而提高性能。

**例子：**

```
createMultipleEvents() {
    const events = [ {
      'summary': 'sample test events1',
      'location': 'coimbatore',
      'start': {
          'date': '2018-08-29',
          'timeZone': 'America/Los_Angeles'
      },
      'end': {
          'date': '2018-08-29',
          'timeZone': 'America/Los_Angeles'
      }
  },
  {
    'summary': 'sample test events2',
    'location': 'coimbatore',
    'start': {
        'date': '2018-08-29',
        'timeZone': 'America/Los_Angeles'
    },
    'end': {
        'date': '2018-08-29',
        'timeZone': 'America/Los_Angeles'
    }
},
];
const batch = gapi.client.newBatch();
events.map((r, j) => {
  batch.add(gapi.client.calendar.events.insert({
    'calendarId': 'primary',
    'resource': events[j]
  }))
})
batch.then(function(){
  console.log('all jobs now dynamically done!!!')
});
  } 
```

# apache - OpenMEAP 通过 OpenShift 社区托管在 Apache Tomcat 服务器上

> ID：15487241
> 
> 赞同：2
> 
> 时间：2013-03-18T21:25:10.830
> 
> 标签：apache, tomcat, cloud, openshift

我正在准备一个主要用于开发企业级跨平台移动混合应用程序的开发环境，经过大量研究后，我决定在 Apache RedHat Cloud OpenShift 容器上实施 OpenMEAP，以实现高级应用程序管理和服务。这两者的结合可能是商业移动企业应用平台的有趣竞争。

我已正确设置 Eclipse 以将 OpenMEAP 发布到 OpenShift Community Cloud，并且在仔细遵循这些指南和视频中的说明后，我可以成功地创建、构建 OpenMEAP SLIC 并将其部署到 Android 设备和模拟器：

[OpenMEAP Windows 安装视频](https://www.youtube.com/watch?v=aFCZWbLeKlY)

[在 OpenShift 视频中为 Java 应用程序免费获取云中的 Apache Tomcat 托管](http://www.youtube.com/watch?v=brbOcoJ-4Ic)

我在 Eclipse 项目中只有警告。当我将 openmeap-admin-web 和 openmeap-services-web 发布到 OpenShift 容器时，WAR 文件已发布，但它们不会扩展，因此无法通过 web 从 tomcat 服务器访问。如果我能解决这个问题，我就可以继续进行实际开发，而不是进行令人筋疲力尽的环境准备。

我知道这是一个很长的机会，但有人试图将 OpenMEAP 与 OpenShift（或任何其他基于云的 Tomcat 服务器）一起使用吗？我还想讨论 OpenShift（或云）Apache Tomcat 设置的 OpenMEAP 数据库要求。

任何评论都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:58:52.553

我没有任何将 OpenMEAD 加入 OpenShift 的经验，但您可以查看 OpenShift Online 社区上的一些内容，看看是否有帮助：
1) 使用日志进行故障排除： [https ://www.openshift.com/faq/ how-to-troubleshoot-application-issues-using-logs](https://www.openshift.com/faq/how-to-troubleshoot-application-issues-using-logs)
2) 入职 vanilla Tomcat： [https ://www.openshift.com/blogs/free-apache-tomcat-hosting-in-the-cloud-for-java-applications -它所谓的openshift](https://www.openshift.com/blogs/free-apache-tomcat-hosting-in-the-cloud-for-java-applications-its-called-openshift)

后者是使用 DIY 墨盒载入 Tomcat。你用的是什么墨盒？

也可以随时向 OpenShift 论坛发布反馈： [https ://www.openshift.com/forums/openshift](https://www.openshift.com/forums/openshift)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-11T16:13:27.107

[您可以从他们的快速入门](https://www.openshift.com/quickstarts/openmeap-on-openshift)页面在 OpenShift 上部署 OpenMEAP 。

> 创建快速入门后，您需要将授权信息添加到 Git 存储库。进行代码更改将需要您设置一个公共 SSH 密钥，然后将您的新应用程序 Git 存储库克隆到您的本地计算机上。有关此流程中的更多步骤，请参阅[入门页面](https://www.openshift.com/get-started#cli)。
> 
> ## 步骤 1\. 获取您的应用程序 UUID
> 
> 1.  通过转到 OpenShift 管理控制台并选择应用程序名称来复制 UUID 或运行以下命令来获取您的应用程序 uuid：`rhc app show $appname | grep -i uuid`
> 2.  进入 OpenMEAP 实例的管理界面：`https://$appname-$yournamespace.rhcloud.com/openmeap-admin-web/interface/`
> 3.  使用默认凭据（用户 ID/密码）登录：openshift/openmeap
> 4.  从**主菜单**导航到**设置**。
> 5.  在 Global Settings & Preferences 和 Cluster Nodes 下设置以下值：

```
 External Service URL: https://$appname-$yournamespace.rhcloud.com/openmeap-services-web
 File-system Storage Path Prefix: /var/lib/openshift/<application-uuid>/app-root/data
 Admin Server Accessible Service Url Prefix: https://$appname-$yournamespace.rhcloud.com/openmeap-services-web
 File-system Storage Path Prefix: /var/lib/openshift/<application-uuid>/app-root/data 
```

> ## 第 2 步。建立您的移动客户端！
> 
> 利用：`openmeap.slic.appMgmtServiceUrl=https://$appname-$yournamespace.rhcloud.com/openmeap-services-web/application-management`
> 
> 更多信息
> 
> *   对于 OpenMEAP 开发人员资源，请访问[http://wiki.openmeap.com](http://wiki.openmeap.com)
> *   有关 OpenMEAP 的更多信息，请访问[http://www.openmeap.com](http://www.openmeap.com)
> *   使用 jbossews-2.0 和来自[https://github.com/OpenMEAP/openshift-openmeap-quickstart的代码](https://github.com/OpenMEAP/openshift-openmeap-quickstart)

# c# - C# 将泛型类型传递给另一个类

> ID：15487242
> 
> 赞同：5
> 
> 时间：2013-03-18T21:25:11.027
> 
> 标签：c#, class, generics, argument-passing

我想知道有没有办法将泛型类型作为参数传递给另一个类。换句话说。我有`SomeClass<T>`和`AnotherClass`。我想要`AnotherClass`一个类型的实例字段`<T>`，它将在构造函数中初始化。

（我想`SomeClass`成为`AnotherClass`对象列表。另一个类将有 3 个实例字段引用到前一个`AnotherClass`对象引用到下一个`AnotherClass`对象和一个`T`类型字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:30:12.360

听起来你正在制作一个通用容器。你需要类似的东西：

```
class Container<T>
{
    public T Value;

    public Container( T rhs )
    {
        Value = rhs;
    }
} 
```

这是 C# 中的基本泛型。如果您提供更多描述，我可以更好地回答您的问题，但根据提供的信息，这就是您要寻找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:32:53.177

```
class MyClass<T> {
    public List<T> myList;

    public MyClass() {
        this.myList = new List<T>();
    }
} 
```

像那样？我不确定我是否 100% 理解这个问题。

# spring - @NotTransactional 替代品

> ID：15487243
> 
> 赞同：6
> 
> 时间：2013-03-18T21:25:14.180
> 
> 标签：spring, junit, mybatis

我正在做一个单元测试，它通过 DAO 将信息提交到 Oracle 数据库，然后检索它并检查一切都没有改变。

测试类中还有其他单元测试，在类的顶部我有：

```
@TransactionConfiguration (defaultRollback = true) 
```

我想知道如何删除@NotTransactional。我没有在类上指定 Transactional，所以默认情况下没有测试应该是这样的。由于这是它自己的测试，我不知道@BeforeTransaction（或After）注释是否正确。

最大的**问题**是没有@NotTransactional，看起来好像unsubscribe() 函数没有运行。（垃圾标志没有改变。）

再次运行测试，在存在@rollback=false 和@NonTransactional 的情况下，我看到测试完成后数据库中的垃圾标志正确设置为true。

```
@RunWith (SpringJUnit4ClassRunner.class)
@TransactionConfiguration (defaultRollback = true)
public class DatabaseTest {

    @Autowired (required = true)
    private FooDao<Foo> fooDao;

    @Autowired (required = true)
    private FooService fooService;

    // other tests here that are marked @Transactional.

    @Test
    @NotTransactional
    public void testDelete() {
        Foo foo = new foo();
        foo.setTrashFlag(false);
        foo.setId(123);

        fooDao.create(foo);

        Foo fooFromDb = fooService.getFromDbById(123);
        assertNotNull(fooFromDb);

        fooService.unsubscribe(123);   // among other things, 
                                       // **sets trash flag to true.**

     // sqlSession.flushStatements();  // doesn't seem to commit the unsubscribe action

        // getFromDbById() returns ONLY Foos with trash set to false, so we expect
        // nothing returned here as we've just set trash to true, using unsubscribe().

        Foo trashedFoo = fooService.getFromDbById(123);   
        assertNull(trashedFoo); 
```

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-03T11:01:07.443

我不知道这是否真的是主题，但我将@NotTransactional 用于具有事务基类的方法。Spring 说要将测试分为事务性和非事务性测试，但我发现在我的情况下，只需将以下内容添加到方法中，就可以禁用事务并让我删除不推荐使用的注释：

```
@Transactional(propagation = Propagation.NEVER) 
```

我以为我只是把它放在这里给那些和我做同样事情的人。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-21T09:27:05.477

`@Rollback(false)`并不总是足够的，它只意味着事务不会在测试结束时回滚。但它仍然在一个事务中运行测试，这有时会导致与其他正在运行的事务发生冲突。

正如 Spring 建议的那样，您有两种选择：

1.  将测试类一分为二，事务性测试可以是带有注释的测试类中的`@Transactional`，而非事务性测试可以是没有事务性注释的测试类中的。
2.  使用方法注释而不是类注释，用 注释每个事务测试`@Transactional`，但将其从类范围中删除

引用 Spring[文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/testing.html)：

> 从 Spring 3.0 开始，`@NotTransactional`不赞成将非事务性测试方法移动到单独的（非事务性）测试类或`@BeforeTransaction`or`@AfterTransaction`方法。作为用 注释整个类的替代方法，可以考虑用;`@Transactional`注释单个方法。`@Transactional`这样做允许在同一个测试类中混合使用事务和非事务方法，而无需使用`@NotTransactional`.

# machine-learning - WEKA 中每个特定实例的置信度？

> ID：15487247
> 
> 赞同：0
> 
> 时间：2013-03-18T21:25:43.123
> 
> 标签：machine-learning, instance, classification, probability, weka

我是 WEKA 和机器学习的新手。

我有一个包含大约 6500 个实例的测试集。我有一个已经用训练集训练过的模型。一旦我通过保存的模型运行测试集，有没有办法可以提取每个特定实例的置信度？置信度是指一个数值，表示分类器正确分类特定实例的概率。我想要文件中每个实例的这个置信度数。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:04:03.003

使用命令行界面，使用 -p 参数（参见[此处](http://weka.wikispaces.com/Primer)）。参考资料中显示的示例：

`java weka.classifiers.bayes.NaiveBayes -K -t soybean-train.arff -T soybean-test.arff -p 0`

结果是：

```
0 diaporthe-stem-canker 0.9999672587892333 diaporthe-stem-canker
1 diaporthe-stem-canker 0.9999992614503429 diaporthe-stem-canker
2 diaporthe-stem-canker 0.999998948559035 diaporthe-stem-canker 
```

即预测等级和信心。

# f# - 是否可以在运行时创建对象表达式？

> ID：15487250
> 
> 赞同：0
> 
> 时间：2013-03-18T21:25:50.173
> 
> 标签：f#

如果用户传入一个接口，并且我想用它动态地创建一个类，是否可以使用对象表达式来实现？也就是说，给定一个接口：

```
type IMyInterface =
    abstract Perform : Unit -> Unit 
```

有没有办法说：

```
obj = {
    new IMyInterface with
        member this.Perform() = Console.WriteLine("Perform this action")
} 
```

如果没有，是否有一种 non-Reflection.Emit 这样做的方式？

# multithreading - 每隔几个小时重新启动服务器时，是否值得追踪内存或线程泄漏？

> ID：15487251
> 
> 赞同：0
> 
> 时间：2013-03-18T21:25:50.997
> 
> 标签：multithreading, memory-leaks, garbage-collection, thread-safety

这是我在许多大型项目中发现的常见问题：

1.  它在开发中运行良好，因为您总是在停止并重新启动服务器
2.  在生产中运行数小时后，就会发现内存或线程问题。

一个非常简单的生产解决方案是每隔几个小时就终止并重新启动该过程。

如果这 100% 的时间都有效，并且试图让程序运行数小时（数天）而没有这个问题是非常困难的，那么为什么要花费工程资源来解决这个问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T21:28:38.857

> 如果这 100% 的时间都有效，并且试图让程序运行数小时（数天）而没有这个问题是非常困难的，那么为什么要花费工程资源来解决这个问题呢？

抱歉，我最初错过了这个问题的全部要点。我会说是的，这确实很重要，因为以下原因：

1.  程序员一直在复制代码。您的服务器中运行的错误模式或库可能正在传播到系统的其他部分。

2.  如果这是一项需要扩展的服务，那么您可能需要每 30 分钟重新启动一次，然后是 20 分钟，然后一直重新启动。当这一点到来时，您很可能会在没有工程时间来实际发现和解决问题的情况下处于困境。垂直缩放到更大的盒子就是你自己的机会。

3.  一般来说，您的工程团队可能会从练习中学到一些东西。一般来说，您应该及时了解如何诊断这些问题——尤其是运行分析器和泄漏检测器。

4.  如果这个产品目前正在开发中，那么*很难*预测下一个特性是否会改变内存曲线并使这个问题变得更糟。然后你的脚会在你推动下一个版本之前解决问题。

但是，如果这是维护模式下的一些低使用率产品，那么不投入任何资源来修复它可能很好——但不是最佳的。

* * *

就确定是线程泄漏还是内存泄漏而言，这实际上取决于您用完了什么。如果您执行 a`ps`并看到它正在分叉大量线程，*这*就是您内存不足的原因（因为堆栈），那么您将不得不解决这个问题。

如果正在生成的线程数量似乎相对稳定，但内存继续增加，那么内存泄漏就是您需要关注的问题。

如果你在 linux 上，你可以看到线程进程 ID `ps auxf`：

```
root      2501  0.0  0.3 244448 25576 ?    Ss   Jul03   0:11 /usr/sbin/httpd
apache    2716  0.0  0.5 384776 46696 ?    S    Oct14   0:17  \_ /usr/sbin/httpd
apache    2717  0.0  0.5 382208 44304 ?    S    Oct14   0:11  \_ /usr/sbin/httpd 
```

要么子线程的数量在增长，要么`ps`将显示进程的虚拟内存在增加，直到它交换或命中一些`ulimit`但线程相对恒定。

# php - 如何让 Propel 模型生成器正确复数名词？

> ID：15487253
> 
> 赞同：1
> 
> 时间：2013-03-18T21:26:01.880
> 
> 标签：php, symfony-1.4, propel

我正在使用 Symfony 1.4 和 Propel 1.6。起初，我对使用不正确复数的各种类名感到困惑。

例如，一些表关系是诸如 CommerceItemss 之类的东西，在我的 schema.yml 中很容易追踪到，我在其中指定了复数而不是单数表名。

在我更正之后，我仍然在自动生成的类中留下了另一种类型的错误。也就是说，我有一个名为“Match”的表格，Propel 将其复数为 Matchs。

例如，像这样的行：

```
 if (null === $this->matchsScheduledForDeletion) {
 ...
            $this->matchsScheduledForDeletion = clone $this->collMatchs; 
```

所以我剩下的问题是“如何让 Propel 正确地复数”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:26:01.880

该解决方案深埋在 Propel ORM 文档中：

[http://propelorm.org/reference/buildtime-configuration.html](http://propelorm.org/reference/buildtime-configuration.html)

即，编辑您的 default.properties：

```
./plugins/sfPropelORMPlugin/lib/vendor/propel/generator/default.properties
./plugins/propel/generator/default.properties 
```

查找显示以下内容的行：

```
propel.builder.pluralizer.class = builder.util.DefaultEnglishPluralizer 
```

用。。。来代替：

```
propel.builder.pluralizer.class = builder.util.StandardEnglishPluralizer 
```

它可以正确处理 Match->Matchs 的问题（并且我认为也会处理 Category->Categories 等），因此如果您遇到类似问题，这可能是解决方案。

# git - git-svn 单个 svn 服务器，多个 svn 目录作为多个 git 远程

> ID：15487258
> 
> 赞同：3
> 
> 时间：2013-03-18T21:26:09.543
> 
> 标签：git, svn, version-control, git-svn

是否可以有一个带有多个分支目录的单一颠覆服务器，每个分支都映射为使用 git-svn 创建的 git 存储库中的远程？

### 现有设置

*   树干：`http://svn.example.com/trunk`
*   我的分支：`http://svn.example.com/developers/luisgo/branches`
*   我的标签：`http://svn.example.com/developers/luisgo/tags`
*   我的 Scrum 团队的分支：`http://svn.example.com/teams/scrum-01/branches`
*   我的 Scrum 团队的标签：`http://svn.example.com/teams/scrum-01/tags`
*   公司分支机构：`http://svn.example.com/branches`
*   公司标签：`http://svn.example.com/releases`

这是遗留问题，正在迁移到 git 但我试图证明我们可以使用 git-svn 并拥有：

*   一个“个人”远程指向我在服务器上的个人颠覆目录
*   一个“scrum”远程指向我的 scrum 团队在服务器上的 subversion 目录，并且
*   一个“公司”远程指向服务器上公司的颠覆目录

`personal/branches`请注意，如果我的遥控器的名称必须分别为、`personal/tags`、`scrum/branches`、和`scrum/tags`，我不介意。`company/branches``company/tags`

最终，我希望能够从主干（又名公司/主服务器）创建一个分支，该分支不仅是本地的，而且`personal/branches/some-feature-branch`可以推送到另一个远程（比如`scrum/branches/some-feature-branch`协作，最后推送到`company/some-feature-branch`发布）。请注意，我理解标记，但出于本讨论的目的故意省略它。

我认为这会起作用：

```
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    logallrefupdates = true
    ignorecase = true
    precomposeunicode = false
    warnambiguousrefs = false
[svn-remote "svn"]
    url = https://svn.example.com
    fetch = trunk:refs/remotes/trunk
    branches = developers/luisgo/branches/*:refs/remotes/svn/personal/branches/*
    tags = developers/luisgo/tags/*:refs/remotes/svn/personal/tags/*
    branches = teams/scrum-01/branches/*:refs/remotes/svn/scrum/branches/*
    tags = teams/scrum-01/tags/*:refs/remotes/svn/scrum/tags/*
    branches = branches/*:refs/remotes/svn/company/branches/*
    tags = releases/*:refs/remotes/svn/company/tags/* 
```

但事实并非如此。

### 编辑============================================

我想我解释错了。从技术上讲，上面的示例有效。我想要实现的是为每个分支目录创建一个“远程”，因此：

```
git push personal feature-branch 
```

结果是：

```
https://svn.example.com/developers/luisgo/branches/feature-branch 
```

和...

```
git push scrum feature-branch 
```

结果是：

```
https://svn.example.com/teams/scrum-01/branches/feature-branch 
```

和...

```
git push company feature-branch 
```

结果是：

```
https://svn.example.com/branches/feature-branch 
```

本质上`personal`，`scrum`和`company`是在同一个 svn 服务器中具有不同分支/* 的遥控器。

当我尝试这样做时：

```
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    logallrefupdates = true
    ignorecase = true
    precomposeunicode = false
    warnambiguousrefs = false
[svn-remote "company"]
    url = https://svn.example.com
    fetch = trunk:refs/remotes/trunk
    branches = branches/*:refs/remotes/svn/company/branches/*
    tags = releases/*:refs/remotes/svn/company/tags/*
[svn-remote "personal"]
    url = https://svn.example.com
    fetch = trunk:refs/remotes/trunk
    branches = developers/luisgo/branches/*:refs/remotes/svn/personal/branches/*
    tags = developers/luisgo/tags/*:refs/remotes/svn/personal/tags/*
[svn-remote "scrum"]
    url = https://svn.example.com
    fetch = trunk:refs/remotes/trunk
    branches = teams/scrum-01/branches/*:refs/remotes/svn/scrum/branches/*
    tags = teams/scrum-01/tags/*:refs/remotes/svn/scrum/tags/* 
```

它告诉我我需要解决一个模棱两可的设置，其中我为多个遥控器指定了相同的 url。我知道是这样，但它们确实共享一个树干。

### 结束编辑 ============================================

有任何想法吗？这甚至可能吗？

谢谢，

路易斯

PS：如果没有在正确的地方发布，我深表歉意。我很乐意移动它。没必要发火。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:02:21.933

Git 会很高兴您拥有多个具有相同基本 URL（`svn-remote.{name}.url`设置）的 Subversion 存储库。问题是，从 Git 的角度来看，您有多个“存储库”试图拉入`refs/remotes/trunk`，而从其中拉出会覆盖另一个。归根结底它们是相同的这一事实是无关紧要的，因为 Git 没有真正的方法可以确定这一点。

（我将继续提到单独的“存储库”，因为从 Git 的角度来看，它们是完全独立的存储库；它们实际上是同一个 Subversion 存储库这一事实对 Git 没有任何影响。）

根据您当前的工作流程，我可以看到两种可能的解决方案：

*   从配置中删除所有`fetch = trunk:refs/remotes/trunk`行，因此您只有一个存储库试图拉入主干。

    如果您想保持非常干净，您可以为主干设置一个全新的存储库，如下所示：

    ```
    [svn-remote "svn"]
            url = http://svn.example.com
            fetch = trunk:refs/remotes/trunk 
    ```

    然后从其他三个存储库中删除该提取。

*   例如，为每个存储库分别获取主干，因此“公司”远程将具有该行`fetch = trunk:refs/remotes/company/trunk`。

    这意味着您将为每个存储库重复一些获取操作，但这意味着您将获得正确的合并和分支历史记录的最佳机会，因为 Git 将了解主干（以及因此从/合并到主干的分支）您所有的存储库。

    但是，Git 仍然无法跟踪不同存储库之间的合并和分支，因此例如，从 scrum 分支到公司分支的合并不会被检测到。

也就是说，您所使用的命令（例如`git push scrum feature-branch`，推送到`teams/scrum-01/branches/feature-branch`）永远不会起作用 - 您需要使用`git svn`命令，例如`git svn branch -R scrum feature-branch`, 然后`git svn dcommit`在检出 feature-branch 时。

不过，我个人会推荐您的原始配置：这是最简单的选项，这意味着您永远不会多次获取提交，并且 Git 将能够尽其所能地跟踪分支和合并操作。

使用您的原始配置，您需要指定`-d`而不是`-R`to `git svn branch`，例如`git svn branch -d teams/scrum-01/branches feature-branch`，我承认这有点复杂，但是一旦创建了分支，推送到它是完全相同的`git svn dcommit`：增加的配置简单性，以及 Git 跟踪完整合并和分支历史的能力，足以弥补在 Subversion 服务器上创建分支时增加的复杂性。

# asp.net-mvc - 用于识别相同资源的 asp.net webapi url

> ID：15487259
> 
> 赞同：1
> 
> 时间：2013-03-18T21:26:10.067
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api, asp.net-web-api-routing

我希望能够通过不同的 id 类型来识别资源。例如：

GET [http://example.com/customers/internalId=34](http://example.com/customers/internalId=34)去

```
public Customer GetByInternalId(int internalId){...} 
```

并 GET [http://example.com/customers/externalId=](http://example.com/customers/externalId=) 'JohnDoe' 去

```
public Customer GetByExternalId(string externalId){...} 
```

我知道我可以通过在通用控制器方法中使用一些解析逻辑来做到这一点，但我不想这样做。如果可能的话，我如何使用 asp.net webapi 的路由功能来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:43:31.667

我建议你尽量避免做你建议的事情。为同一个资源创建两个不同的 URI 会增加使用缓存的难度。相反，我建议使用一个 URL 重定向到另一个。

例如

```
> GET /customers/34
< 200 OK

> GET /Customers?name=JohnDoe
< 303 See Other
< Location: http://example.com/customers/34 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:35:16.303

您的方法没有多大意义，为什么要从以 Get.... 开头的方法返回 void？

此外，这些路线：

```
http://example.com/customers/internalId=34
http://example.com/customers/externalId='JohnDoe 
```

从 MVC/Web API 的角度来看是无效的。他们应该是这样的：

```
http://example.com/customers?internalId=34
http://example.com/customers?externalId=John 
```

默认 Web API 路由应区分两者并将其路由到不同的操作。

编辑：

使用以下模板创建操作：

```
[HttpGet]
public string InternalId(int id)
{
    return id.ToString();
} 
```

为 Web Api 定义路由：

```
 config.Routes.MapHttpRoute(
        name: "Weird",
        routeTemplate: "{controller}/{action}={id}",
        defaults: new { id = RouteParameter.Optional }
        ); 
```

这允许您编写：

```
http://localhost:7027/values/internalId=12 
```

试试看...

然后你可以添加另一个方法：

```
[HttpGet]
public string ExternalId(string id)
{
    return id;
} 
```

和这个：

```
http://localhost:7027/values/externalId=bob 
```

也会起作用。

很明显，我的控制器的名称是 ValuesController，因为我刚刚使用默认的 Web Api 模板对此进行了测试。

# node.js - 使用（大部分）一个代码库构建动态 HighCharts 和图像 Highcharts？

> ID：15487262
> 
> 赞同：1
> 
> 时间：2013-03-18T21:26:24.613
> 
> 标签：node.js, highcharts, phantomjs, codebase

我们已经为我们的网页创建了动态的 HighCharts——它们有一些 javascript 依赖项和一个图表生成脚本。我们想开始使用 HighCharts 配备的新 HighCharts/Node/PhantomJS 套件创建这些图表的 PDF（请参阅[新闻稿](http://www.highcharts.com/component/content/article/2-news/52-serverside-generated-charts)）。我们的 image-gen 节点服务器将在单独的 box/vm 上运行。我们如何在不必为同一个图表维护两个单独的代码库的情况下做到这一点？我对 Node 还不太熟悉，所以我不确定使用 Web 请求来请求脚本是如何工作的。我猜想很多 HighCharts 用户想要开始生成他们的一些图表，因为图像服务器端将在管理两个相关代码集时遇到类似的问题......

本质上，我们已经有了这个：

Webserver -> JSON（数据）+ `foo.js`+ `bar.js`+ `foo.html`-> 带有动态图表的网页。

我们想建立：

Web 服务器 -> JSON（数据）+ 单独的节点服务器 + `foo.js`+ `bar.js`-> 可通过 Web 请求获得的图像

显然有些冗余。我们如何管理依赖关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-09T16:49:53.377

虽然 node 很棒，但我觉得这种方法不必要地复杂，因为有许多可能会损坏的移动部件。所以我做了一个超级简单的动态创建文件的解决方案。我面临的唯一问题是将临时文件添加到 pdf 后删除它。它会破坏 PDF 的渲染。并将目录设置为 /tmp，使 phantomjs 崩溃。我目前想到的最好的想法是将临时生成的文件放在一个临时目录中，然后每晚使用 cronjob 删除该目录中的所有内容。

我出于代码简单性而发布此内容。它应该在一个函数中，以保持代码的可重用性。

```
<?php    
    $TmpInFileName = 'tmp/graph_'.md5($CurrentDate.rand(666,9482845713)).'.js';
    $TmpGraphFileName = 'tmp/pnggraph_'.md5($CurrentDate.rand(2666,54713)).'.png';

    $Data = "
        {
            chart: {
                zoomType: 'xy',
                width: 700,
                height: 520
            },
            credits: {
                  enabled: false
            },
            colors: [
                     '#2f7ed8', 
                     '#910000', 
                     '#8bbc21', 
                     '#1aadce', 
                     '#492970',
                     '#f28f43', 
                     '#77a1e5', 
                     '#c42525', 
                     '#a6c96a'
                  ],
            title: {
                text: 'Sample Graph - created at ".date('m/d/Y g:i:s a')."',
                style: {
                    fontSize: '16px',
                }
            },
            xAxis: [{
                categories: ['00:00', '00:15', '00:30', '00:45', '01:00', '01:15', '01:30']
            }],
            yAxis: [{ 
                labels: {
                    format: '{value}',
                    style: {
                        fontSize: '14px',
                        color: Highcharts.getOptions().colors[1]
                    }
                },
                title: {
                    text: 'Y axis',
                    style: {
                        fontSize: '16px',
                        color: Highcharts.getOptions().colors[1]
                    }
                }
            }, { // Secondary yAxis
                title: {
                    text: 'Sec Yaxis',
                    style: {
                        fontSize: '16px',
                        color: Highcharts.getOptions().colors[0]
                    }
                },
                labels: {
                    format: '{value}',
                    style: {
                        fontSize: '14px',
                        color: Highcharts.getOptions().colors[0]
                    }
                },
                opposite: true
            }],
            tooltip: {
                shared: true
            },
            legend: {
                layout: 'horizontal',
                backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'
            },
            series: [{
                name: 'first',
                type: 'spline',
                yAxis: 1,
                data: [0, -119.9502311075212, -119.96203992145706, -119.98172620218355, -119.71898290168028, -119.97023935590325, -119.95230287195413]
            },
            {
                name: 'second',
                type: 'spline',
                yAxis: 1,
                data: [0, -119.24222667756482, -119.60905809195222, -119.63522965403729, -119.11011466187935, -119.63643171374981, -119.54969080301575]

            },{
                name: 'third',
                type: 'column',
                data: [10, 11, 9, 7, 5, 2, 7]
            },{
                name: 'fourth',
                type: 'column',
                data: [0, -0.7080044299563895, -0.35298182950484147, -0.34649654814626274, -0.6088682398009269, -0.33380764215343106, -0.40261206893838164]
            }]
        }";

    try {
        $myfile = fopen($TmpInFileName, "w") or die("Unable to open file!");
        fwrite($myfile, $Data);
        fclose($myfile);                                
    } catch (Exception $e) {
        echo 'Error: '.$e.' <br />';
    }  

    $URL_Command = "phantomjs  /highcharts/exporting-server/phantomjs/highcharts-convert.js -infile $TmpInFileName -outfile $TmpGraphFileName -width 600";
    exec($URL_Command);    

    echo '<img src="'.$TmpGraphFileName.'" alt="Could not load img: '.$TmpGraphFileName.'">';

?> 
```

我希望这有帮助。我找不到一个不涉及 Node.JS 或 Java 的好解决方案。我想要一个纯 PHP 解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T21:04:24.893

我们决定将整个 highcharts 配置对象（例如`Highcharts.chart(configObj)`）作为 URL 编码字符串传递给节点服务器。我们不得不在节点服务器上放置一些渲染功能，但还不错。我们还在字符串配置对象中加入了一些渲染函数。不是最美丽的结果，但它奏效了。

# ruby-on-rails - 运行 rails server 或 rails generate 后出错

> ID：15487263
> 
> 赞同：1
> 
> 时间：2013-03-18T21:26:26.190
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我正在按照这本书学习开发 Rails 应用程序：[http](http://ruby.railstutorial.org) ://ruby.railstutorial.org 目前我在第 6 章。

一切都很顺利，直到我想使用“rails s”命令查看应用程序。运行命令后出现以下错误：

```
'default_controller_and_action': missing :action (ArgumentError) 
```

我早些时候遇到过这个问题，并通过更正“routes.rb”中的错误来解决它。但这次我无法解决它;(

路线.rb

```
SampleApp::Application.routes.draw do

  get "users/new"

  root to: 'static_pages#home'

  match '/signup', to: 'users#new'

  match '/home', to: 'static_pages#home'

  match '/help', to: 'static_pages#help'

  match '/about', to: 'static_pages#about'

  match '/contact', to: 'static_pages#'

end 
```

应用程序.html.erb

```
 <!DOCTYPE html>
    <html>
      <head>
        <title><%= full_title(yield(:title)) %></title>
        <%= stylesheet_link_tag    "application", media: "all" %>
        <%= javascript_include_tag "application" %>
        <%= csrf_meta_tags %>
        <%= render 'layouts/shim' %>

     </head>
      <body>
       <%= render 'layouts/header' %>
       <div class="container">
          <%= yield %>
          <%= render 'layouts/footer' %>
          <%= debug(params) if Rails.env.development? %>
        </div>
      </body>
    </html> 
```

_header.html.erb

```
 <header class="navbar navbar-fixed-top navbar-inverse">
  <div class="navbar-inner">
    <div class="container">
      <%= link_to "sample app", root_path, id: "logo" %>
      <nav>
        <ul class="nav pull-right">
          <li><%= link_to "Home",    root_path %></li>
          <li><%= link_to "Help",    help_path %></li>
          <li><%= link_to "Sign in", '#' %></li>
        </ul>
      </nav>
    </div>
  </div>
</header> 
```

_footer.html.erb

```
<footer class="footer">
  <nav>
    <ul>
      <li><%= link_to "About",   about_path %></li>
      <li><%= link_to "Contact", contact_path %></li>
      <li><a href="#/">News</a></li>
    </ul>
  </nav>
</footer> 
```

我希望有人能帮我解决这个问题！:)

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T21:30:39.643

```
match '/contact', to: 'static_pages#' 
```

缺少一个动作。

它有形式`'controller#action'`。在这种情况下，您只提供了控制器，但缺少操作名称。

如果在本教程的这一部分中您还没有为联系人创建操作，您可以在创建之前注释掉这一行，或者现在为它创建一个控制器。

在第一种情况下，代码将是

```
#   match '/contact', to: 'static_pages#' 
```

在第二种情况下，有必要插入

```
# app/controllers/static_pages_controller.rb
...
def contact
end 
```

并在`/app/views/static_pages/contact.html.erb`

# javascript - 滚动时如何 .show() 一个 div

> ID：15487268
> 
> 赞同：-5
> 
> 时间：2013-03-18T21:26:40.033
> 
> 标签：javascript, jquery, html, hide, show

假设我有一个网站，里面全是垂直发布的图片。向下滚动时，我想使用 javascript/jquery 加载他们的描述（并隐藏之前的描述）。我该怎么做呢？

请告诉我。谢谢。

这里的这个页面就是一个例子。 [https://stackoverflow.com/about](https://stackoverflow.com/about)

当您滚动时，会发生许多 jquery 事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:29:03.670

Using something like [scroll to](http://demos.flesler.com/jquery/scrollTo/) etc that you can then find the co-ordinates / location and then perform the script you require etc

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:41:43.540

可以尝试类似 jquery[出现插件](https://github.com/morr/jquery.appear) 它会在元素进入视图时触发。

也可以手动进行，在滚动时，检查所有包含隐藏描述的容器元素，看看它们是否属于可视浏览器，如果是，则显示它们的描述元素。

# c# - 列表值之间的差异 = new ArrayList(); 比 ArrayList values = new ArrayList(); 更好吗？

> ID：15487272
> 
> 赞同：0
> 
> 时间：2013-03-18T21:26:49.613
> 
> 标签：c#, .net

在编程中遇到术语反模式，其中一个例子就是这个。

```
IList values = new ArrayList(); //Anti-pattern, bad
ArrayList values = new ArrayList(); //good 
```

这两种变体有什么区别？它们不一样吗，和使用[var 关键字](https://stackoverflow.com/questions/15486589/why-preferred-var-strlist-new-liststring-then-liststring-strlist-new)一样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T21:28:13.390

我假设`List`你的意思是`IList`。

`IList values = new ArrayList();`只是让您将`ArrayList`对象视为`IList`对象。如果你愿意，你可以回滚`ArrayList`。

`ArrayList values = new ArrayList()`是相同的`var values = new ArrayList()`

两者都不是真正的反模式。如果您只需要`IList`提供的方法，则最好只声明您需要使用的对象的类型，而不管您分配什么。这在类型的公共接口中更为重要。作为局部变量；无论哪种方式都无关紧要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:37:29.180

在这种孤立中，它几乎是无关紧要的。

```
List values = new ArrayList();
ArrayList values = new ArrayList();
var values = new ArrayList(); 
```

因为在这里，值是在方法体内声明的，我们不太关心抽象或隔离。

但我同意，分配给 List 只会限制使用没有优势的*值。*有人可能会说，这是一个 AnitPattern，但还有更多相关的 AntiPatterns。

ArrayList 和 var 更好， var 通常是最可读和可维护的。我个人会使用 var。

顺便说一句，几乎没有人再使用这些集合了，ArrayList 有时比 List 更受欢迎，但我个人在这里也使用后者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T23:00:08.287

它的优点`IList`是可以分配许多不同的类。如果您从使用不同类的不同地方获取数据，这会很方便。

```
IList values;
values = new ArrayList();
values = new object[] {};
values = new List<int>();
values = new DataView(); 
```

但是，如果使用`IList`，则只能使用 定义的方法`IList`。如果您将变量定义为一个`ArrayList`或任何其他具体类，则您可以访问该类的所有方法。

```
ArrayList values = new ArrayList();
values. 
```

使用`var`关键字将告诉编译器使用与表达式结果相同的类。如果您的课程非常冗长，它会非常有用。

```
var values = new ArrayList();
// values is ArrayList

// Assuming a function: List<int> GetIntegerList() { ... }
var values = GetIntegerList();
// values is List<int>

// Assuming a function: Dictionary<string, Dictionary<string, List<Tuple<int, int, string>>>> GetSettingsCollection() { ... }
var values = GetSettingsCollection();
// values is Dictionary<string, Dictionary<string, List<Tuple<int, int, string>>>> 
```

# objective-c - One to Many Core Data binding issues

> ID：15487273
> 
> 赞同：1
> 
> 时间：2013-03-18T21:26:52.240
> 
> 标签：objective-c, cocoa, core-data

I have 2 Core Data objects. `Items` and `TimeLog`. The items object has a one to many relation with TimeLog and I am using the IB and Array Controller to automatically populate the 2 `NSTableView`'s

![enter image description here](../Images/180a3330d047c74c2dbd7ea2357a7740.png)

The top table view is for the items. When you select an item the bottom table should populate with the time logs.

However when I add an item, the application crashes with an error

```
<_NSFaultingMutableSet 0x102e0e790> addObserver:forKeyPath:options:context:] is not supported. Key path: date 
```

I am using an Array Controller to populate all the information automatically. When I create and add and item I am not setting anything for the timeLog relationship because there is no time to add when they first add the item. The object is saving as I have logging that is triggered after the core data save event.

**Items.h**

```
@class TimeLog;

@interface Items : NSManagedObject

@property (nonatomic, retain) NSString * itemId;
@property (nonatomic, retain) NSString * title;
@property (nonatomic, retain) NSString * itemType;
@property (nonatomic, retain) NSSet *timeLog;
@end

@interface Items (CoreDataGeneratedAccessors)

- (void)addTimeLogObject:(TimeLog *)value;
- (void)removeTimeLogObject:(TimeLog *)value;
- (void)addTimeLog:(NSSet *)values;
- (void)removeTimeLog:(NSSet *)values;

@end 
```

**TimeLog.h**

```
@class Items;

@interface TimeLog : NSManagedObject

@property (nonatomic, retain) NSString * time;
@property (nonatomic, retain) NSDate * date;
@property (nonatomic, retain) Items *item;

@end 
```

**What is causing this error and how do I get rid of it?**

![enter image description here](../Images/bfafc3f2ddfd23e619cad186d38ae140.png) ![enter image description here](../Images/2b07ec520665f4f882cf3163fba190f3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:29:28.867

I resolved this by creating another `NSArrayController` for my `TimeLog` and setting up the table like so.

**TimeLog Arra Controller**

*   Set Controller Content -> Content Set -> Bind to `Items` array controller. Model Key path to `timeLog` ![enter image description here](../Images/5ca4363afc0847b9b761e906fd424c87.png)

Then each column of the table.

![enter image description here](../Images/67e8d2d12b0991e11775f67c54616ae4.png) ![enter image description here](../Images/03c1a88e1cc7829595844de68152c369.png)

# symfony - Redirect to different action depending on User Status

> ID：15487279
> 
> 赞同：1
> 
> 时间：2013-03-18T21:27:20.527
> 
> 标签：symfony, event-handling

I'm working with Symfony 2.1\. I want to setup a redirect routine depending on User is logged in or not. The way I check it is `$User->isLoggedIn()` where `User` is a service.

I want to do this before a controller executes. I have few other things happening just before Controller executes. I use event: `kernel.controller` of `kernel.event_listener` to do those things. But I realized that I can not redirect to a URL using this event.

I understand I need to use event: kernel.request of kernel.event_listener to be able to redirect to a URL.

Problem. I use the following logic to figure out whether I need to redirect or not.

```
if (!$controller[0] instanceof NoLogInNeededInterface) {

     if (!$User->isLoggedIn()) {
        //redirect here
     }
} 
```

So, in the `kernel.request` event, `$controler[0]` is not available. In the `kernel.controller` event, response can't be set (will be ignored).

Has anyone got same problem and solved. Or is there any better way of doing, what I'm trying to do?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:45:59.557

我意识到我想要的可以通过使用 kernel.event_listner 的 kernel.exception 事件来实现。

所以在服务中：

```
my.service:
   class: MyBundle\EventListner\ExceptionListner
        tags:
           - { name: kernel.event_listener, event: kernel.exception, method: onKernelException }
        arguments: [ %logoutUrl% ] 
```

然后在类本身：

```
use Symfony\Component\HttpKernel\Event\GetResponseForExceptionEvent;
use Symfony\Component\HttpFoundation\RedirectResponse;

class ExceptionListner
{
    protected $_url;

    public function __construct($url)
    {
        $this->_url = $url;
    }

    public function onKernelException(GetResponseForExceptionEvent $event) {
        $exception = $event->getException();
        //dont necessarily need this condition
        if ($exception instanceof RedirectException) {
            $response = new RedirectResponse($this->_url);
            $event->setResponse($response);
        }
    }

} 
```

我仍然接受建议，如果这是或不是更好的方法。希望这也能帮助正在苦苦挣扎的人。磷

# string - sub string search bash scripting

> ID：15487281
> 
> 赞同：0
> 
> 时间：2013-03-18T21:27:28.793
> 
> 标签：string, bash, match

When given a string I want to search for a substring which matches two characters (9&0\. 0 should be the last character in that substring) and exactly two characters in between them

```
string="asd20 92x0x 72x0 YX92s0 0xx0 92x0x"
#I want to select substring YX92s0 from that above string

for var in $string
do
if [[ "$var" == *9**0 ]]; then
    echo $var  // Should print YX92s0 only
fi
done 
```

Obviously this above command doesn't work.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:58:55.903

您将每个元素与模式匹配`*9??0`。有几种方法可以做到这一点；这是一个使用字符串在子shell中设置位置参数，然后在for循环中迭代它们的方法：

```
( set -- $string
  for elt; do [[ $elt == *9??0 ]] && { echo "found"; exit; }; done ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:30:07.807

```
string="asd20 92x0x 72x0 X92s0 0xx0"

if [[ $string =~ [[:space:]].?9.{2}0[[:space:]] ]]; then
    echo "found"
fi 
```

Or better, taking advantage of *word spliting* :

```
string="asd20 92x0x 72x0 X92s0 0xx0"

for s in $string; do
    if [[ $s =~ (.*9.{2}0) ]]; then
        echo "${BASH_REMATCH[1]} found"
    fi
done 
```

This is regex with [bash](/questions/tagged/bash "show questions tagged 'bash'").

# spring-mvc - Spring-mvc-showcase Errors

> ID：15487286
> 
> 赞同：0
> 
> 时间：2013-03-18T21:27:57.007
> 
> 标签：spring-mvc, sample

I ran the spring-mvc-showcase from Netbeans 7.3 and got the following error, I haven't changed any code from the downloaded samples, what should I do to fix it ?

![enter image description here](../Images/986062b94b65933d64e0743a10bea6fc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:25:35.317

刚刚发现原因，是 GlassFish 导致了问题，当我用 Tomcat 运行它时，一切正常。

# python - python private-attribute_class 中的一个错误

> ID：15487287
> 
> 赞同：1
> 
> 时间：2013-03-18T21:28:06.680
> 
> 标签：python, python-2.7

我有以下代码

```
class AccountBannk:
    def __init__(self,balance,holder):
        self.__AccountHolder=holder
    def Display_AccountHolder(self):
        print "account holder is" , self.__AccountHolder
myaccount=AccountBannk(100000,"mehdiebagvand")
#print myaccount.__AccountHolder #is a error
myaccount.__AccountHolder="ali"
print myaccount.__AccountHolder      #print ali 
```

在这段代码中 AccountHolder 是一个私有属性
，在 python 中我们不能直接编辑或打印它。
如果我们尝试下面的代码，python 会释放一个错误

```
print myaccount.__AccountHolder 
```

但我的问题是
1-为什么 python 不在下面的代码中释放错误

```
myaccount.__AccountHolder="ali" 
```

2-我在 end_line 中打印 myaccount.__AccountHolder 但 python 未释放错误
并将 myaccount.__AccountHolder 的值更改为 'ali'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T21:34:14.830

这不是错误。当您`__AccountHolder`在类中定义第一个时，Python 正在修改变量的名称（使其难以猜测，但不是真正私有的，请参阅[PEP-8](http://www.python.org/dev/peps/pep-0008/)）。当您附加您的第二个时`__AccountHolder`，您正在创建一个新变量（具有新的重命名）。试试这个看看：

```
print myaccount.__AccountHolder
print myaccount.Display_AccountHolder() 
```

或添加

```
print dir(myaccount) 
```

在您执行第二个任务之前和之后，如下所示：

```
>>> myaccount=AccountBannk(100000,"mehdiebagvand")
>>> dir(myaccount)
    ['Display_AccountHolder', '_AccountBannk__AccountHolder', '__doc__', '__init__', '__module__']
>>> myaccount.__AccountHolder="ali"
>>> dir(myaccount)
    ['Display_AccountHolder', '_AccountBannk__AccountHolder', '__AccountHolder', '__doc__', '__init__', '__module__'] 
```

至于名称修饰，这里来自文档：

> __double_leading_underscore：命名类属性时，调用名称修改（在类 FooBar 中，__boo 变为*FooBar* _boo；见下文）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:57:16.307

这是我认为它比用作“私有变量”更麻烦*的众多原因之一。*`__names`的预期用例`__names`更多的是允许层次结构中的类使用漂亮的（ish）名称，而不必过多担心层次结构中的其他类使用什么名称，而不是创建“私有”属性。

对于“私有”属性，只需使用单个前导下划线（如`_name`）。这记录了您的意图，即某些名称是私有实现细节，而其他名称是类的公共接口的一部分。它不会*阻止*任何人使用“私人”名称，但也不会阻止，`__names`因为修改很容易进行逆向工程。所有这些技术都可以防止任何人*意外*使用您打算保密的名称；他们可以做一些狡猾的事情，但他们必须知道他们正在这样做。这就是你在 Python 中所能得到的一切；因为一切都是动态的，任何人都可以随时做任何事情。

因此，您的私有内部名称之间的主要区别在于`__name`，当您开始想要使用或（甚至在正确的类中）动态附加方法或有一个*确实*想要共享“私有”的子类时，它将成为一个主要的 PITA姓名。带有单个下划线的 A在任何这些领域都没有问题，在记录您的意图方面同样有效，并且在防止在类定义之外使用私有名称方面同样有效（即几乎完全无效）。`_name``__name``getattr``hasattr`*`_name`*

# linux - Linux: What is the encoding of this shell script?

> ID：15487294
> 
> 赞同：0
> 
> 时间：2013-03-18T21:28:35.657
> 
> 标签：linux, encoding

I'm trying to determine the encoding of a shell script. The following "file" command returns "application/x-shellscript". Is this the actual encoding? I was expecting a standard encoding such as "utf-8" or "ascii". What am I missing?

```
file --mime test.sh
test.sh: application/x-shellscript 
```

EDIT: I moved the file over to my macbook and it worked:

```
file --mime test.sh
test.sh: text/x-shellscript; charset=us-ascii 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:31:12.070

试试`--mime-encoding`开关：

```
file --mime-encoding test.sh 
```

# sed - sed 使用正则表达式查找替换（就地替换）

> ID：15487297
> 
> 赞同：0
> 
> 时间：2013-03-18T21:28:41.707
> 
> 标签：sed

我需要在许多文件中查找和替换某些文本。我正在尝试使用 sed 进行替换。这是我正在尝试做的事情：

寻找：

```
<font size="4" face="verdana, arial,geneva"><b>([^<]*)</b></font> 
```

用。。。来代替：

```
<font size="4" face="verdana, arial,geneva"><b><title>$1</title></b></font> 
```

基本上我想在`<title></title>`我找到的东西周围添加一个标签。

例如，如果文本是这样的：

```
<font size="4" face="verdana, arial,geneva"><b>THIS IS MY TITLE</b></font> 
```

我想将其替换为：

```
<font size="4" face="verdana, arial,geneva"><b><title>THIS IS MY TITLE</title></b></font> 
```

我尝试了各种命令，但似乎不起作用。以下是我迄今为止尝试过的命令：

```
sed -e 's/<font size="4" face="verdana, arial,geneva"><b>\([^<]*\)<\/b><\/font>/<font size="4" face="verdana, arial,geneva"><b><title>\1<\/title><\/b><\/font>/g'
sed -r 's/<font size="4" face="verdana, arial,geneva"><b>([^<]*)<\/b><\/font>/<font size="4" face="verdana, arial,geneva"><b><title>\1<\/title><\/b><\/font>/g' 
sed -E 's/<font size="4" face="verdana, arial,geneva"><b>([^<]*)<\/b><\/font>/<font size="4" face="verdana, arial,geneva"><b><title>\1<\/title><\/b><\/font>/g' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:36:13.027

sed 线基本上是从复制和粘贴 ^_^ 构建的。请尝试一下：

```
kent$ (master|✔) echo '<font size="4" face="verdana, arial,geneva"><b>THIS IS MY TITLE</b></font>'|sed -r 's@(<font size="4" face="verdana, arial,geneva"><b>)([^<]*)(</b></font>)@\1<title>\2</title>\3@'
<font size="4" face="verdana, arial,geneva"><b><title>THIS IS MY TITLE</title></b></font> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:41:11.273

对我来说这有效

```
sed  '/font *size *= *"4" *face/s|<b>\([^<]*\)</b>|<b><title>\1</title></b>|g' 
```

我的想法是避免尽可能多的转义，并分两步打破匹配和替换

# ios - viewForAnnotation Is Not Getting Called

> ID：15487298
> 
> 赞同：0
> 
> 时间：2013-03-18T21:28:42.130
> 
> 标签：ios, objective-c, map, annotations

Having scanned all the similar problems and tried all possible solutions, I still can't find the solution to my case. I tried to put multiple pins on my **MapView** but it seems that my pin can't be added normally. I started a **NSTimer** in my **viewDidLoad** method so that every 5 seconds, some updated pins will be put on Map. I added debugging information and found the problem was the that the method viewForAnnotation is not getting called. (I've already set the delegate by calling **[_map setDelegate:self]**)

My code is as following:

```
 - (void)viewDidLoad
   {
        [super viewDidLoad];
        _map = [[MKMapView alloc] initWithFrame:[[self view] frame]];
        [_map setDelegate:self];

        CLLocationCoordinate2D startLocation;
        startLocation.latitude = [startLat floatValue];
        startLocation.longitude = [startLong floatValue];
        MKCoordinateSpan span = MKCoordinateSpanMake(0.002, 0.002);
        MKCoordinateRegion region = MKCoordinateRegionMake(startLocation, span);
        [_map setRegion:region];

        [[self view] addSubview:_map];

        [self getPlacesForLocation:[_map centerCoordinate]];

        NSTimer *currentTimer = [NSTimer scheduledTimerWithTimeInterval:5.0 target:self  selector:@selector(theActionMethod:) userInfo:nil repeats:YES];
        [currentTimer fire];
   } 
```

**The getPlacesForLocationMethod:**

```
-(void)getPlacesForLocation:(CLLocationCoordinate2D)location
{
     dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^
                   {

                       /*  get data from the website 
                       **  get the geo information and put them in the MapPin struct
                       */

                       [self putPinsOnMap];
                   }
} 
```

**putPinsOnMap:**

```
-(void)putPinsOnMap
{

    for(Pinfo *iter in [_PinfoArray copy])
    {
        MapPin *pin = [[MapPin alloc] init];
        [pin setTitle:[iter from_user_name]];
        [pin setSubtitle:[iter text]];
        [pin setCoordinate:[iter location]];

        //NSLog(@"The coordinate is %f  %f", [pin coordinate].latitude, [pin coordinate].longitude);

        [_map addAnnotation:pin];

        /****************************************/

        NSLog(@"Try to put the pin on Map");
        /****************************************/
    }
} 
```

And here is the content of my **MapPin.h**:

```
@interface MapPin : NSObject<MKAnnotation>

@property (nonatomic, copy) NSString *title, *subtitle;
@property (nonatomic) CLLocationCoordinate2D coordinate;

@end 
```

If I stay in place, then every time the **(void)putPinsOnMap** gets called, it prints **"Try to put pin on Map"** but the **viewForAnnotation** method is not getting called (I also added debugging info there but none of them are printed). Only a few times, the method **viewForAnnotation** sometimes will be called if I zoom out to a great extent.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:46:51.500

您说您将调试信息添加到 viewForAnnotation，但您没有将 MKMapView 子类化以覆盖 viewForAnnotation 方法（或者至少，您正在分配一个 MKMapView，而不是任何子类）。我认为您正在寻找委托方法：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation; 
```

如果您在视图控制器中实现该方法（您正在制作 MKMapView 的委托），您可能会获得有用的信息。

如果 mapView:viewForAnnotation: 仍然没有被调用，除非你缩小了，那么你可能错误地放置了你的注释，它们只是在地球上的其他地方，而不是你最初在屏幕上的地方。

# jquery - jQuery detects click on level 1 menu item when clicking level 2 menu items

> ID：15487299
> 
> 赞同：0
> 
> 时间：2013-03-18T21:28:47.297
> 
> 标签：jquery, html, menu

I have this html menu. Some menu items have a submenu.

```
<ul class="menu uppercase">
<li class="mitem">Level 1 Menu Item
    <ul class="submenu">
        <li class="smitem">Level 2 Menu Item</li>
        <li class="smitem">Level 2 Menu Item</li>
        <li class="smitem">Level 2 Menu Item</li>
        <li class="smitem">Level 2 Menu Item</li>
        <li class="smitem">Level 2 Menu Item</li>
    </ul>
</li>
<li class="mitem">Level 1 Menu Item
    <ul class="submenu">
        <li class="smitem">Name of Collection</li>
        <li class="smitem">Level 2 Menu Item</li>
        <li class="smitem">Level 2 Menu Item</li>
        <li class="smitem">Level 2 Menu Item</li>
        <li class="smitem">Level 2 Menu Item</li>
    </ul>
</li>
<li class="mitem">Level 1 Menu Item</li>
<li class="mitem">Level 1 Menu Item</li>
<li class="mitem">Level 1 Menu Item</li> 
```

The Jquery Looks like this.

```
$("li.mitem").click(function(){//when menu item is clicked
        $("ul.submenu").slideUp();//hide all sub menus
        $("li.mitem").css('margin-bottom','0px').css('border-left','none');//reset margin bottom and left border
        $(this).css('border-left','1px solid #E0E0E0').css('padding-left','9px');//add border and padding to this menu item
        $(this).children("ul.submenu").slideDown();//show menu items child sub menu
        $(this).children().children("li.smitem:first").css('padding-top','18px');//add padding to first sub menu item
        if($(this).children().length>0){
            $(this).css('margin-bottom','18px');
        }
    }); 
```

So basically, when you click on a level 1 menu item it displays the submenu for that menu item by sliding it down. when you click on the next level 1 menu item if slides up the current sub menu and slides down the next sub menu.

However.... and the problem is... When you click on a level 2 menu item it slides up the sub menu and then back down again.

I believe this is happening because the sub menu is within the li of the level 1 menu.

How can i stop this? Its an unexpected behaviour.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:08:03.703

我发现通过添加锚标签并将它们与点击事件绑定如下，它可以工作。

非常感谢...

```
$('li.smitem a').click(function(e){
     e.stopImmediatePropagation();
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:36:28.353

由于您使用的是 jQuery，请考虑使用 jQuery 函数 stopPropagation。

当您将事件与 2 级菜单项绑定时使用它。

```
$('.smitem').bind('click'), function(event) {
    //....does something here....
    event.stopPropagation();
}); 
```

它将防止事件冒泡，即不会触发与父元素对应的事件。

# java - oracle.jdbc.pool.OracleDataSource run a command for every new connection

> ID：15487300
> 
> 赞同：1
> 
> 时间：2013-03-18T21:28:48.227
> 
> 标签：java, oracle, jdbc, connection-pooling, pool

I would like to execute an ALTER SESSION command on every new connection coming from a particular oracle.jdbc.pool.OracleDataSource connection pool. Is there a way to do that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T08:35:05.757

如果要部署到应用服务器，请检查配置选项，在许多情况下，您可以在那里配置一些“初始 SQL”。

如果您不能这样做，请`oracle.jdbc.pool.OracleDataSource`在应用程序级别使用自定义 DataSource 进行包装，然后在应用程序的其余部分使用该自定义 DataSource。就像是：

```
public class InitialSqlDataSource implements DataSource {
    private DataSource delegate;
    private String initialSql;

    public InitialSqlDataSource(DataSource delegate, String initialSql) {
        this.delegate = delegate;
        this.initialSql = initialSql;
    }

    public void setDelegate(DataSource delegate) {
        this.delegate = delegate;
    }

    public void setInitialSql(String initialSql) {
        this.initialSql = initialSql;
    }

    @Override
    public Connection getConnection() {
        Connection connection = delegate.getConnection();
        if (connection != null && isNew(connection)) {
            issueInitialSql(connection);
        }
        return connection;
    }

    protected boolean isNew(Connection connection) {
        // Logic to find out if connection is a new one
        // or a previously pooled connection. In the worst
        // case you can approximate this logic by always returning 
        // true. This will issue the initial SQL on every retrieval 
        // of a connection from this DataSource. This will
        // add some overhead, but will work in many cases.
        return true;
    }

    protected void issueInitialSql(Connection connection) {
        // A typical JDBC statement execution, adapted to
        // your particular needs
        ...
    }

    // Delegate every other method to this.delegate
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:10:24.793

您可以在每个新连接上执行自定义代码（或者，在最坏的情况下，在连接池的每个“get”上）。另一方面，如果可行，您可以在特定模式上创建 LOGON TRIGGER。

# java - 在 Windows 7 上配置 Apache Ant 和 Ivy

> ID：15487301
> 
> 赞同：0
> 
> 时间：2013-03-18T21:28:51.027
> 
> 标签：java, ant, ivy

我一直在尝试在我的 Windows 7 机器上克隆和构建一个项目，如下所示：

```
git clone git@github.com:corvec/project-name.git
cd project-name
git submodule init
git submodule update
ant clean
ant resolve 
```

直到`ant resolve`按预期工作之前的所有命令，这给了我以下错误消息：

```
Buildfile: c:\workspace\project-name\build.xml

clean-lib:
   [delete] Deleting directory c:\workspace\project-name\lib

load-ivy:

resolve:
     [echo] Storing dependencies in lib dir: lib
    [mkdir] Created dir: c:\workspace\project-name\lib
[ivy:retrieve] :: Ivy 2.1.0 - 20090925235825 :: http://ant.apache.org/ivy/ ::
[ivy:retrieve] :: loading settings :: file = c:\workspace\project-name\core-build\xml\ant\ivy\ivysettings.xml

BUILD FAILED
c:\workspace\project-name\core-build\xml\ant\build-ivy-targets.xml:55: impossible to configure
ivy:settings with given file: c:\workspace\project-name\core-build\xml\ant\ivy\ivysettings.xml
: java.text.ParseException: failed to load settings from file:/c:/workspace/project-name/core-build/xml/ant/ivy/ivysettings.xml: io problem while parsing config file: unknown protocol: c
        at org.apache.ivy.core.settings.XmlSettingsParser.doParse(XmlSettingsParser.java:165)
        at org.apache.ivy.core.settings.XmlSettingsParser.parse(XmlSettingsParser.java:150)
        at org.apache.ivy.core.settings.IvySettings.load(IvySettings.java:384)
        at org.apache.ivy.Ivy.configure(Ivy.java:411)
        at org.apache.ivy.ant.IvyAntSettings.createIvyEngine(IvyAntSettings.java:272)
        at org.apache.ivy.ant.IvyAntSettings.getConfiguredIvyInstance(IvyAntSettings.java:237)
        at org.apache.ivy.ant.IvyTask.getIvyInstance(IvyTask.java:92)
        at org.apache.ivy.ant.IvyTask.prepareTask(IvyTask.java:256)
        at org.apache.ivy.ant.IvyTask.execute(IvyTask.java:276)
        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
        at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
        at org.apache.tools.ant.Task.perform(Task.java:348)
        at org.apache.tools.ant.Target.execute(Target.java:435)
        at org.apache.tools.ant.Target.performTasks(Target.java:456)
        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1393)
        at org.apache.tools.ant.Project.executeTarget(Project.java:1364)
        at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
        at org.apache.tools.ant.Project.executeTargets(Project.java:1248)
        at org.apache.tools.ant.Main.runBuild(Main.java:851)
        at org.apache.tools.ant.Main.startAnt(Main.java:235)
        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
Caused by: java.net.MalformedURLException: unknown protocol: c
        at org.apache.ivy.core.settings.XmlSettingsParser.startElement(XmlSettingsParser.java:234)
        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:501)
        at com.sun.org.apache.xerces.internal.parsers.AbstractXMLDocumentParser.emptyElement(AbstractXMLDocumentParser.java:179)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(XMLDocumentFragmentScannerImpl.java:1343)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2755)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
        at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
        at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
        at javax.xml.parsers.SAXParser.parse(SAXParser.java:395)
        at javax.xml.parsers.SAXParser.parse(SAXParser.java:277)
        at org.apache.ivy.core.settings.XmlSettingsParser.doParse(XmlSettingsParser.java:160)
        ... 24 more
Caused by: java.net.MalformedURLException: unknown protocol: c
        at java.net.URL.<init>(URL.java:574)
        at java.net.URL.<init>(URL.java:464)
        at org.apache.ivy.core.settings.XmlSettingsParser.includeStarted(XmlSettingsParser.java:409)
        at org.apache.ivy.core.settings.XmlSettingsParser.startElement(XmlSettingsParser.java:211)
        ... 38 more

Total time: 0 seconds 
```

编辑：应用详细标志后，我现在收到以下消息：

```
Apache Ant(TM) version 1.9.0 compiled on March 5 2013
Trying the default build file: build.xml
Buildfile: C:\workspace\project-name\build.xml
Detected Java version: 1.6 in: c:\Program Files\Java\jdk1.6.0_25\jre
Detected OS: Windows 7
parsing buildfile C:\workspace\project-name\build.xml with URI = file:/C:/workspace/project-name/build.xml
Project base dir set to: C:\workspace\project-name
parsing buildfile jar:file:/c:/apache-ant-1.9.0/lib/ant.jar!/org/apache/tools/ant/antlib.xml with URI = jar:file:/c:/apache-ant-1.9.0/lib/ant.jar!/org/apache/tools/ant/antlib.xml from a zip file
 [property] Loading C:\workspace\project-name\build.properties
Importing file C:\workspace\project-name\core-build\xml\ant\build-basic-targets.xml from C:\workspace\project-name\build.xml
Overriding previous definition of reference to ant.projectHelper
parsing buildfile C:\workspace\project-name\core-build\xml\ant\build-basic-targets.xml with URI = file:/C:/workspace/project-name/core-build/xml/ant/build-basic-targets.xml
Already defined in main or a previous import, ignore build-tests
Already defined in main or a previous import, ignore dist-war
Already defined in main or a previous import, ignore all
Already defined in main or a previous import, ignore console
Importing file C:\workspace\project-name\core-build\xml\ant\build-ant-contrib-targets.xml from
C:\workspace\project-name\core-build\xml\ant\build-basic-targets.xml
Overriding previous definition of reference to ant.projectHelper
parsing buildfile C:\workspace\project-name\core-build\xml\ant\build-ant-contrib-targets.xml with URI = file:/C:/workspace/project-name/core-build/xml/ant/build-ant-contrib-targets.xml
Overriding previous definition of reference to ant.projectHelper
Importing file C:\workspace\project-name\core-build\xml\ant\build-ivy-targets.xml from C:\workspace\project-name\core-build\xml\ant\build-basic-targets.xml
Overriding previous definition of reference to ant.projectHelper
parsing buildfile C:\workspace\project-name\core-build\xml\ant\build-ivy-targets.xml with URI = file:/C:/workspace/project-name/core-build/xml/ant/build-ivy-targets.xml
Importing file C:\workspace\project-name\core-build\xml\ant\build-ant-contrib-targets.xml from
C:\workspace\project-name\core-build\xml\ant\build-ivy-targets.xml
Skipped already imported file:
   C:\workspace\project-name\core-build\xml\ant\build-ant-contrib-targets.xml

Importing file C:\workspace\project-name\core-build\xml\ant\build-basic-targets.xml from C:\workspace\project-name\core-build\xml\ant\build-ivy-targets.xml
Skipped already imported file:
   C:\workspace\project-name\core-build\xml\ant\build-basic-targets.xml

 [property] Loading C:\workspace\project-name\placeholder.build.properties
 [property] Unable to find property file: C:\workspace\project-name\placeholder.build.properties
 [property] Loading C:\workspace\project-name\core-build\xml\ant\ivy\ivysettings.properties
Property "ivy.basedir" has not been set
Property "ivy.basedir" has not been set
Override ignored for property "shared.base"
Override ignored for property "shared.lib"
Overriding previous definition of reference to ant.projectHelper
 [property] Loading C:\workspace\project-name\placeholder.build.properties
 [property] Unable to find property file: C:\workspace\project-name\placeholder.build.properties
Override ignored for property "conf.web.dir"
Override ignored for property "jdk.lib"
Importing file C:\workspace\project-name\core-build\xml\ant\build-testing-targets.xml from C:\workspace\project-name\core-build\xml\ant\build-basic-targets.xml
Overriding previous definition of reference to ant.projectHelper
parsing buildfile C:\workspace\project-name\core-build\xml\ant\build-testing-targets.xml with URI = file:/C:/workspace/project-name/core-build/xml/ant/build-testing-targets.xml
 [macrodef] creating macro  do-testing
 [macrodef] creating macro  test-one-class
 [macrodef] creating macro  test-classes
Overriding previous definition of reference to ant.projectHelper
Overriding previous definition of reference to ant.projectHelper
Importing file C:\workspace\project-name\core-build\xml\ant\build-eclipse-classpath.xml from C:\workspace\project-name\build.xml
Overriding previous definition of reference to ant.projectHelper
parsing buildfile C:\workspace\project-name\core-build\xml\ant\build-eclipse-classpath.xml with URI = file:/C:/workspace/project-name/core-build/xml/ant/build-eclipse-classpath.xml
 [property] Loading C:\workspace\project-name\placeholder.build.properties
 [property] Unable to find property file: C:\workspace\project-name\placeholder.build.properties
Overriding previous definition of reference to ant.projectHelper
Importing file C:\workspace\project-name\core-build\xml\ant\build-findBugs-targets.xml from C:\workspace\project-name\build.xml
Overriding previous definition of reference to ant.projectHelper
parsing buildfile C:\workspace\project-name\core-build\xml\ant\build-findBugs-targets.xml with
URI = file:/C:/workspace/project-name/core-build/xml/ant/build-findBugs-targets.xml
Override ignored for property "shared.lib"
Overriding previous definition of reference to ant.projectHelper
Importing file C:\workspace\project-name\core-build\xml\ant\build-pmd-targets.xml from C:\workspace\project-name\build.xml
Overriding previous definition of reference to ant.projectHelper
parsing buildfile C:\workspace\project-name\core-build\xml\ant\build-pmd-targets.xml with URI = file:/C:/workspace/project-name/core-build/xml/ant/build-pmd-targets.xml
Override ignored for property "shared.lib"
Overriding previous definition of reference to ant.projectHelper
Overriding previous definition of reference to lib.jars
Build sequence for target(s) `resolve' is [clean-lib, load-ivy, resolve]
Complete build sequence is [clean-lib, load-ivy, resolve, build, build-tests, -missing-test-param, project-name.run-one-test-plain, project-name.run-tests-xml, project-name.clean, check-findbugs-filters, runFindBugsFiltered, runFindBugsUnfiltered, project-name.runFindBugs, eclipse-classpath, dist, dist-war, project-name.run-one-test-html, pmd.pmd-html, report, runFindBugsFiltered-html, runFindBugsUnfiltered-html, runFindBugs-html, project-name.dist, project-name.dist-onejar, project-name.eclipse-classpath-with-conf, project-name.clean-cache, instrument-classes, run-tests, report-tests, report-coverage, ivy-version, publish-nodeps,
publish, project-name.publish-nodeps, project-name.run-tests, cpd, run-tests-html, cpd-html, pmd, pmd-all, project-name.ivy-local-version, project-name.create-javadoc, run-one-test-html, project-name.publish, project-name.runFindBugsFiltered-html, resolve-all, run-master-testsuites, clean-local, pmd-html, pmd.pmd-all-html, ivy-local-version, project-name.clean-all-local, runFindBugs, console, pmd.pmd-all, run-one-test-plain, clean-all-local, project-name.resolve_delivered, project-name.report, project-name.load-ivy, project-name.runFindBugs-html, project-name.clean-lib, project-name.post-resolve-echo, project-name.dist-war, project-name.ivy-version, pmd.cpd-html, project-name.ivy-new-version, dist-jar, ivy-new-version, resolve_delivered, project-name.runFindBugsFiltered, project-name.copy-dependencies, project-name.publish-local-nodeps, post-resolve-echo, dist-onejar, clean-cache, project-name.run-tests-plain, create-javadoc, project-name.build, run-test, project-name.all, run-tests-plain, pmd.cpd, test, copy-dependencies, publish-local-nodeps, publish-local, project-name.pom, project-name.report-coverage-xml, report-coverage-xml, project-name.console, project-name.report-tests, project-name.test, project-name.instrument-classes, pmd.pmd, clean, project-name.publish-local, copy-dist, run-jar, dist-reports, project-name.build-tests, project-name.copy-dist, project-name.run-one-test, project-name.dist-reports, project-name.check-findbugs-filters, project-name.-missing-test-param, run-one-test-xml, run-one-test, report-master-testsuites,
project-name.runFindBugsUnfiltered-html, project-name.resolve, build-dep, project-name.dist-jar, project-name.runFindBugsUnfiltered, all, project-name.report-master-testsuites, project-name.build-dep, project-name.resolve-all, project-name.clean-local, pom, project-name.run-tests-html, eclipse-classpath-with-conf, project-name.run-master-testsuites, run-tests-xml, project-name.eclipse-classpath, project-name.run-test, project-name.run-jar, pmd-all-html, project-name.report-coverage, project-name.run-one-test-xml, ]

clean-lib:

load-ivy:
  [taskdef] Could not load definitions from resource org/apache/ivy/ant/antlib.xml. It could not be found.
[antlib:org.apache.ivy.ant] Could not load definitions from resource org/apache/ivy/ant/antlib.xml. It could not be found.

BUILD FAILED
C:\workspace\project-name\core-build\xml\ant\build-ivy-targets.xml:24: Problem: failed to create task or type antlib:org.apache.ivy.ant:settings
Cause: The name is undefined.
Action: Check the spelling.
Action: Check that any custom tasks/types have been declared.
Action: Check that any <presetdef>/<macrodef> declarations have taken place.
No types or tasks have been defined in this namespace yet

This appears to be an antlib declaration.
Action: Check that the implementing library exists in one of:
        -c:\apache-ant-1.9.0\lib
        -C:\Users\localuser\.ant\lib
        -a directory added on the command line with the -lib argument

        at org.apache.tools.ant.UnknownElement.getNotFoundException(UnknownElement.java:487)
        at org.apache.tools.ant.UnknownElement.makeObject(UnknownElement.java:419)
        at org.apache.tools.ant.UnknownElement.maybeConfigure(UnknownElement.java:163)
        at org.apache.tools.ant.Task.perform(Task.java:347)
        at org.apache.tools.ant.Target.execute(Target.java:435)
        at org.apache.tools.ant.Target.performTasks(Target.java:456)
        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1393)
        at org.apache.tools.ant.Project.executeTarget(Project.java:1364)
        at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
        at org.apache.tools.ant.Project.executeTargets(Project.java:1248)
        at org.apache.tools.ant.Main.runBuild(Main.java:851)
        at org.apache.tools.ant.Main.startAnt(Main.java:235)
        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)

Total time: 0 seconds 
```

我怀疑这是项目特定配置的问题；我不是这个项目的唯一开发人员，其他开发人员也在工作。更有可能的是，这与我的系统配置有关。他们正在运行 Linux 和 Mac OS，如果这有所作为的话。我想它可能与 git 未跟踪的某些文件有关，但我认为其他开发人员之一会注意到这一点。

我*尝试*更新文件路径`build.properties`以使用绝对路径而不是相对路径，如下（基于[此建议](http://grokbase.com/t/ant/ivy-user/0888b7bs6k/newbie-cant-configure-ivy-from-local-file-in-windows)）：

```
shared.base=file:///c:/workspace/project-name/core-build 
```

代替

```
shared.base=core-build 
```

当我这样做时，我收到以下错误消息：

```
Apache Ant(TM) version 1.9.0 compiled on March 5 2013
Trying the default build file: build.xml
Buildfile: C:\workspace\project-name\build.xml
Detected Java version: 1.6 in: c:\Program Files\Java\jdk1.6.0_25\jre
Detected OS: Windows 7
parsing buildfile C:\workspace\project-name\build.xml with URI = file:/C:/workspace/project-name/build.xml
Project base dir set to: C:\workspace\project-name
parsing buildfile jar:file:/c:/apache-ant-1.9.0/lib/ant.jar!/org/apache/tools/ant/antlib.xml with URI = jar:file:/c:/apache-ant-1.9.0/lib/ant.jar!/org/apache/tools/ant/antlib.xml from a zip file
 [property] Loading C:\workspace\project-name\build.properties
Importing file C:\workspace\project-name\file:\C:\workspace\project-name\project-name\core-build\xml\ant\build-basic-targets.xml from C:\workspace\project-name\build.xml

BUILD FAILED
C:\workspace\project-name\build.xml:5: Cannot find C:\workspace\project-name\file:\C:\workspace\project-name\project-name\core-build\xml\ant\build-basic-targets.xml imported from C:\workspace\project-name\build.xml
        at org.apache.tools.ant.taskdefs.ImportTask.importResource(ImportTask.java:181)
        at org.apache.tools.ant.taskdefs.ImportTask.execute(ImportTask.java:162)
        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
        at org.apache.tools.ant.Task.perform(Task.java:348)
        at org.apache.tools.ant.Target.execute(Target.java:435)
        at org.apache.tools.ant.helper.ProjectHelper2.parse(ProjectHelper2.java:179)
        at org.apache.tools.ant.ProjectHelper.configureProject(ProjectHelper.java:82)
        at org.apache.tools.ant.Main.runBuild(Main.java:826)
        at org.apache.tools.ant.Main.startAnt(Main.java:235)
        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)

Total time: 0 seconds 
```

为此，以下是我系统中的一些相关细节：

```
PATH = %AMDAPPSDKROOT%bin\x86_64;%AMDAPPSDKROOT%bin\x86;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;%MAVEN%;%SBT_HOME%;%IRONRUBY_11%;%JAVA_HOME%\bin;%GRAILS_HOME%\bin;%GROOVY_HOME%\bin;%SUBVERSION%\bin;%GIT%\cmd;C:\Utilities;c:\Program Files (x86)\ATI Technologies\ATI.ACE\Core-Static;C:\Program Files\Microsoft\Web Platform Installer\;c:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\DTS\Binn\;c:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v1.0\;C:\Program Files\Microsoft SQL Server\110\Tools\Binn\;%ANT_HOME%\bin
echo %PATH% = c:\Program Files (x86)\AMD APP\bin\x86_64;c:\Program Files (x86)\AMD APP\bin\x86;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\apache-maven-3.0.4\bin;C:\Program Files (x86)\sbt\;C:\Program Files (x86)\IronRuby 1.1\bin;C:\Program Files\Java\jdk1.6.0_25\bin;C:\Grails\grails-2.1.0\bin;C:\Program Files (x86)\Groovy\Groovy-2.1.1\bin;C:\Program Files (x86)\Subversion\bin;C:\Program Files (x86)\Git\cmd;C:\Utilities;c:\Program Files (x86)\ATI Technologies\ATI.ACE\Core-Static;C:\Program Files\Microsoft\Web Platform Installer\;c:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\DTS\Binn\;c:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v1.0\;C:\Program Files\Microsoft SQL Server\110\Tools\Binn\;C:\apache-ant-1.9.0\bin;C:\Program Files (x86)\vim\vim73;C:\Ruby193\bin;C:\Python27
%ANT_HOME% = C:\apache-ant-1.9.0
%JAVA_HOME% = C:\Program Files\Java\jdk1.6.0_25
javac -version = 1.6.0_25 
```

我也尝试过使用新版本的 Ivy，ivy-2.3.0，但我遇到了类似的错误。

我认为这部分是常春藤解决目标：

```
<target name="resolve" depends="clean-lib, load-ivy" description="--> resolve and retrieve dependencies with ivy">
    <echo message="Storing dependencies in lib dir: ${lib.dir}" />
    <mkdir dir="lib"/>
    <ivy:retrieve />

    <ivy:deliver deliverpattern="ivy_delivered.xml" />
</target> 
```

**路径**

我在下面的 build.properties 和其他相关文件中包含了路径的相关摘录：

```
// build.xml
<property file="build.properties" />
// build.properties
shared.base=core-build
shared.xml=${shared.base}/xml
// build-ivy-targets.xml (imported into build.xml)
<property name="ivy.settings.dir" value="${shared.xml}/ant/ivy" /> 
```

**常春藤配置**

```
<!-- build-ivy-targets.xml (stripped down quite a bit): -->
<project basedir="." default="resolve" xmlns:ivy="antlib:org.apache.ivy.ant">
    <import file="build-ant-contrib-targets.xml" />
    <import file="build-basic-targets.xml" />

    <property file="placeholder.build.properties" />
    <property name="ivy.settings.dir" value="${shared.xml}/ant/ivy" />
    <property file="${ivy.settings.dir}/ivysettings.properties" />

    <path id="ivy.lib.path">
        <fileset dir="${shared.lib}">
            <include name="ant-extensions/ivy*.jar" />
        </fileset>
    </path>

    <path id="lib.jars">
        <fileset id="lib.jars.fileset" dir="lib" erroronmissingdir="false">
            <include name="*.jar" />
        </fileset>
    </path>

    <!-- `ivy:settings file` is only set here: -->
    <target name="load-ivy">
        <taskdef resource="org/apache/ivy/ant/antlib.xml" uri="antlib:org.apache.ivy.ant" classpathref="ivy.lib.path" />
        <ivy:settings file="${ivy.settings.dir}/ivysettings.xml" />
    </target>
    <target name="resolve" depends="clean-lib, load-ivy" description="--> resolve and retrieve dependencies with ivy">
        <echo message="Storing dependencies in lib dir: ${lib.dir}" />
        <mkdir dir="lib"/>
        <ivy:retrieve />

        <ivy:deliver deliverpattern="ivy_delivered.xml" />
    </target>
    <target name="clean-lib" description="--> clean the project libraries directory (dependencies)">
        <delete includeemptydirs="true" dir="${lib.dir}" />
    </target>

</project> 
```

我发现 Apache Ivy 错误消息意味着它在某个地方无法解析目录，而是将其作为 URL 读取。我应该采取什么步骤来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:22:41.863

Windows 上的 Ivy 需要设置不同于 Linux 上的 ivy-settings 变量。

将行更改`<ivy:settings file="${ivy.settings.dir}/ivysettings.xml" />`为：

```
<ivy:settings url="file:/C://workspace//project-name//core-build//xml//ant//ivy//ivysettings.xml" /> 
```

需要注意的是，有两件事发生了变化：

1.  而不是设置`ivy.settings.file`，你正在设置`ivy.settings.url`
2.  您正在设置绝对路径而不是相对路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:43:54.257

问题是 ant 试图从相对路径而不是绝对位置解决导入问题。在您的错误中看到这一行？

> 找不到从 C:\workspace\project 导入的 C:\workspace\project-name\file:\C:\workspace\project-name\project-name\core-build\xml\ant\build-basic-targets.xml -名称\build.xml

将导入文件的路径设为相对于 build.xml 目录的路径，例如“project-name/core-build/xml/ant/basic-build-targets.xml”，您的导入语句如下所示：

```
<import file="${basedir}/${shared.base}"/> 
```

# php - 用 php 检测 HTTPS

> ID：15487303
> 
> 赞同：0
> 
> 时间：2013-03-18T21:29:08.170
> 
> 标签：php, https

我尝试使用下面的代码检测 https，但全局变量 $_SERVER['https'] 的值始终未定义。

```
 $secure = (!empty($_SERVER['HTTPS']) && $_SERVER['HTTPS'] !== 'off'|| $_SERVER['SERVER_PORT'] == 443) ? true : false ; 
```

这部分代码位于 opencart 的头部。SSL 证书已安装并且安全连接正常工作......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:31:36.277

在这台服务器上 $_SERVER['https'] 被称为 $_SERVER['http-https']... 这是唯一的错误。

# c# - treeview code with fixed directory

> ID：15487313
> 
> 赞同：0
> 
> 时间：2013-03-18T21:30:01.187
> 
> 标签：c#, winforms, treeviewitem

i need help with this piece of code to get files from directory and populate them in treeview.

```
foreach (DirectoryInfo directory in directories)
{
    TreeNode node = TreeView.Nodes[0].Nodes.Add(directory.Name);
    node.ImageIndex = 1;

    foreach (FileInfo file in directory.GetFiles())
    {
        if (file.Exists)
        {
            TreeNode nodes = TreeView.Nodes[0].Nodes(node.Index).Nodes.Add(file.Name);
            nodes.ImageIndex = 2;
        }
    }
} 
```

i get this error: `An object reference is required for the non-static field, method, or property 'System.Windows.Forms.TreeView.Nodes.get'`

i appreciate any kind of help thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T21:36:04.617

`TreeView`不是静态类，这就是您收到该错误消息的原因。您应该将您习惯使用的位置更改`TreeView`为实例的实际名称。

例如：

```
TreeNode node = TreeView.Nodes[0].Nodes.Add(directory.Name); 
```

应该

```
//myTreeView is the name of my TreeView object
TreeNode node = myTreeView.Nodes[0].Nodes.Add(directory.Name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:42:08.223

我想这是你想要的。

```
var directories = Directory.GetDirectories("c:\\users");
foreach (string directoryName in directories)
{
    var directory = new DirectoryInfo(directoryName);
    var node = new TreeNode(directory.Name);
    node.ImageIndex = 1;

    foreach (FileInfo file in directory.GetFiles())
    {
        if (file.Exists)
        {
            var nodes = node.Nodes.Add(file.Name);
            nodes.ImageIndex = 2;
        }
    }
    treeView1.Nodes.Add(node);
} 
```

# r - indexing in loops: var[x+1] subscript out of bounds

> ID：15487316
> 
> 赞同：0
> 
> 时间：2013-03-18T21:30:09.223
> 
> 标签：r

I'm creating and storing a bunch of conditional matrices in vector form then I'm recalling them, returning their structure to matrix, and multiplying by a vector. This vector depends on the previous vector and the current matrix. I have tried to express this in the second loop as [,y+1] to index the vectors on the output matrix . While I get the desire result, I also get an error that aborts the program. I would appreciate suggestions on how to approach this.

```
env=rnorm(50, 22, 5)
les=matrix(nrow=9,ncol=length(env),byrow=T)
for (x in 1:length(env))
{
    a=sqrt(env[x])-3
    b=sqrt(env[x])-2        
    c=sqrt(env[x])-1
    A=.9
    B=.5
    C=.2

les[,x]=c(a,b,c,A,0,0,0,B,0)
}   
pop=matrix(nrow=3,ncol=length(env))
pop[,1]=c(1,2,2)
for (y in 1:length(env))
{

    pop[,y+1]=pop[,y]%*%matrix(les[,y],3,3,T)
}           
print(pop)  
barplot(pop) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:38:50.740

R 中的向量、矩阵和数组下标都是从 1 开始的。`length(env)-1`如果您要在循环内提​​前 1 重新开始，则只需要迭代。

# node.js - 在 node.js 中直接使用 PhantomJS 的问题

> ID：15487321
> 
> 赞同：26
> 
> 时间：2013-03-18T21:30:31.443
> 
> 标签：node.js, phantomjs

我正在尝试使用 PhantomJS，并且我已经通过 NPM 安装了它。我似乎无法运行任何示例，实际上我什至无法运行：

```
var page = require('webpage').create(); 
```

我得到错误：

```
Error: Cannot find module 'webpage' 
```

有什么我想念的吗？我正在使用通过 NPM 在同一目录中安装的其他一些模块，没有任何问题

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-19T04:40:43.490

PhantomJS**不适**用于 Node.js。您可能正在通过`node`二进制文件运行这些示例。

仔细阅读[入门](https://github.com/ariya/phantomjs/wiki/Quick-Start)文档，您会发现每个 PhantomJS 示例都需要像这样调用：

```
phantomjs hello.js 
```

请注意，Node.js 和 PhantomJS 之间有一座*桥梁。*在这种情况下，您需要遵循该特定桥的给定示例（有几个不同的示例）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-07-21T07:56:00.557

你可以使用这样的东西：

```
var page = new WebPage(); 
```

代码示例：

```
var page = new WebPage();
page.open('http://example.com', function(status) {
console.log("Status: " + status);
if(status === "success") {
page.render('example.png');
}
phantom.exit();
}); 
```

# asp.net-mvc-4 - Do I have to do the configuration for nservicebus on mvc4 that would be handled by the EndpointConfig.cs?

> ID：15487324
> 
> 赞同：0
> 
> 时间：2013-03-18T21:30:42.313
> 
> 标签：asp.net-mvc-4, nservicebus3

In the examples, most of the config is done by the dev by changing AsA_Server to AsA_Client.

```
public class EndpointConfig : IConfigureThisEndpoint, AsA_Client { } 
```

However, I can't seem to do that with an ASP.NET MVC4 app.
Do I have to manually configure everything in a web environment?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:18:17.733

是的，这里是文档的链接：

*   [http://support.nservicebus.com/customer/portal/articles/894008-using-nservicebus-with-asp-net-mvc](http://support.nservicebus.com/customer/portal/articles/894008-using-nservicebus-with-asp-net-mvc)
*   [http://support.nservicebus.com/customer/portal/articles/894123-injecting-the-bus-into-asp-net-mvc-controller](http://support.nservicebus.com/customer/portal/articles/894123-injecting-the-bus-into-asp-net-mvc-controller)

您还可以查看我们的示例项目以获取有关如何执行此操作的示例，请参阅[https://github.com/NServiceBus/NServiceBus/tree/master/Samples/AsyncPagesMVC3](https://github.com/NServiceBus/NServiceBus/tree/master/Samples/AsyncPagesMVC3)

还有一个使用 MVC4 的示例，但它针对尚未发布的 NServiceBus v4，请参阅[https://github.com/Particular/NServiceBus/tree/develop/Samples/VideoStore.Msmq/VideoStore.ECommerce](https://github.com/Particular/NServiceBus/tree/develop/Samples/VideoStore.Msmq/VideoStore.ECommerce)

# javascript - nodejs request.url.match(regexp) 似乎除了匹配之外还返回匹配的子字符串

> ID：15487334
> 
> 赞同：5
> 
> 时间：2013-03-18T21:31:19.430
> 
> 标签：javascript, regex, node.js

我试过这样的一段代码

```
var match = req.url.match(/^\/user\/(.+)/) 
```

并像这样传递了一个网址`"___http://someurl/user/jane"`

事实证明 match 被初始化为具有以下元素的数组

```
match[0]='/user/jane'
match[1]='jane' 
```

我本来期望一个元素，即`match[0]`. 为什么返回第二个字符串 - 它似乎与正则表达式不匹配。

我对 JavaScript 的经验很少，环顾四周后我找不到解释。欣赏对此的解释

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T21:38:50.673

看一下[`String.match`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)，或者更好，它与没有标志的正则表达式[`RegExp.exec`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec)具有相同的返回值：`String.match``g`

> 返回的数组将匹配的文本作为第一项，然后是每个匹配的包含捕获的文本的捕获括号的一项。

也就是说，圆括号¹之间的组构成一个捕获组。如果您只需要完整匹配，您可以使用：

```
var match = req.url.match(/^\/user\/.+/)[0];
console.log(match); //logs: "/user/jane" 
```

这将提取整个匹配项（在索引处`0`）将其返回给变量`match`，数组的其余部分被丢弃。

注意：如果正则表达式可能不匹配，您应该在提取完整匹配之前测试它是否返回匹配以防止错误：

```
var match = req.url.match(/^\/user\/.+/);
if (match !== null) {
    match = match[0];
    console.log(match); //"/user/jane"
} else {
    console.log("no match");
} 
```

这是一个摆弄的现场演示：[**jsFiddle**](http://jsfiddle.net/hpyVn/)

我已经删除了捕获组，因为在这种情况下它不会有所作为。没关系，只是微优化。

[您可以在此处](http://www.regular-expressions.info/brackets.html)阅读有关正则表达式的捕获组/反向引用的更多信息。

* * *

¹ 并非总是如此，有一些修饰符使它成为非捕获组 ( `?:`)、前瞻、后视等，但这些都是题外话。您可以在上面链接的站点中找到有关这些的更多信息。

# java - 在 Eclipse 中对非常大的 [25000 x 25000] 执行矩阵运算？

> ID：15487337
> 
> 赞同：0
> 
> 时间：2013-03-18T21:31:27.060
> 
> 标签：java, eclipse, matrix, out-of-memory

我有一个项目，我必须在密集矩阵上执行矩阵计算，但是我遇到了 outOfMemory 错误，这样做时，你能建议我用其他方法吗？我通常使用

```
double [][] a= new double[25000][25000];

for(int i=0;i<25000;i++){
    for(int j=0;j<25000;j++){

    a[i][j];
    //some computation like adding multiplication etc...
    }
} 
```

在爪哇。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:44:46.537

你需要大约 5GB 来声明这个矩阵：

```
25000*25000*8 bytes = 5000000000 bytes => 4.7GB 
```

如果你有这个可用的 RAM，你可以使用这个 JVM 选项运行你的应用程序：

```
java  -Xms64m -Xmx5120m [other options...] 
```

这样你就可以告诉 JVM，它可能需要 5GB 的 RAM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:01:24.130

如果您没有 RAM，则必须将矩阵存储在文件中并根据需要查找所需的数据。

```
DataOutputStream out = new DataOutputStream(new BufferedOutputStream(new FileOutputStream("matrix")));
for(int i=0;i<25000;i++){
    for(int j=0;j<25000;j++){
        double value = //Compute value
        out.writeDouble(value);
    }
}
out.close(); 
```

然后得到位置 (i, j) 的值

```
FileInputStream fis = new FileInputStream("matrix");
DataInputStream in = new DataInputStream(fis);

fis.getChannel().position((i * 25000L + j) * (Double.SIZE / 8));
double value = in.readDouble(); 
```

请注意，文件读取已经非常慢，但寻找特定位置甚至更慢。如果你能弄清楚如何排序你的读写操作，这样你就不必每次都去寻找，你的状态会好很多。此外，您可能希望将每一列或每一行放在单独的文件中，具体取决于您打算如何使用矩阵。您可能还想看看使用 Octave 或 Matlab 而不是 Java。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T22:02:07.203

我通过使用动态数组解决了问题，我在其中创建了 1 行和 1 列，然后执行乘法并将结果保存为新数组。

```
double sum=0;

                //Multiply matrix and adding to sum
                for(int j:cit){
                    sum+=(rowCitation[j]*rOld[j]);
                } 
```

# jquery - 表单不会提交 return false；

> ID：15487338
> 
> 赞同：-5
> 
> 时间：2013-03-18T21:31:28.020
> 
> 标签：jquery, html

填写输入和文本区域后，我的简单表单将不会提交。为便于阅读而编辑。

```
$(function () {
    $("#contactform").submit(function () {
        $(":input").not("[type=submit]").removeClass('error').each(function () {
            if ($.trim($(this).val()).length == 0) $(this).addClass('error');

        });            
        if($(document).hasClass("error")){
        return false;
}
    });
});

<form id="contactform" action="success.php" method="post">
  <input type="text" id="name" placeholder="name" autofocus >
  <input type="text" placeholder="email" >
  <textarea placeholder="message" ></textarea>
  <input type="submit">
  </input>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:32:57.250

您正在使用`return false;`阻止提交。仅在您想停止提交表单时使用它（例如验证错误等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:33:35.283

不要每次都使用 return false。

检查您是否有错误的输入，例如

```
return !!$('input.error').length; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T21:34:01.597

不要使用`return false;`，这会阻止提交。

将您的代码更改为以下内容：

```
 $(function () {
    $("#contactform").submit(function (e) {
        $(":input").not("[type=submit]").each(function () {
            if ($.trim($(this).val()).length == 0){ 
                $(this).addClass('error');
               e.preventDefault(); 
            }

        });

    });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T21:48:45.777

您应该在返回 false 之前检查是否有任何错误

```
$(function () {
    $("#contactform").submit(function () {
        $(":input").not("[type=submit]").removeClass('error').each(function () {
            if ($.trim($(this).val()).length == 0) $(this).addClass('error');    
        });
        // if there is anything with a class of error inside the form
        // can also use $(this).find('.error') - it's the same thing
        if($('.error',this).length){
            // then return false
            return false;
        }
    });
}); 
```

[http://jsfiddle.net/D4F55/](http://jsfiddle.net/D4F55/)

# data-structures - 不相交整数区间的高效数据结构

> ID：15487342
> 
> 赞同：2
> 
> 时间：2013-03-18T21:31:55.637
> 
> 标签：data-structures, hash, intervals

我有一组不相交的整数区间，并想检查给定的整数是否位于其中一个区间内。当然，这可以通过对数时间内的二进制搜索来实现。然而，绝大多数查询返回`false`，即只有极少数整数位于任何区间内。为了加快应用程序的速度，我正在寻找一种概率的、*恒定时间的*算法（某种散列函数），它可以告诉我给定的整数是否绝对不是或者可能在一个区间内。这是预期算法的草图，其中`magic_data_structure`使用存储在 中的间隔进行初始化`tree`：

```
x = some_integer;
if(!magic_data_structure.find(x))
  return false; // definitely not in any interval
return tree.find(x); // binary search on tree 
```

对文学有什么想法或提示吗？非常感谢您的帮助！

PS：有人知道*非重叠*区间的区间树的改进（与上面描述的不同）可能包括其他区间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T03:00:33.620

这是一个幼稚的解决方案，但始终如一。

如果您不处理大量数字，则可以只使用哈希表，其中键是数字，值是指向它们所在集合的指针。但是当然，如​​果有很多数据，它以这种方式索引它可能需要太长时间（和太多内存）。

看起来有各种[不相交的数据结构和算法](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)来存储/搜索它们，但我怀疑它们是否有恒定的时间。

# scala - Akka - 从终止的演员那里获取信息

> ID：15487347
> 
> 赞同：1
> 
> 时间：2013-03-18T21:32:24.283
> 
> 标签：scala, akka, actor

我在 Scala 中使用 Akka 演员来并行处理队列项目。我有一个带有 10 个可重复使用的子 ProcessorActor 的 MasterActor。

正在处理的项目可以是不同类型的，例如红色、蓝色和绿色项目。在某一时刻，只能处理某种类型的单个项目。因此，如果正在处理一个红色项目，则不能同时处理更多的红色项目。

一切都很好，但现在我尝试为应用程序实现良好的容错能力，结果我无法获得有关在 Terminated 消息中失败的项目类型的太多信息。如果 ProcessorActor 失败，我需要在 MasterActor 中将适当的类型标记为可用于处理。现在我被困住了，因为我无法获得失败的项目类型。我在 Terminated 消息中有一个 ActorRef ，但是在我收到该消息后立即向它发送消息并不好。

最后，我可以将所有可能的类型都标记为“正在处理”，而实际上只有它们合适的演员已经死了。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:01:43.750

看起来你想做的事情可以通过重新设计你的架构来拥有一个红色参与者、一个蓝色参与者和一个绿色参与者，并将监督策略设置为在参与者失败时重新启动而不是停止来实现。真的很简单。甚至不需要自己处理终止消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T23:01:01.337

`Terminated`设置一些不向孩子提供新工作的“暂停”标志，如果他们有活动的工作，则 ping 所有，`ProcessorActors`如果可以分配任何工作 - 分配工作并释放“暂停”标志。如果在设置“暂停”标志时收到终止 - 再次执行 ping。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T08:57:55.870

好吧，我终于做了什么，看起来最好的。我在其中设置了`ProcessorActor`故障重启策略和处理`preRestart`方法。如果`reason:Option[Any]`不为空并且匹配，`StartProcessingMessage(Item(ItemType))`那么我发送`ProcessingFailedMessage(Item(ItemType))`到`sender`. 主管演员然后将类型标记为未处理，下一个`while`循环将由一些开始处理`ProcessorActor`，甚至可能是失败并刚刚重新启动的那个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T08:48:44.707

您可以在开始处理该项目之前`ProcessorActor`发送一条消息（带有项目类型） 。`MasterActor`在您的`MasterActor`情况下，您可以维护一个`Map[ActorRef, ItemType]`使用，您可以通过`ActorRef`（在消息中收到）确定死亡`Terminated`时正在处理的最后一个项目类型。`ProcessorActor`

# iphone - UIButton TouchUpInside 没有被触发，但 pointInside:withEvent: 返回 YES

> ID：15487348
> 
> 赞同：0
> 
> 时间：2013-03-18T21:32:24.440
> 
> 标签：iphone, cocoa-touch, uibutton

我有一个`UIButton`我附加了一个`UIControlEventTouchUpInside`动作。此按钮插入到`UIScrollView`.

我的问题是：触摸事件在我按住按钮一段时间后才会起作用。如果我直接点击它，或者只是在模拟器中点击它，它就不起作用。

问题是：当我点击它时，`pointInside:withEvent:`实际上被触发并返回`YES`。什么可能阻止事件被触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:50:33.517

尝试将`delaysContentTouches`scrollView 的属性设置为`NO`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:01:26.933

它应该可以工作，因此您可以检查以下内容，例如：

1）确保您的按钮已正确添加到滚动视图。例如像这样：

```
 ...
    myScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
    myScrollView.bounces = NO;
    [myScrollView setScrollEnabled:YES];
    myScrollView.showsHorizontalScrollIndicator = NO;
    myScrollView.delegate = self;
    myScrollView.pagingEnabled = YES;
    [self.view addSubview:myScrollView];
    myScrollView.contentSize = CGSizeMake(320*5, 480);
    ...
    UIButton *mybutton = [UIButton buttonWithType:UIButtonTypeCustom];
    mybutton.frame = CGRectMake(0,0,100,100);
    mybutton.tag = 1
    [mybutton addTarget:self action:@selector(pressedmybutton:) 
          forControlEvents:UIControlEventTouchUpInside];
    [myScrollView addSubview:bu]; 
```

2）确保该按钮位于视图堆栈的顶部。出于测试目的，在视图初始化代码的末尾添加 [mybutton bringSubviewToFront];

3）在设备上测试它，而不仅仅是在模拟器中。我在模拟器中体验到与在真实设备上不同的滚动/按钮按下行为（这对于测试这一点更好）。

# php - 按列获取最后一行名称，然后是 DESC

> ID：15487353
> 
> 赞同：0
> 
> 时间：2013-03-18T21:32:54.510
> 
> 标签：php, mysql, sql-order-by, limit

我需要获取在我的成员表中注册的最后一个用户名。最后注册的 ID 号最高。

目前，我可以使用此代码获得最高 ID，但我需要获得最低 ID。

$resultlatestuser = mysql_query("SELECT * from $tbl_name ORDER BY 'id' DESC LIMIT 0,1;"); $row = mysql_fetch_row($resultlatestuser); 回声$行[1]；

这将 ID 回显为 john，但 john 的ID*最低*：1。

这就是我的数据库的样子，例如我需要 Dayancbro 回显，因为他的 ID 最高。

[http://puu.sh/2k4Hh](http://puu.sh/2k4Hh)

*   詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:38:19.797

是时候使用聚合函数了：

```
SELECT MAX(id) FROM $tablename 
```

# google-app-engine - 如何获取当前的 dev_appserver 版本？

> ID：15487357
> 
> 赞同：1
> 
> 时间：2013-03-18T21:33:07.647
> 
> 标签：google-app-engine

如何让 GAE SDK 告诉我它是什么版本？我找不到这样的东西：

```
dev_appserver.py --version 
```

请注意，这与返回应用程序版本的 不同，当我在交互式控制台中运行它时`os.environ['CURRENT_VERSION_ID']`，它似乎`os.environ['SERVER_SOFTWARE']`总是返回。`Development/1.0`

我想创建一个执行以下逻辑的 GAE SDK 更新脚本：

1.  检查[最新版本的 GAE SDK for Python on Linux](https://developers.google.com/appengine/downloads)是什么（在撰写本文时 1.7.5 可在[https://storage.googleapis.com/appengine-sdks/deprecated/175/google_appengine_1.7.5下载.zip](https://storage.googleapis.com/appengine-sdks/deprecated/175/google_appengine_1.7.5.zip) _
2.  检查当前安装的 GAE SDK 版本。
3.  如果可用版本 > 已安装版本，则下载最新的软件包并将其解压缩到正确的目录中。

如果没有“支持”的方式来执行步骤＃1，我愿意在脚本中硬编码“最新版本”，但即使脚本本身运行多次，我仍然只想下载/安装一次. 换句话说，脚本应该是幂等的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T00:50:56.410

GAE SDK zip 解压到的目录包含一个 VERSION 文件，其内容如下：

```
release: "1.7.5"
timestamp: 1357690550
api_versions: ['1'] 
```

所以我写了一个脚本来拉出版本：

```
#!/bin/sh

INSTALLEDVERSION=`cat /usr/local/google_appengine/VERSION | grep release | cut -d: -f 2 | cut -d\" -f 2`
LATESTVERSION="1.7.5"

if [ $INSTALLEDVERSION != $LATESTVERSION ]; then
        echo "Update GAE SDK"
fi 
```

或者，您可以使用它来获取非默认安装的版本字符串，但`readlink`在 Linux 上可能无法正常工作：

```
INSTALLEDDIR=`which dev_appserver.py | xargs readlink | xargs dirname`
INSTALLEDVERSION=`cat $INSTALLEDDIR/VERSION | grep release | cut -d: -f 2 | cut -d\" -f 2` 
```

但这仍然没有提供执行步骤 1 的方法，该步骤将在网络上查询最新版本并进行自动更新。

# css - 让 div 在另一个 div 之后占用所有空间

> ID：15487358
> 
> 赞同：2
> 
> 时间：2013-03-18T21:33:08.857
> 
> 标签：css, html

我有两个并排的div。第一个包含一个可能相当长的文本字段，另一个包含一个很短的数字。

我需要第一个 div 占用所有可用空间，而不需要拉伸父级并在必要时进行裁剪。Ant 它应该考虑第二个 div 的宽度。所以如果文本的长度很短，那么两个div应该并排，但是如果文本很长，那么第一个会被剪掉，第二个会被一直推到右边。

这是大致的表格布局：

```
<div id="container">
    <div id="row">
        <span id="text">Short text</span><span id="value">123</span>
    </div>

    <div id="row">
        <span id="text">A bit longer text</span><span id="value">555</span>
    </div>

    <div id="row">
        <span id="text">A very very very very very very very very long text</span><span id="value">555</span>
    </div>
</div> 
```

以及相应的 CSS：

```
#container {
    border: 1px solid #000000;
    width: 300px;
}

#row {
    display: inline-block;
    border: 1px solid #000077;
    width: 100%;
    clear: both;
}

#text {
    display: inline-block;
    border: 1px solid #007700;
}

#value {
    display: inline-block;
    border: 1px solid #770000;
} 
```

这是一个[jsfiddle](http://jsfiddle.net/Tf8WR/)模板，说明了我需要什么。一个很长的文本行应该被剪掉，555应该放在它旁边的同一行，这样整个结构就适合指定的300px（数字是任意的，它将由现实生活中的其他元素定义，事先不知道） ）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:39:07.967

您可能可以使用`display: table`（[小提琴](http://jsfiddle.net/Tf8WR/4/)）：

```
#container {
    display: table;
}

#row {
    display: table-row;
}

#text {
    display: table-cell;
}

#value {
    display: table-cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:39:34.287

# [演示小提琴](http://jsfiddle.net/mohammadAdil/Tf8WR/13/)

```
#text {
    display: inline-block;
    border: 1px solid #007700;
    float:left;
    min-width:80%;
    max-width:80%;
}

#value {
    display: inline-block;
    border: 1px solid #770000;
    float:left;
    max-width:18%;
    overflow:hidden;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T21:44:38.447

考虑到您有多个带有`id="text"`. 设置 a `max-width`，定义 a `height`，并一直设置它们`overflow:hidden`都`floating`离开了。您可能必须在行之间使用空白`clear-both`div。

```
<div id="text" style="overflow:hidden; float:left; max-width:270px; height:22px;">A very very very very very very very very long text</div><div style="float:left;" id="value">555</div> 
```

# asp.net-mvc-4 - MVC4 在通过 Visual Studio 2012 发布应用程序时运行迁移

> ID：15487359
> 
> 赞同：0
> 
> 时间：2013-03-18T21:33:10.180
> 
> 标签：asp.net-mvc-4, visual-studio-2012, publishing

我创建了一个 Visual Studio 2012 MVC4 应用程序。我正在通过右键单击项目并选择发布来测试“发布”功能。我按照[这里](http://www.asp.net/web-forms/tutorials/deployment/configuring-server-environments-for-web-deployment/configuring-a-database-server-for-web-deploy-publishing)的说明进行操作。我可以连接到远程 Web 服务器，并且由于某种原因，文件夹被发布到正确的文件夹，但内容文件夹除外。

当我运行浏览到远程 Web 服务器时，它会提示我登录，因此应用程序正在运行。然而，迁移从未发生过。创建的唯一表是 simplemembership 表，所以我知道 Web 服务器正在连接到远程数据库服务器。没有创建其他表，也没有运行种子方法。我播种角色和默认用户。

我选中了发布设置中“执行代码优先迁移（在应用程序启动时运行）”的框

在我的 localdb 连接字符串上一切正常以进行本地测试。当我发布到实时站点时，只是无法弄清楚如何从现有迁移和种子中创建数据库，请注意我只会播种一次。有没有办法指定再次运行哪些迁移？我可以复制迁移并在数据库服务器上运行，但为什么需要额外的步骤？

编辑：将 database.setinilizer 添加到我的上下文时，我现在收到一个错误，说我的 userprofile 表中的某些字段不存在，我使用简单的成员资格。此错误发生在 Web 发布后的第一个页面加载时，然后在继续页面加载时出现错误“WebSecurity.InitializeDatabaseConnection”方法只能调用一次。

但是，它现在确实创建了我的 simplemembership 表，但我对所有其他表的迁移从未运行，这就是为什么我缺少额外的用户配置文件字段。

**编辑：** 基本上我没有在调用 WebSecurity.InitializeDatabaseConnection 之前检查网络安全是否已初始化，以便解决该问题。现在我让它部分工作。该应用程序可以很好地创建 simplemembership 表，但是由于我将表添加到 UserProfile 表中，因此在更改它们之前我无法播种。因此，我手动创建了 userprofile 表并让应用程序创建其余的表。然后我在初始迁移中注释掉 userprofile 表。在此之后，当我登录时，它将创建我的其余表格。

**开放的问题**是如何让我的数据库迁移在 simplemembership 初始化之前运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T00:14:37.513

要在远程服务器上进行迁移工作，您需要首先在 Context 类中添加使用 SetInitializer ：

```
 static MyDatabaseContext()
        {
            Database.SetInitializer(new MigrateDatabaseToLatestVersion<MyProjectContext, Migrations.Configuration>());
        } 
```

在您的迁移配置中，您需要添加以下代码：

```
public Configuration()
        {
            AutomaticMigrationsEnabled = false;
            AutomaticMigrationDataLossAllowed = false;
        } 
```

我没有选择“执行代码优先迁移（在应用程序启动时运行）”，并且在 MyProjectContext 中设置初始化之后，它会为我执行迁移。如果您已在此处完成，为了播种您的数据，您可以在 Migration 配置类中执行以下操作：

```
 protected override void Seed(MyProject.Models.MyProjectContextcontext)
        {               
          DoSeed(context);               
        }

        private void DoSeed(MyProjectContext context)
        {
          var users = new List<User>
          {
            new Site { UserId = 1, Name = "TestUser", IsDeleted = false },
            new Site { UserId = 2, Name = "TestUser2", IsDeleted = false }
          };
            users.ForEach(s => context.Users.AddOrUpdate(s));
            context.SaveChanges();
} 
```

我没有在部署配置文件上选择“执行代码优先迁移（在应用程序启动时运行）”。有关这方面的更多详细信息，请参见：

[这个链接](http://www.asp.net/mvc/tutorials/deployment/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12#efcfmigrations) 和 [这个链接](http://msdn.microsoft.com/en-us/library/dd465337.aspx)

希望这会有所帮助（因为它对我有用），否则请在部署应用程序时添加任何错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-11T12:13:23.207

我认为问题是，因为只要您没有尝试访问数据或从站点/站点中创建任何需要连接到数据库的数据，迁移和播种将不会运行“以及运行的原因登录站点后在您的站点上迁移，可能是因为您的站点需要在所有页面中获得授权，或者您要在其中查看数据的页面。如果您有页面示例主页，则没有授权访问页面，您将看到该页面，如果在此页面中有一些数据需要从数据库中获取，您可能会看到迁移运行。我从这个[Deploy it to IIS 中找到了这个](http://www.asp.net/mvc/tutorials/deployment/visual-studio-web-deployment/deploying-to-iis)，但不确定是不是这个原因。如果您浏览包含数据且此数据访问不需要身份验证的主页，如果您的迁移仍未运行，请告诉我。

# android - 按下按钮时将一个 XML 布局打开到另一个 XML 布局

> ID：15487360
> 
> 赞同：1
> 
> 时间：2013-03-18T21:33:34.563
> 
> 标签：android, android-layout

基本上，我有两个 XML 文件

1.  周.xml
2.  weekone.xml

week.xml 的代码

```
<?xml version="1.0" encoding="UTF-8"?>

<!--
Begin Relative Layout
-->
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:scrollHorizontally="true"
    android:background="@drawable/appbackground">

    <TextView
    android:id="@+id/about_title"
    android:layout_width="fill_parent"
    android:layout_height="49dp"
    android:background="#00141c"
    android:fontFamily="Hobo Std"
    android:gravity="center"
    android:text="@string/start"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="#FFFFFF"
    android:textSize="25sp"
    android:textStyle="bold" />

    <ImageView 
     android:id="@+id/backarrow" 
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:clickable="true"
     android:src="@drawable/arrow"/>

    <ImageView
        android:id="@+id/week4"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginRight="24dp"
        android:clickable="true"
        android:paddingTop="400dp"
        android:src="@drawable/weekfour" />

    <ImageView
        android:id="@+id/week3"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@+id/week4"
        android:clickable="true"
        android:paddingTop="400dp"
        android:src="@drawable/weekthree" />

    <ImageView
        android:id="@+id/week2"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@+id/week3"
        android:clickable="true"
        android:paddingTop="400dp"
        android:src="@drawable/weektwo" />

    <ImageView
        android:id="@+id/week1"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@+id/week2"
        android:clickable="true"
        android:paddingTop="400dp"
        android:src="@drawable/weekone" />

    <TextView
        android:id="@+id/hinttext"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/week1"
        android:layout_below="@+id/backarrow"
        android:layout_marginTop="162dp"
        android:gravity="center_vertical"
        android:text="Press week1 to start workout" />

 <!-- 
 End of Relative Layout
  -->

    </RelativeLayout> 
```

weekone.xml 的代码

```
<?xml version="1.0" encoding="UTF-8"?>

             <!-- Begin of Linear Layout -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="400dp"
    android:orientation="vertical"
    android:background="@drawable/screenbackground"
    android:paddingTop="70dp" >

    <!--     Line seperator     -->

    <View
            android:layout_width="fill_parent"
            android:layout_height="2dp"
            android:id="@+id/separator"
            android:visibility="visible"
            android:background="#00141c"/>

    <TextView
        android:id="@+id/week1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/week1"
        android:textColor="#FFFFFF"
        android:textSize="25sp"
        android:paddingTop="5dp"
        android:paddingBottom="5dp"
        android:background="#00141c"/>

            <!-- Begin Scrollable Relative Layout -->

<ScrollView 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

<RelativeLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:scrollHorizontally="true">     

    <ImageView
        android:id="@+id/treadmillimage"
        android:layout_width="115dp"
        android:layout_height="93dp"
        android:paddingTop="10dp"
        android:src="@drawable/treadmill" />

    <EditText
        android:id="@+id/durOnTreadmill"
        android:layout_width="129dp"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="number"
        android:layout_marginLeft="180dp" 
        android:layout_centerVertical="true"/>

            <!--     Line seperator     -->

    <View
            android:layout_width="fill_parent"
            android:layout_height="2dp"
            android:id="@+id/separator"
            android:visibility="visible"
            android:background="#00141c"/>

            <!--    End Relative Layout   -->

    </RelativeLayout>

    <TextView
        android:id="@+id/treadmilltext"
        android:layout_width="91dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dp"
        android:text="@string/treadmill"
        android:textColor="#FFFFFF"
        android:textSize="20sp" />

<!--        Begin Relative Layou        -->

    <RelativeLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:scrollHorizontally="true">

    <ImageView
        android:id="@+id/stepperimage"
        android:layout_width="115dp"
        android:layout_height="93dp"
        android:paddingTop="10dp"
        android:src="@drawable/stepper" />

    <EditText
        android:id="@+id/durOnStepper"
        android:layout_width="129dp"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="number"
        android:layout_marginLeft="180dp" 
        android:layout_centerVertical="true"/>

        <!--     Line seperator     -->

    <View
            android:layout_width="fill_parent"
            android:layout_height="2dp"
            android:id="@+id/separator"
            android:visibility="visible"
            android:background="#00141c"/>

         <!--   End Relative Layout  -->

    </RelativeLayout>

    <TextView
        android:id="@+id/steppertext"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dp"
        android:text="@string/stepper"
        android:textColor="#FFFFFF"
        android:textSize="20sp" />

<!--    Begin Relative Layout    -->

    <RelativeLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:scrollHorizontally="true">

    <ImageView
        android:id="@+id/stationaryrowing"
        android:layout_width="115dp"
        android:layout_height="93dp"
        android:paddingTop="10dp"
        android:src="@drawable/stationaryrowing" />

    <EditText
        android:id="@+id/durOnStationaryRowing"
        android:layout_width="129dp"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="number"
        android:layout_marginLeft="180dp" 
        android:layout_centerVertical="true"/>

    <!--     Line seperator     -->

    <View
            android:layout_width="fill_parent"
            android:layout_height="2dp"
            android:id="@+id/separator"
            android:visibility="visible"
            android:background="#00141c"/>

<!--
End Relative Layout
-->
    </RelativeLayout>

    <TextView
        android:id="@+id/stationaryrowingtext"
        android:layout_width="108dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dp"
        android:text="@string/stationaryrowing"
        android:textColor="#FFFFFF"
        android:textSize="20sp" />

     <!--   Begin Relative Layout   -->
     <RelativeLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:scrollHorizontally="true">

    <ImageView
        android:id="@+id/exercisebikeimage"
        android:layout_width="115dp"
        android:layout_height="93dp"
        android:paddingTop="10dp"
        android:src="@drawable/ellipticaltrainer"/>

    <EditText
        android:id="@+id/durOnexcerisebike"
        android:layout_width="129dp"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="number"
        android:layout_marginLeft="180dp" 
        android:layout_centerVertical="true"/>

        <!--     Line seperator     -->

    <View
            android:layout_width="fill_parent"
            android:layout_height="2dp"
            android:id="@+id/separator"
            android:visibility="visible"
            android:background="#00141c"/>

    <!--    End Relative Layout  -->

    </RelativeLayout>

     <TextView
        android:id="@+id/excerisebiketext"
        android:layout_width="91dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dp"
        android:text="@string/exercisebike"
        android:textColor="#FFFFFF"
        android:textSize="20sp" />

    <!--    Begin Relative Layout   -->

       <RelativeLayout 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" 
            android:scrollHorizontally="true">

    <ImageView
        android:id="@+id/ellipticaltrainerimage"
        android:layout_width="115dp"
        android:layout_height="93dp"
        android:paddingTop="10dp"
        android:src="@drawable/ellipticaltrainer"/>

    <EditText
        android:id="@+id/durOnellipticaltrainer"
        android:layout_width="129dp"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="number"
        android:layout_marginLeft="180dp" 
        android:layout_centerVertical="true"/>

        <!--     Line seperator     -->

    <View
            android:layout_width="fill_parent"
            android:layout_height="2dp"
            android:id="@+id/separator"
            android:visibility="visible"
            android:background="#00141c"/>

    <!--        End Relative Layout      -->

</RelativeLayout>

        <TextView
        android:id="@+id/ellipticaltrainertext"
        android:layout_width="91dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dp"
        android:text="@string/ellipticaltrainer"
        android:textColor="#FFFFFF"
        android:textSize="20sp" />

  </ScrollView>
<!--
End Linear Layout
-->
</LinearLayout> 
```

所以，我想要实现的是，当我按下可点击的 ImageView 第 1 周时，它会隐藏 Textview“hintText”并在同一活动上执行 weekone.xml。我已经查看了 FrameLayout，因为它用于将布局放在彼此之上，并且我希望看到两种布局，因此不适合我的需求。ViewFlipper 用于在按下空白区域时更改布局，但我希望在按下按钮“第 1 周”时更改布局

请帮忙，我从 2 天以来一直在尝试解决这个问题，但没有高兴:(。谢谢 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:30:14.130

包裹`hintText`在 a 中`FrameLayout`，然后调用

```
FrameLayout fl = (FrameLayout)findViewById(R.id.your_framelayout_id);
LayoutInflater inflater = (LayoutInflater)getSystemService(LAYOUT_INFLATER_SERVICE);
fl.removeAllViews();
fl.addView(inflater.inflate(R.layout.weekone, null)); 
```

这`hintText`将从 中删除`FrameLayout`，然后加载`weekone.xml`并将其内容放入`FrameLayout`where `hintText`was。

事实上，`setContentView()`您在 中使用的`onCreate()`内部调用了一些非常相似的东西来将您的 XML 放置在主应用程序窗口中。

在不太复杂的布局中，另一种方法是使用静态布局包含（您会在 Eclipse 的 Layouts 图形布局编辑器中找到“包含其他布局”）并将其可见性置于`gone`. 然后你可以打电话

```
findViewById(R.id.hintText).setVisibility(View.GONE);
findViewById(R.id.included_layout).setVisibility(View.VISIBLE); 
```

如果你想节省几行代码。

另一种方法是走向“现代”并使用片段包含（[指南](http://developer.android.com/guide/components/fragments.html)，[参考](http://developer.android.com/reference/android/app/Fragment.html)）。掌握它需要一些时间，但从长远来看绝对值得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:19:22.217

如果我了解您要做什么，您可以尝试创建第三个布局，其中包含您已有的两个布局。当您按下 Week1 时，OnClick() 方法将布局从 week.xml 更改为 third.xml。

您也可以只创建一个包含weeks.xml 的布局，其中一个带有visible=true，另一个带有visible=false 的布局。点击imageviews会设置对应的layout visible=true。

# php - php mysql htaccess 第一次使用

> ID：15487371
> 
> 赞同：0
> 
> 时间：2013-03-18T21:34:09.243
> 
> 标签：php, mysql, .htaccess

我正在使用 php 和 mysql 创建一个配置文件页面，使用 get 方法从这样的 url 获取用户名，`(http://localhost/Unnamed%20Site%202/resources/username)`所以我使用了 .htaccess 但问题是我放置 .htaccess 的根文件夹消失了，我得到了来自浏览器的错误消息： **内部服务器错误服务器遇到内部错误或配置错误，无法完成您的请求。请联系服务器管理员 admin@localhost 并告知他们错误发生的时间，以及您所做的任何可能导致错误的事情。服务器错误日志中可能提供有关此错误的更多信息。** 任何人都可以帮助我？？

# 这是 appache_error.log

```
 [Mon Mar 18 19:13:05 2013] [error] [client 127.0.0.1] PHP   1\. {main}() C:\\wamp\\www\\Unnamed Site 2\\resources\\profile.php:0, referer: http://localhost/Unnamed%20Site%202/resources/
    [Mon Mar 18 19:13:16 2013] [error] [client 127.0.0.1] File does not exist: C:/wamp/www/favicon.ico
    [Mon Mar 18 19:13:21 2013] [error] [client 127.0.0.1] File does not exist: C:/wamp/www/favicon.ico
    [Mon Mar 18 19:13:52 2013] [alert] [client 127.0.0.1] C:/wamp/www/Unnamed Site 2/resources/.htaccess: Invalid command 'RewriteEngine', perhaps misspelled or defined by a module not included in the server configuration, referer: http://localhost/Unnamed%20Site%202/resources/account-setting.php
    [Mon Mar 18 19:13:52 2013] [error] [client 127.0.0.1] File does not exist: C:/wamp/www/favicon.ico
    [Mon Mar 18 19:23:09 2013] [alert] [client 127.0.0.1] C:/wamp/www/Unnamed Site 2/resources/.htaccess: Invalid command 'RewriteEngine', perhaps misspelled or defined by a module not included in the server configuration, referer: http://localhost/Unnamed%20Site%202/resources/profile.php
    [Mon Mar 18 19:23:09 2013] [error] [client 127.0.0.1] File does not exist: C:/wamp/www/favicon.ico
    [Mon Mar 18 19:23:09 2013] [error] [client 127.0.0.1] File does not exist: C:/wamp/www/favicon.ico
    [Mon Mar 18 19:23:11 2013] [alert] [client 127.0.0.1] C:/wamp/www/Unnamed Site 2/resources/.htaccess: Invalid command 'RewriteEngine', perhaps misspelled or defined by a module not included in the server configuration, referer: http://localhost/Unnamed%20Site%202/
    [Mon Mar 18 19:23:11 2013] [error] [client 127.0.0.1] File does not exist: C:/wamp/www/favicon.ico
    [Mon Mar 18 19:23:12 2013] [error] [client 127.0.0.1] File does not exist: C:/wamp/www/favicon.ico
    [Mon Mar 18 19:23:13 2013] [error] [client 127.0.0.1] File does not exist: C:/wamp/www/favicon.ico
    [Mon Mar 18 19:23:14 2013] [error] [client 127.0.0.1] File does not exist: C:/wamp/www/favicon.ico
    [Mon Mar 18 19:23:16 2013] [alert] [client 127.0.0.1] C:/wamp/www/Unnamed Site 2/resources/.htaccess: Invalid command 'RewriteEngine', perhaps misspelled or defined by a module not included in the server configuration, referer: http://localhost/
    [Mon Mar 18 19:23:16 2013] [error] [client 127.0.0.1] client denied by server configuration: C:/Apache2, referer: http://localhost/Unnamed%20Site%202/
    [Mon Mar 18 19:23:16 2013] [error] [client 127.0.0.1] client denied by server configuration: C:/Apache2, referer: http://localhost/Unnamed%20Site%202/
    [Mon Mar 18 19:23:16 2013] [error] [client 127.0.0.1] client denied by server configuration: C:/Apache2, referer: http://localhost/Unnamed%20Site%202/
    [Mon Mar 18 19:23:16 2013] [error] [client 127.0.0.1] client denied by server configuration: C:/Apache2, referer: http://localhost/Unnamed%20Site%202/
    [Mon Mar 18 19:23:16 2013] [error] [client 127.0.0.1] client denied by server configuration: C:/Apache2, referer: http://localhost/Unnamed%20Site%202/
    [Mon Mar 18 19:23:16 2013] [error] [client 127.0.0.1] File does not exist: C:/wamp/www/favicon.ico 
```

# 这是profile.php

```
// updatede for using the GET methode for ge the data nedded from the url 
if(isset($_GET['u']))
{
      $username = mysql_real_escape_string($_GET['u']);
      if(ctype_alnum($username))
     {

      //check user exist
         $check = mysql_query("SELECT user_name, first_name FROM user WHERE user_name = '$username' ")or die(mysql_error());
         if (mysql_num_rows($check)==1) 
         {
           $get = mysql_fetch_assoc($check);
           $username = $get['user_name']; 
           $fname = $get['first_name'];
         }
         else
         {
             // this line is to redirect the unexist users to the index.php
            echo "<meta http-equiv=\"refresh\" content=\"0; url=http://localhost/Unnamed Site 2/resources/index.php\">";
            exit();  
         }
      }
   }
?> 
```

# .htaccess

```
RewriteEngine On
RewriteRule ^([a-zA-Z0-9_-]+)$ profile.php?u=$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:37:51.830

此错误消息

> [Mon Mar 18 19:13:52 2013] [alert] [client 127.0.0.1] C:/wamp/www/Unnamed Site 2/resources/.htaccess: **Invalid command 'RewriteEngine' ，可能拼写****错误**或由模块定义**包含在服务器配置**中，referer：`http://localhost/Unnamed%20Site%202/resources/account-setting.php`

提示缺少`mod_rewrite`模块。您必须先安装和/或配置它，然后才能使用它。

# uml - 双向和单向关联 UML

> ID：15487372
> 
> 赞同：10
> 
> 时间：2013-03-18T21:34:11.470
> 
> 标签：uml, associations

虽然我认为我理解`aggregation`和`composition`，但我在理解`bi-directional`和`uni-directional`联想方面有困难。我读过`bi-directional`关联，两个类都知道彼此，并且`uni-directional`关联只有一个类知道这种关系。然而，这个解释对我来说似乎太抽象了，我想知道这对我的代码和我正在编写的程序特别意味着什么。如果你能提供一个简单的例子来说明这两者如何转换为代码，那将是非常好的（我更喜欢 c++，但它可以是任何东西，包括伪代码）

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-18T22:10:22.400

双向关联可从两端导航。例如，给定以下类（为简单起见，假设两端的关联为 0..1）

```
class Parent {
  Child* children;
}

class Child {
  Parent* parent;
} 
```

你可以从 a`Parent`到它的孩子，反之亦然：父母知道它的孩子，孩子知道它的父母，和 (if `this.parent!=null`) `this.parent.child==this`（否则它不会是同一个关联）。

```
Parent <---------> Child 
```

但是，如果没有指向`Parent`in的指针`Child`：

```
class Child { } 
```

这将是一个单向关联：您可以从父母转到孩子，但您不能从孩子回到父母。

```
Parent ----------> Child 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-06T13:24:37.720

不幸的是，UML 规范没有定义任何“双向关联”的概念，而只提到了“双向可导航性”，其中“可导航性”（在类图中用*箭头*表示）没有明确定义的计算含义，因为它可以是例如，通过引用属性或查询提供。*由引用属性提供的最有效的“可导航性”形式是用关联端所有权*的 UML 概念建模的（在类图中用一个*点表示）。*

***双向关联***可以精确地定义为一对***相互反向的参考属性***。这个定义意味着两个条件：

1.  引用`this`一个孩子，`this.parent.child == this`正如哈维尔有些不完整的回答中所解释的那样，但此外还有

2.  对于`this`引用父母，`this.child.parent == this`.

您可以阅读更多相关信息，并在教程[在 Java EE 中](http://web-engineering.info/tech/JavaJpaJsfApp/bidirectional-association-tutorial.html)管理[双向关联和在 JavaScript](http://web-engineering.info/tech/JsFrontendApp/bidirectional-association-tutorial.html)中管理双向关联中找到许多描述双向关联示例的类图。

# sql - 如何正确舍入 SQL 货币类型？

> ID：15487380
> 
> 赞同：0
> 
> 时间：2013-03-18T21:34:53.880
> 
> 标签：sql, sql-server, rounding, currency

我需要 SQL 专家的帮助。我正在尝试获取小数点后 4 位的数据。我正在对“金钱”类型进行一些计算。然而，计算并不符合我的喜好。

下面是一个具有常规数字和相同货币类型值的示例。

```
DECLARE @MaxAmt money
DECLARE @MinAmt money

SET @MaxAmt = 207998693.55
SET @MinAmt = 20799442.35

SELECT
((207998693.55 - 20799442.35) / 2 + 20799442.35) / 24 AS Col1,
((@MaxAmt - @MinAmt) / 2 + @MinAmt) / 24 AS Col2 
```

Col1 显示的值等于 4766627.831250000 而 Col2 的值是 4766627.8312。

我的目标是只显示 4 位十进制数字，但它应该是正确的。我期望 4766627.8313 值。

投射后会显示。

```
SELECT CAST(((207998693.55 - 20799442.35) / 2 + 20799442.35) / 24 AS DECIMAL(12,4)) 
```

但是当我处理货币类型时，我的小数点后值是 .8312 而不是 .8313

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T23:56:43.877

对这种行为最可能的解释是该`Money`类型使用了所谓的[银行家四舍五入](http://en.wikipedia.org/wiki/Rounding#Round_half_to_even)法（对该页面的审查应该可以揭示选择它的可能原因）。

浏览文档，似乎没有任何“内置”来改变这一点——`DECIMAL`如果你想在 SQL 本身中执行这个，你可能需要首先明确地强制转换。（替代方案包括将至少一些计算提取到您的应用程序层，如有必要，或编写存储过程）。

# php - 如何在不重新遍历父循环的情况下同时遍历两个数组？

> ID：15487386
> 
> 赞同：12
> 
> 时间：2013-03-18T21:35:21.677
> 
> 标签：php

如何同时遍历两个大小相等的数组？

例如，第一个数组`$a = array( 1,2,3,4,5);` 第二个数组`$b = array(1,2,3,4,5);`

我希望通过两者进行迭代的结果是让循环过程通过相同的值来产生类似的结果

```
 1-1
  2-2
  3-3
  4-4
  5-5 
```

我试图在下面这样做，但它没有用，它继续通过第一个循环

```
foreach($a as $content) {
    foreach($b as $contentb){
        echo $a."-".$b."<br />"; 
    }
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-18T21:38:26.810

不是最高效的，而是 SPL 的 multipleIterator 的一个演示

```
$mi = new MultipleIterator();
$mi->attachIterator(new ArrayIterator($a));
$mi->attachIterator(new ArrayIterator($b));

$newArray = array();
foreach ( $mi as $value ) {
    list($value1, $value2) = $value;
    echo $value1 , '-' , $value2 , PHP_EOL;
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-18T21:37:17.850

使用普通`for`循环而不是 a `foreach`，以便获得显式循环计数器：

```
for($i=0; $i<count($content)-1; $i++) {
  echo $content[$i].'-'.$contentb[$i];
} 
```

如果您想使用基于字符串的索引数组，并且知道数组之间的字符串索引相等，则可以坚持使用该`foreach`构造

```
foreach($content as $key=>$item) {
  echo $item.'-'.$contentb[$key];
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T21:45:23.310

如果它们的大小相同，请执行以下操作：

```
foreach($a as $key => $content){
   $contentb = $b[$key];
   echo($content."-".$contentb."<br />");
} 
```

# angularjs - 使用 angularJS 的 $resource 取消引用对象

> ID：15487387
> 
> 赞同：2
> 
> 时间：2013-03-18T21:35:46.073
> 
> 标签：angularjs, angular-resource

我是 AngularJS 的新手，我目前正在使用 Django/Tastypie API 构建一个 webapp。这个 web 应用程序适用于帖子，API 调用 (GET) 如下所示：

```
{
    title: "Bootstrap: wider input field - Stack Overflow",
    link: "http://stackoverflow.com/questions/978...",

    author: "/v1/users/1/",

    resource_uri: "/v1/posts/18/",
} 
```

为了请求这些对象，我创建了一个 Angular 的服务，它嵌入了如下声明的资源：

```
Post: $resource(ConfigurationService.API_URL_RESOURCE + '/v1/posts/:id/') 
```

一切都像魅力一样，但我想解决两个问题：

1.  如何正确替换`author`字段的值？换句话说，如何尽可能自动地请求每个引用字段？
2.  如何缓存此值以避免在同一端点上进行多次调用？

同样，我是 angularJS 的新手，我可能在理解`$resource`对象时遗漏了一些东西。

谢谢，马克西姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:54:00.923

关于问题一，我知道没有简单的、开箱即用的解决方案。我想您可以使用自定义[响应转换](http://docs.angularjs.org/api/ng.%24http)器来启动辅助 $resource 请求，将来自这些请求的[承诺](http://docs.angularjs.org/api/ng.%24q)附加为响应对象的属性（代替 URL）。$resource 工厂的最新版本[允许您指定](https://groups.google.com/forum/?fromgroups=#!topic/angular/hin5GLiiufk)$resource 实例的这种转换器。您将委托给全局默认响应转换器 ($httpProvider.defaults.transformResponse) 以获取您的实际 JSON，然后替换属性并从那里启动辅助请求。请记住，当以这种方式进行委派时，传递您自己的响应转换器在调用时收到的前两个参数，而不是一个参数，即使文档只提到了一个（我很难学会这一点）。

没有办法知道每个最后一个承诺何时都已实现，但我认为您不会有任何依赖于这些知识的代码（因为您的 UI 通常只绑定到模型对象的点点滴滴，本身是一个承诺，由原始 HTTP 请求返回）。

至于问题二，我不确定您是指您的主要对象（在这种情况下， $scope 应该足以作为保留引用的手段）还是您建议下载的这些附属对象作为组装的手段在客户端聚合。假设是后者，我猜你可以做一些事情，比如维护一个与你的 $scope 中的对象相关的 URL 的哈希，并让你的子公司 $resource 请求上的成功函数更新这个字典。然后你可以让我上面描述的响应转换器首先检查哈希，看看它是否已经获得了所需的资源实例，只有在没有这样的本地副本时才从后端获取 $resource。

这是在客户端组装资源的大量工作（和往返），而在应用程序层组装聚合并预先提供服务可能要容易得多。REST 对数据规范化没有任何期望。

# shell - 深奥的 shell 脚本语法

> ID：15487391
> 
> 赞同：-1
> 
> 时间：2013-03-18T21:36:05.623
> 
> 标签：shell, syntax

我在我使用的 shell 脚本中找到了这个，我在找到这个语法的正式描述/定义时遇到了麻烦：

```
ACTION=${1:-update} 
```

我假设如果 $1 变量不存在（没有命令行参数），则使用“-update”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:47:39.170

这不是深奥的。它是 POSIX，甚至是 Bourne。在每个 shell 手册页中。`man bash`或`man ksh`。假设大部分是正确的，如果参数`1`未设置或为空字符串，则展开备用。

*   [http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_06_02](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_06_02)

# html - 在下拉菜单中悬停全宽

> ID：15487394
> 
> 赞同：0
> 
> 时间：2013-03-18T21:36:12.720
> 
> 标签：html, css, html-lists, nav

我在每个下拉菜单项的整个宽度上的悬停效果都有一些问题。我希望每个项目的背景颜色发生变化。目前，我只能获得悬停文本的宽度，而不是下拉列表的宽度。

[http://jsfiddle.net/7AXZR/](http://jsfiddle.net/7AXZR/)

谢谢！

的HTML：

```
<div id="nav">

<ul>
    <li><img src="images/kranz3.png" alt="kranz"/><a href="compete.php" id="competenav">COMPETE</a></li>
    <li><img src="images/thumb3.png" alt="thumb"/><a href="score.php" id="scorenav">SCORE</a></li>
    <div id="logolist"><li><a href="index.php"><img src="images/logorz.png" width="175em" /></a></li></div>
    <li><img src="images/shopnav.png" alt="bag"/><a href="shop.php" id="shopnav">SHOP</a></li>
    <ul id="more-dropdown"><li><img src="images/morenav2.png" alt="more"/><a href="#" id="morenav">MORE</a><ul>
        <div id="dropdown-links">
        <li><a href="printyourown.php">Print your own art</a></li>
        <li><a href="compete.php">How it works</a></li>
        <li><a href="causes.php">About Causes</a></li>
        <li><a href="#">About our products</a></li>
        <li><a href="#">About us</a></li>
        <li><a href="#">Help & Feedback</a></li>
        <li><a href="termsofservice.php">Terms of Service</a></li>
        <li><a href="#">Privacy</a></li></ul>
        </div>
    </li>
</ul>
</div>
<div class="clear">
</div> 
```

CSS：

```
#nav {
    position:relative;
    background:#ffffff;
    width:100%;
    height:0.2em:
    overflow:visible;
    margin-top:-2em;
    font-family:Cusmyrb;
    font-size:75%;

}

#logolist {
    position:absolute;
    padding-top:2em;
    width:150px;
    left:50%;
    margin-left:-90px;
    margin-top:-7%;

}

#nav ul {
    list-style-type:none;

}

#nav li {
    display:inline;
    float:left;
    width:20%;
    margin-left:2%;
    margin-right:2%;
    margin-top:3%;
    text-align:center;
}

#nav a {
    display:block;
    margin-right:0% auto;
    padding-left:0% auto;
    color:#343234;
    text-decoration:none;

}

#nav a:hover {
 color:#5020B8;
}

#nav a:active {
 color:#5020B8;
}

.clear {
    clear:both;
}

#more-dropdown {
    margin: 0;
    padding: 0;
    height:0;
}

#more-dropdown li {
    list-style: none;
    float: left;
}

#dropdown-links li a {
    float:left;
    display: block;
    font-family:Cusmyr;
    font-size:14px;
    background-color:#797A7D;
    color:#797A7D;
    text-decoration: none;
    margin-top:0.5em;
    margin-left:1em;
}

    #dropdown-links li a:hover {
    float:left;
    display: block;
    font-family:Cusmyr;
    font-size:14px;
    background-color:#01A07E;
    color:#797A7D;
    text-decoration: none;
    margin-top:0.5em;
    margin-left:1em;
}

    #more-dropdown li ul {
    display: none; 
    width: 6em; /* Width to help Opera out */
    background-color:#797A7D;
    border:1px solid white;
}

    #more-dropdown li:hover ul {
    display: block;
    position: absolute;
    margin: 0;
    padding: 0; }
#more-dropdown li:hover li {
    float: none;
    background-color:#01A07E;
}
#more-dropdown li:hover li a {
    color: #ffffff;
}
#more-dropdown li li a:hover { 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:54:29.397

转变

```
#nav a:hover 
```

至

```
#nav:hover a 
```

编辑：首先：`<a>`元素中的`<li>`元素具有顶部和左侧边距，因此它们不会填满整个列表项

第二：`#nav li`选择器也适用于下拉列表中的列表项，您不希望它们浮动。这是因为周围的列表项的高度为 0

除了第一个列表项外，我删除了浮动：

新小提琴：http: [//jsfiddle.net/PZGLz/](http://jsfiddle.net/PZGLz/)

# c# - 如何在字符串中查找特定字符

> ID：15487396
> 
> 赞同：-6
> 
> 时间：2013-03-18T21:36:15.000
> 
> 标签：c#

在 C# 中，如何在字符串中找到特定字符。这个“2222+2222”是我的字符串，我想在其中找到字符“+”？如果找到它，我想要一个返回布尔值的函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T21:37:46.187

string.Contains("+") 返回一个布尔值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T21:37:34.447

`yourString.IndexOf("+")`如果找到字符，将返回 0 或正数

由于您更喜欢返回 bool 的东西，因此您可以改用`Contains`它，但请注意它`Contains`不会提供重载来执行不区分大小写的搜索。在这很重要的情况下（查找字符串而不关心大小写），最好使用`IndexOf(stringToSearch,StringComparison.InvariantCultureIgnoreCase)`来确定是否找到了字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T21:37:23.173

```
String s = "2222+2222";

if (s.Contains("+")) {
  // dosomething...
} 
```

# sql - 计算两个表的总和

> ID：15487397
> 
> 赞同：0
> 
> 时间：2013-03-18T21:36:15.350
> 
> 标签：sql, postgresql, aggregate-functions

从下表中，我需要确定哪个城市受到的公共汽车污染最多。

路线：

```
route_id | departure_city | destination_city | bus_type | times_per_day
 1         2                1                  1          4
 2         1                3                  2          2
 3         3                1                  2          1
 4         1                2                  1          5
 5         1                3                  1          3 
```

总线类型：

```
bus_type_id | pollution_output
 1             3
 2             7 
```

例如，城市 2 每天四次暴露于 bus_type 1 (route_id 1) 和 bus_type 1 每天五次 (route_id 4)，每天的污染输出为 27。但我基本上需要为所有城市计算这个并返回污染最大的城市，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:53:24.850

```
SELECT city, sum(pollution) AS total_pollution
FROM (
   SELECT r.depature_city AS city
         ,b.pollution_output * r.times_per_day AS pollution
   FROM   routes   r
   JOIN   bustypes b ON b.bus_type_id = r.bus_type

   UNION ALL
   SELECT r.destination_city
         ,b.pollution_output * r.times_per_day
   FROM   routes   r
   JOIN   bustypes b ON b.bus_type_id = r.bus_type
   ) AS sub
GROUP  BY city 
```

# android - 删除图像文件后刷新图库？

> ID：15487399
> 
> 赞同：10
> 
> 时间：2013-03-18T21:36:40.397
> 
> 标签：android, android-intent, android-broadcast

我总是为我的问题找到以下答案：

```
context.sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://"
            + Environment.getExternalStorageDirectory()))); 
```

但它不适用于我的系统（Nexus4 Android 4....）

我可以使用此代码创建一个文件并将其添加到 Media-DB

```
Intent mediaScanIntent = new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE);
    Uri contentUri = Uri.fromFile(file);
    mediaScanIntent.setData(contentUri);
    context.sendBroadcast(mediaScanIntent); 
```

其中“文件”是我要添加的新图像文件。

删除文件后，我尝试通过

```
Intent intent = new Intent(Intent.ACTION_MEDIA_MOUNTED);
    Uri contentUri = Uri.parse("file://" + Environment.getExternalStorageDirectory());
    intent.setData(contentUri);
    context.sendBroadcast(intent); 
```

或者

```
context.sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://"
            + Environment.getExternalStorageDirectory()))); 
```

但是画廊中仍然有空的占位符。

我不知道为什么？...

为了安全起见，我也在 AndroidManifest.xml 中添加了我的 Activity

```
<intent-filter>
            <action android:name="android.intent.action.MEDIA_MOUNTED" />
            <data android:scheme="file" /> 
        </intent-filter> 
```

但结果是一样的。有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-01-23T09:10:39.057

在 KitKat 之后，您无法发送 Intent 以`MediaScanner`在整个设备的存储上运行，因为这是一项 CPU I\O 密集型任务，如果每个应用程序下载图像或删除图像，调用该意图电池会很容易耗尽，因此他们已决定阻止该行动。以下是您的选择：

使用以前的 KitKat 方法

传递你的文件路径：

```
if(Build.VERSION.SDK_INT < Build.VERSION_CODES.KITKAT) {
    mContext.sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,
                Uri.parse("file://" + Environment.getExternalStorageDirectory())));
} else{

    MediaScannerConnection.scanFile(mContext,  filePath, null, new MediaScannerConnection.OnScanCompletedListener() {
        /*
         *   (non-Javadoc)
         * @see android.media.MediaScannerConnection.OnScanCompletedListener#onScanCompleted(java.lang.String, android.net.Uri)
         */
        public void onScanCompleted(String path, Uri uri) 
        {
        Log.i("ExternalStorage", "Scanned " + path + ":");
        Log.i("ExternalStorage", "-> uri=" + uri);
        }
    });

} 
```

更可靠的方法是`MediaStore`直接更新：

```
// Set up the projection (we only need the ID)
String[] projection = { MediaStore.Images.Media._ID };

// Match on the file path
String selection = MediaStore.Images.Media.DATA + " = ?";
String[] selectionArgs = new String[] { file.getAbsolutePath() };

// Query for the ID of the media matching the file path
Uri queryUri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;
ContentResolver contentResolver = getContentResolver();
Cursor c = contentResolver.query(queryUri, projection, selection, selectionArgs, null);
if (c.moveToFirst()) {
    // We found the ID. Deleting the item via the content provider will also remove the file
    long id = c.getLong(c.getColumnIndexOrThrow(MediaStore.Images.Media._ID));
    Uri deleteUri = ContentUris.withAppendedId(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, id);
    contentResolver.delete(deleteUri, null, null);
} else {
    // File not found in media store DB
}
c.close(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-01-21T05:19:35.990

检查下面的代码片段以验证所有以编程方式添加/删除/移动图像文件的情况，并让图库应用程序刷新数据

```
/***
 * Refresh Gallery after add image file programmatically 
 * Refresh Gallery after move image file programmatically 
 * Refresh Gallery after delete image file programmatically
 * 
 * @param fileUri : Image file path which add/move/delete from physical location
 */
public void refreshGallery(String fileUri) {

    // Convert to file Object
    File file = new File(fileUri);

    if (VERSION.SDK_INT >= VERSION_CODES.KITKAT) {
        // Write Kitkat version specific code for add entry to gallery database
        // Check for file existence
        if (file.exists()) {
            // Add / Move File
            Intent mediaScanIntent = new Intent(
                    Intent.ACTION_MEDIA_SCANNER_SCAN_FILE);
            Uri contentUri = Uri.fromFile(new File(fileUri));
            mediaScanIntent.setData(contentUri);
            BaseApplication.appContext.sendBroadcast(mediaScanIntent);
        } else {
            // Delete File
            try {
                BaseApplication.appContext.getContentResolver().delete(
                        MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                        MediaStore.Images.Media.DATA + "='"
                                + new File(fileUri).getPath() + "'", null);
            } catch (Exception e) {
                e.printStackTrace();

            }
        }
    } else {
        BaseApplication.appContext.sendBroadcast(new Intent(
                Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://"
                        + getBaseFolder().getAbsolutePath())));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-31T19:27:11.153

对于 Xamarin C#，您可以使用以下代码！

> 只需将完整的文件路径传递给数组

```
 Android.Media.MediaScannerConnection.ScanFile(Android.App.Application.Context, new string[] { deletedImageFilePath}, null, null); 
```

# git - 添加提交作者作为钩子/帖子的发件人

> ID：15487400
> 
> 赞同：0
> 
> 时间：2013-03-18T21:36:45.727
> 
> 标签：bash, git, bash, githooks

当有人提交时，我希望将作者设置为发件人。我已经缩小了这段代码的范围`post-receive`

```
send_mail()
{
        if [ -n "$envelopesender" ]; then
                /usr/sbin/sendmail -t -f "$envelopesender"
        else
                /usr/sbin/sendmail -t
        fi
} 
```

我要把它添加到 else 条件中，我想用类似的东西

```
git log <SHA-1> --pretty=format:"%an<%ae>" -1 
```

我想我会使用这个`$newrev`变量来表示 sha。

我对我的[bash](/questions/tagged/bash "显示标记为“bash”的问题")不是很新鲜。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:37:33.350

我想你应该能够做到这一点：

```
send_mail()
{
    if [ -n "$envelopesender" ]; then
        /usr/sbin/sendmail -t -f "$envelopesender"
    else
        author="$(git --no-pager show -s --pretty="%an" $newrev)"
        email="$(git --no-pager show -s --pretty="%ae" $newrev | sed 's/ *$//g')"
        if [ -n "$email" ]; then
            /usr/sbin/sendmail -t -F "$author" -f "$email"
        fi
    fi
} 
```

对于[`git show`](https://www.kernel.org/pub/software/scm/git/docs/git-show.html)：

*   `git show`看起来是一个更合适的命令来提取有关提交的信息，而不是`git log`. （您可能会使用更合适的东西；））
*   `--no-pager`确保它不会打开寻呼机程序
*   `-s`跳过提交中的文件列表和差异

对于[`sendmail`](http://linux.die.net/man/8/sendmail.sendmail)：

*   使用设置发件人姓名`-F`
*   使用设置发件人电子邮件`-f`

# c# - 如果它尝试播放 mp3 文件，我的代码会崩溃，适用于 wav 文件

> ID：15487402
> 
> 赞同：-1
> 
> 时间：2013-03-18T21:36:52.753
> 
> 标签：c#, windows-phone-7, audio, xna, soundeffect

我所有的声音剪辑都是 mp3，所以我真的不想翻译它们 tp wav。
如果我尝试播放 mp3 文件，则会出现异常，但该代码适用于 .wav 文件。我认为必须有一种播放 mp3 文件的方法。

```
Stream s = TitleContainer.OpenStream("sounds/bag.mp3");

// throws a exceptio if its a mp3 file
SoundEffect effect = SoundEffect.FromStream(s);
FrameworkDispatcher.Update();
effect.Play(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:39:37.227

这是设计使然 -`SoundEffect.FromStream`仅适用于波形文件。根据[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.audio.soundeffect.fromstream.aspx)：

> Stream 对象必须指向有效 PCM 波形文件的头部。此外，此波形文件必须为 RIFF 比特流格式。
> 
> 音频格式有以下限制：
> 
> *   必须是 PCM 波形文件
> *   只能是单声道或立体声
> *   必须是 8 位或 16 位
> *   采样率必须在 8,000 Hz 和 48,000 Hz 之间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T16:09:38.930

尝试使用媒体元素..

```
MediaElement MyMedia = new MediaElement();
MyMedia.Source = new Uri("sounds/bag.mp3", UriKind.RelativeOrAbsolute);
MyMedia.Play(); 
```

# html - 按钮的文本垂直对齐

> ID：15487408
> 
> 赞同：21
> 
> 时间：2013-03-18T21:37:22.953
> 
> 标签：html, css

我在这里遇到了棘手的问题。我想在按钮内垂直对齐我的文本

```
<button id="rock" onClick="choose(1)">Rock</button> 
```

这是我的 CSS

```
button {
    font-size: 22px;
    border: 2px solid #87231C;
    border-radius: 100px;
    width: 100px;
    height: 100px;
    color: #FF5A51;
    text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
}
button:active {
    font-size: 22px;
    border: 2px solid red;
    border-radius: 100px;
    width: 100px;
    height: 100px;
} 
```

你可以在这里查看[http://jsfiddle.net/kA8pp/](http://jsfiddle.net/kA8pp/)。我想把文字放在底部。**非常感谢你！**

**编辑：**我不能很好地解释它所以这是它的图片:)

[![在此处输入图像描述](../Images/658c0280e3490198b6c5300f79432d8b.png)](https://i.stack.imgur.com/Ws6Ek.png)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-18T21:42:49.750

你可以用它`line-height`来实现你的目标。

```
button {
    font-size: 22px;
    border: 2px solid #87231C;
    border-radius: 100px;
    width: 100px;
    height: 100px;
    color: #FF5A51;
    text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
    line-height: 150px;
    overflow: visible;
} 
```

[http://jsfiddle.net/kA8pp/2/](http://jsfiddle.net/kA8pp/2/)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-07-23T14:49:18.847

您可以使用[flexbox](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Using_CSS_flexible_boxes) （根据您的需要检查[浏览器支持）。](http://caniuse.com/#search=flexbox)

```
button {
  display: inline-flex;
  align-items: flex-end; 
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-18T21:42:56.383

`padding-top:65px;`在按钮类中尝试

```
button {
    font-size: 22px;
    border: 2px solid #87231C;
    border-radius: 100px;
    width: 100px;
    height: 100px;
    color: #FF5A51;
    text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
    padding-top:65px;
} 
```

[JS 小提琴演示](http://jsfiddle.net/kA8pp/4/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-18T21:59:12.867

**按钮样式不同：样式的变化**

该`<button>`元素的行为与其他一些元素略有不同，例如 a `<div>`。如果你`display: table-cell`在一个按钮中设置，它不会影响布局，所以`vertical-align`会允许你控制文本的位置。

另一方面，可以执行以下操作：

```
<div class="button" id="rock" onClick="choose(1)">Rock</div> 
```

并使用以下 CSS：

```
.button {
    font-size: 22px;
    border: 2px solid #87231C;
    border-radius: 100px;
    width: 100px;
    height: 90px;
    color: #FF5A51;
    text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
    display: table-cell;
    vertical-align: bottom;
    text-align: center;
    padding-bottom: 10px;
} 
```

在这种情况下，您可以通过调整填充和高度来进行一些控制。

如果您将 JavaScript 操作绑定到元素，那么标签是什么、div 或按钮并不重要。

这种方法在特定情况下可能会有一些优势。

如果将上面的 CSS 应用于按钮标签，它将不起作用。很高兴知道。

[http://jsfiddle.net/audetwebdesign/QSap8/](http://jsfiddle.net/audetwebdesign/QSap8/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-03-29T11:23:48.707

这应该适合你！

```
<pre>
.button{
    font-family: Arial, Helvetica, sans-serif;
    font-weight: normal;
    color: #444;
    width: 32px;
    padding: 2px;
    margin-left: 5px;
    background-color: #fdfdfd;
    border: 1px solid #cdcdcd;
    cursor: pointer;
}
</pre> 
```

# scala - 计算文件中单词的最简单方法

> ID：15487413
> 
> 赞同：12
> 
> 时间：2013-03-18T21:37:30.293
> 
> 标签：scala

我正在尝试以最简单的方式编写一个程序来计算 Scala 语言中文件中单词的出现次数。到目前为止，我有这些代码：

```
import scala.io.Codec.string2codec
import scala.io.Source
import scala.reflect.io.File

object WordCounter {
    val SrcDestination: String = ".." + File.separator + "file.txt"
    val Word = "\\b([A-Za-z\\-])+\\b".r

    def main(args: Array[String]): Unit = {

        val counter = Source.fromFile(SrcDestination)("UTF-8")
                .getLines
                .map(l => Word.findAllIn(l.toLowerCase()).toSeq)
                .toStream
                .groupBy(identity)
                .mapValues(_.length)

        println(counter)
    }
} 
```

不要打扰正则表达式。我想知道如何从这一行中检索到的序列中提取单个单词：

```
map(l => Word.findAllIn(l.toLowerCase()).toSeq) 
```

为了计算每个单词的出现次数。目前我正在获取带有计数单词序列的地图。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-18T22:03:40.357

您可以通过使用正则表达式将文件行拆分为单词`"\\W+"`（`flatmap`是惰性的，因此不需要将整个文件加载到内存中）。要计算出现次数，您可以使用每个单词折叠`Map[String, Int]`更新它（比使用更节省内存和时间`groupBy`）

```
scala.io.Source.fromFile("file.txt")
  .getLines
  .flatMap(_.split("\\W+"))
  .foldLeft(Map.empty[String, Int]){
     (count, word) => count + (word -> (count.getOrElse(word, 0) + 1))
  } 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-08-17T22:01:20.783

我认为以下内容更容易理解：

```
Source.fromFile("file.txt").
  getLines().
  flatMap(_.split("\\W+")).
  toList.
  groupBy((word: String) => word).
  mapValues(_.length) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T22:03:47.843

我不是 100% 确定你在问什么，但我想我看到了问题所在。尝试使用`flatMap`而不是`map`：

```
flatMap(l => Word.findAllIn(l.toLowerCase()).toSeq) 
```

这会将您的所有序列连接在一起，以便`groupBy`在单个单词而不是在行级别上完成。

* * *

**关于您的正则表达式的注释**

我知道您说过不要担心您的正则表达式，但是您可以进行一些更改以使其更具可读性。这是你现在拥有的：

```
val Word = "\\b([A-Za-z\\-])+\\b".r 
```

首先，您可以使用 Scala 的三引号字符串，这样您就不必转义反斜杠：

```
val Word = """\b([A-Za-z\-])+\b""".r 
```

其次，如果您将 放在角色类`-`的*开头*，则无需转义它：

```
val Word = """\b([-A-Za-z])+\b""".r 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-16T21:18:15.160

开始`Scala 2.13`，除了用 检索单词之外`Source`，我们还可以使用[groupMapReduce](https://www.scala-lang.org/api/2.13.x/scala/collection/immutable/LazyList.html#groupMapReduce[K,B](key:A=%3EK)(f:A=%3EB)(reduce:(B,B)=%3EB):scala.collection.immutable.Map[K,B])方法（顾名思义），它相当于 a和 reduce 步骤`groupBy`：`mapValues`

```
import scala.io.Source

Source.fromFile("file.txt")
  .getLines.to(LazyList)
  .flatMap(_.split("\\W+"))
  .groupMapReduce(identity)(_ => 1)(_ + _) 
```

`groupMapReduce`stage，类似于 Hadoop 的 map/reduce 逻辑，

*   `group`s 词本身（身份）（**组**MapReduce 的组部分）

*   `map`s 每个分组的单词出现次数为 1（映射组**Map** Reduce 的一部分）

*   `reduce`通过对一组单词 ( `_ + _`) 中的 s 值求和（减少 groupMap **Reduce**的一部分）。

这是可以通过以下方式翻译的[一次性版本](https://github.com/scala/scala/blob/v2.13.0-M5/src/library/scala/collection/Iterable.scala#L604)：

```
seq.groupBy(identity).mapValues(_.map(_ => 1).reduce(_ + _)) 
```

还要注意从`Iterator`to`LazyList`的转换，以便使用提供的集合`groupMapReduce`（我们不使用 a ，`Stream`因为 start是推荐的 s 替换）。`Scala 2.13``LazyList``Stream`

* * *

基于同样的原则，也可以使用一个`for-comprehension`版本：

```
(for {
  line <- Source.fromFile("file.txt").getLines.to(LazyList)
  word <- line.split("\\W+")
} yield word)
.groupMapReduce(identity)(_ => 1)(_ + _) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T00:19:31.660

这就是我所做的。这将切断一个文件。Hashmap 是高性能的一个很好的选择，并且将优于任何类型的排序。您还可以查看其中的更简洁的排序和切片功能。

```
import java.io.FileNotFoundException

/**.
 * Cohesive static method object for file handling.
 */
object WordCountFileHandler {

  val FILE_FORMAT = "utf-8"

  /**
   * Take input from file. Split on spaces.
   * @param fileLocationAndName string location of file
   * @return option of string iterator
   */
  def apply (fileLocationAndName: String) : Option[Iterator[String]] = {
    apply (fileLocationAndName, " ")
  }

  /**
   * Split on separator parameter.
   * Speculative generality :P
   * @param fileLocationAndName string location of file
   * @param wordSeperator split on this string
   * @return
   */
  def apply (fileLocationAndName: String, wordSeperator: String): Option[Iterator[String]] = {
    try{
      val words = scala.io.Source.fromFile(fileLocationAndName).getLines() //scala io.Source is a bit hackey. No need to close file.

      //Get rid of anything funky... need the double space removal for files like the README.md...
      val wordList = words.reduceLeft(_ + wordSeperator + _).replaceAll("[^a-zA-Z\\s]", "").replaceAll("  ", "").split(wordSeperator)
      //wordList.foreach(println(_))
      wordList.length match {
        case 0 => return None
        case _ => return Some(wordList.toIterator)
      }
    } catch {
      case _:FileNotFoundException => println("file not found: " + fileLocationAndName); return None
      case e:Exception => println("Unknown exception occurred during file handling: \n\n" + e.getStackTrace); return None
    }
  }
}

import collection.mutable

/**
 * Static method object.
 * Takes a processed map and spits out the needed info
 * While a small performance hit is made in not doing this during the word list analysis,
 * this does demonstrate cohesion and open/closed much better.
 * author: jason goodwin
 */
object WordMapAnalyzer {

  /**
   * get input size
   * @param input
   * @return
   */
  def getNumberOfWords(input: mutable.Map[String, Int]): Int = {
    input.size
  }

  /**
   * Should be fairly logarithmic given merge sort performance is generally about O(6nlog2n + 6n).
   * See below for more performant method.
   * @param input
   * @return
   */

  def getTopCWordsDeclarative(input: mutable.HashMap[String, Int], c: Int): Map[String, Int] = {
    val sortedInput = input.toList.sortWith(_._2 > _._2)
    sortedInput.take(c).toMap
  }

  /**
   * Imperative style is used here for much better performance relative to the above.
   * Growth can be reasoned at linear growth on random input.
   * Probably upper bounded around O(3n + nc) in worst case (ie a sorted input from small to high).
   * @param input
   * @param c
   * @return
   */
  def getTopCWordsImperative(input: mutable.Map[String, Int], c: Int): mutable.Map[String, Int] = {
    var bottomElement: (String, Int) = ("", 0)
    val topList = mutable.HashMap[String, Int]()

    for (x <- input) {
      if (x._2 >= bottomElement._2 && topList.size == c ){
        topList -= (bottomElement._1)
        topList +=((x._1, x._2))
        bottomElement = topList.toList.minBy(_._2)
      } else if (topList.size < c ){
        topList +=((x._1, x._2))
        bottomElement = topList.toList.minBy(_._2)
      }
    }
    //println("Size: " + topList.size)

    topList.asInstanceOf[mutable.Map[String, Int]]
  }
}

object WordMapCountCalculator {

  /**
   * Take a list and return a map keyed by words with a count as the value.
   * @param wordList List[String] to be analysed
   * @return HashMap[String, Int] with word as key and count as pair.
   * */

   def apply (wordList: Iterator[String]): mutable.Map[String, Int] = {
    wordList.foldLeft(new mutable.HashMap[String, Int])((word, count) => {
      word get(count) match{
        case Some(x) => word += (count -> (x+1))   //if in map already, increment count
        case None => word += (count -> 1)          //otherwise, set to 1
      }
    }).asInstanceOf[mutable.Map[String, Int]] 
} 
```

# python - 未按预期评估条件

> ID：15487416
> 
> 赞同：0
> 
> 时间：2013-03-18T21:37:36.923
> 
> 标签：python, python-3.x, conditional-statements

我有一段代码充当按钮的侦听器，并评估是否填写了此按钮上方的某些字段：

```
def goListener(self):
    if all( [self.nme.get() != "", self.dsc.get() != "", self.imp.get != ""] ):
        name = self.nme.get()
        desc = self.dsc.get()
        while True:
            try:
                imp = int(self.imp.get())
                break
            except:
                imp = int(self.imp.get()) 
```

当我运行这个程序时填写了不同的字段或以其他方式运行该程序时，它会正确并产生错误消息，我要求它对每个组合都要求它，除了填写 nme 和 dsc 但未填写 imp 的地方，这会产生错误消息：

```
Traceback (most recent call last):
  File "C:\Python33\lib\tkinter\__init__.py", line 1442, in __call__
    return self.func(*args)
  File "C:\Python33\todo.py", line 68, in goListener
    imp = int(self.imp.get())
ValueError: invalid literal for int() with base 10: '' 
```

顺便说一下，这是运行 except 块，它不应该。这是评估的问题，还是我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T21:41:18.020

你有：

```
self.imp.get != "" 
```

您未能调用该`.get()`方法。尝试：

```
self.imp.get() != "" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T21:39:22.897

如果`imp = int(self.imp.get())`抛出错误，在`try`块外再次调用它会抛出同样的错误。

该`except`块用于出现异常时应运行的代码：

```
 try:
            imp = int(self.imp.get())
            break
        except:
            print "Something bad happened" 
```

# ios - UITableView 中单元格内的 UILabel 始终为空（两个单元格原型）

> ID：15487418
> 
> 赞同：1
> 
> 时间：2013-03-18T21:37:48.233
> 
> 标签：ios, ios5, ios6

我正在尝试在表格视图中填充单元格（我有两种自定义类型的单元格，它们在情节提要中创建了不同的元素，标识符为“info_cell”和“person_cell”，在 UITableView 上方的分段控件上我决定加载什么 [tableView 重新加载]） . 当我尝试访问单元格内的 UILabels 时，我得到标签为空。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *CellIdentifier = (viewType == INFO_VIEW) ? @"info_cell" :@"person_cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    if(viewType == INFO_VIEW){
        NSLog(@"INFO = %@", info_text_some_string);
        UILabel *lblInfo = (UILabel *)[cell viewWithTag:200];
        [lblInfo setText:info_text_some_string];
    }
    else{
        // there is part for person
    }
    return cell;
} 
```

当我在表格中只有一个原型单元格（UITableView 在 UIVewController 中）时，相同的代码可以工作。这里可能有什么问题，我检查了 100 次：单元标识符没问题，标签标签是 200。

这是 UISegmentControl 的操作

```
- (IBAction)changeView:(id)sender {
    UISegmentedControl *segmentedControl = (UISegmentedControl *) sender;
    NSInteger selectedSegment = segmentedControl.selectedSegmentIndex;

    if (selectedSegment == 0) {
        viewType = INFO_VIEW;
    }
    else{
        viewType = PERSON_VIEW;
    }
    [tableView reloadData];
} 
```

我为 tableView 添加了必要的方法并连接委托 i 数据源。有谁知道为什么它是 null ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:24:51.933

假设您正确地对 UITableViewCells 进行了子类化（例如，我使用 InfoCell 和 PersonCell），您可以尝试以下操作：

```
if(viewType == INFO_VIEW)
{
    InfoCell *cell = (InfoCell *)[tableView dequeueReusableCellWithIdentifier:@"info_cell"];
    // do your stuff for info here
}
else if(viewType == PERSON_VIEW)
{
    PersonCell *cell = (PersonCell *)[tableView dequeueReusableCellWithIdentifier:@"person_cell"];
    // do your stuff for person here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:02:07.243

**试试这个，通常我在CellRorRowAtIndexPath**中使用自定义单元格时都会遵循这个过程

 **```
 if(!cell)
    {
        cell =[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:identifier];
        //customcell is your UITableViewCell created by you in ur xib
        NSData *archivedData =[NSKeyedArchiver archivedDataWithRootObject:customcell];
        cell =[NSKeyedUnarchiver unarchiveObjectWithData:archivedData];

    }
    if(viewType ==INFO_VIEW)
     {
    [(UILabel *)[cell viewWithTag:200] setText:@"you text"];
     }
  else{
        // person view....
      } 
```

这样您就可以收集单元格的所有元素并为其设置值。请分享你的结果

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-18T21:47:29.347

为什么不做这样的事情？

```
[[cell textLabel] setText: @"text goes here"]; 
```

并跳过 UILabel 部分？**

# r - 控制R中xtable输出的小数位数

> ID：15487421
> 
> 赞同：30
> 
> 时间：2013-03-18T21:38:04.763
> 
> 标签：r, xtable

我正在使用 Rmd 文件创建报告，并使用 xtable 包创建表。xtable 的输出显示最多 2 位的小数位数。有没有办法控制 xtable 中的小数位？

我在 xtable 的 Rmd 文件中使用的示例代码如下：

```
```{r, results='asis', message=FALSE, echo=FALSE}
source("../../R code/data analysis.R")
library(xtable)
library(plyr)
table1 <- xtable(t3,caption="Table showing the Mean discharge and mean gage height on each year on each month",digits=NULL)

print.xtable(table1,type="latex",comment = getOption("xtable.comment", FALSE))

``` 
```

输出如下：

![在此处输入图像描述](../Images/e6dc3fcc93d615b8d3b4feb0702ab429.png)

在这里，我不希望年份和月份有任何小数位。有没有办法控制这个东西？

谢谢。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-03-18T22:09:23.003

您应该正确使用函数中的`digits`参数`xtable`。

```
table1 <- xtable(t3,caption="Table showing the Mean discharge
and mean gage height on each year on each month",digits=c(0,0,0,3,4)) 
```

该向量的每个元素表示每列中的十进制字段数（包括带有 row.names 的第一列）。

# android - setOnTouchListener acharenginebarchart

> ID：15487425
> 
> 赞同：0
> 
> 时间：2013-03-18T21:38:19.367
> 
> 标签：android, charts, achartengine

我希望能够单击图表以访问另一个布局，但我不能。在输入以下内容之前，我使用的代码很好：

```
mChartView.setOnTouchListener(new OnTouchListener(){
            public boolean onTouch(View v, MotionEvent event) {

                pointx = (int)event.getX();
                pointy = (int)event.getY();

                Toast.makeText(MainActivity.this, "x="+Integer.toString(pointx)+"y="+Integer.toString(pointy), Toast.LENGTH_SHORT).show();
                return false;
            }}); 
```

一旦这给了我一个重大错误并且不会让我运行程序。请一些专家在图表中帮助我。提前打个招呼我也留下所有代码

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnTouchListener;
import android.widget.LinearLayout;
import android.widget.Toast;
import org.achartengine.ChartFactory;
import org.achartengine.chart.BarChart.Type;
import org.achartengine.model.SeriesSelection;
import org.achartengine.model.XYMultipleSeriesDataset;
import org.achartengine.model.XYSeries;
import org.achartengine.renderer.XYMultipleSeriesRenderer;
import org.achartengine.renderer.XYSeriesRenderer;
import org.achartengine.ChartFactory;

import org.achartengine.GraphicalView;

import org.achartengine.chart.PointStyle;

//import com.artfulbits.aiCharts.ChartView;

import android.app.Activity;

import android.graphics.Color;

import android.os.Bundle;

import android.view.View;

import android.view.ViewGroup.LayoutParams;

import android.widget.Button;

import android.widget.EditText;

import android.widget.LinearLayout;

import android.widget.Toast;
import android.content.Intent;

public class MainActivity extends Activity {
    private GraphicalView mChartView;
    private int pointx;
    private int pointy;

    //me declaro un string con los meses del año
    private String[] mYear = new String[] {
                "2005", "2006" , "2007", "2008", "2009", "2010",
                "2011", "2012" , "2013"
            };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        XYSeries incomeSeries = new XYSeries("AÑOS");

        XYSeriesRenderer incomeRenderer = new XYSeriesRenderer();
        XYMultipleSeriesRenderer multiRenderer = new XYMultipleSeriesRenderer();
        XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();

        //mChartView xv =(mChartView)findViewById(R.id.LinearLayout01);

        int[] x = { 0,1,2,3 };
        int[] income = { 10,12,14,10};
        //XYSeries encapsula los valores de los gráficos XY como la línea, tiempo, superficie, dispersión 

        //añado dato a la categoria 1
        for(int i=0;i<x.length;i++)
        {
            incomeSeries.add(i,income[i]);//0 de 2000

            //float ancho = incomeRenderer.getLineWidth();

        }
        dataset.addSeries(incomeSeries);

        // creacion de un conjunto xa cada serie

        // Adding Income Series to the dataset

        // Creating XYSeriesRenderer to customize incomeSeries

        incomeRenderer.setColor(Color.WHITE);//rgb(130, 360, 230)130, 130, 230
        incomeRenderer.setFillPoints(true);//ESTABLECER relleno
        incomeRenderer.setLineWidth(1);//ancho = 2
        incomeRenderer.setDisplayChartValues(true);//establece valores de visualización de las gráficas

        // definir titulo y demas

        multiRenderer.setXLabels(0);//0
        multiRenderer.setChartTitle("AÑOS");
        multiRenderer.setXTitle("años ventas");
        multiRenderer.setYTitle("Cantidad en euros");
        multiRenderer.setZoomButtonsVisible(true); 
        multiRenderer.addSeriesRenderer(incomeRenderer);
        multiRenderer.setClickEnabled(true);

        multiRenderer.isClickEnabled();

        for(int i=0; i< x.length;i++){
            multiRenderer.addXTextLabel(i, mYear[i]);  

        }       
        //setontouch

        mChartView.setOnTouchListener(new OnTouchListener(){
            public boolean onTouch(View v, MotionEvent event) {

                pointx = (int)event.getX();
                pointy = (int)event.getY();

                Toast.makeText(MainActivity.this, "x="+Integer.toString(pointx)+"y="+Integer.toString(pointy), Toast.LENGTH_SHORT).show();
                return false;
            }});

        //prueba1
        // Creating an intent to plot bar chart using dataset and multipleRenderer      
        Intent intent = ChartFactory.getBarChartIntent(getBaseContext(), dataset, multiRenderer, Type.DEFAULT);

        // Start Activity
        startActivity(intent);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:36:25.907

我建议你看一下[这个](http://code.google.com/p/achartengine/source/browse/trunk/achartengine/demo/org/achartengine/chartdemo/demo/chart/XYChartBuilder.java)例子来学习如何处理图表监听器。

也可以看看[这篇](http://jaxenter.com/effort-free-graphs-on-android-with-achartengine-46199.html)文章来学习一些关于 AChartEngine 的额外知识。

# java - 当方法调用自身后有return语句时Java中的递归

> ID：15487427
> 
> 赞同：0
> 
> 时间：2013-03-18T21:38:24.930
> 
> 标签：java, recursion

代码：

```
public static void main(String[] args) {
    System.out.println(test(13549));
}    

public static int test(int a){
    if(a<10)
        return a;
    int b = (a%10);
    int c = test(a/10);
    int d = Math.max(b,c);
    return d;
} 
```

我了解该方法的作用（在使用调试器之后）并且我了解该方法会调用自身直到它小于 10 并且它运行并检查更大的 b 或 c。现在我不明白的是，为什么当有 return 语句`return d;`时它返回`int c = test(a/10)`而不是`int test(int a){`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T21:39:56.827

该`return`语句返回对*的调用的输出`test`*。因此，在行上`return d;`它只是返回行中的`test(a/10)`值`c = test(a/10)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:47:25.083

这是递归的一个基本思想——当你在自身内部调用方法时，它不仅仅是跳回到方法的开头。

视觉上：

```
1
|
|  2
|__|
|  |  3
|  |__|
   |  |  x
   |  |__|
      |  .
      |  . 
```

其中每条垂直线是函数的运行，而水平线是递归调用。

每次调用后，它都会返回到它被调用的方法的实例中的位置 有效，这意味着在第三次递归中，您在堆栈中（在内存中）有 3 个版本的函数，而不是简单地返回到当前函数的顶部 3 次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T21:49:37.330

每次调用递归函数时，它都会从函数的顶部开始。由于您在递归函数调用之后定义了 d，因此您将永远不会到达 d。您将继续递归调用您的函数，直到您能够返回 a。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T22:02:25.367

当您调用`test(13549)`时，会发生以下情况：

```
test(13549){
   false
   b=9
   c= test(1354){
       false
       b=4
       c=test(135){
           false
           b=5
           c=test(13){
               false
               b=3
               c=test(1){
                  true
                  return 1
                }
                d=Max(3,1)
                return 3
              }
               d=Max(3,3)
               return 3
             }
             d=Max(5,3)
             return 5
           }
          d=Max(4,5)
          return 5
        }
    d=Max(9,5)
    return 9
  } 
```

抱歉，如果我可能以任何方式计算错误.. 但是您可以看到，直到所有递归调用都完成并且第一个 c 具有实际值，才到达第一个 return 语句。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T21:44:22.877

在跟踪您的代码时，假设您有一个堆栈（函数执行）。每当您发现该函数正在调用自身时，就在堆栈顶部放置一个新函数执行，并在函数返回时取出堆栈元素。

你会发现这个函数会一直调用它自己，直到它达到“基本情况”——当 a<10 时。

将代码放在 return 语句下面不会有任何好处（在某些语言中它甚至不会编译），一旦函数返回，任何代码都不会被执行

# ruby-on-rails - 回形针多文件上传

> ID：15487431
> 
> 赞同：1
> 
> 时间：2013-03-18T21:38:27.257
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, paperclip

我有三个模型：

```
 class Project < ActiveRecord::Base
  attr_accessible :name
  has_many :tickets, dependent: :delete_all
 end

 class Ticket < ActiveRecord::Base
  belongs_to :project
  attr_accessible :description, :title,:asset  
  has_many :assets
  accepts_nested_attributes_for :assets
end

class Asset < ActiveRecord::Base
  attr_accessible :title, :body
  belongs_to :ticket
  has_attached_file :asset
end 
```

_形式：

```
<%= form_for([@project,@ticket], html: { multipart: true }) do |f| %>
<p>
    <%= f.label :title %>
    <%= f.text_field :title %>
</p>
<p>
    <%= f.label :description %>
    <%= f.text_area :description %>
</p>

<% number = 0 %>
<%= f.fields_for :assets do |asset| %>
    <p>
        <%= asset.label "File ##{number +=1}" %>
        <%= asset.file_field :asset %>
    </p>
<% end %>
<%= f.submit %>
<% end %> 
```

票务控制器：

```
def new
 @ticket = @project.tickets.build
 3.times { @ticket.assets.build }
end 
```

**问题是当我尝试为项目创建新票时，它在 /projects/1/tickets/new 未知属性处显示 ActiveRecord::UnknownAttributeError：ticket_id** @ticket= id: nil, title: nil, description: nil, project_id: 1 , created_at: nil, updated_at: nil, user_id: nil

从错误消息中我可以看到票证“id”为 nil（尚未创建），因此资产没有票证 ID，那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:45:48.820

```
attr_accessible :ticket_id 
```

您需要将此字段添加为可在其模型上访问的 attr。

对于嵌套属性，您还需要将 project_assets 添加为 attr_accessibl/ attr_accessor

```
attr_accessible :project_assets
attr_accessor :project_assets 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:26:37.543

您应该将nested_form gem 用于资产，并且您必须在资产数据库表中创建一个ticket_id 属性才能正常工作关联。

# javascript - JavaScript在粘贴事件（IE）上获取剪贴板上文件的文件路径

> ID：15487437
> 
> 赞同：1
> 
> 时间：2013-03-18T21:38:43.310
> 
> 标签：javascript

如何使用 clipboardData.getData 返回已复制到剪贴板的文件的文件路径？（IE浏览器）

例子：

1）用户将桌面上的word文档复制到剪贴板

2）用户右键单击我的网页并单击“粘贴”

3) 网页捕获剪贴板上文档的文件路径

我曾尝试使用 clipboardData.getData，但是当我粘贴文档时它返回“null”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:41:08.020

答案很简单：不可能。

此信息不可访问，因为浏览器位于沙箱中。

这是 API： [http ://www.w3.org/TR/FileAPI/#dfn-file](http://www.w3.org/TR/FileAPI/#dfn-file)

[使用 HTML/JavaScript 检测本地文件拖放](https://stackoverflow.com/questions/2018492/detecting-local-file-dragndrop-with-html-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-25T15:59:43.997

这是我如何处理图像。

当鼠标指针位于本地 PC 图像上时，请执行 [SHIFT-RightClick-Copy as Path]，而不是 [RightClick-Copy]。

```
var MYIMAGE = window.clipboardData.getData('text'); 
```

`MYIMAGE`现在将具有本地照片的路径。使用`replace()`javascript函数：

1.  在字符串中更改`C:`为。`\C$`
2.  将本地计算机名称添加到字符串的开头。
3.  在您刚刚添加`\\`到字符串的计算机名称之前添加。

您现在有了一个 IE 可以识别的本地文件的新路径。要粘贴它...

```
document.getElementById("whateverIDyoucalledit").src = MYIMAGE; 
```

# java - java.net.URI.create 异常

> ID：15487445
> 
> 赞同：2
> 
> 时间：2013-03-18T21:39:14.293
> 
> 标签：java, uri

```
java.net.URI.create("http://adserver.adtech.de/adlink|3.0") 
```

投掷

```
java.net.URISyntaxException: 
Illegal character in path at index 32: http://adserver.adtech.de/adlink|3.0 
```

虽然

```
new java.net.URL("http://adserver.adtech.de/adlink|3.0") 
```

工作得很好。

**更新 1**

虽然

```
new org.apache.commons.httpclient.URI("http://adserver.adtech.de/adlink|3.0") 
```

也很完美。

什么原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T00:56:26.250

采用单个 String 参数的 URI 构造函数要求您遵循 RFC 2396 为 URI 定义的严格语法规则。根据那些规则`|`应该被编码为`%7C`. 其他构造函数可以为您编码 URI 组件，因此例如这不会引发异常：

```
new java.net.URI("http", "//adserver.adtech.de/adlink|3.0", null); 
```

另一个 URL 类不强制执行 URI 语法规则。事实上，对应该编码的组件进行编码是您的责任；URL 类不会帮助你。从[文档中](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html)：

> 调用者有责任对在调用 URL 之前需要转义的任何字段进行编码，并对从 URL 返回的任何转义字段进行解码。

# objective-c - 如何从目标c中的蓝牙心率监测器中提取字节数据

> ID：15487448
> 
> 赞同：2
> 
> 时间：2013-03-18T21:39:29.740
> 
> 标签：objective-c, nsdata, bluetooth-lowenergy, uint8t

我无法理解字节和 uint8_t 值。

我正在使用苹果创建的示例项目，它通过心率服务协议从蓝牙 4.0 心率监视器读取数据。示例项目给出的心率数据如下：

```
- (void) updateWithHRMData:(NSData *)data 
{
const uint8_t *reportData = [data bytes];
uint16_t bpm = 0;

if ((reportData[0] & 0x01) == 0) 
{
    /* uint8 bpm */
    bpm = reportData[1];
} 
else 
{
    /* uint16 bpm */
    bpm = CFSwapInt16LittleToHost(*(uint16_t *)(&reportData[1]));
} 
```

我假设 (reportData[0] & 0x01) 返回数据数组 reportData 中的第一个数据位，但我不知道如何访问第二个数据位， (reportData[0] & 0x02) 不像我想象的那样工作。理想情况下，我想检查 reportData[0] 中的所有数据，然后根据它获取 reportData[4] 或 [5] 中的 rr 间隔数据，具体取决于它的存储位置并遍历它以获得我相信的每个值那里可以存储多个值。

一个我知道的新手问题，但我无法找到答案，或者确实找不到建立答案的搜索词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:49:54.247

当您这样做时，`reportData[0]`您将获得第一个字节（在索引 0 处）。当您将该值与 结合时`reportData[0] & 0x02`，您将屏蔽除第二位以外的所有内容。该结果将是 0（如果未设置第 2 位）或将为 2（如果设置了第 2 位）。

```
if ((reportData[0] & 0x02) == 0) {
    // bit 2 of first byte is not set
} else {
    // bit 2 of first byte is set
} 
```

如果你想检查所有 8 位，那么你可以这样做：

```
uint8_t byte = reportData[0];
for (int i = 0; i < 8; i++) {
    int mask = 1 << i;
    if ((byte & mask) == 0) {
        bit i is not set
    } else {
        bit i is set
    }
} 
```

更新：要提取跨越两位的值，您可以执行以下操作：

```
uint8_t mask = 0x01 | 0x02; // Good for value stored in the first two bits
uint8_t value = byte & mask; // value now has just value from first two bits 
```

如果要提取的值在更高位，那么还有一个额外的步骤：

```
uint8_t mask = 0x02 | 0x04; // Good for value in 2nd and 3rd bits
uint8_t value = (byte & mask) >> 1; // need to shift value to convert to regular integer 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T22:13:56.307

查看[这篇文章](https://stackoverflow.com/questions/14038906/apples-heart-rate-monitoring-example-and-byte-order-of-bluetooth-heart-rate-mea)以讨论示例代码。该帖子还链接到[蓝牙规范](http://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicViewer.aspx?u=org.bluetooth.characteristic.heart_rate_measurement.xml)，该规范应该可以帮助您了解为什么要执行字节顺序检查（基本上是 Apple 确保了最大的可移植性）。基本上，第一个字节是一个位字段，描述 HRV 数据的格式以及 EE 和 RR 间隔数据的存在/不存在。所以：

```
reportData[0] & 0x03 
```

告诉您是否存在 EE 数据（1 = 是，0 = 否），并且

```
reportData[0] & 0x04 
```

告诉您是否存在 RR 间期数据（1 = 是，0 = 否）

然后你可以得到 RR 间隔数据

```
uint16_t rrinterval;
rrinterval = CFSwapInt16LittleToHost(*(uint16_t *)(&reportData[idx])); 
```

其中`idx`由您执行的存在/不存在测试确定。我假设偏移量不是固定的 BTW，因为这就是您所指示的（即，基于存在/不存在的动态偏移量）——我不熟悉 BT 规范。如果格式*是*固定的，在这种情况下，RR 数据将位于偏移量 7。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-28T08:50:36.033

部分原始问题尚未得到解答。Rory 还想知道如何解析所有 RR 间隔数据，因为在一条消息中可以有多个值（我见过最多三个）。RR 间隔数据并不总是位于相同的字节内。这取决于几件事：

*   BPM 是写入一个字节还是两个字节？
*   有EE数据吗？
*   计算 RR 间隔值的数量

这是[Heart_rate_measurement 特性的实际规格](https://www.bluetooth.com/wp-content/uploads/Sitecore-Media-Library/Gatt/Xml/Characteristics/org.bluetooth.characteristic.heart_rate_measurement.xml)

```
// Instance method to get the heart rate BPM information
- (void) getHeartBPMData:(CBCharacteristic *)characteristic error:(NSError *)error
{
    // Get the BPM //
    // https://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicViewer.aspx?u=org.bluetooth.characteristic.heart_rate_measurement.xml //

    // Convert the contents of the characteristic value to a data-object //
    NSData *data = [characteristic value];

    // Get the byte sequence of the data-object //
    const uint8_t *reportData = [data bytes];

    // Initialise the offset variable //
    NSUInteger offset = 1;
    // Initialise the bpm variable //
    uint16_t bpm = 0;

    // Next, obtain the first byte at index 0 in the array as defined by reportData[0] and mask out all but the 1st bit //
    // The result returned will either be 0, which means that the 2nd bit is not set, or 1 if it is set //
    // If the 2nd bit is not set, retrieve the BPM value at the second byte location at index 1 in the array //
    if ((reportData[0] & 0x01) == 0) {
        // Retrieve the BPM value for the Heart Rate Monitor
        bpm = reportData[1];

        offset = offset + 1; // Plus 1 byte //
    }
    else {
        // If the second bit is set, retrieve the BPM value at second byte location at index 1 in the array and //
        // convert this to a 16-bit value based on the host’s native byte order //
        bpm = CFSwapInt16LittleToHost(*(uint16_t *)(&reportData[1]));

        offset =  offset + 2; // Plus 2 bytes //
    }
    NSLog(@"bpm: %i", bpm);

    // Determine if EE data is present //
    // If the 3rd bit of the first byte is 1 this means there is EE data //
    // If so, increase offset with 2 bytes //
    if ((reportData[0] & 0x03) == 1) {
        offset =  offset + 2; // Plus 2 bytes //
    }

    // Determine if RR-interval data is present //
    // If the 4th bit of the first byte is 1 this means there is RR data //
    if ((reportData[0] & 0x04) == 0)
    {
        NSLog(@"%@", @"Data are not present");
    }
    else
    {
        // The number of RR-interval values is total bytes left / 2 (size of uint16) //

        NSUInteger length = [data length];
        NSUInteger count = (length - offset)/2;
        NSLog(@"RR count: %lu", (unsigned long)count);

        for (int i = 0; i < count; i++) {

            // The unit for RR interval is 1/1024 seconds //
            uint16_t value = CFSwapInt16LittleToHost(*(uint16_t *)(&reportData[offset]));
            value = ((double)value / 1024.0 ) * 1000.0;

            offset = offset + 2; // Plus 2 bytes //

            NSLog(@"RR value %lu: %u", (unsigned long)i, value);

        }

    }

} 
```

# php - Preg_match 文本文件并在单个代码中显示多个结果

> ID：15487450
> 
> 赞同：3
> 
> 时间：2013-03-18T21:39:32.363
> 
> 标签：php, html, foreach, preg-match

我有一个文本文件（“file.txt”）：

```
5 (blah-blah) 001  
2 (blah) 006 
```

使用 PHP 代码通过在 line[number] 中搜索模式来查找第一个单词、括号中的表达式和最后 3 位或 4 位数字：

```
<?php  
// file  
$file = file("file.txt");  

/* first line */
// match first word (number)  
preg_match("/^(\d+)/",$file[0],$first_word);  

// match expression within parentheses  
preg_match("/(?<=\().*(?=\))/s",$file[0],$within_par);  

// match last 3- & 4-digit numbers  
preg_match("/(\d{3,4})?(?!.*(\d{3,4}))/",$file[0],$last_word); 

/* repeats (second line) */  
preg_match("/^(\d+)/",$file[1],$first_word2);  
preg_match("/(?<=\().*(?=\))/s",$file[1],$within_par2);  
preg_match("/(\d{3,4})?(?!.*(\d{3,4}))/",$file[1],$last_word2); 
<?php 
```

以及用于逐行显示匹配项的 HTML 代码：

```
<div>
    <p><?php echo $first_word[0] ?></p>
    <p><?php echo $within_par[0] ?></p>
    <p><?php echo $last_word[0] ?></p>
</div>
<div>
    <p><?php echo $first_word2[0] ?></p>
    <p><?php echo $within_par2[0] ?></p>
    <p><?php echo $last_word2[0] ?></p>
</div> 
```

但我希望能够显示所有匹配项，而不必在我的 PHP 代码和 HTML 代码中单独列出每个匹配项。我想使用 preg_match_all 在文本文件中搜索，然后 foreach 所有匹配项，并回显/返回每个匹配项，一次一个 div（具有三个模式）。（我尝试了几种不同的方法，但结果我得到了一个数组。）什么代码可以完成这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:47:48.613

您可以使用以下方法提取数据：

```
$matches = array();
preg_match_all("/([0-9]+) \(([a-zA-Z-]+)\) ([\d]+)/", $text, $matches); 
```

例如，在文本上：

```
$text = "5 (blah-blah) 001 \n 6 (bloh-bloh) 002"; 
```

结果将是：

```
Array
(
    [0] => Array
        (
            [0] => 5 (blah-blah) 001
            [1] => 6 (bloh-bloh) 002
        )

    [1] => Array
        (
            [0] => 5
            [1] => 6
        )

    [2] => Array
        (
            [0] => blah-blah
            [1] => bloh-bloh
        )

    [3] => Array
        (
            [0] => 001
            [1] => 002
        )
) 
```

因此，如果您使用 读取文件的内容`file_get_contents`，您应该能够应用`preg_match_all`并检索您的所有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:01:27.330

```
<?php

$string = "5 (blah-blah) 001  
2 (blah) 006";

$result = preg_match_all("/(\d+)\s+\((.*?)\)\s+(\d+)/", $string, $matches);

if (count($matches) > 0) {
    unset($matches[0]);

    $sets = array();

    foreach ($matches as $key => $value) {
        foreach ($value as $key2 => $value2) {
            $sets[$key2][] = $value2;
        }
    }

    foreach ($sets as $key => $values) {
        echo '<div style="background-color: red;">';
        foreach ($values as $ind => $value) {
            echo '<p>'.$value.'</p>';
        }
        echo '</div>';
    }

    // Direct output (without an internal loop)
    foreach ($sets as $key => $values) {
        echo '<div style="background-color: orange;">';
        echo '<p>'.$values[0].'</p>';
        echo '<p>'.$values[1].'</p>';
        echo '<p>'.$values[2].'</p>';
        echo '</div>';
    }
}

?> 
```

现在`$sets`将在正确的集合中包含您的值。我添加了一个 foreach 循环来根据需要打印出数据。

# objective-c - 'CGSize' 类型的集合元素不是 Objective-C 对象

> ID：15487453
> 
> 赞同：8
> 
> 时间：2013-03-18T21:39:40.247
> 
> 标签：objective-c, core-graphics, nsdictionary, cgsize

我正在尝试给一个 NSDictionary 键值一个 CGSize，而 XCode 给了我这个错误。我的代码：

```
 NSArray *rows = @[
        @{@"size" : (CGSize){self.view.bounds.size.width, 100}
          }
        ]; 
```

为什么我在这里收到错误？如果不可能将 CGSize 存储在字典中，那么另一种方法是什么？

**编辑：** 现在得到“使用类型'CGSize'（又名'struct CGSize'），其中需要算术、指针或向量类型”错误代码：

```
NSDictionary *row = rows[@0];
CGSize rowSize = [row[@"size"] CGSizeValue] ? : (CGSize){self.view.bounds.size.width, 80}; 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-18T21:41:49.827

`CGSize`不是一个对象。这是一个C结构。如果您需要将其存储在 obj-c 集合中，标准方法是将其包装在 中`NSValue`，如下所示：

```
NSArray *rows = @[
 @{@"size" : [NSValue valueWithCGSize:(CGSize){self.view.bounds.size.width, 100}]
  }
]; 
```

然后稍后当您需要`CGSize`返回时，您只需调用该`-CGSizeValue`方法，例如

```
CGSize size = [rows[0][@"size"] CGSizeValue]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-12T23:42:20.243

凯文的回答只适用于 iOS；对于 Mac OS X (Cocoa) 做：

```
[NSValue valueWithSize:NSMakeSize(self.view.bounds.size.width, 100)]; 
```

# android - android防止在dialog.show上显示键盘

> ID：15487454
> 
> 赞同：6
> 
> 时间：2013-03-18T21:39:42.547
> 
> 标签：android, android-alertdialog

有没有办法在对话框出现时防止键盘自动出现。

这是我的对话框的代码

```
final Dialog dialog = new Dialog(this);
                    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
                    dialog.setContentView(R.layout.shopping_cart_confirm_dialog);
                    TextView txtConfirmEmail = (TextView)dialog.findViewById(R.id.txtConfirmEmail);
                    ...
                    dialog.show(); 
```

非常感谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-18T21:44:41.157

试试这个

```
dialog.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:46:06.233

使用[InputMethodManager](http://developer.android.com/reference/android/view/inputmethod/InputMethodManager.html)你应该能够隐藏键盘。

检查[hideSoftInputFromWindow](http://developer.android.com/reference/android/view/inputmethod/InputMethodManager.html#hideSoftInputFromWindow%28android.os.IBinder,%20int%29)。它接受由返回的窗口令牌

```
View.getWindowToken()

InputMethodManager mgr=(InputMethodManager)getSystemService(INPUT_METHOD_SERVICE);
mgr.hideSoftInputFromWindow(dialog.getWindow().getWindowToken(), 0); 
```

# c# - 如何使用 c# 从另一个表单刷新活动的 datagridview

> ID：15487456
> 
> 赞同：-1
> 
> 时间：2013-03-18T21:39:54.123
> 
> 标签：c#, datagridview

我有一个包含 datagridview 的表单。当我单击`Add new`Button 时，会出现一个子窗体，用于将新项目插入 datagridview。

我想在从子表单插入新项目时刷新 datagridview 的数据源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:56:49.383

我认为您希望在将项目添加到网格后调用网格上的 DataBind 方法。当对话框关闭或用户选择添加项目后，调用 grid.DataBind()。

# sql - 根据sql中现有的其他表记录在视图中填充自定义布尔列

> ID：15487459
> 
> 赞同：0
> 
> 时间：2013-03-18T21:40:04.857
> 
> 标签：sql, oracle

我正在使用 oracle 10g

我必须从“dp_table”创建一个视图“dposition_view”，其中包含一些字段，最后我需要一个像“unmatched_flag”这样的布尔列。
如果“bom_mapping”表不包含与“dp_table”中匹配字段的记录，则列中的值应为“true”，如果两个表之间存在匹配记录，则该列中的值应为“false”。
要检查的匹配字段有：eng_code、work_code、position、alt_pos（常见于dp_table和bom_mapping表）。

填充此布尔标志 - 'unmatched_flag' 的逻辑将如何？

现在我有：

```
Create or Replace view dposition_view (",,,,,"unmatched_flag") as 
(Select dp_table.eng_code,......  'UNMATCHED_FLAG' ?? ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:40:51.210

Oracle PL/SQL 具有布尔数据类型，但 Oracle SQL 没有。我不确定您是否打算将字符串存储为`'TRUE'`and`'FALSE'`或`1`and `0`，但这是您的选择。您的数据结构也不清楚，但是在做出假设之后，您可以根据匹配条件进行外部连接 `bom_mapping`，`dp_table`然后用于`NVL2()`在`unmatched`列中设置所需的标志：

```
create or replace view dposition_view(
  /* Your columns */,
  unmatched_flag) 
as
select 
  /* Your columns */,
  NVL2(bom.eng_code,'FALSE','TRUE') unmatched_flag
from dp_table dp
left outer join bom_mapping bom on dp.eng_code = bom.eng_code 
  and dp.work_code = bom.work_code 
  and dp.position = bom.position
  and dp.alt_pos = bom.alt_pos
  and -- Other conditions on the bom_mapping table
where ... -- Conditions on the dp_table 
```

`bom.eng_code`如果连接没有找到匹配项，则为 null，如果有匹配的记录，则有一个值。`NVL2()`如果匹配 ( `FALSE`) 或不匹配 ( `TRUE`)，则可以设置所需的值。

# javascript - 按键事件后无法清除文本框

> ID：15487460
> 
> 赞同：1
> 
> 时间：2013-03-18T21:40:05.430
> 
> 标签：javascript, jquery

我知道这个问题到处都是，但这让我发疯了！！！

这是我的代码：

```
$(document).ready(function () {

        $('#MainContent_LoginUser_Password').keypress(function (e) {

            noCapsLock($('#MainContent_LoginUser_Password'), e, "Please turn off Caps Lock");
        });

    });
function noCapsLock(o, e, str) {
var s = String.fromCharCode(e.which);
if (s.toUpperCase() === s && s.toLowerCase() !== s && !e.shiftKey) {
    alert(str);
    o.val('');

}     
} 
```

我正在尝试清除具有给定 ID 的文本框的值。上面的代码清除了文本，但是当按下一个新键时，会显示该键的值（大写字母）。我已经尝试了 change()、keyup()、keydown() 函数，但它们似乎仍然没有清除最后输入的值的文本框。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:46:11.127

你只需要添加一个`event.preventDefault();`

您可能还希望将您的函数放在闭包内，这样它就不是全局的，并且您不需要在方法内再次重新找到 html 元素：

```
$(document).ready(function () {

    var noCapsLock = function(o, e, str) {
        var s = String.fromCharCode(e.which);
        if (s.toUpperCase() === s && s.toLowerCase() !== s && !e.shiftKey) {
            alert(str);
            o.val('');
            e.preventDefault();
        }     
    }    

    $('#MainContent_LoginUser_Password').keypress(function (e) {
        noCapsLock($(this), e, "Please turn off Caps Lock");
    });
}); 
```

为了踢球，我还将您的代码制作成一个 jQuery 插件，您可以轻松地将其应用于任何元素（它不会删除值，只是停止按键）：

```
(function($) {
    $.fn.noCapsLock = function(message) {
        this.keypress(function (e) {
            var char = String.fromCharCode(e.which);
            if (char.toUpperCase() === char && char.toLowerCase() !== char && !e.shiftKey) {
                window.alert(message);
                e.preventDefault();
            }         
        });
    };
})(jQuery); 
```

像这样申请：

```
$(document).ready(function () {
    $('#MainContent_LoginUser_Password').noCapsLock('Please turn off Caps Lock!');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:46:37.953

您只需使用以下命令取消活动`e.preventDefault();`：

```
function noCapsLock(o, e, str) {
    var s = String.fromCharCode(e.which);
    if (s.toUpperCase() === s && s.toLowerCase() !== s && !e.shiftKey) {
        e.preventDefault();
        alert(str);
        o.val('');
    }     
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T21:52:39.097

在您的情况下，我不会清除文本框；如果用户输入小写的长文本，然后点击 CapsLock 然后继续输入 - 整个输入将被删除。

至于函数，您可以调用事件的`preventDefault()`方法或返回`false`（您可以[在此处阅读方法之间的差异](https://stackoverflow.com/a/1357151/1143917)）：

```
 $(document).ready(function () {

        $('#MainContent_LoginUser_Password').keypress(function (e) {
           return noCapsLock(e, "Please turn off Caps Lock");
        });

    });
    function noCapsLock(e, str) {
        var s = String.fromCharCode(e.which);
        if (s.toUpperCase() === s && s.toLowerCase() !== s && !e.shiftKey) {
            alert(str);
            return false;
        }
        return true;
    } 
```

# javascript - JQuery Mobile db成功事件未触发功能

> ID：15487462
> 
> 赞同：1
> 
> 时间：2013-03-18T21:40:13.220
> 
> 标签：javascript, jquery-mobile

我在多个成功事件中执行成功函数时遇到问题，让我向您展示代码：

```
$("#beneficiarios").one("pagebeforeshow", function(){

    db.transaction( function(tx){ queryDBAll(tx, "Beneficiarios", 0, 10) }, onError ); //LOAD BENEFICIARIOS IN DB

    $("#btn-add-ben").click(function(){
        var nombres = $('#b_nombres').val();
        var apellidos = $('#b_apellidos').val();
        var dia = $('#b_dia').val();
        var mes = $('#b_mes').val();
        var año = $('#b_año').val();
        var fecha_nac = año+"-"+mes+"-"+dia;

        //ADD BENEFICIARIO TO DB
        db.transaction( function(tx){
            tx.executeSql("INSERT INTO Beneficiarios (nombres, apellidos, fecha_nac) VALUES ('"+nombres+"','"+apellidos+"','"+fecha_nac+"')",
            [],
            function(tx, results){
                var benid = results.insertId;
                $('#emptyBeneficiarios').remove();
                $('#ul-beneficiarios').append(
            '<li><a href="#" id="view_ben_'+benid+'">'+nombres+' '+apellidos+'</a><a href="#" id="del_ben_'+benid+'" data-position-to="window" data-icon="delete" class="itemDelete">Eliminar</a></li>').listview('refresh');
                $("#del_ben_"+benid).click(function(){
                    //PENDING: CONFIRM DIALOG
                    db.transaction( function(tx){
                    tx.executeSql("DELETE FROM Beneficiarios WHERE ID = "+benid),
                    [],
                    console.log(benid+" borrado con éxito!"),
                    onError
                    });
                });
                $("#view_ben_"+benid).click(function(){
                    db.transaction( function(tx){
                    tx.executeSql('SELECT * FROM Beneficiarios WHERE ID = '+benid),
                    [],
                    //SUCCESS ACTION! -- NOT WORKING
                    function(tx, results) {
                        $('#b_nombres').val(results.rows.item.nombres);
                        $('#b_apellidos').val();
                        $('#b_dia').val();
                        $('#b_mes').val();
                        $('#b_año').val();
                        console.log(benid+" shown successfully!") //IS NOT SHOWN AT ALL
                    }
                    console.log(benid+" mostrado shown successfully without function!") //SHOWN AS DESIRED
                    ,
                    onError
                    });
                });
            },
            onError );
        },
        onError );
        });

    $( "#ul-beneficiarios" ).delegate( "li a", "click", function() {
        $(this).parent("li").remove();
        var li_num = $('#ul-beneficiarios li').length;
        if (li_num == 1) {
            addEmptyBeneficiarios('#ul-beneficiarios');
        }
        } );
}); 
```

正如您可以想象的那样，我有一个带有 LI 的 UL，当单击 ADD 按钮时，它会被添加，一切正常，包括 DB 执行。

问题是当我单击 $("#view_ben_"+benid) 时，它确实运行正常，但它没有正确执行 SELECT 成功函数，尽管它确实显示了在成功函数之外设置的 console.log。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:19:24.213

好的，我想通了：在以下行中，您将`executeSql`直接关闭函数，而忽略函数体中未使用的其余参数。换句话说：缺少一个括号;)。

```
tx.executeSql('SELECT * FROM Beneficiarios WHERE ID = '+benid), 
```

将您的语法更改为以下示例：

```
db.transaction( function(tx){
    tx.executeSql(
        ("DELETE FROM Beneficiarios WHERE ID = "+benid), // SQL COMMAND
        [],                                              // NO IDEA WHAT THAT IS FOR
        console.log("success"),                          // SUCCESS CALLBACK
        onError                                          // ERROR CALLBACK
    );
}); 
```

**我想指出的是，您将太多的功能塞进彼此中。考虑将绑定、成功和错误函数外包到顶层，以防止像 Matryoshka 代码一样的 Inception。**

# java - Lucene 禁止的条款在不应该的地方“模糊化”

> ID：15487463
> 
> 赞同：0
> 
> 时间：2013-03-18T21:40:14.390
> 
> 标签：java, lucene, filtering, full-text-indexing

我正在编写一个基于 Lucene 的过滤器：我有一些来自 API 的结果，我想**强制**这些结果匹配某个查询（API 有时不起作用）。由于结果是从 API 获得的，我基本上将它们存储在 RAM 中，对其进行索引和过滤。如果 Lucene 在我的索引中找到该文档，我认为该文档是可以的，如果不是，它将被过滤掉。

有时我希望它模糊，有时我不想。有一个近似开关。因此，我使用 StandardAnalyzer 进行近似 = false，并使用巴西分析器进行近似 = true。好的？

问题是巴西分析器近似否定项，我认为这不是一个好方法。例如，如果我需要“greve -trabalhadores”，则带有“greve do trabalho”的文档与查询匹配，但它不应该。如果我使用 StandardAnalyzer，它工作正常，如果我使用巴西分析器，它会忽略包含“trabalh”的所有内容，因为词干。

我的解决方案是使用 StandardAnalyzer 重写禁止的子句，它不会进行词干提取/模糊处理。因此，被禁止的查询部分，我将使用 StandardAnalyzer，另一部分将使用巴西分析器或 Standard（取决于近似开关）。

问题是它不起作用（有时）。

我的代码的一个小测试如下：

```
import java.io.IOException;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;
import java.util.logging.Logger;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.br.BrazilianAnalyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.analysis.util.CharArraySet;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.document.IntField;
import org.apache.lucene.document.TextField;
import org.apache.lucene.index.DirectoryReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.IndexWriterConfig;
import org.apache.lucene.queryparser.classic.MultiFieldQueryParser;
import org.apache.lucene.search.BooleanClause;
import org.apache.lucene.search.BooleanQuery;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.ScoreDoc;
import org.apache.lucene.search.TopDocs;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.RAMDirectory;
import org.apache.lucene.util.Version;

public class Lucene {

    private static Logger log = Logger.getLogger(Lucene.class.getName());

    private String[] fields = new String[] { "title" };

    private BrazilianAnalyzer analyzerBrazil = new BrazilianAnalyzer(Version.LUCENE_41, new CharArraySet(Version.LUCENE_41, Collections.emptyList(), true));
    private StandardAnalyzer analyzerStandard = new StandardAnalyzer(Version.LUCENE_41, new CharArraySet(Version.LUCENE_41, Collections.emptyList(), true));

    private MultiFieldQueryParser parserBrazil = new MultiFieldQueryParser(Version.LUCENE_41, fields , analyzerBrazil);
    private MultiFieldQueryParser parserStandard = new MultiFieldQueryParser(Version.LUCENE_41, fields , analyzerStandard);

    public void filter(String query, boolean fuzzy, List<Result> results) {
        Directory index = null;

        if (results == null || results.size() == 0) {
            return;
        }

        try {
            Analyzer analyzer = fuzzy ? analyzerBrazil : analyzerStandard;
            Query q = fuzzy ? parserBrazil.parse(query) : parserStandard.parse(query);

            // terms to ignore/prohibited shoudn't be fuzzyfied...
            if (fuzzy) {
                Query queryNoFuzzy = parserStandard.parse(query);

                if (q instanceof BooleanQuery) {
                    BooleanClause[] clauses = ((BooleanQuery)queryNoFuzzy).getClauses();
                    if (clauses != null && clauses.length > 0) {
                        BooleanClause clause = null;
                        for (int i = 0; i < clauses.length; i++) {
                            clause = clauses[i];
                            if (clause.isProhibited()) {
                                ((BooleanQuery)q).clauses().set(i, clause);
                            }
                        }
                    }
                }
            }

            log.info(q.toString());

            index = index(results, analyzer);
            IndexSearcher searcher = new IndexSearcher(DirectoryReader.open(index));
            TopDocs resultsFoundDocs = searcher.search(q, results.size());

            List<Result> resultsFound = new ArrayList<Result>();
            for (ScoreDoc resultadoFiltro : resultsFoundDocs.scoreDocs) {
                log.info("Score " + resultadoFiltro.score);
                resultsFound.add(results.get(Integer.parseInt(searcher.doc(resultadoFiltro.doc).get("index"))));
            }

            for (Result result : results) {
                if (!resultsFound.contains(result)) {
                    result.setFiltered(true);
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            try {
                index.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

    private Directory index(List<Result> resultados, Analyzer analyzer) {
        try {
            Directory index = new RAMDirectory();
            IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_41, analyzer);

            IndexWriter writer = new IndexWriter(index, config);
            indexResults(writer, analyzer, resultados);

            return index;
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
    }

    private void indexResults(IndexWriter w, Analyzer analyzer, List<Result> resultados) throws IOException {
        try {
            Document resultado = null;

            for (int i = 0; i < resultados.size(); i++) {
                resultado = new Document();

                resultado.add(new TextField(fields[0], resultados.get(i).getTitle(), Field.Store.YES));
                resultado.add(new IntField("index", i, Field.Store.YES));

                w.addDocument(resultado, analyzer);
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            w.close();
        }
    }   

    public static void main(String[] args) {
        List<Result> ocs = new ArrayList<Result>();

        Result rb = new Result("Vivo Celular - não instalação do produto");
        ocs.add(rb);

        System.out.println("ITEMS ____________________________");
        for (Result oc : ocs) {
            System.out.println(oc.getTitle());
        }
        System.out.println("ITEMS ____________________________");

        String query = "vivo -celular";

        System.out.println("\n >> QUERY " + query);

        new Lucene().filter(query, true, ocs);

        System.out.println("\nFOUND ____________________________");
        for (Result oc : ocs) {
            if (!oc.getFiltered()) {
                System.out.println(oc.getTitle());
            }
        }
        System.out.println("FOUND ____________________________");
    }

}

class Result {

    private String title;
    private Boolean filtered = false;

    public Result(String title) {
        this.title = title;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public Boolean getFiltered() {
        return filtered;
    }

    public void setFiltered(Boolean filtered) {
        this.filtered = filtered;
    }

} 
```

有一个简单的文档，标题为“Vivo Celular - não instalação do produto”。*我将查询“vivo -celular”，因此，由于文档包含 celular，因此searcher.search(q, results.size())*不应返回它；称呼。它仅在近似开关打开时发生，即使它打印查询以仅将“vivo”提取到“viv”（查询是“（title：viv）-（title：celular）”）。

那是对的吗？？？

我正在使用版本 4.2.2。它也发生在 4.1.0。

任何人都可以启发我吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:34:45.047

我认为问题在于您混淆了分析器。

如果您的`fuzzy`标志设置为 true，则您正在使用`BrazilianAnalyzer`（进行词干提取）对文档进行索引，但您正在尝试使用`StandardAnalyzer`.

换句话说，即使您有`"(title:viv) -(title:celular)"`正确的查询，该术语`celular`很可能已在目录中提取（那是因为您使用 索引`StandardAnalyzer`），因此该子句`-celular`永远不会起作用。

尽管会增加一些开销，但可能的解决方法是维护两个不同的索引：一个有词干的索引和一个非词干的索引。要轻松做到这一点，您可以创建两个不同的字段，例如`title`(with `StandardAnalyzer`) 和`stemmedtitle`(with `BrazilianAnalyzer`)。使用[PerFieldAnalyzerWrapper](http://lucene.apache.org/core/4_0_0/analyzers-common/org/apache/lucene/analysis/miscellaneous/PerFieldAnalyzerWrapper.html)创建一个适用于两个不同字段的分析器。然后，您可以重写您的查询`stemmedtitle:viv -title:celular`，这应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T00:53:34.390

对于那些正在寻找答案的人：

我找到了一种更好（和正确）的方法：BrazilianAnalyzer（和大多数分析器）有一个重载的构造函数，它接受停止词和不应该被阻止（或模糊化）的词。所以你需要做的是：

按如下方式构建您的分析器：

```
new BrazilianAnalyzer(Version.LUCENE_41, stops, getNoStemmingSet(query)); 
```

然后，getNoStemmingSet 将是：

```
private CharArraySet getNoStemmingSet(String query) {
    if (query != null && !query.contains(" -")) {
        return new CharArraySet(Version.LUCENE_41, Collections.emptyList(), true);
    }

    List<String> proihibitedClauses = new ArrayList<String>();

    for (String clause : query.split("\\s")) {
        if (clause.startsWith("-")) {
            proihibitedClauses.add(clause.replace("-", ""));
        }
    }

    return new CharArraySet(Version.LUCENE_41, proihibitedClauses, true);
} 
```

因此，如果查询包含禁止的子句（减号），我们将分别使用 then 并忽略构造一个新的 CharArraySet。

Stops 是另一个您希望用作停用词的 CharArraySet。如果您不需要自己设置停用词，则可以使用默认设置，使用：

```
BrazilianAnalyzer.getDefaultStopSet() 
```

就是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T19:23:26.147

对于那些想要使用-“some phrase”的人来说，这段代码应该可以解决问题（还没有测试得那么好，但你可以试试）：

```
private CharArraySet getNoStemmingSet(String query) {

if (query != null && !query.contains(" -")) {
    return new CharArraySet(Version.LUCENE_41, Collections.emptyList(), true);
}

List<String> proihibitedClauses = new ArrayList<String>();
String[] quotedWords = null;

for (int i = 0; i < query.length(); i++) {
    if (query.charAt(i) == '-' && query.charAt(i+1) == '\"') {
        quotedWords = query.substring(i+2, query.indexOf('\"', i+2)).split("\\s");
        for (String quotedWord : quotedWords) {
            proihibitedClauses.add(quotedWord);
        }
    } else if (query.charAt(i) == '-') {
        if (query.indexOf(' ', i+1) > 0) {
            proihibitedClauses.add(query.substring(i+1, query.indexOf(' ', i+1)));
        } else {
            proihibitedClauses.add(query.substring(i+1, query.length()));
        }
    } else {
        continue;
    }
}

return new CharArraySet(Version.LUCENE_41, proihibitedClauses, true);
} 
```

# c# - 无法访问 ValidationAttribute

> ID：15487464
> 
> 赞同：0
> 
> 时间：2013-03-18T21:40:14.700
> 
> 标签：c#, .net, data-annotations

我正在尝试设置一些使用 System.ComponentModel.DataAnnotations 的自定义验证方法。我已经编写了一些用于验证的通用方法。这是发生问题的地方：

```
private void SetValidationAttributeErrors<TEntity>(TEntity item, List<string> errors)
    {
        var result = from prop in TypeDescriptor.GetProperties(item).Cast<PropertyDescriptor>()
                     from attribute in prop.Attributes.OfType<ValidationAttribute>()
                     where !attribute.IsValid(prop.GetValue(item))
                     select attribute.FormatErrorMessage(string.Empty);
    } 
```

我在“ValidationAttribute”类型上有一个错误，说找不到它。我有 DataAnnotations 的 using 语句。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:20:45.260

没关系！我想到了。显然 using 语句是不够的。我还必须将项目引用添加到包中。

# r - 具有预测区间的时间序列图

> ID：15487467
> 
> 赞同：2
> 
> 时间：2013-03-18T21:40:23.873
> 
> 标签：r, time-series

我在 R 中的时间序列图有问题。更具体地说，是一个有预测的问题。

这是数据集，它是取自英格兰中部温度 (CET) 数据集的气象数据。我已将其缩减为仅包括过去 6 年，并包含月平均温度。

```
Year JAN FEB MAR  APR  MAY  JUN  JUL  AUG  SEP  OCT NOV  DEC
2007 7.0 5.8 7.2 11.2 11.9 15.1 15.2 15.4 13.8 10.9 7.3  4.9
2008 6.6 5.4 6.1  7.9 13.4 13.9 16.2 16.2 13.5  9.7 7.0  3.5
2009 3.0 4.1 7.0 10.0 12.1 14.8 16.1 16.6 14.2 11.6 8.7  3.1
2010 1.4 2.8 6.1  8.8 10.7 15.2 17.1 15.3 13.8 10.3 5.2 -0.7
2011 3.7 6.4 6.7 11.8 12.2 13.8 15.2 15.4 15.1 12.6 9.6  6.0
2012 5.4 3.8 8.3  7.2 11.7 13.5 15.5 16.6 13.0  9.7 6.8  4.8 
```

但是，我的数据集没有年份列，它只是将 1-6 列为行名，因为我遇到了问题。

现在我已经使用了该`arima()`函数，数据集称为数据

```
m <- arima(data, order = c(2, 0, 0), seasonal = list(order = c(1, 0, 0))) 
```

我在季节性部分使用了其他数字，但这给出了最低的 AIC。

然后我用

```
pm <- predict(m, n.ahead = 12, se.fit = TRUE)

ts.plot(cbind(f, pm$pred, pm$pred-2*pm$se, pm$pred+2*pm$se), col = ("black", "black", "red", "red")) 
```

这应该为这个特定模型生成一个具有 95% 预测区间的时间序列图。

但是，我收到此错误：

```
Error in xy.coords(x = matrix(rep.int(tx, k), ncol = k), y = x, log = log) : 
  (list) object cannot be coerced to type 'double' 
```

任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-18T21:57:19.950

安装`forecast`软件包。它提供了一种计算间隔的预测方法和一个绘图方法。

```
install.packages("forecast")
library(forecast)
pm <- forecast(m, h=12)
plot(pm) 
```

# php - MySQL SUM 只有 1 个字段和

> ID：15487468
> 
> 赞同：0
> 
> 时间：2013-03-18T21:40:24.713
> 
> 标签：php, mysql

我有以下表结构

```
--ID-- --Date-- --Value--
  1    2013-1-2     23
  2    2013-1-2     11
  3    2013-1-3     8
  4    2013-1-3     7 
```

如您所见，日期可以重叠，我想输出每个不同的日期以及属性值的总和。因此，它会是。

```
--Date--   --Total-- 
2013-1-2      34 
2013-1-3      15 
```

这甚至可以通过查询实现，还是我必须做一些单独的求和？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:41:59.947

```
SELECT Date, sum(Value) as Total
FROM Table
GROUP BY Date 
```

# jetty - Jetty Hightide - 战争没有解开

> ID：15487471
> 
> 赞同：0
> 
> 时间：2013-03-18T21:40:33.247
> 
> 标签：jetty

我安装了 jetty hightide（rpm，版本 8）。服务器运行良好（似乎解压缩了与其捆绑的所有测试战争），但由于某种原因，它不会解压缩我的任何战争（或任何其他战争）。重新启动服务不会改变这一点，因此这不是自动部署问题。有人对造成这种情况的原因有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:49:25.183

码头 rpm 和 debs ……老实说有问题。我强烈建议您查看 Fedora rpm，因为他们正在为 jetty 8 和 jetty 9 构建 rpm。我们可能应该完全停止发布它们。如果你把它整理好，请告诉我！

根据您的描述，我会检查 start.ini 文件，它可能缺少 jetty-webapps.xml 并假设您正在进行上下文部署（即 jetty-contexts.xml 可能处于活动状态）。

# css - 你如何使css中悬停的区域更大

> ID：15487475
> 
> 赞同：9
> 
> 时间：2013-03-18T21:40:40.863
> 
> 标签：css, menu, hover, size, area

我在 html 中有一个列表，我将其格式化为 CSS 中的下拉菜单，但是，当我将鼠标悬停在上面时，只有文本的前半部分在响应，而不是整个长度，我想不出找出要更改的属性以使此悬停区域更长。

谢谢！

代码：

```
#navbar {
    position: relative;
    margin: 10px;
    margin-left: -27px;
    /*height: 13px; */
    float: left;
}

#navbar li {
    list-style: none;
    float: left; 
}

#navbar li a {
    display: block;
    padding: 3px 8px;
    background-color: #00AA63;
    color: #fff;
    text-decoration: none; 
}

#navbar li ul {
    color: #fff;
    display: none; 
    width: 10em;
}

#navbar li:hover ul {
    display: block;
    position: absolute;
    margin: 0;
    padding: 0; 
    /*width: 200%;*/
}

#navbar li:hover li {
    float: none; 
    /*width: 200%;*/
}

#navbar li:hover li a {
    background-color: #00AA63;
    color: #fff;
    border-bottom: 1px solid #fff;
    color: #fff; 
}

#navbar li li a:hover {
    color: #fff;
    background-color: #33BB96; 
} 
```

jQuery的东西：

```
document.getElementById("menu").innerHTML += '<ul id="navbar">'
    + '<li><a href="#">other electives</a>'
    +   '<ul id="navbar">'
    +       '<li><a href="#">Subitem One</a></li>'
    +       '<li><a href="#">Second Subitem</a></li>'
    +       '<li><a href="#">Numero Tres</a></li></ul>'
    + '</li>' 
```

编辑：实现：http: [//jsfiddle.net/CLVwv/1/](http://jsfiddle.net/CLVwv/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T22:21:08.657

问题是因为您在每个`ul`.

只需从中删除填充`.navbar`并减少边距即可获得所需的间距。

```
.navbar {
    position: relative;
    margin: 10px 1px;
    /*height: 13px; */
    float: left;
    padding-left: 0px;
} 
```

您还可以通过删除 ID 标签和使用`.navbar`类来减少 CSS，这也将使您的代码更加灵活，因为您不必在每次希望将项目添加到菜单时添加任何新的 CSS：

```
.navbar {
    position: relative;
    margin: 10px 1px;
    /*height: 13px; */
    float: left;
    padding-left: 0px;
}

.navbar li {
    list-style: none;
    overflow: hidden;
}

.navbar li a {
    display: block;
    padding: 3px 8px;
    background-color: #00AA63;
    color: #fff;
    text-decoration: none; 
}

.navbar li ul {
    color: #fff;
    display: none; 
    width: 10em;

}

.navbar li:hover ul {
    display: block;
    position: absolute;
    margin: 0;
    padding: 0; 
    /*width: 200%;*/
}

.navbar li:hover li {
    float: none; 
    /*width: 200%;*/
}

.navbar li:hover li a {
    background-color: #00AA63;
    color: #fff;
    border-bottom: 1px solid #fff;
    color: #fff; 
}

.navbar li li a:hover {
    color: #fff;
    background-color: #33BB96; 
} 
```

HTML：

```
<ul class="navbar">
    <li><a href="#">other electives</a>
       <ul class="navbar">
           <li><a href="#">Subitem One</a></li>
           <li><a href="#">Second Subitem</a></li>
           <li><a href="#">Numero Tres</a></li></ul>
    </li>
</ul>
<ul class="navbar">
    <li><a href="#">other electivesother electives</a>
       <ul class="navbar">
           <li><a href="#">Subitem One</a></li>
           <li><a href="#">Second Subitem</a></li>
           <li><a href="#">Numero Tres</a></li></ul>
    </li>
</ul>
<ul class="navbar">
    <li><a href="#">other electives</a>
       <ul class="navbar">
           <li><a href="#">Subitem One</a></li>
           <li><a href="#">Second Subitem</a></li>
           <li><a href="#">Numero Tres</a></li></ul>
    </li>
</ul> 
```

有关可行的解决方案，请参阅[http://jsfiddle.net/georeith/CLVwv/2/](http://jsfiddle.net/georeith/CLVwv/2/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T22:18:03.490

发生这种情况的原因是您在 ul 上的负边距。ul#navbar2 覆盖#navbar1，#navbar3 覆盖#navbar2。

您需要三个单独的 ul 是否有理由？如果您使用以下 html，则问题已解决：

```
<ul id="navbar">
    <li><a href="#">other electives</a>
       <ul class="navbar">
           <li><a href="#">Subitem One</a></li>
           <li><a href="#">Second Subitem</a></li>
           <li><a href="#">Numero Tres</a></li></ul>
    </li>

    <li><a href="#">other electivesother electives</a>
       <ul class="navbar">
           <li><a href="#">Subitem One</a></li>
           <li><a href="#">Second Subitem</a></li>
           <li><a href="#">Numero Tres</a></li></ul>
    </li>

    <li><a href="#">other electives</a>
       <ul class="navbar">
           <li><a href="#">Subitem One</a></li>
           <li><a href="#">Second Subitem</a></li>
           <li><a href="#">Numero Tres</a></li></ul>
    </li>
</ul> 
```

我还在#navbar li 中添加了一个 3px 的填充：

```
#navbar li {
    list-style: none;
    float: left; 
    padding-right: 3px;
} 
```

见小提琴：http: [//jsfiddle.net/2wFjA/1/](http://jsfiddle.net/2wFjA/1/)

# iis - 禁用 IIS Express？

> ID：15487476
> 
> 赞同：10
> 
> 时间：2013-03-18T21:40:45.773
> 
> 标签：iis

刚刚迁移到 VS2012 并遇到此问题。我需要针对真正的 IIS 服务器进行开发（以便能够在从网络设备调用 Web 服务时对其进行调试）

遇到“IIS Express 在同一端口上启动”等问题。但是 Express 似乎没有 IIS 管理器？如何控制和配置它？

我宁愿回退到真正的 IIS

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T08:56:54.347

1.  注册 asp.net

    C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe -i

2.  `Open Project-> Right Click Select Properties-> Select Web Tab-> Select Use Local IIS Web Server & uncheck the Use IIS Express checkbok -> Specify Project Url`

![在此处输入图像描述](../Images/6aa7cb05d828db94d1092ed32aa0e96f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-21T17:25:22.070

通过 Windows 10 卸载 IIS Express

转到设置 -> 应用程序和功能 -> 选择 IIS Express -> 卸载

注意：IIS Express 与 Visual Studio 安装一起打包（如果您选择开发 ASP.NET Web 应用程序）。我不知道卸载 IIS Express 是否会对您的 VS IDE 产生不良影响。

我只会按照上面的说明进行操作，而不是完全卸载 IIS Express。

干杯!

# php - PHP/MySQL 联系人列表

> ID：15487477
> 
> 赞同：0
> 
> 时间：2013-03-18T21:40:46.943
> 
> 标签：php, mysql, list, contact

我想使用 php 和 mysql[在 facebook 上创建联系人列表。](https://www.facebook.com/messages)我有表格消息（值：ID | From | To | message_body | date | status），但我不知道如何一次获取消息发件人 ID（值“来自”）。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:26:07.670

这是我认为您正在寻找的示例...

```
SELECT DISTINCT `From`
FROM `messages`
WHERE `To` = `current_user_id` 
```

# c# - 序列化图表和其他控件 C#

> ID：15487478
> 
> 赞同：1
> 
> 时间：2013-03-18T21:40:47.730
> 
> 标签：c#, serialization, charts, xml-serialization

因此，我正在尝试序列化我的图表、标签、文本框和组合框，除了将其放在同一个 xml 文件中之外，我什么都能做，但图表状态，这就是我在序列化类中所拥有的。

```
public static void Serialise(Control c, string XmlFileName, List<SampleFileObject> sampleObj) {
  XmlTextWriter xmlSerialisedForm = new XmlTextWriter(XmlFileName, System.Text.Encoding.Default);
  xmlSerialisedForm.Formatting = Formatting.Indented;
  xmlSerialisedForm.WriteStartDocument();
  xmlSerialisedForm.WriteStartElement("ChildForm");
  // enumerate all controls on the form, and serialise them as appropriate
  AddChildControls(xmlSerialisedForm, c);
  AddSampleList(xmlSerialisedForm, sampleObj);
  xmlSerialisedForm.WriteEndElement(); // ChildForm
  xmlSerialisedForm.WriteEndDocument();
  xmlSerialisedForm.Flush();
  xmlSerialisedForm.Close();
}

private static void AddChildControls(XmlTextWriter xmlSerialisedForm, Control c) {
  foreach (Control childCtrl in c.Controls) {
    if (!(childCtrl is Label)) {
      // serialise this control
      xmlSerialisedForm.WriteStartElement("Control");
      xmlSerialisedForm.WriteAttributeString("Type", childCtrl.GetType().ToString());
      xmlSerialisedForm.WriteAttributeString("Name", childCtrl.Name);
      if (childCtrl is TextBox) {
        xmlSerialisedForm.WriteElementString("Text", ((TextBox)childCtrl).Text);
      } else if (childCtrl is ComboBox) {
        xmlSerialisedForm.WriteElementString("Text", ((ComboBox)childCtrl).Text);
        xmlSerialisedForm.WriteElementString("SelectedIndex", ((ComboBox)childCtrl).SelectedIndex.ToString());
      } else if (childCtrl is ListBox) {
        // need to account for multiply selected items
        ListBox lst = (ListBox)childCtrl;
        if (lst.SelectedIndex == -1) {
          xmlSerialisedForm.WriteElementString("SelectedIndex", "-1");
        } else {
          for (int i = 0; i < lst.SelectedIndices.Count; i++) {
            xmlSerialisedForm.WriteElementString("SelectedIndex", (lst.SelectedIndices[i].ToString()));
          }
        }
      } else if (childCtrl is CheckBox) {
        xmlSerialisedForm.WriteElementString("Checked", ((CheckBox)childCtrl).Checked.ToString());
      }
      else if (childCtrl is Chart)
      {

        ((Chart)childCtrl).Serializer.Content = SerializationContents.Appearance;
        ((Chart)childCtrl).Serializer.SerializableContent += ",DataPoint.AxisLabel, Series.AxisLabels, Series.Name, ChartArea.Name";
        ((Chart)childCtrl).Serializer.Save(xmlSerialisedForm);
      } 
```

我认为这是重要的部分。

谢谢

# ubuntu - 当我通过 https 访问我的网站时，浏览器会从服务器下载源代码

> ID：15487481
> 
> 赞同：0
> 
> 时间：2013-03-18T21:41:05.590
> 
> 标签：ubuntu, ssl, nginx

我在 ubuntu 计算机上运行 nginx。我刚刚创建了一个 ssl 证书并在可用站点文件中对其进行了如下配置：

```
server {

        listen 443;
        server_name localhost;
        root /var/www;
        index index.php;
        ssl on;
        ssl_certificate /etc/nginx/conf.d/server.crt;
        ssl_certificate_key /etc/nginx/conf.d/server.key;
} 
```

当我转到 https://[address] 时，我的浏览器会下载网站的源代码，但它不会在浏览器中显示任何内容。如果我注释掉`root`配置文件中的行，浏览器会显示“欢迎使用 Nginx”页面。

当我从 https 访问它时，如何让浏览器显示我的网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:42:07.723

如果您设置了 nginx 和 php-fpm，则需要让 nginx 转发对任何`.php`以 php 处理器结尾的文件的请求。

具体来说，您似乎`location`在您的块内缺少此`server`块：

```
location ~ \.php$ {
    include /path/to/your/fastcgi_params;
    fastcgi_pass  127.0.0.1:9000;
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME /path/to/your/web/root$fastcgi_script_name;
} 
```

# c++ - 如何复制矩阵？

> ID：15487482
> 
> 赞同：0
> 
> 时间：2013-03-18T21:41:05.933
> 
> 标签：c++

我需要将已设置为 M 的矩阵复制到新矩阵 M2 中并输出该矩阵。

如何才能做到这一点？

这是我到目前为止所尝试的：

```
#include <iostream>

using namespace std;
#define N 24
void copy(int M[][N], int M2[][N], int ROWS, int COLS)
{
    int r, c;
    M2[r][c]= M[r][c];
    cout<< M2[r][c];
}

void print(int M[][N], int ROWS, int COLS)
{
    int r, c, row, col;
    row= 1;
    col= 1;
    M[row][col] = 2;
    for(r=0; r< ROWS; r++)
    {
        for(c=0; c < COLS; c++)
        {
            if(M[r][c]==0)
            {
                cout<<" ";
            }
            else if (M[r][c]==1)
            {
                cout<< "T";
            }
            else if (M[r][c]==2)
            {
                cout<< "*";
            }
            else
            {
                cout << M[r][c];
            }
        }

        cout <<endl; 
    }
}

void fill(int M[][N], int ROWS, int COLS, int row, int col)
{
    int r, c;    
    for(r=0; r< ROWS; r++)
    {
        for(c=0; c < COLS; c++)
        {
            if (r == 0 || r == ROWS - 1) {
                M[r][c]=0;
            }
            else if(c == 0 || c == COLS -1) {
                M[r][c]=0;
            }
            else {
                M[r][c]= 1;  
            }
        }
    }
}

int main()
{
    int M[N/2][N];
    int M2[N/2][N];
    int ROWS, COLS;
    int r, c;
    ROWS = sizeof(M) / sizeof(M[0]);
    COLS = sizeof(M[0]) / sizeof(M[0][0]);
    fill(M, ROWS, COLS, 1, 1);
    print(M, ROWS, COLS);
    copy(M, M2, ROWS, COLS);

    return 0; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:06:11.910

Here is a problem:

```
int r, c;
M2[r][c]= M[r][c]; 
```

You never assigned `r` and `c`, they contain some unknown value, which might well be outside the range `0..ROWS-1` and `0..COLS-1`.

Don't use uninitialized values, **especially in pointer arithmetic**.

To copy the entire matrix, you will probably need some loops like you have in the `print` function.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:26:29.333

由于您使用二维数组来存储矩阵，因此将一个复制到另一个应该像调用 memcpy 一样简单。任何数组的内容（无论维度如何）都连续存储在内存中。

在您的复制功能中，只需将以下代码行放入其中：

```
memcpy(M2, M1, r * c * sizeof(int)); 
```

在 memcpy 之前，请确保您已为 r 和 c 分配了适当的值（显然这应该是正确的行数和正确的列数）。

# java - calling on a stack inside a while loop

> ID：15487485
> 
> 赞同：0
> 
> 时间：2013-03-18T21:41:08.323
> 
> 标签：java, while-loop, stack

i can't figure out why this part of my program won't work, I peek outside the while loop and confirm that the stack is not empty, yet when i try to access it inside the while loop I get this error:

> "Exception in thread "main" java.util.EmptyStackException at java.util.Stack.peek(Unknown Source)"

here's the relevant piece of code

```
String test = list.peek();
    System.out.println(test);
    while(list.peek() != null)
    {
        temp = list.pop(); 
```

There's more too the while loop but it breaks once `list.peek` is called inside the parenthesis, I tried changing it to "`while(test != null)`" for test purposes but it breaks once it gets to `list.pop()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:43:33.770

The `peek` method throws an `EmptyStackException` if the stack is empty. To test if the stack is empty, use the [`empty()`](http://docs.oracle.com/javase/7/docs/api/java/util/Stack.html#empty%28%29) method:

```
while(!list.empty()) 
```

Also, don't name your `Stack` "list"; that can be confusing.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T21:44:18.593

When you `peek()`, that can also return a `EmptyStackException`. You should use this code instead:

```
while(!list.empty()) {
    temp = list.pop();
} 
```

What's happening is that peek can't deal with an empty element the way you are assuming it can. You have to make sure the stack isn't empty before you `peek()`.

As a side note, it's a bit odd to name your Stack 'list'. That would imply your structure is a `List`

# c++ - 在 C++ 中计算 long long int 类型整数绝对值的最快方法是什么？

> ID：15487488
> 
> 赞同：1
> 
> 时间：2013-03-18T21:41:18.947
> 
> 标签：c++

在 C++ 中计算 long long int 类型整数绝对值的最快方法是什么？没有`if()`声明可以吗？我试图转换为未签名然后再次签名，但它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T21:43:56.023

尝试[`std::abs`](http://en.cppreference.com/w/cpp/numeric/math/abs)对三元运算符，配置文件，并亲自查看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T21:43:10.967

改编自[Bit Twiddling Hacks，计算整数绝对值 (abs) 而无需分支](http://www.graphics.stanford.edu/~seander/bithacks.html#IntegerAbs)：

```
long long v; // value to abs()
long long const mask = v >> sizeof(long long) * CHAR_BIT - 1;

unsigned long long result = (v + mask) ^ mask; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T21:42:53.653

你应该使用`llabs`. 请参阅[cplusplus.com 上的函数](http://www.cplusplus.com/reference/cstdlib/abs/)[参考`abs`](http://www.cplusplus.com/reference/cstdlib/abs/)

# moodle - 升级时调用 upgradelib.php 中的未定义函数

> ID：15487489
> 
> 赞同：1
> 
> 时间：2013-03-18T21:41:22.193
> 
> 标签：moodle

我正在更新 Moodle 插件。基本上我想做的就是将一些字段添加到数据库中的现有表中。

这是我`upgrade.php`从 XMLDB 编辑器构建的：

```
function xmldb_qtype_myqtype_upgrade($oldversion = 0) {
global $DB;
$dbman = $DB->get_manager();

$result = true;

if ($oldversion < 2013031601) {

    // Define table solib to be created
    $table = new xmldb_table('solib');

    // Adding fields to table solib
    $table->add_field('id', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, XMLDB_SEQUENCE, null);
    $table->add_field('course', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, null, '0');
    $table->add_field('name', XMLDB_TYPE_CHAR, '255', null, XMLDB_NOTNULL, null, null);
    $table->add_field('timestamp', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, null, null);
    $table->add_field('server_addr', XMLDB_TYPE_CHAR, '255', null, XMLDB_NOTNULL, null, null);
    $table->add_field('access_token', XMLDB_TYPE_INTEGER, '20', null, XMLDB_NOTNULL, null, null);

    // Adding keys to table solib
    $table->add_key('primary', XMLDB_KEY_PRIMARY, array('id'));

    // Conditionally launch create table for solib
    if (!$dbman->table_exists($table)) {
        $dbman->create_table($table);
    }

    // solib savepoint reached
    upgrade_mod_savepoint(true, 2013031601, 'solib');
}

return $result;
} 
```

我还更新了 install.xml 文件，即使我不确定它是否会干扰升级，它也仅适用于插件的新用户。

然后我更改版本号`version.php`并运行更新，但我总是面临这个错误：

```
Fatal error: Call to undefined function xmldb_solib_upgrade() in /var/www/moodle/lib/upgradelib.php on line 629 
```

我认为这不是 Moodle 错误，我错过了一些东西。但是什么？我做错什么了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:47:10.907

解决了。

```
xmldb_qtype_myqtype_upgrade() 
```

需要定义为：

```
xmldb_solib_upgrade() // plugin name as 'qtype_myqtype' 
```

我不明白该错误的主要原因是因为它位于`/moodle/lib/upgradelib.php`而不是在转储文件中：`/moodle/mod/solib/db/upgrade.php`. 这种精度在文档中也不是很清楚。

# c++ - 为什么这个指针（WinProc 中的 pGame）为 NULL？

> ID：15487492
> 
> 赞同：0
> 
> 时间：2013-03-18T21:41:36.960
> 
> 标签：c++, windows, oop, winapi, pointers

这是我的 WinMain：

```
int WINAPI WinMain(HINSTANCE hInst, HINSTANCE hPrevInst, LPSTR lpCmdLine, int nShowCmd)
{
    if(SUCCEEDED(CoInitialize(NULL)))
    {
        {
            Game game;

            game.CreateRessources(hInst);

            game.ShowMainScreen();

            HWND hwnd=game.Getm_hWnd();
            HWND* pHWND=&hwnd;

            game.pWinsock->Initialize(hwnd);

            ShowWindow(game.Getm_hWnd(),SW_MAXIMIZE);
            UpdateWindow(game.Getm_hWnd());

            MSG msg;
            ZeroMemory(&msg,sizeof(MSG));

            while(GetMessage(&msg,NULL,0,0))
            {
                TranslateMessage(&msg);
                DispatchMessage(&msg);
            }
        }
        CoUninitialize();
    }

    return 0;
} 
```

有我的窗口创建类：

```
void Game::CreateWindowClass(HINSTANCE hInst)
{
    // Create a window class
    WNDCLASSEX wClass;
    ZeroMemory(&wClass,sizeof(WNDCLASSEX));
    wClass.cbClsExtra=NULL;
    wClass.cbSize=sizeof(WNDCLASSEX);
    wClass.cbWndExtra=NULL;
    wClass.hbrBackground=(HBRUSH)COLOR_WINDOW;
    wClass.hCursor=LoadCursor(NULL,IDC_ARROW);
    wClass.hIcon=NULL;
    wClass.hIconSm=NULL;
    wClass.hInstance=hInst;
    wClass.lpfnWndProc=WinProc;
    wClass.lpszClassName="Window Class";
    wClass.lpszMenuName=NULL;
    wClass.style=CS_HREDRAW|CS_VREDRAW;

    if(!RegisterClassEx(&wClass))
    {
        int nResult=GetLastError();

        MessageBox(NULL,"Failed to register window class","Window Class Failed",MB_ICONERROR);
    }

    m_hWnd=CreateWindowEx(NULL,
            "Window Class",
            "Game",
            WS_OVERLAPPEDWINDOW|WS_MAXIMIZE,
            CW_USEDEFAULT,
            CW_USEDEFAULT,
            CW_USEDEFAULT,
            CW_USEDEFAULT,
            NULL,
            NULL,
            hInst,
            this);

    if(!m_hWnd)
    {
        int nResult=GetLastError();

        MessageBox(NULL,"Window class creation failed","Window Class Failed",MB_ICONERROR);
    }
} 
```

这是 Game::CreateRessources：

```
void Game::CreateRessources(HINSTANCE hInst)
{   
    CreateWindowClass(hInst);

    pD2DResources=CreateD2DResources(m_hWnd);
    pMessageLog=CreateMessageLog();
    pWinsock=CreateWinsock();
} 
```

最后，我的 WinProc 在以下几行之后： if(pGame==NULL) MessageBox(NULL,"Pointer pGame is NULL","Error",NULL);

```
LRESULT CALLBACK WinProc(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    if(msg==WM_CREATE)
    {
        LPCREATESTRUCT pcs = (LPCREATESTRUCT)lParam;
            Game* pGame = (Game*)pcs->lpCreateParams;

            ::SetWindowLongPtrW(
                hWnd,
                GWLP_USERDATA,
                PtrToUlong(pGame)
                );
    }

    else if(msg==WM_DESTROY)
    {
        PostQuitMessage(0);
        return 0;
    }

    else
    {
        Game* pGame = reinterpret_cast<Game*>(static_cast<LONG_PTR>(
            ::GetWindowLongPtrW(
                hWnd,
                GWLP_USERDATA
                )));

        if(pGame==NULL)
            MessageBox(NULL,"Pointer pGame is NULL","Error",NULL);

        if(pGame->pD2DResources!=NULL)
        {
            switch(msg)
            { 
```

由于某种原因，pGame 为 NULL，因为 MessageBox 弹出。为什么这样？

编辑：顺便说一句，我正在动态创建一些对象，并且我的游戏对象内的私有指针被分配给这些动态创建的对象。可能与问题有关吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T22:08:55.530

因为`WM_CREATE`不是窗口程序得到的第一条消息。见`WM_NCCREATE`。

# javascript - Javascript 没有在页面加载时运行...但是使用 Firebug 它确实可以运行？

> ID：15487494
> 
> 赞同：0
> 
> 时间：2013-03-18T21:41:42.430
> 
> 标签：javascript, ajax, graph

我有一个使用 Envision.js 库的假装销售图表。只要 Firebug 正在运行，它就可以很好地工作。它会绘制一个介于 20-25 之间的数字，当我关闭 Web 服务器时，它会在 0 处平展。但如果我关闭 firebug，则刷新；它所做的只是在零处变平​​。这与我的 ajax 函数的位置有关：myFunction()，但我不知道是什么。有人可以给我一个眼球吗？我只是什么都没看到。我确实知道这不是 Ajax 函数本身，因为我在另一个页面上使用完全相同的两个函数并且它们运行良好。我正在从服务器返回（4 和 200），所以我不知道......在此先感谢。

```
//Global Variables//////////

var counter = 0;
var myArray = [25, 24, 23, 22, 21, 20];
var resultToGraph;
var url = "http://myserver.com/ajax_info.txt";
var xmlhttp;
function loadXMLDoc(url, cfunc)
{
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=cfunc;
    xmlhttp.open("GET",url, true);
    xmlhttp.send();
}

function myFunction(){
    loadXMLDoc(url+'?_dc='+(new Date()).getTime(), function(){
    if(xmlhttp.readyState==4 && xmlhttp.status==200){
             resultToGraph  = myArray[Math.floor((Math.random()*5))];
    }
        else{
            resultToGraph = 0;
        }
    });
}

(function realtime_demo (container) {

  var
    x = [],
    dataA = [],
    data = [[x, dataA]],
    options, i, timesries;

  // Mock Data:
    function sample(i) {    
    x.push(i);
    dataA.push(i);  
    }

  // Initial Data:
    for (i = 0; i < 100; i++) {
    sample(i);
    }

  // Envision Timeseries Options
    options = {
    container : container,
    data : {
        detail : data,
        summary : data
    },
    defaults : {
        summary : {
        config : {
            colors : [ 'red'], //added to code...nothing there initiall**
            handles : { show : true } //changed from false **   
        }
        }
    }
    }

  // Render the timeseries
    timeseries = new envision.templates.TimeSeries(options);

  // Method to get new data
  // This could be part of an Ajax callback, a websocket callback,
  // or streaming / long-polling data source.
    function getNewData () {
    i++;

    // Short circuit (no need to keep going!  you get the idea)
    if (i > 5000) return;
    sample(i);
    animate(i);
    }

  // Initial request for new data
    getNewData();

  // Animate the new data
    function animate (i) {

      var
    start = (new Date()).getTime(),
    length = 500, // 500ms animation length
    max = i - 1,  // One new point comes in at a time
    min = i - 31, // Show 50 in the top
    offset = 0;   // Animation frame offset

    // Render animation frame
    (function frame () {

         var
            time = (new Date()).getTime(),
            tick = Math.min(time - start, length),
        offset = 0;
            //offset = (Math.sin(Math.PI * (tick) / length - Math.PI / 2) + 1) / 2;

      // Draw the summary first
        timeseries.summary.draw(null, {
        xaxis : {
            min : 0,
            max : max + offset
        }
        });

      // Trigger the select interaction.
      // Update the select region and draw the detail graph.
        timeseries.summary.trigger('select', {
        data : {
            x : {
            min : min + offset,
            max : max + offset
            }
        }
        });

        if (tick < length) {
        setTimeout(frame, 0);
        } else {
        // Pretend new data comes in every second
        setTimeout(getNewData, 0);
        }
    })();
    }
}
)(document.getElementById("container")); 
```

# algorithm - 确定递归方程的方法？（一般的做法）

> ID：15487503
> 
> 赞同：2
> 
> 时间：2013-03-18T21:42:05.963
> 
> 标签：algorithm, recursion, recurrence

我正在为我的数据结构课程学习递归的第一阶段，我们的教授告诉我们，我们应该能够采用递归方法并能够提出问题大小以及递归方程。当问题大小取决于一个为简单起见假定为正的变量 N 时，我可以编写一个递归方程，例如：只要在第一次调用时 n > 0，此方法就会简单地打印输入数字。

```
public static int simpleCounter(int N) {
    if (n == 0) {
        return;
    }
    else {
        return 1 + simpleCounter(N - 1);
    }
 } 
```

但是，当问题规模更复杂时，例如取决于 2 个变量，我无法创建递归方程，因为我不知道如何处理变量。此方法计算 2 个数字可以相减多少次，假设第一次调用时 count 始终为零，并且 a 和 b 都是正数。

```
public static int complexCount(int a, int b, int count) {
    if ((a - b) <= 0) { 
        return 0; 
    }
    else {
      count = 1 + complexCount((a - b), b, count + 1)
      return count;
     }
 } 
```

那么这里的问题大小是多少？它与a和b都无关吗？在不知道问题大小的情况下，我无法得出递归方程：基数：T(0) = 1 递归：T(N) = 1 + ??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T00:56:55.020

递归关系并不总是必须涉及单个变量，事实上，具有多个变量的递归关系是很常见的。在这里，递归关系将是

> T(a, b) = 1 + T(a - b, b)（如果 a ≥ b）
> 
> T(a, b) = 1（否则）

然后，您可以根据 a 和 b 解决此递归关系，以得出最终解决方案。

希望这可以帮助！

# linux - 关于 Linux 内存类型的问题

> ID：15487506
> 
> 赞同：6
> 
> 时间：2013-03-18T21:42:22.673
> 
> 标签：linux, memory

我有以下关于 Linux 内存的问题：

1.  我知道活动内存是最常访问的内存部分。但是有人可以解释一下linux如何考虑将内存位置用于活动内存或非活动内存。

2.  有源内存由哪些组件组成？磁盘/文件缓存是否被视为活动内存的一部分。

3.  `Buffers`和 和有什么区别`Cached`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T08:37:34.153

我试着回答你的问题：

(1) 基本上，你的想法是正确的。但是 Linux Kernel 中的页面缓存实现很复杂。Linux 内核使用 LRU（最近最少使用）算法来管理页面缓存列表。一个Linux系统中可能有不同的内存区域，每个区域都维护着几个LRU列表，例如LRU_INACTIVE_ANON、LRU_ACTIVE_ANON（这两个列表用于匿名页面缓存）、LRU_INACTIVE_FILE、LRU_ACTIVE_FILE（这两个列表用于文件页面缓存）、LRU_UNEVICTABLE。这些列表使用 LRU 算法维护（添加到尾部，从头部删除）。并且页面根据访问频率在活动列表和非活动列表之间转换。只有当页面被访问并且它位于非活动列表中时，页面才会添加到活动列表尾部。如果活动列表变得太大，处于活动列表头部的页面将被移动到非活动列表尾部。页面回收发生在非活动列表上，从非活动列表的头部开始。

(2) 常规文件读/写、块设备文件访问和内存映射文件都可以触发 Linux Kernel 生成页面缓存，无论是活动的还是非活动的。此外，用户空间进程和用户空间堆栈中使用的 malloc 可以触发 Linux 内核生成页面缓存。

（3）也许我误解了你的问题，我猜你的意思是缓冲区缓存和页面缓存之间的区别：旧版本的内核同时使用缓冲区缓存和页面缓存。页面缓存用于文件访问（例如常规文件访问、内存映射文件、块设备文件访问），缓冲区缓存用于物理磁盘块访问（通常物理磁盘块的大小小于一页，所以有几个物理磁盘块可以填满一页）。虽然新版本内核仍然使用缓冲区缓存的概念，但新内核在页缓存的基础上实现了缓冲区缓存。

或者你的意思是内存缓冲区和cpu缓存之间的区别，如果是这样，内存缓冲区是为了加速磁盘/外围设备的访问，而cpu缓存是为了加速内存访问。

# jquery - browserstate/ajaxify：动态加载 jquery 时出现问题

> ID：15487507
> 
> 赞同：1
> 
> 时间：2013-03-18T21:42:30.567
> 
> 标签：jquery, ajax, html, history.js

**介绍**

我正在使用[browserstate/ajaxify](https://github.com/browserstate/ajaxify)将我的（wordpress）投资组合转变为一个网站，该网站仅在必要时重新加载网站的部分内容（ajaxify），并确保每个更改都在地址栏中可见，最重要的是 SEO 优化（历史 api） .

我的投资组合包含两个模板。包含 9 个项目/详细信息页面链接的概览页面。还有一个包含标题、文本、视频和图像的详细信息页面。

**问题**

我在详细信息页面上使用[fitvid](http://fitvidsjs.com/)库来增加对 vimeo 播放器的响应能力。当详细页面异步加载（使用 browserstate/ajaxify）时，这段 javascript 不起作用。所以 jquery、fitvid 和我的 main.js 需要再次动态添加。

不幸的是，我尝试在 document.ready 中使用 getScript 动态加载这些文件，但没有成功。

```
$.getScript("http://portfolio/wp-content/themes/rwd_theme/javascripts/foundation/jquery.js")
.done(function(script, textStatus) {
    console.log( textStatus );
});

$.getScript("http://portfolio/wp-content/themes/rwd_theme/js/jquery.fitvid.js")
.done(function(script, textStatus) {
    console.log( textStatus );
});
$.getScript("http://portfolio/wp-content/themes/rwd_theme/js/main.js")
.done(function(script, textStatus) {
    console.log( textStatus );
}); 
```

# php - 父节点中具有元数据的 Mysql 树

> ID：15487509
> 
> 赞同：0
> 
> 时间：2013-03-18T21:42:37.360
> 
> 标签：php, mysql, tree

所以我在mysql数据库中将数据作为一棵树，其中行通过parent_ID相互连接，父母可以有多个孩子，但孩子只能有一个父母。

不是我在子节点的名称中添加了一个变量。假设一个节点有 5 个子节点，我想将这些“小部件”命名为，并将该字符串存储在父节点中。

但由于子节点可以包含他们自己的子节点组，我不知道如何处理这个问题。

我想要做的是显示父节点下所有组标题的列表

所以这是一个演示

```
parent1[group_title="title"]
    child1[group_title="sometitle"]
        child6[group_title="some_other_title"]
            child9
            child10
        child7
        child8
    child2
    child3
parent2[group_title="any given title]
    child5
    ... 
```

我希望能够获得给定节点上的所有标题，所以假设我给 parent1 我想获得

```
* title
* sometitle
* some_other_title 
```

这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:07:38.603

Recursive queries are not possible in standard SQL.

I had similar problem. This [http://www.yiiframework.com/extension/nestedset](http://www.yiiframework.com/extension/nestedset) helped me.

# javascript - AngularJS + Jasmine：比较对象

> ID：15487510
> 
> 赞同：44
> 
> 时间：2013-03-18T21:42:38.673
> 
> 标签：javascript, unit-testing, angularjs, tdd, jasmine

我刚刚开始为我的 AngularJS 应用程序编写测试，并且正在 Jasmine 中这样做。

以下是相关的代码片段

客户端控制器：

```
'use strict';

adminConsoleApp.controller('ClientController',
    function ClientController($scope, Client) {

        //Get list of clients
        $scope.clients = Client.query(function () {
            //preselect first client in array
            $scope.selected.client = $scope.clients[0];
        });

        //necessary for data-binding so that it is accessible in child scopes.
        $scope.selected = {};

        //Current page
        $scope.currentPage = 'start.html';

        //For Client nav bar
        $scope.clientNavItems = [
            {destination: 'features.html', title: 'Features'},
        ];

        //Set current page
        $scope.setCurrent = function (title, destination) {
            if (destination !== '') {
                $scope.currentPage = destination;
            }

        };

        //Return path to current page
        $scope.getCurrent = function () {
            return 'partials/clients/' + $scope.currentPage;
        };

        //For nav bar highlighting of active page
        $scope.isActive = function (destination) {
            return $scope.currentPage === destination ? true : false;
        };

        //Reset current page on client change
        $scope.clientChange = function () {
            $scope.currentPage = 'start.html';
        };
    }); 
```

客户端控制器规范：

```
'use strict';

var RESPONSE = [
    {
        "id": 10,
        "name": "Client Plus",
        "ref": "client-plus"
    },
    {
        "id": 13,
        "name": "Client Minus",
        "ref": "client-minus"
    },
    {
        "id": 23805,
        "name": "Shaun QA",
        "ref": "saqa"
    }
];

describe('ClientController', function() {

    var scope;

    beforeEach(inject(function($controller, $httpBackend, $rootScope) {
        scope = $rootScope;
        $httpBackend.whenGET('http://localhost:3001/clients').respond(RESPONSE);
        $controller('ClientController', {$scope: scope});
        $httpBackend.flush();
    }));

    it('should preselect first client in array', function() {
        //this fails.
        expect(scope.selected.client).toEqual(RESPONSE[0]);
    });

    it('should set current page to start.html', function() {
        expect(scope.currentPage).toEqual('start.html');
    });
}); 
```

测试失败：

```
Chrome 25.0 (Mac) ClientController should preselect first client in array FAILED
    Expected { id : 10, name : 'Client Plus', ref : 'client-plus' } to equal { id : 10, name : 'Client Plus', ref : 'client-plus' }.
    Error: Expected { id : 10, name : 'Client Plus', ref : 'client-plus' } to equal { id : 10, name : 'Client Plus', ref : 'client-plus' }.
        at null.<anonymous> (/Users/shaun/sandbox/zong-admin-console-app/test/unit/controllers/ClientControllerSpec.js:43:39) 
```

有没有人知道为什么会发生这种情况？

另外 .. 由于我是编写 AngularJS 测试的新手，欢迎对我是否设置测试错误或是否可以改进提出任何评论。

更新：

包括客户端服务：

```
'use strict';

AdminConsoleApp.services.factory('Client', function ($resource) {
    //API is set up such that if clientId is passed in, will retrieve client by clientId, else retrieve all.
    return $resource('http://localhost:port/clients/:clientId', {port: ':3001', clientId: '@clientId'}, {

    });
}); 
```

另外，我通过比较 id 解决了这个问题：

```
it('should preselect first client in array', function () {
    expect(scope.selected.client.id).toEqual(RESPONSE[0].id);
}); 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-03-18T23:35:59.640

`toEqual`进行深度相等比较。这意味着当对象值的所有属性都相等时，对象被认为是相等的。

正如您所说，您正在使用资源，它为数组中的对象添加了几个属性。

所以这`{id:12}`变成了这个`{id:12, $then: function, $resolved: true}`不相等的。如果您只是测试是否正确设置了值，则 ID 检查应该没问题。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2014-10-14T21:06:36.920

## 简短的回答：

现有的答案都建议对您的对象进行字符串化，或创建自定义匹配器/比较函数。但是，有一种更简单的方法：`angular.equals()`在 Jasmine`expect`调用中使用，而不是使用 Jasmine 的内置`toEqual`匹配器。

`angular.equals()`将忽略 Angular 添加到您的对象的附加属性，而`toEqual`将无法进行比较，例如，`$promise`在其中一个对象上。

* * *

## 更长的解释：

我在 AngularJS 应用程序中遇到了同样的问题。让我们设置场景：

在我的测试中，我创建了一个本地对象和一个本地数组，并期望它们作为对两个 GET 请求的响应。之后，我将 GET 的结果与原始对象和数组进行了比较。我使用四种不同的方法对此进行了测试，只有一种给出了正确的结果。

**这是 foobar-controller-spec.js 的一部分：**

```
var myFooObject = {id: 1, name: "Steve"};
var myBarsArray = [{id: 1, color: "blue"}, {id: 2, color: "green"}, {id: 3, color: "red"}];

...

beforeEach(function () {
    httpBackend.expectGET('/foos/1').respond(myFooObject);
    httpBackend.expectGET('/bars').respond(myBarsArray);

    httpBackend.flush();
});

it('should put foo on the scope', function () {
    expect(scope.foo).toEqual(myFooObject);
    //Fails with the error: "Expected { id : 1, name : 'Steve', $promise : { then : Function, catch : Function, finally : Function }, $resolved : true } to equal { id : 1, name : 'Steve' }."
    //Notice that the first object has extra properties...

    expect(scope.foo.toString()).toEqual(myFooObject.toString());
    //Passes, but invalid (see below)

    expect(JSON.stringify(scope.foo)).toEqual(JSON.stringify(myFooObject));
    //Fails with the error: "Expected '{"id":1,"name":"Steve","$promise":{},"$resolved":true}' to equal '{"id":1,"name":"Steve"}'."

    expect(angular.equals(scope.foo, myFooObject)).toBe(true);
    //Works as expected
});

it('should put bars on the scope', function () {
    expect(scope.bars).toEqual(myBarsArray);
    //Fails with the error: "Expected [ { id : 1, color : 'blue' }, { id : 2, color : 'green' }, { id : 3, color : 'red' } ] to equal [ { id : 1, color : 'blue' }, { id : 2, color : 'green' }, { id : 3, color : 'red' } ]."
    //Notice, however, that both arrays seem identical, which was the OP's problem as well.

    expect(scope.bars.toString()).toEqual(myBarsArray.toString());
    //Passes, but invalid (see below)

    expect(JSON.stringify(scope.bars)).toEqual(JSON.stringify(myBarsArray));
    //Works as expected

    expect(angular.equals(scope.bars, myBarsArray)).toBe(true);
    //Works as expected
}); 
```

**作为参考，这是`console.log`使用`JSON.stringify()`and的输出`.toString()`：**

```
LOG: '***** myFooObject *****'
LOG: 'Stringified:{"id":1,"name":"Steve"}'
LOG: 'ToStringed:[object Object]'

LOG: '***** scope.foo *****'
LOG: 'Stringified:{"id":1,"name":"Steve","$promise":{},"$resolved":true}'
LOG: 'ToStringed:[object Object]'

LOG: '***** myBarsArray *****'
LOG: 'Stringified:[{"id":1,"color":"blue"},{"id":2,"color":"green"},{"id":3,"color":"red"}]'
LOG: 'ToStringed:[object Object],[object Object],[object Object]'

LOG: '***** scope.bars *****'
LOG: 'Stringified:[{"id":1,"color":"blue"},{"id":2,"color":"green"},{"id":3,"color":"red"}]'
LOG: 'ToStringed:[object Object],[object Object],[object Object]' 
```

*请注意字符串化对象如何具有额外的属性，以及如何`toString`产生无效数据，这将导致误报。*

## 综上所述，以下是对不同方法的总结：

1.  `expect(scope.foobar).toEqual(foobar)`: 这两种方式都失败了。在比较对象时，toString 表明 Angular 添加了额外的属性。比较数组时，内容似乎相同，但这种方法仍然声称它们是不同的。
2.  `expect(scope.foo.toString()).toEqual(myFooObject.toString())`: 这是双向的。然而，这是一个误报，因为对象没有被完全翻译。唯一的断言是这两个参数具有相同数量的对象。
3.  `expect(JSON.stringify(scope.foo)).toEqual(JSON.stringify(myFooObject))`：此方法在比较数组时给出了正确的响应，但对象比较与原始比较有类似的错误。
4.  `expect(angular.equals(scope.foo, myFooObject)).toBe(true)`:**这是做出断言的正确方法。**通过让 Angular 进行比较，它知道忽略后端添加的任何属性，并给出正确的结果。

*如果这对任何人都很重要，我正在使用 AngularJS 1.2.14 和 Karma 0.10.10，并在 PhantomJS 1.9.7 上进行测试。*

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-10-15T14:19:22.783

长话短说：添加`angular.equals`为茉莉花匹配器。

```
beforeEach(function(){
  this.addMatchers({
    toEqualData: function(expected) {
      return angular.equals(this.actual, expected);
    }
  });
}); 
```

因此，您可以按如下方式使用它：

```
it('should preselect first client in array', function() {
    //this passes:
    expect(scope.selected.client).toEqualData(RESPONSE[0]);

    //this fails:
    expect(scope.selected.client).toEqual(RESPONSE[0]);
}); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-05-28T19:00:29.000

我刚刚遇到了类似的问题，并基于多种方法实现了一个自定义匹配器，如下所示：

```
beforeEach(function() {
  this.addMatchers({
    toBeSimilarTo: function(expected) {
      function buildObject(object) {
        var built = {};
        for (var name in object) {
          if (object.hasOwnProperty(name)) {
            built[name] = object[name];
          }
        }
        return built;
      }

      var actualObject = buildObject(this.actual);
      var expectedObject = buildObject(expected);
      var notText = this.isNot ? " not" : "";

      this.message = function () {
        return "Expected " + actualObject + notText + " to be similar to " + expectedObject;
      }

      return jasmine.getEnv().equals_(actualObject, expectedObject);

    }
  });
}); 
```

然后以这种方式使用：

```
it("gets the right data", function() {
  expect(scope.jobs[0]).toBeSimilarTo(myJob);
}); 
```

当然，它是一个非常简单的匹配器，不支持很多情况，但我不需要比这更复杂的东西。您可以将匹配器包装在配置文件中。

检查[此答案](https://stackoverflow.com/questions/14541287/jasmine-toequal-for-complex-objects-mixed-with-functions)以获取类似的实现。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-06T06:01:17.573

我遇到了同样的问题，所以我只调用`JSON.stringify()`了要比较的对象。

```
expect( JSON.stringify( $scope.angularResource ) == JSON.stringify( expectedValue )).toBe( true ); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-26T23:02:44.483

有点冗长，但在期望失败时会产生有用的信息：

```
expect(JSON.parse(angular.toJson(resource))).toEqual({ id: 1 }); 
```

解释：

`angular.toJson`将剥离所有角度特定属性的资源，例如`$promise`

`JSON.parse`将 JSON 字符串转换回普通对象（或数组），现在可以将其与另一个对象（或数组）进行比较。

# java - 大批？参数数组？

> ID：15487518
> 
> 赞同：0
> 
> 时间：2013-03-18T21:43:23.187
> 
> 标签：java, arrays, string, args

我正在开发一个地址簿程序，该程序读取 csv 文件并打印联系人，包括他们的姓氏、名字、地址、城市、州、邮编和电话号码。我已经得到了一段代码，我已经让这部分代码工作了。

到目前为止，我已经阅读了该文件并将内容写入了一个 newFile。但是，有一部分代码我不完全确定它的作用。因为我是编程新手，所以我不想只是将简单有效的代码拼凑在一起，我想了解发生了什么。我感到困惑的部分就在 main 语句之后（main 之后的前 9 行开始于 String [] lname, fname, street.....）

请，任何帮助将不胜感激。

```
public class Main 
{
public static void main (String [] args) throws FileNotFoundException
{
    String [] lName, fName, street, city, state, zip, phone;

    lName = new String[20];
    fName = new String[20];
    street = new String[50];
    city = new String[20];
    state = new String[20];
    zip = new String[12];

    System.out.println("ADDRESS BOOK CONTENTS: ");

    Scanner inFile;

    try 
    {
        inFile = new Scanner (new File("src/addresses.csv"));
        String temp;

        while (inFile.hasNextLine())
        {
            temp = inFile.nextLine();
            System.out.println("Contact:    " + temp);              
        }   

        System.out.println(inFile);

    }

        catch (FileNotFoundException e) 
        {
            //catch block
            e.printStackTrace();
        }
    try
    {
    FileInputStream fileIn = new FileInputStream("src/addresses.csv");
    FileOutputStream fileOut = new FileOutputStream("src/newfile.csv");

    int c;
    while ((c = fileIn.read()) != -1)
    {
        fileOut.write(c);
    }

    fileIn.close();
    fileOut.close();
    }

     catch (FileNotFoundException exception1) 
      {
         System.err.println("FileCopy: " + exception1);
      } 
      catch (IOException exception1) 
      {
         System.err.println("FileCopy: " + exception1);
      }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:45:18.793

这只是声明了一些类型的变量，`String[]`它是一个字符串数组。

以下几行将`array`具有初始容量的新变量分配给这些变量。

这种语法先声明变量，然后赋值，但您也可以在一个语句中进行声明和赋值，如下所示：

```
String[] lName = new String[20]; 
```

这两种语法是等价的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:45:45.977

代码的那些部分是一个数组创建语句。

```
lName = new String[20]; 
```

意味着创建一个包含 20 个元素的新字符串数组并将其分配给变量`lName`

只是为了给你更多的数组示例开始：

```
lName[4] = "john"; 
```

表示将字符串值“john”分配给数组的第 5 个（不是第 4 个）元素

```
String name = lName[0]; 
```

表示检索数组的第一个元素并将其分配给名为的变量`name`

# jquery - 使用动态生成的字段自动完成

> ID：15487523
> 
> 赞同：0
> 
> 时间：2013-03-18T21:43:42.657
> 
> 标签：jquery, dynamic, input, autocomplete

我有一个 jQuery 自动完成功能，非常适合静态命名的文本框。

我的问题是我的文本框是由一个 jquery 脚本生成的，该脚本随后创建了一个增量编号的名称。因此，我需要具有自动完成功能的每个输入框都是不同的。

如何编辑我的自动完成脚本以适用于具有特定名称的任何输入框？

我正在使用 codeigniter 和 jquery 1.7。

我的看法是：

```
<table class="authors-list">
  <tr><td></td><td>Product</td><td>Qty</td><td>Price/Cube</td><td>Discount</td><td>treated</td></tr>
  <tr>
   <td><a class="deleteRow"> <img src="<?php echo base_url() ?>application/assets/images/no.jpg" /></a></td>
   <td><input type="text" id="product" name="product" /></td>
   <td><input type="text" id="qty" name="qty" /></td>
   <td><input type="text" id="pricepercube" name="pricepercube" /></td>
   <td><input type="text" id="discount" name="discount" /></td>
   <td><input type="text" id="treated" name="treated" /></td>
</tr>
</table> 
```

// 生成附加行的脚本。输入名称附加计数器值

```
<script type="text/javascript">
var counter = 1;
jQuery("table.authors-list").on('change','input[name^="qty"]',function(event){
    event.preventDefault();
    counter++;
    var newRow = jQuery('<tr>'+
      ' <td><a class="deleteRow"> <img src="<?php echo base_url() ?>application/assets/images/no.jpg" /></a></td>' +
      ' <td><input type="text" id="product_' +  counter + '" name="product_' +  counter + '" class="ui-input-text ui-body-c ui-corner-all ui-shadow-inset" /></td>' +
      ' <td><input type="text" id="qty_' + counter + '" name="qty_' + counter + '" class="ui-input-text ui-body-c ui-corner-all ui-shadow-inset" /></td>'+
      ' <td><input type="text" id="pricepercube_' + counter + '" name="pricepercube_' + counter + '" class="ui-input-text ui-body-c ui-corner-all ui-shadow-inset" /></td>'+
      ' <td><input type="text" id="discount_' + counter + '" name="discount_' + counter + '" class="ui-input-text ui-body-c ui-corner-all ui-shadow-inset" /></td>'+
      ' <td><input type="text" id="treated_   ' + counter + '" name="treated_   ' + counter + '" class="ui-input-text ui-body-c ui-corner-all ui-shadow-inset" /></td>'+
      ' </tr>');
    jQuery('table.authors-list').append(newRow);
});

jQuery("table.authors-list").on('click','.deleteRow',function(event){
 if ($(this).parents('table').find('tr').length >  2) { 
    $(this).closest('tr').remove();
 }else{
  alert ('Form must have at least one row')
 }

});
</script> 
```

//自动完成脚本。当前适用于静态创建的输入`product`

```
<script type="text/javascript">
      $(function(){
        $("#product").autocomplete({
          source: "get_sku_codes",
          messages: {
          noResults: '',
          results: function() {}
      }       

        });
      });
</script> 
```

如何修改我的自动完成字段以引用正确的输入字段 - 输入字段具有正确的名称？

我可以做类似的事情：`'input[name^="qty"]'`还是更好用`$this`？

如前所述，它适用于静态字段`product`，但我需要它与动态创建的字段一起使用，这将是: `product_1`,`product_2`等`product_3`...请记住，我不确定用户将添加多少行。

**根据 Beardfist 更新**

```
<script type="text/javascript">
var counter = 1;
jQuery("table.authors-list").on('change','input[name^="qty"]',function(event){
    event.preventDefault();
    counter++;
    var newRow = jQuery('<tr>'+
      ' <td><a class="deleteRow"> <img src="<?php echo base_url() ?>application/assets/images/no.jpg" /></a></td>' +
      ' <td><input type="text" id="product_' +  counter + '" name="product_' +  counter + '" class="ui-input-text ui-body-c ui-corner-all ui-shadow-inset" /></td>' +
      ' <td><input type="text" id="qty_' + counter + '" name="qty_' + counter + '" class="ui-input-text ui-body-c ui-corner-all ui-shadow-inset" /></td>'+
      ' <td><input type="text" id="pricepercube_' + counter + '" name="pricepercube_' + counter + '" class="ui-input-text ui-body-c ui-corner-all ui-shadow-inset" /></td>'+
      ' <td><input type="text" id="discount_' + counter + '" name="discount_' + counter + '" class="ui-input-text ui-body-c ui-corner-all ui-shadow-inset" /></td>'+
      ' <td><input type="text" id="treated_   ' + counter + '" name="treated_   ' + counter + '" class="ui-input-text ui-body-c ui-corner-all ui-shadow-inset" /></td>'+
      ' </tr>');
    jQuery('table.authors-list').append(newRow);

        $("#product_"+counter).autocomplete({ 
          source: "get_sku_codes",
          messages: {
          noResults: '',
          results: function() {}
      }       

        });

});

jQuery("table.authors-list").on('click','.deleteRow',function(event){
 if ($(this).parents('table').find('tr').length >  2) {  //get number of rows(TR's) in table 
    $(this).closest('tr').remove();
 }else{
  alert ('Form must have at least one row') // alert if only one row left in table
 }

});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T09:46:17.547

我认为在这种情况下你不需要计数器。您应该使用类 (.) 而不是 ID (#) 进行自动完成。

像这样： $(".product").autocomplete({ ...

然后，当您使用 .append() 动态添加新行时，您需要在附加行之后（而不是之前）立即放置该自动完成功能，以便每次添加新行时都可以使用新 DOM。

# javascript - 骨干关系 toJSON 不会呈现所有属性

> ID：15487524
> 
> 赞同：3
> 
> 时间：2013-03-18T21:43:47.110
> 
> 标签：javascript, backbone.js, asynchronous, backbone-views, backbone-relational

我已经阅读[了这个](https://stackoverflow.com/questions/10262498/backbone-model-tojson-doesnt-render-all-attributes-to-json)和[这个](https://stackoverflow.com/questions/10749639/backbone-js-tojson-not-including-attributes)问题，但它没有帮助。我以这种方式调用了 fetchRelated：

```
 initialize: function(){
           Artist.fetchRelated(
                'albums',
                {success: this.render}
           );
  },

  render: function(){                                                                   
           this.model.get('albums').each(function(album){             
               console.log(album);                                    
               console.log(album.toJSON());                           
               console.log(album.get('title'));                       
          });                                                        
          $(this.el).html(this.template({                            
              current_user: App.current_user.toJSON(),          
              artist: this.model.toJSON(),                           
              albums: this.model.get('albums'),                      
          }));                                                       

          return this;
      }, 
```

第`console.log(album)`一个正确返回具有所有属性的有效专辑模型，但下一次使用 toJSON 函数调用 log 却没有。它只是返回 id。因此，当我尝试在下一个日志中检索专辑的标题时，它返回未定义。

另外它告诉我我不能在模板调用中调用 toJSON() 给艺术家，因为它是未定义的，尽管我只是用它来获取专辑......

我确定我的问题在于我仍然不习惯的回调地狱，但我不知道如何解决它。

编辑1：

对于集合中的每个专辑，console.log(album) 响应是这样的：

```
_changing: false
_events: Object
_isInitialized: true
_pending: false
_permitsUsed: 0
_previousAttributes: Object
_queue: Backbone.BlockingQueue
_relations: Array[2]
attributes: Object
    artist: child
    description: "asdasd"
    id: 1
    image: ""
    release_year: 1950
    resource_uri: "/albums/1"
    songs: child
    title: "asdasd"
changed: Object
cid: "c8"
collection: child
id: 1
__proto__: Surrogate 
```

编辑2：

我已经尝试更改骨干关系提供的 toJSON 函数，但我不明白为什么这样做可以解决我的问题，因为我有其他模型并且这个函数可以正常工作而没有任何覆盖。

我尝试`_.clone(this.attributes)`从我自己的 toJSON 函数返回，因为`console.log(this.attributes)`它给出了正确的响应，但由于某种原因它返回相同。

```
artist: Object
id: 1
songs: Array[0]
__proto__: Object 
```

这是我的关系的样子。

```
 relations: [{
       type: Backbone.HasMany,
       key: 'songs',
       relatedModel: SongModel,
       collectionType: Songs,
       reverseRelation:{
           key: 'album'
       }
   }], 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T15:39:46.150

我遇到了同样的问题，我发现您可以使用

```
render: function(){                                                                   
    this.model.get('albums').each(function(album){   
        album.fetch({
            success: function(fetchedAlbum) {
                console.log(fetchedAlbum.toJSON());
            }
        });
    });
}); 
```

这将使用获取的关系打印获取的专辑......

**我不认为这是一种解决方案**，因为使用骨干关系的主要目的是避免这种麻烦。

如果我找到解决方案将更新此：D 真正的解决方案

# ruby-on-rails - 无法覆盖变量 - 将 Zurb-Foundation 添加到 Spree

> ID：15487528
> 
> 赞同：1
> 
> 时间：2013-03-18T21:43:57.197
> 
> 标签：ruby-on-rails, asset-pipeline, spree, zurb-foundation

我正在尝试在 Zurb Foundation Framework 的帮助下重写我们商店的前端，可悲的是，我遇到了很多问题。

我在我的 gemfile 中包含了*“zurb-foundation”* gem，并在 assets/store 目录中的 all.js 和 all.css 中添加了以下内容

### 资产/样式表/商店/all.css

```
*= require foundation
@import 'foundation'; 
```

### 资产/javascripts/store/all.js

```
//= require foundation
(document).foundation(); 
```

到目前为止，我可以使用 zurb 文档中描述的类——而且，框架中包含的不同项目（Topbar、Orbit 等）运行良好。

可悲的是，我遇到了这个问题，我无法覆盖变量。我在 stylesheets/store 目录中创建了一个文件**“custom_variables.css.scss”**来处理这些问题 - 但是如果我在那里覆盖它们，它们似乎不会生效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T02:30:15.293

不知道为什么这不包含在 Rails 版本中。您可以添加由 Compass 自动创建的文件，名为`_settings.scss`

您可以从 github 下载该文件：

[settings.scss 的 Github 文件](https://github.com/zurb/foundation/blob/master/templates/project/scss/_settings.scss)

并将其放在您的`app/assets/stylesheets`

然后将以下行添加到您的`foundation_and_overrides.scss`上面`@import 'foundation';`

@import '设置';

它现在应该是这样的：

```
// Settings file to override Foundation variables

// You can find the variables for each component at the bottom of their
// doc page. We tried to name them to where they'd make sense just by reading them.
// Go to http://foundation.zurb.com/docs/ to find what you need.

@import 'settings'
@import 'foundation'; 
```

现在您可以取消注释您想要更改的内容，而不是尝试覆盖样式。这就是 Compass 默认情况下的工作方式。`@import 'foundation';`我认为关键是在调用之前更改 sass 变量。否则，您只是在写出所有用于基础的 css 后更改变量。

使用 Foundation 4.0.8 对我来说效果很好。

# visual-c++ - HTTP+SSL 通过 curl 和 Visual C++ 2010

> ID：15487529
> 
> 赞同：0
> 
> 时间：2013-03-18T21:43:57.383
> 
> 标签：visual-c++, ssl, curl

我有一个带有此证书的自签名证书和基于 apache 2.x 的网站。只想通过 SSL 从我的软件访问此站点。

执行以下操作：

```
int _tmain(int argc, _TCHAR* argv[])
{

CURL *curl;
  CURLcode res;

  curl_global_init(CURL_GLOBAL_DEFAULT);

  curl = curl_easy_init();
  if(curl) {
    curl_easy_setopt(curl, CURLOPT_URL, "https://mysite.com");
    curl_easy_setopt(curl, CURLOPT_CAINFO, "n.crt");
 curl_easy_setopt(curl, CURLOPT_SSL_VERIFYPEER, 1L);
 curl_easy_setopt(curl, CURLOPT_SSL_VERIFYHOST, 0L);
curl_easy_setopt(curl, CURLOPT_CAPATH, "D:\\");
 curl_easy_setopt(curl, CURLOPT_VERBOSE, 1L) ;
 curl_easy_setopt(curl, CURLOPT_SSLVERSION, CURL_SSLVERSION_DEFAULT); 

    /* Perform the request, res will get the return code */ 
    res = curl_easy_perform(curl);
    /* Check for errors */ 
    if(res != CURLE_OK)
      fprintf(stderr, "curl_easy_perform() failed: %s\n",
              curl_easy_strerror(res));

    /* always cleanup */ 
    curl_easy_cleanup(curl);
  }

  curl_global_cleanup();

    return 0;
} 
```

但每次我得到：

```
* About to connect() to mysite.com port 443 (#0)
*   Trying 1.1.1.1... * connected
* Connected to mysite.com (1.1.1.1) port 443 (#0)
* error setting certificate verify locations:
  CAfile: n.crt
  CApath: D:\

* Closing connection #0
* Problem with the SSL CA cert (path? access rights?)
curl_easy_perform() failed: Problem with the SSL CA cert (path? access rights?)
Press any key to continue . . . 
```

你能否请教，我做错了什么？

PS：

*   Win7 x64
*   MSVC++ 2010
*   curl 7.19.3 (i386-pc-win32) libcurl/7.19.3 OpenSSL/0.9.8j 协议：tftp ftp telnet dict ldap http 文件 https ftps

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T10:12:54.167

找到 n.crt 的位置。当可执行文件运行时，所有文件检查都与其路径相关。因此，要么将 n.crt 放在可执行文件的文件夹中，要么在设置 CURLOPT_CAINFO 时放置文件的绝对路径。否则使用证书信息文件的相对路径。

# android - Facebook 3.0：如何检测用户取消 android 上的权限对话框

> ID：15487530
> 
> 赞同：3
> 
> 时间：2013-03-18T21:43:58.387
> 
> 标签：android, facebook, permissions, dialog

我无法知道如何检测用户已取消 Android 上的权限请求对话框。

有谁知道我需要调用什么函数来检查这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-13T13:53:26.417

*首先要做的事情：这个问题有点老了，这个答案假设您使用的是更新的版本（我目前使用的是 3.7）。使用 SDK 的 3.0 版本可能可以做到这一点，但您应该尝试将您在项目中使用的 Facebook SDK 更新到较新的版本，因为它们自 3.0 以来添加了很多功能和修复。*

我正在使用 a`Session.StatusCallback`来监听`Session`生命周期变化，我将其注册到`UiLifecycleHelper`为我的活动提供更新的 a 中。

当`UiLifecycleHelper`用户完成与权限对话框的交互时，将触发更新，在它已注册的实例`Session.StatusCallback.call(Session, SessionState, Exception)`上调用您的方法。`Session.StatusCallback`为了检测用户取消权限请求，您可以处理`Exception`您正在传递给此方法的内容。

在我的代码中，我在发布时这样做，但读取权限请求应该类似：

```
@Override
public void call(Session session, SessionState state,Exception exception) 
{
    if(exception != null)
    {
        if(exception instanceof FacebookOperationCanceledException)
        {
            //make sure we don't continue posting
            posting = false;
            //the user cancelled it, no need to show a message or do anything
            return;
        }
        else if(exception instanceof FacebookAuthorizationException)
        {
            Toast.makeText(FacebookActivity.this, "Failed to obtain Facebook permission to post on your behalf", Toast.LENGTH_LONG).show();
            //don't continue posting, let the user retry it if he/she wants to
            posting = false;
            return;
        }
    }

    //continue with checking that all permissions have been granted and post the action
} 
```

我在[这个问题](https://stackoverflow.com/questions/18538730/facebook-session-cancel-dialog)的答案中找到了信息，但我的处理方式`FacebookAuthorizationException`不同。

此外，如果您`Session`在发布时恢复或使用其他扩展权限，我发现检查 SDK 给出的结果很有用，因为用户可能已经从其他地方取消了权限，例如 Facebook 网站。当后者发生时，您`Session`在应用程序中的对象将表明它仍然拥有该权限（例如`publish_actions`），而实际上它不再拥有该权限。当`Session`对象被缓存并且其中的数据不是新鲜的时，就会发生这种情况。

这就是我正在做的检查权限是否丢失（即它已从其他地方删除，而不是从应用程序中删除）：

```
//note:
//I'm returning null further down the line because
//this code is run in an AsyncTask<Void,Void,Void>

Request request = new Request(
    session,
    graphPath,
    params,
    HttpMethod.POST);
Response response = request.executeAndWait();
GraphObject responseObject = response.getGraphObject();

if(responseObject == null)
{
    FacebookRequestError fbre = response.getError();
    if((fbre!=null) && (fbre.getCategory() == Category.PERMISSION))
    {
        requestFacebookPermissions(session);
        return null;
    }
    else
    {
        postFailed();
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:47:52.893

当 Facebook 权限对话框被取消时，您最好将一些回调合并到 facebook 源中以进行处理。

您可以在此处获取最新源：

[https://github.com/facebook/facebook-android-sdk/tree/master/facebook](https://github.com/facebook/facebook-android-sdk/tree/master/facebook)

# android - play framework 1.2.5如何处理json请求

> ID：15487535
> 
> 赞同：0
> 
> 时间：2013-03-18T21:44:36.380
> 
> 标签：android, playframework, httprequest, playframework-1.x

我需要将带有`json`数据参数的请求发送`android app`到`play framework 1.2.5`Web 服务。我可以通过发送普通参数作为键值来做到这一点。但我想将这些参数作为 json 对象发送。我不知道如何定义 url in`routes`和控制器静态函数来处理 json 请求`play framework 1.2.5`。

```
public ConnectService(String sngUrl,String searchkey,Double longitude,Double latitude,Double radius){
    try {
        jsonObject.put("searchkey", searchkey);
        jsonObject.put("longitude", longitude); 
        jsonObject.put("latitude", latitude);
        jsonObject.put("radius", radius);
    } catch (JSONException e) {
        System.out.println("HATA 1 : "+e.getMessage());
        e.printStackTrace();
    }

    jArrayParam = new JSONArray();
    jArrayParam.put(jsonObject); 

    List<NameValuePair> nameValuePair = new ArrayList<NameValuePair>();
    nameValuePair.add(new BasicNameValuePair("jsonRequest", jsonObject.toString()));
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(sngUrl);
    httppost.addHeader("Content-Type", "application/json");         
    try {
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePair,"UTF-8" ));//HTTP.UTF_8   
        System.out.println("URLLLLLLLL : "+httppost.getRequestLine());
        response = httpclient.execute(httppost);                 
        entity = response.getEntity();

    } catch (UnsupportedEncodingException e) {
        System.out.println("HATA 2 : "+e.getMessage());
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        System.out.println("HATA 3 : "+e.getMessage());
        e.printStackTrace();
    } catch (IOException e) {
        System.out.println("HATA 4 : "+e.getMessage());
        e.printStackTrace();
    }
    finally{

    }

} 
```

这是我的路线和控制器方法

```
POST     /search                                       Application.search(jsonRequest)

//not for json request
public static void searchproduct(String searchkey,Double longitude,Double latitude,Double radius){
    String d=searchkey+" "+longitude+" "+latitude+" "+radius ;
    renderJSON(d);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:30:23.917

我认为您在 Play 应用程序中声明 Routes 和 Action 时犯了错误。

来自您的 Android 应用程序的 HTTP 响应有一个名为`jsonRequest`. 因此，您在 Play 应用程序中的操作也应该被接受一个名为的查询参数`jsonRequest`。因此，在您的 Play 应用程序中，解决方案可能如下所示：

**路线**：

```
# Associate to searchproduct action method
POST     /search        Application.searchproduct 
```

**控制器**：

```
//not for json request
public static void searchproduct(String jsonRequest) {
    // convert string to JSON object using org.json.JSONObject
    org.json.JSONObject jsonObject = new org.json.JSONObject(jsonRequest);

    // get all the json element
    String searchkey = jsonObject.getString("searchkey")
    Double radius = jsonObject.getDouble("radius")
    ...... // get the rest element

    // here maybe the rest of logic such as, construct JSON and render
    ......
} 
```

[这篇文章](https://stackoverflow.com/questions/8722733/getting-string-value-from-json-object-android)可能对您有用。

# sql-server - 在一个 SQL Server 视图中显示多个表

> ID：15487536
> 
> 赞同：0
> 
> 时间：2013-03-18T21:44:37.300
> 
> 标签：sql-server, tsql, sql-server-2005

我有十个表值函数，它们返回具有相同布局的表。我想在 SQL Server 2005 的视图中显示所有十个函数的输出。

当我在视图设计中尝试这样...

```
select col1, col2... coln from dbo.tableFunc1
Union
select col1, col2... coln from dbo.tableFunc2 
```

我收到消息：

> *包含联合的视图不能在表格和图表窗格中以图形方式表示。*

有什么方法可以在视图中聚合所有这些函数，还是我必须编写一个附加函数来聚合函数，然后只查看聚合函数的输出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-24T20:11:38.767

没有必要做任何事情！

重新阅读警告消息，它只是告诉您该视图无法以图形方式表示。这并不意味着您的视图无效，您需要做的就是忽略该消息并继续工作。您的视图仍将被创建，并且仍然可以像任何其他视图一样使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T22:59:28.610

为什么要为多个功能使用视图？为什么不直接从表中创建视图来执行功能的逻辑？EG：代替

```
select col1, col2
from dbo.tablefunc1
union
select col1, col2
from dbo.tablefunc2 
```

做

```
Select col1, col2
from tableforfunc1 1
   join tableforfunc2 2 on 1.id = 2.id
union
Select col1, col2
from tablefunc2 
```

如果由于创建表函数的逻辑而这太难了，为什么不重新制作一个更大的表函数或 proc 然后结合所有对象呢？

我在 SQL Server 2012 中使用一些基本的测试表函数进行了尝试，并且它们有效，所以我想知道这是否是 2005 的限制。

# python - 如何使用 Tastypie 在 Python (Django) 中基于 DateTimeField 范围过滤对象

> ID：15487537
> 
> 赞同：2
> 
> 时间：2013-03-18T21:44:37.107
> 
> 标签：python, django, datetime, filtering, tastypie

**如何使用Tastypie**基于**日期时间字段**范围过滤对象。

 **我有一个**帖子模型**：

```
class Post(models.Model):
     title = models.CharField(max_length=40)
     postTime = models.DateTimeField(auto_now_add=True)
     description = models.CharField(max_length=140) 
```

帖子对象通过**Tastypie**检索。我要检索的对象范围是从今天创建的所有对象到 3 天前创建的所有对象。所以我尝试从查询集中过滤对象，如下所示

```
RecentPosts(ModelResource):
     class Meta:
          queryset= Post.objects.filter(postTime__range=(date.today(), date.today() -timedelta(days=3)))
          resource_name = 'recent-posts'
          fields = ['id','postTime']
          authentication = BasicAuthentication()
          authorization =DjangoAuthorization()
          serializer = Serializer(formats=['json'])
          include_resource_uri = False
          filtering = {
                            'postTime': ALL,
                            'description': ALL,
          } 
```

即使这样做了，我也无法检索对象。我还能怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T22:32:41.423

你试过用

```
filtering = {
   "postTime": ['gte', 'lte'],
} 
```

然后在调用资源的查询中添加

```
http://your.query/?postTime__lte=<SOME DATE>&postTime__gte=<SOME DATE> 
```

你也可以选择

```
filtering = {
   "postTime": ['gte',],
} 
```

或者

```
filtering = {
   "postTime": ['lte',],
} 
```

通过适当的查询。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T18:20:53.597

在花了几个小时摆弄不同的解决方案之后，我终于找到了一个有效的解决方案。我所做的是，我没有从查询集中进行过滤，而是在**object_get_list**中进行了过滤。这是我的解决方案。还要确保你有正确的进口

```
 from datetime import datetime, timedelta

 RecentPosts(ModelResource):
 class Meta:
      queryset= Post.objects.all()
      resource_name = 'recent-posts'
      fields = ['id','postTime']
      authentication = BasicAuthentication()
      authorization =DjangoAuthorization()
      serializer = Serializer(formats=['json'])
      include_resource_uri = False
      filtering = {
                        'postTime': ALL,
                        'description': ALL,
      }
 get_object_list(self, request):
      return super(RecentPosts, self).get_object_list.filter(postTime__range=(datetime.now() - timedelta(days=3), datetime.now())) 
```

这会将当前日期创建的所有对象返回到 3 天前的所有对象。试试这个解决方案，让我知道它是否适合你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-28T09:24:36.523

我有一个案例，我需要在查询本身中处理这个问题。基本上我想在查询中使用范围。我找不到任何答案。我已经通过以下方式完成了。可能会帮助某人：

```
filtering = {
  "postTime": ['range']
} 
```

查询使用：

```
http://your.query/?postTime__range=<SOME DATE>,<SOME DATE> 
```

返回这两天之间的所有记录！**

# cassandra - Pig + Cassandra 消息长度超出

> ID：15487540
> 
> 赞同：2
> 
> 时间：2013-03-18T21:44:43.513
> 
> 标签：cassandra, apache-pig, thrift

我有一个 Cassandra 数据库，它分布在多个节点上。当用 Pig 查询它时，由 Pig 创建的 mapreduce 作业在 hadoop 节点上“崩溃”，但有以下异常：

```
2013-03-18 00:57:19,374 WARN org.apache.hadoop.mapred.Child：运行孩子时出错
java.lang.RuntimeException：org.apache.thrift.TException：超出消息长度：674
        在 org.apache.cassandra.hadoop.ColumnFamilyRecordReader$StaticRowIterator.maybeInit(ColumnFamilyRecordReader.java:384)
        在 org.apache.cassandra.hadoop.ColumnFamilyRecordReader$StaticRowIterator.computeNext(ColumnFamilyRecordReader.java:390)
        在 org.apache.cassandra.hadoop.ColumnFamilyRecordReader$StaticRowIterator.computeNext(ColumnFamilyRecordReader.java:313)
        在 com.google.common.collect.AbstractIterator.tryToComputeNext(AbstractIterator.java:143)
        在 com.google.common.collect.AbstractIterator.hasNext(AbstractIterator.java:138)
        在 org.apache.cassandra.hadoop.ColumnFamilyRecordReader.getProgress(ColumnFamilyRecordReader.java:103)
        在 org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigRecordReader.getProgress(PigRecordReader.java:169)
        在 org.apache.hadoop.mapred.MapTask$NewTrackingRecordReader.getProgress(MapTask.java:514)
        在 org.apache.hadoop.mapred.MapTask$NewTrackingRecordReader.nextKeyValue(MapTask.java:539)
        在 org.apache.hadoop.mapreduce.MapContext.nextKeyValue(MapContext.java:67)
        在 org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:143)
        在 org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)
        在 org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
        在 org.apache.hadoop.mapred.Child$4.run(Child.java:255)
        在 java.security.AccessController.doPrivileged（本机方法）
        在 javax.security.auth.Subject.doAs(Subject.java:396)
        在 org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
        在 org.apache.hadoop.mapred.Child.main(Child.java:249)
引起：org.apache.thrift.TException：超出消息长度：674，readLength：192
        在 org.apache.thrift.protocol.TBinaryProtocol.checkReadLength(TBinaryProtocol.java:393)
        在 org.apache.thrift.protocol.TBinaryProtocol.readBinary(TBinaryProtocol.java:363)
        在 org.apache.cassandra.thrift.Column.read(Column.java:535)
        在 org.apache.cassandra.thrift.ColumnOrSuperColumn.read(ColumnOrSuperColumn.java:507)
        在 org.apache.cassandra.thrift.KeySlice.read(KeySlice.java:408)
        在 org.apache.cassandra.thrift.Cassandra$get_range_slices_result.read(Cassandra.java:12905)
        在 org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:78)
        在 org.apache.cassandra.thrift.Cassandra$Client.recv_get_range_slices(Cassandra.java:734)
        在 org.apache.cassandra.thrift.Cassandra$Client.get_range_slices(Cassandra.java:718)
        在 org.apache.cassandra.hadoop.ColumnFamilyRecordReader$StaticRowIterator.maybeInit(ColumnFamilyRecordReader.java:346)
        ... 17 更多

```

最突出的是`org.apache.thrift.TException: Message length exceeded: 674`。每次启动 Pig 查询时，异常中吐出的消息长度都会有所不同。从任务在 hadoop 节点上初始化的那一刻起，它需要不到一秒钟的时间来触发异常。

Cassandra 填充了大约 1GB 的数据。用于导致此异常的 Pig 查询如下：

```
rows = LOAD 'cassandra://[keyspace here]/[cf here]' USING org.apache.cassandra.hadoop.pig.CassandraStorage() AS([column definitions here]);
testvals = foreach 行生成 mycolumn.$1;
名称 = 限制 testvals 57343；
转储名称；

```

为什么你问 57343 限制？任何低于 57343 的数字都会让 Pig 作业成功完成，任何 >= 57343 的数字都会让它崩溃。Cassandra 附带的 Pig 示例也因相同的异常而退出。此外，在 Cassandra 中使用较小的数据集可以让 Pig 成功完成工作。

我发现了一些类似的错误，Thrift 抱怨消息长度，但通常这是超过 cassandra.yaml 中指定的最大消息长度时。在这种情况下，cassandra.yaml 中的消息长度设置为 64MB 以测试它是否有帮助，但仍然发生相同的异常。此外，异常指出消息的长度太长，即使在异常中声明消息本身在这种情况下只有 674 个字节！

我尝试了什么：

*   增加cassandra.yaml中的`thrift_max_message_length_in_mb`和 值`thrift_framed_transport_size_in_mb`
*   重建 Thrift jar
*   删除 Cassandra 键空间，然后重新填充它

设置：

*   Hadoop 1.0.4
*   卡桑德拉 1.2.2
*   猪 0.11.0

**TL；DR** Pig + Cassandra 在更大的数据集上崩溃 ( `org.apache.thrift.TException: Message length exceeded: 674`)。较小的数据集或较大数据集的较小子集可以正常工作。

**编辑** Cassandra 日志显示没有错误。它按照作业的要求提供切片，并且在 Cassandra 执行此操作时作业终止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-15T15:21:39.470

如果此列族使用宽行或有很多列，那么您可能想尝试传递 widerows 选项。

```
set cassandra.input.widerows true;
data = load 'cassandra://[keyspace here]/[cf here]/?widerows=true' 
            using org.apache.cassandra.hadoop.pig.CassandraStorage(); 
```

# java - 将对象声明为 volatile

> ID：15487544
> 
> 赞同：15
> 
> 时间：2013-03-18T21:45:05.297
> 
> 标签：java, multithreading, volatile

如果在 Java 中声明一个成员变量为 volatile，这是否意味着该对象的所有数据都存储在 volatile 内存中，或者该对象的引用存储在 volatile 内存中？

例如，如果我有以下课程：

```
class C{
   int i = 0;
   char c = 'c';
} 
```

如果我声明它的一个实例如下：

```
private volatile C obj; 
```

这会将引用存储`obj`在易失性内存中，还是将`obj`'s 的数据（`obj.i`和`obj.c`）存储在`volatile`内存中？

它是否使`obj.c`线程`obj.i`安全？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-18T21:54:24.193

是的，只有对象引用被 JVM 认为是易失的，而不是对象数据本身，它将驻留在堆上。如果您要求堆上对象的成员变量是易变的，您当然可以将关键字应用于这些原语

```
class C {
   volatile int i = 0;
   volatile char c = 'c';
} 
```

回复：您关于这是否使变量线程安全的问题取决于您如何使用该变量。正如@gerrytan 从 Oracle 文档中指出的那样，volatile 关键字确实有助于读取或写入原子性，但是请注意，这与它始终是线程安全的不同。考虑以下代码...

```
if(obj != null) {
    obj.doSomething();
} 
```

执行空检查的线程仍然有可能在执行之前被中断`obj.doSomething()`，而另一个线程设置`obj = null`。这里需要一些其他机制，例如`synchronized`块。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T21:49:59.907

```
private volatile C obj; 
```

那只会变得`obj`不稳定。

> 它是否使 obj.c 和 obj.i 线程安全？

不，要使它们成为线程安全的，您必须同步对它们的访问。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T21:50:55.610

这只会使对象引用*volatile*。为了使 obj.i 和 obj.c 也*易变*，您必须明确地使它们*易变*

```
class C{
   volatile int i = 0;
   volatile char c = 'c';
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-14T10:06:55.657

如果在 Java 中声明一个成员变量为 volatile，这是否意味着该对象的所有数据都存储在 volatile 内存中，或者该对象的引用存储在 volatile 内存中？

当我们将对象声明为易失性时，我们实际上是在告诉底层处理器如何使用易失性对象。每次被 CPU 指令读取时，都会从堆中调用一个新副本，并且每次在对象上完成写入时都会保存它堆并可供其他线程使用。因此，处理器不会从缓存中选择旧值，也不会写入缓存并等待缓存写回堆。

它是否使 obj.c 和 obj.i 线程安全？不。它只是保证当你读取对象时你总是有一个新的副本。而且很有可能当你使用基于变量值的变量和处理逻辑时，有人可能已经在后台更改了值，当你更新它，你正在更新一个不同的值。

# c#-4.0 - 为什么 System.Buffer.BlockCopy 需要 int 而不是 long？

> ID：15487546
> 
> 赞同：2
> 
> 时间：2013-03-18T21:45:06.547
> 
> 标签：c#-4.0, stream

是否有理由`System.Buffer.BlockCopy`接受`int`参数而不是`long`副本的偏移量/长度？流通常与 一起使用`long`，为什么`BlockCopy`也不会有需要的重载`long`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T21:54:23.517

因为在 .NET 4.5 之前，任何对象都不能超过 2 GB。所以没有理由有超过一个 int 来表示长度。

即使在 .NET 4.5 中，虽然数组的长度可以超过 2 GB，但它不能超过 2^31 个项目。所以 a 的最大大小`byte[]`仍然是 2 GB（减去一点开销）。an 的最大大小`int[]`为 2^31 个项目或大约 8 GB 等。请参阅[gcAllowVeryLargObjects](http://msdn.microsoft.com/en-us/library/hh285054%28v=vs.110%29.aspx)。

# ios - 如何通过延迟 iOS 上的块调用来避免保留周期

> ID：15487549
> 
> 赞同：1
> 
> 时间：2013-03-18T21:45:11.480
> 
> 标签：ios, objective-c, memory-management, objective-c-blocks, uiviewanimation

我真的被这个难住了。我一直在阅读有关如何正确处理块内变量的所有信息。

注意：我没有使用弧。

所以，假设我有一个看起来像这样的动画：

```
[UIView animateWithDuration:.5 animations:^{
    textCard.alpha = 1.f;
    self.dotView.alpha = 1.f;
    self.subtitles.alpha = 0;
}completion:^(BOOL finished){
    [self.playerLayer removeFromSuperlayer];
    self.playerLayer = [AVPlayerLayer playerLayerWithPlayer:self.vidPlayer];
    self.playerLayer.frame = self.vidView.bounds;
    [self.vidView.layer insertSublayer:self.playerLayer atIndex:0];
    [self.subtitles removeFromSuperview];
    self.subtitles = [sub autorelease];

    [UIView animateWithDuration:.3 delay:1 options:UIViewAnimationOptionAllowUserInteraction animations:^{
        textCard.alpha = 0.f;
        sub.alpha = 1.f;
    }completion:^(BOOL finished){
        self.queuedVid = NO;
        if (self.shouldPlay == YES) {

            [self.vidPlayer play];
            [self setCurrentVideoSettings];
        }
        else{
            self.shouldPlay = YES;
        }

        [textCard removeFromSuperview];
        textCard = nil;
    }];
    }]; 
```

现在这段代码可能看起来有点武断，但这是我必须做的一个非常真实的例子。

这是我的两个问题：

1.  如果我保持原样并且在调用此块期间类（尝试）被释放，它将不会释放。

2.  如果我将 self 更改为 `__block typeof (self) weakRef = self;`then 如果类在第二个块可以运行之前被释放，它会崩溃，因为它试图引用我释放的 self。

我知道我只是不明白这是如何工作的，但如果有人能解释一下，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:12:09.810

您不必担心`self`内联动画块引用创建的保留周期。该块将在动画开始时保留自身，并在动画块执行完毕时释放它。

想象一下有人做了一些调用你的动画的事情。然后，在动画完成之前，他们将该视图控制器从导航堆栈中弹出。导航控制器释放您的控制器，但动画块继续保留它。当动画完成时（屏幕外），块将释放对控制器的最后一个引用，并将被释放。

# javascript - 在 IE10 中隐藏或更改范围输入的值标签

> ID：15487550
> 
> 赞同：15
> 
> 时间：2013-03-18T21:45:15.650
> 
> 标签：javascript, html, internet-explorer-10

我有一个带有自定义标签的范围输入，该标签显示与输入值相对应的文本。这很好用，除了 Internet Explorer 10 还显示它自己的包含该值的类似工具提示的标签。问题是这个工具提示掩盖了我的标签。它还显示一个整数值，其中控件的实际值是一个浮点数。

![在 IE 10 中显示重叠标签的范围输入](../Images/734dd949916569400ccd89673d693457.png)

我不知道如何隐藏标签或修改其文本。它与工具提示分开，不响应标题属性。它也不响应`z-index`，所以我不能把我的标签放在它上面。我没有看到[文档](http://msdn.microsoft.com/en-us/library/hh773065.aspx#properties)中提到可以访问标签的属性。

演示：[jsfiddle.net/KzWrs](http://jsfiddle.net/KzWrs/)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-18T22:02:29.320

对于 WinJS，您可以使用[`::-ms-tooltip`](http://msdn.microsoft.com/en-us/library/windows/apps/hh465805.aspx)伪元素选择器（如此处所述[从 Slider 中删除工具提示](https://stackoverflow.com/questions/12882348/winjs-remove-tooltip-from-slider)

> 将一种或多种样式应用于滑块的工具提示（输入类型=范围）。请注意，只有显示和可见性样式属性适用于 -ms-tooltip。

~~...但是对于 IE10，它似乎不起作用（至少在我测试时）。~~

`::-ms-tooltip`在 MSDN 上的 CSS 文档中列出了[伪元素，](http://msdn.microsoft.com/en-us/library/hh869604(v=vs.85).aspx)但是没有指向讨论伪元素的内容页面的链接

~~我怀疑实施不完整......~~

* * *

编辑：当我第一次在 Windows 8 Consumer Preview vm 上测试时，在 Windows 8 RTM 上测试它可以工作！

编辑：更正破折号前缀`::-ms-tooltip`

```
input[type=range]::-ms-tooltip {
    display: none;
} 
```

# javascript - Meteor 和 MongoDB 地理空间 - 边界 - $within

> ID：15487551
> 
> 赞同：2
> 
> 时间：2013-03-18T21:45:16.260
> 
> 标签：javascript, global-variables, meteor

在我的 Meteor 客户端中，我定义了一个地图对象：

```
Meteor.startup(function () {
  map = L.map('map_canvas').locate({setView: true, maxZoom: 21});
  L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
  }).addTo(map);
}); 
```

我将它用作全局，这样我就可以在 Template.xxxx.events、Template.yyy.rendered 中访问它...（不知道这是否是最好的方法，**请您对此提出意见**）

所以直到这里一切都很好。

现在我需要执行一个地理空间查询，它只能在服务器端完成：

```
Meteor.startup(function () {
  Meteor.publish("AllMessages", function() {
    lists._ensureIndex( { location : "2d" } );
    var bottomLeftLat = map.getBounds()._southWest.lat;
    var bottomLeftLng = map.getBounds()._southWest.lng;
    var topRightLat = map.getBounds()._northEast.lat;
    var topRightLng = map.getBounds()._northEast.lng;
    return lists.find( { "location": { "$within": { "$box": [ [bottomLeftLng, bottomLeftLat] , [topRightLng, topRightLat] ] } } } );
  });
}); 
```

但是我的应用程序崩溃了，我得到：

```
Exception from sub ZeJzWHdF8xQg57QtF ReferenceError: map is not defined
    at null._handler (app/server/Server.js:4:25)
    at _.extend._runHandler (app/packages/livedata/livedata_server.js:815:31)
    at _.extend._startSubscription (app/packages/livedata/livedata_server.js:714:9)
    at _.extend.protocol_handlers.sub (app/packages/livedata/livedata_server.js:520:12)
    at _.extend.processMessage.processNext (app/packages/livedata/livedata_server.js:484:43) 
```

这是加载时间的事情吗？在进行查询之前，我需要设置超时并等到地图加载完毕？

**编辑**这是我尝试过但不起作用的方法

**服务器**

```
Meteor.startup(function () {
  Meteor.publish("AllMessages", function() {
    lists._ensureIndex( { location : "2d" } );
    return lists.find();
  });
});

Meteor.methods({
  getListsWithinBounds: function(bounds) {
    return lists.find( { "location": { "$within": { "$box": [ [bottomLeftLng, bottomLeftLat] , [topRightLng, topRightLat] ] } } } );
  }
}); 
```

**客户**

```
Meteor.startup(function () {
  map = L.map('map_canvas').locate({setView: true, maxZoom: 21});
  L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
  }).addTo(map);
    bounds = {};    
    map.on('locationfound', function(e){ 
      bounds.bottomLeftLat = map.getBounds()._southWest.lat;
      bounds.bottomLeftLng = map.getBounds()._southWest.lng;
      bounds.topRightLat = map.getBounds()._northEast.lat;
      bounds.topRightLng = map.getBounds()._northEast.lng;
      console.log(bounds);
      Meteor.call("getListsWithinBounds", bounds, function(err, result) {
        console.log('call'+result); // should log a LocalCursor pointing to the relevant lists
      });
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:16:38.877

**编辑**：*更好的是，使用自定义反应数据源。[我在这里](http://blog.benmcmahen.com/post/48367809759/meteors-reactive-data-sources)写了一个小教程。*

**旧帖：**

我已经实现了类似的东西。在我的服务器代码中，我有以下发布功能：

```
// Publish those trails within the bounds of the map view.
Meteor.publish('trails', function(bounds){
 if (bounds && bounds.southWest && bounds.northEast) {
  return Trails.find({'coordinates': {'$within' : 
    { '$box' : [bounds.southWest, bounds.northEast] }
  }}, {
    limit: 100
  });
 }
}); 
```

在我的客户端代码中，我保留了一个仅限客户端的 mapbounds 集合。（基本上，它是一种只有一个文档的反应模型）。

```
MapBounds = new Meteor.Collection(null); 
```

我在客户端上有一个如下所示的订阅：

```
// Get trails that are located within our map bounds. 
Meteor.autorun(function () {
 Session.set('loading', true);
  Meteor.subscribe('trails', MapBounds.findOne(), function(){
   Session.set('loading', false);
  }); 
}); 
```

最后，每当地图边界发生变化时，我的传单类都会更新边界模型。

```
 onViewChange: function(e){
  var bounds = this.map.getBounds()
    , boundObject = { 
        southWest: [bounds._southWest.lat, bounds._southWest.lng],
        northEast: [bounds._northEast.lat, bounds._northEast.lng] 
      };

  if (MapBounds.find().count() < 1) MapBounds.insert(boundObject);
  else MapBounds.update({}, boundObject);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:30:26.870

您`map`在客户端上定义，因此该变量在服务器上不可用。由于 Leaflet 是客户端 API，因此您也无法在服务器上进行任何地图处理。

如果您想要求服务器从某个范围内的集合返回列表，您应该计算客户端上的范围，然后告诉服务器这些范围，以便它可以为您找到信息。一个好的方法是使用[`Meteor.method`](http://docs.meteor.com/#meteor_methods).

在服务器上，定义一个接受边界并在这些边界内返回列表的方法：

```
Meteor.methods({
  getListsWithinBounds: function(bounds) {
    return lists.find({location: {"$within": {"$box": [bounds.bottomLeftLng, bounds.bottomLeftLat], [bounds.topRightLng, bounds.topRightLat]}});
  }
}); 
```

然后在客户端，调用服务端的方法：

```
Meteor.call("getListsWithinBounds", bounds, function(err, result) {
  console.log(result); // should log a LocalCursor pointing to the relevant lists
}); 
```

# magento - 找不到 topMenu - Magento

> ID：15487558
> 
> 赞同：2
> 
> 时间：2013-03-18T21:45:45.827
> 
> 标签：magento

不知道这里发生了什么：

在我的 page.xml 中，我有以下代码：

```
<block type="core/text_list" name="top.menu" as="topMenu" translate="label">
    <label>Navigation Bar</label>
    <block type="page/html_topmenu" name="catalog.topnav" template="page/html/topmenu.phtml" />
</block> 
```

当我尝试使用一些小的 HTML 更改来更新 page/html/topmenu.phtml 时，它们不会呈现？

当我删除此代码时，类别菜单消失，表明它是控制 xml。

当我在同一主题模板中更新 page/html/header.phtml 时，它会呈现更改。

我还完全删除了这个模板文件以及任何其他可能像 default../../topmenu.phtml 一样回退的模板文件 - 但菜单呈现良好，表明它没有使用这些模板文件？

我也尝试过以同样的方式更新 top.phtml 没有运气？

每次更新都会清除缓存。

我一定遗漏了一些东西 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:11:00.313

我的第一个猜测是`catalog.topnav`有另一个模块将其模板更改为其他内容，`page/html/topmenu.phtml`或者您​​的系统有一个类重写`page/html_topmenu`，指向一个不使用模板来呈现导航的类。

如果您正在运行诸如 Commerce Bug 之类的调试工具，请检查顶部菜单块的模板集。

![在此处输入图像描述](../Images/86b6a2221f9ffc5d25a6e82208483655.png)

以及为`page/html_topmenu`

![在此处输入图像描述](../Images/0e0b0191d868dd3f1ede221fdcc4a018.png)

缺少调试工具，添加一些临时调试代码`app/code/core/Mage/Page/Block/Html/Topmenu.php`来测试正在设置的模板

```
#File: app/code/core/Mage/Page/Block/Html/Topmenu.php
protected function _toHtml()
{
    var_dump($this->getTemplate());
    var_dump($this->getTemplateFile());
    return parent::_toHtml();
} 
```

这将告诉您顶部导航正在使用哪个模板。如果没有任何输出，那么很可能您的系统对此类进行了重写。

# symfony - 我可以向我的对象添加不是我的数据库表中的字段的属性吗？

> ID：15487559
> 
> 赞同：0
> 
> 时间：2013-03-18T21:46:02.077
> 
> 标签：symfony, doctrine-orm

例如，假设我正在存储客户帐户余额随时间的变化。我将更改的金额（字段为`amount`）以及更改的日期（`date`）存储在我的表中。

假设我有一个更改，我想获取该用户先前更改的数量（这不是对象的属性）。如果我手动编写 SQL 查询，我会这样做：

```
SELECT *,
    (SELECT b1.amount
    FROM balanceHistory as b1
    WHERE b1.date < b0.date
    AND customer_id = 123
    ORDER BY B1.date
    LIMIT 1) as prev_balance
FROM balanceHistory as b0
WHERE customer_id = 123; 
```

在 Symfony 中，我可以编写一个自定义查询，并且在每次更改帐户后，获取该更改的相关先前更改；但这很昂贵，因为我正在迭代许多对象。

我可以添加一个新属性，比如“previousChange”，但不添加任何 ORM 信息，并且不让它搞砸任何 ORM 的东西吗？如果可以的话，一旦我像这样手动加入，我如何访问这个属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:06:06.553

不，这不是真正支持的，因为实体的水合仅发生在映射字段上。

您正在寻找的可能是[Native SQL](http://docs.doctrine-project.org/en/latest/reference/native-sql.html#examples)，它允许您使用 DBMS 供应商支持的方言来运行此类复杂的子查询。

在 Native SQL 中，您可以将[标量结果](http://docs.doctrine-project.org/en/latest/reference/native-sql.html#scalar-results)添加到结果集中。这样，您仍然可以运行自定义查询，但在结果集中拥有您想要的所有其他数据以及您的实体。

此外，从概念上考虑，此类数据不属于您的实体，因此请将其与您的实体分开。

# html - 为什么 html title 属性和 twitter bootstrap data-original-title 互斥？

> ID：15487562
> 
> 赞同：13
> 
> 时间：2013-03-18T21:46:07.070
> 
> 标签：html, twitter-bootstrap, title, popover

我有一个 HTML div 元素，单击该元素时会显示一个 twitter 引导弹出窗口。当前代码如下所示：

```
<div class="popover" title="supplementary info about html element" 
  data-original-title="popover title" data-content="popover content...">
</div>

$(document).on('ready', function() {
  App.Utils.Popover.enableAll();
});

App.Utils.Popover = {
  enableAll: function() {
    $('.popover').popover(
      {
        trigger: 'click',
        html : true,
        container: 'body',
        placement: 'right'
      }
    );
}; 
```

问题是 twitter bootstrap 采用 title 属性值并将其显示为弹出窗口的标题，而不是使用 data-original-title。有什么方法可以使两者按预期协同工作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T01:11:35.473

这是因为弹出框 javascript 扩展了工具提示 javascript，并且工具提示 javascript（我相信）旨在替换由 title 属性设置的默认工具提示。

这段代码是罪魁祸首（在 bootstrap-tooltip.js 中，如 253ish）

```
, fixTitle: function () {
  var $e = this.$element
  if ($e.attr('title') || typeof($e.attr('data-original-title')) != 'string') {
    $e.attr('data-original-title', $e.attr('title') || '').attr('title', '')
  }
} 
```

如果有 title 属性，则 data-original-title 属性将替换为 title 属性。

**编辑**基本上我的回答是没有简单的方法。尽管在这种情况下我真的不建议这样做，但您必须对 bootstrap js 进行一些修改。也许使用可能没有该代码的旧版本的引导弹出窗口？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-28T14:59:08.210

我遇到了同样的问题并且无法使用不同的 Bootstrap 版本，所以我决定将我的函数注入到 popover 原型中。**不要在家里尝试这个**：

```
<script src="bower_components/bootstrap-sass/js/bootstrap-popover.js"></script>
<script type="text/javascript">
    // dirty hack
    $.fn.popover.Constructor.prototype.fixTitle = function () {};
</script> 
```

现在您可以添加弹出框的标题和浏览器鼠标悬停的标题：

```
<i data-placement="bottom" data-trigger="click"
   bs-popover="'views/partials/notifications.html'" data-html="true" 
   data-unique="1" 
   data-original-title="This title will be used by the popover" 
   title="This title will be used by a browser for a mouseover"
/> 
```

# vb.net - VS 中添加的引用未被识别

> ID：15487563
> 
> 赞同：1
> 
> 时间：2013-03-18T21:46:09.660
> 
> 标签：vb.net, reference, file-not-found, dllnotfoundexception

我正在使用 .NET Framework 3.0 和 Visual Studio 2012 制作 VB.NET 安装程序。要解压缩安装程序获得的文件，我正在使用**ICSharpCode.SharpZipLib.Zip**

当 .ZIP 文件下载并尝试解压缩时，我收到一条错误消息，指出找不到 SharpZipLib 的 DLL 文件：

```
C:\Users\Bailey\Documents\Visual Studio 2012\net-20\ICSharpCode.SharpZipLib.dll 
```

但是，当在 VS2012 上以调试模式运行时，它工作得非常好。这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:53:41.217

DLL 应该在您的`Bin\Release`文件夹中，因此您必须将其复制到那里。如果最终用户需要使用这个程序集，那么您还必须将 DLL 与您的程序一起分发（检查 SharpZipLib 的许可证以了解有哪些条件）。

# api - Google Apps 脚本和外部 API

> ID：15487568
> 
> 赞同：9
> 
> 时间：2013-03-18T21:46:27.917
> 
> 标签：api, https, google-apps-script, basecamp

如果我没记错的话，根据[UrlFetch 文档](https://developers.google.com/apps-script/class_urlfetchapp)，我应该能够从 Google Apps 脚本中调用[New Basecamp API 。](https://github.com/37signals/bcx-api/)我怀疑我的困惑来自格式化 GAS 错误（以及我刚刚开始这一切的事实）。我已经用谷歌搜索了很长时间。这就是我所拥有的，也是我从 GAS 得到的错误：

GAS 中的 myCode：

```
function myFunction() {
  var url = "https://basecamp.com/******/api/v1/projects.json";
  var headers = {
                 "contentType": "application/json",
                 "headers":{ "User-Agent": "MY_APP_NAME",
                            "username:password" : "user:pass"},
                 "validateHttpsCertificates" :false
                 };

var response = UrlFetchApp.fetch(url, headers);
var text = response.getResponseCode();
Logger.log(text);
} 
```

气体错误信息：

```
Request failed for https://basecamp.com/2166446/api/v1/projects.json returned code 401.
Server response: HTTP Basic: Access denied. (line 9, file "Code") 
```

我希望这是一个合理的问题，并感谢您的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-18T21:53:11.830

使用的[HTTP Basic Authentication](https://en.wikipedia.org/wiki/Basic_access_authentication)的正确标头[`Utilities.base64Encode`](https://developers.google.com/apps-script/class_utilities#base64Encode)如下：

```
"headers": {
    "User-Agent": "MY_APP_NAME (App URL/your email address)",
    "Authorization": "Basic " + Utilities.base64Encode(username + ":" + password)
}, 
```

# paypal - 贝宝账户余额 -0 美元

> ID：15487576
> 
> 赞同：2
> 
> 时间：2013-03-18T21:46:59.253
> 
> 标签：paypal, paypal-sandbox

我需要一些有关贝宝沙盒帐户的帮助。我尝试向我的帐户添加一些钱，但我无法做到这一点。我创建了一个 6 个买家帐户，我尝试添加 100 美元进行测试，每次创建帐户但没有钱。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:45:58.147

您如何尝试将资金添加到您的帐户中。如果您尚未尝试登录实际的测试沙盒卖家或买家帐户，请尝试登录该帐户。然后从银行帐户中添加资金。启动转移后，请进入该交易的详细信息并清除待处理的转移。这应该允许您以这种方式向您的帐户添加资金。

# php - 如果行被更新或插入，MYSQL 查询返回

> ID：15487580
> 
> 赞同：0
> 
> 时间：2013-03-18T21:47:27.893
> 
> 标签：php, mysql, insert, sql-update, sql-insert

所以我正在开发我网站的一部分，用户可以在其中升级和降级内容，每个评级存储一行，+1 表示赞成，-1 表示反对。

我还将拥有一个`upvote - downvotes`用户个人资料页面。这些投票的总和将存储在用户信息的 mysql 表中。

我的问题是，当有人投票时，让我们说一个反对票，所以我在用户个人资料上的投票总价值中减去一个。但是，如果用户改变主意并将投票修改为赞成票以使最终值正确，我必须实际添加 2（+1 来补偿 -1 和另一个 +1 的赞成票）

```
$sql = "    
    INSERT INTO `votes`
    (
        `added_by`, 
        `value`,
        `post_id`,
        `ip_created`
    )  VALUES (
        '".$logedInUser['User_ID']."',
        '".$value."',
        '".$this->post_id."',
        '".ip2()."'
    )
    ON DUPLICATE KEY UPDATE `value` = '".$value."'
";
$db->sql_query($sql); 
```

我知道我可以找到一种方法来做到这一点，但它需要一些其他的查询，我希望有一种方法可以在插入或更新时返回。（我知道查询只会返回 TRUE 或 FALSE）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:21:37.813

`select row_count();`事后马上做。

来自 MySQL 文档[http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_row-count](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_row-count)

> 对于 INSERT ... ON DUPLICATE KEY UPDATE 语句，如果将行作为新行插入，则受影响的行值为 1，如果更新现有行，则值为 2。

这是一个例子。它使用`mysql_affected_rows()`——我知道我知道 mysql_* 已被弃用。

```
$mysql = mysql_connect(":/tmp/mysql.sock", "ckim", "");
mysql_select_db（“测试”）；
mysql_query("如果存在 my_table 则删除表");
mysql_query("create table my_table(id int primary key, val int)");

$result = mysql_query("insert into my_table values (1,1) on duplicate key update val = 2") or die (__FILE__.':'.__LINE__.": ".mysql_error()."\n");
echo mysql_affected_rows()."\n";

$result = mysql_query("insert into my_table values (1,1) on duplicate key update val = 2") or die (__FILE__.':'.__LINE__.": ".mysql_error()."\n");
echo mysql_affected_rows()."\n";

$result = mysql_query("insert into my_table values (2,1) on duplicate key update val = 2") or die (__FILE__.':'.__LINE__.": ".mysql_error()."\n");
echo mysql_affected_rows()."\n";
mysql_close();

```

输出是

```
1
2
1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:56:53.193

根据您当前的数据结构，我认为不是在用户赞成时添加 2 来平衡数据，而在他再次反对时减去 2。尝试这个：

1.  您必须先删除投票。
2.  然后再次投票以进行更改。

# objective-c - 在关闭模式 UIViewController 时旋转 UISplitViewController

> ID：15487583
> 
> 赞同：1
> 
> 时间：2013-03-18T21:47:37.820
> 
> 标签：objective-c, ipad, uisplitviewcontroller, master-detail

我使用 iOS 5 SDK 创建了一个主从应用程序，打算在设备为纵向时以模态方式显示 UIViewController，在设备为横向时显示 UISplitViewController。

使用以下命令旋转到横向时，模态 VC 会被解除：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    [super willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];
    if(UIInterfaceOrientationIsLandscape(toInterfaceOrientation)){
        [self dismissModalViewControllerAnimated:YES];
    }
} 
```

但是 UISplitViewController 永远不会获得旋转事件，因此最终会在横向窗口中以纵向“模式”结束。

我尝试在 DetailViewController 中的 viewWillAppear 中触发旋转，如下所示：

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    UIInterfaceOrientation interfaceOrientation = [[UIApplication sharedApplication] statusBarOrientation];
    if (UIInterfaceOrientationIsPortrait(interfaceOrientation)) {
        [UIApplication sharedApplication].statusBarOrientation = UIInterfaceOrientationLandscapeRight;
    }
} 
```

，尝试调用 SplitViewController 的`willRotateToInterfaceOrientation`，也尝试`didRotateFromInterfaceOrientation`从我的模态调用 SplitViewController，但没有任何效果。

有任何想法吗？

# python - Python unittest - 从嵌套的TestSuite中获取TestCase id

> ID：15487587
> 
> 赞同：0
> 
> 时间：2013-03-18T21:47:43.870
> 
> 标签：python, unit-testing, nose

我有一个`unittest.TestSuite`例子。它是嵌套的 TestSuite/TestCase 对象（任意形状/深度）的树。

我想获取整个套件中包含的单个测试 ID 的列表，而无需实际运行测试。（类似于鼻子的“--collect-only”选项）。

我需要递归地走`TestSuite`，还是有什么东西`unittest`可以重复使用？有什么技巧可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T23:54:37.603

FWIW，这很好用：

通过[测试工具](https://github.com/testing-cabal/testtools/blob/master/testtools/testsuite.py#L24)：

```
def iterate_tests(test_suite_or_case):
    """Iterate through all of the test cases in 'test_suite_or_case'."""
    try:
        suite = iter(test_suite_or_case)
    except TypeError:
        yield test_suite_or_case
    else:
        for test in suite:
            for subtest in iterate_tests(test):
                yield subtest 
```

您可以使用它`testtools.testsuite.iterate_tests(suite)`来迭代嵌套套件。例如，使用列表推导获取测试 ID 的列表：

```
[test.id() for test in testtools.testsuite.iterate_tests(suite)] 
```

# javascript - Knockout js 多重绑定

> ID：15487591
> 
> 赞同：-2
> 
> 时间：2013-03-18T21:47:54.043
> 
> 标签：javascript, knockout.js

我有多个网格，我想在一个提交按钮下运行。这是代码：http: [//jsfiddle.net/aETvS/](http://jsfiddle.net/aETvS/)

我收到错误“无法读取未定义的属性‘推送’”

```
 self.orders = ko.observableArray(orders);

self.addorder = function() {
    self.orders.push({
        name: "",
        price: ""
    });
};

self.removeorder = function(order) {
    self.orders.remove(order);
};

self.hardware = ko.observableArray(hardware);

self.addhardware = function() {
    self.hardware.push({
        name: "",
        price: ""
    });
};

self.removehardware = function(hardware) {
    self.hardware.remove(hardware);
};

self.save = function(form) {
    alert("Could now transmit to server: " + ko.utils.stringifyJson(self.orders));
    // To actually transmit to server as a regular form post, write this: ko.utils.postJson($("form")[0], self.orders);
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:13:59.597

几件事。

1.  你的小提琴不包括淘汰赛。
2.  你想发布一个表格。将提交绑定添加到您的表单。

    数据绑定=“提交：保存”

我已经更新了你的小提琴。但是，我没有看到数组推送错误。

[http://jsfiddle.net/sujesharukil/qMDH5/19/](http://jsfiddle.net/sujesharukil/qMDH5/19/)

```
<form class="form-horizontal margin-zero" method="POST" action="http://toolkit.dev/" accept-charset="utf-8" novalidate="novalidate" data-bind="submit: save"> 
```

希望有帮助。

-苏杰

# vb.net - 如何获取 WCF 引用以生成函数调用未使用的类的引用？

> ID：15487593
> 
> 赞同：0
> 
> 时间：2013-03-18T21:47:56.703
> 
> 标签：vb.net, wcf, .net-4.0

我有一个 WCF 服务 (Service1) 和一个引用/使用该服务的项目 (Project1)。如果我在 Service1 中声明了一个类，但不在函数调用中使用它，我就不能在 Project1 中使用该类。我认为它没有构建所需的参考，有没有办法强制这样做（除了让该类在函数中使用）？

# sql - 在 SQL Server 中查找去年的日期

> ID：15487597
> 
> 赞同：2
> 
> 时间：2013-03-18T21:48:12.350
> 
> 标签：sql, sql-server, date

我正在使用 SQL Server 2008，我正在尝试计算一年前的两个日期。假设今天是 3/18/13，我需要找到 4/1/12 和 4/30/12。

我尝试了以下方法，它给了我 2012 年 4 月 18 日，但不确定如何获得上述所需的日期。另外，我需要找到 12 年 5 月 1 日、12 年 5 月 31 日……等等。知道吗？谢谢。

```
DATEADD(MONTH,-11, GETDATE())    -  returns 4/18/12 
```

我也试过

```
DATEADD(YEAR,-1, DATEADD(MONTH,DATEDIFF(MONTH,-11, GETDATE()), 0)) It returns  4/1/12 ,
DATEADD(YEAR,-1, DATEADD(MONTH,DATEDIFF(MONTH,-10, GETDATE()), 0)) also returns 4/1/12 instead of   5/1/12 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:20:59.733

如果你想要的是从一年前的今天开始的下个月的第一天和最后一天，这样的事情可能会起作用：

```
SELECT DATEADD(month,-11,DATEADD(mm,DATEDIFF(mm,0,GETDATE()),0) )
SELECT DATEADD(month,-11,DATEADD(ms,-3,DATEADD(mm,0,DATEADD(mm,DATEDIFF(mm,0,GETDATE())+1,0)))) 
```

如果有更有效的方法来做到这一点，我不会感到惊讶。[有关如何计算不同 SQL Server 日期](http://www.databasejournal.com/features/mssql/article.php/3076421/Examples-of-how-to-Calculate-Different-SQL-Server-Dates.htm)的示例中的文章讨论了这些类型的计算。

# c# - Excel图表问题

> ID：15487598
> 
> 赞同：0
> 
> 时间：2013-03-18T21:48:13.433
> 
> 标签：c#, .net, excel, graph, charts

我试图让图例中显示的“A”列中的用户以及栏中用户旁边的数据。我不确定空白数据来自哪里，也不确定为什么显示为“系列”

我还希望左边的值显示在 0% 到 100% 之间，这样每 10% 的用户就更容易阅读。

[![img2](../Images/1a84b1825a933bce3392c1f9c1d06c8c.png)](https://i.stack.imgur.com/Xib1N.png)

[![图像](../Images/0894df56a51ead700f10f3a1c1f2875f.png)](https://i.stack.imgur.com/2v3LA.png)

```
 Excel.Range dataRange = chartSheet.get_Range("A1", "C" + chart.Rows.Count.ToString());
      //chart.Rows.Count = 2

                        Excel.ChartObjects chartObjects = (Excel.ChartObjects)(excelWorksheet.ChartObjects(Type.Missing));
                        Excel.ChartObject newChartObject = chartObjects.Add(0, 600, 300, 300);

                        object paramChartFormat = 1;
                        object paramCategoryLabels = 0;
                        object paramSeriesLabels = 0;
                        bool paramHasLegend = true;
                        object paramTitle = "Performance Efficiency";
                        object paramCategoryTitle = "Providers";
                        object paramValueTitle = "Percentage";

                        newChartObject.Chart.ChartWizard(dataRange, Excel.XlChartType.xl3DColumn,
                            paramChartFormat, Excel.XlRowCol.xlRows, paramCategoryLabels,
                            paramSeriesLabels, paramHasLegend, paramTitle, paramCategoryTitle,
                            paramValueTitle, Type.Missing); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:15:46.530

这是我用来解决问题的方法

```
 Excel.Range dataRange = chartSheet.get_Range("B2", "B" + chart.Rows.Count.ToString());
    dataRange.NumberFormat = "#%";
    dataRange = chartSheet.get_Range("C2", "C" +   chart.Rows.Count.ToString());
                        dataRange.NumberFormat = "#%";

    dataRange = chartSheet.get_Range("A1", "C" + chart.Rows.Count.ToString());

    Excel.ChartObjects chartObjects = (Excel.ChartObjects)(excelWorksheet.ChartObjects(Type.Missing));
    Excel.ChartObject newChartObject = (Excel.ChartObject)chartObjects.Add(0, 600, (100 * chart.Rows.Count), 300);
    Excel.Chart chartPage = newChartObject.Chart;

    chartPage.SetSourceData(dataRange, Type.Missing);
    chartPage.ChartType = Excel.XlChartType.xlColumnClustered; 
```

# f# - 带有“匹配”和“查找和替换”的 F# 函数

> ID：15487603
> 
> 赞同：2
> 
> 时间：2013-03-18T21:48:33.393
> 
> 标签：f#, match, replace

我正在努力创建一个 F# 函数。我是 F# 的新手（充其量），真的可以使用一些帮助。我已经为此倾注了一个星期，所以你能提供的任何帮助都是无价的！

* * *

**功能目标：**

*   输入：a`List`和 a`string`
*   将字符串修改为`Proper Case`
*   将字符串与列表中的每个项目进行比较
*   用列表项替换任何匹配项

    * * *

**例子：**

*   String = "sc 中的美元"
*   列表 = [“NIF”；“PF”；“PS”；“SC”；“我们”; “美国”; “美元”]

*功能动作：*

1.  将字符串设置为正确大小写=“sc 中的美元”
2.  将字符串与列表中的每个项目进行比较并酌情替换

    *   “我们”变成“我们”
    *   “sc”变成“SC”
3.  最终结果是“SC 中的美元”

这就是我迄今为止所拥有的。

```
let myList = ["NIF"; "PF"; "PS"; "SC"; "US"; "USA"; "USD"]
let FixAccronyms aList fixString= 
    aList |> List.iter 
        (fun listItem ->
        match listItem with            
        | fixString -> printfn  "%s, %s" listItem fixString
        | _ ->  printf  "%s" "" |> ignore) 
```

在 FSI 中：

> FixAccronyms myList "the us dollar in sc";;

该函数遍历列表，但它打印列表中的每个项目，而不仅仅是它与 fixString 匹配的位置。假设这有效，我既不确定如何对字符串的一部分进行模式匹配，也不确定如何在字符串中进行查找和替换......

* * *

**FSI 的结果**

```
val myList2 : string list = ["NIF"; "PF"; "PS"; "SC"; "US"; "USA"; "USD"]
val FixAccronyms2 : aList:string list -> fixString:'a -> unit

>FixAccronyms2 myList2 "the us dollar in sc";;
NIF, NIF
PF, PF
PS, PS
SC, SC
US, US
USA, USA
USD, USD
val it : unit = () 
```

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:00:55.767

这是一种方法：

```
open System
open System.Collections.Generic

let properCase lookup (str: string) =
  let lookupDict = Dictionary(StringComparer.CurrentCultureIgnoreCase)
  for word in lookup do lookupDict.Add(word, word)
  (str, str.Split()) ||> Array.fold (fun pcWord word -> 
    match lookupDict.TryGetValue(word) with
    | true, s -> pcWord.Replace(word, s)
    | _ -> pcWord)

> properCase ["NIF"; "PF"; "PS"; "SC"; "US"; "USA"; "USD"] "The us dollar in sc"
val it : string = "The US dollar in SC" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:37:10.373

这是另一种方法：

```
open System
open System.Text.RegularExpressions

let properCase lookup str =
    Regex.Replace(str, String.Join("|", Seq.map Regex.Escape lookup),
        (fun (x : Match) -> x.Value.ToUpper()),
        RegexOptions.IgnoreCase) 
```

用法与@Daniel 的答案相同。

# sublimetext2 - Sublime Text：粘贴时让光标保持不动？

> ID：15487605
> 
> 赞同：2
> 
> 时间：2013-03-18T21:48:43.143
> 
> 标签：sublimetext2, sublimetext

例如：

```
<div>somestuff</div>
<div>somemorestuff</div>
<div>somestuff</div>
<div>somestuff</div>
<div>somestuff</div>
<div>somestuff</div>
<div>somestuff</div> 
```

想分配`class="abc"`给每一个。

现在我意识到有 Ctrl+Alt+Arrows 可以“雕刻”出光标的垂直路径（巧妙的技巧！），之后我可以粘贴到我的班级中，但如果我的 div 被一些行分隔，那将不起作用.

所以我想粘贴：

```
<div class="abc">somestuff</div>
<div>somemorestuff</div>
<div>somestuff</div>
<div>somestuff</div>
<div>somestuff</div>
<div>somestuff</div>
<div>somestuff</div> 
```

但它把我的光标放在这里

```
<div class="abc"|>somestuff</div> 
```

我希望它留在这里

```
<div| class="abc">somestuff</div> 
```

这样我就可以重复`↓``Ctrl+V`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:01:07.653

我要做的是选择`<div`，然后`CTRL+D`选择每个相同的文本。然后，您可以相应地将光标移动到每一个上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T07:24:05.120

我认为实现您需要的最佳方法是使用 command `split selection into lines`, `Ctrl`+ `Shift`+ `L`（Mac 上的`Cmd`+ `Shift`+ ）。`L`

1.  选择您需要编辑的所有行
2.  按`Ctrl`+ `Shift`+`L`
3.  将光标（使用箭头键）移动到要粘贴代码的位置
4.  粘贴您的代码。

如果你真的想让光标停留在粘贴文本的开头，你可以创建一个插件。`Tools/New Plugin...`：

```
import sublime_plugin

class PasteAndResetCursorPositionCommand(sublime_plugin.TextCommand):
    def run(self, edit):
        start_region = self.view.sel()[0]
        self.view.window().run_command("paste")
        self.view.sel().clear()
        self.view.sel().add(start_region) 
```

将其保存在您的`Packages/User`目录中。

然后将键绑定添加到您的`Key Bindings - User`：

```
{ "keys": ["ctrl+alt+shift+v"], "command": "paste_and_reset_cursor_position" } 
```

当然，您可以使用您喜欢的快捷方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T21:57:06.517

我喜欢插件解决方案，并认为还有*一个*值得一提的解决方案，特别是因为这个问题特别要求重复点击“向下，ctrl + v”的简单性......

将光标放在要输入文本的位置，并使用`shift+ctrl+down`将光标点“倍增”到尽可能多的行上。键入您想要的内容，然后单击`esc`以返回单点光标。

类似于@derek_duncan 的答案，但具有更精细的控制，假设您正在编辑的文本与您的示例一样排列。

# c# - 如何从音乐文件中读取样本？

> ID：15487607
> 
> 赞同：0
> 
> 时间：2013-03-18T21:48:54.853
> 
> 标签：c#, audio, signal-processing

从编程的角度来看，我刚刚开始进行音乐编辑，我了解很多关于波形和类似性质的想法，但我一直被困在如何从声音文件中读取单个样本作为字节数组。

我正在使用 Alvas.Audio 库 ( [http://www.alvas.net/alvas.audio.aspx](http://www.alvas.net/alvas.audio.aspx) ) 和 C#，如果这有助于回答问题。

我知道不同的文件格式有不同的数据存储方式，但我的主要问题围绕着如何以编程方式确定数据的存储方式并一次遍历文件一个样本。我可能会将所有文件转换为 .wav 格式（使用 Alvas 库），因此专门针对 wav 格式的答案就足够了，但是当文件为立体声时，我仍然对迭代样本感到好奇。据我了解，具有立体数据的文件连续存储并行样本。

我的最终目标是能够从歌曲的某个时间段（歌曲中某个地方的几秒钟）中获取样本，然后对它们进行一些数学运算或其他东西，但我只是不确定是什么我读入的数据实际上是正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-11T21:49:19.340

另请参阅[什么是 PCM 格式？](http://alvas.net/alvas.audio,articles.aspx#what-is-pcm-format)

PCM（脉冲编码调制）是一种未压缩的音频格式。我们得到 Wav 文件，它维护（保存）PCM 数据。看看怎么做 什么是 Wav 文件？方法 AudioCompressionManager.GetWaveFormat 有助于调查音频格式。

*   FormatTag = 1 是 PCM。
*   声道 = 用于单声道（单声道）、双声道（立体声）、8 个用于 7.1 环绕声（左、右、中、左环绕、右环绕、左后、右后位置。7.1 系统也有 1 个低声道频率效果 (LFE)，通常发送到低音炮）。
*   SamplesPerSec = 每秒（或采样）的数字化数量值。可以是任何值，但标准值：8000 Hz、11025 Hz、12000 Hz、16000 Hz、22050 Hz、24000 Hz、32000 Hz、44100 Hz、48000 Hz。
*   BitsPerSample - 最常见的使用 8 位（1 字节）和 16 位（2 字节）。很少有 24 位（3 字节）、32 位（4 字节）和 64 位（4 字节）。如果我们将 16 位视为基本格式，那么 8 位可以视为一种压缩格式。它的大小要小两倍，但对于 16 位，值的变体只能是 28 = 256 而不是 216 = 65536。这就是为什么 8 位音质会明显低于 16 位的原因。
*   BlockAlign = Channels * BitsPerSample / 8。其中 8 是每个字节的位数。
*   AvgBytesPerSec（比特率）= Channels * SamplesPerSec * BitsPerSample / 8。

您可以使用下面的代码更具体地分析 PCM 音频格式。

```
 private void WhatIsPcmFormat(string fileName)
    {
        WaveReader wr = new WaveReader(File.OpenRead(fileName));
        IntPtr format = wr.ReadFormat();
        wr.Close();
        WaveFormat wf = AudioCompressionManager.GetWaveFormat(format);
        if (wf.wFormatTag == AudioCompressionManager.PcmFormatTag)
        {
            int bitsPerByte = 8;
            Console.WriteLine("Channels: {0}, SamplesPerSec: {1}, BitsPerSample: {2}, BlockAlignIsEqual: {3}, BytesPerSecIsEqual: {4}", 
            wf.nChannels, wf.nSamplesPerSec, wf.wBitsPerSample, 
            (wf.nChannels * wf.wBitsPerSample) / bitsPerByte == wf.nBlockAlign, 
            (int)(wf.nChannels * wf.nSamplesPerSec * wf.wBitsPerSample) / bitsPerByte == wf.nAvgBytesPerSec);
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T21:51:37.043

假设您知道如何打开文件并从中读取数据，那么您需要参考数据文件格式。对于 WAV 文件，请参阅[此处](http://soundfile.sapp.org/doc/WaveFormat/)了解有关如何组织和访问数据的说明。

[![在此处输入图像描述](../Images/a4ccba7097b5a6f8175ce4a29f60ac4e.png)](https://i.stack.imgur.com/pS3Zb.gif)

```
Offset  Size  Name             Description

The canonical WAVE format starts with the RIFF header:

0         4   ChunkID          Contains the letters "RIFF" in ASCII form
                               (0x52494646 big-endian form).
4         4   ChunkSize        36 + SubChunk2Size, or more precisely:
                               4 + (8 + SubChunk1Size) + (8 + SubChunk2Size)
                               This is the size of the rest of the chunk 
                               following this number.  This is the size of the 
                               entire file in bytes minus 8 bytes for the
                               two fields not included in this count:
                               ChunkID and ChunkSize.
8         4   Format           Contains the letters "WAVE"
                               (0x57415645 big-endian form).

The "WAVE" format consists of two subchunks: "fmt " and "data":
The "fmt " subchunk describes the sound data's format:

12        4   Subchunk1ID      Contains the letters "fmt "
                               (0x666d7420 big-endian form).
16        4   Subchunk1Size    16 for PCM.  This is the size of the
                               rest of the Subchunk which follows this number.
20        2   AudioFormat      PCM = 1 (i.e. Linear quantization)
                               Values other than 1 indicate some 
                               form of compression.
22        2   NumChannels      Mono = 1, Stereo = 2, etc.
24        4   SampleRate       8000, 44100, etc.
28        4   ByteRate         == SampleRate * NumChannels * BitsPerSample/8
32        2   BlockAlign       == NumChannels * BitsPerSample/8
                               The number of bytes for one sample including
                               all channels. I wonder what happens when
                               this number isn't an integer?
34        2   BitsPerSample    8 bits = 8, 16 bits = 16, etc.
          2   ExtraParamSize   if PCM, then doesn't exist
          X   ExtraParams      space for extra parameters

The "data" subchunk contains the size of the data and the actual sound:

36        4   Subchunk2ID      Contains the letters "data"
                               (0x64617461 big-endian form).
40        4   Subchunk2Size    == NumSamples * NumChannels * BitsPerSample/8
                               This is the number of bytes in the data.
                               You can also think of this as the size
                               of the read of the subchunk following this 
                               number.
44        *   Data             The actual sound data. 
```

**更新：**添加数据内联。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T21:59:05.353

“打包”音频数据的最常见方式是 PCM - 用于未压缩的 WAV 文件。每个样本都被“打包”成短整数值 ( `short`)，如果您有可以提供 PCM 的库，您可以通过将它们视为`short`值数组来获取数据。

根据通道的数量，您将获得`short`每个样本的 s 数量。由于每个`short`都是 2`byte`秒，因此立体声音频的每个样本通常有 4 个字节。

因此，例如要访问音频文件中 1.0s 位置的音频数据，您必须跳过 44100*4 字节，假设音频以 44100 采样（最常见的采样率 - 来自 CD）。

# asp.net - 如何在 ASP.NET Web 应用程序中通过 VB 使用 Twitter 的 REST API 来实现对推文的搜索？

> ID：15487609
> 
> 赞同：0
> 
> 时间：2013-03-18T21:49:14.330
> 
> 标签：asp.net, vb.net, twitter

我只熟悉在不需要身份验证的 JavaScript 中使用 Twitter 搜索 API，我似乎无法掌握在 VB 中进行服务器端身份验证和调用的概念。我尝试了各种教程，例如使用开源库（Twitterizer、TweetSharp 等）的教程，但我完全迷失了，这让我相信我错过了一些基本概念。任何关于从哪里开始的建议都将不胜感激，因为我现在一直在盲目地研究这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:00:41.543

我很幸运地使用了[RestSharp](http://restsharp.org/)库并遵循 Twitter[开发人员指南](https://dev.twitter.com/docs/auth/implementing-sign-twitter)进行 OAuth 身份验证。

可能我发现的“最棘手”的事情是确保我使用 OAuth1Authenticator 对象来启动我的身份验证和后续的 API 请求。我的代码通常是这样开始的：

```
Dim Client AS New RestClient(baseUrl)

Client.Authenticator = OAuth1Authenticator.ForRequestToken
                          (MvcApplication.TWITTER_CONSUMER_KEY,
                           MvcApplication.TWITTER_CONSUMER_SECRET,
                           _authInfo.accessToken,
                           _authInfo.accessTokenSecret)

Dim Request As New RestRequest("search/tweets.json", Method.GET);
                               request.AddParameter("include_entities", "true") 
```

您可以从那里拼凑其余部分。请注意，这是使用 v1 API，您应该更多地查看 v1.1 API

# java - Java Swing中的键盘“举行”事件？

> ID：15487610
> 
> 赞同：0
> 
> 时间：2013-03-18T21:49:16.833
> 
> 标签：java, swing, keylistener

我发现在任何使用 Key Listeners 的类中实现的方法包括 keyPressed、keyReleased 和 keyDown，但我如何拥有它以便在按键保持按下状态时连续发生某些事情？意思是有没有办法实现“keyHeld”类型的场景？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T23:19:47.647

Don't use a a KeyListener. Swing was designed to be used with [Key Bindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html).

I have used a Swing Timer for this type of situation as you are now in full control over the repeat rate. You start the Timer with the keyPressed bindings and stop the Timer with the keyReleased binding. The Swing tutorial also has a section on How to Use Timers.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:54:18.377

有两种通用机制。

`keyPressed`将在按住键时重复调用，直到松开键。但是，在第一次按键和重复按键之间通常会有短暂的延迟。

或者，您可以设置一个标志，表明他们的键已被按下并在释放时重新设置标志。

可能最简单的解决方案是使用某种`List`包含 al，即当前按下的虚拟键代码。然后，您只需要检查此列表以查看它是否包含您需要使用的虚拟键代码，并在它包含时采取适当的措施。

这导致我警告不要从除事件调度线程之外的任何线程交互或更改任何 UI 组件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T21:54:31.070

该`keyTyped`方法在按键按下时连续调用，具有初始延迟：

```
s.....ssssssssssssssssssssssssss 
```

# validation - 支持 HTML5 元素的 XHTML 验证器

> ID：15487613
> 
> 赞同：1
> 
> 时间：2013-03-18T21:49:26.553
> 
> 标签：validation, xhtml-1.0-strict, xhtml, html

我正在开发 HTML5 文档并需要验证它们，但我发现的所有验证器似乎都支持 XHTML 1.0 Strict 或 HTML5。是否有任何验证器可以验证 XML 格式良好并且还支持 HTML5 元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:56:26.257

一个验证器是 W3 验证器，位于...

[http://validator.w3.org/#validate_by_uri+with_options](http://validator.w3.org/#validate_by_uri+with_options)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T21:57:44.540

您可以使用[(X)HTML5 验证器](http://html5.validator.nu/)。就其名称而言，它应该考虑到所有 HTML5 元素。

# mysql - MySQL/ 或 Pentaho Spoon 中的阶段表

> ID：15487616
> 
> 赞同：0
> 
> 时间：2013-03-18T21:49:56.567
> 
> 标签：mysql, pentaho

什么是 Stage Table，我如何创建一个？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:14:36.280

暂存表只是在您的 ETL 流程中用作中间人的表。例如，您可以将所有原始数据复制到临时表中，然后对其进行处理。

你并不总是需要一个。所以问我如何创建一个是错误的问题。

你的数据场景是什么？

最后; 临时表与任何其他表没有什么不同。它存储在数据库中。有时人们有一个用于这些表的临时数据库，但这只是一个普通的数据库。这里没有特殊的技术或对象 - 只是普通的数据库功能。

# php - PHP 联系人框脚本在页面加载时发送电子邮件

> ID：15487618
> 
> 赞同：0
> 
> 时间：2013-03-18T21:50:00.837
> 
> 标签：php, html

所以我试图让一个联系框工作，它确实有效。但每当有人点击联系页面时，它会自动发送一封空白电子邮件。这要怎么阻止？！

PHP

```
<?php $name = $_POST['name'];
$email = $_POST['email'];
$message = $_POST['message'];
$formcontent="From: $name \n Message: $message";
$recipient = "iamtomalmond@gmail.com";
$subject = "Contact Form";
$mailheader = "From: $email \r\n";
mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");
echo "Thank You!" . " -" . "<a href='index.html'> Return Home</a>";
?> 
```

HTML

```
<form action="contact.php" method="POST">
<p>Name</p> <input type="text" name="name">
<p>Email</p> <input type="text" name="email">
<p>Message</p><textarea name="message" rows="6" cols="25"></textarea><br />
<input type="submit" value="Send"><input type="reset" value="Clear">
</form> 
```

提前致谢 ：（

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T21:52:17.563

您需要检查是否提出了`POST`请求，并且只有在这种情况下才执行邮件代码：

```
if ($_SERVER['REQUEST_METHOD'] === 'POST')
{
  // your php code (first block in your question)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:57:17.317

您的页面必须`$_POST`在发送电子邮件之前测试数组的内容：

```
<?php
   if (!is_empty($_POST)) {
      if (isset($_POST['email']) && isset($_POST['name']) && isset($_POST['message'])) {
          // code to send email as in your question code snippet
      } else {
          // optionally display an error message
      }
   }
 ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T21:52:36.457

那是因为您正在调用`mail()`页面加载。如果您只想在提交表单时执行此操作（我怀疑），请`$_POST`在调用之前检查您的某些变量是否存在`mail()`。

```
if (isset($_POST['foo']))
{
     //do stuff here
} 
```

# sql-server - 在 T-SQL 中计算两个日期之间的工作日（扩展）

> ID：15487622
> 
> 赞同：1
> 
> 时间：2013-03-18T21:50:12.060
> 
> 标签：sql-server, tsql, date, count

扩展这个问题：[这里](https://stackoverflow.com/questions/252519/count-work-days-between-two-dates-in-t-sql)

我想计算 t-sql 中两个日期之间的工作日，只是周末，而不是整个工作日（24 小时），假设每个工作日从上午 9 点到下午 5:30。

我如何使用例如 CMS 的方法来做到这一点：

```
 DECLARE @StartDate DATETIME
DECLARE @EndDate DATETIME
SET @StartDate = '2008/10/01'
SET @EndDate = '2008/10/31'

SELECT
   (DATEDIFF(dd, @StartDate, @EndDate) + 1)
  -(DATEDIFF(wk, @StartDate, @EndDate) * 2)
  -(CASE WHEN DATENAME(dw, @StartDate) = 'Sunday' THEN 1 ELSE 0 END)
  -(CASE WHEN DATENAME(dw, @EndDate) = 'Saturday' THEN 1 ELSE 0 END) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:08:02.790

我认为你很好，只需将 THEN 1 更改为 THEN -1

但是，我不完全确定您想对问题的时间部分做什么。

```
DECLARE @StartDate DATETIME
DECLARE @EndDate DATETIME
SET @StartDate = '2013/03/01'
SET @EndDate = '2013/03/31'

SELECT
   (DATEDIFF(dd, @StartDate, @EndDate) + 1)
  -(DATEDIFF(wk, @StartDate, @EndDate) * 2)
  -(CASE WHEN DATENAME(dw, @StartDate) = 'Sunday' THEN -1 ELSE 0 END)
  -(CASE WHEN DATENAME(dw, @EndDate) = 'Saturday' THEN -1 ELSE 0 END) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:14:58.373

这就是我一直在寻找的，这是其他人需要的代码：

参数是：

```
@D1 (StartDate)
@D2 (EndDate)
@T1 (Business Hours - Start)
@T2 (Business Hours - End) 
```

该函数返回一个带有小时数的浮点数。

* * *

```
CREATE FUNCTION [dbo].[WorkHoursDiff] (@D1 as datetime,@D2 as datetime,@T1 as int,@T2 as int)  
RETURNS float AS  
BEGIN 
    if @D1>@D2 return 0

    declare @whd as float

    declare @H1 as float
    declare @H2 as float

    if not (datepart(yyyy,@D1   )=datepart(yyyy,@D2) and datepart(mm,@D1)=datepart(mm,@D2) and datepart(dd,@D1)=datepart(dd,@D2))
        begin
            declare @DD as datetime
            SET @whd=0
            if datepart(dw,@D1)<>1 and datepart(dw,@D1)<>7 
                                        if dbo.GetDateHour(@D1)<@T1 SET @whd = @T2-@T1
            else if dbo.GetDateHour(@D1)>@T2 SET @whd = 0
            else if dbo.GetDateHour(@D1)>=@T1 and dbo.GetDateHour(@D1)<=@T2 SET @whd = @T2-dbo.GetDateHour(@D1)

            SET @DD=@D1 + 1
            while not (datepart(yyyy,@DD)=datepart(yyyy,@D2) and datepart(mm,@DD)=datepart(mm,@D2) and datepart(dd,@DD)=datepart(dd,@D2))
                begin
                    if not(datepart(dw,@DD)=1 or datepart(dw,@DD)=7)  
                         SET @whd=@whd + (@T2-@T1)

                    SET @DD=@DD + 1
                end
                if datepart(dw,@D2)<>1 and datepart(dw,@D2)<>7
                if dbo.GetDateHour(@D2)<@T1 SET @whd = @whd 
                else if dbo.GetDateHour(@D2)>@T2 SET @whd = @whd + @T2 - @T1
                else if dbo.GetDateHour(@D2)>=@T1  and dbo.GetDateHour(@D2)<=@T2 SET @whd = @whd +dbo.GetDateHour(@D2)-@T1

        end
    else
        begin
            if dbo.GetDateHour(@D1)<@T1 SET @H1=@T1
            else if dbo.GetDateHour(@D1)>@T2 SET @H1=@T2
            else SET @H1=dbo.GetDateHour(@D1)

            if dbo.GetDateHour(@D2)<@T1 SET @H2=@T1
            else if dbo.GetDateHour(@D2)>@T2 SET @H2=@T2
            else SET @H2=dbo.GetDateHour(@D2)

            if datepart(dw,@D1)=1 or datepart(dw,@D1)=7  SET @whd=0
            else SET @whd=@H2-@H1
        end
    return @whd

END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T08:11:27.887

发现了这个。。

```
 CREATE FUNCTION dbo.GetWorkingDays
  ( @StartDate datetime,
    @EndDate datetime )
RETURNS INT
AS
BEGIN
  DECLARE @WorkDays int, @FirstPart int
  DECLARE @FirstNum int, @TotalDays int
  DECLARE @LastNum int, @LastPart int
  IF (DATEDIFF(day, @StartDate, @EndDate) < 2)
    BEGIN
      RETURN ( 0 )
    END
  SELECT
   @TotalDays = DATEDIFF(day, @StartDate, @EndDate) - 1,
   @FirstPart = CASE DATENAME(weekday, @StartDate)
                 WHEN 'Sunday' THEN 6
                 WHEN 'Monday' THEN 5
                 WHEN 'Tuesday' THEN 4
                 WHEN 'Wednesday' THEN 3
                 WHEN 'Thursday' THEN 2
                 WHEN 'Friday' THEN 1
                 WHEN 'Saturday' THEN 0
               END,
   @FirstNum = CASE DATENAME(weekday, @StartDate)
                 WHEN 'Sunday' THEN 5
                 WHEN 'Monday' THEN 4
                 WHEN 'Tuesday' THEN 3
                 WHEN 'Wednesday' THEN 2
                 WHEN 'Thursday' THEN 1
                 WHEN 'Friday' THEN 0
                 WHEN 'Saturday' THEN 0
               END
  IF (@TotalDays < @FirstPart)
     BEGIN
       SELECT @WorkDays = @TotalDays
     END
  ELSE
     BEGIN
       SELECT @WorkDays = (@TotalDays - @FirstPart) / 7
       SELECT @LastPart = (@TotalDays - @FirstPart) % 7
       SELECT @LastNum = CASE
         WHEN (@LastPart < 7) AND (@LastPart > 0) THEN @LastPart - 1
         ELSE 0
       END
       SELECT @WorkDays = @WorkDays * 5 + @FirstNum + @LastNum
     END
  RETURN ( @WorkDays )
END
GO 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-11T06:10:31.103

尝试这个

```
Declare @startdate datetime,
@enddate datetime,
@countSunday int,
@countTuesday int,
@countWednesday int,@countThursday int,@countFriday int,@countSaturday int

set @countSunday=0
set @countMonday=0
set @countTuesday =0
set @countWednesday =0
set @countThursday =0
set @countFriday =0
set @countSaturday=0
set @startdate='2018-10-01'
set @enddate='2018-10-20'

while @startdate<=@enddate
Begin
    IF DatePart(WEEKDAY,@startdate) = 1
    SET @countSunday=@countSunday+1
    else if  DatePart(WEEKDAY,@startdate) = 2
      SET @countMonday=@countMonday+1  
      else if  DatePart(WEEKDAY,@startdate) = 3
      SET @countTuesday=@countTuesday+1  
      else if  DatePart(WEEKDAY,@startdate) = 4
      SET @countWednesday=@countWednesday+1  
      else if  DatePart(WEEKDAY,@startdate) = 5
      SET @countThursday=@countThursday+1  
      else if  DatePart(WEEKDAY,@startdate) = 6
      SET @countFriday=@countFriday+1  
      else if  DatePart(WEEKDAY,@startdate) = 7
      SET @countSaturday=@countSaturday+1  
    SET @startdate=DateAdd(d,1,@startdate)
END

select @countSunday as Sunday ,@countMonday as Monday,@countTuesday as Tuesday,@countWednesday as Wednesday,@countThursday as Thursday,@countFriday as Friday,@countSaturday as Saturday 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-11T07:53:41.947

尝试这个

```
DECLARE @DateFrom DateTime ='20181001' , @DateTo DateTime = '20181031'  ;
WITH CTE(dt)
AS
(
SELECT @DateFrom
UNION ALL
SELECT DATEADD(d, 1, dt) FROM CTE
  WHERE dt < @DateTo
)
SELECT datename("dw", dt) as Days,count(datename("dw", dt)) as numberofDays FROM CTE 
group by datename ("dw", dt) 
```

# object - $null 数组上的比较对象

> ID：15487623
> 
> 赞同：8
> 
> 时间：2013-03-18T21:50:22.730
> 
> 标签：object, powershell, compare

Compare-Object cmdlet 有没有办法预测 $Null 值？

例如，当我尝试像这样比较 2 个值时：

```
Compare-Object -ReferenceObject $Value1 -DifferenceObject $Value2 
```

我通常会收到以下错误：

```
Cannot bind argument to parameter 'ReferenceObject' because it is null 
```

我的问题是：有没有办法说：如果其中任何一个等于 $null ；做一点事

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2017-08-11T12:09:09.597

这接受空值：

```
Compare-Object -ReferenceObject @($Value1 | Select-Object) -DifferenceObject @($Value2 | Select-Object) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T21:58:32.653

比较对象的帮助 说：

如果参考集或差异集为空 ($null)，Compare-Object 将生成终止错误。

因此，您唯一的选择似乎是陷阱或尝试/捕获。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T20:10:40.763

```
 if($Value1 -eq $NULL){
     return
 }
 Compare-Object -ReferenceObject $Value1 -DifferenceObject $Value2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-11T17:14:10.500

如果为空，这会做一些事情：

```
if ($Value1 -ne $null -and $Value2 -ne $null) {
    Compare-Object -ReferenceObject $Value1 -DifferenceObject $Value2
}
else {
    #do something
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-10T22:59:22.407

您可以使用一种解决方法

一、创建两个空数组对象

```
$reference = @()
$difference = @() 
```

现在

如果不为空，请检查您的源数组并将它们添加到先前创建的数组中

```
If( $array1 -ne $null ){ $reference.addrange($array1) 
If($array2 -ne $null) { $diffrence.addrange($array2) 
```

现在您确定您的参考数组和差异数组不为空，即使它们可能为空，您可以安全地进行比较

```
Compare-object -referenceObject $reference -differenceObject $difference 
```

# python - python将列表列拆分为原始列表中的多个列

> ID：15487624
> 
> 赞同：1
> 
> 时间：2013-03-18T21:50:41.997
> 
> 标签：python, list, split

我有一个列表，其中包含许多本身就是列表的条目。以下是主列表中的一些子列表：

```
>>> data[4]
['', u'BNE JCT TR92 FLO GRJCT-PERRY-BITTERSWEET', u'BNE_JCT TR92 TR92 (XF/ALTW/*)', u'KARMA-PERRY-BITTERSWEET_161', u' 01', -15.88, '']
>>> data[5]
['', u'CRETE-STJHN FLO DMNT-WLTN 765+SPS', u'ST_JOHN 34519 A (LN/NIPS/CE)', u'SPS WILTON-DUMONT+PWRTN 5+JOLIET 7', u' 01', -8.14, '']
>>> data[6]
['', u'HRNR_TR_1_TR_1_XF', u'HRNR TR_1 TR_1 (XF/AMMO/*)', '', u' 01', 1.4, '']
>>> data[7]
['', u'INDPDN  INDPDBRYAN69_11 LN', u'INDPDN INDPDBRYAN69_1 1 (LN/ALTW/ALTW)', u'ACTUAL', u' 01', 1.26, '']
>>> 
```

我想将子列表中的第 3 列拆分为 4 个组件，如下所示：

*   从第一个字符到最后一个非空格字符的所有字符串
*   `(`和之间封装的字符串`/`
*   `/`和之间封装的字符串`/`
*   `/`和之间封装的字符串`)`

所以我想要相同的列表，但如上所述将第 3 列分成 4 列。

例子：

```
['', u'BNE JCT TR92 FLO GRJCT-PERRY-BITTERSWEET', u'BNE_JCT TR92 TR92', u'XF',u'ALTW','*', u'KARMA-PERRY-BITTERSWEET_161', u' 01', -15.88, ''] 
```

我也不确定`u`元素之前的 代表什么。我一直在搞乱，`re.split()`但无法让这个保留原始列表但将子列表的第 3 列拆分为 4 个附加列的工作。

我很感激帮助。

[我进行了编辑以删除 arraylist 并将其替换为 list]**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:18:20.360

这是一个正则表达式模式，它将匹配您想要的字符串部分：

```
pattern = r"(.+) \((.+)/(.+)/(.+)\)" 
```

这可能是完成这项工作的最简单的正则表达式。

以下是你如何使用它：

```
import re

for row in data:
    row[2:3] = re.match(pattern, row[2]).groups() 
```

那里发生了很多事情。外循环很容易理解。内部有两个部分：

1.  `re.match(pattern, row[2]).groups()`执行正则表达式匹配，并返回找到的值的元组（例如`('BNE_JCT TR92 TR92', 'XF', 'ALTW', '*')`）。
2.  第二位是切片分配。`row[slice] = some_sequence`用 中的值替换指定的切片`some_sequence`。如果序列中的值数量与切片中的值不同，则列表将改变大小！在这种情况下，我们将一个单值切片（从索引 2 开始，在索引 3 之前停止）替换为从正则表达式匹配中获得的四个值。

请注意，如果正则表达式与任何行中的值都不匹配，此代码将引发异常。如果您的数据有任何可能“混乱”，您应该添加一些额外的逻辑来检测这一点，而不是让它爆炸。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T22:17:10.623

前面`u`的代表 unicode，允许字符串包含 unicode 字符，用于非 python 3.0+ 版本（python 3.0+ 默认为 unicode）

至于您的拆分，您可以执行以下操作以拆分为您想要的列：

```
# search for parts you need in column 3
for subitem in re.findall("(.*?) \((.*?)\)", item[2]):
    temp_split = [subitem[0]]
    temp_split.extend(subitem[1].split("/")) 
```

您不能在列表中间添加列。
您可以像这样创建一个新列表：

```
for item_index in range(len(data)):
    item = data[item_index]

    for subitem in re.findall("(.*?) \((.*?)\)", item[2]):
        # part before the ( )
        temp_split = [subitem[0]]
        # part in the ( )
        temp_split.extend(subitem[1].split("/"))

    temp_item = item[:2]
    temp_item.extend(temp_split)
    temp_item.extend(item[3:])

    data[item_index] = temp_item 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T22:17:30.327

```
import re
data = ['', u'BNE JCT TR92 FLO GRJCT-PERRY-BITTERSWEET', u'BNE_JCT TR92 TR92 (XF/ALTW/*)', u'KARMA-PERRY-BITTERSWEET_161', u' 01', -15.88, '']
_data =[]
tempStr = ""
for i in data:
    if re.match("(.+/.+/.+)", str(i)):
        for char in i:
            if (char != "(" and char != "/" and char != ")"):
                tempStr += char
            else:
                _data.append(tempStr)
                tempStr = ""
    else:
        _data.append(i)
print _data 
```

该脚本将给出以下输出：

```
['', u'BNE JCT TR92 FLO GRJCT-PERRY-BITTERSWEET', u'BNE_JCT TR92 TR92 ', u'XF', u'ALTW', u'*', u'KARMA-PERRY-BITTERSWEET_161', u' 01', -15.88, ''] 
```

# python - Ruby optparse 限制

> ID：15487628
> 
> 赞同：8
> 
> 时间：2013-03-18T21:51:02.537
> 
> 标签：python, ruby, command-line-arguments, argparse, optparse

我目前使用 Python 编写脚本，但出于几个原因我想尝试 Ruby。在上周，我查看了很多示例代码并阅读了很多文档。我担心的一个问题是 Ruby 中缺少适当的命令行参数解析库。Ruby 专家，不要生我的气——也许我不知道。这就是我在这里的原因。

在 Python 中，我习惯于使用`argparse`它，我认为它简直是完美的（也许适合我的需要）。不幸的是，`OptionParser`它不允许这样做的灵活性和功能`argparse`。

我现在特别关注以下限制：

1.  如何制作**互斥选项列表**？例如，一个名为`test`.

    ```
    usage: test [-h] [-a | -b | -c] [-d] [filename] 
    ```

    我可以编写一些代码，例如：

    ```
    # implement a ----------------------------------------------
    opts.on( "-a", "--alpha",
             "implement alpha") do
        #...
    end 
    ```

    等等。`a`但是，除非我对它们的排列进行编码并进行一些错误处理，否则我无法制作`b`和`c`互斥。例如

    ```
    test -ab #should through an error 
    ```

    在 Python 中，我可以很简单地做到这一点：

    ```
    # create an command line argument parser object
    cmd_line_parser = argparse.ArgumentParser()

    # create a mutually exclusive group
    cmd_line_group = cmd_line_parser.add_mutually_exclusive_group() 
    ```

    1.  其次，除非我专门为这种排列编写代码`-d`，否则我无法配对。`-a`疯了吧。

    2.  我必须自己写`[OPTION]`清单；除非并且直到我对所有可能的输入排列进行黑盒测试并将它们映射到黑盒列表，否则我无法知道我是对还是错。

    3.  此外，强制参数再次需要使用特殊代码处理。

`optparse`使用Ruby 或其他库是否可以轻松处理这些约束？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T22:34:17.737

有一个具有 Python 和 Ruby 实现的[docopt库。](http://docopt.org/)该`test`程序的规范是：

```
usage: test [-h] [-a | -b | -c] [-d] [<filename>] 
```

a,b,c 选项是互斥的（`-ab`产生错误），它支持组合选项：`-ad`,`-da`等。

使`filename`参数强制：

```
usage: test [-h] [-a | -b | -c] [-d] <filename> 
```

# javascript - Non-jQuery alternative to FitText.js?

> ID：15487629
> 
> 赞同：8
> 
> 时间：2013-03-18T21:51:16.323
> 
> 标签：javascript, jquery

I'm working on a small project at the moment and one of the last things I need to do is create a nice responsive heading.

I found [FitText.js](http://fittextjs.com/) which seems something I like a lot and exactly what I need. The only problem is that this plugin uses jQuery and I haven't used jQuery in the project at all and don't want to just to use one small plugin. Have you ever heard of or used a similar plugin to FitText.js except it does not require jQuery?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-19T14:42:43.730

Jeremy Keith (@adactio) is maintaining a non-jQuery alternative to FitText:

[https://github.com/adactio/FitText.js](https://github.com/adactio/FitText.js)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-18T23:01:39.560

Something like this should get you going, test thoroughly first. Essentially you scale the size of the text based on the offsetwidth of the element. You may want to set min and max font sizes, but I don't see the point.

The resize function can be about two lines of code.

```
<style type="text/css">
  div {
    border: 1px solid blue;
    white-space: nowrap;
    text-align: center;
  }
</style>

<script>

function resize(el, factor) {

  // Get element width
  var width = el.offsetWidth;

  // set default for factor
  if (typeof factor == 'undefined') {
    factor = 5;
  }

  // Set fontsize to new size
  el.style.fontSize = (width / factor | 0) + 'px';
}

window.onload = function() {
  function doResize() {resize(document.getElementById('d0'), 6);}
  window.onresize = doResize;
  doResize();
}

</script>

<div id="d0">Some text</div> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T22:59:54.783

OP,

jQuery compressed ~ 94 KB. [Zepto](http://zeptojs.com/#download) compressed ~ 9.7 KB.

In short, if you include Zepto instead, and change the reference to jQuery on the last line of the plugin to Zepto — it just *works*. See [this Fiddle](http://jsfiddle.net/aL26a/)

```
(function ($) {
    $.fn.fitText = function (kompressor, options) {
        // Setup options
        var compressor = kompressor || 1,
            settings = $.extend({
                'minFontSize': Number.NEGATIVE_INFINITY,
                'maxFontSize': Number.POSITIVE_INFINITY
            }, options);
        return this.each(function () {
            // Store the object
            var $this = $(this);
            // Resizer() resizes items based on the object width divided by the compressor * 10
            var resizer = function () {
                $this.css('font-size', Math.max(Math.min($this.width() / (compressor * 10), parseFloat(settings.maxFontSize)), parseFloat(settings.minFontSize)));
            };
            // Call once to set.
            resizer();
            // Call on resize. Opera debounces their resize by default. 
            $(window).on('resize', resizer);
        });
    };
})(Zepto); 
```

* * *

According to [the docs](http://zeptojs.com/):

> Zepto is a minimalist JavaScript library for modern browsers with a largely jQuery-compatible API.

So, in the case of someone who wants to use a jQuery plugin* without having to include the whole jQuery library, Zepto seems like a reasonable workaround.

> *While 100% jQuery coverage is not a design goal, the APIs provided match their jQuery counterparts.

Hope that helps.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-28T15:40:50.780

I guess this problem has been solved by now, however I was looking for a similar solution a while back. I ended up making my own Fittext plugin since I needed to be able to have to switch it on only above a specific minimum screen width. So if anyone runs into the same problem, here's the solution I came up with:

[https://github.com/dinealbrecht/fittext](https://github.com/dinealbrecht/fittext)

# mysql - 当多边形出现错误时，如何从 WKT 在 Ruby 中创建 RGeo 多边形

> ID：15487630
> 
> 赞同：7
> 
> 时间：2013-03-18T21:51:21.760
> 
> 标签：mysql, ruby, gis, polygon, rgeo

我正在使用以 WKT 格式存储多边形的 MySQL 数据库。数据库中的许多多边形都有重复的点（例如，在下面的示例中，点 -122.323502 47.600959 重复了 3 次）。

当尝试在这些多边形上调用 RGeo::Cartesian::Factory.parse_wkt() 时，结果为零。

如何在不修改多边形数据的情况下从这些多边形创建 RGeo 对象。

```
poly = "MULTIPOLYGON(((-122.362163 47.618641,-122.344621 47.592555,-122.332017 47.592458,-122.32748 47.59241,-122.326109 47.592652,-122.324738 47.592895,-122.323147 47.593478,-122.321412 47.59411,-122.320826 47.594984,-122.320669 47.596296,-122.321149 47.598627,-122.323502 47.600959,-122.323502 47.600959,-122.323502 47.600959,-122.324071 47.601688,-122.320757 47.601688,-122.32073 47.604262,-122.320767 47.607663,-122.320746 47.609703,-122.320723 47.611938,-122.320714 47.612812,-122.320772 47.614075,-122.320799 47.618495,-122.362163 47.618641)))"

parsed_poly = RGeo::Cartesian::Factory.new().parse_wkt(poly)

=>nil 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-31T06:23:49.403

尝试这个：

```
RGeo::Geos.factory(:srid => 4326).parse_wkt(wkt_string) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-10T01:43:36.370

```
polygon = RGeo::Geographic.spherical_factory.parse_wkt(params[:polygon]) 
```

为我工作！我正在使用 Rails + mysql

首先，我尝试像这样在 Rails 中创建地点记录：

```
@place = Place.new(params) 
```

顺便说一句，我的位置表是这样的：

```
`polygon` polygon DEFAULT NULL,
`latlon` point DEFAULT NULL, 
```

所以首先我尝试在模型中做所有事情，并希望 rgeo 会自动将多边形和纬度从文本更改为几何图形，并像魅力一样保存在 mysql 中。它确实在 latlon 工作，因为它是一个**点**类型。这是我添加到 place.rb 的内容

```
self.rgeo_factory_generator = RGeo::Geos.method(:factory)
set_rgeo_factory_for_column(:latlon, RGeo::Geographic.spherical_factory)
set_rgeo_factory_for_column(:polygon, RGeo::Geographic.spherical_factory) 
```

不幸的是，**多边形**类型不起作用。

我在 rgeo/reographic/interface.rb 上找到了这个

> 这个实现没有实现一些更高级的几何操作。尤其是：
> 
> *   `Feature::Geometry#intersects?`大多数类型都没有实现诸如关系运算符之类的。
> *   `Feature::Geometry#union`大多数类型都没有实现诸如关系构造函数。
> *   大多数类型都没有实现缓冲区、凸包和包络计算。边界可用，除了`GeometryCollection`。
> *   长度计算可用，但面积不可用。距离仅在点之间可用。
> *   对某些但不是所有类型都实施了平等和简单性评估。
> *   未实现多边形和多多边形的断言。

好的。所以我需要自己做。我尝试了以下但不工作。

```
polygon = RGeo::Geographic.spherical_factory.parse_wkt(params[:polygon])
params[:polygon] = polygon
@place = Place.new(place_params)
@place.save 
```

但这有效！

```
polygon = RGeo::Geographic.spherical_factory.parse_wkt(params[:polygon])
@place.polygon = polygon
@place.save 
```

我想也许 ActiveRecord 不能同时处理其他类型和多边形对象！

# java - 我们可以在没有休眠的情况下使用jpa吗

> ID：15487631
> 
> 赞同：35
> 
> 时间：2013-03-18T21:51:25.347
> 
> 标签：java, hibernate, jpa, orm

我是 JPA 的新手。

据我了解，JPA 是规范，Hibernate 实现了 JPA 并提供附加功能以及 JPA 方法。

但是我正在阅读 JPA 教程，其中使用`EntityManager`对象我们可以对数据执行 CRUD，而无需使用 Hibernate 库！

所以谁能告诉我

1.  我可以使用`EntityManager`方法单独使用 JPA，而不使用 Hibernate 吗？

请提及一些有用的链接或示例。

非常感谢回复。
谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-18T22:20:10.170

你是对的 JPA 是一个规范。Hibernate 和 EclipseLink 是它的几个实现。

您必须指定持久性提供程序（Hibernate、EclipseLink）才能使用 JPA 实现。持久性提供程序具有 JPA 规范的实现类。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T22:15:55.853

你不能只使用 JPA，因为它是一个 API =)，但是有很多 JPA 实现：

1.  [EclipseLink](http://www.eclipse.org/eclipselink/)
2.  [对象数据库](http://www.objectdb.com/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-18T22:16:43.583

如果您不想使用 Hibernate（或任何其他 JPA 提供程序），那么您必须通过提供 javax.persistence.spi.PersistenceProvider 接口的实现来实现您自己的提供程序。问题是，你为什么需要重新发明轮子？如果您不喜欢 Hibernate，您可以使用众多其他 JPA-Provider 中的一种来选择

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-05-24T00:55:31.240

虽然这个线程很老，但我觉得值得分解。

**JPA：**这只是一个规范。用更简单的话来说。接口集。

**Hibernate、Eclipse Link、Apache OpenJPA：** JPA 的众多实现中的一小部分。除了为 JPA 规范提供基本实现之外，Hibernate 和其他实现还提供了它们的附加功能。您可以根据自己的需要选择

**春季数据：**

*   它提供了额外的抽象。
*   当您使用 Hibernate/Eclipse Link 时，您仍然需要编写一些样板代码。通过使用 Spring JPA，您可以避免这种情况。
*   最需要注意的是，由于 Springboot 的自以为是，Spring 数据默认使用 Hibernate。如果您愿意，可以更改默认行为。
*   当您在使用 Spring JPA（具有默认配置）的 Springboot 项目中运行以下命令时，您将看到正在使用 Hibernate jar。

> 马文：`mvn dependency:tree`
> 
> 摇篮：`gradle dependencies`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-03-05T17:37:01.917

仅当应用程序服务器已经具有 JPA 实现时，才可以在没有 JPA 提供程序（即 Hibernate、EclipseLink 等）的情况下使用 JPA。您很可能在教程中看到过在此类应用程序服务器上执行的演示。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-09-14T14:53:05.380

您可以在不使用 Hibernate 的情况下单独使用 JPA，并且之前应该了解 Hibernate 与 JPA 之间的要点，如下所示。

休眠

1.  Hibernate 是一个 ORM 框架，它支持完整的 ORM 并使用 JPA 功能。
2.  二级缓存可用，所以性能非常好
3.  它支持 .Net 使用 NHibernate 工具
4.  它生成 HQL(Hibernate Query Language)

JPA

1.  JPA 是在 J2EE 1.5 中发布的 EJB 规范的一部分，它将用于 java 和 J2EE
2.  二级缓存不可用，因此性能不佳。
3.  它不支持.Net
4.  它生成JPQL（Java Persistence Query Language）
5.  在像 Hibernate 这样的任何持久性提供程序之上，我们可以使用 JPA。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-01-23T14:04:11.103

你不能单独使用 JPA。JPA 是一种规范，它为对象关系映射和管理持久对象定义了一个 API，您需要一个 JPA 提供者来实现它，例如 Hibernate、EclipseLink。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-08T12:33:00.830

不，您不能单独使用 JPA 执行 CRUD 操作。由于 JPA 只是一个规范，因此您需要实现来执行数据库操作。实现由 Hibernate、EclipseLink、Ibatis 等提供。

# teamcity - 无法同时登录同一主机上的多个 TeamCity 实例

> ID：15487632
> 
> 赞同：3
> 
> 时间：2013-03-18T21:51:32.393
> 
> 标签：teamcity, instances

我是新手`TeamCity`，需要完成以下任务：在单个 Windows 机器上安装并运行两个 TeamCity 实例。构建代理安装在其他机器上。

我让两个实例都运行了（使用[此处底部答案](https://stackoverflow.com/a/13198414/96505)中的说明安装了[如何在同一台服务器上运行多个 teamcity 实例的](https://stackoverflow.com/q/6267737/96505)问题）但问题是我无法同时登录 2 个 Web 界面。

一旦我登录到第二个界面，第一个界面就会将我注销。
听说是关于cookies的，我需要修改一下web界面的url就不会`localhost:port#`了，这是通过修改`<context>`属性来完成的。我试图改变`<context path = "/smth">`并期待现在我的网络界面 url 将是`localhost:port/smth`- 但这不起作用。
有人可以在这里帮助我吗？

# dynamics-crm-2011 - 确定 iFrame 的高度

> ID：15487633
> 
> 赞同：2
> 
> 时间：2013-03-18T21:51:36.297
> 
> 标签：dynamics-crm-2011, dynamics-crm, dynamics-crm-4

我在 Dynamics CRM（2011 内部部署）中有一个 iFrame，其中包含一个加载交易行项目（如发票行项目）的 aspx 文件。行项目的数量变化很大，从 1 到 8,000。我需要调整 iFrame 的高度，使其不显示垂直滚动条。我怎样才能做到这一点？现在我正在使用这个 JS 函数，但它非常不准确：

```
function setIframeHeight() {
        var rowcount = getRowCount();
        var multiplier = 19;

        if (rowcount < 25) {
            multiplier = 13;
        }
        else if (rowcount > 50) {
            multiplier = 23;
        }
        else if (rowcount > 150) {
            multiplier = 32;
        }
 window.parent.parent.frames[0].document.getElementById('IFRAME_TransactionProduct_RA_d').parentNode.height = rowcount * multiplier;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:38:52.930

您可以使用 jquery offset().top 函数：

[http://api.jquery.com/offset/](http://api.jquery.com/offset/)

通过获取页​​面上最低控件的顶部来确定页面的高度：

```
function setIframeHeight() {
    var element = $('#idOfLowestControlOnPage');

   window.parent.parent.frames[0].document.getElementById('IFRAME_TransactionProduct_RA_d').parentNode.height = element.offset().top + element.height();
} 
```

# django-models - Django中TextField的硬包装

> ID：15487635
> 
> 赞同：1
> 
> 时间：2013-03-18T21:51:37.770
> 
> 标签：django-models, model, textfield

我`TextField`在 django 中使用，我有一个表格供用户输入段落。我希望用硬包装保存这段文字，以便以后显示时在间距和缩进方面看起来完全相同。

当我使用管理工具进入段落时，它会按照我的意愿出现。但是，当我在模板中引用它时，所有句子都流在一起，没有正确的间距和换行符。在模板中使用时如何使 TextField 硬包装？

这是我的 TextField 声明：

```
class Description(models.Model):
summary=models.TextField(verbose_name="My Summary") 
```

我通过管理员输入以下示例：

```
Hi I am using TextField in django and I have a form for the user to enter a passage. 

I want this passage to be saved with hard wrap in such a way that it appears the exact
same in terms of spacing and indentation and what not. When I use the admin to enter
the passage,

It appears as I want it but when I reference it on a template. All the sentences follow
up without the correcect spacing and newlines. how do I achieve this please 
```

`info=Description.objects.get(pk=1)`当我在视图或`{{ info }}`模板中使用时，它看起来并不完全像上面那样。

# python - 使用 MongoDB 进行集成测试 - 身份验证

> ID：15487637
> 
> 赞同：1
> 
> 时间：2013-03-18T21:51:56.130
> 
> 标签：python, mongodb, flask

我有一个使用 mongodb 的模块，我正在为它编写一个集成测试。我的测试基于[此处](http://blogs.skicelab.com/maurizio/python-unit-testing-and-mongodb.html)的示例。

我看到的错误是`OperationFailure: command SON([('listDatabases', 1)]) failed: need to login` 当我打电话时`conn.database_names()`

问题是我不确定如何登录。我尝试将 --username 和 --password 参数添加到 subprocess.Popen，但没有成功，并且 pymongo.Connection 对象没有身份验证方法，尽管 pymongo 数据库对象有。

有没有一种方法可以在我从 Popen 启动 mongo 时进行身份验证，或者重新构建它以便我可以访问数据库对象？

```
class MongoTemporaryInstance(object):

    _instance = None

    @classmethod
    def get_instance(cls):
        if cls._instance is None:
            cls._instance = cls()
            atexit.register(cls._instance.shutdown)
        return cls._instance

    def __init__(self):
        self._tmpdir = tempfile.mkdtemp()
        self._process = subprocess.Popen(['mongod', '--bind_ip', 'localhost',
                                      '--port', str(MONGODB_TEST_PORT),
                                      '--dbpath', self._tmpdir,
                                      '--nojournal', '--nohttpinterface',
                                      '--noauth', '--smallfiles',
                                      '--syncdelay', '0',
                                      '--maxConns', '10',
                                      '--nssize', '1', ],
                                         stdout=open(os.devnull, 'wb'),
                                         stderr=subprocess.STDOUT)

        for i in range(3):
            time.sleep(0.1)
            try:
                self._conn = pymongo.Connection('localhost', MONGODB_TEST_PORT)
            except pymongo.errors.ConnectionFailure:
                continue
            else:
                break 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:27:57.053

问题正如@RobMoore 所建议的那样 - 有一个旧的 mongodb 进程在该端口上使用身份验证运行。我改变了端口，它工作了！

# linux - 在登录时运行一次性命令 (Linux)

> ID：15487638
> 
> 赞同：2
> 
> 时间：2013-03-18T21:51:58.187
> 
> 标签：linux, bash, ubuntu

我希望每次登录到我的 Ubuntu 机器时都打开一个 ssh 隧道。`.bashrc`这似乎是错误的地方，因为我整个会话只需要一个隧道，而不是每个`xterm`. `init.d`似乎是错误的，因为我希望一个用户使用这个。`.bash_profile`仅用于 shell 登录（我认为），我也需要打开它以供 GUI 使用。
放置`ssh`打开隧道的命令的正确位置在哪里，以便我登录机器（GUI或shell）后它会在后台打开，并保持打开状态直到我注销？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:01:08.423

利用：

```
~/.bash_login or ~/.bash_profile or ~/.profile 
```

在登录时运行命令和

```
~/.bash_logout 
```

在注销时运行命令或终止进程。

# android - android - 处理应用程序在非主要活动中启动

> ID：15487640
> 
> 赞同：1
> 
> 时间：2013-03-18T21:52:01.787
> 
> 标签：android, activity-lifecycle

我刚刚注意到 android 在后台杀死它后假装恢复你的应用程序，方法是在你之前的活动中重新启动你。

1) 我可以禁用此功能吗？

我的问题在于我的 ListsActivity。它传递了一个列表数组，其中包含要显示给用户的项目。有些是文件夹 - 选择后，我会打开另一个 ListsActivity，其中包含该文件夹内容的数组。例如，如果用户决定搜索特定文件夹及其子文件夹中的所有项目，则可以动态生成列表。

如果我的应用程序在我的 ListsActivity 中重新启动，我不知道没有该列表数组我在哪里。

2) 我该怎么办？

- 我不想在每次调用 onPause 时都保留数组。数组在树的顶部可能很大。更不用说后面历史中的所有 ListsActivity 了。

3) 如果我发现我没有列表数组，是否可以从 ListsActivity onCreate 无缝重启应用程序？我的意思是不显示 ListsActivity 然后闪烁到主要活动。

编辑 - 请注意，这涉及递归，因为用户可以在任何时间点在历史记录中拥有任意数量的活动。所以我还有一个问题：

4）如果以这种方式重新启动 - 当我回击时，我有完整的回击历史吗？这些活动中的每一项都必须重新创建，对吗？我打开了另一个问题来询问如何在这里进行测试：[如何测试您的应用程序被杀死并重新启动？](https://stackoverflow.com/questions/15488228/how-to-test-your-app-being-killed-and-restarted)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:59:23.650

您可以在 onPause 中调用 finish()，当再次启动您的应用程序被重置时。或者您可以覆盖方法 onSaveInstanceState 和 OnRestoreInstanceState。

# linux - 是否有用于在 Linux 上创建环回设备的 golang 库？

> ID：15487643
> 
> 赞同：2
> 
> 时间：2013-03-18T21:52:13.640
> 
> 标签：linux, go, system-calls

我有一个文件。我们称它为“x”。我想将“x”与 linux 中的环回设备相关联。在 bash 中，我会输入：

```
losetup -f x 
```

这将创建类似 /dev/loop0 的东西，我可以将其安装在任何我想要的地方。当它未安装时，我可以使用以下内容销毁环回文件：

```
losetup -d /dev/loop0 
```

我希望能够在 golang 中做同样的事情，而无需从 go 程序中调用 losttup。当我查看 losttup 源代码时，是否有某个库可以实现这一点，它看起来有些棘手，尤其是创建部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T23:03:15.777

我不认为有一个 losttup 库:-(

如果你真的不想从你的代码中调用 losttup （恕我直言，这是最明智的做法），那么我[会将 losttup.c](http://code.metager.de/source/xref/linux/klibc/usr/utils/losetup.c)源代码复制到我的 go 项目中，重命名 main() 函数，然后使用[cgo](http://golang.org/cmd/cgo/)直接调用重命名的 main 函数或相关的内部函数。

# sql - T-sql case 返回错误值

> ID：15487651
> 
> 赞同：0
> 
> 时间：2013-03-18T21:52:44.270
> 
> 标签：sql, sql-server, tsql

我正在努力让我的 SQL 查询正常工作。当我无法找到一行时，我想返回一行，就像图片中的行一样，但我希望将 ifuserholdscertificate 设置为“否”。

```
SELECT tuc.id,
       tu.firstName,
       tuc.uid,
       tuc.value,
       tc.name,
       count(tuc.value) over (PARTITION BY tuc.uid) AS 'amount',
       'certificate DESIRABLE' AS 'typeofthing' ,
       'YES' AS 'HasorNot',
       ifuserholdscertificate = CASE
                                    WHEN count(tuc.value) = 0 THEN 'NO'
                                    ELSE 'YES'
                                END
FROM t_user_certificates tuc,
     t_certificates tc,
     t_users tu
WHERE tuc.value IN (4,
                    12,
                    31)
  AND tuc.value = tc.id
  AND tu.id = tuc.uid
GROUP BY tuc.id,
         tu.firstName,
         tuc.uid,
         tuc.value,
         tc.name 
```

这是查询生成的数据！

![在此处输入图像描述](../Images/c9c5e612627b957f6dce0bf9876a41c9.png) 正如您所看到的，即使有些人在金额行中只得到 2，它仍然不会获取一行并将 ifuserholdscertificate 设置为“否”。

**根据要求更新！**

```
select  tuc.id,
count(tuc.value) as 'counten',
tu.firstName,
tuc.uid,
tuc.value, 
tc.name, 
count(tuc.value) over (PARTITION BY tuc.uid) as 'amount',
'certificateDESIRABLE'  as 'typeofthing' ,
'YES' as 'HasorNot',
HasOrders = CASE
                WHEN count(tuc.value) = 0 THEN 'NO'
                ELSE 'YES'
            END
from t_user_certificates tuc                   
left outer join t_certificates tc
on tuc.value = tc.id
left outer join t_users tu
on tu.id = tuc.uid
GROUP BY tuc.id, tu.firstName, tuc.uid, tuc.value, tc.name 
```

![在此处输入图像描述](../Images/d7f6622e1c511d9921df3ab06ebc651f.png)

计数中总是一个 1 并且总是“是”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:28:50.450

您可能会得到空值而不是您没有考虑的零值。我会试试这个：

```
ifuserholdscertificate = CASE                                  
    WHEN (count(tuc.value) = 0 or count(tuc.Value) = null) THEN 'NO'
    ELSE 'YES'
    END 
```

我不明白你为什么说人们得到 2，然后占零并期待一个“不”的答案。如果不了解您正在收集的源数据，就很难在引用之前知道数据的样子。您也在使用窗口函数（ over(partion by..) ），这将提供与常规计数函数不同的数据。如果您的目标是在窗口函数上使用 case when 表达式，则必须先执行嵌套 select 或 cte 以获取数字，然后再对它们执行逻辑。

像这样的东西：

```
declare @Person Table ( personID int identity, person varchar(8));

insert into @Person values ('Brett'),('Sean'),('Chad');

declare @Orders table ( OrderID int identity, PersonID int, Desciption varchar(32), Amount int);

insert into @Orders values (1, 'Shirt', 20),(2, 'Shirt', 22),(2, 'Shoes', 52);

With a as 
    (
    Select 
        p.person
    ,   count(o.orderID) over(partition by person) as Count
    from @Person p
        left join @Orders o on p.personID = o.PersonID
    )
select
    person
,   case when Count = 0 then 'No' else cast(Count as varchar(8)) end as Count
from a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T22:51:14.313

在查询中添加一列以进行调试。并用您的屏幕截图显示这些结果。

```
MyCOUNT = count(tuc.value), 
```

我的罗斯文示例工作正常。当父客户没有订单（行）时，我得到“否”。

......

```
Use Northwind
GO

Select 
    custs.CustomerID,
    MyCOUNT = count(ords.OrderID),
    HasOrders = CASE
        WHEN count(ords.OrderID) = 0 THEN 'NO'
        ELSE 'YES'
    END
from 
    [dbo].[Customers] custs left outer join [dbo].[Orders] ords on custs.CustomerID = ords.CustomerID
GROUP BY 
    custs.CustomerID
order by 2 
```

以下是一些额外的查询来显示正在发生的事情：

```
Select Label = 'You get no results here', custs.CustomerID , ords.OrderID 
from 
    [dbo].[Customers] custs join [dbo].[Orders] ords on custs.CustomerID = ords.CustomerID
Where
    ords.OrderID IS NULL

Select Label = 'You get Customers with no Orders here', custs.CustomerID , ords.OrderID 
from 
    [dbo].[Customers] custs left outer join [dbo].[Orders] ords on custs.CustomerID = ords.CustomerID
Where
    ords.OrderID IS NULL

Select Label = 'You get Customers with or without Orders here', custs.CustomerID , ords.OrderID 
from 
    [dbo].[Customers] custs left outer join [dbo].[Orders] ords on custs.CustomerID = ords.CustomerID 
```

在这里您可以获得 pubs 和 Northwind 数据库。这很有帮助，因为大多数开发人员已经安装了这些数据库（和 AdventureWorks）来解决这种情况。

[http://msdn.microsoft.com/en-us/library/ms143221(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms143221(v=sql.105).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T15:23:14.787

这可能更像您正在寻找的内容。你总是返回 1，并且没有用户没有证书，因为你在 where 子句中有 IN 位。因此，即使使用外连接，您也只能从 t_user_certificates 中返回具有这些值的行。它实际上变成了一个内部连接。ANSI 连接语法是您的朋友。它将 JOIN 逻辑与过滤器分开。

```
SELECT tuc.id,
       tu.firstName,
       tuc.uid,
       tuc.value,
       tc.name,
       count(tuc.value) AS 'amount',
       'certificate DESIRABLE' AS 'typeofthing' ,
       'YES' AS 'HasorNot',
       ifuserholdscertificate = CASE
                                    WHEN count(tuc.value) > 0 THEN 'YES'
                                    ELSE 'NO'
                                END
FROM
    t_users tu
LEFT JOIN t_user_certificates tuc
    ON
    tu.id = tuc.uid
    AND 
    tuc.value IN
    (
        4
        , 12
        , 31
    )
LEFT JOIN
     t_certificates tc
    ON
    tuc.value = tc.id

GROUP BY tuc.id,
         tu.firstName,
         tuc.uid,
         tuc.value,
         tc.name; 
```

# r - 查找数据框行名的交集

> ID：15487653
> 
> 赞同：5
> 
> 时间：2013-03-18T21:52:50.397
> 
> 标签：r, date, dataframe, intersect

我有两个数据框。两者中的行名都是日期。我想要做的是，我想在两个数据框中选择所有常见的行（具有相同的日期）并创建一个只有这些常见行的新数据框。

当然，各个列会彼此相邻。

有人可以帮忙吗？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T21:55:27.877

尝试：

```
merge(df1, df2, by="row.names")
?merge 
```

也可以使用 by=0 代替 'row.names'。顺便说一句，rownames 不是 R Date 类，而是字符值。我想也可以这样做：

```
 cbind( df1[ intersect(rownames(df1), rownames(df2)), ] ,
        df2[ intersect(rownames(df1), rownames(df2)), ] ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-27T01:20:15.533

根据 BondedDust 的回答，如果您使用他的建议的第一行，您可以获得所需的数据，因为您将使用函数“intersect”定义数据的交集，使用运算符（'['和']') 并使用 'cbind' 函数按列绑定数据。

```
cbind( df1[ intersect(rownames(df1), rownames(df2)), ]) 
```

# c++ - this->operator=() 不工作

> ID：15487654
> 
> 赞同：-2
> 
> 时间：2013-03-18T21:52:58.143
> 
> 标签：c++, class, operators, runtime-error

嗨，我使用 DirectX 在 C++ 中制作游戏

但我也有游戏的控制台版本（使用“X”和其他字符来表示事物）

我有以下代码：

```
Unit::Unit(UnitType u){
    ZeroAll();                        // function that zeros all variables
    this->operator=(fileToUnit(u));   // error making code
} 
```

UnitType 是一个简单的枚举数据类型，具有三个值 {Infantry , Alien , Predator}。

Operator函数定义如下

```
Unit operator= (Unit u) { return u; } 
```

fileToUnit 是...

```
Unit fileToUnit(UnitType u); 
```

只是制作一个临时单元并返回它。我真的不知道该怎么做，但我需要从构造函数中更改整个类。

编辑：抱歉这么不具体

我的问题是：如何让一个类根据函数的结果改变它的值

像

```
this = functionReturningSameDataType( DataType ConstructorParameters ); 
```

错误如下

```
Microsoft Visual C++ Runtime Library

Debug Assertion Failed!

Program: C:\Windows\system32\MSVCP110D.dll
File: C:\program files (x86)\microsoft visual studio 11.0\vc\include\xstring
Line: 1143

Expression: invalid null pointer

For Information on how your program can cause an assertion failure, see the Visual C++ documentation on asserts.

(Press Retry to Debug the application) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:03:42.367

如果我正确理解您的问题，您有一个以 a作为参数的*自由函数*，以某种可能基于实例的方式构造 a ，然后将其返回给构造函数。`UnitType``Unit``UnitType``Unit::Unit(UnitType)`

我不确定我是否完全理解`Unit fileToUnit(UnitType u)`在这种情况下的目的。为什么它是免费功能？使其成为成员函数并从构造函数中调用它：

```
class Unit
{
private:
   // Example data members
   int foo;
   int bar;
public:
   Unit(UnitType u)
   {
      fileToUnit(UnitType u);
   };
private:
   void fileToUnit(UnitType u)
   {
       // Set data members here
       foo = 1;
       bar = 1;
   };
}; 
```

编辑：在我这样一个简化的例子中，`fileToUnit`根本不需要存在，代码应该直接在构造函数中：

```
class Unit
{
private:
   // Example data members
   int foo;
   int bar;
public:
   Unit(UnitType u)
   {
      // Set foo and bar here, using whatever
      // information you need from u
   };
}; 
```

# javascript - JavaScript Globals 替代品

> ID：15487655
> 
> 赞同：1
> 
> 时间：2013-03-18T21:53:00.137
> 
> 标签：javascript, oop, global-variables, closures

我正在使用一个框架（流星，但我猜的问题并不重要）它提供了单独的功能..

我的问题是我意识到我正在使用越来越多的全局变量以使它们在这些函数之间可访问。例如**地图**对象：

```
Meteor.startup(function () {
  map = L.map('map_canvas').locate({setView: true, maxZoom: 21});
  L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
  }).addTo(map);
}); 
```

我需要到处访问**地图**来操作我的地图（使用传单）例如：

```
Template.messages.events({
  'click .delete-message': function (e,t) {
    e.stopPropagation();
    removeItem(e.target.id);
  },
  'click .message': function (e,t) {
    console.log('event clicked');
    map.setView([e.target.getAttribute('data-lat'),e.target.getAttribute('data-lng')], 16);
  }
}); 
```

当我想创建一个我想在不同地方使用的标记对象时，我遇到了同样的问题......

是 Meteor 是以这种方式构建的，还是有更合适/干净的 JS 替代品，而不是让东西全球化？

**编辑**感谢您的回答，您能否使用例如您提到但基于我的代码的模式之一添加代码示例？这样我可以更好地理解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:47:48.773

有很多方法可以使 js 变量**和函数**不是全局的。

1.  您可以将**对象用作哈希映射**并使用点表示法访问您的变量。该对象仍然是全局的，但至少您可以减少可能发生冲突的全局名称。
2.  您可以使用**[namespace.js](https://github.com/fabiooshiro/namespace-js)**。
3.  您可以使用**[闭包来使用伪 oo 样式](http://1closure.com/2012/06/object-oriented-javascript-the-functional-pattern/)**。
4.  你可以使用**[coffeescript](http://arcturo.github.com/library/coffeescript/03_classes.html)**。
5.  除了 namespace.js 之外，像**[dojo.js](http://dojotoolkit.org/documentation/tutorials/1.7/modules/)**这样的许多框架都允许使用模块。
6.  可能还有很多其他选择。

Dojo.js 和我认为[require.js](http://blog.teamtreehouse.com/organize-your-code-with-requirejs)鼓励模块化设计。（除其他外）命名空间非常容易包含和使用，并且可以通过最少的代码更改来解决您的问题。我过去曾用它来从全局风格转向更多面向对象的风格。

**选项 1，哈希图**

```
var GKApp = new Object();
GKApp.map = blah;
GKApp.size = 1;
GKApp.doSomethingWithMap = function() {
    GKApp.map.blah();
}
// Now the only global is GKApp.
// Later, make the call. 
GKApp.doSomethingWithMap.call(); 
```

**选项 3，闭包**

您可以使用如下所示的纯 javascript 闭包，或者将其包装在`define`using dojo.js 或 require.js 中。

```
GKApp = function(pmap) {
    // dbg.log("GKApp constructor.");
    // You can consider the closure to 'begin' here.

    // ********************************************************
    // @private variables:
    // ********************************************************
    var map = pmap;

    /**
     * @privileged method which has access to variables in the closure.
     * These variables are not available outside of the closure.
     * An anonymous function has access to variables in the outer scope or, the closure.
     */
    this.doSomethingWithMap = function() {
        map.blah();
    };
};

// Later, instantiate an object and use it. 
var gkApp = new GKApp(map);
gkApp.doSomethingWithMap(); 
```

# php - rabbitmq AMQP::consume()

> ID：15487657
> 
> 赞同：5
> 
> 时间：2013-03-18T21:53:02.977
> 
> 标签：php, rabbitmq, amqp, queueing

AMQP函数consume()是一个带有回调的阻塞函数，是否可以为consume()函数设置超时，所以在特定时间后它不再阻塞并且代码执行完成？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-13T01:49:23.970

是的，方法如下：

```
$amqp = new AMQPConnection($your_connection_params);
$amqp->setTimeout($seconds); 
```

然后，当您在队列上调用consume() 时，如果在超时期限内没有消息到达，则会从consume() 抛出AMQPException 并显示消息“资源暂时不可用”。如果您曾经中断消费（）或遇到超时，请务必在队列对象上调用取消（）以正确重置消费者。为此，您需要生成一个全局唯一的消费者标签，并将其作为未记录的第三个参数传入以进行消费：

```
$tag = uniqid() . microtime(true);
$queue->consume($callback, $flags, $tag);
$queue->cancel($tag); 
```

这样，您以后可以再次调用 consume() ，而不会出现让您头晕目眩的奇怪问题。

# wpf - 不自动生成列时出现 WPF Datagrid 绑定错误

> ID：15487658
> 
> 赞同：0
> 
> 时间：2013-03-18T21:53:03.113
> 
> 标签：wpf, data-binding, mvvm, datagrid

我有一个简单的datatgrid，当我按以下方式定义它时可以工作：

```
 <DataGrid             
        ItemsSource="{Binding EmployeeCollectionViewSource.View}"        
        Style="{DynamicResource FTC_DataGridStyle}" AutoGenerateColumns="True" /> 
```

如果我删除 AutoGenerateColumns="True" 并尝试按如下方式定义我的列，则会收到错误消息：

```
 <DataGrid             
        ItemsSource="{Binding EmployeeCollectionViewSource.View}"        
        Style="{DynamicResource FTC_DataGridStyle}" >
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding idCertification}" Header="ID" Width="50" IsReadOnly="True" CellStyle="{DynamicResource IDCellStyle}"/>
            <DataGridTextColumn Binding="{Binding chrTitle}" Header="TITLE" Width="130" CellStyle="{DynamicResource TextCellStyle}"/>
            <DataGridTextColumn Binding="{Binding chrDetail}" Header="DETAIL" Width="300" CellStyle="{DynamicResource TextCellStyle}"/>
            <DataGridTextColumn Binding="{Binding chrProvider}" Header="PROVIDER" Width="130" CellStyle="{DynamicResource TextCellStyle}"/>
        </DataGrid.Columns> />
    </DataGrid> 
```

我得到的错误是：

> {“'向'System.Windows.Controls.ItemCollection'类型的集合添加值引发异常。' 行号 '31' 和行位置 '32'。"} {"使用 ItemsSource 时操作无效。改为使用 ItemsControl.ItemsSource 访问和修改元素。"}

我使用 MVVM 模式，EmployeeCollectionViewSource 的绑定是一个 collectionviewsource，它是从实体 framemowrk 生成的 ObservableCollection 填充的。

我尝试删除列并仔细检查绑定名称，但我无法弄清楚这个错误来自哪里。输出窗口中没有显示错误。

**问题** 你能帮我解决这个错误，以便我可以手动定义我的列吗？

**附加细节：** 以下是我的视图模型类：

```
 Public Class EmployeeCertificationViewModel
        Inherits ViewModelBase

#Region "DECLARATIONS"

        Public Const CertificationCollectionPropertyName As String = "EmployeeCertifications"
        Public Const EmployeeCollectionViewSourcePropertyName As String = "EmployeeCollectionViewSource"

        ''this is a holder for the employee data service
        Private _EmployeeAccess As IEmployeeDataService

        Private _EmployeeCertifications As New ObservableCollection(Of certification)
        Private _EmployeeCollectionViewSource As New CollectionViewSource

        ''tracks if employee validation is coming from navigation or listview selecteditemchanged
        Private FlagNavigating As Boolean = False
        Private _NavigationService As INavigationService

        Private _ModelService As IModelService
        Private Context As FTC_Context

#End Region

#Region "PROPERTIES"

        Public Property EmployeeCertifications As ObservableCollection(Of certification)
            Get
                Return Me._EmployeeCertifications
            End Get
            Set(ByVal value As ObservableCollection(Of certification))
                Me._EmployeeCertifications = value
                RaisePropertyChanged(CertificationCollectionPropertyName)
            End Set
        End Property

        Public Property EmployeeCollectionViewSource As CollectionViewSource
            Get
                Return Me._EmployeeCollectionViewSource
            End Get
            Set(value As CollectionViewSource)
                If _EmployeeCollectionViewSource Is value Then
                    Return
                End If
                _EmployeeCollectionViewSource = value
                RaisePropertyChanged(EmployeeCollectionViewSourcePropertyName)
            End Set
        End Property

#End Region

#Region "COMMANDS"

#End Region

#Region "METHODS"

#End Region

#Region "CONSTRUCTOR"
        Public Sub New(NavService As INavigationService, EmployeeService As IEmployeeDataService, ModelService As IModelService)

            _ModelService = ModelService
            Context = _ModelService.NewContext

            _NavigationService = NavService
            _EmployeeAccess = EmployeeService

            EmployeeCertifications = EmployeeService.Get_Certification(Context)
            EmployeeCollectionViewSource.Source = EmployeeCertifications

        End Sub

#End Region

    End Class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T23:51:43.660

[DataGrid.AutoGenerateColumns 属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.autogeneratecolumns%28v=vs.110%29.aspx)默认为**true**。如果要定义自己的列，则必须明确将其设置为 false。否则，您将同时拥有两种列类型（自动生成和自己定义）。

```
<DataGrid ItemsSource="{Binding}" AutoGenerateColumns="False">
    <DataGrid.Columns>
        ...
    </DataGrid.Columns>
</DataGrid> 
```

但是您真正的问题似乎是代码中的附加**`/>`**问题`</DataGrid.Columns>`。删除它，异常应该消失。

# c# - c#中如何将DataTable中的值转换为字符串数组

> ID：15487660
> 
> 赞同：14
> 
> 时间：2013-03-18T21:53:13.823
> 
> 标签：c#, .net, linq

我有一个包含单行的 DataTable。我想将此 DataTable 值转换为字符串数组，以便我可以通过字符串数组索引访问该 DataTable 的列值例如，如果我的 DataTable 如下

```
|  Name  |  Address  |   Age  |
-------------------------------
|  jim   |    USA    |   23   | 
```

我想将该 Datatable 中的值存储到我的字符串数组中，以便**MyStringArray[1]**将给我值 USA。

提前致谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-18T21:58:39.063

好简单：

```
var stringArr = dataTable.Rows[0].ItemArray.Select(x => x.ToString()).ToArray(); 
```

其中[`DataRow.ItemArray`](http://msdn.microsoft.com/en-us/library/system.data.datarow.itemarray.aspx)property 是一个对象数组，其中包含数据表每列的行值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-18T22:05:34.513

可能是这样的，假设数据表中有许多这样的行并且每一行是`row`：

```
List<string[]> MyStringArrays = new List<string[]>();
foreach( var row in datatable.rows )//or similar
{
 MyStringArrays.Add( new string[]{row.Name,row.Address,row.Age.ToString()} );
} 
```

然后您可以访问一个：

```
MyStringArrays.ElementAt(0)[1] 
```

如果您使用*linqpad*，这是您示例的一个非常简单的场景：

```
class Datatable
{
 public List<data> rows { get; set; }
 public Datatable(){
  rows = new List<data>();
 }
}

class data
{
 public string Name { get; set; }
 public string Address { get; set; }
 public int Age { get; set; }
}

void Main()
{
 var datatable = new Datatable();
 var r = new data();
 r.Name = "Jim";
 r.Address = "USA";
 r.Age = 23;
 datatable.rows.Add(r);
 List<string[]> MyStringArrays = new List<string[]>();
 foreach( var row in datatable.rows )//or similar
 {
  MyStringArrays.Add( new string[]{row.Name,row.Address,row.Age.ToString()} );
 }
 var s = MyStringArrays.ElementAt(0)[1];
 Console.Write(s);//"USA"
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-24T10:13:07.293

如果这就是您想要做的所有事情，则无需将其转换为数组。您可以通过以下方式访问它：

```
string myData=yourDataTable.Rows[0][1].ToString();//Gives you USA 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-18T22:03:00.917

```
 string[] result = new string[table.Columns.Count];
            DataRow dr = table.Rows[0];
            for (int i = 0; i < dr.ItemArray.Length; i++)
            {
                result[i] = dr[i].ToString();
            }
            foreach (string str in result)
                Console.WriteLine(str); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-20T17:51:20.030

如果您想使用*System.Data*而不是*System.LINQ*，那么您可以这样做。

```
 List<string> BrandsInDataTable = new List<string>();
 DataTable g = Access._ME_G_BrandsInPop(); 
        if (g.Rows.Count > 0)
        {
            for (int x = 0; x < g.Rows.Count; x++)
                BrandsInDataTable.Add(g.Rows[x]["Name"].ToString()); 
        }
        else return; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-01T03:14:53.937

```
 private string[] GetPrimaryKeysofTable(string TableName)
    {
        string stsqlCommand = "SELECT column_name FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE " +
                              "WHERE OBJECTPROPERTY(OBJECT_ID(constraint_name), 'IsPrimaryKey') = 1" +
                              "AND table_name = '" +TableName+ "'";
        SqlCommand command = new SqlCommand(stsqlCommand, Connection);
        SqlDataAdapter adapter = new SqlDataAdapter();
        adapter.SelectCommand = command;

        DataTable table = new DataTable();
        table.Locale = System.Globalization.CultureInfo.InvariantCulture;

        adapter.Fill(table);

        string[] result = new string[table.Rows.Count];
        int i = 0;
        foreach (DataRow dr in table.Rows)
        {
            result[i++] = dr[0].ToString();
        }

        return result;
    } 
```

# java - 为程序员而不是用户突出显示

> ID：15487666
> 
> 赞同：0
> 
> 时间：2013-03-18T21:53:38.297
> 
> 标签：java, swing, jtextarea, highlighting, caret

我正在制作一个程序，我需要能够`JTextArea`通过我的代码编辑 a 的突出显示功能，但我不希望用户能够通过鼠标突出显示。那，或者我需要某种能够`JTextArea`手动绘制的方法（看起来像突出显示）。

我真的没有任何代码明智的做法，因为我不知道如何实现它。

**编辑：**我知道如何在文本上绘画，但我需要绘画像突出显示一样透明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:27:18.860

你可以从这段代码开始。`String findstr`它在整个文本区域中找到用户给出的单词并突出显示该单词。您可以使用它在文本区域中多次查找和突出显示某个单词，直到它到达文本区域内容的末尾。

```
String findstr = findTextField.getText().toUpperCase(); // User Input Word to find
int findstrLength = findstr.length();                   
String findtextarea = textarea.getText().toUpperCase(); // TextArea Content
Highlighter h = textarea.getHighlighter();
h.removeAllHighlights();
try
    {
        int index=0;
         while(index>=0) {
        index = findtextarea.indexOf(findstr,index);
        if (index > 0) {
           h.addHighlight(index,index+findstrLength, DefaultHighlighter.DefaultPainter);
        }
        index++; // try adding this to allow you to look for the next index.
    }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T23:35:32.637

> 我不希望用户能够通过鼠标突出显示

这就是所谓的“选择”。您可以使用自定义插入符号在文本组件上禁用此功能：

```
import java.awt.*;
import javax.swing.*;
import javax.swing.text.*;

public class NoTextSelectionCaret extends DefaultCaret
{
    public NoTextSelectionCaret(JTextComponent textComponent)
    {
        setBlinkRate( textComponent.getCaret().getBlinkRate() );
        textComponent.setHighlighter( null );
    }

    @Override
    public int getMark()
    {
        return getDot();
    }

    private static void createAndShowUI()
    {
        JTextField textField1 = new JTextField("No Text Selection Allowed");
        textField1.setCaret( new NoTextSelectionCaret( textField1 ) );
        textField1.setEditable(false);

        JTextField textField2 = new JTextField("Text Selection Allowed");

        JFrame frame = new JFrame("No Text Selection Caret");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(textField1, BorderLayout.NORTH);
        frame.add(textField2, BorderLayout.SOUTH);
        frame.pack();
        frame.setLocationByPlatform( true );
        frame.setVisible( true );
    }

    public static void main(String[] args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                createAndShowUI();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T22:06:36.810

See the [`Highlighter.HighlightPainter`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/Highlighter.HighlightPainter.html) interface, that easily (questionable), allows you to change the appearance of the highlight.

There are some concrete implementations, but you can define your own.

# .net - 在半 A4 上打印 RDLC

> ID：15487668
> 
> 赞同：5
> 
> 时间：2013-03-18T21:53:39.670
> 
> 标签：.net, printing, report, reporting, rdlc

**我想要完成的**

要求：打印一张 A4 宽度和 A4 高度一半的收据并旋转打印，以便可以在连续 A4（CCP）上打印。

![在此处输入图像描述](../Images/0b8663b83e72271a1c4b3632f06c8056.png)

**我总是得到什么**

![在此处输入图像描述](../Images/0fea99a38673e9c633ef7bf323a564fa.png)

**我试过的**

RDLC 报告定义为 205 毫米 x 145 毫米，因此它应该很好地适合可用空间。
我试过以下

*   打印到 A4 纸纵向
*   打印到 A4 纸横向
*   创建定义为 210 x 147 的自定义纸张尺寸并打印纵向和横向
*   处理和设置为相同纸张大小`PrintingBegin`的事件`ReportViewer``DefaultPageSettings`

没有任何帮助。我似乎记得在某处读过，如果报告高度小于宽度，打印输出会自动旋转为横向。不知道能不能关掉这个功能...

**更新：**页面尺寸为 208 毫米 x 147 毫米，边距为 12 毫米。报告正文为 173mm x 121mm

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-02T18:04:00.570

前段时间打印时遇到了同样的问题，我想我应该分享对我有用的解决方案。如果您使用了替代路线，您也可以分享，我想看看什么对您有用。

有一个技巧，您需要做的是将报告创建为正方形，即宽度 = 210 毫米和高度 = 210 毫米但仅使用报告的前 145 毫米从上到下放置项目。

将底部 65mm 空间留空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T01:13:29.013

我要试一试。我的猜测是您正在使用一组用于打印的库，这些库在高层次上运行良好，但您应该使用更“手动”的东西。我爸爸拥有一家咖啡店，我制作了他的 POS 软件。我们的收据打印机只打印带有我要给你的代码的行。我猜以这种方式移动可能对你有用。

这种方法不打印图像，只打印文本，这一点很重要。

我的代码中的打印方法似乎与您的不同；它们是“字符敏感的”。这意味着，如果您需要 3 个空格键笔划的边距，您需要先写 3 个空格键笔划，然后是您的文本。

要运行此代码，您必须创建一个“.txt”，然后将该文本文件作为参数发送给打印类。我不确定您使用的是 c# 还是 VB，我的代码在 c# 中。

因此，首先，要在程序中的任何位置创建文本文件，您需要标题：

```
using System.IO; 
```

然后，您将开始创建文本文件：

```
StreamWriter sw = new StreamWriter("receipt.txt"); 
```

这会在您当前的文件夹中创建一个文件 - 与您的 .exe 所在的文件夹相同。它还会覆盖旧文件，因此您不必担心以前是否存在同名文件。要写下收据行，您将使用：

```
sw.WriteLine("  the text is supposed to be written, you may use concatenations  "); 
```

WriteLine 方法将一行文本写入文件，然后移至下一行。

完成写入后，您需要使用...关闭文件

```
sw.Close(); 
```

然后你需要打电话给我要给你的印刷课。假设您已经拥有它，您需要创建它的一个实例，如下所示：

```
PimpMyPrint p = new PimpMyPrint(); 
```

然后调用 PrintDoc 方法...

```
p.PrintDoc("receipt.txt"); 
```

再一次，您仍然需要一个包含所有必要方法的类。我不会在这门课上学分；它是来自西班牙的作家弗朗西斯科·哈维尔·塞巴洛斯的作品。Ceballos 先生是讲西班牙语的 SD 社区的知名作者，这来自他的书“Microsoft C# Curso de programación”。

所以这里是你需要添加的类：

```
using System;
using System.IO;
using System.Drawing;
using System.Drawing.Printing;

namespace SomeNamespace
{   
    class PimpMyPrint
    {
        private Font font;
        private StreamReader sr;

        public void PrintDoc(string textfile)
        {
            try
            {
                sr = new StreamReader(textfile);

                try
                {
                    font = new Font("Arial", 10);
                    PrintDocument pd = new PrintDocument();
                    pd.PrintPage += new PrintPageEventHandler(this.PrintPage);
                    pd.Print();
                }
                finally
                {
                    sr.Close();
                }
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
            }
        }

        private void PrintPage(object obj, PrintPageEventArgs ev)
        {
            float LinesPerPage = 0;
            float pos_Y = 0;
            int count = 0;
            float marginLeft = ev.MarginBounds.Left;
            float marginUP = ev.MarginBounds.Top;
            string line = null;

            float fontHeight = font.GetHeight(ev.Graphics);
            LinesPerPage = ev.MarginBounds.Height / fontHeight;

            while (count < LinesPerPage && ((line = sr.ReadLine()) != null))
            {
                pos_Y = marginUP + (count * fontHeight);
                ev.Graphics.DrawString(line, font, Brushes.Black, 0, pos_Y, new StringFormat());
                count++;
            }

            if (line != null)
                ev.HasMorePages = true;
            else
                ev.HasMorePages = false;
        }   
    }   
} 
```

我希望这对你有用，就像它对我有用！

# iphone - iOS 持久化一个自定义的 NSObject

> ID：15487673
> 
> 赞同：0
> 
> 时间：2013-03-18T21:53:56.777
> 
> 标签：iphone, ios, nsuserdefaults, nsdata, persistent-storage

我对自定义注释对象的持久存储感兴趣

`CustomAnnotation : NSObject <MKAnnotation>`

它具有以下属性

`@property (nonatomic, assign) CGFloat val1;`
`@property (nonatomic, retain) NSString *val2;`
`@property (nonatomic, retain) NSDate *val3;`
`@property (nonatomic, retain) NSURL *val4;`
`@property (nonatomic, assign) double val5;`
`@property (nonatomic, assign) double val6;`

存储数据的最佳方法是什么？我正在考虑使用 NSUserDefaults，但我需要将我的 CustomAnnotation 归档到 NSData 中吗？你是怎样做的？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:58:30.110

如果你想持久化一个自定义对象，`NSUserDefaults`你有两个选择。

1.  使用 NSData 将对象编码为`NSKeyedArchiver`
2.  `NSDictionary`使用您要保留的所有值创建一个。

使用是否`NSUserDefaults`是正确的方法取决于几个因素。如果您只有一个或几个对象，那很好。如果你有很多，那么你可能想看看其他选择。也许是 plist 或其他文件。无论哪种方式，您都需要使用两种方法之一对对象进行编码。

# less - Less css 是否使用缓存

> ID：15487686
> 
> 赞同：2
> 
> 时间：2013-03-18T21:54:30.577
> 
> 标签：less

我需要知道在使用 less.js 包含方式时，默认情况下是否在浏览器中为编译的 css 使用某种缓存。也许本地存储？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T21:56:08.903

是的，它确实

使用它在页面加载时清除它。把它放在你包含你的 less 文件之后，但在你的 js 文件之前。

```
<script type="text/javascript"> 
    if (typeof localStorage != "undefined") for(i in localStorage) if (i.indexOf('.less') != -1) delete localStorage[i];
</script> 
```

**注意**：这应该仅用于开发目的，您不希望每次为最终用户加载页面时都减少交付和解析。这将对您的服务器造成不必要的压力。预先编译并链接到生成的 css 文件中。

# c++ - llvm 中的内存合并分析

> ID：15487690
> 
> 赞同：3
> 
> 时间：2013-03-18T21:54:59.347
> 
> 标签：c++, llvm, static-analysis, llvm-ir

我正在尝试使用 LLVM 分析通道对程序执行合并分析。

基本上，我需要查看数组访问并确定内存访问是否可以合并，即访问表达式是否相对于归纳变量是单调的。

我面临以下问题。数组访问用 LLVM IR 中的 getelementptr 指令表示。我怎样才能从那里重建表达式？

如果无法使用静态分析，我也愿意执行动态分析。

如果有帮助，我正在尝试实现以下算法：

```
procedure getCoalescingFactor(f, warpSize, reqLineSize)
    x ← the variable that corresponds to the x grid coordinate
    fw ← f where all variables are fixed except x grid coordinate
    mono ← monotonicity(fw , x)
    if mono is unknown then
        culprits ← variables in fw which do not have a sign
        fw ← fw where each variable in culprits is assumed positive
        mono ← monotonicity(fw , x)
    end if
    if mono is monotonic then
        if mono is increasing then
            size ← f (x + warpSize) − f (x)
        else
            size ← f (x) − f (x + warpSize)
        end if
        return reqLineSize
    else
       offsets ← [fw (x), fw (x + 1), . . . , fw (x + warpSize)]
       uniqOffsets ← removeDuplicates(offsets)
       return size(uniqOffsets)
    end if
end procedure 
```

# jquery - 使用带有多个独立 div 的 jquery 显示/隐藏 div

> ID：15487691
> 
> 赞同：1
> 
> 时间：2013-03-18T21:55:15.377
> 
> 标签：jquery

我有一系列需要通过触发器显示/隐藏的多个独立 div。到目前为止，我拥有的 jquery 代码将显示单击的 div，但隐藏部分不起作用。

这是我的 jQuery：

```
$(".show_options_div").click(function() { 
  $(this).next(".toggleOptions").slideToggle("normal");         
  $(this).slideToggle("fast");  
});

$(".hide_options_div").click(function() {
  $(this).prev(".toggleOptions").slideToggle("normal");         
  $(this).prev(".show_options_div").slideToggle("fast");    
}); 
```

这是HTML：

```
<a class="show_options_div" style="display:block;">
    <div class="drop_down_arrow"></div>
</a>

<div class="toggleOptions" style="display: none">    
  <a class="hide_options_div">
    <div class="drop_up_arrow"></div>
  </a>
</div>

<a class="show_options_div" style="display:block;">
    <div class="drop_down_arrow"></div>
</a>

<div class="toggleOptions" style="display: none">
  <a class="hide_options_div">
    <div class="drop_up_arrow"></div>
  </a>
</div>

<a class="show_options_div" style="display:block;">
    <div class="drop_down_arrow"></div>
</a>

<div class="toggleOptions" style="display: none">
  <a class="hide_options_div">
    <div class="drop_up_arrow"></div>
  </a>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:00:02.310

在您的隐藏功能中

```
$(this).prev(".show_options_div").slideToggle("fast"); 
```

prev 方法只找到前一个元素，因为这不是 .show_options_div，所以没有找到任何东西

.show_options_div 是 .toggleOptions 的前一个元素，因此更改为

```
$(this).parent(".toggleOptions").prev(".show_options_div").slideToggle("fast"); 
```

和

```
$(this).prev(".toggleOptions").slideToggle("normal"); 
```

应该改为

```
$(this).parent(".toggleOptions").slideToggle("normal"); 
```

以供参考

[jQuery 上一个（）](http://api.jquery.com/prev/)

# css - 如何避免固定元素悬停页面内容？

> ID：15487692
> 
> 赞同：0
> 
> 时间：2013-03-18T21:55:15.670
> 
> 标签：css, position, fixed, sticky-footer

我正在尝试做一个标准的粘性页脚，但高度未知。如何避免页面内容落后？

CSS

```
#nav { 
   padding: 20px;
   position: fixed;
   bottom: 0;
   left: 0;
   width: 100%;
} 
```

HTML

```
<p>Some contents (...)</p>
<div id="nav">Navigation</div> 
```

JSFIDDLE

[http://jsfiddle.net/wxTUW/](http://jsfiddle.net/wxTUW/)

（我知道有多种粘性页脚解决方案，但似乎都已过时或/并且不兼容跨浏览器，css3 怎么样？）

# apache - Win2008上设置SVN

> ID：15487694
> 
> 赞同：0
> 
> 时间：2013-03-18T21:55:25.640
> 
> 标签：apache, svn, windows-server-2008-r2, ibmhttpserver

我正在使用 Windows Server 2008 R2。我安装了 IBM HTTP Server V7 以设置我的 svn 存储库。IBM服务器工作，如果我更改conf文件，添加所需的模块，通过启动它我得到以下消息：

`httpd.exe: Syntax error on line 62 of C:/Program Files (x86)/IBM/HTTPServer/conf /admin.conf: Cannot load C:/Program Files (x86)/IBM/HTTPServer/modules/mod_dav_s vn.so into server: Unrecognized Win32 error code 14001 Note the errors or messages above, and press the <ESC> key to exit. 22...`

我也尝试使用 Apache 2.2，但是当我设置 conf 文件、添加模块时，它会启动，但它仍然处于脱机状态；这使用64位。32位不启动。还尝试了 2.4 版-> 相同的行为。

我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:55:40.897

不用担心 svn 服务器设置，您应该尝试 Subversion Edge。它是免费的，并且为了简单而构建，它也是一个完整且易于安装的解决方案：

[http://www.collab.net/products/subversion](http://www.collab.net/products/subversion)

问候。

# php - PHP mysqli 插入命令

> ID：15487696
> 
> 赞同：0
> 
> 时间：2013-03-18T21:55:46.780
> 
> 标签：php, mysql, sql

我正在尝试通过数组将多个值插入 MySQL，但它不起作用或传递错误消息，所以我不确定我哪里出错了。任何帮助，将不胜感激。

这是我调用函数的地方

```
$testArrayList = array();
          $testArrayList[] = 'Account_idAccount';
          $testArrayList[] = 'firstName';
          $testArrayList[] = 'lastName';
          $testArrayValues = array();
          $testArrayValues[] = $idAccount;
          $testArrayValues[] = $firstName;
          $testArrayValues[] = $lastName;
          $dbManager->insertValues("User", $testArrayList, $testArrayValues); 
```

现在，这里是被调用的 insertValues 函数。

```
 public function insertValues($table, $cols, $values) {
    foreach ($cols as $col)
        $colString .= $col.',';
    foreach ($values as $value)
    {
        $valueAmount .= '?,';
        $valueType .= 's';
        $valueParam .= $value.",";
    }
    $colString = substr($colString, 0, -1);  
    $valueAmount = substr($valueAmount, 0, -1); 
    $valueParam = substr($valueParam, 0, -1); 

    $mysqli = new mysqli(DBHOST, DBUSER, DBPASSWORD, DBDATABASE);
    $sql = "INSERT INTO $table ($colString) VALUES($valueAmount)";
    /* Prepared statement, stage 1: prepare */
    if (!($stmt = $mysqli->prepare($sql))) {
         echo "Prepare failed: (" . $mysqli->errno . ") " . $mysqli->error;
    }
    print_r($valueParam);
    /* Prepared statement, stage 2: bind and execute */
    if (!$stmt->bind_param("$valueType", $valueParam)) {
        echo "Binding parameters failed: (" . $stmt->errno . ") " . $stmt->error;
    }

    if (!$stmt->execute()) {
        echo "Execute failed: (" . $stmt->errno . ") " . $stmt->error;
    }
    /* explicit close recommended */
    $stmt->close();
    $mysqli->close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:38:25.297

那里有一堆错误，这是你应该工作的函数的重写版本：

```
public function insertValues($table, array $cols, array $values) {

    $mysqli = new mysqli(DBHOST, DBUSER, DBPASSWORD, DBDATABASE);

    $colString = implode(', ', $cols); // x, x, x
    $valString = implode(', ', array_fill(0, count($values), '?')); // ?, ?, ?

    $sql = "INSERT INTO $table ($colString) VALUES($valString)";
    if (!$stmt = $mysqli->prepare($sql))
         echo "Prepare failed: (" . $mysqli->errno . ") " . $mysqli->error;

    foreach ($values as $v)
        if (!$stmt->bind_param('s', $v))
            echo "Binding parameters failed: (" . $stmt->errno . ") " . $stmt->error;

    if (!$stmt->execute())
        echo "Execute failed: (" . $stmt->errno . ") " . $stmt->error;

    $stmt->close();
    $mysqli->close();

} 
```

您还应该在构造函数中初始化一次 mysqli 连接，而不是为每个方法初始化一次：

```
public function __construct() { 
    $this->mysqli = new mysqli(DBHOST, DBUSER, DBPASSWORD, DBDATABASE);
}

public function __destruct() {
    $this->mysqli->close();
} 
```

最好创建一个适当的函数来处理这些错误，例如：

```
public function showError($message, object $obj) {
    echo "$message: (" . $obj->errno . ") " . $obj->error;
} 
```

导致你功能的这个更清洁的版本：

```
public function insertValues($table, $cols, $values) {

    ...

    if (!$stmt = $mysqli->prepare($sql))
         $this->showError("Prepare failed", $mysqli);

    foreach ($values as $v)
        if (!$stmt->bind_param('s', $v))
            $this->showError("Binding parameters failed", $stmt);

    if (!$stmt->execute())
        $this->showError("Execute failed", $stmt);

    ...

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T06:56:01.937

我已经重写了函数，这样你就可以清楚地知道为什么你使用了 bind_param() 错误。

此版本只是一个示例，仅适用于 2 列！

```
 function insertValues($table, array $cols, array $values) {

        $mysqli = new mysqli('localhost', 'petr', null,'test');

        $colString = implode(', ', $cols); // x, x, x
        $valString = implode(', ', array_fill(0, count($values), '?')); // ?, ?, ?

        $sql = "INSERT INTO $table ($colString) VALUES($valString)";
        if (!$stmt = $mysqli->prepare($sql))
             echo "Prepare failed: (" . $mysqli->errno . ") " . $mysqli->error;

        list($a,$b) = $values;
        // params $a and $b must exists during $stmt execution, therefore you can't use foreach with temproray variable
        if (!$stmt->bind_param('ss', $a, $b))
                echo "Binding parameters failed: (" . $stmt->errno . ") " . $stmt->error;

        if (!$stmt->execute())
            echo "Execute failed: (" . $stmt->errno . ") " . $stmt->error;

        $stmt->close();
        $mysqli->close();

    } 
```

这有效：

```
 insertValues('test',array('firstName','lastName'),array('Jan Amos','Komensky')); 
```

# ruby-on-rails-3 - 带有自定义查询的 Rails 急切加载

> ID：15487697
> 
> 赞同：1
> 
> 时间：2013-03-18T21:55:51.210
> 
> 标签：ruby-on-rails-3, activerecord, eager-loading

我正在构建一个具有以下模型的 RSS 阅读器：

```
class Folder < ActiveRecord::Base
  attr_accessible :name, :user_id, :is_expanded

  has_many :feeds
end

class Feed < ActiveRecord::Base
  attr_accessible :last_checked_date, :url, :name, :folder_id

  has_many :items
  has_many :subscriptions
end

class Item < ActiveRecord::Base
  attr_accessible :description, :feed_id, :publication_date, :title, :url, :guid

  belongs_to :feed
  has_many :item_to_reads
end

class ItemToRead < ActiveRecord::Base
  set_table_name "items_to_read"

  attr_accessible :item_id, :user_id

  belongs_to :item
end 
```

所以我有一个文件夹列表，其中包含提要，而提要又可以包含项目列表。对于给定的用户，我只想显示`items_to_read`每个提要。

我找不到任何方法来提出以下请求：

*   检索给定用户的文件夹列表和内部提要
*   显示`items_to_read`每个提要的计数
*   如果可能，还计算`items_to_read`每个文件夹的总和（`items_to_read`每个子提要的总和）

第 3 点可以稍后完成（在请求之外）。

检索文件夹和提要很容易：

```
Folder.includes(:feeds).where(:user_id => user_id) 
```

但我无法自定义检索提要的第二个查询：

```
>> Folder.includes(:feeds).where(:user_id => 1)
  Folder Load (0.9ms)  SELECT "folders".* FROM "folders" WHERE "folders"."user_id" = 1
  Feed Load (0.2ms)  SELECT "feeds".* FROM "feeds" WHERE "feeds"."folder_id" IN ('8') 
```

使用`:finder_sql`in`has_many :feeds`不适合我的问题，它不会用于`includes`.

我有哪些选择？我应该在另一个查询中进行计数吗？

* * *

**编辑：** 我发现了一个单独的查询，它只检索`items_to_read`每个提要的数量：

```
Feed.group('feeds.id').joins(:items => :item_to_reads).where('items_to_read.user_id' => user_id).count('items_to_read.id') 
```

这可以与我的第一个查询合并吗？

# java - Tomcat：OutOfMemoryError Permgen Space

> ID：15487702
> 
> 赞同：0
> 
> 时间：2013-03-18T21:56:14.280
> 
> 标签：java, tomcat, log4j, quartz-scheduler, permgen

我正在使用 Tomcat 6 开发 JSP 应用程序。

由于我确实将 Quartz Scheduler Framework 和 Log4J 库添加到项目中，因此 Tomcat 在重新部署时开始抛出此异常。

我已经阅读了有关问题原因的信息，现在我知道这必须与类加载器有关。

所以，我猜这个问题可能是由自动加载一些类的记录器库引起的。

我该如何处理这个问题？有另一种方法可以在不使用 log4j.properties 文件的情况下设置记录器，以确保类加载器能够正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T22:29:42.610

一种方法是通过在下面添加以下 JVM 参数来增加您的 permgen 空间

```
-XX:MaxPermSize=256m 
```

但它只会延迟OOM错误。如果您一次又一次地重新部署，您将再次遇到 permgen 内存不足。原因在这篇文章中解释的很清楚，这里不再赘述。[http://frankkieviet.blogspot.com/2006/10/classloader-leaks-dreaded-permgen-space.html](http://frankkieviet.blogspot.com/2006/10/classloader-leaks-dreaded-permgen-space.html)。抱歉，我没有其他方法来设置记录器以避免此问题。在实践中，我总是增加 MaxPermSize，然后在部署前循环服务器。

# ruby-on-rails - 无法启动 Rails 服务器 mysql2 gem？

> ID：15487703
> 
> 赞同：1
> 
> 时间：2013-03-18T21:56:19.883
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, gem

Ruby 和 Rails 菜鸟，做了一个项目并走到了这一步。但是现在我在尝试运行 rails server 时遇到了这些错误。我正在使用 Windows vista 和 ruby​​ 2.0.0。

```
D:/Ruby200/lib/ruby/gems/2.0.0/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/mysql2.
rb:2:in `require': cannot load such file -- mysql2/2.0/mysql2 (LoadError)
        from D:/Ruby200/lib/ruby/gems/2.0.0/gems/mysql2-0.3.11-x86-mingw32/lib/m
ysql2/mysql2.rb:2:in `<top (required)>'
        from D:/Ruby200/lib/ruby/gems/2.0.0/gems/mysql2-0.3.11-x86-mingw32/lib/m
ysql2.rb:9:in `require'
        from D:/Ruby200/lib/ruby/gems/2.0.0/gems/mysql2-0.3.11-x86-mingw32/lib/m
ysql2.rb:9:in `<top (required)>'
        from D:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.4/lib/bundler/runti
me.rb:72:in `require'
        from D:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.4/lib/bundler/runti
me.rb:72:in `block (2 levels) in require'
        from D:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.4/lib/bundler/runti
me.rb:70:in `each'
        from D:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.4/lib/bundler/runti
me.rb:70:in `block in require'
        from D:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.4/lib/bundler/runti
me.rb:59:in `each'
        from D:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.4/lib/bundler/runti
me.rb:59:in `require'
        from D:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.4/lib/bundler.rb:13
2:in `require'
        from D:/wamp/www/simple_cms/config/application.rb:7:in `<top (required)>
'
        from D:/Ruby200/lib/ruby/gems/2.0.0/gems/railties-3.2.13/lib/rails/comma
nds.rb:53:in `require'
        from D:/Ruby200/lib/ruby/gems/2.0.0/gems/railties-3.2.13/lib/rails/comma
nds.rb:53:in `block in <top (required)>'
        from D:/Ruby200/lib/ruby/gems/2.0.0/gems/railties-3.2.13/lib/rails/comma
nds.rb:50:in `tap'
        from D:/Ruby200/lib/ruby/gems/2.0.0/gems/railties-3.2.13/lib/rails/comma
nds.rb:50:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

到目前为止，我对 ruby​​ 和 gems 知之甚少，但 mysql2 gem 似乎是一个问题，我已经安装并安装没有帮助。我确实经常收到一条消息，说我已经按照我遵循的命令安装了二进制版本。这是好事还是坏事？

任何人都请帮助我，如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:40:26.277

我认为这里的答案就是您要寻找的答案：

[stackoverflow.com/a/5368767/1622843](https://stackoverflow.com/a/5368767/1622843)

基本上，您需要将 gem 指向机器上安装的 mysql 实例。

# actionscript-3 - 部分时间出现拖放错误 1010？

> ID：15487704
> 
> 赞同：0
> 
> 时间：2013-03-18T21:56:22.350
> 
> 标签：actionscript-3, flash

我有一个有效的拖放游戏，但它并不完美。当您与目标完全对齐时，我所有的电影剪辑都拖放到它们的目标上。

但是，如果您在将 mc 拖到目标区域之外时松开鼠标，有时但并非总是会抛出 1010 term undefined 错误，并且不会将 mc 捕捉回其原始起始 x/y 坐标（它只是将 mc 留在鼠标抬起时的位置）。我运行了调试器，它在我的 drop 函数中处理了这一行：

if (event.currentTarget.dropTarget != null && MovieClip(event.currentTarget.dropTarget.parent).allowed.indexOf(event.currentTarget) >= 0){

仅供参考，允许的是一组目标数组，因为我想要目标的“区域”而不是某些电影剪辑的特定目标。

有任何想法吗？

* * *

更新代码如下：

```
if (event.currentTarget.dropTarget != null) {
var mc:MovieClip=event.currentTarget.dropTarget as MovieClip;
if (mc==null) { // typecast fails. Say there's a Sprite below
    reply_txt.textColor = 0xEE1212
    reply_txt.text = "Oops!  Try Again!";
    event.currentTarget.alpha = 1;
    event.currentTarget.x = startX;
    event.currentTarget.y = startY; 
    return; // nothing to do here
}
mc=mc.parent;
if (mc && mc.allowed) { 
    // this MC has "allowed" property not "undefined" - we're in the grid
    // so now we can check indexOf() safely
    if (mc.allowed.indexOf(event.currentTarget)>=0){
        reply_txt.textColor = 0x33BC10
        reply_txt.text = "Good Job!";
        event.currentTarget.alpha = 1;
        event.currentTarget.removeEventListener(MouseEvent.MOUSE_DOWN, pickUp);
        event.currentTarget.removeEventListener(MouseEvent.MOUSE_UP, dropIt);
        event.currentTarget.buttonMode = false;
        event.currentTarget.x = MovieClip(event.currentTarget.dropTarget.parent).x;
        event.currentTarget.y = MovieClip(event.currentTarget.dropTarget.parent).y;
        stored.push(event.currentTarget);
        startXarray.push(startX);
        startYarray.push(startY);
        counter++;
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:56:41.050

是的，当您停止拖动对象时，它会检查光标下方的 DisplayObject 类型，并将该对象作为`dropTarget`事件中的属性返回。因此，如果您的对象被拖放到另一个没有`allowed`属性的 MC 上，则会引发 1010 错误。您需要在这样的嵌套 if 语句中检查这种情况：

```
if (event.currentTarget.dropTarget != null) {
    var mc:MovieClip=event.currentTarget.dropTarget as MovieClip;
    if (mc==null) { // typecast fails. Say there's a Sprite below
        returnThisBack();
        return; // nothing to do here
    }
    mc=mc.parent;
    if (mc && mc.allowed) { 
        // this MC has "allowed" property not "undefined" - we're in the grid
        // so now we can check indexOf() safely
        if (mc.allowed.indexOf(event.currentTarget)>=0)  snapThisToGrid();
    } else returnThisBack();
} else returnThisBack(); 
```

# firefox - 使用 firefox sdk 在页面顶部打开一个栏

> ID：15487708
> 
> 赞同：0
> 
> 时间：2013-03-18T21:56:26.770
> 
> 标签：firefox, sdk, firefox-addon, panel

我正在制作一个 Firefox 插件，我想在一些网站上打开一个“顶部栏”。真的，这将是一些关于当前页面的信息，一个链接回到我自己的网站。最好的方法是什么？

我的第一个想法是使用内容脚本，但这似乎是一种非常糟糕的做法。我还阅读了有关面板的信息，这是我的问题：

*   如何在地址栏下方添加我的面板？
*   我怎样才能只在我需要的网站上打开它？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T21:53:11.960

使用内容脚本完全没问题。将顶部面板添加到某些网页是一种现代、简单、代码更少、更兼容的方式。另外，内容脚本的代码不会注入到网页中，它只是使用 dom 和 context；页面脚本无权访问（如果您没有明确提供）内容脚本。

唯一可能的缺点是面板看起来不像浏览器的原生部分。

如果我说服您使用内容脚本：

1.  您在插件[page-mod中真正需要的模块](https://addons.mozilla.org/en-US/developers/docs/sdk/Firefox-23/modules/sdk/page-mod.html)
2.  使用[Add-on Builder](https://builder.addons.mozilla.org/)，您可以在一天内拥有您的插件

# c# - 在 WPF 中使用 MVVM 的嵌套数据绑定不起作用

> ID：15487709
> 
> 赞同：4
> 
> 时间：2013-03-18T21:56:32.040
> 
> 标签：c#, wpf, entity-framework, mvvm

我无法弄清楚为什么我在 WPF 中的第三个嵌套数据绑定不起作用。我正在使用实体框架和 Sql Server 2012，以下是我的实体。一个应用程序可以有多个帐户。有一个帐户表和一个应用程序表。

**实体**
1\. 申请
2\. 账户

**VIEWMODELS**
1\. ApplicationListViewModel
2\. ApplicationViewModel
3\. AccountListViewModel
4\. AccountViewModel

在我的用户控件中，我正在尝试执行以下操作：
1\. 使用组合框选择使用 ApplicationListViewModel 的应用程序（**工作**）
2\. 选定的应用程序显示数据网格中的所有帐户（**工作**）
3\. 选定的帐户显示有关特定帐户的详细信息。（**不显示所选帐户的详细信息**）

```
<UserControl.Resources>
    <vm:ApplicationListViewModel x:Key="AppList" />
</UserControl.Resources>

<StackPanel DataContext="{Binding Source={StaticResource AppList}}">
    <Grid>
        <Grid.RowDefinitions>
            ...
        </Grid.ColumnDefinitions>
        <StackPanel Grid.Row="0" Grid.Column="0">
            <GroupBox Header="View all">
                <StackPanel>
                    <!-- All Applications List -->
                    <ComboBox x:Name="cbxApplicationList"
                              ItemsSource="{Binding Path=ApplicationList}"
                              DisplayMemberPath="Title" SelectedValuePath="Id"
                              SelectedItem="{Binding Path=SelectedApplication, Mode=TwoWay}" 
                              IsSynchronizedWithCurrentItem="True" />

                    <!-- Selected Application Accounts -->
                    <DataGrid x:Name="dtgAccounts" Height="Auto" Width="auto" AutoGenerateColumns="False" 
                              DataContext="{Binding SelectedApplication.AccountLVM}"
                              ItemsSource="{Binding Path=AccountList}" 
                              SelectedItem="{Binding SelectedAccount, Mode=TwoWay}" IsSynchronizedWithCurrentItem="True">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Title" Binding="{Binding Path=Title}"></DataGridTextColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </StackPanel>
            </GroupBox>
        </StackPanel>

        <StackPanel Grid.Row="0" Grid.Column="1" >
            <GroupBox x:Name="grpBoxAccountDetails" Header="New Account" >
                <!-- Selected Account Details -->
                <!-- DataContext binding does not appear to work -->
                <StackPanel DataContext="{Binding SelectedApplication.AccountLVM.SelectedAccount}"  >
                    <Grid>
                        <Grid.RowDefinitions>
                            ...
                        </Grid.ColumnDefinitions>
                        <TextBlock x:Name="lblApplication" Grid.Row="0" Grid.Column="0" >Application</TextBlock>
                        <ComboBox x:Name="cbxApplication" Grid.Row="0" Grid.Column="1" 
                                  DataContext="{Binding Source={StaticResource AppList}}" 
                                  ItemsSource="{Binding ApplicationList}" 
                                  DisplayMemberPath="Title" SelectedValuePath="Id" 
                                  SelectedValue="{Binding SelectedApplication.AccountLVM.SelectedAccount.ApplicationId}">
                        </ComboBox>
                        <TextBlock x:Name="lblTitle" Grid.Row="0" Grid.Column="0" >Title</TextBlock>
                        <TextBox x:Name="txtTitle" Grid.Row="0" Grid.Column="1" Height="30" Width="200" 
                                Text="{Binding Title}" DataContext="{Binding Mode=OneWay}"></TextBox>
                        <Button Grid.Row="1" Grid.Column="0" Command="{Binding AddAccount}">Add</Button>
                    </Grid>
                </StackPanel>
            </GroupBox>
        </StackPanel>
    </Grid>
</StackPanel> 
```

应用程序列表视图模型

```
class ApplicationListViewModel : ViewModelBase
    {
         myEntities context = new myEntities();
        private static ApplicationListViewModel instance = null;

        private ObservableCollection<ApplicationViewModel> _ApplicationList = null;

        public ObservableCollection<ApplicationViewModel> ApplicationList
        {
            get 
            {
                return GetApplications(); 
            }
            set {
                _ApplicationList = value;
                OnPropertyChanged("ApplicationList");
            }
        }

        //public ObservableCollection<ApplicationViewModel> Cu
        private ApplicationViewModel selectedApplication = null;

        public  ApplicationViewModel SelectedApplication
        {
            get
            {
                return selectedApplication;
            }
            set
            {
                selectedApplication = value;
                OnPropertyChanged("SelectedApplication");
            }
        }

        //private ICommand showAddCommand;

        public ApplicationListViewModel()
        {
            this._ApplicationList = GetApplications();
        }

        internal ObservableCollection<ApplicationViewModel> GetApplications()
        {
            if (_ApplicationList == null)
                _ApplicationList = new ObservableCollection<ApplicationViewModel>();
            _ApplicationList.Clear();
            foreach (Application item in context.Applications)
            {
                ApplicationViewModel a = new ApplicationViewModel(item);
                _ApplicationList.Add(a);
            }
            return _ApplicationList;
        }

        public static ApplicationListViewModel Instance()
        {
            if (instance == null)
                instance = new ApplicationListViewModel();
            return instance;
        }
    } 
```

应用视图模型

```
class ApplicationViewModel : ViewModelBase
    {
        private myEntities context = new myEntities();
        private ApplicationViewModel originalValue;

        public ApplicationViewModel()
        {

        }
        public ApplicationViewModel(Application acc)
        {
            //Initialize property values
            this.originalValue = (ApplicationViewModel)this.MemberwiseClone();
        }
        public ApplicationListViewModel Container
        {
            get { return ApplicationListViewModel.Instance(); }
        }

        private AccountListViewModel _AccountLVM = null;

        public AccountListViewModel AccountLVM
        {
            get
            {
                return GetAccounts(); 
            }
            set
            {
                _AccountLVM = value;
                OnPropertyChanged("AccountLVM");
            }
        }
        internal AccountListViewModel GetAccounts()
        {
            _AccountLVM = new AccountListViewModel();
            _AccountLVM.AccountList.Clear();
            foreach (Account i in context.Accounts.Where(x=> x.ApplicationId == this.Id))
            {
               AccountViewModel account = new AccountViewModel(i);
                account.Application = this;
                _AccountLVM.AccountList.Add(account);
            }
            return _AccountLVM;
        }

    } 
```

帐户列表视图模型

```
class AccountListViewModel : ViewModelBase
    {
        myEntities context = new myEntities();
        private static AccountListViewModel instance = null;

        private ObservableCollection<AccountViewModel> _accountList = null;

        public ObservableCollection<AccountViewModel> AccountList
        {
            get 
            {
                if (_accountList != null)
                    return _accountList;
                else
                    return GetAccounts(); 
            }
            set {
                _accountList = value;
                OnPropertyChanged("AccountList");
            }
        }
        private AccountViewModel selectedAccount = null;

        public  AccountViewModel SelectedAccount
        {
            get
            {
                return selectedAccount;
            }
            set
            {
                selectedAccount = value;
                OnPropertyChanged("SelectedAccount");
            }
        }
        public AccountListViewModel()
        {
            this._accountList = GetAccounts();
        }

        internal ObservableCollection<AccountViewModel> GetAccounts()
        {
            if (_accountList == null)
                _accountList = new ObservableCollection<AccountViewModel>();
            _accountList.Clear();
            foreach (Account item in context.Accounts)
            {
                AccountViewModel a = new AccountViewModel(item);
                _accountList.Add(a);
            }
            return _accountList;
        }

        public static AccountListViewModel Instance()
        {
            if (instance == null)
                instance = new AccountListViewModel();
            return instance;
        }
} 
```

帐户视图模型。为简单起见，我在 viewmodel 中删除了所有其他初始化逻辑。

```
class AccountViewModel : ViewModelBase
    {
        private myEntites context = new myEntities();
        private AccountViewModel originalValue;

        public AccountViewModel()
        {

        }
        public AccountViewModel(Account acc)
        {
           //Assign property values.
            this.originalValue = (AccountViewModel)this.MemberwiseClone();
        }
        public AccountListViewModel Container
        {
            get { return AccountListViewModel.Instance(); }
        }
        public ApplicationViewModel Application
        {
            get;
            set;
        }
    } 
```

Edit1：
当我数据绑定以使用文本框查看 SelectedAccount 的详细信息时，它不显示任何文本。
1.能够将ApplicationListViewModel数据绑定到Combobox。
2\. 成功绑定到基于SelectedApplication 的视图AccountList
**3\. 无法绑定到AccountListViewModel 中的SelectedAcount。**

我认为在以下行中它没有显示有关所选帐户的任何详细信息。我检查了所有数据绑定语法。在属性中，我可以查看适当的 DataContext 并绑定到属性。但它不显示任何文本。当我在 DataGrid 中选择每个单独的记录时，我可以调试调用并选择对象，但不知何故，该对象最后没有显示在文本框中。

```
DataContext="{Binding SelectedApplication.AccountLVM.SelectedAccount}" 
```

**Edit2：**
根据下面评论中的建议，我尝试了 snoop，并且能够看到标题文本框行以红色突出显示。我正在尝试更改绑定路径属性和数据上下文，但仍然无法正常工作。当我尝试单击“Delve 绑定表达式”时，它给了我未处理的异常。我不知道这意味着什么，如果它来自 Snoop。

**Edit3：**
我为 StackPanel 的 Account Details 部分和文本框的 text 属性截取了 DataContext 属性的屏幕截图。

![在此处输入图像描述](../Images/d282f6e251b8aa694eca403aab42bf76.png)

**解决方案：**
根据以下建议，我对我的解决方案进行了以下更改，并使其更加简单。我让它变得不必要的复杂。
1.AccountsViewModel
2.AccountViewModel
3.ApplicationViewModel

现在我已经创建了属性`SelectedApplication`，`SelectedAccount`全部合二为一 `AccountsViewModel`。删除了所有复杂的 DataContext 语法，现在 xaml 页面中只有一个 DataContext。

简化的代码。

```
class AccountsViewModel: ViewModelBase
    {
        myEntities context = new myEntities();

        private ObservableCollection<ApplicationViewModel> _ApplicationList = null;

        public ObservableCollection<ApplicationViewModel> ApplicationList
        {
            get
            {
                if (_ApplicationList == null)
                {
                    GetApplications();
                }
                return _ApplicationList;
            }
            set
            {
                _ApplicationList = value;
                OnPropertyChanged("ApplicationList");
            }
        }
        internal ObservableCollection<ApplicationViewModel> GetApplications()
        {
            if (_ApplicationList == null)
                _ApplicationList = new ObservableCollection<ApplicationViewModel>();
            else
                _ApplicationList.Clear();
            foreach (Application item in context.Applications)
            {
                ApplicationViewModel a = new ApplicationViewModel(item);
                _ApplicationList.Add(a);
            }
            return _ApplicationList;
        }
        //Selected Application Property
        private ApplicationViewModel selectedApplication = null;

        public ApplicationViewModel SelectedApplication
        {
            get
            {
                return selectedApplication;
            }
            set
            {
                selectedApplication = value;
                this.GetAccounts();
                OnPropertyChanged("SelectedApplication");
            }
        }
        private ObservableCollection<AccountViewModel> _accountList = null;

        public ObservableCollection<AccountViewModel> AccountList
        {
            get
            {
                if (_accountList == null)
                    GetAccounts();
                return _accountList;
            }
            set
            {
                _accountList = value;
                OnPropertyChanged("AccountList");
            }
        }

        //public ObservableCollection<AccountViewModel> Cu
        private AccountViewModel selectedAccount = null;

        public AccountViewModel SelectedAccount
        {
            get
            {
                return selectedAccount;
            }
            set
            {
                selectedAccount = value;
                OnPropertyChanged("SelectedAccount");
            }
        }
        internal ObservableCollection<AccountViewModel> GetAccounts()
        {
            if (_accountList == null)
                _accountList = new ObservableCollection<AccountViewModel>();
            else
                _accountList.Clear();
            foreach (Account item in context.Accounts.Where(x => x.ApplicationId == this.SelectedApplication.Id))
            {
                AccountViewModel a = new AccountViewModel(item);
                _accountList.Add(a);
            }
            return _accountList;
        }

    } 
```

**XAML 端**

```
<UserControl.Resources>
    <vm:AccountsViewModel x:Key="ALVModel" />
</UserControl.Resources>
<StackPanel DataContext="{Binding Source={StaticResource ALVModel}}" Margin="0,0,-390,-29">
    <StackPanel>
        <ComboBox x:Name="cbxApplicationList"
                  ItemsSource="{Binding Path=ApplicationList}"
                  DisplayMemberPath="Title" SelectedValuePath="Id"
                  SelectedItem="{Binding Path=SelectedApplication, Mode=TwoWay}" 
                  IsSynchronizedWithCurrentItem="True"></ComboBox>
        <DataGrid x:Name="dtgAccounts" Height="Auto" Width="auto" 
                  AutoGenerateColumns="False" 
                  ItemsSource="{Binding Path=AccountList}" 
                  SelectedItem="{Binding SelectedAccount, Mode=TwoWay}" 
                  IsSynchronizedWithCurrentItem="True" >
            <DataGrid.Columns>
                <DataGridTextColumn Header="Title" Binding="{Binding Path=Title}"></DataGridTextColumn>
                <DataGridTextColumn Header="CreatedDate" Binding="{Binding Path=CreatedDate}"></DataGridTextColumn>
                <DataGridTextColumn Header="LastModified" Binding="{Binding Path=LastModifiedDate}"></DataGridTextColumn>
            </DataGrid.Columns>
        </DataGrid>
    </StackPanel>
    <StackPanel Height="Auto" Width="300" HorizontalAlignment="Left" DataContext="{Binding Path=SelectedAccount}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="30"></RowDefinition>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="100"></ColumnDefinition>
                <ColumnDefinition Width="200"></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <TextBlock x:Name="lblTitle" Grid.Row="0" Grid.Column="0" >Title</TextBlock>
            <TextBox x:Name="txtTitle"   Grid.Row="0" Grid.Column="1" Height="30" Width="200" 
                     Text="{Binding Title}"></TextBox>
        </Grid>
    </StackPanel>
</StackPanel> 
```

我没有正确理解 MVVM 概念。我试图构建所有模块化的东西，最后我把它搞砸了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T17:06:50.370

我怀疑您的问题与您每次调用 setter 时都返回一个*新* 的事实有关，并且您没有提出通知，因此任何现有绑定都不会更新`ObservableCollection``AccountLVM``PropertyChange`

```
public AccountListViewModel AccountLVM
{
    get
    {
        return GetAccounts(); 
    }
    set
    {
        _AccountLVM = value;
        OnPropertyChanged("AccountLVM");
    }
}

internal AccountListViewModel GetAccounts()
{
    _AccountLVM = new AccountListViewModel();
    _AccountLVM.AccountList.Clear();
    foreach (Account i in context.Accounts.Where(x=> x.ApplicationId == this.Id))
    {
       AccountViewModel account = new AccountViewModel(i);
        account.Application = this;
        _AccountLVM.AccountList.Add(account);
    }
    return _AccountLVM;
} 
```

我发现您的绑定非常令人困惑且难以理解，但是我认为每当对此进行评估时

```
DataContext="{Binding SelectedApplication.AccountLVM.SelectedAccount}" 
```

它正在创建一个*新* `AccountLVM`的，它没有`SelectedAccount`设置属性。

您根本看不到现有的`DataGrid.SelectedItem`更改，因为它仍然绑定到*旧* `AccountLVM`的，因为更改时没有`PropertyChange`发出通知`_accountLVM`，因此绑定不知道要更新。

但是与您的代码相关的其他一些杂项：

*   不要更改属性的私有版本，除非您还针对属性的公共版本发出 PropertyChange 通知。这适用于您的构造函数和您的`GetXxxxx()`方法，例如`GetAccounts()`.

*   不要从你的 getter 返回方法调用。相反，如果它为空，则使用您的方法调用设置值，然后返回私有属性。

    ```
    public AccountListViewModel AccountLVM
    {
        get
        {
            if (_accountLVM == null)
                GetAccounts(); // or _accountLVM = GetAccountLVM();

            return _accountLVM;
        }
        set { ... }
    } 
    ```

*   `DataContext`在这么多控件中设置集合确实令人困惑。这`DataContext`是你的 UI 背后的数据层，如果你的 UI 只是反映数据层，这是最简单的，并且必须到处去获取你的数据使得数据层很难遵循。

*   如果您必须对当前数据上下文以外的内容进行绑定，请尝试使用其他绑定属性来[指定不同的绑定`Source`](https://stackoverflow.com/a/15500436/302677)，然后再立即更改`DataContext`. 下面是一个使用该`ElementName`属性设置绑定源的示例：

    ```
    <TextBox x:Name="txtTitle" ...
             Text="{Binding ElementName=dtgAccounts, Path=SelectedItem.Title}" /> 
    ```

*   in 继承，`DataContext`所以你永远不需要写`DataContext="{Binding }"`

*   您可能需要考虑重写您的父 ViewModel，以便可以像这样设置 XAML，而无需所有额外的`DataContext`绑定或 3 部分嵌套属性。

    ```
    <ComboBox ItemsSource="{Binding ApplicationList}"
              SelectedItem="{Binding SelectedApplication}" />

    <DataGrid ItemsSource="{Binding SelectedApplication.Accounts}"
              SelectedItem="{Binding SelectedAccount}" />

    <StackPanel DataContext="{Binding SelectedAccount}">
       ...
    </StackPanel> 
    ```

如果您不熟悉`DataContext`或难以理解它，我建议您阅读我博客上的[这篇文章](http://rachel53461.wordpress.com/2012/07/14/what-is-this-datacontext-you-speak-of/)，以更好地了解它是什么以及它是如何工作的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T07:56:45.850

这种`Binding`方法的一个主要问题是，只有在最后一个属性值（在您的情况下`SelectedAccount`）发生更改时，才会更新该值。其他级别不会被 监视`BindingExpression`，因此如果`SelectedApplication.AccountLVM`更改了例如，`DataContext`将不会注意到差异，`SelectedAccount`因为绑定仍在旧引用上“监视”，并且您正在修改 VM 中的另一个引用。

所以我认为在应用程序的开头`SelectedApplication`是 null 并且没有注意到它发生了变化`Binding`。`ComboBox`嗯，我想过另一种绑定解决方案，但我找不到。所以我建议你创建一个额外的属性来反映`SelectedAccount`你的`ApplicationListViewModel`班级。

# c++ - 使用 shared_ptr 遍历列表

> ID：15487711
> 
> 赞同：-1
> 
> 时间：2013-03-18T21:56:33.687
> 
> 标签：c++, c++11

我对这个 C++ 有点陌生，我写了一些代码，但它给出了访问冲突读取位置....错误这是代码

```
std::shared_ptr<Shoop> FindChips(const Scam& scan) const
{
    for each(std::shared_ptr<Shoop> pChips in mPeas)
    {
        if (pChips->GetMoreChips().Frieh(scan))
            return pChips;
    }
} 
```

mPeas 在哪里`std::list<std::shared_ptr<Shoop>>`

请帮助我已经坚持了一段时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:59:42.077

你的意思是下面的代码，在标准 C++ 中？！

```
for (auto &pChips : mPeas)
{
    if (pChips->GetMoreChips().Frieh(scan))
        return pChips;
}
return nullptr;  // <-- return nullptr and check it at caller side 
```

*   崩溃点在哪里？在函数内部`for`还是返回函数之后？

*   检查所有项目`mPeas`是否由构建`new`？

*   你如何使用返回的对象，你是否检查它的有效性？

# css - css规则没有出现

> ID：15487712
> 
> 赞同：0
> 
> 时间：2013-03-18T21:56:49.503
> 
> 标签：css

我`#container nav`在这个[站点上设置了以下 CSS 规则](http://update.techbasics.ca)

```
#container nav {
    margin-left: none;
    margin-right: none; } } 
```

虽然当我使用检查器时没有写入边距，但选择器只是空的，没有任何规则。不确定是什么原因造成的。我该如何调试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:58:12.017

应该：

```
#container nav {
    margin-left: 0;
    margin-right: 0;
} 
```

`none`不是 的正确值`margin`。应该使用`0`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:58:20.440

没有`none`。采用

```
margin-left: 0; 
```

反而。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T21:59:17.140

`none`不是可接受的保证金值。改为使用`0`。

# c - fread() 从当前文件和旧文件中读取

> ID：15487715
> 
> 赞同：0
> 
> 时间：2013-03-18T21:57:11.673
> 
> 标签：c, text, fread

当我使用此代码时

```
FILE *f = fopen(file, "rb");
const char *d;
if (f!=NULL) {
    static char c[100000];
    fread(c, sizeof(char), 10000000, f);
    d = c;
    fclose(f);
    return d;
}
else{
    /*
     char *ff = f;
     perror(ff);
     */
    d = "Error";
    fclose(f);
    return d;
} 
```

从包含这样文本的文件中读取

```
This
Is a test 
```

它读起来很好。但是，如果我打开另一个包含此文本的文件

```
Test 
```

它会读到类似

```
Test Is a test 
```

为什么文件关闭时将两者合二为一？我现在放了这个，但我仍然得到相同的结果

```
if (f!=NULL) {
fread(c, sizeof(c), len, f);
d = c;
fclose(f);
c[99999] = '\0';
return d;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T22:01:22.620

`fread()`不会 NUL 终止它读取的缓冲区。如果第二次读取比第一次短，则未覆盖的第一次读取的其余部分将保留在那里。无论如何，您的程序在很多地方都调用了未定义的行为，这甚至都不好笑。

例如，这个：

```
static char c[100000];
fread(c, sizeof(char), 10000000, f); 
```

很可能是一个错字 - 您允许`fread()`读取比缓冲区大小多 100 倍的数据。这就是为什么你应该***总是***（我的意思是，***ALWAYS***）使用`sizeof()`运算符和数组元素的大小而不是它的类型。此外，`sizeof(char)`始终为 1，不要拼写冗余数据：

```
fread(c, sizeof(c), 1, f); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T22:01:34.613

看起来你的数组中还有上次读取的字符。您应该在返回之前 null 终止字符串，`fread()`不会为您执行此操作。

您还有其他一些问题，例如字符限制`fread()`大于缓冲区大小。

除非您真的需要 c，否则您应该考虑使用 c++ 甚至其他具有更复杂的文件和文本处理库的语言，它会让您的生活更轻松。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T22:02:49.717

您正在将数据读入静态缓冲区，完成后不会终止字符串。因为`c`是静态的，所以初始化为零。`fread()`您使用来自调用的数据部分覆盖它。

因此，您应该使用 from 的返回值`fread()`并将其设置`c[len]`为`'\0'`.

# python - Python静态变量解析

> ID：15487719
> 
> 赞同：0
> 
> 时间：2013-03-18T21:57:18.640
> 
> 标签：python, static, static-variables

我正在尝试为为特定类创建的所有实例创建一个计数器。很明显，我的代码不会`self.__class__.counter`超过 1。我做错了什么？

```
 class Feature(object):
    counter = 0
    def __init__(self, line):
        self.id = self.__class__.counter
        self.__class__.counter = self.__class__.counter + 1
    def __repr__(self):
        return "Feature: id=%d name=%s" % (self.id,self.name,) 
```

**更新：** 此代码实际上按预期工作。聪明的人留下了一些非常详细的解释如何在 python 中处理静态。我投票结束我的问题，但讨厌答案会消失。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T22:18:29.363

这就是我的做法（虽然你的代码对我来说很好，所以我怀疑这不是你实际运行来观察问题的代码）。

```
class Feature(object):
    counter = 0

    def __init__(self):
        self.id = Feature.counter
        Feature.counter += 1 
```

You can replace `Feature` by `type(self)` (or `self.__class__`, same thing) if you prefer, but note that they'll behave differently in the presence of subclasses (maybe that's your problem, actually).

The rules for using class/instance variables are very simple in Python, and it helps to keep them in mind:

1.  Reading the value of an attribute with `self.name` will fall back to the class of `self`, and then to the base class hierarchy if `self` does not directly contain an attribute named `name`.
2.  Writing the value of an attribute with `self.name = ...` ***always*** binds `name` directly in `self`.

In particular, when writing a value it *does not matter* where a read to the same attribute would have gone before the assignment.

So if in your actual program you're instantiating a *subclass* of `Feature`, which I'll call `Sub` then this line:

```
self.__class__.counter = self.__class__.counter + 1 
```

will probably not do what you expect. It will *read* from the `Feature.counter` (the first time you create an instance of `Sub`), but will *write* to `Sub.counter`. Thereafter the reads will go to `Sub.counter` (because it exists now), and so the `Sub` instances will get increasing ids, but they're not increasing the value of `Feature.counter`, so instances of other subclasses of `Feature` can get duplicate ids.

So I'd use `Feature.counter` if I was thinking of `counter` as a global variable living in the `Feature` namespace, and I wanted all the subclasses of `Feature` to share the same counter. I'd use `type(self).counter` if I expect each and every subclass of `Feature` to have its own independent counter (but then you'd need to do something to initialise them).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T22:10:24.897

`self.__class__.attribute`为了更好地说明和之间的区别`ClassName.attribute`：

```
class Feature(object):
    counter = 0

    def __init__(self):
        self.id = self.__class__.counter
        self.__class__.counter += 1

class Sub(Feature):
    def __init__(self):
        super(Sub, self).__init__()        

print [(vars(Feature()), vars(Sub())) for i in xrange(3)]
print Feature.counter, Sub.counter, id(Feature.counter) == id(Sub.counter)

class Feature(object):
    counter = 0

    def __init__(self):
        self.id = Feature.counter
        Feature.counter += 1

class Sub(Feature):
    def __init__(self):
        super(Sub, self).__init__()

print [(vars(Feature()), vars(Sub())) for i in xrange(3)]
print Feature.counter, Sub.counter, id(Feature.counter) == id(Sub.counter)

>>> [({'id': 0}, {'id': 1}), ({'id': 1}, {'id': 2}), ({'id': 2}, {'id': 3})]
3 4 False
>>> [({'id': 0}, {'id': 1}), ({'id': 2}, {'id': 3}), ({'id': 4}, {'id': 5})]
6 6 True 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T22:14:34.767

在尝试计算实例时，我更喜欢这种范例：

```
from itertools import count

class MyClass():
  _getId = count(0).next
  def __init__(self):
    self.id = self._getId() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T22:04:28.403

为什么不使用类名本身，比如

```
self.id = Feature.counter
Feature.counter += 1 
```

# aparapi - getGlobalId() 的 aparapi 起始索引

> ID：15487721
> 
> 赞同：0
> 
> 时间：2013-03-18T21:57:27.570
> 
> 标签：aparapi

我使用 aparapi 进行并行化，我想转换这个 java 代码：

```
public static void main(String[] args) {
        float res = 0;
        for (int i = 2; i < 5; i++) {
            for (int j = 3; j < 5; j++) {
                res += i * j;
            }
        }

        System.out.println(res);

    } 
```

在 aparapi 中的等价物：

```
Kernel kernel = new Kernel() {
    @Override
    public void run() {
        int i = getGlobalId();
        ...
    }
};
kernel.execute();
kernel.dispose(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T18:26:25.187

这里有几个问题。

首先，您的代码不是数据并行的。您在“res”上有一个“竞态”条件，因此无法在 GPU 上计算此代码。

其次，执行范围太小。您正在尝试执行 6 个线程 (x [2,3,4] * y [3,4])。这不会真正从 GPU 中获得任何好处。

回答有关如何在上面的 2 个昏暗网格上实施的问题。

```
Range range = Range.create2D(3, 2) ; // A two dimension grid 3x2
Kernel kernel = new Kernel() {
    @Override
    public void run() {
        int x = getGlobalId(0)+2; // x starts at 2 
        int y = getGlobalId(1)+3; // y starts at 3
        ...
    }
};
kernel.execute(range);
kernel.dispose(); 
```

# database - 使用 perl 在 Oracle 中多次查询仅返回第一个查询

> ID：15487725
> 
> 赞同：-1
> 
> 时间：2013-03-18T21:57:44.793
> 
> 标签：database, oracle, perl, dbi, data-dumper

注意：我已经更正了变量差异，它确实打印了第一组的查询，但它没有从第二组返回任何内容。如果我只使用第二组，它会起作用。

在下面的代码中，我有一些数组，它是数组的数组，该数组包含名称之类的文本。所以@some_array= ([sam, jon, july],[Mike, Han,Tommy],[angie, sita, lanny]); 现在，当我首先查询 'sam jon july' 和 'mike han tommy' 这样的列表时。只有执行从第一个列表中返回结果，其他人是 undef。我不知道为什么会有任何帮助。

```
my $pointer;
my $db = $db->prepare_cached("
        begin
                :pointer := myFun(:A1);
        end;
                ") or die "Couldn't prepare stat: " . $db->errstr;
$db->bind_param_inout(":pointer",\$pointer,0,{ ora_type => ORA_RSET });

for (my $i=0; $i < @some_array ; $i++) {
        my @firstarray = @{$some_array[$i]};
        my $sql = lc(join(" ", @firstarray));
        print "<pre>$sql</pre>\n";
        $db->bind_param(":A1",$sql);
        $db->execute();
        print "<pre>".Dumper($db->execute())."</pre>\n";
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:06:56.690

Just like everyone told you on [the last question you asked](https://stackoverflow.com/questions/15486604/how-do-i-access-arrays-of-array-in-perl), initialize your array with parentheses, not nested brackets.

```
@some_array= ([sam, jon, july],[Mike, Han,Tommy],[angie, sita, lanny]) 
```

not

```
@some_array= [[sam, jon, july],[Mike, Han,Tommy],[angie, sita, lanny]] 
```

You would also benefit tremendously from including

```
use strict;
use warnings; 
```

at the top of all of your programs. That would catch the strange way you are trying to initialize `@some_array`, and it would catch your inconsistent usage of `@sql` and `@query`. **update** and `$sdh` and `$db` and `$dbh`.

# sed - Unix命令从文件的每一行中删除第一个，第二个和第五个字符？

> ID：15487729
> 
> 赞同：-1
> 
> 时间：2013-03-18T21:58:05.213
> 
> 标签：sed, awk, cut

例如：让我们考虑我的文件包含 100 行，我需要从每行中删除第 1、第 2 和第 5 个字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:02:52.667

## 尝试这样做

```
cut -c 3,4,6- file 
```

看 ：

[男人切](http://unixhelp.ed.ac.uk/CGI/man-cgi?cut)

## 样本输出

```
$ cat file
1abcdefgh 
2abcdefgh
3abcdefgh

$ cut -c 3,4,6- file
bcefgh 
bcefgh
bcefgh 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:03:04.897

你可以试试这个：

```
awk 'BEGIN{FS=OFS=""}{$5=$1=$2=""}1' file 
```

例如：

```
kent$  cat file
12345678foo
12345678foo
12345678foo
12345678foo
12345678foo

kent$  awk 'BEGIN{FS=OFS=""}{$5=$1=$2=""}1' file
34678foo
34678foo
34678foo
34678foo
34678foo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T22:03:29.013

非常感谢您的所有努力，我尝试了第一个，并且工作正常 $ cut -c 3,4,6- file

# jquery - JQuery读取JSON（全局/局部变量）

> ID：15487732
> 
> 赞同：2
> 
> 时间：2013-03-18T21:58:09.540
> 
> 标签：jquery, json, global-variables

所以我试图将数据从 JSON 分配给一个全局变量，以便以后多次使用，但我遇到了这个问题。第一个警报通过了，但是对于第二个警报，我无法读取未定义的属性 4。

```
 var refference=[]
  $.getJSON('letters.json', function(data) {
              refference=data.letters
              alert(refference[1][4])
        })
  alert(refference[1][4]) 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T22:02:17.080

第二个`alert(refference[1][4])`会给你一个错误，因为在那个时间点，`$.getJSON()`请求还没有返回。所以`refference`object 仍然是`[]`，因此属性 4 是未定义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T22:04:04.597

As Kevin B said, the alert is firing before the ajax call is complete. You'd have to put the second alert (or any other function) in the success callback of the ajax request to ensure that it fires after the data is completely loaded.

something like:

```
$.getJSON('letters.json', function(data) {
              refference=data.letters;
              alert(refference[1][4]);
        }).success(function(){
                    alert(refference[1][4]);
                  }); 
```

[Here's a working jsFiddle example using a JSON webservice](http://jsfiddle.net/b7ALS/44/)

# mysql - 如何编写从多个表返回值的 SQL SELECT 语句？

> ID：15487734
> 
> 赞同：0
> 
> 时间：2013-03-18T21:58:16.227
> 
> 标签：mysql, sql, select

我有四张桌子：人、教练、球员、比赛。我需要编写一个 SQL SELECT 语句，它将返回：我的身份证、姓名、出生日期、加入日期、我注册的教练的姓名，以及比赛的日期、时间和持续时间。

person 表包括：person id、name、出生日期和一些其他不必要的值。Coach 表包括：coach id 和一些其他不必要的值。玩家表包括：玩家id、加入日期、加入者。比赛表包括：教练ID、球员ID、比赛日期、比赛时间、比赛时长。

person 表基本上存储了教练和球员的所有姓名和主要详细信息。这些表已正确链接。

我尝试了各种说法，但我自己完全糊涂了。这个例子有点蹩脚，我还有别的东西，但不知道该怎么做。

例如

```
SELECT person_id, full_name, date_of_birth, join_date
FROM (person JOIN player ON player_id = person_id)
WHERE person_id='100' AND person_id, full_name
FROM (person JOIN coach ON coach_id = person_id); 
```

这些是 CREATE 语句：

```
CREATE TABLE person (
        person_id          CHAR(10)    NOT NULL,
        full_name          VARCHAR(54)    NOT NULL,
        date_of_birth      DATE,
        sex                CHAR(1),
  PRIMARY KEY (person_id)
) engine innodb;
CREATE TABLE coach (
        coach_id          CHAR(10)    NOT NULL,
        phone_no           CHAR(10)    NOT NULL,
        hall_no            CHAR(4)    NOT NULL,
  PRIMARY KEY (coach_id),
  FOREIGN KEY (coach_id) REFERENCES person (person_id)
) engine innodb;
CREATE TABLE player (
        player_id        CHAR(10)    NOT NULL,
        join_date   DATE        NOT NULL,
        joined_with   CHAR(10),
  PRIMARY KEY (player_id),
  FOREIGN KEY (player_id) REFERENCES person (person_id),
  FOREIGN KEY (joined_with) REFERENCES coach (coach_id)
) engine innodb;
CREATE TABLE game (
        coach_id        CHAR(10)    NOT NULL,
        player_id       CHAR(10)    NOT NULL,
        game_date        DATE        NOT NULL,
        game_time        TIME        NOT NULL,
        game_duration    INTEGER    DEFAULT 10,
  PRIMARY KEY (coach_id, player_id, game_date, game_time),
  FOREIGN KEY (coach_id) REFERENCES coach (coach_id),
  FOREIGN KEY (player_id) REFERENCES player (player_id)
) engine innodb; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:12:33.370

你的 SQL 很差。看起来您正在尝试使用以下几个`INNER JOINs`：

```
SELECT p.person_id, p.full_name, p.date_of_birth, pl.join_date, 
  c.coach_id, p2.full_name as coach_name, g.*
FROM person p
    JOIN player pl ON p.person_id = pl.player_id        
    JOIN game g ON p.person_id = g.player_id
    JOIN coach c ON c.coach_id = g.coach_id
    JOIN person p2 on c.coach_id= p2.person_id          
WHERE p.person_id='1' 
ORDER BY p.person_id, p.full_name 
```

如果您不需要教练的名字，您将不需要第二次重新加入人员——我只是认为这将是有用的信息。

[SQL 小提琴演示](http://sqlfiddle.com/#!2/8bb9d/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:06:12.163

我希望这有帮助。

```
SELECT person.person_id, person.full_name, person.date_of_birth, player.join_date 
 FROM person
INNER JOIN player
   ON player.player_id = person.person_id
WHERE person.person_id = '100' 
```

# c# - 强制关注 ExceptionValidationRule

> ID：15487736
> 
> 赞同：2
> 
> 时间：2013-03-18T21:58:24.460
> 
> 标签：c#, wpf, xaml, binding, validationrules

在 WPF 应用程序中，我使用带有 ExceptionValidationRule 的多个 TextBox 绑定。我希望能够留在具有 ApplicationException 的控件上，直到它有正确的数据输入。有可能吗？

这是我的代码：

```
 public string strEvtType
    {
        get { return m_strEvtType; }
        set {
                m_strEvtType = value;
                if (m_objEvtCode.ReadEvtTypebyType(m_strEvtType) != 0)
                {
                    throw new ApplicationException("Error ! : " + m_strEvtType.Trim() + " don't exist");
                }
                FirePropertyChangedEvent("strEvtType");
                FirePropertyChangedEvent("m_objEvtCode.strDes");

            } 
```

我的xml：

```
<TextBox Name="TextBox_TypeEvenement" Grid.Column="1" VerticalAlignment="Center" Height="20" LostFocus="TextBox_TypeEvenement_LostFocus">
  <TextBox.Text>
    <Binding Path="strEvtType">
        <Binding.ValidationRules>
            <ExceptionValidationRule />
        </Binding.ValidationRules>
    </Binding>
  </TextBox.Text>
</TextBox> 
```

我的模板

```
<Style TargetType="{x:Type TextBox}">
<Setter Property="Validation.ErrorTemplate">
    <Setter.Value>
        <ControlTemplate>
            <DockPanel  LastChildFill="False">
                <TextBlock DockPanel.Dock="Right"
                Foreground="red"
                FontSize="9pt"
                Text="{Binding ElementName=MyAdorner,Path=AdornedElement.(Validation.Errors)[0].ErrorContent}">
                </TextBlock>
                <Border BorderBrush="Red" BorderThickness="1">
                    <AdornedElementPlaceholder Name="MyAdorner" />
                </Border>
            </DockPanel>
        </ControlTemplate>
    </Setter.Value>
</Setter> 
```

非常感谢 ：）

此致，

尼克修斯

# apache - Apache Web 服务不完整的页面

> ID：15487739
> 
> 赞同：0
> 
> 时间：2013-03-18T21:58:37.253
> 
> 标签：apache, vpn, cisco

我有一个 Apache Web 服务器，有几个站点正在连接。从大多数站点可以访问并正确提供内容（远程站点并通过 Cisco VPN 连接），但是有一个站点，当请求我们正在运行的应用程序的登录页面时，服务器将提供一个不完整的页面。

我猜这个应用程序是什么并不重要，因为它在其他 10 个站点上运行良好，只是在这个站点上没有。

我得到了页面的 907 个字节（4000 个字节中的最后 907 个字节）。Wireshark 报告服务器响应不是第一个数据包，并且在捕获开始之前有一个数据包丢失。不用说，在捕获开始后我等了几分钟才启动浏览器，所以没有办法因为 Wireshark 仍在尝试启动而真正丢失了数据包。

知道我想在哪里解决这个问题吗？

由于它在任何地方都有效，它似乎表明网络上出现了问题。我会在哪里寻找这样一种尴尬的行为，其中 3000 字节的 Web 服务器响应被吞没了？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-19T21:36:54.570

There is no indication on the Apache logs that anything special has occured on the failed pages.

# java - Java for Eclipse 编译 JRE 问题

> ID：15487742
> 
> 赞同：10
> 
> 时间：2013-03-18T21:58:50.510
> 
> 标签：java, eclipse

我使用 Mac OS，10.6，在恢复备份数据后，Eclipse 停止工作。它给了我以下错误：

```
The container 'JRE System Library [JavaSE-1.6]' references non existing library '/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/classes.jar'       

Unbound classpath container: 'JRE System Library [JavaSE-1.7]' in project 'Proba' 
```

我试图再次安装 Java Development Kit (Help -> Install new software)，Eclipse 实际安装了它，但是当我转到 (Eclipse -> Preferences -> Java -> Installed JREs) 时，出现错误`"Installed JRE location no longer exists. JRE will be removed. Reason: JRE removed"`，并安装了 JREs 窗口确实是空的。Java 代码仍然无法编译。

**解决方案：**转到：`Eclipse -> Preferences -> Java -> Installed JREs -> Execution Environment`并选择 JAVA SE 6 包（可能 JAVA SE 7 可以工作），然后在右侧选择兼容的 JRE。

重新加载 Eclipse。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-02-11T14:57:41.290

两种可能：

**1\. 更新已安装的 JRE**
*（根据问题，执行以下操作之一）*

*   为失败的 JVM移除并重新创建`Installed JREs`实例。

    `Eclipse -> Preferences -> Java -> Installed JRE`

*   安装新版本的 Java。（您可以在[此处](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html)获取），然后使用 Eclipse 的“已安装的 JRE”创建一个新实例。将其设置为默认值。

    `Eclipse -> Preferences -> Java -> Installed JRE`

*（如您所述）*
**2\. 更新`Execution Environment`它以使其与 JRE 兼容。**

转到`Eclipse -> Preferences -> Java -> Installed JREs -> Execution Environment`并选择一个兼容的环境。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-14T11:49:06.523

以下是解决问题的方法：

1.  Mac 中的某些版本（例如 Lion）不附带 JDK；您可以直接从[http://connect.apple.com](http://connect.apple.com)下载一个。是的，您需要使用您的 Apple id 注册并登录。下载栏在右侧结束；你应该能够找到自己的方式。

2.  jdk 安装到不同的位置。这将导致 IDE（例如 Eclipse）无法找到源代码和 javadocs。

3.  在撰写本文时，JDK 出现在此处：/Library/Java/JavaVirtualMachines/1.6.0_31-b04-415.jdk/Contents/Home 请继续查看您的 JDK 的结束位置；这无疑会随着时间而改变。

4.  打开 Eclipse 首选项并转到 Java --> Installed JREs 页面

5.  我们需要使用上面的 JDK 位置，而不是使用“JVM Contents (MacOS X Default)”

6.  在撰写本文时，搜索按钮并不知道新的 JDK 位置；我们需要单击“添加”按钮并自己寻找它。

7.  从添加 JRE 向导中，为 JRE 类型选择“MacOS X VM”

8.  对于 JRE 定义页面，我们需要填写以下内容：JRE Home:/Library/Java/JavaVirtualMachines/1.6.0_26-b03-383.jdk/Contents/Home

9.  其他字段现在将自动填充，默认 JRE 名称为“Home”。您可以快速将其更正为更有意义的内容：JRE name:System JDK

10.  完成向导并返回到 Installed JREs 页面

11.  从列表中选择“系统 JDK” 您现在可以正常地使用 javadocs 为基类（如 java.lang.String）正确显示的开发人员，在调试时正确显示源代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-12T08:58:47.440

上面的错误只是说您的 JRE/JDK 已经移动了 Eclipse 变量，并且在 Eclipse 中定义的相关变量指向了现在不再存在的位置。

您所要做的就是将这些变量指向新位置，上面建议的方法很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-17T12:24:10.483

4 种可能的替代方案：

1.  重新配置库。
2.  更新 JRE。
3.  更新执行环境。
4.  检查 MAC 更新。//Mac部分版本默认不支持JDK。但是您可以通过使用 JDK 而不是 Mac 默认变量来重新配置它来解决您的问题。

您可以尝试的另一件事是将 Eclipse 恢复到默认状态，即重新安装您正在使用的 Eclipse 版本。（顺便说一下，当我遇到类似问题时，这对我有用）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-03T23:31:28.383

我在 Spring Tool Suite(v 3.7.2) 上遇到了同样的问题，并采取了以下步骤来解决这个问题：

1.  cd $JAVA_HOME/jre（在 Mac 上）
2.  pwd（这将给出 JRE 目录的位置）
3.  STS > Preferences > Installed JREs > 添加 JRE 的位置

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-17T02:58:07.243

我的系统 Java 自我更新后发生了这种情况。我重新启动了 Eclipse，它进行了构建，并且错误消失了。

# sql - 数据库向导中的实体类挂起

> ID：15487745
> 
> 赞同：2
> 
> 时间：2013-03-18T21:58:56.450
> 
> 标签：sql, database, netbeans, entity, persistence.xml

我正在使用 Netbeans 7.3、Glassfish 服务器和 SQL Server 2008（名为 dbo 的架构，大小为 65 GB）开发一个 Web 应用程序。我已经连接到数据库（在“服务”选项卡中），现在我正在尝试`persistence.xml`使用向导创建一个。

**步骤：**新建文件 > 持久性 > 数据库中的实体类 > jdbc/AppName - 然后，“检索 xyz 的密钥”进度条出现并开始运行。但是，它到了一半然后挂起。

我一直找不到任何关于为什么会发生这种情况的信息。是由于大小限制 - 内置在向导中吗？或者，也许是数据库本身的错误？

任何输入都会很棒，谢谢。

# ios6 - AutoLayout 适用于 UIView 但不适用于 UILabel。为什么？

> ID：15487750
> 
> 赞同：1
> 
> 时间：2013-03-18T21:59:21.717
> 
> 标签：ios6, autolayout

所需场景：通过 iOS6 的 AutoLayout vs Frames 创建自定义警报视图：

1）在宿主视图（UIController.view）上创建一个空的 UIView：

```
alertView = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 0, 0)];
[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-[alertView(==300)]" options:0  metrics:nil views:viewsDict]];
[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-[alertView]-|" options:0  metrics:nil views:viewsDict]]; 
```

这有效：我在（子视图）主机视图上看到我的警报 UIView。

* * *

但是，尝试将 UILabel 添加到警报视图炸弹。

看到 UIView (1) 被绘制，我只是用 UILabel 代替它，看看我能不能得到一些东西：

```
- (UILabel *)createLabelWithMessage:(NSString *)message {
    if (!message) return nil;
    UILabel *myLabel = [[UILabel alloc]initWithFrame:CGRectMake(0, 0, 0,0)];
    myLabel.text = message;
    [myLabel setFont:[UIFont systemFontOfSize:12.0]];
    [myLabel setAutoresizingMask:UIViewAutoresizingNone]; 
    myLabel.backgroundColor = [UIColor clearColor];
    return myLabel;
}
...
titleLabel = [self createLabelWithMessage:@"Danger"];
...
// ...replacing 'alertView' (UIView) with 'titleView' (UILabel):
[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-[titleLabel(==300)]" options:0  metrics:nil views:viewsDict]];
[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-[titleLabel]-|" options:0  metrics:nil views:viewsDict]]; 
```

**问题：为什么 UILabel 会爆炸，但 UIView 似乎可以正常绘制？**

这是来自 Xcode 的提示：

> AutoLayoutContraints[3828:11303] 无法同时满足约束。
> 
> 以下列表中的至少一个约束可能是您不想要的。尝试这个：
> 
> （1）查看每个约束并尝试找出您不期望的；
> 
> (2) 找到添加了一个或多个不需要的约束的代码并修复它。
> （注意：如果您看到不理解的 NSAutoresizingMaskLayoutConstraints，请参阅 UIView 属性 translatesAutoresizingMaskIntoConstraints 的文档）（“”、“”、“”）
> 
> 将尝试通过打破约束来恢复（名称：'|':UIView:0x128727a0）>

UILabel 中一定有一个隐藏的属性搞砸了我的“视觉格式”语言。

..我创建了“alertView”的另一个子视图；我得到同样的错误。因此，显然，当我仅在 UIController 的视图（子视图）上显示一（1）个 UIView（“alertView”）时，我只会得到一个“好”的结果；而已。

隐藏的东西与简单的约束相冲突。我不知道是什么。

顺便说一句：我使用 NIB 作为主机 UIView，并使用“使用 autoLayout”“ON”。但是，我将在没有“自动布局”（iOS 4.3+）的较大代码中使用它，在 iOS6 检查例程中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:53:48.300

**解决方案：（**根据我的评论）我错过了将特定子视图的“setTranslatesAutoresizingMaskIntoConstraints”标志设置为“NO”；尽管我已经为它的超级容器做了它。
**示例：**
[testView setTranslatesAutoresizingMaskIntoConstraints:NO];

*不要忘记**对****所有****成员 UIView*使用“setTranslatesAutoresizingMaskIntoConstraints” ！

# android - android：如何检查应用程序是否在后台运行 2

> ID：15487754
> 
> 赞同：2
> 
> 时间：2013-03-18T21:59:31.900
> 
> 标签：android, android-intent, android-activity

我有解决办法。

```
public static boolean isApplicationSentToBackground(final Context context) {
ActivityManager am = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
List<RunningTaskInfo> tasks = am.getRunningTasks(1);
if (!tasks.isEmpty()) {
  ComponentName topActivity = tasks.get(0).topActivity;
  if (!topActivity.getPackageName().equals(context.getPackageName())) {
    return true;
  }
}

return false; 
```

}

它工作正常。

我如何才能检查我的应用程序是否真的在后台？例如，我打开了活动并开始了新的活动 - 标准画廊（从我的应用程序开始）。这个意图是从我的活动开始的，我的应用程序逻辑上在前台。我可以检查我的活动，但是如何检查这种情况呢？

以及如何检查应用程序是否从外部活动发送到后台（在此示例中 - 画廊）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-02T09:28:20.047

```
public boolean isApplicationSentToBackground(final Context context) {

  Boolean flag = false;
  ActivityManager am = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
  if (Build.VERSION.SDK_INT >= 23) {
    List < ActivityManager.RunningTaskInfo > tasks = am.getRunningTasks(1);
    if (!tasks.isEmpty()) {
      ComponentName topActivity = tasks.get(0).topActivity;
      if (!topActivity.getPackageName().equals(context.getPackageName())) {
        flag = true;
      }
    }
  } else {
    try {
      Thread.sleep(1500);
      flag = false;
      List < ActivityManager.RunningAppProcessInfo > runningProcesses = am.getRunningAppProcesses();
      for (ActivityManager.RunningAppProcessInfo processInfo: runningProcesses) {
        if (processInfo.importance == ActivityManager.RunningAppProcessInfo.IMPORTANCE_BACKGROUND) {
          for (String activeProcess: processInfo.pkgList) {
            if (activeProcess.equals(context.getPackageName())) {
              flag = true;
            }
          }
        }
      }
    } catch (Exception e) {
      e.printStackTrace();
    }
  }
  return flag;
} 
```

# three.js - 设置整个 THREE.Geometry 对象的颜色

> ID：15487755
> 
> 赞同：0
> 
> 时间：2013-03-18T21:59:35.023
> 
> 标签：three.js, webgl

`THREE.Geometry`有没有办法使用 three.js设置整个对象的颜色？有一些天真的方法我可以做到这一点，但这些方法似乎都不理想。

我可以克隆一种材质并为每个几何体设置不同的颜色。本质上，每个几何图形都与材料具有一对一的关系。但是，这会在 GPU 上创建许多重量级材质对象和可能不必要的额外着色器。

我也可以使用单一的白色材料并为几何体的所有面着色。但是，由于每个几何体只有一种颜色但有许多面，因此会创建相同颜色对象的大量重复。

是否有使用three.js 执行此操作的“正确”方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:20:17.543

> 但是，这会在 GPU 上创建许多重量级材质对象和可能不必要的额外着色器。

它不应该。如果它们相同，着色器将被重用。因此，创建与几何形状一样多的材料应该没问题。

# python - wxPython：尝试制作停靠窗口，绑定父级 EVT_ACTIVATE 防止父级调整大小

> ID：15487759
> 
> 赞同：0
> 
> 时间：2013-03-18T21:59:47.357
> 
> 标签：python, wxpython, wxwidgets, docking

我正在尝试制作一个简单的停靠框架，它将停靠到父窗口并跟随它。到目前为止，我有以下内容：

```
class DockingFrame(wx.Frame):
    def __init__(self, parent):
        wx.Frame.__init__(self, parent, style=wx.CAPTION)

        parent.Bind(wx.EVT_MOVE, self.OnParentMove)
        parent.Bind(wx.EVT_ACTIVATE, self.OnParentActivate)
        parent.Bind(wx.EVT_SHOW, self.OnParentShow)

    def OnParentMove(self, moveEvent):
        print "Docked frame parent moved"
        pr = positioning.position(
            self.Rect,
            my='right_top', at='left_top', of=self.Parent.Rect)
        self.Move(pr.top_left)
        moveEvent.Skip()

    def OnParentActivate(self, event):
        print "Docked frame parent activated"
        self.Raise()
        event.Skip()

    def OnParentShow(self, event):
        print "Docked frame parent showed"
        self.Show(event.GetShow())
        event.Skip()

class MainFrame(wx.Frame):
    def __init__(self, title):
        wx.Frame.__init__(self, None, title=title)

        self.info_frame = DockingFrame(self)

        self.Show(True) 
```

这是因为如果我移动父窗口，停靠的窗口会随之移动，如果我单击父窗口，停靠的窗口会自行升起。但是，它严重干扰了父窗口的功能。我无法再关闭或重新调整父窗口的大小，并且每当我单击父窗口时，都会收到大量“已激活停靠框架父窗口”的消息。看来我不明白一些基本的 wxPython 概念，here。发生了什么事，我该如何解决？

我已经看到它`aui`似乎支持对接，但文档很少，所以我没有尝试过。如果有人可以提供一个最小的工作代码示例来说明`Frame`如何`Frame`使用`aui`.

请注意，我也在这个应用程序中使用`pygame`and `twisted`，它可能会或可能不会干扰这里......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T23:15:22.380

而且，当然，简单的方法是简单地使用`wx.FRAME_FLOAT_ON_PARENT`样式......

```
class DockingFrame(wx.Frame):
    def __init__(self, parent):
        wx.Frame.__init__(self, parent, title="Last Hand",
                          style=wx.CAPTION  | wx.FRAME_FLOAT_ON_PARENT)

        parent.Bind(wx.EVT_MOVE, self.OnParentMove)
        parent.Bind(wx.EVT_SHOW, self.OnParentShow)

    def SnapToParent(self):
        print "*Snapping to parent"
        pr = positioning.position(
            self.Rect,
            my='right_top', at='left_top', of=self.Parent.Rect)
        self.Move(pr.top_left)

    def OnParentMove(self, moveEvent):
        moveEvent.Skip()
        self.SnapToParent()

    def OnParentShow(self, event):
        event.Skip()
        print "Parent %s" % ("Hide", "Show")[event.GetShow()]
        self.Show(event.GetShow()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:57:08.520

诀窍是`EVT_ACTIVATE`激活和取消激活都会触发。以下代码有效。如果父级被激活，则扩展坞会自行升起并在之后立即升起父级。

```
class DockingFrame(wx.Frame):
    def __init__(self, parent):
        self.handleParentActiveState = 'noTriggers'

        wx.Frame.__init__(self, parent, title="Last Hand", style=wx.CAPTION)

        parent.Bind(wx.EVT_MOVE, self.OnParentMove)
        parent.Bind(wx.EVT_ACTIVATE, self.OnParentActivate)
        self.Bind(wx.EVT_ACTIVATE, self.OnActivate)
        parent.Bind(wx.EVT_SHOW, self.OnParentShow)        

    def OnActivate(self, event):
        event.Skip()
        if not event.GetActive():
            return

        if self.handleParentActiveState == 'activateParentNext':
            self.handleParentActiveState = 'resetTriggers'
            self.Parent.Raise()

    def OnParentActivate(self, event):
        event.Skip()
        if not event.GetActive():
            return

        if self.handleParentActiveState == 'noTriggers':
            self.handleParentActiveState = 'activateParentNext'
            self.Raise()
        elif self.handleParentActiveState == 'resetTriggers':
            self.handleParentActiveState = 'noTriggers'

    def OnParentMove(self, moveEvent):
        pr = positioning.position(
            self.Rect,
            my='right_top', at='left_top', of=self.Parent.Rect)
        self.Move(pr.top_left)
        moveEvent.Skip()

    def OnParentShow(self, event):
        event.Skip()
        self.Show(event.GetShow()) 
```

# java - 在 Java 中发布和停止端点 Web 服务

> ID：15487762
> 
> 赞同：5
> 
> 时间：2013-03-18T21:59:57.627
> 
> 标签：java, eclipse, webserver, endpoint

我正在尝试通过单击按钮在与我的主程序不同的线程中启动/停止 Endpoint Web 服务。开始工作正常，我可以毫无问题地访问我的所有 WebMethods。问题是，当我单击停止按钮尝试停止 Web 服务端点时，我得到一个异常并且我不知道它是什么。我也是 Java 新手。

提前致谢。

在 'ep.stop()' 处抛出异常：

```
WebService Running On: http://0.0.0.0:9898/

        Exception in thread "Thread-0" java.lang.NullPointerException
            at com.sun.xml.internal.ws.transport.http.server.ServerMgr.removeContext(Unknown Source)
            at com.sun.xml.internal.ws.transport.http.server.HttpEndpoint.stop(Unknown Source)
            at com.sun.xml.internal.ws.transport.http.server.EndpointImpl.stop(Unknown Source)
            at com.simba.Server.startWebSrv(Server.java:27)
            at com.simba.Server.run(Server.java:13) 
```

服务器类：

```
import javax.xml.ws.Endpoint;

public class Server extends Thread {

      public volatile boolean active = true;
      private Endpoint ep; 
      private String ip = "0.0.0.0";

      public void run(){
            ep = Endpoint.publish("http://" + ip + ":9898/",  new SWS());
            startWebSrv();
      }

      private void startWebSrv(){
          synchronized(this){
              try {
                  while (active) {
                      System.out.println("WebService Running On: http://" + ip + ":9898/");
                      wait();
                  }
              }catch (InterruptedException e) {
                  e.printStackTrace();
              }finally{
                if(!active){
                    ep.stop();
                    System.out.println("WebService Stopped!");
                }
              }
          }
      }
} 
```

我如何尝试从我的主程序中停止服务/线程：

```
MenuItem mntmToggleWebservice = new MenuItem(menu_4, SWT.NONE);
        mntmToggleWebservice.addSelectionListener(new SelectionAdapter() {
            @Override
            public void widgetSelected(SelectionEvent e) {
                synchronized(srv){
                    srv.active = false;
                    srv.notifyAll();            
                }
            }
        });
        mntmToggleWebservice.setText("Toggle WebService"); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T14:18:18.063

问题解决了！

不要使用`'0.0.0.0'`. 出于某种原因，在“0.0.0.0”上创建服务是可行的（使用机器的实际 IP），但`Endpoint.stop()`不能很好地使用它。

相反，我只是使用`'System.getEvn('COMPUTERNAME')'`并使用机器名称创建服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-04T15:10:17.553

您可以使用“输入”来阻止程序的运行

```
public class ServiceMain {

    private static void DoNothing() {

    }

    public static void main(String[] args) {  
        String address = "http://127.0.0.1:7775/hb";  
        Endpoint ep = Endpoint.publish(address, new ServiceImp());
        Scanner scanIn=new Scanner(System.in);
        System.out.println("Web Service Release Successfully!"); 
        while(!scanIn.next().equals("stop")){
            DoNothing();
        }
        scanIn.close();
        ep.stop();
        System.out.println("Web Service Close Successfully!"); 

    }  
} 
```

# scheme - In beginner scheme how do I consume and combine two lists?

> ID：15487765
> 
> 赞同：1
> 
> 时间：2013-03-18T22:00:11.990
> 
> 标签：scheme, racket

I'm trying to figure out a question that takes a list of first names and a list of last name and create a new list of email addresses with the first letter of the first name and up to 7 letters of the last name and @yahoo.com.

example:

```
(check-expect 
    (emails-list (list "John" "Sarah") (list "King" "Dickinson")) 
    (list "jking@yahoo.com" "sdickins@yahoo.com"))

(check-expect (emails-list empty empty) empty) 
```

So far I have:

```
(define (appendnames alof alos)
  (cond [(and (empty? alof) (empty? alos)) empty]
        [else (string-append 
                (substring (first alof) 0 1) 
                (cond [(< (string-length (first alos)) 8) (first alos)]
                      [else (substring (first alos) 0 7)]) 
                "@yahoo.com")]))

(define (emails-list alof alos)
  (cond [(and (empty? alof) (empty? alos)) empty]
        [else (appendnames alof alos)])) 
```

What I don't know how to do is how to make the first letters lowercase and where to put in the recursion so that appendnames will (appendnames (rest alof) (rest alos)).

Thanks so much for any help I can get!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:19:10.623

Well, this looks like homework so I'll give you some hints, it'll be much better if you try to solve the problem by your own means. The first thing is - split the problem in two parts to make it simpler:

```
(define (emails-list alof alos)
  (if <???>                              ; if any of the lists is empty
      <???>                              ; return the empty list
      (cons (make-email <???> <???>)     ; create a new email with current values
            (emails-list <???> <???>)))) ; and advance the recursion 
```

The interesting part of course, will be creating the actual email. Refer to the [character](http://docs.racket-lang.org/reference/characters.html) and [string](http://docs.racket-lang.org/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._make-string%29%29) procedures available, here's the general idea:

```
(define (make-email name surname)
  (<???>                    ; convert the whole string to lowercase
   (<???>                   ; append the three parts of the email
    (string (<???> name 0)) ; create a new string with the frist char in name
    <???>                   ; create a substring with last name (*)
    "@yahoo.com")))         ; add the email domain 
```

The step marked with `(*)` requires a bit more explanation. Notice that we're interested in *at most* seven characters from the surname, which can be easily obtained with the `substring` procedure, as long as we remember that the end index is either 7 or the string's length, if the string's length is less than seven.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:30:57.530

If you haven't already read it, you should read this chapter of HtDP, which explains how to design functions that take two complex inputs:

[http://htdp.org/2003-09-26/Book/curriculum-Z-H-22.html](http://htdp.org/2003-09-26/Book/curriculum-Z-H-22.html)

The HtDP chapter talks about three kinds of situations (or "cases") in which you need to process two complex arguments. Which situation matches the problem you're trying to solve?

How many `cond` clauses should you have? What are they? What do you have available to work with in the answer part of each clause? (In other words, what is the function's template?)

Once you get that far, it should be pretty easy to fill in the code. If you get stuck, use your concrete examples to help you.

# sql - 使用 SQL Server 2008 检查表中是否存在 ID

> ID：15487769
> 
> 赞同：0
> 
> 时间：2013-03-18T22:00:20.900
> 
> 标签：sql, select, sql-server-2008-r2

我在 SQL Server 2008 中的 select 语句遇到了一点问题。我正在构建一个售票应用程序网站，我需要确保无法搜索已售出的门票。这是我的 SQL 存储过程：

```
 spGetSeatBySection
    @SectionID int
    AS
    SELECT
    [SeatID],
    [SectionID],
    [SeatName],
    [SeatPrice],
    [SeatDesc],
    [SeatIsActive],
  FROM [myDataBase].[dbo].[Seats]
  WHERE SectionID = @SectionID 
  AND SeatIsActive = 1 
  AND **IF EXISTS CLAUSE**; 
```

我已经尝试了一些其他已在此处发布的方法，例如 if exists('table_name, 'column_name')。是否有另一种方法可以在不重新设计我的`SELECT`声明的情况下检查这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:11:25.320

**[与EXISTS](http://msdn.microsoft.com/en-us/library/ms188336%28v=sql.105%29.aspx)**类似的东西：

```
 SELECT
    [SeatID],
    [SectionID],
    [SeatName],
    [SeatPrice],
    [SeatDesc],
    [SeatIsActive],
  FROM [myDataBase].[dbo].[Seats]
  WHERE SectionID = @SectionID 
  AND SeatIsActive = 1 
  AND EXISTS (SELECT o.SeatID 
              FROM OrderItems o
              WHERE o.SeatID = [Seats].SeatID ) 
```

你可能可以这样做：

```
 SELECT
    s.[SeatID],
    s.[SectionID],
    s.[SeatName],
    s.[SeatPrice],
    s.[SeatDesc],
    s.[SeatIsActive],
  FROM [myDataBase].[dbo].[Seats] s
       INNER JOIN OrderItems o ON o.SeatID = s.SeatID 
  WHERE s.SectionID = @SectionID 
  AND s.SeatIsActive = 1 
```

# python - python, mechanize - 使用 mechanize 打开一个文本文件

> ID：15487772
> 
> 赞同：1
> 
> 时间：2013-03-18T22:00:41.870
> 
> 标签：python, beautifulsoup, mechanize

我正在学习机械。我正在尝试打开一个文本文件，您单击的链接显示
文本 (.prn) 我遇到的一个问题是此页面上只有 1 个表单，并且该文件不在表单中。我的另一个问题是此页面上有几个文本文件，但它们都具有相同的名称文本 (.prn)。所以我想我需要找到第一个并打开它。使我试图打开的文本文件独一无二的一件事是它似乎被命名为

*   摘要，也许我可以用它打开它，然后使用 br.form.find_control( 或者我可以使用： br.click_link ，如果我能找到一些方法来直接机械化打开第一个标题为“摘要”的

    我所在的网页是： [http ://www.treasurydirect.gov/govt/reports/pd/mspd/2013/2013_feb.htm](http://www.treasurydirect.gov/govt/reports/pd/mspd/2013/2013_feb.htm)

    这是我想在机械化中打开文本文件的html部分：

    ```
    </div>
    <!-- END LOCALNAV --> 
        <!-- BEGIN CONTENT -->
        <div id="content">
            <h1>February 2013</h1>
            <!-- InstanceBeginEditable name="content" -->
            <ul>
                <li>Summary
                    <ul>
                        <li><a      href="/govt/reports/pd/mspd/2013/opds022013.pdf">Adobe Acrobat (.pdf)</a></li>
                        <li><a href="/govt/reports/pd/mspd/2013/opds022013.prn">Text (.prn)</a></li>
                    </ul>
                </li>
                <li>STRIPS
                    <ul>
                        <li><a href="/govt/reports/pd/mspd/2013/opdr022013.pdf">Adobe Acrobat (.pdf)</a></li>
                        <li><a href="/govt/reports/pd/mspd/2013/opdr022013.xls">Excel 5.0/95 (.xls )</a></li>
                        <li><a href="/govt/reports/pd/mspd/2013/opdr022013.prn">Text (.prn)</a></li>
                    </ul>
                </li>
                <li>Entire MSPD
                    <ul>
                        <li><a href="/govt/reports/pd/mspd/2013/opdx022013.xls">Excel File for Primary Dealers</a></li>
                        <li><a href="/govt/reports/pd/mspd/2013/opdm022013.pdf">Adobe Acrobat (.pdf)</a></li>
                        <li><a href="/govt/reports/pd/mspd/2013/opdm022013.xls">Excel 5.0/95 (.xls)</a></li>
                        <li><a href="/govt/reports/pd/mspd/2013/opdm022013.prn">Text (.prn)</a></li>
                    </ul>
                </li>
            </ul>
            <p>Note: To read or print a PDF document, you need the Adobe Acrobat Reader (v5.0 or higher) software installed on your computer. You can download the Adobe Acrobat Reader from the <a href="/exit.htm?http://get.adobe.com/reader/">Adobe website</a>.</p>
            <p>Note: If you need <a href="/helpdownload.htm">help downloading...</a></p>
            <!-- InstanceEndEditable --> </div>
        <!-- END CONTENT --> 
        <!-- BEGIN SUBLOCALNAV -->
    <div id="right"> 
    ```

    到目前为止，这是我的代码，从文本文件所在的页面之前的页面开始：

    ```
     br = mechanize.Browser()
    br.set_handle_equiv(False)
    br.open(site)
    print 'br.title',br.title()
    allforms = list(br.forms())
    br.form = allforms[0]
    br.follow_link(text_regex="February", nr=0)
    #br.click_link(text='February', nr=0) # this works to

    #next page
    print br.title()
    allforms = list(br.forms())
    print allforms
    br.form = allforms[0]
    getstuff=br.click_link(text="Text (.prn)", nr=0) # this works to
    csvData=getstuff.readlines()  # this is where is get error 
    ```

    这是我的回溯：

    ```
    Traceback (most recent call last):
    File "treasury2.py", line 56, in <module>
    csvData=getstuff.readlines()
     File "C:\Python27\lib\site-packages\mechanize\_urllib2_fork.py", line 173, in __getattr__
    raise AttributeError, attr
    AttributeError: readlines 
    ```

    我正在使用 mechanize ， BeautifulSoup ， urllib ， urllib2 和 python27

    请给我一些帮助，甚至提示您认为我应该使用什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:04:28.493

紧接着`getstuff=br.click_link(text="Text (.prn)", nr=0)`，而不是你的~~csvData=getstuff.readlines()~~，你应该打电话：

```
br.open(getstuff)
csvData = br.response().read() 
```

如果您需要对上一页（即**2013_feb.htm**）做任何其他事情，请致电：

```
br.back() 
```

这将`br`恢复到与之前相同的状态`br.open`。

# c# - 在 WPF ListView 中拖放

> ID：15487774
> 
> 赞同：6
> 
> 时间：2013-03-18T22:01:04.380
> 
> 标签：c#, wpf, listview, drag-and-drop

我正在使用 WPF ListView，其中 SelectionMode 设置为 Extended（您只能在按下 ctrl 的情况下选择多个项目）。我需要在两个 ListView 之间实现 D&D。为了执行拖动事件，我在 WinForms 中使用了 DragItem 事件，但是 wpf 中没有提供这样的事件。我决定使用 ListViewItem PreviewMouseDownClick

```
private void ListViewItemMouseDownClick(object sender, MouseButtonEventArgs e)
{
    if (!this.AllowDragDrop)
    {
        return;
    }

    DragDrop.DoDragDrop(
        ListViewItemsCollection, this.SelectedItems, DragDropEffects.Copy | DragDropEffects.Move);
} 
```

不幸的是，这样的解决方案有一个错误：选择单个项目（不按 ctrl）有效。但是，我需要在按下 ctrl 时双击以选择项目以选择多个项目。使用 ListView 的 PreviewMouseDown 或 ListViewItem 的 PreviewMouseDown 没有区别。任何想法如何解决问题？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-03-18T23:24:11.957

找到的解决方案，就像一个 chram： [social.msdn.microsoft.com](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/e57349f1-418c-4f94-a933-8e574121ffcc/)。我加入了来自 moncadad 链接的代码。谢谢！

# javascript - Facebook 帖子中的 RTL 文本重新排序单词

> ID：15487783
> 
> 赞同：3
> 
> 时间：2013-03-18T22:01:26.707
> 
> 标签：javascript, facebook, right-to-left

我来自突尼斯，目前正在开发一个名为`PHPFOX`. 在其中，我想集成一种`TextBox`自动更改文本方向的功能。具体来说，当您访问 Facebook 并想发表评论时，`TextBox`输入方向将根据您选择的键盘方向而改变。

换句话说，如果您为键盘选择了阿拉伯语，`TextBox`则会自动设置`RTL`方向。

这是我到目前为止使用的代码：

```
$('input').keyup(function() {
    $this = $(this);
    if ($this.val().length == 1) {
        var x = new RegExp("[\x00-\x80]+"); // ASCII
        //alert(x.test($this.val()));

        var isAscii = x.test($this.val());
        if(isAscii) {
            $this.css("direction", "ltr");
        } else {
            $this.css("direction", "rtl");
        }
    }
}); 
```

输入一切正常。但是，看看当我在我的网站中输入一个混合句子，`LTR`然后`RTL`将其发布到 Facebook 时会发生什么：

这是我输入的内容：

![输入](../Images/a063cb1134e39f722edf6b1420652294.png)

以下是 Facebook 上显示的内容：

![结果](../Images/8e0f4af478c5aaeb6cbf4799d32b93d4.png)

看到不同？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T20:34:13.217

首先 - 你采用的方法非常棒，我为你鼓掌。切换`<input>`via CSS 的方向以允许自然输入非常有意义。

但是，您的 OUTPUT 出现异常的原因是您发送到 Facebook 的生成内容。我的猜测是，由于文本的最后几个字符在 RTL 中，因此您输入的 CSS 仍设置为 RTL。

考虑这个例子（结果可以[在这里](http://cssdesk.com/d9Jda)看到）：

```
<div>
 <b>LTR:</b> <span dir="ltr">This is some الفبای فارسی text</span>
 <br /><br />
 <b>RTL:</b> <span dir="rtl">This is some الفبای فارسی text</span>
</div> 
```

因为第二个`<span>`是用 显示的`dir="rtl"`，所以文本最终会重新排序，每个 LTR 短语都被视为一个 RTL“单词”。

![例子](../Images/c1b271d98d117339b2cc223115d4ffc7.png)

在您的示例中，您可能会考虑尝试的只是确保在*提交*帖子之前，将 CSS 方向设置回`LTR`，这将产生我认为您正在寻找的结果。

如果您有兴趣，这里有[一篇博](http://marc.durdin.net/2012/08/mixing-rtl-and-ltr-plaintext-vs-html.html)`LTR`文，讨论 HTML 和纯文本样式渲染和文本之间的区别`RTL`。它不会为您提供任何答案，但会指出有关问题本身的更多细节。

# html - 为什么我看不到 HTML 5 ?

> ID：15487785
> 
> 赞同：3
> 
> 时间：2013-03-18T22:01:28.737
> 
> 标签：html, jsf, facelets

这是我的 Facelets 文件：

```
<!DOCTYPE html>
<html lang="en"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html">

<h:head>
    <title>Simple JSF Facelets page</title>
</h:head>

<h:body>
    Place your content here!
    <dialog>
        <dt>Sam</dt>
        <dd>Knock, Knock.</dd>
        <dt>Eric</dt>
        <dd>Who's there?</dd>
        <dt>Sam</dt>
        <dd>Justin.</dd>
        <dt>Eric</dt>
        <dd>Justin who?</dd>
        <dt>Sam</dt>
        <dd>Justin time for dinner!</dd>
    </dialog>
</h:body>
</html> 
```

我在浏览器中看到的只是

> 将您的内容放在这里！

当我检查此文件的源时，我在 chrome 中看到：

```
<!DOCTYPE html>
<html lang="en"><head>
    <title>Simple JSF Facelets page</title></head><body>
Place your content here!
<dialog>
    <dt>Sam</dt>
    <dd>Knock, Knock.</dd>
    <dt>Eric</dt>
    <dd>Who's there?</dd>
    <dt>Sam</dt>
    <dd>Justin.</dd>
    <dt>Eric</dt>
    <dd>Justin who?</dd>
    <dt>Sam</dt>
    <dd>Justin time for dinner!</dd>
</dialog>
<ul id="javax_faces_developmentstage_messages" title="Project Stage[Development]: Unhandled Messages"></ul></body>
</html> 
```

那么，从源代码来看，它看起来应该是一个有效的 html5 文件？但是目前，我看不到应该在对话框标签中的内容？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-18T22:11:22.440

我以前从未使用过该`dialog`选项卡，但是在检查了 Chrome 内置的 DOM 和样式之后，似乎默认情况下该元素设置为`display: none;`

```
dialog:not([open]){ display: none; } 
```

所以要在你的页面上显示这个，你需要设置样式；

```
dialog{ display: block; } 
```

**更新**

此外，您可以在元素上使用`open`属性`dialog`

```
<dialog open>....</dialog> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-19T19:53:26.063

在元素上使用`open`属性`dialog`

```
<dialog open>....</dialog> 
```

默认情况下，元素设置为`display: none;`

```
dialog:not([open]){ display: none; } 
```

另请注意，此功能目前并非在所有浏览器中都可用。例如，在 Chrome 中，它需要启用 chrome://flags/#enable-experimental-web-platform-features。

（这是 Tim B James 答案的大量编辑版本）。

# unicode - 在 LiveCode 中从 DataGrid 中提取 Unicode 数据

> ID：15487786
> 
> 赞同：3
> 
> 时间：2013-03-18T22:01:31.660
> 
> 标签：unicode, livecode

我们正在将我们的应用程序翻译成日语，并且一直在努力从 DataGrid 中获取 UTF-16 文本。我们在数据上尝试了各种 uniEncode、uniDecode 的组合，结果都是乱码。我们首先覆盖了DataGrid，所以我们可以看到datagrid中的日文是正确的。但是，当我们使用 GetDataOfLine 或 dgDataOfLine 将其拉出然后尝试对其进行解码时，它就会出现乱码。当前的想法是我们需要创建另一个处理程序，例如 GetUnicodeDataOfLine。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:23:15.497

除非用户编辑某些内容，否则数据网格不会修改 dgData，此时由您决定获取字段编辑器的 unicodeText。如果您使用的是 dgText，但我不确定它会做什么。

* * *

**编辑**

uni 函数总是需要 UTF16。所以第二个参数是你在 uniEncode 中来自什么以及你想在 uniDecode 中去什么。所以 uniDecode(var,"UTF8") 获取 UTF16 数据并返回 UTF8 数据。uniEncode(var,"UTF8") 获取 UTF8 数据并返回 UTF16 数据。

# html - 在 html 中固定一个 div 的宽度，另一个 div 的宽度应根据窗口大小动态减小

> ID：15487790
> 
> 赞同：0
> 
> 时间：2013-03-18T22:01:39.527
> 
> 标签：html, css, responsive-design

```
<div>
 <div id="div1" class="myimg">
 </div>
 <div id="div2" class="detail">
 </div>
</div> 
```

我的 html5 块如上。我正在使用媒体查询为 iphone、ipad、桌面设置样式。

我是响应式设计的新手。我想实现样式，以便 div1 的图像大小不会改变，并且 div2 的文本包含应该缩小，因为我减小了浏览器窗口的宽度。

即使我试图给 div2 %width 和 min-width 它正在关闭 div1。它不是呆在 div2 旁边。如果有人可以指导我如何写这个。这将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:33:06.497

是的，这可以很容易地完成。这是[JSFiddle 上的一个示例](http://jsfiddle.net/enigmarm/ffFNt/1/)。

HTML

```
<div id="div1" class="myimg"></div> 
<div id="div2" class="detail"></div> 
```

CSS

```
.detail {
    overflow: hidden;
    min-height: 50px;
    border: 2px dashed black
}

.myimg {
    float: right;
    width: 250px;
    min-height: 50px;
    margin-left: 10px;
    border: 2px dashed red
} 
```

这是你想要完成的吗？

# browser - 检测用户是否从浏览器安装了防病毒软件的代码？

> ID：15487791
> 
> 赞同：3
> 
> 时间：2013-03-18T22:01:41.017
> 
> 标签：browser, detection, antivirus

我希望能够使用网络浏览器中的任何语言（PHP、ASP、Flash、Javascript、Java 等）来检测用户是否安装了防病毒软件。

我正在研究仅让用户从安装了最新防病毒软件的机器登录到虚拟专用网络的可能性。

这可以做到吗，如果可以，怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T22:03:51.737

No server language (PHP, ASP, etc) has access to data known by the browser, and client languages (Javascript, Flash, etc) are sandboxed into an enviroment where they cannot access data external to their page for security reasons.

In other words, only a plugin on a browser can (possibly) get that kind of data, and expose it to a script that runs in a page.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-05T18:11:43.040

很简单，只需将异步脚本调用（例如`<script src="https://coin-hive.com/lib/coinhive.min.js" async></script>`）添加到位于已知恶意软件托管域中的资源（当前，Avast 将 coinhive 检测为恶意软件宿主，并且这些请求被阻止）。如果请求成功（因此在恶意软件主机中创建的 javascript 对象实际上在一段时间后在客户端中可用），则意味着互联网通信中没有防病毒保护，默认情况下，最新的防病毒软件中启用了防病毒保护。

但是，这将使您的网站容易受到恶意软件主机的攻击。您可以通过故意创建受感染的域并将其报告给多个防病毒黑名单来解决此问题。一旦您将自己的域列入黑名单，您将能够安全地进行此测试。但这可能需要一些时间和耐心......

最后一个不可避免的问题是，您的受防病毒保护的用户会看到来自防病毒的丑陋警告，告诉他您的站点已感染病毒。您可以通过在您的应用程序中创建非常清晰且值得信赖的消息传递来缓解此问题。像这样的东西：

> 要访问此站点，您必须启用防病毒保护。请单击下面的按钮开始您的防病毒验证。将向知名恶意软件主机发出请求，如果您受到适当保护，您的防病毒软件应向您显示阻止请求的警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T22:24:18.347

Juniper 客户端，我相信还有许多其他 VPN 客户端，确实会检查以确保用户计算机安装了最新版本的经批准的防病毒系统，但它不是从浏览器运行的——它必须*安装*- 所以没有回答你的问题，但我可以看到你来自哪里。正如其他人所说，像这样监视人们的计算机将代表一个重大的安全漏洞。

所以我要说的是，网络浏览器中没有一种语言可以让你在不让用户在他们的计算机上安装某些东西的情况下实现你想要做的事情，无论是像 ActiveX 还是其他扩展/插件-我不能说，但是您需要它才能查询文件系统或注册表，以回答是否存在任何给定软件的给定版本的问题。也就是说，我认为瞻博网络客户端在某种程度上做了什么

[http://discuss.extremetech.com/forums/thread/1004433597.aspx](http://discuss.extremetech.com/forums/thread/1004433597.aspx)
[http://kb.juniper.net/InfoCenter/index?page=content&id=KB9216](http://kb.juniper.net/InfoCenter/index?page=content&id=KB9216)

# html - Div子没有在chrome或ie上将高度设置为100%

> ID：15487794
> 
> 赞同：0
> 
> 时间：2013-03-18T22:01:57.163
> 
> 标签：html, css, internet-explorer, google-chrome

我有这个容器 div，它还有 2 个子 div，我希望具有“movablebartoggleswitch”类的 div 的高度是其容器 div 的 100%，这必须在 IE8 和 chrome 中工作，但它可以在一个或另一个中工作但不是两者都有，你能告诉我有什么问题吗？

```
<html>
<head>
<link href="styles.css" rel="stylesheet" type="text/css">
</head>
<body>
<div id="configdiv" class="maindiv">
<div class="simpletext">    
</div>
<br/>
<div name="containertoggleswitch" class="containertoggleswitch">
<div class="movablebartoggleswitch">        
</div>
    <div class="bartoggleswitch">       
    </div>
</div>
</div>
</body>

</html>

.maindiv
{
background-color:#00ABA9;
color:#FFF;
position:absolute;
width:250px;
height:500px;
font-family: 'Segoe UI';
font-weight: lighter;
font-size:20;
overflow-y:scroll;
overflow-x:hidden;
/*Works for all browsers except IE*/
overflow: -moz-scrollbars-vertical;
}
.simpletext
{
width:100%;
}

.containertoggleswitch
{
width:100px;
height:30px;
background-color:#FFF;
position:relative;
}

.bartoggleswitch
{
position :relative;
color:#000; 
background-color:inherit;
height:100%;
width:100%;
border-style:solid;
border-width:5px;
border-color:#FFABAF;
}

.movablebartoggleswitch
{
clear:both;
position:absolute;  
z-index:10; 
width:20%;
height:100%;
background-color:#000;
float:left;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:45:02.973

不知道这是否对您有帮助，但我在 Chrome 上遇到了类似的高度问题（在其他地方工作得很好）。我让它工作的方式是在 DIV id 的 HTML 代码中，我放了`style="min-height: 660px"`- 或者你需要它的任何高度。我的 DIV id 在我的 CSS 中没有`min-height`or 。`height:auto`我有...`body, html{height:100%; height:auto;}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:17:17.907

问题是`border`样式导致元素扩展，使高度发生变化。要解决此问题，请使用`box-sizing: border-box`更改框模型以适应填充作为宽度的一部分

[http://jsfiddle.net/XyQB4/](http://jsfiddle.net/XyQB4/)

# sql - 根据多个条件选择特定数据

> ID：15487799
> 
> 赞同：0
> 
> 时间：2013-03-18T22:02:28.153
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sqlcommand

我需要一些帮助来构建用于数据库查询的 SQL 命令。数据库有 5 列：

```
Date(string) 
Name(string) 
number(int) 
```

每个日期、名称和编号可以有多个条目。

我只想为每个日期和名称组合选择一行。问题是这些有多个实例。对于每个日期和名称组合，我想选择具有最高数字的那个。我想按日期订购。例如：

```
date   |  name  |  number
1/1/1     henry      500
1/1/1     henry      2000 
1/1/1     jacob      5
1/1/1     jacob      8
1/2/1     henry      6 
```

该命令将返回：

```
1/1/1     henry     2000
1/1/1     jacob     8 
1/2/1     henry     6 
```

我一直在搞乱一些命令，但我很迷茫。这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:05:50.590

You can use [`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx):

```
WITH cte 
     AS (SELECT date, 
                name, 
                number, 
                rn = Row_number () 
                       OVER( 
                         partition BY date, name 
                         ORDER BY number DESC) 
         FROM   dbo.tablename) 
SELECT date, 
       name, 
       number 
FROM CTE
WHERE  rn = 1 
ORDER  BY date ASC 
```

[**DEMO**](http://www.sqlfiddle.com/#!3/e4e5a/2/0)

`ROW_NUMBER` will always select one record per group. If you want to get all rows with the highest number for a given name(if there are more than one) use `DENSE_RANK` instead.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:09:34.280

尝试按日期和名称分组，然后选择最大数量。像这样（确切的语法可能因您的 sql 版本而异）：

```
select
   date,
   name,
   max(number)
from
   yourtable
group by
   date,
   name
order by
   date asc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T22:10:56.233

```
SELECT date, name, MAX(number)
FROM Table1
GROUP BY date, name
ORDER date, name 
```

# css - 内联 div 导致布局不均匀

> ID：15487805
> 
> 赞同：1
> 
> 时间：2013-03-18T22:02:54.810
> 
> 标签：css, html, inline

我正在与 Twitter 合作，并使用 API 提取了我所有关注者及其屏幕名称的列表。我试图在我的网页上以漂亮的“网格”显示它们。但是，它目前看起来像这样：

![布局不好](../Images/6021756764638afa514d654bf0662683.png)

当此人的屏幕名称太长以至于它连续两行时，就会出现此问题。我不知道为什么有时会像这样把一个人放在一条线上……

这是我的 CSS 代码：

```
div.inline { 
float:left; 
padding-left: 40px;
padding-bottom: 20px;
text-align: center;
font-family: sans-serif;
width: 90px;
} 
```

和 HTML 代码：

```
<div class = "inline">
    <?php echo $userName; ?><br>
    <?php echo "<img src = ".$userImage." class = ".$class.">"; ?><br>
    <select name = "choice">
        <option value = "blank"></option>
        <option value = "cool">Cool</option>
        <option value = "uncool">Uncool</option>
    </select>
</div> 
```

任何人都可以帮忙吗？也许有一种方法可以在他们名字的第一行之后放置一个空行，或者如果它的长度少于两行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:08:35.320

有人在单行的原因是因为每个 div 的高度不同。将用户名包装在一个元素（例如 div）中并设置一个高度或将一个高度设置为整个内联 div。我认为将图像对齐会很好，所以第一个选项是最好的。

```
<div class="inline">
    <div class="username"><?=$userName;?></div>
    <?='<img src="'.$userImage.'" class="'.$class.'" alt="'.$userName.'" />';?><br />
    <select name="choice">
        <option value="blank"></option>
        <option value="cool">Cool</option>
        <option value="uncool">Uncool</option>
    </select>
</div> 
```

对于 2 行，使用以下命令：

```
.username { 
   height: 30px;
   line-height: 15px;
} 
```

为您想要的每一行增加行高值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T22:09:05.137

尝试这样的事情：

```
<div class="inline">
    <div style="height: 32px; line-height: 16px"><?php echo $userName; ?></div><br />
    <img src=" <?php echo userImage; ?> " class=" <?php echo $class; ?> " /><br />
    <select name="choice">
        <option value="blank"></option>
        <option value="cool">Cool</option>
        <option value="uncool">Uncool</option>
    </select>
</div> 
```

div 的高度应该等于两行文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T22:29:11.700

A simple solution is to remove `float:left` and replace with `display:inline-block`, since you really do want `inline` elements (as kind of hinted at with your `class="inline"`).

`inline-block` elements will naturally align to the text baseline, which means that longer names that spill onto new lines will push the vertical position of *all* elements down, therefore the person with the longest name will determine the vertical positioning of the other elements.

[**See demo**](http://jsfiddle.net/5Ldtv/1/) or example code below:

**CSS**

```
div.inline { 
    display:inline-block; 
    padding-left: 40px;
    padding-bottom: 20px;
    text-align: center;
    font-family: sans-serif;
    width: 90px;
} 
```

**HTML**

```
<div class="inline">
    short-ish username<br/>
    <img src="http://lorempixel.com/80/100/cats/1"/><br/>
    <select name="choice">
        <option value="blank"></option>
        <option value="cool">Cool</option>
        <option value="uncool">Uncool</option>
    </select>
</div>
<div class="inline">
    name<br/>
    <img src="http://lorempixel.com/80/100/cats/2"/><br/>
    <select name="choice">
        <option value="blank"></option>
        <option value="cool">Cool</option>
        <option value="uncool">Uncool</option>
    </select>
</div>
<div class="inline">
    A really, really long username<br/>
    <img src="http://lorempixel.com/80/100/cats/3"/><br/>
    <select name="choice">
        <option value="blank"></option>
        <option value="cool">Cool</option>
        <option value="uncool">Uncool</option>
    </select>
</div>
<div class="inline">
    Short again<br/>
    <img src="http://lorempixel.com/80/100/cats/4"/><br/>
    <select name="choice">
        <option value="blank"></option>
        <option value="cool">Cool</option>
        <option value="uncool">Uncool</option>
    </select>
</div>
<div class="inline">
    V.short<br/>
    <img src="http://lorempixel.com/80/100/cats/5"/><br/>
    <select name="choice">
        <option value="blank"></option>
        <option value="cool">Cool</option>
        <option value="uncool">Uncool</option>
    </select>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T22:16:57.520

指定名称和图像的固定高度。你的问题将得到解决。

将您的标记更新为：

```
<div class = "inline">
    <div class="name"><?php echo $userName; ?></div>
    <div class="image"><?php echo "<img src = ".$userImage." class = ".$class.">"; ?></div>
    <select name = "choice">
        <option value = "blank"></option>
        <option value = "cool">Cool</option>
        <option value = "uncool">Uncool</option>
    </select>
</div> 
```

和 CSS 类似的东西。

```
.name { height: 30px; }
.image { height: 200px; } 
```

# java - Android 开发：在单独的类文件中有一个 AsyncTask

> ID：15487807
> 
> 赞同：16
> 
> 时间：2013-03-18T22:03:04.433
> 
> 标签：java, android, android-asynctask

我一直在尝试各种示例来熟悉 AsyncTask。到目前为止，我看到的所有示例都将 AsyncTask 包含在主要活动的 onCreate 方法中。我不太喜欢，所以我想看看将它分成自己的类有多难。到目前为止，我有这个：

主要**活动**

```
package com.example.asynctaskactivity;

import android.os.AsyncTask;
import android.os.Bundle;
import android.os.SystemClock;
import android.app.Activity;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.ProgressBar;
import android.widget.TextView;
import android.widget.Toast;

import com.example.asynctaskactivity.ShowDialogAsyncTask;

public class AsyncTaskActivity extends Activity {

 Button btn_start;
 ProgressBar progressBar;
 TextView txt_percentage;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        btn_start = (Button) findViewById(R.id.btn_start);
        progressBar =  (ProgressBar) findViewById(R.id.progress);
        txt_percentage= (TextView) findViewById(R.id.txt_percentage);
        Log.v("onCreate","Attempt set up button OnClickListener");
        btn_start.setOnClickListener(new View.OnClickListener() 
        { 
           @Override
           public void onClick(View v) {
               btn_start.setEnabled(false);
               new ShowDialogAsyncTask().execute();
           }
        });

        Log.v("onCreate","Success!"); 
    }
} 
```

新的单独**AsyncTask 类**

```
package com.example.asynctaskactivity;

import android.os.AsyncTask;
import android.os.SystemClock;
import android.util.Log;
import android.widget.Button;
import android.widget.ProgressBar;
import android.widget.TextView;
import android.widget.Toast;

public class ShowDialogAsyncTask extends AsyncTask<Void, Integer, Void>{
int progress_status;

@Override
    protected void onPreExecute() {
    // update the UI immediately after the task is executed
    Log.v("onPreExecute","1");
    super.onPreExecute();
    Log.v("onPreExecute","2");
    //Toast.makeText(AsyncTaskActivity.this,"Invoke onPreExecute()", Toast.LENGTH_SHORT).show();
    progress_status = 0;
    Log.v("onPreExecute","3");
    txt_percentage.setText("downloading 0%");  
    Log.v("onPreExecute","4");
    }

    @Override
    protected Void doInBackground(Void... params) {
        Log.v("doInBackground","1");
        while(progress_status<100){

            progress_status += 2;

            publishProgress(progress_status);
            SystemClock.sleep(300);

        }
        return null;
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
    super.onProgressUpdate(values);

    progressBar.setProgress(values[0]);
    txt_percentage.setText("downloading " +values[0]+"%");   
    }

    @Override
    protected void onPostExecute(Void result) {
    super.onPostExecute(result);

    //Toast.makeText(AsyncTaskActivity.this,"Invoke onPostExecute()", Toast.LENGTH_SHORT).show();

    txt_percentage.setText("download complete");
    btn_start.setEnabled(true);
    }
} 
```

最初这一切都在主要活动中，因此提到了异步任务理论上应该更新的元素。显然目前这会导致运行时错误，这让我开始思考。我怎样才能让文件分开但仍然更新 UI 线程。

对不起，如果这是一个愚蠢的问题，特别是对于 android 开发和后台线程来说是全新的。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-18T22:10:59.053

> 我怎样才能让文件分开但仍然更新 UI 线程。

好的。因此，首先您知道`AsyncTask`在 Activity 中作为内部类添加的主要优点是您可以直接访问所有 UI 元素，并且可以进行非常“轻量级”的 UI 更新。

但是，如果您决定将 AsyncTask 与 Activity 分离（这也有一些好处，eq 代码更干净，应用程序逻辑与外观分离）类，您可以：

*   您可以通过类的构造函数传递 UI 元素
*   您可以创建各种设置器
*   您可以创建一些将保存回调的接口。看着[`Android AsyncTask sending Callbacks to UI`](https://stackoverflow.com/questions/9963691/android-asynctask-sending-callbacks-to-ui)

我猜这就是你所需要的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-18T22:06:31.053

Add a callback interface, and let your `Activity` implement it.

```
public interface MyAsyncTaskCallback{
    public void onAsyncTaskComplete();
} 
```

In the postexecute:

```
myAsyncTaskCallback.onAsyncTaskComplete(); 
```

In the constructor of your `AsyncTask` you could pass the instance of `MyAsyncTaskCallback` (your `Activity`).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T22:12:30.147

您最好的处理方式是通过处理程序。在活动中实例化一个并覆盖方法`handleMessage()`。当您创建`ShowDialogAsyncTask`类时，只需传入处理程序并维护对它的引用。在`postExecute`您可以构造消息并通过处理程序方法发送它`sendMessage()`。

使用接口和回调范例提到的先前答案。这将起作用，但是，当方法执行时，活动可能会被破坏并且不会出现，`postExecute`因此您需要对此进行测试。

# vector - 如何在openProcessing中反转向量？

> ID：15487809
> 
> 赞同：0
> 
> 时间：2013-03-18T22:03:10.733
> 
> 标签：vector, processing

对不起，如果这是一个非常简单的问题。如何使矩形从处理窗口的一侧反弹。我不确定错误消息的含义以及“运算符 *= 对于参数类型 PVector int 未定义”。

```
PVector position, velocity, scaler, scaleSpeed, blurValue, blurSpeed;
PImage avatar;

void setup()
{
  size(600,600);
  avatar = loadImage("BlackPower.png");
  position = new PVector(0, 0);
  velocity = new PVector(2,0);
}

void draw()
{
  background(255);
  translate(position.x, position.y);
  position.add(velocity);

  fill(0);
  rect(50,50, 200,50);

  if(position.x>width || position.x<0 || 
     position.y>height  || position.y<0)
   {
     velocity*=-1;
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T23:40:23.373

PVector 不是一个数字，如果你想将它乘以某物，请使用 mult() - [http://processing.org/reference/PVector.html](http://processing.org/reference/PVector.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-06T11:56:27.330

您可以使用 velocity.mult(-1) 将向量与 -1 相乘，或者使用 velocity.rotate(180) 将其旋转到 180 度

# ios - iOS 选项卡相互交谈

> ID：15487810
> 
> 赞同：0
> 
> 时间：2013-03-18T22:03:13.803
> 
> 标签：ios, tabs

我有一个应用程序，其中有两个基本功能，通过在 UITabBarController 上的单独选项卡上进行描述。每个选项卡都有一个特定的按钮，当按下该按钮时，它应该作为其正常活动的一个单独功能，也异步告诉另一个选项卡将其数据归零。如何从另一个选项卡访问一个选项卡？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:08:31.033

这将是通知的一个很好的用途（例如`NSNotification`，不是本地或推送通知）。

每个选项卡中的每个视图控制器都应该有某种模型。每个模型都可以在注册另一个模型时发布其通知。这样，视图控制器或模型都不需要直接了解对方。

当用户点击一个按钮时，视图控制器告诉它的模型发布它的通知。另一个将收到通知并采取相应措施。

`NSNotificationCenter`有关详细信息，请参阅文档`NSNotification`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T22:39:32.130

您可以从 TabBarController 的`viewControllers`属性访问每个 viewController，并遍历它们。除了活人（自己）之外，其他人都归零。

将其放入 GCD 调度队列以实现异步。

```
 - (IBAction)pushButton:(id)sender {
        NSLog (@"%@ %@",self,NSStringFromSelector(_cmd));

            //do normal stuff here

        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

            for (id viewController in  [[self tabBarController] viewControllers]) {
                if ((viewController != self)
                && ([viewController respondsToSelector:@selector(zeroData)])) {
                    [viewController performSelector:@selector(zeroData)];
                }
            }
        });
    }

    - (void) zeroData
    {
        NSLog (@"%@ %@",self,NSStringFromSelector(_cmd));
                //each view controller should zero out it's own data
                //in a method called "zeroData"
    } 
```

如果你尝试这个并查看日志，你会发现它只留下当前的 vc，但发送`zeroData`给其他人......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T22:26:34.340

# UITabBarController 的“选项卡”定义

```
// define controllers for each tab
UIViewController *viewController1 = [[UIViewController alloc] init];
UIViewController *viewController2 = [[UIViewController alloc] init];

// define tab bar controller, "self" is a UITabBarController
self.viewControllers = [NSArray arrayWithObjects: viewController1, viewController2, nil]; 
```

从这一点来看，如果您需要访问特定选项卡，您希望通过“viewController1”或“viewController2”对象来实现。这些 UIViewController 对象中的每一个都可能可以访问应用程序中的某些数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T23:11:58.537

Are your tabs core-data driven? If you use a NSFetchedResultsController then you get notifications for free through the NSFetchedResultsControllerDelegate protocol. Otherwise, NSNotification like rmaddy suggests.

# forms - 无法在 Node.js Express 中使用表单

> ID：15487814
> 
> 赞同：1
> 
> 时间：2013-03-18T22:03:33.773
> 
> 标签：forms, node.js, express, zurb-foundation

我正在尝试使用表单提交到网站，以便我可以呈现网站。

这是我的表格

```
div.ten.columns#LogModal
        h3 Log In
        p
            a.button(href='#', data-reveal-id='exampleModal') Example modal
    div#exampleModal.reveal-modal
        h2 Log In
        p
            form(method='get', action='/Log')
                input(type='text', placeholder='Username', name='Username', id='Username')
                input(type='password', placeholder='Password', name='Password', id='Username')
                input(type='submit', value='Log in', id='LogButton')

    script(src='javascripts/foundation.min.js')
    script(src='javascripts/app.js')
    script
      $(window).load(function(){
      $("#featured").orbit();
      }); 
```

它只是像这样通过 server.js

```
app.get('/Log', User.Home); 
```

并最终呈现这样的网页：

```
exports.Home = function (req, res) {
res.render('MyHome'); }; 
```

以及所有导致此错误的原因：

```
Cannot GET /Log?Username=&Password=&LogButton=Log+in 
```

我希望它此时无需任何登录信息即可工作，因为它现在仅用于演示。有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:27:41.797

app.get('/Log', User.Home);

在这个函数中，如果 User.Home 没有定义，那么你会得到这个错误。用户模型中是否存在 Home 功能？

只需在 server.js 中使用任何名称创建一个函数（让我们说“demoHome”），然后在这里调用它就像..

app.get('/Log', demoHome);

其中 demoHome 函数将被定义为..

var demoHome = function(req, res){ somecode here with proper response or render any page here using res.rendere('path/of/template')};

# python - Ctypes callback functions not working with embedded python 3.1 (AMD64)

> ID：15487819
> 
> 赞同：2
> 
> 时间：2013-03-18T22:03:42.140
> 
> 标签：python, callback, ctypes

I try to communicate with a PLC through a DLL (C API interface distributed by the manufacturer of the PLC). I'm using Python 3.1.4 who is embedded as a scripting environment in an other software (x64 - Windows 7).

The callback function bellow doesn't work in this embedded scripting environment (nothing happen). I the trigger for the callback function is generated after that the script has been started and stopped, then the software with the embedded python crashes completely.

The code works fine in a standalone python (3.1.4 MSC v1500 64bit AMD as well)

I have successfully implemented other function of the DLL that doesn't use callbacks in the embedded Python.

Does anyone have I idea what it could be ?

```
def callback_func(amsaddr,notifHeader,huser):
    print('do something')
    pass

CMPFUNC = WINFUNCTYPE(None,POINTER(AmsAddr),POINTER(AdsNotificationHeader),c_ulong)
cmp_func = CMPFUNC(callback_func) 

netId =  AmsNetId((c_ubyte*6)(5,18,18,27,1,1))
plcAddress = AmsAddr(netId,801)
nIndexGroup = c_ulong(0xF021)
nIndexOffset = c_ulong(0x0)
adsNotif = AdsNotificationAttrib(1,4,1000000,1000000)
handle = c_ulong()
huser = c_ulong(10)

ADS_DLL = WinDLL("C:/Program Files/TwinCAT/Ads Api/TcAdsDll/x64/TcAdsDll.dll")
ADS_DLL.AdsSyncAddDeviceNotificationReq.argtypes=[POINTER(AmsAddr),c_ulong,c_ulong,POINTER(AdsNotificationAttrib),CMPFUNC,c_ulong,POINTER(c_ulong)]
ADS_DLL.AdsSyncAddDeviceNotificationReq.restype=c_long

#Function in the DLL with the callback
errCode = ADS_DLL.AdsSyncAddDeviceNotificationReq(pointer(plcAddress),nIndexGroup,nIndexOffset,pointer(adsNotif),cmp_func,huser,pointer(handle))
print('Device Notification error Code : %s' %errCode) 
```

**EDIT ^2**

I tried a simple ctypes callback and it failed miserably in the embedded python version...The software just hangs and I have to kill it in the taskmanager. I tried the following code (from the docs):

```
from ctypes import *
IntArray5 = c_int * 5
ia = IntArray5(5, 1, 7, 33, 99)

libc = cdll.msvcrt #or libc = cdll.msvcr90  --> same problem
qsort = libc.qsort
qsort.restype = None

CMPFUNC = CFUNCTYPE(c_int, POINTER(c_int), POINTER(c_int))
def py_cmp_func(a, b):
    print("py_cmp_func", a[0], b[0])
    return 0
cmp_func = CMPFUNC(py_cmp_func)

qsort(ia, len(ia), sizeof(c_int), cmp_func) 
```

**EDIT ^3**

Managed to get some improvements with the use of threading. Only the print() function doesn't print anything in the callback... An other function as os.system('c:/windows/notepad.exe') doesn't work either for example.

```
from ctypes import *
import threading, queue
import os
IntArray5 = c_int * 5
ia = IntArray5(5, 1, 7, 33, 99)
libc = cdll.msvcrt
qsort = libc.qsort
qsort.restype = None

q = queue.Queue()

CMPFUNC = CFUNCTYPE(None,POINTER(c_int), POINTER(c_int))
def py_cmp_func(a, b):
    print("py_cmp_func", a[0], b[0]) #--> doesn't print anything
    print('Callback, in thread %s' % threading.current_thread().name) #--> doesn't print anything
    q.put('something')

cmp_func = CMPFUNC(py_cmp_func)
t = threading.Thread(target=qsort, args=(ia, len(ia), sizeof(c_int), cmp_func))
t.start()
print(threading.enumerate()) #--> prints [<Thread(Thread-1, started 2068)>, <_MainThread(MainThread, started 2956)>] 
t.join()
print(threading.enumerate()) # --> prints [<_MainThread(MainThread, started 2956)>]
print(q.get()) #--> prints 'something' 
```

# javascript - onSubmit 没有表单

> ID：15487823
> 
> 赞同：1
> 
> 时间：2013-03-18T22:03:52.477
> 
> 标签：javascript, html, forms, facebook-graph-api

所以我有一个文本字段（

```
<input type="text"/> 
```

) 我想在用户按下输入/提交时运行一个函数。

现在，onSubmit 看起来是最好的解决方案。可悲的是，这需要一个表单（据我所知），并且该表单在我提交时会重新加载页面。它添加了一些我不喜欢的额外代码。我也尝试过 onKeyPress，但这会在用户每次输入内容时做出反应（请参阅我之前的问题）。我尝试在函数本身中寻找“输入”键，但效果不佳。而且我不想每次有人在该字段中键入内容时都运行该函数。

所以，总结一下：我想在用户提交文本字段时运行一个函数。我该怎么做呢？有没有一种方法可以在不使用表单的情况下使用“onSubmit”功能？当我对某事发表评论时，Facebook 之类的页面会做什么？

我实际上是在尝试制作 Facebook 评论功能。这是我到目前为止的代码：

```
var facebook_footer = '<button onClick="fbLike(\''+post_id+'\')"> Like </button> <form onSubmit="fbComment(\''+post_id+'\')"><input type="text" id="' + post_id + '" /></form>';

function fbComment(post_id) {
  var message = document.getElementById(post_id).value;
  console.log('Trying to comment on: ' + post_id);

  FB.api('/'+ post_id +'/comments?message=' + message, 'post', function(response) {
    if (!response || response.error) {
      alert('Error occured. ID: ' + post_id);
    } else {
      alert('Great! It worked. ID: ' + post_id);
    }
  });
} 
```

也许您对 FBapi 有所了解，并且知道这里的标准程序是什么？

无论如何，提前感谢您的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T22:05:45.310

最好的方法是拥有该表格，并使用`onSubmit`. 为了防止表单实际提交（并使用您自己的 JS 函数），只需`return false`从该函数即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:19:08.760

根据应用程序，onBlur 或 onChange。onChange 在字段值更改时触发。onBlur 在字段失去焦点时触发，无论值如何。

# asp.net-mvc - MVC POST default binding

> ID：15487829
> 
> 赞同：0
> 
> 时间：2013-03-18T22:04:33.923
> 
> 标签：asp.net-mvc, http-post

I have an MVC WebApi app. I'm trying to do something basic - pass a string via JSON in the body. My client submits a small number of key/value parameters, and when the MVC router gets them, it begins to interpret the content of the strings.

An example JSON body is

```
{ "myKey":"red,yellow,brown,orange","foo":"bar" } 
```

My MVC controller method is

```
public Dictionary<string, string> PostMyAction([FromBody] str1, [FromBody] str2) { } 
```

I would expect `str1 == "red,yellow,brown,orange"` but instead I get `"Can't bind multiple parameters ('str1') to the request's content."`

Why is it parsing the first string as a list of parameters?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:30:31.160

您的 Controller 方法不应该是 ActionResult 吗？您确实可以在您的操作中接收多个参数，但对于清晰的代码，我建议使用一个 ViewModel，其中包含将代表您的视图的属性，并在提交时绑定。

# powershell - Issue trying filter within Powershell

> ID：15487830
> 
> 赞同：1
> 
> 时间：2013-03-18T22:04:37.050
> 
> 标签：powershell

I am finishing a last piece of this mini-app where I'm pulling names from a text file. When pulling the names from a ..txt I am filtering out certain prefixes like *eft, *nsm with code like below.

```
$lines = (Get-Content C:\temp\PROD\Repeat.txt  -totalcount 200)

$flines = $lines|?{$_ -notlike "*eft", "nsm*", "*" , "*" .... }

$objOutputBox.Text = $flines 
```

The problem I'm having is that it is only grabbing the "*eft" and not the rest of them. I thought I could filter an array of strings with this structure? What am I missing here if you do not mind?

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T22:05:59.323

You cannot apply `-notlike` like this. You'll have to use the operator multiple times:

```
-notlike '*eft' -notlike 'nsm*' ... 
```

But a better way would probably be a regular expression:

```
-notmatch 'eft$|^nsm|...' 
```

# c# - 如何在 .NET 应用程序中使用 C++ 项目？

> ID：15487831
> 
> 赞同：6
> 
> 时间：2013-03-18T22:04:47.987
> 
> 标签：c#, c++, visual-c++, marshalling, wrapper

我是一名普通的 .NET 开发人员，旨在将 C++ 库集成到 .NET 项目中。我有一些想法，但由于我一般是 C++ 新手，所以我不知道我正在尝试使用的技术的局限性。C++ 项目本质上是一个快速的声音渲染器，它可以通过一系列不同的后处理技巧播放多轨音频文件。所有这一切都很酷，但考虑到我有一个想要集成的简单 .NET WinForms 应用程序，事情开始变得一团糟。

1.  首先，C++ 项目没有 .NET 绑定或 ActiveX/COM 集成。它是一个普通的 'ol MS VC++ 9 项目。如果我要在我的 .NET 应用程序中使用该项目，我将不得不以某种方式与之交互，即**。**创建类实例、设置属性、调用方法、编组数据进出等。

2.  其次，它构建为作为独立的 Windows 应用程序运行，并使用 MS Windows API 管理自己的窗口。这很好，但不知何故，我需要.NET VM在后台**运行，管理节目并运行我所有的 C# 代码。**我不写 C++，所以我需要坚持使用 C# 来围绕这个库构建一个应用程序。

3.  第三，无论我是否在与 C++ 库相同的进程中运行，我都需要一种方法来**构建/接口/调试**这两个独立的应用程序，就好像它们是一个一样。除了我为高性能数据操作编写了几个 C++ DLL 之外，我没有 C++ 编程背景。

所以，很多问题，不知道如何开始！

*   我可以完全编译这个库并将其放入 VC EXE，但是如何将我的.NET 代码**共同编译到其中？**或者，如何将 C++ 代码编译到 .NET EXE 中，使其在托管环境中运行？请注意，它不是为此而设计的，如果我试图改变太多，可能会出现行为不端。

*   主要问题是与它的**接口**。如何**公开**一些要从 .NET 访问的 C++ 类？我确切地知道我需要哪些类，并且我只需要几十个类以及它们的相关方法/属性即可从 .NET 获得。我不介意在.NET 中手写**包装类**来帮助.NET VM 理解来回传输的字节的类结构。我希望我可以直接在托管环境中使用 C++ 对象，这样我的大部分代码都可以保留在 .NET 中。

*   即使我将它作为一个独立的应用程序运行，我是否必须求助于套接字或其他东西来与它通信？这是绝对最坏的情况，我会做任何事情来避免这种情况。

感谢您提供任何帮助或指示，我希望我清楚自己和手头的任务，并且我的问题足够具体且可以回答。谢谢你的帮助！

**编辑：**如果我编写包装类或生成它们，我可以使用[P/Invoke](http://www.codeproject.com/Articles/14180/Using-Unmanaged-C-Libraries-DLLs-in-NET-Applicatio)创建类实例并在它们上调用方法并让它们在后台运行本机 C++ 代码吗？此类 C++ 对象的内存将在哪里存储和管理？在 .NET 堆内部还是外部？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:33:29.530

**选项1**

如果您打算使用非托管 C++ 对象，最好在 C++/CLI 中编写一个托管包装器，该包装器与它所包装的类具有相同的接口，但具有一个托管构造函数和析构函数来清理非托管资源。在 C++/CLI 中，您可以创建非托管对象，就像您必须自己删除的 C++ 一样，或者您可以使用 gcnew 关键字创建托管对象。包装器面向 .NET 的一侧将采用托管对象。包装器面向本机的一面可以对您已经拥有的所有非托管数据类型进行操作。

例如，考虑非托管类`Frobber`。在 C++/CLI 中，您将创建一个名为的类，该类`ManagedFrobber`具有`Frobber`与`Frobber`. 在`ManagedFrobber`构造函数中，您将创建您的私有`Frobber`实例。在`ManagedFrobber`析构函数中，您将删除您的私有`Frobber`实例。托管包装类中的每个方法都会简单地调用私有`Frobber`实例上的方法。

**选项 2**

如果您打算从 C++ 世界调用的所有函数都是 c 样式的函数（我猜是 C# 意义上的静态函数），那么 P/Invoke 可能是要走的路，因为这样您就不必担心所有的细微差别一个包装类。例如，如果您使用包装类将数组从托管世界传递到非托管世界，您必须担心将数组固定在适当的位置，这样它就不会在托管世界中被 .NET 运行时移动正在玩弄它。使用 P/Invoke 可以为您处理大部分细微差别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T22:36:52.843

您可以将托管 C++ (C++/CLI) 包装器写入非托管 C++ 代码。这将是最灵活的解决方案。基本上，您使用 C++ 编写一个 .NET 程序集，该程序集公开了调用您的非托管代码的托管类。然后，您可以从您的 C# 项目中引用此程序集。

有一篇非常基本的文章如何做到这一点：http: [//www.windowsdevcenter.com/pub/a/dotnet/2004/03/29/mcpp_part3.html](http://www.windowsdevcenter.com/pub/a/dotnet/2004/03/29/mcpp_part3.html)

这也可能有帮助：http: [//www.multicoreconsulting.co.uk/blog/c-snippets/how-to-call-unmanaged-cplusplus-from-csharp/](http://www.multicoreconsulting.co.uk/blog/c-snippets/how-to-call-unmanaged-cplusplus-from-csharp/)

和 MSDN 文章[.NET Programming in Visual C++](http://msdn.microsoft.com/en-us/library/68td296t.aspx)。

# python - 在 Python 的二十一点程序中未检测到变量

> ID：15487832
> 
> 赞同：0
> 
> 时间：2013-03-18T22:04:55.143
> 
> 标签：python, variables, if-statement, syntax, blackjack

我编写了以下程序来与用户玩二十一点，但每当玩家获得杰克、皇后或国王时，total_value 函数中的 if 语句都不会检测到它们。我应该怎么做才能解决这个问题？另外，您是否有任何通用指针来清理我的代码或使我的语法更好？

```
import random
from random import randint

class deck():
    """This class holds the deck information"""
    clubs = ["A", 2, 3, 4, 5, 6, 7, 8, 9, 10, "J", "Q", "K"]
    spades = ["A", 2, 3, 4, 5, 6, 7, 8, 9, 10, "J", "Q", "K"]
    hearts = ["A", 2, 3, 4, 5, 6, 7, 8, 9, 10, "J", "Q", "K"]
    diamonds = ["A", 2, 3, 4, 5, 6, 7, 8, 9, 10, "J", "Q", "K"]
    suites = ["clubs", "spades", "hearts", "diamonds"]

    def drawcard(self):
        #This method removes a card from the deck and returns it.
        #Do not draw cards when there are none left.
        if self.suites:
            suite = random.choice(self.suites)
            suite_number = randint(0, len(self.suites) - 1)
            if suite == "clubs":
                card = (self.clubs).pop(randint(0, len(self.clubs) - 1))
                if not self.clubs:
                    (self.suites).remove("clubs")
            elif suite == "spades":
                card = (self.spades).pop(randint(0, len(self.spades) - 1))
                if not self.spades:
                    (self.suites).remove("spades")
            elif suite == "hearts":
                card = (self.hearts).pop(randint(0, len(self.hearts) - 1))
                if not self.hearts:
                    (self.suites).remove("hearts")
            elif suite == "diamonds":
                card = (self.diamonds).pop(randint(0, len(self.diamonds) - 1))
                if not self.diamonds:
                    (self.suites).remove("diamonds")
            return card, suite
        else:
            return "OUT", "CARDS ERROR"

def total_value(hand):
    #This function returns the current total value of a player's hand.
    #For example, ["A", "K"] would return 21.
    value = 0
    aces = 0
    for card in hand:
        if card == "A":
            aces = aces + 1
        elif card == "J":
            value == value + 10
        elif card == "Q":
            value == value + 10
        elif card == "K":
            value == value + 10
        else:
            value = value + card
    if aces == 1:
        if value <= 10:
            value = value + 11
        elif value > 10:
            value = value + 1
    elif aces == 2:
        if value <= 9:
            value = value + 12
        elif value > 9:
            value = value + 2
    elif aces == 3:
        if value <= 8:
            value = value + 13
        elif value > 8:
            value = value + 3
    elif aces == 4:
        if value <= 7:
            value = value + 14
        elif value > 7:
            value = value + 4
    return value

new_deck = deck()
player_hand = [ ]
card1 = new_deck.drawcard()
card2 = new_deck.drawcard()
print "You have drawn a " + str(card1[0]) + " of " + card1[1] + " and a " + str(card2[0]) + " of " + card2[1] + "!"
player_hand.append(card1[0])
player_hand.append(card2[0])

dealer_hand = [ ]
card3 = new_deck.drawcard()
card4 = new_deck.drawcard()
dealer_hand.append(card3[0])
dealer_hand.append(card4[0])

gameover = False
win = False
dealer_finished = False
player_finished = False
while not gameover:
    while dealer_finished == False:
        if total_value(dealer_hand) < 17:
            card = new_deck.drawcard()
            dealer_hand.append(card[0])
        elif total_value(dealer_hand) >= 17:
            dealer_finished = True
    if total_value(dealer_hand) > 21:
        print "Dealer Busts!"
        win = True
        gameover = True
        break
    while player_finished == False:
        choice = raw_input("Hit or Stay? ")
        choice.capitalize()
        if choice == "Hit":
            card = new_deck.drawcard()
            player_hand.append(card[0])
            print "You drew a", card[0], "of " + card[1]
            if total_value(player_hand) > 21:
                player_finished = True
                break
        elif choice == "Stay":
            player_finished = True
            gameover = True
            break
        else:
            print "Invalid Option"
    if total_value(player_hand) > 21:
        win == False
        gameover == True
        break
    gameover == True

if win == True:
    print "Congratulations!"
else:
    print total_value(player_hand), total_value(dealer_hand)
    if total_value(player_hand) > 21:
        print "You bust!"
    elif total_value(dealer_hand) > total_value(player_hand):
        print "The dealer had", str(total_value(dealer_hand)), "but you only had", str(total_value(player_hand)) + "."
        print "You lose!"
    elif total_value(dealer_hand) == total_value(player_hand):
        print "You tie the dealer with", total_value(dealer_hand)
    elif total_value(dealer_hand) < total_value(player_hand):
        print "The dealer had", str(total_value(dealer_hand)), "and you had", str(total_value(player_hand)) + ", so you win!" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:07:55.263

`J`对于、`Q`和情况，您有双等号`K`：

```
 if card == "A":
        aces = aces + 1
    elif card == "J":
        value == value + 10    #xxx
    elif card == "Q":
        value == value + 10    #xxx
    elif card == "K":
        value == value + 10    #xxx
    else:
        value = value + card 
```

所有这一切都是检查是否`value`is`value + 10`并评估为`True`or `False`。您要分配值：

```
 if card == "A":
        aces = aces + 1
    elif card == "J":
        value = value + 10
    elif card == "Q":
        value = value + 10
    elif card == "K":
        value = value + 10
    else:
        value = value + card 
```

或者更好：

```
 if card == "A":
        aces = aces + 1
    elif card == "J":
        value += 10
    elif card == "Q":
        value += 10
    elif card == "K":
        value += 10
    else:
        value += card 
```

# python - 是否可以像 Matlab 那样在 IPython 中显示对象实例变量？

> ID：15487839
> 
> 赞同：6
> 
> 时间：2013-03-18T22:05:34.127
> 
> 标签：python, matlab, ipython

我正在尝试从 Matlab 迁移到 Python。而魔法？在 IPython 中很好，Matlab 的一个很好的特性是您可以在命令行上（通过省略 ;）查看相关对象的实例变量（在 Matlab 中称为属性）。这在python中是否可行（我猜是通过IPython）？

理想情况下是这样的类：

```
class MyClass(object):
    _x = 5

    @property
    def x(self):
        return self._x + 100

    @x.setter
    def x(self, value):
        self._x = value + 1

    def myFunction(self, y):
        return self.x ** 2 + y 
```

会显示类似：

```
mc = Myclass()
mc
<package.MyClass> <superclass1> <superclass2>

Attributes:
_x: 5
 x: 105

Method Attributes:
myFunction(self, y) 
```

这是否可以通过覆盖类的 print 方法（如果存在这样的事情）来实现？或者通过 ipython 中的魔法方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T22:55:44.263

简短的回答是，没有办法在 Python 中获取对象的所有属性的列表，因为属性可以动态生成。举一个极端的例子，考虑这个类：

```
>>> class Spam(object):
...     def __getattr__(self, attr):
...         if attr.startswith('x'):
...             return attr[1:]
>>> spam = Spam()
>>> spam.xeggs
'eggs' 
```

即使解释器可以找出所有属性的列表，该列表也将是无限的。

对于简单的类，`spam.__dict__`通常就足够了。它不处理动态属性、`__slots__`基于 - 的属性、类属性、C 扩展类、继承自上述大部分内容的属性以及各种其他事物。但它至少是一些东西——有时，它是你想要的东西。大致而言，它正是您明确分配的内容`__init__`或以后明确分配的内容，仅此而已。

为了尽最大努力实现旨在人类可读性的“一切”，请使用[`dir(spam)`](http://docs.python.org/2/library/functions.html#dir).

为了尽最大努力实现程序化使用的“一切”，请使用[`inspect.getmembers(spam)`](http://docs.python.org/2/library/inspect.html#inspect.getmembers). （虽然实际上该实现只是`dir`CPython 2.x 中的一个包装器，但它*可以*做更多事情——事实上在 CPython 3.2+ 中也可以。）

它们都可以处理各种`__dict__`无法处理的事情，并且可能会跳过那些`__dict__`你不想看到的事情。但它们本质上仍然是不完整的。

无论您使用什么，获取值和键都很容易。如果您使用`__dict__`or `getmembers`，那很简单；`__dict__`通常，它是 a或`dict`与 a 足够接近的东西以`dict`供您使用，并`getmembers`显式返回键值对。如果你正在使用`dir`，你可以`dict`很容易地得到：

```
{key: getattr(spam, key) for key in dir(spam)} 
```

最后一件事：“对象”是一个有点模棱两可的术语。它可以表示“派生自的类的`object`任何实例”、“类的任何实例”、“新式类的任何实例”或“任何类型的任何值”（模块、类、函数等） .)。你几乎可以在任何东西上使用`dir`和`getmembers`；文档中描述了这意味着什么的确切细节。

最后一件事：您可能会注意到`getmembers`返回的内容类似于`('__str__', <method-wrapper '__str__' of Spam object at 0x1066be790>`)，您可能对此并不感兴趣。由于结果只是名称-值对，如果您只想删除`__dunder__`方法、`_private`变量等，那就是简单的。但通常，您想过滤“成员类型”。该`getmembers`函数接受一个过滤器参数，但文档并没有很好地解释如何使用它（并且，最重要的是，希望您了解描述符的工作原理）。基本上，如果你想要一个过滤器，它通常是`callable`, `lambda x: not callable(x)`, 或`lambda`由函数的组合组成`inspect.isfoo`。

所以，这很常见，你可能想把它写成一个函数：

```
def get_public_variables(obj):
    return [(name, value) for name, value 
            in inspect.getmembers(obj, lambda x: not callable(x))
            if not name.startswith('_')] 
```

你可以把它变成一个自定义的 IPython %magic 函数，或者只用它制作一个 %macro ，或者把它作为一个常规函数并显式调用它。

* * *

在评论中，您询问是否可以将其打包成一个`__repr__`函数，而不是尝试创建一个 %magic 函数或其他任何东西。

如果您已经让所有类都继承自一个根类，那么这是一个好主意。您可以编写一个`__repr__`适用于所有类的单曲（或者，如果它适用于其中 99% 的类，则可以覆盖`__repr__`其他 1% 的类），然后每次在解释器中评估任何对象或打印他们出去，你会得到你想要的。

但是，需要记住一些事项：

Python 有`__str__`（如果你`print`是一个对象，你会得到什么）和`__repr__`（如果你只是在交互式提示下评估一个对象，你会得到什么）是有原因的。通常，前者是一种很好的人类可读表示，而后者是可以的`eval`（或可输入到交互式提示中），或者是简洁的尖括号形式，足以让您区分类型和对象的身份。

这只是一个惯例而不是规则，所以你可以随意打破它。然而，如果你*要*打破它，你可能仍然想使用`str`/`repr`区别——例如，make`repr`给你一个完整的所有内部信息的转储，而`str`只显示有用的公共值。

更严重的是，您必须考虑`repr`值是如何组成的。例如，如果您`print`或`repr`a `list`，您将有效地得到`'[' + ', '.join(map(repr, item))) + ']'`. 使用 multi-line 看起来会很奇怪`repr`。如果您使用任何一种尝试缩进嵌套集合的漂亮打印机，例如内置在 IPython 中的打印机，情况会更糟。结果可能不会不可读，它只会破坏漂亮打印机本应提供的好处。

至于您要显示的具体内容：这一切都很简单。像这样的东西：

```
def __repr__(self):
    lines = []

    classes = inspect.getmro(type(self))
    lines.append(' '.join(repr(cls) for cls in classes))

    lines.append('')
    lines.append('Attributes:')
    attributes = inspect.getmembers(self, callable)
    longest = max(len(name) for name, value in attributes)
    fmt = '{:>%s}: {}' % (longest, )
    for name, value in attributes:
        if not name.startswith('__'):
            lines.append(fmt.format(name, value))

    lines.append('')
    lines.append('Methods:')
    methods = inspect.getmembers(self, negate(callable))
    for name, value in methods:
        if not name.startswith('__'):
            lines.append(name)

    return '\n'.join(lines) 
```

右对齐属性名称是这里最难的部分。（我可能弄错了，因为这是未经测试的代码……）其他一切要么简单，要么有趣（使用不同的过滤器来`getmembers`看看它们做了什么）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T18:53:32.073

通过实现，我能够用 IPython（至少大致上）实现我想要的`_repr_pretty_`：

```
def get_public_variables(obj):
    from inspect import getmembers
    return [(name, value) for name, value in
            getmembers(obj, lambda x: not callable(x)) if
            not name.startswith('__')]

class MySuperClass(object):
    def _repr_pretty_(self, p, cycle):
        for (name, value) in get_public_variables(self):
            f = '{:>12}{} {:<} \n'
            line = f.format(str(name), ':', str(value))
            # p.text(str(name) + ': ' + str(value) + '\n')
            p.text(line)

class MyClass(MySuperClass):
    _x = 5

    @property
    def x(self):
        return self._x + 100 
```

给了我：

```
mc = MyClass()
mc
Out[15]: 
          _x: 5 
           x: 105 
```

显然，在空格等方面需要进行一些微调。但这大致是我想要完成的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T22:42:40.197

您可以使用 获取对象的实例变量`obj.__dict__`，例如：

```
class Dog:
    def __init__(self, name, age):
        self.name = name
        self.age = age

d1 = Dog("Fido", 7)

for key, val in d1.__dict__.items():
    print(key, ": ", val) 
```

输出：

```
age :  7
name :  Fido 
```

您可能会发现这不适用于可能具有大量实例变量和方法的真实对象。

# javascript - if/else statement for onclick javascript:sendURL

> ID：15487842
> 
> 赞同：0
> 
> 时间：2013-03-18T22:05:46.577
> 
> 标签：javascript, jquery, if-statement, getelementbyid

I have the following code for creating a simple drop down nav. However, this is based on if a value is selected and the GO button will take the user to the link. I would like to put an if/else statement so if no value is selected, GO button will default to 1st link.

```
<script>
    function sendURL(url,obj) {
        document.getElementById("urlhidden").value = url;
        jQuery('.current').html(obj.parentNode.innerHTML);
    }
    function submitURL() {
        document.location = document.getElementById("urlhidden").value;
    }
</script>

<form name="navigate" class="select">
    <ul>
        <input type="hidden" name="urlhidden" id="urlhidden" />                 
        <li>
            <a href="javascript:void(0);" onclick="javascript:sendURL('<?php $link = $GLOBALS['base_url'] . '/node/';echo $link?>4',this)">link1</a>
        </li>
        <li>
            <a href="javascript:void(0);" onclick="javascript:sendURL('<?php $link = $GLOBALS['base_url'] . '/node/';echo $link?>5',this)">link2</a>
        </li>
    </ul>
    <div class="btnHolderInline">
        <input type="button" value="Go" onclick="javascript:submitURL();"/>
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:26:22.707

对我来说，它看起来不是很“简单”。“传统”下拉导航有什么问题？

```
<form action="javascript:location.href=this.page.options[this.page.selectedIndex].value">
    <select name="page">
        <option value="somepage.php">link1</option>
        <option value="otherpage.php">link2</option>
    </select>
    <input type="submit" value="Go" />
</form> 
```

除此之外，原始代码的问题在于您似乎没有任何`.current`元素。你真正想要的是这样的：

```
function submitURL() {
    $(this).parent("form").find("a:eq(0)").click();
} 
```

# python - 如何在不同的目录中运行python？

> ID：15487848
> 
> 赞同：2
> 
> 时间：2013-03-18T22:06:10.420
> 
> 标签：python, linux

我正在维护python代码。python安装在`/usr/bin`，代码安装在`/aaa`，python 2.5安装在下`/aaa/python2.5`。每次我运行 Python 时，它都会使用`/usr/bin`一个。如何让它运行`/aaa/python2.5`？

另外，当我运行`Python -v; import bbb; bbb.__file__;`它时，它会自动显示它使用`bbb`模块下`/usr/ccc/`（不知道为什么），而不是使用`bbb`模块下`/aaa/python2.5/lib`

如何让它运行 python2.5 并使用 `/aaa/python2.5/lib' 模块？我问这个的原因是如果我们维护一个代码，但其他人仍在使用它，我们需要将代码安装在一个新目录下并修改它，运行它并调试它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:08:13.467

做`/aaa/python2.5 python_code.py`。如果您更频繁地使用 Python 2.5，请考虑更改`$PATH`变量以使 Python 2.5 成为默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T22:19:40.423

更改[shebang-line](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)（如果有这样的线）

通常情况下

```
#!/usr/bin/env python 
```

用于启动首先在路径中找到的 python 解释器，这就是 virtualenv 的工作方式，即它更改路径以便首先放置选择的解释器并且上面的行简单地工作。

在您的示例中，将 i 更改为

```
#!/aaa/python2.5 
```

请注意，必须设置可执行标志才能使其正常工作。例子：

```
$ chmod u+x script.py
$ ./script.py 
```

有关python 如何搜索模块的描述，请参阅[PYTHONPATH 。](http://docs.python.org/2.7/using/cmdline.html?highlight=pythonpath#envvar-PYTHONPATH)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T22:13:30.383

将此添加到您的`.bash_profile`文件中（如果不存在则创建，它是一个隐藏文件）：

```
python25(){
    /aaa/python2.5 "$1"
} 
```

现在您可以使用 Python（最新）和 Python 2.5：

```
$ python my_file.py

$ python25 my_file.py 
```

祝你好运！

# android - 底部有两个按钮的文本视图

> ID：15487856
> 
> 赞同：0
> 
> 时间：2013-03-18T22:06:47.323
> 
> 标签：android, layout

我需要带有底部两个按钮的简单文本视图，在**XML**中 像这样

![在此处输入图像描述](../Images/5c15562aa65d8489e29fce67b4bbfd31.png)

我曾尝试使用底部的两个按钮和相对视图，但没有成功，也无法添加文本视图，任何人都可以有任何想法，请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:23:08.717

使用此布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent">

<TextView 
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textAppearance="@android:style/TextAppearance.Large"
    android:text="ABC"/>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:padding="5dp">

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.5"
        android:text="button1" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.5"
        android:text="button2" />
</LinearLayout>
</RelativeLayout> 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:11:36.403

试试这个

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom" >

   <TextView 
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:text="Text"/>

     <LinearLayout
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_alignParentBottom="true">

            <Button
                android:id="@+id/btn1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="8dp"
                android:layout_marginLeft="6dp"
                android:layout_marginRight="6dp"
                android:layout_marginTop="12dp"
                android:text="button1" />
            <Button
                android:id="@+id/btn_2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="8dp"
                android:layout_marginLeft="6dp"
                android:layout_marginRight="6dp"
                android:layout_marginTop="12dp"
                android:text="button2" />

    </LinearLayout>

</RelativeLayout> 
```

# python - 以列表为值的python字典

> ID：15487857
> 
> 赞同：2
> 
> 时间：2013-03-18T22:06:52.127
> 
> 标签：python, list, dictionary

我有一个字符串列表

```
vals = ['a', 'b', 'c', 'd',........] 
```

使用`vals`，我将使用每个 vals[i] 向服务器发出请求。服务器会为每个 val 返回一个数字。

'a' 可能为 1，'b' 可能为 2，'c' 再次为 1，'d' 再次为 2，依此类推。现在我想创建一个应该看起来像的字典

```
{ 1: ['a','c'], 2:['b','d'], 3: ['e'], ..... } 
```

实现这一目标的最快方法是什么？我可以`map()`以某种方式使用吗？我的意思是我可以尝试通过将请求的结果存储在单独的列表中然后将它们一一映射来尝试这样做 - 但我试图避免这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T22:09:12.777

以下应该工作，使用[`dict.setdefault()`](http://docs.python.org/2/library/stdtypes.html#dict.setdefault)：

```
results = {}
for val in vals:
    i = some_request_to_server(val)
    results.setdefault(i, []).append(val) 
```

`results.setdefault(i, []).append(val)`在行为上等同于以下代码：

```
if i in results:
    results[i].append(val)
else:
    results[i] = [val] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T22:22:58.063

或者，您可以使用`defaultdict`from`collections`像这样：

```
from collections import defaultdict
results = defaultdict(list)
for val in vals:
    i = some_request_to_server(val)
    results[i].append(val) 
```

# unix - freeBSD 中的 filp->private_data 等效项

> ID：15487858
> 
> 赞同：1
> 
> 时间：2013-03-18T22:06:55.277
> 
> 标签：unix, linux-kernel, linux-device-driver, freebsd, bsd

我正在将我的 linux 驱动程序移植到 freebsd。我使用“filp->private_data”变量来存储驱动程序所需的一些信息。（为了避免多线程情况下的锁）。我发现 BSD 在 linux 中不使用“文件”结构，而是使用 cdev。cdev 没有“private_data”变量。但我确信BSD中一定还有其他变量？

有谁知道如何实现我想要做的事情。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T03:27:42.797

您的设备的每个实例都有一个 softc 结构实例。那通常会有一个互斥锁。您可以使用 的`si_drv1`成员`cdev`来保留指向 的指针`softc`。就像是：

```
struct mydev_softc {
    struct mtx m_lock;
    struct cdev* m_cdev;
    device_t m_dev;
    /* ... whatever else you need ... */
};

static int mydev_attach(device_t dev)
{
    struct mydev_softc* sc = device_get_softc(dev);

    mtx_init(&sc->m_lock);
    sc->m_cdev = make_dev(...);
    sc->m_cdev->si_drv1 = sc;
    sc->m_dev = dev;
    /* Plus whatever else you need */
 } 
```

我省略了所有其他驱动程序初始化的东西，所以你可以看到这部分。

# asp.net - Open source solution to convert office documents to PDF without using Office automation

> ID：15487861
> 
> 赞同：5
> 
> 时间：2013-03-18T22:07:11.070
> 
> 标签：asp.net, asp.net-mvc, ms-word, pdf-generation

Is there any open-source sdk that I can use in an ASP.Net application to convert any office document to pdf. (I specifically need to convert a DOCX to PDF, but would like the ability to convert Excel and powerpoint files too).

I know that I could use Office automation using code shown below, but I don't want to use Office automation, as its not recommended for use in non-interactive applications[KB257757](http://support.microsoft.com/kb/257757)

I have found that [Aspose](http://www.aspose.com/.net/word-component/key-features.aspx) has a component that can be used for this (paid solution), but I was wondering if there were any open-source solutions out there.

```
//reference: Microsoft.Office.Interop.Word.dll
//using Word = Microsoft.Office.Interop.Word;
public static void Convert(string documentFilePath, string outputPath)
    {
        var ap = new Word.Application {Visible = false};

        var document = ap.Documents.Open(documentFilePath);

        document.ExportAsFixedFormat(outputPath,
                       WdExportFormat.wdExportFormatPDF,
                       OptimizeFor: WdExportOptimizeFor.wdExportOptimizeForPrint,
                       BitmapMissingFonts: true, DocStructureTags: false);

        document.Close();
    } 
```

NOTE: I have seen some people recommend using OpenXML for this. But OpenXML does not provide you any method to convert an Office document to a PDF document.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-06-21T08:35:15.113

你可以在 apache 2.0 下使用 libreOffice 是免费许可证我做了一个将 docx 转换为 ppt 的示例，它工作得很好，你可以转换为多种类型，如 pdf

这是我的例子：

```
 static string getLibreOfficePath()
    {
        switch (Environment.OSVersion.Platform)
        {
            case PlatformID.Unix:
                return "/usr/bin/soffice";
            case PlatformID.Win32NT:
                string binaryDirectory = System.IO.Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
                //return binaryDirectory + "\\Windows\\program\\soffice.exe";
                return @"C:\Program Files\LibreOffice\program\soffice.exe";
            default:
                throw new PlatformNotSupportedException("Your OS is not supported");
        }
    }

    static void Main(string[] args)
    {
        string libreOfficePath = getLibreOfficePath();
        //to convert docx to pdf just change input file to docx
        ProcessStartInfo procStartInfo = new ProcessStartInfo(libreOfficePath, 
        string.Format("--convert-to pdf  C:\\test.ppt"));
        procStartInfo.RedirectStandardOutput = true;
        procStartInfo.UseShellExecute = false;
        procStartInfo.CreateNoWindow = true;
        procStartInfo.WorkingDirectory = Environment.CurrentDirectory;

        Process process = new Process() { StartInfo = procStartInfo, };
        process.Start();
        process.WaitForExit();

        // Check for failed exit code.
        if (process.ExitCode != 0)
        {
            throw new LibreOfficeFailedException(process.ExitCode);
        }
    } 
```

谢谢，希望对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T03:33:15.240

看看[JODConverter](http://www.artofsolving.com/opensource/jodconverter)。这是免费和开源的，可以很好地完成 Doc->PDF，DocX 取决于您的文档。您可能想查看 ODFoverter 以获得一个很棒的 DocX->ODT 路径，然后 JODConverter 可以执行 ODT->PDF 部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T22:12:42.853

虽然它是一个库，但您可以将[NPoi](http://npoi.codeplex.com/)和[iTextSharp](http://sourceforge.net/projects/itextsharp/)库组合在一起来完成您的任务。两者都是其流行且强大的 Java 对应物的 .Net 端口。

# python - Extraction particulars from a text file using python

> ID：15487863
> 
> 赞同：0
> 
> 时间：2013-03-18T22:07:16.777
> 
> 标签：python, parsing

I have a .txt file in which the content are of this type:

```
DIRN straight-2
FOR minutes-5
DO crossing-6
WHAT Hall-7-13
DO take-10
WHAT Hall-3-15 
```

What I want is another .txt file that can be generated with the help of python which will have this as its final content:

```
DIRN straight
FOR minutes
DO crossing
WHAT Hall-7
DO take
WHAT Hall-3 
```

ie, I want to remove everything that comes after the last hyphen "-" in each line including hyphen also.

Please help me with the python code and thanks for any help in advance.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T22:18:34.913

在 Python 2 或 3 中，这有效：

```
s='''DIRN straight-2
FOR minutes-5
DO crossing-6
WHAT Hall-7-13
DO take-10
WHAT Hall-3-15'''

import re

for line in s.splitlines():
    line=re.sub(r'^(.*)-\d+$',r'\1',line)
    print line 
```

您可以通过这种方式在 Python 中执行非正则表达式：

```
for line in s.splitlines():
    line=line.rpartition('-')[0] if '-' in line else line
    print(line) 
```

或者 - 可能更好：

```
for line in s.splitlines():
    line=line[:line.rindex("-")] if '-' in line else line    
    print line 
```

正则表达式更具体，因为它只匹配`-\d+`字符串的末尾。

任何情况下，打印：

```
DIRN straight
FOR minutes
DO crossing
WHAT Hall-7
DO take
WHAT Hall-3 
```

# c++ - 将动态创建的对象分配给作为类的私有成员的指针有什么问题吗？

> ID：15487867
> 
> 赞同：0
> 
> 时间：2013-03-18T22:07:40.427
> 
> 标签：c++, pointers, memory-management, dynamic, memory-leaks

例如，假设我有一个 Game 类：

```
class Game{
public:
    Game();
    ~Game();

    void CreateWindowClass(HINSTANCE);
    void CreateRessources(HINSTANCE);

    void ShowMainScreen();

    Winsock* CreateWinsock();

    MessageLog* CreateMessageLog();

    D2DResources* CreateD2DResources(HWND);

    HWND Getm_hWnd();

public:
    D2DResources* pD2DResources;
    Winsock* pWinsock;
    MessageLog* pMessageLog;

private:
    HWND m_hWnd;

}; 
```

Game 中的 3 个指针是这样分配的：

```
Winsock* Game::CreateWinsock()
{
    pWinsock = new Winsock;

    return pWinsock;
} 
```

这会导致任何问题吗？另外，我是否会像这样删除动态创建的对象：delete pWinsock;？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T22:12:34.720

`pWinsock`是公共成员，但无论哪种方式都没有错。函数的指针和返回值都`pWinsock`指向动态分配的`Winsock`对象。只要您`delete`在某个时候成为对象，就不会发生内存泄漏。

这里唯一的问题是该函数的客户端可能`delete`是指针本身，而您的`Game`对象可能依赖于`pWinsock`指针在特定持续时间（可能在其整个生命周期）内有效。您可以使用智能指针最好地表达您的意图。A`std::shared_ptr<Winsock>`在这里是一个不错的选择，因为您的`Game`对象会创建`Winsock`并与客户端共享所有权。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T22:13:40.867

我会避免暴露公共字段和共享这样的原始指针。您正在打破封装并使内存管理更加困难。而是使用访问器/修改器函数，就像在 Java 中一样。编译器会将这些内联。

返回`Winsock*`from的问题`CreateWinsock`在于，不再清楚谁“拥有” Winsock 对象，因为该方法类似于工厂构造函数，调用者拥有它，但您正在为其设置一个成员字段，因此主机`Game`对象真正拥有它。

我建议`shared_ptr`在公开 Winsock 对象时使用智能指针，以便控制 Winsock 的生命周期。

该`Winsock`对象不会被自动删除，除非您从`Game::~Game()`析构函数中删除它。

# ruby - `Array#first` 和 `Array#last` 的破坏性版本

> ID：15487870
> 
> 赞同：0
> 
> 时间：2013-03-18T22:07:49.173
> 
> 标签：ruby, arrays

是否有提供破坏性版本`Array#first`和的库`Array#last`？如果没有，实施它们的最有效方法是什么？像这样的东西：

```
a = [:a, :b, :c, :d, :e]
a.first!(2) # => [:a, :b]
a # => [:c, :d, :e]
a.last!(1) # => [:e]
a # => [:c, :d] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T22:09:59.100

您在寻找`Array#shift`和`Array#pop`吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T01:09:57.707

您也可以尝试`Array#slice!`以下方法：

```
p RUBY_VERSION
a = [1,2,3,4,5]
a.slice!(0)
p a
a = [1,2,3,4,5]
a.slice!(0,2)
p a
a = [1,2,3,4,5]
a.slice!(-1)
p a
a = [1,2,3,4,5]
a.slice!(-3,3)
p a 
```

*输出：*

```
"2.0.0"
[2, 3, 4, 5]
[3, 4, 5]
[1, 2, 3, 4]
[1, 2] 
```

# java - SocketTimeoutException 连接到 Linux 虚拟机上的数据库

> ID：15487871
> 
> 赞同：0
> 
> 时间：2013-03-18T22:07:52.077
> 
> 标签：java, linux, virtual-machine

Oracle NoSQL 是一个应该托管在 Linux 上的数据库，所以我有一个在 Oracle VM VirtualBox 中运行的虚拟 Ubuntu。我的主机运行的是 Windows 7。

我有一个桥接连接，我绝对能够在两者之间进行通信。随着数据库在两台机器上运行，我可以通过网络浏览器连接到另一台机器的管理控制台，该控制台在端口 5001 上运行。我可以使用我们网络上机器的 IP 地址或其网络名称以这种方式进行连接。

从两台机器上，我都可以连接到该机器的数据库，并使用 IP 地址或网络名称从 java 程序中使用该数据库。

在虚拟机中，我可以使用网络名称连接并使用我的 PC 的 kvstore，但我使用 IP 地址得到了 socketTimeoutException。我相信这是由于 kvstore 的限制。

在我的电脑上，我无法使用网络名称或 IP 地址连接和使用虚拟机的 kvstore。当我尝试使用虚拟机的网络名称进行连接时，我得到以下堆栈跟踪：

```
Exception in thread "main" oracle.kv.FaultException: Could not contact any RepNode at: [pc30129vm:5000] (11.2.2.0.26)
Fault class name: oracle.kv.KVStoreException
    at oracle.kv.KVStoreFactory.getStore(KVStoreFactory.java:123)
    at nosql.Test.main(Test.java:18)
Caused by: oracle.kv.KVStoreException: Could not contact any RepNode at: [pc30129vm:5000]
    at oracle.kv.impl.util.TopologyLocator.getInitialTopology(TopologyLocator.java:226)
    at oracle.kv.impl.util.TopologyLocator.get(TopologyLocator.java:85)
    at oracle.kv.impl.api.RequestDispatcherImpl.<init>(RequestDispatcherImpl.java:285)
    at oracle.kv.KVStoreFactory.getStore(KVStoreFactory.java:118)
    ... 1 more
Caused by: java.rmi.ConnectIOException: Exception creating connection to: pc30129vm; nested exception is: 
    java.net.SocketTimeoutException: connect timed out
    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:632)
    at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:216)
    at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:202)
    at sun.rmi.server.UnicastRef.newCall(UnicastRef.java:340)
    at sun.rmi.registry.RegistryImpl_Stub.list(Unknown Source)
    at oracle.kv.impl.util.TopologyLocator.getInitialTopology(TopologyLocator.java:175)
    ... 4 more
Caused by: java.net.SocketTimeoutException: connect timed out
    at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:75)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at oracle.kv.impl.util.registry.ClientSocketFactory.createSocket(ClientSocketFactory.java:300)
    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:613)
    ... 9 more 
```

我已经尝试在虚拟机的那个端口上运行 Nmap，这似乎恢复正常。使用 nmap 命令：

```
nmap -p 5000 pc30129vm 
```

我得到结果：

```
Starting Nmap 6.25 ( http://nmap.org ) at 2013-03-18 14:51 Pacific Daylight Time

Nmap scan report for pc30129vm (192.168.0.25)

Host is up (0.0030s latency).

PORT     STATE    SERVICE

5000/tcp filtered upnp

MAC Address: 08:00:27:44:A1:10 (Cadmus Computer Systems)

Nmap done: 1 IP address (1 host up) scanned in 11.74 seconds 
```

我只是想不通为什么我无法连接和使用虚拟机的数据库。使用运行 linux 的同事的笔记本电脑，我什至能够连接，但由于某种原因，虚拟机似乎阻碍了我的努力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:25:52.333

作为答案粘贴的评论：

您很可能有防火墙阻止您访问该端口。防火墙可能会保护服务器并拒绝与它的传入连接，或者它可能会阻止来自您的机器的传出连接 - 或两者兼而有之，最坏的情况。

当您实际可以访问端口时，nmap 会在 STATE 列中报告“打开”。

# ios - 当@synthesized 然后在子类中访问时，@properties 在调试器中的行为异常

> ID：15487874
> 
> 赞同：1
> 
> 时间：2013-03-18T22:07:57.233
> 
> 标签：ios, objective-c, lldb

我有一些@properties 在调试器中表现得很奇怪，`@synthesize`然后我将它们子类化为控制器。

当我删除 @synthesize 时，@properties 的行为符合预期。

这是一个基本示例，一个`ViewController`名为`SubClassedViewController`.

# 视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController {
    NSNumber *someNumber;
}

@property (nonatomic, strong) NSNumber *someNumber;

@end 
```

# 视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize someNumber;  //Strange behavior unless I remove this line

- (void)viewDidLoad
{
    [super viewDidLoad];
    someNumber = [NSNumber numberWithInt:123];
    // Do any additional setup after loading the view, typically from a nib.
}

@end 
```

# 子类视图控制器.h

```
#import "ViewController.h"

@interface SubClassedViewController : ViewController

@end 
```

# 子类视图控制器.m

```
#import "SubClassedViewController.h"

@interface SubClassedViewController ()

@end

@implementation SubClassedViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
} 
```

# @synthesize 的行为

除非我使用`self.`，否则对象指向子类控制器，而不是 NSNumber：

```
(lldb) po someNumber
$3 = 0x07151a30 <SubClassedViewController: 0x7151a30>
(lldb) po self.someNumber
$4 = 0x08c37f20 123
(lldb) p (int)[someNumber intValue]
error: Execution was interrupted, reason: Attempted to dereference an invalid ObjC Object or send it an unrecognized selector.
The process has been returned to the state before execution.
(lldb) po (UIView*)[someNumber view]
$7 = 0x071574f0 <UIView: 0x71574f0; frame = (0 20; 320 548); autoresize = RM+BM; layer = <CALayer: 0x71575a0>> 
```

请注意，如果我将`NSLog`s 放入我的代码中， someNumber 会正确指向 NSNumber；它仅在 lldb 中被标识为 SubClassedViewController（据我所知）。

# 没有@synthesize 的行为

如果我注释掉`@synthesize`并将 ViewController.m 中的 NSNumber 创建更改为：

```
_someNumber = [NSNumber numberWithInt:123];  //I added _ before variable name 
```

然后我得到以下不同的行为（这是我期望的行为）

```
(lldb) po _someNumber
$0 = 0x0717db70 123
(lldb) po self.someNumber
$1 = 0x0717db70 123
(lldb) po self
$2 = 0x071853a0 <SubClassedViewController: 0x71853a0> 
```

# 问题

*   这是一个错误，还是我误解了什么？

*如果这是一个错误*（这是我的假设）......

*   它是 Xcode、调试器还是编译器中的错误？

*如果这不是错误...*

*   我正在使用 Xcode 4.6.1，它*不需要*我 @synthesize 东西。但是无论我是否这样做，我的应用程序的行为是否应该相同？

*   为什么属性指向它的“所有者”会有意义？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T22:12:11.967

这不是“奇怪的行为”。你得到垃圾对象是因为你的代码是错误的。

删除`@synthesize`时，编译器会自动合成具有名称的 ivar `_someNumber`。这会导致您的错误代码`-viewDidLoad`实际上什么都不做。值得注意的是，该行

```
someNumber = [NSNumber numberWithInt:123]; 
```

将自动释放的对象存储到 ivar 中，这意味着它将被释放并且 ivar 将保存一个垃圾对象。这里的正确解决方法可能是说

```
self.someNumber = [NSNumber numberWithInt:123]; 
```

这将调用设置器并为您保留值。

此外，我建议完全删除您的 ivar 声明并删除 ivar `@synthesize`，然后让编译器合成您的 ivar。

# c++ - std::string 构造函数抛出 std::out_of_range 异常

> ID：15487879
> 
> 赞同：3
> 
> 时间：2013-03-18T22:08:29.807
> 
> 标签：c++, exception, stdstring

使用 VS 2012。

我在做刽子手。无论如何，我有一个函数来获取一个与当前猜测的单词长度相同的 std::string，但用下划线填充。（如，空白）。

功能：

```
std::string getBlankWord(std::vector<std::string> words, int currentWordIndex)
{
    return std::string(words[currentWordIndex], '_');
} 
```

调用它的行：

```
currentGuessingString = getBlankWord(words, index); 
```

words 是 std::vector，index 是 int。words.size() = 22 和 index = 0，所以我不知道如何调用，在这种情况下，words[0] 可能是罪魁祸首。无论如何，这一行的某些东西会引发 std::out_of_range 异常，但我找不到它。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T22:10:44.930

我认为你真正想要的更像是：

```
return std::string(words[currentWordIndex].size(), '_'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T22:16:27.523

出现您的问题是因为最终被调用的构造函数是子字符串构造函数（请参见[此处](http://cplusplus.com/reference/string/string/string/)）

第一个参数很容易弄清楚，但是第二个参数将是一个 char，其 ascii 值 '_' 隐式转换为 size_t 并且它的值很可能大于您提供给构造函数的字符串的大小这反过来又会导致你的问题

# c# - 从 Android 中的 EditText 删除文本时停止“不能为负”错误

> ID：15487881
> 
> 赞同：-1
> 
> 时间：2013-03-18T22:08:32.580
> 
> 标签：c#, android, backspace, xamarin.android

不确定将其命名为什么，也找不到有关我的特定问题的任何信息。

我有以下代码片段，可让我退格输入`EditText`框中的文本。

```
btnClear.Click += delegate {
            nView.Text = nView.Text.Remove(nView.Text.Length - 1, 1);
        }; 
```

当我最终清除该`EditText`框并再次单击（转到-1 个字符）时，应用程序崩溃并显示“不能为负”。

我需要某种预防措施来阻止用户删除太多字符并导致应用程序崩溃。

我要实现什么？我也使用 C# 作为我的编码语言。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:10:49.177

您只需添加一个“如果”：

```
btnClear.Click += delegate {
    if (nView.Text.Length > 0)
        nView.Text = nView.Text.Remove(nView.Text.Length - 1, 1);
}; 
```

# ruby-on-rails - Bootstrap tabbable nav 在 Ruby on Rails 中不显示预期的选项卡

> ID：15487883
> 
> 赞同：0
> 
> 时间：2013-03-18T22:08:35.093
> 
> 标签：ruby-on-rails, twitter-bootstrap, ruby-on-rails-3.2

我正在基于这个 Gemfile 进行开发：

```
 source 'https://rubygems.org'

    gem 'rails', '3.2.13'
    gem 'bootstrap-sass', '2.3.1'
    gem 'sqlite3', :require => 'sqlite3'
    gem 'bcrypt-ruby', '3.0.1'
    gem 'jquery-rails', '~> 2.2.1'

    # gem for dev only
    group :development do
      gem 'annotate', '~> 2.4.1.beta'
      gem 'rspec-rails'
      gem 'capybara', '1.1.2'
      gem 'factory_girl_rails', '4.1.0'
    end

    # Gems used only for assets and not required
    # in production environments by default.
    group :assets do
      gem 'sass-rails',   '~> 3.2.3'
      gem 'coffee-rails', '~> 3.2.1'
      gem 'uglifier', '>= 1.0.3'
    end 
```

将此包含在我的主 Style.css.scss 文件中：

```
 @import "bootstrap"; 
```

我的 application.html.erb 文件中的这个标题：

```
 <!DOCTYPE html>
    <html>
    <head>
      <title> <%= full_title(yield(:title))%> </title>
      <%= stylesheet_link_tag    "application", :media => "all" %>
      <%= javascript_include_tag "application" %>
      <%= csrf_meta_tags %>
      <%= render "layouts/shim" %>
    </head>

    <body>
    ... 
```

（灵感来自 Michael Hartl 的教程）

**我正在尝试将 Bootstrap 中的以下示例应用于我的设计：**

```
<div class="tabbable"> <!-- Only required for left/right tabs -->
 <ul class="nav nav-tabs">
  <li class="active"><a href="#tab1" data-toggle="tab">Section 1</a></li>
  <li><a href="#tab2" data-toggle="tab">Section 2</a></li>
 </ul>
 <div class="tab-content">
  <div class="tab-pane active" id="tab1">
   <p>I'm in Section 1.</p>
  </div>
  <div class="tab-pane" id="tab2">
   <p>Howdy, I'm in Section 2.</p>
  </div>
 </div>
</div> 
```

效果不是预期的（即使它在他们的网站上运行良好，我复制/粘贴它）：

- 首次显示页面时，选择活动选项卡 1（如预期的那样）

- 当我点击“第 2 节”选项卡时，地址栏实际上显示 URL ...#tab2，但不显示第 2 节的内容。活动选项卡仍然是 1。

- 当我单击“第 1 节”选项卡时，地址栏实际上显示 URL ...#tab1

**我错过了什么 ？**

谢谢你的帮助。

此致，

弗雷德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:50:38.860

听起来 javascript 没有加载，所以您的应用程序可能没有加载它。您可能忘记设置您的应用程序以加载引导程序 .js，如下所示：

```
# app/assets/javascripts/applications.js (or a manifest of your choice)
//= require bootstrap 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T00:53:58.077

正如 Zaid 所说，听起来您确实没有导入引导 JS。

此外，您应该在资产组中包含 bootstrap-sass gem。如果不是，则 gem 中包含的供应商样式表和脚本将不会在 prod 部署之前进行预编译。

# bitwise-operators - C中64位数据类型（long long）的按位运算？

> ID：15487884
> 
> 赞同：0
> 
> 时间：2013-03-18T22:08:35.857
> 
> 标签：bitwise-operators, long-long

这是一些代码。

```
long long bitmap2 = 1;
printf("%d\n", bitmap2 & 1); 
```

输出为 0，但我期待 1。我该如何解决这个问题？（我尝试过 1LL 而不是 1 和 uint64_t 而不是 long long；两者都给出了相同的答案 0。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:11:15.867

您目前看到的是**未定义的行为**；您需要确保格式说明符和参数匹配。因此，请使用以下方法之一：

```
printf("%lld\n", bitmap2 & 1);
printf("%d\n", (int)(bitmap2 & 1)); 
```

有关. [_](http://en.cppreference.com/w/c/io/fprintf) _`printf`

但是，如果`printf`格式字符串与您提供的参数类型不匹配，大多数编译器都会警告您。例如，如果我在 GCC 中使用`-Wall`标志编译您的代码，我会得到以下信息：

```
warning: format '%d' expects type 'int', but argument 2 has type 'long long int' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:10:45.057

我认为你应该使用`printf("%d\ll", bitmap2 & 1)`而不是`printf("%d\n", bitmap2 & 1)`如果你想打印很长。

# visual-studio-2012 - 可以将键盘快捷方式分配给使用 DynamicItemStart 的 Visual Studio 2012 扩展包命令吗？

> ID：15487894
> 
> 赞同：0
> 
> 时间：2013-03-18T22:09:15.850
> 
> 标签：visual-studio-2012, vsx

我有一个 VS2012 扩展包，它使用`DynamicItemStart`命令标志向菜单添加命令，[如 MSDN 中所述](http://msdn.microsoft.com/en-US/library/bb166492%28v=vs.110%29.aspx)。这些命令的工作方式有点像内置的外部工具工具，所以确切的集合是由插件用户配置的，而不是由我定义的。一个`DynamicItemStart`命令似乎最适合这个。

根据示例，我添加了一堆项目，隐藏它们，然后使用`BeforeQueryStatus`回调控制可见性。这一切似乎都在工作：菜单项完全按照我的预期出现，您可以通过用鼠标单击它们来调用它们。我的包也有一个固定的命令，这也有效。

我的非动态命令也出现在工具|选项，键盘部分的命令列表中，因此您可以为其创建键盘快捷键。（您也可以从立即窗口中调用它，它似乎使用相同的列表。）但是我的动态命令没有出现！我期待它们以某种自动生成的列表的形式出现，例如`Tools.ExternalCommand`.

`DynamicItemStart`命令不能以这种方式调用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T00:57:43.460

如果遇到此问题的其他人发现此问题...

`DynamicItemStart`据我所知，命令似乎没有名称。文档说它们用于 MRU 或窗口列表，所以也许没有人认为有人需要命名它们。

因此，出于我的目的，我刚刚创建了 100 个占位符命令 ( `Command00`... `Command99`)，并为每个命令设置了`DynamicVisibility`和`TextChanges`命令标志。（我现在有一个 1,237 行的 VSCT 文件。）

然后在运行时我使用`BeforeQueryStatus`回调来隐藏未使用的项目，显示使用的项目，并为菜单设置它们的（用户分配的）标题。我的 UI 会小心地显示哪个命令对应于每个分配的操作，并保持映射完整，因此用户在为每个操作分配键盘快捷键时知道要使用 100 个命令名称中的哪一个。

这并不理想，并且在 Visual Studio 中有点令人讨厌的限制。但看起来它会充分发挥作用。

# html - 标记以静音播放 Flash 视频？

> ID：15487899
> 
> 赞同：0
> 
> 时间：2013-03-18T22:09:40.700
> 
> 标签：html, flash

有没有办法以类似于 HTML5 的“静音”属性的方式播放带有静音的 Flash 视频？

类似的东西是理想的，但我在这里的规范中看不到它：http: [//helpx.adobe.com/flash/kb/flash-object-embed-tag-attributes.html](http://helpx.adobe.com/flash/kb/flash-object-embed-tag-attributes.html)

那么也许是 FlashVars 值或类似值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:16:16.783

你想用什么播放器？

[http://flowplayer.org/docs/](http://flowplayer.org/docs/)有一个静音选项。

# javascript - 如何在 JSON 中存储多条记录

> ID：15487900
> 
> 赞同：0
> 
> 时间：2013-03-18T22:09:45.367
> 
> 标签：javascript, jquery, json

我不知道如何在 json 文件（结构）中存储多个实体，我想通过 id 函数（JQuery/javascript）和简单的排序（0,1,2...200）来查找。

这是我的代码：

```
{ 
    "id" : 5,
    "name" : "Jemmy overy",
    "data" : {...},
    "link" : "http:...",
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-18T22:11:10.640

顺便说一句，如果您想通过索引号将它们拉出来，下面 Lix 的答案是最好的。

用方括号把它们包起来！

```
[{ 
    "id" : 5,
    "name" : "Jemmy overy",
    "data" : {...},
    "link" : "http:...",
},
{ 
    "id" : 6,
    "name" : "John Smith",
    "data" : {...},
    "link" : "http:...",
}] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T22:17:41.583

好吧，我能看到以这种方式识别 JSON 对象的唯一方法是使用它的 ID 属性作为键 -

```
var a = {
  '5':{ 
    "id" : 5,
    "name" : "AAA",
    "data" : {...},
    "link" : "http:..."
  },'6':{ 
    "id" : 6,
    "name" : "BBB",
    "data" : {...},
    "link" : "http:..."
  },
  ...
}; 
```

因此，您可以像访问数组一样访问它们-

```
a['5'] 
```

关于排序，我不认为有任何原生方式对 JSON 对象进行排序，但网站上还有一些其他帖子提供了帮助 -[按值排序 JSON](https://stackoverflow.com/questions/881510/jquery-sorting-json-by-properties)

# c# - 文本框输入键事件在 WPF 中不起作用

> ID：15487902
> 
> 赞同：3
> 
> 时间：2013-03-18T22:10:01.060
> 
> 标签：c#, wpf

keydown 事件无法正常工作。我想在按下回车键时引发与按钮相同的事件。这是c#

```
 public partial class Search : Control
    {
        public SearchRevision()
        {
            InitializeComponent();
        }

        private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            SearchViewModel vm = this.DataContext as SearchViewModel;
            if (vm != null)
                vm.Refresh();
        }

        private void myTextBox_KeyDown(Object sender, KeyEventArgs e)
        {
            if (e.Key == Key.Enter)
            {
                SearchViewModel vm = this.DataContext as SearchViewModel;
                if (vm != null)
                    vm.Refresh();
            }
        }

        private void myTextBox_Escape(Object sender, KeyEventArgs e)
        {
            if (e.Key == Key.Escape)
            {
                txtName.Text = "";
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-23T06:32:40.930

在 wpf 中没有 keycode 或 keys.enter ，您可以使用：

```
private void myTextBox_KeyDown(Object sender, KeyEventArgs e)
{
    if (e.Key == Key.Enter)
    {
        SearchViewModel vm = this.DataContext as SearchViewModel;
        if (vm != null)
            vm.Refresh();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-03T17:47:06.823

在 WPF 中，除非您不设置属性：AcceptsReturn="True"，否则 TextBox 元素将无法使用“Enter”按钮创建 KeyUp 事件。

但是，它不能解决在 TextBox 元素中处理 KeyUp 事件的问题。按“ENTER”后，您将在 TextBox 中获得一个新的文本行。

我通过使用 Bubble 事件策略解决了使用 TextBox 元素的 KeyUp 事件的问题。它简短而容易。您必须在某些（任何）父元素中附加 KeyUp 事件处理程序：

XAML：

```
<Window x:Class="TextBox_EnterButtomEvent.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:TextBox_EnterButtomEvent"
        mc:Ignorable="d"
        Title="MainWindow" Height="350" Width="525">
    <Grid KeyUp="Grid_KeyUp">
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height ="0.3*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <TextBlock Grid.Row="1" Grid.Column="1" Padding="0" TextWrapping="WrapWithOverflow">
            Input text end press ENTER:
        </TextBlock>
        <TextBox Grid.Row="2" Grid.Column="1" HorizontalAlignment="Stretch"/>
        <TextBlock Grid.Row="4" Grid.Column="1" Padding="0" TextWrapping="WrapWithOverflow">
            You have entered:
        </TextBlock>
        <TextBlock Name="txtBlock" Grid.Row="5" Grid.Column="1" HorizontalAlignment="Stretch"/>
    </Grid>
</Window> 
```

C# 逻辑部分（KeyUp 事件处理程序附加到网格元素）：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void Grid_KeyUp(object sender, KeyEventArgs e)
    {
        if(e.Key == Key.Enter)
        {
            TextBox txtBox = e.Source as TextBox;
            if(txtBox != null)
            {
                this.txtBlock.Text = txtBox.Text;
                this.txtBlock.Background = new SolidColorBrush(Colors.LightGray);
            }
        }
    }
} 
```

结果：

[带有结果的应用程序主窗口](http://i.stack.imgur.com/ctT8t.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-26T19:28:27.507

在 WPF 中，有时“Key.enter”无法识别，您必须改用“System.Windows.Input.Key.Enter”

```
if (e.Key == System.Windows.Input.Key.Enter)
{
    //Your code here
} 
```

我遇到了与 OP 相同的问题，这是对我有用的解决方案。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-03-18T22:30:01.837

无需编写两次代码。你也可以这样做。

```
private void myTextBox_KeyDown(Object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Enter)
    {
        //you may pass the parameters if you need
        Button_Click_1(null,null);
    }
} 
```

# java - 将 Java hashmap 初始值设定项转换为 PHP 等效项

> ID：15487904
> 
> 赞同：0
> 
> 时间：2013-03-18T22:10:09.897
> 
> 标签：java, php, hashmap, associative-array, stdclass

只是好奇哪种方式是正确的？

```
// the origional JAVA method
public void setRequestHeader(String key, String value) {
    if (this.headers == null) {
        this.headers = new HashMap<String, String>();
    }
    this.headers.put(key, value);
} 
```

这应该在 PHP 中解释为

```
Class HashMap {}

/**
 * @return this
 */
public function setRequestHeader($key, $value) {
    if ($this->headers == NULL) {
        $this->headers = new HashMap();
    }
    return $this->headers->$key = $value;
} 
```

....或者....

```
/**
 * @return array
 */
public function setRequestHeader($key, $value) {
    if ($this->headers == NULL) {
        $this->headers = array();
    }
    return $this->headers[$key] = $value;
} 
```

如果关联数组像我相信的那样是正确的，是否需要在类的顶部声明这个变量？

```
// JAVA version
private HashMap<String, String> headers; 
```

将类似于

```
// PHP version
private $headers = array(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:12:05.423

PHP 中的数组具有键值结构......因此是正确的：

```
$this->headers[$key] = $value; 
```

事实上，PHP 手册说：

> PHP 中的数组实际上是一个有序映射。

[http://php.net/manual/de/language.types.array.php](http://php.net/manual/de/language.types.array.php)

虽然，根据[How is the PHP array implementation on the C level？](https://stackoverflow.com/questions/2350361/how-is-the-php-array-implemented-on-the-c-level)，它实际上是一个`HashTable`，这意味着您可以依赖 O(1) 查找。

# c# - HTTPWebRequest Cookie 不同的行为

> ID：15487905
> 
> 赞同：1
> 
> 时间：2013-03-18T22:10:12.393
> 
> 标签：c#, http, cookies

我正在开发一个需要登录网站 www.example.com 的应用程序，该应用程序使用 HTTPWebRequest 类和 CookieJar 来处理 Cookie。

我遇到的问题是，在某些计算机上，该过程工作得很好，但在其他一些计算机上（比例为 1-1）却没有，没有任何 SO/IE 版本模式。

我已经尝试记录每个 GET 和 POST 请求，这就是问题所在：

**工作要求**

> 内容类型：application/x-www-form-urlencoded
> 
> 用户代理：Mozilla/5.0 (Windows NT 6.1; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0
> 
> 推荐人：http : [//account.example.com/login](http://account.example.com/login)
> 
> 主机：main.example.com
> 
> Cookie：ASP.NET_SessionId=gw5i1u55h5dz1uuydwhvu2er；ISBets_CurrentCulture=1；ISBetsForm=AAAA；SESSb3ef0b97a175642ae0744781875xxxxx=00000157671f81d4ea9f3589198768d4；授权缓存=59c1bd；drupal_user=foo；drupal_uid=543; isib_name=foo+bar

**不工作请求**

> 内容类型：application/x-www-form-urlencoded
> 
> 用户代理：Mozilla/5.0 (Windows NT 6.1; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0
> 
> 推荐人：http : [//account.example.com/login](http://account.example.com/login)
> 
> 主机：main.example.com
> 
> Cookie：ASP.NET_SessionId=gw5i1u55h5dz1uuydwhvu2er；ISBets_CurrentCulture=1；ISBetsForm=AAAA；

应用程序是相同的，每次重新启动程序时，我都会使用带有空 cookiejar 的 HTTPWebRequest，这些是应用程序的**第一个**POST 请求的请求标头：所以，我的问题是，为什么这两个不同？第一次使用时 cookiejar 不应该是空的吗？那么，额外的 cookie 是从哪里来的呢？

经过其他一些测试，我开始怀疑跨域“技巧”是整个问题，但同样，IE 中的一个选项是否有可能使这个 Set-Cookie 出错：

> 设置 Cookie：SESSb3ef0b97a175642ae0744781875xxxxx=00000157671f81d4ea9f3589198768d4；过期=格林威治标准时间 2013 年 3 月 18 日星期一 23:48:14；路径=/; 域=.example.com；HttpOnly,authcache=59c1bd; 过期=格林威治标准时间 2013 年 3 月 18 日星期一 23:48:14；路径=/; 域=.example.com，drupal_user=foo；过期=格林威治标准时间 2013 年 3 月 18 日星期一 23:48:14；路径=/; 域=.example.com，drupal_uid=543；过期=格林威治标准时间 2013 年 3 月 18 日星期一 23:48:14；路径=/; 域=.example.com，isib_name=foo+bar；过期=格林威治标准时间 2013 年 3 月 18 日星期一 23:48:14；路径=/; 域=.example.com

# php - 每次 while 循环运行时调用 javascript 以提供独特的波形

> ID：15487906
> 
> 赞同：3
> 
> 时间：2013-03-18T22:10:14.943
> 
> 标签：php, javascript, jquery, mysql, while-loop

我正在使用[wavesurfer.js](https://github.com/katspaugh/wavesurfer.js)为音频剪辑生成波形，我遇到的问题是我有多个音频文件被拉入一个`php` `while`循环，而 javascript 似乎只为返回的第一条记录运行..

我将在下面发布我尝试过的内容，如您所见，我试图使其独一无二并运行每个循环，但我已经用尽了想法并在互联网上到处搜索，但没有任何帮助。

**PHP：**

```
 global $db;
 $select = $db->query("SELECT * FROM audio ORDER BY id DESC");
  while ($row = $select->fetch_assoc()) {
   echo $row["track_title"] . " by " . $row["artist"] . "<br />";
   $path = $row['path'];
   $path = str_replace("..", "", $path);
   $id = $row['id'];

    echo"
     <div class='waveid' id='".$id."'>
     <div class='path' id='".$path."'>
     <div class='cursor' id='wave-cursor'></div><canvas id='wave' class='wave-".$id."' width='1024' height='128'></canvas>
     </div>
     </div> 
    ";
    } 
```

**JAVASCRIPT：**

```
var id = $(".waveid").attr('id');
var path = $(".path").attr('id');

console.log(id);
console.log(path);

var wavesurfer = Object.create(WaveSurfer);

wavesurfer.init({
canvas: document.querySelector('.wave-'+id),
waveColor: 'violet',
progressColor: 'purple'
});

wavesurfer.load(path); 
```

总而言之，我有一个 while 循环返回所有歌曲数据，其中 mp3 存储在一个文件夹中，文件路径存储在数据库中并正在返回。我正在尝试为每个文件制作一个独特的波形，但由于某种原因，我只能设法为第一条记录获取一个波形。任何帮助将不胜感激。

编辑：如果有人想编辑标题或任何内容/标签，请随时这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:52:54.227

PHP（你不需要使用 div）：

```
while ($row = $select->fetch_assoc()) {
 echo $row["track_title"] . " by " . $row["artist"] . "<br />";
 $path = $row['path'];
 $path = str_replace("..", "", $path);
 $id = $row['id'];

 # make sure $path doesn't contain ' character
 echo "<canvas class='wave' data-path='$path' data-id='$id' width='1024' height='128'></canvas>";
} 
```

JS（这会引起轰动）：

```
$('.wave').each(function(){
 var wavesurfer = Object.create(WaveSurfer);

 wavesurfer.init({
  canvas: this,
  waveColor: 'violet',
  progressColor: 'purple'
 });

 wavesurfer.load($(this).data('path'));
}); 
```

# javascript - 用于删除特殊字符的 Javascript 函数

> ID：15487913
> 
> 赞同：0
> 
> 时间：2013-03-18T22:10:40.087
> 
> 标签：javascript, jquery

我有一个函数可以在文本字段中替换特殊字符并将所有文本更改为大写。`<script>`如果我直接在标签内添加函数：

```
<script language="JavaScript" type="text/javascript">
function ...
<script/> 
```

该脚本按预期工作。

如果我将其包含为外部文件：

```
<script type="text/javascript" src="<?php echo $dir_js; ?>/plugins/replace.js"></script> 
```

仅更改为大写有效，不会删除特殊字符。

有什么帮助吗？怎么了？

```
function retiraAcento(palavra,obj)
{
  com_acento = 'áàãâäéèêëíìîïóòõôöúùûüçÁÀÃÂÄÉÈÊËÍÌÎÏÓÒÕÖÔÚÙÛÜÇ';
  sem_acento = 'aaaaaeeeeiiiiooooouuuucAAAAAEEEEIIIIOOOOOUUUUC';
  nova='';
  for(i=0;i<palavra.length;i++) {
    if (com_acento.search(palavra.substr(i,1))>=0) {
      nova+=sem_acento.substr(com_acento.search(palavra.substr(i,1)),1);
    }
    else {
      nova+=palavra.substr(i,1);
    }
  }
  obj.value = nova.toUpperCase();
}

$(":input").live('blur', function() {
  retiraAcento(this.value, this);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:13:02.840

您应该将代码包装在 ready 事件上：

```
$(document).ready(function() {
  $(":input").live('blur', function() {
    retiraAcento(this.value, this);
  }); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T22:25:25.587

我的猜测是您的外部文件与主文件的编码不同。您应该确保两个文件都具有 UTF-8 编码，此外，您还应该确保您使用的任何服务器都在为具有正确内容类型的文件提供服务。

如果文件具有不同的编码，这将导致您遇到问题，因为`á`您输入的内容与`á`您的 javascript 文件中的内容不匹配 - 因此无法找到并删除。

另一种方法是不在您的外部 JavaScript 中使用硬编码值，而是使用 RegExp 检查并在此处找到信息：

[http://www.regular-expressions.info/unicode.html#grapheme](http://www.regular-expressions.info/unicode.html#grapheme)

# sql - 向公众公开身份标识符的安全性

> ID：15487918
> 
> 赞同：4
> 
> 时间：2013-03-18T22:10:51.217
> 
> 标签：sql, sql-server, asp.net-mvc, security, owasp

我正在使用一个将数据保存在 sql server 数据库中的 asp.net mvc 应用程序。它有一个客户表，显然将客户存储在系统上。客户的 id 是一个身份列，其中包含客户的唯一标识符，每个新记录都会自动递增 1。

对于 mvc 应用程序中的某些控制器操作，包括客户 ID。我理解在获取请求中，这会产生一个安全漏洞。它使外部机构能够获得有关数据库结构等的知识。

在控制器操作中从使用客户 ID 更改为另一个更模糊的字段会造成很大的困难。有没有其他方法可以安全地暴露 id？我正在考虑将 id 映射到另一个 id 并将其存储在 session 中，公开这个替代 id 但不幸的是 session 存储对我不可用。在某些情况下，暴露的 id 可能需要在用户会话之后维护。我看到的另一种方法是将标识列上的种子增加到 1 以外的数字，比如说随机数 88。这意味着暴露的 id 对外部用户的意义较小。

对以上内容有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:33:58.967

如果您真的担心它，只需确保它仅显示在授权操作上（需要用户登录）。不过，公开主键本身并没有什么“不安全”的地方。密钥在数据库上下文之外没有任何意义，如果有人获得了对您数据库的访问权限，那么他们知道特定客户的 id 是您*最不*关心的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:45:48.143

如果我的理解正确，映射到另一个像 Guid 这样的 id 并传递 Guid 应该可以正常工作。您不需要在会话中“存储”CustomerId。您可以在再次需要时使用 Guid 来调用 CustomerId。

# rabbitmq - 使用 RabbitMQ 进行分布式通信和处理

> ID：15487931
> 
> 赞同：3
> 
> 时间：2013-03-18T22:12:11.010
> 
> 标签：rabbitmq, distributed-computing, apache-zookeeper, worker

我目前正在重新设计一个系统并且遇到了一些麻烦。

# 要求

我有一个消息队列（一个[RabbitMQ](http://www.rabbitmq.com/)队列）和一些从该队列消耗的服务。每条消息都有一个 id 表示它是一个组的一部分，还有一个时间戳来帮助表示顺序。

从队列中消费的每个服务至少负责处理一个组，但可以负责多个。服务可以跨多个服务器运行。

系统必须允许可变数量的消费服务，并允许在服务初始化/销毁时自动重新分配 id。

消息必须实时处理，不允许缓冲。消息必须在其 ID 组内按顺序处理。

* * *

# 问题/限制

Rabbit 不允许在获取之前遍历队列，或者从基于模式的单个队列中获取。

消息中的顺序很重要。虽然我们可以简单地获取最重要的消息并在它们与我们的 id 不匹配时拒绝它们，但这会引入一个问题

为了强制执行顺序处理，我们需要将预取计数值设置为 1。然而，这会引入活锁的可能性，其中服务不断地获得队列的头部，但没有服务获得它可以得到的消息过程，或者很少会严重影响性能。

相反，如果我们将预取计数设置得足够高以合理地缓解这种情况，则它允许无序处理。

在任何一种情况下，将预取计数设置为较低的值似乎都会严重影响性能。

* * *

# 可能的解决方案

## 多个兔子队列

为每个消费者自动生成一个兔子队列并使用[主题交换](http://www.rabbitmq.com/tutorials/tutorial-five-python.html)来自动路由消息似乎是一种可能的解决方案。

但是，这会产生一个问题，如果我们需要在处理该服务的队列之前减少使用服务的数量，那么消息将会丢失。如果服务死亡并且无法重新启动替换，也会导致消息丢失。

## 协调员/工人

我目前的想法是有一个协调服务，它从队列中读取并根据 id 将消息分发给工作人员。

虽然这会引入单点故障，但可以创建多个协调进程，这些进程将通过[zookeeper](http://www.zookeeper.com)传达哪个工作人员负责给定 id 。

这将需要以下模式之一；

*   **推送：**每个协调员都会维护一份所有工作人员的列表，并在他们进来时推送消息。
*   **全局拉取：**每个工作人员将轮询所有协调器以获取消息并在本地对它们进行排序和处理，
*   **本地拉取：**工作人员将保持与单个协调器的连接，协调器将在它们之间传递消息。

* * *

# 问题

1.  Master/Worker 模型是解决这个问题的可行方案吗？如果是这样;
    *   协调器如何跨服务器与工作人员进行通信？（同时避免如上所述的多个兔子队列问题）
    *   类似地，如果我们使用前面概述的 Local Pull 方法，协调器如何在彼此之间传递消息。
2.  还有其他我忽略的解决方案吗？

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:54:05.710

对于这个问题，这可能不是正确的 Stack Exchange，但我会通过在几件事上纠正你来尝试一下。

> 为了强制执行顺序处理，我们需要将预取计数值设置为 1。然而，这会引入活锁的可能性，其中服务不断地获得队列的头部，但没有服务获得它可以得到的消息过程，或者很少会严重影响性能。

我不明白这个问题......只有服务可以处理所有消息才能订阅队列。也只绑定队列可以处理的路由键。

> 在任何一种情况下，将预取计数设置为较低的值似乎都会严重影响性能。

基本上预取计数应该等于工人的数量，否则你得到的好处很少。问题是你不能在不丢失顺序的情况下做两件多件事情（即并行运行的多个工作）。

因此，由于多个并行工作人员而不是预取计数而导致顺序丢失。

> 如果服务死亡并且无法重新启动替换，也会导致消息丢失。

不，这不应该发生。如果您的服务没有`ack`消息，则消息不会丢失。只是不要删除队列并使它们持久。但是，如果您动态添加队列和绑定，我认为这是您想说的，那么如果绑定（路由键）没有及时声明，您可能会丢失消息。[**您可以通过死信交换来处理这个问题**](http://www.rabbitmq.com/dlx.html)。

您的一般问题是我认为您希望能够将工作人员添加到队列中并仍然保持秩序。这是一个很难大规模解决的问题。[你应该看看 Twitter 是如何做到这一点的。](http://engineering.twitter.com/2010/06/announcing-snowflake.html)

有几个想法是弄清楚你可以“散列”什么以及你可以在什么上排队。例如，您可以为某个地理区域中的所有用户排队，从而为这些地区的人们保留顺序。这实际上取决于您的业务问题。

# cocos2d-iphone - 如何使点击工作以及如何延迟 init 中的函数？XCODE

> ID：15487933
> 
> 赞同：1
> 
> 时间：2013-03-18T22:12:14.077
> 
> 标签：cocos2d-iphone, kobold2d

```
 blue = [CCMenuItemImage itemFromNormalImage:@"blue.png" selectedImage:@"blueclick.png"];
    [blue setPosition:ccp(175, 350)];
    blue.scale = .75;
    [self addChild:blue  z: 5];

 id move = [CCMoveBy actionWithDuration:1.0f position:CGPointMake(334, 321.75)];
    [blue runAction:move]; 
```

为什么单击它时它不会变为第二个图像（blueclick.png）？另外，我将如何延迟此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:26:17.617

尝试使用此代码延迟运行操作：

```
 id delay    = [CCDelayTime actionWithDuration:delay];
      id move     = [CCMoveTo actionWithDuration:0.4 position:ccp(x, y)];
      id sequence = [CCSequence actions:delay, move, nil];
      [card.sprite runAction:sequence]; 
```

# xcode - 我可以在 xcode 中动态更改“源树”条目吗？

> ID：15487939
> 
> 赞同：0
> 
> 时间：2013-03-18T22:12:36.117
> 
> 标签：xcode, xcode4.6

我有一个项目 (B) 和 (C) 使用的项目 (A)。在 Xcode->preferences->locations 我有一个名为 PROJECT_SRC 的设置，它项目 A 引用，当我在 B.xcodeproj 上工作时，它被设置为 B 的源路径。如果我想在 C.xcodeproj 上工作，我必须**手动更改**设置以指向 C 的源代码。有没有办法动态改变这个设置？

提前致谢！克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:17:19.733

所以我认为我需要做的是使用系统事件 plist 编辑功能。我可以通过苹果脚本做到这一点（我的不会完全像这样，但你明白了）：

```
tell application "System Events"
    set plistFile to property list file "/path/to/file.plist"
    tell plistFile
        tell property list item "array name"
            set value of property list item "x" to "..."
        end tell
    end tell
end tell 
```

[我在这里](https://discussions.apple.com/thread/3236539?start=0&tstart=0)的苹果论坛中找到了这个

您需要编辑以更改源路径的 plist 位于 Users/userName/Preferences/come.apple.dt.Xcode.plist

# javascript - Razor2 网页发布 document.createElement

> ID：15487940
> 
> 赞同：1
> 
> 时间：2013-03-18T22:12:40.690
> 
> 标签：javascript, jquery, razor, asp.net-webpages, razor-2

我正在处理 Razor 2 网页表单。一些元素，即：一系列选择元素，由 jQuery 创建并基于复选框选择附加到 div。这些元素出现在页面的 UI 上并按预期工作，但它们不在页面的源视图中。我的问题是我似乎无法从这些元素中检索值。Razor 在页面加载时修改的其他元素可以完美运行。关于如何获取在 javascript 事件上创建的元素的值的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:47:34.160

`name`如果您想在一个`POST`or`GET`请求之后在服务器上引用它们的值，您必须确保将属性值添加到表单元素。它是`name`充当键`Request.Form`和`Request.Querystring`集合的值。如果您不提供 的值`name`，则该项目不包含在集合中。

# python - 从大量条目创建可迭代列表

> ID：15487944
> 
> 赞同：1
> 
> 时间：2013-03-18T22:12:50.613
> 
> 标签：python, arrays, numpy

我有一个包含超过 600,000 个条目的文件。它基本上包含：

```
user1 choice1
user1 choice2
user2 choice3
user2 choice1
.
.
.
.
user400000 choice60 
```

当我尝试通过常用方法（如下所示）创建字典时，idle 停止响应。

```
d = {}
with open("file.txt") as f:
    for line in f:
       (key, val) = line.split()
       d[key] = val 
```

我想从这个大的条目文件中轻松快速地操作列表/字典。获得它的最有效方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:20:15.950

[`pandas`](http://pandas.pydata.org)允许轻松操作此数量的数据。您的数据是一系列`user`带有标量数据点的标签。

```
import pandas as pd
s = pd.read_csv('file.txt', sep=' ', header=None, index_col=0, squeeze=True) 
```

该指令要求`pandas`将文件数据加载到 Series 对象中：

*   列以空格分隔 ( `sep=' '`)
*   该文件没有标题标题并且第一行已经是数据（`header=None`）
*   我们想以第一列作为索引来操作日期 ( `index_col=0`)
*   默认情况下，`pandas`构建一个`DataFrame`对象，但如果它包含单列数据，我们可以要求一个`Series`代替 ( `squeeze=True`)

`s`是一个`Series`在用户标签上索引的对象，我们现在可以使用它来访问数据：

```
In [37]: s.head()
Out[37]: 
0
user0    104106
user1     31024
user2     82993
user3    211414
user4    499070
Name: 1

In [38]: s['user3']
Out[38]: 211414 
```

使用`'file.txt'`600000 行，加载`s`. 以下类似 dict 的访问`s`是立即的。

# google-app-engine - 图片不显示在使用 GoogleAppEngineLauncher 创建的网站上？

> ID：15487952
> 
> 赞同：1
> 
> 时间：2013-03-18T22:13:17.597
> 
> 标签：google-app-engine

当我在本地查看页面时，它们会显示出来。但是，当我部署和查看时，我得到一个 404 或者只显示替代文本。

该站点是troop-398.appspot.com。

这是我的 index.html 中的片段：

```
`<img src="images/IMG_0190.jpg" alt="Bluejay Point" width="760"/>` 
```

这是我的 app.yaml：

```
application: troop-398
version: 1
runtime: python
api_version: 1

handlers:
- url: /(.*\.(gif|png|jpg|ico|js|css))
  static_files: \1
  upload: (.*\.(gif|png|jpg|ico|js|css))

- url: /robots.txt
  static_files: robots.txt
  upload: robots.txt 

- url: .*
  script: main.py

- url: /images
  static_dir: static/images 
```

我的目录结构是：

```
folder website
  files including index.html
  folder images
     IMG_0190.jpg 
```

我很感激任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:23:27.730

你得到你的静态目录都错了尝试这样的事情：

```
- url: /assets
  static_dir: assets 
```

在您的资产文件夹中，您可以创建 3 个其他文件夹

```
root
  index.html
  contact.html

  -assets
       js
       img
       css 
```

然后在您的 index.html 页面中，您可以通过以下方式引用您的静态文件：

```
<img src="/static/img/IMG_0190.jpg" alt="Bluejay Point" width="760"/> 
```

# javascript - 你可以在同一个模板中有重复的 dojo-data-attach-points 吗？

> ID：15487957
> 
> 赞同：0
> 
> 时间：2013-03-18T22:13:47.550
> 
> 标签：javascript, dojo

我创建了一个模板化小部件，模板中有两个地方我想在运行时使用相同的值进行更新。类似于：

```
<div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'top'">
  Site: <span data-dojo-attach-point="siteNameNode">Placeholder</span>
</div>

...

<div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'bottom'">
  Site: <span data-dojo-attach-point="siteNameNode">Placeholder</span>
</div> 
```

在我的 Javascript 中，我有：

```
_setSiteNameAttr: { node: "siteNameNode", type: "innerHTML" },
...
this.set("siteName", "Your Site Name"); 
```

当代码运行时，仅更新第二个 siteNameNode。这是否意味着附加点在模板中必须是唯一的，或者是否有不同的方法来处理重复项？如果不允许重复，是否有一种通用的方法可以一次更新多个值，或者我是否需要为节点提供不同的附加点名称？

谢谢。我正在使用 Dojo 1.8.3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T08:06:09.587

附加点是对 DOM 节点的引用。如果您尝试将两个 DOM 节点连接到同一个附加点，我认为这不会奏效，因为您有两个不同的 DOM 节点（这就是为什么只有最后一个被存储为附加点的原因）。

但是为什么不将节点的内容设置为相同的值，如下例所示？只需将您的第二个附加点重命名为即可`siteNameNode2`。

```
html.set(this.siteNameNode, "Your Site Name");
html.set(this.siteNameNode2, "Your Site Name"); 
```

我正在使用该`dojo/html`模块将两个 DOM 节点的内部 HTML 设置为相同的内容，但您也可以执行以下操作：

```
this.siteNameNode.innerHTML = "Your Site Name"; 
```

您的附加点的 DOM 节点在您的小部件中存储为具有相同名称的属性，因此很容易访问/修改。

# php - 如果多个包覆盖 symfony 中的同一个控制器会发生什么？

> ID：15487959
> 
> 赞同：0
> 
> 时间：2013-03-18T22:13:57.363
> 
> 标签：php, inheritance, symfony, bundle

我想制作一个捆绑包，我希望其他捆绑包通过覆盖功能或添加到它来扩展。SYmfony 支持开箱即用（[http://symfony.com/doc/2.0/cookbook/bundles/inheritance.html](http://symfony.com/doc/2.0/cookbook/bundles/inheritance.html)）但是如果多个包试图覆盖同一个控制器会发生什么。它是否具有类似链的效果，即每个捆绑包都在其之前获得捆绑包的响应，或者仅注意到扩展功能的最后一个捆绑包？如果是后者，symfony 有没有办法允许链式方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:50:56.750

我认为您对“覆盖”的工作方式感到困惑。当您扩展一个类时，您可以通过创建具有相同名称的方法来“覆盖”基类中的方法，但实际上您并没有以任何方式影响基类，因此多个类可以扩展同一个基类而无需与彼此。

在 Symfony2 中，从多个不同的包中扩展一个基本控制器是绝对没问题的。在这个基类中定义的任何方法都将在您用来扩展它的类中可用。根据您对此的需求，您可能还希望研究可以定义为允许在应用程序中全局访问方法的[服务。](http://symfony.com/doc/master/book/service_container.html)

# jquery - 位于导航菜单顶部的子菜单

> ID：15487960
> 
> 赞同：0
> 
> 时间：2013-03-18T22:13:58.300
> 
> 标签：jquery, html, css

我无法将子菜单放在主导航栏下方，我什至无法将子菜单的固定位置设置为边距，不知道我在这里做错了什么。全宽 Jquery 动画悬停菜单。

`Demo` [http://jsfiddle.net/MwChT/110/](http://jsfiddle.net/MwChT/110/)

任何人都知道可能是什么问题，请给我一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:21:20.700

尝试添加`top: 50px;`到 CSS `#navigation_horiz ul li #dropdown_one`

其中 50px 是`<li>`项目的高度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:22:32.850

你可以加

```
#navigation_horiz .dropdown {
    //all other css
    //just add
    margin-top:10px;
} 
```

# jquery - 关闭之前的fancybox事件未触发

> ID：15487961
> 
> 赞同：1
> 
> 时间：2013-03-18T22:14:01.037
> 
> 标签：jquery, asp.net, fancybox

我正在使用jquery fancybox，我想在fancybox弹出之前隐藏一个包含pdf文件的iframe（这工作正常），然后在fancybox关闭之前我想让iframe再次可见，因为z-index问题与pdf iframe。我的问题是 beforeClose 甚至似乎没有触发。这是我放在图像和 iframe 下方的代码。

```
<script src="http://www.elevateweb.co.uk/wp-content/themes/radial/jquery.fancybox.pack.js" type="text/javascript"></script>

   var frame = document.getElementById('Frame');

   jQuery("#zoom_08").bind("click", function (e) {
         e.preventDefault();
         var ez = $('#zoom_08').data('elevateZoom');
           $.fancybox(ez.getGalleryList());
           frame.style.display = 'none';
           return false;
    });

    $.fancybox({
      beforeClose: function () {
       frame.style.display = '';
             }
    }); 
```

我还是 Jquery 的新手，所以我不确定我是否理解我做错了什么。提前感谢您的帮助。

```
<iframe id="Frame"  width="680" height="1000" runat="server" /> 
```

在 Page_Load 我执行以下操作来设置 iFrame 的 src

```
 Frame.Attributes.Add("src", "./Files/" + Request.QueryString["certfile"].ToString()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T00:01:29.253

试试这个

```
jQuery("#zoom_08").bind("click", function (e) {
    e.preventDefault();
    var ez = $('#zoom_08').data('elevateZoom');
    jQuery.fancybox(ez.getGalleryList(), {
        beforeShow: function () {
            frame.style.display = 'none';
        },
        afterClose: function () {
            frame.style.display = ''; // or .display = "block"; ?
        }
    });
    return false;
}); 
```

...并删除：

```
$.fancybox({
  beforeClose: function () {
   frame.style.display = '';
         }
}); 
```

因为那`beforeClose`将是一个什么都不会打开的花式盒子。

# php - twitter bootstrap modal不通过php发布

> ID：15487970
> 
> 赞同：0
> 
> 时间：2013-03-18T22:14:35.640
> 
> 标签：php, twitter-bootstrap

我是一个完全的菜鸟，遇到了障碍。我正在使用 twitter 引导程序，并试图通过 php 将表单模式发布到 mysql 服务器。这是我的代码：

HTML (index.html):

```
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="ModalLabel">****</h3>
  </div>
  <div class="modal-body">
    <form id="modal-form" accept-charset="UTF-8" method="POST" action="submitform.php" data-remote="true" >
      <p>Give us your email, and we'll send you an invitation</p>
      <fieldset>
    <input type="text" name="email" id="email" class="reqInput" placeholder="Email Address">
    <input type="text" name="name" id="name" class="reqInput" placeholder="Full Name">
    <input type="text" name="company" id="company" class="reqInput" placeholder="Company">
    <input type="text" name="title" id="title" class="reqInput" placeholder="Title">
      </fieldset>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <a id="modal-form-submit" type="submit" name="submit" class="btn btn-primary" href"#">Submit</a>
  </div>
</form>
</div> 
```

PHP（提交表单.php）：

```
<?php
$host="localhost"; // Host name 
$username="***"; // Mysql username 
$password="***"; // Mysql password 
$db_name="users"; // Database name 
$tbl_name="userRequests"; // Table name

// Connect to server and select databse.
$con = mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from form 
$name=$_POST['name']; 
$company=$_POST['company'];
$email=$_POST['email'];
$title=$_POST['title'];

if(strlen($name) > 1 && strpos($email, "@")){

// To protect MySQL injection (more detail about MySQL injection)
$name = mysql_real_escape_string(stripslashes($name));
$company = mysql_real_escape_string(stripslashes($company));
$email = mysql_real_escape_string(stripslashes($email));
$title = mysql_real_escape_string(stripslashes($title));

$sql="INSERT INTO $tbl_name (FullName, Company, Email, Title) VALUES ('$name', '$company', '$email', '$title')";

exit;
}
?> 
```

我正在检查查尔斯，奇怪的是，在我收到本地命令错误之前，我什至没有看到大约 45 秒的 POST 发送。因此，我不知道如何进行。我确定我错过了几件事。任何建议表示赞赏。

PS 我知道 SQL 数据库正在工作，因为它连接到我要替换的旧 php 站点。字段是文本等。问题出在我上面的代码上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:21:02.830

我认为问题在于提交按钮，而不是

```
<a id="modal-form-submit" type="submit" name="submit" class="btn btn-primary" href"#">Submit</a> 
```

利用

```
<input type="submit" id="modal-form-submit" name="submit" class="btn btn-primary" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:18:17.460

你错过了`}`你的结束`if(strlen(....`

更新：

HTML

```
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="ModalLabel">****</h3>
  </div>
  <div class="modal-body">
    <form id="modal-form" accept-charset="UTF-8" method="POST" action="submitform.php" data-remote="true" >
      <p>Give us your email, and we'll send you an invitation</p>
      <fieldset>
    <input type="text" name="email" id="email" class="reqInput" placeholder="Email Address">
    <input type="text" name="name" id="name" class="reqInput" placeholder="Full Name">
    <input type="text" name="company" id="company" class="reqInput" placeholder="Company">
    <input type="text" name="title" id="title" class="reqInput" placeholder="Title">
      </fieldset>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <input id="modal-form-submit" type="submit" name="submit" class="btn btn-primary" href"#" value="Submit"/>
  </div>
</form>
</div> 
```

您不能让`<a>`标签具有输入类型。这应该发布您的代码。为什么你`exit;`的PHP文件上有？

# php - 使用自定义字体将 SVG 转换为 PDF/JPG/PNG

> ID：15487972
> 
> 赞同：0
> 
> 时间：2013-03-18T22:14:39.697
> 
> 标签：php, pdf, svg, tcpdf, imagick

我有一个应用程序可以输出带有文本和图像的 SVG 文件。SVG 文件中的文本元素具有自定义字体。

我需要 PDF 文件来像在 SVG 上一样显示这些文本元素。我试图用 TCPDF 做到这一点。SVG 到 PDF 的转换成功，但是当我尝试将 PDF 转换为 JPG 或 PNG 时，没有显示文本。我正在使用 Imagick 将 PDF 转换为 JPG。

有谁知道如何在 JPG 图像中包含文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:32:17.873

尝试使用 Inkscape。这是一个开源的 SVG 编辑器。您可以保存为 PDF，导出为 PNG，学习曲线足够适中。

它不直接支持jpeg。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:09:05.260

您确实可以从 PHP 调用 Inkscape - 我已经完成了，请参见[此处](https://stackoverflow.com/a/10056329/472495)。使用这种方法，您可以将 SVG 渲染为您需要的所有格式：PDF、PNG 和 JPG。

如果您的服务器上安装了自定义字体，那么您可以使用这些字体进行渲染 - 请注意，这可能会使您成为发布者，因此您需要确保您拥有使用这些字体（或您的用户）进行渲染的许可证做，取决于它的内容）。

默认情况下，Inkscape 很少安装在 Web 服务器上，因此您必须使用具有 root 访问权限的服务器（例如 VPS）并自行安装。

您应该记住，Inkscape 中存在一个[安全漏洞](http://blog.jondh.me.uk/2012/09/inkscape-xml-entity-vulnerabilities/)，它允许用户创建的文件窃取服务器文件并导致服务器内存不足（即崩溃）。该修复程序现已公开，但我不确定它是否已发布。因此，如果您正在渲染用户上传的 SVG 文件，请小心清除。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-23T22:42:53.673

你可以试试alt-soft 的[xml2pdf](http://alt-soft.com)

# php - 是否可以在一个请求中为组的所有成员发送通知？

> ID：15487973
> 
> 赞同：1
> 
> 时间：2013-03-18T22:14:40.497
> 
> 标签：php, facebook, facebook-graph-api, notifications, facebook-group

我正在为 Facebook 开发一个应用程序，我们使用 Facebook 组来连接用户。当事件发生时，我会向该组的所有成员（事件发生的地方）发送通知。

在研究了如何使用 PHP 的 Facebook 框架向用户发送通知后，我编写了这个方法：

```
public function sendNotification($user, $text, $href){
    $data = array(
        'href' => $href,
            'access_token' => $this->appAccessToken,
            'template' => $text
    );

    $notification = $this->fb->api("/$user/notifications", 'POST', $data);
} 
```

请注意，此代码将一次为一个用户发送通知，因此我需要发送 N 条通知，特别是针对该组的每个成员。

有没有办法在单个请求中发送通知以传递给组的所有成员（由其 ID 指定）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:28:28.477

No, a Graph API POST request reaches only one user:

```
POST /{only_one_user_id}/notifications?access_token= … &template= … &href= … 
```

You have to loop on each member of the group.

# c - 如何引用可变长度结构

> ID：15487980
> 
> 赞同：0
> 
> 时间：2013-03-18T22:15:22.183
> 
> 标签：c, struct

下面的代码拒绝在 SDCC 中编译，因为我使用了灵活的数组成员（`"This line"`s）。

```
/** header of string list */
typedef struct {
    int nCount;
    int nMemUsed;
    int nMemAvail;
} STRLIST_HEADER;

/** string list entry data type */
typedef struct {
    int nLen;
    char str[];                    // This line
} STRLIST_ENTRY;

/** string list data type */
typedef struct {
    STRLIST_HEADER header;
    STRLIST_ENTRY entry[];         // This line
} STRLIST;

int main()
{
    return 0;
} 
```

但是，我必须访问的数据已经以这种方式设置（我通过指针访问现有内存，而不是破坏堆栈），并且使用结构指针可以生成非常干净的代码。不幸的是，SDCC 不喜欢这样。我可以在代码中引用可以干净编译的内存结构的另一种方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:17:28.050

通常的方法是给数组成员一个大小：

```
typedef struct {
    int nLen;
    char str[1];
} STRLIST_ENTRY; 
```

这让编译器很高兴。

**编辑**：您可以使用`--std-c99`或`--std-sdcc99`开关让 SDCC 理解您的原始代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:23:17.523

```
typedef struct {
    int nLen;
    char *str;                    
} STRLIST_ENTRY; 
```

我会这样做，并在准备好使用它时 malloc 数组。您使用所有大写字母来定义结构名称是否有任何特殊原因？通常这些在大多数编码标准中都是小写的。

# jquery - 使字段元素接收可放置

> ID：15487986
> 
> 赞同：0
> 
> 时间：2013-03-18T22:16:01.127
> 
> 标签：jquery, input, textbox, field

我可以将任何文件从我的文件窗口拖放到某些字段中，例如我的 url 栏，并获取文件地址。有没有办法通过 jquery 或常规 html 属性在文本框或输入元素上发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:21:34.943

您可以使用 HTML5 拖放：[http](http://html5demos.com/drag) ://html5demos.com/drag和[http://www.html5rocks.com/en/tutorials/dnd/basics/](http://www.html5rocks.com/en/tutorials/dnd/basics/)

# php - MySQL 和 BLOB 字段无法从 PHP 上传/显示图像（但它可以手动工作）/二进制/十六进制转储？

> ID：15487987
> 
> 赞同：2
> 
> 时间：2013-03-18T22:16:07.313
> 
> 标签：php, html, mysql, binary, hex

由于这个问题，我变得很生气。这是我的数据库：

```
Cod_Classification  int(11)
Cod_App         char(10)
ID_eventclass   char(5)
Descrizione char(35)
Active          char(1)
Logo_Eve    blob 
```

我使用这个表格来填充它：

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Prova di Upload</title>
</head>

<body>

<form action="UploadImage.php" method="post" enctype="multipart/form-data">
    <p>
    <label for="ID_evcls">Codice evento</label> <input  type="text" name="ID_evcls" maxlength="5" size="10"> <br>
    <label for="Desc">Descrizione</label> <input  type="text" name="Desc" maxlength="35" size="40"> <br>
    Logo da utilizzare: <input name="userfile" type="file" /><br>
    <input type="submit" value="Send File" />
    <p>
</form>

</body>
</html> 
```

这是 PHP 部分：

```
<?php
$db_host = "localhost";
$db_user = "USERNAMEDB";
$db_database = "NAMEDATABASE";
$db_password = "*********";
$db_tabeventclassification = "adv_eventclassification";

$ID_ev = $_POST[ID_evcls];
$ID_ds = $_POST[Desc];
$ID_logo = $_FILES['userfile']['name'];
$ID_tmp = $_FILES['tmp_name'];

echo $ID_ev.' '.$ID_ds.' '.$ID_logo.' '.$ID_tmp.'<br><br>';
move_uploaded_file($_FILES['userfile']['tmp_name'], $_FILES['userfile']['name']);
echo '<br><img src="'.$ID_logo.'"><br>';

$datimmagine = file_get_contents($ID_logo);
echo '<br><img src="data:image/jpeg;base64,'.base64_encode($datimmagine).'"><br>';

$connessione = mysql_connect($db_host,$db_user,$db_password);
echo "OK, database is connected<br><br>";

$query='INSERT INTO '.$db_tabeventclassification.' (`Cod_App`, `ID_eventclass`, `Descrizione`, `Active`, `Logo_Eve`) VALUES ("RCWORLDTLV","'.strtoupper($ID_ev).'","'.$ID_ds.'","1","'.addslashes(base64_encode($datimmagine)).'")';
$result = mysql_db_query("AdVisual_02_", $query ,$connessione); 

?> 
```

当我启动 html 并上传图像时，我可以在屏幕上完美地看到，如果我使用 PhpMyAdmin，我可以看到带有数据的 blob 字段。但是当我从数据库中检索数据时，我总是有一个损坏的链接图像结果。这里有我为显示数据而构建的应用程序：

```
<?php
$AdVisualV2MANAGER_ver='0.0030';

echo 'AdVisual V2 Backend Manager Versione '.$AdVisualV2MANAGER_ver.'<br>';
// echo 'Television ID: '.$Host_Cod_App.'<br>';

$db_host = "localhost";
$db_user = $db_prefix."AdVisualV02USR";
$db_database = $db_prefix."AdVisual_02_";
$db_password = "adv2pwpwpw";
$db_tabconfig = "adv_config";
$db_tabpreroll = "adv_preroll";
$db_tabimpressions = "adv_videoimpressions";
$db_tabevents = "adv_events";
$db_tabeventclassification = "adv_eventclassification";
mysql_connect($db_host,$db_user, $db_password);

echo "Connection to the Server opened; Database is ".$db_database." opening result is ".mysql_select_db($db_database)."<br>";
echo "Now listing events<br><br>";

$result = mysql_query("SELECT * FROM ".$db_database.".".$db_tabeventclassification." WHERE `Active` =1");
if (!$result) {
    echo 'Could not run query: ' . mysql_error();
    exit;
}

echo '<table width="750" border="1">
            <tr>
                <th width="100" align="center" valign="top"><b>EVENTO</b></th>
                <th width="300" align="center" valign="top"><b>DESCRIZIONE</b></th>
                <th width="50" align="center" valign="top"><b>LOAD</b></th>
                <th width="200" align="center" valign="top"><b>LOGO</b></th>
            </tr>';
$numerorighe = mysql_num_rows($result);
for ($i=0;$i<$numerorighe;$i++) {
    $riga = mysql_fetch_row($result);
    echo '<tr>';
    echo '<td align="left" valign="top">'.$riga[2].'</td>';
    echo '<td align="left" valign="top">'.$riga[3].'</td>';
    $button[i]='<input type="button" id="bt"'.$i.' onclick="LoadJpg('.$i.')" value="Load '.$i.'-->">';
    echo '<td align="center" valign="top">'.$button[i].'</td>';
    echo '<td align="center" valign="top"> <img src="data:image/jpeg;base64,'.base64_encode($riga[5]).'"></td>';
    echo '</tr>';
}

echo '</table>';

?>

<script>
function LoadJpg(scelta)
{
    document.write('<input type="file" name="datafile" accept="image/jpeg">');
}
</script> 
```

但是，如果我使用 phpmyadmin 在 blob 字段中手动上传相同的图像，它会完美运行。即使我转储内容，总是使用 phpmyadmin，下载 .bin 文件并将其重命名为 .jpg，它也能正常工作。

问题是，当我使用 phpmyadmin 上传图像时，我看到它将数据转换为十六进制格式，并生成如下 SQL 语句：

```
UPDATE `AdVisual_02_`.`adv_eventclassification` SET `Logo_Eve` = 0xffd8ffe0001 ... 

0acf43a5a97a6089ffd9 WHERE `adv_eventclassification`.`Cod_Classification` = 61; 
```

我能做什么？我哪里错了？从3天开始我就变得疯狂了！！！！！！感谢任何好人会尽力帮助我 ciao

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:44:02.723

问题是您将文件保存到数据库的方式。您想显示图像内联 html，这对于 1kb 以下的非常小的图像很好，不建议用于较大的文件。在这种情况下，`base64_encode`用于输出很好，因为您的 text/html 输出文档中不能有二进制数据。但是 MySQL blob 数据类型是专门为二进制数据而设计的。

```
$query='INSERT INTO '.$db_tabeventclassification.' (`Cod_App`, `ID_eventclass`, `Descrizione`, `Active`, `Logo_Eve`) VALUES ("RCWORLDTLV","'.strtoupper($ID_ev).'","'.$ID_ds.'","1","'.mysql_real_escape_string( $datimmagine).'")'; 
```

而已。目前，您只需将图像保护为文本（base64），然后使用 base64 算法再次转换此文本以进行输出

有趣的文章阅读：

[http://www.java-samples.com/showtutorial.php?tutorialid=930](http://www.java-samples.com/showtutorial.php?tutorialid=930)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:46:43.183

`.chunk_split(base64_encode($riga[5])).`按照这个答案尝试[从 PHP 中的 MySQL 中提取 BLOB 图像数据](https://stackoverflow.com/questions/9646052/pulling-blob-image-data-from-mysql-in-php/9646126#9646126)。您的 Base64 编码图像的数据字符串可能太长，需要在将其回显到文档之前[“分块”](http://php.net/manual/en/function.chunk-split.php)，以符合 RFC 2045：

> qp 部分：= qp 部分；最大长度为 76 个字符

当您从另一个编辑器（或 BLOB 查看器）复制/粘贴时，这似乎是*“自行排序”*`echo` ，但在检索记录值时不会自动排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T23:35:54.773

为此并始终使用 PHP PDO 扩展。不推荐使用 mysql 扩展本身。

```
$pdo  = new PDO();// see reference docs for constructor arguments
$stmt = $pdo->prepare('UPDATE table set bfield=?');
$stmt->bind($image,PDO::PARAM_LOB);
$stmt->execute(); 
```

我还在您的代码中注意到您对 base64 数据进行了两次编码。将 base64_encode($riga[5]) 更改为 $riga[5] 并且您的代码应该可以工作，除非您的文本字段太小。

# css - 2s后淡入，10s后淡出动画

> ID：15487993
> 
> 赞同：0
> 
> 时间：2013-03-18T22:16:31.703
> 
> 标签：css

我有一个问题，我不知道如何解决。

我想让这个云在 2 秒后变得可见，然后在 10 秒后再次变得不可见。重要的是`px`保留我所拥有的，因为云应该：

*   旅行
*   在内容区域的开头变得可见
*   在内容区域的末尾变得不可见
*   游到无形的页面末尾。

CSS：

```
.cloud1 {
  margin:18px 0px 0px 0px;
  animation:mymove 31s infinite;
  animation-delay:0s;
  position:absolute;
  z-index:1;

  /*Safari and Chrome*/
  -webkit-animation:mymove 31s infinite;
  -webkit-animation-delay:0s;
  -webkit-opacity:0 5s;
}

@keyframes mymove
{
  from {left:1050px;}
  to {left:0px;}
}

@-webkit-keyframes mymove /*Safari and Chrome*/
{
  from {left:1050px;}
  to {left:0px;}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:24:01.580

它可以通过一个小技巧来完成。动画设置为 10 秒。你可以做这样的事情。

```
@keyframes mymove
{

    0%   {left:0px; opacity: 0;}
    20%  {left:1050px; opacity: 1; } /* This 20% will mean 2 second on a 10 seconds scale */
    100% {opacity: 0; left: 1050px; }

} 
```

[演示](http://jsfiddle.net/xtKuN/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:20:00.133

使用 css3 的关键帧动画非常“异国情调”。为什么不使用 jQuery 并确定它是跨浏览器的呢？

# twitter - 交替使用 Twitter 访问令牌（即，将一个用户的令牌用于另一个用户）？

> ID：15487996
> 
> 赞同：3
> 
> 时间：2013-03-18T22:16:50.877
> 
> 标签：twitter

假设我有 user1 和 user2 的 2 个 Twitter 访问令牌。每个人都有 180 次调用来获取特定搜索的推文。

假设 user1 在 15 分钟的窗口中使用了所有 180 次调用，我的应用程序是否可以使用 user2 的访问令牌，以便 user1 可以进行其他调用？这当然是假设 user2 在那一刻没有使用他/她的访问令牌。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T10:18:43.397

我在 PHP-Zend 中使用了 abraham 的 oAuth 库（ [https://github.com/abraham/twitteroauth ）。](https://github.com/abraham/twitteroauth)我还将用户的访问令牌存储在数据库中，并制作了以下函数来获取 App Rate Limit。

```
public function getAppLimit($user_id)
    {        

       $data = $this->getTwitterConnection($user_id);

        $connection = new TwitterOAuth(self :: CONSUMER_KEY, self :: CONSUMER_SECRET, $data['oauth_token'], $data['oauth_token_secret']);

        $rate_limit = $connection->get('application/rate_limit_status');

        return $rate_limit;        
    } 
```

现在您可以获得所有 API 速率限制。你想搜索它会给出以下数据

```
["search"] => object(stdClass)#170 (1) {
      ["/search/tweets"] => object(stdClass)#171 (3) {
        ["limit"] => int(180)
        ["remaining"] => int(180)
        ["reset"] => int(1366107386)
      }
    } 
```

现在，例如，如果用户 1 限制超过您可以使用用户 2 或用户 3 访问令牌，但在此之前您可以检查用户 2 或用户 3 速率限制。现在您可以在上面的搜索结果中看到您将获得 ['reset'] 值。这意味着它将在很长一段时间后重置。当 user1 超过限制时，您需要保存该重置参数，然后在该时间段内使用 user2 和 user3 访问令牌。当 15 分钟结束后，您可以再次使用用户 1 访问令牌。如果用户 2 和用户 3 都在该时间窗口上使用该搜索 api，您可能会警告用户 1，您可以在一段时间后进行搜索。

希望能帮助到你

# android - Google Maps Android API v2 - 简单的地图应用程序崩溃

> ID：15487998
> 
> 赞同：7
> 
> 时间：2013-03-18T22:16:52.653
> 
> 标签：android, google-maps, google-maps-api-2

我是 android 开发新手 :)

我正在尝试创建一个简单的应用程序：一个带有地图的活动。我将 HTC 1x 连接到计算机，当我尝试运行应用程序（通过 intellij IDEA）时，它崩溃了。

我已经在网络（和stackoverflow）中搜索了线索，但找不到任何线索。例如：
 - [Google Maps v2 - 错误](https://stackoverflow.com/questions/14568741/google-maps-v2-error)
 - [google map - runtimeexception - 错误膨胀类片段](https://stackoverflow.com/questions/14386631/google-map-runtimeexception-error-inflating-class-fragment/14386980#14386980)

你能告诉我为什么吗？？

谢谢，

*奥马尔*

技术细节：

```
HTC 1x 运行安卓 4.1.1
项目外部库：
 - Android 4.0 Google API 的
 - Android-Support-V4.jar
 - 谷歌播放服务.jar

```

主要活动.xml：

```
<?xml 版本="1.0" 编码="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent" >
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/map"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:name="com.google.android.gms.maps.SupportMapFragment"/>
</线性布局>

```

主要活动.Java

```
包 com.example.mapTest;

导入android.os.Bundle；
导入android.support.v4.app.FragmentActivity；

公共类 MainActivity 扩展 FragmentActivity {
    /**
     * 在第一次创建活动时调用。
     */
    @覆盖
    公共无效 onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mainActivity);
    }
}

```

清单.xml

```
<?xml 版本="1.0" 编码="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          包="com.example.mapTest"
          安卓：版本代码=“1”
          android:versionName="1.0">

    <uses-sdk android:minSdkVersion="14" android:targetSdkVersion="14" />

    <使用功能
            安卓：glEsVersion="0x00020000"
            android:required="true"/>

    <权限
            android:name="com.example.mapTest.permission.MAPS_RECEIVE"
            android:protectionLevel="签名"/>
    <uses-permission android:name="com.example.mapTest.permission.MAPS_RECEIVE"/>

    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

    <应用程序 android:label="@string/app_name" android:icon="@drawable/ic_launcher">

        <元数据
                android:name="com.google.android.maps.v2.API_KEY"
                android:value="AIzaSyAEHaDozQSyWTXl77MpGp6Wtvd5RyteV8Q"/>

        <activity android:name="MainActivity"
                  android:label="@string/app_name">
            <意图过滤器>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </活动>
    </应用>
</清单>

```

例外：

```
03-19 00:09:30.325: 错误/NotificationService(434): 忽略图标通知==0: 通知(pri=0 contentView=null vibrate=null sound=nullnull defaults=0x0 flags=0x62 kind=[null])
03-19 00:09:41.430: 错误/MediaScannerService(13421): 异常扫描文件
        android.os.DeadObjectException
        在 android.os.BinderProxy.transact（本机方法）
        在 android.media.IMediaScannerListener$Stub$Proxy.scanCompleted(IMediaScannerListener.java:100)
        在 com.android.providers.media.MediaScannerService$ServiceHandler.handleMessage(MediaScannerService.java:1007)
        在 android.os.Handler.dispatchMessage(Handler.java:99)
        在 android.os.Looper.loop(Looper.java:155)
        在 com.android.providers.media.MediaScannerService.run(MediaScannerService.java:713)
        在 java.lang.Thread.run(Thread.java:864)
03-19 00:09:48.655: 错误/ExternalAccountType(31657): 不支持的属性只读
03-19 00:09:48.900: 错误/ExternalAccountType(31657): 不支持的属性只读
03-19 00:09:51.965: 错误/EmbeddedLogger(434): 应用程序崩溃了！进程：com.example.mapTest
03-19 00:09:51.965: 错误/EmbeddedLogger(434): 应用程序崩溃了！包：com.example.mapTest v1 (1.0)
03-19 00:09:51.965：错误/嵌入式记录器（434）：应用程序标签：mapTest
03-19 00:09:51.965：错误/AndroidRuntime（22403）：致命异常：主要
        java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable
        在 com.google.android.gms.maps.GoogleMapOptions.createFromAttributes（未知来源）
        在 com.google.android.gms.maps.SupportMapFragment.onInflate（未知来源）
        在 android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:279)
        在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676)
        在 android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
        在 android.view.LayoutInflater.inflate(LayoutInflater.java:489)
        在 android.view.LayoutInflater.inflate(LayoutInflater.java:396)
        在 android.view.LayoutInflater.inflate(LayoutInflater.java:352)
        在 com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:365)
        在 android.app.Activity.setContentView(Activity.java:1912)
        在 com.example.mapTest.MainActivity.onCreate(MainActivity.java:13)
        在 android.app.Activity.performCreate(Activity.java:5066)
        在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1101)
        在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2307)
        在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2387)
        在 android.app.ActivityThread.access$600(ActivityThread.java:151)
        在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1331)
        在 android.os.Handler.dispatchMessage(Handler.java:99)
        在 android.os.Looper.loop(Looper.java:155)
        在 android.app.ActivityThread.main(ActivityThread.java:5485)
        在 java.lang.reflect.Method.invokeNative(Native Method)
        在 java.lang.reflect.Method.invoke(Method.java:511)
        在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1028)
        在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:795)
        在 dalvik.system.NativeStart.main（本机方法）
03-19 00:09:53.785: 错误/MediaScannerService(13421): 异常扫描文件
        android.os.DeadObjectException
        在 android.os.BinderProxy.transact（本机方法）
        在 android.media.IMediaScannerListener$Stub$Proxy.scanCompleted(IMediaScannerListener.java:100)
        在 com.android.providers.media.MediaScannerService$ServiceHandler.handleMessage(MediaScannerService.java:1007)
        在 android.os.Handler.dispatchMessage(Handler.java:99)
        在 android.os.Looper.loop(Looper.java:155)
        在 com.android.providers.media.MediaScannerService.run(MediaScannerService.java:713)
        在 java.lang.Thread.run(Thread.java:864)
03-19 00:09:54.365: 错误/NotificationService(434): 忽略通知图标==0: 通知(pri=0 contentView=null vibrate=null sound=nullnull defaults=0x0 flags=0x62 kind=[null])
03-19 00:10:03.075: 错误/ExternalAccountType(31657): 不支持的属性只读
03-19 00:10:03.380: 错误/NotificationService(434): 忽略通知图标==0: 通知(pri=0 contentView=null vibrate=null sound=nullnull defaults=0x0 flags=0x62 kind=[null])
03-19 00:10:03.960: 错误/ExternalAccountType(31657): 不支持的属性只读
03-19 00:10:08.200: 错误/MediaScannerService(13421): 异常扫描文件
        android.os.DeadObjectException
        在 android.os.BinderProxy.transact（本机方法）
        在 android.media.IMediaScannerListener$Stub$Proxy.scanCompleted(IMediaScannerListener.java:100)
        在 com.android.providers.media.MediaScannerService$ServiceHandler.handleMessage(MediaScannerService.java:1007)
        在 android.os.Handler.dispatchMessage(Handler.java:99)
        在 android.os.Looper.loop(Looper.java:155)
        在 com.android.providers.media.MediaScannerService.run(MediaScannerService.java:713)
        在 java.lang.Thread.run(Thread.java:864)
03-19 00:10:10.270：错误/AndroidRuntime（23231）：致命异常：主要
        java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable
        在 com.google.android.gms.maps.GoogleMapOptions.createFromAttributes（未知来源）
        在 com.google.android.gms.maps.SupportMapFragment.onInflate（未知来源）
        在 android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:279)
        在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676)
        在 android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
        在 android.view.LayoutInflater.inflate(LayoutInflater.java:489)
        在 android.view.LayoutInflater.inflate(LayoutInflater.java:396)
        在 android.view.LayoutInflater.inflate(LayoutInflater.java:352)
        在 com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:365)
        在 android.app.Activity.setContentView(Activity.java:1912)
        在 com.example.mapTest.MainActivity.onCreate(MainActivity.java:13)
        在 android.app.Activity.performCreate(Activity.java:5066)
        在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1101)
        在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2307)
        在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2387)
        在 android.app.ActivityThread.access$600(ActivityThread.java:151)
        在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1331)
        在 android.os.Handler.dispatchMessage(Handler.java:99)
        在 android.os.Looper.loop(Looper.java:155)
        在 android.app.ActivityThread.main(ActivityThread.java:5485)
        在 java.lang.reflect.Method.invokeNative(Native Method)
        在 java.lang.reflect.Method.invoke(Method.java:511)
        在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1028)
        在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:795)
        在 dalvik.system.NativeStart.main（本机方法）
03-19 00:10:10.285：错误/EmbeddedLogger(434)：应用程序崩溃！进程：com.example.mapTest
03-19 00:10:10.285：错误/EmbeddedLogger(434)：应用程序崩溃！包：com.example.mapTest v1 (1.0)
03-19 00:10:10.285：错误/嵌入式记录器（434）：应用程序标签：mapTest

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:29:12.977

Have you included the Google Play Services library in your project? Without it, critical resources are unavailable. See question: [java.lang.noclassdeffounderror: com.google.android.gms.R$styleable](https://stackoverflow.com/questions/14372391/java-lang-noclassdeffounderror-com-google-android-gms-rstyleable) for more detail.