# StackOverflow 问答 14024000-14024999

# c# - C# 值/引用传递？

> ID：14024003
> 
> 赞同：3
> 
> 时间：2012-12-24T17:11:04.163
> 
> 标签：c#, reference

我有一个类的已声明实体，并且想为其分配不同的预制模板，而模板却永远不会改变。使用 const 似乎并不能解决问题。

例子：

```
Weapon w1;
w1 = Sword; // premade weapon.
w1.reducedamage(1); // for example a debuff 
```

在这种情况下，预制武器的伤害会降低，并且不再可用作模板。这个问题在敌人身上变得更加深刻。

例子：

```
Enemy enemy;
enemy = enemies[r] // r being a randomly generated integer and enemies a list of enemy templates
Fight(player,enemy); // this method would resolve a fight between the two entities of the type Character. 
```

这个问题在玩家类中是不可见的，因为玩家是通过所有游戏方法传递的单个引用——因为只有一个玩家。每次玩家战斗时，敌人的模板都会被“损坏”。

通常，我将如何创建始终按值传递的模板或类/结构，这意味着第一个类的属性将具有与第二个相同的值，而两个类之间没有任何关系？

我获得的唯一成功是创建了一个方法，该方法手动将每个具有模板的类的每个属性复制到同一类的另一个实体上；但这非常不切实际，因为每当添加新类或更改旧类时，它都需要不断升级。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T17:25:56.090

我肯定错过了什么。这似乎是一个相当简单的问题，可以通过继承轻松解决，也许与某种工厂结合使用。首先，您不想使用对单个实例的引用，您希望每次都创建一个新实例，因此它是一个唯一的对象。我更喜欢类而不是结构，但您也可以轻松创建一个新结构。您可以使用工厂创建具有预定义值的对象的各种预配置实例。例如，达摩克利斯之剑或命运之剑。

```
public static class WeaponFactory
{
       public static Weapon CreateSword(SwordType type)
       {
            var sword = new Sword(); // plain, old default sword

            // override properties based on type
            switch (type)
            {
                case SwordType.SwordOfDamocles:
                    sword.FallTime = GetRandomFutureTime();
                    break;
                case SwordType.SwordOfDestiny:
                    sword.Invincible = true;
                    break;
                ...
            }

            return sword;
        }

        ...
} 
```

替代使用操作

```
public static class WeaponFactory
{
      public static Weapon Create<T>(Action<T> decorator) where T : IWeapon, new()
      {
           var weapon = new T();
           decorator(weapon);
           return weapon;
      }

      public static void SwordOfDamocles(Sword sword)
      {
           sword.FallTime = GetRandomFallTime();
      }

      public static void SwordOfDestiny(Sword sword)
      {
           sword.Invincible = true;
      }
}

var weapon = WeaponFactory.Create(WeaponFactory.SwordOfDamocles); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T17:16:52.833

你想要的是对象克隆。您可以通过`ICloneable`接口[[1]](http://msdn.microsoft.com/en-us/library/system.icloneable.aspx)实现它。这需要您实现自己的克隆机制——您必须完成繁重的工作。

但是，您可能应该做的只是让构造函数接受一个表示您想要的模板的参数，然后根据该模板填充相关对象的属性。当我想用一组基本值制作重复的东西时，这就是我要走的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T17:19:06.023

您可以进行实际复制（例如，在[http://msdn.microsoft.com/en-us/library/ms173116(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms173116(v=vs.80).aspx)中提供复制构造函数），但我最常看到的是这种情况是工厂模式，例如`Weapon w1 = Weapon.CreateSword();`或`Enemy e=Enemy.CreateEnemyOfType(r);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T17:23:28.120

您可以构建一个方法以将通用集合或数组中的多个敌人返回到您的敌人类中。就像是：

公共共享函数 getEnemies（num 为整数，类型为字符串）作为列表（来自 clsEnemy） 将敌人组作为列表（来自 clsEnemy）

for i = 0 to num - 1 dim thisEnemy as new clsEnemy(type)enemyGroup.add(thisEnemy) next

返回enemyGroup结束函数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T17:28:06.247

与复制对象以实现某种“应用对象”模式相反，最好记住改变的*不是*剑“基础物品”，而是玩家携带的物品。

例如，一把给定的剑，比如*“生锈的旧剑”*，其基础伤害始终为 50。现在，如果有人对其应用*“旧的东西变得更好的魔法”*，那么受到更多伤害的并不是*“生锈的旧剑”*：如果其他没有这种魔法的玩家捡起该物品，它会恢复到 50 的基础伤害。

因此，如果您实现某种`EquippedWeapon`（甚至`EquippedItem`）类，您可以让您的玩家装备武器并为其赋予扩展属性。像这样声明剑：

```
interface IWeapon
{
    int Damage { get; }
}

class Sword : IWeapon
{
    public int Damage { get; private set; }

    public Sword()
    {
        this.Damage = 50;
    }
} 
```

现在我们有一把基础伤害为 50 的剑。现在让玩家携带这把剑：

```
interface IDamageModifier
{
    int Damage { get; set; }
}

class EquippedWeapon : IWeapon
{
    public int Damage
    {
        get
        {
            return CalculateActualDamage();
        }
    }

    public List<IDamageModifier> DamageModifiers { get; set; }  
    private IWeapon _baseWeapon = null;

    public EquippedWeapon(IWeapon weapon)
    {
        _baseWeapon = weapon;       
    }

    private int CalulcateActualDamage()
    {
        int baseDamage = _baseWeapon.Damage;

        foreach (var modifier in this.DamageModifiers)
        {
            baseDamage += modifier.Damage;
        }

        return baseDamage;
    }
} 
```

武器包含一系列活动修饰符，这些修饰符会影响携带物品的伤害，但不会影响基础物品。`Sword`通过这种方式，您可以与许多（非）可玩角色共享一个实例。

现在，如果玩家受到攻击并且该攻击具有伤害效果，您只需将其应用于玩家携带的物品，因此该玩家的每次连续攻击都会应用这些效果：

```
class Player
{
    public EquippedWeapon PrimaryWeapon { get; set; }

    public Player()
    {
        this.PrimaryWeapon = new EquippedWeapon(new Sword());
    }

    public void UnderAttack(Attack attack)
    {
        // TODO: implement

        if (attack.Buffs...)
        {
            this.EquippedWeapon.DamageModifiers.Add(attack.Buffs);
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-24T17:40:23.297

我写了一个答案直接回答你的问题。但是现在我看到您想要的只是创建相同但未链接的项目。

当您创建实例时，无论如何都会发生这种情况。你不必做任何事情。

如果你有：

```
class Class1
{
    public int i;
} 
```

然后：

```
Class1 c1 = new Class1() { i = 1 };
Class1 c2 = new Class1() { i = 2 };
Text = c1.i.ToString(); 
```

打印“1”，而不是“2”。

如果你的意思是你想要一个带有子类“朋友”和“敌人”的“玩家”类 - 这就是继承的目的：

```
class Player
{

}

class Friend : Player
{

}
class Foe : Player
{

} 
```

编辑：

也许这会使任务更容易：（“复制”方法）

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

        Class1 c1 = new Class1() { i = 1, j = 2 };
        Class1 c2 = Duplicate(c1);
        c1.i = 3;
        Text = c2.i.ToString();//Prints "1";
    }

    public Class1 Duplicate(Class1 c)//Duplicates all public properties.
    {
        Class1 result = new Class1();
        PropertyInfo[] infos = typeof(Class1).GetProperties();
        foreach (PropertyInfo info in infos)
            info.SetValue(result, info.GetValue(c, null), null);
        return result;
    }
}

public class Class1
{
    public int i { get; set; }
    public int j { get; set; }
} 
```

# mysql - MySQL内部联接查询未返回正确结果

> ID：14024013
> 
> 赞同：3
> 
> 时间：2012-12-24T17:12:07.643
> 
> 标签：mysql, database, inner-join

我是内部连接的新手，我似乎无法弄清楚这里出了什么问题。我希望返回表“事件”中的所有行。这是我的表：

```
+----+---------+----------+    +----+---------+
| ID |  name   | venue_id |    | ID | name    |
+----+---------+----------+    +----+---------+
| 1  | Hub dub | 2        |    | 2  | hub dub |
| 2  | Test 2  | 2        |    +----+---------+
| 3  | Test 3  | 2        |
| 4  | Test 4  | 2        |
+----+---------+----------+ 
```

这是查询：

```
SELECT DISTINCT a.*, b.name AS venue a 
FROM events b 
INNER JOIN venues ON a.venue_id = b.id 
WHERE a.name LIKE '%hub%' OR b.name LIKE '%hub%' 
```

出于某种原因，在我更复杂的版本中，仅返回事件 ID#1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T17:14:30.427

语法有点不对劲。别名 ( `a`) 需要在表之后（在列别名之后有它）。

```
SELECT DISTINCT a.*, b.name AS venue 
FROM events b 
INNER JOIN venues a ON a.venue_id = b.id 
WHERE a.name LIKE '%hub%' OR b.name LIKE '%hub%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T17:15:18.223

### 是错字吗？

```
SELECT DISTINCT a.*, b.name AS venue a
-------------------------------------^ 
```

应该是这样的：

```
SELECT DISTINCT a.*, b.name AS venue 
FROM events b 
INNER JOIN venues a ON a.venue_id = b.id 
WHERE a.name LIKE '%hub%' OR b.name LIKE '%hub%' 
```

它被称为别名。它应该始终在表侧，之后`FROM`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T17:17:58.497

那样做

```
 SELECT DISTINCT a.*, b.name AS venue 
         FROM events b 
         INNER JOIN venues a ON a.venue_id = b.id 
         WHERE a.name LIKE '%hub%' OR b.name LIKE '%hub%' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T17:18:02.477

这是你想要的吗？

`SELECT DISTINCT a.*, b.name AS venue a FROM events b LEFT JOIN venues ON a.venue_id = b.id and b.name LIKE '%hub%'`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T17:20:00.307

结果是正确的，你已经通过venue_id和id连接了两个表，结果是表中的所有行都带有表事件的列名，之后你过滤了两个表上存在的列名，字符串包含%hub%，结果只是第一行。

PS你错过了桌子场地的标签。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-24T17:22:13.040

我认为你想要的是左连接表 A 和 B。

```
SELECT a.*, b.name AS venue FROM events b 
   LEFT JOIN venues a ON a.venue_id = b.id
   WHERE a.name LIKE '%hub%' OR b.name LIKE '%hub%' 
```

[http://www.sqlfiddle.com/#!2/a2581/1/0](http://www.sqlfiddle.com/#!2/a2581/1/0)

# python - 为什么分配给实例后python类属性的语义会发生变化？

> ID：14024014
> 
> 赞同：3
> 
> 时间：2012-12-24T17:12:09.890
> 
> 标签：python, class, attributes

我是 Python 新手，对我看到的一些行为感到困惑。如果我定义

```
class Obj():
    a = 1
    b = 2 
```

然后创建一个实例

```
x = Obj() 
```

一切都很好：

```
print(Obj.__dict__)
print(x.__dict__)
print(x.a,Obj.a) 
```

生产

```
{'a': 1, '__module__': '__main__', 'b': 2, '__doc__': None}
{}
(1, 1) 
```

但如果我

```
x.a = 20 
```

我明白了

```
{'a': 1, '__module__': '__main__', 'b': 2, '__doc__': None}
{'a': 20}
(20, 1) 
```

我知道，最初`a`是类变量`Foo.a`，并且最初没有实例变量`a`。我也明白，在这一点上。`x.a`仅指`Obj.a`. 我也明白，当我分配给 时`x.a`，我*创建*了一个实例变量`x.a`来*掩盖*类变量`Obj.a`。但是，虽然我知道这（至少部分）与 Python 的其余赋值声明一致，但我对为什么类允许这样做感到困惑？天真地，我本以为`x.a`应该改变的分配`Foo.a`（因为这就是它所指的那个点）或者指的是`x.a`在分配之前应该是一个错误（例如，“没有实例属性'a'。”）。

为什么允许这种行为。对于我们这些 Python 新手来说，这种行为在其他 OO 范式中对应什么？

换一种说法：我想不出你可以在哪里说`x.a`并且让它变得意思`Obj.a`，然后在下一行中说`x.a = ...`，让它不再意思`Obj.a`。虽然我只是不记得了，但有可能，一个例子 - 或者确认没有这样的事情 - 将是一个完美的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T17:19:58.310

您已经完美地总结了语义。它是这样工作的，因为：

1.  在对象上查找属性必须返回对象属性，怎么可能不呢？

2.  如果对象上不存在类属性，则在对象上查找属性必须找到类属性，因为这是对象获取方法以及在类上定义的任何其他内容的方式。

3.  在对象上设置属性必须创建对象属性。

4.  因为Python**中没有声明**，所以创建属性的唯一方法是实际设置它，所以 #3 必须在对象上设置属性。

如果没有您描述的行为，我看不出有一种方法可以使 1 到 4 工作。

我不确定如何用其他语言来描述这一点。你说，“如何用面向对象的术语来思考这个问题。” 不要陷入假设某些其他语言“定义”OO 的陷阱。在所有语言中，面向对象的方式都不同。

**补充**：你说，

> 我本来希望对 xa 的赋值应该改变 Foo.a （因为这就是它所指的那个点）或者在赋值之前引用 xa 应该是一个错误（例如，“没有实例属性'一个'。”）。

因为 Python 没有声明，所以属性在被赋值之前不会以任何方式存在。如果分配给对象的属性没有创建它，您将如何创建对象属性？也就是说，通过没有`x`属性的类的示例和该类的实例，会`o.x = 17`做什么？

# google-maps - Google Maps API V3 - 更改旅行模式时，路线面板变得混乱

> ID：14024019
> 
> 赞同：0
> 
> 时间：2012-12-24T17:13:22.103
> 
> 标签：google-maps, google-maps-api-3

我正在构建一个谷歌地图应用程序，我需要在其中提供多个旅行选项的方向，并且我在侧面板中显示方向。

但是，当我选择一个新的方向请求并将其结果传递给面板时，事情就会变得一团糟，请参阅小提琴[http://jsfiddle.net/PLrkp/4/](http://jsfiddle.net/PLrkp/4/)
这里是如何重现它首先选择使用的方向过境作为出行方式，然后改成自行车，你会在部分看到奇怪的方框，你可以在其中选择替代路线

**注意：**这只发生在 Directions 请求对象中的 'provideRouteAlternatives' 设置为 true 时，并且仅当实际上有多个路线时，（看起来该部分没有完全更新）

这是我的代码

```
 <div class="mapsection" >
      <form onsubmit="calcRoute();return false;">
          <select id="travelmode">
            <option value="DRIVING" selected="selected" data-shortMode="c">DRIVING</option>
            <option value="TRANSIT" data-shortMode="r" selected>TRANSIT</option>
            <option value="WALKING" data-shortMode="w">WALKING</option>
            <option value="BICYCLING" data-shortMode="b">BICYCLING</option>
          </select>
          <input type="text" id="start" value="Washington"/>
          <input type="text" id="end" value="New York"/>
          <button type="submit">GET DIRECTIONS</button>
      </form>
      <div id="map_canvas" style="width:100%; height:550px;float:left;"></div>
      <div id="directionsPanel" style="float:right;max-width:395px; overflow:scroll;height: 505px;overflow-x: hidden;"></div>
</div>
<script>
    //define one global Object
      var myMap = {}
      //init 
      function initialize(){
      //set up map options
        var mapOptions = {
          center: new google.maps.LatLng(40.75377,-73.990531),
          zoom: 4,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
        };
        myMap.map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
        myMap.directionsService = new google.maps.DirectionsService();
        myMap.directionsDisplay = new google.maps.DirectionsRenderer();
        myMap.directionsDisplay.setMap(myMap.map);
        myMap.directionsDisplay.setPanel(document.getElementById("directionsPanel"));
      }//end init
      //directions
      var calcRoute = function() {
        var start = document.getElementById("start").value,
        end = document.getElementById("end").value,
        request = {
            origin:start,
            destination:end,
            durationInTraffic :true,
            transitOptions: {
            departureTime:  new Date()
          },
          provideRouteAlternatives : true,
          travelMode: document.getElementById("travelmode").value
        };
        myMap.directionsService.route(request, function(result, status) {
          if(status == google.maps.DirectionsStatus.OK) {
            myMap.directionsDisplay.setDirections(result);
          }else{
           alert("something went wrong!");
          }
        });

      }
      //script loader
      var loadScript = function() {
        var script = document.createElement("script");
        script.type = "text/javascript";
        script.src = "http://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY_HERE&sensor=false&callback=initialize";
        document.body.appendChild(script);
      }
      window.onload = loadScript;
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T23:05:05.143

这个问题已经解决了，你可以在问题中的小提琴上看到它

# ms-access - 无法从控制源下拉列表中选择正确的字段

> ID：14024020
> 
> 赞同：1
> 
> 时间：2012-12-24T17:13:27.150
> 
> 标签：ms-access

我有一个访问表单。在我的表单的基础查询中，有两个表 A 和 B。这两个表都有一个名为“客户”的字段。当我测试我的表单时，我注意到当我真正想要 B.Customer 时，我不知何故将 A.Customer 作为特定字段的控制源。所以我试图改变它。一旦我从控制源下拉列表中选择 B.Customer 并保存表单，字段控制源就会恢复为 A.Customer。我可以将控制源保存为查询中的任何其他字段或我能想到的任何计算，但如果我尝试将其保存为 B.Customer，它将变为 A.Customer。[B].[Customer] 之类的变体没有任何区别。我尝试将其保存为随机计算字段，关闭并重新打开数据库，然后将其保存为 B.Customer，但它仍然变成 A.Customer。这里发生了什么？

如果有任何区别，我会在操作期间动态更改此表单的 RecordSource。我已将我的表名别名为 A 和 B (SELECT DISTICTROW A.*, B.* FROM [Table With A Long Name] AS A RIGHT JOIN [Table With An Even Longer Name] AS B ON A.ID = B. AID），因为我在更改 RecordSource 属性时遇到了字符限制。我当然从来没有使用非别名表名遇到这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T17:19:46.657

实际上，啊，只需删除并重新创建该字段即可解决此问题。继续。

# android - 了解何时以及为何使用不同的 Android 线程

> ID：14024021
> 
> 赞同：11
> 
> 时间：2012-12-24T17:13:55.260
> 
> 标签：android

希望有人可以向我解释这一点，或者指出我可以阅读的资源以了解更多信息。我正在构建一个应用程序，它使用一个`ListView`和一个*自定义列表适配器*，我模仿了许多在线可用教程之一，例如这个：

[http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/)

它工作得很好。但是，如何执行此操作的每个示例都运行构建要显示的对象列表并在单独的线程上收集所需数据的过程。

我想知道为什么/你不能把所有东西都放进去`onCreate`吗？我看不出你需要单独的线程来实现这一点的原因。对于我必须在某些线程上运行的时间/内容是否有一些通用形式/标准？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T17:19:52.067

[与大多数事情一样，这方面的 Android 文档](http://developer.android.com/guide/components/processes-and-threads.html)非常好。

结果是：UI 应该始终是响应式的。所以`if you have some operation that will take enough time that the user will notice, you might want to consider not running it in the UI thread`。一些常见的例子是`network IO`和`database accesses`。不过，这取决于具体情况，因此您必须自己打个电话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T17:17:54.830

好吧，如果构建对象列表不是一个相对较短的过程，那么在 onCreate() 中执行此操作将阻塞/减慢主线程。如果您使用单独的线程，它将允许 android 操作系统在您等待填充列表时加载所有 UI 元素。然后，当对象列表准备就绪时，您可以立即填充已经初始化的 UI，而不是等到对象列表构建完成后再初始化 UI。它确保您的应用程序始终响应用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T17:19:55.750

因为您只有 0.5 秒的时间来执行 onCreate — 之后会显示可怕的 ADN（应用程序无响应）错误消息。因此，除非您的列表视图非常简单，否则您将无法及时完成。即使您的列表视图非常简单，最好以正确的方式学习它。

顺便说一句：我什至不使用线程，我使用一个或多个服务来完成所有工作。实施起来更加困难，但也更加健壮和响应迅速。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T17:20:50.680

您不在 onCreate 或 UI 线程中执行操作的原因是为了响应。如果您的应用程序处理时间过长，则会向用户显示“应用程序无响应”对话框。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T17:21:45.593

我的老师曾经说过：每个软件都可以用一个（大）for循环编写。

如果您认为：它可能是......也许在 NDK 级别。

一些 SDK 开发人员希望使软件开发人员的任务更容易，这就是为什么存在 SDK 和框架。

除非您不需要多任务处理中的任何内容，否则您应该使用单线程。

有时有时间限制，有时有 UI/背景/网络限制，需要在 diff 线程中做一些事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-24T18:00:55.010

如果你看到 Asyntask 和 Handler 的源代码，你会看到它们的代码纯粹是用 Java 编写的。（当然，也有一些例外，但这不是重点）。

为什么是这个意思？这意味着在 Asyntask 或 Handler 中没有魔法。它们只是让您作为开发人员的工作更轻松。

例如：如果 ProgramA 调用 methodA()，methodA() 将与 ProgramA 在不同的线程中运行。您可以通过以下方式轻松测试：

`Thread t = Thread.currentThread();
int id = t.getId();`

为什么你应该使用新线程？你可以google一下。很多很多原因。

那么区别是什么呢 ？

AsyncTask 和 Handler 是用 Java 编写的（内部使用 Thread），所以你可以用 Handler 或 AsyncTask 做的所有事情，你也可以使用 Thread 来实现。

什么 Handler 和 AsyncTask 真正帮助你？

最明显的原因是调用者线程和工作线程之间的通信。（调用者线程：调用工作线程执行某些任务的线程。调用者线程可能并不总是 UI 线程）。而且，当然，您可以通过其他方式在两个线程之间进行通信，但是有很多缺点，例如：主线程不是线程安全的（在大多数情况下），换句话说，是危险的。

这就是为什么你应该使用 Handler 和 AsyncTask。他们为您完成大部分工作，您只需要知道要覆盖哪些方法。

Handler 和 AsyncTask 的区别：当 Caller 线程是 UI Thread 时使用 AsyncTask。这是android文档所说的：

`AsyncTask enables proper and easy use of the UI thread. This class allows to perform background operations and publish results on the UI thread without having to manipulate threads and/or handlers`

我想强调两点：

1）UI线程的易用性（所以，当调用者线程是UI线程时使用）。

2）无需操纵处理程序。（意味着：您可以使用 Handler 代替 AsyncTask，但 AsyncTask 是一个更简单的选择）。

这篇文章中有很多东西我还没有说，例如：什么是 UI 线程，为什么它更容易。你必须知道每种背后的一些方法并使用它，你会完全理解为什么..

@：当你阅读Android文档时，你会看到：

`Handler allows you to send and process Message and Runnable objects associated with a thread's MessageQueue`

起初它们可能看起来很奇怪。请理解，每个线程都有每个消息队列。（如待办事项列表），线程将接收每条消息并执行此操作，直到消息队列为空。（啊，也许就像你完成工作上床睡觉一样）。因此，当 Handler 通信时，它只是给调用者线程一个消息，它会等待处理。（复杂？但你只知道，Handler 可以以安全的方式与调用者线程通信）

# java - 获取最后一个 LinkedHashSet

> ID：14024022
> 
> 赞同：26
> 
> 时间：2012-12-24T17:13:56.693
> 
> 标签：java

我想存储一个数字列表 1,2,3,4 - （让我们从 开始`List<Integer>`）

我想确保数字是唯一的（好的，好的，`Set<Integer>`）

我想保证订单（好的...... `LinkedHashSet<Integer>`）

我想从列表中获取最后一个元素..

将最后一个数字插入`LinkedHashSet<Integer>`请的最简单方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-24T17:19:41.473

没有预先烘焙的选项。有两种现成的选择，但都不是很好：

Order n 方法：

```
public <E> E getLast(Collection<E> c) {
    E last = null;
    for(E e : c) last = e;
    return last;
} 
```

呸！但也有一个 Order 1 方法：

```
class CachedLinkedHashSet<E> extends LinkedHashSet<E> {
    private E last = null;

    @Override
    public boolean add(E e) {
        last = e;
        return super.add(e);
    }
    public E getLast() {
        return last;
    }

} 
```

这是即兴的，因此其中可能存在一个微妙的错误，并且可以肯定这不是线程安全的或任何东西。您的需求可能会有所不同，并导致您采用一种方法而不是另一种方法。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-05-24T09:32:10.240

使用[java-8](/questions/tagged/java-8 "显示标记为“java-8”的问题")，您可以获得连续`Stream`的`LinkedHashSet`，跳过前 n-1 个元素并获得最后一个。

```
Integer lastInteger = set.stream().skip(s.size()-1).findFirst().get(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-24T17:22:33.283

首先，我同意 corsiKa 的解决方案，它建议扩展版本的`LinkedHashSet`类，其中包含指向最后一个元素的指针。但是，您可以通过为数组消耗一些空间来使用传统方式：

```
set.toArray()[ set.size()-1 ] // returns the last element. 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-06-21T20:52:02.277

这是一个实现，它添加了访问最后一个条目 O(1) 的方法：

[LinkedHashSetEx.java](https://github.com/zolyfarkas/spf4j/blob/master/spf4j-core/src/main/java/org/spf4j/ds/LinkedHashSetEx.java)

请享用...

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-12-24T17:19:22.370

集合与顺序无关。我们不能按索引访问元素。如果您需要最后一个元素，

1) 创建新的 ArrayList(Set)

可以轻松访问 arrayList 的最后一个元素

# c# - 正则表达式匹配前面没有字母的数字

> ID：14024024
> 
> 赞同：3
> 
> 时间：2012-12-24T17:14:24.217
> 
> 标签：c#, regex

我想匹配“100”、“1.1”、“5.404”等数字，如果它们前面不包含这样的字母：“V102”。

这是我当前的正则表达式：

```
(?<![A-Za-z])[0-9.]+ 
```

这应该匹配任何字符 0-9。一个或多个重复，如果前缀不存在 (A-Za-z)。

但它所做的是将 V102 匹配为 02，所以它只是去掉 V 和一个字母，然后其余的都适合，而实际上它根本不应该匹配那个大小写。我怎样才能让它抓住所有数字，然后检查前缀是否不存在？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T17:22:07.067

将数字和小数点添加到您的负面回顾中：

```
(?<![A-Za-z0-9.])[0-9.]+ 
```

这将强制所有匹配以非数字和非字母（即空格或其他分隔符）开头。这样，数字的结尾也不是有效匹配。

演示：[http ://www.rubular.com/r/EDuI2D9jnW](http://www.rubular.com/r/EDuI2D9jnW)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T17:20:02.423

你可以使用单词边界吗？

```
\b[0-9\.]+\b 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T17:22:14.150

试试正则表达式：

```
(?<![A-Za-z0-9])[0-9.]+ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T17:23:52.053

如果您不希望字符串中的任何位置出现字母或空格，那么这应该可以：

```
^[0-9.]+$ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-24T17:26:03.593

**非正则表达式解决方案。**

如果您有以下字符串，那么您可以使用`double.TryParse`来查看该字符串是否为双精度。尝试：

```
string str = "100 1.1 V100 d333 ABC 1.1";
double temp;
string[] result = str.Split().Where(r => (double.TryParse(r, out temp))).ToArray(); 
```

或者，如果您需要一个双数组作为回报，那么：

```
double[] numberArray = str.Split()
                          .Where(r => double.TryParse(r, out temp))
                          .Select(r => double.Parse(r))
                          .ToArray(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-24T17:19:32.987

尝试使用插入符号`^`运算符。此运算符表示您希望您的模式从输入的开头开始。例如`^[0-9.]+`，将匹配以数字或 a 开头`.`并具有任意数量的输入。请注意，此模式不只匹配数字，因为它也匹配超过 1 个点的模式，例如`2.00.2`，它不是一个有效的数字。

# r - 使用预编译的共享库构建 R 包

> ID：14024045
> 
> 赞同：4
> 
> 时间：2012-12-24T17:18:05.690
> 
> 标签：r, dll, package, shared-libraries

我正在编写并尝试使用预编译的共享库构建的 R 包遇到问题。让我试着简要描述一下这个问题：

*   这个包（我们称之为`mypack`）依赖于一个`mylib.dll`已经编译的共享库，并且在构建 R 包时我无法即时编译。
*   该库`mylib.dll`已在 Windows 下的 x64 机器上编译，并且可以在 R 中加载`dyn.load`.
*   该包包含所需的文件`NAMESPACE`，其中`useDynLib(mylib.dll)`指定。`.onLoad`包含指令的函数`library.dynam('mylib.dll', pkg, lib)`也在文件中指定`zzz.R`。
*   R 包`mypack`是`Rtools`使用常用命令构建的`Rcmd INSTALL`，然后我`libs`在其中添加一个保存目录`mylib.dll`。
*   当我尝试在 R 中加载包时`library(mypack)`，我收到以下错误消息：
    `Error: package 'mypack' is not installed for 'arch=x64'`

这让我很困惑。为什么共享库可以在 R 中顺利加载，但是当我使用它构建包时，我收到了这个奇怪的错误消息？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T23:59:03.200

该错误消息来自以下代码`library`：

```
 if (nzchar(r_arch) && file.exists(file.path(pkgpath, 
            "libs")) && !file.exists(file.path(pkgpath, "libs", 
            r_arch))) 
            stop(gettextf("package %s is not installed for 'arch=%s'", 
                sQuote(pkgname), r_arch), call. = FALSE, domain = NA) 
```

这告诉我您在构建的软件包（即安装目录）中需要一个 {package}/libs/{arch} 文件夹，其中 {arch} 与您的系统拱门相匹配，如 `r_arch <- .Platform$r_arch`

我猜你的构建未能正确地做到这一点。您的源代码中是否有任何 C 代码？

# mysql - 对我的社交网络“更新”表的修改建议？

> ID：14024046
> 
> 赞同：0
> 
> 时间：2012-12-24T17:18:19.540
> 
> 标签：mysql, database, foreign-keys, relational-database

随着我继续在我的社交网站上工作（我可能永远不会完成），我决定我可能应该修改我的“更新”表。如果您将其视为 Facebook，则 Updates 表存储新闻源的故事，例如 User_123 更改了他的状态，或者 SomeOtherUser 添加了新照片/视频，或者 YetAnotherUser 加入了一个组。

我目前的表结构如下：

***更新***

**PK** Update_ID
Type
Update_Content
**FK** Photo_ID
**FK** Video_ID
**FK** Owner_ID
**FK** Group_Wall_ID
**FK** Friend_Wall_ID
Upvotes
Downvotes
Timestamp

注意，Type 是指更新的类型（1 是状态更新，2 是用户加入群组，3 是新照片，等等），Update_Content 是状态文本，或类似消息“User_123 加入了一个群组”

现在我的方式是，当用户将更新发布到他们自己的“墙”时，Group_Wall_ID 和 Friend_Wall_ID 默认为 0。然而，如果该用户向组发布更新，则 Group_Wall_ID 有一个值，而 Friend_Wall_ID 没有。

另外，如果更新只是状态更新，Photo_ID和Video_ID默认为0。但是，如果更新是新照片，则 Photo_ID 将具有与照片表中的 PK 对应的值。

我觉得这个表的结构效率很低，可以使用一些修改。任何人都可以提出任何修改以使这张表更好吗？任何反馈都会很棒！谢谢，节日快乐！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T17:43:39.493

我认为这个应用程序不适合 MySQL。使用 MySQL，您可以在每次读取时将所有资源集中在一起。它似乎也不需要一个提要按时间顺序跨越很远。

我认为更好的解决方案是在写入时将活动推送到适当的提要。因此，如果您发布视频，它会附加到您所有朋友的新闻提要中。您可以将每个提要限制为 100 个项目以使列表更小。

我认为使用redis会更合适。您可以为每个用户的活动提要创建一个列表。`LPUSH user_id`'约翰刚刚添加了一个<a href="/johnsvideo">视频</a>`

但是，此解决方案需要您拥有大量内存，并且如果用户从他们的提要中删除某些内容，也可能会出现问题。

# java - 帧率独立重力

> ID：14024057
> 
> 赞同：0
> 
> 时间：2012-12-24T17:19:26.147
> 
> 标签：java, frame-rate, gravity, delta

我遇到了重力随着帧速率变化而严重变化的问题。当我以 160 fps 的速度跑步时，我的玩家在空中跳跃了几米然后摔倒，但在大约 10 fps 的速度下，我的玩家跳跃了半米然后摔倒。我的重力代码如下：

```
public void fall(long delta) {
    float increase = acceleration * ((delta) / 1000000000); //changes delta time (nanoseconds) to seconds
    if(player.y + velocity + increase < -1.15f) {
        if(velocity + inc < terminal_velocity) {
            velocity += inc;
        }
        player.y += velocity;
    }else{
        player.y = -1.15f;
        velocity = 0;
    }
} 
```

我称之为：

```
while(!close_request) {
        now = getTime();
        int delta = getDelta(now);

        player.fall(delta);

        ........other functions.........

    } 
```

我认为实现 delta 可以防止玩家改变速度过快或过慢，但它实际上让它变得更糟了。我认为这是因为随着帧之间时间的增加，速度的增加也会导致玩家异常快速地摔倒。这是因为随着 FPS 的增加，玩家跳得更高、更高。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T18:45:23.440

您的问题出在这一行：

```
player.y += velocity; 
```

它没有考虑到*速度*是“距离除以时间”。

您正在正确地建模加速：

```
v = u + a * t   // v = current velocity, a = acceleration, t = time 
```

但不是距离，足够小的距离`delta`是：

```
delta_s = v * delta_t 
```

在将其添加到该位置之前，您需要乘以`velocity`。`delta`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T18:37:40.557

您没有正确建模物理场。假设 dt 足够小，这将提供“足够好”的近似值。

```
curV     // current velocity
accel    // global acceleration constant
terminal // terminal velocity for object
dt       // delta time in seconds

fall(dt):
    deltaV = accel * dt                  // Change in velocity in a vacuum
    newV = curV + deltaV                 // New velocity 
    if (newV < terminal) newV = terminal // Don't exceed downwards terminal velocity
    y = y + dt * (curV+newV)/2           // New position
    curV = newV                          // Save new velocity as current 
```

它忽略了当您接近终端速度时加速度降低等复杂性。这和你的最大区别是出现了`dt` *两次*，一次是在计算`deltaV`，然后是在计算新的垂直位置。

# ios - 如何在单击按钮时复制主页按钮双击效果？

> ID：14024058
> 
> 赞同：0
> 
> 时间：2012-12-24T17:19:27.370
> 
> 标签：ios

在 IOS 中，当我们双击主页按钮时，它会提升当前应用程序并在底部显示所有正在运行的应用程序。我可以滚动底部并从那里选择音乐播放器选项。当用户从应用程序中点击一个按钮而不是双击主页按钮时，我想实现相同的屏幕提升效果。有可能吗？如果是，我们该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T18:02:35.017

没有主页按钮功能（除非越狱）不能在您的 UI 中重新创建。

此外，由于 iOS6 用户可以选择启用引导式访问，如果要创建的按钮被认为是无用的。现在，在调试过程中这样做会很痛苦。

您必须访问 Home Button API（如果有的话）以及引导式访问 API。

# ruby - 如何避免许多“零”检查？

> ID：14024070
> 
> 赞同：1
> 
> 时间：2012-12-24T17:20:09.680
> 
> 标签：ruby

我正在解析 JSON 数据，并且在很多数据上我必须调用一些方法。有时数据是“nil”，如果我不检查 nil，如果调用方法会引发错误。

我现在正在做的是创建一个变量，检查 nil，然后在调用它的方法后最终将它分配给我的哈希。这是一个例子：

```
lat = event['location']['lat']
lng = event['location']['lng']
popularity = event['popularity']

ar_show.lat = lat.round(4) if lat
ar_show.lng = lng.round(4) if lng
ar_show.popularity = popularity.round(4) if popularity 
```

有没有“更好”或更优雅的方式来做到这一点？目前我这样做的方式似乎非常多余，只是为了避免在 nil 上调用方法而创建一个额外的变量。我可以做这个：

```
ar_show.lat = event['location']['lat'].round(4) if event['location']['lat'] 
```

但这更糟！

也许这对我来说很奇怪的原因是我花了很多时间编写 Objective-C 并且我可以懒惰因为向“nil”发送消息很好而且你可以避免大量的 nil 检查，但是也正因为如此，有时也会把自己搞砸。

* * *

更新：

我刚刚在一个使用`to_f`强制的语句中找到了一种方法：

```
ar_show.lat = event['location']['lat'].to_f.round(4) 
```

`to_f`在 nil 上会成功`0.0`，处理 nil 情况，并避免额外的变量或语句。我只是想知道在将其输入代码之前是否有不利之处？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T17:21:45.047

您可以使用默认值：

```
lat = event['location']['lat'] || 0
ar_show.lat = lat.round(4) 
```

你必须`nil`在某个时候处理这​​个案子，为什么不在分配它的时候处理它呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T18:25:13.137

我在一个使用`to_f`to coerce nil 的语句中找到了一种方法：

```
ar_show.lat = event['location']['lat'].to_f.round(4) 
```

`to_f`在 nil 上将使其 0.0 处理 nil 情况，避免额外的变量或语句。

[从这个](http://www.youtube.com/watch?v=T8J0j2xJFgQ&feature=youtu.be)视频中得到了答案。

# java - 在 hex 文件中显示 0 值

> ID：14024078
> 
> 赞同：2
> 
> 时间：2012-12-24T17:21:16.223
> 
> 标签：java, hex

我正在处理一个十六进制文件并显示其内容，但如果该值为“0”。我打印出来的时候没有出现。

例如

```
 0 0 0 b7 7a 7a e5 db 40 2 0 c0 0 0 9 18 16 0 e3 1 40 0 0 3f 20 f0 1 5 0 0 0 0 0 0 41 bc 7a e5 db 40 2 0 c0 1 0 9 18 16 0 e3 1 40 0 0 3f 20 f0 1 5 0 0 0 0 0 0 53 3f 7b e5 db 40 2 0 c0 3 0 9 2 19 24 3d 0 22 68 1 db 9 
```

代码

```
 String filename = "C:\\tm09888.123";
    FileInputStream in = null;
    int readHexFile = 0; 
    char hexToChar = ' ';
    String[] bytes = new String[10];

    try
    {            
        in = new FileInputStream(filename); 

        while((readHexFile = in.read()) != -1)
        {       
            if (Integer.toHexString(readHexFile).equals("f0"))
            {
                System.out.print("\n\n\n");
            }
            System.out.print(Integer.toHexString(readHexFile) + " ");
        }
    }
    catch (IOException ex)
    {
        Logger.getLogger(NARSSTest.class.getName()).log(Level.SEVERE, null, ex);
    }  

} 
```

当我打印出文件时，“0”没有出现，“c0”等值变成了“c”。

我如何重写代码以显示“0”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T17:29:04.027

`Integer.toHexString`不保证返回两位数的结果。

如果您希望它始终为两位数，则可以`String.format`改用：

```
System.out.print(String.format("%02x ", readHexFile)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T17:26:40.630

> 当它显示在屏幕上时，“0”值没有出现，像“c0”这样的值变成只有“c”

我怀疑“0c”更有可能变成“c”。我希望“c0”没问题。

问题是您正在使用`Integer.toHexString`它只会使用所需数量的数字。您可以通过编写*手动解决此问题：*

```
if (readHexFile < 0x10) {
    System.out.print("0");
} 
```

或者，只需使用：

```
private static final char[] HEX_DIGITS = "0123456789abcdef".toCharArray();
...
System.out.print(HEX_DIGITS[readHexFile >> 4]);
System.out.print(HEX_DIGITS[readHexFile % 15]);
System.out.print(" "); 
```

或者更简单：

```
System.out.printf("%02x ", readHexFile); 
```

另请注意，无需转换为十六进制字符串即可与`0xf0`. 您可以使用：

```
if (readHexFile == 0xf0) {
    System.out.print("\n\n\n");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T17:33:51.260

我不能说代码有什么问题，但如果你使用扫描仪，事情似乎会更清楚

```
Scanner sc = new Scanner(new File(fileName));
while(sc.hasNext()) {
    String s = sc.next();
    System.out.println(s);
} 
```

# c# - 数据绑定到实例方法

> ID：14024080
> 
> 赞同：3
> 
> 时间：2012-12-24T17:21:38.043
> 
> 标签：c#, xaml, data-binding, windows-phone-8, writeablebitmap

我有一个带有本地数据库 (SQL CE) 的应用程序，我想将一个列表框绑定到一个表 (Car)。但是，我无法将 WriteableBitmap 保存到本地数据库，因此我决定将图像转换为字节数组，因此我需要动态调用该方法。这是我到目前为止所得到的。

```
[Table]
class Car
{
    [Column (IsPrimaryKey=true, IsDbGenerated=true, CanBeNull=false, AutoSync = AutoSync.OnInsert)]
    public int ID { get; set; }

    [Column (CanBeNull=false)]
    public int MakeID { get; set; }

    [Column(CanBeNull = false)]
    public int ModelID { get; set; }

    [Column(CanBeNull = false)]
    public int AccountID { get; set; }

    [Column(CanBeNull = false)]
    public int Year { get; set; }

    [Column]
    public string Name { get; set; }

    [Column]
    public byte[] PicBytes { get; set; }

    private EntitySet<Maintenance> maintenance;
    [Association(Storage = "maintenance", ThisKey = "ID", OtherKey = "CarID")]
    public EntitySet<Maintenance> Maintenance
    {
        set
        {
            maintenance = value;
        }
        get
        {
            if (maintenance == null)
                return new EntitySet<Maintenance>();

            return maintenance;
        }
    }

    public WriteableBitmap GetPicture()
    {
        using (var memoryStream = new MemoryStream(PicBytes))
        {
            return PictureDecoder.DecodeJpeg(memoryStream);
        }
    }
} 
```

这是 XAML：

```
 <ListBox Name="carList" Grid.RowSpan="2" Width="480" SelectionChanged="carList_SelectionChanged">
            <ListBox.ItemTemplate>
                <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="205"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <Image Grid.RowSpan="4"
                                           Grid.Column="0"
                                           Source="{Binding PicByte}"
                                           Stretch="Uniform"/>

                                    <TextBlock Text="{Binding Name}"
                                               TextWrapping="Wrap"
                                               Grid.Row="0"
                                               Grid.Column="1"
                                               VerticalAlignment="Stretch"
                                               HorizontalAlignment="Center"
                                               Width="160"/>
                                    <TextBlock Text="{Binding MakeID}"
                                               TextWrapping="Wrap"
                                               Grid.Row="1"
                                               Grid.Column="1"
                                               VerticalAlignment="Stretch"
                                               HorizontalAlignment="Center"
                                               Width="160"/>
                                    <TextBlock Text="{Binding ModelID}"
                                               TextWrapping="Wrap"
                                               Grid.Row="2" 
                                               Grid.Column="1"
                                               VerticalAlignment="Stretch"
                                               HorizontalAlignment="Center"
                                               Width="160"/>
                                    <TextBlock Text="{Binding Year}"
                                               TextWrapping="Wrap"
                                               Grid.Row="3"
                                               Grid.Column="1"
                                               VerticalAlignment="Stretch"
                                               HorizontalAlignment="Center"
                                               Width="160"/>
                                </Grid>
                            </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

我的主要问题是图像，如何从 XAML 调用 GetPicture() 方法。还是我应该用 C# 来做这一切？

编辑：我找到了解决问题的方法

```
 try
        {
            var db = MHDatabase.GetDatabase();
            var query = from car in db.Cars
                        join make in db.Makes on car.MakeID equals make.ID
                        join model in db.Model on car.ModelID equals model.ID
                        select new
                        {
                            Name = car.Name,
                            Make = make.Name,
                            Model = model.Name,
                            Picture = car.GetPicture(),
                            Year = car.Year
                        };

            carList.ItemsSource = query;
        }
        catch (Exception)
        {
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T17:53:53.173

您不能直接绑定到方法。就您而言，我至少看到两种解决方法：

1.  绑定`PicBytes`并制作转换器以从字节数组转换为 WriteableBitmap
2.  创建`Picture`属性：

    ```
    public WriteableBitmap Picture
    {
        get
        {
            using (var memoryStream = new MemoryStream(PicBytes))
            {
                return PictureDecoder.DecodeJpeg(memoryStream);
            }
        }
    } 
    ```

# objective-c - 在 Cocoa Touch 中字符串包含 ' 时的 NSPredicate 错误

> ID：14024081
> 
> 赞同：3
> 
> 时间：2012-12-24T17:21:41.760
> 
> 标签：objective-c, nspredicate

我正在设置我的谓词字符串，如下所示：

```
[NSString stringWithFormat:@"(name like '%@')",name] 
```

但是如果 name 包含`'`字符，例如如果 name 是`"family's"`它会崩溃。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T20:11:05.443

您不需要 ' in `NSPredicate`。它们是自动插入的。

你试一试

```
[NSPredicate predicateWithFormat:@"(name like %@)",name]; 
```

* * *

崩溃的原因是谓词值被中断。如果您创建一个带有格式的字符串，就像在您的示例中一样，您最终会得到**(name like 'family's')**，这显然是行不通的。

`predicateWithFormat:`另一方面，如果您使用它，则可以让它自己处理。它会转义你的特殊字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T14:38:18.893

如果您不想/不能使用`predicateWithFormat`，那么您可以简单地替换字符串中的任何撇号。

我在我的应用程序中执行此操作，检查我的`UISearchBar`控件时，查看用户是否正在尝试查找特定的 CoreData 记录：

```
NSString* searchString = self.searchBar.text;
if (searchString.length != 0)
{
    searchString = [searchString stringByReplacingOccurrencesOfString:@"'" withString:@"\\'"];
    NSString* filter = [NSString stringWithFormat:@"companyName CONTAINS[cd] '%@'", searchString];

    NSPredicate* predicate1 = [NSPredicate predicateWithFormat:filter]; 

    //  ...etc... 
} 
```

（这是我使用的通用函数的简化版本，它实际上使用可变数量的过滤器字符串搜索 CoreData，这就是我不`predicateWithFormat`直接使用的原因。）

# facebook - 在某些情况下未授予电子邮件扩展权限

> ID：14024086
> 
> 赞同：0
> 
> 时间：2012-12-24T17:22:00.780
> 
> 标签：facebook, email, facebook-graph-api, facebook-authentication

我正在使用服务器端身份验证流程，并且在请求电子邮件扩展权限时，有一次电子邮件地址没有被发回，导致我的应用程序中断。

我的应用程序需要这些信息才能正常运行，因此我将对其进行修改以重新提示用户。但是我想了解为什么/如何发生这种情况，因为我在授权时找不到任何方法来撤销应用程序的许可。对话框指出需要权限。这是因为属于未成年人的帐户无法提供该信息吗？

我这样要求： [https://www.facebook.com/dialog/oauth/?client_id=](https://www.facebook.com/dialog/oauth/?client_id=) $appId&redirect_uri=$fbAuthUrl&state=$stateString&scope=email

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T17:52:06.503

有些用户可能根本没有电子邮件 - 早些时候，可以只用手机注册 Facebook - 我不确定是否有其他原因，或者这可能是 API 的错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T17:45:50.743

经过多次头撞后，我发现这个我认为应该负责的向 Facebook 提交的错误：

[https://developers.facebook.com/bugs/487563591260030](https://developers.facebook.com/bugs/487563591260030)

# winapi - 如何在基于 mfc 对话框的应用程序中模拟消息泵机制？

> ID：14024098
> 
> 赞同：1
> 
> 时间：2012-12-24T17:22:49.017
> 
> 标签：winapi, visual-c++, mfc, dialog

我想知道如何在基于对话框的应用程序中模拟 mfc 消息泵。在我的应用程序中，我有一个基类作为 MyDialog。通过使用这个基类，我可以根据我的要求派生不同类型的对话框。例如：获取用户凭据的对话框，获取安装程序的文件夹路径的对话框等。现在的问题是我试图在某些条件下显示或隐藏对话框上的一些选项（控件）。这里 showwindow() 可以很好地显示控件，但是当我使用它们来隐藏控件时它根本不起作用。但如果我最小化或最大化应用程序，它工作正常。我觉得窗口没有被刷新（当它最小化或最大化时会发生刷新）。为什么？为了让它工作，我想创建自己的消息泵。提前谢谢

# android - 如何忽略在列表视图的行中所做的点击

> ID：14024099
> 
> 赞同：2
> 
> 时间：2012-12-24T17:22:49.197
> 
> 标签：android, android-layout, onitemclicklistener, onitemclick

场景：我有 n 个选项卡，每个选项卡都有自己的列表视图。我正在使用数组适配器来生成列表视图。传递给 arrayadaper 的数组具有对象数组。每个对象都有一个“菜单”和“菜单类型”。现在基于菜单类型，如果菜单类型是“菜单组”，我将使用不同的布局进行绘制并将背景设置为红色。

问题很简单.. 每当单击 listview 中的 menugroup 行时，什么都不会发生。换句话说，如何忽略在菜单组行中所做的点击。这需要仅在 onItemClick 方法中捕获在菜单行中进行的单击的详细信息。你能给我指出任何想法/线索吗？提前致谢。

```
public class MyCustomAdapter  extends ArrayAdapter<Menu> {
private ArrayList<Menu> menuItemList; 
Context context;
LayoutInflater vi;

public MyCustomAdapter(Context context ,ArrayList<Menu> menu) {    
    super(context, 0, menu );    
    this.menuItemList = new ArrayList<Menu>();    
    this.menuItemList.addAll(menu); 
    this.context =context;
    vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);  
    }    

private class ViewHolder {
    TextView menuItem;   
    TextView menuGroup;  
    }

public int getItemViewType(int position) {
    if (menuItemList.get(position).getMenuType().equals("menugroup")) 
        return 0;
    return 1;
}
public int getViewTypeCount() {
    return 2;
}
public View getView(final int position, View convertView, ViewGroup parent) {      
    ViewHolder holder;   
    int type = getItemViewType(position); 

    if (convertView == null) { 
        holder = new ViewHolder();  
        switch (type) {
        case 0:
            convertView = vi.inflate(R.layout.group,  null); 
            holder.menuItem = (TextView) convertView.findViewById(R.id.tvGroup);
            convertView.setBackgroundColor(Color.RED); 
            break;              
        case 1:
            convertView = vi.inflate(R.layout.item,  null); 
            holder.menuItem = (TextView) convertView.findViewById(R.id.tvItem); 
            break; 
         }  
        convertView.setTag(holder); 
    } else {
        holder = (ViewHolder) convertView.getTag();  
    }    

    switch (type) {
    case 0:         
        holder.menuItem.setText(menuItemList.get(position).getItemName()) ; 
        convertView.setBackgroundColor(Color.RED);  
        break;              
    case 1:
        holder.menuItem.setText(menuItemList.get(position).getItemName()) ;  
        break; 
     }

    return convertView; 
    } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T17:27:44.073

`isEnabled()`在您的适配器中覆盖并返回`false`不应被视为交互式的任何位置（[文档链接](https://developer.android.com/reference/android/widget/BaseAdapter.html#isEnabled%28int%29)）。默认情况下，这会`true`为所有元素返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T17:27:50.193

使用`getItemViewType()`来自侦听器的适配器。如果这返回 0，则不要在侦听器中执行任何其他操作。

```
listView.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {
        if (parent.getAdapter().getItemViewType(position) == 0)
            return;

        // do something for non-menugroup clicks
    }
}); 
```

# xpages - 使用来自另一个数据库的自定义控件

> ID：14024100
> 
> 赞同：1
> 
> 时间：2012-12-24T17:22:53.817
> 
> 标签：xpages

我需要使用自定义控件，它是来自另一个数据库的简单导航栏

导航栏是用 twitter bootstrap css 框架制作的，

为什么我需要使用来自另一个数据库的自定义控件？

因为这个导航栏对于四个笔记数据库是通用的，

我怎样才能更有效地实现这个？，四个数据库共有的控件

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T21:20:42.330

Domino 包含模板继承功能，允许在模板设计更改时更新整个应用程序或特定设计元素（如自定义控件）。您可以将四个应用程序中的每个应用程序中的共享自定义控件链接到一个通用模板，这样，如果您需要对其进行更改，您只需在一个地方进行更改。您不能引用仅存在于另一个应用程序中的*自定义控件*；您必须将其存储在每个中并链接设计以使其保持同步。

或者，您可以使用可扩展性 API 将其转换为库组件。此类控件可用于在安装了库的服务器上运行的任何应用程序。可以在[此处](http://notesin9.com/index.php/2012/04/04/notesin9-064-global-custom-controls-fixed/)找到此过程的视频教程。

# ruby-on-rails - 如何限制视图中加载的记录数？？？

> ID：14024108
> 
> 赞同：4
> 
> 时间：2012-12-24T17:23:39.567
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view

此代码显示了属于当前社区的 CommunityTopic 的所有记录。如何将数字限制为 10 条记录以在此处显示？

```
<ul>
  <% @community.community_topics.each do |topic| %>
    <li>
    <%= link_to topic.title, community_topic_path(@community, topic) %>
    <%= link_to topic.user.user_profile.nickname, community_topic_path(@community, topic) %>
    </li>
  <% end %>
</ul> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T17:25:10.790

使用`limit`方法：

```
<% @community.community_topics.limit(10).each do |topic| %> 
```

这只会将集合的前 10 个元素提供给块。如果你想更复杂，你可以使用类似[will_paginate 的](http://rubygems.org/gems/will_paginate)东西。

通常，此类数据获取应在控制器中进行。因此，与其拥有一个`@community`变量来让视图从中获取数据，`@community_topics`还不如拥有一个预先填充了您要呈现的数据的变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T17:26:18.790

您通常不应在视图中执行此操作，而应在控制器中执行此操作。您可以`limit`按照@Fermaref 的建议使用，也可以使用分页器来帮助您，例如 will_paginate 或 kaminari。

要将其移至控制器，请尝试以下操作：

```
def some_action
  @community = Community.find(params[:id])
  @community_topics = @community.community_topics.order(:some_attribute).limit(10)
end 
```

然后`@community_topics`在您的视图中使用。这里的一个优点是您现在可以将此逻辑移动到私有方法中，以便在需要时重用。您还可以在功能上测试`@community_topics`限制为 10 行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-06T02:47:11.810

使用 8.3 重新排序

reorder 方法会覆盖默认范围顺序。例如：

```
@categories = Category.includes(:subcategories).where(active: true).references(:subcategories).order(name: :asc).reorder('categories.name ASC', 'subcategories.name ASC') 
```

[http://guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)

# java - 对象而不是实例的碰撞测试

> ID：14024119
> 
> 赞同：0
> 
> 时间：2012-12-24T17:25:15.467
> 
> 标签：java

我正在尝试自定义一个碰撞器类，您可以在其中将两个对象传递给一个方法，如果两个对象中的任何一个发生碰撞，则执行某种操作。

比如我在做一个射击游戏，我想做的是说：

*   If Any`Ship`与任何子弹碰撞`Bullet`
    *   摧毁受影响的`Ship`和受影响的`Bullet`
*   别的
    *   没做什么

我想做的就是写一次，而不是为每一颗子弹和/或每艘船写一次。所以，我正在考虑做这样的事情：

```
ColliderEvent collide = new ColliderEvent();
collide.hit(Ship, Bullet, new Runnable(){
    @Override
    public void run(){
        // Destroy bullet and ship here
    }
}); 
```

然后在我的主游戏线程中，我会做一些事情来测试在某种方法中提供的两个对象是否`hit`在某个点发生碰撞，如果是，则执行传入的第三个参数`hit`

那么，有没有办法在不将 Ship/Bullet 实例传递给`hit`方法的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T17:55:13.887

我会尝试在您的库中使用[事件和侦听](http://docs.oracle.com/javase/tutorial/uiswing/events/intro.html)器来处理类似的事情。基本上，您将拥有一个检查整个地图是否发生碰撞的类。如果发生碰撞，它会调用对象类（例如子弹或船）中的方法（您实现），告诉他们它们发生了碰撞。

# javascript - 我必须刷新页面才能运行 Greasemonkey 脚本？

> ID：14024120
> 
> 赞同：4
> 
> 时间：2012-12-24T17:25:18.727
> 
> 标签：javascript, greasemonkey

所以我知道这与 AJAX 有关，但我已经阅读了一些主题并且不太明白我必须做什么。目前一切正常，但我必须刷新页面才能运行我的脚本。需要对我的代码执行什么操作才能使其在不刷新的情况下正常工作？

```
// ==UserScript==
// @name    Job Aids
// @description Aid in closing tickets
// @include https://techaccess.ad.qintra.com/WorkJobs/WorkJobs.aspx*
// @namespace   camzilla.net
// @version     1.1.20121128
// ==/UserScript==

var url  = window.location.href.split(".aspx");
var page = url[1].toLowerCase();

if (page == "#finaltest") {
    window.addEventListener ("load", finalResults, false);
} else if (page == "#threetoneslope") {
    window.addEventListener ("load", toneSlopeResults, false);
} else if (page == "#codes") {
    window.addEventListener ("load", closingComments, false);
} else if (page == "#cras") {
    window.addEventListener ("load", crasResults, false);
} else if (page == "#jobinfo") {
    window.addEventListener ("load", addLinks, false);
} else if (page == "") {
    if (getCookie("updater") == null) {
        var d = new Date();

        setCookie("updater", d.getTime(), 1);
        try {
            updateCheck();
        } catch(err) {
            // alert('Update checking failed');
        }
    }

    // setTimeout(promptDispatch, 1000);
}

function addLinks() {
    var mydiv   = document.querySelector('div[data-bind="CurrentJob.addr"]');
    var address = 'https://maps.google.com/maps?q=' + mydiv.textContent + ", UT";
    address.replace(/ /g, '+');  
    var a       = document.createElement("a");
    var txt     = document.createTextNode(mydiv.textContent);
    mydiv.textContent = "";
    a.appendChild(txt);
    a.href   = address;
    a.target = '_blank';
    mydiv.appendChild(a);

    mydiv   = document.querySelector('div[data-bind="CurrentJob.cktid"]');
    address = 'http://acmspjv1.interprise.com/cgi-bin/QC/DSL/dslam6100Int.pl?telephoneNum=';
    address+= mydiv.textContent;
    a       = document.createElement("a");
    txt     = document.createTextNode(mydiv.textContent);
    mydiv.textContent = "";
    a.appendChild(txt);
    a.href   = address;
    a.target = '_blank';
    mydiv.appendChild(a);
}

function updateCheck() {
    try {
        GM_xmlhttpRequest(
        {
            method: 'GET',
            url: 'http://camzilla.net/downloads/jobAids.user.js?v' + getCookie("updater"),
            headers: {'Cache-Control': 'no-cache'},
            onload: function(resp) {
                var local_version, remote_version, rt, script_name;

                rt = resp.responseText;
                remote_version = (/@version\s*(.*?)\s*$/m.exec(rt)[1]);
                local_version  = GM_info.script.version;

                if (remote_version != local_version) {

                    if(confirm(GM_info.script.name+' update v'+remote_version+ ' is available.\nWould you like to install it now?')) {
                        GM_openInTab('http://camzilla.net/downloads/jobAids.user.js');
                    } else {
                        alert('You will be reminded again tomorrow');
                    }
                }
            }
        });
    } catch(err) {
        // do something here
    }
}

function setCookie(c_name, value, exdays) {
    var exdate=new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
    document.cookie=c_name + "=" + c_value;
}

function getCookie(c_name) {
    var i,x,y,ARRcookies=document.cookie.split(";");

    for (i=0;i<ARRcookies.length;i++) {

        x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
        y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
        x=x.replace(/^\s+|\s+$/g,"");

        if (x==c_name) {
            return unescape(y);
        }
    }

    return null;
}

function finalResults() {
    var dc, current, loss, noise, pi, lb;

    dc      = getRandom(51, 49, 2);   
    current = getRandom(37, 29, 2);
    loss    = getRandom(7, 2, 2);
    noise   = getRandom(7, 1, 2);
    pi      = getRandom(67, 60, 2);
    lb      = getRandom(79, 70, 2);

    document.getElementById('finalTestInsightNo').click();

    document.getElementById("finalTestBeforeAcTg").value        = "0.00";
    document.getElementById("finalTestBeforeAcRg").value        = "0.00";
    document.getElementById("finalTestBeforeAcTr").value        = "0.00";
    document.getElementById("finalTestBeforeDcTr").value        = dc;
    document.getElementById("finalTestBeforeDcTg").value        = "0.00";
    document.getElementById("finalTestBeforeDcRg").value        = dc;
    document.getElementById("finalTestBeforeLoopCurrent").value = current;
    document.getElementById("finalTestAfterLoss").value         = loss;
    document.getElementById("finalTestAfterNoise").value        = noise;
    document.getElementById("finalTestAfterPi").value           = pi;
    document.getElementById("finalTestAfterLb").value           = lb;

    document.getElementById("finalTestAfterLb").focus();
    window.scrollTo(0, document.body.scrollHeight-250);

    // Store cookies to be used on cras page if needed
    setCookie("loss", loss, 1);
    setCookie("pi", pi, 1);
    setCookie("current", current, 1);
    setCookie("noise", noise, 1);
    setCookie("lb", lb, 1);
}

function crasResults() {
    document.getElementById("crasCircuitLoss").value    = getCookie("loss");
    document.getElementById("crasPowerInfluence").value = getCookie("pi");
    document.getElementById("crasLineCurrent").value    = getCookie("current");
    document.getElementById("crasCircuitNoise").value   = getCookie("noise");
    document.getElementById("crasBalance").value        = getCookie("lb");

    document.getElementById('crasFoundInF2').click();
}

function toneSlopeResults() {
    var dc = getRandom(51, 49, 2);   

    document.getElementById("ToneSlopeInsightNo").click();
    document.getElementById("ToneSlopeDmarcTaggedYes").click();
    document.getElementById("ToneSlopeClecDtPresentYes").click();

    document.getElementById("ToneSlopeBeforeDcTr").value    = dc;
    document.getElementById("ToneSlopeBeforeDcTg").value    = "0.00";
    document.getElementById("ToneSlopeBeforeDcRg").value    = dc;   
    document.getElementById("ToneSlopeRingbackTr").value    = getRandom(90,85,2);
    document.getElementById("ToneSlopeAfterResistTg").value = getRandom(998,20,0);
    document.getElementById("ToneSlopeAfterResistRg").value = getRandom(998,20,0);
    document.getElementById("ToneSlopeAfterResistTr").value = getRandom(998,20,0);

    document.getElementById("ToneSlopeAfter404").value      = "0.00";
    document.getElementById("ToneSlopeAfter1004").value     = getRandom(7, 3, 2);
    document.getElementById("ToneSlopeAfter2804").value     = "0.00";
    document.getElementById("ToneSlopeAfterNoise").value    = getRandom(7, 1, 2);
    document.getElementById("ToneSlopeAfterLb").value       = getRandom(79, 70, 2);
    document.getElementById("ToneSlopeCotName").value       = "NA";

    document.getElementById("ToneSlopeTn").focus();
}

function closingComments() {
    document.getElementById("flatRateJacks").value = "0";
    document.getElementById("rewiredJacks").value  = "0";

    document.getElementById("tripNo").click();
    document.getElementById("marketMass").click();
    document.getElementById("custTypeRes").click();
    document.getElementById("pairChangeNo").click();
    document.getElementById("tempDropNo").click();
    document.getElementById("goodCbrYes").click();

    document.getElementById("jobCloseComments").focus();
    window.scrollTo(0, 5000);
}

function getRandom(max, min, tenths) {
    var result = min + (Math.random() * (max - min + 1));
    return result.toFixed(tenths);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T18:21:08.517

请参阅[“addEventListener 仅在页面刷新时工作？”](https://stackoverflow.com/q/13771066/331508) 了解更多信息和类似情况。

您的脚本所期望的页面元素无疑会在`load`事件触发后出现。此外，从您的评论中，听起来页面的整个部分都被 AJAX 换掉了，但是 AJAX 足够礼貌，可以更改 URL 哈希。这意味着您将要触发该`hashchange`事件。

`addEventListener ("load"...`在这种情况下不要使用。将[waitForKeyElements() 实用程序](https://gist.github.com/2625891)与`hashchange`.

无需重构整个脚本以使用 jQuery（这将提供更清晰和更健壮的代码），将之前的所有内容替换`function addLinks() {...`为：

```
// ==UserScript==
// @name        Job Aids
// @description Aid in closing tickets
// @include     https://techaccess.ad.qintra.com/WorkJobs/WorkJobs.aspx*
// @namespace   camzilla.net
// @version     1.1.20121128
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require     https://gist.github.com/raw/2625891/waitForKeyElements.js
// @grant       GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

//-- Pages are "loaded" via AJAX...
window.addEventListener ("hashchange", fireOnNewPage,  false);

waitForKeyElements ("#crasCircuitLoss",                 crasResults);
waitForKeyElements ("#finalTestInsightNo",              finalResults);
waitForKeyElements ("#flatRateJacks",                   closingComments);
waitForKeyElements ("#ToneSlopeInsightNo",              toneSlopeResults);
waitForKeyElements ("div[data-bind="CurrentJob.addr"]", addLinks);

function fireOnNewPage () {
    switch (location.hash.toLowerCase() ) {
        case "#finaltest":
        case "#threetoneslope":
        case "#codes":
        case "#cras":
        case "#jobinfo":
            //-- No action needed, waitForKeyElements() handles this.
        break;
        default:
            if (getCookie("updater") == null) {
                var d = new Date();

                setCookie("updater", d.getTime(), 1);
                try {
                    updateCheck();
                } catch(err) {
                    // alert('Update checking failed');
                }
            }
        break;
    }
}
fireOnNewPage ();   //-- Initial run on initial, full page load. 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-24T17:43:10.040

通过搜索查看网上的一些 ajax 示例。例如：[http ://www.w3schools.com/ajax/ajax_examples.asp](http://www.w3schools.com/ajax/ajax_examples.asp)

AJAX 或 (A) 同步 (J) avascript (A)nd (X)ML（有趣的是，如今更倾向于使用 JSON），是一种 Javascript 使用浏览器对象与远程服务器通信的系统。这样做的一般用例是能够更新客户端的界面而无需转到另一个页面。不过，在我们开始之前，请注意几句。

不建议将 Ajax 用于登录身份验证和发布表单用户可以关闭 Javascript，或者由于 IT 政策可能会限制运行 Javascript

考虑到这一点，建议您不要将 AJAX 用作关键用户功能的唯一解决方案！总是有一个后备！注意：此社区 wiki 帖子使用 JQuery 来显示示例 AJAX 调用。推荐给新手，因为它隐藏了进行 AJAX 调用的浏览器兼容性问题。有关 JQuery 的更多信息，请查看 JQuery 网站。

注意：这些示例使用与 PHP 服务器的通信，但任何服务器端语言都可以使用。

AJAX 回调

```
function makeAjaxCall() {
  $.ajax({
    url: 'ajax/test.html',
    success: function(data) {
      alert('Horray the AJAX call succeeded!');
    },
    error: function(xhr, error) {
      alert('Holy errors batman!');
    }
  });
} 
```

AJAX 调用的本质

AJAX 调用可以是异步的或同步的。异步意味着浏览器将发出 AJAX 请求并继续做其他事情。同步意味着浏览器将停止它正在执行的操作，直到 AJAX 调用完成。这是两个代码方面差异的示例：

```
// An asynchronous call
// This is the default
$.ajax({
  url: '/server.php',
  success: function(data) {
    alert('Horray the AJAX call succeeded!');
  },
  error: function(xhr, error) {
    alert('Holy errors batman!');
  }
});
// This will get called right away
myFunction();
Now for a synchronous call:

// A synchronous call
$.ajax({
  url: '/server.php',
  async: false, // set the property here
  success: function(data) {
    alert('Horray the AJAX call succeeded!');
  },
  error: function(xhr, error) {
    alert('Holy errors batman!');
  }
}); 
```

# android - 如何在 Eclipse 中解决这个致命异常？

> ID：14024121
> 
> 赞同：-1
> 
> 时间：2012-12-24T17:25:53.127
> 
> 标签：android, android-2.2-froyo

这是我的应用程序的编码，我正在使用 Eclipse。

DisplayMessageActivity.java

```
package com.example.myfirstapp;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.NavUtils;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.TextView;

@SuppressLint("NewApi") public class DisplayMessageActivity extends Activity 
{
    @SuppressLint("NewApi") @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_display_message);
        // Show the Up button in the action bar.
        getActionBar().setDisplayHomeAsUpEnabled(true);
        //Get the message from the intent
        Intent intent = getIntent();
        String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

        //Create the text view
        TextView textView = new TextView(this);
        textView.setTextSize(40);
        textView.setText(message);

        //Set the text view
        setContentView(textView);
    }

//  OKAY TO REMOVE
    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_display_message, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) 
    {
        switch (item.getItemId()) 
        {
        case android.R.id.home:
            // This ID represents the Home or Up button. In the case of this
            // activity, the Up button is shown. Use NavUtils to allow users
            // to navigate up one level in the application structure. For
            // more details, see the Navigation pattern on Android Design:
            //
            // http://developer.android.com/design/patterns/navigation.html#up-vs-back
            //
            NavUtils.navigateUpFromSameTask(this);
            return true;
        }
        return super.onOptionsItemSelected(item);
    }

} 
```

* * *

MyFirstAppManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.myfirstapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" android:debuggable="true">
        <activity
            android:name="com.example.myfirstapp.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.myfirstapp.DisplayMessageActivity"
            android:label="@string/title_activity_display_message"
            android:parentActivityName="com.example.myfirstapp.MainActivity" >
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="com.example.myfirstapp.MainActivity" />
        </activity>
    </application>

</manifest> 
```

* * *

MainActivity.java

```
package com.example.myfirstapp;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;

public class MainActivity extends Activity 
{
    public final static String EXTRA_MESSAGE = "com.example.myfirstapp.MESSAGE";

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    /** Called when the user clicks the Send button */
    public  void sendMessage (View view)
    {
        // Do something in response to button
        Intent intent = new Intent(this, DisplayMessageActivity.class);
        EditText editText = (EditText) findViewById(R.id.edit_message);
        String message = editText.getText().toString();
        intent.putExtra(EXTRA_MESSAGE, message);
        startActivity(intent);
    }
} 
```

* * *

如果您需要更多信息或调试结果，请告诉我。我正在关注位于[此处](http://developer.android.com/training/basics/firstapp/starting-activity.html "开始另一个活动")的 Android 开发人员教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T17:39:35.810

如果没有 LogCat，我可以解决您的代码的一个问题。`@SuppressLint("NewApi")`. Lint 提出了一个很好的观点 - 您的目标 API 是 8。Froyo 和 Gingerbread 没有操作栏。

现在，在`DisplayMessageActivity`制作这样的方法：

```
 @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    private void setupActionBar() {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            // Show the Up button in the action bar.
            getActionBar().setDisplayHomeAsUpEnabled(true);
        }
    } 
```

现在从你的代码中取出这一行`DisplayMessageActivity`

```
getActionBar().setDisplayHomeAsUpEnabled(true); 
```

并将其替换为

```
setupActionBar(); 
```

这样，Android 会检查 API 版本，如果它低于 HoneyComb 的版本，则不会调用`getActionBar()`Gingerbread 上不存在的方法。

# objective-c - 从 NSTextView Objective-C 获取选择（突出显示的文本）字符串

> ID：14024124
> 
> 赞同：3
> 
> 时间：2012-12-24T17:26:05.813
> 
> 标签：objective-c, xcode, macos, nsstring, nstextview

如何从 a`NSTextView`中获取所选文本的字符串`NSString`？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T16:30:29.877

一个 NSText 可以有多个选择。使用 TextEditapp 进行检查：在按住 CMD 的同时用鼠标选择一个字符串。因此，您可以选择任意数量的字符串。因此我认为，更常见的解决方案是使用：

```
NSArray *ranges = [myTextView selectedRanges]; 
```

然后一一提取字符串。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-24T18:08:09.667

由于 NSTextView 是 NSText 的子类，因此您可以使用[NSText](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSText_Class/Reference/Reference.html#//apple_ref/occ/cl/NSText)实例方法来计算所选字符串，如下所示：

```
NSString *selected = [[myTextView string] 
                      substringWithRange:[myTextView selectedRange]]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-02-19T16:39:14.327

**Swift 5，根据@vauxhall 的回答**处理多个 NSTextView 选择****

 **```
extension NSTextView {
    var selectedText: String {
        var text = ""
        for case let range as NSRange in self.selectedRanges {
            text.append(string[range]+"\n")
        }
        text = String(text.dropLast())
        return text
    }
}

extension String {
    subscript (_ range: NSRange) -> Self {
        .init(self[index(startIndex, offsetBy: range.lowerBound) ..< index(startIndex, offsetBy: range.upperBound)])
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-24T16:11:25.870

迅速

```
extension NSTextView {
    var selectedText: String {
        string[selectedRange()]
    }
}

extension String {
    subscript (_ range: NSRange) -> Self {
        .init(self[index(startIndex, offsetBy: range.lowerBound) ..< index(startIndex, offsetBy: range.upperBound)])
    }
} 
```

用法

```
let textView = NSTextView()
print(textView.selectedText) 
```**

# arrays - 将图像像素加载到二维数组中

> ID：14024129
> 
> 赞同：-1
> 
> 时间：2012-12-24T17:26:40.740
> 
> 标签：arrays, pixels

如何将图像的像素加载到 C 或 C++ 中的二维数组中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T07:02:46.807

您可以使用[DevIL (openil)](http://openil.sourceforge.net/tuts/tut_5/index.htm)将图像文件加载到 ILubyte 数组中：

```
ILubyte *Lump;
ILuint Size;
FILE *File;

File = fopen("monkey.tga", "rb");
fseek(File, 0, SEEK_END);
Size = ftell(File);

Lump = (ILubyte*)malloc(Size);
fseek(File, 0, SEEK_SET);
fread(Lump, 1, Size, File);
fclose(File);

ilLoadL(IL_TGA, Lump, Size);
free(Lump); 
```

第一个字节是红色，第二个字节是绿色，第三个字节是蓝色，依此类推。如果你想要一个二维数组，编写嵌套循环可能是个好主意。

# google-apps-script - 从 Google Apps 脚本更新字段

> ID：14024130
> 
> 赞同：0
> 
> 时间：2012-12-24T17:26:51.787
> 
> 标签：google-apps-script

我在更新表单字段的值时遇到问题。我无法在其各自的文本框中更新日期，接收值的电子表格仅在我刷新页面后显示值（Ui 和电子表格都嵌入在 Google 站点中）

**var 日期，显式为全局 var**

```
var date=new Date(); 
```

**文本框**

```
var DataTextBox=app.createTextBox().setId('Data').setName('Data').setValue(date).setReadOnly(true).setText(Utilities.formatDate(date, 'GMT -02:00', 'dd/MM/yyyy HH:mm:ss')) 
```

**处理程序**

```
var clickHandler2=app.createServerHandler('updateAll');
button.addClickHandler(clickHandler2);
clickHandler2.addCallbackElement(panel); 
```

**该功能（更新了其他字段，但它们工作正常）**

```
function updateAll(e) {
  //DataTextBox.setValue(date).setReadOnly(true).setText(Utilities.formatDate(date, 'GMT -02:00', 'dd/MM/yyyy HH:mm:ss'));
  var newDate=date;
  app.getElementById("Data").setValue(newDate);
  app.getElementById("TicketId").setValue("");
  app.getElementById("TicketType").setValue(TicketTypeArray[0]);
  app.getElementById("DemandedBy").setValue(DemandedByArray[0]);
  app.getElementById("Analyst").setValue(AnalystArray[0]);
  app.getElementById("Description").setValue("");
} 
```

如何更新日期字段以及如何使电子表格显示表单提交的最后数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T17:43:36.570

您必须添加“返回应用程序”才能在 gui 中显示更新的字段。

# css - 无法在容器 DIV 中定位 2 个 DIV

> ID：14024134
> 
> 赞同：-2
> 
> 时间：2012-12-24T17:27:11.567
> 
> 标签：css, html, positioning

我有一个容器（DIV4），它并排包含另外两个 DIV（DIV2 和 DIV3）。DIV4 包含在另一个 DIV (DIV1) 中。关于每个 DIV 的一些信息：

DIV1：位置是绝对的。它本质上是一个弹出窗口，用于在单击缩略图图像时查看图像的放大版本。它只是在屏幕上移动以使其显示，并在单击链接以关闭它时离开屏幕。由于内容可以变化，它没有固定的宽度或高度。

DIV2：一系列嵌套的 DIV，它们包含大图像，并使用嵌套的 DIV 为图像生成框架和遮罩。带有图像本身（作为背景图像）的 DIV 具有指定的宽度和高度；外部 DIV（包括 DIV2）没有，它们只是使用它们的边距和边框设置来适应其中包含的 DIV。

DIV3：包含一系列 P 和 INPUT 标签，带有 BR 标签可以轻松控制它们的垂直位置。

DIV4：无属性，仅用于将 DIV2 和 DIV3 与它们下面的 DIV1 的其他内容分开分组。

最初，我尝试使用 float: left on DIV2 将 DIV3 带到它旁边。但是，我认为问题在于 DIV1 和 DIV4 没有指定的宽度，因此浏览器不知道是否有足够的空间将 DIV3 移动到 DIV2 旁边。在 IE 中，它正确定位了 DIV3，但 Firefox 将所有 DIV3 置于 DIV2 以下。所以我寻找了除花车之外的另一种解决方案。我能够在 DIV2 和 DIV3 上使用 display: inline-block。这使它们在两个浏览器中并排放置。

但是，DIV3 相对于 DIV2 显示为垂直居中。我希望 DIV3 的顶部与 DIV2 的顶部一致。我已经阅读了关于使用 position: absolute （在这种情况下是在 DIV3 上）将其强制到顶部，并且 position: relative 在他们的容器（DIV4）上，但我还必须为 DIV3 指定一个左侧位置，因为DIV2 变化，那将是一个问题。

我没有发布任何代码，因为我不确定哪些部分有用，并且 DIV 的全部内容及其 CSS 将是代码页（一些 DIV 是使用 PHP/MYSQL 动态编写的）。希望我对情况的描述是足够的。

这是我希望它看起来如何的图像：http: [//i46.tinypic.com/qstks1.gif](http://i46.tinypic.com/qstks1.gif)

再一次，我认为我在使用浮动或绝对定位的标准解决方案时遇到的主要问题是每个 DIV 的高度和宽度都是可变的。我*几乎*用内联块解决了这个问题，除了 DIV3 相对于 DIV2 的垂直定位。

编辑：根据请求，我在 JSFiddle 上放了一些代码。但是，显示的结果与它的实际外观完全不同，我知道会是这样。此代码包含在另一个 php 文件中，该文件本身包含在 index.php 中。根据标准 MVC 实践，大部分 php 变量都设置在 index.php 中。因此，如果不访问所有其他文件，它根本就无法真正工作，更不用说它从中获取图像文件名的 MySQL 数据库（以及它用来确定图像的高度和宽度）。[http://jsfiddle.net/Technetium/GKUgY/](http://jsfiddle.net/Technetium/GKUgY/)

出于某种原因，它不会让我在没有将代码嵌入的情况下提交这个（他们真的希望我把整个东西放在这里吗？），所以这里有一些虚假代码，只是为了让我编辑帖子......忽略这个。`$sense=false;`

这是整个 imageviewer.php 文件和整个 CSS 文件。在原来的帖子中，我简化了 DIV 名称，所以使用这个键： DIV1 = imageviewer（它是在 echo 语句中创建的，所以你不会在通常的 DIV 标签颜色下找到它），DIV2 = black_frame，DIV3 = right_of_image，和 DIV4 = image_plus_prints。底部的东西都在它自己的 DIV 中，简称为 below_image。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:14:40.990

您可能想看看 Matthew 的 3 列液体布局，很可能在您的街道上；正如其他海报指出的那样，如果您不发布代码，我们将无法解决问题。

[http://matthewjamestaylor.com/blog/perfect-3-column.htm](http://matthewjamestaylor.com/blog/perfect-3-column.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T11:45:03.300

尝试使用带有显示内联/内联块/块的静态位置而不是浮动。重置基本标签 - html 和 body - 以清除浏览器默认值并包括**height:100%**，因此您可以为其子项设置高度。

提示：您可以将 inline-block 与垂直对齐一起使用。

前任：

```
html, body{margin:0; padding:0; width:100%; height:100%; background:#eee;}
div{margin:0; padding:0; }

#div1{ margin:0 auto 0 auto; width:90%; height:100%; background:#fff; top:0; bottom:0; display:block; padding:10px 0; }
#div4{width:90%; height:80%; display:block; background:#eee; margin:0 auto 0 auto; padding:10px 0;}
#div2{ width:66%; margin-right:3%; height:auto; display:inline-block; border:#aeaeae solid 1px;}
#div3{ width:30%; height:auto; display:inline-block; border:#aeaeae solid 1px;}

<div id="div1"><!--full container -->
<div id="div4"> <!--principal -->
    <h1>Content</h1>
    <p>
    Left floating and relative position are trouble. Use display:inline/inline-block/block instead.

</p>

        <div id="div2"><!--content --> middle </div>

        <div id="div3"> <!--right side--> aside </div>

</div>

other content
</div><!--close all --> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T18:11:29.467

我制作了一个[JSFiddle](http://jsfiddle.net/VDFnb/2/)，我认为它应该适合您的情况。

（没关系。如果重新定位窗口，则 DIV2 和 DIV3 不会并排放置......但是......我现在正在努力解决这个问题。我认为这与 DIV1 没有设置大小有关，所以它会调整自己的大小，这会使其他 div 移动）

我在 DIV4 内部使用了一个名为 DIV5 的附加 div 并进行了设置`clear:both`，使其低于 DIV2 和 DIV3。

另外，请阅读这个 CSS 定位示例[http://www.barelyfitz.com/screencast/html-training/css/positioning/](http://www.barelyfitz.com/screencast/html-training/css/positioning/)

# objective-c - UIScrollView 子视图容器错误地更改帧

> ID：14024137
> 
> 赞同：3
> 
> 时间：2012-12-24T17:27:43.833
> 
> 标签：objective-c, ios, uiviewcontroller, uiscrollview, childviewcontroller

我遇到了 ChildViewController 视图的问题，他们的框架自动更改为他们父母的框架。我已经将它提炼成一个带有单个类的示例项目来说明正在发生的事情。

简而言之，我：

*   有一个 ScrollViewController
*   添加 ScrollViewController 作为 RootViewController 并添加到 Window
*   在 ScrollViewController - 在**ViewDidLoad**我创建一个带有 {{0, 0}, {72704, 768}} 框架的 Container UIView
*   创建一个框架为 {{0, 0}, {1024, 768}} 的 UIScrollView
*   将 ScrollView 添加到 ScrollViewController 视图
*   将容器添加到 ScrollView
*   创建 71 个 UIViewControllers，框架为 {{0, 0}, {1024, 768}}
*   将它们添加为 ScrollViewController 的 ChildViewControllers
*   将他们的子视图添加到容器中
*   **在ViewDidAppear**上记录所有 71 帧
***   每帧都是 {{0, 0}, {72704, 768}} - 不是我设置的 1024 x 768。**

 **所有自动调整掩码/自动调整子视图设置为 NO。

这在 iOS 6 上运行，但也发生在 iOS 5.1 上！

**更新！** 似乎 addChildViewController 是罪魁祸首。不知道为什么 - 这是预期的行为吗？我需要能够将这些 childViewControllers 添加到 ScrollViewController 而他们的视图框架不会自动缩放到他们父母的。这不是理论上的方法吗？

另外 - 任何地方都没有NIB。在 Scrollview / ContainerView 和 71 个 VC 视图中将“translatesAutoresizingMaskIntoConstraints”设置为 NO。不幸的是，同样的事情。这似乎是非常奇怪的行为......

链接到项目 - [https://dl.dropbox.com/u/637000/TestingBug.zip](https://dl.dropbox.com/u/637000/TestingBug.zip)

**来自 ScrollViewController 的代码：**

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];

        [self initScrollView];
        [self createTestViews];
    }

    - (void)initScrollView {
        if(scrollView == nil) {
            containerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 72704, 768)];
            containerView.autoresizingMask = UIViewAutoresizingNone;
            containerView.autoresizesSubviews = NO;

            scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)];
            scrollView.autoresizingMask = UIViewAutoresizingNone;
            scrollView.showsHorizontalScrollIndicator = NO;
            scrollView.showsVerticalScrollIndicator = NO;
            scrollView.autoresizesSubviews = NO;
            scrollView.delegate = self;

            [self.view addSubview:scrollView];
            [scrollView addSubview:containerView];
        }
    }

    - (void)createTestViews {
        for(int count = 0; count < 71; count++) {
            [self createTestView];
        }
    }

    - (void)createTestView {
        UIViewController *testVC = [[UIViewController alloc] init];
        testVC.view.frame = CGRectMake(0, 0, 1024, 768);

        [self addChildViewController:testVC];
        [containerView addSubview:testVC.view];
        [testVC didMoveToParentViewController:self];
    }

    - (void)viewDidAppear:(BOOL)animated {
        [super viewDidAppear:animated];

        for(UIView *subview in containerView.subviews) {
            // THIS IS {{0, 0}, {72704, 768}} NOT 1024 x 768
            NSLog(@"BROKEN FRAME = %@", NSStringFromCGRect(subview.frame));
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T17:40:18.680

> 创建 71 个 UIViewControllers，框架为 {{0, 0}, {1024, 768}}

哇！这听起来像是对 UIViewController 的完全不必要的使用。没有它你能应付吗？通常的做法是将视图直接添加到滚动视图中，而无需任何干预 UIViewController 包含 foo。

为了更直接地解决您的问题：可能涉及自动布局吗？（对于在 Xcode 4.5 中创建的任何新笔尖，默认情况下答案是肯定的。）我没有看到你设置`translatesAutoresizingMaskIntoConstraints`为 NO，所以如果自动布局起作用，它可能正在调整视图的大小。当然我也没有看到你设置任何`autoresizingMask`开始，所以你得到一个你不负责的默认值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-25T10:46:34.297

在 IOS 7.0 中使用 self.automaticallyAdjustsScrollViewInsets=NO; 在 ViewDidLoad**

# c# - 使用缓存键锁定缓存

> ID：14024145
> 
> 赞同：2
> 
> 时间：2012-12-24T17:28:52.060
> 
> 标签：c#, asp.net, caching

我们有下面的代码用于提高性能。它工作正常，但每隔几天我们就会开始收到大量异常（如下）。它与音量无关，但它是随机的。

注释：/// 执行锁定代码以在必要时产生结果，同时线程锁定它，然后缓存结果。

第 45 行是：lock (_keys.First(k => k == key))

有任何想法吗？

代码：

```
 public class LockedCaching
{
    private static List<string> _keys = new List<string>();

    public class Result
    {
        public object Value { get; set; }
        public bool ExecutedDataOperation { get; set; }
    }

    /// <summary>
    /// Performs the locked code to produce the result if necessary while thread locking it and then caching the result.
    /// </summary>
    /// <param name="key"></param>
    /// <param name="expiration"></param>
    /// <param name="data"></param>
    /// <returns></returns>
    public static Result Request(string key, DateTime expiration, RequestDataOperation data)
    {
        if (key == null)
        {
            return new Result { Value = data(), ExecutedDataOperation = true };
        }

        //Does the key have an instance for locking yet (in our _keys list)?
        bool addedKey = false;
        bool executedDataOperation = false;
        if (!_keys.Exists(s => s == key))
        {
            _keys.Add(key);
            addedKey = true;
        }
        object ret = HttpContext.Current.Cache[key];
        if (ret == null)
        {
            lock (_keys.First(k => k == key))
            {
                ret = HttpContext.Current.Cache[key];
                if (ret == null)
                {
                    ret = data();
                    executedDataOperation = true;
                    if(ret != null)
                        HttpContext.Current.Cache.Insert(key, ret, null, expiration, new TimeSpan(0));
                }
            }
        }
        if (addedKey)
            CleanUpOldKeys();
        return new Result { Value = ret, ExecutedDataOperation = executedDataOperation };
    }

    private static void CleanUpOldKeys()
    {
        _keys.RemoveAll(k => HttpContext.Current.Cache[k] == null);
    }
} 
```

例外：

> 异常：System.Web.HttpUnhandledException (0x80004005)：引发了“System.Web.HttpUnhandledException”类型的异常。---> System.ArgumentNullException：值不能为空。参数名称：System.Web.Caching.CacheInternal.DoGet(Boolean isPublic, String key, CacheGetOptions getOptions) 中 PROJECT\LockedCaching.cs 中 PROJECT.LockedCaching.b__8(String k) 的键：System.Collections.Generic 的第 64 行。列表`1.RemoveAll(Predicate`1 个匹配项）在 PROJECT\LockedCaching.cs 中的 PROJECT.LockedCaching.CleanUpOldKeys()：PROJECTLockedCaching.Request(String key, DateTime expiration, RequestDataOperation data) 中 PROJECT\LockedCaching.cs 中的第 64 行：FeaturesWithFlags1.DataBind() 中的第 58 行System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) at System.Web.UI.Control.LoadRecursive() at System.Web.UI.Control.LoadRecursive() at System.Web .UI.Control.LoadRecursive() 在 System.Web.UI.Control.LoadRecursive() 在 System.Web.UI.Control.LoadRecursive() 在 System.Web.UI.Control.LoadRecursive() 在 System.Web.UI .Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 在 System.Web.UI.Page.HandleError(Exception e) 在 System.Web.UI.Page。ProcessRequestMain（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint）在 System.Web.UI.Page.ProcessRequest（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint）在 System.Web.UI.Page.ProcessRequest（）在 System.Web.UI.Page.ProcessRequest（HttpContext 上下文) 在 System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() 在 System.Web.HttpApplication.ExecuteStep(IExecutionStep 步骤，布尔&完成同步)System.Web.HttpApplication.IExecutionStep.Execute() 在 System.Web.HttpApplication.ExecuteStep（IExecutionStep 步骤，布尔值&完成同步）System.Web.HttpApplication.IExecutionStep.Execute() 在 System.Web.HttpApplication.ExecuteStep（IExecutionStep 步骤，布尔值&完成同步）

使用它的 Web 控件 - 此 Web 控件从 Web 服务请求位置列表。我们几乎在任何我们调用 web 服务的地方都使用这个lockedcache 请求：

```
public override void DataBind()
{
    try
    {
        string cacheKey = "GetSites|";
        mt_site_config[] sites = (mt_site_config[])LockedCaching.Request(cacheKey, DateTime.UtcNow.AddMinutes(10),
        () =>
        {
            WebServiceClient service = new WebServiceClient();
            sites = service.GetSites();
            service.Close();
            return sites;
        }).Value;
        ddlLocation.Items.Clear();
        ddlLocation.Items.Add(new ListItem("Please Select"));
        ddlLocation.Items.Add(new ListItem("Administration"));
        ddlLocation.Items.AddRange
        (
            sites.Select
            (
                s => new ListItem(s.site_name + " " + s.site_location, s.th_code.ToString())
            ).ToArray()
        );
    }
    catch (Exception ex) {
        Logger.Error("ContactUs Control Exception: Exp" + Environment.NewLine + ex.Message);
    }
    base.DataBind(); 
```

}

谢谢您的意见。ConcurrentDictionary 是要走的路。我们收到错误的原因是因为 linq 代码“lock (_keys.First(k => k == key))”返回异常而不是 null。使用并发字典会更安全，并且希望不会导致任何锁定问题。

修改代码：

```
public class LockedCaching
{

    public class Result
    {
        public object Value { get; set; }
        public bool ExecutedDataOperation { get; set; }
    }

    public static Result Request(string key, DateTime expiration, RequestDataOperation data)
    {
        if (key == null)
        {
            return new Result { Value = data(), ExecutedDataOperation = true };
        }

        object results = HttpContext.Current.Cache[key];
        bool executedDataOperation = false;

        if (results == null)
        {
            object miniLock = _miniLocks.GetOrAdd(key, k => new object());
            lock (miniLock)
            {
                results = HttpContext.Current.Cache[key];
                if (results == null)
                {
                    results = data();
                    executedDataOperation = true;
                    if (results != null)
                        HttpContext.Current.Cache.Insert(key, results, null, expiration, new TimeSpan(0));

                    object temp;
                    object tempResults;
                    if (_miniLocks.TryGetValue(key, out temp) && (temp == miniLock))
                        _miniLocks.TryRemove(key, out tempResults);

                }
            }
        }
        return new Result { Value = results, ExecutedDataOperation = executedDataOperation };
    }

    private static readonly ConcurrentDictionary<string, object> _miniLocks =
                              new ConcurrentDictionary<string, object>();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T16:43:41.320

您的代码在集合上有竞争条件。您同时写入它。这可以产生各种影响。

```
_keys.Add(key);
...
_keys.RemoveAll(k => HttpContext.Current.Cache[k] == null); 
```

还有其他种族。您可能应该修改扩展您放在全局锁定下的代码量。小心不要通过使用该全局锁来破坏过多的并发性。

也许你可以切换到`ConcurrentDictionary<string, Lazy<CacheValue>>`. 这是像您一样工作的缓存的规范模式。它不受缓存标记的影响。

小心穿线。在这种情况下很容易引入微妙的比赛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T18:06:23.990

您看到的异常表明其中`_keys`有一个 null 元素。从您的代码片段来看，这不应该发生。所以要么我们看不到的其他代码是添加空值，要么你有线程安全问题。由于您几乎可以肯定有线程安全错误（请参阅问题评论），我会开始寻找那里。

# database-design - 对许多表共有的数据进行建模

> ID：14024147
> 
> 赞同：2
> 
> 时间：2012-12-24T17:29:10.500
> 
> 标签：database-design

我有一个可能包含数千个实体表的动态数据模型，我们称它们为 E1、E2、...，或者通常为 EX。

还有少量的实用程序表，其中包含可能附加到这些实体的数据，例如审计表或“附加文档”表，我们称它们为 U1、U2、...，或通常为 UX。

每对 EX-UX 的关系是一对多（例如 E1 中的每个实例可能有多个附加文档，但每个文档仅附加到任何 EX 中的一个实例）。

基本问题是每个 UX 都包含引用不同表 EX 的行。

有几种方法可以对这种关系进行建模：

**链接表解决方案**

为每对 EX/UX 创建一个链接表。例如：

```
E1_U1 (
    E1_ID FK TO E1
    U1_ID FK TO U1
) 
```

*   优点：干净。EX型号不变
*   缺点：表数量激增，我们也可以为每个实体创建每个实用程序表的实例。如果我需要反向查找，例如显示 EX 中的实例，它被 U1 中的某个实例引用，我需要搜索所有链接表 EX_U1。

**实体表解决方案**

创建一个新表 ENTITY，其中包含一列 ENTITY_ID，它是任何 EX 中每一行的唯一 ID。在此模型中，将每个 EX 的主键替换为 ENTITY_ID 是有意义的。

```
ENTITY (
    ENTITY_ID PK
)

E1 (
    ENTITY_ID PK, FK TO ENTITY
    ...
)

U1 (
    U1_ID PK
    ENTITY_ID FK TO ENTITY
    ...
) 
```

*   优点：我想这是建模继承的标准方法
*   缺点：显着改变了数据模型和应用程序逻辑。只有通过在所有 EX 中搜索正确的 ENTITY_ID 才能进行反向查找。

**“键入的外键”解决方案**

为每个 UX 提供两列作为“键入的外键”：ETABLE_ID 和 ETABLE_ROW_ID。ETABLE_ID 引用该表（即哪个EX），ETABLE_ROW_ID 是该表中的行。

在我的模型中这是可能的，因为

*   我已经在应用程序逻辑中保留了我的实体表的元模型，因此 ETABLE_ID 很容易获得
*   ETABLE_ROW_ID 保证所有 E 的类型相同

> ```
> U1 (
>     U1_ID PK
>     ETABLE_ID FK TO ETABLE
>     ETABLE_ROW_ID 
>     ...
> ) 
> ```

*   优点：EX的型号没有变化。反向查找可以很容易地在应用程序逻辑中实现。
*   缺点：问题显然是我们不能对 ETABLE_ROW_ID 应用外键约束。

虽然它不是干净的关系设计，但我仍然赞成最后一种解决方案，因为它具有实际优势。我可以在应用程序逻辑中建模丢失的引用完整性。

这个问题的首选解决方案是什么？有什么经验/建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T19:36:36.610

**具有以下类型的实体表解决方案：**

```
ENTITY (
    ENTITY_ID PK,
    ENTITY_TYPE,
    UNIQUE KEY (ENTITY_ID, ENTITY_TYPE)
)

E1 (
    ENTITY_ID PK, 
    ENTITY_TYPE, constrained to value '1'
    FK (ENTITY_ID, ENTITY_TYPE) TO ENTITY table    
    ...
)

U1 (
    U1_ID PK
    ENTITY_ID FK TO ENTITY
    ...
) 
```

将类型存储在 ENTITY 表中的好处是您不必搜索所有 E 表来找出它是什么类型。

每个 E 表都将自己的类型限制为一个固定值，因此自然而然地，E1 中的任何行都只能引用 type=1 的 ENTITY 行。

也可以看看：

*   [`polymorphic-associations`](https://stackoverflow.com/search?q=user:20860%20%5Bpolymorphic-associations%5D)我过去对标签的回答
*   我的演讲[SQL 中的实用面向对象模型](http://www.slideshare.net/billkarwin/practical-object-oriented-models-in-sql)
*   我的书[SQL 反模式：避免数据库编程的陷阱](http://pragprog.com/book/bksqla/sql-antipatterns)

# java - 如何在没有 Eclipse 构建路径选项的情况下添加外部 jar？

> ID：14024151
> 
> 赞同：4
> 
> 时间：2012-12-24T17:30:03.500
> 
> 标签：java, eclipse, import, jar, buildpath

我的 java 文件 jdbc11.java 使用 cmd 中的命令成功编译`javac jdbc11.java`，之后当我尝试运行时`java jdbc11`出现此异常：

```
java.lang.ClassNotFoundException: com.mysql.jdbc:Driver 
```

在文件中引用此代码

`Class.forName("com.mysql.jdbc.Driver");`

，当我在eclipse中尝试它时，我将外部jar添加到“Java Build Path”中：`mysql-connector-java-5.1.20-bin.jar`并且它运行成功。如果我没有用 eclipse 修复它，我应该在第一次尝试使用`java jdbc11`命令时做什么才能正常工作？注意：与 jdbc11.java 在同一目录中的 jar

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T17:34:50.717

执行命令行代码时，尝试将 mysql-connector jar 添加到类路径：

```
java -cp mysql-connector-java-5.1.20-bin.jar;. jdbc11 
```

[http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/classpath.html](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/classpath.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T17:35:23.047

您必须在执行命令中添加 -classpath

java -classpath mysql-connector-java-5.1.20-bin.jar jdbc11

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T17:33:15.393

如果我理解你的意思，那么你缺少的是 java 命令行中的 -cp 选项，如果你将它放在构建路径中，这就是 eclispe 会在内部执行的操作。

# javascript - inputText 空检查

> ID：14024152
> 
> 赞同：0
> 
> 时间：2012-12-24T17:30:33.257
> 
> 标签：javascript, jsf

我正在使用 JSF，我有一个 h:inputText 文本框，

```
<h:form>
                    Please enter your username:
                    <h:inputText value="#{user.id}"/><br/><br/> 
```

我希望当用户按下提交按钮时，

```
<h:commandButton value="Submit" action="upload/uploadText"/> 
```

用于检查输入文本框中是否输入了值并且长度超过 6 个字符

我该怎么做？

我试过的代码：

```
<script type="text/javascript"> 

        function required(){  
            if (document.getElementById("Username").value.length == 0)  
            {   
                alert("message");        
                return false;   
            }       
            return true;   
        }

    </script> 
```

有了这个 ：

```
<h:body>

                <h:form onsubmit="return required();">
                    Please enter your username:
                    <h:inputText id="Username" value="#{user.id}">
                    </h:inputText><br></br><br></br>

                    To print a piece of text, please press the submit button below to upload the text:<br/><br/>
                    <h:commandButton type="submit" value="Submit" action="upload/uploadText"/>
                </h:form>

            </h:body> 
```

我仍然无法让脚本运行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T17:50:53.313

由于您使用的是 JSF，因此您应该尽可能坚持使用 JSF 验证。

```
<h:inputText id="Username" value="#{UserBean.userName}">
  <f:validateLength minimum="6" maximum="15"/>
</h:inputText> 
```

几个链接

[http://viralpatel.net/blogs/javaserver-faces-jsf-validation-tutorial-error-handling-jsf-validator/](http://viralpatel.net/blogs/javaserver-faces-jsf-validation-tutorial-error-handling-jsf-validator/)

[http://www.mkyong.com/jsf2/customize-validation-error-message-in-jsf-2-0/](http://www.mkyong.com/jsf2/customize-validation-error-message-in-jsf-2-0/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T17:40:11.037

您需要在代码中更改`=<`为`<=`。

我不知道 JSF 语法，但您可以尝试更改这三个区域：

`<h:inputText name="myTextField" id="myTextField" /><br/><br/>`

`<h:form onsubmit="return required();">`

```
function required(){  
     if (document.getElementById("myTextField").value.length <= 6)  
      {   
         alert("message");        
         return false;   
      }       
      return true;   
} 
```

如果您只需要验证一个字段。

# ios - iOS——OpenSSL 和加速加密？

> ID：14024155
> 
> 赞同：2
> 
> 时间：2012-12-24T17:31:43.370
> 
> 标签：ios, performance, cryptography, openssl, hardware-acceleration

我知道除了旧款 iPhone 和所有 iPad 之外的所有设备都有内置的加密加速器，用于在这些设备上更快地生成密钥和加密。在我的应用程序中，我使用 OpenSSL 来执行这些功能，而不是 CommonCrypto。有谁知道 OpenSSL 是否会利用内置的加密处理器？或者使用 OpenSSL 完成的加密会比使用 CommonCrypto 时明显慢吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T18:32:20.813

用于硬件加密加速的 IOKit 钩子不是公共 API；因此，面向 App Store 的开发人员的任何 iOS 打包 OpenSSL 库都不太可能包含它们。（不过，您总是可以检查[源](http://www.openssl.org/source/)：寻找`IOAESAccelerator`。）

还值得注意的是，缺少硬件加密的“旧设备”在这一点上已经相当老了：所有可以运行 iOS 5.x（或 6.x）的设备都有硬件加密，这占了绝大多数的活跃安装基础。这点。您可能需要考虑支持 4 年以上的设备是否值得投资。

如果你确实使用 CommonCrypto，你会在适当的地方获得硬件加速，但请注意它[仅在某些条件下](http://spouliot.wordpress.com/2012/05/02/managed-crypto-vs-commoncrypto-deciphering-results/)：你可能希望在采用之前确保你的使用符合这些条件。

# java - 通过按钮激活的日期选择器选择日期后更改按钮上的文本

> ID：14024157
> 
> 赞同：0
> 
> 时间：2012-12-24T17:32:23.033
> 
> 标签：java, android, android-layout, android-fragments, android-button

我希望日期选择器选择的日期显示在调用日期选择器的按钮上（通过片段类）。我试图通过在类中创建一个方法来执行此操作，该方法定义在按钮的 onClick 之后要执行的操作。该方法通过 setText() 更改文本。该方法由片段类通过 onDateSet() 按钮调用。

现在，当我通过日期选择器设置日期时，应用程序崩溃了。

**代码：1。**

> ```
>  public void onDateSet(DatePicker view, int year, int month, int day) {
>       Addproject changetxt = new Addproject();
>       changetxt.changebuttontext(year, month, day);
>       //Doing something with the date chosen
>     } 
> ```

这里调用另一个类的方法，该方法将更改按钮的文本，并传递日、月、年数据。

**代码 2。**

> ```
>  public void changebuttontext (int year, int month, int day) {
>         Button date_button = (Button)findViewById(R.id.datebutton);     
>         date_button.setText(year + "/" + month + "/" + day);
>     } 
> ```

此方法应该更改按钮上的文本。

**目录日志：**

> ```
> 12-24 22:42:25.608: E/AndroidRuntime(3478):   at     
> com.kk.project.DatePickerFragment.onDateSet(DatePickerFragment.java:33)
> 12-24 22:42:25.608: E/AndroidRuntime(3478):     at     
> android.app.DatePickerDialog.onClick(DatePickerDialog.java:111)
> 12-24 22:42:25.608: E/AndroidRuntime(3478):     at  
> com.android.internal.app.AlertController$ButtonHandler.handleMessage
> (AlertController.java:166)
> 12-24 22:42:25.608: E/AndroidRuntime(3478):     at  
> android.os.Handler.dispatchMessage(Handler.java:99)
> 12-24 22:42:25.608: E/AndroidRuntime(3478):     at      
> android.os.Looper.loop(Looper.java:137)
> 12-24 22:42:25.608: E/AndroidRuntime(3478):     at     
> android.app.ActivityThread.main(ActivityThread.java:4424)
> 12-24 22:42:25.608: E/AndroidRuntime(3478):     at  
> java.lang.reflect.Method.invokeNative(Native Method)
> 12-24 22:42:25.608: E/AndroidRuntime(3478):     at 
> java.lang.reflect.Method.invoke(Method.java:511)
> 12-24 22:42:25.608: E/AndroidRuntime(3478):     at  
> com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
> 12-24 22:42:25.608: E/AndroidRuntime(3478):     at 
> com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
> 12-24 22:42:25.608: E/AndroidRuntime(3478):     at     
> dalvik.system.NativeStart.main(Native Method) 
> ```

**我只贴了红色的部分**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T17:59:12.770

The problem I think after looking at your data is, you are trying to findViewById when the activity is not in focus. As a solution you can try something like this.

```
public void changebuttontext (int year, int month, int day) {
   selectedDate = year + "/" + month + "/" + day;
} 
```

here selected date is a field variable. Now in onWindowFocusChange() or onResume whichever works place the

```
 Button date_button = (Button)findViewById(R.id.datebutton);     
    date_button.setText(selectedDate); 
```

part.

might want to check this for the excetion. [Illegal argument exception in android dialog](https://stackoverflow.com/questions/3673888/illegal-argument-exception-in-android-dialog)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T17:42:33.240

```
public void changebuttontext (int year, int month, int day) {
    Button date_button = (Button)findViewById(R.id.datebutton);     
    date_button.setText(year + "/" + month + "/" + day);
} 
```

应从 Activity 类调用此代码。如果 AddProject 是外部类程序将崩溃。

# vb.net - 将 AD 用户添加到 AD 组

> ID：14024160
> 
> 赞同：2
> 
> 时间：2012-12-24T17:32:57.607
> 
> 标签：vb.net, active-directory, active-directory-group

我有一个 VB 应用程序 (.NET 4.0)，用户在其中选择他们拥有的 AD 组，然后可以将预定义列表中的用户添加到该组。从 AD 中提取的组和从 Oracle 中提取的用户都是现有的 AD 用户。

您将看到三个带注释的代码块，我已经尝试了所有三个并得到“COMException is unhandled by user code: Unspecified error”。

```
<WebMethod()> _
Public Shared Function AddDirectReport(ByVal User As String, ByVal Group As String) As String
    Dim GroupMembers As List(Of String) = LoadGroupMembers(Group)
    If GroupMembers.Contains(User) Then
        Return "USER " & User & " IS ALREADY IN GROUP " & Group
    End If

    Dim SearchRoot As New DirectoryEntry("[LDAP Path]")

    Dim GroupSearcher As New DirectorySearcher
    With GroupSearcher
        .SearchRoot = SearchRoot
        .Filter = "(&(ObjectClass=Group)(CN=" & Group & "))"
    End With

    Dim UserSearcher As New DirectorySearcher
    With UserSearcher
        .SearchRoot = SearchRoot
        .Filter = "(&(ObjectClass=Person)(CN=" & User & "))"
    End With

    Dim g As DirectoryEntry = GroupSearcher.FindOne.GetDirectoryEntry
    Dim u As DirectoryEntry = UserSearcher.FindOne.GetDirectoryEntry

    'With u
    '    .Properties("memberof").Add(g)
    '    .CommitChanges()
    'End With

    'With g
    '    .Properties("member").Add(u)
    '    .CommitChanges()
    'End With

    'With g
    '    .Properties("members").Add(u)
    '    .CommitChanges()
    'End With
    Return "Success?"
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T17:56:42.097

[这](http://www.codeproject.com/Articles/18102/Howto-Almost-Everything-In-Active-Directory-via-C)是一个很好的资源。

在其中，您会发现您的第二个几乎就在那里。您不需要将 DirectoryEntry 传递给 add 方法，而是需要其专有名称：

```
With g
    .Properties("member").Add(u.Properties("distinguishedName").Value)
    .CommitChanges()
End With 
```

# css - Zurb Foundation：类行的边距顶部不起作用

> ID：14024166
> 
> 赞同：4
> 
> 时间：2012-12-24T17:33:39.360
> 
> 标签：css, zurb-foundation

我有两行堆叠，希望第二行的边距顶部为 50px。但是当我为第二个 DIV 添加一个类“extramargin”并添加 margin-top:50px; 它没有任何效果。当我把它放在我的 HTML 中时，它就可以工作了。

这里有谁知道如何在这两行之间添加这个额外的间距？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T17:45:33.177

### 试试这个可能是：

```
.row.extramargin {margin: 50px auto 10px !important;} 
```

# c++ - 编译 在使用 C++ 的 Eclipse 中

> ID：14024169
> 
> 赞同：2
> 
> 时间：2012-12-24T17:34:10.637
> 
> 标签：c++, eclipse, libjson

我正在尝试包含和编译

```
#include <json/json.h> 
```

但是，即使我已经安装它并将其包含在项目设置中，它也找不到路径。

这是我到目前为止所做的：

libjson的路径：

```
 /usr/include/jsoncpp-src-0.5.0 
```

eclipse gcc c++ 编译器中的选项：

```
-Ijson_linux-gcc-4.5.2_libmt -O0 -g3 -Wall -c -fmessage-length=0 -ljson_linux-gcc-4.5.2_libmt 
```

gcc c++ 链接器中的库：

```
-L/usr/include/jsoncpp-src-0.5.0/include/ 
```

还有什么我忘了做才能让它工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T17:41:40.397

尝试将 -I/usr/include/jsoncpp-src-0.5.0 添加到编译器选项

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T17:42:44.063

-L 指示在哪里可以找到共享库（例如 .so）

-I 是头文件的搜索路径。

如果在编译过程中出现问题（json.h not found），那么你已经指出错误了 -I

如果它在链接期间发生（未找到符号），那么您指出了错误的 -L、错误的 -l，或者忘记运行 ldconfig

# jquery - 在悬停时创建 Bootstrap 2 弹出框

> ID：14024172
> 
> 赞同：-6
> 
> 时间：2012-12-24T17:35:09.913
> 
> 标签：jquery, twitter-bootstrap, popover

在哪里可以查看 boostrap 2 版本的弹出框的简单示例？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T17:42:22.627

### 你可以在[Bootstrap Popovers获得它](http://twitter.github.com/bootstrap/javascript.html#popovers)

示例代码是：

```
$('#example').popover(options); 
```

### 选项

![选项](../Images/b6765d836191b39939eda5362b611629.png)

# c# - 在 Windows 8 网格应用程序上选择了哪个数据实例

> ID：14024173
> 
> 赞同：0
> 
> 时间：2012-12-24T17:35:10.177
> 
> 标签：c#, .net, windows-8, microsoft-metro

所以我有一个应用程序，其中包含一些具有多对多关系的数据。一个日记可以有多个条目，每个条目可以属于多个日记。这很好地显示在网格应用程序中：

![在此处输入图像描述](../Images/4ddbf24d7704aef24d261fe1ee68d8db.png)

从上面的图片可以看出，1 个条目可以出现在多个日记中。

这很好用，但是当他们单击一个条目时，它会触发一个事件，我可以在该事件中获取与特定图块关联的对象，但不能获取它所在的组。我需要能够知道他们的条目是哪个日记单击来自，以便您可以在该特定日记的每个条目之间向左/向右移动。

因此，当他们单击条目磁​​贴（例如上图中的“内存 1 标题”磁贴）时，会触发以下事件：

```
/// <summary>
/// Invoked when an item is clicked.
/// </summary>
/// <param name="sender">The GridView (or ListView when the application is snapped)
/// displaying the item clicked.</param>
/// <param name="e">Event data that describes the item clicked.</param>
void ItemView_ItemClick(object sender, ItemClickEventArgs e)
{
    // Navigate to the appropriate destination page, configuring the new page
    // by passing required information as a navigation parameter
} 
```

而且我可以通过这样做来获取对象，`e.ClickedItem`但我无法看到他们单击的项目所在的组。有人能帮我解决这个问题吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T19:18:27.847

没有明显的方法可以做到这一点。一种想法是让网格中的数据对象引用该组，然后将 e.ClickedItem 转换为您的数据对象类型并通过引用访问该组。

# c++ - oprofile 可以忽略对外部函数的调用，而是将时间累积给调用者吗？

> ID：14024175
> 
> 赞同：3
> 
> 时间：2012-12-24T17:35:17.603
> 
> 标签：c++, c, profiling, oprofile

我目前正在使用以下参数调用 oprofile：

```
operf --callgraph --vmlinux /usr/lib/debug/boot/vmlinux-$(uname -r) <BINARY>
opreport -a -l <BINARY> 
```

例如，输出为：

```
CPU: Core 2, speed 2e+06 MHz (estimated)
Counted CPU_CLK_UNHALTED events (Clock cycles when not halted) with a unit mask of 0x00 (Unhalted core cycles) count 90000
samples  cum. samples  %        cum. %     image name               symbol name
12635    12635         27.7674  27.7674    libc-2.15.so             __memset_sse2
9404     22039         20.6668  48.4342    vmlinux-3.5.0-21-generic get_page_from_freelist
4381     26420          9.6279  58.0621    vmlinux-3.5.0-21-generic native_flush_tlb_single
3684     30104          8.0962  66.1583    vmlinux-3.5.0-21-generic page_fault
701      30805          1.5406  67.6988    vmlinux-3.5.0-21-generic handle_pte_fault 
```

您可以看到大部分时间都花在了`__memset_sse2`其中，但我自己的代码应该优化哪一个并不明显。至少不是来自上面的输出。

在我的具体情况下，我能够通过使用某种穷人的探查器来快速定位问题的根源。我在调试器中运行程序，不时停止它并查看每个线程的调用堆栈。

是否可以直接从 oprofile 的输出中获得相同的结果？如果性能瓶颈不像我的示例那样明显，那么我使用的策略很可能会失败。

是否有一个选项可以忽略对外部函数的所有调用（例如，对内核或 libc），而只是将时间累积给调用者？例如：

```
void foo() {
  // some expensive call to memset...
} 
```

`foo`在这里，我在分析输出的顶部看到会更有洞察力，而不是`memset`.

（我试过`opreport --exclude-dependent`但发现它没有帮助，因为它似乎只是跳过了输出中的外部函数。）

# java - 将 tinyMCE 与 Jspell 集成以进行拼写检查？

> ID：14024176
> 
> 赞同：2
> 
> 时间：2012-12-24T17:35:21.000
> 
> 标签：java, javascript, tinymce, spell-checking, jspell

我在我的遗留项目中使用 jspell 进行拼写检查。我不确定它是哪个版本/模块。以前它用于简单的文本区域，用户只能编写纯文本。现在我正在使用 tinyMCE 编辑器（附有文本区域）。现在拼写检查功能中断了。我能够通过以下更改使其工作

```
function getSpellCheckArray() {
// some processing
fieldsToCheck[fieldsToCheck.length]='document.forms["form"].myTextArea';// lin 1
// some processing
} 
```

我所做的调整是在第 1 行上方添加以下行

```
document.forms["form"].myTextArea.value=tinyMCE.activeEditor.getContent(); 
```

它工作正常。但问题是我看到一些 html 标签附加在显示拼写建议的窗口中（这些是 tinymce 在幕后附加的 html 标签）。

现在我的问题是有没有办法可以将 tinymce 与 jspell 集成？我可以看到一个专门为 tinyMCE 之类的编辑器设计的 JSpell Evolution 模块，但这是付费的 :(。另一种解决方案位于[http://www.tinymce.com/wiki.php/Plugin:spellchecker](http://www.tinymce.com/wiki.php/Plugin:spellchecker)，但在后端使用爵士拼写检查器。我我正在寻找如何将 tinymce 与 jspell 集成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:49:17.460

看看这里：[http ://atiqurrahman.wordpress.com/2009/12/29/jspell-and-tinymce/](http://atiqurrahman.wordpress.com/2009/12/29/jspell-and-tinymce/)

根据 JSpell wiki，将 JSpell 与 TinyMCE 集成非常容易。

```
function postTinyMCEInit() {
  setTimeout(jspellInit,500);
};

tinyMCE.init({
  oninit : "postTinyMCEInit"
}); 
```

但它是默认行为。我想要一些自定义，比如想要使用 TinyMCE 用于拼写检查的相同按钮。并且只想按需检查拼写。

这是解决方案：

```
<script SRC="/jspellEvolution/jspellSettings.js"  CHARSET="ISO-8859-1"></script>
<script TYPE="text/javascript" SRC="/jspellEvolution/jspellEvolution.js" CHARSET="ISO-8859-1"></script>

tinyMCE.init({
    setup : function(ed) {
        ed.addButton('customSpellingButton', {
           title : 'Spelling',
           'class' : 'mceAction mce_spellchecker',
           onclick : function() {
           jspellOnDemandCheck();
           jspellDialog();
           }
        });
    },
    theme_advanced_buttons1 : "customSpellingButton",
    oninit : "postTinyMCEInit"
});

function postTinyMCEInit() {
    jspellRealtime = false;
    jspellDialogShowNoErrors = false;
    jspellShowSpellingMenu = false;
    setTimeout(jspellInit, 500);
};

function getSpellCheckArray() {
    var fieldsToCheck = new Array();
    fieldsToCheck[fieldsToCheck.length]=[document,"frm.profile_ifr"];
    return fieldsToCheck;
}

<#assign action = "myForm"?url('UTF-8')>
<form name="myForm" method="post" action="${lnk(action)} onsubmit="jspellDetach();"> 
```

# java - 如何包装 Google Guice 的 Injector 方法？

> ID：14024183
> 
> 赞同：3
> 
> 时间：2012-12-24T17:36:18.647
> 
> 标签：java, generics, dependency-injection, guice

我正在编写一个使用 Guice 作为其所有 DI 的 API，并希望对 API 开发人员隐藏所有 Guice“东西”。我有以下内容：

```
public class MyAppModule extends AbstractModule {
    @Override
    public void configure(Binder binder) {
        // Omitted for brevity...
        // For instance, binds interface type Animal to impl type Dog, etc.
    }
}

public class MyInjector {
    public abstract<?> inject(Class<?> clazz) {
        MyAppModule module = new MyAppModule();
        Injector injector = Guice.createInjector(module);

        return injector.getInstance(clazz);
    }
}

// So that API developers can just use Animal references and Guice will
// automatically inject instances of Dog
MyInjector injector = new MyInjector();
Animal animal = injector.inject(Animal.class); // <-- Guice returns a Dog instance 
```

问题出在我的`MyInjector#inject(Class<?>)`方法上。按原样编写，我收到编译器错误：

```
Multiple markers at this line
- Return type for the method is missing
- Syntax error on token "?", invalid TypeParameter 
```

根据[Guice 文档](http://google-guice.googlecode.com/svn/trunk/javadoc/com/google/inject/Injector.html#getInstance%28com.google.inject.Key%3CT%3E%29)，`Injector#getInstance`返回一个`abstract<T>`. 如果可能的话，我想避免泛型以及显式类型转换，以使我的 API 开发人员更简单。我在这里有什么选择吗？如果是这样，它们是什么？如果不是，为什么？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T17:38:48.760

不要使用通配符`?`使用类似的东西`T`

此外，抽象方法不能有实现，因此您需要将其删除（您正在覆盖该方法）

```
public <T> T inject(Class<T> clazz) {
    MyAppModule module = new MyAppModule();
    Injector injector = Guice.createInjector(module);

    return injector.getInstance(clazz);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T17:39:54.870

你应该使用类似的东西：

```
public <T> T inject(Class<T> clazz); 
```

当使用`T`而不是`?`你可以返回一个类型的对象`T`

顺便说一句，这是一样的`Injector`：

```
public abstract T getInstance (Class<T> type) 
```

**注意**：在您的代码中，您尝试实现一个抽象方法。您应该删除 abstract 关键字，否则会出现语法错误。抽象方法不能包含实现（这是在子类中完成的）。

# python - 如何使用 Google Python AppEngine 从 Backbone 应用程序发送电子邮件

> ID：14024184
> 
> 赞同：1
> 
> 时间：2012-12-24T17:36:20.533
> 
> 标签：python, google-app-engine, backbone.js

我正在使用 Underscore + Backbone 构建一个网站。基本上我想知道是否可以从联系表格发送电子邮件。

这是我的骨干模型：

```
class ContactModel extends Backbone.Model

    defaults :
        message : 'Default message'

    validate : ( attrs_ ) ->

        # Validation Logique

    sync : (method, model) ->

        xhr = $.ajax
                dataType: "json"
                type: "POST"
                url: # HERE I WANT TO SEND DATA TO GOOGLE APPENGINE
                data: model.toJSON() 

                success : ( jqXHR, textStatus ) =>

                    console.log 'Success', 'jqXHR_ :', jqXHR, 'textStatus_ :', textStatus

                error : ( jqXHR_, textStatus_, errorThrown_ ) ->

                    console.log 'Success', 'jqXHR_ :', jqXHR_, 'textStatus_ :', textStatus_, 'errorThrown_ :', errorThrown_ 
```

我的问题是：是否可以在我的应用引擎中检索从我的模型发送的 JSON，以便使用 python 将模型的消息属性发送到我的电子邮件地址

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T22:13:53.520

是的。只需创建一个 POST 处理程序，获取 request.body 并使用 json 将其转换为您可以在 python 中使用的内容，然后发送电子邮件。

[表格入门](https://developers.google.com/appengine/docs/python/gettingstarted/handlingforms)

```
class Guestbook(webapp.RequestHandler):
def post(self):
    data = self.response.body
    jdata = json.loads(data)
    #send email with data in jdata 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T03:41:22.743

最后我用下面的代码解决了这种情况：

```
import os
import webapp2
import logging
import json
from google.appengine.api import mail

class MainPage(webapp2.RequestHandler):

    def get(self):

        #If request comes from the App

        if self.request.referer == 'Your request.referer' :

            message = self.request.get('message')

            #If there is no message or message is empty

            if not message and len(message) == 0:

                self.response.headers.add_header('content-type', 'text/plain', charset='utf-8')

                self.response.out.write('An empty message cannot be submitted')

                return

            #Print message

            logging.info('Message : ' + message)

            #Set email properties

            user_address = 'user_address'
            sender_address = 'sender_address'
            subject = 'Subject'
            body = message

            #Send Email

            mail.send_mail(sender_address, user_address, subject, body)

        #If request comes from unknow sources

        else :

            self.response.headers.add_header('content-type', 'text/plain', charset='utf-8')

            self.response.out.write('This operation is not allowed')

            return

app = webapp2.WSGIApplication([('/', MainPage)]) 
```

# vb.net - 双击数据时将数据从一个列表视图传输到另一个列表视图

> ID：14024188
> 
> 赞同：0
> 
> 时间：2012-12-24T17:37:00.850
> 
> 标签：vb.net, listview

我有2个`ListView`设置。 `Listview1`需要将数据传递给`listview2`用户双击任何数据时。我该如何存档？我正在使用 VB 2008。

这是图像： ![图片](../Images/f9d03445eafe833ea37f27ac6c0179b8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:43:52.687

这是粗略和简单的，但它会给你一个起点。请注意，有多种方法可以解决此问题，您需要找出应用程序所需的任何验证等。最大的障碍似乎是获取对作为双击目标的项目的引用（同样重要的是，确保如果用户在 ListView 控件的空白区域中双击，则不会添加最后选择的项目因为失误。

希望这可以帮助：

```
Public Class Form1

    Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
        Me.ListView1.FullRowSelect = True
        Me.ListView2.FullRowSelect = True
    End Sub

    Private Sub AddItemToSecondList(ByVal item As ListViewItem)
        ' NOTE: We separate this part into its own method so that 
        ' items can be added to the second list by other means 
        ' (such as an "Add to Purchase" button)

        ' ALSO NOTE: Depending on your requirements, you may want to 
        ' add a check in your code here or elsewhere to prevent 
        ' adding an item more than once.
        Me.ListView2.Items.Add(item.Clone())

    End Sub

    Private Sub ListView1_MouseDoubleClick(sender As Object, e As System.Windows.Forms.MouseEventArgs) Handles ListView1.MouseDoubleClick

        ' Use the HitTest method to grab a reference to the item which was
        ' double-clicked. Note that if the user double-clicks in an empty
        ' area of the list, the HitTestInfo.Item will be Nothing (which is what 
        ' what we would want to happen):
        Dim info As ListViewHitTestInfo = Me.ListView1.HitTest(e.X, e.Y)

        'Get a reference to the item:
        Dim item As ListViewItem = info.Item

        ' Make sure an item was the trget of the double-click:
        If Not item Is Nothing Then
            Me.AddItemToSecondList(item)
        End If

    End Sub

End Class 
```

# android - 当我搜索表中不存在的名称时，我的 android sqlite 数据库应用程序关闭

> ID：14024202
> 
> 赞同：1
> 
> 时间：2012-12-24T17:39:08.257
> 
> 标签：android, sqlite, android-sqlite

这是查找表中是否存在某个名称的代码/方法。

```
Contact getContact(String name) {
SQLiteDatabase db = this.getReadableDatabase();

    Cursor cursor = db.query(TABLE_CONTACTS, new String[] { KEY_ID,
            KEY_NAME, KEY_PH_NO }, KEY_NAME + "=?",
            new String[] { String.valueOf(name) }, null, null, null, null);
    if (cursor != null)
        cursor.moveToFirst();

    Contact contact = new Contact(Integer.parseInt(cursor.getString(0)),
            cursor.getString(1), cursor.getString(2));

    db.close();
    cursor.close();
    // return contact
    return contact;
} 
```

我已经有一个函数可以获取 arrayList 中的所有名称。我可以在调用上述函数之前调用它来解决我的问题。但我想问一下有没有其他（直接）方法可以做到这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T17:43:02.363

当你调用它时，如果那里有有效的结果，或者没有找到结果，`cursor.moveToFirst()`它将返回。如果返回，则调用任何方法都将失败。`true``false``cursor.moveToFirst()``false``getXXX()`

尝试这样的事情：

```
if( cursor.moveToFirst() )
{
    Contact contact = new Contact(Integer.parseInt(cursor.getString(0)),
        cursor.getString(1), cursor.getString(2));
}
cursor.close(); 
```

请注意，`Cursor`返回的 from`SQLiteDatabase.query`保证*为非 null*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T18:13:43.527

```
 SQLiteDatabase db = this.getReadableDatabase();
   Cursor cursor = db.query(TABLE_CONTACTS, new String[] { KEY_ID,
            KEY_NAME, KEY_PH_NO }, KEY_NAME + "=?",
            new String[] { String.valueOf(name) }, null, null, null, null);
           if(cursor.moveToFirst()){
         do {
            Double lat = cursor.getDouble(2);
            Double lon = cursor.getDouble(1);
           } while (trackCursor.moveToNext());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T19:03:08.753

这是从表中获取列表中所有联系人的代码...

```
/**
 * Getting all the contacts in the database
 */
public List<Contact> getAllContacts() {
    List<Contact> contactList = new ArrayList<Contact>();
    // Select All Query
    String selectQuery = "SELECT  * FROM " + TABLE_CONTACTS;

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    // looping through all rows and adding to list
    if (cursor.moveToFirst()) {
        do {
            Contact contact = new Contact();
            contact.setID(Integer.parseInt(cursor.getString(0)));
            contact.setName(cursor.getString(1));
            contact.setPhoneNumber(cursor.getString(2));
            // Adding contact to list
            contactList.add(contact);
        } while (cursor.moveToNext());
    }

    cursor.close();
    db.close();

    // return contact list
    return contactList;
} 
```

然后在另一个函数中调用它，如果名称存在于表“false”中，则返回“true”，否则......

```
 /**
     * checks if name already present in the database
     * @param name
     * @return
     */
    public boolean checkDbData(String name){
        List<Contact> contactList =getAllContacts();
        boolean checkName = false ;

        for(Contact cn: contactList){
            String dbName = cn.getName();
            if(name.equals(dbName)){
                checkName = true ;
            }               
        }

        return checkName;
    } 
```

如果此函数返回“true”，则调用上述给定函数以获取联系人。

```
Contact getContact(String name) {
SQLiteDatabase db = this.getReadableDatabase();

Cursor cursor = db.query(TABLE_CONTACTS, new String[] { KEY_ID,
        KEY_NAME, KEY_PH_NO }, KEY_NAME + "=?",
        new String[] { String.valueOf(name) }, null, null, null, null);
if (cursor != null)
    cursor.moveToFirst();

Contact contact = new Contact(Integer.parseInt(cursor.getString(0)),
        cursor.getString(1), cursor.getString(2));

db.close();
cursor.close();
// return contact
return contact; 
```

}

注意：我们也可以从contactList中获取这个联系人，两者都可以用来获取需要的联系人（即本例中的“姓名”）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T17:42:23.483

```
if (cursor == null)
Toast.makeText(getApplicationContext(), "No Records Exist", Toast.LENGTH_SHORT).show(); 
```

# objective-c - 多种语言的时间间隔演示库

> ID：14024203
> 
> 赞同：0
> 
> 时间：2012-12-24T17:39:10.803
> 
> 标签：objective-c, localization

有人知道用于将日期呈现为的良好时间间隔演示库
`N {days/weeks/etc} {ago/from date/from now/etc}`吗？

我只找到了[这个格式化工具包](https://github.com/mattt/FormatterKit)。

但它在许多语言的本地化方面还不够好。（例如，**斯拉夫语言**）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T18:04:27.523

那是一个很好的图书馆；我以前找过类似的，但没有找到更好的。

而且它是开源的——如果您（或帮助您将应用程序的其余部分本地化为斯拉夫语言的任何人）可以提供适当的字符串，您可以将它们与库集成并共享它们，以使使用该库的其他人受益。

如果问题在于它不够灵活，无法支持斯拉夫语言所需的所有本地化字符串（即额外的情况、变格等），那么开源也可以在这方面为您提供帮助。也许您可以调整库来处理这个问题，或者与@mattt 和/或库的其他用户联系以获取有关此类调整的帮助。

# java - Gemfire 异常处理

> ID：14024209
> 
> 赞同：1
> 
> 时间：2012-12-24T17:39:44.057
> 
> 标签：java, spring, exception-handling, gemfire

我有一个本地缓存，它正在缓存来自 Web 服务的数据。如果假设 Web 服务已关闭，那么肯定会抛出异常。我想处理这个异常并从该方法返回以前缓存的值。谁能告诉我，Gemfire 是否有任何此类异常处理功能来处理此类异常？我使用基于注释的缓存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-01T18:09:53.270

我假设您指的是 Spring @Cacheable 功能。使用该框架，首先检查缓存，因此，如果缓存中有答案，它根本不会调用 Web 服务（因此无论它是启动还是关闭都无关紧要）。

# opencl - 发送非 32 位对齐数据时 enqueueWriteBuffer 锁定

> ID：14024217
> 
> 赞同：0
> 
> 时间：2012-12-24T17:41:03.563
> 
> 标签：opencl

我正在开发一个 opencl 项目，我遇到了一个问题，如果我尝试将数据从 cpu 发送到全局内存，那么有时它会锁定应用程序。这种情况偶尔发生。我可以连续运行 x 次，下次锁定。只有当我尝试发送非 32 位宽的数据时，才会出现这种情况。例如，我可以很好地发送 float 和 int，但是当我尝试 short、char 或 half 时，我会得到随机锁定。它不会因为初始化错误的数据或其他东西而死，因为它确实运行，只是不是一直运行。我还进行了一些登录，发现它总是在尝试写入这些非标准大小的数据数组之一后锁定。我在 NVIDIA GeForce GT 330M 上运行。下面是我正在运行以发送数据的代码片段。我在主机端使用 c++ 接口。

```
cl_half *m_aryTest;

shared_ptr< cl::Buffer > m_bufTest;

m_aryTest = new cl_half[m_iNeuronCount];

m_bufTest = shared_ptr<cl::Buffer>( new cl::Buffer(m_lpNervousSystem->ActiveContext(), CL_MEM_READ_ONLY | CL_MEM_USE_HOST_PTR, sizeof(m_aryTest)*m_iNeuronCount, m_aryTest));

kernel.setArg(8, *(m_bufTest.get()));

printf("m_bufTest.\n");

m_lpQueue->enqueueWriteBuffer(*(m_bufTest.get()), CL_TRUE, 0, sizeof(m_aryTest)*m_iNeuronCount,  m_aryTest, NULL, NULL); 
```

有没有人知道为什么会这样？谢谢

# modal-dialog - 我无法让我的 mailto 联系表正常工作

> ID：14024218
> 
> 赞同：0
> 
> 时间：2012-12-24T17:41:12.470
> 
> 标签：modal-dialog, contact, mailto, contact-form

我试图在模态窗口中制作联系表格。我以为我已经正确完成了所有操作，但是当我单击发送时，我没有收到电子邮件。谁能告诉我我哪里出错了？

首先十分感谢。圣诞快乐！

```
<!-- Modal -->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
<h3 id="myModalLabel">Contact McGregor Beauty</h3>
</div>
<div class="modal-body">
<form id="contact" method="post" action="mailto:aka_pipsqueak@msn.com">
Your Name   &nbsp;<input class="input-xlarge" type="text" placeholder="Please write your name here" required>
<br />
Your Email   &nbsp;<input class="input-xlarge" type="email" placeholder="Please enter your email address here" required><br />
Phone(Optional)  &nbsp;<input class="input-large" type="number" placeholder="Add a telephone number"><hr />
<label><strong>Treatments of Interest</strong></label>
<label class="checkbox">
<input type="checkbox" value="Waxing & Tinting">Waxing & Tinting
</label>
<label class="checkbox">
<input type="checkbox" value="Massage">Massage
</label>
<label class="checkbox">
<input type="checkbox" value="Reflexology">Reflexology
</label>
<label class="checkbox">
<input type="checkbox" value="Manicure/Pedicure">Manicure & Pedicure
</label>
<label class="checkbox">
<input type="checkbox" value="MLD">MLD
</label>
<br />
<label><strong>Your Questions/Comments</strong></label>
<textarea rows="2" style="width:500px" type="text" required></textarea>

<div class="modal-footer">
<button class="btn btn-primary" type="submit" data-dismiss="modal" aria-hidden="true">Send</button>
</div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T17:47:50.060

你用的是什么邮件服务器？

用于处理表单的 http 请求的服务器端代码在哪里？

仅在 html 中创建一个表单不会做任何事情，并且 mailto: 的操作是不正确的，您也不想这样做，因为该电子邮件地址可以在标记中看到并且会被发送垃圾邮件，直到您关闭它。

您打算使用哪种编程语言？

这是您可以使用 php 进行的基本示例：

[http://www.w3schools.com/php/php_mail.asp](http://www.w3schools.com/php/php_mail.asp)

# c - 触摸板驱动

> ID：14024219
> 
> 赞同：1
> 
> 时间：2012-12-24T17:41:17.267
> 
> 标签：c, drivers

任何人都可以建议一些很好的参考来为 linux 编写触摸板驱动程序。我从哪里获得硬件文档。我已经阅读了大部分 linux 设备驱动程序书籍，现在我想把它提升到一个新的水平。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T03:29:29.530

您确定当前在 linux 内核中不支持您的 sentelic 吗？查看 Linux 源代码中的 Documentation/input/sentelic.txt。如果它没有给你直接的答案，你将能够看到如何实现类似的东西。也看看它的来源。

此外，如果您还不是非常非常熟悉 Linux 内核编程，您可以阅读 Linux Device Drivers（[免费提供](http://lwn.net/Kernel/LDD3)）、Linux Kernel Mode Programming（[也提供](http://www.tldp.org/LDP/lkmpg/2.6/html/lkmpg.html)）和 Linux Kernel Development。其中一些资源有些过时，但会给你关于开发的正确想法。

# python - Python 中的 System() 导入是什么

> ID：14024221
> 
> 赞同：0
> 
> 时间：2012-12-24T17:41:29.417
> 
> 标签：python, jython

长话短说，我在工作中使用的一段代码如下：

```
from System                               import System 
```

后面的代码：

```
desc_          = System()
xmlParser = Parser(desc_.getDocument()) 
# xmlParser.setEntityBase(self.dtdBase)
for featureXMLfile in featureXmlList.split(","):
    print featureXMLfile
    xmlParser.parse(featureXMLfile)
feat   = desc_.get(featureName)
return feat 
```

`Parser`是 Java 中的 XML 解析器（它包含在不同的导入中），但我不明白`desc_`它在做什么。我的意思很明显，它以某种方式拥有我们试图退出的功能，但我不完全明白在哪里。是`System`Python 或 Java 中的标准库，还是我在看定制的东西？

不幸的是，我小组中的其他人都出去过平安夜假期，所以我不能直接问他们。感谢您的帮助。我对 Python 还不是很熟悉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T17:43:12.797

这不是来自标准库，所以你需要检查你的系统（Python 有很多自省来帮助你）。

[您可以根据 PEP-8](http://www.python.org/dev/peps/pep-0008/#package-and-module-names)或通过搜索[库参考](http://docs.python.org/3/library/)来判断标准库中的 Python 模块使用小写名称。

还要注意的是，Python 有它自己的[XML](http://docs.python.org/3.1/library/xml.etree.elementtree.html) [解析](http://docs.python.org/3.1/library/xml.sax.reader.html) [工具](http://docs.python.org/3.1/library/xml.dom.html)，在 Python 中使用起来会比在 Java 中更好。

编辑：正如您在使用 Jython 的评论中所指出的，这似乎是 Java 的`System`包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T19:48:10.677

millimoose 在他的评论中指出了正确的答案，但忽略了将其作为答案提交，所以我发帖是为了表明正确的答案。它确实是我公司构建的自定义模块。`import System; print(System)`我可以通过输入解释器来确定这一点。

# python - Django注释问题

> ID：14024223
> 
> 赞同：1
> 
> 时间：2012-12-24T17:41:36.853
> 
> 标签：python, django, django-models, django-queryset

我希望在 django 上做一个类似 SQL 的“Group by, Count”。这是我目前的代码进度：

```
tags = tag.objects.values('tag').annotate(Count('tag')).order_by() 
```

标签类：

```
class tag(models.Model):
    id = models.IntegerField('id',primary_key=True,null=False)
    question_id = models.ForeignKey(question,null=False)
    tag = models.TextField('tag',null=True) 
```

所以，我的问题是上面的查询是否可以得到可能的类似 SQL 的“Group by, Count”？如果是，我应该如何获得计数值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T17:54:57.680

您可以存储带注释的值：

```
tags = tag.objects.values('tag').annotate(tag_count=Count('tag')).order_by()
for tag in tags:
    print tag['tag_count'] 
```

您也可以在您的 : 中使用带注释的值`order_by`：

```
tags = tag.objects.values('tag').annotate(tag_count=Count('tag')).order_by('-tag_count') 
```

# python - WxRichTextCtrl python 从文件中检索条目

> ID：14024226
> 
> 赞同：1
> 
> 时间：2012-12-24T17:41:46.153
> 
> 标签：python

我正在创建一个带有树控件的程序，树中的每个项目都具有显示在 wxRichTextctrl 中的数据。我想出了如何从 ctrl 获取 xml 数据，但我不知道如何在 ctrl 中显示它。就像我设置 setvalue() 一样，它只是按原样显示 xml。从文件加载不是一个有效的选项，因为我有一个字典，我从中加载每条记录（存储在 xml 中），否则我将创建一个临时文件并加载它，这有点令人毛骨悚然。如果您能帮助我提供一些示例代码，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T21:32:51.570

要绕过`RichTextCtrl.LoadFile()`，您必须创建一个`RichTextFileHandler`基于类并使用其`LoadStream()`方法直接写入 RichTextCtrl 缓冲区。

*   RichTextPlainTextHandler
*   富文本HTML处理程序
*   富文本XML处理程序

例如：

```
from cStringIO import StringIO

# initialize a string stream with XML data
stream = StringIO( myXmlString )
# create an XML handler
handler = wx.richtext.RichTextXMLHandler()
# load the stream into the control's buffer
handler.LoadStream( myRichTextCtrl.GetBuffer(), stream )
# refresh the control
myRichTextCtrl.Refresh() 
```

并以`RichTextCtrl`特定格式获取 a 的内容：

```
stream = StringIO()
handler = wx.richtext.RichTextHTMLHandler()
handler.SaveStream( myRichTextCtrl.GetBuffer(), stream )
print stream.getvalue() 
```

* * *

或者，您可以直接通过缓冲区加载流。请注意，必须已经存在适当的处理程序来解释数据：

```
# add the handler (where you create the control)
myRichTextCtrl.GetBuffer().AddHandler(wx.richtext.RichTextXMLHandler()) 
```

```
stream = StringIO( myXmlString )
buffer = self.myRichTextCtrl.GetBuffer()
# you have to specify the type of data to load and the control
# must already have an instance of the handler to parse it
buffer.LoadStream(stream, wx.richtext.RICHTEXT_TYPE_XML)
myRichTextCtrl.Refresh() 
```

# c++ - iter_swap() 与 swap() - 有什么区别？

> ID：14024228
> 
> 赞同：52
> 
> 时间：2012-12-24T17:42:13.977
> 
> 标签：c++, swap

[MSDN 说](http://msdn.microsoft.com/en-us/library/f1863z4b.aspx)：

> `swap`应该优先使用`iter_swap`，它包含在 C++ 标准中以实现向后兼容性。

但是[comp.std.c++ 说](https://groups.google.com/forum/?fromgroups=#!topic/comp.std.c++/AMH7TXg5EsI)：

> 大多数 STL 算法在迭代器范围上运行。因此，在这些范围内交换元素时使用它是有意义的`iter_swap`，因为这是它的预期目的——交换两个迭代器指向的元素。这允许对基于节点的序列进行优化，例如`std::list`，节点只是重新链接，而不是实际交换数据。

那么哪一个是正确的呢？我应该使用`iter_swap`，还是应该使用`swap`？（`iter_swap`只是为了向后兼容？）为什么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-24T04:32:21.700

标准本身很少提及`iter_swap`：

*   它应该具有 的效果`swap(*a, *b)`，尽管没有规定必须以这种方式实施。
*   取消引用的值`*a`and`*b`必须是“可交换的”，这意味着`swap(*a, *b)`必须是有效的，因此取消引用的类型必须相同，尽管迭代器类型不必相同。
*   `iter_swap`需要在实现中使用`std::reverse`。对任何其他算法都没有这样的要求，所以这似乎很奇怪。

借用[sehe](https://stackoverflow.com/a/13991936/1435577)*从*[SGI 文档](http://www.sgi.com/tech/stl/iter_swap.html)*[中找到的](https://stackoverflow.com/a/13991936/1435577)[*内容*](https://stackoverflow.com/a/13991936/1435577)：*

 *> 严格来说，`iter_swap`是多余的。它的存在仅出于技术原因：在某些情况下，某些编译器难以执行解释所需的类型推导`swap(*a, *b)`。

所有这些似乎都表明它是过去的产物。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-24T04:54:52.653

这似乎是互联网产生大量相互矛盾的信息的场景之一。

*   [`iter_swap``swap`](http://www.cplusplus.com/reference/algorithm/iter_swap/)cplusplus.com[说这](http://www.cplusplus.com/reference/algorithm/iter_swap/)[与](http://www.cplusplus.com/reference/algorithm/iter_swap/)`swap`.

*   [cppreference.com 告诉我们，调用`swap`只是*的一种可能实现*，`iter_swap`](http://en.cppreference.com/w/cpp/algorithm/iter_swap)为某些专业领域的可能优化打开了大门`iter_swap`，只要维护函数的恒定复杂性保证。

下的标准`[C++11: 25.3.3/5]`仅说`iter_swap(a,b)`具有结果`swap(*a,*b)`（并要求“`a`并且`b`应可取消引用”，并且“`*a`应可与`*b`”交换）乍一看与MSDN的解释相关。

然而，我相信微软忽略了考虑 as-if 规则，它应该允许实现`iter_swap`比`swap`某些情况下更快（例如链表的元素）。

**因此，我相信这两个`comp.std.c++`报价在技术上更准确。**

话虽如此，对可以执行的优化有相当严格的限制。例如，考虑一个`iter_swap`简单地重新链接节点而不是物理交换元素值的过度链表元素的实现——这*不是*一个有效的实现，因为违反了`iter_swap`“可观察行为匹配”的要求。`swap`

**因此，我建议*在实践*中，如果有任何好处，而不是更喜欢`iter_swap`，`swap`**我建议坚持使用后者，以简化和保持一致性。无论如何， C++11 移动语义在许多情况下都应该`swap`是小菜一碟。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-24T11:40:12.707

*是的，如果使用得当*，它们都会做同样的事情。不，`std::iter_swap`不推荐使用（通过放置在标准的 §D*兼容性功能*部分中）。MSDN 的报价具有误导性的轻视。问题是`std::swap`正确使用不方便。

您应该使用`iter_swap`它的简单原因是它是一个更高的抽象。

`swap`通常为用户定义的类型重载。正确的称呼方式是

```
using std::swap;
swap( blah, bleh ); 
```

不简单

```
std::swap( blah, bleh ); 
```

这包含在 §17.6.3.2 中，特别是 ¶3：

> `swap(t, u)`评估和的上下文`swap(u, t)`应确保通过重载决议（13.3）在候选集上选择名为“swap”的二进制非成员函数，该候选集包括：
> 
> — (20.2)中定义的两个`swap`函数模板和`<utility>`
> 
> — 由参数相关查找（3.4.2）产生的查找集。

`iter_swap`不是这样一个特殊的重载名称，自定义其功能需要将模板特化添加到`namespace std {}`.

* * *

因此，`iter_swap`有用地封装了 Swappable 接口的一部分，否则您每次都会实现这些接口。

它实际上是一个更友好的界面，无论您的实现及其特定参数是否存在语义差异。（并不是说它的潜在优化应该被忽略。MSDN 可能会给出他们的意见，但他们无法预测库作者可能会使用“向后兼容接口”提供什么。）

* * *

至于`iter_swap`结果与 明显不同的专业化`swap( *a, *b )`，这似乎不符合要求§25.3.3/5，

> 效果：`swap(*a, *b)`。

您引用的示例听起来确实有明显的差异，因为指向`*a`和的指针`*b`在操作之前和之后都有效。不幸的是，这是库实现中的一个错误。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-05-25T22:48:03.063

你已经找到了关键的区别。

`swap(*a, *b)`是一个全局函数，它将所有指向的指针重置`*a`为指向内容的内容，`*b`反之亦然。这是旧的`tmp = a`，，`a = b`交换`b = tmp`。

`iter_swap`用于修改被迭代的底层对象以影响它们所属的结构的更有限的情况。如果`*a`并且`*b`是同一个链表的一部分，`iter_swap`只需交换它们在链表中的位置就足够了。当您想简单地对列表进行排序而不使/更改指向列表中对象的外部指针时，这是一个*优势。*如果我有一个指向`user`对象的指针，我不在乎你是否对对象进行排序`list`，`user`我不希望我对谁是“当前”用户的想法改变，所以最好不要使用 list 排序`swap`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-19T05:25:40.673

你应该使用哪一个？取决于你用它做什么。因为交换只适用于对象，交换两个独立的整数或字符串或双精度数。但 iter_swap 适用于数组和列表，您可以在其中交换两个不同列表中的数字，如[cplusplus.com上所示](http://www.cplusplus.com/reference/algorithm/iter_swap/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-26T23:39:32.343

仔细阅读法律：

> 20.2.2 交换 [utility.swap]
> 
> *   模板无效交换（T＆a，T＆b）noexcept（is_nothrow_move_constructible::value &&
>     is_nothrow_move_assignable::value）；2 要求：类型 T 应为 MoveConstructible 和 MoveAssignable。（表 20）和（表 22） 3 效果：交换存储在两个位置的值。
> *   模板无效交换（T（&a）[N]，T（&b）[N]）noexcept（noexcept（swap（*a，*b）））；4 要求：对于 [0,N) 范围内的所有 i，a[i] 应可与 b[i] 交换。(17.6.3.2) 5 个效果：swap_ranges(a, a + N, b)
> 
> 25.3.3 交换 [alg.swap]
> 
> *   模板 void iter_swap(ForwardIterator1 a, ForwardIterator2 b); 5 效果：交换（*a，*b）。6 要求：a 和 b 应是可解引用的。*a 应可与 *b 交换。(17.6.3.2)

因此，iter_swap 需要交换存储在两个取消引用位置或取消引用位置范围中的值，并且任何交换引用或位置本身的尝试都与一致性作斗争。这显然禁止推测优化是 std::iter_swap 背后的原因。相反，正如 Potatoswatter 正确指出的那样，封装和抽象是其存在的主要原因。std::iter_swap 和 std::swap 各自属于不同的抽象层，这与 std::swap 本身和任何通过重载决议选择的名为“swap”的二进制非成员函数不同的方式相同。

交换开发人员和设计人员的角色以理解实现相同的结果并不意味着相同，例如“即使从基本类型声明 typedef 对编译器来说也只是噪音，对读者来说不是噪音”。把它当作一个玩笑，但我们可以说整个 C++ 只是一个包装 C 的可弃用的工件，因为两者都在最低级别做同样的事情，依此类推，任何代码块都通过包装器表示从另一个抽象。特别是当线太细时，例如 std::iter_swap、“swap”和 std::swap。也许“使用 std::swap”只有几个字符，一旦编译就消失了，但意味着注入一个标识符并构建一个完整的重载解析机制。一遍又一遍地注入，一遍又一遍地建造，一遍又一遍地替换，一遍又一遍地丢弃。

将内部工作暴露在上层会给维护带来额外的潜在失败机会。在交换域中，在深度元编程包含设计中缺少（或弄乱）“使用 std::swap”将在您的模板函数内静默等待，等待可交换的普通类型、基本类型或 c 数组类型来破坏构建，如果幸运的是，甚至 StackOverflow(TM) 通过无限递归。显然，必须发布可扩展机制的实现，但也必须得到尊重。关于琐碎的可交换，请注意任何 moveconstructible 和 moveassignable 都可以针对其自己的类型进行交换，即使它缺少重载的交换解决挂钩，并且确实有一些晦涩的技术可以禁用不需要的可交换行为。

考虑到这一点，也许这一切都可以通过对 std::iter_swap 标识符本身的不正确解释来恢复：它不代表“迭代器交换”，而是“可迭代交换”。不要被关于参数是前向迭代器的标准要求所迷惑：本质上，指针是随机访问迭代器，因此满足要求。物理上你通过指针传递，逻辑上你通过迭代器传递。委员会通常会尝试指定设施以定义和预期行为工作的最低要求，仅此而已。“可迭代交换”这个名字正确地暴露了该机制的目标和能力。“std::iter_swap”标识符似乎不是因为产生了混淆，但是改变它并撤消所有依赖的代码库为时已晚。

只要它有效，请随意交换，但请不要在我的手表上。混合抽象层不会让编译器哭泣，但接口太酷了，无法避免。相反，这里有一个片段可以帮助将来提供指导：

```
//#include <utility> // std::swap is not required here
#include <algorithm> // std::iter_swap is

namespace linker {

    class base {
    };

    class member {
    };

    template<class M = member, class B = base> // requires swappable base and member
    class link : B {
    public:
        void swap(link &other) { // using iterable swapping
            std::iter_swap(static_cast<B*>(this), static_cast<B*>(&other));
            std::iter_swap(&_member, &other._member);
        }
    private:
        M _member;
    };

    template<class base, class member>
    void swap(link<base,member>& left, link<base,member>& right) { // extending iterable swapping
        left.swap(right);
    }

}

namespace processor {

    template<class A, class B>
    void process(A &a, B &b) { // using iterable swapping
        std::iter_swap(&a, &b);
    }

}

int main() {
#if !defined(PLEASE_NO_WEIRDNESS)
    typedef
        linker::link<
            linker::link<
                linker::link< int[1] >,
                linker::link< void*, linker::link<> >
            >[2],
            linker::link<
                linker::member[3]
            >
        >
    swappable[4]; // just an array of n-ary hierarchies
#else
    typedef linker::link<> swappable;
#endif
    swappable a, b;
    processor::process(a, b);
} 
```

作为附加指导的一些兴趣点：

*   交换意味着抛出异常。声明似乎很愚蠢，但它不是你知道交换习语不关注性能而是极端安全性和稳健性。

*   std::iter_swap 展示了元编程的许多可爱但被忽视的特性之一：模板不仅可以进行重载解析，还可以解析命名空间，允许将其用作未知和不相关命名空间链中的第一个。谢谢，少担心一件事。

*   可交换要求允许您直接使用 std::swap 如果（并且仅当）您可以假设两个目标都是基本类型或 c 数组到基本类型，从而允许编译器绕过任何重载决议。可悲的是，这排除了几乎每个模板的参数。直接使用 std::swap 意味着两个目标属于同一类型（或强制为同一类型）。

*   不要浪费精力在已经可以与自身进行简单交换的类型上声明可交换功能，就像我们的链接模板类一样（尝试删除 linker::swap，行为根本不会改变）。
    “swap”被设计为可扩展以从不同类型交换，
    自动交换相同类型。注意一个类型本身不是“可交换的”或
    “不可交换的”，而是“可交换的”或
    “不可交换的”另一种类型。

最后，不知道有多少读者会注意到

*   20.2.2 交换 [utility.swap]

*   25.3.3 交换 [alg.swap]

并认识到实用程序不是算法。在 Microsoft-Dinkumware 实现中，std::iter_swap 只是为了方便而存在于错误的标头中，这并没有错。也许只是它的标识符是。

* * *

编辑：在面对一些更相关的错误之后，我可以这样总结它们：算法是一个如此通用和具体的概念，每当有人要专门研究其中一个时，设计师就会在其他地方哭泣。在 std::iter_swap 的情况下，由于委员会显然没有给予任何自由，任何在重新链接推测中调整算法的尝试都应该得到不同的含义和标识符。也可能有人错过的容器确实有一个交换成员函数，优化确实适用。

更好地重构，使您的最后一层对象是非数据的、基本的或表示隐藏的较重对象（如果足够重则流式传输）。接受资源获取应该是初始化 ( [RAII](https://www.google.com/search?hl=en&q=raii "RAII") ) 并且新删除重载和容器分配器都有[用](https://www.google.com/search?hl=en&q=boost%20pool "采用")，以零额外的努力释放真正的交换收益。优化资源，以便您仅在重新获取时移动数据，然后让 C++ 默认轻松、安全和快速地设计您的类型。

座右铭：在过去，人们一直在为内存太胖、磁盘太慢的数据而苦苦挣扎。如今，迭代器向量从存储池中过滤出来，并流式传输以在并行管道中进行处理。明天汽车将单独行驶。值得一个 PostIt。*

# python - 在 Ubuntu 9.10 上安装 libxml2-dev 时出错 - 对于 lxml-etree

> ID：14024229
> 
> 赞同：-1
> 
> 时间：2012-12-24T17:42:17.167
> 
> 标签：python, installation, lxml, ubuntu-9.10, xml.etree

尝试在**Ubuntu 9.10上安装****lxml-etree**[我在这里](https://stackoverflow.com/questions/6504810/how-to-install-lxml-on-ubuntu)了解到我需要**libxml2-dev**和**libxslt-dev**

 ******当我尝试安装 libxml2-dev 时，通过运行`apt-get install libxml2-dev`

```
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following extra packages will be installed:
  libxml2
The following NEW packages will be installed:
  libxml2-dev
The following packages will be upgraded:
  libxml2
1 upgraded, 1 newly installed, 0 to remove and 73 not upgraded.
Need to get 1696kB of archives.
After this operation, 2830kB of additional disk space will be used.
Do you want to continue [Y/n]? Y
Err http://archive.ubuntu.com karmic-updates/main libxml2 2.7.5.dfsg-1ubuntu1.2
  404  Not Found [IP: 91.189.92.200 80]
Err http://security.ubuntu.com karmic-security/main libxml2 2.7.5.dfsg-1ubuntu1.2
  404  Not Found
Err http://security.ubuntu.com karmic-security/main libxml2-dev 2.7.5.dfsg-1ubuntu1.2
  404  Not Found
Failed to fetch http://security.ubuntu.com/ubuntu/pool/main/libx/libxml2/libxml2_2.7.5.dfsg-1ubuntu1.2_amd64.deb  404  Not Found
Failed to fetch http://security.ubuntu.com/ubuntu/pool/main/libx/libxml2/libxml2-dev_2.7.5.dfsg-1ubuntu1.2_amd64.deb  404  Not Found
E: Unable to fetch some archives, maybe run apt-get update or try with --fix-missing? 
```

此版本的 lxml 是否已删除？
**无法获取[http://security.ubuntu.com/ubuntu/pool/main/libx/libxml2/libxml2_2.7.5.dfsg-1ubuntu1.2_amd64.deb](http://security.ubuntu.com/ubuntu/pool/main/libx/libxml2/libxml2_2.7.5.dfsg-1ubuntu1.2_amd64.deb) 404 Not Found**

因此，我尝试`apt-get install python-lxml`按照该线程中建议的方式运行。
但这给了我这个：

```
Reading package lists... Done
Building dependency tree
Reading state information... Done
Suggested packages:
  python-lxml-dbg
The following NEW packages will be installed:
  python-lxml
0 upgraded, 1 newly installed, 0 to remove and 74 not upgraded.
Need to get 1265kB of archives.
After this operation, 4002kB of additional disk space will be used.
Err http://archive.ubuntu.com karmic/main python-lxml 2.1.5-1ubuntu2
  404  Not Found [IP: 91.189.92.202 80]
Failed to fetch http://archive.ubuntu.com/ubuntu/pool/main/l/lxml/python-lxml_2.1.5-1ubuntu2_amd64.deb  404  Not Found [IP: 91.189.92.202 80]
E: Unable to fetch some archives, maybe run apt-get update or try with --fix-missing? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:49:46.910

Ubuntu 9.10 不再受支持，因此无法正常工作。创建了一个新的 12.04 主机。******

# r - 使用因子使用 ggplot2 创建密度图

> ID：14024236
> 
> 赞同：7
> 
> 时间：2012-12-24T17:42:36.497
> 
> 标签：r, ggplot2

我正在使用这个数据集（在底部）来创建一个密度图，但是我遇到了这个因素的问题并让它正确聚合。我希望图表看起来像这样：

```
ggplot(sample, aes(as.numeric(value), colour=shortname)) + geom_density() 
```

但我希望 x 轴具有因子的实际标签。但是当我使用这个时：

```
ggplot(sample, aes(value, colour=shortname)) + geom_density() 
```

该图不会将它们聚合为`shortname`变量的两个不同值。

我究竟做错了什么？我已经阅读了有关 using的信息`scale_x_discrete()`，但我认为我不需要这样做，因为我已经有了一个因素......

更新：即使我`scale_x_discrete`以下列方式使用：

```
ggplot(sample, aes(value, colour=shortname)) + geom_density() + scale_x_discrete(breaks=1:27, labels=c("<A",LETTERS)) 
```

那只是一起删除了x轴标签...

先感谢您！

```
sample <- structure(list(shortname = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L), .Label = c("H1", 
"H2"), class = "factor"), value = structure(c(7L, 17L, 8L, 15L, 
18L, 17L, 14L, 19L, 20L, 17L, 17L, 12L, 16L, 21L, 2L, 21L, 19L, 
22L, 12L, 15L, 22L, 19L, 16L, 13L, 19L, 24L, 15L, 24L, 23L, 12L, 
24L, 21L, 15L, 16L, 16L, 18L, 18L, 8L, 23L, 8L, 21L, 24L, 13L, 
10L, 18L, 1L, 7L, 14L, 13L, 21L, 16L, 10L, 15L, 21L, 17L, 18L, 
18L, 21L, 14L, 9L, 22L, 14L, 11L, 16L, 13L, 18L, 12L, 1L, 23L, 
8L, 15L, 18L, 11L, 10L, 20L, 16L, 12L, 10L, 22L, 25L, 24L, 7L, 
19L, 13L, 16L, 16L, 20L, 3L, 13L, 21L, 12L, 16L, 13L, 15L, 1L, 
19L, 12L, 20L, 12L, 11L, 20L, 7L, 22L, 18L, 19L, 9L, 10L, 24L, 
10L, 13L, 5L, 16L, 19L, 20L, 19L, 18L, 19L, 19L, 13L, 12L, 21L, 
20L, 13L, 21L, 3L, 12L, 19L, 17L, 16L, 9L, 21L, 18L, 24L, 2L, 
12L, 13L, 14L, 7L, 16L, 10L, 21L, 15L, 21L, 11L, 18L, 3L, 16L, 
15L, 22L, 10L, 16L, 21L, 19L, 17L, 20L, 22L, 17L, 20L, 2L, 24L, 
12L, 18L, 19L, 24L, 26L, 17L, 20L, 15L, 12L, 10L, 16L, 12L, 12L, 
15L, 19L, 14L, 22L, 12L, 7L, 16L, 1L, 20L, 18L, 24L, 19L, 22L, 
3L, 16L, 19L, 22L, 5L, 19L, 17L, 16L, 13L, 22L, 3L, 14L, 12L, 
9L, 5L, 16L, 14L, 15L, 12L, 2L, 12L, 19L, 20L, 18L, 10L, 3L, 
20L, 4L, 16L, 19L, 1L, 14L, 24L, 9L, 14L, 1L, 12L, 6L, 1L, 22L, 
11L, 13L, 19L, 16L, 22L, 25L, 3L, 21L, 21L, 22L, 3L, 21L, 18L, 
23L, 24L, 2L, 21L, 15L, 15L, 16L, 11L, 13L, 25L, 11L, 17L, 15L, 
7L, 23L, 21L, 4L, 1L, 14L, 19L, 13L, 10L, 18L, 3L, 13L, 17L, 
12L, 7L, 21L, 17L, 17L, 17L, 17L, 10L, 21L, 24L, 22L, 12L, 22L, 
12L, 24L, 17L, 16L, 21L, 19L, 16L, 16L, 16L, 21L, 13L, 1L, 7L, 
21L, 11L, 13L, 10L, 21L, 11L, 25L, 1L, 11L, 3L, 24L, 13L, 13L, 
15L, 7L, 21L, 16L, 24L, 16L, 8L, 19L, 13L, 18L, 18L, 22L, 19L, 
16L, 16L, 15L, 5L, 4L, 14L, 8L, 15L, 18L, 13L, 14L, 12L, 19L, 
16L, 3L, 16L, 17L, 1L, 19L, 20L, 19L, 1L, 19L, 20L, 22L, 8L, 
12L, 13L, 24L, 16L, 14L, 21L, 25L, 22L, 4L, 16L, 16L, 15L, 16L, 
8L, 14L, 12L, 11L, 5L, 13L, 19L, 27L, 3L, 18L, 12L, 13L, 19L, 
7L, 10L, 15L, 23L, 11L, 3L, 24L, 18L, 15L, 16L, 14L, 16L, 22L, 
11L, 11L, 20L, 18L, 14L, 20L, 21L, 3L, 10L, 19L, 14L, 16L, 8L, 
12L, 16L, 8L, 21L, 26L, 13L, 6L, 9L, 2L, 15L, 1L, 12L, 24L, 3L, 
21L, 24L, 8L, 18L, 20L, 3L, 19L, 12L, 15L, 8L, 18L, 14L, 19L, 
10L, 20L, 17L, 12L, 17L, 19L, 14L, 10L, 7L, 11L, 12L, 3L, 19L, 
1L, 16L, 11L, 8L, 3L, 10L, 15L, 21L, 27L, 3L, 3L, 19L, 5L, 17L, 
22L, 10L, 3L, 15L, 19L, 19L, 18L, 23L, 1L, 22L, 9L, 22L, 19L, 
12L, 18L, 10L, 10L, 9L, 14L, 2L, 27L, 21L, 4L, 18L, 1L, 2L, 16L, 
3L, 21L, 19L, 24L, 12L, 12L, 19L, 13L, 16L, 19L, 20L, 12L, 20L, 
13L, 9L, 15L, 22L, 14L, 5L, 22L, 15L, 3L, 9L, 3L, 12L, 2L, 12L, 
12L, 22L, 15L, 9L, 3L, 21L, 14L, 5L, 5L, 10L, 5L, 5L, 1L, 7L, 
21L, 19L, 22L, 1L, 9L, 1L, 21L, 18L, 15L, 14L, 21L, 6L, 19L, 
15L, 16L, 5L, 5L, 10L, 20L, 5L, 8L, 19L, 3L, 16L, 5L, 7L, 17L, 
16L, 19L, 2L, 20L, 15L, 9L, 17L, 21L, 19L, 13L, 3L, 13L, 12L, 
21L, 16L, 15L, 17L, 16L, 19L, 8L, 17L, 14L, 1L, 1L, 22L, 19L, 
24L, 20L, 10L, 17L, 1L, 17L, 1L, 17L, 13L, 15L, 21L, 6L, 3L, 
18L, 20L, 15L, 4L, 16L, 8L, 12L, 10L, 13L, 13L, 22L, 11L, 12L, 
1L, 21L, 21L, 5L, 5L, 16L, 11L, 20L, 21L, 20L, 21L, 20L, 19L, 
20L, 15L, 25L, 9L, 1L, 12L, 21L, 9L, 24L, 3L, 12L, 24L, 8L, 16L, 
15L, 9L, 20L, 15L, 5L, 10L, 1L, 16L, 16L, 12L, 9L, 20L, 10L, 
19L, 12L, 3L, 20L, 22L, 11L, 16L, 16L, 22L, 19L, 19L, 22L, 14L, 
14L, 12L, 5L, 14L, 19L, 18L, 19L, 18L, 3L, 10L, 20L, 14L, 1L, 
13L, 18L, 13L, 1L, 22L, 23L, 19L, 13L, 18L, 9L, 16L, 15L, 17L, 
21L, 15L, 18L, 1L, 14L, 14L, 1L, 14L, 9L, 16L, 12L, 22L, 14L, 
2L, 22L, 19L, 21L, 16L, 16L, 11L, 19L, 13L, 3L, 16L, 16L, 20L, 
18L, 1L, 19L, 11L, 17L, 19L, 12L, 15L, 10L, 11L, 13L, 7L, 14L, 
14L, 14L, 15L, 15L, 16L, 14L, 22L, 20L, 17L, 19L, 19L, 13L, 16L, 
12L, 15L, 20L, 22L, 17L, 20L, 16L, 10L, 15L, 15L, 12L, 12L, 14L, 
20L, 5L, 19L, 2L, 13L, 15L, 17L, 9L, 14L, 18L, 2L, 10L, 14L, 
12L, 14L, 12L, 18L, 17L, 13L, 8L, 22L, 12L, 21L, 12L, 13L, 3L, 
14L, 26L, 4L, 3L, 1L, 7L, 10L, 19L, 16L, 16L, 15L, 13L, 15L, 
16L, 11L, 21L, 12L, 11L, 15L, 1L, 16L, 1L, 17L, 6L, 1L, 16L, 
7L, 11L, 2L, 5L, 16L, 5L, 12L, 13L, 12L, 13L, 13L, 12L, 20L, 
21L, 21L, 12L, 19L, 21L, 18L, 12L, 15L, 22L, 19L, 16L, 16L, 3L, 
14L, 1L, 7L, 13L, 16L, 11L, 7L, 12L, 16L, 16L, 12L, 22L, 1L, 
13L, 4L, 8L, 16L, 5L, 11L, 10L, 1L, 21L, 10L, 19L, 12L, 13L, 
16L, 12L, 15L, 19L, 13L, 1L, 1L, 2L, 6L, 16L, 14L, 15L, 15L, 
16L, 4L, 12L, 16L, 10L, 19L, 12L, 5L, 6L, 10L, 3L, 14L, 1L, 12L, 
4L, 11L, 16L, 10L, 20L, 4L, 13L, 10L, 1L, 9L, 2L, 7L, 9L, 18L, 
10L, 26L, 14L, 2L, 14L, 10L, 11L, 13L, 1L, 21L, 16L, 9L, 22L, 
12L, 12L, 16L, 15L, 12L, 8L, 15L, 20L, 11L, 16L, 15L, 12L, 12L, 
16L, 2L, 9L, 12L, 14L, 20L, 1L, 10L, 7L, 10L, 18L, 16L, 12L, 
15L, 12L, 14L, 3L, 14L, 6L, 10L, 1L, 11L, 9L, 5L, 12L, 12L, 1L, 
8L, 20L, 7L, 21L, 20L, 22L, 20L, 7L, 12L, 9L, 7L, 13L, 19L, 15L, 
15L, 18L, 16L, 1L, 10L, 19L, 2L, 13L, 6L, 24L, 1L, 22L, 16L, 
11L, 7L, 5L, 19L, 15L, 14L, 12L, 19L, 14L, 12L, 15L, 24L, 15L, 
10L, 4L, 14L, 16L, 3L, 21L, 1L, 19L, 14L, 17L, 12L, 21L, 3L, 
12L, 16L, 18L, 14L, 15L, 15L, 14L, 1L, 2L, 17L, 1L, 14L, 16L, 
15L, 14L, 10L, 14L, 17L, 17L, 12L, 17L, 11L, 14L, 16L, 1L, 1L, 
19L, 12L, 24L, 15L, 19L, 14L, 8L, 3L, 22L, 1L, 16L, 15L, 19L, 
8L, 15L, 12L, 8L, 14L, 8L, 12L, 7L, 13L, 2L, 13L, 10L, 15L, 15L, 
17L, 1L, 26L, 24L, 21L, 25L, 14L, 10L, 13L, 9L, 13L, 18L, 19L, 
16L, 21L, 16L, 17L, 14L, 14L, 11L, 17L, 16L, 12L, 17L, 14L, 6L, 
24L, 11L, 11L, 11L, 12L, 15L, 13L, 22L, 11L, 17L, 3L, 12L, 17L, 
14L, 10L, 11L, 9L, 21L, 18L, 19L, 20L, 24L, 7L, 12L, 22L, 3L, 
17L, 10L, 1L, 20L, 1L, 1L, 12L, 2L, 14L, 2L, 17L, 19L, 1L, 10L, 
12L, 16L, 15L, 3L, 12L, 16L, 12L, 15L, 17L, 24L, 15L, 16L, 8L, 
12L, 14L, 21L, 9L, 23L, 3L, 19L, 16L, 19L, 16L, 16L, 13L, 13L, 
3L, 9L, 17L, 1L, 1L, 16L, 11L, 15L, 7L, 7L, 14L, 8L, 14L, 20L, 
15L, 16L, 1L, 12L, 9L, 16L), .Label = c("<A", "A", "B", "C", 
"D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", 
"Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z"), class = "factor")), .Names = c("shortname", 
"value"), row.names = c(NA, 1156L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T18:11:41.920

您可以通过以下方式获得所需的行为：

```
ggplot(sample, aes(value, colour=shortname, group=shortname)) + geom_density() 
```

请注意绘图底部的字母标签，`as.numeric`解决方案中不存在这些标签：

![在此处输入图像描述](../Images/b88302c6956b84dcf70399e9bfea8893.png)

# c++ - LibPng 背景

> ID：14024240
> 
> 赞同：1
> 
> 时间：2012-12-24T17:42:50.403
> 
> 标签：c++, libpng

好的，所以在 Photoshop 中，我创建了一个具有透明背景和一些文本的 8 位彩色图像。然后我创建了一个具有透明背景和一些文本的 16 位彩色图像。

当我右键单击两个图像并转到属性时，两个图像都显示 32 位深度：l 所以我决定使用以下设置使用 LibPng 读取图像：

```
typedef union RGB     //Holds all the pixels..
{
    uint32_t Color;
    struct
    {
        unsigned char B, G, R, A;
    } RGBA;
} *PRGB;

channels = png_get_channels(PngPointer, InfoPointer);
    png_get_IHDR(PngPointer, InfoPointer, &width, &height, &bitdepth, &colortype, &interlacetype, nullptr, nullptr);
    png_set_interlace_handling(PngPointer);
    png_set_strip_16(PngPointer);
    png_set_packing(PngPointer);

    switch (colortype)
    {
        case PNG_COLOR_TYPE_GRAY:
        {
            png_set_expand_gray_1_2_4_to_8(PngPointer);
            png_set_expand(PngPointer);
            png_set_bgr(PngPointer);
            break;
        }

        case PNG_COLOR_TYPE_PALETTE:
        {
            png_set_palette_to_rgb(PngPointer);
            if (png_get_valid(PngPointer, InfoPointer, PNG_INFO_tRNS))
                png_set_tRNS_to_alpha(PngPointer);
            png_set_filler(PngPointer, 0xFF, PNG_FILLER_AFTER);
            png_set_bgr(PngPointer);
        BitsPerPixel = 24;
            break;
        }

        case PNG_COLOR_TYPE_GRAY_ALPHA:
        {
            png_set_gray_to_rgb(PngPointer);
            break;
        }

        case PNG_COLOR_TYPE_RGB:
        {
            png_set_bgr(PngPointer);
            png_set_filler(PngPointer, 0xFF, PNG_FILLER_AFTER);
            BitsPerPixel = 24;
            break;
        }

        case PNG_COLOR_TYPE_RGBA:
        {
            png_set_bgr(PngPointer);
            BitsPerPixel = 32;
            break;
        }

        default: png_destroy_read_struct(&PngPointer, &InfoPointer, nullptr); throw std::runtime_error("Error: Png Type not supported."); break;
    }

    //SET BACKGROUND
    /*png_color_16 my_background, *image_background;
    my_background.red = 255;
    my_background.green = 255;
    my_background.blue = 255;
    image_background = &my_background;

    if (png_get_bKGD(PngPointer, InfoPointer, &image_background))
    {
        png_set_filler(PngPointer, 0xFF, PNG_FILLER_AFTER);
        png_set_background(PngPointer, image_background, PNG_BACKGROUND_GAMMA_FILE, 1, 1.0);
    }
    else
    {
        png_set_filler(PngPointer, 0xFF, PNG_FILLER_AFTER);
        png_set_background(PngPointer, &my_background, PNG_BACKGROUND_GAMMA_SCREEN, 0, 1.0);
    }*/
    //END SET BACKGROUND

    png_read_update_info(PngPointer, InfoPointer);
    channels = png_get_channels(PngPointer, InfoPointer);
    png_get_IHDR(PngPointer, InfoPointer, &width, &height, &bitdepth, &colortype, &interlacetype, nullptr, nullptr); 
```

我的保存设置是：

```
png_set_write_fn(PngPointer, reinterpret_cast<void*>(&hFile), WriteToStream, nullptr);
    png_set_IHDR (PngPointer, InfoPointer, width, height, bitdepth, BitsPerPixel == 24 ? PNG_COLOR_TYPE_RGB : PNG_COLOR_TYPE_RGBA, PNG_INTERLACE_NONE, PNG_COMPRESSION_TYPE_DEFAULT, PNG_FILTER_TYPE_DEFAULT);
    png_write_info(PngPointer, InfoPointer);

    png_set_bgr(PngPointer);
    png_set_packing(PngPointer);
    png_set_interlace_handling(PngPointer);
    if (colortype == PNG_COLOR_TYPE_RGB) png_set_filler(PngPointer, 0xFF, PNG_FILLER_AFTER); 
```

PNG看起来像： ![在此处输入图像描述](../Images/d169470ed221ea3270f73ed3ea38f093.png)

当我通过 C++ 将它保存为位图时，它看起来像（8 位这样做）：![在此处输入图像描述](../Images/f848e61bb972e42c318d852c64769ff8.png)

将其另存为 PNG，它看起来与原始文件完全相同。8 和 16 都保存得很好。

问题是，如果我取消注释“SetBackground”部分，它可以完美地保存为位图，除了当我将它保存回 PNG 时，由于代码将背景设置为白色（255、255、255），背景不再透明.

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T07:41:50.920

我对您的代码进行了一些更改。**未测试！**

```
channels = png_get_channels(PngPointer, InfoPointer);
png_get_IHDR(PngPointer, InfoPointer, &width, &height, &bitdepth, &colortype, &interlacetype, nullptr, nullptr);
png_set_interlace_handling(PngPointer);
png_set_strip_16(PngPointer);
png_set_packing(PngPointer);
bool BGneeded = (colortype > PNG_COLOR_TYPE_PALETTE); 
switch (colortype)
{
    case PNG_COLOR_TYPE_GRAY:
    {
        png_set_expand_gray_1_2_4_to_8(PngPointer);
        //png_set_expand(PngPointer);
        //png_set_bgr(PngPointer);  //R=G=B so there's no need to swap RGB values
        png_set_gray_to_rgb(PngPointer);
        break;
    }

    case PNG_COLOR_TYPE_PALETTE:
    {
        png_set_palette_to_rgb(PngPointer);
        if (png_get_valid(PngPointer, InfoPointer, PNG_INFO_tRNS))
        {
            png_set_tRNS_to_alpha(PngPointer);
            BGneeded = true;
        }
        else
            png_set_filler(PngPointer, 0xFF, PNG_FILLER_AFTER);
        png_set_bgr(PngPointer);
        BitsPerPixel = 32;
        break;
    }

    case PNG_COLOR_TYPE_GRAY_ALPHA:
    {
        png_set_gray_to_rgb(PngPointer);
        break;
    }

    case PNG_COLOR_TYPE_RGB:
    {
        png_set_bgr(PngPointer);
        png_set_filler(PngPointer, 0xFF, PNG_FILLER_AFTER);
        BitsPerPixel = 32;
        break;
    }

    case PNG_COLOR_TYPE_RGBA:
    {
        png_set_bgr(PngPointer);
        BitsPerPixel = 32;
        break;
    }

    default: png_destroy_read_struct(&PngPointer, &InfoPointer, nullptr); throw std::runtime_error("Error: Png Type not supported."); break;
}

//SET BACKGROUND
png_color_16 my_background;
png_color_16p image_background;

my_background.red = 255;
my_background.green = 255;
my_background.blue = 255;

if (png_get_bKGD(PngPointer, InfoPointer, &image_background))
    png_set_background(PngPointer, image_background, PNG_BACKGROUND_GAMMA_FILE, 1, 1.0);
else if (BGneeded)
    png_set_background(PngPointer, &my_background, PNG_BACKGROUND_GAMMA_SCREEN, 0, 1.0);
//END SET BACKGROUND

png_read_update_info(PngPointer, InfoPointer);
channels = png_get_channels(PngPointer, InfoPointer);
png_get_IHDR(PngPointer, InfoPointer, &width, &height, &bitdepth, &colortype, &interlacetype, nullptr, nullptr); 
```

# asp.net - ASP.NET 发送电子邮件

> ID：14024244
> 
> 赞同：6
> 
> 时间：2012-12-24T17:43:28.603
> 
> 标签：asp.net, email

当用户在联系我们页面中单击提交时，我试图发送一封电子邮件，但由于某种原因它不起作用，我做错了什么？（此代码片段中省略了 PS 电子邮件和密码，但包含在实际解决方案中。

谢谢

web.config 中的代码：

```
<system.net>
<mailSettings>
  <smtp from="order@test.com">
    <network host="smtp.gmail.com"
             userName="" //my email
             password="" //password deleted for privacy reasons
             defaultCredentials="false"
             port="456"
             enableSsl="true" />
  </smtp>
</mailSettings> 
```

asp.net 联系表中的代码：

```
protected void btnSubmit_Click(object sender, EventArgs e)
    {
        MailMessage mail = new MailMessage();
        mail.To.Add(new MailAddress("test@gmail.com"));
        mail.Subject = "Test";
        mail.Body = "Message was sent from" + txtName.text + txtComment.text;
        SmtpClient smtp = new SmtpClient();
        smtp.SendAsync(mail, null);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T17:47:29.763

Gmails 使用 port `465`，而不是`456`SSL SMTP。从[这里](http://support.google.com/mail/bin/answer.py?hl=en&answer=13287&rd=1)：

> 外发邮件 (SMTP) 服务器 - 需要 TLS1 或 SSL：smtp.gmail.com
> 
> 使用身份验证：是
> 
> TLS/STARTTLS 端口：587
> 
> SSL 端口：465

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T19:59:33.090

“其他”可能的原因：

*   您的代码在本地开发时是否“工作”，但在您将文件“发布”/ftp/copy 等时停止工作？您的文件到您的网络主机？

*   **如果** `Yes`：检查主机的`trust`ASP.Net 设置。如果是`medium trust`（可能在共享主机中），那么请注意，在**medium trust 中，您****不能将端口 25 以外*的***任何端口用于 SMTP 。

 **它在本地 (dev) 工作，因为在本地 dev/VS 环境中，ASP.Net 在`full trust`.

REF（MSDN 博客）：[当 ASP.Net 未以完全信任方式运行时的 SMTP 问题](http://blogs.msdn.com/b/alvar/archive/2010/02/08/smtp-problems-when-asp-net-is-not-running-in-full-trust.aspx)**

# android - 无法在列表视图 Android 中添加标题

> ID：14024247
> 
> 赞同：1
> 
> 时间：2012-12-24T17:43:50.663
> 
> 标签：android

我在 OnCreate 方法上调用以下方法 setupAdapter();

```
 private void setupAdapter() {

    // set the list adapter
    JSONArray returnArray = null;
    try {
        returnArray = getQuickViewContents();
    } catch (JSONException e) {
        e.printStackTrace();
    }

    JSONObject obj0 = null;
    if (returnArray != null) {
        try {
            obj0 = returnArray.getJSONObject(0);

        } catch (JSONException e) {
            e.printStackTrace();

        }
    }
    try {
        getCreditCardDetails();
    } catch (JSONException e3) {
        e3.printStackTrace();
    }

    JSONArray productArray = null;
    try {
        productArray = obj0.getJSONArray("Content");
    } catch (JSONException e2) {
        e2.printStackTrace();
    }

    ArrayList<HashMap<String, String>> productList = new ArrayList<HashMap<String, String>>();

    if (productArray != null) {

        ListView lv = (ListView) findViewById(android.R.id.list);

        for (int i = 0; i < productArray.length(); i++) {

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap
            try {
                map.put(KEY_BRAND,
                        productArray.getJSONObject(i).getString("Brand"));
                map.put(KEY_QUANTITY_NAME, productArray.getJSONObject(i)
                        .getString("Quantity")
                        + " X "
                        + productArray.getJSONObject(i).getString("Name"));
                map.put(KEY_PRICE, Currency.britishPound
                        + productArray.getJSONObject(i)
                                .getString("MinCost"));
            } catch (JSONException e) {
                e.printStackTrace();
            }

            // adding HashList to ArrayList
            productList.add(map);

            adapter = new APIQuickCheckoutProductProvider(APIQuickCheckout.this, productList);
            lv.addHeaderView(headerMethod());

            lv.setAdapter(adapter);
            adapter.notifyDataSetChanged();

        }
    }
}

private View headerMethod() {

    View header = getLayoutInflater().inflate(R.layout.api_quick_checkout_header, null);
    card_cvv = (EditText) header.findViewById(R.id.api_quick_checkout_card_cvv);

    Button edit_payment_details = (Button) header.findViewById(R.id.edit_button_payment);
    edit_payment_details.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            final Intent i = new Intent(APIQuickCheckout.this,APIPaymentDetails.class);
            startActivity(i);
        }
    });

    // set the payment info layout
    TextView card_number = (TextView) header.findViewById(R.id.api_quick_checkout_card_number);
    TextView card_expiry = (TextView) header.findViewById(R.id.api_quick_checkout_card_expiry);
    try {
        card_number.setText(CheckoutManager.getInstance().getSelectedPaymentCard().getString("cardNumber"));
        card_expiry.setText(CheckoutManager.getInstance().getSelectedPaymentCard().getString("expDate"));
    } catch (Exception e1) {
        e1.printStackTrace();
    }

    return header;

} 
```

和堆栈跟踪

```
 12-24 17:31:17.805: E/AndroidRuntime(31051): FATAL EXCEPTION: main
 12-24 17:31:17.805: E/AndroidRuntime(31051): java.lang.RuntimeException: Unable to start     activity ComponentInfo{apicheckout.APIQuickCheckout}: java.lang.IllegalStateException:   Cannot add header view to list -- setAdapter has already been called.
 12-24 17:31:17.805: E/AndroidRuntime(31051):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
 12-24 17:31:17.805: E/AndroidRuntime(31051):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
 12-24 17:31:17.805: E/AndroidRuntime(31051):   at android.app.ActivityThread.access$1500(ActivityThread.java:117)
 12-24 17:31:17.805: E/AndroidRuntime(31051):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
 12-24 17:31:17.805: E/AndroidRuntime(31051):   at android.os.Handler.dispatchMessage(Handler.java:99)
 12-24 17:31:17.805: E/AndroidRuntime(31051):   at android.os.Looper.loop(Looper.java:130)
 12-24 17:31:17.805: E/AndroidRuntime(31051):   at android.app.ActivityThread.main(ActivityThread.java:3683)
 12-24 17:31:17.805: E/AndroidRuntime(31051):   at java.lang.reflect.Method.invokeNative(Native Method)
 12-24 17:31:17.805: E/AndroidRuntime(31051):   at java.lang.reflect.Method.invoke(Method.java:507)
 12-24 17:31:17.805: E/AndroidRuntime(31051):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
 12-24 17:31:17.805: E/AndroidRuntime(31051):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
 12-24 17:31:17.805: E/AndroidRuntime(31051):   at dalvik.system.NativeStart.main(Native Method)
 12-24 17:31:17.805: E/AndroidRuntime(31051): Caused by: java.lang.IllegalStateException: Cannot add header view to list -- setAdapter has already been called.
 12-24 17:31:17.805: E/AndroidRuntime(31051):   at android.widget.ListView.addHeaderView(ListView.java:279)
 12-24 17:31:17.805: E/AndroidRuntime(31051):   at android.widget.ListView.addHeaderView(ListView.java:302)
 12-24 17:31:17.805: E/AndroidRuntime(31051):   at apicheckout.APIQuickCheckout.setupAdapter(APIQuickCheckout.java:192)
 12-24 17:31:17.805: E/AndroidRuntime(31051):   at apicheckout.APIQuickCheckout.onCreate(APIQuickCheckout.java:121)
 12-24 17:31:17.805: E/AndroidRuntime(31051):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
 12-24 17:31:17.805: E/AndroidRuntime(31051):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
 12-24 17:31:17.805: E/AndroidRuntime(31051):   ... 11 more 
```

我要做的就是将 headerMethod 的内容添加为标题。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T17:52:09.487

将这些代码行置于**for 循环之外**

```
adapter = new APIQuickCheckoutProductProvider(APIQuickCheckout.this, productList);
lv.addHeaderView(headerMethod());
lv.setAdapter(adapter);
adapter.notifyDataSetChanged(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T18:29:57.830

抛出错误是因为您在调用后尝试添加标头，`setAdapter(...)`因为它们所在的 for 循环不止一次运行。

# c# - 在旋转的精灵上实现每像素碰撞

> ID：14024248
> 
> 赞同：1
> 
> 时间：2012-12-24T17:43:51.273
> 
> 标签：c#, xna, rotation, collision-detection, collision

我正在使用 C# 在 XNA 中构建一个 2D 游戏，并且我正在使用精灵来跟踪玩家的位置并在 spritebatch.Draw() 方法中相应地旋转。我现在正在尝试实现逐像素碰撞检测，并且我相信精灵的旋转会将其扔掉。碰撞检查如下。

```
private bool collision(Rectangle object1, Color[,] dataA, Rectangle object2, Color[,] dataB)
    {

        if (object1.Bottom < object2.Top)
            return perPixel(object1, dataA, object2, dataB);
       if (object1.Top > object2.Bottom)
           return perPixel(object1, dataA, object2, dataB);
       if (object1.Left > object2.Right)
           return perPixel(object1, dataA, object2, dataB);
       if (object1.Right < object2.Left)
           return perPixel(object1, dataA, object2, dataB);

       return true;
    }

    private bool perPixel(Rectangle object1, Color[,] dataA, Rectangle object2, Color[,] dataB)
    {
        //Bounds of collision
        int top = Math.Max(object1.Top, object2.Top);
        int bottom = Math.Min(object1.Bottom, object2.Bottom);
        int left = Math.Max(object1.Left, object2.Left);
        int right = Math.Min(object1.Right, object2.Right);

        //Check every pixel
        for (int y = top; y < bottom; y++)
        {
            for (int x = left; x < right; x++)
            {
                Color colourA = dataA[x, y];
                Color colourB = dataB[x, y];

                if (colourA.A != 0 && colourB.A != 0)
                {
                    return true;
                }
            }
        }
        return false;
    } 
```

如果有帮助的话，只有一组被检查的精灵会被旋转。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:06:33.253

当我对旋转的精灵进行碰撞检测时，我遇到了一个非常相似的问题。我基本上所做的是将与精灵边界的矩形旋转角度 theta ，这里 theta 是 spriteBatch.Draw() 的旋转参数中传递的角度

我所说的是一个非常天真的实现。

```
for each X in RectangleofSpriteToBeRotated{
   for each Y in RectangleofSpriteToBeRotated{

    Vector2 temp = Vector2.Transform(PointXY, Matrix.CreateRotationZ(Theta));
     //Save Point Temp in a new 2D Array 
    }
} 
```

如果您确实/不明白我在说什么，请发表评论，我会尽力详细说明。

更新：您应该尝试这样做，我假设应该旋转第二个 Sprite，我还没有运行此代码

```
private bool collision(Rectangle object1, Color[,] dataA, Rectangle object2, Color[,] dataB)
    {

    var  RotatedP0=  new Vector2.Transform( new Vector2( object2.Top,object2.Left ),Matrix.CreateRotationZ(theta));
    var  RotatedP1=  new Vector2.Transform( new Vector2 (object2.Bottom,object2.Right),Matrix.CreateRotationZ(theta ) );    

        if (object1.Bottom < RotatedP0.Y)
            return perPixel(object1, dataA, object2, dataB);
       if (object1.Top > RotatedP1.Y)
           return perPixel(object1, dataA, object2, dataB);
       if (object1.Left > RotatedP1.X)
           return perPixel(object1, dataA, object2, dataB);
       if (object1.Right < RotatedP0.X)
           return perPixel(object1, dataA, object2, dataB);

       return true;
    }

    private bool perPixel(Rectangle object1, Color[,] dataA, Rectangle object2, Color[,] dataB)
    {
        //Bounds of collision
        int top = Math.Max(object1.Top, object2.Top);
        int bottom = Math.Min(object1.Bottom, object2.Bottom);
        int left = Math.Max(object1.Left, object2.Left);
        int right = Math.Min(object1.Right, object2.Right);

        //Check every pixel
        for (int y = top; y < bottom; y++)
        {
            for (int x = left; x < right; x++)
            {

                Color colourA = dataA[x, y];

                Vector2 v = Vector2.Transform(new Vector2(x,y), Matrix.CreateRotationZ(theta));

                Color colourB = dataB[ (int) v.X, (int) v.Y];

                if (colourA.A != 0 && colourB.A != 0)
                {
                    return true;
                }
            }
        }
        return false;
    } 
```

# html - ActionMailer，发送带有背景图片的电子邮件

> ID：14024250
> 
> 赞同：0
> 
> 时间：2012-12-24T17:44:01.833
> 
> 标签：html, css, ruby-on-rails, ruby, actionmailer

我正在尝试向我们的用户发送本质上只是一个巨大图像的 HTML 电子邮件。到目前为止，我还没有尝试过任何花哨的东西。我的视图如下所示：

```
<!DOCTYPE html>
<html>
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    <style type="text/css">
      body {
         background-image: url('https://s3.amazonaws.com/my-bucket/image.png');
         background-repeat: repeat-y no-repeat;
         background-color: #333;
         margin: 0;
         padding: 0;
      }
    </style>
  </head>
  <body>
  </body>
</html> 
```

我并不完全关心在所有邮件客户端上进行这项工作，但主要的会很棒。当我使用 ActionMailer 发送这封电子邮件时，我只收到一封空邮件。看起来图像没有被应用，至少在 gmail Web 客户端中。

任何建议都会很棒。我还希望使整个图像可点击进入 iTunes 商店链接，但当我让图像显示时我会到达那部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T17:57:01.973

您确定您的文件可供公众访问吗？尝试直接访问 URL。如果没有，您必须在您的亚马逊存储桶中将其标记为可公开访问。

这是我们的一个邮件程序的片段，其中包含 S3 上的图像（.erb 文件），它工作正常：

```
Dear <b><%= @card.first_name %></b>,
<br/><br/>
Thank you for being a member with us since <strong><%= @card.start_date.strftime("%d %b %Y") %></strong>.
<br/><br/>

 ...

 Warm Regards,
 <br/>
Team MyCompany
<br/><br/>
<% if Settings.show_banner_image_in_email %>
  <div style="text-align:center;">
    <a href="<%= Settings.website_url %>">
      <img src="http://cdn2.mywebsite.com/images/EmailFooterBanner.jpg" width="590px" height="118px" />
    </a>
  </div>
<% end %>

<b>Happy to Help!</b>
<br/>Voice: 23424234242342
<br/>E-mail: <a href="mailto:customercare@mywebsite.com">customercare@mywebsite.com</a>
<br/>Web: <a href="<%= Settings.website_url %>"><%= Settings.website_url %></a>
<br/> 
```

编辑：如果您在 app/mailers 中的模型称为**UserMailer**，您必须将您的邮件视图存储在视图下名为“ **user_mailer** ”的文件夹中。那是它被捡起来的时候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T18:09:16.360

# youtube - Meteor.JS YouTube 授权和数据

> ID：14024253
> 
> 赞同：0
> 
> 时间：2012-12-24T17:44:54.330
> 
> 标签：youtube, meteor

因此，我现在所拥有的托管在[http://exonia.meteor.com/](http://exonia.meteor.com/)上——我已经让 Google 身份验证工作正常，并且我已经拥有了我想要添加的两个 YouTube 范围并且也可以正常工作。但是，当我尝试从用户集合中的 YouTube API 访问任何数据时，我唯一拥有的是用户的全名，来自他们的 YouTube 个人资料。

如何访问 YouTube 数据？

编辑：我现在已经部署到上面提到的域，我很抱歉 - 正在部署到自定义域并且忘记了那个域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T17:58:11.160

If everything is going as intended, you should have access to the Youtube information in the server. If that's the case, then you need to tell Meteor to also expose that information to the client by [publishing](http://docs.meteor.com/#meteor_publish) it (only basic info is published by default).

For instance, if you want to add some extra fields to the user object from the data you've received from Youtube, do something like this:

```
Meteor.publish("extra_fields", function() {
  return Meteor.users.find(
    {_id: this.userId},
    {fields: {fieldYouWantToPublish: 1}} // 1 indicates you want to include that field
  );
}); 
```

Meteor will automatically merge the requested fields into the user object for you. Don't forget to subscribe to it!

# php - 灰色大写 Loc 通知图像显示在密码字段上？

> ID：14024254
> 
> 赞同：1
> 
> 时间：2012-12-24T17:45:03.503
> 
> 标签：php, html, macos, forms, capslock

当您单击密码字段并打开大写锁定时，出现的灰色小写大写锁定通知图像有问题。地雷显示在框外约 20 像素的右侧。这会导致阻塞，因此用户无法看到位于该位置的 div 层。

有人能告诉我为什么我的密码没有显示在密码字段中，我怎么能把它弄进去？

我的 HTML 表单已经用 css 进行了编辑，以在框上显示图像背景，所以我想它与 css 有关。

但我找不到任何与之相关的东西。谢谢。

代码：

```
<style>

#main{
        width:440px;
        height:0px;
        margin-top:1px;
        margin-left:10px;
        margin-bottom:0px; 
        position:relative;
        text-align:left;
    }

    #main form{
        width:440px;
        height:0px;
        padding-bottom:0px;
    }

    #main form .row{
        position:relative;

    }

    #main form .row.error:after,
    #main form .row.success:after{
        content:'';

        position:absolute;
        right: 60px;
        top: 8px;
        width:32px;
        height:32px;
        background:url('../img/icons.png') no-repeat;
        margin-right:50px;
    }

    #main form .row.error:after{
        background-position: 0 -79px;
    }

    #main form input[name=email],
    #main form input[name=password]{

        border:none;
        background:url('http://www.playtimeboys.com/img/form/text-boxes.png') no-repeat top left;
        font:14px 'Segoe UI','Arial',sans-serif;
        color:#888;

        outline:none;

        height: 48px;
        margin-top:22px;
        margin-left:-10px;
        padding: 0 10px 0 50px;
        width: 350px;
    }

    #main form .email input{
        background-position:0 -96px;
    }

    #main form .email input:focus{
        background-position:0 -144px;
    }

    #main form .password input{
        background-position:0 -193px;
    }

    #main form .password input:focus{
        background-position:0 -241px;
    }

    /*----------------------------
        The Submit Button
    -----------------------------*/

    #main form input[type=submit]{

        border: 1px solid #004C9B;
        border-radius: 3px 3px 3px 3px;
        box-shadow: 0 1px 0 rgba(255, 255, 255, 0.3) inset, 0 1px 1px rgba(0, 0, 0, 0.3);
        color: #D3EBFF;
        cursor: pointer;
        display: block;
        font: bold 24px Cambria,"Hoefler Text",serif;
        margin-top: -46px;
        margin-left:360px;
        padding-top: 7px;
        padding-bottom: 10px;
        text-shadow: 0 -1px 0 #444444;
        width: 100px;
        height:45px;
        position:absolute;
        z-index:100;

        background-color:#0496DA;

        background-image: linear-gradient(top, #0496DA 0%, #0067CD 100%);
        background-image: -o-linear-gradient(top, #0496DA 0%, #0067CD 100%);
        background-image: -moz-linear-gradient(top, #0496DA 0%, #0067CD 100%);
        background-image: -webkit-linear-gradient(top, #0496DA 0%, #0067CD 100%);
        background-image: -ms-linear-gradient(top, #0496DA 0%, #0067CD 100%);
    }

    #main form input[type=submit]:hover{

        background-color:#0383d3;

        background-image: linear-gradient(top, #0383d3 0%, #004c9b 100%);
        background-image: -o-linear-gradient(top, #0383d3 0%, #004c9b 100%);
        background-image: -moz-linear-gradient(top, #0383d3 0%, #004c9b 100%);
        background-image: -webkit-linear-gradient(top, #0383d3 0%, #004c9b 100%);
        background-image: -ms-linear-gradient(top, #0383d3 0%, #004c9b 100%);
        position:absolute;
        z-index:100;
    }

    #main form input[type=submit]:active{

        background-color:#026fcb;

        background-image: linear-gradient(top, #026fcb 0%, #004c9b 100%);
        background-image: -o-linear-gradient(top, #026fcb 0%, #004c9b 100%);
        background-image: -moz-linear-gradient(top, #026fcb 0%, #004c9b 100%);
        background-image: -webkit-linear-gradient(top, #026fcb 0%, #004c9b 100%);
        background-image: -ms-linear-gradient(top, #026fcb 0%, #004c9b 100%);
        position:absolute;
        z-index:100;
    }

    </style>
        </head>

    /*----------------------------
        The HTML
    -----------------------------*/

        <body>
            <div id="main">

                 <form action="login.php" method="post"  >

                    <div class="row email">
                        <input type="email" id="email" name="email" placeholder="Email" value="<?php echo htmlentities($email); ?>" />
                    </div>

                    <div class="row password">
                        <input type="password" id="password" name="password" placeholder="Password" value="<?php echo htmlentities($email); ?>" />
                    </div>
                    <input type="submit" name="submit" value="Login >"  />
                </form>
            </div>
        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:46:17.457

问题出在本节：

```
#main form input[name=email],
#main form input[name=password]{
    [...snip...]
    height: 48px;
    margin-top:22px;
    margin-left:-10px;
    padding: 0 10px 0 50px;
    width: 350px;
} 
```

您的字段设置太宽；大写锁定图像通常显示在文本字段内。此外，内容框的高度太大，使通知器显得特别大。请尝试：

```
 height: 28px; // height of image - 20px
    margin-top:22px;
    margin-left:-10px;
    padding: 10px 10px 10px 50px; // extra 20px of padding on height
    width: 280px; // proper width of image, so contents don't overflow 
```

要了解为什么会发生这种情况，请记住，即使您对文本文件进行了强硬的设计，它仍然存在于某个地方；一旦应用了样式，就很难看到底层文本字段的实际边界。如果您发现某些文本字段或其他表单小部件的格式正在起作用，则可以帮助禁用将它们从默认外观更改的样式，例如`border:none;`查看系统认为小部件的外观。从那里可以更容易地发现错误所在。

# html - 使用 css 将 dom 格式化为表达式

> ID：14024257
> 
> 赞同：0
> 
> 时间：2012-12-24T17:45:33.847
> 
> 标签：html, css, css-selectors, pseudo-element

我正在创建一个使用标签的网站，并且需要使用运算符`not`、`and`、执行基本标签代数`or`。我有一个描述表达式但无法使用 css 显示表达式的 dom 元素。

考虑以下表达式：

```
([Green] or ((not [Blue]) and ([Red] or (not [Yellow])))) 
```

在dom中表示为：

```
<span class="tag-expression">
  <span class="tag-or">
    <span class="tag" value="green">Green</span>
    <span class="tag-and">
      <span class="tag-not">
        <span class="tag" value="blue">Blue</span>    
      </span>
      <span class="tag-or">
        <span class="tag" value="red">Red</span>
        <span class="tag-not">
          <span class="tag" value="yellow">Yellow</span>
        </span>
      </span>
    </span>
  </span>
</span> 
```

我设法使用 css' 包含括号`:before`并`:after`与`content`属性（[jfiddle demo](http://jsfiddle.net/zPZhg/)）绑定。但是没有运气显示运营`¬`商`&`，，`|`。我一直在玩弄包含`<span class="operator"/>`图像背景的 a ，但我想知道是否有另一种方法可以使用`:before`and`:after`选择器来实现这一点。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:54:16.100

在这里，它适用于您在示例中提供的内容，您应该用更复杂的表达式对其进行测试以确保它是正确的。

我在 CSS 脚本的末尾添加了一些复杂的 CSS 选择器以显示您的运算符：

```
.tag-expression .tag-or > span:nth-child(2):before {
    content: ' | (';   
}

.tag-expression .tag-and > span:first-child:after {
    content: ' ) & ';
}

.tag-expression .tag-not:before {
    content: ' ( ¬ ';
}​ 
```

你可以在这个[小提琴](http://jsfiddle.net/zPZhg/2/)中签出这个。让我知道这是否能解决您的问题。

# compiler-construction - 尽管语法正确，但 Antlr 工作语法图未生成

> ID：14024262
> 
> 赞同：0
> 
> 时间：2012-12-24T17:45:54.860
> 
> 标签：compiler-construction, antlr, antlrworks

我正在尝试制作像 C 一样的编译器。我将我的语法输入到 antlrWorks IDE 中，它没有显示错误，但是当我想查看我的规则的语法图时，它抱怨“无法显示规则 'xxxxx'，因为启动状态不是成立”。我没有找到在示例上定义开始符号的任何特殊方法。我把我的语法放在这里可能有人可以帮助我：

```
grammar MiniC;

tokens {
    GET='get';
    PUT='put';
    CHANGE='change';
    DATA='data';
    METADATA='metadata';
    DEPENDENCIES='dependencies';
    DEPENDENTS='dependents';
    STATISTICS='statistics';
    FROM='from';
    IN='in';
    ABOUT='about';
    OF='of';
    MAIN='main()';
    ID = 'ID';
    SEMI = ';';
    INT ='int';
    VOID = 'void';
    BOOL ='BOOL';
    FLOAT = 'FLOAT';
    IF = 'if';
    ELSE = 'else';
    RETURN = 'return';
    BREAK ='break';
    WHILE ='while';
};

program
    :    MAIN compound_stmt
    ;

compound_stmt
    :
    '{' local_declarations stmt_list'}'
    ;

local_declarations
    :
    () (var_declarations)*
    ;

var_declarations
    :
    type_specifier ID SEMI 
    |
    type_specifier ID [('0'..'9')*]
    ;

type_specifier 
    :   
    'int'
    |
    'void'
    |
    'bool'
    |
    'float'     
    ;

stmt_list 
    :
    (stmt)*
    ;   

stmt : 
    expression_stmt
    |
    compound_stmt
    |
    selection_stmt
    |
    iteration_stmt
    |
    return_stmt
    |
    break_stmt
    ;

selection_stmt 
    :   IF('('expression')') compound_stmt
        |
        IF('('expression')') compound_stmt ELSE compound_stmt
        ;
iteration_stmt 
    :
        WHILE ('('expression')') compound_stmt; 

return_stmt 
    :
        RETURN SEMI|RETURN expression;

break_stmt 
    :   BREAK;

expression_stmt 
    :
        expression; 

expression
    :   var '=' simple_expression|simple_expression;

simple_expression 
    :
        operand operator operand;
operand :
    ('1'..'9')
    |
    ;

var     :
        ID|ID[('1'..'9')*];

operator 
    :       
    RelOp|LogicOp|ArithOp;

RelOp   :   
    '<='|'<'|'>='|'>'|'!='|'==' ;
LogicOp :   
    '&&'|'||'
    ;

ArithOp :   
    '+'|'-'|'*'|'/'|'%';    

WS
    :) (' '|'\t'|'\n'|'\r')+ {skip();}
    ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T22:13:15.473

首先，去掉`;`后面的分号（）

```
tokens {
    ...
} *;* 
```

所以，它必须是：

```
tokens {
    ...
} 
```

这就是为什么`AntlrWorks`说“*由于找不到启动状态而无法显示规则'xxxxx'”的主要原因*（我检查了这个）。但是在这个更正之后，你可能会在你的语法中看到几个新的错误，这些错误实际上是存在的，但这已经是另一个问题了。

# python - self.sendLine 还是 self.transport.write？

> ID：14024264
> 
> 赞同：1
> 
> 时间：2012-12-24T17:46:18.850
> 
> 标签：python, twisted

在扭曲中，调用 self.transport.write () 和 self.sendLine () 有什么区别？例如，无论我在 lineReceived 方法中调用什么，以下程序的行为都相同：

```
class FooProtocol(basic.LineReceiver):

    delimiter = '\n'

    def connectionMade(self):
        self.sendLine("Foo")

    def lineReceived(self, line):
        self.sendLine("Echoed: " + line)
        #self.transport.write("Echoed: " + line + "\n")

if __name__ == "__main__":
    stdio.StandardIO(FooProtocol())
    reactor.run() 
```

有没有更蟒蛇（或扭曲......）的方式来做到这一点？

提前致谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T17:54:49.423

[`sendLine()`](http://twistedmatrix.com/trac/browser/tags/releases/twisted-12.2.0/twisted/protocols/basic.py#L618)是一种方便的方法。默认实现是：

```
def sendLine(self, line):
    return self.transport.write(line + self.delimiter) 
```

`sendLine()`是一个稍微高级一点的函数。您不需要`self.transport.write()`直接在面向行的协议中使用。

# hibernate - 带有列表的 Restrictions.eq

> ID：14024265
> 
> 赞同：2
> 
> 时间：2012-12-24T17:46:27.793
> 
> 标签：hibernate, criteria

我有一个名为 Product 的课程。每个产品都有一个序列号。我想返回列表中具有序列号的所有产品。就像是

```
Restrictions.eq("serial_number", mySerialNumberList); 
```

可以简洁地完成，还是我必须构建一个包含大量“或”属性的巨大查询？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T17:51:22.953

这就是`IN`运营商的用途：

```
Restrictions.in("serialNumber", mySerialNumberList); 
```

但要小心：传递一个空列表将导致 SQL 语法异常。

# hadoop - 50 个节点 hadoop 无密码

> ID：14024266
> 
> 赞同：1
> 
> 时间：2012-12-24T17:46:32.783
> 
> 标签：hadoop, hdfs

我的问题很简单，我想设置一个 50 个节点的 hadoop 集群，我该如何设置 50 个节点之间的无密码。如果手动操作是很困难的！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T10:50:10.893

您不需要在节点之间设置 SSH，在主从之间**单向就足够了。**（所以只有主人必须在没有密码的情况下访问奴隶）。

通常的方法是编写一个 bash 脚本，循环遍历您的从属文件并登录到您的从属，将主控的公钥复制到从属的授权密钥中。

[您可以在 Praveen Sripati 的博客上看到一个小的解决方案。](http://www.thecloudavenue.com/2012/01/how-to-setup-password-less-ssh-to.html)

但是，我不是管理员，所以我不能告诉你是否有更聪明的方法。也许这更适合[Superuser.com](https://superuser.com/%20Superuser.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T17:05:45.020

也许这可以帮助：

> 为了无缝工作，需要设置 SSH 以允许 hadoop 用户从集群中的机器进行无密码登录。实现这一点的最简单方法是生成公钥​​/私钥对，并将其放置在整个集群共享的 NFS 位置。
> 
> 首先，通过在 hadoop 用户帐户中键入以下内容来生成 RSA 密钥对：
> 
> % ssh-keygen -t rsa -f ~/.ssh/id_rsa
> 
> 即使我们想要无密码登录，但没有密码短语的密钥被认为是不好的做法（运行本地伪分布式集群时可以使用空密码短语，如附录 A 中所述），因此我们在提示输入密码时指定密码。我们将使用 ssh-agent 来避免每次连接都需要输入密码。
> 
> 私钥在 -f 选项指定的文件 ~/.ssh/id_rsa 中，而公钥存储在同名文件中，并附加了 .pub 文件 ~/.ssh/id_rsa.pub。
> 
> 接下来，我们需要确保公钥在我们要连接的集群中所有机器上的 ~/.ssh/authorized_keys 文件中。如果 hadoop 用户的主目录是 NFS 文件系统，如前所述，则可以通过键入以下内容在集群中共享密钥：
> 
> % 猫 ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys
> 
> 如果未使用 NFS 共享主目录，则需要通过其他方式共享公钥。
> 
> 通过确保 sshagent 正在运行，3 然后运行 ​​ssh-add 来存储您的密码，以测试您是否可以从主计算机通过 SSH 连接到工作计算机。您应该能够 ssh 到工作人员而无需再次输入密码。

资料来源：Tom White，Hadoop：权威指南，第 301 页

[在这里谷歌搜索： https](https://www.google.rs/url?sa=t&rct=j&q=&esrc=s&source=web&cd=22&cad=rja&ved=0CDYQFjABOBQ&url=http%3A%2F%2Fbigdata.googlecode.com%2Ffiles%2FOreilly.Hadoop.The.Definitive.Guide.3rd.Edition.Jan.2012.pdf&ei=sGzZULb6OfOM0wWhlYDYAw&usg=AFQjCNGvNUZcQBvM_Ucqf_K0JGAlCRxr3A&sig2=Qpa_KZyP1mXXm9yQv0ynRw&bvm=bv.1355534169,d.d2k) ://www.google.rs/url?sa=t& rct =j&q=&esrc=s&source=web&cd=22&cad=rja&ved=0CDYQFjABOBQ&url=http%3A%2F%2Fbigdata.googlecode.com%2Ffiles%2FOreilly [.Hadoop.The.Definitive.Guide.3rd.Edition.Jan.2012.pdf&ei=sGzZULb6OfOM0wWhlYDYAw&usg=AFQjCNGvNUZcQBvM_Ucqf_K0JGAlCRxr3A&sig2=Qpa_KZyP1mXXm9yQv0ynRw&bvm=bv.1355534169,d.d2](https://www.google.rs/url?sa=t&rct=j&q=&esrc=s&source=web&cd=22&cad=rja&ved=0CDYQFjABOBQ&url=http%3A%2F%2Fbigdata.googlecode.com%2Ffiles%2FOreilly.Hadoop.The.Definitive.Guide.3rd.Edition.Jan.2012.pdf&ei=sGzZULb6OfOM0wWhlYDYAw&usg=AFQjCNGvNUZcQBvM_Ucqf_K0JGAlCRxr3A&sig2=Qpa_KZyP1mXXm9yQv0ynRw&bvm=bv.1355534169,d.d2k)

# android - 读取一个简单的文本文件

> ID：14024273
> 
> 赞同：0
> 
> 时间：2012-12-24T17:47:10.927
> 
> 标签：android

大家好，我正在尝试从 android 中的文件中读取日期。我正在使用 Eclipse，程序正在编译和运行，只是它没有打印 txt 文件的上下文。这是我的加载方法

```
 private String load(String filename) {
        try {
//          Log.v("Home", " in the load method");
            Log.d("Home", " in the load method");

            final FileInputStream fis = openFileInput(filename);
//          final InputStream fis =  getResources().openRawResource(R.raw.pages);

            final BufferedReader reader = new BufferedReader(new InputStreamReader(fis));
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line);
            }
            reader.close();
            fis.close();
            return sb.toString();
        } catch (Exception ex) {
            return "No entry exists for this file";
        }
    } 
```

在 oncreate 我只是访问它

```
String fileName = "pages.txt";
load(fileName); 
```

pages.txt 位于 res/raw 目录中。我试图用两者来读取文件

```
final FileInputStream fis = openFileInput(filename);
// final InputStream fis =  getResources().openRawResource(R.raw.pages); 
```

但它没有打印上下文。

我在 onCreate 方法中添加

```
Log.d("File", load(fileName)); 
```

但正在返回 catch 语句`No entry exists for this file.`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:04:25.220

尝试像下面这样使用，

```
System.out.println(load(raw.pages));

 private String load(int id) {
        try {           
             Resources res = getResources();
             InputStream fis = res.openRawResource(id);
            final BufferedReader reader = new BufferedReader(new InputStreamReader(fis));
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line);
            }
            reader.close();
            fis.close();
            return sb.toString();
        } catch (Exception ex) {
            return "No entry exists for this file";
        }
    } 
```

# ruby-on-rails - 在 Rails 中导入 CSS 部分

> ID：14024275
> 
> 赞同：1
> 
> 时间：2012-12-24T17:47:26.253
> 
> 标签：ruby-on-rails, asset-pipeline, compass-sass

我正在使用 Compass 和 Rails，有人[告诉我](https://stackoverflow.com/questions/13864591/compass-why-do-i-need-to-do-a-double-import-for-it-to-work)应该创建一个`_base.css.scss`部分来包含它。

我做到了，但我不禁觉得`@import`它很丑：

```
@import "partials/_base.css.scss"; 
```

在我需要 Compass 的每个 SCSS 文件之上。这是要走的路吗？是否有更短/更好的方法来指定文件名？

# twitter-bootstrap - 引导折叠两行

> ID：14024278
> 
> 赞同：1
> 
> 时间：2012-12-24T17:47:33.493
> 
> 标签：twitter-bootstrap, rows, collapse

我正在玩引导崩溃。但我想知道是否有办法让引导程序崩溃也分两行工作。我尝试了几件事，但似乎没有一个对我有用。

下面是我尝试过的一件事，但这似乎不起作用。打开一个手风琴选项卡时，无论我尝试什么，另一个都不会折叠...

关于如何解决这个问题的任何想法或建议？

```
<div class="row-fluid">
    <div class="accordion" id="accordion2">

        <div class="span6">

          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
                Collapsible Group Item #1
              </a>
            </div>
            <div id="collapseOne" class="accordion-body collapse in">
              <div class="accordion-inner">
                Anim pariatur cliche...
              </div>
            </div>
          </div>

        </div>

        <div class="span6">

          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
                Collapsible Group Item #2
              </a>
            </div>
            <div id="collapseTwo" class="accordion-body collapse">
              <div class="accordion-inner">
                Anim pariatur cliche...
              </div>
            </div>
          </div>

        </div>

    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T18:57:30.580

我终于找到了多列引导崩溃的解决方案。我将创建一个工作[小提琴](http://jsfiddle.net/LmeSL/)，因为如果其他人曾经问过同样的问题。

```
<div class="row-fluid" id="accordion2" >

    <div class="span6" id="accordion2">

        <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
                    collapse 1
              </a>
            </div>
            <div id="collapseOne" class="accordion-body collapse in">
              <div class="accordion-inner">
                    collapse item 1
              </div>
            </div>
        </div>

        <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
                    collapse 2
              </a>
            </div>
            <div id="collapseTwo" class="accordion-body collapse">
              <div class="accordion-inner">
                    collapse item 2
              </div>
            </div>
        </div>

    </div>

    <div class="span6" id="accordion2">

        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseThree">
                    Collapse 3
                </a>
            </div>
            <div id="collapseThree" class="accordion-body collapse">
                <div class="accordion-inner">
                    Collapse item 3
                </div>
            </div>
        </div>

        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseFour">
                    Collapse 4
                </a>
            </div>
            <div id="collapseFour" class="accordion-body collapse">
                <div class="accordion-inner">
                    Collapse item 4
                </div>
            </div>
        </div>

    </div>

</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T13:59:35.033

编辑：抱歉，此代码指的是下面的示例。恐怕是 SOF 的新手

这对多个 ID 来说很棒但很顽皮！

尝试：

```
<div class="row-fluid accordion2" >

<div class="span6 accordion2">

<div class="accordion-group">

  <div class="accordion-heading">
   <a class="accordion-toggle" data-toggle="collapse" data-parent=".accordion2" href="#collapseOne">
    collapse 1
   </a>
  </div>

  <div id="collapseOne" class="accordion-body collapse in">
   <div class="accordion-inner">
    collapse item 1
   </div>
  </div>

</div> 
```

ETC......

请注意，就此而言，嵌套重复类可能也不是很好。

# windows - Yesod ghc.exe 在执行“yesod devel”Windows 时没有响应

> ID：14024280
> 
> 赞同：0
> 
> 时间：2012-12-24T17:47:35.777
> 
> 标签：windows, haskell, cabal, yesod, haskell-platform

我开始在 Yesod 网站上阅读有关 Yesod 的信息，并尝试在 Windows 上安装它。

我按照以下步骤操作：

1.  我从他们的 Windows 网站安装了 Haskell-Platform。
2.  我在我的路径上添加了 C:...\AppData\Roaming\cabal\bin （其中“...”表示我的 HOME 文件夹）。
3.  我打开命令提示符并输入“cabal update”
4.  然后我做了“cabal install cabal-install”来安装最新版本。
5.  之后，我执行了“cabal install yesod”，一切正常。
6.  称为“yesod init”，它创建了我的项目。
7.  最后称为“yesod devel”，问题开始了。

一旦我调用“yesod devel”，就会出现以下错误：
Desktop\yosod>yesod devel
Yesod devel 服务器。按 ENTER 退出
配置 yosod-0.0.0（yosod 是我的应用程序的名称）
yesod: src\System\Win32\Notify.hs:(136,1)-(146,45): 非穷举模式函数
actsToEvent

重建应用程序...（使用 Cabal 库）
启动开发服务器...
启动开发应用程序
退出代码：ExitFailure 255

（然后有一个窗口弹出说：ghc.exe没有响应）

"ghc --version" 是 7.4.2

"cabal --version" :
cabal-install 版本 1.16.0.2
使用 Cabal 库的版本 1.16.0.3

我尝试重新安装所有东西，但我遇到了同样的错误。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T20:27:13.387

现在应该解决上游错误。

# ruby-on-rails - 如何仅显示属于所选国家的县？

> ID：14024281
> 
> 赞同：1
> 
> 时间：2012-12-24T17:47:47.253
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view

我想根据用户选择的国家/地区自动选择县。
我的意思是，如果用户选择美国，它会显示加利福尼亚州、纽约州等地区的选择

**国家**模式有

*   ID
*   姓名

**县**模式有

*   ID
*   country_id
*   州

现在我像这样展示这些字段

```
<% resource.build_user_profile if resource.user_profile.nil? %>
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put, :class => 'form-horizontal' }) do |f| %>
  <%= devise_error_messages! %>

<%= f.fields_for :user_profile do |profile_form| %>

 <label class="control-label"><%= profile_form.label :country_id %></label>
 <%= profile_form.collection_select("country_id", Country.find(:all), :id, :name_en) %>

 <label class="control-label"><%= profile_form.label :prefecture_id %></label>
 <%= profile_form.collection_select("prefecture_id", Prefecture.find(:all), :id, :name) %>

<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T20:02:11.450

尝试像这样改变形式

```
<%= f.label :country_id %><br />
<%= f.collection_select :country_id, Country.all, :id, :name_en, include_blank: true %>

<%= f.label :state_id, "State or Province" %><br />
<%= f.grouped_collection_select :prefecture_id, Country.all, :prefectures, :name_en, :id, :name, include_blank: true %> 
```

并粘贴到正确的咖啡文件中（如果模型`profile`比`profile.js.coffee`）如果它在文件名和文件内部的其他模型更改配置文件中

```
jQuery ->
  $('#resource_name_user_profile_prefecture_id').parent().hide()
  prefectures = $('#resource_name_user_profile_prefecture_id').html()
  $('#resource_name_user_profile_country_id').change ->
    country = $('#resource_name_user_profile_country_id :selected').text()
    escaped_country = country.replace(/([ #;&,.+*~\':"!^$[\]()=>|\/@])/g, '\\$1')
    options = $(prefectures).filter("optgroup[label='#{escaped_country}']").html()
    if options
      $('#resource_name_user_profile_prefecture_id').html(options)
      $('#resource_name_user_profile_prefecture_id').parent().show()
    else
      $('#resource_name_user_profile_prefecture_id').empty()
      $('#resource_name_user_profile_prefecture_id').parent().hide() 
```

# javascript - 字段在 Qooxdoo 库中作为静态字段

> ID：14024282
> 
> 赞同：3
> 
> 时间：2012-12-24T17:47:47.470
> 
> 标签：javascript, oop, prototypal-inheritance, qooxdoo

我想使用 qx-oo (Qooxdoo) 作为 OOP 库。但我对现场成员的奇怪行为感到困惑。看起来字段在一个类的所有对象之间共享，例如静态成员。比如这个测试代码

```
 qx.Class.define("com.BaseClass",
    {
        extend : qx.core.Object,

        members:
        {
            _children: [],

            getChildrenCount: function(){
                return this._children.length;
            },

            addChild: function(child){
                this._children.push(child);
            }
        }
    });

    var class1 = new com.BaseClass();
    var class2 = new com.BaseClass();
    showLog("class1.getChildrenCount() - " + class1.getChildrenCount())
    showLog("class2.getChildrenCount() - " + class2.getChildrenCount())
    class1.addChild("somechild");
    showLog("class1.getChildrenCount() - " + class1.getChildrenCount())
    showLog("class2.getChildrenCount() - " + class2.getChildrenCount()) 
```

会产生这样的日志

```
class1.getChildrenCount() - 0
class2.getChildrenCount() - 0
class1.getChildrenCount() - 1
class2.getChildrenCount() - 1 
```

有没有办法做到这一点？

**或者你能建议另一个 OOP-js-lib 吗？**

这是一个完整的[例子](http://jsfiddle.net/mAfc6/)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T07:24:08.640

这不是 qooxdoo 的问题。您不应该在类描述中初始化引用类型。您应该使用构造函数初始化引用类型。

[qooxdoo手册](http://manual.qooxdoo.org/current/pages/core/classes.html#instance-members)中有一篇很好的文章解释了这个问题。

这是您改进的[示例](http://pastebin.com/Pt8pzBRG)：

```
 qx.Class.define("com.BaseClass",
    {
        extend : qx.core.Object,

        construct: function() {
          this._children = [];
        },

        members:
        {
            _children: null,

            getChildrenCount: function(){
                return this._children.length;
            },

            addChild: function(child){
                this._children.push(child);
            }
        }
    }); 
```

# web-services - 使用 Lift 输出 Web 服务请求参数 (GET/POST)

> ID：14024284
> 
> 赞同：0
> 
> 时间：2012-12-24T17:47:56.863
> 
> 标签：web-services, scala, post, lift, http-request-parameters

我只想检查 REST 请求中发送的参数。我见过类似`S.param("paramName")`, 或的方法`S.params("??")`，但我只想查看所有参数。我该怎么做？

在这里检查过：http: [//simply.liftweb.net/index-Chapter-11.html](http://simply.liftweb.net/index-Chapter-11.html)，还有许多 SO 线程，但只找到如何获取某些参数。

**编辑**向代码添加不起作用的建议

**Edit2**发现问题，我把请求的返回值注释掉了：）

我当前的代码：

```
object WebserviceHandler extends RestHelper {

    serve {
      case "somePath" :: Nil JsonPost _ =>

      //1st try
      for(s <- S.request; r <- s.params) { //compiler error: "could not find implicit value for parameter c: (Unit) => net.liftweb.http.LiftResponse"
        val (paramName:String, paramVals:List[String]) = r
      }

      //2nd try
      S.request.foreach(x => 
        x.paramNames.foreach(p => 
          println(p) //compiler error: "scala is not an enclosing class" 
        ) 
      );

      //Extraction.decompose(someList) //<--- Problem- this line was commented 

      //...
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T18:23:32.990

您可以通过 Req 对象访问它们。下面的代码将遍历所有值，您可以使用它做您需要做的事情。

```
for(s <- S.request; r <- s.params) {
    val (paramName:String, paramVals:List[String]) = r
} 
```

如果您只想要参数名称，则可以使用`s.paramNames`而不是`s.params`

完整的 api 文档：http: [//scala-tools.org/mvnsites/liftweb/lift-webkit/scaladocs/net/liftweb/http/Req.html](http://scala-tools.org/mvnsites/liftweb/lift-webkit/scaladocs/net/liftweb/http/Req.html)

# python - 串联 groupby 对象上的 Pandas groupby

> ID：14024287
> 
> 赞同：2
> 
> 时间：2012-12-24T17:48:49.473
> 
> 标签：python, pandas

我正在使用 groupby 和 sum 快速聚合两个数据集

一个包含：

```
sequence shares
1        100
2        200
3        50
1        200 
```

B 其中包含：

```
sequence shares
1        100
2        200
2        50
3        50 
```

我正在使用`A=A.groupby(['sequence']).sum()`and`B=B.groupby(['sequence']).sum()`对每个序列的份额求和。然后，我想再次连接这些集合，并对序列中的份额求和。但是，我尝试使用`C = concat([A,B])`，现在发现我只有列共享作为索引，不能按顺序分组。`C.group(['sequence']).sum()`给我一个错误 KeyError: u'no item named sequence'。

我想得到的是C：

```
sequence shares
1        400
2        450
3        100 
```

谁能解释这里发生了什么？我可以在 groupby().sum() 之前进行连接，但我真的想在连接之前将这些数据集缩小到更小的大小。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T18:24:44.603

该`groupby`方法返回一个由 索引的数据框`'sequence'`。添加两个数据帧时，行按索引对齐。在这种情况下，grpA 和 grpB 的索引都是，`'sequence'`因此生成的 DataFrame C 将适当的行添加在一起。

```
A = DataFrame({'sequence': [1,2,3,1], 'shares': [100,200,50,200]})
B = DataFrame({'sequence': [1,2,2,3], 'shares': [100,200,50,50]})

grpA = A.groupby('sequence').sum()
grpB = B.groupby('sequence').sum()

In [60]: grpA + grpB
Out[60]:
          shares
sequence
1            400
2            450
3            100 
```

# xml - Flash AS3 不返回函数外的数组

> ID：14024288
> 
> 赞同：0
> 
> 时间：2012-12-24T17:48:54.263
> 
> 标签：xml, actionscript-3, flash

我在使用 AS3 时遇到了一些问题。从 XML 中成功提取数组，但在函数之外没有“已保存”数组。跟踪函数**内部**的数组可以正常工作。

如果有人可以伸出援助之手，那就太好了-谢谢！

圣诞节快乐！

**AS3**

```
var mapLocations:Array = new Array();

var xmlLoader:URLLoader = new URLLoader();
xmlLoader.addEventListener(Event.COMPLETE, showXML);
xmlLoader.load(new URLRequest("mapLocations.xml"));
function showXML(e:Event){
    XML.ignoreWhitespace = true; 
    var xml:XML = new XML(e.target.data);
    for (i=0; i<xml.loc.length(); i++) {
        mapLocations.push([
                       xml[0].loc[i].locname,
                       xml[0].loc[i].locx,
                       xml[0].loc[i].locy
                     ]);
    }
    trace(mapLocations); // NOT BEING RETURNED OUTSIDE FUNCTION!
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T19:31:41.187

既然你问了例如：

```
package examples
{
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.net.URLLoader;
    import flash.net.URLRequest;

    public class XMLLoadingExample extends Sprite
    {
        public function XMLLoadingExample()
        {
            super();
            loadLocations();
        }

        private function loadLocations():void
        {
            var xmlLoader:URLLoader = new URLLoader();
            xmlLoader.addEventListener(
                Event.COMPLETE, locationsLoadHandler);
            xmlLoader.load(new URLRequest("mapLocations.xml"));
        }

        // This code handles the initial reception of XML
        // and passes it further for more processing
        private function locationsLoadHandler(event:Event):void
        {
            XML.ignoreWhitespace = true; 
            var xml:XML = XML(event.target.data);
            var result:Array = [];
            for each (var node:XML in xml.loc)
                result.push(node.locname, node.locx, node.locy);
            // Call some other code that waits for the
            // results of loading this XML file
            handleMapLocations(result);
        }

        private function handleMapLocations(locations:Array):void
        {
            // Do whatever you wanted with your location data here
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T18:41:20.757

代码是异步执行的。当您在回调之外跟踪数组时 - 时间线的范围 - 数组尚未使用加载的 XML 数据进行更新。您必须使用相互调用的方法来实现控制流。时间线代码中的语句在启动后同步执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T18:28:13.217

我认为您对 XML 有疑问。代码没问题。

试试这个 XML：

```
<root>
    <loc>
        <locname>object 1</locname>
        <locx>10</locx>
        <locy>100</locy>
    </loc>
    <loc>
        <locname>object 2</locname>
        <locx>20</locx>
        <locy>200</locy>
    </loc>
    <loc>
        <locname>object 3</locname>
        <locx>30</locx>
        <locy>300</locy>
    </loc>
</root> 
```

* * *

您也可以尝试使用此 XML：

```
<root>
    <loc name="object 1" x="10" y="100" />
    <loc name="object 2" x="20" y="200" />
    <loc name="object 3" x="30" y="300" />
</root> 
```

和修改后的代码：

```
...
mapLocations.push([
    xml[0].loc[i].@name,
    xml[0].loc[i].@x,
    xml[0].loc[i].@y
]);
... 
```

# java - 如何验证仅使用预期参数调用方法？

> ID：14024292
> 
> 赞同：1
> 
> 时间：2012-12-24T17:50:07.150
> 
> 标签：java, unit-testing, junit, mocking, mockito

我想验证对模拟的调用只会发生在某些预期的参数值上，而不会发生在其他任何事情上。

```
public interface ADependancy {
    public void method(String parameter, String otherParameter);
}

public class Foo {
    private ADependancy myHelper;

    public Foo(ADependancy helper) {
        this.myHelper = helper;
    }

    public void good() {
        myHelper.method("expected","expected");
        myHelper.method("expected","expected");
        myHelper.method("expected","expected");
    }

    public void bad() {
        myHelper.method("expected","expected");
        myHelper.method("expected","UNexpected");
        myHelper.method("expected","expected");
    }
} 
```

我试过这个：

```
public class FooTest extends TestCase {
    private ADependancy mock =mock(ADependancy.class);;
    private Foo foo  = new Foo(mock);

    @Test
    public void testGood() {
        foo.good();
        validateOnlyCalledWithExpected();
    }

    @Test
    public void testBad() {
        foo.bad();
        validateOnlyCalledWithExpected();
    }

    private void validateOnlyCalledWithExpected() {
        verify(mock,atLeastOnce()).method(eq("expected"),eq("expected"));
        verify(mock,never()).method(not(eq("expected")),not(eq("expected")));
    }
} 
```

期望 testBad 失败，但测试通过了。如果方法只接受一个参数，这将按预期工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T22:24:16.437

您可以使用[http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#finding_redundant_invocations](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#finding_redundant_invocations)`verifyNoMoreInteractions`中记录的静态方法。

```
verify(mock).method(eq("expected"),eq("expected"));
verifyNoMoreInteractions(mock); 
```

或者，你可以写

```
verify(mock).method(eq("expected"),eq("expected"));
verify(mock,never()).method(anyString(),anyString()); 
```

因为第二次调用`verify`将忽略已经验证的调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T17:50:07.150

这是一个逻辑错误。

我想断言每个参数都只是期望值。但相反，我实际上断言的是，它们都不是预期值的情况永远不会发生。因此，按照我的方式，它并没有按预期失败，因为实际上，*某些*参数不是*预期*值，因此*永远不会使用**所有*参数*都不*是预期值来调用该方法，并且验证通过。

因此，这适用于我想要的：

```
 private void validateOnlyCalledWithExpected() {
        verify(mock,atLeastOnce()).method(eq("expected"),eq("expected"));
        verify(mock,never()).method(not(eq("expected")),anyString());
        verify(mock,never()).method(anyString(),not(eq("expected")));
    } 
```

# javascript - JQuery：PageSlide + Slickgrid：消失的列

> ID：14024295
> 
> 赞同：1
> 
> 时间：2012-12-24T17:50:16.807
> 
> 标签：javascript, jquery, slickgrid

我正在填充一个[SlickGrid](https://github.com/mleibman/SlickGrid)，然后用[PageSlide](https://github.com/srobbin/jquery-pageslide)显示它。由于某种原因，这会导致某些列消失：[JS Fiddle-Disappearing Columns](http://jsfiddle.net/xM5WW/7/)。

当我在没有 PageSlide 的情况下填充 SlickGrid 时，一切正常：[JS Fiddle - Works without PageSlide](http://jsfiddle.net/xM5WW/8/)。

**编辑：似乎问题是由于 slickgrid ( `tab_container`) 的父 div 设置为`display:none`在页面幻灯片之前。任何解决方法的想法？**

这是我的 javascript 代码，但我建议查看 JS Fiddles，它们提供的信息要多得多。

```
function TableGrid() {
    var dataView = new Slick.Data.DataView();
    var grid = {};
    var pager = {};
    var data = [];
    var colnames = [];
    var columns = [];
    var context = {};
    var raw_data = {};
    var options = {
        editable: false,
        enableAddRow: false,
        enableCellNavigation: true
    };

    this.dataView = dataView;
    this.data = data;

    var percentCompleteThreshold = 0;
    var prevPercentCompleteThreshold = 0;
    var h_runfilters = null;

    var buildColumns = function(raw_data) {
        colnames = raw_data[0];
        columns = [];
        for (var i = 0; i < colnames.length; i++) {
            columns.push({
                id: "col_" + i,
                name: colnames[i],
                field: colnames[i]
            });
        }
    };
    this.buildGrid = function(raw_data) {
        buildColumns(raw_data);
        fillGrid(raw_data);
        update(dataView);
    };
    var update = function(dataView) {
        dataView.beginUpdate();
        dataView.setItems(data);
        dataView.endUpdate();
    };
    this.update = update;

    var DataItem = function(row) {
        arguments.callee.counter = arguments.callee.counter || 0;
        this.id = "r_id_" + arguments.callee.counter;
        for (var i = 0; i < row.length; i++) {

            this[colnames[i]] = row[i];
        }
        arguments.callee.counter++;
    };

    var fillGrid = function(raw_data) {

        // prepare the data
        for (var i = 1; i < raw_data.length; i++) {
            row = raw_data[i];
            data[i - 1] = new DataItem(row);
            console.log(data[i - 1]);
        }
        console.log("preparing data view");
        grid = new Slick.Grid("#myGrid", dataView, columns, options);
        pager = new Slick.Controls.Pager(dataView, grid, $("#pager"));

        // wire up model events to drive the grid
        dataView.onRowCountChanged.subscribe(function(e, args) {
            grid.updateRowCount();
            grid.render();
        });

        dataView.onRowsChanged.subscribe(function(e, args) {
            grid.invalidateRows(args.rows);
            grid.render();
        });
        this.fillGrid = fillGrid;

        // initialize the model after all the events have been hooked up

    };

}

var rd = [["Date/Time", "Air Temp. (F°) ", "Dew Point Temp. (F°) ", "Sea Level Pressure (hPa) ", "Wind Direction (°) ", "Wind Speed Rate (mph) ", "Liquid Precipitation Depth Six Hr (\") ", "Precip. Depth (1 Hr) (\") "], ["12/01/2012 12:00 am", 42, "--", 1029.3, 40, 3.4, "--", "--"], ["12/01/2012 1:00 am", 40, "--", 1030.1, 20, 3.4, "--", "--"], ["12/01/2012 2:00 am", 39, "--", 1030.3, 30, 2.2, "--", "--"], ["12/01/2012 3:00 am", 37, "--", 1030.2, 50, 5.8, "--", "--"], ["12/01/2012 4:00 am", 38, "--", 1030.2, 70, 3.4, "--", "--"], ["12/01/2012 5:00 am", 39, "--", 1030.5, 80, 2.2, "--", "--"], ["12/01/2012 6:00 am", 40, "--", 1030.6, 60, 4.7, "--", "--"], ["12/01/2012 7:00 am", 40, "--", 1030.8, 60, 4.7, "--", "--"], ["12/01/2012 8:00 am", 40, "--", 1030.8, 40, 5.8, "--", "--"], ["12/01/2012 9:00 am", 38, "--", 1030.9, 60, 5.8, "--", "--"], ["12/01/2012 10:00 am", 37, "--", 1030.9, 40, 5.8, "--", "--"], ["12/01/2012 11:00 am", 37, "--", 1031.2, 40, 5.8, "--", "--"], ["12/01/2012 12:00 pm", 38, "--", 1031.6, 60, 5.8, "--", "--"], ["12/01/2012 1:00 pm", 38, "--", 1032.1, 50, 9.2, "--", "--"], ["12/01/2012 2:00 pm", 38, "--", 1031.9, 40, 5.8, "--", "--"], ["12/01/2012 3:00 pm", 37, "--", 1033, 40, 3.4, "--", "--"], ["12/01/2012 4:00 pm", 37, "--", 1033.1, 50, 5.8, "--", "--"], ["12/01/2012 5:00 pm", 38, "--", 1031.9, 70, 5.8, "--", "--"], ["12/01/2012 6:00 pm", 39, "--", 1031.2, 50, 5.8, "--", "--"], ["12/01/2012 7:00 pm", 39, "--", 1030.8, 50, 5.8, "--", "--"], ["12/01/2012 8:00 pm", 39, "--", 1030.4, 50, 5.8, "--", "--"], ["12/01/2012 9:00 pm", 39, "--", 1030.7, 50, 5.8, "--", "--"], ["12/01/2012 10:00 pm", 39, "--", 1030.8, 40, 5.8, "--", "--"], ["12/01/2012 11:00 pm", 40, "--", 1031.3, 50, 4.7, "--", "--"], ["12/02/2012 12:00 am", 40, "--", 1031.4, 50, 6.9, "--", "--"], ["12/02/2012 1:00 am", 40, "--", 1031.1, 50, 4.7, "--", "--"], ["12/02/2012 2:00 am", 40, "--", 1030.6, 40, 4.7, "--", "--"], ["12/02/2012 3:00 am", 41, "--", 1030.1, 50, 5.8, "--", "--"], ["12/02/2012 4:00 am", 41, "--", 1030, 40, 6.9, "--", "--"], ["12/02/2012 5:00 am", 41, "--", 1029.9, 50, 8.1, "--", "--"], ["12/02/2012 6:00 am", 42, "--", 1029.4, 20, 2.2, "--", "--"], ["12/02/2012 7:00 am", 42, "--", 1029.2, 30, 3.4, "--", "--"], ["12/02/2012 8:00 am", 42, "--", 1028.7, 60, 2.2, "--", "--"], ["12/02/2012 9:00 am", 42, "--", 1028.2, 40, 2.2, "--", "--"], ["12/02/2012 10:00 am", 42, "--", 1028, 20, 4.7, "--", "--"], ["12/02/2012 11:00 am", 42, "--", 1028, 30, 5.8, "--", "--"], ["12/02/2012 12:00 pm", 42, "--", 1028.2, 0, 0, "--", "--"], ["12/02/2012 1:00 pm", 42, "--", 1027.9, "--", "--", "--", "--"], ["12/02/2012 2:00 pm", 42, "--", 1026.9, 190, 3.4, "--", "--"], ["12/02/2012 3:00 pm", 42, "--", 1026.9, 190, 2.2, "--", "--"], ["12/02/2012 4:00 pm", 43, "--", 1026.6, 280, 2.2, "--", "--"]];
tableGrid = {};
$(document).ready(function() {
    tableGrid = new TableGrid();
    tableGrid.buildGrid(rd);
});​

​ 
```

# java - java.io.FileNotFoundException（是一个目录）

> ID：14024300
> 
> 赞同：-1
> 
> 时间：2012-12-24T17:50:59.170
> 
> 标签：java, filenotfoundexception

这是一段代码，我正在尝试阅读一个项目。我确定该项目存在于以下路径中，但我不知道为什么会出现以下异常：

```
org.eclipse.core.internal.resources.ResourceException()[567]: 
       java.io.FileNotFoundException "/home/XX" (Is a directory) 
```

**代码：**

```
 IProject project;

 String projectLocation = "/home/XX";

 IProjectDescription description;

 description = project.getWorkspace().loadProjectDescription(new Path(projectLocation));

 project.create(description, new NullProgressMonitor());

 project.open(new NullProgressMonitor());

 project.refreshLocal(IResource.DEPTH_INFINITE,new NullProgressMonitor()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T18:04:40.147

如果 /home/XX 是包含项目的目录，则实际的项目文件是 /home/XX/.project，这就是您应该使用的路径。

根据[Eclipse](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/resources/IWorkspace.html)文档，loadProjectDescription 需要现有项目描述文件在本地文件系统中的路径，而不是包含它的文件夹。

# debugging - SSE2：在 GCC 4.2 和 O0 优化的情况下，_mm_mul_ps 在 OS X 上失败

> ID：14024304
> 
> 赞同：3
> 
> 时间：2012-12-24T17:51:43.277
> 
> 标签：debugging, optimization, gcc, sse

我正在尝试使用 SSE2 计算两个 4d 浮点向量之间的平方欧几里得距离。我的操作系统是 Mac OS X 10.7 Lion。

当我在 XCode 4.5.2 中使用 Apple LLVM 编译器时，一切都很好。但是当我在项目设置中切换到 GCC 4.2 时，在**_mm_mul_ps**操作时出现错误 EXC_BAD_ACCESS。

当我从命令行（*g++ main.cpp*）编译代码而没有附加参数时，我有“分段错误”。但是当我启用除 O0 之外的任何优化级别（O1、O2、O3、Os）时，一切正常。

我无法在带有 GCC 4.6.3 的 Ubuntu 12.04 上重现此问题。

```
#include <stdio.h>
#include <emmintrin.h>

typedef float SPPixel[4];

float sp_squared_color_diff(const SPPixel px1, const SPPixel px2) {
    SPPixel d;
    __m128 sse_px1 = _mm_load_ps(px1);
    __m128 sse_px2 = _mm_load_ps(px2);
    sse_px1 = _mm_sub_ps(sse_px1, sse_px2);
    sse_px2 = _mm_mul_ps(sse_px1, sse_px1); // EXC_BAD_ACCESS

    _mm_store_ps(d, sse_px2);
    return d[0] + d[1] + d[2] + d[3];
}

int main(int argc, const char * argv[]) {
    SPPixel a __attribute__ ((aligned (16))) = {1, 2, 3, 4};
    SPPixel b __attribute__ ((aligned (16))) = {2, 4, 6, 8};
    float result = sp_squared_color_diff(a, b);
    printf("result = %f\n", result);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T18:53:51.280

局部变量`d`未对齐。修复 typedef 中的对齐方式，`SPPixel`而不必在每个定义中都记住它。

改变：

```
typedef float SPPixel[4]; 
```

至：

```
typedef float SPPixel[4] __attribute__ ((aligned(16))); 
```

然后您还可以删除 main.xml 中的`__attribute__ ((aligned(16)))`限定符。

# java - Java 不加载嵌入的图像

> ID：14024307
> 
> 赞同：1
> 
> 时间：2012-12-24T17:51:55.260
> 
> 标签：java, embedded-resource

```
package common;

import java.awt.image.BufferedImage;
import java.io.InputStream;

import javax.imageio.ImageIO;
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class ResourcesToAccess {
    public static Icon sharedAbstractDownIcon;
    public static Icon sharedAbstractPlayIcon;
    public static Icon sharedAbstractPauseIcon;
    public static Icon sharedAbstractBlackCursor;
    public static Icon sharedAbstractWhiteCursor;
    public ResourcesToAccess(){
        InputStream is = this.getClass().getClassLoader().getResourceAsStream("/src/images/blackCursor.png");
        try{
            BufferedImage bi = ImageIO.read(is);
            sharedAbstractBlackCursor = (Icon) new ImageIcon(bi);
            new JFrame().add(new JLabel(sharedAbstractBlackCursor)).setVisible(true);
        }catch(Exception e){
            e.printStackTrace();
        }
    }
    public static void main(String[] args) {
        new ResourcesToAccess();
    }
} 
```

我正在使用此代码查看是否`PNG`可以正确加载图像以创建 JLabels、图标等，但我收到以下错误：

```
java.lang.IllegalArgumentException: input == null!
    at javax.imageio.ImageIO.read(Unknown Source)
    at common.ResourcesToAccess.<init>(ResourcesToAccess.java:21)
    at common.ResourcesToAccess.main(ResourcesToAccess.java:29) 
```

为什么我会看到该错误消息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T17:52:49.653

尝试

```
this.getClass().getClassLoader().getResourceAsStream("images/blackCursor.png") 
```

它正在您的类路径中查找，因此`src`那里没有更多目录

# java - 关闭连接会自动关闭语句和结果集吗？

> ID：14024311
> 
> 赞同：21
> 
> 时间：2012-12-24T17:52:06.800
> 
> 标签：java, database, database-connection, prepared-statement

我知道 Java 中的安全模式是在 finally 块中按顺序关闭您的 ResultSet、Statement 和 Connection。

如果您关闭连接，然后尝试关闭语句（不抛出异常）。但是，如果您尝试从语句中调用任何方法，则会引发异常。

我想知道关闭连接是否会自动关闭从该连接创建的所有语句对象？

更新：
我正在使用 DatabaseProductVersion：Oracle Database 11g Release 11.1.0.0.0
DriverName：Oracle JDBC driver
DriverVersion：10.2.0.4.0

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-24T18:03:50.220

是的，Connection.close API 说“立即释放此 Connection 对象的数据库和 JDBC 资源，而不是等待它们自动释放”。问题是应用程序通常使用数据库连接池，这些可能只是在 Connection.close 上将连接返回到池。

在任何情况下，始终显式关闭 ResultSet 和 Statement 而不依赖 Connection.close 是一个好习惯。

此外，直接使用 JDBC 并不是最好的主意。您可以改用 Spring JDBC 而忘记释放资源的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T17:55:05.870

细节最终取决于每个 JDBC 驱动程序的实现；但是，一旦关闭了与数据库的连接，与之相关的所有内容都将在 DB 端进行处理，因此客户端只能自动关闭代表这些资源的对象。

您永远不知道数据库/驱动程序可能以何种方式被破坏（例如，可能存在资源泄漏），因此最佳实践建议是明确关闭所有内容。

# mysql - 日期范围内的记录 - 性能

> ID：14024313
> 
> 赞同：0
> 
> 时间：2012-12-24T17:52:19.077
> 
> 标签：mysql, sql, date

这是一个问题。我有一张桌子

```
flightdetails
-----------+-------------
flightName | varchar(200)
departure  | date
arrival    | date 
```

我想获取给定日期范围内的所有航班。fromDate 或 toDate 都应该在给定的日期范围内。我知道一个简单的查询会给我结果

```
select flightname from flightdetails where (departure between fromDate and toDate)
or (arrival between fromDate and toDate); 
```

但这对性能不利，因为我使用 OR 条件。任何人都可以提出一个更好的解决方案，它也有利于性能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T17:58:03.953

This is a common solution to this problem. Each subquery can make use of an index this way.

```
select flightname from flightdetails where departure between fromDate and toDate
union
select flightname from flightdetails where arrival between fromDate and toDate; 
```

* * *

Re comment from @SalmanA

You're right, the query above misses cases like this:

```
departure < fromDate < toDate < arrival 
```

Since neither departure nor arrival are between the date range, but of course the date range is included in the flight time.

Here's another solution, based on yours but it makes use of indexes both on departure and arrival. Be sure to create compound indexes for each condition:

```
create index flt_d on flightdetails(flightname, departure);
create index flt_a on flightdetails(flightname, arrival);

select f1.flightname 
from flightdetails f1
join flightdetails f2 use index (flt_a)
  on f1.flightname = f2.flightname
where f1.departure <= toDate
  and f2.arrival >= fromDate; 
```

I tested this out and I had to use the "use index" hint to coax it to use the second index, but when I did I got this optimizer plan:

```
*************************** 1\. row ***************************
           id: 1
  select_type: SIMPLE
        table: f1
         type: index
possible_keys: flt_d,flt_a
          key: flt_d
      key_len: 20
          ref: NULL
         rows: 3
        Extra: Using where; Using index
*************************** 2\. row ***************************
           id: 1
  select_type: SIMPLE
        table: f2
         type: ref
possible_keys: flt_a
          key: flt_a
      key_len: 12
          ref: test.f1.flightname
         rows: 1
        Extra: Using where; Using index 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T18:08:19.090

我认为您可以使用此查询：

> ```
> -- 2.2) select date ranges that overlap [d1, d2] (d2 and end_date are inclusive)  
> SELECT * FROM <table> WHERE @d2 >= start_date AND end_date >= @d1 
> ```

进行一些替换，例如 start_date 变成了离开，end_date 变成了到达，等等：

```
SELECT flightname
FROM   flightdetails
WHERE  toDate >= departure AND arrival >= fromDate 
```

# c# - 循环声音在 C# 中不起作用

> ID：14024316
> 
> 赞同：1
> 
> 时间：2012-12-24T17:52:30.327
> 
> 标签：c#, c#-4.0, xna-4.0

我添加了一段代码以在我的 Visual C# 2010 速成版项目游戏中循环一个 *wav 文件（我已经在内容文件夹项目以及调试文件夹中添加了 wav 文件），但它只播放了 1 次直到它结束停止。我添加的代码是这些：

```
 SoundEffect sound;
 sound = Content.Load<SoundEffect>("bonus_music"); 
 SoundEffectInstance instance = sound.CreateInstance();
 instance.IsLooped = true;
 sound.Play(); 
```

它没有循环播放那个声音。我正在使用 XNA Game Studio 4.0（循环声音完全没有问题，它工作得很好），但我想在不使用 XNA 的情况下循环声音，我遵循了 MSDN 参考和库上的示例，甚至在这个论坛中循环声音C＃）。

我究竟做错了什么 ？有什么建议吗？我认为代码没问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T17:54:55.110

您当前正在播放`SoundEffect`（未循环播放）而不是`SoundEffectInstance`（播放）。尝试将最后一行更改为

```
instance.Play(); 
```

# mysql - 在 MySQL 表中同时插入和更新转义字符、单引号和双引号

> ID：14024318
> 
> 赞同：2
> 
> 时间：2012-12-24T17:52:58.440
> 
> 标签：mysql, insert-update, mysql-real-escape-string, double-quotes

我担心在 MySQl 表 w 中插入文本。我必须插入/更新包含 / " 和 ' 等字符的文本

仅当启用 NO_BACKSLASH_ESCAPES SQL 模式时，才能插入转义字符 /。这会干扰字符“和”，请参阅此链接[http://dev.mysql.com/doc/refman/5.1/en/string-literals.html#character-escape-sequences](http://dev.mysql.com/doc/refman/5.1/en/string-literals.html#character-escape-sequences)

如果有人能解释一下 mysql_real_escape_string() 我不会轻描淡写

我想找到一个纯 mysql 解决方案，我不使用 php。我在这里要做的是“模拟”内容管理系统：我即将编写一个 C# 编码的解决方案来管理不同形式的内容（文章、类别、标签等）并生成 .html 文件， MySQl 数据库在我的计算机中是本地的，接下来我会将 .html 文件上传到服务器。

我这样做是为了确保我所有的 html 页面都是 html 有效的，并且因为我不信任任何现有的解决方案（不仅在涉及编码时，而且在一般生活中）

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:20:00.530

每个 php db 连接扩展（**mysql、mysqli、pdo**）都有一种特殊的方法来安全查询 sql 注入，当您使用 mysql 扩展时，强烈建议使用`mysql_real_escape_string()`函数来确保查询中使用的所有变量的安全，这是使用最广泛的函数. 我认为没有任何纯粹的解决方案（当您在 php 中使用 mysql 扩展时）。来自 php.net：

> mysql_real_escape_string() - 转义未转义字符串中的特殊字符，考虑到连接的当前字符集，以便**将其放在 mysql_query() 中是安全的**。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-24T18:18:49.297

如果根据 2 个规则格式化，则可以将任何字符串数据插入 SQL 查询

*   它用引号括起来（最好是单引号）
*   它通过 mysql_real_escape_string()

如果两个规则都遵循，那么无论是斜杠、引号还是任何字符，都不会出现任何问题。

根据您的问题，`/`在 MySQL 中没有特殊含义。这`\`就是转义字符。它也可以被另一个反斜杠转义。

```
$str = 'slashes \ quotes \' or whatever " else symbols';
var_dump($str);
$str = mysql_real_escape_string($str);
$sql = "INSERT INTO table SET str='$str'"; 
```

# python - 让 HDF5 与 pyTables 一起工作的问题

> ID：14024323
> 
> 赞同：2
> 
> 时间：2012-12-24T17:54:07.617
> 
> 标签：python, macos, homebrew, hdf5, pytables

我一直在努力尝试在 OSX 10.8 上设置 pyTables。我正在运行 Enthought python 发行版，使用 PIP 安装了 pyTables 和 numexpr，并使用 Homebrew 安装了 HDF5 包。

但是，当我尝试在 python 中导入表时，出现以下错误：

```
In [7]: import tables
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
<ipython-input-7-389ecae14f10> in <module>()
----> 1 import tables

/Users/MYNAME/src/tables/tables/__init__.py in <module>()
     28 
     29 # Necessary imports to get versions stored on the Pyrex extension
---> 30 from tables.utilsExtension import getPyTablesVersion, getHDF5Version
     31 
     32 

ImportError: dlopen(/Users/MYNAME/src/tables/tables/utilsExtension.so, 2): Symbol not         found: _H5E_CALLBACK_g
  Referenced from: /Users/MYNAME/src/tables/tables/utilsExtension.so
  Expected in: flat namespace
 in /Users/MYNAME/src/tables/tables/utilsExtension.so 
```

我试过玩弄我的路径变量，因为我认为可能是自制目录被覆盖了或其他东西，但情况似乎并非如此。关于发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T14:22:52.747

我有同样的问题。我下载了tra hdf5 1.8.4版本，从源代码安装，然后下载了pytables 2.4的源版本，而不是3.0.0，并使用命令安装：“sudo python setup.py install --hdf5=download_folder/ hdf5-1.8.4/hdf5" 其中 download_folder 是您下载 hdf5 源的文件夹。神奇的是安装 pytables 2.4，而不是 3.0。

# php - 将工作页面 Joomla 2.5 移动到本地主机

> ID：14024324
> 
> 赞同：0
> 
> 时间：2012-12-24T17:54:19.690
> 
> 标签：php, apache, joomla

我有一个想要移动到本地主机的工作 Joomla 页面。每当我尝试在 localhost(MAMP) 中运行该文件夹时，例如：**localhost/mysite**。本地主机变为[http://www.localhost/](http://www.localhost/)。而且 index.php 甚至没有运行。我检查了以下内容：

*   配置.php
*   apache重写模块
*   下载了一个新的 Joomla（在 MAMP 上工作）来比较配置文件（它们看起来不错）
*   php 和 apache 记录没有错误

所以如果它不是 php 或 apache 那么可能是什么问题？

顺便说一下，这个页面是别人创建的！

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T17:59:29.130

重命名 htaccess 文件或在 htaccess 文件下检查是否写入了 URL 更改的某些重写条件，然后如果其 thr，则对读写规则进行操作。

让我知道它是否适合您。

# python - 采用嵌套字符串列表并返回所有字符串大写的新嵌套列表的函数？

> ID：14024325
> 
> 赞同：6
> 
> 时间：2012-12-24T17:54:28.257
> 
> 标签：python, function, capitalize

这会将它们大写，但前提是没有嵌套列表。

```
t = ['this','that', ['other']]

def capitalize_nested(t):
    res = []
    for s in t:
        res.append(s.capitalize())
    return res

print capitalize_nested(t) 
```

我不知道如何让它打印出一个嵌套列表，其中所有字符串都以大写字母开头。我一定遗漏了一些明显的东西，这让我很难过。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-24T17:57:45.280

使用递归解决方案（并且使用列表推导也有助于使其更紧凑）：

```
def capitalize_nested(t):
    if isinstance(t, list):
        return [capitalize_nested(s) for s in t]
    else:
        return t.capitalize() 
```

例如：

```
print capitalize_nested(['this', 'that', ['other']])
# ['This', 'That', ['Other']] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T17:58:53.950

```
def cap(L):
    for i,elem in enumerate(L):
         if isinstance(elem, str):
             L[i] = elem.capitalize()
         elif isinstance(elem, list):
             cap(L[i]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T17:58:52.130

只需检查是否`s`是一个列表，然后递归调用您的`capitalize_nested`函数：

```
t = ['this','that', ['other']]

def capitalize_nested(t):
    res = []
    for s in t:
        if type(s) == list:
            res.append(capitalize_nested(s))
        else:
            res.append(s.capitalize())
    return res

print capitalize_nested(t) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T18:30:13.167

递归解决方案是第一个解决方案和最漂亮的解决方案，但并不总是最好的解决方案，请检查这个迭代解决方案：

```
def capitalize(t):
    lists = [t]
    while lists:
        l = lists.pop()
        for i, item in enumerate(l):
            if isinstance(item, list):
                lists.append(item)
            else:
                l[i] = item.capitalize() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-24T18:31:46.143

这是一个支持任意深度嵌套列表的版本：

```
from collections import MutableSequence

def capitalize_inplace(nested_list):
    stack = [nested_list]
    while stack:
        lst = stack.pop()
        for i, item in enumerate(lst):
            if isinstance(item, MutableSequence):
                stack.append(item)
            else:
                lst[i] = item.capitalize() 
```

### 例子

```
L = ['this', 'that', ['other'], ['may',['be', ['nested'], 'further']]]
capitalize_inplace(L)
print(L)
# -> ['This', 'That', ['Other'], ['May', ['Be', ['Nested'], 'Further']]] 
```

# scala - private[data] object FormUtils，那个数据是什么？

> ID：14024335
> 
> 赞同：0
> 
> 时间：2012-12-24T17:55:48.927
> 
> 标签：scala, playframework-2.0

这里只是一个小问题。我在 Play Framework 2 来源中找到：

```
private[data] object FormUtils {
   ...
} 
```

只是想知道 [数据] 是什么意思？说对象/类属于子文件夹只是一些花哨的语法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T18:22:55.407

这意味着这个类只能从包`play.api.data`及其子包中使用。它接近 Java 中的包私有可见性级别，但有两个不同之处：

1.  它从子包中可见（Java 中没有子包，但在 Scala 中，例如`play.api.data.foo`被视为 的一部分`play.api.data`）。

2.  你可以写，例如`private[api]`，它会在所有的子包中可见`play.api`。

[本文](http://www.ibm.com/developerworks/java/library/j-scala07298/index.html)更详细地解释了 Scala 访问修饰符。

# wpf - 在 WPF/Silverlight 中将 ComboBox 呈现为 TextBlock

> ID：14024336
> 
> 赞同：5
> 
> 时间：2012-12-24T17:56:17.803
> 
> 标签：wpf, combobox, controltemplate

我想将 ComboBox 显示为 TextBox （没有边框、背景、切换按钮等） - 只有当前选定的项目文本。我确实喜欢这样，但我不明白如何链接 TextBlock，以便它在 ComboBox 中显示当前选定的项目。

```
<ComboBox ItemsSource="{Binding Path=...}" SelectedValue="{Binding Path=...}" DisplayMemberPath="Name" SelectedValuePath="Id">
    <ComboBox.Template>
        <ControlTemplate>
            <TextBlock Text="{Binding ?}"></TextBlock>
        </ControlTemplate>
    </ComboBox.Template>
</ComboBox> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T18:22:08.613

```
<ComboBox ItemsSource="{Binding Path=...}" SelectedValue="{Binding Path=...}" DisplayMemberPath="Name" SelectedValuePath="Id">
<ComboBox.Template>
    <ControlTemplate>
        <TextBlock Text="{Binding SelectedItem.MyText,RelativeSource={RelativeSource Mode=TemplatedParent}}"></TextBlock>
    </ControlTemplate>
</ComboBox.Template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T18:12:51.163

您应该指定`TargetType`in`ControlTemplate`并绑定到`SelectionBoxItem`
Use this：

```
 <ComboBox>
        <ComboBox.Template>
            <ControlTemplate  TargetType="{x:Type ComboBox}">
                <TextBlock Text="{TemplateBinding SelectionBoxItem}" />
            </ControlTemplate>
        </ComboBox.Template>
        <ComboBoxItem Content="Item1" IsSelected="True" />
        <ComboBoxItem Content="sdff" />
  </ComboBox> 
```

# facebook - "show tables" or "describe" in FQL?

> ID：14024342
> 
> 赞同：2
> 
> 时间：2012-12-24T17:57:31.113
> 
> 标签：facebook, facebook-graph-api, facebook-fql

I was curious to know if there is a way to problematically get s list of all the FQL tables, a list of all their columns and which columns are index-able. I can't find anything in the documentation short of following the docs to create data objects defining these details for each FQL table.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T21:26:51.683

好吧，我没有尝试过自己，但这似乎完全符合您的要求。

[https://github.com/jwerle/fql-workbench/blob/master/README.md](https://github.com/jwerle/fql-workbench/blob/master/README.md)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:07:36.997

我认为它不存在，但是，Facebook 有关于可用表的完整参考，包括它们各自的列和列数据类型：

[https://developers.facebook.com/docs/reference/fql/](https://developers.facebook.com/docs/reference/fql/)

问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-13T16:37:24.547

可以使用表“列”和“表”在 FQL 中实现显示表或描述功能。这就是[https://developers.facebook.com/docs/reference/fql/](https://developers.facebook.com/docs/reference/fql/)所说的：

column - 一个 FQL 表，用于记录其他 FQL 表中的列 table - 一个 FQL 表，其中包含有关其他 FQL 表的信息

我们可以使用 FQL 查询这些表以找出常规表的架构。

# ipython - Unable to plot graphs in iPython notebook, OSX 10.6

> ID：14024343
> 
> 赞同：1
> 
> 时间：2012-12-24T17:57:37.043
> 
> 标签：ipython, ipython-notebook

i am trying to get inline graphs working in iPython notebook.. i begin by starting ipython with the command ipython notebook --pylab inline.

when i try to use the plot() function i get the following error

![enter image description here](../Images/322dc3c33a0dc69db7df6ba6e53eb8b0.png)

im running on OSX 10.6.8 and running ipython out of a virtualenv i have matplotlib and libpng installed

i also get this warning in the terminal

libpng warning: Application built with libpng-1.2.41 but running with 1.5.13

and plot() works normally when i use ipython in the terminal only when i use ipython notebook i get this error.. can someone help me with this..?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T03:41:43.747

我也有这个问题。另一种解决方案是将笔记本渲染图像的格式从“png”更改为“svg”。这可以在您的[配置文件](http://ipython.org/ipython-doc/dev/interactive/notebook.html#configuring-the-ipython-notebook)中完成。我的位于：

```
~/.ipython/profile_default/ipython_notebook_config.py 
```

有一条线看起来像这样

```
# c.InlineBackend.figure_format = 'png' 
```

取消注释并更改为“svg”对我有用：

```
c.InlineBackend.figure_format = 'svg' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T11:47:22.050

所以我终于得到了这个工作..首先我必须先更新我所有过时的端口，`port selfupdate` 然后我才这样做`sudo port update outdated`

之后我使用mac端口重新安装了ipython `sudo port install py27-ipython` 然后我不得不分别安装tornado和pyzmq，因为ipython依赖于它 `sudo port install py27-tornado` `sudo port install py27-zmq`

然后从终端运行它

ipython 笔记本 --pylab 内联

现在一切正常，我可以在 ipython 中内联绘制地图！我猜它之前不起作用的原因是 pip 的一些问题，也许它安装了仅为 libpng 1.2.41 构建的 matplotlib ??...所以无论如何，如果其他人面临这个问题，我建议通过 mac 端口重新安装所有库和 ipython那是唯一对我有用的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T06:22:08.717

这个板上最近的问题与你的类似：[matplotlib and libpng issues with ipython notebook](https://stackoverflow.com/questions/13817940/matplotlib-and-libpng-issues-with-ipython-notebook)

看看那里的解决方案是否能解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-05T13:01:00.980

由于它抱怨用于构建和运行的 libpng 版本不同，因此我通过强制包含路径重新安装了 matplotlib。

```
CFLAGS="`libpng-config --cflags`" pip install matplotlib -I 
```

# android - To get index of Tabs in Android

> ID：14024344
> 
> 赞同：0
> 
> 时间：2012-12-24T17:57:36.743
> 
> 标签：android, android-tabs

I am aware of onTabChanged method to get the current tab id. Could you please guide me to get the index of the tab.

```
public void onTabChanged(String tabId) {
    // TODO Auto-generated method stub
    currentTab =  tabId;  
    updatetab(); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T18:03:51.120

用这个

```
mytabs.getCurrentTab(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T18:03:54.673

试着打电话`getCurrentTab()`给你的`TabHost`——我认为应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-24T08:12:03.200

如果您使用 Tab 而不是 TabHost，请使用此构造返回当前选定的选项卡：

```
Tab currentTab = actionBar.getSelectedTab(); 
```

从那里您可以阅读或修改它。例如，如果要更改活动选项卡文本的颜色，您可以这样做：

```
currentTab.setCustomView(R.layout.actionbar_active_tab_layout);
TextView currentTabView = (TextView) currentTab.getCustomView().findViewById(R.id.ActiveTab);
currentTabView.setTextColor(getResources().getColor(R.color.purple) ); 
```

显然，您还需要一个简单的布局文件，例如：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center"
    android:orientation="vertical" >

<TextView
    android:id="@+id/ActiveTab"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center"
    android:gravity="center"
    android:text="tab name" 
    android:textColor="@color/Gray"
    android:textSize="20sp"
    android:textScaleX="1.3"
    android:textStyle="bold" />
</LinearLayout> 
```

# c# - Add new user to using ASP.NET Membership class

> ID：14024346
> 
> 赞同：0
> 
> 时间：2012-12-24T17:57:56.327
> 
> 标签：c#, asp.net

I am build webform application using vs2012 express edition.
After configuring the SqlMembership provider to store the users credential to my Sqlserver db, i want to create user user but i got this error: cannot declare a variable of type 'System.Web.Security.Membership.
I spent amost two hour googling still no resolution. here is my code

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.Security.Membership;
//using Microsoft.AspNet.Membership.OpenAuth;

namespace Practice_project.Account
{
public partial class Register : Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        //RegisterUser.ContinueDestinationPageUrl = Request.QueryString["ReturnUrl"];
    }

   public void RegisterUser_CreatedUser(object sender, EventArgs e)
    {

        Membership Create_New_User = Membership.CreateUser(UserName, Password);

    }
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T18:07:40.087

尝试使用另一个重载`CreateUser`

```
 MembershipCreateStatus status;
  MembershipUser newuser = Membership.CreateUser(username, password, email, "none", 
        "none", false, out status); 
```

为`PasswordQuestion`和为`PasswordAnswer`_`false/true``IsApproved`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-27T16:53:40.450

这是asp页面：

```
<%@ Page Title="Register" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="Register.aspx.cs" Inherits="Practice_project.Account.Register" %>

<asp:Content runat="server" ID="BodyContent" ContentPlaceHolderID="MainContent">
<hgroup class="title">
    <h1><%: Title %>.</h1>
    <h2>Use the form below to create a new account.</h2>
</hgroup>

<asp:CreateUserWizard runat="server" ID="RegisterUser" ViewStateMode="Disabled" OnCreatedUser="RegisterUser_CreatedUser" BackColor="#E3EAEB" BorderColor="#E6E2D8" BorderStyle="Solid" BorderWidth="1px" Font-Names="Verdana" Font-Size="0.8em">
    <HeaderStyle BackColor="#666666" BorderColor="#E6E2D8" BorderStyle="Solid" BorderWidth="2px" Font-Bold="True" Font-Size="0.9em" ForeColor="White" HorizontalAlign="Center" />
    <LayoutTemplate>
        <asp:PlaceHolder runat="server" ID="wizardStepPlaceholder" />
        <asp:PlaceHolder runat="server" ID="navigationPlaceholder" />
    </LayoutTemplate>
    <ContinueButtonStyle BackColor="White" BorderColor="#C5BBAF" BorderStyle="Solid" BorderWidth="1px" Font-Names="Verdana" ForeColor="#1C5E55" />
    <CreateUserButtonStyle BackColor="White" BorderColor="#C5BBAF" BorderStyle="Solid" BorderWidth="1px" Font-Names="Verdana" ForeColor="#1C5E55" />
    <TitleTextStyle BackColor="#1C5E55" Font-Bold="True" ForeColor="White" />
    <WizardSteps>
        <asp:CreateUserWizardStep runat="server" ID="RegisterUserWizardStep">
            <ContentTemplate>
                <p class="message-info">
                    Passwords are required to be a minimum of <%: Membership.MinRequiredPasswordLength %> characters in length.
                </p>

                <p class="validation-summary-errors">
                    <asp:Literal runat="server" ID="ErrorMessage" />
                </p>

                <fieldset>
                    <legend>Registration Form</legend>
                    <ol>
                        <li>
                            <asp:Label runat="server" AssociatedControlID="UserName">User name</asp:Label>
                            <asp:TextBox runat="server" ID="UserName" />
                            <asp:RequiredFieldValidator runat="server" ControlToValidate="UserName"
                                CssClass="field-validation-error" ErrorMessage="The user name field is required." />
                        </li>
                        <li>
                            <asp:Label runat="server" AssociatedControlID="Email">Email address</asp:Label>
                            <asp:TextBox runat="server" ID="Email" TextMode="Email" />
                            <asp:RequiredFieldValidator runat="server" ControlToValidate="Email"
                                CssClass="field-validation-error" ErrorMessage="The email address field is required." />
                        </li>
                        <li>
                            <asp:Label runat="server" AssociatedControlID="Password">Password</asp:Label>
                            <asp:TextBox runat="server" ID="Password" TextMode="Password" />
                            <asp:RequiredFieldValidator runat="server" ControlToValidate="Password"
                                CssClass="field-validation-error" ErrorMessage="The password field is required." />
                        </li>
                        <li>
                            <asp:Label runat="server" AssociatedControlID="ConfirmPassword">Confirm password</asp:Label>
                            <asp:TextBox runat="server" ID="ConfirmPassword" TextMode="Password" />
                            <asp:RequiredFieldValidator runat="server" ControlToValidate="ConfirmPassword"
                                 CssClass="field-validation-error" Display="Dynamic" ErrorMessage="The confirm password field is required." />
                            <asp:CompareValidator runat="server" ControlToCompare="Password" ControlToValidate="ConfirmPassword"
                                 CssClass="field-validation-error" Display="Dynamic" ErrorMessage="The password and confirmation password do not match." />
                        </li>
                    </ol>
                    <asp:Button runat="server" CommandName="MoveNext" Text="Register" />
                </fieldset>
            </ContentTemplate>
            <CustomNavigationTemplate />
        </asp:CreateUserWizardStep> 
```

```
 public void RegisterUser_CreatedUser(object sender, EventArgs e)
    {

        CreateUserProfile(RegisterUser.UserName, RegisterUser.Password);

    }
   private void CreateUserProfile(string username, string password)
   {
       string connect = System.Configuration.ConfigurationManager.ConnectionStrings["_connection"].ToString();
       SqlConnection con = new SqlConnection(connect);
       string insertcommand="Insert into Users"
           +"(Userid,Password)"
           +"Values(@Userid,@Password)";
       SqlCommand cmd = new SqlCommand(insertcommand, con);

       cmd.Parameters.AddWithValue("@Userid", username);
       cmd.Parameters.AddWithValue("@Password", password);
       using (con)
       {
           con.Open();
           cmd.ExecuteNonQuery();

       }

   }

} 
```

# maven - Restricted access to an artifact in the Maven Repository

> ID：14024352
> 
> 赞同：0
> 
> 时间：2012-12-24T17:58:26.417
> 
> 标签：maven, maven-3

I have a central Maven repository which is shared by more than one Projects within the Company LAN. Now, I need to have an artifact which is licensed for a single Project, to be placed in the shared repository.

Is it possible set authorized access to that artifact, the credential can ideally be in the pom file of the desired project.

Any better solution is more than welcome.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T06:33:20.653

Maven 不处理存储库中的访问权限，因为它只是一个从服务器获取数据的客户端。如果您使用的是存储库管理器，请阅读其文档。如果您只是在 Apache HTTPD 服务器后面托管文件，请配置 HTTPD。

或者，您可以将该文件移动到单独的存储库中，并仅配置一个项目的 POM 以使用它。这并不能解决存储库将继续公开的事实，因此其他项目/团队可以在他们真的想要的情况下使用它。

# c++ - 收到 BUILD_FAIL 错误

> ID：14024354
> 
> 赞同：2
> 
> 时间：2012-12-24T17:58:35.247
> 
> 标签：c++, netbeans

我在 ubuntu for c++ 上使用 netbeans IDE，每当我运行程序时，我都会收到 BUILD_FAIL 错误

```
 "/usr/bin/make" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .build-conf
    make[1]: Entering directory `/home/rupesh/NetBeansProjects/Cpp1'
    "/usr/bin/make"  -f nbproject/Makefile-Debug.mk dist/Debug/GNU-Linux-x86/cpp1
    make[2]: Entering directory `/home/rupesh/NetBeansProjects/Cpp1'
    mkdir -p dist/Debug/GNU-Linux-x86
    g++-o dist/Debug/GNU-Linux-x86/cpp1 build/Debug/GNU-Linux-x86/main.o build/Debug/GNU-         Linux-x86/1.o  
   build/Debug/GNU-Linux-x86/1.o: In function `main':
   /home/rupesh/NetBeansProjects/Cpp1/1.cpp:4: multiple definition of `main'
   build/Debug/GNU-Linux-x86/main.o:/home/rupesh/NetBeansProjects/Cpp1/main.cpp:15: first   defined here
  collect2: ld returned 1 exit status
  make[2]: *** [dist/Debug/GNU-Linux-x86/cpp1] Error 1
  make[2]: Leaving directory `/home/rupesh/NetBeansProjects/Cpp1'
  make[1]: *** [.build-conf] Error 2
  make[1]: Leaving directory `/home/rupesh/NetBeansProjects/Cpp1'
  make: *** [.build-impl] Error 2 
```

BUILD FAILED（退出值2，总时间：190ms）

我正在运行一个简单的程序来打印你好世界。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:14:39.007

从编译器吐出的内容来看，您似乎有两个文件指定一个`main()`正在构建为一个项目。

> /home/rupesh/NetBeansProjects/Cpp1/ **1.cpp:4:** 'main' 的多重定义
> 
> 构建/调试**/GNU-Linux-x86/main.o:/home/rupesh/NetBeansProjects/Cpp1/main.cpp:15**：
> 
> 首先在这里定义 collect2: ld 返回 1 退出状态 make[2]: ***
> 
> [dist/Debug/GNU-Linux-x86/cpp1] 错误 1

检查您的文件夹以确保您没有编译器尝试使用 main.cpp 构建的其他文件，在这种情况下查找`1.cpp`

# redirect - glassfish standalone mode - redirecting domain.com to www.domain.com

> ID：14024361
> 
> 赞同：2
> 
> 时间：2012-12-24T17:59:14.840
> 
> 标签：redirect, glassfish, http-status-code-301, canonical-link

I am running Glassfish in standalone mode (without Apache) and my application is accessible on [http://mydomain.com](http://mydomain.com).

For SEO purposes I would like to do a 301 redirect from mydomain.com to www.mydomain.com, so typing mydomain.com/page1.jsp in the browser would redirect the user to www.mydomain.com/page1.jsp

Any idea how to do it? I found this [http://notsomany.wordpress.com/2010/06/29/glassfish-v2-1-1-site-redirect/](http://notsomany.wordpress.com/2010/06/29/glassfish-v2-1-1-site-redirect/) but as I understand it this redirection only works for a specific page.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:47:14.533

我能想到的最简单的方法是在前面使用 httpd 并使用某种重定向/代理模块。Apache mod_redirect 在这里可能是一个很好的解决方案。

# wcf - SOA to tell service control manager it has not started up yet to prevent "The service did not respond to the start request in a timely fashion"

> ID：14024364
> 
> 赞同：1
> 
> 时间：2012-12-24T17:59:36.530
> 
> 标签：wcf, windows-services, soa

I've been digging around for an alternative solution to this problem that has started happening intermittently with the addition of a number of services to the current SOA.

I've seen that the Service Control Manager will generate an event if a service does not respond within the defined timeout period (the default timeout is 30000 milliseconds). And to alleviate this an entry can be changed to set the default timeout value for all services.

In the Registry Editor, edit the registry subkey HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control. In the details pane, locate the ServicesPipeTimeout entry Modify the DWORD to something greater than 30,000 ms, while this works after I made the modification it wouldn't be optimal to start changing registry entries on all the machines the might have this problem.

Also it would be best not to make a registry entry that might affect all services on computers that I don't have control over, is there a way in which I could get the SOA to respond to the Service Control Managers start request and say that it hasn't completed as of yet?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:15:19.440

将启动的耗时逻辑推迟到不同的线程，并允许服务立即启动并响应服务控制管理器，而其余的启动则不受时间限制。

# c++ - GMP library floating point data type

> ID：14024365
> 
> 赞同：0
> 
> 时间：2012-12-24T17:59:46.110
> 
> 标签：c++, double, base, gmp

I installed the GMP library to replace `double` and`float` with other base-10 floating point data types. Can anyone tell me what those data type will be? And maybe give me a tutorial on how to use them?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:02:33.180

使用 gmpxx.h 中的 mpf_class。看[这里](http://www.delorie.com/gnu/docs/gmp/gmp_73.html)

# html - Align Forms correctly

> ID：14024366
> 
> 赞同：0
> 
> 时间：2012-12-24T17:59:46.000
> 
> 标签：html, css, forms

I have this form:

```
<form action="insertar-modelo.php" method="post" enctype="application/x-www-form-urlencoded">
    <table>

    <tr><td class=Forms>ICAO: <input type="text" value="" name="ICAO" /><br/><br/></td</tr>

    <tr><td class=Forms>Name: <input type="text" value="Airbus A320" name="nombre" /><br/><br/></td></tr>
    <tr><td class=Forms>Price: <input maxlength="9" value="1000000" type="text" name="precio" /> €&lt;br/><br/></td></tr>

    <tr><td class=Forms>Number Classes: <select name="numberclasses" id="numberclasses" onchange="callAjax()">
        <option>Select Number of Classes</option>
        <?php
        echo'<option value="1">One</option>';
        echo'<option value="2">Two</option>';
        echo'<option value="3">Three</option>';

        ?>
    </select><br/><br/></td></tr>

    <tr><td class=Forms>First Class: <input disabled="disabled" type="text" name="classes1" /><br/><br/></td></tr>
    <tr><td class=Forms>Bussines Class: <input disabled="disabled" type="text" name="classes2" /><br/><br/></td></tr>
    <tr><td class=Forms>Economy Class: <input disabled="disabled" type="text" name="classses" /><br/><br/></td></tr>

    <tr><td class=Forms>Capacidad: <input maxlength="3" value="150" type="text" name="pax" /> pasajeros<br/><br/></td></tr>
    </table><br />
    <input type="submit" name="enviar" value="Insertar"/>
    </form> 
```

And the CSS class Forms is:

```
td.Forms { 

    text-align: left;
    text-indent: 10px;
    font-family: Century Gothic;
    font-weight: normal;
    font-size: 15px; 
    white-space: nowrap;
} 
```

The boxes start when the title finish and I want the boxes start all in the same part. I think the idea is see the titles in one colum and the boxes in other, like this [http://i48.tinypic.com/2nbd2m8.png](http://i48.tinypic.com/2nbd2m8.png), but I have this [http://i49.tinypic.com/1exb80.png](http://i49.tinypic.com/1exb80.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T12:33:37.330

我将给你答案——但首先我想解释一些语义以及如何在不使用表格的情况下正确编码表单。

自 html 出现以来，html 形式就已经存在。您会惊讶地发现，有多少 html 表单元素仅存在于帮助您正确编码语义 html 时并没有被使用。正确的语义 html 意味着：

1) 文本查看器（例如谷歌搜索引擎和盲人使用的浏览器）可以访问您的代码 2) 符合联邦法律（美国法律要求学校/政府网站可以访问） 3) 将使您更容易编写后端代码（ php) 从长远来看。

一个简单的表格应该包括：

```
<form>
 <fieldset>
   <div>
     <label for="first-name">First Name</label>
     <input type="textbox" name="first_name" id="first-name" value="" />
   </div>
   <div>
     <label for="gender_selection">Gender</label>
     <select name="gender" id="gender_selection">
       <option value="male">Male</option>
       <option value="female">Female</option>
     </select>
   </div>
 </fieldset>
</form> 
```

*   `fieldset`每个标签都必须有一个`form`标签。
*   `label`标签用于定义表单元素代表什么。这就是告诉文本查看器每个表单元素代表什么！当然你可以不用，但为什么这个标签是为了这个目的而创建的。
*   div 标签将允许您轻松设置所需的错误/更正样式。

CSS

```
form div {
  overflow: hidden;
}
form div label {
  float: left;
  width: 120px;
  padding: 0 20px 0 0;
}
form div input, form div select {
  float: left;
  width: 220px;
} 
```

简单的 css（未测试）来模仿您的表格形式，并具有不使用表格、可访问和使用正确 html 的额外优势。

现在，如果用户在 in 中犯了错误，让我们说`first name`我们只需将类添加`.error`到该 div：

```
 <div class="error">
     <label for="first-name">First Name</label>
     <input type="textbox" name="first_name" id="first-name" value="" />
   </div> 
```

CSS：

```
div.error label {
  color: red;
}
div.error input {
  border: red;
  color: red;
} 
```

回答您的问题：

您的 html 表单“标签”元素没有固定宽度。通过添加额外的`<td>`列或使用我上面提供的代码来添加固定宽度。

希望这篇文章能对你的未来有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T18:51:47.533

下面是正确的 html 标记（假设您要为此使用表格布局）。[这是一个演示](http://jsfiddle.net/vm69v/)。

```
<form action="insertar-modelo.php" method="post" enctype="application/x-www-form-urlencoded">
    <table>

    <tr>
        <td class=Forms>ICAO:</td>
        <td><input type="text" value="" name="ICAO" /></td>
    </tr>

    <tr>
        <td class=Forms>Name:</td>
        <td><input type="text" value="Airbus A320" name="nombre" /></td>
    </tr>
    <tr>
        <td class=Forms>Price:</td>
        <td><input maxlength="9" value="1000000" type="text" name="precio" /> €&lt;/td>
    </tr>

    <tr>
        <td class=Forms>Number Classes:</td>
        <td>
            <select name="numberclasses" id="numberclasses" onchange="callAjax()">
            <option>Select Number of Classes</option>
            <?php
            echo'<option value="1">One</option>';
            echo'<option value="2">Two</option>';
            echo'<option value="3">Three</option>';
            ?>
            </select>
        </td>
    </tr>
    <tr>
        <td class=Forms>First Class:</td>
        <td><input disabled="disabled" type="text" name="classes1" /></td>
    </tr>
    <tr>
        <td class=Forms>Bussines Class:</td>
        <td><input disabled="disabled" type="text" name="classes2" /></td>
    </tr>
    <tr>
        <td class=Forms>Economy Class:</td>
        <td><input disabled="disabled" type="text" name="classses" /></td>
    </tr>
    <tr>
        <td class=Forms>Capacidad:</td>
        <td><input maxlength="3" value="150" type="text" name="pax" /> pasajeros</td>
    </tr>
    </table>
    <input type="submit" name="enviar" value="Insertar"/>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T18:11:07.857

您需要`<td>`为输入字段添加额外的单元格 ( )，以便它们都从同一位置开始。此外，您可能需要定义一个宽度以确保在一行中的一个单元格和另一个单元格之间有足够的空间。我`<td>`通过添加`width: 200px;`到您的 td.Forms 将其定义为 all 。最后给我添加的行之间的间距：

```
td {
  padding: 10px 0;   
} 
```

这为每个单元格的顶部和底部添加了 10 像素的填充。

查看此[小提琴](http://jsfiddle.net/yDUdL/1/)以查看实际代码。

# python - 是否有一个 Python 模块可以透明地将类文件对象用作缓冲区？

> ID：14024368
> 
> 赞同：4
> 
> 时间：2012-12-24T18:00:11.813
> 
> 标签：python

我正在开发一个纯 Python 解析器，其中输入数据的大小可能从千字节到千兆字节不等。是否有一个模块可以包装类似文件的对象并将显式 .open()/.seek()/.read()/.close() 调用抽象为一个简单的类似缓冲区的对象？你可能会认为这是 StringIO 的逆。我希望它可能看起来像：

```
with FileLikeObjectBackedBuffer(urllib.urlopen("http://www.google.com")) as buf:
    header = buf[0:0x10]
    footer = buf[-0x10:] 
```

注意，我昨天问了一个[类似](https://stackoverflow.com/questions/14017349/is-there-a-python-module-for-transparently-working-with-a-files-contents-as-a-b)的问题，并接受`mmap`了一个文件。在这里，我专门寻找一个包装类似文件的对象的模块（为了参数的缘故，比如返回的内容`urllib`）。

*更新* 自从我第一次问这个问题以来，我反复回到这个问题，结果`urllib`可能不是最好的例子。由于它是流接口，因此它有点特殊。`StringIO`并`bz2`暴露一个更传统的`seek`//接口`read`，`close`我个人使用这些比较频繁。因此，我编写了一个将类文件对象包装为缓冲区的模块。你可以在[这里查看](https://gist.github.com/williballenthin/7065476)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T18:12:01.483

虽然`urllib.urlopen`返回一个类似文件的 obj，但我不相信不编写自己的文件就可以做你想做的事 -`seek`例如，它不支持，但支持`next`等等`read`......而且因为你正在处理一个 forward只有流 - 您必须通过检索来处理跳转，直到您到达某个点并缓存任何回溯。

恕我直言 - 您无法有效地跳过网络 IO 流的一部分（如果您想要最后一个字节，您仍然必须获取所有先前的字节才能到达那里 - 您如何管理该存储取决于您）。

我很想`urlretrieve`（或类似）该文件，并且`mmap`根据您之前的回答。

如果您的服务器可以接受`ranges`（并且响应大小是已知的并且根据您的示例从派生块中），那么可能的解决方法是使用[http://en.wikipedia.org/wiki/Byte_serving](http://en.wikipedia.org/wiki/Byte_serving)（但不能说我曾经尝试过）。

举个例子，如果你只想要前 16 和最后 16 并且不想做“太花哨”的事情：

```
from string import ascii_lowercase
from random import choice
from StringIO import StringIO

buf = ''.join(choice(ascii_lowercase) for _ in range(50))
print buf

sio_buf = StringIO(buf) # make it a bit more like a stream object
first16 = sio_buf.read(16)
print first16

from collections import deque
last16 = deque(iter(lambda: sio_buf.read(1), ''), 16) # read(1) may look bad but it's buffered anyway - so...
print ''.join(last16) 
```

输出：

```
gpsgvqsbixtwyakpgefrhntldsjqlmfvyzwjoykhsapcmvjmar
gpsgvqsbixtwyakp
wjoykhsapcmvjmar 
```

# c# - 如何检查列表中是否已存在文件？

> ID：14024369
> 
> 赞同：1
> 
> 时间：2012-12-24T18:00:14.933
> 
> 标签：c#

这是代码：

```
for (int i = 0; i < files.Count; i++)
{
    if (pdf1.Lightnings.Count == 0)
    {
        pdf1.Lightnings.Add(files[i]);
    }
    if (files[i] != pdf1.Lightnings[i])
    {
        pdf1.Lightnings.Add(files[i]);
    }
} 
```

文件和闪电都是`List<string>`

例如，在文件中，我有 33 个索引（文件名），我想将它们添加到闪电列表中。但我想检查文件列表中的文件名是否已经存在于闪电中，所以不要再次添加它。

现在的方式我收到错误，因为当变量 i=1 时，所以行：

```
if (files[i] != pdf1.Lightnings[i]) 
```

引发错误，因为在 Lightnings 中我只有一个索引 [0] 并且 i=1 已经

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T18:04:40.240

您可以使用以下[**`.Contains`**](http://msdn.microsoft.com/en-us/library/bhkz42b3.aspx)方法：

```
if (!pdf1.Lightnings.Contains(files[i]))
    pdf1.Lightnings.Add(files[i]); 
```

这将`files[i]`在添加之前检查集合中不存在的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T18:05:16.013

您可以尝试使用 distinct 属性和 foreach 循环：

```
var count = 0;
foreach(var file in files.Distinct())
{

    if (pdf1.Lightnings.Count == 0)
    {
        pdf1.Lightnings.Add(file);
    }
    if (files[i] != pdf1.Lightnings[count])
    {
        pdf1.Lightnings.Add(file);
    }
    count++;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T18:08:43.693

```
pdf1.Lightnings.AddRange(files.Distinct()); 
```

或者

```
pdf1.Lightnings = pdf1.Lightnings.Union(files)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T18:13:48.260

这可以使用 LINQ 轻松完成，它还会减少您需要编写的代码量，例如

```
var itemsToAdd = files.Where(x => !pdf.Lightnings.Contains(x));
pdf.Lightnings.AddRange(itemsToAdd); 
```

如果你仍然觉得它可读，甚至是一行

```
pdf.Lightnings.AddRange(files.Where(x => !pdf.Lightings.Contains(x))); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-24T18:14:47.730

作为已经给出的答案的替代方案，如果您想要一个唯一的项目列表，您可以使用[HashSets](http://msdn.microsoft.com/en-us/library/bb359438.aspx)代替。当然，HashSet 是否优于 List 取决于你的使用方式，但它保证了唯一值。

# c# - Log in system in c# with access database

> ID：14024370
> 
> 赞同：1
> 
> 时间：2012-12-24T18:00:28.483
> 
> 标签：c#, database, ms-access

I am trying to create log in system with access database in c#. I have a database, and User_ID and Password Columns, I don't know why it doesn't work, can you help me with your opinion? The problem is that program checks only 1st user, but when I enter 3rd or 4th user, it displays message: your username or password is incorrect even though user_ID and password is correct. here is the code:

```
private void button1_Click(object sender, EventArgs e)
    {
        OleDbConnection connect = new OleDbConnection();
        connect.ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Documents and Settings\Hodzic\Desktop\projekat shipping\Database files\Users.accdb";
        connect.Open();

        OleDbCommand command = new OleDbCommand();
        command.Connection = connect;
        command.CommandText = "select User_ID, Password from user_details";
        OleDbDataReader reader = command.ExecuteReader();
        while (reader.Read())
        {

                if (textBox1.Text == reader[0].ToString() && textBox2.Text == reader[1].ToString())
                {

                    this.Hide();
                    Glavna2 g1 = new Glavna2();
                    g1.Show();
                    break;

                }

                else 
                {
                    MessageBox.Show("Your user ID or password is incorrect.");
                    this.Hide();
                    Sign_in g2 = new Sign_in();
                    g2.Show();
                    break;
                }

        }

        connect.Close();
    } 
```

Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T18:06:39.120

您需要在此处添加 WHERE 子句：

```
command.CommandText = "select User_ID, Password from user_details"; 
```

目前您只是检查阅读器的第一个结果，所以如果您要这样做（这很好），您需要一个 WHERE 子句。

就像是：

```
command.CommandText = "select User_ID, Password from user_details WHERE User_ID = 'myusername'"; 
```

显然，您需要将其连接起来，许多人会争辩说您需要担心 SQL 注入（这意味着准备好的语句），但让我们从那里开始，然后我们可以继续前进。

此外，正如 SLaks 所说，您不想以纯文本形式存储密码。因此，您的应用程序需要进行相当多的调整，但取回数据将是一个开始。

下一步研究：

*   Microsoft Access 中的准备好的语句。
*   密码哈希。

# windows - How to monitor/interact with a Unix program from Windows?

> ID：14024372
> 
> 赞同：1
> 
> 时间：2012-12-24T18:00:40.487
> 
> 标签：windows, unix, communication, monitor

I've written several custom-purpose Unix programs in C/C++ to parse inbound data files and insert records into a database. I would like to give the customer the ability to monitor the status of these programs from one or more Windows PCs. What's the best way, in this day and age, to communicate between the two?

Back in the day, I used to do this kind of thing by writing sets of dedicated client/server TCP/IP socket-level programs on both machines, using a home-grown protocol to request program status and generate responses. The Windows side would ping the Unix side every minute or so, and the Unix side would reply with various counts of records awaiting processing, records processed that day, MTD, and YTD (mostly simple file counts in a given directory but also database lookups). The Windows side could also tell the Unix side to restart, or to move a problematic record to a "hold" area... that sort of thing. Both sides included a dedicated "parent" process to make sure all the child processes continued to run, or would restart them if they died.

But that was back in the 80's and early 90's. Is there any newer, better, more reliable technology to do basically the same thing in this day and age? My speciality is in C/C++/C#, but I could implement something web based given a good tutorial. Also I'd like to stick to custom code or free/open-source solutions.

Is my hand-written TCP/IP client/server approach still the best thing for this situation?

Thanks for your time!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:02:03.243

[RabbitMQ](http://www.rabbitmq.com/)（[AMQP 的实现](http://en.wikipedia.org/wiki/Advanced_Message_Queuing_Protocol)）将是解决您的问题的一个很好且相当容易实现的解决方案。

[您可以在您选择](http://www.rabbitmq.com/configure.html)的平台上安装服务器，并且[有许多客户端库，包括 Java 和 .NET](http://www.rabbitmq.com/clients.html)，只需几行代码即可发布消息。

**[RabbitMQ 能为您做什么？](http://www.rabbitmq.com/features.html)**[概述摘录]

> 消息传递使软件应用程序能够连接和扩展。应用程序可以相互连接，作为更大应用程序的组件，或者连接到用户设备和数据。消息传递是异步的，通过分离发送和接收数据来解耦应用程序。
> 
> 您可能正在考虑数据传递、非阻塞操作或推送通知。或者您想使用发布/订阅、异步处理或工作队列。所有这些都是模式，它们构成了消息传递的一部分。
> 
> RabbitMQ 是一个消息传递代理——消息传递的中介。它为您的应用程序提供了一个发送和接收消息的通用平台，并为您的消息提供了一个安全的地方，直到收到为止。

# asp.net - Integrating CKEditor in a detailsView in ASP.NET using VB.NET

> ID：14024373
> 
> 赞同：6
> 
> 时间：2012-12-24T18:00:50.627
> 
> 标签：asp.net, database, ado.net, ckeditor, ckeditor.net

I'm trying to integrate CKEditor with a details View. My sample code is:

```
<asp:DetailsView ID="DetailsViewStation" runat="server" Height="50px" AutoGenerateRows="False"
                    DataKeyNames="StationNo" DataSourceID="StationSqlDataSource" CellPadding="4"
                    ForeColor="#333333" GridLines="None">
                    <AlternatingRowStyle BackColor="White" />
                    <CommandRowStyle BackColor="#FFFFC0" Font-Bold="True" />
                    <FieldHeaderStyle BackColor="#FFFF99" Font-Bold="True" />
                    <Fields>
                        <asp:BoundField DataField="StationNo" HeaderText="Station Number" ReadOnly="True"
                            SortExpression="StationNo" ApplyFormatInEditMode="True">
                            <HeaderStyle Width="150px" />
                            <ItemStyle HorizontalAlign="Center" Width="1200px" />
                        </asp:BoundField>
                        <asp:BoundField DataField="Station_Name" HeaderText="Station Name" SortExpression="Station_Name">
                            <ItemStyle HorizontalAlign="Center" />
                        </asp:BoundField>
                    </Fields>
                    <FooterStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
                    <HeaderStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
                    <PagerStyle BackColor="#FFCC66" ForeColor="#333333" HorizontalAlign="Center" />
                    <RowStyle BackColor="#FFFBD6" ForeColor="#333333" />
                </asp:DetailsView>
                <asp:SqlDataSource ID="StationSqlDataSource" runat="server" ConnectionString="<%$ ConnectionStrings:AgainConnectionString %>"
                    DeleteCommand="DELETE FROM [StationInfoTable] WHERE [StationNo] = @StationNo"
                    InsertCommand="INSERT INTO [StationInfoTable] ([StationNo], [Station_Name] VALUES (@StationNo, @Station_Name)"
                    SelectCommand="SELECT * FROM [StationInfoTable] WHERE ([StationNo] = @StationNo)"
                    UpdateCommand="UPDATE [StationInfoTable] SET [Station_Name] = @Station_Name, [Importatnat_Info] = @Importatnat_Info WHERE [StationNo] = @StationNo">
                    <DeleteParameters>
                        <asp:Parameter Name="StationNo" Type="Int32" />
                    </DeleteParameters>
                    <InsertParameters>
                        <asp:Parameter Name="StationNo" Type="Int32" />
                        <asp:Parameter Name="Station_Name" Type="String" />
                    </InsertParameters>
                    <SelectParameters>
                        <asp:ControlParameter ControlID="ListBoxChoices" Name="StationNo" PropertyName="SelectedValue"
                            Type="Int32" />
                    </SelectParameters>
                    <UpdateParameters>
                        <asp:Parameter Name="Station_Name" Type="String" />
                        <asp:Parameter Name="StationNo" Type="Int32" />
                    </UpdateParameters>
                </asp:SqlDataSource> 
```

I want to edit the data in details view with CKEditor to insert and delete links to and from database. Any one have done that before?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T20:32:07.803

我不是`DetailsView`专家，但我认为以下一般摘要涵盖了您需要做的事情。

Station_Name使用 a`TemplateField`而不是 a `BoundField`。看起来像这样：

```
 <asp:TemplateField HeaderText="Station Name">
     <ItemTemplate>
          <asp:Label ID="lblStationName" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.Station_Name") %>'></asp:Label>
     </ItemTemplate>
     <EditItemTemplate>
          <CKEditor:CKEditorControl ID="CKEditor1" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.Station_Name") %>' />
     </EditItemTemplate>
</asp:TemplateField> 
```

[这](http://www.dotnetspider.com/resources/44061-How-use-Details-view-control-ASP.NET.aspx)看起来像是从`DetailsView`. 您的情况与他的不同之处在于您正在使用`CKEditor`. `CKEditor`但是当他准备好更新时，您可以像他一样从控件中检索信息：

```
Dim htmlText as String = Nothing
Dim ctl as CKEditor =  CType(DetailsViewStation.FindControl("CKEditor1"), CKEditor)
If ctl Is Nothing Then
    htmlText = ctl.Text
End If 
```

如果事实证明您无法绑定到`CKEditor`控件的 Text 属性，则可以将该值分配给`CKEditor`. `Text`控制与检索它的方式相同：通过执行 a`DetailsViewStation.FindControl("CKEditor1")`来检索控件，并将您从数据库中检索到的 HTML 分配给控件的`Text`属性。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T14:19:20.797

根据您所做的评论，您永远不会从文本框/CKEditor 中检索值。

您的绑定是只读的，因为`DataBinder.Eval`.

尝试

```
 <asp:TemplateField HeaderText="Station Name">
                        <ItemTemplate>
                            <asp:Label ID="lblStation_Name" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.Station_Name") %>'></asp:Label>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <CKEditor:CKEditorControl ID="CKEditor1" runat="server" Text='<%# Bind("Station_Name") %>' />
                        </EditItemTemplate>
                    </asp:TemplateField> 
```

或者

```
 <asp:TemplateField HeaderText="Station Name">
                        <ItemTemplate>
                            <asp:Label ID="lblStation_Name" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.Station_Name") %>'></asp:Label>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <CKEditor:CKEditorControl ID="CKEditor1" runat="server" Text='<%# DataBinder.Bind(Container, "DataItem.Station_Name") %>' />
                        </EditItemTemplate>
                    </asp:TemplateField> 
```

**编辑**：根据您的评论：您是如何生成 SQLDataSource 的？最好使用设计器。我猜你试图自己生成代码。我看到多个错误：

在 UpdateParameters 中，您使用的是 ControlParameters，但您得到的值都错了。您分配给ControlID 的值应分配给PropertyName。然后将相应CKEditor 的名称分配给ControlID。

像这样：

```
 <asp:ControlParameter ControlID="CKEditor12" PropertyName="Footer_notes" Type="String" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T16:10:40.390

以下代码是在将 CKEditor 与 DetailsView 集成之后，我将答案放在这里以便其他人阅读并从中受益。除了我想使用 CKEditor 以便能够在数据库中插入超链接的 Notes 字段之外，一切都相同。

```
 <asp:TemplateField HeaderText="Notes">
                            <ItemTemplate>
                                <asp:Label ID="lblStationNotes" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.Notes") %>'></asp:Label>
                            </ItemTemplate>
                            <EditItemTemplate>
                                <CKEditor:CKEditorControl ID="CKEditor11" runat="server" Text='<%# Bind("Notes") %>' />
                            </EditItemTemplate>
                        </asp:TemplateField> 
```

# java - JFileChooser 的 FileFilter 不起作用

> ID：14024376
> 
> 赞同：1
> 
> 时间：2012-12-24T18:00:58.567
> 
> 标签：java, swing, jfilechooser, filefilter

`JFileChooser`下面是我点击一个按钮打开a的代码。我创建了一个过滤器，只允许选择 .jpg 文件，但我的代码没有按预期工作。所有类型的文件都显示在`JFileChooser`对话框中。部分代码：

```
MyFileFilter filter;

fPhoto=new JFileChooser();
fPhoto.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);        
fPhoto.setFileFilter(filter); 
```

MyFileFilter 类：

```
public class MyFileFilter extends javax.swing.filechooser.FileFilter{

    public boolean accept(File f){

    return f.isDirectory()||(f.isFile()&&f.getName().toLowerCase().endsWith(".jpg"));
    }

    public String getDescription(){

    return ".jpg files";
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T18:04:47.873

您需要实例化您的`filter`. 拥有 a`null` `FileFilter`将不会过滤掉任何文件类型：

```
MyFileFilter filter = new MyFileFilter(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T18:06:30.337

如果你想浏览指定的文件，看看这段代码

```
 try
        {
        JFileChooser fc = new JFileChooser();
        fc.setAcceptAllFileFilterUsed(false);
        fc.setFileFilter(new FileFilter() {

            @Override
            public boolean accept(File file) {
               return (file.isDirectory()||file.getName().endsWith(".JPG")||file.getName().endsWith(".jpg"));
            }

            @Override
            public String getDescription() {
                return "Multi-Video Files";
            }
        });
        File file;
        if(JFileChooser.APPROVE_OPTION==fc.showDialog(null, "Select Files"))   
        {
           File file = fc.getSelectedFile();  //HERE YOU WILL GET THE SELECTED FILE 
        }
        }catch(Exception e){System.out.println("error");
        } 
```

如果您只想浏览目录，那么

```
JFileChooser fc = new JFileChooser();
     File file;
     fc.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);

     if(JFileChooser.APPROVE_OPTION==fc.showDialog(null, "Select"))   
     {
      File file = fc.getSelectedFile();  //HERE YOU WILL GET THE SELECTED DIRECTORY PATH 
     } 
```

# mysql - 用增量数字填充字段需要什么 MySQL 语句

> ID：14024392
> 
> 赞同：3
> 
> 时间：2012-12-24T18:03:45.103
> 
> 标签：mysql, sql, database, ms-access

我有一个旧的 MS Access 数据库，我正在将其转换为 MySQL 数据库。我使用 Bullzip 创建数据库，但由于设计不佳，旧的 MS Access 数据库对于大多数表都没有唯一的主键。

所以我创建了一个 id 字段，但显然每个条目都是空的，我想知道是否有一个简单的语句可以用 1、2、3、4 等填充它们......

**编辑：** 我想我的问题没有正确地表达出来。我对自动增量一无所知。那不是问题。

我有一张表，里面装满了我需要保存的记录，这些记录来自一个没有定义为字段的唯一 ID 的 Access 数据库。换句话说，我有名字、姓氏等字段，但没有“id”字段。这看起来绝对是疯狂的，但显然这个数据库已经被很好地使用了，并且从来没有任何表的唯一 ID。奇怪的！

无论如何，我已经在表中为 id 创建了一个字段（当然并将其设置为自动递增），但显然所有现有记录目前都没有设置 id。所以我需要为每条记录创建一个。

有没有办法使用 mysql 语句用唯一的数字填充所有这些记录？

干杯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T18:47:56.783

如果您将新的 id 列添加到现有表并使其成为 AUTO_INCREMENT PRIMARY KEY，它将自动使用递增值填充它。

```
mysql> ALTER TABLE TheTable ADD COLUMN id INT AUTO_INCREMENT PRIMARY KEY;
mysql> SELECT id FROM TheTable;
-- outputs values 1, 2, 3, etc. 
```

如果您创建了一个 id 列但没有将其声明为 AUTO_INCREMENT PRIMARY KEY，则可以像这样填充该列：

```
mysql> SET @id := 0;
mysql> UPDATE TheTable SET id = (@id := @id+1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T18:05:07.293

使用预定义的 AUTO_INCREMENT 字段，并在插入新记录时将值设置为 NULL，以便它自动构建适当的增量器。除此之外，没有办法（除非使用过程）来创建一组递增的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T18:07:32.787

使用 MySQL 的 auto_increment 特性。MySQL 将为您的 id 列生成唯一编号。

有关 auto_increment 功能的说明，请参阅[http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T18:09:25.503

采用`AUTO_INCREMENT`

```
CREATE TABLE insect
    (
     id INT UNSIGNED NOT NULL AUTO_INCREMENT,
     PRIMARY KEY (id),
    name VARCHAR(30) NOT NULL,
    date DATE NOT NULL,
    origin VARCHAR(30) NOT NULL
    ); 
```

**更新**

我相信，除非您不创建新表，否则这似乎是一项艰巨的任务，我建议您使用它

```
SET @rank=0;
SELECT @rank:=@rank+1 AS rank, itemID FROM orders; 
```

它将`rank`为您创建一个具有唯一 id 值的名称的虚拟列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T18:33:22.357

如果您只想要一个唯一标识符，则可以使用该`uuid()`功能。它比整数占用更多空间，但它可以满足您的需求。

但是，我同意其他答案，即您应该添加一个自动增量列并重新填充表。这是随着时间的推移保持 id 唯一性的最简单方法，即使发生更新，并且使用更合理的存储量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-24T18:45:18.150

我不精通 MySQL，但我在其他 DBMS 中也遇到过同样的问题，下面是我在有 AutoIncrement 类型设施时解决它的方法，但 DBMS 无法自动追溯应用它：

1.  重命名要添加 ID 字段的表。所以将 Table1 重命名为 Table1_Old。
2.  创建一个新的 Table1，它是 Table1_Old 的副本，但其中没有数据。
3.  将您的 ID/AutoIncrement 列添加到 Table1
4.  现在将所有数据从 Table1_Old 复制到 Table1，跳过或为 ID 列指定 NULL。（这通常是一个 INSERT..SELECT.. 命令）
5.  删除 Table1_Old。

实际的细节和命令因 DBMS 而异，但我通常能够找到一种方法来执行这些步骤。

# ruby-on-rails - 我应该如何设计嵌套网址？

> ID：14024397
> 
> 赞同：0
> 
> 时间：2012-12-24T18:03:55.090
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing

现在，我正在像这样设置我的嵌套路由但是在这种情况下，

*   **example.com/shop/walmart/topic/1** <= 如果我第一次创建主题
*   **example.com/shop/bestbuy/topic/2** <= 如果我第二次创建主题
*   **example.com/shop/walmart/topic/3** <= 如果我第三次创建主题

尽管事实上只有 2 条属于**walmart shop**
的记录 ID 将显示为**'3'**
我怎样才能使这个 ID 成为计数样式？我应该准备另一个专栏还是什么？

> ```
> resources :communities, :path => "shop", do
> resources :community_topics, :path => "topic", :as => :'topic'
> end 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T18:13:49.227

如果 url 中的数字是记录的数字，这*真的很*`id`重要吗？如果这对您很重要，您可以创建一个类似于您的商店 slug“walmart”、“bestbuy”等的数字“slug”。您必须在主题表中创建一个新列并使用`before_create`过滤器来增加该值。像这样的东西：

```
class Topic
  before_validation :increment_slug, :on :create
  validates_uniqueness_of :slug, scope: :shop_id

  private
  def increment_slug
    self.slug = Topic.where("shop_id = ?", shop_id).order("slug DESC").limit(1).slug + 1
  end
end 
```

确保此处的“slug”是一个数字字段，以便`+`正确排序。

# php - Wordpress - Woocommerece 删除“已添加到购物车”消息

> ID：14024405
> 
> 赞同：5
> 
> 时间：2012-12-24T18:04:40.970
> 
> 标签：php, css, wordpress, woocommerce

在将商品添加到购物车后，我希望删除“产品已成功添加到购物车”的措辞和区域。我只是想要什么都没有，没有信息，也没有信息的空间。

这是网站：[http](http://www.tinytreasurehunts.com) ://www.tinytreasurehunts.com 代码在 woocommerece-functions.php

有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-12T07:35:01.860

使用其中之一：

旧版本

```
$woocommerce->clear_messages(); 
```

2.3 版

```
wc_clear_notices(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-22T14:35:08.187

要在 PHP 级别解决此问题，请将以下模板文件（和结构）添加到您的主题中
**`/wp-content/themes/YOUR-THEME/woocommerce/shop/messages.php`**：

```
<?php
/**
 * Show messages
 *
 * @author      brasofilo
 * @package     WooCommerce/Templates
 * @version     1.6.4
 */

if ( ! defined( 'ABSPATH' ) ) exit; // Exit if accessed directly

if ( ! $messages ) return;

foreach ( $messages as $message ) : 
    // The message does not contain the "add to cart" string, so print the message
    // http://stackoverflow.com/q/4366730/1287812
    if ( strpos( $message, 'added to your cart' ) === false ) :
        ?>
            <div class="woocommerce-message"><?php echo wp_kses_post( $message ); ?></div>
        <?php 
    endif;
endforeach; 
```

[请参阅：[模板结构 + 通过主题覆盖模板](http://docs.woothemes.com/document/template-structure/)]

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-05T14:20:46.653

只需使用简单的 CSS：

```
.single-product .woocommerce-message {
    display: none !important;
} 
```

或者，如果您熟悉 functions.php，这是一个更好的解决方案：

```
add_filter( 'wc_add_to_cart_message_html', '__return_null' ); 
```

来源在[这里](https://www.businessbloomer.com/woocommerce-remove-product-successfully-added-cart-message/)，以及编辑此类消息的方法，以防您希望打印自己的版本

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-24T18:06:33.720

使用 CSS 并将 ID 或关联类的显示设置为无。

```
 .page-id-522 .woocommerce_message {
     display: none;
} 
```

这特定于页面 id 522。确保这不会隐藏其他有用的消息，例如信用卡拒绝等。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-01-07T14:28:46.043

将此代码添加到您的主题 functions.php 文件中。它只会删除该消息。它应该只在可能发生的页面上触发。

```
function remove_added_to_cart_notice()
{
    $notices = WC()->session->get('wc_notices', array());

    foreach( $notices['success'] as $key => &$notice){
        if( strpos( $notice, 'has been added' ) !== false){
            $added_to_cart_key = $key;
            break;
        }
    }
    unset( $notices['success'][$added_to_cart_key] );

    WC()->session->set('wc_notices', $notices);
}
add_action('woocommerce_before_single_product','remove_added_to_cart_notice',1);
add_action('woocommerce_shortcode_before_product_cat_loop','remove_added_to_cart_notice',1);
add_action('woocommerce_before_shop_loop','remove_added_to_cart_notice',1); 
```

我已将这个答案从我自己的答案中粘贴到[删除/隐藏 Woocommerce 添加到购物车消息但保留/显示优惠券应用消息](https://stackoverflow.com/questions/34645095/remove-hide-woocommerce-added-to-cart-message-but-keep-display-coupon-applied-me/34657603#34657603)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-28T04:06:17.200

WooCommerce 版本 2.1.6 的更新

该模板位于新目录和文件中。与上面相同的代码和解决方案。

/wp-content/plugins/woocommerce/templates/notices/success.php

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-04T09:02:04.347

在主题文件的末尾或子主题中使用 .post .woocommerce_message{display:none;} 。

# java - 项目中的代码打包后如何编写调用jar文件的maven脚本？

> ID：14024409
> 
> 赞同：2
> 
> 时间：2012-12-24T18:05:28.447
> 
> 标签：java, maven

这个想法是像往常一样运行“mvn package”，并且在完成所有步骤之后，应该调用一个 Jar 实用程序，将打包代码（jar 或 war 文件）的文件路径作为参数传递。

该实用程序将从命令行调用如下：

java -jar Utility.jar -filepath {新 jar/war 文件的路径}

我想将最后一步集成到构建过程中。如何修改 pom.xml 文件以完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T18:15:03.170

看看[maven exec 插件](http://mojo.codehaus.org/exec-maven-plugin/)。您可以将它的执行绑定到包阶段（将在打包定义的内置绑定之后运行）以使用参数“-jar Utility.jar -filepath ${project.build.directory”运行 java（可执行文件） }/${project.artifactId}-${project.version}-${project.packaging}" 结果看起来像这样：

```
 <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>1.2.1</version>
                <executions>
                    <execution>
                        <id>run jar utility</id>
                        <phase>package</phase>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                        <configuration>
                            <executable>java</executable>
                            <arguments>
                                <argument>-jar</argument>
                                <argument>Utility.jar</argument>
                                <argument>-filepath</argument>
                                <argument>${project.build.directory}/${project.build.finalName}.${project.packaging}</argument>
                            </arguments>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build> 
```

尽管此调用将是特定于平台的。您可以对此进行一些改进并使用“java”而不是“exec”（您需要在该 Utility.jar 中提供主类名称）

如果您描述了您计划使用的实用程序的用途，则可能有一种更跨平台的方式来做到这一点（例如[maven antrun 插件](http://maven.apache.org/plugins/maven-antrun-plugin/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T20:12:26.360

这是从@radai 建议的运行 exec-maven-plugin 的另一种方法。如果你可以这样做，我推荐它。

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.2.1</version>
            <inherited>false</inherited>
            <executions>
                <execution>
                    <goals>
                        <goal>java</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <!--I don't want my project's dependencies in the classpath-->
                <includeProjectDependencies>false</includeProjectDependencies>
                <!--Just include the dependencies that this plugin needs.  IE: the Utility dependencies-->
                <includePluginDependencies>true</includePluginDependencies>
                <executableDependency>
                    <groupId>com.utility</groupId>
                    <artifactId>Utility</artifactId>
                </executableDependency>
                <mainClass>com.utility.MyMainClass</mainClass>
                <!--You may be able to use a variable substitution for pathToJarFile.  Try it and see-->
                <commandlineArgs>-filepath pathToJarFile</commandlineArgs>
            </configuration>
            <dependencies>
                <dependency>
                    <groupId>com.utility</groupId>
                    <artifactId>Utility</artifactId>
                    <version>1.0-SNAPSHOT</version>
                </dependency>
            </dependencies>
        </plugin> 
```

# javascript - CKEditor 4（用类名替换）获取文本区域值

> ID：14024427
> 
> 赞同：1
> 
> 时间：2012-12-24T18:07:31.493
> 
> 标签：javascript, ckeditor

我正在尝试在 CKEditor 实例中创建预览功能。

我正在使用 CKEditor 4 并用类名替换 textarea，我面临的唯一问题是我无法使用 JavaScript 获取 textarea 的值，这是我迄今为止尝试过的：

```
function prev()
    {
        html=document.forms["1_form"]["editor1"].value;
        document.getElementById("prev").innerHTML = html;
    } 
```

和 CKEditor 文本区域：

```
<textarea class="ckeditor" onkeydown="prev()"></textarea> 
```

为什么这不起作用？如果我禁用 CKEditor，脚本会按预期运行，但不会启用 ckeditor。我应该做些什么？

谢谢！

编辑：

我现在正试图用替换来做，这是我正在使用的代码：CKEDITOR.replace('editor1'); //新的ckeditor实例 var editor = CKEDITOR.instances.editor1; //引用实例

```
//on `key` event
editor.on('key', function(){

var data = editor.getData(); //reference to ckeditor data
$('#prev').html(data); //update `div` html

}); 
```

它有效，但唯一的是，它仅在按下下一个键后更新，所以说编辑器的值是`hello world`它将显示预览，因为`hello worl`我可以对这段代码做些什么来修复它，请忽略第一组代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T18:20:54.797

这是因为 CKEDITOR 将您的`<textarea>`into`<div>`替换为`contenteditable="true"`属性，并且`value`DOM 中没有`<div>`元素的属性。

您需要将事件侦听器添加到 CKEDITOR 实例，而不是 DOM 元素，例如：

```
// check if editor is ready
CKEDITOR.on( 'instanceCreated', function( e ) {

        // check if DOM is ready
        e.editor.on( 'contentDom', function() {

            // bind "keydown" event to CKEDITOR
            e.editor.document.on('keydown', function( event ) {

                // write editor content into "prev" element
                document.getElementById( "prev" ).innerHTML = e.editor.getData();
            }
        );
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T06:39:27.923

对于任何需要它的人，这是获取 HTML 字段的 TEXT 值的一种方法（在本例中用于动态字符计数器）：

JS ...

```
CKEDITOR.replace( 'myDoc', {
    width: 605,
    height: 500
});

setInterval("updateCount()", 500);

function updateCount() {
    var str = CKEDITOR.instances.myDoc.getData();
    if (str) {
        var element = CKEDITOR.dom.element.createFromHtml( str );
        var no_html = element.getText();
        $('#myDoc_length').html( no_html.length );
    }
} 
```

... 使用 HTML ...

```
<textarea id="myDoc"></textarea>
<span id="myDoc_length">0</span> characters 
```

# jquery - Jquery从转发器获取选定文本框的值

> ID：14024434
> 
> 赞同：1
> 
> 时间：2012-12-24T18:08:09.217
> 
> 标签：jquery, textbox, radio-button, repeater

我有一个带有文本框和单选按钮的转发器。我要做的就是在弹出窗口（jqmWindow）关闭时获取选定的文本框值。

```
<div class="jqmWindow" id="dialog" style="display: none;">
    <table width="100%" border="0px" cellpadding="0px" cellspacing="0px">
        <tr>
            <td>
                <asp:Repeater runat="server" ID="rptDaysInField" EnableViewState="false">
                    <HeaderTemplate>
                        <table id="tblPopUp" class="clsForm spacing" style="behavior: url(../script/tablehighlight.htc);"
                            hlcolor="#CECECE" slcolor="#CECECE">
                            <thead>
                                <tr class="header">
                                    <td width="0%">
                                    </td>
                                    <td width="40%">
                                        <MultiLang:LocalizedLiteral ID="LocalizedLiteral2" runat='server' Key="CoacheeName">
                                        </MultiLang:LocalizedLiteral>
                                    </td>
                                    <td width="20%">
                                        <MultiLang:LocalizedLiteral ID="LocalizedLiteral9" runat='server' Key="SessionDate">
                                        </MultiLang:LocalizedLiteral>
                                    </td>
                                    <td width="10%">
                                        <MultiLang:LocalizedLiteral ID="LocalizedLiteral10" runat='server' Key="# Days">
                                        </MultiLang:LocalizedLiteral>
                                    </td>
                                    <td width="20%">
                                        <MultiLang:LocalizedLiteral ID="LocalizedLiteral11" runat='server' Key="Days To Transfer">
                                        </MultiLang:LocalizedLiteral>
                                    </td>
                                    <td width="10%">
                                    </td>
                                </tr>
                            </thead>
                    </HeaderTemplate>
                    <ItemTemplate>
                        <tr>
                            <td width="0%">
                                <asp:HiddenField ID="hidId" runat="server" Value='<%#(DataBinder.Eval(Container, "DataItem.CoacheeId"))%>' />
                            </td>
                            </td>
                            <td width="40%">
                                <%# DataBinder.Eval(Container, "DataItem.CoacheeName")%>
                            </td>
                            <td width="20%">
                                <%# DataBinder.Eval(Container, "DataItem.SessionDate")%>
                            </td>
                            <td width="10%">
                                <%# DataBinder.Eval(Container, "DataItem.Days")%>
                            </td>
                            <td width="20%">
                                <asp:TextBox ID="rptTxtDaysToTransfer" class="clsRptTxtDaysToTransfer" runat="server"></asp:TextBox>
                            </td>
                            <td width="10%">
                                <asp:RadioButton ID="rdSelectDaysToTransfer" class="clsRdSelectDaysToTransfer" runat="server" />
                            </td>
                        </tr>
                    </ItemTemplate>
                    <FooterTemplate>
                        </table>
                    </FooterTemplate>
                </asp:Repeater>
            </td>
        </tr>
    </table>
    <a href="#" class="jqmClose" id="dialogClose" style="float:right;">Close</a>
</div> 
```

我正在使用下面的 jQuery 代码：

```
$(".jqmClose").click(function () {
            $(".clsRdSelectDaysToTransfer").each(function () {
                if ($(this).find("input[type=radio][id*=rdSelectDaysToTransfer]").attr("checked")) {
                    alert($(this).find(".clsRptTxtDaysToTransfer input[type=text][id*=rptTxtDaysToTransfer]").val());
                }
            });
        }); 
```

通过它我得到了选定的单选按钮，但仍然难以获得文本框的值。

请帮助我获取文本框的值。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:34:41.397

试试这个：

```
if ($(this).find("input[type=radio][id*=rdSelectDaysToTransfer]").attr("checked")) {
    var value = $(this).closest('tr').find('input.clsRptTxtDaysToTransfer').val();
    alert(value);
}​ 
```

# concurrency - GPars 锁返回 null

> ID：14024436
> 
> 赞同：3
> 
> 时间：2012-12-24T18:08:27.693
> 
> 标签：concurrency, groovy, locking, gpars

当我尝试锁定表中的一行时，有时会返回 null。这意味着什么？我验证域实例在锁定之前不为空：

```
println state
state = State.lock(state.id)
println state 
```

这输出：

```
State 1
null 
```

（“状态 1”是状态的字符串表示）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T00:02:21.980

通过这样做，您将通过悲观锁从 GORM 乐观锁（比较对象的版本之前更新）切换，这意味着读取操作将被阻塞，直到锁被释放。如果您想检索一个值，请使用下面的闭包（请参阅方法 returnValue）：

```
State.withPessimisticLock(state.id) { Object lockedDomain ->
return "OK"
}.onNotFound { ->
    return "NG"
}
assert result.returnValue == "OK" 
```

顺便说一句，事务是必需的，因此`null`您的问题中返回的 which 可能意味着您的对象不在事务中。

# jquery - 标签获取下一个隐藏字段

> ID：14024439
> 
> 赞同：1
> 
> 时间：2012-12-24T18:08:50.743
> 
> 标签：jquery, hidden, next

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T18:12:41.537

您需要先从元素中创建 jquery 对象，然后才能在其上使用 jquery 方法。

```
var currEl = $(element);
var downloadId = currEl.next().val(); 
```

* * *

但是由于您采用 jquery 方式，您还应该停止使用内联事件属性并使用 jquery 进行绑定。

所以

```
 <td>
       <a id="lbtnDelete" runat="server" class="silverbutton smallbutton normal">
            <span class="left">
                  <span class="right">Delete</span>
            </span>
       </a>
       <asp:HiddenField runat="server" ID="hidDownloadId" />
  </td> 
```

和

```
$(function(){
    $('#lbtnDelete').click(function(e){
        e.preventDefault();
        var currEl = $(this),
            downloadId = currEl.next().val();

        // do whatever you want to do with downloadId here

    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T18:12:01.297

尝试

```
function deleteFile(element)
{
    var currEl = $(element);
    var downloadId = currEl.next().val();
} 
```

`.next()`并且`.parent()`是 jQuery 方法并且 val() 是 jQuery 等价于 .value

# android - 图表在模拟器上画得很好，但在手机上不行

> ID：14024440
> 
> 赞同：1
> 
> 时间：2012-12-24T18:09:03.483
> 
> 标签：android, drawing, android-canvas

我用圆、弧和线在画布上画了一个基本的史密斯圆图。我已经在许多大小的模拟器屏幕上运行了该应用程序，并且一切都运行良好，但是一旦我在实际设备（Android 级别 2.3.5）上尝试了它，图表就没有按照应有的方式排列，即某些对象不合适。

在编写代码时，我小心地使用 get.Width() 和 get.Height() 作为参数，而不是使用像素，以便应用程序在所有设备上都能正常工作。下面是我使用的代码示例：

```
canvas.drawCircle(canvas.getWidth()*1/2, canvas.getHeight()*3/8, canvas.getWidth()*475/1000, black);
        canvas.drawCircle(canvas.getWidth()*5/8, canvas.getWidth()*5/8, canvas.getWidth()*349/1000, black);
        canvas.drawCircle(canvas.getWidth()*6/8, canvas.getWidth()*5/8, canvas.getWidth()*228/1000, black);
        canvas.drawCircle(canvas.getWidth()*7/8, canvas.getWidth()*5/8, canvas.getWidth()*103/1000, black);
arc0.set(canvas.getWidth()/2, canvas.getHeight()*-139/700, canvas.getWidth()*100/69, canvas.getHeight()*3/8);   
        arc1.set(canvas.getWidth()*-6/112, canvas.getHeight()*-80/100, canvas.getWidth()*195/100, canvas.getHeight()*72/192);   
        arc2.set(canvas.getWidth()*7/10, canvas.getHeight()*70/700, canvas.getWidth()*125/100, canvas.getHeight()*3/8); 
        arc3.set(canvas.getWidth()/2, canvas.getHeight()*3/8, canvas.getWidth()*100/69, canvas.getHeight()*91/96);
        arc4.set(canvas.getWidth()*-8/112, canvas.getHeight()*3/8, canvas.getWidth()*195/100, canvas.getHeight()*150/100);
        arc5.set(canvas.getWidth()*7/10, canvas.getHeight()*3/8, canvas.getWidth()*125/100, canvas.getHeight()*65/100); 
```

该图在我尝试过的所有不同尺寸的模拟器屏幕上都很好，所以任何人都可以告诉我为什么它没有在实际设备上排列。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:42:01.877

您必须使用百分比值而不是数字...此外，请尝试查看从 getwidth() 获得的值的转换。可能缺少一些值..

# ruby-on-rails - Rails：如何在开发中将我的数据库从 SQLite 更改为 PG？

> ID：14024441
> 
> 赞同：2
> 
> 时间：2012-12-24T18:09:14.370
> 
> 标签：ruby-on-rails, postgresql

我使用默认的 SQLite 数据库生成了我的 rails 应用程序，但是在创建了几个模型并迁移了几次之后，我想将其更改为 Postgresql。

我将 postgres gem 添加到我的 Gemfile 中，捆绑安装，然后我替换了所有 database.yml 代码

```
development:
  adapter: sqlite3
  database: db/development.sqlite3
  pool: 5
  timeout: 5000

test:
  adapter: sqlite3
  database: db/test.sqlite3
  pool: 5
  timeout: 5000

production:
  adapter: sqlite3
  database: db/production.sqlite3
  pool: 5
  timeout: 5000 
```

至

```
default: &default
  adapter: postgresql
  encoding: unicode
  pool: 5
  username: postgres
  password: mypass

development:
  <<: *default
  database: sample_app_development

test:
  <<: *default
  database: sample_app_test

production:
  <<: *default
  database: sample_app_production 
```

`FATAL: password authentication failed for user "postgres"`即使密码正确，我也会收到错误消息。是因为我错过了一步吗？我应该使用 pg Admin III 告诉 PG 我想将此应用程序添加到我的服务器吗？我应该创建一个新角色/连接吗？

我遇到过几次这个问题，似乎无法找到这个特定问题的答案。

当我尝试运行时它给了我这个`rake db:drop`：

```
Couldn't drop sample_app_development : #<PGError: FATAL:  role "postgres" does not exist
>
Couldn't drop sample_app_test : #<PGError: FATAL:  role "postgres" does not exist
> 
```

=========

```
Edmunds-MacBook-Pro:sample_app edmundmai$ createuser foo
Shall the new role be a superuser? (y/n) n
Shall the new role be allowed to create databases? (y/n) y
Shall the new role be allowed to create more new roles? (y/n) y
Password: 
createuser: could not connect to database postgres: FATAL:  password authentication failed for user "edmundmai" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T18:40:47.233

Postgres 用户认证有点奇怪。默认是使用与操作系统相同的身份验证（至少在 Linux 中）。因此，要从命令行进入 Postgres 提示符，您必须执行以下操作：

```
sudo -u postgres psql 
```

请注意，没有密码 - 由于操作系统负责身份验证，因此不需要密码（不过，如果需要，操作系统会询问您的 sudo 密码）。

因此，选项一是从 Rails 配置文件中删除密码选项，并希望一切正常。`pg_hba.conf`如果做不到这一点，请通过编辑文件（我的 at `/etc/postgresql/9.2/main/pg_hba.conf`）设置 Postgres 以接受基于密码的身份验证。这是我本地服务器的示例；用户“postgres”使用操作系统的身份验证（“peer”），但用户“opengeo”使用密码（“md5”）：

```
# TYPE  DATABASE        USER            ADDRESS                 METHOD
local   all             postgres                                peer
local   all             opengeo                                 md5 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T18:46:17.373

要将您的数据库转换为 postgresql，首先创建一个用户，如下所示：

```
$ createuser foo
Shall the new role be a superuser? (y/n) n
Shall the new role be allowed to create databases? (y/n) y
Shall the new role be allowed to create more new roles? (y/n) y 
```

创建数据库：

```
CREATE DATABASE foo_db ENCODING 'UTF8' OWNER foo; 
```

确保您的 database.yml 如下所示：

```
development:
  adapter: postgresql
  encoding: unicode
  database: foo_db
  pool: 5
  username: foo
  password:

test:
  adapter: postgresql
  encoding: unicode
  database: foo_test
  pool: 5
  username: foo
  password: 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-13T10:13:32.877

```
development:
  adapter: postgresql
  database: postgres
  username: postgres
  password: ;ernakulam
  pool: 5
  timeout: 5000

test:
  adapter: postgresql
  database: postgres
  pool: 5
  timeout: 5000

production:
  adapter: postgresql
  database: postgres
  pool: 5
  timeout: 5000` 
```

# java - 休眠 javassist 代理和`Object#equals`

> ID：14024444
> 
> 赞同：10
> 
> 时间：2012-12-24T18:09:35.820
> 
> 标签：java, hibernate, orm, javassist

在 Java 中为 UDT提供`#equals`实现时，条件之一是传递的参数对象必须是当前类的实例，否则我们会快速失败，`return false`请参阅[Effective Java](https://rads.stackoverflow.com/amzn/click/com/0321356683) (EJ2)。但是，在使用 Hibernate 4 时，由于延迟加载，我们最终会得到 javassist 代理实例，这种`#equals`情况将失败。克服这个问题的最佳选择是什么？我能想到的几个选择是：

*   扩展`equals`实现以考虑代理情况。缺点：可维护性代价、对 Hibernate 代理基础设施的硬连线依赖、hacky、实体或域模型应该与所使用的 ORM 无关，即因为它们可能在不需要 ORM 的不同上下文中重用，例如 Swing UI。
*   在调用之前检查它是否是代理`equals`。缺点：并不总是可能的，即处理集合和隐式调用`equals`，例如 Map。
*   避免使用延迟加载。缺点：在所有用例中都不合理也不高效。

更新

再次回顾 EJ2 我相信以下内容适用于所有场景（Type-Type、Type-Proxy、Proxy-Type 和 Proxy-Proxy），但正如下面的评论之一所指出的，如果将 Type 与完全不同的类型，例如`Person.equals(Employee)`，两者都使用相同的等于 EJ2 标准。

```
 if (this.getClass() != anObject.getClass())
    {
        return anObject.equals(this);
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-15T11:32:22.823

我偶然发现了同样的问题。我修复的方法是更改`.equals`​​ - 方法。

```
@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (!getClass().isAssignableFrom(obj.getClass()))
        return false;
    AbstractEntity other = (AbstractEntity) obj;
    if (getId() == null) {
        if (other.getId() != null)
            return false;
    } else if (!getId().equals(other.getId()))
        return false;
    return true; 
```

诀窍是不要比较类是否相同，而是使用`isAssignableFrom`- 方法。另一个技巧是不使用直接属性 ( `other.id`)，而是使用 get 方法 ( `other.getId()`)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-11T12:45:25.867

我没有评论 Willem de Wit 答案的声誉。比我需要发布一个新的答案。

要解决 djechelon 的问题，您应该替换此行：

```
if (!getClass().isAssignableFrom(obj.getClass())) 
```

为了

```
if ( !obj.getClass().isAssignableFrom(getClass()) && !getClass().isAssignableFrom(obj.getClass()) ) 
```

然后，您将确保 equals 将适用于所有场景（Type-Type、Type-Proxy、Proxy-Type 和 Proxy-Proxy）。

我也没有声望投票给你的答案。我好惨！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T12:10:42.087

您可以做两件事： 1\. 将 equals 更改为使用 instanceof 而不是类相等。代理的类型不等于实体的类型，而是扩展了实体的类型。

1.  打开代理以获取实体本身（有几个休眠工具可以帮助您做到这一点）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-27T14:16:32.397

上面 Dhansen 的答案很接近，但对我来说（使用 Hibernate）这解决了这个问题：

`if (!Hibernate.getClass(this).equals(Hibernate.getClass(obj))) { return false; }` 正如[Hans-Peter Störr 博士所建议的那样](https://stackoverflow.com/a/19542667/1617124/)

同样重要的是**始终**使用上面 Willem de Wit 所建议的“吸气剂”。

# asp.net - RegularExpressionValidator 显示以下字段不能为空的异常

> ID：14024445
> 
> 赞同：0
> 
> 时间：2012-12-24T18:09:39.250
> 
> 标签：asp.net, visual-studio-2010, validation

我有一个文本框 txtemailid，它有两个验证器`RequiredFieldValidator`和`RegularExpressionValidator`：

```
<asp:TextBox ID="txtEMailId" CssClass="Text1" runat="server"></asp:TextBox>
<asp:RequiredFieldValidator ID="RFVtxtEMailId"
    runat="server"
    ErrorMessage="*"
    Display="Dynamic"
    ForeColor="Red"
    ControlToValidate="txtEMailId"></asp:RequiredFieldValidator>
<asp:RegularExpressionValidator ID="REVtxtEMailId"
    runat="server"
    ValidationExpression="\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*"
    Display="Dynamic"
    ErrorMessage="Invalid Email Format"
    ForeColor="Red"></asp:RegularExpressionValidator> 
```

它显示以下错误

```
The ControlToValidate property of 'REVtxtEMailId' cannot be blank. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T18:20:55.053

您尚未指定应验证哪个控件。试试这个

```
<asp:RegularExpressionValidator ID="REVtxtEMailId"
    runat="server"
    ValidationExpression="\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*"
    Display="Dynamic"
    ErrorMessage="Invalid Email Format"
    ForeColor="Red" ControlToValidate="txtEMailId"></asp:RegularExpressionValidator> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T18:22:08.173

您尚未在正则表达式验证器中提供 ControlTo 验证属性。在 REVtxtEMailId 中添加此属性

# php - WordPress - 3 级菜单/导航

> ID：14024446
> 
> 赞同：0
> 
> 时间：2012-12-24T18:09:42.900
> 
> 标签：php, wordpress, navigation

我在 WordPress 中遇到第 3 级导航菜单问题。我正在使用以下代码输出 3 级导航：

```
 <?php $parents = wp_list_pages("title_li=&depth=1&echo=0&sort_column=menu_order");
        if($post->post_parent) {
            $siblings = wp_list_pages("title_li=&depth=1&child_of=".$post->post_parent."&echo=0&sort_column=menu_order");
            $children = wp_list_pages("title_li=&depth=1&child_of=".$post->ID."&echo=0&sort_column=menu_order");
        } else {
            $children = wp_list_pages("title_li=&depth=1&child_of=".$post->ID."&echo=0&sort_column=menu_order");
            $siblings = array();
        }
        if($parents) { ?>
            <ul class="topseiten">
            <?php echo $parents; ?>
            </ul>
        <?php }
        if($siblings) { ?>
            <ul class="unterseiten">
            <?php echo $siblings; ?>
            </ul>
        <?php }
        if($children) { ?>
            <ul class="unterunterseiten">
            <?php echo $children; ?>
            </ul>
        <?php } ?> 
```

当我单击菜单 1 -> 菜单 2 正在显示 -> 确定

当我单击菜单 2 -> 菜单 3 正在显示时，您会看到菜单 1 -> 确定

当我点击菜单 3 -> 菜单 2 被隐藏！

有人可以在这里帮助我吗？真的很感激！

谢谢，圣诞快乐！凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:16:45.687

好的，找到了另一个现在完美的解决方案：

```
<?php
//Automatic Submenu
global $wp_query;
//Wenn die Seite ein Grandparent ist, also keine Eltern hat...
if( empty($wp_query->post->post_parent) ) 
  {
        //Herausfinden ob es Kinder gibt...
        $ich=$wp_query->post->ID;
        $children = wp_list_pages("title_li=&child_of=$ich&echo=0"); 
            if ($children) 
            {
                $parent1 = $wp_query->post->ID;
                //Menue ausgeben
                echo "<ul class='topseiten'>";
                wp_list_pages("title_li=&child_of=$parent1&depth=1");
                echo "</ul>";
            }
            else {
                echo "<ul class='topseiten'>";
                wp_list_pages("title_li=&depth=1");
                echo "</ul>";
            }
 } 

else
//hat Eltern, ist also ein parent 
 {
    $ich=$wp_query->post->ID;
    $children = wp_list_pages("title_li=&child_of=$ich&echo=0"); 
    //UND hat weitere Kinder
    if ($children) 
    {
        $parent1 = $wp_query->post->post_parent;
        //MENUE 1 mit Geschwistern aktueller Seite (Kinder von $parent1)
        echo "<ul class='topseiten'>";
        wp_list_pages("title_li=&depth=1");
        echo "</ul>";
        echo "<ul class='unterseiten'>";
        wp_list_pages("title_li=&child_of=$parent1&depth=1");
        echo "</ul>";

        $parent2 = $wp_query->post->ID;
        //Menue 2 mit Kindern aktueller Seite ($parent2)
        echo "<ul class='unterunterseiten'>";
        wp_list_pages("title_li=&child_of=$parent2&depth=1");
        echo "</ul>";

    }
    else
    {
            if(get_grandpapa(''))
            {
                $parent1 = get_grandpapa('');
                //MENUE 1 mit Geschwistern aktueller Seite (Kinder von $parent1)
                echo "<ul class='topseiten'>";
                wp_list_pages("title_li=&depth=1");
                echo "</ul>";
                echo "<ul class='unterseiten'>";
                wp_list_pages("title_li=&child_of=$parent1&depth=1");
                echo "</ul>";

                $parent2 = $wp_query->post->post_parent;
                //Menue 2 mit Kindern aktueller Seite ($parent2)
                echo "<ul class='unterunterseiten'>";
                wp_list_pages("title_li=&child_of=$parent2&depth=1");
                echo "</ul>";
            }
            else
            {
                $parent1 = $wp_query->post->post_parent;
                //NUR Menue 1 mit Geschwistern aktueller Seite (Kinder von $parent1)
                echo "<ul class='topseiten'>";
                wp_list_pages("title_li=&depth=1");
                echo "</ul>";
                echo "<ul class='unterseiten'>";
                wp_list_pages("title_li=&child_of=$parent1&depth=1");
                echo "</ul>";
            }
    }
}

?> 
```

而这个函数我不得不放在主题的functions.php中：

```
function get_grandpapa($page_id){
$current_page = get_page( $page_id );
if ($current_page->post_parent > 0){
    //has at least a parent
    $parent_page = get_page($current_page->post_parent);
    if ($parent_page->post_parent > 0){
        return $parent_page->post_parent;
    }else{
        return false;
    }
}
return false; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T18:25:13.563

尝试用以下代码替换第 3 行

```
$current_parent = $post->post_parent;
$parent_post = get_post( $current_parent );
$siblings = wp_list_pages("title_li=&depth=1&child_of=".$parent_post->post_parent."&echo=0&sort_column=menu_order"); 
```

# d3.js - d3.js 过渡结束事件

> ID：14024447
> 
> 赞同：16
> 
> 时间：2012-12-24T18:09:57.717
> 
> 标签：d3.js, transition

我正在对一组返回的节点应用过渡`selectAll()`。我认为结束事件会在所有转换完成后触发，但`each("end",function)`在每次转换结束时被调用。

那么有没有办法设置一个回调，在所有选定节点的转换完成后调用？

我应该用`call`这个吗？但我没有看到它在文档中的任何地方用作结束回调。

`each`我也可以在回调中运行一个计数器。但是有没有办法知道有多少节点仍在等待完成过渡？或选定节点组中当前节点的索引？

我在链中有两个 select() 调用，`selectAll('.partition').selectAll('.subpartition')` 因此传递给每个回调的索引参数将旋转 n 次。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-10-21T22:01:08.667

据我所知，没有内置方法可以知道组的最后一次转换何时完成，但有一些方法可以解决它。我多次使用的一种方法是维护已完成的转换计数。

```
var n = 0;

d3.selectAll('div')
   .each(function() { // I believe you could do this with .on('start', cb) but I haven't tested it
       n++;
   })
   .transition()
   .on('end', function() { // use to be .each('end', function(){})
       n--;
       if (!n) {
           endall();
       }
   })

function endall() {
    // your end function here
} 
```

以下是相关文档的链接：

*   [https://github.com/d3/d3-transition#control-flow](https://github.com/d3/d3-transition#control-flow)
*   [https://github.com/d3/d3-transition#the-life-of-a-transition](https://github.com/d3/d3-transition#the-life-of-a-transition)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-20T15:50:56.150

这是完成您想要的事情的一种干净的方法：

```
function endAll (transition, callback) {
    var n;

    if (transition.empty()) {
        callback();
    }
    else {
        n = transition.size();
        transition.each("end", function () {
            n--;
            if (n === 0) {
                callback();
            }
        });
    }
} 
```

然后，您可以像这样轻松调用此函数：

```
selection.transition()
    .call(endAll, function () {
        console.log("All the transitions have ended!");
    }); 
```

即使转换为空，这也将起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-05T18:01:34.787

我遇到过同样的问题

每个元素都会执行回调

我已经解决了使用下划线一次的方法

[http://underscorejs.org/#once](http://underscorejs.org/#once)

```
d3.select("#myid")
.transition()
.style("opacity","0")
.each("end", _.once(myCallback) ); 
```

# javascript - ng-class 中的表达式

> ID：14024448
> 
> 赞同：15
> 
> 时间：2012-12-24T18:09:58.803
> 
> 标签：javascript, angularjs

我有一个非常简单的 Angular 应用程序，我正在尝试将 ng-repeat 与 ng-class 结合使用来重复模板并根据所绑定数据的属性之一将不同的类应用于外部 div。

当我使用简单的...

```
ng-class="message.type" 
```

...但不幸的是，我需要将一个字符串连接到消息类型的开头。

我试图在这里创建一个 JSfiddle ......

[http://jsfiddle.net/XuYGN/5/](http://jsfiddle.net/XuYGN/5/)

...但这也是我第一次尝试制作 JSfiddle，我一定做错了，因为 Angular 的东西似乎没有运行。它确实显示了我试图用这个表达式做什么。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-24T18:26:29.083

html：

```
 <div ng-controller="mainCtrl">

        <div ng-repeat="message in data.messages" ng-class="'className-' + message.type">

            Repeat Me           

        </div>        

    </div>                

</div> 
```

javascript：

```
var mainCtrl=function($scope) {

    $scope.data = {}

    $scope.data.messages = [
        {
            "type": "phone"},
        {
            "type": "email"},
        {
            "type": "meeting"},
        {
            "type": "note"}
    ] 
```

}​</p>

在小提琴中，您在表达式周围放了一些 {{}} 不要这样做，因为它是一个表达式。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-24T21:46:10.530

仅供参考，@camus 回答的替代方案：

```
class="{{'className-' + message.type}}" 
```

使用`class`时，表达式（在 {{}} 内）必须计算为以空格分隔的类名字符串。

使用[`ng-class`](https://docs.angularjs.org/api/ng/directive/ngClass)时，表达式的计算结果必须为以下之一：

1.  一串以空格分隔的类名，或
2.  和类名数组，或
3.  类名到布尔值的映射/对象。

# sql-server-2008 - 在 SQL Server 管理工作室的地理列中输入数据

> ID：14024454
> 
> 赞同：11
> 
> 时间：2012-12-24T18:11:14.987
> 
> 标签：sql-server-2008, sqlgeography

我在 SQL Server Management Studio 中创建了一个新表，其中包括一个 Geography 列。现在，我正在尝试使用 SSMS UI 在此列中输入数据，但我找不到正确的方法。

那么，如何做到这一点呢？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-25T17:52:02.870

我不认为 SSMS 本身就支持使用漂亮的界面（例如地图）来执行此操作。也许有一些附加组件可以实现这一点，或者可能有一些 3rd 方应用程序。

如果您对在 SQL 中执行此操作感到满意，请尝试以下操作：

```
UPDATE tableName SET geographyColumn = geography::Point(47.65100, -122.34900, 4326) 
```

源自[这里](http://technet.microsoft.com/en-us/library/bb933811.aspx)。

[这里](http://colinmackay.scot/2008/02/07/different-ways-to-add-point-data-in-sql-server-2008/)还有另外 4 种方法可以做到这一点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-03T17:55:45.363

如果编辑表格单元格*，*只需输入

```
POINT (2.434548 48.858319 4326) 
```

# magento - 在 Magento 的电子邮件模板中查找句柄

> ID：14024459
> 
> 赞同：5
> 
> 时间：2012-12-24T18:11:59.143
> 
> 标签：magento, email-templates

我正在尝试编辑此电子邮件模板：

```
/app/locale/en_US/template/email/sales/order_new.html 
```

我正在尝试编辑订单总计部分，但在上面的文件中它有这个代码

```
{{layout handle="sales_email_order_items" order=$order}} 
```

得到我需要编辑的数据。有谁知道我在哪里可以找到这个`sales_email_order_items`句柄以便我进行编辑？我正在使用 Magento CE 1.4.1.1

谢谢~

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-24T18:27:50.767

`sales_email_order_items`提手的地方有三处：

1) 捆绑.xml

2) 可下载的.xml

3）sales.xml（可能是你需要的）

此外，这里是它调用的模板：

```
email/order/items.phtml 
```

`sales/order/totals.phtml`（可能是你想要的那个）

```
tax/order/tax.phtml 
```

# php - 在页数中排除个人资料 ID？

> ID：14024463
> 
> 赞同：0
> 
> 时间：2012-12-24T18:12:13.567
> 
> 标签：php, redirect, count

我使用页数来控制用户在被重定向之前可以查看页面的次数。该页面是 profile.php，如果用户点击用户个人资料，这会将他们带到 profile.php，扩展名为 id=1 或 id=8 等。

目前这个脚本被放在 profile.php 中并且工作正常，它限制了用户可以查看的配置文件的数量。但我想排除一些配置文件。这可能吗？

我是新手，也是 php 的初学者，所以如果有人能告诉我这真的很有帮助。

谢谢，麻烦您了。

```
<?php 

!session_id() ? session_start() : null;
if(!isset($_SESSION['page_access_count'])){
    $_SESSION['page_access_count'] = 1;
}elseif($_SESSION['page_access_count'] >= 6){
    // redirect to signup page
    header('Location: limit.php');
    exit;
}

    // increase the page access session value
    $_SESSION['page_access_count']++;

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:13:59.210

使用 if 语句。

```
if(on profile foo){
   do bar
}
else {
   count++
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T18:18:50.247

是的。使用 if 语句。看起来您对它们很熟悉，并且您已经对 PHP 有了一定的了解，所以也许我遗漏了什么？

具体来说，为了便于维护，我会这样做：

```
$free_profiles = array(1,8,12,14,96); // array of profile IDs to exclude

if (! in_array($_GET['id'], $free_profiles)) {
  $_SESSION['page_access_count']++;
} 
```

# iphone - 如何修复 iPad segue 上的警告

> ID：14024465
> 
> 赞同：0
> 
> 时间：2012-12-24T18:12:33.440
> 
> 标签：iphone, ios, ipad, uistoryboardsegue

我想知道是否有人可以向我解释这一点。我正在使用故事板构建一个通用应用程序。iPhone 版本有一个导航控制器，带有一个主列表视图，然后是一个子列表视图（两者都是 tableview 控制器。

iPad 应用程序使用拆分视图控制器来实现与 iphone 相同的功能（一个主列表，一个详细列表）。一切都很好，但是当使用“替换”segue 转换到拆分视图控制器上的新详细视图时，我必须将新的详细视图嵌入到他们自己的导航控制器中，而我不需要在 iphone 上执行此操作（它已经在导航控制器中。（希望这有点道理）

我的代码（有效）最终看起来像这样：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    NotesListViewController *listNotesView;
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        listNotesView = [[segue destinationViewController] topViewController];
    } else {
        listNotesView = [segue destinationViewController];
    }

    if ([segue.identifier isEqualToString:@"NotesByDate"]) {
        [listNotesView setGroupType:@"date"];
    } else if ([segue.identifier isEqualToString:@"NotesByTopic"]) {
        [listNotesView setGroupType:@"topics"];
    } else if ([segue.identifier isEqualToString:@"NotesBySpeaker"]) {
        [listNotesView setGroupType:@"speaker"];
    } 
```

所以...问题是 IF 语句的第一个条件是生成警告（从 UIViewController 分配给 NoteListViewController 的指针类型不兼容）。但是，它不是 UIViewController，而是 UITableViewController。在 iPhone 版本上，它应该是一个 UIView，但我在这里专门检查 iPad。

就像我说的那样，它有效，所以也许这不是一个真正的问题，但我对不断出现的警告以及不确定如何/是否可以修复它感到有点恼火。

我会尝试稍后发布故事板的图像，希望这有助于解释这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T18:17:22.320

您所要做的就是将您检索`[[segue destinationViewController] topViewController]`到的 UIViewController 类型转换为`NotesListViewController`.

所以，你会`listNotesView = (NotesListViewController *)[[segue destinationViewController] topViewController];`

顺便说一句，你的代码工作但产生警告的原因是因为无论你调用什么类型的对象，内存中指向的实际类型才是最重要的（你可以将某些东西声明为 an`NSString`并分配的记忆`[NSDictionary alloc]`，但这只会导致混乱）。`-topViewController`返回一个`UIViewController`对象，因为沿线某处，它返回的任何类都将继承自`UIViewController`，就像您`NotesListViewController`所做的那样，但是它没有足够的信息来比这更具体，因此您必须通过类型转换为编译器提供额外的信息目的。

# html - IE 9 无法从 Tomcat 加载 HTML5 音频

> ID：14024471
> 
> 赞同：2
> 
> 时间：2012-12-24T18:13:11.033
> 
> 标签：html, url, tomcat, html5-audio, src

我的 HTML5 音频播放器在 IE9 中运行时，无法播放位于运行 Apache Tomcat 的服务器上的音频文件。例如，它永远不会在此路径加载文件：

[http://www.siascend.com/repository/audios/1017_Q1.mp3](http://www.siascend.com/repository/audios/1017_Q1.mp3)

但愉快地播放位于@的相同文件：

[http://hirebrodie.com/demo/audio/1017_Q1.mp3](http://hirebrodie.com/demo/audio/1017_Q1.mp3)

当播放器在 Chrome 或 Safari 中运行时，任一路径都可以正常工作。为什么它不能在 Internet Explorer 中运行？这是 HTML5 音频的 IE 实现的已知问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T18:28:05.617

Tomcat 默认为 .mp3 扩展名指定 MIME 类型为 audio/x-mpeg。将此默认设置更改为 audio/mpeg 解决了问题。换句话说，IE9 对 audio/x-mpeg 不满意，但接受 audio/mpeg 作为 MIME 类型标签的资源。

资料来源：[http ://social.msdn.microsoft.com/Forums/pl-PL/iewebdevelopment/thread/b4f58d95-ac27-4a28-a4ae-86477ddfc74f](http://social.msdn.microsoft.com/Forums/pl-PL/iewebdevelopment/thread/b4f58d95-ac27-4a28-a4ae-86477ddfc74f)

# c# - 如何在 C# 中使用位移位进行乘法运算

> ID：14024472
> 
> 赞同：1
> 
> 时间：2012-12-24T18:13:18.757
> 
> 标签：c#, multiplication, bit-shift

我知道在定点数学运算中使用位移乘法，例如，如果我需要将两个浮点值相乘，我应该将其乘以比例因子（例如在这种情况下为 20），然后，我应该将结果值乘以整数值，然后我应该将它们返回到数字的正常表示，应该再次按比例因子除以如何通过位移操作执行该操作？

基于[这篇](http://dspace.mah.se/bitstream/handle/2043/13691/exarbete%20Sebastian%20Holgersson%202012-04-25.pdf?sequence=2)文章：5.4 定点算法

`floatResShift`我已经在下面尝试了这个代码示例，并且我期望结果`floatResNormal`是相同的，但它们是不同的，我做错了什么？：

```
 float mul1 = 18.579434f;
        float mul2 = 34.307951f;

        int shiftMul1 = (int)((2 ^ 32) * mul1);
        int shiftMul2 = (int)((2 ^ 32) * mul2);

        var resultMul = shiftMul1 * shiftMul2;
        float floatResShift = resultMul >> 32; // wrong value
        float floatResNormal = mul1 * mul2; //expected value 
```

**更新：**

定点算术解释：

> 当 A = 2.5 和 B = 8.4 使用 32 位整数时，使用定点算法计算 A · B 的结果将涉及以下操作：
> 
> 确定比例因子。这在很大程度上取决于可能会看到什么样的数字。由于此示例中的数字非常小，因此不太重要，并且可以接受 16 个小数位（小数点右侧的位）。比例因子为 f = 216 = 65536。这种格式称为 Q15.16（小数点左侧 15 位，右侧 16 位，符号位 1 位）。
> 
> 使用普通整数乘法将 Ai 和 Bi 相乘。Ri = Ai · Bi = 163840 · 550502 = 90194247680。如此大的数字的原因是Ai和Bi都被缩放为我们的Q15.16格式，所以乘法得到的数字本质上是（A·f）· (B·f) = A·B·f2。
> 
> 为了将我们的结果恢复为 Q15.16 格式，因此必须将结果除以比例因子。这也可以使用位移算法来完成，但为了简单起见，这里使用除法。Ri/f = 90194247680/65536 = 1376255 这是我们在 Q15.16 格式中的结果
> 
> 要将数字转换回正常的实数，只需将其转换为所需的格式并再次除以比例因子，因此：1376255.0/65536.0 = 20.999985，接近预期的数字 21。
> 
> 使用比例因子缩放数字。在二进制算术中，这可以使用位移来完成，但为简单起见，我们将使用比例因子的乘法。Ai = A·f = 2.5·65536 = 163840 和 B·f = 8.4·65536 = 550502.4 然后将其截断为整数，因此 Bi = 550502。
> 
> 要将数字转换回正常的实数，只需将其转换为所需的格式并再次除以比例因子，因此：1376255.0/65536.0 = 20.999985，接近预期的数字 21。

**如何在上面的评论中进行相同的操作，但要使用位移位。并且在点之后具有很大的浮点值**

我试过上面的代码，但没有运气。

例如，我需要将两个值 18.579434f 和 34.307951f 相乘，但使用定点算法。

**更新：**

我用较小的比例因子尝试过这个，但没有运气。

**解决方案：**

也许我没有清楚地解释这个问题，但我解决了这个问题，我找到了解决方案：

谢谢大家，问题已经结束，这里是定点乘法的完整代码：

```
 float mul1 = 18.579434f;
    float mul2 = 34.307951f;

    int scaleFactor = (int) Math.Pow(2, 20);

    long shiftMul1 = (int)((scaleFactor) * mul1);
    long shiftMul2 = (int)((scaleFactor) * mul2);

    var resultMul = shiftMul1 * shiftMul2;
    float floatResShift = resultMul >> 40; 
    float floatResNormal = mul1 * mul2; // the result floatResNormal almost same as floatResShift 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T19:32:21.180

```
var k = 20;
var k_2 = k/2;
var p = 1 << k;

float mul1 = 18.579434f;
float mul2 = 34.307951f;

int shiftMul1 = (int)(p * mul1);
int shiftMul2 = (int)(p * mul2);

//fixed point multiplication         
var resultMul = ((shiftMul1 >> k_2) * (shiftMul2 >> k_2));

float floatResShift = ((float)resultMul)/p;
float floatResNormal = mul1 * mul2; 

Console.WriteLine("{0} {1}", floatResNormal, floatResShift); 
```

输出：

```
637,4223 637,4043 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T18:49:35.427

检查此代码

```
/*
Fixed Point Arithmatic structure and relevant methods. Simple fixed point structure included as well.

Created from information and code gathered here: http://stackoverflow.com/questions/605124/fixed-point-math-in-c

May be used for anything without permission.

To quote the original author (x4000 of stackoverflow.com):
"The accuracy of these functions as they are coded here is more than enough for my purposes, but if you need more you can increase the SHIFT AMOUNT on FInt.
Just be aware that if you do so, the constants on [trigonomic] functions will then need to be divided by 4096 and then multiplied by whatever your new SHIFT AMOUNT requires.
You're likely to run into some bugs if you do that and aren't careful, so be sure to run checks against the built-in Math functions to make sure that your results aren't
being put off by incorrectly adjusting a constant."

Code credit: x4000 of stackoverflow.com

Compiled into a usable source file by: Paul Bergeron

Date: 7/1/2009

More fixed point functions can be found written in Java here: http://home.comcast.net/~ohommes/MathFP/

*/

public struct FInt
{
    public long RawValue;
    public const int SHIFT_AMOUNT = 12; //12 is 4096

    public const long One = 1 << SHIFT_AMOUNT;
    public const int OneI = 1 << SHIFT_AMOUNT;
    public static FInt OneF = new FInt( 1, true );

    #region Constructors
    public FInt( long StartingRawValue, bool UseMultiple )
    {
        this.RawValue = StartingRawValue;
        if ( UseMultiple )
            this.RawValue = this.RawValue << SHIFT_AMOUNT;
    }
    public FInt( double DoubleValue )
    {
        DoubleValue *= (double)One;
        this.RawValue = (int)Math.Round( DoubleValue );
    }
    #endregion

    public int IntValue
    {
        get { return (int)( this.RawValue >> SHIFT_AMOUNT ); }
    }

    public int ToInt()
    {
        return (int)( this.RawValue >> SHIFT_AMOUNT );
    }

    public double ToDouble()
    {
        return (double)this.RawValue / (double)One;
    }

    public FInt Inverse
    {
        get { return new FInt( -this.RawValue, false ); }
    }

    #region FromParts
    /// <summary>
    /// Create a fixed-int number from parts.  For example, to create 1.5 pass in 1 and 500.
    /// </summary>
    /// <param name="PreDecimal">The number above the decimal.  For 1.5, this would be 1.</param>
    /// <param name="PostDecimal">The number below the decimal, to three digits.
    /// For 1.5, this would be 500\. For 1.005, this would be 5.</param>
    /// <returns>A fixed-int representation of the number parts</returns>
    public static FInt FromParts( int PreDecimal, int PostDecimal )
    {
        FInt f = new FInt( PreDecimal );
        if ( PostDecimal != 0 )
            f.RawValue += ( new FInt( PostDecimal ) / 1000 ).RawValue;

        return f;
    }
    #endregion

    #region *
    public static FInt operator *( FInt one, FInt other )
    {
        return new FInt( ( one.RawValue * other.RawValue ) >> SHIFT_AMOUNT, false );
    }

    public static FInt operator *( FInt one, int multi )
    {
        return one * (FInt)multi;
    }

    public static FInt operator *( int multi, FInt one )
    {
        return one * (FInt)multi;
    }
    #endregion

    #region /
    public static FInt operator /( FInt one, FInt other )
    {
        return new FInt( ( one.RawValue << SHIFT_AMOUNT ) / ( other.RawValue  ), false );
    }

    public static FInt operator /( FInt one, int divisor )
    {
        return one / (FInt)divisor;
    }

    public static FInt operator /( int divisor, FInt one )
    {
        return (FInt)divisor / one;
    }
    #endregion

    #region %
    public static FInt operator %( FInt one, FInt other )
    {
        return new FInt( ( one.RawValue ) % ( other.RawValue ), false );
    }

    public static FInt operator %( FInt one, int divisor )
    {
        return one % (FInt)divisor;
    }

    public static FInt operator %( int divisor, FInt one )
    {
        return (FInt)divisor % one;
    }
    #endregion

    #region +
    public static FInt operator +( FInt one, FInt other )
    {
        return new FInt( one.RawValue + other.RawValue, false );
    }

    public static FInt operator +( FInt one, int other )
    {
        return one + (FInt)other;
    }

    public static FInt operator +( int other, FInt one )
    {
        return one + (FInt)other;
    }
    #endregion

    #region -
    public static FInt operator -( FInt one, FInt other )
    {
        return new FInt( one.RawValue - other.RawValue, false );
    }

    public static FInt operator -( FInt one, int other )
    {
        return one - (FInt)other;
    }

    public static FInt operator -( int other, FInt one )
    {
        return (FInt)other - one;
    }
    #endregion

    #region ==
    public static bool operator ==( FInt one, FInt other )
    {
        return one.RawValue == other.RawValue;
    }

    public static bool operator ==( FInt one, int other )
    {
        return one == (FInt)other;
    }

    public static bool operator ==( int other, FInt one )
    {
        return (FInt)other == one;
    }
    #endregion

    #region !=
    public static bool operator !=( FInt one, FInt other )
    {
        return one.RawValue != other.RawValue;
    }

    public static bool operator !=( FInt one, int other )
    {
        return one != (FInt)other;
    }

    public static bool operator !=( int other, FInt one )
    {
        return (FInt)other != one;
    }
    #endregion

    #region >=
    public static bool operator >=( FInt one, FInt other )
    {
        return one.RawValue >= other.RawValue;
    }

    public static bool operator >=( FInt one, int other )
    {
        return one >= (FInt)other;
    }

    public static bool operator >=( int other, FInt one )
    {
        return (FInt)other >= one;
    }
    #endregion

    #region <=
    public static bool operator <=( FInt one, FInt other )
    {
        return one.RawValue <= other.RawValue;
    }

    public static bool operator <=( FInt one, int other )
    {
        return one <= (FInt)other;
    }

    public static bool operator <=( int other, FInt one )
    {
        return (FInt)other <= one;
    }
    #endregion

    #region >
    public static bool operator >( FInt one, FInt other )
    {
        return one.RawValue > other.RawValue;
    }

    public static bool operator >( FInt one, int other )
    {
        return one > (FInt)other;
    }

    public static bool operator >( int other, FInt one )
    {
        return (FInt)other > one;
    }
    #endregion

    #region <
    public static bool operator <( FInt one, FInt other )
    {
        return one.RawValue < other.RawValue;
    }

    public static bool operator <( FInt one, int other )
    {
        return one < (FInt)other;
    }

    public static bool operator <( int other, FInt one )
    {
        return (FInt)other < one;
    }
    #endregion

    public static explicit operator int( FInt src )
    {
        return (int)( src.RawValue >> SHIFT_AMOUNT );
    }

    public static explicit operator FInt( int src )
    {
        return new FInt( src, true );
    }

    public static explicit operator FInt( long src )
    {
        return new FInt( src, true );
    }

    public static explicit operator FInt( ulong src )
    {
        return new FInt( (long)src, true );
    }

    public static FInt operator <<( FInt one, int Amount )
    {
        return new FInt( one.RawValue << Amount, false );
    }

    public static FInt operator >>( FInt one, int Amount )
    {
        return new FInt( one.RawValue >> Amount, false );
    }

    public override bool Equals( object obj )
    {
        if ( obj is FInt )
            return ( (FInt)obj ).RawValue == this.RawValue;
        else
            return false;
    }

    public override int GetHashCode()
    {
        return RawValue.GetHashCode();
    }

    public override string ToString()
    {
        return this.RawValue.ToString();
    }

    #region PI, DoublePI
    public static FInt PI = new FInt( 12868, false ); //PI x 2^12
    public static FInt TwoPIF = PI * 2; //radian equivalent of 260 degrees
    public static FInt PIOver180F = PI / (FInt)180; //PI / 180
    #endregion

    #region Sqrt
    public static FInt Sqrt( FInt f, int NumberOfIterations )
    {
        if ( f.RawValue < 0 ) //NaN in Math.Sqrt
            throw new ArithmeticException( "Input Error" );
        if ( f.RawValue == 0 )
            return (FInt)0;
        FInt k = f + FInt.OneF >> 1;
        for ( int i = 0; i < NumberOfIterations; i++ )
            k = ( k + ( f / k ) ) >> 1;

        if ( k.RawValue < 0 )
            throw new ArithmeticException( "Overflow" );
        else
            return k;
    }

    public static FInt Sqrt( FInt f )
    {
        byte numberOfIterations = 8;
        if ( f.RawValue > 0x64000 )
            numberOfIterations = 12;
        if ( f.RawValue > 0x3e8000 )
            numberOfIterations = 16;
        return Sqrt( f, numberOfIterations );
    }
    #endregion

    #region Sin
    public static FInt Sin( FInt i )
    {
        FInt j = (FInt)0;
        for ( ; i < 0; i += new FInt( 25736, false ) ) ;
        if ( i > new FInt( 25736, false ) )
            i %= new FInt( 25736, false );
        FInt k = ( i * new FInt( 10, false ) ) / new FInt( 714, false );
        if ( i != 0 && i != new FInt( 6434, false ) && i != new FInt( 12868, false ) &&
            i != new FInt( 19302, false ) && i != new FInt( 25736, false ) )
            j = ( i * new FInt( 100, false ) ) / new FInt( 714, false ) - k * new FInt( 10, false );
        if ( k <= new FInt( 90, false ) )
            return sin_lookup( k, j );
        if ( k <= new FInt( 180, false ) )
            return sin_lookup( new FInt( 180, false ) - k, j );
        if ( k <= new FInt( 270, false ) )
            return sin_lookup( k - new FInt( 180, false ), j ).Inverse;
        else
            return sin_lookup( new FInt( 360, false ) - k, j ).Inverse;
    }

    private static FInt sin_lookup( FInt i, FInt j )
    {
        if ( j > 0 && j < new FInt( 10, false ) && i < new FInt( 90, false ) )
            return new FInt( SIN_TABLE[i.RawValue], false ) +
                ( ( new FInt( SIN_TABLE[i.RawValue + 1], false ) - new FInt( SIN_TABLE[i.RawValue], false ) ) /
                new FInt( 10, false ) ) * j;
        else
            return new FInt( SIN_TABLE[i.RawValue], false );
    }

    private static int[] SIN_TABLE = {
        0, 71, 142, 214, 285, 357, 428, 499, 570, 641,
        711, 781, 851, 921, 990, 1060, 1128, 1197, 1265, 1333,
        1400, 1468, 1534, 1600, 1665, 1730, 1795, 1859, 1922, 1985,
        2048, 2109, 2170, 2230, 2290, 2349, 2407, 2464, 2521, 2577,
        2632, 2686, 2740, 2793, 2845, 2896, 2946, 2995, 3043, 3091,
        3137, 3183, 3227, 3271, 3313, 3355, 3395, 3434, 3473, 3510,
        3547, 3582, 3616, 3649, 3681, 3712, 3741, 3770, 3797, 3823,
        3849, 3872, 3895, 3917, 3937, 3956, 3974, 3991, 4006, 4020,
        4033, 4045, 4056, 4065, 4073, 4080, 4086, 4090, 4093, 4095,
        4096
    };
    #endregion

    private static FInt mul( FInt F1, FInt F2 )
    {
        return F1 * F2;
    }

    #region Cos, Tan, Asin
    public static FInt Cos( FInt i )
    {
        return Sin( i + new FInt( 6435, false ) );
    }

    public static FInt Tan( FInt i )
    {
        return Sin( i ) / Cos( i );
    }

    public static FInt Asin( FInt F )
    {
        bool isNegative = F < 0;
        F = Abs( F );

        if ( F > FInt.OneF )
            throw new ArithmeticException( "Bad Asin Input:" + F.ToDouble() );

        FInt f1 = mul( mul( mul( mul( new FInt( 145103 >> FInt.SHIFT_AMOUNT, false ), F ) -
            new FInt( 599880 >> FInt.SHIFT_AMOUNT, false ), F ) +
            new FInt( 1420468 >> FInt.SHIFT_AMOUNT, false ), F ) -
            new FInt( 3592413 >> FInt.SHIFT_AMOUNT, false ), F ) +
            new FInt( 26353447 >> FInt.SHIFT_AMOUNT, false );
        FInt f2 = PI / new FInt( 2, true ) - ( Sqrt( FInt.OneF - F ) * f1 );

        return isNegative ? f2.Inverse : f2;
    }
    #endregion

    #region ATan, ATan2
    public static FInt Atan( FInt F )
    {
        return Asin( F / Sqrt( FInt.OneF + ( F * F ) ) );
    }

    public static FInt Atan2( FInt F1, FInt F2 )
    {
        if ( F2.RawValue == 0 && F1.RawValue == 0 )
            return (FInt)0;

        FInt result = (FInt)0;
        if ( F2 > 0 )
            result = Atan( F1 / F2 );
        else if ( F2 < 0 )
        {
            if ( F1 >= 0 )
                result = ( PI - Atan( Abs( F1 / F2 ) ) );
            else
                result = ( PI - Atan( Abs( F1 / F2 ) ) ).Inverse;
        }
        else
            result = ( F1 >= 0 ? PI : PI.Inverse ) / new FInt( 2, true );

        return result;
    }
    #endregion

    #region Abs
    public static FInt Abs( FInt F )
    {
        if ( F < 0 )
            return F.Inverse;
        else
            return F;
    }
    #endregion

}

public struct FPoint
{
    public FInt X;
    public FInt Y;

    public FPoint( FInt X, FInt Y )
    {
        this.X = X;
        this.Y = Y;
    }

    public static FPoint FromPoint( Point p )
    {
        FPoint f = new FPoint();
        f.X = (FInt)p.X;
        f.Y = (FInt)p.Y;
        return f;
    }

    public static Point ToPoint( FPoint f )
    {
        return new Point( f.X.IntValue, f.Y.IntValue );
    }
} 
```

# android-ndk - 无法从 Android 项目中删除 NDK 支持

> ID：14024477
> 
> 赞同：2
> 
> 时间：2012-12-24T18:13:53.217
> 
> 标签：android-ndk

我无法从我的 Android 项目中删除 NDK 支持。我已经完成了所有工作区和项目设置，包括 CDT 构建器、C/C++ 构建路径等。我清理了工作区并重新启动了 Eclipse。但是，我的项目将不会构建，因为 Eclipse 抱怨此错误：

> 在 PATH 中找不到程序“/home/eazyigz/adt-bundle-linux-x86/android-ndk-r8c/ndk-build”

我真的不知道该怎么办，因为我什至没有下载 ndk-r8c，反正它是一个过时的 ndk 版本！我在 Ubuntu Linux 上。

有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T19:58:19.930

好吧，我重新安装了 Eclipse。然后我删除了我的项目并将其重新导入工作区。现在我不再收到那个错误了。问题解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T23:14:12.153

如果您的代码有 C/C++ 方面引用了适用于 Eclipse 的 Android NDK 插件，则需要在 NDK 插件首选项中设置 NDK 位置： ![NDK 位置](../Images/92d426b8aba2ae10fbb25d7405e83bcd.png)

# php - 将 PHP 命名空间添加到现有 ZF1 应用程序中

> ID：14024481
> 
> 赞同：0
> 
> 时间：2012-12-24T18:14:13.497
> 
> 标签：php, zend-framework, namespaces

我正在尝试将 PHP 命名空间集成到现有的 Zend Framework 项目（v1.12）中。当我在工作控制器的顶部添加命名空间时，它不再工作并且应用程序抛出`Invalid controller class`错误。这是我的控制器定义：

```
namespace MyProject\Controller;

use MyProject\Controller\MyRestController;

class MyFooController extends MyRestController
{
} 
```

和 init 中的方法`Bootstrap.php`：

```
protected function _initAutoload()
{
    $autoloader = Zend_Loader_Autoloader::getInstance();
    $autoloader->registerNamespace('MyProject');
    return $autoloader;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:51:47.567

只是一个猜测（很长一段时间没有使用 ZF）：Zend 不会接受任何类作为控制器，只接受从框架的基本控制器类扩展的那些。由于您没有从框架基控制器类扩展，您会看到错误。

如果这是原因，请注意您最初是从基本框架控制器类扩展的，或者您实现了所需的接口。

```
namespace MyProject\Controller;

class MyRestController extendes Zend_Framework_Base_Controller_Class_Name_Here
{
    ... 
```

* * *

ps`use MyProject\Controller\MyRestController;`看起来是多余的，因为该类已经在该命名空间中。让我们回顾一下您的代码：

```
namespace MyProject\Controller; 
```

这将设置文件的命名空间。这意味着，非 FQCN 将解析为它。例如：

```
new MyRestController(); 
```

解析为以下 FQCN：

```
new MyProject\Controller\MyRestController 
```

哪个 - 哦！- 正是你在使用中写的：

```
use MyProject\Controller\MyRestController; 
```

这意味着，这个`use`子句是多余的，扩展在：

```
class MyFooController extends MyRestController 
```

一开始还是会去的。因为它是同一个命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T11:56:04.597

我现在面临类似的问题。对我来说，这看起来 Zend 无法正确解析命名空间控制器名称。因此，当我将例如 IndexController 放入命名空间 \Basic\Controller 时，它不会被加载，因为 Zend 想要加载不存在的 \IndexController 类。

我正在考虑扩展标准的zend路由器类，它有方法getControllerName。

然后我可以通过以下方式在引导程序中设置它：

```
$router = new \My\Namespaced\Router();

$front = Zend_Controller_Front::getInstance();
$front->setRouter($router); 
```

我还没有尝试过该代码，但这应该可以。

# c# - 我想使用 Windows 身份验证连接到另一个域上的 SQL 服务器，而域之间没有信任

> ID：14024482
> 
> 赞同：0
> 
> 时间：2012-12-24T18:14:16.073
> 
> 标签：c#, sql

情况如下：

*   我们在名为 IISServer1 的 Windows 2008 R2 服务器（不在域中）上有一个 Web 服务
*   我们有一个硬件 VPN 连接（站点到站点）到我们的一个客户的 Windows 域。
*   我们的客户端有一个名为 SQLServer1 的 SQL 服务器
*   我们可以使用命令提示符从 IISServer1 连接到 SQLServer1，`runas /User:domain\user /netonly "C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\Ssms.exe"`并在询问时输入密码。

现在我们想要使用 C# 中的 system.data.sqlclient 启用 IISServer1 上的 Web 服务连接到 SQLServer1。

这可能吗？如果是这样，你能提供一个例子。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T15:40:19.327

使用普通的 SQL 身份验证连接字符串。一旦您拥有网络级别的访问权限，无论您使用哪种身份验证都不再重要。如果它必须是 Windows 身份验证，只需确保 SQLServer1 已为 SQL 服务器中的域\用户定义了安全性。

# c# - C# 中的联合：结构成员似乎没有对齐

> ID：14024483
> 
> 赞同：9
> 
> 时间：2012-12-24T18:14:17.370
> 
> 标签：c#, struct, unions

我已经定义了以下结构来模拟 C++ 联合（最终将用于 C++ 互操作）：

```
[StructLayout(LayoutKind.Sequential)]
internal struct STRUCT1
{
    public Guid guid;

    public String str1;
    public String str2;
}

[StructLayout(LayoutKind.Sequential)]
internal struct STRUCT2
{
    public Guid guid;

    public String str1;
    public String str2;

    public Int32 i1;
}

[StructLayout(LayoutKind.Explicit)]
internal struct MASTER_STRUCT_UNION
{
    [FieldOffset(0)]
    public STRUCT1 Struct1;

    [FieldOffset(0)]
    public STRUCT2 Struct2;
}

[StructLayout(LayoutKind.Sequential)]
internal struct MASTER_STRUCT
{
    public MASTER_STRUCT_UNION Union;
} 
```

我编写了以下测试代码，它为 赋值`Struct1.guid`并测试是否相等`Struct2.guid`：

```
class Class1
{
    public static void Test()
    {
        MASTER_STRUCT ms = new MASTER_STRUCT();

        bool match;
        ms.Union.Struct1.guid = new Guid(0xffeeddcc, 0xbbaa, 0x9988, 0x77, 0x66, 0x55, 0x44, 0x33, 0x22, 0x11, 0);

        Console.WriteLine("Struct1.guid:\t\t{0}\n", ms.Union.Struct1.guid.ToString());

        Console.WriteLine("Struct2.integer:\t{0:x}", ms.Union.Struct2.i1);
        Console.WriteLine("Struct2.guid:\t\t{0}", ms.Union.Struct2.guid.ToString());

        match = ms.Union.Struct1.guid == ms.Union.Struct2.guid ? true : false;
    }
} 
```

为什么不`Struct2.guid`等于`Struct1.guid`，而是`Struct2.guid`'s 的一部分似乎转移到了`Struct2.integer`? 所有结构成员，IMO，似乎都是一致的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T18:58:49.147

`LayoutKind.Sequential`唯一影响此结构的非托管表示。这是因为该结构包含非 blittable 类型（即字符串）。
如果只存在[blittable 类型](http://msdn.microsoft.com/en-us/library/75dwhxf7.aspx)，`LayoutKind.Sequential`将同时控制托管和非托管表示（[参考](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.structlayoutattribute.aspx)）。

`ms`在您的情况下，编译器决定将整数放在托管表示中的两个字符串之前（如果您在调试和展开时将鼠标悬停在上面，您可以看到`STRUCT2`）。

您可以通过`LayoutKind.Explicit`同时使用`STRUCT1`and来解决这个问题`STRUCT2`，因为`Explicit`会影响 blittable 和 non-blittable 类型的托管和非托管表示。

# android - Android禁用“SignalStrength”等登录LogCat

> ID：14024486
> 
> 赞同：5
> 
> 时间：2012-12-24T18:14:26.560
> 
> 标签：android, logging, logcat

我在 logcat 中使用 Android 4.0 的一部手机上获得了太多信息

更多关于所有其他模型。我每1-3秒得到一次

> StatusBar.NetworkController SignalStrength wpa_supplicant

有没有办法告诉android不要每秒记录无线设置？其他手机不这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T22:38:13.420

如果您要排除的这些日志具有独特的 TAG，您可以在 Eclipse Logcat 中使用像这样的正则表达式来排除它们：

```
^(?!TAG_TO_EXCLUDE).*$ 
```

# ios - AFNetworking 请求 API iOS

> ID：14024493
> 
> 赞同：2
> 
> 时间：2012-12-24T18:14:56.887
> 
> 标签：ios, json, afnetworking

我正在向服务器发出请求，服务器返回一个 JSON。AFNetworking 框架返回格式错误的 JSON。

这是服务器发送的内容：

```
{"email":"XXXXXXX","firstName":"XXXXXX","lastName":"XXXXXXX","gender":"male","userToken":"XXXXXXXXXXX"} 
```

这是 AFNetworking 收到的：

```
{
email = "XXXXXXX";
firstName = XXXXXX;
gender = male;
lastName = XXXXXXX;
token = XXXXXXXXXXXX;
} 
```

我的代码：

```
AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:server_ip]];

NSURLRequest *request = [client requestWithMethod:@"POST" path:path parameters:params];
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {            
        NSLog(@"%@", JSON);

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {          
        NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);

    }];
[operation start]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T18:33:09.407

您要打印的对象是从服务器接收到的 JSON 的 NSDictionary 表示。

如果要查看从服务器返回的原始 JSON，则应查看操作的 responseString：

```
NSLog(@"%@", operation.responseString); 
```

# ocaml - 递归函数：这个表达式应该有单位类型。

> ID：14024497
> 
> 赞同：1
> 
> 时间：2012-12-24T18:15:22.513
> 
> 标签：ocaml

这个功能：

```
let rec foo () =
    try
    let line = input_line stdin in
    (try
        Mparser.tex_expr lexer_token_safe (Lexing.from_string line);
        print_string ("SUCCESS\n")
        with
        Mtexutil.Illegal_tex_function s -> print_string ("$T" ^ s ^ " " ^ line ^ "\n")
          | LexerException s            -> print_string ("$L" ^ line ^ "\n")
          | Parsing.Parse_error         -> print_string ("$P" ^ line ^ "\n")
          | _                           -> print_string ("$S " ^ line ^ "\n"));
    flush stdout;
    foo ();
    with
    End_of_file -> ()
;; 
```

给出错误：

```
Warning 10: this expression should have type unit. 
```

对于以 . 开头的行`Mparser.tex`。

如何解决此警告？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T18:26:48.893

编译器似乎在警告您`Mparser.tex_expr`返回一个您没有使用的值。您可以通过明确表示您故意丢弃价值来摆脱警告。这就是该`ignore`功能的用途：

```
ignore (Mparser.tex_expr lexer_token_safe (Lexing.from_string line)); 
```

`let ... in`在某些情况下，我认为使用分号而不是分号会更好地阅读：

```
let _ = Mparser.tex_expr lexer_token_safe (Lexing.from_string line) in
... 
```

# mysql - MySql - 可以在插入触发器之前插入 2 列吗？

> ID：14024502
> 
> 赞同：1
> 
> 时间：2012-12-24T18:16:09.260
> 
> 标签：mysql, triggers, referential-integrity

是否可以更改此触发器以使表插入`sortorder`2 个列值 ( `sortOrderId`, )？`sortOrder`

发现的价值如何`sortOrder`？

如果它是已知的并且可以插入到`image`表中，那么它也可以插入到`sortorder`表中吗？

```
-- Trigger DDL Statements
DELIMITER $$

USE `nextcart`$$

CREATE
DEFINER=`root`@`localhost`
TRIGGER `nextcart`.`insert_sortorderid` 

BEFORE INSERT ON `nextcart`.`image` 

FOR EACH ROW 
BEGIN
    INSERT INTO sortorder SET sortOrderId = NULL, sortOrder = NEW.sortOrder;

    SET NEW.sortOrderId = (SELECT LAST_INSERT_ID());
END;
$$ 
```

创建表排序：

```
delimiter $$

CREATE TABLE `sortorder` (
  `sortOrderId` int(11) NOT NULL AUTO_INCREMENT,
  `sortOrder` tinyint(4) NOT NULL,
  PRIMARY KEY (`sortOrderId`),
  KEY `sort_order` (`sortOrderId`,`sortOrder`),
  CONSTRAINT `fk_sortOrderId` FOREIGN KEY (`sortOrderId`) REFERENCES `image` (`imageId`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8$$ 
```

创建表图像：

```
delimiter $$

CREATE TABLE `image` (
  `imageId` int(11) NOT NULL AUTO_INCREMENT,
  `imageFileName` varchar(45) DEFAULT NULL,
  `imagePath` varchar(255) DEFAULT NULL,
  `imageTitle` varchar(100) DEFAULT NULL,
  `imageAlt` varchar(100) DEFAULT NULL,
  `imageWidth` int(11) DEFAULT NULL,
  `imageHeight` int(11) DEFAULT NULL,
  `classId` int(11) DEFAULT NULL,
  `imageSizeId` tinyint(4) NOT NULL,
  `isImageEnabled` bit(1) DEFAULT b'0',
  `sortOrderId` int(11) DEFAULT NULL,
  PRIMARY KEY (`imageId`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8$$ 
```

错误信息：

> 错误 1054：'NEW' SQL 语句中的未知列 'sortOrder'：
> CREATE TRIGGER insert_sortorderid BEFORE INSERT ON Image FOR EACH ROW BEGIN INSERT INTO nextcart.sortorder SET sortOrderId = NULL, sortOrder = NEW.sortOrder; SET NEW.sortOrderId = (SELECT LAST_INSERT_ID()); 结尾; 运行故障回复脚本时出错。详情如下。错误 1050：表 'image' 已存在 SQL 语句：CREATE TABLE `image`( `imageId`int(11) NOT NULL AUTO_INCREMENT,
> `imageFileName`varchar(45) DEFAULT NULL, `imagePath`varchar(255) DEFAULT NULL, `imageTitle`varchar(100) DEFAULT NULL, `imageAlt` varchar(100) DEFAULT NULL , `imageWidth`int(11) 默认空值,
> `imageHeight`int(11) 默认空值, `classId`int(11) 默认空值, `imageSizeId`tinyint(4) 非空值, `isImageEnabled`位（1）默认 b'0'， `sortOrderId`int（11）默认 NULL，主键（`imageId`））引擎=InnoDB AUTO_INCREMENT=5 默认字符集=utf8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T20:03:53.863

表中没有命名`sortOrder`列`image`。

因此，对`NEW.sortOrder`（在触发器中的插入语句上）的引用是无效的。

* * *

要回答您的第一个问题：不。由于在 INSERT 语句（触发 BEFORE INSERT TRIGGER）中没有为此提供值，因此您实际上没有该值的来源。

简单的选项是为其提供默认值。

如果要为`sortOrder`列提供值，则一种选择是将 sortOrder 列添加到`image`表中，然后可以在`INSERT INTO image`语句中提供值。然后它将在触发器中可用。

（该`sortorder`表的目的完全不清楚。）

# mysql - Mysql根据连续键值组合行然后合并

> ID：14024503
> 
> 赞同：1
> 
> 时间：2012-12-24T18:16:10.673
> 
> 标签：mysql, sql

非常感谢阅读，

我有下表（查看）

```
#id_internal type  BOOK_ID     Writer       Title     Loan_person_id Loan_Date      Return_Date
    120     1       1002    Writer1         Book1       2            2012-05-21     2012-06-04
    131     0       1002    Writer1         Book1       2            0000-00-00     2012-05-21
    134     0       1002    Writer1         Book1       2            0000-00-00     2012-05-21
    153     1       1002    Writer1         Book1       2            2012-05-21     2012-06-04
    162     0       1002    Writer1         Book1       2            0000-00-00     2012-05-21
    165     1       1002    Writer1         Book1       2            2012-05-21     2012-06-04
    252     1       1012    Writer2         Book2       2            2012-05-23     2012-06-06
    253     0       1012    Writer2         Book2       2            0000-00-00     2012-05-23
    383     1       1012    Writer2         Book2       2            2012-05-23     2012-06-06
    389     0       1012    Writer2         Book2       2            0000-00-00     2012-05-24
    13      1       1008    Writer3         Book3       3            2012-05-20     2012-06-03 
```

创建它基本上模拟了我的学校图书馆借阅日志的小应用程序。

我正在尝试找到一种创建 sql 语句的方法，该语句将执行以下操作：基于 id_internal 字段（如图所示）一次合并两行（前两行 - 更多两行等，直到不存在元组或存在最后只有一个）并创建一个多列的新列。

这就是所有关于集合中的一行（type = 1）描述图书借出的时间，即图书被借出的时间以及应该归还图书馆的时间。第二行（始终具有 Loan_Date 时间 0000:00:00 和字段 type = 0 ）描述了还书的真实日期。新行将包含第一行中包含的所有信息，新列将包含图书的真实归还日期。Book_ID 和 Loan_person_id 列（用于借书的读者）和 TYPE 列，值为 0（返回）和 1（贷款）。

从我在 SQL 中的基本能力到早期中级能力，我无法正确使用 GROUP BY 和 GROUP CONCAT。期待答案或方向。
非常感谢，迪诺斯

编辑：结果应该是形式（让我们使用视图）

```
处理前：
#id_internal type BOOK_ID Writer Title Loan_person_id Loan_Date Return_Date
    120 1 1002 作家1 Book1 2 2012-05-21 2012-06-04
    131 0 1002 Writer1 Book1 2 0000-00-00 2012-05-21
处理后：
保留两个 id_internal 之一（没关系）：
#id_internal type BOOK_ID Writer Title Loan_person_id Loan_Date Return_Date Real_Return_Date
    120 1 1002 作家1 Book1 2 2012-05-21 2012-06-04 2012-05-21

```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:29:11.313

我假设您想要所有图书贷款（类型 = 1），因此 ids 120 和 153 应该是单独的行。

以下查询采用给定贷款*后*图书的最短贷款日期：

```
select t.*,
       (select min(ReturnDate) from t t2 where t.bookid = t2.bookid and t2.id > t.id and t2.type = 0) as ReturnDate
from t
where type = 1 
```

这适用于您的数据，因为 131 和 134 具有相同的日期。在 MySQL 中获得下一次贷款之前的最长日期会复杂得多。

# java - Android通知避免不必要的通知更新

> ID：14024509
> 
> 赞同：2
> 
> 时间：2012-12-24T18:17:27.070
> 
> 标签：java, android, eclipse, notifications

我正在使用一项在后台每分钟调用一次的服务。它使用 HTTP 请求获取数据，然后通过通知通知用户有关数据的信息。问题是，如果通知包含上次已获取并显示的相同数据，我不希望创建通知。

我尝试设置静态变量并存储来自最新请求的数据以将其与最新获取的数据进行比较，并以此方式知道它是否相同以及在何处显示通知。

**这是我的一些通知代码的样子：**

```
Intent notificationIntent = new Intent(NotificationService.this, MainMenu.class);
PendingIntent contentIntent = PendingIntent.getActivity(NotificationService.this, NOTIFICATION_REQUESTS_KEY, notificationIntent, 0);
notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
notification.flags = Notification.FLAG_AUTO_CANCEL;
PowerManager powerManager = (PowerManager) getSystemService(POWER_SERVICE);;
if (!powerManager.isScreenOn())
{
       mWakeLock = powerManager.newWakeLock(PowerManager.FULL_WAKE_LOCK |PowerManager.ACQUIRE_CAUSES_WAKEUP |PowerManager.ON_AFTER_RELEASE, "NotificationWakeLock");
       mWakeLock.acquire(10000);
       WakeLock mWakeLockCPU = powerManager.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "NotificationCPUWakeLock");
       mWakeLockCPU.acquire(10000);
}
nm.notify(NOTIFICATION_REQUESTS_KEY, notification); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:35:20.300

将 contentText 保存在本地，每次从服务器获取数据时，在通知用户之前，请确保它是不同的 contentText。如果相同，请不要通知。

# c++ - 如何在 C++/CX Windows 8 应用程序中流式传输原始合成 PCM 音频？

> ID：14024513
> 
> 赞同：2
> 
> 时间：2012-12-24T18:18:26.500
> 
> 标签：c++, audio, windows-8, windows-runtime, c++-cx

简单地说，我希望我的 C++/CX XAML Windows 8 应用程序输出连续合成的声音（*不是*音效）。但是，我一直在寻找整个网络，但我无法弄清楚如何让系统向它提供 PCM 样本的缓冲区（或者更好的是，让它通过回调向我询问它们）以便播放它们。我会使用旧的`waveOut*`API，但是它们在商店应用程序开发中被禁止。

那么，最简​​单的方法是什么？请注意，我对播放媒体文件（.wav、.mp3）或网络音频流*不*感兴趣。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T21:58:01.210

您需要使用在 Windows 应用商店应用程序中启用的 WASAPI。[本文](http://msdn.microsoft.com/en-us/library/windows/desktop/dd316756%28v=vs.85%29.aspx)将让您开始了解如何使用 API 来呈现音频。一个烦恼是 WASAPI 设备通常不会为您重新采样，因此您必须愿意使用设备正在使用的设备（可能是 44.1kHz 或 48kHz）或自己进行重新采样（您可以使用[重采样器媒体基础转换](http://msdn.microsoft.com/en-gb/library/windows/desktop/ff819070%28v=vs.85%29.aspx)）。

# objective-c - 在 ipad 上运行应用程序时 [self.window makeKeyAndVisible] 出现 Sigabrt 错误？

> ID：14024515
> 
> 赞同：1
> 
> 时间：2012-12-24T18:18:27.953
> 
> 标签：objective-c, ipad, cocoa-touch, sigabrt

如果代码，我在以下几行中遇到错误。当我在 ipad 上运行应用程序时，会生成此错误，它在模拟器上运行良好。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

    // Override point for customization after application launch.
    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];

    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

请详细说明产生此错误的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:25:48.243

请检查目标...是否已设置，以及正确的。

还有一个建议，尝试采用 ARC。那会让你感觉ReeeelaaaaXXXX！！！

# c++ - Box2D C++ - 为什么除以 2？

> ID：14024520
> 
> 赞同：2
> 
> 时间：2012-12-24T18:18:57.923
> 
> 标签：c++, c, box2d

我在看一个基本的 Box2D 程序，更具体地说是[这个](http://veeableful.wordpress.com/2012/02/16/tutorial-getting-started-with-box2d/)。

一切都相当简单且有意义，除了这一行：

```
Shape.SetAsBox((32.f/2)/SCALE, (32.f/2)/SCALE);   // SCALE = 30 
```

现在我知道我们除以`SCALE`1m->30px 但为什么 32.f 除以 2？如果我的盒子纹理是 32x32 像素，我不明白为什么要除以 2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T18:25:39.463

从[手册](http://www.box2d.org/manual.html)：

> groundBox.SetAsBox(50.0f, 10.0f);
> 
> **SetAsBox 函数取半宽半高**（范围）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T18:25:51.380

这是因为盒子是围绕中心 (0,0) 创建的。

所以，

```
x = (32.f/2)/SCALE;
y = (32.f/2)/SCALE
SetAsBox(x,y); 
```

将在 (-x, -y), (-x, y), (x, -y), (x, y) 处创建具有角的框，因此它将具有预期的大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T18:26:32.093

如果您阅读手册第 2.2 节：http: [//www.box2d.org/manual.html#_Toc258082968](http://www.box2d.org/manual.html#_Toc258082968)

> SetAsBox 函数取半宽半高（范围）

考虑延伸（“每个方向 50 m”）而不是宽度（“100 m 宽”）。因此因子 2。

# ruby-on-rails-3 - Rails 缓存未正确更新

> ID：14024524
> 
> 赞同：0
> 
> 时间：2012-12-24T18:19:15.227
> 
> 标签：ruby-on-rails-3, caching

我正在使用 cache-digests gem 并按照 Railscast 的说明进行操作，它会按照您的预期创建和读取缓存，但缓存似乎没有相对于关联记录正确更新。

将列表从一个类别移动到另一个类别时，我将其**从**`category.live_entries`其中移出的类别的计数保持不变，但对于我将其移至的类别会增加。

 **所以听起来我需要一种`touch: all`类型方法，以便它触及我要移动它的那个以及它要移动到的那个？

_category.html.erb

```
<% cache category do %>
  <li>
  <%= link_to category.name, category %>
    <% if category.live_entries > 0 %>
        (<%= category.live_entries %>)
    <% end %>
      - <%= category.desc %>
  </li>
<% end %> 
```

类别.rb

```
class Category < ActiveRecord::Base
  has_many :listings

  def live_entries
    listings.where(verified: true).count
  end
end 
```

清单.rb

```
class Listing < ActiveRecord::Base
  belongs_to :category, touch: true 
```

关于如何解决这个问题的任何想法？

猜猜我可以创建一个 before_update 回调来触及旧类别 - 但有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:49:14.483

好的，只需将其添加为答案 - 但如果有人有更好的解决方案，请随时分享。

我刚刚添加了一个 after_update 来触及旧类别：

```
 def touch_old_category(listing)
    cat = listing.category_id_was
    Category.find(cat).touch if cat
  end 
```**

# javascript - Windows 应用商店应用程序 - WinJS：0x800a1391 - JavaScript 运行时错误：“Windows”未定义

> ID：14024526
> 
> 赞同：4
> 
> 时间：2012-12-24T18:19:53.030
> 
> 标签：javascript, html, windows-store-apps, winjs

我正在尝试将 Google 地图加载到 Windows Store 应用程序中。但是，本机 Windows RT 函数存在问题：Windows.UI.Popups.MessageDialog。我猜测 Windows 命名空间超出了范围，但我现在不知道如何将此函数放入一个可以使 Windows 命名空间可访问的范围内。任何帮助表示赞赏。

编辑：我对此想得越多，我就越认为这与我正在加载 map.html 作为 iFrame 的源这一事实有关。所以 map.html 的上下文是一个 iFrame，而不是 Windows Store App 页面。我猜 Windows 命名空间在 iFrame 中不可用？

来自 home.html：

```
 <iframe id="getLocationFrame" src="ms-appx-web:///pages/map/map.html" style="width:600px; height:600px;"></iframe> 
```

例外：

SCRIPT5009：ms-appx-web://76ad865e-25cf-485c-bc77-e18186bfd7ee/pages/map/map.js 0x800a1391 第 50 行第 17 列未处理的异常 - JavaScript 运行时错误：“Windows”未定义文件：map .js，行：50，列：17

地图.html：

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script type="text/javascript" src="//Microsoft.WinJS.1.0/js/base.js"></script>
    <script type="text/javascript" src="//Microsoft.WinJS.1.0/js/ui.js"></script>

    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?  sensor=false"></script>        
    <script type="text/javascript" src="map.js"></script>

    <link href="/pages/map/css/map.css" rel="stylesheet" />
    <link href="//Microsoft.WinJS.1.0/css/ui-light.css" rel="stylesheet" />
</head>
<body>
    <p>Click to get your location.</p>
    <button id="getLocation">Get Location</button><br/>
    <div id="mapcontainer"></div><br />
    <small>
        <a id="anchorLargerMap" href="" style="color:#0000FF;text-align:left" target="_blank">View Larger Map</a>
    </small>
</body>
</html> 
```

地图.js：

```
(function () {
"use strict";

WinJS.UI.Pages.define("/pages/map/map.html", {

    // This function is called whenever a user navigates to this page. It
    // populates the page elements with the app's data.
    ready: function (element, options) {
        //Button "getLocation" event handler
        function getLocationClickHandler(eventInfo) {
            var myOptions = {
                zoom: 13,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };

            var mapcontainer = document.getElementById("mapcontainer");
            var map = new google.maps.Map(mapcontainer, myOptions);

            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(locationSuccess, locationFail);
            }
        }

        var namespacePublicMembers = {
            locationSucessFunction: locationSuccess,
            locationFailFunction: locationFail,
            getLocationClickEventHandler: getLocationClickHandler
        };

        WinJS.Namespace.define("mapPage", namespacePublicMembers);
        var getLocationButton = document.getElementById("getLocation");
        getLocationButton.addEventListener("click", getLocationClickHandler, false);

        function locationSuccess(position) {
            var initialLocation = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
            map.setCenter(initialLocation);
            var marker = new google.maps.Marker({
                position: initialLocation,
                map: map,
                title: "You are here."
            });

            var latitude = position.coords.latitude;
            var longitude = position.coords.longitude;
            var url = "http://maps.google.com/maps?q=" + latitude + "," + longitude + "&zoom=13&markers=" + latitude + "," + longitude;
            $("#anchorLargerMap").attr('href', url);
        }

        function locationFail() {
            var md = new Windows.UI.Popups.MessageDialog("Could not find you!", "").showAsync;  -- ********* THIS LINE THROWS EXCEPTION *********
        }
    }
});
})(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T21:42:42.207

在 Web 隔间中执行的代码（您的 URL 表明该代码所在的位置）无法访问 WinRT 组件。您需要使用 postMessage 等在两个安全上下文之间进行通信。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T15:13:46.453

来自 Map.js：

```
 function locationFail() {
            //Can't do this due the the iFrame container
            //var md = new Windows.UI.Popups.MessageDialog("Could not find you!", "").showAsync;
            window.parent.postMessage("Could not find you!", "*");
        } 
```

来自 Home.js：

```
(function () {
"use strict";

WinJS.UI.Pages.define("/pages/home/home.html", {
    // This function is called whenever a user navigates to this page. It
    // populates the page elements with the app's data.
    ready: function (element, options) {

        window.addEventListener("message", messageReceived, false);

        function messageReceived(e) {
            if (e.origin === "ms-appx-web://76ad865e-25cf-485c-bc77-e18186bfd7ee") {
                var md = new Windows.UI.Popups.MessageDialog(e.data, "");
                md.showAsync();
            }
        };
    }
});
})(); 
```

我从这个博客得到了解决方案：http: [//css.dzone.com/articles/use-winjs-post-message-iframe](http://css.dzone.com/articles/use-winjs-post-message-iframe)

# c - 计算#includes和#define的数量

> ID：14024527
> 
> 赞同：-1
> 
> 时间：2012-12-24T18:19:55.477
> 
> 标签：c, include, c-preprocessor, conditional-compilation

我想使用**C**程序来查找指令的总数，如`#include`, `#define`, `#ifdef`,`#typedef`等。你能建议任何逻辑吗？我对使用任何脚本或工具不感兴趣。我希望它完全使用**C**程序来完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T18:25:18.633

假设您不想解析它们，或任何其他类型的句法/语义分析，您可以简单地计算以 0 个或多个空格字符开头的行数，然后是一个`#`字符（经过简单测试，应该可以正常工作）：

```
#include <stdio.h>
#include <ctype.h>

int main(int argc, char *argv[])
{
    FILE *f = fopen(argv[1], "r");
    char line[1024];
    unsigned ncppdirs = 0;

    while (feof(f) == 0) {
        fgets(line, sizeof(line), f);

        char *p = line;
        while (isspace(*p))
            p++;

        if (*p == '#') ncppdirs++;
    }

    printf("%u preprocessor directives found\n", ncppdirs);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T18:29:00.033

将[**所有指令**](http://gcc.gnu.org/onlinedocs/cpp/Index-of-Directives.html#Index-of-Directives)存储在指针数组（或数组）中。

逐行读取 C 文件并检查第一个单词是否以列表中的任何指令开头，不包括开头的任何空格。

```
char *directives[]={"#assert", "#define#, ......};

int count[NUM_DIRS]= { 0 }; 
```

每次找到匹配项时，都会增加`count`数组的对应索引。您还可以维护另一个计数器`total`以避免在`count`数组中添加值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T18:29:39.677

您可能会利用`gcc -H`向您显示每个包含文件的优势，然后您可以`popen`使用该命令，并（简单地）解析其输出。

您还可以解析由`gcc -C -E`;给出的预处理输出。它包含行信息 - 作为以开头的行`#`

仅按词法计算 of 的出现`#include`是不够的，因为`<features.h>`某些包含的文件确实会发生类似

```
 #if SOME_SYMBOL > 2
  #include "some-internal-header.h"
  #define SOME_OTHER_SYMBOL (SOME_SYMBOL+1)
  #endif 
```

and some later include would have `#if SOME_OTHER_SYMBOL > 4`

And the compilation command might BTW define `SOME_SYMBOL` with e.g. `gcc -DSOME_SYMBOL=3` (and such tricks happen a lot, often in `Makefile`-s, and just optimizing with `-O2` makes `__OPTIMIZE__` a preprocessor defined symbol).

If you want some more deep information about source programs, consider making GCC plugins or extensions, e.g. with [MELT](http://gcc-melt.org/) (a domain specific language to extend GCC). For instance, counting Gimple instructions in the intermediate representation is more sensible than counting lines of code.

Also, some macros might do some `typedef`; some programs may have

```
 #define MYSTRUCTYPE(Name) typedef struct Name##_st Name##_t; 
```

and later use e.g. `MYSTRUCTYPE(point)`; what does that mean about counting `typedef`-s?

# php - 带有 DATE_ADD 的 PHP 不起作用

> ID：14024530
> 
> 赞同：-1
> 
> 时间：2012-12-24T18:20:12.640
> 
> 标签：php

感谢所有给我一些建议和答案的人。由于我对此很陌生，因此我必须为一些糟糕的问题和技术术语道歉。我决定使用 DREAMWEAVER 来完成这项工作，但仍然存在一些问题。这些是我所做的更改：

1.将'expiry_date'字段更改为NULL，因为当我提交带有'NOT NULL'的表单时，它没有通过（`expiry_date`DATE NULL，）。

2.这是我的代码

```
if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "form1")) 
{
    $template = "INSERT INTO expirydate_table "
              . "(firstname, lastname, email, password, "
              . "signup_date, expiry_date) "
              . "VALUES (%s, %s, %s, %s, %s, %s)";

    $insertSQL = sprintf(
        $template,
        GetSQLValueString($_POST['firstname'], "text"),
        GetSQLValueString($_POST['lastname'], "text"),
        GetSQLValueString($_POST['email'], "text"),
        GetSQLValueString($_POST['password'], "text"),
        GetSQLValueString($_POST['signup_date'], "date"),
        GetSQLValueString($_POST['expiry_date'], "date")
    ); 
```

3.“signup_date”和“expiry_date”隐藏文件的表格

```
<input type="hidden" name="signup_date" value="<?php echo $row_RecRegister3['NOW()']; ?>">
<input type="hidden" name="expiry_date" value="<?php echo $row_RecRegister3['DATE_ADD(NOW() , INTERVAL 30 DAY))']; ?>">
<input type="hidden" name="MM_insert" value="form1"> 
```

结果：

1.  我可以提交表单并`signup_date`在数据库中显示。
2.  `expiry_date`没有显示任何数据。

问题：

1.  是否有任何功能可以使其工作或替换 'DATE_ADD(NOW(), INTERVAL 30 DAY)'？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:41:07.633

根据你上面的例子：

*   您的表单用作 signup_date = `NOW()`（MySQL 函数），有效期为 30 天后。
*   您的 PHP 代码片段是为 MySQL 创建插入语句的代码片段。

您无需通过表单发送注册日期和到期日期。您所要做的就是在您的插入语句中设置它。

所以你的表格将是：

```
<input type="hidden" name="MM_insert" value="form1"> 
```

和你的 PHP

```
if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "form1")) 
{
    $template = "INSERT INTO expirydate_table "
              . "(firstname, lastname, email, password, "
              . "signup_date, expiry_date) "
              . "VALUES (%s, %s, %s, %s, %s, %s)";

    $now     = new DateTime();
    $signup  = $now->format('Y-m-d H:i:s');
    $future  = $now->add(new DateInterval('P30D'));
    $expiry  = $future->format('Y-m-d H:i:s');

    $insertSQL = sprintf(
        $template,
        GetSQLValueString($_POST['firstname'], "text"),
        GetSQLValueString($_POST['lastname'], "text"),
        GetSQLValueString($_POST['email'], "text"),
        GetSQLValueString($_POST['password'], "text"),
        $signup,
        $expiry
    );
} 
```

# javascript - 将JS数组传递到没有PHP的另一个页面

> ID：14024533
> 
> 赞同：1
> 
> 时间：2012-12-24T18:20:42.950
> 
> 标签：javascript, jquery

我有一些数据存储在一个 JavaScript 数组中，我想发送到其他页面。是否可以在不使用任何服务器端脚本（如 PHP）的情况下做到这一点？可以用 JS 或 jQuery 或类似的东西来完成吗？理想情况下，我希望能够在另一个页面上的 JS 脚本中访问该数组。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T18:25:09.613

您可以使用将 Array/Objects 序列化为字符串

`JSON.stringify`

所以如果你有一个像

```
var arr = [1,2,3,4]
JSON.stringify(arr) // "[1,2,3,4]" 
```

然后使用 GET 参数将其传递给您的其他页面

您可以在其中使用类似这样的东西来访问它

```
function get(q,s) { 
        s |= window.location.search; 
        var re = new RegExp('&'+q+'(?:=([^&]*))?(?=&|$)','i'); 
        return (s=s.replace(/^\?/,'&').match(re)) ? (typeof s[1] == 'undefined' ? '' :     decodeURIComponent(s[1])) : undefined; 
    } 
```

如果你的网址是`www.example.com/?arr="[1,2,3]"`

`get("arr")`

会回来

`"[1,2,3]"`

当然，您也可以将此字符串存储在 a`Cookie`或`localStorage` Object 中（*仅现代浏览器支持*）

然后你可以使用

`JSON.parse`

```
var arr = JSON.parse("[1,2,3,4]");
arr // [1, 2, 3, 4] 
```

# java - 如何修改此示例代码以显示在 BlackBerry 中更新 UI 的三种方法之间的差异

> ID：14024539
> 
> 赞同：7
> 
> 时间：2012-12-24T18:21:08.177
> 
> 标签：java, multithreading, blackberry

我试图了解管理 UI 交互的三种方法之间的区别。

在尝试在真实案例中弄清楚这三个术语时，我真的很困惑。

下面的代码显示了 invokeAndWait 方法的功能，但如果我用 invokeLater 或 getEventLock() 替换它，程序将以完全相同的方式工作。

有人可以修改代码以显示更新 UI 的三种方法之间的差异吗？

```
public final class HelloWorldMainScreen extends MainScreen
{
    private LabelField labelField;
    public HelloWorldMainScreen()
    {        
        labelField = new LabelField("Hello World");       
        add(labelField);
        MainScreenUpdaterThread thread = new MainScreenUpdaterThread(this);
        thread.start();
    }

    public void appendLabelText(String text){
        labelField.setText(labelField.getText()+"\n"+text);
    }
}

public class MainScreenUpdaterThread extends Thread {
    HelloWorldMainScreen mainScreen;

    public MainScreenUpdaterThread(HelloWorldMainScreen mainScreen){
        this.mainScreen = mainScreen;
    }

    public void run(){
        for (int i = 0; i < 10; i++) {
            try{
                Thread.sleep(5000);
            }catch(InterruptedException ex){};
            UiApplication.getUiApplication().invokeAndWait(new Runnable() {

                public void run() {
                    mainScreen.appendLabelText("Update");                   
                }
            });
        }
    }
} 
```

这三个概念对于许多初学者来说非常混乱，因此任何描述其功能的解释性源代码对任何人都将非常有帮助，我认为。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T20:30:04.653

我对三种不同方法的理解：

*   `Application.getEventLock()`- 尽快获得事件锁
*   `UiApplication.invokeLater()`- 放入`Runnable`事件队列，它将在之前放入此队列的所有其他任务之后执行
*   `UiApplication.invokeAndWait()`- 与前一个相同，除了调用线程将停止，直到`Runnable`将运行

我个人的意见是从不使用第一种方法。我不认为我的任何绘制或 UI 更改任务比其他已放入事件队列的任务更优先。

我主要使用第二种方法，当我实现一些模态弹出对话框选择时，我使用了最后一种方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T17:49:40.553

**getEventLock()**：获取应用程序用户界面事件锁。如果工作线程希望执行使用事件线程序列化的代码，则应在此线程上同步。您的工作线程应该只在短时间内持有锁，因为此操作会暂停线程调度程序。

任何涉及设备用户界面的操作都必须在保持锁定的情况下完成。UI 系统还保证它调用的任何方法都将在已经拥有锁的线程上执行。

应用程序永远不应调用 notify 或等待此对象。

**invokeLater()**：将可运行对象放入此应用程序的事件队列。调用此方法，传递一个可运行对象，以便在处理完所有未决事件后，在调度线程上调用该对象的 run() 方法。

如果没有事件分派线程（即 hasEventThread() 返回 false），则当队列超过其大小限制时，将丢弃要排队的最后一项。注意：如果应用程序没有事件线程，您可以调用 setAcceptEvents(boolean) 来通知运行时系统该应用程序不再接受事件。然后丢弃该应用程序排队的所有事件。

**invokeAndWait()**：将可运行对象放入此应用程序的事件队列中，并等待它被处理。调用此方法，传递一个可运行对象，以便在处理完所有未决事件后，在调度线程上调用该对象的 run() 方法。

此方法阻塞，直到插入事件被处理（即，直到可运行对象的 run() 方法返回）。

在事件分派线程上调用此方法是安全的。在这种情况下，runnable 将立即执行。

如果没有事件分派线程（即 hasEventThread() 返回 false），则当队列超过其大小限制时，将丢弃要排队的最后一项。注意：如果应用程序没有事件线程，您可以调用 setAcceptEvents(boolean) 来通知运行时系统该应用程序不再接受事件。然后丢弃该应用程序排队的所有事件。

API 文档：[http](http://www.blackberry.com/developers/docs/4.3.0api/net/rim/device/api/system/Application.html#invokeLater(java.lang.Runnable) ://www.blackberry.com/developers/docs/4.3.0api/net/rim/device/api/system/Application.html#invokeLater(java.lang.Runnable )

# jquery - Google Maps API v3 地理编码企业名称

> ID：14024540
> 
> 赞同：3
> 
> 时间：2012-12-24T18:21:12.217
> 
> 标签：jquery, google-maps-api-3, geocoding

是否可以使用企业名称而不是确切的街道地址进行地理编码？以下地理编码请求返回 0 个结果。我希望能够发送企业名称、城市和州并检索纬度和经度。这是我到目前为止所拥有的：

```
var business = "Neighborhood Theatre, Charlotte, NC 28205";
geocoder.geocode({'address' : business, 'region' : 'us'}, function(results, status) {
    console.log(status);
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T01:09:00.593

不，[地理编码专门针对邮政地址。](https://developers.google.com/maps/documentation/javascript/geocoding)

> 地理编码是将地址（如“1600 Amphitheatre Parkway, Mountain View, CA”）转换为地理坐标（如纬度 37.423021 和经度 -122.083739）的过程，

要对商家名称进行地理定位，您需要使用[Places API之类的东西](https://developers.google.com/maps/documentation/javascript/places)

> Google Places JavaScript 库的函数使您的应用程序能够搜索包含在定义区域内（例如地图边界或固定点周围）的 Places（在此 API 中定义为场所、地理位置或突出的兴趣点）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T18:25:07.073

这更适合 gis.stackexchange.com，但无论如何，请查看 google 位置。地理编码以地址为中心，而 google places API 以商业等感兴趣的地方为中心。

# android - onClickActionListener Android

> ID：14024542
> 
> 赞同：1
> 
> 时间：2012-12-24T18:21:44.003
> 
> 标签：android, onclicklistener

这是我在 Android 上的代码我在 Android 上相当新，这是我的`onClick`方法。每当我运行这个应用程序，然后单击按钮。它说“WordCounterApp 已停止工作”。这个应用程序用于计算用户估算了多少单词，有人可以帮忙吗？

```
package com.example.wordcountapp;

public class MainActivity extends Activity {
    private TextView textView2;
    private Button button1;
    private EditText editText1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        textView2 = (TextView) findViewById(R.id.textView2);
        button1 = (Button) findViewById(R.id.button1);
        editText1 = (EditText) findViewById(R.id.editText1);

        button1.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                String str = editText1.getText().toString();
                String input = str; 
                int wordCount =  -1;
                String array[] = input.trim().split(" ");
                if( "".equals(input) ||
                    "\n".equals(input)) {
                    wordCount = 0;
                }
                else{
                    wordCount = array.length;
                }
                textView2.setText(wordCount);   
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T18:22:39.430

采用

```
 textView2.setText(""+wordCount); 
```

**或者**

```
 textView2.setText(String.valueOf(wordCount)); 
```

代替

```
 textView2.setText(wordCount); 
```

因为您不能将 Int 直接设置为 TextView 您需要先将其转换为 String

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T18:23:41.330

您不能将文本视图的值设置为 int，而不是`textview.setText(wordCount)`使用`textview.setText(Integer.toString(wordCount);`

# string - MATLAB：将字符串组合转换为一个

> ID：14024543
> 
> 赞同：0
> 
> 时间：2012-12-24T18:21:45.383
> 
> 标签：string, matlab, matrix, element

假设我有

```
a = [ 'i=' num2str(0)]

a = 
   i=0 
```

和

```
A = zeros(2);
B = num2str(A)

B = 
   0 0
   0 0 
```

这`i=0`被认为是一个`1x3`矩阵：`[ i, =, 0]`。现在如何将其转换为一个元素以便我可以替换`B(1,1)`为`i=0`？我想得到

```
B = 

 i=0    0
   0    0 
```

（这就是我转换`A`成字符串的原因。）

我不断收到此错误：

```
Assignment has more non-singleton rhs dimensions than non-singleton 
```

下标

我怀疑这是由于`a`' 尺寸。

我试过`strcat(a)`了，还有其他一些方法。

## 编辑：

其背后的动机是我尝试在执行循环时将标签放入矩阵中。

这是我的代码的最后一部分：

```
n5 = length(X(1, :));
n6 = length(X(:, 1)) + 1;

Y = zeros(n6, n5);
Y(2:n6, :) = X;
Z = num2str(Y, 4);
for i = 0:K
a = ['i=' num2str(i)];
Z(1,i+1) = a;
end

X = Z

end 
```

我希望输出显示：

```
 i=0      i=1    ...     i=K

1.0022   1.0000    ...  1.0000
2.0081   2.0000    ...  2.0000
4.0011   4.0000    ...  4.0000
3.9811   4.0000    ...  4.0000 
```

我知道我们可以用另一种方式格式化输出，但不能循环。我想使用循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T08:09:42.257

采取2：我发现很难找到一种方法将字符串（...）和数字存储在**矩阵中。**`i=0`我会推荐使用单元阵列

```
sz = size( X );
Z(2,:) = mat2cell( X, sz(1), ones(1,sz(2)) ); % convert each column of X into cell
Z(1,:) = arrayfun( @(x) sprintf('i=%d',x), 0:(sz(2)-1), 'uni', false ); 
```

生成的单元格数组`Z`的大小`2x(n5)`如下所示：

```
 `'i=0'           'i=1'           'i=2'           'i=3'           'i=4'

    [5x1 double]    [5x1 double]    [5x1 double]    [5x1 double]    [5x1 double]` 
```

``Z{2,ii}`矩阵的`ii`第 - 列 在哪里`X`。`

# python - Python - 是否有类似于 list.index() 的函数不受列表中重复值的影响？

> ID：14024544
> 
> 赞同：0
> 
> 时间：2012-12-24T18:21:45.167
> 
> 标签：python, list, function, python-2.7

`list.index()`将为您提供该值第一次显示在列表中的索引，但我正在寻找一种方法来返回该特定项目的索引，无论它是否重复，例如，如果要像这样使用它所以：

```
lst = [1,4,5,1,4]

for i in lst:
    lst.something(i) 
```

会回来

```
0
1
2
3
4 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T18:24:26.447

你在找[`enumerate`](http://docs.python.org/3/library/functions.html?highlight=enumerate#enumerate)吗？

```
>>> lst = [1,4,5,1,4]
>>> for index, elm in enumerate(lst):
...  print index, elm
...
0 1
1 4
2 5
3 1
4 4
>>> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T18:30:22.887

不，不可能`lst.something(1)`知道是返回 0 还是 3，具体取决于调用它的 1。`int`是原始类型，因此 any`1`与 another 相同`1`。

作为证明，您可以使用`is`运算符：

```
lst = [1, 4, 5, 1, 4]
print lst[0] is lst[3]
# True 
```

因此，当调用假设函数时，无论您如何调用它`lst.something(1)`，它都不会知道您的意思。`1`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T18:24:49.980

使用枚举

```
for i,_ in enumerate(listt):
    print i 
```

# mysql - 参数化的 MySQL 插入命令不起作用

> ID：14024549
> 
> 赞同：0
> 
> 时间：2012-12-24T18:22:49.207
> 
> 标签：mysql, vb.net

我试图自己参数化我的代码，我想我可能已经破坏了它。现在我可以让我的应用程序将记录插入到我的数据库中。任何人都可以查看此代码并告诉我我缺少什么吗？

编辑：我修改了我的代码，按照建议删除了 dbCmd.Dispose() 和 dbConn.Close() 方法。现在VB在调试@ dbCmd.ExecuteNonQuery() 行期间抛出以下异常：

> 列计数与第 1 行的值计数不匹配

**这是我的代码：**

```
 Private Sub addCard()
    Dim ConnectionString As String = String.Format("Server={0};Port={1};Uid={2};Password={3};Database=accounting", FormLogin.ComboBoxServerIP.SelectedItem, My.Settings.DB_Port, My.Settings.DB_UserID, My.Settings.DB_Password)
    Using dbConn As New MySqlConnection(ConnectionString)
        dbConn.Open()
        'PERFORM CARD ENCRYPTION
        Call encryptCard()

        'PERFORM DATABASE SUBMISSION
        Dim dbQuery As String = "INSERT INTO cc_master (ccType, cardholderFirstname, cardholderLastname, cardholderSalutation, ccLocation, " & _
                                 "ccNumber, ccExpireMonth, ccExpireYear, ccZipcode, ccCode, ccAuthorizedUseStart, ccAuthorizedUseEnd, " & _
                                 "dateAdded, addedBy, customer_accountNumber)" & _
                                 "VALUES(@ccType, @cardholderFirstname, @cardholderLastname, @cardholderSalutation, @ccLocation, " & _
                                 "@ccNumber, @ccExpireMonth, @ccExpireYear, @ccZipcode, @ccCode, @ccAuthorizedUseStart, @ccAuthorizedUseEnd " & _
                                 "@dateAdded, @addedBy, @accountNumber)"

        Using dbCmd As New MySqlCommand
            With dbCmd
                .Connection = dbConn
                .CommandType = CommandType.Text
                .CommandText = dbQuery
                .Parameters.AddWithValue("@ccType", ComboBoxCardType.Text)
                .Parameters.AddWithValue("@cardholderFirstname", TextBoxFirstName.Text)
                .Parameters.AddWithValue("@cardholderLastname", TextBoxLastName.Text)
                .Parameters.AddWithValue("@cardholderSalutation", ComboBoxSalutation.Text)
                .Parameters.AddWithValue("@ccLocation", TextBoxLocation.Text)
                .Parameters.AddWithValue("@ccNumber", encryptedCard)
                .Parameters.AddWithValue("@ccExpireMonth", TextBoxExpireMonth.Text)
                .Parameters.AddWithValue("@ccExpireYear", TextBoxExpireYear.Text)
                .Parameters.AddWithValue("@ccZipcode", TextBoxZipCode.Text)
                .Parameters.AddWithValue("@ccCode", TextBoxCVV2.Text)
                .Parameters.AddWithValue("@ccAuthorizedUseStart", Format(DateTimePickerStartDate.Value, "yyyy-MM-dd HH:MM:ss"))
                .Parameters.AddWithValue("@ccAuthorizedUseEnd", Format(DateTimePickerEndDate.Value, "yyyy-MM-dd HH:MM:ss"))
                .Parameters.AddWithValue("@dateAdded", Format(DateTime.Now, "yyyy-MM-dd HH:MM:ss"))
                .Parameters.AddWithValue("@addedBy", FormLogin.TextBoxUsername.Text)
                .Parameters.AddWithValue("@accountNumber", TextBoxAccount.Text)
            End With
            Try
                Dim affectedRow As Integer
                affectedRow = dbCmd.ExecuteNonQuery()
                If affectedRow > 0 Then
                    MsgBox("Credit/Debit Card Information Saved SUCCESSFULLY!", MsgBoxStyle.Information, "RECORD SAVED")
                    ButtonReset.PerformClick()
                Else
                    MsgBox("Payment Card Was Not Added!", MsgBoxStyle.Critical, "ATTENTION")
                End If
            Catch ex As Exception
                MessageBox.Show("A DATABASE ERROR HAS OCCURED" & vbCrLf & vbCrLf & ex.Message & vbCrLf & _
                                    vbCrLf + "Please report this to the IT/Systems Helpdesk at Ext 131.")
            End Try
            dbCmd.Dispose()
        End Using
    End Using
    dbConn.Close()

End Sub 
```

**修改后的代码 - 现在抛出异常：**

```
 Private Sub addCard()
    Dim ConnectionString As String = String.Format("Server={0};Port={1};Uid={2};Password={3};Database=accounting", FormLogin.ComboBoxServerIP.SelectedItem, My.Settings.DB_Port, My.Settings.DB_UserID, My.Settings.DB_Password)
    Using dbConn As New MySqlConnection(ConnectionString)
        'PERFORM CARD ENCRYPTION
        Call encryptCard()

        'PERFORM DATABASE SUBMISSION
        Dim dbQuery As String = "INSERT INTO cc_master (ccType, cardholderFirstname, cardholderLastname, cardholderSalutation, ccLocation, " & _
                                 "ccNumber, ccExpireMonth, ccExpireYear, ccZipcode, ccCode, ccAuthorizedUseStart, ccAuthorizedUseEnd, " & _
                                 "dateAdded, addedBy, customer_accountNumber)" & _
                                 "VALUES(@ccType, @cardholderFirstname, @cardholderLastname, @cardholderSalutation, @ccLocation, " & _
                                 "@ccNumber, @ccExpireMonth, @ccExpireYear, @ccZipcode, @ccCode, @ccAuthorizedUseStart, @ccAuthorizedUseEnd " & _
                                 "@dateAdded, @addedBy, @accountNumber)"

        Using dbCmd As New MySqlCommand
            With dbCmd
                .Connection = dbConn
                .CommandType = CommandType.Text
                .CommandText = dbQuery
                .Parameters.AddWithValue("@ccType", ComboBoxCardType.Text)
                .Parameters.AddWithValue("@cardholderFirstname", TextBoxFirstName.Text)
                .Parameters.AddWithValue("@cardholderLastname", TextBoxLastName.Text)
                .Parameters.AddWithValue("@cardholderSalutation", ComboBoxSalutation.Text)
                .Parameters.AddWithValue("@ccLocation", TextBoxLocation.Text)
                .Parameters.AddWithValue("@ccNumber", encryptedCard)
                .Parameters.AddWithValue("@ccExpireMonth", TextBoxExpireMonth.Text)
                .Parameters.AddWithValue("@ccExpireYear", TextBoxExpireYear.Text)
                .Parameters.AddWithValue("@ccZipcode", TextBoxZipCode.Text)
                .Parameters.AddWithValue("@ccCode", TextBoxCVV2.Text)
                .Parameters.AddWithValue("@ccAuthorizedUseStart", Format(DateTimePickerStartDate.Value, "yyyy-MM-dd HH:MM:ss"))
                .Parameters.AddWithValue("@ccAuthorizedUseEnd", Format(DateTimePickerEndDate.Value, "yyyy-MM-dd HH:MM:ss"))
                .Parameters.AddWithValue("@dateAdded", Format(DateTime.Now, "yyyy-MM-dd HH:MM:ss"))
                .Parameters.AddWithValue("@addedBy", FormLogin.TextBoxUsername.Text)
                .Parameters.AddWithValue("@accountNumber", TextBoxAccount.Text)
            End With
            Try
                dbConn.Open()
                dbCmd.ExecuteNonQuery()
                Dim affectedRow As Integer
                affectedRow = dbCmd.ExecuteNonQuery()
                If affectedRow > 0 Then
                    MsgBox("Credit/Debit Card Information Saved SUCCESSFULLY!", MsgBoxStyle.Information, "RECORD SAVED")
                    ButtonReset.PerformClick()
                Else
                    MsgBox("Payment Card Was Not Added!", MsgBoxStyle.Critical, "ATTENTION")
                End If
            Catch ex As Exception
                MessageBox.Show("A DATABASE ERROR HAS OCCURED" & vbCrLf & vbCrLf & ex.Message & vbCrLf & _
                                    vbCrLf + "Please report this to the IT/Systems Helpdesk at Ext 131.")
            End Try
        End Using
    End Using
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T20:57:33.870

我想出了解决问题的办法。我在查询中的@ccAuthorizedUseEnd 末尾缺少一个逗号。我添加了它和中提琴，错误消失了，查询现在可以工作了。

谢谢。

# github - 如何从 GitHub Pages 的自动生成器获取多页站点？

> ID：14024552
> 
> 赞同：33
> 
> 时间：2012-12-24T18:23:02.443
> 
> 标签：github, markdown, documentation-generation, github-pages

我正在使用 GitHub Pages 的“自动生成器”，我看到它只生成一个 index.html 和其他网络资源。

如果我想从其他 Markdown 文件生成多页网站，它是如何工作的？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-05-02T17:34:20.100

通过确保 .markdown 的顶部以 ---- 块开头，您可以让 github 从 .markdown 文件生成 .html 文件，如下所示：

```
---
title: This will be used as the title-tag of the page head
---

hello
=====

**You are here!** 
```

在这里找到这个：http: [//xlson.com/2010/11/09/getting-started-with-github-pages.html](http://xlson.com/2010/11/09/getting-started-with-github-pages.html)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-02-07T21:08:16.087

如果您包含 markdown 文件，Github 会自动为您创建页面。

*   index.html -`yourname.github.io/project-name/`
*   关于.md -`yourname.github.io/project-name/about`
*   foo.md -`yourname.github.io/project-name/foo`

对此进行了测试并可以正常工作。

如果你想进入真正有趣的东西 - 你需要进入 Jekyll [http://jekyllrb.com/](http://jekyllrb.com/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-24T18:29:51.640

您拉取生成的页面，进行任何您喜欢的修改和添加（包括添加新页面和页面之间的链接），然后提交并推送。

生成的单页帮助您开始。您可以复制其布局以手动生成其他外观相似的页面。

~~请参阅[帮助](https://help.github.com/articles/creating-pages-with-the-automatic-generator)。~~

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-05-26T16:02:15.603

Github Pages 使用[Jekyll 站点生成器](http://jekyllrb.com)，它支持将任意数量的 markdown 文件转换为 HTML，并通过布局文件应用周围的模板。参见 github 关于使用 Jekyll 的文档：[https ://help.github.com/articles/using-jekyll-with-pages](https://help.github.com/articles/using-jekyll-with-pages)

诀窍是您必须[下载一个 jekyll 模板/主题](http://jekyllthemes.org/)并将其包含在您自己的 gh-pages 分支中（标准 jekyll 配置），而不是仅仅允许 Github Pages 使用它自己的内置文件自动生成一个文件主题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-02-27T10:24:12.937

*   GitHub Pages 的自动生成器只生成一个页面。
*   您可以**直接添加新文件**，github页面会为您发布所有数据（包括子文件夹内的数据）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-16T21:22:32.580

刚刚制作了[gh-pages-generator](https://github.com/epoberezkin/gh-pages-generator) - 用于从多个具有相互链接的降价文件导航生成站点的实用程序。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-23T06:02:16.830

“Github pages”将 index.md / readme.md 中的网页作为主页。但是，如果您有一个 index.html 文件，那么它将从 html 文件托管。但是，如果您尝试使用“Jekyll 主题”托管一个多页面网站，那么 Jekyll 主题不会直接部署在辅助页面中。

案例 1）您正在使用降价来托管您的页面 index.md -> 主页 page1.md -> 您网站的第 1 页 .. 依此类推

要使用 github 页面生成多页网站，只需给出**所需页面的相对路径，无需扩展名，**即制作一个按钮

```
<a href="./page1">Go to next page</a> 
```

通过单击此按钮，您将被定向到**部署了 jekyll 主题的 page1**

# iphone - iPhone 推送通知服务器在 C# 中运行以在 Windows 上运行

> ID：14024553
> 
> 赞同：-4
> 
> 时间：2012-12-24T18:23:04.943
> 
> 标签：iphone, .net, windows, notifications, push

我希望在使用 C# 编写的 Windows 上运行推送通知服务。有没有可能的指导方针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:25:04.717

简单的谷歌搜索向我展示了这个似乎涵盖所有内容的[教程。](http://arashnorouzi.wordpress.com/2011/03/31/sending-apple-push-notifications-in-asp-net-part-1/)

# c# - 将文本属性随机分配给 C# Windows 商店应用程序中的文本块

> ID：14024556
> 
> 赞同：0
> 
> 时间：2012-12-24T18:23:27.343
> 
> 标签：c#, windows-store-apps

我为 50 个文本块分配了名称`_1, _2,_3,....,_50`，并设法使用 for 循环将名称存储在一个数组中。像这样：

```
string[] textname = new string[51];
for(int i = 1; i <= 50; i++)
{
     textname[i] = "_" + i.ToString();
} 
```

但我想将文本属性分配给字符串数组中名称为文本块的文本块。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T06:02:37.403

我认为从代码中引用控件不是一个好主意。我建议另一种（MVVM）方法。

由于您通过索引访问文本块，我想它们显示在列表中。这意味着您可以在 XAML 中将它们创建为`ItemsControl`：

```
<ItemsControl ItemsSource="{Binding Strings}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding}" />
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

`Strings`您绑定的属性应该是一个`ObservableCollection`，以便 UI 将收到任何更改的通知：

```
public class ViewModel
{
    private string _path;

    public ViewModel()
    {
        Strings = new ObservableCollection<string>();

        for (int i = 0; i < 50; i++)
        {
            Strings.Add("Value " + i);
        }
    }

    public ObservableCollection<string> Strings { get; set; }
} 
```

在页面内您需要设置`ViewModel`为`DataContext`：

```
DataContext = new ViewModel(); 
```

您可以直接在`Strings`集合中修改值：

```
viewModel.Strings[12] = "NewValue"; 
```

如果由于某种原因您需要在页面上单独排列文本块，您也可以这样做并绑定到集合中的正确索引：

```
<TextBlock Text="{Binding Strings[12]}" /> 
```

但是在这种情况下，拥有单独的命名属性而不是在集合中索引它们会更有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:57:29.350

虽然其他答案指出您的方法可能不合适，但我发现仍然有必要向您解释如何实际做您想要完成的事情。您需要使用[反射](http://msdn.microsoft.com/en-us/library/hh535795.aspx)按名称访问属性。请注意，我给您的示例特定于**Windows 应用商店应用程序**，因为它与其他项目类型略有不同。

```
IEnumerable<PropertyInfo> properties = this.GetType().GetRuntimeProperties();
var textbox = properties.Single(prop =>
    String.Equals(prop.Name, "_1", StringComparison.OrdinalIgnoreCase))
    .GetValue() as TextBox;

if (textbox != null)
{
    var originalValue = textbox.Text;

    textbox.Text = "new value";
} 
```

* * *

请注意，您可以将**“_1”**替换为属性名称的任何字符串值以获得适当的值。我还`Single(...)`通过假设您将始终具有匹配的属性名称来使用 LINQ 方法，您的要求可能会有所不同。我还应该指出，虽然这是一个解决方案，但最好重新考虑您的设计，这样您就不必使用反射来访问属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T19:14:41.270

现在你只有一个字符串数组，你需要的是一个`TextBlocks`.

```
List<TextBlock> list = new List<TextBlock>();
for (int i = 0; i < 50; i ++)
{
list.Add(new TextBlock() {Text = "something you want to put here", Tag = "_" + i});
} 
```

或者如果你真的想使用一个数组：

```
TextBlock[] arr= new TextBlock[51];
for (int i = 0; i <= 50; i ++)
{
arr[i] = new TextBlock() {Text = "something you want to put here", Tag = "_" + i});
} 
```

# sql - MS-Access 组合框控件源

> ID：14024557
> 
> 赞同：1
> 
> 时间：2012-12-24T18:23:27.990
> 
> 标签：sql, ms-access-2003

是否可以在组合框的控制源中使用 IIf 语句？我有一个组合框，如果它们的位置类似于“Ops”，我想从关联表中提取一系列名称。这是我在组合框的控制源中尝试过的。

```
=IIf(Roster!Position Like "Ops*",Roster!Last,"") 
```

我很确定这是可能的，我做错了什么？

基于 HansUp 反馈的模组

用于查询的 SQL

```
SELECT Roster.Last
FROM Roster
WHERE (((Roster.Position) Like "Ops*"))
GROUP BY Roster.Last; 
```

组合框：主管

```
Control Source
=Supervisor!Last 
```

仍然不返回任何数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T18:37:48.917

*我有一个组合框，如果它们的位置类似于“Ops”，我想从关联表中提取一系列名称。*

使用查询作为组合的行源。

```
SELECT [Last], [another field ?]
FROM Roster
WHERE Position Like "Ops*"; 
```

那么组合的控制源可以是一个查询字段。

# php - 选择和替换非 ASCII 字符

> ID：14024559
> 
> 赞同：0
> 
> 时间：2012-12-24T18:23:39.987
> 
> 标签：php, utf-8, str-replace, replace

我写了一个简单的函数来替换非 ASCII 土耳其字符。

```
function url_cevir($yazi) {
        $yazi = trim($yazi);

        $eski = array('ü','Ü','ö','Ö','ş','Ş','ç','Ç','ı','İ','ğ','Ğ',' ');
        $yeni = array('%C3%BC','%C3%9C','%C3%B6','%C3%96','%C5%9F','%C5%9E','%C3%A7','%C3%87','%C4%B1','%C4%B0','%C4%9F','%C4%9E','%20');

        return str_replace($eski,$yeni,$yazi);
    } 
```

当我在我调用它的页面中定义它时，它确实有效。但是当我将它包含在外部页面中时，它只会替换空格。

所有代码都在这里，没有其他代码可以污染这些

来自外部页面：

```
<?php

include('functions/array_and_string_fns.php');

echo url_cevir('ısı geçişi');
?> 
```

如果我使用`echo url_cevir('ısı geçişi');`它打印`ısı%20geçişi`
如果我使用`echo ('ısı geçişi');`它`ısı geçişi`按我们预期的那样打印。
所以我认为问题来自函数 url_cevir 我认为我错过了一些非常简单的东西。否则这是一个非常有趣的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T18:30:19.843

当您将文字字符放入源文件时，实际源文件的编码变得很重要。

我认为您的源文件具有不同的编码。检查文本编辑器上的设置。

# python - 本机窗口控件最大化、最小化和关闭按钮在 Qt 中没有以匹配的方式绘制

> ID：14024561
> 
> 赞同：0
> 
> 时间：2012-12-24T18:23:56.833
> 
> 标签：python, macos, qt, pyqt, pyside

我正在使用 PySide - PyQt 开发应用程序。我想创建我的自定义应用程序框架并在其上绘制本机关闭最小化和最大化按钮。这方面的一个例子是 Apple 自己的 iCal 应用程序，其顶部应用程序框架在自定义图像上具有这些按钮。

我试过了：

```
ico = app.style().standardIcon(QStyle().SP_TitleBarMaxButton)
clo = QPushButton(panel_right_fill)
clo.setIcon(ico)
clo.move(20,40) 
```

但是，图标和按钮都不匹配当前操作系统的按钮样式。

这里的应用程序是一个全球性的`app = QApplication(sys.argv)`

我怎样才能画出这些按钮？

PS。self.style() 做同样的事情。

# jpa - EclipseLink 和 Oracle DB 的时区错误

> ID：14024565
> 
> 赞同：5
> 
> 时间：2012-12-24T18:24:41.103
> 
> 标签：jpa, oracle11g, jpa-2.0, eclipselink

我正在编写一个使用 JPA 和 GlassFish 3.1.2.2 和 EclipseLink 2.3.2 的应用程序。我正在使用 Oracle DB 11g 并尝试使用 TIMESTAMPTZ 字段类型将日期和时间与时区一起存储。

通过我的设置，我可以将带有时区的日期和时间保存到数据库中。（更新-实际上在查看实际的 SQL 调用时，它只是传递日期和时间。Oracle 在保存到数据库时必须附加时区）。

但是，在检索数据时，我收到以下异常：

> 异常 [EclipseLink-3002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461)：org.eclipse.persistence.exceptions.ConversionException 异常描述：对象 [oracle.sql.TIMESTAMPTZ@12cbe3f]，属于 [class oracle. sql.TIMESTAMPTZ]，来自映射 [org.eclipse.persistence.mappings.DirectToFieldMapping[startDateTime-->APPT_EVENT.START_DATE_TIME]] 与描述符 [RelationalDescriptor(com.ntst.caremanager.server.entities.ApptEvent -> [DatabaseTable(APPT_EVENT )])]，无法转换为 [class java.util.Date]。

有没有人遇到过这种情况？这就是我的实体类中的“startDateTime”字段的设置方式：

```
@Column(name = "START_DATE_TIME")
@Temporal(TemporalType.TIMESTAMP)
private Date startDateTime; 
```

START_DATE_TIME 在 DB 中使用以下 DDL 定义：

```
"START_DATE_TIME" TIMESTAMP (6) WITH TIME ZONE 
```

我在[这里](http://wiki.eclipse.org/Configuring_a_Relational_Mapping_(ELUG))的 eclipselink wiki 上读到EclipseLink 本身就支持 oracle 的 TIMESTAMPTZ，无需任何转换。我还尝试在我的实体类中使用“日历”类型而不是“日期”时间。

更新：也试过这个

```
@Convert("timestamptz")
@TypeConverter(name="timestamptz", dataType=TIMESTAMPTZ.class)
@Column(name = "START_DATE_TIME")
@Temporal(TemporalType.TIMESTAMP)
private Date startDateTime; 
```

还是没有运气。奇怪的是，添加转换器后，持久化到数据库不再起作用。尝试保存值时出现此错误。

> 异常 [EclipseLink-3002] (Eclipse Persistence Services - 2.3.3.v20120629-r11760)：org.eclipse.persistence.exceptions.ConversionException 异常描述：对象 [12/4/12 7:00 AM]，类 [class java.util.Date]，来自映射 [org.eclipse.persistence.mappings.DirectToFieldMapping[startDateTime-->APPT_EVENT.START_DATE_TIME]] 与描述符 [RelationalDescriptor(com.ntst.caremanager.server.entities.ApptEvent --> [DatabaseTable (APPT_EVENT)])]，无法转换为 [class oracle.sql.TIMESTAMPTZ]。

尝试检索值时仍然出现相同的错误。我还尝试将 Glassfish 更新到 EclipseLink 2.3.3 并得到了同样的错误。

这是我的持久性文件：

```
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="CM-warPU" transaction-type="JTA">
<provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
<jta-data-source>CMDEV</jta-data-source>
<exclude-unlisted-classes>false</exclude-unlisted-classes>
<properties>
  <property name="eclipselink.logging.level" value="FINE"/>
  <property name="eclipselink.logging.parameters" value="true"/>
  <property name="eclipselink.target-server" value="SunAS9"/>
</properties> 
```

有没有人见过这个问题，或者看到我可能犯的任何错误？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T00:41:36.670

您需要指定转换器

```
@Convert("timestamptz")
@TypeConverter(name="timestamptz", dataType=TIMESTAMPTZ.class)
@Column(name = "START_DATE_TIME")
@Temporal(TemporalType.TIMESTAMP)
private Date startDateTime; 
```

您还需要配置服务器平台，以便 EclipseLink 可以获取 JDBC 连接以正确执行转换。这可以在 persistence.xml 中完成

```
<property name="eclipselink.target-server" value="WebLogic"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T00:14:14.473

我能够弄清楚这一点，这实际上是由于我的疏忽造成的。我需要将 ojdbc6.jar 文件添加到 glassfish 的 domain\domain1\lib\ext\ 目录中，以便 EclipseLink 可以找到 oracle.sql.timestamptz 类型。

就是这样。之后，我可以使用以下方法检索时区数据并将其存储到 Oracle 数据库：

```
@Column(name = "START_DATE_TIME")
@Temporal(TemporalType.TIMESTAMP)
private Calendar startDateTime; 
```

无需使用@TypeConverter 或@Converter，因为EclipseLink 会自动在此版本中转换它。您还需要使用日历，而不是日期，以便您可以检索时区信息。

我把这个留给其他可能遇到这个的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-24T03:30:51.457

在尝试了这里提到的大多数解决方案之后：

1.  将 ojdbc6.jar 添加到类路径。
2.  有和没有@TypeConverter 和@Converter。
3.  在 java.util.Date 和 java.util.Calendar 之间更改实体属性。
4.  将 eclipselink.target-server 设置为 weblogic。

...仍然存在以下错误：

> 异常 [EclipseLink-3002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461)：org.eclipse.persistence.exceptions.ConversionException 异常描述：对象 [oracle.sql.TIMESTAMPTZ@12cbe3f]，属于 [class oracle. sql.TIMESTAMPTZ]，来自映射 [org.eclipse.persistence.mappings.DirectToFieldMapping[...]] 与描述符 [RelationalDescriptor(com.ntst.caremanager.server.entities.ApptEvent --> [DatabaseTable(APPT_EVENT)])] ，无法转换为 [class java.util.Date]。

当我将 eclipselink.target-database 从“Oracle”更改为“Oracle11”时，我终于让它工作了（在我的实体中没有 @converter 和 java.util.Calendar）。

# c++ - C++ 将“HH:MM:SS.fraction”转换为 int64_t

> ID：14024571
> 
> 赞同：0
> 
> 时间：2012-12-24T18:25:06.960
> 
> 标签：c++, timedelta

在 C 或 C++ 中，是否有一种通用、方便、跨平台的方法可以将格式为“HH:MM:SS.<fraction of a second>”的字符串转换为（timedelta）数字类型，反之亦然？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T19:18:18.013

这并不难（我假设你的时间是机器生成的，而不是手写的，所以我们可以依赖它是“正确的” - 否则，我们必须添加“这个值在范围内”的负载检查）。我还将假设分数始终是相同的位数。

```
int64_t parsetime(char *str)
{
    int hh, mm, ss, fract;
    int64_t t;

    if (sscanf(str, "%d:%d:%d.%d", &hh, &mm, &ss, &fract) != 4)
    {
        printf("Badly formed time %s\n", str);
        return -1;
    }

    // 1000000 assumes there are 6 digits in fract, and we want microseconds.
    t = ((hh * 60)  + mm *60) + s) * 1000000 + fract;

    return t;
} 
```

你可以做类似的事情，使用一个`double`和`%d:%d:%lf`格式字符串，然后乘以相关的乘数，让你的分数变成整数形式（例如1000毫秒，1000000微秒，100000000纳秒等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T18:36:29.647

`strptime`对于这个特定的问题，它是最便携的。它不在 C 标准库中（即使它已添加，因为 C89、C99 和 C2011 并不比 POSIX 更可移植（非常感谢微软））但它足够广泛，我的建议是编写你的代码，就好像它是通用的，然后在您的构建系统中检测到它的缺失并注入替代品。您可以在此处获得 BSD 许可的替代品：[http](http://cvsweb.netbsd.org/bsdweb.cgi/src/lib/libc/time/strptime.c?rev=HEAD) : //cvsweb.netbsd.org/bsdweb.cgi/src/lib/libc/time/strptime.c?rev=HEAD（可能需要可移植性调整）

# mongodb - mongodb 是否适合通用时间序列数据？

> ID：14024577
> 
> 赞同：3
> 
> 时间：2012-12-24T18:25:27.083
> 
> 标签：mongodb, time-series

我需要收集看起来像这样的各种时间序列指标

`{event_type, event_time, data_point1, data_point2}`

然后我需要执行临时查询，例如“如果 datapoint2=7，则事件 X 的所有 datapoint1 值以 5 分钟间隔”或“这一小时内事件 Y 的 datapoint1-datapoint2 的平均值”。

我已经看到[了一些](http://www.quora.com/Time-Series/What-is-the-best-way-to-store-time-series-data-in-MongoDB)关于在 mongo 中建模时间序列的材料，但它似乎根据您将询问的查询预先聚合数据。是否仍然可以将所有数据点保存在 mongo 中并执行免费查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T10:51:35.240

我可能在这里遗漏了一些东西，但我相信你想要一个集合：

```
{event_type, event_time, data_point1, data_point2} 
```

这样您就可以执行查询。该文档应该很容易满足您的两个查询，后者是使用聚合框架 ( `$avg`) 完成的。

这将为您提供完全自由形式的查询。

我想你可能刚刚被链接的帖子弄糊涂了（[http://www.quora.com/Time-Series/What-is-the-best-way-to-store-time-series-data-in-MongoDB](http://www.quora.com/Time-Series/What-is-the-best-way-to-store-time-series-data-in-MongoDB)）。它显示了一种预聚合形式，它将形成您的数据的顶级结果，这些结果通常很难按需进行。

当然，正如您所注意到的，这种方法会限制查询能力，但是时间序列可能会变得非常大，而且我不确定聚合框架是否可以在您的自由格式数据集上进行更复杂的查询。这就是预聚合的用武之地。它为您的低级数据提供了一些顶级数据，有效地使聚合更容易。

因此，在那篇文章中，您可以看到@Jared 实际上展示了他拥有的第一个收藏，它是以下内容的详细收藏：

```
{ 
    timestamp: "Sun May 02 2010 19:07:40 GMT-0700", 
    metric1: 10,
    metric2: 20,
} 
```

这将是您的详细信息集合，其中包含：

```
{event_type, event_time, data_point1, data_point2} 
```

您可以以自由形式查询的集合，然后@Jared 继续展示如何创建以将数据分级到该详细信息集合，以使其他聚合更容易。

所以我不确定问题出在哪里，详细信息集合存储所有`data_points`内容并允许您执行免费查询，当然前提是您有正确的索引。

# c# - 从 C# 向客户端代码返回 Xml 字符串

> ID：14024587
> 
> 赞同：0
> 
> 时间：2012-12-24T18:26:38.513
> 
> 标签：c#, jquery, asp.net, xml

我正在从包含我在通用处理程序中处理的 xml 的用户文件中读取一个文件，然后将其传递给客户端。

我遇到的问题是当我将 xml 字符串传递给客户端时。它的格式不正确。`"<xml 1.0>"`通过客户端代码查看它时，它会完全删除根标记和 标记。

我正在寻找一些代码来保持 xml 字符串在到达客户端时保持原样。

我正在从`System.IO`服务器上使用的文件中读取 xml ..

```
public void ProcessRequest(HttpContext context)
{
    if (context.Request.Files.Count > 0)
    {
        string path = context.Server.MapPath("~/Temp");
        if (!Directory.Exists(path))
            Directory.CreateDirectory(path);

        var file = context.Request.Files[0];

        string fileName;

        if (HttpContext.Current.Request.Browser.Browser.ToUpper() == "IE")
        {
            string[] files = file.FileName.Split(new char[] { '\\' });
            fileName = files[files.Length - 1];
        }
        else
        {
            fileName = file.FileName;
        }

        string strFileName = fileName;
        fileName = Path.Combine(path, fileName);
        file.SaveAs(fileName);
        string msg = File.ReadAllText(fileName);
        File.Delete(fileName);

        context.Response.Write(msg);
    }
} 
```

xml 总是从“Gambardella ...”开始，由于某种原因，它在发送给cient 时无法读取文件的开头。

这是示例 xml 的图像。

![在此处输入图像描述](../Images/f05275890ace766f95b0fa7ea5a57e2d.png)

数据很好地从处理程序中发送出去，但客户端切断了最重要的信息。看起来我正在使用的插件正在存储（或获取）来自 iframe 的数据。iframe 可能是切断开头 xml 的罪魁祸首吗？

我正在使用的示例客户端代码在[这里](http://www.phpletter.com/Our-Projects/AjaxFileUpload/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T18:29:54.213

您可以简单地使用[`Response.WriteFile`](http://msdn.microsoft.com/en-gb/library/system.web.httpresponse.writefile.aspx), 而不是读取文件然后发送它。

```
Response.WriteFile(fileName); 
```

这将返回具有正确 HTTP`Content-Type`标头的文件内容。如果文件有 XML 声明，它不会删除它。

* * *

类似以下的内容，基于您的代码且未经测试（没有 a `MemoryStream`，因为在这种情况下不需要）：

```
var file = context.Request.Files[0];
file.InputStream.CopyTo(context.Response.OutputStream) 
```

# java - containsKey 或无法正常工作

> ID：14024589
> 
> 赞同：-3
> 
> 时间：2012-12-24T18:26:45.530
> 
> 标签：java

我想检查一个项目是否在我的播放器 (Player) 的库存 (HashMap) 中。但是这个条件，写在（在 Player 类中）

```
this.items.containsKey("beamer") 
```

无法编译。我得到错误：

```
cannot find symbol - method containsKey(java.lang.String) 
```

我试图导入 java.lang.String 或 java.util.HashMap 但它什么也没做......

谢谢你的帮助。

编辑1：进口：

```
import java.util.*;
import java.lang.*; 
```

编辑 2：我在 Player 类的开头声明项目。Items 也是一个具有一个属性的类，一个以 Item 为值、以 String 为键的 HashMap。

```
private Items items = new Items(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T18:41:05.383

> Items 也是一个具有一个属性的类，一个 HashMap

所以Items*有*一个HashMap，或者*包含*一个HashMap。Items*不是*HashMap。所以它没有任何`containsKey()`方法。

您需要向`containsKey()`您的 Items 类添加一个方法，该方法代表包含的 Map：

```
public boolean containsKey(Object key) {
    return this.map.containsKey(key);
} 
```

# regex - 需要一个正则表达式来匹配用逗号分隔的正整数

> ID：14024591
> 
> 赞同：2
> 
> 时间：2012-12-24T18:26:58.870
> 
> 标签：regex

> **可能重复：**
> [正则表达式只允许字符串中的整数和逗号](https://stackoverflow.com/questions/5798129/regular-expression-to-only-allow-whole-numbers-and-commas-in-a-string)

我需要一个正则表达式来匹配以逗号分隔的正整数序列。空间也是允许​​的。

例如

`706101`, `700102`,`700295`应该匹配，但`0, 1, 2, 3`不应该。

我尝试使用 `/^\s*(\d+(\s*,\s*\d+)*)?\s*$/` ，但它似乎也接受零。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T18:28:40.290

替换`(\d+)`为`[1-9]\d*`它会工作。例如：

```
/^\s*[1-9]\d*(?:\s*,\s*[1-9]\d*)*$/ 
```

这个正则表达式将在空字符串处失败（而原始帖子中的那个不会），但我认为这实际上是意图。如果没有，只需将第一个“数字部分”设为可选。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T18:30:45.153

尝试：

```
[1-9][0-9]+( *, *[1-9][0-9]+)* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T18:35:35.323

像这样的东西会起作用。主要变化基本上是从`\d`([0-9]) 切换到`[1-9]`.

此正则表达式还允许您键入数字，例如`0001`.

`/^(?:0*[1-9]\d*\s*(?:,|$)\s*)+$/gm`

由于您没有指定语言，因此标志可能会更改。这是PCRE。

演示+说明：[http ://regex101.com/r/kN2tW0](http://regex101.com/r/kN2tW0)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T09:27:38.863

试试这个

`^([1-9]\d*[\s,]*)+$`

此 RE 将完全消除字符串中任何位置带有独立 '0' 的字符串。

# web-services - IIS 绑定和吞吐量，它们是如何工作的？

> ID：14024592
> 
> 赞同：0
> 
> 时间：2012-12-24T18:27:19.837
> 
> 标签：web-services, iis, networking

一位工作顾问提到，如果我有多个不同带宽的网卡，您可以在不同的端点上运行 Web 服务，从而正确利用网络。

不太精通网络，他是说我可以使用我的网络服务并将其绑定到一个网卡并确保客户端在该网卡上进行调用以访问它，因为我在该卡上有更多带宽？

我可以在不改变客户的情况下做到这一点吗？

另外，如果我的 Web 服务有许多 Web 方法，并且我希望一些 Web 方法在不同的网卡上运行，我是否必须拆分 Web 服务以便 Web 方法在不同的 Web 服务上？换句话说，我将不得不编写两个 Web 服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T18:49:10.007

您是否真的在最大限度地利用您的网络来实现这样的事情？在走这条路之前，我会先研究应用程序中的瓶颈。

如果您的网络是瓶颈，那么将您的 Web 服务移动到完全不同的服务器可能是一个更好的解决方案。它很可能会更清洁，更容易实施。

话虽如此，它可能可以完成，但会很复杂。网卡需要在不同的网络上。如果是同一个网络就没有意义了。每个网卡将分配不同的IP地址。

在 IIS 中，您需要确保为您的 Web 服务配置的站点配置了一个特定的 IP 地址。

> 我可以在不改变客户的情况下做到这一点吗？

要看。您需要确保调用您的 Web 服务的人使用在 IIS 中配置的 IP 地址进行调用。这可能意味着要么创建指向该特定 IP 地址的 DNS 记录，要么编辑您的客户端以指向正确的 IP 地址。

# c - 这是弱引用的正确用法吗？

> ID：14024593
> 
> 赞同：5
> 
> 时间：2012-12-24T18:27:38.893
> 
> 标签：c, gcc

我想允许重新定义已在头文件中定义的 .c 文件中的函数。根据关于 weakref 属性的 GCC 手册：

> 效果相当于将所有对别名的引用移动到单独的翻译单元，将别名重命名为别名符号，将其声明为弱，编译两个单独的翻译单元并在它们上执行可重新加载的链接。

这听起来正是我想做的。但是，以下示例编译时不会出错：

> tpp.c:18:13: 错误: 'foo' 的重新定义 tpp.c:6:13: 注意: 'foo' 的先前定义在这里

```
#include <sys/types.h>
#include <stdio.h>

/* this will be in a header file */
static void foo(void) __attribute__ ((weakref ("_foo")));

static void _foo(void)
{
    printf("default foo\n");
}

/* in a .c file #including the header mentioned above */
#define CUSTOM_FOO

#ifdef CUSTOM_FOO
static void foo(void)
{ 
    printf("user defined foo.\n");
}
#endif

int main(int argc, char **argv)
{
    printf("calling foo.\n");
    foo();
} 
```

我正确使用它吗？我错过了什么？

> gcc 版本 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:16:56.260

据我了解，您需要将该函数定义为 extern。然后它为我工作如下：

```
user@horst:$ cat weakref.c

#include <sys/types.h>
#include <stdio.h>

/* this will be in a header file */
extern void foo(void) __attribute__ ((weak, alias ("_foo")));

void _foo(void)
{
    printf("default foo\n");
}

int main(int argc, char **argv)
{
    printf("calling foo.\n");
    foo();
}

user@horst:$ gcc weakref.c 
user@horst:$ ./a.out 
calling foo.
default foo
user@horst:$ cat weakrefUser.c
#include <stdio.h>
/* in a .c file #including the header mentioned above */
#define CUSTOM_FOO

#ifdef CUSTOM_FOO
void foo(void)
{ 
    printf("user defined foo.\n");
}
#endif
user@horst:$ gcc -c weakrefUser.c 
user@horst:$ gcc -c weakref.c 
user@horst:$ gcc weakref.o weakrefUser.o 
user@horst:$ ./a.out 
calling foo.
user defined foo. 
```

注意1：它不适用于静态函数，对于弱属性，它需要是全局的。

注意 2：弱符号“仅”支持 ELF 目标。

# github - 如何防止 GitHub 页面“自动生成器”在重新生成站点之前删除所有内容？

> ID：14024594
> 
> 赞同：17
> 
> 时间：2012-12-24T18:27:49.777
> 
> 标签：github, markdown, documentation-generation, github-pages

我为我的小项目创建了一个很棒的 GitHub Pages[网站](http://lviggiano.github.com/owner/)`gh-pages`，并在分支中添加了一些其他页面。我的问题是，每次我从“设置=>自动页面生成器”重新生成网站时，一切都被清理干净了，我必须手动恢复文件。

有没有办法预防或解决这个问题？

如果自动生成器只是覆盖他的东西而不删除现有文件，那就更好了。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-12T15:06:55.853

1.  结帐`gh-pages`分支。
2.  mkdir`_layouts`
3.  搬到`index.html`_`_layouts`
4.  编辑`_layouts/index.html`将内容部分的内部 html 替换为`{{content}}`
5.  制作新文件`index.md`
6.  将自动页面生成器的 markdown 内容粘贴到`index.md`
7.  将以下内容添加到`index.md`

    ```
    ---
    layout: index
    --- 
    ```

8.  创造`_config.yml`
9.  包括以下内容`_config.yml`：

    ```
    markdown: kramdown
    kramdown:
       auto_ids: true 
    ```

    *这一步是为了匹配github的markdown语法*

10.  添加并提交更改，然后将分支推送回 github。

现在您可以[在 github 源代码浏览器](https://github.com/lviggiano/owner/tree/gh-pages)`index.md`中简单地从gh-branch 进行编辑，它会自动使用[jekyll](https://help.github.com/articles/using-jekyll-with-pages)进行更新，而不会与 gh-branch 中的任何内容混淆。

您还可以使用占位符在布局中使更多项目可编辑，`{{page.varname}}`然后添加`varname:your text`到`index.md`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T23:49:59.920

好吧，经过一些尝试，我找到了解决方案。

我注意到为我的站点更改的唯一文件是 index.html，生成的站点的其余部分是相同的。在 index.html 中有一个`<section>content</section>`标签，其中包含从 markdown 生成的 html。

所以我创建了两个文件`header.inc`，`footer.inc`其中包含索引页面的“静态”部分。内容部分应该是从`README.md`文件中生成的。

我发现github提供了一个API来[以原始模式将RAW markdown渲染](http://developer.github.com/v3/markdown/#render-a-markdown-document-in-raw-mode)为html。
所以，最后一个难题是为我的项目的 README.md 获取一个永久链接，其中包含 RAW 内容；我碰巧在[这里](https://raw.github.com/lviggiano/owner/master/README.md)找到。

所以我编写了这个[简单的 bash 脚本](https://raw.github.com/lviggiano/owner/gh-pages/bin/autogen)，它单独重新生成 index.html，而不涉及站点的其余部分：

```
#!/bin/sh
PG_DIR=$(dirname $0)
RAW_README_URL=https://raw.github.com/lviggiano/owner/master/README.md
GITHUB_API_URL=https://api.github.com/markdown/raw

cat $PG_DIR/header.inc
curl -s $RAW_README_URL | curl -s --data-binary @- -H 'Content-Type: text/plain' $GITHUB_API_URL 
cat $PG_DIR/footer.inc 
```

然后我只是启动脚本：

```
$ cd myproject
$ git checkout gh-pages
$ git pull origin gh-pages:gh-pages
$ ./bin/autogen > index.html
$ git commit -m "updated index.html from latest README.md" index.html
$ git push origin gh-pages:gh-pages 
```

[请参阅此处](https://github.com/lviggiano/owner/tree/gh-pages/bin)的实施细节。

我用“闰日”布局进行了测试；但我想它也适用于其他人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T08:09:04.550

不，不可能。当您执行“生成”时，GitHub 会擦除 gh-pages 存储库。你能做的最好的就是你现在正在做的事情。另一种选择可能是不使用 GitHub 页面生成器来更改样式，而是找到样式的来源（它们可能在 GitHub 上的某个地方）并通过提交更改来手动更改它们（替换 css 文件和其他小调整）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-31T22:48:08.457

您可以使用该选项[配置](http://jekyllrb.com/docs/configuration/#global-configuration)Jekyll 以跳过某些目录。`exclude`

（请注意，Jekyll 有一个`keep_files`选项——用于目录中的文件`destintation`。）

# google-chrome - Chrome 打包应用程序 AppWindow hide() 和 close() 丢失？

> ID：14024596
> 
> 赞同：0
> 
> 时间：2012-12-24T18:28:00.853
> 
> 标签：google-chrome, google-chrome-app

一直在尝试使用 23.0.1271.97 打包的应用程序，在这里和那里遇到奇怪的问题。

最近，在玩多窗口应用程序时，我可以很好地创建多个窗口，但是 AppWindow 对象缺少[dev docs](https://developer.chrome.com/dev/apps/app.window.html#type-AppWindow)中详述的隐藏和关闭功能。现在是否还有其他一些范式尚未进入文档？

这是 AppWindow 对象的控制台转储（扩展了 AppWindow 和**proto ）：**

```
appwinOptions
AppWindow
__proto__: Object
constructor: function () {}
contentWindow: Window
dom: Window
focus: function () { [native code] }
maximize: function () { [native code] }
minimize: function () { [native code] }
moveTo: function () { [native code] }
resizeTo: function () { [native code] }
restore: function () { [native code] }
__proto__: Object 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:00:55.890

从雷纳托：

> AppWindow.close() 和 AppWindow.hide() 方法在 Chrome Canary (25) 中可用，也可能在 dev 中可用。如果您正在使用 Chrome 打包应用程序，请使用 Chrome Canary（最好）或 Dev。当前稳定版 (23) 包含打包应用程序的第一个版本、预开发者预览版，此后许多事情都发生了变化。

我已经在 Canary 中对其进行了测试，并且它们在那里工作正常。

# javascript - 如何使 Ext.data.JsonStore 创建的请求的内容类型为 'application/json'？

> ID：14024601
> 
> 赞同：0
> 
> 时间：2012-12-24T18:28:35.540
> 
> 标签：javascript, ajax, extjs

我是 ExtJs 的新手，我讨厌 javascript，但现在我必须这样做。我有以下代码：

```
 var proxy = new Ext.data.HttpProxy(
                {
                url: 'sf/listUsers', 
                headers: {'Content-Type': 'application/json'}
                }
            );

            var store = new Ext.data.JsonStore({
                proxy: proxy,
                remoteSort: true,
                sortInfo: { field: "username", direction: "ASC" },
                totalProperty: 'count',
                root: 'users',
                fields: ['username', 'id'],
                writer : new Ext.data.JsonWriter({
                    encode : true,
                    writeAllFields : true
                })

            }); 
```

当我尝试页面时，网格没有显示任何内容，我可以在 chrome 中看到请求的内容类型是 text/html。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:32:41.797

从[文档](http://dev.sencha.com/playpen/docs/output/Ext.data.HttpProxy.html)：

> 请注意，要使浏览器能够解析 XML 文档，服务器必须将 HTTP 响应中的 Content-Type 标头设置为“text/xml”

# php - PHP 后台进程（创建一个在服务器上运行的管理器进程）。

> ID：14024607
> 
> 赞同：0
> 
> 时间：2012-12-24T18:29:13.467
> 
> 标签：php, process, background, signals, posix

我有一个带有按钮的网页，当我单击该按钮时，我希望它可以将数据发布到一个 php 文件中 - 这一点我很好。问题是我希望 PHP 文件在服务器上启动一个与 httpd 无关的进程，所以如果我关闭网页，PHP 脚本仍将运行到最后（它是一个长时间运行的脚本）。

长时间运行的脚本会执行需要一段时间的各种任务，它将进度写入 .json 文件。我在网页上设置了我的 JavaScript 以每秒读取进度并更新进度条等...我想要它这样即使我关闭网页脚本仍然会运行到最后，这样我就可以来随时返回并检查进度等。

我一直在阅读，发现大多数人都说要使用 exec 但这对我不起作用（尽管我正在 wamp 下的 windows 上进行测试，也许这就是为什么？）

有人告诉我，我应该使用在服务器上运行的管理器进程（而不是通过 apache）或使用 POSIX 信号。我不确定其中任何一个，所以任何帮助都将不胜感激，无论是解释、代码还是好文章的链接

如果可能的话，我希望保持脚本设置，所以我只需要弄清楚如何在 httpd 上启动后台进程。

提前谢谢大家了

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T20:22:47.923

我在 PHP 网站上的[评论](http://pk1.php.net/manual/en/function.exec.php#86329)中发现了这个建议。

```
pclose(popen("start /B ". $cmd, "r")); 
```

# iphone - Google Chart API 在 iPhone 上脱离容器

> ID：14024610
> 
> 赞同：1
> 
> 时间：2012-12-24T18:29:33.470
> 
> 标签：iphone, css, responsive-design, google-visualization

我正在使用 Google 的图表 API 开发一个移动网站。在其他经过测试的设备上，一切都运行得很好，并且可以像在其他测试设备上一样缩放，但由于某种原因，当在 iPhone 上查看时，Google 的“表格”图表正在突破其容器。它在缩小的浏览器窗口、Android 平板电脑和 Galaxy SII 上看起来不错。我已经确认这不是移动 Safari 的问题。

图表通过 iFrame 加载并缩放以适合宽度：100% 的容器，即 Dreamweaver“流体网格布局 -- Gridcontainer”元素。柱形图和折线图都可以正确缩放到 100%，但表格会增长到适合所有内容，然后脱离网格容器。

在其他设备上，网格会显示边界内的内容并添加滚动。

这是将图表绘制到页面的 php/html 代码。

```
<div id="top-prods" class="chart" style="width: 100%; height: 500px;">
<?php
    if($charts->isData() == "true"){
        echo "<iframe id=\"top-chart\" src=\"controls/charts/top_prods.php?loc=".$loc."&comp=".$company_id;
        if($xDate != "") {echo "&xDate=".$xDate;} 
        if($yDate != "") {echo "&yDate=".$xDate;}
        echo "\" style=\"width:100%;\" scrolling=\"no\"></iframe>";
    }
?> 
```

唯一的 css 是在 Gridcontainer 上定义的，因为 iFrame 应该只调整大小以适应容器。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T03:24:02.420

看起来您遇到了与此类似的问题：[Responsive iframe (google maps) 和奇怪的调整大小](https://stackoverflow.com/questions/12676725/responsive-iframe-google-maps-and-weird-resizing)

第一个答案中的 CSS 看起来可以轻松移植。

# ms-access - 在 Powershell 中压缩 MS Access 数据库的示例代码

> ID：14024619
> 
> 赞同：1
> 
> 时间：2012-12-24T18:30:19.777
> 
> 标签：ms-access, powershell

我可以找到示例 VBA 和 C# 代码来执行此操作，但**没有**Powershell 片段（谷歌对此保持沉默，Stackoverflow 也是如此）。谁能指出我这样做的一些Powershell（或提供一些）？我期待它会通过 COM 访问 Access 的 API。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T21:24:32.793

我应该知道最好不要在圣诞节前一天询问并希望得到快速响应，所以我自己做了。事实证明，无论如何，答案都非常简单。下面的顶部函数完成了我需要的操作，驱动程序函数将遍历目录中的所有访问数据库并压缩它们中的每一个。

```
function compactDatabaseFile($sourceFilename, $destinationFileName)
{

    $application =  New-Object -ComObject Access.Application

    Write-Host $($(Get-Date).ToString() + ": Starting compacting of $sourceFilename to $destinationFileName")

    $application.CompactRepair($sourceFilename,$destinationFileName, $true)

    Write-Host $($(Get-Date).ToString() + ": Finished compacting of $sourceFilename to $destinationFileName")

    $application.Quit()
}

function driver($sourceDirectory, $newDestinationDirectory, $filePatterns = @("*.mdb","*.accdb"))
{
    if (Test-Path $newDestinationDirectory) {
        Write-Host "Destination Directory $newDestinationDirectory exists.  Exiting without doing anything."
        Exit
    }

    if (!$(Test-Path $sourceDirectory)) {
        Write-Host "SourceDirectory $sourceDirectory not found.  Exiting without doing anything."
        Exit
    }

    mkdir $newDestinationDirectory | Out-Null

    gci -path $($sourceDirectory + "\*") -include $filePatterns | % {
        $sourceFileName = $($sourceDirectory + "\" + $_.Name);
        $destinationFileName = $($newDestinationDirectory + "\" + $_.Name);
        compactDatabaseFile $sourceFileName $destinationFilename
    }
} 
```

# mysql - 在 MySQL 中生成一个范围

> ID：14024623
> 
> 赞同：0
> 
> 时间：2012-12-24T18:30:27.903
> 
> 标签：mysql

我的表格布局是：

```
`userid` INT unsigned NOT NULL,
`doors` INT unsigned NOT NULL,
PRIMARY KEY (`userid`) 
```

`doors`是一个位掩码，它完全由 PHP 使用，而不是 MySQL 以除了选择之外的任何方式使用。

我有兴趣汇总一些统计数据，所以我想做这样的伪代码：

```
for i between 0 and 24
    select count from table where doors&(1<<i) 
```

我可以在 PHP 中轻松做到这一点，但它需要选择所有行并手动解析它们的掩码，或者 25 个单独的计数查询。我只是想知道是否有一种方法可以在一个选择查询中执行此操作，`group by`例如使用 a。

**请注意，这是一次性使用，而不是在生产端使用**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T19:04:19.140

这是整数表派上用场的地方。您可以按如下方式创建：

```
create table integers(i int unsigned not null);
insert into integers(i) values (0), (1), (2), (3), (4), (5), (6), (7), (8), (9); 
```

然后你可以运行你的查询

```
SELECT ( tens.i * 10 + units.i ) AS ii 
FROM   integers AS units 
       CROSS JOIN integers AS tens 
       CROSS JOIN table 
WHERE  ( tens.i * 10 + units.i ) BETWEEN 0 AND 24 
       AND doors & ( ( tens.i * 10 + units.i ) << 1 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T19:04:31.323

您可以在 MySQL 中使用按位函数：

```
select sum(case when doors & 1 << 0 = 1 then 1 else 0 end) as bit1,
       sum(case when doors & 1 << 1 = 1 then 1 else 0 end) as bit2,
       . . . 
from t 
```

如果您不想输入 24 次语句，那么我会在电子表格中创建它们。

# java - 如何让 HttpClient 返回状态码和响应正文？

> ID：14024625
> 
> 赞同：59
> 
> 时间：2012-12-24T18:31:02.343
> 
> 标签：java, http, apache-httpclient-4.x

我试图让 Apache HttpClient 触发 HTTP 请求，然后显示 HTTP 响应代码（200、404、500 等）以及 HTTP 响应正文（文本字符串）。重要的是要注意我正在使用`v4.2.2`，因为大多数 HttpClient 示例都来自`v.3.x.x`并且 API 从版本 3 到版本 4 发生了很大变化。

不幸的是，我只能让 HttpClient 返回状态代码**或**响应正文（但不能同时返回两者）。

这是我所拥有的：

```
// Getting the status code.
HttpClient client = new DefaultHttpClient();
HttpGet httpGet = new HttpGet("http://whatever.blah.com");
HttpResponse resp = client.execute(httpGet);

int statusCode = resp.getStatusLine().getStatusCode();

// Getting the response body.
HttpClient client = new DefaultHttpClient();
HttpGet httpGet = new HttpGet("http://whatever.blah.com");
ResponseHandler<String> handler = new BasicResponseHandler();

String body = client.execute(httpGet, handler); 
```

所以我问：**使用`v4.2.2`库，如何从同一个`client.execute(...)`调用中获取状态码和响应体？**提前致谢！

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-12-24T18:39:59.543

不要将处理程序提供给`execute`.

获取`HttpResponse`对象，使用handler获取body，直接从中获取状态码

```
try (CloseableHttpClient httpClient = HttpClients.createDefault()) {
    final HttpGet httpGet = new HttpGet(GET_URL);

    try (CloseableHttpResponse response = httpClient.execute(httpGet)) {
        StatusLine statusLine = response.getStatusLine();
        System.out.println(statusLine.getStatusCode() + " " + statusLine.getReasonPhrase());
        String responseBody = EntityUtils.toString(response.getEntity(), StandardCharsets.UTF_8);
        System.out.println("Response body: " + responseBody);
    }
} 
```

对于快速单次调用，fluent API 很有用：

```
Response response = Request.Get(uri)
        .connectTimeout(MILLIS_ONE_SECOND)
        .socketTimeout(MILLIS_ONE_SECOND)
        .execute();
HttpResponse httpResponse = response.returnResponse();
StatusLine statusLine = httpResponse.getStatusLine(); 
```

对于旧版本的 java 或 httpcomponents，代码可能看起来不同。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2016-01-12T10:12:08.400

您可以避免使用 BasicResponseHandler，但使用 HttpResponse 本身来获取状态和响应作为字符串。

```
HttpResponse response = httpClient.execute(get);

// Getting the status code.
int statusCode = response.getStatusLine().getStatusCode();

// Getting the response body.
String responseBody = EntityUtils.toString(response.getEntity()); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-10-09T18:16:46.873

如果状态不是 2xx，则 BasicResponseHandler 抛出。查看它的[javadoc](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/client/BasicResponseHandler.html)。

这是我的做法：

```
HttpResponse response = client.execute( get );
int code = response.getStatusLine().getStatusCode();
InputStream body = response.getEntity().getContent();
// Read the body stream 
```

或者您也可以从 BasicResponseHandler 源开始编写一个 ResponseHandler，当状态不是 2xx 时不会抛出。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-11-27T16:26:43.510

流畅的外观 API：

```
Response response = Request.Get(uri)
        .connectTimeout(MILLIS_ONE_SECOND)
        .socketTimeout(MILLIS_ONE_SECOND)
        .execute();
HttpResponse httpResponse = response.returnResponse();
StatusLine statusLine = httpResponse.getStatusLine();
if (statusLine.getStatusCode() == HttpStatus.SC_OK) {
    // 响应内容编码自适应？(好像没那么智能)
    String responseContent = EntityUtils.toString(
            httpResponse.getEntity(), StandardCharsets.UTF_8.name());
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-15T15:22:18.103

如果您使用的是 Spring

```
return new ResponseEntity<String>("your response", HttpStatus.ACCEPTED); 
```

# actionscript-3 - 使用 RegExp 和 split 读取文件文本 flash

> ID：14024626
> 
> 赞同：0
> 
> 时间：2012-12-24T18:31:04.660
> 
> 标签：actionscript-3, flash

我有一个文件文本超过 1 000 000 行，以字符**C**开头，另一个以**M**开头 示例：

```
C9203007870000000000000006339912610971240095400111200469300000 16122011AMI  00000100010000315       080  
C9203007870000000000000006339912610971240095400111200469300000 09122011B    590001000100000270016092100  
M920300787000000000000000633991261097124009540011120046930000031122011JVJF004       10     N
M920300787000000000000000633991261097124009540011120046930000009122011DEQP003       10     N                                
M920300787000000000000000633991261097124009540011120046930000012122011ACQK001       10Z    N
C9203007870000000000000006339912610971240095400111200469300000 24122011AMI  00000100010000315       080
C9203007870000000000000006339912610971240095400111200469300000 24122011AMI  00000100010000315       080 
```

我只想将以字符**M**开头的行放入我的数组中 如何在拆分中添加： var pattern:RegExp = /^M/;

```
var mFileReference:FileReference;
var mArray:Array = new Array();

function onFileLoaded(event:Event):void
{
    mFileReference = event.target as FileReference;
    data = mFileReference["data"];
    mArray = (data.toString()).split("\n");
} 
```

我不想通过循环“因为”它需要大量时间和资源我想将 /^M/ 添加到我的拆分中是否可能？

```
for each (var s:String in mArray) 
{
        if (pattern.test(s)) {
            values.push(s);
        }
} 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T18:46:35.260

试试这个正则表达式：

```
/^M.*/gm 
```

这应该匹配以 M 开头的所有行，仅此而已。

它使用`g`标志来匹配字符串中表达式的所有情况，并且它`m`用于多行模式，因此`^`将`$`匹配行的开头/结尾而不是字符串的开头/结尾。

你可以像这样得到你的数组：

```
mArray = data.toString().match(/^M.*/gm); 
```

# php - SQLSTATE [HY000] [2002] 每个套接字地址（协议/网络地址/端口）通常只能使用一次

> ID：14024635
> 
> 赞同：2
> 
> 时间：2012-12-24T18:31:49.197
> 
> 标签：php, mysql, apache

> **可能重复：**
> [MySQL/PHP 错误：[2002] 每个套接字地址（协议/网络地址/端口）通常只允许使用一次](https://stackoverflow.com/questions/10317974/mysql-php-error2002-only-one-usage-of-each-socket-address-protocol-network-a)

我完全随机收到以下错误：

SQLSTATE [HY000] [2002] 每个套接字地址（协议/网络地址/端口）通常只能使用一次。

此外，mysql报告以下错误：

使用语句格式写入二进制日志的不安全语句，因为 BINLOG_FORMAT = STATEMENT。该语句是不安全的，因为它使用了 LIMIT 子句。这是不安全的，因为包含的行集无法预测。语句：UPDATE `sessions`SET `page`='x.php' WHERE `sessname`='xxxxxxxxxxxxxx' LIMIT 1

（我没有收到此错误，因为该表在 SessionID (auto_increment) 上有 PRIMARY_INDEX，在 sessname 上有 UNIQUE）

上面的问题（SQL STATE）与下面的问题有关还是还有其他问题？

上面的错误（SQL STATE）也出现在F5过大（刷新）

请帮忙！

（编辑：我使用的是 apache 2.2.22、php5.4.3、mysql5.5.24）（编辑：/system32/drivers/etc/hosts 127.0.0.1 localhost，是唯一的条目）

# c++ - 左值如何转换为右值

> ID：14024639
> 
> 赞同：0
> 
> 时间：2012-12-24T18:32:16.383
> 
> 标签：c++, c, lvalue, rvalue

```
int x = 8;
int y = x ; 
```

在这里，左值如何充当右值？我知道这是一个愚蠢的问题，但我只想让我的概念清楚 rvalue 和 lvalue 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T18:36:07.523

通过*左值*到*右值*的转换。

您几乎可以在需要*右值的任何地方使用**左*值，并且会自动进行隐式*左值*到*右值的转换。*

 ***非正式地，这种转换是“评估”或“取值”*左值*所指的对象。并非在所有情况下都严格如此。在未计算的上下文中，例如 的操作数`sizeof`，不会使用对象的值。

ISO/IEC 14882:2011 4.1 [conv.lval]：

> 非函数、非数组类型的 glvalue (3.10)`T`可以转换为纯右值。如果`T`是不完整类型，则需要进行此转换的程序格式错误。如果泛左值所引用的对象不是类型对象，`T`也不是派生自 的类型的对象`T`，或者如果该对象未初始化，则需要此转换的程序具有未定义的行为。如果`T`是非类类型，则纯右值的类型是 的 cv 非限定版本`T`。否则，纯右值的类型是`T`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T18:36:17.477

左值是可以出现在赋值左侧的任何值。可以分配的东西，例如`x`本例中的变量。右值是具有价值的事物，例如`8`或获得 的价值`x`。您可以将左值视为右值的子集，即所有左值都可以查询其值并将其用作右值。***

# c++ - 减少重复方法？

> ID：14024640
> 
> 赞同：1
> 
> 时间：2012-12-24T18:32:17.660
> 
> 标签：c++, oop, class, friend

所以我正在开发一个 2D 空间模拟器，并且我有资源管理器' `calc`'来处理所有计算。例如，来自[`calc.hpp`](https://github.com/patrickpowns/corbit/blob/v2/include/corbit/calc.hpp)：

```
var calc::eccentricity (object A, object B);
var calc::distance     (object A, object B);
var calc::orbitV       (object A, object B); 
```

等等。但是，我的程序结构方式是在我的`calc`课堂上

```
private:
object *ship    //the currently controlled ship
object *targ    //target
object *ref     //reference (from which speeds, position, etc. are calculated) 
```

为了使用第一个示例中给出的计算，我为每个计算函数编写了三个函数，如下所示：

```
var calc::ship_ecc      (object A){
    if(!ship)    //catches null pointers
        return NAN;
    return eccentricity(*ship, A);
}

var calc::ship_ref_ecc  (){
    if(!ref)    //catches null pointers
        return NAN;
    return ship_ecc(*ref);
}

var calc::ship_targ_ecc (){
    if(!targ)   //catches null pointers
        return NAN;
    return ship_ecc(*targ);
} 
```

对于`eccentricity`，然后对于`distance`和也是一样的`orbitV`。所以我最终为每个计算提供了四个函数。正如你所看到的，[`calc.hpp`](https://github.com/patrickpowns/corbit/blob/v2/include/corbit/calc.hpp)这会产生大量重复的代码。重复的代码是一件坏事。

## 我的问题是

有什么方法可以打电话

```
calc.ship.targ.eccentricity();
calc.ship.ref.eccentricity(); //or variation thereof 
```

或者

```
calc.ship.targ(eccentricity);
calc.ship.ref(eccentricity);  //or variation thereof 
```

代替

```
calc.ship_targ_ecc();
calc.ship_ref_ecc(); 
```

? 我想知道你是否可以做一些花哨`operator()`的重载，或者传递一个函数，或者`friend`在`calc`. 理想情况下，我应该只能访问[`31 - 53`](https://github.com/patrickpowns/corbit/blob/v2/include/corbit/calc.hpp)所有线路`public`。

谢谢！

编辑：有一个例子：[https](https://ideone.com/jypJQS) ://ideone.com/jypJQS这是它应该输出的内容以及它现在是如何工作的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T22:28:37.390

这可能需要一些重构，但我认为这是值得的。对于简单的游戏，您可以使用 OOP 和多态来解决问题。

首先，创建一个`object`类。

```
 class Object {

 public:
    Object();
    ~Object();
 }; 
```

这个对象类将成为游戏中所有对象（船、角色等）的基础。然后，您将为您的`ship`.

```
 class Ship : public Object {

 }; 
```

这将允许轻松扩展到需要相同原理的未来对象。

在对象类中，您将拥有一些基本属性：

*   物理（可选）
*   方面
*   速度（最后计算的速度）
*   受控（布尔 - 当前控制船与否）

`calc`这将消除与and`ship`类建立硬关系的需要。

接下来，您将更改您的`calc`班级以成为一般班级。您不想依赖单个船舶对象，这很麻烦。

**选项1**

`calc`您可以为每个对象创建一个类的实例。该`calc`实例可以访问`object`and`ship`类的已有属性。

**选项 2**

创建一个通用`calc`类，要求您传递对船/对象实例的引用。`calc->eccentricity(&ship, target);`

**选项 3**

在一个可能的`manager`类或一个简单的“全局”变量中。您可以引用当前控制的船（如果这是您的系统的工作方式，我不确定）。或者您可以存储船的索引，并且所有实例都保存在`vector<&Ship>`.

在一个简单的游戏中，直接的 OOP 就足够了，但如果你想要更多的解耦，基于组件的游戏设计将是一个更好的选择（当然，结合 OOP）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T22:09:23.427

也许这改变了你当前的代码太多。但我认为 calc 中的函数应该是 object 的成员。所以你可以这样：

```
ship.eccentricity(target); 
```

让我感到困惑的是（这里可能是最大的问题）是您似乎在 calc 对象（私有成员）中定义了一些硬关系。那些是为了什么？从代码中，我猜每个“船”都有一个 calc 对象。如果是，那么将代码添加到对象而不是维护对象和计算之间的 1-1 关系将是另一个原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T01:13:14.970

所以我把它交给了[/r/learnprogramming](http://www.reddit.com/r/learnprogramming/comments/15e1w8/c_are_these_member_class_function_passing/)，我从 zzyzzyxx 那里得到了一个很好的答案（一如既往）。他的回答：

> 简单地使用需要两个或三个参数的函数有什么问题？他们不必在任何特殊`calc`班级。也许是一个`calc`命名空间。我不确定这对您的其他设计是否有意义，但是如果没有合理的默认值，那么将其设为成员函数以便任何东西都可以计算出它需要的目标和潜在的参考点呢？

所以基本上，不用担心这一切`calc.eccentricity(A, B)`，，生意，只是`calc.ship_ecc(A)`说`calc.ship_ref_ecc()`

```
calc.eccentricity(*calc.targ(), B) 
```

另外，不要做`calc`一个单例，让它成为一个命名空间。
我现在就去做。

# html - HTML 5 拖放到正确的位置

> ID：14024644
> 
> 赞同：1
> 
> 时间：2012-12-24T18:32:43.370
> 
> 标签：html, drag-and-drop

我正在尝试为孩子们制作一个简单的教育游戏，他们将在其中拖放行星的图片，并需要以正确的顺序将它们放入正确的盒子中。

我想弄清楚的是让检查被放置在盒子上的元素所需的 JS 是与该盒子匹配的元素。到目前为止，我的代码允许我拖放但没有检查。这是我所拥有的：

```
<script type="text/javascript">

    function allowDrop(ev){
        ev.preventDefault();
    }

    function drag(ev){
        ev.dataTransfer.setData("content", ev.target.id);
    }

    function drop(ev){
        ev.preventDefault();
        var image= ev.dataTransfer.getData("content");
        ev.target.appendChild(document.getElementById(image));
    }
</script>

<section id="planetbox">
    <img id="mercuryImg" draggable="true" ondragstart="drag(event)" src="./images/planets/mercury.gif">
</section>

<section id="mercurybox"ondrop="drop(event)" ondragover="allowDrop(event)"> </section> 
```

任何帮助都会非常棒。PS 需要使用 HTML 5，只有 CSS 和 JS 没有库 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T21:10:57.083

我设法在函数 drop(ev) 上使用以下代码解决了我的问题：

```
function drop(ev){
    ev.preventDefault();
    var image= ev.dataTransfer.getData("content");
    if ( image == ev.target.id) {
           ev.target.appendChild(document.getElementById(image));
    }
    else {

    }
                  } 
```

# php - 无法查看使用 php 的 ZipArchive 函数创建的 Zip 内的文件（但有内存）

> ID：14024645
> 
> 赞同：4
> 
> 时间：2012-12-24T18:32:50.850
> 
> 标签：php, zip

```
<?php
       $error = "";
       $file_folder = "temp/";
        // folder to load files
 if (extension_loaded('zip')) {
    // Checking ZIP extension is available
    $zip = new ZipArchive();
    // Load zip library
    $zip_name = "images_".date("d-m-Y") . ".zip";
    // Zip name
    if ($zip -> open($zip_name, ZIPARCHIVE::CREATE) !== TRUE) {
        // Opening zip file to load files
        $error .= "* Sorry ZIP creation failed at this time";
    }
    $iterator = new RecursiveIteratorIterator(new RecursiveDirectoryIterator("../uploads/"));
    $files = iterator_to_array($iterator, true);

    foreach ($iterator as $file) {
        $zip -> addFile($file_folder . $file);
        // Adding files into zip
    }
    print_r($zip);
    //echo $zip_name;
    if (file_exists($file_folder.$zip_name)) {
        // push to download the zip
        header('Content-type: application/zip');
        header('Content-Disposition: attachment; filename="' . $zip_name . '"');
        readfile($zip_name);
        // remove zip file is exists in temp path
        unlink($zip_name);
    } else {
        echo "error";
    }

    $zip -> close();
//} else
//  $error .= "* Please select file to zip ";
 } else
$error .= "* You dont have ZIP extension";

?> 
```

我尝试输出 $zip 对象并得到以下响应： ZipArchive Object ( [status] => 0 [statusSys] => 0 [numFiles] => 12 [filename] => /var/www/bigb/ajax/images_24-12 -2012.zip [评论] => )

状态零说明创建 zip 时没有错误（参考：[http](http://www.php.net/manual/en/zip.constants.php) ://www.php.net/manual/en/zip.constants.php ）

我参考了帖子： 1）[从网站的单个目录下载所有图像](https://stackoverflow.com/questions/4622006/download-all-images-from-a-single-directory-of-a-website) 2）[如何使用 php 创建一个 zip 文件并在用户下载后将其删除？](https://stackoverflow.com/questions/5603851/how-to-create-a-zip-file-using-php-and-delete-it-after-user-downloads-it) 3) [http://www.9lessons.info/2012/06/creating-zip-file-with-php.html](http://www.9lessons.info/2012/06/creating-zip-file-with-php.html)

第三个对我帮助最大，而在另一个 2 中，我的状态为 23。

问题：我可以创建一个 zip 并且下载它没有问题，但是当我打开 zip 时，我看不到里面的任何文件，但 zip 的内存在 mbs 中。

请帮帮我...

更新：由于 print_r / echo 和/或试图覆盖同一文件而发生错误 23。

更新 2：问题已解决。这是由于 RecursiveDirectoryIterator 中的路径（即 ../uploads/），一旦我将代码移动到主文件夹并将路径更改为（uploads/），一切都开始正常工作。赞！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T11:57:55.880

这是由于 RecursiveDirectoryIterator 中的路径（即 ../uploads/），一旦我将代码移动到主文件夹并将路径更改为（uploads/），一切都开始正常工作。赞！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T20:39:08.710

我认为您提供的文件路径`$zip->addFile()`不正确。您无需将任何内容附加到`$file`. 以下将起作用：

```
foreach ($iterator as $file) {
    $zip -> addFile($file);
} 
```

在您的情况下，`$file`将包含文件的确切相对路径，例如`../uploads/file.ext`.

# java - BO和服务之间的区别？

> ID：14024646
> 
> 赞同：1
> 
> 时间：2012-12-24T18:32:58.127
> 
> 标签：java, design-patterns, naming-conventions

我正在用 Java 设计一个购物车 Web 应用程序。

许多 Java 应用程序似乎采用了我想使用的相同命名约定。

例如：

*   ***_*** - 持久化到数据库的实体
*   **___DAO** - 提供 CRUD 方法将 Item 持久化到数据库的 DAO
*   **___BO** - 我只看到这些用作 DAO 的薄包装。这些还有其他意义吗？
*   **___Service** - 用于暴露 API？

大多数设计师如何在 BO 和 Service 之间拆分代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T00:03:36.740

如果您不使用 EJB，我认为会有一点混乱。您命名为“实体”对象的对象是业务对象。在基于 POJO 的应用程序中，BO 代表域。看看这个示例项目：[Spring's Pet Store](https://src.springframework.org/svn/spring-maintenance/trunk/samples/jpetstore/src/org/springframework/samples/jpetstore/)。

“**域**”目录包含 BO。请注意，有一个“ **service** ”和一个“ **dao** ”目录，其中显然包含了各自的服务和 DAO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T18:34:53.010

我会直接在服务中使用 DAO（没有 BO），服务点层是添加缓存、事务性的东西，如果需要，您也可以轻松地将它们公开为 web 服务

# sql - 查找是否存在多个交叉点

> ID：14024647
> 
> 赞同：1
> 
> 时间：2012-12-24T18:33:02.340
> 
> 标签：sql, sql-server-2008-r2

非常简单的问题，只是无法解决我的问题。
示例：
3 个表。所有者 <-> OwnerAnimal <-> 动物

动物可以有多个主人，主人可以有多个动物。
现在，给定一个特定的所有者，找到与给定所有者有共同动物的其他所有者。

我认为我们需要多次加入同一张表，如下所示：

```
select distinct  
o2.Owner_Id,   
o2.Name  
from Owner o  
left join OwnerAnimal  oa  
on o.Owner_Id = oa.Owner_Id   
left join OwnerAnimal oa2   
on oa.Animal_id = oa2.Animal_Id   
left join Owner o2   
on. oa2.Owner_Id = o2.Animal_Id   
Where o.Owner_Id = 100 and o2.Owner_Id <> 100 --To exclude current owner from the list 
```

但我不确定这是否是正确的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T18:37:19.657

如果您想要动物的任何重叠，以下是我的想法：

```
select distinct ao.owner
from AnimalOwners ao
where ao.animal in (select animal from AnimalOwners ao1 and ao1.owner = 100) and
      ao.owner <> 100 
```

您可以将其重写为连接，但`in`似乎更有意义。

如果您希望所有动物都相同，那么您需要进行连接。

```
with a as (select distinct animal from AnimalOwners where ao.owner = 100)
select ao.owner
from AnimalOwners ao left outer join
     a
     on ao.animal = a.animal
where ao.owner <> 100
group by ao.owner
having count(disinct ao.animal) = (select count(*) from a) and
       count(*) = count(a.animal) 
```

这个想法是使用`having`子句进行集合比较。第一个条款保证第二个所有者的动物数量与 100 个相同。第二个条款保证第二个所有者拥有的动物不属于原始所有者。`left outer join`饲养所有动物。

关键字的使用`distinct`适用于动物可能出现两次的情况。目前尚不清楚这是否被允许。

如果您希望所有者拥有与原始所有者相同的动物，但可以拥有其他动物，则将前一个查询中的`left outer join`a更改为。`join`

# c++ - 带有动态编程的 C++ 中的 UVa 3n + 1

> ID：14024652
> 
> 赞同：2
> 
> 时间：2012-12-24T18:33:38.770
> 
> 标签：c++, algorithm

所以，有办法做到这一点，和/或优化这一点。我很傻，我立即想实现一个递归函数，后来导致分段错误，然后我尝试采用动态编程，它似乎有效，但不知何故我得到了错误的答案。

问题[在这里](http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&category=3&page=show_problem&problem=36)

所以这是我的代码，我认为这是不言自明的。

```
#include <iostream>

using namespace std;

int cycleLength(long long int);

int cycleLengthResult[1000000];

int main(int argc, char *argv[])
{
    int i = 0, j = 0, cur = 0, max = 0;
    while ( cin >> i >> j )
    {
        if ( i > j ) //swap to ensure i <= j
        {
            int s = i;
            i = j;
            j = s;
        }
        for ( int k = i ; k <= j ; ++ k )
        {
            cur = cycleLength(k);
            if (cur > max) max = cur;
        }
        cout << i << " " << j << " " << max << endl;
        max = 0;
    }
}

int cycleLength(long long int arg)
{
    if ( arg > 1000000 ) //if out of array bound, then don't memorize, just calculate
    {
        if (arg % 2 == 0)
        {
            return 1 + cycleLength(arg/2);
        }
        else
        {
            return 1 + cycleLength(arg*3+1);
        }
    }
    if (!cycleLengthResult[arg-1]) //if result for arg doesn't exist then....
    {
        int valueForArg = 0;
        if (arg == 1)
        {
            valueForArg = 1;
        }
        else if (arg % 2 == 0)
        {
            valueForArg = 1 + cycleLength(arg/2);
        }
        else
        {
            valueForArg = 1 + cycleLength(arg*3+1);
        }
        cycleLengthResult[arg-1] = valueForArg;
    }
    return cycleLengthResult[arg-1];
} 
```

我通过了所有样本输入，还通过了 (1, 1000000) 进行速度测试。但似乎这不是问题。

我想修复我的代码，而不是更改使用的方法，当然，我不能不使用递归，而是在 main 中使用循环，这不会溢出。但这很有趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T19:21:37.943

仔细阅读声明：

**整数 i 和 j 必须按照它们在输入中出现的顺序出现在输出中**

所以在阅读后保存它们并打印保存的值。

# zend-framework - Zend Framework Translation for Arabic 无法在 Linux 服务器上运行

> ID：14024653
> 
> 赞同：0
> 
> 时间：2012-12-24T18:33:45.013
> 
> 标签：zend-framework, zend-translate

我在 Zend Framework 中开发了一个应用程序，并将其翻译成阿拉伯语。它在我的本地 Windows 机器上运行良好。当我将它上传到 Linux 机器时，使用视图翻译功能没有收到任何文本。

我目前正在使用 CSV 适配器进行翻译。任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:10:01.237

我遇到了完全相同的问题，我认为根本原因是 Zend Translate 库用来解析 CSV 文件的 PHP fgetcsv 函数不能与 UTF-8 文本一起正常工作。

我发现如果我在翻译 .csv 文件中的文本值周围加上双引号，问题就解决了，例如，在我的情况下，如果我更改了行：

`MWBtnFind;ابحث`

至

`MWBtnFind;"ابحث"`

它工作得很好

# android - onPostExecute(Result) 方法的执行顺序是什么？我可以更改它吗？

> ID：14024655
> 
> 赞同：2
> 
> 时间：2012-12-24T18:33:57.497
> 
> 标签：android, android-asynctask

我正在实现一个非常简单的任务 - 用户授权。我通过 AsyncTask 实现的所有网络操作。我有一个问题。我有两个 AsyncTask - 一个是授权，它为所有网络任务操作（JSON 解析、REST 实现等）调用更底层和通用的，这也是通过 AsyncTask 实现的。我有一个问题：这两个操作的 onPostExecute 方法调用顺序错误。

所以问题是——我能不能设置它们的执行顺序，或者你给我一些建议如何以正确的方式处理这一切。但不要建议我拒绝 AsyncTask 并使用其他东西。我想要 AsyncTask 的正确解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T18:40:51.410

听起来你应该有一个单一`AsyncTask`的用于高级后台操作。低层的网络活动应该直接在高层调用`doInBackground`。通过`AsyncTask`运行两个 s，您将失去轻松协调他们个人工作时间的能力。

如果由于某种原因您需要在一个中独立运行较低级别的操作`AsyncTask`（即出于授权以外的目的），那么它`AsyncTask`也应该直接从其自身调用低级别的网络活动`doInBackground`；但是，低级活动仍应与任何`AsyncTask`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T18:35:44.483

在 1\. 第一个 asycTask onPostExecute 方法中运行你的 2\. asycTask。顺便说一句，你可以自己设置它的顺序。

如下所示，

```
 private class task1 extends AsyncTask<URL, Integer, Long> {

     protected int doInBackground(URL... urls) {
         // do your stuf
         return 1;
     }

     protected void onPostExecute(int result) {
           // first task finished and second task starts
           new task2().execute();
     }
 }

private class task2 extends AsyncTask<URL, Integer, Long> {

     protected int doInBackground(URL... urls) {
     // do your stuf
         return 1;
     }

     protected void onPostExecute(int result) {
        // do your stuf
     }
 } 
```

# jquery - 在此导航中添加子类别下拉列表

> ID：14024657
> 
> 赞同：1
> 
> 时间：2012-12-24T18:34:14.890
> 
> 标签：jquery, css, drop-down-menu, navigation

我试图弄清楚如何在此导航的类别 3 上添加子类别下拉列表。例如，让我们说 3 个子类别。我尝试了很多方法，但似乎无法弄清楚。所以基本上，当你点击类别 3 时，它下面会出现另外 3 个链接。任何人都可以协助添加该编码吗？这是我在 1 个 html 文档中的全部代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>-</title>
<style TYPE="text/css"> 
a:link, a:visited, a:hover, a:active {
    color: #000;
    text-decoration: none;
}
#trigger {
    line-height: 50px;
    float: right;
    height: 50px;
    font-size: 1.2em;
}
a.menu-link {
    float: right;
    display: block;
    padding-right: 0.5em;
    padding-left: 0.5em;
    margin-right: 1em;
    color: #000;
}
nav[role=navigation] {
    clear: both;
    -webkit-transition: all 0.3s ease-out;
    -moz-transition: all 0.3s ease-out;
    -ms-transition: all 0.3s ease-out;
    -o-transition: all 0.3s ease-out;
    transition: all 0.3s ease-out;
}
.js nav[role=navigation] {
    overflow: hidden;
    max-height: 0;
}
nav[role=navigation].active {
    max-height: 18em;
}
nav[role=navigation] ul {
    margin: 0;
    padding: 0;
    border-top: 1px solid #000;
}
nav[role=navigation] li a {
    display: block;
    padding: 0.8em;
    border-bottom: 1px solid #000;
    font-size: .875em;
}
</style>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>

<script type="text/Javascript">
$(document).ready(function() {
  $('body').addClass('js');
  var $menu = $('#menu'),
    $menulink = $('.menu-link');

$menulink.click(function() {
  $menulink.toggleClass('active');
  $menu.toggleClass('active');
  return false;
});});
</script>
</head>

<body>
<div id="trigger"><a href="#menu" class="menu-link">Menu</a></div>
</div>
<nav id="menu" role="navigation">
<ul>
<li><a href="#">Category 1</a></li>
<li><a href="#">Category 2</a></li>
<li><a href="#">Category 3</a></li>
<li><a href="#">Category 4</a></li>
<li><a href="#">Category 5</a></li>
<li><a href="#">Category 6</a></li>
</ul>
</nav>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T18:55:50.070

我用之前发布的 JSFiddle 进行了尝试。我只是`<ul>`在html元素中添加了另一个并添加了css代码以使其默认隐藏，然后将jquery函数添加到Category3单击函数以使新`<ul>`显示本身。

[http://jsfiddle.net/ApNhK/1/](http://jsfiddle.net/ApNhK/1/)

可能不是最好的解决方案，而且我相信您必须更改一些内容，就像单击任何额外选项一样，它会隐藏所有额外选项菜单。但这也许可以让您了解一种可以解决的方法？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T18:54:56.503

这是你想要的吗？

```
$('#menu ul li:eq(2)').click(function(){ 
    if($(this).children("a").size()==1){
        $(this).append("<a href='#'>subcategory 1</a>");
        $(this).append("<a href='#'>subcategory 2</a>");
        $(this).append("<a href='#'>subcategory 3</a>");
    }
});​​ 
```

这里有一个 JsFiddle 示例：http: [//jsfiddle.net/ApNhK/3/](http://jsfiddle.net/ApNhK/3/)

# c# - 如何在 C# 中打开与 Microsoft Access 数据库的连接

> ID：14024660
> 
> 赞同：7
> 
> 时间：2012-12-24T18:34:29.123
> 
> 标签：c#, c#-4.0, ms-access, database-connection

我正在使用 Microsoft Access 创建我的数据库。这是我的代码：

```
static string Constr = "Provider=Microsoft.Jet.OLEDB.4.0;" 
                     + "Data Source = MyData.accdb";
OleDbConnection Conn = new OleDbConnection(Constr);
DataSet DataSet1 = new DataSet();
string SQLstr = "Select * from Tabel";
OleDbDataAdapter DataAdapter1;
Conn.Open(); 
```

我得到了这个例外：

> System.Data.dll 中出现“System.Data.OleDb.OleDbException”类型的未处理异常
> 
> 附加信息：无法识别的数据库格式

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T18:43:39.467

您正在尝试使用 OleDb 提供程序打开使用 Access 2007/2010 (accdb) 创建的 Access 数据库，该提供程序只能理解使用 Access 2003 创建的 MDB 文件

要使用的提供程序`Microsoft.ACE.OleDB.12.0`应该已经安装了最新版本的 Office。

或者，您可以从[Microsoft Access 数据库引擎](http://www.microsoft.com/en-us/download/details.aspx?id=13255)
下载适当的位 只需注意下载适合您使用的平台（x86 或 x64）的版本。

这就是要使用的连接字符串

```
Provider=Microsoft.ACE.OLEDB.12.0;Data Source=MyData.accdb"; 
```

注意：请记住，如果您安装了 Office，则相应的提供程序具有相同的 Office 位数，因此 Office 64 位附带 64 位版本的 ACE，32 位版本相同。这种情况在应用程序的部署中提出了一个非常困难的问题。您需要使用相同的位数编译您的应用程序，否则您将无法使用已安装的提供程序。（或者卸载不兼容的 Office 版本并重新安装兼容的版本。当然，如果您应该能够说服您的客户 Office 是不兼容的应用程序 :-)

# matlab - 提高 MatLab 中的 ModHausdorffDist 性能

> ID：14024664
> 
> 赞同：1
> 
> 时间：2012-12-24T18:34:45.463
> 
> 标签：matlab

有什么方法可以提高此功能的性能吗？它包含一个嵌套的 for 循环。如何进行 MatLab 向量化？

有什么方法可以`for`从以下代码中删除循环？

```
function [ mhd ] = ModHausdorffDist( A, B )

Asize = size(A);
Bsize = size(B);

% Check if the points have the same dimensions
if Asize(2) ~= Bsize(2)
    error('The dimensions of points in the two sets are not equal');
end

% Calculating the forward HD

fhd = 0;                    % Initialize forward distance to 0
for a = 1:Asize(1)          % Travel the set A to find avg of d(A,B)
    mindist = Inf;          % Initialize minimum distance to Inf
    for b = 1:Bsize(1)      % Travel set B to find the min(d(a,B))
        tempdist = norm(A(a,:)-B(b,:));
        if tempdist < mindist
            mindist = tempdist;
        end
    end
    fhd = fhd + mindist;    % Sum the forward distances
end
fhd = fhd/Asize(1);         % Divide by the total no to get average

% Calculating the reverse HD

rhd = 0;                    % Initialize reverse distance to 0
for b = 1:Bsize(1)          % Travel the set B to find avg of d(B,A)
    mindist = Inf;          % Initialize minimum distance to Inf
    for a = 1:Asize(1)      % Travel set A to find the min(d(b,A))
        tempdist = norm(A(a,:)-B(b,:));
        if tempdist < mindist
            mindist = tempdist;
        end
    end
    rhd = rhd + mindist;    % Sum the reverse distances
end
rhd = rhd/Bsize(1);         % Divide by the total no. to get average

mhd = max(fhd,rhd);         % Find the minimum of fhd/rhd as 
                            % the mod hausdorff dist

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T20:41:33.420

我会尝试这样的事情

```
D = bsxfun( @minus, permute( A, [3 1 2] ), permute( B, [1 3 2] ) );
D = sqrt(sum( D.^2, 3 )); % all pair-wise distances. 
% I think there is a pdist2 function that can do this computation
% of the distances. 
f = min( D, [], 1);
fhd = mean(f);
r = min( D, [], 2);
rhd = mean(r);
mhd = max( fhd, rhd ); 
```

`D`通过查看 d_ij 的表达式，可以进一步改进计算距离矩阵：

> d_ij^2 = ||a_i||^2 + ||b_j||^2 - 2

这意味着 和 之间的唯一交互`A`是`B`通过 Matlab 知道计算非常有效的点积。

# php - 使用 preg_replace 检查多个模式？

> ID：14024665
> 
> 赞同：2
> 
> 时间：2012-12-24T18:34:49.903
> 
> 标签：php, preg-replace, design-patterns

我正在寻找验证提交的帖子的解决方案。我想检查是否有人提交（在帖子中）：

*   用于嵌入 YouTube 或 Vimeo 视频的 iframe，替换 iframe 中使用的正确宽度
*   URL，替换为 HTML 可点击链接
*   图像 URL，用 HTML 替换它

我能够为这些要求中的每一个找到正确的正则表达式，但是使用 3 个单独的 preg_replace 函数会导致干扰。例如，检测一个 URL 也会检测到 Iframe 内的 URL。

我已经在 Stackoverflow 和互联网的其他地方搜索了一个解决方案。但我不是专家，所以也许有人可以帮助我或指导我到正确的教程/网站/操作方法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T18:40:25.857

您可以简单地传递 URL 模式数组，`preg_replace()`如下所示：

```
$pattern_array = array(
    '/somepattern/',
    '/someotherpattern/',
    '/yetanotherpattern/',
)
$replacement_array = array(
    'somereplacement',
    'someotherreplacement',
    'yetanotherreplacement'
}

$result = preg_replace($pattern_array, $replacement_array, $subject_string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T18:45:06.293

您可以做的是首先将 iframe 与 preg_match 匹配，然后用占位符替换它们。

然后你可以替换 urls/images。然后，将 iframe 占位符替换为您之前匹配的 iframe。

您可以使用 preg_replace_callback 生成唯一的顺序占位符，这样您就可以运行一些代码来为每个替换增加一个 $placeholder_id。

这是一种通用策略，通常可以大大简化复杂的解析。

# python - 如何将 lxml.etree 直接安装到 web2py 模块？

> ID：14024669
> 
> 赞同：0
> 
> 时间：2012-12-24T18:34:59.163
> 
> 标签：python, installation, web2py, web2py-modules, xml.etree

我在我的 Windows 桌面上有一个 lxml.etree 的工作设置。

因为我想把它移到我的服务器上，而不是在 sitepackages 中安装 lxml，我想`modules`直接将它安装在里面，所以这个`lxml`版本是特定于这个应用程序/站点的。

我直接在 linux 服务器上的模块下复制了我的 lxml 目录，我得到了这个错误：

**没有名为 etree 的模块**

所以它似乎明白有一个`lxml`, 包但看不到`etree`里面。有任何想法吗 ？另外，我找不到确切的位置可以在网站上下载 ubuntu 9.10 的二进制文件：http: [//lxml.de/installation.html#installation](http://lxml.de/installation.html#installation)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:44:25.210

您不能只是将 Windows 版本复制到 Linux 服务器上；`lxml`使用需要为目标平台编译的 C 扩展。

例如，该`etree`模块是这样一个已编译的扩展，在 Linux 上是`etree.so`，而在 Windows 上它将是一个`etree.dll`文件。

对于 Ubuntu，查找[`python-lxml`](http://packages.ubuntu.com/search?keywords=python-lxml)或安装依赖项[`libxml2-dev`](http://packages.ubuntu.com/search?keywords=libxml2-dev)，[`libxslt1-dev`](http://packages.ubuntu.com/search?keywords=libxslt1-dev)以及[`python-dev`](http://packages.ubuntu.com/search?keywords=python-dev)，[`python-pip`](http://packages.ubuntu.com/search?keywords=python-pip)然后使用在您的服务器`sudo pip install lxml`上安装。`lxml`

# ajax - 2 ajax 查询到 JS [谷歌地图]

> ID：14024670
> 
> 赞同：1
> 
> 时间：2012-12-24T18:35:15.300
> 
> 标签：ajax, google-maps

这是我的代码。 [JS小提琴](http://jsfiddle.net/qqfYK/)

我通过xml从mysql获取数据。它工作正常。但是 iu 必须像这样通过 xml 从 mysql 获取第二个查询。但它不起作用。脚本停止工作。我怎样才能对 JS 文件进行 2 个或多个 ajax 查询？..

这部分是我手动写的。它必须由脚本生成..但是当我通过 xml（通过 ajax）执行此操作时，脚本将无法工作:(

对不起我的英语不好。

```
 flightPlanCoordinates = [
                 new google.maps.LatLng(40.9921196514,47.8604733650 ),
                 new google.maps.LatLng(40.9922511293,47.8606186245 ),
                 new google.maps.LatLng(40.9926358563,47.8611079146 ),
                 new google.maps.LatLng(40.9929381070,47.8615028229 ),
                 new google.maps.LatLng( 40.9931715315,47.8620863814 ),
                 new google.maps.LatLng( 40.9933869955,47.8623375976 ),
                 new google.maps.LatLng(40.9936024589,47.8625888155 ),
                 new google.maps.LatLng(40.9942600516, 47.8634730879 ),
                 new google.maps.LatLng(40.9946698905, 47.8639284456),
                 new google.maps.LatLng(40.9951427577,47.8643998201 ),
                 new google.maps.LatLng(40.9956477404 ,47.8648835770),
                 new google.maps.LatLng(40.9959645185, 47.8651699964),
                 new google.maps.LatLng( 40.9962812958, 47.8654564186 ),
                 new google.maps.LatLng( 40.9965401588,47.8657069220 ),
                 new google.maps.LatLng( 40.9970324883 ,47.8661781983),
                 new google.maps.LatLng(40.9972659548, 47.8663989707 ),
                 new google.maps.LatLng(40.9975468767, 47.8664409273),
                 new google.maps.LatLng( 40.9978740427,47.8662277913 ),
                new google.maps.LatLng( 40.9982012084,47.8660150777 ),
                    new google.maps.LatLng( 40.9985497469,47.8658461824),
 new google.maps.LatLng(40.9988327045,47.8660951747),
  new google.maps.LatLng(40.9991045183,47.8664072712),                
   new google.maps.LatLng(40.9992585926,47.8665868156),                    

        ];
        var flightPath = new google.maps.Polyline({
          path: flightPlanCoordinates,
          strokeColor: '#FF0040',
          strokeOpacity: 1.0,
          strokeWeight: 2
        });

        flightPath.setMap(map);

  google.maps.event.addListener(flightPath,'mouseover', function() {

        this.setOptions({strokeColor: '#3ADF00' });
           this.setOptions({strokeOpacity: 1.0 });
           this.setOptions({strokeWeight: 4 });
  });

     google.maps.event.addListener(flightPath,'mouseout', function() {

        this.setOptions({strokeColor: '#FF0040' });
           this.setOptions({strokeOpacity: 1.0 });
           this.setOptions({strokeWeight: 2 });
  });

       var mpenc = new google.maps.InfoWindow();
  var contentString ="informasiya burada olacaq ";
  google.maps.event.addListener(flightPath,'click', function(event) {
    mpenc.setContent(contentString);
    mpenc.setPosition(event.latLng);
    mpenc.open(map);
  }); 
```

* * *

当我添加第二个 ajax 查询脚本时停止。为什么 ？我不能同时使用 2 个或更多 ajax 查询？？请帮忙..

```
 // Change this depending on the name of your PHP file
      downloadUrl("gxml.php", function(data) {
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName("marker");

} 
```

# java - WebContent 中的 GWT 访问文件

> ID：14024673
> 
> 赞同：0
> 
> 时间：2012-12-24T18:35:23.100
> 
> 标签：java, jakarta-ee, gwt, servlets, glassfish

我正在尝试发送文件夹的内容，`String[]`但路径有一些问题。在托管模式下，以下代码可以正常工作：

```
File dir= new File("folder-in-webcontents-dir");    
String contents=dir.list();    
return contents; 
```

此片段在 RPC 调用的服务器端实现中执行。在使用日志记录后将该项目部署在 glassfish 中时，我看到 `.getabsolutefilepath()` 返回类似`c:\glassfish\glassfish\domains\domain1\CONFIG(??)\folder-in-webcontents-dir`.

那么我怎样才能指向这个特定的文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T20:07:17.180

您可以在服务器端（在您的 RPC 上）使用此代码

```
String URL = getServletContext().getRealPath("/folder-in-webcontents-dir");
File dir = new File(URL);
return dir.list(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T20:00:16.623

采用：

```
File file = new File("/folder-in-webcontents-dir");
String contents=dir.list();    
Return contents; 
```

# html - 如何构建 HTML 页面的布局？

> ID：14024688
> 
> 赞同：0
> 
> 时间：2012-12-24T18:37:49.480
> 
> 标签：html, css

我想知道是否有人对如何构建网站有任何建议。我在顶部有一个徽标，我想要在其下方有一个导航栏，最后在其下方我想要页面的内容。我搞砸了几个小时，但我似乎无法让导航栏位于徽标下方和主要内容上方。有没有人有任何想法？这是我的代码：

```
<!DOCTYPE html>

<html> 

<head>
<link rel="stylesheet" href="main.css" type="text/css" />

<script type="text/javascript" src="slideshow.js"></script>

<style>
      #Slideshow1 img { width:1200px; height:500px }
 </style>

<title> Law Firm </title> <!-- Seriously, don't forget to change that.-->

<div class="heading">
<div id="head">

<div id="logo">
    <img src="logo.png" alt="Logo" width="1700" height="175">
</div>

<div id="navigation">
    <a href="#">Home</a>
    <a href="#">About us</a>
    <a href="#">Areas of Practice</a>
    <a href="#">Reviews</a>
    <a href="#">I'm running out of ideas</a>
    <a href="#">Boring....</a>
</div>
</div>
</div>

<!-- Include content types, links to external resources, keywords for the search engine, epirations and stuff, and whatever else needs to go here like titles and website icons. -->

</head>

<body> <!-- Obviously, the body starts here. -->

<div class="main">
<div id="content"> <!-- Let's kick it off with some stuff, of course. -->

<!-- Now let's get some java up in here!! -->

    <script>

      var imgArray = new Array();
      imgArray[0] = "images/pic1.png";
      imgArray[1] = "images/pic2.png";

      slideshowFade('Slideshow1','',imgArray,20,5000);

    </script>

</div>
</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T18:45:20.903

如果你对发生的事情做了一个 JSFiddle 可能会有所帮助，但我想我可以回答这个问题。

1）你把东西放在头标签中。我想你误解了它的意思。它不是页面的“标题”，而是用于说明不会显示在页面本身上的信息（例如页面的名称，页面的类型）。一切（意思是每个 div）都在`body`标签中！正文并不意味着网站的正文，它表示页面上显示的内容！

2）我只能猜测，因为您没有附加样式表，但我猜您没有`clear: both`导航、标题和徽标样式。

3) 对于我在#2 中提到的相同元素，您可能还想添加`display: block`以防万一尚未设置。

4）如果 2 和 3 不起作用，请尝试为所有元素定义高度（有时这对我有用，取决于导致问题的原因）

1 不能解决你的问题，但它是正确的。2 应该可以解决您的问题，但是您确实需要提出`main.css`问题，因为我不能确定。另外，考虑使用`ul`标签作为菜单。这是值得做的。

这是一个 JSFiddle 示例：http: [//jsfiddle.net/5JqUt/](http://jsfiddle.net/5JqUt/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T18:42:58.163

您正在 trag 中编写`HTMLK`代码，`head`因此它不可见。`<body></body>`您应该在页面的标签之间写下所有内容。只需将您的标签带`<div class="heading">`出`head`标签并将其放入`body`标签内即可。

[这是一个关于 HTML 的答案](https://stackoverflow.com/questions/12361029/how-can-i-get-a-sticky-footer-on-my-wordpress-theme/12361147#12361147)，如果你看一下[小提琴](http://jsfiddle.net/FPCWD/7/)的例子，你就会明白一点。请记住，网页中的每个可见元素都是`body`标签的内容，这意味着，无论您在网页中看到什么，都属于`<body>your page content goes here</body>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T18:44:09.780

您不能在元素中包含结构元素（如您`<div>`的 s）`<head>`。所有结构元素都属于`<body>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T19:03:06.867

这是我为您制作的一些杂乱的代码（虽然是功能性的）：

```
 <body bgcolor="#f5f5f5">
<link href='http://fonts.googleapis.com/css?family=Lato:100|Lato:300' rel='stylesheet' type='text/css'>

<div style="position:absolute;top:0px;left:0px;width:100%;">
<center>
<div style="color:#c3c3c3;font-size:75px;font-family:Lato;padding-top:25px;font-weight:100;">designing rocks</div>

<div style="text-align:left;width:465px;font-size:20px;font-family:Lato;font-weight:300;padding-top:10px;"><span style="color:#00bbbb;">home</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c3c3c3;">blah</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c3c3c3;">blah</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c3c3c3;">blah</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c3c3c3;">blah</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c3c3c3;">blah</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c3c3c3;">blah</span>
</center>

<div style="position:absolute;top:165px;left:0px;width:100%;">
<center>
<div style="text-align:left;width:600px;background-color:white;font-family:Lato;font-weight:300;padding:25px;color:gray;">I LOVE content!</div>
</div>
</div> 
```

你总是可以做装饰，比如导航链接的悬停效果......告诉我它是否有用。:) 你总是可以为你的项目收集一些想法。

哦，其他答案是正确的，您的布局不起作用的原因可能是页面内容在头部。头部是页面的标题，（标题）和你想要在任何其他进入头部之前加载的脚本。正文是用户可见的页面部分。

# java-me - J2ME XML 解析

> ID：14024691
> 
> 赞同：1
> 
> 时间：2012-12-24T18:38:05.220
> 
> 标签：java-me, xml-parsing, midlet, jsr172, jdwp

我对记录的“JDWP 错误：21”还有另一个问题：[意外的 JDWP 错误 21](https://stackoverflow.com/questions/14016343/unexpected-jdwp-error-21)

我正在尝试使用以下代码将我从 servlet 收集的一些 XML 解析为 J2ME MIDlet。到目前为止没有成功，我认为由于我的 HttpConnection 上的 JDWP 错误，InputStream 是如何填充 XML 的，并且一旦解析了 Document 中的所有内容都是空的。

有没有人对 JDWP 错误有任何想法，并且该代码看起来应该可以工作吗？

在 MIDlet 中，我使用的是 JSR-172 API `javax.xml.parsers.*`。

```
if(d==form1 && c==okCommand)
    {
        // Display Webpage
         webPage = new TextBox(txtField.getString(),
                "",
                100000,
                TextField.ANY
                );
        Display.getDisplay(this).setCurrent(webPage);

        try 
        {
            HttpConnection conn = (HttpConnection)Connector.open("http://localhost:8080/Blogging_Home/Interface?Page=Bloggers&Action=VIEW&Type=XML");
            conn.setRequestMethod(HttpConnection.GET);
            int rc = conn.getResponseCode();
            getConnectionInformation(conn, webPage);
            webPage.setString(webPage.getString() + "Starting....");
            String methodString = getStringFromURL("");
            if (rc == HttpConnection.HTTP_OK) 
            {
                    InputStream is = null;
                    is = createInputStream(methodString);            
                    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();  
                    DocumentBuilder builder;  
                    Document document;
                    try  
                    {  
                        builder = factory.newDocumentBuilder(); 
                        document = builder.parse(is);  
                    } catch (Exception e) {  
                        e.printStackTrace();  
                    }
            }
            else 
            {
                    webPage.setString(webPage.getString() + "ERROR:" + rc);
            }

        }
        catch(Exception ex)
        {
            // Handle here
            webPage.setString("Error" + ex.toString());
        } 
```

# entity-framework - 获取相关实体ID而不加载它

> ID：14024695
> 
> 赞同：0
> 
> 时间：2012-12-24T18:39:20.147
> 
> 标签：entity-framework, ef-code-first

我需要使用实体框架（代码优先）列出所有订单及其相应的客户 ID。由于客户 ID 是 Orders 表中的 FK，因此无需查询 Customers 表就应该可以做到这一点。但是，EF 也会针对 Orders 和 Customers 表生成选择。

这是实体模型和用于查询订单的代码：

```
public class Order
{
    public virtual Guid Id { get; set; }

    public virtual string Description { get; set; }

    public virtual Customer Customer { get; set; }
}

public class Customer
{
    public virtual Guid Id { get; set; }

    public virtual string Name { get; set; }
}

using (var context = new LazyLoadingEfContext())
{
    foreach (var order in context.Orders)
    {
        Console.WriteLine("Order {0}, Customer {1}", order.Description, order.Customer.Id);
    }
} 
```

生成的 SQL 如下：

```
SELECT 
1 AS [C1], 
[Extent1].[Id] AS [Id], 
[Extent1].[Description] AS [Description], 
[Extent1].[Customer_Id] AS [Customer_Id]
FROM [dbo].[Orders] AS [Extent1]

exec sp_executesql N'SELECT 
[Extent2].[Id] AS [Id], 
[Extent2].[Name] AS [Name]
FROM  [dbo].[Orders] AS [Extent1]
INNER JOIN [dbo].[Customers] AS [Extent2] ON [Extent1].[Customer_Id] = [Extent2].[Id]
WHERE ([Extent1].[Customer_Id] IS NOT NULL) AND ([Extent1].[Id] =     
@EntityKeyValue1)',N'@EntityKeyValue1 uniqueidentifier',
@EntityKeyValue1='FF947EF3-5A3F-4A26-BDB9-039C49F559A7' 
```

（加上参数@EntityKeyValue1 具有不同值的其他相同查询）

有没有办法配置 EF 以便从“父”对象检索相关实体 ID 而不是加载相关实体？

顺便说一句，我已经使用 NHibernate 测试了相同的场景，并且只对 Orders 表执行了一个查询：

```
SELECT this_.Id as Id1_0_, this_.Description as Descript2_1_0_, 
this_.Customer_id as Customer3_1_0_ FROM [Order] this_ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T18:55:05.227

试试这个：

```
public class Order
{
    public virtual Guid Id { get; set; }

    public virtual string Description { get; set; }

    public Guid CustomerID { get; set; }

    [ForeignKey("CustomerID ")]
    public virtual Customer Customer { get; set; }
} 
```

之后，您应该能够进入`order.CustomerID`您的`foreach`循环，而无需查询客户表。

# resources - 如何在 Visual Studio 2012 中展开 .resx 资源文件中的所有字符串？

> ID：14024697
> 
> 赞同：1
> 
> 时间：2012-12-24T18:13:55.867
> 
> 标签：resources, visual-studio-2012, designer

VS2012 的资源设计器似乎没有办法“扩展”文本/html 的长字符串。

我必须双击每一行来展开它。

知道我要为这个本地化项目做大约 10,000 个这样的事情，如果我找不到解决办法，我会发疯的：

[http://i.imgur.com/TiKv5.jpg](http://i.imgur.com/TiKv5.jpg)

...对此：http: [//i.imgur.com/p41bn.jpg](http://i.imgur.com/p41bn.jpg)

如果没有，请建议一些替代工具、应用程序或方法来帮助我保持理智。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T18:19:38.830

尝试使用[Visual Studio Power Productivity Tools](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef)以获得一些帮助。我知道他们确实增强了它以打开和折叠解决方案文件夹，因此它可能会对您有所帮助。

在我们公司，我们编写了一个小实用程序来从 Visual Studio 中提取这些资源，以打包成我们翻译公司使用的 excel 格式。在 .NET 中做这件事并不需要太多，从长远来看，它肯定会让您的生活更轻松。

原来微软也有一个[资源重构工具](http://visualstudiogallery.msdn.microsoft.com/39ae29d3-81e1-43d4-9c48-fc9644869d84)，看起来它可以很容易地将资源从代码中提取出来，并将 resx 文件转换为其他格式。我没有亲自尝试过（我使用过生产力工具），但值得研究这个选项。

# ios - WebClip 可以指向任何不基于网络的东西吗？

> ID：14024701
> 
> 赞同：1
> 
> 时间：2012-12-24T18:40:24.110
> 
> 标签：ios, web-clips

据我了解，创建 WebClip 是为了指向一个网络应用程序。

然而，另一方面，它在内部所做的只是让系统知道应该打开 URL（并且作为示例 Safari 处理）。

我的问题是 WebClip 是否可以包含任何其他非 http:// url（作为邮件、短信或任何其他注册协议的示例协议）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T19:34:36.127

是的和不...

Web Clip 用于 Web 内容。您必须在 MobileSafari 中查看网页（或 Web 应用程序）才能将 Web Clip 保存到主屏幕 - 无法在 Safari 中查看的 URL（邮件、短信等）因此不能保存到主屏幕。

不过，这并不意味着您会被 HTML 所困扰：Safari 可以查看 PDF、Office 和 iWork 文档、图像和各种其他垃圾，并且“添加到主屏幕”在查看其中一个时仍然有效。（并不是说它特别有用……）

此外，您的 Web 内容不必是基于 Web 的：如果您在`data:`URL 中编码您的网页，将其保存到主屏幕将为您提供一个存储在本地的“Web 应用程序”。

# html - 如何将 clearfix 应用于所有 html 元素？

> ID：14024704
> 
> 赞同：-2
> 
> 时间：2012-12-24T18:40:44.527
> 
> 标签：html, css

有一些方法可以解决 clearfix。
我想知道是否有人对将 clearfix 应用于所有元素有一些经验。
是否有任何问题可能导致显着问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T18:51:28.360

如果您对所有元素应用 clearfix，那么您将无法浮动任何东西，因为您尝试浮动的每个元素都将立即被清除。¹

如果你*必须*使用 clearfix，你应该只在绝对必要时使用它。这意味着您必须指定要将其应用于哪些元素，而不仅仅是将其应用于每个元素。

* * *

¹ [好吧，这取决于您使用的是哪种 clearfix。例如，如果您使用的是`:after`伪元素，那么它将不适用于某些浏览器中的某些元素。不过，我的观点仍然成立。]

# java - Android Camera Preview YUV 格式转为 GPU 上的 RGB

> ID：14024713
> 
> 赞同：6
> 
> 时间：2012-12-24T18:41:50.067
> 
> 标签：java, android, gpu, rgb, yuv

我复制粘贴了一些我在stackoverflow上找到的代码，将默认的相机预览YUV转换为RGB格式，然后将其上传到OpenGL进行处理。效果很好，问题是大多数 CPU 都忙于将 YUV 图像转换为 RGB 格式，结果变成了瓶颈。

我想将 YUV 图像上传到 GPU 中，然后在片段着色器中将其转换为 RGB。我采用了相同的 Java YUV 到 RGB 函数，我发现它在 CPU 上工作，并试图让它在 GPU 上工作。

这变成了一场噩梦，因为在 Java 和 GPU 上进行计算存在一些差异。首先，预览图像在Java中是字节[]，但是字节是有符号的，所以可能有负值。

此外，片段着色器通常处理 [0..1] 浮点值而不是字节。

我确信这是可以解决的，我几乎解决了。但是我花了几个小时试图弄清楚我做错了什么并且无法让它发挥作用。

最重要的是，我要求有人编写这个着色器函数并最好对其进行测试。对我来说，这将是一项乏味的猴子工作，因为我真的不明白为什么这种转换会以这种方式工作，我只是尝试在 GPU 上模仿相同的功能。

这与我在 Java 上使用的功能非常相似： [Displaying YUV Image in Android](https://stackoverflow.com/questions/9192982/displaying-yuv-image-in-android)

我在CPU上做了一些工作，比如把1.5*w *h bytes的YUV格式转成aw* h*YUV，如下：

```
static public void decodeYUV420SP(int[] rgba, byte[] yuv420sp, int width,
        int height) {
    final int frameSize = width * height;

    for (int j = 0, yp = 0; j < height; j++) {
        int uvp = frameSize + (j >> 1) * width, u = 0, v = 0;
        for (int i = 0; i < width; i++, yp++) {
            int y = (int) yuv420sp[yp]+127;
            if ((i & 1) == 0) {
                v = (int)yuv420sp[uvp++]+127;
                u = (int)yuv420sp[uvp++]+127;
            }
            rgba[yp] = 0xFF000000+(y<<16) | (u<<8) | v;
        }
    }
} 
```

我添加了 127 因为字节已签名。然后我将 rgba 加载到 OpenGL 纹理中，并尝试在 GPU 上进行其余的计算。

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:28:00.700

我使用来自 wikipedia 的这段代码来计算 GPU 上从 YUV 到 RGB 的转换：

```
private static int convertYUVtoRGB(int y, int u, int v) {
    int r,g,b;

    r = y + (int)1.402f*v;
    g = y - (int)(0.344f*u +0.714f*v);
    b = y + (int)1.772f*u;
    r = r>255? 255 : r<0 ? 0 : r;
    g = g>255? 255 : g<0 ? 0 : g;
    b = b>255? 255 : b<0 ? 0 : b;
    return 0xff000000 | (b<<16) | (g<<8) | r;
} 
```

我将浮点数转换为 0.0..255.0，然后使用上面的代码。CPU 上的部分是将原始 YUV 像素重新排列为 YUV 矩阵（也显示在 wikipdia 中）。基本上我使用了维基百科代码并做了最简单的 float<->byte conersions 来解决这个问题。像在 Y 上加 16 或在 U 和 V 上不加 128 这样的小错误会产生不良结果。所以你需要照顾它。但是，一旦我使用维基百科代码作为基础，这并不是很多工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-23T06:41:12.003

在 CPU 上转换听起来很容易，但我相信问题是如何在 GPU 上进行转换？

我最近在我的项目中做到了，即使相机角度与打印代码的表面成 45 度角，我也需要非常快速地检测 QR 码，并且它具有出色的性能：

*（以下代码被剪裁以包含关键行，假设您对Java和OpenGLES都有扎实的理解）*

1.  创建一个包含存储的相机图像的 GL 纹理：

    ```
    int[] txt = new int[1];
    GLES20.glGenTextures(1,txt,0);
    GLES20.glBindTexture(GLES11Ext.GL_TEXTURE_EXTERNAL_OES,txt[0]);
    GLES20.glTextParameterf(... set min filter to GL_LINEAR );
    GLES20.glTextParameterf(... set mag filter to GL_LINEAR );
    GLES20.glTextParameteri(... set wrap_s to GL_CLAMP_TO_EDGE );
    GLES20.glTextParameteri(... set wrap_t to GL_CLAMP_TO_EDGE ); 
    ```

注意纹理类型不是 GL_TEXTURE_2D。这很重要，因为 SurfaceTexture 对象仅支持 GL_TEXTURE_EXTERNAL_OES 类型，将在下一步中使用该类型。

2.  设置表面纹理：

    ```
    SurfaceTexture surfTex = new SurfaceTeture(txt[0]);
    surfTex.setOnFrameAvailableListener(this); 
    ```

以上假设“this”是一个实现“onFrameAvailable”功能的对象。

```
 public void onFrameAvailable(SurfaceTexture st)
    {
            surfTexNeedUpdate = true;
            // this flag will be read in GL render pipeline
    } 
```

3.  设置相机：

    ```
    Camera cam = Camera.open();
    cam.setPreviewTexture(surfTex); 
    ```

如果您以 Android 5.0 为目标，则不推荐使用此 Camera API，因此如果您是，则必须使用新的 CameraDevice API。

4.  在您的渲染管道中，有以下块来检查相机是否有可用的帧，并用它更新表面纹理。当表面纹理更新时，将填充与其链接的GL纹理。

    ```
    if( surfTexNeedUpdate )
    {
            surfTex.updateTexImage();
            surfTexNeedUpdate = false;
    } 
    ```

5.  要绑定具有 Camera -> SurfaceTeture 链接的 GL 纹理，只需在渲染管道中执行此操作：

    ```
    GLES20.glBindTexture(GLES20.GL_TEXTURE_EXTERNAL_OS, txt[0]); 
    ```

不用说，您需要设置当前的活动纹理。

6.  在您的 GL 着色器程序中，它将在其片段部分使用上述纹理，您必须有第一行：

    ```
    #extension GL_OES_EGL_imiage_external : require 
    ```

以上是必须的。

纹理统一必须是 samplerExternalOES 类型：

```
 uniform samplerExternalOES u_Texture0; 
```

从中读取像素就像从 GL_TEXTURE_2D 类型中读取一样，并且 UV 坐标在同一范围内（从 0.0 到 1.0）：

```
 vec4 px = texture2D(u_Texture0, v_UV); 
```

7.  一旦你的渲染管道准备好用上面的纹理和着色器渲染一个四边形，只需启动相机：

    ```
    cam.startPreview(); 
    ```

8.  您应该在 GL 屏幕上看到带有实时摄像头馈送的四边形。现在你只需要使用 glReadPixels 抓取图像：

    ```
    GLES20.glReadPixels(0,0,width,height,GLES20.GL_RGBA, GLES20.GL_UNSIGNED_BYTE, bytes); 
    ```

上面的行假设您的 FBO 是 RGBA，并且 bytes 已经初始化为适当大小的 byte[] 数组，并且宽度和高度是您的 FBO 的大小。

瞧！您已从相机捕获 RGBA 像素，而不是转换在 onPreviewFrame 回调中收到的 YUV 字节...

如果不需要，您还可以使用 RGB 帧缓冲区对象并避免使用 alpha。

重要的是要注意相机将在它自己的线程中调用 onFrameAvailable，这不是您的 GL 渲染管道线程，因此您不应在该函数中执行任何 GL 调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-25T08:51:19.687

In February 2011, Renderscript was first introduced. Since Android 3.0 Honeycomb (API 11), and definitely since Android 4.2 JellyBean (API 17), when [ScriptIntrinsicYuvToRGB](https://developer.android.com/reference/android/renderscript/ScriptIntrinsicYuvToRGB) was added, the easiest and most efficient solution has been to [use renderscript for YUV to RGB conversion](https://stackoverflow.com/a/43642425/192373). I have recently [generalized](https://stackoverflow.com/a/63575255/192373) this solution to handle device rotation.

# c# - 如何使用 c# 在 asp.net 中将电子邮件发送到使用 gmail 地址的任何电子邮件地址

> ID：14024715
> 
> 赞同：0
> 
> 时间：2012-12-24T18:42:06.750
> 
> 标签：c#, asp.net, email

我正在尝试使用 c# 通过 asp.net 中的应用程序发送电子邮件。我搜索了很多，主要是在 asp.net 中找到以下代码来使用 c# 发送电子邮件：

```
 MailMessage objEmail = new MailMessage();

        objEmail.From = new MailAddress(txtFrom.Text);
        objEmail.To.Add(txtTo.Text);
        objEmail.CC.Add(txtCC.Text);
        objEmail.Bcc.Add(txtBCC.Text);
        objEmail.Subject = txtSubject.Text;

        try
        {

            SmtpClient mail = new SmtpClient();

            mail.EnableSsl = true;
            mail.DeliveryMethod = SmtpDeliveryMethod.Network;
            mail.Credentials = new NetworkCredential(txtFrom.Text, txtPassword.Text);
            mail.Timeout = 20000;

            mail.UseDefaultCredentials = false;

            mail.Host = "smtp.gmail.com";
            mail.Port = 587;

            mail.Send(objEmail);

            Response.Write("Your Email has been sent sucessfully - Thank You");

        }
        catch (Exception exc)
        {
            Response.Write("Send failure due to : <br />" + exc.ToString());
        } 
```

但我经常收到以下错误：

> “System.Net.Mail.SmtpException：发送邮件失败。---> System.IO.IOException：无法从传输连接读取数据：现有连接被远程主机强行关闭。---> System.Net .Sockets.SocketException：现有连接被远程主机在 System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags) at System.Net.Sockets.NetworkStream.Read 处强行关闭（字节 [] 缓冲区，Int32 偏移量，Int32 大小）--- 内部异常堆栈跟踪结束 --- 在 System.Net.Sockets.NetworkStream.Read(Byte[] 缓冲区，Int32 偏移量，Int32 大小）在 System.Net System.Net.BufferedReadStream.Read(Byte[] buffer, Int32 offset, Int32 count) 在 System.Net.Mail.SmtpReplyReaderFactory 处的 .DelegatedStream.Read(Byte[] buffer, Int32 offset, Int32 count)。ReadLines(SmtpReplyReader caller, Boolean oneLine) at System.Net.Mail.SmtpReplyReaderFactory.ReadLine(SmtpReplyReader caller) at System.Net.Mail.CheckCommand.Send(SmtpConnection conn, String& response) at System.Net.Mail.StartTlsCommand.Send( SmtpConnection conn) 在 System.Net.Mail.SmtpConnection.GetConnection(ServicePoint servicePoint) 在 System.Net.Mail.SmtpTransport.GetConnection(ServicePoint servicePoint) 在 System.Net.Mail.SmtpClient.GetConnection() 在 System.Net.Mail。 SmtpClient.Send(MailMessage 消息)"GetConnection(ServicePoint servicePoint) 在 System.Net.Mail.SmtpTransport.GetConnection(ServicePoint servicePoint) 在 System.Net.Mail.SmtpClient.GetConnection() 在 System.Net.Mail.SmtpClient.Send(MailMessage 消息)"GetConnection(ServicePoint servicePoint) 在 System.Net.Mail.SmtpTransport.GetConnection(ServicePoint servicePoint) 在 System.Net.Mail.SmtpClient.GetConnection() 在 System.Net.Mail.SmtpClient.Send(MailMessage 消息)"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T18:45:49.027

您正在尝试将 Gmail 的 SMTP 服务器与不属于 Gmail 的电子邮件地址一起使用（根据帖子的标题）。您需要更新主机和端口详细信息以适合您的电子邮件提供商的 SMTP 详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T04:04:29.310

你的代码看起来很合理，所以你需要弄清楚是什么阻止了它工作。

你能消除防火墙问题的可能性吗？大多数中型或大型组织倾向于阻止端口 25、465 和 587 - 他们根本不希望任何未经授权的邮件出去。如果您怀疑可能是这种情况，您可以尝试从网络外部（即您的家用机器），尽管一些 ISP 也会阻止端口。

如果防火墙没有阻止您的连接，请验证您的凭据是否有效 - 这可以通过 Thunderbird、Outlook 或等效设备发送来完成。尝试使用未加密的邮件设置测试 - 根通过您的垃圾邮件文件夹，将一些粘贴到 spamcop 或等效项中，然后寻找一个开放的中继。或者，有一些商业电子邮件提供商支持未加密的电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-29T06:53:22.033

你可以看看这个..简单的代码及其对gmail帐户的工作......

```
 try
    {

        MailMessage msg = new MailMessage();
        msg.From = new MailAddress(TextFRM.Text);
        msg.To.Add(TextTO.Text);
        msg.Subject = TextSUB.Text;
        msg.Body = TextMSG.Text;

        SmtpClient sc = new SmtpClient("smtp.gmail.com");
        sc.Port = 25;
        sc.Credentials = new NetworkCredential(TextFRM.Text, TextPSD.Text);
        sc.EnableSsl = true;
        sc.Send(msg);
        Response.Write("Mail Send");
    }

    catch (Exception ex)
    {

        Response.Write(ex.Message);

    } 
```

# android - 将对象声明移到函数之外会导致崩溃

> ID：14024717
> 
> 赞同：0
> 
> 时间：2012-12-24T18:42:23.613
> 
> 标签：android, function, object, crash

此代码有效：

```
public void saveRoutine() {
    datasource = new RoutinesDataSource(this);
    datasource.open();
    EditText routineName = (EditText) findViewById(R.id.routine_add_name);
    String routineString = routineName.getText().toString();

    if (routineString.length() == 0) {
        Toast toast_routine_name_empty = Toast.makeText(this, getString(R.string.toast_routine_name_empty), Toast.LENGTH_SHORT);
        toast_routine_name_empty.show();            
    }
    else {
        datasource.createRoutine(routineString);
        Toast toast_added = Toast.makeText(this, getString(R.string.toast_routine_added), Toast.LENGTH_SHORT);
        toast_added.show();
        this.finish();
    }
} 
```

但是，当我将线移到函数`EditText routineName = (EditText) findViewById(R.id.routine_add_name);`上方（外部）时`saveRoutine()`，它会导致我的应用程序崩溃。

我该如何做到这一点，以便我可以使用内部的对象而不仅仅是`saveRoutine()`函数？

例如，我想使用`saveRoutine()`函数下面的代码来制作它，所以当按下 ENTER 键时，它会调用`saveRoutine()`：

```
routineName.setOnKeyListener(new OnKeyListener() {
    @Override
    public boolean onKey(View v, int keyCode, KeyEvent event) {
        if (event.getAction() == KeyEvent.ACTION_DOWN) {
            switch (keyCode) {
                case KeyEvent.KEYCODE_ENTER:
                    saveRoutine();
                    return true;

                default:
                    break;
            }
        }

        return false;
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T18:45:08.610

那是因为如果你把`EditText routineName = (EditText) findViewById(R.id.routine_add_name);`你的方法放在上面，那么整个语句将是全局的，并且`findViewById()`会**在** `setContentView()`.

这将导致一个 null 变量（没有布局，因此不会有一个 View 可以分配给`routineName`），然后产生一个`NullPointerException`. 你最好的选择是`routineName`全球化，所以就这么做

```
EditText routineName; 
```

方法之外`saveRoutine()`。为了可读性和正确实践，请在所有方法之前在类声明的顶部声明它。

然后做

```
routineName = (EditText) findViewById(R.id.routine_add_name); 
```

在`setContentView()`你的活动`onCreate()`方法之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T18:45:21.400

放：

```
EditText routineName; 
```

在您的方法之外作为全局变量并放置：

```
routineName = (EditText) findViewById(R.id.routine_add_name); 
```

`onCreate()`在您的函数之后（或在您`setContentView()`基本上调用之后）中或任何方法中。

`setContentView()`在 Activity 中当前膨胀且可见的布局中查找视图。如果将语句移到方法之外，Android 会尝试在当前为 null 的布局中查找 View，这`setContentView()`通常在`onCreate()`. 这会导致您的 EditText 为空值，然后`NullPointerException`当您尝试调用 EditText 的任何成员函数时会导致一个空值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T18:53:25.617

编写代码在 onCreate() 方法中声明 EditText 并使用私有变量在类中访问它

```
Public Class someclass extends Activity{

   private  editText;
   @override
   protected onCreate(Bundle b){
   editText = findViewById(R.id.edit);
  }
} 
```

在类中的任何位置/任何函数中使用变量 editText。

# css - 影响旁边浮动块的段落边距

> ID：14024720
> 
> 赞同：1
> 
> 时间：2012-12-24T18:42:30.930
> 
> 标签：css, background, css-float, margins

我的边距非常令人沮丧。我的标记顶部有一个 div，它向右浮动。

```
 .grey{
   float:right; 
   width:200px; 
 } 
```

我需要在第一段之后应用一些样式（背景和边距）。

```
 .blue{
    background-color: blue; 
    margin: 10px;
    overflow:hidden;
 } 
```

现在我必须使段落“溢出：隐藏”所以背景不会在浮动 div 下延伸，但我有 2 个奇怪的问题。

1.  边距似乎不适用于触及浮动的段落一侧；

2.  边距似乎适用于它旁边的浮动元素..

这是一个小提琴。 [http://jsfiddle.net/whiteatom/Nkfzg/6/](http://jsfiddle.net/whiteatom/Nkfzg/6/)

谁能告诉我如何获得“蓝色”元素和浮动元素之间的边距空间？谁能告诉我如何让我的浮动元素没有这些幻影边距？

干杯，

白原子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T07:04:16.607

您需要对浮动元素应用左边距以使其远离段落：

```
.grey {
    float: right; 
    width: 200px; 
    margin-left: 10px;
} 
```

如前所述，边距折叠会导致段落的上边距影响页面正文。这会导致它向下推动段落和浮动元素。

要从浮动元素中删除上边距，您有两种选择（仅选择一种）：

*   通过浮动主体取消边距折叠：

    ```
    body {
        float: left;
    } 
    ```

    这会导致边距仅影响段落。[更新的小提琴](http://jsfiddle.net/BoltClock/Nkfzg/9)

*   对浮动元素应用负上边距：

    ```
    .grey {
        float: right; 
        width: 200px; 
        margin-left: 10px;
        margin-top: -10px;
    } 
    ```

    在这里，您将浮动元素向上移动以对抗仍然有效的边距塌陷。[更新的小提琴](http://jsfiddle.net/BoltClock/Nkfzg/10)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T18:48:52.253

如果`.grey`div 总是 200px 宽，只需将`.blue`div 的边距更改为`width + 10px`. 像这样：

```
.blue {
    border: 1px solid red;
    background-color: blue;
    margin: 10px 210px 10px 10px;
}; 
```

这是一个[更新的小提琴](http://jsfiddle.net/Nkfzg/7/)。

# html - 身体不会在不同的分辨率上对齐

> ID：14024728
> 
> 赞同：-2
> 
> 时间：2012-12-24T18:44:16.853
> 
> 标签：html, css, resolution

在我的默认分辨率下一切正常；但是，当我在另一个分辨率上运行我的网站时，一切都向右而不是中心。为什么是这样？我尝试将溢出设置为 0%。

这是 HTML 文件：

```
<html>
    <head>
        <script type="text/javascript">
        </script>
        <link rel="stylesheet" type="text/css" href="stylesheet.css" media="screen"/>   
    <body>
        <div id="banner">
        <h2 id="bannertext"> Websites4u </h2>
        </div>

        <div id="buttonbar">
            <a id="homeb" href="webpageone.html">Home</a>
            <a id="aboutb" href="fake.html">About</a>
            <a id="contactb" href="webpage2.html">Contact Us!</a>

        </div>

        <div id="mainbody">

        <p id="radio">
        3gb:   <input type="radio" name="age" value ="<3gb"> <br> <br>
        4gb:   <input type="radio" name="age" value ="4gb"> <br> <br>
        8gb:   <input type="radio" name="age" value ="8gb"> <br> <br>
        16gb: <input type="radio" name="age" value ="16gb"> <br>
        </p>

        <h4 id="bodytext"> Please Select Your Hardware </h4>

        <h3 id="Ram"> Ram </h3>

        </div>
    </body>
</html> 
```

这是CSS：

```
 *{
        margin:0;
        padding:0;
    }

    h1 {
        color:blue;
    }
    body{
        width:1280px;
        height:720px;
        background-image:url("background colour.jpg");
        overflow:hidden;
    }
    #banner{
        position: relative;
        height: 50px;
        width: 148%;
        border: medium solid BFBDBA;
        background-color:F1C43E;
        margin:0 auto;
    }

    #bannertext{
        color:white;
        text-align:center;
        font-family:Comic Sans MS, cursive, sans-serif;
        margin:0 auto;
    }

    #buttonbar {
        position: relative;
        height: 30px;
        width: 148% ;
        border: medium solid BFBDBA;
        background-color:lightgrey;
        color:white;
        margin:0 auto;
        font-family:Comic Sans MS, cursive, sans-serif;
        font-style:bold;
    }
    #homeb {
        position: relative;
        left: 450px;
    }

    #aboutb{
        position: relative;
        left: 500px;
    }

    #contactb{
        position: relative;
        left: 550px;
    }

    a { 
        color: white; 
        font-weight:bold;
    }
    a:hover {
        COLOR: orange;
        font-weight:bold;
    }

    #bodytext{
        position: relative;
        top:50px;
        left:50px;
        color:red;
        font-size:35px;
        margin:0 auto;
        font-family:Comic Sans MS, cursive, sans-serif;
    }

    #mainbody{
        position: relative;
        background-color: white;
        height: 1000px;
        width: 80%;
        left: 30%;
        top: 5px;
        border:medium solid F1C43E;
    }

    #radio{
        position: absolute;
        top: 240px;
        left:100px;
        font-size: 18px;
        margin:0 auto;
    }

    #Ram{
        position: absolute;
        top: 176px;
        left: 100px;
        font-size: 30px;
        color: Green;
        margin:0 auto;
        font-family:Comic Sans MS, cursive, sans-serif;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T19:08:56.117

很难快速解决所有问题。您的基本错误是您对每个项目都有绝对值。

例如：

```
 body{
    width:1280px;
    height:720px;
    background-image:url("background colour.jpg");
    overflow:hidden;
 } 
```

由于那里指定了宽度，当您在宽度较小的屏幕上打开内容时，您的内容将始终具有 1280 像素的宽度，它仍将以 1280 像素的宽度呈现，并且由于溢出：隐藏，您将看到它就像它被转移到右边。当你用计算机做某事时，它不会做你想做的事，而是你要求它做的事。并且溢出：隐藏只是隐藏可见区域之外的所有内容，而不是您想要的中心内容。

对于#buttonbar：

```
 #buttonbar {
    position: relative;
    height: 30px;
    width: 148% ;
    border: medium solid BFBDBA;
    background-color:lightgrey;
    color:white;
    margin:0 auto;
    font-family:Comic Sans MS, cursive, sans-serif;
    font-style:bold;
    } 
```

- 甚至不知道你为什么需要`width:148%`这里。其中的按钮以绝对位置居中：

```
#homeb {
    position: relative;
    left: 450px;    
} 
```

left:450px 对浏览器严格地说：嘿，把这个#homeb 放在它的父块内的第 450 px 上。浏览器会这样做，并且不会因为您希望它居中而将其向左移动。您可以告诉他将所有按钮放在中间：

```
 #buttonbar {
        height: 30px;
        text-align:center;
        border: medium solid BFBDBA;
        background-color:lightgrey;
        color:white;
        margin:0 auto;
        font-family:Comic Sans MS, cursive, sans-serif;
        font-style:bold;
    } 
```

文本对齐：居中；- 这将告诉浏览器在#buttonbar 内将内容居中而不取决于其宽度，并且无需为#homeb、#aboutb 和#contactb 定义类。

等等。有很多地方要修复。我给了你一个起点。这是已经为您完成一些更改的演示：http: [//jsfiddle.net/2rM6K/7/](http://jsfiddle.net/2rM6K/7/)

如果您想让某些东西正常工作，您只需要了解每一行代码对浏览器的含义。如果您不明白某事是如何工作的 - 网络上有很多信息，人们随时准备帮助您。只是不要期望在编写代码时会发生一些神奇的事情——你必须了解事情是如何工作的。阅读、尝试、实验、再阅读、再尝试、再实验，直到你开始理解某些东西为什么以及如何工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T05:01:32.910

```
page
{
Margin-right:auto;
margin-left:auto;
width:800px;
} 
```

您可以根据您的要求更改宽度。

# javascript - 如何将按钮背景颜色从石灰绿色更改回默认设置？

> ID：14024731
> 
> 赞同：3
> 
> 时间：2012-12-24T18:44:29.867
> 
> 标签：javascript, google-apps-script

我试图让背景按钮颜色从石灰绿变回原来的颜色。目前我已经获得了一种方法来实现这一点，但似乎必须有一种更有效的方法来做到这一点。

```
function doGet(e) {
  var app = UiApp.createApplication();

  var productInfoButton = app.createButton("Products").setId('productInfoButton');

  var handlerL = app.createServerClickHandler('prodCompleteHandlerL');
  var productCompleteCheckBox = app.createCheckBox().setId("productCompleteCheckBox")
  .setName("productCompleteCheckBox");
  productCompleteCheckBox.addClickHandler(handlerL);
  handlerL.addCallbackElement(productInfoButton);

  app.add(productInfoButton);
  app.add(productCompleteCheckBox);

  return app;
}

function prodCompleteHandlerL(e) {
  var app = UiApp.getActiveApplication();
if(e.parameter.productCompleteCheckBox == 'true'){
  app.getElementById('productInfoButton').setStyleAttribute('background', 'lime')
}else{
  app.getElementById('productInfoButton').setStyleAttribute('background', 'url("https://dl.dropbox.com/u/211279/hborder.png") repeat-x 0px -27px')
}
  return app;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:05:02.733

更改类而不是直接更改背景选项是更可靠的方法。

在处理程序函数中使用背景参数切换 css 类。

```
function clickHandler (e) {
    e.target.className = 'lime';
}

function prodCompleteHandler (e) {    
    e.target.className = 'standart'
} 
```

这是代码示例：http: [//jsfiddle.net/Ysaxv/](http://jsfiddle.net/Ysaxv/)

# php - 每个数量和产品类型的长度和尺寸

> ID：14024732
> 
> 赞同：-3
> 
> 时间：2012-12-24T18:44:36.203
> 
> 标签：php

> **可能重复：**
> [Php 购物车 - 每种产品数量的尺寸和长度](https://stackoverflow.com/questions/13987724/php-shopping-cart-size-and-length-for-each-quantity-of-a-type-of-product)

嗨，我以前在这里发布了这个问题和一些回复，但仍然无法弄清楚是什么弄乱了我的脚本......

我在 order.php 页面上有一个购物车。它是一家公司的零售部门，以便商店可以从该在线部门购买礼服。所以有多种裙子，人们可以选择任意数量的裙子。此外，在该购物脚本上，还有一个地方可以更改衣服的尺寸和长度。

目前，当您订购一件连衣裙时，您可以为每个订单选择单一尺寸和单一长度 例如：如果您订购 4 件连衣裙 A，您只能为该连衣裙 A 选择一个尺寸和长度。

现在我要实现的是当您订购 4 件连衣裙 A 时，您应该能够为每件连衣裙 A 选择长度和尺寸，这意味着 4 种长度和 4 种尺寸。也许这听起来很奇怪，但这是我非常迫切需要的东西

以下是代码：

会话初始化

```
session_start();

//Create 'cart' if it doesn't already exist
if (!isset($_SESSION['SHOPPING_CART'])){ $_SESSION['SHOPPING_CART'] = array(); }

//Add an item only if we have the threee required pices of information: name, price, qty
if (isset($_GET['add']) && isset($_GET['price']) && isset($_GET['qty']) && isset($_GET['size'])&& isset($_GET['length'])&& isset($_GET['code']) ){
//Adding an Item
//Store it in a Array
$ITEM = array(
//Item name
'name' => $_GET['add'],
//Item Price
'price' => $_GET['price'],
//Qty wanted of item
'qty' => $_GET['qty'],

'size' => array_fill(0, $_GET['qty'], $_GET['size']),

    'length' => array_fill(0, $_GET['qty'], $_GET['length']),

'code' => $_GET['code']
); 
```

应该更新和存储数量、大小和长度值的部分。

```
foreach ($_POST['items_qty'] as $itemID => $qty) {
//If the Qty is "0" remove it from the cart
if ($qty == 0) {
//Remove it from the cart
unset($_SESSION['SHOPPING_CART'][$itemID]);
}
else if($qty >= 1) {
//Update to the new Qty
$_SESSION['SHOPPING_CART'][$itemID]['qty'] = $qty;

}
foreach ($_POST['items_size'] as $itemID => $size) {
//If the Qty is "0" remove it from the cart
if($size >= 1) {
//Update to the new Qty
$_SESSION['SHOPPING_CART'][$itemID]['size'] = $size;

}
}
foreach ($_POST['items_length'] as $itemID => $length) {
//If the Qty is "0" remove it from the cart

//Update to the new Qty
$_SESSION['SHOPPING_CART'][$itemID]['length'] = $length;

} 
```

第三，应该显示值的部分：

<

```
?php
//Print all the items in the shopping cart
foreach ($_SESSION['SHOPPING_CART'] as $itemNumber => $item) {
?>
<tr align="center" id="item<?php echo $itemNumber; ?>">
<td><a href="?remove=<?php echo $itemNumber; ?>">remove</a></td>
<td><?php echo $item['name']; ?></td>
<td><?php echo $item['price']; ?></td>
<td><input name="items_qty[<?php echo $itemNumber; ?>]" type="text" id="item<?php echo $itemNumber; ?>_qty" value="<?php echo $item['qty']; ?>" size="2" maxlength="3" /></td>
<td><?php echo $item['qty'] * $item['price']; ?></td>

<td><select name="items_size[<?php echo $itemNumber; ?>]" value="<?php echo $item['size']; ?>" type="text" id="item<?php echo $itemNumber; ?>_size" >
<option selected="selected" value="<?php echo $item['size']; ?>"><?php echo $item['size']; ?></option>
<option value="2">2</option>
<option value="4">4</option>
<option value="6">6</option>
<option value="8">8</option>
<option value="10">10</option>
<option value="12">12</option>
<option value="14">14</option>
<option value="16">16</option>
<option value="18">18</option>
<option value="20">20</option>
<option value="22">22</option>
<option value="24">24</option>
<option value="26">26</option>
<option value="28">28</option>
<option value="30">30</option>

</select>
<?php
foreach ($_SESSION['SHOPPING_CART'] as $item_id => $item)
{
    echo '<p>Name: ' . $item['name'] . ' for ' . $item['price'] . '$</p>';
    foreach($item['size'] as $j => $size)
    {
        echo '<p>#' . $j . ': size ' . $size . ', length ' . $item['length'][$j] . '</p>';
    }
}
?>
<?php
$order=strtotime("now");

if($cntry == "USA" || $cntry =="United States Of America" || $cntry == "America")
{
$price=100;
}
else
{
$price=200;
}

?>
<td><select name="items_length[<?php echo $itemNumber; ?>]" type="text" select="<?php echo $item['length']; ?>" id="item<?php echo $itemNumber; ?>_length" >
<option selected="selected" value="<?php echo $item['length']; ?>"><?php echo $item['length']; ?></option>
<option value="46">46</option>
<option value="48">48</option>
<option value="50">50</option>

</select>

</tr>
<?php
}
?> 
```

这里

```
 foreach ($_SESSION['SHOPPING_CART'] as $item_id => $item)
    {
        echo '<p>Name: ' . $item['name'] . ' for ' . $item['price'] . '$</p>';
        foreach($item['size'] as $j => $size)
        {
            echo '<p>#' . $j . ': size ' . $size . ', length ' . $item['length'][$j] . '</p>';
        }
    } 
```

这部分是论坛成员之一向我建议的。

同样在将以下行添加到项目数组（第 1 部分）之后

```
'size' => array_fill(0, $_GET['qty'], $_GET['size']),

    'length' => array_fill(0, $_GET['qty'], $_GET['length']), 
```

当我在更改数量后按下更新按钮时它不会更新..它保持在一个...

现在我真的不知道或不明白在哪里添加什么代码。我很困惑。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T18:58:57.967

从我在您的问题中可以看到，您刚刚发布了您拥有的整个代码，并要求人们对其进行调试。

我理解您的沮丧，我去过那里多次，但您无法通过复制粘贴来帮助您解决问题。我试图通过代码并且没有缩进，有无数的标题重定向，基本上很难调试它甚至理解发生了什么。我什至尝试对其进行编辑以使其更具可读性，但 10 分钟后我放弃了。

将您的代码分成更小的块，您将自己找到解决方案

对于您的问题：您可以做的是进行一些服务器端检查或客户端检查

客户端检查：

*   您可以添加 4 行（数量 4）并允许用户选择每个项目的大小。一旦您在提交期间从用户那里获得数据，您就可以合并数量。
*   您可以添加尺寸为 40 的数量 4，但也提供一个按钮（同样是 Javascript），该按钮将从数量中删除一个项目并创建一个新的行项目，以便用户可以添加新的尺寸。

服务器检查：

*   让用户选择尺寸，然后在完成后为订单的每个项目提供不同尺寸的页面。

您采用哪种方法取决于您。

PS：请考虑将您的数据库访问权限更改为`mysqli`或`PDO`。`mysql`已被弃用。这个网站上有很多关于如何做到这一点的资源。

# java - 在运行时检索 Log4J Appender 列表

> ID：14024733
> 
> 赞同：15
> 
> 时间：2012-12-24T18:44:42.963
> 
> 标签：java, logging, log4j

是否可以在运行时检索 log4j 中配置的所有附加程序的列表？

我将进一步充实这个场景。给定以下配置，我将如何检索所有附加程序（stdout 和 altstdout）？

```
log4j.rootLogger=error, stdout

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout

log4j.appender.altstdout=org.apache.log4j.ConsoleAppender
log4j.appender.altstdout.layout=org.apache.log4j.PatternLayout

# Pattern to output the caller's file name and line number.
log4j.appender.stdout.layout.ConversionPattern=%5p [%t] (%F:%L) - %m%n
log4j.appender.altstdout.layout.ConversionPattern=%5p [%t] (%F:%L) - %m%n 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-06-11T10:47:51.843

如果您想访问为所有记录器配置的所有附加程序，您必须执行以下操作

```
for (Enumeration loggers=LogManager.getCurrentLoggers(); loggers.hasMoreElements(); )  {
    Logger logger = (Logger) loggers.nextElement();
    for (Enumeration appenders=logger.getAllAppenders(); appenders.hasMoreElements(); )  {
        Appender appender = (Appender) appenders.nextElement();
        ... 
```

我不知道为什么 log4j 没有像 LogManager.getAllAppenders() 这样的方法，但它看起来像
缺点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T18:51:10.610

这是你需要的

[log4j 方法 getAllAppenders](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/Category.html#getAllAppenders%28%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-28T08:59:29.973

Log4j 1 的工作解决方案：

注意：getAllAppenders 将只获取活动日志。不是 log4j.xml 配置文件中定义的完整文件列表。

这是我如何在所有日志文件上设置 rwxrwxrwx 权限的方法

```
@SuppressWarnings("unchecked")
public static <E> E safeCastNoException(Object o, Class<E> target)
{
  if(target.isInstance(o)) return (E)o;
  return null;
}
    {

        URL file;
        try
        {
            LogManager.resetConfiguration();
            file = new URL("file:" + Log4jXMLConfigFileName);
            // We override DOMConfigurator to catch Appender settings
            // in parseAppender and rework file rights access
            new DOMConfigurator()
            {
                @Override
                protected Appender parseAppender(Element appenderElement)
                {
                    Appender a = super.parseAppender(appenderElement);

                    FileAppender fileAppender = safeCastNoException(a, FileAppender.class);
                    if( fileAppender != null )
                    {
                        String filePath=fileAppender.getFile();

                        Path pathTofile = FileSystems.getDefault().getPath(filePath);
                        try
                        {
                            // Create the empty file with default permissions, etc.
                            Files.createFile(pathTofile);
                        }
                        catch(FileAlreadyExistsException x)
                        {
                            System.err.format("file named %s already exists, no need to recreate%n", pathTofile);
                        }
                        catch(Exception x)
                        {
                            // Some other sort of failure, such as permissions.
                            System.err.format("createFile error: %s%n", x);
                        }

                        try
                        {
                            //using PosixFilePermission to set file permissions 777
                            Set<PosixFilePermission> perms = new HashSet<PosixFilePermission>();
                            //add owners permission
                            perms.add(PosixFilePermission.OWNER_READ);
                            perms.add(PosixFilePermission.OWNER_WRITE);
                            //perms.add(PosixFilePermission.OWNER_EXECUTE);
                            //add group permissions
                            perms.add(PosixFilePermission.GROUP_READ);
                            perms.add(PosixFilePermission.GROUP_WRITE);
                            //perms.add(PosixFilePermission.GROUP_EXECUTE);
                            //add others permissions
                            perms.add(PosixFilePermission.OTHERS_READ);
                            perms.add(PosixFilePermission.OTHERS_WRITE);
                            //perms.add(PosixFilePermission.OTHERS_EXECUTE);
                            System.out.println("Trying to set 666 posix rights to log file: " + pathTofile.toAbsolutePath().toString());
                            Files.setPosixFilePermissions(Paths.get(pathTofile.toAbsolutePath().toString()), perms);
                        }
                        catch(Exception x)
                        {
                            // Some other sort of failure, such as permissions.
                            System.err.format("chmod error: %s%n", x);
                        }
                    }
                    return a;
                }
            }.
            doConfigure(file, LogManager.getLoggerRepository());
        }
        catch (Exception e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-25T08:11:03.807

我想补充一些我花了一段时间才理解的东西。如果您查看下图（我从[此处](https://logging.apache.org/log4j/1.2/manual.html "log4j1.2 手册")复制），您可以看到，即使记录器`com.foo.bar`将打印到根记录器 FileAppender，它的附加程序列表仍然为空。因此，您无法获取记录器将使用该方法写入的所有附加程序`logger.getAllAppenders()`。

[![在此处输入图像描述](../Images/5bbc16418210855a20e2bb5eee49f5cb.png)](https://i.stack.imgur.com/EdVdY.png)

为此，您还需要分别遍历所有父母和根记录器。因为您不能迭代`logger.getParent()`到根记录器（根记录器返回 null - 请参阅 getParent() 的文档）。据我所知，您必须通过单独访问 rootLoggers 的附加程序`Logger.getRootLogger().getAllAppenders().`

# jqgrid - 从 viewData 获取 jqGrid 数据：使用 jqgrid.htmlEncode？

> ID：14024734
> 
> 赞同：0
> 
> 时间：2012-12-24T18:44:45.367
> 
> 标签：jqgrid, asp.net-mvc-4

嘿，Stack Overflow 爱好者。我有一个 jqGrid 网格，我想从我放入 viewData 存储库的 JSON 数据中填充它。我怎样才能做到这一点？

到目前为止，我所拥有的就是这个......更新：我现在正在尝试使用控制器方法而不是通过 viewData 传递数据

```
 $("#results").jqGrid({
        shrinkToFit: false,
        autowidth: false,
        width: 800,
        datatype: 'jsonsstring',
        url:'<%=Url.Action("getGrid", "Log", new { physSearch = Model})%>',
        //datastr: $.jgrid.htmlEncode('@ViewData["ResultData"]'),
        mtype: 'POST',
        colNames:
            [
                'Sent Time',
                'Recipient',
                'EPCD ID',
                'Address',
                'Channel',
                'Sent Status',
                'Document ID',
                'MRN',
                'Patient Name',
                'Pages',
                'Message Log ID',
                'Orginial Message Log ID',
                'Message ID',
                'Message Type',
                'Sender',
                'Comments'
            ],
        colModel:
            [
                { name: 'Sent_Time', width: 115 },
                { name: 'Recipient', width: 115 },
                { name: 'EPCD_ID', width: 115 },
                { name: 'Address', width: 115 },
                { name: 'Channel', width: 115 },
                { name: 'Sent_Status', width: 115 },
                { name: 'Document_ID', width: 115 },
                { name: 'MRN', width: 115 },
                { name: 'Patient_Name', width: 115 },
                { name: 'Pages', width: 115 },
                { name: 'Message_Log_ID', width: 115 },
                { name: 'Orginial_Message_Log_ID', width: 115 },
                { name: 'Message_ID', width: 115 },
                { name: 'Message_Type', width: 115 },
                { name: 'Sender', width: 115 },
                { name: 'Comments', width: 115 }
            ],
        rowNum: 10,
        rowList: [5, 10, 20, 50],
        sortname: 'Id',
        sortorder: "desc",
        loadui: 'block',
        loadtext: 'Results Grid',viewrecords: true,
        imgpath: '/Content/themes/UPMC-theme/images',
        caption: 'Patient Return Result',
        ondblClickRow: function (id) { }
    }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:44:27.917

试试这样：

```
datatype: 'json',
datastr: @Html.Raw(Json.Encode(ViewData["ResultData"])) 
```

# matlab - 一对多 SVM 中的 10 倍交叉验证（使用 LibSVM）

> ID：14024740
> 
> 赞同：10
> 
> 时间：2012-12-24T18:45:10.667
> 
> 标签：matlab, machine-learning, classification, svm, libsvm

我想在 MATLAB 中的一对多支持向量机分类中**进行** [10倍交叉验证。](http://en.wikipedia.org/wiki/Support_vector_machine)

我试图以某种方式混合这两个相关的答案：

*   [libsvm 中的多类分类](https://stackoverflow.com/a/9049808/1071703)
*   [MATLAB 中的 10 倍 SVM 分类示例](https://stackoverflow.com/a/3071938/1071703)

但由于我是 MATLAB 及其语法的新手，所以直到现在我才设法让它工作。

另一方面，我在[LibSVM](http://www.csie.ntu.edu.tw/~cjlin/libsvm/) README 文件中只看到以下几行关于交叉验证的内容，但在那里我找不到任何相关示例：

> 选项 -v 将数据随机拆分为 n 个部分，并计算它们的交叉验证准确度/均方误差。
> 
> 有关输出的含义，请参阅 libsvm FAQ。

谁能给我一个 10 倍交叉验证和一对一分类的例子？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-26T14:36:06.013

[我们进行交叉验证](http://en.wikipedia.org/wiki/Cross-validation_%28statistics%29)主要有两个原因：

*   作为一种测试方法，它为我们的模型的泛化能力提供了几乎无偏的估计（通过避免过度拟合）
*   作为[模型选择](http://en.wikipedia.org/wiki/Model_selection)的一种方式（例如：在训练数据上找到最好的`C`和`gamma`参数，参见[这篇文章](https://stackoverflow.com/a/9049225/97160)的例子）

对于我们感兴趣的第一种情况，该过程涉及`k`为每个折叠训练模型，然后在整个训练集上训练一个最终模型。我们报告了 k 折的平均准确度。

现在，由于我们使用一对多的方法来处理多类问题，每个模型都包含`N`支持向量机（每个类一个）。

* * *

以下是实现一对多方法的包装函数：

```
function mdl = libsvmtrain_ova(y, X, opts)
    if nargin < 3, opts = ''; end

    %# classes
    labels = unique(y);
    numLabels = numel(labels);

    %# train one-against-all models
    models = cell(numLabels,1);
    for k=1:numLabels
        models{k} = libsvmtrain(double(y==labels(k)), X, strcat(opts,' -b 1 -q'));
    end
    mdl = struct('models',{models}, 'labels',labels);
end

function [pred,acc,prob] = libsvmpredict_ova(y, X, mdl)
    %# classes
    labels = mdl.labels;
    numLabels = numel(labels);

    %# get probability estimates of test instances using each 1-vs-all model
    prob = zeros(size(X,1), numLabels);
    for k=1:numLabels
        [~,~,p] = libsvmpredict(double(y==labels(k)), X, mdl.models{k}, '-b 1 -q');
        prob(:,k) = p(:, mdl.models{k}.Label==1);
    end

    %# predict the class with the highest probability
    [~,pred] = max(prob, [], 2);
    %# compute classification accuracy
    acc = mean(pred == y);
end 
```

以下是支持交叉验证的函数：

```
function acc = libsvmcrossval_ova(y, X, opts, nfold, indices)
    if nargin < 3, opts = ''; end
    if nargin < 4, nfold = 10; end
    if nargin < 5, indices = crossvalidation(y, nfold); end

    %# N-fold cross-validation testing
    acc = zeros(nfold,1);
    for i=1:nfold
        testIdx = (indices == i); trainIdx = ~testIdx;
        mdl = libsvmtrain_ova(y(trainIdx), X(trainIdx,:), opts);
        [~,acc(i)] = libsvmpredict_ova(y(testIdx), X(testIdx,:), mdl);
    end
    acc = mean(acc);    %# average accuracy
end

function indices = crossvalidation(y, nfold)
    %# stratified n-fold cros-validation
    %#indices = crossvalind('Kfold', y, nfold);  %# Bioinformatics toolbox
    cv = cvpartition(y, 'kfold',nfold);          %# Statistics toolbox
    indices = zeros(size(y));
    for i=1:nfold
        indices(cv.test(i)) = i;
    end
end 
```

最后，这里是一个简单的demo来说明用法：

```
%# laod dataset
S = load('fisheriris');
data = zscore(S.meas);
labels = grp2idx(S.species);

%# cross-validate using one-vs-all approach
opts = '-s 0 -t 2 -c 1 -g 0.25';    %# libsvm training options
nfold = 10;
acc = libsvmcrossval_ova(labels, data, opts, nfold);
fprintf('Cross Validation Accuracy = %.4f%%\n', 100*mean(acc));

%# compute final model over the entire dataset
mdl = libsvmtrain_ova(labels, data, opts); 
```

将其与 libsvm 默认使用的一对一方法进行比较：

```
acc = libsvmtrain(labels, data, sprintf('%s -v %d -q',opts,nfold));
model = libsvmtrain(labels, data, strcat(opts,' -q')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T07:11:34.130

这两个问题之一与 LIBSVM 无关，这可能会让您感到困惑。您应该尝试调整[此答案](https://stackoverflow.com/questions/9041753/multi-class-classification-in-libsvm/9049808#9049808)并忽略其他答案。

您应该选择折叠，然后按照链接的问题完成其余部分。假设数据已加载到`data`标签中`labels`：

```
n = size(data,1);
ns = floor(n/10);
for fold=1:10,
    if fold==1,
        testindices= ((fold-1)*ns+1):fold*ns;
        trainindices = fold*ns+1:n;
    else
        if fold==10,
            testindices= ((fold-1)*ns+1):n;
            trainindices = 1:(fold-1)*ns;
        else
            testindices= ((fold-1)*ns+1):fold*ns;
            trainindices = [1:(fold-1)*ns,fold*ns+1:n];
         end
    end
    % use testindices only for testing and train indices only for testing
    trainLabel = label(trainindices);
    trainData = data(trainindices,:);
    testLabel = label(testindices);
    testData = data(testindices,:)
    %# train one-against-all models
    model = cell(numLabels,1);
    for k=1:numLabels
        model{k} = svmtrain(double(trainLabel==k), trainData, '-c 1 -g 0.2 -b 1');
    end

    %# get probability estimates of test instances using each model
    prob = zeros(size(testData,1),numLabels);
    for k=1:numLabels
        [~,~,p] = svmpredict(double(testLabel==k), testData, model{k}, '-b 1');
        prob(:,k) = p(:,model{k}.Label==1);    %# probability of class==k
    end

    %# predict the class with the highest probability
    [~,pred] = max(prob,[],2);
    acc = sum(pred == testLabel) ./ numel(testLabel)    %# accuracy
    C = confusionmat(testLabel, pred)                   %# confusion matrix
end 
```

# f# - f# 类型成员中静态解析的类型

> ID：14024742
> 
> 赞同：8
> 
> 时间：2012-12-24T18:45:18.860
> 
> 标签：f#, type-inference

我想`IEnumerable<KeyValuePair<DateTime, 'T>>`在我自己的类中实现并将数学运算符添加到该类中，以便运算符可以像任何数字类型的内联函数一样工作`'T`- 自动添加约束。

我只是无法使以下代码工作。在成员声明中使用或不使用 'inline' 关键字都不起作用。

另外，如果我定义一个函数

```
let inline add l r = l + r 
```

在类型之前并使用它而不是添加 l.Value + r.Value，它也不起作用。

有人可以告诉我我做错了什么吗？

可能整个方法都是错误的，有没有办法以另一种方式实现相同的目标？

```
namespace Test

open System
open System.Linq
open System.Collections.Generic

[<SerializableAttribute>]
type TimeSeries<'T>(dictionary : IDictionary<DateTime, 'T>) =
    let internalList = new SortedList<DateTime, 'T>(dictionary)
    interface IEnumerable<KeyValuePair<DateTime, 'T>> with
        member this.GetEnumerator() = internalList.GetEnumerator()
        member this.GetEnumerator() : Collections.IEnumerator
             = internalList.GetEnumerator() :> Collections.IEnumerator  
    member private this.sl = internalList
    static member inline (+) (left : TimeSeries<'T>, right : TimeSeries<'T>) =
        let res = 
            query { 
            for l in left do
            join r in right on
                (l.Key = r.Key)
            select (l.Key,  l.Value + r.Value)    
            } 
        new TimeSeries<'T>(res |> dict) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T21:58:03.390

你的方法对我来说似乎是正确的。您的代码无法编译的原因是因为 F# 类型推断正在推断类型变量的静态约束（编译时），`'T`这与用于类型定义的相同。

类型定义的泛型参数无法静态解析（没有“帽子”类型），但没有什么能阻止您定义使用这些编译时约束的函数或成员。

只需将您的类型变量更改`'T`为`'U`静态成员`(+)`定义中的，就可以了。

您仍然可以创建`TimeSeries`不支持的类型的实例`(+)`（即：）`TimeSeries<obj>`，但您将无法使用`(+)`这些实例，无论如何，如果您这样做，您将在编译时收到一条很好的错误消息.

# class - VBA：如何从类中获取变量？

> ID：14024753
> 
> 赞同：1
> 
> 时间：2012-12-24T18:46:44.020
> 
> 标签：class, excel, module, subroutine, vba

我已经创建了名为“class1”的类：

```
Private ka As Variant
Private ra As Variant

Public Property Get kolom() As Variant
    kolom = ka
End Property

Public Property Get rij() As Variant
    rij = ra
End Property

Public Property Let kolom(value As Variant)
    ka = value
End Property

Public Property Let rij(value As Variant)
    ra = value
End Property 
```

然后在一个普通的模块子中我定义了变量：

```
Public Sub MakeArray(OutputSheet As Variant)
Dim igeg As Class1
Set igeg = New Class1
igeg.kolom = 47
igeg.rij = 559
End Sub 
```

现在在一个新的子中，我想获得值 47 和 559，但我不知道该怎么做。我尝试了以下方法，但 ik 没有给出任何价值：

```
sub test()
Dim igeg As Class1
newkolom = igeg.kolom
Msgbox igeg.kolom
End sub 
```

或尝试以下没有结果：

```
Public Function Test1() As Class1
Set Test1 = New Class1

End Function

Public Sub test()
Dim newigeg As Class1
Set newigeg = Test1

Msgbox igeg.kolom
End sub 
```

实际上这个想法是我想在另一个 sub 中使用 sub 1 中计算的值。我如何从类模块中获取价值或有更好的方法。不想使用调用 sub(value)。

提前谢谢你的帮助！

阿米尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T18:58:23.020

你`makeArray()`在`test()`. 你为什么不用`makeArray()`作函数？因为 Function 可以返回一个对象/值。强烈建议在您的情况下使用函数。

尝试以下操作：

```
Public Function MakeArray(ByRef OutputSheet As Variant) as Class1
Dim igeg As Class1
Set igeg = New Class1
igeg.kolom = 47
igeg.rij = 559
set MakeArray = igeg
End Function

sub test()
Dim igeg As Class1
set igeg = MakeArray(myvar)
Msgbox igeg.kolom
End sub 
```

如果只使用`sub`s 那么：

```
Public Sub MakeArray(ByRef OutputSheet As Variant, ByRef igeg As Class1)
 igeg.kolom = 47
 igeg.rij = 559
End Sub

Sub test()
 Dim myvar As Variant
 Dim igeg As Class1

  Set igeg = New Class1

  Call MakeArray(myvar, igeg)
  MsgBox igeg.kolom
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T18:58:02.790

您必须使类的实例成为全局的或使类成为静态的。下面为类设置变量，但在方法中实例化类，因此当方法完成时它超出范围。

```
Public Sub MakeArray(OutputSheet As Variant)
Dim igeg As Class1
Set igeg = New Class1
igeg.kolom = 47
igeg.rij = 559
End Sub 
```

# objective-c - MKMapView 和 viewDidLoad/viewWillAppear/viewDidAppear 使用 Storyboards

> ID：14024755
> 
> 赞同：5
> 
> 时间：2012-12-24T18:47:06.000
> 
> 标签：objective-c, ios, mkmapview

我有一个带有 MapView 的 ViewController，控制器由情节提要中指定的 segue 初始化。MapView 连接（通过 Storyboard）到控制器中的一个属性。

* * *

.h 文件

```
@interface DetailViewController : UIViewController <MKMapViewDelegate>

@property (weak, nonatomic) IBOutlet MKMapView *locationMapView; 
```

我正在使用一种方法将 MapView 居中到特定区域：

```
- (void)centerMapView
{
    MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(CLLocationCoordinate2DMake(geoPoint.latitude, geoPoint.longitude), 1000, 1000);
    [self.locationMapView setRegion:region animated:NO];

    NSLog(@"size height: %f",self.locationMapView.frame.size.height);
    NSLog(@"size width: %f",self.locationMapView.frame.size.width);
} 
```

`viewDidLoad`第一次从/调用此方法`viewWillAppear`没有任何作用，但在第二次加载视图时将其正确居中。日志输出始终为：

```
size height: 0.000000
size width: 0.000000 
```

在`viewDidAppear`MapView 中调用时居中且输出大小正确：

```
size height: 400.000000
size width: 320.000000 
```

我猜大小值意味着视图尚未在`viewDidLoad`/`viewWill`出现时初始化，这可能与我设置区域的问题无关。

我想知道，如果真的不可能在`viewDidLoad`/中设置 MapView 的区域，`viewWillAppear`那么用户看不到该区域的变化。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T19:54:16.593

视图大小问题可能与您设置区域的问题无关。

关键问题：什么时候设置`DetailViewController`的`geoPoint`属性，相对于它的视图何时加载？如果`viewDidLoad`在您设置该属性（可能来自`prepareForSegue:sender:`另一个视图控制器）之前运行，`geoPoint`则当您尝试将地图居中时将为 nil（零），因此它不会正确居中。（它第二次工作，因为实例`DetailViewController`已经存在并且`geoPoint`来自上一次。）

`centerMapView`您可能会考虑从您的属性的自定义设置器中调用您的方法`geoPoint`- 这样您就可以保证一旦视图控制器具有适当的数据就会发生，这仍然会在它出现之前，所以不会有可见的地图过渡。

# maven-2 - SLF4J：类路径包含多个 SLF4J 绑定

> ID：14024756
> 
> 赞同：264
> 
> 时间：2012-12-24T18:47:11.180
> 
> 标签：maven-2, slf4j

我收到以下错误。似乎有多个日志框架绑定到 slf4j。不知道如何解决这个问题。任何帮助是极大的赞赏。

```
SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/C:/Users/admin/.m2/repository/org/slf4j/slf4j-log4j12/1.6.4/slf4j-log4j12-1.6.4.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/C:/Users/admin/.m2/repository/org/slf4j/slf4j-log4j12/1.6.1/slf4j-log4j12-1.6.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation. 
```

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2014-03-25T15:08:30.597

通过在导致冲突的依赖项（pom.xml）中添加以下排除项来解决。

```
<exclusions>
    <exclusion>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
    </exclusion>
</exclusions> 
```

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2014-09-05T22:21:10.090

梯度版本；

```
configurations.all {
    exclude module: 'slf4j-log4j12'
} 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2018-03-14T04:19:26.563

该错误可能会提供更多这样的信息（尽管您的 jar 名称可能不同）

> SLF4J：在 [jar:file:/D:/Java/repository/ch/qos/logback/logback-classic/1.2.3/logback-classic-1.2.3.jar!/org/slf4j/impl/StaticLoggerBinder 中找到绑定.class] SLF4J：在 [jar:file:/D:/Java/repository/org/apache/logging/log4j/log4j-slf4j-impl/2.8.2/log4j-slf4j-impl-2.8.2.jar 中找到绑定!/org/slf4j/impl/StaticLoggerBinder.class]

注意到冲突来自两个罐子，名为`logback-classic-1.2.3`和`log4j-slf4j-impl-2.8.2.jar`。

`mvn dependency:tree`在这个项目 pom.xml 父文件夹中运行，给出：

[![依赖树冲突](../Images/4d5a3753197c6180ba7fedce92a7c0c4.png)](https://i.stack.imgur.com/C2ADz.png)

现在选择一个你想忽略的（可能需要一个微妙的努力，我需要更多的帮助）

我决定不使用从`spring-boot-starter-data-jpa`（顶级依赖项）通过`spring-boot-starter`和 through导入的那个`spring-boot-starter-logging`，pom 变为：

```
 <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter</artifactId>
        <exclusions>
            <exclusion>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-starter-logging</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-data-jpa</artifactId>
    </dependency> 
```

在上面的 pom`spring-boot-starter-data-jpa`中将使用`spring-boot-starter`同一文件中的配置，其中不包括`logging`（它包含`logback`）

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-06-28T11:18:11.183

SBT 版本：

附加`exclude("org.slf4j", "slf4j-log4j12")`到传递包含的依赖项`slf4j-log4j12`。例如，当使用带有 Log4j 2.6 的 Spark 时：

```
libraryDependencies ++= Seq(
  // One SLF4J implementation (log4j-slf4j-impl) is here:
  "org.apache.logging.log4j" % "log4j-api" % "2.6.1",
  "org.apache.logging.log4j" % "log4j-core" % "2.6.1",
  "org.apache.logging.log4j" % "log4j-slf4j-impl" % "2.6.1",
  // The other implementation (slf4j-log4j12) would be transitively
  // included by Spark. Prevent that with exclude().
  "org.apache.spark" %% "spark-core" % "1.5.1" exclude("org.slf4j", "slf4j-log4j12")
) 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2020-11-08T16:14:58.340

1.找到冲突的jar

如果无法从警告中识别依赖关系，则可以使用以下命令来识别冲突的 jar

```
mvn dependency: tree 
```

这将显示项目的依赖关系树以及与`slf4j-log4j12`JAR 绑定的另一个依赖关系。

2.  解析度

现在我们知道了有问题的依赖项，我们需要做的就是`slf4j-log4j12`从该依赖项中排除 JAR。

Ex - 如果`spring-security`依赖项还与`slf4j-log4j12`JAR 绑定了另一个绑定，那么我们需要从依赖项中排除`slf4j-log4j12`JAR 。`spring-security`

```
 <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-security</artifactId>
           <exclusions>
                <exclusion>
                    <groupId>org.springframework.boot</groupId>
                    <artifactId>spring-boot-starter-logging</artifactId>
                </exclusion>
            </exclusions>
    </dependency> 
```

**注意 -**在某些情况下，多个依赖项已与`slf4j-log4j12`JAR 绑定，您不需要为每个已拉入的依赖项添加排除项。您只需添加排除依赖项与已放置在的依赖项第一的。

前任 -

```
<dependencies>

        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
            <exclusions>
                <exclusion>
                    <groupId>org.springframework.boot</groupId>
                    <artifactId>spring-boot-starter-logging</artifactId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-security</artifactId>
        </dependency>

</dependencies> 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-07-14T20:53:59.753

我只是忽略/删除了那个 jar 文件。

[![在此处输入图像描述](../Images/279c0a55e2ba832df55ea1d8c31bf7d9.png)](https://i.stack.imgur.com/H8J26.png)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-08-30T02:53:20.947

```
<!--<dependency>-->
     <!--<groupId>org.springframework.boot</groupId>-->
     <!--<artifactId>spring-boot-starter-log4j2</artifactId>-->
<!--</dependency>--> 
```

我通过删除这个解决了：spring-boot-starter-log4j2

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-06-03T11:03:44.870

这是因为 StaticLoggerBinder.class 类属于两个不同的 jar 的问题。此类从 logback-classic-1.2.3.jar 引用，同样的类也从 log4j-slf4j-impl-2.10.0.jar 引用。类路径中的两个 jar。因此，他们之间存在冲突。这是日志文件未生成的原因，即使类路径 [src/main/resource] 中的 log4j2.xml 文件也是如此。

我们已经选择了一个 jar，我建议使用 log4j-slf4j-impl-2.10.0.jar 文件并排除 logback-classic-1.2.3.jar 文件。解决方法：打开pom文件，查看依赖层次结构[eclipse]或者运行
mvn dependency:tree命令，找出下载依赖的依赖树和依赖源。找到冲突的依赖项并排除它们。对于 Springboot 应用程序，试试这个。

```
<dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
            <exclusions>
                    <exclusion>
                        <groupId>org.springframework.boot</groupId>
                        <artifactId>spring-boot-starter-logging</artifactId>
                    </exclusion>
                </exclusions>
        </dependency>
    <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-actuator</artifactId>
            <exclusions>
                <exclusion>
                    <groupId>org.springframework.boot</groupId>
                    <artifactId>spring-boot-starter-logging</artifactId>
                </exclusion>
            </exclusions>
        </dependency>

This is working fine for me after struggling a lots. 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-12-30T08:13:34.960

只使用必需的依赖项，而不是全部:)))。对我来说，对于日志记录过程的正常工作，您需要此依赖项从 pom.xml 中排除其他依赖项

```
<dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.7.5</version>
    </dependency>

    <dependency>
        <groupId>ch.qos.logback</groupId>
        <artifactId>logback-classic</artifactId>
        <version>1.1.8</version>
    </dependency>

    <dependency>
        <groupId>ch.qos.logback</groupId>
        <artifactId>logback-core</artifactId>
        <version>1.1.8</version>
    </dependency> 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-03-18T13:43:14.253

对我来说，答案是强制 Maven 重建。在 Eclipse 中：

1.  右键单击项目-> Maven -> 禁用 Maven 自然
2.  右键单击项目-> Spring Tools > 更新 Maven 依赖项
3.  右键单击项目-> 配置 > 转换 Maven 项目

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-08-20T19:37:26.133

对我来说，从 log4j 切换到 logback 后，它原来是一个 Eclipse/Maven 问题。查看您的`.classpath`文件并搜索字符串`"log4j"`。

就我而言，我在那里有以下内容： `<classpathentry kind="var" path="M2_REPO/org/slf4j/slf4j-log4j12/1.7.1/slf4j-log4j12-1.7.1.jar"/> <classpathentry kind="var" path="M2_REPO/log4j/log4j/1.2.17/log4j-1.2.17.jar" />`

从文件中删除这些条目（或者您可以重新生成它）解决了这个问题。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-04-27T09:43:52.023

... org.codehaus.mojo cobertura-maven-plugin 2.7 测试 ch.qos.logback logback-classic 工具 com.sun ...

##我修复了这个

... org.codehaus.mojo cobertura-maven-plugin 2.7 测试 ch.qos.logback logback-classic 工具 com.sun ...

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-01-27T04:59:47.220

我通过从我的 Intellij 项目转到项目结构解决了这个问题。我删除了名为： Maven: org.apache.logging.log4j:log4j-to-slf4j-impl:2.14.1 的文件 [![在此处输入图像描述](../Images/60ec2828b9c8091e979786bf7b8ff984.png)](https://i.stack.imgur.com/giuo5.png)

此文件未在此图片中显示。您可能会看到两个称为**log4j-to-slf4j 的库**。删除一个，你就可以走了。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-09-25T13:16:04.367

我在一个非 Maven 项目中遇到了这个问题，两个依赖的 jar 每个都包含一个 slf4j。我通过删除一个依赖的 jar 来解决，编译项目（当然会失败）然后添加删除的一个。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-11-10T12:43:47.170

我有同样的问题。在我的 pom.xml 我有两个

```
 <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-simple</artifactId>
        <version>1.7.28</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-web</artifactId>
        <version>2.2.1.RELEASE</version>
    </dependency> 
```

当我删除 spring-boot-starter-web 依赖项时，问题就解决了。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2019-10-03T05:38:14.967

`<scope>provided</scope>`和的组合`<exclusions>`对我不起作用。

我不得不使用这个：

```
<dependency>
    <groupId>ch.qos.logback</groupId>
    <artifactId>logback-classic</artifactId>
    <scope>system</scope>
    <systemPath>${project.basedir}/empty.jar</systemPath>
</dependency> 
```

一个 jar 文件在哪里`empty.jar`，里面什么都没有。

* * *

## 回答 #17

> 赞同：-5
> 
> 时间：2015-10-07T18:42:07.567

似乎删除 .m2 目录和：

`mvn install -DskipTests -T 4`为我解决了这个问题。

# facebook - Facebook 向有对象的朋友打开图形操作

> ID：14024758
> 
> 赞同：1
> 
> 时间：2012-12-24T18:47:31.483
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

> **可能重复：**
> [如何在 PHP 中使用 Graph API 发布带有 message_tags 字段的消息](https://stackoverflow.com/questions/8351194/how-to-post-message-with-message-tags-field-using-graph-api-in-php)
> [我可以在朋友的墙上发布为“Open Graph Action”还是我需要一个经典的“wall post”？](https://stackoverflow.com/questions/10661667/can-i-post-on-a-friends-wall-as-open-graph-action-or-i-need-a-classic-wall-p)

我想对一个有对象的朋友做一个动作，假设我想做

“Jon Doe”通过“My Cool App”向“Merry Smith”发送了一个“物品”

其中“sent”是“Action”“item”是“object”“Merry Smith”是 Jon 在 FB 上的朋友。“我的酷应用”是我的应用。

用开放图我只能得到

“Jon doe”通过“我的酷应用”发送了一个“项目” - 带有“Merry Smith”，或者只能在消息中“标记”。

# scala - 在 Scala 中估计可能的参与者数量

> ID：14024760
> 
> 赞同：0
> 
> 时间：2012-12-24T18:48:04.477
> 
> 标签：scala, multiprocessing, actor

如何估计 Scala 程序可以处理的演员数量？

对于上下文，我正在考虑本质上是一个神经网络，它将以高速率创建和忘记细胞。我正在考虑让每个细胞都成为演员，但会有数百万个。我正在尝试确定这种设计是否值得追求，但无法估计演员数量的限制。我的意图是它应该完全在一个系统上运行，因此不适用分布式限制。

就此而言，如果有更好的选择，我还没有确定 Scala，但单元*确实*有状态，例如，它们与其他单元的连接、连接的权重等。虽然这可以完成作为“每个单元格都是最终的。更改意味着用具有相同 id# 的新单元格替换当前单元格。”

PS：我不知道斯卡拉。我正在考虑拿起它来做这个项目。我还在考虑许多其他替代方案，包括 Java、Object Pascal 和 Ada。但是与线程池相比，actor*似乎*更适合我所追求的东西（并且 Java 无法处理足够的线程来使线程/单元设计可行。

PS：在任何时候，大多数演员都是静止的，但需要有一种方法可以循环浏览他们的整个集合。如果语言中没有内置，则可以通过每个单元格中的第一个/下一个链接进行管理。（需要两个链接，以允许提取中间的单元格以进行释放。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T19:03:22.760

对于神经网络模拟，真正的问题是有多少计算工作将花费在通信上，以及计算单元内的某些内容将花费多少？如果大部分工作是在通信上，那么 Actor 可能是正确性的好选择，但对于效率来说根本不是一个好的选择（即使使用 Akka，它的性能相当不错；[不过 AsyncFP](https://github.com/laforge49/Asynchronous-Functional-Programming/wiki)可能会成功）。数以百万计的神经元听起来很慢——效率可能是一个重要的问题。如果神经元有一些非常繁重的计算要自己完成，那么通信开销就没什么大不了的。

如果通信是瓶颈，并且您有很多微小的消息，那么您应该设计一个自定义数据结构来保存网络，以及自定义线程处理，这将利用您拥有的所有处理器并最小化锁定的数量你必须这样做。例如，如果您有空间，则每个神经元都可以保存来自与其链接的那些神经元的输入值数组，并且它会在计算其输出时直接读取该数组*而无需锁定，输入神经元**也*只会更新值*无锁定*他们去的时候。然后，您可以将所有神经元转储到一个大池中，并让一个主人将它们分成几块，我不知道，一次可能有一万个，每个到它自己的线程。Scala 可以很好地处理这类事情，但希望自己做很多低级工作，或者等待很长时间才能完成模拟。

# org-mode - 在 Emacs org-mode 中设置 HTML 导出的最大宽度

> ID：14024763
> 
> 赞同：7
> 
> 时间：2012-12-24T18:48:19.527
> 
> 标签：org-mode

当我将 org-mode 文件导出为 HTML 时，我想限制行宽以使其更易于阅读。可以使用 #+ATTR_HTML: 设置最大宽度：帮我这样做吗？如果是这样，怎么做？如果没有，有没有办法？我更喜欢按文件而不是全局或按段落来做。

我正在使用 Emacs 23.3.1 和 org-mode 7.8.03。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-01T12:33:03.967

您可以设置 css 样式以限制每个文件的最大宽度：

```
#+HTML_HEAD: <style type="text/css">body{ max-width:50%; }</style> 
```

还有一种按标题设置的方法：

```
#+HTML_HEAD: <style type="text/css">#outline-container-introduction{ max-width:30%; }</style> 
```

然后设置具体标题的属性：

```
:PROPERTIES:
:CUSTOM_ID: introduction
:END: 
```

更新：替换`#+STYLE`为`#+HTML_HEAD`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T10:03:58.267

**嗨**，那里。请注意，仅使用上面建议的*max-width*标记将默认将整个正文内容放在左侧。此外，如果您希望将其置于屏幕中央，则需要添加*边距*标签并将其设置为自动，方法是添加 `margin: auto;` 它使它看起来对我来说更好，试试吧。

# regex - 对正则表达式的操作？

> ID：14024764
> 
> 赞同：0
> 
> 时间：2012-12-24T18:48:38.947
> 
> 标签：regex, intersection

如何解决两个正则表达式的交集，如下所示：

```
(01*10*) ∩  (10*01) = {}=φ (how  ?)
(0*1*1)* ∩ (1*0*0)* = {ε} 
```

和两个 RE 的并集，如：

```
(a*b)*U(ba*)* = (a+b)* (how ?) 
```

另请解释解决正则表达式操作的一般方法。（任何链接都会有所帮助）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:56:50.227

对于交叉路口，有前瞻：

```
(?=01*10*)(?=10*01) 
```

对于联合，有交替：

```
(a*b)*|(ba*)* 
```

我没有给你的一般链接，但其他操作可以分解为那些加上负前瞻。

# java - 检测来自另一部手机的输入？

> ID：14024769
> 
> 赞同：1
> 
> 时间：2012-12-24T18:49:14.017
> 
> 标签：java, android, broadcastreceiver

我正在创建一个应用程序并想添加一个功能。我想要做的是能够检测到来自另一部手机的某种输入代码。例如，如果手机 A 有我的应用程序并正在与手机 B 上的某人通话，如果手机 B 上的人输入预定代码，则手机 A 上的应用程序会做一些事情。

手机 B ---> 输入代码 ---> 手机 A 上的应用程序采取行动

手机 A 上的应用程序在收到输入后将在后台运行。

如果这是不可能的，那么我已经找到了使用广播接收器通过文本消息执行此操作的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T19:07:47.327

这是一个 DTMF 识别器：[http ://code.google.com/p/dtmf-decoder/](http://code.google.com/p/dtmf-decoder/)

不知道这个项目有多成熟。但这可能是您的灵感来源:)。

# linux - 使用状态消息较少的 genisoimage

> ID：14024774
> 
> 赞同：0
> 
> 时间：2012-12-24T18:49:38.937
> 
> 标签：linux, bash

我有一个脚本可以做几件事。其中之一是使用 genisoimage 为蓝光创建 iso。它会给出恼人的状态消息，如下所示：

```
26.13% 完成，预计完成 Mon Dec 24 12:31:54 2012
 26.17% 完成，预计完成 Mon Dec 24 12:31:51 2012
 26.22% 完成，预计完成 Mon Dec 24 12:31:52 2012
 26.26% 完成，预计完成 Mon Dec 24 12:31:53 2012
 26.31% 完成，预计完成 Mon Dec 24 12:31:55 2012
 26.35% 完成，预计完成 Mon Dec 24 12:31:52 2012
 26.40% 完成，预计完成 Mon Dec 24 12:31:53 2012
 26.45% 完成，预计完成 Mon Dec 24 12:31:54 2012
 26.49% 完成，预计完成 Mon Dec 24 12:31:51 2012
 26.54% 完成，预计完成 Mon Dec 24 12:31:52 2012

```

这些消息对我没有帮助。有没有简单的方法来关闭这些消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T18:51:42.233

您是否尝试搜索的联机帮助页`genisoimage`？

`-quiet This makes genisoimage even less verbose. No progress output will be provided.`

# android - 在数组列表中搜索

> ID：14024776
> 
> 赞同：1
> 
> 时间：2012-12-24T18:49:46.067
> 
> 标签：android, arrays

我有一些`String Array`（如下所示），我想在里面搜索。我创建了一个`editText`和一个`Button`。进行此搜索的最佳方法是什么？

```
a0[0]="one";
a0[1]="two";
[...]
a1[0]="one-zero";
a1[1]="one-one";
[...]
a2[0]="two-zero";
a2[1]="two-one";

EditText searchField = (EditText) findViewById(R.id.searchfield);
Button searchButton = (Button) findViewById(R.id.searchbutton);
searchButton.setOnClickListener(new View.OnClickListener() {
    public void onClick(View view) {
        for (String s : Facts_Array) {
            if (searchField.getText().toString().contains(s)) {
                [...] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T18:56:01.263

“一些字符串数组”有多长？如果它不长，并且您没有遇到性能问题，那么除了使用线性搜索之外，您不应该将时间花在这上面。如果你花时间在这上面，这是过早的优化。
二进制搜索是另一种选择，但正如我上面所说，只有在遇到性能问题时才考虑优化

# javascript - 如何检查字符串是否是数组中任何元素的子字符串

> ID：14024777
> 
> 赞同：3
> 
> 时间：2012-12-24T18:49:57.533
> 
> 标签：javascript, jquery

我有一个数组

```
var months = ["January", "February", "March", "April", \
    "May", "June", "July", "August", "September", "October", \
    "November", "December"]; 
```

我有像“Nov”、“October”、“Jun”、“June”、“Sept”、“Sep”等字符串。关键是，字符串可以是其中一个月份的子字符串。

将字符串与数组元素的子字符串进行比较的最佳方法是什么？我如何找出当月的指数？

我在看 javascript/jQuery。

我知道我可以遍历数组检查每个元素，`search`并在找到时中断。我想要更好的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T18:58:40.503

```
var month_index = function(target) {
        target = target.toLocaleLowerCase();
        return jQuery.inArray(true, jQuery.map(months, function(s) {
            return s.toLocaleLowerCase().indexOf(target) > -1;
        }))
    };

var index_of_october = month_index("oct"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T19:13:29.817

```
var  substr = 'nov', months = ["december", "november", "feb"];

var index = months.indexOf( months.filter(function(v){ return v.indexOf(substr) >= 0;})[0]);
alert(index) 
```

[http://jsfiddle.net/KeMe9/](http://jsfiddle.net/KeMe9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T19:11:06.727

将您的数组项以小写形式

```
var txt = "Sep";
var found = false;
txt = txt.toLowerCase();
  for (var i = 0; i < 12; i++) {
    if (months[i].indexOf(txt) > -1) {
        found = true;
        break;
  }
} 
```

# python - 强制 pyYAML 持续转储

> ID：14024783
> 
> 赞同：11
> 
> 时间：2012-12-24T18:50:44.140
> 
> 标签：python, yaml, pyyaml

```
In [136]: a = [1,2,3,4,5]

In [137]: print yaml.dump(a)
[1, 2, 3, 4, 5]

In [138]: a = [1,2,3,4,5, [1,2,3]]

In [139]: print yaml.dump(a)
- 1
- 2
- 3
- 4
- 5
- [1, 2, 3] 
```

为什么以上两个的输出`dumps`不同？是否可以强制`pyYAML`拆分`list`总是？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-24T19:09:58.860

从[文档中](http://pyyaml.org/wiki/PyYAMLDocumentation#DumpingYAML)：

```
print yaml.dump(a, default_flow_style=False) 
```

该值可以是`True`、`False`或`None`。如果`None`或未指定（即默认值），它会自动选择是使用内联还是块式输出。`False`从不使用内联，`True`总是内联。

# regex - RichTextBox search'n'replace 结果交错排列

> ID：14024784
> 
> 赞同：2
> 
> 时间：2012-12-24T18:51:02.950
> 
> 标签：regex, silverlight, richtextbox

我目前正在尝试在包含关键字的搜索后生成彩色结果。我的代码显示了一个富文本框，其中包含被搜索引擎成功命中的文本。

现在我想突出显示文本中的关键字，将它们加粗并涂成红色。我在一个漂亮的字符串表中有我的单词列表，我以这种方式浏览（rtb 是我的 RichTextBox，plainText 是唯一从 rtb 运行的，包含它的整个文本）：

```
rtb.SelectAll();
string allText = rtb.Selection.Text;
string expression = "";
foreach (string word in words)
{
    expression = Regex.Escape(word);
    Regex regExp = new Regex(expression);
    foreach (Match match in regExp.Matches(allText))
    {
        TextPointer start = plainText.ContentStart.GetPositionAtOffset(match.Index, LogicalDirection.Forward);
        TextPointer end = plainText.ContentStart.GetPositionAtOffset(match.Index + match.Length, LogicalDirection.Forward);
        rtb.Selection.Select(start, end);
        rtb.Selection.ApplyPropertyValue(Run.FontWeightProperty, FontWeights.Bold);
        rtb.Selection.ApplyPropertyValue(Run.ForegroundProperty, "red");
    }
} 
```

现在我认为这可以解决问题。但不知何故，只有第一个单词被正确突出显示。然后，突出显示的第二次出现提前两次，正确数量的字母被突出显示，但在实际单词之前有几个字符。然后对于第三次出现，更早的字符更多，等等。

你知道是什么导致了这种行为吗？

编辑（01/07/2013）：仍然没有弄清楚为什么这些结果是交错的......到目前为止，我注意到如果我在第二个 foreach 语句之前创建了一个设置为零的变量，将它添加到每个文本指针的位置并递增在每个循环结束时将它加 4（不知道为什么），结果被充分着色。然而，如果我搜索两个或更多关键字（无论它们大小是否相同），第一个关键字的每次出现都会正确着色，但只有其他关键字的第一次出现是正确着色的。（其他人再次交错）这是编辑后的代码：

```
rtb.SelectAll();
string allText = rtb.Selection.Text;
string expression = "";
foreach (string word in words)
{
    expression = Regex.Escape(word);
    Regex regExp = new Regex(expression);
    int i = 0;
    foreach (Match match in regExp.Matches(allText))
    {
        TextPointer start = plainText.ContentStart.GetPositionAtOffset(match.Index + i, LogicalDirection.Forward);
        TextPointer end = plainText.ContentStart.GetPositionAtOffset(match.Index + match.Length + i, LogicalDirection.Forward);
        rtb.Selection.Select(start, end);
        rtb.Selection.ApplyPropertyValue(Run.FontWeightProperty, FontWeights.Bold);
        rtb.Selection.ApplyPropertyValue(Run.ForegroundProperty, "red");
        i += 4; // number found out from trials
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:57:24.353

好的！所以我通过阅读[这个问题](https://stackoverflow.com/questions/8152546/highlight-words-with-regex-on-richtextbox-with-silverlight)了解到，每次我修改样式时，都会在文本中添加 4 个字符，这就是我的设置混乱的原因。

为了解决这个问题，由于我可能有多个关键字，并且它们不会按照它们在搜索框中的输入顺序一个接一个地出现在文本中，我必须首先浏览我的文本以找到每个出现的位置关键字**不修改文字**。对于每次出现，我将出现的**开始位置**、**结束位置**和**所需颜色**存储在自定义列表中。

完成此选择后，我按其中每个成员的**start属性对我的出现列表进行排序。**我现在可以确信，我在**foreach**循环中浏览的每个出现都是文本中的下一个出现，而不管其内容或长度。而且我知道我想让它以哪种颜色出现，这样我就可以区分不同的关键字。

然后，最后，我可以浏览有序列表的每个成员并修改文本的样式，因为我知道下一个单词将出现在文本的后面，所以我必须在每个循环结束时将 4 个字符添加到我的索引中。

# ruby-on-rails - Rails ERB 视图语法问题

> ID：14024785
> 
> 赞同：0
> 
> 时间：2012-12-24T18:51:10.147
> 
> 标签：ruby-on-rails, ruby, actionview

我显然无法在这里获得正确的语法：

```
<table width="100%" border="0" cellspacing="0" cellpadding="20" background="<%= #{Rails.root}/app/assets/images/image.png %>"> 
```

这样做的适当方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T21:16:28.297

Rails 提供了资产帮助器来获取图像文件的路径，它与资产管道一起使用，并在您将资产主机更改为使用 CDN 时自动工作。

```
<table width="100%" border="0" cellspacing="0" cellpadding="20" background="<%= image_path('image.png') %>"> 
```

这是关于[资产助手的文档](http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-24T18:52:55.710

更新：

下面的答案显示了正确的语法，但要显示图像路径，最好使用@TomFeaks 答案。

试试这个：

```
<table width="100%" border="0" cellspacing="0" cellpadding="20" background="<%= "#{Rails.root}/app/assets/images/image.png" %>"> 
```

# c# - IAuthenticationResponse.GetExtension () 总是返回 null

> ID：14024787
> 
> 赞同：6
> 
> 时间：2012-12-24T18:51:13.937
> 
> 标签：c#, asp.net-mvc-4, dotnetopenauth

**更新** 感谢@IvanL 的评论，事实证明问题是谷歌特有的。从那以后，我尝试了其他提供商，并且对于那些一切都按预期工作。谷歌似乎没有发送索赔信息。还没有弄清楚为什么或我需要以不同的方式让谷歌发送它。

黑暗中的狂野刺说它可能与默认为 http://:/ 的领域有关，因为我已经看到 Andrew Arnott 的回答，即 Google 根据通过身份验证传递的领域更改同一帐户的声明标识符要求。

另一个可能很重要的信息：与在网上可以找到的许多使用 dotnetopenauth 的示例不同，我没有使用“简单”文本框并自己编写 openIdIdentifier，但我使用的是[openID 选择器](https://code.google.com/p/openid-selector/)，它提供了`openIdIdentifier`传递给`ValidateAtOpenIdProvider`. （根据[向您的 ASP.NET MVC 4 应用程序添加 OpenID 身份验证一](http://www.strathweb.com/2012/08/adding-openid-authentication-to-your-asp-net-mvc-4-application/)文。）

问题是：为什么 IAuthenticationResponse.GetExtension() 在使用 Google 作为 openId 提供程序时总是返回 null，否则所有与 Google 相关的问题（根据需要请求的电子邮件、AXFetchAsSregTransform 等）都已解决？

**原来的**

我正在努力让 DotNetOpenAuth 解析从提供程序返回的响应。[按照向您的 ASP.NET MVC 4 应用程序添加 OpenID 身份验证](http://www.strathweb.com/2012/08/adding-openid-authentication-to-your-asp-net-mvc-4-application/)的说明操作，直到登录应该工作的点，登录结果返回到主页，用户名（昵称）显示在右上角。（这取决于“用户此时应该看到以下内容：”刚刚超过文章的一半）。

我正在使用带有 C# 的 Visual Studio Web Developer 2010 Express。DotNetOpenAuth 版本为 4.0.3.12153（根据 packages.config，根据 Windows Explorer 为 4.0.3.12163）。

我的 web.config 按照[激活 AXFetchAsSregTransform](http://www.dotnetopenauth.net/developers/help/the-axfetchassregtransform-behavior/)中的说明进行了修改，这是 DotNetOpenId 的解决方案[- Open Id get some data](https://stackoverflow.com/questions/1593506/dotnetopenid-open-id-get-some-data)

不幸的是，这还不足以让它为我工作。

openid-selector 工作正常，可以正确选择 openid 提供程序。身份验证请求创建如下：

```
 public IAuthenticationRequest ValidateAtOpenIdProvider(string openIdIdentifier)
    {
        IAuthenticationRequest openIdRequest = openId.CreateRequest(Identifier.Parse(openIdIdentifier));

        var fields = new ClaimsRequest()
        {
            Email = DemandLevel.Require,
            FullName = DemandLevel.Require,
            Nickname = DemandLevel.Require
        };
        openIdRequest.AddExtension(fields);

        return openIdRequest;
    } 
```

这一切都有效。我可以登录并授权该页面接收我的信息，然后调用`GetUser`：

```
 public OpenIdUser GetUser()
    {
        OpenIdUser user = null;
        IAuthenticationResponse openIdResponse = openId.GetResponse();

        if (openIdResponse.IsSuccessful())
        {
            user = ResponseIntoUser(openIdResponse);
        }

        return user;
    } 
```

`openIdResponse.IsSuccessful`被实现为扩展方法（参见链接文章）：

```
return response != null && response.Status == AuthenticationStatus.Authenticated; 
```

并且在输入方法时总是成功`ResponseIntoUser`：

```
 private OpenIdUser ResponseIntoUser(IAuthenticationResponse response)
    {
        OpenIdUser user = null;
        var claimResponseUntrusted = response.GetUntrustedExtension<ClaimsResponse>();
        var claimResponse = response.GetExtension<ClaimsResponse>();

        // For this to work with the newer/est version of DotNetOpenAuth, make sure web.config
        // file contains required settings. See link for more details.
        // http://www.dotnetopenauth.net/developers/help/the-axfetchassregtransform-behavior/

        if (claimResponse != null)
        {
            user = new OpenIdUser(claimResponse, response.ClaimedIdentifier);
        }
        else if (claimResponseUntrusted != null)
        {
            user = new OpenIdUser(claimResponseUntrusted, response.ClaimedIdentifier);
        }
        else
        {
            user = new OpenIdUser("ikke@gmail.com;ikke van ikkenstein;ikke nick;ikkeclaimedid");
        }
        return user;
    } 
```

我上面的版本与链接文章中的代码的不同之处仅在于我添加了最后一个 else 块，以确保我始终获得带有用户名和注销链接的主页（这有助于连续多次尝试执行此操作）。

我试过谷歌和雅虎。两者都验证良好，都返回 WebDev 服务器记录的身份断言。但是，`GetUntrustedExtenstion`总是`GetExtension` **返回**null。我总是从最后一个 else 中看到“ikke nick”，而不是我实际用于验证的名称。

我不知道如何继续尝试让它发挥作用。这可能是我的一些疏忽（我是一位经验丰富的开发人员，但刚刚开始涉足 C# 和 Web 前端开发），我看不到它。

非常欢迎有关如何进行/调试的任何和所有建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T15:20:49.973

您是否使用 Google 作为 OpenId 提供商来测试您的解决方案？因为谷歌有/有只在您第一次验证应用程序时才包含声明的习惯。所以也许尝试使用一个新的谷歌帐户，看看是否有效？

很抱歉响应缓慢，本周在客户处进行了大规模迁移 :-) 很高兴这条小评论解决了您的问题。

# c# - 带有值数组的 NUnit 测试

> ID：14024789
> 
> 赞同：22
> 
> 时间：2012-12-24T18:51:35.920
> 
> 标签：c#, nunit

我正在尝试将 NUnit 与 values 属性一起使用，以便我可以指定许多不同的输入，而无需 100 个单独的测试。

但是现在我意识到有时我想使用相同的输入集，但在非常不同的测试中，如下所示。

有没有一种方法可以在一个地方指定所有值，比如数组并为每个值属性使用数组？

我想确保测试作为 100 个单独的测试运行，而不是 1 个运行 100 个值的测试。

我查看了 Nunit 文档，但找不到实现此目的的方法。有任何想法吗？

代码：

```
[Test]
public void Test1([Values("Value1", "Value2", "Value3", ... "Value100")] string value)
{
    //Run Test here
}

[Test]
public void Test2([Values("Value1", "Value2", "Value3", ... "Value100")] string value)
{
    //Run Test here
}

[Test]
public void Test3([Values("Value1", "Value2", "Value3", ... "Value100")] string value)
{
    //Run Test here
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-24T19:08:39.877

[`TestCaseSource`属性](http://www.nunit.org/index.php?p=testCaseSource&r=2.6.2)适合这里。

参见示例：

```
private string[] commonCases = { "Val1", "Val2", "Val3" };

[Test]
[TestCaseSource(nameof(commonCases))]
public void Test1(string value)
{
    ....
}

[Test]
[TestCaseSource(nameof(commonCases))]
public void Test12(string value)
{
    ....
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T19:03:10.497

您可以使用`FactoryAttribute`测试方法，而不是`ValuesAttribute`参数。[在此处](http://www.nunit.org/index.php?p=factory&r=2.5)阅读有关此内容的更多信息。

**编辑：** 亚历山大是对的。FactoryAttribute 是 API 的临时部分。正确的方法是使用[TestCaseSourceAttribute](http://www.nunit.org/index.php?p=testCaseSource&r=2.6.2)。

# java - 带有 RMI 调用的类加载器

> ID：14024794
> 
> 赞同：11
> 
> 时间：2012-12-24T18:52:21.547
> 
> 标签：java, classloader, rmi, profiler

我试图制作简单的 java profiler 并为此使用 ClassLoader。

这是我的 ClassLoader 实现：

```
import java.rmi.RemoteException;
import java.rmi.registry.LocateRegistry;
import java.rmi.registry.Registry;

public class CustomClassLoader extends ClassLoader {
    private Notifier notifier;

    public CustomClassLoader() {
        super();
    }

    public CustomClassLoader(ClassLoader parent) {
        super(parent);
    }

    private void initNotifier() {
        if (notifier != null) return;
        try {
            System.out.println("2");
            Registry registry = LocateRegistry.getRegistry(Const.registryPort);
            System.out.println("3");
            notifier = (Notifier) registry.lookup(Const.stubName);
            System.out.println("4");
        } catch (Exception e) {
            e.printStackTrace();
            System.exit(1);
        }
    }

    @Override
    protected synchronized Class<?> loadClass(String name, boolean resolve) 
                                    throws ClassNotFoundException {
        System.out.println("0");
        Class clazz = super.loadClass(name, resolve);
        System.out.println("1");
        initNotifier();
        System.out.println("5");
        try {
            notifier.classLoaded(name);
            System.out.println("6");
        } catch (RemoteException e) {
            e.printStackTrace();
            System.exit(1);
        }
        return clazz;
    }
} 
```

当我尝试使用此类加载器时，我收到此输出（我尝试使用 1.6_37 和 1.7_10 jkd）：

```
C:\Users\Scepion1d>java -cp C:\Users\Scepion1d\Dropbox\Workspace\IntellijIDEA\pr
ofiler\out\artifacts\loader\loader.jar;C:\Users\Scepion1d\Dropbox\Workspace\Inte
llijIDEA\app\out\production\app -Djava.system.class.loader=CustomClassLoader Main
0
1
2
0
1
2
3
0
1
2
3
java.lang.IllegalArgumentException: Non-positive latency: 0
        at sun.misc.GC$LatencyRequest.<init>(GC.java:190)
        at sun.misc.GC$LatencyRequest.<init>(GC.java:156)
        at sun.misc.GC.requestLatency(GC.java:254)
        at sun.rmi.transport.DGCClient$EndpointEntry.lookup(DGCClient.java:212)
        at sun.rmi.transport.DGCClient.registerRefs(DGCClient.java:120)
        at sun.rmi.transport.ConnectionInputStream.registerRefs(ConnectionInputS
tream.java:80)
        at sun.rmi.transport.StreamRemoteCall.releaseInputStream(StreamRemoteCal
l.java:138)
        at sun.rmi.transport.StreamRemoteCall.done(StreamRemoteCall.java:292)
        at sun.rmi.server.UnicastRef.done(UnicastRef.java:431)
        at sun.rmi.registry.RegistryImpl_Stub.lookup(Unknown Source)
        at CustomClassLoader.initNotifier(CustomClassLoader.java:22)
        at CustomClassLoader.loadClass(CustomClassLoader.java:35)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
        at sun.security.jca.ProviderConfig$3.run(ProviderConfig.java:234)
        at java.security.AccessController.doPrivileged(Native Method)
        at sun.security.jca.ProviderConfig.doLoadProvider(ProviderConfig.java:22
5)
        at sun.security.jca.ProviderConfig.getProvider(ProviderConfig.java:205)
        at sun.security.jca.ProviderList.getProvider(ProviderList.java:215)
        at sun.security.jca.ProviderList.getService(ProviderList.java:313)
        at sun.security.jca.GetInstance.getInstance(GetInstance.java:140)
        at java.security.Security.getImpl(Security.java:659)
        at java.security.MessageDigest.getInstance(MessageDigest.java:129)
        at java.rmi.dgc.VMID.computeAddressHash(VMID.java:140)
        at java.rmi.dgc.VMID.<clinit>(VMID.java:27)
        at sun.rmi.transport.DGCClient.<clinit>(DGCClient.java:66)
        at sun.rmi.transport.ConnectionInputStream.registerRefs(ConnectionInputS
tream.java:80)
        at sun.rmi.transport.StreamRemoteCall.releaseInputStream(StreamRemoteCal
l.java:138)
        at sun.rmi.transport.StreamRemoteCall.done(StreamRemoteCall.java:292)
        at sun.rmi.server.UnicastRef.done(UnicastRef.java:431)
        at sun.rmi.registry.RegistryImpl_Stub.lookup(Unknown Source)
        at CustomClassLoader.initNotifier(CustomClassLoader.java:22)
        at CustomClassLoader.loadClass(CustomClassLoader.java:35)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
        at sun.security.jca.ProviderConfig$3.run(ProviderConfig.java:234)
        at java.security.AccessController.doPrivileged(Native Method)
        at sun.security.jca.ProviderConfig.doLoadProvider(ProviderConfig.java:22
5)
        at sun.security.jca.ProviderConfig.getProvider(ProviderConfig.java:205)
        at sun.security.jca.ProviderList.getProvider(ProviderList.java:215)
        at sun.security.jca.ProviderList$3.get(ProviderList.java:130)
        at sun.security.jca.ProviderList$3.get(ProviderList.java:125)
        at java.util.AbstractList$Itr.next(AbstractList.java:345)
        at java.security.SecureRandom.getPrngAlgorithm(SecureRandom.java:522)
        at java.security.SecureRandom.getDefaultPRNG(SecureRandom.java:165)
        at java.security.SecureRandom.<init>(SecureRandom.java:133)
        at java.rmi.server.UID.<init>(UID.java:92)
        at java.rmi.server.ObjID.<clinit>(ObjID.java:71)
        at java.rmi.registry.LocateRegistry.getRegistry(LocateRegistry.java:158)

        at java.rmi.registry.LocateRegistry.getRegistry(LocateRegistry.java:106)

        at java.rmi.registry.LocateRegistry.getRegistry(LocateRegistry.java:73)
        at CustomClassLoader.initNotifier(CustomClassLoader.java:20)
        at CustomClassLoader.loadClass(CustomClassLoader.java:35)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

我认为问题出在 RMI 服务器上，但我写了另一个 RMI 客户端，它运行良好。有谁知道问题出在哪里以及如何解决（他们）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:17:31.523

**TL;DR：**不要使用像根类加载器这样具有严重副作用的类加载器。

问题是 sun.rmi.transport.DGCClient 类上的 const 字段 gcInterval 在使用之前未初始化（因此显示值为 0）。这样做的原因是您的类加载器通过 RMI 进行调用，从而创建了一个新的 DGCClient 实例。在 DGCClient 的构造函数执行期间，会加载另一个类（参见堆栈跟踪）。对类加载器的第三次调用再次触发 RMI 调用，它不会创建 DGCClient 的新实例，而是使用先前创建的实例并对其进行一些调用。这意味着对半初始化对象进行调用，导致使用这个尚未初始化的常量字段。

我们不能为此责怪 Sun/Oracle，因为每个 Java 类都可以假定它是在没有这种不可预测的副作用的情况下加载的。

# linux - 在 bash one-liner 中为多个命令设置环境变量

> ID：14024798
> 
> 赞同：37
> 
> 时间：2012-12-24T18:52:48.490
> 
> 标签：linux, bash, command-line

假设我有以下命令

> $> MYENVVAR=我的文件夹回显 $MYENVVAR && MYENVVAR=我的文件夹 ls $MYENVVAR

我的意思是 MYENVVAR=myfolder 重复

是否可以为两个“&&”分隔的命令设置一次，同时将命令保持在一行？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-24T20:41:35.353

假设您实际上需要它作为环境变量（即使示例代码并不真正需要环境变量；一些 shell 变量不是环境变量）：

```
(export MYENVVAR=myfolder; echo $MYENVVAR && ls $MYENVVAR) 
```

如果您不需要它作为环境变量，那么：

```
(MYENVVAR=myfolder; echo $MYENVVAR && ls $MYENVVAR) 
```

括号创建一个子外壳；在子 shell 中设置的环境变量（和普通变量）不会影响父 shell。在显示的两个命令中，变量设置一次，然后使用两次，两个命令中的每一个都使用一次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T20:34:44.907

括号生成一个新进程，您可以在其中设置自己的变量：

```
( MYENVVAR=myfolder; echo  1: $MYENVVAR; ); echo  2: $MYENVVAR;
1: myfolder
2: 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-31T13:45:33.033

将命令包装成字符串并`eval`在其上使用是一种尚未提及的方法：

```
a=abc eval 'echo $a; echo $a'
a=abc eval 'echo $a && echo $a' 
```

或者，如果你想在环境变量和命令之间使用通用的多对多映射，而不需要引用你的命令，你可以使用`trap`下面的 my -based 函数：

```
envMulti()
{
shopt -s extdebug;
PROMPT_COMMAND="$(trap -p DEBUG | tee >(read -n 1 || echo "trap - DEBUG")); $(shopt -p extdebug); PROMPT_COMMAND=$PROMPT_COMMAND";
eval "trap \"\
[[ \\\"\\\$BASH_COMMAND\\\" =~ ^trap ]] \
|| { eval \\\"$@ \\\$BASH_COMMAND\\\"; false; }\" DEBUG";
} 
```

用法：

```
envMulti a=aaa b=bbb; eval 'echo $a'; eval 'echo $b' 
```

注意：`eval 'echo...'`上面的s与我的脚本无关；你永远不能`a=aaa echo $a`直接做，因为`$a`太早扩展了。

或者，如果您愿意，也可以使用它`env`（它实际上是在任何命令前面加上任何东西）：

```
echo -e '#!/bin/bash\n\necho $a' > echoScript.sh
chmod +x echoScript.sh
envMulti env a=aaa; ./echoScript.sh; ./echoScript.sh 
```

注意：创建了一个测试脚本只是为了演示与 的用法`env`，它不能接受像`eval`早期演示中使用的内置函数。

哦，以上都是为了手动运行你自己的 shell 命令。如果你做了除此之外的任何事情，请确保你知道所有关于使用的注意事项`eval`——即确保你相信命令的来源等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T18:57:02.600

您是否考虑过使用[export 之](http://bashshell.net/shell-scripts/export-variables-in-bash/)类的

```
export MYENVVAR=myfolder 
```

然后输入你的命令`echo $MYENVVAR`（即使在子shell中也可以）等

# java - 使用 Java 在类路径中添加 .jar 文件

> ID：14024801
> 
> 赞同：3
> 
> 时间：2012-12-24T18:53:07.177
> 
> 标签：java

我正在尝试用 Java 开发一个脚本，该脚本在`.jar`指定目录中查找所有文件，然后它们`classpath`在特定条件下调用它们的`main()`方法。这是我的 Java 信息​​：

```
java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.5) (6b24-1.11.5-0ubuntu1~12.04.1)
OpenJDK Server VM (build 20.0-b12, mixed mode) 
```

这是`ls`当前工作目录的：

```
clojure.jar 
loader.class
loader.java 
```

我正在执行以下操作以添加`clojure.jar`并`classpath`调用其主要方法：

```
import java.io.File;

import java.net.URL;
import java.net.URLClassLoader;
import java.net.MalformedURLException;

import java.lang.reflect.Method;

public final class loader {

  public static void main (String[] args) {
    try {
      printClasspathString();
      System.out.println ("**********");
      URL[] classesRepo = { new File("clojure.jar").toURI ().toURL (),
                            new File(System.getProperty("user.dir")).toURI ().toURL ()};
      ClassLoader currentThreadClassLoader = Thread.currentThread().getContextClassLoader();
      URLClassLoader urlClassLoader = new URLClassLoader( classesRepo, currentThreadClassLoader);
      Thread.currentThread().setContextClassLoader(urlClassLoader);
      printClasspathString();
    } catch (Exception ex) {
      System.out.println(ex.getMessage ());
    }

    //Do I miss something here?

    String mainClassName="clojure.main";

    Class<?> mainClass = null;
    try {
      mainClass = Class.forName(mainClassName);
    }
    catch (Exception ex) {
      throw new IllegalArgumentException("class not found in your jar file " + mainClassName);
    }

    Method mainMethod = null;
    try {
      mainMethod = mainClass.getMethod("main", String[].class);
    }
    catch (Exception ex) {
      throw new IllegalArgumentException("class to launch (" + mainClassName + ") does not have a public static void main(String[]) method");
    }

    try {
      mainMethod.invoke(null, (Object) args);
    } catch (Exception ex) {
      System.out.println(ex.getMessage ());
    }

  }

  public static void printClasspathString() {
    ClassLoader applicationClassLoader = Thread.currentThread().getContextClassLoader();
    if (applicationClassLoader == null) {
      applicationClassLoader = ClassLoader.getSystemClassLoader();
    }
    URL[] urls = ((URLClassLoader)applicationClassLoader).getURLs();
    for(int i=0; i < urls.length; i++) {
      System.out.println (urls[i].getFile());
    }
  }

} 
```

不幸的是，加载程序没有按预期工作：

```
$ java -cp . loader
/home/proofit404/data/downloads/clojure-loader/
**********
/home/proofit404/data/downloads/clojure-loader/clojure.jar
/home/proofit404/data/downloads/clojure-loader/
Exception in thread "main" java.lang.IllegalArgumentException: class not found in your jar file clojure.main
    at loader.main(loader.java:37) 
```

但是，如果我使用该`-cp`选项，一切正常：

```
$ java -cp .:clojure.jar loader
/home/proofit404/data/downloads/clojure-loader/
/home/proofit404/data/downloads/clojure-loader/clojure.jar
**********
/home/proofit404/data/downloads/clojure-loader/clojure.jar
/home/proofit404/data/downloads/clojure-loader/
Clojure 1.4.0
user=> (System/exit 0) 
```

那么 - 我需要更改我的代码以使其按预期工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T19:45:04.313

我认为问题在于 Class.forName(String) 方法没有使用线程上下文类加载器，而是当前类的类加载器：

```
public static Class<?> forName(String className)
                    throws ClassNotFoundException

Returns the Class object associated with the class or interface with the given string name. Invoking this method is equivalent to:

    Class.forName(className, true, currentLoader)

where currentLoader denotes the defining class loader of the current class. 
```

这意味着您的 URLClassLoader 不会被使用。尝试使用 Class.forName(String,boolean, ClassLoader) 显式传递类加载器：

```
mainClass = Class.forName(mainClassName, true, urlClassLoader); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T19:20:41.307

试试这个代码并遵循下面给出的评论：

```
import java.net.URL;
import java.io.IOException;
import java.net.URLClassLoader;
import java.net.MalformedURLException;

public class JarLoader extends URLClassLoader {
    public JarLoader(URL[] urls) {
        super(urls);
    }

    public void addFile(String path) throws MalformedURLException {
        String urlPath = "jar:file://" + path + "!/";
        addURL(new URL(urlPath));
    }

    public static void main(String args[]) {
        try {
            System.out.println("First attempt...");
            Class.forName("org.gjt.mm.mysql.Driver");
            //specify your class name above
        } catch (Exception ex) {
            System.out.println("Failed.");
        }

        try {
            URL urls[] = {};

            JarLoader cl = new JarLoader(urls);
            cl
                    .addFile("/opt/mysql-connector-java-5.0.4/mysql-connector-java-5.0.4-bin.jar");
            // give your jar file above.
            System.out.println("Second attempt...");
            cl.loadClass("org.gjt.mm.mysql.Driver");
            //specify your class name above
            System.out.println("Success!");
        } catch (Exception ex) {
            System.out.println("Failed.");
            ex.printStackTrace();
        }
    }
} 
```

# ios - Monotouch - 在应用程序中浏览图像

> ID：14024802
> 
> 赞同：0
> 
> 时间：2012-12-24T18:53:12.763
> 
> 标签：ios, ios5, xamarin.ios

如标题所示，我应该使用什么控件来让用户执行以下操作：

1.  浏览iphone图片文件夹中的图像以将其设置为背景`UIViewController`
2.  将其复制到我的背景图像文件夹。

# c++ - 如何在 C++ 中创建“动态”指针

> ID：14024808
> 
> 赞同：3
> 
> 时间：2012-12-24T18:54:13.027
> 
> 标签：c++, pointers, vector

我有一个类`unit`，有一个元素`int holding[4];`

```
void main()
{
    vector<vector<unit> > allunits;
    vector<vector<short> > selectedunits; //This contains certain indexes for the above vector
    allunits.resize(2);
    selectedunits.resize(2);
    allunits[0].resize(5);
    int *ptr = &allunits[0][selectedunits[0][0]].holding[0]; //obviously dysfunctional
} 
```

我想要的是让这个指针动态地改变它指向的东西。当 的值发生`selectedunits[0][0]`变化时，我想`ptr`自动指向 的新值`allunits[0][selectedunits[0][0]].holding[0]`。当`selectedunits[0]`是一个空向量，`ptr`可以是任何东西，但它不能抛出运行时错误，这就是它现在所做的。

所以，如果我以后有代码`selectedunits[0].push_back(2);`，我想`ptr`指向`allunits[0][2].holding[0]`，然后该行`selectedunits[0][0]=1;`应该`ptr`指向`allunits[0][1].holding[0]`

编辑：这段代码的重点：
这都是为了游戏。`allunits`是一个单位向量，并`selectedunits`存储选择了哪些单位。它们是二维的，因为它们都被组织成 [player][index]。`allunits[0]`持有第一个玩家的单位，依此类推。

在某些条件下，指针被传递给将文本打印到屏幕的对象的构造函数。要打印的文本是有关所选单位的信息，包括指针指向的任何数字。不同的对象将打印不同的数据，因此是指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T21:10:17.577

使用函数或类。如果您使用的是 C++11，请在本地创建一个绑定到向量的 lambda。否则，创建一个将向量作为 const 引用参数的函数，或者将向量移动到它们自己的类中并将访问器代码放入成员函数中。

# objective-c - viewForHeaderInSection - 仅自定义标题标签但不自定义标题部分框架

> ID：14024810
> 
> 赞同：3
> 
> 时间：2012-12-24T18:54:37.037
> 
> 标签：objective-c, ios

我有一个独特的情况。

我想为表格标题部分显示自定义标题文本，但我想要默认标题部分框架渐变而不是自定义标题部分纯色。（请看附图）

![在此处输入图像描述](../Images/33dfb6f32ab1ad2c38787b9393a8a6e4.png)

这是我在`viewForHeaderInSection`方法中所做的：

```
- (UIView*)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    UIView *customSectionHeaderView;
    UILabel *titleLabel;

    customSectionHeaderView = [[UIView alloc] initWithFrame:CGRectMake(20, 0, tableView.frame.size.width, 24)];
    titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(15, 0, tableView.frame.size.width, 24)];
    titleLabel.textAlignment = UITextAlignmentLeft;
    [titleLabel setTextColor:[UIColor blackColor]];
    [titleLabel setBackgroundColor:[UIColor clearColor]];
    titleLabel.font = [UIFont boldSystemFontOfSize:15];
    titleLabel.text =  self.sortedPaths[section];

    [customSectionHeaderView addSubview:titleLabel];

    return customSectionHeaderView;
} 
```

通过消除

```
customSectionHeaderView = [[UIView alloc] initWithFrame:CGRectMake(20, 0, tableView.frame.size.width, 24)]; 
```

我能够得到结果，但是我不能向它添加子视图并返回一个视图。

我怎样才能达到那种渐变效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T18:59:52.963

为什么不`tableView:titleForHeaderInSection:`改用？这可以让您准确了解您正在谈论的内容：替换文本的默认标题。

当然，或者您可以只绘制自己的渐变。iOS 具有出色的渐变绘制方法。

# web-services - AllegroGraph API 的网络服务

> ID：14024816
> 
> 赞同：0
> 
> 时间：2012-12-24T18:55:35.490
> 
> 标签：web-services, cxf, sparql, allegrograph

AllegroGraph RDF 存储提供了多种通信渠道。我正在为此开发一个 Web 服务。我有以下问题：

如何在这个[SPARQL 端点](http://www.franz.com/agraph/support/documentation/current/http-protocol.html)上实现 Web 服务？最佳实践是什么？CXF 还是轴？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:11:19.333

您提供的链接指向 AllegroGraph API 文档。文档说：

> 这里描述的协议与 Sesame 2.0 HTTP 协议和 W3C SPARQL 协议（SPARQL 端点）兼容（是一个超集）。

我认为您可能想要开发一个位于 AllegroGraph 和客户端应用程序之间的小型库，并“讲”这个协议，它似乎是“普通”REST 和 SPARQL 的组合。然后，客户端应用程序可以将参数传递给您的库，该库将它们转换为 SPARQL 查询或正常 REST 请求中的参数。
对于这些操作，您可以使用[此答案](https://stackoverflow.com/a/462530/1445526)中提到的工具之一，或使用像[Jena](http://jena.apache.org) ARQ 这样的 SPARQL API 和像 JAX-RS 这样的通用 REST API，或项目编程语言中的类似函数。

根据您的项目，您可以将这些功能（SPARQL 和 REST 调用）与客户端应用程序集成。您当然可以再次将服务作为 Web 服务提供（使用例如 CXF 或 Axis），但如果您控制客户端应用程序，这可能对您的项目来说太多了。

# javascript - 无法调用 JS 进行验证（JSF）

> ID：14024817
> 
> 赞同：1
> 
> 时间：2012-12-24T18:55:45.057
> 
> 标签：javascript, jsf

当用户按下提交时，我无法让它调用下面的 JS，我错过了什么

```
<script type="text/javascript"> 

        function required(){  
            if (document.getElementById("Username").value.length == 0)  
            {   
                alert("message");        
                return false;   
            }       
            return true;   
        }

    </script> 
```

用户输入用户名的代码

```
<h:form> <!--onsubmit="return username_validation();">-->

                <h:outputLabel for="username">Please enter your username: </h:outputLabel>
                <h:inputText id="Username" label="Username" value="#{user.id}"
                             size="20" required="true" requiredMessage="Please enter a username" >
                    <f:ajax event="blur" render="usernameMessage" />
                </h:inputText><br></br><br></br>
                <h:message id="usernameMessage" for="username" />
                To print a piece of text, please press the submit button below to upload the text:<br/><br/>
                <h:commandButton type="Submit" value="Submit" onclick="return username_validation()" action="upload/uploadText" styleClass="submit"/>

            </h:form> 
```

多亏了你们的帮助，我现在有了以下信息：但是我永远无法得到错误消息旁边的我该`h:inputText`怎么做？

```
 <h:form> <!--onsubmit="return username_validation();">-->

                    <h:outputLabel for="username">Please enter your username: </h:outputLabel>
                    <h:inputText id="Username" label="Username" value="#{user.id}"
                                 size="20" required="true" requiredMessage="Please enter a username" >

                    </h:inputText><br></br><br></br>

                    To print a piece of text, please press the submit button below to upload the text:<br/><br/>
                    <h:commandButton type="Submit" value="Submit" onclick="return username_validation()" action="upload/uploadText" styleClass="submit"/>

                </h:form> 
```

这也是我的 userBean，我添加了 @NotNull 但这目前不起作用，我错过了什么吗？

```
package com.corejsf;

import java.io.Serializable;
import javax.inject.Named;
import javax.enterprise.context.SessionScoped;
import javax.validation.constraints.NotNull;

@Named("user")
@SessionScoped
public class UserBean implements Serializable {

    @NotNull(message = "Please enter a username")
    private String id;

    public String getId() {
        return id;
    }

    public void setId(String newValue) {
        id = newValue;
    }
    private String fileText;

    public String getFileText() {
        return fileText;
    }

    public void setFileText(String fileText) {
        this.fileText = fileText;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T23:10:43.610

查看生成的 HTML 源代码。在浏览器中右键单击页面并执行*View Source*。`Username`HTML 源代码中根本不存在具有 ID 的元素。相应地修复它。

```
<h:form id="form" ...>
    <h:inputText id="username" ... />
    ...
</h:form> 
```

和

```
var usernameElement = document.getElementById("form:username"); 
```

* * *

**与具体问题无关**，纯粹通过 JavaScript 执行验证的方向是错误的。这是不可靠的。只需使用`required="true"`.

```
<h:form>
    <h:inputText id="username" ... required="true">
        <f:ajax event="blur" render="usernameMessage" />
    </h:inputText>
    <h:message id="usernameMessage" for="username" />
    ...
</h:form> 
```

### 也可以看看：

*   [JSF2 验证客户端还是服务器端？](https://stackoverflow.com/questions/4013410/jsf2-validation-clientside-or-serverside)
*   [JSF 2.0 教程 - 微调验证](http://balusc.blogspot.com/2011/01/jsf-20-tutorial-with-eclipse-and.html#FinetuningValidation)

# vb6 - Shift-tab 问题

> ID：14024824
> 
> 赞同：1
> 
> 时间：2012-12-24T18:56:21.760
> 
> 标签：vb6, tab-ordering

我是 VB 新手，但现在正在做一个 VB 项目。我遇到了一个关于 Shift-Tab 的奇怪问题。

跳格顺序是正确的，它将通过所有文本框、复选框等到表单末尾的“接受”和“取消”按钮，然后循环回到表单的开头。

但是，如果您使用 Shift-Tab，它将跳过“接受”和“取消”按钮。不过，它适用于所有其他控件。

标签索引对我来说似乎是正确的。

有谁知道可能是什么原因？我无能为力，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T16:15:00.330

检查`Shift`+ `Tab`on类似这样`EnterFocus`的事件`UserControl`

```
Option Explicit

Private Declare Function GetAsyncKeyState Lib "user32" (ByVal VKey As Long) As Integer

Public Function IsKeyPressed(ByVal lVirtKey As KeyCodeConstants) As Boolean
    IsKeyPressed = ((GetAsyncKeyState(lVirtKey) And &H8000) = &H8000)
End Function

Private Sub UserControl_EnterFocus()
    If IsKeyPressed(vbKeyTab) And IsKeyPressed(vbKeyShift) Then
        cmdCancel.SetFocus
    End If
End Sub 
```

# scala - Scala Play 中如何管理状态！2.0 网络套接字？

> ID：14024825
> 
> 赞同：4
> 
> 时间：2012-12-24T18:56:46.840
> 
> 标签：scala, websocket, playframework-2.0, enumerator, iterate

我正在查看[https://github.com/playframework/Play20/tree/master/samples/scala/websocket-chat上的示例](https://github.com/playframework/Play20/tree/master/samples/scala/websocket-chat)

要制作 websocket 控制器，您可以编写如下内容：

```
def chat(username: String) = WebSocket.async[JsValue] { request  =>
    ChatRoom.join(username)
} 
```

Chatroom.join 返回一个**scala.concurrent.Future[(Iteratee[JsValue,_],Enumerator[JsValue])]**。但是 Play 中使用的迭代器和枚举器在哪里！框架？**WebSocket**类（WebSocket.scala）似乎忽略了输入：

```
case class WebSocket[A](f: RequestHeader => (Enumerator[A], Iteratee[A, Unit]) => Unit)        (implicit val frameFormatter: WebSocket.FrameFormatter[A]) extends Handler {

  type FRAMES_TYPE = A

  /**
   * Returns itself, for better support in the routes file.
   *
   * @return itself
   */
   def apply() = this
} 
```

怎么玩！在 iteratee 消耗输入时管理不断变化的状态？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T21:25:18.443

值得注意的是，它`WebSocket`本身只是一个愚蠢的容器。魔法发生在`play.core.server.netty`.

要了解这种魔法是什么，看一下 f 的签名（a`WebSocket`包含的函数：

```
RequestHeader => (Enumerator[A], Iteratee[A, Unit]) => Unit 
```

这是一个函数，它接受 a `RequestHeader`、 an`Enumerator`和 an `Iteratee`，并对它们做一些事情。

因此，在未来的某个时候，框架将为我们`WebSocket`提供一个`RequestHeader`（应该是自我解释的）、一个`Enumerator[A]`（枚举器是源，在这种情况下，这些是从客户端接收的消息）和一个`Iteratee[A, Unit]`（迭代器是sinks，在这种情况下，这是我们将消息发送回客户端的地方）。

在 的情况下，`WebSocket.adapter`WebSocket 将`Enumerator`通过. 在这种情况下，WebSocket 会将远程连接到本地，并将删除连接到本地。`Iteratee``Enumeratee``WebSocket.using``Enumerator``Iteratee``Iteratee``Enumerator`

与直接定义 WebSocket 相比，使用对象中的一种便捷方法可能更容易`WebSocket`。以下代码将回显收到的上一条消息：

```
 def mySocket = WebSocket.adapter {implicit req =>
    var lastMessage = "No previous message"
    Enumeratee.map[String] {msg =>
      val response = lastMessage
      lastMessage = msg
      response
    }
  } 
```

请注意，这段代码几乎肯定存在线程安全问题——在 Scala 中，您应该尽可能避免可变状态，或者如果没有，则使用 actor 或类似的。

或者，尝试`WebSocket.using`并查看 pushee`Enumerator`和 foreach `Iteratee`，尽管它有点小问题。或许可以理解，在 Play 2.1 中不推荐使用 pushee 枚举器，因为它正在被新的通道系统所取代。

# c# - 如何删除 WPF 中 ListView 中显示的特定文本？

> ID：14024836
> 
> 赞同：3
> 
> 时间：2012-12-24T18:58:35.990
> 
> 标签：c#, wpf, listview

我已阅读此主题： [如何删除 ListView 中显示的特定文本/消息？](https://stackoverflow.com/questions/10190813/how-to-delete-a-specific-text-message-showed-in-a-listview)

它在 winform 中工作正常（我已经测试过！）但在 WPF 中它不起作用。

我想在 listview1 中找到 firstnametxt 的文本并将其与 Firstname Column 项目进行比较，如果其为真则删除该项目（包含该项目的行）

但我不知道如何在 WPF 中处理这个问题。

我的部分代码是这样的：

XAML：

```
<ListView Name="listView1 HorizontalAlignment="Left" VerticalAlignment="Top" />
    <ListView.View>
        <GridView>
            <GridViewColumn Header="FirstName" DisplayMemberBinding="{Binding Path=FirstName}"  />
            <GridViewColumn Header="LastName" DisplayMemberBinding="{Binding Path=LastName}" />
        </GridView>
    </ListView.View>
</ListView>
<TextBox Name="firstnametxt" Height="27" HorizontalAlignment="Left" Margin="271,20,0,0"  VerticalAlignment="Top" Width="181" />
<Button Content="Add" Height="38" HorizontalAlignment="Left" Margin="310,242,0,0" Name="button1" VerticalAlignment="Top" Width="74" Click="button1_Click" />
<Button Content="Find" Height="38" HorizontalAlignment="Left" Name="button2" VerticalAlignment="Top" Width="74" Click="button2_Click" /> 
```

后面的代码（C#）：

```
public class Familiy
{
    public Familiy(string firstname, string lastname)
    {
        this.FirstName = firstname;
        this.LastName = lastname;
    }
    private string firstname;

    public string FirstName
    {
        get { return firstname; }
        set { firstname = value; }
    }
    private string lastname;
    public string LastName
    {
        get { return lastname; }
        set { lastname = value; }
    }
}

private void button1_Click(object sender, RoutedEventArgs e)
{ 
    ///////////////////////////
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T19:49:56.953

无论是 ItemList、List 还是其他集合类型，您都需要更改 ListBox 的 ItemSource。此示例使用家庭列表。

```
public partial class MainWindow : Window
{
    List<Familiy> familiys = new List<Familiy>();
    public MainWindow()
    {
        InitializeComponent();

        familiys.Add( new Familiy("FirstName1", "LastName1"));
        familiys.Add(new Familiy("FirstName2", "LastName2"));
        familiys.Add(new Familiy("FirstName3", "LastName3"));
        familiys.Add(new Familiy("FirstName4", "LastName4"));
        listView1.ItemsSource = familiys;

    }
    private void button1_Click(object sender, RoutedEventArgs e)
    {
        familiys.Remove(familiys.Find(delegate(Familiy f) { return f.FirstName == firstnametxt.Text; }));
        listView1.ItemsSource = "";
        listView1.ItemsSource = familiys;
    }
} 
```

# css - 图像上的 Webkit 过渡未在移动设备上显示

> ID：14024839
> 
> 赞同：1
> 
> 时间：2012-12-24T18:58:57.570
> 
> 标签：css

这种过渡在桌面上运行良好，但在移动设备上，“悬停”事件被解释为移动设备上的点击，只会使图像消失而不是替换新图像。所有其他转换都有效。

```
.mark.studio{
   background: url(../images/studio_icon.png) no-repeat;
   -webkit-transition: all .3s ease-in-out;
  -moz-transition: all .3s ease-in-out; 
   transition: all .3s ease-in-out; 
   height: 50px;
   width: 50px;
   z-index:103 !important;
}

.mark.studio:hover{
   -webkit-transition: all .3s ease-in-out;
  -moz-transition: all .3s ease-in-out; 
  -transition: all .3s ease-in-out; 
   background: url(../images/studio_icon-hover.png) no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T19:24:31.360

我没有 Android 手机，只有 iOS 设备，但我知道到目前为止，当涉及到图像时，transition 属性的支持非常分散。像 Firefox 和 Internet Explorer 一样，都支持过渡代码，但在用于缓入和缓出图像时不支持。我和另一个人一起回答了一个类似的问题，即背景图像不起作用的过渡属性，我们都得出结论，它在很多浏览器中都不起作用。哦，我刚找了，帖子是你发的！[Firefox 中图像悬停时的 css3 变换](https://stackoverflow.com/questions/14016087/css3-transform-on-image-hover-in-firefox)。那篇文章基本上回答了你的问题。:)

它可能无法修复它（但无论如何尝试它都很好），在悬停时重复转换属性是没有意义的......

# c++ - 异常行为

> ID：14024840
> 
> 赞同：-1
> 
> 时间：2012-12-24T18:58:57.670
> 
> 标签：c++, c

为什么这段代码不能编译

```
#include <stdio.h>
int x=5;
int a[x];
int main()
{
     a[0]=5;
     printf("%d\n",a[0]);
     return 0;
} 
```

使用 gcc filename.c -Wall -ansi -pedantic 编译时会产生错误

**错误：在文件范围内可变地修改了“a”**

然而，这段代码编译虽然给出警告但给出正确的输出：

```
#include <stdio.h>
int main()
{
     int x=5;
     int a[x];
     a[0]=5;
     printf("%d\n",a[0]);
     return 0;
} 
```

**警告：ISO C90 禁止可变长度数组 'a' [-Wvla]**

但是，如果我尝试使用 g++ filename.c -Wall -ansi -pedantic 编译它，它**不会产生警告**并给出正确的输出

```
#include <stdio.h>
const int x=5;
int a[x];
int main()
{
    a[0]=5;
    printf("%d\n",a[0]);
    return 0;
} 
```

我正在使用 gcc 版本 4.7.0

请详细解释发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T19:12:50.597

在 C 中，只有具有自动存储持续时间的数组对象可以是可变长度数组。在文件范围内声明的对象不能具有自动存储持续时间。

在您的第二个代码示例中，c89/c90 没有可变长度数组，您必须使用 c99 编译器才能使用该功能。如果您正在使用`gcc`，您可以选择 c99 选项`-std=c99`。或者您可以使用最新版本的 c:c11。

C++ 没有可变长度数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T19:13:39.567

在 C 中（与 C++ 不同），const 声明不产生常量表达式，即在 C 中，您不能在非 VLA 数组声明中使用 const int 对象作为数组大小。

所以，

```
const int max_foos = 10;
int foos[max_foos]; 
```

在 C++ 中有效，但在 C 中无效。等效的 C 代码将是：

```
#define MAX_FOOS 10
int foos[MAX_FOOS]; 
```

请注意：
***c 中的 const 并不意味着常量。它的意思是“只读”。***

请注意，可变长度数组仅在 C99 中成为 C 标准的一部分，在此之前标准不允许它们，尽管大多数编译器允许它们作为扩展。

* * *

第一个代码片段无法编译，因为数组下标需要是一个常量，而它不是。此外，不能在全局范围内声明可变长度数组。

第二个代码片段无法编译，因为可变长度数组不是 c99 之前标准的一部分。

第三个片段可以编译，因为 const 声明在 C++ 中生成常量表达式，这与 C 不同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T19:06:30.887

可变长度数组仅从 C99 开始受支持，并且它们不能是全局的：

**C11，数组声明器，6.7.6.2：**

> 如果一个标识符被声明为具有可变修改类型，它应该是一个普通标识符（如 6.2.3 中定义的），没有链接，并且具有块范围或函数原型范围。如果标识符被声明为具有静态或线程存储持续时间的对象，则它不应具有可变长度数组类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T19:04:01.310

是的，并且？

不同代的 C 和 C++ 对可以使用什么来调整数组大小有不同的规则。在第一种情况下，您正在编译为经典 ANSI (C89/90)。

C++ 允许（常量）用作数组大小，C99 也是如此。请注意，“原始”C++ ANSI 标准比 1990 年更新，因此它在 C99 标准中添加了很多内容。

# sitecore - 确定 Sitecore 项目的展示设置是否已被覆盖

> ID：14024849
> 
> 赞同：2
> 
> 时间：2012-12-24T18:59:53.197
> 
> 标签：sitecore, sitecore6

这是确定项目的表示设置是否已被覆盖的一种方法：

```
var contextItemPresentationSettings = Sitecore.Context.Item["__Renderings"];

var standardValuesPresentationSettings = Sitecore.Context.Item.Template.StandardValues["__Renderings"];

var presentationSettingsMatch = contextItemPresentationSettings == standardValuesPresentationSettings; 
```

是否有更好的方法来确定项目的演示设置是否已被覆盖？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T19:20:52.103

用这个：

```
Sitecore.Context.Item.Fields[Sitecore.FieldIDs.LayoutField].ContainsStandardValue 
```

仅供参考，`Sitecore.FieldIDs.LayoutField`是一个保存`__Renderings`字段 ID 值的常量，最好在检索 Sitecore 系统字段时使用它们。

# lwjgl - 我的“游戏”帧率非常糟糕，所以我需要一些帮助

> ID：14024850
> 
> 赞同：0
> 
> 时间：2012-12-24T19:00:55.943
> 
> 标签：lwjgl

我的游戏在帧率上非常滞后。我不确定它到底是什么，但我的相机愚蠢地跳来跳去。我想知道是否有人可以帮助我。它们只渲染屏幕上的内容，而不渲染您看不到的侧面。

此代码适用于我的第一堂课 GE，这是我的主课

```
import static org.lwjgl.opengl.GL11.*;

import java.text.Format.Field;
import java.util.logging.Level;
import java.util.logging.Logger;

import org.lwjgl.LWJGLException;
import org.lwjgl.input.Keyboard;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;
import org.newdawn.slick.opengl.Texture;

public class GE {

public static void main(String[] args) {
    initDisplay();
    gameLoop();
    cleanUp();

}

public static void gameLoop() {

    Texture front = Block.loadTexture(Block.getFront());
    Texture back = Block.loadTexture(Block.getBack());
    Texture Tright = Block.loadTexture(Block.getTright());
    Texture Tleft = Block.loadTexture(Block.getTleft());
    Texture top = Block.loadTexture(Block.getTop());
    Texture bottom = Block.loadTexture(Block.getBottom());

    Camera cam = new Camera(70, (float) Display.getWidth()
            / (float) Display.getHeight(), 0.3f, 1000);

    while (!Display.isCloseRequested()) {

        boolean forward = Keyboard.isKeyDown(Keyboard.KEY_W)
                || Keyboard.isKeyDown(Keyboard.KEY_UP);
        boolean backward = Keyboard.isKeyDown(Keyboard.KEY_S)
                || Keyboard.isKeyDown(Keyboard.KEY_DOWN);
        boolean left = Keyboard.isKeyDown(Keyboard.KEY_A);
        boolean right = Keyboard.isKeyDown(Keyboard.KEY_D);
        boolean crouch = Keyboard.isKeyDown(Keyboard.KEY_LSHIFT);
        boolean jump = Keyboard.isKeyDown(Keyboard.KEY_SPACE);

        if (forward)
            cam.moveZ(2f);
        if (backward)
            cam.moveZ(-2f);
        if (left)
            cam.moveX(0.2f);// cam.rotateY(-0.1f);
        if (right)
            cam.moveX(-0.2f);// cam.rotateY(0.1f);
        if (crouch)
            cam.moveY(0.2f);
        if (jump)
            cam.moveY2(-0.2f);

        if (Keyboard.isKeyDown(Keyboard.KEY_LEFT))
            cam.rotateY(-2f);
        if (Keyboard.isKeyDown(Keyboard.KEY_RIGHT))
            cam.rotateY(2f);

        if (Keyboard.isKeyDown(Keyboard.KEY_Q))
            cam.rotateX(-0.2f);
        if (Keyboard.isKeyDown(Keyboard.KEY_Z))
            cam.rotateX(0.2f);

        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
        glLoadIdentity();
        cam.useView();

        for(int x = 0; x < 100; x++){
             for(int z = 0; z <100 ;z++){

            glPushMatrix();
            {
                glTexParameteri(GL_TEXTURE_2D,           GL_TEXTURE_MAG_FILTER,
                        GL_NEAREST);
                glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,
                        GL_NEAREST);

                front.bind();

                glBegin(GL_QUADS);
                {
                    // FrontFace
                    glTexCoord2f(1, 1);
                    glVertex3f(x-1, -2, z);
                    glTexCoord2f(0, 1);
                    glVertex3f(x, -2, z);
                    glTexCoord2f(0, 0);
                    glVertex3f(x, -1, z);
                    glTexCoord2f(1, 0);
                    glVertex3f(x-1, -1, z);

                }
                glEnd();

                glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER,
                        GL_NEAREST);
                glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,
                        GL_NEAREST);
                back.bind();

                glBegin(GL_QUADS);
                {
                    // BackFace

                    glTexCoord2f(1, 1);
                    glVertex3f(x, -2, z-1);
                    glTexCoord2f(0, 1);
                    glVertex3f(x-1, -2, z-1);
                    glTexCoord2f(0, 0);
                    glVertex3f(x-1, -1, z-1);
                    glTexCoord2f(1, 0);
                    glVertex3f(x, -1, z-1);

                }
                glEnd();

                glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER,
                        GL_NEAREST);
                glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,
                        GL_NEAREST);

                top.bind();

                glBegin(GL_QUADS);
                {
                    // Top Face

                    glTexCoord2f(0, 0);
                    glVertex3f(x-1, -1, z-1);
                    glTexCoord2f(0, 1);
                    glVertex3f(x, -1, z-1);
                    glTexCoord2f(1, 1);
                    glVertex3f(x, -1, z);
                    glTexCoord2f(1, 0);
                    glVertex3f(x-1, -1, z);

                }
                glEnd();

                glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER,
                        GL_NEAREST);
                glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,
                        GL_NEAREST);

                Tright.bind();

                glBegin(GL_QUADS);
                {
                    // RightFace

                    glTexCoord2f(0, 0);
                    glVertex3f(x, -1, z-1);
                    glTexCoord2f(0, 1);
                    glVertex3f(x, -2, z-1);
                    glTexCoord2f(1, 1);
                    glVertex3f(x, -2, z);
                    glTexCoord2f(1, 0);
                    glVertex3f(x, -1, z);

                }
                glEnd();

                glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER,
                        GL_NEAREST);
                glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,
                        GL_NEAREST);

                Tleft.bind();

                glBegin(GL_QUADS);
                {
                    // LeftFace

                    glTexCoord2f(0, 0);
                    glVertex3f(x-1, -1, z);
                    glTexCoord2f(0, 1);
                    glVertex3f(x-1, -2, z);
                    glTexCoord2f(1, 1);
                    glVertex3f(x-1, -2, z-1);
                    glTexCoord2f(1, 0);
                    glVertex3f(x-1, -1, z-1);

                }
                glEnd();

                glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER,
                        GL_NEAREST);
                glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,
                        GL_NEAREST);

                bottom.bind();

                glBegin(GL_QUADS);
                {
                    // BottomFace

                    glTexCoord2f(0, 0);
                    glVertex3f(x-1, -2, z-1);
                    glTexCoord2f(0, 1);
                    glVertex3f(x, -2, z-1);
                    glTexCoord2f(1, 1);
                    glVertex3f(x, -2, z);
                    glTexCoord2f(1, 0);
                    glVertex3f(x-1, -2, z);

                }
                glEnd();

            }

            glPopMatrix();

     }
        }

        Display.update();

    }

    }

public static void cleanUp() {
    Display.destroy();
}

public static void initDisplay() {
    try {
        Display.setDisplayMode(new DisplayMode(800, 600));
        Display.setInitialBackground(135, 206, 260 );
        Display.setTitle("#NervousBreakdown - Alpha 0.01");
        Display.setResizable(true);
        Display.create();
    } catch (LWJGLException ex) {
        Logger.getLogger(GE.class.getName()).log(Level.SEVERE, null, ex);
    }
}

} 
```

这是我的二等相机

```
import org.lwjgl.LWJGLException;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;

import static org.lwjgl.opengl.GL11.*;
import static org.lwjgl.util.glu.GLU.*;

 public class Camera {
private float x;
private float y;
private float z;
private float rx;
private float ry;
private float rz;

private float fov;
private float aspect;
private float near;
private float far;

public Camera(float fov, float aspect, float near, float far) {
    x = 0;
    y = 0;
    z = 0;
    rx = 0;
    ry = 0;
    rz = 0;

    this.fov = fov;
    this.aspect = aspect;
    this.near = near;
    this.far = far;
    initProjection();
}

private void initProjection() {
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(fov, aspect, near, far);
    glMatrixMode(GL_MODELVIEW);
    glEnable(GL_DEPTH_TEST);
    glEnable(GL_TEXTURE_2D);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);

}

public void useView() {
    glRotatef(rx, 1, 0, 0);
    glRotatef(ry, 0, 1, 0);
    glRotatef(rz, 0, 0, 1);
    glTranslatef(x, y, z);
}

public float getX() {
    return x;
}

public float getY() {
    return y;
}

public float getZ() {
    return z;
}

public void setX(float x) {
    this.x = x;
}

public void setY(float y) {
    this.y = y;
}

public void setZ(float z) {
    this.z = z;
}

public float getRX() {
    return rx;
}

public float getRY() {
    return ry;
}

public float getRZ() {
    return rz;
}

public void setRX(float rx) {
    this.rx = rx;
}

public void setRY(float ry) {
    this.ry = ry;
}

public void setRZ(float rz) {
    this.rz = rz;
}

public void moveZ(float amt) {
    z += amt * Math.sin(Math.toRadians(ry + 90));// *
                                                    // Math.sin(Math.toRadians(rx
                                                    // + 90));
    x += amt * Math.cos(Math.toRadians(ry + 90));
    // y += amt * Math.sin(Math.toRadians(rx));
}

public void moveX(float amt) {
    z += amt * Math.sin(Math.toRadians(ry));
    x += amt * Math.cos(Math.toRadians(ry));
}

public void moveY(float amt){
    y= (float) (y + 0.002);
}

public void moveY2(float amt){
    y= (float) (y - 0.002);
}

public void rotateY(float amt) {
    ry += amt;
}

public void rotateX(float amt) {
    rx += amt;
}

public void rotateZ(float amt) {
    rz += amt;
} 
```

最后是我的最后一个类块，它设置了主块中每个侧面的纹理：

```
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;

import org.newdawn.slick.opengl.Texture;
import org.newdawn.slick.opengl.TextureLoader;

public class Block {

static String block = "Grass";
static String Front;
static String Back;
static String Top;
static String Tright;
static String Tleft;
static String Bottom;

public static Texture loadTexture(String key) {
    try {
        return TextureLoader.getTexture("png", new FileInputStream(
                new File("res/textures/" + key + ".png")));
    } catch (IOException ex) {
        Logger.getLogger(GE.class.getName()).log(Level.SEVERE, null, ex);
    }

    return null;
}

public static String getFront(){
    if(block == "Grass"){
        Front = "SideGrass";
    }
    if(block == "Wood"){
        Front = "Wood";
    }

    return Front;       

}

public static String getBack(){
    if(block == "Grass"){
        Back = "SideGrass";
    }
    if(block == "Wood"){
        Back = "Wood";
    }
    return Back;        
}

public static String getBottom(){
    if(block == "Grass"){
        Bottom = "Dirt";
    }
    if(block == "Wood"){
        Bottom = "TopWood";
    }
    return Bottom;      
}

public static String getTleft(){
    if(block == "Grass"){
        Tleft = "SideGrass";
    }
    if(block == "Wood"){
        Tleft = "Wood";
    }
    return Tleft;       
}

public static String getTright(){
    if(block == "Grass"){
        Tright = "SideGrass";
    }
    if(block == "Wood"){
        Tright = "Wood";
    }
    return Tright;      
}

public static String getTop(){
    if(block == "Grass"){
        Top = "Grass";
    }
    if(block == "Wood"){
        Top = "TopWood";
    }
    return Top;     
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:46:25.847

首先，您使用的是立即模式。改用显示列表或 VBO...

[http://www.youtube.com/watch?v=-89BM2y3WIA&list=SP19F2453814E0E315&index=27](http://www.youtube.com/watch?v=-89BM2y3WIA&list=SP19F2453814E0E315&index=27) （这家伙有一系列的 LWJGL 教程顺便说一句）

您还为块的每一侧使用单独的纹理。Minecraft 渲染速度如此之快并使用如此少内存的部分原因是因为每个块都共享相同的纹理。每个块类型应该具有不同的纹理坐标，而不是具有不同的纹理。

尽管它是一种更高级的优化，但您可能还需要考虑剔除。简单的平截头体剔除（即不要画出你无论如何都看不到的东西）应该会带来显着的改进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-02T16:04:57.013

尝试在渲染方法时尽可能多地删除，例如将纹理加载到类方法中，例如：

```
public GE() {
//load textures and stuff you don't need to continuously loop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-08T11:31:37.833

你应该搬家：

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST); 
```

加载纹理的位置，（每个纹理仅调用一次）。

另一件事可能会有所帮助，不要以这种方式比较字符串，`.equals()`而是使用：

```
if(block == "Wood"){
    Front = "Wood";
} 
```

变成

```
if(block.equals("Wood")){
    Front = "Wood";
} 
```

事实上，当性能很重要时，你根本不应该使用字符串。您可以尝试使用枚举类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-07T23:11:02.400

我看到你正在使用即时模式。这种编码方式被弃用是有充分理由的。可以使用它，因为我认为不会很快支持它，但现在开始学习它是一个坏主意。拿一张 OpengGl 参考卡，看看哪些是弃用的，哪些不是。此外，我鼓励您将上下文设置为前向兼容性 (org.lwjgl.opengl.ContextAttribs)，并使用正确的教程。请记住，使用 OpenGl 的唯一原因是性能，所以不要浪费时间来学习太慢的界面。使用 glBegin/glEnd 绘制单个 qual 与绘制完整网格一样昂贵。

这是一个：[http ://www.arcsynthesis.org/gltut/](http://www.arcsynthesis.org/gltut/)

# ruby - 创造性的 Ruby 方式将字符串评估为类常量之一

> ID：14024851
> 
> 赞同：1
> 
> 时间：2012-12-24T19:00:57.767
> 
> 标签：ruby, logging, constants

您可能知道 Logger:Application 具有常量（Logger::DEBUG、Logger::WARN 等...）

我的日志级别是我的配置中的一个字符串。将该字符串传递给我的记录器会出错。我将不得不重写 level 方法来接受一个字符串。

```
log = Logger.new($CONFIG.log.file, $CONFIG.log.freq)
log.level = $CONFIG.log.level ## << Error
#log.level = Logger::WARN ## < manually settings it as example in doc. 
```

您将如何动态设置日志记录级别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T19:08:16.873

使用[`const_get`](http://ruby-doc.org/core-1.9.3/Module.html#method-i-const_get)：

```
log_level = 'WARN'
log.level = Logger.const_get(log_level)  #=> 2  (which is the value of Logger::WARN) 
```

不过要小心你的输入，因为`Logger::Error`&`Logger::ERROR`不是一回事。

# android - “onOptionsItemSelected”如何用于片段？

> ID：14024854
> 
> 赞同：0
> 
> 时间：2012-12-24T19:01:21.243
> 
> 标签：android

菜单项在我的应用程序中消失。

最初我创建的菜单项如下。但在某些 android 版本中菜单消失了。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    TabHelper tabHelper = getTabHelper();
    CompatTab menuTab = tabHelper.newTab("menu").setText(
        R.string.tab_section1).setIcon(R.drawable.home_icon).setTabListener(
        new InstantiatingTabListener(this, MenuFragment.class));
    tabHelper.addTab(menuTab);
    CompatTab favTab = tabHelper.newTab("favourites").setText(
        R.string.tab_section2).setIcon(R.drawable.favourites_icon).setTabListener(
        new InstantiatingTabListener(this, FavouritesFragment.class));
    tabHelper.addTab(favTab);
} 
```

上面的代码在最新的 Android 4.1.3 中运行良好，但在 4.0.1 和 4.0.3 中无法显示似乎是一些布局问题。

为了解决我添加了菜单 xml 如下

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/menuhome"
    android:icon="@drawable/map_icon"
    android:title="@string/tab_section1"
    android:orderInCategory="1"
    android:showAsAction="always|withText" />
 <item android:id="@+id/menumap"
    android:icon="@drawable/map_icon"
    android:title="@string/tab_section2"
    android:orderInCategory="2"
    android:showAsAction="always|withText" /> 
```

并添加 onOptionItemSelected 如下

```
 @Override
   public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.menuhome:
            finish();
            return true;
        case R.id.menumap:

             //ERROR
             //HOW CAN I CALL FRAGMENT HERE.?

            break;
        default:
            break;
    }
    return super.onOptionsItemSelected(item);
} 
```

# python - HTTP 303 (SeeOther)：GET 工作，POST 失败

> ID：14024855
> 
> 赞同：2
> 
> 时间：2012-12-24T19:01:24.910
> 
> 标签：python, http, http-headers, web.py

我正在尝试执行一个简单的操作：

1.  发布到 URL
2.  返回 HTTP 303（参见其他）
3.  从新 URL 获取

据我所知，这是一个非常标准的做法： [http ://en.wikipedia.org/wiki/Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)

此外，似乎 SeeOther 旨在以这种方式工作： [http ://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.4](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.4)

我使用 web.py 作为我的服务器端控制器，但我怀疑这不是问题。如果我 GET，SeeOther 会按预期完美运行。如果我 POST 到同一个 URL，浏览器根本无法重定向或加载任何内容。

认为这是浏览器问题，我尝试了 IE9 和 Google Chrome（v23 ish）。两者都有相同的问题。

考虑到 web.py 可能不正确地为页面提供服务，或者生成了错误的 URL，我使用 telnet 来检查标题。我找到了这个：

HTTP GET（这在浏览器中有效）：

```
GET /Users/1 HTTP/1.1
HOST: domain.com

HTTP/1.1 303 See Other
Date: Mon, 24 Dec 2012 18:07:55 GMT
Server: Apache/2
Cache-control: no-cache
Location: http://domain.com/Users
Content-Length: 0
Content-Type: text/html 
```

HTTP POST（这在浏览器中不起作用）：

```
POST /Users/1 HTTP/1.1
HOST: domain.com

HTTP/1.1 303 See Other
Date: Mon, 24 Dec 2012 18:12:35 GMT
Server: Apache/2
Cache-control: no-cache
Location: http://domain.com/Users
Content-Length: 0
Content-Type: text/html 
```

另一件事可能会引起麻烦：我正在使用 mod-rewrite 以便用户可见的 domain.com/Users/1 实际上是 domain.com/control.py/Users/1

我可能有更多信息/疑难解答，但我现在正在画一个空白。

**问题：**

为什么这适用于 GET 请求，而不适用于 POST 请求？我在某处缺少响应标头吗？

**编辑：**

使用 IE9 开发人员工具和 Chrome 的 Inspector，看起来 303 在 POST 后没有返回浏览器。但是，当我执行 GET 请求时，我可以看到 303 进入。

然而，在仔细查看 Chrome 的 Inspector 之后，我看到了记录每个请求的能力（不要清除每个页面调用）。这让我看到由于某种原因，我的 POST 请求看起来失败了。再次 - GET 工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T06:52:52.917

这完全有可能不是您的问题，但由于您没有发布您的代码，我会试一试（以防万一）。

由于您使用的是 web.py，您是否在对象上定义了 POST 方法？

IE

```
urls = (
    '/page', 'page'
)

class page:

    def POST(self):
        # Do something

    def GET(self):
        # Do something else 
```

# haskell - 使用 Data.Map 计算不同的值会泄漏内存

> ID：14024857
> 
> 赞同：3
> 
> 时间：2012-12-24T19:01:37.737
> 
> 标签：haskell, memory-leaks, map, io

以下程序在计算 250 MB 文件中的不同行长度时使用 100+ MB RAM。如何修复它以使用更少的 RAM？我想我滥用了惰性 IO`foldr`和`Data.Map`值的惰性。

```
import Control.Applicative
import qualified Data.Map as M
import Data.List

main = do
  content <- readFile "output.csv"
  print $ (foldr count M.empty . map length . lines) content

count a b = M.insertWith (+) a 1 b 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T19:52:54.277

第一个大错误

```
main = do
  content <- readFile "output.csv"
  print $ (foldr count M.empty . map length . lines) content

count a b = M.insertWith (+) a 1 b 
```

正在使用`foldr`. 这构造了形式的表达式

```
length firstLine `count` length secondLine `count` ... `count` length lastLine `count` M.empty 
```

遍历构造 thunk 的整个行列表 - 当时甚至`length`由于懒惰而没有评估调用 - 然后从右到左评估它。因此，除了用于构建`Map`.

如果您从事物列表构建地图，请**始终**使用严格的左折叠（好吧，如果列表很短，并且事物不大，那没关系）除非语义需要右折叠（如果您'使用非交换函数重新组合值，可能是这种情况，但即便如此，通常最好`reverse`在构建地图之前使用左折叠和列表）。

`Data.Map`s (或`Data.IntMap`s) 是严格脊椎的，仅此一项就不可能在遍历整个列表之前生成部分输出，因此`foldr`这里不能使用 的优势。

`Map`下一个（可能的）问题是（再次懒惰）当将映射到的值放在

```
((...((1+1)+1)...+1)+1) 
```

做了

```
main = do
  content <- readFile "output.csv"
  print $ (foldl' count M.empty . map length . lines) content

count mp a = M.insertWith' (+) a 1 mp 
```

这样这些行就可以在读入后立即被垃圾收集，并且不会在值中建立任何thunk。这样你就不需要一次在内存中超过一行文件，甚至不需要完全在内存中，因为`length`在它被记录到`Map`.

如果您的`containers`包裹足够新，您还可以

```
import Data.Map.Strict 
```

并离开`count`使用`insertWith`（没有素数，`Data.Map.Strict`模块总是评估放入地图的值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T19:25:25.433

降低最大驻留率的一种方法是使用`IntMap`而不是，它是键数据结构`Map`的专用版本。这是一个简单的改变：`Map``Int`

```
import Control.Applicative
import qualified Data.IntMap as I
import Data.List

main = do
  content <- readFile "output.csv"
  print $ (foldr count I.empty . map length . lines) content

count a b = I.insertWith (+) a 1 b 
```

将此版本与您的版本进行比较，使用`/usr/share/dict/words`锯最大驻留从大约 100MB 到 60MB。请注意，这也没有任何优化标志。如果你启动这些，最大居住很可能会看到进一步的改善。

# iphone - 来自没有 http:// 的字符串的 UIWebView URL

> ID：14024862
> 
> 赞同：1
> 
> 时间：2012-12-24T19:02:47.753
> 
> 标签：iphone, objective-c, ios, sdk

因此，我使用下面的代码检查字符串是否以**“http://”**开头，然后我想添加**“http://”**以便能够在`UIWebView`.

```
NSString *firstString = [NSString stringWithFormat:@"%@", URL.text];
NSString *check = [NSString stringWithFormat:@"%@", @"http://"];

if (firstString != check) {
    NSString *newString = [NSString stringWithFormat:@"http://%@", URL.text];
    newString = [newString substringWithRange:NSMakeRange(7, newString.length - 7)];
    URL.text = newString;
}

[WebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:URL.text]]];` 
```

由于某种原因，这不起作用。你知道为什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T19:16:34.977

有人在我写作时发帖，但无论哪种方式，这里都有一个答案：

你让这太难了。您只需要使用 hasPrefix 来检查“http”。例如，我将它用于我的统一搜索/url 栏。

```
- (IBAction)go:(id)sender {
    NSString *inputString = [searchField stringValue];
    NSString *outputString = [inputString stringByReplacingOccurrencesOfString:@" " withString:@"+"];

    if ([inputString hasPrefix:@"http://"]) {
        //Has Prefix
        [[webView mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:inputString]]];
    }
    else
    {
        //Does not have prefix. Do what you want here. I google it.
        NSString *googleString = @"http://google.com/search?q=";
        NSString *searchString = [NSString stringWithFormat:@"%@%@", googleString, outputString];
        [[webView mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:searchString]]];

    }

} 
```

那是用于谷歌搜索，您可以继续使用`NSString *newString = [NSString stringWithFormat:@"http://%@", URL.text];`

如果您愿意，您也可以添加更多检查。祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T19:11:31.450

`firstString != check`检查两个对象是否指向内存中的相同位置。`[firstString isEqualToString:check]`检查两个字符串是否相等。但是，您最可能想要做的是`if(![firstString hasPrefix:check])`. 这将检查以确保 firstString 不以 check 开头，然后您可以将 check 附加到它的开头。或者，你可以这样做`firstString = [firstString stringByReplacingOccurrencesOfString:@"http://" withString:@""];`，然后你知道它永远不会以 @"http://" 开头

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T19:08:35.163

尝试通过在 loadRequest 行之前打印 URL.text 的内容`NSLog(@"%@",URL.text);` ，首选检查条件是`if (![firstString isEqualToString:check]) {}`

# flyway - 我可以在没有描述的情况下在飞行中使用迁移 sql 脚本名称吗？

> ID：14024870
> 
> 赞同：2
> 
> 时间：2012-12-24T19:04:01.543
> 
> 标签：flyway

我使用 maven 进行带有 flyway 的数据库迁移。我想使用 sql 脚本的名称，例如：“ **test_1.1.sql** ”。但是flyway抛出异常：“ *com.googlecode.flyway.core.api.FlywayException: Wrong migration name format* ”。如果我使用名称：“ **test_1.1__some_description.sql** ”，一切正常。但这种格式对我来说是不可接受的。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T12:41:30.327

目前这是不可能的。它曾经是 2.0 之前的版本中的一个选项。删除它可以检测到以前无法可靠识别的一堆可能的错误。

在除了最琐碎的项目之外，有一个描述很有意义。

如果您觉得我们因为没有描述而忽略了一个有效的现实世界用例，请在问题跟踪器中提交增强请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-09T05:57:14.367

有一些属性用于修改 flyway 迁移脚本命名约定。

**属性名称：** `sqlMigrationPrefix`和`sqlMigrationPrefix`

在您的情况`test`下，迁移脚本的前缀是，后缀是`.sql`.

因此，您的属性应设置为：

`flyway.sqlMigrationPrefix = test flyway.sqlMigrationPrefix = .sql`

最后，您的命名约定应该是**“test1_1_​​_Some_Description”**，其中 `__`用于分隔“ `Migration Script Description`”。

# matlab - 数字的二进制表示

> ID：14024872
> 
> 赞同：0
> 
> 时间：2012-12-24T19:04:29.610
> 
> 标签：matlab, neural-network

我想将 8*12 矩阵中的任何数字表示为样本 **4**相等

00000000
00000000
00000000
00001000
00011000
00101000
01111110
00001000
00001000
00000000

你有什么建议我可以如何或在哪里获得所有数字而无需花时间制作它们。

**感谢任何**
帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T19:49:04.803

最后我是手动做的，把这个留到将来，也许有人需要:(

```
p=cell(1,10);    
p{10}=[
0 0 0 0 0 0 0 0;
0 1 1 1 1 1 1 0;
0 1 0 0 0 0 1 0;
0 1 0 0 0 0 1 0;
0 1 0 0 0 0 1 0;
0 1 0 0 0 0 1 0;
0 1 0 0 0 0 1 0;
0 1 0 0 0 0 1 0;
0 1 0 0 0 0 1 0;
0 1 0 0 0 0 1 0;
0 1 1 1 1 1 1 0;
0 0 0 0 0 0 0 0;
];
p{1}=[
0 0 0 0 0 0 0 0;
0 0 0 0 1 0 0 0;
0 0 0 1 1 0 0 0;
0 0 1 0 1 0 0 0;
0 0 0 0 1 0 0 0;
0 0 0 0 1 0 0 0;
0 0 0 0 1 0 0 0;
0 0 0 0 1 0 0 0;
0 0 0 0 1 0 0 0;
0 0 0 0 1 0 0 0;
0 0 0 1 1 1 0 0;
0 0 0 0 0 0 0 0;
];
p{2}=[
0 0 0 0 0 0 0 0;
0 1 1 1 1 1 1 0;
0 0 0 0 0 0 1 0;
0 0 0 0 0 0 1 0;
0 0 0 0 0 0 1 0;
0 0 0 0 0 0 1 0;
0 1 1 1 1 1 1 0;
0 1 0 0 0 0 0 0;
0 1 0 0 0 0 0 0;
0 1 0 0 0 0 0 0;
0 1 1 1 1 1 1 0;
0 0 0 0 0 0 0 0;
];
p{3}=[
0 0 0 0 0 0 0 0;
0 1 1 1 1 1 1 0;
0 0 0 0 0 0 1 0;
0 0 0 0 0 0 1 0;
0 0 0 0 0 0 1 0;
0 0 0 0 0 0 1 0;
0 1 1 1 1 1 1 0;
0 0 0 0 0 0 1 0;
0 0 0 0 0 0 1 0;
0 0 0 0 0 0 1 0;
0 1 1 1 1 1 1 0;
0 0 0 0 0 0 0 0;
];
p{4}=[
0 0 0 0 0 0 0 0;
0 0 0 0 0 1 0 0;
0 0 0 0 1 1 0 0;
0 0 0 1 0 1 0 0;
0 0 1 0 0 1 0 0;
0 1 0 0 0 1 0 0;
1 0 0 0 0 1 0 0;
1 0 0 0 0 1 0 0;
1 1 1 1 1 1 1 1;
0 0 0 0 0 1 0 0;
0 0 0 0 0 1 0 0;
0 0 0 0 0 0 0 0;
];
p{5}=[
0 0 0 0 0 0 0 0;
0 1 1 1 1 1 1 0;
0 1 0 0 0 0 0 0;
0 1 0 0 0 0 0 0;
0 1 0 0 0 0 0 0;
0 1 0 0 0 0 0 0;
0 1 1 1 1 1 1 0;
0 0 0 0 0 0 1 0;
0 0 0 0 0 0 1 0;
0 0 0 0 0 0 1 0;
0 1 1 1 1 1 1 0;
0 0 0 0 0 0 0 0;
];
p{6}=[
0 0 0 0 0 0 0 0;
0 1 1 1 1 1 1 0;
0 1 0 0 0 0 0 0;
0 1 0 0 0 0 0 0;
0 1 0 0 0 0 0 0;
0 1 0 0 0 0 0 0;
0 1 1 1 1 1 1 0;
0 1 0 0 0 0 1 0;
0 1 0 0 0 0 1 0;
0 1 0 0 0 0 1 0;
0 1 1 1 1 1 1 0;
0 0 0 0 0 0 0 0;
];
p{7}=[
0 0 0 0 0 0 0 0;
0 1 1 1 1 1 1 0;
0 1 0 0 0 0 1 0;
0 0 0 0 0 0 1 0;
0 0 0 0 0 0 1 0;
0 0 0 0 0 0 1 0;
0 0 0 0 0 1 0 0;
0 0 0 0 1 0 0 0;
0 0 0 1 0 0 0 0;
0 0 1 0 0 0 0 0;
0 1 0 0 0 0 0 0;
0 0 0 0 0 0 0 0;
];
p{8}=[
0 0 0 0 0 0 0 0;
0 1 1 1 1 1 1 0;
0 1 0 0 0 0 1 0;
0 1 0 0 0 0 1 0;
0 1 0 0 0 0 1 0;
0 1 0 0 0 0 1 0;
0 1 1 1 1 1 1 0;
0 1 0 0 0 0 1 0;
0 1 0 0 0 0 1 0;
0 1 0 0 0 0 1 0;
0 1 1 1 1 1 1 0;
0 0 0 0 0 0 0 0;
];
p{9}=[
0 0 0 0 0 0 0 0;
0 1 1 1 1 1 1 0;
0 1 0 0 0 0 1 0;
0 1 0 0 0 0 1 0;
0 1 0 0 0 0 1 0;
0 1 0 0 0 0 1 0;
0 1 1 1 1 1 1 0;
0 0 0 0 0 0 1 0;
0 0 0 0 0 0 1 0;
0 0 0 0 0 0 1 0;
0 1 1 1 1 1 1 0;
0 0 0 0 0 0 0 0;
]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T19:51:13.383

请注意，字体设计始于这些问题，字母的数字化近似值。找到具有如此粗略表示的可读数字将是困难的。

即使您可以通过计算机解决方案找到解决方案，也肯定需要手动调整以获得更好的外观。只需几位数，只需完全手动完成即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T20:19:56.613

[您可以使用来自https://forum.crystalfontz.com/showthread.php?3619-Bitmap-font-editor-for-graphic-LCD](https://forum.crystalfontz.com/showthread.php?3619-Bitmap-font-editor-for-graphic-LCD)的位图字体编辑器，例如“CV_fonted.exe”

然后保存为 ANSI C 格式。在对文件进行一些处理后，您可以获得结果。

# java - Android 上的 J7zip - 从存档中提取并列出内容

> ID：14024874
> 
> 赞同：4
> 
> 时间：2012-12-24T19:04:36.023
> 
> 标签：java, android, 7zip

我之前的问题因为没有建设性而被关闭。我在那里对其进行了编辑，但没有看到它已关闭）：

我正在编写一个涉及提取 7z 档案的应用程序。似乎没有任何本机支持，所以我冒险寻找可以集成到我的项目中的第三方库或源代码。

我一直在尝试实现[J7zip](https://sourceforge.net/projects/p7zip/files/J7Zip/)，但没有成功。

列出存档的内容不返回任何文件：

```
12-24 13:36:44.216: I/System.out(18473): J7zip 4.43 ALPHA 2 (2 CPUs)
12-24 13:36:44.232: I/System.out(18473):   Date   Time   Attr         Size   Compressed  Name
12-24 13:36:44.232: I/System.out(18473): -------------- ----- ------------ ------------  ------------
12-24 13:36:44.240: I/System.out(18473): -------------- ----- ------------ ------------  ------------ 
```

但是，在 Windows 上列出内容（使用 7z.exe）会返回以下内容

```
7-Zip 9.22 beta  Copyright (c) 1999-2011 Igor Pavlov  2011-04-18

Listing archive: archive.7z

--
Path = archive.7z
Type = 7z
Method = LZMA
Solid = -
Blocks = 1
Physical Size = 183119
Headers Size = 122

   Date      Time    Attr         Size   Compressed  Name
------------------- ----- ------------ ------------  ------------------------
                    .....       524288       182997  contents.txt
------------------- ----- ------------ ------------  ------------------------
                                524288       182997  1 files, 0 folders 
```

提取失败，我[这里](http://pastebin.com/iLGdWtih)有 logcat，因为它有点长。

这里似乎存在 io 问题，但我怀疑还有其他问题，因为列出此存档不会返回任何文件。

有没有人有使用 J7zip 提取和列出存档内容的经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T20:10:33.043

这里有一些可能的解决方案。

我首先尝试交叉编译 7zip jbinding 项目。我将 armeabi c 和 c++ 编译器安装到我的机器上并尝试构建项目。不幸的是，我无法构建可用于 Android 项目的二进制文件。我在论坛帖子中提到了尝试将已编译的 jbinding 二进制文件加载回导致问题的库。

我的下一个领导是实现 p7z 的 Java 端口，J7zip ( [http://sourceforge.net/projects/p7zip/files/J7Zip/](http://sourceforge.net/projects/p7zip/files/J7Zip/) )。实现这一点并不算太糟糕，除了我必须修改 j7z 库尝试写入 SD 卡根目录的代码（没有根访问权限）。此端口在大多数情况下运行良好，但在提取较大的档案或包含许多类似文件的档案时会导致内存不足错误。问题是库试图为字典分配太多内存（即使您只想提取一个文件，它也会分配所有提取内容的大小）。所以这个库在我的情况下不起作用，我认为它不支持你正在使用的压缩。

最后，我发现了这个看似死气沉沉的谷歌代码项目，叫做 andro7z ( [http://code.google.com/p/andro7z/](http://code.google.com/p/andro7z/) )。这段代码包含一个 7zip 版本和一个非常非常基本的 JNI 实现。当您第一次获取源时，它所能做的就是打印使用，但它为您提供了一个很好的起点。我最终研究并修改了它，因此我可以返回一个字符串数组，其中包含存档中包含的文件的名称，以及从存档中提取特定或所有文件。因为我只使用 7z 文件，所以我没有让它成为一个非常优雅的实现，但它确实有效。使用实际的 7zip c/cpp 源意味着输出流得到正确处理，并且不会尝试分配过分的字典大小。

要编译 andro7z，您需要获取 android NDK（如果您还没有它）。从那里您将不得不编写自己的 JNI 方法，以便您可以使用 Java 与本机二进制文件进行交互。您将在 7za.cpp 的顶部看到一些测试参数，您将能够取消注释并测试硬编码提取。

# haskell - Haskell：System.Process 合并标准输出和标准错误

> ID：14024875
> 
> 赞同：9
> 
> 时间：2012-12-24T19:04:47.333
> 
> 标签：haskell, process, pipe

我想从haskell 程序中调用一个进程并捕获stdout 以及stderr。

我所做的：

```
(_, stdout, stderr) <- readProcessWithExitCode "command" [] "" 
```

问题：通过这种方式，stdout 和 stderr 被分别捕获，但是我希望消息出现在正确的位置（否则我会简单地`stdout ++ stderr`将错误消息与其对应的 stdout 分开）。

我知道如果我将输出通过管道传输到文件中，我可以实现这一点，即

```
tmp <- openFile "temp.file" ...
createProcess (proc "command" []) { stdout = UseHandle tmp,
                                    stderr = UseHandle tmp } 
```

所以我目前的解决方法是将输出通过管道传输到临时文件并将其读回。但是我正在寻找一种更直接的方法。

如果我肯定在 unix 上，我会简单地调用一个 shell 命令 á la

```
command 2>&1 
```

就是这样。但是，我希望它尽可能便携。

我需要这个：我已经构建了一个很小的 ​​haskell cgi 脚本（只是为了玩它），它调用某个程序并打印输出。我想对输出进行 html 转义，因此我不能简单地将其通过管道传输到标准输出。

我在想：也许可以创建一个内存中的句柄，比如 Java 中的 PipedInputStream/PipedOutputStream，或者允许在内存中处理 IO 流的 ArrayInputStream/ArrayOutputStream。我四处寻找`:: Handle`关于hoogle的功能，但没有找到任何东西。

也许还有另一个 Haskell 模块可以让我合并两个流？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T21:56:56.117

您可以使用`pipes`同时合并两个输入流。第一个技巧是同时从两个流中读取，你可以使用`stm`包来做到这一点：

```
import Control.Applicative
import Control.Proxy
import Control.Concurrent
import Control.Concurrent.STM
import System.Process

toTMVarC :: (Proxy p) => TMVar a -> () -> Consumer p a IO r
toTMVarC tmvar () = runIdentityP $ forever $ do
    a <- request ()
    lift $ atomically $ putTMVar tmvar a

fromTMVarS :: (Proxy p) => TMVar a -> () -> Producer p a IO r
fromTMVarS tmvar () = runIdentityP $ forever $ do
    a <- lift $ atomically $ takeTMVar tmvar
    respond a 
```

`pipes-stm`我将很快在一个包中提供上述原语，但现在使用上述原语。

然后，您只需将每个`Handle`内容分别提供给一个`MVar`并同时从两者中读取：

```
main = do
    (_, mStdout, mStderr, _) <- createProcess (proc "ls" [])
    case (,) <$> mStdout <*> mStderr of
        Nothing               -> return ()
        Just (stdout, stderr) -> do
            out <- newEmptyTMVarIO
            err <- newEmptyTMVarIO
            forkIO $ runProxy $ hGetLineS stdout >-> toTMVarC out
            forkIO $ runProxy $ hGetLineS stderr >-> toTMVarC err
            let combine () = runIdentityP $ forever $ do
                    str <- lift $ atomically $
                        takeTMVar out `orElse` takeTMVar err
                    respond str
            runProxy $ combine >-> putStrLnD 
```

只需更改`putStrLnD`您想要处理输入的任何内容。

要了解有关该[`pipes`程序包](http://hackage.haskell.org/package/pipes)的更多信息，请阅读[Control.Proxy.Tutorial](http://hackage.haskell.org/packages/archive/pipes/3.0.0/doc/html/Control-Proxy-Tutorial.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T03:18:20.467

For posix system you can use `createPipe` and `fdToHandle` in `System.Posix.IO` to create a pair of new handles (I'm not sure where to close those handles and fds though..):

```
 readProcessWithMergedOutput :: String -> IO (ExitCode, String)
  readProcessWithMergedOutput command = do
    (p_r, p_w) <- createPipe
    h_r <- fdToHandle p_r
    h_w <- fdToHandle p_w
    (_, _, _, h_proc) <- createProcess (proc command [])
                                       { std_out = UseHandle h_w
                                       , std_err = UseHandle h_w
                                       }
    ret_code <- waitForProcess h_proc
    content <- hGetContents h_r
    return (ret_code, content) 
```

For windows, [this post](https://stackoverflow.com/questions/13114952/how-do-i-pipe-the-stdout-and-stderr-of-a-process-to-the-same-handle) implemented a cross-platform `createPipe`.

# stack - 我的堆栈 (LIFO) 内存溢出并阻止进一步读取内存

> ID：14024876
> 
> 赞同：0
> 
> 时间：2012-12-24T19:04:50.217
> 
> 标签：stack, verilog, fpga

我一直在编写一个简单的堆栈内存。它有 4 个地址位，因此可以存储 16 个元素。一切正常，但问题是当所有 16 个内存元素都被写入时，跟踪内存位置的计数器溢出并将其重置为 0000。我无法找出原因。我所有的寄存器都是正确的宽度。

`reg_push`和`reg_pop`一起递增和递减，这些是跟踪内存位置的寄存器。

这是显示溢出的模拟。 ![堆栈模拟](../Images/24e6b1b3d1f379e80f51088859b22999.png)

这是代码：

```
module stack # (parameter dbits = 3, abits = 4)(
input clock,
input reset,
input push,
input pop,
input [dbits-1:0] din,
output [dbits-1:0] dout,
output full,
output empty
);

reg [dbits-1:0] regarray[2**abits-1:0]; //number of words in fifo = 2^(number of address bits)
reg [abits-1:0] reg_push, reg_pop, next_push, next_pop;
reg full_reg, empty_reg, full_next, empty_next;
reg [dbits-1:0] out;
wire wr_en;

wire db_push, db_pop;
reg dffpop1, dffpop2, dffpush1, dffpush2;

always @ (posedge clock) dffpush1 <= push; 
always @ (posedge clock) dffpush2 <= dffpush1;

assign db_push = ~dffpush2 & dffpush1; //monostable multivibrator to detect only one pulse of the button

always @ (posedge clock) dffpop1 <= pop;
always @ (posedge clock) dffpop2 <= dffpop1;

assign db_pop = ~dffpop2 & dffpop1; //monostable multivibrator to detect only one pulse of the button

assign wr_en = db_push & ~full; //only push if write signal is high and stack is not full

//always block for write operation
always @ (posedge clock)
    if(wr_en) regarray[reg_push] = din;

//always block for read operation   
always @ (posedge clock)
begin
    if(db_pop)
        out <= regarray[reg_pop];
end

always @ (posedge clock or posedge reset)
begin
    if(reset)
        begin
            full_reg <= 0;
            empty_reg <= 1;
            reg_push <= 0;
            reg_pop <= 0;
        end
    else
        begin
            full_reg <= full_next;//created the next registers to avoid the error of mixing blocking and non blocking assignment to the same signal
            empty_reg <= empty_next;
            reg_push <= next_push;
            reg_pop <= next_pop;
        end
end

always @ (*)
begin
    full_next = full_reg; //default values stay the same
    empty_next = empty_reg;
    next_push = reg_push;
    next_pop = reg_pop;

    if(db_push)
    begin
        if(~full) //if stack is not full continue
        begin
            empty_next = 0;
            next_push = reg_push + 1;
            next_pop = reg_pop + 1;
            if(reg_push == (2**abits - 1)) full_next = 1; //all registers have been written to
        end
    end

    else if (db_pop)
    begin
        if(~empty) //if stack is not empty continue
        begin
            full_next = 0;
            next_pop = reg_pop - 1;
            next_push = reg_push - 1;
            if(reg_pop == 0) empty_next = 1; //all data has been read
        end
    end
end

assign full = full_reg;
assign empty = empty_reg;
assign dout = out;

endmodule 
```

**现在**，如果我使用这个堆栈而不使其达到最大容量，它将完美地工作。只有当我将所有 16 个元素都存储到其中时，才会出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:00:13.430

Extend your pop pointer an extra bit. A 4-bit register can only store the a value 0 through 15\. Any value above that will ignore the upper bits, effectively doing a mod 16\. Hence assigning 16 will result in 0.

Option 1: expand to a 5-bit register:

Try changing:

```
reg [abits-1:0] reg_push, reg_pop, next_push, next_pop; 
```

To:

```
reg [abits:0] reg_push, reg_pop, next_push, next_pop; 
```

Option 2: Use `full_reg` are the 5th bit in evaluations:

Change:

```
if(reg_push == (2**abits - 1)) full_next = 1; //all registers have been written to
...
if(reg_pop == 0) empty_next = 1; //all data has been read 
```

To:

```
if({full_reg,reg_push} >= (2**abits - 1)) full_next = 1; //all registers have been written to
...
if({full_reg,reg_pop} == 0) empty_next = 1; //all data has been read 
```

# php - 拒绝使用 php 直接下载文件

> ID：14024877
> 
> 赞同：5
> 
> 时间：2012-12-24T19:04:53.023
> 
> 标签：php, .htaccess

`.doc`我的服务器上的下载目录中有`.zip`文件。无论谁访问我的网站页面（`download-file.php)`只有那些用户应该能够下载这些文件，而其他人不应该。

我正在努力实现上述目标，但没有运气......

我仍然可以`http://example.com/sample.doc`在浏览器中输入直接文件地址（

任何人都可以分享一些想法..我应该如何实现这一目标。

先感谢您。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-24T19:26:20.473

在文档根目录的 htaccess 文件中，您可以包含以下规则：

```
RewriteEngine On
# you can add whatever extensions you want routed to your php script
RewriteCond %{REQUEST_URI} \.(doc|zip|pdf)$ [NC]
RewriteRule ^(.*)$ /download-file.php?filename=$1 [L] 
```

然后在您的 中`download-file.php`，您可以显示您需要显示的任何内容和下载链接，您的 php 脚本可以使用[php 的 readfile() 立即提供文件（参见示例链接）](http://php.net/manual/en/function.readfile.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T19:11:49.270

您应该禁止访问您的文件目录，并仅提供 PHP 驱动的下载（以 PDF 为例）：

数据/.htaccess（谷歌搜索）：

```
deny from all 
```

下载.php：

```
/* User access check here, prior to the following code */

$name = 'MyPDF.pdf';
$filename = 'data/pdf_12345.pdf';
header('Content-Disposition: attachment; filename="'.$name.'"');
header("Content-Type: application/pdf");
header("Content-Length: " . filesize($file));
fpassthru($filename) 
```

当然，您可以为每个用户和每个请求设置不同的文件名，例如`download.php?file=MyPDF`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T19:55:42.567

您应该能够使用类似于以下代码的方法来限制人们直接访问您的内容：

RewriteCond %{HTTP_REFERER} !^http://your_domain.com/.*$ [NC]

RewriteCond %{HTTP_REFERER} !^http://your_domain.com$ [NC]

RewriteCond %{HTTP_REFERER} !^http://www.your_domain.com/.*$ [NC]

RewriteCond %{HTTP_REFERER} !^http://www.your_domain.com$ [NC]

RewriteRule .*.(jpg|jpeg|gif|png|bmp|pdf|doc)$ [http://your_domain.com/no_access.php](http://your_domain.com/no_access.php) [R,NC]

这将阻止人们直接链接您网站上的图像、pdf 或文档。然后，具有这些扩展名的文件将只能从您的站点访问。如果有人试图直接链接或访问您的文件，他们将体验到您选择让他们看到的任何内容（您放置在 no_access.php 中）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-25T13:52:36.857

如果您有专用服务器，最简单且在我看来最安全的方法是将文件存储在**/var/www/之外**

例如，您可以创建一个文件夹**/var/webdocs/**并将它们存储在那里。

# iphone - UITableViewCell 奇怪的背景在编辑模式下调整大小

> ID：14024879
> 
> 赞同：0
> 
> 时间：2012-12-24T19:05:19.200
> 
> 标签：iphone, objective-c, ios, uitableview

这是我自定义`UITableViewCell`的背景图像等。当我打电话时`[tableView setEditingMode:YES];`- 编辑控件缩放我的背景图像，它看起来很糟糕。见截图：

![垂直的](../Images/01734ede634d760de081c00a517c98e2.png)

![详细描述](../Images/db033a7c8bc59a3ef11556b5c467a53d.png)

出现编辑控件时，单元格背景会缩放。如何解决这个问题？我试图用 操纵`UIAutoresizingMask`，但没有结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:46:35.707

哥们，还有办法！

只需将其添加到您的单元格中：

[self.contentView setAutoresizesSubviews:NO];

此致

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T19:07:18.393

如果您将背景图像直接添加到 UITableViewCell 的视图而不是其 contentView 上，您可能会获得更好的结果。切换到编辑模式时，该 UITableViewCell 的视图不会以任何方式调整大小。

# inno-setup - 在 inno-setup 中运行 netsh.exe 作为后安装

> ID：14024881
> 
> 赞同：2
> 
> 时间：2012-12-24T19:05:43.227
> 
> 标签：inno-setup, acl, netsh

在以下脚本中，我运行 netsh.exe 以在 TCP 端口（GET 请求）上启用 http。但即使设置日志显示退出代码为 0，并且参数正确。我没有看到启用的端口。有任何想法吗？

```
; Script generated by the Inno Setup Script Wizard.
; SEE THE DOCUMENTATION FOR DETAILS ON CREATING INNO SETUP SCRIPT FILES!

#define MyAppName "Netsh"
#define MyAppVersion "1.0"
#define MyAppPublisher "Draper Laboratory"
#define MyAppURL "http://www.draper.com/"
#define MyAppExeName "MyProg.exe"

[Setup]
; NOTE: The value of AppId uniquely identifies this application.
; Do not use the same AppId value in installers for other applications.
; (To generate a new GUID, click Tools | Generate GUID inside the IDE.)
AppId={{112CF442-ACA5-4799-BC72-72C98F90CED1}
AppName={#MyAppName}
AppVersion={#MyAppVersion}
;AppVerName={#MyAppName} {#MyAppVersion}
AppPublisher={#MyAppPublisher}
AppPublisherURL={#MyAppURL}
AppSupportURL={#MyAppURL}
AppUpdatesURL={#MyAppURL}
CreateAppDir=no
OutputDir=C:\Users\ysg4206\Desktop
OutputBaseFilename=setup
Compression=lzma
SolidCompression=yes
ChangesEnvironment=True
SetupLogging=True

[Languages]
Name: "english"; MessagesFile: "compiler:Default.isl"

[Run]
Filename: "{sys}\netsh.exe"; Parameters: "http delete urlacl url=http://*:4326/"; WorkingDir: "{sys}"; Flags: postinstall runascurrentuser; Description: "Remove Web Port 4326"
Filename: "{sys}\netsh.exe"; Parameters: "http add urlacl url=http://*:4326/ user={%USERDOMAIN}\{%USERNAME}"; WorkingDir: "{sys}"; Flags: postinstall runascurrentuser; Description: "Add Web Port 4326" 
```

这是日志：

```
2012-12-24 14:02:43.123   Log opened. (Time zone: UTC-05:00)
2012-12-24 14:02:43.123   Setup version: Inno Setup version 5.5.2 (a)
2012-12-24 14:02:43.123   Original Setup EXE: C:\Users\ysg4206\Desktop\setup.exe
2012-12-24 14:02:43.123   Setup command line: /SL5="$4A0C72,54272,54272,C:\Users\ysg4206\Desktop\setup.exe" /SPAWNWND=$EF1420 /NOTIFYWND=$3540C26 /log="setup.log"
2012-12-24 14:02:43.124   Windows version: 6.1.7601 SP1  (NT platform: Yes)
2012-12-24 14:02:43.124   64-bit Windows: Yes
2012-12-24 14:02:43.124   Processor architecture: x64
2012-12-24 14:02:43.124   User privileges: Administrative
2012-12-24 14:02:43.124   64-bit install mode: No
2012-12-24 14:02:43.128   Created temporary directory: C:\Users\ysg4206\AppData\Local\Temp\is-JCDBN.tmp
2012-12-24 14:02:45.492   Starting the installation process.
2012-12-24 14:02:45.495   Directory for uninstall files: C:\Windows
2012-12-24 14:02:45.496   Will append to existing uninstall log: C:\Windows\unins000.dat
2012-12-24 14:02:45.500   -- File entry --
2012-12-24 14:02:45.501   Dest filename: C:\Windows\unins000.exe
2012-12-24 14:02:45.504   Time stamp of our file: 2012-12-24 14:02:42.959
2012-12-24 14:02:45.504   Dest file exists.
2012-12-24 14:02:45.504   Time stamp of existing file: 2012-12-24 14:02:22.794
2012-12-24 14:02:45.505   Version of our file: 51.52.0.0
2012-12-24 14:02:45.506   Version of existing file: 51.52.0.0
2012-12-24 14:02:45.506   Installing the file.
2012-12-24 14:02:45.511   Uninstaller requires administrator: Yes
2012-12-24 14:02:45.608   Leaving temporary file in place for now.
2012-12-24 14:02:45.669   Installation process succeeded.
2012-12-24 14:02:45.832   Need to restart Windows? No
2012-12-24 14:02:46.661   -- Run entry --
2012-12-24 14:02:46.661   Run as: Current user
2012-12-24 14:02:46.661   Type: Exec
2012-12-24 14:02:46.661   Filename: C:\Windows\system32\netsh.exe
2012-12-24 14:02:46.661   Parameters: http delete urlacl url=http://*:4326/
2012-12-24 14:02:46.831   Process exit code: 0
2012-12-24 14:02:46.831   -- Run entry --
2012-12-24 14:02:46.831   Run as: Current user
2012-12-24 14:02:46.831   Type: Exec
2012-12-24 14:02:46.831   Filename: C:\Windows\system32\netsh.exe
2012-12-24 14:02:46.831   Parameters: http add urlacl url=http://*:4326/ user=CSDL-SERVICES\ysg4206
2012-12-24 14:02:46.951   Process exit code: 0
2012-12-24 14:02:46.953   Deinitializing Setup.
2012-12-24 14:02:46.959   Log closed. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:05:59.070

进一步测试，表明它正在工作。但我希望有一种方法可以暂停 cmd.exe 框，该框会闪烁，显示一些文本然后退出。实在看不出来是什么信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-16T23:09:33.287

我遇到了类似的问题，但是当我尝试像原始问题和答案中那样直接运行 netsh.exe 时，它​​对我不起作用。

我的解决方案是将其作为 powershell 命令运行。就我而言，我没有使用 postinstall 标志。

```
Filename: "powershell.exe"; \
Parameters: "-NonInteractive -Command netsh http add urlacl url={#MyURL} user='{#MyServiceUser}'"; \
Description: "Add URL registration"; StatusMsg: "Adding URL registration..."; \
Flags: runhidden; Components: MyComponentA; 
```

# dynamic - Ember-Router：动态创建路由

> ID：14024882
> 
> 赞同：1
> 
> 时间：2012-12-24T19:05:44.913
> 
> 标签：dynamic, ember.js, state, ember-router

我正在尝试动态创建到我的路由器的路由。我知道有序列化可以做到这一点，但它似乎只接受有限数量的参数。例如，我需要能够构建一个可以是`/:a`或的路线`/:a/:b/:c`。

我的问题是，有没有办法获得原始路径请求是什么？

我将需要：

*   获取原始路径
*   暂停路由器，以便可以进行 ajax 调用来检索路径信息。
*   从服务器请求路径并返回模块（如果存在）（我已经设置了这么多）。
*   如果路径存在，则创建路由并将应用程序移动到该状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T20:51:00.010

您可以通过路由器的 location 属性访问请求的位置。然后，您可以拆分返回的字符串并访问不同的参数。

```
locationString = App.router.get('location.location.hash')
// something like "/1/2"
params = locationString.split(/\//)
param1 = params[1] // => "1"
param2 = params[2] // => "2" 
```

# javascript - jQueryUI 和 jQuery 插件冲突

> ID：14024883
> 
> 赞同：0
> 
> 时间：2012-12-24T19:05:56.097
> 
> 标签：javascript, jquery, jquery-ui, plugins, conflict

我正在使用一个 jQuery 插件，它与**jQueryUI 效果核心**中的某些内容发生冲突，很可能与**轻松动画**有关。

我不能发布代码，因为插件不是开源的，所以我的问题是：有什么办法可以捕捉到这个错误并修复它？

在 jQueryUI Effects Core 中，如果我删除以下代码，这两个插件都**可以正常工作而不会发生冲突**

```
$.effects = {
    effect: {}
}; 
```

我什至不知道那是为了什么，所以我想了解一下。

提前感谢任何愿意帮助我的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T19:13:51.667

如果您正在寻找库本身的冲突，我会使用 jQuery 的开发版本。我确定您已经在使用某种调试工具，例如 firebug 或 chromes javascript 控制台。从那里你只需要找到错误并获取堆栈跟踪。Firefox 的“中断所有错误”功能在这种情况下很有用。

也不要害怕将自己的代码添加到 jquery 的开发版本中。把它弄乱了，把它当作你自己的代码，你总是可以再次下载它。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T19:22:21.790

许多 JavaScript 库使用`$`函数或变量名，就像 jQuery 一样。在 jQuery 的情况下，`$`它只是 的别名`jQuery`，因此所有功能都可以在不使用 $ 的情况下使用。如果我们需要在 jQuery 旁边使用另一个 JavaScript 库，我们可以通过调用将 $ 的控制权返回给另一个库`$.noConflict()`：

```
<script type="text/javascript" src="other_lib.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
  $.noConflict();
  // Code that uses other library's $ can follow here.
</script> 
```

这种技术与 .ready() 方法对 jQuery 对象的别名能力结合起来特别有效，因为在传递给 .ready() 的回调中，如果我们愿意，我们可以使用 $ ，而不必担心以后会发生冲突：

```
<script type="text/javascript" src="other_lib.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
  $.noConflict();
  jQuery(document).ready(function($) {
    // Code that uses jQuery's $ can follow here.
    $("div").hide();
  });
  // Code that uses other library's $ can follow here.
  $("content").style.display = 'none';
</script> 
```

来源：[**jQuery.noConflict**](http://api.jquery.com/jQuery.noConflict/)

# operating-system - 在 C 中执行标记：'.' 是什么意思 和 '/' 在 './' 中是什么意思？

> ID：14024888
> 
> 赞同：-6
> 
> 时间：2012-12-24T19:06:40.467
> 
> 标签：operating-system, token

当执行一个 C 程序时，我们必须输入一个 '.' token 和一个 '/' 标记一起，后跟我们的程序名称：

```
./program 
```

这些令牌中的每一个是什么意思？为什么他们需要在一起工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T19:10:01.507

`./`语法只是引用当前目录（实际上是`.`当前目录，`/`而是路径分隔符）。这是必需的，因为 shell 将查看在`$PATH`环境变量中为可执行文件指定的文件夹。由于程序位于默认情况下不在 PATH 内的当前目录中，因此您需要指定从中运行它的文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T19:10:23.310

实际上，这与 C 无关。这个值只是传递给操作系统并用于定位文件。

但在 Windows 上，它似乎根本没有多大意义。`.`是当前目录，而`/`只是当前目录和 . 之间的路径分隔符`program`。由于操作系统默认为当前目录，它指的是与刚才相同的路径`program`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T19:08:04.850

`.`表示当前路径

`..`指父母。

`/`表示根或路径分隔符。取决于 Unix/Windows/Mac

`./`表示当前路径并与 RHS 相关。

`./Program`指 PWD 和作为目录或位置的程序。

# ruby-on-rails - 未知提供者：来自 AngularJS/Rails 应用程序的 e

> ID：14024889
> 
> 赞同：0
> 
> 时间：2012-12-24T19:06:43.600
> 
> 标签：ruby-on-rails, dependency-injection, angularjs

我正在扩展一个 Rails gem，它为 Rails 应用程序生成 AngularJS 样式的脚手架，请参阅 [https://github.com/explainer/angularjs_scaffold](https://github.com/explainer/angularjs_scaffold)。我已经从[https://github.com/patcito/angularjs_scaffold](https://github.com/patcito/angularjs_scaffold)向 fork 添加了 CoffeeScript 语言支持。

当我尝试在生产模式下部署时，我收到了标题中提到的错误，并且 javascript 代码被 rails 资产管道缩小和混淆了。[我已经阅读了http://docs.angularjs.org/tutorial/step_05](http://docs.angularjs.org/tutorial/step_05)上的“关于缩小的说明”，并使用了那里提到的“数组”设计模式，但应用程序仍然中断。

脚手架生成 2 个应用程序级别的角度控制器，一个虚拟 WelcomeCtrl 和一个 CsrfCtrl 来处理安全令牌。对于每个模型，生成 4 个 REST 样式的控制器，索引、显示、创建、编辑。

我难住了。我要求一些好人用一个简单的模型构建一个小的 Rails 应用程序，比如说

```
rails g scaffold Todo body:string, done:boolean 
```

请将我的 gem 包含在 Gemfile 的 :development 组中

```
gem 'angularjs_scaffold', git: "git@github.com:explainer/angularjs_scaffold.git" 
```

并按照 README.md 中的说明安装生成器并针对您的模型运行它，

```
rails g angularjs:install --language=javascript

rails g angularjs:scaffold Todos 
```

然后，检查添加到 app/javascripts 文件夹中的文件：

*   csrf_controller.js
*   todos.js
*   todos_controller.js
*   Welcome_controller.js

看看你是否能看到我没有正确处理 angularjs 依赖注入要求的地方。

我真的很感激在这件事上的任何帮助。

[PS 我在https://github.com/explainer/plink](https://github.com/explainer/plink)添加了一个示例应用程序 Plink，因此只需检查上述文件并找出我的错误或遗漏。

我已经在 github 上公开了测试应用程序，对于疏忽感到抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T21:44:01.657

一个好人发现了我的问题，这是一个需要显式依赖注入的地方的遗漏。我忽略了它。谢谢，杰夫。

# c++ - 在 Qt 中从对象的析构函数发出信号可以吗？

> ID：14024892
> 
> 赞同：15
> 
> 时间：2012-12-24T19:06:48.800
> 
> 标签：c++, qt

当 QObject 派生对象被破坏时，是否可以从其析构函数发出信号？我试过了，它似乎可以工作，但我不确定是否应该这样做。

例如，这段代码

```
class MyClass : public QObject {
signals:
    void mySignal(const QString &str);
public:
    QString myString;
    ~MyClass() { emit mySignal(myString); }
} 
```

将传递一个 const 引用到执行连接插槽时可能超出范围的对象。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-24T19:14:37.493

发射通常很好（QObject 也使用“破坏”信号），包括你的情况。当连接是直接的时，字符串仍然存在。而当它是QueuedConnection 时，则首先将字符串复制到事件循环中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-02-16T09:13:15.703

如果您问是否可以：可以，它本身不会引起任何问题。

如果您要问在 Qt 中做这件事是否普遍安全？绝对不安全。如果你从析构函数发出，你必须非常注意你所做的事情，并且对 Qt 事件系统有很好的理解。

还记得当`QObject`后代销毁时，它会断开所有信号，因此被销毁的对象不会在其插槽上获得更多调用？好吧，有一个问题：销毁命令。析构函数会断开连接，并且它是最后一个`QObject`析构函数，这意味着在析构链中，事件可能仍会到达“半死”对象，从而在访问虚函数和已析构后代的成员时导致访问冲突。如果您使用事件系统，并且满足以下任何条件，则存在这种可能性：

*   在多线程环境中，如果对象没有在自己的线程上被破坏。
*   在多线程环境中，如果对象的销毁链触发了 a`processEvents()`在任意运行路径上的运行。
*   在多线程环境中，如果另一个线程上的任何对象与该对象有直接连接，并且它无法对其直接连接中的破坏信号做出反应。
*   在单线程环境中，当析构函数发送可能返回到直接连接链中的对象的信号时。

我将此效果称为“死亡期间的生命”，并且`processEvents()`在析构函数中发出信号或运行任何形式的（通常是意外的）都会增加产生此类错误的机会。

当然，如果你能以某种方式保证在销毁期间没有任何当前或未来的代码实际上会触发任何插槽，那么从析构函数发出它是完全安全的，但是很难给出这样的保证，我建议尽可能避免它.

# c# - 将 DataGridView 绑定到列表 不显示数据

> ID：14024893
> 
> 赞同：8
> 
> 时间：2012-12-24T19:06:53.537
> 
> 标签：c#, winforms, list, generics, datasource

这是我的代码（这是一个非常简单的例子）：

```
public partial class Form1 : Form
{
    List<Person> listPersons;
    public Form1()
    {
        InitializeComponent();
        listPersons = new List<Person>();
        dataGridView1.DataSource = listPersons;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        if (textBox1.Text.Length > 0)
        {
            Person p = new Person();
            p.Name = textBox1.Text;
            listPersons.Add(p);
        }
    }
}

class Person
{
    public string Name { get; set; }
} 
```

当您按下按钮时，数据会添加到列表中，但不会显示在`DataGridView`. 我错过了什么？

我尝试设置`AutoGenerateColumns`and `VirtualMode`to `true`，但这也没有解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T19:17:59.200

已经有一段时间了，自从处理尝试将 List<T>s 绑定到 DataGridViews 的 WinForms 代码以来，我已经换了工作。如果我没记错的话，无论你绑定什么都需要实现 IBindingList，而 List<T> 没有。我可能是错的。

无论如何，我使用的是[BindingListView](http://blw.sourceforge.net/)，它非常快速和简单。你只需这样做：

```
List<Customer> customers = GetCustomers();
BindingListView<Customer> view = new BindingListView<Customer>(customers);
dataGridView1.DataSource = view; 
```

你完成了。我已经有几年没有看过源代码了，但我相信它用一个实现 IBindingList 的类包装了 List<T>。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T19:42:39.587

但是，如果我只使用它`BindingList<T>`而不是`List<T>`它确实有效。

示例代码：

```
 BindingList<Person> bl;
    public Form1()
    {
        InitializeComponent();
        bl = new BindingList<Person>();
        dataGridView1.DataSource = bl;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        if (textBox1.Text.Length > 0)
        {
            Person p = new Person();
            p.Name = textBox1.Text;
            bl.Add(p);
            textBox1.Text = "";
            textBox1.Focus();
        }
    } 
```

*但我仍然想弄清楚如何在`DataGridView`与 List 绑定后显示数据。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T19:18:34.023

集中您的`FillGrid`功能并在您想要更新网格时调用它

```
public Form1()
{
    InitializeComponent();
     listPersons = new List<Person>();

    FillGrid();
}

private void button1_Click(object sender, EventArgs e)
{
    if (textBox1.Text.Length > 0)
    {
        Person p = new Person();
        p.Name = textBox1.Text;
        listPersons.Add(p);

        FillGrid();
    }
}

private void FillGrid()
{
   dataGridView1.DataSource = listPersons;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T11:22:19.607

我认为您不能直接将列表绑定到 datagridview。而是使用 BindingList。

```
public partial class Form1 : Form
{
    BindingList<Person> lstBinding;
    public Form1()
    {
        InitializeComponent();
        lstBinding = new BindingList<Person>();
        dataGridView1.DataSource = lstBinding;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        if (textBox1.Text.Length > 0)
        {
            Person p = new Person();
            p.Name = textBox1.Text;
            lstBinding.Add(p);
            FillGrid();
        }
    }
    private void FillGrid()
    {
        dataGridView1.DataSource = lstBinding;
    }
}

class Person
{
    private string name;
    public string Name 
    { 
        get {return name;}
        set { name = value; } 
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T13:01:30.733

使用数组绑定datagridview，即

```
 public partial class Form1 : Form
{

    Person[] listPersons = new Person[0];
    public Form1()
    {
        InitializeComponent();
        dataGridView1.DataSource = listPersons;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        if (textBox1.Text.Length > 0)
        {
            Person p = new Person();
            p.Name = textBox1.Text;
            Array.Resize<Person>(ref listPersons, listPersons.Length+1);
            listPersons[listPersons.Length-1]=p;
            dataGridView1.DataSource = listPersons;
        }

    }

}
class Person
{
    public string Name { get; set; }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-24T19:14:26.260

`dataGridView1.Refresh();`添加到列表后尝试调用。

# codeigniter - 如何使用 HMVC 在 CI 中缓存模块

> ID：14024901
> 
> 赞同：1
> 
> 时间：2012-12-24T19:07:49.007
> 
> 标签：codeigniter, caching, codeigniter-2, hmvc

CI (2.1.3) & HMVC (5.4)

我有标签云（/application/modules/tags）

该模块在模板中显示为一个块 — Modules::run('tags')

如果我在控制器中使用 $this->output->cache(60) ，它会缓存所有页面（不是标签云视图）。

如何使用块缓存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T20:37:29.180

使用内置缓存的 Codeigniters 无法做到这一点，它只允许您缓存整个页面。你需要去获取自己的 phil sturgeons 部分缓存库。[https://github.com/philsturgeon/codeigniter-cache](https://github.com/philsturgeon/codeigniter-cache)，这将让你缓存任何你想要的。

唯一的缺点是，如果您不小心，随着站点的增长，维护起来可能会有些痛苦，因此请仔细考虑何时需要清除各种缓存。

# scala - 构建 Scala 项目时出现 Intellij 12 和内部编译错误

> ID：14024905
> 
> 赞同：7
> 
> 时间：2012-12-24T19:08:22.330
> 
> 标签：scala, intellij-idea

我刚刚下载了 Intellij 12.01（build #IC-123.94），一旦我尝试构建一个 Scala 项目，我就会得到以下堆栈跟踪：

```
Internal error: (java.lang.ClassNotFoundException) org.jetbrains.jps.incremental.BinaryContent
java.lang.ClassNotFoundException: org.jetbrains.jps.incremental.BinaryContent
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at org.jetbrains.jps.incremental.scala.LazyCompiledClass.<init>(ScalaBuilder.scala:239)
    at org.jetbrains.jps.incremental.scala.IdeClient.generated(ScalaBuilder.scala:230)
    at org.jetbrains.jps.incremental.scala.remote.ClientEventProcessor.process(ClientEventProcessor.scala:17)
    at org.jetbrains.jps.incremental.scala.remote.RemoteServer$.liftedTree1$1(RemoteServer.scala:76)
    at org.jetbrains.jps.incremental.scala.remote.RemoteServer$.org$jetbrains$jps$incremental$scala$remote$RemoteServer$$handle(RemoteServer.scala:74)
    at org.jetbrains.jps.incremental.scala.remote.RemoteServer$$anonfun$send$1$$anonfun$apply$1$$anonfun$apply$3.apply(RemoteServer.scala:44)
    at org.jetbrains.jps.incremental.scala.remote.RemoteServer$$anonfun$send$1$$anonfun$apply$1$$anonfun$apply$3.apply(RemoteServer.scala:43)
    at org.jetbrains.jps.incremental.scala.package$.using(package.scala:15)
    at org.jetbrains.jps.incremental.scala.remote.RemoteServer$$anonfun$send$1$$anonfun$apply$1.apply(RemoteServer.scala:43)
    at org.jetbrains.jps.incremental.scala.remote.RemoteServer$$anonfun$send$1$$anonfun$apply$1.apply(RemoteServer.scala:40)
    at org.jetbrains.jps.incremental.scala.package$.using(package.scala:15)
    at org.jetbrains.jps.incremental.scala.remote.RemoteServer$$anonfun$send$1.apply(RemoteServer.scala:40)
    at org.jetbrains.jps.incremental.scala.remote.RemoteServer$$anonfun$send$1.apply(RemoteServer.scala:39)
    at org.jetbrains.jps.incremental.scala.package$.using(package.scala:15)
    at org.jetbrains.jps.incremental.scala.remote.RemoteServer.send(RemoteServer.scala:39)
    at org.jetbrains.jps.incremental.scala.remote.RemoteServer.compile(RemoteServer.scala:24)
    at org.jetbrains.jps.incremental.scala.ScalaBuilder$$anonfun$5$$anonfun$apply$3$$anonfun$apply$4.apply(ScalaBuilder.scala:110)
    at org.jetbrains.jps.incremental.scala.ScalaBuilder$$anonfun$5$$anonfun$apply$3$$anonfun$apply$4.apply(ScalaBuilder.scala:100)
    at scala.util.Either$RightProjection.map(Either.scala:536)
    at org.jetbrains.jps.incremental.scala.ScalaBuilder$$anonfun$5$$anonfun$apply$3.apply(ScalaBuilder.scala:100)
    at org.jetbrains.jps.incremental.scala.ScalaBuilder$$anonfun$5$$anonfun$apply$3.apply(ScalaBuilder.scala:99)
    at scala.util.Either$RightProjection.flatMap(Either.scala:523)
    at org.jetbrains.jps.incremental.scala.ScalaBuilder$$anonfun$5.apply(ScalaBuilder.scala:99)
    at org.jetbrains.jps.incremental.scala.ScalaBuilder$$anonfun$5.apply(ScalaBuilder.scala:98)
    at scala.util.Either$RightProjection.flatMap(Either.scala:523)
    at org.jetbrains.jps.incremental.scala.ScalaBuilder.doBuild(ScalaBuilder.scala:98)
    at org.jetbrains.jps.incremental.scala.ScalaBuilder.build(ScalaBuilder.scala:67)
    at org.jetbrains.jps.incremental.scala.ScalaBuilderService$ScalaBuilderDecorator.build(ScalaBuilderService.java:42)
    at org.jetbrains.jps.incremental.IncProjectBuilder.runModuleLevelBuilders(IncProjectBuilder.java:963)
    at org.jetbrains.jps.incremental.IncProjectBuilder.runBuildersForChunk(IncProjectBuilder.java:710)
    at org.jetbrains.jps.incremental.IncProjectBuilder.buildTargetsChunk(IncProjectBuilder.java:740)
    at org.jetbrains.jps.incremental.IncProjectBuilder.buildChunkIfAffected(IncProjectBuilder.java:673)
    at org.jetbrains.jps.incremental.IncProjectBuilder.buildChunks(IncProjectBuilder.java:494)
    at org.jetbrains.jps.incremental.IncProjectBuilder.runBuild(IncProjectBuilder.java:274)
    at org.jetbrains.jps.incremental.IncProjectBuilder.build(IncProjectBuilder.java:164)
    at org.jetbrains.jps.cmdline.BuildRunner.runBuild(BuildRunner.java:114)
    at org.jetbrains.jps.cmdline.BuildSession.runBuild(BuildSession.java:205)
    at org.jetbrains.jps.cmdline.BuildSession.run(BuildSession.java:102)
    at org.jetbrains.jps.cmdline.BuildMain$MyMessageHandler$1.run(BuildMain.java:107)
    at org.jetbrains.jps.service.impl.SharedThreadPoolImpl$1.run(SharedThreadPoolImpl.java:26)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

显然，问题来自 Intellij 的 lib 文件夹中的 openapi.jar，它应该包含这样一个类。

任何指针？

问候。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T09:02:08.170

Idea 12 也有同样的问题，但是在将 Scala 插件更新到 0.7.62 版本后，问题已经解决了。

但是，您可以尝试遵循 Idea 的建议：

> 如果出现任何编译问题，您可以通过清除启用以前的（内部）编译器：项目设置/编译器/使用外部构建

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T13:27:31.250

我也遇到了同样的问题，通过更新到每晚构建（0.7.82）来解决，这里提供的说明：http: [//confluence.jetbrains.net/display/SCA/Scala+Plugin+Nightly+Builds+for+Leda](http://confluence.jetbrains.net/display/SCA/Scala+Plugin+Nightly+Builds+for+Leda)

# c# - 全球站点和日期时间存储？

> ID：14024909
> 
> 赞同：1
> 
> 时间：2012-12-24T19:08:40.497
> 
> 标签：c#, sql-server, sql-server-2008, datetime, globalization

*我正在寻找最佳实践解决方案。*

以stackoverflow和我问的一个问题为例：

我住在以色列，现在时间是：

![在此处输入图像描述](../Images/eb2d2012c352615ffcdb358da5facf43.png)

我确实在~17:58（现在之前 3 小时）问了一些问题

![在此处输入图像描述](../Images/a0966d6da5e59f2fa5a50266b4142e6a.png)

然而，它确实显示“3 小时前”**并**显示 UTC 时间。（以色列+2）

所以*要么*它保存了UTC和我的偏移量

**或者**它只保存 UTC 并在客户端的 JS 中显示本地时间。

现在我的问题是从数据库的角度来看：

我*可以*通过 JS 命令检测客户端从哪里连接：

```
new Date().getTimezoneOffset(); //-120 
```

我*可以*像这样存储它：

```
data  |    UTCTime          | userOffset
----------------------------------------
 ...    2012-12-24 15:36:31       -2 
```

**问题**

*   这是存储全球事件（日期时间）的最佳解决方案吗？

*   在 c# 中有一个`DateTimeOffset`Structure 类型，它在其中存储偏移量。Sql server 中是否有任何等效的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T19:12:52.103

根据[这篇文章](https://stackoverflow.com/questions/2532729/daylight-saving-time-and-timezone-best-practices)：你应该**始终保持你的日期统一**。所以UTC将是最好的选择。

另一方面 - 当你有 UTC 日期时，你可以根据某人的时区轻松地显示它（不仅对作者，而且对每个人）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T19:10:22.233

是的。MS SQL Server 2008 引入了[datetimeoffset](http://msdn.microsoft.com/en-us/library/bb630289.aspx)。

[在这里您可以找到所有日期时间类型](http://msdn.microsoft.com/en-us/library/ms186724%28v=sql.100%29.aspx)。

[以及如何使用它们。](http://msdn.microsoft.com/en-us/library/ms180878%28v=sql.100%29.aspx)

# installation - Scrapy安装问题

> ID：14024910
> 
> 赞同：0
> 
> 时间：2012-12-24T19:08:42.260
> 
> 标签：installation, scrapy

我正在尝试在 cygwin 中安装 Scrapy，我终于让 easy_install 工作了，但它一直给出这个错误消息：安装脚本退出并出现错误：

```
'gcc' failed with exit status 1 
```

我正在使用 gcc 版本 3.4.4。任何想法，我不知道接下来要尝试什么？在给出此错误消息之前，它会打印出数千行关于 OpenSSl 的信息，我不确定这是否意味着问题出在 OpenSSL 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T20:15:33.803

最后发现根本问题出在 pyOpenSSL 中，并在此处解决了[easy_install PyOpenSSL error](https://stackoverflow.com/questions/7340784/easy-install-pyopenssl-error)。

更新：对于我后来得到的其他 gcc 错误，我发现从 cygwin 安装程序安装 gcc4 修复了它。

# oop - DDD - 持久性模型和领域模型

> ID：14024912
> 
> 赞同：69
> 
> 时间：2012-12-24T19:08:58.880
> 
> 标签：oop, model, repository, domain-driven-design, repository-pattern

我正在尝试学习领域驱动设计（DDD），我想我已经掌握了基本概念。但是有一些事情让我感到困惑。

在 DDD 中，持久性模型和域模型是不同的东西吗？我的意思是，我们在设计领域和类时只考虑领域问题；没关系。但是在那之后，当我们构建存储库或任何其他数据持久性系统时，我们是否应该创建模型的另一个表示以在持久层中使用？

我在想我们的域模型也用于持久性，这意味着我们的存储库从查询中返回我们的域对象。但是今天，我读了这篇文章，我有点困惑：

*[停下来！领域模型不是持久性模型](https://blog.sapiensworks.com/post/2012/04/07/Just-Stop-It!-The-Domain-Model-Is-Not-The-Persistence-Model.aspx)*

如果这是真的，那么将持久性对象与域对象分开会有什么好处？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-12-26T15:24:02.920

可以这样想，领域模型应该不依赖任何东西，并且其中没有基础设施代码。域模型不应该是可序列化的，也不应该从某些 ORM 对象继承，甚至不应该共享它们。这些都是基础设施问题，应该与领域模型分开定义。

但是，如果您正在寻找纯 DDD 并且您的项目重视可扩展性和性能而不是初始开发速度。很多时候，将基础架构问题与您的“域模型”混合可以帮助您以可伸缩性为代价实现速度的巨大进步。关键是，您需要问自己，“纯 DDD 的好处是否值得在开发速度上付出代价？”。如果您的答案是肯定的，那么这就是您的问题的答案。

让我们从一个示例开始，您的应用程序以域模型开始，而数据库中的表恰好与您的域模型匹配。现在，您的应用程序突飞猛进，您在查询数据库时开始遇到性能问题。您已经应用了一些经过深思熟虑的索引，但是您的表增长得如此之快，以至于看起来您可能需要对数据库进行反规范化才能跟上。因此，在 dba 的帮助下，您提出了一种新的数据库设计，可以满足您的性能需求，但是现在这些表与以前的方式大不相同，现在您的域实体块分布在多个表中，而不是而不是每个实体都有一个表。

这只是一个示例，但它说明了为什么您的域模型应该与您的持久性模型分开。在此示例中，您不想拆分域模型的类以匹配您对持久性模型设计所做的更改，并从本质上更改域模型的含义。相反，您希望更改新的持久性模型和域模型之间的映射。

将这些设计分开有几个好处，例如可扩展性、性能和对紧急数据库更改的反应时间，但您应该权衡它们与初始开发的成本和速度。通常，从这种分离级别中获益最多的项目是大型企业应用程序。

**评论员更新**

在软件开发的世界里，有第 N 个可能的解决方案。正因为如此，灵活性与开发的初始速度之间存在间接的反比关系。作为一个简单的例子，我可以将逻辑硬编码到一个类中，或者我可以编写一个允许将动态逻辑规则传递给它的类。前一种选择将具有更高的开发速度，但代价是灵活性较低。后一种选择将具有更高程度的灵活性，但代价是开发速度较低。这在每种编码语言中都适用，因为总是有第 N 个可能的解决方案。

有许多工具可以帮助您提高初始开发速度和灵活性。例如，ORM 工具可以提高数据库访问代码的开发速度，同时还可以让您灵活地选择 ORM 支持的任何特定数据库实现。从您的角度来看，这是时间和灵活性的净收益减去工具的成本（其中一些是免费的），根据开发时间成本相对于业务需要。

但是，对于这种编码风格的对话，本质上就是领域驱动设计，你必须考虑编写你正在使用的工具所花费的时间。如果您要编写该 ORM 工具，甚至编写数据库访问逻辑以支持该工具为您提供的所有实现，那么与仅对您计划的特定实现进行硬编码相比，这将花费更长的时间关于使用。

总之，工具可以帮助您抵消自己的生产时间和灵活性价格，通常是将时间成本分配给购买工具的每个人。但是，任何代码，包括使用工具的代码，都将受到速度/灵活性关系的影响。通过这种方式，与将业务逻辑、数据库访问、服务访问和 UI 代码纠缠在一起的情况相比，领域驱动设计提供了更大的灵活性，但以生产时间为代价。领域驱动设计比小型应用程序更好地服务于企业级应用程序，因为企业级应用程序的初始开发时间与业务价值相关的成本往往更高，并且因为它们更复杂，它们也更容易发生变化，需要更大的灵活性。及时降低成本。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-12-24T13:25:25.890

> 在 DDD 中，持久性模型和域模型是不同的东西吗？

在 DDD 中，您拥有**域模型**和**存储库**。而已。如果在存储库内部，您将直接持久化您的域模型，或者在持久化之前将其转换为持久性模型取决于您！这是一个设计问题，你的设计。这是您的存储库的实现细节，与域本身无关。

正如其他人指出的那样，每个选项都有其优点和缺点。看看这个**[答案](https://stackoverflow.com/a/34436709/890890)**，我详细介绍了其中的一些。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-12-24T19:44:02.970

> 在 DDD 中，持久性模型和域模型是不同的东西吗？

是的，但这并不一定意味着一组不同的类来明确表示持久性模型。

如果使用关系数据库进行持久化，则诸如 NHibernate 之类的 ORM 可以通过映射到域类来处理表示持久性模型。在这种情况下，没有显式的持久性模型类。这种方法的成功取决于 ORM 的映射能力。例如，NHibernate 可以通过[组件映射](http://ayende.com/blog/3937/nhibernate-mapping-component)支持中间映射类。这允许在需要时使用显式持久性模型类。

如果使用文档数据库进行持久化，则通常对持久性模型的需求更少，因为域模型只需可序列化即可持久化。

因此，当存在无法通过 ORM 映射到域模型的复杂映射时，请使用显式持久性模型类。无论实现如何，域模型和持久性模型之间的区别仍然存在。

# java - 用 Java 在网络上创建文件夹

> ID：14024917
> 
> 赞同：0
> 
> 时间：2012-12-24T19:10:03.430
> 
> 标签：java, stream, filestream

我想在网络上发送文件夹，根据我的代码，如果文件夹包含成功发送它们的文件，但如果文件夹包含内部文件夹，它不会在客户端创建文件夹？

服务器代码：

```
ObjectOutputStream oos = new ObjectOutputStream(connection.getOutputStream());
File file = new File("home/");
File[] children = file.listFiles();

if (children != null) {
  for (File child : children) {
    all.add(child);  

    if(!child.isDirectory()){
      oos.writeObject(child.getName());
      FileInputStream fis = new FileInputStream(child);  

      while ((bytesRead = fis.read(buffer)) > 0) {  
        oos.writeObject(bytesRead);  
        oos.writeObject(Arrays.copyOf(buffer, buffer.length));  
      }   

    }
  }
} 
```

客户代码：

```
oos = new ObjectOutputStream(theSocket.getOutputStream());
ois = new ObjectInputStream(theSocket.getInputStream());

out = new PrintWriter(theSocket.getOutputStream( ));

while (true) {
  Object o = ois.readObject();

  File file = new File(o.toString());

  if(file.isDirectory())
    File Dir = new File("new/").mkdir();
  if(!file.isDirectory()){
    FileOutputStream fos = new FileOutputStream(o.toString());    

    do {  
      o = ois.readObject();
      bytesRead = (Integer) o;
      o = ois.readObject();  
      buffer = (byte[])o;  

      fos.write(buffer, 0, bytesRead);  
    }
    while (bytesRead == BUFFER_SIZE);  
    fos.close(); 
  }
} 
```

它不显示任何错误，而是在客户端创建一个名称为匿名的文件（服务器端的文件夹）。请告诉我我的代码有什么问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T13:40:13.890

我认为（部分）你的答案是递归。有几种方法可以做到这一点。一种是发送 bytesRead 作为目录的 -1 或 NULL 并在客户端进行递归，另一种，我将在下面展示（有点低效）是发送文件的相对路径并根据需要创建目录客户端。

**服务器端：**

```
void processFile(File file, String path)
{
  if (file.isDirectory())
  {
    File[] children = file.listFiles();
    for (File child : children)
    {
      all.add(child);
      processFile(child, path + file.getName() + "/");
    }
  }
  else
  {
    oos.writeObject(path + child.getName());
    FileInputStream fis = new FileInputStream(child);  
    while ((bytesRead = fis.read(buffer)) > 0)
    {  
      oos.writeObject(bytesRead);  
      oos.writeObject(buffer);  
    }
    oos.writeObject(BUFFER_SIZE);
  }
} 
```

`processFile(file, "")`用or调用`processFile(file, "/")`。

在通话后说一些类似`oos.writeObject("")`的话，并在客户端进行检查，类似于`name.length() == 0`知道何时停止。

**客户端：**

```
while (true)
{
  String name = (String)ois.readObject();
  if (name.length() == 0) break;
  // "/new/" is the absolute path of the directory where you want all these files to be created
  name += "/new/";

  File dir = new File(name.substring(0, name.lastIndexOf('/')));
  if (!dir.exists())
    dir.mkdirs();

  FileOutputStream fos = new FileOutputStream(new File(name));    

  bytesRead = (Integer) ois.readObject();
  while (bytesRead != BUFFER_SIZE)
  {  
    buffer = (byte[])ois.readObject();
    fos.write(buffer, 0, bytesRead);  
    bytesRead = (Integer) ois.readObject();
  }
  fos.close(); 
} 
```

# android - 从 DialogFragment (DatePicker) 检索和设置数据

> ID：14024921
> 
> 赞同：3
> 
> 时间：2012-12-24T19:10:27.750
> 
> 标签：android, android-dialogfragment

当我按下活动上的按钮时，会调用我的 DialogFragment 类。我希望通过此 DialogFragment 设置的日期显示在按钮文本上。FindViewById 拒绝被类识别。

我发现了一个[类似的问题](https://stackoverflow.com/questions/6495898/findviewbyid-in-fragment-android)，但我无法将其与我的案例联系起来。

代码：

1.  调用对话片段的按钮：

    ```
    public void datepicker(View v) {
        DialogFragment newFragment = new DatePickerFragment();
        newFragment.show(getFragmentManager(), "datePicker"); 
    } 
    ```

2.  对话片段代码：

    ```
    public class DatePickerFragment extends DialogFragment implements
        DatePickerDialog.OnDateSetListener {

        @Override
        public Dialog onCreateDialog(Bundle savedInstanceSateate) {

            final Calendar c = Calendar.getInstance();
                int year = c.get(Calendar.YEAR);
                int month = c.get(Calendar.MONTH);
                int day = c.get(Calendar.DAY_OF_MONTH);

                return new DatePickerDialog(getActivity(), this, year, month, day);
            }

            public void onDateSet(DatePicker view, int year, int month, int day) {
                // Do something with the date chosen
            }
        }
    } 
    ```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-24T19:23:27.040

在 DialogFragment 中负责在用户设置日期时收到通知的方法中，执行此操作

```
Button activityButton = (Button)getActivity().findViewById(R.id.myButton);
activityButton.setText (myDate); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-16T04:58:11.113

为 DatePicker 片段创建类：

```
 public class SelectDateFragment extends DialogFragment implements
                                     DatePickerDialog.OnDateSetListener {
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {

            Calendar now = Calendar.getInstance();
            year = now.get(Calendar.YEAR);
            month = now.get(Calendar.MONTH);
            day = now.get(Calendar.DATE);

         return new DatePickerDialog(getActivity(), this, year, month, day);
    }

    public void onDateSet(DatePicker view, int year, int month, int day) {
        orderDateEditText.setText(year + "-" + (month + 1) + "-" + day);
    }
} 
```

**单击ImageButton**时调用此片段：

```
 /** Create DatePicker dialog on click of OrderDateEditText **/
   orderDatePickerButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            DialogFragment newFragment = new SelectDateFragment();
            newFragment.show(getFragmentManager(), "DatePicker");
        }
    }); 
```

在**Month**中有加 1，因为 DatePicker 默认将一月到十二月的月份从 0 到 11。

谢谢..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T19:22:18.963

这是一个很好的模式：

1.  在您的对话框中创建一个侦听器接口以处理对话框中的相关按钮按下
2.  在启动活动中实现它
3.  当用户按下“okay”或“cancel”时，调用监听器方法
4.  在监听器的 impl 中做任何你需要做的事情来更新活动的视图

就像是，

```
class MyDialogFragment extends DialogFragment implements DialogInterface.OnClickListener {
  static interface Listener {
    void onOkay(MyObject result);
    void onCancel();
  }
  ...

  @Override
  public Dialog onCreateDialog(Bundle savedInstanceState) {
    ...

    // set this as a listener for ok / cancel buttons
    return new AlertDialog.Builder(activity)...whatever...
        .setPositiveButton(R.string.ok, this)
        .setNegativeButton(R.string.cancel, this).create();
  }

  @Override
  public void onClick(DialogInterface dialog, int which) {
      if (which == DialogInterface.BUTTON_POSITIVE) {
          if (getActivity() instanceof Listener) {
              ((Listener)getActivity()).onOkay(...);
          }
      } else {
          if (getActivity() instanceof Listener) {
              ((Listener)getActivity()).onCancel();
          }
      }
  }
}

class MyActivity extends Activity implements MyDialogFragment.Listener {
  ...
  @Override
  public void onOkay(MyObject result) {
    // update activity view here with result
  }

  @Override
  public void onCancel() {
    // anything?
  }
} 
```

如果您的情况，传递给方法的“结果”`onOkay()`将是用户在对话框中选择的 Date 对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T19:13:11.957

A`Fragment`不是`View`. 如果要查找片段，请使用`findFragmentById`from `FragmentManager`。

# vb.net - 点击功能不起作用

> ID：14024923
> 
> 赞同：3
> 
> 时间：2012-12-24T19:10:36.960
> 
> 标签：vb.net

我有一个我坚持的小项目。我正在尝试创建一个应用程序来创建雅虎电子邮件帐户。代码的问题在于点击操作会生成以下错误：“看起来创建您的帐户时遇到了一些问题。请花点时间查看您的答案。” 但是当我手动单击 webbrowser 控件时，它可以正常进入下一页。

```
Public Class Form1
    Dim _maryFirst() As String
    Dim _maryLast() As String
    Dim _maryZip() As String
    Dim _mstrPass As String
    Private Sub btnSignup_Click(sender As Object, e As EventArgs) Handles btnSignup.Click
        WebBrowser1.Navigate("https://eu.edit.yahoo.com/registration")
        WebBrowser1.ScriptErrorsSuppressed = True
        _mstrPass = RandomString(10)
    End Sub

    Private Sub WebBrowser1_DocumentCompleted(ByVal sender As System.Object, ByVal e As Windows.Forms.WebBrowserDocumentCompletedEventArgs) Handles WebBrowser1.DocumentCompleted
        Dim strLastname As String
        WebBrowser1.ScriptErrorsSuppressed = True
        strLastname = _maryLast(CInt(Int((2323 * Rnd()))))
        With WebBrowser1.Document
            If .Url.AbsoluteUri = "https://na.edit.yahoo.com/registration?.pd=&intl=us&origIntl=&done=&src=&last=&partner=yahoo_default&domain=&yahooid=&lang=en-US" Then
                .GetElementById("firstname").SetAttribute("value", _maryFirst(CInt(Int((810 * Rnd())))))
                .GetElementById("secondname").SetAttribute("value", strLastname)
                .GetElementById("yahooid").SetAttribute("value", strLastname & CInt(Int((9999 * Rnd()) + 1001)))
                .GetElementById("password").SetAttribute("value", _mstrPass)
                .GetElementById("passwordconfirm").SetAttribute("value", _mstrPass)
                .GetElementById("mm").SetAttribute("value", CInt(Int((12 * Rnd()) + 1)))
                .GetElementById("dd").SetAttribute("value", CInt(Int((25 * Rnd()) + 1)))
                .GetElementById("yyyy").SetAttribute("value", CInt(Int(((1980 - 1950) * Rnd()) + 1950)))
                .GetElementById("gender").SetAttribute("value", "f")
                .GetElementById("postalcode").SetAttribute("value", _maryZip(CInt(Int(29469 * Rnd()))))
                .GetElementById("IAgreeBtn").InvokeMember("click")
            End If
        End With
    End Sub
    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        _maryFirst = IO.File.ReadAllLines(Application.StartupPath() & "\firstnames.txt")
        _maryLast = IO.File.ReadAllLines(Application.StartupPath() & "\lastnames.txt")
        _maryZip = IO.File.ReadAllLines(Application.StartupPath() & "\zip.txt")

    End Sub

    Private Shared Function RandomString(cb As Integer) As String

        Randomize()
        Dim rgch As String
        rgch = "abcdefghijklmnopqrstuvwxyz"
        rgch = rgch & UCase(rgch) & "0123456789"
        RandomString = ""
        ' ReSharper disable NotAccessedVariable
        Dim i As Long
        ' ReSharper restore NotAccessedVariable
        For i = 1 To cb
            RandomString = RandomString & Mid$(rgch, Int(Rnd() * Len(rgch) + 1), 1)
        Next

    End Function

End Class 
```

注释掉

```
.GetElementById("IAgreeBtn").InvokeMember("click") 
```

然后运行该程序并单击网络浏览器控件中的“创建我的帐户”按钮将完成该过程的第一页。这告诉我上面的代码行存在问题，它的工作方式与手动单击按钮的方式不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T04:16:28.633

根据代码，问题可能是 Web 浏览器控件和按钮代码针对 yahoo 的两种不同语言环境进行操作：Web 浏览器使用 na，而按钮使用 eu。

# html - HTML 电子邮件未显示完整的背景图像高度

> ID：14024925
> 
> 赞同：1
> 
> 时间：2012-12-24T19:10:58.350
> 
> 标签：html, css

只有图像的顶部显示在 HTML 电子邮件中。我在 Rails 3 中使用 ActionMailer 发送此内容。如何获得要显示的图像的全长？

```
<!DOCTYPE html>
<html>
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
  </head>
  <body>
        <table style="background-repeat: no-repeat; background-size: 100% 100%;" width="100%" height="100%" border="0" cellspacing="0" cellpadding="20" background="https://s3.amazonaws.com/mybucket/image.png">
                <tr><td></td></tr>
        </table>
  </body>
</html> 
```

对此的任何想法都会很棒。我只想让 image.png 的全部内容显示在电子邮件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T19:26:43.650

设置表格的高度等于图像的高度。只是让您知道，并非所有电子邮件客户端都支持背景图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T19:15:02.233

添加到您的 html 和 body 标签`style="height: 100%"`

或者

`style="height: 550px"`将 html 标记设置为图像和正文标记的高度`style="height: 100%"`

[小提琴示例 100% 标签](http://jsfiddle.net/FJsSj/) [固定高度 html 标记的小提琴示例](http://jsfiddle.net/FJsSj/1/)

# jquery - jQuery 手风琴选项卡链接

> ID：14024927
> 
> 赞同：2
> 
> 时间：2012-12-24T19:11:23.737
> 
> 标签：jquery, tabs, accordion

我正在尝试链接到我的 jQuery 手风琴中的每个选项卡，但似乎无法使其正常工作......我对 javascript 不是很好，所以想知道是否有人可以提供帮助。

标题中的代码...

```
 <script>
  $(document).ready(function() {
    $("#accordion").accordion({collapsible: true, header: 'h3', navigation: true});
    $(".accordion:first").show(); // <-- ADD IT HERE, AFTER THIS FIRST HIDE() CALL!
    $("h3 a").click(function(event){
window.location.hash=this.hash;
});
  });
  </script> 
```

在 html 中：

```
 <li><a href="#global">Lorem ipsum</a></li> 
```

这应该打开以下选项卡：

```
 <h3><a href="#global">Lorem ipsum</a></h3> 
```

有任何想法吗...？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:16:27.700

对于任何有同样问题的人，我已经设法从代码上从头开始修复它并使用它：http: [//jsfiddle.net/tuando/CA8KV/1/](http://jsfiddle.net/tuando/CA8KV/1/)

```
$("#accordion").accordion();

$(".section-link").click(function (e) {
    e.preventDefault();
    $("#accordion").accordion("activate", $(this).parent().index());
}); 
```

​</p>

优秀和轻量级的解决方案。

感谢任何研究它的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T19:15:28.150

1.  您使用 id 而不是 class。
2.  使用 jquery 的 attr api 获取 href 值

请尝试使用

```
 $("#accordion:first").show()
  $("h3 a").click(function(event){
     window.location.hash=$(this).attr('href');
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T19:19:55.127

只需使用该[`active`选项](http://api.jqueryui.com/accordion/#option-active)来定义以 .. 开头的选项。

```
<script>
  $(document).ready(function() {
    $("#accordion").accordion({
        active:0,
        collapsible: true, 
        header: 'h3', 
        navigation: true
    });
    $("h3 a").click(function(event){
        window.location.hash=this.hash;
    });
  });
</script> 
```

# javascript - 如何在 d3js 中制作基本的柱形（垂直）图表？

> ID：14024930
> 
> 赞同：3
> 
> 时间：2012-12-24T19:12:00.223
> 
> 标签：javascript, d3.js

我正在尝试 d3js，但我的第一个基本柱形图（垂直条形图）工作时遇到了问题。我发现唯一有点难以理解的是缩放的东西。我想用标签制作 x 和 y 轴刻度，但我有以下问题：

首先是我的数据：

```
{
"regions":
["Federal","Tigray","Afar","Amhara","Oromia","Gambella","Addis Ababa","Dire Dawa","Harar","Benishangul-Gumuz","Somali","SNNPR "],
"institutions":
[0,0,34,421,738,0,218,22,22,109,0,456]
} 
```

1.  在 y 轴上，值在那里，但顺序相反。这是代码：

    var y = d3.scale.linear().domain([0, d3.max(data.institutions)]).range([0, height]);

然后我使用这个比例来创建一个 y 轴：

```
var yAxis = d3.svg.axis().scale(y).orient("left"); 
```

并将此轴添加到 svg 元素

```
svgContainer.append("g")
        .attr("class", "y axis")
        .call(yAxis)
            .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Institutions"); 
```

这里的问题是 y 轴从顶部的 0 和底部的 700 开始，这是可以的，但它应该是相反的顺序。

另一个问题是x轴。我想要一个序数比例，因为我想要输入的值在我上面的区域名称中。这就是我所做的。

```
var x = d3.scale.ordinal()
                    .domain(data.regions.map(function(d) { return d.substring(0, 2); }))
                    .rangeRoundBands([0, width], .1); 
```

然后是轴

```
var xAxis = d3.svg.axis()
                      .scale(x)
                      .orient("bottom"); 
```

最后将其添加到 svg 元素

```
svgContainer.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate( 0," + height + ")")
            .call(xAxis); 
```

这里的问题是出现了刻度线和标签，但它们的间距不均匀，并且与我正在绘制的矩形的中心不对应。这是完整的代码，因此您可以看到发生了什么。

```
$(document).ready(function(){

    d3.json("institutions.json", draw);

});

function draw(data){
    var margin = {"top": 10, "right": 10, "bottom": 30, "left": 50}, width = 700, height = 300;

    var x = d3.scale.ordinal()
                    .domain(data.regions.map(function(d) { return d.substring(0, 2); }))
                    .rangeRoundBands([0, width], .1);

    var y = d3.scale.linear()
              .domain([0, d3.max(data.institutions)])
              .range([0, height]);

    var xAxis = d3.svg.axis()
                      .scale(x)
                      .orient("bottom");    

    var yAxis = d3.svg.axis()
                      .scale(y)
                      .orient("left");  

    var svgContainer = d3.select("div.container").append("svg")
                           .attr("class", "chart")
                           .attr("width", width + margin.left + margin.right)
                           .attr("height", height + margin.top + margin.bottom)
                          .append("g")
                            .attr("transform", "translate(" +margin.left+ "," +margin.right+ ")");        

    svgContainer.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate( 0," + height + ")")
            .call(xAxis);

    svgContainer.append("g")
                  .attr("class", "y axis")
                  .call(yAxis)
                .append("text")
                  .attr("transform", "rotate(-90)")
                  .attr("y", 6)
                  .attr("dy", ".71em")
                  .style("text-anchor", "end")
                  .text("Institutions");

    svgContainer.selectAll(".bar")
      .data(data.institutions)
      .enter()
        .append("rect")
        .attr("class", "bar")
        .attr("x", function(d, i) {return i* 41;})
        .attr("y", function(d){return height - y(d);})
        .attr("width", x.rangeBand())
        .attr("height", function(d){return y(d);});

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T21:32:52.833

我把代码放到小提琴：http: [//jsfiddle.net/GmhCr/4/](http://jsfiddle.net/GmhCr/4/)

随意编辑它！我已经解决了这两个问题。

* * *

要修复倒置的 y 轴，只需交换 range 函数参数的值：

```
var y = d3.scale.linear().domain([0, d3.max(data.institutions)]).range([height, 0]); 
```

如果您更改比例，请不要忘记调整条的代码！

* * *

可以在此处找到条形图和 x 轴之间不匹配的来源：

```
var x = d3.scale.ordinal()
    .domain(data.regions.map(function(d) {
        return d.substring(0, 2);}))
    .rangeRoundBands([0, width], .1);

svgContainer.selectAll(".bar")
  .data(data.institutions)
  .enter()
    .append("rect")
    .attr("class", "bar")
    .attr("x", function(d, i) {return i* 41;})
    .attr("y", function(d){return height - y(d);})
    .attr("width", x.rangeBand())
    .attr("height", function(d){return y(d);}); 
```

您将 rangeRoundBands 的填充指定为 0.1，但在计算条形的 x 和宽度值时忽略填充。例如，填充为 0 时是正确的：

```
var x = d3.scale.ordinal()
    .domain(data.regions.map(function(d) {
        return d.substring(0, 2);}))
    .rangeRoundBands([0, width], 0);

svgContainer.selectAll(".bar").data(data.institutions).enter().append("rect")
    .attr("class", "bar")
    .attr("x", function(d, i) {
        return i * x.rangeBand();
    })
    .attr("y", function(d) {
        return y(d);
    })
    .attr("width", function(){
        return x.rangeBand();
    })
    .attr("height", function(d) {
        return height -y(d);
    }); 
```

填充决定了为填充保留了多少域。当使用 700 的宽度和 0.1 的填充时，恰好 70 像素用于填充。这意味着您必须将 70 / data["regions"].length 像素添加到每个条形的 x 值，以使其与填充一起工作。

# objective-c - ARC 试图保留无效内存

> ID：14024931
> 
> 赞同：0
> 
> 时间：2012-12-24T19:12:17.573
> 
> 标签：objective-c, ios, automatic-ref-counting

全部，当框架调用 objc_retain 时，将引发 EXC_BAD_ACCESS 异常。任何追踪问题的帮助或提示将不胜感激。让我知道是否应该提供更多代码。

问题领域：

```
- (SCUuidNode*)addUUIDNode:(NSString*)uuid
{
    const char *uuidCStr = [uuid cStringUsingEncoding:NSASCIIStringEncoding];
    SCUuidNode *uuidNode = [[SCUuidNode alloc] initWithNode:create_uuid_node(uuidCStr)];
    composite_node_append_child((Node*)[self node], [uuidNode node]);

    return uuidNode; # Exception is being thrown right around here.
} 
```

...

```
Composite *paymentNode = [SCCompositeNode createPriceNode:^(SCCompositeNode *cnode) {
    SCUuidNode *uuidNode = [cnode addUUIDNode:buyerDeviceId];
    SCIntNode *buyerIdNode = [cnode addIntNode:[buyerUserId integerValue]];
}]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T05:09:56.507

As rob and Space Dust kindly pointed out, adding zombies helped track down the memory bug to an initializer.

# android - NDK 不生成 Arm v7 库

> ID：14024938
> 
> 赞同：0
> 
> 时间：2012-12-24T19:12:56.400
> 
> 标签：android, android-ndk

我正在使用Android NDK r8d 版本，我运行`ndk-build`但我的工具链似乎没有生成`armeabi-v7a`目录，它仍然只生成`armeabi`目录。

输出说

```
Gdbserver      : [arm-linux-androideabi-4.6] libs/armeabi/gdbserver 
```

这表明二进制文件仅针对 armeabi 编译。

这是我的`Android.mk`文件。

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
APP_ABI := armeabi armeabi-v7a
APP_PLATFORM := android-9
LOCAL_LDLIBS := -llog
LOCAL_MODULE := test
LOCAL_SRC_FILES := \
    FileOne.cpp \
    FileTwo.cpp \
    FileThree.cpp \

LOCAL_NEON_CFLAGS := -mfloat-abi=softfp -mfpu=neon -march=armv7
include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T08:20:37.983

`APP_ABI`并且`APP_PLATFORM`选项应该在`Application.mk`文件中，而不是`Android.mk`（检查`docs/APPLICATION-MK.html`NDK 文件夹中的文件）。

# c# - 如何在 C# 中将音频流式传输到扬声器

> ID：14024940
> 
> 赞同：3
> 
> 时间：2012-12-24T19:13:06.433
> 
> 标签：c#, arrays, audio, stream, byte

我希望能够将字节数组直接流式传输到我的扬声器，以便我可以创建声音。

我不知道从哪里开始。

是 DLL 导入还是内存流？

我想发送这样的数组：

```
byte[] bt = {12,32,43,74,23,53,24,54,234,253,153};// example array 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T19:18:51.553

您可以使用[`SoundPlayer`](http://msdn.microsoft.com/en-us/library/system.media.soundplayer.aspx)并从 a 播放[`MemoryStream`](http://msdn.microsoft.com/en-us/library/system.io.memorystream.aspx)：

```
byte[] bt = {12,32,43,74,23,53,24,54,234,253,153};// example array
var ms = new MemoryStream(bt);
var sound = new System.Media.SoundPlayer();
sound.Stream = ms;
sound.Play(); 
```

# jquery - 如果鼠标悬停检查

> ID：14024943
> 
> 赞同：1
> 
> 时间：2012-12-24T19:13:25.183
> 
> 标签：jquery

我想检查鼠标悬停和鼠标离开状态，并在鼠标悬停在元素上或不在时执行某些功能。我尝试过这样的事情，但没有奏效。

```
if($('#someid').is(':hover')){ DO STUFF OVER }else{ DO STUFF ELSE } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T19:17:35.800

我建议：

```
$('#someid').hover(
    function(){
        // do stuff when mouseover
    },
    function(){
        // do stuff on mouseout.
    }); 
```

参考：

*   [`hover()`](http://api.jquery.com/hover/).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T19:17:23.427

试试这个

```
$('#someid').on('mouseenter', function(e){
    // do stuff when mouse is over an elemet
}).on('mouseleave', function(e){
    // do stuff when mouse left the elemet
}); 
```

请参阅[jQuery.on()](http://api.jquery.com/on/)和[事件](http://api.jquery.com/category/Events/?rdfrom=http://docs.jquery.com/mw/index.php?title=API/1.3/Events&redirect=no)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T19:19:14.957

写这个

```
$('#someid').hover(
function(){
     DO STUFF OVER 
},
function(){
    DO STUFF ELSE 
}
); 
```

祝你好运

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T19:20:17.157

您可以使用`.hover`简写的功能`.mouseenter(handlerIn).mouseleave(handlerOut);`

这是一个例子，这是一个[演示的小提琴](http://jsfiddle.net/)：

```
​$('#a').hover(function(){
  $(this).addClass('hover');
},function(){
  $(this).removeClass('hover');  
});​​​​​​​ 
```

# c# - 在图像掩码函数中使用 BitmapData 访问冲突

> ID：14024949
> 
> 赞同：1
> 
> 时间：2012-12-24T19:14:07.697
> 
> 标签：c#, pointers, access-violation, bitmapdata, unsafe

我编写了这个函数的一个版本，它采用灰度位图作为掩码和源位图，并输出一个应用了掩码的位图，`SetPixel`但`GetPixel`它非常慢，所以我尝试使用 BitmapData 和指针算法编写一个，但我得到了访问冲突，我不知道为什么。

我`AccessViolationException`在写入结果位图中的像素时得到一个 - 我认为这是由不正确的索引引起的，但我看不出我哪里出错了。

```
public static Bitmap ApplyAlphaMask2(Bitmap source, Bitmap mask)
{
    if (source.Size != mask.Size)
    {
        throw new NotImplementedException("Applying a mask of a different size to the source image is not yet implemented");
    }
    Bitmap result = new Bitmap(source.Width, source.Height);
    unsafe
    {
        BitmapData source_data = source.LockBits(new Rectangle(0, 0, source.Width, source.Height), ImageLockMode.ReadWrite, PixelFormat.Format32bppArgb);
        BitmapData mask_data = mask.LockBits(new Rectangle(0, 0, mask.Width, mask.Height), ImageLockMode.ReadWrite, PixelFormat.Format32bppArgb);
        BitmapData result_data = result.LockBits(new Rectangle(0, 0, result.Width, result.Height), ImageLockMode.ReadWrite, PixelFormat.Format32bppArgb);
        for(int column = 0; column < source.Height; column++)
        {
            Int32* source_column_ptr = (Int32*)source_data.Scan0 + (column * Math.Abs(source_data.Stride));
            Int32* mask_column_ptr = (Int32*)mask_data.Scan0 + (column * Math.Abs(mask_data.Stride));
            Int32* result_column_ptr = (Int32*)result_data.Scan0 + (column * Math.Abs(mask_data.Stride));
            for (int row = 0; row < source.Width; row++)
            {
                Color source_color = Color.FromArgb(source_column_ptr[row]);
                Color mask_color = Color.FromArgb(mask_column_ptr[row]);
                Int32* result_pixel_ptr = &result_column_ptr[row];
                Color result_color = Color.FromArgb((int)(255.0f * mask_color.GetBrightness()), source_color);
                *result_pixel_ptr = result_color.ToArgb(); //Access violation!
            }
        }
        source.UnlockBits(source_data);
        mask.UnlockBits(mask_data);
        result.UnlockBits(result_data);
    }
    return result;
} 
```

任何帮助，将不胜感激。

编辑：这并不总是发生在同一列上，尽管该行似乎总是为 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T21:06:17.540

顺便说一句，你的变量名列**和**行**是**错误的......需要交换它们！
尝试以下修改。**未测试！**：

```
 public static Bitmap ApplyAlphaMask2(Bitmap source, Bitmap mask)
    {
        int x, y;
        Color mask_color;

        if (source.Size != mask.Size)
        {
            throw new NotImplementedException("Applying a mask of a different size to the source image is not yet implemented");
        }
        Bitmap result = new Bitmap(source.Width, source.Height, PixelFormat.Format32bppArgb);
        BitmapData source_data = source.LockBits(new Rectangle(0, 0, source.Width, source.Height), ImageLockMode.ReadOnly, PixelFormat.Format32bppArgb);
        BitmapData mask_data = mask.LockBits(new Rectangle(0, 0, mask.Width, mask.Height), ImageLockMode.ReadOnly, PixelFormat.Format32bppArgb);
        BitmapData result_data = result.LockBits(new Rectangle(0, 0, result.Width, result.Height), ImageLockMode.WriteOnly, PixelFormat.Format32bppArgb);
        unsafe
        {
            Int32* source_line_ptr = (Int32*)source_data.Scan0;
            Int32* mask_line_ptr = (Int32*)mask_data.Scan0;
            Int32* result_line_ptr = (Int32*)result_data.Scan0;
            for (y = 0; y < source.Height; y++)
            {
                for (x = 0; x < source.Width; x++)
                {
                    mask_color = Color.FromArgb(mask_line_ptr[x]);
                    result_line_ptr[x] = ((int)(mask_color.GetBrightness() * 255.0f) << 24) | (source_line_ptr[x] & 0xFFFFFF);
                }
                source_line_ptr += source_data.Stride;
                mask_line_ptr += mask_data.Stride;
                result_line_ptr += result_data.Stride;
            }
            source.UnlockBits(source_data);
            mask.UnlockBits(mask_data);
            result.UnlockBits(result_data);
        }
        return result;
    } 
```

我不确定你是否会得到预期的结果，因为 GDI+ 存在灰度图像问题（如果我没记错的话，如果你将*LockBits*应用于灰度图像，它会返回一个 16 灰度的图像，而不是 256）。
另一件事是如果你想优化你的代码，你不应该在循环中声明局部变量。**最后，我认为Color.GetBrightness**
的返回值不准确（对此不确定）。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T21:07:20.650

您使用`mask_data.Stride`了两次（复制粘贴错误）。

你为什么要`Math.Abs`跨步使用？步幅是否为负？这可能意味着图像是从下到上编码的，并且采用 abs 值会破坏此信息。

* * *

编辑：问题在这里：

```
(Int32*)source_data.Scan0 + (column * Math.Abs(source_data.Stride)) 
```

您添加`(column * Math.Abs(source_data.Stride))`到 an`int*`这意味着您获得了所需偏移量的 4 倍。您可能打算：

```
(Int32*)((byte*)source_data.Scan0 + (column * Math.Abs(source_data.Stride))) 
```**

# jquery - jQuery-File-Upload 和 Spring MVC IE9 不起作用

> ID：14024952
> 
> 赞同：1
> 
> 时间：2012-12-24T19:14:24.543
> 
> 标签：jquery, spring-mvc, file-upload

我使用[jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)和 Spring MVC 之类的服务器部分。我尝试[了这个例子](https://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin)，但它在 IE 9 浏览器中不起作用。它对我说：“您要保存还是打开对象”

客户端就像在示例中一样：

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>jQuery File Upload Example</title>
</head>
<body>
<input id="fileupload" type="file" name="files[]" data-url="/fileUpload/1" multiple>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="js/vendor/jquery.ui.widget.js"></script>
<script src="js/jquery.iframe-transport.js"></script>
<script src="js/jquery.fileupload.js"></script>
<script>
$(function () {
    $('#fileupload').fileupload({
        dataType: 'json',
        done: function (e, data) {
            $.each(data.result.files, function (index, file) {
                $('<p/>').text(file.name).appendTo(document.body);
            });
        }
    });
});
</script>
</body> 
</html> 
```

服务器是：

```
@RequestMapping(value = "fileUpload/{id}", method = RequestMethod.POST)
    @ResponseBody
    public FileUploadResultDTO upload(MultipartFile file,
                                      @PathVariable Long id,
                                      Locale locale,
                                      HttpServletRequest request) {
        FileUploadResultDTO resultDTO = new FileUploadResultDTO();
        // Logic saving file and return back response like object
        return resultDTO;
    }

public class FileUploadResultDTO {
    private Long photoId;
    private String pathToPhoto;
    private String pathToSmallPhoto;

// getters/setters
} 
```

它适用于除 IE 以外的所有浏览器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-31T08:27:54.650

我遇到了完全相同的问题，并设法通过更改方法以始终生成“文本/纯文本”内容而不是“应用程序/json”来解决它。我通过添加 'produces="text/plain"' 来请求映射注释、将返回值类型更改为 String 并使用 Jackson 手动将对象转换为 Json 来做到这一点。

使用您的代码，这看起来像这样：

```
@RequestMapping(value = "fileUpload/{id}", method = RequestMethod.POST, produces="text/plain")
@ResponseBody
public String upload(MultipartFile file,
                                  @PathVariable Long id,
                                  Locale locale,
                                  HttpServletRequest request) {
    FileUploadResultDTO resultDTO = new FileUploadResultDTO();
    // Logic saving file and return back response like object
    return Jackson.toJsonString(resultDTO);
} 
```

这似乎适用于 IE9（使用 iframe 传输）和不使用的现代浏览器，但似乎有点 hackish，因为正确的类型应该是“application/json”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T19:55:50.023

你的问题听起来像这样：

[IE 提示从服务器打开或保存 json 结果](https://stackoverflow.com/questions/6114360/stupid-ie-prompts-to-open-or-save-json-result-which-comes-from-server)

希望能帮助到你

# python - 从 python 内部编写 bash 脚本

> ID：14024957
> 
> 赞同：1
> 
> 时间：2012-12-24T19:14:50.310
> 
> 标签：python, linux

我有一个从命令行运行的小 test.sh 脚本，`./test.sh`它会要求我输入我输入的 2 个问题，然后循环直到我`ctrl-c`退出。

我想编写一个可以运行我的 Python 小脚本`test.sh`，并从我在 Python 中设置的变量 var1 和 var2 输入脚本问题的输入。

我还想要另一个变量 var3，它循环 x 长并运行我的 test.sh，然后结束它，然后根据 var3 的值每 x 分钟重新启动一次

我写了这段代码，但它似乎没有`test.sh`在它启动后将命令传递给我：

```
import os
os.system('./test.sh arg1')
time.sleep(10)
sh('input answer 1')
time.sleep(5)
sh('input answer 2') 
```

目前，我的代码已基于此线程进行了更新，如下所示：

```
#!/usr/bin/env python

import pexpect
import sys
import os
child = pexpect.spawn ('./test.sh -arg1')
child.expect ('some expected output from the .sh file')
child.expect ('more expected output from the .sh file')
child.expect ('(?i)Enter Username:')
child.sendline ('myusername')
child.expect ('(?i)Enter Password:')
child.sendline ('mypassword')
# sys.stdout.write (child.after)
# sys.stdout.flush()
time.sleep(30)
child.sendcontrol('c')
child.close()
print 'Goodbye' 
```

--fixed-- 现在问题是我的超时或睡眠被打断了，可能是我的 .sh 脚本的输出。当我在未注释 timeout 或 time.sleep 的情况下运行此脚本时，它要么没有影响，要么直接进入我的 child.close() 并结束程序，要么挂断 child.sendline ('mypassword')出于某种原因，我卡在了 .sh 脚本的密码提示符中……也许它并没有真正卡在那里，因为我无法与之交互。 - 固定的 -

一旦我让脚本暂停 30 秒（或 x），那么我剩下要做的就是让整个事情循环 x 次。最后，我需要添加错误检查，因为 .SH 以不同的文本字符串响应，表明我需要立即再次运行脚本。

非常感谢大家的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T20:03:10.027

使用[`pexpect`](http://www.noah.org/wiki/pexpect)：

```
import pexpect  # $ pip install pexpect

while var3:  # start ./test.sh again
    output = pexpect.run('./test.sh arg1', 
        timeout=x,  # terminate child process after x seconds
        events={r'(?i)question 1': var1,  # provide answers
                r'(?i)question 2': var2}) 
```

注意：`subprocess`由于缓冲问题，基于 - 的解决方案可能更复杂，并且可能需要额外`pty`的`select`模块、[示例](https://stackoverflow.com/a/12471855/4279)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T19:55:45.420

```
import subprocess
p = subprocess.Popen('./test.sh arg1', stdin=subprocess.PIPE, stdout=subprocess.PIPE)

time.sleep(10)
p.stdin.write('input answer 1') #Probably adding \n is necessary
time.sleep(5)
p.stdin.write('input answer 2') #Probably adding \n is necessary

print p.stdout.readline() # To print one-line output of the shell script 
```

# log4j - 在同一个类加载器下运行的 log4j jar

> ID：14024962
> 
> 赞同：0
> 
> 时间：2012-12-24T19:15:42.450
> 
> 标签：log4j, classloader

我有 log4j 的问题，我有几个 jar，每个 jar 应该写入不同的日志位置 - 但它没有发生，日志被一起写入所有 jar 的相同位置。

我扩展了 RollingFileAppender 类并覆盖了 setFile 方法。

使用相同的类加载器加载罐子。

艾做错了什么？

```
public class CustomRollingFileAppender extends RollingFileAppender {
   // some additional methods here...

public synchronized void setFile(String fileName, boolean append, boolean bufferedIO, int bufferSize) throws IOException {
    String logFileName = CommonJarClass.getPluginLogRoot() + File.separatorChar + fileName;
    super.setFile(logFileName , append, bufferedIO, bufferSize);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T19:27:31.030

> 使用相同的类加载器加载罐子

是战争项目吗？你正在加载所有的罐子？

> 每个 jar 都应该写入不同的日志位置

每个 jar 都配置为使用您的 CustomRollingfileAppender ？

# c# - 通过代码触发按钮点击

> ID：14024963
> 
> 赞同：15
> 
> 时间：2012-12-24T19:15:43.860
> 
> 标签：c#, events

因此，单击“添加播放器”按钮时，我有以下代码

```
private void addPlayerBtn_Click_1(object sender, EventArgs e)
{
    //Do some code
} 
```

但是，我想从我的 SDK 触发此代码。这是我尝试过的

```
private void command()
{       
    addPlayerBtn_Click_1(object sender, EventArgs e);          
} 
```

我一输入就收到很多错误

```
 addPlayerBtn_Click_1(object sender, EventArgs e) 
```

有人可以告诉我如何编写代码，以便我可以通过将其写入代码来触发事件吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-24T19:17:22.490

其一，调用方法时，不声明参数的类型，只声明值。

所以这：

```
addPlayerBtn_Click_1(object sender, EventArgs e); 
```

应该

```
addPlayerBtn_Click_1(sender, e); 
```

现在，您必须声明`sender`and `e`。如果您有要传递的事件参数，这些可以是实际对象，或者：

```
addPlayerBtn_Click_1(null, EventArgs.Empty); 
```

以上可以在 WinForms 或 ASP.NET 中使用。对于 WinForms，您还可以调用：

```
addPlayerBtn.PerformClick(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-24T19:17:35.677

当你调用一个函数时，你提供的是实际参数，它们是值，而不是形式参数，它们是类型和参数名称。

改变

```
addPlayerBtn_Click_1(object sender, EventArgs e); 
```

到

```
addPlayerBtn_Click_1(addPlayerBtn, EventArgs.Empty); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T19:19:36.017

```
addPlayerBtn_Click_1(null, null); 
```

如果您不需要 和 中的信息，则此方法`sender`有效`e`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-24T19:20:08.580

您没有使用发送者或事件，因此您可以像这样直接调用该函数：

```
addPlayerBtn_Click_1(null, null); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-11-05T16:18:58.887

```
private void command()
 {     
   addPlayerBtn.PerformClick();
 } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-24T19:17:38.390

```
addPlayerBtn_Click_1(object sender, EventArgs e); 
```

应该：

```
addPlayerBtn_Click_1(this, new EventArgs()); 
```

# javascript - ng-class 弄乱了类的顺序

> ID：14024966
> 
> 赞同：0
> 
> 时间：2012-12-24T19:16:51.137
> 
> 标签：javascript, angularjs, ng-class

我有一些非常简单的 Angular 代码，看起来像这样......

```
<div ng-repeat="message in data.messages" ng-class="'conversationCard-' + 
message.type"></div> 
```

它可以工作，但结果输出看起来像这样......

```
<div ng-repeat="message in data.messages" ng-class="'conversationCard-' + 
message.type" class="ng-scope conversationCard-phone"></div> 
```

问题是我的课程现在以 ng-scope 开始，它破坏了我的 css 选择器，看起来像这样..

```
[class^="conversationCard"] 
```

有没有办法让角度来删除 ng-scope，或者至少把它放在类声明的末尾？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T21:34:10.700

如果您想通过 css 访问该类并不重要：

```
div.conversationCard-phone{
    //css stuff
} 
```

我不确定你为什么要使用在你的css中为类指定属性的能力，我描述的方法是这样做的常用方法。您能否详细说明为什么要使用属性选择器？

**编辑**

将您的 html 更改为

```
<div ng-repeat="message in data.messages" ng-class="message.type" class="conversationCard"></div> 
```

这样处理就变成了

```
<div ng-repeat="message in data.messages" ng-class="message.type" class="ng-scope conversationCard phone"></div> 
```

所以在你的CSS中你可以做

```
div.conversationCard{
    //css stuff
} 
```

如果你想隔离电话之一：

```
div.conversationCard.phone{
    //css stuff
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-24T21:41:08.877

使用 ng-class 的 void 怎么样，就使用这样的类

```
<div ng-repeat="message in data.messages" class="conversationCard-{{message.type}}"></div> 
```

# ios - 调用 prepareForSegue 而不是 ib 按钮

> ID：14024974
> 
> 赞同：1
> 
> 时间：2012-12-24T19:17:54.083
> 
> 标签：ios, ibaction

我是IOS的新手，所以请回答我的问题:)。我有一个填充了 UIButtons 的动态 UITable。每行两个按钮。按钮显示为图片。在传递到下一个视图之前，我需要保留所选按钮的数据。按钮有标签（在 UITableView 中填充时附加）。我的问题是程序的正常运行需要调用 -(IBAction)firstButtonTag:(id)sender; 或 -(IBAction)secondButtonTag:(id)sender；（用于在单例类中存储标记）并且仅调用 prepareForSegue 方法，但目前该逻辑仅适用于第一列中的按钮，第二列中的按钮称为 prepareForSegue （不调用 -(IBAction)secondButtonTag:(id)发件人；）

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T19:40:23.697

很难理解您需要什么，但对我来说，您似乎只需要在按下按钮之前进行一些调用。

只需在按钮操作处理程序中以编程方式执行 segue：

```
-(IBAction)buttonPressed:(id)sender
{
  ... // do your stuff here
  [self performSegueWithIdentifier:@"segueId" sender:nil];
} 
```

您还需要从按钮中删除触发的 segue 并添加手动 segue 并设置其标识符。

# gwt - 12 小时格式的 GWT DateTimeFormat 时间？

> ID：14024976
> 
> 赞同：0
> 
> 时间：2012-12-24T19:18:07.750
> 
> 标签：gwt

我想打印一个格式化的时间（客户端），我正在使用以下内容：

```
import java.util.Date;

...

Date date = new Date(); 
DateTimeFormat.getFormat(PredefinedFormat.DATE_SHORT).format(date) 
```

这会在我的浏览器中打印一些内容，例如：

```
14:13 
```

我希望这尊重我当前的语言环境（en_US）。我不确定为什么它以 24 小时格式打印，认为使用当前语言环境将是默认行为。我们是否必须做一些特别的事情才能让格式化程序使用当前的语言环境？（在移动 safari 和最新版本的 Firefox 上尝试这个），

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T19:25:42.157

您需要在元标记或查询字符串中指定语言环境：

[https://developers.google.com/web-toolkit/doc/latest/DevGuideI18nLocale#LocaleSpecifying](https://developers.google.com/web-toolkit/doc/latest/DevGuideI18nLocale#LocaleSpecifying)

# javascript - json 反向引用

> ID：14024986
> 
> 赞同：0
> 
> 时间：2012-12-24T19:19:23.020
> 
> 标签：javascript, jquery, data-structures, tree

我有一个分层的 json 对象，我想遍历它并将父节点附加到每个元素。这就是我所做的

```
function attach_back_reference(hierarchy, parent){
    hierarchy.parent = parent;
    for(var i in hierarchy){
        if(jQuery.isPlainObject(hierarchy[i]))
            attach_back_reference(hierarchy[i], hierarchy);
    }
} 
```

但这给出了错误。`Maximum call stack size exceeded`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T19:24:57.477

既然你这样做了

```
for(var i in hierarchy){ 
```

添加属性后， will的`parent`一个值，因此您最终将孩子无限设置为自己的祖父母。`i``"parent"`

你可以看到这个

```
var o = {};
o.x = o;
for (var i in o) { alert(i); } 
```

哪个警报`"x"`。

将循环移动到顶部。

```
function attach_back_reference(hierarchy, parent){
    for(var i in hierarchy){
        if(jQuery.isPlainObject(hierarchy[i]))
            attach_back_reference(hierarchy[i], hierarchy);
    }
    hierarchy.parent = parent;
} 
```

或者，如果您只需要在较新的解释器上工作，您可以尝试使父属性不可枚举：[javascript defineProperty 使属性不可枚举](https://stackoverflow.com/questions/10269652/javascript-defineproperty-to-make-an-attribute-non-enumerable)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T19:21:21.250

你在那里有一个无限循环。

您将每个对象的父对象设置为自身。

# php - 替换外部页面上所有单词的站点

> ID：14024988
> 
> 赞同：-2
> 
> 时间：2012-12-24T19:19:34.567
> 
> 标签：php, javascript, jquery, html, xss

我想做这样的事情：http: [//www.degraeve.com/translator.php](http://www.degraeve.com/translator.php) 你可以在其中输入地址，然后显示页面，所有单词都替换为我选择的内容。

首先，我尝试使用简单的 iframe 和 jquery 来执行此操作，但很快发现由于跨站点脚本，它不起作用。

然后我尝试使用 ajax，它破坏了图像链接，但它应该以某种方式工作吗？

我是 php 的新手，所以如果有人能在这里指出我正确的方向，我将不胜感激！干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T19:45:50.163

只需获取感兴趣页面的内容并替换不在 HTML 标记、注释或 doctype 声明中的文本，然后输出生成的 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T20:00:55.313

同源[策略](http://en.wikipedia.org/wiki/Same_origin_policy)阻止您访问其他域。他们所做的是[用 PHP 阅读页面，](http://www.php.net/manual/en/function.file-get-contents.php#example-2303)然后吐出翻译。

# java - 纯 Java MyBatis 映射器？

> ID：14024990
> 
> 赞同：3
> 
> 时间：2012-12-24T19:19:45.737
> 
> 标签：java, spring, orm, ibatis, mybatis

我有一个使用 Mybatis (v3.0.5) 进行 OR/mapping 的项目。典型（功能）设置如下：

1.  要映射的 POJO -`Fruit`
2.  一个“MyBatis”映射器 XML 文件——`FruitMapper.xml`所有 SQL 查询的去向
3.  定义所有相同映射器方法的接口映射器 -`FruitMapper.java`
4.  具有接口映射器引用的 DAO -`FruitDao`
5.  MyBatis 配置文件 -`mybatis-config.xml`
6.  将所有内容与 Spring config XML 链接在一起 -`myapp-spring-config.xml`

示例实现：

```
public class Fruit {
    private String type = "Orange"; // Orange by default!

    // Getters & setters, etc. This is just a VO/POJO
    // that corresponds to a [fruits] table in my DB.
}

public interface FruitMapper {
    public List<Fruit> getAllFruits();
}

public class FruitDao {
    private FruitMapper mapper;

    // Getters & setters

    public List<Fruit> getAllFruits() {
        return mapper.getAllFruits();
    }
} 
```

FruitMapper.xml

```
<mapper namespace="net.me.myapp.FruitMapper">
    <select id="getAllFruits" resultSetType="FORWARD_ONLY">
        SELECT * FROM fruits
    </select>
</mapper> 
```

mybatis-config.xml

```
<configuration>
    <!-- Nothing special here. -->
</configuration> 
```

myapp-spring-config.xml：（这是我想要摆脱的）

```
<bean id="fruitDao" class="net.me.myapp.FruitDao">
    <property name="mapper" ref="fruitMapper" />
</bean>
<bean id="fruitMapper" class="org.mybatis.spring.mapper.MapperFactoryBean">  
    <property name="mapperInterface" value="net.me.myapp.FruitMapper" />
    <property name="sqlSessionFactory" ref="sqlSessionFactory" />
</bean>
<bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
    <property name="dataSource" ref="myDatasource" /> 
    <property name="configLocation" value="classpath:mybatis-config.xml" />
    <property name="mapperLocations" value="classpath:*Mapper.xml" />
</bean>
<bean id="myDatasource" class="org.springframework.jndi.JndiObjectFactoryBean" lazy-init="true">
    <property name="jndiName">
        <value>java:/comp/env/jdbc/our-mysql-database</value>
    </property>
</bean> 
```

这很好用。但是，我不是 spring 的忠实粉丝，我想知道如何实现我自己的纯 Java 版本，它是 Spring 配置文件中所有 bean 的功能。

所以我问：**我需要编写什么“胶水代码”/类才能正确实现`FruitMapper.java`，以便`FruitMapper.xml`在运行时绑定到？**这样每当我写：

```
FruitMapperDao dao = new FruitMapperDao();
FruitMapperImpl mapper = new FruitMapperImpl(); // <== this is what I need to implement here
dao.setMapper(mapper);

List<Fruit> allFruits = dao.getAllFruits(); 
```

...那么我应该得到`fruit`我的数据源中所有记录的列表吗？提前致谢！

### 更新

我还应该提到，鉴于上面的设置，我需要`mybatis.jar`在`mybatis-spring.jar`运行时类路径上。我想完全摆脱 Spring，并且不需要任何 Spring jar 或类来让我的纯 Java 解决方案工作！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T09:44:51.983

您需要获取一个`SqlSession`实例（例如命名`session`）并调用方法`session.getMapper(FruitMapper.class)`。您将获得一个已经实现映射器接口的对象，然后只需调用它的方法即可从数据库中获取数据。

PS你可以像这样在没有Spring的情况下获得SqlSession：

```
InputStream inputStream = Resources.getResourceAsStream("/mybatis-config.xml");
SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(inputStream);
SqlSession session = factory.openSession(); 
```

# scala - Intellij-idea 12 Scala 支持：它消耗了我几乎 300% 的 cpu 资源

> ID：14024993
> 
> 赞同：10
> 
> 时间：2012-12-24T19:20:10.590
> 
> 标签：scala, ide, intellij-idea, playframework-2.0, osx-leopard

我最近购买了最新版本的 Intellij idea（在他们提供 75% 的折扣期间），顺便说一句，这真的很棒。

我有一个问题：**scala 支持似乎被打破了**。我已经使用 SBT 插件安装了 scala 支持插件。我还安装了 Play!2 框架支持插件，但是当我从 IDE 中打开一个 scala 文件时，它消耗了我**几乎 300%**的 cpu 资源，我不知道如何解决这个问题。

有没有人在他们的 IDE 上遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T04:44:53.610

我也有同样的问题，但我可能会找到原因：给idea的内存太小了。那么idea总是在做gc。

怎么办：找到idea.vmoptions文件，将xms添加到1500m，现在它对我来说很好用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:41:25.790

I don't think this has anything to do with intelliJ, but rather Play! and Java.

I have idea 12 with play 2.0 plugin. I open the play project in IntelliJ and using the top command I see that java is consuming roughly 3-5% of CPU. If I build the project, that jumps up to 150-300% of CPU and then comes back down after the compiling is done.

Running the same project from the play console, it jumps to about 100% when I first open it, and then if I run `clean` and then `compile`, it jumps to 323% and then comes back down.

You may be able to improve performance by doing compilation from the play console instead of IntelliJ. Just run `clean`, then `compile`, then within IntelliJ you should syncronize the project (alt-ctl-i).

Also, wondering if the version of the jvm has something to do with it. Are you using the sun version or an open source one. IntelliJ recommends using the sun version.

here's my specs:

Idea 123.94, Scala plugin version 0.7.62, Play 2.0 Support 0.2.6, Play 2.0.4, Scala 2.9.1 java 1.6.0_37-b06, lenovo t410 i7 processor

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-21T17:06:38.747

在我的情况下，我将对象和类移动到不同的文件中，这很有帮助（但我在单个文件中没有很多 - 只有少数足以让 intellij 汗流浃背）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T18:44:25.670

我在 OS X 上使用 IntelliJ 12.0.1 时也遇到了同样的问题。它使用包含 Java、Groovy 和 Clojure 的代码库不断消耗 100% 的 CPU（8 个内核的 800%）。Jetbrains 技术支持告诉我下载[未发布的 12.0.2 版本](http://confluence.jetbrains.net/display/IDEADEV/IDEA+12+EAP)。

**更新**：IntelliJ 12.0.4 具有相同的 CPU 消耗使用率。我已将其范围缩小到 Clojure 插件。

# php - UIImagePNGRepresentation 和 ImageCreateFromString 之间的兼容性（Objective C 和 PHP）

> ID：14024995
> 
> 赞同：2
> 
> 时间：2012-12-24T19:20:32.243
> 
> 标签：php, objective-c, ios, jpeg

我`UIImagePNGRepresentation`习惯隐蔽`UIImage`到`NSData`. 然后我在 Objective C 中使用 Kiichi Takeuchi 的 Base64 库`NSData`将`NSString`.

服务器上的代码（用 PHP 编写）使用 base64_decode 来解码字符串，然后`ImageCreateFromString`. 后一种方法会引发错误。

有什么我做错了吗？

*   我NSLoged了base64函数的输出，尝试用python解码，保存成PNG文件，文件没问题
*   我也试过 UIImageJPEGRepresentation，同样的问题..

# onclick - 我可以将 onClick 事件添加到 Html.ListBox Razor 助手吗？

> ID：14024996
> 
> 赞同：2
> 
> 时间：2012-12-24T19:20:33.503
> 
> 标签：onclick

我使用 Html.ListBox 助手在 MCV3/Razor 视图中创建了一个 ListBox。我想将 onClick 事件添加到此 ListBox，以便 JavaScript 可以执行一些工作。我的问题 - 如何将 onClick 事件添加到 Html.ListBox 助手？

谢谢，

扎莱克

# wordpress - 如何在 wordpress 中复制此博客列表

> ID：14024998
> 
> 赞同：0
> 
> 时间：2012-12-24T19:20:49.980
> 
> 标签：wordpress, wordpress-theming

我需要为 wordpress 建立一个新闻主题，其中一个要求是我需要按类别显示新闻项目组，如大多数新闻网站上所示 - 引用的示例是网站[www.chicagotribune.com](http://www.chicagotribune.com)

从该站点您可以看到主页上列出了所有主要类别，并且每个类别组都列出了一些新闻文章，并且有一篇带图片的文章。

我在这里使用一个简单的逻辑来选择每个类别的 6 篇最新新闻文章，最新的一篇将是主要亮点，即显示一张图片或如果最新文章没有图片，则显示一张有特色图片的文章。

我之前已经自定义了 wordpress 主题，但是我需要知道如何在此处执行此操作 - 我应该查看哪些函数以及如何实际运行如下循环：

如果页面是类别页面，则遍历所有子类别并在每个子类别中循环最新 6 篇文章

循环浏览所有主要类别，并在每个主要类别中循环浏览最新的 6 篇文章（如果主页）

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T00:14:14.947

您可以在主页中使用一些自定义 wp-query 和小部件区域，例如[This genesis child theme](http://my.studiopress.com/themes/news/)