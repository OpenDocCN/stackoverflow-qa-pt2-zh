# StackOverflow 问答 15046000-15046999

# git - 您可以通过 ssh 将来源 git 推送到 root 拥有的远程文件夹吗？

> ID：15046011
> 
> 赞同：2
> 
> 时间：2013-02-23T21:36:27.343
> 
> 标签：git, ssh

我家有两台电脑。一个是保存我的 git init 存储库的服务器。我在桌面上克隆了存储库（通过 ssh 进行 git clone）。我做了一些更改并尝试将它们推送到原始主机，但它不允许我编写文件......我阅读了很多文章并创建了组和权限，但我仍然得到这个？任何帮助或建议将不胜感激。

```
sudo git push origin dev 
[sudo] password for localuser: 
remoteuser@192.168.0.5's password: 
Counting objects: 9, done.
Delta compression using up to 6 threads.
Compressing objects: 100% (4/4), done.
Writing objects: 100% (5/5), 629 bytes, done.
Total 5 (delta 3), reused 0 (delta 0)
error: insufficient permission for adding an object to repository database ./objects

fatal: failed to write object
error: unpack failed: unpack-objects abnormal exit
To remoteuser@192.168.0.5:/var/www/apps
 ! [remote rejected] dev -> dev (n/a (unpacker error))
error: failed to push some refs to 'remoteuser@192.168.0.5:/var/www/apps' 
```

提前致谢。

# ruby-on-rails - Rails 路线和 has_one 关系导致路线不正确

> ID：15046019
> 
> 赞同：0
> 
> 时间：2013-02-23T21:36:53.507
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我有一个用户和机柜模型

```
class User < ActiveRecord::Base

  has_one :cabinet

  after_create :create_cabinet

  // Omitted code

  def create_cabinet
    Cabinet.create(user_id: id)
  end
end 
```

-

```
class Cabinet < ActiveRecord::Base

  has_many :cabinet_ingredients, :dependent => :destroy
  has_many :ingredients, through: :cabinet_ingredients
  belongs_to :user

  attr_accessible :user_id, :cabinet_ingredients_attributes

  accepts_nested_attributes_for :cabinet_ingredients

end 
```

-

```
Mixology::Application.routes.draw do

  // Omitted code
  resource  :cabinet

end 
```

每当我去我的用户柜以作为cabinet.1 回来时，我都会不断获得我的路线......然后当我尝试访问任何cabinet_ingredients 时，我收到一个错误，提示cabinet_ingredient.5（cabinet_ingredient 的id）不能被发现...

不知道为什么我会得到这个.. 我的`rake routes`回报：

```
 cabinet     POST   /cabinet(.:format)                 cabinets#create
    new_cabinet GET    /cabinet/new(.:format)             cabinets#new
   edit_cabinet GET    /cabinet/edit(.:format)            cabinets#edit
                GET    /cabinet(.:format)                 cabinets#show
                PUT    /cabinet(.:format)                 cabinets#update
                DELETE /cabinet(.:format)                 cabinets#destroy 
```

橱柜展示视图

```
%table.table.table-striped
  %thead
    %tr
      %th My Ingredients
      %th ID
  %tbody
    - @cabinet.cabinet_ingredients.each do |ci|
      %tr
        %td= ci.ingredient.name
        %td= link_to "delete from cabinet", cabinet_path(ci), method: :delete, confirm: "Are you sure?" 
```

机柜控制器：

```
 def show
    @cabinet = current_user.cabinet
  end

  def edit
    @cabinet = current_user.cabinet
    @ingredients = Ingredient.all
  end

  def update
    @ingredients = Ingredient.all
    @cabinet = current_user.cabinet
    if @cabinet.update_attributes(params[:cabinet])
      redirect_to @cabinet
    else
      render 'edit'
    end
  end

  def destroy
    ingredient = CabinetIngredient.find(params[:id])
    ingredient.destroy
    redirect_to cabinet_path
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:14:53.403

如果有人有类似的问题，这是我想出的解决方案：

我没有在橱柜控制器中进行销毁，而是创建了一个 cabinet_ingredients 控制器并添加了一个销毁操作

```
class CabinetIngredientsController < ApplicationController
  def destroy
    ingredient = current_user.cabinet.cabinet_ingredients.find(params[:id])
    ingredient.destroy
    redirect_to cabinet_path
  end
end 
```

然后更新cabinet show 以路由到cabinet_ingredients 控制器

```
%table.table.table-striped
  %thead
    %tr
      %th My Ingredients
      %th ID
  %tbody
    - @cabinet.cabinet_ingredients.each do |ci|
      %tr
        %td= ci.ingredient.name
        %td= link_to "delete from cabinet", cabinet_ingredient_path(ci), method: :delete, confirm: "Are you sure?" 
```

最后是路线：

```
Mixology::Application.routes.draw do

  resource  :cabinet
  resources :cabinet_ingredients

end 
```

# javascript - 如何使用 onclick javascript 函数禁用按钮？

> ID：15046020
> 
> 赞同：3
> 
> 时间：2013-02-23T21:37:10.613
> 
> 标签：javascript, jquery

按下后我需要删除按钮单击事件。如何编辑该功能，以便在单击它时将其禁用，然后运行 ​​url，反之亦然。

```
<form id="edit" action="" method="post">
    <input type="submit" name="button" onclick="this.value='test...'; MyFunction();" id="1" class="button blue" value="Submit">
</form>
<script>
    function MyFunction() {
        var url = "editing.php";
        document.getElementById("edit").setAttribute('action', url);
        return false;
    }
    $(".blue").click(function(){
        $(".blue").removeClass("disabled");
        $(this).addClass("disabled");
    });
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T21:41:18.997

删除`onclick`，并以正确的方式进行操作：

```
<form id="edit" action="" method="post">
  <input type="submit" name="button" id="a1" class="button blue" value="Submit">
</form>
<script type="text/javascript">
$(function() {
    $('#a1').on('click', function() {
        $(this).val('test...').prop('disabled', true);
        $("#edit").attr('action', 'editing.php');
        return false;
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T21:40:32.823

```
$(".blue").click(function(){
  $(this).attr('disabled', true);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T22:21:54.490

使`.blue`按钮**只能点击一次**。jQuery的`.one()`方法正是适合你的东西。这是[**文档**](http://api.jquery.com/one/)。

```
$("#edit > .blue").one("click", function() {
    //Code here will only run once.
}); 
```

> *“我如何编辑该功能，以便在单击它时将其禁用，然后运行 ​​url，反之亦然。”*

我想你希望表单在这里只提交一次；所以：

```
<form id="edit" action="" method="post">
    <input type="submit" name="button" class="button blue" value="Submit" />
</form>

<script>
    //To make the form SUBMITTABLE ONLY ONCE:
    $("#edit").one("submit", function() { 
        $(".blue").prop("disabled", true); //you can still set the button disabled if you like
        $('#edit').attr('action', "editing.php"); //setting the action attribute here
    });
</script> 
```

我不知道你`DOCTYPE`是什么，但如果它是 HTML4；HTML 元素不能有数字 ID。HTML5 似乎允许这样做。看到[**这个帖子**](https://stackoverflow.com/a/7987693/112731)。

[**演示小提琴在这里**](http://jsfiddle.net/onury/cDcux/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-23T21:40:03.387

只需设置`disabled`属性

```
$('.blue').attr('disabled', 'disabled'); 
```

[JSFiddle](http://jsfiddle.net/Yd6u8/10/)

* * *

正如@doppelgreener 指出的，[`prop`](http://api.jquery.com/prop/)在这里同样有效

```
$('.blue').prop('disabled', true); 
```

[JSFiddle](http://jsfiddle.net/Yd6u8/9/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-23T21:40:39.100

[`attr()`](http://api.jquery.com/attr/)您可以使用以下函数通过 jQuery 轻松完成此操作：

```
$('.blue').click(function() {  
    $(this).attr('disabled', 'disabled');
}); 
```

顺便说一句，我注意到您正在使用 jQuery。为什么不“jQuery-ify”你的整个代码：

```
function MyFunction() {
    var url = "editing.php";
    $("#edit").attr('action', url);
    return false;
}

$(".blue").click(function(){
    $(this).addClass("disabled").attr('disabled', true);
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-29T18:52:20.333

```
<input type="submit" name="button" onclick="$(this).attr('disabled', 'disabled')"/> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-23T21:39:24.377

```
document.getElementById('1').setAttribute('disabled', 'disabled'); 
```

# c - Linux C：使用 fork() child 更改目录

> ID：15046025
> 
> 赞同：1
> 
> 时间：2013-02-23T21:37:40.107
> 
> 标签：c, linux, fork, children

我正在制作一个命令 shell，我正在使用孩子来更改 shell 的目录，但我无法让它更改数组的内容；

最后它只打印当前目录而不是“/”。孩子对 newDirectory 数组没有影响。我究竟做错了什么？有没有办法让孩子改变数组的内容？谢谢。

```
char newDirectory[255];

getcwd(newDirectory, 255); //set newDirectory to current directory

pid_t pid;      

pid = fork();

if(pid == 0){   //child execution       

    strcpy(newDirectory, "/");

    exit(0);
}

else if (pid < 0){                  
    printf( "Error!\n");    
    exit(1);
}
else{                       
     pid = waitpid(pid, NULL, 0);   
}
printf("%s\n", newDirectory);
chdir(newDirectory); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T21:43:50.557

*（从评论移动）*

当您执行`fork()`新进程时，新进程是父进程的*独立副本*¹，因此您对子进程的变量所做的任何更改都不会从父进程中看到 - 它们有两个独立的虚拟地址空间。

如果您希望子进程与父进程通信，您必须使用一些 IPC 方法（例如管道、共享内存、套接字……）。

* * *

1.  实际上，在现代系统上，地址空间复制实际上是通过写时复制来实现的，但这并没有改变这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T06:16:19.230

最简单的解决方案是不使用子进程更改当前工作目录（因为当前工作目录只会在子进程中更改，而不是父进程，如 Matteo 所述）。

如果您检查现有的 shell（例如`bash`或什至`sh`），您会注意到某些命令被认为是“内置的”并且`cd`是这样的命令之一。

# javascript - 如何修复 Dygraphs 范围选择错误？

> ID：15046027
> 
> 赞同：1
> 
> 时间：2013-02-23T21:38:13.290
> 
> 标签：javascript, dygraphs

我正在使用 Dygraphs 库来显示财务数据的折线图。当我启用范围选择选项时，有一个错误会导致拖动选择手柄不是一对一的，使其几乎无法使用。

以下是它在工作时应该是什么样子的示例：http: [//dygraphs.com/tests/range-selector.html](http://dygraphs.com/tests/range-selector.html) 以下是它损坏时发生的情况的示例（这是我在本地安装它时的工作方式）：[http://dygraphs.com/gallery/#g/range-selector](http://dygraphs.com/gallery/#g/range-selector)

我认为有一些 javascript 冲突导致了这个错误。我该如何修复它或确定是什么原因造成的？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:39:43.143

接得好。我已经向范围选择器的作者提到了这一点。看起来它与位置有关：相对。我建议在 dygraphs-users 邮件列表中提及这一点，或者在[http://code.google.com/p/dygraphs/issues](http://code.google.com/p/dygraphs/issues)报告一个错误，然后你就会知道它何时修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T21:19:41.953

此错误是由问题 #378 的修复程序引入的。创建了一个新问题：[https ://code.google.com/p/dygraphs/issues/detail?id=439](https://code.google.com/p/dygraphs/issues/detail?id=439)

# c# - 如何使用.Substring？

> ID：15046029
> 
> 赞同：-1
> 
> 时间：2013-02-23T21:38:16.567
> 
> 标签：c#, vb.net, windows-phone-7, xaml

我知道这看起来像一个菜鸟问题，但我不知道发生了什么，我在使用 .substring 时不断得到错误的值。我已经像这样在java中使用它

```
text = "stackoverflow"
text1 = text.substring(start, end); 
```

start 可以是任何数字`< text.length`，并且效果很好。例子

```
text1 = text.substring(9, text.length); 
```

应该给我`"flow"`，但如果我在 Visual Basic 中尝试那个确切的代码，它会给我全文`"stackoverflow"` 所以......我做错了什么？

这是我的代码：

```
TextBox2.Text = bin.Substring(9, text.length) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T21:41:37.700

第二个参数不是结束位置，而是所需输出字符串的长度：

```
'Declaration
Public Function Substring ( _
    startIndex As Integer, _
    length As Integer _
) As String 
```

这应该返回`"flow"`：

```
TextBox2.Text = bin.Substring(9,4) 
```

# adobe - Adobe Livecycle ES3 保存问题 - 文件越来越大

> ID：15046032
> 
> 赞同：1
> 
> 时间：2013-02-23T21:38:41.703
> 
> 标签：adobe, livecycle

我一直在 Adob​​e Livecycle ES3 中处理表单。

我从一个大约的文件开始。1 MB 大小。

我意识到每次我保存文件时它都会变大大约。1-2 MB。

即使我只是将文件保存为新名称而不进行任何编辑，也会发生这种情况。

我最终得到了一个 45 MB 的文件大小，并且我真的没有对表单设计进行太多更改。

我是这个程序的新手，在网上找不到任何东西来解释这种行为。

我在想该程序正在保存某种历史缓冲区？

任何帮助将不胜感激。

编辑以回答以下问题：

1) 表单存储在本地

2) 唯一的选择是另存为 PDF。该表单基于 PDF 导入的文档。

3) 导入背景图可以改成XDP吗？

4) XML 似乎没有加倍信息。

我昨天发现一篇文章谈到每次使用 Livecycle 保存文件时文件大小都会增加。土坯家伙似乎在说这就是生活，对此你无能为力。对我来说似乎有点奇怪。我不知道我是否真的在这里给了你什么新东西。我对此感到非常沮丧。

谢谢 SUB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T03:25:15.780

首先，我需要问您您的表单是本地存储在您的机器上，还是您正在编辑保存在 LiveCycle 服务器本身上的表单副本？

1.  如果您的表单驻留在服务器上，请将表单的副本下载到您的计算机上并尝试对其进行测试，以查看每次将其保存在计算机上时文件大小是否会增加。请让我知道您的测试在这种情况下是如何进行的。
2.  如果您正在机器上进行表单设计，您是将表单保​​存为 PDF 还是 XDP？
3.  如果要将表单另存为 PDF，请将其另存为 XDP。
4.  如果您将表单保存为 XDP，请在 LiveCycle 设计器的 XML 编辑器中打开它，或者仅使用文本编辑器查看其内容。

我在过去看到过一些问题（顺便说一句，这是一个错误）LiveCycle Designer 在表单中重复相同的设计时 XML 标记。如果您的表单是这种情况，您可以简单地进行查找和替换以删除它们。

希望这可以帮助。如果您对 LiveCycle 有任何疑问，请告诉我您的测试情况。

谢谢，

阿玛汉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:07:10.943

我经常看到这个问题，事实上今天我有一个文件从 1.5mb 跳到 188mb。浏览了 Adob​​e 网站后，似乎没有明确的原因，但当您将片段嵌入表单或使用大量表格时，似乎会发生更多。

无论如何，最快的解决方法是进入 XML 视图并搜索“aped”。这通常会找到类似以下内容的行：只需在整行上执行查找/替换（将替换留空）。

这样做是为了：

完成后返回设计视图并保存。您应该会看到文件大小减小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-10T16:15:04.587

我遇到了同样的问题。我找到了解决方法，但是您需要拥有原始文件的副本。

```
1\. From the bloated file, copy the XML from the XML Source window in LiveCycle Designer.
2\. Open the original PDF in LiveCycle Designer.
3\. Replace the XML in the XML Source window with the XML on the clipboard.
4\. Save. 
```

# c# - 如何在任何键盘、鼠标或游戏手柄状态更改时触发事件？

> ID：15046034
> 
> 赞同：0
> 
> 时间：2013-02-23T21:38:50.080
> 
> 标签：c#, events, input, xna

有没有办法立即对 C# 应用程序中鼠标、键盘和游戏手柄状态的任何变化做出反应？

我相信 XNA 就像任何其他 C# 应用程序一样，所以它可能没有什么不同，但以防万一，我想通过立即触发相应的事件来改进我的 XNA 游戏输入。

默认 XNA 没有事件处理程序（至少我从未见过它被提及）。Nuclex.Input 没有检测到某些键（如 Alt、F10 或 Pause，这是不可接受的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T06:52:05.543

通常您将输入的状态存储在前一帧上，然后测试输入是否在帧之间发生了变化。例如，您的`Update`方法可能如下所示：

```
KeyboardState ks = Keyboard.GetState();

if(ks.IsKeyDown(Keys.Space) && lastKeyboardState.IsKeyUp(Keys.Space))
{
    DoAThing();
}

lastKeyboardState = ks; 
```

（这段代码完全是凭记忆写的，所以可能不太正确。但它应该说明这个概念。）

这将为您提供不超过`1 / yourFPS`延迟的关键事件。在 60FPS 时，这大约是 16 毫秒。出于游戏目的，这通常是可以接受的。如果你特别想要一个`event`- 你可以简单地在我`DoAThing`上面放的地方开火。

* * *

对于键入**文本**，您通常需要来自 Windows 的字符事件（类似的库`Nuclex.Input`可以为您提供）。这并不是说您可以获得更好的延迟，而是您可以以**有序**且**可靠**的方式获取键盘事件（例如：这种方式您永远不会在单个帧上获得两个键，从而导致不明确的顺序）。

更重要的是，这样您就可以在 Windows 有机会应用输入处理之后获取事件。例如，这使您在键入 an`a`和 an之间有所不同`A`。或者有人使用 alt+numpad 输入字符，或应用变音符号。缺点是您错过了各种非文本键，如您提到的 , `Alt`,`F10`等`Pause`。

* * *

最后，快速阅读`Nuclex.Input`表明它至少*应该*提供您想要的键 - 特别是`IKeyboard.KeyPress`和`.KeyRelease`. 如果它不起作用，则可能是`Nuclex`. 或者您系统上的某些东西正在干扰窗口消息。

一种可能的解决方法可能是通过轮询它们来接受这些缺失键的延迟。使用轮询作为无缝回退的代码可能相当简单。

# c++ - QML字体加载器不工作

> ID：15046036
> 
> 赞同：8
> 
> 时间：2013-02-23T21:39:05.250
> 
> 标签：c++, qt, fonts, qml

我正在尝试使用 QML 的内置 FontLoader 元素为我们的应用程序加载自定义字体，但没有成功。

我尝试过使用具有相同结果的 OTF 和 TTF 字体。

字体与项目文件位于同一目录中。只有一个 QML，这个 FontLoader 所在的主要 QML。

这应该是这样的：

![示例截图](../Images/e5cb1160ee73f2f0fa2f5a9b7d0376ae.png)

这是我的代码：

```
import QtQuick 2.0

Rectangle {
    width: 360
    height: 360

    FontLoader {
        id: cFontLoader
        source: "./fontlol.ttf"
    }

    Text {
        id: testText
        anchors.centerIn: parent
        text: "Hello Fonts!"
        font.family: cFontLoader.name
        font.pointSize: 32
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-28T10:09:24.507

Qt/QML 的字体处理让我[头疼。](https://stackoverflow.com/questions/17521578/qml-font-style-naming-issue-mac-linux-platform-differences)“各种子样式”的字体似乎是[根本问题](https://stackoverflow.com/a/17532647/24283)。当我绝对需要在 Qt 中解决一种特定的问题字体样式时，[使用 fontforge](https://stackoverflow.com/a/17537588/24283)将所需样式重命名为“正常”的字体创建自定义版本似乎可行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-04T20:57:14.270

我也遇到过这个问题，但在我的情况下，这是因为我添加了“名称”属性。当我删除名称字体开始显示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-26T11:44:34.463

QML 的文本组件通过字体名称识别字体。但是，如果您加载不同的字体类型，通常字体元数据中的字体名称是相同的。

文本组件有一个属性 font.styleName，您可以使用它来访问不同类型的字体：

```
FontLoader{id: loader source: "AwesomeFont-Bold.ttf"}
Text
{
    font.family: loader.name
    font.styleName: "Bold"
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-06-24T06:52:30.960

**FontLoader 很**适合我

```
 FontLoader{id:fixedFont; name: "Digital-7"} 
 Text {
 text:"Hello world"
 font.family: fixedFont.name
} 
```

[看这里了解更多](http://qt-project.org/doc/qt-4.8/qml-fontloader.html)

# ruby-on-rails - 用`kill`命令杀死进程后不会死

> ID：15046039
> 
> 赞同：1
> 
> 时间：2013-02-23T21:39:14.883
> 
> 标签：ruby-on-rails, macos, process, lsof

我正在尝试运行`rails server`以启动本地服务器，但出现此错误

```
...
WARN  TCPServer Error: Address already in use - bind(2)
Exiting
... 
```

所以我去寻找占用端口的进程并将其杀死。服务器仍然无法启动。事实证明，`lsof`仍然显示了该过程（即使在它被杀死之后）：

```
$ lsof -P | grep ':3000' 
ruby      52944 user    7u    IPv4 0xffffff800bdafbd8       0t0      TCP *:3000 (LISTEN)
$ kill 52944    <<<<<<< pid 52944 should have died here!
$ lsof -P | grep ':3000' 
ruby      52944 user    7u    IPv4 0xffffff800bdafbd8       0t0      TCP *:3000 (LISTEN) 
```

知道如何真正杀死这个过程吗？

（这是在`OSX`）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T21:43:37.163

采用

```
kill -9 <id> 
```

杀死顽固的进程:-)

# php - 当我启用 Codeigniter 缓存时，坦克身份验证被禁用。为什么？

> ID：15046042
> 
> 赞同：0
> 
> 时间：2013-02-23T21:39:39.893
> 
> 标签：php, codeigniter, caching, codeigniter-2, tankauth

如果我在启动控制器的构造函数中激活 Codeigniter 缓存（例如）。所以：

```
$this->output->cache(20); //20 minutes 
```

如果我登录主页面（使用 Tank auth 库构建），则会显示完整的 Web 应用程序，如果我注销时重新加载页面，则会再次显示完整的 Web 应用程序。为什么？

显然，如果缓存被禁用，这不会发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:51:19.533

如果启用缓存，您将始终从缓存中获取页面，直到 20 分钟后

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T21:57:28.863

Codeigniter 正在缓存第一个请求的输出。任何进一步的请求只会从初始请求返回缓存页面。

由于您的应用需要用户状态，因此您无法缓存整个页面，否则所有用户将看到相同的内容（无论状态如何）。

# regex - 正则表达式的问题

> ID：15046048
> 
> 赞同：1
> 
> 时间：2013-02-23T21:40:12.183
> 
> 标签：regex

我正在尝试`if-then-else`使用`RegEx`. 如果文本包含`Monty`并且还包含`Python`. 如果文本中不存在 Monty，则文本也应该匹配。

**正则表达式**

```
(?(?=Monty)(?(?=Python).*|)|^.*).*$ 
```

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:26:44.523

我不精通前瞻正则表达式，但只是尝试根据我从上述描述中理解的内容构建正则表达式。检查[链接](http://www.debuggex.com/?re=%28.%2a%28Monty%29.%2a%28Python%29.%2a%29%7C%28.%2a%28Python%29.%2a%28Monty%29.%2a%29%7C%28.%2a%5B%5E%28Monty%29%5D.%2a%29&str=)以查看这是否是您要执行的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T22:48:20.873

这个怎么样：

```
(^(?!.*Monty(?!.*Python.*).*).*$|^.*Python.*Monty.*$) 
```

这通过了我的测试，但让我知道它是否适合你。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-23T21:44:52.350

试试这个

```
((?=Monty)((?=Python).*|)|^.*).*$ 
```

# java - 创建自定义适配器类以避免自定义列表视图

> ID：15046049
> 
> 赞同：0
> 
> 时间：2013-02-23T21:40:24.840
> 
> 标签：java, android, android-arrayadapter

我正在根据[本](http://www.thepcwizard.in/2012/09/android-creating-custom-listview-for.html)教程构建自己的 ListView。

这一行： `MessageDetails msg = _data.get(position);` 在他的代码中给了我一个问题。我显然收到了这条线的类型错误。我不明白他的代码是如何工作的。我应该做些什么不同的事情，这样我才能让它像他一样工作。

*编辑*

我知道这条线的问题在于它试图将两种不同的类型放在一起`MessageDetails`，并且`ArrayList<String>`. 他的教程没有给我一个好的方法，因为我得到了错误，而他显然没有。

我的适配器类

```
public class MenuItemAdapter extends BaseAdapter {
    private ArrayList<String> _data;
    Context _c;

    MenuItemAdapter(ArrayList<String> data, Context c){
        _data = data;
        _c = c;
    }
    public int getCount() {
        return _data.size();
    }
    public Object getItem(int position) {
        return _data.get(position);
    }
    public long getItemId(int position) {
        return position;
    }
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
           LayoutInflater vi = (LayoutInflater) _c.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
           v = vi.inflate(R.layout.menuitemrow, null);
        }
        ImageView image = (ImageView) v.findViewById(R.id.MIR_itemImage);
        TextView itemName = (TextView)v.findViewById(R.id.MIR_itemImage);
        TextView itemDescription = (TextView)v.findViewById(R.id.MIR_itemDescription);
        TextView itemPrice = (TextView)v.findViewById(R.id.MIR_itemPrice);
        TextView itemOther = (TextView)v.findViewById(R.id.MIR_itemOther);

        // Create instance of MenuItemDetail and then assign
        MenuItemDetail mid = _data.get(position);
        image.setImageResource(mid.icon);
        itemName.setText(mid.itemName);
        itemDescription.setText(mid.itemDescription);
        itemPrice.setText(mid.itemPrice);
        itemOther.setText(mid.itemOther);
        return v;
    }

} 
```

这是我的`MenuItemDetail`课程，与他的课程非常相似，只是我的领域。

```
public class MenuItemDetail {

    int icon;
    String itemName;
    String itemDescription;
    String itemPrice;
    String itemOther;

    public int getIcon() {
        return icon;
    }
    public void setIcon(int icon) {
        this.icon = icon;
    }
    public String getItemName() {
        return itemName;
    }
    public void setItemName(String itemName) {
        this.itemName = itemName;
    }
    public String getItemDescription() {
        return itemDescription;
    }
    public void setItemDescription(String itemDescription) {
        this.itemDescription = itemDescription;
    }
    public String getItemPrice() {
        return itemPrice;
    }
    public void setItemPrice(String itemPrice) {
        this.itemPrice = itemPrice;
    }
    public String getItemOther() {
        return itemOther;
    }
    public void setItemOther(String itemOther) {
        this.itemOther = itemOther;
    }

} 
```

任何帮助和解释将不胜感激。

我还必须`ArrayList`在需要`ArrayList<String>`. 不确定该更改是否是错误的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T21:45:03.703

您声明`_data`为字符串列表 ( `ArrayList<String>`)，也许您打算使用 MenuItemDetails 列表？由于您无法将 String 转换为 MenuItemDetail 对象。这些类是不相关的。

```
private ArrayList<MenuItemDetail> _data;
Context _c;

MenuItemAdapter(ArrayList<MenuItemDetail> data, Context c){
    _data = data;
    _c = c;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:31:15.583

该示例的代码存在问题。这是无法做到的。解决方法是确保您将其传递给`ArrayList<YourType>`您正在使用的类型。但是，这会导致尝试通过捆绑包传递它时出现问题，因为它只能`ArrayLists<String>`作为捆绑包中的额外内容传递。所以这是最好的，我的解决方案是创建一个转换器方法将对象转换为一个`ArrayyList<String>`，然后另一个构造函数方法从`ArrayList<String>`. 然后，这需要创建一个异常类来捕获从转换到的错误，`ArrayList<String>`除非`ArrayList<YourType>`您已经使系统“防错”，我对此高度怀疑。

我试图避免这条路线，但这是唯一可行的解​​决方案。

# python - 从 python 2 中的模块导入类会导致未知的“自我”

> ID：15046054
> 
> 赞同：0
> 
> 时间：2013-02-23T21:40:36.023
> 
> 标签：python, class, module, self

我有 2 个 python 文件。一个声明了一个名为语言的类：

```
class language:
    def __init__(self, name, letters, elements, grammar):
        self.n = name
        self.l = letters
        self.e = elements
        self.g = grammar 
```

我将其保存为：“language_class.py”。然后我尝试通过执行以下操作将其导入另一个名为“turkish.py”的程序：

```
turkish = __import__('language_class').language(self,"Turkish",turkish_latin,turkish_grammar).turkish 
```

当我运行 language_class.py 时，我没有遇到任何问题，但是当我运行 turkish.py 时：

```
 Traceback (most recent call last):
  File "C:\Users\Ahmet\Desktop\Google Apps\transalator\The Transalator\Recources\Languages\turkish.py", line 1, in <module>
    turkish = __import__('language_class').language(self,"Turkish",turkish_latin,turkish_grammar).turkish
NameError: name 'self' is not defined 
```

但是 self 是明确定义的。这是某种错误，还是我做错了？感谢您的帮助，即使我比您看到此消息早几个小时感谢您：D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T21:44:51.390

你不需要传入`self`；python*自动*将其提供给方法。

如果您能提供帮助，您也真的不想使用该`__import__()`功能。做就是了：

```
import language_class

turkish = language_class.language("Turkish", turkish_latin, turkish_grammar).turkish 
```

# asp.net - ASP.NET MVC - 视图正在呈现不存在的值？

> ID：15046061
> 
> 赞同：1
> 
> 时间：2013-02-23T21:41:31.423
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我有这个：

```
model.PasswordField = null;
return View("MainLogin", model); 
```

我的模型包含`LoginField`和`PasswordField`。我`LoginField`保持原样，但我删除`PasswordField`。现在，当`MainLogin`视图呈现时，字段密码具有我之前请求的值！为什么？

更新：添加了我的视图代码：

```
<div class="editor-field">
                @Html.TextBoxFor(model => model.PasswordField, new { placeholder = "Password" })
                @Html.ValidationMessageFor(model => model.PasswordField)
            </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T04:35:40.197

您正在更改 Model 中的值，但 HtmlHelper 方法首先检查 ModelState 以在回发时显示该值。这是设计使然。要显示修改后的值，您需要使用清除 ModelState，

```
ModelState.Clear(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:47:58.217

在表单的加载中，您可以创建一个函数 clean() 在其中放置要为空的字段的初始化，例如

```
clean()
{

textlabel.setvalue="enter text ";
field1.empty();

passwordField.empty();
} 
```

# freepascal - Lazarus 中组件的名称是什么，Delphi 中的名称是“Canvas”？

> ID：15046067
> 
> 赞同：2
> 
> 时间：2013-02-23T21:42:02.127
> 
> 标签：freepascal, lazarus

我想在 Lazarus 中创建一个绘图应用程序，但我没有看到合适的控件，我可以在 Deplhi 中将其用作画布。它叫什么名字 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T00:24:09.583

Delphi中没有`Canvas`组件，但如果您正在寻找可以在应用程序中用于自定义绘图的组件，那么您正在寻找[`TPaintBox`](http://lazarus-ccr.sourceforge.net/docs/lcl/extctrls/tpaintbox.html)控件（在 Delphi 中也使用该组件的相同名称）。在 Lazarus 中，您可以在组件面板中找到它：

![在此处输入图像描述](../Images/da1a008f34fd3db228f66ffe37b1961d.png)

在较新版本的 Lazarus IDE 中，您可以从组件选择器中前进以按名称查找组件。如果您按`CTRL`+ `ALT`+ `P`，您将看到以下窗口，您只需在其中键入您要查找的控件的名称，它就会立即被过滤掉。一旦您选择了组件（如果有多个与名称匹配的组件）并按`ENTER`，则该组件在调色板中被选中：

![在此处输入图像描述](../Images/d5c63e269156e1036238e90ab6f916ee.png)

然后，您将为组件的[`OnPaint`](http://lazarus-ccr.sourceforge.net/docs/lcl/controls/tgraphiccontrol.onpaint.html)事件编写事件处理程序方法，[`TPaintBox`](http://lazarus-ccr.sourceforge.net/docs/lcl/extctrls/tpaintbox.html)并在那里对组件进行绘图[`Canvas`](http://lazarus-ccr.sourceforge.net/docs/lcl/controls/tgraphiccontrol.canvas.html)：

```
procedure TForm1.PaintBox1Paint(Sender: TObject);
begin
  PaintBox1.Canvas.Brush.Color := clGreen;
  PaintBox1.Canvas.FillRect(PaintBox1.ClientRect);
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:47:43.987

大多数情况下，Canvas 已在 Forms-Applications 中定义。因此，只需输入“画布”后跟一个点即可查看功能。这适用于所有版本的 Lazarus 和 Delphi。

`procedure TForm1.FormShow(Sender: TObject);
begin
  canvas.TextOut(10,10,'Hello World');
end;`

# php - 是\进入数据库无论如何

> ID：15046070
> 
> 赞同：-7
> 
> 时间：2013-02-23T21:42:26.590
> 
> 标签：php, mysqli

这就是我所做的，以便您可以在网站上看到代码。但是每次我更改它或上传它时，它都会自己写 \ 。根本想不通是什么问题

所以当我从页面复制时，似乎在这里：

```
 <?php 
    $hej = \"Hej\";
    $jesper = \"Jesper\";
    echo $hej . \" \" . $jesper;
     ?> 
```

当我在页面上查看代码时，在这里这样做；

```
<?php
if ($dw = "PHP" or $dw = "MySQLi") {
    ?>
    <code>
        <pre>
            <?php
            $html = "<?php \n";
            $html .= $tekst;
            $html .="\n ?>";
            echo htmlentities($html);
            ?>
        </pre>
    </code>
    <?php
} elseif ($dw = "") {
    echo "<p>Not code her!!</p>";
} else {
    ?>
    <code>
        <pre>
    <?php echo $tekst; ?>
        </pre>
    </code>
            <?php
        }
        ?>
</div> 
```

当我在我的代码中制作它们时，只能通过“”来执行它，这样的实例也是如此**\"Blah blah \"**。但我希望它只是像这样“blah blah”那样做，并在我编写代码时正常显示代码：

当我将它们放在页面上并将更新程序内容放在页面上时，这就是我的代码。

```
function opret_artikler()
 {
     $pb = null;

     include "inc/class.upload.php";
     $handle = new Upload($_FILES["file"]);

     if($handle->uploaded)
     {
         $handle->image_resize = true;
         $handle->image_ratio_crop = true;
         $handle->image_y = 90;
         $handle->image_x = 191;
         $handle->Process("artikler_img");

         //til profil billede lign..
         $handle->image_resize = true;
         $handle->image_ratio_crop = true;
         $handle->image_y = 75;
         $handle->image_x = 75;
         $handle->Process("artikler_img/lille");
         $pb = $handle->file_dst_name;
     }

     $tu = $_POST["title_url"];

     $from = array(".", "/", "-", '"', "'", " ", "æ", "Æ", "ø", "Ø", "å", "Å");
     $to = array("-", "-", "-", "", "", "-", "ae", "Ae", "oe", "Oe", "aa", "Aa");
     $alias = strtolower(str_replace($from, $to, $tu));    

     if ($stmt = $this->mysqli->prepare("INSERT INTO `artiker` (`title`, `kort`, `video`, `tekst`, `tag`, `url`, `img`, `img_title`, `dw`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)")) { 

         $stmt->bind_param('sssssssss', $title, $kort, $video, $tekst, $tag, $url, $img, $img_title, $dw);

         /* Sæt værdier på parametrene */
         $title = $_POST['title']; 
         $kort = $_POST['kort'];
         $video = stripslashes($_POST['video']);
         $tekst = $_POST['tekst'];
         $tag = $_POST["tag"];
         $url = $alias;
         $img = $pb;
         $img_title = $_POST["img_title"];
         $dw = $_POST["dw"];

         /* Eksekver forespørgslen */
         $stmt->execute();

         /* Luk statement */
         $stmt->close();

         ?>
         <script language="javascript" type="text/javascript">  
             window.location.href = "/artikler-side/";  
         </script> 
         <?php

     } else {
         /* Der er opstået en fejl */
         echo 'Der opstod en fejl i erklæringen: ' . $this->mysqli->error;
     }    
 }

function ret_artikler()
 {
 ?>
 <div class="span7 clearfix">
     <?php
     if(isset($_POST["opret"]))
     {
         if(empty($_POST["tekst"]))
         {
             echo "Skrive <b>title</b> til artiklen!<br />";
         }
         elseif(empty($_POST["kort"]))
         {
             echo "Skrive <b>Kort tekst</b> til artiklen!<br />";
         }
         else
         {
             if ($stmt = $this->mysqli->prepare("UPDATE `artiker` SET `godkendt`=?, `kort`=?, `tekst`=? WHERE `id`=?")) { 

                 /* Bind parametre */
                 $stmt->bind_param('issi', $godkendt, $kort, $tekst, $id);
                 $godkendt = 0;
                 $kort = $_POST["kort"];
                 $tekst = $_POST["tekst"];
                 $id = $_GET["id"];

                 /* Eksekver forespørgslen */
                 $stmt->execute();

                 /* Luk statement */
                 $stmt->close();

                 ?>
                 <script language="javascript" type="text/javascript">  
                     window.location.href = "/admin/";  
                 </script> 
                 <?php

             } else {
                 /* Der er opstået en fejl */
                 echo 'Der opstod en fejl i erklæringen: ' . $this->mysqli->error;
             }
         }
     }
     ?>
 </div>
 <div class="span7 clearfix">
 <?php
 if ($stmt = $this->mysqli->prepare("SELECT `kort`, `tekst` FROM `artiker` WHERE `id` = ?")) { 

 /* Bind parametre */
 $stmt->bind_param('i', $id);

 /* Sæt værdier på parametrene */
 $id = $_GET['id'];

 /* Eksekver forespørgslen */
 $stmt->execute();
 $stmt->store_result();

 /* Bind resultatet */
 $stmt->bind_result($kort, $tekst);

 /* Hent rækker og udskriv data */
 while ($stmt->fetch()) {
 ?>
 <form action="#" method="post">
     <table width="100%">
     <tr>
         <td>Kort:</td>
         <td><input type="text" name="kort" maxlength="150" value="<?php echo $kort;?>"></td>
     </tr>
     </table>
     <textarea name="tekst" rows="15" cols="80" style="width: 90%"><?php echo $tekst;?></textarea>
     <input type="submit" name="opret" value="Opret Indhold">
 </form>
 <?php
 }
     $stmt->close();
 } else {
     echo 'Der opstod en fejl i erklæringen: ' . $this->mysqli->error;
 }
 ?>

 </div>
 <?php
 } 
```

一路上我没有错误。

我想要解决这个问题是在带有 \ 或类似的一侧显示没有问题的代码。

你可以在这里看到问题：[问题在这里](https://www.jesperbok.dk/artikler/1/echo-variabler/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T21:48:53.573

```
$hej = \"Hej\"; 
```

这 (\") 就是你所说的**转义**。你只需要在你的字符串变量中需要 " 时这样做。所以你忘记的是你的字符串周围的引号

```
$hej="\"Hej\""; 
```

或者

```
$hej='"Hej"'; 
```

# c++ - 如何在 Boost Proto/Phoenix 中使用非多态 lambda？

ID：15046072

赞同：2

时间：2013-02-23T21:42:45.280

标签：c++, boost, c++11, boost-phoenix, boost-proto

# c# - 在 DelegatingHandler 中访问 ApiController 类型

> ID：15046073
> 
> 赞同：5
> 
> 时间：2013-02-23T21:42:47.327
> 
> 标签：c#, asp.net-web-api, asp.net-web-api-routing

我正在为一个项目使用 Asp.Net WebAPI。我目前正在研究身份验证和授权。

我有一个 messageHandler 将检查请求的 HTTP 身份验证标头并构建我的身份和用户配置文件。但是，我想用该操作可能需要的声明来注释我的控制器操作（或只是控制器）（我们有很多用户可以拥有的声明，所以我不想全部加载它们）。

例如：

```
public class MyController : ApiController
{
    [LoadClaims("SomeClaim", "SomeOtherClaim", "etc")]
    public string Get()
    {
        if (HasClaim("SomeClaim"))
            return "Awesome";

        return "Bummer";
    }
} 
```

在身份验证消息处理程序中，我希望能够查看属性并仅根据需要从数据库中取回声明。为此，我需要知道我将根据路由点击什么控制器和操作：

```
 protected override Task<HttpResponseMessage> SendAsync(
            HttpRequestMessage request, CancellationToken cancellationToken)
        {
...

            var routeData = request.GetRouteData();
            object controllerName;
            object actionName;
            routeData.Values.TryGetValue("controller", out controllerName);
... 
```

所以我可以得到那个。但是现在我需要把它变成一个我可以反映的类型，但我只有控制器名称（甚至不是完整的类名或命名空间）。我怎样才能把它变成我可以反思以获得属性等的东西？

我正在研究`DefaultHttpControllerSelector`WebAPI 堆栈是如何做到的，它似乎使用`HttpControllerTypeCache`. 这是一个内部类，所以我无法创建实例。获取目标控制器类型的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T21:56:20.497

您可以使用全局服务定位器自己访问类型解析器。

```
var controllerTypeResolver = GlobalConfiguration.Configuration.Services.GetHttpControllerTypeResolver();
var controllerTypes = controllerTypeResolver.GetControllerTypes(GlobalConfiguration.Configuration.Services.GetAssembliesResolver());
var controllerType = controllerTypes.SingleOrDefault(ct => ct.Name == string.Format("{0}Controller", controllerName)); 
```

您可能想要对结果进行一些缓存（就像控制器选择器一样）。但是这种方法应该有效。

**但**

您最好将此逻辑移动到位于控制器而不是委托处理程序上的自定义授权过滤器中。鉴于您需要知道控制器类型，您不妨让 ControllerSelector 正常工作。也许，如果您将加载声明属性转换为授权操作过滤器属性，您可以只加载作为参数传入的声明，然后在那里设置主体和声明？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-06T15:13:20.453

如果您仍然设置，`DelegatingHandler`您可以获得控制器选择器实例本身，这将更加有效：

```
var controllerSelector = GlobalConfiguration.Configuration.Services.GetHttpControllerSelector();
var controllerDescriptor = controllerSelector.SelectController( request ); 
```

# c# - 为什么在我安装 fluentNhibernate 时 nuget 会尝试强制和依赖升级？

> ID：15046085
> 
> 赞同：2
> 
> 时间：2013-02-23T21:43:48.357
> 
> 标签：c#, nhibernate, fluent-nhibernate, nuget

我已经在一个项目（3.3.1 版）中安装了 nhibernate，现在我正在尝试通过 Nuget 包管理器下载 fluentNhibernate，但出现此错误：

```
PM> install-package fluentnhibernate -Version 1.3.0.733
Attempting to resolve dependency 'NHibernate (≥ 3.3.1.4000)'.
Attempting to resolve dependency 'Iesi.Collections (≥ 3.2 && < 4.0)'.
Successfully installed 'Iesi.Collections 3.2.0.4000'.
Successfully installed 'NHibernate 3.3.2.4000'.
Successfully installed 'FluentNHibernate 1.3.0.733'.
Install failed. Rolling back...
install-package : Updating 'NHibernate 3.1.0.4000' to 'NHibernate 3.3.2.4000' failed.     
Unable to find a version of 'NHibernate.Castle' that is compatible with 'NHibernate 
3.3.2.4000'.

At line:1 char:1
+ install-package fluentnhibernate -Version 1.3.0.733
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+ CategoryInfo          : NotSpecified: (:) [Install-Package], InvalidOperationException
+ FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand 
```

我不明白为什么这不会成功，因为它说 nhibernate 只需要版本 3.3.1 或更高版本，那么为什么它试图强制升级到 3.3.2（我想保持在 3.3.1）哪个然后与城堡不兼容。

对此是否有任何解释，或者是否有任何解决方法可以安装 fluentnhibernate 但将 nhibernate 保持在当前版本（它说没问题）？

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T06:53:52.970

它正在尝试升级到 NH 3.3.2，因为这是满足 Fluent NHibernate 依赖项的最新版本。我认为没有理由更喜欢 3.3.1 而不是 3.3.2。你已经拥有的是更老的 3.1.0。

您还安装了 NHibernate.Castle 包，它仅限于 3.1.0.4000。

总结一下：

*   FluentNHibernate 1.3.0.733 需要 NHibernate 3.3.1 或更高版本。
*   NHibernate.Castle 3.1.0 需要 NHibernate 3.1.0。

由于没有更高版本的 NHibernate.Castle 可用，因此无法解决。

从 NH 3.2 开始，您不再需要 NHibernate.Castle （或类似的），因为现在内置了代理生成。除非您出于其他原因需要它，否则您可以删除该包。

另请参阅NuGet 参考中的将[升级限制为允许的版本](http://docs.nuget.org/docs/reference/versioning#Constraining_Upgrades_To_Allowed_Versions)。

# asp.net-mvc - ObjectContext 实例已被释放，不能再用于需要连接的操作？

> ID：15046090
> 
> 赞同：0
> 
> 时间：2013-02-23T21:44:26.750
> 
> 标签：asp.net-mvc

**索引.cshtml**

```
<div class="news_content_container">
    @Html.Action("_AddImagesToNews", "PostImages")
</div> 
```

**_AddImagesToNews.cshtml**

```
<div>
    @using (Html.BeginForm("_AddImagesToNews", "PostImages", FormMethod.Post, new { id = "form_post_images" }))
    {
        @Html.Hidden("Id", (int)ViewBag.newsId)
        <div class="editor-label">
            <input type="file" name="Files" id="Files" multiple="multiple" />
        </div>

        <div class="submit-field">
            <input type="submit" value="Ekle" class="button_gray_small" />
        </div>
    }
</div>
<div class="images_content_container">
    @Html.Partial("_PostImages", Model.ToList())
</div> 
```

**_PostImages.schtml**

```
@model IEnumerable<NewsCMS.DAL.EDM.PostImages>

@foreach (var item in Model)
{
    <img src="~/@(item.MiddleImageUrl)" alt="@(item.Posts.Title)" />
} 
```

**控制器动作**

```
public ActionResult _AddImagesToNews(int Id)
{
    using (NewsCMSEntities entity = new NewsCMSEntities())
    {
        ViewBag.newsId = Id;
        return PartialView(entity.PostImages.Where(x => x.PostId == Id).ToList());
    }
} 
```

加载视图时，我收到错误作为标题。我找不到原因。如果我写`@Model.Count()`在**_PostImages.cshtml**中，它会显示正确的值而没有错误。

我错过了什么？

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T22:18:11.967

我想我明白了。试试这个

```
return PartialView(entity.PostImages.include("Posts").Where(x => x.PostId == Id).ToList()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T22:20:55.123

我解决了。我通过了如下模型。

```
var images = entity.PostImages.Where(x => x.PostId == Id).ToList();
return PartialView(images); 
```

另外，感谢所有重播，尤其是@DaveA ...

我想，我应该一直使用这种方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T21:54:08.437

在视图中传递实体时，上下文在范围完成时被释放
，并且在视图中您正在访问一个`item.Posts.Title`只能通过上下文访问的对象。至于显示`title`有关的附加数据`Posts`将不得不被检索

using`Model.Count()`是正确的，因为它不需要在 .ToList() 完成后检索更多数据，并且可以在本地计算 lis 中的成员数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T22:19:04.390

此问题通常是在缺少具体对象并且需要“.ToList()”时引起的，但在给定的代码中并非如此。

如果您在 Layout 或其他部分视图中使用从数据库检索的数据，请确保它们是具体对象（通过使用 .ToList()）。

您应该尝试使用 IntelliTrace 来查看引发异常的确切位置（它可能在其他地方）。

# python - 将列表名称和项目传递给函数以搜索列表。ValueError：未找到子字符串

> ID：15046093
> 
> 赞同：0
> 
> 时间：2013-02-23T21:44:35.677
> 
> 标签：python, search, substring

我对 Python 还很陌生，但对编程很满意（尽管大约 5 年没有做过任何事情）。

我已经搜索但找不到任何可以回答我的问题的东西：

我有许多列表，每个列表中都有值，我正在尝试创建一个通用函数，该函数采用 2 个搜索列表的值，这两个值显然是列表名称，以及要在该列表中搜索的字符串：

```
list0 = ["name","date","cat","dog"]
list1 = ["house","chair","table"]
list2 = ["tv","dvd","computer","mouse"]

usersearchlist = raw_input("Enter list name: ")
usersearchitem = raw_input("Enter item to search for: ")

def searchmemory(usersearchlist,usersearchitem):
  return usersearchlist.index(usersearchitem) 
```

然后我调用该函数：

```
print "I found", searchmemory(usersearchlist,usersearchitem) 
```

我收到“ValueError: substring not found”，因为函数调用将文字字符串传递给函数，而不是引用其中包含的值。

希望这是有道理的，我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:58:06.183

我更愿意将列表放入类似于@SimplyKiwi 答案的字典中。

* * *

或者，您也可以通过以下方式实现[`globals()`](http://docs.python.org/2/library/functions.html#globals)：

```
print "I found", searchmemory(globals().get(usersearchlist, []), usersearchitem) 
```

请注意，尽管在这种情况下，您隐含地授予用户对所有全局变量的访问权限。在大多数情况下，这*不是*您希望用户能够执行的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:49:38.567

尝试

```
lists = {"list0" : ["name","date","cat","dog"],
    "list1" : ["house","chair","table"],
    "list2" : ["tv","dvd","computer","mouse"]}

usersearchlist = raw_input("Enter list name: ")
usersearchitem = raw_input("Enter item to search for: ")

def searchmemory(usersearchlist, usersearchitem):
    if (usersearchlist in lists and usersearchitem in lists[usersearchlist]):
        return lists[usersearchlist].index(usersearchitem)
    else:
        return -1 
```

这会将所有列表存储在字典中并首先检查该值是否存在，因此您不应收到 ValueError

# cordova - phonegap 应用程序中的原生性能是否令人期待？

> ID：15046102
> 
> 赞同：0
> 
> 时间：2013-02-23T21:45:06.407
> 
> 标签：cordova

我一直在寻找库的组合来创建一个 phonegap 应用程序，它与 iphone 和 android 上的本机应用程序一样流畅。我还没有找到完美的组合，我对phonegap的期望太高了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:30:32.980

您永远无法在 PhoneGap 上实现本机性能，因为在您的代码和操作系统之间始终存在 WebKit 层。如果能写出非常棒的 JS 代码，你肯定能达到很好的性能（再次无法与原生性能相比）。jQuery Mobile、Kendo UI Mobile 等大多数 UI 库在 iOS 上运行良好，但在 Android 上效果不佳，尤其是在 2.x 版本上。

# checkout - PayPal Adaptive Payments 和 Stripe 的更便宜的替代品

> ID：15046103
> 
> 赞同：5
> 
> 时间：2013-02-23T21:45:29.910
> 
> 标签：checkout, paypal-adaptive-payments, stripe-payments

我目前正在为我们正在设计的市场应用程序寻找结帐提供商。我研究了 PayPal Adaptive Payments 和 Stripe，他们做到了，但它太贵了（交易的 2.9%）。谁有想法使这项工作与其他/更便宜的解决方案一起使用？

我们的案例：用户应该能够相互支付。当用户 A 向用户 B 销售产品时，用户 A 向用户 B 请求付款，而用户 B 向用户 A 付款。在他们的设置中，用户可以输入他们的帐号（因此这可能会不时变化）。付款将直接支付给其他用户，无需我们的干预。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:38:39.450

如果您要销售数字内容，请查看 Google 电子钱包中的数字商品。基本交易费用为 1.9%。

[https://developers.google.com/commerce/wallet/digital/](https://developers.google.com/commerce/wallet/digital/)

# c - 将从 fgets 获得的字符串传递给函数并在内部使用它

> ID：15046105
> 
> 赞同：0
> 
> 时间：2013-02-23T21:45:47.003
> 
> 标签：c, segmentation-fault

我有以下代码：

```
void main()
{
  // Ask user for input file name
  char file_name[100]; 
  printf("File Name?: \n");
  fgets(file_name, 100, stdin);
  printf("Your input: %s", file_name);  
  processFile(file_name);
} 
```

用于获取需要读取的输入文件的值。然后在 processFile 函数中，我执行以下操作：

```
void processFile(char *file_name)
{
    FILE *in = fopen(file_name,"r");
} 
```

但是我遇到了分段错误（核心转储）。我不明白为什么。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-23T21:56:37.647

换行符使 fgets 停止读取，但它被函数视为有效字符并包含在复制到 str 的字符串中。

[http://www.cplusplus.com/reference/cstdio/fgets/](http://www.cplusplus.com/reference/cstdio/fgets/)

尝试

```
 scanf("%s", file_name); 
```

# facebook - 如何在 R 中获取最受欢迎的 Facebook 帖子

> ID：15046111
> 
> 赞同：1
> 
> 时间：2013-02-23T21:46:21.617
> 
> 标签：facebook, r, https, rcurl, geturl

我正在尝试使用以下代码从 Facebook 页面获取帖子。即使当我在浏览器中键入它时查询有效，我也会收到错误消息。这是我得到的错误：

```
WWW-Authenticate: OAuth "Facebook Platform" "invalid_request" "Unknown path components: 
```

任何想法都非常感谢！

```
# go to 'https://developers.facebook.com/tools/explorer' to get your access token
access_token <- "### token ###"

require(RCurl)
require(rjson)

cafile <- system.file("CurlSSL", "cacert.pem", package = "RCurl")

options(RCurlOptions = list(verbose = TRUE, followlocation = TRUE, timeout = 100, useragent = "R"))

# set the curl options
curl <- getCurlHandle()
options(RCurlOptions = list(capath = system.file("CurlSSL", "cacert.pem",
                                             package = "RCurl"),
                        ssl.verifypeer = FALSE, verbose = TRUE, cookiejar = 'my_cookies.txt', 
                        cookiefile = 'my_cookies.txt',   followlocation = TRUE,                                                                        
                        useragent = 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.3) Gecko/20070309 Firefox/2.0.0.3'))
curlSetOpt(.opts = list(proxy = 'proxyserver:port'), curl = curl)

# Facebook json function copied from original (Romain Francois) post
facebook <-  function( path = "me", access_token, options){
if( !missing(options) ){
options <- sprintf( "?%s", paste( names(options), "=", unlist(options), collapse = "&", sep = "" ) )
} else {
options <- ""
}
data <- getURL( sprintf( "https://graph.facebook.com/%s%s&access_token=%s", path, options, access_token ) )
fromJSON( data )
}

### TED FACEBOOK PAGE
# http://www.facebook.com/TED
# TED's Facebook ID 29092950651 can be found on http://graph.facebook.com/TED

ted <- list()
i<-0
next.path <- "29092950651/posts"

# download all TED posts
while(length(next.path)!=0) {
  i<-i+1
  ted[[i]] <- facebook( path=next.path , access_token=access_token)
  next.path <- sub("https://graph.facebook.com/","",ted[[i]]$paging$'next')
}
ted[[i]] <- NULL

# parse just video links posted by TED
parse.count.ted <- function(x) 
  if (x$type=="link" & x$from$id=="29092950651") x$likes$count else NA
parse.link.ted <- function(x) 
  if (x$type=="link" & x$from$id=="29092950651") x$link else NA
ted.counts <- unlist(sapply(ted, parse.master, f=parse.count.ted))
ted.links <- unlist(sapply(ted, parse.master, f=parse.link.ted))

# see three most popular talks
ted.links[order(ted.counts,decreasing=TRUE)][1:3] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T23:56:21.850

这可能是 URL 的格式问题。如果`options`未指定参数，则生成的 URL 将如下所示：`/me/photos&access_token=...`。在这里，根据 Facebook API，这[`path`](https://www.rfc-editor.org/rfc/rfc3986#section-3.3)可能`/me/photos&access_token`不是有效的 URL 组件。

我认为对该功能的以下更改`facebook`将解决此问题：

```
require(RCurl)
require(rjson)

facebook <-  function( path = "me", access_token = token, options){
    if( !missing(options) ){
        options <- sprintf( 
                           "?%s&", 
                           paste( 
                                 names(options), "=", unlist(options), 
                                 collapse = "&", sep = "" 
                                 ) 
                           )
    } else {
        options <- "?"
    }

    urlTemplate <- "https://graph.facebook.com/%s%saccess_token=%s"
    data <- getURL( 
                   sprintf( 
                           urlTemplate, 
                           path,
                           options,
                           access_token 
                           ) 
                    )
    fromJSON( data )
} 
```

现在，即使`options`缺少参数，生成的 URL 也会如下所示`/me/photos?access_token=...`：

# vb.net - 异步进度条更新

> ID：15046112
> 
> 赞同：0
> 
> 时间：2013-02-23T21:46:28.403
> 
> 标签：vb.net, multithreading, asp.net-mvc-3, asynchronous

这是一个 vb.net mvc 3 应用程序。我是异步和线程组合的新手，所以这在 2 个级别上有点过头了。我有一个长时间运行的进程，它以设定的时间间隔发送大量电子邮件以避免条款使用违规..不仅对于这个任务，而且对于其他选项我想添加一个通过java更新的进度条..我找到了一篇关于做这样的事情的博客文章......我有以下代码但是那里似乎是进度条从不显示的问题...

下面是我的extendedTaskRun 类：

```
 Imports System.Collections.Generic
   Imports System.Linq
   Imports System.Threading
   Namespace ExtendedTaskHandler

''' <summary>
''' Long Running Test Class.
''' </summary>
Public Class extendedTaskRun

    Private Shared syncRoot As New Object()

    ''' <summary>
    ''' Gets or sets the process status.
    ''' </summary>
    ''' <value>The process status.</value>
    Private Shared Property ProcessStatus() As IDictionary(Of String, Integer)
        Get
            Return m_ProcessStatus
        End Get
        Set(value As IDictionary(Of String, Integer))
            m_ProcessStatus = value
        End Set
    End Property
    Private Shared m_ProcessStatus As IDictionary(Of String, Integer)

    ''' <summary>
    ''' Initializes a new instance of the <see cref="extendedTaskRun"/> class.
    ''' </summary>
    Public Sub New()
        If ProcessStatus Is Nothing Then
            ProcessStatus = New Dictionary(Of String, Integer)()
        End If
    End Sub

    Public Sub SetStatus(ByVal id As String, ByVal value As Integer)
        SyncLock syncRoot
            ProcessStatus(id) = value
        End SyncLock
    End Sub

    ''' <summary>
    ''' Processes the long running action.
    ''' </summary>
    ''' <param name="id">The id.</param>
    Public Function ProcessLongRunningAction(id As String) As String
        For i As Integer = 1 To 100
            Thread.Sleep(100)
            SyncLock syncRoot
                ProcessStatus(id) = i
            End SyncLock
        Next
        Return id
    End Function

    ''' <summary>
    ''' Adds the specified id.
    ''' </summary>
    ''' <param name="id">The id.</param>
    Public Sub Add(id As String)
        SyncLock syncRoot
            ProcessStatus.Add(id, 0)
        End SyncLock
    End Sub

    ''' <summary>
    ''' Removes the specified id.
    ''' </summary>
    ''' <param name="id">The id.</param>
    Public Sub Remove(id As String)
        SyncLock syncRoot
            ProcessStatus.Remove(id)
        End SyncLock
    End Sub

    ''' <summary>
    ''' Gets the status.
    ''' </summary>
    ''' <param name="id">The id.</param>
    Public Function GetStatus(id As String) As Integer
        SyncLock syncRoot
            If ProcessStatus.Keys.Where(Function(x) x = id).Count = 1 Then
                Return ProcessStatus(id)
            Else
                Return 100
            End If
        End SyncLock
    End Function
End Class
End Namespace 
```

然后我的控制器如下：

```
 Public Function MassEmailStatus() As ActionResult
        MassEmailAddressList = TempData("emailaddresses")
        TempData.Clear()
        TempData.Add("emailaddresses", MassEmailAddressList)
        Return View()
    End Function

    Public Function MassEmailSendingStatus(ByVal id As String) As ActionResult
        Dim d As List(Of String) = TempData("emList")
        Dim EmailCount As Integer = d.Count
        Dim triedCount As Integer = 0

        Dim extendedTaskRun As New extendedTaskRun
        extendedTaskRun.Add(id)
        Dim percentDone As Integer = 0
        While Not (triedCount = EmailCount)
            For Each em In d
                EmailSender(em, String.Empty)
                triedCount += 1
                percentDone = EmailCount / 100 + triedCount
                extendedTaskRun.SetStatus(id, percentDone)
            Next
        End While
        extendedTaskRun.Remove(id)
        Return View()
    End Function 
```

然后 MassEmailStatus 视图如下：

```
 @Code 
ViewData("Title") = "MassEmailSendingStatus"
TempData.Add("emList", TempData("emailaddresses"))
end Code

 <div>
 <a href="#" id="startProcess">Start Long Running Process</a>
 </div>
 <br />
<div id="statusBorder">
<div id="statusFill">
</div>
 </div>
 <script type="text/javascript">
  var uniqueId = '@Guid.NewGuid().ToString()';
  var tdata = '@TempData("emailaddresses")';
          $(document).ready(function (event) {
          $('#startProcess').click(function () {
              $.post("MassEmailSendingStatus", { id: uniqueId }, function () {
              $('#statusBorder').show();
              getStatus();
          });
          event.preventDefault;
      });
  });

  function getStatus() {
      var url = 'Admin/GetCurrentProgress/' + uniqueId;
      $.get(url, function (data) {
          if (data != "100") {
              $('#status').html(data);
              $('#statusFill').width(data);
              window.setTimeout("getStatus()", 100);
          }
          else {
              $('#status').html("Done");
              $('#statusBorder').hide();
              alert("The Long process has finished");
          };
      });
  }

</script> 
```

这些是博客提到的附加功能，并且在我的代码中，但通过查看代码我知道它们无法正确连接。

```
 Private Delegate Function ProcessTask(id As String) As String
    Private extendedRunClass As New extendedTaskRun

    ''' <summary>
    ''' Starts the long running process.
    ''' </summary>
    ''' <param name="id">The id.</param>
    Public Sub StartLongRunningProcess(id As String)
        extendedRunClass.Add(id)
        Dim processTask As New ProcessTask(AddressOf extendedRunClass.ProcessLongRunningAction)
        processTask.BeginInvoke(id, New AsyncCallback(AddressOf EndLongRunningProcess), processTask)
    End Sub

    ''' <summary>
    ''' Ends the long running process.
    ''' </summary>
    ''' <param name="result">The result.</param>
    Public Sub EndLongRunningProcess(result As IAsyncResult)
        Dim processTask As ProcessTask = DirectCast(result.AsyncState, ProcessTask)
        Dim id As String = processTask.EndInvoke(result)
        extendedRunClass.Remove(id)
    End Sub

    ''' <summary>
    ''' Gets the current progress.
    ''' </summary>
    ''' <param name="id">The id.</param>
    Public Function GetCurrentProgress(id As String) As ContentResult
        Me.ControllerContext.HttpContext.Response.AddHeader("cache-control", "no-cache")
        Dim currentProgress = extendedRunClass.GetStatus(id).ToString()
        Return Content(currentProgress)
    End Function 
```

我知道我实际上并没有开始这个过程，因为我只是`EmailSender(em, String.Empty)`在 MassEmailSendingStatus 控制器的每个循环内调用工作发生的地方......我必须做些什么才能正确解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:28:19.470

哇，我的代码被破坏了...在获取博客代码并将其放入自己的快速项目并启动它之后，我能够看到正在发生的事情..我现在可以工作了...我将使用有点工作解决方案......现在正在努力将不仅仅是百分比返回到进度条，因此消息显示为它的工作..不知道我将如何做到这一点，但我想我会在 getCurrentProgress 方法中作为从extendedTaskRun 类返回的字符串...

# java - JWebBrowser - 设置代理

> ID：15046113
> 
> 赞同：0
> 
> 时间：2013-02-23T21:46:42.870
> 
> 标签：java, proxy, jwebbrowser

我正在尝试创建的这个程序中使用 JWebBrowser，我只是想知道如何通过 JWebBrowser 设置代理。我看了这篇[设置代理的帖子？](https://stackoverflow.com/questions/10108371/setting-the-proxy)并尝试过，但没有奏效。我试过谷歌这个，我什么也找不到。如果有人有任何解决方案，将不胜感激。谢谢。

这是我用来尝试使其工作的代码：

```
 System.getProperties().put("http.proxyHost", proxy.getIp());
    System.getProperties().put("http.proxyPort", Integer.toString(proxy.getPort()));
    System.getProperties().put("http.proxyUser", "");
    System.getProperties().put("http.proxyPassword", "");
    System.getProperties().put("proxySet", "true"); 
```

是的，它是一个有效的代理。我试图去一个 ip 检查器（通过 JWebBrowser）来确保我的 ip 确实改变了，但它没有。如果有人可以帮助我，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T22:11:04.423

Windows：所有浏览器实例，无论本机渲染器如何，都会自动使用 Windows 的全局代理设置。可以随时在 Windows 控制面板中更改这些设置。

这是来自 www.eclipse.org/swt/faq.php#xpthemes。您可以通过操纵注册表调用“reg add”来最好地从 Java 设置全局代理设置。

# android - onKeyDown() 不适用于扩展类

> ID：15046114
> 
> 赞同：0
> 
> 时间：2013-02-23T21:46:46.940
> 
> 标签：android

我创建了一个自定义 GalleryView，它适用于我的设备（Samsung Galaxy S III 和 Nexus 4），但是当我尝试在我的模拟器中使用它时，出现以下错误！！！

```
02-24 01:01:03.593: E/AndroidRuntime(3429): FATAL EXCEPTION: Thread-11
02-24 01:01:03.593: E/AndroidRuntime(3429): android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
02-24 01:01:03.593: E/AndroidRuntime(3429):     at android.view.ViewRoot.checkThread(ViewRoot.java:2802)
02-24 01:01:03.593: E/AndroidRuntime(3429):     at android.view.ViewRoot.playSoundEffect(ViewRoot.java:2581)
02-24 01:01:03.593: E/AndroidRuntime(3429):     at android.view.View.playSoundEffect(View.java:8516)
02-24 01:01:03.593: E/AndroidRuntime(3429):     at android.widget.Gallery.onKeyDown(Gallery.java:1109)
02-24 01:01:03.593: E/AndroidRuntime(3429):     at com.example.coverflow.ui.galleryView$1.run(galleryView.java:55)
02-24 01:01:03.593: E/AndroidRuntime(3429):     at java.lang.Thread.run(Thread.java:1096) 
```

这些错误提到了我的代码的以下几行：

```
public void startSlideShow(final int periodTime)
{
    final Runnable __runnable = new Runnable()
    {
        @Override
        public void run() 
        {
            if (!isTouched) 
                galleryView.this.onKeyDown(KeyEvent.KEYCODE_DPAD_RIGHT, null);
            mHandler.postDelayed(this, periodTime);              
        }
    };
    new Thread(__runnable).start();

    this.setOnTouchListener(new View.OnTouchListener()
    {
        @Override
        public boolean onTouch(View view, MotionEvent event) 
        {
            int currentEvent = event.getAction();
            if (currentEvent == MotionEvent.ACTION_DOWN 
                    || currentEvent == MotionEvent.ACTION_MOVE)
                isTouched = true;
            else
            {
                isTouched = false;
                // Reset handler
                mHandler.removeCallbacks(__runnable);
                mHandler.postDelayed(__runnable, periodTime);
            }
            return false;
        }
    });
} 
```

***第 55 行是*** `galleryView.this.onKeyDown(KeyEvent.KEYCODE_DPAD_RIGHT, null);`

我应该怎么做才能避免这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:52:18.357

您正在尝试从活动 UI 线程以外的其他线程更新 UI。

就像错误说的：

```
Only the original thread that created a view hierarchy can touch its views. 
```

尝试用`runOnUIThread(new Runnable{ ... }())`

示例：[我可以举一个使用 runOnUiThread 显示 toast 的示例吗？](https://stackoverflow.com/questions/11791157/can-i-have-an-example-of-displaying-a-toast-using-runonuithread)

# unity3d - 为什么 Unity3D RaycastHit.textureCoord 总是 0,0？

> ID：15046115
> 
> 赞同：3
> 
> 时间：2013-02-23T21:46:52.353
> 
> 标签：unity3d

```
var startPoint = 
  shaft.transform.position 
  + shaft.transform.forward;
var ray = new Ray(
    startPoint, 
    -shaft.transform.forward
  );

RaycastHit rayCastHit;
Physics.Raycast(ray, out rayCastHit);
var textured2D = (Texture2D)discoBall.renderer.material.mainTexture;
Vector2 textureCoord = rayCastHit.textureCoord;
Debug.Log(string.Format(
    "{0},{1} at distance {2}", 
    textureCoord.x * textured2D.width, 
    textureCoord.y * textured2D.height, 
    rayCastHit.distance
  )); 
```

我有一个球体，里面有一个对象“轴”对象。我将 startPoint 计算为在轴指向的方向上与轴的距离（以离开球体）。然后我创建一条以相同距离指向球体的射线，使其与我的球体外部发生碰撞。

Debug.Log 输出纹理坐标的 x,y = 0,0，距离的正确值 0.35。当我的球体上确实有一个带有纹理的材质时，为什么 textureCoord 总是 0,0？

![球体属性](../Images/371ee3cb7ce0461886ce1af9efcf95d8.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T21:57:40.183

实际上让我在这里移动我的评论，球体使用网格对撞机还是球体对撞机？如果它不使用网格碰撞器，[textureCoord 返回 Vector2.zero](http://docs.unity3d.com/Documentation/ScriptReference/RaycastHit-textureCoord.html)。

**更新**：

要更改 GameObject 的碰撞器类型，请在 Unity 编辑器中突出显示它，然后转到**Component->Physics->MeshCollider**。如果提示“替换现有组件”，请选择“替换”。

从 Unity 的**GameObject->Create_Other**菜单添加的游戏对象往往会根据对象的形状（球体、盒子等）默认使用碰撞器，因为网格碰撞器的计算成本更高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T21:56:03.453

texture2d 的宽度和高度实际上是您所期望的吗？可能 maintexture 不是您正在使用的着色器上的正确纹理。

# kohana - 从 kohana 2.3 升级到 3.3

> ID：15046116
> 
> 赞同：0
> 
> 时间：2013-02-23T21:47:12.717
> 
> 标签：kohana

我有一个用 kohana 2.3 编写的项目。它必须重写为 3.3，在这样做的同时，我想清理整个代码，修复一些错误等。项目本身包含超过 10k 行代码。

您会推荐我什么，从头开始重写所有内容，或者只是在本机代码中逐步修复所有内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:13:39.857

我建议从头开始编写所有内容。Kohana 版本 2.3 和 3.3 之间存在巨大差异，因此分解您的代码并为 3.3 构建它会比从头开始编写会带来更多的痛苦和问题。

您也可以将现有项目保留在 Kohana 2.x 中，并为任何未来的项目恢复到 Kohana 3.x。只要您的项目没有任何问题，就没有理由切换到 3.x。

有关 Kohana 2.x 与 3.x 的更多信息，请参阅这篇文章： http://kerkness.ca/kowiki/doku.php?id= [what_version_of_kohana_should_i_use](http://kerkness.ca/kowiki/doku.php?id=what_version_of_kohana_should_i_use)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:33:24.513

这可能是一个非常广泛的问题，考虑到我们对此知之甚少，很难提供最适合您的项目的答案。

老实说，>10k 行并不是那么多，考虑到新的 Kohana 版本可能为您提供的所有好处，它绝对值得考虑，但如果当前项目已经设计良好并编写了对 Kohana 3.3 的简单改编可能足够。

您可能需要参考 Kohana 指南，其中提供了从[2.x -> 3.0](http://kohanaframework.org/3.0/guide/kohana/upgrading)到[3.0 -> 3.1](http://kohanaframework.org/3.1/guide/kohana/upgrading)、[3.1 -> 3.2](http://kohanaframework.org/3.2/guide/kohana/upgrading)[以及最新迁移指南](http://kohanaframework.org/3.3/guide/kohana/upgrading)结尾的版本之间的更改的详细信息，以了解您将要处理的内容与适应时。

另一方面，重写可能会更快完成。很难判断和决定。

# jquery - 如何使用 ASP.NET MVC 手动启用 jQuery 验证

> ID：15046117
> 
> 赞同：18
> 
> 时间：2013-02-23T21:47:12.693
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4, jquery-validate, unobtrusive-validation

我正在努力理解与 ASP.NET MVC 连接的 jQuery 验证的一些基础知识。

这个问题的简短版本是：我错过了什么魔法，允许生成的代码`@Html.EditorFor()`执行 jQuery 验证，但不起作用我尝试使用完全相同的 HTML 连接我自己的 jQuery 验证？

作为学习练习（并且因为它模仿了我在网站中真正想做的事情），我在 Visual Studio 2012 中创建了一个新的 MVC 4 应用程序。我添加了一个视图模型：

```
using System.ComponentModel.DataAnnotations;
namespace ValidationTest.Models
{
    public class MyViewModel
    {
        [Required]
        public string MyStringValue { get; set; }
    }
} 
```

我修改了 Views\Home\Index.cshtml 以根据我的视图模型创建一个表单，如下所示：

```
@model ValidationTest.Models.MyViewModel
@using (Html.BeginForm(new { id = "MyForm" })) {
    @Html.LabelFor(m => m.MyStringValue)
    @Html.EditorFor(m => m.MyStringValue)
    @Html.ValidationMessageFor(m => m.MyStringValue)

    <br />
    <input type="submit" value="Submit" />
} 
```

最后，我修改了 Home 控制器以将视图模型提供给表单并处理相关的 POST，如下所示：

```
using System.Web;
using System.Web.Mvc;
using ValidationTest.Models;

namespace ValidationTest.Controllers
{
    public class HomeController : Controller
    {
        [HttpGet]
        public ActionResult Index()
        {
            var viewModel = new MyViewModel();
            return View(viewModel);
        }

        [HttpPost]
        public ActionResult Index(MyViewModel viewModel)
        {
            if (!ModelState.IsValid) return View(viewModel);

            return RedirectToAction("About");
        }

        public ActionResult About()
        {
            ViewBag.Message = "Your app description page.";
            return View();
        }

        public ActionResult Contact()
        {
            ViewBag.Message = "Your contact page.";
            return View();
        }
    }
} 
```

当我运行项目时，网页会显示一个文本框并神奇地验证用户必须输入一个值。到现在为止还挺好...

现在，我的实际应用是在线调查。它根据脚本显示问题并征求答案。我的实际视图模型包含映射到问题文本的属性、用户提供的值等。视图模型还包含一个布尔必需属性，它指定用户是否必须提供一个值（即是否启用视图中的“必需”验证） - 所以这意味着我需要删除`[Required]`视图模型中 MyStringValue 属性上的属性，并根据视图模型中的 Required 属性提供我自己的验证魔法。

这就是我迷路的地方。在 IE 中，我可以看到示例应用程序中的 @html.xxx 调用（如上所述）为表单生成了以下 HTML：

```
<label for="MyStringValue">MyStringValue</label>
<input  class="text-box single-line" 
        data-val="true" 
        data-val-required="The MyStringValue field is required." 
        id="MyStringValue" 
        name="MyStringValue" 
        type="text" 
        value="" />
<span data-valmsg-for="MyStringValue" data-valmsg-replace="true"></span> 
```

但是我在页面上的其他地方看不到任何明显引用 jQuery-validation 库的 HTML，也没有看到启用验证的 JavaScript 代码，所以我根本不明白为什么会这样。

此外，如果我删除该`[Required]`属性，并对 View 进行硬编码以发出上述 HTML（没有神奇的 @html.xxx() 调用），则根本不会发生验证。

我错过了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-04T02:01:39.557

是的，我错过了一些非常基本的东西。

为新的 MVC 4 项目创建的页面模板 (_Layout.cshtml) 在页面末尾包含以下代码：

```
 @Scripts.Render("~/bundles/jquery")
        @RenderSection("scripts", required: false)
    </body>
</html> 
```

该代码拉入 jQuery 库（在浏览器看到页面上的所有 HTML 之后），然后呈现可由视图提供的可选“部分”。该代码不会**拉**入 jQuery 验证库。

ASP.NET MVC 验证无需 jQuery 验证即可工作，但所有验证都在服务器中完成。细心的观察者会注意到，一旦警告必须提供缺失的字符串值，客户端验证只需在被冒犯的文本框中输入单个字符即可使警告消失。但是如果没有启用 jQuery 验证，在文本框中输入内容不会动态删除警告。

为了“打开”单个视图的 jQuery 验证，此代码需要驻留在视图的 cshtml 文件中的某个位置（从风格上讲，它希望位于文件的末尾，因为它将显示在 HTML 的末尾） ：

```
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

So, the short answer to my question is to add the above code at the end of my Views\Home\Index.cshtml file. This enables jQuery validation, magic happens, and the data-xxx attributes are no longer ignored. Life is good.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-24T17:10:52.593

没有你缺少的魔法。Microsoft 'unobtrusive validation' 脚本可用于任何使用 jquery 和 jquery validate 的网站。它不依赖于 ASP.NET - 只要 HTML 是不显眼的脚本所期望的格式，那么脚本就可以工作。 [这个小提琴显示了应用于不是由 ASP.NET 生成的表单的不显眼的脚本](http://jsfiddle.net/9RqQZ/)。

不显眼的脚本有两个主要任务：

1.  初始化 jquery.validate.js 插件
2.  读取标记中的 data-val* 属性并将其转换为 jquery 验证规则

[您可能已经阅读](http://bradwilson.typepad.com/blog/2010/10/mvc3-unobtrusive-validation.html)过，不显眼的脚本读取的标记属性如下

```
data-val="true"
data-val-rulename="message"
data-val-rulename-paramname1="paramvalue"
data-val-rulename-paramname2="paramvalue" 
```

所以输入字段可能看起来像这样

```
 <input
     data-val="true" 
     data-val-required="This field is required..." 
     data-val-number="Please enter a number..."
     data-val-range="Must be between 50 and 100...",
     data-val-range-min="50"
     data-val-range-max="100"
     id="mynumber" 
     name="mynumber" 
     type="text" value="" /> 
```

我个人对不显眼的脚本的看法是，它属于 Steve Sanderson 在[他的 MVC 书中](http://www.amazon.co.uk/Pro-ASP-NET-Framework-Steven-Sanderson/dp/1430210079/ref=cm_cr_pr_pb_i)所说的“demoware”类别。它做了一些开箱即用的好东西，但[它阻碍了 jquery validate](http://www.tigraine.at/2011/08/26/jquery-validate-and-microsofts-unobtrusive-validation-dont-play-well-together/)本身更容易使用。当我开始一个新项目时，我倾向于删除它。

# sql - 从 2 个不同的表中选择值

> ID：15046119
> 
> 赞同：1
> 
> 时间：2013-02-23T21:47:25.557
> 
> 标签：sql, sql-server

我有一张叫Doctor的桌子。

医生表由 4 个字段组成。`DoctorID,DoctorName, DoctorAddress, DoctorSpeciality`

我有另一个名为 PatientData 的表。它有4个字段。`PatientId, PatientName, PatientTelephone, DoctorID`.

我需要编写一个显示以下字段的 SQL；

```
PatientID, PatientName, DoctorName, DoctorSpeciality 
```

1.）我想，我必须在`INNER JOIN`这里使用，但我不知道如何为这种情况编写它。我猜一个`outer join`也可以工作，但我是新手`Joins`。有人可以在这里帮助我吗？

2.) 我可以为我在上面创建`VIEW`的语句创建一个吗？`SQL`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T21:48:33.643

这样的事情应该使用常规`INNER JOIN`——这将返回 Doctor 表中的所有记录以及 PatientData 表中的匹配记录：

```
SELECT PD.PatientId, PD.PatientName, D.DoctorName, D.DoctorSpecialty
FROM Doctor D
   INNER JOIN PatientData PD ON D.DoctorId = PD.DoctorId 
```

如果您想从其他表之一返回所有数据，请考虑使用`OUTER JOIN`（我更喜欢`LEFT JOINs`）。

这是一篇关于连接视觉表示的好文章：http: [//www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

是的，如果你愿意，你可以创建一个视图——取决于你的需要。这样的事情应该很接近：

```
CREATE VIEW DoctorPatients AS
SELECT PD.PatientId, PD.PatientName, D.DoctorName, D.DoctorSpecialty
FROM Doctor D
   INNER JOIN PatientData PD ON D.DoctorId = PD.DoctorId 
```

SQL Server 视图：http: [//msdn.microsoft.com/en-us/library/ms187956.aspx](http://msdn.microsoft.com/en-us/library/ms187956.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T21:51:14.197

这是一个简单的连接

```
SELECT p.PatientID, p.PatientName, d.DoctorName, d.DoctorSpeciality
FROM PatientData p JOIN Doctor d on d.DoctorID = p.PatientID 
```

当然你可以从这里创建一个视图

```
 CREATE VIEW [dbo].[PatientAndDoctor]
   AS
      SELECT p.PatientID, p.PatientName, d.DoctorName, d.DoctorSpeciality
      FROM PatientData p JOIN Doctor d on d.DoctorID = p.PatientID 
```

# jquery-mobile - JQuery Mobile styling dynamic listview

> ID：15046120
> 
> 赞同：2
> 
> 时间：2013-02-23T21:47:44.340
> 
> 标签：jquery-mobile, triggers

I'm using jQuery mobile 1.3.0 and trying to style dynamic elements of a listview. I have a list defined in a pages markup and can add elements to it from an object.

```
<div data-role="content">
      <ul data-role="listview" id="list_logs">

      </ul>
</div> 
```

This is then the code to read items from an object and build the list:

```
for(log in data.logs) {
        $('<li><h2>'+data.logs[log].date+'</h2><p>'+data.logs[log].event+'</p><p>'+data.logs[log].type+'</p></li>').appendTo('#list_logs').trigger("refresh");
} 
```

From what I can understand from the documentation calling trigger("refresh") should style the list content but neither it or trigger("create") are doing much at all. Does anyone have any further insight into this? Thanks in advance.

EDIT: I should add that the stylesheets are in place in the document head and that adding elements statically results in correct styling.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T22:09:29.930

Every component has a designed function for markup enhancement, listview uses:

```
$('#listviewID').listview('refresh'); 
```

In case this is fully dynamically create listview, not just li elements then this line should be used:

```
$('#listviewID').listview().listview('refresh'); 
```

Full list and examples can be found in my other **[ARTICLE](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**, to be transparent it is my blog. Or it can be found **[HERE](https://stackoverflow.com/a/14550417/1848600)**.

# javascript - 如何使用 jQuery 和 Ajax 将对象的动态列表发送到 MVC 中的控制器

> ID：15046124
> 
> 赞同：1
> 
> 时间：2013-02-23T21:48:09.627
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-ajax

我正在使用对象动态填充表单，允许编辑新字段，然后尝试将表单提交到另一个不同对象类型的列表。

我目前正在使用 Ajax 表单来执行此操作，但`<label for=>`属性不会与其他属性一起发送到部分视图结果。

我的控制器部分视图结果如下：

```
[HttpPost]
public PartialViewResult AddToOrder(IList<OrderItemModel> form_list)
{ 
    // do something
} 
```

我认为的Ajax形式如下：

```
@using (Ajax.BeginForm("AddToOrder", "Order", new AjaxOptions { HttpMethod = "POST", UpdateTargetId = "result" }))
{
   for (int i = 0; i < Model.Count; i++)
   {
    <tr>
       <input type="hidden" name="form_list[@i].item_id" value="@Model[i].id" />
       <td><label for="form_list[@i].description">@Model[i].description</label></td>
       <td><label for="form_list[@i].price">@Model[i].price</label></td>
       <td><input type="text" name="form_list[@i].quantity"  value="0" /></td> 
    </tr>
   }

   <td><input type="submit" value="Add to order"/></td>
} 
```

如果我将标签复制为`<input type="hidden">`属性，我需要的所有字段都将发送到部分视图结果，但有没有更好的方法可以使用 jQuery 而不是 Ajax 表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:50:36.943

标签永远不会通过 HTTP POST 提交。只有`<input>`,`<select>`和`<textarea>`元素是。

如果您想将这些值传回，您可以像现在一样使用隐藏的输入字段。

# android - 图像加载期间的多线程问题

> ID：15046126
> 
> 赞同：1
> 
> 时间：2013-02-23T21:48:11.493
> 
> 标签：android, multithreading, android-asynctask

在我的应用程序中，有一个`ListView`使用自定义`CursorAdapter`将数据加载到其中的应用程序，它基本上是一个`ImageView`和一个`TextView`。我正在加载图像`AsyncTask`，现在的问题是，最初所有图像都分配给正确的文本，但是当我快速上下滚动时，它会为每个文本绑定随机图像。由于我使用的是 CursorAdapter ，所以我不能`ViewHolder`在这里使用，那么我该怎么做才能消除这个问题呢？

这是我的示例代码：

```
public class MyAdapter extends CursorAdapter {

    private LayoutInflater mLayoutInflater;
    @SuppressWarnings("unused")
    private Context mContext;

    public MyAdapter(Context context, Cursor c, int flags) {
        super(context, c, flags);
        mContext = context;
        mLayoutInflater = LayoutInflater.from(context);
    }
    public void bindView(View view, Context context, Cursor cursor) {
        String title = cursor.getString(cursor.getColumnIndex(MediaStore.MediaColumns.TITLE));
        String album_id = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media.ALBUM_ID));
        TextView text = (TextView)view.findViewById(R.id.txtTitle);
        text.setText(title);
        Uri sArtworkUri = Uri.parse("content://media/external/audio/albumart");
        Uri uri = ContentUris.withAppendedId(sArtworkUri, Integer.valueOf(album_id));
        new MyImageLoader(context,view).execute(uri);

    }
    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        return mLayoutInflater.inflate(R.layout.row, parent, false);
    }
    private class MyImageLoader extends AsyncTask<Uri, Void, Bitmap>{
        Context context;
        View view;

        MyImageLoader(Context context,View view){
            this.context = context;
            this.view = view;
        }
        @Override
        protected Bitmap doInBackground(Uri... uri) {
            ContentResolver res = context.getContentResolver();
            InputStream in = null;
            try {
                in = res.openInputStream(uri[0]);
            } 
            catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            Bitmap artwork = BitmapFactory.decodeStream(in);
            return artwork;
        }
        protected void onPostExecute(Bitmap bmp){
            ImageView iv = (ImageView)view.findViewById(R.id.imgIcon);
            if(bmp!=null)
                //iv.setImageBitmap(bmp);
                iv.setImageBitmap(Bitmap.createScaledBitmap(bmp, 100, 100, false));
        }
    }
} 
```

**更新：** 我应用了 setTag 方法，现在洗牌变少了，但是当我快速滚动时，旧图像会持续一秒钟，直到加载正确的图像。这是新代码：

```
public void bindView(View view, Context context, Cursor cursor) {
        String title = cursor.getString(cursor.getColumnIndex(MediaStore.MediaColumns.TITLE));
        String album_id = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media.ALBUM_ID));
        ImageView iv = (ImageView)view.findViewById(R.id.imgIcon);
        TextView text = (TextView)view.findViewById(R.id.txtTitle);
        text.setText(title);
        Uri sArtworkUri = Uri.parse("content://media/external/audio/albumart");
        Uri uri = ContentUris.withAppendedId(sArtworkUri, Integer.valueOf(album_id));
// *****TAG SET*****
        iv.setTag(uri);
//***PASSING BOTH URI AND IMAGEVIEW TO CONSTRUCTOR***
        new MyImageLoader(context,view,iv,uri).execute(uri);

    }
    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        View v = mLayoutInflater.inflate(R.layout.row, parent, false);
        //v.setTag(R.id.imgIcon, v.findViewById(R.id.imgIcon));
        return v;
    }
    private class MyImageLoader extends AsyncTask<Object, Void, Bitmap>{
        Context context;
        View v;
        ImageView iv;
        Uri u;

        MyImageLoader(Context context,View v,ImageView iv,Uri u){
            this.context = context;
            this.v = v;
            this.iv = iv;   
            this.u = u;
        }
        @Override

        protected synchronized Bitmap doInBackground(Object... param) {
            ContentResolver res = context.getContentResolver();
            InputStream in = null;
            try {
                Uri uri= (Uri)param[0];
                in = res.openInputStream(uri);
            } 
            catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            Bitmap artwork = BitmapFactory.decodeStream(in);

            return artwork;
        }
        protected void onPostExecute(Bitmap bmp){

            if(bmp!=null)
            {   ImageView iv = (ImageView)v.findViewById(R.id.imgIcon);
                if(iv.getTag().toString().equals(u.toString()))
                    iv.setImageBitmap(Bitmap.createScaledBitmap(bmp, 100, 100, false));
            }
        }
    } 
```

**更新：**在调用后台任务之前设置占位符图像会更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T14:08:52.380

我使用的一种解决方案是将 附加`Uri`到`ImageView`via `setTag()`。然后，当您去更新 时`ImageView`，检查`Uri`您要应用的图像的 是否与 中的值匹配`getTag()`。如果是这样，请继续更新`ImageView`. 如果没有，`ImageView`则被回收，您可以跳过更新。

另一种方法是[在`setHasTransientState(true)`](http://developer.android.com/reference/android/view/View.html#setHasTransientState%28boolean%29)您确定`ImageView`缓存未命中并需要启动`AsyncTask`. 这将导致`AdapterView`避免回收该行，直到进行了匹配的`setHasTransientState(false)`调用。Chet Haase 有[一个关于此的 DevBytes 视频](https://plus.google.com/108967384991768947849/posts/cEoMo5H9v5R)，在将动画应用于`ListView`一行并试图避免回收问题的背景下。但是，`setHasTransientState()`它是 API 级别 16 的新功能，因此如果您尝试支持 Android 4.0 或更早的设备，这将不是一个可用的选项。

# php - 如何使用 PHP 自动创建虚拟子域？

> ID：15046133
> 
> 赞同：0
> 
> 时间：2013-02-23T21:48:52.863
> 
> 标签：php, .htaccess, subdomain, virtualhost

我非常感谢对我的问题的任何回答，因为我正在寻找大约两周的时间。我的目标是使用 PHP 创建目录并将它们显示为虚拟子域（所有过程都应该自动完成）。

例如： **example.com/test/index.php**应该被认为是： **test.example.com/index.php**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:53:45.643

您不能仅使用 PHP 来做到这一点。您需要动态 shell 脚本来为每个子域创建 DNS 区域文件。

**编辑：**

可能@Robyflc 是对的，您可以根据 PHP 中的主机名来设置条件。如果您想要子域或只是一些逻辑，例如创建 URL user1.domain.com，然后根据它的值找到文件夹，这个问题并不清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T21:54:19.607

我能够做到这一点的唯一方法是使用通配符子域。如果您的服务器支持这一点，那么只需使用前端控制器来管理请求即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T22:54:03.997

为此，我建议您购买 VPS 服务器

URL重写是可能的。

# ruby-on-rails - S3 跨域资源共享不工作

> ID：15046136
> 
> 赞同：7
> 
> 时间：2013-02-23T21:49:05.273
> 
> 标签：ruby-on-rails, amazon-s3, cors

我正在尝试使用[blur.js](http://blurjs.com/)来模糊用户上传的图像，并将图像存储在 Amazon S3 上。我已经设置了我认为正确的 CORS 配置，但是图像无法模糊，并且在浏览器中出现此错误：

```
 Unable to get image data from canvas because the canvas has been tainted by cross-origin data. 
```

这是我的 CORS 配置：

```
 <?xml version="1.0" encoding="UTF-8"?>
  <CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
  <CORSRule>
    <AllowedOrigin>*</AllowedOrigin>
    <AllowedMethod>GET</AllowedMethod>
    <AllowedMethod>POST</AllowedMethod>
    <AllowedHeader>*</AllowedHeader>
  </CORSRule>
  </CORSConfiguration> 
```

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-12T21:22:42.567

我刚刚做了。基本上，您可以按照以下步骤编辑您的 S3 存储桶权限并使其正常工作。如果您需要任何进一步的帮助，请在下方留言。

1) 登录 AWS 管理控制台并在[https://console.aws.amazon.com/s3/打开 Amazon S3 控制台](https://console.aws.amazon.com/s3/)

2) 在 Buckets 列表中，打开要查看其属性的 Bucket，然后点击“添加 CORS 配置”

![亚马逊屏幕截图](../Images/c88211558e021524ebd2aa0932360a2c.png)

3）写下你愿意在标签之间添加的规则`<CORSConfiguration>`

```
<CORSConfiguration>
  <CORSRule>
    <AllowedOrigin>*</AllowedOrigin>
    <AllowedMethod>GET</AllowedMethod>
    <MaxAgeSeconds>3000</MaxAgeSeconds>
    <AllowedHeader>*</AllowedHeader>
  </CORSRule>
</CORSConfiguration> 
```

您可以在以下位置了解有关规则的更多信息：http: [//docs.aws.amazon.com/AmazonS3/latest/dev/cors.html](http://docs.aws.amazon.com/AmazonS3/latest/dev/cors.html)

4) 在您将在画布中使用的图像上指定 crossorigin='anonymous'

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T14:58:25.717

我怀疑您没有使用 CORS 支持所需的正确 S3 端点地址格式。

即 S3 存储桶支持以下两种格式：

1.  `http://bucket.s3.amazonaws.com/object`
2.  `http://s3.amazonaws.com/bucket/object`

但是根据[文档](http://docs.aws.amazon.com/AmazonS3/latest/dev/cors.html#example-scenarios-cors)，只有第一个 URL 可以与 CORS 一起使用：

> 使用 CORS，您可以将存储桶配置为显式启用来自 website.s3-website-us-east-1.amazonaws.com 的跨域请求。

# java - 比较 2 个数组并计算唯一条目

> ID：15046140
> 
> 赞同：0
> 
> 时间：2013-02-23T21:49:47.340
> 
> 标签：java, android, eclipse

我正在编写一个 Android 应用程序。我有一部分用户可以将位置添加到数组中。然后这个位置被用来存储历史（他们点击了按钮@时间@位置）。我现在需要计算他们在每个位置单击按钮的次数。

例如：
拱廊：1
公园：4
游泳池：0

到目前为止，我一直在尝试使用 HashSet 并创建一个二维数组，但似乎必须有更好的方法（而且我无论如何都无法使用这种方法）。干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:05:10.297

那这个呢：

```
private Map<String, HistoryData> historyMap = new HashMap<String, HistoryData>();

private class HistoryData {
    int count;
    List<String> locations = new ArrayList<String>();
}

private void updateClickCount(String name){
    HistoryData data = getHistoryData(name);
    data.count++;
}
private void addLocatioon(String name, String location){
    HistoryData data = getHistoryData(name);
    data.locations.add(location);
}

private HistoryData getHistoryData(String name){
    HistoryData data = historyMap.get(name);
    if(data == null){
        data = new HistoryData();
        historyMap.put(name, data);
    }
    return data;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:50:57.837

听起来像是 a [`HashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)，或者，如果您想使用 Google`Guava`的库， a[`MultiSet`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multiset.html)将满足您的需求。

从上面的链接：

> Guava 提供了一种新的集合类型 Multiset，它支持添加元素的倍数，并计算 multiset 包含的每个元素的出现次数。值得注意的是，Multiset 不支持负元素计数，也不支持大于 Integer.MAX_VALUE 的元素计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T21:59:29.550

我认为您的问题描述得很糟糕，尤其是问题标题与问题描述不符。

如果您正在使用数组，并且您正在尝试确定一个数组中有多少条目在另一个数组中不存在：

```
List<Integer> aList =  Arrays.asList(a);
List<Integer> bList =  Arrays.asList(b);
int countBefore = aList.size();
aList.retainsAll(bList);
int uniqueCount = countBefore - aList.size(); 
```

aList 现在将仅包含也在 bList 中的元素，因此比较之前和之后的长度可以得出 bList 中唯一元素的数量。

# eclipse - eclipse如何添加包含我的功能的窗口

> ID：15046142
> 
> 赞同：0
> 
> 时间：2013-02-23T21:49:56.953
> 
> 标签：eclipse

我删除了显示我现在打开的每个类中的函数的窗口，它在 Eclipse 的右侧，我知道我必须去`Window->Show View`，但是那又如何呢？谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T21:51:35.723

窗口 -> 显示视图 -> 大纲

# ruby-on-rails - Rails 在单独的页面上创建嵌套资源

> ID：15046143
> 
> 赞同：0
> 
> 时间：2013-02-23T21:49:57.933
> 
> 标签：ruby-on-rails

```
resources :books do 
    resources :chapters
end 
```

假设我有上述正确嵌套的资源。我想创建一个页面来创建父书资源和另一个页面来创建章节资源。创建章节时，我希望用户能够选择他们创建的父书。

现在我有...

```
protected
def find_book
    @book = Book.find(params[:book_id])
end 
```

...在章节控制器中，但我相信这仅在 URL 中已经存在书籍 ID 时才有效。因此，要创建新章节，当我希望能够在单独的页面上创建章节时，我必须访问“rootpath/book/book_id/chapter/new”。

虽然我真的不确定如何解决这个问题，但现在我的计划是在链接嵌套资源的章节创建页面上放置一个关联（？）表单。

问题是，我对 Web 开发真的很陌生，我不确定我是否完全正确地处理了这个问题。我将如何放置一个将 :book_id 发送到章节控制器的表单？这种方法会奏效吗？有更有效的方法吗？

我意识到我的问题可能有点含糊，但**任何帮助**将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:36:16.967

枯燥的答案是：您的提议仅对嵌套路由没有意义。

嵌套路由意味着在访问`chapters#new`操作时，您已经确切知道哪本书应该包含该章节。

但好的一面是：您可以同时使用嵌套和非嵌套路由。

如果您想保留嵌套路由，但还提供一个`new`和`create`操作让用户为章节选择所需的书，您可以为章节创建添加非嵌套路由。

例如：

```
resources :books do
  resources :chapters
end
resources :chapters 
```

请注意，您的控制器可能需要稍微重写以适应双路由。

如果需要，您可以在同一页面中创建这两个资源。抬头`accepts_nested_attributes_for`做那件事。这真的很容易，一旦你掌握了窍门。

# php - 向不同的用户显示不同的内容 PHP/CodeIgniter/Tank Auth

> ID：15046150
> 
> 赞同：1
> 
> 时间：2013-02-23T21:50:24.600
> 
> 标签：php, codeigniter, tankauth

我正在开发一个使用 CodeIgniter 构建并使用 Tank Auth 身份验证库（修改版本以使用用户角色）的项目。一切正常，但我想向不同的用户组展示不同的内容和/或功能。

例如，我有 2 个角色 Admin 和 User，并且该站点使用两个用户当前都可以访问的仪表板。现在我们将使用导航列表，我也想为用户提供一个导航列表（主页、关于、其他用户功能等），我想为管理员提供一个导航。但是管理员可以看到两个列表，而用户只能看到用户列表。

角色当前由数据库中的 role_id 设置，因此 role_id 1 = Admin 和 role_id 2 = User。我想知道在我的仪表板的视图文件中是否有一种简单的方法可以做到这一点？

**我想这样做的原因是当我想在我的网站上使用管理员或用户功能时，我不想登录两个不同的面板。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:11:08.920

我不熟悉 CodeIgniter 或 Tank Auth，但在纯 PHP 中，您可以执行以下操作：

```
<?php
    if (role_id == 1) {
?>

<!-- Admin HTML here -->

<?php }
    if (role_id == 1 || role_id == 2) {
?>

<!-- User HTML here -->

<?php } ?> 
```

管理员可以看到用户和管理员 HTML，但用户只能看到用户 HTML

# c# - MonoMac 项目中的自定义选项卡

> ID：15046157
> 
> 赞同：2
> 
> 时间：2013-02-23T21:51:14.197
> 
> 标签：c#, monomac

我正在使用 MonoMac 开发一个应用程序，到目前为止，我对它来自 Windows 世界的易用性感到高兴。但是，我很难理解应该是一个易于实现的功能：在选项卡标题中放置一个关闭按钮。

这已经在这里问过了： [Add a close button to NSTabviewitem](https://stackoverflow.com/questions/5898951/add-a-close-button-to-nstabviewitem)

其中一种解决方案是在这里使用铬标签： [https ://github.com/rsms/chromium-tabs](https://github.com/rsms/chromium-tabs)

是否可以在 MonoDevelop 的 MonoMac 项目中使用类似的东西？我可以将 xcode 中的库添加为链接库，但 MonoDevelop 似乎并没有保留这些更改。

因为（根据我的理解）MonoDevelop 基本上会生成一个动态的 xCode 项目并在编辑后将其丢弃，我不确定它是否可能，希望有人能为我提供一些启示。

我不接受铬标签的想法 - 愿意接受任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:08:41.920

您是正确的，您不能简单地将框架添加到 XCode 项目中，因为它是由 MonoDevelop 生成的——从这个意义上说，它不是一个“真正的”项目。

你有几个选择：

1 - 用 C# 编写自己的实现

2 - 选择一个开源实现（例如 Chromium Tabs）并将其移植到 C#。这应该可行，但显然会很耗时。此外，您可能会发现您需要访问 MonoMac 中尚不存在的一些 Cocoa API - 您需要找出解决方法或实现它们。

3 - 可以将本机框架绑定到您的应用程序中。也许您可以找到已经为您感兴趣的框架完成此操作的人；或者你可以自己做。

我自己已经在#3 上苦苦挣扎了一两天，但终于弄明白了，所以我会和你分享这个过程，也许这会有所帮助。

* * *

我下载了铬标签源并编译了框架。您只需要将其编译为 i386；因为 MonoMac 目前只提供 32 位运行时

我将 ChromiumTabs.framework 添加到我的项目中，并设置了一个预构建脚本以将其复制到 ${TargetDir}/${ProjectName}.app/Contents/Frameworks/

在调用 NSApplication.Init() 之前，我在 Main 中手动加载框架：

```
 var baseAppPath = Directory.GetParent(Directory.GetParent(System.AppDomain.CurrentDomain.BaseDirectory).ToString());
        var chromiumPath = baseAppPath + "/Frameworks/ChromiumTabs.framework/ChromiumTabs";
        var hresult = Dlfcn.dlopen(chromiumPath, 0); // Non-zero result indicates success 
```

接下来，使用 parse.exe（从源代码编译时在 MonoMac 中可用）并将框架中的 .h 文件提供给它。使用生成的输出来创建定义绑定的接口（这里有关于绑定类型的很好的文档[）](http://www.mono-project.com/MonoMac/Documentation/Binding_New_Objective-C_Types)。例如：

```
using System;
using System.Drawing;
using MonoMac.Foundation;
using MonoMac.AppKit;

namespace ChromiumTabs
{
    [BaseType (typeof (NSWindowController))]
    interface CTTabWindowController {
    }

[BaseType (typeof (CTTabWindowController))]
interface CTBrowserWindowController {
    [Export ("browser")]
    CTBrowser Browser { get;  }

    [Export ("initWithBrowser:")]
    IntPtr Constructor (CTBrowser browser);
}

[BaseType (typeof (NSObject))]
interface CTBrowser {
    [Export ("addBlankTabInForeground:")]
    CTTabContents AddBlankTabInForeground (bool foreground);

    [Export ("createBlankTabBasedOn:")]
    CTTabContents CreateBlankTabBasedOn (CTTabContents baseContents);
}

[BaseType (typeof (NSDocument))]
interface CTTabContents {
    [Export ("initWithBaseTabContents:")]
    IntPtr Constructor ([NullAllowed]CTTabContents baseContents);

    [Export ("viewFrameDidChange:")]
    void ViewFrameDidChange (RectangleF newFrame);
}
} 
```

现在，将该 .cs 文件输入 bmac.exe（查看帮助以获取您需要提供的参数）。这将输出一个托管 DLL，您可以在项目中引用该 DLL。

您现在应该可以使用新的绑定了！

我在库上做了一个非常小的绑定，足以让它启动并运行。你可以[在这里](https://dl.dropbox.com/u/9566899/CTWrapperTest.zip)下载。

# c - 制作测试用例？

> ID：15046160
> 
> 赞同：0
> 
> 时间：2013-02-23T21:51:27.683
> 
> 标签：c

我是 C 新手，我正在尝试制作测试用例来测试节点交换，但不知道如何制作测试用例。如果有人能给我举个例子，那就太好了。谢谢

有人可以告诉我我在交换函数中做错了什么，因为值没有被交换吗？

```
#include <stdio.h>
#include <stdlib.h>

 struct lnode {
    int data;
    struct lnode* next;
 };

 void swap(int* a, int* b );

 int main()
    {
      int x = 10;
  int y = 14;

  swap(&x, &y);
  swapNodes(x, y);
  getchar();
  return 0;
    }

   void swap(int* a, int* b )
  {
  int* temp;
  temp = a;
  a = b;
  b = temp;

  printf("x= %d  y= %d",*a,*b);
   }

   void swapNodes(struct lnode* n1, struct lnode* n2)
   {
    struct lnode* temp;
    temp = n1->next;
    n1->next = n2;
    n2->next = temp;
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:02:57.567

从最简单的测试用例开始。您需要两个节点来进行节点交换。只需声明两个节点结构，为每个节点分配不同的值，交换节点并打印结果。像这样的东西：

```
struct lnode nodeA, nodeB;

nodeA.data = 1;
nodeB.data = 2;

swapNodes(&nodeA, &nodeB);

printf("nodeA has value %d, should be 2\n", nodeA.data);
printf("nodeB has value %d, should be 1\n", nodeB.data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T22:39:30.800

交换功能错误，这样修改

```
void swap(int* a, int* b )
{
  int temp;
  temp = *a;
  *a = *b;
  *b = temp;
  printf("x= %d  y= %d",*a,*b);
} 
```

那么您正在更改值，因为您无法使用这些参数更改`a`和`b`指向的内容

它不起作用的原因是这个

```
void swap(int* a, int* b )
{
  int* temp; // pointer 
  temp = a;  // temppointing to same as a is pointing to

        +------------+
temp -> | some value |
        +------------+

  a = b;   // a now pointing to same as b is pointing to  

     +------------------+
a -> | some other value |
     +------------------+

  b = temp;  // b now pointing to same as temp pointing to, a

     +------------+
b -> | some value |
     +------------+ 
```

但是当您从函数返回时，指针保持不变。如果你想改变什么`a`并``b point to you need to have arguments`交换（int **a，int **b）`

如同

```
int foo(int a) {
a = 123;
}

int a = 1;
foo(a); 
```

调用`foo`不会更改参数，它只是被复制然后修改，当从函数返回时，a 仍然具有其原始值。

```
int foo(int* a)
{
  *a = 1;
} 
```

改变的不是`a`指向的内容而是值，但仍然指向同一个点

```
int foo(int**a )
{
  *a = malloc(sizeof(int)); // changes where a points to
...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T22:52:42.263

进行测试非常容易。使用预处理器宏，您可以毫不畏惧地做到这一点。例如，您有：

```
int main()
{
  int x = 10;
  int y = 14;

  swap(&x, &y);
  swapNodes(x, y);
  getchar();
  return 0;
} 
```

做了

```
#define TEST
#ifndef TEST
int main()
{ //regular running
  int x = 10;
  int y = 14;

  swap(&x, &y);
  swapNodes(x, y);
  getchar();
  return 0;
}
#endif
#ifdef TEST
    int main()
{
    //test your code!
    return 0;
}
#endif 
```

这些`#`东西是制作 C. 时的说明，`#define TEST`意思是“我们处于测试模式”。`#ifndef TEST`意思是“如果我们不测试”。`#ifdef TEST`意思是“如果我们正在测试”。我们本可以使用

```
} //end regular main
#else
int main() //begin test main 
```

但这并不重要。请注意，该`#define`行位于您的所有`#ifdef`和`#ifndef`行之前。

如果这仍然没有帮助，您可能想尝试使用预处理器宏来覆盖打印语句

```
#define DEBUG
#ifdef DEBUG
#include <stdio.h>
#endif

...

void myFunc(){
    int x = 0;
    #ifdef DEBUG
    printf("%d", x);
    #endif
} 
```

如果你真的想要，你可以在编译期间定义一些东西（这被认为是更高级的）。

```
gcc -DDEBUG -DTEST -o swap_test swap.c 
```

如果这些对您没有帮助，您应该查看[GDB](http://www.gnu.org/software/gdb/)来调试您的代码。如果您使用的是 Ubuntu，我认为它在软件中心。

至于你的代码到底有什么问题？好吧，我不会告诉你，因为从长远来看，这不会帮助你。

# php - 将 PHP 数组中的所有 int() 值相加

> ID：15046161
> 
> 赞同：2
> 
> 时间：2013-02-23T21:51:28.167
> 
> 标签：php, arrays, json, int

我有一个我正在解析的 JSON 文件，`json_decode()`它将 JSON 文件的内容输出为一个数组，这是数据输出的一个示例：

```
array(1) {
  ["petition"]=>
    array(2) {
      ["postal_districts"]=>
        array(2257) {
          ["DH4"]=>
          int(12)
          ["BT5"]=>
          int(14)
          ["WA9"]=>
          int(72)
          ["EH17"]=>
          int(5)
       }
    }
} 
```

我想将`int()`“postal_districts”下的所有值加起来，但目前我不知道如何实现这一点。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-23T21:54:56.193

如果它们都是整数，您可以尝试：

```
$sum = array_sum($arr['petition']['postal_districts']); 
```

（看看有没有[`array_sum`](http://php.net/manual/en/function.array-sum.php)帮助）

如果没有，请先过滤它们：

```
$ints = array_filter($arr['petition']['postal_districts'], 'is_int');
$sum = array_sum($ints); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T21:54:32.663

```
$sum = 0;
foreach($array['petition']['postal_districts'] as $val)
    $sum += $val;
echo $sum; 
```

你是这个意思吗？

# c++ - 从 unsigned char* 到 char* 的无效转换

> ID：15046162
> 
> 赞同：13
> 
> 时间：2013-02-23T21:51:31.330
> 
> 标签：c++, char, signed, unsigned-char

这是一个代码 -

```
 1 int main(int argc, char *argv[])
  2 {
  3     signed char S, *psc;
  4     unsigned char U,  *pusc;
  5     char C, *pc;
  6 
  7     C = S;
  8     C = U;
  9 
 10     pc = psc;
 11     pc = pusc;
 12 
 13     return 0;
 14 }

$ gcc test.cpp -o a
test.cpp: In function ‘int main(int, char**)’:
test.cpp:10:7: error: invalid conversion from ‘signed char*’ to ‘char*’ [-fpermissive]
test.cpp:11:7: error: invalid conversion from ‘unsigned char*’ to ‘char*’ [-fpermissive] 
```

这是在英特尔 32 位机器上的 Ubuntu 12.10 上的 gcc 版本 4.6.3 上编译的。

考虑到该**`char`类型`unsigned char`在 x86 上。**-

如果第 7 行和第 8 行对非指针类型的赋值正常，为什么第 10 行和第 11 行的指针类型会抛出错误？

另外，应该`C = U`成功而不需要演员吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T21:57:18.943

首先，重要的是要强调一个事实，即`char`,`signed char`和`unsigned char`都是**不同的类型**。C++11 标准的 4.10 节定义了不同类型指针之间的三种可能的标准指针转换：

> 1\. 空指针常量是整数类型的整数常量表达式 (5.19) 纯右值，其计算结果为零或 std::nullptr_t 类型的纯右值。空指针常量可以转换为指针类型；结果是该类型的空指针值，并且可以与对象指针或函数指针类型的所有其他值区分开来。这种转换称为空指针转换。相同类型的两个空指针值应比较相等。将空指针常量转换为指向 cv 限定类型的指针是一次转换，而不是指针转换后跟限定转换 (4.4) 的顺序。整数类型的空指针常量可以转换为 std::nullptr_t 类型的纯右值。[ 注意：生成的纯右值不是空指针值。——尾注]

这无关紧要，因为我们这里没有空指针类型`nulltptr_t`。

> 2\. “指向 cv T 的指针”类型的纯右值，其中 T 是对象类型，可以转换为“指向 cv void 的指针”类型的纯右值。将“指向 cv T 的指针”转换为“指向 cv void 的指针”的结果指向类型 T 的对象所在的存储位置的开始，就好像该对象是类型 T 的最派生对象 (1.8) （即，不是基类子对象）。空指针值转换为目标类型的空指针值。

这不适用，因为目标类型不是`void`. 最后，

> 3\. 类型“指向 cv D”的纯右值，其中 D 是类类型，可以转换为类型“指向 cv B”的纯右值，其中 B 是 D 的基类（第 10 条）。如果 B 是D 的不可访问（第 11 条）或模棱两可的（10.2）基类，需要这种转换的程序是格式错误的。转换的结果是指向派生类对象的基类子对象的指针。空指针值转换为目标类型的空指针值。

`signed char`不是 的基类`char`，所以这也不适用。

因此，无法执行从`signed char`to的隐式标准指针转换。`char`

另一方面，根据第 4.7 节中的规定，允许整数类型值之间的转换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T21:55:38.163

C ++没有自动指针转换，赋值两边的指针类型是什么都没有关系，如果它们不同，则需要强制转换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T21:55:51.493

`char`是与`unsigned char`和不同的类型`signed char`。它只保证具有与其中一个等效的值表示，但它仍然是一种不同的类型。因此，您不能从其中一个`unsigned char*`或转换`signed char*`为`char*`（即，除非您使用 a `reinterpret_cast`）。C++ 只是不允许像这样在不同类型之间进行指针转换，因为这样一种类型可能会伪装成另一种类型。

但是，从其中一个`unsigned char`或`signed char`到的转换`char`是完全可以的，因为它只涉及其值的转换。

以这种方式考虑：您可以将 an 转换`int`为 a `float`，但不能将 an 转换`int*`为 a `float*`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T22:01:13.357

我可能是错的，但如上所述，当你分配“C = S; C = U;”时，C++ 会自动转换它，有点像你做 "char x = "h"; printf("%i", x );"。但是，指针指向内存中的特定位置，并且该位置具有大小。因此，虽然转换只是从不同的角度查看值，但指向不同的值可能涉及更改所指向的值的大小。

# python - 转储字典列表时出现 Python pickle 错误

> ID：15046164
> 
> 赞同：0
> 
> 时间：2013-02-23T21:51:37.110
> 
> 标签：python, recursion, pickle

这是我的功能：

```
def pickleIt(file_name,data):
   try:
        with open(file_name+".pickle", "wb") as output_file:
            pickle.dump(data, output_file,-1)
        output_file.close()
    except Exception,e:
        print "Cannot open the file:",file_name,e
    return 
```

当我腌制字典或列表时它工作正常，但它不适用于字典列表。我从另一个函数中获取字典`single_record`，然后将其附加到我的列表中：

```
def set_dict(url.....)
     single_record={'url':url,
                    'title':song_obj.getSongTitle(),
                    'name':song_obj.getPerformer(),
                    'author':song_obj.getAuthors(),
                    }
     return single_record 
```

当我尝试转储 50 个字典的列表时，我收到以下错误：

```
maximum recursion depth exceeded 
```

任何人都可以帮忙找出问题所在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T22:11:26.890

您收到“超出最大递归深度”的错误意味着您的调用堆栈太深。调用堆栈的深度基本上是从初始调用点（类似于您的主函数/循环）调用了多少函数而没有返回。

因此，例如，如果您从初始呼叫点呼叫`func1()`. `func1()`当前深度为 1。如果在`func1()`返回之前调用另一个函数，则该函数中的深度将为 2。

要找出调用堆栈调用大小的当前限制`sys.getrecursionlimit()`并更改它，请调用`sys.setrecursionlimit()`.

如果在腌制代码时抛出错误，那么很可能，您尝试腌制的结构具有太多嵌套元素。这是因为，`dump`/`dumps`将在被转储的结构中的容器上递归。意思是，如果你要转储一个列表，它会转储列表中的每个元素，这些元素本身可能是一个列表或字典，所以它会转储那些第一个元素，依此类推。如果元素嵌套太深（列表或字典，其中包含列表或字典，当无限包含列表或字典时），那么在某些时候您将达到最大递归深度。

问题可能出在其他地方，但没有任何进一步的细节，这是唯一可能导致的事情（如果确实是引发错误的地方）。

我试过腌制一个包含 1000 个字典的列表（在结构上与你的相似），它工作得很好。因此，要么您无意中构建了一个过于嵌套的结构，要么在调用`picke.dump()`

编辑：

试试这个函数，看看你试图转储的结构是如何嵌套的：

```
def nestedness(struct):
    if isinstance(struct, list):
        return max([0] + [nestedness(i) for i in struct]) + 1
    if isinstance(struct, dict):
        return max([0] + [nestedness(i) for i in struct.values()])+1
    return 1 
```

如果超出最大递归深度而失败，请继续使用它，`sys.setrecursionlimit()`直到得到正确的答案。如果您的结构过于嵌套，请查看是否可以通过不同的结构来减少嵌套。

编辑：为了后代，固定嵌套，因此它处理空的字典和序列

# jquery - fancybox 2 iframe 动态宽度

> ID：15046166
> 
> 赞同：0
> 
> 时间：2013-02-23T21:51:46.123
> 
> 标签：jquery, iframe, fancybox

我有一个代码：

```
$(".boxl").fancybox({
                fitToView: false,
                beforeShow : function(){
                   this.height = $('.fancybox-iframe').contents().find('body').height();
                   this.width = $('.fancybox-iframe').contents().find('body').width();
                  }
            }); 
```

问题是它可以设置第一个 iframe 的高度和宽度，但是例如，如果我单击 iframe 中的某个 url，它不会调整大小..

# python - Python 和 RFC 3339 时间戳

> ID：15046170
> 
> 赞同：1
> 
> 时间：2013-02-23T21:52:25.697
> 
> 标签：python, datetime, rfc3339

在哪里可以找到构建 RFC 3339 时间的例程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:52:25.697

这是基于 RFC 第 10 页上的示例。唯一的区别是我显示了一个六位数的微秒值，符合 Google Drive 的时间戳。

```
from math import floor

def build_rfc3339_phrase(datetime_obj):
    datetime_phrase = datetime_obj.strftime('%Y-%m-%dT%H:%M:%S')
    us = datetime_obj.strftime('%f')

    seconds = datetime_obj.utcoffset().total_seconds()

    if seconds is None:
        datetime_phrase += 'Z'
    else:
        # Append: decimal, 6-digit uS, -/+, hours, minutes
        datetime_phrase += ('.%.6s%s%02d:%02d' % (
                            us,
                            ('-' if seconds < 0 else '+'),
                            abs(int(floor(seconds / 3600))),
                            abs(seconds % 3600)
                            ))

    return datetime_phrase 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T12:55:43.560

rfc3339 is very flexible - [http://www.ietf.org/rfc/rfc3339.txt](http://www.ietf.org/rfc/rfc3339.txt) - it effectively defines a whole pile of formats. you can generate almost all of them just using the standard python time formatting - [http://docs.python.org/3.3/library/datetime.html#strftime-strptime-behavior](http://docs.python.org/3.3/library/datetime.html#strftime-strptime-behavior)

however, there is one oddity, and that is they allow (it's optional) a `:` between hours and minutes in a numerical timezone offset (`%z`). python won't display that, so if you want to include that you need python-rfc3339 or similar.

for *parsing* rfc3339, simple-date will handle all formats. but since it uses python print routines it cannot handle the `:` case above.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-17T12:49:03.330

[python-rfc3339](https://github.com/tonyg/python-rfc3339)对我来说非常有用。

# c++ - 使用函数指针和依赖注入将回调函数分配给对象。这是好设计吗？

> ID：15046172
> 
> 赞同：1
> 
> 时间：2013-02-23T21:52:34.273
> 
> 标签：c++, model-view-controller, dependency-injection

我正在开发一个 MVC 应用程序。在这种情况下，模型类很多，但只有一个“视图”实现。当模型类想要向用户输出一些信息时，我需要一些方法来调用 GUI 的 printOutput(string) 方法。（顺便说一下，GUI 主要是基于文本的）。还有另一种显示连接数据的方法，该数据只能由特定的连接类访问。

我正在考虑使用依赖注入来实例化具有调用 GUI 所需的函数指针的模型类。

我在这个设计的正确轨道上吗？

# apache-flex - 将组件的高度值与大于一的小数相乘

> ID：15046173
> 
> 赞同：0
> 
> 时间：2013-02-23T21:52:43.343
> 
> 标签：apache-flex, height, custom-component

我正在创建一个组件，我想根据它的内容设置它的高度。当我写这个时：

```
<s:SkinnablePopUpContainer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                           xmlns:s="library://ns.adobe.com/flex/spark"
                           backgroundAlpha="0" 
                           height="{content.height}"> 
```

它可以正常工作，但是当我想让组件的高度比它的内容高度高一点时，如下所示：

```
<s:SkinnablePopUpContainer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                               xmlns:s="library://ns.adobe.com/flex/spark"
                               backgroundAlpha="0" 
                               height="{content.height * 3/2}"> 
```

我的组件的高度变得像“3571428.5714285714”这样的疯狂。但是当我这样做时：

```
height="{content.height * 2/3}" 
```

它只是使它的高度降低一点并且正常工作。

当我在 creationComplete 事件中执行此操作时，它仍然正常工作：

```
protected function creationCompleteHandler(event:FlexEvent):void
{
    this.height = content.height * 3/2;
} 
```

我想知道我是否做错了什么。感谢帮助

# javascript - 使用 Javascript 和 ruby 异步加载数据

> ID：15046175
> 
> 赞同：0
> 
> 时间：2013-02-23T21:52:44.607
> 
> 标签：javascript, ruby-on-rails, ruby, image, asynchronous

我发现这个 JS 片段用于使用 Javascript 异步加载数据：

```
(function(){
    var a = document.createElement('script');
    a.type = 'text/javascript';
    a.async = true;
    a.src = 'http://www.example.com/somefile.js';
    var b = document.getElementsByTagName('script')[0];
    b.parentNode.insertBefore(a, b);
})(); 
```

这个想法是用户将这段代码放入他的 HTML 中，然后从我的 Ruby On Rails 中加载图像并显示在他的网站上。

但是如何使用我的 Rails 应用程序中的 JS 片段加载数据？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-23T22:04:20.350

加载以下文件而不是您的 js，在 somefile.php 文件上运行您的 php 并抛出对您的 js 函数的 javascript 调用以显示图像

```
a.src = 'http://www.example.com/somefile.php'; 
```

# xna - XNA 游戏中的 base.Update(gameTime) 是什么？

> ID：15046181
> 
> 赞同：2
> 
> 时间：2013-02-23T21:53:52.020
> 
> 标签：xna

我突然想到，我不知道`base.Update(gameTime)`每个 XNA 游戏项目的`protected override void Update(GameTime gameTime)`方法结束时应该做什么。

我尝试将其删除，但没有任何损坏。我的猜测是它可以用来更新`GameService`东西，反正我不使用。但它究竟是为了什么？删除它可以节省一些资源吗？

还有`base.Draw(gameTime)`到底`protected override void Draw(GameTime gameTime)`。我想知道这两个是否用于Game类继承另一个Game类时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T22:03:42.137

它们用于注册[GameComponent](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.gamecomponent.aspx)时。

> 注册的组件将具有从 Game.Initialize、Game.Update 和 Game.Draw 方法调用的 draw、update 和 initialize 方法。

# 3d - x3dom 中的“块状”模型问题

> ID：15046187
> 
> 赞同：1
> 
> 时间：2013-02-23T21:54:32.603
> 
> 标签：3d, x3d, x3dom

我正在尝试将 3d Studio Max 模型与 x3dom 一起使用。我没有创建模型，也不太了解 3d 渲染/动画。左边的图像显示了来自 3d Studio Max 的模型渲染。右图显示了 x3dom 内部的相同模型。

[图片链接](http://www.masterkeyhost.com/skull_test.jpg)

我从一个 .3ds、一个 .max 和一个 .wrl 文件开始。我将这三个都转换为.x3d。每个人都给出了相同的结果。

我是 x3dom 的新手，但就显示预制模型而言，它似乎非常简单。是否需要实施一些设置才能使 x3dom 看起来像原始模型一样平滑？我查看了 x3dom 网站上的其他示例，它们似乎都正确/流畅地呈现。

任何意见是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T12:30:34.747

问题是网格不包含[法线向量](http://en.wikipedia.org/wiki/Normal_%28geometry%29)，你必须说 x3dom 来计算它们。检查[在线正常创建](http://x3dom.org/x3dom/example/x3dom_creaseAngle.html)，这可能会有所帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T21:19:40.370

您还应该检查`creaseAngle`几何图形：像**3.14**这样的东西会很好，而默认的**0**会像屏幕截图一样呈现块状。

# mysql - Dapper 找不到打开的连接 MVC3

> ID：15046189
> 
> 赞同：2
> 
> 时间：2013-02-23T21:54:43.853
> 
> 标签：mysql, asp.net-mvc-3, asp.net-mvc-4, dapper

我最近在 MVC3 中创建了一个新项目，并将 MySQL 数据库连接到它没有问题。我能够创建用户和角色（使用来自 NuGet 的 Universal Providers / SecurityGuard）。现在我正在尝试使用 Dapper 为我的编辑页面运行查询并获得 SQL 异常：

调试：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

YSOD：

```
The system cannot find the file specified.
         var connection = new SqlConnection(connString);

         connection.Open();
         return connection;
     } 
```

这是我正在尝试做的事情：

网络配置：

```
 <connectionStrings>
     <add name="DefaultConnection" connectionString="Database=[database];Data Source=localhost;Uid=[username];Pwd=[password];" providerName="MySql.Data.MySqlClient" />
  </connectionStrings>

<membership defaultProvider="MySqlMembershipProvider">
  <providers>
    <clear />
    <add name="MySqlMembershipProvider" type="MySql.Web.Security.MySQLMembershipProvider, MySql.Web, Version=6.6.5.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" autogenerateschema="true" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" passwordFormat="Hashed" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" passwordStrengthRegularExpression="" applicationName="/" />
  </providers>
</membership>
<profile defaultProvider="MySQLProfileProvider">
  <providers>
    <clear />
    <add name="MySQLProfileProvider" type="MySql.Web.Profile.MySQLProfileProvider, MySql.Web, Version=6.6.5.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" />
  </providers>
</profile>
<roleManager enabled="true" defaultProvider="MySqlRoleProvider">
  <providers>
    <clear />
    <add connectionStringName="DefaultConnection" applicationName="/" autogenerateschema="True" name="MySQLRoleProvider" type="MySql.Web.Security.MySQLRoleProvider, MySql.Web, Version=6.6.5.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" />
  </providers>
</roleManager> 
```

数据库：

```
public class Db
{
    public static IDbConnection GetOpenConnection()
    {
        var connString = ConfigurationManager.ConnectionStrings["DefaultConnection"].ConnectionString;

        var connection = new SqlConnection(connString);

        //---- Hangs Here ----//
        connection.Open();
        return connection;
    }
} 
```

会员控制器：

```
var connection = Db.GetOpenConnection();
    {
            const string conn = @"SELECT id
                               FROM my_aspnet_users
                               WHERE name = @UserName";

            var result = connection.Query<UserViewModel>(conn, new { userName }).Single();

            viewModel.Id = result;
        } 
```

我从来没有到达控制器，因为它在尝试打开连接时挂起。我是使用 MySQL 的新手，所以它很可能是我忽略或忘记添加的东西。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T03:07:07.230

想通了我的问题。我试图使用

```
var connection = new SqlConnection(connString); 
```

MySQL 不支持。相反，我发现使用正确的连接器[将 ASP.NET MVC 应用程序连接到 MySQL 。](https://stackoverflow.com/questions/5154183/connecting-an-asp-net-mvc-application-to-mysql)

```
using (var connection = new MySqlConnection(ConnectionString))
using (var cmd = connection.CreateCommand())
{
connection.Open();
cmd.CommandText = "SELECT name FROM foo;";
using (var reader = cmd.ExecuteReader())
{
    while (reader.Read())
    {
        string name = reader.GetString(reader.GetOrdinal("name"));
        // TODO: do something with the name ...
    }
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:27:56.993

从表面上看，代码看起来不错，我怀疑这是连接字符串的问题。根据我最近的一个 MySql 项目，我处理的连接字符串略有不同。您可以尝试以下（通知数据源更改为服务器）

```
<connectionStrings>
     <add name="DefaultConnection" connectionString="Server=localhost;Database=[database];Uid=[username];Pwd=[password];" providerName="MySql.Data.MySqlClient" />
</connectionStrings> 
```

这里还有一些 MySql ConnectionStrings：http: [//www.connectionstrings.com/mysql](http://www.connectionstrings.com/mysql)

# c++ - 构建最大堆算法不起作用

> ID：15046190
> 
> 赞同：0
> 
> 时间：2013-02-23T21:54:45.393
> 
> 标签：c++, heap

我正在尝试使用算法简介中给出的算法构建一个最大堆，但我无法让它工作。首先，我在函数之间传递数组时遇到了一些有趣的问题。我的理解是在 C++ 中数组是通过引用传递的，但是在我传递一个数组之后，我检查了参数的地址和它们不匹配的参数。当我尝试在作为参数的数组上使用 sizeof() 时，它不会返回正确的值。

其次，该算法似乎不起作用。它确实对数组进行了一些更改，并使数字更接近堆，但仍有一段路要走。我已经检查了几十次代码，它似乎与我的文本中给出的伪代码一致。我错过了什么？

```
#include <iostream>
#include <ctime>

#define N 10
#define DISPLAY

using namespace std;

// Display an array
void display(double p[]) {
#ifdef DISPLAY
    for (int i = 0; i < N; i++) cout << p[i] << " ";
    cout << endl;
#endif
}

inline int parent(int i)
{return i/2;}

inline int left(int i)
{return 2*i;}

inline int right(int i)
{return 2*i+1;}

void maxHeapify(double p[], int i)
{
    int largest;

   int l = left(i);
   int r = right(i);

   if (l <= N && (p[l] > p[i]))
        largest = l;

    else
        largest = i;

    if (r <= N && (p[r] > p[largest]))
        largest = r;

    if (largest != i)
    {
        double temp = p[i];

        p[i] = p[largest];

        p[largest] = temp;

        maxHeapify(p, largest);
    }
}   

void buildMaxHeap(double p[])
{
    for (int i=N/2; i>0; i--)
        maxHeapify(p, i);
}

int main() {
 double a[] = {4,1,3,2,16,9,10,14,8,7};
 buildMaxHeap(a);
 display(a);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:12:44.210

我修改了你的代码如下：

```
#include <iostream>
#include <ctime>

#define N 10
#define DISPLAY

using namespace std;

// Display an array
void display(double p[]) {
#ifdef DISPLAY
    for (int i = 0; i < N; i++) cout << p[i] << " ";
    cout << endl;
#endif
}

inline int parent(int i)
{return i/2;}

inline int left(int i)
{return 2*i;}

inline int right(int i)
{return 2*i+1;}

void maxHeapify(double p[], int i)
{
    int largest;

   int l = left(i)-1;
   int r = right(i)-1;
   i=i-1;

   if (l <= N && (p[l] > p[i]))
        largest = l;

    else
        largest = i;

    if (r <= N && (p[r] > p[largest]))
        largest = r;

    if (largest != i)
    {
        double temp = p[i];

        p[i] = p[largest];

        p[largest] = temp;

        maxHeapify(p, largest+1);
    }
}   

void buildMaxHeap(double p[])
{
    for (int i=N/2; i>0; i--)
        maxHeapify(p, i);
}

int main() {
 double a[] = {4,1,3,2,16,9,10,14,8,7};
 buildMaxHeap(a);
 display(a);
} 
```

# excel - 在excel中使用条件命名范围

> ID：15046194
> 
> 赞同：1
> 
> 时间：2013-02-23T21:55:12.493
> 
> 标签：excel, excel-2010, named-ranges

让我再试一次，我一直在网上搜索，似乎找不到任何东西。我想要做的是在 excel 中有一个基于另一个单元格值的命名范围列表条件。当我设置数据验证并将所有 IF 语句放在源文本框中时遇到字符限制的问题。如果我只设置两个条件，它似乎可以正常工作，但这对我不起作用。这是我的示例数据，基于我想要显示它的有效子项的 B 列值。就像我提到的那样，我在 B 列中有 20 个左右不同的可能值。

```
 B     C
      1 ENG     dropdown of all engineering sub-categories
      2 PRO     dropdown of all production sub-categories
      3 PER     ...
      4 PAY
      5 ENG     dropdown of all engineering sub-categories  
      6 ENG     dropdown of all engineering sub-categories 
```

当我尝试在 C1 列上设置我的数据验证列表时，我输入了以下内容......

```
=IF($E$5="CAR", CA,
IF($E$5="DCC", DCC,
IF($E$5="ENG", ENG,
IF$E$5="ENV", ENV,
IF$E$5="FBI", BI,
IF$E$5="FGL", GL, 
IF$E$5="FAP", AP, 
IF$E$5="FRE", AR, 
IF$E$5="FTX", Tax, 
IF$E$5="ORM", OAR, 
IF$E$5="PAY", PAY, 
IF$E$5="PIR", PER, 
IF$E$5="PRO", PRO, 
IF$E$5="PUR", PUR, 
IF$E$5="RSK", RM, 
IF$E$5="SLM", Sales,
IF$E$5="WFS", WAR))))))))))))))))) 
```

我只能输入我的 IF 条件的一半。我尝试了 VLOOKUP，但它只允许将 1 个值放在 C 列中，我希望它是一个下拉列表。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T21:43:00.323

`VLOOKUP`您可以通过组合and以更短的公式执行此操作`INDIRECT`：

您是否列出了 B 列中的潜在名称以及它们在两列中某处的相应范围名称，例如 X 列和 Y 列：

```
Col X Col Y
汽车CA
DCC DCC
英文
环境环境
联邦调查局商业情报局
...

```

然后使用以下公式作为数据验证中列表的来源：

```
=INDIRECT(VLOOKUP($E$5,$X:$Y,2,0))

```

实际上，使用这种方法，您甚至可以节省命名和维护手动范围名称的工作！相反，只需将命名范围的名称替换为真实地址 - 凭借一点运气和智能公式工程 - 您可以自动推导。这取决于您的数据结构，但很可能函数`ADDRESS`、`COUNTA`、`OFFSET`和`INDEX`会`MATCH`有所帮助。

例如，如果您的列表将存储在另一个工作表中，列表名称位于第一行，并且每个标题下方列出了元素，[则此示例文件](https://mega.co.nz/#!HR5QRJKL!PfSBXSS_2PGedyZrpO4I23yjHYFnas-c2nm7FvqGhRk)将为您提供示例公式。更进一步，它还将使用条件突出显示来标记任何无效的条目，例如，因为在选择后类型已更改：

![在此处输入图像描述](../Images/6b3d646539421c72881cf9f1a08a4a6e.png)

# haskell - Haskell：需要计算器程序的启蒙

> ID：15046196
> 
> 赞同：3
> 
> 时间：2013-02-23T21:55:18.703
> 
> 标签：haskell, calculator

我有一个任务是在 Haskell 中创建一个计算器程序。例如，用户将能够通过以下命令行使用计算器：

```
>var cola =5; //define a random variable
>cola*2+1;
(print 11)
>var pepsi = 10 
>coca > pepsi;
(print false)
>def coke(x,y) = x+y;  //define a random function
>coke(cola,pepsi);
(print 15) 
```

//实际上它比上面更复杂

我不知道如何在 Haskell 中编程。我现在能想到的就是将命令行读取为字符串，将其解析为令牌数组。也许通过数组，检测诸如“var”、“def”之类的关键字，然后调用函数 var、def，它们将变量/函数存储在 List 或类似的东西中。但是，我如何存储数据以便以后在计算中使用它们呢？

我是否走在正确的轨道上，因为我实际上很困惑下一步该做什么？:(

****另外，我不允许使用 Parsec****！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T23:28:54.993

看起来您有两种不同的输入：声明（创建新变量和函数）和表达式（计算事物）。

你应该首先定义一些数据结构，这样你就可以计算出你将要处理什么样的事情。就像是：

```
data Command = Define Definition | Calculate Expression | Quit
type Name = String
data Definition = DefVar Name Expression | DefFunc Name [Name] Expression
-- ^ alternatively, implement variables as zero-argument functions
-- and merge these cases
data Expression = Var Name | Add Expression Expression | -- ... other stuff
type Environment = [Definition] 
```

首先，只需将内容解析（标记化然后解析标记）到 a`Command`中，然后决定如何处理它。

表达比较容易。您假设您已经拥有所需的所有定义（an `Environment`），然后只需查找任何变量或进行添加或其他任何操作。

定义有点棘手。一旦决定了要创建什么新定义，就需要将其添加到环境中。你如何做到这一点取决于你如何准确地遍历这些行，但是你需要将新环境从解释器传递回获取下一行并在其上运行解释器的东西。就像是：

```
main :: IO ()
main = mainLoop emptyEnv
 where
  emptyEnv = []

mainLoop :: Environment -> IO ()
mainLoop env = do
  str <- getLine
  case parseCommnad str of
    Nothing -> do
      putStrLn "parse failed!"
      mainLoop env
    Just Quit -> do
      return ()
    Just (Define d) -> do
      mainLoop (d : env)
    Just (Calculate e) -> do
      putStrLn (calc env e)
      mainLoop env

-- the real meat:
parseCommand :: String -> Maybe Command
calc :: Environment -> Expression -> String -- or Integer or some other appropriate type 
```

`calc`将需要在您创建的环境中查找内容，因此您可能还需要一个函数来查找`Definition`对应于给定的`Name`（或抱怨没有）。

您应该做出的其他一些决定：

*   当有人试图重新定义变量时我该怎么办？
*   如果我在函数定义中使用这些变量之一怎么办？我是否在创建或使用函数定义时对其进行评估？

这些问题可能会影响上述程序的设计，但我会留给你如何解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T22:01:27.150

首先，您可以从本[教程中学到很多关于 haskell 编程的知识](http://learnyouahaskell.com/chapters)

您需要使用 .hs 在另一个文档中编写函数
您可以从编译器加载文件并使用您创建的所有函数
例如

```
plus :: Int -> Int  -- that mean the function just work with a number of type int and return Int
plus x y = x + y    -- they receive x and y and do the operation 
```

# c - C int 数组在传递时缩小

> ID：15046203
> 
> 赞同：0
> 
> 时间：2013-02-23T21:55:57.197
> 
> 标签：c, arrays, function

我将一个`int`包含 4 个元素的数组传递给一个函数，并`sizeof(array)/sizeof(array[0])`说我的元素更少。

这是正在发生的事情的示例：

```
int
main() {
  // declaring literal array
  int array[] = {1,2,3,5};

  // prints 16/4 (correct output for 4 elements)
  printf("%d/%d\n", sizeof(array), sizeof(array[0]));

  function(array);

  return 0;
}

void
function(int array[]) {
  // printing 8/4 instead of 16/4
  printf("%d/%d\n", sizeof(array), sizeof(array[0]));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T22:00:18.933

这里的问题是，作为数组的函数参数被编译器转换为指针。所以就好像你的函数有签名

```
void function(int *array); 
```

这意味着两件事：

1.  您必须将数组的大小作为另一个参数显式传递，因为它已“丢失”。
2.  `sizeof(array)`只会告诉您架构中指针的大小。因此，通过您的输出，我们可以看出您正在为 64 位目标进行编译，但仅此而已。

请注意，`sizeof(array[0])`它等效于`sizeof(*array)`（指针运算），因此无论如何它仍然会给出正确的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T21:59:38.353

函数内部的 sizeof 返回指向您的数组的 sizeof 指针，取决于您的系统，该指针可以是 4 或 8。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T22:01:46.587

当您将数组作为 I/P 参数传递给函数时，它被视为包含其基地址的指针。

你得到： sizeof(pointer)/sizeof(first element of array)

在 GDB 中：（在 function() 内部）

```
(gdb) pt matrix_transposition_key                                                               
type = int *                                                                                    
(gdb) pt matrix_transposition_key[0]                                                 
type = int 

(gdb) p sizeof(matrix_transposition_key)
$2 = 8                                                                                          
(gdb) p sizeof(matrix_transposition_key[0])                                                       
$3 = 4 
```

# wpf - WPF 故事板动画。无法将数据绑定到 SeekStoryboard 偏移量。需要想法

> ID：15046207
> 
> 赞同：0
> 
> 时间：2013-02-23T21:56:21.243
> 
> 标签：wpf, storyboard

我创建了一个用于 ListBoxItems 的 DataTemplate。我创建了一个彩色动画，其中项目的背景颜色从绿色开始，然后在一段时间内慢慢变成红色。

问题是这样的——我需要根据包含在 ListBox 项目中的时间戳来设置 Storyboard Seek Offset（例如：一个项目突然填充了 ListBox，其颜色动画应该被移动，比如动画 17​​ 秒）。当我最初创建它时，我认为这很容易，因为我只需将 Offset 绑定到一个值转换器，该转换器根据绑定项的时间戳返回 TimeSpan 值。但是，正如我发现的那样，您不能对 SeekStoryboard Offset 执行数据绑定。

任何人都可以提出一种解决方法或者一些可以解决这个问题的代码隐藏魔法吗？此列表框将包含很少的项目（最多可能 5 个），因此遍历集合并以编程方式获取情节提要资源并手动设置偏移量不会太耗时。但是，我不确定如何执行此操作，因为我的 Listbox 是由自定义对象而不是 ListBoxItem 类型的 UIElement 填充的。

```
 <DataTemplate x:Key="TicketTemplate">
        <DataTemplate.Resources>
            <Storyboard x:Key="OnLoaded1">
                <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Panel.Background).(GradientBrush.GradientStops)[0].(GradientStop.Color)" Storyboard.TargetName="border">
                    <EasingColorKeyFrame KeyTime="0" Value="Lime"/>
                    <EasingColorKeyFrame KeyTime="0:15:0" Value="Yellow"/>
                    <EasingColorKeyFrame KeyTime="0:30:0" Value="Orange"/>
                    <EasingColorKeyFrame KeyTime="0:45:0" Value="Red"/>
                </ColorAnimationUsingKeyFrames>
            </Storyboard>
        </DataTemplate.Resources>
        <Border x:Name="border" BorderBrush="Black" Margin="1" BorderThickness="2" CornerRadius="10" Padding="5,1">
            <Border.Background>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="GhostWhite"  Offset="1"/>
                    <GradientStop Color="GhostWhite"/>
                </LinearGradientBrush>
            </Border.Background>
            <Grid>
                <!-- ELEMENTS FOR LISTBOXITEM TEMPLATE -->
            </Grid>
        </Border>
        <DataTemplate.Triggers>
            <EventTrigger RoutedEvent="FrameworkElement.Loaded" SourceName="border">
                <BeginStoryboard x:Name="WarningStory" Storyboard="{StaticResource OnLoaded1}"/>
                <SeekStoryboard BeginStoryboardName="WarningStory" Offset="0" <!-- cannot databind to Offset =( --> Origin="BeginTime" />
            </EventTrigger>
        </DataTemplate.Triggers>
    </DataTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T22:58:39.490

有一种解决方法可以启用与不是依赖属性的属性的绑定。它要求拥有目标属性的类派生自`DependencyObject`，幸运的是，对于`SeekStoryboard`.

您将使用设置实际目标属性的 a创建[附加](http://msdn.microsoft.com/en-us/library/ms749011.aspx)的辅助属性。[`PropertyChangedCallback`](http://msdn.microsoft.com/en-us/library/system.windows.propertychangedcallback.aspx)

```
public static class SeekStoryboardExt
{
    public static readonly DependencyProperty BindableOffsetProperty =
        DependencyProperty.RegisterAttached(
            "BindableOffset", typeof(TimeSpan), typeof(SeekStoryboardExt),
            new PropertyMetadata(BindableOffsetPropertyChanged));

    public static TimeSpan GetBindableOffset(DependencyObject obj)
    {
        return (TimeSpan)obj.GetValue(BindableOffsetProperty);
    }

    public static void SetBindableOffset(DependencyObject obj, TimeSpan value)
    {
        obj.SetValue(BindableOffsetProperty, value);
    }

    private static void BindableOffsetPropertyChanged(
        DependencyObject obj, DependencyPropertyChangedEventArgs e)
    {
        var seekStoryboard = obj as SeekStoryboard;
        if (seekStoryboard != null)
        {
            seekStoryboard.Offset = (TimeSpan)e.NewValue;
        }
    }
} 
```

You would now bind the helper property instead of the target property:

```
<SeekStoryboard local:SeekStoryboardExt.BindableOffset="{Binding ...}" .../> 
```

# codeigniter-2 - CodeIgniter 中的重定向循环错误

> ID：15046208
> 
> 赞同：0
> 
> 时间：2013-02-23T21:56:27.813
> 
> 标签：codeigniter-2, codeigniter-url, redirect-loop

我为此工作了一天。我遇到了[同样的问题](https://stackoverflow.com/questions/9157293/redirect-error-in-codeigniter)，但我不明白。

```
<?php
class Users extends CI_Controller
{
    function index()
    {
        redirect('Users/login');
    }

    function login()
    {
        $data['title']        = 'Selamat datang di Sistem Informasi Koperasi';
        $data['main_content'] = 'login';
        $this->load->view('Users/template', $data);
    }

    function logout()
    {
        $this->session->sess_destroy();
        $this->session->set_flashdata('info_login', 'Anda sudah keluar dari sistem');
        redirect('Users/login');
    }

    function validate()
    {
        //Load User Model
        $this->load->model('Users_Model');
        //Validate User
        $query = $this->Users_Model->validate();

        if($query != '') {
            //Mengambil Roles dari Groups
            $roles = $this->Users_Model->roles($query->group_id);

            //$this->login_model->last_login($query);
            $data = array(
                'username' => $query->username,
                'roles' => $roles,
                'is_logged_in' => true
            );
            $this->session->set_userdata($data);

            if($roles == 'administrators') {
                redirect('Administrators/index');
            } elseif($roles == 'managers') {
                redirect('Managers/index');
            }

            else {
                $this->session->set_flashdata('info_login', 'Mohon maaf anda belum terdaftar sebagai Group! Silahkan hubungi admin!');
                redirect('Users/login');
            }
        } else {
            $this->session->set_flashdata('info_login', 'Maaf,username dan password yang anda masukkan salah,silahkan coba kembali!');
            redirect('Users/login');
        }
    }

} 
```

在 Chrome 和 Firefox 中，我收到此消息。我应该怎么办？

> 此网页存在重定向循环 位于的网页 `http://localhost/simpks/index.php/Users/login`导致重定向过多。清除此站点的 cookie 或允许第三方 cookie 可能会解决问题。如果不是，则可能是服务器配置问题，而不是您的计算机问题。以下是一些建议： 稍后重新加载此网页。了解有关此问题的更多信息。错误 310 (net::ERR_TOO_MANY_REDIRECTS)：重定向太多。

这是我的视图 template.php

```
<?php
$this->load->view('includes/header',$main_content); 
$this->load->view('Users/'.$main_content);
$this->load->view('includes/footer');
?> 
```

这是我的模型 Users_Model.php

```
 <?php

    class Users_Model extends CI_Model{

        function validate(){    
            $this->db->where('username',$this->input->post('username'));
            $this->db->where('password',md5($this->input->post('password')));
            $query = $this->db->get('Users');

            if($query->num_rows == 1){
                $row = $query->row();
                return $row;
            }
        }

        function roles($id){
            $this->db->where('id',$id);
            $query = $this->db->get('Groups');

            if($query->num_rows == 1){
                $row = $query->row();
                return $row->name;
            }
        }

    }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:53:42.037

如果您在视图中调用它，请使用包含而不是加载器。前任 ：`include 'includes/footer';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T17:06:30.403

我也遇到了这个问题，但是两个页面的控制器我都重定向了方法，所以我添加了一个`refresh`重定向方法，试试吧。

在页面底部读取[CI 重定向并刷新](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html)

```
<?php
class Users extends CI_Controller
{
    function index()
    {
        redirect('another_controller/login');
    }
}

Create another controller - another_controller.php

class another_controller extends CI_Controller
{
    function login()
    {
         $this->load->view('home');
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T00:29:30.227

您不必`redirect('Users/login');`在视图类中进行会话检查。擦掉就行了。

如果您需要重定向，请将其放在另一个页面中，例如 users/test。如果用户/测试控制器中的用户/测试调用重定向方法中的会话已过期。为了更好的结构，我认为你应该最小化 php 函数。

# java - 不使用 element.hashCode() 的 java.util.Set 实现

> ID：15046210
> 
> 赞同：3
> 
> 时间：2013-02-23T21:56:32.943
> 
> 标签：java, collections, set

是否有`java.util.Set`不调用插入元素`hashCode()`方法的实现？

我必须使用一些库的类，其`hashCode()`实现行为不良：当`hashCode()`调用此方法时，它会发送一个 HTTP 请求......因此，将该类的实例放入 a`HashSet`会导致触发 HTTP 请求。
我想将与此 `hashCode()`方法的交互减少到最低限度。因此，我需要一个`Set`不利用其包含元素的`hashCode()`方法的实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T22:09:32.840

查看[Object.hashCode()](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)方法和[Set](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)接口的文档。

使用[TreeSet](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html) < [Comparable](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html) > ：

```
import java.util.Set;
import java.util.TreeSet;

public class NoHashCode implements Comparable< NoHashCode >{

   final int value;

   public NoHashCode( int val ) {
      this.value = val;
   }

   @Override public int hashCode() {
      throw new IllegalStateException( "This method must not be called" );
   }

   @Override
   public int compareTo( NoHashCode o ) {
      return this.value - o.value;
   }

   public static void main( String[] args ) {
      Set< NoHashCode > set = new TreeSet<>();
      set.add(  new NoHashCode( 1 ));
      set.add(  new NoHashCode( 2 ));
      set.add(  new NoHashCode( 3 ));
      set.add(  new NoHashCode( 1 )); // '1' is already in set
      System.out.println( set.size());// print 3
   }
} 
```

使用[TreeSet](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html)`< T >(`[比较器](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)`)`：

```
import java.util.Comparator;
import java.util.Set;
import java.util.TreeSet;

public class NoHashCode {

   final int value;

   public NoHashCode( int val ) {
      this.value = val;
   }

   @Override public int hashCode() {
      throw new IllegalStateException( "This method must not be called" );
   }

   public static void main( String[] args ) {
      Set< NoHashCode > set = new TreeSet<>( new Comparator< NoHashCode >(){
         @Override public int compare( NoHashCode left, NoHashCode right ) {
            return left.value - right.value;
         }});
      set.add(  new NoHashCode( 1 ));
      set.add(  new NoHashCode( 2 ));
      set.add(  new NoHashCode( 3 ));
      set.add(  new NoHashCode( 1 )); // '1' is already in set
      System.out.println( set.size());// print 3
   }
} 
```

# scala - 使用 Jenkins 的本机库

> ID：15046213
> 
> 赞同：0
> 
> 时间：2013-02-23T21:56:59.397
> 
> 标签：scala, jenkins, native, sbt

我正在使用 Jenkins 作为我的 CI 服务器，用于一个使用本机库的项目。该项目在 scala 中，我正在使用 sbt 编译和运行单元测试。我正在使用的库之一是围绕 c 库的 java (jni) 包装器。

我已将库的位置添加到 .bashrc 中的 LD_LIBRARY_PATH 和 jar 的位置到 CLASSPATH，以便我可以从命令行运行项目和单元测试。

我该如何为詹金斯做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T12:39:27.757

我最近在从远程节点复制工件时遇到了一个问题，通过将以下内容添加到相关节点的高级设置“JVM 选项”中来解决这个问题：

**-Djava.library.path=/lib/x86_64-linux-gnu/**

这非常简单，对于任何查看设置的人来说都是显而易见的，例如在复制节点配置以使用类似机器时。一般来说，我不建议触摸系统或用户范围的脚本。

# amazon-ec2 - 在 Amazon EC2 Windows 实例上安装了区域警报，现在无法访问。我该如何解决？

> ID：15046217
> 
> 赞同：1
> 
> 时间：2013-02-23T21:57:17.367
> 
> 标签：amazon-ec2, firewall

我把这搞砸了。安装了 ZoneMinder，现在我无法通过远程桌面连接到我的 VPS，它可能已经阻止了连接。不知道它会立即开始阻塞，让我之前配置它。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:33:34.557

**注意：我的回答是假设这是一个 Windows 实例，因为使用了“远程桌面”，即使 ZoneMinder 主要是基于 Linux 的。**

简短的回答是您可能不能并且可能会被迫终止实例。

但至少您可以拍摄连接到机器的硬盘驱动器（EBS 卷）的快照，这样您就不会丢失任何数据或配置设置。

如果没有网络连接，您的服务器根本无法访问，除非您在机器上安装了其他仍可访问的服务（例如 ssh、telnet），这些服务可用于反转防火墙设置，否则您无法进行任何操作变化。

我将按此顺序尝试以下操作（尽管它们是远射）：

使用 AWS 控制台重新启动您的实例（可能默认情况下防火墙不会在重新启动时启用，您将能够连接）。

如果这不起作用（它不应该），您将需要停止损坏的实例，分离卷，启动另一个运行 Windows 的 ec2 实例，并将旧卷附加到新实例。

[这是带有确切步骤屏幕截图的过程](http://www.smattie.com/2012/01/03/ec2-windows-20082008r2-loss-of-connectivity-due-to-windows-firewall/)，但禁用新防火墙的具体步骤会有所不同。

完成此操作后，您需要找到有关手动卸载新防火墙的说明 -

1.  拍摄附加到它的 EBS 卷的快照以保留您的数据（本质上是 C:），这将显示在“卷”菜单项下的 EC2 控制台页面上。这样你至少不会丢失任何数据。

2.  启动另一个 Windows EC2 实例，并将 EBS 卷从旧实例附加到这个实例。RDP 进入新实例并尝试手动卸载防火墙。

至少此时您应该能够非常轻松地将文件和服务设置恢复到新实例中，这是我希望您能取得更大成功的方法。

# android - Android：如何从活动向片段的子活动发送额外信息？

> ID：15046219
> 
> 赞同：1
> 
> 时间：2013-02-23T21:57:26.830
> 
> 标签：android, fragment

我想通过 Intent 从 Activity 向 FragmentActivity 的子 Activity 发送额外内容？我怎样才能做到这一点？问题是，我需要启动FragmentActivity，而额外需要传递给它的子Activity。

谢谢

# algorithm - 查找第一个唯一元素

> ID：15046221
> 
> 赞同：16
> 
> 时间：2013-02-23T21:57:32.343
> 
> 标签：algorithm, sorting, search, data-structures, time-complexity

面试的时候遇到这个问题，没法回答。您必须在数组中找到第一个唯一元素（整数）。例如：

```
3,2,1,4,4,5,6,6,7,3,2,3 
```

然后独特的元素是`1, 5, 7`和第一个独特的`1`。

所需解决方案：

> O(n) 时间复杂度。
> 
> O(1) 空间复杂度。

我试着说：

使用 Hashmaps、Bitvector……但它们都没有空间复杂度 O(1)。

谁能告诉我空间 O(1) 的解决方案？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-24T00:44:42.457

这是不可能的非严格证明：众所周知，当您使用 O(1) 空间时，重复检测不会比 O(n * log n) 更好。假设当前问题可以在 O(n) 时间和 O(1) 内存中解决。如果我们将第一个非重复数字的索引“k”设为 0 以外的任何值，我们知道 k-1 是重复的，因此再扫描一次数组，我们可以得到它的重复，从而使重复检测成为 O( n) 锻炼。

同样，它并不严格，我们可以进行 k 始终为 0 的最坏情况分析。但它可以帮助您思考并说服面试官这不太可能。

[http://en.wikipedia.org/wiki/Element_distinctness_problem](http://en.wikipedia.org/wiki/Element_distinctness_problem)说：在大小为 n 的多重集中出现超过 n/k 次的元素可能会在 O(n log k) 时间内找到。这里 k = n 因为我们想要多次出现的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T22:48:20.163

我认为这是不可能的。这不是证明，而是推测的证据。我的推理如下...

首先，您说元素的值没有限制（它们可以是负数、0 或正数）。其次，只有`O(1)`空间，所以我们不能存储超过固定数量的值。因此，这意味着我们必须只使用比较来解决这个问题。此外，我们无法对数组中的值进行排序或交换，因为我们会丢失唯一值的原始顺序（并且我们无法存储原始顺序）。

考虑一个所有整数都是唯一的数组：

```
1, 2, 3, 4, 5, 6, 7, 8, 9, 10 
```

为了`1`在这个数组上返回正确的输出，而不是重新排序数组，我们需要将每个元素与所有其他元素进行比较，以确保它是唯一的，并且以相反的顺序执行此操作，因此我们可以检查第一个唯一的最后一个元素。这需要`O(n^2)`与`O(1)`空间进行比较。

如果有人找到解决方案，我将删除此答案，我欢迎任何关于将其变成更严格证明的指示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T23:19:03.497

**注意：**这在一般情况下不起作用。请参阅下面的推理。

**创见**

也许在 O(n) 时间和 O(1) 额外空间中有一个解决方案。

可以在 O(n) 时间内建立一个堆。请参阅[构建堆](http://en.wikipedia.org/wiki/Binary_heap#Building_a_heap)。

所以你向后构建堆，从数组中的最后一个元素开始，并将最后一个位置作为根。构建堆时，跟踪最近的非重复项。

这假设在堆中插入项目时，您将遇到堆中已存在的任何相同项目。我不知道我能不能证明这一点。. .

假设上述情况属实，那么当您完成堆构建时，您就会知道哪个项目是第一个非重复项目。

**为什么它不起作用**

就地构建堆的算法从数组的中点开始，并假定该点之外的所有节点都是叶节点。然后它向后工作（朝向项目 0），将项目筛选到堆中。该算法不会以任何特定顺序检查最后 n/2 个项目，并且随着项目被筛选到堆中，顺序会发生变化。

因此，我们能做的最好的事情（即使那样我也不确定我们是否能可靠地做到这一点）是仅当第一个非重复项出现在数组的前半部分时才找到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-27T01:47:15.967

OP的问题原始没有提到数字的限制（尽管后面的添加数字可以是负数/正数/零）。在这里，我假设还有一个条件：

> 数组中的数字都小于数组长度且非负数。

然后，给出 O(n) 时间，O(1) 空间解决方案是可能的，并且看起来像一个面试问题，并且问题中给出的测试用例 OP 符合上述假设。

解决方案：

```
for (int i = 0; i < nums.length; i++) {
  if (nums[i] != i) {
    if (nums[i] == -1) continue;
      if (nums[nums[i]] == nums[i]) {
        nums[nums[i]] = -1;
      } else {
        swap(nums, nums[i], i);
        i--;
      }
    }
  }
}

for (int i = 0; i < nums.length; i++) {
  if (nums[i] == i) {
    return i;
  }
} 
```

这里的算法将原始数组视为桶排序中的桶。将数字放入其桶中，如果超过两次，则将其标记为-1。使用另一个循环查找第一个具有 nums[i] == i 的数字

# c++ - 使用 makefile 中的隐式规则进行清理

> ID：15046222
> 
> 赞同：1
> 
> 时间：2013-02-23T21:57:32.127
> 
> 标签：c++, makefile

当我这样做`make clean`时抱怨丢失的文件。特别是它抱怨`mapnameserver.h`包含在`nstest.cc`and中`nstime.cc`。我认为这样做`make clean`会忽略所有其他目标，甚至是隐含的目标。

我想要的是能够做到`make clean`并且`make vectornameserver`不会抱怨 nstest.cc 和 nstime.cc 包含的我尚未编写的标头。这可能吗？

以下是 src 目录中的文件

```
nameserverinterface.h
nstest.cc
nstime.cc
vectornameserver.cc
vectornameserver.h 
```

这是 Makefile

```
#
# Makefile for CPP
#

# Compiler and compiler options:
CC        = /usr/local/bin/clang++
CXX       = /usr/local/bin/clang++
CXXFLAGS  = -c -pipe -O2 -Wall -W -ansi -pedantic-errors
CXXFLAGS += -Wmissing-braces -Wparentheses -Wold-style-cast
CXXFLAGS += -std=c++11 -stdlib=libc++ -nostdinc++
CXXFLAGS += -I/Users/einar/devel/libcxx/include/

LDFLAGS   = -stdlib=libc++
LDLIBS    = -L/Users/einar/devel/libcxx/lib/

SRCDIR      = ../src
LIBDIR      = ../lib
BINDIR      = ../bin
DEPDIR      = ../dep
VPATH       = $(SRCDIR):$(LIBDIR):$(BINDIR):$(DEPDIR)
LIB_INSTALL =
BIN_INSTALL =

SRC       = $(wildcard $(SRCDIR)/*.cc)
OBJ       = $(notdir $(SRC:.cc=.o))
DEP       = $(addprefix $(DEPDIR)/, $(notdir $(SRC:.cc=.d)))
PROGS     = vectornameserver

MAKEDEPEND  = $(CXX) -MM $(CPPFLAGS) -o $*.d $<
CP          = /bin/cp

###
# 
# Phony targets
#
###
.PHONY: all
all: $(PROGS)

.PHONY: folder_setup
folder_setup:
    mkdir -p $(SRCDIR)
    mkdir -p $(LIBDIR)
    mkdir -p $(BINDIR)
    mkdir -p $(DEPDIR)

.PHONY: clean
clean:
    @$(RM) $(OBJ)

.PHONY: cleaner
cleaner:
    @$(RM) $(OBJ)
    @$(RM) $(PROGS)
    @$(RM) $(DEP)
    @$(RM) $(wildcard $(DEPDIR)/*.d*)

###
#
# Set up targets for program files in this section
# a rule should look like:
# program: obj1.o obj2.o ...
#
###
vectornameserver : vectornameserver.o

###
#
# In this section automatic dependencies are handled.
#
###
$(addprefix $(DEPDIR)/, %.d): %.cc
    @set -e; rm -f $@; \
    $(CXX) -MM $(CPPFLAGS) $< > $@.$$$$; \
    sed 's,\($*\)\.o[ :]*,\1.o $@: ,g' < $@.$$$$ \
    > $@; rm -f $@.$$$$

###
#
# Include the automatically generated dependency files
#
###
include $(DEP) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:28:14.573

问题是你`include`在makefile中有一个指令。这隐含地使所有包含的依赖文件成为隐式目标，必须在主目标运行之前刷新这些目标。正是这些规则运行编译器并为您提供错误。

因为如果你只是在做一个 make clean，通常你不需要/不需要依赖文件，通常的做法是在`if`s 周围包裹适当的 s `include`：

```
ifneq ($(MAKECMDGOALS),clean)
ifneq ($(MAKECMDGOALS),cleaner)
-include $(DEP)
endif
endif 
```

如果您这样做，这将避免尝试包含 depfile（并因此重新生成它们）`make clean`或`make cleaner`. 此外，`-`当您第一次运行 make 时，include 上的前缀会抑制有关 depfile 不存在的警告（如果需要，它将（重新）生成它们并重新读取 makefile 和 depfile。）

# ms-word - wysihtml5：将文本从 Word 文档复制到编辑器

> ID：15046225
> 
> 赞同：7
> 
> 时间：2013-02-23T21:57:51.647
> 
> 标签：ms-word, richtextbox, rich-text-editor, wysihtml5

将文本从 word 复制到[wysihtml5 编辑器](http://jhollingworth.github.com/bootstrap-wysihtml5/)时，文本会变得混乱（无论是在格式方面还是在额外添加的字符方面）。有一个简单的解决方法吗？我正在寻找的正确行为是 Stack Overflow 的富文本编辑器的工作方式 - 从 word 复制和粘贴的文本看起来与 word 文档相同。

谢谢！

**更新：** 为了解决粘贴单词文本的格式问题，我`"p": {},`在使用的 wysihtml5-0.30_rc2.js 文件中添加了该行。该行已添加到 defaultOptions[parserRules][tags] 的声明中（[请参阅使用的资源](https://github.com/jhollingworth/bootstrap-wysihtml5/issues/83)）。

不过，现在我可以在粘贴文本的开头看到“字体定义”段落：

```
<!-- /* Font Definitions */ @font-face {font-family:Arial; panose-1:2 11 6 4 2 2 2 2 2 4; mso-font-charset:0; mso-generic-font-family:auto; mso-font-pitch:variable; mso-font-signature:3 0 0 0 1 0;} @font-face {font-family:"Cambria Math"; panose-1:2 4 5 3 5 4 6 3 2 4; mso-font-charset:1; mso-generic-font-family:roman; mso-font-format:other; mso-font-pitch:variable; mso-font-signature:0 0 0 0 0 0;} /* Style Definitions */ p.MsoNormal, li.MsoNormal, div.MsoNormal {mso-style-unhide:no; mso-style-qformat:yes; mso-style-parent:""; margin-top:0cm; margin-right:0cm; margin-bottom:10.0pt; margin-left:0cm; line-height:115%; mso-pagination:widow-orphan; mso-hyphenate:none; font-size:11.0pt; font-family:Arial; mso-fareast-font-family:Arial; mso-bidi-font-family:Arial; color:black; mso-fareast-language:HI; mso-bidi-language:HI;} a:link, span.MsoHyperlink {mso-style-unhide:no; mso-style-parent:""; color:navy; mso-ansi-language:#00FF; mso-fareast-language:#00FF; mso-bidi-language:#00FF; text-decoration:underline; text-underline:single;} a:visited, span.MsoHyperlinkFollowed {mso-style-noshow:yes; mso-style-priority:99; color:purple; mso-themecolor:followedhyperlink; text-decoration:underline; text-underline:single;} .MsoChpDefault {mso-style-type:export-only; mso-default-props:yes; font-size:10.0pt; mso-ansi-font-size:10.0pt; mso-bidi-font-size:10.0pt;} @page WordSection1 {size:612.0pt 792.0pt; margin:72.0pt 90.0pt 72.0pt
90.0pt; mso-header-margin:36.0pt; mso-footer-margin:36.0pt; mso-paper-source:0;} div.WordSection1 {page:WordSection1;} --> 
```

这仅在我使用 Firefox 时发生，在 Chrome 中不会发生。关于如何摆脱这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-11T15:08:25.457

[wysihtml5](http://xing.github.io/wysihtml5/)包含一个解析器，它分析粘贴在其文本区域中的所有文本并应用`parserRules`配置对象中定义的过滤规则。添加`"style": { "remove": 1 }`到你`parserRules`应该做的伎俩。

要了解 Firefox 问题，您必须查看粘贴到文本区域的原始剪贴板 HTML 内容（源自 Word）。只是复制一些 Word 文本并将其粘贴到文本编辑器中没有帮助，因为文本编辑器需要剪贴板内容的纯文本变体。

如果您使用的是 Mac，您可以借助[ClipboardViewer 工具](https://developer.apple.com/library/mac/samplecode/ClipboardViewer/Introduction/Intro.html)查看原始剪贴板内容，您必须使用 XCode 自行编译。所需的 HTML 内容应位于`public.html`或`Apple HTML pasteboard type`字段中。也许存在其他不需要编译和/或在其他操作系统上工作的工具。

现在您应该看到 Word 中的剪贴板内容实际上看起来像

```
 <span>
    <!--
      /* Font Definitions */
      ...
      div.WordSection1 {page:WordSection1;}
      ...
    -->
    </span> 
```

因此，通过删除`style`标签（及其所有内容），字体定义垃圾就会消失。

查看[wysihtml5 的 parserRule 演示](https://github.com/xing/wysihtml5/blob/master/parser_rules/advanced.js)，了解一些更高级的配置选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-09T02:20:31.170

我已经通过覆盖解决了这个问题`wysihtml5.dom.getPastedHtml`。加载 wysihtml5 后添加：

```
wysihtml5.dom.getPastedHtml = function(event) {
  var html;
  if (event.clipboardData) {
    html = event.clipboardData.getData('text/plain');
  }
  return html;
}; 
```

# nosql - DynamoDB 模型/键建议

> ID：15046228
> 
> 赞同：0
> 
> 时间：2013-02-23T21:58:17.700
> 
> 标签：nosql, amazon-dynamodb

我希望有人可以帮助我了解如何最好地为 DynamoDb 设计我的表。我正在构建一个应用程序，用于跟踪某个用户对另一个用户个人资料的访问。

目前我有一个 MongoDB，其中一个条目包含以下字段：

*   用户身份
*   访问过的个人资料 ID
*   日期
*   地位
*   isMobile

这将如何以不会太慢的方式转化为 DynamoDB？我需要进行搜索查询以选择具有特定 userId 的所有项目，以影响状态和 isMobile。我的钥匙是什么？我可以使用限制功能仅请求最新的 x 条目（按日期排序吗？）。

我真的很喜欢 DynamoDB 的使用方式，但在常规 NoSQL 数据库和键值 nosql 数据库之间进行点击似乎有点复杂。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T00:28:47.587

有几种方法可以做到这一点 - 它可能取决于您可能想要在此表上执行的任何其他查询。

1.  将您`HashKey`的表设为`userId`，然后将其`RangeKey`设为`<status>:<isMobile>:<date>`（例如`active:true:2013-03-25T04:05:06.789Z`）。然后您可以使用in 进行[查询](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/API_Query.html)（并设置为以升序返回）。`BEGINS_WITH``RangeKeyCondition``ScanIndexForward``false`

    因此，假设您想查找最近 20 行`1234abcd`具有`status`of`active`和 an`isMobile`的用户 ID `true`（我猜这就是您所说的“使 [它们] 生效”），那么您的[查询](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/API_Query.html)将如下所示：

    ```
    {
      "TableName": "Users",
      "Limit": 20,
      "HashKeyValue": { "S": "1234abcd" },
      "RangeKeyCondition": {
        "ComparisonOperator": "BEGINS_WITH"
        "AttributeValueList": [{ "S": "active:true:" }],
      },
      "ScanIndexForward": false
    } 
    ```

2.  另一种方法是制作`HashKey` `<userId>:<status>:<isMobile>`，而`RangeKey`将只是`date`。在这种情况下，您不需要 a `RangeKeyCondition`（在示例中，`HashKeyValue`将是`{ "S": "1234abcd:active:true" }`）。

# javascript - 使用 mongoskin 对 mongodb 进行单个查询或多个查询？？？

> ID：15046229
> 
> 赞同：1
> 
> 时间：2013-02-23T21:58:19.493
> 
> 标签：javascript, node.js, mongodb, mongoskin, nosql

这是在 mongodb 上

```
{cod_com:'WWWOAN',
     cod_prod[{prod:'proda',info:'hola mundo'},{prod:'pacda',info:'hola mundo'},{prod:'prcdb',info:'hola mundo'}]
}
{cod_com:'WWWOA2',
     cod_prod[{prod:'prdda',info:'hola mundo'},{ccod:'prcda',info:'hola mundo'}]
}
{cod_com:'WWWOA1',
     cod_prod[{prod:'prcda',info:'hola mundo'},{aaad:'prcda',info:'hola mundo'}]
} 
```

我必须获取 cod_prod 变量中的信息......所以我分两个步骤工作

首先我查询 cod_prod 的所有者

```
db.collection.findOne({cod_com:'WWWOA1'}); 
```

如果存在，我查询我需要的 cod_prod

```
db.collection.findOne({'cod_prod.prod':'prcda'}); 
```

所以基本上我查询了两次，第一次是产品的所有者，第二次是我正在搜索的产品的信息......

问题是，有什么方法可以直接搜索产品？？？

我不能用这个...

```
db.collection.findOne({'cod_prod.prod':'prcda'}); 
```

因为不同的所有者拥有相同的产品...所以首先我得到所有者，然后我得到产品....

有人有更好的方法吗？或获取信息的不同方式？？？tnx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:06:31.047

如果您这样查询：

```
db.collection.findOne({'cod_com':'WWOA1', 'cod_prod.prod':'prcda'}); 
```

你应该得到你想要的结果。

# c++ - 在 C++ 中使用 stl 列表和类

> ID：15046230
> 
> 赞同：0
> 
> 时间：2013-02-23T21:59:02.647
> 
> 标签：c++, list, stl

如果我想通过迭代器 iter 打印所有名称，我需要写什么（在“？！？！？！”）？该类只有名称，c

```
//the code
    class H {
        string name;
    public :
        H (string n="WWW"): name(n){}
        string getName()const{return name;};
    };

    void main ()
    {
        H h1("HHH");
        H h2;
        list<H*> HH;
        list<H*>::iterator iter=HH.begin();

        HH.insert(iter,h1);
        HH.insert(iter,h2);

        for (; iter != HH.end(); iter++)
            cout<<iter  //?!?!?!
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:01:40.333

`std::cout << (*iter)->getName() << '\n';`

或除换行符以外的任何分隔符。

此外，您的`insert`行是错误的，因为`h1`并且`h2`有 type `H`，而容器是`H*`.

# opencv - 在opencv中操作Mat的数据

> ID：15046236
> 
> 赞同：0
> 
> 时间：2013-02-23T21:59:34.017
> 
> 标签：opencv

我有一个整数向量。我想将此向量添加到 Mat 对象中的特定行/列。这可能吗。我一直在查看 API，但找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:35:47.823

Mat 有一个构造函数（还有一个赋值运算符），它以向量作为输入，所以这同样适用于 Mat 的行（又是 Mat 的行）

```
Mat big(5,5,CV_32S); // 5x5, 1channel, int mat
vector<int> vec(5); vec[0]=1; vec[2] = 17; vec[4]=13;  // make a row vec 
```

~~big.row(1) = vec; // 小心，对 col() 不起作用，因为它返回一个副本~~

 ~~```
0 0 0 0 0
1 0 17 0 13
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0 
```~~ 

~~我在这里错了，对不起。row() 和 col() 都会复制原始数据，因此分配给它是没有用的。~~

 ~~* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T10:43:43.010

尝试[`cv::Mat::row()`](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat-row)和`cv::Mat::col()`。~~

# soap - BancBox SOAP API getClient - 使用 WCF 客户端基础结构调用失败

> ID：15046238
> 
> 赞同：1
> 
> 时间：2013-02-23T21:59:41.320
> 
> 标签：soap, xml-serialization, wcf-client, payment-processing

如果这篇文章感觉太长，我提前道歉。但是 1）这是我的第一篇文章，2）我真的已经过了河，穿过树林试图弄清楚这一点。

Visual Studio 2012 中的添加服务引用功能会生成一个代理，该代理（显然）会生成无效的 SOAP 消息。我怀疑它与序列化或代理类型的装饰方式有关，但我似乎无法弄清楚。非常感谢您的帮助。

**详细信息 1.** 我的环境是 Visual Studio 2012，我创建了一个 .NET 4.5 类库，其中包含对**[https://sandbox-api.bancbox.com/v1/BBXPort?wsdl](https://sandbox-api.bancbox.com/v1/BBXPort?wsdl)**的服务引用。我正在尝试调用 getClient() 函数；这是在这里定义的。( [http://www.bancbox.com/api/view/45](http://www.bancbox.com/api/view/45) )

代码如下所示：

```
public void GetClient()

{
    // create an instance of the service reference proxy class
    var bbx=newBBXClient();
    bbx.ChannelFactory.Endpoint.Behaviors.Remove<System.ServiceModel.Description.ClientCredentials>();
    bbx.ChannelFactory.Endpoint.Behaviors.Add(new CustomCredentials());

    bbx.ClientCredentials.UserName.UserName="MY_USERNAME";
    bbx.ClientCredentials.UserName.Password="MY_PASSWORD";

    var customerId=newid {
            subscriberReferenceId="44XX33YY"
    };

    var request=newgetClientRequest {
            subscriberId=MY_SUBSCRIBER_ID,
            clientId=customerId
    };

    var response=bbx.getClient(request);
} 
```

**细节 2.** 我通过 SoapUI 成功调用了 Web 服务。成功的 SoapUI 生成的 SOAP 消息如下所示

```
<soapenv:Envelope xmlns:sch="schema.bancbox.com" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
<soapenv:Header>
    <wsse:Security soapenv:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
        <wsse:UsernameToken wsu:Id="UsernameToken-11">
            <wsse:Username>MY_USERNAME</wsse:Username>
            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">MY_PASSWORD</wsse:Password>
            <wsse:Nonce EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">tRLo6AlRKl+/rULiKq6A6g==</wsse:Nonce>
            <wsu:Created>2013-02-22T18:32:02.204Z</wsu:Created>
        </wsse:UsernameToken>
    </wsse:Security>
</soapenv:Header>
<soapenv:Body>
    <sch:getClient>
        <getClientRequest>
            <subscriberId>MY_SUBSCRIBER_ID</subscriberId>
                <clientId>
                    <!--Optional:-->
                    <subscriberReferenceId>44XX33YY</subscriberReferenceId>
                </clientId>
        </getClientRequest>
    </sch:getClient>
</soapenv:Body>
</soapenv:Envelope> 
```

**细节 3.**每个 Fiddler，我失败的 SOAP 消息看起来像这样

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
<s:Header>
<VsDebuggerCausalityData xmlns="http://schemas.microsoft.com/vstudio/diagnostics/servicemodelsink">uIDPozcAgEH0QhJHloqMBWUf3mAAAAAA5wy3enJkDUGU8IaMUCFyEjzfL+1Uez1HhAvEeFpJ+30ACQAA</VsDebuggerCausalityData>
    <o:Security s:mustUnderstand="1" xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
        <o:UsernameToken u:Id="uuid-6e1c9f81-0651-41f7-b659-26b191bf7e13-1" xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
            <o:Username>MY_USERNAME</o:Username>
            <o:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">MY_PASSWORD</o:Password>
            <o:Nonce EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">hGggJkxurSkHQ3MKoeBK6AmEHNs=</o:Nonce>
            <u:Created>2013-02-23T11:24:47.663Z</u:Created>
        </o:UsernameToken>
    </o:Security>
</s:Header>
<s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <getClient xmlns="schema.bancbox.com">
        <getClientRequest xmlns="">
            <subscriberId>MY_SUBSCRIBER_ID</subscriberId>
            <clientId>
                <subscriberReferenceId>XX55YY22</subscriberReferenceId>
            </clientId>
        </getClientRequest>
    </getClient>
</s:Body>
</s:Envelope> 
```

上面的 SOAP 消息是在运行 GetClient() 方法时产生的。GetClient 引发以下异常。

```
System.ServiceModel.FaultException
Unmarshalling Error: cvc-elt.4.2: Cannot resolve 'getClientRequest' to a type definition for element 'getClientRequest'. 
```

当我使用 SoapUI 重播相同的失败消息时，我得到以下响应：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
<soap:Body>
    <soap:Fault>
        <faultcode>soap:Client</faultcode>
        <faultstring>Unmarshalling Error: cvc-elt.4.2: Cannot resolve 'getClientRequest' to a type definition for element 'getClientRequest'. </faultstring>
    </soap:Fault>
</soap:Body>
</soap:Envelope> 
```

**细节 4.**根据我的研究，这表明另一端的服务器是 Apache CXS。我的 SOAP 请求令人窒息。所以我开始玩弄我的 SOAP 消息并通过 SoapUI 提交它。

成功消息和我的失败消息中的第一个明显距离是这些行

成功

```
<sch:getClient>
    <getClientRequest> 
```

失败

```
<getClient xmlns="schema.bancbox.com">
    <getClientRequest xmlns=""> 
```

所以我做的第一件事就是让我的 getClientRequest 标记与成功的标记相同。

```
<getClient xmlns="schema.bancbox.com">
    <getClientRequest> 
```

这产生了以下响应。

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
<soap:Body>
    <soap:Fault>
        <faultcode>soap:Server</faultcode>
        <faultstring>Found element {schema.bancbox.com}getClientRequest but could not find matching RPC/Literal part</faultstring>
    </soap:Fault>
</soap:Body>
</soap:Envelope> 
```

我做的下一件事是更改为 getClient 标记分配模式的方式。

前

```
<getClient xmlns="schema.bancbox.com"> 
```

后

```
<s:Envelope xmlns:bb="schema.bancbox.com" xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
. . .
    <bb:getClient>
        <getClientRequest>
. . .
    </bb:getClient> 
```

生成的 SOAP 消息如下所示，并且它是成功的。

```
<s:Envelope xmlns:bb="schema.bancbox.com" xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
<s:Header>
<VsDebuggerCausalityData xmlns="http://schemas.microsoft.com/vstudio/diagnostics/servicemodelsink">uIDPozcAgEH0QhJHloqMBWUf3mAAAAAA5wy3enJkDUGU8IaMUCFyEjzfL+1Uez1HhAvEeFpJ+30ACQAA</VsDebuggerCausalityData>
    <o:Security s:mustUnderstand="1" xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
        <o:UsernameToken u:Id="uuid-6e1c9f81-0651-41f7-b659-26b191bf7e13-1" xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
            <o:Username>MY_USERNAME</o:Username>
            <o:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">MY_PASSWORD</o:Password>
            <o:Nonce EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">hGggJkxurSkHQ3MKoeBK6AmEHNs=</o:Nonce>
            <u:Created>2013-02-23T11:24:47.663Z</u:Created>
        </o:UsernameToken>
    </o:Security>
</s:Header>
<s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <bb:getClient>
        <getClientRequest>
            <subscriberId>MY_SUBSCRIBER_ID</subscriberId>
            <clientId>
                <subscriberReferenceId>XX55YY22</subscriberReferenceId>
            </clientId>
        </getClientRequest>
    </bb:getClient>
</s:Body>
</s:Envelope> 
```

所以百万美元的问题是为什么和如何。

*为什么 .NET 代理类以它的方式序列化 SOAP 消息？

*我如何解决它？我怎样才能将我的代理序列化为上面的 SOAP 消息？如何强制序列化程序为信封中的消息命名空间定义简写，然后在消息标签中使用简写？

仅供参考，为了达到这一点，我必须克服许多 WCF WSE 问题，并最终实施 Rich Stahls 博客上慷慨提供的解决方案。我会发布链接，但显然我没有足够的代表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:08:53.907

据我了解，WCF 生成的 SOAP 消息在语法上是正确的。但是，Java CXF Web 服务对于它们将接受的 SOAP 消息非常严格。

在 WCF 代理生成的 SOAP 消息的操作节点中为 xml 命名空间定义设置别名的特定问题的解决方案涉及实现**自定义消息检查器**，此处详细介绍： [强制 WCF 在客户端代理中创建 xml 命名空间别名](https://stackoverflow.com/questions/15056340/force-wcf-to-create-an-xml-namespace-alias-in-client-proxy/15070956#15070956)。

这完全解决了我的问题。

# vb.net - Visual Basic - 使用循环在表单上随机绘制相同大小的圆圈（5 - 10），每个圆圈以随机颜色

> ID：15046239
> 
> 赞同：0
> 
> 时间：2013-02-23T21:59:41.783
> 
> 标签：vb.net

我有我写的这段代码，但是当我左键单击表单时使用了这段代码，但不是随机数的圆圈。我想知道当我单击一个按钮时，如何调整它以在表单上绘制 5-10 个随机颜色的随机圆圈，但它必须使用循环。谢谢！！

```
Private Sub CirclePainterForm_MouseDown(ByVal sender As _
    Object, ByVal e As System.Windows.Forms.MouseEventArgs) _
    Handles MyBase.MouseDown

        Dim graphicsObject As Graphics = CreateGraphics()
        Dim randomObject As Random = New Random
        Dim diameter As Integer = randomObject.Next(5, 200)

        If e.Button = Windows.Forms.MouseButtons.Left Then
            graphicsObject.FillEllipse(New SolidBrush(RandomColor()), e.X, e.Y, _
            diameter, diameter)

            graphicsObject.FillEllipse(New SolidBrush(RandomColor()), e.X + 250, e.Y, _
            diameter + 50, diameter + 50)

            graphicsObject.FillEllipse(New SolidBrush(RandomColor()), e.X + 500, e.Y, _
            diameter + 75, diameter + 75)

            graphicsObject.FillEllipse(New SolidBrush(RandomColor()), e.X + 750, e.Y, _
            diameter + 100, diameter + 100)

            graphicsObject.FillEllipse(New SolidBrush(RandomColor()), e.X + 1000, e.Y, _
            diameter + 125, diameter + 125) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T02:27:54.477

在表单中添加一个按钮并为 Click 事件添加代码：

做圆形或方形[并更新您/我的评论]

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click

    Dim rnd As New Random(), rndCol As New Random(DateTime.Now.Ticks Mod ((rnd.Next) + 1))
    Dim numShapes = rnd.Next(5, 11), bIsCircleOrSquare As Boolean = (rnd.Next Mod 2)

    Using g = Me.CreateGraphics()
        g.Clear(Me.BackColor)
        Dim diam = rnd.Next(55, Math.Min(255, ClientSize.Width))
        While numShapes > 0
            Using b As New SolidBrush(Color.FromArgb(rndCol.Next(100, 256), rndCol.Next(256), rndCol.Next(256), rndCol.Next(256)))
                Dim x = rnd.Next(ClientSize.Width - diam), y = rnd.Next(ClientSize.Height - diam)
                If bIsCircleOrSquare Then
                    g.FillRectangle(b, x, y, diam, diam)
                    g.DrawRectangle(Pens.Black, x, y, diam, diam)
                Else
                    g.FillEllipse(b, x, y, diam, diam)
                    g.DrawEllipse(Pens.Black, x, y, diam, diam)
                End If
            End Using
            numShapes -= 1
        End While
    End Using

End Sub 
```

如果您想看到圆圈重叠，您可以替换：

```
 Using b As New SolidBrush(Color.FromArgb(rndCol.Next(100,256), rndCol.Next(256), rndCol.Next(256), rndCol.Next(256))) 
```

和

```
 Using b As New SolidBrush(Color.FromArgb(255, rndCol.Next(256), rndCol.Next(256), rndCol.Next(256))) 
```

# erlang - Jinterface 不允许 java 节点启动消息传递

> ID：15046240
> 
> 赞同：0
> 
> 时间：2013-02-23T21:59:42.847
> 
> 标签：erlang, jinterface

我开始我的 Erlang 节点：

```
erl -sname erlangNode -cookie secret

P = spawn( fun() -> receive _ -> io:format("gotit") end end).
register(java_server, P). 
```

然后我运行我的 java 节点客户端代码：

```
OtpNode node = new OtpNode("bingo", "secret");
OtpMbox mbox = node.createMbox("com");

System.out.println( node.ping("erlangNode@localhost",2000) );

mbox.send("java_server", "localhost",new OtpErlangAtom("hej")); 
```

但是 Erlang 进程 java_server 永远不会收到消息。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T11:15:53.413

您的 java 节点在 ping 消息上输出 true 吗？也许您忘记在发送中写入整个节点名称？

```
mbox.send("java_server", "erlangNode@localhost",new OtpErlangAtom("hej")); 
```

# python - 如何在Python中按字母顺序对字符串中的字母进行排序

> ID：15046242
> 
> 赞同：194
> 
> 时间：2013-02-23T22:00:04.827
> 
> 标签：python, string

有没有一种简单的方法可以在 Python 中按字母顺序对字符串中的字母进行排序？

因此对于：

```
a = 'ZENOVW' 
```

我想返回：

```
'ENOVWZ' 
```

* * *

## 回答 #1

> 赞同：331
> 
> 时间：2013-02-23T22:02:27.353

你可以做：

```
>>> a = 'ZENOVW'
>>> ''.join(sorted(a))
'ENOVWZ' 
```

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2013-02-23T22:07:54.783

```
>>> a = 'ZENOVW'
>>> b = sorted(a)
>>> print b
['E', 'N', 'O', 'V', 'W', 'Z'] 
```

`sorted`返回一个列表，因此您可以使用以下命令再次将其变为字符串`join`：

```
>>> c = ''.join(b) 
```

它将 的项目与每个项目之间`b`的空字符串连接在一起。`''`

```
>>> print c
'ENOVWZ' 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2015-10-17T18:48:43.093

Sorted() 解决方案可以用其他字符串给你一些意想不到的结果。

其他解决方案列表：

## 对字母进行排序并区分它们：

```
>>> s = "Bubble Bobble"
>>> ''.join(sorted(set(s.lower())))
' belou' 
```

## 对字母进行排序并在保持大写的同时区分它们：

```
>>> s = "Bubble Bobble"
>>> ''.join(sorted(set(s)))
' Bbelou' 
```

## 对字母进行排序并保留重复项：

```
>>> s = "Bubble Bobble"
>>> ''.join(sorted(s))
' BBbbbbeellou' 
```

如果您想摆脱结果中的空间，请在上述任何一种情况下添加 strip() 函数：

```
>>> s = "Bubble Bobble"
>>> ''.join(sorted(set(s.lower()))).strip()
'belou' 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2019-04-14T23:42:52.220

Python 函数`sorted`返回基于 ASCII 的字符串结果。

**INCORRECT**：在下面的示例中，并且`e`落后`d`于ASCII 值。`H``W`

```
>>>a = "Hello World!"
>>>"".join(sorted(a))
' !!HWdellloor' 
```

**CORRECT**：为了在*不*改变字母大小写的情况下编写已排序的字符串。使用代码：

```
>>> a = "Hello World!"
>>> "".join(sorted(a,key=lambda x:x.lower()))
' !deHllloorW' 
```

如果要删除所有标点符号和数字。使用代码：

```
>>> a = "Hello World!"
>>> "".join(filter(lambda x:x.isalpha(), sorted(a,key=lambda x:x.lower())))
'deHllloorW' 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-11-24T12:34:28.810

您可以使用减少

```
>>> a = 'ZENOVW'
>>> reduce(lambda x,y: x+y, sorted(a))
'ENOVWZ' 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-06-11T16:18:38.373

该代码可用于按字母顺序对字符串进行排序，而无需使用 python 的任何内置函数

k = input("再次输入任意字符串")

```
li = []
x = len(k)
for i in range (0,x):
    li.append(k[i])

print("List is : ",li)

for i in range(0,x):
    for j in range(0,x):
        if li[i]<li[j]:
            temp = li[i]
            li[i]=li[j]
            li[j]=temp
j=""

for i in range(0,x):
    j = j+li[i]

print("After sorting String is : ",j) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-09-04T10:21:57.870

真的很喜欢 reduce() 函数的答案。这是使用accumulate() 对字符串进行排序的另一种方法。

```
from itertools import accumulate
s = 'mississippi'
print(tuple(accumulate(sorted(s)))[-1]) 
```

已排序-> ['i', 'i', 'i', 'i', 'm', 'p', 'p', 's', 's', 's', 's' ]

元组（累积（排序（s））->（'i'，'ii'，'iii'，'iiii'，'iiiim'，'iiiimp'，'iiiimpp'，'iiiimpps'，'iiiimppss'，'iiiimppsss ', 'iiiimppssss')

我们正在选择元组的最后一个索引 (-1)

# c++ - 问题重载箭头（->）运算符c ++

> ID：15046243
> 
> 赞同：2
> 
> 时间：2013-02-23T22:00:09.663
> 
> 标签：c++, templates, operators, iteration, overloading

我有一个自定义容器来存储数据和一个迭代器来访问它。问题是迭代器中的 -> 运算符不允许我修改容器中的数据。

value_type 是一个 std::pair<>

数据持有者：

```
template <class tree>
struct avl_node {
private:
    typedef typename tree::key_type         Key;
    typedef typename tree::mapped_type      Type;
    typedef typename tree::value_type       value_type;
public:
    typedef avl_node*                       node_ptr;
    typedef const avl_node*                 const_node_ptr;
    node_ptr _parentNode, _leftNode, _rightNode;
    int _balance;
    Key first;
    Type second;
} 
```

迭代器：

```
template <class tree>
class avl_iterator {
public:
    typedef typename tree::node             node;
    typedef typename tree::node_ptr         node_ptr;
    typedef typename tree::const_node_ptr   const_node_ptr;
    typedef typename tree::utilities        utilities;
    typedef typename tree::value_type       value_type;
private:
    node_ptr _node;
public:
    avl_iterator() : _node()  { }
    avl_iterator( const node_ptr node ) : _node ( node ) { }
    ~avl_iterator() { _node = NULL; }

    avl_iterator& operator=(const avl_iterator& rhs) {
        _node = rhs._node;
        return (*this);
    }
    bool operator == ( const avl_iterator& rhs ) { return ( _node == rhs._node); }
    bool operator != ( const avl_iterator& rhs ) { return ( _node != rhs._node); }

    avl_iterator& operator++()
    {
        _node = utilities::next_node( _node );
        return (*this);
    }
    avl_iterator& operator ++( int ) {
        avl_iterator temp(*this);
        ++(*this);
        return(temp);
    }

    avl_iterator& operator -- () {
        _node = utilities::prev_node( _node );
        return (*this);
    }

    avl_iterator& operator -- ( int ) {
        avl_iterator temp(*this);
        --(*this);
        return(temp);
    }

    value_type& operator * () {
        return value_type( node->first, node->second );
    }

    node_ptr operator -> () const {
        return _node;
    }
}; 
```

主要的

```
 try{
    using namespace avl;
    avltree<int,int> tree;
    tree.insert(intPair(1,1));
    tree.insert(intPair(2,1));
    tree.insert(intPair(3,1));
    tree.insert(intPair(4,1));
    tree.insert(intPair(5,1));
    tree.insert(intPair(6,1));
    tree.insert(intPair(7,1));
    tree.insert(intPair(8,1));
    tree.insert(intPair(9,1));
    tree.insert(intPair(10,1));
    tree.insert(intPair(11,1));
    tree.insert(intPair(12,1));

    avltree<int,int>::iterator it;
    //std::map<int,int>::iterator it;
    for( it = tree.begin(); it != tree.end(); ++it )
    {
        std::cout<< it->first << " : ";
    }
    std::cout << std::endl;
    for( it = tree.end(); it != tree.begin(); --it )
    {
        std::cout<< it->first << " : ";
    }
    std::cout << std::endl;

            it->first = 5;//shouldnt compile with this line of code, but does
            it->second = 10;
}
catch(...)
{
    std::cout<<"Catch Block\n";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T22:17:07.200

拥有会更好

```
value_type value; 
```

代替`avl_node`：

```
Key first;
Type second; 
```

然后，您可以在中定义`avl_iterator`：

```
value_type& operator * () const {
    return _node->value;
}

value_type* operator -> () const {
    return &_node->value;
} 
```

# c# - 正则表达式模式中的可选部分

> ID：15046248
> 
> 赞同：0
> 
> 时间：2013-02-23T22:01:13.720
> 
> 标签：c#, .net, regex

我有以下字符串要处理

```
Name ( $4 USD )
Name ( $4.1 USD )
Name ( $4.12 USD )
Name ( $4123123.02 USD ) 
```

我想从他们那里得到美元现在我正在使用以下正则表达式模式

```
Regex regex = new Regex(@"\( \$(?<cash>\d+\.\d{1,2}) USD \)"); 
```

但它与第一​​个示例不匹配。我应该更改什么以使 .\d{1,2} 部分可选？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T22:04:03.593

```
Regex regex = new Regex(@"\( \$(?<cash>\d+(?:\.\d{1,2})?) USD \)"); 
```

`(?:...)`是一个非捕获组，以下`?`使该组可选。

# class - 参考子类中的静态变量运行方法

> ID：15046252
> 
> 赞同：-1
> 
> 时间：2013-02-23T22:01:20.590
> 
> 标签：class, coffeescript

我有一个`Child`扩展类`Test`。我想从`Test`from调用一个函数`Child`。

我试过这个：

```
class Test
    constructor: ->
        @i = 'hello world'

    f1: -> console.log @i
    f2: -> console.log 'hello'

class Child extends Test
    run: ->
        Test::f1()

hello = new Child()
hello.run() 
```

当我打电话时`hello.run()`，它会打电话`Test.f1()`，但结果是`undefined`。`@i`它没有在运行之前设置静态变量`Test.f1()`。

如果我切换`Test::f1()`到`Test::f2()`，它会给我正确的结果。

我需要知道当我创建一个时我应该如何运行，以便在`Test`我运行时定义。`constructor``new Child()``@i``Test``Test::f1()``Child.run()`

谢谢！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:05:04.193

当您创建`Child`. 问题在于您调用`f1`.

你不想说`Test::f1()`。你可以说`@f1()`，since`Child`是 的子类`Test`。它们在一个非常重要的方面是不同的：`Test::f1()`不设置`this`，所以当该函数请求时`this.i`，它只找到`undefined`, 因为`this`设置为`Window`（或浏览器中类似的荒谬，不确定你是否在 Node 中运行它）。说`@f1()`就是说`Test::f1.call(this)`。这是 CoffeeScript 的类系统让你做的一件好事。

最后，一个迂腐的注释：您编写的代码中没有静态变量。`i`，正如你所写的，是一个实例变量。静态变量如下所示：

```
class Test
  @staticVar = 1234 
```

或者像这样：

```
class Test
  # ...

Test.staticVar = 1234 
```

实例变量如下所示：

```
class Test
  fn: -> 
    @instanceVar = 1234 
```

或者像这样：

```
test = new Test()
test.instanceVar = 1234 
```

甚至像这样（对于所有实例共享的实例变量的默认值）：

```
Test::instanceVar = 1234 
```

与此相类似：

> 当我打电话时`hello.run()`，它会打电话`Test.f1()`，但结果是`undefined`。`@i`它没有在运行之前设置静态变量`Test.f1()`。

你从不打电话`Test.f1()`；你打电话`Test::f1()`，这是非常不同的。在您编写的代码中，*没有*，`Test.f1`只有`Test.prototype.f1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T22:11:23.163

这是一种方法：

```
class Test
  @i: 'hello world'

  @f1: -> console.log @i
  f2:  -> console.log 'hello'

class Child extends Test
  run: ->
    Test.f1()

hello = new Child()
hello.run() 
```

注意，`i`变量是静态的，所以在构造函数中设置它没有意义。此外，该`f1`方法现在也是静态的。

（我不是 CoffeeScript 专家，所以我不确定`::`需要什么语法。）

# xna - 如何在 XNA 中制作具有多个通道的像素着色器？

> ID：15046258
> 
> 赞同：1
> 
> 时间：2013-02-23T22:01:55.530
> 
> 标签：xna, shader

我对着色器非常陌生，并且对整个事情感到非常困惑，即使在学习了几个教程之后（实际上这是我今天关于着色器的第二个问题）。

我正在尝试用两个通道制作一个着色器：

```
technique Technique1  
{  
    pass Pass1
    {  
        PixelShader = compile ps_2_0 HorizontalBlur();  
    }  

    pass Pass2
    {  
        PixelShader = compile ps_2_0 VerticalBlur();  
    }
} 
```

但是，这只适用于 VerticalBlur()。如果我删除 Pass2，它会退回到 Pass1 中的 Horizo​​ntalBlur()。我错过了什么吗？也许它只是没有将第一遍的结果传递给第二遍，在这种情况下我该怎么做？

此外，在我读过的大多数教程中，我都被告知`effect.CurrentTechnique.Passes[0].Apply();`在我开始使用效果的 spritebatch 之后放置。但是，这似乎并没有改变任何东西。我可以将它设置为 Passes[1] 甚至完全删除它，但我仍然只得到 Pass2。（但是，当我尝试将其设置为 Passes[2] 时，我确实遇到了错误。）那条线有什么用呢？在最近的版本中是否已经删除了对它的需求？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T22:27:06.540

以下原因

```
effect.CurrentTechnique.Passes[0].Apply(); 
```

是许多效果只有一次通过。

要运行多次传递，我认为您必须这样做：

```
foreach (EffectPass pass in effect.CurrentTechnique.Passes)
{
    pass.Apply();

    //Your draw code here:

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T19:55:13.490

渲染多个通道：

对于第一遍，将场景渲染到纹理上。

对于第二、第三、第四等通道：

*   绘制一个使用上一遍纹理的四边形。如果还有更多通道，则将其渲染到另一个纹理，否则如果这是最后一个通道，则将其渲染到后台缓冲区。

在您的示例中，假设您正在渲染汽车。

*   首先，您将汽车渲染为纹理。

*   然后绘制一个大矩形，屏幕大小（以像素为单位），放置在 0.5 的 z 深度，具有身份世界、视图和投影矩阵，并以您的汽车场景作为纹理，并应用水平模糊通道。这被渲染到一个新的纹理，现在有一个水平模糊的汽车。

*   最后，使用“水平毛刺汽车”纹理渲染相同的矩形，并应用垂直模糊通道。将此渲染到后台缓冲区。您现在已经绘制了一个模糊的汽车场景。

# android - android adb“找不到usb设备”问题的原因？

> ID：15046259
> 
> 赞同：5
> 
> 时间：2013-02-23T22:02:04.103
> 
> 标签：android, usb, adb

我在这里找到了很多关于使用 adb 时“找不到 USB 设备”问题的解决方案的问题，但我没有找到任何关于发生了什么或是否有长期修复的解释。

当我在开发时，我会编写一些代码然后点击运行或调试，在我的设备上观察结果，然后重复这个过程。

时不时地，也许每隔几天，我会收到“找不到 USB 设备”错误。

我尝试的第一件事是打开任务列表并杀死 adb.exe。这有时有效。

如果这不起作用，我尝试的下一件事是杀死 adb.exe，然后断开 android 设备，重新启动它，然后重新连接它，然后从命令行运行“adb usb”。这几乎总是有效的。

如果上述方法不起作用，那么我将重新启动 android 设备并重新启动计算机。在问题发生的所有剩余时间里，这似乎都是如此。

有谁知道为什么会发生这种情况以及是否有办法防止它发生？我唯一的理论（基于不多）可能是设备变热了（由于开发和调试期间 CPU 的大量使用）并且做错了事情，这与 adb 做事的方式相混淆。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-05T05:54:26.663

我有同样的问题。我最终不得不去我的计算机/属性/高级系统设置/环境变量/，单击“PATH”，然后粘贴“;c:\Android\tools;c:\Android\platform-tools”作为“变量值"

然后我进入设备管理器——我的电脑/属性/设备管理器，看到机器人有一个“！” 通过它。然后我下载并解压android ADB到桌面上的一个文件中。然后回到设备管理器中，通过右键单击 droid/然后单击更新驱动程序软件安装驱动程序，然后选择桌面上的文件，瞧。

花了20秒。

# c# - 使用 using 或项目名称调用项目

> ID：15046260
> 
> 赞同：1
> 
> 时间：2013-02-23T22:02:07.877
> 
> 标签：c#, oop, using

通过类名使用另一个 C# 项目的类是否更好。像这样

```
 Buss_Logic.Class1 myClass1 = new Buss_Logic.Class1();
 Buss_Logic.Class2 myClass2 = new Buss_Logic.Class2(); 
```

或通过`using`文件顶部的关键字

```
 using Buss_Logic; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T22:03:52.267

只要没有命名空间冲突，就可以使代码更紧凑/更易于阅读，以包含带有`using`关键字的命名空间。

如果对类的定义位置有任何疑问，请将鼠标悬停在类名上。工具提示将显示完全限定的类名。

如果存在命名空间冲突（例如`File`，在两个不同的命名空间中调用两个类，当前源文档中需要这两个类），则使用显式命名空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T22:04:31.097

`using`只要名称没有冲突，请在文件顶部使用 a 。

鉴于类本身足够清晰，它使代码更易于阅读。

# java - 如何在 OSX Lion 中使用 Eclipse 中的 Java 7

> ID：15046262
> 
> 赞同：-1
> 
> 时间：2013-02-23T22:02:20.550
> 
> 标签：java, eclipse

我正在尝试在运行 OSX Lion 的 2010 macbook pro 上升级到 Java 7。我下载了 jdk 7u15，它完美地完成了整个安装过程。但是，当我将它添加到 Eclipse 中时，我发现它不像 Java 6 那样位于 System/Library/Java/JavaVirtualMachines 下。我在任何地方都找不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:46:03.837

在 Mountain Lion 上，我的位于 /Library/Java/JavaVirtualMachines/jdk1.7.0_15.jdk/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T22:54:41.613

`/usr/libexec/java_home -V`在 Mac 上使用可查看安装的所有 JDK 版本。（JDK 7 版本通常位于 下`/Library/Java/JavaVirtualMachines`）。

# video-streaming - 如何将视频从 ubuntu 流式传输到 XBMC？

> ID：15046269
> 
> 赞同：4
> 
> 时间：2013-02-23T22:03:16.260
> 
> 标签：video-streaming, ubuntu-12.10, xbmc

有谁知道如何将视频从 ubuntu 12.10 流式传输到 XBMC 媒体中心（在树莓派上运行）。我知道我可以在 XBMC 上启用 AirPlay，但不知道如何从 ubuntu 流式传输视频。我尝试过 Totem 的 AirPlay 插件，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:35:53.383

我已经用我的 Ubuntu Studio 12.10 工作站和在 Linux 或 Android 上运行 XBMC 的平板电脑/笔记本电脑成功地做到了这一点。

您将需要： 1) 在您的 Ubuntu 工作站/服务器上运行的兼容 DLNA 的内容服务器（例如 PLEX）为您的 Raspberry PI XBMC 客户端提供数据；或 2) Ubuntu 系统上的 SMB (Samba) 共享，Raspberry PI 上的 XMBC 客户端可以扫描兼容媒体。

在这两者中，我推荐 Plex 选项。

您还可以在此处查看 Plex 和 XBMC 的集成：[Plex Add-on for XBMC](http://wiki.xbmc.org/index.php?title=Add-on%3aPleXBMC)

# android - Android：使用反射，无法按数字启动方法

> ID：15046270
> 
> 赞同：0
> 
> 时间：2013-02-23T22:03:21.640
> 
> 标签：android

我正在尝试使用反射来返回基于自动生成的 String 的 int ：

```
try {
    ItemWeight myObject = new ItemWeight();
    Method method = ItemWeight.class.getMethod(easyItem.replace(" ", ""));
    weight = (Integer) method.invoke(myObject);

        } catch (Exception e) {
            e.printStackTrace();

        } 
```

但是，如果字符串以数字开头，则会引发错误：

```
public int 0PtsAllowed()
 {
 return 14;
 } 
```

编译时返回以下内容：令牌“0”上的语法错误，删除此令牌

任何帮助将不胜感激。

谢谢，乔什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:10:39.607

我很惊讶它可以编译。 `0PtsAllowed`不是合法的 Java 标识符。你当然不能调用它。

`ptsAllowed0`会这样做，但就是说，我质疑你的设计。怎么样`ptsAllowed(int points)`

[编辑] 深夜，我刚刚注意到你确实有一个编译器错误，但推理是成立的。该睡了...

# synchronization - 线程如何在禁用中断的情况下休眠？

> ID：15046278
> 
> 赞同：2
> 
> 时间：2013-02-23T22:04:04.277
> 
> 标签：synchronization, operating-system, semaphore, interrupt, os161

我试图了解下面的代码是如何工作的。这直接来自我的教授讲座幻灯片。这个 P() 和 V() 函数是我们在类 (OS161) 中使用的操作系统中信号量实现的一部分。我认为您可能需要了解 OS161 才能回答我的问题，因为它被广泛使用，希望有人可以回答这个问题。

**我通过讲义对这段代码的理解：**
**X：P() 函数的流程**
1\. 当线程调用 P() 时，我们禁用中断
2\. 检查 sem->count 上是否有可用资源
3.a) 如果count 为 0 然后我们进入睡眠
3.b) 如果 count != 0 然后我们递减 count 并允许调用线程继续到临界区
4\. 启用 V() 函数的中断
**Y:Flow**
1\. 当一个线程调用 V() 时，我们禁用中断
2\. 增加计数器，这意味着现在还有 1 个资源可用于抓取
3\. 现在我们继续唤醒我们发送到睡眠的所有线程 P( )，因为在线程试图抓住关键部分的锁时没有足够的可用资源
4\. 启用中断

**我的问题：**
1\. “禁用中断”部分是否禁用特定线程上的中断，还是禁用所有中断？
2.在V()函数上，当我们唤醒所有线程时，P()函数中休眠在while循环内的线程开始执行while循环。在讲座中，它说一个线程抓住锁并休息回去睡觉。我的问题是为什么“sem->count == 0”条件不会对其他线程评估为假，而对其他线程只有一个。

我真的很想知道中断禁用部分是如何工作的。这是我的第一个问题。它会停止线程调度程序吗？它会停止系统中的上下文切换吗？

为什么线程在中断禁用的情况下进入睡眠状态？是不是很危险，因为它可能会错过 I/O 完成信号和其他东西？

```
 P(sem) {
        Disable interrupts;
        while (sem->count == 0) {
        thread_sleep(sem); /* current thread
                               will sleep on this sem */
        }
        sem->count--;
        Enable interrupts;
    }
    V(sem) {
        Disable interrupts;
        sem->count++;
        thread_wakeup (sem); /* this will wake
        up all the threads waiting on this
                   sem. Why wake up all threads? */
        Enable interrupts;
    } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T03:35:06.733

CPU对线程一无所知，它们只是在软件中实现的逻辑/抽象概念。但是 CPU 确实知道中断，它们是真实存在的，每当有来自某个设备的中断时，CPU 就会停止执行它一直在执行的任何操作，并开始执行专用于处理此特定中断的例程。一旦完成，例程发出中断处理完成的信号，CPU 恢复执行中断处理例程抢占的任何内容。

如果被抢占的代码属于一个线程，那就这样吧。如果它是另一个中断处理例程，也可以。

就在中断处理例程开始之前，CPU 将一些执行上下文（一些通用寄存器，可能还有一些控制/系统寄存器）保存在堆栈或其他地方，因此例程可以将它们用于自己的目的，然后在程序结束时，CPU 从它们存储的地方恢复这些寄存器，就好像从被中断代码的角度来看没有发生任何事情一样。如果例程更改了这些寄存器，CPU 将在其他地方恢复执行，而不是在中断前最后一次执行的地方。

因此，在那里，您可以使用中断在各种代码、线程或您拥有的东西之间切换执行。事实上，这正是调度器工作的数量。它们从定时器接收周期性中断，并在中断处理程序中将抢占代码（例如线程 A）的上下文保存在内存中，并从内存中加载另一个抢占代码（例如线程 B）的上下文并返回，从而继续在另一个线程中执行.

如果您禁用这些计时器中断，则周期性线程调度/切换也将被禁用。中断会影响整个 CPU 和当前正在执行的线程（或其他任何线程），并且通过归纳它们会影响所有线程。

知道了？

现在，如果系统中有线程，那么总是至少有一个线程可以执行。那是因为 CPU 需要执行某些事情，它不能只是停下来等待线程从无处到达（毕竟，是 CPU 创建线程并使它们可运行并运行它们）。为此目的，系统中有一个虚拟（或不那么虚拟）线程，它具有低优先级并且几乎什么都不做，永远循环并可能告诉 CPU 它可能会切换到较低的功耗状态或停止直到中断到来. 中断将结束低功耗模式并导致代码继续执行。

因此，当线程阻塞信号量或其他同步原语时，调度程序只需选择另一个线程来执行。如果所有线程都被阻塞，则选择虚拟线程。

在您的代码中，中断会在短时间内被禁用，而内核代码正在操作各种全局变量（例如，阻塞/休眠和就绪线程的列表）。这很正常。你不想要这里的竞争条件。当调度程序选择另一个线程来执行并继续执行它时，中断被重新启用。

请注意，当某个当前线程完成休眠时（例如，当某个其他线程唤醒它时），它总是启用中断：

```
spl = splhigh(); // disable interrupts
while (sem->count==0) {
  thread_sleep(sem); // context switch (to another thread and then back) occurs here
}
sem->count--;
splx(spl); // <-- re-enable interrupts here 
```

以这种方式阻塞的每个线程都会在它被唤醒并被调度程序选择运行时再次启用中断。

考虑一下。您在 2 个（或更多）线程中有 2 个（或更多）上述或类似代码的实例。当一个线程进入`thread_sleep()`或类似的函数时，其他一些线程会从它的`thread_sleep()`或类似的函数中出来并重新启用中断。

遵循这条路径的代码和注释：

[P()](https://www.student.cs.uwaterloo.ca/~cs350/common/os161-src-html/synch_8c-source.html#l00063)
  [thread_sleep()](https://www.student.cs.uwaterloo.ca/~cs350/common/os161-src-html/thread_8c-source.html#l00532)
    [mi_switch()](https://www.student.cs.uwaterloo.ca/~cs350/common/os161-src-html/thread_8c-source.html#l00373)
      [md_switch()](https://www.student.cs.uwaterloo.ca/~cs350/common/os161-src-html/pcb_8c-source.html#l00118)
        mips_switch()

至于信号量，我现在不愿意做更多的代码分析。您应该尝试自己弄清楚，除非其他人插话并掩盖它。

# java - guava 或 apache commons lang 中 LinkedHaspMap 的等效数据结构

> ID：15046283
> 
> 赞同：1
> 
> 时间：2013-02-23T22:04:49.283
> 
> 标签：java, type-conversion, linkedhashmap

我有一个基于“双”数据类型的 LinkedHashMap。

```
LinkedHashMap<Double, Double> meetingRecord; 
```

我希望它是原始数据类型

```
LinkedHashMap<double, double> meetingRecord; 
```

据我从不同的搜索中了解到，Java 默认没有这样的数据结构可用，我需要使用来自 `guava-libraries`或的东西`commons lang`

请帮助，应该使用什么，我真的被卡住了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T23:21:44.070

在您的评论中，您声明您不想遍历您的值并转换 from `Double`to `double`，但考虑到 Java 处理包装器和原语的方式，确实没有逃避该计算。

无论您使用什么库来从包装器（对象）集合到基元数组，它都必须向每个包装器对象询问原始值，本质上是循环遍历集合。

话虽如此，番石榴很好地做到了这一点：

```
double[] arrayOfDoubles = Doubles.toArray(meetingHistory.values()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T22:59:45.997

您可以使用 Commons Primitives ( [http://commons.apache.org/primitives/](http://commons.apache.org/primitives/) )。但是，您必须非常非常关心性能才能打扰。

# c - 为什么在 32 位编译器中没有近、远和巨大指针的概念？

> ID：15046287
> 
> 赞同：1
> 
> 时间：2013-02-23T22:05:08.970
> 
> 标签：c, x86

为什么在 32 位编译器中没有近、远和巨大指针的概念？据我了解，在 16 位 8086 架构编译器上创建的程序可以有 1 mb 大小，其中数据段、图形段等都在那里。要访问所有这些段并维护指针增量概念，我们需要这些不同的指针，但为什么在 32 位中它不是必需的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-23T22:07:49.923

32 位编译器可以使用单个 32 位指针来寻址可供程序（或操作系统）使用的整个地址空间。不需要基于，因为指针足够大，可以寻址可用地址空间中的任何字节。

理论上可以设想一个寻址 > 4GB 内存的 32 位操作系统（因此需要一个与 16 位操作系统通用的段系统），但实际情况是 64 位系统在需要复杂性出现之前就可用.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T22:14:11.213

> 为什么在 32 位编译器中没有近、远和巨大指针的概念？

这取决于平台和编译器。Open Watcom C/C++ 支持 16 位代码中的近、远和巨大指针以及 32 位代码中的近和远指针。

> 据我所知，在 16 位 8086 架构编译器上创建的程序可以有 1 mb 大小，其中存在数据段图形段等。要访问所有这些段并维护指针增量概念，我们需要这些不同的指针，但为什么在 32 位中它不是必需的？

因为在大多数情况下，接近 32 位的指针足以覆盖整个地址空间（所有 2^(个 32)字节 = 4 GB），而对于近或远的 16 位指针则不是这种情况，正如您所说的那样只能覆盖最多 1 MB 内存（严格来说，在 80286+ 的 16 位保护模式下，您可以使用 16 位远指针来寻址至少 16 MB 的内存，这是因为这些指针是相对于段的开头的并且 80286+ 上的段可以在前 16 MB 的任何位置开始，因为全局描述符表 ( `GDT`) 或本地描述符表 ( `LDT`) 中的段描述符为段的起始地址保留 24 位（2 ^(24)字节 = 16 MB）） .

# php - Zend - 找不到 loader.php，遵循书中的教程，但使用 ZF2 而不是 ZF1

> ID：15046290
> 
> 赞同：0
> 
> 时间：2013-02-23T22:05:38.597
> 
> 标签：php, zend-framework, zend-framework2

我正在关注一本书中的教程，但我刚刚意识到这本书使用了 ZF1，而我正在使用 ZF2。我不想开始使用 ZF1，但我很难开始使用本教程。

编码：

```
require_once('Zend/Autoload.php');
Zend_Loader::registerAutoload(); 
```

产生以下错误：

```
Warning: require_once(Zend/Autoload.php): failed to open stream: No such file or directory in /Users/me/Sites/phpweb20/htdocs/index.php on line 2
Fatal error: require_once(): Failed opening required 'Zend/Autoload.php' (include_path='.:/Users/me/Sites/phpweb20/include:/Users/me/pear') in /Users/me/Sites/phpweb20/htdocs/index.php on line 2 
```

我在网上进行了拖网，但找不到我应该用什么来代替它。有人可以帮忙吗？

另外，如果我继续学习本教程，我会因为语法和类的变化而反复卡住吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:20:57.190

尽管框架名称相同，但 ZF2 与 ZF1 大不相同。在关注 ZF1 的资源之后，您无疑会遇到更多问题。

ZF2 现在已经退出测试版好几个月了，可以在以下位置找到文档（和一个非常好的教程）：http: [//framework.zend.com/manual/2.0/en/index.html](http://framework.zend.com/manual/2.0/en/index.html)

# java - 每个线程应运行特定的持续时间

> ID：15046294
> 
> 赞同：2
> 
> 时间：2013-02-23T22:06:05.917
> 
> 标签：java, multithreading, executorservice

我正在做一个项目，我将从多线程代码中生成多个线程。

假设我正在生成 10 个线程，那么我需要确保每个线程都应该运行特定的持续时间。

例如，如果我想`each thread`运行 for `30 minutes`，那么在`config.properties`文件中，我将拥有`TOTAL_RUNNING_TIME=30`

所以我想出了下面的设计来确保每个线程都在运行`30 minutes`。

```
private static long durationOfRun;
private static long sleepTime;

 public static void main(String[] args) {

      // create thread pool with given size
      ExecutorService service = Executors.newFixedThreadPool(threads);

      try {

           readPropertyFile();

           for (int i = 0; i < threads; i++) {
                service.submit(new ReadTask(durationOfRun, sleepTime));
           }
      }
 }

 private static void readPropertyFile() throws IOException {
      prop.load(Read.class.getClassLoader().getResourceAsStream("config.properties"));

      threads = Integer.parseInt(prop.getProperty("NUMBER_OF_THREADS"));
      durationOfRun = Long.parseLong(prop.getProperty("TOTAL_RUNNING_TIME"));
      sleepTime = Long.parseLong(prop.getProperty("SLEEP_TIME"));
 } 
```

下面是我的 ReadTask 类。

```
class ReadTask implements Runnable {
     private long durationOfRun;
     private long sleepTime;

     public ReadTask(long durationOfRun, long sleepTime) {
          this.durationOfRun = durationOfRun;
          this.sleepTime = sleepTime;
     }

     @Override
     public void run() {

          long startTime = System.currentTimeMillis();
          long endTime = startTime + (durationOfRun*60*1000);

          //Each thread is running less than endTime
          while(System.currentTimeMillis() <= endTime) {

               //Do whatever you want to do

          }

     Thread.sleep(sleepTime);
     }
} 
```

如果你看看我的运行方法，我有一个 while 循环来检查时间。那么这种让每个线程运行特定持续时间的方法是否正确？或者还有什么更好的方法吗？如果还有其他更好的方法，请忽略我的无知，或者这也可以达到目的？

让我知道这里是否还有任何线程安全问题？

**我正在寻找的是每个线程应该运行 30 分钟，如果该线程的时间已经结束，那么完成它当前正在运行的任务，之后不要再做任何其他事情，就像我们`shutdown`为`ExecutorService`.** 如果有比这更好的方法或更好的设计。请给我一些例子，以便我可以从我的知识角度学习这些东西。谢谢您的帮助。

**更新：-**

如果您在 run 方法中查看我的 while 循环，在该 while 循环中，我将尝试创建一个`Select call to the database`. 所以我正在寻找的是这样的 - 一旦该线程的时间完成，它就不会对数据库进行任何其他选择调用并完成它之前所做的任何事情。就像`shutdown`为`ExecutorService`.

而且我不希望出现这种情况 - 一旦该线程的时间结束，它可能会使线程超时，该特定线程在那段时间正在对数据库进行选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T02:12:33.480

我对这种设计的担忧之一是，如果在 while 循环中完成的工作量比我们的时间更多，那会怎样？

例如

```
while(System.currentTimeMillis() <= endTime) {

    calaculateTheMeaningOfLife();

} 
```

现在会发生什么？是什么停止了线程，或者鼓励它检查超时？如果您有阻塞操作，例如文件或套接字读/写，也会发生同样的事情

您可以尝试中断线程，但不能保证这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T22:34:53.590

您可以为执行者设置时间限制。您需要强制转换 Executors 返回的 executor 并设置时间限制：

```
ThreadPoolExecutor service = (ThreadPoolExecutor) Executors.newFixedThreadPool(4);
service.setKeepAliveTime(1800, TimeUnit.SECONDS); 
```

摘自 Brian Goetz 的“Java 并发实践”。

# javascript - 如何在等待多个异步 JSONP 回调时显示加载消息？

> ID：15046295
> 
> 赞同：0
> 
> 时间：2013-02-23T22:06:09.160
> 
> 标签：javascript, asynchronous, callback, jsonp, promise

我正在构建一个客户端应用程序，我在其中向 YouTube API、Instagram API、Tumblr API 发送请求。处理这些请求时，将执行适当的回调函数。

问题是 YouTube 总是先完成，通过 underscore.js 模板将数据附加到 HTML。几秒钟后，Instagram 和 Tumblr 的结果也被附加了。

我的**app.js**文件包含 3 个单独的纯 JavaScript 函数：

```
function showYoutube() { ... }
function showInstagram() { ... }
function showTumblr() { ... } 
```

在成功完成所有 3 个回调函数之前，我如何才能显示一个简单的“正在加载...”消息？

## 更新：

仍在寻找可能的解决方案。请注意我没有后端服务，因此我仅限于 JSONP API 请求。

我的 API 调用位于*index.html*中，如下所示：

```
<script 
    type="text/javascript" 
    src="http://gdata.youtube.com/feeds/users/GoogleDevelopers/uploads?v=2&alt=json-in-script&format=5&callback=showMyVideos">
</script> 
```

因此，函数`showMyVideos()`必须在全局范围内。我尝试过实现**jQuery** Defered和**Async.js Parallel**，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:11:48.490

使用承诺模式，您可以在*n 个*项目执行完毕后触发函数/回调。因此，您可以显示一个微调器，触发三个异步函数，然后在完成所有三个函数后，触发一个函数以移除微调器。

jQuery 有承诺，如果你使用下划线，我认为你可以使用 underscore.deferred （我相信......我使用 jQuery）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T22:17:14.933

您还可以使用同样适用于客户端的非常出色的[异步库。](https://github.com/caolan/async)

在这种情况下，最好使用同步 JSONP 调用，因为异步将为您实现和控制异步部分。

```
//show loading icon
async.parallel([
    function (callback) {
        showYoutube() // have showYoutube() declared outside async.parallel 
                      // otherwise it will be inaccessible to the rest of your app.
        callback()
    },
    function (callback) {
        //send off to instagram
        callback()
    },
    function (callback) {
        //send off to tumblr
        callback()
    }
], function () {
    //all are done, hide loading icon
}) 
```

# r - 如何将字符串附加到R中的变量名子集？

> ID：15046296
> 
> 赞同：5
> 
> 时间：2013-02-23T22:06:14.983
> 
> 标签：r, rename

我正在尝试更改数据框中的一些变量名称。在不输入每个旧名称和每个新名称的情况下如何做到这一点？我认为下面的代码可能有效，但它没有。我正在尝试将“Econ”附加到数据框中标识的每个现有名称。

```
 names(wb.misc)[3,13,14,20,22,47,61,62,64,68,73] <- 
         paste("Econ", names(wb.misc)[3,13,14,20,22,47,61,62,64,68,73], sep = "-") 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-23T22:14:44.713

你需要把`c()`索引

```
 names(wb.misc)[c(3,13,14,20,22,47,61,62,64,68,73)] = paste("Econ", names(wb.misc)[c(3,13,14,20,22,47,61,62,64,68,73)], sep = "-") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-05T04:26:28.837

一种有效获取变量名称的方法是使用`dput(names(df))`where `df`is your data.frame。

例如，使用内置 dataset `airquality`，您可以执行以下操作

```
dput(names(airquality)) 
```

这给了你：

```
c("Ozone", "Solar.R", "Wind", "Temp", "Month", "Day") 
```

然后，您可以编辑以提取所需的列，而无需从头开始键入它们。例如，假设您要重命名以下三个变量，您可以使用`rename.vars`in `gdata`。

```
vars <- c("Ozone",  "Wind", "Temp")
library(gdata)
rename.vars(airquality, from=vars, to=paste0("Econ", vars)) 
```

使用实际的变量名通常也会使您的代码更可靠。

# xml - SimpleXMLElement::xpath（返回具有满足条件的*一些*子节点的节点）

> ID：15046302
> 
> 赞同：0
> 
> 时间：2013-02-23T22:06:30.987
> 
> 标签：xml, xpath

```
<?xml version="1.0" encoding="utf-8" ?>
<menu>
  <group Text="Group1">
    <item Text="Menu1" />
    <item Text="Menu2" Authenticated="0" />
    <item Text="Menu3" />
  </group>
  <group Text="Group2" Authenticated="1">
    <item Text="Menu4" />
    <item Text="Menu5" />
    <item Text="Menu6" />
  </group>
  <group Text="Group3" Authenticated="0">
    <item Text="Menu7" />
    <item Text="Menu8" />
    <item Text="Menu9" />
  </group>
</menu> 
```

在上面的 xml 中，我想返回所有组元素及其子节点（项目元素），但不是那些属性 Authenticated 等于“0”的元素

结果应该是这样的：

```
 <group Text="Group1">
    <item Text="Menu1" />
    <item Text="Menu3" />
  </group>
  <group Text="Group2" Authenticated="1">
    <item Text="Menu4" />
    <item Text="Menu5" />
    <item Text="Menu6" />
  </group> 
```

*编辑：我尝试了以下 xpath

```
/menu/group[not(@Authenticated) or @Authenticated = '1'][item[not(@Authenticated) or @Authenticated = '1']] 
```

但它返回元素

```
<item Text="Menu2" Authenticated="0" /> 
```

我不希望在结果中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:40:41.267

我不认为 XPath 有办法准确地获得您正在寻找的东西，但是如果您只是获得了一组经过身份验证的项目怎么办：

```
/menu/group/item[@Authenticated!='0' or not(@Authenticated)] 
```

拿回这样的东西？

```
<menu>
  <item Text="Menu1"/>
  <item Text="Menu3"/>
  <item Text="Menu4"/>
  <item Text="Menu5"/>
  <item Text="Menu6"/>
  <item Text="Menu7"/>
  <item Text="Menu8"/>
  <item Text="Menu9"/>
</menu> 
```

**更新：**

啊，我想我明白你现在的目的了。试试这个：

```
/menu/group/item[(@Authenticated!='0' or not(@Authenticated)) and (../@Authenticated!='0' or not(../@Authenticated))] 
```

你应该得到：

```
<menu>
  <item Text="Menu1"/>
  <item Text="Menu3"/>
  <item Text="Menu4"/>
  <item Text="Menu5"/>
  <item Text="Menu6"/>
</menu> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T23:10:16.673

我认为这在纯 XPath 中是不可能的，至少在 XPath 1 中是不可能的。我可能只是克隆 XML 并运行 XPath 来删除 //*[@Authenticated=0]，但通过更迂回的方法。

# javascript - rivets.js：使用 init 视图中的数据预填充模型

> ID：15046303
> 
> 赞同：1
> 
> 时间：2013-02-23T22:06:49.067
> 
> 标签：javascript, model-view-controller, rivets.js

也许这看起来有点倒退，但我有一个与 Rivets.js 绑定的视图，我希望该视图在初始化时填充模型。

用例是我使用服务器端渲染来返回一个片段（视图），包括铆钉的数据属性。所以没有 JSON 从服务器返回到客户端。

现在，通过按“编辑”，用户可以将内容置于“编辑”模式，并随意开始编辑。（使用 contenteditable，但我猜这超出了范围）。

那么如何确保模型填充了 init 视图中的值呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-05T08:19:24.390

我知道这个问题有点过时了，但我最近尝试了铆钉，我遇到了同样的问题。

解决方案：

```
// In your rivets configuration you disable preload:
rivets.configure({
  templateDelimiters: ['[[', ']]'],
  preloadData: false
});

// you bind your data
var binding = rivets.bind($('#auction'), {auction: auction});

// you manually publish it once to populate your model with form's data
binding.publish(); 
```

就是这样。我仍然不知道如何禁用每次绑定的预加载

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T12:49:55.060

来自 Rivets 网站上的示例（分配给“rivetBinding”）

```
var view = rivets.bind($('#auction'), {auction: auction}); 
```

将`rivetBinding.publish();`使用视图中所有具有“发布=真”的绑定的值引导模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-26T16:53:33.170

这个问题很老，但仍然没有公认的答案，所以这里是：

您需要禁用预加载配置，以便铆钉不会在您进行绑定时用您模型中的内容覆盖输入中的任何内容。这可以通过`preloadData=false`全局（`rivets.configure(...)`）或视图范围（第三个参数`rivets.bind(...)`）的配置来完成。

绑定后，您需要发布视图（将值拉到模型中）。您还需要通过调用设置观察者`sync()`，否则您的绑定方法将不会被触发。

使用与先前答案相同的示例：

```
var view = rivets.bind($('#auction'), { auction: auction }, {
  preloadData: false
});

view.publish();
view.sync(); 
```

# ms-access - Microsoft Access 从与当前记录匹配的另一个表中选择记录

> ID：15046304
> 
> 赞同：1
> 
> 时间：2013-02-23T22:07:05.010
> 
> 标签：ms-access, select, row, match

看来我在 MS Access 2010 中遇到了障碍。

很难解释我想要实现的目标，所以我将从一个基本示例开始。假设我们有两个表：A 和 B。

A：

```
ID     Price    Item
1      5        ABB
2      4        ATV
3      2        CCC 
```

乙：

```
ID     Price limit    Chosen item
1      3    
2      4
3      5
4      6 
```

我想要实现的是创建从表 A 到 B 的关系。表 B 中的每条记录都必须有关联的表 A 记录。它应该基于表 A 字段“价格”和表 B 字段“价格限制”，以使从表 A 中选择的记录的价格低于表 B 记录中施加的价格限制。

也就是说，对于第一个表 B 记录，可能的表 A 记录只有 CCC，对于第二个 - ATV 和 CCC，而对于第三个和第四个所有记录都是有效的。

就我有限的访问知识而言，我认为我应该在“Chosen item”字段行源属性中编写一个查询。但是，我尝试自己编写它，但没有成功。这是我想出的：

```
SELECT [Table A].[ID], [Table A].[Item] 
FROM [Table A] 
WHERE [Table A].[Val] > [Val]; 
```

但它不起作用。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T23:17:51.650

我认为你想要这样的东西，下拉框只包含相关项目：

![在此处输入图像描述](../Images/c8f7255836c4660003a85b4e4851459b.png)

您可以通过设置组合的行源来设置它，

```
select item from ta where price<=forms!tb!pricelimit 
```

并添加一点代码

```
Private Sub Form_Current()
   Me.Chosenitem.Requery
End Sub 
```

请注意，此方法带有警告。像这样在连续表单上的 Usong 下拉菜单会严重扰乱当前行以外的任何行上的数据显示。在这种情况下，显示很好，因为绑定的列和要显示的数据是相同的，但是，如果选择是：

```
 Row Source: select id,item from ta where price<=forms!tb!pricelimit
 Bound Column: 1
 Column Widths : 0cm;2cm 
```

当当前记录的选择生成一个不包含其他行 ID 的列表时，数据似乎会从记录中消失。也就是说，如果当前行的选择返回 ID 1 和 2，并且下一行已经选择了 ID 3，则下一行的组合将显示为空，依此类推。

# mysql - 连接另一个表的结果

> ID：15046308
> 
> 赞同：0
> 
> 时间：2013-02-23T22:07:22.707
> 
> 标签：mysql

我正在处理一个将数据从一个表映射到 CSV 文件的大型查询，因此它基本上看起来像一个基本的选择查询——

```
SELECT * FROM item_table 
```

--除了那`*`实际上是一百行 CASE、IF、IFNULL 和其他逻辑。

我被告知要在 select 语句中添加一个“相似项目”行，它应该是一串以逗号分隔的项目编号。在 category_table 中可以找到相似的项目，该表可以在两个数据点 column_a 和 column_b 上连接到 item_table，其中 category_table.category_id 具有标识相似项目的数据。

此外，我被告知不要使用子查询。

所以我需要从该表中加入具有相同 category_id 值的 category_table 和 group_concat 项目编号（但没有当前记录的项目编号）。

如果我只能使用子查询而不考虑说明，我会接受，但如果可能的话，我想按照说明使用 join 和 group_concat 来做——我就是想不通。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:24:29.000

也许是这样的？

```
SELECT i.*, GROUP_CONCAT(c.category_id) AS similar_items
  FROM item_table i
INNER JOIN category_table c ON (i.column_a = c.column_a AND
                                i.column_b = c.column_b)
GROUP BY i.column_a, i.column_b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T22:12:22.293

我认为这就是您要查找的内容，尽管我不确定是什么唯一标识了您的 item_table 所以我使用了 column_a 和 column_b （这些可能不正确）：

```
SELECT 
    ...,
    GROUP_CONCAT(c.category_id separator ',') CategoryIDs
FROM item_table i
   JOIN category_table ct ON i.column_a = ct.column_a AND
      i.column_b = ct.column_b
GROUP BY i.column_a, i.column_b 
```

我使用了常规`INNER JOIN`，但如果 category_table 可能没有任何相关记录，您可能需要使用 a`LEFT JOIN`来获得所需的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T22:12:51.337

您可以使用称为隐藏列的 mySQL“功能”。

我将假设您在项目表中有一个唯一标识每一行的项目 ID。而且，如果我的逻辑正确，则以下查询可以满足您的要求：

```
select i.*, group_concat(c.category_id)
from item_table i left outer join
     category_table c
     on i.column_a = c.column_a and
        i.column_b = c.column_b and
        i.item_id <> c.category_id
group by i.item_id 
```

# java - AsyncTask 期间的 JSONException

> ID：15046313
> 
> 赞同：0
> 
> 时间：2013-02-23T22:08:08.190
> 
> 标签：java, android, json

```
@Override
    protected Integer doInBackground(Void... params) 
    {
        String readMyJSON = readMyJSON();
                try {
                  JSONArray jsonArray = new JSONArray(readMyJSON);                    
                } catch (Exception e) {
                  e.printStackTrace(); 
                }
        return 0;
    } 
```

这不起作用，期间`JSONArray jsonArray = new JSONArray(readMyJSON);`发生 JSONException。有人能告诉我问题出在哪里吗？提前致谢。

PS：我使用的方法：

```
 public String readMyJSON() 
   {
        StringBuilder builder = new StringBuilder();
        HttpClient client = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet("http://search.twitter.com/search.json?q=android");
        try {
          HttpResponse response = client.execute(httpGet);
          StatusLine statusLine = response.getStatusLine();
          int statusCode = statusLine.getStatusCode();
          if (statusCode == 200) {
            HttpEntity entity = response.getEntity();
            InputStream content = entity.getContent();
            BufferedReader reader = new BufferedReader(new InputStreamReader(content));
            String line;
            while ((line = reader.readLine()) != null) {
              builder.append(line);
            }
          } else {
            Log.e(ParseJSON.class.toString(), "Failed to download file");
          }
        } catch (ClientProtocolException e) {
          e.printStackTrace();
        } catch (IOException e) {
          e.printStackTrace();
        }
        return builder.toString();
      } 
```

这个方法好像没问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T22:35:11.880

简而言之，来自 twitter 的响应不是 JSON 数组，所以会出现异常。如果您想要结果数组，请执行以下操作：

```
JSONObject object = (JSONObject) new JSONTokener(json).nextValue();
JSONArray results = object.getJSONArray("results"); 
```

我建议您阅读[Twitter API 文档](https://dev.twitter.com/docs/api/1.1)。具体来说，[https://dev.twitter.com/docs/api/1/get/search](https://dev.twitter.com/docs/api/1/get/search)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T22:18:02.610

你可以试试这个：

```
JSONArray jsonArray = new JSONArray("["+readMyJSON+"]"); 
```

我希望它应该工作。

# haskell - 安装 yesod 时 Cabal 依赖冲突

> ID：15046316
> 
> 赞同：1
> 
> 时间：2013-02-23T22:08:20.350
> 
> 标签：haskell, cabal, yesod

我正在尝试安装[yesod](http://www.yesodweb.com/) Web 框架。

当我运行时`cabal install yesod-platform`，我遇到了依赖冲突：

> cabal：依赖冲突：ghc-7.0.4 需要数组 ==0.3.0.2 但是 array-0.3.0.2 被排除在外，因为 http-conduit-1.8.7 需要数组 >=0.4

即使在[hsenv](http://hackage.haskell.org/package/hsenv)沙盒环境中，我也会收到此错误。

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:20:52.190

正如 Daniel Fischer 所说，这与其说是依赖冲突，不如说是承认 yesod 不支持 7.0.4，因此您的依赖已过时。7.0.4 远远早于当前的 Haskell 平台，您应该升级。

# sockets - Android socket客户端慢

> ID：15046321
> 
> 赞同：0
> 
> 时间：2013-02-23T22:09:05.360
> 
> 标签：sockets

我正在尝试制作一个更快的套接字客户端来每次发送 RGB 颜色，更快的调用应该是每秒 1 到 10 次。

我正在使用这段代码：

```
try {
        socket = new Socket("192.168.0.9",1234);
        try {
              dataOutputStream = new DataOutputStream(socket.getOutputStream());

            //toServer = new BufferedWriter(new PrintWriter(socket.getOutputStream(),true));
            //out = new PrintWriter(new BufferedWriter(
            //      new OutputStreamWriter(socket.getOutputStream())), false);              
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } catch (UnknownHostException e1) {
        Log.e("Error", "Error");
        e1.printStackTrace();
    } catch (IOException e1) {
        Log.e("Error", "Error");
        e1.printStackTrace();
    } 
```

每次我从选择器更改颜色时，我都会调用此方法

```
dataOutputStream.writeUTF(";"+red+";"+green+";"+blue+";"+brightness+";"); 
```

我在 python 中尝试了一个相同的脚本，在 2 秒内 100 次，我没有任何滞后。我得到的是，python 服务器正在等待新请求，但 Android 需要时间通过套接字连接发送它们。我实际上尝试了 3 种不同的方法来实例化输出写入，但只有 DataOutputStream 足够快但仍然有一些滞后。

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:29:21.647

在 DataOutputStream 和套接字之间放置一个 BufferedOutputStream，并在每次 writeUTF() 之后刷新 DOS。在对等端，使用 DataInputStream 而非 BufferedInputStream。

# iphone - iPhone应用程序中的音频反馈问题

> ID：15046327
> 
> 赞同：2
> 
> 时间：2013-02-23T22:10:15.330
> 
> 标签：iphone, audio, audio-recording

有一个适用于 iphone 的实时音频应用程序，可为输入声音添加一些效果（混响、延迟等）并进行播放。所以我遇到了一个经典的放大[音频循环问题](http://en.wikipedia.org/wiki/Audio_feedback)。您可能对此很熟悉。当您将麦克风靠近扬声器时，通常会发生这种情况（来自输入的声音被放大、消失、重新进入等等）。

很高兴听到如何解决此问题的任何想法。

（我已经尝试过：

1.  限制最大音量以防止反馈增加。
2.  使用过滤器来限制某些频率。
3.  从新的输入信号中减去以前的输出信号（我认为这是最好的方法，但这并不完美。即使时机很好（我认为是这样）这种方法会过多地破坏声音）

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T13:33:57.703

你的 3 号和 2 号加起来可能是最好的。查找自适应声学回声消除。

使用 nLMS 的 AEC 很容易实现，但会占用一些 CPU。如果您使用较低的采样率，它可能会起作用，具体取决于您的回声的毫秒数。

有一个使用 FFT 进行适应的快速版本。它不会很快适应，但在没有长回声尾巴的移动应用程序上可能会很好。

AEC 的工作方式是将扬声器和麦克风之间的回声路径收敛到声学模型上，然后使用该模型从麦克风输入中减去输出回声。它知道会发生什么，将其放入模型中并猜测回声将是什么，然后从输入中删除该回声。随着时间的推移，模​​型变得更好，回波更小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T10:13:16.663

您可能已经知道这一点，但为了安全起见 - 确保您将输出路由到正确的扬声器。[正如您在文档中](https://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Cookbook/Cookbook.html#//apple_ref/doc/uid/TP40007875-CH6-SW13)所说的那样，当您设置“播放和录制”音频会话类别时，默认输出是顶部扬声器（您在通话期间将耳朵放在上面的那个）。底部还有另一个扬声器，由于它离麦克风更近，它会产生更多的反馈。如果您设置“播放和录制”类别，通常需要手动覆盖以路由到错误的（底部）扬声器，但我想我会提到它以确保。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T14:24:33.277

为了帮助其他试图解决这个问题的人：AEC 加上高通、低通滤波器的组合。

[http://speex.org](http://speex.org)，它的 AEC 部分完成了这项工作。[高通](http://en.wikipedia.org/wiki/High-pass_filter)、[低通](http://en.wikipedia.org/wiki/Low-pass_filter)滤波器很容易实现。（请参阅 Apple AccelerometerGraph 示例以了解 LP、HP 滤波器实现）

# php - 如何在 Bootstrap 中包含文件 *.php？

> ID：15046332
> 
> 赞同：0
> 
> 时间：2013-02-23T22:10:51.807
> 
> 标签：php, twitter-bootstrap

我在文件夹中有一个标题设计模板：`/template/header.php`. 在 header.php 文件中，我使用的是 Bootstrap。

然后我在文件夹中创建了另一个文件：`/karyawan/karyawan_form.php`

在我的 kayawan_form.php INCLUDE 文件 header.php 文件中

所以 karywan_form.php 脚本文件是这样的：

```
<?php
include_once '../template/header.php';
?>
<div class="container">
Welcome to my website!
</div> 
```

然后它不会通过以下链接在 localhost 上运行：

> 本地主机/belajarajax/karyawan/karyawan_form.php

但是为什么院子里看起来像普通的 PHP 视图；像没有引导程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:12:28.780

它应该是：

```
include_once '../../template/header.php'; 
```

我认为

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T22:12:46.613

利用

```
<?php
include_once dirname(__FILE__).'/template/header.php';
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-11T08:02:54.777

样式表和脚本可能不会加载到包含页面上。更改`header.php`. 尝试更改 header.php 中的链接引用，例如：

```
/template/src/bootstrap.min.js
/template/src/bootstrap.min.css 
```

# java - 2 个 JPanel 的奇怪问题

> ID：15046334
> 
> 赞同：0
> 
> 时间：2013-02-23T22:11:09.310
> 
> 标签：java, swing, jpanel, jlayeredpane

我有一个 JFrame，其中包含一个 JLayeredPane，其中包含 2 个 JPanel，一个在另一个之上。

前面的 JPanel 是一个带有一些按钮的简单 GridLayout。

背面的 JPanel 是一个必须定期更改的图像。它基本上是来自相机的快照，并且必须每秒更新几次。

要定期在此 JPanel 上绘制图像，我将调用此 updateImage 方法：

```
public void updateImage(Image image)
{
    if(image == null) return;
    setSize(image.getWidth(null),image.getHeight(null));
    this.image = image;
    this.repaint();
}

@Override
public void paintComponent(Graphics g)  
{   
    super.paintComponent(g);
    g.drawImage(image,0,0,null); 
} 
```

但是，每次调用paintComponent 时，都会隐藏前面的面板。

我尝试了几种不同的方法，最接近完成这项工作的是通过调用：

```
((JLayeredPane)this.getParent()).setLayer(this, 0); 
```

在paintComponent 方法的底部。这行得通，但速度非常慢。

我还可以做些什么？

顺便说一句，这不是 JLayeredPane 的问题，我已经用其他几个布局管理器尝试过这个，基本上每次它仍然隐藏在后面的面板。

非常感谢您的任何建议！

# d3.js - 将模板添加到 D3

> ID：15046336
> 
> 赞同：3
> 
> 时间：2013-02-23T22:11:12.977
> 
> 标签：d3.js, templating

[http://bl.ocks.org/JohnBerryman/2295155](http://bl.ocks.org/JohnBerryman/2295155)

这是我尝试将模板添加到 D3。我在 Inkscape 中绘制了原始人脸，然后将 SVG 转换为 iCanHaz 模板，并使模板变量对应于面部测量值。通过这种方式，我可以定义一个人脸（以及任何其他的扩展），我可以轻松地实例化人脸，甚至可以通过更新绑定到人脸对象的数据来改变人脸。代码的第一部分（如果您滚动查看演示）是 D3 的补丁，然后其余代码使用该补丁。

不幸的是，我从来没有对此进行过很好的测试并向博斯托克先生提交拉取请求。

问题：

1.  我还是 D3 的新手。这是不是可以在 D3 中完成的事情，我只是不知道。
2.  这一般有用吗？是否值得提交拉取请求？
3.  是d3式的吗？这里的代码是否代表适合 d3 的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-06T01:10:19.827

@meetamit 方法正确，但您必须使用 polyfill`d3.select.html`在 SVG 上应用方法。此方法`innerHTML`在 SVG 元素上使用但不受支持。检查 [d3.select.html 参考](https://github.com/mbostock/d3/wiki/Selections#wiki-html)

[我在 bl.ocks 上的解决方案](http://bl.ocks.org/jkutianski/7328902)

[D3 模板插件](https://github.com/jkutianski/d3-templating)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:59:36.123

我没有专门与 ICanHaz 合作过（尽管通常在模板方面工作过很多），所以我可能遗漏了一些重要的东西。但是，在我看来，扩展 D3 是不必要的。

考虑到已编译的模板（ich 或其他）只是一个返回 html 的函数，您可以这样做：

```
vis.selectAll('.head').data(data)
  .enter()
    .append('g')
    .attr('class', 'head')
    .html(ich.head) // <--- THIS
    .attr('transform',function(d) {return 'translate('+ d.x +' '+ d.y +')'}); 
```

这将调用`ich.head`每个元素，传入`d`and `i`。因此，除非传入`i`ich 模板会导致不良行为，否则我很确定您会获得相同的结果。

如果传递`i`into ich 模板是一个问题，解决方法是

```
.html(function(d,i) { return ich.head(d); }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T19:13:11.337

@meetamit 的回答**大多是**正确的。然而，为了使这项工作正常工作，我必须使用 iCanHaz 模板的原始 HTML 输出，这需要对 ICH 的调用略有不同：

```
vis.selectAll('.head').data(data)
.enter()
.append('g')
.attr('class', 'head')
.html(function(d){ return ich.head(d, true); } ) // <--- THIS
.attr('transform',function(d) {return 'translate('+ d.x +' '+ d.y +')'}); 
```

注意“true”参数，它告诉 ICH 返回 HTML 而不是对象。

# iphone - 如何在越狱 iphone 上读取 cout/debug 跟踪，同时在设备上进行测试

> ID：15046337
> 
> 赞同：1
> 
> 时间：2013-02-23T22:11:17.553
> 
> 标签：iphone, ios, console, jailbreak

在 iphone 上运行应用程序时读取控制台日志（从 std::cout 生成的消息）的正确方法是什么？

当您在手机上 ssh 时，是否有一些命令可以启用此功能？

更新@tanvir：你确定文件吗？在那里找不到系统日志文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:26:56.537

从 Cydia 安装 syslogd。一旦你安装了它和一些 SSH 客户端，你应该能够运行：

```
tail -f /var/log/syslog 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T11:06:11.273

使用软件`Log Police`。这将直接显示系统日志并且它是免费的。

# android - 打开正在进行的通知时，我的服务会重置内部变量

> ID：15046343
> 
> 赞同：1
> 
> 时间：2013-02-23T22:11:46.817
> 
> 标签：android, android-intent, android-service, android-pendingintent

我有一个设置，我的活动启动服务并通过控制服务行为方式的意图发送值。这些变量可以在服务的整个生命周期中发生变化，并且服务会将更新推送回活动 UI。如果我退出活动并重新启动它，它将请求服务更新以获取当前值。如果我通过主屏幕重新启动活动，或者我使用最近的应用程序菜单，这工作正常。但是，如果我通过我为服务设置的在前台运行持续通知启动活动，则服务会在启动时将自身重新设置为原始值。

这是我在前台运行的代码，我认为没有其他任何东西会对这个问题产生影响。

```
//Create notification and set to run in forground
    Notification notification = new Notification(R.drawable.ic_launcher, getText(R.string.app_name),
            System.currentTimeMillis());
    Intent notificationIntent = new Intent(this, MainActivity.class);
    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);
    notification.setLatestEventInfo(this, getText(R.string.app_name),
            "Running Noise Based", pendingIntent);
    startForeground(ONGOING_NOTIIFICATION, notification); 
```

更新 3：

将标志 Intent.FLAG_ACTIVITY_NEW_TASK、Intent.FLAG_ACTIVITY_CLEAR_TOP 和 Intent.FLAG_ACTIVITY_SINGLE_TOP 添加到通知意图解决了问题。我不知道为什么这些修复它。如果有人能告诉我为什么会发生这种情况，请这样做。这是有效的新代码。

```
//Create notification and set to run in forground
        Notification notification = new Notification(R.drawable.ic_launcher, getText(R.string.app_name),
                System.currentTimeMillis());
        Intent notificationIntent = new Intent(this, MainActivity.class);
        notificationIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK
            | Intent.FLAG_ACTIVITY_CLEAR_TOP
            | Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);
        notification.setLatestEventInfo(this, getText(R.string.app_name),
                "Running Noise Based", pendingIntent);
        startForeground(ONGOING_NOTIIFICATION, notification); 
```

# php - 在 Appfog 上使用 memcachier 进行会话处理

> ID：15046345
> 
> 赞同：1
> 
> 时间：2013-02-23T22:11:49.533
> 
> 标签：php, appfog, libmemcache

我在 Appfog 上托管了一个 PHP 应用程序。

我正在做一些负载测试并在 3 个实例上运行它，导致用户退出，因为应用程序当前使用默认的 $_SESSION 变量来维护单个实例的登录状态。

我已经添加了 Appfog 的 memcachier 服务并且可以在其中存储变量，但是如何重新配置​​ PHP 以使用它来自动存储会话数据？到目前为止，我看到的所有指南都涉及修改 php.ini，这在 Appfog 上是无法访问的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:31:39.477

您可以编辑 .htaccess 文件中的任何 php.ini 变量。 [https://docs.appfog.com/languages/php](https://docs.appfog.com/languages/php)

# updates - 软件更新的统一技术

> ID：15046346
> 
> 赞同：0
> 
> 时间：2013-02-23T22:12:04.897
> 
> 标签：updates, auto-update, software-distribution

不同种类的软件一一更新是很麻烦的。就我而言，

*   对于 Ubuntu Linux 操作系统，我会定期做`apt-get update`和`apt-get upgrade`或`apt-get dist-upgrade`（这部分可以自动化）。
*   对于 Ruby 语言，我必须做一些特定的事情来升级。
*   对于 Ruby 库（gem），我必须定期执行`gem update`or `gem update --system`。
*   对于 JQuery 库，我必须定期检查其网站并下载最新版本。
*   等等。

我可以写一个脚本来自动做这些事情，但是如果有一个跨平台统一的既定方式，用户可以注册所有他们想要自动更新的软件，并且软件会定期检查相关的，那就太好了。网站进行更新并通知用户和/或在有此类更新时自动进行更新。

有这样的技术吗？如果不是，那么未来这种技术的有前途的路线是什么？我有一种感觉，可以通过使用 RSS 提要之类的东西来完成，软件开发人员将在更新软件时发布提要，并由特定的读者负责更新过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:15:18.180

不，它永远不会。这种奢华是有代价的，叫做“封闭式社区”。但它并不适用于所有软件......

# javascript - 使用 JS querySelector 的性能

> ID：15046356
> 
> 赞同：28
> 
> 时间：2013-02-23T22:12:54.263
> 
> 标签：javascript, html, dom

在 Web 浏览器中使用 JavaScript 时，以下各项之间是否存在任何性能差异：

现有的 getElementById

```
document.getElementById("elem"); 
```

使用#id 查询选择器

```
document.querySelector("#elem"); 
```

使用 [id=elem] 查询选择器

```
document.querySelector("[id=elem]"); 
```

我假设第一个最快（只需要查找带有 ID 的元素）。最后一个看起来也是不好的做法。我喜欢第二个，因为对所有内容都使用 querySelector 可以使代码易于阅读。

有什么建议么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-23T22:25:32.627

首先，

```
document.querySelector("#elem"); 
```

与 document.getElementId 不同，它有一个优势，它可以返回类。但是，由于它只返回具有该类名的第一个对象，因此它的实用性大大降低，因此如果您不是专门寻找具有该类名的第一个对象，则最好只使用一个 id。如果你使用，

```
document.querySelectorAll 
```

但是，我相信（我可能错了），它将具有该类名的所有项目作为数组返回，其中常规 querySelector 等效于 querySelectorAll[0]。另一个优点是您可以通过它运行 css3 查询，这非常有用。

第二，

```
document.getElementById("elem"); 
```

与 queryselector 相比有一个非常好的优势，因为它快了将近*5 倍*，所以如果你坐在那里有几千行代码并且你想优化所述代码，那么 getElementById 是要走的路。

Lastly,

```
document.querySelector("[id=elem]"); 
```

I, personally, don't see the need to use this in any situation. If you needed a querySelector, why not just use a # ? This is exactly equivalent to your first example of querySelector, however it has a lot of useless charaters.

Edit: Just to be clear, in summary, you're probably better off using document.getElementById.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-23T22:25:19.607

[你可以自己测试一下](http://jsperf.com/getelementbyid-vs-queryselector-vs-queryselector-by-id)。getElementById 是最快的方法

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-23T22:26:56.190

> is there any performance difference

Probably, since they are different functions. `querySelector` at least needs to parse the selector before detecting that it's equal to `getElementById`. And I doubt this optimisation takes place for the attribute selector at all, no one uses it. So I share your assumptions; and [tests confirm them](http://jsperf.com/getelementbyid-vs-queryselector-vs-queryselector-by-id) (thanks to @Silver_Clash).

Personally I do not like the second one, as it is more ambiguous and awful to use with dynamic id values. Explicitly using `getElementById` is just more concise.

# git - git忽略空行

> ID：15046361
> 
> 赞同：3
> 
> 时间：2013-02-23T22:13:31.620
> 
> 标签：git, diff

我有一个与 Netbeans 合作的代码。另一位编码员对我的代码做了一些小改动，但问题是 git 报告我编辑了许多文件。另一个编码器编辑器添加了一些空白行。

我发现我必须使用`git diff –ignore-space-change` 问题是默认情况下我该怎么做才能不让所有文件都被修改。

![在此处输入图像描述](../Images/b71a40f98a1ea0f710c91ccbb194b84a.png)

# jquery - 用 Jquery 打印 Div，但不要全部打印

> ID：15046369
> 
> 赞同：2
> 
> 时间：2013-02-23T22:14:55.823
> 
> 标签：jquery

我正在使用 StackOverflow 上的这个脚本来打印一个包含所有内容的 div。

```
<script>
$(document).ready(function(){
    $('#printmodal').click(function(){

        // variables
        var contents = $('#content').html();
        var frame = $('#printframe')[0].contentWindow.document;

    // show the modal div
    $('#modal').css({'display':'block'});

        // open the frame document and add the contents
        frame.open();
        frame.write(contents);
        frame.close();

        //Hide all 'noprint' elements
        $(".noprint").css("display","none");

        // print just the modal div
        $('#printframe')[0].contentWindow.print();

        // hide the modal div
        $('#modal').css({'display':'none'});
    });
});
</script> 
```

但是，有些元素我不想打印，即；按钮之类的。对于这些元素，它们被赋予了类名“noprint”。我有一个 media="print" css，但使用上述功能不起作用。noprint 元素仍在打印。我尝试添加 $(".noprint").css("display", "none"); 功能，但它仍然打印这些元素。有谁知道在使用上述功能时可以使某些元素不打印的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T22:27:47.457

默认情况下，jQuery 只查询它被包含`document`的地方，而不是后代的文档。您可以通过将 a 设置为您的选择器来解决此问题：`window``iframe``context`

```
$(".noprint", frame).css("display","none"); 
```

[**小提琴**](http://jsfiddle.net/pEgDj/1/)

### *参考*

*   [`jQuery( selector [, context ] )`](http://api.jquery.com/jQuery/#jQuery1)

# c# - nhibernate linq 基础知识

> ID：15046373
> 
> 赞同：1
> 
> 时间：2013-02-23T22:15:14.723
> 
> 标签：c#, linq, nhibernate

我需要将此查询转换为 nhibernate linq

```
 IEnumerable<Account> accounts = from a in dc.Accounts
                                 where (a.FirstName + " " + a.LastName).Contains(SearchText) ||
                                        a.Email.Contains(SearchText) ||
                                        a.Username.Contains(SearchText)
                                 select a; 
```

我试过这个，但我一开始就卡住了，所以我需要帮助。

```
IEnumerable<Account> accounts = NHSession.Query<Account>().Where(x=>x.FirstName) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T02:22:54.170

从您查询的外观来看，您可能需要花几分钟时间阅读 Ayende 在[此处](http://ayende.com/blog/1900/complex-searching-querying-with-nhibernate)找到的关于复杂搜索的帖子。

而不是使用 Session Query 或 Detached Criteria - 考虑将其实现为 QueryOver。然后，您可以在会话调用之前构建搜索条件，然后在您最终准备好启动它时将查询传递给会话。也不要忘记更大的结果集的[未来值和分页：](http://ayende.com/blog/3979/nhibernate-futures)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T23:58:23.577

下面的查询将返回`IQueryable<Account>`，您可以使用它进行进一步查询或评估以获得结果。

```
var accounts = NHSession.Query<Account>().Where(a=> (a.FirstName+" "+a.LastName).Contains(SearchText) || a.Email.Contains(SearchText) || a.Username.Contains(SearchText) ); 
```

# php - 小数到分数不适用于负数

> ID：15046375
> 
> 赞同：-1
> 
> 时间：2013-02-23T22:15:36.867
> 
> 标签：php, decimal, fractions

我有这个将小数转换为分数的脚本：

```
function toFraction($number){ 
    $numerator = 1; 
    $denominator = 0; 
    for(; $numerator < 1000; $numerator++){ 
        $temp = $numerator / $number; 
        if(ceil($temp) - $temp == 0){ 
            $denominator = $temp; 
            break; 
        } 
    } 
    return ($denominator > 0) ? $numerator . '/' . $denominator : false; 
} 
```

但是，经过一些测试，它似乎不适用于负小数。为什么是这样？另外，允许它使用负小数的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:20:01.507

您需要`$numerator`像`-1`数字为负数一样进行初始化，否则，将其保持在`1`：

```
$numerator = $number < 0 ? -1 : 1; 
```

这就是您需要更改的所有内容，正如您从[这个示例](http://3v4l.org/nq2FC)中看到的那样，其中：

```
echo toFraction( -0.5) . "\n" . toFraction( .5); 
```

输出：

```
-1/2
1/2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T22:19:33.813

由于您在 for 循环中设置逻辑的方式，它可能不起作用。我要做的是检查函数开头的数字是否为负。如果是，我会设置一个标志来提醒函数它最初是负数，然后我会翻转传入的 $number 的符号。然后，在返回之前，我会检查是否设置了我的标志，如果是，我将简单地反转返回值。

```
function toFraction($number){ 
    if ($number < 0) {
        $number *= -1;
        $isInverted = true;
    }

    $numerator = 1; 
    $denominator = 0; 
    for(; $numerator < 1000; $numerator++){ 
        $temp = $numerator / $number; 
        if(ceil($temp) - $temp == 0){ 
            $denominator = $temp; 
            break; 
        } 
    } 

    if ($isInverted)
        $numerator *= -1;

    return ($denominator > 0) ? $numerator . '/' . $denominator : false; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T22:27:50.007

```
function gcd($a, $b) {
if ($a == 0 || $b == 0)
    return abs(max(abs($a), abs($b)));
$r = $a % $b;
return ($r != 0) ? gcd($b, $r) : abs($b);
}
function toFraction($number){
$up = $number;
$down = 1;
while(floor($up) != $up){
$up *= 10;
$down *= 10;
}
$gcd = gcd($up,$down);
$_up = $up / $gcd;
$_down = $down / $gcd;
return $_up . '/' . $_down;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T22:33:13.623

```
function toFraction($number)
{ 
    $minus = ($number < 0) ? '-' : '';
    $number = ($number < 0) ? ($number * -1) : $number;
    $numerator = 1; 
    $denominator = 0; 
    for(; $numerator < 1000; $numerator++)
    { 
        $temp = $numerator / $number; 
        if(ceil($temp) - $temp == 0)
        { 
            $denominator = $temp; 
            break; 
        } 
    } 
    return ($denominator > 0) ? $minus . $numerator . '/' . $denominator : false; 
} 
```

# django - 在 Heroku 上手动删除 Python 包

> ID：15046378
> 
> 赞同：8
> 
> 时间：2013-02-23T22:15:48.670
> 
> 标签：django, deployment, heroku, installation

我正在跑步`heroku push master`，得到了这个：

```
 ----- Python app detected
 ----- No runtime.txt provided; assuming python-2.7.3.
 ----- Using Python runtime (python-2.7.3)
 ----- Installing dependencies using Pip (1.2.1)
        Downloading/unpacking Django-1.5c2 from https://www.djangoproject.com/download/1.5c2/tarball (from -r
                                                                                                             requirements.txt (line 1))
          Cannot determine compression type for file /tmp/pip-rYIGHS-unpack/tarball.ksh
          Running setup.py egg_info for package Django-1.5c2

        Installing collected packages: Django-1.5c2
          Running setup.py install for Django-1.5c2
            changing mode of build/scripts-2.7/django-admin.py from 600 to 755

            changing mode of /app/.heroku/python/bin/django-admin.py to 755

            ========
            WARNING!
            ========

            You have just installed Django over top of an existing
            installation, without removing it first. Because of this,
            your install may now include extraneous files from a
            previous version that have since been removed from
            Django. This is known to cause a variety of problems. You
            should manually remove the

            /app/.heroku/python/lib/python2.7/site-packages/django

            directory and re-install Django.

        Successfully installed Django-1.5c2 
```

如何删除以前的 Django 包？

更新：我的要求.txt：

```
https://www.djangoproject.com/download/1.5c2/tarball/**#egg=django**
South==0.7.6
argparse==1.2.1
distribute==0.6.24
dj-database-url==0.2.1
psycopg2==2.4.6
wsgiref==0.1.2
PIL==1.1.7 
```

粗体文本修复了上述警告。

更新 2：由于 Django 1.5 正式发布，我只使用了 pip freeze：

```
Django==1.5
South==0.7.6
argparse==1.2.1
distribute==0.6.24
dj-database-url==0.2.1
psycopg2==2.4.6
wsgiref==0.1.2
PIL==1.1.7 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-01T07:25:47.440

我遇到了 Heroku 缓存损坏的包并且无法将它们取出的问题。Python buildpack 应该支持刷新此缓存（CACHE_DIR），但它没有。

有一种解决方法：按照[这些说明](https://devcenter.heroku.com/articles/python-runtimes)将您的 Python 运行时更改为例如 3.3.0（您的应用程序是否实际支持 Python 3 并不重要）。然后将其更改回默认值。更改 Python 运行时然后部署的行为将强制 buildpack 完全擦除缓存。据我所知，这是目前擦除缓存的唯一实用方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T12:24:12.893

将当前 virtenv 包推送到文件

```
pip freeze > requirements.txt 
```

犯罪

```
git commit -am 'update packages' 
```

并推到heroku

```
git push heroku 
```

然后heroku将重建环境

```
Counting objects: 13, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (11/11), done.
Writing objects: 100% (13/13), 1.26 KiB, done.
Total 13 (delta 3), reused 0 (delta 0)
-----> Python app detected
-----> No runtime.txt provided; assuming python-2.7.3.
-----> Preparing Python runtime (python-2.7.3)
-----> Installing Distribute (0.6.34)
-----> Installing Pip (1.2.1)
-----> Installing dependencies using Pip (1.2.1)
Downloading/unpacking Flask==0.9 (from -r requirements.txt (line 1))
Running setup.py egg_info for package Flask 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-09T11:26:58.663

以为我删除了故障包和所有其他依赖它的包，但没有。每次部署时，我都会不断收到错误消息。最后，我以某种方式删除了依赖于故障包的所有其他包，一切正常。希望有人会发现这很有用

# c++ - 在 iPhone 上编译/运行 C++ 代码而不转换为 Objective C

> ID：15046379
> 
> 赞同：1
> 
> 时间：2013-02-23T22:15:50.657
> 
> 标签：c++, iphone, ios, visual-studio-2010, ios-simulator

我在 Visual Studio 2010 上编写了我的项目，并在其上使用了 tesseract ocr 库、Opencv 和 Cvblob，现在想将其从桌面应用程序更改为 iPhone 上的移动应用程序，所以我可以在不转换为 Objective C 的情况下编译和运行它吗？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T22:22:22.363

好吧，您可以在 iOS 上直接编译和运行 C 或 C++。你甚至可以在 Objective-C 类中内联它。

但是您仍然需要 Xcode（因此需要一台 Mac）来构建和部署，并且您将无法仅使用针对 Windows 框架构建的代码。

tesseract 目前似乎不支持 iOS，所以如果你需要它并且不能自己移植它，你可能不能只将你的应用程序移植到 iOS 而不重写它的主要部分。但这不仅仅是编程语言的问题。

# ruby - 使用“？返回：”

> ID：15046382
> 
> 赞同：0
> 
> 时间：2013-02-23T22:16:11.460
> 
> 标签：ruby

下面是一个 Ruby 函数的一部分，它检查特定目录并在它不存在时创建它：

```
if Dir.exists?(dir_name) == false
  Dir.mkdir(dir_name)
end 
```

我知道有一种更短的方法可以做同样的事情：

```
Dir.exists?(dir_name) ? return : Dir.mkdir(dir_name) 
```

但是，我不能完全理解这一点。第二个命令的重要部分是`? return :`. 命令的第一部分有要检查的参数，最后一部分有要采取的行动，但我无法理解`? return :`. 如果我希望命令最后一部分中的操作在且仅当`dir_name` *已经*存在时执行，我将使用什么来代替`? return :`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T22:22:49.750

你应该使用

```
Dir.mkdir(dir_name) unless Dir.exists?(dir_name) 
```

* * *

`unless <statement>`是一样的`if !<statement>`。记住永远不要做一个比较布尔值和另一个布尔值的语句。

例如，增加第一个语句的可读性

```
if Dir.exists?(dir_name) == false

if !Dir.exists?(dir_name)

unless Dir.exists?(dir_name) 
```

* * *

该行`Dir.exists?(dir_name) ? return : Dir.mkdir(dir_name)`使用[三元运算符](http://ruby.about.com/od/beginningruby/a/The-Ternary-Or-Conditional-Operator.htm)。

`return`立即退出函数，通常返回一个类似的值，`return "some value"`但您也可以调用`return`退出函数并返回`nil`。

长话短说，如果 dir 存在，三元版本会破坏函数，因此函数中的任何内容都不会发生。所以等价的实际上是

```
Dir.exists?(dir_name) ? nil : Dir.mkdir(dir_name) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T22:23:45.690

这是另一种编写 if-else 的方式。

```
Condition ? IfTrue : IfFalse 
```

所以，

```
Dir.exists?(dir_name) ? return : Dir.mkdir(dir_name) 
```

是相同的：

```
if Dir.exists?(dir_name)
    return
else
    Dir.mkdir(dir_name)
end 
```

# java - java while循环计数不正确

> ID：15046383
> 
> 赞同：0
> 
> 时间：2013-02-23T22:16:17.333
> 
> 标签：java, while-loop, do-while

Imma java新手，所以我尝试学习东西。我创建了一个布尔方法，它是一个小型掷骰子游戏。我需要从 main 方法调用此方法，并在返回值为 true（游戏获胜）时继续播放，但如果返回值为 false，则停止执行。我还需要玩家赢了多少次。所以我创造了这样的东西：

```
while(Craps.play())
{
  Craps.play();
  i++;
} 

System.out.println("In total you won " + i + " times"); 
```

`i`被初始化为私有静态 int`i = 0; //Game counter`

但是输出没有看到我正确。首先，如果游戏输了（返回值为假），它不会停止执行。而且它不计算正确的中奖号码。例如，如果赢了 3 场比赛，则计算他是否赢了 2 场比赛。

这个循环是否有任何逻辑错误？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:20:29.607

你不应该`Craps.play()`在循环内调用，因为你会错过验证。此外，在您的原始代码中，您调用`Craps.play()`了两次，但您`i`只增加了一次。将您的代码更改为此，它应该按预期工作：

```
 while(Craps.play()) {
     i++;
 } 
```

# c# - 使用计时器检测按键

> ID：15046386
> 
> 赞同：1
> 
> 时间：2013-02-23T22:17:00.930
> 
> 标签：c#, .net, winforms

代码：

```
 private void sprites_updater_Tick(object sender, EventArgs e)
    {
        s++;
        int x = player.Location.X;
        int y = player.Location.Y;
        if (s == 1)
      if (ModifierKeys.HasFlag(Keys.A))
            {
                player.Location = new Point(x - 5, y);
            }
            s = 0;
            sprites_updater.Start();

        } 
```

所以在使用计时器代码时，我在上面写了同样的东西（ModifierKeys.HasFlag(Keys.A)），但它没有用。为什么？！顺便说一句，有没有办法在不使用 XNA、WPF 或任何其他东西（仅 .NET）的情况下在 WinForms 面板中显示 3d 相机透视图？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:23:56.423

获取键盘敲击并稍后处理它们的最佳方法是使用 KeyDown、KeyUp 和标志捕获表单中的键盘事件：

```
bool isAPressed;
...

private void Form1_KeyDown(object sender, KeyEventArgs e)
{
    switch(e.KeyCode)
    {
        case Key.A:
            isAPressed = true;
            break;
        case Key.XXXX:
            ...
    }
}

private void Form1_KeyUp(object sender, KeyEventArgs e)
{
    switch(e.KeyCode)
    {
        case Key.A:
            isAPressed = false;
            break;
        case Key.XXXX:
            ...
    }
} 
```

然后您可以在计时器中使用此信息：

```
private void sprites_updater_Tick(object sender, EventArgs e)
{
    s++;
    int x = player.Location.X;
    int y = player.Location.Y;
    if (s == 1)
    if (isAPressed)
        {
            player.Location = new Point(x - 5, y);
        }
        s = 0;
        sprites_updater.Start();
    } 
```

以这种方式处理玩家移动（箭头）特别有趣。

# php - 如何使用数组的多个键/值进行 SQL 查询？

> ID：15046389
> 
> 赞同：0
> 
> 时间：2013-02-23T22:17:30.257
> 
> 标签：php, mysql, sql, arrays, codeigniter

我有一个包含如下键和值的数组：

```
Array ( [1] => 0 [3] => 0 ) 
```

我想调用一个 question_id = 1 且值为 0 的数据库，并将其与 question_id = 3 且值为 0 的查询相结合。我正在使用 Codeigniter。

我试过了：

```
foreach($array as $key=>$value){
    $this->db->where('question_id', $key);
    $this->db->where('value', $value);
    $this->db->from('movies_values');
    $query = $this->db->get();
    $res = $query->result();
    print_r($res);
    array_push($main_array,$res);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:47:56.087

如果我猜对了，请尝试以下

```
$this->db->where_in('question_id',array_keys($array));
$this->db->where_in('value', array_values($array));
return $this->db->get('movies_values')->result(); 
```

**如果你想成对检查 where 子句，**编辑试试这个****

 **```
$count=0;
foreach($array as $key=>$value)
{
    $where=array('question_id' => $key, 'value' => $value);
    if($count==0)
        $this->db->where($where);
    else
        $this->db->or_where($where);
    $count++;
}
return $this->db->get('movies_values')->result(); 
```

那会产生

```
SELECT *
FROM movies_values
WHERE question_id = key1 AND value val1
OR question_id = key2 AND value val2
OR question_id = key3 AND value val3 
```

参考：[活动记录](http://ellislab.com/codeigniter/user-guide/database/active_record.html)**

# php - !isset vs == null PHP，单例类

> ID：15046392
> 
> 赞同：0
> 
> 时间：2013-02-23T22:17:47.163
> 
> 标签：php, null, singleton, isset

我想知道的问题可能更多是风格问题或你有什么问题。我在 PHP 中有一个单例类。当我检查对象是否已创建时，我只需执行以下操作：

```
if(self::$instance == null)
  self::$instance = new self(); 
```

但是，我在 PHP 中看到了一些单例模式的实现 do !isset：

```
if(!isset(self::$instance))
  self::$instance = new self(); 
```

根据我的理解，这两个语句在功能上没有区别。一种方式比另一种更好吗？一种方式比另一种方式更专业吗？

编辑：

这是我的单例类中整个模式的代码：

```
private static $instance = null;

private function __construct() {    }

public static function getInstance() {
    if(self::$instance == null) {
        self::$instance = new self();
    }
        return $instance;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:20:30.600

如果您已将`instance`其定义为受保护/私有静态变量，它们在功能上是相同的，您使用哪一个并不重要。

就个人而言，我认为`isset`它更符合 PHP 的精神，而 == NULL 更接近于 Java，但这是一个风格问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T22:27:52.323

`isset()`当您不确定变量是否存在时使用。在您的情况下，变量始终存在。你也可以这样写：

```
if(is_null(self::$instance))
  self::$instance = new self(); 
```

我会这样写：

```
public static function getInstance() {
    return is_null(self::$instance) ? new self() : self::$instance;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T22:19:32.013

第一个不好；如果 $instance 不存在，那将是错误的！

# c - C：在输入光标后插入要显示的符号

> ID：15046397
> 
> 赞同：2
> 
> 时间：2013-02-23T22:18:33.630
> 
> 标签：c, printf, scanf

我从用户那里得到年利率。我希望在用户输入利率时显示“%”。它应该是这样的：

```
Enter the annual interest rate: % 
```

注意悬挂的“%”。光标应该在 '%' 之前（或在哪个位置）闪烁，这样当用户键入 2.9 时，它看起来像这样：

```
Enter the annual interest rate: 2.9% 
```

然后，用户按 ENTER 键，代码在新行上照常继续。

这在C语言中甚至可能吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:48:10.310

如果您只想在命令行终端中运行程序，可以使用 gets() 调用。请注意 printf 中需要双 % 才能输出一个 % 符号。

```
 double percentRate;
 printf("Enter the annual interest rate: %%");
 char input[256];
 gets(input);
 // then parse the input buffer
 percentRate = atof(input); 
```

# php - 替代 php 中的 eregi()

> ID：15046400
> 
> 赞同：6
> 
> 时间：2013-02-23T22:18:40.540
> 
> 标签：php, eregi

所以，我在我的邮件脚本中使用了eregi，但最近，我收到了该函数已被弃用的错误。

那么，替换以下代码的最简单方法是什么：

```
if (!eregi("^[A-Z0-9._%-]+@[A-Z0-9._%-]+\.[A-Z]{2,4}$", trim($_POST['email'])))? 
```

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-23T22:19:26.340

```
 if (!preg_match("/^[A-Z0-9.%-]+@[A-Z0-9.%-]+.[A-Z]{2,4}$/", trim($_POST['email']))) 
```

使用 preg_match。

因为 ereg_* 函数在 PHP >= 5.3 中已被弃用

对于电子邮件验证，最好使用[filter_var](http://www.php.net/manual/en/function.filter-var.php)

```
if (!filter_var(trim($_POST['email']), FILTER_VALIDATE_EMAIL))
    echo 'Email is incorrect'; 
```

# java - 在 Java 中需要帮助

> ID：15046401
> 
> 赞同：-5
> 
> 时间：2013-02-23T22:18:43.770
> 
> 标签：java

我有java问题，我需要帮助。

假设存在一个接口，GUIComponent 有以下方法： - open 和 close：无参数，返回 boolean - move 和 resize：接受两个整数参数并返回 void 定义一个实现 GUIComponent 接口的类 Window，并具有以下成员： - 宽度、高度、xPos 和 yPos 整数实例变量，其中 xPos 和 yPos 初始化为 0 - 接受两个整数变量（宽度后跟高度）的构造函数，用于初始化宽度和高度实例变量 - 一个open 的实现：将“窗口打开”发送到 System.out，并返回 true - 将“窗口关闭”发送到 System.out 的关闭实现，并返回 true - 修改宽度和高度变量以反映指定大小的调整大小实现 - 修改 xPos 和 yPos 以反映新位置的移动实现

这是我输入的代码。

```
public class Window implements GUIComponent{
    private int width;
    private int height;
    private int xPos = 0;
    private int yPos = 0;
    public Window(int width, int height){
        this.width = width;
        this.height = height;
    }
    public boolean open(){
        System.out.println("Window opened");
        return true;
    }
    public boolean close(){
        System.out.println("Window closed");
        return true;
    }
    public void resize(int width, int height){
        this.width = x;
        this.height = y;
    }
    public int move(int xPos, int yPos){
        xPos = 1;
        yPos = 1;
    }
} 
```

而且我遇到了错误，我不知道该怎么办。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:22:42.720

这是一个问题 - 看看这个方法

```
public int move(int xPos, int yPos) {
   xPos = 1;
   yPos = 1;
} 
```

它没有返回值。方法名称`move`表明它是一个动作方法，应该声明为`void`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T22:50:33.490

除了@Reimeus 的建议，我还看到了一些东西：

改变

```
public void resize(int width, int height){
    this.width = x; // What is x???
    this.height = y;  // What is y???
} 
```

至

```
public void resize(int width, int height){
    this.width = width;
    this.height = height;
} 
```

也改变

```
public int move(int xPos, int yPos){
    xPos = 1; // You should change the class variable. use  this
    yPos = 1; // and I thing you want the value to be passed by the method 
} 
```

至

```
public void move(int xPos, int yPos){
    this.xPos = xPos;
    this.yPos = yPos;
} 
```

# c# - Linq 按唯一值对对象进行分组并制作两个列表

> ID：15046403
> 
> 赞同：1
> 
> 时间：2013-02-23T22:18:54.657
> 
> 标签：c#, linq

我有一个包含属性 Number 的对象数组。我需要按值对它们进行分组，即对象包含这些样本值：

```
1 2 3 3 3 4 5 6 6 6 7 7 
```

我必须像这样对它们进行分组：

```
listOfUniqe = {1,2,4,5}
listOfDuplicates1 = {3,3,3}
listOfDuplicates2 = {6,6,6}
listOfDuplicates3 = {7,7}
... 
```

我尝试使用 distinct, with `First()`。但这区分了我的第一次出现并删除了重复项。如果对象有重复项，我也想删除第一次出现的对象并将它们移动到另一个列表。

```
List<Reports> distinct = new List<Reports>;
distinct = ArrayOfObjects.GroupBy(p => p.Number).Select(g => g.First()).ToList(); 
```

任何想法我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T22:23:21.157

要获得只有一个元素的组，请使用：

```
distinct = ArrayOfObjects.GroupBy(p => p.Number)
                         .Where(g => g.Count() == 1)
                         .ToList(); 
```

要获取具有更多元素的组列表，请使用：

```
nonDistinct = ArrayOfObjects.GroupBy(p => p.Number)
                            .Where(g => g.Count() > 1)
                            .Select(g => g.ToList())
                            .ToList(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-23T22:26:32.667

首先对项目进行分组：

```
var groups = values.GroupBy(p => p.Number).ToList(); 
```

唯一的是组数为 1 的那些：

```
var unique = groups.Where(g => g.Count() == 1).Select(g => g.Single()).ToList(); 
```

有重复的是其他的：

```
var nonUnique = groups.Where(g => g.Count() > 1).ToList(); 
```

# ruby-on-rails - 是否可以在索引操作（rails 3.2.12）中创建 params[:customer]？

> ID：15046408
> 
> 赞同：0
> 
> 时间：2013-02-23T22:19:28.377
> 
> 标签：ruby-on-rails, ruby-on-rails-3, params

在我们的客户模型（rails 3.2.12）中，方法`find_customers`定义如下：

```
def find_customers
      customers = Customerx::Customer.scoped  
      customers = customers.where("sales_id = ?", sales_id_s) if sales_id_s.present?
      customers
end 
```

`sales_id_s`是通过`params[:customer][:sales_id_s]`视图表单传入的。我们希望使用相同的`find_customers`方法在客户控制器索引操作中返回客户。代码是：

```
def index

      if has_index_individual_right?('customerx_customers')
        params[:customer][:sales_id_s] = session[:user_id]
        customer = Customerx::Customer.new(params[:customer])
        @customers = customer.find_customers
      else
        ......
      end
      ......
end 
```

但是代码`params[:customer][:sales_id_s] = session[:user_id]`会导致错误：`undefined method`[]=' for nil:NilClass`。在调试中，params[:customer] 返回 nil。

有没有办法`params[:customer]`在索引操作中创建对象以便我们可以调用模型方法`find_customers`？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T22:57:55.487

您可以通过使用它来确保它存在（并且是一个哈希）`params[:customer] ||= {}`

# vba - VLookup 的 VBA 问题

> ID：15046416
> 
> 赞同：1
> 
> 时间：2013-02-23T22:20:16.973
> 
> 标签：vba, excel

我的 VLookup 函数有问题，因为它找不到我知道在该范围内的值。Product 变量必须保留为字符串，因为我正在查找数字和混合数字与文本。我的导师也不允许使用变体。

```
Sub LookupValue()
Dim Product As String
Dim ErrCheck As Boolean
Dim Quantity As Integer
Dim Discount As Double
Dim myRange As Range

Set myRange = Worksheets("Prices").Range("A2:C21")

ErrCheck = True

'Obtaining VLookup Value
Product = InputBox("Enter the product's code.")

'Error checking
Do Until ErrCheck = False
    If Product = "" Then
        ErrCheck = True
        MsgBox ("Not a valid entry.")
        Product = InputBox("Enter the product's code.")
    ElseIf IsError(Application.VLookup(Product, myRange, 3, False)) Then
        ErrCheck = True
        MsgBox ("The value entered was not found.")
        Product = InputBox("Enter the product's code.")
    Else
        ErrCheck = False
    End If
Loop

'Obtaining Quantity Value
Quantity = InputBox("Enter the quantity ordered.")

'Error checking
Do Until ErrCheck = False
    If IsNumeric(Quantity) = False Then
        ErrCheck = True
        MsgBox ("Not a valid entry.")
        Quantity = InputBox("Enter the quantity ordered.")
            Else
                ErrCheck = False
    End If
Loop

'Obtaining discount rate
If Quantity < 25 Then
    Discount = 0.1
    If Quantity < 50 Then
        Discount = 0.15
        If Quantity < 75 Then
            Discount = 0.2
            If Quantity < 100 Then
                Discount = 0.25
                If Quantity >= 100 Then
                    Discount = 0.3
                End If
            End If
        End If
    End If
End If

'Filling in cells
Sales.Range("B2") = Product
Sales.Range("B3") = Application.VLookup(Product, myRange, 2, False)
Sales.Range("B4") = Quantity
Sales.Range("B5") = Discount
Sales.Range("B6") = Application.VLookup(Product, myRange, 3, False)
Sales.Range("B7") = Range("B6").Value * Quantity
Sales.Range("B8") = Range("B7").Value * Discount
Sales.Range("B9") = Application.WorksheetFunction.Sum("B7:B8")

End Sub 
```

查找范围的一个示例是

89044 | 小工具 | 12.00

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T23:00:22.040

您检查的数据是数字类型，但是，您向 VLOOKUP 函数提供了一个字符串。

因此，代替`Application.VLookup(Product, myRange, 3, False)`, 使用

```
Application.VLookup(Val(Product), myRange, 3, False) 
```

# php - Symfony2 实体用户提供程序覆盖自定义身份验证提供程序

> ID：15046417
> 
> 赞同：7
> 
> 时间：2013-02-23T22:20:22.190
> 
> 标签：php, rest, authentication, symfony, restful-authentication

我的 Symfony2 自定义身份验证提供程序现在[似乎正在工作](https://stackoverflow.com/questions/15008721/symfony2-wont-load-custom-authentication-provider-loads-daoauthenticationprovi)。

**用户提供者**

我几乎使用了*FOSUserBundle*，但我什至没有我的用户的电子邮件地址，我不需要添加的功能或复杂性。

所以我只是使用[实体提供者](http://symfony.com/doc/current/cookbook/security/entity_provider.html)。

我将我的编码器设置为纯文本，因为 API 客户端库会为我处理，但是，唉，另一个障碍：似乎**用户现在正在根据这些用户记录进行身份验证**。

在我实现实体用户提供程序之前，我的登录表单给了我有效的响应：正确的凭据不会产生错误，错误的凭据会导致我的自定义“不正确的用户/通过错误”。

现在，即使我提供了我知道是正确的凭据，我得到的只是错误消息“错误凭据” [，就好像我正在实现 UserAuthenticationProvider 一样](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Security/Core/Authentication/Provider/UserAuthenticationProvider.php#L89)，但据我所知，我不是。我的自定义提供程序[直接实现了 AuthenticationProviderInterface](https://github.com/freen/wordrot/blob/master/src/WordRot/PlayBundle/Security/Authentication/Provider/WordnikProvider.php#L17)。

所以目前我假设我错误地实现了实体用户提供程序，以至于它以某种方式覆盖了我的自定义身份验证提供程序。同时配置实体用户提供程序和自定义身份验证提供程序的正确方法是什么？

**文件**

*   [/app/config/security.yml](https://github.com/freen/wordrot/blob/master/app/config/security.yml)
*   [/src/WordRot/PlayBundle/Security/Authentication/Provider/WordnikProvider.php](https://github.com/freen/wordrot/blob/master/src/WordRot/PlayBundle/Security/Authentication/Provider/WordnikProvider.php)

****security.yml****的相关部分**

 **```
encoders:
    WordRot\PlayBundle\Entity\User: plaintext

providers:
    wordnik_users:
        entity: { class: WordRotPlayBundle:User, property: username }

firewalls:
    wordnik_secured:
        pattern: ^/play
        logout: ~
        anonymous: ~
        # The next line specifies the custom authentication provider:
        wordnik: true 
        form_login:
            provider: wordnik_users
            login_path:  /login
            check_path:  /play_check
            # on success
            always_use_default_target_path: true
            default_target_path: /play 
```

**编辑**

[这可能证明是有用](https://github.com/freen/wordrot/compare/a473d354d7763b426c3e6faff68f7346418fddf5...ddcfeae2cbce2a30fff590f0d711e850fc9c8a00)的。这是主分支上的差异......

*   **从**自定义身份验证提供程序 ( [WordnikProvider](https://github.com/freen/wordrot/blob/master/src/WordRot/PlayBundle/Security/Authentication/Provider/WordnikProvider.php) ) 仍然执行 (a473d354)
*   **到**主分支 (ddcfeae2) 上的最新提交，其中不再执行身份验证提供程序。

**编辑 2**

我发现了更多断点：

1.  在登录表单 POST 上，使用 UsernamePasswordToken 调用[WordnikProvider#supports](https://github.com/freen/wordrot/blob/master/src/WordRot/PlayBundle/Security/Authentication/Provider/WordnikProvider.php#L31)，从而返回`false`.
2.  在登录表单 POST 上，`WordnikListener`已构造但它的其他方法 ( `attemptAuthentication`, `requiresAuthentication`) 从未被调用。然而`WordnikFactory#createListener`，也从未被调用！构造监听器是一个奇迹。
3.  然而，在`login_check`GET 上，`WordnikListener#requiresAuthentication`被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:38:55.520

所以我们对此进行了长时间的讨论。基本问题是 form_login 服务干扰了 wodnik 服务。删除了 form_login，事情开始变得更好。

[https://chat.stackoverflow.com/rooms/25251/discussion-between-montgomery-jean-and-cerad](https://chat.stackoverflow.com/rooms/25251/discussion-between-montgomery-jean-and-cerad)**

# ruby - jekyll 没有生成 _posts

> ID：15046420
> 
> 赞同：1
> 
> 时间：2013-02-23T22:20:48.023
> 
> 标签：ruby, jekyll, rdiscount

我无法让 jekyll 将 _posts 目录中的帖子转换为 html。它会正确生成 index.md，但不会为帖子生成任何内容。当我添加“来源：_posts”时，它会转换帖子，但不会转换 index.md。

据我所知，'source' 不应该被添加到 _config.yml 以指向 '.'

我的目录结构非常标准：

```
$ 查找 .|fgrep -v 引导
.
./index.md
./_config.yml
./_drafts
./_includes
./_includes/footer.html
./_includes/header.html
./_layouts
./_layouts/default.html
./_posts
./_posts/2013--02-25-test-blog.md
。/_地点
./_site/index.html

```

```
$猫_config.yml
名称：“开发者博客”
描述： ””

网址：“http://localhost:4000”
资源： 。
分页：10

降价：rdiscount
固定链接：漂亮
pygments：真
自动：真

```

即使我关闭自动，我也看不到堆栈跟踪。

```
$ cat _posts/2013--02-25-test-blog.md
---
布局：默认
标题：测试博客
---

#测试博客

这是一个测验

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T23:19:45.457

```
_posts/2013--02-25-test-blog.md 
```

这个名字是不正确的。

也许使用这个

```
_posts/2013-02-25-test-blog.md 
```

请注意，年份后只有 1 个连字符。

# validation - CakePHP 中 saveAll 的验证错误

> ID：15046424
> 
> 赞同：0
> 
> 时间：2013-02-23T22:20:55.817
> 
> 标签：validation, cakephp

我有一次保存的用户记录列表（表单是从上传的 CSV 填充的）。

一切似乎都运行良好，并且我的验证规则得到了遵守，但是让我无法理解的一件事是特定的验证错误消息。

我得到了一般的验证错误（如果说，一个应该是唯一的字段不是），但我没有在特定字段上收到错误，让用户知道实际问题是什么。

这是一个错误，还是我的代码有问题？这是来自我的控制器的操作（我将 CSV 数据从另一个操作传递给此操作，因此是开头的片段）：

```
public function finalizeCsv() {
    if ( isset($this->request->params['named']['csvData']) ) {
        $csvData = unserialize( $this->request->params['named']['csvData'] );
    } else {
        $csvData = $this->request->data;
    }
    $this->set('users', $csvData);
    if ($this->request->is('get')) {
        $this->request->data = $csvData;
    }
    if ($this->request->is('post') || $this->request->is('put')) {
        if ($this->User->saveAll($this->request->data)) {
            $this->Session->setFlash('Users added!', 'default', array('class' => 'success'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash('There were errors with your data.');
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:29:06.290

对于唯一字段添加验证规则

```
'field_name' => array(
    'rule' => 'isUnique',
    'required' => 'create'
), 
```

下一步 - 当您遇到错误时，您将需要查看`$this->User->validationErrors`。里面会有很多数组 - 每个创建的记录都有 1 个。循环遍历它们，收集错误并将它们发送到 $this->Session->setFlash()。此外，如果您使用 InnoDB 或其他支持事务的引擎，则
最好将其包装到事务中。`$this->User->saveAll($this->request->data)`出错时 - 回滚并重试。

```
$ds = $this->User->getDataSource();
$ds->begin();
// > saving here < //
$ds->commit(); //< on success
$ds->rollback(); //< on error 
```

# matlab - MATLAB。根据另一个矩阵的值从一个矩阵复制值

> ID：15046427
> 
> 赞同：0
> 
> 时间：2013-02-23T22:21:18.160
> 
> 标签：matlab

我有矩阵 a <500 x 500> 和矩阵 b <500 x 2>。矩阵 b 包含两种类型的值，它们是矩阵 a 的行坐标和列坐标。我想使用矩阵 b 中的值来复制落在矩阵 a 的行和列坐标上的所有值。

见下面的例子

```
matrix a          matrix b   output
1  2  3  4  5     1 5        1   2   3  4  5
6  7  8  9  10    2 5        7   8   9  10
11 12 13 14 15    1 3        11  12  13 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T00:16:41.927

因为每一行都有不同的长度，所以您需要将值保存到元胞数组中。

像这样的东西应该工作：

```
output = cell( size(b,1),1);

for i = 1:size(a,1)

  output{i} = a(i, b(i,1):b(i,2) )

end 
```

# android - 向 Android 项目添加依赖项

> ID：15046429
> 
> 赞同：3
> 
> 时间：2013-02-23T22:21:23.110
> 
> 标签：android, slidingmenu

我正在尝试将`slidingmenu`jfeinstein 的库设置为一个项目。他的一项指示要求：

`Add ActionBarSherlock as a dependency to SlidingMenu`

我已经将 ActionBatSherlock 集成到我正在做的应用程序中，所以它是在 Eclipse 中设置的。但是如何将其添加为依赖项？我想（并尝试）将 ActionBarSherlock 添加为滑动菜单库，但这在多个地方破坏了滑动菜单库。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-23T22:26:43.387

![在此处输入图像描述](../Images/68f5b81eb50ac54818a820e0d20c38c3.png)右键单击 SlidingMenu 项目。

单击属性（子菜单的底部选择）。

然后在窗口（属性编辑器）中，您将选择：Android

在右下角，单击“添加...”按钮，然后按照流程选择并添加库。

# sed - sed 和 awk 应用程序

> ID：15046436
> 
> 赞同：0
> 
> 时间：2013-02-23T22:22:14.043
> 
> 标签：sed, awk, batch-processing

我已经阅读了一些关于 sed 和 awk 的内容，并且了解它们都是文本操纵器。

我计划使用其中一个来编辑文件组（某些编程语言、js、python 等的代码），以对大型文件集进行类似的更改。现在主要是编辑函数定义（传递的参数）和变量名，但我可以做得越多越好。

我想知道是否有人尝试过类似的事情，以及那些尝试过的人，是否有任何明显的陷阱需要注意？以及 sed 和 awk 中的哪一个更适合/更适合这种应用程序。（或者也许完全是别的东西？）

输入

```
function(paramOne){
//Some code here
var variableOne = new ObjectType;
array[1] = "Some String";
instanceObj = new Something.something;
} 
```

输出

```
function(ParamterOne){
//Some code here
var PartOfSomething.variableOne = new ObjectType;
sArray[1] = "Some String";
var instanceObj = new Something.something
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:29:09.563

这是一个 GNU awk（用于“gensub()”函数）脚本，它将您的示例输入文件转换为您想要的输出文件：

```
$ cat tst.awk
BEGIN{ sym = "[[:alnum:]_]+" }
{
   $0 = gensub("^(" sym ")[(](" sym ")[)](.*)","\\1(ParameterOne)\\3","")
   $0 = gensub("^(var )(" sym ")(.*)","\\1PartOfSomething.\\2\\3","")
   $0 = gensub("^a(rray.*)","sA\\1","")
   $0 = gensub("^(" sym " =.*)","var \\1","")

   print
}

$ cat file
function(paramOne){
//Some code here
var variableOne = new ObjectType;
array[1] = "Some String";
instanceObj = new Something.something;
}

$ gawk -f tst.awk file
function(ParameterOne){
//Some code here
var PartOfSomething.variableOne = new ObjectType;
sArray[1] = "Some String";
var instanceObj = new Something.something;
} 
```

但是请考虑一下您的实际输入可能会如何变化 - 您可以在符号之间有更多/更少/不同的间距。您可以从一行开始分配，然后在下一行完成。您的注释可能包含与您不想更改的代码相似的行。您可以在一行上有多个语句。等等等等

您可以一次解决每个问题，但这可能比仅更新文件要花更长的时间，而且您可能仍然无法完全正确。

如果您的代码结构非常好并且严格遵循特定的、高度限制性的编码格式，那么您可能可以使用脚本语言做您想做的事情，但您最好的选择是：

1.  如果文件少于 10,000 个，则手动更改文件，或者
2.  获取用于编写文件的语言的解析器（例如编译器）并对其进行修改以吐出更新的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T22:25:22.300

一旦它开始变得稍微复杂一点，您无论如何都会切换到脚本语言。那么为什么不首先从 python 开始呢？

遍历目录： [在python中遍历和处理目录中的文件](https://stackoverflow.com/questions/10617731/walking-along-and-processing-files-in-directory-in-python)

替换文件中的文本： [用 Python 替换文件中的文本](https://stackoverflow.com/questions/13089234/replacing-text-in-a-file-with-python?rq=1)

Python 正则表达式方法：http: [//docs.python.org/dev/howto/regex.html](http://docs.python.org/dev/howto/regex.html)

我还建议安装 Eclipse + PyDev，因为这将使调试更容易。

这是一个简单的自动替换器的示例

```
import os;
import sys;
import re; 
import itertools;

folder = r"C:\Workspaces\Test\";
skip_extensions = ['.gif', '.png', '.jpg', '.mp4', ''];
substitutions = [("Test.Alpha.", "test.alpha."), 
                 ("Test.Beta.", "test.beta."),
                 ("Test.Gamma.", "test.gamma.")];

for root, dirs, files in os.walk(folder):
    for name in files:
        (base, ext) = os.path.splitext(name);
        file_path = os.path.join(root, name);
        if ext in skip_extensions: 
            print "skipping", file_path;
        else:
            print "processing", file_path;

            with open(file_path) as f:
                s = f.read();

            before = [[s[found.start()-5:found.end()+5] for found in re.finditer(old, s)] for old, new in substitutions];
            for old, new in substitutions:
                s = s.replace(old, new);
            after = [[s[found.start()-5:found.end()+5] for found in re.finditer(new, s)] for old, new in substitutions];

            for b, a in zip(itertools.chain(*before), itertools.chain(*after)):
                print b, "-->", a;

            with open(file_path, "w") as f:
                f.write(s); 
```

# sparql - SPARQL 更新操作

> ID：15046444
> 
> 赞同：1
> 
> 时间：2013-02-23T22:23:17.967
> 
> 标签：sparql

根据 SPARQL 更新 1.1，有一个 GraphStore，所有操作都在其中进行。我想问一下我们是否可以通过各种操作在GraphStore中创建多个未命名的RDF图（默认除外）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T02:50:47.757

不，你不能，根据[规范的](http://www.w3.org/TR/sparql11-update/)[第 2 节](http://www.w3.org/TR/sparql11-update/#graphStore)，只有一个未命名的图：

> Graph Store 是由单个服务管理的 RDF 图的可变容器。类似于由 SPARQL 1.1 查询语言操作的 RDF 数据集，**图存储包含一个（未命名的）插槽，其中包含一个默认图**和零个或多个命名插槽，其中包含命名图。操作可以指定要修改的图，或者它们可以依赖于该操作的默认图。

我将重点添加到规范中的上述引用中，本质上只有一个未命名的图。

从技术上讲，您甚至无法使用`DROP`此图，因为它必须始终存在（即使为空）

# android - 如何检测Android上连续按下按钮的事件变化

> ID：15046447
> 
> 赞同：2
> 
> 时间：2013-02-23T22:23:23.587
> 
> 标签：android

如果按下超过两秒钟，我需要更改按钮的颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:31:15.187

您必须使用 onTouch() 方法，它允许检查诸如 ACTION_UP 和 ACTION_DOWN 之类的操作 将其分配给 onCreate() 中的按钮

```
btn.setOnTouchListener(this); 
```

然后在 onTouch()

```
@Override
public boolean onTouch(View arg0, MotionEvent arg1) {
    switch ( arg1.getAction() ) {
    case MotionEvent.ACTION_DOWN: 
        //Start measuring time and when action = up calculate difference in time
    }

    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T22:34:37.920

我不确定长按是多长时间，但如果您不需要精确到两秒，我会为该按钮注册一个 onLongClickListener。然后让监听器更新颜色。

# javascript - 使用 ThreeJS 的 WebGL 中的水/镜面表面

> ID：15046449
> 
> 赞同：2
> 
> 时间：2013-02-23T22:23:45.467
> 
> 标签：javascript, three.js, webgl, mirror

我正在尝试使用 Three.js 在 WebGL 中制作水面。我想我会从一面镜子开始，因为我想我知道如何添加位移来制作基本的涟漪效果。

**这就是我所知道的：**反射通常是通过使用水面作为剔除平面在 FBO 上渲染垂直（y 轴）翻转的场景来实现的。然后这个 FBO 被用作水平面的纹理。使用置换贴图（或噪声纹理）可以置换图像并实现水效果。

**问题：**首先，我找不到在 ThreeJS 中翻转场景的方法。在 OpenGL 中，您可以只使用 glScale 并将 -1 表示为 Y，但我认为这在 WebGL（或它所基于的 GLES）中是不可能的。至少我在 ThreeJS 中没有发现这样的东西。几何有一个比例参数，但场景没有。一种解决方案可能是更改 Camera 中的 .matrixWorldInverse，但我不确定如何做到这一点。有任何想法吗？

第二个障碍是裁剪/剔除平面。同样，旧方法是使用 glClipPlane，但据我所知，即使在最新的 OpenGL 标准中也不支持它，所以它也不在 WebGL 中。我在某处读到你可以在顶点着色器中做到这一点，但在 ThreeJS 中我只知道如何将着色器添加为材质，并且在渲染到 FBO 期间我需要它。

第三，使用正确的纹理坐标将 FBO 渲染到水平面，所以我认为基本上是从相机位置投影。

我在互联网上找不到更多关于此的信息。WebGL 反射示例很少，唯一接近的就是[这里](https://github.com/jwagner/terrain)，它使用了一些“斜视截头体”方法进行剔除。这真的是当今最好的方法吗？我们现在必须在软件中自己编写代码而不是一个函数（在 CPU 而不是 GPU 上运行）？当然，ThreeJS 中提供的立方体反射也不适用于平面，所以是的，我试过了。如果有人可以尽可能简单地举例说明如何做到这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-20T15:04:07.667

查看[这个 three.js 示例](http://threejs.org/examples/#webgl_shaders_ocean)。

开箱即用，直接从源头开始：

```
water = new THREE.Water( renderer, camera, scene, {
    textureWidth: 512, 
    textureHeight: 512,
    waterNormals: waterNormals,
    alpha:  1.0,
    sunDirection: light.position.clone().normalize(),
    sunColor: 0xffffff,
    waterColor: 0x001e0f,
    distortionScale: 50.0,
} );

mirrorMesh = new THREE.Mesh(
    new THREE.PlaneBufferGeometry( parameters.width * 500, parameters.height * 500 ),
    water.material
);

mirrorMesh.add( water );
mirrorMesh.rotation.x = - Math.PI * 0.5;
scene.add( mirrorMesh ); 
```

对我来说似乎像一片海洋:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T08:57:58.577

您可以查看此演示文稿 [http://29a.ch/slides/2012/webglwater/](http://29a.ch/slides/2012/webglwater/)

这个小提琴可能对你有用 jsfiddle.net/ahmedadel/44tjE

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T23:23:27.483

这仅解决了您问题的扩展部分。附加到 Object3D 的矩阵有一个 makeScale 方法。

# windows-7 - win7 上 Visual Studio 2012 和 SQL Server Management Studio 2012 的正确安装顺序是什么？

> ID：15046451
> 
> 赞同：8
> 
> 时间：2013-02-23T22:23:45.800
> 
> 标签：windows-7, visual-studio-2012, sql-server-2012

我正准备在全新安装的 win 7 x64 开发 VM 上针对 SQL Server 2012 服务器进行一些 Web 开发。

我应该先安装什么，Visual Studio 还是 SSMS？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-28T19:44:02.353

这是我最喜欢的顺序：

1.  在安装任何东西之前进行 Windows 更新。
2.  SQL Server 2012
    *   如果您将 SP1 与 ISO 文件集成，请跳至步骤 4。
    *   如果您的 ISO 文件同时集成了 SP1 和 U5，请跳至步骤 5
    *   在安装过程中取消选择 SQL Server Data Tools（第 8 步将安装 VS 2012 模板，而不是这些旧的 2010 模板）
3.  SQL Server 2012 [SP1](http://www.microsoft.com/en-us/download/details.aspx?id=35575)
4.  SQL Server 2012 SP1 [U5](http://support.microsoft.com/kb/2861107)
5.  视觉工作室 2012
    *   如果您将 U3 与您的 ISO 文件集成，请跳至步骤 7。
    *   在安装过程中取消选择 SQL Server Data Tools，因为我们将在步骤 7 中安装更新的位
6.  视觉工作室 2012 [U3](http://www.microsoft.com/en-eg/download/details.aspx?id=39305)
7.  SQL Server [Data Tools - BI](http://www.microsoft.com/en-us/download/details.aspx?id=36843)（将 BI 项目模板添加到 Visual Studio 2012）
8.  SQL Server [Data Tools](http://msdn.microsoft.com/en-us/data/tools.aspx)（允许您从 Visual Studio 2012 中管理 SQL Server 2012）
9.  Windows更新
10.  锐化器
11.  风格警察
12.  SQL 工具带

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-23T22:38:29.063

两者都不 - 您可以按任何顺序安装它们。虽然您偶尔会在各种不同的论坛上收到有关它的问题，但我已经这样做了，从来没有遇到过问题。

SQL 确实有一个称为 BIDS 的 Visual Studio 依赖项（以前），但 Visual Studio 可以安装在此之上/周围没有问题。

**请注意，在使用初始 SQL 2012 版本时，此答案是正确的**（因为这是提出此问题时的最新版本）。后续版本可能会改变一些事情。我已做出此答案 CW 以鼓励其他人根据需要对其进行编辑，以包含有关更高版本的信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-23T22:29:47.440

我不知道虚拟机是否有不同的方法，但在 Windows 上，我们通常先安装 SQL Server，因为 Visual Studio 的某些配置与之前安装的 SQL Server 配置冲突

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-23T22:37:35.170

在这两个组件之间没有发现直接依赖关系，首先安装 Visual Studio，然后确保正确安装 .NET Framework 是我的方法，然后安装 SQL Server，但在所有情况下，SQL Server 安装都会安装以下软件组件 - 2008：

> *   NET 框架 3.5
> *   SQL Server 本机客户端
> *   SQL Server 安装程序支持文件

我的做法：

> 1.  视觉工作室 2008。
> 2.  视觉工作室 SP1。
> 3.  SQL 服务器 2008。
> 4.  运行 Windows 更新。

有用的问题[在这里](https://stackoverflow.com/questions/2473359/visual-studio-and-sql-server-correct-installation-sequence)

# java - 检查对称数

> ID：15046456
> 
> 赞同：0
> 
> 时间：2013-02-23T22:24:53.930
> 
> 标签：java, symmetric

如何检查对称数？

```
public static int Symmetric(int a) {
    if(new StringBuilder(Integer.toString(a)) ==
        new StringBuilder(Integer.toString(a)).reverse())
        return  a;
    else
        return 0;
} 
```

我试着这样做，但总是返回 0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T22:26:14.627

您不能使用`==`来比较`String`s（或`StringBuilder`s），您需要使用`equals()`.
此外，您需要在比较之前将`StringBuilder`s 转回`String`s：

**编辑：** 另外，真的不需要第一个`StringBuilder`：

```
public static int symmetric(int a) {
    if (Integer.toString(a).equals(new StringBuilder(Integer.toString(a)).reverse().toString()))
        return a;
    else
        return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T22:28:12.777

[在 JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.21)中解释了平等。

您必须[在 Strings 上使用 equals()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equals%28java.lang.Object%29)：[StringBuilder.toString()](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html#toString%28%29)。[等于（）](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equals%28java.lang.Object%29)。

```
public static int Symmetric( int a ) {
    return
       new StringBuilder(Integer.toString(a)).toString().equals(
             StringBuilder(Integer.toString(a)).reverse().toString())
       ? a : 0;
} 
```

# sql-server - 在托管服务提供商更改时设置 asp 应用程序

> ID：15046459
> 
> 赞同：0
> 
> 时间：2013-02-23T22:25:22.757
> 
> 标签：sql-server, windows, iis, asp-classic, installation

我从未在 windows iis、asp 和 mssql 上工作过，但现在我被迫这样做。

剧情：

我有一个 asp mvc 应用程序（从旧的禁用服务器复制的确切文件夹树）和一个 mssql 备份文件（.bak）。我已设法恢复数据库，并将我的应用程序文件夹复制到 httpdocs。但是仍然......当我尝试访问服务器时，它会弹出很多错误。我知道，缺乏知识和应用程序设置。

我的问题，我应该以什么顺序开始设置我的应用程序（什么文件，什么设置..等完整的 Windows 菜鸟）；我没有起点，我很困惑，请让我走上正轨。任何建议将不胜感激，任何参考。

请记住，我在 apache 服务器、php、mysql、html、css、javascript 方面有高级知识，但在 IIS、mssql、asp 中绝对为零：D

PS：有点急！我必须边走边学。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:04:44.663

你得到什么样的错误？

是代码错误吗？或者是什么？

根据我的经验，当您获得新的 Windows 主机或服务器时，有时您需要激活 .asp 页面，因为它默认只读取 aspx，此外，要查看您需要配置的代码行错误，因为通常会出现错误被隐藏。

要在服务器上显示错误，请转到控制面板、管理工具、IIS，然后在某处是在浏览器上显示错误的选项。

如果您在使用 plesk 的主机中，还有一个选项可以启用 .asp 页面并在浏览器上显示错误。

# jquery - 为什么它不隐藏我的 div

> ID：15046470
> 
> 赞同：-4
> 
> 时间：2013-02-23T22:26:36.740
> 
> 标签：jquery

```
<html>

<head>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
</head>

<body>
<div align="center" style="margin-top:15%;">
    <div id="out" align="center" style="border-style:solid;border-width:1px;width:300px;">
        <div id="out_text" align="center" style="margin-top:20;height:40px;width:200px;">
        Welcome
        </div>
        <form method="post"> 
            Username: <input type="text" name="user"><br>
            Password: <input type="password" name="password"><br>
            <input id="login" type="submit" value="Login">
            <input id="add" type="submit" value="Add User">
        </form>

    </div>

    <div id="in" style="border-style:solid;border-width:1px;width:300px;">
        <div id="in_text" align="center" style="margin-top:20;height:40px;width:200px;">
        "test"
        </div>
        <form>
            <input id="logout" type="submit" id="logout" value="Logout">    
        </form>
    </div>

</div>

<script>
$(document).ready(function() {
    $('#out').show();
    $('#in').hide();
}); 

$('#login').click(function() {
    $('#out').hide();
    $('#in').show();
    $('#in_text').text("Success");
});

$('#logout').click(function() {
    $('#out').show();
    $('#in').hide();
    $('#out_text').text("Welcome");
});
</script>

</body>

</html> 
```

所以我的问题是为什么我的 $(document).ready 在页面完成加载时不隐藏 id="in" 的 div？我认为这就是它的完成方式。我在这里错过了什么吗？我浏览了各种教程，发现它们和我做的一样，但由于某种原因，我的 jquery 无法正常工作。

编辑：好的，多亏了你们，我能够隐藏另一个 div。谢谢你。但是，现在我有一个不同的问题。我正在尝试制作一个 onclick 事件处理程序来切换要显示和更改文本的 div。我编辑了以下代码，这里的任何人都可以弄清楚为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T22:35:01.430

通过检查您的控制台，您会发现您的事件处理程序中缺少两个结束括号。此外，它看起来不像您包含 jquery。当 javascipt 不起作用时，请务必先检查控制台。

```
<html>

<head>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
</head>

<body>
<div align="center" style="margin-top:15%;">
    <div id="out" align="center" style="border-style:solid;border-width:1px;width:300px;">
        <div id="out_text" align="center" style="margin-top:20;height:40px;width:200px;">
        Welcome
        </div>
        <form method="post"> 
            Username: <input type="text" name="user"><br>
            Password: <input type="password" name="password"><br>
            <input id="login" type="submit" value="Login">
            <input id="add" type="submit" value="Add User">
        </form>

    </div>

    <div id="in" style="border-style:solid;border-width:1px;width:300px;">
        <div id="in_text" align="center" style="margin-top:20;height:40px;width:200px;">
        "test"
        </div>
        <form>
            <input id="logout" type="submit" id="logout" value="Logout">    
        </form>
    </div>

</div>

<script>
$(document).ready(function() {
    $('#out').show();
    $('#in').hide();
}); //missing paren here

$('#login').click(function() {
    jQuery.cssRule("p.hide-me-first", "display", "none");
});  //missing paren here
</script>

</body>

</html> 
```

[http://jsbin.com/ihasev/2/edit](http://jsbin.com/ihasev/2/edit)

另外，请确保您包含 cssRule 插件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T22:30:03.207

你错过了`)`，更重要的是你没有在你的页面中包含 jQuery。

```
<head>
    <script type='text/javascript' src='//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js'></script>
    ...
</head> 
```

```
$(document).ready(function() {
    $('#out').show();
    $('#in').hide();
    $('#login').click(function() {
        $("p.hide-me-first").hide();
    }); // <---
}); // <--- 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T22:33:43.727

你忘了关闭`$(document).ready();`括号，你应该在你的`<script>`标签中写下这个：

```
$(document).ready(function() {
    $('#out').show();
    $('#in').hide();

    $('#login').click(function() {
        jQuery.cssRule("p.hide-me-first", "display", "none");
    });
}); 
```

我做了一个[jsFiddle](http://jsfiddle.net/TSsc4/)来展示这个解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T22:32:06.190

你在这里有一个语法错误：

```
$('#login').click(function() {
  jQuery.cssRule("p.hide-me-first", "display", "none");
}; 
```

最后一行应该是：

```
}); 
```

当脚本块中出现语法错误时，该块中的代码将不会运行。

# php - PHP：单击链接，它会回显

> ID：15046479
> 
> 赞同：-4
> 
> 时间：2013-02-23T22:27:24.523
> 
> 标签：php, html

我对 PHP 还是很陌生，但这看起来很简单，但我卡住了（可能是因为我累了） 无论如何，基本上我需要做的就是在单击按钮时在同一页面上回显一些文本。

我有一个 CSS 样式的按钮，这就是它在 html 中的样子：

```
<a href="#"  class="button">Get watching</a> 
```

我现在需要将其转换为 PHP，以便单击它时会回显一些文本。

非常感谢，乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T22:46:43.567

```
<a href="#" onClick="showText()"  class="button">Get watching</a>
<p id="showText"></p>

<script type="text/javascript">
function showText()
{
      document.getElementById("showText").innerHTML = "Some Text";
}
</script> 
```

# ruby - 可选的第一个匹配正则表达式可以与第二个匹配相同

> ID：15046480
> 
> 赞同：1
> 
> 时间：2013-02-23T22:27:28.200
> 
> 标签：ruby, regex

我想从字符串的每一行中获得 3 个匹配项：

```
m&tch1@ match2@  match3canbe&ny7hing
match2@          match3canbe&ny7hing 
```

*   匹配 1 可以是任何非空格，它并不总是以 @ 结尾
*   如果 Match 1 存在，则与 Match 2 用空格隔开（空格不是匹配的一部分）
*   匹配 2 始终是一个普通单词，并且始终以 @ 结尾
*   第3场比赛是什么

所以从上面，我想要：

```
Match 1
1\.  m&tch1@
2\.  match2
3\.  match3canbe&ny7hing
Match 2
1\.  
2\.  match2
3\.  match3canbe&ny7hing 
```

我想出了这个：`/^(\S*@?) ?(\w+)@ +(.+)/`但它返回：

```
Match 1
1\.  m&tch1@
2\.  match2
3\.  match3canbe&ny7hing
Match 2
1\.  match
2\.  2
3\.  match3canbe&ny7hing 
```

匹配 1 很好，但对于匹配 2，第一组应该是空的，第二组应该是 'match2'

如果不能单独使用正则表达式，还有其他建议吗？

**UPD：** sawa 的解决方案有效，但如果我在行前加上任何东西，例如选项卡：

```
prefix m&tch1: match2: match3canbe&ny7hing
prefix match2: match3canbe&ny7hing 
```

并像这样扫描它：`/^prefix (\S*)\s+(\S*):\s+(\S+)/` 它只扫描一行

当前：[http](http://rubular.com/r/expKw59fF2)
://rubular.com/r/expKw59fF2 带前缀（尚未工作）：[http ://rubular.com/r/VWGgU1qNWA](http://rubular.com/r/VWGgU1qNWA)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:51:47.717

```
string.scan(/(\S*)\s+(\S*)@\s+(\S+)/) 
```

返回：

```
[
  [
    "m&tch1@",
    "match2",
    "match3canbe&ny7hing"
  ],
  [
    "",
    "match2",
    "match3canbe&ny7hing"
  ]
] 
```

# java - 如何使用 Onclick/Ontouch 调用 Java 中的两种方法之一？

> ID：15046486
> 
> 赞同：1
> 
> 时间：2013-02-23T22:28:11.033
> 
> 标签：java, android

我有两种描述两张图片的方法，在触摸图片/屏幕时，我想在屏幕上的两者之间交替。如何使用布尔值来做到这一点？

这是我的代码：

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Paint.Style;
import android.graphics.Path;
import android.graphics.RectF;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;

/**
 * DrawView.java 
 * A first drawing view example
 */
public class DrawView extends View implements OnTouchListener
{

    private Paint backgroundPaint = new Paint();
    private Paint backgroundPaintn = new Paint();
    private Paint drawPaint_grass = new Paint();
    private Paint drawPaint_grassn = new Paint();
    private Paint drawPaint_door = new Paint();
    private Paint drawPaint_doorn = new Paint();
    private Paint drawPaint_house = new Paint();
    private Paint drawPaint_housen = new Paint();
    private Paint drawPaint_roof = new Paint();
    private Paint drawPaint_roofn = new Paint();
    private Paint circlePaint = new Paint();
    private Paint circlePaintn = new Paint();
    private Paint circlePaint_sun = new Paint();
    private Paint circlePaint_sunn = new Paint();
    private Paint textPaint = new Paint();
    private Paint textPaintn = new Paint();
    private Paint path = new Paint();
    private Paint pathn = new Paint();
    private Path trianglePath;
    private float sx, sy;

    public DrawView(Context context)
    {
        super(context);         

        setFocusable(true);
        setFocusableInTouchMode(true);

        backgroundPaint.setColor(Color.rgb(0,250,205));
        backgroundPaint.setAntiAlias(true);
        backgroundPaint.setStyle(Style.FILL);

        backgroundPaintn.setColor(Color.rgb(107,92,240));
        backgroundPaintn.setAntiAlias(true);
        backgroundPaint.setStyle(Style.FILL);

        drawPaint_grass.setColor(Color.rgb(124,252,0));
        drawPaint_grass.setStyle(Style.FILL);

        drawPaint_grassn.setColor(Color.rgb(63,104,73));
        drawPaint_grassn.setStyle(Style.FILL);

        drawPaint_door.setColor(Color.rgb(233,82,65));
        drawPaint_door.setStyle(Style.FILL);

        drawPaint_doorn.setColor(Color.rgb(105, 15, 5));
        drawPaint_doorn.setStyle(Style.FILL);

        drawPaint_house.setColor(Color.rgb(205, 133, 63));
        drawPaint_house.setStyle(Style.FILL);

        drawPaint_housen.setColor(Color.rgb(175, 142, 138));
        drawPaint_housen.setStyle(Style.FILL);

        drawPaint_roof.setColor(Color.rgb(160, 82, 45));
        drawPaint_roof.setStyle(Style.FILL);

        drawPaint_roofn.setColor(Color.rgb(67,52,51));
        drawPaint_roofn.setStyle(Style.FILL);

        circlePaint_sun.setColor(Color.rgb(255, 255, 0));
        circlePaint_sun.setStyle(Style.FILL);

        circlePaint_sunn.setColor(Color.rgb(249, 245, 245));
        circlePaint_sunn.setStyle(Style.FILL);

        trianglePath = new Path();
        trianglePath.moveTo(70, 300); // starting point
        trianglePath.lineTo(170,250); // 1st vertix
        trianglePath.lineTo(270, 300); // 2nd vertix
        trianglePath.lineTo(70, 300); // 3rd vertix and close

        textPaint.setColor(Color.BLACK);
        textPaint.setStyle(Style.FILL);

        textPaintn.setColor(Color.WHITE);
        textPaintn.setStyle(Style.FILL);

        circlePaint.setColor(Color.rgb(211, 211, 211));
        circlePaint.setStyle(Style.FILL);

        this.setOnTouchListener(this);
    }

    @Override
    public void onDraw(Canvas canvas)
    {

        //canvas.drawPath(path, paint);
        //canvas.drawPath(path, paint);

        // Draw white background
        canvas.drawRect(this.getLeft(), this.getTop(), this.getRight(), this.getBottom(), backgroundPaint);

        //draw a rectangle with blue paint
        canvas.drawRect(0,400, 540,600, drawPaint_grass); 
        canvas.drawRect(100,400, 240,300, drawPaint_house);
        canvas.drawRect(150,400, 190,335, drawPaint_door); 
        canvas.drawPath(trianglePath, drawPaint_roof); // or whatever paint you want

        //draw text with green paint
        canvas.drawText("Muhibur Rahim", 232, 565, textPaint);

        //draw a circle with red paint with the touch coordinates
        canvas.drawCircle(sx-30,sy-30, 3, circlePaint);

        //draw a circle with red paint with the touch coordinates
        canvas.drawCircle(80, 80, 30, circlePaint_sun);
    }

    public void onDrawn(Canvas canvas)
    {

        //canvas.drawPath(path, paint);
        //canvas.drawPath(path, paint);

        // Draw white background
        canvas.drawRect(this.getLeft(), this.getTop(), this.getRight(), this.getBottom(), backgroundPaintn);

        //draw a rectangle with blue paint
        canvas.drawRect(0,400, 540,600, drawPaint_grassn); 
        canvas.drawRect(100,400, 240,300, drawPaint_housen);
        canvas.drawRect(150,400, 190,335, drawPaint_doorn); 
        canvas.drawPath(trianglePath, drawPaint_roofn); // or whatever paint you want

        //draw text with green paint
        canvas.drawText("Muhibur Rahim", 232, 565, textPaintn);

        //draw a circle with red paint with the touch coordinates
        canvas.drawCircle(sx-30,sy-30, 3, circlePaintn);

        //draw a circle with red paint with the touch coordinates
        canvas.drawCircle(80, 80, 30, circlePaint_sunn);
    }

    public boolean onTouch(View v, MotionEvent event)
    {   
        //update the coordinates for the OnDraw method above, with wherever we touch
        sx = event.getX();
        sy = event.getY();

        invalidate();
        return true;
    }

} 
```

我的问题是代码的最后一部分，public boolean onTouch ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:36:24.983

```
public boolean bool = false;
public int count = 0; // say before the constructor.

//then in your onDraw method take everything and encapsulate it in an if statement:

if(!bool){

//the code in your onDraw() method

}else{//here you would put the call to the other draw method like
onDrawn(canvas);
} 
```

然后在你重写的 onTouch() 方法中像这样

```
public boolean onTouch(View v, MotionEvent event)
{   
    //update the coordinates for the OnDraw method above, with wherever we touch
    sx = event.getX();
    sy = event.getY();
    if(event.getAction() == MotionEvent.ACTION_DOWN){
     if(count == 0){
     bool = true;
     count++;}
     if(count == 1){
     bool = false;
     count--;}
     }
    invalidate();
    return true;
} 
```

这个怎么样？

```
public void onDraw(Canvas canvas)
{
    if(!bool){
        // Draw white background
        canvas.drawRect(this.getLeft(), this.getTop(), this.getRight(), this.getBottom(), backgroundPaint);

        //draw a rectangle with blue paint
        canvas.drawRect(0,400, 540,600, drawPaint_grass); 
        canvas.drawRect(100,400, 240,300, drawPaint_house);
        canvas.drawRect(150,400, 190,335, drawPaint_door); 
        canvas.drawPath(trianglePath, drawPaint_roof); // or whatever paint you want

        //draw text with green paint
        canvas.drawText("Muhibur Rahim", 232, 565, textPaint);

        //draw a circle with red paint with the touch coordinates
        canvas.drawCircle(sx-30,sy-30, 3, circlePaint);

        //draw a circle with red paint with the touch coordinates
        canvas.drawCircle(80, 80, 30, circlePaint_sun);
    } else {
        onDrawn(canvas);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T22:39:52.397

```
if (flag) {
  // call first method
  flag = false;
} else {
  // call second method
  flag = true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T22:39:13.817

```
Random randomizer = new Random();
if(randomizer.nextBoolean()==True){
}
else{
} 
```

# asp.net-mvc-4 - 如何在 WebAPI 控制器（MVC 4）中访问 HttpServerUtility

> ID：15046487
> 
> 赞同：2
> 
> 时间：2013-02-23T22:28:11.957
> 
> 标签：asp.net-mvc-4, asp.net-web-api, httpcontext

我需要在 MVC 4 ApiController 的控制器中访问 Server.MapPath(virtualPath) 方法。

答案通常是从 ControllerContext.HttpContext.Server 访问它。但是，与 MvcControllers 不同的是，ApiController 的 ControlerContext 没有 HttpContext。

在 Global.asax.cs 中实例化的 WebApiAppication 有一个 HttpContext 元素（上下文）。但是，与 MVC 3 和更早版本不同，我找不到从控制器访问 WebApiApplication 的方法。（早期几代人在静态实例变量中存储了对它的引用。MVC 4 删除了它。）

此外，当我从单元测试中调用控制器方法时，我正在尝试找到无需大量额外脚手架的情况下也可以工作的东西。我想我可以访问它，即使在 WebApi 控制器中，使用 HttpContext.Current （至少它编译），但我不能模拟它进行测试。（我在这里说的是单元测试，您可以直接调用 Controller 方法。我看过一些最近的教程，您可以使用瘦 HttpClient 进行单元测试，从而测试整个堆栈。这似乎更像是低级集成测试大部头书。）

这似乎不应该那么困难，但我已经花了几个小时在谷歌上搜索它并尝试了一些东西，我的头因为撞到墙上而变得血腥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:24:55.500

我建议你抽象这个功能：

```
public interface IMyDependency
{
    string MapPath(string path);
} 
```

然后有一个实现：

```
public class MyConcreteDependency: IMyDependency
{
    public string MapPath(string path)
    {
        return HostingEnvironment.MapPath(path);
    }
} 
```

最后，您的 ApiController 完全独立于所有静态方法调用，使其单元测试友好：

```
public class MyController: ApiController
{
    private readonly IMyDependency dependency;
    public MyController(IMyDependency dependency)
    {
        this.dependency = dependency;
    }

    public HttpResponseMessage Get()
    {
        var path = this.dependency.MapPath("~/App_Data");
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-21T17:07:52.357

因为`ApiControllers`，建立自己一个`DelegatingHandler`并将你所有的好东西推到`request.Properties`。然后，无论您是在测试还是实时运行，您都可以从您的请求中检索它们。好处是您对控制器中的 Session 的依赖性为零。

## 消息处理程序

```
public class ContextHandler : DelegatingHandler
{
    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, System.Threading.CancellationToken cancellationToken)
    {
        // get the goodies to add onto the request
        var goodies = /* call to goodieGoodieYumYum */

        // add our goodies onto the request
        request.Properties.Add(Constants.RequestKey_Goodies, goodies);

        // pass along to the next handler
        return base.SendAsync(request, cancellationToken);
    }
} 
```

## 控制器动作

```
var goodies = (List<Goodie>)Request.Properties[Constants.RequestKey_Goodies]; 
```

# ios - 获取所有正在运行的应用程序 PID

> ID：15046489
> 
> 赞同：0
> 
> 时间：2013-02-23T22:28:43.237
> 
> 标签：ios, pid

我正在越狱的 iPhone 上运行并进行调整。我需要一种方法来获取所有当前正在运行的应用程序 PID。

这可能吗？最好的方法是什么？

谢谢！任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:20:59.453

你总是可以分割'ps'的输出。这可能会给你一些帮助： [http ://techtips.salon.com/iphone-ps-command-options-300.html](http://techtips.salon.com/iphone-ps-command-options-300.html)

我假设，因为你可以在终端模拟器中运行它，你可以在你的应用程序中执行它并读取输出。

# python - numpy 矩阵的 Python 列表行为异常

> ID：15046490
> 
> 赞同：1
> 
> 时间：2013-02-23T22:28:46.847
> 
> 标签：python, arrays, list, matrix, numpy

我正在尝试使用 numpy 矩阵列表，但遇到了一个烦人的问题。

假设我从一个包含 10 个 2x2 零矩阵的列表开始

```
para=[numpy.matrix(numpy.zeros((2,2)))]*(10) 
```

我像这样访问单个矩阵

```
para[0]
para[1] 
```

等等。到现在为止还挺好。

现在，我只想修改第二个矩阵的第一行，其余的保持不变。所以我这样做

```
para[1][0]=numpy.matrix([[1,1]]) 
```

第一个索引指向列表中的第二个矩阵，第二个索引指向该矩阵中的第一行，将其替换为 [1,1]。

但奇怪的是，这个命令将列表中所有十个矩阵的第一行更改为 [1,1] 而不是我想要的第二个。是什么赋予了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T22:37:09.063

当您将初始列表乘以 10 时，您最终会得到一个包含 10 个 numpy 数组的列表，这些数组实际上是对相同底层结构的引用。修改一个将修改所有这些，因为实际上只有一个 numpy 数组，而不是 10 个。

如果您需要证明，请查看 REPL 中的此示例：

```
>>> a = numpy.zeros(10)
>>> a = [numpy.zeros(10)]*10
>>> a[0] is a[1]
True
>>> 
```

`is`运算符检查两个对象是否实际上相同（而不是它们的值是否相等）。

您应该做的是使用列表推导来生成初始数组而不是乘法，如下所示：

```
para=[numpy.matrix(numpy.zeros((2,2))) for i in range(10)] 
```

这将调用`numpy.matrix()`十次而不是一次并生成 10 个不同的矩阵。

# c - sem_wait 无法继续

> ID：15046492
> 
> 赞同：0
> 
> 时间：2013-02-23T22:28:49.593
> 
> 标签：c, concurrency, ipc, multiprocessing, semaphore

我有一个进程产生了一些子进程。它们都共享一个信号量。

在我的主程序中。

```
sem_t *sharedSem = sem_open(SHAREDSEM, O_CREAT, 0600, 4); // Initial 1 
```

在我的儿童节目中。

```
> sem_t * serverSem = sem_open(SHAREDSEM, 0);     
sem_wait(serverSem); 
printf("PRINTING\n");  
sem_post(sharedSem); 
```

我的观察是问题出在 sem_wait 之内。在子进程上的 sem_wait 之前发生的任何事情都会打印出来。但是， sem_wait 之后的 printf() 永远不会打印。一次都无。

我已经做了几个小时了，我看不到我的问题。任何人都可以伸出援助之手吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-20T20:04:13.273

我认为这种行为是由于之前的运行缺少 sem_close() 引起的。只需确保您正确关闭信号量，以便在将来运行信号量的起始值被正确分配并且 sem_wait() 应该工作。

# mysql - MySQL 更新不更新某些行

> ID：15046495
> 
> 赞同：0
> 
> 时间：2013-02-23T22:29:07.220
> 
> 标签：mysql

这是我的双重疑问：

```
$Quest = "SELECT * FROM TOAWorkorders";
 $FindTechResult = mysql_query($Quest, $cxn)
        or die ('The easter bunny is watching you' . mysql_error());

while ($row = mysql_fetch_array($FindTechResult))
 {          
      if (strpos($BBT, 0, 3) != 'Sys')
        {

              $IdNum = $row['IdNum'];

              $BBT = $row['BBT'];       
              $BBTArray = explode("-", $BBT);
              $TechNum = $BBTArray["0"];
              $Title = $BBTArray["2"];

             $Name = explode(" ", $BBTArray['1']);
             $FirstName = $Name["0"];
             $LastName = $Name["1"];

                }

echo $TechNum . ' !! ' . $FirstName . ' !! ' . $LastName . ' !! ' . $Title . '<br>';

$Quest = "UPDATE TOAWorkorders SET TechNum = '$TechNum', FirstName = '$FirstName', LastName = '$LastName', Title = '$Title' WHERE IdNum = '$IdNum'";
$result = mysql_query($Quest, $cxn)  or die(mysql_error());   
     } 
```

一切都适用于大约 2/3 的数据库。剩下 33,000 行未更新。我找不到有效的数据和无效的数据之间的任何区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:42:30.587

由于您正在执行更新，并且您说其余代码有效（意思是，我希望您得到 109,112 个回显结果），因此一定是找不到 ID（WHERE IdNum = '$编号”）。

尝试在该命令前面加上“SELECT COUNT(*) from TOAWorkorders WHERE IdNum = '$IdNum'”，看看程序运行时是否有 33,000 个零。如果这样做，那么您的表中缺少 IdNum 值。

如果您不这样做，请提供详细信息，我会告诉您。

# python - Tkinter 中的顶层：防止两个窗口打开

> ID：15046498
> 
> 赞同：6
> 
> 时间：2013-02-23T22:29:26.113
> 
> 标签：python, tkinter

假设我有一些简单的代码，如下所示：

```
from Tkinter import *
root = Tk()
app = Toplevel(root)
app.mainloop() 
```

这将打开两个窗口：`Toplevel(root)`窗口和`Tk()`窗口。

是否可以避免`Tk()`窗口（`root`）打开？如果是这样，怎么做？我只想要顶层。我希望发生这种情况，因为我正在制作一个将打开多个窗口的程序，这些窗口`Toplevel`都是`root`.

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-23T22:35:28.380

该[`withdraw()`](http://effbot.org/tkinterbook/wm.htm#Tkinter.Wm.withdraw-method)方法从屏幕上删除窗口。
该[`iconify()`](http://effbot.org/tkinterbook/wm.htm#Tkinter.Wm.iconify-method)方法最小化窗口，或将其变成一个图标。
该[`deiconify()`](http://effbot.org/tkinterbook/wm.htm#Tkinter.Wm.deiconify-method)方法将重绘窗口，和/或激活它。

如果您选择`withdraw()`，请确保您在测试前考虑了一种退出程序的新方法。
例如

```
from Tkinter import * # tkinter in Python 3

root = Tk()
root.withdraw()

top = Toplevel(root)
top.protocol("WM_DELETE_WINDOW", root.destroy)

but = Button(top, text='deiconify')
but['command'] = root.deiconify
but.pack()

root.mainloop() 
```

该[`protocol()`](http://effbot.org/tkinterbook/wm.htm#Tkinter.Wm.protocol-method)方法可用于注册将在按下
*顶层窗口的*关闭按钮时调用的函数。在这种情况下我们可以使用[`destroy()`](http://effbot.org/tkinterbook/widget.htm#Tkinter.Widget.destroy-method)退出。

# ios - iOS上的内存保留/泄漏

> ID：15046501
> 
> 赞同：0
> 
> 时间：2013-02-23T22:29:50.170
> 
> 标签：ios, memory, xcode4.5, nib

我有一个从 XIB 文件定义的 UItableViewCell 。这个单元格包含一个 UIScrollView，它使用 UIView 对象 - viewXY - 动态填充。我在代码中的任何地方都使用 arc。用户界面看起来像：

单元格 0：[view00 view01 view02 ...]

单元格 1：[view10 view11 view12 ...]

等等...，其中 [ ] 是单元格内容，可以水平滚动。

问题：我分析了应用程序，当我垂直向下滚动*时*，内存占用量迅速增长，据我所知，从未恢复正常，也没有达到平稳状态。更重要的是，如果我向下滚动几个单元格然后再向上滚动，内存也会增加......

我用仪器工具检查了泄漏，没有。

我围绕创建 viewXY 的代码部分缩小了问题的范围。如果我使用：

```
myDisplay* viewXY;//myDisplay is a UIView subclass
-->viewXY = [[NSBundle mainBundle] loadNibNamed:AW_UI_VE owner:self options:nil][0];
[scrollView addSubview:viewXY]; 
```

当我翻阅细胞时，记忆变得失控。NIB 是一个简单的 UIView+UIImageView+2 标签....如果我替换说

```
UIImageView *viewXY = [UIImageView alloc] initWithImage:[blablabla]]
[scrollView addSubview:viewXY]; 
```

一切都很好。仪器中的*Live Bytes*迅速达到平台期。

作为测试的一部分，我加载 NIB 文件而不执行其自定义类中定义的任何方法，因此它带有 IB 中定义的 IBOutlets（默认标签文本、图像等）。

这东西快把我逼疯了。

非常欢迎提出理解我做错了什么的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:57:53.883

In your ViewController's viewDidLoad you should have something like this:

```
 [yourTable registerNib:[UINib nibWithNibName:@"yourUITableViewCellNibName" bundle:nil]
 forCellReuseIdentifier:@"reuseIdentifier"]; 
```

and in your table datasource method(cellForRowAtIndexPath) you should have the following:

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
     MyCustomCell* cell = [tableView dequeueReusableCellWithIdentifier:@"reuseIdentifier"];
     //Set your cell's values.

return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T04:39:27.260

```
[scrollView addSubview:viewXY]; 
```

有你的问题。您正在向滚动视图添加一些内容，并且永远不要删除它。

从事情的声音来看，您没有正确使用 UITableView 。你应该有一个视图控制器，它实现了 UITableViewDelegate 和 UITableViewDataSource 协议中的方法，并使用它们来用数据填充表格。您永远不会直接向表格添加任何内容，您只会在它请求时向其提供单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T00:22:22.060

我不确定这是否与内存使用有关，但文档建议`UINib`用于此用例：

> `UINib`每当需要重复实例化相同的 nib 数据时，您的应用程序都应该使用对象。

另一种可能是`myDisplay`. 它是否有任何`strong`应有的属性`weak`？

# c++ - 自定义应用程序控制台和标准错误

> ID：15046503
> 
> 赞同：3
> 
> 时间：2013-02-23T22:30:15.557
> 
> 标签：c++

我正在编写一个类来从应用程序内部显示自定义控制台。我还用于`glog`将消息记录到文件并同时记录到 stderr。如何让我的控制台类收听 stderr？

我想制作一个自定义 fstream 并执行以下操作：

```
CustomStream cs;
auto original_buf = std::cerr.rdbuf(cs.rdbuf()); 
```

并调用`stream operator <<`发送到控制台类。

或直接从子类化`std::filebuf`并调用：

```
CustomFilebuf fb;
auto original_buf = std::cerr.rdbuf(&fb); 
```

这是正确的方法吗？我搜索了一些示例代码，但找不到很多。

`stderr`Edit1：我尝试使用流三通，但使用和不使用 glog 日志`std::cerr`，所以我无法获取任何数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:10:45.520

我不确定这是否与您的问题有关，但是...

ISO C99 在 7.19.5.3 第 6 段中说：

`When a file is opened with update mode ('+' as the second or third character in the above list of mode argument values), both input and output may be performed on the associated stream. However, output shall not be directly followed by input without an intervening call to the fflush function [...], and input shall not be directly followed by output without an intervening call to a file positioning function, unless the input operation encounters end-of-file.`

也有人说从 stderr 读取是“未定义的行为”......

尽管您可以从 stderr 读取，但只要在读取之前刷新：

```
fwrite("x", 1, 1, stderr);
fflush(stderr);
fgetc(stderr); 
```

另请查看[如何正确读取子进程的 stdout/stderr 输出？](https://stackoverflow.com/questions/3164234/how-do-i-read-stdout-stderr-output-of-a-child-process-correctly)

* * *

对于想要将标准输出重定向到 Win32 应用程序中的控制台窗口的任何人，都有 **[AllocConsole](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681944%28v=vs.85%29.aspx)**。

我什至创建了一个简单的（微不足道的）函数来将标准输出重定向到控制台窗口：

```
#include <fstream>
#include <io.h>
#include <fcntl.h>

#define cMaxConsoleLines 500

void ReadyConsole() {

    short int hConHandle;
    long lStdHandle;

    CONSOLE_SCREEN_BUFFER_INFO coninfo;

    FILE *fp;

    // Allocate a console for the program
    AllocConsole();

    // set the screen buffer to be big enough to let us scroll text
    GetConsoleScreenBufferInfo(GetStdHandle(STD_OUTPUT_HANDLE), &coninfo);

    coninfo.dwSize.Y = cMaxConsoleLines; // The max number of lines for the console!

    SetConsoleScreenBufferSize(GetStdHandle(STD_OUTPUT_HANDLE), coninfo.dwSize);

    // Redirect STDOUT to the console
    lStdHandle = (long)GetStdHandle(STD_OUTPUT_HANDLE);
    hConHandle = _open_osfhandle(lStdHandle, _O_TEXT);

    fp = _fdopen(hConHandle, "w");  // Writing to the console

    *stdout = *fp;

    setvbuf(stdout, NULL, _IONBF, 0);
    // -------------------------------

    // Redirect STDIN to the console
    lStdHandle = (long)GetStdHandle(STD_INPUT_HANDLE);
    hConHandle = _open_osfhandle(lStdHandle, _O_TEXT);

    fp = _fdopen(hConHandle, "r");  // Reading from the console

    *stdin = *fp;

    setvbuf(stdin, NULL, _IONBF, 0);
    // ------------------------------

    // Redirect STDERR to the console
    lStdHandle = (long)GetStdHandle(STD_ERROR_HANDLE);
    hConHandle = _open_osfhandle(lStdHandle, _O_TEXT);

    fp = _fdopen(hConHandle, "w");  // STDERR writing to the console!

    *stderr = *fp;

    setvbuf(stderr, NULL, _IONBF, 0);
    // ------------------------------

    // Point the console to STDIO
    std::ios::sync_with_stdio();

} 
```

如果您希望控制台仅用于调试，请确保包含`<crtdbg.h>`，它定义应用程序是否处于调试模式（对于 VC++），然后，例如，您可以添加：

```
#ifdef _DEBUG
// The file with the ReadyConsole function
#include <DebugStuff.h>
#endif 
```

并使用它

```
#ifdef _DEBUG
ReadyConsole(); // Ready the console for debugging
#endif

#ifdef _DEBUG
fprintf(stdout, "Position, Line 1, DEBUG-INFO-HERE");
cout << "COUT is working!"; // NOTE, for cout, you will need <iostream>
#endif 
```

这是一个额外的小功能（它将消息记录到 stderr**和**stderr.log 文件）

```
void StdErr(char* Error) {

    fprintf(stderr, Error);
    FILE* FP = fopen("stderr.log", "a");
    fputs(Error, FP);
    fclose(FP);

} 
```

# xml - 尝试设置 sublime-keymap，收到“尝试解析文件时出错”消息

> ID：15046504
> 
> 赞同：0
> 
> 时间：2013-02-23T22:30:50.900
> 
> 标签：xml, json, sublimetext2

在此页面上：[http://www.sublimetext.com/docs/key-bindings](http://www.sublimetext.com/docs/key-bindings)它说 sublime-keymap 文件是 XML 文件，并且可以使用该语法进行配置。但是，打开`Default (OSX).sublime-keymap`文件，我只看到以下内容：

```
[
] 
```

这表明这不是 XML，实际上是 JSON。此外，从上述页面复制并粘贴以下行：

```
<binding key="ctrl+t,u" command="upperCase"/>
<binding key="ctrl+t,l" command="lowerCase"/> 
```

然后保存文件，我得到一个错误：

```
Error trying to parse file: Unexpected trailing characters in ~/Library/Application Support/Sublime Text 2/Packages/User/Default (OSX).sublime-keymap:2:1 
```

所以我猜，事实上，sublime-keymap 设置不是 XML，而是 JSON。所以也许文档已经过时了？无论如何，我怎样才能设置一个像我上面输入的命令？我想要一个将所有选定文本转换为大写的命令。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:13:56.960

ST2 中有一个内置的快捷方式 - Ctrl+K,Ctrl+U（快速按 Ctrl+K，然后按 Ctrl+U），这样您就可以省去定义新键盘映射的麻烦。正如@d_rail 所指出的，您可以通过查看 Preferences->Key Bindings->Default 来验证这一点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T22:42:40.217

打开默认键盘映射以查看正确的绑定格式：*Preferences -> Key bindings - Default*：

```
[
  { "keys": ["ctrl+t","u"], "command": "upper_case" },
  { "keys": ["ctrl+t","l"], "command": "lower_case" }
] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T22:44:12.650

是的，该页面似乎已过时。[非官方文档](http://docs.sublimetext.info/en/latest/customization/key_bindings.html)提供的信息要多得多（另请参见[此处](http://docs.sublimetext.info/en/latest/reference/key_bindings.html)）：

```
[
    { "keys": ["ctrl+shift+n"], "command": "new_window" },
    { "keys": ["ctrl+o"], "command": "prompt_open_file" }
] 
```

所以很明显如何写你需要的东西：

```
[
    { "keys": ["ctrl+t","u"], "command": "uppercase" },
    { "keys": ["ctrl+t","l"], "command": "lowercase" }
] 
```

# visual-c++ - 枚举进程（）

> ID：15046505
> 
> 赞同：1
> 
> 时间：2013-02-23T22:31:01.587
> 
> 标签：visual-c++

我编写了一个基本代码（通过 VC++）来通过 Psapi 中的 EnumProcesses() 检索进程列表。我以管理员模式打开 VS2012。在调试过程中，代码成功检索了所有进程句柄。当我构建进程时，它无法将进程句柄作为独立应用程序获取；大多数进程句柄返回 NULL 值。我试图将链接器中的“UAC执行级别”设置为requireAdministrator；但没有任何改变。有什么建议吗？

```
DWORD proc_id[1024];    // array for process id's
DWORD ret_bytes;        // number of bytes returned from EnumProcesses()
FILE *proc_file;        // to store the process list

// Get list of process id's
if ( !EnumProcesses( proc_id, sizeof(proc_id), &ret_bytes ) )
{
    printf("Can not execute EnumProcesses()...\n");
    system("pause");
    return;
}
printf("Retriving process id list...\n");
// Calculate how many process identifiers were returned.
DWORD number_of_proc;   // number of processes
number_of_proc = ret_bytes / sizeof(DWORD);
printf("%u working processes found...\n",number_of_proc);

// Read all the process' names

proc_file=fopen("process.txt","w");
for (unsigned int i=0;i<number_of_proc;i++)
{
    if (proc_id[i]!=0) // if the id is not empty
    {
        TCHAR proc_name[MAX_PATH] = TEXT("<unknown>"); // array for storing name of process
        TCHAR file_name[MAX_PATH] = TEXT("<unknown>"); // array for executable of process
        HANDLE proc_handle = OpenProcess(PROCESS_ALL_ACCESS , false, proc_id[i]);   // open the process
        if(proc_handle==NULL) fprintf(proc_file,"%3u - NULL HANDLE (PID: %u) err %u\n\n",i,proc_id[i],GetLastError());
        HMODULE hMod;
        DWORD cbNeeded;
        if(EnumProcessModulesEx( proc_handle, &hMod, sizeof(HMODULE),&cbNeeded,LIST_MODULES_ALL))
        {
            GetModuleBaseName( proc_handle, hMod, proc_name,sizeof(proc_name)/sizeof(TCHAR) ); // Get the name of the process
            /*_tprintf( TEXT("%3u - %s  (PID: %u)\n"),i, proc_name,proc_id[i] );*/
            fprintf(proc_file,("%3u - %s  (PID: %u)\n"),i, proc_name,proc_id[i]);
            //GetProcessImageFileName(proc_handle,file_name,sizeof(file_name)/sizeof(TCHAR));
            DWORD size=sizeof(file_name)/sizeof(TCHAR);
            QueryFullProcessImageName(proc_handle,0,file_name,&size);   // Get the name of the image base file
            //_tprintf( TEXT("%s\n"),file_name );
            fprintf(proc_file,("\t%s\n"),file_name);
        }
        else
            if(proc_handle!=NULL)
                fprintf(proc_file,"%3u - EnumProcessModules() not working... (PID: %u) err %u\n",i,proc_id[i],GetLastError());
        //QueryFullProcessImageName(proc_handle,1,proc_name,sizeof(proc_name)/sizeof(TCHAR));
        //GetProcessImageFileName(proc_handle,proc_name,sizeof(proc_name)/sizeof(TCHAR));

    }
}
fclose(proc_file); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T05:27:30.767

要在没有权限时获取 PROCESS_ALL_ACCESS，请调用您的 SeDebugPrivilege 权限参考 [如何使用 SeDebugPrivilege 获取任何进程句柄](http://support.microsoft.com/kb/185215)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T21:39:17.037

感谢建议，我能够解决问题。以下是信息的工作代码

```
DWORD proc_id[1024];    // array for process id's
DWORD ret_bytes;        // number of bytes returned from EnumProcesses()
FILE *proc_file;        // to store the process list
HANDLE hProcess;        // handle for current process
HANDLE hToken;          // handle for token result
LUID Luid;              // local unique identifier
TOKEN_PRIVILEGES TP;    // token priviliges
TOKEN_PRIVILEGES TPprev;
DWORD cbprev;

hProcess = GetCurrentProcess();  // Get handle for current process
DWORD lResult = OpenProcessToken(hProcess, TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY , &hToken); // Open process token for current process
if (lResult==0){
    printf("Cannot open process token: %x\n",lResult);
    system("pause");
    return;}
else{
    printf("Open process token: %x\n",hToken);
}

// Grab the LUID for the request privilege.
lResult = LookupPrivilegeValue(NULL, SE_DEBUG_NAME, &Luid);
if (lResult==0){
    printf("Cannot open look up priv. value: %x\n",lResult);
    system("pause");
    return;}
else{
    printf("Priv. look up succesfull: %x\n",Luid);
}

cbprev=sizeof(TP);
TP.PrivilegeCount=1;
TP.Privileges[0].Luid = Luid;
TP.Privileges[0].Attributes = 0;
lResult = AdjustTokenPrivileges(hToken, FALSE, &TP, sizeof(TP), &TPprev, &cbprev );
if (lResult==0){
    printf("Cannot retrieve privilege: %x (error:%u)\n",lResult,GetLastError());
    system("pause");
    return;}
else{
    printf("Privilege retrieved succesfully\n");
}
// Adjust the token privilege
TPprev.PrivilegeCount=1;
TPprev.Privileges[0].Luid=Luid;
TPprev.Privileges[0].Attributes=2;  //SE_PRIVILEGE_ENABLED
lResult = AdjustTokenPrivileges(hToken, FALSE, &TPprev, sizeof(TP), &TP, &cbprev);
if (lResult==0){
    printf("Cannot adjust privilege: %x (error:%u)\n",lResult,GetLastError());
    system("pause");
    return;}
else{
    printf("Privilege adjusted succesfully\n");
}
// Get list of process id's
if ( !EnumProcesses( proc_id, sizeof(proc_id), &ret_bytes ) )
{
    printf("Can not execute EnumProcesses()...\n");
    system("pause");
    return;
}
printf("Retriving process id list...\n");
// Calculate how many process identifiers were returned.
DWORD number_of_proc;   // number of processes
number_of_proc = ret_bytes / sizeof(DWORD);
printf("%u working processes found...\n",number_of_proc);

// Read all the process' names

proc_file=fopen("process.txt","w");
for (unsigned int i=0;i<number_of_proc;i++)
{
    if (proc_id[i]!=0) // if the id is not empty
    {
        TCHAR proc_name[MAX_PATH] = TEXT("<unknown>"); // array for storing name of process
        TCHAR file_name[MAX_PATH] = TEXT("<unknown>"); // array for executable of process
        HANDLE proc_handle = OpenProcess(PROCESS_ALL_ACCESS , false, proc_id[i]);   // open the process
        if(proc_handle==NULL) fprintf(proc_file,"%3u - NULL HANDLE (PID: %u) err %u\n\n",i,proc_id[i],GetLastError());
        HMODULE hMod;
        DWORD cbNeeded;
        if(EnumProcessModulesEx( proc_handle, &hMod, sizeof(HMODULE),&cbNeeded,LIST_MODULES_ALL))
        {
            GetModuleBaseName( proc_handle, hMod, proc_name,sizeof(proc_name)/sizeof(TCHAR) ); // Get the name of the process
            fprintf(proc_file,("%3u - %s  (PID: %u)\n"),i, proc_name,proc_id[i]);
            DWORD size=sizeof(file_name)/sizeof(TCHAR);
            QueryFullProcessImageName(proc_handle,0,file_name,&size);   // Get the name of the image base file
            fprintf(proc_file,("\t%s\n"),file_name);
        }
        else
            if(proc_handle!=NULL)
                fprintf(proc_file,"%3u - EnumProcessModules() not working... (PID: %u) err %u\n",i,proc_id[i],GetLastError());

    }
}
fclose(proc_file); 
```

# javascript - 处理 HTML5 位置的最佳 JQuery 插件是什么？

> ID：15046508
> 
> 赞同：0
> 
> 时间：2013-02-23T22:31:24.310
> 
> 标签：javascript, jquery, html, geospatial

我想获得浏览器的纬度/经度。

我知道 HTML5 有这个功能，但我想要一个完整的插件来优雅地处理旧浏览器。

有可靠的插件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T23:02:25.410

你真的需要一个插件来做这么简单的事情吗？

```
if (navigator.geolocation) {
   navigator.geolocation.getCurrentPosition(successFunction, errorFunction);
}else{
   errorFunction();
}

function successFunction(position) { //uses HTML5 if available
    var lat = position.coords.latitude;
    var lng = position.coords.longitude;
}

function errorFunction(){ //uses IP if no HTML5
   $.getJSON("http://freegeoip.net/json/", function(res){
        var lat = res.latitude;
        var lng = res.longitude;
   });
} 
```

[**小提琴**](http://jsfiddle.net/xcP9K/1/)

这将检查是否支持 HTML5 地理定位 API，如果支持，则获取坐标，如果不支持，或者 HTML5 地理 API 出于某种原因失败，它使用免费的 geoIP 服务来获取坐标。

# hadoop - Hadoop：从节点未启动

> ID：15046509
> 
> 赞同：2
> 
> 时间：2013-02-23T22:31:27.927
> 
> 标签：hadoop

我正在尝试在我的机器上设置一个伪分布式 Hadoop 集群。环境详细信息：主机操作系统：Windows 来宾操作系统：Ubuntu

*   vm 的创建了一个 master 和一个 slave。
*   我能够在单节点集群上成功运行 hadoop wordcount
*   但是当我尝试添加从属节点时，数据节点、作业跟踪器、名称节点和辅助名称节点在主节点中启动正常，但从节点中没有数据节点启动。
    *   我可以 ping 从站并使用来自我的主站的 ssh 登录到从站。
    *   /etc/host 文件包含两个 vm 中的正确条目
    *   我正在使用 NAT 和仅主机适配器来获取 VM 的静态 ip

* * *

主节点 = zenda1

从节点 = Zenda

* * *

**核心站点.xml**

```
<configuration>
<property>
    <name>hadoop.tmp.dir</name>
    <value>/tmp</value>
</property>
<property>
     <name>fs.default.name</name>
     <value>hdfs://zenda1:9000</value>
</property> 
```

**mapred-site.xml**

```
 <configuration>
       <property>
               <name>mapred.job.tracker</name>
               <value>zenda1:9001</value>
       </property>
 </configuration> 
```

**hdfs-site.xml**

```
 <configuration>
    <property>
      <name>dfs.replication</name>
      <value>2</value>
    </property>
  </configuration> 
```

**掌握**

```
 zenda1 
```

**奴隶**

```
 zenda1
  Zenda 
```

hadoop 文件夹位于我的主节点和从节点中的差异位置（文件夹位置）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T07:12:23.513

我找到了解决方案：slave机器中的数据节点dint start，因为我的master和slave中hadoop home的位置不同。当我将从节点的 hadoop home 复制到桌面时（这就是我的主节点的 hadoop home 所在的位置）。它开始工作正常。

# jquery - 如何保留“输入” 页面刷新时，还是停止页面刷新？

> ID：15046512
> 
> 赞同：1
> 
> 时间：2013-02-23T22:32:06.113
> 
> 标签：jquery, html, css, forms, input

我有一个“输入”类型的元素。当我在“输入”字段中按下输入时，有什么方法可以停止页面提交和刷新？如果没有，我可以让输入内容仍然存在吗？

我的 jquery 代码中已经有了这个：

```
 event.preventDefault(); 
```

但它不会阻止输入字段内容的重置

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T22:33:41.837

你可以这样做：

```
$(YOUR_FORM_SELECTOR).find('input').keypress(function(e){
    if ( e.which === 13 )
    {
        return false;
    }
}); 
```

这将忽略表单中所有输入元素的所有输入。如果您希望它仅对一个输入元素生效，请仅在该输入元素上设置按键处理程序。

# php - 网页的php标题

> ID：15046519
> 
> 赞同：-1
> 
> 时间：2013-02-23T22:33:16.543
> 
> 标签：php, web

我的 header.php 上有这段代码。它用于即时创建标题。问题是它只在用户在 article.php（阅读文章的页面）上时创建标题，但在其他页面上产生“未定义变量 i”错误。我应该改变什么或者谁知道更好的网页标题代码？我是身份证。

```
 if(isset($i=$_GET['i']) && $i = true ) {  
$i=$_GET['i'];
$tbl_name="yote";
$sql=mysql_query("SELECT * FROM $tbl_name WHERE i='$i'") or die(mysql_error());
while($rows=mysql_fetch_array($sql)){
$title = $rows['title']. "";
}
mysql_close();   

   } else { 

         $title = 'Malloooo - News, Reviews, Analysis and Market Watch From Around The World';     
                 } 
?>

<!-- Header
================================================== -->
<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>
<!-- Basic Page Needs
 ================================================== -->
<meta charset="utf-8">
<title><?php echo $title; ?></title> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:40:13.820

老实说，您的代码有很多问题。

1.  `if (isset($i=$_GET['i']) ...`: 不知道你想用它做什么，但它是无效的。
2.  `... && $i = true)`：这是设置一个值，而不是检查它。
3.  您非常容易受到 SQL 注入的攻击。查看 PDO： http: [//php.net/PDO](http://php.net/PDO)

# mysql - MySQL加入3个表并计算另一个

> ID：15046522
> 
> 赞同：1
> 
> 时间：2013-02-23T22:33:34.177
> 
> 标签：mysql, sql

我正在制作一个博客，其中包含可以带有标签和评论的文章。我想尝试获得正确的 SQL 来获得一个查询。我有 4 张桌子：

```
article
+------------+-----------------+------------+
| article_id | title           | photo      |
+------------+-----------------+------------+
|          1 | This is a test  | image1.jpg |
|          2 | Another Article | image2.jpg |
+------------+-----------------+------------+

article_tag
+------------+--------+ 
| article_id | tag_id |
+------------+--------+
|          1 |      1 | 
|          1 |      2 | 
|          2 |      2 |
+------------+--------+

tags
+--------+------+ 
| tag_id | name |
+--------+------+ 
|      1 | tag1 |
|      2 | tag2 |
+--------+------+

comment
+------+---------+------------+
| name | message | article_id |
+------+---------+------------+
|    1 | hello   |          1 |
|    2 | a       |          2 |
+------+---------+------------+ 
```

我试图得到这个：

```
+------------+----------------+------------+---------+----------+
| article_id | title          | photo      | tag_ids | comments |
+------------+----------------+------------+---------+----------+
|          1 | This is a test | image1.jpg | 1,2     |        1 |
+------------+----------------+------------+---------+----------+ 
```

这是我到目前为止所拥有的：

```
SELECT a.article_id, a.title, a.photo, a.date, a.description_long, a.author, GROUP_CONCAT(tag_id) as `tag_ids`, COUNT(c.comment_id) as comments
FROM article as a
JOIN article_tag as at
ON a.article_id = at.article_id
LEFT JOIN comment as c
ON a.article_id = c.article_id
WHERE a.article_id = 1 
```

但是我收到的评论是 2 而不是 1？谢谢 PS 如果有人知道一种方法，我可以将 tag_ids 从 1,2 更改为 tag1,tag2 那就太棒了:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:41:31.560

标签和评论是独立的。因此，如果您有三个标签和两个评论，那么您将获得 6 行的组合。

在 MySQL 中修复此查询的最简单方法是执行 group by 并在 select 中使用 distinct：

```
SELECT a.article_id, a.title, a.photo, a.date, a.description_long, a.author,
       GROUP_CONCAT(distinct tag_id) as `tag_ids`, COUNT(distinct c.comment_id) as comments
FROM article a JOIN
     article_tag as at
     ON a.article_id = at.article_id LEFT JOIN
     comment c
     ON a.article_id = c.article_id
WHERE a.article_id = 1
group by a.article_id 
```

不过，我会说，修复查询的“正确”方法是修复连接。这使用中的子查询`from`：

```
from . . .
     (select article_id, group_concat(tag_id) as tags
      from tags
      group by article_id
     ) at
     . . .
     (select article_id, count(*) as numComments
      from comments
      group by article_id
     ) c
     . . . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T23:07:43.007

这是因为标签不止1个，所以生成了2行。

试试 COUNT(DISTINCT c.comment_id)。这只会计算不同的评论 ID，因此重复的评论不会被计算两次。

要获取标签名称，请与标签表进行左连接。然后 GROUP_CONCAT 使用 name 列，而不是 tag_id 列。

应该是这样的：

```
SELECT a.article_id, a.title, a.photo, a.date, a.description_long, a.author, GROUP_CONCAT(d.name) AS `tag_names`, COUNT( DISTINCT c.comment_id ) AS comments
FROM article as a
JOIN article_tag as at
ON a.article_id = at.article_id
LEFT JOIN comment as c
ON a.article_id = c.article_id
LEFT JOIN tags d ON at.tag_id = d.tag_id
WHERE a.article_id = 1 
```

# mysql - mysql - 查询数据库的费用和债务

> ID：15046526
> 
> 赞同：0
> 
> 时间：2013-02-23T22:34:15.537
> 
> 标签：mysql

关于下面的示例表，并牢记以下定义，

*   start、end 和 timestamp 都是 unix 时间戳
*   定义：duration = ((end - start)/3600)，即以小时为单位

我想得到以下mysql查询：

1.  按学生分组并计算每个学生花费的所有金钱 -​​ 即（持续时间 x 成本）

这就是我得到的，它有效，但不完整！

```
SELECT student, SUM(ceil(cost*(end-start)/3600)) 作为费用
从时间表按学生分组；
```

AND（这个不起作用，但这个想法实际上是我想要达到的）

```
SELECT student, SUM(SELECT ceil(cost*(end-start)/3600) FROM schedules WHEREpaid = 1) AS 费用，SUM(SELECT ceil(cost*(end-start)/3600) FROM schedules WHEREpaid = 0)作为学生按计划分组的债务；

```

我最大的问题是计算从今天到过去的费用以及债务，如果今天的日期大于开始并且支付仍然设置为 0

谢谢大家的想法！

样品表

```
id meta_id start end admin 学生导师 课程费用 支付 paydate 时间戳
18 4 1359867600 1359867690 jnc 班琼卡梅伦 2 90 1 1361521193 1359881165
19 4 1360472400 1360472490 jnc 班琼卡梅伦 2 90 1 1361521195 1359881165
20 4 1359867600 1359867690 jnc saadcore 卡梅隆 2 90 1 1361547064 1359881165
25 6 1359914400 1359919800 jnc 约翰多·卡梅伦 3 35 1 1361547080 1359893058
26 6 1360000800 1360006200 jnc 约翰多·卡梅伦 3 35 0 0 1359893058
27 6 1360087200 1360092600 jnc 约翰多·卡梅伦 3 35 0 0 1359893058

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:13:08.993

我得到了想要的解决方案

```
SELECT 
student, 
SUM(CASE WHEN paid = 1 AND FROM_UNIXTIME(start) <= now() THEN ceil(cost*(end-start)/3600) 
         ELSE 0 END) as expenses, 
SUM(CASE WHEN paid = 0 AND FROM_UNIXTIME(start) <= now() THEN ceil(cost*(end-start)/3600) 
         ELSE 0 END) as debts 
FROM schedules 
GROUP BY student; 
```

# javascript - 触发通过 swfobject 的 embedSWF 嵌入的 flash 对象函数？

> ID：15046537
> 
> 赞同：0
> 
> 时间：2013-02-23T22:35:21.490
> 
> 标签：javascript, jquery, flash, actionscript-2, swfobject

我已经查看了我能找到的所有资源，以创建一种简化的方法，但每次尝试时都会遇到一个基本错误。我根本无法让它工作！

这是我电影第一个关键帧中的 Flash 测试动作脚本：

```
import flash.external.*; //THIS...

System.security.allowDomain("http://localhost", "*"); //...AND THIS ALSO REQUIRED!

if (ExternalInterface.available) {
    trace("ExternalInterface= " + ExternalInterface.available);
    flash.external.ExternalInterface.addCallback("myExternalMethod", null, myFunction);
}

function myFunction() {
    gotoAndStop(2);
} 
```

这是我的 javascript/一点点 jQuery：

```
<script type="text/javascript">
    var flashvars = {};
    var params = {
        wmode: "transparent", 
        allowscriptaccess: "always"
    };

    var attributes = { //The addition of these attributes make it work!
        id: "number-input",
        name: "number-input"
    };

    var embedHandler = function (e){
        mySWF = e.ref;
    };

    swfobject.embedSWF("images/flash-form.swf", "number-input", "800", "320", "9.0.0", "expressInstall.swf", flashvars, params, attributes, embedHandler);

    function executeFlash() {
        getObjectById("number-input").myExternalMethod(); 
    }

    function getObjectById(objectIdStr) {
        var r = null;
        var o = document.getElementById(objectIdStr);
        if (o && o.nodeName == "OBJECT") {
            if (typeof o.SetVariable != undefined) {
                r = o;
            } else {
                var n = o.getElementsByTagName(OBJECT)[0];
                if (n) {
                    r = n;
                }
            }
        }
        return r;
    }

    $(function() {
        $('#main-button-big').click(function(event){
            event.preventDefault();
            executeFlash();
        });

    });
</script> 
```

闪光灯似乎嵌入成功，如果我做一些愚蠢的事情......

```
$(mySWF).hide(); 
```

...它隐藏了，所以我确信脚本可以看到该对象。

无论我尝试使用什么方法，我总是（在 firefox 中测试）收到如下错误：

错误：TypeError：mySWF.myExternalMethod 不是函数。

在野生动物园：

TypeError: 'undefined' 不是函数（评估 'mySWF.myExternalMethod()'）

如果我尝试 getElementById 的 jQuery 版本（环绕 embedHandler），我会得到：

错误：TypeError: $(...).myExternalMethod 不是函数。或 TypeError: 'undefined' is not a function (评估 '$('#number-plate-input').myExternalMethod()')

我需要快速完成这个项目，并且我已经走到了尽头。任何帮助将不胜感激。

更新：请注意 embedHandler 不再需要，也不再用于触发任何类型的任何事件。不过，这是一段有用的代码，所以我选择将其保留。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T02:33:59.663

`attributes`将 javascript 中的变量从空对象更改为：

```
var attributes = {
  id: "flash_movie",
  name: "flash_movie"
}; 
```

然后你应该能够使用以下方法调用暴露的函数：

```
document.getElementById("flash_movie").myExternalMethod(); 
```

# javascript - 默认 JavaScript 值

> ID：15046538
> 
> 赞同：-1
> 
> 时间：2013-02-23T22:35:22.097
> 
> 标签：javascript

在本页面...

[http://www.utahrails.net/utahrails/bamberger_show-hide.php](http://www.utahrails.net/utahrails/bamberger_show-hide.php)

...我希望“内容”框默认为展开状态，或者与单击“显示”相同。然后，用户可以根据需要“隐藏”它。我需要在此脚本中进行哪些更改？

```
<script language="javascript" type="text/javascript">
function showHide(shID) {
   if (document.getElementById(shID)) {
      if (document.getElementById(shID+'-show').style.display != 'none') {
         document.getElementById(shID+'-show').style.display = 'none';
         document.getElementById(shID).style.display = 'block';
      }
      else {
         document.getElementById(shID+'-show').style.display = 'inline';
         document.getElementById(shID).style.display = 'none';
      }
   }
}
</script> 
```

我的目的是模仿维基百科。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:46:32.987

首先将您的代码更改为此

```
function showHide(shID) {
    var element = document.getElementById(shID);
    if (element) {
      if (element.style.display != 'none') {
        element.style.display = 'none';
        element.style.display = 'block';
      }
     else {
         element.style.display = 'inline';
         element.style.display = 'none';
      }
   }
} 
```

缓存变量查找，否则你查找同一个id的次数太多了，另外还节省了你写的代码量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T22:39:04.640

在 css 文件中

```
utahrails.css on line 1196 
```

你需要改变

```
display:none 
```

至

```
display:block 
```

# php - 找不到对象！在此服务器上找不到请求的 URL。本地主机

> ID：15046543
> 
> 赞同：2
> 
> 时间：2013-02-23T22:36:06.340
> 
> 标签：php, localhost, http-status-code-404

我有一个典型的 A、M、P 设置，我只是在我的 localhost 服务器上进行一些测试以设置网页。我对 php 和动态网站有点陌生，所以我有点糊涂了。所以我在这里陷入了僵局。每当我尝试在浏览器中查看页面并单击链接时，我都会收到此错误：

**找不到对象！在此服务器上找不到请求的 URL。引用页面上的链接似乎是错误的或过时的。请将该错误通知该页面的作者。如果您认为这是服务器错误，请联系网站管理员。错误 404 localhost Apache/2.4.3 (Win32) OpenSSL/1.0.1c PHP/5.4.7**

```
my url looks like this: http://localhost/test/content/home 
```

这是我的 index.php 页面和 nav.php 页面的代码

第一个 index.php

```
<?php
include('Config/setup.php');
?>
<?php
if(isset($_GET['page']) && $_GET['page'] == !'') {
    $pg = $_GET['page'];
} else {
    $pg = 'home';
}
#var_dump($pg);
#exit;
?>

<!DOCTYPE HTML>
<html>
<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">

    <title>FTS</title>
    <link href="css/Styles.css" rel="stylesheet" type="text/css">
</head>

<body>
<div class="header temp_Block">
    <?php include('templates/header.php');?>
</div>

<div class="main_nav temp_Block">
    <?php include('templates/main_nav.php');?>
</div>

<div class="main_Content temp_Block">
    <?php include('Content/'.$pg.'.php');?>
</div>

<div class="footer temp_Block">
    <?php include('templates/footer.php');?>
</div>
</body>
</html> 
```

这是我的 nav.php

```
<?php include('Config/setup.php')?>

 <a href="/test/content/home">home</a>
 <a href="/test/content/freestuff">free stuff</a>
 <a href="/test/content/aboutus">about us</a>
 <a href="/test/content/services">services</a>
 <a href="/test/content/Whatwedobetter">What we do better</a> 
```

我认为这可能是权限问题，因为 /content/home.php 位于 xxamp/htdocs/test 的子文件夹中。但我不完全确定。我可以在我拥有的托管站点上对此进行测试，但 404 错误让我认为这可能与 localhost 相关，而不是我的代码。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-07-18T10:08:19.810

大多数此类错误是由于在您的 wordpress 根目录中缺少一个 .htaccess 文件造成的，但是为了检查这一点，请直接联系永久链接结构并尝试更改您的永久链接并点击保存，一旦您发现相同的错误您应该直接在 wordpress 根目录下创建一个 .htaccess 文件并将其第一个权限设置为 777 ，然后刷新您的站点并单击保存更改永久链接，一旦您的站点继续按预期正常运行，您应该立即恢复到您的.htaccess 并将其更改为 644 以保护您的网站，我相信这发生在大多数 wordpress 永久链接设置中，希望它对遇到此类问题的任何人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-31T05:30:52.083

您没有以正确的方式指定您的项目。

*   所以运行你的`XAMPP control panel`然后启动`apache`和`MySQL`
*   然后注意端口。
*   例如 PORT 80：然后你输入你的浏览器 url`localhost:80\`按回车现在你的 php 基本配置页面是可见的。
*   然后创建任何文件夹`xampp\htdocs\YourFloderName` 然后创建php文件然后保存并转到浏览器然后键入它`localhost\YourFolderName`现在它列出了文件单击文件并运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-20T11:52:19.333

写入文件配置

```
$config['base_url'] = 'http://localhost:8000/test/content/home/'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T22:41:07.290

该`Config/setup.php`文件实际上是在`/test/content/home/`还是在您的文档根目录中？最好使所有引用都相对于您的文档根目录。

```
include $_SERVER['DOCUMENT_ROOT'] . "Config/setup.php"; 
```

您当前的代码假定的位置`setup.php`是 in `/text/content/home/Config/setup.php`，这是正确的吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-23T23:16:45.110

首先检查你的 php 错误报告告诉你什么。并在 index.php 的 biginning 处定义应用程序范围的根

```
define ('APPROOT', realpath(dirname(__FILE__))); 
```

然后用它来包含你的文件

```
include(APPROOT.'templates/header.php'); 
```

等等......你有你.htaccess重写规则吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-19T14:57:17.813

如果您在***反应前端***从**表单**中删除**方法遇到此问题**

 **```
<form method="POST">
...rest of your code
</form> 
```

至

```
<form>
...rest of your code
</form> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-16T18:28:28.423

我发现的一件事是，保存 php/html 文件的文件夹不能与承载项目的 HTDOCS 中的文件夹同名。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-04T12:19:28.640

我也有同样的错误，但使用 codeigniter 应用程序。我变了

*   我在 config.php 中的基本 URL 到我的本地主机路径

*   在 htaccess 中，我更改了 RewriteBase /"my folder name in htdocs"

    我能够登录到我的应用程序。

希望它可能会有所帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-04-17T15:22:00.267

只是我的项目不在 htdocs 中，这就是为什么它向我显示此错误的原因 请确保您将项目放在 HTdocs 中而不是在其中的目录中

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2013-02-23T23:06:43.823

如果您正在访问的页面是 index.php，那么您的 url 应该看起来像

```
http://localhost/test/content/home/ OR http://localhost/test/content/home/index.php

not the way you specified - http://localhost/test/content/home 
```**

# haskell - 大列表上单曲面折叠中的堆栈溢出

> ID：15046547
> 
> 赞同：5
> 
> 时间：2013-02-23T22:36:39.970
> 
> 标签：haskell, stack-overflow, monoids

首先一些`imports`，

```
import Control.Applicative
import Data.Traversable as T
import Data.Foldable as F
import Data.Monoid 
```

假设我有一个持有一对值的函子，

```
data Fret a = Fret a a deriving (Show)

instance Functor Fret where fmap f (Fret a b) = Fret (f a) (f b)

instance Applicative Fret where
    pure a = Fret a a
    Fret aa ab <*> Fret ba bb = Fret (aa ba) (ab bb)

instance Monoid a => Monoid (Fret a) where
    mempty = Fret mempty mempty
    a `mappend` b = mappend <$> a <*> b 
```

我有一个很大的清单，

```
frets = replicate 10000000 (Fret 1 2) 
```

我想计算一个，例如，一个平均值，

```
data Average a = Average !Int !a deriving (Read, Show)

instance Num a => Monoid (Average a) where
    mempty = Average 0 0
    Average n a `mappend` Average m b = Average (n+m) (a+b)

runAverage :: Fractional a => Average a -> a
runAverage (Average n a) = a / fromIntegral n

average = Average 1 
```

以下是一些可能的实现，

```
average1 = runAverage <$> foldMap (fmap average) frets

average2 = pure (runAverage . mconcat) <*> T.sequenceA (map (pure (Average 1) <*>) frets) 
```

不幸的是，所有这些都会导致堆栈溢出。

认为问题可能是过度懒惰`Foldable.foldMap`，我尝试实施更严格的变体，

```
foldMap' :: (F.Foldable f, Monoid m) => (a -> m) -> f a -> m
foldMap' f = F.foldl' (\m a->mappend m $! f a) mempty

average3 = runAverage <$> foldMap' (fmap average) frets 
```

不幸的是，这也溢出了。

如何在不损害该方法的简洁结构的情况下实现这一目标？

## 更新

如果我将字段`Fret`设为严格，事情似乎会按预期工作。检查这是否适用于更大的应用程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T23:21:51.993

看起来`foldMap`太懒了，而且你的`Fret`数据类型肯定是，导致典型的`foldl (+)`类型空间泄漏，你积累了大量的 thunk 试图将你的输入列表减少到平均水平。它类似于[list average 中的空间泄漏 tuples](https://stackoverflow.com/questions/1618838/laziness-and-tail-recursion-in-haskell-why-is-this-crashing)。

显然，你唯一循环中的累加器太懒了——你使用堆栈的唯一地方是`foldMap`

![在此处输入图像描述](../Images/f5a252ce74dc4c1a8cd67d43df833adf.png)

使用相同的解决方案 - 严格的对类型`Frets`和`foldl'`实现`foldMap`就足够了，它将在恒定空间中运行：

```
 foldMap' f = F.foldl' (\m -> mappend m . f) mempty 
```

和

```
 data Fret a = Fret !a !a 
```

![在此处输入图像描述](../Images/a6d95af052b9533c04c8b6133aed1ed5.png)

# c# - Switch 语句示例

> ID：15046553
> 
> 赞同：13
> 
> 时间：2013-02-23T22:37:31.217
> 
> 标签：c#, visual-studio-2012, switch-statement

如果这个文本框的总和是：PostDiscountTextBox.Text = $500.00，我们如何进行 Switch 语句说明如果折扣后成本金额介于 0.00 和 999.99 之间，则显示一个消息框，并显示消息“此金额符合 'A -100' 飞行常客里程”和“确定”按钮？

**有人会提供一个 switch 语句的例子吗？**

到目前为止我只有这个，我认为它根本没有遵循任何东西。有人会指导我完成这个吗？谢谢你。

```
 switch (PostDiscountCostTextBox.Text)
        {
            case (0.00 < && PostDiscountCostTextBox.Text <= 999.00) 
```

感谢所有提供帮助的人，但我试图弄清楚如何使用 switch 语句来评估基于一系列数值的折扣后成本（与 if 语句无关）。是的，会有很多案例，这将是我的前两个案例。有人会好心地为我提供一个例子，以便我可以填写其余的案例吗？我有很多。谢谢你。

如果折扣后成本金额**介于 0.00 和 999.99 之间**，则显示一个消息框，其中包含“此金额符合 'A-100' 飞行常客里程资格”的消息。和一个“确定”按钮。不应使用标题栏文本或图标。

如果折扣后成本金额**介于 1,000.00 和 1,499.99 之间**，则显示一个消息框，其中显示“此金额符合 'B-500' 飞行常客里程的条件”。和一个“确定”按钮。不应使用标题栏文本或图标。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-23T22:41:38.553

[`switch`](http://msdn.microsoft.com/en-us/library/06tc147t%28v=vs.71%29.aspx)C# 中不允许这种用法。

这是一个正确`switch`使用的例子

```
switch(n)       
{         
   case 1:   
      cost += 25;
      break;                  
   case 2:            
      cost += 25;
      break;           
   case 3:            
      cost += 50;
      break;         
   default:            
      Console.WriteLine("Invalid selection. Please select 1, 2, or 3.");            
      break;      
 } 
```

您的示例应转换为`if-elseif-else`语句：

```
if(first_case_predicate)
{

}
else if(another_predicate)
{

}
else
{
    // like 'default' of switch
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T22:40:17.330

您无法检查 中的范围`switch`，您应该使用`else if`. 请参阅[在 C# 中是否不可能在开关中使用小数范围？](https://stackoverflow.com/questions/2937154/is-using-decimal-ranges-in-a-switch-impossible-in-c)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T22:49:48.513

直接的方法是使用`if else`语句，因为该操作不允许范围检查`switch`。另一种棘手的方法是使用`Dictionaries`. 下面的代码片段是使用第二种方法的演示。

```
decimal myVal = decimal.Parse(PostDiscountCostTextBox.Text);

        var conditions = new Dictionary<Func<int, bool>, Action>
        { 
            { x => x > 0 && x <= 999 ,    () => Console.WriteLine("This amount qualifies for 'A-100' frequent flier miles.")   } ,
            { x => x > 999 ,   () => Console.WriteLine("Dummy!")  } ,
        };

        cases.First(kvp => kvp.Key(myNum)).Value(); 
```

不像这种`if else`方法那么容易，但需要进行测试。

# matlab - 选择最小化距离的像素

> ID：15046555
> 
> 赞同：0
> 
> 时间：2013-02-23T22:37:40.940
> 
> 标签：matlab, select, pixel, distance, minimize

假设我有以下两个矩阵：

```
>> x = [1 4 3; 6 4 3; 6 9 3; 2 4 3; 5 4 0; 5 3 1; 6 4 7];
>> y = [0 0 1; 1 1 0; 1 1 0; 0 1 1; 0.2 0.8 0.54; 1 1 1; 0 0 0]; 
```

您可以将其`x`视为某个图像，以及`y`某个感兴趣区域的每个元素的**隶属程度。**`x`

假设我将那些`x`具有隶属度 = 1 的元素设置为`1`( **core** )，其他元素设置`0`如下：

```
x = zeros(size(y));
x(y==1) = 1; 
```

在这种情况下，我将得到以下输出：

```
 0     0     1
     1     1     0
     1     1     0
     0     1     1
     0     0     0
     1     1     1
     0     0     0 
```

现在，对于 的元素`0`，我将它们的值替换`y`为相应位置的值，如下所示：

```
x(x==0)=y(x==0); 
```

现在，我选择那些被考虑但不在核心中的像素，`4-neighbours`如下`core`所示：

```
four_neighbourhood_pixels = imdilate(core, strel('diamond', 1)) - core; 
```

我的问题是：**我们如何选择一个`p`属于最小化&`four_neighbourhood_pixels`之间距离`x``core`**的像素？

假设对于距离，我计算如下：

```
pdist([x,core],'minkowski'); 
```

假设`x`在前面的命令中，将 替换为对应位置`zeros`的隶属度值后的矩阵？`y`

那么，我怎样才能选择属于最小化替换零`four_neighbourhood_pixels`之间的距离的像素 和？`x``core`

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T03:42:14.193

If I understand correctly, `core` is the following matrix:

```
 0     0     1
 1     1     0
 1     1     0
 0     1     1
 0     0     0
 1     1     1
 0     0     0 
```

First find the distance between `x` and `core`.

```
dist=pdist([x,core],'minkowski');
dist1=squareform(dist);
[row1,row2]=find(dist1==min(dist1(:)); %interpretation: you get the minimum distance  between row1 and row2 of [x core] 
```

Veify if my understanding is correct:

You want a pixel from x which minimizes the distance `dist` and it should belong to `four_neighbourhood_pixels`. This is the matrix `[x core]`

```
 1     4     3     0     0     1
 6     4     3     1     1     0
 6     9     3     1     1     0
 2     4     3     0     1     1
 5     4     0     0     0     0
 5     3     1     1     1     1
 6     4     7     0     0     0 
```

Suppose you get the minimum value between 2nd row and 3rd row. Now based on this tell us what you mean by "find a pixel which minimizes..."

# c - 无法交换节点的值

> ID：15046571
> 
> 赞同：0
> 
> 时间：2013-02-23T22:40:36.727
> 
> 标签：c

我正在尝试交换节点值。没有编译错误。我正在使用 Visual Basic 进行编程。如果有人能指出我哪里出错了。会有很大的帮助。

另外，我可以在我的代码中添加什么，所以交换任何值，无论是 char 还是 int。

```
#include <stdio.h>
#include <stdlib.h>

struct lnode {
    int data;
    struct lnode* next;
};

void swapNodes(struct lnode* n1, struct lnode* n2);

int main()
{
    struct lnode nodeA, nodeB;
    nodeA.data = 1;
    nodeB.data = 2;

    swapNodes(&nodeA, &nodeB);
    getchar();
    return 0;
}

void swapNodes(struct lnode* n1, struct lnode* n2)
{
    struct lnode* temp;
    temp = n1->next;
    n1->next = n2;
    n2->next = temp;
    printf("nodeA= %d  nodeB= %d",n1->data,n2->data);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:45:51.680

在 swapNodes() 函数中，您不应将 n1->next 分配给 temp；n1->next 不指向任何内容。

```
temp = n1->next;
n1->next = n2;
n2->next = temp; 
```

应该

```
temp = n1;
n1 = n2;
n2 = temp; 
```

lnode->next 对交换两个节点没有任何作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T22:48:12.557

在您的`swapNodes`函数中，您正在交换`next`值，看起来您打算交换数据值，如下所示：

```
void swapNodes(struct lnode* n1, struct lnode* n2)
{
    int temp = n1->data;
    n1->data = n2->data;
    n2->data = temp;
    printf("nodeA= %d  nodeB= %d",n1->data,n2->data);
} 
```

# php - 试图将表单中单选按钮的值发送到 php 变量。

> ID：15046572
> 
> 赞同：0
> 
> 时间：2013-02-23T22:40:37.647
> 
> 标签：php, forms, variables, radio-button

我尝试了以下代码，但我无法弄清楚我做错了什么。我知道我通过将表单分布在两个不同的 div 中来打破规则，但我不知道有任何其他方法。

```
<?php
echo '<form name="form" method="POST">';
$directory = '/var/www/admin/html/content';
$it = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($directory));
echo 'Files<br>';
while($it->valid()) {
    if(!$it->isDot()) {
        echo '<input type="radio" name="file_picked" value="content/' . $it->getSubPathName() . ' " id="file_picked" />' . $it->getSubPathName() . '</br>';
    }
    $it->next();
}

echo '<input type="submit" name="pickedName" value="Edit File" /></div>
<div class="editor">
<h1>SS Code Editor</h1>';

$file_picked = $_POST['file_picked'];
$edit_field  = $_POST['edit_field'];

if(isset($_POST['pickedName'])) {
    //get file contents and display in textarea box
    $theData = file_get_contents($file_picked);
    echo "<textarea name=\"edit_field\" id=\"edit_field\" cols=\"100\" rows=\"60\">";
    echo $theData;
    echo "</textarea><br />";
}

if(isset($_POST['submitChanges'])) {
    //grab new textarea contents and put into file.
    $theData = file_put_contents($file_picked, $edit_field);

    //redraw textarea with new contents
    $theData = file_get_contents($file_picked);
    echo "<textarea name=\"edit_field\" id=\"edit_field\" cols=\"100\" rows=\"60\">";
    echo $theData;
    echo "</textarea><br />";
}
?>
<input type="submit" name="submitChanges" value="Save">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:15:02.267

您在复选框输入值的末尾有一个额外的空间：

代替 ：

`value="content/' . $it->getSubPathName() . ' " id="...`

和 ：

`value="content/' . $it->getSubPathName() . '" id="...`

所以 file_get_contents($file_picked = $_POST['file_picked'])) 没有找到任何文件（末尾有空格）并返回 false，在 textarea 中显示为“”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T22:46:23.930

您的值应存储在 $_POST['file_picked']

# css - 过渡不适用于滚动条？

> ID：15046574
> 
> 赞同：3
> 
> 时间：2013-02-23T22:40:45.720
> 
> 标签：css, webkit, scrollbar

在 Webkit 浏览器中，可以使用 CSS 设置滚动条样式：

```
::-webkit-scrollbar-thumb {
    border-radius: 12px;
    background: #EEE;
    -webkit-transition: background .2s ease-in-out;
}
::-webkit-scrollbar-thumb:hover {
    background: #AAA;
} 
```

但是，当我将鼠标悬停在滚动条上时，它似乎`-webkit-transition`不适用。它应该表现得像这样还是[我的代码](http://jsfiddle.net/DerekL/t5r4r/)中有一些错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:24:03.637

伪选择器还没有实现 CSS3 过渡。

# cross-domain - 跨域难题

> ID：15046577
> 
> 赞同：0
> 
> 时间：2013-02-23T22:41:18.077
> 
> 标签：cross-domain, jsonp, same-origin-policy

我研究了互联网以解决以下跨域Web客户端情况，但没有运气：

加载了网站 A 的客户端浏览器想要直接从网站 B 下载网页流并将该流合并到其 DOM 中。

边界条件为：

1.  网站 B 的 webserver 没有针对以下方面的特殊策略：-跨域访问，-和/或特殊 jsonp 服务。
2.  我不想使用： - 我的网络服务器上的代理服务，或 - 使用第三个服务器，例如[http://anyorigin.com/](http://anyorigin.com/)，或 - 依赖于浏览器的特定扩展。
3.  我知道实际的浏览器不会处理与“SAMEORIGN”不同的“X-Frame-Options”

各位有什么可行的解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:50:04.800

恐怕您必须在服务器级别修补提要。但至少，您可以添加一个缓存，这样它就不会在每个请求中提取提要。

编辑：我假设你不想要 iframe

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T22:50:04.823

您是否有理由不在网站 b 的结果中使用 iframe？那是我尝试的第一件事...

# c++ - 如何在运行时决定将哪个派生类用作 C++ 中的私有类成员？

> ID：15046584
> 
> 赞同：2
> 
> 时间：2013-02-23T22:42:28.737
> 
> 标签：c++, class, inheritance, virtual

下面这个问题对我来说有点难以表述，但请耐心等待，如果我能帮助解决任何问题，请告诉我。

我正在为 3D 形状编写通用模拟。我正在使用一个基类：

```
class Shape{
    public:
    ...
        virtual double return_volume() =0;
    private:
        vector<double> coordinates;
    ...
}; 
```

现在，因为我不知道用户会选择什么形状，所以我从中派生了几个类。（例如：球体、立方体、四面体等）

到目前为止，一切都很好。主要问题在于我有一个 Controller 类，它启动并运行模拟。作为私有成员，它应该有多个形状的向量（都是同一类型。例如：15 个球体，或 10 个立方体等）

```
class SimulationControl{
    public:
        void runsimulation();
    private:
        vector<Shape> all_shapes;
    ...
}; 
```

我想用一个非默认构造函数简单地初始化这个私有成员。现在，在我知道自己做了什么之前，Eclipse 已经告诉我“'Shape' 类型必须实现继承的纯虚方法 'Shape::return_volume'”

我当然理解错误消息和我的错误，但我仍然不明白如何解决它。

我希望能够做的是将向量的类型保留为未定义，然后当我知道用户选择了哪种模拟类型时，只需在运行时使用正确的派生类通过构造函数创建它。

有没有可能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T22:51:17.150

**使用（智能）指针**。

您不能实例化抽象类，即使可以，也可能不是您想要的，因为您无法创建这些形状的*别名*。

您应该将您的`SimulationControl`类的定义更改为与此更相似的定义（假设您的形状在这里共享所有权 - 如果`SimulationControl`是您的形状的唯一所有者，而不是使用`unique_ptr`而不是`shared_ptr`）：

```
#include <memory>

class SimulationControl {
    public:
        void runsimulation();
    private:

        std::vector<std::shared_ptr<Shape>> all_shapes;
    ...
}; 
```

然后，您可以创建形状的实例并将它们添加到`all_shapes`集合中，如下所示（假设`MyShape`是一个具体的、默认可构造的类派生自`Shape`）：

```
std::shared_ptr<MyShape> pShape = std::make_shared<MyShape>();

pShape->set_vertices(...); // I guess the class will have a member function
                           // that allows setting the shape's vertices...

all_shapes.push_back(pShape); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T23:00:06.423

我不会跟风并建议在你的容器中使用指针，无论是聪明的还是愚蠢的。[这是使用PIMPL 成语](http://en.wikipedia.org/wiki/Pimpl_idiom)的绝佳机会。

这个想法是，该类只是实际实现的包装器，并在对其进行调用时调用指向另一个对象的指针。包装器中包含的指针可以是多态的，因此它可以实现它认为合适的功能。

```
class Shape{
    public:
        Shape() { pImpl = NULL; }
        Shape(const Shape& from) { pImpl = from.pImpl->clone(); }
        ~Shape() { delete pImpl; }
        Shape& operator=(const Shape& from) { pImpl = from.pImpl->clone(); }
    ...
        double return_volume() { return pImpl->return_volume(); }
    private:
        ShapeImpl * pImpl;
    ...
};

class ShapeImpl{
    public:
    ...
        virtual ShapeImpl* clone() const =0;
        virtual double return_volume() =0;
    private:
        vector<double> coordinates;
    ...
}; 
```

因为`Shape`该类包含一个指针，所以您需要实现[三规则](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)并创建析构函数、复制构造函数和`operator=`. 副本的默认值肯定会做错事——它们只会复制指针值，而不会创建 pimpl 对象的新副本来与它们一起使用。由于 a`vector`复制这些函数周围的元素肯定会被调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T22:51:06.337

您只能通过指针或引用进行多态性。尝试使用`vector<Shape*>`.

现在您正在使用指针，您必须为它们管理内存，但这是另一组问题。如果可以，请尝试使用智能指针，如果不能，请非常小心。如果您使用的是 C++11，`std::vector<std::unique_ptr<Shape>>`可能适合您。

# php - 在 CentOS 上安装 PhalconPHP

> ID：15046587
> 
> 赞同：3
> 
> 时间：2013-02-23T22:42:57.957
> 
> 标签：php, frameworks, installation, centos

你能告诉我如何在 CentOS 上安装 PhalconPHP 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T22:52:43.113

```
sudo yum install php5-dev php5-mysql gcc 

sudo yum install git-core

git clone git://github.com/phalcon/cphalcon.git   

cd cphalcon/build   

sudo ./install 
```

修复“phpize：找不到命令”

尝试：`yum -y install php-devel`然后再做`sudo ./install`一次。确保您仍在正确的目录中。

# haskell - 在 Gloss 中持久化绘制的帧

> ID：15046590
> 
> 赞同：0
> 
> 时间：2013-02-23T22:43:27.280
> 
> 标签：haskell, graphics, gloss

我一直在玩弄[Gloss](http://hackage.haskell.org/packages/archive/gloss/1.7.8.2/doc/html/Graphics-Gloss.html#t%3aDisplay)，感受一下，我真的很喜欢它！

不过，我遇到了一个问题，那就是我不确定如何将图纸保留超过一帧。我可以一次绘制一张图片，但我不知道如何将它们保留在屏幕上。我总是可以保留一张图片列表并显示它们，但这似乎效率很低，所以我想检查是否有更好的方法来做到这一点。我一直在浏览文档，但没有找到任何东西。

任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:49:29.200

除非 Gloss 在过去一年中显着增长，否则你不能。心智模型很简单，你有一些代码可以改变状态，每个时期你都有一些东西可以呈现新的状态。没有人说这是有效的，但这是作为一个教育图书馆开发的。

# javascript - 可调整大小的窗口+垂直分割器？

> ID：15046592
> 
> 赞同：1
> 
> 时间：2013-02-23T22:43:39.373
> 
> 标签：javascript, css, jquery-ui

我有一个使用 jQuery-UI 的可调整大小的窗口，但我想在窗口中的两个 div 之间有一个垂直拆分器，如此处的示例所示：http: [//methvin.com/splitter/vbasic.html](http://methvin.com/splitter/vbasic.html)

问题是库会相互冲突，并在调整窗口大小时给出奇怪的结果，对吧？有谁知道任何用于灵活、动态窗口大小的库？

# android - 动态创建按钮与通过 xml 文件创建按钮（静态）？

> ID：15046596
> 
> 赞同：0
> 
> 时间：2013-02-23T22:44:59.003
> 
> 标签：android

我是android编程的新手。我想知道哪个是创建按钮等 ui 元素的更好方法；在 layout.xml 中定义它们或在运行时通过 java 添加它们，例如：

```
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);

    LinearLayout ll = new LinearLayout(this);
    mRecordButton = new RecordButton(this);
    ll.addView(mRecordButton,
        new LinearLayout.LayoutParams(
            ViewGroup.LayoutParams.WRAP_CONTENT,
            ViewGroup.LayoutParams.WRAP_CONTENT,
            0)); 
```

有人能解释一下它的优缺点吗？

谢谢乌察夫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:49:22.937

如果您在代码中实现按钮，则布局的可视化要困难得多，因此很难维护。现在在极少数情况下，您可能需要在代码中执行此操作，但通常不建议这样做。此外，如果您在代码与 xml 文件中实现，本地化将变得更加困难。

# javascript - 使用 groupSVGElements 后如何选择子元素

> ID：15046602
> 
> 赞同：3
> 
> 时间：2013-02-23T22:46:22.767
> 
> 标签：javascript, canvas, fabricjs

我正在将 svg 加载到具有子元素的 Fabric 中。我正在使用 groupSVGElements() 对它们进行分组。

我需要能够选择每个子元素 - 这是一个允许我选择子对象的 onclick 事件。

我把这个小提琴放在一起[http://jsfiddle.net/AnQW5/2/](http://jsfiddle.net/AnQW5/2/)

虽然我可以通过 getObjects 列出该组的子对象，但我无法确定单击了哪个对象。所以 ：

```
 canvas.observe('object:selected', function(e) {
       console.log(e.target.getObjects());
       // ???
    }); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-15T22:28:06.723

您可以使用 canvas.add.apply 代替 groupSVGElements，因此您可以：让每个元素进行操作

```
var shapesSvg = '<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg version="1.1" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" width="320" height="240" viewBox="0 0 320 240"><rect id="rect" x="5" y="50" width="100" height="100" style="fill: rgb(255,0,0);"></rect> <circle id="circle" cx="165" cy="100" r="50" style="fill: rgb(0,255,0);"/></svg>';

var canvas = new fabric.Canvas('canvas');

canvas.setHeight($(window).height());
canvas.setWidth($(window).width());

fabric.loadSVGFromString(shapesSvg, function(objects, options) {
  canvas.add.apply(canvas, objects);
  canvas.renderAll();
});
```

```
html,
body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/1.5.0/fabric.min.js"></script>
<canvas id="canvas"></canvas>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-03T15:43:15.987

## 描述

以下代码通过颜色检测屏幕上的任何对象，而不是最好的想法。

## 代码

```
var $canvas = {
    activePaths: []
};

// Bind to `onMouseDown` event.
function onMouseDown = function (options) {

    var mousePos = canvas.getPointer(options.e);
    mousePos.x = parseInt(mousePos.x);
    mousePos.y = parseInt(mousePos.y);

    var width =  canvas.getWidth();
    var height = canvas.getHeight();

    var pixels = canvas.getContext().getImageData(0, 0, width, height);
    var pixel = (mousePos.x + mousePos.y * pixels.width) * 4;

    var activePathsColor = new fabric['Color']('rgb(' + pixels.data[pixel] + ',' + pixels.data[pixel + 1] + ',' + pixels.data[pixel + 2] + ')');
    var colorHex = '#' + activePathsColor.toHex().toLowerCase();

    var activeObject = canvas.getActiveObject();
    var activePath = [];

    // Check if active objects are type of `group`, if so push the selected path.
    if(activeObject.type == 'group') {

          for (var i = 0; i < activeObject.getObjects().length; i++) {
            var path = activeObject.getObjects()[i];
            if (path.getFill().toLowerCase() == colorHex) {
                $canvas.activePaths.push(path);
            }
        }

    }

} 
```

## 参考

活动： http: [//fabricjs.com/events/](http://fabricjs.com/events/)

# python - python gstreamer 播放多个视频流

> ID：15046605
> 
> 赞同：4
> 
> 时间：2013-02-23T22:46:39.547
> 
> 标签：python, stream, gstreamer

我正在参与一个艺术项目，其中包括远程播放视频。我已经使用 HTTP 服务器和 gstreamer 视频播放器实现了一个简单的 python 应用程序。我能够捕获一个 http 请求并更改当前正在播放的视频，但我只想在同一个窗口中添加新视频并继续同时播放两个视频。

我用playbin2播放视频，但我认为它当时只能播放一个uri。我试图找到可以同时播放多个视频的其他解决方案，但没有用......

任何人都可以发布一个同时播放多个流的简单示例，或者给我一些指向文档或其他资源的指针吗？

提前致谢！！

PS。这是我编写的代码： VideoPlayer 类初始化流，而 playCurrent 函数切换当前播放的视频 - 我希望该函数只是将新视频添加到流中。

```
#!/usr/bin/python

import threading
import time
import BaseHTTPServer
from BaseHTTPServer import HTTPServer
from urlparse import urlparse, parse_qs
from os import path
import gst
import gtk

HOST_NAME = 'localhost' # !!!REMEMBER TO CHANGE THIS!!!
PORT_NUMBER = 9000 # Maybe set this to 9000.

#################################################################
# VIDEO DICTIONARY
# Manages the video database
#################################################################

# VideoDictionary class
#################################################################
# This class allows to access the video database
# used by the video player - for best performance, it's a native
# python dictionary
class VideoDictionary():

    # declaring filenames
    filename = path.join(path.dirname(path.abspath(__file__)), 'large.mp4')
    filename_02 = path.join(path.dirname(path.abspath(__file__)), '01.avi')

    # declaring uris
    uri = 'file://' + filename
    uri_02 = 'file://' + filename_02

    # combining it all into a dictionary
    videoDict = {}
    videoDict["01"] = uri
    videoDict["02"] = uri_02

    # setting the current video
    currentVideo = "01"

#################################################################
# VIDEO DICTIONARY END
#################################################################

#################################################################
# VIDEO PLAYER
# Manages all the video playing
#################################################################

# VideoPlayer class
#################################################################
# This class initializes the GST pipe context and it
# handles different events related to video stream playing
class VideoPlayer(object, VideoDictionary):

    VideoDictionary = ""

    def __init__(self, VideoDictionary):
        self.VideoDictionary = VideoDictionary        
        self.window = gtk.Window()
        self.window.connect('destroy', self.quit)
        self.window.set_default_size(1024, 768)

        self.drawingarea = gtk.DrawingArea()
        self.window.add(self.drawingarea)

        # Create GStreamer pipeline
        self.pipeline = gst.Pipeline()

        # Create bus to get events from GStreamer pipeline
        self.bus = self.pipeline.get_bus()

        # This is needed to make the video output in our DrawingArea:
        self.bus.enable_sync_message_emission()
        self.bus.connect('sync-message::element', self.on_sync_message)

        # Create GStreamer elements
        self.playbin = gst.element_factory_make('playbin2')

        # Add playbin2 to the pipeline
        self.pipeline.add(self.playbin)
        self.window.show_all()
        self.xid = self.drawingarea.window.xid
        print('DEBUG INFO: player initialization finished')

    def playCurrent(self):
        print('DEBUG INFO: getting running video ')
        print(self.VideoDictionary.currentVideo)
        self.pipeline.set_state(gst.STATE_READY)
        self.playbin.set_property('uri', self.VideoDictionary.videoDict[self.VideoDictionary.currentVideo])
        self.pipeline.set_state(gst.STATE_PLAYING)

    def quit(self, window):
        print('DEBUG INFO: quitting player')
        self.pipeline.set_state(gst.STATE_NULL)
        gtk.main_quit()

    def on_sync_message(self, bus, msg):
        if msg.structure.get_name() == 'prepare-xwindow-id':
            msg.src.set_property('force-aspect-ratio', True)
            msg.src.set_xwindow_id(self.xid)

    def on_eos(self, bus, msg):
        print('DEBUG INFO: EOS detected')
        print('on_eos(): seeking to start of video')
        self.pipeline.seek_simple(
            gst.FORMAT_TIME,        
            gst.SEEK_FLAG_FLUSH | gst.SEEK_FLAG_KEY_UNIT,
            0L
        )

    def on_error(self, bus, msg):
        print('DEBUG INFO: error detected')
        print('on_error():', msg.parse_error())

#################################################################
# VIDEO PLAYER END
#################################################################

#################################################################
# HTTP SERVER
# implements the http listener in a separate thread
# the listener plays the videos depending on the 
# received parameters in the GET request 
#################################################################

# HttpHandler class
#################################################################
# uses global variables to operate videos
class HttpHandler(BaseHTTPServer.BaseHTTPRequestHandler):

    def do_GET(self):
        # initialize the currently played video
        global VideoDictionary
        print('DEBUG INFO: GET running playCurrent')
        if VideoDictionary.currentVideo == "01":
            VideoDictionary.currentVideo = "02"
        else:
            VideoDictionary.currentVideo = "01"

        # play the video we have just set        
        global player
        player.playCurrent()        

# HttpThread class
#################################################################
# initializes the http listener in a separate thread
class HttpThread (threading.Thread):

    def __init__(self):
        threading.Thread.__init__(self)

    def run(self):
        gtk.gdk.threads_enter()
        server_class = BaseHTTPServer.HTTPServer
        httpd = server_class((HOST_NAME, PORT_NUMBER), HttpHandler)
        print time.asctime(), "Server Starts - %s:%s" % (HOST_NAME, PORT_NUMBER)
        try:
            httpd.serve_forever()
        except KeyboardInterrupt:
            pass
        httpd.server_close()
        print time.asctime(), "Server Stops - %s:%s" % (HOST_NAME, PORT_NUMBER)
        gtk.gdk.threads_leave()
        return

#################################################################
# HTTP SERVER END
#################################################################

if __name__ == '__main__':
    VideoDictionary = VideoDictionary()
    player = VideoPlayer(VideoDictionary)
    gtk.gdk.threads_init()
    thread2 = HttpThread()
    thread2.run()
    gtk.gdk.threads_enter()
    gtk.main()
    gtk.gdk.threads_leave() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-17T10:48:30.153

这是一个同时播放多个视频流的简单代码示例。

它适用于 Python 2 和 3，并使用标准的 Python GUI (Tk) 和 Gstreamer 1.0。因此它应该是可移植的，但我只在 Ubuntu 16.04 下测试过它。

（ffmpeg fork libav 在 Ubuntu 14.04 下产生了问题，在 16.04 下似乎可以解决。注意除了 gstreamer1.0-plugins-* 之外，还需要包 gstreamer1.0-libav。）

该代码被配置为在一列中创建八个帧，并将 Gstreamer 播放器与每个帧相关联。您需要提供一个（最多八个）有效本地视频文件名列表作为您保存它的文件（例如 multivid.py）的参数，如下所示：

```
$ python3 multivid.py video1.webm video2.mp4 
```

声道只是简单地混合在一起。你可能想改变这一点。

我的解决方案没有解决远程播放问题，但您已经解决了这部分问题。

[我之前在 tkinter 中关于视频文件的](https://stackoverflow.com/questions/7227162/way-to-play-video-files-in-tkinter)另一个问题的答案中发布了相同的代码，该问题没有要求同时流。因此这里更合适。

```
import sys
import os

if sys.version_info[0] < 3:
    import Tkinter as tkinter
else:
    import tkinter

import gi
gi.require_version('Gst', '1.0')
from gi.repository import Gst, GObject

# Needed for set_window_handle():
gi.require_version('GstVideo', '1.0')
from gi.repository import GstVideo

def set_frame_handle(bus, message, frame_id):
    if not message.get_structure() is None:
        if message.get_structure().get_name() == 'prepare-window-handle':
            display_frame = message.src
            display_frame.set_property('force-aspect-ratio', True)
            display_frame.set_window_handle(frame_id)

NUMBER_OF_FRAMES = 8 # with more frames than arguments, videos are repeated
relative_height = 1 / float(NUMBER_OF_FRAMES)

# Only argument number checked, not validity.
number_of_file_names_given = len(sys.argv) - 1
if number_of_file_names_given < 1:
    print('Give at least one video file name.')
    sys.exit()
if number_of_file_names_given < NUMBER_OF_FRAMES:
    print('Up to', NUMBER_OF_FRAMES, 'video file names can be given.')
file_names = list()
for index in range(number_of_file_names_given):
    file_names.append(sys.argv[index + 1])

window = tkinter.Tk()
window.title("Multiple videos in a column using Tk and GStreamer 1.0")
window.geometry('480x960')

Gst.init(None)
GObject.threads_init()

for number in range(NUMBER_OF_FRAMES):
    display_frame = tkinter.Frame(window, bg='')
    relative_y = number * relative_height
    display_frame.place(relx = 0, rely = relative_y,
            anchor = tkinter.NW, relwidth = 1, relheight = relative_height)
    frame_id = display_frame.winfo_id()

    player = Gst.ElementFactory.make('playbin', None)
    fullname = os.path.abspath(file_names[number % len(file_names)])
    player.set_property('uri', 'file://%s' % fullname)
    player.set_state(Gst.State.PLAYING)

    bus = player.get_bus()
    bus.enable_sync_message_emission()
    bus.connect('sync-message::element', set_frame_handle, frame_id)

window.mainloop() 
```

如果您将句柄保存到播放器（例如在 player_list 中），您可以稍后更改它在其中一个播放器中播放的 uri，如下所示：

```
player_list[index].set_state(Gst.State.NULL)
player_list[index].set_property('uri', 'file://%s' % fileName)
player_list[index].set_state(Gst.State.PLAYING) 
```

# javascript - 试图理解 Prorotype 和 Lambda 函数中的“this”

> ID：15046606
> 
> 赞同：-1
> 
> 时间：2013-02-23T22:46:39.960
> 
> 标签：javascript, ajax, ecmascript-5

所以今天我正在编写一个 AJAX 对象。

我创建了一个*构造函数*ajaxObj：

```
 function ajaxObj( arg1, arg2, wrapper ) {
             this.form = arg1;
             this.btn  = arg2;
             this.msg  = "Update successful";

             this.url  = "process.php";
             this.wrap = wrapper; // this is the div the callback uses

             this.serial = null; // serialized form for POSTing

             this.callback = function () {
                  var div = document.createElement("div");
                  div.innerHTML = this.msg;
                  div.setAttribute( "id", "desiredID" );
                  this.wrap.appendChild(div);

             }

             this.btn.onclick = initXHR;
    } 
```

在给定页面上实例化了几个 ajaxObj 类型的对象。我想包含不会改变并且应该在原型上共享的功能：

```
ajaxObj.prototype = {
     constructor: ajaxObj,

     makeXHR: function () { 
               // cross browser XHR code returns XHR obj
     }

     makeSer: function () {
            this.serial = $(this.form).serialize();
     }

     initXHR: function () {
            // this is where shit gets weird!
            this.makeSer(); // makeSer function doesnt exit

            var http = this.makeXHR(); // makeXHR doesn't exist

            http.onreadystatechange = function () {
                     /* this function checked for 
                        http.status / http.readyState
                        and attempted to call this.callback() 
                        which of course didn't exist.

                        I also tried to change instance
                        properties here which did not work */
            }

            http.open( "POST", this.url, true ); /* this.url did not work
                                                     and had to be replaced
                                                     with "process.php"    */
            http.setRequestHeaders("Content-Type","application/x..."); // TL;DT
            http.send( this.serial ) // <--- this works just fine???
     } 
```

在过去的一周里，我查看了许多类似的问题，并为此付出了很多时间和考虑。我的代码现在可以工作了，**方法是从构造函数中取出回调，以及从原型中取出 makeXHR() 和 makeSer()**并将它们全部*放在全局范围内*。

尽管我的代码可以正常工作，但令我懊恼的是，我仍然不明白为什么**this.url**在**xhr.open()**中不起作用，而 this.serial在**xhr.send()中***起作用*

 *** * *

Bascally，为什么'this'在原型的某些地方有效（例如替换

```
ajaxObj.prototype = {
 .............
     initXHR: function () {
         makeSer();
      ....
      http.open( "POST", this.url, true );
      .... 
      http.send( this.serial );
      ....
} 
```

和

```
ajaxObj.prototype = {
     .............
         initXHR: function () {
             this.serial = $(this.form).serialize();
             ....
             http.open( "POST", "process.php", true );
             .... 
             http.send(this.serial);
    } 
```

....请不要让我迷惑。我的印象是我已经弄清楚了。当我使用 var 关键字时，在构造函数中设置 that=this 似乎不起作用，并且显然（对于 javascript，事情并不总是那么明显）删除等于值的 var 关键字集*是*用最新的对象实例实例化的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:58:45.327

只需浏览您的代码，我就可以看到您的 initXHR 函数仅在触发目标按钮的 onclick 时被调用。如果您在 initXHR 中检查**它**，我相信您会发现它是您的按钮。

我认为根据您当前的课程设计，您将需要使用旧的

```
var self = this; 
```

在您的构造函数中，并使您的 initXHR 成为特权函数（在您的构造函数中）以便访问它。我已经评论了下面的代码，以向您展示我添加到您的 ctor 中的内容。

```
function ajaxObj( arg1, arg2, wrapper ) {

     // Assign this -> self at the start of the func
     var self = this;

     this.form = arg1;
     this.btn  = arg2;
     this.msg  = "Update successful";

     this.url  = "process.php";
     this.wrap = wrapper;

     this.serial = null;

     this.callback = function () {
          var div = document.createElement("div");
          div.innerHTML = this.msg;
          div.setAttribute( "id", "desiredID" );
          this.wrap.appendChild(div);

     }

     // Make initXHR a privileged function, ie. one that has
     // access to private variables in ctor
     this.initXHR = function () {

         self.url // should be accessible here
     }

     this.btn.onclick = this.initXHR; // Assign it.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T22:59:42.660

看看[MDN 对`this`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)的介绍。可能您将函数称为“错误”，即不在`ajaxObj`实例上。向我们展示那个调用。

`this.serial`有效而无效的原因`this.url`是您之前只是明确地分配了`this.serial`- 尽管它可能不是您期望的对象的属性。**

# c# - TypeInfo 声明的属性中是否包含私有成员？

> ID：15046610
> 
> 赞同：4
> 
> 时间：2013-02-23T22:47:14.570
> 
> 标签：c#, .net, reflection, system.reflection

默认情况下，新`TypeInfo`类在其“DeclaredXXX”属性中是否包含私有成员？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T23:00:25.483

它返回私有和公共成员。但是，只有在该级别声明的成员，任何继承的成员等都不会返回。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-23T23:00:11.017

如果它是 a`Property`而不是 a`Field`它将显示私人成员`DeclaredProperties`

```
public class Test
{
    private string test; // will not be in DeclaredProperties
    private string test2 { get; set; } // will be in DeclaredProperties
    public int test3{ get; set; }  // will be in DeclaredProperties
}

var result = typeof(Test).GetTypeInfo().DeclaredProperties; 
```

# linux - 如何在远程本地网络计算机上编辑文件，但不在 Internet 上：

> ID：15046614
> 
> 赞同：0
> 
> 时间：2013-02-23T22:47:39.470
> 
> 标签：linux, sftp

我有一个 GPU 集群，我可以通过 ssh 进入中间计算机，然后 ssh 进入集群来访问它。（中间机和集群在同一个网络，但是集群没有联网）

我不喜欢使用 vim 之类的终端编辑器，并且还希望避免将文件复制到中间计算机然后再复制到集群上，因此我正在寻找一种方法来使用本地计算机上的 IDE 远程编辑集群上的文件.

如果我直接 ssh 进入集群，我可以使用 SFTP 编辑集群上的文件。

但是，有一个中间计算机。有没有什么办法可以使用 SFTP 或类似的技术来实现我的目标？

感谢您的帮助，如果我能更清楚，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:35:32.773

您正在寻找`cluster`通过 SSH 连接到您的 SFTP 连接`gateway`- 所以对于 SSH 隧道。在本地机器上使用

```
ssh gateway -L localPort:cluster:portToCluster -l user -p portToGateway 
```

打开 SSH 隧道到您的`cluster`. 对于 localPort，使用本地计算机上的任何空闲端口（例如 2222），portToCluster 是您通常用于从本地计算机连接到您`cluster`的`gateway`端口（标准端口是 22），portToGateway 是您用于`gateway`从本地计算机连接到您的端口。

现在您可以`cluster`简单地使用到 localhost:2222 的 SFTP 连接来访问

只要您希望使用此 SFTP 连接，您的 SSH 隧道就必须打开。所以保持你的 SSH 连接运行。

# java - SWT Tree 和 TreeItem：删除或更改展开/折叠指示器的绘制行为

> ID：15046620
> 
> 赞同：1
> 
> 时间：2013-02-23T22:48:16.727
> 
> 标签：java, macos, user-interface, drawing, swt

我正在使用 SWT（没有 JFace），并且正在尝试自定义使用侧边栏的 Tree 的行为。

树中的顶级项目不应该是可选择的；他们基本上是标题。只有这些项目的子项应该是可选择的。因此，我希望 UI 以表明这一点的方式运行；单击这些顶级项目之一应展开或折叠，但不应在指示器更改其状态和子项的可见性更改之外提供任何类型的视觉反馈。

问题似乎是在 OS X 上，展开/折叠指示器是一个三角形（不知道它是图像还是 unicode 字符），指向右侧或向下，但也根据“选择”状态着色. 我已经设法覆盖了顶级项目的所有相关行为，除了改变颜色的箭头。

*   我使用了一个`SWT.EraseItem`监听器来连接背景图，这样背景就不会改变颜色。这按预期工作。
*   我使用了一个`SWT.PaintItem`监听器来确保顶级项目中的文本不会改变颜色。这按预期工作，但似乎对指标没有任何影响；我什至尝试过*不*重置 GC 的前景色，但指示器的颜色仍然会发生变化：

**未选择**：

![未选中的](../Images/debdbef1bada9117551d0cbf80c573a9.png)

**已选中**

![精选和丑陋](../Images/a5809a32f27500e31f06b72974d35eae.png)

我尝试做的一些事情都失败了：

*   只需在指标顶部绘制一个矩形。无论我将 PaintListener 附加到什么，指示器似乎总是在顶部。

*   在选择事件类型上使用侦听器，检查是否`event.item`是顶级项目之一，然后摆弄事件位和重绘标志。这似乎根本不起作用。这种行为是完全不可预测的。代码看起来像这样：

    ```
    sideBar.addListener(SWT.Selection, new Listener()
    {
        @Override
        public void handleEvent(Event event)
        {
            TreeItem eventItem = (TreeItem) event.item;

            if(sideBarRoots.contains(event.item))
            {
                event.detail = 0;
                event.type = 0;
                event.doit = false;
                sideBar.setRedraw(false);
            }
            else
            {
                sideBar.setRedraw(true);
                event.type = SWT.Selection;
                event.doit = true;
            }
        }
    }); 
    ```

    由于重绘标志只是一个提示，因此有时它会正确设置，而其他情况则不会。它可以没有任何效果，也可以锁定在侧边栏中没有重绘的状态。

我知道很多这种行为与底层本机小部件的行为高度耦合，但我想知道是否有任何方法可以在不从头开始滚动自定义小部件的情况下获得我正在寻找的行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T06:33:04.680

我认为在您的情况下，理想情况下您应该不允许在树头上进行选择。

您可以取消选择事件，方法是不允许它可点击。但这可能是一个有点笨拙的实现，尤其是对于键导航。

如果可能的话，更安全的方法是在选择树父节点时移动选择。因此，如果通过键盘或鼠标选择了父节点，它应该像这样工作：展开节点并将选择移动到第一个子节点。

这样，您可以避免所有隐藏选择状态的绘画技巧。

# java - 仅在 Spring Application 上使用 Hibernate 删除和升级表行时出现问题

> ID：15046622
> 
> 赞同：-1
> 
> 时间：2013-02-23T22:48:20.037
> 
> 标签：java, spring, hibernate, spring-mvc

我在春季领域很新。我正在尝试开发一个实现 CRUD 操作的简单 DAO 对象，但我在执行**删除**和**更新**操作时遇到了一些问题。

我可以查询数据库以正确获取特定对象和所有对象的列表，并在我的表中创建新记录，但如果我尝试删除或更新记录，这不会做任何事情。

这是我的 Person 类的代码，它表示要在数据库中持久保存的对象：

```
package org.andrea.myexample.HibernateOnSpring.entity;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="person")
public class Person {

@Id
@GeneratedValue(strategy=GenerationType.AUTO)
private int pid;

private String firstname;

private String lastname;

public int getPid() {
    return pid;
}

public void setPid(int pid) {
    this.pid = pid;
}

public String getFirstname() {
    return firstname;
}

public void setFirstname(String firstname) {
    this.firstname = firstname;
}

public String getLastname() {
    return lastname;
}

public void setLastname(String lastname) {
    this.lastname = lastname;
}
} 
```

这是我实现 CRUD 方法的 DAO 类：

```
package org.andrea.myexample.HibernateOnSpring.dao;

import java.util.List;

import org.andrea.myexample.HibernateOnSpring.entity.Person;
import org.hibernate.Criteria;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.springframework.transaction.annotation.Transactional;

public class PersonDAOImpl implements PersonDAO {

private SessionFactory sessionFactory;

public void setSessionFactory(SessionFactory sessionFactory) {
    this.sessionFactory = sessionFactory;
}

// Metodo che inserisce un nuovo record nella tabella person
@Transactional(readOnly = false)
public void addPerson(Person p) {
    Session session = sessionFactory.openSession();
    session.save(p);
    session.close();
}

/*
 * Metodo che recupera un record, rappresentante una persona, avente uno
 * specifico id dalla tabella.
 * 
 * @param L'id univoco della persona
 */

public Person getById(int id) {
    Session session = sessionFactory.openSession();
    try {
        return (Person) session.get(Person.class, id);
    } finally {
        session.close();
    }
}

/*
 * Metodo che recupera la lista di tutti le persone rappresentanti dalle
 * righe della tabella person
 */
@SuppressWarnings("unchecked")
public List<Person> getPersonsList() {

    Session session = sessionFactory.openSession();
    try {

        Criteria criteria = session.createCriteria(Person.class);
        return criteria.list();

    } finally {
        session.close();
    }

}

/*
 * Metodo che elimina dalla tabella person la riga avente uno specifico id
 * 
 * @param l'id della persona da eliminare dalla tabella person
 */
@Transactional
public void delete(int id) {

    Session session = sessionFactory.openSession();
    try {
        Person personToDelete = getById(id);
        System.out.println("person to delete: " + personToDelete);
        session.delete(personToDelete);

    } finally {
        session.close();
    }

}

@Transactional
public void update(Person person){

    Session session = sessionFactory.openSession();

    try {
        System.out.println("UPDATING");
        session.merge(person);

    } finally {
        session.close();
    }

}

} 
```

我创建了以下主类来测试行为：

```
package org.andrea.myexample.HibernateOnSpring;

import java.util.List;

import org.andrea.myexample.HibernateOnSpring.dao.PersonDAO;
import org.andrea.myexample.HibernateOnSpring.dao.PersonDAOImpl;
import org.andrea.myexample.HibernateOnSpring.entity.Person;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class App {

public static void main( String[] args ){

    ApplicationContext context = new ClassPathXmlApplicationContext("Beans.xml");
    System.out.println("Contesto recuperato: " + context);

    Person persona1 = new Person();

    persona1.setFirstname("Pippo");
    persona1.setLastname("Blabla");
    //persona1.setPid(1);

    System.out.println("Creato persona1: " + persona1);

    PersonDAO dao = (PersonDAO) context.getBean("personDAOImpl");

    System.out.println("Creato dao object: " + dao);

    dao.addPerson(persona1);

    System.out.println("persona1 salvata nel database");

    Person personaEstratta = dao.getById(persona1.getPid());

    System.out.println("Persona con id: " + personaEstratta.getPid() + " estratta dal DB");
    System.out.println("Dati persona estratta:");
    System.out.println("Nome: " + personaEstratta.getFirstname());
    System.out.println("Cognome: " + personaEstratta.getLastname());

    System.out.println("");

    // STAMPA LA LISTA DELLE PERSONE NELLA TABELL person:
    List<Person> listaPersone = dao.getPersonsList();
    System.out.println("Lista delle persone recuperata: " + listaPersone );

    // MOSTRA I DATI DI TUTTE LE PERSONE NELLA LISTA:
    for(int i=0; i<listaPersone.size(); i++){
        Person currentPerson = listaPersone.get(i);
        System.out.println("id: " + currentPerson.getPid()
                            + " nome: " + currentPerson.getFirstname()
                            + " cognome: " + currentPerson.getLastname());  
    }

    // ELIMINAZIONE DI UNA PERSONA DALLA TABELLA person:
    System.out.println("");
    System.out.println("ELIMINAZIONE DI UNA PERSONA DALLA TABELLA person:");

    // ELIMINA TUTTI I RECORD DALLA TABELLA persone:
    for(int i=0; i<listaPersone.size(); i++){
        dao.delete(listaPersone.get(i).getPid());
        System.out.println("Persona con id: " + i + " eliminata");
    }

    listaPersone = dao.getPersonsList();    // Lista vuota

    // MOSTRA I DATI DI TUTTE LE PERSONE NELLA LISTA:
    for(int i=0; i<listaPersone.size(); i++){
        Person currentPerson = listaPersone.get(i);
        System.out.println("id: " + currentPerson.getPid()
                                  + " nome: " + currentPerson.getFirstname()
                                  + " cognome: " + currentPerson.getLastname());    
    }

    Person personUpdate = new Person();
    personUpdate.setPid(1);
    personUpdate.setFirstname("TEST");
    personUpdate.setLastname("TEST");

    System.out.println("UPDATE");

    dao.update(personUpdate);
}
} 
```

正如我之前所说：我的问题是，如果我尝试在数据库中插入一条新记录，并且如果我尝试获取具有特定 ID 的特定对象或所有记录的列表，则效果也很好

但是，如果我尝试删除记录或更新特定记录，请不要什么都不做！！！不要抛出异常，但在表中从未改变......为什么？

我认为这可能取决于在我已实现的任何 CRUD 方法中打开新会话的过程，但我对此完全不确定......

你能帮助我吗？

谢谢，

安德烈亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T06:22:45.157

嗨@AndreaNobili 也许你写错了代码。你可以尝试这样的事情：

1.创建一个`Person`DTO

**删除**

```
...
try {
   Criteria criteria = session.createCriteria(Person.class);
   criteria.add(Restrictions.eq("id", personDTO.getId()));
   session.delete(personDTO);
} catch(Exception e) { ... } 
```

2.按id查询删除申请

**更新**

```
try {
   Person personDB = (Person) session.get(Person.class, personDTO.getId());
   personDB.setName(personDTO.getName());
   personDB.setUser(personDTO.getUser());

   session.saveOrUpdate(personDB);
} catch(Exception e) { ... } 
```

3.通过id查询更新申请

你可以把`@Transactional`方法DAO接口。

**希望论文有帮助:)**

# php - 将 smtp 添加到现有 mail.php 的简单方法

> ID：15046630
> 
> 赞同：0
> 
> 时间：2013-02-23T22:49:38.040
> 
> 标签：php, email, smtp

我有一个现有的 email.PHP，它根据我网站中的某些功能发送电子邮件，类似于论坛通知。

然而，发送它们非常成功，两天后效果很好，然后就停止了。

我的问题是有没有一种简单的方法可以将 smtp 指令添加到现有脚本中，以便它使用 Gmail 而不是 PHP mail()

如果需要，我可以提供当前脚本。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:56:39.710

您需要安装 PEAR Mail。然后你可以这样做。

```
<?php

       require_once "Mail.php";

        $from = "<from@gmail.com>";
        $to = "<to@yahoo.com>";
        $subject = "Hi!";
        $body = "Hi,\n\nHow are you?";

        $host = "ssl://smtp.gmail.com";
        $port = "465";
        $username = "myaccount@gmail.com";  //<> give errors
        $password = "password";

        $headers = array ('From' => $from,
          'To' => $to,
          'Subject' => $subject);
        $smtp = Mail::factory('smtp',
          array ('host' => $host,
            'port' => $port,
            'auth' => true,
            'username' => $username,
            'password' => $password));

        $mail = $smtp->send($to, $headers, $body);

        if (PEAR::isError($mail)) {
          echo("<p>" . $mail->getMessage() . "</p>");
         } else {
          echo("<p>Message successfully sent!</p>");
         }

    ?> 
```

# java - Spring MVC 配置抛出奇怪的异常

> ID：15046635
> 
> 赞同：1
> 
> 时间：2013-02-23T22:50:10.247
> 
> 标签：java, spring, model-view-controller, tomcat, servlets

我正在尝试部署一个新的 Spring MVC 应用程序，我已经做了十几次，但现在我遇到了一个非常奇怪的错误，甚至无法弄清楚发生了什么：

1.  我的 javaee-api 与 servlet-api 冲突。在控制台中它写道：

    ```
     INFO: validateJarFile(E:\development\workspace\conference\src\main\webapp\WEB-    INF\lib\javaee-api-6.0.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2.
       Offending class: javax/servlet/Servlet.class 
    ```

嗯，是的，这是一个警告，但是这个 jar 没有加载，我需要它。此外，我的应用程序库等中没有 servlet-api jar。

1.  此外，控制台会抛出这样的异常：

    ```
     SEVERE: Error configuring application listener of class com.sun.faces.config.ConfigureListener
     java.lang.ClassNotFoundException: com.sun.faces.config.ConfigureListener 
    ```

我的意思是，这个 jar 是指 JSF 和所有这些东西。我根本没有使用它，它应该在哪里尝试获得这样的课程？o_o

我在 tomcat 7 上运行应用程序

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T22:57:53.023

jar 文件的问题是 Tomcat 的类加载器验证所有类，它加载到 JVM。在您的情况下，它面临来自 servlets API 的类 - `javax.servlet.Servlet`。你的应用程序代码**不能**在里面包含这样的类`WEB-INF/lib`。这些类与 servlet 容器本身一起提供。如果您使用 maven，只需将范围更改`javax.servlet:servlet-api`为`provided`.

修复此问题后，尝试重新加载整个应用程序，因为可能会发生类加载器完全阻塞`javaee-api-6.0.jar`，不允许从中加载任何其他类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:05:50.213

您可以通过在其依赖项中`javaee-api-6.0.jar`设置范围来从 webapps 的 WEB-INF/lib 目录中删除该文件。`provided`

规范指的是 Servlet 容器（这里是 Tomcat）将提供 Java EE 规范的实现类。具有特定于应用程序的实现是规范/Tomcat 不允许的稳定性和安全性问题。

谢谢！

# c++ - 为什么我的编辑控件忽略了应用的视觉样式？

> ID：15046637
> 
> 赞同：0
> 
> 时间：2013-02-23T22:50:15.933
> 
> 标签：c++, windows, winapi, atl

我有一个窗口，上面有几个控件，但只有编辑控件忽略了视觉样式。我试图追查原因，但到目前为止还没有运气。这是它的样子：

![编辑控件具有旧的 3D 样式](../Images/d5c82e74b0a0e31c859bd107b9f4e883.png)

正如所见，按钮和列表框控件具有正确的视觉风格。但是，编辑控件不会。几天前，我在更改了一堆与它无关的代码后应用了正确的样式，所以我知道这是可能*的*。

注意事项：

*   我试过打电话`InitCommonControls`但`InitCommonControlsEx`没有成功。
*   我将 WS_EX_CLIENTEDGE 应用于编辑控件，并且*始终*打开扩展样式，即使它之前工作也是如此。

我已经包含了尽可能多的代码来帮助追踪这个问题。

从我的 TextBox 类（继承 Component）：

```
protected:

virtual void OnRegistering(CreationParameters& createParams)
{
    // this is passed in as the lpClassName parameter in 
    // CreateWindowEx() and the lpszClassName parameter in WNDCLASSEX
    createParams.BaseClassName = WC_EDIT;

    // passed as the dwStyle parameter in CreateWindowEx()
    createParams.WindowStyles |= ES_AUTOHSCROLL | ES_AUTOVSCROLL; 

    // passed as the dwExStyle parameter in CreateWindowEx()
    createParams.WindowExStyles |= WS_EX_CLIENTEDGE;
} 
```

处理 WM_CTLCOLOREDIT 或 WM_ERASEBKGND 消息的问题与此有关吗？还是处理字体的问题？**或者是其他东西？**因为在这一点上我 100% 没有想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T02:57:26.843

问题是我用来为编辑控件着色的 HBRUSH 莫名其妙地从未初始化过，并且是`NULL`. 因为我知道其他人对此有疑问，所以这是*我的*解决方案。

当 WM_CTLCOLOREDIT 到达消息队列时，问题就显现出来了。**如果在该消息到达时返回了不正确/不正确的 HBRUSH，则编辑控件将恢复为旧的视觉样式。**由于我的 HBRUSH 是`NULL`，所以旧的视觉风格被应用于编辑控件。

# amazon-web-services - Amazon EC2 弹性 IP 是否会改变？

> ID：15046642
> 
> 赞同：1
> 
> 时间：2013-02-23T22:50:57.293
> 
> 标签：amazon-web-services, amazon-ec2

如果我为我的 Amazon EC2 实例保留一个弹性 IP，只要我付费，我是否可以拥有相同的 IP 地址？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T22:52:30.417

是的，你得到它，直到你释放它。

弹性部分意味着您可以将它弹性地关联到您的任何 ec2 实例，您可以在实例之间随意切换。

当它与正在运行的实例相关联时，您实际上并没有为此付费。

# c# - 如何将 C++ 数据导出到 C# 结构？

> ID：15046648
> 
> 赞同：4
> 
> 时间：2013-02-23T22:51:21.103
> 
> 标签：c#, c++, marshalling, dllexport

我正在努力将 C++ 结构数据导出到 C#。

假设我有以下表示 3 个浮点向量的结构：

```
// C++
struct fvec3
{
public:
    float x, y, z;
    fvec3(float x, float y, float z) : x(x), y(y), z(z) { }
};

// C#
[StructLayout(LayoutKind.Sequential)]
struct fvec3
{
    public float x, y, z;

    public fvec3(float x, float y, float z)
    {
        this.x = x;
        this.y = y;
        this.z = z;
    }
} 
```

现在，如果我想使用`fvec3`从 C# 到 C++，我可以毫无问题地使用以下内容：

```
// C++
__declspec(dllexport) void Import(fvec3 vector)
{
    std::cout << vector.x << " " << vector.y << " " << vector.z;
}

// C#
[DllImport("example.dll", CallingConvention = CallingConvention.Cdecl)]
public static extern void Import(fvec3 vector);

...

Import(new fvec3(1, 2, 3)); // Prints "1 2 3". 
```

现在的问题是做相反的事情：将 C++ 返回`fvec3`到 C#。我怎样才能做到这一点？我已经看到许多 C# 实现使用类似这样的东西：

```
// C#
[DllImport("example.dll", CallingConvention = CallingConvention.Cdecl)]
public static extern void Export(out fvec3 vector);

...

fvec3 vector;
Export(out vector); // vector contains the value given by C++ 
```

**但是如何编写 C++`Export`函数呢？**

我尝试了所有我能想到的签名和正文：

```
// Signatures: 
__declspec(dllexport) void Export(fvec3 vector)
__declspec(dllexport) void Export(fvec3* vector)
__declspec(dllexport) void Export(fvec3& vector)

// Bodies (with the pointer variants)
vector = fvec3(1, 2, 3);
memcpy(&fvec3(1, 2, 3), &vector, sizeof(fvec3));
*vector = new fvec(1, 2, 3); 
```

其中一些没有效果，一些返回垃圾值，还有一些导致崩溃。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T22:59:34.970

`ref`和`out`参数通常与指针参数匹配。

试试这个：

```
__declspec(dllexport) void Export(fvec3 *vector)
{
    *vector = fvec3(1, 2, 3);
} 
```

*（未经测试）*

* * *

或者，您应该能够简单地`fvec3`从您的函数中返回 a ：

```
// C++
__declspec(dllexport) fvec3 Export(void)
{
    return fvec3(1, 2, 3);
}

// C#
[DllImport("example.dll", CallingConvention = CallingConvention.Cdecl)]
public static extern fvec3 Export();

...

fvec3 vector = Export(); 
```

*（未经测试）*

# php - 第三方 Web 服务调用的单元测试绕过

> ID：15046649
> 
> 赞同：0
> 
> 时间：2013-02-23T22:51:33.513
> 
> 标签：php, unit-testing, symfony

我正在为使用 Symfony2 构建的 REST API 编写函数单元测试。REST API 的一部分针对第三方 Web 服务检查 HTTP 基本身份验证。

这对单元测试提出了一些挑战，因为我无法为第三方 Web 服务创建临时用户。

我可以硬编码凭据，但我正在考虑另一种方法。如果环境是，在某些使第三方 API 调用短路的逻辑中硬编码是不好的做法`test`吗？有没有更好的方法来做这样的事情？我确信其他应用程序也面临这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T23:07:40.353

最佳做法是：

*   在新类中隔离针对第 3 方 WS 的身份验证
*   为您的测试模拟该课程
*   使用[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)，以便您的单元测试可以使用您的模拟

# java - 如何将列乘以ListView，Android中的数字

> ID：15046650
> 
> 赞同：1
> 
> 时间：2013-02-23T22:51:42.410
> 
> 标签：java, android, listview

我从数据库中选择数据。一列的数据，你必须转换成公斤，我需要乘以一列的因子。列`sets_weight`中的数据以磅为单位，必须以公斤为单位显示，无需修改到数据库如何正确执行。有任何想法吗！谢谢！

```
onSets = db.getSets(exesIdsColExes, toprog_dif);    
    listSets.setAdapter(new SimpleCursorAdapter(this, 
            R.layout.itemsets, onSets, 
            new String[] {"sets_ids", "sets_weight", "sets_ones"},  
            new int[] {R.id.itemsets_ids, R.id.itemsets_weight, R.id.itemsets_ones}) {
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
                View row = super.getView(position, convertView, parent);
                // Here we get the textview and set the color
                Typeface fontTitleProg = Typeface.createFromAsset(getAssets(), "AGHELVETICA.TTF");
                TextView itemsets_ids = (TextView) row.findViewById(R.id.itemsets_ids);
                itemsets_ids.setTypeface(fontTitleProg, 1);
                itemsets_ids.setGravity(0x05);

                TextView itemsets_weight = (TextView) row.findViewById(R.id.itemsets_weight);
                itemsets_weight.setTypeface(fontTitleProg, 1);
                itemsets_weight.setGravity(0x01);

                TextView itemsets_ones = (TextView) row.findViewById(R.id.itemsets_ones);
                itemsets_ones.setTypeface(fontTitleProg, 1);
                itemsets_ones.setGravity(0x01);   

                return row;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T08:22:29.273

我从来没有做过任何安卓开发，但是[SimpleCursorAdapter 的文档](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html)说：

> 首先，如果 SimpleCursorAdapter.ViewBinder 可用，则调用 setViewValue(android.view.View, android.database.Cursor, int)。如果返回值为 true，则表示发生了绑定。如果返回值为 false 并且要绑定的视图是 TextView，则调用 setViewText(TextView, String)。如果返回值为 false 并且要绑定的视图是 ImageView，则调用 setViewImage(ImageView, String)。

因此，您只需传递 SimpleCursorAdapter 的自定义实例，如果列索引为 1（第二列），则从光标获取以磅为单位的值，将其相乘以将磅转换为 kg，将结果设置为查看，并返回true。对于其他列，返回 false。

# ruby-on-rails - 如何消除/删除抛出错误的 gem

> ID：15046659
> 
> 赞同：0
> 
> 时间：2013-02-23T22:52:56.250
> 
> 标签：ruby-on-rails, torquebox

当我运行 rails 控制台命令时，我收到以下错误消息：

```
Invalid gemspec in [/Users/MI1/torquebox-2.0.0.beta1/jruby/lib/ruby/gems/1.8/specifications/ZenTest-4.9.0.gemspec]: Illformed requirement ["< 2.1, >= 1.8"] 
```

当我运行 gem uninstall zentest 时，系统说 zentest 没有安装。

有谁知道如何删除这个宝石和烦人的错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:46:08.180

试试这个以确保您没有多个版本的 gem

```
gem cleanup 
```

然后

```
sudo gem uninstall zentest 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T15:44:13.963

我尝试了 gem cleanup 然后 sudo gem uninstall zentest 但不幸的是这并没有解决我的问题。

最终，我只是删除了文件，错误消息就被消除了。

感谢您的输入。

# c - 使用黄金比率（黄金数）的斐波那契递归

> ID：15046663
> 
> 赞同：4
> 
> 时间：2013-02-23T22:53:39.747
> 
> 标签：c, algorithm, fibonacci

我可以执行递归函数来计算第 n 个斐波那契项，如下所示：

```
int rec (int i)
{
  if(i == 1 || i == 2)
    return i;
else return rec(i-1)+rec(i-2); 
```

}

但我想使用黄金数字 1.618 来计算斐波那契；但我的尝试失败了，我得到了错误的数字：

```
int rec (int i)
{
  if(i == 1 || i ==  2)
    return i;

  else return 1.618*rec(i-1);

 } 
```

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-23T22:56:14.990

黄金比例[是一个无理数](http://en.wikipedia.org/wiki/Golden_ratio#Short_proofs_of_irrationality)，因此您不必期望能够将其近似值插入公式中以获得准确的结果。

如果你想知道如何快速计算`n`斐波那契数，这里有一个页面，列出了各种方法，按运行时降序排列（但按实现难度递增）： http: [//www.nayuki.io/page /快速斐波那契算法](http://www.nayuki.io/page/fast-fibonacci-algorithms)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T22:59:15.777

如果您指的是[比内公式](http://en.wikipedia.org/wiki/Golden_ratio#Relationship_to_Fibonacci_sequence)，请执行以下操作：

```
long fib(int i) {
    double phi = // Golden Ratio
    return Math.round((Math.pow(phi, i) - Math.pow(-phi, -i)) / Math.sqrt(5));
} 
```

请注意，上述公式不是递归的。我不知道任何用于计算 fib 的递归公式。使用黄金比例排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T23:03:27.880

你的数学似乎有缺陷，而且你四舍五入的频率太高了。我用[了这个公式](http://www.goldennumber.net/fibonacci-series/)。

这有效：

```
double gr = 1.618033988749895;
int rec (int i)
{
   return (int)round(rec2(i)/(gr+2));
}

double rec2 (int i)
{
  if (i == 1)
    return gr;

  else return gr*rec2(i-1);
} 
```

此外，它实际上并不需要递归：

```
static int rec (int i)
{
  return (int)round(pow(gr, i)/(gr+2);
} 
```

我没有检查太多数字，但它[似乎非常准确 (Java)](http://ideone.com/07N8l1)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T09:58:32.160

这是你如何做到这一点：

```
double gr = 1.618033988749895;
        double FibGoldenRatio(int i)
        {
            if (i == 1 )
                return 1;

            return  Math.Round(gr * FibGoldenRatio(i - 1));

        } 
```

这里的输出示例：

```
1
2
3
5
8
13
21
34
55
89
144
233
377
610
987
1597
2584
4181
6765
10946
17711
28657
46368
75025
121393
196418
317811
514229
832040
1346269
2178309
3524578
5702887
9227465
14930352
24157817
39088169
63245986
102334155
165580141
267914296
433494437
701408733
1134903170
1836311903
2971215073
4807526976
7778742049
12586269025
20365011074
32951280099
53316291173
86267571272
139583862445
225851433717
365435296162
591286729879
956722026041
1548008755920
2504730781961
4052739537881
6557470319842
10610209857723
17167680177565
27777890035288
44945570212853
72723460248141
117669030460994
190392490709135
308061521170129
498454011879264
806515533049393
1.30496954492866E+15 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-25T10:58:58.680

您可以自己计算黄金比例并用它来找到第 n 个斐波那契数。

```
long long fib(int n) {
    double phi = (1 + sqrt(5))/2.0; // golden ratio
    double phi_hat = (1 - sqrt(5))/2.0; // fraction part of golden ratio

    return (pow(phi, n) - pow(phi_hat, n))/sqrt(5);
} 
```

# java - JSTL 和 Java 哪个更快？

> ID：15046664
> 
> 赞同：3
> 
> 时间：2013-02-23T22:53:43.530
> 
> 标签：java, performance, jsp, jstl

我将一些 JSTL 逻辑重构为 Java。我当时没有考虑性能，只是假设 Java 会更快。这个假设正确吗？

每个语句包含的 JSTL 代码被重构为 Java for 循环。我的假设是在编译之前必须先将 JSTL 代码转换为 Java。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T22:56:17.917

你的假设（大部分）是不正确的。您的 servlet 容器（例如 Tomcat）会将所有 jsp 页面编译成 java servlet，然后编译成 java 字节码，这最终会在请求 jsp 页面时运行。所以jsp页面无论如何都会被透明地转换为java代码。jstl 自定义标签库实现逻辑和您的 java 代码之间可能存在性能差异，但这将是由于特定实现，而不是 java 与 jstl。

在 Tomcat 的默认配置下，直到第一次访问 jsp 资源时才会进行 jsp 编译，因此对于 jsp 页面的第一个请求（仅）存在启动惩罚。如果您担心第一次点击，您可以配置 jsp 页面以进行预编译。对于大多数用例来说，不值得麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T23:02:25.613

不仅需要将 JSTL 代码转换为 java 源代码然后编译（这不会影响运行时性能），而且由于创建[Tag](http://docs.oracle.com/javaee/1.2.1/api/javax/servlet/jsp/tagext/Tag.html)实例和访问请求属性（它们是局部变量）而存在少量开销在一个普通的 Java 循环中）。我认为大部分成本可以通过编译器优化来隐藏，例如[逃逸分析](http://docs.oracle.com/javase/7/docs/technotes/guides/vm/performance-enhancements-7.html#escapeAnalysis)，和/或与其他“成本”（例如网络延迟）相比足够小，但无论如何它都会造成损失。

出于好奇，我查看了一个由 Tomcat 6 编译的 JSP。这是从一个简单的 c:forEach 标签生成的源代码...

```
 private boolean _jspx_meth_c_005fforEach_005f0(PageContext _jspx_page_context)
          throws Throwable {
    PageContext pageContext = _jspx_page_context;
    JspWriter out = _jspx_page_context.getOut();
    //  c:forEach
    org.apache.taglibs.standard.tag.el.core.ForEachTag _jspx_th_c_005fforEach_005f0 = (org.apache.taglibs.standard.tag.el.core.ForEachTag) _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems.get(org.apache.taglibs.standard.tag.el.core.ForEachTag.class);
    _jspx_th_c_005fforEach_005f0.setPageContext(_jspx_page_context);
    _jspx_th_c_005fforEach_005f0.setParent(null);
    _jspx_th_c_005fforEach_005f0.setVar("session");
    _jspx_th_c_005fforEach_005f0.setItems("${session_info}");
    int[] _jspx_push_body_count_c_005fforEach_005f0 = new int[] { 0 };
    try {
      int _jspx_eval_c_005fforEach_005f0 = _jspx_th_c_005fforEach_005f0.doStartTag();
      if (_jspx_eval_c_005fforEach_005f0 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write(" \r\n");
          out.write(" <TR>\r\n");
          out.write("     <TD>"); //etc...
          if (_jspx_meth_c_005fout_005f0(_jspx_th_c_005fforEach_005f0, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
            return true;
          out.write("\r\n");
          out.write("     <TD>");
          if (_jspx_meth_c_005fif_005f0(_jspx_th_c_005fforEach_005f0, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
            return true;
          int evalDoAfterBody = _jspx_th_c_005fforEach_005f0.doAfterBody();
          if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fforEach_005f0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
    } catch (Throwable _jspx_exception) {
      while (_jspx_push_body_count_c_005fforEach_005f0[0]-- > 0)
        out = _jspx_page_context.popBody();
      _jspx_th_c_005fforEach_005f0.doCatch(_jspx_exception);
    } finally {
      _jspx_th_c_005fforEach_005f0.doFinally();
      _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems.reuse(_jspx_th_c_005fforEach_005f0);
    }
    return false;
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T22:57:06.507

我认为 JSTL 应该编译成 Java 字节码，所以我希望它们是相同的。如果您直接用 Java 编写代码，您可能会期待更好的性能，但编译器在优化方面可能比您想象的要好。

如果您真的很担心，我会运行[分析器](http://java-source.net/open-source/profilers)并比较结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T23:00:34.417

Java scriptlet 将比 JSTL 代码更快，因为它是纯 Java 代码，并且在 JSP 转换为 Servlet 类时不需要任何解析。不过，您应该**避免使用**[此处解释](https://stackoverflow.com/a/3180202/1065197)的 scriptlet 。

如果您使用[Facelets](http://docs.oracle.com/javaee/6/tutorial/doc/giepx.html)而不是 JSP 作为表示层的技术，则根本不需要使用 scriptlet。

恕我直言，我怀疑解析 JSTL（和其他标签）的 100 或 200 毫秒开销会对您的应用程序产生重大影响。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-23T23:22:33.727

会有一些开销，因为`for`是一种语言结构，`<c:foreach>`不会被编译成一个`for`循环。JSTL标签和其他标签一样，由容器执行，容器会调用它们的生命周期和回调方法。如果您查看容器（例如 Tomcat 或 WebLogic）中生成的 JSP 源代码，您会发现使用简单标记会产生大量开销。

但我相信这种开销无法与您的数据访问、网络和……延迟相提并论。所以忽略这个小小的延迟，并使用 JSTL 和标签来使您的 JSP 更具可读性和可维护性。

## 更新：

顺便说一句，当您使用 JSTL（或其他标记库）时，您通常也使用**JSP EL**，并且评估**EL**有一点开销。但是，与数据访问、网络延迟和......相比，这些开销也不算在内。

# internet-explorer - 单个 HTTP GET 文件请求之间的浏览器延迟

> ID：15046665
> 
> 赞同：0
> 
> 时间：2013-02-23T22:54:27.127
> 
> 标签：internet-explorer, http, tcp, wireshark, microchip

我正在调试在 Microchip 嵌入式平台上运行的 Web 服务器。嵌入式部分不应该是相关的，除了固件源允许我完全控制所有 TCP/IP 通信的编码。

尤其是在 Internet Explorer 上，在呈现服务器内容之前，所有所需的 GET 请求之间都存在 3 到 10 秒的延迟。当它是第一次访问该站点并且没有缓存任何内容时，通常需要检索大约 5 个文件（htm、css、js），因此用户看到页面之前的时间超过 15 秒。

Wireshark 捕获显示，肯定是客户端引入了延迟，因为 Web 服务器在收到每个连接请求后立即响应。在连接完成并且双方都发送了他们的 FIN/ACK 之后，我看到在客户端发送下一个 SYN 以连接下一个 GET 之前至少有 3 秒的暂停。从 SYN 到 FIN/ACK 的完整连接没有问题，只需不到半秒。

我验证了每一方都在确认对方的 FIN 标志，因为它的最终 ACK 数据包的确认号相应地增加了。我什至扩大了捕获范围以显示涉及客户端 MAC 地址的所有流量，并且在延迟期间没有任何类型的流量。

有人知道发生了什么吗？任何服务器端（例如 HTTP 标头）都会导致这种情况吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:33:42.100

我已经确定问题出在 Web 服务器只运行一个侦听 TCP 套接字这一事实。

诸如 Internet Explorer 之类的客户端显然希望能够发出多个并发请求以并行检索文件，最有可能使用独立线程。当一个线程占用了一个侦听套接字时，尝试获取第二个文件的第二个线程必须等到第一个线程释放套接字。当第二个线程的第一次连接尝试失败时，它似乎必须在 3 秒后超时才能重试。

因为算法是要超时的，所以socket只被占用半秒就回到监听状态也没关系。第二个线程在超时之前不会重试，因此文件请求之间存在延迟。

客户端没有将第二个文件请求移交给第一个线程的复杂性，后者最有可能意识到套接字再次可用。在我的情况下，这样的功能可以优化吞吐量。

# java - 将原语声明和转换为字符串的首选方式

> ID：15046668
> 
> 赞同：3
> 
> 时间：2013-02-23T22:54:45.287
> 
> 标签：java

我有 3 个选项：

1.  `double member`当我必须通过`String`use时声明和稍后`member + ""`。
2.  `double member`当我必须通过`String`use时声明和稍后`Double.toString(member)`。
3.  `Double member = 0.0`当我必须通过`String`use时声明和稍后`member.toString()`。

我的意见：

1.  最短的一个。但是，`member + ""`将转换为`new StringBuilder().append(member).append("").toString()`，这似乎并不优雅。
2.  In `Double.toString(member)`I don't like that it doesn't start from the word `member`,这是最重要的。我们只需要转换它。最好`member`是在开头，因为我最关注单词的开头。快速浏览一下，我就知道“啊，好吧，我是路过的成员”。我`Double.toString(member)`的第一个注意力集中在“啊，好吧……一个 Double，我们正在做一个成员的 toString……！啊，好吧”。
3.  `member.toString()`看起来不错，并且由于 Eclipse 中的自动完成功能，它可以比 + "" 更快地输入。但是，对象比基元慢得多。[参考。](http://simononsoftware.com/primitives-and-objects-benchmark-in-java/)

**什么是最好的选择？**也许还有其他选择？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T22:57:18.337

适用于任何事情的最佳全方位方法是：

```
String s = String.valueOf(x); 
```

这里`x`可以是原语或对象，（重要的是）可能是`null`.

编辑：
hackaliciuos 方法是：

```
X + ""; 
```

尽管请注意这不是很有效，因为它编译为：

```
new StringBuilder().append(x).append("").toString(); 
```

无论如何调用`.append(x)`调用。`String.valueOf(x)`

* * *

请注意，数组需要特殊处理：

```
String s = Arrays.toString(array); 
```

# javascript - 图形网站导航 Javascript

> ID：15046669
> 
> 赞同：0
> 
> 时间：2013-02-23T22:54:52.083
> 
> 标签：javascript, graph, graph-visualization, arbor.js

我的网站上有三个级别。目前的导航大概是：

```
First : 1  : 90: (link)
             95: 281: (link)
                 139: (link)
        2  : (link)
        3  : 12: 124: (link)
        4  : (link)

Second: 5  : (link)
Others.. 
```

[我发现实现我想要的最佳示例是http://arborjs.org/](http://arborjs.org/)的主页：立即，只有第一级可见，然后当您移动鼠标时，会弹出下一个级别。但它只在 Chrome 上有很好的性能，在其他浏览器上不起作用。

数据量不是很多（最多 4^3 个节点），但我找不到任何足够好的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:30:52.263

我想这可以类似于通过 css3 的下拉菜单来完成。我找不到任何有向图的 css3 实现，但我确实在 JavaScript 中找到了以下库。

*   [D3](https://github.com/mbostock/d3/wiki/Gallery)：D3.js 是一个基于数据操作文档的 JavaScript 库。D3 帮助您使用 HTML、SVG 和 CSS 将数据变为现实。D3 对 Web 标准的重视为您提供了现代浏览器的全部功能，而无需将自己束缚于专有框架，结合了强大的可视化组件和数据驱动的 DOM 操作方法。
*   [Processing.js](http://processingjs.org/)：Processing.js 是流行的 Processing 可视化编程语言的姊妹项目，专为 Web 设计。Processing.js 使您的数据可视化、数字艺术、交互式动画、教育图表、视频游戏等使用 Web 标准工作，无需任何插件。您使用 Processing 语言编写代码，将其包含在您的网页中，其余的由 Processing.js 完成。这不是魔术，但几乎是。

# java - CompletionService 和 ObjectPool

> ID：15046670
> 
> 赞同：0
> 
> 时间：2013-02-23T22:54:58.003
> 
> 标签：java, multithreading, threadpool, pool, future

```
//Worker Thread
class MyRunnable implements Runnable {

private String status;

public void getStatus() {
  return status;
}

public void run() {
    try {   
       if(Thread.interrupted()) throw new InterruptedException();
     }catch(InterruptedException ie) {
         status= "FAIL";
         return;
     }
 }        

 //Thread that submits Workers 
 MyRunnable myRunnableObj1 = getObjectPool().borrow();
 futures.add(completionService.submit(myRunnableObj1,myRunnableObj1));

 //A Helper thread to return Objects to pool
 new Callable() {
 public String call() {
   MyRunnable myRunnableObj2 = completionService.take().get();
   getObjPool().returnObject(myRunnableObj2):

   if(myRunnableObj2.getStatus= "FAIL") {
   for(Future future : futures) {
    if(!future.isDone()) 
    future.cancel(true);
   }
   return myRunnableObj2.getStatus();
 } 
```

在其中一个工作人员失败后，从帮助线程中取消一个线程。然后，completionService.take().get() 给出 CancellationException，因为它已经被取消了。

结果，myRunnableObj2 对象没有返回到池中，因为 get() 在取消时抛出异常。这怎么可能处理。?

# python - Scrapy 不会选择嵌入元素

> ID：15046674
> 
> 赞同：1
> 
> 时间：2013-02-23T22:55:05.390
> 
> 标签：python, xpath, scrapy

我正在使用 Scrapy 来实际了解网站中是否有任何 Flash 内容。我使用以下代码：

```
hxs = HtmlXPathSelector(response)

(len(hxs.select('//embed[contains(@src,".swf")]')) > 0 or len(hxs.select('//object[contains(@data,".swf")]')) > 0  or len(hxs.select('//object/param[contains(@value,".swf")]')) > 0) 
```

但总是返回假。我意识到即使我使用

```
 hxs.select('//embed') 
```

当我确定网站中有任何元素时，它不会选择任何元素。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T04:30:26.057

很可能在执行一些 JS 代码后出现了 embed 元素。我尝试在 youtube 视频上运行 scrapy shell 并遇到与您相同的问题。您可以通过使用实际执行 JS 代码（例如[Selenium](http://docs.seleniumhq.org/) ）的库来解决此问题。下面是一些示例代码，您可以在普通的 scrapy 蜘蛛中使用。

```
import time
from selenium import webdriver

browser = webdriver.Firefox()
browser.get('https://www.youtube.com/watch?v=e_44G-kE8lE') # Load page
time.sleep(3) # Make sure we had enough time to load everything
browser.find_elements_by_xpath("//embed") 
```

运行最后一行代码后，我确实看到了一个元素，而使用 scrapy hxs 我没有。如果你最终使用了这个解决方案，[这个](http://snipplr.com/view/66998/rendered-javascript-crawler-with-scrapy-and-selenium-rc/)将 Selenium 与 scrapy 集成的片段应该会有所帮助。

# css - 可以在编译期间控制台记录 LESS 变量吗？

> ID：15046675
> 
> 赞同：8
> 
> 时间：2013-02-23T22:55:08.390
> 
> 标签：css, debugging, web, less

我正在使用 Bootstrap 和 LESS CSS 对一个非常复杂的父/子主题系统进行一些调试。我不会深入讨论这个问题的细节，只是说我在其中声明了自定义颜色和其他变量，`variables.less`但编译后的 CSS 没有使用这些变量，**但是**，我已经验证了该文件实际上正在编译并且成功收录。

所以，我真正需要的是能够以某种方式`console.log`使用 LESS 变量（特别是在编译运行时），但尽管 LESS 声称支持 LESS 文件中的 javascript，但这并不起作用。任何人都可以阐明这一点/有经验吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-15T21:20:41.807

> 但尽管 LESS 声称在 LESS 文件中支持 javascript，但这并没有奏效。

这是：

```
@var: value;

.test {
    width: ~`console.log("@{var}"), "@{var}"`;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-15T15:22:40.793

尝试将 JavaScript 包装在立即调用的函数表达式中。只要您返回 Less 期望的值，该函数中发生的任何其他事情似乎都是公平的游戏：

```
@myColor: red;

.test {
  color: `(function(){console.log("@{myColor}"); return "@{myColor}";}())`
} 
```

# php - 使用 CURLOPT_SSL_VERIFYHOST 的替代方法，2

> ID：15046678
> 
> 赞同：0
> 
> 时间：2013-02-23T22:55:30.787
> 
> 标签：php, ssl, curl, authorize.net

我正在使用 John Conde 编写的 auth.net XML 类，[http://www.johnconde.net/blog/tutorial-integrate-authorize-net-xml-api-universal-php-class/](http://www.johnconde.net/blog/tutorial-integrate-authorize-net-xml-api-universal-php-class/)。其中有两行。

```
curl_setopt($this->ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($this->ch, CURLOPT_CAINFO, dirname(__FILE__) . '/ssl/cert.pem'); 
```

我可以用这个代替吗

```
curl_easy_setopt(curl,CURLOPT_SSL_VERIFYPEER, 0);
curl_easy_setopt(curl,CURLOPT_CAINFO, NULL);
curl_easy_setopt(curl,CURLOPT_CAPATH, NULL); 
```

我可能无法获取 .pem 文件或创建它所需的信息。这种替代方案是否同样安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T11:29:09.410

> 这种替代方案是否同样安全？

不，禁用`CURLOPT_SSL_VERIFYHOST`或`CURLOPT_SSL_VERIFYPEER`允许可能的 MITM 攻击（请参阅[此答案](https://stackoverflow.com/a/13742121/372643)）。

> 我可能无法获取 .pem 文件，或者我需要创建它的信息

您创建它所需的信息最终是您的判断，选择您想要信任的 CA。浏览器和操作系统往往会为您进行预选。Curl[带有一个方便的脚本和使用 Firefox CA 选项的 CA 包](http://curl.haxx.se/docs/caextract.html)（此选项会不时更新）。一些 Linux 发行版还提供了一个您可以使用的默认 CA 捆绑文件。

# r - 创建漂亮的输出

> ID：15046682
> 
> 赞同：4
> 
> 时间：2013-02-23T22:56:01.090
> 
> 标签：r, function, output

我一直在做一个相当雄心勃勃的功能，我希望完成后可以被我以外的人使用。当只有我使用该功能时，我可以忍受输出有点蹩脚，但如果我想要一些好看的输出怎么办？我正在寻找的基本上是这样的：

*   一种打印控制台可读内容的方法
*   能够访问打印的内容

更具体地说，假设我要打印三个标量对象`stat`：`dfree`和`pval`. 目前，我这样做的方式是：

```
result <- list(statistic = stat, degrees = dfree, p.value = pval)
return(result) 
```

这样我就可以通过运行来访问这些值，例如（调用函数`whites.htest`）：

```
whites.htest$p.value 
```

它有效，但输出有点难看。

```
> whites.htest(var.modell)
$statistic
[1] 36.47768

$degrees
[1] 30

$p.value
[1] 0.1928523 
```

如果我们像这样运行一个简单的 VAR 模型：

```
> library(vars)
> data <- matrix(rnorm(200), ncol = 2)
> VAR(data, p = 2, type = "trend")

VAR Estimation Results:
======================= 

Estimated coefficients for equation y1: 
======================================= 
Call:
y1 = y1.l1 + y2.l1 + y1.l2 + y2.l2 + trend 

       y1.l1        y2.l1        y1.l2        y2.l2        trend 
-0.090102007 -0.060138062  0.126250484  0.014423006  0.003138521 

Estimated coefficients for equation y2: 
======================================= 
Call:
y2 = y1.l1 + y2.l1 + y1.l2 + y2.l2 + trend 

       y1.l1        y2.l1        y1.l2        y2.l2        trend 
 0.040118527  0.018274399 -0.132943318 -0.031235939  0.003242241 
```

输出看起来非常好。我已经查看了它的底层代码（通过简单地运行`VAR`），但我找不到是什么让它看起来像这样。

所以我的问题是，我如何在控制台上打印一些漂亮且可读的东西，同时仍然能够从函数中访问单个对象（即结果）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T23:11:05.783

我能想到的一种美化输入的方法（如果你编写更多的函数，可以获得更多的控制）是创建一个类并修改`show`方法。像这样的东西：

```
# set your class name and its representation is list here.
setClass( "stat_test", representation("list"))

# show method (here's how the output would be printed
# you can format to whatever you want... to show and how to show
setMethod("show", "stat_test", function(object) {
    cat("object of", class(object), "\n")
    cat("Estimated Coefficients\n")
    cat("  statistics\t\t\tdegrees\t\t\tp.value\n")
    cat("  ", object$statistics, "\t\t\t", object$degrees, "\t\t\t", object$p.value,"\n")
})

# now your actual function (here dummy of course)
my_fun <- function(x) {
    t <- list(statistics=1.5, degrees=30, p.value=1e-2)
    new("stat_test", t)
}

# now calling
w <- my_fun(2)
> w # you get

object of stat_test 
Estimated Coefficients
  statistics            degrees         p.value
  1.5            30              0.01 
```

当然，您应该注意对齐方式。但这是一个基本的想法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-23T23:08:22.220

你应该给你的结果一个类，说“resclass”并创建一个`print.resclass`函数。`print`是一个通用函数，它将搜索函数空间`print.resclass`并将其应用于您的对象。您可以让 print 方法返回 NULL 或让它不可见地返回对象值。通常的做法是重复调用`cat`. 我看到 Arun 已经提供了一个例子。总是可以向你的包作者学习。这`print.varest`是您欣赏的功能：

```
 vars:::print.varest
#---------------
function (x, digits = max(3, getOption("digits") - 3), ...) 
{
    dim <- length(x$varresult)
    names <- colnames(x$y)
    text1 <- "VAR Estimation Results:"
    cat(paste("\n", text1, "\n", sep = ""))
    row <- paste(rep("=", nchar(text1)), collapse = "")
    cat(row, "\n")
    cat("\n")
    for (i in 1:dim) {
        result <- coef(x$varresult[[i]])
        text1 <- paste("Estimated coefficients for equation ", 
            names[i], ":", sep = "")
        cat(text1, "\n")
        row <- paste(rep("=", nchar(text1)), collapse = "")
        cat(row, "\n")
        text2 <- paste("Call:\n", names[i], " = ", paste(names(result), 
            collapse = " + "), sep = "")
        cat(text2, "\n\n")
        print(result, ...)
        cat("\n\n")
    }
    invisible(x)
}
<environment: namespace:vars> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T23:11:13.210

添加到@DWin的答案..

```
# run your example code
library(vars)
data <- matrix(rnorm(200), ncol = 2)
# store the output of `x`
x <- VAR(data, p = 2, type = "trend")

# what kind of object is `x`?
class( x )

# look at code that the author of the `vars`
# package wrote for the print method
getS3method( 'print' , 'varest' )

# look at others..
getS3method( 'print' , 'varsum' )

# ..and others
methods( 'print' ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-23T23:13:19.573

通常的做法是将函数的返回值分配给给定的类（您选择类的名称），然后为该类创建一个打印方法，该方法将很好地格式化输出（通常使用`cat`）并返回相同的无形的对象。通常还有一个 summary 方法和一个 print.summary 方法来提供额外的输出。

其他可以帮助输出很好但很简单的事情是将屏幕上您想要的东西放在一个矩阵中，并给出矩阵的行名和列名，然后打印矩阵，print.matrix 函数将处理衬里事情进展顺利。一些函数将结合使用`cat`和打印矩阵。

# java - Java 同步对象的副本而不是实际的对象

> ID：15046685
> 
> 赞同：1
> 
> 时间：2013-02-23T22:56:27.533
> 
> 标签：java, multithreading, synchronization

我正在查看蓝牙聊天示例，但我不明白为什么在下面的代码中它在本地 ConnectedThread 对象的副本上同步。r & mConnectedThread 肯定指向同一个对象吗？

```
public synchronized void write(byte[] out)
{
    // Create temporary object
    ConnectedThread r;

    // Synchronize a copy of the ConnectedThread
    synchronized (this)
    {

        if (mState != ICommsService.STATE_CONNECTED)
            return;

        r = mConnectedThread;
    }

    // Perform the write unsynchronized
    r.write(out);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:03:23.253

**它在**ConnectedThread 对象上不同步。它在 上同步`this`，因此没有其他线程可以修改`mState`以及`mConnectedThread`当前线程何时需要它们。

可能使您感到困惑的评论说，它正在同步 the 的副本`ConnectedThread`（也就是说，它使引用的副本成为 the`ConnectedThread`并且复制过程是同步的）。该评论没有说它**正在**同步`ConnectedThread`.

而函数之所以在使用前将ConnectedThread对象的引用放在一个局部变量`r`中，是为了在调用的时候不能同步整个对象`write`，这可能是一个很长的动作。

# android - 使用密码学安全地存储数据

> ID：15046686
> 
> 赞同：1
> 
> 时间：2013-02-23T22:56:28.537
> 
> 标签：android, cryptography, app-data

## 背景

根据一篇新的 Android 开发者博客文章（可[**在此处**](http://android-developers.blogspot.co.il/2013/02/using-cryptography-to-store-credentials.html)获得），您应该使用一种新技术来加密和解密存储在数据库或 sharedPreferences 中的敏感数据（例如密码），这样即使具有 root 权限的人也可以很难读。

新方法是：

```
public static SecretKey generateKey() throws NoSuchAlgorithmException {
    // Generate a 256-bit key
    final int outputKeyLength = 256;

    SecureRandom secureRandom = new SecureRandom();
    // Do *not* seed secureRandom! Automatically seeded from system entropy.
    KeyGenerator keyGenerator = KeyGenerator.getInstance("AES");
    keyGenerator.init(outputKeyLength, secureRandom);
    SecretKey key = keyGenerator.generateKey();
    return key;
} 
```

## 问题

根据文章（以及我尝试过的内容），此代码每次调用它时都会创建一个新的不同键，所以我对此事有一些疑问：

1.  应用程序会为旧版本的 Android 做什么？

2.  此类应用程序将如何处理将 android OS 更新为它应该工作的新方式（API post 17 到 API 17）？

3.  由于它不是确定性的，这意味着解密不能重新创建相同的密钥，那么这是否意味着密钥也被存储以便将其用于解密（以及以后的加密）？这样的事情不会错过重点吗？

4.  假设我有代码生成的密钥，我将如何使用它来加密和解密来自 DB 和 sharedPreferences 的数据？

5.  在文章中，他们说：

> 事实上，Android 现有的安全模型已经为这​​类数据提供了充足的保护。用户凭据应与设置的 MODE_PRIVATE 标志一起存储并存储在内部存储中

这是什么意思？不需要整个密钥生成，因为 Android 已经加密了所有内容？我的设备是 root 的，我可以轻松地说数据从未加密并且易于阅读（尤其是只是 xml 的 sharedPreferences）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T01:55:07.770

> 应用程序会为旧版本的 android 做什么？

不是这个，因为它在所有版本的 Android 上都没有用，正如博客文章所指出的那样。

> 由于它不是确定性的，这意味着解密不能重新创建相同的密钥，那么这是否意味着密钥也被存储以便将其用于解密（以及以后的加密）？这样的事情不会错过重点吗？

恰恰。引用博客文章：“请注意，这种方法的安全性依赖于保护生成的密钥，这取决于内部存储的安全性。目标文件不加密（但设置为 MODE_PRIVATE）将提供类似的安全性。”

老实说，我不知道为什么博客文章是这样写的。唯一具有重要价值的加密形式是*用户*提供密码（或高级形式，例如双因素身份验证）。

> 这是什么意思？不需要整个密钥生成，因为 android 已经加密了所有内容？

不，这意味着任何可以获取加密文件的人也可以获取加密密钥，这使得加密在很大程度上毫无意义。

请注意，Android*将*在用户打开全盘加密的那些设备上“加密所有内容”。

# php - smarty var 默认值，转义大括号

> ID：15046689
> 
> 赞同：0
> 
> 时间：2013-02-23T22:56:51.223
> 
> 标签：php, javascript, json, smarty, smarty3

我很难在 smarty 中设置默认的 var 值以包含花括号，我正在尝试执行以下操作但没有运气。

```
<input type="hidden" id="orders" value="{$orders|default:'{}'}"> 
```

还尝试了 ldelim 和 rdelim 也没有运气。

```
<input type="hidden" id="orders" value="{$orders|default:'{ldelim}{rdelim}'}"> 
```

我是否缺少一些基本的 smarty 语法，或者我必须设计一个解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T07:45:59.660

您不能在标签内标签内。在这里添加默认值的唯一方法是使用条件：

```
<input type="hidden" id="orders" value="{if $orders}{$order}{else}{ldelim}{rdelim}{/if}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T23:06:29.297

***要在 Smarty 中转义大括号，请使用任何空白字符***围绕它们，如下所示：

```
<input type="hidden" id="orders" value="{$orders|default:' { } '}"> 
```

您还可以使用**{literal}**标签转义 CSS 或 JavaScript 部分：

```
<input type="hidden" id="orders" value="{$orders|default:'{literal}{}{/literal}'}"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:13:01.977

使用双引号

```
<input type="hidden" id="orders" value="{$orders|default:"{ldelim}{rdelim}"}"> 
```

# jquery - 带有 Theme Punch Revolution 滑块的 jQuery Uncaught TypeError

> ID：15046693
> 
> 赞同：2
> 
> 时间：2013-02-23T22:57:29.630
> 
> 标签：jquery

我遇到了一个我无法追踪的问题。我正在使用[Revolution Slider](http://themes.themepunch.com/?theme=revolution_jq)，并且不断收到 jQuery 错误：

```
 ▼ Uncaught TypeError: Cannot read property 'length' of undefined (repeated 86 times)

    p.extend.each                            jquery-1.8.2.min.js:2  
    a.fn.cssAnimationRemove     jquery.themepunch.plugins.min.js:18  
    (anonymous function)        jquery.themepunch.plugins.min.js:18 
```

问题出在[此页面上](http://coolcoops.com/home)，我相信它会导致奇怪的问题，即幻灯片更改时图片没有完全消失。它把图片留在那儿，然后突然消失了。像这样：

![](../Images/5d5f5f3be699e7017013753180f750cd.png)

它只给我带来了麻烦，我似乎无法找到它。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T10:42:45.823

在美化`jquery.themepunch.plugins.min.js`并逐步使用 Chrome 的网络检查器后，我能够找到问题的原因。

在未定义的对象上调用[jquery 的 each](http://api.jquery.com/jQuery.each/)函数正在使用它。

我不建议修复或更改您不拥有的代码，但现在您可以通过对 cssAnimationRemove 函数进行未定义检查来修复错误：

美化后，原始函数如下所示：

```
a.fn.cssAnimationRemove = function () {
    var b = this;
    var c = b.data("cssAnimations");
    var d = b.data("identity");
    a.each(c, function(a, b) {
        c[a] = b.splice(d + 1, 1);
    });
    b.data("cssAnimations", c);
}; 
```

修改后的美化版本只需要插入一个未定义的检查。它看起来像这样：

```
a.fn.cssAnimationRemove = function () {
    var b = this;
    var c = b.data("cssAnimations");
    var d = b.data("identity");
    if (typeof c !== "undefined") {
        a.each(c, function(a, b) {
            c[a] = b.splice(d + 1, 1);
        });
    }
    b.data("cssAnimations", c);
}; 
```

在购买了包含此版本滑块的主题后，我们遇到了同样的问题（我怀疑这是旧版本，因为 Revolution Slider 网站上的文件与我们本地的文件不同）。

# exception-handling - 为什么使用断言而不是异常抛出？

> ID：15046695
> 
> 赞同：6
> 
> 时间：2013-02-23T22:57:33.437
> 
> 标签：exception-handling, assert

在我参加 Udacity 的一门关于代码调试的在线课程中，教授说最好使用 assert 而不是在实际代码中抛出异常。

尽管在我的编程生涯中，我从未见过有人使用它。

你知道为什么会这样吗？你同意？

**PS：**下图是 Python 代码，但我猜这个想法适用于所有编程语言。此外，这门课程只有 4 个月大，所以我认为教授的方法是最现代的方法。

![在此处输入图像描述](../Images/27ae38a84e12fdc3dbe0a15e1d4c7818.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T23:02:08.090

Assert 仅用于调试，并允许您在单行中检查不变量。断言和类似的宏在测试框架中无处不在。除了例外，你真的需要关心你的库或程序的其余部分在做什么。断言非常简单。

它将使程序崩溃，而不会引起它的任何歧义-您的断言导致了它。在调试器中去那里更容易。异常可能会被捕获并且不会停止程序，或者可能会导致副作用，例如从通常不会发生的地方展开堆栈，调用所有析构函数等，而您并不真正关心它因为你在调试。

对于异常，您需要声明要抛出的函数，必须在 C++ 等语言中启用异常。

如果您是交互式调试，而不仅仅是在批处理模式下运行测试用例，并且您的示例是在 Python 中，我认为您会发现一个启动 pdb 并在此处停止程序的函数更有帮助。

# google-cloud-datastore - 如何避免 Objectify 缓存中的状态实体不一致？

> ID：15046696
> 
> 赞同：0
> 
> 时间：2013-02-23T22:57:50.903
> 
> 标签：google-cloud-datastore, objectify

在我的模型中，我有一些更复杂并且可以抛出异常的方法。当这些异常发生时，它们会使模型处于不一致的状态。到目前为止，这种情况从来都不是问题，因为控制器意识到了这种行为，并且从未在数据存储中使用/保留不一致的实体——该模型的实例通常单独留给垃圾收集器。

但是，在阅读 Objectify 的文档时，我注意到会话缓存包含返回给应用程序的完全相同的 Java 对象。这种行为会破坏我对丢弃不一致实体的假设吗？

这是预期的行为吗？从现在开始，无论如何，我必须始终让我的所有模型实例保持一致状态。因为它们都可以隐式保存在缓存中。如果是这种情况，我必须检查所有抛出异常的方法，甚至是非检查异常，以确保我的模型实例始终一致且可用。

而且，这可能是多线程 Java 应用程序的问题吗？如果用户打开两个浏览器选项卡，并且碰巧发出两个请求，它们将访问缓存中的同一个对象。那可能吗？我是否需要让我的模型的所有类都是线程安全的？

你们是如何解决这些问题的？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T02:58:41.240

对象化会话！= 用户会话。Ofy 会议是工作会议；它们不应该跨线程共享，应该在需要时创建和丢弃。在这方面，它们类似于 JPA 会话。

# ios - Git 总是拉导致重复符号_OBJC_CLASS_？

> ID：15046698
> 
> 赞同：1
> 
> 时间：2013-02-23T22:57:55.060
> 
> 标签：ios, objective-c, linker, clang

在开发 iOS 应用程序时，我们一直遇到同样的问题 - 在一些 git pull / merge of changes 之后，我们得到

```
duplicate symbol _OBJC_CLASS_ 
```

链接器错误

对于不同的班级。如果从“目标/构建阶段中的编译源选项卡”中删除源文件（如果它是重复符号 _OBJC_METACLASS_$_User 则说 User.m），则可以删除此错误。

完整的错误如下所示：

```
duplicate symbol _OBJC_CLASS_$_GridView in:
    /Users/user/Library/Developer/Xcode/DerivedData/App-bjpymtdfvzxkembjocjjpbswfoul/Build/Intermediates/App.build/Debug-iphoneos/App.build/Objects-normal/armv7/GridView-9FDDD336172B4A48.o
duplicate symbol _OBJC_METACLASS_$_GridView in:
    /Users/user/Library/Developer/Xcode/DerivedData/App-bjpymtdfvzxkembjocjjpbswfoul/Build/Intermediates/App.build/Debug-iphoneos/App.build/Objects-normal/armv7/GridView-9FDDD336172B4A48.o
duplicate symbol _OBJC_METACLASS_$_User in:
    /Users/user/Library/Developer/Xcode/DerivedData/App-bjpymtdfvzxkembjocjjpbswfoul/Build/Intermediates/App.build/Debug-iphoneos/App.build/Objects-normal/armv7/User.o
    /Users/user/Library/Developer/Xcode/DerivedData/App-bjpymtdfvzxkembjocjjpbswfoul/Build/Products/Debug-iphoneos/libRestKit.a(User.o)
duplicate symbol _OBJC_CLASS_$_User in:
    /Users/user/Library/Developer/Xcode/DerivedData/App-bjpymtdfvzxkembjocjjpbswfoul/Build/Intermediates/App.build/Debug-iphoneos/App.build/Objects-normal/armv7/User.o
    /Users/user/Library/Developer/Xcode/DerivedData/App-bjpymtdfvzxkembjocjjpbswfoul/Build/Products/Debug-iphoneos/libRestKit.a(User.o)
ld: 4 duplicate symbols for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T23:57:09.480

这里有几件事可以尝试：

1.  检查您的项目，看看您是否从两个不同的位置导入了相同的文件。看看你的**项目 | 目标 | 构建阶段（选项卡）| 再次编译源**部分并确保文件（GridView.m 和 User.m）不会出现两次。该列表按添加日期而不是文件名对文件进行排序，因此您可能错过了它。

2.  此外，您似乎正在静态链接外部库 libRestKit.a。您或您团队中的其他人是否正在导入 RESTKit 的源代码以及静态库？如果两者都有，您将获得重复的符号。

3.  最后，确保没有人在代码中的某处导入带有 #import "User.m" 或 #import "GridView.m" 之类的 .m 文件——尽管那个似乎不太可能，因为您可以通过以下方式解决问题删除有问题的源文件。

在每个人都拥有相同的构建配置之前，您将继续遇到这些问题，因此您应该让每个人都提交并签入他们的所有代码。修复任何合并冲突，让您的本地存储库完全符合您系统上的要求，然后推送。然后，让团队的其他成员删除他们的存储库并进行新的克隆。希望每个人都从同一个代码库/项目开始，这样可以避免问题再次发生，甚至可以指出问题发生的位置，这样您将来就可以避免它。

此致。

# vb.net - Vb.Net 变暗变量的最佳方法是什么

> ID：15046700
> 
> 赞同：0
> 
> 时间：2013-02-23T22:58:00.997
> 
> 标签：vb.net

声明变量的更好方法是什么？有效率\速度差异吗？

1.

```
Dim TempArray() As String = New String() {}

TempArray = Regex.Split(RTBMDataStructure.IssuesLog _
.ToString, vbNewLine, RegexOptions.IgnoreCase) 
```

2.

```
Dim TempArray() As String = Regex.Split(RTBMDataStructure.IssuesLog _
.ToString, vbNewLine, RegexOptions.IgnoreCase) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T23:03:06.803

`new String`第一个创建一个从未使用过的空数组。

您应该考虑第三种选择：

```
Dim TempArray() As String

TempArray = Regex.Split(RTBMDataStructure.IssuesLog _
.ToString, vbNewLine, RegexOptions.IgnoreCase) 
```

或事件另一个：

```
Dim TempArray() = Regex.Split(RTBMDataStructure.IssuesLog _
.ToString, vbNewLine, RegexOptions.IgnoreCase) 
```

但是选择你喜欢的任何人，因为在应用程序执行等方面没有什么不同。我只建议在整个应用程序中与所选择的人保持一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T23:02:24.180

第一个示例可以正常工作，但在逻辑上是错误的。
您声明并**初始化**一个空字符串数组。
该数组从未使用过，并且引用它的变量将更改为引用由 Regex.Split 方法创建的字符串数组。
垃圾收集器需要做更多的工作。

# mysql - 外键约束不起作用

> ID：15046701
> 
> 赞同：3
> 
> 时间：2013-02-23T22:58:06.050
> 
> 标签：mysql, sql, foreign-key-relationship

我用以下数据创建了两个表

![在此处输入图像描述](../Images/e937aec448e02ac6d6561a60ee3af8a5.png)

脚本：

```
CREATE TABLE Persons
(
P_Id int NOT NULL,
LastName varchar(255) NOT NULL,
FirstName varchar(255),
Address varchar(255),
City varchar(255),
PRIMARY KEY (P_Id)
)ENGINE=InnoDB;

CREATE TABLE Orders
(
O_Id int,
OrderNo int,
P_Id int NOT NULL,
PRIMARY KEY (O_Id),
FOREIGN KEY (P_Id) REFERENCES Persons(P_Id)
ON DELETE CASCADE
ON UPDATE CASCADE
)ENGINE=InnoDB;

INSERT INTO Persons VALUES
(1, 'Last', 'First', 'Address', 'City');

INSERT INTO Orders VALUES
(1, 2, 1);

DELETE FROM Persons WHERE P_Id = 1
select * from Orders; 
```

我已经在 MySQL 工作台中实现了这个示例（示例取自 w3schools）。

现在在删除persons 表中的第一行时，甚至Orders 表中的相应行也应该被删除。即最后一行。但它不会被删除。

有人可以告诉我我在这里缺少什么吗？

它仍然显示订单表中的行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T23:20:36.863

如评论中所述，您应该打开`foreign_key_checks`：

```
SET foreign_key_checks = 'ON' 
```

> 如果设置为 1（默认值），则检查 InnoDB 表的外键约束。如果设置为 0，它们将被忽略。

[请参阅文档](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_foreign_key_checks)

# java - 基本计算器。如何让用户做出多项选择。代码已经有效

> ID：15046702
> 
> 赞同：0
> 
> 时间：2013-02-23T22:58:08.127
> 
> 标签：java

该代码有效并且非常简单。我使用开关做了另一个，但老师想要 if 语句。因此，用户输入 2 个数字，然后从我创建的 println 菜单中进行选择。我需要用户能够做出第二选择。比如选择“a”进行加法，之后也可以选择“b”减法。在做出每个选择之后，如果能够让菜单重现，那就太好了。我需要第一个用户输入的数字是持久的。

谢谢。编辑：这是有效的最终版本

```
import java.util.Scanner;

public class Assign3

{
    public static void main (String [] args)

    {
        double numOne;
        double numTwo;
        String answerTo = null;

        System.out.println("============================");
        System.out.println("|   MENU Calculator Fun    |");
        System.out.println("============================");
        System.out.println("| Options:                 |");
        System.out.println("|        a. Add            |");
        System.out.println("|        b. Substract      |");
        System.out.println("|        c. Multiply       |");
        System.out.println("|        d. Divide         |");
        System.out.println("|        e. Mod            |");
        System.out.println("|        f. Compare        |");
        System.out.println("|        g. Print Numbers  |");
        System.out.println("|        h. Quit           |");
        System.out.println("============================");

        Scanner numFinder = new Scanner(System.in);

        System.out.println("Please enter a number then press enter then enter another number followed by enter.");

        numOne = numFinder.nextDouble();
        numTwo = numFinder.nextDouble();

        while(true)
        {   
        Scanner scan = new Scanner(System.in);
        System.out.println("Please choose an option.");
        String menuSelect = scan.next();

        if(menuSelect.length() > 1) 
        {
            System.out.println("Error, too many letters...");
        }

        else if(menuSelect.equals("a"))
        {
            answerTo = Double.toString(numOne +numTwo);
        }
        else if(menuSelect.equals("b")) 
        {
            answerTo = Double.toString(numOne - numTwo);
        }
        else if(menuSelect.equals("c"))
        {
            answerTo = Double.toString(numOne * numTwo);
        }
        else if(menuSelect.equals("d"))
        {
            answerTo = Double.toString(numOne / numTwo);
        }
        else if(menuSelect.equals("e"))
        {
            answerTo = Double.toString(numOne % numTwo);
        }
        else if (menuSelect.equals("f"))

            if(numOne > numTwo)
            {
                answerTo = ">";//System.out.println("First is grater");
            }
            else if(numOne < numTwo)
            {
                answerTo ="<";//System.out.println("Second is grater");
            }
            else
            {
                answerTo ="=";//System.out.println("Both are equal");
            }

        else if(menuSelect.equals("g"))
        {
            answerTo = "First number: " + numOne + "  Second number: " + numTwo;
        }
        else if(menuSelect.equals("h"))
        {
            break;
        }

        System.out.println("answer: " + answerTo);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:39:13.760

您需要`while`在整个块周围使用循环。

然后有

```
else if(menuSelect.equals("h"))
{
    break;
} 
```

这将跳出循环

# python - 在python中加入大量文件

> ID：15046703
> 
> 赞同：3
> 
> 时间：2013-02-23T22:58:15.490
> 
> 标签：python, newline

```
from itertools import chain

 infiles = [open('{}_example.txt'.format(i+1), 'r') for i in xrange(100)]
   with open('example.txt', 'w') as fout:
      for lines in chain(*infiles):
           fout.write(lines) 
```

我使用了这个，但问题是下一个文件的第一行与上一个文件的最后一行连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T23:28:09.103

我不会一次打开所有文件，而是一次打开一个。此外，您实际上并不需要遍历这些行（使 Python 规范化并去除换行符）；只需将文件作为一个整体读取（您甚至可以将它们作为二进制文件读取/写入，以防止 Python 以任何方式处理它们）。

```
fileNames = ['{}_example.txt'.format(i+1) for i in xrange(100)]
with open('example.txt', 'w') as fout:
    for fileName in fileNames:
        with open(fileName, 'r') as fin:
            fout.write(fin.read())
            fout.write('\n') # if you want that 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T23:01:04.477

尝试添加换行符

```
 for lines in chain(*infiles):
       fout.write(lines)
       if not lines.endswith('\n'):
           fout.write('\n') 
```

* * *

正如[mtth](https://stackoverflow.com/questions/15046703/join-plenty-of-files-in-python/15046730#comment21151206_15046730)所建议的，您可以逐个文件地执行此操作：

```
from itertools import chain

infiles = [open('{}_example.txt'.format(i+1), 'r') for i in xrange(100)]
with open('example.txt', 'w') as fout:
    for infile in infiles:
        fout.write(infile.read())
        fout.write('\n') 
```

# javascript - 多位数字的Javascript排序

> ID：15046704
> 
> 赞同：3
> 
> 时间：2013-02-23T22:58:30.367
> 
> 标签：javascript, jquery, sorting

我有一个 ul ，我正在尝试使用 javascript （或者如果更容易或必要的话，使用 jQuery ）进行排序：

```
<ul>
  <li>1 - 5 days</li>
  <li>11 - 15 days</li>
  <li>16 - 20 days</li>
  <li>6 days - 10 days</li>
</ul> 
```

我希望的顺序是：1 - 5 天、6 天 - 10 天、11 - 15 天、16 - 20 天。

现在，我总是可以更改个位数的项目，使 1 - 5 为 01 - 05，但从美学上讲，我希望有办法解决这个问题！

我已经尝试过[在 jQuery 中订购 <UL>/<OL> 的最简单方法是什么？](https://stackoverflow.com/questions/304396/what-is-the-easiest-way-to-order-a-ul-ol-in-jquery)，但它不适用于我有多个数字与文本混合的这种情况。

如果它有助于作为起点：http: [//jsfiddle.net/5gHet/](http://jsfiddle.net/5gHet/)

非常感谢！真的很感激任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T23:00:27.827

用于`parseInt`将字符串转换为出现的第一个数字。

```
items.sort(function(a,b){
  var keyA = parseInt($(a).text(), 10);
  var keyB = parseInt($(b).text(), 10);

  if (keyA < keyB) return -1;
  if (keyA > keyB) return 1;
  return 0;
}); 
```

仅供参考，如果在第一个数字之前有非数字/空白字符，`parseInt()`将返回`NaN`，因此您需要手动提取数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T23:02:34.190

在空格上拆分字符串，然后获取第一个数字。

```
var items = $('ul li').get();
items.sort(function(a,b){
  var strA = $(a).text().split(' ');
  var strB = $(b).text().split(' ');

  if (parseInt(strA[0]) < parseInt(strB[0])) return -1;
  if (parseInt(strA[0]) > parseInt(strB[0])) return 1;
  return 0;
});
var ul = $('ul');
$.each(items, function(i, li){
  ul.append(li);
}); 
```

演示地址：http: [//jsfiddle.net/5gHet/1/](http://jsfiddle.net/5gHet/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T23:35:53.600

## [小提琴](http://jsfiddle.net/vol7ron/5gHet/3/)

除了 parseInt 你还可以做一些正则表达式：

```
var $items = $('ul li');
var regex_first_num = /(\d+)/;

$items.sort(function(a,b){
  var keyA = $(a).text().match(regex_first_num)[0] *1;
  var keyB = $(b).text().match(regex_first_num)[0] *1;
  return keyA > keyB;
});

$('#newlist').append($items.clone()); 
```

# php - 将每个文本字段保留在单独的行中

> ID：15046707
> 
> 赞同：1
> 
> 时间：2013-02-23T22:59:05.483
> 
> 标签：php, symfony, doctrine-orm

我有以下代码，我相信这不是做我想做的事情的正确方法..

这是我想要完成的

我有一个页面可以添加新的语言键和该键的翻译。翻译文本框是动态的（来自语言表）。每个文本字段的名称是该语言的区域设置（也存储在语言表中），我用它来获取语言 ID（链接在翻译表中）

## 这是我的数据库表

## 语

id (AI) --------> 语言ID

语言环境

语言名称

* * *

## 翻译

身份证 (AI)

语言标识

语言键

翻译

* * *

所以从语言表中我得到了应该在那里的文本框列表并循环它们

当用户点击保存时，我使用以下方式保存他输入的内容

```
 if ($form->isValid()) {
      print_r($form->getData()); // debug

      foreach($form->getData() as $key => $value){ // get the submitted data
        $oTranslation = new Translations(); // creat a new entity object 
        if($key == 'languageKey'){ // if it was the language key text field
          $languageKey = $value;
          continue;
        }
        $locale = $key; // the locale to extract the language id later on
        $translation = $value;
        //----- start getting the language id
        $language = $this->getDoctrine()
                    ->getRepository('CodeizSDBTranslatorBundle:Languages');
        $query = $language->createQueryBuilder('l')
                           ->select('l.id')
                           ->where('l.locale = :locale')
                           ->setParameter('locale' , $locale)
                           ->getQuery();
        $id = $query->getResult();
        //----- end getting the language id

        $oTranslation->setLanguageId($id[0]['id']); // setting the vlaues
                     $oTranslation->setLanguageKey($languageKey);
                     $oTranslation->setTranslation($translation);
                  $em = $this->getDoctrine()->getManager();
      $em->persist($oTranslation); 
      $em->flush();// getting them into the database
      }

      return $this->redirect($this->generateUrl('codeiz_sdb_translator_addlanguagekey')); // redirect to some place
  } 
```

我知道我确实完成了工作，但这是我的问题..

他们是将数据正确保存到数据库的方式还是有更好的方法..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:59:51.570

如果您的`Translation`实体与 有关系`Locale`，您可以轻松地创建一个`Translation`包含三个字段的表单：（`language_id`实体类型）`language_key`和`translation`（两种文本类型）。您的实体类型不应该是多个。查看[表格](http://symfony.com/doc/current/reference/forms/types/entity.html)。这样，您可以将控制器代码减少到几行。

也看看[教义协会](http://docs.doctrine-project.org/en/latest/reference/association-mapping.html)。~~我现在无法向您展示一些代码（我正在使用我的手机），但我相信您会很快找到方法~~。

**编辑**：基本上你的表格看起来像：

```
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class TranslationType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('language_id', 'entity', array(
                'class'    => 'AcmeHelloBundle:Language', // The entity
                'property' => 'language_name',            // The label to show
        ))
        ->add('language_key')
        ->add('translation');
    }

    public function getName()
    {
        return 'translation';
    }
} 
```

不要忘记在`Translation`and之间添加正确的关联`Language`（可能您想要单向多对一关联）。当然，还有验证规则（查看[Count](http://symfony.com/doc/current/reference/constraints/Count.html)）。

这假设您至少使用 Symfony 2.1.0。

# java - 如何从不是用 maven 构建的 jar 中排除一个类作为 maven 依赖项？

> ID：15046710
> 
> 赞同：2
> 
> 时间：2013-02-23T22:59:20.837
> 
> 标签：java, maven, javafx-2, javafx, maven-3

我正在尝试构建一个简单的**javafx**应用程序以在阅读 java web 服务时使用基于 SOAP 的 web*服务：启动和运行*书（问题不是关于 java web 服务），我正在使用：-netbeans 7.3- [javafx-maven-plugin 1.5](https://github.com/zonski/javafx-maven-plugin)用于管理依赖项（我正在使用[maven 3.0.4](http://maven.apache.org/docs/3.0.4/release-notes.html)） - [tiwulfx 1.1](http://tiwulfx.panemu.com/)与 POJO 交互

这是我的**POM**文件：

```
<groupId>org.tarrsalah</groupId>
  <artifactId>teams-client</artifactId>
  <version>0.0.99</version>
  <packaging>jar</packaging>

  <name>teams-client</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding> 
    <netbeans.hint.license>apache20</netbeans.hint.license>
  </properties> 

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>

    <dependency>
      <groupId>commons-logging</groupId>
      <artifactId>commons-logging</artifactId>
      <version>1.1.1</version>
      <scope>compile</scope>
    </dependency
    >
    <dependency>      
      <groupId>org.apache.poi</groupId>
      <artifactId>poi</artifactId>
      <version>3.8</version>
    </dependency>

    <dependency>
      <groupId>com.panemenu</groupId>
      <artifactId>tiwulfx</artifactId>
      <scope>compile</scope>
      <version>1.1</version>
      <type>jar</type>    
    </dependency>

    <dependency>
      <groupId>commons-beanutils</groupId>
      <artifactId>commons-beanutils</artifactId>
      <scope>compile</scope>
      <version>1.8.3</version>
    </dependency>
  </dependencies>     

  <build>
    <plugins>
      <plugin>
        <groupId>org.jvnet.jax-ws-commons</groupId>
        <artifactId>jaxws-maven-plugin</artifactId>
        <version>2.2</version>
        <executions>
          <execution>
            <goals>
              <goal>wsimport</goal>
            </goals>
            <phase>generate-sources</phase>
          </execution>
        </executions>
        <configuration>         
          <wsdlUrls>
            <wsdlUrl>http://localhost:8080/teams?wsdl</wsdlUrl>
          </wsdlUrls>
          <packageName>org.tarrsalah.teams.client.generated</packageName>          >
        </configuration>
      </plugin>            

      <plugin>
        <groupId>com.zenjava</groupId>
        <artifactId>javafx-maven-plugin</artifactId>
        <version> 1.5 </version>
        <configuration>         
          <mainClass>org.tarrsalah.teams.client.app.App</mainClass>
          <jarFileName>teams-client.jar</jarFileName>
          <vendor>tarrsalah</vendor>                                                           
        </configuration>                                    
      </plugin>
    </plugins>
  </build>
</project> 
```

我下载了[tiwulfx](http://tiwulfx.panemu.com/) jar 文件并在**POM**文件中添加了所有依赖项，并将其安装在我的 maven 本地存储库中（该项目使用 netbeans/ant 简单构建并仅提供一个 jar 文件）。

我正在尝试构建一个独立的可运行 jar，当我运行时： mvn clean compile jfx:build-jar

我收到此构建错误消息：

```
[INFO] Java home is: /home/tarrsalah/local/jdk1.7.0_15/jre
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 14.445s
[INFO] Finished at: Sat Feb 23 23:39:31 CET 2013
[INFO] Final Memory: 21M/350M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal com.zenjava:javafx-maven-plugin:1.5:build-jar (default-cli) on project teams-client: Invocation of JavaFX method 'packageAsJar' failed with an error. It's possible this plugin is not compatible with the version of JavaFX you are using. InvocationTargetException: Error: Failed to create jar file teams-client-0.0.99-jfx.jar: duplicate entry: com/javafx/main/Main.class -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

似乎 javafx 类已经包含在[tiwulfx jar 文件中，并且与](http://tiwulfx.panemu.com/)[javafx-maven-plugin](https://github.com/zonski/javafx-maven-plugin) 在打包阶段导入的 JDK（我使用的是 1.7u15）中的 javafx 类发生冲突。

这就是树依赖项的样子：

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building teams-client 0.0.99
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ teams-client ---
[INFO] org.tarrsalah:teams-client:jar:0.0.99
[INFO] +- junit:junit:jar:3.8.1:test
[INFO] +- commons-logging:commons-logging:jar:1.1.1:compile
[INFO] +- org.apache.poi:poi:jar:3.8:compile
[INFO] |  \- commons-codec:commons-codec:jar:1.5:compile
[INFO] +- com.panemenu:tiwulfx:jar:1.1:compile
[INFO] \- commons-beanutils:commons-beanutils:jar:1.8.3:compile
[INFO]    \- (commons-logging:commons-logging:jar:1.1.1:compile - omitted for duplicate)
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2.137s
[INFO] Finished at: Sun Feb 24 00:21:34 CET 2013
[INFO] Final Memory: 10M/163M
[INFO] ------------------------------------------------------------------------ 
```

**我的问题是**：如何在包阶段从[tiwulfx](http://tiwulfx.panemu.com/)中排除 javafx 类（包） ？这可能是一个微不足道的问题，因为我是 Maven 生态系统的新手。

> **PS：运行后生成的jar没有任何问题，我只是想得到一个完美的构建结果。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T23:44:25.377

由于您需要`tiwulfx`手动将 jar 添加到您的 Maven 存储库中（它不是由 Maven 构建的，也不是托管在任何地方的 Maven 存储库中），您不妨先手动重新打包它。只需在 zip 编辑器中打开 jar 并删除该`com/javafx`文件夹。然后运行通常的`install:install-file`目标。

为 jar 选择版本号时，最好添加一个额外的字符串，以表明它与原始网站中的 jar 略有不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T04:27:13.580

现在 TiwulFX 在 Maven 中可用。

```
<dependency>
    <groupId>com.panemu</groupId>
    <artifactId>tiwulfx</artifactId>
    <version>1.1</version>
</dependency> 
```

谢谢。

# javascript - Javascript变量问题

> ID：15046713
> 
> 赞同：0
> 
> 时间：2013-02-23T22:59:37.357
> 
> 标签：javascript

为什么会这样

[http://jsfiddle.net/BkGxq/1/](http://jsfiddle.net/BkGxq/1/)

返回“$未定义”？

如果我不这样做

```
 level_prices['f'.i] = i; 
```

做

```
 level_prices[i] = i; 
```

它有效，（我也在 html 中将其更改为 value="3" 而不是 value="f3"

但我需要以 f3 而不是 3 访问它，为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T23:01:26.577

点不是[字符串连接](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/String_Operators)运算符，而是[属性访问器](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Member_Operators)。你要

```
level_prices['f'+i] = i; 
```

`'f'.i`获取字符串对象的文字“i”属性，即`undefined`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T23:01:14.247

`+`在 JavaScript 中，您可以使用而不是连接字符串`.`

尝试：

```
level_prices['f'+i] = i; 
```

编辑：更新您的 JSFiddle：http: [//jsfiddle.net/BkGxq/2/](http://jsfiddle.net/BkGxq/2/)

# ruby-on-rails - 为什么有这么多 Rails 记录器，为什么会有锁？

> ID：15046715
> 
> 赞同：1
> 
> 时间：2013-02-23T22:59:44.297
> 
> 标签：ruby-on-rails, ruby-on-rails-3, daemon

我一直在运行一个可以访问 rails 环境的[守护进程。](http://daemons.rubyforge.org/)通过搜索，我发现这样做时需要处理两件事：

1.  重新初始化到 Rails 数据库的连接
2.  重新初始化 Rails 记录器

我了解需要重新初始化与数据库的连接，但不需要重新初始化记录器。我看到了[这段代码](https://github.com/synth/Daemonator/blob/master/daemonator.rb)，它旨在使使用 Rails 运行守护程序更容易一些。它为以下每个创建新的 BufferedLogger 实例：`Rails`, `ActiveRecord::Base`, `ActionController::Base`,`ActionMailer::Base`

有两件事我不清楚：

1.  为什么有四种不同的记录器？如果我`logger.info`从控制器中的代码与模型中的代码调用，是不是使用相同的 Rails 记录器？
2.  为什么必须在守护进程中重新初始化记录器？如果不是，我注意到记录器拒绝记录，说有锁。但为什么？

我发现的一件事是，有很多人很难理解 Rails 记录器。如果已经有一些博客文章涵盖了这个主题，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:27:35.423

好吧，我认为 Rails 3 中引入了 4 个记录器。其背后的想法是每个组件（ActiveRecord、ActionPack、ActionMailer）并不真正相互依赖，应该可以独立使用它们。因此他们每个人都有自己的记录器对象的原因。我认为它在 railties gem 中，所有这 4 个记录器基本上都设置为相同的实例，因此在其中任何一个上调用 logger.info 都意味着相同的结果。但是理论上，您可以将 ActiveRecord 记录器设置为其他内容。

至于为什么需要重新初始化记录器，我不知道......

# parallel-processing - 简单的 MPI_Sendrecv 程序给出一个信号 11 (segfault)

> ID：15046717
> 
> 赞同：0
> 
> 时间：2013-02-23T22:59:49.263
> 
> 标签：parallel-processing, mpi

我对 MPI 很陌生。我正在尝试使用进程运行以下`MPI_Sendrecv`程序`p`。每个进程都有 4 个长度`n`为 double 类型的数组（A、B、C、D）。现在这就是我想要做的`for i=0,...,p-1`：

进程 i 在进程 (i+1)%p 中将 B 发送给 A

进程 i 在进程 (i-1) 中将 C 发送给 D%p

进程 i 从 (i-1)%p 接收 B 到 A

进程 i 从 (i+1)%p 接收 C 到 D

我有以下代码：

```
#include<stdio.h>
#include<mpi.h>
#include<math.h>

main(int argc, char *argv[]){

/*Initialize the MPI environment          */
/******************************************/
MPI_Init(&argc, &argv);

/*variables that will be used for sending*/
/*and receiving messages.                */
/*****************************************/
int n=3;
int p;
int myRank;
int comm;

double A[n];
double C[n];
double B[n];
double D[n];

/*Get the number of processors and their  */
/*rank.                                   */
/******************************************/
comm = MPI_COMM_WORLD;
MPI_Comm_size(comm, &p);
MPI_Comm_rank(comm, &myRank);

/*Initialize the arrays with the given    */
/*initial values.                         */
/******************************************/
for(int i=0; i<n; i++){
  A[i]=0;       D[i]=0;
  B[i]=-myRank; C[i]=myRank;
}

int left = myRank-1; int right = myRank+1;

if(left<0){
  left = p-1;
}

if(right==p){
  right = 0;
}

MPI_Sendrecv(&B,n,MPI_DOUBLE,right,1231,
             &A,n,MPI_DOUBLE,left,1231,
             comm,MPI_STATUS_IGNORE);
MPI_Sendrecv(&C,n,MPI_DOUBLE,left,1232,
             &D,n,MPI_DOUBLE,right,1232,
             comm,MPI_STATUS_IGNORE);

/*Close the MPI environment.              */
/******************************************/
MPI_Finalize();

/*Print the updated values.               */
for(int i=0; i<p; i++){
  printf("\n");
  for(int j=0; j<n; j++){
    if(myRank==i){
      printf("rank= %d, Updated Values = A[%d]= %f, B[%d]= %f, 
              C[%d]= %f, D[%d]= %f\n", myRank,j,A[j],j,B[j],j,C[j],j,D[j]);                   
    }
  }
 }

 } 
```

但是，每当我运行此代码时，我都会得到以下信息：

```
vincent% mpicc -o hmw2Prob1 hmw2Prob1.c
vincent% mpirun -np 4 hmw2Prob1
2: signal 11 received, exiting..
2: Signal sent from unknown source.
3: signal 11 received, exiting..
3: Signal sent from unknown source.
0: signal 11 received, exiting..
0: Signal sent from unknown source.
1: signal 11 received, exiting..
1: Signal sent from unknown source.
vincent% 
```

我在这里阅读了几篇文章并尝试了一些想法，但到目前为止没有任何效果。我将不胜感激您能提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:57:45.643

`MPI_Sendrecv(B ...`删除地址 (&) 并在所有情况下都使用 like 。`B`是数组/缓冲区`&B`的地址，保存数组/缓冲区地址的变量的地址。在使用 MPI（和一般的 C）时，必须对指针有一个很好的理解——不幸的是，我没有很好的材料来解释这一点，但我相信你会找到很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:54:04.247

感谢那些花时间阅读我的问题的人。最后，我的代码有什么问题是在 Sendrecv 中：

```
MPI_Sendrecv(&B,n,MPI_DOUBLE,right,1231,
         &A,n,MPI_DOUBLE,left,1231,
         comm,MPI_STATUS_IGNORE);
MPI_Sendrecv(&C,n,MPI_DOUBLE,left,1232,
         &D,n,MPI_DOUBLE,right,1232,
         comm,MPI_STATUS_IGNORE); 
```

您**不能**使用 MPI_STATUS_IGNORE，我还没有弄清楚 MPI 的所有内部工作原理，但从我所阅读的内容来看，系统需要 MPI_Status *status 才能解决消息传递顺序。

无论如何，如果有人对进一步学习 MPI 有任何建议，请告诉我。

# objective-c - 具有 6px 边框底部的无边框 NSTextField？

> ID：15046721
> 
> 赞同：0
> 
> 时间：2013-02-23T23:00:21.340
> 
> 标签：objective-c, cocoa, nsview, nstextfield

是否可以将 NSTextField 子类化，并仅在底部添加 6px 边框？其他边应该是无边界的。没有阴影，什么都没有。

我尝试使用 6px 高的 NSView 子类来复制它（所以有 2 个单独的对象），但是当我快速滚动时，视图本身绘制得太多，似乎存在某种滞后（尽管我只做 NSRectFill( [自我界限]）。

这就是为什么我想继承 NSTextField 的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T23:12:28.547

NSTextField 的绘制实际上是由 NSTextFieldCell 的一个实例完成的，所以这就是你要继承的，你要覆盖的方法是`-drawInteriorWithFrame:inView:`. 在 .xib 文件中设置文本字段的单元格类有点麻烦，但您可以通过查看视图层次结构、展开文本字段旁边的箭头并选择那里的单元格，然后设置它的自定义类。

# jquery-ui - $(this) 的 jQueryUI Spinner 'undefined' 错误

> ID：15046723
> 
> 赞同：0
> 
> 时间：2013-02-23T23:00:23.053
> 
> 标签：jquery-ui

我正在尝试在修改微调器控件的值时更改其背景颜色。

我有以下代码：

```
<h2>SpinnerTest</h2>
<input id="spinner1" type="spinner" value="5" />
<input id="spinner2" type="spinner" value="10" />

<script type="text/javascript">
    //Line1:  $("input[type='spinner']").spinner({ min: 0, max: 25, stop: function () { alert(this.id); } });
    //Line2:  $("input[type='spinner']").spinner({ min: 0, max: 25, stop: function () { alert($(this).id); } });
</script> 
```

当我使用 Line1 时，我会收到带有正确微调器控件 ID 的警报。但是，当我使用 Line2 时，我会收到一条带有“未定义”的警报。

最终，我想在 spinner 元素上调用 toggleClass()。因此，为什么我要尝试使用 $(this)。

我对 jQuery 比较陌生 - 有人可以帮助解释为什么 $(this) 不起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:05:41.303

[`.id`](http://api.jquery.com/?s=.id)不是 jquery 对象的有效属性。要获取元素的 id，请使用[`.attr()`](http://api.jquery.com/attr/): `$(this).attr("id")`。

该`.attr()`方法，如果只提供一个参数，则获取相应属性的值。如果提供了第二个参数，它将将该值更改为提供的第二个参数。

# google-maps-api-3 - 谷歌地图 v3 的 webview 显示空白屏幕

> ID：15046734
> 
> 赞同：1
> 
> 时间：2013-02-23T23:01:23.647
> 
> 标签：google-maps-api-3

我正在按照教程为一个显示简单地图的项目实施 google maps v3，在找出 mostRecentLocation 空指针错误之后，它现在显示地图并以我的位置为中心。

我认为我真的应该从我的资产文件夹中加载一个 html 文件，其中包含 google maps api 的 javascript 和 api 链接，这将允许使用内置的缩放按钮？当我这样做时，webview 显示一个空屏幕。我应该设置 webview 来加载 html 吗？如果是这样，谁能告诉我为什么我可能会有一个空白屏幕？

我有 api v1 和 2 工作，但如果可以的话，我更愿意使用 v3。

```
private void setupWebView(){
    final String centerURL = "javascript:centerAt(" +  mostRecentLocation.getLatitude() + "," +  mostRecentLocation.getLongitude()+ ")";  
    webView = (WebView) findViewById(R.id.webview);
    WebSettings settings = webView.getSettings();  
    webView.getSettings().setJavaScriptEnabled(true);
    settings.getJavaScriptEnabled();
    settings.getBuiltInZoomControls();
    settings.setBuiltInZoomControls(true);
    //Wait for the page to load then send the location information  
    webView.setWebViewClient(new WebViewClient());  
    //webView.loadUrl("file:///android_asset/html/index.html");
    webView.loadUrl(MAP_URL);
    /** Allows JavaScript calls to access application resources **/  
    webView.addJavascriptInterface(new JavaScriptInterface(), "android");
    } 
```

和html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rel="stylesheet" type="text/css" href="theme.css"> 
<script type="text/javascript"   src="http://maps.googleapis.com/maps/api/js?&sensor=true"></script>
<script type="text/javascript">  
var map;  function initialize() {    
var latitude = 0;    
var longitude = 0;    
if (window.android){      
    latitude = window.android.getLatitude();      
    longitude = window.android.getLongitude();    
    }    
var myLatLng = new google.maps.LatLng(latitude,longitude);    
var myOptions = {      
        zoom: 20,      
        center: myLatLng,      
        mapTypeId: google.maps.MapTypeId.ROADMAP  

        }    
map = new google.maps.Map(document.getElementById("map_canvas"),      myOptions);  }  
function centerAt(latitude, longitude){    
    myLatlng = new google.maps.LatLng(latitude,longitude);    
    map.panTo(myLatLng);
    }
</script>
<title>Insert title here</title>
</head>
<body>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:13:29.403

你需要一个`<div id="map_canvas"></div>`在你的身体，所以谷歌知道在哪里放置地图（这是你的 JS 中用于新地图的元素）。div 还需要一个大小。

添加这个工作

```
<body>
  <div id="map_canvas" style="height: 100px; width=100px;"></div>
  <script type="text/javascript">initialize();</script>
</body> 
```

# vbscript - 如何启用 %UserProfile% 以使用文件夹重定向进行脚本编写？

> ID：15046735
> 
> 赞同：3
> 
> 时间：2013-02-23T23:01:24.210
> 
> 标签：vbscript

我正在尝试使用文件夹重定向，在设置好它之后，我很快意识到任何具有环境变量（如 %UserProfile%）的 VBS 脚本都变得不可用。

例如：

```
 C:\MD %UserProfile%\Desktop\Not_Created_On_Real_Desktop\ 
```

和

```
'Place to deposit excel output file
Depo=oShell.ExpandEnvironmentStrings("%userprofile%" & "\Desktop\Folder_This_User_Needs_Easy_Access_To\")
if not objfso.folderexists(Depo) then
objFSO.CreateFolder(Depo)
end if 
```

使用文件夹重定向时，这些不再起作用。我希望有一个解决方法，因为我现有的很多脚本都依赖于这个变量保持有效。我发现 .NET 能够通过以下方式提取重定向的文件夹：

```
Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory) 
```

不过，我没有太多运气找到 VBS 的等价物。

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T23:35:25.780

我认为 SpecialFolders 是您正在寻找的

```
Depo=oShell.SpecialFolders("Desktop") & "\Test" 
```

它还将返回带有重定向文件夹的桌面文件夹的位置。

# javascript - 使用 Javascript 或 Ruby 对尺寸进行分类的算法

> ID：15046737
> 
> 赞同：0
> 
> 时间：2013-02-23T23:01:27.997
> 
> 标签：javascript, ruby-on-rails, algorithm, logic

我需要一些帮助来解决我正在为我们的库存管理工作的 Web 应用程序上的这个问题。那么让我来详细介绍一下：

*   每个产品在宽度和高度（我们称它们为 sizeW 和 sizeH）和面积（只是两个维度的乘积）中都有一个尺寸维度

*   每个产品都需要归类到一个尺寸类别，让我列出几个：50 x 100、80 x 150、100 x 170、150 x 200、......总共12个类别

*   问题是每个产品都不是根据尺寸类别准确制作的，所以如果产品是 55 x 96 或 44 x 105，那么它将属于 50 x 100 类别。

我需要编写一个算法，可以将项目分类到相关类别中，但要考虑到各种大小的不规则性。我们不希望用户手动输入类别，因为我们希望减少数据输入时间，但如果算法提示错误或产品不符合标准类别，则用户可以接管并手动更改/添加类别.

如果你们能就这个问题提出想法，我将不胜感激，该应用程序是使用服务器端的 Rails 和客户端的 Javascript 构建的。如果解决方案是 Javascript 并让浏览器处理算法而不是在服务器上加载负载，我会更喜欢。

谢谢，

乌梅尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:17:48.297

我会做这样的事情（寻找区域）。您还可以优化搜索，使其不是线性的。

```
var categories {
  names: ['50 x 100', '80 x 150', '100 x 170', '150 x 200'],
  areas: [5000, 12000, 17000, 30000],
  sizes: 4
}

function set_category(w, h) {
  var area = w * h;

  for(var i = 1; i < categories.sizes; i++) {
    var diff1 = 0, 
        diff2 = 0;

    if(area <= categories.areas[i]) {
      diff1 = categories.areas[i] - area;
      diff2 =  area - categories.areas[i-1];

      if(diff1 < diff2) return categories.names[i];
      return categories.names[i-1];
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T23:48:24.173

如果类别的纵横比都相似，我会选择 Kaeros 给出的答案。但是，如果您的类别具有不同的纵横比，例如一个类别的尺寸为 80 x 80，而另一个类别的尺寸为 20 x 320，您可能会得到一些非常奇怪的错误分类。

在第二种情况下，我将使用每个类别与产品尺寸之间的最小二乘距离，或者对于产品 P，使用最小化的类别 C：

(C.height - P.height) ² + (C.width - P.width) ²

只有 12 种可能性来计算它根本不需要任何时间，尽管 Kaeros 的答案具有能够预先计算区域的优势。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T23:16:40.043

你的问题是分类。您可以使用多种分类方法来解决此问题。您的选择将取决于特征数量和样本数量。您应该找到 Ruby 的机器学习算法的实现。您可以使用[http://www.ruby-doc.org/stdlib-1.9.2/libdoc/matrix/rdoc/Matrix.html](http://www.ruby-doc.org/stdlib-1.9.2/libdoc/matrix/rdoc/Matrix.html)来实现这些，或者您可以找到现有的 Ruby 机器学习库，例如 Python 的[sci-kit](http://scikit-learn.org/stable/)。

# ping - 请求超时（有线连接）

> ID：15046750
> 
> 赞同：1
> 
> 时间：2013-02-23T23:02:35.287
> 
> 标签：ping, router

我在 ping 车库中的下一个路由器时遇到问题（光纤连接）

我的路由器 ip 192.168.1.1

```
Pinging 192.168.1.1 with 32 bytes of data:
Reply from 192.168.1.1: bytes=32 time<1ms TTL=64
Reply from 192.168.1.1: bytes=32 time<1ms TTL=64
Reply from 192.168.1.1: bytes=32 time<1ms TTL=64
Reply from 192.168.1.1: bytes=32 time<1ms TTL=64
Reply from 192.168.1.1: bytes=32 time<1ms TTL=64
Reply from 192.168.1.1: bytes=32 time<1ms TTL=64
Reply from 192.168.1.1: bytes=32 time<1ms TTL=64
Reply from 192.168.1.1: bytes=32 time<1ms TTL=64
Reply from 192.168.1.1: bytes=32 time<1ms TTL=64
Reply from 192.168.1.1: bytes=32 time<1ms TTL=64
Reply from 192.168.1.1: bytes=32 time<1ms TTL=64
Reply from 192.168.1.1: bytes=32 time<1ms TTL=64
Reply from 192.168.1.1: bytes=32 time<1ms TTL=64 
```

问题在于下一个跃点，即 ISP 安装的我的下一个网关

```
Pinging 79.134.128.1 with 32 bytes of data:
Request timed out.
Reply from 79.134.128.1: bytes=32 time=6ms TTL=252
Reply from 79.134.128.1: bytes=32 time=2ms TTL=252
Reply from 79.134.128.1: bytes=32 time=5ms TTL=252
Reply from 79.134.128.1: bytes=32 time=4ms TTL=252
Request timed out.
Request timed out.
Reply from 79.134.128.1: bytes=32 time=4ms TTL=252
Reply from 79.134.128.1: bytes=32 time=10ms TTL=252
Reply from 79.134.128.1: bytes=32 time=7ms TTL=252
Request timed out.
Request timed out.
Reply from 79.134.128.1: bytes=32 time=3ms TTL=252
Reply from 79.134.128.1: bytes=32 time=5ms TTL=252
Reply from 79.134.128.1: bytes=32 time=5ms TTL=252
Request timed out.
Reply from 79.134.128.1: bytes=32 time=4ms TTL=252
Reply from 79.134.128.1: bytes=32 time=6ms TTL=252
Reply from 79.134.128.1: bytes=32 time=2ms TTL=252
Reply from 79.134.128.1: bytes=32 time=3ms TTL=252
Reply from 79.134.128.1: bytes=32 time=5ms TTL=252
Reply from 79.134.128.1: bytes=32 time=4ms TTL=252
Request timed out.
Reply from 79.134.128.1: bytes=32 time=8ms TTL=252
Reply from 79.134.128.1: bytes=32 time=2ms TTL=252
Reply from 79.134.128.1: bytes=32 time=7ms TTL=252
Reply from 79.134.128.1: bytes=32 time=6ms TTL=252
Request timed out.
Reply from 79.134.128.1: bytes=32 time=5ms TTL=252
Request timed out. 
```

我有互联网丢失以及ping yahoo.com

我尝试使用笔记本电脑 ping 路由器，但出现同样的问题

可能是什么问题？

# java - 将 null 传递给首选 String 而不是 Object 的方法

> ID：15046763
> 
> 赞同：13
> 
> 时间：2013-02-23T23:04:09.793
> 
> 标签：java, string, oop, object

我在我的程序中遇到了一个问题，我用下面的一个小代码片段说明了这一点。谁能解释为什么会这样？

```
class ObjectnullTest {

    public void printToOut(String string) {

        System.out.println("I am null string");
    }

    public void printToOut(Object object)

        System.out.println("I am  null object");
    }

class Test {

    public static void main(String args[]) {

        ObjectnullTest a = new ObjectnullTest();
        a.printToOut(null);

    }
} 
```

这总是打印`I am null string`。

我想知道原因，以便我可以修改代码。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-23T23:05:53.080

这是因为在方法重载的情况下

> 在编译时选择最具体的方法。

因为“java.lang.String”是比“java.lang.Object”更**具体的类型**。在您的情况下，选择了将“String”作为参数的方法。

它清楚地记录在[**JLS**](http://docs.oracle.com/javase/specs/jls/se7/jls7.pdf)中：

> 第二步在上一步中确定的类型中搜索成员方法。此步骤使用方法的名称和参数表达式的类型来定位可访问且适用的方法，即可以在给定参数上正确调用的声明。
> 
> 可能有不止一种这样的方法，在这种情况下选择最具体的一种。最具体方法的描述符（签名加返回类型）是在运行时用于执行方法分派的描述符。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-23T23:22:31.370

我同意关于选择最具体方法的现有评论。你可以强制你的 null 被视为一个对象引用，通过强制转换它来消除字符串参数方法的使用：

```
a.printToOut((Object)null); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-31T04:23:53.923

请参阅 jls 的第 15.12.2.5 节，详细说明如何选择它

**在编译时选择最具体的方法**

[JLS 15.12.2.5 的链接](https://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.5)

# java - IntellijIDEA 无法识别 Maven 依赖项中指定的类

> ID：15046764
> 
> 赞同：65
> 
> 时间：2013-02-23T23:04:20.893
> 
> 标签：java, maven, intellij-idea

我在 IntellijIDEA 中有一个使用 Maven 创建的项目。然后，我在 Pom.xml 文件中指定了一组依赖项和外部存储库。

如果我执行“mvn install”，该项目在命令行上构建良好。当我在 IDE 中打开任何代码文件时，尽管它说所有由 Maven 依赖项处理的类都无法识别 - 如果我从未将所需的 JAR 添加到构建路径中，那么对于普通项目就会如此。

我知道在我的 Eclipse Maven 项目（而不是 IntelliJ）中，它通常会在左侧显示一个额外的目录，上面写着“Maven Dependencies”并列出了通过 maven 拉入的 JAR。我在这里看不到。我究竟做错了什么？

* * *

**这是我的屏幕的样子：**

![IDE 映像](../Images/0e1bc9e3e20d760e694aa43758814f8a.png)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-01T19:29:04.100

由于某种原因，重新导入并没有奏效。看了这个之后：

[http://www.jetbrains.com/idea/webhelp/maven-importing.html](http://www.jetbrains.com/idea/webhelp/maven-importing.html)

我设置了自动导入，然后问题就消失了；希望它可以帮助别人。感谢大家的想法:)。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-08-07T12:48:01.570

在新计算机上安装 IntelliJ IDEA 后，我发现自己遇到了同样的问题。

我不得不更新远程 Maven 存储库。( `Settings > Maven > Repositories`)

![在此处输入图像描述](../Images/0838ba9655308e2a2439e1b166570da2.png)

本地和远程仓库都需要更新。遥控器在此之前从未更新过。重新启动后一切正常。您可能必须重新导入您的项目。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2015-12-11T06:49:58.317

你可以去：

文件 > 设置 > 构建、执行、部署 > 构建工具 > Maven

并检查您的 pom.xml 是否不在“忽略的文件”列表中。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2020-12-10T06:54:53.313

右键单击 pom.xml -> 添加为 Maven 项目 -> 重新导入

[![Maven 导入](../Images/aabe730c5381215bc717b6003c0713e6.png)](https://i.stack.imgur.com/wYl8L.gif)

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2014-07-29T22:05:20.833

我遇到了类似的问题。对我来说，最终是我错误地导入了项目。我一直在做

```
import project
    <navigate to existing project and click top level directory>
    follow the wizard 
```

解决我的 Maven 问题的方法是

```
import project
    <navigate to existing project and click the pom.xml
    follow the wizard 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2018-12-05T14:29:43.937

对我来说 File>>Invalidate Cache/Restart>>Invalidate and Restart 在 IntelliJ 中工作

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-08-06T15:48:02.397

Idea无法使用maven下载所有依赖的jar包，尝试如下操作：

**mvn -U 想法：想法**

然后所有依赖的jar包都是从maven仓库下载的

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-02-27T09:56:07.543

通过 Intellij 对存储库进行简单的重新导入和/或更新并没有解决问题。

相反，我不得不删除完整的`~/.m2/repository`目录，让 maven 自己整理所有内容。后来`Maven -> Reimport`把它弄完了。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-12-07T20:03:06.740

几天前遇到了“相同”的问题。它可能不相关，因为我的问题更具体到 Spring boot，但是当我努力解决它并尝试了这篇文章中的所有解决方案时，我将分享我的经验。

我想做的是将我的一个spring boot应用程序作为maven依赖项添加到另一个项目中。依赖关系已解决，但我无法访问我的课程。

> 当没有声明打包时，Maven 假定默认打包是 JAR。Spring Boot Maven 插件生成的 JAR 会覆盖 Maven 生成的默认 JAR。

解决方案是：

> 我们找到的解决方案是生成另一个 JAR，该 JAR 将用作从其他项目导入的依赖项。

帮助我解决问题的完整[文章。](https://medium.com/xebia-france/import-spring-boot-application-as-a-maven-dependency-a25e03e5c3a)

希望它可以帮助某人。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-01-30T16:11:44.630

在将我的 Maven 项目重构为不同的模块后，我遇到了类似的问题。自行重新导入通常不起作用，但我发现删除 .iml 文件然后重新导入通常可以解决问题。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-03-17T13:09:14.723

由于我不明白的原因，就我而言，我需要在构建、执行、部署 > 构建工具 > Maven 中打开设置“始终更新快照”。

这使得 IntelliJ 重新下载依赖项并使其工作。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-05-12T06:54:52.893

就我而言，问题是项目位于 maven2 中，而 intellj 配置为 maven3。在设置中切换到 maven2 解决了问题

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-08-04T08:39:42.527

可能对仍然像我一样被困的其他人有用。建议的修复都没有奏效。实际上，在我解决了我的主要问题之前，我的主要问题是 maven 的安装位置。

就我而言，我没有使用标准位置。**在 Maven 设置（ Settings/Maven/Maven home repository** ）中更改该位置就可以了。

我的 2 美分。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-04-03T17:26:01.253

缓存导致问题！确保执行以下操作：

在您的终端中，转到项目/模块：

```
mvn clean install 
```

在您的 IntelliJ 中：

1.  文件 > 无效缓存 > 无效

2.  右键单击项目/模块 > Maven > 重新导入

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-11-03T06:10:54.660

对于我的情况，我应该离线检查工作

转到文件>设置>构建，执行，部署>构建工具>Maven然后检查脱机工作

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-10-01T07:39:08.697

在将 Intellij 升级到 1.4.15 后，这也发生在我身上。我试图以相同的结果重新导入整个项目，但启用 Maven 自动导入就可以了。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-04-14T22:35:25.337

看起来有几个合理的理由可以解释为什么 intelliJ 会忽略 pom 文件。以前的答案在我的情况下都不起作用，所以这是起作用的，以防其他人遇到这个问题：

在此示例中，IntelliJ 完全忽略了 module3。该目录中的 pom.xml 甚至没有被视为 maven pom。

我的项目结构是这样的：

```
myProject
    module1
    module2
    module3 
```

但是，我的（简化的）pom 结构是这样的：

```
<project>
    <modelVersion>4.0.0</modelVersion>
    <groupId>devs</groupId>
    <artifactId>myProject</artifactId>
    <version>0.0-SNAPSHOT</version>
    <packaging>pom</packaging>
    <name>myProject</name>

    <modules>
        <module>module1</module>
        <module>module2</module>
    <modules>

    <profiles>
        <profile>
            <id>CompleteBuildProfile</id>
            <modules>
                <module>module3</module>
            </modules>
        </profile>
    </profiles>
</project> 
```

为了解决这个问题，我修改了根`<modules>`元素以临时添加到 module3 中。

```
 <modules>
        <module>module1</module>
        <module>module2</module>
        <module>module3</module>
    <modules> 
```

接下来重新导入根 pom，IntelliJ 将添加模块。完成后，恢复 pom。IntelliJ 会询问您是否也想`module3`从项目结构中删除。单击`No`。

砰！完毕。Module3 工作，我可以再次从 IntelliJ 运行我的集成测试：D

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-04-19T11:00:14.477

这个问题是由于我在第一次启动 IntelliJ 时选择要导入的项目目录而不是`pom.xml`项目的文件引起的。

关闭有问题的项目，然后再次执行导入过程，但选择它会`pom.xml`在 IDE 中生成一个完全正常工作的项目。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-05-31T10:22:44.160

对我来说，问题似乎与 maven helper 插件（[https://plugins.jetbrains.com/plugin/7179?pr=idea](https://plugins.jetbrains.com/plugin/7179?pr=idea)）有冲突。

我禁用它，它再次工作:)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-12-13T11:08:43.757

转到文件 > 设置 > 构建、执行、部署 > 构建工具 > Maven 并检查 Maven 主目录。这应该与用于命令行的 Maven 安装相同

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-03-14T16:39:09.613

对我来说，诀窍是在文件 > 项目设置 > 模块 > 依赖项中添加依赖项。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-09-25T08:46:45.150

只需删除您项目的 .idea 文件夹，然后在 IntelliJ 中重新导入您的项目。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-10-31T07:58:01.937

如果您在 pom.xml 中有任何特定于您的组织的依赖项，那么您需要为您的项目更新 setting.xml 的路径，该路径默认设置为您在 Ubuntu 中的用户目录：/home/user/.m2/settings.xml - > （将其更改为您的 apache-maven conf 路径）

转到 -> intellij 设置 -> 构建、执行、部署 -> 构建工具 -> Maven -> 用户设置文件

[![更新 Setting.xml 文件 Intellij](../Images/365b7044b0089b72a3dea553797f6b67.png)](https://i.stack.imgur.com/VFkbe.png)

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2019-11-14T12:59:56.390

重新启动，无效的缓存，外部建筑，没有一个对我有用。

最后只有重新导入起作用了。为他人着想，将其作为答案：

```
Right click the project > Maven > Reimport 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-03-22T05:40:03.833

导入新项目时：

1.将项目中的所有模块识别为maven模块：文件--->新建项目设置-->构建执行部署-->构建工具-->maven--->导入--->启用“搜索递归项目”

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-10-14T14:35:32.993

选项1：右键单击主项目文件夹=>添加框架支持=>检查Maven选项

选项2：右键点击pom.xml文件，点击“Add as a maven project”

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2022-02-03T00:35:31.993

这发生在我从 Java 8 升级到 11 和 Spring 版本时。maven 部分中的所有依赖项都消失了，就好像不存在 pom 文件一样。能够通过做找到问题

```
mvn clean 
```

它向我展示了其中一个依赖项缺少版本标记，它需要一个。

```
<dependency>
        <groupId>com.googlecode.json-simple</groupId>
        <artifactId>json-simple</artifactId>
</dependency> 
```

将版本添加到上述依赖项后，它开始显示 maven 部分下的所有依赖项。

# objective-c - 在obj-c（幻灯片）中管理几个不能相互干扰的定时器的算法是什么？

> ID：15046772
> 
> 赞同：0
> 
> 时间：2013-02-23T23:05:59.920
> 
> 标签：objective-c, architecture, timer, core-animation, slideshow

我正在制作一个应用程序，它可以幻灯片显示几个视图、照片和类似的东西。如果用户不做任何事情，那么它每隔几秒就会改变一次视图。如果用户滑动，则幻灯片必须停止，让他手动导航。

在后台，应用程序检查新内容。如果有新内容可用，它必须向用户显示最新的视图（如果没有做任何事情）。

该应用程序全屏显示视图。如果用户点击视图，则会显示导航栏，以便他们可以更改设置。如果他们有一段时间什么都不做，那么幻灯片会重新开始，并且导航栏会被隐藏。

到目前为止，3个计时器。现在，我想知道是否有一种优雅的方法可以让它们不相互干扰。

如果用户正在浏览设置（在他离开之前）移动幻灯片是不正确的，在手动浏览每个视图时也不能打断他。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T00:03:23.813

只需创建 3 个计时器并根据您的算法进行管理。

```
@property (nonatomic, strong) NSTimer *slideshowTimer;
@property (nonatomic, strong) NSTimer *networkUpdatesTimer;
@property (nonatomic, strong) NSTimer *idleTimer; 
```

在正确的时刻以这种方式安排和取消每个计时器，

日程：

```
self.slideshowTimer = [NSTimer scheduledTimerWithTimeInterval:5.0 target:self selector:@selector(slideshowTimerFired:) repeats:NO]; 
```

实现您传递给计时器初始化方法的选择器。

计划外：

```
[self.slideshowTimer invalidate]; 
```

如您所见，每个特定的计时器都有一个特定的选择器。并且要小心，因为 NSTimer 会保留它自己的目标，直到它失效（计划外）。

# c# - Linq 是否会使后期升级我的应用程序变得更加昂贵？

> ID：15046773
> 
> 赞同：2
> 
> 时间：2013-02-23T23:06:07.923
> 
> 标签：c#, linq, entity-framework, entity

使用 Linq 是否会使后期维护/升级我的项目变得更加昂贵？

之前我会使用在代码投入生产后易于修改的存储过程。

我正在为一个拥有大量内联 sql 的遗留应用程序的客户工作。他们已经付费将这些内容放入需要快速响应时间的应用程序的存储过程中。他们对使用 Linq 的前景并不感到兴奋，因为在他们看来它也像内联 sql。

Linq 是否等同于内联 sql？我知道 Linq 会让我的生活更轻松，但是一两年后呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T23:10:21.663

只要现在表达更清晰，更容易理解，那么我很确定以后会更容易维护。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T23:54:06.903

我发现使用实体框架的唯一缺点是如果您需要进行紧急更改（比如说），您正在查看代码更改而不是仅仅修改存储过程。对于我们的环境，对数据库进行脚本更改比推出新代码要容易得多。因此，它在某种程度上归结为您在您的环境中更喜欢哪个，推送新的 .dll 或推送存储过程更改。

至于可维护性，我们使用 Entity Framework 已经有一段时间了，并且升级/可维护性问题为零。它易于编写，易于维护，如果您正确编写 Linq，则易于更新/更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T23:51:03.807

在所有内容都基于 proc 存储的应用程序中，新功能必须同时进行编码和脚本化——推出可能会很痛苦。使用更新的做事方式，通常可以使用不同的 linq 表达式公开新函数 - 创建新存储过程和升级脚本的痛苦消失了。（当然代码仍然需要推出..）

在我看来，速度可以忽略不计 - 存储过程肯定会更快，EF 并不总是提供最好的 sql，但它可以让生活变得简单：如果我有一个中间/数据层来返回客户按 ID，我想按名称获取客户；我需要一个新方法、新存储过程、用于推出它的脚本等。而使用 EF，我可以添加一个新方法。

# excel - VBA中的条件循环使用If，Then，Else，Else if语句不循环到数组中的下一个i

> ID：15046778
> 
> 赞同：0
> 
> 时间：2013-02-23T23:06:53.867
> 
> 标签：excel, vba

我正在尝试处理条件循环。一切似乎都在工作，但是它没有前进到下一个 i 和下一个 j 并继续循环。它似乎在循环一圈后结束。我已经为此工作了很长一段时间，并且对 VBA 非常陌生。

```
Sub Read()
     NumMonth = 12
     Worksheets("Sheet1").Activate
     ReDim Month(1 To NumMonth)
     ReDim WCinit(1 To NumMonth)
     ReDim WC(1 To NumMonth + 1)
     ReDim Precip(1 To NumMonth)
     ReDim RefET(1 To NumMonth)
     ReDim Percolation(1 To NumMonth + 1)
     ReDim Runoff(1 To NumMonth + 1)
     For i = 1 To NumMonth

     Month(i) = Cells(4 + i, 1).Value
     WCinit(i) = Cells(4 + i, 10).Value

     Precip(i) = Cells(4 + i, 2).Value
     RefET(i) = Cells(4 + i, 3).Value

 Next i

For j = 1 To NumMonth + 1
       WC(j) = Cells(3 + i, 11).Value
Next j

     Application.ScreenUpdating = True
  End Sub

Sub Test()
    Dim fc As Double
    fc = 0.3
    NumMonth = 12
    i = 1
    j = 2

    Dim pwp As Double
    pwp=0.1
    Dim dz As Double
    dz = 0.5 'm

Do

If WC(j - 1) + WCinit(i) > pwp And fc - (WC(j - 1) + WCinit(i)) + RefET(i) < Precip(i)        Then
   Runoff(i) = (Precip(i) - (fc - (WC(j - 1) + WCinit(i)) + RefET(i))) * 0.5
   Percolation(i) = (Precip(i) - (fc - (WC(j - 1) + WCinit(i)) + RefET(i))) * 0.5
   WC(j) = fc

ElseIf WC(j - 1) + WCinit(i) > pwp And fc - (WC(j - 1) + WCinit(i)) + RefET(i) <    Precip(i) Then
   Runoff(i) = 0
   Percolation(i) = 0
   WC(j) = WC(j - 1) + WCinit(i) + Precip(i) - RefET(i)

Else
   WC(j) = pwp

End If
    j = j + 1
    i = i + 1

Loop While j<13 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T01:51:12.977

我对您提供的代码做了一些工作（如下面的注释所示），主要需要仔细调试程序的逻辑。您仍然会收到编译器错误，因为您的代码中没有分配两个数组，而且我没有足够的信息来正确执行此操作。

VBA 中用于驯服顽固代码的最佳资源是内置调试器。有了它，就可以逐行逐行查看每个变量在每一步中的变化情况。

如果你对调试器不熟悉，网上有很多很好的解释，比如 Chip Pearson[对基础的解释](http://www.cpearson.com/excel/DebuggingVBA.aspx)。

可以使循环和索引更易于处理的一项更改是将“第 13 个月”值放入与数组分开的变量中，这将是直接的 12 个月数据集合。

这将是一种减少否则需要的令人困惑的簿记的方法（“程序中此时的索引应该是 j，还是 j - 1，还是 j + 1？”）。我不知道这种方法是否真的适合您的数据和计算。

```
Option Explicit                         ' Require declaration of all variables 

Private Const NumMonth As Long = 12     ' Make these variable available to all subroutines   
Private month As Variant                ' and functions in the module. Needed because they 
Private WCinit As Variant               ' would otherwise be out of scope in the Test() 
Private WC As Variant                   ' subroutine.

Private Precip As Variant               ' The arrays need to be declared as type Variant,
Private RefET As Variant                ' so we can make the assignment
Private Percolation As Variant          
Private Runoff As Variant              

Sub Read()

    Dim firstMoDataRow As Long
    Dim lastMoDataRow As Long

    firstMoDataRow = 5
    lastMoDataRow = 16

    ' if you want to avoid using the transpose function in the following
    ' array assignments, you will need to reference the arrays as  
    ' two-dimensional, e.g., WC(i,1) or WC(3,1), etc., with the 
    ' second index always 1 (that's what many often do).

    month = WorksheetFunction.Transpose(Range(Cells(firstMoDataRow, 1), Cells(lastMoDataRow, 1)).Value)    ' Direct assignment of values

    WCinit = WorksheetFunction.Transpose(Range(Cells(firstMoDataRow, 10), Cells(lastMoDataRow, 10)).Value)  ' in the worksheet ranges

    WC = WorksheetFunction.Transpose(Range(Cells(firstMoDataRow - 1, 11), Cells(lastMoDataRow, 11)).Value)  ' to the arrays.

    Precip = WorksheetFunction.Transpose(Range(Cells(firstMoDataRow, 2), Cells(lastMoDataRow, 2)).Value)

    RefET = WorksheetFunction.Transpose(Range(Cells(firstMoDataRow, 3), Cells(lastMoDataRow, 3)).Value)

  ' ?! Percolation and runoff are not assigned in your code, so I don't know
  '    the correct row and column references in the worksheet.

End Sub 
```

```
Sub Test()

    Dim fc As Double           
    Dim pwp As Double
    Dim dz As Double
    Dim i as Long, j as Long

    fc = 0.3
    pwp = 0.1
    dz = 0.5 'm

    i = 1
    j = 2

    Do While i <= NumMonth And j <= NumMonth + 1  ' I am assuming here that you will sort out
                                                  ' the correct initializing and incrementing 
                                                  ' of the loop indexes, which I have not
                                                  ' puzzled out

        If WC(j - 1) + WCinit(i) > pwp And fc - (WC(j - 1) + WCinit(i)) + RefET(i) < Precip(i) Then

            Runoff(i) = (Precip(i) - (fc - (WC(j - 1) + WCinit(i)) + RefET(i))) * 0.5
            Percolation(i) = (Precip(i) - (fc - (WC(j - 1) + WCinit(i)) + RefET(i))) * 0.5
            WC(j) = fc

        ElseIf WC(j - 1) + WCinit(i) > pwp And fc - (WC(j - 1) + WCinit(i)) + RefET(i) < Precip(i) Then

            ' You are getting a "Subscript out of range" error here because Runoff() and 
            ' Percolation<> did not get assigned in the Read sub

            Runoff(i) = 0                                         
            Percolation(i) = 0                                    
            WC(j) = WC(j - 1) + WCinit(i) + Precip(i) - RefET(i)  

        Else

            WC(j) = pwp

        End If

        j = j + 1
        i = i + 1

    Loop

End Sub 
```

# class - 在 CoffeeScript 中，我如何从另一个类调用一个类方法，以便两个类实例都存储在第三个类中？

> ID：15046779
> 
> 赞同：0
> 
> 时间：2013-02-23T23:07:11.930
> 
> 标签：class, coffeescript

在 CoffeeScript 中，我如何从另一个类调用一个类方法，以便两个类实例都存储在第三个类中？

**示范：**

```
class A

  constructor: () ->

    @b = new B
    @c = new C 
```

* * *

```
class B

  methodB: () -> 
```

* * *

```
class C

  methodC: () ->
    ### How would I call instance b's methodB from here? ### 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:15:42.503

做到这一点的唯一方法是引用`A`类的实例。例如，如果我了解您要正确执行的操作：

```
class A
  constructor: () ->
    @b = new B
    @c = new C(this)

class B
  methodB: () ->

class C
  constructor (@parent) ->
  methodC: () ->
    @parent.b.methodB() 
```

的实例`C`不知道它的实例`A`有对它的引用——没有内置的`c`“属于”`a`构造它的概念（如果有的话就没有意义了）；你必须明确表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T23:19:18.877

您需要引用另一个类的实例，例如

```
class A

  constructor: () ->
    @b = new B
    @c = new C

    @c.setB(@b)
    @c.methodC() # Also calls B.methodB()

class B

  methodB: () ->

class C

  methodC: () ->
    @b.methodB()

  setB: (@b) -> 
```

# iphone - 三个 else-if 语句

> ID：15046784
> 
> 赞同：-4
> 
> 时间：2013-02-23T23:07:42.843
> 
> 标签：iphone, objective-c, compiler-errors

嗨，我想有 4 个按钮，每个按钮在按下时都有不同的警报。我遇到了一个问题，我有 3 个按钮，我决定添加一个“评价我的应用程序”按钮，但现在它不起作用，请帮助我。（顺便说一下，错误是*Expexted Exspression*）（Org.=Organization（在应用程序中固定），电子邮件-应用程序中的真实电子邮件，

```
#define TAG_Band 1
#define TAG_DEV 2
#define TAG_EDEV 3
#define TAG_RATE 4

@interface Org.ContactInfo () <MFMailComposeViewControllerDelegate>

@end

@implementation Org.ContactInfo:UIViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.title = @"Contacts";

    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
-(IBAction)ContactBand:(id)sender;{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Contact the Band" message:@"Contact the Org. or go to their website!" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Visit the Org. Website",@"E-Mail The Org. President", @"E-Mail The Org. Treasurer",  nil];
    alert.tag = TAG_Band;
    [alert show];
}
-(IBAction)ContactDev:(id)sender;{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Contact Me" message:@"Contact Me on Features you would like me to consider! I will do my Best to look at all of the Suggestions!" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Visit My Website",@"E-Mail Me!",  nil];
    alert.tag = TAG_DEV;
    [alert show];
}
-(IBAction)RateMyApp:(id)sender;{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Rate My App" message:@"When Your Reviewing my App, Please remember that this app was at no cost to the Mighty Mustang Band." delegate:self cancelButtonTitle:@"Not Right Now" otherButtonTitles:@"Rate My App!!",  nil];
    alert.tag = TAG_RATE;
    [alert show];

}
-(IBAction)AppInfo:(id)sender;{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Version 1.0" message:@"More Updates Coming Soon. Please Feel Free to E-Mail me on features that you would like me to consider" delegate:self cancelButtonTitle:@"Not Right Now" otherButtonTitles:@"Email-Me",  nil];
    alert.tag = TAG_EDEV;
    [alert show];
}

-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
    if (alertView.tag == TAG_Band){

        if (buttonIndex==1){
            [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://URL.org"]];

        }
        else if (buttonIndex==2){
            //Subject
            NSString *emailTitle = @"";
            //Recipients
            NSString *emailBody=@"Org. President";
            NSArray *toRecipients = [NSArray arrayWithObject:@"Person@Org.org"];

            MFMailComposeViewController *mc=[[MFMailComposeViewController alloc] init];
            mc.mailComposeDelegate = self;
            [mc setSubject:emailTitle];
            [mc setSubject:emailBody];
            [mc setToRecipients:toRecipients];

            [self presentViewController:mc animated:YES completion:NULL];

        }
        else if (buttonIndex==3){
            //Subject
            NSString *emailTitle = @"";
            //Recipients
            NSString *emailBody=@"Org. Treasurer, ";
            NSArray *toRecipients = [NSArray arrayWithObject:@"Person@Org.org"];

            MFMailComposeViewController *mc=[[MFMailComposeViewController alloc] init];
            mc.mailComposeDelegate = self;
            [mc setSubject:emailTitle];
            [mc setSubject:emailBody];
            [mc setToRecipients:toRecipients];

            [self presentViewController:mc animated:YES completion:NULL];

        }
    }
    else if (alertView.tag == TAG_DEV){
        if (buttonIndex==1){
            [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://stepheniosdeveloper.wordpress.com"]];

        }
        else if (buttonIndex==2){
            NSString *emailTitle = @"";
            //Recipients
            NSString *emailBody=@"";
            NSArray *toRecipients = [NSArray arrayWithObject:@"Email@gmail.com"];

            MFMailComposeViewController *mc=[[MFMailComposeViewController alloc] init];
            mc.mailComposeDelegate = self;
            [mc setSubject:emailTitle];
            [mc setSubject:emailBody];
            [mc setToRecipients:toRecipients];

            [self presentViewController:mc animated:YES completion:NULL];

        }
    }
    else if (alertView.tag == TAG_EDEV);{
        if (buttonIndex==1){
            NSString *emailTitle = @"";
            //Recipients
            NSString *emailBody=@"";
            NSArray *toRecipients = [NSArray arrayWithObject:@"Email@gmail.com"];

            MFMailComposeViewController *mc=[[MFMailComposeViewController alloc] init];
            mc.mailComposeDelegate = self;
            [mc setSubject:emailTitle];
            [mc setSubject:emailBody];
            [mc setToRecipients:toRecipients];

            [self presentViewController:mc animated:YES completion:NULL];

        }
    }
    else if (alertView.tag == TAG_RATE);{         //Expected Expression
        if (buttonIndex==1){
            [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"https://itunes.apple.com/us/app/Org/id607257427?ls=1&mt=8"]];
        }
    }
} 
```

它工作在我添加最后一个（TAG_RATE）之前，但现在我不明白为什么它不再工作了。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T23:11:07.750

`;`您的代码中有一个错字：在最后两个`else if`条件之后您有额外的：

```
 else if (alertView.tag == TAG_EDEV)/*;*/{  // extra `;`
            //...
    }
    else if (alertView.tag == TAG_RATE)/*;*/{   // extra `;`       //Expected Expression
            // ...
    } 
```

# php - 登录后不显示用户个人资料数据

> ID：15046785
> 
> 赞同：0
> 
> 时间：2013-02-23T23:07:59.107
> 
> 标签：php, mysql, session, cookies

我正在创建一个社交网络网站，每个用户都有自己的个人资料，但是当我登录时出现问题，个人资料页面没有出现。我使用了 cookie 和会话，我对这个问题做了很多研究，但没有任何成功，所以我认为问题出在 cookie 上。我不知道如何解决它；如果有人可以帮助我，我将不胜感激。

# 配置文件.php

```
<?php  
ob_start();
require_once('for members/scripts/global.php'); 

if($logged == 1){
 echo("you need to be loged in to view profiles");
 exit();
}
if(isset($_GET['id'])){
 $id=$_GET['id'];
 $id= preg_replace("#[^0-9]#","",$id);

}else{
$id=$_SESSION['id'];
}
//collect member information
$query = mysql_query("SELECT * FROM members WHERE id='$id'LIMIT 1") or die("could not collect user information ");
$count_mem = mysql_num_rows($query);
if($count_mem == 0){
 echo("the user does not exit");
 exit();

}
while($row = mysql_fetch_array($query)){
  $username = $row['username'];
  $fname = $row['firstname'];
  $lname = $row['lastname'];
  $profile_id= $row['id'];

  if($session_id == $profile_id){
  $owner = true;
  }else{
   $owner = false;

  }

}

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title><?php print("$fname"); ?> <?php print("$lname"); ?>'s profile</title>
<link href="style/stylesheet.css" type="text/css"/>
</head>

<body>
<div class="container center"> 
<h1><?php print("$username"); ?></h1>
<?php
if($owner == true ){
    header("Location: profile.php");
?>
<!--
<a href="#">edit profile</a><br />
<a href="#">account settings</a><br />
-->
<?php
}else{
    header("Location: index.php");
?>
<!--
<a href="#">private message</a><br />
<a href="#">add as friend</a><br />
--> 
<?php
}
?>
</div>
</body>
</html>
<?php flush(); ?> 
```

如果您需要其他相关代码，请告诉我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T01:57:11.317

您显示的代码有很多问题。对于初学者，**不要使用`mysql_`函数。** 来自[PHP 手册](http://www.php.net/manual/en/intro.mysql.php)

> 此扩展自 PHP 5.5.0 起已弃用，不推荐用于编写新代码，因为它将在未来被删除。相反，应该使用[mysqli](http://www.php.net/manual/en/book.mysqli.php)或[PDO_MySQL](http://www.php.net/manual/en/ref.pdo-mysql.php)扩展。

其次，您的`header`重定向嵌入在您的 HTML 中，这是一种不好的做法，您只被`ob_start()`. 尽管如此，你有一个条件可以重定向到'profile.php'或'index.php'，幸运的是你被重定向到'index.php'，否则你将拥有一个永远自我重定向的页面。

我看不到您是否/在哪里设置了变量`$session_id`，但从可以看到的情况来看，它是`null`并且永远不会`== $profile_id`，所以`$owner`永远都是`false`。

有了这个，你`while`在获取一行时有一个循环......删除它，不需要它。

现在了解代码中的一些逻辑。如果您必须成为个人资料所有者才能查看它，请在查询后立即检查，如果不是所有者，`header("Location: index.php"); die;`并且没有`else`，则后面的任何内容都表示它是查看页面的个人资料所有者。

此外，如果您打算使用会话变量，则需要确保`session_start();`位于页面顶部。你在`ob_start();`那里，但最后你打电话给`flush()`. 阅读[ob_start()](http://www.php.net/manual/en/function.ob-start.php)并为您启动的缓冲区调用正确的刷新函数。

# java - 将数组初始化为类定义

> ID：15046786
> 
> 赞同：-1
> 
> 时间：2013-02-23T23:08:13.513
> 
> 标签：java, arrays, class

所以，我正在做一个编程任务，任务是编写一个程序来打印给定月份和年份的日历。我正在编写类来跟踪一周中的某一天（周一、周二、周三等）的名称，并且我试图给它 3 个参数：当天的名称、一个字符串、一个int 索引，要引用第三个，所有工作日的数组。我的开场代码是这样的：

```
public class Day
{

private String weekDay;
private String[] weekDays;
private int dayIndex;

weekDays = new String[7];

weekDays[1] = "Sunday";
weekDays[2] = "Monday";
weekDays[3] = "Tuesday";
weekDays[4] = "Wednesday";
weekDays[5] = "Thursday";
weekDays[6] = "Friday";
weekDays[7] = "Saturday";` 
```

尝试执行此操作时出现错误，即使我的数组初始化语法正确。我猜这首先与类定义中的数组初始化有关吗？

我的教授建议的原始设计没有索引，只有`weekDay`和`weekDays[]`变量。我根本不确定数组的用途，所以我想我会使用索引并以这种方式以数字方式跟踪日期。显然它不起作用。所以一：我上面的解决方案有什么问题，二：有谁知道 Day 类的初衷是用这两个参数吗？每日课程的想法是帮助确定特定年份的特定月份从一周中的哪一天开始，但我不确定如何。

谢谢。对不起，如果我违反了礼节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:12:54.750

你得到什么错误？我不是java，但你的数组不应该从0开始吗？

```
weekDays[0] = "Sunday"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T23:10:59.513

你为什么不试试：

```
private String[] weekDays =  new String[] {"Sunday", "Monday", 
                             "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T23:11:15.563

数组是从零开始的，因此当您尝试分配 last 时，从而`1`不是`0`会产生一个：`ArrayIndexOutOfBoundsException``String`

```
weekDays[7] = "Saturday";` 
```

此外，非声明性语句需要在方法、构造函数或静态初始化程序中，而不是在类块中。

您可以声明`weekdays`包含这些值，而不是单独分配值：

```
private String[] weekDays = { "Sunday", "Monday", ... }; 
```

这种方法不需要您指定数组索引值。

# openoffice-calc - 跨多个工作表查找最后一个非空单元格

> ID：15046788
> 
> 赞同：0
> 
> 时间：2013-02-23T23:08:26.583
> 
> 标签：openoffice-calc, libreoffice

我想编写一个公式来查看其他工作表中特定单元格的值并返回最后一个非空值。

例如，如果：

*   表 2.B5 = 3
*   Sheet3.B5 = ""
*   Sheet4.B5 = 6
*   表 5.B5 = 4
*   Sheet6.B5 = ""

然后我希望公式返回 4。

非常感谢任何帮助，我已经为此工作了一段时间，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:40:20.530

这将返回所需的结果，尽管它在任何方面都不是复杂的或自动的：

```
=if(not(isblank(Sheet6.B5)), Sheet6.B5,
    if(not(isblank(Sheet5.B5)), Sheet5.B5,
       if(not(isblank(Sheet4.B5)), Sheet4.B5,
          if(not(isblank(Sheet3.B5)), Sheet3.B5,
             if(not(isblank(Sheet2.B5)), Sheet2.B5,
                ""))))) 
```

它开始查看最后一个 Sheet6.B5：如果它不是空白，那就是要取的值，否则查看 Sheet5.B5：如果它不是空白......等等。最后，如果它们都是空白的，则返回空白。

# django - 跨多个关系的 Django 查询

> ID：15046789
> 
> 赞同：0
> 
> 时间：2013-02-23T23:08:27.280
> 
> 标签：django, django-models

我有遵循这种模式的模型：

```
class House():
    name = *XYZ*

class Person():
    name = *XYZ*
    lives = ForeignKey(House)

class Item():
    name = *XYZ*
    owner = ForeignKey(Person) 
```

我将如何查询特定*House*中的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:10:32.710

就像是

```
Item.objects.filter(owner__lives__name="foo") 
```

# matlab - zplane 中的零点位置不正确

> ID：15046790
> 
> 赞同：1
> 
> 时间：2013-02-23T23:08:33.093
> 
> 标签：matlab, signal-processing

我正在尝试为 p=7 绘制一个简单多项式 (1+z)^(2p) 的极点/零图。我的代码如下：

```
p = 7;
rCoeffs = [1 1];
for ii=1:2*p-1
    rCoeffs = conv(rCoeffs, [1 1]);
end
zplane(real(rCoeffs),1); 
```

该图显示以下内容：

![在此处输入图像描述](../Images/bdfef7f1a8e05b3b397d820fa305dff0.png)

我不明白为什么零是复数。我认为所有的零都应该位于 z=-1 但是这个图显示了一个圆圈。当 p 很小时不会发生这种情况，但是我再次在网上看到了一些显然是由 zplane 生成的图，它们在特定点上显示了大量的零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:52:46.920

Basically you're looking for 14 solutions to the equation given the setup. Unfortunately the general solution to polynomial equations of order 5 or greater doesn't exist and must be found numerically. The solution provided is correct only in that is approximately what the algorithm thinks you're looking for.

I would add that Nathan's method works as intended, and if you change it slightly, you will see all the solutions to the above equation.

```
z = tf('z',1)
H = (1+z)^(2*7);
[p,z1] = pzmap(H)
z1 % solution to H = 0
(1+z1)^(2*7) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T23:30:30.047

更简单的方法：

```
p = 7

z = zpk('z',0.1);
H = (1+z)^(2*p);

pzmap(H) 
```

# facebook - Facebook Open Graph PHP 和 Javascript 登录

> ID：15046792
> 
> 赞同：0
> 
> 时间：2013-02-23T23:08:41.853
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-php-sdk

我正在建立一个包含 facebook 登录系统的网站。我认为在客户端使用 javascript 会很好。将进行身份验证。之后，将向我的服务器发出 AJAX 请求，以将一些内容检查到 MySql 数据库中。问题是 PHP 脚本无法识别 Facebook 会话。我检查了 cookie，没有 fbsr_[my_app_id] cookie。当我重新加载页面时，它就在那里，并且 AJAX 请求工作正常。有没有办法在不重新加载页面的情况下获取该 cookie？提前谢谢。

# java - 带有 Java 传递字符串错误的蛮力算法

> ID：15046796
> 
> 赞同：2
> 
> 时间：2013-02-23T23:09:01.803
> 
> 标签：java, string, static, brute-force

我认为这可能是一个非常简单的解决方案，但我不太确定。

我正在尝试创建一个字符数组，通过递增数组的特定索引并将它们放入最后的字符串中来对它们进行排序。

我已经完成了这个，（通过将结果打印到控制台来验证。“aaaaaaaa”到“aaaaaaab”等等。但是，我的新版本代码通过 ASCII 值 33 - 126 排序。'！'到'〜'

现在，我要做的一件事是在 main 方法中调用该字符串，以便分配给我们的加密/解密程序可以一遍又一遍地使用该字符串。

我们最初分配的程序可以在这里找到： [http ://www.avajava.com/tutorials/lessons/how-do-i-encrypt-and-decrypt-files-using-des.html](http://www.avajava.com/tutorials/lessons/how-do-i-encrypt-and-decrypt-files-using-des.html)

```
 import java.lang.Class.*;
    import java.io.FileInputStream;
    import java.io.FileOutputStream;
    import java.io.IOException;
    import java.io.InputStream;
    import java.io.OutputStream;
    import javax.crypto.Cipher;
    import javax.crypto.CipherInputStream;
    import javax.crypto.CipherOutputStream;
    import javax.crypto.SecretKey;
    import javax.crypto.SecretKeyFactory;
    import javax.crypto.spec.DESKeySpec;

public class Example1 {

public String keyGen() {
//create an array used for storing each character    
char array[] = new char[8];

    //for loop checks for each character between '!' and '~'
    for (char c0 = '!'; c0 <= '~'; c0++) {
    array[0] = c0;

    for (char c1 = '!'; c1 <= '~'; c1++) {
    array[1] = c1;

    for (char c2 = '!'; c2 <= '~'; c2++) {
    array[2] = c2;

    for (char c3 = '!'; c3 <= '~'; c3++) {
    array[3] = c3;

    for (char c4 = '!'; c4 <= '~'; c4++) {
    array[4] = c4;

    for (char c5 = '!'; c5 <= '~'; c5++) {
    array[5] = c5;

    for (char c6 = '!'; c6 <= '~'; c6++) {
    array[6] = c6;

    for (char c7 = '!'; c7 <= '~'; c7++) {
    array[7] = c7;

    //create new string that stores the array
    String pKey = new String(array);

    //trying to return the new string 
    return pKey;
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    } 
                }
            }

public static void main(String []args) {
try {

// I am getting an error here; I know it has something to do with static references

    String key = new String(keyGen(pKey); 

                    // needs to be at least 8 characters for DES

        FileInputStream fis = new FileInputStream("original.txt");
        FileOutputStream fos = new FileOutputStream("encrypted.txt");
        encrypt(key, fis, fos);

        FileInputStream fis2 = new FileInputStream("encrypted.txt");
        FileOutputStream fos2 = new FileOutputStream("decrypted.txt");
        decrypt(key, fis2, fos2);
    } catch (Throwable e) {
        e.printStackTrace();
    }
}

public static void encrypt(String key, InputStream is, OutputStream os) throws Throwable {
    encryptOrDecrypt(key, Cipher.ENCRYPT_MODE, is, os);
}

public static void decrypt(String key, InputStream is, OutputStream os) throws Throwable {
    encryptOrDecrypt(key, Cipher.DECRYPT_MODE, is, os);
}

public static void encryptOrDecrypt(String key, int mode, InputStream is, OutputStream os) throws Throwable {

    DESKeySpec dks = new DESKeySpec(key.getBytes());
    SecretKeyFactory skf = SecretKeyFactory.getInstance("DES");
    SecretKey desKey = skf.generateSecret(dks);
    Cipher cipher = Cipher.getInstance("DES"); // DES/ECB/PKCS5Padding for SunJCE

    if (mode == Cipher.ENCRYPT_MODE) {
        cipher.init(Cipher.ENCRYPT_MODE, desKey);
        CipherInputStream cis = new CipherInputStream(is, cipher);
        doCopy(cis, os);
    } else if (mode == Cipher.DECRYPT_MODE) {
        cipher.init(Cipher.DECRYPT_MODE, desKey);
        CipherOutputStream cos = new CipherOutputStream(os, cipher);
        doCopy(is, cos);
    }
}

public static void doCopy(InputStream is, OutputStream os) throws IOException {
    byte[] bytes = new byte[64];
    int numBytes;
    while ((numBytes = is.read(bytes)) != -1) {
        os.write(bytes, 0, numBytes);
    }
    os.flush();
    os.close();
    is.close();
} 
```

}

蒂

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T23:17:30.607

希望这可以帮助您解决问题。至于现在，你`keyGen()`相当于下面的代码：

```
public String keyGen() {
    return "!!!!!!!!";
} 
```

因为你一进入最里面的`for`循环就返回值。也许您想更改方法以返回 a`List<String>`并将最内层`for`循环中的字符串添加到该列表中，并在所有`for`循环之后返回该列表？`main`这样你就可以在你的方法中遍历列表。

* * *

如果我算对了，有 93^8 = 5.595.818.096.650.401 个不同的字符串。将所有这些都存储在一个列表中是个坏建议。杜克林在评论中指出，最好为此使用自定义`Iterator<String>`。

* * *

**编辑**

这是这样一个迭代器的实现：

```
import java.util.Arrays;
import java.util.Iterator;

public class BruteForceIterator implements Iterator<String> {

    private char min, max;

    private char[] current;

    private char[] last;

    private int reachedLast = 0;

    public BruteForceIterator(char min, char max, int length) {
        this.min = min;
        this.max = max;
        current = new char[length];
        Arrays.fill(current, min);
        last = new char[length];
        Arrays.fill(last, max);
    }

    @Override
    public boolean hasNext() {
        return reachedLast < 2;
    }

    @Override
    public String next() {
        String str = new String(current);
        for(int i = current.length - 1; i >= 0; i--) {
            char next = following(current[i]);
            current[i] = next;
            if (next != min) {
                break;
            }
        }
        if (Arrays.equals(current, last) || reachedLast > 0) {
            reachedLast++;
        }
        return str;
    }

    private char following(char in) {
        if (in < max) {
            return (char) (in + 1);
        } else {
            return min;
        }
    }

    @Override
    public void remove() {
        throw new UnsupportedOperationException("No with me, sir!");
    }

    public static void main(String[] args) {
        BruteForceIterator bit = new BruteForceIterator('a', 'c', 3);
        while (bit.hasNext()) {
            System.out.println(bit.next());
        }
    }
} 
```

# ruby - 使用 Rake gem，没有找到 rakefile

> ID：15046799
> 
> 赞同：0
> 
> 时间：2013-02-23T23:09:11.040
> 
> 标签：ruby, gem, rake

我正在尝试使用可选数据模块构建自定义版本的 Zepto.js。我对使用终端命令有点陌生，所以当事情不起作用时，我通常不确定该怎么做！

我在 Mac 上并安装了 Ruby 1.9.3p385。使用“gem install rake”安装 Rake gem 时，它似乎安装得很好。但是，使用“rake”命令会引发此错误：

```
rake aborted!
No Rakefile found (looking for: rakefile, Rakefile, rakefile.rb, Rakefile.rb)
/Users/matthew_ruddy/.rvm/gems/ruby-1.9.3-p385/bin/ruby_noexec_wrapper:14:in `eval'
/Users/matthew_ruddy/.rvm/gems/ruby-1.9.3-p385/bin/ruby_noexec_wrapper:14:in `<main>'
(See full trace by running task with --trace) 
```

我不是从这里做什么。我也无法让“捆绑”宝石工作，它会引发以下错误：

```
Could not locate Gemfile 
```

不知从何而来。这是我在运行“gem list”时获得的已安装 gem 的列表。

```
*** LOCAL GEMS ***

bigdecimal (1.1.0)
bundle (0.0.1)
bundler (1.2.4)
io-console (0.3)
json (1.5.4)
minitest (2.5.1)
rake (10.0.3, 0.9.2.2)
rdoc (3.9.5)
rubygems-bundler (1.1.0)
rvm (1.11.3.6) 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:01:17.850

猜测一下，您在错误的目录中。

您需要使用“cd”命令切换到正确的目录。您可以使用“pwd”命令找出您所在的目录。

以下是我用来在我的电脑上安装的步骤：

1.  将存储库签出到 /tmp/zepto

    ```
    dan@computer:/home$ cd /tmp
    dan@computer:/tmp$ git clone 
    dan@computer:/tmp$ git clone git@github.com:madrobby/zepto.git
    Cloning into 'zepto'...
    remote: Counting objects: 5721, done.
    remote: Compressing objects: 100% (1962/1962), done.
    remote: Total 5721 (delta 3937), reused 5333 (delta 3602)
    Receiving objects: 100% (5721/5721), 6.11 MiB | 475 KiB/s, done.
    Resolving deltas: 100% (3937/3937), done. 
    ```

2.  切换到 /tmp/zepto 目录

    ```
    dan@computer:/tmp$ cd zepto/
    dan@computer:/tmp/zepto (master)$ pwd
    /tmp/zepto 
    ```

3.  使用 bundler 安装 gem

    ```
    dan@computer:/tmp/zepto (master)$ bundle
    Fetching gem metadata from http://rubygems.org/....
    Fetching https://github.com/lautis/uglifier
    remote: Counting objects: 750, done.
    remote: Compressing objects: 100% (386/386), done.
    remote: Total 750 (delta 381), reused 670 (delta 304)
    Receiving objects: 100% (750/750), 278.16 KiB | 283 KiB/s, done.
    Resolving deltas: 100% (381/381), done.
    Installing rake (0.9.2.2) 
    Installing multi_json (1.6.1) 
    Installing execjs (1.4.0) 
    Using uglifier (1.3.0) from https://github.com/lautis/uglifier (at master) 
    Using bundler (1.2.3) 
    Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed. 
    ```

4.  用 rake 构建 zepto

    ```
    dan@computer:/tmp/zepto (master)$ bundle exec rake
    Original version: 54.021k
    Minified: 24.897k
    Minified and gzipped: 9.258k, compression factor 5.835 
    ```

5.  检查 zepto.js 文件是否已构建

    ```
    dan@computer:/tmp/zepto (master)$ ls -l dist/
    total 124
    -rw-rw-r-- 1 daniel daniel 55317 Feb 23 23:32 zepto.js
    -rw-rw-r-- 1 daniel daniel 25495 Feb 23 23:32 zepto.min.js
    -rw-rw-r-- 1 daniel daniel 38097 Feb 23 23:32 zepto.min.js.map.json 
    ```

# arrays - 多维列表？清单清单？列表数组？

> ID：15046801
> 
> 赞同：8
> 
> 时间：2013-02-23T23:09:34.310
> 
> 标签：arrays, r, list, matrix, nested-lists

（我在这个问题中明确使用了错误的术语，对此感到抱歉 - 我只是不知道用 R 术语描述这个问题的正确方法......）

我想创建一个异构对象的结构。尺寸不一定是矩形。在其他语言（如 C）中，我需要的可能只是“对象数组”。“对象”是指由不同成员组成的结构，即 R 中的列表 - 例如：

```
myObject <- list(title="Uninitialized title", xValues=rep(NA,50), yValues=rep(NA,50)) 
```

现在我想做 100 个这样的对象，并且能够通过类似的方式来称呼他们的成员

```
for (i in 1:100) {myObject[i]["xValues"]<-rnorm(50)} 
```

或者

```
for (i in 1:100) {myObject[i]$xValues<-rnorm(50)} 
```

我将不胜感激有关描述此事物的位置的任何提示。

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-23T23:16:33.627

您是在寻找这只神兽的名字还是只是在寻找它？:) 我可能是错的，但我认为您只需将其称为列表列表.. 例如：

```
# create one list object
x <- list( a = 1:3 , b = c( T , F ) , d = mtcars )

# create a second list object
y <- list( a = c( 'hi', 'hello' ) , b = c( T , F ) , d = matrix( 1:4 , 2 , 2 ) )

# store both in a third object
z <- list( x , y )

# access x
z[[ 1 ]] 

# access y
z[[ 2 ]]

# access x's 2nd object
z[[ 1 ]][[ 2 ]] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-24T09:21:13.380

我没有意识到您正在寻找创建相同结构的其他对象。您正在寻找`replicate`.

```
my_fun <- function() {
    list(x=rnorm(1), y=rnorm(1), z="bla")
}
replicate(2, my_fun(), simplify=FALSE)

# [[1]]
# [[1]]$x
# [1] 0.3561663
# 
# [[1]]$y
# [1] 0.4795171
# 
# [[1]]$z
# [1] "bla"
# 
# 
# [[2]]
# [[2]]$x
# [1] 0.3385942
# 
# [[2]]$y
# [1] -2.465932
# 
# [[2]]$z
# [1] "bla" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T00:46:12.930

这是我目前拥有的解决方案示例，也许它对某人有用：

```
 NUM <- 1000 # NUM is how many objects I want to have
    xVal <- vector(NUM, mode="list")
    yVal <- vector(NUM, mode="list")
    title   <- vector(NUM, mode="list")
    for (i in 1:NUM) {
     xVal[i]<-list(rnorm(50))
     yVal[i]<-list(rnorm(50))
     title[i]<-list(paste0("This is title for instance #", i))
    }
   myObject <- list(xValues=xVal, yValues=yVal, titles=title)
   # now I can address any member, as needed:
   print(myObject$titles[[3]])
   print(myObject$xValues[[4]]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-27T22:37:19.367

如果尺寸始终是矩形（在您的情况下为 100x50），并且内容始终是同质的（在您的情况下为数字），则创建一个 2D **array/matrix**。

如果您希望能够在单个列表上添加/删除/插入（或更改数据类型），请使用**list-of-lists**。

# php - 生成唯一盐（给出未经验证的示例）

> ID：15046802
> 
> 赞同：1
> 
> 时间：2013-02-23T23:09:59.980
> 
> 标签：php, salt

我正在重新设计需要独特盐的应用程序。

我提供了它的方式，我期待听到这是否不能以正确的方式或其他我可以改进的方式工作。

```
public function generatesalt($x=0)
{
    $x++;

    $string = md5(uniqid(rand(), true));
    $salt = substr($string, 0, 12);

    $stored = array();
    $qw = $this->registry->dbi->query("SELECT `salt` FROM `".PRE."membership`")->results();
    foreach ($qw as $k => $v)
        $stored[] = $v['salt'];

    if (in_array($salt,$stored))
        return $this->generatesalt($x);

    return $salt." /// ".$x;
} 
```

谢谢。同样，我的问题是，如果这看起来以正确的方式工作并且您看不到严重的缺点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T23:46:55.863

好吧，从理论上讲，盐只需要在不应该​​使用该盐散列其他密码的意义上是唯一的。这个想法是让坏人破解哈希是不可行的。如果您使用盐，并且正确地散列密码（即使用 bcrypt、scrypt、pbkdf2 等），那么破解少数密码将需要很长时间——更不用说整个数据库了。

在实践中，足够长的随机生成的盐不太可能出现不止一次，因此它们应该非常好。

在 PHP 中，一种生成盐的简单方法是使用`mcrypt_create_iv()`. 它从系统中生成随机位，可以对其进行编码以便于存储：

```
function randomSalt($length = 16) {
    $bits = mcrypt_create_iv($length);
    $encoded = base64_encode($bits);
    return substr($encoded, 0, $length);
}
echo randomSalt(); // Something like: "Yt5iX/LvdxOyxCiX" 
```

最后，盐不必是秘密。这不是使用盐的原因。想象一下，你想走到街角的商店。需要 5 分钟。现在，假设您被迫绕道 24 小时。那就是盐。这是一个巨大的障碍，每次破解新的散列密码时，坏人都需要克服。（注意：24 小时只是一个例子——它需要多长时间取决于一些事情，但你明白了。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T23:16:33.857

将盐存储在还包含密码哈希的数据库中是否会破坏将未知字符串添加到预哈希字符串的目的？

如果黑客获得数据库访问权限，并且只有数据库访问权限，他们将获得盐和哈希值。如果您在 PHP 定义中声明了静态盐，他们将需要服务器访问权限以及数据库访问权限才能获取相同的信息。

同样相关的是，如果可能，您应该删除 SQL 用户的输出权限，这样黑客[就无法仅通过数据库访问将 shell 放在您的服务器上](http://evilzone.org/tutorials/upload-shell-with-sql-injection/)并获取您的 PHP 定义的盐。

# jquery - 在提交表单之前验证 textarea

> ID：15046808
> 
> 赞同：0
> 
> 时间：2013-02-23T23:10:51.397
> 
> 标签：jquery

您如何`<textarea>`在输入数据之后（模糊？）和提交表单之前验证？

例如，我有一个`<textarea>`用户输入以下数据：

```
alpha beta charlie delta 
```

在用户完成输入此数据并且 textarea 不再聚焦后，我希望它验证并提醒用户是否输入了单词`beta`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:52:38.960

`blur()`当且仅当 textarea 未聚焦时，如果要触发验证，则应使用该函数 -`focusout()`无论表单中哪个输入字段未聚焦，当您要触发验证时，该函数会更好地工作。

一个例子是：

```
$("textarea").blur(function() {
    var userInput = $(this).val();
    if(userInput.match(/beta/gi)) {
        // If there's a match, do this
    } else {
        // If there isn't a match, do this
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T23:14:56.370

我发现了这个`.focusout()`功能：

[http://api.jquery.com/focusout/](http://api.jquery.com/focusout/)

# asp.net-mvc - 带有 AngularJS 的 ASP.NET MVC 验证表单

> ID：15046817
> 
> 赞同：37
> 
> 时间：2013-02-23T23:11:34.097
> 
> 标签：asp.net-mvc, validation, razor, angularjs, data-annotations

我在 MVC 4 和 AngularJS (+ twitter bootstrap) 中有一个项目。我通常在我的 MVC 项目中使用“jQuery.Validate”、“DataAnnotations”和“Razor”。然后我在 web.config 中启用这些键来验证客户端上模型的属性：

```
<add key="ClientValidationEnabled" value="true" />
<add key="UnobtrusiveJavaScriptEnabled" value="true" /> 
```

例如，如果我的模型中有这个：

```
[Required]
[Display(Name = "Your name")]
public string Name { get; set; } 
```

使用这个 Cshtml：

```
@Html.LabelFor(model => model.Name)
@Html.TextBoxFor(model => model.Name)
@Html.ValidationMessageFor(model => model.Name) 
```

html结果将：

```
<label for="Name">Your name</label>
<input data-val="true" data-val-required="The field Your name is required." id="Name" name="Name" type="text" value="" />
<span class="field-validation-valid" data-valmsg-for="Name" data-valmsg-replace="true"></span> 
```

但是现在当我使用 AngularJS 时，我想渲染可能是这样的：

```
<label for="Name">Your name</label>
<input type="text" ng-model="Name" id="Name" name="Name" required />
<div ng-show="form.Name.$invalid">
   <span ng-show="form.Name.$error.required">The field Your name is required</span>
</div> 
```

我不知道是否有任何帮助或“数据注释”来解决这个问题。我了解 AngularJS 具有更多功能，例如：

```
<div ng-show="form.uEmail.$dirty && form.uEmail.$invalid">Invalid:
    <span ng-show="form.uEmail.$error.required">Tell us your email.</span>
    <span ng-show="form.uEmail.$error.email">This is not a valid email.</span>
</div> 
```

嗯，具体来说。我需要一些帮助器或“数据注释”来解析属性（数据注释），以便使用 AngularJS 在客户端上显示。

如果它仍然不存在，也许是时候这样做了，比如 RazorForAngularJS

**编辑**

我认为使用 ASP.NET MVC 和 AngularJS 的最佳方式可能是手工完成（`front-end`）（手工编写所有 HTML）

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-24T01:30:51.697

作为编写 ASP.Net/Angular 网站的人，我可以告诉您，如果您不再使用 Razor 来呈现您的 HTML，那么您会更好。

在我的项目中，我设置了一个 razor 视图来呈现我的主页（我使用的是用 Angular 编写的单页应用程序），然后我有一个包含直接 .html 文件的文件夹，用作 Angular 的模板。

在我的例子中，其余部分是在 ASP.Net Web API 调用中完成的，但您也可以将 MVC 操作与 JSON 结果一起使用。

一旦我切换到这个架构，事情对我来说就顺利多了，开发方面。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-03T10:02:51.687

我同意 blesh 关于远离 razor 的想法，但您可以创建一些工具来更快地创建页面。恕我直言，最好在需要的地方使用剃须刀功能，而不是将其从工具集中删除。

顺便说一句，看看[ngval](https://github.com/alisabzevari/ngval)。它将数据注释作为 angularjs 验证器带到客户端。它有一个 html 助手和一个角度模块。我不得不提到该项目处于早期开发阶段。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-06T00:26:49.073

我写了一个指令来平滑从 MVC 到 AngularJs 的过渡。标记看起来像：

```
<validated-input name="username" display="User Name" ng-model="model.username" required> 
```

其行为与 Razor 约定相同，包括将验证延迟到修改字段之后。随着时间的推移，我发现维护我的标记非常直观和简单。

[我关于这个主题的文章](http://thedunlops.id.au/content/index.php?option=com_content&view=article&id=72&Itemid=88)

[链接器](http://plnkr.co/edit/iueAns?p=preview)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-10T01:21:07.370

我认为可能有六种方法可以做你想做的事。可能最简单的方法是使用识别 jquery.validation 标记的 Angular 指令。

这是一个这样的项目：[https ://github.com/mdekrey/unobtrusive-angular-validation](https://github.com/mdekrey/unobtrusive-angular-validation)

这是另一个：[https ://github.com/danicomas/angular-jquery-validate](https://github.com/danicomas/angular-jquery-validate)

我也没有尝试过，因为就个人而言，我通过编写代码使 MVC 输出角度验证属性而不是 jquery.validation.unobtrusive 属性解决了这个问题。

第三种选择是仅依赖服务器端验证。尽管这显然较慢，但有时对于更复杂的验证场景，它可能是您唯一的选择。在这种情况下，您只需编写 javascript 来解析 Web API 控制器通常返回的 ModelStateDictionary 对象。有一些关于如何做到这一点并将其集成到 AngularJS 的本机验证模型中的示例。

下面是一些解析 ModelStateDictionary 的不完整代码：

````

```
angular.module('app')
    .directive('joshServerValidate', ['$http', function ($http) {
        return {
            require: 'ngModel',
            link: function (scope, ele, attrs, c) {
                console.info('wiring up ' + attrs.ngModel + ' to controller ' + c.$name);
                scope.$watch('modelState', function () {
                    if (scope.modelState == null) return;
                    var modelStateKey = attrs.joshServerValidate || attrs.ngModel;
                    modelStateKey = modelStateKey.replace(attrs.joshServerValidatePrefix, '');
                    modelStateKey = modelStateKey.replace('$index', scope.$index);
                    modelStateKey = modelStateKey.replace('model.', '');
                    console.info('validation for ' + modelStateKey);
                    if (scope.modelState[modelStateKey]) {
                        c.$setValidity('server', false);
                        c.$error.server = scope.modelState[modelStateKey];
                    } else {
                        c.$setValidity('server', true);
                    }
                });
            }
        };
    }]); 
```

````

我对这里提供的其他答案感到相当失望。当您尝试验证比电子邮件地址更困难的东西时，“不要这样做”并不是一个很好的建议。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-18T19:28:26.930

我以稍微不同的方式解决了这个问题。我修改了我的 MVC 应用程序，以通过过滤器和自定义视图引擎响应 application/json 内容类型，该引擎将 Json 序列化器剃须刀模板注入视图位置以进行搜索。

这样做是为了允许使用 jQuery UI、Bootstrap 和 Json 响应为相同的控制器/操作对我们的网站进行蒙皮。

这是一个示例 json 结果：

```
{
  "sid": "33b336e5-733a-435d-ad11-a79fdc1e25df",
  "form": {
    "id": 293021,
    "disableValidation": false,
    "phone": null,
    "zipCode": "60610",
    "firstName": null,
    "lastName": null,
    "address": null,
    "unit": null,
    "state": "IL",
    "email": null,
    "yearsAtAddress": null,
    "monthsAtAddress": null,
    "howHeard": null
  },
  "errors": [
    "The first name is required",
    "The last name is required",
    "Please enter a phone number",
    "Please enter an email address"
  ],
  "viewdata": {
    "cities": [
      {
        "selected": false,
        "text": "CHICAGO",
        "value": "CHICAGO"
      }
    ],
    "counties": [
      {
        "selected": false,
        "text": "COOK"
      }
    ]
  }
} 
```

过滤器用于将重定向结果转换为 json 对象，该对象将下一个 url 传递给调用程序：

```
 public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        base.OnActionExecuted(filterContext);

        // if the request was application.json and the response is not json, return the current data session.
        if (filterContext.HttpContext.Request.ContentType.StartsWith("application/json") && 
            !(filterContext.Result is JsonResult || filterContext.Result is ContentResult))
        {
            if (!(filterContext.Controller is BaseController controller)) return;

            string url = filterContext.HttpContext.Request.RawUrl ?? "";
            if (filterContext.Result is RedirectResult redirectResult)
            {
                // It was a RedirectResult => we need to calculate the url
                url = UrlHelper.GenerateContentUrl(redirectResult.Url, filterContext.HttpContext);
            }
            else if (filterContext.Result is RedirectToRouteResult routeResult)
            {
                // It was a RedirectToRouteResult => we need to calculate
                // the target url
                url = UrlHelper.GenerateUrl(routeResult.RouteName, null, null, routeResult.RouteValues, RouteTable.Routes,
                    filterContext.RequestContext, false);
            }
            else
            {
                return;
            }
            var absolute = url;
            var currentUri = filterContext.HttpContext.Request.Url;
            if (url != null && currentUri != null && url.StartsWith("/"))
            {
                absolute = currentUri.Scheme + "://" + currentUri.Host + url;
            }

            var data = new {
                nextUrl =  absolute,
                uid = controller.UniqueSessionId(),
                errors = GetFlashMessage(filterContext.HttpContext.Session)
            };

            var settings = new JsonSerializerSettings
            {
                ReferenceLoopHandling = ReferenceLoopHandling.Ignore,
                PreserveReferencesHandling = PreserveReferencesHandling.Objects,
                Formatting = Formatting.Indented,
                NullValueHandling = NullValueHandling.Ignore
            };
            filterContext.Result = new ContentResult
            {
                ContentType = "application/json",
                Content = JsonConvert.SerializeObject(data,settings)
            };
        } 
```

这是 Views\Json\Serializer.cshml，为了代码库的简洁性和安全性，排除了 using 语句。这会尝试三次返回响应。首先是阅读原始的 View{controller}{action}.cshtml，解析出 html 助手并将它们放入表单和字段中。第二次尝试从我们的内置博客系统（下面的 PostContent）中查找和元素，但失败了我们只使用模型。

```
@model dynamic
@{
    Response.ContentType = "application/json";

    Layout = "";
    var session = new Object(); // removed for security purposes

    var messages = ViewBag.Messages as List<string>() ?? new List<string>();
    var className = "";
    if (!ViewData.ModelState.IsValid)
    {
        messages.AddRange(ViewData.ModelState.Values.SelectMany(val => val.Errors).Select(error => error.ErrorMessage));
    }

    dynamic result;
    string serial;

    try
    {
        Type tModel = Model == null ? typeof(Object) : Model.GetType();
        dynamic form = new ExpandoObject();
        dynamic fields = new ExpandoObject();

        var controller = ViewContext.RouteData.Values["controller"] as string ?? "";
        var action = ViewContext.RouteData.Values["action"] as string;

        var viewPath = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "Views", controller, action + ".cshtml");
        if (File.Exists(viewPath))
        {
            string contents = File.ReadAllText(viewPath);
            var extracted = false;
            var patterns = new[]
            {
                @"@Html\.\w+For\(\w+ => \w+\.(.*?)[,\)]",
                @"@Html\.(\w+)For\(\w+ => \w+\.([\w\.]+)[, ]*(\(SelectList\))*(ViewBag\.\w+)*[^\)]*",
                "name=\"(.*?)\""
            };

            for (var i = 0; i < 3 && !extracted; i++)
            {
                switch (i)
                {
                    case 0:
                        form = contents.ExtractFields(patterns[0], Model as object, out extracted);
                        fields = contents.ExtractElements(patterns[1], Model as object, out extracted, ViewData);
                        break;
                    case 1:
                        form = Model as mvcApp.Models.Blog == null ? null : (Model.PostContent as string).ExtractFields(patterns[2], Model as object, out extracted);
                        break;
                    default:
                        form = Model;
                        break;
                }
            }
        }
        else if (Model == null)
        {
            // nothing to do here - safeModel will serialize to an empty object
        }
        else if (Model is IEnumerable)
        {
            form = new List<object>();

            foreach (var element in ((IEnumerable) Model).AsQueryable()
                    .Cast<dynamic>())
            {
                form.Add(CustomExtensions.SafeClone(element));
            }

        } else {
            form = Activator.CreateInstance(tModel);
            CustomExtensions.CloneMatching(form, Model);
        }

        // remove any data models from the viewbag to prevent
        // recursive serialization
        foreach (var key in ViewData.Keys.ToArray())
        {
            var value = ViewData[key];
            if (value is IEnumerable)
            {
                var enumerator = (value as IEnumerable).GetEnumerator();
                value = enumerator.MoveNext() ? enumerator.Current : null;
            }
            if (value != null)
            {
                var vtype = value.GetType();
                if (vtype.Namespace != null && (vtype.Namespace == "System.Data.Entity.DynamicProxies" || vtype.Namespace.EndsWith("Models")))
                {
                    ViewData[key] = null;
                }
            }
        }

        result = new
        {
            uid = session.UniqueId,
            form,
            fields,
            errors = messages.Count == 0 ? null : messages,
            viewdata = ViewBag
        };
        var setting = new JsonSerializerSettings
        {
            PreserveReferencesHandling = PreserveReferencesHandling.None,
            ReferenceLoopHandling = ReferenceLoopHandling.Ignore,
            ContractResolver = new CamelCasePropertyNamesContractResolver(),
            Formatting = Formatting.Indented
        };
        if (form is IEnumerable)
        {
            setting.NullValueHandling = NullValueHandling.Ignore;
        }
        serial = JsonConvert.SerializeObject(result, setting);
    }
    catch (Exception e)
    {
        result = new {
            uid = session.UniqueId,
            error = e.Message.Split('|')
        };
        serial = JsonConvert.SerializeObject(result);
    }
    @Html.Raw(serial)
} 
```

对于克隆方法，请参阅[克隆不同对象属性的最佳方法](https://stackoverflow.com/questions/14218989/best-way-to-clone-properties-of-disparate-objects)

```
 public static dynamic ExtractFields(this string html, string pattern, object model, out bool extracted)
    {
        if (html == null || model == null)
        {
            extracted = false;
            return null;
        }
        dynamic safeModel = new ExpandoObject();
        var safeDict = (IDictionary<string, Object>)safeModel;

        var matches = new Regex(pattern).Matches(html);
        extracted = matches.Count > 0;

        if ( extracted )
        {
            foreach (Match match in matches)
            {
                var name = match.Groups[1].Value;
                var value = CustomExtensions.ValueForKey(model, name);
                var segments = name.Split('.');
                var obj = safeDict;
                for (var i = 0; i < segments.Length; i++)
                {
                    name = segments[i];
                    if (i == segments.Length - 1)
                    {
                        if (obj.ContainsKey(name))
                        {
                            obj[name] = value;
                        }
                        else
                        {
                            obj.Add(name, value);
                        }
                        continue;
                    }
                    if (!obj.ContainsKey(name))
                    {
                        obj.Add(name, new ExpandoObject());
                    }
                    obj = (IDictionary<string, Object>)obj[name];
                }
            }
        }
        return safeModel;
    } 
```

这是一个键值编码的实现，可以更轻松地处理属性链：

```
/// <summary>
/// This borrows KeyValueCoding from Objective-C and makes working with long chains of properties more convenient. 
/// KeyValueCoding is null tolerant, and will stop if any element in the chain returns null instead of throwing a NullReferenceException. 
/// Additionally, the following Linq methods are supported: First, Last, Sum &amp; Average.
/// <br/>
/// KeyValueCoding flattens nested enumerable types, but will only aggregate the last element: "children.grandchildren.first" will return 
/// the first grandchild for each child. If you want to return a single grandchild, use "first.children.grandchildren". The same applies to
/// Sum and Average.
/// </summary>
/// <param name="source">any object</param>
/// <param name="keyPath">the path to a descendant property or method "child.grandchild.greatgrandchild".</param>
/// <param name="throwErrors">optional - defaults to supressing errors</param>
/// <returns>returns the specified descendant. If intermediate properties are IEnumerable (Lists, Arrays, Collections), the result *should be* IEnumerable</returns>
public static object ValueForKey(this object source, string keyPath, bool throwErrors = false)
{
    try
    {
        while (true)
        {
            if (source == null || keyPath == null) return null;
            if (keyPath == "") return source;

            var segments = keyPath.Split('.');
            var type = source.GetType();
            var first = segments.First();
            var property = type.GetProperty(first);
            object value = null;
            if (property == null)
            {
                var method = type.GetMethod(first);
                if (method != null)
                {
                    value = method.Invoke(source, null);
                }
            }
            else
            {
                value = property.GetValue(source, null);
            }

            if (segments.Length == 1) return value;

            var children = string.Join(".", segments.Skip(1));
            if (value is IEnumerable || "First|Last|Sum|Average".IndexOf(first, StringComparison.OrdinalIgnoreCase) > -1)
            {
                var firstChild = children.Split('.').First();
                var grandchildren = string.Join(".", children.Split('.').Skip(1));
                if (value == null) {
                    var childValue = source.ValueForKey(children);
                    value = childValue as IEnumerable<object>;
                    switch (first.Proper())
                    {
                        case "First":
                            return value == null ? childValue : ((IEnumerable<object>)value).FirstOrDefault();
                        case "Last":
                            return value == null ? childValue : ((IEnumerable<object>)value).LastOrDefault();
                        case "Count":
                            return value == null ? (childValue == null ? 0 : 1) : (int?)((IEnumerable<object>)value).Count();
                        case "Sum":
                            return value == null
                                ? Convert.ToDecimal(childValue ?? "0")
                                : ((IEnumerable<object>) value).Sum(obj => Convert.ToDecimal(obj ?? "0"));
                        case "Average":
                            return value == null
                                ? Convert.ToDecimal(childValue ?? "0")
                                : ((IEnumerable<object>) value).Average(obj => Convert.ToDecimal(obj ?? "0"));
                    }
                } else {
                    switch (firstChild.Proper())
                    {
                        case "First":
                            return ((IEnumerable<object>)value).FirstOrDefault().ValueForKey(grandchildren);
                        case "Last":
                            return ((IEnumerable<object>)value).LastOrDefault().ValueForKey(grandchildren);
                        case "Count":
                            if (!string.IsNullOrWhiteSpace(grandchildren))
                            {
                                value = value.ValueForKey(grandchildren);
                                if (value != null && ! (value is IEnumerable<object>))
                                {
                                    return 1;
                                }
                            }
                            return value == null ? 0 : ((IEnumerable<object>)value).Count();
                        case "Sum":
                            return ((IEnumerable<object>)value).Sum(obj => Convert.ToDecimal(obj.ValueForKey(grandchildren)??"0"));
                        case "Average":
                            return ((IEnumerable<object>)value).Average(obj => Convert.ToDecimal(obj.ValueForKey(grandchildren) ?? "0"));
                    }
                }
                if (value == null) return null;
                var flat = new List<object>();
                foreach (var element in (IEnumerable<object>)value)
                {
                    var child = element.ValueForKey(children);
                    if (child == null)
                    {
                        continue;
                    }
                    if (child is IEnumerable && !(child is string))
                    {
                        flat.AddRange((IEnumerable<object>) child);
                    }
                    else
                    {
                        flat.Add(child);
                    }
                }
                return flat.Count == 0? null: flat;
            }
            source = value;
            keyPath = children;
        }
    }
    catch (Exception)
    {
        if (throwErrors) throw;
    }
    return null;
} 
```

# android - Android设置自定义标题栏错误

> ID：15046818
> 
> 赞同：0
> 
> 时间：2013-02-23T23:11:48.370
> 
> 标签：android

我正在创建一个简单的 Android 应用程序，我想在其中添加一个自定义标题栏。但是，当我创建自定义标题栏时，我遇到了一个问题。

这是我在 GetPhoto Activity 类中的 OnCreate 方法：

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        boolean titled = requestWindowFeature(Window.FEATURE_CUSTOM_TITLE
        setContentView(R.layout.getphoto);
        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.title_complex);

        initialize();
    } 
```

我的 title_complex.xml （用于定义自定义标题）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="35dip"
    android:gravity="center_vertical"
    android:orientation="horizontal" >

    <Imageview
        android:src="@drawable/header"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:text="Hello world!"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#7cfc00" />

</LinearLayout> 
```

当我将 getWindow().setFeatureInt() 放在 setContentView() 之后时，出现如下错误：

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.featureselection/com.example.featureselection.GetPhoto}: android.view.InflateException: Binary XML file line #16: Error inflating class Imageview
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
at android.app.ActivityThread.access$600(ActivityThread.java:127)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
... 
```

featureselection 是应用程序名称，GetPhoto 是包含上面显示的 OnCreate 方法的类。我不知道为什么它会出错。我看到其他人也编写了这样的代码，并且运行良好。

另一件事是，如果我将 getWindow().setFeatureInt() 放在 setContentView() 之前，当我运行我的应用程序时，它不会给出错误，但自定义标题栏上没有显示任何内容，而我期望图像和“hello world” " 显示在自定义标题栏上。

仅供参考：我在 res/values 文件夹中也有这个 customer_style.xml：

```
<resources>
    <style name="CustomWindowTitleBackground">
        <item name="android:background">#008000</item>
    </style>

    <style name="CustomTheme" parent="android:Theme">
        <item name="android:windowTitleSize">35dip</item>
        <item name="android:windowTitleBackgroundStyle">@style/CustomWindowTitleBackground</item>
    </style>
</resources> 
```

设置样式。

有谁知道问题是什么以及如何解决？将应用任何分段或解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T00:08:05.100

确保您的 XML 文件使用的是**ImageView**而不是 Imageview - 元素名称区分大小写。

# sql - 基本 SQL：如何使用一个表的属性作为对其他表的查找

> ID：15046820
> 
> 赞同：0
> 
> 时间：2013-02-23T23:12:15.783
> 
> 标签：sql

假设我有三个表：

```
Table A:

Column A | Column B
   Z          Q
   Q          Z

Table Z:

Column A | Column B
   100        50

Table Q:

Column A | Column B
   200        75 
```

我想要做的是使用表 A 作为一种指南产生如下结果：

```
 DESIRED RESULT:

@Temp Table
  Column A | Column B
     100        75
     200        50 
```

我希望能够在 SQL 中作为存储过程执行这种效果，但我无法获得我想要的结果。可以使用一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:28:36.833

在人为的示例中，在不同的表上使用相同的列名有点令人困惑，但我相信您要描述的是经典的多对多关系。

如果是这样，您`Table A`将成为您的交叉引用表。

不幸的是，要使其工作，您需要将相关的外键值存储在交叉引用表中，而不是您建议的实际值。

这可能是你所追求的：

```
Table A
QA |ZA
1  |2
3  |4

Table Q
QA |QB
1  |100
3  |200

Table Z
ZA |ZB
2  |300
4  |400

SELECT Q.QB, Z.ZB
FROM Q INNER JOIN A ON Q.QA = A.QA
  INNER JOIN Z ON Z.ZA = A.ZA 
```

...结果是：

```
QB |ZB
100|300
200|400 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T23:29:21.203

如果我了解您的要求，这是一种方法，但如果您的 z 和 q 表中有多个值，除非您有一些要加入的东西，否则它将不起作用：

```
select 
  case when a.cola = 'Z' then z.cola else q.cola end cola,
  case when a.colb = 'Z' then z.colb else q.colb end colb
from tablea a, tableq q, tablez z 
```

[小提琴演示示例](http://sqlfiddle.com/#!3/5999c/2)

# jsf - 为什么我的 jsf 标签不起作用？

> ID：15046821
> 
> 赞同：0
> 
> 时间：2013-02-23T23:12:20.183
> 
> 标签：jsf, jsf-2

在 Eclipse JUNO 中，我开始：

1.  新的动态网络项目
2.  名称：JSFTest；配置：JavaServer Faces v2.0 项目
3.  JSF 能力： ![在此处输入图像描述](../Images/e58ace808f376269f447c17ed5b69b89.png)
4.  将 jars 复制到 WEB-INF/lib（jstl-api、jstl-impl、jsf-api、jsf-impl）：

    ![在此处输入图像描述](../Images/82a5b10d01e36703582db6d9102f5b9b.png)

5.  WebContent 的新 HTML：带有“新 Facelet 组合页面”的 index.xhtml，以及里面的代码：

    ![在此处输入图像描述](../Images/d6c7f6d963f70c0c6cda0bb5f74eb989.png)

6.  在 web.xml 中，我将 index.xhtml 写入欢迎部分

7.  当我在我的 apache tomcat 7 服务器上运行它时，结果（不要担心 h1 标题）：

    ![在此处输入图像描述](../Images/ae8638da2c1cbc7a6953fe2db368a3e8.png)

那么为什么它不显示 outtext 和按钮呢？我做错了什么？我在 youtube 上看到了很多视频，我关注了他们，在视频中它有效，但在我身上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T23:16:00.520

因为您必须访问虚拟文件夹`index.xhtml`下的页面，如您的url 映射文件中所述。`/faces/``web.xml``FacesServlet`

使您的 JSF 页面正常工作的一种简单方法是更改​​您的`web.xml`

从：

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping> 
```

至

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping> 
```

如果您不想更改此设置，则必须将您的更改`welcome-file`为`/faces/index.xhtml`.

IMO 第一个选项会更好，这样`FacesServlet`只会处理`xhtml`页面，使用`/faces/*`它将使其处理任何其他资源，如图像、CSS 和 JS 文件。

# php - php xml文件加载与pegination

> ID：15046822
> 
> 赞同：1
> 
> 时间：2013-02-23T23:12:21.670
> 
> 标签：php, xml

我有这个 xml 文件结构：

```
<?xml version="1.0" encoding="UTF-8"?>

<deals>

<deal>
<deal_id>1</deal_id>
<deal_title> <![CDATA[THE TITLE]]> </deal_title>
<deal_description> <![CDATA[THE DESCRIPTION]]> </deal_description>
<deal_url> <![CDATA[http://www.thedomain.com]]> </deal_url>
<deal_price>12.00</deal_price>
<deal_previous_price>68.00</deal_previous_price>
<deal_discount>82</deal_discount>
<deal_image> <![CDATA[http://www.thedomain.com/images/image.jpg]]> </deal_image>
<deal_shop>DEAL SITE NAME</deal_shop>
</deal>

</deals> 
```

现在我正在使用下面的代码通过循环加载 xml：

```
<?php

//Path to my xml
$url = "myxml.xml";

// get xml file contents
$xml = simplexml_load_file($url);

foreach($xml->deal as $deal)
{

echo "<p>";
echo "<strong>ID:</strong> ".$deal->deal_id."<br/>";
echo "<strong>Title:</strong> ".$deal->deal_title."<br/>";
echo "<strong>Description:</strong> ".$deal->deal_description."<br/>";
echo "<strong>Url:</strong> ".$deal->deal_url."<br/>";
echo "<strong>Price:</strong> ".$deal->deal_price."<br/>";
echo "<strong>Original Price:</strong> ".$deal->deal_previous_price."<br/>";
echo "<strong>Discount:</strong> ".$deal->deal_discount."<br/>";
echo "<strong>Image:</strong> ".$deal->deal_image."<br/>";
echo "<strong>Deal Shop:</strong> ".$deal->deal_shop."<br/>";
echo "</p>";

}

?> 
```

我得到了所有的数据，但我遇到了一个严重的问题..

xml 文件有超过 400 条记录。

是否有可能限制加载程序记录，如 php 限制？

我只想做一个钉子。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:17:53.567

尝试这样的事情。

```
$xml = simplexml_load_file($url);
$limit = 0;
$num = 3;
foreach($xml->deal as $deal)
{
if($limit == $num)
break;
....
...
.....
$limit++;
} 
```

# android - 安装后服务不启动？

> ID：15046830
> 
> 赞同：1
> 
> 时间：2013-02-23T23:13:05.847
> 
> 标签：android

我已经按照这里的教程：http: [//blog.sptechnolab.com/2011/09/14/android/starting-an-android-service-after-boot/](http://blog.sptechnolab.com/2011/09/14/android/starting-an-android-service-after-boot/)

关于创建服务，该服务在 Android 启动后激活。无论如何它实际上从未开始。我在这里发现：[第一次安装 .apk 时如何启动服务，](https://stackoverflow.com/questions/8531926/how-to-start-a-service-when-apk-is-installed-for-the-first-time) 自 Android 3.0+ 以来不再可能。

我的问题是：

*   安装后如何启动引导服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:15:37.087

在最新的 android 版本中，您只能在用户手动启动应用程序时启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T01:49:58.913

> 但是如何手动启动服务，因为它没有任何视觉元素？

以活动的形式添加“视觉元素”。

无论如何，您都需要一项活动，因为：

*   用于管理此服务行为的设置
*   获得支持的帮助和说明
*   许可协议

所以，写活动。用户启动您的 Activity 后，您的 manifest-registered `BroadcastReceivers`（例如您的`BOOT_COMPLETED`接收器）将在 Android 3.1+ 设备上再次运行。

# windows-phone-8 - 在 Windows phone 8 上向 asmx 服务添加soap标头？

> ID：15046835
> 
> 赞同：1
> 
> 时间：2013-02-23T23:13:49.887
> 
> 标签：windows-phone-8, asmx

Web 服务（asmx）——我必须使用——想要一个自定义的肥皂头。我尝试像这样添加 OperationContextScope Header：

```
ServiceReference1.WebServiceStructureSoapClient client = new ServiceReference1.WebServiceStructureSoapClient();

client.getSectorsCompleted += asd_getSectorsCompleted;

AuthHeader serviceCredential = new AuthHeader() { Username = "xxxx", Password = "yyyyy" };

using (OperationContextScope scope = new OperationContextScope(client.InnerChannel))
{
     MessageHeader header = MessageHeader.CreateHeader("AuthHeader", "http://mobilecampaigns.org/", serviceCredential,true);
     OperationContext.Current.OutgoingMessageHeaders.Add(header);
     client.getSectorsAsync("test", "test", "i", "test");
} 
```

在服务器端，AutHeader 不为空，但用户名和密码为空。

任何想法？

谢谢

# c - 递归函数和 pthreads

> ID：15046839
> 
> 赞同：0
> 
> 时间：2013-02-23T23:14:05.390
> 
> 标签：c, recursion, pthreads

我最近开始研究 pthreads 并遇到了一个问题。所以，我有一个二叉树拓扑结构，15 个节点（0->14 个节点 ID），我为节点 3、4、5 和 6 创建了 4 个 pthread（不想为 eg 创建更多）。因此，创建的每个线程都试图到达其父节点以锁定该节点并增加其中的全局变量的值。为此，我为节点结构中的每个节点创建了一个互斥锁，并使用了 pthread_mutex_trylock 条件——否则我让他们做任何事情，例如完成而不做工作或彼此行为不端。所以，当我为每个调用自身的线程调用一个函数时，我的程序崩溃了。代码如下所示。如果我将函数 testExclusion 的名称更改为 testExclusion22 工作正常，否则程序将继续运行而不会停止。如果我的自调用次数有限，例如 3 次循环 -> 参见 testFunction()，也会发生同样的事情。所以我的问题是，有什么问题？我是否有写错的地方或不支持，如果是这样，我该怎么做？非常感谢！

`// main.c`

```
//  Threads_Extended

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <pthread.h>

int globalVariable;
pthread_mutex_t global;

typedef struct node {    
    int value;
    int nodeID;
    struct node *parent;

    pthread_mutex_t nodeMutex;
} node_t ;

void initialize_node(node_t *node,node_t *next, int nodeIdentity)
{   
    node->nodeID=nodeIdentity;    
    node->parent = next;
    node->value=0;   
}

void printingFunction(void){
    printf("This is for testing ONLY!");

    //for (int i=0; i<3; i++) {
    printingFunction();
    //}
}

void testExclusion22(node_t *node, node_t *next)
{   
    int locked=0;    
    int locked2=0;

    printf("I am thread %d and I am trying to lock node %d!\n", node->nodeID, next->nodeID);

    while (locked!=1){
        if(pthread_mutex_trylock(&next->nodeMutex)==0){
            printf("I am thread %d and I am increasing the global value!\n", node->nodeID);

            while(locked2!=1){
                if ((pthread_mutex_trylock(&global))==0){
                    globalVariable++;
                    printf("Global variable's value is: %d!\n", globalVariable);
                    pthread_mutex_unlock(&global);
                    locked2=1;
                }
            }

            printf("I am thread %d and I am releasing the node %d!\n", node->nodeID, next->nodeID);
            pthread_mutex_unlock(&next->nodeMutex);
            locked=1;
        }
        else
            printf("I am thread %d and I was not able to lock next node %d!\n", node->nodeID, next->nodeID);
}

    printingFunction();
    // testExclusion(node, node->parent);
}

void testExclusion(node_t *node, node_t *next)
{
    int locked=0;
    int locked2=0;

    printf("I am thread %d and I am trying to lock node %d!\n", node->nodeID, next->nodeID);

    while (locked!=1){
        if(pthread_mutex_trylock(&next->nodeMutex)==0){
            printf("I am thread %d and I am increasing the global value!\n", node->nodeID);

            while(locked2!=1){
                if ((pthread_mutex_trylock(&global))==0){
                    globalVariable++;
                    printf("Global variable's value is: %d!\n", globalVariable);
                    pthread_mutex_unlock(&global);
                    locked2=1;
                }
            }

            printf("I am thread %d and I am releasing the node %d!\n", node->nodeID, next->nodeID);
            pthread_mutex_unlock(&next->nodeMutex);
            locked=1;
        }
        else
            printf("I am thread %d and I was not able to lock next node %d!\n", node->nodeID, next->nodeID);
    }

    testExclusion22(node, node->parent);
   // testExclusion(node, node->parent);
}

void *PrintHello(void *node)
{
    node_t *tempNode=node;
    pthread_mutex_init(&global, NULL);

    printf("Hello World! It's me, thread of node # %d!\n", (tempNode->nodeID));

    testExclusion(tempNode, tempNode->parent);   
    pthread_exit(NULL);
}

int main (int argc, char *argv[])
{

    node_t *nodes = malloc(15 * sizeof(node_t));

    int rc;
    int simCounter;

    int i;
    int j=0;
    int n=0;

    globalVariable=0;

    for (i=0; i<7; i++) {
        if (i==0){
            initialize_node(&nodes[i],NULL,i);
            printf("Node %d has been created! Node %d is the source root! \n\n", nodes[i].nodeID,nodes[i].nodeID);
        }
        else{
            if ((n%2)==0){
                initialize_node(&nodes[i],&nodes[j],i);
                printf("Node %d has been created with Node %d as a parent! \n\n", nodes[i].nodeID,nodes[j].nodeID);
                n++;
            }
            else
            {
                initialize_node(&nodes[i],&nodes[j],i);
                printf("Node %d has been created with Node %d as a parent! \n\n", nodes[i].nodeID,nodes[j].nodeID);
                j++;
                n++;
            }
        }
    }

    simCounter=2;

    for(i=0; i<7; i++)
        pthread_mutex_init(&nodes[i].nodeMutex, NULL);

    for (j=1; j<(simCounter+1); j++){
        pthread_t *threads = malloc(4 * sizeof(pthread_t));

        for(i=0; i<4; i++){
            printf("In main: creating thread %d\n", i);
            nodes[i].nodeID=i;
            rc = pthread_create(&threads[i], NULL, PrintHello, (void *)&nodes[i+3]);
            if (rc){
                printf("ERROR; return code from pthread_create() is %d\n", rc);
                exit(-1);
            }
            pthread_mutex_destroy(&nodes[i+3].nodeMutex);
        }
        for(i=0; i<4; i++)
            pthread_join(threads[i], NULL);

        printf("I am back in main!\n\n\n");

        free(threads);
        pthread_mutex_destroy(&global);
    }

    free(nodes);
    pthread_exit(NULL);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:23:24.383

你`printingFunction()`永远在调用自己，没有任何退出条件：

```
void printingFunction() {
    printf("This is for testing ONLY!");
    printingFunction();
} 
```

# java - 接受来自 Web 服务的 JSON 对象数组

> ID：15046846
> 
> 赞同：0
> 
> 时间：2013-02-23T23:15:17.837
> 
> 标签：java, android, json

我设置了一个 RESTful Web 服务，其中包括以下内容：

```
 @GET
@Path("{from}/{to}")
@Produces({"application/xml", "application/json"})
public List<Story> findRange(@PathParam("from") Integer from, @PathParam("to") Integer to) {
    return super.findRange(new int[]{from, to});
} 
```

它返回我数据库中所有 Story 对象的列表。我也有这个：

```
 @GET
@Path("{id}")
@Produces({"application/xml", "application/json"})
public Story find(@PathParam("id") Short id) {
    return super.find(id);
} 
```

当我将“/ {id}”添加到路径的末尾时，它会返回一个 Story 对象。这些都可以在服务器上正常工作，并返回预期的结果。在客户端，后一种方法使用以下代码完美运行：

```
HttpClient httpclient = new DefaultHttpClient();
        HttpGet httpget = new HttpGet(url);
        httpget.addHeader("accept", "application/json");

        HttpResponse response;
        JSONObject object = new JSONObject();
        String resprint = new String();

        try {
            response = httpclient.execute(httpget);
            // Get the response entity
            HttpEntity entity = response.getEntity();

            if (entity != null) {
                // get entity contents and convert it to string
                InputStream instream = entity.getContent();
                String result= convertStreamToString(instream);
                resprint = result;
                // construct a JSON object with result
                object=new JSONObject(result);
                // Closing the input stream will trigger connection release
                instream.close();
            }
        } 
        catch (ClientProtocolException e) {System.out.println("CPE"); e.printStackTrace();} 
        catch (IOException e) {System.out.println("IOE"); e.printStackTrace();} 
        catch (JSONException e) { System.out.println("JSONe"); e.printStackTrace();}

        System.out.println("FUCKYEAHBG: " + resprint);
        return object;
    } 
```

}

我的问题是，当我尝试将相同的代码与第一个方法一起使用时，它应该返回 JSON Story 对象的列表，我得到一个 JSON 异常：类型不匹配。

如何更改此代码以接受 json 对象数组而不是单个对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:15:17.837

当我问这个问题时想通了： JSONArray 是一种不同类型的对象，独立于 JSONObject，因此 get 请求的结果必须声明为：

```
 HttpClient httpclient = new DefaultHttpClient();
        HttpGet httpget = new HttpGet(url);
        httpget.addHeader("accept", "application/json");

        HttpResponse response;
        JSONArray object = new JSONArray();
        String resprint = new String();

        try {
            response = httpclient.execute(httpget);
            // Get the response entity
            HttpEntity entity = response.getEntity();

            if (entity != null) {
                // get entity contents and convert it to string
                InputStream instream = entity.getContent();
                String result= convertStreamToString(instream);
                resprint = result;
                // construct a JSON object with result
                object=new JSONArray(result);
                // Closing the input stream will trigger connection release
                instream.close();
            } 
```

想我会完成发布问题，以防任何其他 JSON 菜鸟有这个问题。

# linux - Linux - 为文件中的文本着色

> ID：15046851
> 
> 赞同：1
> 
> 时间：2013-02-23T23:15:28.897
> 
> 标签：linux, text, colors

我在 CentOS 6 上，我正在使用 Pre-Login 文件消息，位于此处：

```
# vi /etc/issue 
```

我想添加一些我的自定义文本，并为该文本着色。这是我现在的文件文本：

```
----------------------------
Welcome to my Testing Server
---------------------------- 
```

我在他的 CentOS 5 上使用了我朋友的一个例子：

```
----------------------------
^[[47;31m Welcome to my Testing Server ^[[0m
---------------------------- 
```

我看到它在他的盒子上运行良好，因为我 ssh 到它。但我将它复制并粘贴到我的`/etc/issue`文件中，它以文本形式返回所有内容。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T23:27:59.353

^[ 不是后面跟着括号的文字克拉，它是一个控制字符。当从您朋友的盒子复制到您的盒子时，控制字符已被按字面意思使用并且停止正常工作，请参阅[此](http://www.tldp.org/LDP/LGNET/issue01to08/lg_issue7.html#color_issue)以获取有关着色 /etc/issue 的更多信息

# php - 在服务器上在线安装SVN，无需SSH访问

> ID：15046866
> 
> 赞同：0
> 
> 时间：2013-02-23T23:17:23.940
> 
> 标签：php, svn, ssh, git-svn

我对我的项目和 SVN 有疑问！我正在使用 OVH“Hosting Personal”（hébérgementmutualisé perso），所以我无法访问 SSH，也无法直接在我的 OVH 服务器上安装 SVN...

我希望在没有 SSH 访问的情况下在远程 OVH 服务器上安装 SVN。我试图找到在我的本地服务器（操作系统：Ubuntu，apache2）上安装 SVN 的解决方案并将我的项目放入其中，然后我下载所有带有配置文件的 SVN 安装到我的服务器OVH上线了，有可能吗？

我希望将我的项目上线并在我不想的时候进行修改和检查，但是所有的教程都只是为了用 SSH 来做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:27:29.363

答案是：你可能做不到。

~~即使您有 SSH 访问权限，我猜在共享主机上，OVH 也不会让您访问 svn 工具，也不会让您安装 svn。~~

编辑：[关于OVH](http://guides.ovh.com/SVNMutu)（法语）的本指南表明可以使用svn，并且使用它的唯一条件是具有SSH访问权限

PS：您没有服务器：您在服务器上有一些磁盘空间：大不同！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T23:24:32.027

如果在技术上可行，无论如何它很可能违反了 OVH 服务使用条款。

[这是法语“Conditions d'utilisation”的链接](http://www.ovh.com/fr/support/documents_legaux/conditions%20particulieres%20hebergement%20mutualise.pdf)，以防您需要知道里面有什么:)

只允许使用 PHP/CGI 脚本，并且有负载限制。

# c# - 在最新的 Razor 引擎 - MVC.NET 中找不到“图像/子文件夹”下的图像

> ID：15046869
> 
> 赞同：3
> 
> 时间：2013-02-23T23:17:37.110
> 
> 标签：c#, asp.net, .net, asp.net-mvc, razor

我在使用 Visual Studio 2012 开发的 MVC.NET Web 应用程序中制作图像时遇到了困难。为了简短起见，请看以下两行代码：

```
<img src=@Url.Content("~/Content/themes/construct/images/MyPic1.png") />
<img src=@Url.Content("~/Content/themes/construct/images/blog/MyPic2.png") /> 
```

MyPic1.png 和 MyPic2.png 文件确实存在。但是，在渲染页面时，会显示第一张图片 MyPic1.png，但不会显示在“blog”子文件夹下找到的第二张图片。我使用了 FireBug，它没有显示任何错误消息！

可能出了什么问题以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:21:34.510

您的剃须刀代码没有任何问题，我确实创建了您提到的文件夹结构，两个图像都按预期加载。

我怀疑您可能没有正确的文件扩展名。

浏览文件，单击组织 -> 选择文件夹和搜索选项 -> 选择文件（选项卡） -> 取消选中“隐藏已知文件类型的扩展名”，如下图所示，然后查看图像扩展名。

![在此处输入图像描述](../Images/e8fec16a2366d629416e7299072335d9.png)

有时我们用“pic1.png.png”或“pic1.png.jpg”保存图像。

# mysql - 如何为 MySQL 中的多条记录的字段添加位值

> ID：15046875
> 
> 赞同：3
> 
> 时间：2013-02-23T23:17:54.303
> 
> 标签：mysql, binary, bit

有一个数据库，其中一个表有一个使用二进制位作为标志的字段。因此，根据切换的标志，您可以拥有广泛的值，因此仅查看值是没有帮助的。即，大于 8 的值并不意味着正在使用 8 的值（例如 17 是 16 + 1）。

考虑到这一点，有没有办法更新多个记录以设置或取消设置特定字段的位（例如值 8）？有些记录可能设置了它，而其他记录则没有，所以不要只是简单地添加（或减去）8。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T23:23:37.873

您可以使用按位 OR`|`和 AND`&`函数；

```
UPDATE myTable SET myValue = value |  8;   -- set bit 3
UPDATE myTable SET myValue = value & ~8;   -- clear bit 3 
```

[（非常）用于测试的简单 SQLfiddle](http://sqlfiddle.com/#!2/5ead7/1)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T23:20:23.070

使用[BIT 功能](http://dev.mysql.com/doc/refman/5.0/en/bit-functions.html)。设置位 1：

```
update your_table
set bit_field = bit_field | b'0001' 
```

要取消设置位 1：

```
update your_table
set bit_field = bit_field & b'1110' 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!2/14ebf/1)

# javascript - BackboneJS：对链接项目的集合进行排序

> ID：15046877
> 
> 赞同：0
> 
> 时间：2013-02-23T23:18:02.853
> 
> 标签：javascript, backbone.js

我在弄清楚如何对包含链接项目的 BackboneJS 集合进行排序时遇到了一些麻烦。是否有可能有效地做？（我正在考虑让一个返回先前元素的计数，但这确实效率低下）

比较器应该是什么？- 是否需要双链表？

我的物品看起来像

[ { id: 1, name: 'name', previousItem: 2 }, { id: 2, name: 'othername', previousItem: null } ]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:41:09.390

这是构建集合的基本代码。我假设您在这里使用的是主干模型。在循环中，您需要将模型添加到集合的前面（取消移位），因为您只知道前一项。

这里的关键是知道最后一项是什么。如果你不知道，那么这将不起作用。

```
model = frontItem;
while (model != null) {
   collection.unshift(model);
   model = model.attr('previousItem')    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T23:24:35.927

[github](https://github.com/documentcloud/backbone/issues/41)上有关于这个的讨论，你也可以使用[比较器](http://backbonejs.org/#Collection-comparator)，如果你想使用[比较器](http://backbonejs.org/#Collection-comparator)，你需要下划线

```
var PhotoCollection = Backbone.Collection.extend({
    model: Photo,
    comparator: function(item) {
        return item.get('pid');
    }
}); 
```

# vhdl - 如何在 VHDL 中编写可除性代码？

> ID：15046881
> 
> 赞同：0
> 
> 时间：2013-02-23T23:18:38.110
> 
> 标签：vhdl

我如何为 4 位二进制数编写 VHDL 代码，以便仅当 4 位数字仅使用 NOR 门可被 3 或 4 整除时才输出 1？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:34:45.927

1) 列出输出为 1 的数字（3,4 等）。
2) 写下每个数字的二进制表示，0011、0100 等
3) 写下输出的表达式为逻辑这些术语的或：
输出 <= 0011 + 0100 + ... 这是您在 SOP（产品总和）形式中输出的表达式。
4）可选地，（但值得这样做，因为它减少了您正在处理的问题的大小）使用标准技术（例如绘制卡诺图）最小化这个表达式，并结合相邻的术语来简化表达式。
5）利用德摩根规则将简化的SOP表达式转化为POS（Product of Sum）形式。
6) 您现在可以将 POS 形式实现为两级或非门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T13:38:24.743

答案是肯定的。因为您可以仅使用 NAND 和 NOR构建*任何逻辑。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T13:15:44.730

我猜一种最好的方法是通过卡诺图从真值表中手动推导出方程，您将使用标准技术将 AND 和 OR 门的组合转换为 NOR 门，然后您可以使用门级建模来实现相同的功能。

# c++ - 如何有效地使用带有不透明数据类型的 std::sort？

> ID：15046885
> 
> 赞同：1
> 
> 时间：2013-02-23T23:19:33.833
> 
> 标签：c++, sorting, stl

我正在开发一个定义接口的 SDK，例如

```
class FooIter
{
    // Move to the next foo, return false if there is none.
    virtual bool Move() = 0;

    // Return a pointer to the current foo.
    virtual const void* GetFoo() = 0;

    // Get the size of a 'foo', which is a fixed-size POD.
    virtual size_t GetFooSize() = 0;

    // Get a comparator for foos.
    virtual const FooComparator* GetComparator() = 0;
};

class FooComparator
{
    virtual int compare(const void* first, const void* second) const = 0;
}; 
```

所以基本上， foo 是一种不透明类型，我可以将其视为固定长度的二进制缓冲区 + 和相关的排序函数。

现在，我想在将这些 foo 传递回客户端代码之前对其进行排序。可能有**很多**foo，所以我必须实现外部排序，但我想使用 std::sort 对初始运行进行排序。

我在想我会分配一个大小为 N * FooIter::GetFooSize() 的缓冲区，使用 FooIter 用 foos 填充它，然后在将其写入磁盘之前使用 std::sort 对其进行排序。

我可以从编写一个迭代器类开始

```
class FooBufferIter
{
public:
    FooBufferIter(const void* fooAddr, int fooSize) : m_fooAddr(fooAddr), m_fooSize(fooSize) {}

    FooWrapper operator*() {return FooWrapper(m_fooAddr, m_fooSize);}

    FooBufferIter operator++() {return FooBufferIter(m_fooAddr + m_fooSize, m_fooSize);}

    // All other needed iterator methods.
private:
    const void* m_fooAddr;
    int m_fooSize;
}; 
```

和 foo 内存的包装类

```
class FooWrapper
{
public:
    FooWrapper(const void* fooAddr, int fooSize) : m_fooAddr(fooAddr), m_fooSize(fooSize) {}

private:
    const void* m_fooAddr;
    int m_fooSize;
}; 
```

我的理解是 std::sort 将使用 std::swap 重新排列序列中的元素。我的问题是我看不到如何在 FooWrapper 上专门化 std::swap 以有效地执行交换（最重要的是，没有动态分配）。我可以逐字节交换，但这似乎也效率低下。

另一种方法是将指针的并行序列排序到我的 Foo 数组中，但我不想这样做，因为在实践中， foo 可能会非常小，因此并行序列可以使用同样多内存作为 foo 序列，我想最大化它们一次可以排序的数量。

还有很好的 ol' qsort 可能更适合这种事情，但我不确定如何将 FooComparator 对象转换为函数指针（FooComparator 可能有多种实现）。

或者有没有更好的方法来解决这个问题？我真的不想编写自己的排序实现，尽管它可能不会*太难*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:41:25.117

我会构建一个 void* 缓冲区，对它们进行排序，然后生成输出缓冲区。

作为第一步。因为容易。然后编写其他所有内容并寻找性能瓶颈。

作为下一步，我将看看是否可以使用完整类型信息进行内部排序。因为最优。

做不到这一点，一个带有专门交换的 pod 块伪引用迭代器。如果性能测试证明进一步优化是合理的，那么对于小型和大型来说，tomfoolery 就会对大的指针和小型的数据进行排序。

但从 KISS 开始，先做必须硬的部分。

# sql - 慢速 SQL 查询处理 5000 行，哪个 SQL Server 工具可以帮助我识别问题？

> ID：15046887
> 
> 赞同：0
> 
> 时间：2013-02-23T23:19:45.070
> 
> 标签：sql, sql-server, database, sql-server-2008, stored-procedures

我正在使用 SQL Server 2008 编写一个繁重的 SQL 查询。当查询处理 100 行时，它立即完成。当查询处理 5000 行时，大约需要 1.1 分钟。

我使用实际执行计划来检查它在处理 5000 行时的性能。该查询包含 18 个子查询，在计划中显示的查询成本百分比没有显着提高，例如大约 0%、2%、5%、7%。最高的是 11%。下面的屏幕截图显示了查询中的最高进程。（例如 11% 的 94%）

![下面的屏幕截图显示了查询中的最高进程。 （例如 11% 的 94%）](../Images/f6e2f8408259e28b5bc36f0f8293b8d5.png)

我还使用了客户端统计工具，试用 10 显示它处理 5000 行时，试用 9 显示它处理 100 行时。

![在此处输入图像描述](../Images/b2906864aad83fc3167cefd2543b1133.png)

**谁能告诉我在哪里（或哪个 SQL Server 工具）我可以找到表明查询执行 5000 行时过程缓慢的数据/详细信息？**

添加：添加索引、键。实际的 exe 计划在每个子查询上都没有显示注释和高百分比。

我刚刚发现“活动监视器”在“最近的扩展查询”中显示一个子查询的“平均持续时间”为 40000 毫秒，而实际计划显示此查询仅占总流程成本的 5%。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:23:19.937

虽然我确实相信学习执行计划的基础以及 SQL Server 查询优化器的运行方式是成为优秀数据库开发人员的基本要求，但与大多数工具相比，人类在诊断和处理 SQL 方面仍然做得更好本机或第三方，实际上 SQL Server Management Studio 提供了一个工具，它可以（有时）“自动”为您修复性能：

[数据库引擎优化顾问](http://msdn.microsoft.com/en-us/library/ms173494%28v=sql.105%29.aspx)

您可以通过 Query -> Analyze Query Using Database Engine Tuning Advisor 下的功能区菜单访问，或者（更有帮助）通过选择您的查询，右键单击选择，然后选择使用 Database Engine Tuning Advisor 分析查询，这给出了添加的自动过滤到仅查询正在使用的数据库对象的好处。

调优顾问实际上所做的只是调查是否有任何索引或统计信息可以添加到您的对象中。然后它会“推荐”它们，如果您愿意，您可以不应用、应用部分或全部应用。

*购买者警告！*它的所有建议都是为了让特定查询运行得更快，所以它绝对不会**帮助**你做出关于添加索引的正确决定，该索引可能只被一两个查询使用但必须不断更新当您将数据添加到数据库时。这是一种被称为“index shotgunning”的 SQL 反模式，通常被 DBA 所反对，他们宁愿看到重写查询以利用更有用的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T15:02:33.183

为了查看性能，使用数据库调优顾问和/或缺少的索引 DMV，然后在 Management Studio 中或使用 sql sentry plan explorer 之类的工具检查执行计划应该足以告诉您需要在哪里进行修改。

了解执行计划以及物理运算符与逻辑操作的关系是性能调优的最大关键，也是对索引和统计数据的良好理解。

我认为没有任何工具可以自动为您修复性能。

# java - Android mediaPlayer 导致强制关闭 onquit

> ID：15046888
> 
> 赞同：0
> 
> 时间：2013-02-23T23:19:48.017
> 
> 标签：java, android

一旦我点击后退按钮离开活动，我的代码就会强制关闭。这里是。我认为它的作用是相对不言自明的。当被调用时，它会显示一些文本和一个按钮，当点击该按钮时会开始播放录音。当有人点击后退按钮时，它应该回到上一个活动并停止录制。谢谢你帮助我！

```
public class ToBeOrNot extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_to_be_or_not);

    }
MediaPlayer mediaPlayer;

public void react(View view) {
    mediaPlayer = MediaPlayer.create(ToBeOrNot.this, R.raw.achord);
    mediaPlayer.start(); 
}
protected void onStop(){
mediaPlayer.release();
mediaPlayer = null;
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
// Inflate the menu; this adds items to the action bar if it is present.
//getMenuInflater().inflate(R.menu.activity_to_be_or_not, menu);
// Locate MenuItem with ShareActionProvider
return true;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:21:00.140

请提供 log-cat 错误日志，否则看起来有什么问题会很痛苦。

但我想你需要。

```
call stop() on media player in onPause() 
```

如果你想让它继续播放，那么你需要使用服务。

# angularjs - angularjs表单问题

> ID：15046889
> 
> 赞同：1
> 
> 时间：2013-02-23T23:19:55.787
> 
> 标签：angularjs

我在尝试让表单与 angularjs 一起使用时遇到问题。这是错误

`{"error": "Shell form does not validate{'html_initial_name': u'initial-js_lib', 'form': <mooshell.forms.ShellForm object at 0x9bd4f8c>, 'html_name': 'js_lib', 'html_initial_id': u'initial-id_js_lib', 'label': u'Js lib', 'field': <django.forms.models.ModelChoiceField object at 0x9dc06ec>, 'help_text': '', 'name': 'js_lib'}"}`

如果这可能有帮助，这是我正在使用的 jsfiddle：

[http://jsfiddle.net/YYrZ3/](http://jsfiddle.net/YYrZ3/)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T00:36:29.820

你的小提琴有一些问题：

1.  您需要加载 AngularJS 框架（从“No-library”更改为“AngularJS 1.0.3”）
2.  将加载方法设置为“no-wrap (head)”
3.  `<body ng-app="customerApp">`在信息面板上定义应用程序 ( )
4.  修复您的`func`服务（检​​查下面的小提琴）。您是在模块上而不是在服务上定义功能。还要检查 AngularJS[服务文档](http://docs.angularjs.org/guide/dev_guide.services)。
5.  `method="post"`从您的 HTML中删除

**jsfiddle**：http: [//jsfiddle.net/YYrZ3/1/](http://jsfiddle.net/YYrZ3/1/)

# android - Java 解析数据字符串 Android

> ID：15046890
> 
> 赞同：0
> 
> 时间：2013-02-23T23:19:55.850
> 
> 标签：android, simpledateformat

我正在尝试使用 Java SimpleDateFormat 解析字符串。我的字符串是：

> 2013 年 2 月 23 日晚上 10 点 12 分 52 秒

作为 oracle Javadoc，我编写了以下模式：

> MM/dd/yyyy KK:mm:ss a

恕我直言，我不确定 PM(aa)，我也只尝试了“a”或“aaa”，但我总是得到 ParseException。有趣的是，当它在测试项目上作为 java 应用程序运行时，它可以工作：

当我在 android 项目中运行它时，它不起作用：

```
SimpleDateFormat formatter = new SimpleDateFormat("MM/dd/yyyy KK:mm:ss a");
    try {
        Date data = formatter.parse("2/23/2013 10:12:52 PM");
        System.out.println(data);
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:25:12.457

> 在作为 java 应用程序在测试项目上运行它时，它可以工作：

确保您在您的 android 项目中导入了正确的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T23:27:55.347

如果您的格式是“MM/...”，那么您的日期将以“02/23...”开头。

只用一个“M”试试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T20:16:04.037

我解决了。我没有说我的“2/23/2013 10:12:52 PM”字符串是由 Json 库组成的......也许它不是作为一个完整的字符串构建的，而是一个字符一个字符的，这可能是SimpleDateFormat 的问题。我尝试启动以下代码：

```
String data1 = "2/23/2013 10:12:52 PM"; //a string built by Json parser
String data2 = "2/23/2013 10:12:52 PM"; //created by hand as new String
System.out.println(data2.equals(data1)); 
```

它返回错误！

解决方案：

```
String data1 = "2/23/2013 10:12:52 PM"; //a string built by Json parser
String data2 = "2/23/2013 10:12:52 PM"; //created by hand as new String
StringBuffer sb = new StringBuffer();
sb.append(data1);
System.out.println(data2.equals(data1)); 
```

现在它返回真！

# javascript - 来自服务器的 Json 数据未填充主干模型

> ID：15046893
> 
> 赞同：1
> 
> 时间：2013-02-23T23:20:44.353
> 
> 标签：javascript, backbone.js, requirejs

我是 Backbone.js 和 Require.js 的新手，我正在尝试从服务器获取数据并将其存储在我的骨干模型中。问题是数据没有填充模型。

```
require.config({
paths:{
    jquery:"libs/jquery-1.7.1.min",
    underscore:"libs/underscore-min",
    backbone:"libs/backbone-min",
    models:"models",
    views:"views",
    collections:"collections"
},
shim:{
    "backbone":{
        "deps":["underscore","jquery"],
        "exports":"Backbone"
         },
        "underscore":{
             "exports":"_"
        }
     }
   });

 require (['routes'],function() {
      new Router ();
 }); 
```

该模型

```
define (['jquery','underscore','backbone'],function($,_,Backbone){
Video = Backbone.Model.extend ({
    defaults:{
        video_id:'',
        video_name:'',
    },
    urlRoot:"/video",
});
});//end define 
```

路由器

```
define(['backbone','models/Video'],function(Backbone){
 Router = Backbone.Router.extend({
    routes:{
        "/":"index",
    },
    initialize:function (){
        this.index ();
    },
    index:function ()
    {
        video = new Video ({id:"1Uw6ZkbsAH8"});
        video.fetch();
        console.log (video.toJSON());
    }
 }); 
});//end define 
```

我检查网络响应，我得到“{video_id:1,video_name:test_backbone}”作为响应，但是当我 console.log (video.toJSON()) 我得到 - Object {id: "1Uw6ZkbsAH8", video_id: " "，视频名称：""}。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T00:02:21.817

在您的代码中，日志记录是在`fetch`调用之后立即完成的。`fetch`向服务器发出异步数据请求。即使在网络请求完成之前，您的日志调用也会立即执行。这是基于事件的编程的问题之一。

尝试`console.log`在`success`回调中调用。

```
video.fetch ( { 
    success: console.log(video.toJSON()); 
    } 
); 
```

# php - 提交表单而不更改包含文件变量 PHP

> ID：15046896
> 
> 赞同：-3
> 
> 时间：2013-02-23T23:21:07.037
> 
> 标签：php, forms, variables, post, include

我的脚本有点问题。我需要做一个发布表单，因为我需要从我的表单中检索“已选择”选项，但是在这个页面中，我包含了另一个重要页面，其中包含一些在发布表单之后我还需要的重要变量......什么是避免这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:27:59.213

也许你可以把它写成一个函数，它们使用本地范围并且不会影响函数之外的其他变量。但是显示一些代码，以便我们更好地理解您的确切含义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T23:28:37.403

如果您发布一些代码会很好，但根据我的理解，您有 2 个选项：

1.  将此变量保存在 $_SESSION 上，然后在需要的地方使用它
2.  你可以把这个 var 隐藏到你的表单中

    ```
    <input type="hidden" name="myVar" value="myValue" /> 
    ```

如果这个 var 是一个数组，使用这个：

```
 <input type="hidden" name="myVar[]" value="myValue" />
    <input type="hidden" name="myVar[]" value="myValue2" />
    <input type="hidden" name="myVar[]" value="myValue3" />
    <input type="hidden" name="myVar[]" value="myValue4" /> 
```

# android - 动态加载 imageView

> ID：15046897
> 
> 赞同：0
> 
> 时间：2013-02-23T23:21:26.167
> 
> 标签：android, imageview, android-imageview, image-size

我有一个布局，其中一个 imageView 想要从可绘制文件动态加载图像。我想要这个我有一个一定大小的 imageView 任何可绘制的图像，所以你需要分配一个大小来上传。我搜索了 android 开发人员，但我只看到了设置最大高度和宽度的函数，但 ir 不起作用。

我把代码：

```
image = getIntent().getExtras().getString("image");

ImageView paper = (ImageView)findViewById(R.id.imageView1);
Resources res = getResources();
int id = getResources().getIdentifier(image, "drawable", getPackageName());
Drawable drawable = res.getDrawable(id);
paper.setImageDrawable(drawable); 
```

你能帮忙吗？非常感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:34:59.107

您可以使用

```
Intent intent = new Intent(this, NewActivity.class);
intent.putExtra("BitmapImage", bitmap); 
```

并在另一端检索它：

```
Bitmap bitmap = (Bitmap) intent.getParcelableExtra("BitmapImage");

//  bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.image);
bitmap = Bitmap.createScaledBitmap(bitmap, 250, 250, true);
img.setImageBitmap(bitmap); 
```

# javascript - Raphael js 无法通过引用 div 创建画布

> ID：15046898
> 
> 赞同：1
> 
> 时间：2013-02-23T23:21:32.883
> 
> 标签：javascript, canvas, raphael

几天来，我一直试图让这个工作。最后我只是通过输入参数手动创建了画布，但现在我实际上需要将它连接到一个div。

问题是，当尝试基于 div 创建画布时，我总是从 Raphael JS 得到相同的错误：

```
TypeError: b is undefined 
```

这是一个快速的 jsFiddle，但您会在 Firebug 中看到相同的结果（虽然它显示了不同的库名称，但它是 rapheal 导致的）

[http://jsfiddle.net/GXXuD/3/](http://jsfiddle.net/GXXuD/3/)

请帮忙！这让我疯狂。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T23:00:16.203

我发现这样做的唯一方法与文档无关，我只需要破解它。如果其他人遇到让 Rapheal js 将画布/纸张分配给 div 的问题，则此方法可以正常工作。

**JS**

```
var new_width = $('#map img').width();
var new_height = $('#map img').height();

$('#map').css({'height':new_height, 'width':new_width});
var paper = new Raphael("canvas", new_width, new_height); 
```

**HTML**

```
<div id='map'>
    <div id="canvas"></div>
    <img src="path/to/image"/>
</div> 
```

# c# - 将文本限制为 TextBox 的宽度

> ID：15046899
> 
> 赞同：0
> 
> 时间：2013-02-23T23:21:37.347
> 
> 标签：c#, textbox, windows-store-apps, text-width

我正在使用 a`TextBox`在看起来像便利贴的东西上创建可编辑的标题。我`TextBox`从 a更改为 a`RichEditBox`看看这是否可以解决我的问题，但它没有，所以如果有帮助，我愿意改回来。

我的问题是我不希望用户输入的字符超出设置的宽度`TextBox`，因为我希望整个标题可见。对可以输入的字符数量设置一个固定的限制实际上并不奏效，因为例如 10 个大 M 会填满 my 的宽度`TextBox`，但其他字符只会填满它的一半。所以我想将文本的宽度与 的宽度进行比较`TextBox`，这样我就可以限制输入超出该点。

编辑：我使用的是 Segoe UI 字体，我并没有真正考虑将字体更改为具有等宽字符的字体作为解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T03:47:16.893

将 TextBox 字体设置为 Courier 字体，然后所有字符的宽度相等，计算最大值变得微不足道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T06:57:46.947

![通过硬编码告诉最大值。](../Images/61e87d4c76d02dd3a1df9d2b0c33f4b8.png)

我在编程世界很烂。我试着帮你..

# php - 国际化在本地工作，而不是在远程工作

> ID：15046903
> 
> 赞同：0
> 
> 时间：2013-02-23T23:22:05.757
> 
> 标签：php, internationalization, smarty, gettext

我有一些有趣的问题，我使用 gettext 进行国际化。当用户选择某种语言时，假设“en”（英语），我使用一些：

```
 putenv("LC_ALL=en_US");
    @setlocale(LC_ALL, 'en_US');

    $_SESSION['language'] = 'en_US.UTF8';
    $this->mySmarty->clearAllCache();//to clear the html parts that are stored in cache 
```

奇怪的是，这在我的本地主机中运行良好，但是当我将它推送到远程服务器时它失败了。通过失败，我的意思是在更改语言时不处理任何翻译有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:35:05.937

你错过了周围的报价`en_US`：

```
@setlocale(LC_ALL, 'en_US'); 
```

除此之外，您可能需要检查您要使用的语言环境在托管环境中是否可用 ( `locale -a`)。`setlocale`您可以按优先级顺序传递具有不同语言环境名称的多个参数：

```
setlocale(LC_ALL, 'en_US', 'en_US.utf8', 'en', 'english'); 
```

要检查区域设置是否正确设置`var_dump`，请根据[预期值](http://php.net/setlocale)使用。

# javascript - JavaScript 本地作用域：var 与 this

> ID：15046910
> 
> 赞同：9
> 
> 时间：2013-02-23T23:23:21.963
> 
> 标签：javascript, scope, scoping

我似乎无法理解 JavaScript 变量范围的特定情况。与我发现的其他示例和问题不同，我对嵌套函数的范围感兴趣。

我在[这个 JSFiddle](http://jsfiddle.net/Alpha/a78Qq/7/)上设置了一个例子。相关部分如下：

```
function MyObject() {
    var self = this;

    var a = 1;
    this.b = 2;

    var innerMethod = function() {
        //1 and 2: direct reference
        logMessage("a = " + a); // a = 1
        //logMessage("b = " + b); // Error: b is not defined

        //3 and 4: using this
        logMessage("this.a = " + this.a); // this.a = undefined
        logMessage("this.b = " + this.b); // this.b = undefined

        //5 and 6: using self
        logMessage("self.a = " + self.a); // self.a = undefined
        logMessage("self.b = " + self.b); // self.b = 2
    }
} 
```

现在，我知道引用`a`直接有效。我也知道消息 3 和 4 ( `this.a`and `this.b`) 会失败，因为`this`它指的是内部函数。我也知道第 6 行有效，因为我保存了对原始对象的引用。

我不明白的是：

*   为什么消息 1 和 2 不一样？
*   为什么消息 5 和 6 的工作方式不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T23:31:50.640

`a`变量就是这样，一个变量。`innerMethod`它在（它只是一个嵌套函数）的范围内可见，因为`a`它是如何声明的（即 JavaScript 具有词法范围规则，内部函数可以看到它们在其中定义的函数的变量）。

`this`与`MyObject`构造函数的本地范围不同。

您已经看到 that`self`是`this`of的别名`MyObject`，并且已在其自己的范围内`innerMethod`被覆盖。`this`尽管如此，由于`this`不是函数范围的别名，因此`self.a`也`this.a`不会在这里工作。

对于词汇范围的更严格解释，您可以例如从维基百科开始：[http://en.wikipedia.org/wiki/Scope_(computer_science)](http://en.wikipedia.org/wiki/Scope_(computer_science))

[您可以在 ECMA 标准http://es5.github.com/#x10.3](http://es5.github.com/#x10.3)中阅读有关执行上下文和标识符解析规则的信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T23:29:43.183

这是范围的问题，当创建函数时，它们会保存周围的环境（包括变量）。

所以当`innerMethod`被创建时，它可以看到变量`self`和`a`.

一个重要的概念是作用域是在声明函数时创建的，而不是在调用函数时创建的。

在你的情况 1，`b`没有被声明（这个对象不一样）。

在案例 5 和 6 中，您没有创建`self.a`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-05T11:51:35.343

主要原因是`self`不等于在**innerMethod**`this`的范围内。是引用函数所有者的关键字。对于**innerMethod**，它不是实例方法，它属于 Window。**`this`**

 ****```
function MyObject() {
    var self = this;

    var innerMethod = function() {
        alert("inner method, self == this?: " + self == this); // false
        alert("inner method: " + this); // [object Window]
        alert("closest constructor name of in prototype chain ?: "+ this.__proto__.constructor.name); // Window
    }

    this.outerMethod = function(){
        innerMethod(); 
        alert("outer method: " + this); // [object MyObject]
        alert("closest constructor name in prototype chain?: "+ this.__proto__.constructor.name); // MyObject
    }
}

var o = new MyObject();
o.outerMethod(); 
```

你可以在[这里玩](http://jsfiddle.net/ckwd8vrr/)****

# c# - 自定义 WMS 服务

> ID：15046912
> 
> 赞同：1
> 
> 时间：2013-02-23T23:23:25.570
> 
> 标签：c#, wms

我正在做一个程序，该程序在本地系统上运行，无法访问互联网。是否可以使用 C# 创建我自己的自定义 Web 地图服务 (WMS) 服务器。我不知道有免费的开源系统。但我喜欢完全控制。谢谢莫顿·斯塔克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T02:10:10.940

这是很有可能的，但在你完成之前你可能会头疼一两次。实施规范和更多内容可从以下网址的开放地理空间联盟获得。

[http://www.opengeospatial.org/standards/wms](http://www.opengeospatial.org/standards/wms)

这是一个相当大的规范，但您可能能够摆脱只实现您真正需要的部分而忽略一些更具体的东西。当然，您还需要从某个可能是您最大的问题的来源解析和渲染地图数据（我真的建议您查看 SharpMap，[http](http://sharpmap.codeplex.com/) ://sharpmap.codeplex.com/而不是滚动您的自己的）。

# cakephp - 在 CakePHP 查找功能上禁用连接

> ID：15046913
> 
> 赞同：2
> 
> 时间：2013-02-23T23:23:25.237
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.3

有没有一种简单的方法可以在 CakePHP 中禁用查找查询的连接

我有一个与用户`Product`有关系的模型对象。`$belongsTo`我的查找查询是：

```
$product = $this->Product->find('first',array(
    'fields' => array(
        'Product.name'
    ),
    'conditions' => array(
        'Product.active'=>1,
    ),

    'recursive' => false
)); 
```

执行的 sql 查询如下所示：

```
SELECT `Product`.`name` FROM `db`.`products` AS `Product` LEFT JOIN `db`.`users` AS `Owner` ON (`Product`.`owner_id` = `Owner`.`id`) LIMIT 1 
```

`users`现在，出于性能原因并且我不使用数据，我想摆脱加入。是否有捷径可寻？我希望禁用递归并手动设置字段参数可以解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T02:39:28.070

`public $recursive = -1;`在您的 AppModel中设置是最佳实践 (imo) 。这将摆脱不断发生的自动魔术发现，并且还允许您在需要额外数据时使用[Containable](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)，而无需在所有地方将递归设置为 -1。

我相信 CakePHP 3+，他们将摆脱递归并默认启用 Containable （正如我所听到的 - 我还没有验证）。

（如果您真的不想在任何地方设置它，您可以在找到之前立即设置它 - 但是......最好只在 AppModel 中设置它并且永远不要将其更改回来）

# symfony - Symfony2 在学说中选择一列

> ID：15046916
> 
> 赞同：8
> 
> 时间：2013-02-23T23:24:07.680
> 
> 标签：symfony, doctrine-orm, symfony-2.1

我正在尝试优化查询，尝试选择更少的可能值。例如，我有一个实体“Anagrafic”，其中包含您的姓名、地址、城市等，以及一个我只想更改其中一个的表单这些字段，例如地址。我创建了这个查询：

```
//AnagraficRepository
public function findAddress($Id)
{
     $qb = $this->createQueryBuilder('r')
             ->select('r.address')
             ->where('r.id = :id')
             ->setParameter('id', $Id)
             ->getQuery();

     return $qb->getResult();
} 
```

这个查询有问题，因为我没有返回任何值，但是如果我正常进行查询：

```
//Controller
$entity = $em->getRepository('MyBusinessBundle:Anagrafic')->find($id); 
```

返回正确的值。如何只选择一列进行查询？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-24T00:56:03.080

Since you are requesting single column of each record you are bound to expect an `array`. That being said you should replace `getResult` with `getArrayResult()` because you can't enforce object hydration:

```
$data = $qb->getArrayResult();
Now, you have structure:
    $data[0]['address']
    $data[1]['address']
    .... 
```

Hope this helps.

As for the discussion about performance in comments I generally agree with you for not wanting all 30 column fetch every time. However, in that case, you should consider writing *named queries* in order to minimize impact if you database ever gets altered.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-24T01:11:25.180

您可以使用[部分对象](https://www.doctrine-project.org/projects/doctrine-orm/en/latest/reference/partial-objects.html#partial-objects)仅水合一个字段并仍然返回一个对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-10T11:05:52.653

这对我有用：

```
 $qb = $repository->createQueryBuilder('i')
    ->select('i.name')
    ->... 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-07T16:34:40.477

使用像这样的部分对象来选择字段

```
$qb = $this->createQueryBuilder('r')
    ->select(array('partial r.{id,address}'))
    ... 
```

将您的字段名称放在括号之间

# ruby-on-rails - Rails：表单域

> ID：15046919
> 
> 赞同：0
> 
> 时间：2013-02-23T23:24:29.387
> 
> 标签：ruby-on-rails, forms, relation

我有一个城市有很多人。

我想在我的城市表单中添加一个选择字段来添加人员：

```
<%= form_for(@city) do |f| %>
<p>
  <%= f.label city.people.id, "Person" %><br />
  <%= f.select  city.people.id,
         Person.find(:all).collect{|d| [d.person_name,d.id]},
         :prompt => "Please choose" %>
</p>
<% end %> 
```

Rails 说： undefined varialbe city。我在city has:many 和inperson belongs_to 中实现了。

我的代码片段有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:37:14.603

您必须使用实例变量`@city`，不要忘记 @ 符号。

另外，`@city.people`是 Person 类型的集合，所以`@city.people.id`不起作用。

# ruby-on-rails - 多租户 Rails api 应用程序的样式

> ID：15046923
> 
> 赞同：2
> 
> 时间：2013-02-23T23:24:47.567
> 
> 标签：ruby-on-rails, multi-tenant, sprockets, stylus, rails-api

我有一个 rails-api 应用程序，我想在其中提供一个手写笔样式表，其中包含一些基于当前租户设置的变量。

主应用程序本身是在 Dojo 中构建的静态独立 RIA，不使用 Rails 资产管道。

然而，样式表，我希望从各种来源以及数据库中的一些值组装链轮。

目标/愿望：

*   我想从 app/assets/stylesheets 中的样式表开始
*   我希望 app/assets/stylesheets 中的样式表包含一个基本样式表，该样式表作为独立 RIA 应用程序的一部分分发，位于 public/ria/src/namespace/resources/base.styl
*   我希望能够通过 ERB 在 app/assets/stylesheets 中运行样式表，以根据当前租户使用一些变量填充它
*   理想情况下，链轮会为每个租户缓存此过程的结果

重要的提示：

*   我在 /public 中使用一个简单的静态 HTML 文件引导应用程序。RIA 实际上与服务器无关，是一个简单的 git 模块，它被检入到公共目录中。

# python - JSON解码中的无效控制字符（使用Python）

> ID：15046925
> 
> 赞同：0
> 
> 时间：2013-02-23T23:24:57.683
> 
> 标签：python, json

```
def list(type, extra=""):
if extra != "":
    entity = "http://api.crunchbase.com/v/1/" + type + "/" + extra + ".js?api_key=" + key
    data = json.load(urllib2.urlopen(entity))
else: 
    entity = "http://api.crunchbase.com/v/1/" + type + ".js?api_key=" + key
    data = json.load(urllib2.urlopen(entity))
return data 
```

函数列表在这里被专门调用：

```
x = colink
details = list(co, x) 
```

特别是在 x 是“if_this_then_that”且 co 是“company”的情况下

当我在第二行查询（实体链接格式正确）时，代码在这一行中断。错误消息如下，JSON 文件中发生错误的行如下。通过 JSON API 获取数据时，我不确定如何处理 unicode 错误。任何有关如何解决此问题的建议将不胜感激。

```
Traceback (most recent call last):
File "crunch_API.py", line 95, in <module>
  details = list(co, x)
File "crunch_API.py", line 34, in list
  data = json.load(urllib2.urlopen(entity))
File "C:\Python27\lib\json\__init__.py", line 278, in load
  **kw)
File "C:\Python27\lib\json\__init__.py", line 326, in loads
  return _default_decoder.decode(s)
File "C:\Python27\lib\json\decoder.py", line 366, in decode
  obj, end = self.raw_decode(s, idx=_w(s, 0).end())
File "C:\Python27\lib\json\decoder.py", line 382, in raw_decode
  obj, end = self.scan_once(s, idx)
ValueError: Invalid control character at: line 24 column 89 (char 881) 
```

"overview": "\u003Cp\u003EIFTTT 是一项服务，可让您通过一个简单的语句创建强大的连接：if this then that.\u003C/p\u003E", #### 错误发生的位置

# dynamic - Prolog 根据输入决定选择某个规则

> ID：15046930
> 
> 赞同：0
> 
> 时间：2013-02-23T23:25:26.910
> 
> 标签：dynamic, prolog, dcg, prolog-assert

我有这个序言问题，我无法解决。我想要实现的是断言 FACT A，当我有输入时收回 Fact B：接受并断言 Fact B 并在我输入输入时收回 Fact A。

IE：

```
:- dynamic s/2.
:- dynamic s/3.

s(P0, s(V, NP)) --> v(P1, V), np(P2, NP), {P0 is P1*P2*0.35}.

s(P0, s(V, NP, PP)) --> v(P1, V), np(P2, NP), pp(P3, PP), {P0 is P1*P2*P3*0.65}.
s(P0, s(V, NP)) --> v(P1, V), np(P2, NP), {V == take -> P0 is P1*P2*0.35; P0 is 0}.
s(P0, s(V, NP, PP)) --> v(P1, V), np(P2, NP), pp(P3, PP), {V == put -> P0 is P1*P2*P3*0.65; P0 is 0}.

np(P0, np(D, N)) --> det(P1, D), n(P2, N), {P0 is P1*P2*0.36}.
np(P0, np(D, A, N)) --> det(P1, D), a(P2, A), n(P3, N), {P0 is P1*P2*P3*0.46}.
np(P0, np(D, N, PP)) --> det(P1, D), n(P2, N), pp(P3, PP), {P0 is P1*P2*P3*0.13}.
np(P0, np(D, A, N, PP)) --> det(P1, D), a(P2, A), n(P3, N), pp(P4, PP), {P0 is P1*P2*P3*P4*0.05}.

pp(P0, pp(P, NP)) --> p(P1, P), np(P2, NP), {P0 is P1*P2*1.0}.

v(0.65, v(put)) --> {retract(s(V, NP))}, [put].
v(0.35, v(take)) --> {retract(s(V, NP, PP))}, [take].

n(0.23, n(block)) --> [block].
n(0.25, n(circle)) --> [circle].
n(0.15, n(cone)) --> [cone].
n(0.12, n(cube)) --> [cube].
n(0.25, n(square)) --> [square].

a(0.56, a(blue)) --> [blue].
a(0.27, a(green)) --> [green].
a(0.17, a(red)) --> [red].

det(1.0, det(the)) --> [the].

p(1.0, p(on)) --> [on]. 
```

我无法让它工作：任何帮助将不胜感激。

编辑：发布的所有代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:56:00.397

我怀疑问题出在您代码的其他地方。这对我来说适用于 SWI：

```
:- dynamic s/1.

foo --> "hello",   { retractall(s(_)), asserta(s(hi))  }.
foo --> "goodbye", { retractall(s(_)), asserta(s(bye)) }. 
```

例如：

```
?- s(X).
false.

?- phrase(foo, "hello").
true .

?- phrase(foo, "hello").
true ;
false.

?- s(X).
X = hi.

?- phrase(foo, "goodbye").
true.

?- s(X).
X = bye. 
```

我很好奇你为什么要这样做。在所有条件相同的情况下，我的倾向是用你断言的信息来增加你正在生成的 AST。再说一次，我对动态商店有偏见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T05:45:42.353

这就是我最终做的事情，我使用约束来选择某个规则而不是另一个规则：这是代码：

```
s(P0, s(V, NP)) --> v(P1, V), np(P2, NP), {P0 is P1*P2*0.35, V == v(take)}.
s(P0, s(V, NP, PP)) --> v(P1, V), np(P2, NP), pp(P3, PP), {P0 is P1*P2*P3*0.65, V == v(put)}.

np(P0, np(D, N)) --> det(P1, D), n(P2, N), {P0 is P1*P2*0.36}.
np(P0, np(D, A, N)) --> det(P1, D), a(P2, A), n(P3, N), {P0 is P1*P2*P3*0.46}.
np(P0, np(D, N, PP)) --> det(P1, D), n(P2, N), pp(P3, PP), {P0 is P1*P2*P3*0.13}.
np(P0, np(D, A, N, PP)) --> det(P1, D), a(P2, A), n(P3, N), pp(P4, PP), {P0 is P1*P2*P3*P4*0.05}.

pp(P0, pp(P, NP)) --> p(P1, P), np(P2, NP), {P0 is P1*P2*1.0, NP \= np(_, _ , _, _)}.

v(0.65, v(put)) --> [put].
v(0.35, v(take)) --> [take].

n(0.23, n(block)) --> [block].
n(0.25, n(circle)) --> [circle].
n(0.15, n(cone)) --> [cone].
n(0.12, n(cube)) --> [cube].
n(0.25, n(square)) --> [square].

a(0.56, a(blue)) --> [blue].
a(0.27, a(green)) --> [green].
a(0.17, a(red)) --> [red].

det(1.0, det(the)) --> [the].

p(1.0, p(on)) --> [on]. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T12:37:12.983

我不完全理解你的代码，但我有这样的感觉：

```
v(0.65, v(put)) --> {retract(s(V, NP))}, [put].

v(0.35, v(take)) --> {retract(s(V, NP, PP))}, [take]. 
```

应该：

```
v(0.65, v(put)) --> [put], {retract(s(V, NP))}.

v(0.35, v(take)) --> [take], {retract(s(V, NP, PP))}. 
```

但是，为什么`V`, `NP`,`PP`没有实例化？如果你想删除所有你应该使用的事件`retractall/1`；如果只出现一次，我建议使用[swipl 的全局变量](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%276.3%27,swi%28%27/doc/Manual/gvar.html%27%29%29)。无论如何，在 DCG 中使用副作用就像是在与魔鬼做交易。我在我的编译器中完成了它，这是一个调试地狱 XD

# html - On Enter 点击授权

> ID：15046932
> 
> 赞同：0
> 
> 时间：2013-02-23T23:25:32.130
> 
> 标签：html, wordpress, twitter-bootstrap

我正在尝试通过 wordpress 上的引导程序创建身份验证/注册页面这是我使用引导程序模式插入的代码。

问题是当我输入登录名/密码并点击 Enter 按钮时，它只是关闭了模式。当我再次点击打开模式时，我输入的信息就在那里，我仍然可以点击登录按钮登录。我从 WordPress 登录页面（我目前正在使用的引擎）处理代码。

如何让 Enter 自动记录我？

```
<div id="login" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="Login" aria-hidden="true">
 <div class="modal-header">
  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
  <h5 id="Login">
    <ul class="nav nav-pills">
     <li class="active"><a href="#loginpill" data-toggle="pill">ავტორიზაცია&lt;/a></li>
     <li><a href="#registrationpill" data-toggle="pill">რეგისტრაცია&lt;/a></li>
    </ul>
   </h5>
 </div>
<div class="pill-content">
 <div class="pill-pane active" id="loginpill">
  <div class="modal-body">
   <form name="loginform" id="loginform" action="/wp-login.php" method="post">
    <p>
     <input type="text" name="log" id="user_login" class="input span5" style="height:50px;font-size:20px" placeholder="სახელი" size="40" /></label>
    </p>
    <p>
     <input type="password" name="pwd" id="user_pass" class="input span5" style="height:50px;font-size:20px"  placeholder="პაროლი" size="40" /></label>
    </p>
    <p class="forgetmenot"><label for="rememberme"><input name="rememberme" type="checkbox" id="rememberme" value="forever"  /> დამიმახსოვრე</label></p>
  </div>
  <div class="modal-footer">
   <a href="/wp-login.php?action=lostpassword" class="pull-left" title="Password Lost and Found">პაროლის აღდგენა&lt;/a>
   <button class="btn" data-dismiss="modal" aria-hidden="true">დახურვა&lt;/button>
   <input type="submit" name="wp-submit" id="wp-submit" class="btn btn-primary" value="შესვლა" />
   <input type="hidden" name="redirect_to" value="/" />
   <input type="hidden" name="testcookie" value="1" />
  </div>
   </form>
 </div>
 <div class="pill-pane" id="registrationpill">.v..</div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:29:03.067

尝试将关闭模式的按钮放在`<form>`：

```
<div id="login" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="Login" aria-hidden="true">
 <div class="modal-header">
  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
  <h5 id="Login">
    <ul class="nav nav-pills">
     <li class="active"><a href="#loginpill" data-toggle="pill">ავტორიზაცია&lt;/a></li>
     <li><a href="#registrationpill" data-toggle="pill">რეგისტრაცია&lt;/a></li>
    </ul>
   </h5>
 </div>
<div class="pill-content">
 <div class="pill-pane active" id="loginpill">
  <div class="modal-body">
   <form name="loginform" id="loginform" action="/wp-login.php" method="post">
    <p>
     <input type="text" name="log" id="user_login" class="input span5" style="height:50px;font-size:20px" placeholder="სახელი" size="40" /></label>
    </p>
    <p>
     <input type="password" name="pwd" id="user_pass" class="input span5" style="height:50px;font-size:20px"  placeholder="პაროლი" size="40" /></label>
    </p>
    <p class="forgetmenot"><label for="rememberme"><input name="rememberme" type="checkbox" id="rememberme" value="forever"  /> დამიმახსოვრე</label></p>
   </form>
  </div>
  <div class="modal-footer">
   <a href="/wp-login.php?action=lostpassword" class="pull-left" title="Password Lost and Found">პაროლის აღდგენა&lt;/a>
   <button class="btn" data-dismiss="modal" aria-hidden="true">დახურვა&lt;/button>
   <input type="submit" name="wp-submit" id="wp-submit" class="btn btn-primary" value="შესვლა" />
   <input type="hidden" name="redirect_to" value="/" />
   <input type="hidden" name="testcookie" value="1" />
  </div>
 </div>
 <div class="pill-pane" id="registrationpill">.v..</div>
</div>
</div> 
```

# javascript - Javascript：我需要提示访问者三件事，然后用“for循环”列出它们

> ID：15046938
> 
> 赞同：2
> 
> 时间：2013-02-23T23:27:02.737
> 
> 标签：javascript, for-loop

我需要提示访问者三件事，然后用“for循环”和HTML`<ol>`和`<li>`

这就是我所拥有的，但它不起作用：

```
<script>

var favbook1 = prompt("What is your favotire first book?", "");
var favbook2 = prompt("What is your favotire second book?", "");
var favbook3 = prompt("What is your favotire third book?", "");

books[0] = favbook1;
books[1] = favbook2;
books[2] = favbook3;

for (var i = 0; i < books.lenght ; i++) {
  document.write(books[i] , "<br>")
}

</script> 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T23:39:41.630

> 我需要提示访问者三件事，然后用 a 和`for loop`HTML列出它们`<ol>``<li>`

您必须先声明`books`，然后才能为其分配值，并且您有一个错字`lenght`，应该`.length`改为。

您的代码也不会创建`ol`with`li`元素。如果这是你想要的，你可以做类似的事情：

```
window.onload = function () {
    var books = [];

    var favbook1 = prompt("What is your favotire first book?", "");
    var favbook2 = prompt("What is your favotire second book?", "");
    var favbook3 = prompt("What is your favotire third book?", "");

    books.push(favbook1);
    books.push(favbook2);
    books.push(favbook3);

    var myList = document.createElement("ol");
    var myListItem;

    for (var i = 0; i < books.length; i++) {
        myListItem = document.createElement("li");
        myListItem.innerHTML = books[i];
        myList.appendChild(myListItem);
    }

    document.body.appendChild(myList);
} 
```

* * *

[**演示**](http://jsfiddle.net/rafum/)-`ol`为`li`每本书

* * *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T23:30:55.797

它应该是

`for (var i = 0; i < books.length ; i++) {`

编辑：您还应该在 books[0]... 行之前将 books 声明为数组：

`var books = new Array();`

它也应该是：

`document.write(books[i] + "<br />");`

# breeze - 为什么 HotTowel 包含微风？

> ID：15046939
> 
> 赞同：11
> 
> 时间：2013-02-23T23:27:06.310
> 
> 标签：breeze, hottowel

从表面上看，这听起来像是一个愚蠢的问题，但为什么[Hot Towel SPA 模板](http://www.johnpapa.net/hottowel/)完全包含[Breeze](http://www.breezejs.com/)？

最近几天我一直在学习 Hot Towel 及其依赖项，据我所知，模板中的任何内容都没有真正使用 Breeze。也许这会随着未来的一些版本而改变？

当然，Breeze 是一个很好的图书馆。但它受 CRUD 方法的约束，需要您以特定的方式设计 ApiController。（元数据、SaveChanges 等）[请参见此处](http://www.breezejs.com/documentation/web-api-controller)

它还引导您使用实体框架。虽然这更像是一种软依赖，但由于 Breeze 还展示[了一个没有它的示例](http://www.breezejs.com/samples/nodb)，它仍然会引导您使用修改后的存储库模式来实现类似的模式。

如果您使用的是 NoSQL 数据存储或 CQRS 模式而不是 CRUD，那么 Breeze 将变得非常难以使用。有用于数据访问的替代库在这种风格下运行良好，例如[AmplifyJS](http://amplifyjs.com/)。

但是热毛巾的其余部分非常好！我特别喜欢杜兰达尔。那么问题来了，如果模板实际上没有进行任何数据访问——为什么要包含任何数据访问组件呢？最好在没有 Breeze 的情况下发布它，如果最终用户想要使用 Breeze、Amplify 或其他任何东西 - 那就这样吧。Hot Towel 的其余部分将继续作为出色的 SPA 实施而大放异彩。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-24T18:31:55.610

马特 - 好问题。既然我创建了它，我想我应该回答:)

当我构建模板时，我专注于提供足够的东西让人们使用正确的工具，以及足够的入门代码来指导。我不希望任何人撕掉代码。我不喜欢那些让你走上一条道路并让你删除大量文件和代码并改变方向的模板。这些是样本。

样品很好。事实上，样本可以非常出色（就像其他模板一样，我觉得更像样本）。这些还有另一个目的：展示你如何做事。

回到 Hot Towel 模板……如果我包含使用 Breeze 的代码，我会很想在客户端上添加一个 datacontext.js 和一个 model.js。它们将包含数据访问代码和扩展客户端模型的代码。然后我会很想添加一个控制器、一些服务器端模型、一个 ORM 和一个数据库。到达那里后，我想在多个屏幕中使用数据，这导致我使用 Breeze 进行更多的 Knockout 和缓存。然后我可能会想添加编辑，这将导致更改跟踪。很快我就有了一个完整的应用程序。或者更保守一点，我又拿了一个样本。虽然这些方法会为如何将它们组合在一起提供更多指导，但它们不会帮助您“开始”使用模板，您可以在其中开始构建和添加自己的代码。如果我缺少其中一些功能，它'

就目前而言，HotTowel 非常接近真正意义上的模板。您创建了一个新项目，然后开始添加自己的代码。

您可能会争论（而且您可能会争论）Breeze 不应该在那里，因为我不在模板中使用它。我也不使用moment.js，顺便说一句。但是，我认为它们都是优秀的库，没有它们我不想构建基于 CRUD 的 SPA。正如您所建议的，Breeze 很灵活，因此您不必走特定的路径。

了解 Breeze 价值的最佳方式是构建一个具有其功能但没有 Breeze 的应用程序。然后您可以看到需要多少代码以及它的参与程度。例如，请参阅我在 Pluralsight 的中级 SPA 课程，我正是这样做的：http: [//jpapa.me/spaps](http://jpapa.me/spaps)

所以你问“为什么是微风？” ...因为我强烈推荐它用于构建 SPA。

感谢您的提问，祝您好运！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-24T20:24:01.980

感谢您提出问题。

John，作为 HT 的作者，提供了一个答案。我，作为 Breeze 项目的负责人，我倾向于同意他的观点 :)

HotTowel 为您奠定了基础。它不是建筑物本身。

它是针对特定类型应用程序的基础，即基于一组特定的协作 JavaScript 和 ASP.NET 技术的 CRUD 应用程序。Breeze 是贡献者……但不是唯一的贡献者。Knockout 具有 MVVM 设计和 2 路数据绑定，特别适合 CRUD 应用程序典型的数据输入任务。

当然还有其他种类的SPA。有一类重要的应用程序主要呈现信息并接受很少的用户输入。这样的应用程序并不能从数据绑定中获得太多好处，而且编写它们的人通常会对数据绑定特别是 KO 怀有敌意。

我的观点是，HT 针对特定类别的应用程序……至少在以持续流行度来衡量时，这种应用程序恰好非常成功。它为构建这些应用程序的人提供商品。它可能不是其他类型应用程序的正确起点。

确实，通往 Breeze 的捷径贯穿于 Web API、EF 和关系数据库。拿走这些，您可能会在服务器上编写更多代码（在客户端上编写更多代码）。这可能是您的完美权衡。

Breeze 的作者希望使这条路径更容易。**我不认为 BreezeJS 让它变得更难**。我不明白你的说法“*微风变得很难使用*”。你试过了吗？

您的客户端可以以您选择的任何方式与任何 HTTP 资源进行通信。使用现有的 Web API 控制器非常容易（尽管使用 Breeze Web API 控制器更容易）。如果您愿意，可以使用 amplify.js（顺便说一句，您可以告诉 Breeze 使用 amplify 进行 AJAX 调用）。如果您不想，您甚至不必使用 Breeze`EntityManager`来查询和保存数据。

BreezeJS 的其余部分可能对您仍然有价值。在您弄清楚如何检索和存储数据以及您更喜欢 Entity-ChangeSet 样式还是 Command/Query 样式之后，还有很多工作要做。

你必须找到这些问题的答案：

*   您将如何将原始 JSON 数据塑造成可绑定的对象？
*   您将如何保留这些对象并在多个屏幕上共享它们，而不需要对服务器进行冗余往返？
*   将地址绑定到 StatesAndProvinces 的组合框时，您将如何从一个对象导航到相关对象？
*   您将如何跟踪变化？
*   你将如何验证它们？
*   当应用程序“墓碑”时，您将如何将部分或全部数据存储在本地存储中？

即使您不希望它为您查询和保存，Breeze 也可以帮助您完成这些琐事。

如果你的回答仍然是“*我会自己做所有这些，谢谢*”......好吧，从你的 HotTowel 项目中删除 Breeze 就像这样简单：

> `Uninstall-Package breeze.webapi`

# django - 生产中的 IPython 笔记本

> ID：15046942
> 
> 赞同：0
> 
> 时间：2013-02-23T23:27:23.527
> 
> 标签：django, ipython, upstart, ipython-notebook, django-shell

我正在尝试在生产 ubuntu 服务器上运行 IPython。我想用暴发户来控制它。

我有一个 bash 脚本可以在前台正确调用它，但是当通过 upstart 调用时它不起作用。除了将 upstart 脚本的输出传输到文件之外，我不确定如何调试问题，这只是确认 IPython 控制台仪表板正确显示。

我正在使用具有以下配置的 django-extensions：

```
IPYTHON_ARGUMENTS = [
    '--ext', 'django_extensions.management.notebook_extension',
    '--pylab=inline',
    '--profile=myprofile',
] 
```

我的 bash 脚本是：

```
#!/bin/bash
set -e

cd /home/ubuntu/myproject

exec venv/bin/python /home/ubuntu/myproject/manage.py shell_plus --notebook 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:38:55.283

不知道可能是什么原因。

您是否看过设计用于启动多个 IPython 服务器的[Hydra ？](https://github.com/cni/ipython-hydra)

# java - 将本地 xml 文件作为输入到 android 中的 java 类

> ID：15046944
> 
> 赞同：0
> 
> 时间：2013-02-23T23:27:31.320
> 
> 标签：java, android, xml, file

我在 assets 文件夹中有一个名为 coffee.xml 的本地 xml 文件。

我有以下结构：

```
1 activity called Game.java
1 class called Units.java
1 class called MyUnit.java which extends Units.java 
```

现在，我尝试将 coffee.xml 文件作为 MyUnits.java 文件中的输入。

我看到了很多解决方案，比如使用

```
getResources() OR
classLoader() etc... 
```

没有任何效果。我还尝试提供直接路径“C:\Users\MyName\Workspace .....coffee.xml”这也行不通。我完全不知道如何将此文件作为输入。

请指教。谢谢！（这些自动代码检测功能使堆栈溢出变得烦人......这很糟糕。）======================更多信息=== ======================

在 MyUnit.java 的构造函数中，我调用了一个名为 retrieve() 的函数

这个 retrive() 函数基本上接受 coffee.xml 文件的输入并从节点检索所有信息并将其分配给 MyUnit.java 类对象。我正在使用 SAXParser 这样做。

它都是基本的

```
try {
        SAXParserFactory factory = SAXParserFactory.newInstance();
        SAXParser saxParser = factory.newSAXParser();

        DefaultHandler handler = new DefaultHandler() {
        public void startElement(String uri, String localName,String qName, 
                    Attributes attributes) throws SAXException {
            ....

         }
         };

         saxParser.parse(<your XML File>, handler); <------Problem here
    } catch (Exception e) {
           e.printStackTrace();
        } 
```

我需要知道，如何将本地文件 coffee.xml 作为标记行的输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:50:04.203

资产通过 AssetManager 加载，后者通过 Context 的返回

```
getAssets() 
```

方法。因此，在您的游戏活动中，您可以调用

```
AssetManager assetManager = getAssets();
XmlResourceParser xmlParser = assetManager.openXmlResourceParser("coffee.xml");
MyUnit unit = new MyUnit(xmlParser); 
```

从那里，您需要阅读[XmlResourceParser](http://developer.android.com/reference/android/content/res/XmlResourceParser.html)以从您的 XML 文件中提取属性/标签。[可以在XmlPullParser](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html)页面（XmlResourceParser 实现）上找到有关如何遍历 XML 文件的一个很好的示例。

在使用 SAXParser（而不是 Android 提供的解析器）的情况下，您可以改用：

```
AssetManager assetManager = getAssets();
InputStream is = assetManager.open("coffee.xml");
MyUnit unit = new MyUnit(is); 
```

然后代替您的文件名，使用

```
saxParser.parse(is, handler); 
```

# command-line - 如何使 zsh vi 风格的命令尊重 WORDCHARS？

> ID：15046950
> 
> 赞同：1
> 
> 时间：2013-02-23T23:28:00.720
> 
> 标签：command-line, zsh

我更喜欢`vi-style`单词移动，例如`vi-forward-word`代替`forward-word`，以便光标也停在分隔符上。但是，我也想在这种情况下`zsh`表示尊重`WORDCHARS`，或者以某种方式定义我的分隔符。这有可能吗？似乎我可以`zsh`使用我的分隔符，或者使用`vi-style`它也停止在它们上的动作，但不能同时使用两者。

因此，例如，如果我的行如下：

```
% ls -la /foo/bar/f-b/r 
```

然后，如果我开始逐字逐句前进，它将停在`/`, `foo`, `/`, `bar`, `/`, `f-b`, `/`, `r`.

我的相关行`.zshrc`：

```
WORDCHARS='*?_-.[]~=&;!#$%^(){}<>'  # removed /

autoload select-word-style                                                                                                                             
select-word-style normal

bindkey '^W'     vi-backward-kill-word
bindkey '^f'     vi-forward-word
bindkey '^b'     vi-backward-word 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:25:45.230

最后我只是实现了我自己的`zle`小部件：

```
SEPCHARS='[/ ]'

my-forward-word() {
    if [[ "${BUFFER[CURSOR + 1]}" =~ "${SEPCHARS}" ]]; then
        (( CURSOR += 1 ))
        return
    fi
    while [[ CURSOR -lt "${#BUFFER}" && ! "${BUFFER[CURSOR + 1]}" =~ "${SEPCHARS}" ]]; do
        (( CURSOR += 1 ))
    done
}

zle -N my-forward-word
bindkey '^f' my-forward-word

my-backward-word() {
    if [[ "${BUFFER[CURSOR]}" =~ "${SEPCHARS}" ]]; then
        (( CURSOR -= 1 ))
        return
    fi
    while [[ CURSOR -gt 0 && ! "${BUFFER[CURSOR]}" =~ "${SEPCHARS}" ]]; do
        (( CURSOR -= 1 ))
    done
}

zle -N my-backward-word
bindkey '^b' my-backward-word

my-backward-kill-word() {
    if [[ "${LBUFFER[CURSOR]}" =~ "${SEPCHARS}" ]]; then
        LBUFFER="${LBUFFER[1, CURSOR - 1]}"
        return
    fi
    while [[ CURSOR -gt 0 && ! "${LBUFFER[CURSOR]}" =~ "${SEPCHARS}" ]]; do
            LBUFFER="${LBUFFER[1, CURSOR - 1]}"
    done
}

zle -N my-backward-kill-word
bindkey '^W' my-backward-kill-word 
```

# hibernate - 我有 FetchType.LAZY 和休眠对象仍在加载

> ID：15046959
> 
> 赞同：1
> 
> 时间：2013-02-23T23:28:59.077
> 
> 标签：hibernate, lazy-loading, hibernate-mapping, eager-loading

我的“**角色**”实体 中有这种关系

```
@OneToOne(cascade = CascadeType.ALL, fetch = FetchType.EAGER, mappedBy = "persona")
private Empleado empleado; 
```

在我的“ **Empleado** ”实体中，我有这种关系

```
@OneToMany(cascade = CascadeType.ALL, mappedBy = "empleado", fetch = FetchType.EAGER)
private Set<Trabajo> trabajos = new HashSet<Trabajo>(); 
```

我在我的“ **Trabajo** ”实体中有这种关系

```
@BatchSize(size = 100)
@OneToMany(cascade = CascadeType.ALL, mappedBy = "trabajo", fetch = FetchType.LAZY)
private Set<Atencion> atenciones = new HashSet<Atencion>(); 
```

而GoogleCode提供的这种登录方式

```
@Override
public Persona acceder(String login, String password) {
    Search s = new Search();
    s.addFilterEqual("usuario", login);
    s.addFilterEqual("clave", password);
    return searchUnique(s);
} 
```

当我得到结果对象时，它已经加载了具有 EAGER fecth 的对象，除了在“ **Trabajo** ”实体中加载“ *Atenciones* ”集或者它具有 LAZY 提取之外，一切都很好。我怎样才能解决这个问题？

在我的 Trabajo 实体中，我还有其他 @OneToMany 关系具有 LAZY fetch 并且仍然加载我不知道为什么的对象。

当我使用 dozer mapperService 时，它​​会映射所有整个树对象，我可以看到所有不应该出现的对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T17:59:27.460

延迟加载并不意味着数据不会被加载。这意味着数据只会在您（或 Dozer，在本例中）请求其值时加载。

假设你有一个实体 Manager，一个 OneToMany 和一个实体 Worker。并假设关联是延迟加载的。以下是将会发生的事情：

```
Manager manager = session.get(Manager.class, 1L); 
// the above line loads the manager data from the database, using a SQL query

List<Worker> workers = manager.getWorkers();
// the workers variable references a Hibernate-specific list which is lazy-loaded.
// It doesn't contain any data until a method is called on it

int size = workers.size();
// calling any method of the list will cause a SQL query to be executed. This
// SQL query will load the workers of the manager from the database, and fill the list
// finally, the size of the list will be returned. 
```

它很懒惰，因为它仅在您真正需要时才加载。

因此，如果您不想在使用 Dozer 映射时将工作人员与经理一起返回，请确保 Dozer 不会尝试获取工作人员。有两种简单的解决方案可以做到这一点：

*   不要使用推土机（这很糟糕，恕我直言）
*   `Manager`将实体映射到`ManagerDTO`不包含工作人员列表的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T15:53:02.957

[这里](https://stackoverflow.com/a/2192256/11092)有一个关于延迟加载的很好的解释。您看到的可能是代理对象。检查触发的 sql 以验证数据是否真的从 db 加载。如果表上没有与“Atencion”相关的查询，请不要担心

您的推土机映射可能正在访问导致从 db 加载的记录的“atenciones”元素。如果您不希望这种情况发生，应该有一种方法可以从映射中排除某些字段。

# java - Java中的对象数组

> ID：15046960
> 
> 赞同：-1
> 
> 时间：2013-02-23T23:29:01.013
> 
> 标签：java, arrays, class

所以我有这个自定义类（我后来从中构建了一个继承树）但是这个根类非常适合为我的游戏中的角色类创建一个 stat 修饰符数组，而不必创建一个二维数组，这样我就可以存储 8 个双打PER 类但 JAva 不喜欢我的代码我做错了什么？

CharGen 是我的类，我可以自己实例化和扩展它 NumOfClasses 是一个 int 我多次使用来将各种数组设置为系统中总类的大小，这两个都可以正常工作。CharGen 的数组抛出一个错误

```
private CharGen CClassAttributeModifier[] = new CharGen[NumOfClasses];//expects a token { after the ;
CClassAttributeModifier[0] = new CharGen();//expects a } after ; 
```

但这似乎是错误的，特别是因为 [0] 设置只是一个测试，它不会在声明后立即构建，它将在类构造函数中构建，因为我为所有类数据、名称、描述构建数组，属性等，一旦设置后将用于加载所选类的所有数据，当您在游戏中选择它时

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T23:33:44.973

这两行代码永远不会一起合法，因为第一行是成员变量声明（必须出现在类范围内），第二行是语句（必须出现在方法或初始化块内。）如何解决这个问题取决于关于你想要的。如果它应该是一个成员变量，那么将第二条语句移动到该类的构造函数中。另一方面，如果这是方法中的局部变量，则删除不能在局部变量声明中使用的“私有”。

# python - Python捕获文件解析

> ID：15046962
> 
> 赞同：0
> 
> 时间：2013-02-23T23:29:03.653
> 
> 标签：python

我有一个半径捕获文件，我需要解析它。如何获取单个值对并聚合它们。这是文件的快速片段：

```
Acct-Session-Id = "1234adb"
Acct-Session-Time = 141312
Acct-Input-Octets = 1234123 
```

这不断重复，不断地具有相同的结构但不同的值。

我需要聚合八位字节，这很容易，因为我只是做`"if "Acct-Input-Octets" in`结构。

问题在于如果会话时间变为 0（即他们重新连接），总将发生变化。因此，运行总数需要重置，除非在这种情况下它是错误的（在 RADIUS 中，输入八位字节必须使用新的会话 ID 重置）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:39:19.203

像这样的东西？

```
totals = 0
for line in fileObj:
    name, value = line.split('=')
    if name.strip() == 'Acct-Session-Time' and value.strip() == '0':
        totals = 0
    elif name.strip() == 'Acct-Input-Octets':
        totals += int(value.strip()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T00:43:00.910

这是一个正则表达式方法：

脚步：

1-将时间和八位字节读入两个列表

2-超时并存储'0'元素的最后一个索引，同时检查八位字节的相同索引并确保它是否也是'0'，如果不是抛出异常

3-将八位字节中的值从末尾到最后一个索引“0”相加

```
import re

log = open('log.txt').read()

times = re.findall('Acct-Session-Time\s*=\s*(\d+)\s*', log)
octets = re.findall('Acct-Input-Octets\s*=\s*(\d+)\s*', log)

last_zero_index = 0

for i in range(0, len(times)):
    if times[i] == '0':
        last_zero_index = i
        if octets[i] != '0':
            raise Exception('Session time is reset but the usage is not')

totals = 0

for value in octets[-last_zero_index:]:
    totals += int(value)

print(totals) 
```

# c - printf(3) 的格式“位置参数”是否被视为 ansi C？

> ID：15046963
> 
> 赞同：0
> 
> 时间：2013-02-23T23:29:10.887
> 
> 标签：c, settings, ansi

我正在学习 C 编程课程，但我的一项作业没有用我的教授编译器正确编译。

在我向她解释我的代码后，我的教授最终给了我满分，但要求我只使用 ansi C。因此我的问题。

这是我使用的代码。

```
 printf("The value of 2(%1$.1f)**3+3(%1$.1f)**2+4(%1$.1f) + 5 = %2$.1f\
     \n", y, x); 
```

这是我使用 xcode 4.5 [http://i.imgur.com/KtMuSJd.jpg的编译器设置](http://i.imgur.com/KtMuSJd.jpg)

这是ansi C吗？或不？如果不是，我将如何将其更改为严格的 ansi C？

这里还有关于苹果 printf(3) 手册页中位置参数的一些信息。

[http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/printf.3.html](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/printf.3.html)

"

```
 Arguments are numbered starting at 1.
      If unaccessed arguments in the format string
     are interspersed with ones that are accessed the results will be indeterminate. 
```

"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T23:39:34.340

不，这不是 ANSI C，甚至不是 C99。这是一个 POSIX 扩展。ANSI C 不提供任何方法来更改要打印的参数的顺序。在您的特定情况下，您需要多次传递参数：

```
printf("The value of 2(%.1f)**3+3(%.1f)**2+4(%.1f) + 5 = %.1f\n", y, y, y, x); 
```

# c++ - 使用 getline 从文件读取到二维字符串数组

> ID：15046967
> 
> 赞同：0
> 
> 时间：2013-02-23T23:29:40.190
> 
> 标签：c++, arrays, string, file-io, text-files

我正在尝试将文本文件的内容读入二维字符串数组，但无论我尝试或搜索了什么，我都找不到解决方案。该代码应该加载一个文本文件，通过查找水平选项卡将其分成元素并显示输出。当我按原样运行代码时，我收到一个从在线搜索中发现的错误，这意味着我正在尝试操作我不应该操作的内存。我不是要求编写代码，只是朝着正确的方向推动。先感谢您。

这是我运行程序时得到的：

```
0x23fd5c

Process returned -1073741819 (0xC0000005)   execution time : 2.344 s
Press any key to continue. 
```

编辑:: 我已经更正了代码，所以它现在可以正常工作，但它没有正确地将每一行的最后一个条目存储在文本文件中。我可以以某种方式显示最后一个条目的数字 100，但是当我尝试传递该位置或仅显示 playList[0][5] 时，它表示它等于下一行的第一个条目。任何帮助都会很棒，我在下面发布了当前代码。

这是我的代码：

```
 #include <iostream>
 #include <string>
 #include <iomanip>
 #include <cstdlib>

 using namespace std;

 void readTextFile( int &Count, string playList[50][5]);
 void userAddition( int &Count, string playList[50][5]);

int main()
{
string decision;
string playList[50][5];
int Count = 0;
readTextFile(Count, playList);

cout << "If you would like to add to the list, Please enter 'Y'. If you would like to exit     
 please enter 'N'. ---->  ";
getline(cin, decision);
if (decision=="y" || decision=="Y")
    userAddition(Count, playList);
else
{
    return(0);
}

return 0;
} // End of Main FN.

void readTextFile( int &Count, string playList[50][5])
{

string inputfield;

ifstream infile("c:\\cTunes.txt", ifstream::in);
    if ( infile.is_open() )
    {
        // File is read.
    }   // end if
    else
    {
        cout << "Error Opening file" << endl;
        return; //Program Closes.
    }  // end else

    cout << setw(30)<<left<< "TITLE"<< setw(10) <<left<<"LENGTH"<<  
      // Outputs a title to          each column that is displayed.
    setw(40)<< left<<"ARTIST"<< setw(40) << left<<"ALBUM"<<
    setw(15) << left <<"GENRE" << setw(5) << left << "RATING" << endl;

getline(infile, inputfield, '\t');    // read until tab
while(! infile.eof())  // loop until file is no longer valid.
 {

        playList[Count][0] = inputfield;
        getline(infile, inputfield, '\t');           // read until tab.

        playList[Count][1] = inputfield;
        getline(infile, inputfield, '\t');             // read until tab.

        playList[Count][2] = inputfield;
        getline(infile, inputfield, '\t');           // read until tab.

        playList[Count][3] = inputfield;
        getline(infile, inputfield, '\t');          // read until tab.

        playList[Count][4] = inputfield;
        getline(infile, inputfield);                // read until end of line.
        playList[Count][5] = inputfield;

    cout << setw(30)<<left<< playList[Count][0] << setw(10) <<left<<playList[Count][1] <<          
    // Output the line number equal to count.
    setw(40)<< left<<playList[Count][2] << setw(40) << left<< playList[Count][3] <<
    setw(15) << left << playList[Count][4] << setw(5) << left << playList[Count][5] <<                     
    endl;

    /*cout <<"Title: " << setw(25)<<left<< playList[Count][0]<<endl;
    cout <<"Length: " << setw(5) <<left<<playList[Count][1] << endl;
    cout <<"Artist: " << setw(50)<< left<<playList[Count][2] << endl;
    cout <<"Album: " << setw(40) << left<< playList[Count][3] << endl;
    cout <<"Genre: " << setw(15) << left << playList[Count][4] << endl;
    cout <<"Rating: " << setw(5) << left << playList[Count][5] << endl<<endl;*/

    Count++;            // Increment counter by 1
    getline(infile, inputfield, '\t'); // read next line until tab.

    }    // end while
 infile.close(); // close the file being read from.
 cout<<endl<<endl<<playList[0][5]<<endl;
 } // End of readTextFile 
```

我相信 getline 在阅读到行尾时会导致问题，但我真的很茫然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:36:17.240

您`std::string`用于存储字符串、`std::ifstream`从文件读取、`std::getline`读取单词……您应该真正使用`std::vector`s 而不是数组：

```
typedef std::vector<std::string> Line;
std::vector<Line> playList; 
```

它会让你的事情变得更容易。我还建议您将读取文件的方式更改为：

```
while(getline(...))
{
    ...
} 
```

* * *

但由于您不允许使用`std::vector`，您的函数可能如下所示：

```
// reads the content of input file and stores it into playList:
void readTextFile(std::ifstream& infile, std::string playList[][5])
{
    std::string line;
    for (int lineIndex = 0; getline(infile, line); ++lineIndex)
    {
        // skip empty lines:
        if (line.empty()) continue;

        std::string word;
        std::istringstream lineStream(line);
        for (int wordIndex = 0; getline(lineStream, word, '\t'); ++wordIndex)
        {
            // skip empty words:
            if (line.empty()) continue;

            playList[lineIndex][wordIndex] = word;
        }
    }
} 
```

可以这样使用：

```
std::string playList[19][5];

std::ifstream infile("c:\\Test.txt");
if (infile.is_open())
{
    readTextFile(infile, playList);
    infile.close();
}
else
    std::cout << "Error Opening file" << std::endl; 
```

另请注意，`cout << playList << endl;`输出第一个字的地址。要打印所有单词，您必须编写一个循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T23:46:11.803

该`readTextFile`函数不返回任何内容。您需要返回一个字符串。如果您收到错误，`what(): basic_string::_S_construct null not valid`那么这就是您的问题。您可以通过使用`-Wall`编译器选项来避免类似的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T00:27:38.930

首先，请注意以下行：

```
cout << playList << endl; 
```

您正在打印数组的地址，而不是内容。您将需要一个循环来打印内容。

其次，在以下代码中：

```
if ( infile.is_open() )
{
   // ok, read in the file
}    // end if
else
{
cout << "Error Opening file" << endl;
//a return statement is missing
} 
```

您需要一个 return 语句以避免从关闭的流中读取（这可能导致崩溃）

最后，你的函数不返回任何东西，所以它应该被声明为 void 或者返回一些值（根据上下文没有意义）。

希望有帮助，祝你好运！

# c++ - 如何使用 C++ 复制 SID 以进行存储

> ID：15046976
> 
> 赞同：0
> 
> 时间：2013-02-23T23:30:50.087
> 
> 标签：c++, windows, winapi, sid

假设我使用以下 API 获取用户的 SID：

```
TOKEN_USER* pTU = (TOKEN_USER*)pbytes;
DWORD dwSize;
GetTokenInformation(hToken, TokenUser, pTU, dwSize, &dwSize);

pTU->User.Sid;  //Contains the SID I need 
```

我需要存储这个 SID 以供以后在程序中使用/比较。但是我该如何复制呢？

如果我这样做：

```
SID globalSIDStorage;
globalSIDStorage = *pTU->User.Sid; 
```

我收到一个错误：

> 错误 C2679：二进制“=”：未找到采用“PSID”类型右侧操作数的运算符（或没有可接受的转换。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T23:35:14.873

您可能想使用[CopySid](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376404.aspx)。

# sqlite - 使用 sqlite 获取表中特定列的平均值

> ID：15046980
> 
> 赞同：0
> 
> 时间：2013-02-23T23:31:36.037
> 
> 标签：sqlite

我有一个大约 10 列的基本 sqlite 表。第一列是文本名称，其余的只是整数。我希望形成一个新表，其中第一行中的每个不同值都有一行，并且每隔一列是该列所有实例的平均值。例如，如果我有下表：

```
foo  1  3  5
bar  3  4  1
edd  2  1  3
bar  1  4  2
foo  1  1  3 
```

然后我想创建一个包含三行（foo、bar、edd）的新表，该行将具有这些行的每列的平均值。这可能使用sqlite吗？

```
foo  1  2  4
bar  2  2.5 1.5
edd  2  1  3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T23:36:38.910

尝试

```
select col1, avg(col2), avg(col3), avg(col4)
from mytable
group by col1 
```

# cakephp - 在 CakePHP 2.x 的单元测试期间如何关闭日志记录？

> ID：15046981
> 
> 赞同：3
> 
> 时间：2013-02-23T23:31:36.740
> 
> 标签：cakephp, cakephp-2.3

例如，如果您正在对模型进行单元测试，并且在该模型中使用 CakePHP 的 CakeLog 便捷方法（可能测试预期的异常等）：

```
CakeLog::warning('This is a warning'); 
```

Cake 不仅会在您的测试期间在命令行中输出它，它还会将错误添加到 logs/error.log。

我需要完成以下两件事之一：

1.  在单元测试期间关闭日志记录
2.  模拟 CakeLog 类或存根 Model->log()（继承自 Object->log）

精明的 CakePHP 开发人员如何完成这两件事中的一件？

相关：[使用数据库日志记录并在您的测试数据库中执行上述日志记录，这样的事情不会打扰您......](https://stackoverflow.com/questions/9952001/cakephp-logging-to-live-db-during-unit-testing)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T23:43:47.623

在测试的顶部，`CakeLog::drop(logger_name);`禁用[logger_name](http://book.cakephp.org/2.0/en/core-libraries/logging.html)流上的日志记录

# c# - HtmlAgilityPack SelectNodes，处理

> ID：15046983
> 
> 赞同：2
> 
> 时间：2013-02-23T23:31:39.750
> 
> 标签：c#, web-scraping, html-agility-pack

我正在尝试使用 HtmlAgilityPack 进行一些屏幕抓取，`SelectNodes`并从返回的每个节点获取一些值

这是代码

```
private readonly HtmlDocument _document = new HtmlDocument();

public void ParseValues(string html)
{
    _document.LoadHtml(html);
    var tables = _document.DocumentNode.SelectNodes("//table");

    foreach (var table in tables)
    {
        _document.LoadHtml(table.OuterHtml);
        var value = _document.DocumentNode.SelectSingleNode("//tbody[1]/tr/td[0]");
    }
} 
```

但是我注意到，当尝试在 foreach 循环中选择子项时，它实际上是从文档根目录中搜索的。真的很烦人的东西。

问题：

1.  有没有一种方法可以从返回的每个表中选择值，`SelectNodes`而无需创建新的文档实例`HtmlDocument`？

2.  有没有办法处理`HtmlDocument`，因为我注意到每次使用都有内存泄漏`_document.LoadHtml(html)`；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:51:59.740

*（有关更详细的说明，请参阅[Html Agility Pack - 选择子节点时出现问题](https://stackoverflow.com/questions/6181014/html-agility-pack-problem-selecting-subnode/6182495#6182495)）*

* * *

您**不必**创建另一个`HtmlDocument`对象，或将另一个 HTML 加载到其中。你只需要做：

```
foreach (var table in tables)
{
    var value = table.SelectSingleNode(".//tbody[1]/tr/td[0]");
} 
```

关键是使用`.//tbody`而不是`//tbody`.

# json - RESTEasy和jackson——责任分工

> ID：15046985
> 
> 赞同：0
> 
> 时间：2013-02-23T23:32:29.673
> 
> 标签：json, jackson, resteasy

我已经开始阅读有关 json 的 Jackson 提供程序的信息。这些天我担任经理，很快就会有一个关于 JSON 的演示文稿。我们制作将 JSON 数据发送到 RESTEasy 服务的移动应用程序。

我知道服务器上的类应该由 @Consumes 和 @Produces 注释，并且 JSON 对象的 Content-Type 应该与类消费的内容相匹配。

我的疑问是哪个组件执行读取请求的内容类型并在使用该内容类型的服务器上找到匹配的类的这种逻辑？是不是 RESTEasy 本身的某些部分会这样做，因为我在 jackson-jaxrs 源代码中找不到任何这样的逻辑。请告诉我。

另外，我应该在演示文稿中涵盖哪些要点？这就是我的计划： 1\. JSON 语法 2\. 为什么它比 XML 更好。3\. eval() 方法。4\. 编组解组。5\. 一个小demo——JSON和RESTEasy

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T00:29:59.213

`Content-Type`如果正在使用 url 内容协商，Resteasy 负责从请求中读取标头或从 url 中获取内容类型。

`@Consumes`Resteasy 然后将路径匹配到它已扫描的方法，并通过评估其注释来验证该方法是否支持内容类型。

# java - 在后台线程中初始化的 JSONArray 上的 NullPointerException

> ID：15046989
> 
> 赞同：0
> 
> 时间：2013-02-23T23:34:36.847
> 
> 标签：java, android

我正在编写一个 android 应用程序，我使用后台线程从 Web 服务中提取 JSONArray。然后我需要在主要活动中与那个 JSONArray 进行交互。这就是我现在正在做的事情：

```
public class MainActivity extends Activity {
JSONArray stories;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    new getAll().execute();

 //   try {
        System.out.println("stories.length());
//  } catch (JSONException e) {
        // TODO Auto-generated catch block
    //  e.printStackTrace();
    //}

} 
```

和后台线程：

```
 private class getAll extends AsyncTask <Void, Void, JSONArray> {
    private static final String url = "http://10.0.2.2:8080/CalibServer/webresources/storypkg.story/";
    @Override
    protected JSONArray doInBackground(Void... params) {

         //set up client and prepare request object to accept a json object
        HttpClient httpclient = new DefaultHttpClient();
        HttpGet httpget = new HttpGet(url);
        httpget.addHeader("accept", "application/json");

        HttpResponse response;

        String resprint = new String();

        try {
            response = httpclient.execute(httpget);
            // Get the response entity
            HttpEntity entity = response.getEntity();

            if (entity != null) {
                // get entity contents and convert it to string
                InputStream instream = entity.getContent();
                String result= convertStreamToString(instream);
                resprint = result;
                // construct a JSON object with result
                stories =new JSONArray(result);
                // Closing the input stream will trigger connection release
                instream.close();
            }
        } 
        catch (ClientProtocolException e) {System.out.println("CPE"); e.printStackTrace();} 
        catch (IOException e) {System.out.println("IOE"); e.printStackTrace();} 
        catch (JSONException e) { System.out.println("JSONe"); e.printStackTrace();}

        System.out.println("FUCKYEAHBG: " + resprint);
       // stories = object;
        return stories;
    } 
```

我的问题是我在调用时收到 NullPointerException

```
System.out.println("stories.length()); 
```

它的行为就像没有初始化故事数组，但在调用之前不应该由后台线程（在行： stories =new JSONArray(result); ）处理吗？

我有一种感觉，这是因为线程 - 也许在 AsyncTask 运行后我必须采取另一个步骤来更新主要活动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T23:41:24.880

您正在后台线程中初始化变量。这意味着该行

```
System.out.println(stories.length()); 
```

与初始化变量的代码并行执行。因此，这意味着后台线程很有可能在执行此行时还没有时间初始化变量。

您的代码类似于以下情况：您面前有一个空杯子，并请人去煮咖啡并为您的杯子倒满。问完之后，你就开始喝酒了。显然，杯子里不会有咖啡。

重新阅读有关如何执行异步任务的 android 文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T23:37:58.490

当与 UI 线程**并行**运行的*单独*线程初始化和更新时，您不能依赖`stories`被初始化。***`stories`***

 ***> 也许在 AsyncTask 运行后我必须采取另一个步骤来更新主要活动？

[`onPostExecute()`](http://developer.android.com/reference/android/os/AsyncTask.html)的异步任务。在那里做任何你需要的 UI 更新。由于`getAll`已经是私有内部类，因此您可以完全访问 Activity。您已经返回`stories`到那个（未覆盖的）方法，所以这应该是一个小改动。

```
@Override
protected void onPostExecute (JSONArray stories)
{
  //use the now initialized stories
} 
```***

# core-data - 核心数据迁移后的 NSRangeException

> ID：15046992
> 
> 赞同：5
> 
> 时间：2013-02-23T23:34:56.347
> 
> 标签：core-data, core-data-migration, nsrangeexception

在向我的应用程序添加新的 Core Data 模型版本后，我执行了轻量级迁移，显然是成功的。迁移的文件加载正常，但在第一次尝试通过特定关系访问属性时，应用程序崩溃并显示`NSRangeException: '*** -[__NSArrayM objectAtIndex:]: index 4294967295 beyond bounds [0 .. 35]'`. 这种关系在迁移之前运行良好。我从这里的其他帖子中知道 4294967295 确实`-1`是它的表）。

**问题：**

我的问题是：根据我遇到的错误和我在下面完成的故障排除，是否有一种模式更改可以通过轻量级迁移，但在此过程中会破坏数据，导致注意到的异常？我将尝试将迁移分解为多个版本的较小块，以隔离或避免该问题，但如果能够专注于可能有问题的特定架构更改，那就太好了。

**失败：**

失败发生在“myobject”中的以下代码：

```
[[self object2] text]; 
```

object2 关系是一对一的，非可选的两种方式，数据模型之间的正向或反向关系都没有改变。该`text`属性可能不相关，因为发生错误时，`awakeFromFetch`在 object2 中未达到。如果我`[self object2]`在上述语句之前分配给变量，则分配成功并报告`data: <fault>`.

**数据库：**

查看 sqlite3 中的数据库，我注意到以下内容：

1.  正向和反向关系的索引值在每个表中似乎都是正确的。
2.  object2 表有两列用于反向关系，而不是迁移之前的一列（`ZMYOBJECT`如前所述，另外还有`Z2_MYOBJECT`一个，对于所有行都是空的）。没有添加其他关系来解释此列。
3.  在`Z_PRIMARYKEY`表中，迁移后的所有条目都显示`-1`为`Z_MAX`，而在迁移之前，空表显示为零，填充表显示最大行数。手动更新`Z_MAX`到正确的值对异常没有帮助。所有`Z_SUPER`值都是正确的。

我建立了一个映射模型，看看自动映射是否有任何问题，但一切看起来都很好。

**总体架构更改**：

在数据模型的源版本中，有 14 个实体，其中只有 4 个已填充数据（该应用程序仍在开发中）。七个是顶级实体，七个是三个顶级实体的子实体。

在数据模型的目标版本中，添加了 22 个实体，一些顶级实体和一些子实体，以及数十种关系，包括一些添加到现有实体中的关系。

从现有实体中删除了一些属性和关系，并添加了其他属性和关系。没有更改数据类型或关系设置，没有重命名属性或关系，也不需要特殊映射。

更新（2/25/12）：当我开始研究一个新的中间模型时，我记得我已经将许多实体的类（representedClassName）从 NSManagedObject 更改为 NSManagedObject 子类，但没有生成类文件. 我不怀疑这会导致问题，事实上，创建所有类文件并没有帮助解决异常。我只是想指出这是模型之间的另一个变化。

**结论：**

这是一个疯狂的猜测，但如果 36 个实体计数不是巧合，似乎当“myobject”试图在“object2”中出错时，它没有对表的有效引用并试图加载表号 -1 ，导致异常。然而，一个简单的分配`[self object2]`成功的事实并不符合这个结论。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:24:39.063

通过多次增量迁移，我能够确定导致问题的原因以及解决方案。

**问题：**

具有数据的现有实体之一在当前模型中没有子实体。如果我创建一个新模型，该模型仅添加一个不包含属性或关系的子实体，并且不进行其他更改，那么我的问题中提到的 NSRangeException、Z_MAX 观察和反向关系的加倍都会发生。

**解决方案：**

在观察上述案例的“成功”轻量级迁移后的失败后，我创建了一个映射模型。由于唯一的变化是增加了一个实体，因此除了一个实体映射之外，其他所有实体映射都很简单。问题是如何处理单个添加的实体。

默认情况下，添加的没有自己的属性或关系的实体显示所有父级属性的属性和关系映射。默认情况下，所有映射都有空值表达式，我认为这意味着它会在迁移期间跳过它们。显然，这不是真的。通过删除实体映射中的所有属性和关系映射，然后关闭推断映射，迁移成功进行。

我仍然必须处理所有剩余的实体，并将尝试这种方法批量完成其余的工作，所有计划的属性和关系都完好无损。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T07:47:52.863

当我遇到这个问题时，你的帖子很有帮助。谢谢你。*[你已经报告了这个错误吗？]*

这里有一些更多的实验结果，但是，唉，这不是一个很好的解决方案。

*   我的架构更改类似地添加了一个没有其他属性或关系的实体子类型。错误消息与您的相同，但边界为`[0 .. 19]`. 这确实对应于 20 种实体类型，验证了您的假设。与您的情况一样，在迁移完成后尝试访问实体属性时发生错误。

*   向新实体类型添加虚拟属性和虚拟自我关系并不能避免迁移后崩溃。（但是，我没有将新实体类型作为*唯一*的架构更改进行测试，因为我之前将该架构更改推送给了 alpha 测试人员。）

*   在成功迁移其他架构更改后，我观察了`Z2_MYOBJECT`列和`Z_PRIMARYKEY.Z_MAX = -1`症状，因此这些可能根本没有问题。-1 值被适当的最大值懒惰地替换。迁移期间可能会使用额外的列。

*   在我的例子中，新实体的超类型有一个有序的多对多关系。在整个数据存储仅包含一个对象实例（没有传出关系链接的该实体类型的实例）的非常简单的情况下，模式迁移成功。它确实有额外的`Z2_MYOBJECT`列和`Z_PRIMARYKEY.Z_MAX = -1`值，但从那里添加对象时，结果数据存储工作正常。

*   我尝试创建一个映射模型，但未能成功让 Core Data 应用它。关闭推断映射只会让 Core Data 根本无法迁移。*有什么诀窍吗？我是否必须编写自定义迁移代码才能调用映射模型？*这是 Xcode 4.6.2，所以旧的错误早已不复存在。

*   当使用 git 向后或向前滚动代码和数据模型以进行实验时，似乎有必要 (1) 关闭并重新打开 Xcode 项目和 (2) 进行干净的构建。否则 Xcode 可能会崩溃和/或留下混乱的状态。

*   要实验性地向后滚动，您必须`.momd/`从目标 iOS 模拟器/设备中删除目录或整个应用程序（或通过 iTunes 或 TestFlight 部署应用程序），因为通过 Xcode 重新部署不会删除过时的文件（如`.mom`和`.omo`数据模型定义） turn 允许应用程序执行实际部署的应用程序无法执行的轻量级迁移。

*   关于用于添加的实体类型的实体映射，请注意，当 Core Data 应用映射模型时，它会将实体从旧数据存储复制到新数据存储。它没有修改表。您不希望它“跳过”属性（包括继承的属性），除非您想删除它们。

*   但是，由于架构更改*添加*了实体类型，因此该实体没有要迁移的实例，因此其自定义映射模型规则无关紧要。

因此，我想知道是否有其他原因导致您的崩溃停止，例如剩余的实验`.mom`文件或自定义迁移代码。您的解决方法是否有效？

经过 2 天的试验后，我决定这次我的 alpha 测试人员将不得不在没有数据迁移的情况下生活。幸运的是，这在没有生产客户的情况下发生。但这并没有让我对 Core Data 充满信心。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-24T04:54:12.520

`NSRangeException`在自动轻量级迁移后访问特定实体的任何实例时添加核心数据模型版本后，我有同样的情况。在我的情况下，范围也对应于我模型中的实体数量。

我使用 Xcode 4.6 (4H127) 生成了一个映射模型，`File > New > File...`然后选择`Core Data > Mapping Model`. 这导致崩溃（d）演变成`-[NSSymbolicExpression length]: unrecognized selector sent to instance...`

**解决方案**

我的问题是导致原始崩溃的实体有一个名为 的关系`size`，这是苹果的[Predicate Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html "谓词编程指南")中列出的保留字。对映射模型的检查显示，保留字在关系的值表达式中已大写：

`FUNCTION($manager, "destinationInstancesForEntityMappingNamed:sourceInstances:" , "PNSizeOptionToPNSizeOption", $source.SIZE)`

我在[Core Data Model Versioning and Data Migration Programming Guide](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/CoreDataVersioning/Articles/vmMappingOverview.html#//apple_ref/doc/uid/TP40004399-CH5-SW1 "核心数据模型版本控制和数据迁移编程指南")中找到了解决方案：

> 自定义值表达式中的保留字：如果使用自定义值表达式，则必须使用 # 转义保留字，例如 SIZE、FIRST 和 LAST（例如，$source.#size）。

不幸的是，用于生成映射模型的 Xcode 算法无法识别保留字，我不得不将关系映射检查器中表达式的键路径更改为`$source.#size`. 这解决了问题。我假设核心数据的推断映射模型在轻量级迁移期间遇到了类似的问题。

这种崩溃可能还有其他原因，因此此解决方案可能不适用，但可能值得根据[Predicate Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html "谓词编程指南")中的保留字列表检查模型中的属性名称。

# javascript - .focusout() 仅读取第一个 if() 语句

> ID：15046994
> 
> 赞同：-3
> 
> 时间：2013-02-23T23:35:03.920
> 
> 标签：javascript, jquery

为什么即使它们都是正确的，这两个 if 语句也不通读？

**HTML**

```
<textarea name="test">
  Focus out to test prompts
</textarea> 
```

**jQuery**

```
var disableA = 1;
var disableB = 1;

$('textarea[name="test"]').focusout(function() {
    if (disableA == 1) {
        disableX();
    }
    if (disableB == 1) {
        disableY();
    }
});

function disableX() {
    alert('A is disabled');   
}

function disabledY() {
    alert('B is disabled');   
} 
```

现在它会要求`disableX();`但不是`disableY()`

**jsFiddle：http:** [//jsfiddle.net/nCQQm/](http://jsfiddle.net/nCQQm/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T23:37:19.077

你拼写 disableY 错误你需要把它重命名为 disabledY()

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T23:37:22.980

`if`陈述没有问题。

运行您的代码会出现错误：

```
ReferenceError: disableY is not defined 
```

您已经命名了第二个函数`disabledY`，然后您尝试调用`disableY`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T23:37:30.187

在您的第二个函数中，您将其称为 disabledY，而您正在回调 disableY()？

# python - Pythonic API 设计（类似于 C# 的索引运算符的覆盖？）

> ID：15046997
> 
> 赞同：0
> 
> 时间：2013-02-23T23:35:14.027
> 
> 标签：python

我有一个包含房间的地牢对象。每个房间都有一个名字。我想设计一个从其客户端接受此 API 的类：

```
dungeon = Dungeon()
room = dungeon.room['room_name'] 
```

到目前为止，我能够设计这样的东西：

```
dungeon = Dungeon()
room = dungeon.room('room_name') 
```

编写一个采用 str 参数并按名称查找房间的方法很容易。

但是，如果我想让房间“访问器”表现得像一本字典呢？我有哪些选择？

我已经想到了这一点，但是，作为一个真正的初学者，我无法决定：

*   创建 dict 的子类型，覆盖其`__getattribute__`方法

我不喜欢的是让客户能够这样做：

```
dungeon.room.keys() 
```

并发现所有房间名称。

如果这个问题对专家来说听起来很愚蠢......对不起。我还能说什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T07:09:07.283

在您的代码中定义`__getitem____(self, key)`- 这使您可以对对象进行字典式访问。

```
class Room(object):
    # stuff...
    def __getitem__(self, key):
        # get room using the key and return the value
        # you should raise a KeyError if the value is not found
        return self.get_room(key)

dungeon.room = Room()
dungeon.room['room_name']  # this will work! 
```