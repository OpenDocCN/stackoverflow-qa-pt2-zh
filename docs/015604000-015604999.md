# StackOverflow 问答 15604000-15604999

# .htaccess - 将所有子域数据重写到新域

> ID：15604001
> 
> 赞同：0
> 
> 时间：2013-03-24T21:05:49.133
> 
> 标签：.htaccess, rewrite

我的网站上有一个来自 vimeo 的视频

我想写：

我找不到将 player.mydomain.com 转换为 player.vimeo.com 的 .htaccess 重写代码实际上没有任何效果。也许不可能？

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T21:12:31.233

如果我了解您的问题，请在您的 .htaccess 文件中尝试此操作：

```
RewriteCond %{HTTP_HOST} ^player.mydomain.com$
RewriteRule ^(.*)$ http://player.vimeo.com/$1 [R=permanent] 
```

这只会将请求的文件名和查询字符串扔给 player.vimeo.com。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T21:08:55.877

尝试添加新的 DNS 规范记录，例如：

```
 oldsubdomain   CNAME       newsubdomain.domain.com. 
```

在您的域中：

```
player CNAME player.vimeo.com. 
```

# jquery - 使用 $('html, body') 与 $('html') || $('body') 用于动画页面滚动

> ID：15604005
> 
> 赞同：1
> 
> 时间：2013-03-24T21:06:23.170
> 
> 标签：jquery

在性能方面，将 html 和 body 动画在一起（为了浏览器兼容性）与嗅探浏览器并仅使用 html OR body 有什么区别。

我假设同时使用 html 和 body 会导致两倍的 dom 遍历。如果是这样，会不会太小以至于没关系？

# jquery - 从文件中检测 SVG 路径

> ID：15604006
> 
> 赞同：0
> 
> 时间：2013-03-24T21:06:31.003
> 
> 标签：jquery, html, canvas, map, svg

我有以下 HTML 5 代码...

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">

</script>
<style type="text/css">

path#Selection{
fill: black;
}
path#Selection:hover{
fill:blue;
}
</style>
</head> 
<body>

<object data="America" type="image/svg+xml" id="test"></object>

</body>
</html> 
```

我正在使用的 svg 文件是从 gimp 导出的...

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN"
          "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">

<svg xmlns="http://www.w3.org/2000/svg"
 width="38.2361in" height="19.4444in"
 viewBox="0 0 2753 1400">
  <path id="Selection"
    fill="black" stroke="black" stroke-width="1"
    d="M 397.00,118.96
       C 397.00,118.96 414.00,115.96 414.00,115.96
         414.00,115.96 432.96,108.64 432.96,108.64
         432.96,108.64 441.04,107.73 441.04,107.73
</path>
</svg> 
```

不幸的是，如果它位于单独的文件中，我使用 css 悬停的路径检测不起作用。然而，路径是在我的浏览器中绘制和显示的，没问题。我设法让 path#Selection:hover 工作的唯一方法是将实际代码嵌入到我的 HTML 文件中......

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">

</script>
<style type="text/css">

path#Selection{
fill: black;
}
path#Selection:hover{
fill:blue;
}
</style>
</head> 
<body>

<svg xmlns="http://www.w3.org/2000/svg"
 width="38.2361in" height="19.4444in"
 viewBox="0 0 2753 1400">
  <path id="Selection"
    fill="black" stroke="black" stroke-width="1"
    d="M 397.00,118.96
       C 397.00,118.96 414.00,115.96 414.00,115.96
         414.00,115.96 432.96,108.64 432.96,108.64
         432.96,108.64 441.04,107.73 441.04,107.73
</path>
</svg>

</body>
</html> 
```

然而，这非常不方便，因为我正在构建一个包含许多国家的大地图，所以我宁愿将 svg 保留在单独的文件中。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:51:13.273

你可以把风格：

```
<style type="text/css">

path#Selection{
fill: black;
}
path#Selection:hover{
fill:blue;
}
</style> 
```

...在 svg 文件中。只要您不使用`<img>`或作为 CSS 背景图像引用它，它就可以工作。

或者，正如您自己建议的那样，您可以将 svg 内联包含在 HTML 文档中。问题是样式不适用于跨文档，仅适用于同一个文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T22:17:25.413

我发现这样做的唯一真正方法是制作一个单独的 html 文件，将 svg 内容放入其中并将其作为对象导入到我想要保持清洁的 html 中。

# c# - 使用 AllocConsole 和目标架构 x86 时没有控制台输出

> ID：15604014
> 
> 赞同：28
> 
> 时间：2013-03-24T21:07:08.920
> 
> 标签：c#, .net, pinvoke

我有一个 WinForms 项目，如果用户想要一个调试控制台，我会分配一个带有`AllocConsole()`.

在目标架构设置为“任何 CPU”的情况下，所有控制台输出都可以正常工作，但是当我将其更改为“x86”时，它不会输出任何内容（`Console.Read()`仍然按预期工作）。如果我直接打开 EXE，则输出有效。看起来 Visual Studio 将其重定向到它自己的“输出”窗口中。

我也试过[这个](https://stackoverflow.com/questions/160587/no-output-to-console-from-a-wpf-application)答案，但没有用，我也试过`Console.SetOut(GetStdHandle(-11))`，也没有用。

将目标架构设置为“任何 CPU”对我来说是没有选择的。

所以这是我的两个问题：

*   为什么只有目标架构设置为 x86 时才会出现这种情况？
*   在 Visual Studio 中运行时如何输出到控制台？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-11T23:16:35.027

当启用“启用本机代码调试”时，来自创建的控制台的输出`AllocConsole`被重定向到调试输出窗口。

这只发生在 x86 而不是 AnyCPU 中的原因是您只能在 x86 应用程序中调试本机代码。

请注意，此行为仅发生在使用`AllocConsole`. 控制台应用程序的输出不会被重定向。

编辑：控制台不输出文本的另一个原因是您在调用`AllocConsole`.

不管是什么原因，如果它被重定向，这段代码将恢复输出，并在它无效的情况下重新打开控制台。它使用*幻数 7*，它的句柄`stdout`通常等于。

```
using System;
using System.IO;
using System.Runtime.InteropServices;

public static class ConsoleHelper
{
    public static void CreateConsole()
    {
        AllocConsole();

        // stdout's handle seems to always be equal to 7
        IntPtr defaultStdout = new IntPtr(7);
        IntPtr currentStdout = GetStdHandle(StdOutputHandle);

        if (currentStdout != defaultStdout)
            // reset stdout
            SetStdHandle(StdOutputHandle, defaultStdout);

        // reopen stdout
        TextWriter writer = new StreamWriter(Console.OpenStandardOutput()) 
        { AutoFlush = true };
        Console.SetOut(writer);
    }

    // P/Invoke required:
    private const UInt32 StdOutputHandle = 0xFFFFFFF5;
    [DllImport("kernel32.dll")]
    private static extern IntPtr GetStdHandle(UInt32 nStdHandle);
    [DllImport("kernel32.dll")]
    private static extern void SetStdHandle(UInt32 nStdHandle, IntPtr handle);
    [DllImport("kernel32")]
    static extern bool AllocConsole();
} 
```

请参阅[如何检测 Console.In (stdin) 是否已被重定向？](https://stackoverflow.com/questions/3453220/how-to-detect-if-console-in-stdin-has-been-redirected)用于检测控制台句柄是否已被重定向的另一种方法。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2018-02-19T11:13:01.323

在 VS2017 和 Windows 10 上，早期的答案都不适用于我（例如，如果在调试模式下启动应用程序，它们会失败）。

您可以在下面找到一些增强的代码。想法是一样的，但是删除了幻数（Ceztko 已经提到过）并且初始化了所有必要的输入/输出流。

如果创建一个新控制台（alwaysCreateNewConsole = true），此代码对我有用。

附加到父进程的控制台 (alwaysCreateNewConsole = false) 有几个缺点。例如，我无法完全模仿从 cmd 启动的控制台应用程序的行为。而且我不确定这是否可能。

最重要的是：在修改[Console 类](https://github.com/Microsoft/referencesource/blob/master/mscorlib/system/console.cs)之后，我重新考虑了将 Console 类与手动创建的控制台一起使用的一般想法。它适用于大多数情况（我希望），但将来会带来很多痛苦。

```
 static class WinConsole
    {
        static public void Initialize(bool alwaysCreateNewConsole = true)
        {
            bool consoleAttached = true;
            if (alwaysCreateNewConsole
                || (AttachConsole(ATTACH_PARRENT) == 0
                && Marshal.GetLastWin32Error() != ERROR_ACCESS_DENIED))
            {
                consoleAttached = AllocConsole() != 0;
            }

            if (consoleAttached)
            {
                InitializeOutStream();
                InitializeInStream();
            }
        }

        private static void InitializeOutStream()
        {
            var fs = CreateFileStream("CONOUT$", GENERIC_WRITE, FILE_SHARE_WRITE, FileAccess.Write);
            if (fs != null)
            {
                var writer = new StreamWriter(fs) { AutoFlush = true };
                Console.SetOut(writer);
                Console.SetError(writer);
            }
        }

        private static void InitializeInStream()
        {
            var fs = CreateFileStream("CONIN$", GENERIC_READ, FILE_SHARE_READ, FileAccess.Read);
            if (fs != null)
            {
                Console.SetIn(new StreamReader(fs));
            }
        }

        private static FileStream CreateFileStream(string name, uint win32DesiredAccess, uint win32ShareMode,
                                FileAccess dotNetFileAccess)
        {
            var file = new SafeFileHandle(CreateFileW(name, win32DesiredAccess, win32ShareMode, IntPtr.Zero, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, IntPtr.Zero), true);
            if (!file.IsInvalid)
            {
                var fs = new FileStream(file, dotNetFileAccess);
                return fs;
            }
            return null;
        }

        #region Win API Functions and Constants
        [DllImport("kernel32.dll",
            EntryPoint = "AllocConsole",
            SetLastError = true,
            CharSet = CharSet.Auto,
            CallingConvention = CallingConvention.StdCall)]
        private static extern int AllocConsole();

        [DllImport("kernel32.dll",
            EntryPoint = "AttachConsole",
            SetLastError = true,
            CharSet = CharSet.Auto,
            CallingConvention = CallingConvention.StdCall)]
        private static extern UInt32 AttachConsole(UInt32 dwProcessId);

        [DllImport("kernel32.dll",
            EntryPoint = "CreateFileW",
            SetLastError = true,
            CharSet = CharSet.Auto,
            CallingConvention = CallingConvention.StdCall)]
        private static extern IntPtr CreateFileW(
              string lpFileName,
              UInt32 dwDesiredAccess,
              UInt32 dwShareMode,
              IntPtr lpSecurityAttributes,
              UInt32 dwCreationDisposition,
              UInt32 dwFlagsAndAttributes,
              IntPtr hTemplateFile
            );

        private const UInt32 GENERIC_WRITE = 0x40000000;
        private const UInt32 GENERIC_READ = 0x80000000;
        private const UInt32 FILE_SHARE_READ = 0x00000001;
        private const UInt32 FILE_SHARE_WRITE = 0x00000002;
        private const UInt32 OPEN_EXISTING = 0x00000003;
        private const UInt32 FILE_ATTRIBUTE_NORMAL = 0x80;
        private const UInt32 ERROR_ACCESS_DENIED = 5;

        private const UInt32 ATTACH_PARRENT = 0xFFFFFFFF;

        #endregion
    } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-12-09T04:31:46.597

以下在 2015 年对我有用，其他答案都没有：

来源：[https ://social.msdn.microsoft.com/profile/dmitri567/?ws=usercard-mini](https://social.msdn.microsoft.com/profile/dmitri567/?ws=usercard-mini)

```
using System;   
using System.Windows.Forms;   
using System.Text;   
using System.IO;   
using System.Runtime.InteropServices;   
using Microsoft.Win32.SafeHandles;   

namespace WindowsApplication   
{   
    static class Program   
    {   
        [DllImport("kernel32.dll",   
            EntryPoint = "GetStdHandle",   
            SetLastError = true,   
            CharSet = CharSet.Auto,   
            CallingConvention = CallingConvention.StdCall)]   
        private static extern IntPtr GetStdHandle(int nStdHandle);   
        [DllImport("kernel32.dll",   
            EntryPoint = "AllocConsole",   
            SetLastError = true,   
            CharSet = CharSet.Auto,   
            CallingConvention = CallingConvention.StdCall)]   
        private static extern int AllocConsole();   
        private const int STD_OUTPUT_HANDLE = -11;   
        private const int MY_CODE_PAGE = 437;   

        static void Main(string[] args)   
        {   
            Console.WriteLine("This text you can see in debug output window.");   

            AllocConsole();   
            IntPtr stdHandle=GetStdHandle(STD_OUTPUT_HANDLE);   
            SafeFileHandle safeFileHandle = new SafeFileHandle(stdHandle, true);   
            FileStream fileStream = new FileStream(safeFileHandle, FileAccess.Write);   
            Encoding encoding = System.Text.Encoding.GetEncoding(MY_CODE_PAGE);   
            StreamWriter standardOutput = new StreamWriter(fileStream, encoding);   
            standardOutput.AutoFlush = true;   
            Console.SetOut(standardOutput);   

            Console.WriteLine("This text you can see in console window.");   

            MessageBox.Show("Now I'm happy!");   
        }   
    }   
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-02-07T02:12:51.920

我也有这个问题。每次我尝试调试我的应用程序时，控制台都是空白的。奇怪的是，在没有调试器的情况下启动 exe 工作正常。

我发现我必须`Enable the Visual Studio hosting process`从项目的`Debug`菜单中。

斯蒂芬是正确的，`Enable native code debugging`确实将控制台重定向到输出窗口。但是，无论本机代码调试设置如何，在启用 Visual Studio 托管进程之前，我在任何地方都看不到任何输出。

这可能是仅仅禁用本机代码调试并不能解决您的问题的原因。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-16T00:23:07.610

只是想从 Visual Studio 开发人员社区发布答案。 [https://developercommunity.visualstudio.com/content/problem/12166/console-output-is-gone-in-vs2017-works-fine-when-d.html](https://developercommunity.visualstudio.com/content/problem/12166/console-output-is-gone-in-vs2017-works-fine-when-d.html) 转到此链接并查看 Ramkumar Ramesh 的答案。我在 VS 2017 中测试过这段代码。我花了一天时间找到这个答案。希望它也能帮助你。

编辑——正如迈克所建议的那样，包括一些描述。我想建议对 Zuniar 答案进行一些更正。他使用 VS 2015 进行了测试。但这在 VS 2017 中不起作用。请使用来自 kernel32.dll 的 CreateFile 参考，而不是 GetStdHandle

```
IntPtr stdHandle = CreateFile("CONOUT$", GENERIC_WRITE, FILE_SHARE_WRITE, 0, 
OPEN_EXISTING, 0, 0); 
```

在添加上述代码之前，请声明

```
[DllImport("kernel32.dll", SetLastError = true)]
private static extern IntPtr CreateFile(string lpFileName, uint 
dwDesiredAccess, uint dwShareMode, uint lpSecurityAttributes, uint 
dwCreationDisposition, uint dwFlagsAndAttributes, uint hTemplateFile);

private const int MY_CODE_PAGE = 437;
private const uint GENERIC_WRITE = 0x40000000;
private const uint FILE_SHARE_WRITE = 0x2;        
private const uint OPEN_EXISTING = 0x3; 
```

我从给定的链接中获取了此代码。

# java - 如何在此 Java 代码之上添加心跳消息（用于 KnockKnockClient/Server）？

> ID：15604015
> 
> 赞同：33
> 
> 时间：2013-03-24T21:07:11.910
> 
> 标签：java, sockets, networking

我正在研究以下基本 Java 套接字代码（[source](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html)）。这是一个 Knock-Knock-Joke 客户端/服务器应用程序。

在[Client](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/networking/sockets/examples/KnockKnockClient.java)中，我们照常设置套接字：

```
try {
  kkSocket = new Socket("localhost", 4444);
  out = new PrintWriter(kkSocket.getOutputStream(), true);
  in = new BufferedReader(new InputStreamReader(kkSocket.getInputStream()));
} catch( UnknownHostException uhe ){ /*...more error catching */ 
```

稍后，我们只是对服务器进行读写：

```
BufferedReader stdIn = new BufferedReader(new InputStreamReader(System.in));
String fromServer;
String fromUser;

while ((fromServer = in.readLine()) != null) {
  System.out.println("Server: " + fromServer);
  if (fromServer.equals("bye."))
      break;

  fromUser = stdIn.readLine();

  if (fromUser != null){
      System.out.println("Client: " + fromUser);
      out.println(fromUser);
  } 
```

而在[服务器](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/networking/sockets/examples/KnockKnockServer.java)上，我们有相应的代码，来获取笑话的妙语。

```
 KnockKnockProtocol kkp = new KnockKnockProtocol();

    outputLine = kkp.processInput(null);
    out.println(outputLine);

    while ((inputLine = in.readLine()) != null) {
         outputLine = kkp.processInput(inputLine);
         out.println(outputLine);
         if (outputLine.equals("Bye."))
            break; 
```

我想在整个事情上附加一个心跳，当它检测到对方死亡时，它将打印到控制台。因为如果我杀死对方现在会发生什么是一个例外 - 如下所示：

![在此处输入图像描述](../Images/c6a9b99605d359d4356376c309bc503d.png)

因此，如果我同时运行 KnockKnockClient 和 KnockKnockServer，那么我关闭了 KnockKnockServer，应该发生的是在客户端上我看到以下输出：

```
>The system has detected that KnockKnockServer was aborted 
```

我正在寻找任何提示。到目前为止，我主要是在尝试运行一个定期创建与另一端的新连接的守护线程。但是我对要检查的条件感到困惑（但我认为这只是一个`boolean`值？）。这是正确的方法吗？我刚在网上发现有一个名为[JGroups 的多播](http://www.jgroups.org/)网络库——那会是更好的方法吗？我正在寻找任何提示。

[到目前为止我的服务器代码](http://pastebin.com/cDYbgxCZ)（对不起，它很乱）

&

[客户端](http://pastebin.com/53vYaECK)

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-06T15:20:47.797

但是你得到的例外就是这个！它告诉你，对方刚刚死了。只需捕获异常并打印到控制台，即“系统检测到 KnockKnockServer 已中止”。

您正在使用 TCP 连接，并且 TCP 具有内置的心跳（keepalive）机制，可以为您执行此操作。只需在套接字上设置 setKeepAlive() 即可。话虽如此 - 可以控制每个连接的保活频率，但我不知道如何在 java 中做到这一点。

[http://tldp.org/HOWTO/TCP-Keepalive-HOWTO/overview.html](http://tldp.org/HOWTO/TCP-Keepalive-HOWTO/overview.html)

[https://stackoverflow.com/a/1480259/706650](https://stackoverflow.com/a/1480259/706650)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-25T04:46:39.437

你有一个同步通信。要获得心跳消息，请使用异步通信。会有2个线程。一个将从套接字读取，另一个将继续写入套接字。如果您使用异步通信，服务器将每 10 秒发送一次消息。客户端线程将从服务器读取消息，如果没有消息，则表示服务器已关闭。在您的情况下，服务器将消息发送回客户端（如果客户端有消息）或发送自动回复。您的服务器代码可以像这样修改。

1.  创建一个服务器线程，它将每 10 秒向客户端发送消息。

    ```
    public class receiver extends Thread{

      public static bool hearbeatmessage=true;

      Socket clientSocket=new Socket();
      PrintWriter out=new PrintWriter();
      public receiver(Socket clientsocket){
      clientSocket=clientsocket;
      out = new PrintWriter(clientSocket.getOutputStream(), true);
    }

      public void run(){

        while(true)
        {

          if(heartbeatmessage){
            thread.sleep(10000);
            out.println("heartbeat");

          }
        }            
      }
    } 
    ```

在您的服务器代码中：

```
KnockKnockProtocol kkp = new KnockKnockProtocol();

outputLine = kkp.processInput(null);
out.println(outputLine);
receiver r=new reciver(clientSocket);
r.run(); /*it will start sending hearbeat messages to clients */

while ((inputLine = in.readLine()) != null) {
     outputLine = kkp.processInput(inputLine);
     reciver.hearbeatMessage=false; /* since you are going to send a message to client now, sending the heartbeat message is not necessary */
     out.println(outputLine);
     reciver.hearbeatMessage=true; /*start the loop again*/
     if (outputLine.equals("Bye."))
        break; 
```

客户端代码也将被修改，线程将继续从套接字读取消息，如果超过 11 秒（额外 1 秒）没有收到消息，它将声明服务器不可用。

希望这可以帮助。逻辑上也可能存在一些缺陷。让我知道。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-08-11T17:26:30.677

以下是我们在与硬件接口（使用套接字）时日常应用的最佳实践。

# 好习惯1：SoTimeout

此属性启用读取超时。这样做的目的是避免汤姆遇到的问题。他在以下行中写道：“*您需要等到下一条客户端消息到达*”。好吧，这为该问题提供了解决方案。它也是**实现心跳和许多其他检查的关键**。

默认情况下，该`InputStream#read()`方法将永远等待，直到消息到达。改变了这种`setSoTimeout(int timeout)`行为。它现在将应用超时。当它超时时，它会抛出`SocketTimeoutException`. 只需捕获异常，检查几件事并继续阅读（重复）。所以基本上，你把你的阅读方法放在一个循环中（甚至可能放在一个专用线程中）。

```
// example: wait for 200 ms
connection.setSoTimeout(200); 
```

**您可以使用这些中断（由超时引起）来验证状态：**例如，自从我收到最后一条消息以来已经过了多长时间。

下面是一个实现循环的例子：

```
while (active)
{
  try
  {
    // some function that parses the message
    // this method uses the InputStream#read() method internally.
    code = readData();

    if (code == null) continue; 
    lastRead = System.currentTimeMillis();

    // the heartbeat message itself should be ignored, has no functional meaning.
    if (MSG_HEARTBEAT.equals(code)) continue;

    //TODO FORWARD MESSAGE TO ACTION LISTENERS

  }
  catch (SocketTimeoutException ste)
  {
    // in a typical situation the soTimeout should be about 200ms
    // the heartbeat interval is usually a couple of seconds.
    // and the heartbeat timeout interval a couple of seconds more.
    if ((heartbeatTimeoutInterval > 0) &&
        ((System.currentTimeMillis() - lastRead) > heartbeatTimeoutInterval))
    {
      // no reply to heartbeat received.
      // end the loop and perform a reconnect.
      break;
    }
    // simple read timeout
  }
} 
```

此超时的另一种用途：它可用于通过设置干净地停止会话`active = false`。使用超时检查此字段是否为`true`. 如果是这样，那么`break`循环。没有`SoTimeout`逻辑，这是不可能的。您将被迫执行`socket.close()`或等待下一条客户端消息（这显然没有意义）。

# 良好做法 2：内置 Keep-Alive

```
connection.setKeepAlive(true); 
```

好吧，基本上这就是你的心跳逻辑所做的。它会在一段时间不活动后自动发送信号并检查回复。但是，保持活动间隔取决于操作系统，并且有一些缺点。

# 良好做法 3：Tcp 无延迟

当您经常连接需要快速处理的小命令时，请使用以下设置。

```
try
{
  connection.setTcpNoDelay(true);
}
catch (SocketException e)
{
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-19T17:48:43.603

我认为你把事情复杂化了。

*从客户端：*
如果客户端得到一个`IOException`连接重置，那么这意味着服务器已经死了。一旦您知道服务器已关闭，只需执行您需要做的事情，而不是打印堆栈跟踪。您已经知道服务器由于异常而关闭。

*从服务器端：*
要么启动一个计时器，如果您在超过时间间隔的时间内没有收到请求，则假定客户端已关闭。
或者在客户端启动一个后台服务器线程（使客户端和服务器对等）并让服务器发送一个“虚拟”心跳请求（服务器现在充当客户端）。如果您遇到异常，则客户端已关闭。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-19T17:36:21.730

想我会对此有所了解...我从 Java 站点上的[KnockKnockServer](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/networking/sockets/examples/KnockKnockServer.java)和[KnockKnockClient](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/networking/sockets/examples/KnockKnockClient.java)开始（在您的原始问题中）。

我没有添加任何线程或心跳；我只是将 KnockKnockClient 更改为以下内容：

```
 try {    // added try-catch-finally block
      while ((fromServer = in.readLine()) != null) {
        System.out.println("Server: " + fromServer);
        if (fromServer.equals("Bye."))
          break;

        fromUser = stdIn.readLine();
        if (fromUser != null) {
          System.out.println("Client: " + fromUser);
          out.println(fromUser);
        }
      }
    } catch (java.net.SocketException e) {   // catch java.net.SocketException
      // print the message you were looking for
      System.out.println("The system has detected that KnockKnockServer was aborted");
    } finally {
      // this code will be executed if a different exception is thrown,
      // or if everything goes as planned (ensure no resource leaks)
      out.close();
      in.close();
      stdIn.close();
      kkSocket.close();
    } 
```

这似乎可以满足您的要求（即使我修改了原始 Java 网站示例，而不是您的代码 - 希望您能够看到它的插入位置）。我用您描述的情况对其进行了测试（在客户端连接时关闭服务器）。

这样做的缺点是，当客户端等待用户输入时，您看不到服务器已经死了；你必须输入客户端输入，*然后*你会看到服务器已经死了。如果这不是您想要的行为，请发表评论（也许这就是问题的全部重点 - 看起来您可能已经走了一条比您需要的更长的路才能到达您想去的地方）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-03T08:36:57.977

这里对客户端稍作修改。它不使用明确的心跳，但只要您继续从服务器读取，无论如何您都会立即检测到断开连接。

这是因为 readLine 会立即检测到任何读取错误。

```
// I'm using an anonymous class here, so we need 
// to have the reader final.
final BufferedReader reader = in;

// Decouple reads from user input using a separate thread:
new Thread()
{
   public void run()
   {
      try
      {
         String fromServer;
         while ((fromServer = reader.readLine()) != null)
         {
            System.out.println("Server: " + fromServer);
            if (fromServer.equals("Bye."))
            {
                System.exit(0);
            }
         }
      }
      catch (IOException e) {}

      // When we get an exception or readLine returns null, 
      // that will be because the server disconnected or 
      // because we did. The line-break makes output look better if we 
      // were in the middle of writing something.
      System.out.println("\nServer disconnected.");
      System.exit(0);
   }
}.start();

// Now we can just read from user input and send to server independently:
while (true)
{
   String fromUser = stdIn.readLine();
   if (fromUser != null)
   {
      System.out.println("Client: " + fromUser);
      out.println(fromUser);
   }
} 
```

在这种情况下，即使我们正在等待来自服务器的回复，我们也允许客户端写入。对于更稳定的应用程序，我们希望在等待回复时锁定输入，方法是添加一个控制何时开始读取的信号量。

这些是我们为控制输入所做的修改：

```
final BufferedReader reader = in;

// Set up a shared semaphore to control client input.
final Semaphore semaphore = new Semaphore(1);

// Remove the first permit.
semaphore.acquireUninterruptibly();

new Thread()

... code omitted ...

           System.out.println("Server: " + fromServer);
           // Release the current permit.
           semaphore.release();
           if (fromServer.equals("Bye."))

... code omitted ...

while (true)
{
    semaphore.acquireUninterruptibly();
    String fromUser = stdIn.readLine();

... rest of the code as in the original ... 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-04T14:26:56.733

我认为@Bala 的答案在服务器端是正确的。我想在客户端做一个补充。

在客户端，您应该：

1.  使用变量来保存来自服务器的最后一条消息的时间戳；
2.  启动一个定期运行的线程（例如每 1 秒）以比较当前时间戳和最后一条消息的时间戳，如果它长于所需的超时时间（例如 10 秒），则应报告断开连接。

以下是一些代码片段：

类`TimeoutChecker`（线程）：

```
static class TimeoutChecker implements Runnable {

    // timeout is set to 10 seconds
    final long    timeout = TimeUnit.SECONDS.toMillis(10);
    // note the use of volatile to make sure the update to this variable thread-safe
    volatile long lastMessageTimestamp;

    public TimeoutChecker(long ts) {
        this.lastMessageTimestamp = ts;
    }

    @Override
    public void run() {
        if ((System.currentTimeMillis() - lastMessageTimestamp) > timeout) {
            System.out.println("timeout!");
        }
    }
} 
```

`TimeoutChecker`建立连接后启动：

```
try {
  kkSocket = new Socket("localhost", 4444);
  // create TimeoutChecker with current timestamp.
  TimeoutChecker checker = new TimeoutChecker(System.currentTimeMillis());
  // schedule the task to run on every 1 second.
  ses.scheduleAtFixedRate(, 1, 1,
            TimeUnit.SECONDS);
  out = new PrintWriter(kkSocket.getOutputStream(), true);
  in = new BufferedReader(new InputStreamReader(kkSocket.getInputStream()));
} catch( UnknownHostException uhe ){ /*...more error catching */ 
```

这`ses`是一个`ScheduledExecutorService`：

```
ScheduledExecutorService ses = Executors.newScheduledThreadPool(1); 
```

并且记住在从服务器接收消息时更新时间戳：

```
BufferedReader stdIn = new BufferedReader(new InputStreamReader(System.in));
String fromServer;
String fromUser;

while ((fromServer = in.readLine()) != null) {
  // update the message timestamp
  checker.lastMessageTimestamp = System.currentTimeMillis();
  System.out.println("Server: " + fromServer);
  if (fromServer.equals("bye."))
    break; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-09T03:04:43.070

Adel，正在查看您的代码[http://pastebin.com/53vYaECK](http://pastebin.com/53vYaECK)

您可以尝试以下解决方案。不确定它是否会起作用。我们可以每次都创建一个 BufferedReader 实例，而不是使用输入流创建一次缓冲读取器。当 kkSocket.getInputStream 为 null 时，退出 while 循环并将 completeLoop 设置为 false，这样我们就退出了 while 循环。它有 2 个 while 循环，并且每次都会创建对象。如果连接打开但其中没有数据 inputstream 不会为空，则 BufferedReader.readLine 将为空。

```
bool completeLoop=true;
while(completeLoop) {

while((inputstream is=kkSocket.getInputStream())!=null) /*if this is null it means the socket is closed*/
{  
BufferedReader in = new BufferedReader( new InputStreamReader(is));
while ((fromServer = in.readLine()) != null) {
            System.out.println("Server: " + fromServer);
            if (fromServer.equals("Bye."))
                break;
            fromUser = stdIn.readLine();
        if (fromUser != null) {
                System.out.println("Client: " + fromUser);
                out.println(fromUser);
           }
        } 
}
completeLoop=false;
System.out.println('The connection is closed');
} 
```

# jquery - on() 无法按预期工作，并且不适用于新加载的内容

> ID：15604023
> 
> 赞同：1
> 
> 时间：2013-03-24T21:07:53.607
> 
> 标签：jquery, google-chrome-extension, dynamic-data, content-script

我的 chrome 扩展如下：

```
$(document).ready(function() {
    ...
    $("input[type!='password'], textarea").on("keypress", function (event) {
        ...
    });
}); 
```

这对正常加载的内容按预期反应，但不适用于稍后加载的输入或文本区域。

我虽然那是应该做的，但我用错了吗？

我玩过类似的东西试图解决它但没有成功

```
$(doocument).on("keypress", "input[type!='password'], textarea".... 
```

[这是 jsfiddle 中的一个实时示例](http://jsfiddle.net/yz7F5/3/)，第一个输入按预期工作，生成的则没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T21:23:04.400

```
$(document).on("keypress", "input[type!='password'], textarea", function (event) {
    alert("this works!");
}); 
```

侦听器被附加到`document`，并且任何按键事件都将与`input[type!='password']`和进行检查`textarea`。

如果您的 HTML 标记的结构方式是有一个 and 的父容器`input[type!='password']`，则`textarea`可以替换`$(document)`为`$('.parent-container')`仅在该元素上附加侦听器，而不是整个文档。

编辑：这是一个例子：http: [//jsfiddle.net/yz7F5/5/](http://jsfiddle.net/yz7F5/5/)

# c - 获取IP地址功能不正常

> ID：15604024
> 
> 赞同：-2
> 
> 时间：2013-03-24T21:08:00.747
> 
> 标签：c, sockets, ip

我正在尝试获取我的服务器的 IP 地址，但它得到的是 127.0.1.1 而不是 127.0.0.1。错误在哪里？另外，我怎样才能获得真实的 IP 地址，而不是本地主机地址。

```
#define MAXHOSTNAME 256
#define DEBUG

    char * getIPAddress()
    {
        char myname[ MAXHOSTNAME + 1 ];
        static char IPinASCII[ MAXHOSTNAME ];   /* Oversized */
        struct hostent * hp;

        memset( myname, 0, MAXHOSTNAME + 1 );   /* Init */
        memset( IPinASCII, 0, MAXHOSTNAME );

        gethostname( myname, MAXHOSTNAME );
    #ifdef DEBUG
        printf( "hostname is %s\n", myname );
    #endif /* DEBUG */

        hp = gethostbyname( myname );
        if( hp == NULL )
        {
            perror( "gethostbyname" );
            return( "IP not found" );
        }

        inet_ntop( hp->h_addrtype, hp->h_addr_list[ 0 ], IPinASCII,
            MAXHOSTNAME ) ;

    #ifdef DEBUG
        printf( "canonical hostname is %s at IP %s\n", hp->h_name, IPinASCII );
    #endif /* DEBUG */

        return( IPinASCII );
    } 
```

user@user-desktop:~/Desktop/My Code$ ./ipprint hostname is user-desktop canonical hostname is user-desktop at IP 127.0.1.1 127.0.1.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T21:09:40.063

这就是你的`/etc/hosts`指示。它很可能有类似的东西：

```
127.0.0.1       localhost
127.0.1.1       user-desktop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T21:09:22.670

它在`/etc/hosts`。这是一个默认条目，`gethostbyname()`也在那里。

# php - 在 Laravel 4 中更改邮件传输

> ID：15604027
> 
> 赞同：1
> 
> 时间：2013-03-24T21:08:38.590
> 
> 标签：php, ubuntu, laravel, swiftmailer, laravel-4

L4 似乎被硬编码为使用 Swiftmailer 的 SMTP。我们如何将传输类型更改为 sendmail？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:54:52.127

这不像换一个交通工具那么容易。正如您所说，传输是硬编码在 Illuminate\Mail\MailServiceProvider 中的。

你可能想用你自己的扩展 L4 Mail 实现，在你的 config/app.php Providers 数组中替换它：

*   将您的提供者数组替换为邮件提供者：

配置/app.php

```
...
'providers' => array(
'SendmailServiceProvider', 
```

*   将 sendmail 路径添加到二进制文件：

配置/邮件.php

```
'sendmail_path' => '/usr/bin/sendmail -bs', 
```

*   确保您的 composer.json 文件自动加载“来自应用程序/库的类映射：”

作曲家.json：

```
....    
"autoload": {
    "classmap": [
        "app/libraries",
.... 
```

*   添加您的 Sendmail 服务提供商：

应用程序/库/SendmailServiceProvider.php

```
<?php

use \Swift_Mailer;
use Illuminate\Support\ServiceProvider;
use Illuminate\Mail\Mailer as Mailer;
use Swift_SendmailTransport as SendmailTransport;

class SendmailServiceProvider extends ServiceProvider {

    /**
     * Indicates if loading of the provider is deferred.
     *
     * @var bool
     */
    protected $defer = true;

    /**
     * Register the service provider.
     *
     * @return void
     */
    public function register()
    {
        $this->registerSwiftMailer();

        $this->app['mailer'] = $this->app->share(function($app)
        {
            // Once we have create the mailer instance, we will set a container instance
            // on the mailer. This allows us to resolve mailer classes via containers
            // for maximum testability on said classes instead of passing Closures.
            $mailer = new Mailer($app['view'], $app['swift.mailer']);

            $mailer->setLogger($app['log']);

            $mailer->setContainer($app);

            $from = $app['config']['mail.from'];

            // If a "from" address is set, we will set it on the mailer so that all mail
            // messages sent by the applications will utilize the same "from" address
            // on each one, which makes the developer's life a lot more convenient.
            if (is_array($from) and isset($from['address']))
            {
                $mailer->alwaysFrom($from['address'], $from['name']);
            }

            return $mailer;
        });
    }

    /**
     * Register the Swift Mailer instance.
     *
     * @return void
     */
    protected function registerSwiftMailer()
    {
        $config = $this->app['config']['mail'];

        $this->registerSwiftTransport($config);

        // Once we have the transporter registered, we will register the actual Swift
        // mailer instance, passing in the transport instances, which allows us to
        // override this transporter instances during app start-up if necessary.
        $this->app['swift.mailer'] = $this->app->share(function($app)
        {
            return new Swift_Mailer($app['swift.transport']);
        });
    }

    /**
     * Register the Swift Transport instance.
     *
     * @param  array  $config
     * @return void
     */
    protected function registerSwiftTransport($config)
    {
        $this->app['swift.transport'] = $this->app->share(function($app) use ($config)
        {
            extract($config);

            // The Swift SMTP transport instance will allow us to use any SMTP backend
            // for delivering mail such as Sendgrid, Amazon SMS, or a custom server
            // a developer has available. We will just pass this configured host.
            $transport = SendmailTransport::newInstance($sendmail_path);

            // Once we have the transport we will check for the presence of a username
            // and password. If we have it we will set the credentials on the Swift
            // transporter instance so that we'll properly authenticate delivery.
            if (isset($username))
            {
                $transport->setUsername($username);

                $transport->setPassword($password);
            }

            return $transport;
        });
    }

    /**
     * Get the services provided by the provider.
     *
     * @return array
     */
    public function provides()
    {
        return array('mailer', 'swift.mailer', 'swift.transport');
    }

} 
```

没有真正测试过，但应该可以正常工作。试着把它放在 routes.php 中并玩一下：

```
Route::get('/', function()
{
    Mail::send('emails.auth.reminder', array('token' => '123456'), function($m)
    {
        $m->from('us@example.com', 'Laravel');

        $m->to('foo@example.com')->cc('bar@example.com');

    });
}); 
```

# mysql - 数据库计数和分组错误

> ID：15604029
> 
> 赞同：1
> 
> 时间：2013-03-24T21:08:41.057
> 
> 标签：mysql, sql, database, count, group-by

我对 SQL 很陌生，我正在努力练习以提高自己。

我有一个数据库，它有一个

表：球员、球队、比赛和胜利

玩家：pid、pname、年龄、国家

播放：pid, season, tid, value (pid -> pid in Players, tid -> tid in Teams )

团队：tid、tname、tcolor、tbudget

Wins : wtid, ltid, season, wcore, lscore ( wtid,ltid -> tid in Teams )

* * *

问题是`Find the name of the players whose played in atleast 2 dif. teams with same color`

我所做的是

```
SELECT DISTINCT P.pname 
FROM Players P
    ,Teams T1 
GROUP BY T1.tcolor
HAVING 1 < (
   SELECT COUNT (10)
   FROM Teams T2
   WHERE T1.tcolor=T2.tcolor) 
```

当我尝试查询这个时，我得到一个错误：

```
Error Code: 1630
FUNCTION PRALATEST.COUNT does not exist. Check the 'Function Name Parsing and Resolution' section in the Reference Manual 
```

我在哪一部分做错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T21:25:59.110

尝试这个：

```
select pname
from Players
join Plays on Plays.pid = Players.pid
join Teams on Teams.tid = Plays.tid
group by pname, tcolor
having count(Teams.tname) > 1 
```

该条件`count(Teams.tname) > 1`位于having子句而不是where子句中，因为它需要在执行group by之后对结果进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T21:27:34.273

夫妇的事情。`COUNT`您的错误消息是因为您在函数中放置了一个数字常量。您应该只使用星号。

`Players`此外，您还没有为您的和`Teams`表指定连接条件。结果，您正在执行产品连接（可能不是您想要的）。我猜你需要加入你的`Plays`桌子。

您应该更改您的编码实践以使用“显式”连接语法以避免将来出现此类错误。

# c - 传递给函数时，链表的头部发生变化

> ID：15604032
> 
> 赞同：0
> 
> 时间：2013-03-24T21:08:45.397
> 
> 标签：c, linked-list, pass-by-reference

我写了一个简单的程序，包括链表。当我尝试在它创建的函数中显示链表时，它工作正常；但是，当我返回 main 并尝试显示它时，它无法正常工作。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <iostream>

#define LEN 20 
struct Node {
char word[LEN];
int count;
Node * next;
};

Node* build_linked_list (char array[][LEN], int N);
Node* make_ordered_copy (Node * head);
void print_list(Node * head);

int main()
{
#define NUMBER 10
char array[NUMBER][LEN]; // array which the words will be recorded
int N=6;
for(int a=0; a<N; ++a) strcpy(array[a], "test");
print_list(build_linked_list(array, N));
getchar();
return 0;
}

Node* build_linked_list (char array[][LEN], int N)
{
  Node ndArray[N];
  Node *head, *newnode;

  head = &ndArray[0];
  strcpy(head->word, array[0]); // writing the first element to the head
  head->count = 0;
  head->next = NULL;

  for(int a=1; a<N; ++a) // writing the elements in a linked list 
  {
    newnode = &ndArray[a];
    strcpy(newnode->word, array[a]); 
    newnode->count = 0;
    newnode->next = head; // first location now becomes second location
    head = newnode;
  }  

  print_list(head);
  printf("Previous values were shown in build_linked_list\n");

  return head;
}

void print_list(Node* head)
{
 Node* traverse;
 traverse = head;

 while(traverse) // while traverse is not NULL
 {
   printf("\"%s\" with the frequency of %d\n", traverse->word, traverse->count);
   traverse = traverse->next;
 }

 return;
} 
```

在从 main 调用的 print_list 函数中调试时，“traverse->word”首先显示正确的值，但它不能正确打印它，然后它会更改为另一个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:17:06.757

的元素`ndArray`仅在 的范围内有效`build_linked_list`。一旦程序存在该函数，对这些元素的任何访问都会产生未定义的行为。您正在使用这些元素构建您的链表。相反，您需要在堆上为链表的节点分配内存，或者您需要将`ndArray`变量移动到文件范围，以便它在`main`方法的生命周期内存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T21:29:37.173

你在里面`build_linked_list`声明

```
Node ndArray[N]; 
```

这是您在该函数中填充的节点。但是当执行结束时，`build_linked_list`函数块`ndArray`被释放，因此返回的指针指向先前分配的内存，`ndArray`但现在不再被该数组占用。

链表的通常实现是使用堆和动态内存分配完成的。在构建 Node 数组时，您应该编写：

```
Node* ndArray = new ndArray[N]; 
```

但是在这一点上，我强烈建议您阅读有关垃圾收集器以及如何正确管理动态内存的信息，因为这是一个全新的话题，已经在 StackOverflow 上反复讨论过。

对于这个答案，我只是希望您在使用`new`or进行分配时`new[]`（对于`malloc`并查看 C 参考），您也应该分别使用or`free`进行删除。在这种情况下，当你完成一个链表或者你应该写：`delete``delete[]``ndArray`

```
delete[] ndArray; 
```

释放内存。否则你会有内存泄漏。

# php - PHP url 参数并返回调用页面

> ID：15604036
> 
> 赞同：0
> 
> 时间：2013-03-24T21:09:10.270
> 
> 标签：php

我的 php 脚本应该下载一个 .zip 文件，并增加一个计数器。在下面的代码中，在 URL 上传入的参数没有被识别，所以下载文件的行没有做任何事情，如果文件下载不起作用，计数将无限循环，增加计数。我的提供商使用的是 PHP V5.2。

我希望传递的参数能够工作，但我可以在标签中硬编码“myapp.zip”。

完成工作后，我需要返回调用 count.php 的页面。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<?php
//$Down=$_GET['Down'];
$Down=$_Post['Down'];
echo "File:" . $Down;?>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

  <meta content="en-us" http-equiv="Content-Language" />
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
  <!--meta http-equiv="refresh" content="0;url=<?php echo $Down;?>"/-->
  <meta http-equiv="refresh" content="0;url=MyApp.zip"/>
</head>
<body>
  <?php
   $filePath = 'count.txt';
   // If file exists, read current count from it, otherwise, initialize it to 0
   $count = file_exists($filePath) ? file_get_contents($filePath) : 0;
   // Increment the count and overwrite the file, writing the new value<br />
   file_put_contents($filePath, ++$count);
   // Display current download count
   //echo "Downloads:" . $count;
   //header("Location: $r.htm");
?>
</body>
</html> 
```

它是从 r.htm 调用的，如下所示：

```
<form method="post" action="count.php?Down=myapp.zip" style="text-align: center">
<input type="submit" value="Download MyApp">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T21:45:30.607

给你（测试）

**计数.php**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<?php

if(isset($_POST['down'])){
$down = 'myapp.zip';
}

echo "File: <a href='$down'>$down</a>";

if(!isset($_POST['down'])){
die('NO ACCESS');

// or give them a link to go to the form and click on the button
//die('<a href="formdown.htm">Use the form to download</a>');
}

?>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>

  <meta content="en-us" http-equiv="Content-Language" />
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
  <!--meta http-equiv="refresh" content="0;url=<?php echo $Down;?>"/-->

</head>
<body>
  <?php
   $filePath = 'count.txt';
   // If file exists, read current count from it, otherwise, initialize it to 0
   $count = file_exists($filePath) ? file_get_contents($filePath) : 0;
   // Increment the count and overwrite the file, writing the new value<br />
   file_put_contents($filePath, ++$count);
   // Display current download count
   //echo "Downloads:" . $count;
   //header("Location: $r.htm");
?>
</body>
</html> 
```

**形式：**

```
<form method="post" action="count.php" style="text-align: center">
<input type="hidden" name="down" value="$file" />
<input type="submit" value="Download MyApp" />
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:04:41.230

这个版本的 Mike，如果用户单击下载按钮，计数器会增加，这将立即提示用户保存文件（在他们计算机上的某个位置）。

**计数.php**

```
<?php

if(isset($_POST['down'])){

$filePath = 'count.txt';
   $count = file_exists($filePath) ? file_get_contents($filePath) : 0;
   // Increment the count and overwrite the file, writing the new value<br />
   file_put_contents($filePath, ++$count);

header("Cache-Control: public");
header("Content-Description: File Transfer");
header("Content-Disposition: attachment; filename=myapp.zip");
header("Content-Type: application/zip");
header("Content-Transfer-Encoding: binary");

readfile("myapp.zip");
}

if(!isset($_POST['down'])){
//die('NO ACCESS');

die('<a href="form.htm">Use the form to download</a>');
}

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
<head>

</head>

<body>

</body>
</html> 
```

**表格：**

```
<!DOCTYPE html>
<head>

</head>

<body>

<form method="post" action="count.php" style="text-align: center">
<input type="hidden" name="down" value="file" />
<input type="submit" value="Download MyApp" />
</form>

</body>

</html> 
```

# python - 删除 Python 列表中几乎重复的元素，同时保留变量

> ID：15604040
> 
> 赞同：0
> 
> 时间：2013-03-24T21:09:19.077
> 
> 标签：python, list

我有一个列表，其中包含几乎重复的元素，但标识该元素的数字除外。我想删除所有重复项，同时保留包含重复项的第一个元素的编号。

例如，我想替换`l`为`lnew`：

```
l = ['iter1apple','iter2banana','iter3carrot','iter4apple','iter5orange','iter6banana','iter7mango']

lnew = ['iter1apple','iter2banana','iter3carrot','iter5orange','iter7mango'] 
```

我猜这与从列表元素的其余部分拆分数字、将列表转换为设置并`defaultdict`与拆分中的元素一起使用有关，但我不知道如何。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T21:30:09.357

如果我对您的理解正确，您想丢弃以一个已包含在列表中的元素结尾的项目。在这种情况下，您可以使用正则表达式和列表来跟踪已使用的元素：

```
import re

l = ['iter1apple', 'iter2banana', 'iter3carrot', 'iter4apple', 'iter5orange', 'iter6banana', 'iter7mango']
duplicates = []
lnew = []
for item in l:
    match = re.match("^iter\d+(\w+)$", item)
    if match and not match.group(1) in duplicates:
        duplicates.append(match.group(1))
        lnew.append(item)

# lnew = ['iter1apple','iter2banana','iter3carrot','iter5orange','iter7mango'] 
```

# python - 使用正则表达式重新实现函数

> ID：15604043
> 
> 赞同：0
> 
> 时间：2013-03-24T21:09:38.440
> 
> 标签：python, regex, windows, algorithm

的目的`version_from_path(path)`是返回 Python 安装的版本号，给定 Windows 系统上该安装的默认命名和目标根目录的绝对路径（例如`'C:\PythonXX'`）。

```
def version_from_path(path):
    return "%s.%s" % (path[-2:-1], path[-1:]) 
```

举个例子...

```
print(version_from_path('C:\Python27'))
print(version_from_path('C:\Python32'))
print(version_from_path('C:\Python33')) 
```

...产生...

```
2.7
3.2
3.3 
```

我目前正在使用切片表示法和格式化操作来实现所需的结果，但是我很想看看如何使用正则表达式实现相同的功能。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:16:14.910

```
import re

regex = re.compile( r"C:\\Python(\d)(\d)" )

def version_from_path_re(path):
  m = regex.match( path )
  if m:
    return ".".join( map( str, m.groups() ) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T21:20:25.003

你可以这样做：

```
return re.sub(r".*?(\d)(\d)", r"\1.\2", path) 
```

如果要捕获所有尾随数字并将点放在最后一个之前：

```
return re.sub(r".*?(\d*?)(\d)$", r"\1.\2", path) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T22:32:58.210

版本号可以在[sys.version_info](http://docs.python.org/2/library/sys.html#sys.version_info)中轻松且详细地获得。

```
>>> import sys
>>> sys.version_info
sys.version_info(major=2, minor=7, micro=3, releaselevel='final', serial=0) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T10:54:50.417

您可以在文件中搜索，而不是依赖文件夹名称本身`include/patchlevel.h`：

```
def version_from_path(path):
    with open(path + '/include/patchlevel.h') as f:
        m = re.search(r'#define\s+PY_VERSION\s+"(\d+\.\d+)', f.read())
        if m:
            return m.group(1) 
```

# javascript - jquery 这个上下文

> ID：15604049
> 
> 赞同：1
> 
> 时间：2013-03-24T21:10:12.503
> 
> 标签：javascript, jquery

假设我有两个这样的 div：

```
<div class="myDiv">
    <textarea class="info_box" attribute="first" rows="4" cols="40">Enter text here...</textarea>
    <button class="submit_btn">Click me!</button>
</div>

<div class="myDiv">
    <textarea class="info_box" attribute="second" rows="4" cols="40">Enter text here...</textarea>
    <button class="submit_btn">Click me!</button>
</div> 
```

当我单击按钮“submit_btn”时，我希望能够在每个 div 中获取 textarea。我试过这样的事情：

```
$('body').delegate('.myDiv .submit_btn', 'click', function(){
    var myTextarea = $('.info_box', this);
}); 
```

但这返回未定义

请提供任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T21:11:35.370

你可以这样做 ：

```
$('body').delegate('.myDiv .submit_btn', 'click', function(){
    var myTextarea = $(this).closest('myDiv').find('.info_box');
}); 
```

另一个解决方案：

```
$('body').delegate('.myDiv .submit_btn', 'click', function(){
    var myTextarea = $(this).siblings('.info_box');
}); 
```

请注意，如果您的 jQuery 版本比 1.7 更新，最好`on`使用`delegate`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T21:12:00.187

那是因为`this`被限定在`.myDiv .submit_btn`里面，textarea 不存在。也许尝试`this.parentNode`作为范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T21:16:45.507

所以如果你想得到textarea，为什么不简单地这样做

```
$('.submit_btn').on('click',function(){
     var myTextarea= $(this).siblings(".info_box");
}); 
```

[小提琴](http://jsfiddle.net/wef44/)

# java - 无法让 Matcher.replaceAll 正常工作

> ID：15604050
> 
> 赞同：1
> 
> 时间：2013-03-24T21:10:13.520
> 
> 标签：java, regex

我在替换模式时遇到了一些奇怪的问题。

我有这两种模式：

```
private static final Pattern CODE_ANY = Pattern.compile("&[0-9a-fk-or]");
private static final Pattern CODE_BLACK = Pattern.compile(ChatColour.BLACK.toString()); 
```

ChatColour.BLACK.toString() 返回“&0”

接下来，我有这个代码：

```
public static String Strip(String message)
{
    while (true)
    {
        Matcher matcher = CODE_ANY.matcher(message);
        if (!matcher.matches())
            break;
        message = matcher.replaceAll("");
    }
    return message;
} 
```

我尝试了几种不同的方法，但没有任何东西被替换。最初的版本只是一个接一个地调用每个 CODE_xxx 模式，但用户通过加倍使用 & 符号来绕过它。

我只是不明白为什么这没有删除任何东西。我知道它肯定会被调用，因为我已将调试消息打印到控制台以进行检查。

// 莫顿

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T21:18:02.713

[`matches()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#matches%28%29)检查完整的输入字符串是否与模式*匹配*，而[`find()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29)检查模式是否可以在输入字符串的某处*找到。*因此，我会将您的方法重写为：

```
public static String strip(String message) // lowercase strip due to Java naming conventions
{
    Matcher matcher = CODE_ANY.matcher(message);
    if (matcher.find())
        message = matcher.replaceAll("");
    return message;
} 
```

* * *

刚刚意识到，这可以用一个衬垫来完成：

```
public static String strip(String message) {
    return message.replaceAll("&[0-9a-fk-or]", "");
} 
```

使用该[`replaceAll()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)方法您不需要预编译模式，但您可以将正则表达式提取到 String 类型的最终字段。

# xcode - 正确组织 Plist 中的数据

> ID：15604052
> 
> 赞同：0
> 
> 时间：2013-03-24T21:10:24.470
> 
> 标签：xcode, dictionary, plist

我的智慧到此为止，请帮助我你们美丽的人！

我的难题是这样的：

我有一份 100 种药物的清单。每个都有一个名称，每个都有一个与之关联的 URL，每个都在 1-8 的部分中。我需要在表格视图中创建药物名称列表。选择特定药物时，需要将药物名称，其部分及其URL传递给另一个视图控制器。

我知道如何实现所有 gubbins 以传递给另一个控制器、设置表格视图等和部分。

有任何想法吗？在过去的 7 个小时里，我一直在处理字典、数组和对象。我想如果我不尽快整理它，我可能会哭！

非常感谢，

露西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:36:29.137

这是如何做到的：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
   <dict>
     <key>name</key><string>Drug name</string>
     <key>url</key> <string>http://www.urltodrug.com/Drug%20name</string>
     <key>section</key> <integer>5</integer>
   </dict>
</array>
</plist> 
```

只需添加更多`<dict>`s 即可完成。

将所有内容放入数组中：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"Drugs" ofType:@"plist"]; 
self.dataArray = [NSArray arrayWithContentsOfFile:path]; 
```

要按部分和药物名称对数组进行排序：

```
NSArray *sortedArray = [self.dataArray sortedArrayUsingSortDescriptors:@[
    [NSSortDescriptor sortDescriptorWithKey:@"section" ascending:YES],
    [NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES]
]]; 
```

要减少数组以仅显示名称：

```
NSArray *namesArray = [sortedArray valueForKeyPath:@"name"]; 
```

欢迎使用`NSDictionary`“键值编码”的力量！

要在单元格中显示名称：

```
NSDictionary *dataDict = [self.dataArray objectAtIndex:indexPath.row];
cell.textLabel.text = [dataDict objectForKey:@"name"]; 
```

# linux - LXC - Cgroup 内存控制器：缺失

> ID：15604055
> 
> 赞同：6
> 
> 时间：2013-03-24T21:10:47.187
> 
> 标签：linux, kernel, debian, lxc

我正在尝试在我的 Debian 6 上安装 LXC（0.7.4.1），但是当我运行 lxc-checkconfig 时，我得到“Cgroup 内存控制器：丢失”

```
root@lxcsrv01:~# lxc-checkconfig
Kernel config /proc/config.gz not found, looking in other places...
Found kernel config file /boot/config-2.6.32-5-686
--- Namespaces ---
Namespaces: enabled
Utsname namespace: enabled
Ipc namespace: enabled
Pid namespace: enabled
User namespace: enabled
Network namespace: enabled
Multiple /dev/pts instances: enabled

--- Control groups ---
Cgroup: enabled
Cgroup namespace: enabled
Cgroup device: enabled
Cgroup sched: enabled
Cgroup cpu account: enabled
Cgroup memory controller: missing
Cgroup cpuset: enabled

--- Misc ---
Veth pair device: enabled
Macvlan: enabled
Vlan: enabled
File capabilities: enabled
enabled

Note : Before booting a new kernel, you can check its configuration
usage : CONFIG=/path/to/config /usr/bin/lxc-checkconfig 
```

根据谷歌搜索我需要重新编译我的内核，但我不知道如何。有人可以解释我该怎么做吗？

此致

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T07:35:00.597

The kernel of Debian 6 has no memory cgroup feature. However you can run lxc without it.

If you NEED memory cgroup, it's easy to install the new kernel from [backports](http://backports-master.debian.org/Instructions/).

1.  Add apt-line of backports
2.  Run "apt-get install linux-image-3.2.0-0.bpo.4-amd64" (or -686 for i386)
3.  Add a kernel boot option "cgroup_enable=memory" to your bootloader setting (e.g. /etc/default/grub) to enable it.
4.  reboot

Or, if you'd like to re-compile the kernel, you can use kernel-package system of Debian; [http://newbiedoc.sourceforge.net/system/kernel-pkg.html](http://newbiedoc.sourceforge.net/system/kernel-pkg.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-14T21:16:28.750

我有类似的内存 cgroup 问题，并且已经研究了很多。我写了一篇关于这里的博客文章：

[http://blog.raymond.burkholder.net/index.php?/archives/639-Debian-Stretch-LXC-Memory-Controller.html](http://blog.raymond.burkholder.net/index.php?/archives/639-Debian-Stretch-LXC-Memory-Controller.html)

总之，内核是在必要的内存 cgroup 支持下编译的。美中不足： *lxc-checkconfig*有一个 bug，不能正​​确显示内存 cgroup 的状态。 `CONFIG_CGROUP_MEM_RES_CTLR=y`仅适用于较旧的内核（我相信在 3.6 之前的某个时间）。

我最终做了两个调整：一个调整到`/boot/config-$version`，一个调整到`/etc/default/grub`。两者都在文章中进行了解释。

但归根结底，一般建议似乎是：如果您确实不需要对容器执行内存限制管理，请不要启用它。有一些性能和内存开销。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-11T16:08:16.983

[从这里](http://linuxg.net/how-to-install-kernel-3-10-on-ubuntu-linux-mint-debian-and-derivates/)更新内核。

然后重新启动系统。这个问题会自动解决，但如果没有，请转到`/boot/config-<versionnumber>-generic`. 例如：`/boot/config-3.11.0-13-generic`

在这里看看是否`CONFIG_CGROUP_MEM_RES_CTLR=y`可用。如果“是”，则可以，否则将其粘贴。

# joomla - Joomla 2.5 有多少可能的类别

> ID：15604056
> 
> 赞同：0
> 
> 时间：2013-03-24T21:10:52.210
> 
> 标签：joomla, categories, max

我用谷歌搜索，但只能找到最大数量的文章的答案。

**问题：简短版本：**

Joomla 2.5 可以在共享主机上处理多少个可能的类别（带有子类别）。我必须期待哪些问题？

**问题：长版本：**

我正在为建筑师建立一个网站。内容结构如下所示

```
HOUSES
    Architect A
      Project 1
      Project 2
      ...

    Architect B
      Project 1
      Project 2
      ...

Places
    Architect C
      Project 1
      Project 2
      ...

    Architect D
      Project 1
      Project 2
      ... 
```

等等。最明显的是将房屋和地点作为类别。Architect A, Architect B ...作为子类别，项目作为文章。一方面，这将保留使用 Joomlas 博客视图等的能力，而不使用第三方 CCK 扩展，但另一方面，这可能会导致 300 多个类别。

感谢您一直以来的出色投入，

托尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T21:16:28.897

唯一的限制是理论上的，很大程度上取决于您的托管环境。只要知道添加的越多，加载类别数据所需的内存就越多，并且可能会使用户界面复杂化，具体取决于一次可见的数量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T23:10:41.393

您正在根据`#__categories`表格查看 2147483647 个可能的类别。

在 Joomla！2.5 对 Categories 表的定义你会发现：

```
CREATE TABLE `#__categories` (
  `id` int(11) NOT NULL auto_increment,
  `asset_id`

  <snip ... >

  `language` char(7) NOT NULL,
  PRIMARY KEY  (`id`),
  KEY `cat_idx` (`extension`,`published`,`access`),
  KEY `idx_access` (`access`),
  KEY `idx_checkout` (`checked_out`),
  KEY `idx_path` (`path`),
  KEY `idx_left_right` (`lft`,`rgt`),
  KEY `idx_alias` (`alias`),
  INDEX `idx_language` (`language`)
)  DEFAULT CHARSET=utf8; 
```

正如您所看到的，主键被定义为一个`int`，因此[MySQL 上的最大值`INT`（2147483647）](http://dev.mysql.com/doc/refman/5.0/en/integer-types.html)和默认起点 1 导致超过 21 亿个类别。看到这个[*关于 MySQL 上的 AUTO_INCREMENT 的*注意事项*](http://dev.mysql.com/doc/refman/5.0/en/create-table.html)

> **笔记**
> 
> 每个表只能有一个`AUTO_INCREMENT`列，它必须被索引，并且不能有`DEFAULT`值。一个`AUTO_INCREMENT`列只有在它只包含正值时才能正常工作。插入一个负数被认为是插入一个非常大的正数。这样做是为了避免数字从正数“环绕”到负数时出现精度问题，并确保您不会意外获得`AUTO_INCREMENT`包含`0`.

在共享主机上，您将在达到主键的此限制之前很久就用完数据库空间`#__categories`- 类别表中的其余记录指定的空间比主键使用的空间多约 1300 倍。（*大致*）

因此，您更有可能让正常内容影响托管限制，而不仅仅是类别表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-20T20:00:43.553

查看在我的测试站点中完成的一些测量（J2.5.x，未使用 J3.x 进行测试，但应该相同）：

每个脚本执行的常见 PHP 内存限制为 40MB（服务器默认）

您可以期望使用大约 800 个类别来击中它，从而得到内存耗尽的致命错误（权限检查将占用 26MB 将剩余内存留给其他东西......）

那是在创建类别树并检查权限的地方，例如 Joomla 文章表格

注意：如果您是超级管理员，则类别权限检查不会占用任何内存

注意：内存限制为 128MB，您最多可以拥有（大约）3500 个类别

此外，如果有 5000+ 或 10000+ 个类别，您会开始遇到一些中小型性能问题，但这确实是太多类别

# ruby-on-rails-3 - 错误“...无法加载此类文件 -- mysql2/2.0/mysql2 (LoadError)”。在带有 Ruby 2.0.0 的 Windows XP 上

> ID：15604058
> 
> 赞同：11
> 
> 时间：2013-03-24T21:11:06.400
> 
> 标签：ruby-on-rails-3, mysql2, ruby-2.0

该命令`rails server`引发此错误。

```
C:/Ruby200/lib/ruby/gems/2.0.0/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/mysql2.rb:2:in `require': cannot load
 such file -- mysql2/2.0/mysql2 (LoadError) 
```

我在 Windows XP 机器上使用来自[RubyInstaller的](http://rubyinstaller.org/)**Ruby 2.0.0 。**

我想出了问题所在，但我不知道如何解决。问题是gem中没有任何`2.0/`目录。`mysql2-0.3.11-x86-mingw32`这是从**Gemfile**`rails`作为其依赖项安装的 gem ：

 **```
GEM
  remote: https://rubygems.org/
  specs:
     ... many gems here
     mysql2 (0.3.11-x86-mingw32)
     ... many gems here
DEPENDENCIES
  ...
  mysql2
  ... 
```

这是该`mysql2.rb`文件中的内容：

```
# C:\Ruby200\lib\ruby\gems\2.0.0\gems\mysql2-0.3.11-x86-mingw32\lib\mysql2\mysql2.rb

RUBY_VERSION =~ /(\d+.\d+)/
require "mysql2/#{$1}/mysql2"  # <<-- this is that #2 line that throws an error 
```

很明显，它采用当前的 Ruby 版本号并将其用作到达某个`mysql2`文件的路径段。其实就是`mysql2.so`文件。当我使用**Ruby 2.0.0**时，路径段是`2.0`：

```
mysql2/2.0/mysql2 
```

好的，现在让我们看看`mysql2-0.3.11-x86-mingw32`gem 的目录是怎样的：

```
dir: C:\Ruby200\lib\ruby\gems\2.0.0\gems\mysql2-0.3.11-x86-mingw32\lib\mysql2\ 
```

![在此处输入图像描述](../Images/a4e115d41183228b6b14d47ec8a5ade9.png)

没有任何`2.0/`目录。

我知道有关**libmysql.dll**的问题。我在我的`C:\Ruby200\bin`. 它没有帮助。

我从 RubyInstaller 的创建者那里读到了这个答案[https://stackoverflow.com/a/5368767/1114926 。](https://stackoverflow.com/a/5368767/1114926)我试过但没有帮助。它适用，`Ruby 1.9.3`因为有`1.9/`目录。但它不适用于`Ruby 2.0.0`.

如何解决？

* * *

**更新 1：**

谢谢你的[回答](https://stackoverflow.com/a/15613521/1114926)。我试过了。不幸的是我有`ERROR: Failed to build gem native extension.`错误：

```
C:\>gem install mysql2 --platform=ruby
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
ERROR:  Error installing mysql2:
        ERROR: Failed to build gem native extension.

    C:/Ruby200/bin/ruby.exe extconf.rb
checking for rb_thread_blocking_region()... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of necessary
libraries and/or headers.  Check the mkmf.log file for more details.  You may
need configuration options.

Provided configuration options:
        --with-opt-dir
        --without-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=C:/Ruby200/bin/ruby
C:/Ruby200/lib/ruby/2.0.0/mkmf.rb:431:in `try_do': The compiler failed to generate an executable file. (Runtim
eError)
You have to install development tools first.
... other code follows here... 
```

它说：

> 您必须先安装开发工具。

但是我已经安装了完整的 DevKit，RubyInstaller 安装了它。无法理解它还需要什么。

我已经在`mysql2`GitHub 页面[https://github.com/brianmario/mysql2/issues/364](https://github.com/brianmario/mysql2/issues/364)上发布了一个问题。还没有答案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-06T17:28:21.577

在带有 Ruby 2.0.0 和 DevKit 4.7 的 Windows 7 x64 上遇到了完全相同的问题。

以下步骤帮助了我。

1.  > 宝石卸载mysql2

2.  [从http://cdn.mysql.com/Downloads/Connector-C/mysql-connector-c-noinstall-6.0.2-win32.zip](http://cdn.mysql.com/Downloads/Connector-C/mysql-connector-c-noinstall-6.0.2-win32.zip)下载最后一个 MySQL 连接器

3.  将其解压缩到**C:\connector-6.0.2**

4.  > gem install mysql2 --platform=ruby -- '--with-mysql-lib="C:\connector-6.0.2\lib" --with-mysql-include="C:\connector-6.0.2\include " --with-mysql-dir="C:\connector-6.0.2"'

甚至更短：

> gem install mysql2 --platform=ruby --with-opt-dir="C:\connector-6.0.2"

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T11:13:45.390

uninstall `mysql2-0.3.11-x86-mingw32`，之前编译的 gem`Ruby200`将不起作用。你必须自己编译它。如果您运行`gem uninstall mysql2`并且列出了未编译的版本，那么只需卸载`mysql2-0.3.11-x86-mingw32`- 其他编译版本...

安装 `gem install mysql2 --platform=ruby`。那行得通。

按照本指南安装 devkit [http://rubyonwindowsguides.github.com/book/ch02-04.html](http://rubyonwindowsguides.github.com/book/ch02-04.html)。

然后再试一次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T11:52:20.317

我几乎完成了@odiszapc 所描述的相同操作。卸载旧gem，下载mysql-connector-c-noinstall，解压，但最后我用这个命令构建原生gem：

```
gem install mysql2 --platform=ruby -- --with-opt-dir=/c/connector-6.0.2 
```

（如果你使用 git-bash 那么你可以使用 unix 风格的目录语法。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-19T23:04:04.600

从该链接复制粘贴：[https](https://github.com/brianmario/mysql2/issues/359) ://github.com/brianmario/mysql2/issues/359 。它对我有用。

* * *

如果在安装 gem 之后，你会得到一个错误：

> “找不到指定的模块
> 。C:/Devel/Ruby200/lib/ruby/gems/2.0.0/gems/mysql2-0.3.11/lib/mysql2/mysql2.so”

这可以通过复制`libmysql.dll`到 Ruby 的 bin 文件夹来解决。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-27T08:06:46.060

当我尝试在 Windows XP 上安装 Redmine 时，行为完全相同

*   当我尝试执行“rake generate_secret_token”时，我得到“无法加载此类文件——mysql2/2.0/mysql2 (LoadError)”
*   当我尝试使用 --platform=ruby 重新构建 mysql2 时，我得到了和你一样的绿色消息。

目前，我被困在那里......但如果有人有什么可以让我继续前进，那将是非常受欢迎的。我也会随时通知

安托万**

# c - 无法使用 MinGW 在开源项目中链接 Psapi.h

> ID：15604059
> 
> 赞同：2
> 
> 时间：2013-03-24T21:11:09.463
> 
> 标签：c, linker, makefile, mingw, configure

我正在尝试将源代码修改为使用 mingw 的 Windows 上的开源应用程序。

我在链接 psapi 库时遇到问题。

psapi.h 和 libpsapi.a 在 mingw 目录中，我已经使用标准对其进行了测试

`gcc -o program program.c -lpsapi`

方法，并且有效。

但是，当我尝试使用

```
./configure
make 
```

方法，我试过了，不行

```
./configure LDFLAGS=-lpsapi
make 
```

那是行不通的

我尝试进入 makefile.am 并将 -lpsapi 放入 AM_LDFLAGS 但这不起作用

它给出的错误只是一个标准的“对[函数]的未定义引用”，这意味着带有函数的库没有链接

我什至尝试将 psapi.h 放在源目录中并将其包含在内，但`#include "psapi.h"`仍然无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:20:24.707

LDFLAGS 是错误的。LIBS=-lpsapi 应该可以解决问题。

顺序对于链接器很重要。库（LIBS）必须在对象之后，LDFLAGS 可以在之前。

# jquery - Google Maps v3 处理点击 InfoWindow 内的元素

> ID：15604066
> 
> 赞同：2
> 
> 时间：2013-03-24T21:12:08.320
> 
> 标签：jquery, google-maps, events, google-maps-api-3

简而言之，我试图完成的工作：

*   地图上的单个信息窗口，因为有很多标记
*   附加到标记的 InfoWindow 内容
*   InfoWindow 在标记单击时打开 => 附加属性中的内容
*   InfoWindow 包含 2 个按钮 => 设置*开始*，设置*目标*
*   如果设置了*起点*和*目标*，则计算路线

我尝试了很多，很难将处理程序附加到 InfoWindow 内的按钮。我发现的最好的提示是这个：[Adding event to element inside Google Maps API InfoWindow](https://stackoverflow.com/questions/6378007/adding-event-to-element-inside-google-maps-api-infowindow)

到目前为止我试过这个：

```
<script>
function initialize() {
    var mapOptions = {
        center: new google.maps.LatLng(50.903033, 11.359863),
        zoom: 6,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        disableDefaultUI: true,
        zoomControl: true,
        scaleControl: true,
        overviewMapControl: true
    };
    var map = new google.maps.Map(document.getElementById('limousine-map'),
        mapOptions);
    var directionsService = new google.maps.DirectionsService();
    var directionDisplay = new google.maps.DirectionsRenderer();
    directionDisplay.setMap(map);
    directionDisplay.setPanel(document.getElementById('route-details'));
    var infoWindow = new google.maps.InfoWindow();
    var endPoint = false;
    var startPoint = false;

var marker = new google.maps.Marker({
    map: map,
    position: new google.maps.LatLng(50.903033, 11.359863),
    title: 'Test1'
});
marker.infoWindowContent = [
    '<div id="infoWindow"><strong>Test</strong>',
    '<button class="button" id="selectStart">Start</button>'+
    '<button class="button" id="selectTarget" style="float: right;">Target</button></div>'
].join('<br>');

google.maps.event.addListener(marker,'click',function(){
    infoWindow.close();
    infoWindow = new google.maps.InfoWindow({
        content: this.infoWindowContent
    });
    infoWindow.open(map,this);
    clickedLocation = this;
    google.maps.event.addListener(infoWindow, 'domready', function() {
        $('#infoWindow button').on('click',function(){
            console.log(clickedLocation);
            if($(this).attr('id') == 'selectStart'){
                startPoint = clickedLocation;
            }
            if($(this).attr('id') == 'selectTarget'){
                endPoint = clickedLocation;
            }
            recalcRoute();
        });
    });
});

var marker2 = new google.maps.Marker({
    map: map,
    position: new google.maps.LatLng(52.903033, 12.359863),
    title: 'Test2'
});
marker2.infoWindowContent = [
    '<div id="infoWindow"><strong>Test2</strong>',
    '<button class="button" id="selectStart">Start</button>'+
            '<button class="button" id="selectTarget" style="float: right;">Target</button></div>'
].join('<br>');

google.maps.event.addListener(marker2,'click',function(){
    infoWindow.close();
    infoWindow = new google.maps.InfoWindow({
        content: this.infoWindowContent
    });
    infoWindow.open(map,this);
    clickedLocation = this;
});

//Route painting
function recalcRoute(){
    if(startPoint != false && endPoint != false){
        var request = {
            origin: startPoint,
            destination: endPoint,
            travelMode: google.maps.TravelMode.DRIVING,
            unitSystem: google.maps.UnitSystem.METRIC
        };
        directionsService.route(request, function(response, status){
            if(status == google.maps.DirectionsStatus.OK){
                $('#route-details').parent().fadeIn();
                directionDisplay.setDirections(response);
            }
        });
    }else{
        directionDisplay.setDirections(null);
    }
}

}
google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

我让处理程序工作，但是路线计算不起作用。我收到一个错误，例如

```
Uncaught Error: Invalid value for property <origin>: [object Object] 
thrown at line: directionsService.route(request, function(response, status){ 
```

如何将事件绑定到 InfoWindow 内的按钮并仍然调用 recalcRoute？我也尝试`onclick`在按钮上进行设置，但对 recalcRoute 的引用是未知的。

为什么`$('#infoWindow button').on('click',function(){ console.log('test'); });`不工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:01:37.897

1.  要从 HTML 单击侦听器访问变量，它们需要位于全局上下文中。
2.  路线服务的起点和终点必须是 google.maps.LatLng 对象或可作为地址进行地理编码的字符串，而不是 google.maps.Marker 对象。标记的 google.maps.LatLng 可以通过以下方式检索：

    标记.getPosition()。

[工作示例](http://www.geocodezip.com/v3_simplemap_marker2markerdirections.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T01:31:58.287

您应该能够建立 contentWindow 的 HTML 并单击一次操作，然后一遍又一遍地使用它们。

contentWindow 中唯一需要更改的是标题，以反映单击标记的标题。

这样的事情应该这样做：

```
function initialize() {
    var mapOptions = {
        center: new google.maps.LatLng(50.903033, 11.359863),
        zoom: 6,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        disableDefaultUI: true,
        zoomControl: true,
        scaleControl: true,
        overviewMapControl: true
    };
    var map = new google.maps.Map(document.getElementById('limousine-map'), mapOptions);
    var directionsService = new google.maps.DirectionsService();
    var directionDisplay = new google.maps.DirectionsRenderer();
    directionDisplay.setMap(map);
    directionDisplay.setPanel(document.getElementById('route-details'));

    var Route = {
        var request = {
            origin: null,
            destination: null,
            travelMode: google.maps.TravelMode.DRIVING,
            unitSystem: google.maps.UnitSystem.METRIC
        };
        this.setOrigin = function(m) { request.origin = m.getPosition(); };
        this.setDestination = function(m) { request.destination = m.getPosition(); };
        this.calc = function() {
            if(request.origin && request.destination) {
                directionsService.route(request, function(response, status) {
                    if(status == google.maps.DirectionsStatus.OK) {
                        $('#route-details').parent().fadeIn();
                        directionDisplay.setDirections(response);
                    }
                });
            } else {
                directionDisplay.setDirections(null);
            }
        }
    };

    var route = new Route();
    var clickedLocation;

    var $infoWindowContent = $([
        '<div class="infoWindowContent">',
        '<h3></h3>',
        '<button class="setOrigin">Start</button>',
        '<button class="setDestination" style="float: right;">Target</button>',
        '</div>'
    ].join(''));
    $infoWindowContent.find(".setOrigin").on('click', function() {
        route.setOrigin(clickedLocation);
        route.calc();
    });
    $infoWindowContent.find(".setDestination").on('click', function() {
        route.setDestination(clickedLocation);
        route.calc();
    });

    var infoWindow = new google.maps.InfoWindow();
    infoWindow.setContent($infoWindowContent.get(0));

    //Assuming array markerData to contain the data necessary for bujilding markers ...
    $.each(markerData, function(i, m) {
        var marker = new google.maps.Marker({
            map: map,
            position: new google.maps.LatLng(m.lat, m.lng),
            title: m.title
        });

        google.maps.event.addListener(marker, 'click', function() {
            clickedLocation = this;
            infoWindow.close();//necessary?
            $infoWindowContent.find("h3").text(this.getTitle());
            infoWindow.open(map, this);
        });
    });

}
google.maps.event.addDomListener(window, 'load', initialize); 
```

*未经测试*

笔记：

*   我用`Route()`一个实例将与路由有关的所有内容都包含在构造函数中`route`。
*   我假设所有标记数据最初都包含在一个`markerData`数组中，该数组被循环以根据需要创建尽可能多的标记。

# android - 我无法通过通知栏进入应用程序

> ID：15604070
> 
> 赞同：1
> 
> 时间：2013-03-24T21:12:28.470
> 
> 标签：android, android-notifications, android-notification-bar

我有一个正在倒计时的应用程序。我想在时间到的时候在通知栏中收到通知。

我已经这样做了：

```
Intent intent = new Intent();
PendingIntent pIntent = PendingIntent.getActivity(this, 0, intent, 0);
Notification noti = new Notification.Builder(this).setTicker("Ticker Title").setContentTitle("Content Title").setContentText("Notification content.").setSmallIcon(R.drawable.iconnotif).setContentIntent(pIntent).getNotification();
noti.flags=Notification.FLAG_AUTO_CANCEL;
NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
notificationManager.notify(uniqueID, noti); 
```

当我尝试通过单击通知进入应用程序时出现问题。显示通知时，我单击它，但它什么也没做。

如何解决这个问题呢？感谢帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T21:37:40.617

您的通知有一个 PendingIntent。这用于定义单击通知的行为。待处理的意图也有一个意图，这个意图包含有关要启动的应用程序的信息，或者一般来说，单击通知后要做什么。

但是，在您的示例中，待定意图中包含的意图是：

```
// Empty intent, not doing anything
Intent intent = new Intent(); 
```

例如，您的意图没有定义要做什么。将您的意图更改为以下内容：

```
// New Intent with ACTION_VIEW: 
Intent intent = new Intent(Intent.ACTION_VIEW);

// Activity to launch
intent.setClassName("your.package.name", "ActivityToLaunch");

// Intent Flags
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

# android - Android自定义对话框Textview和背景颜色

> ID：15604076
> 
> 赞同：3
> 
> 时间：2013-03-24T21:12:44.250
> 
> 标签：android, text, colors, dialog

我有一个自定义 DialogPreference 对话框，其布局设置在 relativelayout 中，其中包含以下内容：

*   复选框
*   文本视图
*   文本域

这在 Android 4.0+ 中很好，因为我们使用的主题是 Theme.Light，所以对话框的背景颜色是白色，而 Checkbox 标签和 textview 的默认文本是黑色。但是，在 2.3.3 中，背景颜色是深灰色，因此很难看到文字……但是主题仍然是 Theme.Light。

我认为为此需要制作一个自定义对话框，因为复选框启用/禁用文本字段。目前，我正在将此对话框的相对布局的背景颜色设置为白色......但我不太喜欢这种解决方案，因为可能存在 2.3.3 上的某些其他手机可能没有白色作为默认对话框的情况背景...

有没有更干净的方法来解决这个问题？

我注意到这个人有同样的问题：[Custom Support Dialog Fragment text is wrong color](https://stackoverflow.com/questions/15065049/custom-support-dialog-fragment-text-is-the-wrong-color)

另一个问题：[Android：从 Theme.Light 活动中显示对话框的问题](https://stackoverflow.com/questions/7771230/android-issue-with-showing-dialog-from-theme-light-activity)

编辑：附上截图。这是运行 2.3.3 的 LG Optimus 2X 上的样子。在我同事的运行 2.3.3 的三星 Galaxy 上，背景更暗，所以你几乎看不到文字。

![在此处输入图像描述](../Images/a6a04e8e937ed7369c45aa9dcf4cd75f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-01T09:05:18.567

您可以在样式文件中制作自定义对话框主题，例如：

```
less than API 11:

<style name="MyDialogTheme" parent="android:Theme.Light" >

API 11 and forward:

<style name="MyDialogTheme" parent="android:Theme.Holo.Dialog" > 
```

然后在片段对话框中使用“MyDialogTheme”：

```
... ...
ContextThemeWrapper context = new ContextThemeWrapper(getActivity(), R.style.MyDialogTheme);
AlertDialog.Builder builder = new AlertDialog.Builder(context);
... ... 
```

希望这有帮助。

# sql - 为什么 like 运算符不起作用 - Sqlite

> ID：15604080
> 
> 赞同：-1
> 
> 时间：2013-03-24T21:13:26.783
> 
> 标签：sql, database, sqlite

我有这个查询，它会从 base 中返回一个搜索，操作为 Like '%srch'

```
 srch=search.getText().toString();
...
db.rawQuery("SELECT  * FROM MyTable WHERE Name LIKE 'srch%' or Name LIKE '%srch' ",null); 
```

但它不起作用。

你能解释一下为什么它不起作用，我该如何解决？

多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:59:32.280

您可以通过如下更改来修复查询：

```
db.rawQuery("SELECT * FROM MyTable WHERE Name LIKE ?",
            new String[] { "%" + srch + "%" }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T21:27:32.040

你为什么不只使用一个 LIKE

```
 db.rawQuery("SELECT  * FROM MyTable WHERE Name LIKE '%'" + srch + "'%' ",null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T08:26:04.543

我找到了我就是这样做的解决方案

```
db.rawQuery("SELECT  * FROM MyTable WHERE name LIKE '%"+srch+"%'",null); 
```

没关系，谢谢大家的帮助

# java - GWT：如何在两个模块之间共享一个 java 对象（即：EventBus）

> ID：15604082
> 
> 赞同：0
> 
> 时间：2013-03-24T21:13:29.177
> 
> 标签：java, javascript, gwt, jsni, event-bus

我正在构建一个大型应用程序，我想将其拆分为几个模块，例如用于初始化的核心模块、用户管理等……、客户模块、生产模块等……</p>

我想将它拆分为多个 GWT 模块（不使用 GWT 拆分技术）并共享一个 EventBus 来广播一些事件，例如 LoginEvent、LogoutEvent。我不想使用代码拆分技术，因为我想减少编译时间并只重新编译我修改过的模块。这还允许通过注释 HTML 主机页面中的脚本标记来启用或禁用模块。

我使用 JSNI 编写了以下代码：

```
CoreModule’s EntryPoint:

private static SimpleEventBus eventBus = null;

public void onModuleLoad() {
    export();
    getEventBus().addHandler(MyEvent.TYPE, new MyEventHandler() {

        @Override
        public void onEvent(MyEvent myEvent) {
            Window.alert(myEvent.getMessage());
        }
    });
}

public static SimpleEventBus getEventBus() {
    if (eventBus == null)
        eventBus = new SimpleEventBus();
    return eventBus;
}

public static native void export() /*-{
    $wnd.getEventBus = $entry(@testExporter.client.TestExporter::getEventBus());
}-*/;

CustomerModule’s EntryPoint:

public void onModuleLoad() {
    Button button = new Button("Click me");
    button.addClickHandler(new ClickHandler() {

        @Override
        public void onClick(ClickEvent event) {
            getEventBus().fireEvent(new MyEvent("Button clicked !"));
        }
    });
    RootPanel.get().add(button);
}

public static native SimpleEventBus getEventBus() /*-{
    // Create a useless eventBus because the GWT compiler make a call to a null instance
    var eventBus = @com.google.gwt.event.shared.SimpleEventBus::new()();
    eventBus = $wnd.getEventBus();
    return eventBus;
}-*/; 
```

但是在浏览器中执行时，我在 Firebug 中有以下异常：

```
uncaugth exception [object Object] 
```

我还复制了实现/接口客户事件的 MyEvent 和 MyEventHandler 类。

PS：我也知道包含注释其他模块引用以避免编译它的技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:39:20.187

一个更简单的答案是不使用多个入口点。

===========================================

如果您要实现的目标是将代码分解为可管理的单元，但希望在同一页面中使用所有单元，您可以：

*   创建一个带有入口点的“Application.gwt.xml”模块（如果我理解正确，相当于您的初始化模块）
*   **创建没有**入口点类的“UserManagement.gwt.xml”模块
*   **创建没有**入口点的其他 XXX 模块

要创建没有入口点的模块，只需删除

```
<entry-point class='xxx'/> 
```

从您的 gwt.xml 文件中，“应用程序”文件除外

然后，您需要使用将这些模块包含到“应用程序”模块中

```
<inherits name="com.yourpackage.Module1Name" />
<inherits name="com.yourpackage.Module2Name" /> 
```

然后，您需要在一个 GWT 构建中为模块“com.yourpackage.Application”编译所有这些。

当您这样做时，请确保所有模块的已编译 *.class 和源 .java 文件都在类路径中可用。

您的“应用程序”入口点只需要初始化和使用来自其他模块的对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T07:29:57.987

您不能在不同的 GWT 编译模块之间共享代码，除非您通过 jsni 使代码的某些部分可用并通过 jsni 调用这些导出的方法，就像您在查询中尝试一样。

但请注意：首先，共享类将不兼容，因为每次编译都会以不同的方式重命名类/方法，其次，每次编译都会删除不同的死代码片段。

因此，在您的情况下`SimpleEventBus`，您的导出方法中返回的`window.getEventBus`内容在其他模块中是未知的，尽管其他模块也在`SimpleEventBus`使用

做你想做的最简单的方法是使用[GWT-exporter](http://code.google.com/p/gwt-exporter/)。首先在每个模块中正确选择要导出的js-api，如何命名，`Exportable`方便的实现和注释方法。其次考虑您将使用哪些对象进行通信，因为其中一些可能不兼容。我会使用 GWT-exporter 支持的原始类型、javascript 对象和函数

我认为使用 GWT-exporter，对于共享类，如果您在相同的命名空间中注释它们并导出相同的方法，希望您可以在所有模块中使用 then，但我不确定。

因此，通过 jsni 或 gwt-exporter 导出一个 js API，并在它们之间传输纯原始或 js 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T13:39:58.440

您可以使用框架并通过 WebMessage 协议设置模块之间的通信。只有在一页中的模块和分开的战争中的模块才会有帮助。

# r - 编写一个用户函数来返回每个变量的列位置、列名、模式和类

> ID：15604085
> 
> 赞同：3
> 
> 时间：2013-03-24T21:13:37.363
> 
> 标签：r, class, dataframe, mode

我需要编写一个用户定义的函数，当应用于数据框时，它将返回每个变量的列位置、列名、模式和类。我可以创建一个返回模式和类的，但是当我包含位置/名称时，我不断收到错误。我一直在做这个，

```
myFunction <- function(x) { 
    data.frame(mode(x), class(x))
  }
data.frame(names(myData), myFunction(myData)) 
```

它返回正确的信息，但它不会将它组合成我需要的单个函数。有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T21:18:02.547

您可以按如下方式组合它：

```
myFunction <- function(x)
   data.frame(mode(x), class(x), cname=names(x), cpos=1:ncol(x)) 
```

# mysql - MVC4、SimpleMembershipProvider、MySql 和 FluentNhibernate

> ID：15604087
> 
> 赞同：0
> 
> 时间：2013-03-24T21:14:00.087
> 
> 标签：mysql, nhibernate, asp.net-mvc-4, fluent-nhibernate, simplemembership

我正在尝试将 SimpleMembership 与 MySql 一起使用，但我无法让它工作。我为 MySql 下载了最新的 devart 连接器并按照说明进行操作

[http://www.devart.com/dotconnect/mysql/articles/extendedmembership-tutorial.html](http://www.devart.com/dotconnect/mysql/articles/extendedmembership-tutorial.html)

问题是 devart 提供的 WebSecurity 类只有 InitializeDatabaseConnection 方法，但它错过了 WebMatrix.WebData 的其余方法。（即 UserExists()、CreateAccount() 等）

有谁知道 WebSecurity 替代 WebMatrix.WebData 的任何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:36:09.657

我们在 Devart.Common.Web.WebSecurity 类中实现了 InitializeDatabaseConnection 方法，因为没有办法覆盖 WebMatrix.WebData.WebSecurity 类的对应方法。

我们的实现支持 WebMatrix.WebData.WebSecurity 类的其他方法，并且可以与 Devart 的 SimpleMembership 提供程序一起使用。

# java - Java Mutator：初始化与传递参数

> ID：15604091
> 
> 赞同：1
> 
> 时间：2013-03-24T21:14:14.303
> 
> 标签：java, mutators

我有这个 java mutator setBoard，

```
public void setBoard(Cell[] board){
        for(int i=0; i < board.length; i++)
            this.board[i] = new Cell(0, "E");   
        makeChutes(numChutes);
        makeLadders(numLadders);
} 
```

makeChutes 和 makeLadders 是与 setBoard 属于同一类的方法。他们将滑槽和梯子放置在整个棋盘的随机位置。numChutes 和 numLadders 来自此类的构造函数。

我的理解是我创建了一个突变器，它首先设置一个空白板，然后放置一些滑槽和梯子。但是我的教授说 setBoard 方法不应该初始化板，它应该设置传递给参数的内容。我不确定这意味着什么。

单元格是以下对象，

```
public class Cell{

private String type;
private int space;

public Cell(){
}

public Cell(int m, String r){
    this.space = m;
    this.type = r;
}
public void setType(String r){
    this.type = r;
}
public void setSpace(int m){
    this.space = m;
}
public boolean isChute(){
    return type.equals("C");
}
public boolean isLadder(){
    return type.equals("L");
}
public boolean isEmpty(){
    return !type.equals("C") && !type.equals("L");
}
public String toString(){
    return this.type + Math.abs(this.space);

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T21:21:47.257

在这种情况下，初始化是指将类的某些内部状态设置为某些默认值。通常，初始化是内部逻辑，即

1.  不作为公共的、可调用的方法公开
2.  不需要提供数据即可完成

这些是*一般*规则。另一方面，Mutators 通常是可调用的方法，它们将类的内部状态设置为与当前状态不同的状态。要设置的数据作为参数传递给方法。Java 中的 Mutators 是接受单个参数并遵循命名模式的方法`setXXX`，其中 XXX 是在类中被更改的属性的名称。该方法的单个参数应该与被变异的属性具有相同的类型。所以在你的例子中：

```
public void setBoard(Cell[] board){
    // ...
} 
```

`setBoard``board`是类型的 属性 的 mutator `Cell[]`。实现很可能只是用`board`传入的值替换当前值，例如：

```
public void setBoard(Cell[] board) {
    this.board = board;
} 
```

# iphone - 纬度/经度距离计算

> ID：15604093
> 
> 赞同：5
> 
> 时间：2013-03-24T21:14:43.243
> 
> 标签：iphone, gps, distance, latitude-longitude

关于纬度/经度计算的快速问题。

我想取一个值集，例如 Lat: 55.123456 Long -6.123456 并计算出任意距离的四个点。

![在此处输入图像描述](../Images/07e3576ca718a004d00c9874372d81a7.png)

作为给定的正方形，我想计算出左侧和右侧的纬度值。因此，红线距离起点 1.5 公里。同样对于经度，蓝线将距离起点 1.5 公里。输出将是 4 个点，所有距离以公里为单位。

简而言之：纬度 + Y = X 公里以外的纬度值

目前使用 iPhone 进行非常粗略的数据库计算。

编辑：澄清一下，距离太短以至于曲率（因此准确性）不是问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T21:53:00.247

在 OBJ-C 中，这应该是一个不错的解决方案：

```
float r_earth = 6378 * 1000; //Work in meters for everything
float dy = 3000; //A point 3km away
float dx = 3000; //A point 3km away
float new_latitude  = latitude  + (dy / r_earth) * (180 / M_PI);
float new_longitude = longitude + (dx / r_earth) * (180 / M_PI) / cos(latitude * 180/M_PI); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T21:39:08.837

好吧，对于距离相对较小（小于 100 公里）的粗略计算，您可以假设每个纬度有 40_000_000/360=111 111 米，每经度有 111 111*cos(latitude) 米。这是因为一米被定义为巴黎子午线的 1/40_000_000 部分；）。

否则，您应该使用很大的圆距，如评论中所述。为了获得高精度，您还需要考虑到地球是略呈扁球形而不是球体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T23:53:50.563

```
// parameter: offset in meters
float offsetM = 1500; // 1.5km

// degrees / earth circumfence
float degreesPerMeter = 360.0 / 40 000 000;
float toRad = 180 / M_PI;

float latOffsetMeters = offsetM * degreesPerMeter;
float lonOffsetMeters = offsetM * degreesPerMeter * cos (centerLatitude * toRad); 
```

现在只需将 +/- latOffsetMeters 和 +/- lonOffsetMeters 添加到您的 centerLatitude/centerLongitude。

公式可用于数百公里。

# javascript - Backbone.Marionette - 收藏不知何故“缺少”一些元素

> ID：15604094
> 
> 赞同：2
> 
> 时间：2013-03-24T21:14:55.343
> 
> 标签：javascript, backbone.js, marionette

我遇到了这个让我发疯的问题。我有一个实体集合，命名实体接收 A 和 B 对象。下面的代码虽然看起来很简单，但不能像 (I) 预期的那样工作。不知何故，没有添加最后一个添加到实体集合中的对象。事实上，如果我在得到 1、2、3、4、5、5 而不是预期的 1、2、3、4、5、6 之前和之后打印长度。A 和 B 是实体的“子类”这是一个模型，因为 A 和 B 都有对应的视图。最后，我期待 6 个可见对象，但我只得到 5 个。有没有人知道问题可能是什么？提前致谢。

```
var that = this;
_.each( this.as.models, function( a, i ){
      that.entities.add( a );
});
_.each( this.bs.models, function( b, j ){
    that.entities.add( b );
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T21:44:52.793

当您将对象或 Backbone 模型添加到 Backbone 集合时，会检查该对象是否已存在于集合中。如果插入现有对象，则不会更改任何内容，不会触发任何事件，依此类推。通过相等或匹配`id`属性，一个对象被认为是相同的。

有一种方法可以通过将`{merge: true}`选项传递给方法来覆盖它`add`。

# ios - 突然“物体的潜在泄漏”

> ID：15604099
> 
> 赞同：0
> 
> 时间：2013-03-24T21:15:30.933
> 
> 标签：ios, xcode, textview, release, memory-leaks

我一直在使用 xcode 在这里构建和做各种事情。它从不抱怨“泄漏问题”。自从我尝试插入 ShareKit 以来，它才刚刚开始。

所以.. 我删除了 ShareKit 的所有痕迹，出现了 11 个“对象的潜在泄漏”条目。

这是一个使用 textView 发生的示例：

文件.h

```
#import <UIKit/UIKit.h>
#import "iAd/iAd.h"
#import "Oracao.h"
#import <QuartzCore/QuartzCore.h>

@interface DetalhesOracaoViewController : UIViewController{
    Cclass *cclass;
}

@property (nonatomic, retain) Cclass *cclass;
@property (nonatomic, retain) IBOutlet UITextView *tWeekDay;

@end 
```

文件.m

```
...
@synthesize tWeekDay;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    self.tWeekDay.text = [NSString stringWithFormat:@"%d° day - %@", cclass.dia, cclass.dia_semana];
}

#pragma mark dealloc
-(void)dealloc {
    [tWeekDay release];
    [super dealloc];
} 
```

关于可以做什么的任何想法？谢谢！

编辑：

这是另一个我无法理解的泄漏：

![第二次潜在泄漏](../Images/08a9fa8256a78f09254ca07a41c22808.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:21:39.970

我认为您保留`UITextView`首先使用的分配`alloc`，比`addSubview`，比`retain`。在创建代码时共享代码可能更确定。

所以你应该平衡这个

尝试 ：

```
@property (nonatomic, assign) IBOutlet UITextView *tWeekDay; 
```

或添加

```
-(void)dealloc {
[tWeekDay removeFromSuperview];
[tWeekDay release];
[super dealloc]; 
```

}

# php - php - array_fill 负索引

> ID：15604101
> 
> 赞同：6
> 
> 时间：2013-03-24T21:15:52.493
> 
> 标签：php

使用`php` [array_fill](http://php.net/manual/en/function.array-fill.php)和负索引时，为什么`php`只填充第一个负索引然后跳转到0。

例如：

`array_fill(-4,4,10)`应该填写`-4, -3, -2, -1`，`0`但确实如此`-4, 0, 1, 2, 3`

该手册确实说明了这种行为，但没有说明原因。

谁能说这是为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T21:28:17.083

查看 PHP 的源代码，我可以确切地看到他们这样做的原因！

他们所做的是在数组中创建第一个条目。在 PHP 中，它看起来像：

```
$a = array(-4 => 10); 
```

然后，他们像这样添加每个新条目：

```
$count--;
while ($count--) {
  $a[] = 10;
} 
```

如果你自己做同样的事情，你会看到完全相同的行为。一个超短的 PHP 脚本演示了这一点：

```
<?php
    $a = array(-4 => "Apple");
    $a[] = "Banana";
    print_r($a);
?> 
```

结果：`Array ( [-4] => Apple [0] => Banana )`

**注意** 是的，我确实放入了 PHP 而不是他们使用的 C 源代码，因为 PHP 程序员比原始源代码更能理解这一点。然而，它的效果大致相同，因为它们使用 PHP 函数来生成结果......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T21:18:10.733

也许是因为它在文档中说明：[http ://www.php.net/manual/en/function.array-fill.php](http://www.php.net/manual/en/function.array-fill.php)

> 如果 start_index 为负数，则返回数组的第一个索引将为 start_index 并且以下索引将从零开始（参见示例）。

# c# - 该字符串未被识别为有效的日期时间。从索引 26 开始有一个未知单词

> ID：15604105
> 
> 赞同：1
> 
> 时间：2013-03-24T21:16:19.140
> 
> 标签：c#, asp.net, linq-to-xml

我正在处理来自 RSS 的 XML 提要，我正在考虑按发布日期和时间对提要进行排序。由于采用不同的 RSS 提要，它们具有不同的数据和时间格式。

例如

```
Sat, 23 Mar 2013 23:19:54 GMT
Sat, 23 Mar 2013 23:19:54 EDT
Sat, 23 Mar 2013 23:19:54 -0400 
```

我想在当地时间转换它们，然后对它们进行排序。

```
 var rssFeed = from el in doc.Elements("rss").Elements("channel").Elements("item")
  select new
  {
       Title = el.Element("title").Value,
       Link = el.Element("link").Value,
       Description = el.Element("description").Value,
       PubDate = DateTime.Parse(el.Element("pubDate").Value, null,
                        DateTimeStyles.None)            
  }; 
```

请让我知道如何进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T21:22:31.083

可能是您的`DateTime`字符串格式不正确，无法解析。

改用这个：

```
DateTime.ParseExact(el.Element("pubDate").Value,
                                  "ddd, dd MM yyyy HH:mm:ss",null); 
```

并传递您的适当格式以获取您的日期。

你最终将不得不摆脱那个 TimeZone 部分。

[在此处](https://stackoverflow.com/questions/10699440/removing-timezone-for-datetime-parseexact)和[此处](https://stackoverflow.com/questions/1527706/how-do-i-format-datetime-or-timezone-timezoneinfo-to-display-three-letters)阅读有关此内容的更多信息

# matlab - 矩阵维度不匹配错误

> ID：15604116
> 
> 赞同：0
> 
> 时间：2013-03-24T21:17:21.307
> 
> 标签：matlab, curve-fitting

我正在尝试对包含 200 个表示测量的样本点的矢量数据进行建模。我想查看“拟合优度”，在阅读后我发现这可以通过预测下一组值来完成（尽管如果这是正确的方法）。我被困在这个问题上，因为下面的代码给出了一个错误，我无法解决它。有人可以帮忙解决这个错误吗

```
Error using  * 
Inner matrix dimensions must agree.

Error in data_predict (line 27)
    ypred(j) = ar_coeff' * y{i}(j-1:-1:j-p); 
```

另外，有人可以告诉我如何做同样的事情，即使用非线性 AR 建模、移动平均和 ARMA 获取系数，因为使用命令 nlarx() 没有返回任何模型系数？ **代码**

```
if ~iscell(y); y = {y}; end
model = ar(y, 2, 'yw');

%prediction
yresiduals=[];
nsegments=length(y);

ar_coeffs = model.a;
ar_coeff=[ar_coeffs(2) ar_coeffs(3)]
for i=1:nsegments
  pred = zeros(length(y{i}),1);
  for j=p+1:length(y{i})
    ypred(j) = ar_coeff(:)' * y{i}(j-1:-1:j-p);
  end
  yresiduals = [yresiduals; y{i}(p+1:end) - ypred(p+1:end)];
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T00:20:46.593

在matlab中，`*`是两个矩阵之间的矩阵乘积。这意味着第一个矩阵中的列数必须等于第二个矩阵中的行数。您可能打算使用`.*`逐个元素的乘法。编辑：对于逐个元素的乘法，矩阵必须是相同的大小。检查矩阵的大小。如果它们不符合这些条件中的任何一个，则需要进行更改。

# java - 迭代器的摊销复杂度

> ID：15604120
> 
> 赞同：1
> 
> 时间：2013-03-24T21:17:29.557
> 
> 标签：java, iterator, complexity-theory

我需要在 Java 中为平衡树实现迭代器函数，例如 AVL 树，其摊销复杂度为 O(1+log(N/M))，但不确定这意味着什么？任何链接或解释都会非常有帮助..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T21:37:17.250

这意味着对于迭代器的`next()`方法的每次连续调用，该方法调用的复杂性都会降低。对于具有 N 个节点的树，第一次调用的复杂度应该是 O(log(N))，接下来的调用应该有 O(log(N/2))，等等。要真正理解复杂性，你应该有一些背景知识数学和计算机科学。[在这里](http://en.wikipedia.org/wiki/Time_complexity)阅读一个简短而模棱两可的解释。为了更深入地理解这个主题，你应该从 Corman 的[算法简介开始](http://books.google.co.il/books/about/Introduction_To_Algorithms.html?id=NLngYyWFl_YC&redir_esc=y)

# sql - SQL Server Express 中的动态字段

> ID：15604121
> 
> 赞同：0
> 
> 时间：2013-03-24T21:17:48.660
> 
> 标签：sql, asp.net-mvc-4, sql-server-express

所以我发现自己需要在我的表中有一个字段，该字段是另一个表中所有“商店”的计数。因此，该表应包含 Centre_Name、Location 和 Shop_Count。我已经创建了表格，那么如何添加这样的字段呢？

当在另一个表中添加或删除商店时，该字段也应该明显更新。此外，每个商店都有一个对应的 Centre_Name。

该表位于 SQL Server Express 数据库中，链接到我在 Visual Studio 中的 MVC 4 项目。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T21:22:17.427

这是非常繁重的非规范化，但您可以创建一个函数来获取计数，然后将该函数用作计算列的一部分。请参阅：[定义计算列引用另一个表](https://stackoverflow.com/questions/9696687/define-a-computed-column-reference-another-table)

所以你想做：

```
CREATE FUNCTION dbo.CountShops (@Centre_Name VARCHAR[x])
RETURNS INT 
AS BEGIN
    DECLARE @ShopCount INT

    SELECT @ShopCount = COUNT(*) FROM dbo.Shops WHERE Centre_Name = @Centre_Name

    RETURN @ShopCount
END 
```

然后将其称为您的专栏的一部分：

```
ALTER TABLE dbo.Shops
ADD Shop_Count AS dbo.CountShops(Centre_Name) 
```

...这是假设 Centre_Name 是您计算商店的定义属性。你用什么来计算商店？如果它只是计算商店表中的行数，您可以删除参数并执行以下操作：

```
CREATE FUNCTION dbo.CountShops ()
    RETURNS INT 
    AS BEGIN
        DECLARE @ShopCount INT

        SELECT @ShopCount = COUNT(*) FROM dbo.Shops

        RETURN @ShopCount
    END 
```

更多关于计算列[的信息](http://msdn.microsoft.com/en-us/library/ms191250(v=sql.105).aspx)。

# jquery - jquery删除表行

> ID：15604122
> 
> 赞同：23
> 
> 时间：2013-03-24T21:17:53.023
> 
> 标签：jquery

我有一张桌子

```
<table id="favoriteFoodTable">
    <th>
        Food Name:
    </th>
    <th>
        Restaurant Name:
    </th>
    <th>

    </th>
    <?php while ($row = $foods->fetch()) {
        ?>
        <tr>
            <td>
                <?php echo $row['foodName']; ?>
            </td>
            <td>
                <?php echo $row['restaurantName']; ?>
            </td>
            <td>
                <a class="deleteLink" href="" >delete</a>
            </td>
        </tr>
    <?php } ?>
</table> 
```

我使用这个 jquery 函数，所以当用户点击删除时，行的背景会改变，然后行会被删除

```
$(document).ready(function() {
    $("#favoriteFoodTable .deleteLink").on("click",function() {
        var td = $(this).parent();
        var tr = td.parent();
        //change the background color to red before removing
        tr.css("background-color","#FF3700");

        tr.fadeOut(400, function(){
            tr.remove();
        });
    });
}); 
```

只是背景在改变，但行没有被删除，为什么？怎么解决？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-03-24T21:21:12.613

该行已被删除，但由于单击会使您跟随链接，因此在刷新页面时会立即恢复。

在回调的末尾添加`return false;`或以防止默认行为：[`event.preventDefault();`](http://api.jquery.com/event.preventdefault/)

```
$(document).ready(function() {
    $("#favoriteFoodTable .deleteLink").on("click",function() {
        var tr = $(this).closest('tr');
        tr.css("background-color","#FF3700");
        tr.fadeOut(400, function(){
            tr.remove();
        });
        return false;
    });
}); 
```

[示范](http://jsbin.com/umomoz/2/edit)

请注意，我使用`closest`了更可靠的代码：如果中间有另一个元素，`tr`仍然会找到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T21:30:06.320

您忘记做的是在您的链接中设置哈希。例子：

```
<a class="deleteLink" href="" >delete</a> 
```

应该

```
<a class="deleteLink" href="#" >delete</a> 
```

或者

```
return false; 
```

在你的最后

```
$(document).ready(function() {
    $("#favoriteFoodTable .deleteLink").on("click",function() {
        ...
        return false;
    });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-12T12:48:18.890

这是另一种选择。

```
function DeleteRowOfProductTable(productID){
    $('#YourTableId tr').each(function (i, row) {
        var $row = $(row);
        var productLabelId =  $row.find('label[name*="Product_' + productID + '"]');

       var $productLabelIdValue = $productLabelId.text();
       if (parseInt(productID) == parseInt($productLabelIdValue))
       {
           $row.remove(); 
       }
    });
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-10T13:37:25.570

如果您希望一次只选择表中的 1 行

```
$("#data tr").click(function() {
    var selected = $(this).hasClass("highlight");
    $("#data tr").removeClass("highlight");
    if(!selected)
            $(this).addClass("highlight"); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-07-13T18:28:29.057

尝试

```
var tr = $(this).closest('tr');
tr.detach(); 
```

为我工作！

# c++ - 为一个对象做一个吸气剂？

> ID：15604127
> 
> 赞同：1
> 
> 时间：2013-03-24T21:18:04.253
> 
> 标签：c++

我的游戏类由宇宙飞船组成。我将 Spaceship 对象设为私有，并为该对象做了一个吸气剂。

```
Spaceship Game::getSpaceShip() const
{
    return mySpaceship;
} 
```

当我通过我的 getter 使用我的宇宙飞船对象时，它无法正常工作。如果我将其公开并仅按其名称使用它，它就可以工作。你知道是什么导致了这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T21:24:06.383

您正在返回 mySpaceship 副本。尝试返回指向 mySpaceship 对象的指针。

```
Spaceship *Game::getSpaceShip()
{
    return &mySpaceship;
} 
```

或参考：

```
const Spaceship& Game::getSpaceShip() const
{
    return mySpaceship;
} 
```

这不是Java。在 C++ 中，您按值传递和返回变量！除非您表明要以不同的方式进行操作（通过指针或引用）。

如果您需要修改返回的参考。

```
Spaceship& Game::getSpaceShip()
{
    return mySpaceship;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T21:31:04.370

你的方法

```
Spaceship Game::getSpaceShip() const; 
```

`Spaceship` *按值*返回。这意味着调用者获得*了他们自己的* `Spaceship`实例，该实例是从`mySpaceship`.

正如 yattering 所说，如果您希望调用者使用相同的实例，则应该返回对该对象的引用。

现在，我希望看到的两种访问器方法是：

```
Spaceship const& getSpaceship() const { return mySpaceship; }
Spaceship&       getSpaceship()       { return mySpaceship; } 
```

第一个返回*对 const 的引用`Spaceship`*：您不能通过此引用修改船，但多个调用者可以查看相同的状态，如果他们只有对游戏本身的 const 引用。

第二个返回*对`Spaceship`*: 这是完全读写访问的引用，但是您需要对 Game 的非常量引用才能获取它。

* * *

如果有帮助，请考虑比宇宙飞船更简单的东西：

```
class Wrapper {
    int value;

public:
    int        copy_of_value()            const { return value; }
    int&       reference_to_value()             { return value; }
    int const& const_reference_to_value() const { return value; }
}; 
```

现在，这些都表现不同：

```
Wrapper w;
int i = w.copy_of_value();
i += 1; // changes i but not w.value

int& j = w.reference_to_value();
j += 1; // does change w.value

int const& k = w.const_reference_to_value();
k += 1; // won't even compile 
```

请注意，如果我首先只有一个 const 引用`w`，我可以调用两个 const 限定方法，但不能调用`reference_to_value`，因此 const 阻止我更改`w.value`.

# c++ - 未知错误可能是由命名冲突引起的？

> ID：15604129
> 
> 赞同：1
> 
> 时间：2013-03-24T21:18:15.170
> 
> 标签：c++

我编写了一个非常简单的 c++ 代码，在其中定义了一个名为 sqrt 的函数，它只调用 std::sqrt。出乎意料的是，我遇到了分段错误。如果我将函数 sqrt 重命名为其他名称，则问题不存在。但是，我看不到任何命名冲突，因为我定义的 sqrt 函数不在命名空间 std 中，因此两者应该完全分开。那么问题的真正原因是什么？谢谢！

```
#include<iostream>
#include<cmath>

double sqrt(double d);

double sqrt(double d) {
    return std::sqrt(d);
}

int main() {
    double x = 3.0;
    std::cout << "The square root of " << x << " is " << sqrt(x) << '\n';
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T21:29:06.697

`<cmath>`是一个有趣的标题。允许（但不要求）制作`::sqrt`和 `std::sqrt`同义词。如果你包含它，最好假设两者都存在（或者只是 include `<math.h>`，在这种情况下，`::sqrt`你应该得到的只是）。在您的情况下可能发生的情况是 1)`std::sqrt`实际上是 的同义词 (via `using`) `::sqrt`，并且 2) 链接器正在获取您的`::sqrt`第一个，因此您最终会出现无休止的递归。除了更改名称之外，唯一的解决方案是将您 `sqrt`的名称放在名称空间中。

## 编辑：

需要明确的是：以上是 C++11。早期版本的 C++*不允许*将`<cmath>`任何东西引入全局命名空间。然而，所有的实现都做了，所以标准被改变以支持这种做法。（我想这是让编译器符合标准的一种方法。）

## 编辑：

一些关于图书馆如何“拾取”符号的附加信息，以回应评论中的问题。形式上，根据 C++ 标准，一个程序中可能没有同一函数的两个定义（相同的名称、命名空间和参数类型）。如果这两个定义在不同的翻译单元中，则行为未定义。考虑到这一点，有几个实际的考虑。

第一个可以被认为是库的定义（或至少是传统的定义）。就标准而言，库是一组模块——翻译单元。（通常，但不总是，模块由编译的目标文件组成。）然而，在库中链接并*不会*引入其中的所有模块。仅当库中的模块解析未解析的外部时，它才会合并到您的程序中。因此，如果`::sqrt`在链接器查看库之前已经定义（解析），则包含 `::sqrt`在库中的模块将不会成为您程序的一部分。

在实践中，图书馆这个术语近年来一直被滥用，以至于人们可能会说它的含义已经发生了变化。特别是，微软所说的“动态加载的库”（以及很久以前在 Unix 中被称为“共享对象”的东西）*并不是*传统意义上的库，上述内容并不适用于它们。但是，其他问题取决于动态加载器的工作方式。在 Unix 中，如果多个共享对象具有相同的符号，所有共享对象都将解析为第一个加载的对象（默认情况下，这可以通过传递给的选项来控制`dlopen`）。在 Windows 的情况下，默认情况下，如果可能，符号将在 DLL 中解析；在你的情况下，如果`std::sqrt`是一个内联函数，或者被指定为`using ::sqrt`，这将是调用的 DLL `std::sqrt`; 如果在标头中是`__declspec(dllexport)`，这将是包含 `std::sqrt`.

最后，今天几乎所有的链接器都支持某种形式的弱引用。这通常用于模板实例化：类似的东西`std::vector<int>::vector( size_t, int )`将在每个使用它的翻译单元中实例化，但作为“弱”符号。然后链接器选择一个（可能是它遇到的第一个，但没有指定），并抛出所有其他的。虽然这种技术主要用于模板实例化，但编译器*可以*使用弱引用定义任何函数（如果函数是内联的，也会这样做）。在这种情况下，如果定义不同（如您的情况 `::sqrt`)，那么我们可以真正说该程序是非法的，因为它违反了单一定义规则。但结果是未定义的行为，不需要诊断。例如，如果您在两个不同的翻译单元中以不同的方式定义内联函数或函数模板，您几乎不会出错；如果编译器实际上没有内联它们，链接器将选择一个，并在两个翻译单元中使用它。在您的情况下（`::sqrt`），我怀疑这是否适用；我希望这是一个真正的库函数，而不是内联的。（如果它被内联，定义将在 header`<cmath>`中，并且您会收到重复定义错误，因为两个定义都在同一个翻译单元中。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T21:23:48.230

问题似乎`<cmath>`是引入了`sqrt`名称（没有`std::`命名空间），以及`std::sqrt`. 恐怕你需要使用另一个名字。

请参阅此示例，使用 GCC 4.8 的快照：

```
#include<iostream>
#include<cmath>

int main() {
    double x = 9.0;
    std::cout << sqrt(x) << '\n'; // look, no std::sqrt
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T21:32:41.763

根据第 17.6.1.2/4 段：

> 除了第 18 到 30 条和附录 D 中的说明外，每个头文件 cname 的内容应与相应的头文件 name.h 的内容相同，如 C 标准库 (1.2) 或 C Unicode TR 中规定的，视情况而定，好像通过包含。然而，在 C++ 标准库中，声明（在 C 中定义为宏的名称除外）在命名空间 std 的命名空间范围 (3.3.6) 内。未指定这些名称是否首先在全局命名空间范围内声明，然后通过显式使用声明(7.3.3)**注入命名空间 std 。**

此外，根据附件 D.5/2：

> 每个 C 标头（每个都有一个名为 name.h 的名称）的**行为就好像每个由相应的 cname 标头放置在标准库命名空间中的名称都放置在全局命名空间范围内一样**。未指定这些名称是否首先在命名空间 std 的命名空间范围 (3.3.6) 内声明或定义，然后通过显式使用声明 (7.3.3) 注入全局命名空间范围。

由于用于使全局函数可用的确切技术留给实现，因此您的实现可能`using`在命名空间内具有如下指令`std`：

```
namespace std
{
    using ::sqrt;

    // ...
} 
```

这意味着它`std::sqrt`实际上成为了 的别名`::sqrt`，并且您提供了一个定义，`::sqrt`它实际上最终以递归方式调用自身。

唯一的解决方案是选择一个不同的名称。

# javascript - 将十进制值从月转换为天/周的数学函数

> ID：15604130
> 
> 赞同：1
> 
> 时间：2013-03-24T21:18:23.570
> 
> 标签：javascript, jquery, math

因此，我为我的老师编写了一个非常复杂的系统，它会计算他在电子表格中的大量数学运算，基本上可以找出某人需要多长时间才能节省足够的钱来支付那里的资产。长话短说，我现在有它说例如`"You will receive enough money to cover this asset in 0.38 months"`

我想尽可能地对用户友好，我不在乎我是否必须为每个月想出一个数学函数。`0.39 Month`我的问题是，如果可以的话，我将如何吐出`Weeks`和可能`Days`（这实际上更有意义，因为我可以制作一个脚本，如果大于 7 则等于 1 周）以使其更加精确。我知道首先我需要知道每个月有多少天，并不是每个月都和我们都知道的一样。在那之后的任何起点都会很棒。我为这个应用程序提供这个数学函数的 jQuery/JS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T21:48:55.590

将我的评论放在答案形式中：

```
function getDays(numMonth, month, year) {
    var numDays = new Date(year, month, 0).getDate();
    return numMonth * numDays;
}

function getWeeks(numMonth, month, year) {
    var days = getDays(numMonth, month, year);
    return Math.floor(days / 7);
} 
```

这是`numMonth`=`0.39`等的地方。

# javascript - 用多个其他字符串替换多个字符串

> ID：15604140
> 
> 赞同：274
> 
> 时间：2013-03-24T21:19:55.123
> 
> 标签：javascript, node.js, regex, string, replace

我正在尝试用多个其他单词替换字符串中的多个单词。字符串是“我有一只猫、一只狗和一只山羊”。

但是，这不会产生“我有一只狗、一只山羊和一只猫”，而是会产生“我有一只猫、一只猫和一只猫”。是否可以在 JavaScript 中同时用多个其他字符串替换多个字符串，从而产生正确的结果？

```
var str = "I have a cat, a dog, and a goat.";
str = str.replace(/cat/gi, "dog");
str = str.replace(/dog/gi, "goat");
str = str.replace(/goat/gi, "cat");

//this produces "I have a cat, a cat, and a cat"
//but I wanted to produce the string "I have a dog, a goat, and a cat". 
```

* * *

## 回答 #1

> 赞同：551
> 
> 时间：2013-03-24T21:26:09.917

### 具体解决方案

您可以使用一个函数来替换每个函数。

```
var str = "I have a cat, a dog, and a goat.";
var mapObj = {
   cat:"dog",
   dog:"goat",
   goat:"cat"
};
str = str.replace(/cat|dog|goat/gi, function(matched){
  return mapObj[matched];
}); 
```

[jsfiddle 示例](http://jsfiddle.net/L6LB2/)

### 概括它

如果您想动态维护正则表达式并将未来的交换添加到地图中，您可以这样做

```
new RegExp(Object.keys(mapObj).join("|"),"gi"); 
```

生成正则表达式。那么它看起来像这样

```
var mapObj = {cat:"dog",dog:"goat",goat:"cat"};

var re = new RegExp(Object.keys(mapObj).join("|"),"gi");
str = str.replace(re, function(matched){
  return mapObj[matched];
}); 
```

要添加或更改更多替换，您只需编辑地图即可。 

[摆弄动态正则表达式](http://jsfiddle.net/L6LB2/1/)

### 使其可重用

如果您希望这是一个通用模式，您可以将其拉出到这样的函数中

```
function replaceAll(str,mapObj){
    var re = new RegExp(Object.keys(mapObj).join("|"),"gi");

    return str.replace(re, function(matched){
        return mapObj[matched.toLowerCase()];
    });
} 
```

因此，您可以将 str 和您想要的替换映射传递给函数，它会返回转换后的字符串。

[摆弄功能](http://jsfiddle.net/L6LB2/35/)

要确保 Object.keys 在旧浏览器中工作，请添加一个 polyfill，例如来自[MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys)或[Es5](https://github.com/es-shims/es5-shim/blob/v2.0.5/es5-shim.js#L544)。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2021-05-03T19:24:06.750

作为答案：

> 寻找最新的答案

如果您在当前示例中使用“单词”，则可以使用非捕获组扩展[Ben McCormick](https://stackoverflow.com/a/15604206/5424988)`\b`的答案，并在左侧和右侧添加单词边界以防止部分匹配。

```
\b(?:cathy|cat|catch)\b 
```

*   `\b`防止部分匹配的单词边界
*   `(?:`非捕获组
    *   `cathy|cat|catch`匹配其中一种选择
*   `)`关闭非捕获组
*   `\b`防止部分匹配的单词边界

原始问题的示例：

```
let str = "I have a cat, a dog, and a goat.";
const mapObj = {
  cat: "dog",
  dog: "goat",
  goat: "cat"
};
str = str.replace(/\b(?:cat|dog|goat)\b/gi, matched => mapObj[matched]);
console.log(str);
```

评论中的示例似乎效果不佳：

```
let str = "I have a cat, a catch, and a cathy.";
const mapObj = {
  cathy: "cat",
  cat: "catch",
  catch: "cathy"

};
str = str.replace(/\b(?:cathy|cat|catch)\b/gi, matched => mapObj[matched]);
console.log(str);
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2018-05-18T12:39:32.010

使用编号的项目以防止再次更换。例如

```
let str = "I have a %1, a %2, and a %3";
let pets = ["dog","cat", "goat"]; 
```

然后

```
str.replace(/%(\d+)/g, (_, n) => pets[+n-1]) 
```

它是如何工作的：- %\d+ 查找 % 之后的数字。括号捕获数字。

这个数字（作为字符串）是 lambda 函数的第二个参数 n。

+n-1 将字符串转换为数字，然后减去 1 以索引 pets 数组。

然后将 %number 替换为数组索引处的字符串。

/g 导致使用每个数字重复调用 lambda 函数，然后将其替换为数组中的字符串。

在现代 JavaScript 中：-

```
replace_n=(str,...ns)=>str.replace(/%(\d+)/g,(_,n)=>ns[n-1]) 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-03-24T23:59:18.907

在这种情况下，这可能无法满足您的确切需求，但我发现这是一种替换字符串中多个参数的有用方法，作为一种通用解决方案。它将替换参数的所有实例，无论它们被引用多少次：

```
String.prototype.fmt = function (hash) {
        var string = this, key; for (key in hash) string = string.replace(new RegExp('\\{' + key + '\\}', 'gm'), hash[key]); return string
} 
```

您可以按如下方式调用它：

```
var person = '{title} {first} {last}'.fmt({ title: 'Agent', first: 'Jack', last: 'Bauer' });
// person = 'Agent Jack Bauer' 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-06-18T03:07:03.713

使用[Array.prototype.reduce()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce)：

```
const arrayOfObjects = [
  { plants: 'men' },
  { smart:'dumb' },
  { peace: 'war' }
]
const sentence = 'plants are smart'

arrayOfObjects.reduce(
  (f, s) => `${f}`.replace(Object.keys(s)[0], s[Object.keys(s)[0]]), sentence
)

// as a reusable function
const replaceManyStr = (obj, sentence) => obj.reduce((f, s) => `${f}`.replace(Object.keys(s)[0], s[Object.keys(s)[0]]), sentence)

const result = replaceManyStr(arrayOfObjects , sentence1) 
```

例子

```
// /////////////    1\. replacing using reduce and objects

// arrayOfObjects.reduce((f, s) => `${f}`.replace(Object.keys(s)[0], s[Object.keys(s)[0]]), sentence)

// replaces the key in object with its value if found in the sentence
// doesn't break if words aren't found

// Example

const arrayOfObjects = [
  { plants: 'men' },
  { smart:'dumb' },
  { peace: 'war' }
]
const sentence1 = 'plants are smart'
const result1 = arrayOfObjects.reduce((f, s) => `${f}`.replace(Object.keys(s)[0], s[Object.keys(s)[0]]), sentence1)

console.log(result1)

// result1: 
// men are dumb

// Extra: string insertion python style with an array of words and indexes

// usage

// arrayOfWords.reduce((f, s, i) => `${f}`.replace(`{${i}}`, s), sentence)

// where arrayOfWords has words you want to insert in sentence

// Example

// replaces as many words in the sentence as are defined in the arrayOfWords
// use python type {0}, {1} etc notation

// five to replace
const sentence2 = '{0} is {1} and {2} are {3} every {5}'

// but four in array? doesn't break
const words2 = ['man','dumb','plants','smart']

// what happens ?
const result2 = words2.reduce((f, s, i) => `${f}`.replace(`{${i}}`, s), sentence2)

console.log(result2)

// result2: 
// man is dumb and plants are smart every {5}

// replaces as many words as are defined in the array
// three to replace
const sentence3 = '{0} is {1} and {2}'

// but five in array
const words3 = ['man','dumb','plant','smart']

// what happens ? doesn't break
const result3 = words3.reduce((f, s, i) => `${f}`.replace(`{${i}}`, s), sentence3)

console.log(result3)

// result3: 
// man is dumb and plants
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-02-16T11:50:04.283

这对我有用：

```
String.prototype.replaceAll = function(search, replacement) {
    var target = this;
    return target.replace(new RegExp(search, 'g'), replacement);
};

function replaceAll(str, map){
    for(key in map){
        str = str.replaceAll(key, map[key]);
    }
    return str;
}

//testing...
var str = "bat, ball, cat";
var map = {
    'bat' : 'foo',
    'ball' : 'boo',
    'cat' : 'bar'
};
var new = replaceAll(str, map);
//result: "foo, boo, bar" 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-03-04T18:14:04.523

使用我的[replace-once](https://github.com/kodie/replace-once)包，您可以执行以下操作：

```
const replaceOnce = require('replace-once')

var str = 'I have a cat, a dog, and a goat.'
var find = ['cat', 'dog', 'goat']
var replace = ['dog', 'goat', 'cat']
replaceOnce(str, find, replace, 'gi')
//=> 'I have a dog, a goat, and a cat.' 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-07-03T10:58:10.177

以防万一有人想知道为什么原始海报的解决方案不起作用：

```
var str = "I have a cat, a dog, and a goat.";

str = str.replace(/cat/gi, "dog");
// now str = "I have a dog, a dog, and a goat."

str = str.replace(/dog/gi, "goat");
// now str = "I have a goat, a goat, and a goat."

str = str.replace(/goat/gi, "cat");
// now str = "I have a cat, a cat, and a cat." 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-05-04T08:40:58.217

[此解决方案](https://stackoverflow.com/questions/15604140/replace-multiple-strings-with-multiple-other-strings#answer-15604206)可以调整为仅替换**整个单词**- 例如，在搜索“cat”时不会找到“catch”、“ducat”或“locator”。这可以通过对正则表达式中每个单词之前和之后的单词字符使用负向后`(?<!\w)`查找和负向前查找来完成：`(?!\w)`

```
(?<!\w)(cathy|cat|ducat|locator|catch)(?!\w) 
```

JSFiddle 演示：http: [//jsfiddle.net/mfkv9r8g/1/](http://jsfiddle.net/mfkv9r8g/1/)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-06-17T13:10:29.757

```
 var str = "I have a cat, a dog, and a goat.";

    str = str.replace(/goat/i, "cat");
    // now str = "I have a cat, a dog, and a cat."

    str = str.replace(/dog/i, "goat");
    // now str = "I have a cat, a goat, and a cat."

    str = str.replace(/cat/i, "dog");
    // now str = "I have a dog, a goat, and a cat." 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-04-30T17:13:32.537

## 笔记！

### 如果您使用的是动态提供的映射，那么这里的解决方案都不够用！

在这种情况下，有两种方法可以解决这个问题，（1）使用拆分连接技术，（2）使用带有特殊字符转义技术的正则表达式。

1.  这是一种拆分连接技术，比另一种快得多（至少快 50%）：

```
var str = "I have {abc} a c|at, a d(og, and a g[oat] {1} {7} {11."
var mapObj = {
   'c|at': "d(og",
   'd(og': "g[oat",
   'g[oat]': "c|at",
};
var entries = Object.entries(mapObj);
console.log(
  entries
    .reduce(
      // Replace all the occurrences of the keys in the text into an index placholder using split-join
      (_str, [key], i) => _str.split(key).join(`{${i}}`), 
      // Manipulate all exisitng index placeholder -like formats, in order to prevent confusion
      str.replace(/\{(?=\d+\})/g, '{-')
    )
    // Replace all index placeholders to the desired replacement values
    .replace(/\{(\d+)\}/g, (_,i) => entries[i][1])
    // Undo the manipulation of index placeholder -like formats
    .replace(/\{-(?=\d+\})/g, '{')
);
```

2.  这个是正则表达式特殊字符转义技术，它也有效，但要慢得多：

```
var str = "I have a c|at, a d(og, and a g[oat]."
var mapObj = {
   'c|at': "d(og",
   'd(og': "g[oat",
   'g[oat]': "c|at",
};
console.log(
  str.replace(
    new RegExp(
      // Convert the object to array of keys
      Object.keys(mapObj)
        // Escape any special characters in the search key
        .map(key => key.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, '\\$&'))
        // Create the Regex pattern
        .join('|'), 
      // Additional flags can be used. Like `i` - case-insensitive search
      'g'
    ), 
    // For each key found, replace with the appropriate value
    match => mapObj[match]
  )
);
```

后者的优点是它也可以与不区分大小写的搜索一起使用。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-08-18T07:08:55.233

用户常规函数定义要替换的模式，然后使用替换函数处理输入字符串，

```
var i = new RegExp('"{','g'),
    j = new RegExp('}"','g'),
    k = data.replace(i,'{').replace(j,'}'); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-05-01T02:15:15.623

*   我已经修改了[Ben McCormick 的答案](https://stackoverflow.com/a/15604206/117030)以使用您的新测试用例。
*   我只是在正则表达式中添加了[单词边界：](https://javascript.info/regexp-boundary)

```
/\b(cathy|cat|catch)\b/gi 
```

“运行代码片段”以查看以下结果：

```
var str = "I have a cat, a catch, and a cathy.";
var mapObj = {
   cathy:"cat",
   cat:"catch",
   catch:"cathy"
};
str = str.replace(/\b(cathy|cat|catch)\b/gi, function(matched){
  return mapObj[matched];
});

console.log(str);
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-11-14T17:40:50.347

您可以使用分隔符查找和替换字符串。

```
var obj = {
  'firstname': 'John',
  'lastname': 'Doe'
}

var text = "My firstname is {firstname} and my lastname is {lastname}"

alert(mutliStringReplace(obj,text))

function mutliStringReplace(object, string) {
      var val = string
      var entries = Object.entries(object);
      entries.forEach((para)=> {
          var find = '{' + para[0] + '}'
          var regExp = new RegExp(find,'g')
       val = val.replace(regExp, para[1])
    })
  return val;
}
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-07-02T04:36:30.213

试试我的解决方案。随时改进

```
function multiReplace(strings, regex, replaces) {
  return str.replace(regex, function(x) {
    // check with replaces key to prevent error, if false it will return original value
    return Object.keys(replaces).includes(x) ? replaces[x] : x;
  });
}
var str = "I have a Cat, a dog, and a goat.";
//(json) use value to replace the key
var replaces = {
  'Cat': 'dog',
  'dog': 'goat',
  'goat': 'cat',
}
console.log(multiReplace(str, /Cat|dog|goat/g, replaces))
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-12-01T13:34:16.553

```
String.prototype.replaceSome = function() {
    var replaceWith = Array.prototype.pop.apply(arguments),
        i = 0,
        r = this,
        l = arguments.length;
    for (;i<l;i++) {
        r = r.replace(arguments[i],replaceWith);
    }
    return r;
} 
```

/* 字符串的 replaceSome 方法，它接受我们想要的多个参数，并将所有参数替换为我们指定的最后一个参数 2013 CopyRights 为：Max Ahmed 这是一个示例：

```
var string = "[hello i want to 'replace x' with eat]";
var replaced = string.replaceSome("]","[","'replace x' with","");
document.write(string + "<br>" + replaced); // returns hello i want to eat (without brackets) 
```

*/

jsFiddle：http: [//jsfiddle.net/CPj89/](http://jsfiddle.net/CPj89/)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-07-19T16:06:46.263

我写了这个 npm 包 stringinject [https://www.npmjs.com/package/stringinject](https://www.npmjs.com/package/stringinject)它允许您执行以下操作

```
var string = stringInject("this is a {0} string for {1}", ["test", "stringInject"]); 
```

它将用数组项替换 {0} 和 {1} 并返回以下字符串

```
"this is a test string for stringInject" 
```

或者您可以使用对象键和值替换占位符，如下所示：

```
var str = stringInject("My username is {username} on {platform}", { username: "tjcafferkey", platform: "GitHub" });

"My username is tjcafferkey on Github" 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-07-02T09:31:59.837

通过使用原型函数，我们可以通过传递带有键和值以及可替换文本的对象来轻松替换

```
String.prototype.replaceAll=function(obj,keydata='key'){
 const keys=keydata.split('key');
 return Object.entries(obj).reduce((a,[key,val])=> a.replace(`${keys[0]}${key}${keys[1]}`,val),this)
}

const data='hids dv sdc sd ${yathin} ${ok}'
console.log(data.replaceAll({yathin:12,ok:'hi'},'${key}'))
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-12-14T10:16:17.157

```
const str = 'Thanks for contributing an answer to Stack Overflow!'
    const substr = ['for', 'to']

    function boldString(str, substr) {
        let boldStr
        boldStr = str
        substr.map(e => {
                const strRegExp = new RegExp(e, 'g');
                boldStr= boldStr.replace(strRegExp, `<strong>${e}</strong>`);
            }
        )
        return boldStr
}
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-08-31T18:33:39.733

所有解决方案都工作得很好，除非应用于闭包的编程语言（例如 Coda、Excel、Spreadsheet's `REGEXREPLACE`）。

下面我的两个原始解决方案仅使用 1 个连接和 1 个正则表达式。

## 方法#1：查找替换值

这个想法是如果它们不在字符串中，则附加替换值。然后，使用单个正则表达式，我们执行所有需要的替换：

```
var str = "I have a cat, a dog, and a goat.";
str = (str+"||||cat,dog,goat").replace(
   /cat(?=[\s\S]*(dog))|dog(?=[\s\S]*(goat))|goat(?=[\s\S]*(cat))|\|\|\|\|.*$/gi, "$1$2$3");
document.body.innerHTML = str;
```

说明：

*   `cat(?=[\s\S]*(dog))`意味着我们寻找“猫”。如果匹配，则正向查找将捕获“dog”作为组 1，否则捕获“”。
*   对于将“goat”捕获为第 2 组的“dog”和将“cat”捕获为第 3 组的“goat”也是如此。
*   我们替换为`"$1$2$3"`（所有三个组的串联），对于上述情况之一，它始终是“狗”、“猫”或“山羊”
*   如果我们手动将替换附加到字符串 like `str+"||||cat,dog,goat"`，我们也会通过匹配来删除它们`\|\|\|\|.*$`，在这种情况下，替换`"$1$2$3"`将评估为“”，即空字符串。

## 方法#2：查找替换对

方法 #1 的一个问题是它一次不能超过 9 个替换，这是反向传播组的最大数量。方法 #2 声明不要仅附加替换值，而是直接附加替换：

```
var str = "I have a cat, a dog, and a goat.";
str = (str+"||||,cat=>dog,dog=>goat,goat=>cat").replace(
   /(\b\w+\b)(?=[\s\S]*,\1=>([^,]*))|\|\|\|\|.*$/gi, "$2");
document.body.innerHTML = str;
```

说明：

*   `(str+"||||,cat=>dog,dog=>goat,goat=>cat")`是我们如何将替换映射附加到字符串的末尾。
*   `(\b\w+\b)`声明“捕获任何单词”，可以用“(cat|dog|goat) 或其他任何内容替换。
*   `(?=[\s\S]*...)`是一个正向查找，通常会一直到文档的末尾，直到替换映射之后。
    *   `,\1=>`意思是“你应该在逗号和右箭头之间找到匹配的词”
    *   `([^,]*)`表示“匹配此箭头之后的任何内容，直到下一个逗号或文档结尾”
*   `|\|\|\|\|.*$`是我们如何删除替换地图。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-11-16T15:19:34.390

为此，您可以使用[https://www.npmjs.com/package/union-replacer 。](https://www.npmjs.com/package/union-replacer)它基本上是一个`string.replace(regexp, ...)`对应物，它允许一次进行多次替换，同时保留`string.replace(...)`.

披露：我是作者。该库的开发是为了支持更复杂的用户可配置替换，它解决了所有有问题的问题，如捕获组、反向引用和回调函数替换。

上面的解决方案对于精确的字符串替换来说已经足够好了。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2016-08-13T10:42:03.903

```
<!DOCTYPE html>
<html>
<body>

<p id="demo">Mr Blue 
has a           blue house and a blue car.</p>

<button onclick="myFunction()">Try it</button>

<script>
function myFunction() {
    var str = document.getElementById("demo").innerHTML;
    var res = str.replace(/\n| |car/gi, function myFunction(x){

if(x=='\n'){return x='<br>';}
if(x==' '){return x='&nbsp';}
if(x=='car'){return x='BMW'}
else{return x;}//must need

});

    document.getElementById("demo").innerHTML = res;
}
</script>

</body>
</html> 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-05-07T09:57:51.510

*你可以试试这个。买不聪明。*

```
var str = "I have a cat, a dog, and a goat.";
console.log(str);
str = str.replace(/cat/gi, "XXX");
console.log(str);
str = str.replace(/goat/gi, "cat");
console.log(str);
str = str.replace(/dog/gi, "goat");
console.log(str);
str = str.replace(/XXX/gi, "dog");              
console.log(str);
```

输出：我有一只狗、一只山羊和一只猫。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-05-03T14:22:28.823

我们还可以使用 split() 和 join() 方法：

```
var str = "I have a cat, a dog, and a goat.";

str=str.split("cat").map(x => {return x.split("dog").map(y => {return y.split("goat").join("cat");}).join("goat");}).join("dog");

console.log(str);
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-05-06T19:02:48.027

一种可能的解决方案是使用映射器表达式函数。

```
const regex = /(?:cat|dog|goat)/gmi;
const str = `I have a cat, a dog, and a goat.`;

let mapper = (key) => {
  switch (key) {
    case "cat":
      return "dog"
    case "dog":
      return "goat";
    case "goat":
      return "cat"
  }
}
let result = str.replace(regex, mapper);

console.log('Substitution result: ', result);
//Substitution result1:  I have a dog, a goat, and a cat. 
```

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2014-11-17T16:33:02.633

我对@BenMcCormicks 进行了一些扩展。他适用于常规字符串，但如果我有转义字符或通配符，则不会。这就是我所做的

```
str = "[curl] 6: blah blah 234433 blah blah";
mapObj = {'\\[curl] *': '', '\\d: *': ''};

function replaceAll (str, mapObj) {

    var arr = Object.keys(mapObj),
        re;

    $.each(arr, function (key, value) {
        re = new RegExp(value, "g");
        str = str.replace(re, function (matched) {
            return mapObj[value];
        });
    });

    return str;

}
replaceAll(str, mapObj) 
```

**返回“废话 234433 废话”**

这样它将匹配 mapObj 中的键而不是匹配的单词'

* * *

## 回答 #27

> 赞同：-5
> 
> 时间：2018-01-16T08:08:05.280

使用[Jquery](https://code.jquery.com/jquery-3.3.1.min.js)的解决方案（首先包含此文件）：用多个其他字符串替换多个字符串：

```
var replacetext = {
    "abc": "123",
    "def": "456"
    "ghi": "789"
};

$.each(replacetext, function(txtorig, txtnew) {
    $(".eng-to-urd").each(function() {
        $(this).text($(this).text().replace(txtorig, txtnew));
    });
}); 
```

# c++ - 在 Visual Studio 2012 中更改 C++ 应用程序图标

> ID：15604141
> 
> 赞同：3
> 
> 时间：2013-03-24T21:19:59.973
> 
> 标签：c++, visual-studio-2012, icons

我一直在寻找一个小时的答案，但没有运气。我正在使用 Visual Studio 2012 的 Express 版本，我想在我的 C++ 应用程序中添加一个图标。我怎样才能做到这一点？另外如何更改应用程序的描述？谢谢。

# sql - ORA-00904: 使用 dbms_random.value 时标识符无效

> ID：15604142
> 
> 赞同：4
> 
> 时间：2013-03-24T21:20:03.413
> 
> 标签：sql, oracle, oracle-sqldeveloper

[本文](http://kwatog.com/blog/oracle/select-random-records-in-oracle/)建议使用 dbms_random.value 从表中选择随机值。

我的查询

```
select value1, value2 from 
(select value1, value2 from my.table order by dbms_random.value) 
where rownum <100; 
```

给我

```
命令行错误：2 Column://column 在“by”之后）。
错误报告：
SQL 错误: ORA-00904: : 无效的标识符
00904\. 00000 - “%s：无效标识符”
```

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T21:29:26.367

用户权限不足。无权访问 dbms_random 包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-21T09:45:03.820

您需要 GRANT EXECUTE 到您的架构。以您的 SYS 用户身份登录并运行以下命令，将“ **your-schema-name** ”替换为您希望允许运行 DBMS_RANDOM 的 Oracle 用户。

```
GRANT EXECUTE ON DBMS_RANDOM TO your-schema-name; 
```

# android - Android应用程序项目不生成默认文件？

> ID：15604144
> 
> 赞同：1
> 
> 时间：2013-03-24T21:20:11.443
> 
> 标签：android, eclipse

嗨，我正在使用 eclipse indigo，我已经下载了 adt 插件，如网站[http://developer.android.com](http://developer.android.com)上的文档中所述。我还安装了 android SDK。在此之后，当我创建 android 应用程序项目时，它不会生成任何默认文件。所有应用程序文件夹都是空的。我的 java 运行时是 1.7。我已经下载了现场最新的 Android SDK。由于应用程序中没有生成文件，我无法运行“hello world”。我正在做的正是 android 开发者网站上的文档中所说的。请帮我解决这个问题？可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:30:45.937

我不知道问题是什么，但 64 位 ADT-SDK 不能在 64 位 windows-7 机器上工作，但同时 32 位 ADT-SDK 工作正常，没有任何问题。我不确定为什么会这样。我首先以为我的下载被篡改了，但事实并非如此。64位不工作。

# java - 使用 AIDL (Android) 跨进程处理错误的推荐方法

> ID：15604145
> 
> 赞同：4
> 
> 时间：2013-03-24T21:20:18.053
> 
> 标签：java, android, aidl, android-binder

我有一个活页夹服务和一个住在不同进程中的客户端。使用 AIDL，当客户端调用我的远程 binder 服务时，有时我需要将错误（异常）转发回客户端。

但是，据我了解，这是不可能的。我尝试从我的活页夹服务中抛出一个“RemoteException”，看看会发生什么，我得到了

> 未捕获的远程异常！（跨进程尚不支持异常。）

在我的日志中。

既然看起来这是不可能的，那么通知客户错误的最佳方法是什么？我在想我可以将我的 AIDL 转换为使用 C 风格的接口，在其中我只返回一个错误代码（成功时返回 0），但这看起来很难看。

有更好的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T22:49:16.487

如果出现错误，您的远程方法可以返回[`Parcel`](http://developer.android.com/reference/android/os/Parcel.html)包含结果数据或异常的 a。见[`Parcel#writeException`](http://developer.android.com/reference/android/os/Parcel.html#writeException%28java.lang.Exception%29)方法。我相信这就是`ContentProvider`在另一个进程中执行操作时 Android 异常如何恢复。有很多方法可以返回结果数据，包括使用`Bundle`类。

您的管理器类可以通过解包并返回数据或抛出解包异常来隐藏实现细节，这样用户就不会与`Parcel`.

[这是一个链接到源代码`Parcel#writeException`](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/os/Parcel.java#L1307)。

# javascript - 使元素不影响页面高度（因此滚动）

> ID：15604147
> 
> 赞同：4
> 
> 时间：2013-03-24T21:20:25.920
> 
> 标签：javascript, html, css

我正在制作一个网站，在屏幕的每一侧都有许多“浮动”图像。页面的高度范围约为 900-3000 像素，因此我创建了浮动图像来覆盖该区域。

问题是，即使页面只有 900 像素高，页面也会将浮动图像视为页面上的对象，并可以滚动到它们……使页面比需要的长得多。

根据我在 StackOverflow 上收集到的信息。绝对元素不应计入文档流，但显然这些是。我还看到了涉及使用溢出的答案：隐藏，但这似乎根本没有达到预期的效果。

也许唯一的方法是使用javascript根据页面高度创建图像？

这是相关网站的 WIP：http: [//apa.smars.se](http://apa.smars.se)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T22:08:27.870

如果你想要一个纯 CSS 的解决方案，你应该这样做：

1.  添加`position:relative;`和`margin:0`到`<body>`元素。
2.  添加下一个元素作为您的第一个元素`<body>`：

    ```
    <div style="position:absolute; left:0; top:0; width:100%; height:100%; overflow:hidden;"> 
    ```

3.  将`<div class="botleft ...">`and`<div class="botright ...">`元素移动到该 div。

通过应用`position:relative`到`<body>`元素并向其添加另一个元素，`position:absolute; left:0; top:0; width:100%; height:100%`您可以告诉该元素“跟踪”`<body>`元素的大小。并通过添加`overflow:hidden;`隐藏底部溢出的图像。

此解决方案的缺点是您可能会在页面底部看到剪切图像。好吧，没有什么是完美的:)

这是更改后 DOM 树的外观

![在此处输入图像描述](../Images/df5a87cafff92867f29d2a2cc1aca0a1.png)

要立即查看结果，您可以从浏览器的控制台运行以下代码：

```
d = document.createElement("div");
d.style.cssText = "position:absolute; left:0; top:0; width:100%; height:100%; overflow:hidden;";
document.body.insertBefore(d, document.body.firstChild);
d.appendChild(document.getElementsByClassName("botleft")[0]);
d.appendChild(document.getElementsByClassName("botright")[0]);
document.body.style.position = "relative";
document.body.style.margin = "0"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T22:17:25.593

当你给`absolute`一个元素一个位置时，它变得与`relative`包含绝对元素的第一个元素相关。

而且由于元素的默认位置是静态的，您可能必须为容器元素更改它（可能是`body`您的情况）。

祝你好运！

# python - PYQT4-pyodbc 驱动程序错误

> ID：15604149
> 
> 赞同：2
> 
> 时间：2013-03-24T21:20:35.087
> 
> 标签：python, sql, runtime, pyqt4, pyodbc

我不断收到此 pyodbc 驱动程序错误，我根本无法修复它，谁能帮忙？我正在使用具有 microsoft 访问权限的 pyqt4 作为数据存储库。忽略任何狡猾的缩进。

这是我的错误：

```
Traceback (most recent call last):
File "F:\computing\Payroll v2 2\mainwindow.py", line 53, in loadUpcomingBirthdaysForm
self.ui.upcomingBirthdaysForm = UpcomingBirthdays.UpcomingBirthdays()
File "F:\computing\Payroll v2 2\UpcomingBirthdays.py", line 22, in __init__
cursor.execute("select Forename,Surname,DOB from employees where (DOB=?))",9)
pyodbc.Error: ('HYC00', '[HYC00] [Microsoft][ODBC Microsoft Access Driver]Optional feature not implemented  (106) (SQLBindParameter)') 
```

这是我的代码：

```
from PyQt4 import uic
from PyQt4 import QtCore,QtGui
import validation
import pyodbc
import datetime

( Ui_UpcomingBirthdays, QMainWindow ) = uic.loadUiType( 'UpcomingBirthdays.ui' )

class UpcomingBirthdays ( QMainWindow ):
"""Upcoming Birthdays inherits QMainWindow"""

def __init__ ( self, parent = None ):
    QMainWindow.__init__( self, parent )
    self.ui = Ui_UpcomingBirthdays()
    self.ui.setupUi( self )
    today = datetime.date.today()
    thismonth= int(today.strftime("%m")[0:2])
    thisday= int(today.strftime("%d")[0:2])
    cnxn = pyodbc.connect('Driver={Microsoft Access Driver (*.mdb, *.accdb)}; Dbq=F:\\computing\\Payroll v2 2\\employees.accdb')
    cursor = cnxn.cursor()
    cursor.execute("select Forename,Surname,DOB from employees where (DOBmonth=?))",thismonth)
    residentList = cursor.fetchall()
    cnxn.close()
    self.ui.residentTableWidget.setRowCount(0)
    for item in residentList:
        print (item)
        rowcount = self.ui.residentTableWidget.rowCount()
        self.ui.residentTableWidget.insertRow(rowcount)
        self.ui.residentTableWidget.setItem(rowcount,0,QtGui.QTableWidgetItem(str(item[0])))
        self.ui.residentTableWidget.setItem(rowcount,1,QtGui.QTableWidgetItem(str(item[1])))
        self.ui.residentTableWidget.setItem(rowcount,2,QtGui.QTableWidgetItem(str(item[2])))

def __del__ ( self ):
    self.ui = None 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:33:43.043

我想通了，故障在于以下行：

```
cursor.execute("select Forename,Surname,DOB from employees where (DOBmonth=?))",thismonth) 
```

我应该将“thismonth”变量更改为字符串，例如

```
str(thismonth)) 
```

# c++ - 使用重复 push_back() 初始化向量时的问题

> ID：15604159
> 
> 赞同：2
> 
> 时间：2013-03-24T21:21:53.413
> 
> 标签：c++, vector, initialization, push-back

## 使用重复 push_back() 初始化向量的问题

所以在我的程序中，我有一个只包含双精度和双精度数组的结构：

```
struct Particle {
    double x[2];
    double v[2];
    double pressure;
    .......
}; 
```

当我像这样初始化我的一个向量时：

```
 std::vector<Particle> p_vec(2500); 
```

一切正常，但是当我将该行替换为：

```
 std::vector<Particle> p_vec;
    Particle p; 
    for (int i = 0; i < 2500; i++) p_vec.push_back(p); 
```

我的程序仍然通过了 for 循环，但后来崩溃了。

这两种方法之间有什么区别吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T21:24:21.287

第一个是默认构造元素，这意味着它们的成员被初始化为 0。

第二个是复制未初始化的值，这是未定义的行为。

`p`在 push_back 之前尝试正确初始化。

# php - 无法使用 phpprepared-statement 将记录插入 mysql 表

> ID：15604161
> 
> 赞同：0
> 
> 时间：2013-03-24T21:21:55.110
> 
> 标签：php, mysql, prepared-statement, sql-insert

我的代码部分在**`ELSE`**下面部分工作。我的部分意思是**它没有 INSERT INTO 表**，但由于所有验证阶段都是正确的，**它重定向到感谢页面。**

我通常期望两者兼而有之。插入表格**，**然后转到感谢页面。

我认为我的情况与准备好的声明有关，所以我研究了[http://php.net/manual/en/mysqli.quickstart.prepared-statements.php](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)但我无法解决我的问题。我没有收到任何**通知**、警告或错误。但我的桌子还是空的。你能帮我解决我的错吗？

谢谢

BR

```
 header( "HTTP/1.1 303 See Other" );

if ($_SESSION['hatalar'] != '')
{
    $sonraki_sayfa = sitenin_koku.'yazılar/'.$_SESSION['spesifik_yazi_url'];
    header('Location: ' . $sonraki_sayfa);
}
else //verification passed. save the comment + redirect to thanks page.
{
    /* YORUMU TABLOYA YAZDIRALIM  */
    $sorgum = "INSERT INTO tb_yorumlar (kolon_yorumcu_isim, kolon_statu, kolon_yorum, kolon_hangi_yazara, kolon_hangi_basliga, kolon_yorum_tarihi, kolon_ip) VALUES (?, ?, ?, ?, ?, NOW(), ?)";

    if ($beyan = $db_baglanti->prepare($sorgum)) 
        {
            /* give their values to parameters  */ 
            $bindparametre1 = $_POST['yf-isim'];
            $bindparametre2 = 'onay';
            $bindparametre3 = $_POST['yf-mesaj'];
            $bindparametre4 = $_SESSION['spesifik_yazi_yazar'];
            $bindparametre5 = $_SESSION['spesifik_yazi_baslik'];
            $bindparametre6 = $_SERVER['REMOTE_ADDR'];

            /* bind parameters */
            if (!$beyan -> bind_param("ssssss", $bindparametre1, $bindparametre2, $bindparametre3, $bindparametre4, $bindparametre5, $bindparametre6))
            {echo "parametre atama hatası: (" . $beyan->errno . ") " . $beyan->error;}

            /* execute statement */
            if (!$beyan->execute())
            {echo "Gerçekleştirme hatası: (" . $beyan->errno . ") " . $beyan->error ;}
        }
    else {echo "Hazırlama hatası: (" . $db_baglanti->errno . ") " . $db_baglanti->error;}

    /* TEŞEKKÜR SAYFASINA YÖNLENDİRELİM */
    $sonraki_sayfa = sitenin_koku.'yorumunuz-için-teşekkür-ederim';
    header('Location: ' . $sonraki_sayfa);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T21:49:10.720

我会注释掉标题位置部分（见下文）并回显值 - 确保您插入的值实际上已填充（非空）。

```
if ($beyan = $db_baglanti->prepare($sorgum)) {
    /* give their values to parameters  */
    $bindparametre1 = $_POST['yf-isim'];
    $bindparametre2 = 'onay';
    $bindparametre3 = $_POST['yf-mesaj'];
    $bindparametre4 = $_SESSION['spesifik_yazi_yazar'];
    $bindparametre5 = $_SESSION['spesifik_yazi_baslik'];
    $bindparametre6 = $_SERVER['REMOTE_ADDR'];

    if (!$beyan->bind_param("ssssss", $bindparametre1, $bindparametre2, $bindparametre3, $bindparametre4, $bindparametre5, $bindparametre6)) {
        echo "parametre atama hatas?: (" . $beyan->errno . ") " . $beyan->error;
    }

    if (!$beyan->execute()) {
        echo "Gerçekles,tirme hatas?: (" . $beyan->errno . ") " . $beyan->error ;
    }
}
else {
    echo "Haz?rlama hatas?: (" . $db_baglanti->errno . ") " . $db_baglanti->error;
}

/* TES,EKKÜR SAYFASINA YÖNLENDI.RELI.M */
$sonraki_sayfa = sitenin_koku.'yorumunuz-için-tes,ekkür-ederim';
//header('Location: ' . $sonraki_sayfa);

echo $bindparametre1 . "<br>";
echo $bindparametre2 . "<br>";
echo $bindparametre3  . "<br>";
echo $bindparametre4  . "<br>";
echo $bindparametre5  . "<br>";
echo $bindparametre6  . "<br>"; 
```

# html - 登录表单未在正确位置呈现

> ID：15604162
> 
> 赞同：-3
> 
> 时间：2013-03-24T21:22:02.840
> 
> 标签：html, css, html-helper

我希望我的登录表单与 Facebook 的一样，但它的渲染太低了，几乎脱离了标题。我希望它像 Facebook 一样位于中间。

```
 <!DOCTYPE html>
<html lang="en" id="morethan"><head>
<link rel="stylesheet" href="stylesheet/5uV6fe9qPff.css" type="text/css">
</head>
<body class="home">
<div id="wrapper">
<div class="loggedout_menubar_container">
<div class="cleaarrfix loggedout_menubar">
<a class="lfloat" href="/" title="Go to Morefun Home"><i class="morefun_logo img sp_6jxgq1 sx_df432d"><u>Morefun logo</u></i></a>
<div class="menu_login_container rfloat">
<form id="" action="" method="post" onsubmit="">
<input type="hidden" name="lsd" value="AVrMo5Pe" autocomplete="off">
<table cellspacing="0">
<tbody>
<tr>
<td class="html7magic"><label for="email">Email or Phone</label></td>
<td class="html7magic"><label for="pass">Password</label></td>
</tr>
<tr>
<td>
<input type="text" class="inputtext" name="email" id="email" value="" tabindex="1" placeholder="Email or Phone"></td>
<td><input type="password" class="inputtext" name="pass" id="pass" tabindex="2" placeholder="Password"></td>
<td><label class="uiButton uiButtonConfirm" id="loginbutton" for="u_0_4"><input value="Log in" tabindex="4" type="submit" id="u_0_4"></label></td>
</tr>
<tr>
<td class="login_form_label_field">
<div>
<div class="uiInputLabel clearfix">
<input id="persist_box" type="checkbox" name="persistent" value="1" tabindex="3" class="uiInputLabelCheckbox">
<label for="persist_box">Keep me logged in</label>
</div>
<input type="hidden" name="default_persistent" value="0">
</div>
</td>
</tr>
</tbody>
</table>
<input type="hidden" autocomplete="off" name="timezone" value="0" id="u_0_3">
<input type="hidden" name="lgnrnd" value="110619_A5vh">
<input type="hidden" id="lgnjs" name="lgnjs" value="1364148375"><input type="hidden" autocomplete="off" id="locale" name="locale" value="en_GB">
</form>
</div>
</div>
</div>
</div>
</body>
</html> 
```

这是CSS代码

```
 body {
background: url("http://www.sayhellothere.com/images/bg-wrapper.jpg");
color: #c4d6e4;
line-height: 1;
margin: 0;
padding: 0;
text-align: left;
direction: ltr;
unicode-bidi: embed;
}
.loggedout_menubar_container {
background-color: rgba(0,0,0,0.1);
border: 1px solid #556166;
-webkit-box-shadow: 0,0,2px,0,#000;
box-shadow: 0,0,2px,0,#000;
background: url("http://www.sayhellothere.com/images/bg-home.jpg") repeat-x;
height: 82px;
min-width: 980px;
}
.loggedout_menubar {
margin: 0 auto;
padding-top: 13px;
width: 980px;
}
.lfloat {
float: left;
}
a {
color: #3b5998;
cursor: pointer;
text-decoration: none;
}
.loggedout_menubar .morefub_logo {
margin-top: 17px;
}
.sx_df432d {
width: 170px;
height: 36px;
background-position: 0 0;
}
.sp_6jxgq1 {
background-image:url('images/logo.png');
background-size: auto;
background-repeat: no-repeat;
display: inline-block;
height: 9px;
width: 9px;
}
i.img u {
position: absolute;
top: -9999999px;
}
.rfloat {
float: right;
}
form {
margin: 0;
padding: 0;
}
table {
word-wrap: normal;
}
.menu_login_container table tr td {
padding: 0 0 0 14px;
}
td, td.label {
text-align: left;
}
.menu_login_container .html7magic label {
color: #9fafb8;
font-size: 14px;
display: block;
margin: 0 0 6px;
font-weight: bold;
text-shadow: 0px -1px #000;
padding-left: 1px;
}
.menu_login_container .inputtext, .menu_login_container .inputpassword {
width: 138px;
padding: 7px 5px;
background: url("http://www.sayhellothere.com/images/bg-login.png") no-repeat 0 -95px;
overflow: hidden;
margin: 0;
}
.inputtext, .inputpassword {
float: left;
margin: 0;
padding: 0;
width: 138px;
border: 0;
background: none;
color: #fff;
font-size: 14px;
line-height: 17px;
outline: none!important;
}
.uiButtonText, .uiButton input {
float:right;
padding:1px 0 2px;
margin:0;
width:71px;
height:30px;
cursor: pointer;
font-size: 14px;
-webkit-border-radius: 4px;
border-radius: 4px;
background-color: #eaeaea;
background-image: -webkit-linear-gradient(top,#eaeaea,#a8a8a8);
display: inline-block;
font-family: helvetica,arial,sans-serif;
font-weight: bold;
color: #515151;
border: 1px solid #333;
text-shadow: 0 1px 0 rgba(255,255,255,0.5);
}
.uiInputLabel label {
display: inline;
font-size: 12px;
font-weight: normal;
vertical-align: -1px;
color: #9fafb8;
margin: 0 0 6px;
text-shadow: 0px -1px #000;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:31:36.847

如果我能理解您的要求，如何使具有登录表单的栏更大？

您需要将`.loggedout_menubar_container`CSS 声明中的 height 参数更新为更大，以便表单更适合。

# javascript - ES6 Map 和 WeakMap 有什么区别？

> ID：15604168
> 
> 赞同：103
> 
> 时间：2013-03-24T21:22:29.863
> 
> 标签：javascript, ecmascript-6, ecmascript-harmony, weakmap

查看[这个](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Map)和[这个](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/WeakMap)MDN 页面，似乎 Maps 和 WeakMaps 之间的唯一区别是 WeakMaps 缺少“大小”属性。但这是真的吗？他们之间有什么区别？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2015-05-28T05:17:39.957

当它们的键/值引用的对象被删除时，它们的行为都不同。让我们看下面的示例代码：

```
var map = new Map();
var weakmap = new WeakMap();

(function(){
    var a = {x: 12};
    var b = {y: 12};

    map.set(a, 1);
    weakmap.set(b, 2);
})() 
```

上面的 IIFE 是执行的，我们无法再引用`{x: 12}`了`{y: 12}`。垃圾收集器继续从“WeakMap”中删除键 b 指针，并`{y: 12}`从内存中删除。但是在“Map”的情况下，垃圾收集器不会从“Map”中删除指针，也不会`{x: 12}`从内存中删除。

总结：WeakMap 允许垃圾收集器完成它的任务，但不允许 Map。

参考资料：http: [//qnimate.com/difference-between-map-and-weakmap-in-javascript/](http://qnimate.com/difference-between-map-and-weakmap-in-javascript/)

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2016-01-23T19:53:42.660

也许下一个解释对某人来说会更清楚。

```
var k1 = {a: 1};
var k2 = {b: 2};

var map = new Map();
var wm = new WeakMap();

map.set(k1, 'k1');
wm.set(k2, 'k2');

k1 = null;
map.forEach(function (val, key) {
    console.log(key, val); // k1 {a: 1}
});

k2 = null;
wm.get(k2); // undefined 
```

如您所见，`k1`从内存中删除密钥后，我们仍然可以在地图中访问它。同时删除`k2`WeakMap 的键`wm`也会通过引用将其删除。

这就是为什么 WeakMap 没有像 forEach 这样的可枚举方法，因为没有 WeakMap 键列表之类的东西，它们只是对另一个对象的引用。

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2013-03-24T21:35:44.613

在[同一页面上，“*为什么使用**弱**地图？* ”](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/WeakMap#Why_WeakMap.3F)部分：

> 有经验的 JavaScript 程序员会注意到，这个 API 可以用 JavaScript 实现，两个数组（一个用于键，一个用于值）由 4 个 API 方法共享。这样的实现将有两个主要的不便之处。第一个是 O(n) 搜索（n 是地图中的键数）。第二个是内存泄漏问题。使用手动编写*的映射，键数组将保留对键对象的引用，防止它们被垃圾收集。在本机 WeakMaps 中，对关键对象的引用是**“弱”**的，这意味着它们不会阻止垃圾收集，以防没有其他对该对象的引用。*
> 
> 由于引用很弱，WeakMap 键是不可枚举的（即没有方法可以为您提供键列表）。如果是，则该列表将取决于垃圾收集的状态，从而引入非确定性。

[这就是为什么他们也没有`size`财产]

> 如果你想要一个键列表，你应该自己维护它。还有一个[ECMAScript 提案](http://wiki.ecmascript.org/doku.php?id=harmony:simple_maps_and_sets) 旨在引入不使用弱引用且可枚举的简单集合和映射。

- 这将是[“正常”`Map`的 s](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Map)。在 MDN 中没有提到，但在[和声提案](http://wiki.ecmascript.org/doku.php?id=harmony:simple_maps_and_sets)中，那些也有`items`，`keys`和`values`生成器方法并实现[`Iterator`接口](http://wiki.ecmascript.org/doku.php?id=harmony:iterators)。

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2015-05-13T20:17:29.967

另一个区别（来源：[https](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap) ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap ）：

> WeakMaps 的键仅属于 Object 类型。不允许将原始数据类型作为键（例如，Symbol 不能是 WeakMap 键）。

字符串、数字或布尔值也不能用作`WeakMap`键。A`Map` *可以*使用原始值作为键。

```
w = new WeakMap;
w.set('a', 'b'); // Uncaught TypeError: Invalid value used as weak map key

m = new Map
m.set('a', 'b'); // Works 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2020-06-02T06:38:43.527

来自*Javascript.info*

**Map** -- 如果我们在常规 Map 中使用一个对象作为键，那么当 Map 存在时，该对象也存在。它占用内存，可能不会被垃圾收集。

```
let john = { name: "John" };
let array = [ john ];
john = null; // overwrite the reference

// john is stored inside the array, so it won't be garbage-collected
// we can get it as array[0] 
```

与此类似，如果我们在常规 Map 中使用对象作为键，那么当 Map 存在时，该对象也存在。它占用内存，可能不会被垃圾收集

```
let john = { name: "John" };
let map = new Map();
map.set(john, "...");
john = null; // overwrite the reference

// john is stored inside the map,
// we can get it by using map.keys() 
```

**WeakMap——**现在，如果我们使用一个对象作为其中的键，并且没有其他对该对象的引用——它将自动从内存（和映射）中删除。

```
let john = { name: "John" };
let weakMap = new WeakMap();
weakMap.set(john, "...");
john = null; // overwrite the reference

// john is removed from memory! 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-08-22T06:52:06.600

`WeakMap`键必须是对象，而不是原始值。

```
let weakMap = new WeakMap();

let obj = {};

weakMap.set(obj, "ok"); // works fine (object key)

// can't use a string as the key
weakMap.set("test", "Not ok"); // Error, because "test" is not an object 
```

**为什么？？？？**

让我们看看下面的例子。

```
let user = { name: "User" };

let map = new Map();
map.set(user, "...");

user = null; // overwrite the reference

// 'user' is stored inside the map,
// We can get it by using map.keys() 
```

> 如果我们在常规中使用一个对象作为键`Map`，那么当它 `Map`存在时，该对象也存在。它占用内存，可能不会被垃圾收集。
> 
> `WeakMap`在这方面有着根本的不同。它不会阻止关键对象的垃圾收集。

```
let user = { name: "User" };

let weakMap = new WeakMap();
weakMap.set(user, "...");

user = null; // overwrite the reference

// 'user' is removed from memory! 
```

> 如果我们使用一个对象作为其中的键，并且没有其他对该对象的引用——它将自动从内存（和映射）中删除。

`WeakMap` **不**支持迭代和方法*keys()*、*values()*、*entries()*，因此无法从中获取所有键或值。

WeakMap 只有以下方法：

*   weakMap.get(key)
*   weakMap.set（键，值）
*   弱映射.删除（键）
*   weakMap.has(key)

这很明显，好像一个对象已经丢失了所有其他引用（如上面代码中的“用户”），那么它将自动被垃圾收集。但从技术上讲，清理发生的时间并没有准确说明。

JavaScript 引擎决定了这一点。它可以选择立即执行内存清理，或者在发生更多删除时等待并稍后执行清理。因此，从技术上讲，a 的当前元素计数`WeakMap`是未知的。引擎可能已经清理或没有清理或部分清理。因此，不支持访问所有键/值的方法。

> **注意：-** WeakMap 的主要应用领域是附加数据存储。就像缓存一个对象，直到该对象被垃圾收集。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-05-27T17:41:41.143

javascript 中的 WeapMap 不保存任何键或值，它只是使用*唯一 id*操作键值并为键对象定义一个属性。

因为它是`key object`通过方法定义属性的`Object.definePropert()`，所以**key不能是原始类型**。

也因为 WeapMap 不包含实际的键值对，我们无法获取弱映射的长度属性。

并且还将操作值分配回密钥对象，如果密钥不使用，垃圾收集器可以轻松收集密钥。

实现示例代码。

```
if(typeof WeapMap != undefined){
return;
} 
(function(){
   var WeapMap = function(){
      this.__id = '__weakmap__';
   }

   weakmap.set = function(key,value){
       var pVal = key[this.__id];
        if(pVal && pVal[0] == key){
           pVal[1]=value;
       }else{
          Object.defineProperty(key, this.__id, {value:[key,value]});
          return this;
        }
   }

window.WeakMap = WeakMap;
})(); 
```

[实施](https://github.com/googlearchive/WeakMap/blob/master/weakmap.js)参考

# c# - 如何在不连接到开放式办公室的情况下查看 .odb 数据库文件的内部？

> ID：15604171
> 
> 赞同：0
> 
> 时间：2013-03-24T21:22:45.700
> 
> 标签：c#, database

我想知道是否可以在不连接到 C# 中的 OpenOffice 的情况下查看 odb 数据库文件的内部？我只想查看表的行而不是添加行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:37:11.297

OpenOffice odb 文件格式基本上是一个 zip 存档，其中包含多个文件夹，其中包含 xml 格式的数据和元数据。

因此，您可能可以使用.net 4.5中的[ZipFile或](http://msdn.microsoft.com/ru-ru/library/system.io.compression.zipfile.aspx)[DotNetZip](http://dotnetzip.codeplex.com/)库解压 odb，然后根据[OpenOffice 文件格式](https://www.oasis-open.org/committees/tc_home.php?wg_abbrev=office)规范处理 xml 文件。

或者使用一些已经可用的 .net 库（[OpenOffice 和 .NET](https://stackoverflow.com/questions/390006/openoffice-and-net)）

# c++ - cocos2d-x 中的渲染循环

> ID：15604173
> 
> 赞同：1
> 
> 时间：2013-03-24T21:22:52.157
> 
> 标签：c++, cocos2d-x

我的团队编写了一个游戏引擎，它是基于组件的。它具有逻辑组件和可视组件。在可视化组件中，有一个名为的函数`updateVisual(delta)`，所有内容都在那里绘制。

例如，让我们以世界中的物理球实体为例：

```
class LogicBallComponent
{
   // ...
};

class VisualBallcomponent
{
   sfml::Texture mBallTexture;

   void updateVisual(float)
   {
       mBallTexture.translate(...);
       GlobalDisplayManager::instance().draw(mBallTexture);
   }
}; 
```

`GlobalDisplayManager`返回一些创建 gl 状态等的窗口表示（sfml 中的 sf::RenderWindow）。该系统易于集成。

现在我需要使用我的引擎制作安卓游戏。我选择 cocos2d-x 用于创建窗口、渲染、字体、资源等。

还有另一种方法可以完成这项工作：

```
class Ball : public CLayer
{
   bool Ball::init() {
      CSprite* sprite = CSprite::create(...);
      this->addChild(sprite, 0); // [!]
   }
}; 
```

而且我不知道如何以我的方式使用它。有这种可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:48:41.830

您应该查看函数“void CCDisplayLinkDirector::mainLoop(void)”，它是 coco2d-x 渲染引擎的主循环。

coco2d-x 为周期性调用循环提供了包装器。在 iOS 中，您应该检查平台/ios 中 CCDirectorCaller.mm 的函数 startMainLoop。

# javascript - 从函数内部更改全局变量

> ID：15604177
> 
> 赞同：4
> 
> 时间：2013-03-24T21:23:13.693
> 
> 标签：javascript, function, global, increment

在这里，我编写的这个非常简单的脚本有点问题。此脚本的目的是在每次单击按钮时将给定的数字简单地减一。我似乎无法做到这一点.. 我的全局变量 Number=100 似乎没有改变，或者改变不止一次.. 抱歉不能很好地解释这一点。这是我正在处理的部分..：

```
<script>
  var Number = 100;        // Number i want changed and to keep changing each button click
  function outcome() {     // Button calls this function
    Number = Number - 1;   // Tries to change Global Number.. :/
  }
  document.write(Number);  // Has the Number written in the document
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T21:26:01.200

是的，从概念上讲这是正确的。只有您没有调用该函数，至少在写入`Number`文档之前没有。

顺便说一句，`Number`是对[`Number`构造函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number)的全局引用，因此您应该使用另一个变量名，最好是小写。

```
var num = 100;
function outcome() {
    num--;
}
outcome();
document.write(num); // 99 
```

或者

```
<script>
var num = 100;
function outcome() {
    num--;
    alert(num);
}
</script>
<button onclick="outcome()">Decrease!</button> 
```

（[在 jsfiddle.net 上的演示](http://jsfiddle.net/aFhu8/)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T21:25:02.940

你必须调用你的函数：

```
<script>
var Number=100    
function outcome(){ 
Number=Number-1 
}
outcome(); // call the function here
document.write(Number)  
</script> 
```

或者首先不要使用函数：

```
<script>
var Number=100    
Number=Number-1   
document.write(Number) 
</script> 
```

# symfony - 登录 symfony2

> ID：15604180
> 
> 赞同：2
> 
> 时间：2013-03-24T21:23:24.983
> 
> 标签：symfony

我正在尝试在 Symfony2 中实现非常基本的身份验证。这是代码的主要部分，我真的没有看到任何问题

***编辑*** 完整的security.yml

```
jms_security_extra:
    secure_all_services: false
    expressions: true

security:
    encoders:
        Symfony\Component\Security\Core\User\User: plaintext

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

    providers:
        in_memory:
            memory:
                users:
                    user:  { password: userpass, roles: [ 'ROLE_USER' ] }
                    admin: { password: adminpass, roles: [ 'ROLE_ADMIN' ] }

    firewalls:
        login:
            pattern:    ^/login
            anonymous: ~

        secured_area:
            pattern:    ^/
            stateless:  true
            form_login:
                login_path:  /login
                check_path:  /login_check

    access_control:
        - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/, roles: ROLE_USER } 
```

这很好用，匿名用户总是被重定向到 loginAction 控制器。

***编辑*** 这是完整的代码

```
<?php

namespace AcmeBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\Security\Core\Authentication\Token\UsernamePasswordToken;

class SecurityController extends Controller {

    public function loginAction() {

        $providerKey = 'secured_area';
        $token = new UsernamePasswordToken('test', 'test', $providerKey, array('ROLE_USER'));
        $this->container->get('security.context')->setToken($token);

        return $this->redirect($this->generateUrl('fronthomepage'));

    }
} 
```

我没有看到任何问题，匿名用户被重定向到 loginAction，创建了经过身份验证的用户，保存到令牌，然后作为经过身份验证的用户重定向到安全区域。不幸的是，我的代码以重定向循环结尾，看起来安全防火墙不接受经过身份验证的用户。你看有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:46:30.137

好吧，您的控制器工作只是呈现表单而不是填充安全上下文。Symfony2 安全防火墙会自动为你做这件事。[除非您想构建自己的自定义身份验证](http://symfony.com/doc/master/cookbook/security/custom_authentication_provider.html)，否则您不需要处理它。

> 换句话说，您的工作是显示登录表单和可能发生的任何登录错误，但安全系统本身负责检查提交的用户名和密码并验证用户。

请阅读此[文档](http://symfony.com/doc/current/book/security.html)以获得清晰的图片。

如果你想在用户登录时做一些自定义的事情，在 Symfony2 中你必须添加一个事件监听器，它会在用户成功登录后触发。触发的事件是`security.interactive_login`并且要连接到它，你必须在`services.yml`文件形成您的捆绑`Resources/config`目录：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:44:13.530

很确定在设置经过身份验证的用户之前您需要一个实际的用户对象。我做了这样的事情：

```
class BaseController

protected function setUser($userName)
{
    if (is_object($userName)) $user = $userName;
    else
    {
        $userProvider = $this->get('zayso_core.user.provider');
        // Need try/catch here
        $user = $userProvider->loadUserByUsername($userName);
    }
    $providerKey = 'secured_area';
    $providerKey = $this->container->getParameter('zayso_core.provider.key'); // secured_area

    $token = new UsernamePasswordToken($user, null, $providerKey, $user->getRoles());
    $this->get('security.context')->setToken($token);
    return $user;
} 
```

但是，这样做会绕过大部分安全系统，因此不建议这样做。我还想使用第 3 方身份验证系统（Janrain）。我查看了身份验证系统，最初无法从中脱颖而出。这是在食谱条目存在之前。

我知道这似乎有点矫枉过正，但一旦你解决了问题，它就会开始变得更有意义。而且您可以访问一堆漂亮的安全功能。我花了很长时间才开始了解身份验证系统，但最终还是值得的。

提示： 1\. 倒着阅读烹饪书。我很难理解发生了什么，但我首先向 security.yml 添加了一个新防火墙，然后为我的安全工厂添加了别名。然后，我在某种程度上追溯了工厂被要求做什么。从那里我让听众启动并再次跟踪呼叫。最后，身份验证管理器开始发挥作用。同样，耗时，但最终值得。学到了很多。

1.  让我发疯的一件事是课程分散在各处。并且命名留下了一些不足之处。很难得到一个概述。我最终制作了自己的身份验证包，然后将所有内容置于安全之下。

2.  如果您想要另一个工作包示例，请查看：[https ://github.com/cerad/cerad/tree/master/src/Cerad/Bundle/JanrainBundle](https://github.com/cerad/cerad/tree/master/src/Cerad/Bundle/JanrainBundle)

# css - 为什么使用属性选择器来匹配类？

> ID：15604182
> 
> 赞同：91
> 
> 时间：2013-03-24T21:23:40.000
> 
> 标签：css, css-selectors

我发现[了一个响应式电子邮件模板的示例](http://www.zurb.com/playground/responsive-email-templates)，其中有这样的 CSS 选择器，例如：

```
a[class="btn"] 
```

如果与以下语法完全相同，为什么要使用此语法：

```
a.btn 
```

它对移动浏览器或其他任何东西有影响吗？

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2013-03-24T21:25:18.537

`[]`语法是一个[属性选择](http://www.w3.org/TR/CSS2/selector.html#attribute-selectors)器。

```
a[class="btn"] 
```

这将选择任何`<a>`带有`class="btn"`. 但是，它*不会*选择`<a>`which has `class="btn btn_red"`，例如（而[`a.btn`](http://www.w3.org/TR/CSS2/selector.html#class-html)会）。它仅与该属性*完全匹配。*

您可能想阅读[您必须记住的 30 个 CSS 选择器](http://net.tutsplus.com/tutorials/html-css-techniques/the-30-css-selectors-you-must-memorize/)。对于任何崭露头角的 Web 开发人员来说，它都是无价的。

# ruby-on-rails-3 - rails actionmailer错误与'part'方法

> ID：15604183
> 
> 赞同：0
> 
> 时间：2013-03-24T21:23:42.327
> 
> 标签：ruby-on-rails-3, upgrade, actionmailer, ruby-on-rails-2

我正在升级 rails 2.3.2 app ot rails 3。在 MailerFormError 中发送电子邮件时出现未知错误。MailerFormError 是我的模型： class MailerFormError < ActionMailer::Base

在第一次我有'deliver_send'方法错误（[未定义方法'deliver_sent' for MailerFormError:Class](https://stackoverflow.com/questions/15603423/undefined-method-deliver-sent-for-mailerformerrorclass)），我将其更改为'send'。现在我有这个：

```
 NoMethodError in LeadsController#create
   undefined method `part' for # 
```

我在控制器中的代码：

```
 @msg = {}
    @msg["errors"] = @lead.errors
    @msg["params"] = params
    #MailerFormError.deliver_sent(@msg)
    MailerFormError.sent(@msg) 
```

这是我的发送方法类：

```
 def sent(msg, sent_at = Time.now)
        @subject    = ("Ошибка при заполнении формы").force_encoding('iso-8859-1').encode('utf-8')
        @recipients = 'mymail@gmail.com'
        @from       = 'mymail@gmail.com'
        @sent_on    = sent_at
        @headers    = {}

        part( :content_type => "multipart/alternative" ) do |p|
          p.part :content_type => "text/plain", 
                 :body => render_message("sent.plain.erb", :msg=>msg )
        end

      end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:38:34.883

1) 对于 Rails 3，要在控制器中发送通知，您必须这样写：

```
MailerFormError.sent(@msg).deliver 
```

2）并且您必须以[Rails 3 方式](http://guides.rubyonrails.org/action_mailer_basics.html)重写您的“发送”方法：

```
def sent(msg, sent_at = Time.now)
  ...
  mail(:to => '...', :from => '...', :subject => '...') do |format|
    format.html
    format.text
  end
  ...
end 
```

您还可以在视图目录 app/views/mail_form_error 中创建文本版本和 html：send.text.erb 和 sent.html.erb

# c# - 渲染 HTML 并截取屏幕截图/缩略图

> ID：15604187
> 
> 赞同：1
> 
> 时间：2013-03-24T21:24:10.547
> 
> 标签：c#, html

作为我正在开发的应用程序的一部分，用户可以使用 HTML（或者更确切地说，使用 HTML 的基于 Web 的富文本编辑器）创建文档模板。当用户随后保存他们的模板时，我希望能够“在内存中”呈现这个 HTML 并抓取输出的缩略图大小的屏幕截图，以便用户可以在缩略图中看到他们的模板外观。

这在 C# 中可能吗？

# c - FUSE - 详细文档

> ID：15604191
> 
> 赞同：12
> 
> 时间：2013-03-24T21:24:22.630
> 
> 标签：c, linux, fuse

试图让我自己的文件系统使用 fuse（用户空间中的文件系统，linux）我真的很好奇在哪里可以获得所用操作的详细最新文档？

大多数时候我搜索其他文件系统实现并查看它们的作用，但有些操作似乎没有被广泛使用，如 poll/ioctl 或 bmap。并且 fuse api 的文档没有多大帮助，例如，操作的参数和返回值没有记录，因此我不得不猜测如何使用 em

所以问题是我从哪里可以获得有关应该如何实施这种奇异操作的更好信息？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-03-24T15:44:46.277

是的，你是对的，你可以在很多地方读到这条评论，说关于 FUSE 的文档很少。也许那是因为要记录的东西太少了。或者，也许该实现仅适用于那些充分了解用户空间文件系统的权衡的人。因此，也许您可​​以参考以下文档、教程、幻灯片甚至示例代码以获取更多信息：

FUSE 设计文档（来自 Sun 的原始文档？）：

[http://www.youblisher.com/p/31627-fuse/](http://www.youblisher.com/p/31627-fuse/)

[http://wr.informatik.uni-hamburg.de/_media/research/labs/2008/2008-03-michael_kuhn-container_library_and_fuse_container_file_system-report.pdf](http://wr.informatik.uni-hamburg.de/_media/research/labs/2008/2008-03-michael_kuhn-container_library_and_fuse_container_file_system-report.pdf)

[http://www.oug.org/files/presentations/losug-fuse.pdf](http://www.oug.org/files/presentations/losug-fuse.pdf)

[http://sar.informatik.hu-berlin.de/teaching/2013-w/2013w_osp2/lab/Lab-4-FUSE/lab-FUSE_.pdf](http://sar.informatik.hu-berlin.de/teaching/2013-w/2013w_osp2/lab/Lab-4-FUSE/lab-FUSE_.pdf)

[http://www.cs.hmc.edu/~geoff/classes/hmc.cs135.201001/homework/fuse/fuse_doc.html](http://www.cs.hmc.edu/~geoff/classes/hmc.cs135.201001/homework/fuse/fuse_doc.html) （教程）

[http://www.cs.cmu.edu/~./fp/courses/15213-s07/lectures/15-filesys/index.html](http://www.cs.cmu.edu/~./fp/courses/15213-s07/lectures/15-filesys/index.html)

[http://www.cs.nmsu.edu/~pfeiffer/fuse-tutorial/](http://www.cs.nmsu.edu/~pfeiffer/fuse-tutorial/)

示例代码：

[http://fuse.sourceforge.net/helloworld.html](http://fuse.sourceforge.net/helloworld.html)

也许这更注重研究：

[http://www.msrsas.org/docs/sastech_journals/archives/May2011/2.pdf](http://www.msrsas.org/docs/sastech_journals/archives/May2011/2.pdf)

[https://code.google.com/p/s3fs/wiki/FuseOverAmazon](https://code.google.com/p/s3fs/wiki/FuseOverAmazon)

但通常在用户空间中实现文件系统存在很多问题/问题（可以通过一些复杂的算法解决），这就是为什么 Linus 将其评论为“玩具”：

[https://ceph.com/dev-notes/linus-vs-fuse/](https://ceph.com/dev-notes/linus-vs-fuse/)

2015 年 4 月 15 日更新：

我刚刚找到了这个（以及许多其他幻灯片 - 只需查看此网页的右侧）：

[http://www.slideshare.net/adorepump/fuse-developing-fillesystems-in-userspace](http://www.slideshare.net/adorepump/fuse-developing-fillesystems-in-userspace)

# php - 使用php查找函数的最大值

> ID：15604192
> 
> 赞同：1
> 
> 时间：2013-03-24T21:24:27.437
> 
> 标签：php, mathematical-optimization

如何使用 php.ini 获取特定范围内函数的最大值。例如我有一个功能：

```
function f($x){
    return pow($x,2);
} 
```

我想在（-1,1）范围内得到这个函数的最大值。如何在 php 或使用其他库中实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T21:30:33.297

没有通用的方法可以做到这一点。你必须自己做数学。

最大化/最小化问题通过微分解决。在这种情况下，您会得到：

```
d(x^2)/dx = 2*x 
```

计算微分的方法取决于您的功能。像这样的简单函数并不难，如果你问得好，Wolfram Alpha ( [http://www.wolframalpha.com/ ) 会为你做这件事 (](http://www.wolframalpha.com/) [http://www.wolframalpha.com/input/?i =d%28x%5E2%29%2Fdx](http://www.wolframalpha.com/input/?i=d%28x%5E2%29%2Fdx) )。

然后将其设置为 0，它会告诉您梯度何时为 0（因此，它处于最大值、最小值或转折点）：

```
2*x = 0 
```

这告诉您有一点需要检查`x = 0`（请参阅此处的“解决方案”部分：[http](http://www.wolframalpha.com/input/?i=d%28x%5E2%29%2Fdx%3D0) ://www.wolframalpha.com/input/?i=d%28x%5E2%29%2Fdx%3D0 ）。现在检查您的函数在下限、上限和告诉您检查的点处的值，并获得所有这些结果的最大值/最小值。这将是您在该范围内的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T21:30:47.993

```
$maximumValue = -999999999;
for ($i = -1; $i <= 1; $i++) {
    $maximumValue = max($maximumValue, f($i));
}
var_dump($maximumValue); 
```

..应该可以正常工作

这只会检查数字`-1`和。如果您想要更精确，只需更改为例如。：`0``1``$i++``$i += 0.1`

```
$maximumValue = -999999999;
for ($i = -1; $i <= 1; $i += 0.1) {
    $maximumValue = max($maximumValue, f($i));
}
var_dump($maximumValue); 
```

这将为您提供`-1`, `-0.9`, `-0.8`.....`0.8`和.`0.9``1`

`$i += 0.000000001`如果您想浪费大量资源，但获得更准确的结果，也可以将其更改为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:08:14.633

如果你使用微分，你必须处理没有局部最优的情况。如果函数是平滑的，这意味着最优值出现在端点上。我不确定这一切需要多么精确，但也许如果函数只是由有限的对列表给出，你可以对包含定义函数的所有点的列表进行排序。

# angularjs - AngularJS：在哪里使用承诺？

> ID：15604196
> 
> 赞同：141
> 
> 时间：2013-03-24T21:24:47.650
> 
> 标签：angularjs, deferred, promise

我看到了一些使用**Promise**访问 FB Graph API 的 Facebook 登录服务示例。

**示例 #1**：

```
this.api = function(item) {
  var deferred = $q.defer();
  if (item) {
    facebook.FB.api('/' + item, function (result) {
      $rootScope.$apply(function () {
        if (angular.isUndefined(result.error)) {
          deferred.resolve(result);
        } else {
          deferred.reject(result.error);
        }
      });
    });
  }
  return deferred.promise;
} 
```

`"$scope.$digest() // Manual scope evaluation"`以及收到响应时使用的服务

**示例 #2**：

```
angular.module('HomePageModule', []).factory('facebookConnect', function() {
    return new function() {
        this.askFacebookForAuthentication = function(fail, success) {
            FB.login(function(response) {
                if (response.authResponse) {
                    FB.api('/me', success);
                } else {
                    fail('User cancelled login or did not fully authorize.');
                }
            });
        }
    }
});

function ConnectCtrl(facebookConnect, $scope, $resource) {

    $scope.user = {}
    $scope.error = null;

    $scope.registerWithFacebook = function() {
        facebookConnect.askFacebookForAuthentication(
        function(reason) { // fail
            $scope.error = reason;
        }, function(user) { // success
            $scope.user = user
            $scope.$digest() // Manual scope evaluation
        });
    }
} 
```

[JSFiddle](http://jsfiddle.net/mkotsur/Hxbqd/)

问题是：

*   上面的例子有 什么**区别？**
*   使用*$q*服务的**原因**和**案例**有哪些？
**   它是如何**工作的**？*

 ** * *

## 回答 #1

> 赞同：401
> 
> 时间：2013-04-01T05:53:52.990

这不会是您问题的完整答案，但希望这将在您尝试阅读`$q`服务文档时对您和其他人有所帮助。我花了一段时间才明白。

让我们暂时搁置 AngularJS，只考虑 Facebook API 调用。当来自 Facebook 的响应可用时，这两个 API 调用都使用*回调*机制来通知调用者：

```
 facebook.FB.api('/' + item, function (result) {
    if (result.error) {
      // handle error
    } else {
      // handle success
    }
  });
  // program continues while request is pending
  ... 
```

这是在 JavaScript 和其他语言中处理异步操作的标准模式。

当您需要执行一系列异步操作时，就会出现这种模式的一个大问题，其中每个连续操作都取决于前一个操作的结果。这就是这段代码正在做的事情：

```
 FB.login(function(response) {
      if (response.authResponse) {
          FB.api('/me', success);
      } else {
          fail('User cancelled login or did not fully authorize.');
      }
  }); 
```

首先它尝试登录，然后只有在验证登录成功后才会向 Graph API 发出请求。

即使在这种仅将两个操作链接在一起的情况下，事情也开始变得混乱。该方法`askFacebookForAuthentication`接受失败和成功的回调，但是`FB.login`成功但`FB.api`失败时会发生什么？`success`无论方法的结果如何，此方法始终调用回调`FB.api`。

现在想象一下，您正在尝试编写一个由三个或更多异步操作组成的健壮序列，以一种能够正确处理每一步错误的方式，并且在几周后对其他人甚至您来说都是可读的。可能，但是很容易继续嵌套这些回调并在此过程中丢失对错误的跟踪。

现在，让我们暂时搁置 Facebook API，只考虑由`$q`服务实现的 Angular Promises API。该服务实现的模式是试图将异步编程转换回类似于一系列线性简单语句的东西，能够在任何步骤“抛出”错误并在最后处理它，语义上类似于熟悉`try/catch`的街区。

考虑这个人为的例子。假设我们有两个函数，其中第二个函数使用第一个函数的结果：

```
 var firstFn = function(param) {
    // do something with param
    return 'firstResult';
 };

 var secondFn = function(param) {
    // do something with param
    return 'secondResult';
 };

 secondFn(firstFn()); 
```

现在想象 firstFn 和 secondFn 都需要很长时间才能完成，所以我们要异步处理这个序列。首先我们创建一个新`deferred`对象，它代表一个操作链：

```
 var deferred = $q.defer();
 var promise = deferred.promise; 
```

该`promise`属性代表链的最终结果。如果您在创建 Promise 后立即记录它，您会看到它只是一个空对象 ( `{}`)。没什么可看的，继续前进。

到目前为止，我们的承诺只代表了链条中的起点。现在让我们添加两个操作：

```
 promise = promise.then(firstFn).then(secondFn); 
```

该`then`方法向链添加一个步骤，然后返回一个新的承诺，表示扩展链的最终结果。您可以添加任意数量的步骤。

到目前为止，我们已经建立了我们的函数链，但实际上并没有发生任何事情。您可以通过调用 开始`deferred.resolve`，指定要传递给链中第一个实际步骤的初始值：

```
 deferred.resolve('initial value'); 
```

然后......仍然没有任何反应。为了确保正确观察模型更改，Angular 在调用下一次之前实际上不会调用链中的第一步`$apply`：

```
 deferred.resolve('initial value');
 $rootScope.$apply();

 // or     
 $rootScope.$apply(function() {
    deferred.resolve('initial value');
 }); 
```

那么错误处理呢？到目前为止，我们只在链中的每一步 都指定了一个*成功处理程序。*`then`还接受错误处理程序作为可选的第二个参数。这是另一个更长的 Promise 链示例，这次是错误处理：

```
 var firstFn = function(param) {
    // do something with param
    if (param == 'bad value') {
      return $q.reject('invalid value');
    } else {
      return 'firstResult';
    }
 };

 var secondFn = function(param) {
    // do something with param
    if (param == 'bad value') {
      return $q.reject('invalid value');
    } else {
      return 'secondResult';
    }
 };

 var thirdFn = function(param) {
    // do something with param
    return 'thirdResult';
 };

 var errorFn = function(message) {
   // handle error
 };

 var deferred = $q.defer();
 var promise = deferred.promise.then(firstFn).then(secondFn).then(thirdFn, errorFn); 
```

正如您在此示例中所见，链中的每个处理程序都有机会将流量转移到下一个*错误*处理程序而不是下一个*成功*处理程序。在大多数情况下，您可以在链的末尾有一个错误处理程序，但您也可以有尝试恢复的中间错误处理程序。

为了快速回到您的示例（和您的问题），我只想说它们代表了两种不同的方式，以使 Facebook 的面向回调的 API 适应 Angular 观察模型变化的方式。第一个示例将 API 调用包装在一个 Promise 中，该 Promise 可以添加到一个范围内，并且可以被 Angular 的模板系统理解。第二种采用更暴力的方法，直接在作用域上设置回调结果，然后调用`$scope.$digest()`以使 Angular 知道来自外部源的更改。

这两个示例不能直接比较，因为第一个示例缺少登录步骤。但是，通常希望将与此类外部 API 的交互封装在单独的服务中，并将结果作为 Promise 传递给控制器​​。这样，您可以将控制器与外部关注点分开，并使用模拟服务更轻松地测试它们。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-25T23:06:42.593

> 我希望得到一个复杂的答案，涵盖两者：为什么一般使用它们以及如何在 Angular 中使用它们

这是**角度承诺 MVP** *（最小可行承诺）*：[http ://plnkr.co/edit/QBAB0usWXc96TnxqKhuA?p=preview](http://plnkr.co/edit/QBAB0usWXc96TnxqKhuA?p=preview)

## 资源：

*（对于那些懒得点击链接的人）*

**索引.html**

```
 <head>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.1.5/angular.js"></script>
    <script src="app.js"></script>
  </head>

  <body ng-app="myModule" ng-controller="HelloCtrl">
    <h1>Messages</h1>
    <ul>
      <li ng-repeat="message in messages">{{ message }}</li>
    </ul>
  </body>

</html> 
```

**应用程序.js**

```
angular.module('myModule', [])

  .factory('HelloWorld', function($q, $timeout) {

    var getMessages = function() {
      var deferred = $q.defer();

      $timeout(function() {
        deferred.resolve(['Hello', 'world']);
      }, 2000);

      return deferred.promise;
    };

    return {
      getMessages: getMessages
    };

  })

  .controller('HelloCtrl', function($scope, HelloWorld) {

    $scope.messages = HelloWorld.getMessages();

  }); 
```

*（我知道它不能解决您特定的 Facebook 示例，但我发现以下片段很有用）*

通过： http: [//markdalgleish.com/2013/06/using-promises-in-angularjs-views/](http://markdalgleish.com/2013/06/using-promises-in-angularjs-views/)

* * *

**2014 年 2 月 28 日更新：** *从 1.2.0 开始，模板不再解析承诺。* [http://www.benlesh.com/2013/02/angularjs-creating-service-with-http.html](http://www.benlesh.com/2013/02/angularjs-creating-service-with-http.html)

*（plunker 示例使用 1.1.5。）*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-06T02:16:45.380

deferred 表示异步操作的结果。它公开了一个接口，该接口可用于指示状态和它所表示的操作的结果。它还提供了一种获取相关 Promise 实例的方法。

Promise 提供了一个接口，用于与其相关的 deferred 进行交互，因此，允许相关方访问状态和 deferred 操作的结果。

当创建一个 deferred 时，它的状态是 pending 并且没有任何结果。当我们 resolve() 或 reject() deferred 时，它会将其状态更改为已解决或已拒绝。尽管如此，我们仍然可以在创建延迟后立即获得相关的承诺，甚至可以为其未来结果分配交互。只有在延迟被拒绝或解决后，才会发生这些交互。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-27T05:47:17.573

在控制器中使用 promise 并确保数据可用或不可用

```
 var app = angular.module("app",[]);

      app.controller("test",function($scope,$q){
        var deferred = $q.defer();
        deferred.resolve("Hi");
        deferred.promise.then(function(data){
        console.log(data);    
        })
      });
      angular.bootstrap(document,["app"]);
```

```
<!DOCTYPE html>
<html>

  <head>
    <script data-require="angular.js@*" data-semver="1.3.0-beta.5" src="https://code.angularjs.org/1.3.0-beta.5/angular.js"></script>
  </head>

  <body>
    <h1>Hello Angular</h1>
    <div ng-controller="test">
    </div>
  </body>

</html>
```*

# ios - UIWebView 从远程 html 引用本地资源

> ID：15604201
> 
> 赞同：3
> 
> 时间：2013-03-24T21:25:51.610
> 
> 标签：ios, uiwebview, resources

我们有加载页面的 UIWebView，`http://blabla/index.html`我希望它加载一些本地资源（js/bridge.js，css/main.css，...）。所以html就像

```
<head>
<script src="file:///.../js/bridge.js"></script>
</head> 
```

但是我应该如何引用本地资源呢？也许我应该打开本地 httpd 并像这样引用它`http://127.0.0.1/js/bridge.js`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T02:34:43.533

根据我的经验，如果您想要混合使用本地和网络资源，您必须：

1.  加载下载 HTML 然后使用本地文件系统`loadHTMLString`加载它。`baseURL`当 URL 是服务器端 URL 时，我没有成功加载本地资源。我总是不得不下载 HTML 并直接加载它。

2.  所有网络源都需要完全限定（即带有“http://...”）。由于我们要将基本 URL 设置为本地文件系统，服务器代码上的本地 URL 引用将不起作用。他们必须完全合格。

3.  任何 iPhone 本地源都可以在本地引用（即没有任何`file://`或`http://`前缀），或者您可以将基本 URL 作为 HTTP REQUEST 参数传递并执行服务器端脚本以嵌入此唯一 URL。

因此，我的 iOS 代码如下所示：

```
// get my bundle local URL

NSURL *bundleUrl = [[NSBundle mainBundle] bundleURL];

// download the html from the server

NSData *data = [NSData dataWithContentsOfURL:url]; 
NSString *html = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

// load that html into my web view using a the bundle as the base URL

[self.webView loadHTMLString:html baseURL:bundleUrl]; 
```

因此，为了使其正常工作，我的 HTML 可能如下所示：

```
<html>
<body>
<table>
  <tr>
    <td>image from iOS file system using local reference</td>
    <td><img src="sample.png" /></td>
  </tr>
  <tr>
    <td>server image</td>
    <td><img src="http://myserverurl.com/sampleonserver.png" /></td>
  </tr>
</table>
</body>
</html> 
```

我在这里使用`img`标签，但我怀疑您的标签也是如此。我还假设您的本地引用在包中，但如果它们在 Documents 文件夹中，我认为它是等价的。只需确保所有本地引用都指向本地文件系统中的相对目录，并且所有服务器请求都是完全限定的。

# vb.net - 从按钮中的代码中获取平衡

> ID：15604208
> 
> 赞同：0
> 
> 时间：2013-03-24T21:26:13.803
> 
> 标签：vb.net

我在计算代码中的余额时遇到了一些麻烦。

在这个节目`(balance = balance * (1 + interestRate)`中。问题是我们在 2013 年，余额将计算 2015-2017 年，由用户在程序中单击的复选框选择，并且用户选择他们将拥有的帐户类型（即*储蓄： 7% 的利息*，*公司：5% 的利息*）。

然后，他们将单击该`mediaEstimatedFund`按钮，并要求他们为他们选择的账户类型（*储蓄、公司*或两者）输入余额。然后它应该计算他们选择的（*Year*、*Account*和*Balance amount*）的余额。

这是我拥有的代码，它没有给我正确的余额（例如：如果用户选择 2000.00 美元，*储蓄*账户为 7% 和 2016 年，它应该给我 2621.60 美元的估计预算），但它不是！

```
Year     Savings Account                Corporate Account         Saving + Corporate    

2013       $2000.00                  $1000.00                   $3000.00
2014       $2140.00                  $1050.00                   $3190.00
2015       $2289.8                   $1102.5                    $3392.3
2016       $2450.086                 $1157.625                  $3607.711      
2017       $2621.59202               $1215.50625                $3837.09827

Public Class Form1

Private Sub btnMediaEstimatedFund_Click(sender As Object, e As EventArgs) Handles btnMediaEstimatedFund.Click

    Dim interestRate, initialBalanceSavings, initialBalanceCorporate, finalBalance, theYear, balance, subTotal As Double

    txtBoxEstimatedBudget.Enabled = False
    txtBoxAgenciesNeeded.Enabled = False

    If radButtonTraditional.Checked Then

        txtBoxAgenciesNeeded.Text = 3

    ElseIf radButtonEMedia.Checked Then

        txtBoxAgenciesNeeded.Text = 2

    End If

    If checkBoxSavings.Checked Then

        interestRate = 0.07

    ElseIf checkBoxCorporate.Checked Then

        interestRate = 0.05

    ElseIf checkBoxCorporate.Checked And checkBoxSavings.Checked Then

        interestRate = 0.12

    End If

    If radButton2015.Checked Then

        theYear = 2015

    End If

    If radButton2016.Checked Then

        theYear = 2016

    End If

    If radButton2017.Checked Then

        theYear = 2017

    End If

    Dim inputtedData As String

    If checkBoxSavings.Checked Then
        Do

            inputtedData = InputBox("Please enter a balance for SAVINGS account between $500.00 and $3000.00", "Initial Savings Balance", "0.00")

            If inputtedData = "" Then

                MsgBox("User chose to cancel calculation!")

                Exit Sub

            Else

                initialBalanceSavings = CType(inputtedData, Single)

                If initialBalanceSavings > 3000 Or initialBalanceSavings < 500 Then MsgBox("Please enter a balance for SAVINGS account equal to or above $500.00 and no more than $3000.00", MsgBoxStyle.Critical, "Error")

            End If

        Loop Until initialBalanceSavings >= 500 And initialBalanceSavings <= 3000

    End If

    If checkBoxCorporate.Checked Then

        Do

            inputtedData = InputBox("Please enter a balance for CORPORATE account between $500.00 and $3000.00", "Initial Corporate Balance", "0.00")

            If inputtedData = "" Then

                MsgBox("User chose to Cancel calculation!")

                Exit Sub

            Else

                initialBalanceCorporate = CType(inputtedData, Single)

                If initialBalanceCorporate > 3000 Or initialBalanceCorporate < 500 Then MsgBox("Please enter a balance for CORPORATE account equal to or above $500.00 and no more than $3000.00", MsgBoxStyle.Critical, "Error")

            End If

        Loop Until initialBalanceCorporate >= 500 And initialBalanceCorporate <= 3000

    End If

    finalBalance = initialBalanceSavings + initialBalanceCorporate

    For theYear = 2013 To 2017

        subTotal = finalBalance * (1 + interestRate)
        finalBalance = subTotal

    Next

    txtBoxEstimatedBudget.Text = FormatCurrency(finalBalance)

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:00:20.780

```
For TheYear = 2013 to 2016
  SubTotal = balance * (1 + interestRate)
  balance = SubTotal
Next 
```

# 更新

上面的代码块只是为了给你一个如何做循环的想法，以及应该在循环内计算什么。要获得实际答案，您必须记住 2013 年是当前年份，因此您不会实际计算该年的利息。实现这一点的关键是循环的格式，实际上应该从下一年开始。

```
For Year = 2013 + 1 to 2016
  'blah blah blah
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T09:17:02.880

我不允许编辑 Zafs 答案以包含额外的行，所以这是我的看法。重要的一点是初始化`finalBalance`是在for循环**之外的。**

```
finalBalance = initialBalanceSavings + initialBalanceCorporate
For theYear = 2013 To 2016
  subtotal = finalBalance * (1 + interestRate)
  finalBalance = subTotal
Next 
```

# drawing - Kinetic JS 绘制形状和放大和缩小

> ID：15604209
> 
> 赞同：0
> 
> 时间：2013-03-24T21:26:14.213
> 
> 标签：drawing, zooming, kineticjs

我正在尝试使用 KineticJS 在图像上绘制不同的形状，并使用不同的按钮进行放大和缩小，每个元素都可以通过 itsetlf 正常工作，但是当我在同一页面上组合所有功能时，没有任何效果。这是绘制线条的脚本：

```
 if (drawnewline) {
            document.getElementById('dLine').onclick = function() {
                    layer.on("mousedown", function () {
                        if (moving) {
                            moving = false;
                            layer.draw();
                        } else {
                            var mousePos = stage.getMousePosition();
                            x1 = mousePos.x;
                            y1 = mousePos.y;
                            line = new Kinetic.Line({
                                points: [0, 0, 50, 50],
                                stroke: "red"
                            });
                            layer.add(line);
                            line.getPoints()[0].x = mousePos.x;
                            line.getPoints()[0].y = mousePos.y;
                            line.getPoints()[1].x = mousePos.x;
                            line.getPoints()[1].y = mousePos.y;
                            moving = true;
                            layer.drawScene();
                        }
                    });

                    layer.on("mousemove", function () {
                        if (moving) {
                            var mousePos = stage.getMousePosition();
                            var x = mousePos.x;
                            var y = mousePos.y;
                            line.getPoints()[1].x = mousePos.x;
                            line.getPoints()[1].y = mousePos.y;
                            moving = true;
                            layer.drawScene();
                        }
                    });

                    layer.on("mouseup", function () {
                        moving = false;
                        var mousePos = stage.getMousePosition();
                        x2 = mousePos.x;
                        y2 = mousePos.y;
                        $("#distance").val(calculateDistance(x1, y1, x2, y2));

                    });
                };
            }; 
```

完整的脚本可以在[http://jsfiddle.net/MEQxq/](http://jsfiddle.net/MEQxq/)查看。我会很感激你的建议，并在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:15:19.007

我通过在 getElementById 中移动“if (drawnewline)”解决了这个问题！还要删除鼠标操作，例如 layer.off('mousemove');。

# jquery - JSRender：如何比较 if 语句中的变量？

> ID：15604211
> 
> 赞同：0
> 
> 时间：2013-03-24T21:26:25.307
> 
> 标签：jquery, jsrender

我的问题可能很基本，但是如何比较设置为值的变量？

```
{{setvar "currentDate" 0 /}}

{{for Data}}
    {{if :~getvar("currentDate") > 5}}
        <div style="background-color: #000; color: #FFF;">currentDate:{{:~getvar("currentDate")}}</div>
    {{/if}}

    <div>
        <h1>{{>Name}}</h1>
        <h2>{{>~date(StartTime, "")}} - {{>~date(EndTime, "")}}</h2>
        <p>{{>Location}}: {{>Link}}</p>
    </div>

    {{:~increment("currentDate")}}
{{/for}} 
```

如果有人可以帮助我，我将不胜感激。

谢谢！

-埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:22:40.633

我可能会通过帮手来处理它；

在渲染模板之前在您的 JS 中：

```
views.helpers({
        curDate: function(increment) {
                  var ret = 0;
                  return inc ? ++ret : ret;
                }
    }); 
```

并像这样更改您的模板；

```
{{if ~curDate() > 5}} 
```

和

```
{{:~curDate(true)}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-06T18:36:10.737

这是对上一个答案的编辑，您应该在函数之前编写 ret 变量，如下所示。否则 ret 将坚持 0 或 1 的返回值：

```
var ret = 0;
views.helpers({
        curDate: function(increment) {
                  return inc ? ++ret : ret;
                }
    }); 
```

# haskell - reactive-banana reactimate 检索小部件 textCtrl 值，如 textCtrlGetValue

> ID：15604213
> 
> 赞同：4
> 
> 时间：2013-03-24T21:26:30.730
> 
> 标签：haskell, reactive-programming, reactive-banana

我想检索小部件值。

在下面，按下按钮 b 检索 s_in 并在本机 wxhaskell 中打印它。

```
b <- button f [text:= "print text in console", 
               on command := textCtrlGetValue s_in >>= putStrLn] 
```

我喜欢在 reactive-banana 做同样的事情，但在下面，我得到“ff”而不是 s_in2 的 textCtrlGetValue

```
s_in  <- textCtrl f  []
s_in2 <- textCtrl f  []

b <- button f [text:= "print text in console", 
               on command := textCtrlGetValue s_in >>= putStrLn]

let networkDescription :: forall t. Frameworks t => Moment t ()
    networkDescription = do

    b_in  <- behaviorText s_in "init"
    b_in2 <- behaviorText s_in2 "ff"
    e_butt <- event0 b command

    -- I need an event, triggered by the button, and filled by the b_in2, 

    sink s_in2 [text :== id <$> b_in]     

    reactimate $   (\x -> putStrLn x)  <$> b_in2 <@ e_butt 
```

接收器在 s_in 之后会很好地更新 sin_2。但是下面的反应行没有让我得到我希望得到的 s_in/b_in 的 textCtrlGetValue 。我怎么才能得到它 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:05:14.677

使用该`behaviorText`函数获得的行为只会对*用户*对编辑框所做的更改做出反应。它不*包括*程序*更改*，例如使用`sink`函数执行的更改。

区分用户事件和编程事件对于编写具有[双向数据流](http://apfelmus.nfshost.com/blog/2012/03/29-frp-three-principles-bidirectional-gui.html)的响应式 UI 元素至关重要。有关演示，请参阅[CurrencyConverter 示例](http://www.haskell.org/haskellwiki/Reactive-banana/Examples#CurrencyConverter)。

如果您想跟踪程序更改，我建议留在“FRP 世界中”，即使用该行为`b_out = id <$> b_in`而不是尝试从小部件中读取文本。

（顺便说一句，`id <$> x = x`。）

# sharepoint - 如何以编程方式从 sharepoint 2010 打开 Outlook 撰写邮件

> ID：15604214
> 
> 赞同：-1
> 
> 时间：2013-03-24T21:26:33.247
> 
> 标签：sharepoint, sharepoint-2010, outlook, office-interop

我需要以编程方式从共享点打开 Outlook 撰写邮件，我尝试了此代码，但它只打开 Outlook 进程，但没有出现撰写邮件窗口

```
 using (SPSite currentSite = new SPSite(SPContext.Current.Site.ID))
            {
                using (SPWeb currentWeb = currentSite.OpenWeb(SPContext.Current.Web.ID))
                {
                    WebURL = currentWeb.Url;
                    currentWeb.AllowUnsafeUpdates = true;
                    SPList correspondences = currentWeb.Lists.TryGetList("list1");

                    SPListItem correspondenceItem = correspondences.GetItemById(id);
                    WebURL = currentWeb.Url;
                    SPAttachmentCollection CorrespondenceAttachemt = correspondenceItem.Attachments;

                                           Microsoft.Office.Interop.Outlook.Application oApp = new Microsoft.Office.Interop.Outlook.Application();
                    Microsoft.Office.Interop.Outlook._MailItem oMailItem = (Microsoft.Office.Interop.Outlook._MailItem)oApp.CreateItem(Microsoft.Office.Interop.Outlook.OlItemType.olMailItem);

                    oMailItem.Body = body;
                    oMailItem.Subject = title;

                    oMailItem.Display();

                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T02:40:17.953

该代码在 SharePoint 服务器上运行，对吗？在这种情况下，您将在服务器端而不是客户端启动 Outlook。不仅如此，Outlook（就像任何其他 Office 应用程序一样）不能在服务中使用。

为什么不使用 mailto 网址？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:50:27.857

默认情况下 oMailItem.Display 为 False。将其更改为真。

```
 oMailItem.Display ( true ); 
```

现在应该可以了。

# python - 在 Qt 中对齐绘图

> ID：15604215
> 
> 赞同：0
> 
> 时间：2013-03-24T21:26:48.047
> 
> 标签：python, qt, qwt

我希望能够很好地对齐描述和以下配置的情节： ![在此处输入图像描述](../Images/6d77d3239324ecfba872e025cc37b68e.png)

我想实现每个情节都具有相同的大小，即它们都以相同的假想垂直线结束。通道名称应对齐。目前，我正在使用 QGridLayout。这些图是使用 Qwt 创建的。

# php - 带有负数作为输入的 PHP pow() 不起作用

> ID：15604220
> 
> 赞同：4
> 
> 时间：2013-03-24T21:27:35.983
> 
> 标签：php

PHP`pow()`不想处理以下内容：

```
 pow(-5,1/3); 
```

虽然实际上它[应该工作](http://www.wolframalpha.com/input/?i=%28-1%29%5E%281%2F3%29)。我怎样才能在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T21:30:41.017

你基本上在这里取负数的第三根。

这在实数空间中并不总是可能的。因此，在某些情况下，您需要一个虚数单位来求解该方程。

似乎 php 只输出`NAN`底数为负且指数 < 1 的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T21:38:05.667

正如 PeeHaa 所指出的，[文档](http://php.net/manual/en/function.pow.php#example-3364)指出，对于某些指数，结果可能是“奇怪的”。

在代数上以下是有效的：

```
-x^(p) == -1*(x^p) 
```

您可以将其用作解决方法。用代码说话：

```
$x = pow(5,1/3)*-1; 
```

但是要小心像 n/m 这样的指数，其中 m 是偶数！

您也可以使用以下函数来覆盖它：

```
function real_pow($base, $exponent){
  if($base < 0){
    if($exponent >= 1) return pow($base * -1, $exponent) * -1;
    else{
      if(is_nan(pow($base, $exponent))) return false;
      else return pow($base, $exponent);
    }
  }else{
    return pow($base, $exponent);
  }
} 
```

如果结果不是复数，此函数将返回有效的 pow。如果是，它将返回 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T22:08:07.017

*数学*上-5 ^(1/3)被简单地定义为 -5 的立方根，约为 -1.71。

但是，没有办法精确地表示浮点数的 1/3。所以，你要求 PHP 计算类似 -5 ^(0.33333333333333331482961)的东西。

现在，如果该指数的精确有理展开式有一个偶数分母，则结果纯属虚构。如果精确的有理展开式有一个奇数分母，则结果是纯实数。问题是由于精度不够，无法确定分母是“偶数”还是“奇数”。

所以，PHP 不会打扰。它只是告诉你你做不到，这就是故事的结局。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T21:52:13.467

```
$base=-5;
$exponent=1/3;

$result = ($base<0?-1:1)*pow(abs($base),$exponent); 
```

它对于具有偶数分母的有理数是无效的，因为它会产生 PHP 无法处理的复数。您可以编写自己的类/函数或用谷歌搜索，网上有一些，但我从未测试过。

# c++ - C ++简单的If语句使程序的其余部分不执行

> ID：15604222
> 
> 赞同：0
> 
> 时间：2013-03-24T21:27:45.957
> 
> 标签：c++, conditional-statements

我有一个任务，我必须从文件中读取并对其执行各种计算并将答案写入输出文件。一切都很顺利，直到我走到这一步：

“重新读取文件并计算文件中整数的总和，只要总和不超过 1000。使用标志控制的循环结构。”

我的代码片段如下：

```
dataFile2.close();
dataFile2.clear();
dataFile2.open("J:\\datafile2.txt");

sum = 0;
while(sum < 1000)
{
    dataFile2 >> num;
    sum = sum + num;
    if(sum > 1000)
        sum = sum - num;
}

answers << "The sum of the integers not exceeding 1000 is " << sum << endl;
cout << "The sum of the integers not exceeding 1000 is " << sum << endl;
return 0; 
```

我的变量已经被声明了。当我取出 if 语句时，总和加上最后一个数字，然后总和超过 1000。当保留 If 语句时，不执行答案和 cout 语句，也没有编译器警告或错误。

对此的任何帮助将不胜感激。

-ThePoloHobo

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:22:39.670

因为似乎没有人想给你一个正确的答案......（公平地说，如果没有真正为你做你的工作，很难给出一个正确的答案）。

您的代码中有两个问题。第一个是您使用标志的要求。正如我在评论中所说，惯用的解决方案不会使用标志，但使用标志没有问题。标志是一个布尔变量，它将在 中进行测试 `while`，并且当您发现某些让您想要离开循环的东西时，它将在循环中的条件中设置。

第二个问题是您在使用`num`时没有检查输入是否成功。您必须在操作员*之后*`>>`进行检查 。惯用的检查方法（也是没有该语言经验的人应该使用的唯一方法）是将流视为布尔值：

```
dataFile2 >> num;
if ( dataFile2 ) {
    //  Input succeeded...
} else {
    //  Input failed for some reason, maybe end of file
} 
```

由于流上的所有操作都返回对流的引用，因此通常合并测试和输入：

```
if ( dataFile2 >> num ) {
    //  succeeded
} else {
    //  failed
} 
```

`if`（就个人而言，我发现在一个或一个可怕的条件下修改状态的想法`while`。但是这个习语是如此普遍，你可能应该使用它，原因很简单，这是每个人都期望的。）

在教学环境中，将任何失败都视为文件结尾可能是可以接受的，只需将测试移至`while`（当然，除非您被要求使用标志）。在其他情况下，您需要考虑这样一个事实，即失败可能是由于输入中的语法错误造成的——有人插入`"abc"`到您期望数字的文件中。有很多方法可以处理这个问题，所有这些都超出了您尝试执行的范围，但请注意，在检测到故障*后*，您可以询问流以了解原因。特别是，如果 `dataFile2.eof()`是真的，那么失败是（可能）由于你已经阅读了所有的数据，一切都很好。（换句话说，读取数据失败不一定是错误。它可能只是文件结束。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-24T21:32:59.313

您似乎没有使用标志变量，这在这种情况下可能会有所帮助。这样的事情应该解决它：

```
sum = 0;
bool sumUnder1000 = true; //Or the C++ equivalent, I'm a bit rusty
while(sumUnder1000)
{
    if(!dataFile2.good()){
        sumUnder1000 = false; //We've reached end of file or an error has occurred
        return;
    }
    dataFile2 >> num;
    sum = sum + num;
    else if(sum > 1000){
        sum = sum - num;
        sumUnder1000 = false;
    }
} 
```

# java - Triangle_Strip 应该包装吗？

> ID：15604223
> 
> 赞同：1
> 
> 时间：2013-03-24T21:28:07.783
> 
> 标签：java, android, opengl-es, opengl-es-2.0

我遇到了一个我前一段时间工作过的问题（[网格的 VBO 不正确：一些三角形是连接的，不应该 [2D]](https://stackoverflow.com/questions/12161633/incorrect-vbo-for-mesh-some-triangles-are-connected-and-shouldnt-2d)），并且由于我的着色器变得更加复杂并且出现了与此相关的不同问题，我需要从根本上解决它！

这是VBO内容：

```
[0.0, 0.0,
 0.0, 240.0,

 10.0, 0.0,
 10.0, 240.0,

 20.0, 0.0,
 20.0, 240.0,

 30.0, 0.0,
 30.0, 240.0

 and so on up to

 1190.0, 0.0,
 1190.0, 240.0,

 1200.0, 0.0,
 1200.0, 240.0,

 1210.0, 0.0,
 1210.0, 240.0] 
```

所以数组长度是 244 点 * 2 坐标 = 488 个元素。

这是一个框架的opengl跟踪

```
glClearColor(red = 0,100000, green = 0,100000, blue = 0,100000, alpha = 1,000000)
glClear(mask = 16384)
glEnable(cap = GL_BLEND)
glBindBuffer(target = GL_ARRAY_BUFFER, buffer = 2)
glDisableVertexAttribArray(index = 1)
glVertexAttribPointer(indx = 0, size = 2, type = GL_FLOAT, normalized = false, stride = 8, ptr = 0x0)
glUniformMatrix4fv(location = 1, count = 1, transpose = false, value = [0.0025, 0.0, 0.0, 0.0, 0.0, 0.004166667, 0.0, 0.0, 0.0, 0.0, -1.0, 0.0, -1.0, -1.0, 0.0, 1.0])
glUniform1i(location = 5, x = 0)
glUniform4f(location = 3, x = 0,000000, y = 0,000000, z = 1,000000, w = 0,500000)
glUniform1f(location = 4, x = 2,491089)
glUniform1f(location = 0, x = 1780,000000)
glUniformMatrix4fv(location = 2, count = 1, transpose = false, value = [-100.0, 40.0, 260.0, 430.0, 165.6131, 122.20027, 247.55757, 189.05222, 680.0, 880.0, -268.66666, -268.66666, 126.442535, 1.7712338, 160.0, 160.0])
glDrawArrays(mode = GL_TRIANGLE_STRIP, first = 0, count = 486)
glEnableVertexAttribArray(index = 1)
glDisable(cap = GL_BLEND)
glEnable(cap = GL_BLEND)
glBindBuffer(target = GL_ARRAY_BUFFER, buffer = 3)
glDisableVertexAttribArray(index = 1)
glVertexAttribPointer(indx = 0, size = 2, type = GL_FLOAT, normalized = false, stride = 8, ptr = 0x0)
glUniformMatrix4fv(location = 1, count = 1, transpose = false, value = [0.0025, 0.0, 0.0, 0.0, 0.0, 0.004166667, 0.0, 0.0, 0.0, 0.0, -1.0, 0.0, -1.0, 1.0, 0.0, 1.0])
glUniform1i(location = 5, x = 0)
glUniform4f(location = 3, x = 0,000000, y = 0,500000, z = 1,000000, w = 0,500000)
glUniform1f(location = 4, x = 2,491089)
glUniform1f(location = 0, x = 1780,000000)
glUniformMatrix4fv(location = 2, count = 1, transpose = false, value = [-60.0, 150.0, 330.0, 550.0, -71.13025, -193.20978, -11.679321, -223.35025, 740.0, 990.0, -268.66666, -268.66666, -394.54395, -270.3169, -160.0, -160.0])
glDrawArrays(mode = GL_TRIANGLE_STRIP, first = 0, count = 486)
glEnableVertexAttribArray(index = 1)
glDisable(cap = GL_BLEND)
eglSwapBuffers 
```

我的着色器有点长且复杂，但它除了沿 Y 轴移动 Y 分量不为 0 的顶点之外什么也不做。统一值是正确的，着色器工作正常。

当我使用 TRIANGLE_STRIP 渲染时，屏幕显示连接第一个顶点 (0,0) 和最后一个顶点 (1210, ???) 的线条（??? 因为我的着色器移动了它，但它不在 240 处。我知道在哪里它是，它是它应该在的地方，但它不断变化。）

![TRIANGLE_STRIP 渲染故障](../Images/584873cecd6c3d88912084b8ce8e46df.png)

使用 LINE_STRIP 渲染只是确认了问题。

![LINE_STRIP 渲染故障](../Images/55e2710ecf818237fd59d3c8713bec5b.png)

那么，这是 TRIANGLE_STRIP 的预期行为吗？还是有什么问题？阅读 opengl 规范，它接缝它不应该包装，但它确实（在不同的设备中，所以它不是特定的驱动程序问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:09:30.123

完全找到了解决方案。

我将数组的长度减去 2 作为要绘制的顶点数。错误是我的顶点数组同时包含 X 和 Y 坐标，因此它实际上是要绘制的基元数量的两倍。

我现在使用array.length / 2，一切正常。

顺便说一句，当我发现它时，我认为性能会增加。相反，它没有发生。

# linux - 在引导时调试 Linux 内核

> ID：15604225
> 
> 赞同：1
> 
> 时间：2013-03-24T21:28:24.617
> 
> 标签：linux, linux-kernel

我已经编译了带有配置选项的 Linux 内核`ROOT_NFS`。我现在的问题是屏幕打印对我来说更快看到错误，我找不到任何关于解决这个问题的最佳方法的文档。我在 VirtualBox 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:01:59.450

有`Documentation/serial-console.txt`你可以调查的。串行控制台传统上用于调试 linux 启动问题，然后您可以将所有屏幕截图保存在不同的 PC 上。这对于 virtualbox 用例也应该是可能的，尽管我不知道配置串行访问会有多困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T22:06:11.643

该`dmesg`命令打印内核的循环日志缓冲区。你的消息可能在那里。

# maven - 如何配置 maven settings.xml 以访问 apache 代理后面的 nexus

> ID：15604227
> 
> 赞同：4
> 
> 时间：2013-03-24T21:28:51.937
> 
> 标签：maven, nexus, mod-proxy, http-proxy

我在从 nexus 获取工件时遇到了麻烦，我希望社区可以帮助我。在 nexus Web 应用程序中访问和工作不是问题（我已将 Base URL 设置为[https://www.fakesitename.com/nexus](https://www.fakesitename.com/nexus)）。

[所有对https://www.fakesitename.com/nexus](https://www.fakesitename.com/nexus)的调用都被重定向/转发/代理（正确的术语是什么？）到网络上的内部服务器

```
<VirtualHost *:443>
  ServerName www.fakesitename.com
  ServerAdmin webmaster@mysite.com

  DocumentRoot /var/www
  <Directory />
    Options FollowSymLinks
    AllowOverride None
  </Directory>

  ErrorLog ${APACHE_LOG_DIR}/error.log
  LogLevel warn
  CustomLog ${APACHE_LOG_DIR}/access.log combined

  <Proxy *>
    AddDefaultCharset Off
    Order deny,allow
    Allow from all
  </Proxy>

  ProxyRequests Off
  ProxyPreserveHost On

  ProxyPass /nexus http://192.168.0.178:8081/nexus
  ProxyPassReverse /nexus http://192.168.0.178:8081/nexus

  SSLEngine on
  SSLCertificateFile /certs/mysite/ssl.crt
  SSLCertificateKeyFile /certs/mysite/ssl.key
</VirtualHost> 
```

settings.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
          http://maven.apache.org/xsd/settings-1.0.0.xsd">
  <mirrors>
    <mirror>
      <id>public</id>
      <mirrorOf>*</mirrorOf>
      <url>https://www.fakesitename.com/nexus/content/groups/public</url>
    </mirror>
  </mirrors>

<!-- What should be in here?
  <proxies>
    <proxy>
      <id>myproxy</id>
      <active>true</active>
      <protocol>https</protocol>
      <host>www.fakesitename.com</host>
      <port>443</port>
      <nonProxyHosts>127.0.0.1|192.168.0.178</nonProxyHosts>
    </proxy>
  </proxies>
-->
  <servers>
    <server>
      <id>releases</id>
      <username>deployment</username>
      <password>deployment123</password>
    </server>
    <server>
      <id>snapshots</id>
      <username>deployment</username>
      <password>deployment123</password>
    </server>
  </servers>
  <profiles>
    <profile>
      <id>nexus</id>
      <repositories>
        <repository>
          <id>central</id>
          <url>https://www.fakesitename.com/nexus/content/groups/public</url>
          <releases><enabled>true</enabled></releases>
          <snapshots><enabled>true</enabled></snapshots>
        </repository>
      </repositories>
      <pluginRepositories>
        <pluginRepository>
          <id>central</id>
          <url>https://www.fakesitename.com/nexus/content/groups/public</url>
          <releases><enabled>true</enabled></releases>
          <snapshots><enabled>true</enabled></snapshots>
        </pluginRepository>
      </pluginRepositories>
    </profile>
  </profiles>
  <activeProfiles>
    <activeProfile>nexus</activeProfile>
  </activeProfiles>
</settings> 
```

例如，当我运行一个项目的*mvn clean*时，代理部分被注释掉了，我得到*...peer not authenticated...*

```
 [INFO] Scanning for projects...
 Downloading: https://www.fakesitename.com/nexus/content/groups/public/com/fakesitename/poms/super/1.3/super-1.3.pom
[ERROR] The build could not read 1 project -> [Help 1]
[ERROR]   
[ERROR]   The project com.fakesitename.library:application:1.3-SNAPSHOT (/tmp/application/pom.xml) has 1 error
[ERROR]     Non-resolvable parent POM: Could not transfer artifact com.fakesitename.poms:super:pom:1.3 from/to public (https://www.fakesitename.com/nexus/content/groups/public): peer not authenticated and 'parent.relativePath' points at wrong local POM @ line 5, column 11 -> [Help 2]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException
[ERROR] [Help 2] http://cwiki.apache.org/confluence/display/MAVEN/UnresolvableModelException 
```

j

并且该部分没有被注释掉

```
[INFO] Scanning for projects...
Downloading: https://www.fakesitename.com/nexus/content/groups/public/com/fakesitename/poms/super/1.3/super-1.3.pom
mar 24, 2013 10:12:39 EM org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultRequestDirector tryConnect
INFO: I/O exception (org.apache.maven.wagon.providers.http.httpclient.NoHttpResponseException) caught when connecting to the target host: The target server failed to respond
mar 24, 2013 10:12:39 EM org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultRequestDirector tryConnect
INFO: Retrying connect
mar 24, 2013 10:12:39 EM org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultRequestDirector tryConnect
INFO: I/O exception (org.apache.maven.wagon.providers.http.httpclient.NoHttpResponseException) caught when connecting to the target host: The target server failed to respond
mar 24, 2013 10:12:39 EM org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultRequestDirector tryConnect
INFO: Retrying connect
mar 24, 2013 10:12:39 EM org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultRequestDirector tryConnect
INFO: I/O exception (org.apache.maven.wagon.providers.http.httpclient.NoHttpResponseException) caught when connecting to the target host: The target server failed to respond
mar 24, 2013 10:12:39 EM org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultRequestDirector tryConnect
INFO: Retrying connect
[ERROR] The build could not read 1 project -> [Help 1]
[ERROR]   
[ERROR]   The project com.fakesitename.library:application:1.3-SNAPSHOT (/tmp/application/pom.xml) has 1 error
[ERROR]     Non-resolvable parent POM: Could not transfer artifact com.fakesitename.poms:super:pom:1.3 from/to public (https://www.fakesitename.com/nexus/content/groups/public): The target server failed to respond and 'parent.relativePath' points at wrong local POM @ line 5, column 11 -> [Help 2]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException
[ERROR] [Help 2] http://cwiki.apache.org/confluence/display/MAVEN/UnresolvableModelException 
```

如果我将设置文件更改为 `http://192.168.0.178:8081` 直接使用，它会成功。

```
[INFO] Scanning for projects...
Downloading: http://192.168.0.178:8081/nexus/content/groups/public/com/fakesitename/poms/super/1.3/super-1.3.pom
Downloaded: http://192.168.0.178:8081/nexus/content/groups/public/com/fakesitename/poms/super/1.3/super-1.3.pom (33 KB at 157.3 KB/sec)
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO] 
...
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.243s
[INFO] Finished at: Sun Mar 24 22:22:01 CET 2013
[INFO] Final Memory: 6M/17M
[INFO] ------------------------------------------------------------------------ 
```

所以，我真的不知道该怎么办。我希望能够在 settings.xml 文件中使用“官方”https 地址

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T13:29:38.887

“peer not authenticated”通常意味着服务器提供的 SSL 证书没有由客户端 JRE 知道的授权（例如自签名）签名。

如果是这种情况，您需要将 CA 证书导入 JRE 的信任库（或用您自己的信任库覆盖它）。

# android - ListView / GridView 中按下项目的默认背景颜色

> ID：15604231
> 
> 赞同：3
> 
> 时间：2013-03-24T21:29:18.597
> 
> 标签：android, listview, gridview, background, resources

我正在尝试制作一个可选择的 GridView。所以我需要这个的默认颜色（当你点击项目时，它应该保持选中状态）。我只需要按下项目的默认（浅蓝色）颜色（如列表视图中的蓝色）。

`view.setBackgroundResource(android.R.drawable.list_selector_background);`不起作用。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T05:47:30.717

我相信这就是你要找的。[这里提出了一个非常相似的问题。](https://stackoverflow.com/questions/9250215/default-selector-background-in-clickable-views)

简而言之，这应该是您的答案：

> 它是 list_selector_holo_dark 或等效的全息灯版本；这些是 Honeycomb 及更高版本中的默认值。list_selector_background 是非全息版本，用于 Gingerbread 及以下版本。

为了清楚起见，我引用了/u/Espiandev。

# python - 具有非 ASCII 字符的 Python 更改目录

> ID：15604236
> 
> 赞同：1
> 
> 时间：2013-03-24T21:29:59.400
> 
> 标签：python

我正在使用 python 命令

```
os.chdir(base_dir) 
```

更改目录。但是字符串 base_dir 包含 ASCII 范围之外的 utf-8 字符。Windows 资源管理器 (Windows 7) 上的目录列表以非 ASCII 字符显示目录名称，对应于路径 base_dir 。

但是，当我执行上述命令时，我得到了错误

```
WindowsError: [Error 2] The system cannot find the file specified: 'C:/Users/abhishek/Desktop/scripting/dir_struct/\xd0\x98\xd0\xbd\xd1\x84\xd0\xbe\xd1\x80\xd0\xbc\xd0\xb0\xd1\x82\xd0\xb8\xd0\xba\xd0\xb0' 
```

有人可以告诉我如何在 python 中成功导航目录吗？

我的电脑的默认语言是英语。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T21:31:09.593

请改用 unicode 路径：

```
os.chdir(base_dir.decode('utf8')) 
```

Windows 路径是 UTF-16 编码的，但 Python 知道如何正确处理 unicode 路径并将它们转换为适合您平台的正确文件系统编码。

# backbone.js - Backbone.js 模型默认值是否会覆盖我放入视图的 null、未定义等？

> ID：15604237
> 
> 赞同：0
> 
> 时间：2013-03-24T21:30:00.933
> 
> 标签：backbone.js, overriding, default-value

我正在迈出第一步，如果 View 获取或来自外部`Backbone.js`的值，我在理解如何设置默认值方面遇到了一些问题：`undefined``null`

```
var Status = {
    Models: {},
    Collections: {},
    Views: {},
    Templates:{}
}
Status.Models.Message = Backbone.Model.extend({
    defaults:{
        icon:'path/info-icon.png',
        type:'warning',
        title:'Information',
        message:'There is nothing to read here.'
    },
    initialize:function () {
        console.log("Status.Models.Message initialized");
    }
});

Status.Views.Message = Backbone.View.extend({
    initialize:function () {
        console.log("Status.Views.Message initialized");
    },
    render:function () {
        var template = _.template($('#status-message-template').html());
        $('body').append($(this.el).attr('id', 'status-message').html(template(this.model.toJSON())));
        var timer = setTimeout(function () {$('#status-message').addClass('enter')}, 1500);

    }
}); 
```

我想找到一种方法让`Backbone.js` **覆盖** `data`参数并强制它`defaults`在它们是的情况下使用值`""`，`undefined`或者`null`。

```
$(function(){
    var data = {
       type:undefined,
       message:'This is the new message!'
    };
    var messageModel = new Status.Models.Message ();

    messageModel.set({
        type: data.type, // how to let it get defaults.type because data.type is undefined?
        message: data.message
    });

    var messageView = new Status.Views.Message({
        model:messageModel
    });
    messageView.render();
}); 
```

是否存在一种简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:31:15.323

您的意思是，如果 data.type 未定义，如何获取默认值？

您需要定义一个默认值，然后分配一个未定义的值。通过执行 data.type || data.type_default，自动返回未定义的那个。

```
var data = {
 type : undefined,
 default_type : "something",
 ...
}

messageModel.set({
 type: data.type || data.default_type,
 ...
}); 
```

# delphi - 如何使用 Delphi 和 Synapse 一次为多个收件人发送电子邮件？

> ID：15604243
> 
> 赞同：4
> 
> 时间：2013-03-24T21:30:14.490
> 
> 标签：delphi, email, synapse

拜托，我正在尝试解决这个“问题”超过 12 个小时......几乎快疯了！[我认为使用 Delphi 和 Synapse ( http://synapse.ararat.cz](http://synapse.ararat.cz) )一次为多个收件人（目的地）发送相同的电子邮件是不可能的。请有人告诉我我错了:)

好吧，我有一个 sEmail 变量，我在其中获取用分号 (;) 分隔的电子邮件，就像这样：

```
sEmails := 'email1@test.com.br;email2@teste.com.br'; 
```

这是我正在使用的代码：

```
dSMTP := TSMTPSend.Create;
dSMsg := TMimeMess.Create;
Try 
  With dSMsg, Header Do
  Begin 
    Date := Now;
    Priority := mp_Normal;
    CharsetCode := ISO_8859_1;
    From := 'email@gmail.com';
    ToList.Delimiter := ';';
    ToList.DelimitedText := sEmails;
    Subject := 'Message Subject';
    dPart := AddPartMultipart('mixed', nil);
    AddPartHTML('<h1>Message Text</h1>', dPart);
    EncodeMessage;
  end;
  With dSMTP Do
  Begin
    TargetHost := 'smtp.gmail.com';
    TargetPort := '587';
    AutoTLS := True;
    UserName := 'email@gmail.com';
    Password := 'password';
    Try
      If Login Then
      Begin
        If MailFrom('email@gmail.com', Length('email@gmail.com')) Then
          If MailTo(sEmails) Then MailData(dSMsg.Lines);
        Logout;
      end;
    Except
      On E: Exception Do ShowMessage(E.Message);
    end;
  end;
Finally
  dSMsg.Free;
  dSMTP.Free;
end; 
```

我已经尝试过这样的：

```
If Login Then
Begin
  If MailFrom('email@gmail.com', Length('email@gmail.com')) Then
    If MailTo(dSMsg.Header.ToList[0]) Then MailData(dSMsg.Lines);
  Logout;
end; 
```

...但随后仅发送了第一封电子邮件:(即使将其余电子邮件添加到 Header.CCList 中。

在另一个测试中，我尝试将点分号更改为逗号（，），但问题相同......

拜托，拜托，有人能告诉我我做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T21:51:30.027

根据以下[文档`SendTo`](http://synapse.ararat.cz/doc/help/)：

> 将“Maildata”（没有任何 SMTP 标头的电子邮件文本！）从“MailFrom”电子邮件地址发送到带有“Subject”的“MailTo”电子邮件地址。（如果您需要不止一个接收器，则用逗号分隔它们的地址）。

所以这样的事情**应该可以**工作（但见下文，因为它显然没有）：

```
sEMails := 'joe@gmail.com,fred@gmail.com,mary@gmail.com';
....

if MailTo(sEMails) then 
  MailData(dSMsg.Lines); 
```

似乎没有办法在`SMTPSend`组件中正确设置多个电子邮件地址。您必须单独发送每个。但是，您可以比自己解析地址更容易，因为您已经`dSMsg.Header.ToList`在代码的前面添加了它们：

```
// Declare i as an integer variable, and post all the send to addresses
// one at a time to the MailTo() function
for i := 0 to dSMsg.Header.ToList.Count - 1 do
   MailTo(dMsg.Header.ToList[i]);

// Now send the mail body
MailData(dSMsg.Lines) 
```

IMO，Synapse SMTP 支持级别太低而无法轻松使用，除非您出于某种原因特别需要该低级别支持。Indy（预装了 Delphi）和[ICS](http://www.overbyte.be)都提供了更简单的实现`SMTP`，都支持文本和 HTML 电子邮件以及 MIME 编码附件，并且都支持使用 gmail 所需的 TLS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:39:26.293

这是我如何发送给多个收件人的代码示例。首先，您需要设置您的 TMimeMess（本例中为 var Mime）。

```
uses
  mimemess, smtpsend, mimepart, synautil; //not sure if this list is complete

var 
  SMTP: TSMTPSend;
  s, t: string;
  Mime: TMimeMess;

...

{ log in to SMTP server }
if SMTP.Login then
begin
  { set sender address and total send size }
  if SMTP.MailFrom(synautil.GetEmailAddr({your from address}), 
    Length(Mime.Lines.Text)) then
  begin
    s := {your comma separated e-mail string};

    { add all recipient addresses }
    repeat
      { split addresses by comma and send to each }
      t := synautil.GetEmailAddr(Trim(FetchEx(s, ',', '"')));
      if (t <> '') then
        Result := SMTP.MailTo(t);

      if not Result then
      begin
        //handle failure if necessary here

        Break;
      end;
    until s = '';

    { now send e-mail content }
    if Result then
      Result := SMTP.MailData(Mime.Lines);
  end;

  { and log out }
  SMTP.Logout; 
```

# javascript - 如何从选择列表中的html5数据属性中获取数据到数组中？

> ID：15604245
> 
> 赞同：0
> 
> 时间：2013-03-24T21:30:19.720
> 
> 标签：javascript, jquery, html5-data

我基本上必须通过表单加载上传一些数据，以便在页面上的 javascript 操作中使用。我正在上传如下数据：

```
<select id="allrecords">
 <option data-s-type="X" data-n-type="9" value="xxx">xxx</option>
 <option data-s-type="X" data-n-type="9" value="lmn">lmn</option>
 <option data-s-type="X" data-n-type="8" value="xyz">xyz</option>
 <option data-s-type="Y" data-n-type="3" value="zzz">zzz</option>
...
</select> 
```

从这些数据中，data-s-type 和 data-n-type 属性用于找出哪些值将被添加到数组中，该数组稍后将在程序中使用。我无法想出使用此选择列表获取该数组的方法。

例如当 data-s-type="X" AND data-n-type=9, array = [xxx,lmn]

我不必将数据作为隐藏选择列表上传，如果您有更好的建议请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T21:32:55.683

`$.map`创建数组，并在函数内部检查所需的值，如果它们匹配，则将元素值返回给数组，如下所示：

```
var arr = $.map($('#allrecords option'), function(el,i) {
    if ($(el).data('s-type') == 'X' && $(el).data('n-type') == '9') 
      return el.value;
});

arr //is now ['xxx', 'lmn'] 
```

[**小提琴**](http://jsfiddle.net/sR3Ag/)

# java - 设计 - 替代不允许的抽象静态方法

> ID：15604249
> 
> 赞同：0
> 
> 时间：2013-03-24T21:30:31.903
> 
> 标签：java, inheritance, static, abstract

我有一个抽象类，它包含一个静态方法来检查一个字符串是否适合某个类型，分别是 AbstractType 的实现。如果字符串适合某个类型，则将通过将字符串传递给构造函数来创建类型类的对象。

不幸的是，不允许定义静态的抽象方法。谁能推荐一个设计替代方案？

提前致谢！

```
public abstract class AbstractType {

   public abstract static boolean isOfThisType(String str); // not possible

   ...

}

public class TypeA extends AbstractType {

   public static boolean isOfThisType(String str) {
   ...
   }

   ...

}

public class TypeB extends AbstractType {

   public static boolean isOfThisType(String str) {
   ...
   }

   ...

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T21:34:30.150

是的，不要让它成为静态方法。如果它需要是多态的，不要让它成为静态的。

由于您的所有类都将实现静态方法，因此每个类都会影响您的抽象方法的实现。为抽象类提供默认实现并让子类对其进行遮蔽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T21:39:02.580

[SPI](http://docs.oracle.com/javase/tutorial/sound/SPI-intro.html)加载一个接口，该接口具有该方法，并且可以按需构建预期的类型。

```
public interface MyType { /* your actual implementation */ }

public interface MyTypeChecker
{
    boolean isType(String value);
    MyType getType(String value);
}

public class MyTypeFactory
{
    public /* static */ MyType getType(String value)
    {
        MyType loaded = null;

        for (MyTypeChecker checker : ServiceLoader.load(MyTypeChecker.class))
        {
            if (checker.isType(value))
            {
                loaded = checker.getType(value);
                break;
            }
        }

        return loaded;
    }
} 
```

工厂是否`static`存在在很大程度上无关紧要，尽管它往往更方便。取决于设计的其余部分确实决定了它的静态性质。就个人而言，我更喜欢尽可能避免，`static`因为它往往会导致代码耦合。

如果您愿意，那么您可以存储服务加载的实例以供将来重用（每次调用`ServiceLoader.load`都会实例化一个新对象）。这还允许工厂通过简单地添加具有已定义 SPI 文件的新 JAR 或将新类型添加到主 JAR 中的 SPI 文件来扩展新类型。

# zend-framework2 - 基于 zfcuser 或其他一些模块创建额外的登录表单

> ID：15604253
> 
> 赞同：0
> 
> 时间：2013-03-24T21:30:50.280
> 
> 标签：zend-framework2

我在前端有登录表单（路线：mysite/front）。它基于 zfcuser 模块。我想为后端添加相同的（路由：mysite/admin），唯一的区别——它将使用数据库中的另一个表。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:06:51.307

正如您在模块安装自述文件中所见，您可以通过模块配置中的此数组为 zfc 用户提供实体：

```
'zfcuser' => array(
        // telling ZfcUser to use our own class
        'user_entity_class'       => 'Falcon\Entity\User',
        // telling ZfcUserDoctrineORM to skip the entities it defines
        'enable_default_entities' => false,
    ), 
```

所以将**Falcon\Entity\User** *（falcon 是我的开发模块的名称，忽略它:) ）* 更改为您想要进行身份验证的表/实体有乐趣

# sql - SQL 查询计数器列

> ID：15604254
> 
> 赞同：0
> 
> 时间：2013-03-24T21:31:00.047
> 
> 标签：sql, sql-server

我有一个表，我需要查询以生成如下结果集：

```
ColA ColB ColC
==== ==== ====
AA 公元前 1
AA BD 2
BB DD 1
BB EE 2
BB FF 3
抄送 AA 1

```

（有比这个“虚构”样本更多的行）

表中只存在 ColA + ColB，ColC 需要由查询生成，每个不同的 'ColA' 需要将 ColC 中的计数重置为 1，然后向上计数，直到 ColA 中的下一个值。

我正在使用 MS/SQL2008。

谢谢-我试图搜索以查看其他人是否提出过类似的问题，并且看到了使用以下内容的查询：

```
row_number() over（按 ColA、ColB 排序）
```

但据我了解，按照这个例子，这只会给我一个从 1..6 开始的排序列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:37:17.067

```
SELECT
    ColA,
    ColB,
    row_number() over (partition by ColA order by ColB) as ColC
FROM
    Test 
```

[**演示**](http://sqlfiddle.com/#!3/5c704/2)

您可以添加`ORDER BY ColA`, 以强制您想要实现的顺序（但演示表明它不是必需的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T21:35:05.970

您需要对行编号进行分区 - 每个分区都有自己的一组 1、2、3、... 行号。

```
row_number() over (partition by ColA order by ColB) 
```

# css - 更改目录图像大小 magento

> ID：15604257
> 
> 赞同：0
> 
> 时间：2013-03-24T21:31:05.737
> 
> 标签：css, image, magento, categories, catalog

我正在尝试更改目录图像的大小。我更改了 css 并使用了调整大小功能

```
<?php 
<a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" class="product-image">
<img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(196); ?>" width="135" height="296" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" />
</a> 
```

但它没有用。似乎我的模板具有声明的类别图像的属性。在代码中，类别产品的尺寸适用于它们：245x245。我一直在到处寻找改变它，但没有任何效果。我看到 magento go 可以让您覆盖后端任何目录图像的默认大小和比例。但是我在社区中没有看到相同的内容..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:48:55.550

物理图像大小会发生变化，但由于图像宽度和高度是使用 html 设置的，因此不会改变。

改变

> src="helper('catalog/image')->init($_product, 'small_image')->resize(196); ?>" width="135" height="296"

至

> src="helper('catalog/image')->init($_product, 'small_image')->resize(196); ?>" **width="196" height="196"**

# haskell - 如何使用参数化实例解密（Data.Binary）？

> ID：15604261
> 
> 赞同：2
> 
> 时间：2013-03-24T21:31:38.690
> 
> 标签：haskell, serialization, types, instance

来自 Data.Binary：

```
instance (Binary e) => Binary (IntMap.IntMap e) where
    put = put . IntMap.toAscList
    get = liftM IntMap.fromDistinctAscList get 
```

我认为这意味着任何`IntMap (Binary e)`类型都可以序列化，但事实并非如此：

```
Data.Binary Data.IntMap> encode $ ((fromList [])::IntMap Int)

<interactive>:12:1:
    No instance for (Binary (IntMap Int))
      arising from a use of `encode' 
```

如何使用提供的实例？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T22:06:06.477

> 我认为这意味着任何`IntMap (Binary e)`类型都可以序列化，但事实并非如此：

它确实（除了它应该读到 any`IntMap e`是可序列化的，如果有`instance Binary e`）。

```
Prelude Data.IntMap Data.Binary> encode (fromList [] :: IntMap Int)
"\NUL\NUL\NUL\NUL\NUL\NUL\NUL\NUL" 
```

您收到的错误消息几乎可以肯定意味着`IntMap`您使用的不是`IntMap`来自[`containers`](http://hackage.haskell.org/package/containers)您构建的包[`binary`](http://hackage.haskell.org/package/binary)，而是来自另一个版本。`IntMap`来自不同版本的 s是`containers`不同的类型，并且该`Binary`实例仅适用`binary`于构建时使用的确切版本。

自从`containers`安装`binary`.

通过在命令行上为 ghci指定一个标志，并通过用于编译，使用构建的`containers`版本。`binary``-package``Cabal`

# javascript - 从不同的“模块”导入功能

> ID：15604262
> 
> 赞同：0
> 
> 时间：2013-03-24T21:31:46.740
> 
> 标签：javascript, jquery

我是 jQuery 新手，来自 Python 和 Java 背景，所以我很难习惯跨不同 .js 文件工作的方式。我有一个导入以下脚本的 HTML 文件：

```
 <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script
        src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.0/jquery.validate.js"></script>
    <script src="{{ STATIC_URL }}/forms.js"></script>
    <script src="{{ STATIC_URL }}/workout1Alt.js"></script> 
```

最后两个是我的。在 forms.js 中，我有一个通用函数 ，`validateNumberForm`我希望能够在我更具体的`workout1Alt.js`表单中使用它。表单的签名如下所示：

```
var validateNumberForm = function(id) 
```

我像这样调用`validateNumberForm`in `workout1Alt.js`：

```
validateNumberForm('#squatsForm'); 
```

但我得到这个错误：

```
Reference Issue: Cannot find variable validateNumberForm. 
```

有人可以告诉我如何做这样的事情的最佳实践吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T21:35:07.773

我猜你正在将定义包装在一个 jQuery 就绪处理程序中，如下所示：

```
$(function() {
    var validateNumberForm = function(id) { /* ... */ };
    // ...
}); 
```

这使得`validateNumberForm`只有在那里可用。如果您希望它可用于其他文件，您可以将其移出就绪处理程序：

```
var validateNumberForm = function(id) { /* ... */ };
$(function() {
    // ...
}); 
```

或者您可以显式导出它：

```
$(function() {
    var validateNumberForm = function(id) { /* ... */ };
    window.validateNumberForm = validateNumberForm;
    // ...
}); 
```

# c++ - 格式化 C++ 输出列，限制每个字段

> ID：15604263
> 
> 赞同：0
> 
> 时间：2013-03-24T21:31:56.217
> 
> 标签：c++, formatting, setw

我有一个任务，我需要输出一个包含歌曲信息的数组。我遇到的问题是格式化输出。我的作业指定了显示的每个字段的长度，但我找不到限制输出的好方法。例如，如果歌曲标题有 21 个字符，但必须为 18 个字符，我将如何防止它超过指定的 18 个字符。我正在使用 setw() 函数正确地分隔所有内容，但它根本不限制输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:44:44.373

如果您希望不修改原始字符串。

```
string test("http://www.cplusplus.com/reference/string/string/substr/");
string str2 = test.substr(0,18);
cout<<str2 <<endl; 
```

如果您无论如何都不需要其余的测试。

```
string test("http://www.cplusplus.com/reference/string/string/erase/");
test.erase(18);  // Make sure you don't go out of bounds here.
cout<<test<<endl; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T21:43:07.067

您可以从字符串中获取长度为 18 个字符的子字符串，然后将其输出。

[http://www.cplusplus.com/reference/string/string/substr/](http://www.cplusplus.com/reference/string/string/substr/)

例子：

```
#include <iostream>
#include <string>
using namespace std;

int main ()
{
  string str="We think in generalities, but we live in details.";
  if(str.length()<=18) cout << str << endl;
  else cout << str.substr(0,15) << "..." << endl;
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T21:44:04.663

您可以使用 string::resize 调整 c++ 字符串的大小。

```
// resizing string
#include <iostream>
#include <string>

int main ()
{
  std::string str ("I like to code in C");
  std::cout << str << '\n';

  unsigned sz = str.size();

  .resize (sz+2,'+');
  std::cout << str << '\n'; //I like to code in C++

  str.resize (14);
  std::cout << str << '\n';//I like to code
  return 0;
} 
```

# python - 导入正则表达式时出现“mach-o，但架构错误”

> ID：15604264
> 
> 赞同：0
> 
> 时间：2013-03-24T21:31:59.207
> 
> 标签：python, macos, macports, osx-leopard, python-3.3

当我尝试`import regex`.

```
Traceback (most recent call last):
  File "app.py", line 3, in <module>
    import regex 
  File "/opt/local/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/regex.py", line 391, in <module>
    import _regex_core
  File "/opt/local/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/_regex_core.py", line 21, in <module>
    import _regex
ImportError: dlopen(/opt/local/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/_regex.so, 2): no suitable image found.  Did find:
    /opt/local/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/_regex.so: mach-o, but wrong architecture 
```

我已经通过 macports 安装了 python33，然后通过 sudo python setup.py install 安装了最新版本的正则表达式（由 Matthew Barnett 编写）。

我正在使用 Mac Os X Leopard (8.5)。我的处理器是 64 位的 Core 2 Duo。我该如何解决这个错误？

当我跑步时，`lipo -info`我得到：

```
Non-fat file: /opt/local/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/_regex.so is architecture: i386 
```

当我运行`lipo -info /opt/local/bin/python` 非胖文件时：/opt/local/bin/python 是架构：ppc7400

为什么是python ppc7400？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T21:49:34.103

MacPorts 有自己的`regex`Python 3.3 库端口，那么为什么不使用它而不是自己构建呢？

```
$ sudo port install py33-regex
[...]
$ python3.3
Python 3.3.0 (default, Nov 23 2012, 10:26:01) 
[GCC 4.2.1 Compatible Apple Clang 4.1 ((tags/Apple/clang-421.11.66))] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import regex
>>> regex.match(r'[a-z]+', 'abc123').group(0)
'abc' 
```

该`ppc7400`架构更广为人知的是 PowerPC G4，它是您正在运行的 OS X 版本支持的架构之一。看起来好像您已经设法安装了 Python 3.3 的 PowerPC 版本。（大概它是通过 Rosetta 运行的。）

可能发生这种情况的一种方法是，如果您曾经在 PowerPC G4 机器上安装过 MacPorts，然后使用迁移助手将安装转移到新的 Intel 机器上。请参阅有关该主题的[MacPorts 常见问题解答](http://trac.macports.org/wiki/FAQ#universal)：

> MacPorts 适用于基于 Intel 和 PowerPC 的 Mac，但默认情况下，您安装的端口将仅针对您当前运行的体系结构进行编译。这意味着，如果您从 PowerPC Mac 迁移到 Intel 并使用迁移助手将数据复制到新机器上，您应该在新机器上重新安装所有端口，以便为 Intel 重建它们。请参阅[迁移](http://trac.macports.org/wiki/Migration)以了解如何使事情再次正常运行。

（此外，您不需要使用`lipo`: 该`file`实用程序会告诉您可执行文件或共享库中的体系结构。）

# c# - ServiceStack REST 服务中的自定义异常处理

> ID：15604265
> 
> 赞同：6
> 
> 时间：2013-03-24T21:32:13.560
> 
> 标签：c#, api, rest, servicestack, custom-errors

我有一个 ServiceStack REST 服务，我需要实现自定义错误处理。我已经能够通过将 AppHostBase.ServiceExceptionHandler 设置为自定义函数来自定义服务错误。

但是，对于其他类型的错误，例如验证错误，这不起作用。我怎样才能涵盖所有情况？

换句话说，我试图实现两件事：

1.  为可能弹出的每种异常设置我自己的 HTTP 状态代码，包括非服务错误（验证）
2.  为每种错误类型返回我自己的自定义错误对象（不是默认的 ResponseStatus）

我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-24T22:08:10.123

全局处理程序`AppHostBase.ServiceExceptionHandler`只处理**服务异常**。要处理发生在服务之外的异常，您可以设置全局`AppHostBase.ExceptionHandler`处理程序，例如：

```
public override void Configure(Container container)
{
    //Handle Exceptions occurring in Services:
    this.ServiceExceptionHandler = (request, exception) => {

        //log your exceptions here
        ...

        //call default exception handler or prepare your own custom response
        return DtoUtils.HandleException(this, request, exception);
    };

    //Handle Unhandled Exceptions occurring outside of Services, 
    //E.g. in Request binding or filters:
    this.ExceptionHandler = (req, res, operationName, ex) => {
         res.Write("Error: {0}: {1}".Fmt(ex.GetType().Name, ex.Message));
         res.EndServiceStackRequest(skipHeaders: true);
    };
} 
```

要创建 DTO 并将其序列化到**非服务** `ExceptionHandler`中的响应流，您需要[访问并使用正确的序列化程序来处理来自 IAppHost.ContentTypeFilters 的请求](https://stackoverflow.com/a/13851277/85785)。

有关更多详细信息，请参见[错误处理 wiki 页面](https://github.com/ServiceStack/ServiceStack/wiki/Error-Handling)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-04T19:34:54.797

我对[@mythz 的回答](https://stackoverflow.com/a/15604622/109941)进行了改进。

```
public override void Configure(Container container) {
    //Handle Exceptions occurring in Services:

    this.ServiceExceptionHandlers.Add((httpReq, request, exception) = > {
        //log your exceptions here
        ...
        //call default exception handler or prepare your own custom response
        return DtoUtils.CreateErrorResponse(request, exception);
    });

    //Handle Unhandled Exceptions occurring outside of Services
    //E.g. Exceptions during Request binding or in filters:
    this.UncaughtExceptionHandlers.Add((req, res, operationName, ex) = > {
        res.Write("Error: {0}: {1}".Fmt(ex.GetType().Name, ex.Message));

#if !DEBUG
        var message = "An unexpected error occurred."; // Because we don't want to expose our internal information to the outside world.
#else
        var message = ex.Message;
#endif

        res.WriteErrorToResponse(req, req.ContentType, operationName, message, ex, ex.ToStatusCode()); // Because we don't want to return a 200 status code on an unhandled exception.
    });
} 
```

# python - 在 Python 中返回 True、False 和 None

> ID：15604267
> 
> 赞同：0
> 
> 时间：2013-03-24T21:32:21.973
> 
> 标签：python

我有函数`a`调用函数`b`（返回`True`或`False`到`a`），之后函数`a`可以返回要打印的结果。

```
class C:
    ...

    def a(self, data):

        p = self.head
        return self.b( p,data)

    def b(self, p, data):

        current = p
        if current.data == data:
            return True
        else:
            return False

if __name__=="__main__":  

    x = C()
    print(x.a(1)) 
```

有时它返回 None 即使它是`True`. 我不确定发生了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T22:00:18.420

没有看到您的实际代码就不可能说。可能的原因是通过您的函数的代码路径不执行`return`语句。当代码沿着该路径运行时，函数以没有返回值结束，因此返回`None`。

更新：听起来您的代码如下所示：

```
def b(self, p, data): 
    current = p 
    if current.data == data: 
        return True 
    elif current.data == 1:
        return False 
    else: 
        self.b(current.next, data) 
```

else 子句是你的`None`路径。您需要返回递归调用返回的值：

```
 else:
        return self.b(current.next, data) 
```

顺便说一句：对这样的迭代程序使用递归在 Python 中不是一个好主意。改用迭代。此外，您没有明确的终止条件。

# php - 检查多维数组中的日期字符串并返回相应的键

> ID：15604268
> 
> 赞同：-1
> 
> 时间：2013-03-24T21:32:26.557
> 
> 标签：php, arrays, loops, multidimensional-array

我有一个以下格式的多维数组：

```
$array = array (
  0 => 
    array (
      'date' => '2013-03-25',
      'name' => 'Bob'
    ),
  1 => 
    array (
      'date' => '2013-03-25',
      'name' => 'Brian'
    ),
  2 => 
    array (
      'date' => '2013-03-26',
      'name' => 'Jack'
    ),
  3 => 
    array (
      'date' => '2013-03-26',
      'name' => 'Bob'
    )
); 
```

我有一个 PHP 循环，它在一年中的每个日期循环（这很好用）。在这个循环中，我想检查上面的数组中是否有相关日期的任何条目，如果有，则为找到的每个条目返回“名称”的相应键。我想为返回的每个名称运行一个 SQL 查询，所以大概我会为这些查询创建另一个循环。

我尝试了几件事，但只是成功地陷入了困境。也许有一种相对简单的方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T21:37:39.917

```
$array2 = array();
foreach( $array as $item )
    $array2[$item['date']][] = $item['name']; 
```

现在要检查是否有某个日期的名称，您只需检查

```
if( isset( $array2[$date] ) )
# do something 
```

# php - 扩展页面导航拆分查询结果

> ID：15604273
> 
> 赞同：0
> 
> 时间：2013-03-24T21:33:05.587
> 
> 标签：php, sql, navigation

我的查询结果被分成了几页。这是使用以下代码完成的：

```
 <?php 
    if (isset($_GET["page"])) { $page  = $_GET["page"]; } else { $page=1; }; 
    $start_from = ($page-1) * 10; 
    $sql = "SELECT * FROM profiles where hoofdrubriek = '".$rubriekpage2."'  ORDER BY bedrijfsnaam LIMIT $start_from, 10"; 
    $rs_result = mysql_query($sql);

while ($row = mysql_fetch_assoc($rs_result)) { 

echo a result....

}

?> 
```

接下来是为单独的页面创建导航：

```
<?php

if(mysql_num_rows($rs_result)!=0){

?>

<br /><div style="margin-left:200px;width:300px;text-align:center;background-color:">Pagina's:<br clear="left"> 

<?php 
$sql = "SELECT COUNT(bedrijfsnaam) FROM profiles where hoofdrubriek = '".$rubriekpage2."'"; 
$rs_result = mysql_query($sql); 
$row = mysql_fetch_row($rs_result); 
$total_records = $row[0]; 
$total_pages = ceil($total_records / 10); 

if ($total_pages>10) $total_pages=10;
for ($i=1; $i<=$total_pages; $i++) { 
            echo "<a style=\"float:none;display:inline-block;color:white;width:22px;text-align:center;text-decoration:none;font-size:20px;background-color:#483435;margin-left:4px\" href='".$plaatsnaam7.".php?page=".$i."'>".$i."</a> "; 

}; 
?> 
```

到目前为止一切都很好，没有问题。但是：我仅限于 10 页，仅此而已。当然，我可以将数字更改为 25，但我真正想要的是“数字”导航旁边的上一个和下一个按钮。如果超过 10 页，请在右侧放置一个下一步按钮，它将显示接下来的 10 个数字，依此类推...

我整个晚上都在谷歌上搜索，但还没有一个像样的结果、教程或类似的东西。你们有没有心情帮我一把？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:55:34.037

检查当前页是否为非第一页，如果后10页有效，则显示上一页、下一页和页面链接。

```
 function page_link($i) {
      echo "<a style=\"float:none;display:inline-block;color:white;width:22px;text-align:center;text-decoration:none;font-size:20px;background-color:#483435;margin-left:4px\" href='".$plaatsnaam7.".php?page=".$i."'>".$i."</a> "; 
  }

  function page_next($i){
       // link to page $i with arrow right
  }
  function page_prev($i){
      // link to page $i with arrow left
  }
 $s = $_GET['page'];
 if ($s > 1) page_prev($s - 1);
 for  ($i = $s; $i * 10 < $total_count && $i < $s + 10; $i++) { 
      page_link($i);
 }
 if (10 + $i * 10 < $total_count) page_next($i+1); 
```

# c - 当有两个具有相同符号但不同类型的全局变量的 .c 文件时，引用如何工作？

> ID：15604274
> 
> 赞同：7
> 
> 时间：2013-03-24T21:33:13.167
> 
> 标签：c, linker, global-variables

**C**

假设我有以下 C 模块：

模块 1

```
#include <stdio.h>
int x;
int main(){
  foo();
  printf("%i\n",x);
  return 0;
} 
```

模块 2

```
double x;
void foo(){
  x = 3.14;
} 
```

我的问题是：在这种情况下链接器会做什么？在我正在阅读的教科书中，它说编译器只为链接器符号表选择两个弱全局变量之一。这两个选哪个？还是两个都选？如果是这样，为什么？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T21:34:42.110

C 说这是未定义的行为。

> (C99, 6.9p5) “如果在表达式中使用了用外部链接声明的标识符（而不是作为结果为整数常量的 sizeof 运算符的操作数的一部分），则在整个程序中的某处应恰好有一个外部标识符的定义；否则，不得超过一个"

未定义的行为意味着链接器可以在存在多个外部对象定义的情况下中止链接过程。

现在链接器很好（或*邪恶*，您可以选择）并且通常具有默认扩展来处理多个外部对象定义并且在某些情况下不会失败。

如果你使用`gcc`和`ld`from binutils，如果你的两个对象被显式初始化，你会得到一个错误。例如，您`int x = 0;`在第一个翻译单元中有`double x = 0.0;`.

否则，如果外部对象之一未显式初始化（​​您的示例中的情况）`gcc`将默默地将两个对象组合成一个符号。您仍然可以通过将 option 传递给链接器来要求链接器报告警告`--warn-common`。

例如链接模块时：

`gcc -Wl,--warn-common module1.o module2.o`

要中止链接过程，您可以使用`--fatal-warnings`选项 ( `-Wl,--fatal-warnings,--warn-common`) 请求链接器将所有警告视为错误。

中止链接过程的另一种方法是使用`-fno-common`编译器选项，正如[@teppic](https://stackoverflow.com/users/1627348/teppic)在他的回答中所解释的那样。`-fno-common`禁止外部对象在编译时获取通用符号类型。如果你对两个模块都这样做，然后链接，你也会得到多定义链接器错误。

`gcc -Wall -fno-common -c module1.c module2.c`

`gcc module1.o module2.o`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T22:42:21.783

如果实现支持多个外部定义，您最终将得到一个对象，该对象有效地转换为每个模块中的每种类型，就像某种隐式联合变量一样。将分配较大类型的内存量，并且两者都将作为外部声明。

如果您使用 clang 或 gcc 进行编译，请使用该选项`-fno-common`导致错误。

这是 gcc 手册中的部分：

```
 In C code, controls the placement of uninitialized global
       variables.  Unix C compilers have traditionally permitted multiple
       definitions of such variables in different compilation units by
       placing the variables in a common block.  This is the behavior
       specified by -fcommon, and is the default for GCC on most targets.
       On the other hand, this behavior is not required by ISO C, and on
       some targets may carry a speed or code size penalty on variable
       references.  The -fno-common option specifies that the compiler
       should place uninitialized global variables in the data section of
       the object file, rather than generating them as common blocks.
       This has the effect that if the same variable is declared (without
       "extern") in two different compilations, you will get a multiple-
       definition error when you link them. 
```

此选项有效地强制执行对多个定义的严格 ISO C 合规性。

*对于相同*类型的外部变量，这种行为通常被接受。正如 GCC 手册所述，大多数编译器都支持这一点，并且（如果类型相同），C99 标准将其用作扩展。

# ios - 改变 UIApplicationStateBackground 状态下 UIScrollView 的 zoomScale 和 contentOffset

> ID：15604276
> 
> 赞同：1
> 
> 时间：2013-03-24T21:33:32.877
> 
> 标签：ios, uiview, uiwebview, uiscrollview, uikit

我知道不建议在应用程序移至后台状态时更改任何视图外观，但对于我的特定任务，我不能推迟此活动，我真的很想在用户点击主页按钮后几秒钟内完成它。

这就是我所做的： **我在 UIWebView 中加载网页，加载完成后我更改 contentOffset 和 zoomScale 以制作该网页的特定屏幕截图。**当应用程序处于活动应用程序状态时，一切正常。

现在我想添加更多的多任务处理功能。我将上述网页加载和渲染活动封装在一个**受保护的后台任务**（iOS 任务完成）中，**以便即使用户点击主页按钮也能完成它。**

我注意到页面加载和网页截图的渲染（使用 renderInContext: 方法）在后台工作得很好，**但似乎 webview**（即封装的 UIScrollView 实例）**对 setContentOffset: 和 setZoomScale: 消息没有反应只要应用程序处于后台。**.

所以我问你是否知道改变内容偏移/缩放比例的任何替代方法？（直接在 CALayer 上进行修改？）或者任何“强制”滚动视图甚至在后台执行内容更改的方法。

PS：在 iOS 模拟器上，即使在应用程序后台状态下也一切正常，但在真实设备上却不行。

**编辑：我创建了一个简单的演示项目来演示该问题。您可以在此处下载（请阅读 zip 文件中的说明）：[http ://dl.dropbox.com/u/3556271/BackgroundBugDemo.zip](http://dl.dropbox.com/u/3556271/BackgroundBugDemo.zip)**

我感谢每一个提示或提示。谢谢！

# c++ - 具有未知类型属性的模板类中的默认构造函数

> ID：15604277
> 
> 赞同：2
> 
> 时间：2013-03-24T21:33:44.497
> 
> 标签：c++, templates, initialization-list

我需要一个没有参数的默认构造函数。如何初始化`a`对我来说类型未知的属性。

```
template <typename Type>
class Foo
{
public:
    Foo() : a(), b(0) {}  <---- Here is the confusion

private:
    Type a;
    int b;
}; 
```

**编辑**：答案已在下面的评论中给出，但仍有一些我不明白的地方。如果我有 ：

```
typedef enum {AB, CD} EnumType

template <typename Type>
class Foo
{
public:
    Foo() {}  // <---- "Member 'b' was no initialized in this constructor"

private:
    Type a;
    EnumType b;
}; 
```

我的编译器给了我这个警告：`Member 'b' was no initialized in this constructor`。为什么它给我这个警告`b`是 enum 而不是 for `a`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T21:52:23.363

> 如何初始化我未知类型的属性 a 。

**您的解决方案是正确的**。根据 C++11 标准的第 8.5/11 段：

> 初始值设定项为空括号集的对象，即 ()，应进行值初始化。[...]

然后，第 8.5/8 段：

> 对 T 类型的对象进行值初始化意味着：
> 
> — 如果 T 是（可能是 cv 限定的）类类型（第 9 条），没有默认构造函数（12.1）或用户提供或删除的默认构造函数，则对象被默认初始化；
> 
> — 如果 T 是（可能是 cv 限定的）非联合类类型，没有用户提供或删除的默认构造函数，则该对象为零初始化，如果 T 具有非平凡的默认构造函数，则默认初始化；
> 
> — 如果 T 是一个数组类型，那么每个元素都是值初始化的；
> 
> — 否则，对象被零初始化。

最后，

> 为什么它给我这个警告 b 这是一个枚举而不是 a ？

这可能是因为您指定了一个模板参数，`Type`该参数是一个可以默认构造的 UDT（用户定义类型）。如果不是这种情况，那么我希望编译器也会警告您`a`未在构造函数中初始化。但是请注意，编译器*不需要*发出任何此类警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T21:39:59.187

只要类型`Type`具有默认构造函数，这是正确的。当您声明模板时，您假设了一些关于类型的事情，并非每种类型都可以在特定模板的构造函数中传递。在这里，对于标准类型和具有默认构造函数的类型，一切都很好。如果您`Foo`使用自己的类型初始化类，该类型不提供默认构造函数，那将是一个错误。

回答你的第二个问题：

如果您在命名空间范围内定义了变量，则它的值将初始化为 0。

```
enum SomeEnum {  
    EValue1 = 1,  
    EValue2 = 4,  
};
SomeEnum e; // e is 0
int i;      // i is 0

int main()
{
    cout << e << " " << i; //prints 0 0 
} 
```

不要感到惊讶，`e`它的值可以不同于任何`SomeEnum`' 的枚举值。每个枚举类型都有一个基础整数类型（例如`int`、`short`或`long`），并且该枚举类型的对象的可能值集是基础整数类型具有的值集。枚举只是一种方便地命名某些值并创建新类型的方法，但您不会通过枚举器的值集来限制枚举的值。

> 对 T 类型的对象进行零初始化意味着：
> — 如果 T 是标量类型 (3.9)，则将对象设置为转换为 T 的值 0（零）；

请注意，枚举是标量类型。

> 对 T 类型的对象进行值初始化意味着：
> — 如果 T 是类类型 blah blah
> — 如果 T 是非联合类类型 blah blah
> — 如果 T 是数组类型，则 blah blah — 否则，对象为零-初始化

```
typedef enum {a,b,c,d} EnumType;

template <typename Type>
class Foo
{
public:
    Foo() {}  // <---- "Member 'b' was no initialized in this constructor"

public:
    Type a;
    EnumType b;
};

/*
 * 
 */
int main(int argc, char** argv) {

    Foo<int> fo;
    std::cout<<std::endl<<"fo.a:"<<fo.a<<",fo.b:"<<fo.b<<std::endl;
    EnumType e=d;
    fo.b=d;
    std::cout<<std::endl<<"fo.a:"<<fo.a<<",fo.b:"<<fo.b<<std::endl;

    Foo<int>* go=new Foo<int>;
    std::cout<<std::endl<<"go->a:"<<go->a<<",go->b:"<<go->b<<std::endl;
    go->b=d;
    std::cout<<std::endl<<"go->a:"<<go->a<<",go->b:"<<go->b<<std::endl; 
```

> fo.a:-137090040,fo.b:32767
> 
> fo.a:-137090040,fo.b:3
> 
> 去->a:-166889576,去->b:32767
> 
> 去->a:-166889576,去->b:3

现在：

```
 Foo<int>* go=new Foo<int>();
    std::cout<<std::endl<<"go->a:"<<go->a<<",go->b:"<<go->b<<std::endl;
    go->b=d;
    std::cout<<std::endl<<"go->a:"<<go->a<<",go->b:"<<go->b<<std::endl; 
```

> 去->a:0,去->b:0
> 
> 去->a:0,去->b:3

# emacs - 如何在 Aquamacs 中删除段落标记 - Emacs

> ID：15604279
> 
> 赞同：0
> 
> 时间：2013-03-24T21:33:55.757
> 
> 标签：emacs, aquamacs

当我创建新段落或换行符时，我的 aquamac 会显示标签，我想知道如何删除这些标记。

![在此处输入图像描述](../Images/ecbc6ba24a2fbf3ea76460e9570f0add.png)

# php - Wordpress 联系表格 7 黑客

> ID：15604280
> 
> 赞同：2
> 
> 时间：2013-03-24T21:33:59.833
> 
> 标签：php, contact-form-7

我是一个 php 程序人，很快就会迷失在 Wordpress 的复杂性和 OOO 代码中。我正在尝试我*认为*在网站上运行的 Contact Form 7 插件中的简单破解，但我没有成功。

我正在尝试在 Contact Form 7 的一个类中进行 exec 调用：

> wp-content/plugins/contact-form-7/includes/classes.php（第 549 行）：

```
if ( $send ) {
    exec ("/usr/bin/php /var/www/html/record_subscription_change.php  -s $subject -r $recipient -b $body");
    return @wp_mail( $recipient, $subject, $body, $headers, $attachments );
} 
```

本质上，我正在尝试调用外部 php 脚本并将变量传递给它。我尝试在其中创建自己的函数`classes.php`，这让 Contact Form 7 非常不高兴（当我点击提交按钮时它只是旋转）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:43:02.430

问题最终是所有权/权限。apache下的wordpress没有执行脚本或写入日志文件的权限。一旦这些权限得到纠正，它就可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-17T21:13:07.253

您根本不必破解 Contact Form 7，只需使用 CF7 钩子...

[http://hookr.io/plugins/contact-form-7/#index=a](http://hookr.io/plugins/contact-form-7/#index=a)

> 函数.php

```
add_action('wpcf7_mail_sent', 'action_wpcf7_mail_sent', 10, 1);
function action_wpcf7_mail_sent($contact_form) { 
    $submission = WPCF7_Submission::get_instance();
    if($submission) {
        $mail_temp = $contact_form->prop('mail');
        $mail = wpcf7_mail_replace_tags($mail_temp);
        $subject = $mail['subject'];
        $recipient = $mail['recipient'];
        $body = $mail['body'];
        exec ("/usr/bin/php /var/www/html/record_subscription_change.php  -s $subject -r $recipient -b $body");
    }
    return $contact_form;
} 
```

# java - 为什么 "Ꙭ".codePointAt(0)==205 和其他 Java 字符怪异？

> ID：15604281
> 
> 赞同：10
> 
> 时间：2013-03-24T21:34:06.153
> 
> 标签：java, unicode

（为了避免过于本地化，我选择了 Ꙭ 作为示例，但许多其他字符也会发生这种情况）

字符 Ꙭ 是 \uA66C 或十进制 42604 ( [http://unicodinator.com/#A66C](http://unicodinator.com/#A66C) )。在使用 Java 的 Character 类时，我看到了一些我无法理解的非常奇怪的事情。

```
1) Character.isLetter('Ꙭ');//won't compile, complains 'unclosed character literal'
2) Character.isLetter("Ꙭ".charAt(0)); //returns true, which is right
3) Character.isLetter(42604);//returns false
4) Character.isLetter('\uA66C');//returns false
5) "Ꙭ".codePointAt(0);//returns 205? 205 is Í http://unicodinator.com/#00CD
6) ("Ꙭ".charAt(0)==(char)42604) //is false 
```

除了＃2之外的所有东西对我来说都没有意义。这个字符在 BMP 中，不是从 \uD800 到 \uDFFF，所以代理不应该有任何复杂性。好像我在这里遗漏了一些关键概念......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T21:42:27.180

看起来您的编辑器使用的字符编码与 javac（或等效编译器）使用的字符编码不同。javac 将默认选择您机器上恰好设置为默认值的任何编码。用于`-encoding`更改为 javac。

UTF-8 中的 Ꙭ 将在拉丁语 1（或类似）中显示为 ê¬ (0xEA 0x99 0xAD)，这对于字符文字无效，因为它是三个字符。

至于 3 和 4，它显然是在相对较新的 Unicode 5.1.0（2008 年 3 月）中引入的，您使用的 Java 版本可能不支持它。显然 Java SE 6 使用 Unicode 4.0；Java SE 7 使用 Unicode 6.0.0。

大多数人坚持使用 US ASCII 作为源文件，这是有充分理由的。

# c++ - 在 Windows 上使用 MFC 的 DNS-SD

> ID：15604284
> 
> 赞同：2
> 
> 时间：2013-03-24T21:34:24.497
> 
> 标签：c++, mfc, bonjour, zeroconf, dns-sd

我有一个使用 MFC 构建的应用程序，我需要将 Bonjour/Zeroconf 服务发现添加到其中。我在弄清楚如何最好地做到这一点时遇到了一些麻烦，但我决定使用 mDNSresponder 源代码中提供的 DLL 存根并将我的应用程序链接到由它生成的静态库（反过来使用系统dnssd.dll）。

但是，我仍然遇到问题，因为回调似乎并不总是被调用，所以我的设备发现停止了。让我感到困惑的是，在 OSX 下，使用 OSX dns-sd 终端服务和在 Windows 下使用 dns-sd 命令行服务，这一切都可以正常工作。在此基础上，我排除了客户端服务的问题，并试图找出我的 Windows 代码出了什么问题。

我基本上是在调用 DNSBrowseService()，然后在该回调中调用 DNSServiceResolve()，最后调用 DNSServiceGetAddrInfo() 来获取设备的 IP 地址，以便我可以连接到它。

所有这些调用都基于使用 WSAAsyncSelect，如下所示：

```
DNSServiceErrorType err = DNSServiceResolve(&client,kDNSServiceFlagsWakeOnResolve,
                                                    interfaceIndex,
                                                    serviceName,
                                                    regtype,
                                                    replyDomain,
                                                    ResolveInstance,
                                                    context);

    if(err == 0) 
    {
        err = WSAAsyncSelect((SOCKET) DNSServiceRefSockFD(client), p->m_hWnd, MESSAGE_HANDLE_MDNS_EVENT, FD_READ|FD_CLOSE);
    } 
```

但有时即使服务在那里，回调也不会被调用，并且使用命令行会确认这一点。

我完全不知道为什么这不是 100% 可靠，但如果我在命令行中使用相同的 DLL，那就是这样。我唯一可能的解释是，DNSServiceResolve 函数尝试在 WSAAsyncSelect 为套接字注册处理消息之前调用回调函数，但我看不到任何解决方法。

我在这上面花了很长时间，现在完全没有想法了。任何建议都会受到欢迎，即使它们是“这是一种非常愚蠢的方法，你为什么不做 X、Y、Z”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-26T20:39:53.060

我`DNSServiceBrowse`用“共享连接”（参见`dns_sd.h`文档）调用 ，如下所示：

```
DNSServiceCreateConnection(&ServiceRef);
// Need to copy the main ref to another variable.
DNSServiceRef BrowseServiceRef = ServiceRef;
DNSServiceBrowse(&BrowseServiceRef,               // Receives reference to Bonjour browser object.
                 kDNSServiceFlagsShareConnection, // Indicate it's a shared connection.
                 kDNSServiceInterfaceIndexAny,    // Browse on all network interfaces.
                 "_servicename._tcp",             // Browse for service types.
                 NULL,                            // Browse on the default domain (e.g. local.).
                 BrowserCallBack,                 // Callback function when Bonjour events occur.
                 this);                           // Callback context. 
```

这是在一个`run`名为 的线程类的主要方法中`ServiceDiscovery`。 `ServiceRef`是 的成员`ServiceDiscovery`。

然后紧跟上面的代码，我有一个主事件循环，如下所示：

```
while (true)
{
   err = DNSServiceProcessResult(ServiceRef);
   if (err != kDNSServiceErr_NoError)
   {
      DNSServiceRefDeallocate(BrowseServiceRef);
      DNSServiceRefDeallocate(ServiceRef);
      ServiceRef = nullptr;
   }
} 
```

然后，`BrowserCallback`您必须设置解析请求：

```
void DNSSD_API ServiceDiscovery::BrowserCallBack(DNSServiceRef inServiceRef,
                                                 DNSServiceFlags inFlags,
                                                 uint32_t inIFI,
                                                 DNSServiceErrorType inError,
                                                 const char* inName,
                                                 const char* inType,
                                                 const char* inDomain,
                                                 void* inContext)
{
   (void) inServiceRef; // Unused

   ServiceDiscovery* sd = (ServiceDiscovery*)inContext;
   ...
   // Pass a copy of the main DNSServiceRef (just a pointer).  We don't
   // hang to the local copy since it's passed in the resolve callback,
   // where we deallocate it.
   DNSServiceRef resolveServiceRef = sd->ServiceRef;
   DNSServiceErrorType err =
      DNSServiceResolve(&resolveServiceRef,
                        kDNSServiceFlagsShareConnection, // Indicate it's a shared connection.
                        inIFI,
                        inName,
                        inType,
                        inDomain,
                        ResolveCallBack,
                        sd); 
```

那么`ResolveCallback`你应该拥有你需要的一切。

```
// Callback for Bonjour resolve events.
void DNSSD_API ServiceDiscovery::ResolveCallBack(DNSServiceRef inServiceRef,
                                                 DNSServiceFlags inFlags,
                                                 uint32_t inIFI,
                                                 DNSServiceErrorType inError,
                                                 const char* fullname,
                                                 const char* hosttarget,
                                                 uint16_t port,        /* In network byte order */
                                                 uint16_t txtLen,
                                                 const unsigned char* txtRecord,
                                                 void* inContext)
{
   ServiceDiscovery* sd = (ServiceDiscovery*)inContext;
   assert(sd);

   // Save off the connection info, get TXT records, etc.
   ...

   // Deallocate the DNSServiceRef.
   DNSServiceRefDeallocate(inServiceRef);
} 
```

`hosttarget`并`port`包含您的连接信息，并且可以使用 DNS-SD API（例如`TXTRecordGetCount`和`TXTRecordGetItemAtIndex`）获取任何文本记录。

使用共享连接引用，您必须在使用完它们后根据父引用（或从父引用复制）取消分配每个引用。我认为当您将共享引用的副本传递给它们的一个函数时，DNS-SD API 会进行一些引用计数（以及父/子关系）。同样，有关详细信息，请参阅文档。

一开始我尝试不使用共享连接，而我只是传递下来`ServiceRef`，导致它在回调中被覆盖，并且我的主循环变得混乱。我想如果您不使用共享连接，您需要维护一个需要进一步处理（并处理每个）的引用列表，然后在完成后销毁它们。共享连接方法似乎要容易得多。

# jquery - 将 contenteditable span 的长度限制为 5 个数字字符

> ID：15604286
> 
> 赞同：3
> 
> 时间：2013-03-24T21:34:36.800
> 
> 标签：jquery, html, css

我试图将下面显示的 contenteditable 跨度限制为 5 个字符（4 个数字和一个破折号）。用户需要能够输入从 -9999 BCE 到当前年份 2013 的年份。年份前的破折号表示 BCE 年份。任何没有破折号的东西都将是 AD 年。

这些都是可以接受的条目：

-9546
-765
-1
0
25
125
2013

```
<div class="HYPE_element" id="start_year" style="pointer-events: auto; top: 0px; left: 120px; position: absolute; padding: 8px; overflow: visible; word-wrap: break-word; display: inline; z-index: 5; font-size: 16px; color: rgb(120, 204, 187);">
<span contenteditable="true" class="numeric">2013</span>
</div> 
```

现在任何人都可以添加字母数字字符，而且跨度只是不断向右扩展。

我用它来限制字符的长度为 5。

```
var content_id = 'start_year';  
    max = 4;
    //binding keyup/down events on the contenteditable div
    $('#'+content_id).keyup(function(e){ check_charcount(content_id, max, e); });
    $('#'+content_id).keydown(function(e){ check_charcount(content_id, max, e); });
    function check_charcount(content_id, max, e)
    {   
        if(e.which != 8 && $('#'+content_id).text().length > max)
        {
           // $('#'+content_id).text($('#'+content_id).text().substring(0, max));
            e.preventDefault();
        }
    } 
```

但是我不确定如何将输入的字符限制为数字和破折号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:00:43.743

没有多少浏览器支持这个，但是......

```
<input type="number" max="9999"  min="-9999"/> 
```

# c - 在 C 的输出开头打印一个额外的空行

> ID：15604287
> 
> 赞同：1
> 
> 时间：2013-03-24T21:34:39.060
> 
> 标签：c, printing, line, printf, output

为什么在输出的开头打印一个空行？\n 仅在 %s 之后...请帮助，我很沮丧。

```
if(argc > 1){

    while(r!=NULL){

        r = fgets(str, MAXL, stdin);

        if(r==NULL){
            return 0;
        }

        if (*argv[1] == 'i'){
            char *invP = inv(r);
            printf("%s\n", invP);
            free(invP);
        } 
```

inv() 是：

```
char* inv(char* C){
int length = 0;

int i;
for(i = 0; C[i]!='\0'; i++){
    length++;
}

char *inverted;
inverted = malloc(length+1);
inverted[length] = '\0';
char* invP = inverted;

int j = 0;
for(i = length - 1; i >= 0; i--){
    inverted[j] = C[i];
    j++;
}
return invP;
} 
```

上面没有任何印记，不知道为什么会这样。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T21:39:19.627

当您调用 时`fgets`，您的`r`字符串末尾有一个换行符。因此，当您反转它（通过调用`inv`）时，字符串以换行符结尾。然后，当您打印它时，您首先会看到换行符。

```
r -> "hello\n"
invP = "\nolleh" 
```

如果要删除换行符，可以使用类似

```
char *pos;
if ((pos=strchr(r, '\n')) != NULL)
    *pos = '\0'; 
```

（取自[这里](https://stackoverflow.com/a/2693826/57318)）

# haskell - :: a -> (a -> b) -> b 运算符（Haskell）

> ID：15604290
> 
> 赞同：17
> 
> 时间：2013-03-24T21:34:54.640
> 
> 标签：haskell

编写 Haskell 程序我发现自己需要这样的操作符。

```
(|>) :: a -> (a -> b) -> b
(|>) = flip ($)
infixl 0 |> 
```

我认为将许多功能粘合在一起时很有用。

```
tText cs = someFun cs   |>
           lines        |>
           map (drop 4) |>
           reverse 
```

我更喜欢它，`.`因为`|>`应用函数的顺序与编写函数的顺序相同。

```
tText' cs = reverse      . 
            map (drop 4) . 
            lines        . 
            someFun $ cs 
```

问题是：这个 ( `|>`) 是否已经存在于`Prelude`/ 其他一些基本库中？重新实现简单的东西是我想避免的愚蠢的事情。

Hoogle 搜索没有帮助。我找到的最接近的东西是`>>>`（箭头），但这似乎有点矫枉过正。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-24T21:50:39.800

不，我所知道的标准库中没有任何内容。多年前，我的很多代码都导入了我的 breif 但很方便的`Forwards`模块：

```
> module Forwards where

> infixl 0 |>
> infixl 9 .>

> (|>) = flip ($)
> (.>) = flip (.) 
```

我什至用了和你一样的名字！

这些天我根本不怎么用它——我已经习惯了函数组合使用的顺序。

随意使用您自己方便的快捷方式。

我用的也`$`比以前少。我曾经写过的地方

```
thing = this $ that arg $ an other $ it 
```

现在我写

```
thing = this . that arg . an other $ it 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-24T22:25:37.533

该[`lens`库](http://hackage.haskell.org/package/lens)[将此运算符`&`](http://hackage.haskell.org/packages/archive/lens/3.8.7.3/doc/html/Control-Lens-Combinators.html)定义为.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-25T21:38:48.040

您还可以将 (|>) 定义为“flip id”，并且理解其工作原理是 Haskell 中使用的统一类型推断的重要一课。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T11:57:43.973

就我的经验而言，我不知道任何这样的图书馆。如果存在这样的库，我建议不要使用它。

* * *

除非您使用的是 lens 包，否则我建议不要使用这种外部定义的运算符。（如果是那个镜头包，你真的需要并且已经有这样的操作员。）

以我的经验，恕我直言等等......

如果与通常的构图相比，前向构图提高了可读性（不仅在处理镜头时），在该模块中定义特殊运算符或通过`let`or在本地定义一个特殊运算符是有益的`where`。为此，我倾向于使用单个 unicode 符号而不是 ascii 组合。

```
(·) = flip (.)
infixl 1 (·)

(§) = ($) -- left associative, no flip
infixl 0 (§) 
```

几年前（当时还没有镜头），我也想过为这些镜头定义自己的模块。但是后来我越来越少地使用该模块，以至于我倾向于重新发明轮子。将这些运算符放在库中甚至可能会*增加*阅读代码的工作量：读者必须查找那些很少使用的运算符。在这种情况下，本地定义的运算符要好得多。

# jsf - 当图表在数据表中时，如何导出图表？Primefaces 3.4

> ID：15604293
> 
> 赞同：2
> 
> 时间：2013-03-24T21:35:11.833
> 
> 标签：jsf, primefaces, charts, datatable, export

什么是想法？

1.  将图形保存在图像中。
2.  将二进制文件传递给服务器上的字符串。
3.  从二进制（准备好）中识别图形。
4.  创建包含数据和图形的 pdf（准备好，使用 itex）。
5.  查看pdf（准备好）。

但我无法导出任何图形。这是因为我无法检测到它们。当我在数据表中包含图形时， widgetvar 会重复，所以我不能使用[陈列柜](http://www.primefaces.org/showcase/ui/chartExport.jsf)的解决方案。

```
$('#output').empty().append(chartWidgetvar.exportAsImage()); 
```

这是我的代码的一部分。

```
<h:form id="reportePro">
<p:dataTable value="#{listas.reporteSeccionPro}" var="p"
      selection="#{listas.reporteSeleccionadoSeccionPro}"
      selectionMode="single" rowKey="#{p.idFila}"
      emptyMessage="No existen coincidencias" id="reporteGeneral">
      <p:column headerText="Chart">
         <p:commandButton id="chartBtn" value="Gráficos" type="button" />
         <p:overlayPanel id="chartPanel" for="chartBtn" hideEffect="fade"
            showEffect="fade" appendToBody="true"
            style="width:900px;height:450px;">
            <p:pieChart id="pie" 
               styleClass="jqplot-table-legend jqplot-target"
               value="#{p.pieModel}" extender="ext"
               title="#{p.nomProSeccionPro}"
               style="width:400px;height:450px;font-size:15px;"
               showDataLabels="true" sliceMargin="5"
               seriesColors="DB4C14, C0E9ED, A8CCED, C7B47F, F7F28F, 4DB0C4" />
         </p:overlayPanel>
      </p:column>
   </p:dataTable>
</h:form> 
```

我以为使用动态 id ，

```
<p:pieChart id="#{chart.idPie}"  /> 
```

但不能设置。

我以为使用动态widgetvar，

```
<p:pieChart widgetvar="#{chart.idPie}"  /> 
```

但不能设置。

我想只使用图形的id，

```
#{p:widgetVar ('ComponentId')} 
```

但请记住，您不能使用动态 ID

另一种解决方案可能是使用 canvas.toDataURL，为此，我需要第一个画布的 id，但不会生成 primefaces ID。所以我不能使用这个解决方案。

花了几个小时并没有找到解决方案后，我问我。当图表在数据表中时，可以将图表导出到图像吗？

# java - 如何获取单击复选框所在行的 ListView 位置和对应的 SimpleAdapter 数据？

> ID：15604294
> 
> 赞同：3
> 
> 时间：2013-03-24T21:35:31.927
> 
> 标签：java, android, android-listview, simpleadapter

我有一个`ListView`显示用户名的数据。`ListView`从.中获取此数据。其中的`SimpleAdapter`每一行`ListView`都有一个`TextView`显示用户名和一个`ComboBox`用于选择相应名称的问题。问题我不知道如何获取行位置和相应的`SimpleAdapter`数据当前检查的`CheckBox`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:11:10.833

如果我正确理解您的问题，您希望找到包含选中复选框的视图索引。

试试这个来获取索引：

```
int index = listView.indexOfChild(checkBox.getParent()); 
```

一旦你有了索引，你可以这样做来获取数据：

```
View customView = listView.getChildAt(index); 
```

# java - 没有公平性的延迟队列有问题吗？

> ID：15604295
> 
> 赞同：2
> 
> 时间：2013-03-24T21:35:34.023
> 
> 标签：java, multithreading, concurrency, reentrantlock

在 Java 7 中，DelayQueue 的实现使用了没有公平策略的 ReentrantLock。从长远来看，这是一个问题吗？线程会因此而饿死吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:41:21.713

如果您考虑`ScheduledThreadPoolExecutor`（或任何其他生产者/消费者情况），工作线程是独立的，因此`DelayQueue`. 所以，不：允许线程进行/轮询的顺序没有区别。

# c# - 在 Visual Studio 中调试从另一个调用的应用程序？

> ID：15604296
> 
> 赞同：4
> 
> 时间：2013-03-24T21:35:34.397
> 
> 标签：c#, visual-studio-2012, monogame, lidgren

我有一个大厅应用程序，它调用一个客户端应用程序（想想：英雄联盟）。它们是两个独立的应用程序，第一个从自身调用第二个应用程序 - 我怎样才能让 Visual Studio 也调试这个应用程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T21:36:54.897

您只需启动一个单独的 Visual Studio，然后使用 Debug | 附加到进程以附加到另一个进程。诀窍是使用两个 Visual Studio。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T21:38:42.013

就像 Matthew 所说的 Debug|Attach to process。如果其他应用程序在不同的服务中，您可能还想查看[远程调试](http://msdn.microsoft.com/en-us/library/vstudio/bt727f1t.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T12:29:59.410

其他答案是正确的，但我只想添加另一种方法：

如果将两个项目都添加到单个 Visual Studio 解决方案中，您可以：

```
Right-click the solution -> Properties -> Common Properties -> Startup Project 
```

在那里，您将选择`Multiple startup projects`并选择 Lobby 和 Client 应用程序。

这样您就可以调试多个 VS 项目，而无需运行多个 VS 实例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T21:37:27.033

**调试 -> 附加到进程**

从列表中选择可执行文件。

确保使用**Select..**按钮选择正确的代码类型。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-24T21:37:29.260

你试过`Debug -> Attach to Process`吗？

参考：http: [//msdn.microsoft.com/en-gb/library/vstudio/3s68z0b3.aspx](http://msdn.microsoft.com/en-gb/library/vstudio/3s68z0b3.aspx)

# python - 使用属性名称而不是使用python的索引从sql查询输出创建一个列表

> ID：15604300
> 
> 赞同：0
> 
> 时间：2013-03-24T21:36:00.170
> 
> 标签：python, mysql, list, tuples

我有这个代码。

```
cursor.execute("select id, name from client")
clientids= cursor.fetchall()
clientidList = []
for clientid in clientids:
    #I can do that
    clientidList.append(clientid [0])
    #but I can't do that.
    clientidList.append(clientid ['id']) 
```

第二次尝试我得到一个错误，`TypeError: 'tuple' object is not callable`
知道为什么这是不可能的吗？有没有其他方法可以实现这一点，因为当我放置属性名称而不是索引时，它更全面，恰好在输出超过 20 列的查询中。我试过[这个](https://stackoverflow.com/questions/10195139/how-to-retrieve-sql-result-column-value-using-column-name-in-python)，但它对我不起作用

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:00:58.007

尝试这个：

```
import mysql.connector

db_config = {
    'user': 'root',
    'password': 'root',
    'port' : '8889',
    'host': '127.0.0.1',
    'database': 'clients_db'
}
cnx = {} # Connection placeholder

cnx = mysql.connector.connect(**db_config)

cur = cnx.cursor()
cur.execute('SELECT id FROM client')

columns = cur.column_names

clientids = []

for (entry) in cur:
    count = 0
    buffer = {}

    for row in entry:
        buffer[columns[count]] = row
        count += 1

    clientids.append(buffer)

cur.close()

clientidList = []

for client in clientids:
   clientidList.append(client['id'])

pprint.pprint(clientids)
pprint.pprint(clientidList) 
```

**更新**

更新了代码以选择行名。我猜不是万无一失的。测试一下:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T22:44:23.543

经过 35 分钟的研究，我找到了这篇[文章](http://www.gossamer-threads.com/lists/python/python/755950)`description`：解决方案是添加这一行以使用内置函数将索引更改为列名。

```
name_to_index = dict( (d[0], i) for i, d in enumerate(cursor.description) ) 
```

之后我要做的就是调用新函数，例如：

```
clientidList = []
for clientid in clientids:
    clientidList.append(clientid[name_to_index['id']]) 
```

# c++ - Cocos2d/Cocos2d-x 粒子系统暂停

> ID：15604302
> 
> 赞同：0
> 
> 时间：2013-03-24T21:36:05.810
> 
> 标签：c++, iphone, cocos2d-iphone, cocos2d-x, particle-system

我有一个关于如何将粒子发射器实现到预先存在的暂停、恢复和重新启动框架的问题。

现在我有一个包含以下代码的暂停方法：

```
void GamePlayLayer::pause()
{
    //pauses/resumes game mechanics
    if(!isPaused){
        pauseSchedulerAndActions();
        isPaused = true;
        cout << "\npaused game... isPaused = " << isPaused;
    }else{
        resume();
    }

    //pauses/resumes particle emitters
    CCParticleSystemQuad* runner_emitter = runner.getExistingEmitter();
    if(runner_emitter != NULL){
        if(!isPaused){
            runner_emitter->pauseSchedulerAndActions();
        }else{
            runner_emitter->resumeSchedulerAndActions();
        }
    }
} 
```

我还有一个使用以下内容创建的粒子发射器：

```
CCParticleSystemQuad* Runner::getNewEmitter()
{
    p_emitter = CCParticleSystemQuad::create("emitter_runner.plist");

    //position is relative to the point we add it to -- use this so it follows the sprite when the runner moves
    p_emitter->setPositionType(kCCPositionTypeRelative);

    updateEmitterPosition();

    p_emitter->retain();
    //so we dont get extra emitters sticking around in the scene
    p_emitter->setAutoRemoveOnFinish(true);
    cout <<endl << "Emitter sent";
    return p_emitter;
} 
```

所讨论的粒子发射器具有与之相关的持续时间，比如说 2 秒。现在，我希望我的暂停方法冻结粒子系统，这样当我取消暂停时，粒子发射器会从它停止的地方继续。

我现在遇到的问题是，当我暂停时，粒子发射器会继续。“pauseSchedulerAndActions()”方法与粒子发射器分离，据我所知，粒子发射器有自己的调度器。

无论我尝试什么，我都无法阻止粒子发射器继续在 p_emitter.setDuration() 方法中设置的时间移动。

这是有问题的，因为如果我在粒子发射器尚未达到其持续时间时暂停，那么当我取消暂停时，持续时间已到并且它已被删除，因为我设置了这个标志：

```
p_emitter->setAutoRemoveOnFinish(true); 
```

创建发射器时。此外，发射器实际上从未暂停，因此它给人的印象是游戏实际上并未暂停。

所以我的问题是，我如何完全冻结粒子发射器，以使发射器在我取消暂停时恢复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:40:47.733

对我来说，这似乎是一个愚蠢的错误！

在这段代码中，您可以看到我在应该设置之前设置了 isPaused。这阻止了第二个 if 语句在应该输入的时候被输入。

```
//pauses/resumes game mechanics
if(!isPaused){
    pauseSchedulerAndActions();
    isPaused = true;  <-- prematurely set to true
    cout << "\npaused game... isPaused = " << isPaused;
}else{
    resume();
}

//pauses/resumes particle emitters
CCParticleSystemQuad* runner_emitter = runner.getExistingEmitter();
if(runner_emitter != NULL){
    if(!isPaused){  <-- still expected isPaused = false
        runner_emitter->pauseSchedulerAndActions(); 
```

# html - 如何在最后一个@keyframe CSS3中进行时间延迟？

> ID：15604303
> 
> 赞同：0
> 
> 时间：2013-03-24T21:36:07.190
> 
> 标签：html, css, css-animations

我在路径上有动画。这是我的 CSS 代码：

```
#target {
  -webkit-animation: myPathX 1.5s infinite ;
  -moz-animation: myPathX 1.5s infinite ;
  -ms-animation: myPathX 1.5s infinite ;
  -o-animation: myPathX 1.5s infinite ;
  animation: myPathX 1.5s infinite ;
  -moz-animation-fill-mode: backwards;
  -moz-animation-delay:10s;

}

#target > * {
  -webkit-animation: myPathY 1.5s infinite ;
  -moz-animation: myPathY 1.5s infinite ;
  -ms-animation: myPathY 1.5s infinite ;
  -o-animation: myPathY 1.5s infinite ;
  animation: myPathY 1.5s infinite ;
  -moz-animation-fill-mode: backwards; 
```

-moz 动画延迟：10 秒；我想延迟最后一个 @keyframe 吗？我怎样才能做到这一点？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:25:13.323

你可以试试：`animation-delay: 2s;`。

# javascript - 如何通过带参数的 onChange 调用函数

> ID：15604306
> 
> 赞同：1
> 
> 时间：2013-03-24T21:36:18.333
> 
> 标签：javascript, html

我的 javascript 函数 sumCol(var mn, var t) 包含两个参数，它们都应该是字符串。

我从我的 HTML 代码中调用该函数。我有一个名为 onchange 的文本框：

```
<input type="text" size = 15 id = "Mhour" onchange="sumCol(\''+Mhour+'\', \''+Mtot+'\')"> 
```

Mhour 和 Mtot 是当我单击文本框时需要传递给函数的字符串。

当我不使用参数并将字符串变量设置到代码中时，该函数可以工作，但我需要在多个地方使用相同的函数并且这些变量会发生变化。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T21:40:08.957

如果您的 sumCol 函数需要两个字符串参数，那么只需像这样传递两个

```
onchange="sumCol('Mhour', 'Mtot') 
```

如果你想将字符串变量传递给它，那么首先声明它们，然后将它们传递到这里

```
 var param1="parameter1";
   var param2="parameter2";

  onchange="sumCol(param1,param2)" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T22:15:35.410

刚刚注意到您的 sumCol 函数具有以下参数：

```
sumCol(var mn, var t) { //... }; 
```

*应该*

```
sumCol(mn, t) { //... }; 
```

[该函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function)实际上并不需要 2 个适当的变量，而是需要 2 个参数或参数，这可能会更好地解释这一点

# java - 如何在打印函数中调用一个类？

> ID：15604309
> 
> 赞同：1
> 
> 时间：2013-03-24T21:36:31.817
> 
> 标签：java, android

我是开发的初学者，我知道这个问题可能听起来很基础，但是，让我切入正题：这是我的课

```
public class MainActivity extends Activity {

    private ListView lvPhone;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        lvPhone = (ListView)findViewById(R.id.listPhone);

        List<PhoneBook> listPhoneBook = new ArrayList<PhoneBook>();
        listPhoneBook.add(new PhoneBook(
                BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher), 
                "blah_blah", "384765345667", "something@someprovider.com"));
        listPhoneBook.add(new PhoneBook(
                BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher),
                "blah_blah", "34856834796", "something@someprovider.com"));
        listPhoneBook.add(new PhoneBook( 
                BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher),
                "blah_name", "868734633", "something@someprovider.com"));
        PhoneBookAdapter adapter = new PhoneBookAdapter(this, listPhoneBook);
        lvPhone.setAdapter(adapter);
    }
} 
```

在这里我希望它被“附加”，所以当点击按钮时，电话簿就会出现。

```
public void addListenerOnButton(){

    imageButton = (ImageButton) findViewById(R.id.pb_button);

    imageButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

           Toast.makeText(MyAndroidAppActivity.this,//phone_book goes here
            "ImageButton is clicked!", Toast.LENGTH_SHORT).show();//no toaster instead

        }

    });
} 
```

你们中的任何人都可以帮忙吗？这对我真的很有帮助。如果您确实回答，请尝试解释，因为您正在向“Java_moron”解释:)（请尽可能通过）

[现在我确实尝试了聊天室，没有声望点所以没有发生，我尝试尽可能多地谷歌找不到任何有用的东西；也许有答案，但我缺乏知识让我失望。] 谢谢，

[编辑：或者不使用电话簿类，我如何从手机的本地联系人列表中呼叫联系人？任何事情都会有帮助。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:03:46.983

开始的最佳选择是激活本机活动，该活动将调出电话簿联系人并将其作为列表显示给用户。然后将选定的联系人传递给开始活动。

解释：

您可以通过以下链接了解如何启动活动并接收结果：http: [//developer.android.com/training/basics/intents/result.html](http://developer.android.com/training/basics/intents/result.html)

基本上主要代码如下：

```
 static final int PICK_CONTACT_REQUEST = 1;  // The request code
   ...
   private void pickContact() {
       Intent pickContactIntent = new Intent(Intent.ACTION_PICK, new Uri("content://contacts"));
       pickContactIntent.setType(Phone.CONTENT_TYPE); // Show user only contacts w/ phone numbers
       startActivityForResult(pickContactIntent, PICK_CONTACT_REQUEST);
    } 
```

请注意，用户将调用 startActivityForResult 方法，这将启动一个新活动，一旦该活动完成，系统将调用原始活动的 onActivityResult() 方法，在这里您将收到已选择联系人的结果。

# java - NullPointerException 在第 65 行强制关闭 - saveContact(); - 评估一个为空的变量 [Noob 警告]

> ID：15604312
> 
> 赞同：0
> 
> 时间：2013-03-24T21:37:05.477
> 
> 标签：java, android, eclipse, sqlite

问题：在第 65 行强制关闭 - saveContact();

笔记：

大家好 - 我正在尝试在我的数据库中保存一些数据，但应用程序不断崩溃。我对这一切有点陌生，所以我想知道是否有人可以解释我做错了什么。我确定这很简单......但我不知道如何解决它。

非常感谢任何和所有帮助！

菜鸟忍者

```
 import android.app.Activity;
    import android.app.AlertDialog;
    import android.os.AsyncTask;
    import android.os.Bundle;
    import android.view.ViewGroup;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.FrameLayout;
    import android.widget.TimePicker;

    public class AddEditCountry extends Activity {

         private long rowID; 
         private EditText nameEt;
         private EditText capEt;
         private EditText codeEt;
         private TimePicker timeEt;
         private TimePicker minEt;
         public static final String KEY_BUNDLE_TIME = "time";
         public static final String KEY_BUNDLE_MIN = "min";

           @Override
           public void onCreate(Bundle savedInstanceState) 
           {
              super.onCreate(savedInstanceState); 
              setContentView(R.layout.add_country);

              nameEt = (EditText) findViewById(R.id.nameEdit);
              capEt = (EditText) findViewById(R.id.capEdit);
              codeEt = (EditText) findViewById(R.id.codeEdit);
              timeEt = (TimePicker) findViewById(R.id.timeEdit);
              minEt = (TimePicker) findViewById(R.id.minEdit);

              Bundle extras = getIntent().getExtras(); 

              if (extras != null)
              {
                 rowID = extras.getLong("row_id");
                 nameEt.setText(extras.getString("name"));  
                 capEt.setText(extras.getString("cap"));  
                 codeEt.setText(extras.getString("code"));
                 timeEt.setCurrentHour(extras.containsKey(KEY_BUNDLE_TIME) ? extras.getInt(KEY_BUNDLE_TIME) : 0);
                 minEt.setCurrentMinute(extras.getInt("min"));
              }

              Button saveButton =(Button) findViewById(R.id.saveBtn);
              saveButton.setOnClickListener(new OnClickListener() {

                  public void onClick(View v) 
                  {
                     if (nameEt.getText().length() != 0)
                     {
                        AsyncTask<Object, Object, Object> saveContactTask = 
                           new AsyncTask<Object, Object, Object>() 
                           {
                              @Override
                              protected Object doInBackground(Object... params) 
                              {
                                 saveContact();
                                 return null;
                              }

                              @Override
                              protected void onPostExecute(Object result) 
                              {
                                 finish();
                              }
                           }; 

                        saveContactTask.execute((Object[]) null); 
                     }

                     else
                     {
                        AlertDialog.Builder alert = new AlertDialog.Builder(AddEditCountry.this);
                        alert.setTitle(R.string.errorTitle); 
                        alert.setMessage(R.string.errorMessage);
                        alert.setPositiveButton(R.string.errorButton, null); 
                        alert.show();
                     }
                  } 
             });
           }

               private void saveContact() 
               {
                  DatabaseConnector dbConnector = new DatabaseConnector(this);

                  if (getIntent().getExtras() == null)
                  {
                      dbConnector.insertContact(nameEt.getText().toString(),
                              capEt.getText().toString(),
                              timeEt.getCurrentHour().toString(),
                              minEt.getCurrentMinute().toString(),
                              codeEt.getText().toString(),
                              timePicker.getCurrentHour().toString(),
                              timePicker.getCurrentMinute().toString());

                  }
                  else
                  {
                     dbConnector.updateContact(rowID,
                        nameEt.getText().toString(),
                        capEt.getText().toString(),
                        timeEt.getCurrentHour().toString(),
                        minEt.getCurrentMinute().toString(),/* Storing as String*/
                        codeEt.getText().toString());
                  }
               }
    }

    import android.content.ContentValues;
    import android.content.Context;
    import android.database.Cursor;
    import android.database.SQLException;
    import android.database.sqlite.SQLiteDatabase;

    public class DatabaseConnector {

        public static final String KEY_BUNDLE_TIME = "time";
        public static final String KEY_BUNDLE_MIN = "min";
        private static final String DB_NAME = "WorldCountries";
        private SQLiteDatabase database;
        private DatabaseOpenHelper dbOpenHelper;

        public DatabaseConnector(Context context) {
            dbOpenHelper = new DatabaseOpenHelper(context, DB_NAME, null, 1);
        }

           public void open() throws SQLException 
           {
              //open database in reading/writing mode
              database = dbOpenHelper.getWritableDatabase();
           } 

           public void close() 
           {
              if (database != null)
                 database.close();
           }       

           public void insertContact(String name, String cap, String code, String time, String min) 
                   {
                      ContentValues newCon = new ContentValues();
                      newCon.put("name", name);
                      newCon.put("cap", cap);
                      newCon.put("time", time);
                      newCon.put("min", min);
                      newCon.put("code", code);
                      newCon.put(AddEditCountry.KEY_BUNDLE_TIME, time);
                      newCon.put(AddEditCountry.KEY_BUNDLE_MIN, min);

                      open();
                      database.insert("country", null, newCon);
                      close();
                   }

                   public void updateContact(long id, String name, String cap,String code, String time, String min) 
                   {
                      ContentValues editCon = new ContentValues();
                      editCon.put("name", name);
                      editCon.put("cap", cap);
                      editCon.put("time", time);
                      editCon.put("min", min);
                      editCon.put("code", code);
                      editCon.put(AddEditCountry.KEY_BUNDLE_TIME, time);
                      editCon.put(AddEditCountry.KEY_BUNDLE_MIN, min);
                      open();
                      database.update("country", editCon, "_id=" + id, null);
                      close();
                   }

                   public Cursor getAllContacts() 
                   {
                      return database.query("country", new String[] {"_id", "name"}, 
                         null, null, null, null, "name");
                   }

                   public Cursor getOneContact(long id) 
                   {
                      return database.query("country", null, "_id=" + id, null, null, null, null);
                   }

                   public void deleteContact(long id) 
                   {
                      open(); 
                      database.delete("country", "_id=" + id, null);
                      close();
                   }
    }

PROBLEMS:

timePicker cannot be resolved   AddEditCountry.java line 104
minEdit cannot be resolved or is not a field    AddEditCountry.java line 37 
timePicker cannot be resolved   AddEditCountry.java line 103 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:40:53.940

我认为问题是这一行：

```
minEt.getCurrentMinute().toString() 
```

您正在尝试从中获取`TimePicker`分配给的数据`NULL`：

```
private TimePicker minEt; 
```

这就是您的应用程序崩溃的原因。解决方案是初始化您的 TimePicker，它应该可以工作。因此，从您初始化它的行中删除注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T22:41:00.863

您是否在任何字段中设置了数据？您提供的堆栈跟踪说这是由于第 101 行的 NPE

```
03-24 00:49:10.643: E/AndroidRuntime(6809):     at com.nfc.linkingmanager.AddEditCountry.saveContact(AddEditCountry.java:101) 
```

在不知道哪些线或区域的情况下，我只是在猜测，但您可以更改您的 saveContact 以使用：

```
findViewById(R.id.nameEdit).getText().toString() 
```

如：

```
dbConnector.insertContact(
   findViewById(R.id.nameEdit).getText().toString(),
   findViewById(R.id.nameEdit).getText().toString().getText().toString(),
   etc... 
```

基本上，您的一个 var 为 null 并且您正在尝试使用它。

# wordpress - 灯箱在 Wordpress 网站上不起作用

> ID：15604314
> 
> 赞同：0
> 
> 时间：2013-03-24T21:37:13.507
> 
> 标签：wordpress, plugins, lightbox

我无法让[Lightbox Plus Colorbox](http://wordpress.org/extend/plugins/lightbox-plus/)插件在我正在创建的 wordpress 主题上工作。我按照步骤安装插件 -

1.  将 lightbox-plus.zip 解压缩到您的 wp-content/plugins 目录。

2.  在插件下的管理面板中激活 Lightbox Plus ColorBox。
3.  在外观下的管理面板中，单击 Lightbox Plus ColorBox 以根据您的喜好进行配置。
4.  它现在应该已完全设置并正常运行

但是，它不起作用。当我点击帖子中的图片时，它会将查看者带到一个新页面。我完全被难住了。我的 javascript 很弱，我希望能得到任何帮助来完成这项工作！

```
<div style="background-color:#383838; padding:15px 0px; width:auto;">
<?php if (have_posts()) : while (have_posts()) : the_post(); ?>

    <div <?php post_class() ?> id="post-<?php the_ID(); ?>">

        <div class="entry">
        <h2 class="background_header"><?php the_title(); ?></h2>

        <?php the_content(); ?>
        </div>          
    </div>

<?php endwhile; endif; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:23:12.273

这可能是因为您的 img 链接没有 rel="lightbox[id|name]" 。

在您的主题中，将其添加到您的 functions.php 文件中。

添加 ID 并将它们分开

```
add_filter('the_content', 'add_lightbox_rel');
function add_lightbox_rel( $content ) {
       global $post;
       $get_img ="/<a(.*?)href=('|\")(.*?).(bmp|gif|jpeg|jpg|png)('|\")(.*?)>/i";
       $img_replace = '<a$1href=$2$3.$4$5 rel="lightbox['.$post->ID.']" title="'.$post->post_title.'"$6>';
       $content = preg_replace($get_img, $img_replace, $content);
       return $content;
} 
```

# html - Twitter bootstrap - 嵌套行与多行

> ID：15604317
> 
> 赞同：5
> 
> 时间：2013-03-24T21:37:23.757
> 
> 标签：html, twitter-bootstrap

我开始为我正在开发的这个应用程序使用 Twitter 引导程序。

我阅读了有关在固定网格系统和流体系统中嵌套行的文档。

现在，我想做这样的事情

![在此处输入图像描述](../Images/08326f54735aa50092176c468296e1f3.png)

所以我当然可以做这样的事情

```
<div class="container">
    <div class="row">
        <div class="span 12">red</div>
        <div class="row">
            <div class="span 3">yellow</div>
            <div class="span 9">green</div>
        </div>
    </div>
</div> 
```

我想我会得到我想要的。但我想知道这样做的后果是什么

```
<div class="container">
    <div class="row">
        <div class="span 12">red</div>
    </div>
    <div class="row">
        <div class="span 3">yellow</div>
        <div class="span 9">green</div>
    </div>
</div> 
```

我现在在浏览器中看不到任何区别，但我想知道如果我在单个`container`标签中包含多个行元素会发生什么。行嵌套是创建像我展示的那样的唯一正确方法吗？可以这么说，我的设计的这两种实现有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T21:43:02.893

第二个版本更正确。但两者都有效。不同之处在于它在调整页面大小时如何响应。第二个版本会缩小，反应更好

但是，如果您希望容器与上面的图像匹配，您需要使用`class="container-fluid"`和`class="row-fluid"`

同时删除跨度和数字之间的空格

```
class="span 3" 
```

应该说

```
class="span3" 
```

# database - 是否有针对树数据结构优化的 DBMS？

> ID：15604318
> 
> 赞同：0
> 
> 时间：2013-03-24T21:37:26.133
> 
> 标签：database, nosql

我已经在互联网上搜索了很长时间，但无济于事。我正在寻找一个数据库来轻松存储和检索树结构和可能的图形。不是出于迫切的需要，而是我现在已经多次实施了这样的结构，并且想知道我是否真的必须一遍又一遍地这样做......

理想情况下，这样的 DBMS 将支持以下语句：（PSEUDO SQL）

```
CREATE TREE tree1;

INSERT NODE n1 INTO tree1.ROOT VALUES ('a', 'c')
INSERT NODE n2 INTO tree1.n1 VALUES ('b', 'c')
SELECT CHILDREN FROM tree1 WHERE n1 IS PARENT
SELECT PARENTS FROM tree1 WHERE n2 IS CHILD 
```

我认为很清楚这是什么意思。节点可能有任何数据结构......

我知道有几种方法可以在关系数据库中复制树或图形结构，但是为什么没有专门的数据库系统来处理这种常见的数据结构呢？还是我错过了？

到目前为止我发现了[neo4j](http://www.neo4j.org)看起来很有趣，但似乎没有专门的树语法。另一方面，面向文档的数据库存储数据是分层的，但是像获取孩子或父母这样的操作并不容易实现。

最接近我的想法的是 Javascript/jQuery DOM 操作。您可以通过路径、查询类、ID 和属性进行导航，轻松获取/创建子项和父项……但它不是数据库系统。

你有什么建议，什么数据库系统最适合树结构？到目前为止，我只研究过关系数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:13:52.637

您检查过 XML 数据库吗？这些可以使用 X-path 表达式进行查询。

但是我见过的数据库中的大多数树数据结构都使用了大量的客户端处理。因此，与其制定复杂的查询，不如使用遍历树的递归函数来查询数据库。如果您有 SQL 背景，这可能是不寻常的，但它非常有效。

这可以使用任何 NoSQL 数据库来完成，但 neo4J 使它特别容易。

# jquery - 更改数组格式

> ID：15604320
> 
> 赞同：0
> 
> 时间：2013-03-24T21:37:27.683
> 
> 标签：jquery, arrays, formatting

我有一个二维数组，其格式如下：

```
[["a",1], ["b",2]] 
```

我想将其格式更改为：

```
{"a":1,"b":2} 
```

我怎样才能做到这一点？对不起，如果这是一个简单/愚蠢的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T21:40:03.363

我会假设你确定同一个键不会出现两次（即，不会有两个内部数组`"a"`）：

```
var inputArray = [["a",1], ["b",2]],
    outputObject = {},
    i;

for (i = 0; i < inputArray.length; i++)
    outputObject[inputArray[i][0]] = inputArray[i][1]; 
```

如果这对您来说还不够 jQuery，那么我想您可以使用`$.each()`而不是`for`循环等，但在我看来，简单的`for`循环对于这类事情是很好的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T21:40:04.620

```
var arr = [["a",1], ["b",2]], obj = {}, i;

for (i = 0; i < arr.length; i++) {
    obj[arr[i][0]] = arr[i][1];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T21:40:19.307

这很容易：

```
var myList = {};
for( var i in myArray ) {
    myList[myArray[i][0]] = myArray[i][1];
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-24T21:40:47.690

```
var result = {};
$.each([["a",1], ["b", 2]], function(){result[this[0]] = this[1]}) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-24T21:40:55.697

您可以遍历多维数组，将内部数组的第一个索引指定为属性，将第二个索引指定为值。

```
var arr = [["a",1], ["b",2]];
var obj = {};

for(var i = 0; i < arr.length; i++){
  obj[arr[i][0]] = arr[i][1];
} 
```

**工作示例** [http://jsfiddle.net/4Pmzx/](http://jsfiddle.net/4Pmzx/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-24T21:41:08.447

假设密钥不会出现两次：

```
var o = {};
[["a",1], ["b",2]].forEach(function(value) {o[value[0]] = value[1];}); 
```

# java - 通过代码动态选择 Spinner 中的项目

> ID：15604323
> 
> 赞同：1
> 
> 时间：2013-03-24T21:37:33.893
> 
> 标签：java, android, spinner, android-linearlayout, android-spinner

我正在开发一个需要动态添加的`TextView`项目`Spinner`。我能够从我的程序中动态添加这两件事。

现在，当我尝试在 Spinner 中选择一些项目时，它并没有选择这些项目。

我需要做任何事情来选择该项目`Spinner`吗？

```
for (Map.Entry<String, String> entry : mapColumns.entrySet()) {

    spinnerArray = new ArrayList<String>();

    final TextView rowTextView = new TextView(cont);
    final Spinner spinner = new Spinner(cont);

    rowTextView.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    spinner.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

    for(String s: entry.getValue().split(",")) {
        System.out.println(s);
        s = s.replaceAll("[^a-zA-Z0-9]+","");

        spinnerArray.add(s);
    }

    ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(cont, android.R.layout.simple_spinner_dropdown_item, spinnerArray);

    rowTextView.setText(entry.getKey());
    rowTextView.setTypeface(null, Typeface.BOLD);
    spinner.setAdapter(spinnerArrayAdapter);

    layout.addView(rowTextView);
    layout.addView(spinner);
} 
```

这里`mapColumns`将 hev 键值对。因此，在 Spinner 中，所有项目都从该地图的 Value 中显示出来。

**问题陈述：-**

现在我需要确保是否有人选择了 Spinner 中的任何项目，它应该被选中并且肉眼可见。

我怎样才能根据我的代码做到这一点。谢谢您的帮助。

下面是图片-

![在此处输入图像描述](../Images/988e8197bc7955353c063bbce774fad7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:19:14.710

尝试使用此代码：

```
ArrayAdapter<String> spinnerArrayAdapter  = new ArrayAdapter<String>(con,
        android.R.layout.simple_spinner_item, spinnerArray);
    spinnerArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T21:44:42.230

将 OnItemSelectedListener 添加到您的微调器：

```
spinner.setAdapter(spinnerArrayAdapter);

// add the listener
spinner.setOnItemSelectedListener(this); 
```

然后，在您的活动中实现监听器：

```
public void onItemSelected(AdapterView<?> parent, View view, 
        int pos, long id) {
    // An item was selected. You can retrieve the selected item using
    // parent.getItemAtPosition(pos)
}

public void onNothingSelected(AdapterView<?> parent) {
    // Another interface callback
} 
```

# c# - 树视图加载问题

> ID：15604326
> 
> 赞同：1
> 
> 时间：2013-03-24T21:37:40.617
> 
> 标签：c#, winforms

我在我的项目中使用 TreeView 来分层显示数据库中的数据。它适用于少量数据，比如 500 个条目。但是，当它超过该条目数时，加载会花费太多时间。我必须填充大量数据（比如 2500 个条目）。我有一个名为“tRegistered”的表，我将“日期”列绑定为树视图父节点。再次从同一张表中，我将“用户”列绑定为树视图节点。我的目标是以分层方式显示过去 7 天的所有注册用户。请帮助我如何进行。

我的代码是：

```
private void PopulateTreeView()
{
    treeView1.Nodes.Clear();

    SqlDataAdapter daPatient = new SqlDataAdapter("SELECT TOP 100 PERCENT pId, pDate, pName FROM tRegistered WHERE pDate >= DATEADD(day,-7, GETDATE())", con);
    SqlDataAdapter daDate = new SqlDataAdapter("SELECT     TOP 100 PERCENT pDate FROM  tRegistered
         WHERE     pDate >= DATEADD(day, - 7, GETDATE()))
         GROUP BY pDate
         ORDER BY pDate DESC", con);

    DataSet ds = new DataSet();
    daPatient.Fill(ds, "tRegistered");
    daDate.Fill(ds, "tRegistered");

    //Add root node
    TreeNode root = new TreeNode("Registered");
    treeView1.Nodes.Add(root);      //Hard code

    ds.Relations.Add("Regsd", ds.Tables["tRegistered"].Columns["pDate"], ds.Tables["tRegistered"].Columns["pDate"]);
    foreach (DataRow dr in ds.Tables["tRegistered"].Rows)
    {
        DateTime dt = Convert.ToDateTime(dr["pDate"]);
        TreeNode tn = new TreeNode(String.Format("{0:dd-MMM-yyyy}", dt));

        foreach (DataRow drChild in dr.GetChildRows("Regsd"))
        {

            TreeNode childTn = new TreeNode(drChild["pId"].ToString() + "- " + drChild["pName"].ToString());
            childTn.Tag = drChild["pId"];
            tn.Nodes.Add(childTn);
        }

        root.Nodes.Add(tn);
        root.Expand();      
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T22:26:42.117

使用 TreeView1.BeginUpdate() 和 EndUpdate() 防止 GUI 不断更新。

如果您有许多子级别，您可能只想对几个级别执行 childTN.Expand()，甚至只是扩展日期节点 (tn)。

```
 TreeNode root = new TreeNode("Registered");
        root.Expand();
        ds.Relations.Add("Regsd", ds.Tables["tRegistered"].Columns["pDate"], ds.Tables["tRegistered"].Columns["pDate"]);
        foreach (DataRow dr in ds.Tables["tRegistered"].Rows)
        {

            DateTime dt = Convert.ToDateTime(dr["pDate"]);
            TreeNode tn = new TreeNode(String.Format("{0:dd-MMM-yyyy}", dt));
            tn.Expand();

            foreach (DataRow drChild in dr.GetChildRows("Regsd"))
            {

                TreeNode childTn = new TreeNode(drChild["pId"].ToString() + "- " + drChild["pName"].ToString());
                childTn.Tag = drChild["pId"];
                childTN.Expand();
                tn.Nodes.Add(childTn);

            }

            root.Nodes.Add(tn);
            //root.Expand();      
        }
        TreeView1.BeginUpdate();
        TreeView1.Nodes.Add(root);      //Hard code
        TreeView1.EndUpdate(); 
```

编辑：更改了文本和代码片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T21:39:37.787

将所有子节点加载到 TreeView 控件后，尝试将根节点添加到其中。您应该会看到速度大幅提升。

# git - 如何在 git commit 中删除损坏的文件

> ID：15604327
> 
> 赞同：0
> 
> 时间：2013-03-24T21:37:45.660
> 
> 标签：git, revert

我不小心向我的 git 存储库提交了一个损坏的文件。当我在笔记本电脑上工作并且电池没电时，就发生了损坏。我没有立刻意识到这最终出现在一个仅包含奇怪符号的文件中。但是，我将其提交给我的回购。

现在我设法通过使用恢复到以前的非损坏版本，`git revert HEAD^`并且我有一个文件的非损坏版本。到目前为止，一切都很好。

但是，日志显示损坏的文件仍在我的存储库树中。我现在的问题是：这是有问题的，还是我可以忘记它？有没有办法从回购中删除损坏的提交/文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T21:48:28.020

一般来说，重写历史不是一个好主意。在公共项目中，如果一位开发人员设法在重写之前获得原始树，这可能是线程中奇怪损坏的原因。

但是对于*私有*分支，您可能希望在与主分支合并之前重写历史记录并隐藏错误。

看着：

[如何将修改后的提交推送到远程 Git 存储库？](https://stackoverflow.com/questions/253055/how-do-i-push-amended-commit-to-the-remote-git-repo/255080#255080)

也在这里：

[Git 工具 - 重写历史](http://git-scm.com/book/ch6-4.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T21:42:03.780

要回滚到以前的提交，请使用

```
git reset --hard <commit> 
```

假设您当前在一个分支上，这会将分支头设置为指定的提交，并将您的工作树签出到该提交。这*将*破坏任何未提交的更改！

如果您稍后想要撤消该操作，您可以使用它`git reflog`来查找先前的提交 ID。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T21:42:15.827

如果您没有推送更改，`git revert`可能不是您想要的。它会进行一个新的提交，以反转所做的更改。

用于`git reset --hard <last good commit>`删除错误提交。您可以像以前一样使用引用来解决此提交`HEAD`，但这不会调整分支中的提交。如果您使用分支名称引用最后一个已知的良好提交，例如`git reset --hard <branch>~2`引用当前提交之前的 2 个提交。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T01:37:09.410

请不要。`git reset --mixed <good-commit>`（`--mixed`是默认值）*保持*工作区文件原样，并将 git 存储的历史记录重置为`<good-commit>`. 然后你可以修复它（纠正你损坏的文件）并`git commit`进入（大概）你想要的状态。

# yii - 如何使用 Yii 的 CActiveDataProvider 设置当前页面？

> ID：15604333
> 
> 赞同：1
> 
> 时间：2013-03-24T21:38:27.840
> 
> 标签：yii, pagination, cactivedataprovider

我创建了这个 CActiveDataProvider：

```
 $dataProvider=new CActiveDataProvider('Post',array(
    'criteria'=>array(
      'condition'=>$condition,
      'params'=>$params,
    ),
    'pagination'=>array(
      'pageSize'=>2,
    ),
  )); 
```

但是...如何定义当前页面并加载记录 3,4 而不是 1,2？如何获得精确的页面？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T23:33:19.617

设置从零开始的[`currentPage`](http://www.yiiframework.com/doc/api/1.1/CPagination#currentPage-detail)属性`pagination`

```
...
'pagination'=>array(
  'pageSize'=>2,
  'currentPage'=>1,
),
... 
```

# javascript - 简单的随机发生器不会正确随机化

> ID：15604334
> 
> 赞同：-1
> 
> 时间：2013-03-24T21:38:30.830
> 
> 标签：javascript

我创建了一个数字生成器……是的，生成随机数……每次我重新加载页面并按下给我随机数的按钮时，生成器都能正常工作。

可以说，当我第一次按下按钮时，发电机给了我号码 289578。如果我然后重新加载页面。它会给我另一个随机数，比如 803175。

如果我然后按下按钮，而不重新加载页面，它将给我号码 803176 之后它再次给我号码 803177 它给我号码 803178 .. 如果我然后重新加载页面它将给我号码 8031771 重新加载并再次按下按钮它给了我号码 80317711。

因此，它没有给出 6 个不同数字的输出，而是开始加一，直到我重新加载页面并且它开始加 1000000。没有随机化数字。

有任何想法吗 ？我想将其保留为 javaScript .. 所以请不要 Jquery 评论。

代码：

```
var id = Math.floor((Math.random()*1000000)+1);
document.getElementById("add-new").addEventListener("click", function() {
    id += 1;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T21:42:48.427

你没有在点击处理程序中做任何随机性，你所做的只是加 1。

也许你只想

```
document.getElementById("add-new").addEventListener("click",
    function(){
        id = Math.floor((Math.random()*1000000)+1);
    }); 
```

# excel - 删除第一个字符后设置的字符数

> ID：15604335
> 
> 赞同：0
> 
> 时间：2013-03-24T21:38:39.000
> 
> 标签：excel

我有太长的虚拟电子邮件。我想缩短它们，但我不想删除第一个括号。

“est@scelerisque.ca” “fermentum@fringillacursus.edu” “adipiscing@arcuVivamussit.com” “vitae.aliquet@Sed.edu” “magna.tellus@Nullamnisl.com” “placerat.eget@purusNullam.org”

例如，我是否可以删除 (") 之后的前 3 个字母和 @ 之后的接下来的 3 个字母并停在点处？

当我问这个时，这听起来真的很复杂。我可能只是为所有用户使用相同的电子邮件，因为它只是虚拟数据：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T21:58:14.710

如果每个单元格中有一封电子邮件，您可以创建一个 Excel 公式，该公式将为您转换电子邮件值。

删除 ": 后的 3 个字母

> =CHAR(34) & MID(A1, 5, LEN(A1))

（使用 B1 中上一个公式的结果）： 在 @ 之后跳过 3 个字母：

> =MID(B1, 1, FIND("@", B1)) & (MID(B1, FIND("@", B1)+4, LEN(B1)))

（使用 C1 中上一个公式的结果）：停在点处（也保持 " 结尾）：

> =MID(C1, 1, FIND(".",C1)-1) & CHAR(34)

# android - 与安卓应用程序连接错误

> ID：15604337
> 
> 赞同：1
> 
> 时间：2013-03-24T21:38:42.140
> 
> 标签：android, android-layout, android-emulator, android-manifest

我的应用程序在我的模拟器上运行良好，但是当我将它安装在 android 设备中时，它没有出现在应用程序列表中，并且我收到错误消息“错误连接”这是我的应用程序的 manifest.xml 是否有任何错误！！！ ！

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.starting"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />
<permission android:name="android.permission.INTERNET" />
<permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<permission android:name="android.permission.READ_CONTACTS"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
      <activity
        android:name=".Main"
        android:label="@string/title_activity_starting" >
        <intent-filter>
            <action android:name="android.intent.action.Main"/>
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".StartingActivity"
        android:label="@string/title_activity_starting" >
        <intent-filter>
            <action android:name="android.intent.action.StartingActivity" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T10:07:34.233

嘿，我猜这不是代码的问题。请在手机中打开USB调试并尝试。

# javascript - JavaScript 拖放到浏览器窗口

> ID：15604339
> 
> 赞同：0
> 
> 时间：2013-03-24T21:38:59.453
> 
> 标签：javascript

我想修改下面的函数，使其不仅能够拥有浏览器窗口的拖动边界，而且还能够在拖动距离边界 15px 时“捕捉”到它。

Zopim 在他们的聊天小部件中有这个，请参阅：（`http://zopim.com` 单击右下角的聊天图标并开始将小部件拖动到浏览器窗口的末尾）

我目前的功能在这里：http: [//jsfiddle.net/N6A4q/](http://jsfiddle.net/N6A4q/)

代码：

```
function enableDragging(ele) {

    var dragging = dragging || false,
        x, y, Ox, Oy,
        current;

    enableDragging.z = enableDragging.z || 1;
    var grabber = ele;
    grabber.onmousedown = function (ev) {
        ev = ev || window.event;
        var target = ev.target || ev.srcElement;
        current = target.parentNode;
        dragging = true;
        x = ev.clientX ;
        y = ev.clientY ;
        Ox = current.offsetLeft;
        Oy = current.offsetTop;
        current.style.zIndex = ++enableDragging.z;
        // cached value
        var viewportWidth = viewport().width;
        var viewportHeight = viewport().height;

        document.onmousemove = function (ev) {
            ev = ev || window.event;

            if (dragging == true) {
                var Sx = parseFloat(ev.clientX) - x + Ox;
                var Sy = parseFloat(ev.clientY) - y + Oy;
                current.style.left = Math.min(Math.max(Sx, Math.min(viewportWidth - Sx, 0)), viewportWidth - current.offsetWidth) + "px";
                current.style.top = Math.min(Math.max(Sy, Math.min(viewportHeight - Sy, 0)), viewportHeight - current.offsetHeight) + "px";
            }
        }

        document.onselectstart = function () {
            return false;
        };

        document.onmouseup = function (ev) {
            ev = ev || window.event;
            dragging && (dragging = false);
            if (ev.preventDefault) {
                ev.preventDefault();
            }
        }

        document.body.style.MozUserSelect = "none";
        document.body.style.cursor = "default";

        return false;
    };
}

function viewport() {
    var e = window
    , a = 'inner';
    if ( !( 'innerWidth' in window ) ) {
        a = 'client';
        e = document.documentElement || document.body;
    }
    return { width : e[ a+'Width' ] , height : e[ a+'Height' ] }
} 
```

我怎样才能以同样的方式使这个捕捉窗口的边界？

有任何想法吗？

# c++ - 如何返回一个不透明的句柄（void* 或 dword），它可以被转换回存储在 boost::interprocess 映射中的值元素？

> ID：15604346
> 
> 赞同：7
> 
> 时间：2013-03-24T21:39:35.333
> 
> 标签：c++, visual-c++, boost, visual-c++-2008, boost-interprocess

我对将`std::string`键和大`struct`值放入容器（如`boost::interprocess::map`.

这是我的情况，以及我正在使用的一些 typedef：

```
typedef std::string     AreaKeyType;     
typedef DATA_AREA_DESC          AreaMappedType; // DATA_AREA_DESC is a big struct.
typedef std::pair<const AreaKeyType, AreaMappedType> AreaValueType;
typedef boost::interprocess::allocator<AreaValueType, boost::interprocess::managed_shared_memory::segment_manager> AreaShmemAllocator;
typedef boost::interprocess::map<AreaKeyType, AreaMappedType, std::less<AreaKeyType>, AreaShmemAllocator> AreaMap; 
```

这是我插入 AreaValueType 的方式（这是 std::pair 的 typedef）：

```
 AreaValueType A(areaKey, arearec);
 anAreaMap->insert(A); 
```

我相信上面的代码将我的本地（非共享内存）堆栈上的 std::pair A 复制到共享内存区域中。我是否可以在 boost::interprocess::map 中获取该共享内存区域的句柄，或者我是否仅限于将该记录全部取回并将其全部存储？（换句话说，我是否可以将结构之类的东西存储到 boost 进程间映射中，然后更新该记录中的单个字节，或者我是否只需通过用全新的替换 DATA_AREA_DESC 结构中的所有字节来更新整个记录字节。）

一些进一步的澄清：

1.  我有一个普通的旧 ANSI C DLL 导出 api，它在内部使用 C++ 和 Boost::interprocess::map。该函数应在地图中创建一个项目，然后返回一个句柄。如何在 boost::interprocess::map 中插入一些东西，然后将该实体的句柄返回给非 C++ 用户，最好转换为`void*`or `unsigned long`？我似乎所能做的就是通过查找 std::string 键值从共享内存中获取内容，并将新记录写入内存。我希望能够保留对共享内存对象的引用。

2.  如果我不能直接做到这一点，我将如何间接做到这一点？我想我可以保留一个非共享内存 std::vector，并分配一个非共享内存 std::string 保存 areaKey 的值，这是一个 std::string，然后对`void*`项目进行强制转换返回`std::string`然后使用它从共享内存区域中获取记录。对于如此基本的东西，这一切似乎比严格必要的工作要多。也许 boost::interprocess::map 不是我要求的正确选择？

我尝试了什么？这可以编译，但我不知道我是否做对了。不知何故，我在取消引用`::iterator`返回 from时感到很难看`find`，然后立即像这样获取它的地址：

```
void ** handle; // actually a parameter in my api.
*handle = (void*)&(*anAreaMap->find(areaKey)); 
```

**更新**上述工作。但是，以下答案中非常明智的建议不起作用。使用 boost::interprocess::string 会导致运行时完全失败和崩溃。使用 std::string，除非 Boost 的作者特别编码 std::string 支持，否则它无权工作，实际上效果很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:40:39.640

如果`handle`应该是指向`std::pair`共享内存中的指针，那么**只要**您知道它`areaKey`在地图中，您的代码就可以工作。除了不需要显式强制转换外，它没有任何问题（如果您确实需要强制转换，那么`static_cast<void*>()`将是首选）。

我没有使用过`boost::interprocess`，但我认为您需要为您的密钥使用`boost::interprocess::string`或`std::basic_string`带有非默认分配器。除非`boost::interprocess`在幕后花哨的东西，否则 using`std::string`会将指向本地内存（用于字符串缓冲区）的指针放入共享内存中，这在另一个进程中没有意义。

这是一个使用带有字符串键的映射的测试程序：

```
#include <iostream>
#include <string>
#include <boost/foreach.hpp>
#include <boost/format.hpp>
#include <boost/interprocess/allocators/allocator.hpp>
#include <boost/interprocess/containers/map.hpp>
#include <boost/interprocess/containers/string.hpp>
#include <boost/interprocess/managed_shared_memory.hpp>

namespace bi = boost::interprocess;

#define SHARED_STRING 1 // set to 1 for interprocess::string, 0 for std::string
static const char *SHARED_MEMORY_NAME = "MySharedMemory";
static const char *SHARED_MAP_NAME = "MySharedMap";

int main(int argc, char *argv[]) {
#if SHARED_STRING
   typedef bi::allocator<char, bi::managed_shared_memory::segment_manager> CharAllocator;
   typedef bi::basic_string<char, std::char_traits<char>, CharAllocator> Key;
#else
   typedef std::allocator<char> CharAllocator;
   typedef std::basic_string<char, std::char_traits<char>, CharAllocator> Key;
#endif

   typedef int Mapped;
   typedef std::pair<const Key, Mapped> Value;
   typedef bi::allocator<Value, bi::managed_shared_memory::segment_manager> MapAllocator;
   typedef bi::map<Key, Mapped, std::less<Key>, MapAllocator> Map;

   bi::managed_shared_memory *segment;
   Map *map;
   if (argc <= 1) {
      // Create new shared memory segment.
      bi::shared_memory_object::remove(SHARED_MEMORY_NAME);
      segment = new bi::managed_shared_memory(bi::create_only, SHARED_MEMORY_NAME, 65536);

      MapAllocator mapAllocator(segment->get_segment_manager());
      map = segment->construct<Map>(SHARED_MAP_NAME)(std::less<Key>(), mapAllocator);
      assert(map);
   }
   else {
      // Open existing shared memory segment.
      segment = new bi::managed_shared_memory(bi::open_only, SHARED_MEMORY_NAME);

      map = segment->find<Map>(SHARED_MAP_NAME).first;
      assert(map);
   }

#if SHARED_STRING
   CharAllocator charAllocator(segment->get_segment_manager());
#else
   CharAllocator charAllocator;
#endif
   while (true) {
      std::string input;
      if (!getline(std::cin, input))
         break;

      map->insert(std::make_pair(Key(input.begin(), input.end(), charAllocator), 0));

      BOOST_FOREACH(const Value& value, *map)
         std::cout << boost::format("('%s',%d)\n") % value.first % value.second;
   }

   delete segment;
   bi::shared_memory_object::remove(SHARED_MEMORY_NAME);

   return 0;
} 
```

不带参数运行它以创建新的共享内存段，并使用至少一个参数来打开现有的共享内存段（无参数调用必须已经在运行）。在这两种情况下，程序都会迭代地从 中读取一个键`stdin`，将一个条目插入到映射中，然后将内容写入`stdout`。

# smarty - Prestashop - blockuserinfo 位置和翻译

> ID：15604367
> 
> 赞同：1
> 
> 时间：2013-03-24T21:41:09.293
> 
> 标签：smarty, prestashop

我对 blockuserinfo 模块有疑问。根据布局，它显示在不是最好的位置。所以我想把它移到不同的地方。所以我做了以下事情 - 从 blockuserinfo.tpl 我复制了元素：

```
{if $logged}
<a href="{$link->getPageLink('my-account', true)}" title="{l s='View my customer account' mod='blockuserinfo'}" class="account" rel="nofollow"><span>{$cookie->customer_firstname} {$cookie->customer_lastname}</span></a>
<a href="{$link->getPageLink('index', true, NULL, "mylogout")}" title="{l s='Log me out' mod='blockuserinfo'}" title="{l s='Log out' mod='blockuserinfo'}" class="logout" rel="nofollow">{l s='Log out' mod='blockuserinfo'}</a>
  {else}
<a href="{$link->getPageLink('my-account', true)}" title="{l s='Login to your customer account' mod='blockuserinfo'}" class="login" rel="nofollow">{l s='Log in' mod='blockuserinfo'}</a>
  {/if} 
```

并粘贴到 header.tpl 到我想要的地方。它出现并且可以工作，但是翻译存在巨大问题 - 在将其粘贴到来自 blockuserinfo 的 header.tpl 数据更改为英文后，我无法更改这些文本的语言（即使在切换语言之后）。在管理面板 > 模块翻译中，blockuserinfo 下有用于登录和注销的 MISSING 变量。

如何修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:54:54.877

PS 中的模块翻译根据模块名称工作。就像如果您检查代码一样，您将拥有静态字符串，例如

```
{l s='View my customer account' mod='blockuserinfo'} 
```

mod='blockuserinfo' 告诉 PS 翻译系统获取该模块行的翻译。因此，您需要做的是从 header.tpl 文件中复制的代码中的所有文本中删除 mod='blockuserinfo' 的一部分。请注意，所有文本都应该像

```
{l s='View my customer account'} 
```

之后转到管理面板，然后是翻译部分，然后转到前端翻译。找到 header.tpl 部分并再次输入您需要的文本的翻译。

再次注意，如果您从文件或模块中移动文本，则其翻译将不起作用，因为在获取已翻译文本时，PS 根据文件名或模块名查找翻译。

希望这会对您有所帮助。

谢谢

# methods - Racket - 如何在子类中的重写方法中访问超类方法

> ID：15604368
> 
> 赞同：3
> 
> 时间：2013-03-24T21:41:16.667
> 
> 标签：methods, overriding, racket, superclass

假设我有一个名为“bankAccount”的类。此类有一个名为“view”的方法，可以通过该方法访问帐户中的金额。

假设我有一个名为“bankAccountPW”的类，它继承自bankAccount。我将覆盖“查看”方法，以便仅在输入正确密码时才返回金额。如何访问基类 (bankAccount) 的“view”方法，以便可以根据原始“view”方法定义覆盖的“view”方法？

简而言之，使用 Racket，我如何在子类中的重写方法中访问基类方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T21:58:32.733

您需要使用超级形式：

```
#lang racket

(define bankAccount%
  (class object%
    (super-new)
    (define/public (view) 'amount)))

(define bankAccountPW%
  (class bankAccount%
    (super-new)
    (define/override (view) 
      (if #t (super view) 'blocked))))

(send (new bankAccountPW%) view)
=> 'amount 
```

# javascript - 隐藏/显示表单（复选框表单）——javascript

> ID：15604380
> 
> 赞同：0
> 
> 时间：2013-03-24T21:42:28.707
> 
> 标签：javascript, html, css, checkbox

我有一个大小为 X x Y 的板的纯文本表示，它使用屏幕上显示的底层二维数组。每个单元格都有 1 或 0 作为值，并且有预设的阵列配置，用户可以选择在板上显示。

我希望用户能够选择他们自己的自定义板配置（即选择哪些单元格应该为 1，而未选中的单元格为 0）。为此，我只需设置一个 16 x 16 的复选框输入表。在它的底部是一个提交按钮，一旦他们选择了他们的配置，他们可以单击以绘制板。

```
<table>
    <tr>    
        <td><input type="checkbox"></td>
        <td><input type="checkbox"></td>
        ...
    </tr>
    <tr>    
        <td><input type="checkbox"></td>
        <td><input type="checkbox"></td>
        ...
    </tr>
    ...
</table> 
```

我的问题：如何在必要时隐藏/显示复选框？我只想在用户专门单击他们想要创建自定义布局时显示复选框输入。一旦他们选择了框并按下提交，我将处理数据，但我还想隐藏复选框。这可能吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:00:13.233

在最基本的情况下，你可以简单地拥有这样的东西：

CSS：

```
input[type=checkbox] {
  display: none; /* Make them initially hidden */
} 
```

HTML：

```
<input type="button" value="Customize" onclick="showCheckboxes()"/> 
```

Javascript：

```
function showCheckboxes(){
  var checkboxes = document.getElementsByTagName('input')
  for(var i=0; i<checkboxes.length; i++){
    if(checkboxes[i].type == 'checkbox'){
     checkboxes[i].style.display = 'inline');
    }
  }
} 
```

当一些其他事件或交互发生时，您显然可以使用类似的逻辑再次隐藏这些框。这假定应显示页面上的所有复选框。如果页面上还有其他人，您需要通过名称或类识别您想要影响的人，并在循环中检查它们。

像往常一样，使用 jQuery 这样的框架会简单得多。

在提交表单之前隐藏复选框并不是一件很常见的事情。然而，你可以有这样的东西来实现它：

```
<form onsubmit="hideCheckboxes(); return true;"> 
```

# jna - JNA 调用 PostMessage ~ 传递字符串 "Environment"

> ID：15604381
> 
> 赞同：0
> 
> 时间：2013-03-24T21:42:36.997
> 
> 标签：jna

[http://www.codeguru.com/cpp/wp/win32/tutorials/article.php/c10849/Setting-a-System-Environment-Variable.htm](http://www.codeguru.com/cpp/w-p/win32/tutorials/article.php/c10849/Setting-a-System-Environment-Variable.htm)

SendMessage（HWND_BROADCAST，WM_SETTINGCHANGE，0，（LPARAM）“环境”）；

JNA 和 windows xp：调用以通知环境已更改

见链接：twall.github.com/jna/3.5.1/javadoc/

见链接：twall.github.com/jna/3.5.1/javadoc/com/sun/jna/platform/win32/User32.html

PostMessage（WinDef.HWND hWnd，int msg，WinDef.WPARAM wParam，WinDef.LPARAM lParam）

该函数将一条消息放入与创建指定窗口的线程关联的消息队列中，然后在不等待线程处理该消息的情况下返回。

```
import com.sun.jna.*;
import com.sun.jna.win32.*;
import com.sun.jna.platform.win32.*;
import com.sun.jna.ptr.*;

public class MainJNA {

public static void main (String [] args){

String  myString = "Environment";
Pointer myPointer = new Memory(myString.length()+1);
    myPointer.setString(0,myString);

Pointer HWND_BROADCAST = new Pointer(0xFFFF);

int           msg    = 0x001A; // WM_SETTINGCHANGE = WM_WININICHANGE = 0x001A
WinDef.HWND   hWnd   = new WinDef.HWND( HWND_BROADCAST );
WinDef.WPARAM wParam = new WinDef.WPARAM(0);
WinDef.LPARAM lParam = new WinDef.LPARAM( myPointer.getLong(0) );
// Exception in thread "main" java.lang.IllegalArgumentException:
// Argument value 0x6d6e6f7269766e45 exceeds native capacity (4 bytes)
// mask=0xffffffff00000000

User32 user32 = (User32) Native.loadLibrary(
"user32" , User32.class , W32APIOptions.DEFAULT_OPTIONS );
user32.PostMessage( hWnd , msg , wParam , lParam );

}

} // end of class MainJNA 
```

**如何将字符串参数“环境”传递给 user32.PostMessage ???**

并且不在线程“main”java.lang.IllegalArgumentException 中获得**异常：参数值 0x6d6e6f7269766e45 超出本机容量（4 个字节）掩码 = 0xffffffff00000000**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:23:41.853

您收到该错误是因为您尝试将 64 位值 ( `myPointer.getLong(0)`) 写入 32 位容器 ( `LPARAM`)。

您已经有了 in 所需的指针`LPARAM`值`myPointer`；“强制转换”指针的推荐方法`LPARAM`是简单地声明一个版本，`PostMessage`该版本采用适当类型的第四个参数，例如

```
void PostMessage(WinDef.HWND hWnd, int msg, WinDef.WPARAM wParam, Pointer lParam);
void PostMessage(WinDef.HWND hWnd, int msg, WinDef.WPARAM wParam, String lParam); 
```

`String`这比在不同类型之间手动转换（即从整数类型转换为整数类型）更可取且更安全`Pointer`。

# python - 如何从脚本重复运行 python 单元测试并收集结果

> ID：15604382
> 
> 赞同：4
> 
> 时间：2013-03-24T21:42:44.823
> 
> 标签：python, unit-testing, python-unittest

我无法弄清楚如何从 python 脚本中运行单个单元测试并收集结果。

场景：我有一组测试来检查产生不同对象的各种统计分布的各种方法。测试有时会失败，因为他们应该考虑到我基本上是在检查特定类型的随机性。我想从脚本甚至解释器重复运行测试并收集结果以供进一步分析。

假设我有一个模块 myTest.py ：

```
class myTest(unittest.TestCase):
    def setup(self):
       ...building objects, etc....
    def testTest1(self):
           ..........
    def testTest2(self):
           .......... 
```

基本上我需要：

1.  运行设置方法
2.  运行 testTest1（比如说），100 次
3.  收集失败
4.  返回失败

我最接近的是（使用来自类似问题的代码）：

```
from unittest import TextTestRunner, TestSuite
runner = TextTestRunner(verbosity = 2)
tests = ['testTest1']
suite = unittest.TestSuite(map(myTest, tests))
runner.run(suite) 
```

但这不起作用，因为：

`runner.run(suite)` 不运行设置方法

和

当 testTest1 失败时，我无法捕获它抛出的异常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:34:41.260

您只需将要多次运行的测试添加到套件中。

这是一个完整的代码示例。您还可以[看到此代码在交互式 Python 控制台中运行，以证明它确实有效](https://www.pythonanywhere.com/gists/5244147/gistfile1.py/ipython2/)。

```
import unittest
import random

class NullWriter(object):
    def write(*_, **__):
        pass

    def flush(*_, **__):
        pass

SETUP_COUNTER = 0

class MyTestCase(unittest.TestCase):

    def setUp(self):
        global SETUP_COUNTER
        SETUP_COUNTER += 1

    def test_one(self):
        self.assertTrue(random.random() > 0.3)

    def test_two(self):
        # We just want to make sure this isn't run
        self.assertTrue(False, "This should not have been run")

def suite():
    tests = []
    for _ in range(100):
        tests.append('test_one')

    return unittest.TestSuite(map(MyTestCase, tests))

results = unittest.TextTestRunner(stream=NullWriter()).run(suite())
print dir(results)
print 'setUp was run', SETUP_COUNTER, 'times' 
```

# ruby-on-rails - 用 simplecov 进行迷你测试

> ID：15604390
> 
> 赞同：2
> 
> 时间：2013-03-24T21:43:42.033
> 
> 标签：ruby-on-rails, code-coverage, minitest, simplecov

我正在尝试像这样测试 minitest 文件：

```
COVERAGE=true ruby -Itest test/views/info_pages_test.rb
COVERAGE=true ruby -Itest test/views/errors_test.rb 
```

现在我的 info_pages_test 有 97% 的覆盖率，而我的 errors_test 有 75% 的覆盖率。它们一起应该覆盖 100%.. 但是每次我运行上述命令时，我都会得到一个结果或另一个 75% 或 97%。有没有办法将两个测试文件的结果合并到一个覆盖率报告中？

帮助将不胜感激！

这是我的 minitest_helper.rb 文件的顶部

```
## SimpleCOV

require 'simplecov'

if ENV["COVERAGE"]

  SimpleCov.start('rails') do

    add_filter "/test/"

  end
  puts "Started SimpleCOV"
end 
```

我在应用程序根目录中也有一个 .simplecov 文件，但使用它会给我带来不可预知的结果。我偶尔会获得 100% 的覆盖率，但这是不可预知的。

.simplecov 文件

```
SimpleCov.use_merging true
SimpleCov.merge_timeout 3600 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T14:18:29.820

您遇到的问题是这些“测试套件”中的每一个都将相互覆盖，因为套件名称（可通过 配置`SimpleCov.command_name 'xyz'`），而不是在合并例如 cucumber 和 rspec 结果时。

首选解决方案：使用 rake test 或其他类似工具一次运行整个测试套件，生成覆盖率报告。

`SimpleCov.command_name "MiniTest #{Time.now}"`如果您坚持运行单个测试文件，您可以通过提供伪随机命令名称 ie或（取决于您的设置）使用 ARGV ie来欺骗 SimpleCov 合并这些结果而不是覆盖它们`SimpleCov.command_name "Minitest #{File.basename(ARGV[1])}"`。后者的优点是在重新运行同一测试文件时不会重复结果，因为这些结果将在合并时被覆盖，但是当您运行所有测试并且未正确检查 ARGV 或您的测试框架是否存在时可能会失败在你抓住它之前篡改 ARGV。

尽管您可以针对单个测试运行进行这项工作，但总的来说，我建议仅将覆盖率报告基于完整的测试套件运行，因为其他方法会为错误留有余地。

# mysql - 生成新表的 SQL 问题

> ID：15604392
> 
> 赞同：3
> 
> 时间：2013-03-24T21:44:01.503
> 
> 标签：mysql, sql

该图像显示了我的表的结构。第一行表示tutorB 给studentD 10 分。第二行表示tutorE还没有给studentD打分。

![在此处输入图像描述](../Images/5957bb7360ca9d7751d63e0b98ff05f4.png)

如何生成下表？我在 stackoverflow.com 中引用了另一篇文章。[MySQL中的协同过滤？](https://stackoverflow.com/questions/2440826/collaborative-filtering-in-mysql)然而，我仍然很困惑。

![在此处输入图像描述](../Images/f00f6b333d48d851075ba2f08394f3c4.png)

从上图中，o表示推荐，大于等于7；x 表示不推荐，比率小于 7。

例如，tutorB 给 studentD 10 分，因此，从图片的第二行，我们可以看到 StudentD 列有一个“o”。（而其他三行的数据现在只是随机分配的。）

现在，如果我想为导师 A 推荐一个学生。导师 B、C 和 D 的等级（或相似度）分别为 0,2 和 3。

如何生成 SQL 以便能够将比率转换为“o”和“x”并计算排名。而且，最重要的是，我想从图片中向 TutorA 推荐 StudentH。

我应该如何修改上一篇文章中的代码？而且，如果我上面提到的想法正确？

谢谢。

==================================================== ===========================

**已编辑**

我在数据库中有以下数据。第一行表示 10 分是导师 A 给学生 C 的。

![在此处输入图像描述](../Images/a682da76787a848d255f277932377a14.png)

为了更好地理解，我将其转换为另一个表。`v`是速率的值。

![在此处输入图像描述](../Images/40daac83aaa2575a079cbcd91848b89c.png)

```
create temporary table ub_rank as 
select similar.NameA,count(*) rank
from tbl_rating target 
join tbl_rating similar on target.NameB= similar.NameB and target.NameA != similar.NameA
where target.NameA = "tutorA"
group by similar.NameA;

select similar.NameB, sum(ub_rank.rank) total_rank
from ub_rank
join ub similar on ub_rank.NameA = similar.NameA 
left join ub target on target.NameA = "tutorA" and target.NameB = similar.NameB
where target.NameB is null
group by similar.NameB
order by total_rank desc;

select * from ub_rank; 
```

上面的代码引用自[Collaborative filtering in MySQL?](https://stackoverflow.com/questions/2440826/collaborative-filtering-in-mysql) . 我有几个问题。

1.  SQL中有2个部分。我可以从第一部分中选择 *。但是，如果我如上图输入整个SQL，系统提示`Table 'mydatabase.ub' doesn't exist`我应该如何修改代码？

2.  代码将找到相似之处。我应该如何更改代码，如果标记小于 7，则更改为`o`，否则更改为`v`，并计算给定用户的相似度？

![在此处输入图像描述](../Images/5b639902f37e5ea50edfe1a2721730f6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:35:57.483

无耻地借鉴上一个问题的答案[，](https://stackoverflow.com/q/12004603/1275871)看看这是否能解决问题：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'max(case when NameB = ''',
      NameB,
      ''' then (case when rate >= 7 then ''x'' else ''o'' end) else '' '' end) AS ',
      replace(NameB, ' ', '')
    )
  ) INTO @sql
from tbl_rating
where RoleA = 'Tutor';

SET @sql = CONCAT('SELECT NameA, ', @sql, 
' from tbl_rating
where RoleA = ''Tutor''
group by NameA');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

这是[一个 SQL Fiddle](http://sqlfiddle.com/#!2/a7029e/1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T22:15:59.813

您的数据库架构实际上并不容易使用。

这是获取详尽评级表的查询：

```
SELECT Tutor.Name, Student.Name, 
  CASE WHEN Rating.Rate IS NULL THEN ''
    WHEN Rating.Rate > 6 THEN 'o'
    ELSE 'x' END
FROM (
    SELECT DISTINCT NameB AS Name
    FROM tbl_rating 
    WHERE RoleB='Tutor'
    UNION
    SELECT DISTINCT NameA AS Name
    FROM tbl_rating
    WHERE RoleA='Tutor'
    ORDER BY Name) AS Tutor
CROSS JOIN (
    SELECT DISTINCT NameB AS Name
    FROM tbl_rating 
    WHERE RoleB='Student'
    UNION
    SELECT DISTINCT NameA AS Name
    FROM tbl_rating
    WHERE RoleA='Student'
    ORDER BY Name) AS Student
LEFT JOIN tbl_rating AS Rating
ON Tutor.Name = Rating.NameA
AND Student.Name = Rating.NameB
ORDER BY Tutor.Name, Student.Name 
```

上述查询的工作原理是从表中提取所有导师的列表（第一个子查询别名为`Tutor`）和所有学生的列表（第二个子查询`Student`），对两组进行乘积以获得导师和学生的所有可能组合。然后它与评分表进行外连接，该表关联查找学生对导师所做的所有评分，并填写`NULL`不存在的评分。（获得相反评价的查询——即导师对学生的评价——可以通过交换`NameA`和`NameB`在`LEFT JOIN`子句中获得）。根据`CASE`要求将数字（或空）评级转换为符号。

为了相似之处，我们需要再添加两个连接：

*   再来一张`Tutor`，
*   另一个在`Rating`

因此给出：

```
SELECT T1.Name AS Tutor1 , T2.Name AS Tutor2, 
  SUM( CASE
    WHEN (R1.Rate > 6 && R2.Rate > 6) || 
                (R1.Rate < 7 && R2.Rate < 7) THEN 1
    ELSE 0 END) AS SIMILARITY
FROM (
    SELECT DISTINCT NameB AS Name
    FROM tbl_rating 
    WHERE RoleB='Tutor'
    UNION
    SELECT DISTINCT NameA AS Name
    FROM tbl_rating
    WHERE RoleA='Tutor'
    ORDER BY Name) AS T1
CROSS JOIN (
    SELECT DISTINCT NameB AS Name
    FROM tbl_rating 
    WHERE RoleB='Tutor'
    UNION
    SELECT DISTINCT NameA AS Name
    FROM tbl_rating
    WHERE RoleA='Tutor'
    ORDER BY Name) AS T2
CROSS JOIN (
    SELECT DISTINCT NameB AS Name
    FROM tbl_rating 
    WHERE RoleB='Student'
    UNION
    SELECT DISTINCT NameA AS Name
    FROM tbl_rating
    WHERE RoleA='Student'
    ORDER BY Name) AS Student
LEFT JOIN tbl_rating AS R1
ON T1.Name = R1.NameA
AND Student.Name = R1.NameB
LEFT JOIN tbl_rating AS R2
ON T2.Name = R2.NameA
AND Student.Name = R2.NameB
WHERE Tutor1 < Tutor2
GROUP BY Tutor1, Tutor2
ORDER BY Tutor1, Tutor2 
```

您可以通过在他们自己的表中提取学生和导师的特定数据，将评分表拆分为学生评分和导师评分，并使用外键来提高这些查询的效率：

```
Table student : Id | Name
Table tutor: Id  | Name
Table tutor_rating: StudentId | TutorId | Rate
Table student_rating: StudentId | TutorId | Rate 
```

可能还有一个`tutor_similiarity`表来避免一直重新计算整个数据集，并在评级表上使用几个触发器来更新它（相似性计算将是增量的，查询只会转储其内容）。

```
Table tutor_similarity: TutorId1 | TutorId2 | Similarity 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T22:07:20.240

这确实是一条评论，但评论太长了。

首先，您不能轻松地创建具有可变列数的表。你提前知道这些列吗？通常，您以在原始 table 中的方式表示矩阵。. . “x”和“y”值是列，值位于第三列。

其次，`x`and是`o`基于导师对学生的评分，反之亦然？你的问题完全模棱两可。

第三，要将评分转换为“x”或“o”，只需使用 case 语句：

```
select (case when rating >= 7 then 'x' else 'o' end) 
```

第四，你说A到B、C、D的相似度分别是0、2、3。我不知道你是如何从你展示的矩阵中得到这个的。如果是“x”的重叠，那么这些值似乎是 0、1 和 2。

我的最终结论是，您根本不需要创建这样的矩阵，因为您已经拥有正确格式的数据。

# php - PHP GET 服务器响应

> ID：15604394
> 
> 赞同：2
> 
> 时间：2013-03-24T21:44:19.103
> 
> 标签：php, javascript, get

我目前正在阅读*David Flanagan 的伟大书籍 JavaScript the Definitive Guide - 6th Edition，*他在书中展示了一个从服务器接收一些数据的函数，如下所述：

> 将用户的输入传递给服务器端脚本，该脚本可以（理论上）返回一个链接列表，指向有兴趣进行贷款的本地贷方。此示例实际上不包括此类贷方查找服务的工作实现。但是如果服务存在，这个函数就可以使用它。

```
function getLenders(amount, apr, years, zipcode) {
    if (!window.XMLHttpRequest) return;

    var ad = document.getElementById("lenders");
    if (!ad) return; 

    var url = "getLenders.php" + 
        "?amt=" + encodeURIComponent(amount) + 
        "&apr=" + encodeURIComponent(apr) +
        "&yrs=" + encodeURIComponent(years) +
        "&zip=" + encodeURIComponent(zipcode);

    var req = new XMLHttpRequest(); 
    req.open("GET", url); 
    req.send(null);

    req.onreadystatechange = function() {
        if (req.readyState == 4 && req.status == 200) {
            var response = req.responseText;
            var lenders = JSON.parse(response);

            var list = "";
            for(var i = 0; i < lenders.length; i++) {
                list += "<li><a href='" + lenders[i].url + "'>" +
                    lenders[i].name + "</a>";
            }
            ad.innerHTML = "<ul>" + list + "</ul>"; 
        } 
    }
} 
```

他没有提供任何 PHP 脚本来执行此操作。我正在尝试编写 getLanders.php 脚本来处理此响应，并希望得到任何建议。

这是我到目前为止所拥有的：

```
<?php
  if( $_GET["amount"] || $_GET["apr"] || $_GET["years"] || $_GET["zipcode"] )
  {
      echo // What format should I make the list of lenders so that is it correctly 
           // broken up and handled by the JSON.parse() function?
  }
?> 
```

所以，我的问题是向客户端回显信息列表的正确方法是什么，以便上面的 David Flanagens 函数可以正确处理请求？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T21:47:23.037

`URL`看起来它需要一个由和`name`属性组成的多维数组。[您可以使用json_encode()](http://php.net/manual/en/function.json-encode.php)回显 JSON 数据，因此类似于：

```
$data = array(
   array('name' => 'foo', 'url' => 'url'),
   array('name' => 'bar', 'url' => 'url2'),
);
echo json_encode($data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T21:46:02.057

可以使用 json_encode 函数来完成：[http ://www.php.net/manual/en/function.json-encode.php](http://www.php.net/manual/en/function.json-encode.php)

# c - 标记两次 csv 文件

> ID：15604395
> 
> 赞同：0
> 
> 时间：2013-03-24T21:44:27.760
> 
> 标签：c, csv, tokenize, strtok

我在 C 中使用 strtok() 来解析 csv 字符串。

我的示例字符串是：

```
str= "name1 secondname1 cin,name2 secondname2 cin" 
```

我首先使用带有分隔符“，”的 strtok，然后使用“”分隔字符串。

```
char delims1[] = ",";
char delims2[] = " ";
char *result1 = NULL;
char *result2 = NULL;

result1 = strtok(str, delims1);

while ( result1 != NULL ) {

    result2 = strtok(result1,delims2);

    while ( result2 != NULL ) {
        printf("%s\n" ,result2);

    }

    result1 = strtok(NULL, delims1);
} 
```

预期的结果是：

```
name1
secondname1 
cin
name2
secondname2
cin 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:58:41.703

欢迎来到 StackOverflow。当您提出问题时，请尝试实际*提出问题*。

但是，在这种情况下，我只是假设您没有得到预期的输出。

问题是`strtok`内部存储了您上次通话的状态。所以如果你混合两种不同的解析，那么你会遇到麻烦。

C 库的 Microsoft 实现提供了`strtok_s`允许您传入状态变量的功能。如果您使用的是该编译器，则切换到使用该函数。否则，您可能需要自己编写。

或者，您可以一次对每一列进行标记，并将指针存储在一个数组中。然后进行第二次传递并标记数组中的每个字符串。

# java - 为什么我的代码不是线程安全的？

> ID：15604396
> 
> 赞同：1
> 
> 时间：2013-03-24T21:44:27.987
> 
> 标签：java, multithreading, swing, thread-safety, event-dispatch-thread

我正在创建一个可以从文件加载关卡的游戏。这是在一个单独的线程上完成的，而其他一切都是在事件调度线程上完成的。

我通过从一个非常大的测试文件加载来测试代码，结果发现事件调度线程有时在加载关卡时没有响应。

我似乎无法找出原因。这是我的一些代码：

```
public class LevelSelectionWrapper extends GamePanel {
    ...
    private JList list;
    private File[] files;
    ...
    //Lock object for synchronization
    private Object lock = new Object();
    //Runnable for loading levels from files on a separate thread
    private Runnable loader = new Runnable() {
        @Override
        public void run() {
            synchronized(lock) {
                //Load levels from files
                List<Level> levels = LevelLoader.load(files); // <-------------
                ...
                SwingUtilities.invokeLater(new ListUpdater());
            }
        }
    };
    ...
    private void createOpenFileButton(Container container) {
        final JFileChooser fc = ...
        ...
        //Create open button
        JButton openButton = new JButton("Open file");
        openButton.setFocusable(false);
        openButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                int returnVal = fc.showOpenDialog(LevelSelectionWrapper.this);
                if(returnVal == JFileChooser.APPROVE_OPTION) {
                    synchronized(lock) { files = fc.getSelectedFiles(); }
                    //Load files on separate thread
                    new Thread(loader).start(); // <-------------
                }
            }
        });
        container.add(openButton);
    }
} 
```

我在代码中添加了两个箭头：

*   第一个是耗时的方法（当文件非常大时）。有时，事件调度线程在此代码运行时无响应。
*   最后一个是调用runnable的地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T22:17:04.023

我肯定会建议摆脱该`lock`对象（以及相关的依赖项）。获取其中的文件列表`actionPerformed()`并构造一个副本以传递给您的可运行文件。避免`files`像现在这样使用实例变量，因为它们在线程之间不必要地共享。

这些`synchronized`块是我最有可能的罪魁祸首。如果这不能解决您的问题，我建议`System.out.println()`在您认为阻塞的区域周围添加一些呼叫，以尝试准确查看哪些呼叫需要这么长时间。

还可以考虑使用[SwingWorkers](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)而不是自己构建一个新线程。这可以在 EDT 中为您节省几个线程启动时间。

# java - 在 Java 中创建动画 JScrollPane 的简单方法？

> ID：15604399
> 
> 赞同：2
> 
> 时间：2013-03-24T21:44:40.043
> 
> 标签：java, swing, animation, jscrollpane, jscrollbar

我目前有一个 JScrollPane ，其中包含基本上是项目列表的内容。此 JScrollPane 将显示在信息屏幕上。

我正在寻找的是某种使其以给定间隔自动滚动到列表底部，然后返回顶部的方法。我认识到使用 JScrollPane 可能无法实现这一点，因此任何关于替代方案的建议也会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:19:01.140

通常我会使用[TimingFramework](http://java.net/projects/timingframework/pages/Home)，或者你可以使用[Trident](https://kenai.com/projects/trident/pages/Home)或[Unviversal Tween Engine](http://code.google.com/p/java-universal-tween-engine/)之类的东西作为任何动画的基础。主要原因是，除了为您完成大部分工作外，它们还提供可变速度，这将使动画看起来更自然。

但是您可以使用`javax.swing.Timer`.

此示例将允许您滚动到图像的底部并再次返回。

动画将需要 5 秒（由`runningTiming`变量提供），允许它是可变的（图像越大，移动越快，图像越小，越慢）。

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class AutoScroller {

    public static void main(String[] args) {
        new AutoScroller();
    }
    private long startTime = -1;
    private int range = 0;
    private int runningTime = 5000;
    private int direction = 1;

    public AutoScroller() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                final JScrollPane scrollPane = new JScrollPane(new TestPane());

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(scrollPane);
//                frame.pack();
                frame.setSize(scrollPane.getPreferredSize().width, 200);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                Timer timer = new Timer(40, new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        if (startTime < 0) {
                            startTime = System.currentTimeMillis();
                            range = scrollPane.getViewport().getView().getPreferredSize().height - scrollPane.getHeight();
                        }
                        long duration = System.currentTimeMillis() - startTime;
                        float progress = 1f;
                        if (duration >= runningTime) {
                            startTime = -1;
                            direction *= -1;
                            // Make the progress equal the maximum range for the new direction
                            // This will prevent it from "bouncing"
                            if (direction < 0) {
                                progress = 1f;
                            } else {
                                progress = 0f;
                            }
                        } else {
                            progress = (float) duration / (float) runningTime;
                            if (direction < 0) {
                                progress = 1f - progress;
                            }
                        }

                        int yPos = (int) (range * progress);

                        scrollPane.getViewport().setViewPosition(new Point(0, yPos));

                    }
                });
                timer.setRepeats(true);
                timer.setCoalesce(true);
                timer.start();

            }
        });
    }

    public class TestPane extends JPanel {

        private BufferedImage image;

        public TestPane() {
            try {
                image = ImageIO.read(new File("Path/to/your/image"));
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return image == null ? new Dimension(200, 200) : new Dimension(image.getWidth(), image.getHeight());
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (image != null) {
                Graphics2D g2d = (Graphics2D) g.create();
                int x = (getWidth() - image.getWidth()) / 2;
                int y = (getHeight() - image.getHeight()) / 2;
                g2d.drawImage(image, x, y, this);
                g2d.dispose();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T21:47:51.710

您是否考虑过使用计时器每隔一段时间向 JScrollPane 发送滚动指令？只是首先想到的...

# php - 用PHP中的逻辑表达式替换IF

> ID：15604403
> 
> 赞同：8
> 
> 时间：2013-03-24T21:44:54.473
> 
> 标签：php, if-statement, expression, ternary

当我偶然发现类似这样的构造时，我正在重构一些旧代码：

```
// function bar() returns a value
// if the value is an instance of customException class, terminate with error code
// else process the regular data

$foo = bar();
checkForException($foo) && exit($foo->errorCode());
process($foo); 
```

现在看起来很奇怪，这要短得多

```
$foo=bar();
if(checkForException($foo)) {
    exit($foo->errorCode();
}
else {
    process($foo);
} 
```

然后更具可读性（至少在最初的惊喜之后）

```
$foo=bar();
(checkForException($foo)) ? exit($foo->errorCode()) : process($foo); 
```

虽然更短的代码并不一定意味着更易读的代码，但我发现它位于上述两种“标准”方式的中间。

换句话说，而不是

```
if($foo) {
    bar();
}
else {
    // there is no real reason for this to exist, since 
    // I have nothing to write here, but I want to conform 
    // to the general coding practices and my coding OCD
} 
```

可以简单地写

```
$foo && bar(); 
```

那么，这背后的原因是什么？是否可以像“不要重新发明轮子，写更易读的 if/else，如果你真的想缩短它，这就是三元运算符的用途”那么简单？

编辑：请记住，上面的代码是从原始代码快速派生出来的，只是一个使用“短路”代码的例子。如果可以，请不要建议代码改进，因为这不是问题的预期结果。

示例 2

```
userCheckedTheBox($user) && displayAppropriateInfo(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T21:49:02.983

虽然`$foo && bar();`代码行数较少，但可读性要差得多。使您的代码易于理解通常比减少总 LoC 更重要。即使你没有在一个有多个程序员的环境中工作，你也必须在未来的某个时候回来阅读你的代码，你可能无法记住每一行代码背后的基本原理是什么代码（[伊格森定律](http://hackersays.com/0da6e0)）。

通常，您应该将此类语句的使用限制在程序员意图绝对清楚的情况下。在我看来，让测试条件的代码和在同一条语句上主动修改程序当前状态的代码是非常糟糕的做法。

这是这种代码的一个可接受的用途：

```
$isValidUser = $userName && usernameIsValid(); 
```

在这里，运算符的两边都在`&&`测试一个条件，右边正在调用一个函数来做这件事并不会损害代码的可读性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T22:23:37.320

有一种古老的技术，我相信它在被破解的 perl 脚本中很流行以显示错误。伪代码：

```
myFunction( ) || exitWithError( "Uh-oh" ) 
```

当编码到最后期限时，并且用户界面不需要出色时，这是避免错误的快速方法。

默认参数的样式在 javascript 中也很流行：

```
function myfunction(foo) {
    foo = foo || 0;
    // note that a non-zero default won't work so well,
    // because the user could call the function with 0
} 
```

对于空检查：

```
var bar = foo && foo.property; 
```

我发现一旦你习惯了它，它就非常易读，而且通常比`if`/`else`或更直观`?:`。但是你应该只在有意义的时候使用它。在任何地方使用它都会变得非常混乱。例如，在您的示例中，您不应该*使用*它。我个人将它用于简单的错误检查和*一些*默认值。在大型项目中，您几乎总是希望在发生错误时做更多事情，因此在这些情况下您不应该使用它。

你也应该小心；这仅适用于具有短路评估的语言（[http://en.wikipedia.org/wiki/Short-circuit_evaluation](http://en.wikipedia.org/wiki/Short-circuit_evaluation)）。有时`and`and`or`是短路的，while `&&`and `||`are not。

`myfunction() or die("I'm melting!");`写起来也挺满意的。

最后，空`else`块通常是我以前从未见过或听过任何人推荐的东西。这对我来说似乎毫无意义。您的示例最易读的选项很简单：

```
if( $foo ) {
    bar( );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T21:57:07.347

无论该代码在做什么，返回的实例`CustomException`都不会加起来。为什么不稍微改变一下函数定义：

```
function bar()
{
     $stuff = true;
     if ($stuff === true)
     {
         return 'Value on success';
     }
     //something went wrong:
     throw new CustomException('You messed up');
}
try
{//here's the outlandish try-catch block
     $foo = bar();
}
catch (CustomException $e)
{
    exit($e->message());//fugly exit call, work on this, too
}
//carry on here, no exception was thrown 
```

此外，调用第二个函数 ( `checkForException($foo)`) 也是荒谬的。函数调用很便宜，但不是免费的。您想知道函数是否返回了`CustomException`? 不要把它变成一个函数，而是使用`instanceof`. 使用短路来减少字符的数量（因此导致解析时间），同时在所有其他级别上浪费资源与在超级铣削课程中出现在 V8 野马中一样愚蠢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T21:55:11.723

对于错误，您应该使用真正的异常：

```
try {
  $foo = bar();
} catch(FooException $e) {
  exit($e->errorCode);
}
process($foo); 
```

请参阅[错误处理文档](http://php.net/manual/language.exceptions.php)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-24T22:14:55.867

您的问题的另一种可能的解决方案：

```
$foo = bar();
!checkForException($foo) or exit($foo->errorCode);
process($foo); 
```

但更好`!checkForException`的改变或类似的`isNoException`东西。

# asp.net-mvc - PUT 和 DELETE 方法在 AppHarbor 上不起作用

> ID：15604405
> 
> 赞同：0
> 
> 时间：2013-03-24T21:45:00.267
> 
> 标签：asp.net-mvc, iis, asp.net-web-api, appharbor, put

我在尝试在 ApplicationHarbor 的服务器上使用 webapi 运行 ASP MVC4 应用程序时遇到了很多麻烦。我根本无法调用 PUT 和 DELETE http 动词。你有同样的问题吗？你是怎么解决的？

我已经尝试过这些配置：

```
<remove name="WebDAV" />
<add name="PUTVerbHandler" path="*" verb="PUT" modules="ProtocolSupportModule" resourceType="Unspecified" />
<add name="DELETEVerbHandler" path="*" verb="DELETE" modules="ProtocolSupportModule" resourceType="Unspecified" /> 
```

但它也没有奏效。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T23:14:31.687

我对 IIS 7.5（集成应用程序池）使用了以下配置：

```
 <system.webServer>
    <handlers>
      <remove name="WebDAV"/>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit"/>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit"/>
      <remove name="ExtensionlessUrlHandler-Integrated-4.0"/>
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0"/>
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0"/>
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0"/>
    </handlers>
    <modules runAllManagedModulesForAllRequests="true">
      <remove name="WebDAVModule"/>
    </modules>
  </system.webServer> 
```

# python - 尝试 JPEG 导出时出现类型错误

> ID：15604406
> 
> 赞同：1
> 
> 时间：2013-03-24T21:45:00.967
> 
> 标签：python, python-imaging-library

我正在尝试使用以下代码导出给定图像的调整大小的 JPEG（下载部分被省略，因为它工作正常）：

```
basewidth = 400 # user-defined variable
wpercent = (basewidth/float(img.size[0]))
hsize = int((float(img.size[1])*float(wpercent)))
img = img.resize((basewidth,hsize), Image.ANTIALIAS)
theitemishere = "/home/myusername/public_html/resizer/" + filename
img.save(theitemishere + extension, extension_caps) 
```

但是，在保存新图像时出现以下错误（这是回溯）：

```
 File "/home/myusername/public_html/cgi-bin/PIL/Image.py", line 1467, in save
    save_handler(self, fp, filename)
  File "/home/myusername/public_html/cgi-bin/PIL/JpegImagePlugin.py", line 557, in _save
    ImageFile._save(im, fp, [("jpeg", (0,0)+im.size, 0, rawmode)])
  File "/home/myusername/public_html/cgi-bin/PIL/ImageFile.py", line 466, in _save
    e = Image._getencoder(im.mode, e, a, im.encoderconfig)
  File "/home/myusername/public_html/cgi-bin/PIL/Image.py", line 395, in _getencoder
    return encoder(mode, *args + extra)
TypeError: function takes at most 11 arguments (13 given) 
```

关于为什么会发生这种情况的任何想法？

*FWIW，我无法在服务器上安装 PIL 模块，这就是为什么我将它作为 cgi-bin 的子目录。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-09T04:35:39.447

我有同样的问题并解决了它。写这个解决方案，因为我觉得上面的答案对于其他有同样问题并正在寻找解决方案的人来说描述性不够

我遇到了这个问题，因为我同时安装了 PIL n Pillow。所以不得不卸载其中一个。这解决了问题。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T01:28:57.150

您可能想跳过所有内容并从加载图像开始并立即保存它：

```
img.save("/home/myusername/public_html/resizer/file.jpg", format="JPEG") 
```

看看会发生什么。如果可行，则添加更多细节、调整大小和其他内容。

啊，不要忘记检查保存文件夹的写入权限，因为网络服务器通常以不同的用户名运行。

# regex - 正则表达式匹配从 PostgreSQL 8.3 到 9.2 发生了什么变化？

> ID：15604407
> 
> 赞同：4
> 
> 时间：2013-03-24T21:45:01.980
> 
> 标签：regex, postgresql

如果我运行此查询：

```
SELECT 'Via Orologio 122 A' SIMILAR TO '(Strada|Via) % [0-9]+( [A-Z])?'; 
```

我希望得到 TRUE。postgreSQL 9.1.8 版返回预期值，但在 8.3 版中它返回 FALSE。我认为问题是最后一个问号。事实上，查询：

```
SELECT 'Via Orologio 122 A' SIMILAR TO '(Strada|Via) % [0-9]+( [A-Z])'; 
```

在两个版本中都返回 TRUE。

谁知道这两个版本有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T22:24:07.617

从[8.3.2 的更新日志](http://www.postgresql.org/docs/current/interactive/release-8-3-2.html)：

> 修复正则表达式子字符串匹配中的极端情况 `(substring(string from pattern))`(Tom)
> 当整个模式匹配但用户指定了带括号的子表达式并且该子表达式没有匹配时，就会出现问题。一个例子是`substring('foo' from 'foo(bar)?')`。这应该返回 NULL，因为`(bar)`不匹配，但它错误地返回了整个模式匹配（即`foo`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T23:34:48.933

切换到正则表达式 ( `~`) 时，直接替换为：

```
SELECT 'Via Orologio 122 A' ~ '^(?:(?:Strada|Via) .* [0-9]+(?: [A-Z])?)$' 
```

*   左锚和右锚
*   有`*`，不`+`
*   非捕获括号

提示：
您可以让 Postgres[使用 dba.SE 上相关答案中概述](https://dba.stackexchange.com/questions/10694/pattern-matching-with-like-similar-to-or-regular-expressions-in-postgresql/10696#10696)`SIMILAR TO`的技术为您翻译表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T23:02:04.590

按照克雷格·林格的建议，改为：

```
SELECT 'Via Orologio 122 A' ~ '(Strada|Via) .+ [0-9]+( [A-Z])?'; 
```

解决了这个问题。'~' 似乎是比 'SIMILAR TO' 更好的解决方案

# c# - 从 SQL Server 数据库获取信息

> ID：15604410
> 
> 赞同：1
> 
> 时间：2013-03-24T21:45:39.397
> 
> 标签：c#, sql-server

请告诉我阅读器变量的数据类型应该是什么？

```
 public Patient GetPatientInfo(string ID)
  {
      const string sql_get_patient_info = "Select * from dbo.Tb_Patient WHERE id=@ID";
      Patient _p = new Patient();

      DbCommand readCommand = _db.GetSqlStringCommand(sql_get_patient_info);
      SqlDataReader reader = readCommand.ExecuteReader();

      while (reader.Read())
      {
           _p.PatientName = reader["Name"].ToString();
          _p.PatientDate = reader["Date"];
          _p.PatientGender = reader["Gender"].ToString();
          _p.PatientAge = reader["Age"].ToString();
          _p.PatientContact = reader["Contact"].ToString();
          _p.PatientOccupation = reader["Occupation"].ToString();
      }
      return _p;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:48:49.987

因为您使用的是 DbCommand 类，所以您调用

```
DbDataReader reader = readCommand.ExecuteDbDataReader(); 
```

[MSDN ExecuteDbDataReader](http://msdn.microsoft.com/en-us/library/system.data.common.dbcommand.executedbdatareader.aspx)

# c++ - 内存分配/释放？

> ID：15604411
> 
> 赞同：41
> 
> 时间：2013-03-24T21:45:43.013
> 
> 标签：c++, memory, allocation, memory-management

我最近一直在研究内存分配，我对基础知识有点困惑。我一直无法围绕简单的东西。分配内存是什么意思？怎么了？我将不胜感激任何这些问题的答案：

1.  分配的“内存”在哪里？

2.  这个“记忆”是什么？数组中的空间？或者是其他东西？

3.  当这个“内存”被分配时会发生什么？

4.  当内存被释放时会发生什么？

5.  如果有人能回答 malloc 在这些 C++ 行中的作用，那也会对我很有帮助：

    ```
    char* x; 
    x = (char*) malloc (8); 
    ```

谢谢你。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-03-24T22:03:24.057

### 记忆模型

C++ 标准有一个*内存模型*。它尝试以通用方式对计算机系统中的内存进行建模。该标准定义字节是内存模型中的存储单元，并且内存由字节组成（第 1.7 节）：

> C++ 内存模型中的基本存储单元是字节。[...] C++ 程序可用的内存由一个或多个连续字节序列组成。

### 对象模型

该标准始终提供*对象模型*。这指定了一个对象是一个存储区域（因此它由字节组成并驻留在内存中）（§1.8）：

> C++ 程序中的构造创建、销毁、引用、访问和操作对象。对象是一个存储区域。

所以我们开始了。内存是存储对象的地方。要将对象存储在内存中，必须分配所需的存储区域。

### 分配和释放函数

该标准提供了两个隐式声明的全局范围分配函数：

```
void* operator new(std::size_t);
void* operator new[](std::size_t); 
```

这些如何实施不是标准的关注点。重要的是它们应该返回一个指向某个存储区域的指针，其字节数对应于传递的参数（第 3.7.4.1 节）：

> 分配函数尝试分配请求的存储量。如果成功，它将返回存储块的开始地址，其字节长度应至少与请求的大小一样大。从分配函数返回时分配的存储内容没有限制。

它还定义了两个相应的释放函数：

```
void operator delete(void*);
void operator delete[](void*); 
```

定义为释放先前分配的存储（§3.7.4.2）：

> 如果给标准库中的释放函数的参数是一个不是空指针值的指针（4.10），则释放函数应释放指针引用的存储，使引用释放存储的任何部分的所有指针无效.

### `new`和`delete`

通常，您不需要直接使用分配和释放函数，因为它们只会给您未初始化的内存。相反，在 C++ 中，您应该使用`new`并`delete`动态分配对象。新*表达式*通过使用上述分配函数之一获得所请求类型的存储，然后以某种方式初始化该对象。例如`new int()`，将为一个`int`对象分配空间，然后将其初始化为 0。参见 §5.3.4：

> new-expression 通过调用分配函数 (3.7.4.1) 来获取对象的存储空间。
> 
> [...]
> 
> 创建 T 类型对象的新表达式初始化该对象 [ ... *]*

在相反的方向，`delete`将调用对象的析构函数（如果有），然后释放存储空间（§5.3.5）：

> 如果*delete-expression*的操作数的值不是空指针值，则*delete-expression*将为要删除的对象或数组的元素调用析构函数（如果有）。
> 
> [...]
> 
> 如果*delete-expression*的操作数的值不是空指针值，则*delete-expression*将调用释放函数 (3.7.4.2)。

### 其他分配

但是，这些并不是分配或取消分配存储的唯一方式。该语言的许多结构都隐含地需要分配存储空间。例如，给出一个对象定义，如`int a;`，也需要存储（§7）：

> 定义导致保留适当的存储量并完成任何适当的初始化（8.5）。

### C标准库：`malloc`和`free`

此外，`<cstdlib>`头文件还引入了`stdlib.h`C 标准库的内容，其中包括`malloc`和`free`函数。它们也被 C 标准定义为分配和释放内存，很像 C++ 标准定义的分配和释放函数。以下是`malloc`(C99 §7.20.3.3) 的定义：

> `void *malloc(size_t size);`
> **说明**
> 该`malloc`函数为大小由 指定`size`且值不确定的对象分配空间。
> **返回**
> 该`malloc`函数返回一个空指针或一个指向已分配空间的指针。

`free`以及（C99 §7.20.3.2）的定义：

> `void free(void *ptr);`
> **说明**
> 该`free`函数使 所指向的空间`ptr`被释放，即可供进一步分配。如果`ptr`是空指针，则不执行任何操作。`calloc`否则，如果参数与先前由、`malloc`或函数返回的指针不匹配`realloc`，或者如果空间已通过调用`free`or被释放`realloc`，则行为未定义。

然而，在 C++中使用`malloc`and从来没有一个好的借口。`free`如前所述，C++ 有自己的替代方案。

* * *

### 问题的答案

所以直接回答你的问题：

1.  分配的“内存”在哪里？

    C++ 标准不在乎。它只是说程序有一些由字节组成的内存。可以分配此内存。

2.  这个“记忆”是什么？数组中的空间？或者是其他东西？

    就标准而言，内存只是一个字节序列。这是故意非常通用的，因为该标准仅尝试对典型的计算机系统进行*建模。*在大多数情况下，您可以将其视为计算机 RAM 的模型。

3.  当这个“内存”被分配时会发生什么？

    分配内存使某些存储区域可供程序使用。对象在分配的内存中初始化。您只需要知道您可以分配内存。实际分配给进程的物理内存往往是由操作系统完成的。

4.  当内存被释放时会发生什么？

    重新分配一些以前分配的内存会导致该内存对程序不可用。它成为解除分配的存储。

5.  如果有人能回答 malloc 在这些 C++ 行中的作用，那也会对我很有帮助：

    ```
    char* x; 
    x = (char*) malloc (8); 
    ```

    在这里，`malloc`只是简单地分配了 8 个字节的内存。它返回的指针被强制转换为 a`char*`并存储在`x`.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-24T22:07:15.030

**1）正在分配的“内存”在哪里？**

根据您的操作系统、编程环境（gcc、Visual C++、Borland C++ 和其他任何东西）、计算机、可用内存等，这是完全不同的。一般来说，内存是从所谓的堆分配的，内存区域只是在等待周围供您使用。它通常会使用您可用的 RAM。但总有例外。在大多数情况下，只要它给我们记忆，它来自哪里并不是一个大问题。有一些特殊类型的内存，例如虚拟内存，它们可能在任何给定时间实际上都在 RAM 中，也可能不在 RAM 中，如果您的实际内存用完，它们可能会转移到您的硬盘驱动器（或类似的存储设备）中。完整的解释会很长！

**2）这个“记忆”是什么？数组中的空间？或者是其他东西？**

内存通常是计算机中的 RAM。如果将内存视为一个巨大的“数组”会有所帮助，那么它肯定会像一个数组一样运行，然后将其视为大量字节（8 位值，很像`unsigned char`值）。它从内存底部的索引 0 开始。不过，就像以前一样，这里有很多例外，内存的某些部分可能会映射到硬件，甚至可能根本不存在！

**3）当这个“内存”被分配时会发生什么？**

在任何给定时间，都应该（我们真的希望！）其中一些可供软件分配。它的分配方式高度依赖于系统。通常，分配一个内存区域，分配器将其标记为已使用，然后给您一个指针以供您使用，该指针告诉程序该内存位于系统的所有内存中的哪个位置。在您的示例中，程序将找到一个连续的 8 字节 (char) 块，并在将其标记为“正在使用”之后返回一个指向该块所在位置的指针。

**4）当内存被释放时究竟会发生什么？**

系统将该内存标记为可再次使用。这非常复杂，因为这通常会导致内存出现漏洞。分配 8 个字节，然后再分配 8 个字节，然后释放前 8 个字节，你就有了一个漏洞。有关于处理释放、内存分配等的整本书。所以希望简短的回答就足够了！

**5) 如果有人能回答 malloc 在这些 C++ 行中的作用，它也会对我很有帮助：**

真的很粗略，假设它在一个函数中（顺便说一句，永远不要这样做，因为它不会释放你的内存并导致内存泄漏）：

```
void mysample() {
  char *x; // 1
  x = (char *) malloc(8); // 2
} 
```

1) 这是一个保留在本地堆栈空间中的指针。它还没有被初始化，所以它指向其中的任何内存。

2) 它使用参数 8 调用 malloc。转换只是让 C/C++ 知道您打算将其设为 (char *)，因为它返回 (void *) 意味着它没有应用类型。然后将结果指针存储在您的 x 变量中。

在非常粗糙的 x86 32 位汇编中，这看起来有点像

```
PROC mysample:
  ; char *x;
  x = DWord Ptr [ebp - 4]
  enter 4, 0   ; Enter and preserve 4 bytes for use with 

  ; x = (char *) malloc(8);
  push 8       ; We're using 8 for Malloc
  call malloc  ; Call malloc to do it's thing
  sub esp, 4   ; Correct the stack
  mov x, eax   ; Store the return value, which is in EAX, into x

  leave
  ret 
```

实际分配在第 3 点中进行了模糊描述。Malloc 通常只为此调用一个系统函数来处理所有其余部分，并且就像这里的其他所有内容一样，它在操作系统之间、系统到系统等方面有很大不同。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-24T22:31:36.163

> 1\. 分配的“内存”在哪里？

从语言的角度来看，这没有具体说明，主要是因为细节通常并不重要。此外，该`C++`标准倾向于在未指定硬件细节方面犯错，以尽量减少不必要的限制（编译器可以运行的平台和可能的优化）。

sftrabbit 的回答很好地概述了这一切（这就是你真正需要的），但如果有帮助，我可以举几个例子。

## 示例 1：

在一台足够老的单用户计算机（或足够小的嵌入式计算机）上，大部分物理 RAM 可能对您的程序直接可用。在这种情况下，调用`malloc`或`new`本质上是内部簿记，允许运行时库跟踪该 RAM 的哪些块当前正在使用。您可以手动执行此操作，但很快就会变得乏味。

## 示例 2：

在现代多任务操作系统上，物理 RAM 与许多进程和其他任务（包括内核线程）共享。它还用于后台的磁盘缓存和 I/O 缓冲，并由虚拟内存子系统增强，该子系统可以在不使用数据时将数据交换到磁盘（或其他一些存储设备）。

在这种情况下，调用`new`可能首先检查您的进程内部是否已经有足够的可用空间，如果没有，则向操作系统请求更多空间。返回的内存可能是物理的，也可能是虚拟的（在这种情况下，在实际访问之前可能不会分配物理 RAM 来存储它）。你甚至无法区分，至少在不使用特定于平台的 API 的情况下是这样，因为内存硬件和内核会合力将其隐藏起来。

> 2\. 这个“记忆”是什么？数组中的空间？或者是其他东西？

在示例 1 中，它类似于数组中的空间：返回的地址标识物理 RAM 的可寻址块。即使在这里，RAM 地址也不一定是平坦的或连续的——一些地址可能是为 ROM 或 I/O 端口保留的。

在示例 2 中，它是对更虚拟的事物的索引：您的进程的地址空间。这是一种抽象，用于向您的进程隐藏底层虚拟内存详细信息。当你访问这个地址时，内存硬件可能会直接访问一些真实的 RAM，或者它可能需要请求虚拟内存子系统提供一些。

> 3\. 当这个“内存”被分配时会发生什么？

通常，会返回一个指针，您可以使用它来存储所需的字节数。在这两种情况下，`malloc`或者`new`操作员都会做一些内务处理来跟踪进程地址空间的哪些部分被使用，哪些部分是免费的。

> 4\. 当内存被释放时会发生什么？

一般来说，`free`或者`delete`会做一些内务处理，以便他们知道内存可以重新分配。

> 如果有人能回答 malloc 在这些 C++ 行中的作用，那也会对我很有帮助：

```
char* x; 
x = (char*) malloc (8); 
```

它返回一个指针，要么是`NULL`（如果它找不到你想要的 8 个字节），要么是一些非 NULL 值。

关于这个非 NULL 值，您唯一可以说的有用的是：

*   访问这 8 个字节中的每一个都是合法（且安全）的`x[0]..x[7]`，
*   访问或实际上是非法的（未定义的`x[-1]`行为`x[8]`）*，* `x[i]`除非`0 <= i <= 7`
*   *比较*任何一个都是合法的`x, x+1, ..., x+8`（尽管你*不能取消引用*最后一个）
*   如果您的平台/硬件/任何东西对您可以在内存中存储数据的位置有任何限制，那么`x`满足它们

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-24T21:59:59.103

分配内存意味着向操作系统请求内存。这意味着程序本身仅在需要时才在 RAM 中请求“空间”。例如，如果你想使用一个数组，但在程序运行之前你不知道它的大小，你可以做两件事： - 声明和 array[x]，x 由你指定，任意长。例如 100。但是如果您的程序只需要一个包含 20 个元素的数组呢？你白白浪费内存。- 然后你的程序可以在知道 x 的正确大小时 malloc 一个 x 元素的数组。内存中的程序分为 4 个段： - 堆栈（调用函数所需） - 代码（二进制可执行代码） - 数据（全局变量/数据） - 堆，在此段中您可以找到分配的内存。当您决定不再需要分配的内存时，

如果要分配 10 个整数的数组，请执行以下操作：

int *array = (int *)malloc(sizeof(int) * 10)

然后你用 free(array) 把它还给操作系统

# c++ - std::queue emplace 的包装器

> ID：15604412
> 
> 赞同：2
> 
> 时间：2013-03-24T21:45:44.503
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, variadic-templates

我正在 Windows 8 上使用 Visual Studio 2012 并尝试为 std::queue 创建一个包装器，以增加线程安全性和一些其他功能。我在为 emplace 创建包装函数时遇到问题。我怀疑这是由于模拟可变参数模板的方式，但我不确定如何修复它。

```
template <typename T>
class MyQueue
{
public:
   template <class... Args>             // line 20
   void emplace(Args&&... args)
   {
      mQueue.emplace(std::forward<Args>(args)...);
   }
private:
   std::queue<T> mQueue;
}; 
```

这段代码给了我一堆语法错误。

@ 第 20 行：

*   C2011: '' : 'enum' 类型重新定义
*   C2143：语法错误：在 '...' 之前缺少 ','
*   C2332：“类”：缺少标签名称

@ 第 21 行：

*   C2059：语法错误：'...'
*   C2065：'Args'：未声明的标识符

有什么干净的方法可以利用底层队列的`emplace`功能吗？我没有做任何对性能至关重要的事情，所以如果它最终比它的价值更麻烦，我只会强迫调用者使用`push`.

任何解决方案都必须使用 VC++11 - 切换平台或编译器不是我的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:45:29.633

我最终通过在项目设置中将平台工具集更改为 2012 年 11 月的 CTP 来实现这一点。正如其他人指出的那样 - 代码本身是正确的。请参阅下面的简单示例。

我的队列.h：

```
#pragma once

#include <queue>

template <typename T>
class MyQueue
{
public:
    template <class... Args>
    void emplace(Args&&... args);
private:
    std::queue<T> mQueue;
};

template <typename T>
template <class... Args>
void MyQueue<T>::emplace(Args&&... args)
{
    mQueue.emplace(std::forward<Args>(args)...);
} 
```

主文件

```
#include "MyQueue.h"

struct Test
{
    int mA, mB;
    Test(int a, int b) : mA(a), mB(b) { }
};

int main()
{
    MyQueue<Test> q;
    q.emplace(1, 1);
    q.emplace(2, 2);
    q.emplace(3, 3);

    return 0;
} 
```

# user-interface - 用于创建 Azure 数据库表的 GUI

> ID：15604413
> 
> 赞同：4
> 
> 时间：2013-03-24T21:45:47.227
> 
> 标签：user-interface, azure, azure-sql-database

在迁移到 Azure 之前，我曾经直接从服务器资源管理器 ( `Add New Table`/ `Open Table Definition`) 在 Visual Studio 2010 中为我的数据库创建和修改数据表。

不幸的是，似乎不再可能对 SQL Azure 数据库执行此操作，“功能不受支持”。有人知道用于创建和修改数据表模式的基于 GUI 的工具吗？我显然可以编写这些更改的脚本，但使用 GUI 会快得多。

Visual Studio 2012 支持这个吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-24T22:57:22.220

是的，Visual Studio 2012 的服务器资源管理器支持连接到 SQL Azure 数据库服务器。但您也可以使用免费的[SQL Server Express Management Studio 2008 R2](http://www.microsoft.com/en-us/download/details.aspx?id=22985)（或更高版本）连接到 SQL Azure，甚至可以使用 SQL Server 管理门户中的设计器。

**编辑：**

我看到你想要一个设计师 UI。据我所知，SSMS 中没有此类功能，但 Visual Studio 2012 确实支持此功能。如果您不想切换到 VS2012，您仍然可以从 SQL Azure 管理门户使用 UI。

*   视觉工作室 2012![来自 VS2012 的 SQL Azure 数据库设计器](../Images/f0706b0777dfc94f5fa1afc22ec4788f.png)
*   SQL Azure 管理门户![在此处输入图像描述](../Images/d8ba96725385b6500395f607aa5d841f.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T02:05:05.600

与 SQL Server 2012 一起提供并与 VS2012 集成的 SSDT（SQL Server 数据工具）怎么样。它支持 SQL Server 和 SQL Azure 的 GUI。

[http://msdn.microsoft.com/en-us/data/tools.aspx](http://msdn.microsoft.com/en-us/data/tools.aspx)

[http://blogs.shaunxu.me/archive/2012/04/28/ssdt-ndash-makes-sql-azure-development-easy.aspx](http://blogs.shaunxu.me/archive/2012/04/28/ssdt-ndash-makes-sql-azure-development-easy.aspx)

# performance - 如何获得图形直径的运行时间？

> ID：15604421
> 
> 赞同：1
> 
> 时间：2013-03-24T21:46:36.173
> 
> 标签：performance, algorithm, graph, big-o

如果您有一个简单的无向图 G(V, E)，如何在 O((|V|+|E|) * lg |V|) 运行时间中找到图的直径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T01:05:43.610

我认为最知名的未加权无向图算法采用 Õ(n^ω)，其中 n = |V| ω < 2.376 是快速矩阵乘法的指数。O((|V|+|E|) * lg |V|) 会给我们 Õ(n^2)，这比最知名的算法要好。查看[http://arxiv.org/abs/1011.6181](http://arxiv.org/abs/1011.6181)的介绍部分以获得简要调查和参考。

# c++ - 如何将用户输入添加到二维数组中

> ID：15604422
> 
> 赞同：-2
> 
> 时间：2013-03-24T21:46:41.177
> 
> 标签：c++, arrays, multidimensional-array

我正在尝试获取存储在数组（eightBit []）中的用户输入，然后将其添加到二维数组（板）中。用户应该输入 8 个数字，例如：Byte 1: 1 Byte 2: 2 etc... 并且输出应该如下所示：

```
1 2 3 4
5 6 7 8 
```

然而这是我得到的输出：

```
8 8 8 8
8 8 8 8 
```

知道为什么它只重复输入的最后一个编号吗？我的部分代码如下，任何帮助将不胜感激。

```
cout << "Enter a pattern of eight bits:" << endl;
            for(i = 0; i < 8; i++){
                cout << "Byte " << i+1 << ": ";
                cin >> eightBit[i];
            }

int board[2][4];

            for(i = 0; i<8; i++){
                for(int j=0; j<2; j++){
                for(int k=0; k<4; k++) {
                    board[j][k] = eightBit[i];

                }
            }

            for(int j=0; j<2; j++)
            {
                for(int k=0; k<4; k++) 
                {
                    cout << board[j][k]  << "  ";
                }
    cout << endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T22:17:34.420

那是因为您的外部循环`i`基本上覆盖了二维数组中的每个元素。

一个解决方案是完全放弃该外循环，如下所示：

```
int i = 0;
    for(int j=0; j<2; j++) {
        for(int k=0; k<4; k++) {
            board[j][k] = eightBit[i++];
        }
    } 
```

您的代码段中也有**括号不匹配**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T22:13:31.793

这很自然。在第二个中，当 i 最后达到 8 时，棋盘就会被当前 i (i=8) 填满。试试这个，下次更小心你的代码:)。

```
#include <iostream>

using namespace std;
int eightBit[2][4];

int main()
{
    cout << "Enter a pattern of eight bits:" << endl;

        for(int i = 0; i <2; i++){
            for (int j=0 ; j<4 ; ++j)  {
                cout << "Byte " << (j+1)+4*i << ": ";    //4 = # of columns,i=row,j=column.
                cin >> eightBit[i][j];
            }
        }

    int board[2][4];

    for(int i = 0; i <2; i++){
        for (int j=0 ; j<4 ; ++j)  {
            board[i][j] = eightBit[i][j];

        }
    }
    for(int i = 0; i <2; i++){
        for (int j=0 ; j<4 ; ++j)  {

            cout << board[i][j]  << "  ";
        }
        cout << endl;
   }

} 
```

# data-warehouse - 应用程序是否可以直接查询数据仓库存储库；还是他们应该始终通过数据集市访问数据？

> ID：15604423
> 
> 赞同：-1
> 
> 时间：2013-03-24T21:47:13.197
> 
> 标签：data-warehouse

我计划为中小型公司实施 Inmon 类型的数据仓库解决方案。数据仓库解决方案将有一个第三范式存储库和一组数据集市。数据将从“在线”数据源 (OLTP) 流向数据仓库存储库和数据集市。我相信我已经很好地掌握了这个理论。我读过几本书（Laberge 的“数据仓库导师”，Kimball 和 Inmon 的书）我对现实生活中的解决方案和最佳实践有疑问。

问题：

1.  让应用程序（报告系统等）对数据仓库存储库（我指的是中央 3NF 数据存储）执行查询是个好主意，还是应该始终通过数据集市访问数据？
2.  数据存储库和数据集市对象（模式、表、字段等）是否有标准命名约定？
3.  你能给我指出现实生活中的数据仓库模式示例吗？我已经查看了 MSSQL AdventureWorksDW。

我会很感激任何反馈。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:33:30.563

1）这取决于。如果 3NF 执行，则根本不应该有任何理由拥有维度数据集市。数据集市通常是出于聚合和性能原因。这总是会提出“如果所有查询都发生在数据集市中，为什么还要使用 3NF 层？”的问题？

2) 使用贵公司定义的最佳实践。整个行业都有各种各样的标准，使用你已经拥有的。

3) 现实生活中的 Inmon 式数据仓库几乎只存在于非常大的公司中，这些公司能够承担大量时间和政治意愿来构建 Inmon 定义的巨大数据字典和“企业信息工厂”，或者非常小的公司，只有非常很少有可以从中读取数据的源系统。如果您不集成*每个*系统，当它上线时，将来当您发现您的 3NF 模型不完全适合业务时就会出现问题。Kimball 数据集市可以从一个业务领域开始构建，然后随着时间的推移慢慢扩展以包含其他业务领域，而不必预先做所有事情。

# c++ - 隔离字符中的 1 字符串

> ID：15604426
> 
> 赞同：0
> 
> 时间：2013-03-24T21:47:37.727
> 
> 标签：c++, bit-manipulation

我需要想出一个函数，它需要一个字符和一个设置位的索引，并隔离一个包含该位的 1 字符串。

IE

```
char isolate(unsigned char arg, int i); 
```

例如：

隔离（221,2）将返回 28（11011101 >>> 00011100）

隔离（221,6）将返回 192（11011101 >>> 1100000）

查找表似乎是一个笨拙的解决方案，因为它需要 ~256*8=2048 个条目。

我正在考虑检查索引左侧和右侧的每个单独的位：

```
char isolate(char arg, int i)
{
   char result=0;
   char mask = 1<<i;
   for(char mask = 1<<i; arg & mask != 0; mask>>=1)
      result |= mask;
   for(char mask = 1<<i; arg & mask != 0; mask<<=1)
      result |= mask;
   return result;
} 
```

但它也似乎有点难看。我怎么能做得比这更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T22:00:18.897

这是一个有趣的操作。您编写的代码可以很好地表达它，所以您介意详细说明它有多丑吗？

我可以看到的细节：鉴于它在 中`i`表示一个位数，因此成为更广泛的类型`arg`绝对没有意义。在条件下`i`写作从来没有意义。`!= 0`您可能不想在使用它的任何地方重新声明掩码，也不想连续两次初始化它。

至于实际的扩展位掩码，我现在想不出一种更具表现力、更清洁或更高效的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T23:40:11.827

警告：这些都没有经过测试甚至相关*，但它可能很有趣。

隔离最右边的 1 很容易，就像这样：（`x ^ (x & ((x|(x-1))+1))`下面的解释），所以让我们来处理它。

首先`x|(x-1)`将最右边的 1 涂抹到右边，加 1 将所有这些位变为 0，包括最右边的 1，`x`与删除最右边的 1，最后，与`x`只留下最右边的 1。

然后我们只需要确保我们正在寻找的范围是最右边的。这不太适合简单的位数学运算，但如果有前导零计数 ( `clz`)，那就不太难了：

```
int shift = 32 - clz(~x & ((1 << i) - 1));  //replace 32 with word size
x = (x >> shift) << shift; 
```

`((1 << i) - 1)`制作我们正在寻找的运行的右端可能所在的部分的掩码（它也可能*错过*结束，但这没关系），然后查找in`clz`右侧的第一个零，然后移位删除我们不想查看的位。`i``x`

应用第一个公式，用于隔离最右边的 1 的运行，以得到其中的运行`i`。`i`最好在某个运行中，或者事情横向发展（更准确地说，它会返回第一次运行从高于`i`)的索引开始的 1s

*：对于这个问题，这些都不重要。除非您只有少量可用内存，否则 2KB 表并不是一个笨拙的解决方案，即使是这种情况，输入也很短，以至于循环并不是那么糟糕。

# css - 在不破坏其目的的情况下为 960.gs 框架添加额外的边距

> ID：15604429
> 
> 赞同：0
> 
> 时间：2013-03-24T21:47:55.967
> 
> 标签：css, frameworks, dry, 960.gs, separation-of-concerns

我有一个想要完成的设计，并找到了两种使用 960gs 框架来实现它的方法。虽然我不知道哪一个更好，并且没有那么多关于 CSS 最佳实践的信息，比如 PHP。因此，我应用了从普通 HTML/CSS 和 PHP OO 中学到的知识，发现它们实际上都不是“好”的。

这是我设计的[重要部分]：

![网页设计](../Images/31b6c6b8a472bc86a0d656c2fa5cf3d1.png)

基于960gs框架的两种获取方式以及我发现的缺点是：

1.  修改 CSS 以向文本添加边距。然后，在那个 div 中，应用一个 12 列的纯 960gs 系统。这可行，但它使整个宽度比最佳宽度更宽（1000 像素，不适用于 1024x768，9 [% 的浏览器](http://www.w3schools.com/browsers/browsers_display.asp)）。

2.  使用 24 列模型并将第一列和最后一列留空，因此它们成为边距。这样做的问题是，我将结构元素纯粹用于视觉效果，而且必须将它们写在每个页面的每个部分（不是很干）。

第二个例子：

```
<div class='grid_22 prefix_1'>    
  <p>
    The theory of relativity transformed theoretical <a href="http://en.wikipedia.org/wiki/Physics" title="Physics">physics</a> and <a href="http://en.wikipedia.org/wiki/Astronomy" title="Astronomy">astronomy</a> during the 20th century. When first published, relativity superseded a 200-year-old <a href="http://en.wikipedia.org/wiki/Classical_mechanics" title="Classical mechanics">theory of mechanics</a> created primarily by <a href="http://en.wikipedia.org/wiki/Isaac_Newton" title="Isaac Newton">Isaac Newton</a>.
  </p>
</div> 
```

我想要的是在我的页面中应用 960gs 框架，并带有一些额外的个性化边距。

**那么，你将如何避免我所说的这些问题，以实现我想要的？**

PS，由于960gs框架有bug，不好找

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:13:53.940

您的列宽 960 像素，看起来不错。可以在不声明不同宽度的情况下制作列外标题`box-shadow`的左/右额外宽度，因此它不会创建水平滚动条。

工作示例： http: [//jsfiddle.net/q8brv/](http://jsfiddle.net/q8brv/)使用绝对定位来装饰标题的左右部分（兼容性 IE8+。IE7- 可以在没有 box-shadow 的情况下生存，并且这个装饰 imo ;)）

分辨率为 1024px 的上限是 1004px，尽管它是用于最大化浏览器窗口的。

# opengl - OpenGL中的相机翻译

> ID：15604432
> 
> 赞同：0
> 
> 时间：2013-03-24T21:48:12.387
> 
> 标签：opengl, glut, glm-math

我正在尝试上一门课程来在 OpenGL 中穿越世界，但我遇到了数学问题。我的想法是使用 glm 中的函数 lookAt 将观察者设置在我想要的位置，然后只使用我传递给函数的点进行操作。我认为我所做的旋转功能是正确的，但是 walk 方法中的平移部分似乎是错误的，当我尝试在世界中行走时，如果我只是平移或旋转，事情就正常了，但是当我做这两件事只是搞砸了。

这是到目前为止的课程：

```
#ifndef OBSERVER_H
#define OBSERVER_H

#include <GL/gl.h>
#include <glm/glm.hpp>
#include <glm/gtc/matrix_transform.hpp>

class Observer {

private:

    glm::vec3 eye, center, upp;

public:

    glm::mat4 view;

    Observer() {}
    ~Observer() {}    

    void initialize(glm::vec3 eye, glm::vec3 center, glm::vec3 upp);
    void walk(GLfloat distance);
    void pitch(GLfloat pitch);
    void yaw(GLfloat yaw);
    void roll(GLfloat roll);
    void setView();
};

void Observer::initialize(glm::vec3 eye, glm::vec3 center, glm::vec3 upp) 
{
    this->eye = eye;
    this->center = center;
    this->upp = upp;
}

void Observer::walk(GLfloat distance) 
{
    glm::vec3 vector = glm::normalize(center - eye);
    glm::vec3 translate = vector*distance - vector;

    eye += translate;
    center += translate;
    upp += translate;
}

void Observer::roll(GLfloat roll) {
    glm::mat4 rotate(1.0f);

    rotate = glm::rotate(rotate, roll, glm::vec3(center - eye));

    center = glm::vec3(rotate * glm::vec4(center, 1.0f));
    upp = glm::vec3(rotate * glm::vec4(upp, 1.0f));
}

void Observer::yaw(GLfloat yaw) {
    glm::mat4 rotate(1.0f);

    rotate = glm::rotate(rotate, yaw, glm::vec3(upp - eye));

    center = glm::vec3(rotate * glm::vec4(center, 1.0f));
    upp = glm::vec3(rotate * glm::vec4(upp, 1.0f));
}

void Observer::pitch(GLfloat pitch) {
    glm::mat4 rotate(1.0f);
    glm::vec3 cross = glm::cross(center - eye, upp - eye);

    rotate = glm::rotate(rotate, pitch, cross);

    center = glm::vec3(rotate * glm::vec4(center, 1.0f));
    upp = glm::vec3(rotate * glm::vec4(upp, 1.0f));
}

void Observer::setView() 
{
    view = glm::lookAt(eye, center, upp);
}

#endif 
```

所以在我开始绘制之前，我在程序的其他部分设置了这个类的视图矩阵。谁能告诉我我的数学是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T21:59:02.387

当您 时`walk`，您只想变换眼睛和中心位置，而不是`upp`矢量。只需删除该`upp += translate;`行。

# c# - 登录页面 C# .SDF

> ID：15604433
> 
> 赞同：2
> 
> 时间：2013-03-24T21:48:12.420
> 
> 标签：c#, sql-server-ce

我正在尝试创建一个允许用户使用 .sdf 登录的应用程序，互联网上没有太多关于此的内容！

真的可以用一些指针来做。

这是我目前拥有的，但我相信这是一堆乱七八糟的东西，因为无论我在每个文本框中输入什么内容，它都会将我重定向到`Form2`（这是意料之中的）。我知道我在某处需要一个 if 语句，但不确定如何实现：

```
 private void Login_Click(object sender, EventArgs e)
  {
     using (SqlCeConnection yourConnection = new SqlCeConnection("Data Source=C:\\Users\\Username\\Documents\\Databases\\New Folder\\Login.sdf"))
     {
          string query = "SELECT * FROM tbl_employees where Username like '" + textBox1.Text + "' AND Password like '" + textBox2.Text +"'";
          SqlCeDataAdapter dA = new SqlCeDataAdapter(query, yourConnection);
          SqlCeCommandBuilder cBuilder = new SqlCeCommandBuilder(dA);

          this.Hide();
          Form2 secondForm = new Form2();
          secondForm.ShowDialog();
     }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:02:54.970

首先，SQL Server CE 数据库ie`.sdf`文件只是另一个存储文件。它是非常轻巧且可移植的 SQL Server 版本。

但是，您的代码和逻辑最多与 SQL Server 的代码和逻辑相似。只是班级不同。即`SqlCeConnection`，`SqlCeCommand`等等。

现在您需要验证您的`connectionString`是否正确。

```
string connectionString ="data source=physical path to .sdf file; 
                         password=pwdThtUSet; persist security info=True";

using (SqlCeConnection yourConnection = new SqlCeConnection(connectionString))
{
       ....your logic
} 
```

现在，在您的查询中搜索用户名和密码组合匹配行，不要这样做，`like`因为您需要完全匹配。

所以这样做：

```
 string query = "SELECT * FROM tbl_employees where Username ='" + textBox1.Text + "' AND Password ='" + textBox2.Text +"'";
      SqlCeDataAdapter dA = new SqlCeDataAdapter(query, yourConnection);
      DataTable dt = new DataTable();
      dA.Fill(dt);

      if(dt.Rows.Count>0)
      {
          this.Hide();
          Form2 secondForm = new Form2();
          secondForm.ShowDialog();
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-12T12:59:52.713

仅在满足登录条件后尝试此操作：

```
if (usernametextbox.Text.Equals("form2username", StringComparison.InvariantCultureIgnoreCase)) {
  // code for redirection to form2
  Hide();
  con.Close();
} else {
  if (usernametextbox.Text.Equals("form3username", StringComparison.InvariantCultureIgnoreCase)) {
    // code for redirection to form3
    Hide();
    con.Close();
  }
} 
```

# html - 基于浏览器的游戏的地图生成

> ID：15604435
> 
> 赞同：-1
> 
> 时间：2013-03-24T21:48:24.230
> 
> 标签：html, canvas, map, hex

我正在构建一个基于浏览器的游戏，我想生成一个十六进制地图。我已经看到它使用 Flash 完成，并且我认为它可以使用 HTML5 画布完成。我已经对此进行了一些研究，我希望其他专家就此提出一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:17:10.083

将像这样的基本算法从 Flash 适配到 Canvas 上其实并不难。如果您需要一个接近 AS3/Flash 的画布框架，您可以查看 EaselJS：[http ://createjs.com/#!/EaselJS](http://createjs.com/#!/EaselJS)

这是一篇关于六边形瓷砖的文章： [http ://www.emanueleferonato.com/2008/04/16/understanding-hexagonal-tiles/](http://www.emanueleferonato.com/2008/04/16/understanding-hexagonal-tiles/)

# python - 解析块“|-”和“|- or }”中的文本

> ID：15604438
> 
> 赞同：0
> 
> 时间：2013-03-24T21:48:32.237
> 
> 标签：python

是否有任何内置的python原型来实现以下目标？有人可以建议如何完成以下任务..

我正在尝试获取所有数据并根据以块和或之间开头的行进行`[ ]`拆分`\s+``|``|-``|-``}`

```
 {| border=&quot;1&quot; cellspacing=&quot;1&quot; cellpadding=&quot;1&quot;
    |-
    Ignore block
    |-
    | [http://data/code SEC.12.0]
    | [file://data\\loc \\DATA\LOC]&lt;br&gt;
    |
    [file://\\ftp\\location \\ftp\\location]&amp;nbsp;&lt;br&gt; &lt;br&gt; &

    |-
    | [http://data/code2 SEC.13.0]
    | [file://data\\loc2 \\DATA\LOC2]&lt;br&gt;]
    |
    [file://\\ftp\\location2 \\ftp\\location2]&amp;nbsp;&lt;br&gt; &lt;br&gt; &
    |
    } 
```

预期输出：-

```
SEC.12.0
\\DATA\LOC
\\ftp\\location

SEC.13.0
\\DATA\LOC2
\\ftp\\location2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:21:52.647

例如：

```
import re

data = []

for block in re.findall(r'(?s)\|-(.+?)(?=\|-|})', text):
    r = [x.split()[-1] for x in re.findall(r'\[(.+?)\]', block)]
    if r:
        data.append(r)

print data 
```

结果：

```
[['SEC.12.0', '\\DATA\\LOC', '\\ftp\\location'], ['SEC.13.0', '\\DATA\\LOC2', '\\ftp\\location2']] 
```

# ios - 设置单元格圆角和边框宽度使tableview滚动极慢

> ID：15604439
> 
> 赞同：0
> 
> 时间：2013-03-24T21:48:36.670
> 
> 标签：ios, uitableview, quartz-graphics

我想绕过我的 tableview 单元格的角落，使它们之间的差距更大。

我在 cellForRowAtIndexPath 中这样做：

```
static NSString* CellIdentifier = @"normal";
cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

if(cell == nil)
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

CALayer* layer = cell.layer;
[layer setCornerRadius:8.0f];
[layer setMasksToBounds:YES];
[layer setBorderWidth:2.0f]; 
```

通过调用 setBorderWidth，tableview 的滚动变得非常缓慢。没有它，它就像一个魅力。

那么，如何使单元格角舍入并更快地设置边框宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:05:29.867

我尝试了很多次以使其快速运行。但是当用于许多对象时，它的工作速度非常慢。

我可以推荐什么：

使用背景图片，不使用图层属性。例如看[这里](https://stackoverflow.com/questions/6329832/uitableview-cell-with-background-image)

或者使用 tableView 样式 -`UITableViewStyleGrouped`

在您的情况下，表格视图中的对象可能不是很多，因此例如在创建单元格时通过设置边框对其进行优化：

```
if(cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

CALayer* layer = cell.layer;
[layer setCornerRadius:8.0f];
[layer setMasksToBounds:YES];
[layer setBorderWidth:2.0f];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T22:31:07.997

无需每次都设置图层属性，只需在像这样创建单元格时执行一次。

```
cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
if(cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

CALayer* layer = cell.layer;
[layer setCornerRadius:8.0f];
[layer setMasksToBounds:YES];
[layer setBorderWidth:2.0f];
} 
```

# mongodb - MongoDB 唯一的 10 位数字 ID

> ID：15604441
> 
> 赞同：1
> 
> 时间：2013-03-24T21:48:44.503
> 
> 标签：mongodb, mongoid

我想在 MongoDB 中创建一个唯一的 10 位 ID - 为我们在系统中获得的特定客户端下的每个用户。请注意，我们将所有用户（来自不同客户端）存储在同一个集合下。ID 只需要在同一客户端的用户之间是唯一的。来自两个不同客户端的两个用户可以共享同一个 ID，即使他们存在于同一个集合中。

关于这个 10 位 id 如何对每个用户唯一的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:24:13.477

`mongoid_token`看起来它可以做你需要的：

[https://github.com/thetron/mongoid_token](https://github.com/thetron/mongoid_token)

# caching - 缓存在 Cassandra 中不起作用

> ID：15604446
> 
> 赞同：0
> 
> 时间：2013-03-24T21:48:59.607
> 
> 标签：caching, cassandra, solandra

签入 Opscenter 或 cfstats 时，我似乎没有启用任何缓存。我在 Debian 上使用 Solandra 运行 Cassandra 1.1.7。我在 cassandra.yaml 中设置了所需的全局选项：

```
key_cache_size_in_mb: 800
key_cache_save_period: 14400
row_cache_size_in_mb: 800
row_cache_save_period: 15400
row_cache_provider: SerializingCacheProvider 
```

列族的创建如下：

```
create column family example
with column_type = 'Standard'
and comparator = 'BytesType'
and default_validation_class = 'BytesType'
and key_validation_class = 'BytesType'
and read_repair_chance = 1.0
and dclocal_read_repair_chance = 0.0
and gc_grace = 864000
and min_compaction_threshold = 4
and max_compaction_threshold = 32
and replicate_on_write = true
and compaction_strategy = 'org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy'
and caching = 'ALL'; 
```

Opscenter 未显示缓存图上的可用数据，CFSTATS 未显示任何与缓存相关的字段：

```
Column Family: charsets
SSTable count: 1
Space used (live): 5558
Space used (total): 5558
Number of Keys (estimate): 128
Memtable Columns Count: 0
Memtable Data Size: 0
Memtable Switch Count: 0
Read Count: 61381
Read Latency: 0.123 ms.
Write Count: 0
Write Latency: NaN ms.
Pending Tasks: 0
Bloom Filter False Postives: 0
Bloom Filter False Ratio: 0.00000
Bloom Filter Space Used: 16
Compacted row minimum size: 1917
Compacted row maximum size: 2299
Compacted row mean size: 2299 
```

任何帮助或建议表示赞赏。

山姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:42:41.553

在 Cassandra 1.1 中，缓存统计信息已从 cfstats 移至 info。如果您运行 nodetool info，您应该会看到如下内容：

```
Key Cache : size 5552 (bytes), capacity 838860800 (bytes), 38 hits, 47 requests, 0.809 recent hit rate, 14400 save period in seconds
Row Cache : size 0 (bytes), capacity 838860800 (bytes), 0 hits, 0 requests, NaN recent hit rate, 15400 save period in seconds 
```

这是因为现在有全局缓存，而不是每个 CF。Opscenter 似乎需要针对此更改进行更新 - 也许有可用的更高版本可用。

# python - Ubuntu 上的 Python 2.6 导入包 (psyco)

> ID：15604449
> 
> 赞同：0
> 
> 时间：2013-03-24T21:49:03.863
> 
> 标签：python, linux, bash, psyco

为什么当我直接调用我的脚本时导入 psyco 可以工作，但是当我从 bash 脚本调用它时它会失败？？？

测试.sh：

```
while true
do
    python test.py;
    sleep 10;
done 
```

测试.py：

```
try:
    import psyco
    print "Got psyco!"
except ImportError:
    print "No psyco." 
```

现在...

```
> python test.py 
```

“有精神科！”

```
> ./test.sh 
```

“没有精神科。”

“没有精神科。”

...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:07:41.763

该系统上安装了 2 个版本的 Python。

不同的环境正在调用不同版本的 python，它没有 psyco。

# svn - SVN 错误究竟是什么" 已经是不同 URL 的工作副本”是什么意思？

> ID：15604452
> 
> 赞同：2
> 
> 时间：2013-03-24T21:49:15.093
> 
> 标签：svn

我们使用 TortoiseSVN GUI 进行日常的修订控制活动。

我正在尝试设置 CruiseControl.Net，连接到 Linux 机器上的 SVN 存储库。什么样的恶梦！容我们说，在 Windows 上获取 svn 命令行以连接到 SVN Linux 服务器是“具有挑战性的”。现在一切正常，耶。从我的 Windows 命令提示符中，我可以键入

```
svn co svn+ssh://user@server/repos/QTSS 
```

它会将 QTSS 存储库复制到我的 Windows 机器上。因此，使用上面的“svn co”命令，我对将用作 CCNet 工作文件夹的位置进行了完整的检查： `C:\users\build\repos\QTSS`

在 repos/QTSS/trunk 文件夹下，我们有许多子文件夹，每个子文件夹都有自己的 VS2010 解决方案源文件。为了开始使用 CCNet，我为其中一个名为 SparsePointSurface 的子文件夹配置了一个 CCNet 项目；最终，我将为每个子文件夹创建一个 CCNet 项目。当 CCNet 运行时，它给出了错误：

```
Source control operation failed: svn: E155000: 'C:\Users\build\repos\QTSS\trunk\SparsePointSurface' is already a working copy for a different URL 
```

在 Windows 命令提示符窗口中，我 cd 到该文件夹​​并输入

```
svn checkout svn+ssh://user@server/repos/QTSS/trunk/ C:\Users\build\repos\QTSS\trunk\SparsePointSurface --no-auth-cache --non-interactive 
```

这与 CCNet 发出的命令相同。果然，我在命令提示符下得到了与 CCNet 中发生的相同的错误。所以这是 SVN 的问题，而不是 CCNet 的问题。

这个 SVN 错误到底是什么意思，我该如何解决？尽管进行了很多谷歌搜索，但我还没有找到一个很好的解释这个错误的原因和解决方案。大多数情况下出现的是 svn switch/merge 操作的问题，但这不是我想要做的。

请注意，在 TortoiseSVN GUI 中，我可以在文件资源管理器中右键单击 SparsePointSurface，选择“SVN Checkout”，它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:35:04.220

好的，我终于找到了解决方案。在我的 ccnet.config 中，我的项目、svn 控制块和 msbuild 任务都指向“C:\Users\build\repos\QTSS\trunk\SparsePointSurface”。我将项目的 WD 和 svn 控制块更改为 'C:\Users\build\repos\QTSS\trunk\'，这是 .svn 文件夹所在的位置。我把 msbuild 任务的 WD 留到了 .sln 文件的具体位置。终于在CCNet下搭建成功。哇！谢谢克里斯亨利；你的评论让我走上了修复之路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T22:37:28.257

有什么理由每次都检查吗？

该错误通常意味着您正在尝试将 SVN 存储库检出到似乎已在 SVN 控制下的文件夹中。您可以通过查找 .svn 文件夹来判断文件夹是否受 SVN 控制，至少在早期版本的 SVN 中是这样。

在我看来，您应该在 Cruise Control 中进行更新，而不是完整的结帐。或者，您可以每次都进行完整签出，但您需要删除当前存在的所有文件。

# python - 在python中的字符串周围强制使用三引号

> ID：15604453
> 
> 赞同：-5
> 
> 时间：2013-03-24T21:49:16.327
> 
> 标签：python, mysql, string, quote

我有一个 mysql 表，它存储一些 sql 查询。

架构是这样的：

```
CREATE TABLE `queries` (`qry_id` int(11) NOT NULL AUTO_INCREMENT,
`qry_text` varchar(2000) COLLATE utf8_unicode_ci NOT NULL,
`result_table` varchar(45) COLLATE utf8_unicode_ci DEFAULT NULL,
`last_run` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
`period` int(11) DEFAULT NULL,
`error` tinyint(1) DEFAULT NULL,
PRIMARY KEY (`qry_id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

例如，一个 qry 文本是`SELECT * FROM TABLE WHERE COL1 = '%s' and COL2 = '%s'`

在 python 中，我从 sql 表中提取了一个名为 qry 的 str 。

```
qry = "SELECT * FROM TABLE WHERE COL1 = '%s' and COL2 = '%s' " 
```

我想要的是：

```
qry = """SELECT * FROM TABLE WHERE COL1 = '%s' and COL2 = '%s' """ % (var1, var2) 
```

如何人为地在 qry 周围添加三引号并将 % (var1, var2) 附加到它。我需要将 qry（以我指定的格式）传递给 API 以运行。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:06:27.337

我不明白你的问题：

```
def get_dangerous_query():
    # do some database access
    # For a demo, just return what we know the table contains
    return "SELECT * FROM TABLE WHERE COL1 = '%s' and COL2 = '%s'"

qry = get_dangerous_query() % (var1, var2) 
```

`"""`vs`"`仅对字符串文字有影响。如果字符串来自外部来源，则引号完全没有意义。

# nsarray - 存储在 plist 中的数组中的自定义对象

> ID：15604454
> 
> 赞同：1
> 
> 时间：2013-03-24T21:49:20.217
> 
> 标签：nsarray

我有一些存储在数组中的自定义类对象，然后将该数组存储在带有键的字典中。然后保存并在应用程序加载/重新加载时加载。

现在的问题是我似乎无法将自定义对象取出，当我加载数组时它返回为空。我必须在写入或加载数据时做错了，但我无法弄清楚到底是什么。

这是我到目前为止的代码：

CustomClass.H 文件：

```
#import <Foundation/Foundation.h>

@interface PersonClass : NSObject <NSCoding>

@property (nonatomic,strong) NSString *personName;
@property (nonatomic,strong) NSString *personNo;
@property (nonatomic,strong) NSString *personNotes;
@property (nonatomic) BOOL switchPersonality;
@property (nonatomic) BOOL switchChemistry;
@property (nonatomic) BOOL switchLooks;
@property (nonatomic) BOOL switchHumour;
@property (nonatomic) int personRating;
@property (nonatomic,strong) NSNumber *personRecord;

- (id)initWithName:(NSString *)iPersonName PersonNo:(NSString *)iPersonNo PersonNotes:(NSString *)iPersonNotes SwitchChemistry:(BOOL *)iSwitchChemistry SwitchHumour:(BOOL *)iSwitchHumour SwitchLooks:(BOOL *)iSwitchLooks SwitchPersonality:(BOOL *)iSwitchPersonality PersonRating:(int *)iPersonRating PersonRecord:(NSNumber *)iPersonRecord;

@end 
```

自定义 Class.M 文件：

```
- (void)encodeWithCoder:(NSCoder *)aCoder{

    [aCoder encodeObject:personName forKey:@"pName"];
    [aCoder encodeObject:personNo forKey:@"pNo"];
    [aCoder encodeObject:personNotes forKey:@"pNotes"];
    [aCoder encodeInt:personRating forKey:@"pRating"];
    [aCoder encodeObject:personRecord forKey:@"pRecord"];
    [aCoder encodeBool:switchChemistry forKey:@"sChemistry"];
    [aCoder encodeBool:switchHumour forKey:@"sHumour"];
    [aCoder encodeBool:switchLooks forKey:@"sLooks"];
    [aCoder encodeBool:switchPersonality forKey:@"sPersonality"];

}

-(id)initWithCoder:(NSCoder *)aDecoder{

    if (self = [super init]){

        self.personName = [aDecoder decodeObjectForKey:@"pName"];
        self.personNo = [aDecoder decodeObjectForKey:@"pNo"];
        self.personNotes = [aDecoder decodeObjectForKey:@"pNotes"];
        self.personRating = [aDecoder decodeIntForKey:@"pRating"];
        self.personRecord = [aDecoder decodeObjectForKey:@"pRecord"];
        self.switchChemistry = [aDecoder decodeBoolForKey:@"sChemistry"];
        self.switchHumour = [aDecoder decodeBoolForKey:@"sHumour"];
        self.switchLooks = [aDecoder decodeBoolForKey:@"sLooks"];
        self.switchPersonality = [aDecoder decodeBoolForKey:@"sPersonality"];
    }

    return self;
} 
```

保存方法：

```
- (void)saveData{

    // get paths from root direcory
    NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
    // get documents path
    NSString *documentsPath = [paths objectAtIndex:0];
    // get the path to our Data/plist file
    NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"data.plist"];
    NSLog(@"PList Path %@",plistPath);
    //new array
    NSMutableArray *newEntries = [[NSMutableArray alloc]init];
    NSLog(@"NEW ENTRIES BEFORE %@",newEntries);
    for (PersonClass *person in peopleEntries) {

        //encode the object
        [NSKeyedArchiver archivedDataWithRootObject:person];
        // add the object to the entries 
        [newEntries addObject:person];
    }
    NSLog(@"NEW ENTRIES AFTER %@",newEntries);
    [newEntries writeToFile:plistPath atomically:YES];
    // create dictionary with arrays and their corresponding keys
    NSDictionary *plistDict = [NSDictionary dictionaryWithObjects: [NSMutableArray arrayWithObjects:newEntries, recordId, nil] forKeys:[NSMutableArray arrayWithObjects: @"peopleEntries",@"recordId", nil]];

    NSLog(@"DICTIONARY IS IN SAVE %@",plistDict);

    NSString *error = nil;

    // check if plistData exists
    if(plistDict)
    {
        // write plistData to our Data.plist file
        [plistDict writeToFile:plistPath atomically:YES];
    }
    else
    {
        NSLog(@"Error in saveData: %@", error);
    }
    NSLog(@"Save RUN");
} 
```

加载方法：

```
- (void)loadData{

        // get paths from root direcory
        NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
        // get documents path
        NSString *documentsPath = [paths objectAtIndex:0];
        // get the path to our Data/plist file
        NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"data.plist"];
         NSLog(@"PList Path %@",plistPath);

        // check to see if data.plist exists in documents
        if (![[NSFileManager defaultManager] fileExistsAtPath:plistPath])
        {
            // return without loading
            NSLog(@"RETURNING");
            return;
        }

        // get saved dictionary
        NSDictionary *dictionaryTemp = [[NSDictionary alloc]initWithContentsOfFile:plistPath];
        NSLog(@"DICTIONARY IS LOAD %@",dictionaryTemp);
        if (!dictionaryTemp)
        {
            NSLog(@"Error reading plist:");
        }
        // temporary array
        NSMutableArray *holderOne = [dictionaryTemp objectForKey:@"peopleEntries"];

        // array to be populated
        NSMutableArray *holderTwo = [[NSMutableArray alloc]init];
        NSLog(@"HOLDER ONE IS BEFORE %@",holderOne);
        NSLog(@"HOLDER TWO IS BEFORE %@",holderTwo);
        // go through the array and pull out person classes
        for (NSData *person in holderOne) {

            // temp array
            NSData *entry = [holderOne objectAtIndex:person]; // check the object at index might be an issue???
            NSLog(@"ENTRY IS %@",entry);
            //deencode the object
            [NSKeyedUnarchiver unarchiveObjectWithData:entry];
            // add the object to the entries
            [holderTwo addObject:entry];
        }
        NSLog(@"HOLDER ONE IS AFTER %@",holderOne);
        NSLog(@"HOLDER TWO IS AFTER %@",holderTwo);
        // assign values
        peopleEntries = [NSMutableArray arrayWithArray:holderTwo];
        NSLog(@"DICTIONARY IS AFTER ADDING %@",dictionaryTemp);
        recordId = [NSNumber numberWithInt:[[dictionaryTemp objectForKey:@"recordId"]integerValue]];
        NSLog(@"recordId is %@",recordId);
        NSLog(@"LOAD RUN");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T20:34:37.437

好的，我终于发现了这个问题，我从 NSObject 子类扩展了我的类，它没有实现 NSCoder 协议，所以我以不正确的方式编码和解码我的对象。它应该通过以下方式完成：

```
- (id)initWithCoder:(NSCoder *)decoder {
    if (self = [super init]) {
        self.personName = [decoder decodeObjectForKey:@"pName"];
        self.personNo = [decoder decodeObjectForKey:@"pNo"];
        self.personNotes = [decoder decodeObjectForKey:@"pNotes"];
        self.personRating = [decoder decodeObjectForKey:@"pRating"];
        self.switchChemistry = [decoder decodeBoolForKey:@"sChemistry"];
        self.switchHumour = [decoder decodeBoolForKey:@"sHumour"];
        self.switchLooks = [decoder decodeBoolForKey:@"sLooks"];
        self.switchPersonality = [decoder decodeBoolForKey:@"sPersonality"];
    }
    return self;
}

- (void)encodeWithCoder:(NSCoder *)encoder {
    [encoder encodeObject:personName forKey:@"pName"];
    [encoder encodeObject:personNo forKey:@"pNo"];
    [encoder encodeObject:personNotes forKey:@"pNotes"];
    [encoder encodeObject:personRating forKey:@"pRating"];
    [encoder encodeBool:switchChemistry forKey:@"sChemistry"];
    [encoder encodeBool:switchHumour forKey:@"sHumour"];
    [encoder encodeBool:switchLooks forKey:@"sLooks"];
    [encoder encodeBool:switchPersonality forKey:@"sPersonality"];
} 
```

然后将这些对象添加到一个数组中，我循环遍历数组中的每个对象并进行解码。这是不正确的，您可以简单地使用 te 对象对整个数组进行编码或解码，如下所示：

解码：

```
NSData *peopleData;
peopleEntries = [NSKeyedUnarchiver unarchiveObjectWithData:peopleData]; 
```

编码：

```
NSMutableArray *peopleEntries;
NSData *personData = [NSKeyedArchiver archivedDataWithRootObject:[[GlobalData sharedGlobalData]peopleEntries]]; 
```

# python - 具有概率估计的增量 SVM

> ID：15604458
> 
> 赞同：3
> 
> 时间：2013-03-24T21:49:59.033
> 
> 标签：python, svm

是否有任何增量 svm 实现也具有返回给定特征向量属于各个类的概率的特征？最好与 python 代码一起使用

我听说过 LaSVM。LaSVM 是否具有返回概率估计的功能？它还具有处理不平衡训练数据集的功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T21:02:45.077

你可以看看[Scikit Learn](http://scikit-learn.org/stable/modules/svm.html)，这是一个用 Python 编写的非常灵活和高效的库

在每个模型中，都存储了内部计算值。如果 clf 是您的 SVM 分类器，您可以访问 clf.decision_function 以查看预测的一些解释。

它还提供了一组很好的工具，用于预处理数据以及其他您可能会感兴趣的东西。

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-22T08:23:36.703

要获得概率估计，您可以使用 scikit-learn 库。您可以使用 2 种替代方法。一给出概率。这是一个示例：[如何知道 Scikit-learn 中 predict_proba 的返回数组中表示了哪些类](https://stackoverflow.com/questions/16937243/how-to-know-what-classes-are-represented-in-return-array-from-predict-proba-in-s) 而另一个给出了有符号的排名值（不是概率，但通常会给出更好的结果）：[Scikit-learn predict_proba 给出了](https://stackoverflow.com/questions/17017882/scikit-learn-predict-proba-gives-wrong-answers)你应该查看的错误答案答案。

# php - 使用简单的 XML 和 xpath 对表字段进行排序

> ID：15604459
> 
> 赞同：0
> 
> 时间：2013-03-24T21:50:01.770
> 
> 标签：php, xml, xpath

我有一个加载 simplexml 的 xml 文件，我需要按价格、作者或标题对字段进行排序。我该怎么办？使用 xpath 或其他方式可以吗？我在这里看到了一个类似的例子，但我不是很清楚

XML

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <libro>
        <autor><![CDATA[Cervantes]]></autor>
        <titulo><![CDATA[El Quijote]]></titulo>
        <precio>30€&lt;/precio>
    </libro>
    <libro>
        <autor><![CDATA[Calderón de la Barca]]></autor>
        <titulo><![CDATA[La vida es sueño]]></titulo>
        <precio>25€&lt;/precio>
    </libro>
    <libro>
        <autor><![CDATA[Garcilaso de la vega]]></autor>
        <titulo><![CDATA[Egoglas]]></titulo>
        <precio>15€&lt;/precio>
    </libro>
    <libro>
        <autor><![CDATA[Raymond Carver]]></autor>
        <titulo><![CDATA[Catedral]]></titulo>
        <precio>16€&lt;/precio>
    </libro>
    <libro>
        <autor><![CDATA[George Orwell]]></autor>
        <titulo><![CDATA[1984]]></titulo>
        <precio>10€&lt;/precio>
    </libro>
    <libro>
        <autor><![CDATA[Fidor Dostoyevski]]></autor>
        <titulo><![CDATA[Crimen y Castigo]]></titulo>
        <precio>35€&lt;/precio>
    </libro>
    <libro>
        <autor><![CDATA[Juan Ponce]]></autor>
        <titulo><![CDATA[Cronica de la intervencion]]></titulo>
        <precio>25€&lt;/precio>
    </libro>
    <libro>
        <autor><![CDATA[Yukio Mishima]]></autor>
        <titulo><![CDATA[Confesiones de una mascara]]></titulo>
        <precio>22€&lt;/precio>
    </libro>
    <libro>
        <autor><![CDATA[Elfriede Jelinek]]></autor>
        <titulo><![CDATA[Deseo]]></titulo>
        <precio>20€&lt;/precio>
    </libro>
    <libro>
        <autor><![CDATA[Bram Stoker]]></autor>
        <titulo><![CDATA[Dracula]]></titulo>
        <precio>18€&lt;/precio>
    </libro>
</root> 
```

PHP

```
$xml = simplexml_load_file('xml/libros.xml');
$sum = 0;
$h = "<table>";
$h .= "<tr>";
$h .= "<td><a href='#'  id='ordAut'><img src='img/up_down.png' /></a></td><td><a href='#'  id='ordTit'><img src='img/up_down.png' /></a></td><td><a href='#'  id='ordPre'><img src='img/up_down.png' /></a></td>";
$h .= "</tr>";
foreach ($xml->libro as $book) {
    $h .= "<tr>";
    $h .= "<td>".$book->autor."</td><td>".$book->titulo."</td><td>".$book->precio."</td>";
    $h .= "</tr>";
    $sum += $book->precio;
}

$h .= "<tr><td colspan=\"2\">sum:</td><td>$sum</td></tr></table>";
echo $h; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:53:24.713

像这样对你的 simplexml 进行排序：

[GZipp](https://stackoverflow.com/users/153350/gzipp)在[这篇文章](https://stackoverflow.com/questions/2119686/sorting-an-array-of-simplexml-objects)`sort_obj_arr`中编写的函数

```
$xml = simplexml_load_string($xmlstr, 'SimpleXMLElement', LIBXML_NOCDATA);

$books = $xml->xpath("//libro");

echo "<pre>";
print_r($books);
echo "</pre>";

$field = 'precio';
sort_obj_arr($books,$field,SORT_DESC);

echo "<pre>";
print_r($books);
echo "</pre>";

function sort_obj_arr(& $arr, $sort_field, $sort_direction)
{
    $sort_func = function($obj_1, $obj_2) use ($sort_field, $sort_direction)
    {
        if ($sort_direction == SORT_ASC) {
            return strnatcasecmp($obj_1->$sort_field, $obj_2->$sort_field);
        } else {
            return strnatcasecmp($obj_2->$sort_field, $obj_1->$sort_field);
        }
    };
    usort($arr, $sort_func);
} 
```

现场演示@http [://codepad.viper-7.com/QvLqIq](http://codepad.viper-7.com/QvLqIq)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T22:07:35.303

我知道一开始这听起来很愚蠢：但是将数据映射到数组中并使用自定义数组回调，因为`usort` 如果您想*正确*执行此操作，您将开发一种称为分页器的东西，它负责限制显示在页面并允许您使用自定义过滤器。

# android - PhoneGap：无法从远程服务器获取 JSON

> ID：15604460
> 
> 赞同：3
> 
> 时间：2013-03-24T21:50:02.003
> 
> 标签：android, json, cordova

使用 PhoneGap 2.5.0 + jQuery 1.9.1 + jQueryMobile 1.3.0，我正在尝试下载一个远程 JSON 文件：

```
$(document).ready(function() {
    $.getJSON("http://foo.mydomain.com/json.php?callback=?",function(data) {
    alert("It works");
    })
}); 
```

我修改了“res/xml/config.xml”以允许远程访问我的服务器：

```
<cordova>
    <access origin="http://127.0.0.1*"/> 
    <access origin="http://foo.mydomain.com*" />
    <content src="index.html" /> 
```

但它不起作用。我究竟做错了什么？非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T21:54:56.103

可能这是与 Access-Control-Allow-Origin 问题有关的问题。

要解决这个问题，您应该在 ajax 请求中使用 JSON-P。

尝试这样的事情：

```
$.ajax({
  type : "GET",
  dataType : "jsonp",
  url : 'your-external-url',
  data : {},
  success: function(obj){
  }
}); 
```

# java - '非静态变量不能...'错误

> ID：15604463
> 
> 赞同：0
> 
> 时间：2013-03-24T21:50:45.543
> 
> 标签：java, swing

我想在我的照片查看器中添加一个滚动条，但它给了我一个错误，即无法从静态上下文中引用非静态变量。

确切地说，我正在尝试向 JPanel 添加滚动条。此外，如果我将 JScrollPane 滚动条设为静态变量，则照片不会出现。TIA

```
import java.awt.Container;
import java.awt.Image;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.GridBagLayout;
import java.awt.GridLayout;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.FilenameFilter;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.DefaultListModel;
import javax.swing.filechooser.FileNameExtensionFilter;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.ImageIcon;
import javax.swing.SwingUtilities;
import javax.swing.JScrollPane;

public class PhotoViewer 
{
// Instance fields.
private FilenameFilter fileNameFilter;
private JFileChooser fileChooser;
private JMenuBar menuBar;
private JPanel mainPanel;
private static JScrollPane scrollBar;

public PhotoViewer() // Constructor.
{ 
    // Main JPanel with a grid style layout.
    mainPanel = new JPanel(new GridLayout());

    // Jlabel to display photo on.
    final JLabel imageView = new JLabel();
    // Adds the JLabel ontop of the JPanel.
    mainPanel.add(imageView);

    // Adds a scroll bar. 
    scrollBar = new JScrollPane(mainPanel);       
    scrollBar.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
    scrollBar.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);    

    // Creates a file chooser to find a photo.
    fileChooser = new JFileChooser();

    // Creates a new menubar at the top of the JPanel.
    menuBar = new JMenuBar();
    // Adds a menu within the JMenuBar.
    JMenu menu = new JMenu("View new photo");
    // Adds the additional menu ontop of the original JMenuBar.
    menuBar.add(menu);
    // Option to browse for a new photo. 
    JMenuItem browse = new JMenuItem("Browse");
    // Adds the browse option ontop of the 'View new photo' button. 
    menu.add(browse);

    // Creates an actionlistener to follow what the user is doing.
    browse.addActionListener(new ActionListener()
        {

            public void actionPerformed(ActionEvent ae) 
            {
                int result = fileChooser.showOpenDialog(mainPanel);
                // Displays the image if approved by JFileChooser.
                if (result==JFileChooser.APPROVE_OPTION) 
                {
                    // Obtains the selected file by the user.
                    File singleImage = fileChooser.getSelectedFile();
                    try 
                    {   
                        // Displays the image if no exception.
                        Image displayImage = ImageIO.read(singleImage);
                        imageView.setIcon(new ImageIcon(displayImage));
                    } catch(Exception e)                        
                    {
                        // Displays the exception caught by the program in a JOptionPane window.
                        e.printStackTrace();
                        JOptionPane.showMessageDialog(mainPanel, e, "Load failure!",   JOptionPane.ERROR_MESSAGE);
                    }
                }
            }
        }); 

} // end of constructor PhotoViewer

public void loadImages(File directory) throws IOException 
{   
    // Throws an exception to be caught. 
    File[] imageFiles = directory.listFiles(fileNameFilter);
    BufferedImage[] images = new BufferedImage[imageFiles.length];
} // end of method loadImages(File directory)

public Container getPanel() 
{
    // Hands execution back to the mainPanel function.
    return mainPanel;
}// end of method getPanel()

public JMenuBar getMenuBar() 
{
    // Hands execution back to the menuBar function.
    return menuBar;
}// end of method getMenuBar()

public JScrollPane getScrollBar() 
{
    // Hands execution back to the menuBar function.
    return scrollBar;
}// end of method getScrollBar()

public static void main(String[] args) 
{
    SwingUtilities.invokeLater(new Runnable()
        {
            public void run() 
            {
                // Input all the compoenents of the photo viewer to the JFrame to       display them.
                PhotoViewer imageList = new PhotoViewer();

                // Creates a new JFrame to display everything.
                JFrame mainFrame = new JFrame("Photo Viewer");
                // 'Throws away' the JFrame on close. 
                mainFrame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                // Adds all the different components to the JFrame.
                mainFrame.add(imageList.getPanel());
                mainFrame.add(imageList.getScrollBar());
                mainFrame.setJMenuBar(imageList.getMenuBar());
                mainFrame.setLocationByPlatform(true);
                // Packs all the components into the JFrame. 
                mainFrame.pack();
                // Sets the size of the JFrame.
                mainFrame.setSize(1500,1500);
                // Allows us to see the JFrame.
                mainFrame.setVisible(true);
            }
        });
} // end of method main(String[] args)
} // end of class PhotoViewer 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:05:36.040

不需要单独添加`mainPanel`and `scrollBar`，因为`scrollBar`已经包含`mainPanel`. 只需执行`mainFrame.add(imageList.getScrollBar());`，根本不调用`mainFrame.add(imageList.getPanel());`。一个控件只能添加到一个容器中。

默认布局`JFrame`为`BorderLayout`. 当您在`BorderLayout`不指定布局约束的情况下添加控件时，它会将控件放置在 中`BorderLayout.CENTER`，从而有效地替换之前的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T22:17:38.167

只需对您的代码进行细微更改:)

代替

```
scrollBar = new JScrollPane(mainPanel); 
```

利用

```
scrollBar = new JScrollPane(imageView);
mainPanel.add(scrollBar); 
```

并且没有必要

```
mainFrame.add(imageList.getScrollBar()); 
```

# ssh - 用于 ssh 到远程服务器并覆盖文件的脚本

> ID：15604467
> 
> 赞同：0
> 
> 时间：2013-03-24T21:51:42.477
> 
> 标签：ssh, raspberry-pi, paramiko, ssh-keys, raspbian

一直在玩弄我的运行 raspbian 的 Raspberry Pi。

我想使用不需要输入（例如密码）的 shell 脚本更新网页。我只是尝试创建密钥并将它们放在远程服务器上的 .ssh 文件中，但是当我运行 ssh user@domain.net 'ls' 的简单 shell 脚本时，它仍然提示我输入密码。

我也稍微研究了 paramiko，但并没有走得太远。

我需要的只是用我拥有的文本/信息更新/替换一个 html 文件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:12:44.640

我认为您的服务器中未正确配置用于身份验证的公钥/私钥。你能检查这个解释认证步骤的链接吗：[SSH Authentication](http://wiki.centos.org/HowTos/Network/SecuringSSH#head-9c5717fe7f9bb26332c9d67571200f8c1e4324bc)

# java - Java遍历二维数组

> ID：15604470
> 
> 赞同：0
> 
> 时间：2013-03-24T21:51:52.137
> 
> 标签：java, arrays, multidimensional-array, iteration

我在Java中有一个二维数组，如下所示：

```
int 2d_arr[5][5]; 
```

举个例子，看起来像这样的板：

```
1 1 1 1 1
0 1 1 1 1
1 1 2 1 0
0 1 1 1 1
0 0 1 1 1 
```

从第 3 行的 2 开始，我希望能够在各个方向（上、下、左、右和对角线）移动。在代码中，如何在每个方向遍历数组直到找到 0？

我的理论想法是在每个方向上依次迭代。例如，从上升开始，所以我会检查上面 2 行的所有值

```
1
1
2 
```

由于我没有找到任何零，请检查右上角的对角线

```
 1
  1
 2 
```

仍然没有 0，所以向右走。一旦我找到我的第一个 0，就打破。

尝试：我实际上知道如何使用一堆 if 和 for 循环来做到这一点，但我正在寻找一种方法来将该代码编辑为更简单、更易于阅读的版本

但我是java新手，所以我不知道最好的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:43:47.920

一个二维迭代器显然是一个好的开始。我希望您可以不费力气地自己完成其余的工作。

在您的场景中找到第一个零将涉及遍历每个零`Direction`并在该方向上全面迭代，直到迭代结束或您找到零。

进行螺旋搜索将涉及在每个方向上启动一个迭代器并执行一个步骤并依次检查每个方向，直到一个返回可以找到零的点。

```
public class TwoDIteratorTest {

    // An ubiquitous Point class
    static class Point {
        final int x;
        final int y;

        public Point(int x, int y) {
            this.x = x;
            this.y = y;
        }

        @Override
        public String toString() {
            return "{" + x + "," + y + "}";
        }
    }

    // All possible directions.
    enum Direction {
        North(0, 1),
        NorthEast(1, 1),
        East(1, 0),
        SouthEast(1, -1),
        South(0, -1),
        SouthWest(-1, -1),
        West(-1, 0),
        NorthWest(-1, 1);
        private final int dx;
        private final int dy;

        Direction(int dx, int dy) {
            this.dx = dx;
            this.dy = dy;
        }

        // Step that way
        public Point step(Point p) {
            return new Point(p.x + dx, p.y + dy);
        }
    }

    static class TwoDIterator implements Iterable<Point> {
        // Where we are now
        Point i;
        // Direction to move in.
        private final Direction step;
        // Limits.
        private final Point min;
        private final Point max;
        // Next position to go to.
        Point next = null;

        // Normal constructor.
        public TwoDIterator(Point start, Direction step, Point min, Point max) {
            i = next = start;
            this.step = step;
            this.min = min;
            this.max = max;
        }

        // Some simplified constructors
        public TwoDIterator(int x, int y, Direction step, Point min, Point max) {
            this(new Point(x, y), step, min, max);
        }

        public TwoDIterator(int x, int y, Direction step, int minx, int miny, int maxx, int maxy) {
            this(new Point(x, y), step, new Point(minx, miny), new Point(maxx, maxy));
        }

        // The iterator.
        @Override
        public Iterator<Point> iterator() {
            return new Iterator<Point>() {
                // hasNext calculates next if necessary and checks it against the stabliched limits.
                @Override
                public boolean hasNext() {
                    if (next == null) {
                        // Step one.
                        next = step.step(i);
                        // Stop at limits.
                        if (next.x < min.x
                                || next.x > max.x
                                || next.y < min.y || next.y > max.y) {
                            next = null;
                        }
                    }
                    return next != null;
                }

                @Override
                public Point next() {
                    if (hasNext()) {
                        // Make our move.
                        i = next;
                        next = null;
                        return i;
                    }
                    return null;
                }

                @Override
                public void remove() {
                    throw new UnsupportedOperationException("Not supported.");
                }
            };
        }
    }

    public void test() {
        // Test all directions.
        for (Direction d : Direction.values()) {
            System.out.print(d + " - ");
            for (Point p : new TwoDIterator(0, 0, d, -5, -5, 5, 5)) {
                System.out.print(p + ",");
            }
            System.out.println();
        }
    }

    public static void main(String[] args) throws InterruptedException {
        new TwoDIteratorTest().test();
    }
} 
```

# python - Gunicorn+Django+Heroku。Python路径问题

> ID：15604475
> 
> 赞同：2
> 
> 时间：2013-03-24T21:52:29.850
> 
> 标签：python, django, heroku, gunicorn, pythonpath

我正在运行一个 Django 应用程序，我曾经使用 Gunicorn 顺利部署到 Heroku。我的意思是我可以跑

```
foreman start 
```

在我的本地主机上，并且能够了解该应用程序是否可以在生产环境中运行。我最近决定将我们项目的所有应用程序移动到一个名为“应用程序”的子文件夹中。这意味着在其他文件中编辑我的 DJANGO_SETTINGS_MODULE 环境变量。完成此操作后，我尝试了工头和 gunicorn，直到本地服务器启动并运行。此时我已部署到生产环境。不用说，有一个错误：

```
Running `gunicorn --workers=4 applications.rocketlistings.wsgi -b 0.0.0.0: -k gevent` attached to terminal... up, run.8052
Traceback (most recent call last):
  File "/app/.heroku/python/bin/gunicorn", line 9, in <module>
    load_entry_point('gunicorn==0.17.2', 'console_scripts', 'gunicorn')()
  File "/app/.heroku/python/lib/python2.7/site-packages/distribute-0.6.34-py2.7.egg/pkg_resources.py", line 343, in load_entry_point
    return get_distribution(dist).load_entry_point(group, name)
  File "/app/.heroku/python/lib/python2.7/site-packages/distribute-0.6.34-py2.7.egg/pkg_resources.py", line 2307, in load_entry_point
    return ep.load()
  File "/app/.heroku/python/lib/python2.7/site-packages/distribute-0.6.34-py2.7.egg/pkg_resources.py", line 2013, in load
    entry = __import__(self.module_name, globals(),globals(), ['__name__'])
ImportError: No module named app.wsgiapp 
```

我不确定我做错了什么，而且鉴于远程设置 heroku 运行的晦涩难懂，很难调试这种情况。[讨论此错误的其他线程](https://stackoverflow.com/a/13905449/313299)表明这是一个路径问题。这听起来很合理，但我想不出路径有什么问题，因为我的应用程序文件夹中有一个**init** .py 文件，并且一切都在本地运行。

无论如何，这是我的生产路径/pythonpath：

```
Running `echo $PATH` attached to terminal... up, run.2583
/app/.heroku/python/bin:/usr/local/bin:/usr/bin:/bin

Running `echo $PYTHONPATH` attached to terminal... up, run.8026
/app/ 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T22:05:07.570

有时，当 Gunicorn 在 PYTHONPATH 中找到另一个名为“app”的模块时，就会发生这种情况。将 PYTHONPATH 设置为假值可以解决问题：

```
$ heroku config:set PYTHONPATH=fakepath 
```

[https://github.com/heroku/heroku-buildpack-python/wiki/Troubleshooting#no-module-named-appwsgiapp](https://github.com/heroku/heroku-buildpack-python/wiki/Troubleshooting#no-module-named-appwsgiapp)

# ruby-on-rails - rails POST on /objects 调用索引方法

> ID：15604477
> 
> 赞同：1
> 
> 时间：2013-03-24T21:52:44.347
> 
> 标签：ruby-on-rails, ruby, rest, routes

通常在 Rails 中，将 POST 发送到 RESTful 控制器，例如`/orders`，调用`#create`操作。这就是我想要发生的事情。相反，该`#index`方法被调用。我该如何解决？

服务器日志从 POST 到`/orders`：

```
Started POST "/orders" for 173.8.132.62 at 2013-03-24 14:45:23 -0700
Processing by OrdersController#index as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"EcsAZxbyd5OVVo5oIJZM/CNoyP7Cz6dRVBU7I41xENY=", "order"=>{"order_lines_attributes"=>{"0"=>{"item_id"=>"", "qty"=>"", "_destroy"=>"false"}}, "customer_id"=>""}, "commit"=>"Create Order"}
  Order Load (0.1ms)  SELECT "orders".* FROM "orders"
  Rendered text template (0.0ms)
Completed 200 OK in 5ms (Views: 1.1ms | ActiveRecord: 1.2ms) 
```

整个`routes.rb`：

```
Wines::Application.routes.draw do

  match ':controller(/:action(/:id))(.:format)'
        resources :customers do
                resources :phones
                resources :addresses
        end

        resources :distributors do
                resources :distributor_phones
                resources :distributor_addresses
        end

        resources :items do
                post 'sample', :on => :member
        end

        resources :orders do
                post 'place', :on => :member
                post 'deliver', :on => :member
                resources :order_lines
        end

        resources :db do
                post 'query', :on => :collection
        end

        resources :images, :beverage_types, :grapes

end 
```

一些可能相关的线路来自`rake routes`：

```
 place_order POST   /orders/:id/place(.:format)                                            orders#place
                   deliver_order POST   /orders/:id/deliver(.:format)                                          orders#deliver
               order_order_lines GET    /orders/:order_id/order_lines(.:format)                                order_lines#index
                                 POST   /orders/:order_id/order_lines(.:format)                                order_lines#create
            new_order_order_line GET    /orders/:order_id/order_lines/new(.:format)                            order_lines#new
           edit_order_order_line GET    /orders/:order_id/order_lines/:id/edit(.:format)                       order_lines#edit
                order_order_line GET    /orders/:order_id/order_lines/:id(.:format)                            order_lines#show
                                 PUT    /orders/:order_id/order_lines/:id(.:format)                            order_lines#update
                                 DELETE /orders/:order_id/order_lines/:id(.:format)                            order_lines#destroy
                          orders GET    /orders(.:format)                                                      orders#index
                                 POST   /orders(.:format)                                                      orders#create
                       new_order GET    /orders/new(.:format)                                                  orders#new
                      edit_order GET    /orders/:id/edit(.:format)                                             orders#edit
                           order GET    /orders/:id(.:format)                                                  orders#show
                                 PUT    /orders/:id(.:format)                                                  orders#update
                                 DELETE /orders/:id(.:format)                                                  orders#destroy 
```

我正在使用 formtastic，我的 _form.html.erb 看起来像这样：

```
<%= semantic_form_for(@order) do |f| %>
  <% if @order.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@order.errors.count, "error") %> prohibited this order from being saved:</h2>

      <ul>
      <% @order.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <%= f.semantic_fields_for :order_lines do |builder| %>
    <%= render 'order_line_fields', f: builder %>
  <% end %>

  <%= link_to_add_fields "Add Order Line", f, :order_lines %>
  <%= f.inputs :customer %>
  <%= f.actions %>

<% end %> 
```

生成的 html`<form>`标签如下所示：

```
<form accept-charset="UTF-8" action="/orders" class="formtastic order" id="new_order" method="post" novalidate="novalidate"><div style="margin:0;padding:0;display:inline"> 
```

生成的提交操作如下所示：

```
<input name="commit" type="submit" value="Create Order" /> 
```

控制器的相关代码如下。当我提交 POST 到 时`/orders`，我得到

> 这是索引方法，使用 URL`http://w:3000/orders`和方法 POST 调用。

```
 def index
    @orders = Order.all

    respond_to do |format|
      format.xml # index.xml.erb                                                                                                                                          
      format.html {render :text => "this is the index method, called with URL #{request.url} and method #{request.method}"}
    end
  end

  # GET /orders/1.xml                                                                                                                                                     
  def show
    @order = Order.find(params[:id])

    respond_to do |format|
      format.xml { render xml: @order.to_xml }
    end
  end

  # GET /orders/new.xml                                                                                                                                                   
  def new
    @order = Order.new
    1.times {@order.order_lines.build}

    respond_to do |format|
      format.xml { render xml: @order.to_xml }
      format.html {}
    end
  end

  # POST /orders.xml                                                                                                                                                      
  def create

    @order = Order.new(params[:order])

    respond_to do |format|
      if @order.save
        format.xml { render xml: @order.to_noko_doc }
        format.html { redirect_to @order, notice: 'Order was successfully created.'}
      else
        format.xml { render xml: @order.errors }
        format.html {render action: 'new'}
      end
    end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T18:29:04.007

您的路线首先与to`match ':controller(/:action(/:id))(.:format)'`匹配，将其移动到路线文件的底部`POST``orders#create`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T18:26:17.360

路由按照定义的顺序进行匹配，因此如果您的索引路由`/orders`在您的创建路由之前`/orders :via => [:post]`，则会调用前者。尝试先放置您的发布路线。

```
match "orders" => "orders#create", :via => [:post]
# then resources :orders 
```

# openlayers - 如何根据互联网连接可用性切换基础层

> ID：15604483
> 
> 赞同：3
> 
> 时间：2013-03-23T05:10:58.530
> 
> 标签：openlayers, javascript, google-maps

我的应用程序（html+ JavaScript）使用谷歌地图作为基础层。我还将 OSM 设置为离线基础层，以便在没有互联网连接时使用。

现在我正在锁定一种让应用程序检查互联网连接的方法，如果有，那么使用谷歌地图作为基础层。如果没有，则使用 OSM。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:02:36.693

您可以侦听“loaderror”事件，当加载谷歌地图图块失败时，该事件将被抛出。这是常规 WMS 层的示例（[http://jsfiddle.net/D3Eha/2/](http://jsfiddle.net/D3Eha/2/)中的完整示例）

```
var wmsLayer, workingOffline = false;

wmsLayer = new OpenLayers.Layer.WMS("OpenLayers WMS",
    "http://vmap0.tiles.osgeo.org/wms/vmap0?",
    {layers: 'basic'},
    {
        attribution: 'Provided by OSGeo',
        tileOptions: {
            eventListeners: {
                'loaderror': function(evt) {
                    if (workingOffline == false) {
                        console.log('Tile load error, switching to offline map');
                        workingOffline = true;
                    }
                }
            }
        }        
    }
); 
```

当计算机再次在线时，检测起来更棘手。例如，当您离线时，启动定期计时器以从 Internet 加载一些图像。如果成功，您将重新在线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-25T16:35:28.767

我设计了该解决方案，您需要根据您的情况对其进行调整。

```
 var backupLayerUrl = {
        url: "http://b.tile.opencyclemap.org/cycle/",
        type: "png"
    }

tileOptions = {
            eventListeners: {
                'loaderror': function(e) {
                    console.dir(e);
                    var newUrl = backupLayerUrl.url;
                    var oldUrl = e.object.url;
                    var oUS = oldUrl.split("/");//oldUrlSplitted

                    var type = backupLayerUrl.type;

                    var z = oUS[oUS.length-3];
                    var x = oUS[oUS.length-2];
                    var y = oUS[oUS.length-1].split(".")[0];

                    var layerType = e.object.layer.CLASS_NAME.split(".")[e.object.layer.CLASS_NAME.split(".").length-1];

                    if (layerType != "OSM"){
                        var ymax = 1 << z;
                        y = ymax - y - 1;
                    }

                    newUrl += z + "/" + x + "/" + y + "." + type;
                    e.object.imgDiv.src = newUrl;
                }
            }
        };

    var mylayer = new OpenLayers.Layer.TMS("Layer Name", "/layer_url/",
              {     tileOptions: tileOptions,
                    projection: epsg900913,
                    alpha: true,
                    type: 'png',
                    visibility: false,
                    isBaseLayer: true,
                    getURL: getTileURL
              }); 
```

# mysql - 选择具有某一列最大值的行

> ID：15604484
> 
> 赞同：0
> 
> 时间：2013-03-24T21:53:16.353
> 
> 标签：mysql

例如，如果我的查询返回两行或更多行，我想**选择具有最近日期的行。**

我正在做这样的事情：

`SELECT * FROM Table1 WHERE Name=Mark AND MAX(TIMESTAMP(date(str_to_date(DATE_REGISTERED,'%d/%m/%Y'))))`

返回的错误是： **#1111 - 组函数的使用无效**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T21:57:26.230

要将您的结果限制为仅最新的结果（根据您的示例基于名为 DATE_REGISTERED 的字段），您可以这样做

```
SELECT * FROM Table1 WHERE Name='Mark' ORDER BY STR_TO_DATE(DATE_REGISTERED,'%d/%m/%Y')  DESC LIMIT 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T22:01:41.877

您应该使用 order by 语句：

```
SELECT * FROM Table1 WHERE Name=Mark
order by str_to_date(DATE_REGISTERED,'%d/%m/%Y') DESC LIMIT 1 
```

# algorithm - 将 2d 点排序为矩阵

> ID：15604485
> 
> 赞同：5
> 
> 时间：2013-03-24T21:53:25.063
> 
> 标签：algorithm, matlab, sorting, image-processing

我有以下问题：

给出了一个图像，我正在做一些斑点检测。作为一个限制，假设我最多有 16 个 blob，我从每个 blob 计算质心（x，y 位置）。如果没有发生畸变，这些质心会排列在等距的 4x4 网格中，但它们可能会非常畸变。假设是它们或多或少地保持网格形式，但它们可能真的很扭曲。

我需要对 blob 进行排序，以便我知道哪个是最近的左、右、上和下。所以最好的办法是将这些 blob 写入矩阵。

如果这还不够，我可能会检测到少于 16 个，然后我还需要将它们分类到一个矩阵中。

有谁知道如何在 Matlab 中有效地解决这个问题？

谢谢。

**[更新1：]**

我上传了一张图片，红色数字是我的 blob 检测算法分配给每个 blob 的数字。

生成的矩阵应如下所示，其中包含以下数字：

```
1   2   4   3
6   5   7   8
9  10  11  12
13 16  14  15 
```

例如，我从 blob 11 开始，最接近的数字是 12，依此类推

![例子](../Images/f6f7828b042143e7affb6cca987cce5f.png)

**[更新2：]**

发布的解决方案看起来相当不错。实际上，它可能会发生，其中一个外部点丢失或可能两个......我知道这会使一切变得更加复杂，我只是想感受一下这是否值得花时间。

如果您使用 shack-hartmann 波前传感器分析波前并且想要增加动态范围，则会出现这些问题：-) 斑点可能会真正扭曲，从而使分界线不再正交。

也许有人知道分类算法的好文献。

最好的解决方案是一个，它可以在 FPGA 上实现而不需要太多努力，但这在现阶段并不那么重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:34:42.023

只要斑点形成正方形并且相对有序，这将起作用：

图片：

![在此处输入图像描述](../Images/fa469af7f9474d7663eccb8ffa9b466e.png)

代码：

```
bw = imread('blob.jpg');
bw = im2bw(bw);

rp = regionprops(bw,'Centroid');

% Must be a square
side = sqrt(length(rp));
centroids = vertcat(rp.Centroid);
centroid_labels = cellstr(num2str([1:length(rp)]'));

figure(1);
imshow(bw);
hold on;
text(centroids(:,1),centroids(:,2),centroid_labels,'Color','r','FontSize',60);
hold off;

% Find topleft element - minimum distance from origin
[~,topleft_idx] = min(sqrt(centroids(:,1).^2+centroids(:,2).^2));

% Find bottomright element - maximum distance from origin
[~,bottomright_idx] = max(sqrt(centroids(:,1).^2+centroids(:,2).^2));

% Find bottom left element - maximum normal distance from line formed by
% topleft and bottom right blob
A = centroids(bottomright_idx,2)-centroids(topleft_idx,2);
B = centroids(topleft_idx,1)-centroids(bottomright_idx,1);
C = -B*centroids(topleft_idx,2)-A*centroids(topleft_idx,1);
[~,bottomleft_idx] = max(abs(A*centroids(:,1)+B*centroids(:,2)+C)/sqrt(A^2+B^2));

% Sort blobs based on distance from line formed by topleft and bottomleft
% blob
A = centroids(bottomleft_idx,2)-centroids(topleft_idx,2);
B = centroids(topleft_idx,1)-centroids(bottomleft_idx,1);
C = -B*centroids(topleft_idx,2)-A*centroids(topleft_idx,1);
[~,leftsort_idx] = sort(abs(A*centroids(:,1)+B*centroids(:,2)+C)/sqrt(A^2+B^2));

% Reorder centroids and redetermine bottomright_idx and bottomleft_idx
centroids = centroids(leftsort_idx,:);
bottomright_idx = find(leftsort_idx == bottomright_idx);
bottomleft_idx = find(leftsort_idx == bottomleft_idx);

% Sort blobs based on distance from line formed by bottomleft and
% bottomright blob
A = centroids(bottomright_idx,2)-centroids(bottomleft_idx,2);
B = centroids(bottomleft_idx,1)-centroids(bottomright_idx,1);
C = -B*centroids(bottomleft_idx,2)-A*centroids(bottomleft_idx,1);
[~,bottomsort_idx] = sort(abs(A*reshape(centroids(:,1),side,side)+B*reshape(centroids(:,2),side,side)+C)/sqrt(A^2+B^2),'descend');

disp(leftsort_idx(bsxfun(@plus,bottomsort_idx,0:side:side^2-1))); 
```

输出：

![在此处输入图像描述](../Images/74305239505dda833d3dc0dd1b84e9c6.png)

```
 2    12    13    20    25    31
 4    11    15    19    26    32
 1     7    14    21    27    33
 3     8    16    22    28    34
 6     9    17    24    29    35
 5    10    18    23    30    36 
```

只是好奇，您是否使用它通过棋盘或其他方式自动校准相机？

* * *

更新：对于倾斜的图像

```
tform = maketform('affine',[1 0 0; .5 1 0; 0 0 1]);
bw = imtransform(bw,tform); 
```

![在此处输入图像描述](../Images/c9890ac3ec62effb1dd6975fb9809386.png)

输出：

```
 1     4     8    16    21    25
 2     5    10    18    23    26
 3     6    13    19    27    29
 7     9    17    24    30    32
11    14    20    28    33    35
12    15    22    31    34    36 
```

对于旋转图像：

```
bw = imrotate(bw,20); 
```

![在此处输入图像描述](../Images/6291f32b4b8f09c5b785612d8632cbf3.png)

输出：

```
 1     4    10    17    22    25
 2     5    12    18    24    28
 3     6    14    21    26    31
 7     9    16    23    30    32
 8    13    19    27    33    35
11    15    20    29    34    36 
```

# lambda-calculus - Lambda 演算自由变量问题

> ID：15604487
> 
> 赞同：1
> 
> 时间：2013-03-24T21:54:21.417
> 
> 标签：lambda-calculus

我在网上找到了 Mike Gordon 的*函数式编程* [说明](http://www.cl.cam.ac.uk/~mjcg/Teaching/FuncProg/Notes/Notes.ps.gz)简介 ，我正在努力完成它。在第 9 页有这个问题：

```
Find an example to show that if V1 = V2 , then even if V2 is not free in E1,
it is not necessarily the case that:

(λ V1 V2 . E ) E1 E2 = E [E1/V1][E2/V2] 
```

我猜我可以说因为 V1 和 V2 是相等的，我们可以这样重做：

```
(λ V2 V1 . E ) E1 E2 
```

因此说

```
(λ V1 . E[E1/V2] ) E2 
```

鉴于 E1 中 V2 不是免费的规定。但是我们不能说

```
E[E1/V2][E2/V1] 
```

因为 E2 必然有 V1 免费。还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:00:08.503

这不是反例。除此之外，我不明白你在最后一步的推理——为什么 V1 必须在 E2 中自由出现？除此之外，这`E[E1/V2][E2/V1]`在你的最后一步不是一个声明。你说“我们不能那样说”是什么意思`E[E1/V2][E2/V1]`？

你应该尝试为这个假设构造一个*明确*的反例，即选择`V1=V2=x`（这真的没关系，由于α转换）然后找到*明确*的表达式`E`，，使得它们满足假设的假设（不是自由在），但是表达式不等于 的约简。`E1``E2``V2``E1```E[E1/V2][E2/V2]``(λV1 V2\. E ) E1 E2`

既然你说你想自己做这个，我不会给你解决方案，但请随时要求更多指点。

# bash - 如果仅满足条件，则使用 Awk 打印列

> ID：15604488
> 
> 赞同：0
> 
> 时间：2013-03-24T21:54:26.847
> 
> 标签：bash, unix

我有一个名为 autodata.csv 的文件，有 20 列数据。我希望只打印第 8 列中带有“6”的行（对于圆柱体）。

所以，我有这个工作，但只打印数字 6，而不是所有列：

```
#!/bin/bash

while read x
do

echo $x | awk -F ',' ' { print $8=6} '

done 
```

但是，如果我添加其余的列，它会给我错误：

```
echo $x | awk -F',' ' { print $1":"$2":"$4":"$7":"$8=6}' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T21:57:18.003

大概是这样的吧？

```
awk -F ',' '{ if ($8 == 6) { print $1":"$2":"$4":"$7":"$8 } }' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T21:59:54.883

怎么样：

```
awk -F ',' '$8 == "6" {print $0}' 
```

# c# - C#，在一个类中，如何为datagridview.Rows.Add（............）返回值？

> ID：15604490
> 
> 赞同：-3
> 
> 时间：2013-03-24T21:54:43.040
> 
> 标签：c#, oop, class, datagridview, return

```
public string GetInfo()
    {
        return a + b + c;
    } 
```

我认为这用于在列表框中显示。

但对于datagridview，它应该是“datagridview.Rows.Add(a, b, c)”

那么我班上的“，”呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:35:57.393

*如果要从函数返回多个值，则不要将它们连接在单个字符串中*

所以有几种方法可以做到这一点

**首先**（更喜欢这个）：创建一个具有这些属性的类，如下所示

```
Public class MyValues
{
  public string valueA { get; set; }
  public string valueB { get; set; }
  public string valueC { get; set; }
} 
```

创建一个返回类对象或对象列表的函数

```
 public List<MyValues> GetInfo()
   {
   List<MyValues> listValue=new List<MyValues>();

   // Now here make myValue object and add them into listValue and then return
   return listValue;
   } 
```

现在你可以像这样使用它

```
List<MyValues> values=GetInfo();
foreach(MyValue val in values)
{
   datagridviewrow.Row.Add(val.ValueA,val.ValueB,val.ValueC)
} 
```

**第二**：让你的函数返回 List 像这样

```
 public List<string> GetInfo()
    {
       List<string> myValues=new List<string>{a,b,c}
       return myValues
    } 
```

现在像这样将它们添加到 DataGridViewRow

```
List<string> rowsValues=GetInfo();
datagridview.Rows.Add(rowValues[0],rowValues[1], rowValues[2]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T21:58:53.963

Console.WriteLine(a + "," + b + "," + c); 也许如果你问我在想什么

# java - 如何在 java 中使用 Apache POI 从 .doc 和 .docx 文件中提取从右到左的文本？

> ID：15604493
> 
> 赞同：2
> 
> 时间：2013-03-24T21:55:12.290
> 
> 标签：java, apache-poi, right-to-left

我正在开发一个应用程序，它将 .doc 或 .docx 文件作为输入并将它们的单词提取到数据库表中。

为此，我尝试了 Apache POI，并成功地使用从左到右文本格式（例如英语）的文档进行了管理。

这是代码：

```
// FilterDOC Method Which Tacke A Document As Input and Return A Generic 
// List Withs Its Words

public static void parseDoc(File SelectedFile, FileReader in) {
try {
         // Create a POI File System object 
        POIFSFileSystem fs = new POIFSFileSystem(new FileInputStream(
                SelectedFile));

     // Create a document for this file 
    HWPFDocument doc = new HWPFDocument(fs);

     // Create a WordExtractor to read the text of the word document
            WordExtractor we = new WordExtractor(doc);

        String ExtractedText = we.getText();

     // Removing New Empty Lines
    String RemoveEmptyLines = ExtractedText.replaceAll("[\n\r]", "");

     // Filtering document of any symbols
    String[] Wordlist = RemoveEmptyLines
                .split("[:\\,\\.\\}\\?\\{\\[\\]\\‘\\_\\*\\&\\%\\#\\$\\@\\!\\~\\/\\//\\|\\?\\“\\:-\\;\\W\\s+]");

    List<String> lines = new ArrayList<String>();

        for (String line : Wordlist) {

            if (line != null && !line.trim().isEmpty()
                    && !line.equals("\\W\\s+")) {
                lines.add(line.trim());

            }

        }

       // output the document
    for (String string : lines) {

            System.out.println(string);}
                  in.close();

    } 

          catch (IOException e){ 
            System.out.println("IO Exception !!"+ e.getMessage());      }
} 
```

如何将同一个库用于从右到左文本格式（例如阿拉伯语）的文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:02:47.153

对于出租权集：

```
sheet.setRightToLeft() 
```

# visual-studio - 为什么 Visual Studio 2012 Express for Windows Desktop 在我的系统上崩溃？

> ID：15604497
> 
> 赞同：1
> 
> 时间：2013-03-24T21:55:20.103
> 
> 标签：visual-studio, visual-studio-2012

我刚刚在我的 Windows 7 Ultimate x64 系统上安装了 Visual Studio 2012 Express。

不幸的是，如果我启动它，我会看到 UI 大约 3 秒钟（我可以浏览菜单），之后我得到一个*Microsoft Visual Studio Express 2012 for Windows Desktop has stop working*对话框。在安装此 VS 2010 Express 之前，它已经运行了 2 年。

事件查看器显示：

```
Faulting application name: WDExpress.exe, version: 11.0.51106.1, time stamp: 0x5098b5f8
Faulting module name: clr.dll, version: 4.0.30319.17929, time stamp: 0x4ffa5753
Exception code: 0xc0000005
Fault offset: 0x00371a6a
Faulting process id: 0x141c
Faulting application start time: 0x01ce28d9255639ca
Faulting application path: D:\Microsoft Visual Studio 11.0\Common7\IDE\WDExpress.exe
Faulting module path: C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
Report Id: 660dcaa2-94cc-11e2-9bd2-00241ddeaee6 
```

我尝试重新启动几次，进行修复安装，从这里安装更新 1（[http://www.microsoft.com/visualstudio/eng/downloads#d-visual-studio-2012-update](http://www.microsoft.com/visualstudio/eng/downloads#d-visual-studio-2012-update)），还有这个命令行：

```
c:\Windows\Microsoft.NET\Framework\v4.0.30319\ngen.exe update /force /queue
c:\Windows\Microsoft.NET\Framework\v4.0.30319\ngen.exe eqi 1 
```

不幸的是，它没有帮助。

我也尝试加载具有相同结果的 HelloWorld.csproj。

为什么会崩溃？

# mysql - mysql查询多张表

> ID：15604501
> 
> 赞同：0
> 
> 时间：2013-03-24T21:55:38.453
> 
> 标签：mysql

我有两张桌子。一桌`attendance`一桌`lessons`。我想在我的页面中打印出出勤表中的所有学生`'register' is = 'y'`ID `lessons`。

`table 1`基本上，如果表二中的特定列是特定值，则打印出 * 。

请帮忙....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T22:01:37.597

您将需要`JOIN`以下表格`student_id`：

```
select a.student_id
from attendance a
inner join lessons l
  on a.student_id = l.student_id
where l.register = 'y' 
```

此查询中使用的语法`INNER JOIN`将返回两个表之间的所有匹配行，其中课程注册列的值为`y`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T21:58:16.240

使用[`JOIN`](http://dev.mysql.com/doc/refman/5.1/en/join.html)运算符在外键上连接多个表。

# c# - 使用 WebRequest 代替 curl 命令

> ID：15604505
> 
> 赞同：0
> 
> 时间：2013-03-24T21:56:06.460
> 
> 标签：c#, curl

我正在开发一个需要使用 curl 命令将文件加载到特定站点的项目。我希望使用 C# 来实现这一点。通过查看关于 SO 的类似问题，我没有发现任何似乎对我有用的东西，除非我做错了。

这是我在 Cygwin 中成功使用的 curl 命令：

```
curl -i -u user:password -F 'file1=@\Users\User\Desktop\test.jpg' -F 'json={"content": {"type": "text/html", "text": "<body><p>look at me, look at me</p></body>"}, "type": "document", "subject": "Document with Attachment"};type=application/json' http://someurl 
```

现在我正在尝试使用 WebRequest 来完成这项工作，因为我已经读到这在其他帖子上是可能的。这就是我迄今为止所拥有的。

```
 WebRequest request = WebRequest.Create("http://someurl");
            request.PreAuthenticate = true;
            request.ContentType = "application/json";
            request.Method = "POST";
            string authInfo = Convert.ToBase64String(Encoding.UTF8.GetBytes("user:password"));
            request.Headers["Authorization"] = "Basic " + authInfo;

            //what do I set my buffer to?

            Stream reqstr = request.GetRequestStream();
            reqstr.Write(buffer, 0, buffer.Length);
            reqstr.Close();

            WebResponse response = request.GetResponse(); 
```

我应该在此处设置我的缓冲区以编写 curl 命令，该命令又应该发送文件 test.jpg？另外，我尝试使用 libcurl 也没有成功。非常感谢任何正确方向的指针！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:18:12.340

您可以先 POST json 文档描述，然后使用第二个请求 PUT 文件内容，或者使用 multipart/form-data 使用单个 POST 上传两者。

这篇文章有很好的例子：[如何通过 API 向 Google Drive 添加/创建/插入文件？](https://stackoverflow.com/questions/10317638/inserting-file-to-google-drive-through-api)

# android - 应用程序无法在 Galaxy s3 和 note 2 中运行

> ID：15604508
> 
> 赞同：-1
> 
> 时间：2013-03-24T21:56:17.740
> 
> 标签：android, android-manifest

我的应用程序无法在 Galaxy s3 和注释 2 上运行，这是我的清单代码：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:allowBackup="true"
    android:icon="@drawable/cars"
    android:label="@string/appName"
    android:theme="@style/AppTheme" >
    <activity
        android:name="kazemi.Alireza.cardatabase.MainActivity"
        android:label="@string/appName" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application> 
```

有什么问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:47:54.830

尝试这个，

```
<uses-sdk
    android:minSdkVersion="8"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/cars"
    android:label="@string/appName"
    android:theme="@style/AppTheme" >
    <activity
        android:name="kazemi.Alireza.cardatabase.MainActivity"
        android:label="@string/appName" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application> 
```

# android - textview 中的文本太长 - 仅显示结尾部分

> ID：15604509
> 
> 赞同：0
> 
> 时间：2013-03-24T21:56:44.613
> 
> 标签：android, textview

我有一个文本视图。当内部的多行文本很短且适合可用空间时，我将重力设置为顶部：

```
tv.setGravity(Gravity.TOP); 
```

当文本比电视中的空间长时，我只想通过以下方式显示文本的结尾：

```
tv.setGravity(Gravity.BOTTOM); 
```

布局：

```
 <RelativeLayout
        android:id="@+id/textLayout"
        android:layout_marginTop="16dp"
        android:layout_width="fill_parent"
        android:layout_height="110dp"
        android:orientation="vertical"
        android:visibility="visible" >

        <TextView
            android:id="@+id/tv"
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:gravity="top"
            android:text="Long text bla bla."
            android:textColor="@android:color/black"
            android:textColorHint="@android:color/black"
            android:textSize="37sp" />

       ...

    </RelativeLayout> 
```

检查文本（多行）是否长于可用空间的最简单解决方案是什么（我不想硬编码行数，因为不同屏幕的大小不同）？有没有指标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:38:17.507

与其为了强制显示文本结尾而更改`gravity`，我建议您在开头使用带点的省略号，以便显示文本的结尾。

**示例**：

```
 <TextView
        android:ellipsize="start"
        android:id="@+id/tv"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:gravity="top"
        android:text="Long text bla bla."
        android:textColor="@android:color/black"
        android:textColorHint="@android:color/black"
        android:textSize="37sp" /> 
```

您也可能最终选择了一些其他`android:ellipsize`选项，例如“ `middle`”和“ `marquee`”。参见：[TextView:android:ellipsize](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3aellipsize)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T22:38:57.337

尝试`TextVew`输入`LinearLayout`并将 textview 高度与线性布局高度进行比较。

像这样

```
<RelativeLayout
        android:id="@+id/textLayout"
        android:layout_marginTop="16dp"
        android:layout_width="fill_parent"
        android:layout_height="110dp"
        android:orientation="vertical"
        android:visibility="visible" >

<LinearLayout 
        android:id ="@+id/linear"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal">

        <TextView
            android:id="@+id/text"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:gravity="top"
            android:text="Long text bla bla."
            android:textColor="@android:color/black"
            android:textColorHint="@android:color/black"
            android:textSize="37sp" /> 
```

比较主题：

```
if(text.getHeight()>linear.getHeight()){
            //Here TextView longer than available space
        } 
```

希望这对您有所帮助。

# mouse - GLFW 鼠标在 Ubuntu+Unity 上不起作用

> ID：15604512
> 
> 赞同：0
> 
> 时间：2013-03-24T21:57:10.947
> 
> 标签：mouse, glfw, ubuntu-unity

我在 glfw 中的鼠标有小问题；/。它适用于 Windows 和 Ubuntu+Gnome3，但不适用于 Ubuntu+Unity。我的鼠标代码（我用它在我的游戏中旋转相机）：

```
 glfwDisable(GLFW_MOUSE_CURSOR);
    int xpos, ypos;
    int w,h;

    glfwGetMousePos(&xpos, &ypos); // im calculating rot of camera with these values
    glfwGetWindowSize(&w,&h); // set mouse
    glfwSetMousePos(w/2, h/2); //  to center of window. 
```

它只是不起作用，但是当我设置 glfwEnable(GLFW_MOUSE_CURSOR); 它正在工作，但鼠标可见；/我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:24:50.740

[已解决] 我不知道为什么，但是当我在显卡设置中启用 VSYNC 时，鼠标工作正常 oo？[/解决了]

# c# - 如何使 C#“使用”别名公开以避免“不一致的可访问性”错误？

> ID：15604513
> 
> 赞同：2
> 
> 时间：2013-03-24T21:57:13.447
> 
> 标签：c#, visual-studio, types, properties

*我有一个 C# 类，它使用 using*关键字为一些公共属性定义了一些别名。这会导致“不一致的可访问性”编译器错误，因为由别名定义的类型显然不是公共的。我怎样才能使别名定义的类型也公开，这样错误就消失了？

```
// Alias defined at the top of the source file just below the other "using"
//  "using" statements that bring in the needed modules.
using TDynamicStringArray = System.Collections.Generic.List<string>;

// Public property defined with the type alias.
public TDynamicStringArray Strs
{
    ...
} 
```

这是从编译器收到的错误：

```
Error   2   Inconsistent accessibility: property type 'TDynamicStringArray' is less accessible than property 'Strs' 
```

我尝试将*public*放在*使用*之前，但这不起作用。我查看了有关“不一致的可访问性”主题的其他几个 SO 线程，但没有看到任何处理*使用 using*关键字创建的类型别名的线程。

我使用别名的原因是因为我正在从另一种语言转换一些旧代码，它简化了转换过程。否则我只会使用没有别名的基础类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T22:01:47.880

不，您不能通过任何其他机制更改类型的可访问性，只能更改类型本身。

如果您无法修改该类型的源代码，则唯一的选择是将其包装在您的自定义公共类型中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T22:44:23.110

别名不定义类型；它们只是指现有类型。没有与别名关联的可访问性。

在您的示例中，`List<string>`是公开的，您不应收到该错误消息。我的猜测是您在某个地方有一个非公共`TDynamicStringArray`课程，并且根本没有使用别名。

# asp.net-mvc - MVC 4中基于条件的删除方法

> ID：15604519
> 
> 赞同：0
> 
> 时间：2013-03-24T21:57:43.533
> 
> 标签：asp.net-mvc, visual-studio, razor, asp.net-mvc-4

我使用 Razor HTML 在 MVC 4 中创建了一个应用程序。我已经建立了一个模型，它有一些属性和我的删除方法，它在下面发布。这种方法非常有效，除了我不希望它允许我在属性之一不是特定数字时删除任何内容。我怎样才能在这种方法中实现它？

```
public ActionResult Delete(int id = 0)
{
Material material = db.Materials.Find(id);
if(material == null)
{
    return HttpNotFound();
}
return View(material);
}

[HttpPost, ActionName("Delete")]
public ActionResult DeleteConfirmed(int id)
{
Material material = db.Materials.Find(id);
db.Materials.Remove(material);
db.SaveChanges();
return RedirecttoAction("Index");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T22:04:47.430

在您的 get 和 post 操作中，检查该属性并在您检查的属性没有允许的值时返回一个备用的“不允许删除”视图。

```
public ActionResult Delete(int id = 0)
{

    Material material = db.Materials.Find(id);
    if(material == null)
    {
        return HttpNotFound();
    }
    else if (material.CheckedProperty != AllowableValue)
    {
        return View("DeleteNotAllowed", material);
    }
    return View(material);
}

[HttpPost, ActionName("Delete")]
public ActionResult DeleteConfirmed(int id)
{
    Material material = db.Materials.Find(id);
    if (material.CheckedProperty != AllowableValue)
    {
         return View("DeleteNotAllowed", material);
    }

    db.Materials.Remove(material);
    db.SaveChanges();
    return RedirecttoAction("Index");
} 
```

# iphone - 从 ViewController 切换到 TabBarController

> ID：15604527
> 
> 赞同：0
> 
> 时间：2013-03-24T21:58:20.607
> 
> 标签：iphone, xcode, ipad, uitabbarcontroller

我有一个小问题。我在 xcode 中有 iOS 应用程序，当我启动它时，它附带

标签栏控制器。但是，我需要去另一个 ViewController（会有一些

带图片的信息），然后，我需要使用 TabbarController 回到主页，但是

当我点击后退按钮时，它显示在底部没有 Tabbar ......为了更清楚，我制定了一个方案......

[单击此链接以显示图像方案](http://i.stack.imgur.com/2O6hD.png)

请问有人可以解决这个问题吗？我在没有故事板的情况下工作，所以我需要它

以编程方式。谢谢你的每一个回复！

```
Steve 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T00:32:53.627

在您的应用程序委托中设置它：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];

    [[NSBundle mainBundle] loadNibNamed:@"TabBarController" owner:self options:nil];

    self.window.rootViewController = tbc;

    return YES;
} 
```

创建一个带有 tabcontroller 的 xib，在 tab bar 中放置一个导航控制器。设置 Viewcontroller 的 Class 和 nib 名称。

在 Button 的方法内部，需要是这样的：

```
- (IBAction)go:(id)sender
{
    Primeiro2ViewController *p2vc = [[Primeiro2ViewController alloc] initWithNibName:@"Primeiro2ViewController" bundle:nil];
    p2vc.title = @"Primeiro 2";
    [self.navigationController pushViewController:p2vc animated:YES];

    self.navigationController.navigationBar.tintColor = [UIColor greenColor];
} 
```

如果您需要样品，我稍后会为您上传。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T23:10:36.587

我的猜测是您的 window.rootViewController 实际上是您的 UINavigationController。如果您希望 TabBar 出现在所有屏幕中，那么您需要将其设为 window.rootViewController。

# android - Android：应该在哪里定义/注册 OnSharedPreferenceChangeListener

> ID：15604536
> 
> 赞同：5
> 
> 时间：2013-03-24T21:59:21.447
> 
> 标签：android, android-preferences

基本上是设计问题——`PreferenceActivity`应该让它实现`OnSharedPreferenceChangeListener`还是应该在另一个类中定义这个功能——比如在内部类中？有什么理由让人们更喜欢另一种方法吗？

另外应该在哪里注册听众？我的意思[是文档](http://developer.android.com/guide/topics/ui/settings.html#ReadingPrefs)和常识`onResume/onPause`分别要求注册/取消注册，但是看到[无数](https://stackoverflow.com/a/13669689/281545)[的](https://stackoverflow.com/q/2542938/281545) [注册](https://stackoverflow.com/a/10808682/281545)，我只是想知道我是否遗漏了一些东西。 `onCreate`

此外，我不太确定取消注册失败（例如，[这里](https://stackoverflow.com/a/6105761/281545)可能不会调用取消注册，因为`onStop`不保证会调用）一定会导致泄漏。所以如果我有例如

```
class MyPref extends PreferenceActivity implements
            OnSharedPreferenceChangeListener {
    SharedPreferences sharedPreferences;
    // init sharedPreferences
    onStart(){
        sharedPreferences.registerOnSharedPreferenceChangeListener(this);
    }
    // no unregistration
} 
```

`MyPref`一旦我回到我的其他活动之一，这会泄漏实例吗？

最后 - 相同的考虑是否适用于`OnPreferenceChangeListener`？

编辑：回到那个我看不到真正取消注册的方法`OnPreferenceChangeListener`- 我是盲人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T11:44:18.767

除了个人喜好之外，我认为没有任何主要原因可以为听众偏爱特定的位置。实现`Activity`它，或者使用内部类——无论是匿名的还是非匿名的——都可以。

唯一的事情是，如果您没有使用像您这样的现有对象`Activity`作为侦听器，则需要保留对侦听器对象的引用。根据[这个答案](https://stackoverflow.com/a/3104265/2945062)，如果您不这样做，它将被收集垃圾（因此实际上不会听任何东西）。

* * *

稍微研究一下源代码后，它似乎`SharedPreferencesImpl`使用 a`WeakHashMap`来包含已注册的侦听器（[source](https://android.googlesource.com/platform/frameworks/base/+/android-4.4_r1/core/java/android/app/SharedPreferencesImpl.java)，第 72-73 行、第 186-196 行），这意味着未能取消注册*不会*导致泄漏。

正如您所说，文档确实建议使用`onResume()`/ `onPause()`；这可能与泄漏无关，而是为了防止后台应用程序进行不必要的处理 - 所以仍然值得关注！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T01:07:46.350

`onPause`在/中进行注册和取消注册`onResume`是很多额外的工作。

您可以将侦听器的匿名实现作为类的一部分，如下所示：

```
[class level]
...
OnSharedPreferenceChangeListener mListener = new OnSharedPreferenceChangeListener () {
    onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {
        // your code here
    }
};
...
[class level] 
```

然后在适用的地方设置它。如果你这样做，你的监听器将不会被重新创建为`onPause`/之间的不同对象`onResume`（除非你的应用程序被杀死并且你的`Activity`子类必须再次加载），所以分配它是没有意义的，因为你总是引用同一个对象。另一方面，如果您的应用程序确实被杀死，那么`onCreate`将再次调用。

关于实现或不实现内部类，我倾向于使用匿名实现（如上所示），因为代码的清洁度更高——我不必为类名而烦恼，也不必键入更少的括号。然而，这真的是一个偏好的事情，所以做任何你觉得更好的事情。

# bash - 递归使用“echo append >> file”

> ID：15604538
> 
> 赞同：3
> 
> 时间：2013-03-24T21:59:50.153
> 
> 标签：bash, append, echo

我想在文件夹中每个文件的末尾附加一行。我知道可以使用

```
echo apendthis >> file 
```

将字符串附加到单个文件。但是递归执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T22:07:17.140

```
find . -type f -exec bash -c 'echo "append this" >> "{}"' \; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T22:14:27.640

### 从字面上或比喻上...

你的意思是*按*字面意思或比喻方式理解？如果你真的在寻找一个专门的递归解决方案，你可以这样做：

```
operate () {
  for i in *; do
    if [ -f "$i" ]; then
      echo operating on "$PWD/$i"
      echo apendthis >> "$i"
    elif [ -d "$i" ]; then
      (cd "$i" && operate)
    fi
  done
}

operate 
```

否则，就像其他人所说的那样，使用[find(1) 会容易得多。](http://linux.die.net/man/1/find)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T22:09:05.223

另一种方法是使用循环：

```
find . -type f | while read i; do
    echo "apendthis" >> "$i"
done 
```

# shell - grep 不工作

> ID：15604547
> 
> 赞同：-2
> 
> 时间：2013-03-24T22:00:43.740
> 
> 标签：shell, unix, grep

这对我不起作用

```
grep -vE '^\..*' tmp1.txt >grep.txt
grep -vE '^le-.*\.sh' grep.txt >tmp1.txt 
```

tmp1.txt 之前

```
.config
le-test.sh
a b c 
```

后

```
.config
le-test.sh
a b c 
```

有人帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:41:27.587

运行时看到了什么：

```
$ grep -vE '^\.' tmp1.txt
le-test.sh
a b c
$ grep -E '^\.' tmp1.txt
.config
$ 
```

（正则表达式的尾随`.*`不会添加或删除任何数据行）。你应该看看我展示的；如果您真的没有看到我展示的内容，那么您需要开始查看您的版本对`grep`选项`-E`的作用。它应该`egrep`使用扩展的正则表达式启用“-mode”，而不是扩展您的正则表达式。尝试：

```
$ grep -e '^\.' tmp1.txt
.config
$ grep -ve '^\.' tmp1.txt
le-test.sh
a b c
$ 
```

小写`-e`只是表示下一个参数是正则表达式。如果您仍然没有得到显示的输出，那么您可能没有使用常规版本的`grep`. 您需要检查您正在运行的内容。您可以尝试运行`/usr/bin/grep`或测试它是否是 GNU 版本`grep --version`，等等。

假设您可以获得第一阶段过滤的输出，那么第二阶段也应该起作用。你说你想消除'以'开头`le-`和结尾的文件`.sh`，但你的第二个正则表达式只需要`.sh`在`le-`开始之后；它没有指定结束：

```
$ grep -vE '^\.' tmp1.txt | grep -E '^le-.*\.sh$'
le-test.sh
$ grep -vE '^\.' tmp1.txt | grep -vE '^le-.*\.sh$'
a b c
$ 
```

如果您的数据文件具有 Windows 行结尾 (CRLF)，但您正在 Unix 上运行测试，可能会导致悲伤。正则表达式的部分会失败，因为在行尾之前`\.sh$`还有一个 CR（回车， ）。`'\r'`但是，这不应该影响过滤过程的第一部分。

您应该能够通过以下命令在一个命令中完成所有操作：

```
$ grep -E '^(\.|le-.*.sh$)' tmp1.txt
.config
le-test.sh
$ grep -vE '^(\.|le-.*.sh$)' tmp1.txt
a b c
$ 
```

这个版本确实需要`-E`标志；用于分组的交替`|`和括号需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T22:10:35.087

这是您要使用的 grep：`grep -vE "^\.|^le-[^.]+\.sh" FILE`

# linux - 创建文件外壳脚本

> ID：15604555
> 
> 赞同：0
> 
> 时间：2013-03-24T22:01:29.877
> 
> 标签：linux, shell

我是 Linux 中 shell 脚本的新手，我正在尝试从键盘获取数据，然后将传入的数据附加到文件中。非常简单，但是当我尝试创建文件时出现错误。错误提示“您无权创建此文件”。

我首先检查以确保文件存在。如果存在，则追加到文件末尾。如果没有，请创建文件。我究竟做错了什么？

谢谢！

PS在这种情况下，我还没有创建文件

```
#!/bin/sh                                                                                                                            

echo "Please enter your first name";
read first
echo "Please enter your last name";
read last

combine=":$first $last"
file="/testFile.dat"

if [ -f "$file" ]
then
echo "$file found."
echo $combine >> $file
else
echo "$file not found. Will create the file and add entry now."
touch $file
$combine >> $file
fi 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T22:06:21.103

您正在尝试写入`/testFile.dat`位于根目录中的文件`/`。作为普通用户，您很可能没有创建此类文件的写入权限。

但是我猜你想要的是`testfile.dat`在当前目录中创建。

替换以下行：

```
file="/testFile.dat" 
```

和：

```
file="./testFile.dat" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T22:05:20.050

您正在根目录下创建文件。尝试`file="~/testFile.dat"`在您的家中创建该文件，或者只是`file="./testFile.dat"`在当前目录中创建它。

# symfony-1.4 - 如何在 Symfony 1.4 功能测试中验证文本字段的值

> ID：15604561
> 
> 赞同：0
> 
> 时间：2013-03-24T22:01:44.057
> 
> 标签：symfony-1.4, functional-testing

我正在尝试使用 Symfony 1.4 的功能测试 ( `sfTextFunctional`) 来验证文本字段的值是否符合我的预期。这是生成的html

```
<input type="text" maxlength="10" name="number_plant[1]" value="5" id="number_plant_1"> 
```

在测试期间，我可以轻松设置值

```
setField('number_plant[1]', '5')-> 
```

我尝试了以下检查元素的排列，但它们都返回 null

```
checkElement('number_plant[1]',"5")->

checkElement('number_plant_1',"5")->

checkElement('#number_plant_1',"5")->

checkElement('form input[type="text"][name="number_plant[1]"]',"5")-> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:49:15.770

尝试类似：

```
checkElement('#number_plant_1[value="5"]') 
```

编辑：显然只有这个选择器按预期工作：

```
checkElement('form input[type="text"][name="number_plant[1]"][value="5"]') 
```

（这很奇怪；））

这将检查页面上是否存在一个`id = "number_plant_1"`元素`value = "5"`。据我所知，当您将字符串作为第二个参数传递给`checkElement`它时，它将尝试将找到的元素的内容与给定的字符串匹配。

# symfony - Symfony 2.* 中漂亮的转储变量/对象？

> ID：15604565
> 
> 赞同：5
> 
> 时间：2013-03-24T22:02:39.430
> 
> 标签：symfony, var-dump

在开发东西时，我需要输出一些实例的状态以便检查它。

在使用 CakePHP 时，我总是有一个 debug() 函数，它在 <pre> html 元素中执行某种 var_dump，因此内容是可读的。

Symfony 2.x 中也有类似的东西吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-05-20T23:57:31.180

```
exit(\Doctrine\Common\Util\Debug::dump($someVar)); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-27T12:04:50.707

利用

\Doctrine\Common\Util\Debug::dump($user);

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-24T22:29:17.323

截至今天，我所知道的在 Symfony 中进行调试的最佳方法之一是[Ladybug Bundle](https://github.com/raulfraile/LadybugBundle)。它的输出类似于 xdebug 的输出，但它有一些不错的特性，例如数组的可折叠树结构或自动链接到文档页面（支持标准 PHP、Doctrine 和 Symfony）。

您可以在 README 中找到一些很好的使用示例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-03T20:00:00.543

现在 Symfony 中多了一个新函数——dump()，看看[http://symfony.com/blog/new-in-symfony-2-6-vardumper-component](http://symfony.com/blog/new-in-symfony-2-6-vardumper-component)

# java - 在 Spinner 中选择项目后，它没有反映给我（肉眼看不到）

> ID：15604568
> 
> 赞同：0
> 
> 时间：2013-03-24T22:02:46.897
> 
> 标签：java, android, android-linearlayout, android-spinner

我正在开发一个需要动态添加的`TextView`项目`Spinner`。我能够成功地从我的程序中动态添加这两件事。

现在，当我尝试在 Spinner 中选择一些项目时，这些项目不会显示在我的模拟器中，但我选择的项目会显示在 Toast 中。

我需要做任何事情来选择该项目`Spinner`吗？

```
for (Map.Entry<String, String> entry : mapColumns.entrySet()) {

    spinnerArray = new ArrayList<String>();

    final TextView rowTextView = new TextView(cont);
    final Spinner spinner = new Spinner(cont);

    rowTextView.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    spinner.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

    for(String s: entry.getValue().split(",")) {
        System.out.println(s);
        s = s.replaceAll("[^a-zA-Z0-9]+","");

        spinnerArray.add(s);
    }

    ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(cont, android.R.layout.simple_spinner_dropdown_item, spinnerArray);

    rowTextView.setText(entry.getKey());
    rowTextView.setTypeface(null, Typeface.BOLD);
    spinner.setAdapter(spinnerArrayAdapter);

    // add the listener
    spinner.setOnItemSelectedListener(new CustomOnItemSelectedListener());

    layout.addView(rowTextView);
    layout.addView(spinner);
}

class CustomOnItemSelectedListener implements OnItemSelectedListener {

    public void onItemSelected(AdapterView<?> parent, View view, int pos,
            long id) {
        Toast.makeText(
                parent.getContext(),
                "OnItemSelectedListener : "
                + parent.getItemAtPosition(pos).toString(),
                Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub
    }
} 
```

下面是我的 XML 布局-

```
<?xml version="1.0" encoding="utf-8"?>
    <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/llayout"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >

            <Button
                android:id="@+id/button1"
                android:layout_width="100px"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical|center_horizontal|center"
                android:gravity="center_vertical|center_horizontal"
                android:text="Save" />

        </LinearLayout>

    </ScrollView> 
```

这里`mapColumns`将 hev 键值对。因此，在 Spinner 中，所有项目都从该地图的 Value 中显示出来。

**问题陈述：-**

现在我需要确保是否有人选择了 Spinner 中的任何项目，它应该被选中并且对其他人可见。

下面是我在其中选择了项目的图像，`Spinner`但它没有显示出来，而且`TextView`颜色也很浅-

![在此处输入图像描述](../Images/765bbbabc74d74c62d2066189a7d3ae8.png)

![在此处输入图像描述](../Images/5d1e31f7881274a6c1381c7eb6afd729.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:22:29.630

您用于填充 spinnerArray 的以下代码看起来很可疑，因为它将删除字符串中的所有字符。

```
for(String s: entry.getValue().split(",")) {
    ///System.out.println(s); move this print statement to below line and see what it prints in your logs
    s = s.replaceAll("[^a-zA-Z0-9]+","");
     System.out.println(s);

    spinnerArray.add(s);
} 
```

因此，如果 spinnerArray 提供了空字符串，它将提供空微调器。我建议注释掉整个块，然后尝试您的应用程序，看看问题是否仍然存在。

如果您希望微调器显示选定的项目，请添加以下行：

```
 spinner.setSelection (0); 
```

# javascript - 难以让幻灯片正常工作

> ID：15604578
> 
> 赞同：0
> 
> 时间：2013-03-24T22:04:00.793
> 
> 标签：javascript, jquery, html, css

我一直在处理需要自定义幻灯片的页面，但现在我在根据需要显示内容时遇到问题。

这是[图像。](http://bit.ly/10C4FZw)

幻灯片 JS、HTML、CSS --> 位于[此处。](https://github.com/ISynthesiaI/Stack-Overflow)

我想如果我可以在**a.slidesjs-previous**和**a.slidesjs-next**周围放置一个**div** ，然后我可以添加背景：#fff 到 div。

 ****但是用子弹代替数字是迄今为止最难的部分。我应该尝试什么方法？

我很感激我能得到的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:29:57.313

浏览您在该 github 中提供的半可识别代码，似乎 JS 以列表项样式生成项目符号。

格式似乎是这样的；

```
<li class="slidesjs-pagination-item">
    <a href="#" data-slidesjs-item="0"></a>
</li> 
```

在上面。data-slidesjs-item 也包含对其链接的幻灯片的引用。为此，幻灯片是`0 index`基于的，这意味着如果我们想从 1 开始，我们必须添加 1。

查看提供的 CSS，我没有看到用于生成项目符号的任何特殊图像，也没有任何文本缩进，所以只需这样做：

```
$('.slidesjs-pagination-item a').each(function(){
    $(this).text($(this).data('slidesjs-item') +1);
}); 
```

[这是一个小提琴，说明了这背后的机制](http://jsfiddle.net/dBdAv/)****

# iphone - 在 iOS 子视图中触摸时绘制矩形

> ID：15604582
> 
> 赞同：0
> 
> 时间：2013-03-24T22:04:29.237
> 
> 标签：iphone, ios, sudoku

我正在尝试将我在 Cocoa 中创建的 Sudoku 应用程序移植到 iOS，但我无法将 Mac 应用程序中的 mouseDown 事件转换为 iOS 上的 touchBegan 事件。

我在父视图中创建了一个子视图，其中绘制了网格并且数独游戏的所有初始值都已到位。每当我尝试在模拟器中点击一个空方块来更新值时，我的控制台都会给我这些错误：

```
Mar 24 14:59:56 Macintosh-94.local SudokiOS[95817] <Error>: CGContextSetFillColorWithColor: invalid context 0x0
Mar 24 14:59:56 Macintosh-94.local SudokiOS[95817] <Error>: CGContextSaveGState: invalid context 0x0
Mar 24 14:59:56 Macintosh-94.local SudokiOS[95817] <Error>: CGContextSetFlatness: invalid context 0x0
Mar 24 14:59:56 Macintosh-94.local SudokiOS[95817] <Error>: CGContextAddPath: invalid context 0x0
Mar 24 14:59:56 Macintosh-94.local SudokiOS[95817] <Error>: CGContextDrawPath: invalid context 0x0
Mar 24 14:59:56 Macintosh-94.local SudokiOS[95817] <Error>: CGContextRestoreGState: invalid context 0x0 
```

这是我的 mac 应用程序中的（工作）代码：

```
//SudokuView.m
-(void)paintSelectionRectangle
{
    CGFloat thirdWidth = self.bounds.size.width / 3.0;
    CGFloat thirdHeight = self.bounds.size.height / 3.0;
    CGFloat ninthWidth = thirdWidth / 3.0;
    CGFloat ninthHeight = thirdHeight / 3.0;

    NSRect selectionRect = NSMakeRect(_selectionCellX * thirdWidth + _selectionX * ninthWidth,
                                      _selectionCellY * thirdHeight + _selectionY * ninthHeight,
                                      ninthWidth, ninthHeight);

    NSColor* selectionColor = [NSColor colorWithSRGBRed: 0.0 green: 0.0 blue: 1.0
                               alpha: 0.5];
    [selectionColor setFill];

    NSBezierPath* selectionPath = [NSBezierPath bezierPathWithRoundedRect: selectionRect
                                                                  xRadius: ( ninthWidth / 4.0 )
                                                                  yRadius: ( ninthHeight / 4.0 )];
    [selectionPath fill];
}

- (void)drawRect:(NSRect)dirtyRect
{

    ...

    if(_haveSelection)
    {
        [self paintSelectionRectangle];
    }
    ...
}
.
.
.
-(void)mouseDown:(NSEvent *)event
{
    NSPoint location = [event locationInWindow];
    CGFloat thirds = self.bounds.size.width / 3;
    CGFloat ninths = thirds / 3;

    _selectionCellX = (UInt32)(location.x/thirds);
    _selectionCellY = (UInt32)(location.y/thirds);
    _selectionX = (UInt32)((location.x - (_selectionCellX * thirds)) / ninths);
    _selectionY = (UInt32)((location.y - (_selectionCellY * thirds)) / ninths);

    _haveSelection = YES;

    if ([self._windowController isOriginalValueAtCellX:_selectionCellX andCellY:_selectionCellY xIndex:_selectionX yIndex:_selectionY] == NO)
    {
        _haveSelection = YES;
    }
    else
    {
        _haveSelection = NO;
    }
    [self setNeedsDisplay:YES];
} 
```

这就是在 iOS 应用程序中不起作用的地方

```
//SudokiOSViewController.m
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch* touch = [[event allTouches] anyObject];
    CGPoint location = [touch locationInView:self.sudokuSubview];
    CGFloat thirds = sudokuSubview.bounds.size.width / 3;
    CGFloat ninths = thirds / 3;

    _selectionCellX = (UInt32)(location.x/thirds);
    _selectionCellY = (UInt32)(location.y/thirds);
    _selectionX = (UInt32)((location.x - (_selectionCellX * thirds)) / ninths);
    _selectionY = (UInt32)((location.y - (_selectionCellY * thirds)) / ninths);
    _haveSelection = YES;
    if ([ourView._ourViewController isOriginalValueAtCellX:_selectionCellX andCellY:_selectionCellY xIndex:_selectionX yIndex:_selectionY] == NO)
    {
        _haveSelection = YES;
    }
    else
    {
        _haveSelection = NO;
    }

}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    [self touchesBegan:touches withEvent:event];
    [sudokuSubview setNeedsDisplay];
    [self paintSelectionRectangle];
} 
```

我很难理解我是否应该只使用 touchBegan 和 touchEnded 或 UIGestureRecognizer。我也不明白为什么要调用 CGContext 。对此的任何帮助将不胜感激。谢谢！

更新：正如 mrueg 所建议的，这里是 iOS 代码`paintselectionrectangle`：

```
-(void)paintSelectionRectangle
{
    CGFloat thirdWidth = self.bounds.size.width / 3.0;
    CGFloat thirdHeight = self.bounds.size.height / 3.0;
    CGFloat ninthWidth = thirdWidth / 3.0;
    CGFloat ninthHeight = thirdHeight / 3.0;

    CGRect selectionRect = CGRectMake(_selectionCellX * thirdWidth + _selectionX * ninthWidth,
                                      _selectionCellY * thirdHeight + _selectionY * ninthHeight,
                                      ninthWidth, ninthHeight);

    UIColor* selectionColor = [UIColor colorWithRed:0.0 green:0.0 blue:1.0 alpha:0.5];
    [selectionColor setFill];

    UIBezierPath* selectionPath = [UIBezierPath bezierPathWithRoundedRect:selectionRect cornerRadius:(ninthWidth/4.0)];
    [selectionPath fill];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:38:54.480

你不应该打电话`paintSelectionRectangle`来`touchesEnded:withEvent:`。此方法执行绘图操作，并且您在那里没有图形上下文。只需发送`setNeedsDisplay`到需要重绘的视图。

另外我认为`touchesBegan:withEvent:`手动调用是个坏主意。

**编辑**：我仔细查看了您的代码以及您尝试实现的目标。我将创建一个绘制选择矩形的 UIView 子类。只需用贝塞尔路径填充整个边界：

```
-(void)drawRect:(CGRect)rect
{
    UIColor* selectionColor = [UIColor colorWithRed:0.0 green:0.0 blue:1.0 alpha:0.5];
    [selectionColor setFill];

    CGRect roundedrect = self.bounds;
    CGFloat cornerRadius = self.bounds.size.width / 36;
    UIBezierPath* selectionPath = [UIBezierPath bezierPathWithRoundedRect:roundedRect
                                                             cornerRadius:cornerRadius];
    [selectionPath fill];
} 
```

将该视图的一个实例添加到您的主视图并将其`hidden`属性设置为 YES。

在`touchesEnded:withEvent:`确定选择矩形时，设置选择视图的框架并设置`hidden`为 NO，如果您检测到选择：

```
CGRect selectionRect = CGRectMake(_selectionCellX * thirdWidth + _selectionX * ninthWidth,
                                  _selectionCellY * thirdHeight + _selectionY * ninthHeight,
                                  ninthWidth, ninthHeight);
[selectionSubview setFrame: selectionRect];

[selectionSubview setHidden: !_haveSelection]; 
```

如果您愿意，您还可以使用 CoreAnimation 为帧更改设置动画。

# entity-framework - EF Code First 配置中的多级继承

> ID：15604585
> 
> 赞同：2
> 
> 时间：2013-03-24T22:04:54.053
> 
> 标签：entity-framework, ef-code-first

我有一个我正在定义的一些实体的抽象基类。其中一个派生实体实际上是另一个实体的非抽象基类。

遵循此代码：

```
public abstract class BaseReportEntry {
      public int ReportEntryId { get; set;}
      public int ReportBundleId { get; set; }  //FK
      public virtual ReportBundle ReportBunde { get; set; } 
}

//A few different simple pocos like this one
public PerformanceReportEntry : BaseReportEntry {
     public int PerformanceAbsolute { get; set; }
     public double PerformanceRelative { get; set; }

}

//And one with a second level of inheritance 
public ByPeriodPerformanceReportEntry : PerformanceReportEntry {
       public string Period { get; set; }
} 
```

我正在使用一个基础`EntityTypeConfiguration`：

```
public class BaseReportEntryMap<TReportEntry> : EntityTypeConfiguration<TReportEntry>
    where TReportEntry : BaseReportEntry
{
    public BaseReportEntryMap()
    {
        this.HasKey(e => e.ReportEntryId);

        this.HasRequired(e => e.ReportsBundle)
            .WithMany()
            .HasForeignKey(e => e.ReportsBundleId);
    }
} 
```

大概这对于一级继承来说很好，但是对于它具有二级继承的情况会抛出以下错误：

```
The foreign key component 'ReportsBundleId' is not a declared property on type 'ByPeriodPerformanceReportEntry'

public class ByPeriodPerformanceReportEntryMap : BaseReportEntryMap<ByPeriodPerformanceReportEntry>
{
    public ByPeriodPerformanceReportEntryMap ()
        : base()
    {
        this.Property(e => e.Period).IsRequired();

        this.Map(m =>
        {
            m.MapInheritedProperties();
            m.ToTable("ByPeriodPerformanceReportEntries"); 
        });
    }
} 
```

如果需要，这是 ReportBundle 类

```
 public class ReportsBundle 
{
    public int ReportsBundleId { get; set; }
    public virtual ICollection<PerformanceReportEntry> PerformanceReportEntries{ get; set; }
    public virtual ICollection<ByPeriodPerformanceReportEntry> ByPeriodPerformanceReportEntries{ get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T00:24:58.687

问题不在于第二级继承，而是`PerformanceReportEntry`（的基础`ByPeriodPerformanceReportEntry`）是一个实体，而`BaseReportEntry`（的基础`PerformanceReportEntry`）不是。

如果不是实体，您的映射将起作用`PerformanceReportEntry`- 即它的映射未添加到模型构建器配置中，并且您没有`DbSet`此类型，并且它不会出现在`ReportsBundle`.

在这种情况下，无法从中派生配置`BaseReportEntryMap<ByPeriodPerformanceReportEntry>`- 并且没有必要，因为基本属性的映射已经由`BaseReportEntryMap<PerformanceReportEntry>`. 因此你可以使用

```
public class ByPeriodPerformanceReportEntryMap
    : EntityTypeConfiguration<ByPeriodPerformanceReportEntry> 
```

但我怀疑生成的模型是否如您所料。我不知道里面的`PerformanceReportEntries`和`ByPeriodPerformanceReportEntries`集合`ReportsBundle`应该表达什么。您是否期望这`ByPeriodPerformanceReportEntries`是按子类型过滤的集合？您是否期望`PerformanceReportEntries`它只包含`PerformanceReportEntry`s 但不是`ByPeriodPerformanceReportEntry`s 的 ReportsEntries？您是否期望`PerformanceReportEntries`包含所有条目，包括`ByPeriodPerformanceReportEntries`?

无论如何，`BaseReportEntry.ReportBundle`是映射在`PerformanceReportEntry`（而不是`ByPeriodPerformanceReportEntry`）中的导航属性。这意味着类中的反向导航属性`ReportsBundle`必须引用`PerformanceReportEntry`哪个是`PerformanceReportEntries`导航集合。将在and`ByPeriodPerformanceReportEntries`之间引入第二个一对多关系（在 中没有导航属性）。的反向导航属性不会是。`ReportsBundle``ByPeriodPerformanceReportEntry``ByPeriodPerformanceReportEntry``ByPeriodPerformanceReportEntries``BaseReportEntry.ReportBundle`

我的感觉是你不应该拥有这个`ReportsBundle.ByPeriodPerformanceReportEntries`集合，但我不确定你想要达到什么目的。

**编辑**

参考您的评论，您只有这两种报告类型，我认为您的映射太复杂了。我会做以下事情：

*   删除`BaseReportEntry`该类并将其属性移动到`PerformanceReportEntry`. 拥有一个只派生一个其他类的基类是没有意义的。

*   删除`ByPeriodPerformanceReportEntries`from `ReportsBundle`，这`ReportsBundle`将是：

    ```
    public class ReportsBundle 
    {
        public int ReportsBundleId { get; set; }
        public virtual ICollection<PerformanceReportEntry>
            PerformanceReportEntries { get; set; }
    } 
    ```

*   删除`BaseReportEntryMap`并将映射移动到`PerformanceReportEntryMap`. 从 导出此地图`EntityTypeConfiguration<PerformanceReportEntry>`。

*   更正映射。目前这是错误的，因为您没有在`WithMany`. `PerformanceReportEntryMap`应该是这样的：

    ```
    public class PerformanceReportEntryMap
        : EntityTypeConfiguration<PerformanceReportEntry>
    {
        public PerformanceReportEntryMap()
        {
            this.HasKey(e => e.ReportEntryId);

            this.HasRequired(e => e.ReportsBundle)
                .WithMany(b => b.PerformanceReportEntries)
                .HasForeignKey(e => e.ReportsBundleId);
        }
    } 
    ```

*   `ByPeriodPerformanceReportEntryMap`仅从中*声明*的属性派生`EntityTypeConfiguration<ByPeriodPerformanceReportEntry>`并指定映射，而不是为基本属性再次指定映射。那已经发生在. 您不需要也不能再次指定它，因为它会导致您遇到的异常。*`ByPeriodPerformanceReportEntry``PerformanceReportEntryMap`*

**   使用 Table-Per-Hierarchy (TPH) 继承而不是 Table-Per-Concrete-Type (TPC)，尤其是当您在`ByPeriodPerformanceReportEntry`. TPC 更难使用，因为它在数据库生成的身份和多态关联（在 和 之间的关系中存在`PerformanceReportEntry`）存在问题`ReportsBundle`。[这些问题在这里有更详细的解释](http://weblogs.asp.net/manavi/archive/2011/01/03/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-3-table-per-concrete-type-tpc-and-choosing-strategy-guidelines.aspx)。相反，TPH 提供了最佳性能。`ByPeriodPerformanceReportEntryMap`然后看起来像这样：

    ```
    public class ByPeriodPerformanceReportEntryMap
        : EntityTypeConfiguration<ByPeriodPerformanceReportEntry>
    {
        public ByPeriodPerformanceReportEntryMap()
        {
            this.Property(e => e.Period).IsRequired();
        }
    } 
    ```

    TPH 不需要显式配置，因为它是默认继承映射。*

# php - 更新 PHP 和 MySQL 的数据丢失？

> ID：15604591
> 
> 赞同：-4
> 
> 时间：2013-03-24T22:05:33.850
> 
> 标签：php, mysql, hosting, web-hosting, shared-hosting

我已经要求我的一个主机更新 PHP 和 MySQL 的版本，他们回复告诉我确保我有我的数据库以及页面内容的备份，因为在更新过程中一些数据可能会丢失。

这是否只是一种掩饰他们的方式，以防任何不称职的人做坏了他们的工作？或者它真的会因为某种原因导致潜在的数据丢失吗？

我不是真的在下载所有网站的模式，它很大，有数千张图片，我想知道在这个操作中丢失数据的概率是多少。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T22:09:07.797

这不是任何人都可以在这里真正回答的问题。
通常更新 php 和 MySQL 的版本应该不会导致任何问题，但就像生活中的一切一样 - 它可能会出错...... J

因此，您永远不会误认为手头有最近的备份。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T22:09:46.190

这是任何托管公司通知其客户在接触服务器之前执行备份的正常程序。我认为它更多地与技术有关。不管这个人训练得多么好，事情都可能出错。我建议您除了进行此备份之外，还要为您的网站制定定期备份计划，以防将来出现问题。

# macos - Applescript - 复制图像，粘贴为图标

> ID：15604593
> 
> 赞同：0
> 
> 时间：2013-03-24T22:05:40.230
> 
> 标签：macos, applescript, finder

出于组织目的，通过热键，我希望能够快速复制选定的图像文件（就像在 Finder 中一样），然后将其粘贴为选定文件夹的图标，而无需进入“获取信息”文件夹。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:37:54.767

您可能需要两个脚本：一个用于复制图像（不是文件，而是图像本身），另一个用于将图像粘贴为图标。
复制图片：

```
tell application "Finder"
    open selection using (path to application "Preview") -- open with Preview
end tell

tell application "Preview"
    tell application "System Events"
        keystroke "a" using command down -- select all
        keystroke "c" using command down -- copy
        keystroke "w" using command down -- close window
    end tell
end tell 
```

将图像粘贴为图标：

```
tell application "Finder"
    activate
    tell application "System Events"
        keystroke "i" using command down -- open info

        -- set focus on icon image
        tell process "Finder"
            set img to (image 1 of scroll area 1 of front window)
            set focused of img to true
        end tell

        keystroke "v" using command down -- insert image
        keystroke "w" using command down -- close window
    end tell
end tell 
```

你可以将这两个脚本绑定到一些热键。为此，我使用 FastScripts。

**注意 1**：您可能需要在 SystemPreferences -> Accessibility 下启用对辅助设备的访问
**注意 2**：如果脚本的某些部分不起作用（例如预览打开，但未选择图像等），您应该尝试使用延误。

# php - 如何从 Wordpress 帖子中的第一张图片中获取自动缩略图？

> ID：15604594
> 
> 赞同：0
> 
> 时间：2013-03-24T22:05:41.663
> 
> 标签：php, wordpress

我正在创建一个 Wordpress 主题，我想将帖子中的第一张图片作为缩略图用于 Facebook 的 OG 元标记。

我尝试使用该函数`get_the_post_thumbnail()`，但它会生成一个 html`img`元素。此外，我想拍摄帖子中的第一张图片，而无需在创建帖子时添加特色图片。

这应该很简单，因为已经为每个帖子生成了所有缩略图，我只是没有做对。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T23:21:47.423

在这里，我为您制作了一些功能，您可以使用它来添加/编辑附件事件。

```
function set_first_as_featured($attachment_ID){
    $post_ID = get_post($attachment_ID)->post_parent;
    if(!has_post_thumbnail($post_ID)){
        set_post_thumbnail($post_ID, $attachment_ID);
    }
}

add_action('add_attachment', 'set_first_as_featured');
add_action('edit_attachment', 'set_first_as_featured'); 
```

有很大的改进空间，但这也很有魅力。在每个上传/编辑附件上，功能都会检查帖子是否已经有特色图片。如果没有，则将相关图像设置为特色。每一张下一张图片都将被忽略（因为帖子已经有特色图片）。

也许有人觉得它有帮助（你在我的编码中间找到了解决方案，所以...... :)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-02T11:26:46.570

我找到了这个解决方案：

```
$size = 'thumbnail'; // whatever size you want
if ( has_post_thumbnail() ) {
    the_post_thumbnail( $size );
} else {
    $attachments = get_children( array(
        'post_parent' => get_the_ID(),
        'post_status' => 'inherit',
        'post_type' => 'attachment',
        'post_mime_type' => 'image',
        'order' => 'ASC',
        'orderby' => 'menu_order ID',
        'numberposts' => 1)
    );
    foreach ( $attachments as $thumb_id => $attachment ) {
        echo wp_get_attachment_image($thumb_id, $size);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T22:56:06.867

我找到了一个解决方案：

```
 wp_get_attachment_image_src(get_post_thumbnail_id($post->ID), 'thumbnail' )[0]; 
```

它工作正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-25T08:41:17.507

将此代码放入主题的functions.php中：

```
// make the first image of WordPress post as featured image
function first_image_as_featured() {
global $post, $posts;
$first_img_featured = '';
ob_start();
ob_end_clean();
$output = preg_match_all('/<img.+src=[\'"]([^\'"]+)[\'"].*>/i', $post->post_content, $matches);
$first_img_featured = $matches [1] [0];
if(empty($first_img_featured)){ //Defines a default image
$first_img_featured = "/images/default.jpg";
}
return $first_img_featured;
} 
```

然后在 WordPress 循环中添加以下代码：

```
 <?php
if (has_post_thumbnail()) { ?>
    <?php the_post_thumbnail(); ?>
<?php } 
     else { ?>
     <img src="<?php echo first_image_as_featured(); ?>" />
     <?php
} 
?> 
```

如果未设置特色图片，则会自动将第一张图片作为特色图片。来源：[**获取 WordPress 帖子的第一张图片作为特色图片**](https://www.codespeedy.com/get-the-first-image-of-wordpress-post-as-featured-image/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-26T18:24:09.910

我已经尝试了上述解决方案但没有成功。因此，我构建了一个新的简单解决方案：

```
function set_first_as_featured($post_id){
    $medias = get_attached_media( 'image', $post_id );
    if(!has_post_thumbnail($post_id)) {
        foreach ($medias as $media) {
            set_post_thumbnail($post_id, $media->ID);
            break;
        }
    }
}
add_action('save_post', 'set_first_as_featured'); 
```

当您保存帖子时，此代码将检查它是否有任何缩略图。如果没有，它会将附加到此帖子的第一张图片设置为缩略图。

# android - 如何添加“edittext”，当您输入特定单词时会发生动作

> ID：15604595
> 
> 赞同：0
> 
> 时间：2013-03-24T22:05:43.293
> 
> 标签：android, android-edittext

如何添加“edittext”，当您输入特定单词（例如“apple”）时，它会弹出一个新的 xml 页面。但是，如果用户键入除“apple”之外的其他单词，则会弹出不同的 xml 页面。

我想要完成的是类似于徽标问答游戏的事情，当您输入正确的单词时，会弹出一个新事物。

我完全不知道该怎么做。如果你能给我看一个关于如何做的视频，那将非常有帮助，谢谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T22:15:08.687

你应该使用[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)来观察变化并做任何你想做的事情`afterTextChanged()`。

# ios - IOS 和 .plists

> ID：15604596
> 
> 赞同：0
> 
> 时间：2013-03-24T22:05:46.467
> 
> 标签：ios, xcode

我正在为高级 Capstone 开发应用程序，并且是第一次使用 .plist。到目前为止，我的 .h 中有什么：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
-(NSString *)dataFilePath;
-(IBAction) readPlist:(id)sender;
-(IBAction) writePlist:(id)sender;
@property (weak, nonatomic) IBOutlet UITextField *textBox;

@end 
```

在我的 .m 中，我有：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
-(NSString *) dataFilePath
{
    NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES );
    NSString *documentDirectory = [path objectAtIndex:0];
    return [documentDirectory stringByAppendingPathComponent:@"JoesData.plist"];
}
- (IBAction)readPlist:(id)sender
{
    NSString *filePath = [self dataFilePath];
    if ([[NSFileManager defaultManager] fileExistsAtPath:filePath])
    {
        NSArray *array = [[NSArray alloc] initWithContentsOfFile:filePath];
        NSLog(@"%@\n",array);
        NSLog(@"%@\n", filePath);
    }
}
- (IBAction)writePlist:(id)sender {
    NSString *string = _textBox.text;
    NSMutableArray *anArray = [[NSMutableArray alloc] init];

    [anArray addObject:string];
    [anArray writeToFile:[self dataFilePath] atomically:YES];
}
@end 
```

所以它的作用是根据我在故事板中设置的文本框中的内容创建一个 .plist。我的问题是它可以很好地读写它，但它不会保留输入到文本框中的内容的运行列表。相反，它只是覆盖了以前的 .plist。关于如何解决覆盖问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:10:40.923

将 plist 读入内存，制作数组的可变副本，然后将对象添加到该数组中，而不是`NSMutableArray`每次都创建一个新对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T22:27:31.623

另一种选择是执行以下操作。

`To read the property-list data back into your program, first initialize an allocated NSData object by invoking initWithContentsOfFile: or initWithContentsOfURL: or call a corresponding class factory method such as dataWithContentsOfFile:. Then call the propertyListFromData:mutabilityOption:format:errorDescription: class method of NSPropertyListSerialization, passing in the data object.`

[属性列表编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PropertyLists/ReadWritePlistData/ReadWritePlistData.html#//apple_ref/doc/uid/10000048i-CH8-SW1)

# python - 将 = 替换为 '\x' 然后在 python 中解码

> ID：15604597
> 
> 赞同：7
> 
> 时间：2013-03-24T22:05:50.037
> 
> 标签：python, utf-8, decode, backslash

我使用 python 模块获取电子邮件的主题并接收到字符串

```
'=D8=B3=D9=84=D8=A7=D9=85_=DA=A9=D8=AC=D8=A7=D8=A6=DB=8C?=' 
```

我知道字符串是用“utf-8”编码的。Python 有一个调用字符串的方法来解码这些字符串。但是要使用我需要用字符串替换`=`符号的方法。`\x`通过手动交换然后打印解码后的结果字符串，我得到了字符串 سلام_کجائی 这正是我想要的。问题是如何自动进行交换？答案似乎比简单地在字符串上使用函数（如替换函数）更难。

下面我带来了我手动操作后使用的代码？

```
r='\xD8\xB3\xD9\x84\xD8\xA7\xD9\x85_\xDA\xA9\xD8\xAC\xD8\xA7\xD8\xA6\xDB\x8C'
print r.decode('utf-8') 
```

我将不胜感激任何可行的想法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T22:12:30.310

只需从quoted-printable 解码它以获得utf8编码的字节串：

```
In [35]: s = '=D8=B3=D9=84=D8=A7=D9=85_=DA=A9=D8=AC=D8=A7=D8=A6=DB=8C?='
In [36]: s.decode('quoted-printable')
Out[36]: '\xd8\xb3\xd9\x84\xd8\xa7\xd9\x85_\xda\xa9\xd8\xac\xd8\xa7\xd8\xa6\xdb\x8c?' 
```

然后，如果需要，从 utf-8 到 unicode：

```
In [37]: s.decode('quoted-printable').decode('utf8')
Out[37]: u'\u0633\u0644\u0627\u0645_\u06a9\u062c\u0627\u0626\u06cc?' 
```

```
In [39]: print s.decode('quoted-printable')
سلام_کجائی? 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T22:11:51.827

这种编码被称为quoted-printable。有一个用于执行编码和解码的 Python 模块。

没错，它只是对二进制字符串的纯引用，因此您需要在之后应用 UTF-8 解码。（当然，假设字符串是 UTF-8 格式的。但是这看起来是正确的，尽管我不知道这种语言。）

```
import quopri

print quopri.decodestring( "'=D8=B3=D9=84=D8=A7=D9=85_=DA=A9=D8=AC=D8=A7=D8=A6=DB=8C?='" ).decode( "utf-8" ) 
```

# java - 我在哪里可以看到 system.out.println 消息？

> ID：15604599
> 
> 赞同：0
> 
> 时间：2013-03-24T22:06:08.340
> 
> 标签：java, hibernate, jsf

我有一个这样的助手类：

```
public class FtHelper {

    Session session = null;

    public FtHelper() {
        this.session = HibernateUtil.getSessionFactory().getCurrentSession();
    }

    public FinancialTransactions getByBeginDate(String beginDate) {

        List<FinancialTransactions> FtList = null;

        try {
            org.hibernate.Transaction tx = session.beginTransaction();
            Query q = session.createQuery(
                    "from FinancialTransactions where DATE=:date")
                    .setParameter("date", beginDate);
            FtList = (List<FinancialTransactions>) q.list();

        } catch (Exception e) {
            e.printStackTrace();
        }

        return FtList.get(0);
    }
} 
```

我添加了一个`System.out.println(beginDate);`略高于回报，但它似乎没有打印任何东西。我也用过`System.out.println("anytext")`，但也没有用。我在哪里可以看到 Netbeans 中的输出消息？顺便说一句，我`beginDate`从我的 JSF 中获得了价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:22:16.193

您应该能够在`catalina.out`.

在 下`Windows`，您应该能够在文件夹中找到它：`<Tomcat Folder>\logs`

# menu - TYPO3 菜单：使用 entryLevel 时从菜单中排除分支/文件夹

> ID：15604602
> 
> 赞同：0
> 
> 时间：2013-03-24T22:06:21.730
> 
> 标签：menu, typo3

我的菜单如下所示

```
Home
--Category 1
----Subpage
----Subpage
--Category 2
----Subpage
----Subpage
--Folder
----Subpage
----Subpage 
```

我的 TS 如下所示

```
lib.mainmenu_level2 = HMENU
lib.mainmenu_level2 {
  entryLevel = 1

  # Level 2
  1 = TMENU
  1.wrap = <ul class="nav-level-2 clearfix">|</ul>
  1 {
    # no state 
    NO {
      wrapItemAndSub = <li class="first">|</li> |*| <li>|</li> |*| <li class="last">|</li>
      ATagTitle.field = title
      stdWrap.htmlSpecialChars = 1
    }
 ... 
```

现在我希望从 entryLevel 1 中获取所有子页面。到目前为止，这一直有效，直到我在`Folder`. 在这里我得到了子页面，但是这个子页面不应该呈现给用户。我可以`Folder`以某种方式排除所有子页面吗？由于 mc_googlesitemap 扩展，我无法将它们隐藏在菜单中（否则它不会出现在 XML 站点地图中）。还是将子页面拉出的唯一方法`Folder`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:10:08.563

`HMENU`有配置值`excludeUidList`。

```
lib.mainmenu_level2 = HMENU
lib.mainmenu_level2 {
    entryLevel = 1
    excludeUidList = 46,34,78
    ... 
```

添加文件夹的 UID 应该可以工作。 [http://wiki.typo3.org/TSref/HMENU](http://wiki.typo3.org/TSref/HMENU)

# kendo-ui - 带有是/否组合布尔值的剑道网格弹出窗口

> ID：15604605
> 
> 赞同：0
> 
> 时间：2013-03-24T22:06:34.783
> 
> 标签：kendo-ui, kendo-grid

这让我发疯了。我正在尝试做一些应该不费吹灰之力但有很多问题的事情。我有两个布尔字段，我想将它们绑定到一个带有 Yes 和 No 的组合框。我想使用 Kendo UI 组合框，并且我在 Kendo UI 网格的弹出模板中执行所有这些操作。

在下面的代码片段中，我有两个选择（在模板的末尾），一个设置了 data-role="dropdownlist"，另一个没有。

第一个选择 ReceiveEmailMontlyFlyer 将在您编辑用户时选择正确的值，但不会更改它应该绑定的值。第二个选择 ReceiveEmailMessages 不会选择正确的值或返回正确的值。

请帮忙。我一定错过了一些非常简单的东西，一些我不知道或不理解的关于 HTML 5 绑定或剑道的规则。

```
<script id="popupEditorTemplate" type="text/x-kendo-template">
    <div class="k-edit-label">
        <label for="Username" class="required">Username</label>
    </div>
    <input type="text" class="k-input k-textbox" name="Username" data-bind="value:Username">

    <div class="k-edit-label">
        <label for="FirstName" class="required">First Name</label>
    </div>
    <input type="text" class="k-input k-textbox" name="FirstName" data-bind="value:FirstName">

    <div class="k-edit-label">
        <label for="LastName" class="required">Last Name</label>
    </div>
    <input type="text" class="k-input k-textbox" name="LastName" data-bind="value:LastName">

    <div class="k-edit-label">
        <label for="Email" class="required">Email</label>
    </div>
    <input type="text" class="k-input k-textbox" name="Email" data-bind="value:Email">

    <div class="k-edit-label">
        <label for="HomePhone">Home Phone</label>
    </div>
    <input type="text" class="k-input k-textbox" name="HomePhone" data-bind="value:HomePhone">

    <div class="k-edit-label">
        <label for="WorkPhone">Work Phone</label>
    </div>
    <input type="text" class="k-input k-textbox" name="WorkPhone" data-bind="value:WorkPhone">

    <div class="k-edit-label">
        <label for="MobilePhone">Mobile Phone</label>
    </div>
    <input type="text" class="k-input k-textbox" name="MobilePhone" data-bind="value:MobilePhone">

    <div class="k-edit-label">
        <label for="Line1" class="required">Address Line 1</label>
    </div>
    <input type="text" class="k-input k-textbox" name="Line1" data-bind="value:Line1">

    <div class="k-edit-label">
        <label for="Line2">Address Line 2</label>
    </div>
    <input type="text" class="k-input k-textbox" name="Line2" data-bind="value:Line2">

    <div class="k-edit-label">
        <label for="ReceiveEmailMontlyFlyer">Receive Flyer</label>
    </div>

    <select name="ReceiveEmailMontlyFlyer" id="ReceiveEmailMontlyFlyer" data-bind="value:ReceiveEmailMontlyFlyer">
        <option value="1">Yes</option>
        <option value="0">No</option>
    </select>

    <div class="k-edit-label">
        <label for="ReceiveEmailMessages">Receive other</label>
    </div>
    <select id="ReceiveEmailMessages" name="ReceiveEmailMessages" data-bind="value:ReceiveEmailMessages" data-role="dropdownlist">
        <option value="1">Yes</option>
        <option value="0">No</option>
    </select>
    <br />
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:16:54.430

不确定这是否完全有助于您的问题，但您没有关闭

```
<script> 
```

这可能是有问题的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T13:31:58.150

我前一阵子想通了，但从来没有在这里发过。因此，如果其他人需要这个，这就是我发现的。

我在脚本标签中创建了一个数据源，如下所示：

```
 var yesNoDropDownDataSource = new kendo.data.DataSource({
        data: [{ Value: "true", Text: "Yes" }, { Value: "false", Text: "No" }]
    }); 
```

然后我在弹出模板中使用如下：

```
 <div class="k-edit-label">
        <label for="ReceiveEmailMonthlyFlyer" class="required">Receive Flyer</label>
    </div>
    <input name="ReceiveEmailMonthlyFlyer"
        data-bind="value:ReceiveEmailMonthlyFlyer"
        data-value-field="Value"
        data-text-field="Text"
        data-source="yesNoDropDownDataSource"
        data-role="dropdownlist" />
    <br> 
```

# python - Python itemgetter 打印空列表而不是字符串

> ID：15604611
> 
> 赞同：0
> 
> 时间：2013-03-24T22:07:24.170
> 
> 标签：python, python-2.7

```
from itertools import groupby
from operator import itemgetter

distance_list = [('Brahmadatta Devadatta', 0.12844036697247707, '2, 6', '0, 10'),
                 ('Brahmadatta Devadatta', 0.07339449541284404, '2, 6', '1, 9'),
                 ('Brahmadatta Sujata', 0.11009174311926606, '2, 6', '4, 8')]

for key, value in groupby(sorted(distance_list), key=itemgetter(0)):
    print map(itemgetter(1), value) #works for printing float numbers
    print map(itemgetter(2), value) # returns an empty list 
```

为什么itemgetter返回空列表而不是返回对应的字符串

**预期输出：**

```
2, 6
2, 6
2, 6 
```

**生成的输出：**

```
[ ]  
[ ]  
[ ] 
```

# codeigniter - CodeIgniter 路由器不工作

> ID：15604613
> 
> 赞同：0
> 
> 时间：2013-03-24T22:07:37.077
> 
> 标签：codeigniter, routes, codeigniter-routing

我有一个单页网站，所以所有路由都应该指向默认路由器。这是我的基本网址：

```
$config['base_url'] = 'http://mysite.cz'; 
```

这是来自 htaccess 的重写基础：

```
RewriteBase / 
```

最后是 routes.php：

```
$route['default_controller'] = "home";
$route['404_override'] = '';
$route['admin'] = 'admin/home'; 
$route['^/'] = "home";

$route['(.*)'] = $route['default_controller']; 
```

我也试图用这个替换最后一行：

```
$route['home'] = $route['default_controller']; 
```

但是当我尝试输入 mysite.com/home 时，我仍然收到 404 消息。

任何想法我可能做错了什么？

PS这一切都在本地主机和测试服务器上按预期工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:35:14.817

我有几个站点，我将所有流量路由到单个控制器，我的 routes.php 看起来像这样：

```
// All other routes
$route['admin'] = 'admin/home';

// Default controller Routes
$route['(:any)'] = 'home';
$route['default_controller'] = "home"; 
```

顺序可能很重要，所以我会将您的默认内容放在最底部。

# php - 修改数组格式

> ID：15604617
> 
> 赞同：-1
> 
> 时间：2013-03-24T22:07:43.690
> 
> 标签：php, jquery, arrays, formatting

（对不起，我之前发布了一个非常相似的问题，但看起来我原来的问题有点偏离）

这是我的代码：

```
$.ajax({                                      
      url: 'receive-country.php',    //the script to call to get data
      dataType: 'json',                //data format      
      success: function(data)          //on recieve of reply
      {
            var inputArray = data;
            alert(data);
            var test_data = {"af":16.63,"al":11.58,"dz":158.97};
            jQuery('#vmap').vectorMap({
                map: 'world_en',
                backgroundColor: null,
                color: '#ffffff',
                hoverColor: '#eeeeee',
                hoverOpacity: null,
                selectedColor: '#dddddd',
                values: test_data,
                enableZoom: true,
                showTooltip: true,
                scaleColors: ['#C8EEFF', '#006491'],
                normalizeFunction: 'polynomial'
            });
      }
    }); 
```

我正在通过 Ajax 接收一些`data`我想在我的 jQuery 地图上显示的内容`#vmap`。我创建了一些`test_data`在地图上效果很好的东西，但我似乎无法获得`data`与`test_data`.

我不确定数组格式到底是什么`data`，但是当我提醒它时，它会显示为：

```
US,7,US,9,US,10 
```

如何更改格式？

* * *

这是发送 JSON 数据的 PHP 页面：

```
$country_result = mysql_query("SELECT * FROM happiness ORDER BY id ASC");
  $country_array = array();
  while($row = mysql_fetch_array($country_result)) {
    $country_array[] = array($row[4], $row[2]);
  }

  echo json_encode($country_array); 
```

谢谢！

**编辑：**

这是控制台日志的屏幕截图。我不确定如何准确地阅读它。 ![在此处输入图像描述](../Images/4e77a875f638b416b762fde51589dd94.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:16:54.000

我猜你想买`key -> value`双。因此，在 PHP 中更改行

```
$country_array[] = array($row[4], $row[2]); 
```

和

```
$country_array[$row[4]] = $row[2]; 
```

我想，因为您在 PHP 中附加到一个数组，所以您在 JavaScript 中获得的实际数据`['US', 7, 'US', 9, 'US', 10]`并不`['US':7, 'US':9, 'US':10]`像您预期​​的那样。

# 编辑

现在我看到了你的更新。无论如何，您会得到数组数组而不是键值对数组（这在 JavaScript 中非常标准且常见）。按照我的建议试试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T22:17:14.790

从 PHP 来看`data`很可能是一个看起来像这样的二维数组：

```
[[US,7],[US,9],[US,10]] 
```

您可以通过这种方式将其转换为其他格式：

```
var newData = {};
for(var i=0; i<data.length; i++){
  newData[data[i][0]] = data[i][1];
} 
```

编辑：正如其他答案所暗示的，要做的事情显然是解决问题的 PHP 方面，而不是在 javascript 方面解决它。我留下我的答案，因为它可能会增加一些价值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T22:19:05.397

在您的 PHP 页面中，该行

```
$country_array[] = array($row[4], $row[2]); 
```

应该

```
 $country_array[] = array($row[4] => $row[2]); 
```

这将使您的 PHP 数组具有关联性，它将被 json_encoded 编码为 Javascript 对象，而不是您当前看到的 Javascript 数组。

# java - 多个 .replace 给出 NoSuchElementException

> ID：15604619
> 
> 赞同：1
> 
> 时间：2013-03-24T22:08:01.970
> 
> 标签：java, parsing

**编辑：** 整个方法是：

```
 public static String[] singlemultiplet(String filename, int numofzeros) throws IOException {//isolate notes between brackets
    Scanner inputmeasure = new Scanner(new DataInputStream(new FileInputStream(filename)));
        InputStream is = new BufferedInputStream(new FileInputStream(filename));
            BufferedReader bReader = new BufferedReader(new InputStreamReader(is));
            StringBuffer sbfFileContents = new StringBuffer();
            String line = null;
            int lineCount = 0;
    int j = 0;
        int[] cmn = new int[countbrackets(filename)];
        String[] numbers = new String[40];
        String[][] matrix = new String[20][120];
        String[][] matrix2 = new String[20][120];
        String[][] matrix3 = new String[20][120];
            line = inputmeasure.useDelimiter("\n").next();
            Scanner s = new Scanner(line).useDelimiter("U");
            matrix[0][0] = s.useDelimiter("\r").next();
            String ubar = "U|";
            matrix2[0][0] = matrix[0][0].replace("\\),","U").replaceAll("\\)","U").replace(ubar,"U");
            matrix3[0][0] = matrix2[0][0].replace("|","U");
            Scanner s2 = new Scanner(matrix3[0][0]).useDelimiter("U");
            String brack = "(";
            String[] multiplet = new String[countmultipletsandmeasures(filename) + numofzeros];
            String[] multiplet2 = new String[countmultipletsandmeasures(filename) + numofzeros];
            Arrays.fill(multiplet, "");
            int cmampluszeros = countmultipletsandmeasures(filename) + numofzeros;
             for (int i = 0; i < cmampluszeros; i++)
             {
              matrix3[0][0] = s2.useDelimiter("U").next();
              multiplet[i] = matrix3[0][0];

             }
             lineCount++;
                    sbfFileContents.append(line);

            String strContent = sbfFileContents.toString();
    try {
        return multiplet;
    } finally {
        is.close();
    }
} 
```

我想实现该方法返回`multiplet`包含`Matrix3[0]`要读入的行块的数组。该方法必须将行分块，如下所述，因此在遇到“）”或“|”时。

当我尝试阅读以下内容的第一行时`Matrix3[0]`：

```
(A#,A#,A#),(B#,B#,C#),(B#,B#,C#),(Bb,Bb,Cb)|(Ab,Ab,Ab),(Bb,Bb,Cb),(Bb,Bb,Cb),(Bb,Bb,Cb)| 
```

程序给出块

```
multiplet[i] 
```

作为

```
multiplet: (A#,A#,A#
multiplet: ,(B#,B#,C#
multiplet: ,(B#,B#,C#
multiplet: ,(Bb,Bb,Cb
multiplet: (Ab,Ab,Ab
multiplet: ,(Bb,Bb,Cb
multiplet: ,(Bb,Bb,Cb
multiplet: ,(Bb,Bb,Cb 
```

哪个是对的。但是当我尝试读入时： `(A#,A#,A#),(B#,B#,C#),(B#,B#,C#),(Bb,Bb,Cb)|A#,B#,C#,D#, E#,F#,G#, | ,A, , , , , , , , , , , , , , |`我得到一个`NoSuchElementException`. 正确的输出是：

```
multiplet: (A#,A#,A#
multiplet: ,(B#,B#,C#
multiplet: ,(B#,B#,C#
multiplet: ,(Bb,Bb,Cb
multiplet: A#,B#,C#,D#, E#,F#,G#,  
multiplet:   ,A,  , ,   ,  ,  ,  ,  ,  ,  , ,   ,  ,  , 
```

有谁知道为什么以及我应该怎么做才能获得正确的输出？

**编辑：**

调试会给我以下堆栈跟踪：

断点命中："thread=main", IOguitar.singlemultiplet(), line=2,769 bci=306 2,769 matrix3[0][0] = s2.useDelimiter("U").next();

主[1]步骤

> 步骤完成：“thread=main”, IOguitar.singlemultiplet(), line=2,770 bci=322 2,770 multiplet[i] = matrix3[0][0];

主[1]步骤

> 步骤完成：“thread=main”, IOguitar.singlemultiplet(), line=2,767 bci=333 2,767 for (int i = 0; i < cmampluszeros; i++)

主[1]步骤

> 步骤完成：断点命中："thread=main", IOguitar.singlemultiplet(), line=2,769 bci=306 2,769 matrix3[0][0] = s2.useDelimiter("U").next();

主[1]步骤

> 步骤完成：“thread=main”, IOguitar.singlemultiplet(), line=2,770 bci=322 2,770 multiplet[i] = matrix3[0][0];

主[1]步骤

> 步骤完成：“thread=main”, IOguitar.singlemultiplet(), line=2,767 bci=333 2,767 for (int i = 0; i < cmampluszeros; i++)

主[1]步骤

> 步骤完成：断点命中："thread=main", IOguitar.singlemultiplet(), line=2,769 bci=306 2,769 matrix3[0][0] = s2.useDelimiter("U").next();

主[1]步骤

> 步骤完成：“thread=main”, IOguitar.singlemultiplet(), line=2,770 bci=322 2,770 multiplet[i] = matrix3[0][0];

主[1]步骤

> 步骤完成：“thread=main”, IOguitar.singlemultiplet(), line=2,767 bci=333 2,767 for (int i = 0; i < cmampluszeros; i++)

主[1]步骤

> 步骤完成：断点命中："thread=main", IOguitar.singlemultiplet(), line=2,769 bci=306 2,769 matrix3[0][0] = s2.useDelimiter("U").next();

主[1]步骤

> 步骤完成：“thread=main”, IOguitar.singlemultiplet(), line=2,770 bci=322 2,770 multiplet[i] = matrix3[0][0];

主[1]步骤

> 步骤完成：“thread=main”, IOguitar.singlemultiplet(), line=2,767 bci=333 2,767 for (int i = 0; i < cmampluszeros; i++)

主[1]步骤

> 步骤完成：断点命中："thread=main", IOguitar.singlemultiplet(), line=2,769 bci=306 2,769 matrix3[0][0] = s2.useDelimiter("U").next();

主[1]步骤

> 步骤完成：“thread=main”, IOguitar.singlemultiplet(), line=2,770 bci=322 2,770 multiplet[i] = matrix3[0][0];

主[1]步骤

> 步骤完成：“thread=main”, IOguitar.singlemultiplet(), line=2,767 bci=333 2,767 for (int i = 0; i < cmampluszeros; i++)

主[1]步骤

> 步骤完成：断点命中："thread=main", IOguitar.singlemultiplet(), line=2,769 bci=306 2,769 matrix3[0][0] = s2.useDelimiter("U").next();

主[1]步骤

> 步骤完成：“thread=main”, IOguitar.singlemultiplet(), line=2,770 bci=322 2,770 multiplet[i] = matrix3[0][0];

主[1]步骤

> 步骤完成：“thread=main”, IOguitar.singlemultiplet(), line=2,767 bci=333 2,767 for (int i = 0; i < cmampluszeros; i++)

主[1]步骤

> 步骤完成：断点命中："thread=main", IOguitar.singlemultiplet(), line=2,769 bci=306 2,769 matrix3[0][0] = s2.useDelimiter("U").next();

主[1]步骤

> 步骤完成：“thread=main”, IOguitar.main(), line=2,662 bci=35,573 2,662 e.printStackTrace();

主[1]步骤

> 在 IOguitar.singlemultiplet(IOguitar.java:2769) 在 IOguitar.countmultipletn 在 java.util.Scanner.next(Scanner.java:1347) 在 java.util.Scanner.throwFor(Scanner.java:838) 的 java.util.NoSuchElementException (IOguitar.java:3121) 在 IOguitar.main(IOguitar.java:187)

步骤完成：“thread=main”, IOguitar.main(), line=2,668 bci=35,578 2,668 }

主要[1]

但是我现在该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:46:48.883

[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)是处理这种解析的一种更简单的方法（它就是为此而生的！）。`String`有一个方便的方法，`split(String regex)`它可以根据需要拆分字符串并将其放置在字符串数组中，就像您想要的那样。以下行将解决问题：

```
String[] multiplet = "(A#,A#,A#),(B#,B#,C#),(B#,B#,C#),(Bb,Bb,Cb)|(Ab,Ab,Ab),(Bb,Bb,Cb),(Bb,Bb,Cb),(Bb,Bb,Cb)|".split("(\\)|\\|)+"); 
```

正则表达式的解释：

```
\\) 
```

`\\`转义 the`)`所以它是一个文字“）”

```
| 
```

这意味着或使用正则表达式语言。

```
\\| 
```

文字“|”

```
("|" or ")")+ 
```

`+`表示括号内的任何内容都应该至少有一次并且是贪婪的（所以如果两个或更多）或 | 是相邻的，它将在所有这些上拆分，并且不会在它们之间留下空字符串。

# ruby-on-rails-3 - 在 ruby on rails 中保存并显示一组选项的答案

> ID：15604628
> 
> 赞同：0
> 
> 时间：2013-03-24T22:09:07.623
> 
> 标签：ruby-on-rails-3

我目前正在展示一组问题，每个问题都有多项选择答案。我试图让用户能够选择一个选项作为他们的答案，因此我需要将其存储在数据库中然后显示结果。

这是我当前观点的摘录：

```
<p><%= question.question %></p>
        <% question.choices.each do |item| %>

      <li><%= item.choice %></li>
      <% end %> 
```

这是我的 3 个控制器：

```
class Answer < ActiveRecord::Base
 attr_accessible :choice_id, :question_id
  belongs_to :choice 
  has_one :question, :through => :choice 
  end

 class Choice < ActiveRecord::Base
 attr_accessible :choice, :question_id, :answers_attributes
  belongs_to :question
  has_many :answers, :dependent => :destroy
   accepts_nested_attributes_for :answers
  end

  class Question < ActiveRecord::Base
   attr_accessible :question, :choices_attributes
    has_many :choices, :dependent => :destroy
    accepts_nested_attributes_for :choices, :reject_if => lambda { |a| a[:choice].blank? }
    end 
```

如何修改视图以便用户可以提交和创建和回答？为了创建答案，我必须在 questions_controller 中插入什么？帮助将不胜感激。如果需要，我可以提供更多信息。

非常感谢

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T02:51:59.307

鉴于您提供的信息量很少，很难提供比答案的基本知识更多的信息 - 因此，一般而言，您需要做以下事情：

1.  编写一个控制器动作，它接受一个选项 ID 作为（部分）它的参数，并使用它来创建一个答案。

2.  确保您的 routes.rb 文件中有一条指向该操作的路线。REST 标准可能是对 的 POST 请求`/answers`，但这可能适合也可能不适合您的应用程序的结构。

3.  在您的视图中添加一些东西 - 一个链接或一个表单，可能会向该路由发送请求。

# javascript - jquery加载excel文件

> ID：15604631
> 
> 赞同：0
> 
> 时间：2013-03-24T22:09:29.850
> 
> 标签：javascript, jquery, html

打开excel文件最简单的方法是什么，检查每一行中的每个单元格的一致性（例如column1必须在6和15之间 - 如果不是，那么不要绑定该行。一旦检查了所有行的一致性，然后仅绑定与检查匹配的行。

我想在客户端执行此操作，并且必须在 chrome 中工作

**更新 - 根据反馈，我愿意将文件放在服务器上并以某种方式从那里打开它，如果这使得这成为可能？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:20:10.323

也许这可以帮助： http: [//archive.plugins.jquery.com/project/csv2table](http://archive.plugins.jquery.com/project/csv2table)

祝你好运！

# django - 设置表单时遇到问题

> ID：15604635
> 
> 赞同：0
> 
> 时间：2013-03-24T22:09:56.273
> 
> 标签：django, django-forms

假设我们有一个基本的`Contact`日志`Call`模型：

**更新**：似乎我最初的问题没有提供足够的细节来解释我的问题，我已经用更完整的示例和关于我想要的详细信息对其进行了更新。

`# Models.py`

```
class Contact(model.Models):
    First = ...
    Last = ...
    Phone = ...

class Log(model.Models):
    contact = fields.Foreignkey(Contact)
    date = ...
    notes = ... 
```

`# urls.py`

```
url(r'^logcall/(?P<contact_id>\d+)/$', 'myapp.views.log_call',name='log_call'), 
```

`# views.py`

```
def log_call(request, contact_id):
    formset = modelform_factory(Log)
    form = formset(queryset=Log.objects.none(),initial={'contact':contact_id})
        if request.method == 'POST':
            form = formset(request.POST,request.FILES)
        if form.is_valid():
                form.save()
        return HttpResponseRedirect('/some/place')
    else:
        form = formset(queryset=Log.objects.none(), initial = {'contact':respondent_id,})
    return render_to_response('myform.html', {'formset':form,}) 
```

`# myform.html`

```
<form method="post" action="">
{{ formset.management_form }}
{% for form in formset %}
{{ form.id }}
{{ form.callid.as_hidden }}
{{ form.contact.as_hidden }}
{{ form.date }}
{{ form.notes }}
{% endfor %}
<button>Submit</button>
</form> 
```

我得到的是：

```
<form method="post" action="">
<select id="id_form-0-contact" name="form-0-contact">
<option value="" selected="selected">---------</option>
<option value="1011">1011</option>
<option value="31736">31736</option>
<option value="19729">19729</option>
<option value="8818">8818</option>
<option value="19731">19731</option>
<option value="1468">1468</option>
... and so on
    ...
<button>Submit</button>
</form> 
```

我想要的是以下内容：

```
<form method="post" action="">
<input type="hidden" id="id_form-0-contact" name="form-0-contact" value="contact_id" />
...
<button>Submit</button>
</form> 
```

因此，每次我加载页面时，它都会调用所有关系数据，当我只需要它包含联系人的隐藏值时，它会根据从 URL 传递的值识别 id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:23:56.270

您使用数据加载表单...

```
MyModelForm(instance=myInstanceModel) 
```

您可以使用实例参数来实例化表单，该表单会将来自该对象的初始数据放入表单中，而不是提供属性的字典。

另一个例子

```
object = myModel.objects.get(id=1)
MyModelForm(instance=object) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T22:40:20.800

您想要**更新**模型的视图，您正在寻找的是[`UpdateView`](https://docs.djangoproject.com/en/dev/ref/class-based-views/generic-editing/#updateview)

> 显示用于编辑现有对象的表单的视图，重新显示带有验证错误（如果有）的表单并保存对对象的更改。这使用从对象的模型类自动生成的表单（除非手动指定表单类）。-- Django 文档

例子：

```
from django.views.generic.edit import UpdateView
from myapp.models import Author

class AuthorUpdate(UpdateView):
    model = Author 
```

这些也可能有帮助：

*   [url 中没有 slug 的 Django 更新视图](http://pydanny.com/django-update-view-without-slug-in-the-url.html)
*   [Django 更新视图示例](https://gist.github.com/flaviamissi/1275204)

# javascript - 如何在 Rails simple_form 中实现 Jasny 的引导文件上传样式扩展？

> ID：15604636
> 
> 赞同：6
> 
> 时间：2013-03-24T22:10:03.850
> 
> 标签：javascript, ruby-on-rails, file-upload, carrierwave, simple-form

我想使用[Jasny 的 Twitter Bootstrap 扩展设置](http://jasny.github.com/bootstrap/javascript.html#fileupload)我的 Rails simple_form 图像上传字段的样式。我已经（成功地）使用 CarrierWave 上传图像。

目前，我的表单有效，并且代码看起来像这样（为了清楚起见，我删除了一些 html、一些表单字段并设计了错误消息代码）：

```
<%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => {class: "form-horizontal", :method => :put }) do |f| %>

  <%= f.input :username, :label => "username" %>

  <%= f.simple_fields_for :picture do |pic| %>
    <%= pic.input :image, :as => :file, :label => "upload a photo" %>
  <% end %>

  <%= f.input :current_password, :label => "enter password to confirm update(s)" %>
  <%= f.button :submit, "Update", class: "btn btn-success" %>

<% end %> 
```

“simple_fields_for :picture”部分产生以下 HTML：

```
<div class="control-group file optional">
  <label class="file optional control-label" for="user_picture_attributes_image">
    upload a photo
  </label>
  <div class="controls">
    <input class="file optional" id="user_picture_attributes_image" name="user[picture_attributes][image]" type="file">
  </div>
</div> 
```

要使用 Jasny 代码，我想也许我可以用他们文档中的代码替换“simple_fields_for :picture”部分，除了 - 在相当绝望的尝试中 - 我已经手动将它添加到 input-tag 中：id = user_picture_attributes_image" name="user[picture_attributes][image]"

```
<div class="fileupload fileupload-new" data-provides="fileupload">
  <div class="input-append">
    <div class="uneditable-input span3">
      <i class="icon-file fileupload-exists"></i>
      <span class="fileupload-preview"></span>
    </div>
    <span class="btn btn-file">
      <span class="fileupload-new">Select file</span>
      <span class="fileupload-exists">Change</span>
      <input type="file" id="user_picture_attributes_image" name="user[picture_attributes][image]"/>
    </span>
    <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
  </div>
</div> 
```

它不起作用（duh :D）。我不够熟练，无法深入理解 Jasny 的 bootstrap-fileupload.js 中的 javascript 部分发生了什么，也没有在 simple_form 的幕后工作，所以我不知道是否可以更改其中的某些内容以使其工作。一些谷歌搜索告诉我有人创建了扩展[rails-jasny-bootstrap-extension](https://github.com/developertown/rails-jasny-bootstrap-extension)，但遗憾的是除了原始的 css 和 js 之外还没有代码。在这里很难画出空白。

对于上下文：这里的资源是用户。我的 user.rb 看起来像这样（相关代码）：

```
class User < ActiveRecord::Base
  has_one :picture, as: :attachable, :dependent => :destroy
  accepts_nested_attributes_for :picture
end 
```

我的图片模型如下所示：

```
class Picture < ActiveRecord::Base
  attr_accessible :image, :remote_image_url, :remove_image, :thumb_width, :thumb_height
  attr_accessible :attachable_id, :attachable_type
  belongs_to :attachable, polymorphic: true
  mount_uploader :image, ImageUploader
end 
```

视觉上所需差异的屏幕截图（忽略样式）：

![截屏](../Images/7f3470c71bb071dff045b42c87a0b759.png)

[链接到 Jasny 的 bootstrap-fileupload.zip](http://bootstrap-server.jasny.net/bootstrap-fileupload.zip) 在此先感谢您的浏览，并为文字墙感到抱歉；让我知道是否需要添加任何其他信息。

（PS .：如果有人知道一个简单的替代方案，那也将不胜感激。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-22T12:03:38.933

您可以尝试使用 file.field 而不是输入。

从：

```
<%= f.simple_fields_for :picture do |pic| %>
  <%= pic.input :image, :as => :file, :label => "upload a photo" %>
<% end %> 
```

至：

```
<%= f.simple_fields_for :picture do |pic| %>
  <%= pic.file_field :image %>
<% end %> 
```

这不会从 simple_form 添加花哨的表单助手。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T23:45:55.740

尝试这个 ：

```
 <%= f.simple_fields_for :picture do |pic| %>

  <div class="fileupload fileupload-new" data-provides="fileupload">
  <div class="input-append">
  <div class="uneditable-input span3">
   <i class="icon-file fileupload-exists"></i> 
<span class="fileupload-preview"></span></div>
<span class="btn btn-file"><span class="fileupload-new">Select file</span>
<span class="fileupload-exists">Change</span>
<%= pic.input :image, :as => :file, :label => "upload a photo" %>
</span>
<a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
 </div>
 </div>

 <% end %> 
```

只需插入`erb`引导程序的 html 即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-26T19:11:37.483

如果您还没有找到合适的解决方案，这里是：

```
<%= f.input :picture, :label => 'Upload Picture' do %>
<div class="fileupload fileupload-new" data-provides="fileupload">
  <div class="input-append">
    <div class="uneditable-input span3">
      <i class="icon-file fileupload-exists"></i>
      <span class="fileupload-preview"></span>
    </div>
    <span class="btn btn-file">
      <span class="fileupload-new">Select file</span>
      <span class="fileupload-exists">Change</span>
      <%= f.file_field :picture %>
    </span>
    <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
  </div>
</div>
<% end %> 
```

这应该与您的其他表单字段完全一致。

# windows - Windows 批处理脚本 - 以日志友好的方式请求 UAC 管理员权限

> ID：15604640
> 
> 赞同：0
> 
> 时间：2013-03-24T22:10:28.903
> 
> 标签：windows, logging, batch-file, admin, uac

我在批处理脚本中向管理员请求以下内容：

```
: BatchGotAdmin
REM  --> Check for permissions
>nul 2>&1 "%SYSTEMROOT%\system32\cacls.exe" "%SYSTEMROOT%\system32\config\system"

REM --> If error flag set, we do not have admin.
if '%errorlevel%' NEQ '0' (
    echo Requesting administrative privileges...
    goto UACPrompt
) else ( goto gotAdmin )

:UACPrompt
    echo Set UAC = CreateObject^("Shell.Application"^) > "%temp%\getadmin.vbs"
    set params = %*:"=""
    echo UAC.ShellExecute "%~s0", "%params%", "", "runas", 1 >> "%temp%\getadmin.vbs"

    "%temp%\getadmin.vbs"
    exit /B

:gotAdmin
    if exist "%temp%\getadmin.vbs" ( del "%temp%\getadmin.vbs" )
    pushd "%CD%"
    CD /D "%~dp0" 
```

将输出通过管道传输到日志文件时 - 脚本中的这一点将其切断。有没有办法更改脚本以产生相同的效果（在批处理脚本中间请求 UAC 管理员权限），同时仍然保持日志文件按预期运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T09:08:13.413

我知道这个问题已经 8 个月大了，但是由于您似乎没有得到一个好的答案，所以我想无论如何我都会在寻找其他东西时加入它。

我同意 Magoo 的观点，因为我也不确定这`set params`条线路是否符合您的要求。我建议尝试这个：

在 UAC 开始时：

```
:UACPrompt
if '%1'=='UACdone' (shift & goto gotAdmin) 
```

然后在您的原始行之后：

```
echo Set UAC = CreateObject^("Shell.Application"^) > "%temp%\getadmin.vbs"
echo UAC.ShellExecute "%~0", "UACdone", "", "runas", 1 >> "%temp%\getadmin.vbs" 
```

为了清楚起见，应该使整个脚本看起来像这样：

```
: BatchGotAdmin
REM  --> Check for permissions
>nul 2>&1 "%SYSTEMROOT%\system32\cacls.exe" "%SYSTEMROOT%\system32\config\system"

REM --> If error flag set, we do not have admin.
if '%errorlevel%' NEQ '0' (
    echo Requesting administrative privileges...
    goto UACPrompt
) else ( goto gotAdmin )

:UACPrompt
    if '%1'=='UACdone' (shift & goto gotAdmin)
    echo Set UAC = CreateObject^("Shell.Application"^) > "%temp%\getadmin.vbs"
    echo UAC.ShellExecute "%~0", "UACdone", "", "runas", 1 >> "%temp%\getadmin.vbs"

    "%temp%\getadmin.vbs"
    exit /B

:gotAdmin
    if exist "%temp%\getadmin.vbs" ( del "%temp%\getadmin.vbs" )
    pushd "%CD%"
    CD /D "%~dp0" 
```

将它放在脚本的顶部，如果您没有管理员权限，它应该生成另一个请求管理员权限的实例。您需要做的就是将您的命令放在下面。这具有额外的优势，即不需要您随脚本一起重新分发任何其他工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:28:55.947

我的方法是检查 shell 脚本中的提升，如果没有提升则失败；例如

```
@echo off
setlocal enableextensions
isadmin -q
if %ERRORLEVEL% NEQ 1 goto :ERROR
...
[do stuff requiring elevation]
....
goto :DONE

:ERROR
echo You must run this script from an elevated command window.

:DONE
endlocal 
```

您可以从这里获取 isadmin.exe：[Windows Admin Script Tools](http://www.westmesatech.com/wast.html)

账单

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T23:03:00.387

我担心顺序

```
set params = %*:"=""
echo UAC.ShellExecute "%~s0", "%params%", "", "runas", 1 >> "%temp%\getadmin.vbs" 
```

因此**应该**做的是将环境变量“params [space]”设置为值**`[space]command-parameters supplied`：“=”**

在以下行中，您使用的环境变量“params”可能不会被设置。因此，我不确定`getadmin.vbs`是否正确生成。

a 任何一侧的空格`SET`都很重要...

# c# - 在 Nhibernate 中映射本地化表

> ID：15604645
> 
> 赞同：1
> 
> 时间：2013-03-24T22:10:57.197
> 
> 标签：c#, nhibernate, fluent-nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

我正在构建一个本地化的应用程序。所有数据都需要以不同的语言提供。作为一种存储模型，我尝试使用 Nhibernate，因为它比 Entity Framework 具有更好的性能。我在数据库中存储一个根节点以获取实体的唯一 ID，然后我有第二个表，其中包含每种语言的子节点（语言环境表）。

我的数据库表如下所示：

```
Country
   Int Id;
Country_Locale
   Int Id;
   Int CountryId;
   String LangCode;
   String Name;

City
   Int Id;
   Int CountryId;
City_Locale
   Int Id;
   Int CityId;
   String LangCode;
   String Name; 
```

我喜欢的实体看起来像

```
Country
  Int Id (from Coutry table)
  String LangCode (from locale table)
  String Name (from locale table)
  IList<City> Cities (Referenced to City entity)
City
  Int Id (From City table)
  String LangCode (from locale table)
  String Name (from locale table)
  Country Country (Referenced to Country entity)
  Int CountryId (From country table) 
```

我意识到我无法映射上述内容，但这是我更喜欢的一种结构。我怎么能做这个映射或有其他建议。

** 编辑了数据库表格布局，使其更加清晰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T01:57:05.357

我对您第一次尝试使用单独的表格采取了类似的方法，最后我坚持使用它并且效果很好。这是我的 Fluent 映射文件（我使用的是 Fluent NHibernate）和一些用于从数据库中检索数据的示例代码：

```
using FluentNHibernate.Mapping;

namespace Core.Mapping
{    
    public class CountryMap : ClassMap<Country>
    {
        public CountryMap()
        {
            Id(x => x.Id);

            Map(x => x.IsoCode)
                .Length(2)
                .Not.Nullable();

            HasMany(x => x.Translations)
                .Fetch.Join()
                .Not.LazyLoad()
                .Cascade.AllDeleteOrphan();
        }
    }
} 
```

国家/地区的翻译实际上存储为一个单独的类/表，我意识到这并不完全是您正在寻找的，但它工作得很好，因为最后***您有一个存储所有翻译的表***。以下是 Fluent 映射类：

```
using FluentNHibernate.Mapping;

namespace Core.Mapping
{
    public class CountryTranslationMap : ClassMap<CountryTranslation>
    {
        public CountryTranslationMap()
        {
            Id(x => x.Id);

            Version(x => x.LastModified);

            Map(x => x.Culture)
                .Length(2)
                .Not.Nullable();

            Map(x => x.Name)
                .Length(50)
                .Not.Nullable();

            References(x => x.Country);
        }
    } 
```

}

以下是我的数据访问层中的一些示例，用于通过文化或 ISO 代码检索国家/地区（这里我使用 NHibernate QueryOver 语法）：

```
 public IList<Country> GetAll(string culture)
    {
        var countryLanguageValue = new CountryTranslation();

        IList<Country> results = UnitOfWork.CurrentSession.QueryOver<Country>()
            .Fetch(x => x.Translations).Eager
            .JoinAlias(q => q.Translations, () => countryLanguageValue, JoinType.LeftOuterJoin)
            .Where(() => countryLanguageValue.Culture == culture)
            .OrderBy(x => x.DisplayOrder).Asc
            .List();

        return results;

    }

    public Country GetCountryByIsoCode(string isoCode)
    {
        var result = UnitOfWork.CurrentSession.QueryOver<Country>()
            .Where(x => x.IsoCode == isoCode)
            .List()
            .FirstOrDefault();

        return result;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:43:27.933

我想这里的棘手之处在于您希望您`CountryId`可以从`City`实体访问。我不明白为什么，因为您已经提到了您的国家，并且只需`Country.Id`从您的国家中进行操作，您`City`就会拥有它。

```
var countryID = myCityEntity.Country.Id; 
```

顺便说一句，如果您出于某种特定原因需要它，您甚至不需要映射它，只需以[域驱动设计](http://en.wikipedia.org/wiki/Domain-driven_design)方式而不是普通 POCO 的方式思考，并让实体执行此操作。

```
public int CountryId {
    get {
        return this.Country.Id;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T02:02:07.797

您可以将自己的计算属性添加到您的实体中，以从 City 的子 Country 中检索 CountryId 等内容，并在 City 对象上拥有 CountryId 属性，因为映射器将用实际 Country 实体替换该 Id 字段。

```
public int CountryId { get { return this.Country.Id; } } 
```

不幸的是，我认为如果您在某些（对我来说似乎是不必要的）、数据库表而不是其他表上保留 _ 前缀，那么自动映射会很痛苦；如果您可以消除您的表看起来非常适合自动映射，如本指南在其 wiki 中所述：

[https://github.com/jagregory/fluent-nhibernate/wiki/Auto-mapping](https://github.com/jagregory/fluent-nhibernate/wiki/Auto-mapping)

# algorithm - k 表示聚类算法

> ID：15604647
> 
> 赞同：2
> 
> 时间：2013-03-24T22:11:10.980
> 
> 标签：algorithm, cluster-analysis, data-mining, k-means, pearson

我想对一组 10 个数据点执行 ak 均值聚类分析，每个数据点都有一个由 4 个数值组成的数组与之关联。我使用 Pearson 相关系数作为距离度量。我做了 k 均值聚类算法的前两个步骤，它们是：

1）选择k个簇的一组初始中心。【我随机选择了两个初始中心】

2）将每个对象分配给具有最近中心的集群。[我使用 Pearson 相关系数作为距离度量——见下文]

现在我需要帮助理解算法的第三步：

3）计算集群的新中心：

![新中心公式](../Images/4b4f21bb05b991a9c8b2a03a608707ba.png) ![（健康）状况](../Images/2f2cde46ad211e977085f76c27691cb9.png)

其中 X，在这种情况下是一个 4 维向量，n 是集群中数据点的数量。

对于以下数据，我将如何计算 C(S)？

```
# Cluster 1
A   10  15  20  25  # randomly chosen centre
B   21  33  21  23
C   43  14  23  23
D   37  45  43  49
E   40  43  32  32

# Cluster 2
F  100  102 143 212 #random chosen centre
G  303  213 212 302
H  102  329 203 212
I  32   201 430 48
J  60   99  87  34 
```

k 均值算法的最后一步是重复第 2 步和第 3 步，直到没有对象更改集群，这很简单。

我需要第 3 步的帮助。计算集群的新中心。如果有人可以通过并解释如何计算其中一个集群的新中心，那将极大地帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T08:41:19.130

不要将其他距离函数放入 k-means 中。

K-means 旨在最小化“平方和”，**而不是距离**！通过最小化平方和，它会巧合地最小化 Squared Eudlidean 和因此 Euclidean 距离，但这可能不适用于其他距离，因此**K-means 在与任意距离函数一起使用时可能会停止收敛**。

同样：**k-means 不会最小化任意距离**。它最小化了恰好与平方欧几里得距离一致的“平方和”。

如果您想要一个为任意距离函数定义良好的算法，请考虑使用[k-medoids (Wikipedia)](https://en.wikipedia.org/wiki/K-medoids)，一个**k-means 变体**。PAM 保证与任意距离函数收敛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T00:03:00.723

对于每个具有 n 维点的聚类，计算一个 n 维质心以获得质心。在您的示例中，有 4 维点，因此质心是 4 维中每一个的平均值。对于集群 1，质心为：(30.20, 30.00, 27.80, 30.40)。例如，第一个维度的平均值计算为 (10+21+43+37+40)/5 = 30.20。

有关更多信息，请参阅[有关 K-Means 聚类的 Wikipedia 文章](http://en.wikipedia.org/wiki/K-means_clustering)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T22:27:15.153

步骤 3 对应于计算每个集群的*平均值*。对于集群 1，您将得到新的集群中心`(B+C+D+E) / 4`，即`(35.25 33.75 29.75 21.75)`，即分别对集群中所有点的每个分量求和，然后将其除以集群中的点数。

聚类中心（`A`对于聚类 1）通常*不是*新聚类中心计算的一部分。

# javascript - javascript嵌套onclick

> ID：15604648
> 
> 赞同：0
> 
> 时间：2013-03-24T22:11:12.057
> 
> 标签：javascript, html

我有这个代码：

```
<td onclick="Test()">
  <img src="test.jpg" onclick="Test2(); return false;"><br>
  Rest of the cell with some text.
</td> 
```

当我单击图像时，T​​est() 也会被触发，因为我也在单击表格单元格。如何证明这一点？如果我单击图像，我希望 test2() 触发，如果我单击表格单元格中的其他位置，则应该触发 test()。

编辑：即使返回 false，Test() 仍然被触发（在 Chrome 中测试）！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T22:12:43.420

如果`Test2()`返回 false 则点击不会冒泡`Test()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T22:13:14.750

简短的回答：

```
<img src="test.jpg" onclick="Test2(); return false;"> 
```

长答案：

事件顺序 - [http://www.quirksmode.org/js/events_order.html](http://www.quirksmode.org/js/events_order.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-25T23:04:24.960

我更喜欢使用 eventListeners 和 event.stopPropagation() 的方式，因为我读过一些浏览器不接受`return false`，而且它[也不是一个非常明确的操作](https://stackoverflow.com/a/128966/4808079)。正如[亚当所说](https://stackoverflow.com/a/15604667/4808079)，阅读事件传播是值得的。

```
<div id="clickme"></div>

<script>
document.getElementById("clickMe").addEventListener("click", function(event) {
  event.stopPropagation();
  //event.preventDefault();  this is the same as return false;
});
</script> 
```

# c# - C# RushHour 迭代深化、优化

> ID：15604651
> 
> 赞同：0
> 
> 时间：2013-03-24T22:11:32.303
> 
> 标签：c#, algorithm, artificial-intelligence

我必须使用迭代深化搜索来解决高峰时间问题，我正在为每一步生成新节点，一切正常，除了计算所有内容需要太多时间，原因是我正在生成重复节点。任何想法如何检查重复？

首先我从根开始，然后有一种方法检查每辆车是否可以移动它，如果是，则从当前节点创建新节点，但是具有有效移动的一辆车替换为具有新坐标的新车.

问题是算法越深，重复的动作就越多。

我试图不更换汽车，但使用了与根节点中使用的相同的集合，但随后汽车仅朝一个方向移动。

我认为我需要以某种方式绑定汽车收藏，但不知道如何。

[编码](http://pastebin.com/jiuVj87v)

任何想法如何停止重复？

题外话：我是 C# 新手（阅读了几个教程，然后已经使用了 2 天）所以你能告诉我我做错了什么或者我不应该做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:47:49.730

如果你想坚持迭代深化，那么最简单的解决方案可能是构建一个哈希表。然后你需要对每个新节点做的就是

```
NewNode = GenerateNextNode
if not InHashTable(NewNode) then
  AddToHashTable(NewNode)
  Process(NewNode) 
```

或者，RushHour 中可能的位置（节点）数量相当少（假设您使用标准板尺寸），并且可以相当容易地生成所有可能（和不可能！）的板。然后，您可以从“解决方案”状态开始并向后工作（勾选所有可能的“父”状态），直到达到开始状态，而不是迭代深化。通过处理可能的状态表，您永远不会生成重复，并且通过在访问每个状态后标记每个状态，您永远不会重新访问状态。

# git - Redmine 项目存储库 404 错误

> ID：15604653
> 
> 赞同：4
> 
> 时间：2013-03-24T22:11:46.937
> 
> 标签：git, redmine

我正在配置 redmine 从关联的 git 存储库中提取提交历史记录。我已经设置了一个本地镜像。我在项目设置>>存储库选项卡中定义了镜像的路径。但是当我浏览到项目的存储库选项卡时，我得到：

> 404
> 
> 在存储库中找不到条目或修订。

生产日志显示：

```
Started GET "/projects/allsaints/repository" for 108.58.11.138 at 2013-03-24 17:51:27 -0400
Processing by RepositoriesController#show as HTML
  Parameters: {"id"=>"allsaints"}
  [1m[35m (0.1ms)[0m  SELECT MAX(`settings`.`updated_on`) AS max_id FROM `settings` 
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`type` IN ('User', 'AnonymousUser') AND `users`.`id` = 1 AND (users.status = 1) LIMIT 1[0m
  Current user: Shawn (id=1)
  [1m[35mProject Load (0.1ms)[0m  SELECT `projects`.* FROM `projects` WHERE `projects`.`identifier` = 'allsaints' LIMIT 1
  [1m[36mRepository Load (0.1ms)[0m  [1mSELECT `repositories`.* FROM `repositories` WHERE `repositories`.`project_id` = 3 AND (is_default = 1) LIMIT 1[0m
Shelling out: '/usr/local/git/bin/git' '--git-dir' '/Library/WebServer/Sites/redmine2/extra/repositories/allsaints.git/' '-c' 'core.quotepath=false' '-c' 'log.decorate=no' 'log' '--no-color' '--encoding=UTF-8' '--date=iso' '--pretty=fuller' '--no-merges' '-n' '1'
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mUPDATE `repositories` SET `root_url` = '/Library/WebServer/Sites/redmine2/extra/repositories/allsaints.git/', `extra_info` = '---\nextra_report_last_commit: \'0\'\n' WHERE `repositories`.`type` IN ('Repository::Git') AND `repositories`.`id` = 21[0m
  [1m[35m (0.1ms)[0m  COMMIT
Shelling out: '/usr/local/git/bin/git' '--git-dir' '/Library/WebServer/Sites/redmine2/extra/repositories/allsaints.git/' '-c' 'core.quotepath=false' '-c' 'log.decorate=no' 'branch' '--no-color' '--verbose' '--no-abbrev'
  [1m[36mEnabledModule Load (0.2ms)[0m  [1mSELECT name FROM `enabled_modules` WHERE `enabled_modules`.`project_id` = 3[0m
Shelling out: '/usr/local/git/bin/git' '--git-dir' '/Library/WebServer/Sites/redmine2/extra/repositories/allsaints.git/' '-c' 'core.quotepath=false' '-c' 'log.decorate=no' 'ls-tree' '-l' 'HEAD:'
  Rendered common/error.html.erb within layouts/base (0.3ms)
  [1m[35mUserPreference Load (0.2ms)[0m  SELECT `user_preferences`.* FROM `user_preferences` WHERE `user_preferences`.`user_id` = 1 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.`id` = `members`.`project_id` LEFT OUTER JOIN `member_roles` ON `member_roles`.`member_id` = `members`.`id` LEFT OUTER JOIN `roles` ON `roles`.`id` = `member_roles`.`role_id` WHERE `members`.`user_id` = 1 AND (projects.status<>9) ORDER BY projects.name[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(DISTINCT `versions`.`id`) FROM `versions` LEFT OUTER JOIN `projects` ON `projects`.`id` = `versions`.`project_id` WHERE (projects.id = 3 OR (projects.status <> 9 AND ( versions.sharing = 'system' OR (projects.lft >= 1 AND projects.rgt <= 2 AND versions.sharing = 'tree') OR (projects.lft < 1 AND projects.rgt > 2 AND versions.sharing IN ('hierarchy', 'descendants')) OR (projects.lft > 1 AND projects.rgt < 2 AND versions.sharing = 'hierarchy'))))
  [1m[36mWiki Load (0.1ms)[0m  [1mSELECT `wikis`.* FROM `wikis` WHERE `wikis`.`project_id` = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `boards` WHERE `boards`.`project_id` = 3
Completed 404 Not Found in 108ms (Views: 40.1ms | ActiveRecord: 2.7ms) 
```

我的理解是，可以通过检查 production.log 的所有者来验证正在运行的用户 redmine。取出这些 Shelling out: 条目中的任何一个，剥离单引号并运行生成的命令，因为该用户会产生正确的输出。

那么为什么会出现 404 错误呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:15:29.440

这确实是一个权限问题。乘客默认启用[用户切换](http://www.modrails.com/documentation/Users%20guide%20Apache.html#PassengerUserSwitching)，以便 rails 应用程序运行`config/environment.rb`. 让我感到困惑的是应用程序没有继承该用户的所有组成员身份，而是默认情况下该组显式设置为该用户的主要组。我正在使用组权限来访问这些文件。将[PassengerGroup](http://www.modrails.com/documentation/Users%20guide%20Apache.html#_passengergroup_lt_group_name_gt)指令插入到该站点的虚拟主机块中，明确设置了正确的组，为我解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-01T13:08:05.217

我也有同样的问题，是权限问题。您应该将存储库移动到另一个位置，例如 /tmp/xxx.git 我在我的主目录中授予了对存储库的完全权限，但由于 redmine 无法读取我的主目录而出现错误。

# c# - 方法不会从数组中提取正确的数据

> ID：15604658
> 
> 赞同：0
> 
> 时间：2013-03-24T22:12:21.860
> 
> 标签：c#, arrays, for-loop

所以基本上发生的事情是我的代码编译并运行良好。但是当它运行为 minScore 和 minName 变量存储的值时，它保持为 0

```
static void Main(string[] args)
{
   int count = 0;
   string[] names = new string[MAX_SIZE];
   int[] scores = new int[MAX_SIZE];

   string name;
   int sum = 0;
   int minScore = 0;
   int maxScore = 0;
   string minName = string.Empty;
   string maxName = string.Empty;
   string input;
   int score;

   Console.WriteLine("===============Saturday Night Coders================");
   Console.WriteLine("===============Bowling Score Program================");

   for (int i = 0; i < MAX_SIZE; i++)
   {
      Console.WriteLine("\n Please Enter a name and a score separated by a space");
      Console.WriteLine("Enter a blank line when finished");

      input = Console.ReadLine();

      if (input == "")
      {
         count = i;
         Console.WriteLine("===========INPUT COMPLETE=========");
         break;
      }

      string[] splitInput = input.Split();

      name = splitInput[0];
      score = int.Parse(splitInput[1]);
      scores[i] = score;
      names[i] = name;
      sum += score;
      if (minScore >= score)
      {
         minScore = score;
         minName = name;
      }

      if (maxScore <= score)
      {
         maxScore = score;
         maxName = name;
      }
      count = i + 1;
    }

      double average = sum / count;
      Console.WriteLine("Here are the scores for this game");
      PrintScores(names, scores, count);
      Console.WriteLine("Congratulations {0}, your score of {1} was the highest",maxName, maxScore);
      Console.WriteLine("{0} , your score of {1} was the lowest, Maybe you should find a new hobby",minName, minScore);
      Console.WriteLine("\n The team average was {0:f2}", average);
      Console.WriteLine("Press any key to continue...");
      Console.ReadKey();
    }

    static void PrintScores(string[] names, int[] scores, int count)
    {
        for (int i = 0; i < count; i++)
        {
            Console.Write("{0} \t {1}", names[i], scores[i]);
            if (scores[i] == MAX_SCORE)
            {
                Console.WriteLine("*");
            }
            else
            {
                Console.WriteLine("");
            }
            Console.WriteLine();
        }
    }
} 
```

我似乎无法弄清楚为什么 for 循环适用于 maxName 和 maxScore 语句，但不适用于 minName 和 minScore 语句。任何帮助深表感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T22:19:27.280

而不是这段代码：

```
 int minScore = 0;
 int maxScore = 0; 
```

这是一个更好的做法

```
 int minScore = int.MaxValue;
 int maxScore = int.MinValue; 
```

所以任何值都小于初始最小值，任何值都大于初始最大值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T22:17:09.867

我相信您在将默认值设置为 0 时可能犯了一个逻辑错误。`minScore`如果是这种情况，0 将永远不会高于或等于任何高于 0 的分数：

```
if (minScore >= score) 
```

实际上是

```
if (0 >= score) 
```

请尝试以下操作：

```
if (minScore == 0 || minScore >= score) 
```

# scala - Scala：运算符 foldl 是中缀吗？

> ID：15604663
> 
> 赞同：2
> 
> 时间：2013-03-24T22:12:55.320
> 
> 标签：scala, fold

用它看代码`foldl`很难理解它的语法，例如：

```
 def lstToMap(lst:List[(String,Int)], map: Map[String, Int] ):Map[String, Int] = {
    (map /: lst) (addToMap)
  } 
```

是`/:`中缀运算符吗？`(map /: lst)`部分应用是什么意思？为什么我不能这样打电话：

```
`/:  map lst addToMap` 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T00:33:39.133

以字符结尾的方法名称`:`可以用在它们绑定到的实例的左侧（即，它们关联到右侧）。在这种情况下，`/:`是一个[方法`List`](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.List)。根据 Scaladoc：

> 注意：/: 是 foldLeft 的替代语法；z /: xs 与 xs foldLeft z 相同。

您所写内容的替代方法是：

```
lst./:(map)(addToMap) 
```

编辑：和 foldLeft 的另一种选择：

```
lst.foldLeft(map)(addToMap) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T03:11:59.343

是的，`/:`可以用作中缀运算符。但是，*折叠*操作需要**三个**参数：

1.  要折叠的序列
2.  减少的初始值
3.  用于折叠的函数

使用中缀，您只能指定这三个参数中的两个：序列（即接收者）和初始值。作为部分应用程序的事实`(map /: lst)`反映了您仍然缺少论点的事实。下面是一个数字序列的乘积示例，从初始值 1 开始：

```
(1 /: xs)(_*_) 
```

由于 Scala 支持函数字面量的花括号，您还可以使用它来使函数参数看起来更像函数体：

```
(1 /: xs) { (x, y) =>
    x * y
} 
```

# javascript - 用一个数字乘一个字母

> ID：15604672
> 
> 赞同：0
> 
> 时间：2013-03-24T22:13:33.647
> 
> 标签：javascript

试图绕过我正在查看的一些 JavaScript 代码。我看到这样的事情：

```
var myVariable = "X";
var result = myVariable * 6; 
```

来自 C# 背景，这对我来说是新的。有人可以给我一个关于这里发生了什么的快速入门吗？我猜**结果**将等于字母表中的字母位置乘以 6，我是正确的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T22:15:48.597

结果将是`NaN`因为“X”不是数字；将字符串与数字相乘将始终返回`NaN`。

更多信息：[http ://es5.github.com/](http://es5.github.com/#x11.5.1)

> * 运算符执行乘法，产生其操作数的乘积。乘法是可交换的。由于有限的精度，乘法在 ECMAScript 中并不总是关联的。
> 
> 浮点乘法的结果受 IEEE 754 二进制双精度算术规则的约束：
> 
> *   **如果任一操作数为 NaN，则结果为 NaN。**

* * *

如果你想得到字母在英文字母表中的位置，试试[这个](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/charCodeAt)：

```
myVariable.toUpperCase().charCodeAt(0) - 65; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T22:17:12.803

> 我猜结果将等于字母表中的字母位置乘以 6，我是正确的吗？

不。JS 是弱类型的，并且值被隐式类型转换以匹配运算符（此处为[乘法](http://es5.github.com/#x11.5)）。在这种情况下，字符串`"X"`将被[转换为数字](http://es5.github.com/#x9.3)- 导致`NaN`它不是有效的数字文字。`result`那么也会`NaN`如此。

要获得字母表中的位置，您可以使用带有非十进制基数的[`parseInt`函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)`parseInt("X", 36)-10`( ) 或[`charCodeAt`字符串方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/charCodeAt)( `"X".charCodeAt(0)-65`)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T22:17:48.473

我认为`s`重复字符串的最简单解决方案`n`是：

```
Array(n+1).join(s) 
```

再次阅读您的问题：将第一个字母的字符代码`s`乘以`n`：

```
s.charCodeAt(0) * n 
```

要获取与该乘法字符码相对应的字符：

```
String.fromCharCode(s.charCodeAt(0) * n) 
```

# android - Eclipse 调试 Android 应用程序 - 调试器显示错误的行执行

> ID：15604674
> 
> 赞同：0
> 
> 时间：2013-03-24T22:13:47.210
> 
> 标签：android, eclipse, debugging, dalvik

在我的应用程序中实现 Twitter 集成时，我发现了 Eclipse 调试器的以下奇怪之处。这是什么原因造成的？

我正在使用此 AsyncTask 使用 twitter4j 3.0.3 从 twitter 获取请求令牌。

```
 public class TwitterRequestAsync extends AsyncTask<Void, Void, RequestToken> {

        private Context context;

        public TwitterRequestAsync(Context context) {

            this.context = context;
        }

        @Override
        protected RequestToken doInBackground( Void... params ) {

            Twitter twitter = getTwitter();     // getTwitter() is in enclosing class
            try {
                RequestToken token = twitter.getOAuthRequestToken();
                return token;
            }
            catch (TwitterException e) {
                Log.e( TAG, e.getMessage(), e );
                return null;
            }
        }

        @Override
        protected void onPostExecute( RequestToken result ) {

            super.onPostExecute( result );
            if ( result != null ) {
                // stuffs concerning request token here
            }
        }

    } 
```

当我调试此代码时，似乎在执行 getOAuthRequestToken() 时引发了异常，并且调试器显示执行的下一行在 catch 子句中，返回 null；

然而，返回给 onPostExecute(...) 的结果是一个有效的请求令牌，所以调试器正在做一些奇怪的事情。我已经清理了我的项目并多次重新启动 Eclipse，但这种行为没有改变。我坏了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:48:23.947

正如您的自我回答所指出的，这是一个已知问题。我想指出它（和其他怪癖）记录在 Dalvik 文档中。您可以以[官方但原始](https://android.googlesource.com/platform/dalvik/+/master/docs/debugger.html)的形式找到它，或者以[非官方但格式化](http://milk.com/kodebase/dalvik-docs-mirror/docs/debugger.html)的形式找到它——跳至“已知问题和限制”。

如果文档更突出，那就太好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T22:13:47.210

这是一个已知的问题。看来这可能是 Dalvik VM 的问题。该方法的最后一个返回语句显示在调试器中执行。

将 doInBackground 正文更改为：

```
 @Override
        protected RequestToken doInBackground( Void... params ) {

            Twitter twitter = getTwitter();
            RequestToken token = null;
            try {
                token = twitter.getOAuthRequestToken();
            }
            catch (TwitterException e) {
                Log.e( TAG, e.getMessage(), e );
            }
            return token;
        } 
```

使执行看起来按预期进行。

请参阅[https://groups.google.com/forum/?fromgroups=#!topic/android-developers/DEU6JmdyFyM](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/DEU6JmdyFyM)以获取有关该问题的旧提以及指向更早提及的链接。[终于有人在https://code.google.com/p/android/issues/detail?id=34193](https://code.google.com/p/android/issues/detail?id=34193)为此创建了一个问题。

# css - 流体网格 - 我如何在响应式网页设计中使用它们？

> ID：15604680
> 
> 赞同：3
> 
> 时间：2013-03-24T22:14:27.943
> 
> 标签：css, grid, responsive-design, media-queries, fluid

请原谅我，但有人可以向我解释流体网格的用途，例如 cssgrid 上的特色。通过网格，我指的是那些列，有些是 9 列，有些是 12 列，有些是 24 列......

1）。网格是否用作背景或模板，以正确调整 DIVS 的大小和位置？

2）。在设计响应式网站时使用流体网格（9、12、24 列）是否必不可少，或者我可以只使用 CSS3 和媒体查询来定义断点吗？

3）。例如，列数之间有什么区别，为什么我要使用 9 列而不是 24 列。列数越高内容越多越好吗？

4）。为什么有这么多 Fluid Grid 发电机可用？是因为每一个都更好还是在某些方面不同？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T00:23:09.380

> 1）。网格是否用作背景或模板，以正确调整 DIVS 的大小和位置？

是的，差不多就是这样。您可以将网格想象成一个不可见的模板，以帮助调整 div 的大小和位置。由于您正在谈论响应式设计，因此网格列的宽度会有所不同，具体取决于浏览器浏览器窗口的宽度。

> 2）。在设计响应式网站时使用流体网格（9、12、24 列）是否必不可少，或者我可以只使用 CSS3 和媒体查询来定义断点吗？

网格旨在简化您的生活，但没有什么可以阻止您推出自己的解决方案，或者将自定义 CSS 样式与现成的流体网格框架混合使用

> 3）。列数之间有什么区别，例如，为什么我要使用 9 列而不是 24 列。列数越高内容越多越好吗？

您可以想象对于给定的窗口宽度，更多的列 = 更窄的列。您可能会发现更多的列可以让您更好地控制给定的页面布局，这取决于您的项目的具体情况。实际上，由于每个网格列之间的间距或间距，更多的列实际上会给您更少的内容空间。如果您正在考虑包括移动设备在内的响应式设计，那么在某些时候大多数网格框架开始将列显示为垂直堆栈，即：
1-2-3
变为
1
2
3

将手持屏幕分成 9 个垂直列不会很有用

> 4）。为什么有这么多 Fluid Grid 发电机可用？是因为每一个都更好还是在某些方面不同？

部分是个人喜好，您可能喜欢一个选项而不是另一个选项，部分是不同的功能。一些框架，如[Foundation](http://foundation.zurb.com)或[Bootstrap](http://twitter.github.com/bootstrap/)，带有许多额外的 CSS 样式以及您可能希望使用的额外 javascript 资源。

玩得开心……这是网页设计的有趣时刻！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T19:31:26.887

深入了解 ETHAN MARCOTTE - [RWD 上的 Alist Apart。](http://alistapart.com/article/responsive-web-design)

# c# - ASP.NET MVC 网站和 WCF Web 服务 - 共享功能

> ID：15604682
> 
> 赞同：0
> 
> 时间：2013-03-24T22:14:51.983
> 
> 标签：c#, asp.net-mvc, wcf, web-services, architecture

我有以下情况：我必须创建一个网站和一个 Web 服务，它将*`share a part of the functionalities`*.

这就是我不想写两次代码的原因。

我想到了以下架构：

**MyApp.BusinessLogic** --> 这里我们将 DataModels 保存到数据库中

**MyApp.DataAccess** -> 数据模型 & 实体 & 映射

* * *

**MyApp.UI.Models** -> ViewModels

**MyApp.UI.ServiceLayer** -> 访问业务逻辑，为网站创建 UI 视图模型，并在业务逻辑层的帮助下将视图模型转换回数据模型以保存

**我的应用程序网站**

* * *

**MyApp.WS.Models** ->WS 模型，这些将是客户端和 WS 之间传递的对象

**MyApp.WS.ServiceLayer** -> 访问业务逻辑，为 Web 服务创建 WS 模型，并在业务逻辑层的帮助下将 WS.Models 转换回 DataModel 以进行保存

**MyApp.Web服务**

* * *

架构是否矫枉过正？我会遇到什么问题？ASP.NET MVC 网站中的控制器会有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:21:53.313

当我设计我的应用程序时，我会这样做。我唯一的问题是将模型复制到视图模型中。克服这个问题的最佳方法是使用 AutoMapper。

我会创建一些单元测试，因为在更改服务时破坏应用程序的风险很高（反之亦然）。单元测试会在早期告诉你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T22:22:43.390

基本上定义:)

如果你想减少代码使用，为什么不创建你的服务，然后在应用程序中使用它呢？

所以如果你有类似的东西......

Foo.DataAccess
-Foo.BusinessLogic
--Foo.ServiceLayer

然后将其引用：
Foo.WebService（包括用于查看/更新的模型......但可能在外部简化）

然后使用
Foo.WebApp
并让这个消费 Foo.Webservice 代表它进行数据调用

拥有 UI 和 Web 服务模型会增加您的代码重复，您可以使用 Fluent 验证之类的东西来让服务处理您的验证，并增强基本验证系统。

# eclipse - 在 Eclipse 中重构项目结构后加载资源

> ID：15604687
> 
> 赞同：0
> 
> 时间：2013-03-24T22:15:15.233
> 
> 标签：eclipse, buildpath

我最近更改了 Eclipse 项目中几个包的构建路径。然而，最终文件结构应该保持不变。所以曾经的包 main.java.edu.umb.cs 现在是 edu.umb.cs。之前所有链接都运行良好，但现在我收到无法找到 Tokanagrammar.fxml 的错误。以下是 Tokanagrammar.java（下图中最顶层的扩展包）：

```
..getResource("../../../../resources/fxml/Tokanagrammar.fxml")); 
```

EDIT1：读取资源的代码

```
public void start(Stage primaryStage) {

    try {
        AnchorPane page = (AnchorPane) FXMLLoader.load(Tokanagrammar.class.getResource("../../../../resources/fxml/Tokanagrammar.fxml"));
        Scene scene = new Scene(page);
        primaryStage.setScene(scene);
        primaryStage.setTitle("Tokanagrammar 0.1");
        primaryStage.show();

    } catch (Exception ex) {
        Logger.getLogger(Tokanagrammar.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

同样，在我从构建路径中取出一些 src 之前，这工作得很好。据我所知，资源不一定*要*在构建路径中才能被访问。我有一些项目有一个图像文件夹，例如，在构建路径之外没有任何问题。

那么给了什么？我还可以轻松地将 .fxml 文件移动到 Tokanagrammar.java 所在的包中并编辑链接，它工作得很好。但是，根据规范必须是描述的方式。

任何帮助是极大的赞赏。

![包资源管理器](../Images/1efaeb035b89cbdd141e1b70fbf61bfe.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:37:59.640

`Tokanagrammar`您应该加载相对于类路径根目录的资源，而不是依赖（更改）相对于您的类的路径。尤其如此，因为资源与类位于完全不同的包中（就路径解析而言）。试试这个：

```
AnchorPane page = (AnchorPane) FXMLLoader.load(
    Thread.currentThread().getContextClassLoader().
        getResource("fxml/Tokanagrammar.fxml")); 
```

请注意，只要将其中的所有资源`src/main/resources`都复制到类路径的根目录，这将起作用。

# cocos2d-iphone - 加密 TMX 瓦片地图？

> ID：15604690
> 
> 赞同：1
> 
> 时间：2013-03-24T22:15:47.553
> 
> 标签：cocos2d-iphone, tmx

我正在创建的应用程序中使用 TMX tilemaps (Tiled)。

我很好奇是否有其他人以“恶意”用户不知道该文件是 TMX 地图的方式加密或更改了他们的瓷砖地图。

我基本上希望我的 TMX 以某种方式隐藏，任何人打开应用程序并检查其内容，都无法打开 TMX 并以他们知道是秘密物品的方式更改地图，或者更改它以便敌人不存在t 一样强等等……等等。我必须在我的游戏中保守一些秘密 :-)

# regex - 将行尾 (EOL) 与 vim 中的语法匹配匹配

> ID：15604692
> 
> 赞同：5
> 
> 时间：2013-03-24T22:15:58.533
> 
> 标签：regex, vim, match, eol, end-of-line

当我`/`进入 vim 并搜索`$`它时，它会突出显示所有 eols。但是当我尝试将它们与之匹配时，`syntax match`它似乎不起作用。

```
function! ConcealNonText()
    set conceallevel=1
    set concealcursor=v
    syntax match NonText /$/ conceal cchar=¶
endfunction

augroup ConcealNonText
    autocmd!
    autocmd VimEnter * call ConcealNonText()
augroup END 
```

任何提示我如何匹配它以将 eols 显示为隐藏字符？我知道我可以使用`set list listchars`，但在我看来这有一些[视觉上的副作用](https://stackoverflow.com/questions/8248872/in-vim-can-you-stop-the-color-change-of-white-space-characters-with-set-cursorl)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:02:53.793

看起来您的要求是`¶`代替 eol 显示。虽然您给出的代码可能是一个可能的解决方案，但它肯定不是一个理想的解决方案。Vim 提供了一种更简单的方法来实现你想要的。你真正需要做的是查找`:h listchars`。

以下是您应该在 vimrc 中添加内容以实现您想要的内容的示例：

```
set list
set listchars+=eol:¶ 
```

一旦你放了这个，vim 将显示`¶`eol 字符的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T22:44:03.983

做你想做的事，你可以`matchadd()`匹配所有的行尾。Matchadd 将返回一个 id，它可以帮助您在需要时删除给定的匹配项。

```
:call matchadd("NonText", "$") 
```

`:he matchadd()`有关如何使用它的更多信息，请参阅。

高温高压

# png - GIMP：在保存到 PNG 时找不到保持 XCF 结构的方法

> ID：15604694
> 
> 赞同：1
> 
> 时间：2013-03-24T22:16:08.910
> 
> 标签：png, export, gimp, script-fu

在 GIMP 界面上，您可以“导出为 PNG”来保存您作品的 PNG 副本，并正确合并图层。然而，在 Script-Fu 中，如果

```
 (let*
    (
     (
      theMergedLayer
      (car (gimp-image-merge-visible-layers theImage EXPAND-AS-NECESSARY))
     )
    )
    (file-png-save-defaults RUN-NONINTERACTIVE theImage theMergedLayer "myfile.png" "myfile.png")
   ) 
```

碰巧不能继续单独编辑图层。

我需要将可见的保存为 PNG，但继续在 Script-Fu 中对分离的图层进行编辑。

你能帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:06:18.913

做到这一点的方法 - 这是 PNG 导出插件本身在内部执行的方式 - 是在展平图像之前创建图像的内部副本。为此，只需调用`gimp-image-duplicate`，并在该调用返回的图像副本上应用 merge-visible-layers 和 file-*-save 。

保存后，使用 gimp-image-delete 删除新创建的图像 - 否则副本将继续在内存中退出，没有关联的显示（即根本没有在图形界面上显示）。

这个副本在内存和 CPU 方面可能看起来“昂贵”，但它根本不是：GIMP 保留对原始图像底层像素的引用，直到这些像素被更改 - 在这种情况下，唯一所做的更改是调用 do merge-layers，然后创建一个无论如何都必须创建的新层。

# php - IIS 7.5/Windows Server 2008 上的 PHP 错误日志

> ID：15604695
> 
> 赞同：17
> 
> 时间：2013-03-24T22:16:12.523
> 
> 标签：php, iis-7.5, windows-server-2008-r2

我对在运行 IIS 7.5 的 Windows 2008 Server 上应该在哪里查找包含 php 错误的日志文件感到困惑（我更熟悉 Mac OS X 的设置）。

在我的 php.ini 文件中，我将 log_errors 设置为“打开”，但在此文件夹中出现的 IIS 日志中没有看到任何 php 错误：

C\inetpub\logs\LogFiles

是否可以在此文件中包含 php 错误，或者我是否需要为 php 错误指定一个新文件？

（我正在尝试对生成 500 的站点进行故障排除 - php 错误的内部服务器错误。我找到了这个站点[http://www.webdigi.co.uk/blog/2009/php-on-windows- server-2008-500-internal-server-error-on-iis/](http://www.webdigi.co.uk/blog/2009/php-on-windows-server-2008-500-internal-server-error-on-iis/)解释了如何在通过服务器上的 RDP 会话访问页面时查看错误，但我需要能够记录这些并将日志查看为我不会总是拥有 RDP 访问权限）。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2015-01-06T20:16:44.003

在 php.ini 中*（您可以在“c:\program files (x86)\php\{PHP Version}”下找到它）*更改以下设置：

```
log_errors = On 
```

然后将*error_log*设置为Windows 事件日志的*syslog ：*

```
error_log = syslog 
```

或指定磁盘上的位置，例如：

```
error_log = C:\Windows\temp\php_errors.log 
```

确保没有在文件的其他位置设置*error_log*或*log_error值。*

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2019-07-12T14:48:41.097

如果您在 Windows 中使用 xampp。错误日志可以在

```
cd C:\xampp\apache\logs\ 
```

使用以下命令显示最新的错误

```
tail -f .\error.log 
```

# scala - Scala 的可变 Map 更新 [map(key) = newValue] 语法如何工作？

> ID：15604697
> 
> 赞同：23
> 
> 时间：2013-03-24T22:16:27.227
> 
> 标签：scala, scala-collections

我正在研究 Cay Horstmann 的 Scala 的《不耐烦》一书，在那里我遇到了这种更新可变地图的方式。

```
scala> val scores = scala.collection.mutable.Map("Alice" -> 10, "Bob" -> 3, "Cindy" -> 8)
scores: scala.collection.mutable.Map[String,Int] = Map(Bob -> 3, Alice -> 10, Cindy -> 8)

scala> scores("Alice") // retrieve the value of type Int
res2: Int = 10

scala> scores("Alice") = 5 // Update the Alice value to 5

scala> scores("Alice")
res4: Int = 5 
```

它看起来像`scores("Alice")`命中`apply`。`MapLike.scala`但这只会返回值，而不是可以更新的东西。

出于好奇，我在不可变地图上尝试了相同的语法，但出现以下错误，

```
scala> val immutableScores = Map("Alice" -> 10, "Bob" -> 3, "Cindy" -> 8)
immutableScores: scala.collection.immutable.Map[String,Int] = Map(Alice -> 10, Bob -> 3, Cindy -> 8)

scala> immutableScores("Alice") = 5
<console>:9: error: value update is not a member of scala.collection.immutable.Map[String,Int]
              immutableScores("Alice") = 5
          ^ 
```

基于此，我假设它`scores("Alice") = 5`已转换为`scores update ("Alice", 5)`但我不知道它是如何工作的，或者它是如何可能的。

它是如何工作的？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-24T22:31:01.993

这是`apply`,`update`语法的一个示例。

当您调用`map("Something")`this 调用`map.apply("Something")`时，它又调用`get`.

当您调用`map("Something") = "SomethingElse"`this 调用`map.update("Something", "SomethingElse")`时，它又调用`put`.

看看[这个](http://daily-scala.blogspot.co.uk/2009/08/apply-update-methods.html)以获得更全面的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-29T11:36:28.950

你可以试试这个：=> 更新地图列表

```
import java.util.concurrent.ConcurrentHashMap
import scala.collection.JavaConverters._
import scala.collection.concurrent

val map: concurrent.Map[String, List[String]] = new ConcurrentHashMap[String, List[String]].asScala

def updateMap(key: String, map: concurrent.Map[String, List[String]], value: String): Unit = {
map.get(key) match {
case Some(list: List[String]) => {
val new_list = value :: list
map.put(key, new_list)
}
case None => map += (key -> List(value))
}
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-06T20:14:57.470

问题是您正在尝试更新不可变地图。当我的地图被声明为

```
var m = new java.util.HashMap[String, Int] 
```

但是当我将定义替换为

```
var m = new scala.collection.mutable.HashMap[String, Int] 
```

工作的`m.update`。

# vb.net - 并行.foreach vb.net

> ID：15604698
> 
> 赞同：1
> 
> 时间：2013-03-24T22:16:39.447
> 
> 标签：vb.net, c#-to-vb.net, parallel.foreach

谁能给我正确的语法如何在 vb.net 中编写以下代码

```
public static void CopyFiles(string fromFolder, string toFolder)
{
    Parallel.ForEach<string>(Directory.EnumerateFiles(fromFolder, "*"), f =>
    {
        File.Copy(f, toFolder + @"\" + Path.GetFileName(f), true);
    });
} 
```

我尝试使用 developerfusion.com/tools/convert/csharp-to-vb 进行转换，转换后的代码是：-

```
Public Shared Sub CopyFiles(fromFolder As String, toFolder As String)

    Parallel.ForEach(Of String)(Directory.EnumerateFiles(fromFolder, "*"), Function(f) 
    File.Copy(f, toFolder & "\" & Path.GetFileName(f), True)
    End Function)

End Sub 
```

及其抛出编译时异常。请让我知道，这段代码出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T03:13:28.057

当您没有返回值时，您正在创建一个函数，请尝试创建一个子例程。看看这是否有效。

```
Public Shared Sub CopyFiles(fromFolder As String, toFolder As String)
    Parallel.ForEach(Of String)(Directory.EnumerateFiles(fromFolder, "*"),
        Sub(f)
            File.Copy(f, toFolder & "\" & Path.GetFileName(f), True)
        End Sub)
End Sub 
```

# asp.net-mvc - MVC 4 尝试制作所有可能的成员角色的选择列表，然后将其设置为与当前用户所在的角色一起选择

> ID：15604701
> 
> 赞同：0
> 
> 时间：2013-03-24T22:16:55.053
> 
> 标签：asp.net-mvc, selectlist

使用 MVC 4、实体框架和简单成员资格 * NEWB ALERT * 刚刚开始使用脚手架和 CRUD。

在我们的场景中，用户只能拥有一个角色（数据库中的 webpages_UsersInRoles 表）我有一个 userProfile 域类，但我正在通过 viewModel 进行更新。

我的目标是在显示所有可能角色的视图中创建一个选择列表。当视图加载时，该用户拥有的角色将是列表中的第一个选定项（selected selected 属性）

我什至从未从模型或控制器中创建过选择列表，所以请放轻松！

到目前为止，我有以下内容：

```
public class EditAdminModelVM
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Email { get; set; }
    public string UserName { get; set; }

    public IEnumerable<string> UserInRole { get; set; } 
//** I believe the function that returns the list of roles 
a user is in is of type IEnumerable - though I could be wrong. **

    [HiddenInput]
    public int UserId { get; set; }
} 
```

然后在我的控制器中，我有：

```
public ActionResult EditAdmin(int id = 0)
    {
        myDB db = new myDB();

        var viewModel = new EditAdminModelVM();

        var UserRoles = Roles.GetAllRoles();
        SelectList UserRolesList = new SelectList(UserRoles);

        viewModel = db.UserProfiles
             .Where(x => x.UserId == id)
             .Select(x => new EditAdminModelVM
             {
                 FirstName = x.FirstName,
                 LastName = x.LastName,
                 Email = x.Email,
                 UserName = x.UserName,
                 UserId = x.UserId,
                 UserInRoles = Roles.GetRolesForUser(x.UserName)
             }).FirstOrDefault();

        ViewBag.UserRolesList = UserRolesList;
        return View(viewModel);
    } 
```

这里的问题是我收到此行的警告：Roles.GetRolesForUser(x.UserName)，它说不能将类型字符串隐式转换为 Systems.Collections.Generic.List。我尝试将我的 Model 属性更改为类型 List<> 但这会导致相同的错误。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:51:10.287

您正在将 string[] 转换为列表。如果没有一些转换，这是不可能的。

尝试：

UserInRoles = new List(Roles.GetRolesForUser(x.UserName))

# c++ - C++ 元素访问无法正常工作？

> ID：15604711
> 
> 赞同：0
> 
> 时间：2013-03-24T22:17:16.927
> 
> 标签：c++, vector

这是一个超级简单的问题，但我似乎看不出哪里出了问题。这段代码的作用是计算 pixID 向量中元素的数量，并将总和返回到方阵 PtP 中的对角线元素。然而，即使第一个循环中的 'i' 读取：0,5,10,15 的元素输出看起来像这样：

```
1,0,0,0,
0,0,3,0,
0,0,0,0,
0,3,0,0, 
```

而不是想要的：

```
1,0,0,0,
0,3,0,0,
0,0,2,0,
0,0,0,2, 
```

知道这里发生了什么吗？

```
 double where(std::vector<double> &vec,unsigned int &v){

     double count = 0;
     int val;
     for(std::vector<double>::iterator it = vec.begin();
         it != vec.end();
         ++it){
       if(*it == val){
         count++;
       }
     }

  return count;
  }

  int main(){

  unsigned int pixSide = 2;
  int id;
  std::vector<double> pixID {1,1,2,3,0,2,1,3};
  std::vector<double> PtP (pixSide*pixSide);

  for(unsigned int i=0;i<pixSide*pixSide;i++){
    id = i*pixSide*pixSide + i;
    std::cout << id << std::endl;
    PtP[id] = where(pixID,i);
  }

  for(int i=0;i<pixSide*pixSide;i++){
    for(int j=0;j<pixSide*pixSide;j++){
      std::cout << int(PtP[i*pixSide + j]) << ',';
      if(j==pixSide*pixSide-1){
    std::cout << std::endl;
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:30:29.360

首先，您没有在 where() 中使用参数“v”。相反，您使用的是未初始化的局部变量“val”。

其次，我认为您可能在某些方面混淆了对象的尺寸。我认为您对是否只保留对角线或整个矩阵感到困惑。

这样，您将始终保持整个矩阵：

```
std::vector<double> PtP (pixSide*pixSide); 
```

应该

```
std::vector<double> PtP (pixSide*pixSide*pixSide*pixSide); 
```

和

```
std::cout << int(PtP[i*pixSide + j]) << ','; 
```

应该

```
std::cout << int(PtP[i*pixSide*pixSide + j]) << ','; 
```

当然，这对于这样一个稀疏矩阵来说是一种浪费——我不知道这在您的应用程序中是否重要（您的实数是否大于 pixSide=2？）。

# php - 将函数与辅助类分开是否很好？

> ID：15604715
> 
> 赞同：0
> 
> 时间：2013-03-24T22:17:25.610
> 
> 标签：php, oop, model-view-controller

我对 MVC 概念本身还很陌生，但我正在慢慢开始掌握它，以及是什么让它如此有用。

我的应用程序中有不同的选项卡，它们是层次结构中的级别（我称它们为*实体*），每个选项卡都由两个类表示 - 一个 Binding 类，具有与数据库通信的所有方法，一个助手类只是实体的骨架，都在同一个文件中。我想知道这是否是处理设计模式的正确方法？我还没有构建模型或控制器，因为我不确定它们会在哪里出现。另外我现在对使用 ORM 不感兴趣。

```
class CompanyBinding extends EntityBinding {
    function __construct() {
        parent::__construct();
    }

    public function get($criteria = array()) {
        // method to retrieve an array of DB rows, each represented by the helper class

            [...]

        return $sth->fetchAll(PDO::FETCH_CLASS, 'Company');
    }

    public function get_by_id($id) {
        // method to retrieve an one single object of the helper class

        $sth->setFetchMode(PDO::FETCH_CLASS, 'Company');
        return $sth->fetch();
    }
}

class Company extends Entity {
    public $id;
    public $name;
    public $email;
    public $phone;

    // just properties. some classes have a __construct() function to manipulate some fields after retrieval

    [...]
} 
```

我现在需要一个模型课吗？我在考虑控制器可以执行 ->get 函数并加载适当的类，因为实体的名称是通过 AJAX 从前端传递的。

顺便说一句，我也很困惑。控制器应该吸收所有 AJAX 请求，还是应该创建一个名为 ajax.php 的文件来处理它，并将 Controller 类放在 public_html 之上，这样用户就无法访问类文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T22:55:34.190

将这些类分离到它们自己的文件中。一旦打开文件位置，PHP 在缓存文件位置方面做得不错，因此您不必担心 IO。一般来说，将多个类放在一个文件中是不好的做法。它不会破坏你的应用程序，但它可能会让更多经验丰富的开发人员泪流满面。:)

除此之外，你很好。

# php - 我无法在 CodeIgniter 纯文本电子邮件中获得换行符

> ID：15604719
> 
> 赞同：0
> 
> 时间：2013-03-24T22:17:43.073
> 
> 标签：php, codeigniter, newline, codeigniter-2, email

我一直在努力解决这个问题。无论我做什么，我都无法在使用 CodeIgniter (v 2.1.3) 生成的任何电子邮件消息中显示新行、空行或换行。

在我的**控制器功能中**：

```
$message = "Line one.\r\n\r\n" .
"Line two.\r\n\r\n" .
"Line three.\r\n\r\n";

$subject = "My Subject Line";

$this->load->library('email');                  
$config['newline'] = "\r\n";  // does not matter when I leave this out
$config['crlf'] = "\r\n";     // does not matter when I leave this out
$this->email->initialize($config);              
$this->email->from('system@mydomain.com', 'my system');
$this->email->to('me@gmail.com');               
$this->email->subject($subject);
$this->email->message($message);                
$this->email->send();               
echo $this->email->print_debugger(); 
```

除了上面显示的内容外，我没有更改任何设置或默认值。

消息的“来源”看起来就像这个`print_debugger()`输出......

```
User-Agent: CodeIgniter
Date: Sun, 24 Mar 2013 17:46:47 -0400
From: "my system" 
Return-Path: 
Reply-To: "system@mydomain.com" 
X-Sender: system@mydomain.com
X-Mailer: CodeIgniter
X-Priority: 3 (Normal)
Message-ID: <xxxxxx@mydomain.com>
Mime-Version: 1.0
Content-Type: multipart/alternative; boundary="B_ALT_514f74472bd26" 

=?utf-8?Q?My_Subject_Line?=
This is a multi-part message in MIME format.
Your email application may not support this format.

--B_ALT_514f74472bd26
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 8bit

Line one.

Line two.

Line three.

--B_ALT_514f74472bd26
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Line one.

Line two.

Line three.

--B_ALT_514f74472bd26-- 
```

**但是**，问题在于实际消息在所有电子邮件客户端中呈现如下。

```
Line one.Line two.Line three. 
```

为什么我`"\r\n"`的被忽视？

这是一条非常简单的消息，我宁愿不必使用任何`html`选项。 [根据 CI 文档](http://ellislab.com/codeigniter/user-guide/libraries/email.html)，`mailtype`首选项应默认为`text`.

我在哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T22:37:18.250

~~CodeIgniter 2 文档似乎是错误的。~~

[在此页面上](http://ellislab.com/codeigniter/user-guide/libraries/email.html)，它包含可用首选项的列表。

注意这一点，`mailtype`...

```
Preference     Default Value      Options       
mailtype       text               text or html 
```

添加以下设置解决了这个问题，~~所以显然它不是“默认值”......~~

```
$config['mailtype'] = 'text'; 
```

我在 CI 的线程询问文档中的这种差异：

[http://ellislab.com/forums/viewthread/234296/](http://ellislab.com/forums/viewthread/234296/)

* * *

**编辑**：

整个问题是由我的 Ion Auth 配置文件中的以下代码引起的...

```
$config['email_config'] = array(
    'mailtype' => 'html',
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T22:27:12.957

似乎 codigniter 正在以 text/html 和 text/plain 的形式发送您的电子邮件。大多数电子邮件客户端呈现电子邮件的 html 版本，并且在 html 中，空格被分解为单个空格。检查 codeigniter 是否可以选择关闭发送 html 版本或仅`<br>`使用`\r\n`.

# java - 来自对象或数据库的 Jsp/Servlet 列表？

> ID：15604722
> 
> 赞同：0
> 
> 时间：2013-03-24T22:17:50.717
> 
> 标签：java, database, jsp, servlets, collections

我有 PHP 背景，现在是 JSP/Servlet 初学者。

我对需要使用的方法有疑问，例如，假设我有一个动态的项目列表，我可以用 JSP 以两种方式实现

1.  从数据库中读取项目列表
2.  从对象内的集合中读取项目列表

第一个是正确的方法吗？或者在任何情况下您需要使用第二个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:26:36.233

首先，我当然不建议将数据库中的列表直接读取到 JSP 中。最佳实践将涉及应用程序的一个层（例如，DAO），该层将从数据库中读取到一个集合中，该集合将传递给另一个渲染视图的层。

如果一组值很长，和/或可能经常更改，那么它当然应该在数据库中（例如：填写地址时可用的国家列表、产品列表、代理商列表可以分配一张票）。

然而，对于一个较短的列表，主要用于提供可能的值（这些值可能最终在数据库中，但值列表本身不需要），枚举可能是更好的选择（例如：工单的可能状态（打开、待处理、已解决、已关闭），电话号码类型列表（家庭、工作、手机））。

# objective-c - 在 Mac OS X 应用程序中检测多点触控手势或鼠标拖动

> ID：15604724
> 
> 赞同：2
> 
> 时间：2013-03-24T22:18:00.663
> 
> 标签：objective-c, xcode, macos, multi-touch, gesture

在使用 Xcode 制作的 Mac OSX 应用程序中，如何检测何时发生拖动或触控板或魔术鼠标上的滑动。

通过拖动，我的意思是用户单击了窗口的左边缘或右边缘，并且鼠标被按住，现在水平地从窗口的那一侧移开。

我正在尝试在左拖动或右滑动（在魔术鼠标或触控板上）运行代码，并在右拖动或左滑动（在魔术鼠标或触控板上）运行另一组代码。

以下是我所说的手势的一些定义：

左拖动是指单击并按住窗口右侧并且光标向左移动。

右拖动是指单击并按住窗口左侧并且光标向右移动。

顶部拖动是指窗口顶部、框架下方/交通灯所在的位置被向下拖动。

顶部滑动是从触控板或魔术鼠标顶部开始向下滑动。

在伪代码中，我想要实现的是：

```
if( right-drag || left-swipe ){
    /*run code*/
}
else if( left-drag || right-swipe ){
    /* run different code */
}
else if( top-drag || top-swipe ){
    /* run other code */
}
else{
   /* do nothing */
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T22:45:28.830

## [Cocoa 事件处理指南](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/HandlingTouchEvents/HandlingTouchEvents.html#//apple_ref/doc/uid/10000060i-CH13-SW10)是开始的地方

*特别是处理手势事件的部分。*

**他们告诉你如何处理：**

*   捏合动作（向内或向外）是表示缩小或放大（也称为放大）的手势。
*   两个手指在相对的半圆中移动是一种手势，意思是旋转。
*   三根手指在一个共同的方向上刷过触控板表面是一种轻扫手势。
*   垂直或水平移动的两个手指是滚动手势。

和更多...

**特别是方法：**

```
- (void)swipeWithEvent:(NSEvent *)event 
```

NSResponder 是您最好的选择。T*his 事件通知接收器用户已经开始滑动手势。该事件将被发送到按键窗口中触摸下的视图。*

**取自同一文档**，以下是如何处理滑动手势的示例：

```
- (void)swipeWithEvent:(NSEvent *)event {
    CGFloat x = [event deltaX];
    CGFloat y = [event deltaY];
    if (x != 0) {
        swipeColorValue = (x > 0)  ? SwipeLeftGreen : SwipeRightBlue;
    }
    if (y != 0) {
        swipeColorValue = (y > 0)  ? SwipeUpRed : SwipeDownYellow;
    }
    NSString *direction;
    switch (swipeColorValue) {
        case SwipeLeftGreen:
            direction = @"left";
            break;
        case SwipeRightBlue:
            direction = @"right";
            break;
        case SwipeUpRed:
            direction = @"up";
            break;
        case SwipeDownYellow:
        default:
            direction = @"down";
            break;
    }
    [resultsField setStringValue:[NSString stringWithFormat:@"Swipe %@", direction]];
    [self setNeedsDisplay:YES];
} 
```

# android - 我可以在布局文件中使用宏吗

> ID：15604728
> 
> 赞同：0
> 
> 时间：2013-03-24T22:18:18.493
> 
> 标签：android

我有一个包含 16 个按钮的布局文件。现在我正在通过更改所有 16 个按钮来更改颜色。必须有更好的方法来做到这一点，看看谷歌找不到任何东西。我想一定有办法做一个 amcro 什么的，所以我只需要改变它 1 次。

文件

```
 <LinearLayout 
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center" 
android:orientation="horizontal" > 

        <Button
        android:id="@+id/butVol"
        android:layout_width="140dp"
        android:layout_height="wrap_content"
        android:textSize="24px"
        android:text="Volume"   
        android:textColor="#ff0000ff"
        android:layout_gravity="center" 
    />

    <Button
        android:id="@+id/butRington"
        android:layout_width="140dp"
        android:layout_height="wrap_content"
    android:textSize="24px"
        android:text="Rington"  
        android:textColor="#ff0000ff"
        android:layout_gravity="center" 
    /> 
```

android:textColor="#ff0000ff" android:layout_marginRight="6dp" />

```
 <Button
        android:id="@+id/butSound2"
        android:layout_width="140dp"
        android:layout_height="wrap_content"
    android:textSize="24px"
        android:text="Sound2"   
        android:textColor="#ff0000ff"
        android:layout_marginRight="6dp"    
    /> 
```

android:textColor="#ff0000ff" android:layout_marginRight="6dp" />

```
 <Button
        android:id="@+id/butSound4"
        android:layout_width="140dp"
        android:layout_height="wrap_content"
    android:textSize="24px"
        android:text="Sound4"   
        android:textColor="#ff0000ff"
        android:layout_marginRight="6dp"    
    /> 
```

```
<LinearLayout 
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center"
android:orientation="horizontal" >          
    <Button
        android:id="@+id/butSound5"
        android:layout_width="140dp"
        android:layout_height="wrap_content"
    android:textSize="24px"
        android:text="Sound5"   
        android:textColor="#ff0000ff"
        android:layout_marginRight="6dp"
    />

    <Button
        android:id="@+id/butSound6"
        android:layout_width="140dp"
        android:layout_height="wrap_content"
    android:textSize="24px"
        android:text="Sound6"   
        android:textColor="#ff0000ff"
        android:layout_marginRight="6dp"    
    /> 
```

```
 <LinearLayout 
android:layout_width="wrap_content"
android:layout_height="wrap_content"
 android:layout_gravity="center"
android:orientation="horizontal" >          
    <Button
        android:id="@+id/butSound7"
        android:layout_width="140dp"
        android:layout_height="wrap_content"
    android:textSize="24px"
        android:text="Sound7"   
        android:textColor="#ff0000ff"
        android:layout_marginRight="6dp"
    />

    <Button
        android:id="@+id/butSound8"
        android:layout_width="140dp"
        android:layout_height="wrap_content"
    android:textSize="24px"
        android:text="Sound8"   
        android:textColor="#ff0000ff"
        android:layout_marginRight="6dp"    
    /> 
```

android:textColor="#ff0000ff" android:layout_marginRight="6dp" />

```
 <Button
        android:id="@+id/butSound10"
        android:layout_width="140dp"
        android:layout_height="wrap_content"
    android:textSize="24px"
        android:text="Sound10"  
        android:textColor="#ff0000ff"
        android:layout_marginRight="6dp"    
    /> 
```

```
<LinearLayout 
android:layout_width="wrap_content"
android:layout_height="wrap_content"
 android:layout_gravity="center"
android:orientation="horizontal" >          
    <Button
        android:id="@+id/butSound11"
        android:layout_width="140dp"
        android:layout_height="wrap_content"
    android:textSize="24px"
        android:text="Sound11"  
        android:textColor="#ff0000ff"
        android:layout_marginRight="6dp"
    />

    <Button
        android:id="@+id/butSound12"
        android:layout_width="140dp"
        android:layout_height="wrap_content"
    android:textSize="24px"
        android:text="Sound12"  
        android:textColor="#ff0000ff"
        android:layout_marginRight="6dp"    
    /> 
```

android:textColor="#ff0000ff" android:layout_marginRight="6dp" />

```
 <Button
        android:id="@+id/butSound14"
        android:layout_width="140dp"
        android:layout_height="wrap_content"
    android:textSize="24px"
        android:text="Sound14"  
        android:textColor="#ff0000ff"
        android:layout_marginRight="6dp"    
    /> 
```

android:textColor="#ff0000ff" android:layout_marginRight="6dp" />

```
 <Button
        android:id="@+id/butSound16"
        android:layout_width="140dp"
        android:layout_height="wrap_content"
    android:textSize="24px"
        android:text="Sound16"  
        android:textColor="#ff0000ff"
        android:layout_marginRight="6dp"    
    /> 
```

android:textColor="#ff0000ff" android:layout_marginRight="6dp" />

```
 <Button
        android:id="@+id/butSound18"
        android:layout_width="140dp"
        android:layout_height="wrap_content"
    android:textSize="24px"
        android:text="Sound18"  
        android:textColor="#ff0000ff"
        android:layout_marginRight="6dp"    
    /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:26:29.930

你不应该直接使用颜色代码

```
android:textColor="#ff0000ff" 
```

将此替换为`android:textColor="@color/xyz"`

然后在 String.xml 中定义这个 xyz 颜色

或者，您可以使用主题来定义样式或颜色。然后你的按钮添加主题

```
android:theme="@style/xyzStyle" 
```

# scheduling - 在这个简单的代码中可以调整什么以使 fsm 中的信号发生变化

> ID：15604732
> 
> 赞同：1
> 
> 时间：2013-03-24T22:19:07.960
> 
> 标签：scheduling, vhdl, clock, fsm

好吧，我在我的主要组件中有进程 a，在我的其他子组件中有进程 b（在主组件中实现）。进程 a 和 b 在它们的敏感度列表中都只有时钟：进程一个名为 ready 的控制启用信号，如果 1 进程 b 可以工作，0 进程 b 将什么也不做。问题在于进程 a ，当进程 a 将使能信号的值更改为 0 时，必须等待下一个时钟周期才能更改，因此进程 b 结束并运行额外的时钟周期。

```
a:process(clk)
begin
if(rising_edge(clk)) then
if(output/=old_output) then
        enable<='0';
end if;
end if;
end process;

b:process(clk)
begin
if(rising_edge(clk)) then
if(enable='1') then
        --do anything
end if;
end if;
end process; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T06:43:32.750

原因是该值在时钟的确切上升沿被锁存/采样。那时，'enable' 仍然等于 1。在该模拟增量中，启用的值将为零，但直到第一个增量之后才可用。

当 enable 变为 one 时也是如此（假设它也是在时钟上升沿产生的），该过程将在时钟上升时准确锁存该值，并且在模拟器中，启用将在整个时钟周期内看起来很高，甚至虽然“--do anything”不会发生。

您可以将其视为真正的电路而不是编程语言。考虑到“输出/=旧输出”的评估将消耗时间，并且作为设计人员，您希望在下一个时钟上升沿之前完成。

希望这会有所帮助，但这就是语言的工作方式。如果启用的设置和重置，我可以给你一个更好的答案。

# c - 在共享内存中使用结构的 Seg Fault

> ID：15604733
> 
> 赞同：2
> 
> 时间：2013-03-24T22:19:25.600
> 
> 标签：c, shared-memory

我为我的无知提前道歉，这给我带来的麻烦比它应该的要多得多，但是我已经把头撞到我的桌子上好几个小时了，试图找出我做错了什么。我想编写一个具有存储结构的共享内存的应用程序。出于某种原因，我无法起步，我一直在访问我的结构成员时遇到段错误。

```
#include <stdio.h>
#include <sys/shm.h>
#include <sys/stat.h>

#define MAX_SEQUENCE 10

struct shared_data
{
    long sequence[10];
    int sequence_size;
};
typedef struct shared_data shared_data;

int main(int argc, char * argv[])
{ 
    int segment_id;

    shared_data * shared_memory;

    segment_id = shmget(IPC_PRIVATE, sizeof(shared_data), S_IRUSR | S_IWUSR);

    shared_memory = (shared_data *) shmat(segment_id, NULL, 0);

    shared_memory->sequence_size = atoi(argv[1]);

    printf("\n\nSequence Size: %d\n\n",shared_memory->sequence_size);

    shmdt(shared_memory);
} 
```

更新：谢谢大家，我的系统管理员正在运行诊断程序并以某种方式禁用了共享内存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T22:26:12.623

你的代码对我来说并不坏。唯一明显的缺失是对传递的参数数量进行某种检查，例如：

```
if (argc != 2)
  return 1; 
```

您是否可能错过了使用参数调用程序。在这种情况下，它将是

```
atoi (argv[1]) 
```

这会导致您的段错误。

顺便说一句：另外检查 and 的返回值`shmget`也`shmat`可能是一个好主意。

# java - 从结果列表构建 Java TableModel

> ID：15604736
> 
> 赞同：0
> 
> 时间：2013-03-24T22:19:54.883
> 
> 标签：java, swing, jtable, tablemodel, defaulttablemodel

嗨，我在填充 TableModel 时遇到问题，我不明白问题出在哪里

这是我的方法

```
 private TableModel buildTableModel(List<Player> result) {
        // build the columns
        Vector<String> columnNames = new Vector<String>();
        //int columnCount = metaData.getColumnCount();
        //for (int column = 1; column <= columnCount; column++) {
        //    columnNames.add(metaData.getColumnName(column));
        //}

        columnNames.add("playerid");
        columnNames.add("squeezePlay");
        columnNames.add("weakShowdown");
        columnNames.add("numberOfPlays");
        columnNames.add("playsWithFriends");
        columnNames.add("suspend");
        columnNames.add("grade");

        // data of the table
        Vector<Vector<Object>> data = new Vector<Vector<Object>>();
        while (result.iterator().hasNext()) {
            Player player = result.iterator().next();

            Vector<Object> vector = new Vector<Object>();

             vector.add((Object) player.GetId());
             vector.add((Object) player.GetSqueezePlay());
             vector.add((Object) player.GetWeakShowdown());
             vector.add((Object) player.GetNumberOfPlays());
             vector.add((Object) player.GetPlaysWithFriends());
             vector.add((Object) player.GetSuspended());
             vector.add((Object) player.GetGrade());

             data.add(vector);
        }

        return new DefaultTableModel(data, columnNames);

    } 
```

**注意**：无论有没有`Object`铸造，桌子仍然不起作用..

请建议任何替代解决方案来填充 TableModel。

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T22:35:56.370

每次您打电话时，`result.iterator()`您都在阅读列表的开头。相反，使用这个：

```
for (Player player : result) 
```

# servicestack - 用于分页 + 排序的 ServiceStack QueryBase 类，但未触发验证

> ID：15604741
> 
> 赞同：3
> 
> 时间：2013-03-24T22:20:23.867
> 
> 标签：servicestack

我创建了一个 QueryBase 类，以便在需要时支持分页和排序。

```
public class QueryBase
{
    public string Sort { get; set; }
    public int PageNumber { get; set; }
    public int PageSize { get; set; }
} 
```

如果一个类支持这些特性，它会像这样简单地扩展它：

```
public class Cars: QueryBase, IReturn<CarsResponse>
{
}

public class CarsResponse : IHasResponseStatus
{
    public List<Car> Cars { get; set; }
    public ResponseStatus ResponseStatus { get; set; }
} 
```

然后为了从查询字符串中填充 QueryBase，我创建了一个 RequestFilterAttribute，可以在需要时使用：

```
public class QueryRequestFilterAttribute : Attribute, IHasRequestFilter
{
    #region IHasRequestFilter Members

    public IHasRequestFilter Copy()
    {
        return this;
    }

    public int Priority
    {
        get { return -100; }
    }

    public void RequestFilter(IHttpRequest req, IHttpResponse res, object requestDto)
    {
        var request = requestDto as QueryBase;
        if (request == null) { return; }
        request.PageNumber = req.QueryString["pageNumber"].IsEmpty() ? 1 : int.Parse(req.QueryString["pageNumber"]);
        request.PageSize = req.QueryString["pageSize"].IsEmpty() ? 15 : int.Parse(req.QueryString["pageSize"]);
        request.Sort = req.QueryString["sort"].IsNullOrEmpty() ? "id" : req.QueryString["sort"];
    }

    #endregion
} 
```

一切正常，但我现在的目标是启用验证以定义一些基本规则，如 maxpagesize 或 minpagenumber。一个非常基本的实现是：

```
public class QueryBaseValidator : AbstractValidator<QueryBase>
{
    public QueryBaseValidator()
    {
        RuleFor(query => query.PageSize).LessThanOrEqualTo(100).GreaterThan(0);
    }
} 
```

通过这种方式验证器过滤器无法在其缓存中找到上述验证器，因为它搜索 Cars 而不是 QueryBase（第 11 行 ValidationFilter.cs）：

```
ValidatorCache.GetValidator(req, requestDto.GetType()); 
```

为了避免在每个子类中编写相同的验证逻辑，该问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T22:27:12.150

我找到了一个解决方案，但我不知道它是否是最好的：为每个实现 QueryBase 的类使用验证器。

QueryBaseValidator 修改如下：

```
public class QueryBaseValidator<T> : AbstractValidator<T> where T : QueryBase
{
    public QueryBaseValidator()
    {
        RuleFor(query => query.PageSize).LessThanOrEqualTo(100).GreaterThan(0);
    }
} 
```

为子类 Cars 创建的附加验证器

```
public class CarsValidator : QueryBaseValidator<Cars>
{
} 
```

通过这种方式，一切正常，我现在已经有了一个基本的通用分页、排序和使用 ServiceStack 查询的基本实现。

# php - 将 ID 数据传递到新页面

> ID：15604744
> 
> 赞同：1
> 
> 时间：2013-03-24T22:20:36.877
> 
> 标签：php, mysql

我对 PHP mySQL 很陌生，所以请放轻松。我正在一个页面上构建主题公园列表，当您单击其中一个公园时，会加载一个包含该公园信息的新页面。我很难将主题公园 ID 从一页传递到下一页，并且无法弄清楚我做错了什么。请帮忙。

列表页面的代码：

```
 <?php

try
{
$pdo = new PDO('mysql:host=localhost;dbname=danville_tpf', 'username',
'password');
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$pdo->exec('SET NAMES "utf8"');
}
catch (PDOException $e)
{
$output = 'Unable to connect to the database server.';
include 'output.html.php';
exit();
}

$output = 'Theme Park Database initialized';
include 'output.html.php';

try
{
$sql = 'SELECT park_id, name, town, state, country
FROM tpf_parks ORDER BY name ASC';
$result = $pdo->query($sql);
}
catch (PDOException $e)
{
$error = 'Error fetching parks: ' . $e->getMessage();
include 'error.html.php';
exit();
}

$output = 'Parks Loaded';
include 'output.html.php';

foreach ($result as $row)
{
$parklist[] = array(
'park_id' => $row['park_id'],
'name' => $row['name'],
'town' => $row['town'],
'state' => $row['state'],
'country' => $row['country']

);
}
include 'parks.html.php'; 
```

parks.html.php 是这样的：

```
 <?php foreach ($parklist as $park): ?>

<a href="paging.php?park_id=<?php echo $park['park_id'];?>">

<h2><?php echo $park['name']; ?></h2>

<h3><?php echo $park['town'] , ', ', $park['state'] , ', ', $park['country']      ; ?></h3>

<hr>

</a>

<?php endforeach; ?> 
```

详细信息应加载的内容页面是：

```
<?php

try
{
$pdo = new PDO('mysql:host=localhost;dbname=danville_tpf', 'username',
'pasword');
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$pdo->exec('SET NAMES "utf8"');
}
catch (PDOException $e)
{
$output = 'Unable to connect to the database server.';
include 'output.html.php';
exit();
}

$output = 'Theme Park Database initialized';
include 'output.html.php';

try
{
$park_id = $_GET['park_id'];
$query="SELECT * FROM tpf_parks WHERE park_id = $park_id";
$result = $pdo->query($sql);
}
catch (PDOException $e)
{
$error = 'Error fetching park details: ' . $e->getMessage();
include 'error.html.php';
exit();
}
?> 
```

我认为 park_id 正在传递，因为内容页面的 URL 在 paging.php?park_id=2 末尾显示了这一点，其编号与 park_id 匹配，但我从查询中得到一个错误，上面写着

“获取公园详细信息时出错：SQLSTATE [42000]：语法错误或访问冲突：1065 查询为空”

我做错了什么？请帮忙。担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:23:32.490

问题是以下行使用了`$sql`似乎不存在的变量：

```
$result = $pdo->query($sql); 
```

尝试以下操作：

```
$park_id = $_GET['park_id'];
$query="SELECT * FROM tpf_parks WHERE park_id = $park_id";
$result = $pdo->query($query); 
```

注意到我已替换`$sql`为`$query`.

# javascript - Chrome 扩展程序中的 API 调用需要按两次按钮

> ID：15604745
> 
> 赞同：1
> 
> 时间：2013-03-24T22:20:44.897
> 
> 标签：javascript, api, google-chrome-extension

我正在创建一个 Chrome 扩展程序，它通过 inject.js 在页面上注入 HTML 表单，当输入查询并按下按钮时，通过 background.js 进行 API 调用。然后将内容带回 inject.js 脚本并进行处理。

当我第一次尝试通过 inject.js 拨打电话时，我收到以下错误：

```
 Error in event handler for 'undefined': fetchResult is not defined ReferenceError: searchResult is not defined 
```

奇怪的是，当我稍等片刻并再次按下查询时。

我怀疑 fetchresult 第一次是未定义的，因为获取查询需要一些时间，但我不知道如何解决这个问题。

注入.js：

```
 function fetch() {

    var fetchResult;

    var fetchquery = document.getElementById('field').value;

    chrome.extension.sendMessage({greeting: fetchquery}, function(response) {
             fetchResults = response.farewell
            constructHTML(fetchResultsResults)      

        });
    }; 
```

背景.js：

```
 function loadXMLDoc(query)
    {

   if (query){
    // new cross origin XML request

   xmlhttp=new XMLHttpRequest();
   xmlhttp.onreadystatechange=function()
    {
     if (xmlhttp.readyState==4 && xmlhttp.status==200)
      {
         fetchResult = JSON.parse(xmlhttp.responseText);
         }
     }

   xmlhttp.open("GET","http://XXXXXXXXXXXXXXX&q="+query, true);
   xmlhttp.send();

   return fetchResult;

   } else {

       return "noquery";
    }
    };

    chrome.extension.onMessage.addListener(function(request, sender, sendResponse) {
       if (loadXMLDoc(request.greeting) != "noquery"){
            sendResponse({farewell: loadXMLDoc(request.greeting)})
            }
    }); 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T01:14:02.443

XMLHttpRequest 是*异步*的，因此`return fetchResult`您应该调用回调来传递结果，而不是 。这是一个例子：

```
 function loadXMLDoc(query, callback)
   {

   if (query){
    // new cross origin XML request

   xmlhttp=new XMLHttpRequest();
   xmlhttp.onreadystatechange=function()
    {
     if (xmlhttp.readyState==4)
      {
         if(xmlhttp.status==200)
         {
           fetchResult = JSON.parse(xmlhttp.responseText);
           callback(fetchResult);
         } else {
           callback("noquery");
         }
      }
     }

   xmlhttp.open("GET","http://XXXXXXXXXXXXXXX&q="+query, true);
   xmlhttp.send();

   } else {

       callback("noquery");
    }
    };

    chrome.extension.onMessage.addListener(function(request, sender, sendResponse) {
            loadXMLDoc(request.greeting, function(fetchResult) {
              if (fetchResult != "noquery")
                sendResponse({farewell: fetchResult})
              else
                sendResponse({});
            });
            return true; // See the description of https://developer.chrome.com/extensions/extension.html#property-onMessage-sendResponse.
    }); 
```

# ruby-on-rails - 使用 Rinku 时如何显示链接的 URL？（导轨宝石）

> ID：15604748
> 
> 赞同：0
> 
> 时间：2013-03-24T22:21:04.350
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems

我正在使用 Rinku rails gem 将 URL 链接到我网站上发布的任何内容中。

我已经安装并实现了它，但问题是 HTML 代码显示在视图中。

这是我正在使用的代码

```
<%= truncate(Rinku.auto_link(feed_item.content), :length=>400, :omission=>' ...(next page)') %> 
```

这是我网站上的示例输出视图

```
hey guys check out my website at <a href="http://www.someURL.com">www.someURL.com</a> 
```

如您所见，HTML`<a>`标记显示。feed_item.content 应该更改为什么才能正常工作？

Feed_item.content 是文本，而不是字符串。Rinku 似乎解析了字符串。这是问题的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:57:14.293

The issue is that by default, Rails will escape any html in a string you output in erb (using `<%= %>`) as a precautionary measure. (If you look at the page source, you should see that your output looks like `&lt;a ...&gt;` instead of `<a ...>`.)

To stop this from happening, you can use the `.html_safe` method to mark that the string is safe to print as html:

```
<%= truncate(...).html_safe %> 
```

# django - django 多对多 uml 令人困惑

> ID：15604749
> 
> 赞同：2
> 
> 时间：2013-03-24T22:21:41.587
> 
> 标签：django, django-models, uml, class-diagram

在我的项目中，我有一个多对多的关系。由于 django 可以处理多对多的关系，我确实喜欢这样：

```
class Groups (models.Model):
        name=models.CharField(max_length=50)
        groups_to_users=models.ManyToManyField(User,related_name='handler') 
```

我必须制作 umls 图，所以除非我错了 django 创建两者之间的关系表。对于数据库，我确实明确地显示了这个。但是在类图中我该如何处理呢？类可以在 uml 中有多对多吗？我想没有，所以嗯？？？？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:27:57.940

django 所做的是一个实现细节。这是有效的 UML：

![在此处输入图像描述](../Images/75a49171a42e2d7a7df6b4199b2d751d.png)

# sql - 附加没有 From 子句的查询

> ID：15604753
> 
> 赞同：3
> 
> 时间：2013-03-24T22:22:18.977
> 
> 标签：sql, ms-access, vba, ms-access-2000

我有一个记录金融交易的 MS Access 数据库。它有一个名为`frmDeposits`table的表单`tblDep`。该表单上的一个按钮运行一个过程，该过程将数据从当前记录插入另一个表`tblAccount`，使用`DoCmd.RunSql`。代码如下所示：

```
DoCmd.RunSQL "INSERT INTO tblAccount ([Date], CheckNo, Amount, Vendor, Cleared, Deposit, Printed, Misc) " _
        & "SELECT [Date], CheckNo, Amount, Vendor, Cleared, " & ident & " AS Deposit, Printed, Misc " & _
        & "FROM tblDep WHERE Form=" & formnum & ";" 
```

该`formnum`变量在别处设置，并标识表单中的当前记录。该`ident`变量也在别处定义。

不知怎的，在调试我的其他部分代码的过程中，这条SQL语句的最后一行被删除了，留下：

```
DoCmd.RunSQL "INSERT INTO tblAccount ([Date], CheckNo, Amount, Vendor, Cleared, Deposit, Printed, Misc) " _
        & "SELECT [Date], CheckNo, Amount, Vendor, Cleared, " & ident & " AS Deposit, Printed, Misc" 
```

令人惊讶的是，表单继续正确运行！此 RunSQL 语句仍在从`frmDeposits`tblAccount 表中提取当前记录并将其插入。

我的问题是，为什么这行得通？我认为带有 SELECT 的 SQL 语句必须有一个 FROM 子句。我知道您可以使用不带 FROM 的 INSERT INTO ... VALUES 来插入一条记录，但即便如此，您也必须提供实际值而不是字段名称。

我注意到的另一件事：这似乎只适用于表单模块中的代码。如果我将 SQL 字符串粘贴到查询设计中并运行它，或者在表单范围之外运行类似的代码，我会得到每个字段的*“输入参数值”*弹出框。VBA 是否预先解析 SQL 字符串，并获取参数的表单字段或文本框？还是将 FROM 默认为表单的 RecordSource？对于 SQL 字符串中引用的所有字段，我在表单上没有文本框，尽管它们都存在于表单的基础表中。

顺便说一句，这是在 Access 2000 中运行的。是的，我知道这是一个过时的版本，但这是我必须使用的。

*** *Edit - 添加一个注释，此行为仅在使用 DoCmd.RunSQL 时出现。如果我将相同的 SQL 字符串放入 db.Execute，它会返回“参数数量错误”错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T23:26:09.020

VBA 代码在 Access 应用程序中以两种形式存在：纯文本源代码；并编译“p-code”。也许发生的事情是当源代码文本的那部分丢失时，存储的 p 代码没有改变。IOW，它仍然包含缺少`FROM`子句的符号。

在您的情况下，我会怀疑损坏并执行反编译以清理已编译的代码。首先备份数据库以确保安全。您可以在此问题的 2 个答案中找到反编译的详细说明：[如何反编译和重新编译](https://stackoverflow.com/questions/3266542/ms-access-how-to-decompile-and-recompile)。

坦率地说，腐败是一种疯狂的猜测。但是，由于您的部分源代码神秘地消失了，而且 Access 的运行就像它仍然存在一样，因此损坏的可能性似乎更大。

另一种可能性是你有`DoCmd.SetWarnings = False`。静默`SetWarnings`关闭会丢弃有关失败`INSERT`尝试的错误消息。因此，您看不到错误消息，但实际上也没有插入任何内容。

# actionscript-3 - 使用 for 循环制作动画第 2 部分

> ID：15604755
> 
> 赞同：0
> 
> 时间：2013-03-24T22:22:23.110
> 
> 标签：actionscript-3, flash-builder

我还有一个问题一直困扰着我。这有点像我的另一个问题[“使用 for 循环动画？](https://stackoverflow.com/questions/13880842/animating-with-a-for-loop) ”的后续行动

这是我的代码： *ball 是从名为 Ball 的外部类中提取的。*

```
package
{
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.events.KeyboardEvent;
    import flash.text.TextField;
    import flash.ui.Keyboard;

    public class Dummy extends Sprite
    {

        private var balls:Array;
        private var ball:Ball;
        private var ballNum: Number = 10;

        private var ax:Number = 4;

        public function Dummy()
        {
            init();
        }
        private function init():void
        {
            balls = new Array();
            for(var i:Number = 0; i < ballNum; i++)
            {
                ball = new Ball(Math.random() * 30);
                ball.x = Math.random() * stage.stageWidth;
                ball.y = Math.random() * stage.stageHeight;
                addChild(ball);

                balls.push(ball);
            }
            addEventListener(Event.ENTER_FRAME, onEnterFrame);
        }

        protected function onEnterFrame(event:Event):void
        {
            for(var i:int = 0; i < balls.length; i++)
            {
                balls[i].x += ax;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:35:37.197

给每个球对象一个不同的方向，并用它来移动球而不是`ax`值。

```
package
{
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.events.KeyboardEvent;
    import flash.text.TextField;
    import flash.ui.Keyboard;

    public class Dummy extends Sprite
    {

        private var balls:Array;
        private var ball:Ball;
        private var ballNum: Number = 10;

        private var directions:Array = [new Point(-1,-1),new Point(0,-1),new Point(1,-1),
                                new Point(-1,0),new Point(1,0),
                                new Point(-1,1),new Point(0,1),new Point(1,1)];

        public function Dummy()
        {
            init();
        }
        private function init():void
        {
            balls = new Array();

            for(var i:Number = 0; i < ballNum; i++)
            {
                ball = new Ball(Math.random() * 30);
                ball.x = Math.random() * stage.stageWidth;
                ball.y = Math.random() * stage.stageHeight;
                ball.direction = directions[Math.floor(Math.random()*directions.length)];
                addChild(ball);

                balls.push(ball);
            }
            addEventListener(Event.ENTER_FRAME, onEnterFrame);
        }

        protected function onEnterFrame(event:Event):void
        {
            for(var i:int = 0; i < balls.length; i++)
            {
                balls[i].x += balls[i].direction.x;
                balls[i].y += balls[i].direction.y;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:23:08.290

为您的`Ball`类提供速度属性，以及`move()`调整它们各自坐标的方法，并且可能会在以后增强以检查碰撞，例如，您的球可以反弹墙壁。

```
// Ball class additions follow
private var vx:Number;
private var vy:Number;
public function Ball() {
    // ... original constructor here
    var angle:Number=Math.random(2.0*Math.PI); // random angle
    var vel:Number= MAX_VELOCITY*(0.5+0.5*Math.random()); // random velocity module
    // define this constant^
    vx=vel*Math.cos(angle);
    vy=vel*Math.sin(angle); // composites of velocity
} 
public function move():void {
    this.x+=vx;
    this.y+=vy;
}

// main class
    protected function onEnterFrame(event:Event):void
    {
        for(var i:int = 0; i < balls.length; i++)
        {
            balls[i].move();
        }
    } 
```

# java - 带有java冒泡排序的Nullpointerexception

> ID：15604764
> 
> 赞同：0
> 
> 时间：2013-03-24T22:23:06.143
> 
> 标签：java, sorting, nullpointerexception

我一直在从事一个项目很长时间了，我遇到了一个空指针异常。我知道这是当一个对象没有指向任何东西的时候。在 Java 中进行冒泡排序时出现此错误。我无法弄清楚是什么导致了这个异常，因此无法解决它。此代码的目的是按特定顺序对一组学生 ID 号进行排序，我选择了降序。

```
 public static void idNumber()
    {
        String[] iD = new String[150];  //array for ID Numbers
        //System.out.println("Original order");
        for(int i = 0; i < nNumStudents; i++)   //add ID numbers to array iD
        {
            iD[i] = srStudents[i].getStudentKey();

            //System.out.println(srStudents[i].getStudentKey());
        }
        //bubble sort
        int k =0;
        int j =0;
        boolean exchange = true;
        String temp;
        temp = new String();
        while ((k < iD.length - 1) && exchange)
        {
            exchange = false;
            k++;
            for(j = 0; j < iD.length - k; j++)
            {
                if(iD[j].compareTo(iD[j + 1]) > 0)
                {
                    temp = iD[j];
                    iD[j] = iD[j + 1];
                    iD[j + 1] = temp;       
                    exchange = true;

                }
            }
        }
        System.out.println(iD);
    }

Exception in thread "main" java.lang.NullPointerException
at java.lang.String.compareTo(String.java:1139)
at StudentRegistrar.idNumber(StudentRegistrar.java:152)
at Sort.main(Sort.java:21) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:52:25.803

从您的代码一目了然，我的猜测是您的数组大小可能超过了学生的数量。如果是这种情况，您将尝试比较数组中的空槽，这会产生空指针异常。要解决此问题，请递增到 nNumStudents 而不是数组的全长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T22:55:01.827

这个空指针即将出现，因为所有成员`String array String[] iD = new String[150];` 都没有初始化，例如填充这个 iD 数组的 for 循环要么直到 150 才运行，要么它的一个成员被初始化为 null 所以

首先打印并检查 nNumStudents 的值应该是 150。然后确保分配给 iD 数组的每个值都是非空值，您可以通过修改代码来打印分配给它的所有值来做到这一点

```
for(int i = 0; i < nNumStudents; i++)   //add ID numbers to array iD
    {
        iD[i] = srStudents[i].getStudentKey();

        //uncomment the below line and see if it doesn't print null

        System.out.println(srStudents[i].getStudentKey());
    } 
```

如果超过 150，那么你会得到一个`ArrayIndexoutofbound`异常，而不是空指针

# java - 来自ftp的XmlPullParser，带有用户名和密码

> ID：15604766
> 
> 赞同：0
> 
> 时间：2013-03-24T22:23:29.937
> 
> 标签：java, android, xml-parsing, ftp, xmlpullparser

我正在使用 XmlPullParser，效果很好。现在解决问题，我需要在我的网络酒店的 ftp 服务器上读取一个 xml 文件。我尝试在 url 中使用用户名和密码，但它似乎在我的网络酒店上工作，那么这是在此代码中使用用户名和密码的一种方法吗？

```
URL urlXml;
try {
    urlXml = new URL(url);
    XmlPullParserFactory parserCreator = XmlPullParserFactory.newInstance();
    XmlPullParser parser = parserCreator.newPullParser();
    parser.setInput(urlXml.openStream(), null);

    int parserEvent = parser.getEventType();
    while (parserEvent != XmlPullParser.END_DOCUMENT) {
        parserEvent = parser.next();
    }
} catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:03:05.973

基本上，先从 FTP 拉取文件然后再将其提供给 XML 解析器会容易得多，因为在下载过程中可能会出现很多问题，并且在解析器中处理它们会非常困难。

此外，您应该检查您的 URL 是否包含正确格式的用户名/密码：“ [ftp://user:password@server.com/file.dat](ftp://user:password@server.com/file.dat) ”或类似的东西。

# html - 为什么我的网站背景图像的顶部和底部被截断（全屏图像背景）？

> ID：15604771
> 
> 赞同：0
> 
> 时间：2013-03-24T22:23:46.803
> 
> 标签：html, css, image, fullscreen, image-scaling

我在使用全屏背景图像的网站上遇到图像顶部和底部被截断的问题。我最初认为 padding: 0px 和 margin: 0px 属性（为 html 设置，CSS 中的 body）是罪魁祸首，但我尝试删除这些无济于事。应该指出的是，这种布局是从其他地方借来的。有一个单独的 .js 文件，其中没有任何样式，可以旋转背景图像。

我的 CSS 的哪些部分是问题，我如何调整以使整个图像始终可见，而不管我使用的是哪个图像？

此布局的任何响应式设计指针的奖励积分:-)

相关HTML：

```
<html>
<body>
<div id="main_wrapper">
<div id="fullscreen">
    <div id="backgroundImage">
        <div style="visibility: visible; opacity: 1;" id="homebg">
          <table cellpadding="0" cellspacing="0">
            <tbody><tr>
              <td>
                <img src="images/bg.jpg">
              </td>
            </tr>
          </tbody></table>
        </div>
      </div>
 </div>
</div>
</body>
</html> 
```

相关CSS：

```
html, body {   margin:0;
  padding:0;
  border:0;
  outline:0;
  font-size:100%;
  vertical-align:baseline;
  background:transparent;
}
#main_wrapper   { width: 100%; height: 100%; position: absolute; top: 0px; left: 0px; text-align: left; z-index: 0; }
#backgroundImage, 
#backgroundImage table, 
#backgroundImage td     {height: 100%; overflow: hidden; width: 100%;}
#backgroundImage      {position:relative;}
#fullscreen {
  position:fixed;
  width:100%;
  height:100%;
  z-index:-200;
}
#backgroundImage div { 
  height: 200%;
  left: -50%;
  position: absolute;
  top: -50%;
  width: 200%;
  z-index: -200;
}
#backgroundImage td {
  text-align: center;
  vertical-align: middle;
}
#backgroundImage img {
  margin: 0 auto;
  min-height: 50%;
  min-width: 50%;
  -ms-interpolation-mode: bicubic;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T06:00:13.567

只需删除 css 的所有部分并仅保留 html，正文部分样式。

并在标签中添加宽度 100%，如下所示

```
<img src="images/bg.jpg" width="100%" /> 
```

# javascript - Javascript 中使用 call 关键字调用函数的好处

> ID：15604775
> 
> 赞同：0
> 
> 时间：2013-03-24T22:24:23.950
> 
> 标签：javascript

在 JavaScript 中，我们可以通过两种方式调用函数：

```
function f(message) { ... }
f.call(this, "test"); 
```

要不就：

```
f("test") 
```

除了我们可以在第一种情况下指定范围之外，使用这种语法是否有其他优势？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T22:30:15.127

您可以根据需要/需要传递`this`对象。例如

```
[].slice.call("abcdef", 2) === ['c', 'd', 'e', 'f']; 
```

或者

```
var x = {hasOwnProperty:function() { return false; }, key:42};
x.hasOwnProperty('key'); // == false
{}.hasOwnProperty.call(x, 'key'); // true 
```

您应该注意这`call`不是关键字，而是`Function.prototype`.

读：

*   [函数原型调用](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)
*   [Function.prototype.apply](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T22:42:35.110

> 除了我们可以在第一种情况下指定范围

您不能“指定范围”。范围由代码的编写方式设置，除了使用`with`. 函数的`this`关键字与作用域无关，它总是在当前执行上下文中解析为局部变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T00:51:22.113

您还可以将`call`(and [`apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)) 用于[部分](http://ejohn.org/blog/partial-functions-in-javascript/) [函数](http://benalman.com/news/2012/09/partial-application-in-javascript/) [应用程序](https://stackoverflow.com/questions/9817809/does-javascript-support-partial-function-application)，即创建一个函数，该函数使用一些预设参数调用另一个函数。例如：

```
// Basic add function
function add(a, b) {
    return a + b;
}

// Function to create new adders with a preset 'a' argument
function createAdder(a) {
    return function(b) {
        return add.call(null, a, b);
    }
}

// Let's create a function that always adds five to what's passed in
var addFive = createAdder(5);

// Now let's test it
addFive(6); // 11 - it works! 
```

# xcode - Xcode 4.6.1 中的段点击操作

> ID：15604778
> 
> 赞同：0
> 
> 时间：2013-03-24T22:24:45.320
> 
> 标签：xcode, cocoa, nssegmentedcontrol

在新版本的 Xcode 中，单击该段时看不到任何启动 IBAction 的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:46:46.343

找到了，

我只是按原样将 segmentedControl 连接到 IBAction。它不起作用的原因是给出错误的东西实际上是 IBAction 中的一些代码，而不是段和 IBAction 之间的链接。愚蠢的我...

有时您只是看不到自己的愚蠢错误:-(

无论如何，非常感谢大卫试图提供帮助:-)

# javascript - 多个实例与一个具有动态内容的实例

> ID：15604779
> 
> 赞同：1
> 
> 时间：2013-03-24T22:24:48.317
> 
> 标签：javascript, jquery, memory-management, kendo-ui

我正在构建一个具有多个（20 多个）不同 kendoWindows 的 Kendo UI 应用程序。我想知道如果我在 DOM 加载时为每个实例实例化一个实例，性能是否会成为一个问题。

仅在需要时实例化然后在它关闭时将其杀死会更好吗？

我正在考虑的第三个选项是实例化一个 kendoWindow 并在打开时更改它的参数和内容。

我想我想知道的是第一种方法是否会对性能产生影响，以及其他两种方法中的一种是否会是一个更好的主意。

这是我的代码：

```
// Initialize all the dialogs.
    function _initializeDialogs( ){
        // that.dialogs is an object literal filled with jquery objects.
        var dialogs = that.dialogs;

        var defaults = {
            resizable: false,
            draggable: false,
            modal: true,
            visible: false,
            open: setCenter
        }

        // Iterate over the dialogs and initialize each one as kendoWindows.
        for ( dl in dialogs ){
            // Assign that.dialogs[dl] to a variable.
            var dialog = dialogs[ dl ];

            // If DOM element exists.
            if( dialog ){
                // If Dialog jquery element is not already a kendoWindow.
                if( !dialog.data( 'kendoWindow' ) ){
                    // Instantiate the kendoWindows.
                    dialog.kendoWindow( defaults );
                }
            }
        }
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:54:27.940

第三个选项将是最好的选项，因为您只有一个窗口要管理，并且内容作为输入参数提供，这在这种情况下是一个很好的解决方案。

# java - Swingworker.done() 完成后冻结 GUI 几秒钟

> ID：15604782
> 
> 赞同：1
> 
> 时间：2013-03-24T22:25:04.857
> 
> 标签：java, multithreading, swing, swingworker, event-dispatch-thread

我有一个 SwingWorker，它在后台读取和处理文件，然后在 JTextPane 中格式化和显示具有各种样式的数据。

如果文件很大（超过 200K），我将显示一个带有进度条的对话框。在 SwingWorker 的 done() 方法中，我填充了 JTextPane，然后隐藏了对话框。done() 方法如下所示：

```
protected void done() {
   populateTextPane();

   hideProgressDialog();
   System.out.println("After hideProgressDialog");
} 
```

当它运行时，我会看到对话框消失并且控制台上的 println 消息，但随后 GUI 再冻结 10-15 秒，在冻结结束时数据在 JTextPane 中变得可见。

我认为 done() 方法中发生的任何事情都会发生在事件调度线程中。但显然 JVM 正在生成另一个线程来隐藏对话框并在填充 JTextPane 时执行 println。我想保持显示进度对话框，直到 GUI 准备好再次接受用户输入......我如何检测 done() 中的所有内容何时真正完成？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T22:40:35.690

该`done`方法在 EDT 上执行。如果您对此表示怀疑，您可以随时使用该`EventQueue.isDispatchThread()`方法进行检查。

一种可能的解释是，该方法计划在 EDT 上`populateTextPane()`重绘。`JTextPane`这意味着该方法在您在 UI 中`done()`看到该方法的结果之前已经完成。`populateTextPane()`

您可以尝试重写`done`方法如下

```
protected void done() {
   populateTextPane();
   SwingUtilities.invokeLater( new Runnable(){
     @Override
     public void run(){
       hideProgressDialog();
       System.out.println("After hideProgressDialog");
     }
   } );
} 
```

这将确保`hideProgressDialog`仅在 EDT 上的任何可能`Runnable`的计划之后执行。`populateTextPane()`但是，这仍会使您的 UI 冻结 10-15 秒。唯一的区别是进度对话框仍然可见。

如果进度对话框显示在`JTextPane`. `RepaintManager`可能决定只在对话框变得不可见后重新绘制（`JTextPane`因此不再隐藏`JTextPane`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T08:20:46.357

听起来 populateTextPane 是 EDT 上的一个长期运行的过程 - 你不想要它。尝试拆分：SwingWorker 有 api 支持发布中间结果。

就像是

```
@Override
public Void doInBackground() throws Exception {
    ...
    while (!reader.isReady()) {
        publish(reader.readLine());
    }
    return null;
}

@Override
protected void process(List<String> lines) {
    for(String line: lines) {
        textPane.append(line);
    }
} 
```

# c# - 如何将以下 if 语句转换为 switch/case

> ID：15604785
> 
> 赞同：0
> 
> 时间：2013-03-24T22:25:26.290
> 
> 标签：c#

如何将以下 if 语句转换为 switch/case

```
private void Click(object sender, EventArgs e)
{
   if (Object.ReferenceEquals(sender, c0)) { spotClick(0); }
   if (Object.ReferenceEquals(sender, c1)) { spotClick(1); }
   if (Object.ReferenceEquals(sender, c2)) { spotClick(2); }
   if (Object.ReferenceEquals(sender, c3)) { spotClick(3); }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:56:40.393

如果我们详细检查您的代码，我们会发现您正在比较两个对象的引用。由于一个对象的引用不能等于其他对象的引用，因此在此代码中似乎可以使用`if-else if`组合，因此它可能如下所示：

```
private void Click(object sender, EventArgs e)
{
   if (Object.ReferenceEquals(sender, c0)) { spotClick(0); }
   else if (Object.ReferenceEquals(sender, c1)) { spotClick(1); }
   else if (Object.ReferenceEquals(sender, c2)) { spotClick(2); }
   else if (Object.ReferenceEquals(sender, c3)) { spotClick(3); }
} 
```

`ReferenceEquals`如果两个对象都为 null（请[在此处查看](http://msdn.microsoft.com/en-us/library/system.object.referenceequals.aspx)），则该方法也返回 true，这可能会产生多重比较为 true（执行了多个 sporClick 调用），但在正常情况下，我们不能指望这`sender`是`null`因为`Click`事件触发了，因此这是一个合法的代码和等价的到您发布的一个。如果 c0、c1、c2 和 c3 是常量表达式，则此类代码可以转换为 use`switch`语句，但正如我们所见，它们是引用从 `Control`类派生的类型的对象的变量，因此不能在内部使用`case`（检查[在这里](http://msdn.microsoft.com/en-us/library/06tc147t%28v=vs.71%29.aspx)）。因此，您**无法**将此代码转换为`switch/case`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T22:35:23.403

您如何将变量映射到值然后调用该值？像这样：

```
Dictionary map = new Dictionary();
map.add(c0, 0);
map.add(c1, 1);
map.add(c2, 2);
map.add(c3, 3);

spotClick(map[sender]); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-24T22:36:22.467

转换为开关并不是最优化的方式，因为它们对于每个“if”都是不同的值。但是，您可以执行 for 循环。

```
for(var i = 0; i < 4; i++){
   if (Object.ReferenceEquals(sender, "c" + i)) { spotClick(i); }
} 
```

我猜在 C# 中连接 "c" + i 会是这样的

string.Format("c{0}",i);

# google-maps - 我的网络服务器上的 KML 文件未更新叠加样式

> ID：15604787
> 
> 赞同：2
> 
> 时间：2013-03-24T22:25:42.663
> 
> 标签：google-maps, kml, google-latitude

我花了好几个小时试图弄清楚如何自定义谷歌纵横徽章公共提要。问题在于它是来自谷歌的预定义 KML 文件，无法更改。我想出的是使用一点 PHP 提取坐标并将它们加载到我自己的 KML 文件中，该文件由我自己的网络服务器提供（我假设是公共访问）。

这可行，但我面临的最新问题是，当我重新加载页面时，我对 KML（Ballonstyle 等）所做的样式更改没有反映出来。我正在使用以下 Javascript 加载地图和叠加层：

```
var map;
var src = 'https://myip/kml/kmlfile.kml
    function initialize() {
      map = new google.maps.Map(document.getElementById('map-canvas'), {
        center: new google.maps.LatLng(-19.257753, 146.823688),
        zoom: 2,
        mapTypeId: google.maps.MapTypeId.TERRAIN
      });
      loadKmlLayer(src, map);
    }

    function loadKmlLayer(src, map) {
      var kmlLayer = new google.maps.KmlLayer(src, {
        suppressInfoWindows: true,
        preserveViewport: false,
        map: map
      });
    } 
```

KML 文件是由 PHP 脚本编写的文件，它从纬度提要中获取最新的一组坐标。

现在这是真正奇怪的一点。为了尝试诊断问题，我从我的服务器中删除了 kml 文件....但是地图仍然加载并且似乎使用了许多迭代前的旧样式。当'src'位置甚至不存在kml文件时，我对javascript如何加载地图感到非常困惑！？！这是缓存问题吗？

我最初在谷歌网站上有 kml 文件，但它不是一个可写的位置，所以我把它从那里移到了我自己的网络服务器上。事实上，我已经从谷歌网站和我的网络服务器上删除了所有旧的 kml 文件，但地图和样式仍然像魔法一样继续加载！

我会感谢任何能够帮助我诊断这个奇怪问题的 KML 专家。

# entity-framework - GridView 中的 ItemType 属性有问题吗？

> ID：15604788
> 
> 赞同：0
> 
> 时间：2013-03-24T22:25:58.510
> 
> 标签：entity-framework, entity

我对 GridView ItemType 属性有疑问：

当我在 html 中设置 ItemType 属性时，由设置的实体的元数据

已加载诸如 DisplayName、Validation 之类的 DataAnnotations，并且一切正常

但是当我在 Page_Load 事件中设置 ItemType 属性时，实体的元数据是

没有加载，我不知道为什么会这样？

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:01:56.430

I have found the solution

I set the ItemType Property in the OnInit event of the gridview and it is working now

# linux - 每 20 行使用 awk 打印标题信息

> ID：15604789
> 
> 赞同：1
> 
> 时间：2013-03-24T22:26:01.063
> 
> 标签：linux, bash

我有一个包含数千个条目的大数据项目。数据大约有 20 列，包括气缸、汽油里程、品牌、型号等。我使用 awk 输出所有数据。我必须将数据组织成一个漂亮的表格。

我正在使用这样的脚本：

```
#!/bin/bash

while read x
do
echo $x | awk -F ',' ' { print $1":"$2":"$4":"$7":"$8":"$10":"$11":"$12":"$22":"$24 } '
done 
```

冒号所在的地方会有标题。我需要每 20 行重复一次，并且在第 20 行和标题之后必须有一个换行符。此外，最后一行应输出条目数。

我被困在最后三件事上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T22:33:48.040

使用循环没有意义`while read`，实际上它使事情变得复杂，因为它很难`awk`保持对行号的计数。尝试：

```
awk -F, 'NR % 20 == 1 { print "header columns" }
    { print $1,$2,$4,$7,$8,$10,$11,$12,$22,$24 }' OFS=: input-file 
```

# javascript - 将 jQuery .load() 存储到变量中

> ID：15604791
> 
> 赞同：0
> 
> 时间：2013-03-24T22:26:16.560
> 
> 标签：javascript, jquery

我想将 .load (#p3) 中的值存储到变量中。#p3 是从值为 0 或 1 的 php 脚本加载的。我的示例不起作用，有人知道该怎么做吗？

```
 setInterval(
        function(){
            $('#temp_mash').load('update.php #p1');
            $('#reg_mash').load('update.php #p2');
            var v = ($('#farge').load('update.php #p3'));
        }, 1000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:31:23.573

您可以使用该`html`功能

```
setInterval(
function()
{
    $('#temp_mash').load('update.php #p1');
    $('#reg_mash').load('update.php #p2');
    var v = ($('#farge').load('update.php #p3'));
    var dataYouWant = $("#farge").html();
}, 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T22:31:47.070

```
$.get('update.php #p3', function(data) {
    // do something ...
}); 
```

或者

```
$.post('update.php #p3', function(data) {
    // do something ...
}); 
```

或者

```
$.ajax({
    url: 'update.php #p3',
    success: function(data) {
        // do something ...
    }
}); 
```

# css - IE9 最初无法识别带有 SVG 背景图像的伪元素的高度

> ID：15604797
> 
> 赞同：1
> 
> 时间：2013-03-24T22:26:45.790
> 
> 标签：css, svg, internet-explorer-9

我有一个奇怪的问题，最好通过查看 IE9 中的实时示例来解释：

[http://brandonintermediate.spikeatschool.co.nz](http://brandonintermediate.spikeatschool.co.nz)

请注意，“uber”或悬停状态在索引栏按钮的右侧有一个白色三角形，它创建了一个色带末端效果。

在 IE9 中，SVG 最初是按比例显示的，但是一旦您将鼠标悬停在列表中那个较大的按钮上，它就会以某种方式意识到它需要拉伸 SVG 以适应该区域，然后还会以正常大小正确显示功能区末端按钮。我不确定这里发生了什么，并且已经尝试了几种方法来修复它。我希望它不会太难修复。这是与 SVG 代码一起创建效果的 CSS：

```
nav#main ul li a:hover {
  color: #FFFFFF;
  background: #333333;
  background: -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #333333), color-stop(100%, #000000));
  background: -webkit-linear-gradient(#333333, #000000);
  background: -moz-linear-gradient(#333333, #000000);
  background: -o-linear-gradient(#333333, #000000);
  background: linear-gradient(#333333, #000000);
  *zoom: 1;
  filter: progid:DXImageTransform.Microsoft.gradient(gradientType=0, startColorstr='#FF333333', endColorstr='#FF000000');
  margin: 0 -5px 0 -20px;
  padding: 6px 14px 6px 29px;
  position: relative;
}

nav#main ul li a:hover:after {
  content: '';
  position: absolute;
  display: block;
  top: 0;
  right: 0px;
  width: 5px;
  height: 100%;
  background-image: url("triangle.svg");
  background-size: auto;
  background-color: transparent;
  background-repeat: no-repeat;
}

<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none">
<path d="m100,0 l0,100 l-100,-50 l100,-50z" stroke-width="0" fill="#FFFFFF"/>
</svg> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T10:29:15.063

结束了这个：

```
&:after {
    content: '';
    position: absolute;
    display: block;
    top: 0;
    right: 0;
    width: 5px;
    height: 100%;
    background-image: url('triangle.svg');
    background-color: transparent;
    background-repeat: no-repeat;
    background-size: 100% 100%;
}

<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none">
    <path d="m100,0 l0,100 l-100,-50 l100,-50z" stroke-width="0" fill="#FFFFFF"/>
</svg> 
```

关键区别在于背景大小属性。这也在 Firefox 中修复了它。

# javascript - 延迟执行直到用户提交输入

> ID：15604798
> 
> 赞同：1
> 
> 时间：2013-03-24T22:26:57.647
> 
> 标签：javascript, html, css

Javascript中是否有办法延迟执行，直到用户在输入表单中填写数据并在提交输入按钮上按下提交？

具体来说，我的 JS 小程序有一些预设的默认布局，但用户也可以选择自定义配置。如果他们选择“创建自定义”，则会显示以前隐藏的表单。我需要暂停执行，直到他们提交数据——可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:41:53.037

附加表单提交事件处理程序。

*   [https://developer.mozilla.org/en-US/docs/DOM/form.submit](https://developer.mozilla.org/en-US/docs/DOM/form.submit)
*   [http://api.jquery.com/submit/](http://api.jquery.com/submit/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-24T22:40:16.070

据我所知，JavaScript 中没有`sleep()`或没有`wait()`功能。您将不得不结束执行（即方法返回）并在触发事件（即用户提交数据）或超时后重新调用方法。

您当然可以通过进入一个无限循环来“停止”执行，该循环在设置某个变量之前不会返回；并且这个变量是在用户提交数据后设置的。但是这样的无限循环不是好的做法

# ios - 适合整个背景 od UITableView 的图像大小

> ID：15604808
> 
> 赞同：0
> 
> 时间：2013-03-24T22:28:24.520
> 
> 标签：ios, uitableview, uiimage

我想为我的 UITableView 添加一个背景图像，它适合 UI，还有导航控制器和工具栏。在那种情况下，我没有找到适合 iPhone 和 iPad 不同屏幕的 tableview 的图像大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T22:33:16.567

纵向模式下工具栏和导航栏的标准高度是 44 磅，状态栏是 20 磅，因此在带有工具栏的导航控制器中的表格视图在 3.5 英寸屏幕的 iPhone 上将剩下 372 磅（480 - 2 * 44 - 20) 和 4" 屏幕上的 460 (568 - 2 * 44 - 20)。在横向模式下，条形图只有 32 点高（尽管仅在 iPhone 上，在 iPad 上，没有区别）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:07:02.203

只需确保将表格视图的背景设置为清除颜色：

```
self.tableView.backgroundColor = [UIColor clearColor]; 
```

# php - 嵌套资源控制器 laravel 4

> ID：15604809
> 
> 赞同：4
> 
> 时间：2013-03-24T22:28:26.630
> 
> 标签：php, laravel, laravel-4

在 laravel 4 中，我想要一个嵌套控制器。

我已阅读文档，但没有找到有关如何操作的任何解释。

假设在一个应用程序中我有一些文章，每篇文章都有他自己的一组评论。我希望能够通过访问这样的 URL 来获取特定文章的所有评论。

[http://myapp.com/articles/5/comments](http://myapp.com/articles/5/comments)

我创建了一个commentsController，但我不知道如何从url 正确获取文章ID，所以我可以将它传递给我控制器中的所有CRUD 方法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T08:31:10.310

在 route.php 中

```
Route::resource('articles.comments','commentsController'); 
```

在控制器中

```
public function show($articleId, $comment) {}

public function create($articleId) {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T01:09:49.937

我不确定嵌套资源控制器是要走的路……这就是我要做的。

```
Route::resource('articles','articlesController');
Route::get('articles/{$id}/comments','articlesController@comments'); 
```

然后在你的控制器中

```
public function comments($id) {

} 
```

# uml - 何时应该在分层状态机上执行转换操作？

> ID：15604810
> 
> 赞同：3
> 
> 时间：2013-03-24T22:28:31.180
> 
> 标签：uml, modeling, state-machine

鉴于此 HSM 示例模型 - [http://www.embedded.com/design/system-integration/4008251/8/A-crash-course-in-UML-state-machines-Part-2](http://www.embedded.com/design/system-integration/4008251/8/A-crash-course-in-UML-state-machines-Part-2) - 我想知道应该做什么是执行过渡动作的正确时刻。假设这台机器处于其初始状态 S211 并且事件 G 被调度（S21 -> S1） - 让我们假设这个事件有一些动作。顺序应该是这样的：

退出到最小共同祖先 (S) - 转换动作 - 进入目标状态 (S1) - 目标的初始化动作...

或者可能是这样的：

退出到转换的源状态 (S21) - 转换动作 - 退出到最小公共祖先 (S) - 进入目标状态 (S1) - 目标的初始化动作

?

简而言之 - 过渡动作与“过渡源”还是“最不共同的祖先”相关联？

维基百科上的描述示例太简单了，无法提供这些细节...... UML 规范似乎表明 LCA 答案是正确的，但我不确定。

提前谢谢 (;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T01:55:51.903

自动机理论表明，动作既不会发生在源中，也不会发生在目标中。但是自动机理论通常也不考虑分层状态。所以，是的，LCA 与任何过渡行动的理论假设一样好。

然而，由 Miro Samek (QHSM) 设计的状态机代码实际上在源状态内执行转换动作。请理解，这既不是问题也不是缺陷。

就任何特定实现而言，重要的是转换动作以一致的方式发生。Miro 的代码就是这种情况。

如果出于某种原因您确实需要在 LCA 或目标状态中发生转换操作，您可以使用“扩展状态”来实现结果。但在实践中，它真的没有必要。

# c - 集中式数据访问或变量

> ID：15604815
> 
> 赞同：0
> 
> 时间：2013-03-24T22:29:31.997
> 
> 标签：c, database, linux, distributed-computing

我正在尝试找到一种方法来访问集中式数据库以进行检索和更新。

以下是我正在寻找的，

服务器 1 有这个变量，例如 int counter；

服务器 2 将与用户交互，并在用户使用服务时增加计数器，直到达到某个阈值。当达到此阈值时，服务器 2 将开始拒绝用户访问。

此外，用户将能够从多个位置使用多个服务器（如服务器 2），并且每次用户访问访问任何服务器时，计数器都会增加。

我试过谷歌，但很难搜索没有名字的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:17:38.213

一种设计方法是按用户进行分片 - 即根据用户的 ID 在服务器之间拆分用户。也就是说，如果您有 10 台服务器，那么 ID 以 2 结尾的用户会将其所有数据存储在服务器 2 上，依此类推。这假设用户 ID 是均匀分布的。

另一种方法是按位置对用户进行分片——例如，如果您在亚洲和欧洲有服务器。您需要用户记录中的一个属性来告诉您用户的位置；基于此，您将知道将它们路由到哪个服务器。

最终，所有这些设计选项都具有“用户的主记录位于何处？”的概念。这些方法中的每一种都试图明确地回答这个问题。

另一种方法与多主复制有关，一些数据库供应商支持这种方法；这种方法也不能很好地扩展（即很难将其扩展到 20 台服务器），但您可能也想研究一下。

# html - 未指定的内容高度，自动溢出和页眉/页脚始终在视图中，页面上没有滚轮

> ID：15604816
> 
> 赞同：0
> 
> 时间：2013-03-24T22:29:32.357
> 
> 标签：html, css, layout, overflow, positioning

好的，所以我在应该是简单的代码方面遇到了相当烦人的问题，我已经搜索了重复项，但它似乎略有不同。这是我的基本布局：

***html:***

```
<div id="wrapper">
    <div id="header"></div>
    <div id="content"></div>
    <div id="footer"></div>
</div> 
```

***CSS：***

```
html,body,#wrapper {
    height: 100%;
    margin: 0;
    padding: 0;
}

#wrapper {
    position:   relative;
}

#header {
    position:   fixed;
    top:    0px;
    height: 40px;
    width:  100%;
    color:  white;
    background-color: #000000;
}

#content {
    position:   fixed;
    padding-bottom: 50px; /* to match the footer height*/
    top:    40px;
    bottom: 50px;
    height: 100%;
    width:  100%;
    overflow:   auto;
}

#footer {
    position:   fixed;
    bottom: 0px;
    height: 49px;
    width:  100%;
    border-top: 1px solid #000000;
    background-color:   skyblue;
    font-weight:    bold;
} 
```

这个想法是包装器内的 3 个 div 占据了 100% 的页面 - 换句话说：它们**总是在 view 中**。页眉在顶部，页脚在底部，内容分别在中间。

页脚和页眉可以是固定大小（无论是像素还是页面高度的百分比），我想自动占据页面其余部分的内容。

问题是页面可以有许多不同的分辨率（所以内容不能是固定的高度，除非我使用 javasript）。另一件事是内容 div 可以具有可变数量的元素，这意味着它必须允许滚动内容，同时保持页眉和页脚都在视图中。主要部分是：滚轮**必须**在内容 div 内，而不是页面范围内。

我几乎有了这个 css 想要的东西，但是当它们溢出内容 div 时，某些内容无法滚动到（我说的是垂直溢出 - 不会有水平溢出）。我真的很感激一些帮助，但这并不像看起来那么容易/简单，如果可能的话，因为我认为你需要一个固定的溢出高度：auto。

如果可能的话，我想要一个纯 css 解决方案，所以不要向我（或永远）提及 JqueryMobile。

这是它现在的样子，注意内容 div 上的滚轮问题： ![布局几乎是正确的，减去溢出行为](../Images/a3a558388dbf288573d90b83436bb1cc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:40:46.290

我讨厌这种情况发生...我在发布后找到了解决方案，决定再尝试一件事：我已将#content 高度设置为“自动”并且做到了（因为有一次我将自己的注意力吸引到滚轮，很明显问题出在 div 高度上）！只需要测试并确保所有/大多数浏览器都是这种情况！

也许它会对其他人有所帮助！

# c# - 将 php 中的字符串数组转换为 nuSOAP 中的用户定义数据类型

> ID：15604819
> 
> 赞同：0
> 
> 时间：2013-03-24T22:29:55.050
> 
> 标签：c#, php, web-services, nusoap

继续现有问题：[nusoap 可以返回字符串数组吗？](https://stackoverflow.com/questions/2629028/can-nusoap-return-array-of-string)

我想知道函数 GetAllNews() 的代码以将数组 $stack 的字符串作为数据类型“tns:ArrayOfString”返回

Oliver Salzburg 先生仅给出了 ArrayOfString 类型声明的代码，但是如何将字符串数据类型的普通 php 数组转换为用户定义的数据类型 ArrayOfString ？这样我就可以在我的 C# 代码中将这些数据称为：

```
wService.Service WebS = new wService.Service();
wService.ArrayOfString StringArray = new wService.ArrayOfString();
StringArray = WebS.GetAll();
string [] All= StringArray.itemName[0]; 
```

我的目标是将字符串数组从 php/nuSOAP 返回到我的 C# 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T19:58:32.503

首先将代码上方的 ArrayOfString 定义为

```
$server->wsdl->addComplexType(
'ArrayOfString',
'complexType',
'array',
'all',
'SOAP-ENC:Array',
array(),
array(
array(
   'ref'=>'SOAP-ENC:arrayType',
   'wsdl:arrayType'=>'xsd:string[]'
   )
),
'xsd:string'
); 
```

然后将方法“GetAllNews”声明为

```
$server->register('GetAllNews', 
 array(),
 array('return' => 'tns:ArrayOfString'),  //use 'tns:ArrayOfString' instead of 'xsd:string[]'
 'urn:NewsService',
 'urn:NewsService#GetAllNews',
 'rpc',
 'literal',  //You can also use 'encoded'
 ''
); 
```

上面的代码将返回一个字符串数组 ( `string []`) 在 C# 中调用方法 'GetAllNews' 为

```
string [] AllNews = new WebService.GetAllNews(); 
```

# php - 询问使用php和远程数据库登录和注册的android教程

> ID：15604822
> 
> 赞同：0
> 
> 时间：2013-03-24T22:29:59.683
> 
> 标签：php, android, mysql

我正在寻找一个使用 php 和一个真正有效的远程数据库登录和注册 android 应用程序的示例。你能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T23:40:34.610

Mkay... 我喜欢相信你**并不**懒惰。可能是我的失眠在捉弄我。

从这个假设开始，我将给您一个由 LoginActivity 和 LoginValidator 组成的示例。请使用它们作为示例并根据您的需要进行调整。尽管它们确实有效，但您可能需要在这里和那里进行调整以使其适合您当前的环境。

此外，在我的答案的底部，您会找到一个包含**有用链接**的列表。

**登录活动.java**

```
import java.util.concurrent.ExecutionException;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.util.Log;
import android.view.View;
import android.widget.EditText;
import android.widget.TextView;

import com.example.android.yourappname.R;
import com.example.android.yourappname.LoginValidator;
import com.example.android.yourappname.SavedValues; // key value pairs... used for saving the state of the Activity

public class LoginActivity extends Activity {

    public EditText usr;
    public EditText pass;
    final Context context = this;
    private TextView loginButton;
    private Boolean justCreated = false;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login_activity);

        initLoginButton();

        initEditTexts();

        addSwipeGesture();

        justCreated = true;
    }

    @Override
    public void onPause()
    {
        super.onPause();

        Log.v("Login", "onPause");

        SavedValues.setLoginUser(usr.getText().toString());
        SavedValues.setLoginPassword(pass.getText().toString());

        justCreated = false;
    }   

    @Override
    public void onResume()
    {
        super.onResume();

        Log.v("Login", "onResume");

        if (justCreated == true) //if the user recreated the activity, restore the login values from the previous instance
        {
            usr.setText(SavedValues.getLoginUser(), TextView.BufferType.EDITABLE);
            pass.setText(SavedValues.getLoginPassword(), TextView.BufferType.EDITABLE);

            usr.setSelection(usr.getText().length());
        }
        else //if the user only left the activity clear the login values
        {
            usr.setText("", TextView.BufferType.EDITABLE);
            pass.setText("", TextView.BufferType.EDITABLE);
        }
    }   

    private void initLoginButton()
    {
        loginButton = (TextView) findViewById(R.id.btnLogin);
        loginButton.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                onLoginClick();
            }
        });

        deactivateLoginButton();//the login button will be activated after the user types something in the user name field
    }

    private void initEditTexts()
    {
        usr = (EditText) findViewById(R.id.usr);
        pass = (EditText) findViewById(R.id.pass);

        //set the focus on the user's editText
        usr.setFocusable(true);
        usr.setFocusableInTouchMode(true);
        usr.requestFocus();

        usr.addTextChangedListener(new TextWatcher() {

            public void onTextChanged(CharSequence s, int start, int before, int count) {
            }

            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
            }

            public void afterTextChanged(Editable s) {

                if(usr.length() == 0)
                {
                    deactivateLoginButton();
                }
                else
                {
                    activateLoginButton();
                }
            }
        });

        //set the login values from saved data
        usr.setText(SavedValues.getLoginUser(), TextView.BufferType.EDITABLE);
        pass.setText(SavedValues.getLoginPassword(), TextView.BufferType.EDITABLE);
    }

    private void addSwipeGesture()
    {
        View root = findViewById(android.R.id.content).getRootView();
        root.setOnTouchListener(new OnSwipeTouchListener(){

            public boolean onSwipeLeft() {
                onLoginClick();
                return true;
            }
        });
    }

    private void deactivateLoginButton()
    {
        loginButton.setVisibility(View.INVISIBLE);
        loginButton.setClickable(false);
    }

    private void activateLoginButton()
    {
        if (loginButton.getVisibility() != View.VISIBLE)
        {
            loginButton.setVisibility(View.VISIBLE);
            loginButton.setClickable(true);
        }
    }

    private void onLoginClick()
    {
        // Attempting Login
        // test U + P + MAC
        /*
         * // testing MAC address WifiManager manager = (WifiManager)
         * getSystemService(Context.WIFI_SERVICE); WifiInfo wifiInfo =
         * manager.getConnectionInfo(); String MACAddress =
         * wifiInfo.getMacAddress();
         */

        String user = usr.getText().toString();
        String password = pass.getText().toString();

        if (!isOnline()) {
            alert("Must be connected to network!");
        } else {

            LoginValidator logval = new LoginValidator();

            Boolean validity = false;
            try {
                validity = (Boolean) logval.execute(user, password).get();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (ExecutionException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            if (validity) {
                Intent i = new Intent(getApplicationContext(), GMC_MainActivity.class);
                startActivity(i);

            } else {
                alert("Invalid username or password");
            }
        }
    }

    public boolean isOnline() {
        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getActiveNetworkInfo();

        if (netInfo != null && netInfo.isConnectedOrConnecting()) 
        {
            return true;
        }
        return false;
    }

    public void alert(String s) {
        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context);

        // set title
        alertDialogBuilder.setTitle(s);
        alertDialogBuilder.setCancelable(false).setNeutralButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                // if this button is clicked, just close the
                // dialog
                // box and do nothing
                dialog.cancel();
            }
        });
        // create alert dialog
        AlertDialog alertDialog = alertDialogBuilder.create();

        // show it
        alertDialog.show();
    }
} 
```

**登录验证器.java**

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;

import android.os.AsyncTask;

public class LoginValidator extends AsyncTask<String, Void, Boolean> {

    Connection conn = null;

    private String jdbcURL = ""; // URL for your database... IP, port etc.
    private String user = ""; // Username for your DB
    private String passwd = ""; // Password for your DB

    @Override
    protected Boolean doInBackground(String... arg0) {

        String username = arg0[0];
        String password = arg0[1];

        Boolean v = false;
        ResultSet rs = null;
        Statement stmt = null;

        try {
            DriverManager.registerDriver(new oracle.jdbc.driver.OracleDriver()); // I use an oracle DB addapt this to your own DB
            conn = DriverManager.getConnection(jdbcURL, user, passwd);

            try {
                stmt = conn.createStatement();
                try {
                    rs = stmt
                            .executeQuery("SELECT * FROM ts_v4_res.user_t WHERE user_name='"
                                    + username + "'"  /*+" AND pass_word='" +password+"'"*/);

                    if (rs.next()) {
                        String p=rs.getString("pass_word");
                        if (p==null){
                            if(password.equals(""))
                                v = true;}
                        else
                            if(p.equals(password))
                                v=true;                         
                    }

                } finally {
                    try {
                        rs.close();
                    } catch (Throwable ignore) {
                    }
                }
            } finally {
                try {
                    stmt.close();
                } catch (Throwable ignore) {
                }
            }

        } catch (java.sql.SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (java.lang.ClassCastException e) {
            e.printStackTrace();
        }

        return v;
    }
} 
```

**带有示例的有用链接**（其中很多）**：**

[使用 MySQL 数据库连接的 Android 登录活动](http://codeoncloud.blogspot.ro/2012/07/android-login-activity-with-mysql.html)

[使用 mysql 数据库的 Android 登录活动](https://stackoverflow.com/questions/14352125/android-login-activity-using-mysql-database)

[如何从 mysql 数据库连接登录到我的 android 应用程序](https://stackoverflow.com/questions/12428166/how-to-connect-login-to-my-android-app-from-a-mysql-database)

[使用 MySQL 数据库连接的 Android 登录活动](https://stackoverflow.com/questions/11743952/android-login-activity-with-mysql-database-connection)

希望这会让你开始。

干杯

# ios - OOP - 使用 UIView 来协调多个子视图？

> ID：15604825
> 
> 赞同：1
> 
> 时间：2013-03-24T22:30:13.253
> 
> 标签：ios, oop, uiview

这是一个面向对象的编程问题：

所以我正在尝试构建一个显示散点图的 UIView 类。在我当前的实现中，我创建了一个数据源协议，允许 chartView 询问绘制其数据所需的所有信息。

就目前而言，当有人初始化chartView并为其提供数据源时，chartview会创建/管理几个子视图：显示所有数据点的“dotsView”，添加dotview的滚动视图（因此它是可滚动的） ，以及位于背景中并显示其他图表数据（如网格线）的“skeletonView”。

这个系统起初工作得很好，但是，我决定要对点的变化进行动画处理，所以我开始考虑使用 collectionView 代替放置在滚动视图中的“dotsView”，因为它将处理动画为了我。然而，由于collectionview 需要委托、数据源、布局对象等，突然之间，我的chartView 看起来越来越像控制器而不是视图。

现在这是我的问题：允许 UIView 协调/配置其他 UIView 是否是错误的方法，即使这些 UIView 是整体的基本要求？一方面，我希望保留我的 chartView 的公共接口的简单性（初始化视图，给它一个数据源，然后你就完成了）。另一方面，这个 chartView 真的不再是一个视图，它更像一个控制器。但我不希望图表的消费者像控制器一样思考/对待它，我希望他们将其用作视图。

有什么想法吗？我很想听听其他人的见解。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T02:47:13.190

您可以`ChartView`创建一个.`UICollectionView``UICollectionView``ChartView`

苹果在`UIPickerView`. 在幕后，选择器视图为每个组件创建一个表视图，选择器视图使自己成为每个表视图的数据源和委托。您可以看到`UIPickerView.h`它符合`UITableViewDataSource`. `UITableViewDelegate`您可以在运行时使用`+[NSObject conformsToProtocol:]`或[`class-dump`](https://github.com/nygard/class-dump)在 UIKit 框架上使用来检查它是否符合。或者您可以编写一个测试应用程序并浏览视图层次结构。调试器命令`po [[UIApp keyWindow] recursiveDescription]`将帮助您入门。

`UIPickerView`是我所知道的 iOS SDK 中唯一的视图子类，它充当其子视图的数据源和委托，但许多其他 UIKit 视图类创建和管理自己的子视图。例子：

*   `UIScrollView`其滚动指示器具有私有子视图。
*   `UITableView`具有私有页眉、页脚、部分索引和行分隔符子视图。
*   `UIButton`有一个私有`UILabel`来显示它的文本和一个私有`UIImageView`来显示它的图像。
*   `UISegmentedControl`有私人`UILabel`和`UIImageView`子视图。
*   `UIProgressView`使用几个私有`UIImageView`子视图来显示其部分。
*   `UISlider`使用几个私有`UIImageView`子视图来显示其部分。
*   `UITextField`使用私有`UIImageView`子视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T02:22:14.053

您回答了您自己的问题，我的朋友：允许 UIView 协调/配置其他 UIView 是否是错误的方法 - 是的！视图应该由控制器从组织角度恕我直言。我会构建一个图表控制器，它可以抛出单个和复合视图并用一块石头杀死两只鸟。您可以将 url 从 Ajax 路由到控制器以更改图表中表示的数据

# google-maps - 指定名称的附近搜索，如通配符

> ID：15604826
> 
> 赞同：0
> 
> 时间：2013-03-24T22:30:13.997
> 
> 标签：google-maps, google-maps-api-3

我正在寻找一种通过指定确切位置但*不*指定确切商店名称（如通配符搜索）来执行 Google Maps API V3“nearbySearch”的方法。

例如，如果请求是针对“旧金山”中的“星巴克”，它将返回所有名为“星巴克”的地点，无论该地点的标题中是否包含更多单词，例如，结果将包含“星巴克咖啡”、“星巴克史密斯街” ”或简称“星巴克”。目前看起来它只找到相同的匹配项，“星巴克”。

**代码**（[更多信息在这里](https://developers.google.com/maps/documentation/javascript/places#place_search_requests)）：

```
var map;
var service;
var infowindow;

function initialize() {

  // Specify lat/lng of search location
  var SanFran = new google.maps.LatLng(37.777119,-122.41964);

  // Create new map object
  map = new google.maps.Map(document.getElementById('map'), {
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    center: SanFran,
    zoom: 15
  });

  // Create request parametres
  var request = {
    location: SanFran
    , radius: '500',
    , name: "Starbucks"
  };

  // Call the nearby search using the parametres
  service = new google.maps.places.PlacesService(map);
  service.nearbySearch(request, callback);

}

// Asynchronous marker creation at returned locations
function callback(results, status) {
  if (status == google.maps.places.PlacesServiceStatus.OK) {
    for (var i = 0; i < results.length; i++) {
      var place = results[i];
      createMarker(results[i]);
    }
  }
} 
```

我做了一些阅读，虽然看起来 API3 不提供通配符搜索，但我希望有解决方法。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:42:36.577

对不起，答案真的很简单。我应该一直使用 textSearch 而不是 nearSearch：

```
...

// Create request parametres
var request = {
  location: SanFran
  , radius: '500',
  , query: "Starbucks"
};

// Call the nearby search using the parametres
service = new google.maps.places.PlacesService(map);
service.textSearch(request, callback);

... 
```

更多信息在这里[https://developers.google.com/maps/documentation/javascript/places#TextSearchRequests](https://developers.google.com/maps/documentation/javascript/places#TextSearchRequests)

# html - 如何正确显示图片 元素？

> ID：15604828
> 
> 赞同：0
> 
> 时间：2013-03-24T22:30:20.743
> 
> 标签：html, css

好的，这很简单。我首先创建了一个通常的“主页”按钮，链接到网站的主页，但是“主页”这个词看起来太明显了。因此，我尝试插入一个图标来代替那个词，但它不合适。我在我的 css 中尝试了一些东西，但它弄乱了整体（用于创建导航菜单）。附上截图。请如果有人可以看到什么是错的。![在此处输入图像描述](../Images/eb901cc392f533a0b734f5940ebb5aa2.png)

CSS：-

```
 ul#menu
{
padding: 0px;
position: relative;
margin: 0;

}
ul#menu li
{
display: inline;
text-decoration:solid;

}
ul#menu li a 
{
color: black;
background-color: #f5b45a;
padding: 10px 20px;
text-decoration: none;
line-height: 2.8em;
/*CSS3 properties*/
border-radius: 4px 4px 0 0;
} 
```

HTML:-

```
<ul id="menu">
    <li id="Home_Link"><a href="Home"><img src="../../Image_Data/Home_Icon.ico" id="Home_Icon"/></a></li>
    <li><a href="Men">MEN</a></li>
    <li><a href="Women">WOMEN</a></li>
    <li><a href="Kids">KIDS</a></li>
    <li><a href="Design">DESIGN!!</a></li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:52:06.853

使用您当前的样式，您将需要使用图像的垂直对齐和边距，例如：

```
ul#menu li#Home_Link a img {
  vertical-align: text-bottom;
  margin-bottom: -5px;
} 
```

作为旁注，不建议您对元素使用 ID - 如果需要，请使用类。并减少您的样式声明的特异性，例如 .home-link img

# javascript - 动画浮动 DIV 重新定位，因为其他浮动 DIV 被隐藏

> ID：15604831
> 
> 赞同：0
> 
> 时间：2013-03-24T22:30:38.887
> 
> 标签：javascript, jquery, css, ajax

我有一系列浮动 DIV，当用户单击它们时，它们可能会被隐藏（显示：无）。当一个被隐藏时，其他 DIV “跳跃”以填充它的位置（因为它们也是浮动的）。

但是，我希望他们能够顺利地“滑入”他们的新位置。做这个的最好方式是什么？我在下面包含了一个示例页面 - 如果您将其转储到任何编辑器中，它除了我要添加的功能（动画）外，它功能齐全。

```
function hideBox(num) {
  document.getElementById('box' + num).style.display = 'none';
}
```

```
body {
  padding: 25px;
  margin: 0px;
  font-family: Helvetica;
  color: #333;
  font-size: 18px;
}

div.box {
  width: 100px;
  height: 63px;
  background-color: #52c6ec;
  margin: 5px;
  padding-top: 37px;
  float: left;
  text-align: center;
  color: #fff;
  font-weight: bold;
}
```

```
<div class="box" id="box1" onclick="hideBox(1)">Box 1</div>
<div class="box" id="box2" onclick="hideBox(2)">Box 2</div>
<div class="box" id="box3" onclick="hideBox(3)">Box 3</div>
<div class="box" id="box4" onclick="hideBox(4)">Box 4</div>
<div class="box" id="box5" onclick="hideBox(5)">Box 5</div>
<div class="box" id="box6" onclick="hideBox(6)">Box 6</div>
<div class="box" id="box7" onclick="hideBox(7)">Box 7</div>
<div class="box" id="box8" onclick="hideBox(8)">Box 8</div>
<div class="box" id="box9" onclick="hideBox(9)">Box 9</div>
<div class="box" id="box10" onclick="hideBox(10)">Box 10</div>
<div class="box" id="box11" onclick="hideBox(11)">Box 11</div>
<div class="box" id="box12" onclick="hideBox(12)">Box 12</div>
<div class="box" id="box13" onclick="hideBox(13)">Box 13</div>
<div class="box" id="box14" onclick="hideBox(14)">Box 14</div>
<div class="box" id="box15" onclick="hideBox(15)">Box 15</div>
<div class="box" id="box16" onclick="hideBox(16)">Box 16</div>
<div class="box" id="box17" onclick="hideBox(17)">Box 17</div>
<div class="box" id="box18" onclick="hideBox(18)">Box 18</div>
<div class="box" id="box19" onclick="hideBox(19)">Box 19</div>
<div class="box" id="box20" onclick="hideBox(20)">Box 20</div>
<div class="box" id="box21" onclick="hideBox(21)">Box 21</div>
<div class="box" id="box22" onclick="hideBox(22)">Box 22</div>
<div class="box" id="box23" onclick="hideBox(23)">Box 23</div>
<div class="box" id="box24" onclick="hideBox(24)">Box 24</div>
<div class="box" id="box25" onclick="hideBox(25)">Box 25</div>
<div class="box" id="box26" onclick="hideBox(26)">Box 26</div>
<div class="box" id="box27" onclick="hideBox(27)">Box 27</div>
<div class="box" id="box28" onclick="hideBox(28)">Box 28</div>
<div class="box" id="box29" onclick="hideBox(29)">Box 29</div>
<div class="box" id="box30" onclick="hideBox(30)">Box 30</div>
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T22:53:26.240

对于一个更动画的版本，盒子实际上是动画行的变化，这也可以做到：http: [//jsfiddle.net/rCgxD/1/](http://jsfiddle.net/rCgxD/1/)。这个也使用 jQuery 来实现其强大的库和动画。以下是我使用的 javascript 代码：

```
$(function(){
    $('.box').click(function(){
       var boxpositions = [];
        $('.box').not(this).each(function(index,elem){
           boxpositions[index] = [$(elem).position().top,$(elem).position().left];
        });
        var thisposition = [$(this).position().top,$(this).position().left];
       $(this).hide();
        var newpositions = [];
        $('.box').not(this).each(function(index,elem){
           newpositions[index] = [$(elem).position().top,$(elem).position().left];
        });
        $(this).show().css({position:'absolute',top:thisposition[0],left:thisposition[1]}).hide(200);
        $('.box').not(this).each(function(tindex,telem){
            $(telem).css({position:'absolute',top:boxpositions[tindex][0],left:boxpositions[tindex][1]}).animate({top:newpositions[tindex][0],left:newpositions[tindex][1]},200,function(){$(this).css({position:'static',top:'auto',left:'auto'});});;
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T22:40:41.033

正如您`jQuery`在标签中所做的那样，您可以做的最简单的事情就是使用[.hide()](http://api.jquery.com/hide/)

您甚至不需要`onclick`在代码中添加所有这些处理程序`HTML`，只需使用：

```
$('.box').click(function(){
 $(this).hide(200); //change width,height and opacity to 0 in 200miliseconds
}); 
```

[演示](http://jsfiddle.net/dZ9Dr/)。

但是，如果你想要一个无库的解决方案，这里有一个快速递归的解决方案：

```
function hideBox(num, perc) {
    if(perc == undefined)
        perc = 100;

    if(perc-- > 0)
        setTimeout(function(){
            document.getElementById('box'+num).style.width = perc + 'px'; 
            hideBox(num,perc);
        }, 1);
    else
        document.getElementById('box'+num).style.display = 'none'; 
} 
```

[演示](http://jsfiddle.net/dZ9Dr/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T22:47:16.853

使用 vanilla Javascript 这会很困难（而且很广泛），但是使用 jQuery 就像你标记的那样简单

```
$(".box").click(function()
{
   $(this).hide(400);
}); 
```

其中 400 是动画运行的毫秒数。

# ruby-on-rails - RoR - 在测试用例管理系统中添加 TestRun

> ID：15604837
> 
> 赞同：0
> 
> 时间：2013-03-24T22:31:13.503
> 
> 标签：ruby-on-rails

编辑 - 我正在改写这个问题

不再需要嵌套路由的答案。

我已经使用以下资源创建了一个测试用例管理系统项目 -> 有很多套件 -> 有很多测试用例

我想添加测试运行的新特性/功能。对于每个版本，我都想做一个新的测试运行，其中我将只包含选定的套件/测试用例。

流程类似于：单击并创建 - 新的测试运行选择（从下拉列表或复选框中） - 需要为当前版本运行的套件，然后从这些套件中选择测试用例

怎么办？我应该创建一个新的资源测试运行吗？然后我如何每次都添加套件？

感谢您之前和未来的答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:30:05.220

所以我自己找到了答案。我正在使用连接表 - has_many：通过我创建一个新的称为测试结果的能力，这是关联的方式

```
class Testcase < ActiveRecord::Base
  has_many :testresults
  has_many :testruns, :through => :testresults

class Testrun < ActiveRecord::Base
  has_many :testresults
  has_many :testcases, :through => :testresults

class Testresult < ActiveRecord::Base
  belongs_to :testrun
  belongs_to :testcase 
```

我需要弄清楚的是如何现在将结果插入到 Testresult 表中

# c#-4.0 - 如何将 guid 作为存储过程的参数传递

> ID：15604846
> 
> 赞同：0
> 
> 时间：2013-03-24T22:32:10.920
> 
> 标签：c#-4.0

**嗨，我刚刚学习 C# 并且正在努力解决一个问题，如果我能得到任何帮助，我将不胜感激。**

我的第一个问题是，我有一个 aspx 表单，当您点击保存按钮时，它会将数据插入到 2 个单独的表中，[Transaction 和 TransactionDetails] 两个表都包含定义为 Guid 的 TransID 字段。事务表 Guid 也是主键。我的问题是如何将作为唯一标识符的相同 guid (TransID) 插入两个表中......然后同时（这是我的希望）我有一个需要运行的存储过程，它需要与相同的 Guid一个参数。所以简而言之，我需要在两个表中使用相同的 GUID，并且必须将新创建的 Guid 传递给我的存储过程。

到目前为止，这是我的代码代码，您能帮我解决我需要添加或更改的内容吗？

```
protected void Button1_Click(object sender, EventArgs e)
{

    SqlConnection sc = new SqlConnection((System.Configuration.ConfigurationManager.ConnectionStrings["NovaConnectionString"].ConnectionString));

    sc.Open();

    string insertSQL;
    insertSQL = "INSERT INTO [Transaction] (";
    insertSQL += "TransactionID, FileNumber, TransactionDate, RegistryID, InstrumentID, TransactionTypeID, CompanyID, ";
    insertSQL += "InvoiceNo, Unit, Price, DueDiligance, Legal)";
    insertSQL += "VALUES (";
    insertSQL += "@TransactionID, @FileNumber, @TransactionDate, @RegistryID, @InstrumentID, @TransactionTypeID, @CompanyID, ";
    insertSQL += "@InvoiceNo, @Unit, @Price, @DueDiligance, @Legal)";

    //string query1 = String.Format(@"Insert Into Transaction (TransactionID, FileNumber, TransactionDate, RegistryID, InstrumentID,  TransactionTypeID, CompanyID, InvoiceNo, Unit, Price, DueDiligance, Legal)"
    //+ " VALUES (@TransactionID, @FileNumber, @TransactionDate, @RegistryID, @InstrumentID, @TransactionTypeID, @CompanyID, @InvoiceNo, @Unit, @Price, @DueDiligance, @Legal)");
    SqlCommand cmd = new SqlCommand(insertSQL, sc);
    SqlCommand cmd3 = new SqlCommand("uspProcessPurchasedOffsets", sc);
    cmd3.CommandType = CommandType.StoredProcedure;
    //Add the parameters.
    cmd.Parameters.AddWithValue("@TransactionID", Guid.NewGuid());
    cmd.Parameters.AddWithValue("@FileNumber", txtFileNumber.Text);
    cmd.Parameters.AddWithValue("@TransactionDate", txtTransactionCreated.Text);
    cmd.Parameters.AddWithValue("@RegistryID", ddlRegistry.Text);
    cmd.Parameters.AddWithValue("@InstrumentID", ddlInstrument.Text);
    cmd.Parameters.AddWithValue("@TransactionTypeID", txtTransactionTypeID.Text);
    cmd.Parameters.AddWithValue("@CompanyID", ddlCompany.Text);
    cmd.Parameters.AddWithValue("@InvoiceNo", txtInvoiceNo.Text);
    cmd.Parameters.AddWithValue("@Unit", txtTotalVolume.Text);
    cmd.Parameters.AddWithValue("@Price", txtPrice.Text);
    cmd.Parameters.AddWithValue("@DueDiligance", txtDueDiligance.Text);
    cmd.Parameters.AddWithValue("@Legal", txtLegal.Text);

    //Parameter for stored Proc

    cmd3.Parameters.Add("@TransactionID", SqlDbType.UniqueIdentifier);

    cmd.ExecuteNonQuery();

    string insertSQL2;

    insertSQL2 = "INSERT INTO [TransactionDetails] (StartSerialNumber,VintageYear,Units)";
    insertSQL2 += "VALUES (@StartSerialNumber, @VintageYear, @Units)";

    SqlCommand cmd1 = new SqlCommand(insertSQL2, sc);

     //Add the parameters.
     cmd1.Parameters.AddWithValue("@StartSerialNumber", txtStartSerial.Text);
     cmd1.Parameters.AddWithValue("@VintageYear", txtVintage.Text);
     cmd1.Parameters.AddWithValue("@Units", txtVolume.Text);

     cmd1.ExecuteNonQuery();
     cmd3.ExecuteNonQuery();

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:49:13.367

我认为您可以将 GUID 存储在适当的中间变量中，然后将相同的变量传递给您的参数以用于存储过程和命令文本

```
 Guid g = Guid.NewGuid();
 cmd.Parameters.AddWithValue("@TransactionID", g);

 .....

 cmd3.Parameters.Add("@TransactionID", SqlDbType.UniqueIdentifier, 16 ).Value = g; 
```

# request - 如何在 ServiceStack 中获取请求的时间戳？

> ID：15604847
> 
> 赞同：2
> 
> 时间：2013-03-24T22:32:11.343
> 
> 标签：request, timestamp, servicestack

这可能看起来很愚蠢，但我在 ServiceStack 中找不到请求时间戳。我正在寻找相当于的 ServiceStack

```
this.Request.RequestContext.HttpContext.Timestamp 
```

在 ASP.NET MVC 中。

我查看了请求标头，但那里没有类似的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T22:37:26.260

在 ASP.NET 主机中，您可以从 HttpContext 单例中获取它，即：

```
HttpContext.Current.Timestamp 
```

否则，如果您不想使用单例，则可以沿着请求对象图向下移动，即：

```
var aspnetRequest = (HttpRequest)base.Request.OriginalRequest;
aspnetRequest.RequestContext.HttpContext.Timestamp 
```

# javascript - 使用 app.get(..) 路由后 Express JS 'this' 未定义

> ID：15604848
> 
> 赞同：13
> 
> 时间：2013-03-24T22:32:18.670
> 
> 标签：javascript, node.js, express, node-mysql

我有一个基本的 Node JS 服务器，它被设计用作 API，我创建了一个日志和数据库模块，并开始添加其他模块来处理不同的请求类型。

我正在使用 Express.js 和 node-mysql

当我访问时，`/v1/group`我收到以下错误 -

```
TypeError: Cannot read property 'database' of undefined
    at Group.getAll (C:\code\javascript\node\api\api\v1\groups.js:12:23)
    at callbacks (C:\code\javascript\node\api\node_modules\express\lib\router\index.js:161:37) ... 
```

所以我想在收到一个请求并调用`group.getAll()`未定义`this`但我不明白为什么之后，有没有办法设置`this`或我的应用程序结构都错了？

服务器.js

```
"use strict";

var Express = require('express');
var Log = require('./database/log');
var Database = require('./database/database');
var dbConfig = require('./dbconfig.json');

var Group = require('./api/v1/groups');

//Init express
var app = new Express();

//Init log and database
var log = new Log();
var database = new Database(dbConfig, log);

var initCallback = function() {
    //Init routes
    var group = new Group(database, log);

    //Group routes
    app.get('/v1/group', group.getAll);
    app.get('/v1/group/:id', group.getByID);

    app.listen(3000);
    log.logMessage("INFO", "Listening on port 3000");
};

//Test database connection
database.getConnection(function(err, connection) {
    if (err) {
        log.logMessage("FATAL", "Error connecting to database, check database is running and the dbconfig.json file is present and correct.");
        process.exit(1);
    }
    connection.end();

    initCallback();
}); 
```

数据库.js

```
"use strict";

var mysql = require('mysql');

var Database = function(dbConfig, log) {
    this.connected = false;
    this.log = log;

    this.log.logMessage("INFO", "Connecting to database with: Host - " + dbConfig.dbhost + ", Database port - " + dbConfig.dbport + ", Database name - " + dbConfig.dbname + ", User " + dbConfig.dbuser + ", Password length - " + dbConfig.dbpass.length);

    this.pool  = mysql.createPool({
        host : dbConfig.dbhost,
        user : dbConfig.dbuser,
        port: dbConfig.dbport,
        password : dbConfig.dbpass,
        database: dbConfig.dbname
    });
};

Database.prototype.getConnection = function() {
    var args = arguments;
    return this.pool.getConnection.apply(this.pool, arguments);
};

module.exports = Database; 
```

组.js

```
"use strict";

var Group = function(database, log) {
    this.database = database;
    this.log = log;
};

Group.prototype.getAll = function(req, res) {
    console.log(this); // --> undefined

    var query = 'SELECT * FROM invgroups WHERE published = 1';

    this.database.getConnection(function(err, connection) { // --> error line
        if (err) { res.send(500, "Database error"); }

        connection.query(query, function(err, results) {
            if (err) { res.send(500, "Database error"); }
            res.send(results);
        });

        connection.end();
    });

};

Group.prototype.getByID = function(req, res) {
    console.log(this);
    res.send({name: "Group Item 1"});
};

module.exports = Group; 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-24T22:51:37.983

您需要正确绑定该功能。

```
app.get('/v1/group', group.getAll); 
```

仅将`getAll`函数作为处理程序传递，但函数本身没有`this`. `this`取决于绑定的上下文，或基于函数的调用方式。[这篇博文](http://devlicio.us/blogs/sergio_pereira/archive/2009/02/09/javascript-5-ways-to-call-a-function.aspx)有助于理解函数上下文的工作原理。

```
app.get('/v1/group', group.getAll.bind(group)); 
```

# android - 在为 Android 编译 ffmpeg 时遇到问题

> ID：15604851
> 
> 赞同：2
> 
> 时间：2013-03-24T22:32:45.797
> 
> 标签：android, android-ndk, ffmpeg

我正在尝试使用这个[家伙脚本](https://github.com/guardianproject/android-ffmpeg)（[https://github.com/guardianproject/android-ffmpeg](https://github.com/guardianproject/android-ffmpeg)）为 Android 编译 ffmpeg，因为它看起来最简单，而且整个 NDK 真的不是我的专业领域。

所以让我们看看到目前为止我做了什么：

*   在 VirtualBox 中从[http://www.ubuntu.com/download/desktop](http://www.ubuntu.com/download/desktop)下载并安装了新的 Ubuntu 12.04 LTS 。（视频有一些小问题，但后来终端中的一些更新 ubuntu 已启动并运行）
*   安装 Android SDK 并将[NDK 下载/解压缩](http://dl.google.com/android/ndk/android-ndk-r8e-linux-x86.tar.bz2)到`/Documents/ndk`
*   我使用这些命令来安装编译器：

> $ sudo apt-get 更新
> 
> $ sudo apt-get 升级
> 
> $ sudo apt-get install build-essential
> 
> $ gcc -v
> 
> $ 制作 -v

*   然后`sudo install git`（或类似的东西来安装 git）
*   然后`git clone https://github.com/guardianproject/android-ffmpeg.git`
*   然后从男生页面`building`部分复制
*   `cd android-ffmpeg`
*   `git submodule init`
*   `git submodule update`
*   `NDK_BASE=/path/to/android-ndk ./configure_make_everything.sh`

它大多进展顺利，直到它说：

> arm-linux-androideabi-gcc 无法创建可执行文件 C 编译器测试失败
> 
> 如果您认为配置出错，.. blaah blahh blaah

我不确定这意味着什么或从这里去哪里。从[这里](https://stackoverflow.com/a/12912908/906362)我`chmod 777`对文件夹做了一些确保可以执行的东西。

也从[这里](https://stackoverflow.com/questions/12660043/arm-linux-androideabi-gcc-is-unable-to-create-an-executable-compile-ffmpeg-fo)我尝试了他的脚本，但没有任何运气。

帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T22:48:15.870

分解脚本'config_make_everything'正在做什么......并一次运行一个步骤......

[https://github.com/guardianproject/android-ffmpeg/blob/master/configure_make_everything.sh](https://github.com/guardianproject/android-ffmpeg/blob/master/configure_make_everything.sh)

每个步骤都会创建一个类似“config.log”的文件，您可以在其中找到有关查找编译器出错的更多详细信息。

当您开始使用 NDK、IMO 时，请花一些时间通过它的 ./doc 目录来学习曲线，并确保您已正确集成它。安装 NDK 后，有一些示例。从 CLI 构建一些只是为了确保 ENV 是正确的并且安装是好的，并且你至少对构建作为一个可重复的过程有一些想法。这将证明您可以使用构建工具进行良好的“交叉编译”。然后你可以返回到 Guardian.ffmpeg 的东西。

IMO - 这个项目的 NDK 构建有很多事情要做，并且在不了解任何底层配置/构建堆栈的情况下构建它需要很多运气。

# c# - 如何在非托管内存中分配 IntPtr [] 数组？

> ID：15604857
> 
> 赞同：5
> 
> 时间：2013-03-24T22:33:20.117
> 
> 标签：c#, arrays, memory-management, intptr, alloc

要在托管代码中分配内存，我使用：

```
IntPtr [] params_list_n = new IntPtr [5]; 
```

但是对于我使用的非托管内存`Marshal.AllocHGlobal` 而且我不明白在这种情况下如何为数组分配内存。

理想情况下，我想对`Marshal.GetNativeVariantForObject (o, params_list_n[i]);` 数组的每个元素使用函数调用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T22:39:48.383

[使用Marshal.AllocHGlobal](http://msdn.microsoft.com/en-us/library/s69bkh17.aspx)创建非托管内存很简单。

```
IntPtr pointer = Marshal.AllocHGlobal(1024); 
```

如果您需要计算可以使用[Marshal.SizeOf](http://msdn.microsoft.com/en-us/library/5s4920fa.aspx)的空间量。

```
int size = Marshal.SizeOf(typeof(IntPtr));
IntPtr pointer = Marshal.AllocHGlobal(size); 
```

您还需要`unsafe code`在项目中启用它才能运行。

1.  右键单击您的项目并选择`Properties`.
2.  打开`Build`选项卡。
3.  选择`Allow unsafe code`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T22:39:26.290

该数组将是指向元素的指针。您以相同的方式使用它：

```
IntPtr results = Marshal.AllocHGlobal(5 * IntPtr.Size); 
```

# android - 在android中使用太多视图

> ID：15604860
> 
> 赞同：-1
> 
> 时间：2013-03-24T22:33:54.380
> 
> 标签：android, android-layout, android-imageview

基本上我的 xml 文件有 100 个图像视图（像国际象棋这样的游戏板），这真的让我担心我的游戏应用程序的性能问题。使用在屏幕上绘制的 100 个图像视图真的会降低我的应用程序性能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T22:35:36.520

创建自己的，它在方法`View`中绘制自身显示的位图。`ImageViews``onDraw`

# filter - 如何将此二进制 (.dat) 文件 [内部示例] 转换为可读文本

> ID：15604863
> 
> 赞同：1
> 
> 时间：2013-03-24T22:34:12.030
> 
> 标签：filter, binary, ascii, fstream, ofstream

我有一个文件`'quizzes.dat'`，在记事本中打开时看起来像这样：

```
 "Bart Simpson K A F Ralph Wiggum # < , Lisa Simpson d b [ Martin Prince c b c Milhouse Van Houten P W O " 
```

全部在一条线上。

我想获取这个二进制文件并使用函数输出一个可读的文本`fstream`文件`read/ write`。

到目前为止，我的代码相当简单：

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

bool openInFile (ifstream &, char []);
bool openOutFile (ofstream &, char []);

struct student
{
char name[25];
int exam1;
int exam2;
int exam3;
};

student bclass[5];

int main()
{

ifstream input;
openInFile (input, "quizzes.dat");

ofstream output;
openOutFile (output, "quizzes.txt");

output << "=================================================\n";

while (!input.eof())
{
    for (int i = 0; i < 5; i++)
    {
    input.read((char*)&bclass[i], sizeof(bclass[i]));

    output << bclass[i].name << ", " << bclass[i].exam1 << ", "
           << bclass[i].exam2 << ", " << bclass[i].exam3 << endl;

    }
}

output << "=================================================\n";

input.close();
output.close();

return 0;
}

// Opens and checks input file
bool openInFile (ifstream &in, char filename[])
{
in.open(filename, ios::in | ios::binary);

if (in.fail())
{
    cout << "ERROR: Cannot open quizzes.dat\n";
    exit(0);
}
return in.fail();
}

// Opens and checks output file
bool openOutFile (ofstream &out, char filename[])
{
out.open(filename, ios::out);

if (out.fail())
{
    cout << "ERROR: Cannot open quizzes.txt\n";
    exit(0);
}
return out.fail();
} 
```

首先，这是读取二进制文件的最佳方式吗？或者做一个不是一个好`array`主意`struct`？有人告诉我，二进制文件遵循 的模式`struct`，一个 25 个字符的名称和 3 个 int 测验成绩，共有 5 个学生。

最后，我在文本文件中得到的输出是：

=================================================

巴特辛普森, 16640, 17920, 1818317312

ph 威格姆, 2883584, 1766588416, 1394631027

英普森, 1291845632, 1769239137, 1917853806

因斯, 1751935309, 1702065519, 1851872800

豪顿, 0, 0, 0

=================================================

什么时候应该看起来像：

=================================================

巴特辛普森, 75, 65, 70

拉尔夫·维格姆，35、60、44 岁

丽莎辛普森，100 岁、98 岁、91 岁

马丁普林斯, 99, 98, 99

米尔豪斯·范豪顿，80、87、79

=================================================

在记事本中分析 dat 文件时，我看到每个名称都分配了 25 个空格，并且不可读的部分每个都有 4 个空格，我假设它们与整数类型的 4 个字节相关。

我的问题是如何将该数据转换为可读的文本格式，如果数据似乎遵循与我的结构完全相同的模式，为什么名称会被截断？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:56:30.970

[https://gist.github.com/anonymous/5237202](https://gist.github.com/anonymous/5237202) 这就是我的做法，我评论了代码，希望它对你有所帮助。1\. 以这种方式读取二进制文件没有任何问题 2\. 像任何其他变量一样制作结构数组是完全可以的。

是的，二进制遵循结构的模式，名称为examOnePointsexamTwoPointsexamThreePoints，但由于名称具有不同的长度，因此您不能将二进制文件中的所有值都扔到结构开始和以后的内存位置。

此外，我使用 3 个整数的数组来存储考试点，而不是 3 个单独的变量，因为它更容易编码，它可以通过任何一种方式完成。还有一件事，我建议您下载一些免费的 hexeditor 并稍微检查一下 .dat 文件，这将帮助您理解我为什么以这种方式阅读要点。

# ruby-on-rails - Heroku Stripe 提供的 API 密钥无效

> ID：15604864
> 
> 赞同：1
> 
> 时间：2013-03-24T22:34:19.857
> 
> 标签：ruby-on-rails, ruby, heroku, stripe-payments

即使密钥正确，我仍然在 heroku 上收到错误消息。

这不起作用：

```
if Rails.env.production?
 Stripe.api_key = ENV['STRIPE_API_KEY']
 STRIPE_PUBLIC_KEY = ENV['STRIPE_PUBLIC_KEY'] 
```

然而，使用相同的键可以：

```
if Rails.env.production?
 Stripe.api_key = ENV['STRIPE_API_KEY']
 STRIPE_PUBLIC_KEY = 'pk_key' 
```

我认为 Heroku env 密钥不正确，但我重新输入了它，它们是相同的。我不知道为什么它不能工作，除非我把钥匙自己放进去。

# python - Python tox 错误“插件已注册”

> ID：15604865
> 
> 赞同：0
> 
> 时间：2013-03-24T22:34:37.007
> 
> 标签：python, pytest, tox

我正在尝试为我在绝地自动完成库上所做的一些工作运行带有 tox 的测试套件，并且得到以下结果：

```
ValueError: Plugin already registered: /home/aldo/Documents/Projects/jedi/test/conftest.py=<module 'test.conftest' from '/home/aldo/Documents/Projects/jedi/test/conftest.py'> 
```

完整输出可在此处获得：

[https://gist.github.com/Astrac/5abdba7db62ac204325e](https://gist.github.com/Astrac/5abdba7db62ac204325e)

这是 pytestdebug.log：

[https://gist.github.com/Astrac/b5728dfeb22c0d2fb0f5](https://gist.github.com/Astrac/b5728dfeb22c0d2fb0f5)

我尝试在我的主环境中使用 pip 运行 tox，并在干净的虚拟环境中运行它，获得相同的结果。我还尝试直接运行 py.test（从我的主环境和虚拟环境中），但结果是一样的。

另一方面，我知道它可以工作，因为我可以看到它在 travis 上运行：

[https://travis-ci.org/davidhalter/jedi/jobs/5765531](https://travis-ci.org/davidhalter/jedi/jobs/5765531)

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T18:41:10.453

我也收到此错误消息。这是我第一次尝试制作`setup.py`或使用`tox`，所以我试图复制我看到的其他人的示例`setup.py`，因为官方文档在这个主题上对我的启发并不大。

我的破碎`setup.py`看起来像这样：

```
from setuptools import setup, find_packages

setup(
    name='foobarbaz',
    version='1.0',
    author="donald duck",
    author_email="foo@bar.baz.quux",
    package_dir={'': 'src'},
    packages=find_packages('src'),
    zip_safe=False,
) 
```

事实证明，有一两个有问题的关键字参数。我删除了`package_dir`and `packages`，然后问题就消失了。所以这是工作版本：

```
from setuptools import setup

setup(
    name='foobarbaz',
    version='1.0',
    author="donald duck",
    author_email="foo@bar.baz.quux",
    zip_safe=False,
) 
```

我不知道您的情况是否相似，或者您是否已经解决了这个问题，但我这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-28T10:35:58.807

对于那些通过谷歌到达这里的“插件已经注册”的人，我通过简单地清理我的环境解决了这个类似的问题。

具体来说：

1.  `pip uninstall`在我的包裹上运行，例如`pip uninstall foo`
2.  删除通过将我的模块安装为可编辑创建的`foo.egg-info/`任何目录`bar.egg-info/`
3.  重新安装 virtualenv 也可以。

根本原因是我将我的包从`foo`to重命名`bar`，以可编辑模式 ( `pip install -e foo`) 安装并且没有清理伪影。

```
 setup(
-    name="foo",
+    name="bar", 
```

# html - 使列表居中，同时保持不缩进

> ID：15604866
> 
> 赞同：0
> 
> 时间：2013-03-24T22:34:40.813
> 
> 标签：html, css, list

好的，我有一个列表，我想使用 CSS 将所有内容居中。

无论如何，我用谷歌搜索它，我发现，删除列表样式，并且没有左边距。但是，我也想居中，所以我使用`text-align:center;`. 但是由于某种原因，缩进出现了，所以它并不完全在中心，这就是我想要的。

如果你想要一个例子，在[tst.burngames.net上有一个](http://tst.burngames.net)

因为当有网站时，每个人显然都需要代码..

**HTML：**

```
<body>
    <div id="search">
        <input id="search_input" placeholder="Search for game.">
        <ul id="search_list">
            <li>
                One
            </li>
            <li>
                Two
            </li>
            <li>
                Three
            </li>
        </ul>
    </div>
</body> 
```

**CSS：**

```
body {

    background: url(../images/fire.png) no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
}

#search {

    background-color:white;
    border-color:black;
    border-style:double;
    border-width: thick;
    margin-left:auto;
    margin-right:auto;
    margin-top:auto;
    margin-bottom:auto;
    width:600px;
    height:100%;
}

#search_input {

    width:99%;
    height:50px;
    margin-top:20px;
    text-align:center;
}

#search_list {

    width: 99%;
    margin-left:auto;
    margin-right:auto;

}
li {

    list-style-type:none;
    padding-left: 0px;
    margin-top:10px;
    margin-bottom:10px;
    text-align:center;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:38:41.103

尝试将其放入 DIV 并将 DIV 居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T22:42:55.200

以下示例应该会有所帮助：

**HTML：**

```
<ul class="nice">
    <li>James</li>
    <li>Dan</li>
</ul> 
```

**CSS：**

```
.nice {
    list-style-type: none;
    text-align: center;
    padding:0px;
} 
```

这是一个有效的 jsFiddle - [http://jsfiddle.net/8NjfW/1/](http://jsfiddle.net/8NjfW/1/)。

# 更新

这是关于您的新代码的工作 jsFiddle - [http://jsfiddle.net/APv9P/](http://jsfiddle.net/APv9P/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T22:45:57.130

由于用户[代理样式表](http://meiert.com/en/blog/20070922/user-agent-style-sheets/)对文档的默认格式，因此会显示缩进。要摆脱填充，只需添加`padding: 0`到您的`#search_list`.

```
#search_list {
    list-style-type: none;
    width: 99%;
    margin-left: auto;
    margin-right: auto;
    list-style: none;
    padding: 0;
} 
```

# ios - iOS 从另一个类更新 ViewController UILabel

> ID：15604872
> 
> 赞同：5
> 
> 时间：2013-03-24T22:35:27.307
> 
> 标签：ios, iphone, objective-c, uiviewcontroller, uilabel

我是开发新手，一直在努力解决这个问题，我敢肯定，我错过了一些愚蠢的东西，但是在尝试了各种不同的解决方案之后，我仍然无法得到结果米找。

我希望能够从另一个类更新 ViewController 中的 UILabel，这是一个我无法开始工作的小演示程序，我有一个 ViewController，它有两个 UILabel，一个是用另一个更新的，`viewDidDoad`另一个是我想从另一个名为 NewClass 的类中更新`ViewController`，我可以看到该类被正确调用，因为控制台正在记录`NSLog`条目，但我无法获得更新`UILabel`.

提前致谢。

**视图控制器.h**

```
 #import <UIKit/UIKit.h>

 @interface ViewController : UIViewController {

   UILabel *_labelupdate01;
   UILabel *_labelupdate02;     
 }

 @property (nonatomic, retain) IBOutlet UILabel *labelupdate01;
 @property (nonatomic, retain) IBOutlet UILabel *labelupdate02;

 @end 
```

**视图控制器.m**

```
#import "ViewController.h"
#import "NewClass.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize labelupdate01;
@synthesize labelupdate02;

- (void)viewDidLoad
{
    [super viewDidLoad];

    labelupdate01.text = @"Update from ViewController";

    [NewClass updatedisplay];
}
@end 
```

**新类.h**

```
#import <Foundation/Foundation.h>

@class ViewController;

@interface NewClass : NSObject

@property (nonatomic, assign) ViewController *ViewController;

+ (void)updatedisplay;

@end 
```

**新类.m**

```
 #import "NewClass.h"
 #import "ViewController.h"

 @implementation NewClass

 @synthesize ViewController = _ViewController;

 + (void)updatedisplay
 {
     NSLog(@"NewClass - updatedisplay");
     ViewController *labelupdate02;
     labelupdate02.labelupdate02.text = @"Update from NewClass";
 }

 @end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T22:45:27.143

像这样在 newClass 中定义它

```
+ (void)updatedisplay:(ViewController *)vc
{
     vc.labelupdate02.text=@"Update from NewClass";

} 
```

并从您的 viewController 调用它

```
[NewClass updatedisplay:self]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T22:40:37.097

首先，确保你在 中初始化`ViewController`，`NewClass`然后你可以用它做任何你想做的事情。

```
#import <Foundation/Foundation.h>

@class ViewController;

@interface NewClass : NSObject

@property (nonatomic, assign) ViewController *aViewController;

+ (void)updatedisplay;

@end 
```

在实施中

```
 #import "NewClass.h"
 #import "ViewController.h"

 @implementation NewClass

 + (void)updatedisplay
 {

 _aViewController.labelupdate02.text = @"Update from NewClass";

 }

 @end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T22:50:31.930

```
@property (nonatomic, retain) IBOutlet UILabel *labelupdate01;
@property (nonatomic, retain) IBOutlet UILabel *labelupdate02;

@property (nonatomic, assign) ViewController *aViewController; 
```

好吧，首先将这些属性更改为 (nonatomic, weak) 。这是更正确的做法。从 MVC 模式中的模型类中更新显示并不是一个好习惯。所以你的逻辑`+ (void)updatedisplay`对我来说没有意义，我认为它应该类似于`+(NSString *) getStringToDisplay`函数中隐含的功能。名称和标签的文本根据接收到的字符串在 vc 代码中更新。

但只是以您提出的方式回答您的问题：

正确的方法是按照方法建议或在初始化期间将视图控制器传递给您的新类实例，以便您的特定视图控制器已经初始化。

与大多数对象一样，您不会通过以下方式获得当前活动的视图控制器：

```
 ViewController *labelupdate02;
 labelupdate02.labelupdate02.text = @"Update from NewClass"; 
```

labelupdate02 在这里未初始化。但是，即使您随后分配并初始化它，您也不会获得要更新其视图的活动视图控制器，而只是另一个视图控制器实例。

# actionscript-3 - AS3 符号相对于舞台调整大小

> ID：15604882
> 
> 赞同：0
> 
> 时间：2013-03-24T22:36:23.937
> 
> 标签：actionscript-3, resize, symbols

我有一个加载的 SWF 和一个符号，我希望 SWF 具有相同的`resize()`功能，并且符号保持在相同的`y`位置，就好像舞台`width`/`height`没有交互一样。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:29:41.680

如果您的目标是避免显示对象自行调整大小，但并不真正关心舞台大小的差异，您可以尝试使用 Stage.scaleMode 属性：[Stage.scaleMode 属性](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/StageScaleMode.html)

将其设置为“NO_SCALE”将让您调整播放器舞台的大小，并且所有内容都不会受到大小的影响。但是，如果您有选择地只希望某些对象响应舞台大小而其他对象不响应，那么这可能行不通。然后您可能需要做的是计算舞台大小差异并相应地缩放您的对象。

# javascript - 具有相对路径的 jsdom 和 script 标签

> ID：15604883
> 
> 赞同：1
> 
> 时间：2013-03-24T22:36:25.363
> 
> 标签：javascript, mocha.js, jsdom, chai

我在这里有一些像这样的单页演示：http: [//notjs.org/examples/forms/formmode_demo.html](http://notjs.org/examples/forms/formmode_demo.html)

我想，哇，如果可以在我现有的 mocha chai badness 设置中编写一些测试来直接测试示例，那就太棒了：

```
 example = 'forms/formmode_demo.html'

        describe "examples/#{example}", () ->
          before (done) ->
            loadExample example, () => done()

          it 'should load in full input mode', () ->
            window.$('input').length.should.equal 2

          describe "in full input mode", () ->
            it 'should have visible save', () ->
              window.$('button.success').is(':visible').should.be.true
            it 'should have visible cancel', () ->
              window.$('button.cancel').is(':visible').should.be.true
            it 'should not have put inputs on readonly class elements', ()->
              window.$('.readonly input').length.should.equal 0
            it 'should have input with author name', () ->
              window.$("[data-not_attr='name'] input:text").val().should.equal window.dataObject.name 
```

如果我能做到这一点，那么我将永远不会遭受那种“你的示例 x 几个月前停止工作”的尴尬时刻。

我让它工作，但只能使用来自 http:// urls 的页面中的脚本标签。如果我必须在测试之前将包部署到服务器，那么测试的效果就不那么好了。

示例页面加载 jquery、underscore 和 notjs 并且需要以作为独立演示运行。它还应该能够从本地文件系统运行，并且可以使用相对 url。我最初让页面上的 notjs 脚本标签指向一个相对路径，例如

```
 <script src="../../notjs.basics.js"></script> 
```

代替

```
 <script src="http://notjs.org/notjs.basics.js"></script> 
```

但是然后 notjs.basics.js 永远不会加载（window.Notjs == undefined 在测试中）并且我没有看到来自 jsdom 的任何错误。我尝试设置 documentRoot jsdom 选项，但这似乎不起作用。

作为参考，loadExample 方法和我的 jsdom 设置的其余部分在这里： [https ://github.com/bee-hub/notjs/blob/master/test/testHelper.coffee](https://github.com/bee-hub/notjs/blob/master/test/testHelper.coffee)

感谢您的任何帮助和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T16:29:37.063

它没有记录在我能看到的任何地方，但是 jsdom 0.8.4 版本中 test/jsdom/index.js 中的 testLocal() 函数为 jsdom.jsdom(...) 提供了一个“url”选项，这似乎完成了很多与您对 documentRoot 选项所期望的目标相同。使用它，我能够从本地文件系统上的 HTML 文档中解析相对脚本源路径。

对于它的价值，文档中也没有提到“documentRoot”。它的使用[在 github issue 中得到了传闻](https://github.com/tmpvar/jsdom/issues/99)，所以它可能在早期版本中工作。

不要忘记 jsdom.jsdom(...) 将异步加载脚本，因此请确保将您的测试连接到文档就绪事件。

祝你好运！

# cocos2d-iphone - cocos2d sprite 顺序和接触点

> ID：15604885
> 
> 赞同：1
> 
> 时间：2013-03-24T22:36:43.257
> 
> 标签：cocos2d-iphone

我在屏幕上添加了 10 个精灵，zValue = 0。

现在在 ccTouchesMoved 方法下，我存储所有触摸点，然后在 -(void)draw 方法下绘制它们。

我的问题是，即使精灵的 zValue 为 0，如果我在任何精灵上画一条线，它实际上是在精灵下绘制的（而不是在它上面）。

我尝试将起点和终点更改为 nodeSpace 但没有帮助。

```
 start = CGPointFromString([touchPoints objectAtIndex:i]);
    end = CGPointFromString([touchPoints objectAtIndex:i+1]);
    start = [self convertToNodeSpace:start];
    end = [self convertToNodeSpace:end];
    ccDrawLine(start, end); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:49:40.247

您在 z-index 0 处绘制。如果您将精灵的 zIndex 设置为负值，它们将被绘制在线条后面。

# c - 这段代码是如何工作的？按位 C 语言

> ID：15604886
> 
> 赞同：0
> 
> 时间：2013-03-24T22:36:49.937
> 
> 标签：c

我必须使用我学校提供的代码，但我不明白这个关于轮班的功能，逐位

如果有人可以帮助我。这将是非常好的。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T22:42:42.613

它过于复杂。在每次迭代中通过单击来更好地移动位模式：

```
int c ;
for (c = 'e'; c; c>>=1)
{
   kill(pid, (c & 1) ? SIGUSR1 : SIGUSR2);
} 
```

作为副作用，这避免了魔法常数`8`（应该是`CHAR_BIT`，恕我直言）

顺便说一句：这段代码并不*完全*等价，原来的总是发出 8 次 kill() 调用，这一次将在第七次之后停止 (给定 CHAR_BIT==8) ，所以额外

```
kill(pid, SIGUSR2); 
```

将需要完成这项工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T22:40:56.517

对于初学者，ASCII 中的字符 e 是 hex `65`= binary`01100101`

代码的作用是在每次迭代时将该值再右移一位，当移位后最右边的位为 1 时，它会触发 SIGUSR1，否则触发 SIGUSR2。

现在，如果您问我该代码的有用效果可能是什么，我不知道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T22:40:32.063

这是一种可怕的写作方式`c & (1 << charac)`。它测试是否设置了第 charac'th 位，然后使用 SIGUSR1，否则使用 SIGUSR2。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T22:39:54.313

`c >> charac` 将位向右移动 charac 次（因此如果 charax 为 3，它将向右移动 3 次

`& 1` 测试要设置的最低位是否已设置

`? SIGUSr1 : SIGUSR2` this 使用之前测试的结果，如果设置了，则使用 sigusr1，否则使用 sigusr2

# editor - 如何关闭网络风暴的自动保存

> ID：15604889
> 
> 赞同：81
> 
> 时间：2013-03-24T22:37:17.923
> 
> 标签：editor, webstorm, jetbrains-ide

我正在使用流星和 Webstorm 进行开发，因为流星会在您停止输入后自动更新浏览器和 Webstorm 保存。它变得烦人。我检查了我的偏好，我可以看到我没有选中“自动保存”。如何完全停止网络风暴中的自动保存功能？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-03-24T23:38:57.653

可以使用以下选项禁用自动保存：

> 文件 | 设置 | 外观与行为 | 系统设置 > 取消选中以下这些框：
> 
> *   在帧停用时保存文件
> *   如果应用程序空闲，则自动保存文件...

[![保存选项](../Images/985157808131b934166469aca082226c.png)](https://i.stack.imgur.com/emJwZ.png)

请注意，文件观察器功能可能会覆盖特定文件类型的此行为（如果启用）。

某些操作（运行配置、IDE 退出、项目关闭等）也会自动保存。

您可能希望[启用](https://i.imgur.com/TdOvxDg.png)使用 .标记已修改文件的选项`*`。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2014-12-17T10:26:16.153

似乎没有办法让 Webstorm 9 表现得像一个标准的文本编辑器。

您可以得到的更接近的是：

*   设置/外观和行为/系统设置/帧停用时保存文件：**未选中**
*   设置/外观和行为/系统设置/如果...自动保存文件：**未选中**
*   设置/编辑器/常规/编辑器选项卡/用星号标记修改的选项卡：**选中**

产生的行为是：

*   更改不会自动保存在文件中
*   如果关闭更改的文件，则不会显示警告
*   如果您关闭更改的文件然后重新打开它，更改并没有丢失

另请参阅此讨论： http: [//www.dotmana.com/weblog/2012/07/disable-auto-save-in-phpstorm/](http://www.dotmana.com/weblog/2012/07/disable-auto-save-in-phpstorm/)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2018-07-26T06:03:03.433

对于 Webstorm 版本 2018.2 Build #WS-182.3684.70，于 2018 年 7 月 20 日构建

GOTO => Settings -> Appearance & Behavior -> System Settings -> 取消选中“Save files on frame deactivation”并取消选中下一个选项

这将停止自动保存

[![外观和行为 -> 系统设置 -> 取消选中“在帧停用时保存文件”](../Images/74a343326816d8d2872d2451ab9e355e.png)](https://i.stack.imgur.com/b78bQ.png)

如果您想要某种区分因素来了解文件是否已被修改，请执行以下操作：

GOTO => Settings -> Editor -> General -> Editor Tabs -> Check 'Mark modified (*) [![在此处输入图像描述](../Images/358e169f1bc6cf2ebdaaa35d5c959c04.png)](https://i.stack.imgur.com/pBArs.png)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-03-06T09:03:26.820

在 WebStorm 10 中，自动保存设置在这里：文件 | 设置 | 外观和行为 | 系统设置

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-11-04T16:07:28.977

**MacOS WebStorm 2016.2**：菜单> Webstorm> Preferences> Apppearance&Behavior> SystemSettings> 右面板：同步> 并取消选中：

> 在帧停用时保存文件
> 
> 如果应用程序空闲，则自动保存文件...

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-07-19T14:53:30.133

# 禁用自动保存

> `File`> `Settings`> `Appearance & Behavior`> `System Settings`> `Synchronization`> 然后取消选中两者`Save files on frame deactivation`并`Save files automatically if application is idle`>`OK`

[![屏幕截图 - 禁用自动保存](../Images/5070c1657d78e3704513fff9a1f640bb.png)](https://i.stack.imgur.com/HQK9Q.png)

* * *

[现在，您可能也想这样做。]

# 标记已更改但未保存的文件

> `File`> `Settings`> `Editor`> `General`> `Editor Tabs`> 然后检查`Mark modified tabs with asterisk`>`OK`

[![屏幕截图 - 标记已更改但未保存的文件](../Images/0842c28d825137dde505d558191ffee6.png)](https://i.stack.imgur.com/Rxoff.png)

# 使用 Ctrl+S 保存一个文件

> `File`> `Settings`> >**保存文档**`Keymap`搜索> 右键单击​​ > > 按**Ctrl+S** > > >**`Save Document``Add Keyboard Shortcut`**`OK``Remove``OK`****

 ****[![屏幕截图 - 使用 Ctrl+S 保存一个文件](../Images/6f0bfb22b1a4147e3f3259bef17afb8c.png)](https://i.stack.imgur.com/3fXUl.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-08-04T06:30:18.767

## 仅适用于 2022 年之前。

我正在跑步`Node.js`，所以我不得不取消选中`Update Node.js application on changes`. 还有一个`Update application in Chrome on changes`。

> 必须`"Build, Execution, Deployment" > Debugger > Live Edit`

[![在此处输入图像描述](../Images/981b03322e3306a423460b1ac7cfffec.png)](https://i.stack.imgur.com/o4RCg.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-02-17T10:02:18.747

在 web Storm 2017.3.4 File->Setting->System Setting->Synchronization 中取消选中所有复选框，然后应用并确定。

[设置屏幕截图](https://i.stack.imgur.com/zaer5.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-02-20T09:36:40.643

对于在代码中使用**Flow**类型检查的任何人，除了上述答案之外，WebStorm 中还有一个单独的 JS Flow 文件自动保存设置。

1.  转到首选项 > 语言和框架 > JavaScript

2.  如果您的 JavaScript 语言版本设置为**Flow**，则会有一个设置**自动保存所有修改过的文件**。取消选中此项。****

# iphone - 是否有一个库来处理可下载的应用内购买？

> ID：15604891
> 
> 赞同：0
> 
> 时间：2013-03-24T22:37:20.617
> 
> 标签：iphone, ios, download, in-app-purchase

我们的应用程序将具有可下载的应用程序内购买（由 Apple 托管的文件）。

下载器必须从中断的地方恢复并在应用程序运行时继续工作

的背景。此外，用户必须能够恢复购买。

我听说过 MKStoreKit 和 MKNetworkKit。这些是要实施的事实上的标准吗

可在 iOS 上下载应用内购买？或者是否有进一步的框架/库

简化实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:06:29.973

创建 AFNetworking 的人 (Matt Thompson) 也有一个名为[CargoBay](https://github.com/mattt/CargoBay)的库。当我开始我的项目时，我没有注意到它，但我不确定它是否会为我节省很多，因为我需要进行应用内购买的复杂性。您还可以查看[ReactiveCocoa](https://github.com/ReactiveCocoa/ReactiveCocoa)，这是我用来协调我们商店的事件的。我将 ReactiveCocoa 与 AFNetworking 一起使用，并发现它是一个强大的组合。

# javascript - IIFE 内的 IIFE。问题？表现？

> ID：15604892
> 
> 赞同：3
> 
> 时间：2013-03-24T22:37:24.263
> 
> 标签：javascript, iife

我的图书馆是这样的 IIFE：

```
(function () {

    win.global = global;

}()); 
```

在这个库中，我将代码组织成模块，这些模块也如下所示：

```
var foo1 = (function () {
    var publik = {},
        private = {};
    return publik;
}());
._extend(global, foo1); 
```

每个模块都有一个 foo 。

在 IIFE 中安装 IIFE 有什么问题吗？

大多数主要库都封装在 IIFE 中，但从那里他们将代码组织成简单的对象文字而不是 IIFE。

这就是我问/好奇的原因。

我这样做是因为我喜欢我的模块有私有成员，并且这种模式允许这样做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T22:39:11.120

没有什么不妥。

Javascript函数表达式可以任意深度嵌套。

# regex - awk：如何处理文件夹和子文件夹中的多个 files.txt？

> ID：15604897
> 
> 赞同：6
> 
> 时间：2013-03-24T22:37:47.033
> 
> 标签：regex, bash, shell, awk, cjk

**给定一个文件夹，其子文件夹本身带有多语言 .txt 文件**，例如：

```
But where is Esope the holly Bastard
But where is 생 지 옥 이 군
지 옥 이
지 옥
지
我 是 你 的 爸 爸 ！
爸 爸 ！ ！ ！
你 不 會 的 ！ 
```

我已经知道如何**[在 ONE file.txt 中计算空格分隔的词频](https://stackoverflow.com/questions/15601997/awk-characters-frequency-from-one-text-file/15602055#15602055)**：

```
$ grep -o '\w*' myfile.txt | awk '{a[$1]++}END{for(k in a)print a[k],k}' | sort > myoutput.txt 
```

获得优雅：

```
1 생
1 군
1 Bastard
1 Esope
1 holly
1 the
1 不
1 我
1 是
1 會
2 이
2 But
2 is
2 where
2 你
2 的
3 옥
4 지
4 爸
5 ！ 
```

**如何更改代码以处理文件夹及其子文件夹中的多个文件，所有文件都呈现类似的模式（至少 *.txt）？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T22:43:50.693

您可以使用该[`find`](http://unixhelp.ed.ac.uk/CGI/man-cgi?find)命令。像这样：

```
find -iname '*.txt' -exec cat {} \; | grep -o '\w*' | awk '{a[$1]++}END{for(k in a)print a[k],k}' | sort 
```

我正在使用该选项`-exec`来 cat 当前目录中的每个 *.txt 文件及其子目录。输出将通过管道传输到您的 grep|awk|sort 管道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-27T12:13:49.423

### 为什么使用`find`？

使用 glob 就足够了。

```
awk '{a[$1]++}END{for(k in a)print a[k],k}' *.txt | sort > out.txt 
```

或支持递归目录结构，您需要启用[`globstar`选项](http://wiki.bash-hackers.org/syntax/expansion/globs)并使用`**`：

```
shopt -s nullglob
awk '{a[$1]++}END{for(k in a)print a[k],k}' *.txt | sort > out.txt 
```

### 调整

您需要研究 - 方式`awk`来执行与 类似的操作`grep -o \w*`，例如（`/[[:alpha:]]+/`部分）：

```
awk '/[[:alpha:]]+/{print $0}' *.txt 
```

# cloudbees - 可以使用 PostgreSQL 进行 ClickStart 吗？

> ID：15604898
> 
> 赞同：0
> 
> 时间：2013-03-24T22:37:49.183
> 
> 标签：cloudbees

我正在为 Lift 2.5 制作 ClickStart，但希望它使用 PostgreSQL 而不是 MySQL。但是由于[pgsql 是使用作业配置页面中的脚本实现的](https://developer.cloudbees.com/bin/view/DEV/PostgreSQL)，因此不清楚如何从 clickstart.json 配置文件中实现这一点。这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:32:47.973

在这个阶段没有 - 因为我们没有集成的合作伙伴或 PostgreSQL 服务。

那将是非常好的（当我们这样做时 - 然后您将能够在服务部分）。

我也喜欢 postgreSQL——所以我很期待。

# java - Sqlite + Android 的一行结果中的空列

> ID：15604899
> 
> 赞同：1
> 
> 时间：2013-03-24T22:37:52.690
> 
> 标签：java, android, sqlite, encoding, character-encoding

我遇到了 sqlite 的问题。

我将预加载的 sqlite 数据库放在我的应用程序上，一切正常，连接正常，数据库存在正常。但是，当我使用 select 查询时，某些行仅在一列中返回空数据。我检查了我的数据库，该行中唯一奇怪的是该行/列中的字符。

我如何查询我的数据库以返回所有结果，即使是带有奇怪字符的行？

这是我试图获取行的代码。

```
public List<Song> getAllSongs(){
        List<Song> result = new ArrayList<Song>();
        String selectQuery = "select a.Name, b.Name from Song as a, Artist as b where a.IdArtist = b._id order by a.Name";
        SQLiteDatabase db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);
        if (cursor.moveToFirst()){
            do{
                Song song = new Song();
                song.setName(cursor.getString(0));
                song.setArtist(cursor.getString(1));
                result.add(song);
            }while(cursor.moveToNext());
        }

        return result;
    } 
```

而且，我对奇怪字符的含义是“'”，“ñ”，......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:49:25.447

您可以使用 DDMS 或 ADB 将整个数据库移动到您的计算机并在那里进行检查。

```
adb pull /data/data/com.your.package.name/databases/dbname 
```

然后在 PC 上使用 sqlite 之类的东西通过命令行访问它。

[http://www.sqlite.org/sqlite.html](http://www.sqlite.org/sqlite.html)

# iphone - UITableViewHeaderFooterView：无法更改背景颜色

> ID：15604900
> 
> 赞同：151
> 
> 时间：2013-03-24T22:37:58.310
> 
> 标签：iphone, ios, xcode, uitableview

我正在尝试更改 UITableViewHeaderFooterView 的背景颜色。尽管视图正在出现，但背景颜色仍然是默认颜色。我从 xcode 得到一个日志说：

> 在 UITableViewHeaderFooterView 上设置背景颜色已被弃用。请改用 contentView.backgroundColor。

但是，以下选项均无效：

```
myTableViewHeaderFooterView.contentView.backgroundColor = [UIColor blackColor];
myTableViewHeaderFooterView.backgroundView.backgroundColor = [UIColor blackColor];
myTableViewHeaderFooterView.backgroundColor = [UIColor blackColor]; 
```

我还尝试更改 xib 文件中视图的背景颜色。

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：215
> 
> 时间：2014-08-31T04:00:54.847

# iOS 8、9、10、11...

设置任何颜色（使用任何 alpha）的唯一方法是使用`backgroundView`：

**迅速**

```
self.backgroundView = UIView(frame: self.bounds)
self.backgroundView.backgroundColor = UIColor(white: 0.5, alpha: 0.5) 
```

**对象-C**

```
self.backgroundView = ({
    UIView * view = [[UIView alloc] initWithFrame:self.bounds];
    view.backgroundColor = [UIColor colorWithWhite: 0.5 alpha:0.5];
    view;
    }); 
```

* * *

**对评论的回应**

*   这些其他选项都不能可靠地工作*（尽管有以下评论）*

    ```
    // self.contentView.backgroundColor = [UIColor clearColor];
    // self.backgroundColor = [UIColor clearColor];
    // self.tintColor = [UIColor clearColor]; 
    ```

*   会`backgroundView`自动调整大小。*（无需添加约束）*

*   `UIColor(white: 0.5, alpha: 0.5)`用或控制 alpha `backgroundView.alpha = 0.5`。
    *（当然，任何颜色都可以）*

*   使用*XIB*时，使根视图 a`UITableViewHeaderFooterView`并以`backgroundView`编程方式关联：

    *注册：*

    ```
    tableView.register(UINib(nibName: "View", bundle: nil),
                       forHeaderFooterViewReuseIdentifier: "header") 
    ```

    *加载：*

    ```
    override func tableView(_ tableView: UITableView,
                            viewForHeaderInSection section: Int) -> UIView? {
        if let header =
            tableView.dequeueReusableHeaderFooterView(withIdentifier: "header") {
            let backgroundView = UIView(frame: header.bounds)
            backgroundView.backgroundColor = UIColor(white: 0.5, alpha: 0.5)
            header.backgroundView = backgroundView
            return header
        }
        return nil
    } 
    ```

* * *

[![演示](../Images/72b35da9134cab7d3864b145426b3643.png)](https://i.stack.imgur.com/2dvo5.gif)

[↻ 重播动画](https://i.stack.imgur.com/2dvo5.gif)

► 在[GitHub 上找到此解决方案，并在](https://github.com/SwiftArchitect/SO-15604900)[Swift Recipes](http://swiftarchitect.com/recipes/#SO-15604900)上找到更多详细信息。

* * *

## 回答 #2

> 赞同：119
> 
> 时间：2013-03-24T22:43:39.140

您应该使用`myTableViewHeaderFooterView.tintColor`或分配自定义背景视图给`myTableViewHeaderFooterView.backgroundView`.

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2014-04-30T14:38:31.113

在 iOS 7`contentView.backgroundColor`中为我工作，`tintColor`没有。

```
 headerView.contentView.backgroundColor = [UIColor blackColor]; 
```

虽然`clearColor`对我不起作用，但我找到的解决方案是将 `backgroundView`属性设置为透明图像。也许它会帮助某人：

```
UIGraphicsBeginImageContextWithOptions(CGSizeMake(1, 1), NO, 0.0);
UIImage *blank = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

headerView.backgroundView = [[UIImageView alloc] initWithImage:blank]; 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2014-12-15T10:05:36.893

确保`contentView`为您设置了 backgroundColor `UITableViewHeaderFooterView`：

```
self.contentView.backgroundColor = [UIColor whiteColor]; 
```

然后它将起作用。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2017-06-19T17:12:57.060

对我来说，我尝试了上述所有方法，但仍然收到警告“在 UITableViewHeaderFooterView 上设置背景颜色已被弃用。请改用 contentView.backgroundColor。” 然后我尝试了这个：在 xib 文件中，标题视图的背景颜色被选择为清除颜色而不是默认颜色，一旦我将其更改为默认值，警告就消失了。 [![这是](../Images/d5b31fe01dcfb7ae2dea300cf9617f85.png)](https://i.stack.imgur.com/DqtIq.png)

[![改成这个](../Images/b3e7f00b17803ebe98b93714e9e273b8.png)](https://i.stack.imgur.com/IyLTN.png)

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2018-02-06T18:55:08.383

对于纯色背景色，设置`contentView.backgroundColor`应该就足够了：

```
func tableView(_ tableView: UITableView, willDisplayHeaderView view: UIView, forSection section: Int) {
    if let headerView = view as? UITableViewHeaderFooterView {
        headerView.contentView.backgroundColor = .red // Works!
    }
} 
```

对于具有透明度的颜色，包括`.clear`颜色，这不再有效：

```
func tableView(_ tableView: UITableView, willDisplayHeaderView view: UIView, forSection section: Int) {
    if let headerView = view as? UITableViewHeaderFooterView {
        headerView.contentView.backgroundColor = .clear // Does not work 
    }
} 
```

对于完全透明的部分标题，将`backgroundView`属性设置为空视图：

```
func tableView(_ tableView: UITableView, willDisplayHeaderView view: UIView, forSection section: Int) {
    if let headerView = view as? UITableViewHeaderFooterView {
        headerView.backgroundView = UIView() // Works!
    }
} 
```

但是，请注意可能的副作用。除非表格视图设置为“分组”，否则当向下滚动时，部分标题将在顶部对齐。如果部分标题是透明的，则单元格内容将被看穿，这可能看起来不太好。

在这里，节标题具有透明背景：

[![在此处输入图像描述](../Images/d096f89d89a76ca7689d40f797878cef.png)](https://i.stack.imgur.com/eT1Up.gif)

为了防止这种情况，最好将节标题的背景设置为与表格视图或视图控制器的背景相匹配的纯色（或渐变）。

在这里，节标题具有完全不透明的渐变背景：

[![在此处输入图像描述](../Images/3873f3c0f8aef9f51f8e2bd5086a75e1.png)](https://i.stack.imgur.com/DRISs.gif)

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2015-01-12T06:06:17.003

为了清晰的颜色，我使用

```
self.contentView.backgroundColor = [UIColor clearColor];
self.backgroundView = [UIView new];
self.backgroundView.backgroundColor = [UIColor clearColor]; 
```

对我来说似乎很好。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2018-07-25T15:22:36.287

[![在此处输入图像描述](../Images/cb03524dafe9dec5116a019249745a31.png)](https://i.stack.imgur.com/mcuFA.png)在界面生成器中，在顶部元素上拉起您的 .xib，在属性检查器中将背景颜色设置为默认值。然后转到 Content View 并在那里设置背景颜色（参考[https://github.com/jiecao-fm/SwiftTheme/issues/24](https://github.com/jiecao-fm/SwiftTheme/issues/24)）。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2015-08-06T16:41:20.120

在**iOS9** `headerView.backgroundView.backgroundColor`上为我工作：

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section{
    TableViewHeader *headerView = (TableViewHeader *)[super tableView:tableView viewForHeaderInSection:section];
    headerView.backgroundView.backgroundColor = [UIColor redColor];
} 
```

在**iOS8 上**我使用`headerView.contentView.backgroundColor`没有问题，但现在在 iOS 9 上，我遇到了一个奇怪的问题，即背景颜色没有填满单元格的整个空间。所以我试过了`headerView.backgroundColor`，我从 OP 那里得到了同样的错误。

> 在 UITableViewHeaderFooterView 上设置背景颜色已被弃用。请改用 contentView.backgroundColor。

所以现在一切都很好，没有警告使用`headerView.backgroundView.backgroundColor`

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2015-11-07T11:04:50.830

如果您[使用 Storyboard/Nib 自定义节标题单元格，](http://samwize.com/2015/11/06/guide-to-customizing-uitableview-section-header-footer/)请确保背景颜色是“表节标题”视图的**默认颜色。**

如果您子类化`UITableViewHeaderFooterView`并使用 nib，那么您要做的就是`IBOutlet`为内容视图创建一个，并将其命名为例如。`containerView`. `contentView`这不要与作为此容器视图的父级的混淆。

使用该设置，您可以更改背景颜色`containerView`。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2015-12-27T18:00:28.777

如果您创建了`UITableViewHeaderFooterView`with `xib`file 的自定义子类，那么您应该覆盖`setBackgroundColor`. 保持空白。

```
-(void)setBackgroundColor:(UIColor *)backgroundColor {

} 
```

这将解决您的问题。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-08-14T23:13:20.957

我尝试了外观当包含在链中，它对我有用。

```
[[UIView appearanceWhenContainedIn:[UITableViewHeaderFooterView class], [UITableView class], nil] 
         setBackgroundColor: [UIColor.grayColor]]; 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-03-25T06:06:54.093

将此代码放入**UITableViewHeaderFooterView**子类的初始化中：

```
let bgView = UIView()
bgView.backgroundColor = UIColor.clear
backgroundView = bgView
backgroundColor = UIColor.clear
contentView.backgroundColor = UIColor.clear 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-09-03T19:27:09.130

iOS 12，Swift 5。如果您愿意（或尝试！）使用外观代理，以下解决方案有效：

1.  子类 UITableViewHeaderFooterView 并公开您自己的外观代理设置。

```
final class MySectionHeaderView: UITableViewHeaderFooterView {
    required init?(coder aDecoder: NSCoder) {
        super.init(coder: aDecoder)
    }

    override init(reuseIdentifier: String?) {
        super.init(reuseIdentifier: reuseIdentifier)
    }

    @objc dynamic var forceBackgroundColor: UIColor? {
        get { return self.contentView.backgroundColor }
        set(color) {
            self.contentView.backgroundColor = color
            // if your color is not opaque, adjust backgroundView as well
            self.backgroundView?.backgroundColor = .clear
        }
    }
} 
```

2.  以所需的粒度设置外观代理。

```
MySectionHeaderView.appearance().forceBackgroundColor = .red 
```

或者

```
MySectionHeaderView.appearance(whenContainedInInstancesOf: [MyOtherClass.self]).forceBackgroundColor = .red 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-01-24T11:44:15.920

忘记困难。

使用以下代码添加到您的项目`UITableViewHeaderFooterView+BGUpdate.swift`中：

```
extension UITableViewHeaderFooterView {

    open override var backgroundColor: UIColor? {
        get {
            return self.backgroundColor
        }
        set {
            let bgView = UIView()
            bgView.backgroundColor = newValue
            backgroundView = bgView
        }
    }
} 
```

**用法**很简单，正如您之前预期的那样：

```
headerView.backgroundColor = .red 
```

**用法示例**：

1）在代表的`tableView:viewForHeaderInSection:`：

```
func tableView(_ tableView: UITableView, viewForHeaderInSection section: Int) -> UIView? {
    let headerView = tv.dequeueReusableHeaderFooterView(withIdentifier: "MyHeaderView")
    headerView.backgroundColor = .red // <- here
    return headerView
} 
```

或者

2）在您的自定义标题视图类中：

```
class MyHeaderView: UITableViewHeaderFooterView {

    override func awakeFromNib() {
        super.awakeFromNib()
        backgroundColor = .red // <- here
    }
} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2017-12-17T09:25:25.577

可能是因为 backgroundView 不存在

```
override func draw(_ rect: CGRect){
    // Drawing code
    let view = UIView()
    view.frame = rect
    self.backgroundView = view
    self.backgroundView?.backgroundColor = UIColor.yourColorHere
} 
```

那对我有用。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-06-07T10:11:31.450

创建 UIView 并设置背景颜色，然后将其设置为 self.backgroundView。

```
- (void)setupBackgroundColor:(UIColor *) color {
    UIView *bgView = [[UIView alloc] initWithFrame:self.bounds];
    bgView.backgroundColor = color;
    self.backgroundView = bgView;
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-11-03T09:30:56.237

我觉得有必要分享我的经验。我的这段代码在 iOS 10 和 iOS 11 上运行良好`headerView?.contentView.backgroundColor = .lightGray`

然后我突然决定为 iOS 9 部署应用程序，因为有一些设备（iPad mini 一些老一代不会更新到任何超过 9 的操作系统） - 适用于所有 iOS 9、10 和 11 的唯一解决方案是为标题定义一个基本视图，然后包含所有其他标题子视图，从情节提要连接它并设置该`backgroundColor`基本视图。

在连接插座时要注意不要调用它：`backgroundView`因为在 some 中已经有一个具有该名称的属性`superclass`。我打电话给我的`containingView`

此外，在连接插座控件时，请单击视图`Document Outline`以确保它没有连接到`file owner`

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-09-22T06:41:59.960

用清晰的颜色设置 BackgroundView 对于可见的标题效果很好。如果滚动表格以在底部显示标题，则此解决方案将失败。

PSMy 表仅包含没有任何单元格的标题。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-02-11T09:10:53.363

**迅速：**

```
func tableView(tableView: UITableView, viewForHeaderInSection section: Int) -> UIView {
    var headerView: TableViewHeader = super.tableView(tableView, viewForHeaderInSection: section) as! TableViewHeader
    headerView.backgroundView.backgroundColor = UIColor.redColor()
} 
```

# jquery - 淘汰赛自定义绑定 foreach

> ID：15604902
> 
> 赞同：2
> 
> 时间：2013-03-24T22:38:12.900
> 
> 标签：jquery, knockout.js, knockout-validation

我正在尝试创建一个验证摘要，其中包含指向[KnockoutJS 验证库](https://github.com/ericmbarnard/Knockout-Validation)的错误的链接列表，我需要创建一个自定义的 foreach 处理程序来呈现它。

通过下面的代码，我想要实现的是能够监听 errors() 列表中的变化并构建验证摘要。我实际上并没有使用“错误”列表（因为它只是一个字符串列表），而是使用它来监听更改。

从我所看到的（[有点相关](https://stackoverflow.com/questions/11868585/knockout-js-cannot-wrap-with-foreach-and-other-template-bindings)）我的范围错误 - 因为在“ko.applyBindingsToDescendants”中需要子元素的 ViewModel，但我不确定如何实现这一点。

这是我当前的绑定代码：

```
ko.bindingHandlers.validationSummary = {

    init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {

        function ValidationErrorModel(fieldRef, errorMessage) {
            this.fieldRef = ko.observable(fieldRef),
            this.errorMessage = ko.observable(errorMessage)
        }

        var currentValidationModel = ko.observableArray(),
            $validationElements = $(".validationElement");

        $validationElements.each(function (i, elem) {

            var $elem = $(elem),
                validationErrorModel = new ValidationErrorModel("#" + $elem.attr("name"), $elem.attr("title"));

            currentValidationModel.push(validationErrorModel);

        });

        console.log(currentValidationModel());
        ko.applyBindingsToDescendants({ foreach: currentValidationModel }, element);

        return { controlsDescendantBindings: true };
    },

    update: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {

    }
}; 
```

还有我的模板：

```
<ul data-bind="validationSummary: errors">
    <li>
        <a data-bind="attr: { href: fieldRef }, text: errorMessage"></a>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T01:13:01.803

Stackoverflow 用户 @antishok 在 #knockoutjs IRC 频道上帮助我解决了这个问题：

> 代码需要一个 setTimeout，因为元素仅在触发错误后才使用类和属性进行更新

自定义绑定：

```
ko.bindingHandlers.validationSummary = {

    init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        return ko.bindingHandlers.foreach.init(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext);
    },

    update: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {

        var value = valueAccessor();
        value(); // register dependency

        function ValidationErrorModel(fieldRef, errorMessage) {
            this.fieldRef = ko.observable(fieldRef),
            this.errorMessage = ko.observable(errorMessage)
        }

        setTimeout(function() {
            var currentValidationModel = 
                $(".validationElement").map(function(i, elem) {
                    var $elem = $(elem);
                    return new ValidationErrorModel("#" + $elem.attr("name"), $elem.attr("title"));
                }).get();

            ko.bindingHandlers.foreach.update(element, function() { return currentValidationModel }, allBindingsAccessor, viewModel, bindingContext);
        }, 0);
    }
}; 
```

HTML：

```
<ul data-bind="validationSummary: errors">
    <li>
        <a data-bind="attr: { href: fieldRef }, text: errorMessage"></a>
    </li>
</ul> 
```

# c++ - 为什么我不能将此记录插入 mysql 数据库？

> ID：15604903
> 
> 赞同：0
> 
> 时间：2013-03-24T22:38:17.000
> 
> 标签：c++, mysql

我想使用 mysql++ 向 mysql 数据库中插入一条记录，我打印结果并得到以下消息：

询问：

```
INSERT INTO top_ten_dns_summary VALUES 
(1,google.com,124,29,4,2013-03-24 17:28:32,1969-12-31 17:00:00); 
```

查询错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“17:28:32,1969-12-31 17:00:00)”附近使用正确的语法

* * *

这是我的 top_ten_dns_summar 表：

```
CREATE TABLE top_ten_dns_summary
(
    rank  INT,
    domain_name VARCHAR(20),
    avg_avg_query_time INT,
    stdev_query_time INT,
    numbers_of_query INT,
    start_time_stamp TIMESTAMP, 
    end_time_stamp TIMESTAMP
); 
```

* * *

我对数据库不熟悉，所以有人能给我一些线索吗？我怀疑这是因为数据类型错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T22:40:40.740

字符串文字应该在mysql中用单引号分隔，比如`'2013-03-24 17:28:32'`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T22:40:47.200

```
INSERT INTO top_ten_dns_summary VALUES 
(1,'google.com',124,29,4,'2013-03-24 17:28:32','1969-12-31 17:00:00'); 
```

# javascript - 防止 iPhone 网络应用在输入字段的焦点上滚动

> ID：15604907
> 
> 赞同：6
> 
> 时间：2013-03-24T22:38:53.327
> 
> 标签：javascript, iphone, web-applications, webkit, scroll

当您在 iPhone Safari 中单击网站上的输入字段时，它会以输入居中的方式自动滚动内容。我想阻止 Safari 这样做并找到了几种解决方案，其中之一是：[防止 <input> 元素在 iPhone 上滚动屏幕？](https://stackoverflow.com/questions/2952782/preventing-an-input-element-from-scrolling-the-screen-on-iphone/7949391#7949391)聚焦后，我们使用 jQuery.animate() 回到原来的位置。

不幸的是，这只有在我通过 Safari 调用网站时才有效。一旦我将网站添加到主屏幕，焦点上的自动滚动就会再次出现。现在，当我将 body/html 元素在更正之前和之后的位置（使用上面提到的方法）写入控制台时，一切似乎都正常工作：网络应用程序认为它已经滚动回应该的位置即使我在视觉上没有注意到任何东西。

有什么建议吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2018-10-23T12:02:02.040

在 React (JSX) 中为我修复了在输入点击时自动居中的问题：

`<input onMouseDown={ev => ev.preventDefault()} />`

它应该适用于任何附加事件处理程序的方式，例如**addEventListener**

# java - 调试 Oracle Java 教程 - 从内部类访问的局部变量；需要声明为final

> ID：15604910
> 
> 赞同：0
> 
> 时间：2013-03-24T22:39:06.233
> 
> 标签：java

如果我尝试编译此代码，我会收到一条错误消息，显示“局部变量 phoneNumber1 是从内部类中访问的；需要声明为 final。

很简单，我该如何解决这个问题，所以它没有这个编译错误？我已经阅读了它的技术规范，我已经完成了教程，但我仍然不知所措。我希望没有人得到报酬来写这个东西。

```
public class LocalClassExample {

    static String regularExpression = "[^0-9]";

    public static void validatePhoneNumber(String phoneNumber1, String phoneNumber2) {

       int numberLength = 10;

       class PhoneNumber {

            String formattedPhoneNumber = null;

            PhoneNumber(String phoneNumber){
                // numberLength = 7;
                String currentNumber = phoneNumber.replaceAll(
                  regularExpression, "");
                if (currentNumber.length() == numberLength)
                    formattedPhoneNumber = currentNumber;
                else
                    formattedPhoneNumber = null;
            }

            public String getNumber() {
                return formattedPhoneNumber;
            }

            public void printOriginalNumbers() {
                System.out.println("Original nubmers are " + phoneNumber1 +
                    " and " + phoneNumber2);
            }
        }

        PhoneNumber myNumber1 = new PhoneNumber(phoneNumber1);
        PhoneNumber myNumber2 = new PhoneNumber(phoneNumber2);

        myNumber1.printOriginalNumbers();

        if (myNumber1.getNumber() == null)
            System.out.println("First number is invalid");
        else
            System.out.println("First number is " + myNumber1.getNumber());
        if (myNumber2.getNumber() == null)
            System.out.println("Second number is invalid");
        else
            System.out.println("Second number is " + myNumber2.getNumber());

    }

    public static void main(String... args) {
        validatePhoneNumber("123-456-7890", "456-7890");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:44:37.937

解决此问题的最简单方法是仅将变量声明为 final：

```
...
public static void validatePhoneNumber(final String phoneNumber1, final String phoneNumber2) {
   final int numberLength = 10;
   ...
}
... 
```

# c# - 通过 ASP.NET 将发票、付款、费用等添加到 Quickbooks

> ID：15604913
> 
> 赞同：0
> 
> 时间：2013-03-24T22:39:16.700
> 
> 标签：c#, asp.net, api, quickbooks, quickbooks-online

我有一个 ASP.NET 应用程序，我想将它连接到我的 Quickbooks Online 帐户，以编程方式输入新发票、根据这些发票付款，甚至输入新费用。多年来，似乎有各种各样的 API 和流程已经发生了很多变化，所以我不知道从哪里开始。我不想创建一个我会发布到某种 App Store 或任何东西的应用程序，这仅供个人使用（自动化等）我正在寻找一种简单、直接的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:49:41.280

> 似乎有各种各样的 API 和流程多年来经历了许多变化

这是轻描淡写。Intuit 是令人困惑且实施不佳的 API 之王。:-)

> 我不想创建一个我会发布到某种 App Store 或任何东西的应用程序

由于这仅供您内部使用，此时您唯一的选择是 QuickBooks Online 的 QuickBooks SDK/qbXML 网关。

（IPP/Intuit Anywhere 是最新的 API，但正如[常见问题解答](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0080_FAQ)所述，目前 Intuit Anywhere 仅适用于您转售给他人的 SaaS 应用程序。）

开始使用 qbXML 和 QuickBooks Online 的最简单方法是通过 HTTP 将数据直接发送到网关。一些示例代码如下所示：

```
string requestUrl = null;
requestUrl = "https://apps.quickbooks.com/j/AppGateway";

HttpWebRequest WebRequestObject = null;
StreamReader sr = null;
HttpWebResponse WebResponseObject = null;
StreamWriter swr = null;

try
{
    WebRequestObject = (HttpWebRequest)WebRequest.Create(requestUrl);
    WebRequestObject.Method = "POST";
    WebRequestObject.ContentType = "application/x-qbxml";
    WebRequestObject.AllowAutoRedirect = false;

string post = @"<?xml version=""1.0"" encoding=""utf-8"" ?>
<?qbxml version=""6.0""?>
<QBXML>
<SignonMsgsRq>
<SignonDesktopRq>
<ClientDateTime>%%CLIENT_DATE_TIME%%</ClientDateTime>
<ApplicationLogin>APPLICATION_LOGIN</ApplicationLogin>
<ConnectionTicket>CONNECTION_TICKET</ConnectionTicket>
<Language>English</Language>
<AppID>APP_ID</AppID>
<AppVer>1</AppVer>
</SignonDesktopRq>
</SignonMsgsRq>
<QBXMLMsgsRq onError=""continueOnError"">
<CustomerQueryRq requestID=""2"" />
</QBXMLMsgsRq>
</QBXML>"; 

post = post.Replace("%%CLIENT_DATE_TIME%%", DateTime.Now.ToString("yyyy-MM-ddTHH:mm:ss"));
    XmlDocument xmlDoc = new XmlDocument();
    xmlDoc.LoadXml(post);
    post = xmlDoc.InnerXml;
    WebRequestObject.ContentLength = post.Length;
    swr = new StreamWriter(WebRequestObject.GetRequestStream());
    swr.Write(post);
    swr.Close();
    WebResponseObject = (HttpWebResponse)WebRequestObject.GetResponse();
    sr = new StreamReader(WebResponseObject.GetResponseStream());
    string Results = sr.ReadToEnd();
    }
finally
    {
        try
        {
            sr.Close();
        }
        catch
        {
        }

    try
    {
        WebResponseObject.Close();
        WebRequestObject.Abort();
    }
    catch
    {
    } 
```

请注意，要使用该示例代码，您需要一个应用程序登录名和连接票证。[您可以按照我们的QuickBooks 集成 wiki](http://wiki.consolibyte.com/wiki/doku.php/quickbooks_online_edition#connecting_with_the_desktop_model_of_communication)上的 DESKTOP REGISTRATION 演练获得这些。

如果您需要更多的抽象，您还可以使用 SDK 中包含的 QBFC 库。请注意，“QBOEConnector”.NET 组件过去对人们来说一直是个问题（出于某种奇怪的原因，它们需要一些奇怪的注册表编辑和东西......）。

您可以使用[QuickBooks OSR](http://developer.intuit.com/qbsdk-current/common/newosr/index.html)（选中“OE”复选框，取消选中“US”复选框，使用屏幕顶部的“Select Message”下拉菜单，然后选择“XML Ops”选项卡）查看可用请求发送到 QuickBooks Online。如果您没有在列表中看到它，则 QuickBooks Online API 不支持它。

# asp.net - 动态控制回发更新面板

> ID：15604915
> 
> 赞同：1
> 
> 时间：2013-03-24T22:39:34.877
> 
> 标签：asp.net, dynamic, user-controls, updatepanel, postback

我有一页动态控件，包括文本框、单选按钮、复选框（都绑定到面板）。

我在 Page_init 函数上运行我的创建控制函数。

所以我有类似的东西：

```
 protected void Page_Init(object sender, EventArgs e)
    {
        PopulateControls();
    }

    protected void PopulateControls()
    {
        ....
        for (int j = 0; j < dt.Rows.Count; j++)
         {
          ...create dynamic controls
         }
        Panel1.Controls.Add(dynamic controls);

    } 
```

在回发时（例如，当我取消选中复选框时）屏幕会跳到顶部。

通常，当我不使用动态控件时，我只是将**UpdatePanel/ContentTemplate**放在每个控件周围。但是由于我现在无法做到这一点，有没有办法阻止页面在回发时跳到顶部？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T22:56:58.090

您可以将控件动态添加到`UpdatePanel`. 您必须将它们添加到[`ContentTemplateContainer.Controls`](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.contenttemplatecontainer.aspx).

```
for (int j = 0; j < dt.Rows.Count; j++)
 {
  ...create dynamic controls
 }
UpdatePanel1.ContentTemplateContainer.Controls.Add(dynamic controls); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T23:06:43.513

你的代码

```
Panel1.Controls.Add(dynamic controls); 
```

表明您使用的是**Panel**而不是**UpdatePanel**。以与使用 Panel 相同的方式使用**UpdatePanel**，唯一的例外是您将向**ItemTemplate**而不是 Panel 添加控件。在 Panel 的情况下，它直接保存控件，因为它是一个容器，而在 UpdatePanel 的情况下，它是包含属性或控件的**ContentTemplateContainer 。**因此，您可以使用类似下面的内容而不是上面的行。

```
UpdatePanel1.ContentTemplateContainer.Controls.Add(button1); 
```

如果您要创建多个控件，请确保在**for 循环的主体中包含这行代码。**

希望这可以帮助。

# passwords - Simperium - 用户可以恢复忘记的密码..？

> ID：15604916
> 
> 赞同：0
> 
> 时间：2013-03-24T22:39:37.883
> 
> 标签：passwords, simperium

嗨，我已经在我的 iOS 应用程序中实现了 Simperium，并且很快就会上线，我已经使用 authenticationOptional 功能覆盖了我自己的标准登录屏幕，一切正常。

但是，如果应用程序的用户创建了一个 simperium 帐户以使用同步功能，但随后忘记了他们的密码，会发生什么情况......？我的应用程序使用 simperium 不仅可以将数据同步到 simperium 服务以确保数据安全，还可以在 iPad 和 iPhone 设备之间进行同步。

因此，例如，用户设置了 simperium 登录，然后好几个月都没有再碰过它，他们松开或更换了 iPad，然后想要检索数据但无法记住密码……这是他们的一种方式找回它？例如通过电子邮件发送..？

对不起，如果这是一个愚蠢的问题，但我在任何地方都看不到答案......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T21:54:33.390

`reset_password`您可以使用来自 auth api的调用来提供此功能： [https ://simperium.com/docs/reference/http/](https://simperium.com/docs/reference/http/)

该调用虽然需要具有管理员权限的 API 密钥（仪表板中的管理员密钥），但 [https://simperium.com/docs/reference/http/#reset_password](https://simperium.com/docs/reference/http/#reset_password)

为了安全起见，您需要将该密钥保存在服务器上 - 并添加一个确认步骤（如您提到的电子邮件）。

我们正在考虑将此添加到服务中，因此您不需要自己实现它。

# c++ - 获取将被包括在内的单例类

> ID：15604918
> 
> 赞同：0
> 
> 时间：2013-03-24T22:39:53.010
> 
> 标签：c++, class, object, pointers, singleton

我目前有这个课程：

`Activity`, `ActivityManager`（扩展`Activity`）。

我有一种方法`Activity`，它获取的单例对象`ActivityManager`。

过了一会儿，我看到我陷入了“没有生命的生活”的悖论，因为 ActivityManager 只会由编译器“创建”，AFTER Activity 是。那么，我该怎么做这种事情呢？

我的意思是，我怎样才能获得从第一个对象扩展的一类对象？

我什至不知道如何把它放在谷歌上，所以，请帮助我！谢谢

**编辑**

简化`Activity`

```
class Activity
{
public:
    void start();
};

void Activity::start(void){
    // Start current Activity on the ActivityManager Stack
    ActivityManager *am;
    am = ActivityManager::getInstance();
    am->start(this);
} 
```

简化`ActivityManager`：

```
class ActivityManager: public Activity
{
private:
    // Singleton Object
    static ActivityManager *singleton;

public:
    // Singleton method to return defauld object instance
    static ActivityManager* getInstance(void);

    // Overload method, used to run others Activityes
    void start(Activity& activity);

};

// Singleton method to return default ActivityManager object instance
ActivityManager* ActivityManager::getInstance(){
    if(!singleton) singleton = new ActivityManager();

    return singleton;
}

// Function called on request to start new activity
void ActivityManager::start(Activity& activity){
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:42:34.460

我认为复合模式（[http://en.wikipedia.org/wiki/Composite_pattern](http://en.wikipedia.org/wiki/Composite_pattern)）更适合您的需求。

这将是这样的一些变化（命名在模式方面有点搞砸了，但它们更像是你的代码）：

```
class Activity
{
    public:
        virtual ~Activity();

        virtual void start();
        virtual void add(Activity*);
        virtual void remove(Activity*);

    private:
        Activity();
}

class ActivityManager : Activity
{
    public:
        ConcreteActivity();
        ~ConcreteActivity();

        void start();
        void add(Activity*);
        void remove(Activity*);

    private:
        list<Activity*> _activities;
}

void ActivityManager::start()
{
    list<Activity*>::const_iterator concreteActivity;

    for(concreteActivity = _activities.begin(), concreteActivity != _activities.end(); ++concreteActivity)
    {
        *concreteActivity->start();
    }
}

void ActivityManager::add(Activity* newActivity)
{
    _activities.push_back(newActivity);
}

void ActivityManager::remove(Activity* activityToDelete)
{
    _activities.remove(activityToDelete);
}

class SomeActivity : Activity
{
     public:
         SomeActivity();
         ~SomeActivity();

         void start();
}

class OtherActivity : Activity
{
     public:
         OtherActivity();
         ~OtherActivity();

         void start();
} 
```

以及使用示例：

```
ActivityManager* manager = new ActivityManager();

SomeActivity* activity_one = new SomeActivity();
OtherActivity* activity_two = new OtherActivity();

manager->add(activity_one);
manager->add(activity_two);
manager->start(); 
```

如果您愿意，您仍然可以将 ActivityManager 设为 Singleton。没有关于您的项目的任何其他信息，想不出更好的方法。

# java - 奇怪的空指针异常

> ID：15604920
> 
> 赞同：1
> 
> 时间：2013-03-24T22:39:55.250
> 
> 标签：java

我正在尝试使用 2 个名为 stack 和 buffer 的堆栈来实现一个数组。最初堆栈填充随机值，MyArrayI 接口包含 2 个函数：getItemAt(int index) 和 setItemAt(int index, int item)。并且它们在 MyStackArray 类中成功实现。每当我运行程序时，我都会收到 Null 异常错误，我试图追踪原因，直到我发现堆栈没有填充初始数据 - 也许。每当我尝试访问堆栈或缓冲区时，我都会收到 NullPointerException 错误。当我尝试打印数组堆栈中的元素时，我仍然得到愚蠢的 NPE 错误！

```
public class MyStackArray implements MyArrayI {
    private int[] buffer;
    private int[] stack;
    private int maxSize;

    public MyStackArray(int s){
        maxSize = s;
        int[] buffer = new int [maxSize];
        int[] stack = new int [maxSize];

        for(int i=0; i<maxSize; i++)
            stack[i]=i;    // initiallizing the array with random values.
    }

    public void print(){              // tried to check the contents of the stack array.
         for(int i=0; i<maxSize; i++)
          System.out.println(stack[i]); // causes Null Pointer Exception. ??!
        //System.out.println(stack[0]); // still causes the NPE !! 
    }

    public void setItemAt(int index, int item){
        int i;
        int j;

            for(i=0, j=maxSize-1 ; i<maxSize && j>=0 ; i++, j--){
                if(j == index)
                    break;
                buffer[i] = stack[j];  //causes a NULL.PointerException
           }
           stack[j] = item;   
    }

    public int getItemAt(int index){
        int i;
        int j;

            for(i=0, j=maxSize-1 ; i<maxSize && j>=0; i++, j--){
                if(j==index)
                    break;
                buffer[i] = stack[j];   // causes NPE
           }
           return stack[j];  
    }

    public static void main(String[] args) {

      MyStackArray X = new MyStackArray(3);
      //X.setItemAt(0,4);  // causes NPE
      //X.getItemAt(1);    // causes NPE
    X.print();             // causes NPE
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T22:42:17.260

```
int[] stack = new int [maxSize]; 
```

在这里，您正在创建一个名为的新变量`stack`- 这与`this.stack`. 你反而想要：

```
stack = new int[maxSize];  // i.e. initialize this.stack, not another variable 
```

当未初始化时，`this.stack`保持不变`null`，当您尝试访问它时会收到 NPE。

PS你也在做同样的事情`buffer`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T22:48:43.500

您实际上是在构造函数中初始化新的（本地）数组。你有

```
public MyStackArray(int s){
    maxSize = s;
    int[] buffer = new int [maxSize];  //You are declaring new array
    int[] stack = new int [maxSize];  //You are declaring new array

    for(int i=0; i<maxSize; i++)
        stack[i]=i;    // initiallizing the array with random values.
} 
```

但是您应该在构造函数中使用它：

```
public MyStackArray(int s){
    maxSize = s;
    buffer = new int [maxSize];
    stack = new int [maxSize];

    for(int i=0; i<maxSize; i++)
        stack[i]=i;    // initiallizing the array with random values.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T22:42:50.270

您没有正确初始化变量：

```
public MyStackArray(int s){
    maxSize = s;
    int[] buffer = new int [maxSize]; // Initializes LOCAL buffer
    int[] stack = new int [maxSize]; // Initializes LOCAL stack

    for(int i=0; i<maxSize; i++)
        stack[i]=i;    // initiallizing the array with random values.
} 
```

像这样改变：

```
public MyStackArray(int s){
    maxSize = s;
    buffer = new int [maxSize];
    stack = new int [maxSize];

    for(int i=0; i<maxSize; i++)
        stack[i]=i;    // initiallizing the array with random values.
} 
```

# facebook - 流表 FQL 查询

> ID：15604923
> 
> 赞同：0
> 
> 时间：2013-03-24T22:40:01.593
> 
> 标签：facebook, facebook-javascript-sdk, facebook-fql

我想通过updated_time获取我朋友的帖子，当我使用source = first_friend_id时，这个查询对单身朋友很好，但是当我使用这个查询时返回空数据。

```
SELECT post_id,type,message, actor_id,likes.user_likes,likes.count,likes.friends,comments.comment_list, comments.count , target_id ,updated_time,created_time FROM stream WHERE source_id in(friend_id1,friend_id2,friend_id3) ORDER BY updated_time DESC LIMIT 5 
```

有人可以指出如何获取 3 个朋友的最新 5 个提要。

source_id =friend_id 工作正常，但它只适用于 1 个朋友

我在这里测试它。 [https://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:44:52.927

最近有很多这样的帖子......看起来该`stream`表最近表现得非常挑剔，因为该查询的逻辑是有效的。最好的办法是在[此处报告详细的错误](https://developers.facebook.com/bugs/)

# javascript - 使用 jquery 为动态生成的元素分配 ID

> ID：15604924
> 
> 赞同：0
> 
> 时间：2013-03-24T22:40:08.843
> 
> 标签：javascript, jquery, css, html

在我的应用程序中，我阅读了一个 RSS 提要。使用 zrssfeed ( [http://www.zazar.net/developers/jquery/zrssfeed/](http://www.zazar.net/developers/jquery/zrssfeed/) ) 会显示提要的元素。我的问题是，在每个列表项中，有三个

没有 ID 或类的元素。

我想为这些中的每一个设置样式

元素不同。我怎样才能做到这一点？

```
<div>
 <ul> 
 <li>
         <img />
         <p>text1</p>
         <p>text2</p>
         <p>text3</p>
 </li>
 <li> .. next item... </li>
 </ul>
</div> 
```

如何为这些元素中的每一个分配不同的 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T22:42:36.633

```
// after elements have been created
$('li').find('p').each(function (i) {
    $(this).attr('id', 'p_' + i);
}); 
```

[小提琴](http://jsfiddle.net/ethagnawl/rL2Ea/1/)

您还可以使用 css3 的`nth-child`选择器：

```
p:nth-child(1) {
    color: pink;
}

p:nth-child(2) {
    color: green;
}

p:nth-child(3) {
    color: yellow;
} 
```

[小提琴](http://jsfiddle.net/ethagnawl/wavCj/1/)

# java - Joda Time 的 DateTimeFormatter 的意外行为？

> ID：15604933
> 
> 赞同：2
> 
> 时间：2013-03-24T22:40:36.650
> 
> 标签：java, jodatime

如果 DateTimeFormatter 的方法 'public String print(ReadableInstant instant)' 传递了一个 null DateTime（这也是一个 ReadableInstant），我期待 DateTimeFormatter 返回 null 或什么都不返回。

令人惊讶的是，它返回当前时间而不是抛出错误。这可能是一个错误吗？

这是相关代码 -

```
import org.joda.time.*;
import org.joda.time.format.DateTimeFormat;
import org.joda.time.format.DateTimeFormatter;

public class JodaTest {

public static void main(String[]args){

    DateTime dt = null;
    String ss = getTimeInAFormat(dt);
    System.out.println(ss);

}

public static String getTimeInAFormat(DateTime time) {

    DateTimeFormatter dtf = DateTimeFormat.forPattern("MM-dd-YYYY hh:mm");
    String dateTime = dtf.print(time); // Should throw an error or return,  
    return dateTime; // a String = "NO DATE SET"

}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T22:45:08.407

它的行为与[记录](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormatter.html#print%28org.joda.time.ReadableInstant%29)的一样：

> 参数：
> 
> Instant - 立即格式化，null 表示现在

# ruby - rspec - 如何存根具有多个用户输入的方法？

> ID：15604939
> 
> 赞同：4
> 
> 时间：2013-03-24T22:40:49.283
> 
> 标签：ruby, rspec, stub

我将如何存根一个使用 rspec 接受两个用户输入的方法？可能吗？

```
class Mirror
    def echo
        arr = []
        print "enter something: "
        arr[0] = gets.chomp
        print "enter something: "
        arr[1] = gets.chomp

        return arr
    end
end

describe Mirror do

    it "should echo" do
        @mirror = Mirror.new
        @mirror.stub!(:gets){   "foo\n" }
        @mirror.stub!(:gets){   "bar\n" }
        arr = @mirror.echo
        #@mirror.should_receive(:puts).with("phrase")
        arr.should eql ["foo", "bar"]

    end

end 
```

使用这些规范，@mirror.echo 的返回值是 ["bar", "bar"] 意味着第一个存根被覆盖或以其他方式忽略。

我也尝试过使用 @mirror.stub!(:gets){"foo\nbar\n"} 和 @mirror.echo 返回 ["foo\nbar\n","foo\nbar\n"]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T22:57:58.613

您可以使用[and_return](http://www.rubydoc.info/github/rspec/rspec-mocks/RSpec/Mocks/MessageExpectation%3aand_return)方法在每次调用方法时返回不同的值。

```
@mirror.stub!(:gets).and_return("foo\n", "bar\n") 
```

你的代码看起来像这样

```
it "should echo" do
  @mirror = Mirror.new
  @mirror.stub!(:gets).and_return("foo\n", "bar\n")
  @mirror.echo.should eql ["foo", "bar"]
end 
```

使用示例`and_return`

```
counter.stub(:count).and_return(1,2,3)
counter.count # => 1
counter.count # => 2
counter.count # => 3
counter.count # => 3
counter.count # => 3 
```

# ios - 在 iOS5 和 iOS6 中缩放 UIWebView 以适应全屏

> ID：15604945
> 
> 赞同：0
> 
> 时间：2013-03-24T22:41:10.107
> 
> 标签：ios, xcode, ios6

我在缩放 UIWebView 时遇到问题。我希望 WebView 在两个版本（iOS5 和 iOS6）上全屏运行。我必须关闭“使用自动布局”才能让我的应用程序也可以在 iOS5 上运行。我的问题是我的 webView 高于 iOS5 屏幕。

我的问题：

有没有办法让两种设备的视图都适合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:58:05.850

您需要手动为视图编码以根据屏幕尺寸更改尺寸。

您可以获取屏幕尺寸（特别是高度）：

```
[[UIScreen mainScreen] bounds].size.height;
[[UIScreen mainScreen] bounds].size.width; 
```

然后使用这些值设置 UIWebView 的大小。

```
webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, [[UIScreen mainScreen] bounds].size.height)]; 
```

# mysql - sql 使用 LIKE vs locate() 搜索子字符串

> ID：15604946
> 
> 赞同：1
> 
> 时间：2013-03-24T22:41:14.380
> 
> 标签：mysql, sql, collation

我正在尝试编写一个查询来查找包含子字符串的字符串。以下两种方法有什么区别？

1.  `SELECT * FROM table WHERE names LIKE '%bob%'`
2.  `SELECT * FROM table WHERE locate('bob', names)`

我第一次学会使用 LIKE，但我遇到了“Illegal mix of collat​​ions..”错误，说我正在比较英语（拉丁语）和​​汉语（big5）。在搜索修复排序规则问题的方法时，我遇到了 locate()，当我尝试它时它并没有抱怨排序规则。只是想知道我是否可以继续使用 locate() 或者它是否有任何缺点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:40:24.540

在很大程度上，这是一个品味问题。

最重要的考虑因素是`like`ANSI 标准 SQL 并被大多数（如果不是全部）数据库支持。 `locate`是特定于 MySQL 的，因此不一定可移植到其他数据库。

一些数据库优化表达式`x like 'y%'`以使用索引。MySQL 没有，所以这不是你要考虑的。

另一个优点`like`是它支持初始匹配 ( `'y%'`) 和最终匹配 ( `'%y'`) 以及中间匹配。一种方法适用于所有三种。using 的等效语句`locate`更复杂。

我的偏好是使用`like`，尤其是因为它的可移植性。但是，我通常不会面对处理不同的字符集。您可能最好[学习](http://dev.mysql.com/doc/refman/5.0/en/charset-collate.html)MySQL 中的排序规则，而不是尝试找到解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T23:42:35.973

他们根本没有做同样的事情。`LIKE`是一个进行文本匹配的运算符，而是一个`LOCATE`返回第一次出现的位置的函数。

[http://www.w3resource.com/mysql/string-functions/mysql-locate-function.php](http://www.w3resource.com/mysql/string-functions/mysql-locate-function.php) [http://www.w3resource.com/mysql/string-functions/mysql-like-function.php](http://www.w3resource.com/mysql/string-functions/mysql-like-function.php)

# mysql - AWS Linux 使用 tomcat7 配置 mysql

> ID：15604950
> 
> 赞同：0
> 
> 时间：2013-03-24T22:41:24.287
> 
> 标签：mysql, linux, tomcat, amazon-ec2

我已经在我的 AWS Linux 微型实例上安装了 Tomcat 7 和 MySQL 5.5。我试图弄清楚如何配置 Tomcat 7 以与 MySQL 通信，但没有运气。我一直是 Glassfish 用户，所以通过 GUI 操作非常简单，但是对于 Tomcat，我不知道如何配置它。

我查看了 Tomcat 7 上的 Apache 文档，但发现自己更加困惑。我不知道需要编辑的文件在哪里，也不知道用什么来编辑它们。我需要安装 MySQL 驱动程序吗？我使用 JDBC 还是 JNDI？我的应用是使用 Hibernate 的 Tapestry5 应用，所以我不确定这是否重要。

有没有人知道一个很好的指南或者可以为我提供如何做到这一点的示例代码？只是为了记录，我只有几个小时在 Linux 的车轮后面，所以当涉及到任何与 Linux 相关的东西时，我都非常绿色。

**更新**

我找到了以下默认配置

```
<!--    <Resource name="UserDatabase" auth="Container"
              type="org.apache.catalina.UserDatabase"
              description="User database that can be updated and saved"
              factory="org.apache.catalina.users.MemoryUserDatabaseFactory"
              pathname="conf/tomcat-users.xml" />
--> 
```

我正在使用休眠，在 hibernate.cfg.xml 中我正在使用以下内容

```
<hibernate-configuration>
    <session-factory>
        <property name="hibernate.connection.datasource">jdbc/mydatabase</property> 
```

我注释掉了上述资源并添加了以下内容，但这似乎也不起作用。我还注意到我也无法再访问 tomcat 管理器。

```
<Resource type="javax.sql.DataSource"
            name="jdbc/mydatabase"
            factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"
            driverClassName="com.mysql.jdbc.Driver"
            url="jdbc:mysql://localhost:3306/mysql"
            username="root"
            password="password"
/> 
```

我将以下内容添加到 context.xml 文件中

```
<ResourceLink type="javax.sql.DataSource"
                name="jdbc/mydatabase"
                global="jdbc/mydatabase" 
```

有谁知道我在这个配置上做错了什么？

我收到以下异常

> 根本原因
> 
> ```
> HTTP Status 500 - java.lang.RuntimeException: Exception constructing service 'ValueEncoderSource': Error invoking service 
> ```
> 
> 贡献方法 org.apache.tapestry5.hibernate.HibernateModule.contributeValueEncoderSource(MappedConfiguration, boolean, HibernateSessionSource, Session, TypeCoercer, PropertyAccess, LoggerSource)：构造服务'HibernateSessionSource'的异常：调用构造函数public org.apache.tapestry5.internal.hibernate时出错。 HibernateSessionSourceImpl(org.slf4j.Logger,java.util.List)：找不到数据源
> 
> ```
> javax.naming.NameNotFoundException: Name [jdbc/mydatabase] is not bound in this Context. Unable to find [jdbc]. 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T06:27:30.553

我在一个项目中遇到了类似的问题。我忘记将 jdbc mysql 连接器放在 apache tomcat 的 lib 文件夹中。[Mysql JDBC 连接器](http://dev.mysql.com/downloads/connector/j/)

后来我将文件添加到 lib 文件夹并摆脱了异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:50:03.530

```
1\. Context configuration

Configure the JNDI DataSource in Tomcat by adding a declaration for your
resource to your Context.

Open the context.xml which is located at the Tomcat configuration (conf) folder.

For Example: (This path might be differ for your tomcat instance)

D:\Program Files\Apache Software Foundation\Tomcat 5.5\conf

Add the following Resource entry with your database properties.

</Context>

--------------------------------------------

---------------------------------------------

<Resource name="jdbc/Foofys" auth="Container" type="javax.sql.DataSource"

maxActive="100" maxIdle="30" maxWait="10000"

username="root" password="pradeep" driverClassName="com.mysql.jdbc.Driver"

url="jdbc:mysql://localhost:3306/foofys"/>

</Context>

Bolded attributes should be as per your database configurations.

2\. web.xml configuration

Open the context.xml which is located at the Tomcat configuration (conf) folder.

For Example: (This path might be differ for your tomcat instance)

D:\Program Files\Apache Software Foundation\Tomcat 5.5\conf

<?xml version="1.0" encoding="ISO-8859-1"?>

<web-app xmlns="http://java.sun.com/xml/ns/j2ee"

xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"

xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/
j2ee/web-app_2_4.xsd"

version="2.4">

<resource-ref>

<description>DB Connection</description>

<res-ref-name>jdbc/Foofys</res-ref-name>

<res-type>javax.sql.DataSource</res-type>

<res-auth>Container</res-auth>

</resource-ref>

-----------------------------------------------

-------------------------------------------------

</web-app>

3\. Copy the My SQL database driver into the tomcat common
libraries folder.

For Example: (This path might be differ for your tomcat instance)

D:\Program Files\Apache Software Foundation\Tomcat5.5\common\lib

mysql-connector-java-5.1.10.jar 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T07:09:10.207

我已经使用 JNDI 配置了 Tomcat 6，但我不记得确切的配置设置，但有一件事是确定您需要使用 JNDI。

# sql - '(' 附近的 SQL 查询中的语法不正确

> ID：15604953
> 
> 赞同：-3
> 
> 时间：2013-03-24T22:41:36.373
> 
> 标签：sql, sql-server, syntax, syntax-error

我相信问题就在`(`旁边，`quoted price`因为我收到了`Incorrect syntax near '('`. 对此的任何帮助将不胜感激。使用 Microsoft SQL-Server Management Studio。

```
create view order_total as

select order_num

sum (quoted_price * num_ordered) as total_amount

from order_line; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T22:56:05.453

在您的查询中，您没有用逗号分隔要返回的列。该`SELECT`语句的一般语法需要它们：

```
create view order_total as

SELECT   order_num,
         sum (quoted_price * num_ordered) AS total_amount
FROM     order_line
GROUP BY order_num; 
```

（停止忘记逗号的一个好方法是将它们放在行的开头，而不是结尾，如下所示：

```
SELECT column1
       ,column2
       ,etc.
FROM   table 
```

`--`通过将列放在行前而不中断查询，也可以非常简单地快速注释列。）

# c# - 如何在datagridview中一行的文本框中显示结果？

> ID：15604955
> 
> 赞同：0
> 
> 时间：2013-03-24T22:41:47.157
> 
> 标签：c#, datagridview

我想创建一个小程序来创建一个将两个数字相加的算术运算符。

当我双击我的datagridview中的一个单元格时，我外面的文本框将显示这一行的结果。

例如：

```
1  3
3  5
2  8 
```

我还为我的程序创建了一个类，类的名字是Cac，里面的方法是

```
public int CacAB()
    {
        int result= a + b;
        return result;
    } 
```

第一行的结果应该是 4，第二行应该是 8，第三行应该是 10。

我的文本框的名称只是 textBox1 而我的 datagridview 的名称只是 datagridview1，如何制作？非常感谢。

到目前为止，我知道我需要创建一个方法，例如：“dataGridView1_CellDoubleClick”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:49:10.140

所以我想可能是你想实现这个

```
private void DataGridView1_CellDoubleClick(object sender, DataGridViewCellEventArgs e)
{
     int firstValue = Convert.ToInt32(DataGridView1.Rows(e.RowIndex).Cells("Column1").Value.ToString());

     int secondValue = Convert.ToInt32(DataGridView1.Rows(e.RowIndex).Cells("Column2").Value.ToString());

     textBox.Text = (firstValue + secondValue).ToString();
} 
```

# function - 在循环中使用调用函数

> ID：15604963
> 
> 赞同：0
> 
> 时间：2013-03-24T22:42:20.143
> 
> 标签：function, loops

这是一个非常复杂的代码，但请耐心等待。

此代码用于检查回文。我遇到的问题是不知道如何从另一个函数和循环中调用函数。

这是有问题的行：

```
if (new_num != rev)
    {
      while (higher != calc_reverse(higher) && lower != calc_reverse(lower))
    {
      higher = calc_reverse(number++);
      lower = calc_reverse(number--);
    } 
```

下面是涉及错误的程序后半部分的代码。当我使用它时，我只会在无限循环中打印“rev（数字）”，直到我强制结束代码。

```
//Function Declaration
int calc_reverse(int new_num)
 {
 //Local Declarations
  int count = 0; // number of digits in the number
  int rev = 0; //the reverse of the number
  int last; //the last digit of the number

 //Calulations
  while (new_num > 0)
   {
  last = new_num % 10;
  rev = last + (rev * pow(10, count));
  new_num = new_num / 10;
  count++;
   }
  printf("rev %d \n", rev);
  fflush(stdout);
  return(rev);
 }

//function Decleration
void calc_closest(int count, int new_num, int rev, int  number)
{
 //Local declerations
   int higher = 12; //the higher palindrome
   int lower = 12; // the lower palindrome

   printf(" %d, %d \n", new_num, rev);
   fflush(stdout);
 //Calculations
   if (new_num == rev)
    {
      printf("The value input (%d) is a compact palindrome. \n", number);
    }

   if (new_num != rev)
    {
      while (higher != calc_reverse(higher) && lower != calc_reverse(lower))
    {
      higher = calc_reverse(number++);
      lower = calc_reverse(number--);
    }
   if (higher == new_num && lower == new_num)
    {
      printf("Closest palindromes to %d are: %d, %d \n", number, lower, higher);
    }
   else if(higher == new_num)
    {
      printf("Closest palindromes to %d are: %d \n", number, higher);
    }
   else if (lower == new_num)
    {
      printf("Closest palindromes to %d are: %d \n", number, lower);
    }
    }
    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:47:15.967

您使用相同的变量“number”来向上计数（number++）和向下计数（number--）。

那是行不通的。当您加一然后减一时，您会得到与开始时相同的数字，从而使您陷入无限循环。

您将需要使用两个单独的变量。

或者，您可以只使用一个升序计数器来计算较大的数字和较小的数字。例如：i=0,1,2,3...，更高：number+i，更低：number-i。这里的“数字”永远不会改变初始值。

# c - strcmp 的分段错误（列表）

> ID：15604965
> 
> 赞同：-6
> 
> 时间：2013-03-24T22:42:31.533
> 
> 标签：c, segmentation-fault

我有一个列表，我想从这个列表中删除比较人名的寄存器。这是删除功能：

```
void remove(char name[]){
  if (pBegin!=NULL){
    Nodo *pcopy;
    if (!strcmp(name,pBegin->person.name)){
      pcopy=pBegin;
      pBegin=pBegin->pNext;
      printf("REMOVED!\n");
      free(pcopy);
    }
    else{
      Nodo *pCurrent=pBegin;
      Nodo *pPrevious=NULL;
      while ((strcmp(name,pCurrent->person.name)) && (pCurrent!=NULL)){  // here is probably the error
        pPrevious=pCurrent;
        pCurrent=pCurrent->pNext;
      }
      if (pBegin==NULL)
        printf("The name was not found!\n");
      else{
        pPrevious->pNext=pCurrent->pNext;
        printf("REMOVED!\n");
        free(pCurrent);
      }
    }
  }
  else
    printf("empty list!\n");
} 
```

对不起，大帖子和视觉上的丑陋。这是我在这里的第一篇文章，我是 C 新手，已经尝试了所有方法，但无法解决此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:40:59.957

在 strcmp 中使用 pCurrent!=NULL 后测试它为时已晚。

```
 while (pCurrent!=NULL && strcmp(name,pCurrent->person.name)){ // test names are different 
```

# c# - 实体上的休眠预设ID，无法使其持续存在

> ID：15604971
> 
> 赞同：0
> 
> 时间：2013-03-24T22:42:57.310
> 
> 标签：c#, hibernate, nhibernate, orm

我有一个实体`Account`，在正常情况下，它的 Guid Id 将由 NHibernate 生成。但是，我想对一些`Account`ID 进行“硬编码”，这些帐户将在任何地方被引用并提供非常具体的功能。

我想在配置文件中定义这些对象，并带有预配置的 Guid Id，并且在启动我的应用程序时，检查这些帐户是否存在于数据库中。如果没有，我想按原样添加它们。如果它们在那里，我想覆盖数据库版本并保留配置文件中设置的属性。

我心想，这似乎`ISession.Merge`是为了什么，但对象并没有持久化。然后我对自己想，这一定`ISession.Persist`是为了，但这会引发一个异常，抱怨坚持一个分离的对象。 `ISession.SaveOrUpdate`同样不会持久化对象。

我需要做什么才能在 NHibernate 中保留这些“预制”对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-03-23T15:31:22.217

您可以使用重载的 Save(object obj, object id); 保存具有特定 id 的实体；[NHibernate ISession](https://github.com/nhibernate/nhibernate-core/blob/master/src/NHibernate/ISession.cs "NHIbernate ISessionquo​​t;")

```
/// <summary>
/// Persist the given transient instance, using the given identifier.
/// </summary>
/// <param name="obj">A transient instance of a persistent class</param>
/// <param name="id">An unused valid identifier</param>
void Save(object obj, object id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T00:00:48.493

将这些预定义的 Guid 放在字符串常量中。您可以从字符串常量创建 Guid 实例。在应用程序启动中使用这些 guid 查询数据库中的对象。如果找到更新对象并在数据库中进行更新。如果未找到，则使用预定义的 guid 创建对象实例并进行插入。

换句话说，这些“预制”对象并没有什么特别之处。将它们视为常规对象，就像任何其他没有预定义 ID 的对象一样。

更新：这不是那么简单。NHibernate 可能会尝试使用新的 Guid 填写 ID，问题是如何告诉 NHibernate 有时您想自己执行此操作？

Session.Merge 将首先尝试从 Db 加载实体，如果找到一个，它将内存中的实例与 from-db 实例合并。否则它将向数据库添加新实例。

您始终可以使用 ADO.NET 直接添加此预定义实体，完全手动跳过 NH，但这不是一个很好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T14:44:51.317

如果您的映射说 NH 将生成 Id，那么您不能使用 NH 插入特定 Id。

`assigned`要么使用 ad-hoc SqlQuery，要么为具有Id的初始化创建部分修改的映射配置。

# python - FFT y尺度混淆 - Python scipy

> ID：15604973
> 
> 赞同：-1
> 
> 时间：2013-03-24T22:43:20.363
> 
> 标签：python, scipy, fft, binary-data

我正在对随机二进制数据执行 FFT。我对 y 轴比例因子是什么感到困惑。我的随机数据有 400Hz 的重复频率，或 0.0025 秒的测量间隔。数据点数为 12489。

下面的代码有效，平均幅度约为 50。

**我的问题：**

*   y.size 在这种情况下究竟做了什么？
*   对 12489 个随机二进制点执行 FFT 的预期幅度是多少？（我知道这个问题是专门针对这里的，但如果可以理解，我将不胜感激）。

工作代码：（如果您想将其复制并粘贴到 Python 中查看）

```
from numpy import *
import pylab as P
import numpy as N
import scipy as S
import array
import scipy.fftpack
from random import *

#Produce random binary data
x = N.linspace(0,12489,12489)
randBinList = lambda n: [randint(0,1) for b in range(1,n+1)]
y = randBinList(12489)
y = asarray(y)

#Perform an FFT
FFT = abs(S.fft(y)) 
freqs = S.fftpack.fftfreq(y.size,0.0025) 

#What does y.size do???

x_range = freqs[(freqs>0)]
y_range = FFT[(freqs>0)]

P.plot(x_range,y_range,'.r')
P.show() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:11:30.817

`fftfreq`生成 FFT 结果的每个 bin 的频率，该频率是根据您传入的样本数和采样率 ( [doc](http://docs.scipy.org/doc/numpy/reference/generated/numpy.fft.fftfreq.html) ) 计算得出的。

# php - 无法共享 PHP 变量

> ID：15604975
> 
> 赞同：1
> 
> 时间：2013-03-24T22:43:21.320
> 
> 标签：php, variables

我在我的代码主体和函数之间共享变量值时遇到问题。

对于此示例，我想将图像上传到数据库，其值与正在使用的地方的 ID 匹配。

我目前从使用的 URL 中获取正在使用的位置的 ID，`$_REQUEST`并尝试将其写入变量“mid”，然后我将其发送到`createthumnail`函数（包含在**functions2.php**中），但***“mid”***值不会传输由于某些原因。

要重新创建：

1.  访问：http: [//www.students.bl.rdi.co.uk/stu26984/index.php](http://www.students.bl.rdi.co.uk/stu26984/index.php)
2.  登录方式： 用户名：Test 密码：test123
3.  去我的地方
4.  点击 WalkaboutSF 链接
5.  尝试通过“选择文件”按钮上传文件

以下是functions2.php的全文

```
<?php

function createThumbnail2($filename, $mid) {
    include 'base.php';
    require 'config.php';
    if(preg_match('/[.](jpg)$/', $filename)) {
        $im = imagecreatefromjpeg($path_to_image_directory . $filename);
    } else if (preg_match('/[.](gif)$/', $filename)) {
        $im = imagecreatefromgif($path_to_image_directory . $filename);
    } else if (preg_match('/[.](png)$/', $filename)) {
        $im = imagecreatefrompng($path_to_image_directory . $filename);
    }

    $ox = imagesx($im);
    $oy = imagesy($im);

    $nx = $final_width_of_image;
    $ny = floor($oy * ($final_width_of_image / $ox));

    $nm = imagecreatetruecolor($nx, $ny);

    imagecopyresized($nm, $im, 0,0,0,0,$nx,$ny,$ox,$oy);

    if(!file_exists($path_to_thumbs_directory)) {
      if(!mkdir($path_to_thumbs_directory)) {
           die("There was a problem. Please try again!");
      } 
       }

    imagejpeg($nm, $path_to_thumbs_directory . $filename);
    //  $cookieUserx=$_SESSION['Username'];
    //  $checkCustidx=mysql_query("SELECT custid AS id from customers WHERE custUsername='".$cookieUserx."';");
    //  $rx=mysql_fetch_array($checkCustidx);
    //  $custidx=$rx['id'];
    //  $updateimage = mysql_query("UPDATE photos SET name = '".$filename."';")or die ('SQL Error: ' . mysql_error()); 
        $updateimage = mysql_query("INSERT INTO photos (NAME, markerid) VALUES('".$filename."', '".$mid."');")or die ('SQL Error: ' . mysql_error()); 
                   if($updateimage)  
            {  
                header("Location: /WalkaboutSF/viewplace.php?place_id=%20".$mid."");
            }  
            else  
            {  
                echo "<h1>Error</h1>";  
            }  

    $tn = '<img src="' . $path_to_thumbs_directory . $filename . '" alt="image" />';
    echo $tn;
}

?> 
```

这里也是调用它的代码，来自：

[http://www.students.bl.rdi.co.uk/stu26984/viewplace.php?place_id=%20133](http://www.students.bl.rdi.co.uk/stu26984/viewplace.php?place_id=%20133)

```
 <div id="insertphoto">      
            <?php
    require 'config.php';
    require 'functions2.php';
    $place_id = $_REQUEST['place_id'];
            $view_place2 = mysql_query("SELECT * FROM markers WHERE id = '$place_id'");
            $place2 = mysql_fetch_array($view_place2);
            $mid= $place2['id'];
            echo $mid;

        if(isset($_FILES['fupload'])) {

        if(preg_match('/[.](jpg)|(gif)|(png)$/', $_FILES['fupload']['name'])) {
            $filename = $_FILES['fupload']['name'];
            $source = $_FILES['fupload']['tmp_name'];   
            $target = $path_to_image_directory . $filename;

        move_uploaded_file($source, $target);
        createThumbnail2($filename, $mid);      
    }
}
   ?>
    <h2>Add Photo</h2>
    <form enctype="multipart/form-data" action="<?php print $_SERVER['PHP_SELF'] ?>" method="post">
        <input type="file" name="fupload" />
        <input type="submit" value="Go!" />
    </form>   
            </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T00:35:11.547

有几件事可能会发生。首先：

```
$place2 = mysql_fetch_array($view_place2);
$mid= $place2['id'];
echo $mid; 
```

你确定这`$mid`是在这里设置的吗？查询是否有可能没有返回任何行？

如果您确定它在此处具有值，请检查以下内容：

```
function createThumbnail2($filename, $mid) {
    include 'base.php';
    require 'config.php'; 
```

您确定`base.php`还是`config.php`没有覆盖 的值`$mid`？尝试将代码更改为：

```
function createThumbnail2($filename, $mid) {
    echo "mid before includes = $mid<br />\n";
    include 'base.php';
    require 'config.php';
    echo "mid after includes = $mid<br />\n"; 
```

这将向您显示您的包含是否踩到了您的局部变量。

**编辑：**我不想绕开这个问题，但是您的代码对 SQL 注入是开放的。`viewplace.php`我可以通过使用错误值来轻松擦除您的数据库。至少，这样做：

```
$place_id = mysql_real_escape_string($_REQUEST['place_id']); 
```

您的插入语句有同样的问题。研究使用`mysqli`或`PDO`使用准备好的语句。

**编辑 2：**您的代码不起作用的原因是因为这里有 2 个不同的 HTTP 请求：一个用于显示初始页面，一个用于处理上传表单的 POST。

问题在于第二个请求（POST）。这段代码是罪魁祸首：

```
<form enctype="multipart/form-data" action="<?php print $_SERVER['PHP_SELF'] ?>" method="post"> 
```

这不是将 ID 传递给`$_REQUEST['place_id']`. 只需在该行下方添加这一行：

```
<input type="hidden" name="place_id" value=<?php echo HtmlspecialChars($_REQUEST['place_id']); ?>" /> 
```

`place_id`当表单提交时，这将传递给第二个请求。

# ember.js - Emberjs - 无法重新定义命名的、显式编译的 Handlebars 模板

> ID：15604980
> 
> 赞同：0
> 
> 时间：2013-03-24T22:43:54.540
> 
> 标签：ember.js, handlebars.js

作为将相当大/复杂的现有应用程序移植到 Ember 世界的尝试的一部分，我正在使用以下技术动态生成和编译命名的 Handlebars 模板，并将视图与它们相关联：

```
var template = Ember.Handlebars.compile("some handlebars stuff");
Ember.TEMPLATES["myTemplate"] = template;

var view = Ember.View.create({
  templateName: "myTemplate"
}); 
```

我想做的一件事是能够重新编译新的/不同的 Handlebars 模板标记，它会覆盖名为“myTemplate”的模板，并让该名称的视图可以访问它。

尝试这样做时，我得到了意想不到的结果-一些说明问题的小提琴：

[First fiddle](http://jsfiddle.net/fxJw5/13/) - 显示如果在命名模板内容更改后渲染视图之前等待会发生什么。

[第二小提琴](http://jsfiddle.net/XTXCV/1/)- 显示如果在命名模板内容更改后渲染视图之前没有延迟会发生什么。

引擎盖下显然有一些我不理解的魔法。任何人都可以对此有所了解吗？

**更新：**

我浏览了 Ember.View 和容器模块的源代码，并意识到我可以通过以跳过容器缓存查找的方式覆盖“模板”计算属性来解决第一小提琴中的问题。我在这里放了另一个[小提琴](http://jsfiddle.net/xxp4e/10/)来演示我找到的解决方案。

这似乎以我希望的方式工作 - 但是 - 感觉就像我可能正在与框架作斗争并以一种可能会在以后咬我的方式从容器中“脱钩”。有没有更好、更Ember-esque 的方式来完成我想要做的事情？我发现的黑客会破坏东西吗？

**更新 2**

我还发现也可以简单地调用

```
view2.get('container').reset(); 
```

在第一个小提琴中附加 view2 之前。看起来更干净/更安全，但它“合法”吗？我已经更新了[第一小提琴](http://jsfiddle.net/fxJw5/15/)来说明这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:06:58.180

*（在第二个小提琴中，两个视图都显示了第二个模板）*

这是因为`view1.appendTo($("#target"));`只是安排了追加，实际的视图渲染直到运行循环结束才发生。在此之前，您已设置`Ember.TEMPLATES["myTemplate"] = template2;`

*（在第一个小提琴中，两个视图都显示了第一个模板）*

很确定这是因为 ember 容器缓存了模板 fx，但不是 100%。检查...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:55:04.240

我要打电话给这个回答。正如我在第二条评论中提到的，我在我的项目中使用[这个小提琴](http://jsfiddle.net/stephenrs/fxJw5/17/)中显示的解决方案，沿着这些思路：

```
mYiew.get('container').reset(); 
```

这里有一些关于容器不打算用作 API 的讨论：[https://github.com/emberjs/ember.js/commit/5becdc4467573f80a5c5dbb51d97c6b9239714a8](https://github.com/emberjs/ember.js/commit/5becdc4467573f80a5c5dbb51d97c6b9239714a8)，但似乎没有提到使用容器其他用例的视图。

此外，可以直接访问 View 的容器（在“.container”处）——这意味着开发人员并没有“很难”达到他们对应用程序的“.__ 容器 __”所拥有的方式。这可能暗示了他们打算如何使用它。

由于 View 能够随时清除其缓存在我看来并不是不合理或不好的做法，因此我正在使用上述解决方案......至少直到有人让我有更好的想法（或缓存 API）。

# android - Android - 首选项屏幕不显示首选项

> ID：15604981
> 
> 赞同：1
> 
> 时间：2013-03-24T22:44:02.137
> 
> 标签：android, sharedpreferences, preferences

我有一个偏好活动但是，每当我调用它时，偏好都是空的。没有标题或摘要可见。您可以单击首选项，它将突出显示但没有文本。我尝试添加一个 EditTextPreference，在这种情况下，单击时会弹出一个编辑文本，但没有文本。

活动：

```
 public class Preferences extends PreferenceActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preferences);
    }
} 
```

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
    <Preference
        android:title="SomePref"
        android:summary="Somethingsomething"
    />
</PreferenceScreen> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:11:14.690

我想到了。我正在使用 ActionBarSherlock 库，当它应该是**Sherlock** *PreferencesActivity 时，我正在扩展常规 PreferencesActivity

现在一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:27:30.650

始终，在整个应用程序中通过 getApplicationContext() 保存您的偏好，如果您将其用作上下文，它将与活动上下文一起保存并且不能一直检索

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T00:57:57.373

您可以尝试在其中添加它`PreferenceScreen`，看看会发生什么：

```
<PreferenceCategory
    android:title="Preference Category">

    <CheckBoxPreference
        android:defaultValue="True"
        android:key="checkbox_key"
        android:title="CheckBox Title"
        android:summaryOn="Checkbox is ticked"
        android:summaryOff="Checkbox is not ticked" />

</PreferenceCategory> 
```

# regex - Perl 中正则表达式基本规则的混淆

> ID：15604982
> 
> 赞同：3
> 
> 时间：2013-03-24T22:44:03.783
> 
> 标签：regex, perl

我在理解基本规则时遇到了很多麻烦`regex`，希望有人可以用“简单的英语”帮助解释它们。

```
$_ = '1: A silly sentence (495,a) *BUT* one which will be useful. (3)';

print "Enter a regular expression: ";
my $pattern = <STDIN>;
chomp($pattern);

if (/$pattern/) {
    print "The text matches the pattern '$pattern'.\n";
    print "\$1 is '$1'\n" if defined $1;
    print "\$2 is '$2'\n" if defined $2;
    print "\$3 is '$3'\n" if defined $3;
    print "\$4 is '$4'\n" if defined $4;
    print "\$5 is '$5'\n" if defined $5;
} 
```

三个测试输出

```
Enter a regular expression: ([a-z]+)
The text matches the pattern '([a-z]+)'
$1 is 'silly'

Enter a regular expression: (\w+)
The text matches the pattern '(\w+)'
$1 is '1'

Enter a regular expression: ([a-z]+)(.*)([a-z]+)
The text matches the pattern '([a-z]+)(.*)([a-z]+)'
$1 is 'silly'
$2 is " sentence (495,a) *BUT* one which will be usefu'
$3 is 'l' 
```

我的困惑如下

1.  并不`([a-z]+)`意味着“小写字母和一个/多个重复”？如果是这样，“将”不应该也被拾起吗？除非它与 () 有关记忆有关（即“silly”是 5 个字母的单词，所以“will”不会被选中，但“willx”会？？）

2.  不`(\w+)`意味着“任何单词和一个/多个重复”？如果是这样，为什么会选择数字“1”，因为后面没有重复，而是冒号“：”？

3.  是否`([a-z]+)(.*)([a-z]+)`意味着“任何小写并重复”，紧随其后的是“任何东西和0个或更多重复”，紧随其后的是“任何小写并重复”？如果是这样，为什么输出看起来像上面显示的那样？

我试图尽可能多地在网上查找，但仍然无法理解它们。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T22:53:06.857

1.  不，它的意思是“一个或多个不带重音的小写拉丁字母”。

    是的，`"will"`也会匹配，但匹配操作仅返回第一个匹配项，除非您使用`/g`.

    ```
    print "$1\n" while /([a-z]+)/g;  # //g in scalar context
       or
    print "$_\n" for /([a-z]+)/g;    # //g in list context 
    ```

    有关如何使用的详细信息，`m/PATTERN/`请参阅[perlop](http://perldoc.perl.org/perlop.html)`/g`。

2.  不，它的意思是“一个或多个单词字符”，所以它确实可以匹配单个字符。

    或者你很惊讶这`1`是一个字符？在 ASCII 范围内，字符是`A-Z`、和. 在 ASCII 范围之外发现了另外 102,661 个字字符。`a-z``0-9``_`

3.  它的意思是“一个或多个无重音小写拉丁字母，后跟除换行符以外的任意数量的字符，后跟一个或多个无重音小写拉丁字母”。

    如果您要问为什么`.*`匹配这么多，引擎将始终在当前位置尽可能匹配。这被称为贪婪。

    也许您正在寻找`/([a-z]+)([^a-z]+)([a-z]+)/`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T22:53:04.653

1.  我真的不知道你为什么会这样。它查看您的句子并找到第一个小写字母并继续匹配它们，直到找不到。（在你的情况下是一个空格）匹配是“愚蠢的”，它应该是。匹配在该点停止。

2.  `\w`匹配“单词字符”并包含数字，但除了“_”之外不包含标点符号“：”不是单词字符，因此您得到“1”，仅此而已。

3.  这是因为`(.*)`它是“贪婪的”（通常你不应该使用它）。您是在告诉 Perl 匹配任何内容到行尾。然后它会回溯，为您的最后一个检查提供匹配，该检查是您的字符串的最后一个字符。

编辑：正如@ikegami 指出的那样，它`\w`实际上比我想的要匹配得多。

# breeze - 有什么方法可以减少微风.js 的有效负载大小，还是我不应该担心？

> ID：15604986
> 
> 赞同：2
> 
> 时间：2013-03-24T22:44:26.110
> 
> 标签：breeze

将 Breeze.js 用于客户端，将 BreezeController 用于服务器，它生成的有效负载大小对我来说似乎效率低下。例如，当通过以下方式对 3 个属性进行简单的分页投影时：

```
.select("Property1, Property2, Property3") 
```

每条记录的类型如下：

```
"$type":"_IB_eTB9_dNYb7IWzNREO3W5Uer5DOQ8[[System.String, mscorlib],[System.String, mscorlib],[System.String, mscorlib]] 
```

显然，我在投影中包含的属性越多，这将越长，在许多情况下，“定义”类型明显长于实际数据，并且每一行都重复。

我是在担心什么，还是有什么办法可以减少这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T02:43:53.967

为了回答我自己的问题，我想说我不应该担心这个（它可能也适用于更一般的“网络元数据”问题）

假设我们打开 gzip 压缩，我的测试表明所有无关的元数据对最终压缩有效载荷的大小影响很小，我想这并不奇怪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T03:25:19.273

这是一个有趣的问题。当您请求投影（使用 select 语句进行查询）而不是实体时，这确实是一个更大的问题，因为至少对于 .NET 服务器而言，匿名类型的 json 序列化有点难看。查看没有选择的查询的结果，您会发现有效负载更加合理。

也就是说，我们应该可以修改默认的 json.net 格式化程序以简化匿名类型信息的序列化，特别是因为一旦客户端意识到它与任何“已知”不匹配，我们基本上无论如何都会在客户端忽略它类型。如果您对此感兴趣，请将其添加到[Breeze User Voice](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions)中。我们确实关注这些功能请求。

# matlab - Matlab代码中的怪事

> ID：15604987
> 
> 赞同：2
> 
> 时间：2013-03-24T22:44:29.513
> 
> 标签：matlab

我试图编译以下代码。

```
x = 0
while x <= 1
    x = x+0.02
end 
```

我应该得到的 x 的最后一个值等于 1.02（这在 while 循环中产生了错误的条件）

但是，我很想知道我总是得到 x 的最后一个值等于 1 并且 while 循环停止了。我不知道我的代码有什么问题。有人可以帮我找出来吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T22:53:25.950

0.02 不能用浮点二进制数 ( `double`) 精确表示，因此会出现一些舍入错误。结果是你没有达到一个，而是一个比一个略大的数字。

尝试`disp(x-1)`在您的代码之后附加，看看那`x`不完全是 1。

该站点显示了 IEEE754 双精度浮点数如何表示 0.02：http: [//www.binaryconvert.com/result_double.html? decimal=048046048050](http://www.binaryconvert.com/result_double.html?decimal=048046048050)

这里最重要的是它比 0.02 大一点

解决此问题的一种方法是使用整数循环变量。它仍然是 double 类型，但它只有整数值，除非您使用非常大的数字 (>=2^56?)，否则不会出现舍入问题

```
for n=0:100
    x = n/100;
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T22:55:27.783

在运行之前尝试`format long`你会得到这个：

```
x =  0.920000000000000
x =  0.940000000000001 
x =  0.960000000000001 
x =  0.980000000000001
x =  1.000000000000000 
```

注意最后的 1。0.02 不能用浮点运算精确表示。因此，尽管比较它时看起来像`1`，但实际上它更大，因此它出现为假并存在循环。

# google-chrome - postMessage 从本地域到远程域

> ID：15604988
> 
> 赞同：0
> 
> 时间：2013-03-24T22:44:29.683
> 
> 标签：google-chrome, postmessage

使用[tampermonkey](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo?hl=en)，我在页面的 iframe 中运行此 Javascript：

```
document.addEventListener("message", function(e){
  console.log('asd');
}, false); 
```

这样我就可以从父窗口接收消息。我正在使用 jQuery Mobile 并拥有以下 HTML：

```
<div data-role="page" data-url="/scraps/new?for=http://en.wikipedia.org/wiki/List_of_hotels_in_Australia" tabindex="0" class="ui-page ui-body-c ui-page-active" style="min-height: 258px;">
    <p class="notice"></p>

    <p class="alert"></p>
    <iframe id="test" name="scrap" src="http://en.wikipedia.org/wiki/List_of_hotels_in_Australia" width="100%"></iframe>
</div> 
```

但是当我在浏览器控制台中这样做时：

```
var win = document.getElementById("test").contentWindow; // undefined

win
Unsafe JavaScript attempt to access frame with URL http://en.wikipedia.org/wiki/List_of_hotels_in_Australia from frame with URL http://localhost:3001/scraps/new?for=http://en.wikipedia.org/wiki/List_of_hotels_in_Australia. Domains, protocols and ports must match.
Unsafe JavaScript attempt to access frame with URL http://en.wikipedia.org/wiki/List_of_hotels_in_Australia from frame with URL http://localhost:3001/scraps/new?for=http://en.wikipedia.org/wiki/List_of_hotels_in_Australia. Domains, protocols and ports must match.
Unsafe JavaScript attempt to access frame with URL http://en.wikipedia.org/wiki/List_of_hotels_in_Australia from frame with URL http://localhost:3001/scraps/new?for=http://en.wikipedia.org/wiki/List_of_hotels_in_Australia. Domains, protocols and ports must match.
Unsafe JavaScript attempt to access frame with URL http://en.wikipedia.org/wiki/List_of_hotels_in_Australia from frame with URL http://localhost:3001/scraps/new?for=http://en.wikipedia.org/wiki/List_of_hotels_in_Australia. Domains, protocols and ports must match.
Window {}

win.postMessage('aaaa')
Error: SyntaxError: DOM Exception 12 
```

# sql - 如何将用户登录名传递给函数并从 oracle 的数据库中删除该用户

> ID：15604991
> 
> 赞同：0
> 
> 时间：2013-03-24T22:45:06.643
> 
> 标签：sql, oracle, oracle10g, oracle11g

这是代码：

```
 create or replace procedure getuser(User_ID In VARCHAR2)Is    
    Username varchar2(30);
    cursor c1(Userid VARCHAR2)  --Cursor o store the row
    IS SELECT USERNAME FROM ALL_USERS WHERE USERNAME = Userid;
    BEGIN
     Open c1(User_id);
     loop
          FETCH c1 INTO USERNAME;
          EXIT WHEN C1%NOTFOUND;
       END LOOP;
       execute immediate 'drop' || USERNAME; 
       CLOSE c1;
    END;
    / 

    execute system.getuser('STUDENT_0602053'); 
```

当我执行存储过程时，得到的错误是无效的 sql 语句执行 system.getuser('STUDENT_0602053');

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T22:51:49.267

它应该是

```
EXECUTE IMMEDIATE 'drop user '||username; 
```

您可能还想要：

```
EXECUTE IMMEDIATE 'drop user '||username||' cascade'; 
```

或者，如果用户拥有任何对象，则不会被丢弃。

另外，您是否以用户 SYSTEM 身份登录？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T22:49:57.803

只是一个猜测 - 可能还有更多问题......

但是这条线需要一个空间..

```
execute immediate 'drop' || USERNAME; 
```

应该

```
execute immediate 'drop ' || USERNAME; 
```

# javascript - 计算所有正在使用的对象和变量

> ID：15604999
> 
> 赞同：0
> 
> 时间：2013-03-24T22:45:39.720
> 
> 标签：javascript, memory-leaks

是否可以在 javascript 中计算创建的对象和变量？

我正在使用 Google Chrome 来分析我的网络应用程序。但是调试并找到导致“内存泄漏”的对象并不是那么容易（至少对我来说）。所以我想知道在当前页面上创建的所有对象和变量，这样我就可以知道它们是否被删除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T22:47:33.027

不，您不能在 Chrome（或任何其他主要浏览器）中执行此操作。您*可以*使用 Chrome 的“内存”页面 (chrome://memory/)*了解*正在发生的事情，但这并不涉及对象级别，重要的是要了解垃圾收集不会*同步*或立即发生。浏览器/JavaScript 引擎可以很好地分配内存，将其用于一些 JavaScript 对象，然后正确理解这些对象不再使用，但保留内存以备将来使用。

相反，您可以做的是详细研究 JavaScript 的工作原理，它会告诉您（通常）将保存在内存中的内容以及原因。了解[闭包是如何工作](http://blog.niftysnippets.org/2008/02/closures-are-not-complicated.html) *的（披露：这是我贫血的小博客上的一篇文章）*，并了解 IE 如何不能很好地处理 DOM 元素和 JavaScript 对象之间的循环引用（具体来说，当没有任何引用时它不能很好地清理它们）他们不再，否则这通常不是问题）。一般来说，不要太担心它，直到/除非你有一个特定的问题要解决。（这绝对会发生，但并不像人们有时想象的那么多。）