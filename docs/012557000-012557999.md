# StackOverflow 问答 12557000-12557999

# mrjob - mrjob 任务可以输出集合吗？

> ID：12557001
> 
> 赞同：4
> 
> 时间：2012-09-23T23:01:19.300
> 
> 标签：mrjob

我尝试从 mrjob 中的映射器输出 python 集。我相应地更改了组合器和减速器的函数签名。

但是，我收到此错误：

```
Counters From Step 1
Unencodable output:
TypeError: 172804 
```

当我将集合更改为列表时，此错误消失。mrjob 中的映射器是否无法输出某些 python 类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T23:14:15.427

使用协议（通常是 Raw、JSON 或 Pickle）在 MapReduce 的各个阶段之间移动值。

您必须确保您选择的协议可以正确处理正在移动的值。我会想象一组没有默认的 JSON 表示，也许也没有原始表示？

尝试将 INTERNAL_PROTOCOL 设置为 Pickle，如下所示：

```
class yourMR(MRJob):
    INTERNAL_PROTOCOL = PickleProtocol

    def map(self, key, value):
        # mapper

    def reduce(self, key, value):
        # reducer 
```

注意：MRJob 会为你处理酸洗和解酸，所以不用担心这方面。如有必要，您还可以设置 INPUT 和 OUTPUT 协议（对于多个阶段，或设置减速器的输出）。

# string - 绳索数据结构权重是节点中的字符加上左子树或左右子树的权重？

> ID：12557003
> 
> 赞同：0
> 
> 时间：2012-09-23T23:01:23.543
> 
> 标签：string, algorithm, data-structures, ropes

维基百科[条目](http://en.wikipedia.org/wiki/Rope_%28computer_science%29)说：

每个节点的“权重”等于其字符串的长度加上其左子树中所有权重的总和。因此，具有两个孩子的节点将整个字符串分成两部分：左子树存储字符串的第一部分。右子树存储第二部分，其权重是两部分之和。

我有点困惑，它首先说节点权重是其字符串的长度加上其左子树中所有权重的总和。然后它说如果一个节点有两个孩子（因此有一个左子树和一个右子树），那么权重是两个部分的总和，而不仅仅是左子树。看图是有道理的（22 正下方的 9 是 9 并且不是更大，因为 7 的右子树/子树对权重没有贡献）但是措辞对我来说似乎是错误的，还是我误解了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T00:03:54.027

是的，句号掉线了。“权重”是分区点，所以它只包括左子字符串（或包含的字符串，如果你有的话）。

您不需要存储节点的总长度，但修改绳索需要通知所有父节点更改（应该是 O(log n)，所以没关系。）

# iphone - 设置高度后设置单元格子视图位置？

> ID：12557006
> 
> 赞同：0
> 
> 时间：2012-09-23T23:02:01.890
> 
> 标签：iphone, ipad, uitableview, height

在我的应用程序中，我有一个 tableview，带有一个自定义 tableviewcell，其中有一个 UIImageView。

不过，我的问题。在设置单元格高度`- (void)configureCell:(MyCustomCell *)cell atIndexPath:(NSIndexPath *)indexPath`之前调用我设置图像框架的位置。`- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`

意思是，图像位置不正确（其动态，根据单元格高度而变化）。

你建议我如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T23:12:01.027

你什么时候调用你的`configureCell:atIndexPath:`方法？在您的`tableView:cellForRowAtIndexPath:`实施中？

无论如何，请尝试在`tableView:willDisplayCell:`委托方法中设置图像高度。此方法称为将单元格显示在屏幕上，以便以后不会被其他内部方法调整大小。

*此外，您不能使用 AutoresizingMask 属性使您的图像视图根据其容器视图（单元格）自动调整大小吗？*

# php - MySQL 在 CREATE TABLE 上出现恼人的语法错误，数据值为 tinytext、longtext 和 enum

> ID：12557008
> 
> 赞同：0
> 
> 时间：2012-09-23T23:02:55.037
> 
> 标签：php, mysql

我的代码如下：

```
$sql = "
    CREATE TABLE articles (
        articleUID int NOT NULL AUTO_INCREMENT, 
        PRIMARY KEY(articleUID), 
        by tinytext, 
        article longtext, 
        game enum('Starcraft','Starcraft 2','Team Fortress 2','Minecraft','Tekkit','other')
    )
";
if(mysql_query($sql, $con)) {
    echo "The table \"articles\" was created succesfully.<br />";
} else{
    echo "Error creating  table: " . mysql_error() . "<br />";
} 
```

它在 PHP 中，文件中还有其他内容，但这是给我带来问题的部分。

当我尝试运行它时，我得到的是：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'by tinytext, article longtext, game enum(Starcraft,Starcraft 2,Team Fortress 2,' at line 1 
```

我不知道你是否需要我的其余代码来解决这个问题，但如果你需要，我会在编辑中发布它。谁能告诉我这里有什么问题？我已经尝试在枚举参数上使用 \" 代替 ' ，但这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T23:04:29.777

`BY`是[MySQL 的保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，在用作列或表标识符时必须用反引号引起来。

您可以在列定义中声明主键：

```
$sql = "CREATE TABLE articles (
  articleUID int NOT NULL AUTO_INCREMENT PRIMARY KEY,
  /* Quote the reserved word BY */
  `by` tinytext, 
  article longtext, 
  game enum('Starcraft','Starcraft 2','Team Fortress 2','Minecraft','Tekkit','other')
)"; 
```

或者，您可以`PRIMARY KEY`在列定义之后声明

```
$sql = "CREATE TABLE articles (
  articleUID int NOT NULL AUTO_INCREMENT,
  `by` tinytext, 
  article longtext, 
  game enum('Starcraft','Starcraft 2','Team Fortress 2','Minecraft','Tekkit','other'),
  PRIMARY KEY (articleUID)
)"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T23:08:37.077

`by`是mysql中的一个关键字。如果您不想将其用作关键字，请引用它。定义自动增量和主键时也会出错。

```
$sql = "CREATE TABLE articles (
    `articleUID` int NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `by` tinytext, 
    `article longtext,
    `game` enum('Starcraft','Starcraft 2','Team Fortress 2','Minecraft','Tekkit','other')
)"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T23:05:50.093

您已将主键定义放在列定义之间。首先声明所有列，然后声明主键。

# css - 如何简化这个 LESS CSS Box-shadow mixin？（带有“方向”的多个阴影）

> ID：12557010
> 
> 赞同：5
> 
> 时间：2012-09-23T23:03:24.650
> 
> 标签：css, less, less-mixins

如何减少此代码（可能带有循环？），以获得具有方向和数量的“功能”？

*   `@dir`=想要的“方向”
*   `@number`= 我需要多少次阴影（这里是 10 次）
*   `@color`= 阴影的颜色

**示例**（工作，但不是很容易使用）：

```
.perspective-box(@dir, @number, @color) when (@dir = se){
   -webkit-box-shadow:1px 1px 0 0 @color,
                      2px 2px 0 0 @color,
                      3px 3px 0 0 @color,
                      4px 4px 0 0 @color,
                      5px 5px 0 0 @color,
                      6px 6px 0 0 @color,
                      7px 7px 0 0 @color,
                      8px 8px 0 0 @color,
                      9px 9px 0 0 @color,
                      10px 10px 0 0 @color;
} 
```

我有一个`@dir`参数可以改变阴影的方向。在这个例子中，我把`@dir = se`, where `se`= South East. 这对于西北、东北、西南和东南来说是一样的。

## 如何避免这种情况……？

```
.perspective-box(@dir, @number, @color) when (@dir = ne){
   -webkit-box-shadow:10x North East shadow…
}

.perspective-box(@dir, @number, @color) when (@dir = nw){
   -webkit-box-shadow:10x North West shadow…
}

.perspective-box(@dir, @number, @color) when (@dir = sw){
   -webkit-box-shadow:10x South West shadow…
}

.perspective-box(@dir, @number, @color) when (@dir = se){
   -webkit-box-shadow:10x South East shadow…
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-14T10:05:59.510

没问题：

```
.text-shadow-3d(@x, @y, @index) when (@index > 0) {

    // Loop-de-loop.
    .text-shadow-3d(@x, @y, @index - 1);

    // The '+' after 'text-shadow' concatenates with comma.
    text-shadow+: @x*@index @y*@index 0 black;
}

.text-shadow-3d(1px, 1px, 5); 
```

结果：

```
text-shadow: 1px 1px 0 #000000, 2px 2px 0 #000000, 3px 3px 0 #000000, 4px 4px 0 #000000, 5px 5px 0 #000000; 
```

文件：

[http://lesscss.org/features/#loops-feature](http://lesscss.org/features/#loops-feature)

[http://lesscss.org/features/#merge-feature](http://lesscss.org/features/#merge-feature)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-24T12:45:00.503

我几乎肯定这对于 LESS 是不可能的，因为它缺乏这样做的语言结构（我使用 LESS 已经有一段时间了，所以我可能是错的）。另一方面，Sass 可能能够做到这一点，因为它确实有循环和列表之类的东西（尽管查看那里的选项，看起来处理可变数量的阴影可能非常难看）。

# php - MySQL 爆炸值数组用于对结果进行排序

> ID：12557018
> 
> 赞同：0
> 
> 时间：2012-09-23T23:04:25.363
> 
> 标签：php, mysql, database

对于事件的日期，我必须在名为 date_of 的列中存储不同数量的值。它可以有多个日期，例如 10 月 1 日、2 日和 6 日。我需要将它作为三个不同的日期存储在该列中。现在我这样做：

```
1350619200, 1350705600, 1350792000 
```

所以我想要做的是按日期订购mysql结果。第一个日期应该是它被订购的那个日期，但是如果有多个日期，如上所示，如果日期已过，那么它应该转到第二个日期，然后是第三个日期等等。

我不知道如何开始，我的主要优先事项是按数组中的第一个日期对结果进行排序，我的问题的另一部分并不那么重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T23:10:42.183

如果您按始终设置的第一个字段排序，则可以尝试提取该字段：

```
ORDER BY SUBSTRING_INDEX(date_of, ',', 1); 
```

实际上，您可以 order by `date_of`，因为字典顺序得到维护。如果你想按*最后一个*子字段排序，你会遇到麻烦，但既然你想要第一个......

现在“如果日期的第一个元素已经过去”有点棘手。

```
ORDER BY CASE WHEN SUBSTRING_INDEX(date_of, ',', 1) > UNIX_TIMESTAMP()
    THEN SUBSTRING_INDEX(date_of, ',', 1)
    ELSE ... END 
```

可能是一个开始，但是如果*没有*第二个子字段呢？如果我们迭代 SUBSTRING_INDEX，我们会再次获得第一个字段。

您将不得不迭代`CASE`自身。*不寒而栗*

```
ORDER BY CASE WHEN SUBSTRING_INDEX(date_of, ',', 1) > UNIX_TIMESTAMP()
    THEN SUBSTRING_INDEX(date_of, ',', 1)
    ELSE
        CASE WHEN SUBSTRING_INDEX(SUBSTRING_INDEX(date_of, ',', 2),',',-1) > UNIX_TIMESTAMP()
        THEN SUBSTRING_INDEX(SUBSTRING_INDEX(date_of, ',', 2),',',-1)
        ELSE
            CASE WHEN SUBSTRING_INDEX(SUBSTRING_INDEX(date_of, ',', 3),',',-1) > UNIX_TIMESTAMP()
            THEN SUBSTRING_INDEX(SUBSTRING_INDEX(date_of, ',', 3),',',-1)
            ELSE 999999999
            END
        END
    END 
```

我可以看到这种结构没有出色的表现。我**强烈**建议将三个日期放在三个不同的列中，或者重新设计模型以将日期放在单独的表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T23:12:48.873

如果将其存储为字符串 ( `VARCHAR`)，则只需`ORDER BY`对查询执行 a 即可。MySQL 将对字符串进行字典排序。如果您正在存储 unix 时间戳（您似乎是），那么这将工作到 2286 年 11 月 20 日下午 5:46:40 UTC。

它之所以有效，是因为所有时间戳都可能具有相同的长度，即 10 位数字。您只需要确保列表的格式保持一致。我会去`<number>,<number,...`没有空间。

# c++ - 这是否符合尾递归的条件？

> ID：12557023
> 
> 赞同：2
> 
> 时间：2012-09-23T23:04:31.010
> 
> 标签：c++, tail-recursion

> **可能重复：**
> [C++ 中的尾递归](https://stackoverflow.com/questions/2693683/tail-recursion-in-c)

我是 C++ 中尾递归的新手。我的项目要求我使所有函数尾递归。我已经测试了以下代码，它可以正常工作。但是，我不确定我的做法是否符合尾递归的要求。

```
static int sum_helper(list_t hList, int accumulator){
    if (list_isEmpty(hList))
        return accumulator;
    else {
        accumulator += list_first(hList);
        hList = list_rest(hList);
        return sum_helper(hList, accumulator); 
    }
}

int sum(list_t list){
/* 
 // EFFECTS: returns the sum of each element in list
 //          zero if the list is empty.
 */
    if (list_isEmpty(list))
        return 0;
    return sum_helper(list, 0);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T23:14:16.070

如果 list_t 没有重要的析构函数，它就是尾递归。如果它确实有一个非平凡的析构函数，则析构函数需要在递归调用返回之后和函数本身返回之前运行。

* * *

奖金：

```
int sum(list_t hList, int accumulator = 0) {
return list_isEmpty(hList)
    ? 0
    : sum(list_rest(hList), accumulator + list_first(hList));
} 
```

但口味各不相同；有些人可能更喜欢你的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T23:09:25.560

简而言之，在递归调用 ( `sum_helper`) 之后你什么也不做。这意味着您永远不需要返回给调用者，因此，您可以丢弃调用者的堆栈帧。

以正态阶乘函数为例

```
int fact(int x)
{
    if(x == 0)
        return 1;
    else
        return x * fact(x-1);
} 
```

这不是尾递归，因为`fact(x-1)`需要返回 的值，然后乘以 6。相反，我们可以稍微作弊，也可以通过一个累加器。看到这个：

```
int fact(int x, int acc)
{
     if(x == 0)
         return acc;      // Technically, acc * 1, but that's the identity anyway.
     else
         return fact(x-1, acc*x);
} 
```

在这里，控制流中的最后一个函数调用是`fact(x-1, acc*x)`. 之后，我们不需要将被调用函数的任何返回值用于其他任何事情，因此我们*不需要*返回到当前帧。出于这个原因，我们可以丢弃堆栈帧并应用其他优化。

免责声明：我可能错误地应用了阶乘算法，但你明白了。希望。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T23:26:32.700

从理论上讲，是的，它是尾递归（前提是 hList 没有非平凡的析构函数）。但从实践的角度来看，这取决于您的编译器及其设置。让我们看一下为这个简单代码生成的程序集：

```
#include <cstdlib>

struct list{
   int head;
   list * tail;
};

int sum_helper(list * l, int accumulator){
    if (l == NULL)
        return accumulator;
    else {
        accumulator += l->head;
        return sum_helper(l->tail, accumulator); 
    }
} 
```

优化：（g++ -O2 ...，省略了无聊的部分）：

```
 testq   %rdi, %rdi
    movl    %esi, %eax
    je  .L2
    ...
.L6:
    ...
    jne .L6                  <-- loop
.L2:
    rep
    ret 
```

这显然是一个循环。但是当你禁用优化时，你会得到：

```
_Z10sum_helperP4listi:
.LFB6:
    ...
    jne .L2
    movl    -12(%rbp), %eax
    jmp .L3
.L2:
    ...
    call    _Z10sum_helperP4listi     <-- recursion
.L3:
    leave
    .cfi_def_cfa 7, 8
    ret 
```

这是递归的。

# javascript - 如何获取javascript对象中的属性值？

> ID：12557024
> 
> 赞同：0
> 
> 时间：2012-09-23T23:04:34.767
> 
> 标签：javascript, google-chrome, angularjs, google-chrome-devtools, javascript-objects

我有一个具有`status`属性的对象。但我无法得到这个属性的价值。这是我的代码示例：

```
console.log("Resource.query()");
console.log(Resource.query());
console.log("Resource.query().status");
console.log(Resource.query().status); 
```

这是 Chrome 控制台： ![在此处输入图像描述](../Images/73d16ef51d8e994e9772160105cce6f2.png)

如您所见，在`Resource.query().status`返回对象`undefined`时返回。`Resource.query()`我的问题是如何获得价值`status`？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T23:42:19.733

`query()`[如教程](http://docs.angularjs.org/tutorial/step_11)中所述异步运行（强调添加）：

```
$scope.phones = Phone.query(); 
```

> > 这是我们要查询所有电话的简单语句。在上面的代码中需要注意的重要一点是，我们在调用电话服务的方法时不传递任何回调函数。*虽然看起来好像结果是同步返回的，但事实并非如此。*同步返回的是一个“未来”——一个对象，当 XHR 响应返回时，它将被数据填充。由于 Angular 中的数据绑定，我们可以使用这个未来并将其绑定到我们的模板。然后，当数据到达时，视图会自动更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T04:41:24.747

试试这个： `Resource.query()[0].status`

# java - 无法在 BroadcastReceiver 中实例化接收器

> ID：12557027
> 
> 赞同：1
> 
> 时间：2012-09-23T23:04:57.730
> 
> 标签：java, android, sms, broadcastreceiver, instantiationexception

这是我第一次尝试制作 Android 应用程序。它是一个简单的 SMS 侦听器，然后将 SMS 显示为 Toast。

```
public class SmsReciever extends BroadcastReceiver {

String msgBody = null;
@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    if(intent.getAction().equals("android.provider.Telephony.SMS_RECIEVED")){
        Bundle bundle = intent.getExtras();
        SmsMessage[] msg = null;
        String msg_from;
        if(bundle != null)
        {
            try{
                Object[] pdus = (Object[]) bundle.get("pdus");
            msg = new SmsMessage[pdus.length];
            for(int i=0;i<msg.length;i++)
            {
                msg[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
                msg_from = msg[i].getOriginatingAddress();
                msgBody += msg[i].getMessageBody();
            }
            }catch(Exception e)
            {
                Log.d("Exception caught",e.getMessage());
            }
            Toast.makeText(context, msgBody, Toast.LENGTH_SHORT).show();
        }

    }
}} 
```

我收到以下错误：

```
java.lang.RuntimeException: Unable to instantiate receiver com.example.droid.SmsReceiver: java.lang.ClassNotFoundException: com.example.droid.SmsReceiver 
```

我向你保证 SmsReciever.java 在 droid/src 中。我花了整夜研究这个问题。请帮忙。

编辑：这是您要求的清单 xml 文件。

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.RECEIVE_SMS"/>
<uses-permission android:name="android.permission.READ_SMS" /> 

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" android:permission="android.permission.RECEIVE_SMS">
    <activity
        android:name=".JarvisActivity"
        android:label="@string/title_activity_jarvis" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".SecureMessagesActivity" android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <receiver android:name=".SmsReceiver" android:exported="false" >
        <intent-filter android:priority="1000">
        <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
</receiver>
</application>
</manifest> 
```

编辑：我做了一些研究，发现在我的清单文件中我有一个指向**SecureMessagesActivity**的活动标签。但是在我的整个项目中，我没有那个名字的活动。那么这是问题所在吗？

编辑：好的，所以我从清单文件中删除了 SecureMessageActivity 部分，我猜它删除了错误。现在我收到了这个 Permisssion 拒绝消息：

```
Permission Denial: receiving Intent { act=android.provider.Telephony.SMS_RECEIVED  flg=0x10 (has extras) } to net.learn2develop.SMSMessaging requires android.permission.RECEIVE_SMS due to sender com.android.phone (uid 1001) 
```

我还使用**net.learn2develop.SMSMessaging**活动试图复制另一个代码以达到相同的目的，但现在我已经删除了整个项目并多次清理了我自己的项目。这种活动仍然一次又一次地到来。 **编辑** 查克，我很快就会重新开始......感谢所有输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T02:17:04.917

您的 Adnroid 清单中有您的接收器吗？如果是，请同时提供 AndroidManifest.xml。您可能还想检查这些相关问题：[Android - SMS Broadcast receiver](https://stackoverflow.com/questions/4117701/android-sms-broadcast-receiver)、[Android SMS receiver not working](https://stackoverflow.com/questions/1944102/android-sms-receiver-not-working)、[BroadcastReceiver + SMS_RECEIVED](https://stackoverflow.com/questions/1973071/broadcastreceiver-sms-received)。

**编辑**：

尝试添加`android:exported="true"`到您的`BroadcastReceiver`. 这个接收器对我有用：

```
<receiver android:name=".SmsBroadcastReceiver"
          android:enabled="true"
          android:exported="true">
    <intent-filter>
        <action android:name="android.provider.Telephony.SMS_RECEIVED" />
    </intent-filter>
</receiver> 
```

您现在`android:exported="false"`基本上告诉 Android 您`BroadcastReceiver`无法从应用程序外部的源接收消息。有关此标签的更多信息：http: [//developer.android.com/guide/topics/manifest/receiver-element.html](http://developer.android.com/guide/topics/manifest/receiver-element.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:52:02.140

尝试在清单中更改您的接收器：

```
<receiver android:name="com.example.droid.SmsReceiver" >
            <intent-filter>
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            </intent-filter>
</receiver> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-13T14:24:01.063

我有一个可以帮助你的想法：让我们试试这个代码：

```
<receiver android:name="com.example.droid.SmsReceiver" 
        android:exported="true" 
        android:enabled="true">
        <intent-filter android:priority="2147483647">
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            <action android:name="android.provider.Telephony.GSM_SMS_RECEIVED" />
            <action android:name="android.provider.Telephony.SMS_RECEIVED2" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
        <intent-filter android:priority="2147483647">
            <action android:name="android.intent.action.DATA_SMS_RECEIVED" />
            <data android:scheme="sms" />
            <data android:host="localhost" />
        </intent-filter>
</receiver> 
```

不同类型的设备可以使用自己的非标准动作名称。

# oauth - 谷歌浏览器“无法加载 oauth2/oauth2_inject.js”

> ID：12557030
> 
> 赞同：0
> 
> 时间：2012-09-23T23:05:15.583
> 
> 标签：oauth, google-chrome-extension

我刚刚阅读了有关 google 的 OAuth2 的信息。首先，我尝试下载此处提供的示例： [https ://github.com/borismus/oauth2-extensions/tree/master/samples](https://github.com/borismus/oauth2-extensions/tree/master/samples)

但是当试图将它们加载到 chrome 浏览器时，会出现一条错误消息，说

无法加载扩展程序，因为它**“无法为内容脚本加载 javascript oauth2/oauth2_inject.js”。**

我在网上搜索并没有发现这个问题需要提及。我应该怎么做才能解决这个问题？

提前感谢您的帮助，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:55:56.767

示例不包含 OAuth2 库。[从https://github.com/borismus/oauth2-extensions](https://github.com/borismus/oauth2-extensions)下载“lib”文件夹并将其放在适当的扩展文件夹中。

# ruby-on-rails - 如何在不提示输入密码的情况下部署 Capistrano？

> ID：12557034
> 
> 赞同：3
> 
> 时间：2012-09-23T23:05:44.680
> 
> 标签：ruby-on-rails, ruby, deployment, capistrano

当我`cap deploy`在流程结束时的某个时间点运行时，我会收到密码提示...

```
 ** keeping 5 of 6 deployed releases
  * executing "sudo -p 'sudo password: ' rm -rf /opt/deployed_rails_apps/myapp/releases/20120922200242"
    servers: ["myhost.com"]
    [username@myhost.com] executing command
Password: 
```

有没有办法在不提示我输入密码的情况下完成它？

这是我的`deploy.rb`...

```
require "bundler/capistrano"

require "rvm/capistrano"

set :rvm_ruby_string, 'ruby-1.9.3-p194@run_passenger'

set :rvm_type, :user

set :application, 'myapp'

set :repository, 'git@github.com:fakename/myrepository.git'

set :deploy_to, "/opt/deployed_rails_apps/#{application}"

set :scm, "git"
set :branch, "master"

set :deploy_via, :remote_cache

set :keep_releases, 5
after "deploy:update", "deploy:cleanup"

load 'deploy/assets'

role :app, 'username@myhost.com'
role :web, 'username@myhost.com'

namespace :deploy do

  task :start, :roles => :app do
    run "touch #{current_release}/tmp/restart.txt"
  end

  task :stop, :roles => :app do
    # Do nothing.
  end

  desc "Restart Application"
  task :restart, :roles => :app do
    run "touch #{current_release}/tmp/restart.txt"
  end

end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T23:50:57.910

假设您的部署用户具有适当的权限并且您不需要使用`sudo`，您可以设置`:use_sudo`为 false 并且 Capistrano 不会使用它。

只需添加

```
set :use_sudo, false 
```

到你的`deploy.rb`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T23:14:38.820

在要部署到的机器上设置 SSH 公钥。这不是 Capistrano 的事情。 [这是一个指南](http://www.ece.uci.edu/~chou/ssh-key.html)。您可以通过快速搜索找到许多其他内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T01:08:18.640

如果您确实需要 root 权限才能删除 /opt/deployed_rails_apps/myapp/releases/ 下的文件，那么您可以编辑 /etc/sudoers 文件以允许您的部署用户在没有密码的情况下使用 sudo。

但是我怀疑@matt using 的答案`set :use_sudo, false`应该可以解决您的问题。

# c# - [PartCreationPolicy(CreationPolicy.Shared)] 是什么

> ID：12557039
> 
> 赞同：10
> 
> 时间：2012-09-23T23:06:19.167
> 
> 标签：c#, mef

[PartCreationPolicy(CreationPolicy.Shared)] 是什么意思？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-24T11:11:22.850

这意味着，当请求用 装饰的类的实例时`[PartCreationPolicy(CreationPolicy.Shared)]`，[`CompositionContainer`](http://msdn.microsoft.com/en-us/library/system.componentmodel.composition.hosting.compositioncontainer.aspx)将始终返回该类的相同实例而不创建新实例。

```
[Export]
[PartCreationPolicy(CreationPolicy.Shared)]
class Foo
{

} 
```

上面的类将给出以下结果：

```
private void Test()
{
  var foo1 = Container.GetExportedValue<Foo>();
  var foo2 = Container.GetExportedValue<Foo>();
  Console.WriteLine(foo1 == foo2); // => True
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-28T19:35:35.100

为了补充朱利安的回答，我认为从概念上讲，您可以将其视为[Singleton](http://en.wikipedia.org/wiki/Singleton_pattern)。

# java - 基于另一个下拉列表的动态下拉值

> ID：12557042
> 
> 赞同：-6
> 
> 时间：2012-09-23T23:06:30.077
> 
> 标签：java, javascript, jquery, jsp, servlets

我的数据库中有两个表。一个是部门，另一个是经理。我在 JSP 中创建了一个下拉列表，它显示了数据库中的部门列表。我想根据所选部门在另一个下拉列表中显示经理列表。如何做到这一点？

在这里，我指的是级联下拉菜单。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T23:25:35.260

您没有提供任何 HTML 或您自己尝试过的任何脚本，因此下面应该作为您开始使用的一个很好的模板。

### [演示](http://jsfiddle.net/FranWahl/wLMCZ/)- 级联下拉菜单，显示选定部门的经理

假设以下 HTML

```
<div>
    <div style="float: left;">
        Select Department
        <br />
        <select id="departments"></select>
    </div>
    <div style="float: left; margin-left: 10px;">
        Select Manager
        <br />
        <select id="managers"></select>
    </div>
</div> 
```

​ 当您从数据库中加载部门和经理后，您可以使用类似于以下的代码动态填充选择：

```
var $departments = $("#departments");
var $managers = $("#managers");

// This data would be loaded from the DB
var departments = [
    {id: "1", value: "Department 1"},
    {id: "2", value: "Department 2"}
];

// This data would be loaded from the DB
var managers = [
    { departmentId: "1", value: "Dep 1 Manager 1"},
    { departmentId: "1", value: "Dep 1 Manager 2"},
    { departmentId: "1", value: "Dep 1 Manager 3"},
    { departmentId: "1", value: "Dep 1 Manager 4"},
    { departmentId: "1", value: "Dep 1 Manager 5"},
    { departmentId: "1", value: "Dep 1 Manager 6"},
    { departmentId: "1", value: "Dep 1 Manager 7"},
    { departmentId: "1", value: "Dep 1 Manager 8"},
    { departmentId: "1", value: "Dep 1 Manager 9"},
    { departmentId: "1", value: "Dep 1 Manager 10"},
    { departmentId: "2", value: "Dep 2 Manager 1"},
    { departmentId: "2", value: "Dep 2 Manager 2"},
    { departmentId: "2", value: "Dep 2 Manager 3"},
    { departmentId: "2", value: "Dep 2 Manager 4"},
    { departmentId: "2", value: "Dep 2 Manager 5"},
    { departmentId: "2", value: "Dep 2 Manager 6"},
    { departmentId: "2", value: "Dep 2 Manager 7"},
    { departmentId: "2", value: "Dep 2 Manager 8"},
    { departmentId: "2", value: "Dep 2 Manager 9"},
    { departmentId: "2", value: "Dep 2 Manager 10"}
];

function getManagers() {
    $managers.empty();

    var departmentId = $departments.val();

    for (i = 0; i < managers.length; i++) {
        if (managers[i].departmentId === departmentId) {
            $managers.append("<option value='" + managers[i].departmentId + "'>" + managers[i].value + "</option>");
        }
    }
}

for (i = 0; i < departments.length; i++) {
    $departments.append("<option value='" + departments[i].id + "'>" + departments[i].value + "</option>");
}

getManagers();

$departments.on("change", function(){
    getManagers();
}); 
```

因为我没有数据库，所以我对部门和经理的来源进行了硬编码。

# parallel-processing - 锁定 MCS 算法

> ID：12557046
> 
> 赞同：1
> 
> 时间：2012-09-23T23:07:32.533
> 
> 标签：parallel-processing, synchronization, linux-kernel, spinlock, smp

我想在 C++ 中为我的一个应用程序实现排队锁定。我正在研究以下论文中的算法： [http ://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCUQFjAA&url=http%3A%2F%2Fwww .cs.rice.edu%2F~johnmc%2Fpapers%2Ftocs91.pdf&ei=HpRfUKCZFsfWrQfpgIGACQ&usg=AFQjCNF_QamPWhJrq5dSjJjFjO7W3WzJ5Q&sig2=3TU1vo_aAYbM2fmLxeiZ0A](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCUQFjAA&url=http%3A%2F%2Fwww.cs.rice.edu%2F~johnmc%2Fpapers%2Ftocs91.pdf&ei=HpRfUKCZFsfWrQfpgIGACQ&usg=AFQjCNF_QamPWhJrq5dSjJjFjO7W3WzJ5Q&sig2=3TU1vo_aAYbM2fmLxeiZ0A)

```
type qnode = record
next : ^qnode
locked : Boolean

type lock = ^qnode

// parameter I, below, points to a qnode record allocated
// (in an enclosing scope) in shared memory locally-accessible
// to the invoking processor

procedure acquire_lock (L : ^lock, I : ^qnode)
  I->next := nil
  predecessor : ^qnode := fetch_and_store (L, I)
  if predecessor != nil  // queue was non-empty
    I->locked := true
    predecessor->next := I ---A
    repeat while I->locked   // spin ---C

procedure release_lock (L : ^lock, I: ^qnode)
 if I->next = nil  // no known successor
   if compare_and_swap (L, I, nil)  // compare_and_swap returns true iff it swapped
     return

   repeat while I->next = nil // spin --B
 I->next->locked := false ---D 
```

A & B 正在访问同一个变量（前任->下一个 & I->下一个）以及 C & D（锁定变量），但它们在访问之前没有被锁定。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T16:06:07.230

确实，这些并发访问可以竞争，但该算法旨在容忍这种情况。

在 B 处旋转实际上是为了防止与 A 比赛。在 D 处，我们需要`I->next`非零。`I->next`（此处称为`predecessor->next`）由 A 设置为非零。正如您所注意到的，这可能会竞争，因此 B 处有一个旋转循环以等待另一个线程设置`I->next`为有效的值。

让我们看看C&D。`repeat while I->locked`线是锁的实际“旋转”部分；如果一个线程试图获取锁必须等待另一个线程释放它，它会在这个循环中旋转。如果释放锁的线程在获取线程到达之前设置`I->next->locked`为，则循环将永远不会开始。`false``repeat while I->locked`

# ios - 在 iOS 6 中将委托设置为 nil

> ID：12557048
> 
> 赞同：1
> 
> 时间：2012-09-23T23:08:21.620
> 
> 标签：ios, ios6

在 iOS 6 之前，我们应该

```
- (void)viewDidUnload {
   self.someDelegate = nil;
   [super viewDidUnload];
} 
```

现在 viewDidUnload 已被弃用，我们在哪里将委托设置为 nil？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T23:25:28.620

在 iOS6 中收到内存警告时不再卸载视图。所以在这种情况下视图永远不会被卸载，`viewDidUnload`也不会在 iOS6 中被调用。

如果你真的想模仿旧的行为（在收到内存警告时卸载视图）你现在必须在`didReceiveMemoryWarning`你的视图控制器的方法中实现这个行为，在测试`self.view.window`属性为 nil 之后（意味着视图不再在屏幕上） ，因此将被“卸载”，这意味着您处于与旧`viewDidUnload`案例相同的情况）。

```
-(void)didReceiveMemoryWarning
{
    if (self.isViewLoaded && !self.view.window)
    {
        // If view already loaded but not displayed on screen at this time (not attached to any window) then unload it
        self.view = nil;

        // Then do here what you used to do in viewDidUnload
        self.someDelegate = nil;
        ...
    }
    [super didReceiveMemoryWarning];
} 
```

但请注意，如果您使用 ARC 和`nil`iOS5 +，您通常不需要再将委托设置`weak`为`nil`to 不再存在（从而避免悬空指针）。

[编辑] 正如@Martin R 在评论中所解释的那样，在 iOS6 中收到内存警告时不再卸载视图，因此您不必管理这种收到内存警告的情况并考虑在那里释放您的委托这个用例在 iOS6 中不会再出现了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T23:16:10.177

好吧，我自己没有想出这个，但是如果应该对您有所帮助：“在 iOS 6 中，UIViewController 的 viewWillUnload 和 viewDidUnload 方法现在已弃用。如果您使用这些方法释放数据，请改用 didReceiveMemoryWarning 方法。您如果视图控制器的视图没有被使用，也可以使用此方法释放对视图控制器的视图的引用。在执行此操作之前，您需要测试视图是否不在窗口中。

[http://www.bgr.com/2012/06/11/ios-6-beta-download-link-iphone-ipad-ipod-touch-release/](http://www.bgr.com/2012/06/11/ios-6-beta-download-link-iphone-ipad-ipod-touch-release/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T00:26:13.567

> 在 iOS 6 之前，我们应该
> 
> *   (void)viewDidUnload { self.someDelegate = nil; [超级 viewDidUnload]; }

你从哪里听到的？

你甚至知道`viewDidUnload`iOS 6 之前的用途是什么吗？

`viewDidUnload`仅在内存不足的情况下调用，这会导致视图被卸载。在正常操作期间永远不会使用它。如果您依赖它被调用来做其他事情，那是错误的。

另外，你为什么还需要将`self`'s delegate 设置为 nil 呢？“取消委托”是指将其他对象的委托（指向`self`）设置为何`nil`时`self`被释放。Setting的委托没有意义（如果不再使用`self`，你为什么要关心设置东西？）。`self``self`

# java - 逐列写入 CSV 文件

> ID：12557052
> 
> 赞同：5
> 
> 时间：2012-09-23T23:09:13.740
> 
> 标签：java, csv

我正在为此寻找答案，但没有找到。有没有人有这种问题的解决方案。我有一组文本变量，我必须使用 Java 将它们写入 .CSV 文件。我目前正在使用 JavaScript 做一个需要 Java 的项目。这是我现在拥有的一个功能，它可以很好地完成工作并将文本逐行写入.CSV。

```
function writeFile(filename, data)
{
   try
   { 

      //write the data

      out = new java.io.BufferedWriter(new java.io.FileWriter(filename, true));
      out.newLine();
      out.write(data);
      out.close();
      out=null;
   }
   catch(e)   //catch and report any errors
   {
      alert(""+e);
   }
} 
```

但是现在我必须像下面的示例一样逐个编写部分文本。

```
first0,second0,third0
first1,second1,third1
first2,second2,third2
.
.
.
first9,second9,third9 
```

所以算法是这样的。该函数用逗号写入first0，然后转到下一行写入first1，转到下一行写入first2，如此一来直到first9。完成该部分后，脚本转到文件开头并在逗号后面写入 second0，转到下一行并在逗号后面写入 second1，依此类推。你明白了。

所以现在我需要java

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T00:20:26.860

您可能要考虑使用[Super CSV](http://supercsv.sourceforge.net)来编写 CSV 文件。除了处理嵌入的双引号和逗号转义之外，它还提供了一系列从数组/列表、映射甚至 POJO 写入的[编写实现，这意味着您可以轻松地尝试您的想法。](http://supercsv.sourceforge.net/writers.html)

如果您想让它变得非常简单，您可以将 CSV 文件组装成一个二维数组。这允许先将其组装成列，然后在准备好时将整个内容写入 CSV。

```
package example;

import java.io.FileWriter;
import java.io.IOException;

import org.supercsv.io.CsvListWriter;
import org.supercsv.io.ICsvListWriter;
import org.supercsv.prefs.CsvPreference;

public class ColumnFirst {

    public static void main(String[] args) {

        // you can assemble this 2D array however you want
        final String[][] csvMatrix = new String[3][3];
        csvMatrix[0][0] = "first0";
        csvMatrix[0][1] = "second0";
        csvMatrix[0][2] = "third0";
        csvMatrix[1][0] = "first1";
        csvMatrix[1][1] = "second1";
        csvMatrix[1][2] = "third1";
        csvMatrix[2][0] = "first2";
        csvMatrix[2][1] = "second2";
        csvMatrix[2][2] = "third2";

        writeCsv(csvMatrix);

    }

    private static void writeCsv(String[][] csvMatrix) {

        ICsvListWriter csvWriter = null;
        try {
            csvWriter = new CsvListWriter(new FileWriter("out.csv"), 
                CsvPreference.STANDARD_PREFERENCE);

            for (int i = 0; i < csvMatrix.length; i++) {
                csvWriter.write(csvMatrix[i]);
            }

        } catch (IOException e) {
            e.printStackTrace(); // TODO handle exception properly
        } finally {
            try {
                csvWriter.close();
            } catch (IOException e) {
            }
        }

    }

} 
```

输出：

```
first0,second0,third0
first1,second1,third1
first2,second2,third2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T02:57:27.777

这是我对问题的解决方案。由于低级随机访问文件机制，您**不需要将整个数据保存在缓冲区中。**您仍然需要一一加载您的记录：

```
package file.csv;

import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.io.RandomAccessFile;
import java.nio.channels.FileChannel;
import java.util.Arrays;
import java.util.List;

public class CsvColumnWriter {

    public static void main(String args[]) throws Exception{

        CsvColumnWriter csvWriter = new CsvColumnWriter(new File("d:\\csv.txt"), new File("d:\\csv.work.txt"), 3);

        csvWriter.writeNextCol(Arrays.asList(new String[]{"first0", "first1", "first2"}));
        csvWriter.writeNextCol(Arrays.asList(new String[]{"second0", "second1", "second2"}));
        csvWriter.writeNextCol(Arrays.asList(new String[]{"third0", "third1", "third2"}));

    }

    public void writeNextCol(List<String> colOfValues) throws IOException{
        // we are going to create a new target file so we have to first 
        // create a duplicated version
        copyFile(targetFile, workFile);

        this.targetStream = new BufferedOutputStream(new FileOutputStream(targetFile));

        int lineNo = 0;

        for(String nextColValue: colOfValues){

            String nextChunk = nextColValue + ",";

            // before we add the next chunk to the current line, 
            // we must retrieve the line from the duplicated file based on its the ofset and length 
            int lineOfset = findLineOfset(lineNo);  

            workRndAccFile.seek(lineOfset);

            int bytesToRead = lineInBytes[lineNo];
            byte[] curLineBytes = new byte[bytesToRead];
            workRndAccFile.read(curLineBytes);

            // now, we write the previous version of the line fetched from the
            // duplicated file plus the new chunk plus a 'new line' character
            targetStream.write(curLineBytes);
            targetStream.write(nextChunk.getBytes());
            targetStream.write("\n".getBytes());

            // update the length of the line
            lineInBytes[lineNo] += nextChunk.getBytes().length; 

            lineNo++;
        }

        // Though I have not done it myself but obviously some code should be added here to care for the cases where 
        // less column values have been provided in this method than the total number of lines

        targetStream.flush();
        workFile.delete();

        firstColWritten = true;
    }

    // finds the byte ofset of the given line in the duplicated file
    private int findLineOfset(int lineNo) {  
        int ofset = 0;
        for(int i = 0; i < lineNo; i++)
            ofset += lineInBytes[lineNo] + 
                (firstColWritten? 1:0); // 1 byte is added for '\n' if at least one column has been written
        return ofset;
    }

    // helper method for file copy operation
    public static void copyFile( File from, File to ) throws IOException {
            FileChannel in = new FileInputStream( from ).getChannel();
            FileChannel out = new FileOutputStream( to ).getChannel();
            out.transferFrom( in, 0, in.size() );
    }

    public CsvColumnWriter(File targetFile, File workFile, int lines) throws Exception{
        this.targetFile = targetFile;
        this.workFile = workFile;

        workFile.createNewFile();

        this.workRndAccFile = new RandomAccessFile(workFile, "rw");

        lineInBytes = new int[lines];
        for(int i = 0; i < lines; i++)
            lineInBytes[i] = 0;

        firstColWritten = false;
    }

    private File targetFile;
    private File workFile;

    private int[] lineInBytes;
    private OutputStream targetStream;
    private RandomAccessFile workRndAccFile;
    private boolean firstColWritten;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T23:14:02.743

我只是继续前进，并假设您有一些自由来完成这项任务。据我所知，您不能将文本“插入”到文件中。您只能通过完全读取文件，在内存中更改它，然后将结果写回文件来做到这一点。

所以如果你在内存中反转你的数据结构然后写它会更好。如果您的数据对象是一个矩阵，只需将其转置，使其符合您要编写的格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T23:31:53.473

这个怎么样

```
 Scanner input = new Scanner(System.in);
        String[] lines = new String[9];

        for (int j = 0; j < 2; j++) {
            for (int i = 0; i < 9; i++) {
                lines[i] += (String) input.nextLine() + ",";
            }
        }
        for (int i = 0; i < 9; i++) {
            lines[i] += (String) input.nextLine();
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T00:03:51.300

基于您在发生错误时不丢失任何数据的要求，也许您应该重新考虑设计并使用嵌入式数据库（[嵌入式 java 数据库](https://stackoverflow.com/questions/57102/embedded-java-databases)中讨论了各种嵌入式数据库的优点）。您只需要数据库中的一个表。

我建议这样做，因为在您最初的问题中，听起来您正在尝试使用像数据库这样的 CSV 文件，您可以在其中以任何顺序更新任何行的列。在那种情况下，为什么不硬着头皮使用真正的数据库。

无论如何，一旦您填写了表格的所有列和行，将数据库以“文本文件顺序”row1-col1、row1-col2 ... row2-col1 等导出到 CSV 文件。

如果在构建数据库或导出 CSV 文件的过程中发生错误，至少您仍将拥有上次运行的所有数据，并且可以重试。

# unix - 在文件中搜索多个模式不一定在同一行

> ID：12557055
> 
> 赞同：0
> 
> 时间：2012-09-23T23:09:32.730
> 
> 标签：unix, command

我需要一个可以搜索多个模式（基本上是 AND）的 unix 命令，但是这些模式不必在同一行上（否则我可以使用`grep`AND 命令）。例如，假设我有一个如下文件：

```
This is first line.
This is second line.
This is last line. 
```

如果我搜索单词“first”和“last”，则上述文件应包含在结果中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T23:14:04.220

试试这个问题，似乎和你的一样，有很多解决方案：[How to find patterns across multiple lines using grep?](https://stackoverflow.com/questions/2686147/how-to-find-patterns-across-multiple-lines-using-grep)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T23:16:20.960

我认为而不是 AND 你实际上是指 OR：

```
grep 'first\|last' file.txt 
```

结果：

```
This is first line.
This is last line. 
```

如果您有大量模式，请将它们添加到文件中；例如，如果`patterns.txt`包含：

```
first
last 
```

跑：

```
grep -f patterns.txt file.txt 
```

# javascript - 谷歌地图、地理编码等

> ID：12557061
> 
> 赞同：3
> 
> 时间：2012-09-23T23:11:07.347
> 
> 标签：javascript, jquery, google-maps

首先，项目是用启用了 jQuery 的 PHP 编写的。

情况描述可能是这样的：用户可以定义他的地址。当用户想要添加某物的位置时（无论如何），用户可以选择天气使用他定义的地址或选择新的地址。如果他选择新的，他可以将其输入为文本。

因为我必须使用谷歌地图，所以很难让它工作。我想首先显示他定义的地址，然后选择（定义/新）地址（**完成，效果很好**）。如果用户留下定义的地址，那么**没有问题**，谷歌地图保持加载状态。如果用户添加了其他地址，我想缩小地图（**完成，效果很好**），在他输入完新地址后，谷歌地图会显示这个新输入的地址（**什么都没有显示**）。

请检查我下面的代码，这样上面的文字会更有意义......

如果你能帮忙，请这样做:)

这是我的 HTML 部分：

```
<span><input type="checkbox" name="other_address" value="1"> I want to change address</span>
<input type="text" name="input_location" value="Bismarckallee 3, Freiburg" id="input_location" placeholder="Adress (Street, City)">
<input type="hidden" name="input_coordinates" value="47.997337,7.841653">
<div id="map_canvas" class="user_location_map" style="width: 100%; height: 300px;"></div> 
```

这是我的 Javascript 部分（因为它的 73 行，我使用了 pastebin，这里没有粘贴）：

[http://pastebin.com/VyAHe90j](http://pastebin.com/VyAHe90j)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T04:39:15.997

试试这个——当你输入一个新地址时，你缺少一个监听器来更新地图：

[http://pastebin.com/yraxkDmP](http://pastebin.com/yraxkDmP)

# web - 获取我上传到 DNN 网站的文件的链接

> ID：12557062
> 
> 赞同：2
> 
> 时间：2012-09-23T23:11:11.190
> 
> 标签：web, dotnetnuke

**如何获取已上传到我网站的文件的链接？**

我已通过转到*管理员 - 文件管理器*将文件上传到我的网站，然后我将文件上传到此目的地 *Portal Root\Pages\Customisation* 然后如何获得指向我刚刚上传的文件的链接？

该文件是*myFile.PDF*所以我尝试了这个路径，但它没有将文件发回给我：

```
 http://mywebsite.com.au/Pages/Customisation/myFile.pdf 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T00:57:30.983

“门户根”通常位于目录“Portals/0”中，因此完整的 URL 将是`http://mywebsite.com.au/Portals/0/Pages/Customisation/myFile.pdf`. 如果 DNN 安装中有多个站点/门户，则需要查找 ID，而不是假设它为 0。

主目录也有可能完全定制为其他目录名称。但是您可以在*页面管理*部分的*站点设置的**高级设置*选项卡上验证目录。

# ios - 使用 iOS 6 链接到 App Store 应用开发者页面？

> ID：12557066
> 
> 赞同：8
> 
> 时间：2012-09-23T23:11:30.390
> 
> 标签：ios, app-store, ios6, itunes-app

在 iOS 6 中，有没有办法从应用程序链接到 App Store 应用程序上的特定开发者页面？我的意思是一个列表，显示开发人员的所有应用程序。

有多种方法可以链接到商店（我在这里使用 Appmosys 作为示例）会产生各种结果：

[http://itunes.apple.com/us/artist/appmosys/id331687329](http://itunes.apple.com/us/artist/appmosys/id331687329) - 从桌面 iTunes 复制的链接，在 iOS 6 设备上打开 iTunes 应用程序，带有开发者页面。如果您点击他们的一个应用程序，它会转到 App Store 应用程序上的该应用程序。

[http://itunes.com/apps/appmosys](http://itunes.com/apps/appmosys) - 打开 iTunes 应用程序（通过 Safari）但显示此错误消息：“无法连接到 iTunes 商店”。

itms://itunes.com/apps/appmosys - 直接进入 iTunes 应用程序，但与上述相同的错误。

itms-apps://itunes.com/apps/appmosys - 打开 App Store 应用程序，但也出现相同的错误（此处的屏幕截图：[https](https://dl.dropbox.com/u/6920023/iphone-screenshot.PNG) ://dl.dropbox.com/u/6920023/iphone-screenshot.PNG ） .

实际上有没有办法在 iOS 6 中做到这一点？

**如果您能回答问题并知道您提供的链接是否也适用于联属网络营销计划[http://www.apple.com/itunes/affiliates/ ，则](http://www.apple.com/itunes/affiliates/)**可获得奖励积分**。我已经查看了此页面上的 Link Maker，[http://www.apple.com/itunes/link/](http://www.apple.com/itunes/link/)，但只能生成标准的 iTunes 链接。**

 ****B 部分 / 更多积分**

您可以直接链接到 App Store 应用程序中的评论选项卡，但您现在也可以直接链接到新的相关选项卡吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T10:46:25.680

我有适用于**iOS 5**的解决方案：itms-apps://itunes.com/apps/appmosys/id331687329

一个适用于**iOS 6**：itms-apps://itunes.apple.com/artist/appmosys/id331687329

如果您使用 itms-apps:// URLs 而不是 http:// 它将在设备上打开应用商店应用程序，这对用户来说不太容易混淆，然后通过 safari。

不幸的是，我没有找到适用于 iOS 5 和 iOS 6 的任何单个 URL。因此[Apple Q&A 文档](http://developer.apple.com/library/ios/#qa/qa1633/_index.html)不再适用于 iOS 6 :-(

**更新：**我刚刚意识到我的 iOS 5 解决方案也适用于 iPad 上的 iOS 6，但不适用于带有 iOS 6 的 iPhone。它变得越来越奇怪......

**更新 2：**

苹果刚刚[公布](https://developer.apple.com/news/?id=212013a)了**appstore.com 网址，所以现在您可以使用**[http://appstore.com/ElectronicArts](http://appstore.com/ElectronicArts)链接到 Electronic Arts 开发者页面

我刚刚对其进行了测试，它适用于 iOS 5.1 到 6.0 的 iPad 和 4.3 到 6.0 的 iPhone

所以现在[Apple Q&A 文档](http://developer.apple.com/library/ios/#qa/qa1633/_index.html)是有效的！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T17:26:34.710

我有一个通用应用程序，我需要打开我的开发者页面，并根据用户使用的是 iPhone、iPod 还是 iPad 来显示正确的应用程序。我可以让它正常工作的唯一方法是使用 iTunes 链接制造商[http://itunes.apple.com/linkmaker/](http://itunes.apple.com/linkmaker/)结果，但将**https:**替换为**itms-apps：**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T00:35:18.897

[http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewArtist?id=426623392](http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewArtist?id=426623392)之类的链接 也适用于任何 iOS 设备和 Internet 中的任何浏览器。

客户不会感到困惑，因为它是 Apple 和使用它的开发人员的标准链接。

只改变你的身份证。因此，它将是[http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewArtist?id=XXXXXXXX](http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewArtist?id=XXXXXXXX)，其中 XXXXXXXX 是您的开发人员 ID。

您也可以在桌面上的 iTunes 应用程序中找到此链接，方法是从您的任何应用程序页面上的按钮“YYYYYY 的更多应用程序”复制链接。YYYYYYY 是您的开发者名称。喜欢这个页面[https://itunes.apple.com/be/app/visual-html-editor-eye-lite/id472624198?mt=8](https://itunes.apple.com/be/app/visual-html-editor-eye-lite/id472624198?mt=8)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-19T09:50:22.383

如果您希望在您的应用程序中拥有一个定制的“美国更多应用程序”页面（不退出到 AppStore 或 Safari），请查看我在此处创建的内容（有可下载的工作项目）：

[http://xcodenoobies.blogspot.com/2014/06/how-to-create-dynamic-more-apps-page.html](http://xcodenoobies.blogspot.com/2014/06/how-to-create-dynamic-more-apps-page.html)

这样做的美妙之处在于，每次您在应用程序中打开页面时，都会从 iTunes AppStore 检索数据，并且您可以根据自己的喜好对其进行自定义。

干杯。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T23:56:50.723

[http://itunes.apple.com/artist/id331687329](http://itunes.apple.com/artist/id331687329)。

我通过在 Mac 上使用 iTunes 来访问此链接。搜索公司名称，点击该公司制作的任何应用程序，查找“XXXXXX的更多iPhone应用程序”，单击它，然后您会看到该公司的所有应用程序，右键单击公司名称并复制链接，你会得到这个链接。此链接适用于 iOS 6。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-11T11:22:47.743

我对使用[http://itunes.apple.com/linkmaker/创建的链接没有任何问题](http://itunes.apple.com/linkmaker/)

它只生成 https 链接。**

# python - “ImportError: cannot import name ...” - 在“import from”时引发，但不是在直接导入时引发

> ID：12557070
> 
> 赞同：2
> 
> 时间：2012-09-23T23:11:51.450
> 
> 标签：python, import, python-3.x, importerror

Python 3 解释器引发此异常的确切规则是什么？

有很多关于这个的问题，有很好的答案，但我找不到一个对发生这种异常的情况给出清晰、一般和逻辑上精确的定义。

文档似乎也不清楚。它说：

> 例外`ImportError`
> 
> > 当 import 语句找不到模块定义或`from ... import`找不到要导入的名称时引发。

但这似乎与以下示例不一致。

我的意思是要求一个一般定义而不是一个具体案例，但为了澄清我的担忧，这里有一个例子：

```
# code/t.py:
from code import d

# code/d.py
from code import t 
```

`t.py`从命令行运行模块会导致`ImportError: cannot import name d`.

另一方面，以下代码不会引发异常：

```
# code/t.py:
import code.d

# code/d.py
import code.t 
```

任何时候，`__init__.py`都是空的。

在这个例子中， import 语句中提到的唯一模块或名称是`t`and `d`，它们都被清楚地找到了。如果文档暗示未找到模块中的某些名称*，*那`d`肯定不明显；最重要的是，我希望它会引发`NameError: name ... is not defined`异常而不是`ImportError`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T23:14:36.807

如果`abc`是一个包并且`xyz`是一个模块，如果`abc`'s`__init__.py`定义了一个`__all__`不包含的`xyz`，那么你将无法做`from abc import xyz`，但你仍然可以做`import abc.xyz`。

编辑：简短的回答是：你的问题是你的进口是循环的。模块 t 和 d 尝试相互导入。这行不通。不要这样做。我将在下面解释整个事情，但解释很长。

要了解它为什么给出 ImportError，请尝试遵循代码执行。如果您查看完整的回溯，而不仅仅是最后一部分，您可以看到它在做什么。通过您的设置，我得到了这样的回溯（我将包称为“testpack”而不是“code”）：

```
Traceback (most recent call last):
  File "t.py", line 1, in <module>
    from testpack import d
  File "C:\Documents and Settings\BrenBarn\My Documents\Python\testpack\d.py", line 1, in <module>
    from testpack import t
  File "C:\Documents and Settings\BrenBarn\My Documents\Python\testpack\t.py", line 1, in <module>
    from testpack import d
ImportError: cannot import name d 
```

你可以在这里看到 Python 正在做什么。

1.  在加载`t.py`时，它首先看到的是`from testpack import d`.
2.  此时，Python 执行`d.py`文件以加载该模块。
3.  但它发现的第一件事是`from testpack import t`。
4.  它已经加载了`t.py`一次，但是作为主脚本的 t 与作为模块的 t 不同，因此它会尝试`t.py`再次加载。
5.  它首先看到的是`from testpack import d`，这意味着它应该尝试加载`d.py`。. . 但它已经在步骤 2*中*尝试重新加载`d.py`。由于尝试导入`d`导致再次尝试导入`d`，Python 意识到它无法导入`d`并抛出 ImportError。

第 4 步在这里有点异常，因为您直接在包中运行了一个文件，这不是通常的处理方式。请参阅[此问题](https://stackoverflow.com/questions/72852/how-to-do-relative-imports-in-python)以了解为什么导入模块与直接运行模块不同。如果您尝试*导入* `t`（使用`from testpack import t`），Python 会提前一步实现循环，并且您会获得更简单的回溯：

```
>>> from testpack import t
Traceback (most recent call last):
  File "<pyshell#1>", line 1, in <module>
    from testpack import t
  File "C:\Documents and Settings\BrenBarn\My Documents\Python\testpack\t.py", line 1, in <module>
    from testpack import d
  File "C:\Documents and Settings\BrenBarn\My Documents\Python\testpack\d.py", line 1, in <module>
    from testpack import t
ImportError: cannot import name t 
```

请注意，这里的错误是它无法导入*t*。它知道它不能，因为当我告诉它导入 t 时，它发现自己再次循环返回导入 t。在您的原始示例中，它没有注意到它运行了 t.py 两次，因为第一次是主脚本，第二次是导入，所以它又走了一步并尝试再次导入 d。

现在，为什么当你这样做时不会发生这种情况`import code.d`？答案只是因为您实际上并没有尝试*使用*导入的模块。在这种情况下，它发生如下（我将像您那样进行解释，`from code import t`而不是将其作为脚本运行）：

1.  它开始导入 t。当它这样做时，它暂时将模块标记`code.t`为已导入，即使它还没有完成导入。
2.  它发现它必须做`import code.d`，所以它运行 d。
3.  在 d 中，它找到了`import code.t`，但由于`code.t`已经标记为已导入，它不会尝试再次导入它。
4.  由于 d 没有实际使用就完成了`t`，它可以返回并完成加载`t`。没问题。

关键区别在于名称`t`和`d`在这里不能直接相互访问；它们由 package 调解`code`，因此 Python 实际上不必在实际使用之前完成“确定 t 是什么”。使用`from code import t`，由于必须将值分配给变量`t`，Python 必须立即知道它是什么。

您可以看到问题，但如果您`d.py`看起来像这样：

```
import code.t
print code.t 
```

现在，在第 2 步之后，在运行 d 时，它实际上尝试访问半导入的模块 t。这将引发 AttributeError ，因为该模块尚未完全导入，因此尚未附加到 package `code`。

请注意，只要在完成运行`code.t`后才使用 就可以了。`d`这将在以下情况下正常工作`d.py`：

```
import code.t
def f():
    print code.t 
```

你可以`f`稍后再打电话，它会工作的。原因是它执行完后才需要使用`code.t`，`d`而d执行完后，它可以返回并完成t执行。

重申一下，这个故事的主要寓意是**不要使用循环导入**。它会导致各种头痛。相反，将公共代码分解到两个模块导入的第三个模块中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T00:17:47.320

```
from abc import xyz 
```

相当于做

```
xyz = __import__('abc').xyz 
```

因为如果你只是`import abc`,`abc.xyz`没有单独的导入就不会存在（除非`abc/__init__.py`包含显式`import`for `xyz`），所以你看到的是预期的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T07:10:13.827

问题是`abc`一个预定义的标准库模块，只是创建一个同名的子目录`__init__.py`并没有改变这个事实。通过将文件所在的文件夹重命名为不同的名称，将您的包的名称更改为其他名称`__init__.py`，即`def`，然后这两种形式的`import`执行都应该没有错误。

# c++ - 复制静态联合成员的地址会给出不正确的地址

> ID：12557071
> 
> 赞同：9
> 
> 时间：2012-09-23T23:11:57.847
> 
> 标签：c++, memory, pointers

我无法在可以显示的较小程序中复制此问题，因此我将用屏幕截图说明问题。

我有一个声明联合和联合的静态成员的类：

```
class 
{ 
/* rest of the class */

    union EmptyString
    {
      char8   m_Empty8[1];
      uchar8  m_EmptyU8[1];
      char32  m_Empty32[1];
    };

    static const EmptyString sm_emptyString;
};

  // Definition
  template <typename T>
  const typename StringBase<T>::EmptyString 
    StringBase<T>::sm_emptyString = { 0 }; 
```

然后我有一个返回字符串地址的函数。出于调试目的，我添加了变量`address`，以便可以将其添加到监视窗口。这是函数（`T`这里是typedef 的`char8`位置）：`char8``char`

```
 template <typename T>
  const char8* StringBase<T>::GetEmptyString( char8 )
  {
    const char8* address = sm_emptyString.m_Empty8;
    //const char8* address = &(sm_emptyString.m_Empty8[0]);
    return address;
    //return sm_emptyString.m_Empty8;
  } 
```

如您所见，最初我有一个 return 语句，我将其注释掉以便调试代码段。被注释掉的另一行是获取数组的第一个（也是唯一一个）元素的地址；这条被注释掉的行与它之前的行做同样的事情，即：`const char8* address = sm_emptyString.m_Empty8;`.

程序崩溃是因为我没有通过上述函数获得正确的地址，这让我很困惑。下面我将开始我的调试会话的屏幕截图：

![在获得地址之前休息](../Images/26516bf25e5aa7ecb8bd20348311b0bb.png)

上面，你可以看到我在地址被复制到指针之前就中断了。`sm_emptyString`下面是这个休息时间的观察窗口值`address`。

![在此处输入图像描述](../Images/14c5c88fed2df0008a5e6f98dca176fd.png)

到目前为止，没有什么特别的。下面是跳过一行代码后的屏幕截图。

![在此处输入图像描述](../Images/b97fe3f06afa776ae245a1d3159663e6.png)

以及相应的观察窗口：

![在此处输入图像描述](../Images/b246e7cc3cb8f0f95e4789099091be15.png)

如您所见，复制到的值`address`是错误的。另一件需要注意的是，这个函数被调用了几次，静态变量地址的副本`address`是正确的。当地址不正确并由函数返回时，我的程序会崩溃（因为稍后在程序中对地址进行了假设）。

这里发生了什么？我是否在某处覆盖了内存？我该如何调试呢？

编辑：

反汇编（根据调试器，`sm_emptyString`is的地址`129F184`，与反汇编显示的不同 is `128F134`）：

```
template <typename T>
  const char8* StringBase<T>::GetEmptyString( char8 )
  {
0119B850  push        ebp  
0119B851  mov         ebp,esp 
0119B853  push        ecx  
0119B854  mov         dword ptr [ebp-4],0CCCCCCCCh 
    const char8* address = sm_emptyString.m_Empty8;
0119B85B  mov         dword ptr [address],offset StringBase<char>::sm_emptyString (128F134h) 
    //const char8* address = &(sm_emptyString.m_Empty8[0]);
    return address;
0119B862  mov         eax,dword ptr [address] 
    //return sm_emptyString.m_Empty8;
  } 
```

**我正在使用什么：** Windows 7、VC++ 2008、调试版本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T00:51:50.440

使用函数？您需要的空字符串与`StringBase<T>`它的状态和模板参数无关。

```
inline const char8* GetEmptyString( char8 )     
{
    static const char8 address[1] = {0};
    return address;
} 
```

**编辑：**为什么我建议像你的代码那样使用联合是错误的。C99 标准说的一些事情：

*   6.2.5p20，union 有一组重叠的成员对象
*   6.7.2.1p14，任何时候最多可以将一个成员的值存储在一个联合对象中
*   附件 J.1 未指定存储到的最后一个以外的联合成员的值。

C++ 也是如此，只是现在手头没有标准。所以你不能使用联合来同时在同一个地方存储 3 个字符串。虽然我不确定究竟是什么导致了问题，但很可能完全在其他地方，你应该摆脱这些有问题的结构。

# android - 单击菜单项后显示另一个 Activity

> ID：12557073
> 
> 赞同：1
> 
> 时间：2012-09-23T23:12:23.073
> 
> 标签：android, menu, android-activity

我正在编写我的第一个 Android 应用程序。我有三个活动：BaseballCardList、BaseballCardDetails 和 FilterBaseballCards。BaseballCardList 作为主 Activity 加载。它有一个菜单，其中包含两个选项来显示其他两个活动之一。BaseballCardDetails 加载得很好。但是，当我尝试加载 FilterBaseballCards 时，我收到“不幸的是，Android 版 BBCT 已停止”。错误信息。我在 Android 模拟器中运行我的应用程序。这是相关的代码：

资源/布局/card_list.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/card_list"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
/> 
```

资源/布局/filter_cards.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:orientation="vertical"
>
    <TextView android:text="@string/filter_by_label" />
    <RadioGroup android:id="@+id/filter_by">
        <RadioButton android:id="@+id/year"
                     android:text="@string/year_radio_button"
        />
        <RadioButton android:id="@+id/number"
                     android:text="@string/number_radio_button"
        />
        <RadioButton android:id="@+id/year_and_number"
                     android:text="@string/year_and_number_radio_button"
        />
        <RadioButton android:id="@+id/player_name"
                     android:text="@string/player_name_radio_button"
        />
    </RadioGroup>
    <Button android:id="@+id/ok"
            android:text="@string/ok_button"
    />
    <Button android:id="@+id/cancel"
            android:text="@string/cancel_button"
    />
</LinearLayout> 
```

棒球卡列表.java：

```
package bbct.android;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;

public class BaseballCardList extends Activity {

    private static final String DEBUG_TAG = "BaseballCardList";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.card_list);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        new MenuInflater(this).inflate(R.menu.option, menu);

        return super.onCreateOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.add:
                Log.d(DEBUG_TAG, "Starting BaseballCardDetails");

                this.startActivity(new Intent(this, BaseballCardDetails.class));
                return true;

            case R.id.filter:
                Log.d(DEBUG_TAG, "Starting FilterBaseballCards");

                this.startActivity(new Intent(this, FilterBaseballCards.class));
                return true;
        }

        return super.onOptionsItemSelected(item);
    }
} 
```

FilterBaseballCards.java:

```
package bbct.android;

import android.app.Activity;
import android.os.Bundle;

public class FilterBaseballCards extends Activity{
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.filter_cards);
    }
} 
```

AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="bbct.android"
      android:versionCode="1"
      android:versionName="1.0">
    <application android:label="@string/app_name" android:icon="@drawable/ic_launcher">
        <activity android:name=".BaseballCardList"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".BaseballCardDetails" />
        <activity android:name=".FilterBaseballCards" />
    </application>
</manifest> 
```

BaseballCardDetails.java 与 FilterBaseballCards.java 几乎相同，所以我不会发布它。

为什么我会收到此错误消息？更重要的是，我如何自己去追踪问题？我使用的是 Android 命令行工具，而不是 Eclipse。我开始添加一些日志消息，但我不知道如何查看可能有助于我追踪问题根源的日志输出。

**更新：**

我将`setContentView()`FilterBaseballCards 中`setContentView(R.layout.card_details);`的更改为，并且`card_details`视图加载得很好。这将问题缩小到我的`filter_cards.xml`文件。

**另一个更新：**

我简化`filter_cards.xml`为：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:orientation="vertical"
>
    <TextView android:text="@string/filter_by_label" />
</LinearLayout> 
```

并继续得到与以前相同的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T23:24:06.143

采用

```
adb logcat 
```

从命令提示符查看日志记录

可能您还没有为新活动添加清单文件的条目，有关从另一个开始一个活动的更多信息请看这里：

[http://developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T23:55:59.173

好的，我认为您的观点大部分是正确的。除了我不喜欢这条线

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content" //Here wrap_content? Shouldn't it be fill_parent?
              android:orientation="vertical"               
> 
```

除此之外，您的资源可能会混乱（没有访问正确的资源/名称是错误的）@string/name 或 @+id/name

编辑：

我还注意到您没有为`TextView`可能应该这样做的人分配 ID；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T23:22:52.697

听起来您忘记将开始的活动添加到清单中。

更多关于意图过滤器：http: [//developer.android.com/guide/components/intents-filters.html](http://developer.android.com/guide/components/intents-filters.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T00:39:45.860

正如@Nate 所指出的，我证实，问题出在我的 FilterBaseballCards 活动的视图中。特别是，我将`filter_cards.xml`布局修改为

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:orientation="vertical"
>
    <TextView     
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/filter_by_label" 
    />
</LinearLayout> 
```

请注意，我在标签中添加了`android:layout_width`和`android:layout_height`属性。`TextView`完成此操作后，应用程序在 Android 模拟器中编译并正确运行。

# java - 使用另一个 ArrayList 中的字符串命名一个 ArrayList

> ID：12557075
> 
> 赞同：1
> 
> 时间：2012-09-23T23:12:42.077
> 
> 标签：java, arraylist

我想创建一个方法来创建 ArrayList，并在现有 ArrayList 中的一个元素之后命名每个。
就像，`ArrayList`original is `(abc, def, ghi, jkl)` and I want the method to create 4 个 ArrayLists，分别命名为 abc、def、ghi 和 jkl。

如何将这些字符串（abc、def）拉出来并用它们来命名新的 ArrayLists？

我试过了：

```
ArrayList original.get(0) = new ArrayList(); 
```

但 Eclipse 说`misplaced construct`

我试过了：

```
String newName = original.get(count);  
ArrayList (newName) = new ArrayList(); 
```

但它说`the left hand side of of an assignment must be a variable`

如果我将 newName 从括号中取出：

```
 String newName = original.get(count);
    ArrayList newName = new ArrayList(); 
```

它说`duplicate local variable newName`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T23:17:03.653

在 Java 中，您不能根据另一个变量的值来命名一个变量。编译器必须在编译时知道所有变量的名称。然而，方法的返回值`original.get(0)`和变量的值只有在运行时才知道。

话虽如此，您可以使用`Map<String, List<String>>`该类来执行您尝试对动态变量名执行的操作。您只需将您`ArrayList`的 s 添加到“名称”`Map`上的索引中。`String`

# mysql - mysql截断错误

> ID：12557076
> 
> 赞同：0
> 
> 时间：2012-09-23T23:12:43.310
> 
> 标签：mysql, syntax-error, truncate

```
Create procedure a06_generate_data( p_loop_count int, 
                                    p_min int, 
                                    p_max int, 
                                    p_status char(1)) 
begin

declare v_max int;
declare v_min int;
declare v_loop_count int;

set v_max := p_max;
set v_min := p_min;
set v_loop_count := p_loop_count

-- clear the results table for each run
truncate table p_testbed.a06_rndData;
Repeat
   insert into p_testbed.a06_rndData (col_value)
        values (floor(v_min + rand()*(v_max – v_min)));
    set v_loop_count := v_loop_count – 1;
until v_loop_count <= 0 End Repeat;

select col_value p_testbed.a06_rndData ;

end; # 
```

此过程是插入从 p_min 到 p_max 的随机值，总共有 p_loop_count 个值。但问题是，截断有一个错误：

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that
corresponds to your MySQL server version for the right syntax to use near 'truncate table         p_testbed.a06_rndData;
    Repeat
       insert into p_testbed.a0' 
```

我已经在网上搜索以检查截断的语法，但我认为我写得正确。

建议？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T23:16:02.400

问题不在于`TRUNCATE TABLE`，前面的行缺少分号：

```
set v_loop_count := p_loop_count 
```

# python - 将相同的字符串重复添加到列表中以使其成为元组

> ID：12557078
> 
> 赞同：2
> 
> 时间：2012-09-23T23:12:45.600
> 
> 标签：python, zip

我正在尝试将一个字符串与一系列数字组合为一个列表的元组。

例如，从以下开始：

```
a = [12,23,45,67,89]  
string = "John" 
```

我想把它变成：

```
tuples = [(12,'John'),(23,'John'),(45,'John'),(67,'John'),(89,'John')] 
```

我试过了：

```
string2 = string * len(a)
tuples = zip(a, string2) 
```

但这又回来了：

```
tuples = [(12,'J'), (23,'o'), ...] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T23:17:06.740

如果您想使用`zip()`，请在相乘之前为您的字符串变量创建一个列表：

```
string2 = [string] * len(a)
tuples = zip(a,string2) 
```

`string * len(a)`创建*一个长字符串*，`zip()`然后对其进行迭代以提取单个字符。相反，通过将列表相乘，您将获得一个包含对该值的`len(a)`单独引用的列表`string`；迭代然后给你`string`每次。

你也可以用重复[`itertools.repeat()`](https://docs.python.org/3/library/itertools.html#itertools.repeat)给你：`string`

```
from itertools import repeat

tuples = zip(a, repeat(string)) 
```

这避免了创建一个可能非常大的新列表对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T23:14:50.507

```
>>> a = [12,23,45,67,89]
>>> string = "John"
>>> my_tuple = [(i,string) for i in a]
>>> print my_tuple 
```

您可以遍历字符串中的每个位置，从而`zip`导致您之前看到的行为。

# java - 正则表达式中的元字符

> ID：12557081
> 
> 赞同：1
> 
> 时间：2012-09-23T23:13:00.383
> 
> 标签：java, regex, string, parsing, text

全部

如果我想从 .txt 文件中读取一个字符并将搜索边界（仅一个字符。空格）设置为读取“数字 2 到 9 或除 e 之外的小写字符”，以下两个正则表达式之一是正确的方法？

```
I. "[/w[2-9][a-z&&[^e]]]" 
```

相对

```
II. "[[2-9][a-z&&[^e]]]" 
```

我倾向于第二个，但我在 java.util.regex.Pattern 描述中找不到任何内容，该描述显示了如何同时搜索同一位置的数字和字符。任何帮助都会很棒。谢谢！^^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T23:16:55.940

你会写：

```
[2-9a-df-z] 
```

如果你真的想`a-z`用明确的“not `e`”来写，你可以写：

```
(?!e)[2-9a-z] 
```

但我认为这对于这个目的来说太过分了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T23:16:56.167

试试`[2-9a-df-z]`。这将匹配一个数字 from `2`to`9`和除 之外的所有小写字符`e`，即 from `a`to`d`和 from `f`to `z`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T03:29:52.323

您的第二个正则表达式是正确的，但您不需要所有这些括号。这将做：

```
"[2-9a-z&&[^e]]" 
```

这将比@ruakh 的建议高效得多`(?!e)[2-9a-z]`，后者必须在每个位置执行两次测试。这正是 Java 开发人员试图用交集运算符解决的问题`&&`。Unicode 联盟已经认可了这个想法，以及其他[集合操作](http://www.unicode.org/reports/tr18/#Subtraction_and_Intersection)。

我不知道您使用第一个正则表达式尝试什么，但是`/`and`w`都将被视为文字字符，使其等效于`[2-9a-df-z/]`，这听起来不像您想要的。

* * *

**编辑：**不要误会我的意思，效率并不是喜欢这种方法的唯一原因。它甚至不是最重要的。[过早的优化](http://c2.com/cgi/wiki?PrematureOptimization)在正则表达式中和其他任何地方一样邪恶。专注于使您的正则表达式尽可能简单和清晰，您不必担心性能。我的正则表达式比前瞻版本更简单（因为它只执行*一种*操作）和更清晰（更易读）（但不是很多；这种`&&`语法对我来说仍然看起来很可怕）。

# jailbreak - 我需要在 Xcode 上安装什么来开发 Apple Tv 应用程序？

> ID：12557088
> 
> 赞同：1
> 
> 时间：2012-09-23T23:14:33.220
> 
> 标签：jailbreak, cydia, apple-tv

我目前正在寻找一个插件，它安装所需的框架来为越狱的 Apple Tv 编写应用程序，但我找不到它。如果有人知道任何事情，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:16:09.170

去这里[http://www.iosopendev.com](http://www.iosopendev.com)

它将东西安装到 Xcode 中，从而更容易为越狱设备进行开发。你可以从 Apple TV 开始

# sql - 函数超出 SQL 的 1024 列限制

> ID：12557097
> 
> 赞同：0
> 
> 时间：2012-09-23T23:15:44.740
> 
> 标签：sql, sql-server-2008, tsql, reporting-services

参数：`@Year int, @Month int`

环境：SQL Server 2008 R2、Visual Studio

开发统计报告，根据所选月份和年份查找每种代码类型（约 50 多种类型）的 6 个月平均值。

因此，例如，如果选择 2012 年 2 月，则查询将在 2012 年 1 月、12 月/11 月/10 月/9 月/8 月 2011 年 12 月/11 月/10 月/9 月/8 月每次出现代码类型时计算，然后将该总和除以 6 以获得过去 6 个月的平均值。实际平均值是在 Visual Studio 的数据集中计算的。

SQL 代码如下所示：

```
CASE WHEN TypeCode = "xyz" and [Year] = (@Year - 1) and [Month] in (12, 11, 10, 
9, 8, 7) then 1 else 0 end as TypeXYZ_Jan_Avg,

CASE WHEN TypeCode = "xyz" and (([Year] = (@Year ) and [Month] = 1) OR 
([Year] = @Year and [Month] in (12, 11, 10, 9, 8)) 
then 1 else 0 end as TypeXYZ_Feb_Avg,

CASE WHEN TypeCode = "xyz" and ([Year] = @Year and [Month] in (11, 10, 9, 8, 7, 
6)) then 1 else 0 end as TypeXYZ_Dec_Avg 
```

这是针对每 50 多种代码类型完成的。

我需要保留此函数中的其他字段（此处未提及）。无论如何，最终查询超出了允许的最大列数。

我试图通过将代码类型作为参数来最小化字段数量。

像这样的东西：

```
CASE WHEN TypeCode = @CodeType and ([Year] = @Year and [Month] in (11, 10, 9, 
8, 7, 6)) then 1 else 0 end as Type_Dec_Avg 
```

但是，当我在函数中声明`@CodeType`参数时，这不起作用（因为我在 VS 中遇到多值错误）：

```
 SELECT * FROM CodeTypes(@CodeType, @Year, @Month) 
```

值已传递，但计算已关闭：

```
 SELECT * FROM CodeTypes(@Year, @Month) WHERE CodeType in (@CodeType) 
```

有什么建议么？也许做一个临时表？我不太熟悉如何做到这一点，但我计划现在做一些研究。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T23:35:10.287

构建一个只产生四列的查询：月、年、代码和值。我想你最终会发现这个查询更简单，而且 Visual Studio 也更容易处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T01:51:19.023

方式模糊，但让我试一试

```
 select c1.codeType, sum(c2.sales)/6
   from code c1 
   join code c2
   on c2.codeType = c1.codeType 
   and DateDiff(mm, c1.date, c2.date) <= 6 
   group by c1.codeType 
```

# sql-server-2012 - SQL Server 2012 奇怪的性能

> ID：12557101
> 
> 赞同：1
> 
> 时间：2012-09-23T23:16:17.433
> 
> 标签：sql-server-2012, sqlperformance

是否是这样的查询的规范：

```
update A set TextField = 'U' 
```

需要 2 分钟在有 2M 记录的表上执行？该表没有 PK，没有索引，但我也没有使用`where`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T23:55:58.647

2 分钟内更新了 200 万条记录，大约每秒更新 16k 次，IMO 相当不错。

大多数 DBMS 不会在他们将写入操作提交到缓存时返回，而是等到操作系统确认写入操作确实已执行。该功能对于确保数据完整性非常重要，您会同意我的观点，这是数据库服务器的关键品质。相反，`select`语句通常可以从缓存中提供。

顺便说一句，您可能会发现Bruce Momjian 的[这个演示文稿](http://momjian.us/main/writings/pgsql/hw_selection.pdf)很有趣，它很好地解释了当您选择数据库服务器时要考虑的问题。它以 PostgreSQL 为中心，但他解释的内容适用于所有类型的数据库服务器。

编辑：另一个有趣的信息来源是[Microsoft 的 Bob Dorr 的这个演示文稿](http://blogs.msdn.com/b/psssql/archive/2010/03/24/how-it-works-bob-dorr-s-sql-server-i-o-presentation.aspx)——其中指出 SQLServer 中 98% 的 IO 是异步的。

Wrt 您观察到更新已经包含值的列而不是设置为 null 的列，[这篇 SO 文章](https://stackoverflow.com/questions/4187677/difference-between-different-string-types-in-sql-server)可能包含有用的信息 - 您用于`TextField`列的数据类型可能会产生重大影响。

# conkeror - 当下载链接隐藏在 Rt Click 菜单后面时如何使用 Conkeror 下载

> ID：12557104
> 
> 赞同：0
> 
> 时间：2012-09-23T23:16:22.220
> 
> 标签：conkeror

例如，考虑 emacswiki 和下载 .el 文件的需要。
此页面[http://www.emacswiki.org/emacs/help-fns%2b.el](http://www.emacswiki.org/emacs/help-fns%2b.el)有一个绿色下载按钮，用户 Rt 在 Firefox 中单击该按钮以获得“将链接另存为”功能。如何在 Conkeror 中做类似的事情？最好同时拥有键盘和鼠标解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T21:29:20.360

[您可以在此](http://conkeror.org/QuickStart)页面上找到主要的 Conkeror 密钥。

在您的情况下，尝试使用**s**键并“选择”Conkeror 中的链接。

# python - 在列表中传送图片时程序崩溃

> ID：12557111
> 
> 赞同：1
> 
> 时间：2012-09-23T23:18:09.923
> 
> 标签：python, pygame

我正在尝试使用列表将多张图片传送到屏幕上，并将坐标附加到单独的列表中。

在一个带有图片名称的列表中，我希望它输出，当子弹与图像碰撞时，我将其从列表中删除，以便将其从屏幕上删除。但是我还没有进行碰撞检测。

此外，当我使用这些函数运行它时，程序只会崩溃，它没有任何错误或任何东西。

```
#create enemies
lvl1 = [[alien2],[alien2],[alien1]]

def create_alien_list(level_list):
    x = 0
    y = 0
    i = 0
    alien_w = 0
    alien_h = 0
    for row in level_list:
        x = 10
        for col in row:
            if col: level_list[i].append([x,y])
            x += alien_w + 10
        i+=1
        b_y += alien_h + 5

def draw_aliens():
    i = 0
    for each in alien_list:
        screen.blit(level_list[i],(level_list[i][1],level_list[i][2]))
        i+=1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T04:25:12.413

您的“draw_aliens”函数没有将图像作为第一个参数传递给该`blit`方法，因为它应该是。查看此处附加的代码，可以看到 `level_list[i] 是一个列表，而不是图像。因此，如果这不是转录错误，只需将您的 blitting 行更改为：

`screen.blit(level_list[i][0],(level_list[i][1],level_list[i][2]))`反而。如果您确实没有收到错误消息，则可能是由于 Pygame 的 blit 代码中的错误参数验证导致您的程序出现段错误。

# javascript - 使用 javascript 引用当前节点？

> ID：12557113
> 
> 赞同：2
> 
> 时间：2012-09-23T23:18:29.957
> 
> 标签：javascript

因此，我正在为一个没有完全访问标记（或 ftp 访问）的无用 CMS 的站点进行重新设计。特别是有一个节点严重阻碍了我的进步——它是用内联样式编写的，没有类或 ID，我必须更改它（而不是删除它）。它看起来像：

```
<div style="background-color: blue">
<div class="editablecontent">
(stuff I can edit in the CMS goes here)
</div>
</div> 
```

我不认为 getElementsByClassName 会在这里工作吗？但是什么样的作品是非常丑陋的定义一个带有 ID 的空 div 然后 document.getElementById.parentNode.parentNode.style.backgroundColor="white" 这显然是肮脏的，无论如何在 IE 中都不起作用，我需要 IE8 支持（至少）。我没有使用框架，但可以访问标题。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T23:33:07.167

假设此内容在您的文档中是唯一的（例如，只有其中一个），您可以使用它来查找它：

```
function changeColor() {
    var divs = document.getElementsByTagName("div");
    for (var i = 0, len = divs.length; i < len; i++) {
        if (divs[i].style.backgroundColor === "blue" && 
          divs[i + 1] && 
          divs[i + 1].parentNode === divs[i] &&
          divs[i + 1].className === "editablecontent") {
            divs[i].style.backgroundColor = "white";
            return;
        }
    }
} 
```

这将执行以下步骤：

1.  获取文档中的所有 div
2.  寻找一个带有内联样式设置的 backgroundColor 设置为蓝色
3.  当您找到一个检查以查看其后是否有另一个 div
4.  如果下一个 div 是一个孩子
5.  如果下一个 div 有`className`一个`"editablecontent"`
6.  然后，更改其背景颜色。

如果您希望根据其他标准进行任何进一步的检查以确保您找到了正确的对象，您可以将这些检查添加到逻辑中，尽管这些检查是您向我们披露的全部内容。

工作示例：http: [//jsfiddle.net/jfriend00/NmxUn/](http://jsfiddle.net/jfriend00/NmxUn/)

* * *

另一种方法是使用`getElementsByClassName`并安装一个像这样的 polyfill 以使其在旧浏览器中工作：

```
// Add a getElementsByClassName function if the browser doesn't have one
// Limitation: only works with one class name
// Copyright: Eike Send http://eike.se/nd
// License: MIT License

if (!document.getElementsByClassName) {
  document.getElementsByClassName = function(search) {
    var d = document, elements, pattern, i, results = [];
    if (d.querySelectorAll) { // IE8
      return d.querySelectorAll("." + search);
    }
    if (d.evaluate) { // IE6, IE7
      pattern = ".//*[contains(concat(' ', @class, ' '), ' " + search + " ')]";
      elements = d.evaluate(pattern, d, null, 0, null);
      while ((i = elements.iterateNext())) {
        results.push(i);
      }
    } else {
      elements = d.getElementsByTagName("*");
      pattern = new RegExp("(^|\\s)" + search + "(\\s|$)");
      for (i = 0; i < elements.length; i++) {
        if ( pattern.test(elements[i].className) ) {
          results.push(elements[i]);
        }
      }
    }
    return results;
  }
} 
```

And, then you could simply do this, even on older versions of IE:

```
var items = document.getElementsByClassName("editablecontent");
if (items.length) {
    items[0].parentNode.style.backgroundColor = "white";
} 
```

# bash - MacPorts 和 bash 路径

> ID：12557114
> 
> 赞同：1
> 
> 时间：2012-09-23T23:18:45.597
> 
> 标签：bash, macports

我正在使用 10.8.1（山狮）。

升级到 Mountain Lion 后，我的一些 MacPorts 停止工作。为了更轻松的生活，我只是清除`/opt/local/`并重新安装了最新版本的 MacPorts，然后是端口本身。

这产生了副作用，我使用的许多端口都回到了捆绑的 OS X 默认设置。我打开`.profile`以确保它`/opt/local/bin`首先出现在 PATH 中，但这并没有解决问题。

我怀疑的输出`port select`是一个症状：

```
$ port select python
Available versions for python:
    none (active)  # shouldn't the bundled version be here?
    python27
    python32

$ which python
/usr/bin/python 
```

更改活动端口 ( `sudo port select --set python python27`) 可以解决问题，但并非所有端口都可以与`port select`. 有谁知道这里发生了什么？

**编辑**：我应该澄清一下，我不认为这是一个完整的修复 - 你应该能够使用类似的命令更改回 Apple 版本`sudo port select --set python python25-apple`，我怀疑我只能通过解决潜在问题来恢复。

作为记录，以下内容`~/.profile`：

```
export PATH=/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/usr/texbin 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T00:46:59.810

如果没有更多信息，就很难猜测您看到的是什么行为以及您希望看到什么。MacPorts 确实为`port select`您提到的一些命令提供了选项，`python`但`ipython`还[没有为 pip](http://trac.macports.org/ticket/36178)提供选项。通常，MacPorts 安装带有特定于版本后缀的 Python 脚本，因此与`port select`选项无关，您应该找到那些带有后缀的命令，例如：

```
$ port select --list ipython
Available versions for ipython:
    ipython27
    ipython32 (active)
    none
$ which ipython
/opt/local/bin/ipython
$ which ipython-2.7
/opt/local/bin/ipython-2.7
$ port select --list pip
Warning: Unable to get active selected version: The specified group 'pip' does not exist.
Error: The 'list' command failed: The specified group 'pip' does not exist.
$ which pip
$ which pip-2.7
/opt/local/bin/pip-2.7 
```

顺便说一句，Apple 既不提供 OS X 系统 Python`pip`也不`ipython`提供，因此不清楚捆绑的 OS X 默认值是什么意思。也许您将这些版本安装到系统 Python 2.7。如果是这样，默认情况下，您会看到它们与`/usr/bin/python2.7`和/或安装在`/usr/local/bin`and中`/Library/Python/2.7`。

**更新：**在 MacPorts 提供`port select pip`选项之前（如上面链接的 MacPorts 问题中所要求的那样），您应该能够通过修改在路径开头添加 Python 框架 bin 目录来`pip`执行 MacPorts 版本：`.profile`

```
export PATH=/opt/local/Library/Frameworks/Python.framework/Versions/Current/bin:/opt/local/bin:... 
```

**2014-04 更新：** MacPorts 现在确实提供了一个`port select pip`选项，因此您不再需要进行`PATH`破解。

```
$ sudo port select pip
Available versions for pip:
    none (active)
    pip27
    pip33
$ sudo port select pip pip27
Selecting 'pip27' for 'pip' succeeded. 'pip27' is now active.
$ hash
$ which pip
/opt/local/bin/pip 
```

# c++ - 在类方法中修改私有类变量？

> ID：12557116
> 
> 赞同：3
> 
> 时间：2012-09-23T23:20:14.987
> 
> 标签：c++, class, methods, private

这可能是我正在犯的一个非常基本的错误，但我对 c++ 很陌生，所以请不要判断！

基本上，我有两个类如下：

```
class A{
    private:
    vector< vector<int> > images;

    public:
    int f1(int X, int Y);
}

class B{
    private:
    int x;
    int y;

    public:
    int f2(A var);
} 
```

我希望能够使用定义的变量 A 和 B 调用 B.f2(A)，并让 f2() 调用 A.f1(x,y)。到目前为止，这一切都有效。但是函数 f1 将值分配给当 f2() 返回时不存在的向量“图像”。任何想法为什么？这是代码：

```
int A::f1(int X, int Y){
    // Some stuff to resize images accordingly
    images[X][Y] = 4;
    return 0;
}

int B::f2(A var){
    var.f1(x, y);
    return 0;
}

int main(){
    A var1;
    B var2;

    // Stuff to set var2.x, var2.y
    var2.f2(var1);

    // HERE: var1.images IS UNCHANGED?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T23:24:12.660

这是因为你已经通过`A`了*value*。相反，通过引用传递它。

```
void fn(A& p);
         ^ << refer to the original object passed as the parameter. 
```

就像现在一样，您的程序创建，然后*变异*.`var1`

当您不想改变参数时，可以将其作为 const 引用传递：

```
void fn(const A& p);
        ^^^^^  ^ 
```

# ios - Xcode 4.5 & iOS 6 与 Tapuku 库的链接错误

> ID：12557121
> 
> 赞同：2
> 
> 时间：2012-09-23T23:20:59.330
> 
> 标签：ios, xcode, three20, ios6, xcode4.5

只有当我的项目编译为在 iOS 设备上运行时，我才会收到此错误。有没有人遇到过类似的问题？我正在尝试在设备上运行我的项目。我几乎到处都看过，无法找到解决方案。对此的任何帮助将不胜感激。

```
Ld /Users/dapage/Library/Developer/Xcode/DerivedData/McKendree_University-clkfusicbtxoumeeuoisuduipobw/Build/Products/Debug-iphoneos/McKendree.app/McKendree normal armv7
    cd /Users/dapage/Developer/workspace/McKendree
    setenv IPHONEOS_DEPLOYMENT_TARGET 4.0
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -L/Users/dapage/Library/Developer/Xcode/DerivedData/McKendree_University-clkfusicbtxoumeeuoisuduipobw/Build/Products/Debug-iphoneos -L/Users/dapage/Developer/workspace/McKendree -L/Users/dapage/Developer/workspace/McKendree/Libraries -L/Users/dapage/Developer/workspace/McKendree/Libraries/OAuthConsumer -L/Users/dapage/Developer/workspace/McKendree/Libraries/TestFlight -L/Users/dapage/Developer/workspace/McKendree/../../../Downloads/TestFlightSDK1 -F/Users/dapage/Library/Developer/Xcode/DerivedData/McKendree_University-clkfusicbtxoumeeuoisuduipobw/Build/Products/Debug-iphoneos -filelist "/Users/dapage/Library/Developer/Xcode/DerivedData/McKendree_University-clkfusicbtxoumeeuoisuduipobw/Build/Intermediates/McKendree University.build/Debug-iphoneos/McKendree.build/Objects-normal/armv7/McKendree.LinkFileList" -dead_strip -ObjC -fobjc-link-runtime -miphoneos-version-min=4.0 /Users/dapage/Library/Developer/Xcode/DerivedData/McKendree_University-clkfusicbtxoumeeuoisuduipobw/Build/Products/Debug-iphoneos/libThree20UI.a /Users/dapage/Library/Developer/Xcode/DerivedData/McKendree_University-clkfusicbtxoumeeuoisuduipobw/Build/Products/Debug-iphoneos/libThree20UICommon.a /Users/dapage/Library/Developer/Xcode/DerivedData/McKendree_University-clkfusicbtxoumeeuoisuduipobw/Build/Products/Debug-iphoneos/libThree20UINavigator.a /Users/dapage/Library/Developer/Xcode/DerivedData/McKendree_University-clkfusicbtxoumeeuoisuduipobw/Build/Products/Debug-iphoneos/libextThree20XML.a /Users/dapage/Library/Developer/Xcode/DerivedData/McKendree_University-clkfusicbtxoumeeuoisuduipobw/Build/Products/Debug-iphoneos/libThree20.a /Users/dapage/Library/Developer/Xcode/DerivedData/McKendree_University-clkfusicbtxoumeeuoisuduipobw/Build/Products/Debug-iphoneos/libThree20Core.a /Users/dapage/Library/Developer/Xcode/DerivedData/McKendree_University-clkfusicbtxoumeeuoisuduipobw/Build/Products/Debug-iphoneos/libThree20Network.a /Users/dapage/Library/Developer/Xcode/DerivedData/McKendree_University-clkfusicbtxoumeeuoisuduipobw/Build/Products/Debug-iphoneos/libThree20Style.a /Users/dapage/Library/Developer/Xcode/DerivedData/McKendree_University-clkfusicbtxoumeeuoisuduipobw/Build/Products/Debug-iphoneos/libTapkuLibrary.a -framework AddressBook -framework AddressBookUI -framework AudioToolbox -lz -framework QuartzCore -framework Foundation -framework UIKit -framework CoreGraphics -framework MapKit -framework MessageUI -framework MediaPlayer -framework AVFoundation -framework SystemConfiguration -framework CoreLocation -lxml2 -lsqlite3.0 -framework CFNetwork -framework Security -lOAuth -lTestFlight -o /Users/dapage/Library/Developer/Xcode/DerivedData/McKendree_University-clkfusicbtxoumeeuoisuduipobw/Build/Products/Debug-iphoneos/McKendree.app/McKendree\ 
```

错误是：

```
clang: error: no such file or directory: '/Users/dapage/Library/Developer/Xcode/DerivedData/McKendree_University-clkfusicbtxoumeeuoisuduipobw/Build/Products/Debug-iphoneos/libTapkuLibrary.a' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T01:59:12.867

确保库二进制文件位于项目根目录下，并将其添加为参考。您可以通过在 Project Navigator (Cmd-1) 中选择项目，然后选择 Build Phases 来执行此操作。在 Link Binary with Libraries 下，您应该有对二进制文件的引用。您可能还想将库二进制文件添加到您的项目中，这可能会自动作为链接二进制文件添加到项目中。您还可以在 Build Settings 下编辑 Library Search Paths 并添加您拥有此二进制文件的文件夹。

```
"$(SRCROOT)/lib" 
```

如果您在该文件夹中有二进制文件，它可能会发现这样更容易。您还需要为此库引用头文件，因此请查看设置头文件搜索路径并将头文件添加到您的项目中。

如果可以的话，我更喜欢将第三方库中的代码添加为静态库并将它们添加为依赖项。您可以先将其作为一个单独的项目进行，然后让它自己成功构建。然后您可以将该项目文件拖到 Xcode 中的另一个项目中并将其设置为依赖项。您将需要了解方案如何管理依赖项的构建项目以设置子项目。您可能会发现这种方法比链接到可能不包含 Apple 发布的设备所需架构的预编译库要容易得多。如果您将源代码作为依赖项，您将能够构建必要的二进制版本。

# c# - 将 utf8 转换为 1251

> ID：12557123
> 
> 赞同：4
> 
> 时间：2012-09-23T23:21:37.853
> 
> 标签：c#, .net

好的，问题如下。我必须从在线表格中获取信息，然后再次提交（更改）。该页面位于“windows-1251”中，在我的请求中，我得到了它：

```
{
         // used to build entire input
        StringBuilder sb = new StringBuilder();

        // used on each read operation
        byte[] buf = new byte[8192];

        // prepare the web page we will be asking for
        HttpWebRequest request = (HttpWebRequest)
            WebRequest.Create(url);

        // execute the request
        HttpWebResponse response = (HttpWebResponse)
            request.GetResponse();

        // we will read data via the response stream
        Stream resStream = response.GetResponseStream();

        string tempString = null;
        int count = 0;

        do
        {
            // fill the buffer with data
            count = resStream.Read(buf, 0, buf.Length);

            // make sure we read some data
            if (count != 0)
            {
                // translate from bytes to ASCII text
                tempString = Encoding.GetEncoding(1251).GetString(buf, 0, count);

                // continue building the string
                sb.Append(tempString);
            }
        }
        while (count > 0); // any more data to read?

        // print out page source
        // Console.WriteLine(sb.ToString());
        return sb.ToString(); 
```

所以在那之后我剥离页面并将我的数据放入一个数组中，我需要再次将其发布到站点，但它需要进行编码。我使用 System.Net.WebUtility.UrlEncode 进行编码，但我的脚本和 firefox 得到了完全不同的结果（我使用篡改数据得到了原始结果）。因此，任何帮助或想法都会受到赞赏。[顺便说一句，在我获得编码数据（来自脚本）后，我在http://www.url-encode-decode.com/](http://www.url-encode-decode.com/)上在线尝试了它，只有 UTF-8 返回了正确的结果。所以我猜我必须将它转换为 1251 并且我尝试这样做，但它仍然是胡言乱语并且与它应该是完全不同的......所以请如果你能帮助我它会很棒......： )

编辑：

```
Expected: %E3%F0%E0%E4+%D1%EE%F4%E8%FF
Actual: %D0%B3%D1%80%D0%B0%D0%B4+%D0%A1%D0%BE%D1%84%D0%B8%D1%8F
f2[11] = град София
-       f2  {string[180]}   string[]
    [0] "127.0.0.1" string
    [1] "1348247257"    string
    [2] "1n132135075318435" string
    [3] "151669n1"  string
    [4] "0" string
    [5] null    string
    [6] null    string
    [7] null    string
    [8] "2" string
    [9] "12871449760521116" string
    [10]    "14"    string
    [11]    "град София"    string
    [12]    "Враждебна" string
    [13]    "42.707984,23.41341,0~бул. Ботевградско шосе"   string
    [14]    "42.7100653,23.4274006,1"   string 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T07:53:14.653

# ruby-on-rails - Ruby on Rails：heroku 数据库推送

> ID：12557124
> 
> 赞同：0
> 
> 时间：2012-09-23T23:22:02.907
> 
> 标签：ruby-on-rails, ruby, database, heroku

当我尝试运行时，`heroku db:push`出现此错误。

`-bash: /usr/local/bin/heroku: /usr/bin/ruby1.8: bad interpreter: No such file or directory`

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T23:31:01.787

Heroku 找不到 Ruby。如果您使用 RVM 或其他东西来管理您的 Ruby 安装，这很常见。你是如何安装 Heroku 的，你是如何安装 Ruby 的？

# iphone - 选择搜索栏时显示 searchDisplayController.searchResultsTableView

> ID：12557126
> 
> 赞同：0
> 
> 时间：2012-09-23T23:22:29.547
> 
> 标签：iphone, uisearchbar, uisearchdisplaycontroller

我想在选择我的 searchBar 时显示 searchResultsTableView。我试过这个：

```
- (void) searchDisplayControllerWillBeginSearch:(UISearchDisplayController *)controller {
    [self.searchDisplayController.searchResultsTableView reloadData];
    [self.searchDisplayController setActive:YES animated:YES];
} 
```

和这个：

```
- (void) searchDisplayControllerWillBeginSearch:(UISearchDisplayController *)controller {
    [self.searchDisplayController setActive:YES animated:YES];
} 
```

两者都不起作用。在我的 numberOfRowsInSection 方法中，我确实在数组中有行，但 searchResultsTableView 在我开始输入之前不会显示。有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:45:28.570

尝试在以下 UISearchBarDelegate 方法中将您的 searchdisplaycontroller 设置为活动状态

```
- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar; 
```

# wpf - 使用 Libtiff.net 将 BitmapSource 保存为 Tiff 编码的 JPEG

> ID：12557127
> 
> 赞同：2
> 
> 时间：2012-09-23T23:22:31.240
> 
> 标签：wpf, jpeg, bitmapsource, libtiff.net

我正在尝试编写一个例程，该例程将使用 LibTiff.net 将 WPF BitmapSource 保存为 JPEG 编码的 TIFF。使用 LibTiff 提供的示例，我想出了以下内容：

```
private void SaveJpegTiff(BitmapSource source, string filename)
    {

        if (source.Format != PixelFormats.Rgb24) source = new FormatConvertedBitmap(source, PixelFormats.Rgb24, null, 0);

        using (Tiff tiff = Tiff.Open(filename, "w"))
        {
            tiff.SetField(TiffTag.IMAGEWIDTH, source.PixelWidth);
            tiff.SetField(TiffTag.IMAGELENGTH, source.PixelHeight);
            tiff.SetField(TiffTag.COMPRESSION, Compression.JPEG);
            tiff.SetField(TiffTag.PHOTOMETRIC, Photometric.RGB);

            tiff.SetField(TiffTag.ROWSPERSTRIP, source.PixelHeight);

            tiff.SetField(TiffTag.XRESOLUTION,  source.DpiX);
            tiff.SetField(TiffTag.YRESOLUTION, source.DpiY);

            tiff.SetField(TiffTag.BITSPERSAMPLE, 8);
            tiff.SetField(TiffTag.SAMPLESPERPIXEL, 3);

            tiff.SetField(TiffTag.PLANARCONFIG, PlanarConfig.CONTIG);

            int stride = source.PixelWidth * ((source.Format.BitsPerPixel + 7) / 8);

            byte[] pixels = new byte[source.PixelHeight * stride];
            source.CopyPixels(pixels, stride, 0);

            for (int i = 0, offset = 0; i < source.PixelHeight; i++)
            {
                tiff.WriteScanline(pixels, offset, i, 0);
                offset += stride;
            }
        }

        MessageBox.Show("Finished");
    } 
```

这会转换图像，我可以看到 JPEG 图像，但颜色混乱。我猜我错过了 TIFF 的一个或两个标签，或者像光度解释这样的错误，但并不完全清楚需要什么。

干杯，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:40:32.197

目前尚不清楚您所说的“颜色混乱”是什么意思，但您可能应该将 BGR 样本转换`BitmapSource`为 LibTiff.Net 所期望的 RGB 样本。

`WriteScanline`我的意思是，在将像素提供给方法之前，请确保颜色通道的顺序是 RGB（很可能不是） 。

# bash - 复杂的 bash 变量语法

> ID：12557131
> 
> 赞同：2
> 
> 时间：2012-09-23T23:22:54.903
> 
> 标签：bash

在一个 bash 脚本中，我找到了下一个构造：

```
if [[ "${xvar[id]:0:${#cnt}}" != "$cnt" ]]; then 
```

有人可以解释上述条件的作用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T23:33:34.760

复杂的表达式是：`${xvar[id]:0:${#cnt}}`.

`$xvar`必须是一个数组，可能是关联的。如果是关联的，则part`${xvar[id]}`引用字符串'id'标识的数组元素；如果不是，那么它指的是由变量索引的元素`$id`（您可以省略嵌套的`$`），正如[chepner](https://stackoverflow.com/users/1126841/chepner)在评论中所指出的那样。

表达式的`${xxx:0:${#cnt}}`部分引用从偏移量 0 到变量长度的子字符串（变量中字符串的长度也是`$cnt`如此）。`${#cnt}``$cnt`

总而言之，测试检查 的第一个字符是否`${xvar[id]}`与 的值相同，以及 中`$cnt`的值`$cnt`的前缀中的值是否相同`${xvar[id]}`。

# vb.net - 对如何去做这个程序感到困惑

> ID：12557132
> 
> 赞同：0
> 
> 时间：2012-09-23T23:22:58.397
> 
> 标签：vb.net, variables

问题如下。客户需要特定数量的纸张。纸上的指控是：

*   .10 单张。
*   每张 0.055 以 100 的倍数计算。
*   每张 0.04 以 500 的倍数计算。
*   每张 0.03 以 1000 的倍数计算。

我知道你必须在某处使用 mod 部门。我不确定我的变量是否设置正确，我的大脑快要融化了。伤心吧？哈哈。我将非常感谢一些帮助。干杯:)

```
Option Explicit On

Imports system

Module paperp
    Sub Main()

        Dim papercost As Double
        Dim onetpackage As Integer
        Dim fivehpackages As Integer
        Dim onehpackages As Integer
        Dim singlesheets As Integer

        Console.Writeline("Number of 1000 packages:")
        onetpackage = convert.toint32(Console.Readline())

        Console.Writeline("Number of 500 packages:")
        fivehpackages = convert.toint32(Console.Readline())

        Console.Writeline("Number of 100 packages:")
        onehpackages = convert.toint32(Console.Readline())

        Console.Writeline("Number of single sheets:")
        singlesheets = convert.toint32(console.Readline())

        Console.Out.Writeline("Number of 1000 packages:")
        Console.Out.Writeline(onetpackage)
        Console.Out.Writeline("Number of 500 packages:")
        Console.Out.Writeline(fivehpackages)
        Console.Out.Writeline("Number of 100 packages:")
        Console.Out.Writeline(onehpackages)
        Console.Out.Writeline("Number of single sheets:")
        Console.Out.Writeline(singlesheets)
        Console.Out.Writeline("Your total Cost is:")
        Console.Out.Writeline(papercost)

    End Sub
End Module 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T23:33:59.010

为什么不循环遍历每个数量（例如 1000、500、100、1），并且用户在变量中指定的工作表数量，逻辑如下：

预定义变量：no_of_sheets（用户输入），working_amount = no_of_sheets，current_index = 0，count = 0，amounts（数组）= (1000, 500, 100, 1)，costs = (0.03, 0.04, 0.055, 0.1)，total = (0, 0, 0, 0)

```
While (working_amount > 0)
  if current_index < 4
    if (working_amount - amounts[current_index]) >= 0
      total[current_index]++
      working_amount = working_amount - amounts[current_index]
    else
      current_index++
    endif
  endif
endwhile 
```

现在您有一个包含每个块数量的数组，例如 (1, 2, 3, 4) 的数组表示 1 x 1000 张、2 x 500、3 x 100、4 x 1

然后你可以将每一位乘以它们的价格。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T23:34:51.407

使用该代码，您只需添加每个包裹的价格：

```
papercost = _
  0.03 * 1000.0 * onetpackage + _
  0.04 * 500 * fivehpackages + _
  0.055 * 100 * onehpackages + _
  0.1 * singlesheets 
```

但是，为了使分配有意义，我认为您实际上应该只输入总张数，然后计算包数。您可以在计算包数后使用模数来计算剩余的工作表，但使用减法同样简单：

```
 onetpackage = Math.Floor(totalsheets / 1000)
  totalsheets -= onetpackage * 1000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T23:33:36.230

你的作业问题是[背包问题](http://en.wikipedia.org/wiki/Knapsack_problem)的一个例子，但幸运的是它的一个非常简单的变体。

您不一定需要使用模运算符 - 您可以迭代地进行。从最昂贵的产品开始（提供最佳的单品价格比），然后用你的起始资金“购买”尽可能多的产品（不断从钱中减去，直到你买不起），然后继续前进到下一个经济实惠的产品并重复，直到你买不起任何东西。

# c++ - 将简单的 C 加密转换为 C++

> ID：12557135
> 
> 赞同：0
> 
> 时间：2012-09-23T23:23:29.990
> 
> 标签：c++, c

我有一些令人尴尬的基本问题，我似乎无法找到我能够处理的答案。上次我向你们寻求帮助时，我的运气非常好，所以我希望能重蹈覆辙。我没有任何类型的 C/C++ 方面的经验，而且这门课假设至少有 1 个学期，所以它踢了我一点。

这是我的教授给我的代码：

```
#include <stdio.h>
#include <string.h>

void encrypt(int offset, char *str) {

int i,l;

l=strlen(str);

printf("\nUnencrypted str = \n%s\n", str);

for(i=0;i<l;i++)
    if (str[i]!=32)  
        str[i] = str[i]+ offset;

printf("\nEncrypted str = \n%s \nlength = %d\n", str, l);
}

void decrypt(int offset, char *str) {

// add your code here
}

void main(void) {

char str[1024];

printf ("Please enter a line of text, max %d characters\n", sizeof(str));

if (fgets(str, sizeof(str), stdin) != NULL)
{
    encrypt(5, str);    // What is the value of str after calling "encrypt"?

    // add your method call here:
}
} 
```

这就是我应该执行的操作：

*   将代码转换为 C++。替换所有 printf、scanf 和 fgets 语句。
*   将代码添加到“解密”方法以破译加密的文本。
*   更改代码以使用指针操作而不是数组操作来加密和解密消息。
*   在main方法中，调用“decrypt”方法对密文（str）进行解密。

我不是直接要求作业的答案，但我需要帮助来理解我正在犯的错误以及我需要做什么。

这是我在作业的第一部分的尝试：

```
#include <stdio.h>
#include <string.h>
#include <iostream>
using namespace std;

void encrypt(int offset, char *str) {

int i,l;

l=strlen(str);

cout << "\nUnencrypted str = \n%s\n", str;

for(i=0;i<l;i++)
    if (str[i]!=32)
        str[i] = str[i]+ offset;

cout << "\nEncrypted str = \n%s \nlength = %d\n", str, l;
}

void decrypt(int offset, char *str) {

// add your code here
}

int main(void) {

char str[1024];

cout << "Please enter a line of text, max %d characters\n", sizeof(str);

if (fgets(str, sizeof(str), stdin) != NULL)
{
    encrypt(5, str);    // What is the value of str after calling "encrypt"?

    // add your method call here:
}
} 
```

问题是这就是我要出来的，我不知道需要做些什么不同的事情。

请输入一行文字，最多 %d 个字符 hello world

未加密的 str = %s

加密 str = %s 长度 = %d

在这一点上我什么都不想，我已经花了几个小时在谷歌上搜索并尝试了一些东西，但没有真正到达任何地方，我知道这应该不会超过一个小时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T23:26:56.537

`std::iostream`不接受`printf`样式格式。相反，只需断开字符串并`<<`使用参数链接另一个字符串，例如

```
int myInt = 5;
std::cout << "HelloWorld" << myInt << '\n'; 
```

这适用于所有基本类型，但对于自定义类，您需要手动添加`ostream <<`运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T00:26:18.747

查看“更改代码以使用指针操作而不是数组操作来加密和解密消息”，让我们看看我是否可以解释这一点。（我将专注于指针部分）。我将重写 encrypt 函数几次，希望能说清楚

首先，我们将 转换`for`为`while`循环

```
void encrypt(int offset, char *str) 
{
    int i,l;

    l=strlen(str);

    printf("\nUnencrypted str = \n%s\n", str);

    i = 0;
    while(i < l)
    {
        if (str[i]!=32)  
            str[i] = str[i]+ offset;
        ++i;
    }

    printf("\nEncrypted str = \n%s \nlength = %d\n", str, l);
} 
```

现在，我们尝试摆脱`strlen`呼叫。`strlen`计算 C 字符串开头和空字符第一次出现之间的所有字符。空字符可以写成`'\0'`but 在 C 或 C++ 中，这与只写`0`. 与比较类似，只要字符串位置的字符不为0 `str[i] != 32`，我们就可以编写如果我们想循环。`str[i] != 0``i``str`

```
void encrypt(int offset, char *str) 
{
    int i;

    printf("\nUnencrypted str = \n%s\n", str);

    i = 0;
    while(str[i] != 0)
    {
        if (str[i]!=32)  
            str[i] = str[i]+ offset;
        ++i;
    }

    printf("\nEncrypted str = \n%s \nlength = %d\n", str, l);
} 
```

`str[i]`相当于下面`*(str + i)`的，只是写法不同。所以我们可以再次重写

```
void encrypt(int offset, char *str) 
{
    int i;

    printf("\nUnencrypted str = \n%s\n", str);

    i = 0;
    while(*(str + i) != 0)
    {
        if (*(str + i)!=32)  
            *(str + i) = *(str + i) + offset;
        ++i;
    }

    printf("\nEncrypted str = \n%s \nlength = %d\n", str, l);
} 
```

现在我们已经有了只使用指针的解决方案，但是我们可以通过更好地理解指针来使它更漂亮。

让我们用另一个变量再次重写

```
void encrypt(int offset, char *str) 
{
    int i;

    printf("\nUnencrypted str = \n%s\n", str);

    i = 0;
    char *ptr = (str + i);
    while(*ptr != 0)
    {
        if (*ptr!=32)  
            *ptr = *ptr + offset;
        ++i;
        ptr = (str + i);
    }

    printf("\nEncrypted str = \n%s \nlength = %d\n", str, l);
} 
```

所以我在这里所做的就是用新变量替换 (s + i) `ptr`。在最后一步中，我们删除了 i，因为它只是一个辅助变量，它告诉我们必须从起始地址跳转多少个地方。但由于它在每次迭代中只增加 1，所以我们直接移动指针。

```
void encrypt(int offset, char *str) 
{
    printf("\nUnencrypted str = \n%s\n", str);

    char *ptr = str;
    while(*ptr) // the same as *ptr != 0
    {
        if (*ptr!=32)  
            *ptr = *ptr + offset;
        ++ptr;
    }

    printf("\nEncrypted str = \n%s \nlength = %d\n", str, l);
} 
```

然后按照 Seth Carnegie 的建议用电话替换您`printf`的电话。`std::cout`

对于解密：只需尝试查看`: when encrypt 'sees' a chracter that is not equal to 32, it adds`该字符的 encrypt offset` 中发生的情况并将其分配回去。所以试着想想你必须做什么，来恢复这个操作（这与 C 完全无关）

# encryption - 使用 Xamarin 保护跨平台存储选项

> ID：12557144
> 
> 赞同：6
> 
> 时间：2012-09-23T23:24:43.510
> 
> 标签：encryption, mono, xamarin.ios, xamarin.android, xamarin

我目前正在审查 Xamarin 作为开发平板电脑应用程序的一个选项（现在针对 iOS 和 Android，但将来考虑将其移植到 Win8 平板电脑）

要存储的数据非常敏感，所以安全性是我主要关心的问题。

到目前为止，我正在考虑两种选择：

a) SQLite + SQLCipher：假设 Win8 平板电脑将支持 SQLite，并且 SQLCipher 也可以在 Win8 上运行。

b) 隔离存储 + DPAPI：假设这种 DPAPI 方法可以在 Mono 平台上运行，并且它仍然可以在 Win8 平板电脑上使用。

我在这里担心的是，为了安全地存储密钥，我想我仍然需要为每个平台分别实现（iOS 上的数据保护，我仍在审查 Android 和 Win8 平板电脑的选项）。

是否有任何跨平台解决方案可以安全地存储加密密钥或另一种完全跨平台的方式来安全地存储数据？如果没有完全跨平台的解决方案，那么在每个平台上使用的任何推荐选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-22T15:36:23.570

我写了一个插件来解决安全存储问题。它跨平台工作，并在每个平台上本地保护数据。它是开源的。

请检查一下。 [https://www.nuget.org/packages/sameerIOTApps.Plugin.SecureStorage/](https://www.nuget.org/packages/sameerIOTApps.Plugin.SecureStorage/)

博客： [https ://sameer.blog/2018/01/19/whats-new-in-secure-storage-2-0/](https://sameer.blog/2018/01/19/whats-new-in-secure-storage-2-0/)

让我知道，如果您有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-10T22:02:32.913

我们在我们的解决方案中使用 SQLite + SQLCipher，它在跨平台环境中运行良好。如果我没记错的话，使用 SQLCipher 没有问题，因为它使用 AES。无论如何，我建议您检查一下，但我认为这不是问题。SQLCipher 本身不会使数据无法读取，如果您允许选择将密码与 SQLCipher 一起使用，那么您可能会遇到问题，但仍然存在。对于 AES，获得许可的过程非常简单，可以在几天内完成。

# php - 如何制作从数据库中填充地址的电子邮件按钮？

> ID：12557145
> 
> 赞同：0
> 
> 时间：2012-09-23T23:24:49.037
> 
> 标签：php, email

我在一个有点像 craigslist 的网站上工作，只是规模很小。我需要帮助制作一个按钮，用户可以单击该按钮向特定商品的卖家发送电子邮件。我需要使用存储在数据库中的卖家电子邮件地址填充电子邮件。这可能很简单，但我对 php 真的很陌生，不知道如何开始。有人可以帮我写代码吗？非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T23:31:07.040

呵呵

*   [php发邮件教程](http://www.w3schools.com/php/php_mail.asp)
*   [php教程读取数据库记录](http://www.homeandlearn.co.uk/php/php13p2.html)
*   [php教程读取表单输入](http://www.tizag.com/phpT/forms.php)

这就是你需要做的事情。

当您搜索这些词时，这些是 Google 上的第一个链接。我快速浏览了这些文章，它们的质量都不错。不要忘记总有[php.net](http://www.php.net)适合您。

祝你好运！

# sql - SQL通过加法修改列的值

> ID：12557152
> 
> 赞同：0
> 
> 时间：2012-09-23T23:26:39.293
> 
> 标签：sql

> **可能重复：**
> [如何添加到 MySQL 中的每一行？](https://stackoverflow.com/questions/3074355/how-do-i-add-to-each-row-in-mysql)

这对你们大多数人来说可能真的很容易，但我无法理解它。我的表中有一个浮点类型的列。我想通过添加 15 来修改每一行的该列的值。例如，如果特定行的列的值为 10，我想向其添加 15 以使新值 25，并且对于每个后续的值都相同排。

我正在尝试使用 PHP 来执行此操作，但有没有办法直接使用 SQL 来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T23:29:06.297

```
UPDATE `tableName` SET `fieldName` = `fieldName` + 15 
```

# jquery - jQuery：在负载和事件上运行函数 - .keyup() 和 .each()

> ID：12557154
> 
> 赞同：0
> 
> 时间：2012-09-23T23:26:49.793
> 
> 标签：jquery, coding-style, dry

我有一个关于风格/紧凑性的问题。我有一个函数，我想在我的文档加载时运行一次，并且在触发事件时也运行一次。

我的代码看起来像这样：

```
$('.myClass').each(function(){my_function(etc);});
$('.myClass').keyup(function(){my_function(etc);}); 
```

我想知道是否有一种方法可以将这两行代码合并为一个。目前它工作正常，但我重复代码的事实让我认为可能有更简洁的方法来做到这一点。

.bind() 和 .on() 没有让我高兴。我假设这是因为它们是针对事件的，而 .each() 不是事件。

任何人都可以提供任何见解吗？干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T23:36:28.553

所以，[http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)是迭代器

$.each() 函数与 $(selector).each() 不同，后者用于以独占方式迭代 jQuery 对象。$.each() 函数可用于迭代任何集合，无论是映射（JavaScript 对象）还是数组。在数组的情况下，回调每次都会传递一个数组索引和一个对应的数组值。（该值也可以通过 this 关键字访问，但 JavaScript 将始终将 this 值包装为一个对象，即使它是一个简单的字符串或数字值。）该方法返回其第一个参数，即被迭代的对象。

`keyup`是事件：[http ://api.jquery.com/keyup/](http://api.jquery.com/keyup/)

希望它符合原因，如果我错过了什么，请让我知道！`:)`

试试这个：

```
$(".myClass").each(my_function(etc))
             .bind("keyup mouseover", my_function(etc)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T23:32:36.543

如果在功能块中包含 javascript 代码：

```
(function($){
    ...
})(jQuery); 
```

并使用局部变量，那么你就不会弄乱全局命名空间（窗口）。

**然后**在该功能块内，您可以声明和使用类似的功能

```
function my_named_function(etc){};
$('.myClass').each(my_named_function)
    .keyup(my_named_function); 
```

这回答了你的问题了吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T23:37:15.890

你可以使用这样的东西：

```
my_function=function(){
//do something  
}  
$('.myClass').each(my_function)
             .keyup(my_function); 
```

# javascript - 在 node.js 中，如何将模块的所有事件转发给另一个

> ID：12557156
> 
> 赞同：9
> 
> 时间：2012-09-23T23:27:05.337
> 
> 标签：javascript, node.js

假设我正在创建自己的模块，它位于“网络”模块的顶部。我的模块有自己的事件，但也允许客户端监听 tcp 连接发出的网络事件：

```
mymod.on('myevent',...); // my event
mymod.on('connect',...); // net event
mymod.on('end',...);     // net event 
```

现在我正在做以下事情

```
...
tcp.on('connect',function(){ self.emit('connect');});
tcp.on('end',function(){ self.emit('end');});
... 
```

我有没有一种更惯用的方式来简单地将所有事件（或事件子集）从一个模块转发到另一个模块的客户端？

我希望这种情况一直出现，所以我想以最干净的方式做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T02:38:15.817

我过去所做的是[处理`newListener`事件](http://nodejs.org/api/events.html#events_event_newlistener)。在将一个处理程序附加到我的班级之前，我不会费心附加处理程序。然后，当它存在时，我将它附加到基类。

```
this.on('newListener', function (event, listener) {
    baseClassInstance.on(event, listener);
}) 
```

您可以通过`event`首先检查参数来过滤传递哪些事件。

请注意是否必须删除侦听器。在这些情况下，这可能不是最佳解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T00:14:58.583

我从未尝试过，目前无法测试，但您可以尝试以下方法；

将所有事件代理到另一个对象

```
tcp.emit = mymod.emit.bind(mymod); 
```

代理事件并调用它自己的；

```
var oldEmit = tcp.emit;

tcp.emit = function() { 
    mymod.emit.apply(mymod, arguments); 
    return oldEmit.apply(this, arguments);
} 
```

让我知道它是否有效！以上只是一个概念证明，我没有考虑这样做的副作用。

# c++ - 声明枚举标识符的基础类型

> ID：12557164
> 
> 赞同：-1
> 
> 时间：2012-09-23T23:29:48.990
> 
> 标签：c++, types, enums, enum-class

我已经声明了一个枚举如下：

```
enum fileType {typeA, typeB}; 
```

当我尝试将 directoryType 类型附加到字符串时，这会导致错误。我相信我需要在枚举声明中包含枚举标识符的基础类型。或者类似的东西

```
enum fileType : string {typeA, typeB}; 
```

如[http://msdn.microsoft.com/en-us/library/2dzy4k6e(v=vs.80).aspx中所述](http://msdn.microsoft.com/en-us/library/2dzy4k6e(v=vs.80).aspx)

但是，这不是为我编译的。声明枚举标识符的基础类型的正确语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T23:40:33.470

您可能只有整数类型作为枚举的基础类型。这意味着有符号和无符号类型，例如`char` `short` `int`and `long`。

枚举的名称在运行时无处可用。如果要显示它们（或附加到字符串），则必须编写特殊代码。

```
 enum fileType {typeA, typeB};
 const char *fileType_str[]={ "typeA","typeB"};

 fileType x = typeA;
 // display x
 std::cout << "x is " << fileType_str[x] << std::endl;

 // append x to string
 std::string y = "directoryType type to a ";
 y += fileType_str[x]; 
```

# python - 使用 idapython 进行线程化

> ID：12557165
> 
> 赞同：3
> 
> 时间：2012-09-23T23:29:54.890
> 
> 标签：python, ida

我正在用 idapython 为 IDA 编写一个插件。当我尝试使用线程时，IDA 程序失败。

例如，当我尝试运行代码时：

```
import thread  
def run():  
    print "start thread"  
print "start"  
thread.start_new_thread(run, ())  
print "end" 
```

在 IDA python 控制台中打印出单词“start”，然后 IDA 失败。

我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-10T18:39:44.370

尝试升级您的 IDA / IDAPython。使用 IDA 6.1 和它附带的 IDAPython，上面的代码对我有用。

也就是说，在这个版本中，你真的不能从多个 python 线程访问数据库。有关详细信息，请参阅[idaapi.execute_sync](https://www.hex-rays.com/products/ida/support/idapython_docs/idaapi-module.html#execute_sync)。

# java - 3D太空游戏开发

> ID：12557166
> 
> 赞同：0
> 
> 时间：2012-09-23T23:30:11.463
> 
> 标签：java, game-engine, multiplayer, 3d-engine

我想开发一款可以在多人模式下玩的 3D 游戏（带有宇宙飞船的科幻类型），多人游戏是指大约 10 名玩家开始，因为这将是一个个人测试项目，主要是教育性的。我一直在寻找有关可用语言和引擎的几天，但我有点困惑。由于我在 IT 大学的第一年一直在学习 Java，并且我有很好的理解，所以我想我会使用 Java 语言并在小程序上开发该游戏，以便可以在浏览器上玩。在完成了一个小程序游戏教程后，我了解了图形在小程序上的工作原理。

所以.. 第一个问题：小程序能否承担 3D 游戏的负担，尤其是多人游戏？我的想法：这是一个太空游戏，所以图形不应该是一个大问题，因为除了飞船、行星和一些效果之外，它不会挤满实体。

如果 java 小程序不是我的项目的方式，我不介意“在桌面上开发它”（我的意思是不让它成为浏览器游戏）。第二个问题：我应该将 Unity 引擎用于我的目的（太空游戏）吗？如果没有命名其他语言/引擎组合。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T23:36:59.213

只是你问这个问题的事实是一个很大的危险信号。你写过 Pong 克隆吗？吃豆人克隆？德军总部的克隆？游戏编程很重要。而且你想让它成为多人游戏和 3D 模式（这使它复杂了大约 300 倍）。此外，这个问题应该在[gamedev.stackexchange](https://gamedev.stackexchange.com/)上。

哦顺便说一句，你不能在 Applets 中运行网络应用程序（除非你用权限做一些时髦的事情），所以[Java Web Start](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136112.html)应用程序是首选。但要回答你的问题，嗯，是的......当然。

# jquery - 从数组列表中删除 cookie

> ID：12557168
> 
> 赞同：0
> 
> 时间：2012-09-23T23:30:17.203
> 
> 标签：jquery, cookies

我无法弄清楚如何删除数组中的 cookie？

基本上我有一个数组来存储我所有的 cookie。现在我正在尝试使用单击事件删除“cookie”，但无法弄清楚为什么 cookie 列表没有更新？

也许我需要重置 cookie 列表？

请指教。

这是我插入 cookie 的代码：

```
var my_array = [];
$(".addCookie a").click(function(e) {       
  var val = $(this).attr("href");                                         
  if (my_array.indexOf(val) == -1) {   my_array.push(val); }   
$.cookie('Cookies', my_array);
e.preventDefault();
return false;       
 }); 
```

这用于删除数组中存在的 cookie

```
$(".remCookie a").click(function(e) {
    var val = $(this).attr("href");
    var index = my_array.indexOf(val);
    if (index == -1) {
        my_array.splice(index, 1);
    }       
        e.preventDefault();
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T23:42:29.750

删除 cookie 有两个问题；如果索引等于-1（即该值不在数组中），则拼接数组*，*并且不要将数组放入cookie。

```
$(".remCookie a").click(function(e) {
  var val = $(this).attr("href");
  var index = my_array.indexOf(val);
  if (index != -1) {
    my_array.splice(index, 1);
    $.cookie('Cookies', my_array);
  }       
  e.preventDefault();
  return false; 
```

});

# java - 在编写时更改 JTextPane 中的样式

> ID：12557170
> 
> 赞同：1
> 
> 时间：2012-09-23T23:30:39.010
> 
> 标签：java, swing, styles, jtextpane

我创建了一个具有两种不同样式的 jtextpane：一种用于数字（粉红色前景），另一种用于其余样式（黑色前景）。我在 jtextpane 中添加了一个 keylistener（我使用 KeyReleased 函数）来处理新按下的字符，但是我在编写过程中遇到了问题。场景如下：

*   文字是：你好123
*   '你好'文本是黑色的，数字'123'是粉红色的。
*   现在插入符号在“1”和“2”之间，我按“a”并发生了一些奇怪的事情。
*   字符“a”变为粉红色，然后变为黑色。

为什么会在短时间内变黑？

我以这种方式处理 KeyReleased：

1.  我将所有文本设置为默认样式（清洁阶段）
2.  我将仅将数字更改为粉红色的前景

* * *

这是一个例子：

```
import java.awt.Color;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.util.StringTokenizer;

import javax.swing.JFrame;
import javax.swing.JTextPane;
import javax.swing.text.Style;
import javax.swing.text.StyleConstants;

public class Example extends JFrame {

JTextPane pn = new JTextPane();
public Example() {

    addDefaultStyle(pn);
    addNumberStyle(pn);

    pn.addKeyListener(new KeyAdapter() {

        @Override
        public void keyReleased(KeyEvent arg0) {
            String text = pn.getText();

            pn.getStyledDocument().setCharacterAttributes(0, text.length(), pn.getStyle("default"), true);

            StringTokenizer ts = new StringTokenizer(text, " ");

            while(ts.hasMoreTokens()){
                String token = ts.nextToken();

                try{
                    Integer.parseInt(token);

                    pn.getStyledDocument().setCharacterAttributes(text.indexOf(token), token.length(), pn.getStyle("numbers"), true);

                }catch(Exception e){

                    pn.getStyledDocument().setCharacterAttributes(text.indexOf(token), token.length(), pn.getStyle("default"), true);
                }
            }

        }
    });

    getContentPane().add(pn);
    setSize(400, 400);
    setLocationRelativeTo(null);
    setVisible(true);
}

private void addDefaultStyle(JTextPane pn){
    Style style = pn.addStyle("default", null);

    pn.setForeground(Color.blue);
    pn.setBackground(Color.WHITE);

    StyleConstants.setForeground(style, pn.getForeground());
    StyleConstants.setBackground(style, pn.getBackground());
    StyleConstants.setBold(style, false);
}

private void addNumberStyle(JTextPane pn){
    Style style = pn.addStyle("numbers", null);

    StyleConstants.setForeground(style, Color.PINK);
    StyleConstants.setBackground(style, Color.WHITE);
    StyleConstants.setBold(style, true);
}

public static void main(String args []){
    new Example();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:04:58.493

*   [KeyListener](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)不是为 Swing JComponents 指定的，也不是为[JTextComponents指定的](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html)

*   对于[JTextComponent](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html)，您可以查看[DocumentListener](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)

*   Oracle 教程包含[JTextPane 和 StyledDocument](http://docs.oracle.com/javase/tutorial/uiswing/components/editorpane.html)

*   看看[荧光笔](https://stackoverflow.com/a/9022901/714968)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T01:08:18.553

1.  为什么会变黑？
    *   它应该。`1a2`不是有效的整数。它会在短时间内变为粉红色，因为您的格式仅在事件之后发生。当您在粉红色字符之间书写时，您的文本将是粉红色的（直到您更改它）。

其他要点：

*   由于您只需要格式化数字，因此无需将“默认”样式应用于其他已经“默认”的字符。
*   在我的解决方案中，我按数字计算。如果您想要整数（其中“1a2”将为假），请继续使用 StringTokenizer。只要知道句尾有数字，就不会匹配 - `I am 12.`。

代码：

```
public void keyReleased(KeyEvent arg0) {
    applyStyle();
}

public void applyStyle() {
    String text = pn.getText();
    pn.getStyledDocument().setCharacterAttributes(0, text.length(), pn.getStyle("default"), true);

    char[] textChar = text.toCharArray();
    for(int i=0, len=textChar.length; i<len; i++){
        if(Character.isDigit(textChar[i]))
            pn.getStyledDocument().setCharacterAttributes(i, 1, pn.getStyle("numbers"), true);
    }
} 
```

或者，我会使用 a`DocumentListener`而不是 a `KeyListener`。

```
public class SmartTextPane extends JTextPane implements DocumentListener{

    public SmartTextPane(){ 
        super();
        this.getDocument().addDocumentListener(this);
    }

    public void changedUpdate(DocumentEvent e){ 
        applyStyle();
    }
    public void insertUpdate(DocumentEvent e){} 
    public void removeUpdate(DocumentEvent e){}

    //define your style functions
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-18T13:43:53.460

我遇到了几乎相同的问题，我在其中突出显示并做了类似 `inputTextDocModel.setCharacterAttributes(0, inputTextDocModel.getLength() + 1, styleNormal, true);`将突出显示的字符切换为正常的操作。但这实际上将适用于现有字符，但不适用于插入符号的属性。所以新角色仍然出现“突出显示”，尽管我已经将所有设置为“正常”。

我做了类似以下的事情，它覆盖了 DocumentFilter 中的 replace()

```
public void replace(DocumentFilter.FilterBypass fb, int offset, int length, String text, AttributeSet attrs)
            throws BadLocationException {
 // styleNormal is the 'normal' Style, styleMarked is the 'highlighting' style

     inputTextDocModel.setCharacterAttributes(0, inputTextDocModel.getLength() + 1, styleNormal, true);
     super.replace(fb, offset, length, text, styleNormal.copyAttributes());

  // this is to make sure the caret update its style from 'highlighter' to 'normal' - 
  // assume variable 'editorkit' assigned as StyledEditorKit and has been assigned to the component 
  // by textcomponent.setEditorKit(editorkit)

     editorkit.getInputAttributes().removeAttributes(styleMarked.getAttributeNames());
} 
```

我希望这个“解决方案”有所帮助

* * *

更新：实际上我们可以简单地使用 StyledEditorKit 来检索和修改插入符号的属性并删除突出显示属性。所以我更新了上面实现正确解决方案的代码。

# android - 在 GLES 2.0 中查询活动制服和顶点属性

> ID：12557174
> 
> 赞同：2
> 
> 时间：2012-09-23T23:31:03.367
> 
> 标签：android, xamarin.android, opengl-es-2.0, opentk

尝试将我的游戏引擎从 PC 移植到 Android 时，我遇到了几个 OpenGL 函数的障碍，这些函数的工作方式不同，文档中没有任何内容有助于理解原因。

问题出现在着色器程序中，在 PC 上，我通过 OpenGL 查询属性和制服以构造一个键控集合，以便轻松自动传递常用参数。

在 PC 上，我使用以下函数来构造键控集合：

```
void LoadUniforms()
    {
        int activeUniforms;
        GL.GetProgram(m_ID, ProgramParameter.ActiveUniforms, out activeUniforms);
        for (int i = 0; i < activeUniforms; i++)
        {
            int size;
            ActiveUniformType type;
            string name = GL.GetActiveUniform(m_ID, i, out size, out type);
            ShaderUniform uniform = null;

            uniform = new ShaderUniform(this, name, size, type);
            if (uniform != null)
                m_uniformParameters.Add(uniform);
        }
    } 
```

我尝试将其转换为 OpenTK 的 GLES 2.0，如下所示，maxLength 和 activeUniforms 始终为 0。

```
void LoadUniforms()
    {
        int length = 0;
        int maxLength = 0;
        GL.GetProgram(m_ID, All.ActiveUniformMaxLength, ref maxLength);

        int activeUniforms = 0;
        GL.GetProgram(m_ID, All.ActiveUniforms, ref activeUniforms);
        for (int i = 0; i < activeUniforms; i++)
        {
            All type = All.None;
            int size = 0;
            string name = string.Empty;
            GL.GetActiveUniform(m_ID, i, maxLength, ref length, ref size, ref type, name);

            ShaderUniform uniform = new ShaderUniform(this, name, size, (ShaderUniformType)type);
            if (uniform != null)
                m_uniformParameters.Add(uniform);
        }
    } 
```

于是我继续尝试 Android.Opengl 怀疑可能是 OpenTK 的 GLES 2.0 接口不完整，但仍然是同样的问题。

所以现在我只剩下这个问题了。我是否错过了编译和链接着色器程序以及能够查询活动制服之间的一些步骤？尝试查询活动属性时也会出现完全相同的问题（对于最大长度和计数，始终为 0）。

我用来测试它的顶点着色器如下。

```
uniform mat4 World;
uniform mat4 View;
uniform mat4 Projection;

attribute vec3 Posiiton;
attribute vec2 TexCoord;

varying vec2 TexCoord0;

void main()
{
    mat4 worldViewProject = Projection * View * World;
    vec4 pos = vec4(Position, 1);
    pos *= World;
    pos *= View;
    pos *= Project;
    gl_Position = pos;
    TexCoord0 = TexCoord;
} 
```

在被我习惯的更自动的方法所破坏后，我真的很讨厌必须检查游戏使用的每一个着色器并手动绘制参数。所以我真的希望这只是我错过的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T22:03:44.897

嗯，我想通了，有点。我为处理#include 语句而设置的预处理器在文件中插入了一个过多的引号，从而生成了一个 EOL/EOF 异常，由于某种原因，直到我逐行执行执行时才抛出该异常。一旦我修复了由于我忽略的拼写错误而开始在着色器上出现编译错误，之后它就像 PC 版本一样工作。

# node.js - 我应该为我的 nodejs 应用程序使用 socket.io 吗？

> ID：12557177
> 
> 赞同：0
> 
> 时间：2012-09-23T23:31:12.503
> 
> 标签：node.js, socket.io, nowjs-sockets

我正在学习 HTML5，并通过使用 Express、PassportJS、Mongoose/MongoDB、connect-mongoose、NowJS 构建一个简单的聊天室来做到这一点。

一切都很完美，除了一个大问题：我在验证 NowJS 时遇到问题。

通常的做法是在服务器端读取“this.user.cookie”属性并解析字符串。但是，由于某种原因，cookie 不会被发送回服务器。（此处的详细信息：[this.user 中的 NowJS cookie 字段为空](https://stackoverflow.com/questions/12555626/nowjs-cookie-field-in-this-user-is-empty)）经过大量谷歌搜索后，我认为我没有其他安全的方法来验证 NowJS 连接/客户端。

**问题**

我正在考虑从我的网络应用程序中剥离所有 NowJS，并直接使用 socket.io。socket.io 使用起来容易吗？如果我切换到 socket.io 而不是使用 NowJS，我会失去关键功能吗？

我可以使用 socket.io 来：

1）调用服务器端函数？

2) 与客户端共享服务器端变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T23:59:59.297

Socket.io 不共享变量或允许您调用服务器端函数。它允许您在客户端和服务器端绑定和发出事件。

至于你的cookie没有被发送，它很可能被认为是一个cors，跨域请求，如果你为socket.io使用不同的端口然后设置cookie的http服务器可能会发生这种情况。

# css - 添加 iFrame 模块弄乱了我的 ContentPanes 样式

> ID：12557178
> 
> 赞同：0
> 
> 时间：2012-09-23T23:31:30.433
> 
> 标签：css, module, dotnetnuke

自从我将 iFrame 模块添加到我的网站后，我的主要 ContentPanes 样式发生了变化。

更改包括主 ContentPane 的填充丢失，并且仅在某些页面上我丢失了主 ContentPane 的背景颜色（它应该是灰色但它是透明的）。我没有编辑这些单独的页面，所以我认为是因为 iFrame 模块？

**为什么会发生这种情况？如何将我的填充和背景颜色读取到主内容窗格，而无需编辑每个单独的页面？**

*注意：我已经删除了 iframe 模块，但这并没有修复 ContentPane 的错误。*

**编辑：** [链接到填充错误](http://www.exds.com.au/)（现在注意“2012 年 12d 模型技术移民培训”Div 如何没有填充）
**编辑：** [链接到背景错误](http://www.exds.com.au/Support/64bitcomputersWindows7and12dModel.aspx)（注意“64 位计算机、Windows7 和 12d 模型”如何没有灰色 BK）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T00:44:35.347

在第一个示例中，CSS 中没有填充 - 您必须将填充实际应用于模板。看起来您正在为此使用内联样式？所以只要给它`style="padding:20px;"`或任何你想要的东西。

在第二个中，缺少背景样式。在第一个上，它有`style="background-color:#f3f3f3;"`- 你只需要应用同样的东西。

# c# - 从没有索引的 TabControl 中删除选项卡

> ID：12557179
> 
> 赞同：0
> 
> 时间：2012-09-23T23:31:30.253
> 
> 标签：c#, indexing, tabcontrol

我正在尝试从`TabControl`选项卡索引不是指定索引的位置删除所有选项卡。

到目前为止我有这个：

```
for (int i = tabcontrolOptions.TabCount - 1; i >= 0; i--)
{
    if (i != tabNo)
    {
        tabcontrolOptions.TabPages.RemoveAt(i);
    }
} 
```

但这会删除所有选项卡，而不是指定的 tabNo。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T23:38:36.880

~~当您删除一个选项卡时，这些选项卡会被重新索引~~。实际上，您正在做的事情不应该受此影响。但是无论如何尝试以下方法，也许它会有所帮助。

显式引用选项卡对象，而不是按索引：

```
var tabToKeep = tabcontrolOption.TabPages[tabNo];
for (int i = tabcontrolOptions.TabCount - 1; i >= 0; i--)
{
    if (tabcontrolOption.TabPages[i] != tabToKeep)
    {
        tabcontrolOptions.TabPages.RemoveAt(i);
    }
} 
```

# javascript - *something* if *expression* JavaScript (FF) 中的语法

> ID：12557180
> 
> 赞同：10
> 
> 时间：2012-09-23T23:31:44.020
> 
> 标签：javascript, ecmascript-harmony

我看到一些例子表明 Firefox 支持某种 JavaScript 语法，如`*something* if *expression*;`.

作为我正在谈论的示例，请参阅[此 MDN 文章](https://developer.mozilla.org/en-US/docs/JavaScript/New_in_JavaScript/1.7#Array_comprehensions_(Merge_into_Array_comprehensions))，其中包含以下示例：

```
var evens = [i for each (i in range(0, 21)) if (i % 2 == 0)]; 
```

我的问题是：

**用什么名字来描述这种语法？**我主要想知道这一点，以便我可以谷歌它并阅读更多关于它的信息。我已经尽我所能尝试谷歌搜索，但无法将正确的术语放在一起以获得有用的结果。

**这种语法可以存在于数组理解之外的其他地方吗？**我觉得我已经看到了在数组之外使用的其他示例（例如上面的示例），但我不确定。

**在哪里可以阅读有关此语法的更多信息？**

**除了火狐还有其他浏览器支持吗？**

**这个特性是 ES5 中的还是计划用于 ES-harmony 的？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T00:05:48.297

正如其他人所指出的，这称为“数组理解”，它是为 ECMAScript Harmony 建议的众多功能之一：

[http://wiki.ecmascript.org/doku.php?id=harmony:array_comprehensions](http://wiki.ecmascript.org/doku.php?id=harmony:array_comprehensions)

然而，与几乎所有 Harmony“功能”一样，我认为它是否会真正包含在最终版本中并没有任何真正的概念。你可以在 Firefox 中使用它作为“JavaScript 1.7”的一部分（一个模糊的~~“标准”~~规范，~~真的~~仅适用于基于 Mozilla 的东西）；但是，最好避免使用 FF 特定的语法，特别是当它会在其他浏览器中导致语法错误时。

您可以通过在 Google 上搜索“Array Comprehensions”来了解更多相关信息，但正如我所提到的，由于它是 Mozilla 特有的，它并不是一个非常有用的工具。

`reduce()`使用ES5 中引入的 Array 方法，无需更多代码即可实现类似的效果：

```
//JavaScript has no "range" function, so let's make one
var range = function (begin, length) { 
    var i, ret = [];
    for (i = begin; i < begin + length; i++) {
        ret.push(i);
    }
    return ret;
};

var evens = range(0, 21).reduce(function (arr, cur) { 
    if (cur % 2 === 0) arr.push(cur);
    return arr; 
}, []); 
```

与您要查找的内容相比，这可能有点冗长（即使记住我们必须创建一个`range()`函数）。但这是一个相对紧凑的解决方案，不需要大量“设置”，主要解决问题：从一个数组中过滤元素以形成第二个数组。

我能够将其简化为单行版本，但维护起来有点笨拙，因此我决定建议改为两行版本。如果您对单线感兴趣，这里是：

```
//Don't forget to define "range()"
var evens = range(0, 21).reduce(function (arr, cur) { 
    return (cur % 2 === 0) ? (arr.push(cur) && arr) : arr; 
}, []); 
```

同样，这是 ES5 代码。如果您希望它在较旧的浏览器中工作，您需要提供一个 shim 来支持`Array.reduce()`. MDN 这里有一个：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce)

**更新：**

看起来我应该使用`filter()`而不是`reduce()`. 使代码更干净。感谢OP的建议！

```
var evens = range(0,21).filter(function (cur) { return cur % 2 === 0; }); 
```

同样，`filter()`是 ES5，因此您需要一个 shim 以确保它在旧浏览器上正常运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T23:35:29.143

这种类型的语句称为[列表推导](http://en.wikipedia.org/wiki/List_comprehension)。[Python](http://en.wikipedia.org/wiki/List_comprehension#Python)有很好的例子，语法非常相似。

# css - DOMPDF 中没有内联 CSS

> ID：12557183
> 
> 赞同：1
> 
> 时间：2012-09-23T23:32:27.340
> 
> 标签：css, dompdf

我正在使用 DOMPDF 构建购物车数据库条目的下载报告。

不知道在这里放什么代码，这是一个非常典型的html页面，带有一些foreach循环来显示内容，它可以很好地创建pdf，但是文件中的css都没有呈现为css，它被打印为文本在文档的顶部。

CSS 内联在文档的头部，就像任何普通的内联 CSS 一样。

```
$export_pdf ="<html><head>";
$export_pdf .="<meta http-equiv='Content-Type' 
                 content='text/html; charset=utf-8' />";
$export_pdf .="<style type='text/css'>
     .list {
     border-collapse: collapse;
     width: 100%;
     border-top: 1px solid #DDDDDD;
     border-left: 1px solid #DDDDDD;    
     font-family: Arial, Helvetica, sans-serif;
     font-size: 12px;
}
.list td { border-right: 1px solid #DDDDDD; border-bottom: 1px solid #DDDDDD; }
.list thead td { background-color: #E5E5E5; padding: 3px; font-weight: bold; }
.list tbody a { text-decoration: none; }
.list tbody td { vertical-align: middle; padding: 3px; }
.list .left { text-align: left; padding: 7px; }
.list .right { text-align: right; padding: 7px; }
table .interior,
table .interior td { border: none !important; }
table .interior tr { border-bottom: #DDD 1px solid !important; }
.list tbody .interior thead td { background: #efefef !important; }
</style>"; 
```

然后只是一个基本表等。

我找不到其他人对内联 css 有这个问题。我看过一些帖子，人们很难让链接样式工作，但这是简单的内联 css，为什么它被解释为文本而不是 css？

谢谢。

-文斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:47:45.597

As weird as it appears, it is due to the simple quotes in the `<meta>` tag. Replace them by escaped double quotes and it will work. Could you report this issue in the [issue tracker](http://code.google.com/p/dompdf/issues/list) please ?

# python - making the Python function default value be evaluated each time the function is called

> ID：12557201
> 
> 赞同：2
> 
> 时间：2012-09-23T23:36:12.357
> 
> 标签：python, function

How can I make a Python function default value be evaluated each time the function is called? Take this dummy code:

```
b=0
def a():
    global b
    return b

def c(d=a()):
    return d 
```

What I would expect as output:

```
>>> c()
0
>>> b=1
>>> a()
1
>>> c()
1 
```

What I actually get:

```
>>> c()
0
>>> b=1
>>> a()
1
>>> c()
0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T23:56:30.520

One more solution, in closer resemblance to your original answer.

```
b = 0
def a():
    return b

def c(d=a):    # When it's a parameter, the call will be evaluated and its return 
               # value will be used. Instead, just use the function name, because
    return d() # within the scope of the function, the call will be evaluated every time. 
```

When a function name is paired with the parentheses and its parameters, like `f(x)`, it is assumed your intention is to call it at that time

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T23:40:40.453

d=a() is evaluated at ~~start of program~~ when function c is defined (ie a() gets called while it returns 0 ...)

```
def c(d=None):
    if d == None: d=a()
    return d 
```

will cause it to be evaluated at the time you want

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T23:41:18.310

The problem here is, as you probably already know, that the `d=a()` (default argument assignement) is evaluated when the function is defined.

To change that, it is pretty common to use eg. `None` as default argument and evaluate it in the body of the function:

```
b=0
def a():
    global b
    return b

def c(d=None):
    if d is None:
        d = a()
    return d 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-23T23:53:24.940

I'll give a slight variation on the above:

```
b = 0

def a():
    # unless you are writing changes to b, you do not have to make it a global
    return b

def c(d=None, get_d=a):
    if d is None:
        d = get_d()
    return d 
```

# c++ - C++回文程序

> ID：12557202
> 
> 赞同：0
> 
> 时间：2012-09-23T23:36:13.423
> 
> 标签：c++, header, palindrome

我发现自己对这个家庭作业感到奇怪的困惑。这个想法是创建一个回文程序，使用教授希望我们使用的特定标题，但由于某种原因，当我运行它时，就在我输入短语之后程序崩溃了。

这是程序

```
#include   <iostream>
#include   <ctime>
#include   "STACK.h"
using namespace std;

int main(void)
{
// Declare variables
time_t          a;
STACK<char, 80>     s;
STACK<char, 80>     LR;
STACK<char, 80>     RL;
char            c;
char            c1;
char            c2;

// Displays the current time and date
time(&a);
cout << "Today is " << ctime(&a) << endl;

// Prompts the user to enter the string
cout << "Enter a phrase: ";
while(cin.get(c) && (c != '\n'))
{

    if(isalpha(c)) 
    {
        c = toupper(c); 
        LR.PushStack(c);
        s.PushStack(c);
    }

}

// Copies s into RL in reverse order
while(!(s.EmptyStack() ) )
{
    c = s.PopStack();
    RL.PushStack(c);
}

// Checks for Palindrome
while(!(LR.EmptyStack() ) )
{
    c1 = LR.PopStack();
    c2 = RL.PopStack();

    if( c1 != c2) 
    {
    break;
    }
}

// Displays the result
if(LR.EmptyStack() )
{
    cout << "Palindrome";
}
else
{
    cout << "Not a Palindrome";
}

return 0;
} 
```

这是标题（我不允许更改它）

```
#ifndef STACK_H
#define STACK_H
template <class T, int n>
class STACK
{ private: T a[n];
    int counter;
  public:
     void  MakeStack() { counter = 0; }
 bool  FullStack()
    { return (counter == n) ? true : false ; }
 bool EmptyStack()
     { return (counter == 0) ? true : false ; }
 void  PushStack(T x)
     { a[counter] = x; counter++; }
 T PopStack()
     { counter--; return a[counter]; }
};
    #endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T23:38:52.217

您没有调用`MakeStack`，这将设置 STACK 初始大小 (0)。

# java - 为 Charset.forName(String) 编码 CharsetNames

> ID：12557208
> 
> 赞同：8
> 
> 时间：2012-09-23T23:36:50.117
> 
> 标签：java, character-encoding

我有一个关于 Charset.forName(String charsetName) 的问题。有我可以参考的 charsetNames 列表吗？例如，对于 UTF-8，我们使用“utf8”作为 charsetName。WINDOWS-1252、GB18030等呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-12T11:09:24.583

```
字符集描述

US-ASCII 七位 ASCII，又名 ISO646-US，又名 Unicode 字符集的基本拉丁语块
ISO-8859-1 ISO 拉丁字母 No. 1，又名 ISO-LATIN-1
UTF-8 八位 UCS 转换格式
UTF-16BE 十六位 UCS 转换格式，大端字节序
UTF-16LE 十六位 UCS 转换格式，little-endian 字节顺序
UTF-16 十六位 UCS 转换格式，由可选字节顺序标记标识的字节顺序

```

参考：[http ://docs.oracle.com/javase/7/docs/api/java/nio/charset/Charset.html](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/Charset.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-30T16:16:56.377

[Java 中的字符集名称取决于平台， StandardCharsets](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/StandardCharsets.html)类中只有 6 个常量。

要查看所有字符集，您应该查看[IANA](http://www.iana.org/assignments/character-sets)。检查首选 MIME 名称和别名列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-11T17:10:20.607

要列出 JVM 中安装的所有字符集，您可以使用以下代码片段（Java 8 SE 或更高版本）：

```
SortedMap<String, Charset> map = Charset.availableCharsets();
map.keySet().stream().forEach(System.out::println); 
```

在我的系统上，这列出了大约 170 个字符集。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-03T10:18:54.067

java Charset 库只*需要*接受一些基本编码：ASCII、Latin-1 (ISO-8859-1) 和一些 UTF 变体，您可以在[此答案](https://stackoverflow.com/a/18762605/699305)中看到这些变体。对于任何实际目的而言，这都是一个非常无用的列表，除非您的范围仅限于 Latin-1。实际上，Java 类可以处理大量编码，您可以在[Supported Encodings](https://docs.oracle.com/javase/8/docs/technotes/guides/intl/encoding.doc.html)页面中了解这些编码。引用它：

> 包中的`java.io.InputStreamReader`、`java.io.OutputStreamWriter`、`java.lang.String`classes 和 classes`java.nio.charset`可以在 Unicode 和许多其他字符编码之间进行转换。支持的编码因 Java SE 8 的不同实现而异。类描述`java.nio.charset.Charset`列出了 Java SE 8 的任何实现都需要支持的编码。
> 
> **适用于所有平台（Solaris、Linux 和 Microsoft Windows）的 JDK 8 和适用于 Solaris 和 Linux 的 JRE 8 支持此页面上显示的所有编码。**JRE 8 for Microsoft Windows 可以作为完整的国际版本或欧洲语言版本安装。[...]

[页面](https://docs.oracle.com/javase/8/docs/technotes/guides/intl/encoding.doc.html)的其余部分包含一个包含编码名称和同义词的扩展表，这就是 OP 多年前的样子......

# php - 在 phpmyadmin 中自动导入 csv 文件

> ID：12557212
> 
> 赞同：0
> 
> 时间：2012-09-23T23:37:07.433
> 
> 标签：php, csv, phpmyadmin

我得到了每隔几秒钟更新一次的 csv 文件，我想将 csv 文件自动导入到 phpmyadmin 表中。

这些行，作为 sql 查询，执行以下操作，但仅执行一次：

```
TRUNCATE windUpdates;
LOAD DATA LOCAL INFILE "~/www/csvs/wtt.csv" INTO TABLE windUpdates FIELDS TERMINATED BY ',' ; 
```

如何每 10 分钟自动运行这些线路？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T00:11:43.327

我只需编写简单的脚本来读取 CSV 文件，每行生成 SQL 查询，然后在 mysql 服务器上运行它。不需要 PhpMyAdmin - 只需几行代码。

（不是我的博客，也没有测试过，但这[看起来是个不错的起点](http://www.johnboy.com/blog/tutorial-import-a-csv-file-using-php-and-mysql)）

一旦你有了工作脚本（你可以通过浏览器访问它来测试和完善它），你只需使用[bluehosts 说明](https://my.bluehost.com/cgi/help/168)在你的托管服务提供商管理面板中设置它：

> 在 cPanel 中，单击 Cron Jobs 图标，然后在 Command 字段中输入以下内容：
> 
> /ramdisk/bin/php5 -c /home/USERNAME/PathTo/php.ini /home/USERNAME/public_html/PathToFile 您可能还想调整指定何时运行 cron 作业的设置。注意：您需要将 USERNAME 替换为您的用户 ID，将 PathToFile 替换为文件名或文件的其余路径。
> 
> 注意：您可能需要根据您的帐户所在的主目录将 /home/ 调整为 /home#/。要查看您帐户的主目录，只需查看您帐户主 cPanel 页面上的 stats 列并查找主目录。
> 
> 注意：要指定要使用的 php.ini 文件，您可以将“-c /home/USERNAME/PathTo/php.ini”添加到 cron 作业条目中。

# php - 找不到类“Geocoder\HttpAdapter\BuzzHttpAdapter”

> ID：12557213
> 
> 赞同：1
> 
> 时间：2012-09-23T23:37:12.250
> 
> 标签：php, laravel, buzz

我[使用](http://geocoder-php.org/)`php composer.phar install`. _ 我在 PHP 框架 Laravel 上运行。

```
Loading composer repositories with package information
Installing dependencies
  - Installing willdurand/geocoder (1.0.10)
    Downloading: 100%

  - Installing kriswallsmith/buzz (v0.7)
    Downloading: 100%

willdurand/geocoder suggests installing guzzle/guzzle (Enabling Guzzle allows you to use the GuzzleHttpAdapter.)
willdurand/geocoder suggests installing zendframework/zend-http (Enabling Zend_Http allows you to use the ZendHttpAdapter)
Writing lock file
Generating autoload files 
```

**路径.php**

```
// --------------------------------------------------------------
// The path to the composer vendors directory.
// --------------------------------------------------------------
$paths['composer'] = 'vendor'; 
```

**公共/index.php**

```
// --------------------------------------------------------------
// Autoload composer vendors.
// --------------------------------------------------------------
require path('composer').DS.'autoload.php'; 
```

**作曲家.json**

```
{
    "require": {
        "willdurand/geocoder": "@stable",
        "kriswallsmith/buzz": "@stable"
    }
} 
```

**问题：**当我尝试在 Geocoder-php 的主页上运行示例时出现以下错误：

**错误：**

```
Class 'Geocoder\HttpAdapter\BuzzHttpAdapter' not found 
```

**发生在：**

```
$adapter  = new \Geocoder\HttpAdapter\BuzzHttpAdapter(); 
```

**目录结构**

![在此处输入图像描述](../Images/fcb43ad559cd89f8303d466f37111492.png)

我已经安装了 Buzz，我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T23:48:52.303

您需要自动加载器才能工作

尝试添加以下内容：

```
require 'vendor/willdurand/Geocoder/autoload.php'; 
```

# java - 使用java将数据从mysql数据库复制到其他mysql数据库

> ID：12557216
> 
> 赞同：2
> 
> 时间：2012-09-23T23:37:46.897
> 
> 标签：java, mysql, performance, jpa, jdbc

我开发了一个小型摇摆桌面应用程序。这个应用程序需要来自其他数据库的数据，因此我使用 java 创建了一个小进程，允许从远程 db 获取信息（使用 jdbc）并将其复制（使用 jpa）到本地数据库，问题是这个过程需要很多时间。有没有其他方法可以加快这项任务？

如果我不清楚，请告诉我，我不是母语人士。

谢谢

迭戈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T23:48:10.097

一个不错的选择是使用 MySQL 中的复制功能。请参阅[此处](http://dev.mysql.com/doc/refman/5.0/en/replication.html)的 MySQL 手册以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T23:50:30.340

**JPA**不太适合这里，因为对象关系映射成本很高，而且这是批量数据传输。在这里您可能也不需要**数据库复制**。

也许[备份](http://dev.mysql.com/doc/refman/5.5/en/backup-methods.html)是一种解决方案：那里列出了几种不同的方法。

通常，也可以在 cron 任务上执行 mysqldump（例如在表上）压缩转储并检索它。

# objective-c - UIView 子类在调用 UIView+Category 方法时抛出“找不到选择器”

> ID：12557219
> 
> 赞同：4
> 
> 时间：2012-09-23T23:38:28.667
> 
> 标签：objective-c, ios, cocoa

我有 UIView 的子类 MyView。我在 UIView 上也有一个名为 UIView+simpleCategory 的类别。

该类别声明了一个方法 doSomething

```
@interface UIView (simpleCategory)

- (void) doSomething;

@end 
```

我在从 UIView 子类 MyView 调用 doSomething 方法时遇到问题。我收到“选择器无法识别”错误。我想知道我需要做什么才能让子类识别其超类的类别方法。

在我的 UIView 子类的实例上调用 UIView 类别方法时会出现问题：

```
MyView *view = [[MyView alloc] init];
[view doSomething];        // throws selector not found error here 
```

我想知道我是否在某处缺少#import，但我想了解类别和子类之间的关系。

解决方案 ：：

显然我的实现很好。我只需要将类别添加到应用程序目标。我通过单击项目导航器中的类别来完成此操作。然后我单击实用程序视图（从窗口右侧滑出的视图）并选中文件检查器菜单中的“目标成员身份”复选框。这就是所有需要做的事情。感谢大家的回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T00:43:43.503

您的项目正在查找声明 UIView 类别的头文件 - 否则您会收到编译时警告。

但是在运行时，它没有找到类别方法。检查你的 UIView 类别实现文件，看看它进入了哪些目标。我打赌它不包含在您的主要目标中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T00:22:57.593

好吧，这就是我为测试它所做的，它奏效了。

类别：

```
@interface UIView (simpleCategory)

-(void)doSomething;

@end

@implementation UIView (simpleCategory)

-(void)doSomething {
    NSLog(@"Doing something");
} 
```

我创建了一个 UIView 子类 MyView，除了导入类别之外我没有添加任何代码：

```
#import <UIKit/UIKit.h>
#import "UIView+simpleCategory.h"

@interface MyView : UIView

@end 
```

然后在我的视图控制器 viewDidLoad 方法中：

```
MyView *view = [[MyView alloc] init];
[view doSomething]; 
```

# python - 在 Python 中使用多个正则表达式或更大的正则表达式进行替换

> ID：12557222
> 
> 赞同：6
> 
> 时间：2012-09-23T23:38:46.967
> 
> 标签：python, regex

我最近切换到 Python 并且我有兴趣通过删除一些特定的标签或其他一些字符串模式来清理大量的网页（大约 12k）（但可以被视为简单的文本文件）。为此，我在 Python 中使用了 re.sub(..) 函数。

我的问题是（从效率的角度来看）创建一个与我的更多模式匹配的大正则表达式或者使用更小更简单的正则表达式多次调用该函数是否更好。

举例来说，使用类似的东西会更好吗

```
 re.sub(r"<[^<>]*>", content)
 re.sub(r"some_other_pattern", content) 
```

或者

```
 re.sub(r"<[^<>]*>|some_other_pattern",content) 
```

当然，为了举例说明前面的模式非常简单，我没有在这里编译它们，但在我的实际场景中我会编译它们。

LE：这个问题与文件的 HTML 特性无关，而是与 Python 在处理多个正则表达式模式时的行为有关。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T23:59:25.910

把事情简单化。

我会说使用较小的正则表达式来解析这些东西会更安全。至少这样，如果它表现异常，你就不必去挖掘庞大的正则表达式的哪个特定部分表现得很奇怪。如果您对所做的替换有良好的日志记录，那么确定问题的根源（如果出现）将是微不足道的。

你不想遇到[这个](http://www.ex-parrot.com/pdw/Mail-RFC822-Address.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T06:38:30.437

一般来说，“顺序”和“并行”应用程序是不一样的，可能会产生不同的结果，因为顺序替换会相互影响。

至于性能，我猜一个表达式会表现得更好，但这只是一个猜测。为了便于阅读，我个人更喜欢保持复杂并使用“详细”模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T21:48:38.743

我理解您关于“我正在清理的非 HTML 部分”的附加评论。由于后一个 RE 可能会查找和替换较早 RE 替换的内容，因此最好使用“替代”运算符并使用单个 RE。

此外，考虑使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)加载和检查您的 HTML 文件。当您只是打算替换某些文本时，这将有助于找到文本的适当部分，而捕获某些 HTML 结构的风险要小得多。

# c4 - c4框架中的音频播放（c4iOS

> ID：12557227
> 
> 赞同：1
> 
> 时间：2012-09-23T23:40:15.920
> 
> 标签：c4

c4iOS 框架的新用户。通过教程/示例以我的方式工作 - 想知道如何播放音频（与示例文本中介绍的视频相反）。

提前感谢您回答我的“n00b”问题

-jf

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:55:15.390

音频样本与电影对象非常相似，尽管它们没有这样的选项`shouldAutoplay`，可以让它们在应用程序加载后立即运行。

构建样本的最简单方法是这样的：

```
@implementation C4WorkSpace {
    C4Sample *audioSample;
}

-(void)setup {
    audioSample = [C4Sample sampleNamed:@"C4Loop.aif"];
} 
```

它将音频样本对象构建为一个变量，然后您可以在其他方法中引用该变量。例如，如果您想在第一次触摸屏幕时播放声音片段，您可以执行以下操作：

```
-(void)touchesBegan {
    [audioSample play];
} 
```

要切换每次触摸的播放，您可以执行以下操作：

```
-(void)touchesBegan {
    if(audioSample.isPlaying) {
        [audioSample stop];
    } else {
        [audioSample play];
    }
} 
```

可以在[此处](https://gist.github.com/3774225)找到切换播放的 C4 应用程序的工作副本。

音频样本还有很多属性，可让您控制播放速率、音量、平移等。

更改音量的示例如下：

```
audioSample.volume = 0.5; //0 = mute, 1 = full volume 
```

跳到样本中特定时间的示例如下：

```
audioSample.currentTime = 1.0f; //this will put the "playhead" to 1.0 second 
```

您可以查看[C4Sample 文档](http://www.c4ios.com/docs/Classes/C4Sample.html)以了解该类的更多属性和其他方面。该文档也可以通过 Xcode 管理器获得。

# wxwidgets - 单独线程上的 GUI 对话框

> ID：12557236
> 
> 赞同：0
> 
> 时间：2012-09-23T23:41:42.980
> 
> 标签：wxwidgets

在单独的线程上运行 wxWidget 的常用对话框时是否有任何对象？我正在开发一个浏览器插件，所以我需要在主浏览器线程之外进行冗长的操作。

我做了一个小测试，它似乎有效，但出现警告：

....\src\msw\dirdlg.cpp(333)：“CoCreateInstance(CLSID_FileOpenDialog)”失败，错误为 0x800401f0（尚未调用 coInitialize。）。

这是否意味着我必须调用 wxApp::Initialize(...) 或其他一些函数？

谢谢，克里斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T00:06:01.630

您只需要在使用 COM的[每个线程中调用](http://www.go4expert.com/forums/showthread.php?t=784)[CoInitialize() 。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms678543%28v=vs.85%29.aspx)因此，在创建通用对话框对象之前，只需调用 CoInitialize() （每个线程一个）并在线程结束时调用[CoUninitialize()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms688715%28v=vs.85%29.aspx)。

对于主线程 wxWidgets 在内部执行此操作。对于其他线程，您需要手动调用这些函数。它通常与 GUI 无关，但与 wxWidgets 内部使用的 COM 对象有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:01:30.103

是的，有“反对意见”

> **多线程应用程序的重要说明**
> 
> 在编写多线程应用程序时，强烈建议没有辅助线程调用 GUI 函数。

[http://docs.wxwidgets.org/trunk/overview_thread.html](http://docs.wxwidgets.org/trunk/overview_thread.html)

# javascript - 删除第 4 个空格后的字符串的所有字符

> ID：12557238
> 
> 赞同：3
> 
> 时间：2012-09-23T23:41:46.690
> 
> 标签：javascript, regex

我正在寻找一种方法来使用 javascript 中的正则表达式删除字符串中的第 4 个空格。

示例：“2012 年 9 月 19 日星期三 08:05:07 GMT-0700 (PDT)”转换为“2012 年 9 月 19 日星期三”

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-23T23:42:55.067

```
var s = "Wed Sep 19 2012 08:05:07 GMT-0700 (PDT)";
s.split(' ').slice(0, 4).join(' '); 
```

一步步：

```
> s.split(' ')
["Wed", "Sep", "19", "2012", "08:05:07", "GMT-0700", "(PDT)"]
> s.split(' ').slice(0, 4)
["Wed", "Sep", "19", "2012"]
> s.split(' ').slice(0, 4).join(' ')
"Wed Sep 19 2012" 
```

或者删除`slice`并使用`limit`参数 of[`split()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)代替：

```
var s = "Wed Sep 19 2012 08:05:07 GMT-0700 (PDT)";
var newValue = s.split(' ', 4).join(' '); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T23:47:35.453

你真的需要正则表达式吗？这是一个非常标准化的日期字符串... 3 个字符的工作日、3 个字符的月份、2 个字符的日期、4 个字符的年份...唯一的问题是天数是否用零填充。

```
str.substring(0,15); 
```

如果没有填充天数，那么如果第 15 个字符是空格，则取 14 个字符。不然上面的就好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T23:55:30.657

下面从字符串中删除第四个空格（以及它后面的所有内容）：

```
text = text.replace(/^((?:[^ ]* ){3}[^ ]*) [\S\s]*/, "$1"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T23:58:55.297

虽然正则表达式不是最好的，但您可以这样做：

```
var string = "Wed Sep 19 2012 08:05:07 GMT-0700 (PDT)";
var regex = /^((\S+\s*?){4})(\s+.*)$/;
var stripped = string.replace(regex, "$1"); 
```

这是匹配4个非空格的情况，然后是空格，然后是行尾的任何内容。替换使用第一个匹配项并忽略其余部分。

第一`\s`组内部是惰性匹配的，因此会自动去除结尾空格。不幸的是，这会使正则表达式变慢，但在典型输入上不会明显。

但是，如果您实际上是在尝试解析 ISO 标准日期字符串，那么 paddy 是正确的，您应该截断结尾。你也可以按照 Joao 的建议做更多的正常处理。

请记住，大多数时候，正则表达式可能不是您想要的。它们实际上是相当粗糙的工具......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T06:34:58.903

我觉得如果我们使用正则表达式搜索模式并从该点截断字符串会更好。

```
var str = "Wed Sep 19 2012 08:05:07 GMT-0700 (PDT)";
var regEx = new RegExp("\\s\\d+\\:"); // pattern match for ' dd:'
var truncatedStr = str.substring(0, str.search(regEx)); 
```

我们知道我们不想要时间之前的字符串。因此，我们将创建一个正则表达式来匹配“dd:”的时间模式。现在，如果我们使用 str.search(regEx)，它将返回模式的起始索引。在这种情况下为 15。因此，在主字符串上取一个从 0 到 15 的子字符串将返回“2012 年 9 月 19 日星期三”所需的结果。

# c# - 如何使用着色器勾勒正交几何

> ID：12557241
> 
> 赞同：1
> 
> 时间：2012-09-23T23:42:38.247
> 
> 标签：c#, graphics, xna, directx, shader

我最近才开始学习着色的艺术，但是当受限于单个顶点/像素着色器技术（感谢 XNA）时，我无法为 2D、凹几何体提供轮廓宽度。

**我需要给出轮廓的形状具有平滑的逐顶点着色以及不透明度。具有平滑、逐顶点着色、可变宽度和不透明度的轮廓不会干扰原始形状的颜色。**

像素深度边界检测算法不起作用，因为像素深度不是 3.0 语义。
扩展几何/重绘将不起作用，因为它会干扰原始形状的颜色。

我想知道是否可以在着色器功能之外使用模板/深度缓冲区做一些事情，因为我可以通过图形设备访问它。但我不相信我能够操纵实际值。

**我该怎么做？**

# embedded - 使用链表的调度程序有哪些替代方案？

> ID：12557242
> 
> 赞同：1
> 
> 时间：2012-09-23T23:42:43.530
> 
> 标签：embedded, scheduling

我正在阅读一篇关于[实时内核](http://intranet.daiict.ac.in/~ranjan/esp2005/paper/real_time_esc_240_260.pdf)的文章，作者解释了如何使用链表为任务实现调度程序。他还指出，这不是最好的方法，因为任务是根据优先级插入和删除的；但是，他没有解释其他方法是什么。

除了链表之外，还有哪些实现调度器的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T00:23:03.823

有很多，例如可能是一个双链表，所以为了插入一个低优先级的任务，可以从尾部向后搜索。

您可以在任务列表中使用从数组到 B-Tree 的任何内容来实现计划，您使用哪个取决于您正在计划的内容。

链表，如果它相当短，可能是最佳解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T01:46:22.223

仔细看看队列数据结构。如果每个优先级都有一个队列，则可以从最高优先级的队列开始，一直处理到队列为空，然后进入下一个优先级查询，直到达到所有优先级。

在队列中拥有相同优先级的任务，可以保证每个任务在被扔到（可能是另一个）队列的尾部之前至少获得一个处理量。

当然，对于实时处理，您希望快速响应中断。也许某种优先队列可能适用。

# android - 如何使用 Jquerymobile、PhoneGap 在 Android 中禁用手机的后退按钮

> ID：12557249
> 
> 赞同：5
> 
> 时间：2012-09-23T23:44:35.333
> 
> 标签：android, jquery, cordova, jquery-mobile

有人可以告诉我如何禁用 Android 的后退按钮（这是所有 Android 手机上的后退按钮）。

我正在使用带有 PhoneGap 的 Jquery 手机。我在 Cordova 文档中在线找到了这个，但这对我不起作用。后退按钮事件甚至没有注册。

```
function onLoad() {
    console.log("**** INSIDE ONLOAD FUNCTION *****");
    document.addEventListener("backbutton", onBackKeyDown, false);   
}

// Handle the back button
function onBackKeyDown() {

    // Pressing the back button does not print this message.
    console.log("**************** INSIDE BACK BUTTON *************");
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-24T02:25:51.857

我用过`backKeyDown`，它对我有用：

```
function onDeviceReady() {
        document.addEventListener("backbutton", backKeyDown, true);
        console.log("PhoneGap is ready");
    }

    function backKeyDown(d) {
        navigator.app.exitApp(); // To exit the app!
        e.preventDefault(); // to disable the back
    } 
```

确保`PhoneGap is ready`！

**更新：**您可以将处理程序留空以**禁用它**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-20T05:08:55.380

```
sometimes you can get blocking Back button, sometimes not.

document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady() {
    document.addEventListener("backbutton", function (e) {
        e.preventDefault();
    }, false );
} 
```

# php - PHP - 如何确定 curl_multi 代理连接是否成功？

> ID：12557251
> 
> 赞同：0
> 
> 时间：2012-09-23T23:45:43.860
> 
> 标签：php, curl

我想对代理使用多 cURL，但我不知道如何检查每个代理连接是否成功。使用普通的单个 cURL，我创建了一个简单的循环，只要 curl_errno 不为 0 就可以运行。

但是如何使用多 cURL 制作呢？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T00:35:47.577

在多卷曲上运行查询之前，您可以有一个简单的代理检查器

简单的代理检查器

```
function __proxyChecker($proxy)
{
    $ch = curl_init("http://google.com");
    curl_setopt($ch, CURLOPT_TIMEOUT, 1);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 1);
    curl_setopt($ch, CURLOPT_PROXY, $proxy);
    curl_setopt($ch, CURLOPT_NOBODY, true);
    $handle = curl_exec($ch);
    curl_close($ch);
    return $handle ;
} 
```

用法

```
$proxies = "211.136.10.29:80
88.146.161.215:3128 
211.136.10.29:80 
61.35.0.39:6515 
77.78.197.15:8080
211.161.152.106:80";

$proxies = explode("\n", $proxies);
//shuffle($proxies);
$url = "http://google.com";
$handle = curl_init($url);
curl_setopt($handle, CURLOPT_RETURNTRANSFER, TRUE);

echo "<pre>";
foreach ( $proxies as $proxy ) {
    $proxy = trim($proxy);
    if(empty($proxy))
        continue ;

    if(__proxyChecker($proxy))  
        echo $proxy , " - ok \n";
    else
        echo $proxy , " - bad \n";
} 
```

输出

```
211.136.10.29:80 - ok 
88.146.161.215:3128 - ok 
211.136.10.29:80 - ok 
61.35.0.39:6515 - bad 
77.78.197.15:8080 - bad 
211.161.152.106:80 - ok 
```

# java - 主机是否可能不允许Android获取文件？

> ID：12557253
> 
> 赞同：0
> 
> 时间：2012-09-23T23:45:58.353
> 
> 标签：java, android, connection

我想解析一些外部 XML 文件，为此我需要`InputStream`. 所以我定义并验证了我的网址：

```
String Url = "http://www..............................................xml";
URL validUrl = new URL(Url.toString().trim().replaceAll(" ", "%20")); 
```

然后我尝试了很多变体：首先：

```
object = XmlParser.parseMthod(validUrl.openStream()); 
```

第二：

```
object = XmlParser.parseMthod(validUrl.openConnection().getInputStream()); 
```

第三：

```
URLConnection connection = validUrl.openConnection();
HttpURLConnection httpConn = (HttpURLConnection)connection;
httpConn.setDoInput(true);
httpConn.setRequestProperty("charset", "utf-8");
object = XmlParser.parseMthod(httpConn.getInputStream()); 
```

他们最终`null`以错误描述的形式输出...所以这让我想知道这可能是我的主机的错还是我的模拟器的错？

没有没有忘记包括应用程序的 Internet 权限：

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

大多数时候返回的错误都是空的，但我收到了盎司：

```
android.os.NetworkOnMainThreadException 
```

# c# - 用于 ScintillaNET 的字节数组到文本

> ID：12557254
> 
> 赞同：0
> 
> 时间：2012-09-23T23:46:00.557
> 
> 标签：c#, winforms, bytearray, scintilla

我正在用 C# 编写一个 Windows 窗体应用程序。该应用程序允许用户从列表框中选择源代码文件，并使用 ScintillaNET 以彩色代码显示它们。这些文件在数据库中保存为字节数组。我已经设法从我的硬​​盘驱动器上的文件转换为字节数组并存储它。用户还应该能够编辑代码，然后将其保存到数据库中，而无需先将文件下载到本地硬盘，我不知道如何处理。

基本上我想从 ScintillNET 控件中保存文本并将其转换为字节数组。反过来，获取一个字节数组并打印出最初出现在 ScintillaNET 中的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T00:08:53.450

我相信您正在寻找 System.Text.Encoding 命名空间...

```
 // a sample string...
        string example = "A string example...";

        // convert string to bytes
        byte[] bytes = Encoding.UTF8.GetBytes(example);

        // convert bytes to string
        string str = System.Text.Encoding.UTF8.GetString(bytes); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T00:11:45.790

您可以使用 System.Text 中的“编码”类。

```
System.Text.Encoding.Unicode.GetBytes("Example"); 
```

这将返回一个字节数组，其字节等效于使用 unicode 编码的文本“字符串”。还有其他可用的编码，但我建议使用 unicode，因为它支持更多字符（例如，您在 windows charmap 中找到的任何字符）。就我而言，是因为我是拉丁语，某些字母在 UTF 中不可用，我对 ASCII 有疑问。

现在要将字节数组转换为字符串，请使用：

```
byte[] exampleByteArray = MemStream.ToArray();
System.Text.Encoding.Unicode.GetString(exampleByteArray); 
```

此代码将返回先前保存为内存流中的字节数组的字符串。您可以使用其他方法加载字节数组，在您的情况下，您将从数据库中加载它并调用 System.Text.Encoding.Unicode.GetString()。

# c# - SequenceEqual 为真，但 HashSet.SetEquals 为假

> ID：12557257
> 
> 赞同：2
> 
> 时间：2012-09-23T23:47:03.110
> 
> 标签：c#, linq, set, sequence, equality

我一直在尝试实现 Set 相等性（即，在顺序不相关的情况下列出比较），在阅读了类似[this](https://stackoverflow.com/questions/50098/comparing-two-collections-for-equality)和[this 这样](https://stackoverflow.com/questions/945158/set-equality-in-linq)的 SO 问题后，编写了以下简单扩展：

```
 public static bool SetEqual<T>(this IEnumerable<T> enumerable, IEnumerable<T> other)
    {
        if (enumerable == null && other == null)
            return true;

        if (enumerable == null || other == null)
            return false;

        var setA = new HashSet<T>(enumerable);
        return setA.SetEquals(other);
    } 
```

但是，我遇到了一个简单的数据结构，这种方法不起作用，而 Enumerable.SequenceEqual 可以。

```
 public class Test : IEquatable<Test>
    {
        public Guid Id { get; set; }
        public List<Test> RelatedTest { get; set; }

        public override bool Equals(object obj)
        {
            if (ReferenceEquals(null, obj)) return false;
            if (ReferenceEquals(this, obj)) return true;
            if (obj.GetType() != typeof(Test)) return false;

            return Equals((Test)obj);
        }

        public bool Equals(Test other)
        {
            if (ReferenceEquals(null, other)) return false;
            if (ReferenceEquals(this, other)) return true;

            return other.Id.Equals(Id) &&
                   RelatedTest.SetEqual(other.RelatedTest);
        }
    } 
```

给定这个对象，这个测试成功：

```
 [Test]
    public void SequenceEqualTest()
    {
        var test1 = new List<Test> {new Test()};
        var test2 = new List<Test> {new Test() };

        Assert.That(test1.SequenceEqual(test2), Is.True);
    } 
```

但是这个测试失败了：

```
 [Test]
    public void SetEqualTest()
    {
        var test1 = new List<Test> {new Test()};
        var test2 = new List<Test> {new Test()};

        Assert.That(test1.SetEqual(test2), Is.True);
    } 
```

有人有解释吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T23:54:13.743

是的，您没有`GetHashCode`在您的`Test`课程中覆盖，因此 HashSet 无法根据可能的相等性将项目有效地分组到存储桶中。有关更多详细信息，请参阅此问题：[为什么在重写 Equals 方法时重写 GetHashCode 很重要？](https://stackoverflow.com/questions/371328/why-is-it-important-to-override-gethashcode-when-equals-method-is-overriden-in-c)

# c - Eclipse Juno、CDT、ARM、OS X 上的路径问题

> ID：12557264
> 
> 赞同：1
> 
> 时间：2012-09-23T23:47:58.013
> 
> 标签：c, eclipse, path, arm, eclipse-cdt

我正在使用 Eclipse Juno，试图让 ARM 工具链正常工作。我安装了什么：

*   日蚀朱诺
*   [Zylin 嵌入式 CDT 插件](http://opensource.zylin.com/embeddedcdt.html)
*   [GNU ARM Eclipse](http://sourceforge.net/projects/gnuarmeclipse/)插件
*   [Summon-Arm-Toolchain](https://github.com/esden/summon-arm-toolchain/)，安装在默认的 ~/sat/ 目录中。

当我使用 Summon 工具链创建一个新的 C 项目时，出现以下错误：'Program "arm-none-eabi-gcc" not found in path.' 错误位置是“项目属性中的[发现选项]页面”。我尝试设置 Eclipse 级别 (Eclipse->Preferences->C/C++->Build->Environment) PATH 和项目级别 PATH 以包含此路径，包括相对 (~/sat) 和绝对 /Users/ alterscape/sat)，但似乎没有什么能解决问题。我还尝试在“发现选项”页面中手动添加完整路径。有已知的修复方法吗？如果没有，有没有办法在 Eclipse 中回显 $PATH 以查看它认为它的路径是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:37:12.780

所以，故事是这样的：Eclipse CDT 不会自动重新检查错误以查看在您对路径应用更改后它们是否消失。您必须手动重新构建。这让我感到惊讶，因为我习惯于在进行配置更改时检查/更新 Java 工具链错误。您需要重新运行 Build Project 以查看您的更改是否修复了错误并不是很明显，但这就是前进的道路。

# linux - Linux 内核内存管理分页级别

> ID：12557267
> 
> 赞同：6
> 
> 时间：2012-09-23T23:48:09.790
> 
> 标签：linux, memory-management, kernel, paging

我正在阅读 Bovet 和 Cesati 所著的“Understanding Linux Kernel”一书。在第二章的“Linux 中的分页”下，作者提到了如何在 32 种未启用 PAE 的体系结构中消除页面中间目录和上层目录。我很难理解作者的意思。

他们的治疗一直很松散，并且没有太多的直觉意义。

> 对于没有物理地址扩展的 32 位架构，两个分页级别就足够了。Linux 基本上消除了 Page Upper Directory 和 Page Middle Directory 字段，因为它们包含零位。但是，页面上目录和页面中间目录在指针序列中的位置被保留，以便相同的代码可以在 32 位和 64 位体系结构上工作。内核通过将其中的条目数设置为 1 并将这两个条目映射到 Page Global Directory 的正确条目中来为 Page Upper Directory 和 Page Middle Directory 保留一个位置。

有人可以以更可口的方式解释这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T00:20:43.637

嗯，我想这意味着内核总是使用 4 级页表，可以同时适应普通的 32 位、PAE 和长模式。我认为他们在引用中的意思是 PM4L 和 PDT 只是设置为一个条目的长度，它只指向下一个条目。所以这意味着在正常的 32 位中，你会得到这个：

```
 /-> Page table
PM4L -> PDT -> Page Directory --> Page table
                              \-> Page table 
```

但是在 PAE 中，你会得到：

```
PM4L -> PDT -> 512 Page Directories -> 1024 Page tables 
```

在长模式下，你会得到这个：

```
PM4L -> 512 PDTs -> 512 Page Directories -> 1024 Page tables 
```

但由于始终是 4 个级别，内核的其余部分具有跨 32 位、PAE 和长模式的统一接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-24T00:54:44.540

目前我正在阅读同一本书，我不想问新问题，因为这本书正好解决了我的问题。
通常的表格顺序如下：

```
PML4 (Linux: PGD) -> PDPT (Linux: PUD) -> PD (Linux: PMD) -> PT 
```

在文本中说两个级别就足够了，这就是为什么“消除” PUD 和 PMD 的原因，但是这两个表中的任何一个都具有 1 的长度并保持正确的序列顺序。
在我的理解中，这意味着 PML4 (PGD) 对应于 PD (PMD)，并且由指向 PT 的直接指针组成。因此，PUD 和 PMD 被“跳过”。但是我的理解与原始问题的正确答案不符。
如果 32 位应用程序执行系统调用并切换到 64 位内核模式，如何解析这样的地址？在这种情况下，MMU 需要四层而不是两层。
很明显，我的理解有问题，因为事情不能那样工作。希望有人能把事情弄清楚。

# php - Wordpress 帖子缩略图问题（首页上只有 1 个缩略图）

> ID：12557268
> 
> 赞同：0
> 
> 时间：2012-09-23T23:48:13.233
> 
> 标签：php, css, wordpress, loops, content-management-system

我在 211 的 index.php 文件中使用下面的代码

```
get_header(); ?>

    <div id="primary">
        <div id="content" role="main">

        <?php if ( have_posts() ) : ?>

            <?php twentyeleven_content_nav( 'nav-above' ); ?>

            <?php query_posts('cat=4&amp;showposts='.get_option('posts_per_page')); ?>

            <?php /* Start the Loop */ ?>
            <?php while ( have_posts() ) : the_post(); ?>
            <div class="post-thumb-title">
            <a href="<?php the_permalink() ?>"><?php the_post_thumbnail(array(632,305));?></a>
            <p class="thumb-title"><?php the_title(); ?></p>
            </div>                  

            <?php endwhile; ?>

            <?php twentyeleven_content_nav( 'nav-below' ); ?>

        <?php else : ?>

            <article id="post-0" class="post no-results not-found">
                <header class="entry-header">
                    <h1 class="entry-title"><?php _e( 'Nothing Found', 'twentyeleven' ); ?></h1>
                </header><!-- .entry-header -->

                <div class="entry-content">
                    <p><?php _e( 'Apologies, but no results were found for the requested archive. Perhaps searching will help find a related post.', 'twentyeleven' ); ?></p>
                    <?php get_search_form(); ?>
                </div><!-- .entry-content -->
            </article><!-- #post-0 -->

        <?php endif; ?>

        </div><!-- #content -->
    </div><!-- #primary -->

<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

正如您从上面的代码中看到的那样，我只显示 Cat ID = 4 的帖子，并且我使用 css 将标题覆盖在使用自定义大小的函数“the_post_thumbnail”生成的图像缩略图上。问题是首页只显示帖子的标题和缩略图，只显示第一个帖子。

您可以在这里查看网站：http: [//fusion.fusionconstruction.co.uk/](http://fusion.fusionconstruction.co.uk/)

选择类别 ID 4 的其他帖子的链接：

[http://fusion.fusionconstruction.co.uk/fusion-media-at-revolution-round-1/](http://fusion.fusionconstruction.co.uk/fusion-media-at-revolution-round-1/)

[http://fusion.fusionconstruction.co.uk/fusion-launch-new-website-for-dean-downing/](http://fusion.fusionconstruction.co.uk/fusion-launch-new-website-for-dean-downing/)

我想显示所有类似于第一个的帖子。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T00:28:52.177

```
<?php query_posts('cat=4&amp;showposts='.get_option('posts_per_page')); ?> 
```

应该是

```
<?php query_posts('cat=4&showposts='.get_option('posts_per_page')); ?> 
```

也就是说，您不应该对 & 符号进行 urlencode。希望这是弄乱您的查询的原因。

此外，`the_post_thumbnail()`将显示帖子的特色图片，因此要生成缩略图，您需要确保所有帖子都有特色图片。

# gwt - GWT，将 ArrayList 传递给 JSNI

> ID：12557271
> 
> 赞同：0
> 
> 时间：2012-09-23T23:49:10.007
> 
> 标签：gwt, jsni

在我的 GWT 应用程序中，我有一个 javascript 函数，它需要一个数组数组作为参数。我使用 RPC 获取数据，所以我从我的数据库中获取了一个 List<List>。我需要这个，因为我必须填充一种树视图。例如，我从我的 RPC 调用中得到这个：{“A”、“A1”、“A2”}、{“B”、“B1”}，我必须将它传递给我的 javascript 函数：[[“A "、"A1"、"A2"]、["B"、"B1"]]。在我的界面中，我想显示：

```
A+
  A1
  A2
B+
  B1 
```

如何使用 JSNI 将其传递给我的 javascript 函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T08:28:13.947

如果您可以不使用 DevMode（例如因为您使用 SuperDevMode），那么 Java 数组与`JsArray*`生产模式`String[][]`相同，因此与`JsArray<JsArrayString>`.
在 DevMode 中，有`JsArrayUtils`哪些可以提供帮助（在 DevMode 中制作副本，在生产模式下按原样返回，没有开销），但不适用于嵌套数组（实际上甚至不适用于字符串数组），因此不适用于您的情况。

如果您需要/想要列表而不是数组或 DevMode 支持，那么您必须将数据复制到`JsArray<JsArrayString>`.

如果您可以使用数组但需要 DevMode 支持，则可以使用`GWT.isScript()`创建特定的代码分支：`JsArray<JsArrayString>`在 DevMode 中复制到 a 中，在 prod 模式下按原样传递数组（这也意味着 2 个 JSNI 方法，for`JsArray<JsArrayString>`和`String[][]`）

# java - java.lang.instrument 与 JVM TI

> ID：12557274
> 
> 赞同：1
> 
> 时间：2012-09-23T23:49:22.623
> 
> 标签：java, profiling

我计划在我们当前的 Java 代码之上编写一些分析软件，并找到了 JVM TI 和 java.lang.instrument。我正在寻找不会影响原始代码性能并且还允许分析的东西：

1.  函数花费的时间
2.  特定变量在整个函数调用中使用的内存

无论如何，JVM TI 和 java.lang.instrument 有什么区别？我确实知道 JVM TI 使用 C/C++ 代码并且依赖于平台，而 java.lang.instrument 只是一个 Java API，所以这确实让 java.lang.instrument 更具吸引力。但是，JVM TI 相对于 java.lang.instrument 有什么好处（如果有的话）？

# mysql - MySQL左连接多行

> ID：12557275
> 
> 赞同：2
> 
> 时间：2012-09-23T23:49:25.170
> 
> 标签：mysql, sql, join

我有一个有趣的挑战......我有两张桌子，`products`和`users`。

`products`包含 2 列`user_id`和`current_bidder`，它们包含表中的两个不同 ID `users`。

我想从 中选择所有列，并从表中为每个和选择`products`名称和评级。`users``user_id``current_bidder`

本质上，我正在尝试从连接表的两个不同行中选择列，同时消除它们的名称的歧义。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T23:57:43.123

加入用户表两次，并给每个副本一个不同的别名。像这样的东西：

```
select p.name, p.weight, owner.name, bidder.name
from   product p
join   user owner
on     ...
join   user bidder
on     ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T00:17:33.680

避免列之间歧义的好方法是在`ALIAS`其上添加一个。

```
SELECT  a.*,                   -- selects all records from products
        b.name AS user_name,   -- user_name is an alias of  users.name (user_id)
        c.name AS bidder_name  -- user_name is an alias of  users.name (current_bidder)
FROM    products a
        LEFT JOIN users b
            ON a.user_id = b.id
        LEFT JOIN users c
            ON a.current_bidder = c.id 
```

我使用的原因`LEFT JOIN`是因为我认为有些产品还没有`bidder`。如果`INNER JOIN`使用，产品将永远不会显示在结果中，直到有投标人。

# asp.net-mvc - 带有 YouTube 的 MVC 和 Jquery Mobile

> ID：12557276
> 
> 赞同：1
> 
> 时间：2012-09-23T23:49:27.087
> 
> 标签：asp.net-mvc, jquery-mobile

我有一个 MVC 应用程序，它是为 JQM 设计的。

但是，当我嵌入 youtube 视频时，出现以下错误。

```
This content cannot be displayed in a frame 
To help protect the security of information you enter into this website, the publisher of this content does not allow it to be displayed in a frame.
What you can try:
Open this content in a new window 
```

这是我的代码；

```
<asp:Content ID="Content4" ContentPlaceHolderID="PositionImage" runat="server">
    <div class="videoPlayer" id="PlayerPanel">
        <embed enablejsapi=1 id="player1" width="300"  src="http://youtu.be/_Nng-Ri4c2U" frameborder="0" allowscriptaccess="always" />
    </div>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T00:34:03.863

试一试：

```
<asp:Content ID="Content4" ContentPlaceHolderID="PositionImage" runat="server">
    <div class="videoPlayer" id="PlayerPanel">
        <iframe src="http://www.youtube.com/embed/_Nng-Ri4c2U" width="300" height="190"></iframe>
    </div>
</asp:Content> 
```

`<embed />`与其使用标签，不如使用an`<iframe />`代替。

# android - 来自 Button 的 http 请求 VS 来自 Class

> ID：12557279
> 
> 赞同：-1
> 
> 时间：2012-09-23T23:49:37.100
> 
> 标签：android, class, button, broadcastreceiver, http-request

我做了一个类，它发出一个简单的 GET 请求并显示带有响应的 toast messege ...

如果我从底部事件单击调用该函数，它会显示带有返回数据的消息，就可以了。

但是如果我从广播接收器类中调用相同的函数，它只会显示带有数据''（null）的masege

我相信它会在我获取数据之前显示按摩，并使用按钮等待数据..

我怎样才能让它从广播接收器工作？

班上：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;

import android.app.Activity;
import android.content.Context;
import android.widget.Toast;

public class myclass{

public static void doHttpRequest(String param1, Context context){

    String ret="";

     try {
         URL url = new URL("http://website.com/page?param="+param1);
        HttpURLConnection con = (HttpURLConnection) url
            .openConnection();
        ret=readStream(con.getInputStream());
        } catch (Exception e) {
        e.printStackTrace();
    }

    CharSequence text = "return data-  "+ret;
    int duration = Toast.LENGTH_LONG;
    Toast toast = Toast.makeText(context, text, duration);
    toast.show();   
}

  private static String readStream(InputStream in) {
BufferedReader reader = null;
String line = "";
String alllines = "";
try {
    reader = new BufferedReader(new InputStreamReader(in));

    while ((line = reader.readLine()) != null) {
    alllines=alllines+line;
    }

    return alllines;

} catch (IOException e) {
    e.printStackTrace();
} finally {
    if (reader != null) {
      try {
        reader.close();

      } catch (IOException e) {
        e.printStackTrace();
      }
    }

}
return alllines;

 } 
 } 
```

从按钮它工作正常：

```
final Button button = (Button) findViewById(R.id.button1);
button.setOnClickListener(new View.OnClickListener() {
public void onClick(View v) {

 myclass.doHttpRequest("blabla", getBaseContext());

 }}); 
```

来自不同班级的广播接收者女巫，它不会返回数据，但会显示吐司..

```
public class CustomBroadcastReceiver extends BroadcastReceiver {

private static final String TAG = "CustomBroadcastReceiver";

@Override
public void onReceive(Context context, Intent intent) {

    myclass.doHttpRequest("blabla", context);

    break;
   } }

    } 
```

请帮助.... :) 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T00:23:20.897

全部修复..这似乎是一个项目设置错误，或者premmisions错误（但我在清单中有权限......编译时不能在apk中应用）

我将这些类复制到了由 Eclipse 的 erlier 版本制作的另一个项目中，它在那里的工作就像一个魅力......

无论如何，谢谢..我尝试了几个小时在代码中修复它..这是设置....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T00:26:51.087

我创建了一个`myclass.java`并`CustomBroadcastReceiver.java`通过从类中删除 break 语句和一个额外的花括号来尝试您的代码，`CustomBroadcastReceiver.java`它对我来说效果很好。

Activity 类中的以下代码演示了示例/测试广播的注册、无趣的接收器和处理程序。

```
CustomBroadcastReceiver customBroadcastReceiver;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    customBroadcastReceiver = new CustomBroadcastReceiver();
    registerReceiver(cusoBroadcastReceiver, new IntentFilter("com.example.app.testbroadcast"));

            // For test broadcast only.
    new Handler().postDelayed(new Runnable() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            sendBroadcast(new Intent("com.example.app.testbroadcast"));
        }
    }, 2000);

}

@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    unregisterReceiver(customBroadcastReceiver);
} 
```

希望这可以帮助。

# php - 如何在 HTML 表单中创建这个数组结构？

> ID：12557283
> 
> 赞同：3
> 
> 时间：2012-09-23T23:50:07.680
> 
> 标签：php, mysql, arrays, multidimensional-array

我有以下 HTML 表单，它是从 MySQL 数据库中的表动态生成的。

```
<form method="post" name="chapters" action="ChaptersUpdate.php">
<input type='text' name='id' value='{$row['id']}'>
<input type='text' name='name' value='{$row['name']}'>
<input type='password' name='password' value={$row['password']};>
<input type='submit'>
</form> 
```

我正在寻找一种方法，以便在提交表单时，在 $_POST 中传递以下数据结构：

```
 [chapter] => Array
  (
    [0] => Array
        (
            [id] => corresponding chapter ID
            [name] => corresponding chapter name
            [password] => corresponding chapter password
        )

    [1] => Array
        (
            [id] => corresponding chapter ID
            [name] => corresponding chapter name
            [password] => corresponding chapter password
        )

) 
```

我尝试了 name='chapter[][id]' / name='chapter[][name]' / name='chapter[][password]' 的各种组合，但收效甚微。数组数据结构永远不会像我想要的那样。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T00:00:00.200

以下似乎对我有用：

```
<input type='text' name='chapters[0][id]'>
<input type='text' name='chapters[0][name]'>
<input type='password' name='chapters[0][password]'>

<input type='text' name='chapters[1][id]'>
<input type='text' name='chapters[1][name]'>
<input type='password' name='chapters[1][password]'> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T23:59:48.267

您可以像这样简单地创建表单

```
<form method="post" name="chapters">
<?php 
for($i = 0; $i <3; $i++)
{
    echo "ID: <input type='text'  name='chapters[$i][id]' /> <br />";
    echo "Name: <input type='text' name='chapters[$i][name]' /> <br />";
    echo "Password: <input type='text' name='chapters[$i][password]' /> <br /> ";
    echo "<Br />";
}
?>
<input type='submit'>
</form> 
```

示例 PHP

```
if(isset($_POST['chapters']))
{
    echo "<pre>";
    print_r($_POST['chapters']);
} 
```

样本输出

```
Array
(
    [0] => Array
        (
            [id] => 1
            [name] => Name1
            [password] => Password1
        )

    [1] => Array
        (
            [id] => 2
            [name] => name 2
            [password] => password 2
        )

    [2] => Array
        (
            [id] => 2
            [name] => name 3
            [password] => Password
        )

) 
```

# google-maps - 我无法在 Google Maps API 中使用 fillOpacity 和 strokeOpacity

> ID：12557287
> 
> 赞同：1
> 
> 时间：2012-09-23T23:51:01.067
> 
> 标签：google-maps

我使用 Google API 来绘制标记和多边形。这很好用，但我似乎无法让多边形的 fillOpacity 和 strokeOpacity 工作。它在设置为 0 或 1 时有效，这让我相信存在某种解析错误。（我在下面的代码中省略了细节，只是用示例替换了它）

```
 <script type="text/javascript">
var locations = [
  ['EXAMPLETEXT, EXAMPLECOORDINATE1, EXAMPLECOORDINATE2, 1],
];

var limburgcoordinaten = [
    new google.maps.LatLng(EXAMPLECOORDINATE1, EXAMPLECOORDINATE2),
    new google.maps.LatLng(EXAMPLECOORDINATE1, EXAMPLECOORDINATE2),
];

var map = new google.maps.Map(document.getElementById('map'), {
  zoom: 8,
  center: new google.maps.LatLng(EXAMPLECOORDINATE1, EXAMPLECOORDINATE2),
  mapTypeId: google.maps.MapTypeId.ROADMAP
});

var infowindow = new google.maps.InfoWindow();

var marker, i;

for (i = 0; i < locations.length; i++) {  
  marker = new google.maps.Marker({
    position: new google.maps.LatLng(locations[i][1], locations[i][2]),
    map: map
  });

  google.maps.event.addListener(marker, 'click', (function(marker, i) {
    return function() {
      infowindow.setContent(locations[i][0]);
      infowindow.open(map, marker);
    }
  })(marker, i));

var limburg = new google.maps.Polygon({
    paths: limburgcoordinaten,
    strokeColor: "#FF0000",
    strokeOpacity: 0.7,
    strokeWeight: 2,
    fillColor: "#FF0000",
    fillOpacity: 0.3,
    map: map
});
} 
```

我希望我只是在看一些非常明显的东西！

# jquery - 获取选择框的值

> ID：12557289
> 
> 赞同：-1
> 
> 时间：2012-09-23T23:51:21.173
> 
> 标签：jquery

我的页面上有多个动态设置的选择框（比如超过 100 个）。我试图在更改时单独获取每个框的值，但是当更改发生时，它会遍历每个选择框，因为它们都具有相同的类。如何单独获取每个选择框的值然后做一些事情......

**例子**

```
<select id="(dynamically set, may be different every time)" class="selection">
  <option value=""></option>
  <option value="dynamically set">1</option><option value="dynamically set">2</option>
  <option value="dynamically set">3</option>
</select>
<select id="(dynamically set, may be different every time)" class="selection">
  <option value=""></option>
  <option value="dynamically set">1</option>
  <option value="dynamically set">2</option>
  <option value="dynamically set">3</option></select>
<select id="(dynamically set, may be different every time)" class="selection">
  <option value=""></option>
  <option value="dynamically set">1</option>
  <option value="dynamically set">2</option>
  <option value="dynamically set">3</option></select>
etc... 
```

JS

```
<script type="text/javascript">
//Psuedo code
$('.selection').change(function(){alert('test');});
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T23:52:53.900

```
$('.selection').change(function() {
    console.log(this.value);
    //or
    console.log($(this).val());
}); 
```

# symfony - symfony 2.1: phpunit -c app 尝试运行 symfony 核心测试

> ID：12557290
> 
> 赞同：2
> 
> 时间：2012-09-23T23:51:50.753
> 
> 标签：symfony, phpunit

在我的 Symfony 2.1 应用程序中，我无法运行[推荐](http://symfony.com/doc/current/book/testing.html#the-phpunit-testing-framework) `phpunit -c app/`的. 我收到以下错误消息（我添加了换行符）：

```
PHPUnit 3.6.10 by Sebastian Bergmann.

Configuration read from /symfony2-dual-auth/app/phpunit.xml.dist

F

PHP Fatal error:  main(): Failed opening required
'/symfony2-dual-auth/vendor/symfony/symfony/vendor/autoload.php'  
(include_path='.:/usr/share/php:/usr/share/pear')
in /symfony2-dual-auth/vendor/symfony/symfony/autoload.php.dist on line 3 
```

完整的源代码在这里：[https](https://github.com/meonkeys/symfony2-dual-auth) ://github.com/meonkeys/symfony2-dual-auth 。除了测试，因为它没有通过。这里是`src/Oh/FOSFacebookUserBundle/Tests/SimpleFunctionalTest.php`...

```
<?php

namespace Oh\FOSFacebookUserBundle\Tests;

use Symfony\Bundle\FrameworkBundle\Tests\Functional\WebTestCase;

class SimpleFunctionTest extends WebTestCase {

  public function testIndex() {
    $client = static::createClient();

    $crawler = $client->request('GET', '/login');

    $this->assertEquals(1, $crawler->filter('html:contains("Remember me")')->count());
  }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T16:55:29.123

我正在扩展黄课。[这是修复](https://github.com/meonkeys/symfony2-dual-auth/commit/04d95341e8aa52b0e35b17cf2833b788ff00001e)：

```
-use Symfony\Bundle\FrameworkBundle\Tests\Functional\WebTestCase;
+use Symfony\Bundle\FrameworkBundle\Test\WebTestCase; 
```

# ios - iOS模拟器没有响应

> ID：12557295
> 
> 赞同：2
> 
> 时间：2012-09-23T23:52:58.780
> 
> 标签：ios, xcode, ios-simulator

同时使用 Xcode 4.4 和 4.5，我无法让 iOS 模拟器真正启动。它曾经工作过，但有一天它无缘无故地停止了。我尝试过多次重新安装 Xcode 并重新启动，但无济于事。它只是坐在那里在码头上弹跳，几乎是在嘲弄我。不过，在实际的 iPad 上运行我的应用程序可以正常工作。这可能是什么原因造成的？

[这是我从强制关闭它得到的输出。](http://sebsauvage.net/paste/?b59d1a22e3e63ffc#uIgkbae7P4w7KlFxMH5lcHJqbbVS8S/whloec/6u4no=)

编辑：它现在工作。我唯一做的就是删除 ~/Library/Preferences 中的 com.apple.finder.plist 以修复我的 Time Machine 无法正常工作。我不知道它是否真的是这样做的，但它现在有效。

# python - For循环，如果元素不等于值，则替换为空字符串

> ID：12557299
> 
> 赞同：2
> 
> 时间：2012-09-23T23:53:46.517
> 
> 标签：python, string, list, replace, equals

```
my_list = ['1 ab ac bbba','23 abcba a aabb ab','345 ccc ab aaaaa'] 
```

我试图摆脱数字和空格，基本上所有不是“a”、“b”或“c”的东西

我试过了，但没有用，我不知道为什么：

```
for str in my_list:
    for i in str:
        if i != 'a' or 'b' or 'c':
            i = ''
        else:
            pass 
```

我想最终得到：

```
my_list2 = ['abacbbba','abcbaaaabbab','cccabaaaaa'] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T07:48:26.437

您误解了如何`or`工作：

```
if i != 'a' or 'b' or 'c': 
```

相当于

```
if (i != 'a') or ('b') or ('c'): 
```

因此将始终是`True`（因为`b`评估为`True`）。

你可能打算写

```
if i != 'a' and i != 'b' and i != 'c': 
```

也可以写成

```
if i not in ('a', 'b', 'c'): 
```

甚至（因为字符串可以迭代其字符）

```
if i not in 'abc': 
```

但即便如此，你也没有对这些信息做任何事情。字符串是不可变的，通过分配`''`给`i`，您根本不会更改字符串。因此，如果您想在没有正则表达式的情况下执行此操作，正确的方法是

```
>>> my_list = ['1 ab ac bbba','23 abcba a aabb ab','345 ccc ab aaaaa']
>>> new_list = [''.join(c for c in s if c in 'abc') for s in my_list]
>>> new_list
['abacbbba', 'abcbaaaabbab', 'cccabaaaaa'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T00:02:14.193

用于[`re.sub`](http://docs.python.org/library/re.html#re.sub)将所有不是`a`, `b`, 或`c`, 即 ,的内容`[^abc]`替换为空字符串：

```
import re
my_list2 = []
for str in my_list:
    my_list2.append(re.sub("[^abc]", "", str)) 
```

**[演示](http://ideone.com/yR9vJ)**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T07:22:21.577

```
 m = ['1 ab ac bbba','23 abcba a aabb ab','345 ccc ab aaaaa']
  n=[m[x][m[x].index(" "):] for x in range(len(m))]
  n=[x.replace(" ","") for x in n] 
```

# facebook - 将元标签添加到 Facebook 业务页面

> ID：12557303
> 
> 赞同：-1
> 
> 时间：2012-09-23T23:54:47.320
> 
> 标签：facebook, tags, meta

我想知道您是否可以帮助我提供一些有关将*元标记*添加到 Facebook 业务页面的说明，以便当人们在 Google 中键入名称时它会显示出来。
目前，他们需要输入不带空格的名称和 Facebook 才能显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T01:38:36.297

您无法编辑 facebook 网站上的元标记。要优化搜索引擎的可见性，您唯一能做的就是在 facebook 上托管的业务页面上完整填写您的个​​人资料。

这里有一些提示可以帮助您充分利用您的页面： http: [//www.fansbuy.org/facebook-business-page-tips/](http://www.fansbuy.org/facebook-business-page-tips/)

# php - 使用 GIT 在二人组中正确工作

> ID：12557305
> 
> 赞同：0
> 
> 时间：2012-09-23T23:54:59.823
> 
> 标签：php, git, netbeans

我和我的一个朋友正在使用 CodeIgniter 开始一个项目。我们以前从未在团队中工作过，因此对整个 VCS 事物都非常陌生。由于 Git 是去中心化的，我已经阅读了很多关于 Git 的好东西。

由于只有我们两个人，入住-结账流程并不是什么大不了的事，但我们希望保持专业性以进一步发展。问题是我们都对如何使用 git 非常迷茫。在这一点上，Git 的文档实在是太多了。

那么我们将如何设置呢？我假设我们在本地机器上开发并在本地 LAMP/WAMP 服务器上运行它。如果结果很好，我们将其推送到中央服务器，对吗？

**另外，我如何从我的合作伙伴那里获得编辑过的文件？我必须手动下载这些还是 git 这样做（或者有其他/更好的方法）？** （这部分非常重要，因为我们现在发展非常迅速，很多事情都在发生变化。）

我正在研究 NetBeans，如有必要，我可以说服他也这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T00:31:27.703

Git 很强大，你能得到多少回报与你花多少时间学习它成正比。:-) 学习 git 确实需要一些努力。请记住，它既不是 perforce 也不是 SVN。

快速入门的最佳教程之一，我会推荐[http://www.vogella.com/articles/Git/article.html](http://www.vogella.com/articles/Git/article.html)

对于 Eclipse，您可以使用[EGit 插件](http://www.vogella.com/articles/EGit/article.html)。我相信 NetBeans 也有类似的。

关于您在中央服务器上的问题，也许您可​​以从[http://bitbucket.org](http://bitbucket.org)开始，它允许您托管免费的私有存储库（只要使用同一存储库的人不超过 5 人，那么您就必须付费）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T23:59:01.010

Git 真的很容易学，我推荐 BitBucket 的这些教程（我自己从那里学的），不会超过一个小时。

[https://confluence.atlassian.com/display/BITBUCKET/](https://confluence.atlassian.com/display/BITBUCKET/)

Git 通过将文件提交到存储库来工作，如果有更改，您可以从中提取文件。教程将解释这一切以及如何设置它:-)。

# ios - iOS：从单独的选择器中获取日期和时间并将它们加在一起？

> ID：12557306
> 
> 赞同：0
> 
> 时间：2012-09-23T23:55:05.433
> 
> 标签：ios, cocoa, date, picker

> **可能重复：**
> [NSDate 的 NSDateComponents](https://stackoverflow.com/questions/6478651/nsdatecomponents-of-an-nsdate)

我`UIDatePicker`在InterfaceBuilder中设置了两个s：其中一个的模式设置为“日期”，另一个的模式设置为“时间”。

我已经成功地从我的 ViewController 中的“日期”选择器中获取了日期，但它带有一个时间......

我的问题是：如何使用两个选择器来获得一个日期？

![这](../Images/fa376278505f3fecefd258d20554a423.png)

（对于那些想知道我为什么不使用“日期和时间”模式的人：这不会让用户轻松选择年份）

非常感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T23:58:34.663

查看 NSDate 和 NSDateComponents 的文档。

[http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DatesAndTimes/Articles/dtCalendars.html#//apple_ref/doc/uid/TP40003470](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DatesAndTimes/Articles/dtCalendars.html#//apple_ref/doc/uid/TP40003470)

# ruby-on-rails - Rails 教程错误：“验证失败：电子邮件已被占用”

> ID：12557307
> 
> 赞同：0
> 
> 时间：2012-09-23T23:55:07.380
> 
> 标签：ruby-on-rails, railstutorial.org

我得到了清单 9.28。在 Michael Hartl 的 Ruby on Rails 教程中，我在运行`bundle exec rspec spec/`. 我不确定如何清除这些错误。

```
$ bundle exec rspec spec/
................................................FF...........FFFFFFFF

Failures:

  1) User pages index profile page 
     Failure/Error: let(:user) { FactoryGirl.create(:user) }
     ActiveRecord::RecordInvalid:
       Validation failed: Email has already been taken
     # ./spec/requests/user_pages_spec.rb:27:in `block (4 levels) in <top (required)>'
     # ./spec/requests/user_pages_spec.rb:29:in `block (4 levels) in <top (required)>'

  2) User pages index profile page 
     Failure/Error: let(:user) { FactoryGirl.create(:user) }
     ActiveRecord::RecordInvalid:
       Validation failed: Email has already been taken
     # ./spec/requests/user_pages_spec.rb:27:in `block (4 levels) in <top (required)>'
     # ./spec/requests/user_pages_spec.rb:29:in `block (4 levels) in <top (required)>'

  3) User pages index edit page 
     Failure/Error: let(:user) { FactoryGirl.create(:user) }
     ActiveRecord::RecordInvalid:
       Validation failed: Email has already been taken
     # ./spec/requests/user_pages_spec.rb:95:in `block (4 levels) in <top (required)>'
     # ./spec/requests/user_pages_spec.rb:97:in `block (4 levels) in <top (required)>'

  4) User pages index edit page 
     Failure/Error: let(:user) { FactoryGirl.create(:user) }
     ActiveRecord::RecordInvalid:
       Validation failed: Email has already been taken
     # ./spec/requests/user_pages_spec.rb:95:in `block (4 levels) in <top (required)>'
     # ./spec/requests/user_pages_spec.rb:97:in `block (4 levels) in <top (required)>'

  5) User pages index edit page 
     Failure/Error: let(:user) { FactoryGirl.create(:user) }
     ActiveRecord::RecordInvalid:
       Validation failed: Email has already been taken
     # ./spec/requests/user_pages_spec.rb:95:in `block (4 levels) in <top (required)>'
     # ./spec/requests/user_pages_spec.rb:97:in `block (4 levels) in <top (required)>'

  6) User pages index edit with valid information 
     Failure/Error: let(:user) { FactoryGirl.create(:user) }
     ActiveRecord::RecordInvalid:
       Validation failed: Email has already been taken
     # ./spec/requests/user_pages_spec.rb:95:in `block (4 levels) in <top (required)>'
     # ./spec/requests/user_pages_spec.rb:97:in `block (4 levels) in <top (required)>'

  7) User pages index edit with valid information 
     Failure/Error: let(:user) { FactoryGirl.create(:user) }
     ActiveRecord::RecordInvalid:
       Validation failed: Email has already been taken
     # ./spec/requests/user_pages_spec.rb:95:in `block (4 levels) in <top (required)>'
     # ./spec/requests/user_pages_spec.rb:97:in `block (4 levels) in <top (required)>'

  8) User pages index edit with valid information 
     Failure/Error: let(:user) { FactoryGirl.create(:user) }
     ActiveRecord::RecordInvalid:
       Validation failed: Email has already been taken
     # ./spec/requests/user_pages_spec.rb:95:in `block (4 levels) in <top (required)>'
     # ./spec/requests/user_pages_spec.rb:97:in `block (4 levels) in <top (required)>'

  9) User pages index edit with valid information 
     Failure/Error: let(:user) { FactoryGirl.create(:user) }
     ActiveRecord::RecordInvalid:
       Validation failed: Email has already been taken
     # ./spec/requests/user_pages_spec.rb:95:in `block (4 levels) in <top (required)>'
     # ./spec/requests/user_pages_spec.rb:97:in `block (4 levels) in <top (required)>'

  10) User pages index edit with valid information 
     Failure/Error: let(:user) { FactoryGirl.create(:user) }
     ActiveRecord::RecordInvalid:
       Validation failed: Email has already been taken
     # ./spec/requests/user_pages_spec.rb:95:in `block (4 levels) in <top (required)>'
     # ./spec/requests/user_pages_spec.rb:97:in `block (4 levels) in <top (required)>'

Finished in 7.29 seconds
69 examples, 10 failures

Failed examples:

rspec ./spec/requests/user_pages_spec.rb:31 # User pages index profile page 
rspec ./spec/requests/user_pages_spec.rb:32 # User pages index profile page 
rspec ./spec/requests/user_pages_spec.rb:102 # User pages index edit page 
rspec ./spec/requests/user_pages_spec.rb:103 # User pages index edit page 
rspec ./spec/requests/user_pages_spec.rb:104 # User pages index edit page 
rspec ./spec/requests/user_pages_spec.rb:118 # User pages index edit with valid information 
rspec ./spec/requests/user_pages_spec.rb:119 # User pages index edit with valid information 
rspec ./spec/requests/user_pages_spec.rb:120 # User pages index edit with valid information 
rspec ./spec/requests/user_pages_spec.rb:121 # User pages index edit with valid information 
rspec ./spec/requests/user_pages_spec.rb:122 # User pages index edit with valid information 
```

我的 user_pages_spec.rb：

```
require 'spec_helper'

describe "User pages" do

  subject { page }

describe "index" do
    before do
      sign_in FactoryGirl.create(:user)
      FactoryGirl.create(:user, name: "Bob", email: "bob@example.com")
      FactoryGirl.create(:user, name: "Ben", email: "ben@example.com")
      visit users_path
    end

    it { should have_selector('title', text: 'All users') }

    it "should list each user" do
      User.all.each do |user|
        page.should have_selector('li', text: user.name)
      end

end

describe "profile page" do
    let(:user) { FactoryGirl.create(:user) }

    before { visit user_path(user) }

    it { should have_selector('h1',    text: user.name) }
    it { should have_selector('title', text: user.name) }
end

describe "signup page" do
    before { visit signup_path }

    it { should have_selector('h1',    text: 'Sign up') }
    it { should have_selector('title', text: 'Sign up') }
  end

 describe "signup page" do
    before { visit signup_path }

    it { should have_selector('h1',    text: 'Sign up') }
    it { should have_selector('title', text: full_title('Sign up')) }
  end

describe "signup" do

    before { visit signup_path }

    let(:submit) { "Create my account" }

    describe "with invalid information" do
      it "should not create a user" do
        expect { click_button submit }.not_to change(User, :count)
      end

      describe "error messages" do
        before { click_button submit }

        it { should have_selector('title', text: 'Sign up') }
        it { should have_content('error') }
      end
    end

    describe "with valid information" do
      before do
        fill_in "Name",         with: "Example User"
        fill_in "Email",        with: "user@example.com"
        fill_in "Password",     with: "foobar"
        fill_in "Confirmation", with: "foobar"
      end

      it "should create a user" do
        expect { click_button submit }.to change(User, :count).by(1)
      end

      describe "after saving the user" do
        before { click_button submit }

        let(:user) { User.find_by_email('user@example.com') }

        it { should have_selector('title', text: user.name) }
        it { should have_selector('div.alert.alert-success', text: 'Welcome') }
        it { should have_link('Sign out') }

      end
    end
  end

  describe "edit" do
    let(:user) { FactoryGirl.create(:user) }
    before do
      sign_in user
      visit edit_user_path(user)
    end

    describe "page" do
      it { should have_selector('h1',    text: "Update your profile") }
      it { should have_selector('title', text: "Edit user") }
      it { should have_link('change', href: 'http://gravatar.com/emails') }
    end

    describe "with valid information" do
      let(:new_name)  { "New Name" }
      let(:new_email) { "new@example.com" }
      before do
        fill_in "Name",             with: new_name
        fill_in "Email",            with: new_email
        fill_in "Password",         with: user.password
        fill_in "Confirm Password", with: user.password
        click_button "Save changes"
      end

      it { should have_selector('title', text: new_name) }
      it { should have_selector('div.alert.alert-success') }
      it { should have_link('Sign out', href: signout_path) }
      specify { user.reload.name.should  == new_name }
      specify { user.reload.email.should == new_email }
    end
    end

  end
end 
```

我的 spec/requests/authentication_pages_spec.rb 看起来像这样：

```
 require 'spec_helper'

describe "Authentication" do

  subject { page }

  describe "signin page" do
    before { visit signin_path }

    it { should have_selector('h1',    text: 'Sign in') }
    it { should have_selector('title', text: 'Sign in') }

  end

  describe "signin" do
    before { visit signin_path }

    describe "with invalid information" do
    before { click_button "Sign in" }

    it { should have_selector('title', text: 'Sign in') }
    #it { should have_selector('div.flash.error', text: 'Invalid') }

      describe "after visiting another page" do
        before { click_link "Home" }
        it { should_not have_selector('div.flash.error') }
      end
    end

    describe "with valid information" do
      let(:user) { FactoryGirl.create(:user) }
      before { sign_in user }

      it { should have_selector('title', text: user.name) }

      it { should have_link('Users',    href: users_path) }
      it { should have_link('Profile', href: user_path(user)) }
      it { should have_link('Settings', href: edit_user_path(user)) }
      it { should have_link('Sign out', href: signout_path) }
      it { should_not have_link('Sign in', href: signin_path) }

      describe "followed by signout" do
        before { click_link "Sign out" }
        it { should have_link('Sign in') }
      end
    end
  end

  describe "authorization" do

    describe "for non-signed-in users" do
      let(:user) { Factory(:user) }

      describe "in the Users controller" do

        describe "visiting the edit page" do
          before { visit edit_user_path(user) }
          it { should have_selector('title', text: 'Sign in') }
        end

        describe "submitting to the update action" do
          before { put user_path(user) }
          specify { response.should redirect_to(signin_path) }
        end

        describe "visiting user index" do
          before { visit users_path }
          #it { should have_selector('title', text: 'Sign in') }
        end

      end
    end

    describe "as wrong user" do
      let(:user) { FactoryGirl.create(:user) }
      let(:wrong_user) { FactoryGirl.create(:user, email: "wrong@example.com") }
      before { sign_in user }

      describe "visiting Users#edit page" do
        before { visit edit_user_path(wrong_user) }
        it { should_not have_selector('title', text: full_title('Edit user')) }
      end

      describe "submitting a PUT request to the Users#update action" do
        before { put user_path(wrong_user) }
        specify { response.should redirect_to(root_path) }
      end
    end
  end
end 
```

我的 users.controller.rb 看起来像这样：

```
class UsersController < ApplicationController
  before_filter :signed_in_user, only: [:edit, :update]
  before_filter :correct_user,   only: [:edit, :update]

  def index
    @users = User.all
  end

  def show
    @user = User.find(params[:id])
  end

  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
        flash[:success] = "Welcome to the Sample App!"
      redirect_to @user
    else
      render 'new'
    end
  end

  def edit
    @user = User.find(params[:id])
  end

  def update
    @user = User.find(params[:id])
    if @user.update_attributes(params[:user])
      flash[:success] = "Profile updated"
      sign_in @user
      redirect_to @user
    else
      render 'edit'
    end
  end

  private

    def signed_in_user
      redirect_to signin_url, notice: "Please sign in." unless signed_in?
    end

    def correct_user
      @user = User.find(params[:id])
      redirect_to(root_path) unless current_user?(@user)
    end

end 
```

session.helper.rb：

```
module SessionsHelper

  def sign_in(user)
    cookies.permanent[:remember_token] = user.remember_token
    self.current_user = user
  end

  def signed_in?
    !current_user.nil?
  end

  def current_user=(user)
    @current_user = user
  end

  def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
  end

  def current_user?(user)
    user == current_user
  end

  def signed_in_user
    unless signed_in?
      store_location
      redirect_to signin_url, notice: "Please sign in."
    end
  end

  def sign_out
    current_user = nil
    cookies.delete(:remember_token)
  end

  def redirect_back_or(default)
    redirect_to(session[:return_to] || default)
    session.delete(:return_to)
  end

  def store_location
    session[:return_to] = request.url
  end
  end 
```

header.html.erb：

```
<header class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <%= link_to "sample app", root_path, id: "logo" %>
      <nav>
        <ul class="nav pull-right">
          <li><%= link_to "Home", root_path %></li>
          <li><%= link_to "Help", help_path %></li>
          <% if signed_in? %>
            <li><%= link_to "Users", users_path %></li>
            <li id="fat-menu" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Account <b class="caret"></b>
              </a>
              <ul class="dropdown-menu">
                <li><%= link_to "Profile", current_user %></li>
                <li><%= link_to "Settings", edit_user_path(current_user) %></li>
                <li class="divider"></li>
                <li>
                  <%= link_to "Sign out", signout_path, method: "delete" %>
                </li>
              </ul>
            </li>
          <% else %>
            <li><%= link_to "Sign in", signin_path %></li>
          <% end %>
        </ul>
      </nav>
    </div>
  </div>
</header> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T00:20:41.587

将您的 user_pages_spec.rb 的结构与 mhartl 的[原始](https://github.com/mhartl/sample_app/blob/master/spec/requests/user_pages_spec.rb)结构进行比较。您肯定放错了一些`end`'s，因为`describe "profile page" do`and块不应该`describe "edit" do`嵌入到您的块中。`describe "index" do`

# php - PHP：满足条件时更改图像质量？

> ID：12557309
> 
> 赞同：2
> 
> 时间：2012-09-23T23:55:36.170
> 
> 标签：php

我有一个 php 脚本，用户可以在其中上传图片。如果文件大小大于“X”千字节，我想让脚本降低图像质量（jpeg）。

像这样的东西：

```
if( $_FILES['uploaded_img']['size'] > $file_size_limit ){
     // code that lowers the quality of the uploaded image but keeps the image width and height
} 
```

最好的方法是什么？

ps：我不想改变图像的宽度和高度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T00:20:39.107

你当然可以。做这样的事情。

```
$upload = $_FILES['uploaded_img'];
$uploadPath = 'new/path/for/upload/';
$uploadName = pathinfo($upload['name'], PATHINFO_FILENAME);
$restrainedQuality = 75; //0 = lowest, 100 = highest. ~75 = default
$sizeLimit = 2000;

if($upload['size'] > $sizeLimit) {
    //open a stream for the uploaded image
    $streamHandle = @fopen($upload['tmp_name'], 'r');
    //create a image resource from the contents of the uploaded image
    $resource = imagecreatefromstring(stream_get_contents($streamHandle));

    if(!$resource)
        die('Something wrong with the upload!');

    //close our file stream
    @fclose($streamHandle);

    //move the uploaded file with a lesser quality
    imagejpeg($resource, $uploadPath . $uploadName . '.jpg', $restrainedQuality); 
    //delete the temporary upload
    @unlink($upload['tmp_name']);
} else {
    //the file size is less than the limit, just move the temp file into its appropriate directory
    move_uploaded_file($upload['tmp_name'], $uploadPath . $upload['name']);
} 
```

这将接受 PHP GD 支持的任何图像格式（假设它已安装在您的服务器上。很可能是）。如果图像小于限制，它只会将原始图像上传到您指定的路径。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T01:08:02.407

您的基本方法（在奥斯汀的答案中实施）有时会起作用，但重要的是要记住**质量！= 文件大小**. 虽然它们通常是相关的，但完全有可能（甚至很常见）降低 jpeg 文件的质量实际上会导致文件更大。这是因为任何上传到您系统的 JPEG 都已经通过了 JPEG 压缩公式（通常质量为 79 或 80）。根据原始图像，此过程将创建伪影/更改结果图像。当您通过 jpeg 压缩算法再次运行这个已经优化的图像时，它不会“知道”原始图像的样子......所以它将传入的 jpeg 视为一个全新的无损文件并尝试复制它尽可能接近......包括在原始过程中创建的任何工件。再加上原来的 jpeg 压缩已经利用了大部分“简单”的事实

我做了一些测试来查看截止点在哪里，不出所料，如果原始图像的压缩比较低（q=99），重新压缩到 q=75 会节省大量空间。如果原始文件以 q=75 压缩（对于图形程序默认值来说很常见），那么二次 q=75 压缩看起来更糟，但实际上导致的文件大小与原始文件大小相同。如果原件的压缩级别较低（q=50），那么二次 q=75 压缩会导致文件显着变大（对于这些测试，我使用了三张复杂的照片……显然，具有特定口味/成分的图像会有不同的表现通过这些压缩）。*注意：我正在使用 Fireworks cs4 进行此测试...我意识到这些[质量指标在平台之间没有标准化](https://stackoverflow.com/a/2043627/1096794)*

正如下面评论中所指出的，从 PNG 等文件格式迁移到 JPEG 通常最终会明显变小（尽管没有任何透明度），但是从 JPEG -> JPEG（或 GIF->JPEG，特别是对于简单或小尺寸图像）往往无济于事。

无论如何，您仍然可以尝试使用 Austin 描述的压缩方法，但请确保在完成后比较两个图像的文件大小。如果只有很小的增量增益或新文件较大，则默认返回原始图像。

# perl - 使用 Sendmail 自定义 X-header

> ID：12557316
> 
> 赞同：0
> 
> 时间：2012-09-23T23:56:50.800
> 
> 标签：perl, email, unix, smtp, sendmail

我想将**sendmail**配置为包含**两个自定义 X 标头**，其值**基于**完整的**电子邮件内容/正文**计算得出。是否可以将**perl 脚本**与 sendmail 一起使用，以将此类自定义标头添加到**发送的每封电子邮件**中？

请指教。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:07:02.007

考虑向 MIMEdefang milter 添加所需的功能。

[http://mimedefang.org/](http://mimedefang.org/) MIMEDefang 是一个与 Sendmail “Milter”库配合使用的电子邮件过滤工具。MIMEDefang 允许您用 Perl 而不是 C 来表达您的过滤策略，[...] MIMEDefang 是免费软件：它是根据 GNU 通用公共许可证的条款发布的。它在 Linux、FreeBSD、Solaris 和大多数其他 UNIX 或类 UNIX 系统下运行。

**或者**

将您的解决方案基于来自 CPAN 的 Sendmail::PMilter 或 Sendail:Milter 模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T05:28:50.250

开始正文的双换行符之前的任何内容都是标题。我不知道你为什么需要问。你有没有尝试过，但没有奏效？

# php - SQL Query 在 PHPMyAdmin 中可以正常工作，但不能在 mysql_query 中使用

> ID：12557317
> 
> 赞同：0
> 
> 时间：2012-09-23T23:56:52.370
> 
> 标签：php, mysql, sql, phpmyadmin

当我使用 PHPMyAdmin 运行以下 SQL 查询时，它工作得非常好，但是当我从网页运行它时，我得到一个错误。我在 StackOverflow 上四处寻找类似的问题，并尝试了他们的建议，但是唉……有谁知道为什么它不能在网页上工作？

变量放入后的 SQL 查询（示例）：

```
SELECT place FROM locations WHERE (( 69.1 * ( latitude - 51.4700000 ) ) * ( 69.1 * (latitude - 51.4700000 ) )) + ( ( 69.1 * ( longitude - 5.5528000 ) * COS( 51.4700000 / 57.3 )) * ( 69.1 * ( longitude - 5.5528000 ) * COS( 51.4700000 / 57.3 ) ) ) < 976.5625 ORDER BY ((69.1 * ( latitude - 51.4700000 ) ) * ( 69.1 * ( latitude - 51.4700000 ) )) + ( ( 69.1 * ( longitude - 5.5528000 ) * COS( 51.4700000 / 57.3 ) ) * ( 69.1 * ( longitude - 5.5528000 ) * COS(51.4700000 / 57.3 ) ) ) ASC 
```

PHP（$radius 和 $start 在此之前定义）：

```
$latitude = $start['latitude'];
$longitude = $start['longitude'];
$r = pow($radius, 2);
$inrange = "SELECT place FROM locations_2 WHERE ((69.1 * (latitude - $latitude)) * (69.1 * (latitude - $latitude))) + ((69.1 * (longitude - $longitude) * COS($latitude / 57.3)) * (69.1 * (longitude - $longitude) * COS($latitude / 57.3))) < $r ORDER BY ((69.1 * (latitude - $latitude)) * (69.1 * (latitude - $latitude))) + ((69.1 * (longitude - $longitude) * COS($latitude / 57.3)) * (69.1 * (longitude - $longitude) * COS($latitude / 57.3))) ASC";
$result = mysql_query($inrange) or die(mysql_error()); 
```

我得到的错误信息是：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')) * (69.1 * (`latitude` - ))) + ((69.1 * (`longitude` - ) * COS( / 57.3)) * (69' at line 1 
```

更奇怪的是它起作用了……我把它都写下来了，就像我现在向你展示它的方式一样，很高兴看到它运行得很好。那是今天早些时候。现在大约一个小时前，我再次尝试了它，但由于某种原因它停止了工作。我真的不记得改变了什么。

编辑

感谢大家。我想通了，结果发现我犯了一个愚蠢的错误。它今天早些时候工作，因为所有用户都设置了他们的位置。现在，我有一些用户在遍历他们时不这样做，经度和纬度都是空的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T23:59:03.260

`$latitude`从您的错误消息看来，它似乎`$longitude`不包含任何值。您可能想要检查`$start`设置是否正确。这就是我能帮助你的全部，因为我不知道`$start`它是什么以及你是如何得到它的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T00:09:01.020

```
if ((isset($start['latitude']))&&(isset($start['longitude']))){
$latitude = $start['latitude'];
$longitude = $start['longitude'];
$r = pow($radius, 2);
$inrange = "SELECT place FROM locations_2 WHERE ((69.1 * (latitude - $latitude)) * (69.1 *    (latitude - $latitude))) + ((69.1 * (longitude - $longitude) * COS($latitude / 57.3)) * (69.1 * (longitude - $longitude) * COS($latitude / 57.3))) < $r ORDER BY ((69.1 * (latitude - $latitude)) * (69.1 * (latitude - $latitude))) + ((69.1 * (longitude - $longitude) * COS($latitude / 57.3)) * (69.1 * (longitude - $longitude) * COS($latitude / 57.3))) ASC";
$result = mysql_query($inrange) or die(mysql_error());

}else
{
echo "error";
} 
```

或者

在查询中将 $latitude,$latitude 放入 {}

```
$inrange = "SELECT place FROM locations_2 WHERE ((69.1 * (latitude - {$latitude})) * (69.1 *    (latitude - {$latitude}))) + ((69.1 * (longitude - {$longitude}) * COS({$latitude} / 57.3)) * (69.1 * (longitude - {$longitude}) * COS({$latitude} / 57.3))) < $r ORDER BY ((69.1 * (latitude - {$latitude})) * (69.1 * (latitude - {$latitude}))) + ((69.1 * (longitude - {$longitude}) * COS({$latitude} / 57.3)) * (69.1 * (longitude - {$longitude}) * COS($latitude / 57.3))) ASC"; 
```

# javascript - 以编程方式创建一个 javascript 函数

> ID：12557318
> 
> 赞同：6
> 
> 时间：2012-09-23T23:57:16.570
> 
> 标签：javascript, youtube, youtube-api, youtube-javascript-api

youtube api // onStateChange 回调函数需要这个！

我想以编程方式创建将监听几个 youtube 播放器发出的“onStateChange”事件的函数。添加监听器已经生效：

```
function onYouTubePlayerReady(playerId) {
  var ytpStateManager = playerId +"_StateManager";
  document.getElementById(playerId).addEventListener("onStateChange", ytpStateManager );
... 
```

我需要根据 playerId 变量（“ytp_1”，“ytp_2”，...）创建的函数是

```
function ytpStateManager(newState) {
  ytpStateHelper(playerId , newState);
} 
```

因此 playerId "ytp_1" 的结果如下所示：

```
function ytp_1_StateManager(newState) {
  ytpStateHelper("ytp_1", newState);
} 
```

也可以，但现在我需要为每个玩家手动添加它们，这不是我需要的。我想在新玩家发送 readyState 事件时自动创建它们。

我的问题是，这些函数似乎需要成为全局函数才能正常工作。我已经尝试了好几天了。我的问题是我不知道如何（如果有办法）定义一个全局函数，包括。函数名，以编程方式，基于另一个变量。

令人遗憾的是，ytp 没有发出包含状态和玩家/目标的事件。会让事情变得容易得多。所有这些基本上都是解决方法，因为我需要在所有 stateChanges 上做所有事情。

如果有更好/更简单的方法，请告诉我:) 否则非常欢迎这个问题的解决方案。

**也许有一种方法可以重新安排事件，使其更“可访问”？**

我在规范中读到 .addEventListener 也接受一个对象，所以我尝试将事件绑定到一个专用对象。但同样，它没有被触发。感觉就像我测试了一切......

**更新** 我现在切换到 iframe 播放器（来自 swfobject），因为它提供了一个包含 playerId 和 state 的事件：D 耶！在与错误的 ytplayer 一起度过了一周之后，这感觉像是一个巨大的进步。似乎 yt 希望我们使用 iframe 播放器，它可以在支持时动态使用 html5。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T00:00:04.140

您创建一个返回函数的函数：

```
function createStateManager(playerId) {
    return function (newState) {
        ytpStateHelper(playerId , newState);
    }
} 
```

然后在设置事件侦听器时调用函数工厂：

```
var player = document.getElementById(playerId);
player.addEventListener("onStateChange", createStateManager(playerId)); 
```

* * *

**调试**

我不确定为什么这不起作用，但这里有一个调试建议。我怀疑你可能没有得到`playerId`你的`onYouTubePlayerReady`处理程序。

```
function onYouTubePlayerReady(playerId) {
    console.log('Player ready. The player id is: ' + playerId);
    var ytpStateManager = playerId +"_StateManager";
    var player = document.getElementById(playerId);
    player.addEventListener("onStateChange", createStateManager(playerId));
}

function createStateManager(playerId) {
    return function (newState) {
        console.log('State changed for player ' + playerId + '. New state is ' + newState);
        ytpStateHelper(playerId , newState);
    }
} 
```

您可以尝试一下，然后发布您从两个`console.log`电话中获得的信息吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T11:54:54.030

1）您可以创建函数对象 `new Function([params], "BODY")` 因此您可以将函数的主体组合为字符串变量并作为 BODY 放入

示例： var twoNumAverage = new Function("x", "y", "return (x + y)/2") console.log(twoNumAverage(3,7))

2）new可以动态创建name和BODY

例子

```
var globalObject ={};
var nameFn ='MyNewFunction';

var createFn  = function(object,functionName, Body){
   object[functionName]= new Function(Body); 
}

createFn(globalObject,nameFn,"return (arguments[0] + arguments[1])/2"); 
```

你可以调用你的新函数：

```
globalObject[nameFn](10,20); 
```

结果：`15`

请注意，在您的函数中，您可以通过集合获取参数`arguments`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T23:19:01.093

这是一种创建命名代理函数的方法，该函数使用您提供的上下文执行另一个函数。

```
function createNamedProxy(name, fn, context) { 
  var template = [
          '(function @name() {',
          '  @name.fn.apply(@name.context || window, arguments);',
          '})'
      ].join('').replace(/@name/g, name),

  result = eval(template);
  result.fn = fn;
  result.context = context;

  return result;
}  

// Example Usage
var anonymous = function() { alert( document === this ); },
    named = createNamedProxy('Named', anonymous, document);

// Will alert 'true'
named(); 
```

上面的解决方案创建了一个函数，该函数可以创建并返回一个命名函数，该函数执行您想要的任何操作。如果您不提供上下文，它将像普通匿名函数一样假定窗口对象。要创建您想要的解决方案，您可以：

```
var varName = 'ytp_1';
window[varName + '_StateManager'] = 
    createNamedProxy(varName + '_StateManager', function(newState) {
      ytpStateHelper(varName, newState);
    }); 
```

其中 varName 可以是您想要的任何编程前缀。调用 ytp_1_StateManager() 时，您将传入您的 newState 值，代码将使用您的变量名和 newState 调用 ytpStateHelper。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T00:00:40.240

```
window["foo"+"bar"] = function(){ console.log("foobar is called"); } 
```

# algorithm - 证明给定函数等于 o(N)

> ID：12557327
> 
> 赞同：0
> 
> 时间：2012-09-23T23:59:23.063
> 
> 标签：algorithm, little-o

我试图证明对于任何常数，，`k`（`log^k N = o(N)`N 中的小 O）

我对小 o 所知道的只是它遵循以低于`T(n) = o(p(n))`的`T(n)`速度增长的形式`p(n)`。我也不能真正做一个限制和使用`L'hopital rule`，因为我不知道是`f(n)`什么`g(n)`。有人可以帮我开始吗！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T00:03:08.810

你需要证明

```
 lim        (log^k N)/N  = 0
N -> infinity 
```

写`N = e^x`，那变成

```
lim (x^k)/(e^x) = 0 
```

现在，使用指数函数的幂级数展开，

```
e^x = ∑ (x^n)/n! 
```

得到该商的估计值。

> `n = k+1`剧透：用给和从中挑选术语`e^x > x^(k+1)/(k+1)!`很容易遵循`(x^k)/(e^x) < (k+1)!/x`。

# mongodb - 如何有效地加入 MongoDb 中的 2 个大型集合？

> ID：12557337
> 
> 赞同：4
> 
> 时间：2012-09-24T00:00:08.937
> 
> 标签：mongodb

我有两个巨大的（几十万条记录）集合`Col1`和`Col2`，我需要从它们中获取连接数据。有一个连接条件可以让我将返回的记录数显着减少到几百个，所以在 SQL 语言中我会运行类似的东西

```
 SELECT ... FROM Col1 INNER JOIN Col2 ON Col1.field1 = Col2.field2 
```

它会运行得非常快，`Col1.field1`并且`Col2.field2`是索引字段。是否有任何直接的方法或解决方法可以在使用索引的 MongoDb 中快速执行相同的操作，而不是扫描所有项目？

注意：我无法重新设计集合以将它们合并为一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T00:13:00.070

MongoDB 没有 JOIN 所以没有一个快速的等价物。这很可能是架构设计问题，但您说您无法更改。您不能在一个查询中查询多个集合。

您可以在 2 个查询中执行连接客户端，也可以通过执行 map-reduce 并生成第三个集合以非实时方式执行此操作。

参考[this other question](https://stackoverflow.com/questions/5681851/mongodb-combine-data-from-multiple-collections-in-to-one-how)有关如何进行map-reduce的详细信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-05-03T09:56:17.257

为了加入 MongoDb 4.2，您可以使用聚合和 $lookup 如下查询：

```
db.collection.aggregate([
   { $lookup: { from: "...", ... } }
]) 
```

对我有用

更多信息：[https ://docs.mongodb.com/manual/reference/operator/aggregation/lookup/](https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-30T02:31:04.263

`join`MongoDB中的太贵了。2个解决方案：

*   重新设计将它们合并为一个
*   `limit`,`match`在你加入之前

# xpages - xPages - 在轨道下方添加一个字段

> ID：12557340
> 
> 赞同：0
> 
> 时间：2012-09-24T00:00:49.880
> 
> 标签：xpages

我想向现有 xPage 添加一个字段，并且需要运行一些 xPage 基础知识以检查它们的有效性。

我做了以下事情：

*   为了确保我的开发和生产站点正常工作，将计算文档绑定到的表单（因为数据源位于 diff db 中）。
*   我的新字段名为“NewField”，我使用了简单的数据绑定，选择了 document1（与我文档中的其他字段相同），并输入了新字段名称（不能从下拉菜单中选择作为文档计算）。
*   我还在实际的笔记文档上创建了该字段，但是我认为我不必这样做？此外，它在计算的子表单上，所以不确定这是否相关？这是现有注释表单的 xpage 版本 - 客户端和 Web 访问都适用于该应用程序。
*   我认为如果缺少“绑定到”中指定的字段，它会创建它，但是即使在注释表单上，它仍然不存储该值。

出了什么问题：

*   该字段是在文档上创建的，但未填充该值。针对 notes 文档存储的值是一个空字符串。
*   这里没有什么复杂的，没有做任何时髦的事情，但值没有映射？
*   其余字段（在我创建初始文档时创建）已正确映射。

有什么建议么？这是向现有 xPage 添加字段的新手错误吗？

一种

*根据要求，这里是数据绑定和一个有效的字段的代码，一个无效的代码。*

* * *

这是我定义*document1*的初始代码。它确实调用了保存后的代理，但是该代理对未分配的字段值不做任何事情。

```
<xp:this.data>
 <xp:dominoDocument var="document1" action="openDocument">
  <xp:this.databaseName><![CDATA[#{javascript:var sname = ("","test\\testdb.nsf"); 
    return sname;}]]>
  </xp:this.databaseName>
  <xp:this.formName><![CDATA[#{javascript:return "MainForm"}]]>
  </xp:this.formName>
 <xp:this.postSaveDocument>
  <xp:executeScript>
   <xp:this.script><![CDATA[#{javascript:var sname = @Name([CN]",@Subset(@DbName(),1));
      var dbname = "test/testdb.nsf";
      var dbTest:NotesDatabase = session.getDatabase(sname, dbname);
      if (dbTest.isOpen()){
        ag = dbTest.getAgent("UpdateDoc"); 
        noteid = document1.getDocument().getNoteID(); 
        ag.run(noteid); 
          } }]]></xp:this.script>
   </xp:executeScript>
  </xp:this.postSaveDocument></xp:dominoDocument>
</xp:this.data> 
```

然后这里是无效的字段分配代码。

```
<xp:inputText value="#{document1.NewField}"
  id="inputText25" disableClientSideValidation="true" styleClass="entryboxes">
</xp:inputText> 
```

然后是有效的字段分配代码。

```
<xp:inputText value="#{document1.CLRef}"
  id="inputText4" rendered="#{javascript:@IsNewDoc()}" styleClass="entryboxes">
</xp:inputText> 
```

我*认为*这是相当标准的。

* * *

更新 8/10

所以 - 我已经确定只有当我有条件隐藏单元格时才会发生这种情况。这有一个基本公式，根据另一个字段的值要求该行可见。显示/不显示功能正在工作（代码见下文），但是，由于我不知道的原因，它没有保存值。

```
var hw = getComponent("module");
var hwv = hw2.getSubmittedValue();

hwv == "Product1" || hwv == "Product2" || hw2v == "Product3" 
```

如果我创建任何其他未隐藏的字段（并组成字段名称），它会正确映射到文档（正如我认为的那样）。好消息是我已经成功地复制了一个新表格，所以我似乎想有条件地隐藏一行，而不是我的表格有问题？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T01:12:20.387

好的 - 当单元格在某些条件下隐藏时，我仍然遇到字段映射问题。因此，我最终使单元格可见，然后仅在某些情况下才强制使用该字段。因此，问题不是答案，而是使用的解决方法。

# ios - iOS zxing：没有名为 BarcodeFormat_AZTEC 的成员

> ID：12557341
> 
> 赞同：1
> 
> 时间：2012-09-24T00:00:53.530
> 
> 标签：ios, zxing

我无法启动和运行最新版本的 ZXing 库。我从[http://zxing.googlecode.com/svn/trunk/iphone/下载了最新的源代码，从](http://zxing.googlecode.com/svn/trunk/iphone/)[http://code.google.com/p/zxing/downloads/list](http://code.google.com/p/zxing/downloads/list)下载了 ZXing 2.0 版本

我已经像这样设置了文件夹结构：project/iphone/ZXingWidget/ZXingWidget.xcodeproj project/cpp/ios.xcodeproj

当我打开 ZXingWidget.xcodeproj 并构建时，我在 CBarcodeFormat.mm 中收到一个错误，提示“命名空间 'zxing' 中没有名为 'BarcodeFormat_AZTEC' 的成员”。但是，如果我查看 CBarcodeFormat.h，在枚举中肯定有一个名为 BarcodeFormat_AZTEC 的项目。

我还注意到项目中缺少一些文件（它们在项目导航器中是红色的）。具体来说，这些文件： - CoreSrc/zxing/common/reedsolomon/GenericGF.cpp - CoreSrc/zxing/common/reedsolomon/GenericGF.h - CoreSrc/zxing/common/reedsolomon/GenericGFPoly.cpp - CoreSrc/zxing/common/reedsolomon/ GenericGF.h - CoreSrc/zxing/common/aztec/*

有什么想法我可能做错了吗？

# azure - 如何使用 CsPack 打包 azure webrole

> ID：12557342
> 
> 赞同：3
> 
> 时间：2012-09-24T00:00:53.447
> 
> 标签：azure

我已经升级到 azure 1.7，现在我的构建过程被破坏了。我有一个在构建之后运行的脚本，它简单地触发 cspack，如下所示。

```
cspack "C:\Users\MyAppBuild\.hudson\jobs\MyApp Portal Build\workspace\trunk\Portal\SMEEDI.Cloud\ServiceDefinition.csdef"   
/role:MyApp.Portal;"C:\Users\MyAppBuild\.hudson\jobs\MyApp Portal Build\workspace\trunk\Portal\Portal\MyApp.Portal\bin"   
/sites:"C:\Users\MyAppBuild\.hudson\jobs\MyApp Portal Build\workspace\trunk\Portal\Portal\MyApp.Portal\bin";"MyApp.Portal"   
/out:"C:\Users\MyAppBuild\.hudson\jobs\MyApp Portal Build\MyApp.Cloud.cspkg 
```

这是我的服务定义：

```
<?xml version="1.0" encoding="utf-8"?>
<ServiceDefinition name="MyApp.Cloud" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition" schemaVersion="2012-05.1.7">
<WebRole name="MyApp.Portal" enableNativeCodeExecution="true">
<ConfigurationSettings>
  <Setting name="DiagnosticsConnectionString" />
  <Setting name="DataConnectionString" />
  <Setting name="BaseUrl" />
  <Setting name="DatabaseConnectionString" />
  <Setting name="Environment" />
</ConfigurationSettings>
<Sites>
  <Site name="MyApp_WebRole" physicalDirectory="..\Portal\MyApp.Portal">
    <Bindings>
      <Binding name="HttpIn" endpointName="HttpIn" />
    </Bindings>
  </Site>
</Sites>
<Endpoints>
  <InputEndpoint name="HttpIn" protocol="http" port="80" />
</Endpoints>
<Imports>
  <Import moduleName="RemoteAccess" />
  <Import moduleName="RemoteForwarder" />
</Imports> 
```

我得到错误：

```
Error: CloudServices7 : The physical directories are not valid for role /sites:C
:\Users\MyAppBuild\.hudson\jobs\MyApp Portal Build\workspace\trunk\Portal\Port
al\MyApp.Portal\bin;MyApp.Portal sites, virtual directories, and virtual appli
cations.. 
```

物理目录应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-12T04:24:53.407

您可能需要使用相对路径而不是绝对路径。请参考[这里](https://stackoverflow.com/questions/13417679/cannot-find-the-physical-directory-for-virtual-path-in-windows-azure-project-sd)

> 将在 csdef 中具有相对路径的项目（如此处的情况）升级到 1.8 SDK 时，您应该在升级日志中看到以下有关相对路径更改的警告。进行此特定更改是为了更好地支持并行构建。
> 
> Site 元素的physicalDirectory 属性包含一个相对路径。此路径相对于打包时目标服务定义文件所在的目录。在以前的版本中，此文件位于根项目目录中。在此版本中，默认情况下，此文件位于项目输出目录中。您可能需要更新相对路径以反映目标服务定义文件的新位置。

# ios - 核心数据：表视图 FRC 获取的对象数为零

> ID：12557343
> 
> 赞同：0
> 
> 时间：2012-09-24T00:01:05.170
> 
> 标签：ios, core-data

我在两个表视图控制器中实现核心数据。第一个显示银行名称、城市和州，第二个显示银行的详细信息，如邮编、关闭日期等。因此，我的模型中有两个实体。第一个称为“BankInfo”，第二个称为“BankDetails”。这两个实体是一对一的关系。

当我从第一个控制器切换到第二个时，问题就出现了。看来第二个表视图控制器中获取的对象数始终为零。这意味着 FRC 什么也得不到。怎么了？

第一个表工作正常。而且我确信第二个实体正确地填充了数据。我尝试删除谓词，在这种情况下，FRC 应该返回实体中的所有对象。但它仍然没有返回任何东西..

```
#import "SecondViewController.h"
#import "AppDelegate.h"

@interface SecondViewController () <NSFetchedResultsControllerDelegate>
@property (nonatomic,strong) NSFetchedResultsController *fetchedResultsController;
@end

@implementation SecondViewController
@synthesize bankInfo = _bankInfo;
@synthesize fetchedResultsController = _fetchedResultsController;

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.fetchedResultsController.delegate = self;

    NSError *error;

    if (![self.fetchedResultsController performFetch:&error]) {
        // Update to handle the error appropriately.
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        exit(-1);  // Fail
    }

    [self.tableView reloadData];

    NSLog(@"Frist fetched object is %@",[[self.fetchedResultsController fetchedObjects] objectAtIndex:0]);
}

- (void)setBankInfo:(BankInfo *)bankInfo
{
    _bankInfo = bankInfo;
}

- (NSFetchedResultsController *)fetchedResultsController
{
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"BankDetails"];

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"info.state = %@",self.bankInfo.state];
    [request setPredicate:predicate];

    [request setSortDescriptors: [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"zip"
                                                                                    ascending:YES
                                                                                     ]]];
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    NSManagedObjectContext *context = appDelegate.managedObjectContext;

    _fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request managedObjectContext:context sectionNameKeyPath:nil cacheName:nil];

    return _fetchedResultsController;
}
// FRC delegate methods...
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:04:16.563

您的 getter 函数`fetchedResultsController`在每次调用时都会创建一个新的 FRC。

所以当你打电话

```
[[self.fetchedResultsController fetchedObjects] objectAtIndex:0] 
```

then`fetchedResultsController`被调用，创建一个新的 FRC，将其存储在 中`_fetchedResultsController`，并返回新的 FRC。由于`performFetch`从来没有在这个新的 FRC 上被调用过，所以`fetchedObjects`是空的。也没有为新的 FRC 设置代表。

同样的事情可能发生在表视图委托方法中。

`fetchedResultsController`您可以通过在该方法中设置断点或添加一些断点来轻松验证这是否是问题所在`NSLog()`。

您可能想要做的是*惰性 getter 函数*。设置委托并在该方法中执行获取也很有意义。

```
- (NSFetchedResultsController *)fetchedResultsController
{
    if (_fetchedResultsController == nil) {
        /* ... create request, predicate, sort descriptor ... */
        _fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request managedObjectContext:context sectionNameKeyPath:nil cacheName:nil];
        _fetchedResultsController.delegate = self;
        [_fetchedResultsController performFetch:&error]; // error handling omitted
    }
    return _fetchedResultsController;
} 
```

如果搜索条件发生变化，您只需设置`_fetchedResultsController = nil`强制创建新的 FRC。

# mysql - MySQL ERROR 1072：States Key 不存在，但它确实存在

> ID：12557344
> 
> 赞同：0
> 
> 时间：2012-09-24T00:01:21.010
> 
> 标签：mysql, sql, unique-index

抱歉，如果这是一个新手问题，但我已经有一段时间无法解决这个问题了，希望对 MySQL 有更好理解的人可以帮助我破译以下问题：

我有两个要维护的表，以便用户可以定义他们的偏好，而管理员可以维护他们对这些偏好的访问权限。而且我想确保如果管理员删除某些权限，首选项表会得到更新：

这两个表是：

```
main_access
+--------------+---------+------+-----+---------+-------+
| Field        | Type    | Null | Key | Default | Extra |
+--------------+---------+------+-----+---------+-------+
| nav_location | int(11) | NO   | PRI | NULL    |       |
| user_id      | int(11) | NO   | PRI | NULL    |       |
+--------------+---------+------+-----+---------+-------+ 
```

和

```
main_prefs
+--------------+---------+------+-----+---------+-------+
| Field        | Type    | Null | Key | Default | Extra |
+--------------+---------+------+-----+---------+-------+
| nav_location | int(11) | NO   | PRI | NULL    |       |
| user_id      | int(11) | NO   | PRI | NULL    |       |
+--------------+---------+------+-----+---------+-------+ 
```

当我运行这个时，它们都有唯一的索引：

```
CREATE TABLE IF NOT EXISTS main_access (
    nav_location    integer not null,
    user_id         integer not null,
    unique index uk_access (nav_location, user_id)
);

CREATE TABLE IF NOT EXISTS main_pref (
    nav_location    integer not null,
    user_id         integer not null,
    unique index uk_pref (nav_location, user_id)
); 
```

因此，正在创建具有上述表的 uk_access 和 uk_pref。然而，当我运行时：

```
ALTER TABLE main_pref 
ADD CONSTRAINT FK_access1 
FOREIGN KEY(uk_pref) REFERENCES main_access(uk_access) 
ON UPDATE CASCADE 
ON DELETE CASCADE; 
```

我收到“ERROR 1072 (42000): Key column 'uk_pref' doesn't exist in table”错误。对我来说，这对我来说是零意义的。我知道密钥存在，因为在创建表后我还运行了以下命令：

```
ALTER TABLE main_pref ADD UNIQUE INDEX uk_pref (nav_location, user_id); 
```

并收到重复键警告。我对另一张桌子做了同样的事情。
我还尝试使两个表的唯一索引名称相同。也就是说，我把它们都做了`uk_pref`，但无济于事。同样的错误。
我觉得这是一个我错过的非常简单的问题，但只是无法看到它。我希望另一双眼睛能指出我正在犯的错误。任何帮助深表感谢！

我寻找了类似的问题，但在这里找不到任何解决相同问题的问题。

编辑：AJ 指出了这一点，我忘了提到我试过了：
我也（首先）尝试绕过设置唯一键并执行以下操作：

```
ALTER TABLE main_pref 
ADD CONSTRAINT FK_access1 
FOREIGN KEY(user_id, nav_location) REFERENCES main_access(user_id, nav_location) 
ON UPDATE CASCADE 
ON DELETE CASCADE; 
```

MySQL 刚刚返回了一个语法错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T01:06:14.213

您以错误的顺序给出了键定义中的列

```
ALTER TABLE main_pref 
ADD CONSTRAINT FK_access1 
FOREIGN KEY(nav_location,user_id) REFERENCES main_access(nav_location,user_id) 
ON UPDATE CASCADE 
ON DELETE CASCADE; 
```

这工作正常

[http://sqlfiddle.com/#!2/16751](http://sqlfiddle.com/#!2/16751)

FK 列必须按照与`CREATE TABLE`语句中的键定义相同的顺序给出。换句话说，复合索引`(nav_location,user_id)`不能用于满足`(user_id,nav_location)`原始帖子中的 FK 定义。

# javascript - 在 Chrome 控制台中调试 javascript

> ID：12557347
> 
> 赞同：4
> 
> 时间：2012-09-24T00:02:12.323
> 
> 标签：javascript, google-chrome

我插入了不少console.log(); javascript 程序中的语句（由其他人编写）并在 Chrome 控制台中查看结果。你会从这篇文章的图片中看到，其中三行里面都有数字（32、8 和 8）。这些数字不可点击。控制台只显示了一些 console.log 语句，所以我猜这些数字在某种程度上是指未显示的其他语句。这是我第一次看到这种情况发生，尽管我之前也做过同样的事情（插入了很多 console.log 语句）。

1）它没有显示所有控制台日志语句的事实是否意味着重要？2）有什么方法可以理解这些数字的含义，以及为什么显示它们？

![在此处输入图像描述](../Images/acc8a6ebeebcba8fda5544d5e10f2c14.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T00:08:11.223

没什么大不了的。只是谷歌浏览器的控制台足够智能，可以将相同的行分组并更新计数器，指示有多少重复，而不是在新行中打印每个相同的日志。

例如，如果您有[以下](http://jsfiddle.net/hTwPR/)循环：

```
for (var i = 0; i < 100; i++) {
    console.log("a");
}​ 
```

Chrome 的控制台将显示一行`(100) a`，而其他的，例如 Internet Explorer 的开发者工具，将打印`a`一百次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T00:08:45.903

这些是在同一行代码上快速连续地重复记录相同的事情。所以你记录了 32 次，然后你又记录了 8 次，然后又记录了 8 次。

# django - 从 Django 查询集中排除某些记录，只要这些记录不是第一个或最后一个 X 记录

> ID：12557352
> 
> 赞同：0
> 
> 时间：2012-09-24T00:03:29.807
> 
> 标签：django, django-queryset

我有一个 Django 记录集（mysource）保存每天（for_date）的温度读数。例如，当最近 40 天的读数可供我使用时，我只想在图表上显示 20 天。为此，我执行以下操作：

```
for day_num in range (1, 32):
   if day_num % 2 == 1: # remove every 2nd day
      mysource = mysource.exclude(for_date__day=day_num) 
```

...为了从查询集中删除每一秒的读数。它工作得很好，但现在我想显示最近的阅读和最近的阅读，并确保我不会从查询集中排除它们。是否有任何简单/快速的方法来为 Django 查询集中的记录指定排除项，只要这些记录既不位于查询集的开始 X 记录也不位于查询集的结束 X 记录，这样我就可以完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T01:18:58.663

使用查询获取要排除的记录的 PK，然后在主查询中排除它们 ( `.exclude(pk__in=...)`)，

# css - 如何通过媒体查询定位 Galaxy Nexus 和 Nexus 7？

> ID：12557353
> 
> 赞同：14
> 
> 时间：2012-09-24T00:03:30.270
> 
> 标签：css, responsive-design, mobile-website, media-queries

我有两个正在测试网站设计的设备。三星 Galaxy Nexus 和华硕 Nexus 7 平板电脑。我很难弄清楚如何使用媒体查询来定位这些单独的设备。我不确定要使用什么值`max-width`或使用`max-device-width`. 此外，我无法弄清楚将媒体查询放入的顺序......

根据：[http ://responsejs.com/labs/dimensions/](http://responsejs.com/labs/dimensions/)

*   Galaxy Nexus 肖像：`document.documentElement.clientWidth = 360`
*   Galaxy Nexus 风景：`document.documentElement.clientWidth = 598`
*   Nexus 7 肖像：`document.documentElement.clientWidth = 603`
*   Nexus 7 风景：`document.documentElement.clientWidth = 966`

我需要针对以下内容：

*   Galaxy Nexus 肖像和平板电脑
*   Galaxy Nexus 肖像
*   Galaxy Nexus 平板电脑
*   Nexus 7 纵向和平板电脑
*   Nexus 7 肖像
*   Nexus 7 平板电脑

我尝试了以下测试，但没有得到好的结果......不知道我做错了什么。我只是在玩弄数字，试图弄清楚什么有效，什么无效......

```
/* Galaxy Nexus (portrait and landscape) ----------- */
@media only screen and (min-device-width : 360px) and (max-device-width : 598px) {
    ul.top-menu { background: red; }
}

/* Galaxy Nexus (landscape) ----------- */
@media only screen and (min-width : 361px) and (orientation: landscape){
    ul.top-menu { background: blue; }
}

/* Galaxy Nexus (portrait) ----------- */
@media only screen and (max-width : 360px) and (orientation: portrait) {
    ul.top-menu { background: purple; }
}

/* Nexus 7 (portrait and landscape) ----------- */
@media only screen and (min-device-width : 603px) and (max-device-width : 966px) {
    ul.top-menu { background: yellow; }
}

/* Nexus 7 (landscape) ----------- */
@media only screen and (min-width : 604px) and (orientation: landscape) {
    ul.top-menu { background: green; }
}

/* Nexus 7 (portrait) ----------- */
@media only screen and (max-width : 603px) and (orientation: portrait) {
    ul.top-menu { background: orange; }
} 
```

仅供参考，我知道您在进行响应式设计时不应该如此具体，针对单个设备，但我这样做主要是为了测试，在这种情况下需要这样做。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T07:24:14.843

我有一个 Nexus 7，我试过你的 sricpt。问题是每个浏览器都有不同的视口。所以要得到正确的结果是很复杂的。

```
@media only screen and (device-width : 800px) and (orientation: portrait) {
    #device:after {
        content: "Nexus 7 - portrait - firefox";
    }
}
@media only screen and (width : 603px) and (orientation: portrait) {
    #device:after {
        content: "Nexus 7 - portrait - chrome";
    }
}
@media only screen and (device-width : 1280px) and (orientation: landscape) {
    #device:after {
        content: "Nexus 7 - landscape - firefox";
    }
}
@media only screen and (width : 966px) and (orientation: landscape) {
    #device:after {
        content: "Nexus 7 - landscape - chrome";
    }
} 
```

我没有时间制作 Opera。

您可以使用 Nexus 7[在此处查看结果](http://frommelt.fr/nexus/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T14:33:53.663

要专门定位，您可以使用：

```
@media only screen and (min-width : 600px) and (max-width : 603px) and (orientation: portrait) {
//Your CSS Here
} 
```

这将得到nexus 7，如果你有iPhone定位媒体查询，它们将保持不变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-30T18:59:52.243

## 连结 7 (v1) 2012

```
Mozilla/5.0 (Linux; Android 4.4.3; Nexus 7 Build/KTU84L) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.93 Safari/537.36

@media screen
resolution: 192dpi/2dppx
color: 8
-webkit-device-pixel-ratio: 2

orientation: portrait
  width: 600px/37.5em/158mm
  height: 791px/49.4375em/209mm
  device-width: 600px/37.5em/158mm
  device-height: 960px/60em/254mm
  aspect-ratio: 600/791
  device-aspect-ratio: 5/8 or 758/1000
orientation:landscape
  width: 960px/60em/254mm
  height:431px/26.9375em/114mm
  device-width:960px/60em/254mm
  device-height:600px/37.5em/158mm
  aspect-ratio:960/431
  device-aspect-ratio:8/5 or 2227/1000 
```

* * *

## 连结 7 (v2) 2013

```
Mozilla/5.0 (Linux; Android 4.4.2; Nexus 7 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.93 Sfari/537.36

@media screen
resolution: 127dpi/1dppx
color: 8
-webkit-device-pixel-ratio: 1.3312500715255737 or 1.3

orientation: portrait
  width: 601px/37.5625em/159mm
  height: 881px/55.0625em/207mm
  device-width: 601px/37.5625em/159mm
  device-height: 962px/60.125em/254mm
  aspect-ratio: 601/881
  device-aspect-ratio: 601/962
orientation: landscape
  width: 962px/60.125em/254mm
  height: 529px/33.0625em/114mm
  device-width: 962px/60.125em/254mm
  device-height: 601px/37.5625em/159mm
  aspect-ratio: 962/529
  device-aspect-ratio: 962/601 or 2221/1000 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-27T07:48:44.147

以下代码对我有用，可以针对 Nexus7 选项卡。

```
/** Google Nexus7 (Landscape)**/
@media screen and (min-device-width : 601px) and (max-device-width :970px) {} 
```

不要忘记在您的 html 中添加元标记。例如，

```
<meta name="viewport" content="width=device-width"/> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T19:32:10.960

您应该尝试混合使用英寸作为屏幕尺寸，使用 px 作为密度/空间

有了这个，你可以为一个星系联结和一个联结 7 有一个独特的布局，而不用一堆线来解决！

```
// High end Android device
@media  screen and (min-width: 600px) and (max-width: 5in)
{

}
// nexus 7 and ipad mini
@media  screen and (min-width: 7in) and (max-width: 9in)
{

} 
```

这里有一篇关于这个的文章：http: [//ungeekautourdumonde.com/css3-tablette-desktop-mobile-la-guerre-des-media-queries/](http://ungeekautourdumonde.com/css3-tablette-desktop-mobile-la-guerre-des-media-queries/)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-02-01T11:53:43.923

在 Nexus 7 上的 Chrome 上对我有用的媒体查询是：

```
@media only screen and (width : 600px) and (orientation: portrait) {

}

@media only screen and (width : 961px) and (orientation: landscape) {

} 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-09-24T00:23:45.417

您可以使用 and 表达式对同一个媒体查询使用多个规则

```
@media screen and (min-width: 998px) and (max-width: 999px) 
```

定位在 998px 到 999px 之间

# facebook - Facebook：有没有办法获取不是我朋友的用户的 current_location？图形 API 或 FQL

> ID：12557357
> 
> 赞同：2
> 
> 时间：2012-09-24T00:04:23.667
> 
> 标签：facebook, facebook-graph-api, permissions, location, facebook-fql

假设我有一个用户 ID 和用户名。我手动打开她的 Facebook 页面（即[http://www.facebook.com/username](http://www.facebook.com/username)。它就在那里！“居住在”字段显示她住在哪里。然而，当我尝试使用 FQL 获取她的 current_location 时（使用 Python）：

```
q = 'SELECT uid, username, current_location FROM user WHERE uid=%s' % aUser 
```

我进入`None`了 current_location 字段。

另一方面，我可以轻松地从我的朋友那里检索 current_location（我的意思是，对于那些公开了他们的位置的朋友）：

```
SELECT current_location FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
```

我知道[权限](http://developers.facebook.com/docs/authentication/permissions/#user_friends_perms)，但应该有一种获取位置的方法。实际上，我可以看到甚至不是我朋友的朋友的用户的位置（居住在）。我该怎么做？？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T00:15:57.667

将 Facebook 作为普通用户处理与通过 API 访问 Facebook 的应用程序不同。

应用程序无法访问网站上所有看似“公开”的信息。他们的系统是这样运行的，因此应用程序无法“挖掘数据”。Facebook 不希望应用程序能够收集未明确允许该应用程序查看其个人详细信息的用户的数据。

如果一个人知道你的大致位置，这可能是无害的，但如果一个应用程序要在 Facebook 上收集人们的位置，就会出现隐私问题。

# html - 网站无法缩放以适应移动屏幕的问题

> ID：12557360
> 
> 赞同：2
> 
> 时间：2012-09-24T00:05:53.740
> 
> 标签：html, css

我以[http://reddit.com](http://reddit.com)的网站为参考构建了一个 css 网页，其中侧栏在页面上始终保持相同大小，而整个左侧在屏幕上逐渐缩小。

```
sidebar{width:400px;float:right;/*rest doesn't matter*/}
leftside{width:auto;height:auto;;overflow:hidden;/* no float */} // i think this
// is where i missed up, reddit's site didn't have this 
```

无论如何，这个网站在移动设备上根本无法扩展，侧边栏占据了整个屏幕，但在 reddit 的网站上它可以很好地扩展。如何使我的网站规模化？我需要另一个 div 来包裹侧面和左侧吗？我试着在网上查了一下，但是大家都说不要用px来定义侧边栏，但是reddit用了px，而且还是缩放...

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T00:17:00.003

如果在移动设备上，这可能是由于使用屏幕尺寸的媒体查询造成的，因为在我的浏览器上，reddit 的行为与您的描述相同，并且当我将其缩小到移动设备的大小时，侧栏会占用整个浏览器的大小设备。如果您不希望它像 reddit 在浏览器上的行为一样，您可以使用它；使用媒体查询以及浏览器的宽度，并在这些规则中调整侧边栏的大小，或者；使用某种 javascript 或 html5 和 css 将侧边栏设置为按钮，并在 OnClick 时将其扩展到整个屏幕

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T00:15:52.683

尝试使用响应式 css 框架，例如[http://foundation.zurb.com/](http://foundation.zurb.com/)或[http://gumbyframework.com/](http://gumbyframework.com/)

# regex - 正则表达式帮助 - 查找直到前一个空格字符之前的所有内容

> ID：12557364
> 
> 赞同：2
> 
> 时间：2012-09-24T00:06:38.650
> 
> 标签：regex, notepad++

我正在尝试找出正则表达式并且无法解析以下内容。

我有几百行看起来像这样：

```
source ~/.bashrc; cd ~/myfiles/Clustering/Code/Connectedness/Code; R CMD BATCH "--vanilla --args BRAF P15056 BRAF_P15056_MutationOutput.txt 3NY5.pdb A"  MutationAnalysisRunMeAlignment.R ~/myfiles/Clustering/ROutput/RunOutputAlignment/BRAF_P15056_3NY5_A_RunResults.txt 
```

我想找到以“MutationOutput.txt”结尾的字符串部分，并将其与前一个空格匹配。然后我想用什么来代替它。因此，上面的行将变为：

```
source ~/.bashrc; cd ~/myfiles/Clustering/Code/Connectedness/Code; R CMD BATCH "--vanilla --args BRAF P15056 3NY5.pdb A"  MutationAnalysisRunMeAlignment.R ~/myfiles/Clustering/ROutput/RunOutputAlignment/BRAF_P15056_3NY5_A_RunResults.txt 
```

我知道它需要是这样的，

```
[A-Z_0-9]MutationOutput.txt 
```

但如何只捕获该行的最后一部分：“_MutationOutput.txt”。如何让它计算所有内容，直到前一个空格字符？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T00:12:16.963

//之间的所有内容： `/ [^ ]*MutationOutput\.txt/`

这意味着“空格，然后是一堆不是空格的东西，然后是 MutationOutput.txt”。（我这样做是因为我不确定 Notepad++ 如何与贪婪与非贪婪一起工作。）

顺便说一句，你也可以让你的第一次尝试工作得更好。一个字符类（介于 之间的字符`[]`）仅匹配一个字符，但您可以使用 使其匹配零个或多个`*`。实际上，您可以使用`*`.

# python - 如何在 python 中绘制 500 对连续随机数？

> ID：12557368
> 
> 赞同：1
> 
> 时间：2012-09-24T00:08:17.613
> 
> 标签：python, matplotlib, python-2.7

我是 python 新手，我正在处理的问题之一是绘制 500 对连续随机数。我有一个公式可以生成如下所示的数字：

# x轴

```
>>> a=128
>>> c=0
>>> m=509
>>> n=500
>>> seed = 10
>>> for i in range (1,n):
    new_seed=(a*seed+c)%m
    seed = new_seed
    print new_seed 
```

# y轴

```
>>> a=269
>>> c=0
>>> m=2048
>>> n=500
>>> seed = 10
>>> for i in range (1,n):
    new_seed=(a*seed+c)%m
    seed = new_seed
    print new_seed 
```

我现在想知道的是如何将这些结果转换为数组或列表。我试图将 plt.plot(new_seed) 放在循环语句中，但是当我尝试绘图时它不起作用。有任何想法吗？

我使用 import matplotlib.pyplot as plt

在此先感谢您的帮助！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T00:16:05.070

您可能应该做一些（更多）python 教程.. 列表是 python 的一个基本方面，似乎您不理解它们...

```
import matplotlib.pyplot as plt
import random
x = []
a,seed,c,m,n = 128,10,0,509,500
for i in range (1,n):
   new_seed=(a*seed+c)%m
   seed = new_seed
   x.append( new_seed)

a,seed,c,m,n = 269,10,0,2048,500
y= []
for i in range (1,n):
   new_seed=(a*seed+c)%m
   seed = new_seed
   y.append( new_seed)
plt.plot(x,y)
plt.show() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T00:29:41.173

您正在打印数字 ( `print new_seed`)，如果您尝试绘制它们，这将没有任何用处。那有意义吗？

相反，您应该做的是在生成每个数字时将其保存到列表中的下一个可用位置。一种简单的方法是在循环之前创建一个空列表，并且每次生成一个数字时，只需`append`将其添加到列表中而不是打印它。

```
xlist = []
for i in xrange(n):
    new_seed = # generate the number
    xlist.append(new_seed) 
```

同样对于`ylist`.

在实践中，您要做的是使用列表推导，如下所示：

```
xlist = [generate_number(...) for i in xrange(n)] 
```

这只是我上面写的内容的简写语法。（嗯，它也运行得更快）它确实需要您将生成随机数的过程封装在一个函数中，但无论如何这是一个好主意。

然后你可以使用 matplotlib 来绘制`xlist`与`ylist`.

# c# - 从 Parallel.ForEach 抛出未处理的 OperationCanceledException

> ID：12557371
> 
> 赞同：7
> 
> 时间：2012-09-24T00:08:37.990
> 
> 标签：c#, wpf, exception-handling, parallel.foreach

我试图允许取消`Parallel.ForEach`循环。根据[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/ee256691.aspx)，这是可能的，我正在关注他们的编码。

```
// Tokens for cancellation 
ParallelOptions po = new ParallelOptions();
po.CancellationToken = cts.Token;

try
{
    Parallel.ForEach(queries, po, (currentQuery) =>
    {
        // Execute query
        ExecuteQuery(currentQuery);

        // Throw exception if cancelled 
        po.CancellationToken.ThrowIfCancellationRequested(); // ***
    }); 
}
catch (OperationCanceledException cancelException)
{
    Console.WriteLine(cancelException.Message);
} 
```

但是，当我`cts.Cancel();`从用户可访问的函数调用时，应用程序在上面标有星号的行上崩溃并出现错误：

```
System.OperationCanceledException was unhandled by user code
  Message=The operation was canceled.
  Source=mscorlib
  StackTrace:
   at System.Threading.CancellationToken.ThrowIfCancellationRequested()
   at CraigslistReader.SearchObject.<>c__DisplayClass7.<bw_DoWork>b__5(Query currentQuery) in {PATH}:line 286
   at System.Threading.Tasks.Parallel.<>c__DisplayClass2d`2.<ForEachWorker>b__23(Int32 i)
   at System.Threading.Tasks.Parallel.<>c__DisplayClassf`1.<ForWorker>b__c()
InnerException: 
```

我在那里有异常处理程序，所以我不明白崩溃。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T00:20:37.227

问题是`po.CancellationToken.ThrowIfCancellationRequested();`显式抛出一个未处理的异常。异常处理程序可能在`Parrallel.ForEach()`调用周围，但异常不在 lambda 表达式中处理。删除该行或在 lambda 表达式中添加一个异常处理程序，它应该可以工作。

有关更多信息，请参阅[取消任务引发异常](https://stackoverflow.com/questions/7343211/cancelling-a-task-is-throwing-an-exception)。

# python - python重复程序，而为真

> ID：12557376
> 
> 赞同：1
> 
> 时间：2012-09-24T00:09:36.513
> 
> 标签：python, if-statement, while-loop

当用户输入 y/n 时，我试图让我的程序重复，但是我对如何在这种类型的输入中使用 while true 感到困惑，下面是一些代码。

```
again = input("Would you like to play again? enter y/n:  ")
if again == "n":
    print ("Thanks for Playing!")
    quit

if again == "y":
    print ("Lets play again..")
    ???? 
```

此外，如果用户输入不同的字符，我想做一个 else 语句，但考虑到我有 2 个不同的 if 语句，我不确定如何去做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T00:13:34.280

当你编写一个独立的 Python 程序时，使用 main 函数是一个好习惯。它允许您轻松添加一些单元测试，使用来自其他模块的函数或类（如果您导入它们）等。

如果您必须检查某个条件是否满足以防某些其他条件不满足，并根据哪个条件为真执行一些操作，您可以使用 if...elif...else 语句。

另外，请注意，在这种情况下，您不能在程序中使用 input() 函数。你真正想在这里使用的是 raw_input。这两个函数之间的区别在于 raw_input() 将始终返回一个字符串，而 input() 将评估用户的输入，就好像它是用您的代码而不是 input() 编写的一样。因此，如果用户输入“y”（带引号），则将字符串对象存储为变量的值。但是如果用户输入 y（不带引号）， input() 将尝试对此进行评估，如果 y 未定义，则会引发错误。

[您可以在此处](http://mail.python.org/pipermail/tutor/2001-February/003494.html)阅读有关此主题的更多信息。

```
def main():
    while True:
        again = raw_input("Would you like to play again? Enter y/n: ")

        if again == "n":
            print ("Thanks for Playing!")
            return
        elif again == "y":
            print ("Lets play again..")
        else:
            print ("You should enter either \"y\" or \"n\".")

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T00:20:23.630

```
def play_game():
    if int(raw_input("Guess a number:"))!= 5:
          print "You Lose!"
    else:
          print "You Win!"

def play_again():
    return raw_input("Play Again?").lower() == "y"

while True:
    play_game()
    if not play_again(): break

print "OK Goodbye..." 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T00:13:39.337

你可以这样做：

将 bool 值分配给名为 play 的变量，然后将其用作循环条件。

所以你会有；

```
playing = True
while playing:
    choice = input("would you like to play again? y/n: ")
    if choice == "n":
        print "Thanks for playing"
        playing = False
    else:
        print "play again.. etc..." 
```

将`playing`变量设置为 false 会导致循环终止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-04T02:35:12.560

我让我的代码正常工作，每次进入 else 语句时它都会循环，基本上循环回 if 语句。

刚开始学习python，我真的很喜欢它。这是我的简单代码。

```
print 'Welcome to "Guess my number"'

def main():
    while True:
        number = raw_input('Please Enter a number between 1 and 10: ')
        if number == '5':
            print 'You Got It!! It\'s number ' + number
            return
        else:
            print 'Please try again!'
main()
raw_input("\nPress enter") 
```

# apache - 来自同一虚拟目录的多个文件的 Apache 重写规则？

> ID：12557377
> 
> 赞同：2
> 
> 时间：2012-09-24T00:09:49.753
> 
> 标签：apache, .htaccess

这个问题有两个部分：

1.  我使用 htaccess rewrite 将“file.php”更改为“file”，因此[http://www.example.com/file](http://www.example.com/file)就像[http://www.example.com/file.php一样工作](http://www.example.com/file.php)

这是我的 .htaccess 处理该问题的一部分：

```
 RewriteCond %{REQUEST_FILENAME}.php -f
    RewriteRule (.+) /$1.php [L] 
```

1.  第二部分是目录问题：

这是我处理该问题的 .htaccess 的一部分：

```
 RewriteRule ^register website/register

    RewriteRule ^register/rules website/rules 
```

我想要完成的是：

[http://www.example.com/register](http://www.example.com/register)使用重写规则显示网站/注册 [http://www.example.com/register/rules](http://www.example.com/register/rules)使用重写规则显示网站/规则

问题是 URL 框显示 example.com/register/rules 但页面继续显示 example.com/register 的内容。

这里出了什么问题？是“.php”扩展名是导致这一切的第一部分吗？还是我的 htaccess 完全错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T01:10:23.890

> 什么都没有发生。URL 框显示 example.com/register/rules 但页面继续显示 example.com/register 的内容

发生这种情况是因为你没有限制规则，你有这个：

```
RewriteRule ^register website/register

RewriteRule ^register/rules website/rules 
```

第二条规则永远不会被应用，因为 URI`/register/rules`匹配第一条规则的正则表达式（`^register`，意思是“URI以”**开头**`register`）。添加结束边界：

```
RewriteRule ^register/?$ website/register [L]

RewriteRule ^register/rules/?$ website/rules [L] 
```

或交换它们：

```
RewriteRule ^register/rules website/rules [L]

RewriteRule ^register website/register [L] 
```

虽然你需要`[L]`国旗。

# javascript - Javascript/Jquery 页面首先按顺序加载特定图像

> ID：12557378
> 
> 赞同：2
> 
> 时间：2012-09-24T00:10:11.663
> 
> 标签：javascript, jquery, pageload

我有一个复杂的侧滚动页面，我正在处理构成背景的几层定位 div。

页面上还有大量图片会减慢加载时间。

我需要优先考虑背景层（带有css背景图像的div）以特定顺序加载（即首先是前山，然后是后山，然后是天空，然后是狗）。

我已经尝试为此使用 jquery 加载，但页面上加载的其他项目仍然会干扰这一点。我已经尝试隐藏它们并首先在文档准备好时显示它们，然后将它们放在我的 HTML 文档的顶部。我认为有一些方法可以通过加载事件来做到这一点，但我不确定如何从页面加载的其余部分中确定它的优先级。

我试图弄清楚是否有一种方法可以基本上暂停所有加载，按顺序加载我的 4 张图像，然后继续页面加载。

感谢您的任何建议或意见！我将批准第一个提交的有效答案！我知道还有其他类似的票，但我整个周末都在研究这个，尝试了其中的几个，但似乎找不到完全符合我需要的东西。

谢谢:) - 安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T00:34:19.087

现代浏览器非常聪明，因此您无法阻止各种文件的加载。

可能唯一真正的解决方法是从 javascript 加载几乎所有内容。

与其将所有内容都放在 HTML 中，不如将所有内容都放在 Javascript 中。如果您在 HTML 中有背景图像，那么它们将首先被加载，然后您的 javascript 可以完成剩下的工作。

如果您想避免过多的工作，那么制作一种带有背景和其他内容的预加载页面，然后通过 AJAX 加载其他所有内容是一种简单的方法。只需有一个空的块元素并通过 AJAX 从服务器请求页面内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T00:53:12.013

我认为您在这里需要一种非常结构化的方法。

有很多因素决定了加载图像需要多长时间，并且它会在准备好后立即显示。你可以隐藏一些直到你准备好展示它们，但是你仍然会一次加载大量图像，这既慢又痛苦。

你显然有一个“创造性”的理由来按特定顺序加载（背景优先等）——所以接受这一点……你几乎可以通过制定一个时间表来编排加载。

然后从初始页面加载中删除除第一波图像之外的所有图像。由于这些是 CSS`background-image`属性，这意味着将它们从样式表中删除。

`background-image`然后，您可以通过使用 jQuery设置它们的样式属性来加载每个后续的图像集：

```
$('.foreground').css('background-image', 'url(<path>)'); 
```

要创建“序列”，您将希望每组图像在前一组完成加载时开始加载 -[此处](https://stackoverflow.com/questions/6285809/how-can-i-tell-when-a-css-background-image-has-loaded-is-an-event-fired)讨论了检测背景图像何时完成加载- 但模式可能如下所示：

```
var loadNextImageSet = function() {
    var imageSet = listOfImageSets.pop();
    loadImages(imageSet);
};

$(document).on('images-loaded', function() {
    loadNextImageSet();
});

loadNextImageSet(); 
```

where`loadImages()`异步启动图像加载并在完成后触发自定义`images-loaded`事件。

* * *

如果您仍然希望您的页面在没有 JavaScript 的情况下仍能正确加载（尽管不是那么顺利），您可能需要尝试 2 个样式表 - 一个包含所有图像（针对非 JS 用户）和一个仅包含第一波（针对 JS 用户） ）。然后，您可以确保选择正确的，如下所示：

```
<html>
<head>
    ...
    <noscript>
        <link rel="stylesheet" href="full.css">
    </noscript>
</head>
<body>
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.href = 'background-only.css';
        document.head.appendChild(link);
    </script>
...
</body>
</html> 
```

不是最简洁的 JavaScript 使用方式，但`<script>`元素必须尽可能早，以避免出现无样式的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T01:21:07.733

不确定它是否适合您，但是，您是否想过加载所有页面，而不是使用 JQuery 以正确的顺序显示您需要的内容？您可以在所有图像之前加载页面的某些部分，甚至可能是同一页面的一些简单版本，带有较浅的图像或没有图像但具有背景渐变等等......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T00:12:50.483

我知道的最简单的方法是在显示中按照您想要的顺序排列图像：页面主体最顶部的无样式 div。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T00:56:30.607

在我看来，首先加载背景图像的直接方法是将背景图像放在文档的前面，因此当浏览器加载页面时，图像开始加载。但我知道可能有图像的 div 可能不在前面。我厚你可以使用父 div 的背景图像属性。并使用 background-position 控制位置，也可以在父颜色上使用带有 background-color 的空 div 层来覆盖您不想看到背景颜色的空间；所以你可以加载背景图片。顺便说一句，如果你有很多背景图片要加载，这意味着你会多次请求服务器，这将是延迟。所以你可以将所有背景图像合并成一个图像，并使用“CSS Sprites”的方法在你想要的地方使用它，

# android - 如何在 android 上的 opengl 中有 2 层？

> ID：12557392
> 
> 赞同：0
> 
> 时间：2012-09-24T00:14:54.450
> 
> 标签：android, animation, opengl-es, transparency

我有一层用 1 个纹理进行动画处理

我有一个带有静态（非动画）透明图像的图层

如何将透明图像叠加在移动背景之上，以便两者都显示？

这必须发生在 opengl 中，因为我正在使用 LiveWallPaperService

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:38:05.343

在禁用深度测试并使用您选择的混合模式的情况下绘制两个带纹理的四边形。

相关OpenGL程序：

*   glDisable(GL_DEPTH_TEST);
*   glDepthMask(GL_FALSE);
*   glEnable(GL_BLEND_MODE);
*   glBlendFunc(..., ...)，有关值，请参阅文档。您可能希望 (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA) 用于常规图片或 (GL_ONE, GL_ONE_MINUS_SRC_ALPHA) 用于预乘 alpha。我建议稍后再做。

# ios6 - 从 XCode 4.5 DP4 更新到 XCode 4.5 后，应用程序在模拟器上运行，但不在设备上

> ID：12557402
> 
> 赞同：1
> 
> 时间：2012-09-24T00:17:14.960
> 
> 标签：ios6, xcode4.5

我是新手，如果我包含太多（或太少）信息，请原谅我。我尝试删除派生数据并重新启动 XCode，这是我在另一个与此类似的问题上看到的建议，但我仍然收到相同的三个错误消息：

Apple Mach-O 链接器错误：链接器命令失败，退出代码为 1

```
Ld /Users/joel/Library/Developer/Xcode/DerivedData/GayHaiku-crhnnbsqptnxaogjezyomdzplbag/Build/Intermediates/GayHaiku.build/Debug-iphoneos/GayHaiku.build/Objects-normal/armv7s/GayHaiku normal armv7s
cd /Users/joel/Desktop/GayHaiku
setenv IPHONEOS_DEPLOYMENT_TARGET 6.0
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch armv7s -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -L/Users/joel/Library/Developer/Xcode/DerivedData/GayHaiku-crhnnbsqptnxaogjezyomdzplbag/Build/Products/Debug-iphoneos -L/Users/joel/Desktop/GayHaiku/facebook-ios-sdk/build/facebook-ios-sdk.build/Release-iphoneos/facebook-ios-sdk.build/Objects-normal/armv6 -L/Users/joel/Desktop/GayHaiku/facebook-ios-sdk/build/facebook-ios-sdk.build/Release-iphoneos/facebook-ios-sdk.build/Objects-normal/armv7 -L/Users/joel/Desktop/GayHaiku/facebook-ios-sdk/build/Release-iphoneos -L/Users/joel/Desktop/GayHaiku/facebook-ios-sdk/build/Release-iphonesimulator -L/Users/joel/Desktop/GayHaiku/facebook-ios-sdk/lib/facebook-ios-sdk -F/Users/joel/Library/Developer/Xcode/DerivedData/GayHaiku-crhnnbsqptnxaogjezyomdzplbag/Build/Products/Debug-iphoneos -F/Users/joel/Desktop/GayHaiku -F/Applications/Xcode.app/Contents/Developer/Library/Frameworks -filelist /Users/joel/Library/Developer/Xcode/DerivedData/GayHaiku-crhnnbsqptnxaogjezyomdzplbag/Build/Intermediates/GayHaiku.build/Debug-iphoneos/GayHaiku.build/Objects-normal/armv7s/GayHaiku.LinkFileList -dead_strip -fobjc-arc -fobjc-link-runtime -miphoneos-version-min=6.0 -framework Accounts -framework Social -framework CFNetwork -lsqlite3 -lz.1.1.3 -framework MobileCoreServices -framework Security -framework StoreKit -framework SystemConfiguration -framework AudioToolbox -framework Twitter -framework QuartzCore -framework MessageUI -framework UIKit -framework Foundation -framework CoreGraphics -framework Parse -o /Users/joel/Library/Developer/Xcode/DerivedData/GayHaiku-crhnnbsqptnxaogjezyomdzplbag/Build/Intermediates/GayHaiku.build/Debug-iphoneos/GayHaiku.build/Objects-normal/armv7s/GayHaiku

ld: file is universal (3 slices) but does not contain a(n) armv7s slice: /Users/joel/Desktop/GayHaiku/Parse.framework/Parse for architecture armv7s
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

未分类：命令失败，退出代码为 1

```
CreateUniversalBinary /Users/joel/Library/Developer/Xcode/DerivedData/GayHaiku-crhnnbsqptnxaogjezyomdzplbag/Build/Products/Debug-iphoneos/GayHaiku.app/GayHaiku normal "armv7 armv7s"
cd /Users/joel/Desktop/GayHaiku
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
lipo -create /Users/joel/Library/Developer/Xcode/DerivedData/GayHaiku-crhnnbsqptnxaogjezyomdzplbag/Build/Intermediates/GayHaiku.build/Debug-iphoneos/GayHaiku.build/Objects-normal/armv7/GayHaiku /Users/joel/Library/Developer/Xcode/DerivedData/GayHaiku-crhnnbsqptnxaogjezyomdzplbag/Build/Intermediates/GayHaiku.build/Debug-iphoneos/GayHaiku.build/Objects-normal/armv7s/GayHaiku -output /Users/joel/Library/Developer/Xcode/DerivedData/GayHaiku-crhnnbsqptnxaogjezyomdzplbag/Build/Products/Debug-iphoneos/GayHaiku.app/GayHaiku

/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/lipo: can't open input file: /Users/joel/Library/Developer/Xcode/DerivedData/GayHaiku-crhnnbsqptnxaogjezyomdzplbag/Build/Intermediates/GayHaiku.build/Debug-iphoneos/GayHaiku.build/Objects-normal/armv7s/GayHaiku (No such file or directory)
Command /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/lipo failed with exit code 1 
```

Dysmutil 错误：无法打开可执行文件

```
GenerateDSYMFile /Users/joel/Library/Developer/Xcode/DerivedData/GayHaiku-crhnnbsqptnxaogjezyomdzplbag/Build/Products/Debug-iphoneos/GayHaiku.app.dSYM /Users/joel/Library/Developer/Xcode/DerivedData/GayHaiku-crhnnbsqptnxaogjezyomdzplbag/Build/Products/Debug-iphoneos/GayHaiku.app/GayHaiku
cd /Users/joel/Desktop/GayHaiku
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/dsymutil /Users/joel/Library/Developer/Xcode/DerivedData/GayHaiku-crhnnbsqptnxaogjezyomdzplbag/Build/Products/Debug-iphoneos/GayHaiku.app/GayHaiku -o /Users/joel/Library/Developer/Xcode/DerivedData/GayHaiku-crhnnbsqptnxaogjezyomdzplbag/Build/Products/Debug-iphoneos/GayHaiku.app.dSYM 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T07:40:15.530

我在我的一个应用程序中发现了类似的问题。

您是否链接到尚未为 armv7s 编译的外部库？如果是这样，您将收到此错误。要解决此问题，您需要找到该库并使用 armv7s 支持对其进行编译，或者您可以从有效架构中删除 armv7s。

为此，请单击项目文件，选择您的目标，然后从有效架构行中删除 armv7s 行。

这对我有用。

# c# - 不实现继承抽象成员错误，但基类实现

> ID：12557405
> 
> 赞同：0
> 
> 时间：2012-09-24T00:17:55.287
> 
> 标签：c#, inheritance, abstract

在 C# 中出现编译错误，说明我的子类没有实现继承的抽象数据成员。

结构本质上是这样的：

```
public abstract class Transaction
{
    public abstract int MyMethod();
}

public abstract class GeneralTransaction : Transaction
{
    public override int MyMethod()
    {
        return 1;
    }
}

public class SpecificTransaction : GeneralTransaction
{
} 
```

就是说SpecificTransaction 没有实现MyMethod，但是为什么要实现呢？GeneralTransaction 类实现它，SpecificTransaction 类继承自该类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T00:23:29.133

我担心你的结构比这更复杂。这个例子工作得很好。

```
class Program
{
    static void Main(string[] args)
    {
        var tr = new SpecificTransaction();
        Console.WriteLine(tr.MyMethod()); //shows 1
    }
}

public abstract class Transaction
{
    public abstract int MyMethod();
}

public abstract class GeneralTransaction : Transaction
{
    public override int MyMethod()
    {
        return 1;
    }
}

public class SpecificTransaction : GeneralTransaction
{
} 
```

# php - 带有自定义 PHPBB 登录页面的验证码

> ID：12557406
> 
> 赞同：1
> 
> 时间：2012-09-24T00:17:56.410
> 
> 标签：php, captcha, phpbb

当您多次输入错误密码但不知道如何操作时，我正在尝试在屏幕上弹出验证码。我已经找到了很多关于此的页面，但它们都涉及使用模板，并且这些页面都没有解释我必须在表单中输入的内容。

这是我到目前为止所得到的。

```
define('IN_PHPBB', true);
    global $auth, $db, $cache, $config, $user, $phpbb_root_path, $phpEx, $template;
    $phpbb_root_path = (defined('PHPBB_ROOT_PATH')) ? PHPBB_ROOT_PATH : '../main/';
    $phpEx = substr(strrchr(__FILE__, '.'), 1);
    include($phpbb_root_path . 'common.' . $phpEx);

    $user->session_begin();
    $auth->acl($user->data);

    $remember = $remember==1?true:false;
    $result = $auth->login($username, $password, $remember);

    if ($result['status'] == LOGIN_SUCCESS){
        return "LOGIN_SUCCESS";
        //Launch captcha
    }else{
        if($result['status']==LOGIN_ERROR_ATTEMPTS){
            return "LOGIN_ERROR_ATTEMPTS";
        }
        if($result['status'] == LOGIN_ERROR_EXTERNAL_AUTH){
            return "No profile exists.";
        }elseif($result['status'] == LOGIN_BREAK){
            return "Failed to create session.";
        }elseif($result['status'] == LOGIN_ERROR_PASSWORD){
            return "Incorrect Password.";
        }elseif($result['status'] == LOGIN_ERROR_USERNAME){
            return "Invalid Username.";
        }elseif($result['status'] == LOGIN_ERROR_PASSWORD_CONVERT){
            return "Internal error, failed to convert password.";
        }elseif($result['status'] == LOGIN_ERROR_ACTIVE){
            return "User is inactive.";
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T00:09:29.620

```
define('IN_PHPBB', true);
global $auth, $db, $cache, $config, $user, $phpbb_root_path, $phpEx, $template;
$phpbb_root_path = (defined('PHPBB_ROOT_PATH')) ? PHPBB_ROOT_PATH : './';
$phpEx = substr(strrchr(__FILE__, '.'), 1);
include($phpbb_root_path . 'common.' . $phpEx);
if (!class_exists('phpbb_captcha_factory'))
{
    include($phpbb_root_path . 'includes/captcha/captcha_factory.' . $phpEx);
}
$user->session_begin();
$auth->acl($user->data);
$username = isset($_POST['username']) ? $_POST['username'] : '';
$password = isset($_POST['password']) ? $_POST['password'] : '';
$remember = isset($_POST['remember']) ? $_POST['remember'] : '' ;
$remember = $remember==1?true:false;
$result = $auth->login($username, $password, $remember);
$err = '';

    switch ($result['status'])
    {
        case LOGIN_SUCCESS:
            $err .= 'Welcome ' . $user->data['username'];
        break;

        case LOGIN_ERROR_EXTERNAL_AUTH:
            $err .= 'No profile exists';
        break;

        case LOGIN_ERROR_ATTEMPTS:
            $err .= '<script type="text/javascript" src="http://www.google.com/recaptcha/api/challenge?k=your_public_key">' . "/n"
            . '</script>' . "/n"
            . '<noscript>' . "/n"
            . '<iframe src="http://www.google.com/recaptcha/api/noscript?k=your_public_key" height="300" width="500" frameborder="0"></iframe><br>' . "/n"
            . '<textarea name="recaptcha_challenge_field" rows="3" cols="40">' . "/n"
            . ' </textarea>' . "/n"
            . ' <input type="hidden" name="recaptcha_response_field" value="manual_challenge">' . "/n"
            . '</noscript>';
            $err .= 'LOGIN_ERROR_ATTEMPTS';
        break;

        case LOGIN_ERROR_PASSWORD_CONVERT:
            $err .= 'Internal error, failed to convert password.';
        break;

        case LOGIN_BREAK:
            $err .= "Failed to create session.";
        break;

        case LOGIN_ERROR_PASSWORD:
            $err .= "Incorrect Password.";
        break;

        case LOGIN_ERROR_USERNAME:
            $err .= "Invalid Username.";
        break;

        case LOGIN_ERROR_ACTIVE:
            $err .= "User is inactive.";
        break;
    }
return $err; 
```

# c - 在C中初始化具有精确长度的字符数组？

> ID：12557408
> 
> 赞同：1
> 
> 时间：2012-09-24T00:19:21.323
> 
> 标签：c

```
char ch[2];
ch[0] = 'h';
ch[1] = '\0'; 
```

或者我可以做吗

```
char ch[1];
ch[0] = 'h'; 
```

其中 '\0' 已经被暗示了？

我这样做的原因是因为我的程序中有一个循环，在这个循环中我会不断地改变这个字符并将它连接成一个更长的字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T00:22:09.090

分配 just`ch[0]`不会将零分配给`ch[1]`. 您可以在一行中使用字符串文字初始化数组中的两个字符，如下所示：

```
char ch[2] = "h"; 
```

这将放入`'h'`，`ch[0]`并将终止零放入`ch[1]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T00:22:29.257

如果愿意，您可以省略终止空字符，但您将无法使用需要终止空字符的函数，例如`strlen`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T00:24:44.017

好吧，如果您打算一遍又一遍地使用这个单字符串，一个选择是只初始化一次 null。然后你只需要改变第一个字符：

```
char ch[2] = {0};
ch[0] = 'h'; 
```

在第二种情况下，您不需要声明数组：

```
char ch = 'h'; 
```

但是您不能将其用作字符串。您的单字符“数组”中没有隐含的空字符。

为什么不能只将字符而不是字符串附加到字符串？你不需要`strcat`，如果这就是它的意思......你只需继续附加单个字符，直到你完成，然后你附加一个空值。

```
char somestring[100];
char pos = 0;
while( ... ) {
    somestring[pos] = 'x';  /* or whatever */
    pos = pos + 1;
} 
somestring[pos] = 0; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-24T00:35:18.893

`ch`是一个字符数组而不是一个字符串。

只有添加`'\0'`; ，编译器才能将其识别为字符串。但是，它无法将其识别为 char 数组。

所以，你必须添加`'\0'`，你可以这样做：

```
int ind=0;
while(...)
{
    ch[ind++]='h';
}
ch[ind]='\0'; 
```

# android - Android - 使用来自 BroadcastReceiver 的参数启动服务

> ID：12557413
> 
> 赞同：2
> 
> 时间：2012-09-24T00:20:30.843
> 
> 标签：android, service, broadcastreceiver

当收到 BOOT_COMPLETED 时，我编写了一个运行服务（MyService 类）的应用程序。

```
public class StartServiceAtBootReceiver extends BroadcastReceiver {
    public void onReceive(final Context context, Intent intent) {
        if ("android.intent.action.BOOT_COMPLETED".equals(intent.getAction())) {
            Intent inten = new Intent(context, MyService.class);
            inten.putExtra("autoLogin", true);
            context.startService(inten);
        }
    }
} 
```

这工作正常。但是，我的问题是我不知道如何从服务端接收额外的参数“autoLogin”。通常，它可以从 onBind(Intent) 方法中接收。但是，在这种情况下不会调用它，因为 BroadcastReceiver 无法绑定服务。帮我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T01:45:46.547

您可以使用

```
onStartCommand(Intent intent, int flags, int startId){
    // Get parameter value here
    intent.getBooleanExtra("autoLogin",defValue);
} 
```

# sas - 在 RSUBMIT 块中调用本地 SAS 宏？

> ID：12557435
> 
> 赞同：5
> 
> 时间：2012-09-24T00:24:24.587
> 
> 标签：sas

我有一个在本地计算机上创建的 .sas 文件中的宏。我还有一个用于测试宏的本地数据集。该数据集与远程数据集具有相同的描述符，但观察结果较少。现在，我正在尝试针对远程数据集运行我的本地宏。这基本上是我所拥有的：

这按预期工作：

```
%include "C:\my_sas_macro.sas";

%my_sas_macro(my_data=work.localdata) 
```

但这会产生一个错误（错误如下）：

```
%include "C:\my_sas_macro.sas";

rsubmit;
%my_sas_macro(my_data=remotelib.remotedata)
endrsubmit; 
```

有错误的日志：

```
125  %include "C:\my_sas_macro.sas";
136
137  rsubmit;
NOTE: Remote submit to REMOTEID.__7551 commencing.
WARNING: Apparent invocation of macro MY_SAS_MACRO not resolved.
83   %my_sas_macro(my_data=remotelib.remotedata)
     -
     180
ERROR 180-322: Statement is not valid or it is used out of proper order.
84   endrsubmit;

NOTE: Remote submit to REMOTEID.__7551 complete. 
```

我很确定我需要以某种方式将 %macro/%mend 块传输到服务器，但我不知道如何。我已经看到了，`%SYSLPUT`但那是针对*宏变量*而不是完整的宏。

无论如何，我可以在服务器上运行我的宏，而不必只通过 SSH 代码和`%include`它在那里？

谢谢！

# [编辑] 实施的解决方案

因此，根据@CarolinaJay65 的回答，我想出了以下宏，到目前为止它对我来说效果很好。

```
%macro include_on_server(file=);
%let server_file = ~/temp.sas;
%SYSLPUT macro_file=&file;
%SYSLPUT server_file = &server_file;

rsubmit;

proc upload
    infile= "&macro_file."
    outfile= "&server_file."
; run;

%include "&server_file.";
endrsubmit;

%mend include_on_server; 
```

这让我可以打电话`%include_on_server(file="C:\my_file.sas")`，然后它现在包含在我的远程会话中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T01:02:07.677

如何使用[Proc Upload](http://support.sas.com/documentation/cdl/en/connref/61908/HTML/default/viewer.htm#a002570195.htm)

```
 rsubmit;
 Proc Upload
  infile='C:\my_sas_macro.sas'
  outfile='//server/my_sas_macro.sas' ;
 run;

 %include '//server/my_sas_macro.sas';
 %my_sas_macro(my_data=remotelib.remotedata) 
```

或者您可以将整个宏分配给宏变量，然后使用 %syslput

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T03:05:29.513

你有几个选择，CarolinaJay 的建议就是其中之一。另一个是如果您不介意在本地进行处理，您可以使用 LIBNAME 来引用服务器库：

libname 服务器= slibref=; 所以 libname myserver server=unix slibref=work;

如果您的服务器在连接脚本中被命名为“unix”并且您想要它的工作目录。

PROC CATALOG，或者我认为也是 PROC COPY，可以与上面的服务器 libref 结合使用来复制代码，无论是作为宏还是简单地作为源代码。宏存储在一个目录 (SASMACR) 中，可以从一个 libref 复制到另一个（在这种情况下是从一台机器复制到另一台机器）。您还可以将用于创建宏的源存储在目录中并移动它，从而避免您必须编译宏。不过，这确实需要目录兼容，这取决于您在服务器上运行的操作系统类型与本地计算机的类型。

最后，您可以按照本文中的建议进行操作：http: [//www.nesug.org/proceedings/nesug05/io/io2.pdf](http://www.nesug.org/proceedings/nesug05/io/io2.pdf) 它将目录解决方案和 PROC UPLOAD 结合在一起，即使不兼容的机器也可以一起工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T09:29:18.317

在宏定义周围放置一个 rsubmit/endrsubmit 。当您包含本地文件时，它将远程编译宏。

编辑：

IE

c:\remote_macro.sas 包含以下内容：

```
rsubmit ;
  %MACRO MYMACRO ;
    /* do stuff */
  %MEND ;

  %MACRO ANOTHERMACRO(PARAM) ;
    /* Do other things */
    %PUT &PARAM ;
  %MEND ;
endrsubmit ; 
```

然后在 SAS 中运行以下命令：

```
%inc "c:\remote_macro.sas" ;

rsubmit ;
  %MYMACRO ;
  %ANOTHERMACRO(Hello World) ;
endrsubmit ; 
```

# bash - 仅在用户输入期间运行的计时器

> ID：12557436
> 
> 赞同：3
> 
> 时间：2012-09-24T00:24:32.093
> 
> 标签：bash, input, timer

运行 Arch Linux

我有一个脚本正在运行，它每十五分钟截取一次屏幕截图，调整它的大小，然后将它放在我的 Dropbox 文件夹中。当我将计算机单独放置一段时间并最终获得同一事物的多个屏幕截图时，这有点痛苦。

我想做的是每十五分钟使用一次屏幕截图，而不是每十五分钟一次。我想将 USE 定义为按键后 30 秒内 - 如果我坐下来输入 15 分钟，这很重要。如果我每天每小时检查一次，它只会计算我实际打字的时间。

我怎样才能做到这一点？我愿意接受任何语言的任何解决方案，使用任何现有的程序等，只要它按上述方式工作（或关闭）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T01:21:02.177

David Z 提出的问题值得回答；我们只能推测您的最终目标，或截屏的原因。但除此之外，以下是一种可能有助于实现既定目标的方法。（这种方法很粗糙；我想如果我对 xscreensaver 有更多的了解，可以提出更好的解决方案。）

首先，安装并设置[xscreensaver](http://www.jwz.org/xscreensaver/)（如果使用屏幕保护程序符合您的习惯；如果不是，请参阅下一个答案）。

如 xscreensaver[手册页](http://www.jwz.org/xscreensaver/man3.html)`xscreensaver-command -watch`中所述，将`read`循环添加到您的屏幕截图脚本中。每当 a`LOCK`或`BLANK`发生时，保存自上一个屏幕截图以来经过的时间 T 并停止计时器。发生时`UNBLANK`，将计时器重置为 15-T，或者截屏并将计时器设置为 15。

如果屏幕空白，您可能会放弃当前的屏幕截图，并让您的 15 分钟计时器定期运行。您可以使用`xscreensaver-command -time`来了解自上一个屏幕截图以来是否发生了状态更改。

下面显示了一种让您的脚本找出屏幕是否空白的更简单方法。

```
 xset -q | grep Monitor 
```

`Monitor is Off`如果屏幕空白，将产生，否则`Monitor is On`。假设您的屏幕保护程序关闭延迟为 K 分钟，而您的脚本唤醒间隔为 L 分钟。令 W1、W2 表示两个连续的脚本唤醒。假设在 W1 xset 表示监视器打开，而在 W2 表示它关闭。然后在 W2 中，您知道在最后 K 分钟内没有任何键盘活动。但是，空闲时间间隔可能长达 K+L 分钟。如果您想收紧界限，请减小 K 和 L，或使用计数器。这是一个说明使用计数器的脚本。要查看运行中的脚本，请将 3m 替换为 1 并运行它。然后将 1 改回 3m 并将您的屏幕截图程序代替`echo`in 函数 ss。

```
#!/bin/bash

ss() {
    echo Taking snapshot at $(date)
}

busy=0
while true; do
    xset -q | grep -q "Monitor is On" && ((++busy > 4)) && busy=0 && ss
    sleep 3m
done 
```

# activemq - ActiveMQ -- 在 Broker 重新启动之前不会传递消息

> ID：12557437
> 
> 赞同：0
> 
> 时间：2012-09-24T00:24:33.900
> 
> 标签：activemq, messages, restart, broker

我正在使用 ActiveMQ v5.6。它有一个消费者。它在大多数情况下都能正常工作。但有时，消息不会被发送，它们会堆积在队列中。但是，一旦我重新启动代理，它就会再次正常工作。我搜索以查看是否有其他人面临同样的问题，并发现了许多已报告该问题的网站。例如，

[http://activemq.2283324.n4.nabble.com/Stuck-messages-Dispatch-issues-td2367852i20.html](http://activemq.2283324.n4.nabble.com/Stuck-messages-Dispatch-issues-td2367852i20.html)

但是所有这些帖子都可以追溯到 2008 年。这个问题已经解决了吗？还有其他人面临同样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:05:10.170

也许它与流量控制有关

*   [http://activemq.apache.org/what-happens-with-a-fast-producer-and-slow-consumer.html](http://activemq.apache.org/what-happens-with-a-fast-producer-and-slow-consumer.html)
*   [http://activemq.apache.org/producer-flow-control.html](http://activemq.apache.org/producer-flow-control.html)

# javascript - 使用 javascript 的 MVC 和其他代码组织技术的小规模对比示例？

> ID：12557439
> 
> 赞同：0
> 
> 时间：2012-09-24T00:24:53.190
> 
> 标签：javascript

去年我一直在自学编码，现在我对代码的实际外观很感兴趣。我对此感到非常困惑。就个人而言，我真的很喜欢 javascript 如何创建类（函数构造函数）和派生对象。在这个固有的约束之外，我不知道“组织良好的代码”到底是什么样子。所以我想问一下是否有任何网站使用一个（非常）小的简单示例程序（例如加税的收银机）演示各种组织方法，例如 MVC。该程序将以多种方法编写，因此读者可以在与其他方法进行比较时对每一种方法都有一种“感觉”。

# python - 在谷歌应用引擎上获取 Dropbox oauth 身份验证

> ID：12557441
> 
> 赞同：0
> 
> 时间：2012-09-24T00:25:50.443
> 
> 标签：python, google-app-engine, oauth, dropbox-api

我正在尝试将文件上传到我正在制作的应用程序中的保管箱，该应用程序托管在谷歌应用程序引擎上。由于我使用的是谷歌应用引擎，因此我需要使用 Dropbox 中的 REST api。为了提出请求，我正在使用[这个库](http://code.google.com/p/python-rest-client/)。现在我已经开始在第一方解决问题了。我不知道什么参数，我在文档中的任何地方都找不到关于如何发出 oauth 请求的任何信息（即使 api 文档说不需要参数）。

```
conn = Connection('http://api.dropbox.com/1/oauth/request_token', username='myusername', password='mypassword')
conn.request_post('') 
```

这是我设法得到 401 错误的代码（即使我知道它看起来不正确）。

无论如何，请帮助！为了记录，我稍后会提出一个 put 请求（如果这有帮助的话）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:42:46.760

当 Dropbox 的文档说“此方法没有特定于 Dropbox 的参数”时，它可能会有点误导。他们所说的是，除了 Oauth 所需的参数之外，他们不需要任何其他参数。如果他们实际上概述了他们自己的文档中需要哪些参数的示例，我更愿意（例如，[flickr](http://www.flickr.com/services/api/auth.oauth.html)在“签名请求”下有相当详细的文档）。

Dropbox 将您指向 Oauth 规范本身，尽管它有些难以解析。基本上，请求将需要这些参数：

*   oauth_consumer_key：消费者密钥。
*   oauth_signature_method：Consumer 用于签署请求的签名方法。
*   [oauth_signature：签名请求](http://oauth.net/core/1.0/#signing_process)中定义的签名。
*   oauth_timestamp：在[Nonce 和 Timestamp 中定义。](http://oauth.net/core/1.0/#nonce)
*   oauth_nonce：在[Nonce 和 Timestamp 中定义。](http://oauth.net/core/1.0/#nonce)

**来源： http:** [//oauth.net/core/1.0/#rfc.section.6.1.1](http://oauth.net/core/1.0/#rfc.section.6.1.1)

# ios - 使用 UIManagedDocument 的 iPhone Simulator 5.1 和 Xcode 4.5 中的错误

> ID：12557442
> 
> 赞同：9
> 
> 时间：2012-09-24T00:26:16.057
> 
> 标签：ios, xcode, core-data, xcode4.5, uimanageddocument

我有一个非常奇怪的问题，过去两天我一直在试图解决......我有一段代码在 Xcode 4.4 和 iOS 5.1 模拟器上运行良好，使用 5.1 SDK。在我更新到 Xcode 4.5 和 6.0 SDK 后，我的代码在 iOS 5.1 模拟器中停止工作......即使它在 iOS 6.0 模拟器中运行得非常好。有什么我不知道的变化吗？

这是代码：

```
- (void)useDocument
{
    if (![[NSFileManager defaultManager] fileExistsAtPath:[self.database.fileURL path]]){
        [self.database saveToURL:self.database.fileURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success){
            [self setupFetchedResultsController];
    }];
    } else if (self.database.documentState == UIDocumentStateClosed){
        [self.database openWithCompletionHandler:^(BOOL success){
            [self setupFetchedResultsController];
        }];          
    } else if (self.database.documentState == UIDocumentStateNormal) {
        [self setupFetchedResultsController];
    }
} 
```

由于某种原因，saveToURL 和 openWithCompletionHandler 永远不会在 5.1 模拟器中返回。有谁知道为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T05:58:55.397

我在 iPhone Simulator 5.1 下也有同样的问题。文件在很长一段时间（30 秒）后创建。但是永远不会调用完成处理程序。你在设备上试过吗？

编辑：这似乎是 iOS Simulator 5.1 中的一个错误。我用 iOS 5.1.1 在我的旧 iPad 上编译了代码，它可以正常工作！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T14:27:41.517

不能说你的项目，但这里肯定是 Xcode 4.5。

我在虚拟机上有一份带有 Simulator 5.1 的 Xcode 4.3.1 副本，你猜怎么着：那个完美无瑕

-> Xcode4.3.1/Simulator5.1 有效！

-> Xcode4.5 /Simulator5.1 出现故障

-> Xcode4.5.1/Simulator5.1 故障

作为一种解决方法，您可以在 Xcode -> Preferences -> Downloads 中下载 5.0 版模拟器。那个有效。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-10T08:53:53.150

我不相信问题出在模拟器上。我遇到了完全相同的问题（应用程序在 6.0 上运行，但不在 5.x 上运行），我也尝试在设备中运行它，它发生的情况完全相同。（我[在这里](https://stackoverflow.com/questions/12626728/issues-running-ios-5-1-simulator-using-xcode-4-5/)解释了我的问题）

我的问题发生在 5.0 和 5.1 中。例如，我什至无法在任何 iOS 5.x 模拟器中正确运行“主从应用程序”模板，但它在 6.0 中运行良好。即使我在设备中尝试此模板，它也无法正常工作。所以我真的相信问题出在 XCode 4.5 中。

# sql - SQL - 根据时间戳选择月份的所有记录

> ID：12557446
> 
> 赞同：0
> 
> 时间：2012-09-24T00:26:58.057
> 
> 标签：sql, sql-server-2008, tsql

我有一个 SQL 查询，可以选择 24 小时内的所有记录，但是，我需要更新它以选择一个月内的所有记录（相对于记录时间戳）。因此，例如，如果我选择了 2 月内的任何记录，它应该返回从月初到月底的所有记录。

我每天查询的代码是：

```
SELECT  Snapshot.xId,  MAX(Snapshot.TimeStamp) AS Timestamp_Actual, 
                dateadd(dd, datediff(dd,0, MAX(Snapshot.TimeStamp)), 0) AS TimestampRange_Start,
                dateadd(MI, 1439, dateadd(dd, datediff(dd,0, MAX(Snapshot.TimeStamp)), 0)) AS TimestampRange_End
                FROM Snapshot
                GROUP BY Snapshot.xId 
```

到目前为止，我所拥有的是：

```
SELECT  Snapshot.xId,  MAX(Snapshot.TimeStamp) AS Timestamp_Actual, 
                dateadd(mm, datediff(mm,0, MAX(Snapshot.TimeStamp)), 0) AS TimestampRange_Start,
                dateadd(dd, 0, dateadd(mm, datediff(mm,0, MAX(Snapshot.TimeStamp)), 0)) AS TimestampRange_End
                FROM Snapshot
                GROUP BY Snapshot.xId 
```

从上面的语句中，我可以包含一个标准的 WHERE 子句来检查 TimestampRange_Start 和 TimestampRange_End 的值，以查看 Timestamp_Actual 是否介于它们之间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T00:57:21.000

```
SELECT Snapshot.xId, MAX(Snapshot.TimeStamp) AS Timestamp_Actual
  FROM Snapshot
 GROUP BY Snapshot.xId
HAVING MAX(Snapshot.TimeStamp) >= dateadd(mm, datediff(mm, 0, getdate()), 0)
   AND MAX(Snapshot.TimeStamp) <  dateadd(mm, 1+datediff(mm, 0, getdate()), 0) 
```

# python - 将字符串强制转换为 unicode 时如何使 python 2.x 发出警告？

> ID：12557447
> 
> 赞同：4
> 
> 时间：2012-09-24T00:27:04.813
> 
> 标签：python, unicode, python-2.x

一个非常常见的编码错误来源是，当您将字符串`unicode`与`unicode`. 这可能会导致混合编码问题并且很难调试。

例如：

```
import urllib
import webbrowser
name = raw_input("What's your name?\nName: ")
greeting = "Hello, %s" % name
if name == "John":
    greeting += u' (Feliz cumplea\xf1os!)'
webbrowser.open('http://lmgtf\x79.com?q=' + urllib.quote_plus(greeting)) 
```

如果您输入“John”，将失败并出现一个神秘的错误：

```
/usr/lib/python2.7/urllib.py:1268: UnicodeWarning: Unicode equal comparison faile
d to convert both arguments to Unicode - interpreting them as being unequal
  return ''.join(map(quoter, s))
Traceback (most recent call last):
  File "feliz.py", line 7, in <module>
    webbrowser.open('http://lmgtf\x79.com?q=' + urllib.quote_plus(greeting))
  File "/usr/lib/python2.7/urllib.py", line 1273, in quote_plus
    s = quote(s, safe + ' ')
  File "/usr/lib/python2.7/urllib.py", line 1268, in quote
    return ''.join(map(quoter, s))
KeyError: u'\xf1' 
```

当实际错误与实际强制发生的地方相距甚远时，特别难以追查。

当字符串被强制转换为 unicode 时，如何配置 python 以立即发出警告或异常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T01:47:09.043

在问了这个问题后，我做了更多的研究并找到了完美的答案。Armin Ronacher 创建了一个很棒的小工具，叫做[unicode-nazi](http://pypi.python.org/pypi/unicode-nazi)。只需安装它并像这样运行您的程序：

```
python -Werror -municodenazi myprog.py 
```

你会在强制发生的地方得到追溯：

```
Traceback (most recent call last):
  File "/usr/lib/python2.7/runpy.py", line 162, in _run_module_as_main
    "__main__", fname, loader, pkg_name)
  File "/usr/lib/python2.7/runpy.py", line 72, in _run_code
    exec code in run_globals
  File "SITE-PACKAGES/unicodenazi.py", line 128, in <module>
    main()
  File "SITE-PACKAGES/unicodenazi.py", line 119, in main
    execfile(sys.argv[0], main_mod.__dict__)
  File "myprog.py", line 4, in <module>
    print foo()
  File "myprog.py", line 2, in foo
    return 'bar' + u'baz'
  File "SITE-PACKAGES/unicodenazi.py", line 34, in warning_decode
    stacklevel=2)
UnicodeWarning: Implicit conversion of str to unicode 
```

* * *

如果您正在处理本身触发隐式强制的 python 库，并且您无法捕获异常或以其他方式解决它们，则可以省略`-Werror`：

```
python -municodenazi myprog.py 
```

并且至少在 stderr 发生警告时看到打印出来的警告：

```
/SITE-PACKAGES/unicodenazi.py:119: UnicodeWarning: Implicit conversion of str to unicode
  execfile(sys.argv[0], main_mod.__dict__)
barbaz 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T00:58:53.020

这个错误一点也不神秘。我可以从中收集到`urllib.quote()`（with is called by `quote_plus()`）不能很好地处理 unicode。一些快速的谷歌搜索，我发现[这个以前的 SO question](https://stackoverflow.com/questions/5557849/is-there-a-unicode-ready-substitute-i-can-use-for-urllib-quote-and-urllib-unquot)要求 unicode 安全的替代品。不幸的是，似乎都不存在。

# java - 使用 Java 套接字，连接到不同网络上的另一台设备的正确地址是什么？

> ID：12557448
> 
> 赞同：0
> 
> 时间：2012-09-24T00:27:20.227
> 
> 标签：java, android, sockets, network-programming

我想使用 java Sockets 连接不同网络上的两个 Android 设备。一台设备将充当服务器，另一台设备充当客户端。服务器必须发布哪个地址以便客户端可以连接到它？

`java.net`具有提供具有本地主机信息（主机名，本地主机地址）的实例`InetAddress`的方法的类。`getLocalHost()`如果我在我的机器上运行它，我得到的地址是 192.168.1.101。这是服务器设备必须发布以便客户端设备连接到它的地址吗？我假设没有，因为它是本地地址。那么，我在哪里可以获得每个设备的正确地址呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T02:33:10.550

[您可以使用NetworkInterface](http://developer.android.com/reference/java/net/NetworkInterface.html)枚举所有网络接口。您可能还需要处理连接更改，例如从 3G 切换到 Wifi 等。一般情况下，您的设备不能保证具有全局 IP 地址，因此除非您仅在自己的网络上运行它并且您有有效的 IP 或已设置必要的 NAT/端口转发等。您可能无法连接到它。

# php - 左连接数

> ID：12557450
> 
> 赞同：3
> 
> 时间：2012-09-24T00:27:56.473
> 
> 标签：php, mysql, left-join

好吧，我想我可能会以错误的方式解决这个问题，但我尝试了很多不同的想法，似乎找不到正确的方法来做到这一点，所以希望有人能够将我推向正确的方向。

基本上，我会在访问者访问我的网站时记录他们的 IP 地址，然后确定哪些 IP 地址属于企业。

所以表一有一个访问过我网站的人的 IP 地址的长列表，而表二有一个我已经确定的 IP 地址列表。

现在我要做的是找出表 1 中的 IP 地址有多少已被识别。

我下面的代码匹配和分组 IP 地址，并显示表 2 中的 IP 地址出现在表 1 中的次数。

但是我想要得到的只是一个数字而不是一组数字，我尝试过几种方式编写查询，但只能让它与一个组一起工作

```
SELECT ip_stats.ip, COUNT(ip_stats.ip) 
FROM ip_stats 
LEFT JOIN main USING (ip)
GROUP BY ip_stats.ip 
```

ip_stats 是表一，有很长的访问我网站的人的名单。main 是表二，其中包含已识别的 IP 地址的详细信息。

两个表都有自己的主键，它们都是 id。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T00:32:24.257

`COUNT``ip`桌上`main`的_

```
SELECT ip_stats.ip, COUNT(`main`.ip)
FROM ip_stats 
LEFT JOIN main USING (ip)
GROUP BY ip_stats.ip 
```

**更新 1**

啊，好吧，所以你只想要`ip`主表上存在的所有值的一个值，对吗？那么你不需要为此使用`LEFT JOIN`，而是使用`INNER JOIN`

```
SELECT COUNT(DISTINCT ip_stats.ip)
FROM ip_stats 
     INNER JOIN main USING (ip) 
```

`DISTINCT`已添加，因此仅计算唯一值。

# c++ - 获取程序在 C/C++/Obj-C 中编译的时间

> ID：12557451
> 
> 赞同：1
> 
> 时间：2012-09-24T00:28:04.657
> 
> 标签：c++, objective-c, ios, c, compilation

我为我的 iPhone 和 iPad 应用程序开发了一个简单的实用程序，它在应用程序的右下角放置了一个小水印视图，显示捆绑版本，并指示该应用程序仍在开发中（您会惊讶于有多少客户给定一个测试版本作为敏捷过程的一部分，将它展示给他们的同事，而不告诉他们这是一个测试版本，我们因此而受到抨击）。

作为其中的一部分，我想包括该应用程序特定版本的编译日期。例如，如果我在 2012 年 9 月 24 日星期一的上午 8 点 53 分编译它，它会在水印上显示。在一天的时间里，我经常向很多人发送许多构建，修复许多小问题，尤其是在我调整 UI 和抛光的开发后期。能够将构建日期与版本控制消息等进行比较会很有帮助，因为不同的测试人员通常会报告已修复的问题。对于简单的事情，例如移动标签或纠正拼写错误，增加版本号并没有多大意义，直到完成了美好的一天工作。

现在你有了我的动机，我想知道是否有办法在编译时设置编译发生的时间。我希望它是某种 C 宏，我可以设置将值分配给变量。

有谁知道这是否可能。

提前致谢。

编辑：我找到了。我不敢相信我的其他谷歌都没有发现这一点。典型的是在我提出问题后立即发现。对于任何有兴趣的人，这是此代码。或者，如果管理员想将其删除为轻浮，那也很好:)

```
NSLog(@"%s %s %s",__DATE__, __TIME__, __TIMESTAMP__); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T00:32:23.173

在 C 中，预定义的宏名称`__TIME__`和`__DATE__`扩展为分别包含编译时间和日期的字符串文字。

# java - VariableDeclaratorId 和错位

> ID：12557452
> 
> 赞同：1
> 
> 时间：2012-09-24T00:28:07.163
> 
> 标签：java, android

我是 JAva 和 Android 的新手，我正在开发我的第一个测试应用程序。

我有这段代码（这是整个代码）：

```
package test.test;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.TextView;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    int num_seeds = 15 ;
    int num_coins = 100 ;
    int seed_buy_price = 10 ;
    int seed_sell_price = 8 ;
    String S_num_seeds = Integer.toString(num_seeds) ;

    TextView textView_seeds_current_display = (TextView) findViewById(R.id.textView_seeds_current_display) ;

    textView_seeds_current_display.setText(S_num_seeds) ;

} 
```

但是 Eclipse 在最后一行向我显示了一个错误：此行的多个标记 - 令牌“S_num_seeds”上的语法错误，此令牌后预期的 VariableDeclaratorId - 令牌上的语法错误，错位的构造

我是 Java 新手，但我仍然不能很好地理解这一点。有人可以指出我做错了什么吗？我想我正在遵循这里的建议：

[如何在屏幕上显示变量的值](https://stackoverflow.com/questions/5821051/how-to-display-the-value-of-a-variable-on-the-screen)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T02:04:17.503

这行程序代码：

```
 textView_seeds_current_display.setText(S_num_seeds); 
```

出现在您的类定义中。它需要出现在方法中。它可能需要在构造函数中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-24T00:47:41.040

代码接缝很好......

有时，当线路正常时，日食会显示类似的错误。尝试以下操作：将光标置于行上，按 ctrl d（删除行），然后按 ctrl z（恢复已删除的行）。如果这是一个“假”错误，它就会消失。

祝你好运

# jquery - HTML5 获取更改时的输入文件计数

> ID：12557453
> 
> 赞同：3
> 
> 时间：2012-09-24T00:28:17.963
> 
> 标签：jquery, html

我需要使用 html5 File API 来获取在输入文件元素中选择的文件数量并在另一个元素中设置值。

HTML

```
<div class="form-row">
    <label>Main Image</label>
    <div class="form-text">None Selected</div> 
    <input type="file" class="txtbox" name="proImage" id="proImage" value="" />
</div> 
```

jQuery

```
$('input[type=file]').change(function () {
    $fileCount = $(this).files.length;
    $(this).parent('.form-row').find('.form-text').html($fileCount + 'Selected');
}) 
```

有人知道我要去哪里错了吗？所有帮助表示赞赏

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T00:32:47.583

`files`不是 jQuery 对象的属性。

改变这个：

```
$fileCount = $(this).files.length; 
```

至：

```
$fileCount = this.files.length; 
```

您还可以缩小选择器：

```
$('input[type=file]').change(function () {
    fileCount = this.files.length;
    $(this).prev().text(fileCount + 'Selected');
}) 
```

[http://jsfiddle.net/hHgEF/](http://jsfiddle.net/hHgEF/)

# php - 谷歌地图未显示在 PHP/MySQL 页面中

> ID：12557457
> 
> 赞同：0
> 
> 时间：2012-09-24T00:29:04.340
> 
> 标签：php, javascript, mysql, google-maps, google-maps-api-3

我有一个 PHP 页面，它在 Google 地图的信息窗口中显示 MySQL 数据。上次我检查时页面显示正常，但现在不会绘制地图。有人可以为我指出正确的方向吗？

这是网址： [http ://tinyurl.com/8jy78xq](http://tinyurl.com/8jy78xq)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T00:35:24.470

这是宽度和高度的问题，试试这个css

```
#map {
   top: 0;
   left: 0;
   width: 300px;
   height: 300px;
   border: none;
} 
```

# c# - 如何获取集合的不可变值

> ID：12557458
> 
> 赞同：3
> 
> 时间：2012-09-24T00:29:10.000
> 
> 标签：c#, algorithm, design-patterns, collections

作为我的演示架构的一部分，我有一个实现 IEditableObject 的基类，因此当 BeginEdit() 拍摄状态快照时，将通过反射为所有可写的非集合属性创建一个 Dictionary。

```
var propertyInfos = GetType().GetWritableNonCollectionPropertyInfos();
var dic = propertyInfos
            .ToDictionary(pi => pi.Name, pi => pi.GetValue(this, null)); 
```

该字典是 IsDirty 跟踪和回滚 CancelEdit() 的基础。

默认行为排除集合的原因是因为它们通常不是必需的，枚举起来可能很昂贵，而且通常很痛苦。

关于这个问题，我有一个需要收集状态的用*例*。它是自定义对象的 HashSet，一次很少有超过 5 个。从上面的代码可以看出，集合的值最终将成为对集合本身的引用；这将随着集合的变化而变化，因此您无法判断它是否真的很脏。

因此，我需要为集合存储一些值，这些值既不可变，又可与集合的值在更改时进行比较。这是我想出的总体思路：

1.  提供受保护的 IncludeCollections 标志
2.  当标志为真时，给子类一个模板方法来返回仅集合属性的附加键值对

    ```
     if(IncludeCollections) {
            var collectionOnlyDictionary = GetCollectionOnlyDictionary();
            foreach (var kvp in collectionOnlyDictionary) {                 
                dic.Add(GetCollectionKey(kvp.Key), kvp.Value);
            }
        } 
    ```

3.  提供另一个模板方法来获取集合的一些不可变值。这应该允许变化，但通常可能是这样的算法

    ```
    protected  override object GetLatestCollectionValue(string key) {
        if (key != _key_AgeHistoryCollection)
            return null;
        return GetImmutableCollectionValue(AgeHistory);
    }  

    protected static object GetImmutableCollectionValue<T>(ICollection<T> c) {
        var hash = c.Count.GetHashCode();
        unchecked {
            hash = c.Aggregate(hash, (current, i) => current += i.GetHashCode());
        }
        return hash;        
    } 
    ```

这实际上似乎有效，但是......它很复杂！有没有人看到更简单和/或更有效的方法来跟踪收集状态？

这个问题的主旨确实是可以回答的，GetImmutableCollectionValue 方法是否看起来像是一个很好的通用算法来获取集合的不可变值？

干杯

# 一个解法

冒着进一步冒犯“警察无法回答的问题”的风险......这是一个解决方案。

是的，我认为通用算法很有用，我将其作为扩展添加。我添加了另一个扩展来加速和简化基于具有 DisplayName 属性的域超类的集合的过程：

```
 public static int GetVmCollectionHashCode<T>(this ICollection<T> c) where T : ViewModelBase
    {
        if (c == null)
            return 0;

        var hash = c.Count.GetHashCode();
        unchecked
        {
            hash = c.
                Aggregate(hash, (current, i) => current += i.DisplayName.GetHashCode());
        }
        return hash;
    } 
```

但我得到的真正见解是，不是将我的 EditingNotifier 超类与集合处理混淆和复杂化，而是将集合本身​​封装到一个类中，并在修改后通知它包含类，所以：

```
/// <summary>
/// A collection with the ability to broadcast <see cref="Messenger"/> notifications
/// when the collection is altered. Subscribers that need to know if they are dirty 
/// because this collection was modified can use the information to calculate a stateful
/// proerty using <see cref="EditingHelpers.GetVmCollectionHashCode{T}"/>,
/// </summary>
public class PcmDetailCollectionVm : ObservableCollection<PcmDetailVm>
{
    #region Creation

    public PcmDetailCollectionVm(IEnumerable<PcmDetailVm> pcms) : base(pcms) {

        // set INPC for each vm
        foreach (var vm in this)
            vm.PropertyChanged += OnDetailVmChanged;
    }

    #endregion

    #region Collection Modification Handlers

    public void AddDetailVm(PcmDetailVm item) {
        Add(item);
        item.PropertyChanged += OnDetailVmChanged;
        Messenger.GetInstance.Notify(MessengerMessages.PcmCollectionChanged, this);
    }

    public void RemoveDetailVm(PcmDetailVm item) {
        Remove(item);
        Messenger.GetInstance.Notify(MessengerMessages.PcmCollectionChanged, this);
    }

    private readonly string _propName_DisplayName = ExprHelper.GetPropertyName<ViewModelBase>(vm => vm.DisplayName);

    private void OnDetailVmChanged(object sender, PropertyChangedEventArgs e) {
        if (e.PropertyName == _propName_DisplayName)
            Messenger.GetInstance.Notify(MessengerMessages.PcmCollectionChanged, this);
    }

    #endregion
} 
```

现在包含类只需要一个在收到通知时更新的简单属性，并且状态跟踪正常进行。

/// 包含类

```
Messenger.GetInstance.Register(MessengerMessages.PcmCollectionChanged, (Action<PcmDetailCollectionVm>)(OnPcmCollectionChanged));

    public int DetailVmsHashCode
    {
        get { return _detailVmsHashCode; } 
        protected set {
            if (_detailVmsHashCode == value)
                return;
            _detailVmsHashCode = value;
            Notify(() => DetailVmsHashCode);
        }
    }
    private int _detailVmsHashCode;

    private void OnPcmCollectionChanged(PcmDetailCollectionVm obj)
    {
        if(!ReferenceEquals(obj, DetailVms))
            return;
        DetailVmsHashCode = DetailVms.GetVmCollectionHashCode();
    } 
```

生活又好起来了……

# jquery - 某些东西无法正常工作 Ajax 搜索

> ID：12557463
> 
> 赞同：1
> 
> 时间：2012-09-24T00:29:51.720
> 
> 标签：jquery, ajax, jquery-ui, search, jquery-ui-autocomplete

我这里有这个 javascript，它可以像音乐搜索引擎的搜索建议一样工作。我在输入第一个字符时遇到了这个问题，它工作正常，但如果我输入更多字符，它会在一行中显示我的结果，没有图片中断和everithyng。请有人看看并告诉我我做错了什么。这是示例[http://jsfiddle.net/coladeu/Qhj5N/24/](http://jsfiddle.net/coladeu/Qhj5N/24/)

```
<script>var keyword;
    $("input#selectedInput").bind("autocompleteselect", function (event, ui) {        
alert("Sel item " + JSON.stringify(ui.item.json));
}).autocomplete({
appendTo: "#list",
source: function (request, response) {
    keyword= $('#selectedInput').val();
    //alert("success");
    $.ajax({
        url: "http://itunes.apple.com/search?term=" + keyword + "&entity=musicTrack",
        dataType: "jsonp",
        data: {
            featureClass: "P",
            style: "full",
            maxRows: 12,
            name_startsWith: request.term
        },
        success: function (data) {
            response($.map(data.results, function (item) {
                itunesJson = item;
                return {
                    label: "<li><img src='" + item.artworkUrl30 + "' alt='no photo'/>" + item.trackName + "</li>",
                }
            }));
            var elm = $("#list");
            elm.html(elm.text());
        },
    });
}
                     });​&lt;/script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T01:10:23.123

这里有一些问题。主要问题是您应该重写该`_renderItem`函数以自定义列表的显示，如[本演示](http://jqueryui.com/demos/autocomplete/#custom-data)中所示。

`label`这意味着您应该执行以下操作，而不是使用 HTML 填充每个项目的属性：

```
$("input#selectedInput").bind("autocompleteselect", function(event, ui) {
    alert("Sel item " + JSON.stringify(ui.item));
}).autocomplete({
    appendTo: "#list",
    source: function(request, response) {
        $.ajax({
            url: "http://itunes.apple.com/search?term=" + request.term + "&entity=musicTrack",
            dataType: "jsonp",
            data: {
                featureClass: "P",
                style: "full",
                maxRows: 12,
                name_startsWith: request.term
            },

            success: function(data) {
                response($.map(data.results, function(item) {
                    itunesJson = item;
                    return {
                        imgUrl: item.artworkUrl30 ,
                        label: item.trackName
                    }
                }));
            },
        });
    }
}).data("autocomplete")._renderItem = function(ul, item) {
    return $("<li />")
        .data("item.autocomplete", item)
        .append("<a><img src='" + item.imgUrl + "' alt='no photo' />" + item.label + "</a>")
        .appendTo(ul);
};​ 
```

**示例：http:** [//jsfiddle.net/Qhj5N/26/](http://jsfiddle.net/Qhj5N/26/)

# iphone - 弹出窗口中的 UIPickerView - didSelectRow 没有被调用

> ID：12557467
> 
> 赞同：0
> 
> 时间：2012-09-24T00:30:45.800
> 
> 标签：iphone, delegates, uipickerview, uipopovercontroller

我的`ViewController`应用程序有一个按钮，单击该按钮时，我需要显示一个弹出视图以允许用户从地址列表中进行选择。

我已经实现了`ViewController`如下：

```
@interface WelcomeViewController : UIViewController<UIPickerViewDelegate, UIPickerViewDataSource, UIPopoverControllerDelegate> 
```

我已经为选择器实现了必要的委托功能。我看到弹出窗口出现并`UIPickerView`在其中显示正确填充的地址。当我在其框架之外选择时，弹出窗口也会消失 - 因此该部分似乎工作正常。

然而，选择器只是不响应选择（它什么都不做！） - 在调试器中我看到 didSelectRow 没有被调用。

我已经尝试了我能想到的一切！任何帮助和建议将不胜感激！

9/24 更新：我得到了这个工作，但不得不牺牲使用 Popover ViewController 所以它不是一个理想的解决方案。我这样做如下：

1.  为地址创建了一个 UIPickerView 并将其添加为 WelcomeViewController 的子视图
2.  在 WelcomeViewController 中实现了以下 UIPickerViewDelegate 函数 - numberOfComponentsInPickerView、numberOfRowsInComponent、didSelectRow、titleforRow 并将pickerview 的委托和数据源属性设置为 self（即 WelcomeViewController）

现在可以了，这个实现的缺点是当我在pickerview的框架之外选择时地址选择器不会消失（我想这是因为它不在popoverviewcontroller内）我通过在pickerview上设置hide属性来解决这个问题用户执行下一个动作。我在 Stackoverflow 中读到了一个更好的解决方法，其中整个背景是一个大按钮的一部分——如果我找不到让选择器进入弹出窗口的方法，我可能会求助于此）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T00:43:11.053

如果您还没有将选择器委托属性设置为您的 WelcomeViewController 实例

# c++ - 继承和重载函数

> ID：12557469
> 
> 赞同：1
> 
> 时间：2012-09-24T00:30:59.333
> 
> 标签：c++, oop

与其进行冗长的解释，我认为几行代码会更清楚地解释我的问题。假设我有 2 个类，一个继承自另一个：

```
#include <iostream>
class A{
    public: 
        void parse() 
        {
            treatLine();
        };
        void treatLine()
        {
            std::cout << "treatLine in A" << std::endl;
        }
};

class B : public A{
    public:
        void treatLine()
        {
            std::cout << "treatLine in B" << std::endl;
        }
};

int main()
{
    B b;
    b.parse();
    return 0;
} 
```

执行时，令我惊讶的是，它会打印“treatLine in A”。是否可以使用 B 类型的对象调用 B 类中的函数 TreatLine（即上面的代码将打印“B 中的treatLine”）？并保留创建 A 类型对象的可能性，该对象将打印“treatLine in A”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T00:32:32.497

`treatLine`虚拟化：

```
virtual void treatLine() {
    std::cout << "treatLine in A" << std::endl;
} 
```

这样，将根据对象的*运行时*类型（称为“动态类型”）调用函数，而不是对象的*编译时*类型（称为“静态类型”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T00:32:55.200

Make the treatLine function in A virtual

# java - 试图从网站获取源代码

> ID：12557471
> 
> 赞同：0
> 
> 时间：2012-09-24T00:31:22.400
> 
> 标签：java, html

我正在尝试从网站获取一行源代码，然后将该行返回到 main。我在定义 InputStream 的行中不断收到错误。为什么我在此行收到错误？

```
public class MP3LinkRetriever
{
    private static String line;

public static void main(String[] args)
{
    String link = "www.google.com";
    String line = "";

    while (link != "")
    {
        link = JOptionPane.showInputDialog("Please enter the link");

        try
        {
            line = Connect(link);
        }
        catch(Exception e)
        {
        }

        JOptionPane.showMessageDialog(null, "MP3 Link: " + parseLine(line));

        String text = line;

        Toolkit.getDefaultToolkit( ).getSystemClipboard()
        .setContents(new StringSelection(text), new ClipboardOwner()
        { 
            public void lostOwnership(Clipboard c, Transferable t) { } 
        });

        JOptionPane.showMessageDialog(null, "Link copied to your clipboard");

    }
}

public static String Connect(String link) throws Exception { 

    String strLine = null; 
    InputStream in = null; 
    try { 
        URL url = new URL(link); 
        HttpURLConnection uc = (HttpURLConnection) url.openConnection(); 

        in = new BufferedInputStream(uc.getInputStream()); 

        Reader re = new InputStreamReader(in); 

        BufferedReader r = new BufferedReader(re); 

        int index = -1; 

        while ((strLine = r.readLine()) != null && index == -1) { 
            index = strLine.indexOf("<source src"); 
        } 

    } finally { 
        try { 
            in.close(); 
        } catch (Exception e) { 
        } 
    } 

    return strLine; 
} 

public static String parseLine(String line)
{
    line = line.replace("<source", "");
    line = line.replace(" src=", "");
    line = line.replace("\"", "");
    line = line.replace("type=", "");
    line = line.replace("audio/mpeg", "");
    line = line.replace(">", "");

    return line;
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T00:43:47.953

`strLine = r.readLine();`当它到达内容的末尾时将返回`null`，但在您阅读该行并且在您的代码中使用它之前，您不会检查是否有可能`null`......

尝试类似...

```
while ((strLine = r.readLine()) != null && index == -1) {
    index = strLine.indexOf("<source src");
} 
```

另外，请确保在离开该方法之前关闭您的蒸汽......

```
InputStream in = null;
try {
    // The rest of your code...
} finally {
    try {
        in.close();
    } catch (Exception exp) { // We don't really care about this one..
    }
} 
```

**更新 - 完整示例**

这是我正在使用的测试代码并且工作正常......

```
public class TestWebDownload {

    public static void main(String[] args) {
        try {
            Connect("http://www.google.com.au");
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

    public static String Connect(String link) throws Exception {

        String strLine = null;
        InputStream in = null;
        try {
            URL url = new URL(link);
            HttpURLConnection uc = (HttpURLConnection) url.openConnection();

            in = new BufferedInputStream(uc.getInputStream());

            Reader re = new InputStreamReader(in);

            BufferedReader r = new BufferedReader(re);

            int index = -1;

            while ((strLine = r.readLine()) != null && index == -1) {
                index = strLine.indexOf("<source src");
            }

        } finally {
            try {
                in.close();
            } catch (Exception e) {
            }
        }

        return strLine;
    }
} 
```

**更新**

您的新问题与您的旧问题相似，您没有预料到传递给您的信息可能不正确或无效......

```
public static String parseLine(String line)
{

    // What if line is null ??
    line = line.replace("<source", "");
    line = line.replace(" src=", "");
    line = line.replace("\"", "");
    line = line.replace("type=", "");
    line = line.replace("audio/mpeg", "");
    line = line.replace(">", "");

    return line;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T00:45:51.930

## 更新

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.MalformedURLException;
import java.net.URL;

public class Example {    
    public static void main(String[] args) {
        String strLine = "Line never found";
        try (BufferedReader in = new BufferedReader(new InputStreamReader(new URL("page").openStream()))){
            while ((strLine = in.readLine()) != null) {
                if (strLine.indexOf("<source src") > 0) {
                    break;
                }
            }
            in.close();
        } catch (MalformedURLException e) {
            System.out.println("MalformedURL catched");
        } catch (IOException e) {
            System.out.println("InputOutputException catched");
        } 
    }
} 
```

# javascript - 如何从 mongoose + express 中的重复键中恢复

> ID：12557473
> 
> 赞同：14
> 
> 时间：2012-09-24T00:31:50.793
> 
> 标签：javascript, node.js, express, mongoose

我使用 mongoose 和 express 3 创建了一个注册表单

用户可能已经使用该用户名存在，在这种情况下我得到一个 err.code 11000 （重复键）。我应该如何处理现有用户？

这就是我现在正在做的......但我不确定检查错误代码是最好的方法：

```
 user.save(function(err){
    if ( err ) {
      console.log(err);
      console.log(err.code);

      //duplicate key
      if ( err.code == 11000 ) {
        req.flash('error', 'User already exists');
        res.redirect('/signup');
        return;
      }
    }

    res.locals.user = user;
    req.session.user = user;
    //res.locals.session = req.session;
    res.redirect('/');
  }); 
```

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-28T16:52:30.473

试试这个：

```
user.save(function(err){
  if ( err && err.code !== 11000 ) {
    console.log(err);
    console.log(err.code);
    res.send('Another error showed up');
    return;
  }

  //duplicate key
  if ( err && err.code === 11000 ) {
    req.flash('error', 'User already exists');
    res.redirect('/signup');
    return;
  }

  res.locals.user = user;
  req.session.user = user;
  //res.locals.session = req.session;
  res.redirect('/');
}); 
```

您不会以这种方式填写错误日志。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-29T20:54:26.720

我还没有尝试过，但这是我认为可以避免导致错误的方法：

```
//look for existing user first
user.findOne({ username: req.body.username }, function(err, user) {
  if ( err ) throw err;

  //existing user found, stop registration
  if ( user ) {
      res.flash('error', "That user already exists");
      res.redirect('/signup');
      return;
  }

  //create new user
  var user = new User({ username: req.body.username });

  user.save(function(err){
   if ( err ) throw err;
      res.flash('info', "Your account has been created");
      res.redirect('/account');
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-07T12:22:56.247

使用逻辑方法的最简单方法

1.  将自增值定义为唯一

**someModal.js**

```
var someschema = Schema({
    num: {type:Number,unique:true} // increment number 
});
var someModal = mongoose.model('someschema', someschema); 
```

**控制器.js**

```
async function insertDoc(someModal, lastNumFromDb, newDocToSave) {

    try {
        let lastNumFromDb = await someModal.findOne().sort({ _id: -1 }).lean();
        newDocToSave.lastNumFromDb = lastNumFromDb + 1
        let saved = await new someModal(newDocToSave).save();
        return saved;
    } catch (err) {
        if (err.code === '11000') {
            return insertDoc(someModal, lastNumFromDb, newDocToSave)
        }else{
            throw err
        }
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-08T17:33:25.657

如果您在 2021 年来到这里，我写了[一篇](https://dev.to/ahmedmagdy11/handling-mongoose-dublication-errors-3f6n)关于此的文章。

您基本上通过执行 indexscan 在发生错误之前覆盖`create`或运行并解决错误。`insertOne`

# c# - 在单个 if 语句中使用多个条件？

> ID：12557479
> 
> 赞同：0
> 
> 时间：2012-09-24T00:32:38.737
> 
> 标签：c#, if-statement

在 Python 中，我可以做这样的事情，我认为这比一个语句中的两对条件更清楚：

```
if 1 < 2 < 3:
  print 'triple testing?'

else:
  print 'more like triple failing!' 
```

没有遇到任何问题，但在 C# 中，它将第一个比较转换`1 < 2`为 a `bool`，然后再继续，所以它抛出了一个异常`Operator '<' cannot be applied to operands of type 'bool' and 'int'`。

有没有办法*避免*添加第二个条件，所以我不必像在 Python 中那样将三重条件分成两组，而不是一个“三重”条件？

```
if (1 < 2 & 2 < 3) { ... } 
```

编辑：我使用它的一个例子是确保 an`int`在一系列数字之间。

```
if ((0 < x) && (x < 10) { ... } //I can already do this
vs
if (0 < x < 10) { ... } //Would rather have something like this 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T00:33:49.870

分组条件。试试这个，

```
if ((1 < 2) && (2 < 3))
{
   // statements here
}
else
{
   // statements here
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T00:34:35.833

是的，有，您正在寻找

```
If ((1 < 2) && (2< 3)) { doWhatever(); } 
```

`&&`是逻辑与运算符，还有`||`逻辑或。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T00:59:13.120

`1 < 2 < 3`在 C#中没有办法。但是，您可以编写一个快速扩展方法来模仿它：

```
public static class Test
{
    public static bool IsSorted<T>(this IEnumerable<T> e)
    {
        return e.Zip(e.Skip(1), (a, b) => Comparer<T>.Default.Compare(a, b))
            .All(x => x <= 0);
    }
}

...

if (new[] { 1, 2, 3 }.IsSorted())
{
    // Do something
} 
```

If 对于 3 个数字来说绝对是矫枉过正，但如果有更多值要比较或者它们没有硬编码，则可能很有用。

# mysql - Textarea 数据需要保持用户在表单中输入的格式并在视图中显示

> ID：12557483
> 
> 赞同：0
> 
> 时间：2012-09-24T00:33:09.207
> 
> 标签：mysql, jsp, servlets, textarea, jstl

我有一个表单，其中包含允许用户输入数据的 Textarea 字段。用户输入的数据可以达到任何长度。我想保持用户输入的数据格式并将其显示在视图中.目前我的程序没有维护格式。我想维护用户输入的格式并显示它。

我的环境是 servlet、JSP、EL、JSTL 和 mysql。我使用 JSTL/EL 来显示类中的数据。目前 textarea 数据在 mysql 中存储为 varchar。我需要一些指导来了解如何维护数据的格式和在视图中显示它而不破坏用户输入的格式。

有人可以指出我如何实现这一点的正确方向。

以下是更新信息，

这是用户在文本区域字段中输入的内容，

1.  该法律要求所有州都必须在 2014 年 1 月之前建立交易所，这些交易所本质上是在线市场，小企业和个人可以在其中购买私人健康计划，届时大多数美国人必须拥有健康保险或支付罚款。
2.  如果各州未能在截止日期前提交运营自己的交易所的计划，法律要求联邦政府在有或没有他们帮助的情况下为他们设立并运营一个。收入在贫困线 133% 到 400% 之间的人可以通过交易所获得联邦税收补贴，以使保险价格更实惠

这就是我的jsp视图中的样子，

1.  该法律要求所有州都必须在 2014 年 1 月之前建立交易所，这些交易所本质上是在线市场，小企业和个人可以在其中购买私人健康计划，届时大多数美国人必须拥有健康保险或支付罚款。2\. 如果各州未能在截止日期前提交运营自己的交易所的计划，法律要求联邦政府在有或没有他们帮助的情况下为它们建立和运营一个。收入在贫困线 133% 到 400% 之间的人可以通过交易所获得联邦税收补贴，以使保险价格更实惠

此外，我还要保留我的文本区域字段中给出的链接以及用户输入的格式。

此外，我的应用程序中没有任何框架。我知道 JSF 具有一些功能，它可以转义 textarea 数据并通过维持用户给出的格式的 pre 元素呈现它。没有任何框架如何做到这一点？

# asp.net - ViewStateMode 未按预期工作

> ID：12557484
> 
> 赞同：0
> 
> 时间：2012-09-24T00:33:11.827
> 
> 标签：asp.net, viewstate

在我正在处理的 ASP.NET 4.0 网站上，我有一个母版页，其中设置了 ViewStateMode="Disabled"。然后，站点的一个部分有一个嵌套母版页，其中 ViewStateMode="Enabled" as ViewState 是该站点的大部分内容所必需的。在本节的子页面上，不会为 DropDownList 等控件维护 ViewState。

这些母版页或子页上的其他任何地方都没有其他 ViewState 指令。

母版页：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site.master.cs" Inherits="Internet.Site" ViewStateMode="Disabled" %> 
```

嵌套母版页：

```
<%@ Master Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="Tvet.master.cs" Inherits="Internet.Tvet.Tvet" ViewStateMode="Enabled" %> 
```

如果我将 ViewStateMode="Enabled" 添加到每个控件或控件周围的面板，我可以让 ViewState 工作，但我的理解是所有控件都继承父 ViewStateMode 设置。

这种行为是正确的还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T01:12:59.577

要修复它，只需更改控件的`ViewStateMode`属性`ContentPlaceHolder`

例子：

在母版页中

```
<asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server" ViewStateMode="Enabled">

</asp:ContentPlaceHolder> 
```

# android - Android CalendarView 加载自定义数据

> ID：12557485
> 
> 赞同：0
> 
> 时间：2012-09-24T00:33:11.780
> 
> 标签：android, calendar

我需要在 Android 应用中显示自定义日期/活动。在 ios 上，我使用[Kal](https://github.com/klazuka/Kal)，它允许我以这种[格式](https://github.com/klazuka/Kal/blob/master/Examples/Holiday/support/holidays.json)加载 JSON 文件。所以我需要显示一个带有一些日期的日历。Android 是否有类似的东西，据我所知 CalendarView (api >= 11) 不支持这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:04:36.107

我最终分叉了[http://code.google.com/p/android-calendar-view/](http://code.google.com/p/android-calendar-view/)以添加我想要的功能。

# objective-c - 从Objective C中的另一个方法调用一个复杂的方法

> ID：12557486
> 
> 赞同：0
> 
> 时间：2012-09-24T00:33:12.377
> 
> 标签：objective-c, methods, cgrect

我在这里见过很多情况，有人问如何从另一种方法调用一个名称极其简单的方法，并得到一个简单的答案。

但是，我有一个 CGRect 方法

```
- (void)drawRect:(CGRect)rect { /* code that draws circles */} 
```

它成功地为我绘制了*nmax 个*圆圈。我还有一个按钮方法可以成功更新屏幕上显示的“ *nmax ”。*

```
- (IBAction)changeIntValue:(id)sender {nmax=nmax+100;} 
```

唯一的问题是我希望它也为我重绘屏幕。我终生无法弄清楚，即使在响了一些 FM 之后，在我的 changeIntValue 方法中再次“重新调用”这个矩形的语法。

非常感谢任何帮助。在我打字的时候，如果有人有关于语法的详尽信息的参考，那会很有帮助。developer.apple.com 上的参考资料和大多数教程都转向提供特定示例，例如ThisExample。我在一个给出语法的 youtube 讲座上手写了一些笔记，但丢失了参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T00:36:53.630

您可以使项目重绘使用

```
[view setNeedsDisplay]; 
```

`view`你的观点显然在哪里。这会导致视图在 UI 线程中重新绘制，然后您的视图绘制代码应该适当地调用您的 drawRect 方法。

# c# - 读取字符串并将内容放入结构

> ID：12557489
> 
> 赞同：1
> 
> 时间：2012-09-24T00:33:26.283
> 
> 标签：c#, string, struct

我在 PC 上收到一个字符串，这基本上是一个字节一个字节的几个短裤的序列。我需要将该字符串放入结构中。例如，我需要放入`Hello!`这个结构：

```
public struct serialPacket
{
    public ushort first;
    public ushort second;
    public ushort third;
} 
```

像这样得到它：

```
temp.first=0x6548;
temp.second=0x6c6c;
temp.third=0x216f; 
```

我不太确定字节顺序，但这并不重要。
我真的很沮丧，因为在 C/C++ 中，只需一点指针的帮助就可以轻松完成，但我不知道如何在 C# 中修复它。
我`Marshal`用来处理这个，但我得到一些垃圾结果：

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
public struct serialPacket
{
    [MarshalAs(UnmanagedType.U2)]
    public ushort first;
    [MarshalAs(UnmanagedType.U2)]
    public ushort second;
    [MarshalAs(UnmanagedType.U2)]
    public ushort third;
}
...
IntPtr pBuf = Marshal.StringToBSTR(indata);
serialPacket ms = (serialPacket)Marshal.PtrToStructure(pBuf, typeof(serialPacket));
Marshal.FreeBSTR(pBuf); 
```

结果： 1st 101
2nd 72
3rd 108
看起来更像是按单个字节编组撕裂 ushorts。一次性接收完整的字符串本身。最后以 0x0D 作为 NewLine 接收

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T03:15:39.687

这对我有用：

```
temp.first = 0x6548;
temp.second = 0x6c6c;
temp.third = 0x216f;

Func<ushort, string> conv = u =>
{
    var bs = BitConverter.GetBytes(u);
    return System.Text.ASCIIEncoding.ASCII.GetString(bs);
};

var query =
    from u in new [] { temp.first, temp.second, temp.third, }
    select conv(u);

var result = String.Join("", query);
// result == "Hello!" 
```

# php - HTML5 的 Canvas 可以处理其中绘制的多个图像吗？

> ID：12557502
> 
> 赞同：4
> 
> 时间：2012-09-24T00:35:30.767
> 
> 标签：php, javascript, html

输出页面：[http](http://tinyurl.com/9stfo3p) ://tinyurl.com/9stfo3p 代码：[http ://tinyurl.com/8wz9krj](http://tinyurl.com/8wz9krj)

直接问题：我是不是以错误的方式处理这个问题，还是 HTML5 不能在一个画布中处理这么多图像？

详细信息：我用 PhP、HTML5 和 Javascript 编写了一个脚本，以测试我想要完善的装扮功能的一些代码。当我完成后，它工作得很好。然后我开始刷新页面以查看画布加载/响应的速度。

有些图像有时会显示不出来，再刷新几次后，画布上就什么也没有了。

我以这种方式决定了代码，这样我就不必为 GD 库而烦恼，如果我想添加一个动画 Gif，我不必对代码做太多的事情（或者至少，我不需要认为我必须）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T01:04:40.723

Canvas 可以处理任意数量的图像。

在您的情况下，我看到一个`Uncaught TypeError: Cannot call method 'getContext' of null`，可能是因为您正在做`window.onload = draw()`的是立即调用该`draw`方法，并且在 DOM 准备好之前。

如果您只是将其更改为：

> ```
> window.onload = draw; 
> ```

我已经把你的代码放在了一个小提琴中，你可以[在这里看到它工作正常](http://jsfiddle.net/jbalsas/XMe8y/)

# java - Eclipse 不会导出为 JAR

> ID：12557504
> 
> 赞同：3
> 
> 时间：2012-09-24T00:36:25.010
> 
> 标签：java, eclipse, jar, export

我意识到有人问过类似的问题，但我的问题似乎是独一无二的。当我尝试将我的项目导出为 JAR 时，项目本身不会出现在导出窗口中。谁能帮我？

另外，我不确定这是否会改变任何东西，但我使用 Java Decompiler 对源代码进行反编译，将其放在一个文件夹中，并创建了一个与所述文件夹同名的项目以便能够对其进行编辑。我也问过 JAR 的开发者，他们说没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T01:19:00.040

项目是否有输出文件夹？它是一个正在编译的实际 Java 项目吗？查看构建路径，看看是否有任何问题。

# jquery - 如何在不指定参数的情况下生成路由

> ID：12557505
> 
> 赞同：4
> 
> 时间：2012-09-24T00:36:29.897
> 
> 标签：jquery, ajax, symfony, url-routing

我有一条路线：

```
 * @Route("/{id}/delete", name="details_delete")
 * @Method("post") 
```

我想写：

```
$.ajax('{{ path('details_delete') }}',{
             data : form ,
             type: 'post', 
```

有没有不使用的方法`$this->getRequest();`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T11:44:30.170

这个怎么样？

```
var url = '{{ path('details_delete', {'id': '__id__'}) }}';

$.ajax(url.replace('__id__', id),{
         data : form ,
         type: 'post', 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T04:29:26.843

在路由中为 id 使用默认键

```
@Route("/{id}/delete", name="details_delete" defaults={"id"="default_id"})
@Method("post") 
```

试试这样

```
$.ajax('{{ path('details_delete', {'id': id}) }}',{
             type: 'post', 
```

然后你可以像这样从控制器访问 id

```
public function idAction($id){
    //$id is the route parameter which you need
} 
```

**编辑**

无法在 twig 块中访问 javascript 变量，因为 Javascript 在浏览器客户端呈现，在传递给浏览器之前 Twig/PHP 服务器端呈现

解决方法是使用[FOSJSRoutingBundle](https://github.com/FriendsOfSymfony/FOSJsRoutingBundle)

希望这可以帮助

# c++ - 关于“unsigned char”和“shift”操作的小问题？

> ID：12557508
> 
> 赞同：1
> 
> 时间：2012-09-24T00:36:55.807
> 
> 标签：c++, c

这个问题应该是基本的，但我很惊讶我现在遇到了一些麻烦。第一个是当我浏览“C++ 入门”一书第 5.3 章时。位运算符，当作者使用以下代码作为示例来解释移位操作时：

```
unsigned char bits = 1;     // '10011011' is the corresponding bit pattern
bits << 1;                  // left shift 
```

当我看到这个时，我的头有点旋转，'10011011'来自哪里？“1”不是“0x01”？

另一个问题来自[http://c-faq.com/strangeprob/ptralign.html](http://c-faq.com/strangeprob/ptralign.html)，作者尝试解压结构：

```
struct mystruct {
    char c;
    long int i32;
    int i16;
} s; 
```

使用

```
unsigned char *p = buf;

s.c = *p++;

s.i32 = (long)*p++ << 24;
s.i32 |= (long)*p++ << 16;
s.i32 |= (unsigned)(*p++ << 8);  // this line !
s.i32 |= *p++;

s.i16 = *p++ << 8;
s.i16 |= *p++; 
```

我的问题是，p 是指向 unsigned char（8 位）的指针，对吧？在构建 s.i32(24~31, 16~23) 的更高字节时，*p++ 在左移之前会转换为 'long'(32bits)，因此左移不会在 *p++ 中丢失位，但在

```
s.i32 |= (unsigned)(*p++ << 8); 
```

*p++ 先移位，然后转换为 unsigned int，*p++ 的位不会在移位过程中全部丢失吗？

我再次意识到我可能在这里错过了 C 语言的一些基础知识。希望有人可以在这里伸出援手。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T00:58:15.867

要回答您的第二个问题，对 a 执行**任何**算术运算都会将其`char`提升为 a （可能是无符号的）`int`（包括移位和其他按位运算），因此会移位整数大小的值，而不是 8 位 char 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T01:08:28.357

是的，1 的位模式是 0x01。10011011 是十进制 155 的位模式。

至于班次，你错过了一种叫做“积分提升”的东西，它是在算术和二进制运算中执行的，比如班次。在这种情况下，有一个`unsigned char`操作数 ( `*p++`) 和一个`int`操作数（常量），所以`unsigned char`操作数被转换为`int`. 演员表（无论是 to`long`还是 to `unsigned int`）总是在升级和轮班执行**之后执行。**所以不，在所有移位中都没有丢失所有位。

# java - Java 输入失败

> ID：12557509
> 
> 赞同：2
> 
> 时间：2012-09-24T00:37:00.760
> 
> 标签：java, string, java.util.scanner

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

我究竟做错了什么？编译并运行程序后，我输入我的输入，无论它是什么，程序总是将其视为错误输入并说我错了，这里：

```
import java.util.Scanner;

public class mena3 {

    public static void main(String[] args) {
        Scanner user_input = new Scanner(System.in);

        String Capitol;
        System.out.print("Enter the capitol of Morocco: ");
        Capitol = user_input.next();

        if(Capitol == "Rabat") {
            System.out.println("Good Job!");
        }
        else {
            System.out.println("That is incorrect");
        }
    }
} 
```

在我输入拉巴特之后，它说那是不正确的。如果我输入 l，它会说那是不正确的。为什么我赢不了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T00:38:49.230

不要使用`==`. 请改用`equals(...)`or`equalsIgnoreCase(...)`方法。了解 == 检查两个*对象*是否相同，这不是您感兴趣的。另一方面，这些方法检查两个字符串是否具有相同顺序的相同字符，这在这里很重要。所以而不是

```
if (fu == "bar") {
  // do something
} 
```

做，

```
if ("bar".equals(fu)) {
  // do something
} 
```

或者，

```
if ("bar".equalsIgnoreCase(fu)) {
  // do something
} 
```

投票结束这个问题，因为它只在这个网站上被问过和回答了无数次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T00:39:18.077

java中最常见的错误之一。字符串需要 a`.equals()`而不是`==`.

错误的：

```
if (str == "foo") {

} 
```

正确的：

```
if ("foo".equals(str)) { // done in this order to avoid NPE

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T00:51:11.497

你的代码是完美的，只是你的比较方法是错误的。所有其他语言都视为`==`比较运算符。但在 Java 的情况下，它有点棘手。在 Java 中，这里`==`被视为对象的比较运算符，而不是字符串变量。

因此，要比较两个字符串，您需要调用``.equals()`一个来自 String 类的方法。

因此您需要相应地更改您的代码，

```
import java.util.Scanner;

public class mena3 
{
    public static void main(String[] args) 
    {
        Scanner user_input = new Scanner(System.in);

        String Capitol;
        System.out.print("Enter the capitol of Morocco: ");
        Capitol = user_input.next();

//        if(Capitol == "Rabat")  // your previous code
        if(Capitol .equals ( "Rabat") ) // new updated comparison code
        {
            System.out.println("Good Job!");
        }
        else 
        {
            System.out.println("That is incorrect");
        }
    }
} 
```

# asp.net - 对 WCF 服务的调用偶尔会挂起

> ID：12557510
> 
> 赞同：2
> 
> 时间：2012-09-24T00:37:07.490
> 
> 标签：asp.net, .net, wcf, odata

该问题最初是在 WCF 数据服务 (OData) 上遇到的，在该服务中返回大量数据 (~3MB) 并且使用数据的应用程序（MVC 网站）偶尔会挂在一些请求上并最终超时.

该问题可以在较小的数据有效负载上复制，但需要很长时间才能发生。该问题已在 Cassini 和 IIS 7 上复制。通过 IIS 运行时，我可以看到挂起的 W3 工作进程卡在“SendResponse”状态，直到超时。

为了缩小问题的原因，我创建了一个控制台应用程序，它可以从 ASP.NET 站点顺序下载内容。该问题已在 WCF 数据服务 (OData)、标准 WCF 服务和将类似数据直接输出到 HttpResponse 对象的 Web 窗体页面上复制。使用的示例代码使用标准 WCF 服务作为示例（以便于那些试图复制它的人进行设置）。

控制台应用程序客户端：

```
 static void Main(string[] args)
    {
        Console.ReadKey(); // press any key to start test

        do
        {
            var req = WebRequest.Create(new Uri("http://localhost:26332/WCFTest.svc/GetData"));
            var response = req.GetResponse();

            using (var stream = response.GetResponseStream())
            {
                var content = new StreamReader(stream).ReadToEnd();           
            }           
        } while (true);
    } 
```

WCF 服务：

```
 public class Service1 : IService1
    {
        public TestClass[] GetData()
        {
            return Enumerable
                .Range(0, 15000)
                .Select(i => new TestClass{ ID = "1" })
                .ToArray();
        }
    }

    [DataContract]
    public class TestClass
    {
        [DataMember]
        public string ID { get; set; }
    }

    [ServiceContract]
    public interface IService1
    {
        [OperationContract]
        [WebGet(UriTemplate = "GetData")]
        TestClass[] GetData();
    } 
```

在对 Web 服务进行多次调用（每次运行时不同，但通常少于 30 次）后，GetResponseStream 调用将挂起。

任何关于可能出现问题或如何缩小问题原因的想法将不胜感激！

服务 web.config

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="WcfService2.Service1" >
        <endpoint
          address=""
          binding="webHttpBinding"
          contract="WcfService2.IService1"
          behaviorConfiguration="webHttp"/>
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="webHttp">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>  
</configuration> 
```

WCF 数据服务代码：

```
public class Service1 : DataService<ODataContext>
{
    public static void InitializeService(DataServiceConfiguration configuration)
    {
        configuration.SetEntitySetAccessRule("*", EntitySetRights.AllRead);
    }
}

public class ODataContext
{
    public IQueryable<TestClass> Test
    {
        get
        {
            return Enumerable
                .Range(0, 15000)
                .Select(i => new TestClass {ID = "1"})
                .AsQueryable();
        }
    }
}

public class TestClass
{
    public string ID { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T03:18:49.527

原来这是 ESET 防病毒检查传入 HTTP 流量并丢弃一些数据包的问题。卸载 ESET 解决了该问题。

有关 ESET 问题的更多信息：http: [//www.wilderssecurity.com/showthread.php? t=332920](http://www.wilderssecurity.com/showthread.php?t=332920)

# javascript - 这是 Internet Explorer 8 的 onpropertychange 事件的错误吗？

> ID：12557511
> 
> 赞同：1
> 
> 时间：2012-09-24T00:37:46.010
> 
> 标签：javascript, internet-explorer-8

我正在使用 onpropertychange 事件来检测用户键入时对文本框的更改（即在框失去焦点之前）。这是有效的，但是当我使用代码设置文本框值时似乎出现了一个错误。这样做会导致 onpropertychange 事件触发，这是应该的，但是用户对文本框进行的*下一次*更改不会导致事件触发。但是，下一次更改*后*的更改确实会触发事件，并且它会继续正常工作，直到再次使用代码设置文本框值。

重现步骤：

1) 添加 onpropertychange 事件作为文本框 HTML 元素的属性，或使用 DOM。(document.form.TextboxName.onpropertychange = myHandler) 2) 观察 onpropertychange 事件在文本框更改时触发 3) 使用代码设置文本框值 (document.form.TextboxName.value = "New value") 4) 观察这会导致触发事件 5) 使用键盘更改文本框值（插入后者、退格或删除等） 6) 观察这次没有触发任何事件 7) 再次使用键盘更改文本框值。事件继续正常触发

首先，我想确认这确实是一个 IE 错误，我的代码不应该受到责备。我也在寻找有关如何解决此问题的建议。我想跟踪对文本框值的所有更改。其他事件（例如 onkeydown）都受到限制，因为它们不会检测到修改值的非键盘方法。这只需要在 IE 8 中工作。

**编辑：**下面的代码。在我家的浏览器（IE9）上运行，所述问题不会发生。然而 IE9 出现了一个错误，退格键根本不会触发 onpropertychange 事件！将模式切换到 IE8 标准（按 F12 并选择浏览器模式）会导致代码按照本文所述运行（事件会触发，直到使用代码设置控件的文本值，在这种情况下，输入的下一个字符不会触发事件。）

```
<!doctype html>
<html>
<head>
<script type="text/javascript" language="javascript">

var changingValue = false;

function onpropchange(){
    if (window.event.propertyName == "value" && !changingValue) {
        // Do stuff here
        alert("Changed via user input");
    }
}

function setTextBoxValue(val) {
    var textBox = document.getElementById("foo");
    changingValue = true;
    textBox.value = val;
    changingValue = false;
}

window.changeValue = function() {
    setTextBoxValue("NEW VALUE");
}

</script>

</head>
<body>

<input id="foo" onpropertychange="onpropchange();">
<input type="button" value="change value" onclick="changeValue()">

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T02:24:29.080

这个使用 JQuery 对我有用：

```
$('#foo').focus().val(val).blur(); 
```

或者

```
var textBox = document.getElementById("foo");
textBox.focus();
textBox.value = val;
textBox.blur(); 
```

这个想法是在更改值之前首先关注焦点，然后在代码更改值之后移除焦点。下次用户按键时，onpropertychange 将触发。

# python - Python - 遍历已识别的组件功能

> ID：12557513
> 
> 赞同：1
> 
> 时间：2012-09-24T00:38:18.607
> 
> 标签：python, image-processing, numpy, scipy

我站在一个巨大的问题面前。使用 Python 库 NumPy 和 SciPy，我确定了大型数组中的几个特征。为此，我创建了一个 3x3 邻居结构并将其用于连通分量分析 --> 请参阅[docs](http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.measurements.label.html#scipy.ndimage.measurements.label)。

```
struct = scipy.ndimage.generate_binary_structure(2,2)
labeled_array, num_features = ndimage.label(array,struct) 
```

我现在的问题是我想循环遍历所有已识别的功能。有人知道如何处理生成的 NumPy 数组中的各个特征？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T02:54:44.183

这是处理由 ndimage.label 标识的特征的示例。这是否对您有帮助取决于您要对这些功能做什么。

```
import numpy as np
import scipy.ndimage as ndi
import matplotlib.pyplot as plt

# Make a small array for the demonstration.
# The ndimage.label() function treats 0 as the "background".
a = np.zeros((16, 16), dtype=int)
a[:6, :8] = 1
a[9:, :5] = 1
a[8:, 13:] = 2
a[5:13, 6:12] = 3

struct = ndi.generate_binary_structure(2, 2)
lbl, n = ndi.label(a, struct)

# Plot the original array.
plt.figure(figsize=(11, 4))
plt.subplot(1, n + 1, 1)
plt.imshow(a, interpolation='nearest')
plt.title("Original")
plt.axis('off')

# Plot the isolated features found by label().
for i in range(1, n + 1):
    # Make an array of zeros the same shape as `a`.
    feature = np.zeros_like(a, dtype=int)

    # Set the elements that are part of feature i to 1.
    # Feature i consists of elements in `lbl` where the value is i.
    # This statement uses numpy's "fancy indexing" to set the corresponding
    # elements of `feature` to 1.
    feature[lbl == i] = 1

    # Make an image plot of the feature.
    plt.subplot(1, n + 1, i + 1)
    plt.imshow(feature, interpolation='nearest', cmap=plt.cm.copper)
    plt.title("Feature {:d}".format(i))
    plt.axis('off')

plt.show() 
```

这是脚本生成的图像：

![在此处输入图像描述](../Images/f44d404d04951f046ad186d334c1c7f5.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:37:49.540

简要说明解决上述问题的另一种方法。除了使用 NumPy “fanzy indexing”，还可以使用 ndimage “find_objects” 函数。例子：

```
# Returns a list of slices for the labeled array. The slices represent the position of features in the labeled area 
s = ndi.find_objects(lbl, max_label=0)
# Then you can simply output the patches  
for i in n:
    print a[s[i]] 
```

我会留下这个问题，因为我无法解决另一个出现的问题。我想获得特征的大小（已经解决，通过 ndi.sum() 很容易）以及特征附近的未标记单元格的数量（因此计算特征周围的零的数量）。

# python - Python 值实际上是不等价的

> ID：12557514
> 
> 赞同：1
> 
> 时间：2012-09-24T00:38:26.500
> 
> 标签：python

> **可能重复：**
> [Python“is”运算符对整数的行为异常](https://stackoverflow.com/questions/306313/python-is-operator-behaves-unexpectedly-with-integers)

我正在学习 Python，并且很好奇为什么：

```
x = 500
x is 500 
```

返回 False，但是：

```
y = 100
y is 100 
```

返回真？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T00:41:35.843

Python 重用小整数。也就是说，所有`1`s（例如）都是同一个`1`对象。如果我没记错的话，范围是 -5 到 255，尽管这是一个不应依赖的 CPython 实现细节。例如，我很确定 Jython 和 IronPython 以不同的方式处理这个问题。

这很好的原因是`int`s 是不可变的。也就是说，您不能将 a 更改为`4`就地`5`。if`a`的值为 4，`a = 5`实际上是指向`a`不同的对象，而不是更改`a`包含的值。Python 不共享任何可变类型（例如列表），其中意外地对同一对象具有多个引用可能会导致问题。

您应该`==`用于比较大多数事物。`is`用于检查两个引用是否指向同一个对象；它大致相当于`id(x) == id(y)`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T00:43:53.533

`is`身份测试 -`x is y`询问它们是否*是同一个对象*，而不是它们是否只是“等效”。所以你也有，例如：

```
>>> x = []
>>> y = []
>>> z = x
>>> x is y
False
>>> x is z
True 
```

对于等价性，您要测试相等性：

```
>>> x = 500
>>> x == 500
True 
```

Python（或者，至少，cpython - 主要实现）做了一些优化，以便某些不可变对象在解释器的整个生命周期中只存在一次。因此，`5`整个程序中的每一个都是相同的整数对象。例如，字符串文字也会发生同样的事情。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T01:24:43.550

"is" 比较对象 ID，"==" 将比较对象值。因此，如果您需要比较值，请使用“==”，如果您想比较对象，请使用“is”。

在 Python 中，一切都是对象，比较对象 ID，它更快，但有时不可预测。您需要非常确定自己在做什么才能使用“is”进行简单比较。

关于上面的情况，我在这里找到：[http](http://docs.python.org/c-api/int.html) ://docs.python.org/c-api/int.html有以下注释：

> 当前的实现为 -5 到 256 之间的所有整数保留一个整数对象数组，当您在该范围内创建一个 int 时，您实际上只是取回了对现有对象的引用。所以应该可以改变 1 的值。我怀疑 Python 在这种情况下的行为是未定义的。:-)

因此，您可以进行以下测试并查看此行为：

```
>>> a = 256
>>> id(a)
19707932
>>> id(256)
19707932
>>> a = 257
>>> id(a)
26286076
>>> id(257)
26286064 
```

因此，对于 256 以上的整数，“is”将不起作用。小心使用“is”进行比较。

# c# - 添加监视器 183 错误

> ID：12557518
> 
> 赞同：0
> 
> 时间：2012-09-24T00:38:56.743
> 
> 标签：c#, printing, virtual, port, spooler

有一个简单的代码：

```
[DllImport("winspool.Drv", EntryPoint = "AddMonitorA", SetLastError = true, ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
        private static extern bool AddMonitor([MarshalAs(UnmanagedType.LPStr)] string Name, Int32 Level, [In, MarshalAs(UnmanagedType.LPStruct)] MONITOR_INFO_2 mi2);

public static int MonitorInstaller(out string errorMessage)
    {
        int ret = 0;
        byte* pMonitor = GetBytePtr(Globals.PortMonitorName);
        errorMessage = null;

        ret = IsMonitorInstalled(pMonitor, false);
        Loger.WriteLog("IsMonitorInstaled: {0}", ret);
        if (ret != 0)
        {
            Loger.WriteLog("Test_point_01");
            errorMessage = "Monitor is already installed.";
            return 1;
        }

        bool delRes = DeleteMonitor(null, null, Globals.PortMonitorName);
        Loger.WriteLog("Delete result: {0}", delRes);

        MONITOR_INFO_2 mi2 = new MONITOR_INFO_2();

        mi2.pName = Globals.PortMonitorName;
        mi2.pEnvironment = "Windows NT x86";
        mi2.pDLLName = Globals.MonitorFile;

        Loger.WriteLog("mi2 data:");
        Loger.WriteLog("pName: {0}", mi2.pName);
        Loger.WriteLog("pDLLName: {0}", mi2.pDLLName);

        bool bRet = AddMonitor(null, 2, mi2);
        Loger.WriteLog("AddMonitor result: {0}", bRet);
        if (!bRet)
        {
            int errorCode = Marshal.GetLastWin32Error();
            Loger.WriteLog("AddMonitor erro: {0}", errorCode);
            errorMessage = new Win32Exception(errorCode).Message;
            return errorCode;
        }

        return 0;
    } 
```

AddMonitor 函数总是设置 183 错误代码：当文件已存在时无法创建文件。但是没有这样的监视器。给我任何想法。PS 应用程序以管理员帐户运行，测试虚拟机上没有防病毒软件，Windows 防火墙已关闭。

# javascript - three.js - 绘制一个挤压圆的一半

> ID：12557526
> 
> 赞同：3
> 
> 时间：2012-09-24T00:40:11.280
> 
> 标签：javascript, three.js

这将绘制一个立方体，但我怎样才能让它绘制一个挤压圆的一半？

```
// half a circle
var rightfootgeo = new THREE.CubeGeometry(2, 2, 2);
for(var i = 0; i < 8; i += 1) {
    rightfootgeo.vertices[i].y -= 5;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T03:03:18.563

您可以使用它`THREE.ExtrudeGeometry`来拉伸由点数组定义的形状。

这是一个向您展示如何挤压半圆的 Fiddle：http: [//jsfiddle.net/CjZSZ/](http://jsfiddle.net/CjZSZ/)。

# c - 在C中反转数组

> ID：12557532
> 
> 赞同：0
> 
> 时间：2012-09-24T00:42:05.063
> 
> 标签：c, arrays, string

我是 cpp 新手，对数组有疑问。我在下面的代码应该创建一个反向版本的 str 并将其存储在 newStr 中。但是， newStr 总是空的。有人可以向我解释为什么会发生这种情况，即使我从 str 中分配了一个值？

```
void reverse (char* str) {
    char* newStr = (char*)malloc(sizeof(str));

    for (int i=0;i<sizeof(str)/sizeof(char);i++) {
       int index = sizeof(str)/sizeof(char)-1-i;
       newStr [i] = str [index];
    }
} 
```

PS：我知道通过移动指针或使用 std::reverse 函数来反转数组效率更高，但我对上述代码不起作用的原因很感兴趣。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T00:52:20.357

正如上面评论者指出的那样，`sizeof(str)`并没有告诉你字符串的长度。你应该使用`size_t len = strlen(str);`

```
void reverse (char* str) {
   size_t len = strlen(str);
   char* newStr = (char*)malloc(len + 1);

   for (int i=0; i<len;i++) {
      int index = len-1-i;
      newStr[i] = str[index];
   }
   newStr[len] = '\0'; // Add terminator to the new string.
} 
```

不要忘记`free`你的任何记忆`malloc`。我假设您的函数将返回您的新字符串？

编辑：长度+1，为终结者腾出空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T00:48:53.093

`sizeof` **运算符**（它不是函数！）在编译时进行评估。您正在向它传递一个指向您声称拥有字符串的内存区域的指针。但是，此字符串的长度在编译时并不固定。`sizeof(str)/sizeof(char)`将始终产生架构上指针的大小，可能是 8 或 4。

你想要的是用来[`strlen`](http://en.cppreference.com/w/cpp/string/byte/strlen)确定你的字符串的长度。

或者，一种更惯用的方法是使用`std::string`（如果您坚持自己反转字符串）

```
std::string reverse(std::string str) {
  for (std::string::size_type i = 0, j = str.size(); i+1 < j--; ++i) {
    char const swap = str[i];
    str[i] = str[j];
    str[j] = swap;
  }
  return str;
} 
```

请注意，由于[隐式转换](http://en.cppreference.com/w/cpp/string/basic_string/basic_string)（请参阅重载`(5)`），您还可以使用纯 C 样式`char`指针调用此函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T00:57:47.240

这里有两个问题：

1.  `sizeof`操作员不会给你字符串的长度。相反，它为您提供了`char*`您正在使用的机器上的 a 大小。您可以`strlen()`改为使用

2.  c-string 以 NULL 字符终止（这就是为什么`strlen()`可以返回正确长度的字符串）。您需要确保不会意外地将 NULL 字符从源字符串复制到目标字符串的开头。此外，您需要在目标字符串的末尾添加一个 NULL 字符，否则您会得到一些意外的输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-03T09:41:04.247

```
#include <bits/stdc++.h>

using namespace std;

vector<string> split_string(string);

// Complete the reverseArray function below.
vector<int> reverseArray(vector<int> a) {
    return {a.rbegin(), a.rend()};

}

int main()
{
    ofstream fout(getenv("OUTPUT_PATH"));

    int arr_count;
    cin >> arr_count;
    cin.ignore(numeric_limits<streamsize>::max(), '\n');

    string arr_temp_temp;
    getline(cin, arr_temp_temp);

    vector<string> arr_temp = split_string(arr_temp_temp);

    vector<int> arr(arr_count);

    for (int i = 0; i < arr_count; i++) {
        int arr_item = stoi(arr_temp[i]);

        arr[i] = arr_item;
    }

    vector<int> res = reverseArray(arr);

    for (int i = 0; i < res.size(); i++) {
        fout << res[i];

        if (i != res.size() - 1) {
            fout << " ";
        }
    }

    fout << "\n";

    fout.close();

    return 0;
}

vector<string> split_string(string input_string) {
    string::iterator new_end = unique(input_string.begin(), input_string.end(), [] (const char &x, const char &y) {
        return x == y and x == ' ';
    });

    input_string.erase(new_end, input_string.end());

    while (input_string[input_string.length() - 1] == ' ') {
        input_string.pop_back();
    }

    vector<string> splits;
    char delimiter = ' ';

    size_t i = 0;
    size_t pos = input_string.find(delimiter);

    while (pos != string::npos) {
        splits.push_back(input_string.substr(i, pos - i));

        i = pos + 1;
        pos = input_string.find(delimiter, i);
    }

    splits.push_back(input_string.substr(i, min(pos, input_string.length()) - i + 1));

    return splits;
} 
```

# ruby-on-rails-3 - 找不到上传的文件

> ID：12557533
> 
> 赞同：0
> 
> 时间：2012-09-24T00:42:25.453
> 
> 标签：ruby-on-rails-3, routing

我正在尝试创建一个目录，我可以在其中存储文件以下载/链接到...例如，我有一个 CSV 文件，其中包含我需要在另一个站点上使用的数据。

我在`app/assets/`命名中创建了一个文件夹`files/site1content`。如果我去`http://mysite.com/assets/files/site1content/filename.txt`，我会得到“找不到 mysite.com”。

是否需要在路由中配置某些内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T00:59:53.097

公共文件夹旨在供公共访问，将您的文件放在`public/files/site1content`文件夹中。

# python - 如何使用字典值作为另一个字典中的键名？

> ID：12557534
> 
> 赞同：-3
> 
> 时间：2012-09-24T00:42:35.673
> 
> 标签：python

我有一个这样的字典列表：

```
[
    {
        'flight_id': 'f123',
        'pax': 234,
        'airline': 'Foo Airways'
    },
    {
        'flight_id': 'f124',
        'pax': 200,
        'airline': 'Bar Airways'
    }
] 
```

我想从中动态构建一个新的数据结构，如下所示：

```
{
    'f123': {'pax': 234, 'airline': 'Foo Airways'},
    'f124': {'pax': 200, 'airline': 'Bar Airways'}
} 
```

基本上，我需要一种将字典值转换为新字典中的键名的方法。

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T00:50:42.343

您可以使用列表推导：

```
flights = dict((f.pop('flight_id'), f) for f in flights) 
```

这将取代以前的数据结构。

Python 2.7+ 具有 dict 理解：

```
flights = {f.pop('flight_id'): f for f in flights} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T00:48:36.630

```
>>> d = [
...     {
...         'flight_id': 'f123',
...         'pax': 234,
...         'airline': 'Foo Airways'
...     },
...     {
...         'flight_id': 'f124',
...         'pax': 200,
...         'airline': 'Bar Airways'
...     }
... ]
>>> itms = [x.pop('flight_id') for x in d]
>>> dict(zip(itms,d))
{'f124': {'pax': 200, 'airline': 'Bar Airways'}, 'f123': {'pax': 234, 'airline':
 'Foo Airways'}} 
```

# jquery - Div 跟随鼠标触发 Mouseout 和 Mousemove 事件

> ID：12557535
> 
> 赞同：1
> 
> 时间：2012-09-24T00:42:43.370
> 
> 标签：jquery, jquery-events, mouseout

我试图让一个 div 跟随鼠标，但只有当鼠标在另一个 div 内时。我已经取得了一些进展，但是当鼠标后面的 div 显示出来时，`mouseout`会触发事件，导致它再次消失。然后，该`mousemove`事件导致它出现并在无限循环中重复。如何避免这个循环？

HTML

```
<div class="navbar" rel="#box1">Link</div>
<div class="box" id="box1" align="center"></div> 
```

Javascript

```
$(document).ready(function(){
    $(".navbar").mousemove(function(e){         
        $($(this).attr('rel')).show();       
        $(".box").css({             
            top: -80 + "px",             
            left: (e.pageX - 300) + "px"        
        });    
    });     
    $(".navbar").mouseout(function(e){         
        $($(this).attr('rel')).hide();   
    });
});​ 
```

CSS

```
.navbar{
width: 90%;
height: 200px;
border: 1px solid #f00;
margin: 50px auto 0 auto;
display: block;
}
.box{
    width: 616px;
    height: 474px;
    background: url(http://i.imgur.com/4fV4o.png);
    float: left;
    vertical-align: top;
    display: none;
    position: absolute;
} 
```

# php - 从 PHP 发布到 PHP

> ID：12557537
> 
> 赞同：0
> 
> 时间：2012-09-24T00:43:12.167
> 
> 标签：php, post

我正在创建一个系统，该系统通过在页面之间传递令牌来验证请求的有效性来保护它。令牌将在登录页面上生成（因为它只需要生成一次）然后传递到主页。但是，有一个中间 PHP 脚本正在运行以使用户登录，我不确定如何获取发布的令牌并将其传递到主页。

简而言之，我需要将令牌从登录页面发布到中间脚本，然后从脚本发布到主页，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T00:48:25.433

将数据存储在 cookie/会话中：

```
session_start();

$_SESSION['token'] = 'yourTokenHere' 
```

请参阅[PHP 会话](http://php.net/manual/en/features.sessions.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T01:32:33.587

进一步考虑，看起来我让事情变得比他们需要的复杂得多。谢谢大家的帮助，但解决方案似乎是我应该更聪明一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T00:44:23.980

如果所有 3 个页面都在同一主机上，请使用[cookie](http://php.net/manual/en/features.cookies.php)或[session](http://php.net/manual/en/features.sessions.php)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T00:52:22.497

## 您可以使用客户端 cookie：

```
<?php
setcookie("token", $myToken);
?> 
```

这种方法最大的缺点是它绝对要求用户在他们的浏览器上启用 cookie。在高度安全的情况下，用户可能没有启用 cookie，因此这种方法对他们不起作用。

## 使用`$_SESSION`全局变量：

```
<?php
$_SESSION['token'] = $myToken;
?> 
```

作为以前的变体，它需要启用 cookie。

## 将`$_GET`参数添加到 URI 字符串：

```
http://example.com?token=f4FArqk53Gwr4fESC73FedG48Trd3YEj 
```

这种方法最大的缺点是你的`URI`字符串看起来很复杂。

如果用户手动修改，状态信息也会丢失`URI`。

## 或者传递隐藏表单字段中的所有内容：

不幸的是，它要求您在每个页面上提交一个表单。

你可以用`jQuery`.

* * *

[这里](http://www.4guysfromrolla.com/webtech/041600-2.shtml)有一些例子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T00:54:31.123

我很久以前写过这个：

```
function postheader($url, $server, $cookies, $daten)
{   
    $temp=array();
    $out = "POST ".$url." HTTP/1.1\r\n";
    $out .= "Host: ".$server."\r\n";
    if(count($cookies)>0)
    {
        $out .= "Cookie: ";
        foreach($cookies as $name=>$value)
        {
            $temp[] = $name."=".$value;
        }
        $out .= implode("; ",$temp);
        $out .= "\r\n";
    }
    $out .= "User-Agent: Mozilla/4.0\r\n";
    $out .= "Content-type: application/x-www-form-urlencoded\r\n";
    $temp=array();
    foreach($daten as $key=>$data)
    {
        $temp[] = $key."=".urlencode($data);
    }
    $temp=implode("&",$temp);
    $out .= "Content-Length: ".strlen($temp)."\r\n";
    $out .= "\r\n";
    $out .= $temp."\r\n";

    return $out;
}

$fp = fsockopen($server, 80, $errno, $errstr, 30);
if (!$fp)
   die( "$errstr ($errno)<br />\n");

$out=postheader($url, $server, $cookies, $daten);
//echo $out;

fwrite($fp, $out);
while (!feof($fp))
{
    $string.= fgets($fp, 128);
}
fclose($fp); 
```

$daten 应该是一个一维关联数组，其中包含您要通过 post 请求发送的数据。对于 cookie，只需添加一个空数组。

$server 是主机地址，$url 只是服务器上的地址，例如

```
$server="stackoverflow.com";
$url="/post.php"; 
```

$string 将包含整个响应，包括标题。如果您不想要它们，请从第一个 "\r\n\r\n" 出现中创建一个子字符串。

# visual-studio - Visual Studio Makefile 项目生成无关的“obj”文件夹

> ID：12557538
> 
> 赞同：5
> 
> 时间：2012-09-24T00:43:31.243
> 
> 标签：visual-studio, makefile, visual-studio-2012

我在 Visual Studio 2012 express 中使用 Makefile 项目就好了。但是，无论指定的生成命令如何，Visual Studio 总是会创建一个包含空子文件夹 obj\Win32\Debug 和 obj\Win32\Release 的“obj”文件夹。

要重现该问题，只需创建一个“Visual C++ - 常规 - Makefile 项目”并在构建命令行中使用类似“dir”的 DOS 命令。一旦你构建，空的 obj\Win32\Debug 文件夹就会出现。

我可以在我的 Mercurial 忽略文件中简单地跳过这些，但如果能找到修复程序会很好。任何人都知道如何使 Visual Studio 不生成这些空文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-18T17:05:49.767

发现了一个技巧：在现有目录上设置中间输出目录。我手动修改了项目文件并添加了这个：

```
<IntermediateOutputPath>$(ProjectDir)</IntermediateOutputPath> 
```

在配置 PropertyGroup 中。我使用了显然已经存在的项目目录。不再有无用的 obj 目录！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T01:17:55.587

**obj**文件夹代表 VS 自己的有关您的项目的元数据，用于智能感知支持和设计器支持（用于 WF/WPF 应用程序）。在大多数情况下，您可以完全忽略该文件夹而不会出现问题。

有时，尽管此数据可能会损坏并导致 VS 显示无效的 Intellisense 选项，并且工作流/WPF 设计器可能会导致错误。关闭 VS 并删除**obj**文件夹将很快解决此问题。

# python - 如何使用 django 在网站上存储静态文本

> ID：12557542
> 
> 赞同：5
> 
> 时间：2012-09-24T00:43:57.100
> 
> 标签：python, django, django-templates, django-views

我是 django 的新手，我认为这是一个非常基本的问题。

假设我有这个主题：

![在此处输入图像描述](../Images/f0f9d00074bd88647a1e2f4d2b8d6448.png)

我已经做了一个项目，所以我知道如何为动态内容构建模型，将它们传递给视图和管理面板等，但是：

**问题：**在上图中，我标记了 3 个包含文本的容器。整个网站上只有一个文本实例，并且不可重复。如果我为自己开发，我只会硬编码，但如果我为客户开发，谁需要能够使用管理面板编辑这些字段？

我是否应该为整个网站的此类容器创建一个包含多个（比如说 20 个）字段的单独类，在视图中传递该类（并使用 过滤`[:1]`）以在模板中使用它？

那是我唯一想到的。虽然它会起作用，但我认为这是一个糟糕的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T00:49:32.533

我要做的是编写一个模型，其中包含一个`TextField`用于插入的简介和一个`CharField`用于识别它的模型，以及一个[自定义模板标记](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)，该标记通过您传递给它的参数从数据库中读取简介。

```
class Blurb(models.Model):
  ident = models.CharField(..., db_index=True)
  blurb = models.TextField(...)

PK  ident  text
1   main   Hey! Do you like this template? This...

{% load blurb %}
 ...
{% blurb main %} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T00:51:29.530

您可以有 1 个模型，其选择字段包含模型中文本的描述符。

就像是：

```
class SomeText(models.Model):
    position = models.CharField(max_length=120, choices=POSITION_DESCRIPTORS)
    text = models.TextField() 
```

# c# - 将 COM 对象转换为 C#/.NET 类时遇到问题

> ID：12557544
> 
> 赞同：1
> 
> 时间：2012-09-24T00:44:11.543
> 
> 标签：c#, .net, com, casting, idl

我有一个用 C# 编写的基类，它实现了在 IDL 库中定义的接口。我有一个管理此类的单个实例的 C++ 类。我还有一个 C# 项目需要使用这个类[实例（通过 C++ 项目获得）]。我想将我的基类实现的 COM 接口转换回我的 C# 基类。

但是，当我将从 C++ 比例获取的通用对象转换为我的 C# 基类时，我收到了一个错误。当我将它转换为派生接口时，没有问题。

下面是我的问题的类似示例。这两个 if 范围永远不会在 CSDriver 的 NETBaseInstance 函数中进行评估。NETBase 是唯一实现 COMInterface 的类。因此，我确定该值是 NETBase，因为 COMInterface 的 if 范围已被评估。

```
public class NETBase : COMInterface{ ... }

public class CSDriver{
    private NETBase m_NETBaseInstance;

    ...

    public object NETBaseInstance{
        set{
            COMInterface test;
                if( value is COMInterface ){
                // This is evaluated.
                test = value as COMInterface;
            }

            if( value is NETBase ){
                // This is not evaluated.
                m_NETBaseInstance = value as NETBase;
            }

            if( test is NETBase ){
                // This is not evaluated.
                m_NETBaseInstance = test as NETBase;
            }
        }
    }
} 
```

成功将此 COM 对象转换为 C# 对象的过程是什么？难道我做错了什么？

提前感谢您的任何回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:37:30.073

您无法直接投射它。

非托管 C++ API 返回一个指向`COMInterface`接口 vtable 的指针；你可能认为你知道 NETBase 是这个接口的唯一实现，但是 .NET COM Interop 基础设施没有这样的知识（确实，严格来说你错了，因为`COMInterface`非托管代码正在处理的实现是 COM Callable由互操作基础结构创建的包装器，而不是 NETBase 的实例）；当您从 C# 调用 C++ API 时，.NET 互操作层所能做的就是将您的托管代码传递给非托管 COM 接口的 Runtime Callable Wrapper，并且此 RCW 不是 的实例`NETBase`，因此您不能将其转换为`NETBase`，因为找到。

可能有变通办法来做你想做的事，利用你`COMInterface`必须指向特定`NETBase`实例的特殊知识。细节将取决于`NETBase`（例如，它的状态是否可序列化）的性质以及是否所有托管代码都在同一个 AppDomain 中运行（例如，如果是，您可以在 NETBase 类上提供静态字段和方法以允许与`COMInterface`指向的实例会合- 如果它真的是一个单例，就像你的问题所暗示的那样是微不足道的）。

# android - 需要伪造一个在 Android 中被扫描的 NFC 标签

> ID：12557548
> 
> 赞同：3
> 
> 时间：2012-09-24T00:44:43.947
> 
> 标签：android, android-intent, nfc

好的，我有一个应用程序。此应用程序仅在扫描 nfc 标签（任何标签）时完成任务。唯一的问题，我没有任何 nfc 标签。而且我正在努力消除对卡的需求，所以我需要的是一种“伪造/让它看起来”的方法，就像扫描了一个 nfc 标签一样。我可以编写应用程序等，所以我真正需要的是让 android 认为标签被扫描的核心代码。我可以做剩下的。我只需要能够按下一个按钮，然后 android 认为扫描了一个标签，以便调用该应用程序。感谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T16:51:29.833

编写一个应用程序，在启动时广播您想要模拟的 NFC 意图，然后关闭。因此，一个具有单个活动的简单应用程序在其 onCreate 中大致执行此操作：

```
 Intent intent = new Intent("android.nfc.action.NDEF_DISCOVERED");
       startActivity(intent);
       finish(); 
```

然后，您的应用程序应该自愿处理它，就好像它已使用 NFC 阅读器读取一样。

最后，Thomas 是对的，您应该只购买一个 NFC 标签并完成它，这样您就知道它正在为普通的 nfc 标签做您想做的事情。

如果这不能让你的船完全漂浮，另一种选择是添加一个长时间运行的通知，点击它，它就会进行意图广播。这样你就不必返回主菜单来让它工作。

# java - 递减存储在队列中的值

> ID：12557550
> 
> 赞同：0
> 
> 时间：2012-09-24T00:44:57.140
> 
> 标签：java, queue

我正在做一个队列项目，该项目正在模拟杂货店。在我的程序中，我有一个方法调用，它设置一个随机变量，表示为排队的客户提供服务所需的时间。总迭代次数为 60，表示分钟。假设第一个客户有 4 分钟的等待时间，我需要能够在每分钟之后减少时间，直到它达到 0。我不知道如何减少存储在名为 的队列中的值`myQueue`。有什么建议可以减少每分钟后存储在队列中的值吗？

```
import java.util.*;
import java.util.Random;

public class GroceryStore{
public static void main (String[] args){

int newCust=0;  //to hold random variable 1-4 for 25% chance of new customer
Queue<Integer> myQueue = new LinkedList<Integer>(); //instantiates new queue
int wait = 0;
int numCust = 0;                        //holds counter for number of  customer             

for (int i = 1; i <= 60; i++)  //iterator to cycle through 60 minutes
{

    Random randomNum = new Random();    
    newCust = randomNum.nextInt(4)+1;  //gives random #1-4, if 1, new cust added

    if(newCust == 1)                            //if statement to execute code if new cust added
    {
        Customer cust = new Customer();
        wait = cust.getServiceTime();                                           //stores wait time in variable
        myQueue.add(wait);                                                      //adds customer to the queue by wait time
        System.out.println("New customer added to queue, queue length is now " + myQueue.size());                       
    }

    if(myQueue.isEmpty())                                       //if to check if queue is empty and skip other conditionals
        System.out.println("-----------");
    else if(myQueue.peek()==0)                                  //if top of queue is at 0, remove from queue
    {
        myQueue.remove();
        System.out.println("Customer removed");
    }
    else    
          //THIS IS WHERE I AM TRYING TO DECREASE THE VALUE IN THE TOP QUEUE
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T00:57:29.860

`Integer``int`是不可变的，所以在你自己的类中包装一个：

```
class Customer {

    int time;

    public Customer(int time) {
        this.time = time;
    }

    // getter, setter
} 
```

并定义一个相应的`Queue`：

```
Queue<Customer> myQueue = new ...; 
```

实例化一个`java.util.Timer`；在相应的 中，使用*for-each*`java.util.TimerTask`循环迭代，依次更改或删除每个循环：`Queue`

 *```
for (Customer c : myQueue) { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:37:30.393

您想要减少存储在位于队列顶部的 Customer 对象中的值。

最简单的方法是添加一个方法来减少 Customer 类中的 serviceTime。

```
public decServiceTime() {
  serviceTime--;
} 
```

查看与队列中的 Customer 对象关联的值，您可以执行必要的操作。

此外，如果您有任何问题，您应该首先尝试给我，您的 TA 发送一封电子邮件。=)*

# vb.net - VC++中的托管数组

> ID：12557551
> 
> 赞同：0
> 
> 时间：2012-09-24T00:45:06.647
> 
> 标签：vb.net, visual-c++, visual-studio-2012

我想将托管数组从 VB.NET 传递给 VC++ 项目中的函数。我将如何声明我的 C++ 函数以及当我在其中时如何使用该数组？具体来说，我想让 VB 兼容的函数如下所示，它是用普通的旧 C 语言编写的。

```
void Vcopy(double *A, double *B)
{
    int n;
    for(n=0;n<3;n++)
    {
        B[n]=A[n];
    }
} 
```

也许某种善良的灵魂可以将其转换为可以与 VB 一起玩得更好的东西。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T01:06:45.353

可以管理 C++ 方法，例如 C++/CLI 吗？如果是这样，那么：

```
void Vcopy(array<double> ^A, array<double> ^B) 
```

顺便说一句，方法的其余部分应该相同，只要大小为 3 - 否则使用 A->Length 和 B->Length。

# wordpress - 无法在wordpress中设置用户密码

> ID：12557557
> 
> 赞同：0
> 
> 时间：2012-09-24T00:47:16.557
> 
> 标签：wordpress, login, passwords

我已经尝试了所有可以找到的方法来设置注册时的用户密码，但没有成功......我显示了字段，验证（如果密码匹配等）我在屏幕上打印它们，我在屏幕上打印用户 ID 所以需要的每个参数都在那里，但该函数似乎根本不起作用......这不起作用......

```
$newpassword = "zzzzzz";

update_user_meta($user_id, 'user_pass', $newpassword); 
```

这也行不通...

```
add_action( 'user_register', 'ts_register_extra_fields', 10 );
function ts_register_extra_fields($user_id, $password='11',$meta = array()){
    $userdata = array();
      if ( $_POST['password'] !== '' ) {
       $userdata['user_pass'] = $_POST['password'];
    }
    $new_user_id = wp_update_user( $userdata );
  } 
```

我的客户明天需要这个，所以我现在完全迷路了，我不知道为什么它不起作用......

忘记添加了，所有这些代码都是在我的主题的functions.php中添加的。（它进入它，因为我已经说过我在屏幕上发布变量）。

```
add_action( 'user_register', 'ts_register_extra_fields', 100 );

function ts_register_extra_fields( $user_id, $password = '', $meta = array() ) {

    $userdata = array();

    $userdata['ID'] = $user_id;

    $userdata['contacto'] = $_POST['contacto'];

    $userdata['nif'] = $_POST['nif'];

     if ( $_POST['password'] !== '' ) {
         $userdata['user_pass'] = $_POST['password'];
         echo "im in";
     }
     $new_user_id = wp_insert_user( $userdata );

     echo "id-".$userdata['ID'];

     echo "contacto-".$userdata['contacto'];

     echo "nif-".$userdata['nif'];

     echo "pass-".$userdata['user_pass'];
} 
```

所有这些回声都输出正确的数据...例如 id = 195 下次我尝试 196 等...contacto 和 nif 显示我在自定义注册字段中输入的数据，并且 pass 还显示我输入的数据在自定义注册字段密码...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:38:39.700

哈！发现错误。我安装了另一个名为“新用户批准”的插件，它需要管理员批准才能让用户登录。当管理员接受用户登录时，该插件生成另一个密码（以便能够以可读模式将密码发送给用户），使我在用户注册时所做的密码更新无效（因为它在之后生成了一个随机密码管理员接受）。

我通过禁用插件并测试functions.php 发现了这一点。它确实奏效了。为了使它们都能正常工作，我只是删除了插件中生成随机密码的代码。尽管用户不会通过电子邮件收到帐户摘要。它可以满足我的需要。

最好的问候， Vcoder

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T01:08:01.190

首先，我认为 WordPress 正在使用 MD5 加密密码。

```
$hash = wp_hash_password( $newpassword );
// then wp_update_user with $hash as the user_pass value 
```

其次，您不应该通过 Internet 以明文形式发送密码。如果您可以在发送密码之前使用 javascript 对密码进行加密，那可能会更安全。

最后，通过在 中指定 ID 来尝试更新现有用户`wp_update_user`。

# php - 什么时候包含一个包含文件？

> ID：12557559
> 
> 赞同：-1
> 
> 时间：2012-09-24T00:47:24.587
> 
> 标签：php

当调用脚本首次启动或到达包含语句时，包含文件的代码块是否被“抓取”？举个例子：

```
// execute many lines of code
sleep(10);
// do file retrievals that takes many minutes
include('somefile.php'); 
```

如果原始代码被执行（开始），那么 somefile.php 的代码块是在那一刻放入内存中，还是直到到达 include 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T00:49:51.767

当 include 语句被执行/运行时。

PHP 是逐行执行的。所以，当进程到达 时`include`，它会发挥它的魔力。

例如：

```
//some code
//some more code
//even more
include('file.php');//now all of file.php's contents will sit here 
//(so the file will be included at this point) 
```

见[http://php.net/manual/en/function.include.php](http://php.net/manual/en/function.include.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T00:51:47.300

`include`到达语句时包含该文件

执行

一个.php

```
var_dump("a",time());
// execute many lines of code
sleep(10);
// do file retrievals that takes many minutes
include('b.php'); 
```

b.php

```
var_dump("b",time()); 
```

输出

```
string 'a' (length=1)
int 1348447840
string 'b' (length=1)
int 1348447850 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-24T01:15:03.737

您可以使用以下代码对其进行测试：

```
<?php

echo 'Before sleep(): ' . $test . ' | ';

sleep(10);

echo 'After sleep(): ' . $test . ' | ';

include('inc_file.php');

echo 'After include(): ' . $test;

?> 
```

假设**inc_file.php**有这个代码：

```
<?php

$test = 'Started var';

?> 
```

**输出将是：**

在睡眠（）之前：| 睡眠后（）：| 在 include() 之后：开始 var

所以我们可以说**inc_file.php 的**内容只有在 include() 被调用后才可用。

我没有在 PHP 文档中找到明确的解释，但 @navnav 所说的我认为是令人满意的。

# python - python中的动态键绑定

> ID：12557562
> 
> 赞同：0
> 
> 时间：2012-09-24T00:47:48.373
> 
> 标签：python, algorithm, optimization, pygame, key-bindings

我现在正在用 pygame 在 python 中制作一个绘图程序。该界面应该是 vimesque，允许用户通过按键和输入命令来控制大多数事情。我想允许按钮的实时绑定；用户应该能够更改哪个键码对应于哪个功能。在我当前的结构中，所有绑定都存储在键码函数字典“bindingsDict”中。每当主循环接收到 KEY_DOWN 事件时，我都会执行： bindingDictkeyCode 其中 keyCode 存储为整数。这行得通，但似乎要花很多时间，而且我在思考可以优化的方法时遇到了麻烦。
有谁知道 dict 查找的大 O 运行时间？我假设因为它散列了它会在 ln(n) 中运行，但是这个解决方案和只在 mainloop 中编写 if 语句列表（不允许动态绑定）在性能上存在巨大差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T01:59:52.443

字典搜索对用户事件的响应不太可能导致程序出现任何明显的延迟。你的代码有问题。

顺便说一句，Python 中的 dict 和 set 搜索是 O(log(1)) - 但是对于 105 个键，或者甚至，如果计算应用的修饰符，可以线性搜索大约 1000 个不同的键绑定（也就是说，如果搜索是 O( N) ) 没有明显的延迟，即使在 5 年的（台式机）CPU 上也是如此。

因此，如果您想为您的问题提供解决方案，只需发布​​一些代码。（阅读评论我注意到你发现了其他似乎已经负责的东西）

# aviarc - 从 RC4 升级到 Aviarc 3.6.0 后，屏幕上的 FieldName 不能为空或未定义错误

> ID：12557563
> 
> 赞同：0
> 
> 时间：2012-09-24T00:48:03.010
> 
> 标签：aviarc

升级到 Aviarc 3.6.0 后，我们在其中一个屏幕上收到上述错误。

引发错误的屏幕部分：

```
<custom:record-table bottom="40" width="100%" left="0" top="0" dataset="account-ds" class="list" name="accountlist-rc" >
    <column width="0" display-field="AccountName"  header="Accounts" field2="AccountCode"  allow-sort="n" />
</custom:record-table> 
```

请注意，我们自定义了记录表小部件以允许为每列指定 2 个附加字段（field2 和 field3），因此这就是列中的 field2 的来源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T00:48:03.010

在调查了允许为记录表的每一列指定多个字段的更改后，如下所示（在 RecordTable.js 的**更新**方法中，从第 670 行开始）：

```
var field = this._datasetRow.getFieldObject(column.attributes['display-field']);
var field2 = this._datasetRow.getFieldObject(column.attributes['field2']);
var field3 = this._datasetRow.getFieldObject(column.attributes['field3']);

var text = field.getValue();
var text2 = field2.getValue();
var text3 = field3.getValue(); 
```

由于屏幕上的列规范（问题中的代码片段）没有为**field3**属性设置任何值

```
var field3 = this._datasetRow.getFieldObject(column.attributes['field3']); 
```

失败并引发错误。方法**getFieldObject**始终期望传递该值，即使它应该足够聪明以适应空值/未定义值也是如此。

为了解决这个问题，代码被重构如下：

```
var field = this._datasetRow.getFieldObject(column.attributes['display-field']);
var text = field.getValue();
if (column.attributes['field2'] != null) {
    var field2 = this._datasetRow.getFieldObject(column.attributes['field2']);
    var text2 = field2.getValue(); 
}
if (column.attributes['field3'] != null) {
    var field3 = this._datasetRow.getFieldObject(column.attributes['field3']);
    var text3 = field3.getValue();
} 
```

之后，小部件代码的自定义部分只需要满足可能未定义的*text2*和*text3*属性值。

# ios - iOS 6 iAd 属性和方法已弃用

> ID：12557566
> 
> 赞同：8
> 
> 时间：2012-09-24T00:48:25.600
> 
> 标签：ios, iad, deprecated, ios6

自 iOS 6 发布以来，有一些 iAd 属性和方法已被弃用，例如：

```
currentContentSizeIdentifier
requiredContentSizeIdentifiers
ADBannerContentSizeIdentifierPortrait
ADBannerContentSizeIdentifierLandscape 
```

那么现在在两个方向上实施 iAd 的最佳方式是什么？我们现在应该手动调整横幅视图框架的大小吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-14T18:44:46.457

我的应用程序只支持横向模式（也应该适用于纵向模式），并且 iAd 显示在应用程序的顶部。为了使这项工作与 ios6 一起工作，我必须这样做：

**在单触**

```
storesAdBannerView = new ADBannerView();
storesAdBannerView.AutoresizingMask = UIViewAutoresizing.FlexibleWidth; 
```

对于 objc （我不使用），我认为它可能是

```
[storesAdBannerView setAutoresizingMask:UIViewAutoresizingFlexibleWidth] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T14:42:21.547

横向广告似乎已被淘汰。见：[http ://www.iphonedevsdk.com/forum/iphone-sdk-development/108118-landscape-iad-banners-in-ios-6-edit-landscape-phased-out-completely.html](http://www.iphonedevsdk.com/forum/iphone-sdk-development/108118-landscape-iad-banners-in-ios-6-edit-landscape-phased-out-completely.html)

它需要进一步确认，因为我找不到任何有关该更改的 Apple 文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T15:26:31.773

我在那里看到了 2 个解决方法：[http](http://www.touch-code-magazine.com/iad-code-is-broken-in-ios6/) ://www.touch-code-magazine.com/iad-code-is-broken-in-ios6/ 测试了第一个解决方案：

简单的临时解决方案——您可以通过使用廉价的作弊方法快速让您的应用程序再次编译，将#import 显式添加到您正在访问 currentContentSizeIdentifier 和大小名称常量的文件中。这应该会让你继续前进，直到你改变你的应用程序以使用新的自动布局功能。

它在 xcode 4.5 上工作正常（横幅测试正常）。

# handlebars.js - 根据数据对象数组将 JSON 数据发送到不同的车把模板

> ID：12557572
> 
> 赞同：1
> 
> 时间：2012-09-24T00:49:18.117
> 
> 标签：handlebars.js

我不确定这是否可以做到，但我有这个 JSON 结构：

```
var data = {"obj": [
              {"user": "Fred", "age": "23", "type": "personal"},
              {"user": "Ralph", "age": "32", "type": "business"},
              {"user": "John", "age": "44", "type": "other"}
             ]
           }; 
```

我的 HTML 页面中有 3 个目标区域，我想在其中显示用户，以及基于“类型”的年龄。我正在使用车把来渲染这些并在我的 ajax 中有这个：

```
var source, 
template = Handlebars.compile(source), 
data;

$.each(data['obj'], function (i, o) {
    if (o['type'] === "personal") {
        source = $("#personal").html();
        $("#place1").html(template(data));
    } else if (o['type'] === "business") {
        source = $("#business").html();
        $("#place2").html(template(data));
    } else if (o['type'] === "casual") {
        source = $("#other").html();
        $("#place3").html(template(data));
    }
}); 
```

我希望拥有它，以便 $.each 函数将每个对象数组发送到指定区域，但他们最终只是将一批发送到一个部分，然后是下一个，依此类推。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T01:50:24.397

您快到了。在您的情况下，已编译的模板函数`template`将对象作为其参数，因此您可以说：

```
$('#place1').html(template(o)); 
```

然后模板将使用`{{user}}`和`{{age}}`访问数据；例如：

```
{{user}}'s age is {{age}} 
```

如果您想更改每种类型的实际模板，则只需`Handlebars.compile`再次调用：

```
if(o.type === 'personal') {
    template = Handlebars.compile($('#personal').html());
    $('#place1').html(template(o));
} 
```

如果需要，您可以将编译后的模板缓存在一个对象中。

# javascript - 为什么严格模式不限制标识符“eval”和“arguments”作为标签名称出现？

> ID：12557574
> 
> 赞同：0
> 
> 时间：2012-09-24T00:49:36.837
> 
> 标签：javascript, theory

因此，您可能知道，JavaScript 的严格模式对标识符`eval`和增加了限制`arguments`，有效地使它们成为保留字，但有两个例外：

*   它们仍然可以用作表达式，即在需要表达式的地方（尽管有几个例外），
*   它们仍然可以用作标签名称，并在`break`/`continue`语句中引用标签。

现在，我明白了第一个子弹。例如，如果标识符`eval`不允许作为表达式（并且真正的保留字不允许），我们将根本无法调用该`eval`函数（因为`eval(str)`是表达式）。也是如此`arguments`——我们需要能够将其用作表达式以便能够访问其元素（例如`arguments[0]`）。

不过，这条规则有三个例外。`eval`/`arguments`可能不会出现 (1) 作为赋值中的左侧表达式 (eg `eval = true;`)，(2) 作为`++`/的操作数`--`(eg `eval++`)， (3) 作为`delete`(eg `delete eval`) 的操作数。这些是唯一的例外，在所有其他表达式上下文中，它们是有效的。

我不明白的是第二个子弹。为什么它们仍然可以用作标签名称？例如，此代码即使在严格模式下也有效：

```
eval: for ( var i = 0; i < 10; i++ ) {
    arguments: for ( var j = 0; j < 10; j++ ) {
        if ( i < j ) continue eval;
        console.log( i - j );    
    }        
} 
```

注意如何`continue eval;`引用标签，与实际功能`eval`无关。`eval`

另外，请注意真正的保留字*不能*用作标签名称。据我了解，严格模式的目的是使 names`eval`和`arguments`保留字尽可能相似。那为什么要把它们作为有效的标签名称呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:22:55.680

我不*知道*为什么，但我可以冒险一个很好的猜测。

限制变量名的原因（`eval`以及为什么被禁止）是因为它们会影响变量名的绑定位置（即局部变量、封闭范围内的变量或全局对象上的属性，如果一个存在）。如果没有这些限制，一些名称在运行时之前是未绑定的，这意味着所有的危险。`arguments``with`

标签名称占用与变量名称、属性名称等不同的命名空间。`break`/的目标永远不会有歧义`continue`，因为标签是静态分配的，标签引用是静态解析的。（是的，`eval`代码可以包含标签。但是现有的跳转不能以这些标签`eval`为目标，代码中的跳转也不能以预先存在的标签为目标，因为标签解析发生在编译时，并且它的范围为程序，以使用 ECMAScript 终端的名称。包含`eval`调用的脚本是程序，调用执行的代码`eval`是程序，但出于标签定位的目的，两者是完全分开的。）

禁止变量名的原因`eval`根本`arguments`不适用于标签。因此，标签仍然可以命名为`eval`or `arguments`。以这种方式命名标签将是愚蠢的，真的。如果有人再次设计 ECMAScript/JavaScript，它们将是关键字，不能用作标签名称。但是禁止将它们作为标签名称并没有任何好处，并且至少有一个小的兼容性论点可以证明不禁止它们，因此它们没有被禁止。

# php - 当用户在 PHP 中登录时向管理员发送电子邮件

> ID：12557575
> 
> 赞同：0
> 
> 时间：2012-09-24T00:49:41.823
> 
> 标签：php, email, session, login, http-headers

我的脚本有问题，但我不确定它为什么会发生，可能是由于会话或 HTTP 标头。我希望我的登录脚本以这种方式“当用户登录时，应向管理员发送一封包含用户信息的电子邮件”，因此通过在以下代码中排除电子邮件部分，只需登录即可正常工作，我也在单独的文件中测试了电子邮件部分有效美好的。但我不明白为什么电子邮件没有发送并且页面显示为带有以下代码的白色空白屏幕。

```
session_start();
$errors = array();

if(isset($_POST['submit']) == "Login") {

    if(empty($_POST['username'])) { $errors[] = "Please enter Username! ";} 
    else { $username = mysql_real_escape_string($_POST['username']); }

    if(empty($_POST['password'])) { $errors[] = "Please enter Password! ";} 
    else { $password = mysql_real_escape_string($_POST['password']);}   

    if(empty($errors)) {
        $sql = mysql_query("SELECT * FROM users WHERE `username` = '".$username."' AND `password` = sha1('".$password."')");
         $row = mysql_fetch_assoc($sql);

        if($row) {  
            $_SESSION['user_login'] = true;
            $_SESSION['user_id'] = $row['user_id'];
            $_SESSION['full_name'] = $row['full_name'];

            /*******************Send Email***************************/
            //Send user information to admin            
            $to = "xxx@XXX.com";
            $from = "XXX@xxx.com";

            //Get User Information
            $Full_Name = $row['full_name'];
            $Browser = $_SERVER['HTTP_USER_AGENT'];          
            $User_IP = $_SERVER['REMOTE_ADDR'];
            // If IP address exists
            // Get country (and City) via  api.hostip.info
            if (!empty($User_IP)) {
                $country=file_get_contents('http://api.hostip.info/get_html.php?ip='.$User_IP);
                list ($_country) = explode ("\n", $country);
                $_country = str_replace("Country: ", "", $_country);
            }                        

            $subject = $Full_Name. " logged in!";

            $message = '<html><body>';          
            $message .= '<table rules = "all" border="0" cellpadding="10">';
            $message .= "<tr><td>&nbsp;</td><td>&nbsp;</td></tr>";
            $message .= "<tr style='background: #eee;'><td colspan='2'><strong>Dear Admin!</strong></td></tr>";
            $message .= "<tr><td colspan='2'>A User <strong>" .$Full_Name. "</strong> logged in with following information! </td></tr>";                
            $message .= "<tr><td width='30%'><strong>Name ID:</strong> </td><td>" . $Full_Name  . "</td></tr>";
            $message .= "<tr><td><strong>IP Address:</strong> </td><td>" . $User_IP  . "</td></tr>";
            $message .= "<tr><td><strong>Country:</strong> </td><td>" . $_country  . "</td></tr>";
            $message .= "<tr><td><strong>Browser:</strong> </td><td>" . $Browser  . "</td></tr>";                       
            $message .= "<tr><td>&nbsp;</td><td>&nbsp;</td></tr>";
            $message .= "</table>";             
            $message .= "</body></html>";   
            $headers = "From: " . $from . "\r\n";
            $headers .= "MIME-Version: 1.0\r\n";
            $headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
            mail($to, $subject, $message, $headers) or die("Error!");

            echo "<script>window.open('index.php','_self')</script>";

         } else {
            $errors[] = "Incorrect login, please try again!";
         }  
    }#Empty Errors

}#End Submit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T01:10:55.643

基本调试。在发送电子邮件之前，添加

```
error_reporting(E_ALL);
ini_set('display_errors', 'on'); 
```

然后运行，解决问题，然后在排序后删除这两行。

# php - 通过 Buzz 使用代理服务器

> ID：12557579
> 
> 赞同：1
> 
> 时间：2012-09-24T00:50:16.667
> 
> 标签：php, buzz

**问题：**代理服务器如何与[Buzz](https://github.com/kriswallsmith/Buzz)一起使用？

可以在[此处](https://github.com/kriswallsmith/Buzz/commit/414def624a630b62ec92c811f17151bcb62f7185)找到添加对代理的支持的提交。[但是，它似乎在最新的 commit](https://github.com/kriswallsmith/Buzz/blob/master/lib/Buzz/Client/AbstractClient.php)中不再可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-22T11:07:50.297

Buzz 0.10 包含基本代理支持（无需身份验证）。`AbstractClient`有一个方法调用`setProxy()`，允许您指定代理服务器的地址。例子：

```
$client = new FileGetContents();
$client->setProxy('192.168.0.1:8080'); 
```

# php - pdo 按数字选择行

> ID：12557582
> 
> 赞同：0
> 
> 时间：2012-09-24T00:50:37.927
> 
> 标签：php, mysql, pdo

试图切换到 PDO，我错过了一些简单的东西？

老路

```
$query="SELECT * FROM database"
$result=mysql_query($query);

$data=mysql_result($result, 2, "value"); 
```

这让我从第 3 行得到一个值，使用 PDO 我能想到的唯一方法是：

```
$result->setFetchMode(PDO::FETCH_ASSOC)
$row = $result->fetch();
$row = $result->fetch();
$row = $result->fetch();
$thisone = $row['value']; 
```

这种方式似乎很愚蠢和间接，有没有更好的方法来按数字选择一行？我需要为其他变量查询整个数据库，因此更改数据库 SELECT 语句将不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T01:18:17.507

您可以使用[`fetchAll`](http://php.net/manual/en/pdostatement.fetchall.php)来获取包含所有行的数组。然后，只需抓住您要查找的行：

```
$rows = $result->fetchAll();
$third = $rows[2];
$value = $third['value']; 
```

# ember.js - 如何在 ember.js 模板中使用自动对焦？

> ID：12557584
> 
> 赞同：9
> 
> 时间：2012-09-24T00:51:01.533
> 
> 标签：ember.js, handlebars.js

我有一个简单的 ember.js 文本字段，我正在尝试添加自动对焦

```
{{view PersonApp.SearchField placeholder="search..." valueBinding="searchText"}}

PersonApp.SearchField = Ember.TextField.extend({

}); 
```

我可以在 javascript 中添加它还是像模板本身的属性一样简单？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-11-03T23:42:15.130

**更新：**

Ember 的最新版本现在支持此内置功能，因此您不再需要重新打开 TextField 来添加属性绑定。截至 2014 年 1 月（提交[fdfe8495](https://github.com/emberjs/ember.js/commit/fdfe8495f738c460b0f1595bc8a37a67e568ff0f)），您可以在模板中简单地使用 HTML5 自动对焦属性：

```
{{input value=search type="text" placeholder="Search" autofocus="autofocus"}} 
```

这是一个[简单的 jsfiddle 演示](http://jsfiddle.net/PSx5q/1/)。

* * *

**以前的解决方案：**

您还可以重新打开 TextField 以允许您绑定 autofocus 属性：

```
Ember.TextField.reopen({
  attributeBindings: ['autofocus']
}); 
```

然后在您的模板中：

```
{{input value=search type="text" placeholder="Search" autofocus="autofocus"}} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-24T07:26:00.227

还可以选择在 TextField 上使用 HTML5 自动对焦属性。

```
PersonApp.SearchField = Ember.TextField.extend({
    attributeBindings: ['autofocus'],
    autofocus: 'autofocus'
}); 
```

有关自动对焦字段的更多信息，另请参阅[Mozilla Developer Network 上的文档：](https://developer.mozilla.org/en-US/docs/HTML/Forms_in_HTML#The_autofocus_attribute)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-24T01:29:44.333

自动对焦意味着我们立即开始关注文本框？你想要`didInsertElement`那个。

```
didInsertElement: function() {
    this.$().focus();             
} 
```

[http://jsfiddle.net/qKXJt/139/](http://jsfiddle.net/qKXJt/139/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-04T02:30:11.373

我将这个方法封装在一个 1kb 的小包中，以便更优雅地解决这个问题，直接在模板中，无需任何进一步的编码：

```
<body>
  <!-- all the libraries -->
  <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.3.0/handlebars.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/ember.js/1.2.0/ember.min.js"></script>
  <script src="http://rawgithub.com/AndreasPizsa/ember-autofocus/master/dist/ember-autofocus.min.js"></script>
  <!-- your template -->
  <script type="text/x-handlebars">
    Hello, world! {{ input }}
    :
    : more elements here
    :
    {{ autofocus }}
  </script>
  <!-- your app -->
  <script>
    Ember.Application.create();
  </script>
</body> 
```

该软件包位于[https://github.com/AndreasPizsa/ember-autofocus](https://github.com/AndreasPizsa/ember-autofocus) （或在`bower install ember-autofocus`）。享受！

# android - Android“ClassNotFoundException”有时会发生

> ID：12557585
> 
> 赞同：2
> 
> 时间：2012-09-24T00:51:05.403
> 
> 标签：android

我最近向市场发布了我的应用程序，当为少数用户加载时，我的应用程序崩溃了。我无法在手机或模拟器上重现该错误。这是堆栈..

该应用程序因少数人而崩溃的任何原因？有没有人遇到过这个问题？

```
java.lang.RuntimeException: Unable to instantiate application
xyz.android.MyApplication: java.lang.ClassNotFoundException: xyz.android.MyApplication in loader dalvik.system.PathClassLoader[/data/app/rageup.android.official-2.apk]
at android.app.ActivityThread$PackageInfo.makeApplication(ActivityThread.java:671)
at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4322)
at android.app.ActivityThread.access$3200(ActivityThread.java:129)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2155)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:143)
at android.app.ActivityThread.main(ActivityThread.java:4717)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassNotFoundException: xyz.android.MyApplication in loader     dalvik.system.PathClassLoader[/data/app/xyz.android.official-2.apk]
at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
at android.app.Instrumentation.newApplication(Instrumentation.java:942)
at android.app.ActivityThread$PackageInfo.makeApplication(ActivityThread.java:666)
... 11 more 
```

这是我的清单文件的片段

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="xyz.android.official"
android:versionCode="AAA"
android:versionName="AAA" >

<uses-sdk android:minSdkVersion="7" />
<application
    android:name="xyz.android.MyApplication"
    android:icon="@drawable/myicon"
    android:label="@string/app_name"> 
```

这是我的 MyApplication 类。

```
public class MyApplication extends Application 
{ 

public int someVar = 555;
private static MyApplication me;

@Override
public void onCreate() {        
    super.onCreate();
    me = this ;
}

public void setSomeVar(int someVar)
{       
    this.someVar = someVar;
}

public int getSomeVar()
{
    return someVar;
}

public static MyApplication getInstance() {
     return me;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T02:15:51.943

这主要导致目标构建的更改。有人说您需要将库文件夹更改为`lib`from ，其他人说您应该在 Manifest.xml 中`libs`编写。`.MyApplication`

来源：[工作应用程序上的 java.lang.ClassNotFoundException](https://stackoverflow.com/questions/3781151/java-lang-classnotfoundexception-on-working-app)

# objective-c - 在没有对话框的情况下发布到 facebook ios 6

> ID：12557589
> 
> 赞同：2
> 
> 时间：2012-09-24T00:51:37.143
> 
> 标签：objective-c, facebook, ios6

我想知道是否可以使用 SLComposeViewController 在用户的 Facebook 墙上发布内容但不显示共享表/对话框？

以下是我正在使用的代码：

```
if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {

        SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

        SLComposeViewControllerCompletionHandler myBlock = ^(SLComposeViewControllerResult result){
            if (result == SLComposeViewControllerResultCancelled) {

                NSLog(@"Cancelled");

            } else

            {
                NSLog(@"Done");
            }

            [controller dismissViewControllerAnimated:YES completion:Nil];
        };
        controller.completionHandler =myBlock;

        [controller setInitialText:eventInfoToFacebook];

        [self presentViewController:controller animated:YES completion:Nil];

    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:19:48.173

导入社交框架：

```
#import <Social/Social.h> 
```

-

```
if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {

        SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

        SLComposeViewControllerCompletionHandler myBlock = ^(SLComposeViewControllerResult result){
            if (result == SLComposeViewControllerResultCancelled) {

                NSLog(@"Cancelled");

            } else

            {
                NSLog(@"Done");
            }

            [controller dismissViewControllerAnimated:YES completion:Nil];
        };
        controller.completionHandler =myBlock;

        [controller setInitialText:@"Test Post from mobile.safilsunny.com"];
        [controller addURL:[NSURL URLWithString:@"http://www.mobile.safilsunny.com"]];
        [controller addImage:[UIImage imageNamed:@"fb.png"]];

        [self presentViewController:controller animated:YES completion:Nil];

    }
    else{
        NSLog(@"UnAvailable");
    }

} 
```

/

```
//Deprecated in iOS6

    ACAccountStore *accountStore = [[ACAccountStore alloc] init];
    ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

    [accountStore requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error) {

        ACAccount *account = [[ACAccount alloc] initWithAccountType:accountType];
        NSLog(@"%@, %@", account.username, account.description);
    }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T04:31:47.380

在这里我得到了答案，为了发帖`image data`，`url`我们需要一起添加 Social.framework，这个框架在 iOS6 中可用。

只需`Social.framework`在您的项目中添加并添加自爆代码即可。

```
if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook])
{

    SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

    SLComposeViewControllerCompletionHandler myBlock = ^(SLComposeViewControllerResult result){
        if (result == SLComposeViewControllerResultCancelled) {

            NSLog(@"ResultCancelled");

        } else

        {
            NSLog(@"Success");
        }

        [controller dismissViewControllerAnimated:YES completion:Nil];
    };

    controller.completionHandler =myBlock;

    [controller addURL:[NSURL URLWithString:@"https://itunes.apple.com/us/app/social-checkin/id504791401?mt=8"]];

    if (encoded_ImageData == nil) {

        [controller addImage:[UIImage imageNamed:@"No_ImageFound.png"]];

    }
    else
    {

    [controller addImage:[UIImage imageWithData:encoded_ImageData]];

    }

    NSString *businessName;

    //Set business name string to be passed on facebook
    if (m_BusinessNameString == nil || [m_BusinessNameString isEqualToString:@""])
    {
        businessName = @"Business name not specified!";
    }
    else
    {
        businessName = [m_BusinessNameString uppercaseString];
    }

    NSString *nameString = [NSString stringWithFormat:@"CHECKED IN @"];

    //user has checked in with his friends if sc-merchant
    NSString *friendsString;

    if ([checkedFriendsNameArray count] > 0)
    {
        NSMutableString *checkedFriendsTempStr = [[NSMutableString alloc] init];

        for (NSMutableString *checkedStr in checkedFriendsNameArray)
        {

            [checkedFriendsTempStr appendFormat:[NSString stringWithFormat:@"%@,",checkedStr]];

            friendsString = [NSString stringWithFormat:@"WITH %@",checkedFriendsTempStr];
        }
    }
    else

    {
        friendsString = [NSString stringWithFormat:@"WITH NO FRIENDS"];

    }

    NSString *fname= [[NSUserDefaults standardUserDefaults] valueForKey:@"userfname"];
    NSString *lname= [[NSUserDefaults standardUserDefaults] valueForKey:@"userlname"];

    NSString *name=[fname stringByAppendingString:[NSString stringWithFormat:@"%@",lname]];

    NSString *main_TextString =[NSString stringWithFormat:@"%@ \n %@ %@ %@ %@",upperCaseStatusString,name,nameString,businessName,friendsString];

    [controller setInitialText:main_TextString];

    [self presentViewController:controller animated:YES completion:Nil];

}
else{

    NSLog(@"UnAvailable");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-09T06:49:51.010

在您的 ViewController 中添加以下代码并导入以下框架。

```
import FBSDKCoreKit
import FBSDKLoginKit
import FBSDKShareKit

@IBAction func btnPostClick(_ sender: Any)
 {
        if (FBSDKAccessToken.current() != nil)
        {
            if FBSDKAccessToken.current().hasGranted("publish_actions"){
                postOnFB()
            }
            else
            {
                let loginManager = FBSDKLoginManager()
                loginManager.logIn(withPublishPermissions: ["publish_actions"], from: self, handler: { (result, error) in
                    if error == nil{
                       self.postOnFB()
                    }
                    else{
                        print(error?.localizedDescription ?? "")
                    }
                })
            }
        }
        else
        {
            let loginManager  = FBSDKLoginManager()
            loginManager.logIn(withPublishPermissions: ["publish_actions"], from: self, handler: { (result, error) in
                if error == nil{
                    self.postOnFB()
                }
            })
        }
    }

 func postOnFB() 
   {
        FBSDKGraphRequest(graphPath: "me/feed", parameters: ["message": "YOUR MESSAGE"], httpMethod: "POST").start { (connection, result, error) in
            if error == nil{
                print("post id \(result ?? "")")
           }
            else{
                print("error is \(error?.localizedDescription ?? "")")
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-24T23:15:19.573

这在 facebook-ios-sdk 3.0 中是可能的。 [这里](https://developers.facebook.com/ios/)

我正在使用此代码进行分享。

```
 [FBRequestConnection startWithGraphPath:@"me/feed"
                             parameters:params
                             HTTPMethod:@"POST"
                      completionHandler:^(FBRequestConnection *connection,
                                          NSDictionary * result,
                                          NSError *error) {
                          if (error) {
                              NSLog(@"Error: %@", [error localizedDescription]);
                          } else {

                              }
                      }]; 
```

当用户单击共享按钮并且没有与用户直接发布到用户墙的对话时，我调用了此方法。params 是共享包含的参数。

# php - 仅在 IE 8 中重叠元素

> ID：12557592
> 
> 赞同：2
> 
> 时间：2012-09-24T00:51:58.140
> 
> 标签：php, jquery, html, css, internet-explorer

我对这里的数据有意见：

[http://jsfiddle.net/ktpmm5/Z5z8n/](http://jsfiddle.net/ktpmm5/Z5z8n/)

页面在这里上演：

[http://steppingstonez.com/daretorepair/magazines.php](http://steppingstonez.com/daretorepair/magazines.php)

基本上，我的分页元素被推到左边并覆盖在我的标题上方。这仅在 IE 8 中发生 - 在 Chrome、FF 和 Opera 中运行良好。我要疯了，试图找出问题所在。html 验证正常。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T01:11:38.047

另一个快速解决方案：为您的`.paging`CSS 类 (UL) 指定正确的宽度。例如，宽度`220px`似乎是正确的。

```
.paging {
  ...
  ...
  width: 220px; /* new */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T01:08:33.540

快速解决方案：

为了使其大致工作，将分页包装器更改为具有`position: relative`，并将 ul.paging 向右浮动（删除位置）。

您需要在 中添加高度`head_text`以包含分页包装器（因为`paging_wrapper`现在位于流之外，因此它的高度不计算在内）。

更长的解决方案：

即使使用上述修复程序，您仍然会遇到长标题会重叠的问题，因此我将定义标题的区域/宽度（如果太长则使其换行）并限制寻呼设备的区域（通过限制显示的按钮数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T02:02:32.173

我认为利用负利润似乎更多是一个问题。您在 paging_wrapper 和 paging li 上都有一个 margin-top。这可能会导致 IE 中的支持有些奇怪。

# iphone - 游戏中心的问题

> ID：12557593
> 
> 赞同：1
> 
> 时间：2012-09-24T00:52:03.013
> 
> 标签：iphone, objective-c, ios, game-center, ios6

刚刚完成我的第一个 iOS 游戏（大部分）。一切准备就绪，只需在游戏中心链接即可。然而，这被证明是……烦人的。我的应用程序都在 iTunes Connect 上注册，所有 Game Center 代码都直接取自 Apple。那么为什么这些都不起作用呢？

第一：认证总是失败；

```
 GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];

 localPlayer.authenticateHandler = ^(UIViewController *loginVC, NSError *error) {
    if ([GKLocalPlayer localPlayer].authenticated) {
        // authentication successful   
    }
    else if (loginVC) {
        // player not logged in yet, present the vc
        [self presentViewController:loginVC animated:YES completion:nil];
    }
    else {
        // authentication failed
    }
}; 
```

出现错误“请求的操作已被取消”

作为推论，将来尝试展示游戏中心 vc 会产生“玩家未登录消息”

第二：这个

```
GKScore *score = [[GKScore alloc] init];
if (score) {
    score.value = self->selectedScore;
    NSArray* scoreArray = [[NSArray alloc]initWithObjects:score, nil];
    //score.category = @"High Scores";

    UIActivityViewController *avc = [[UIActivityViewController alloc]
                                     initWithActivityItems:scoreArray applicationActivities:nil];
    avc.completionHandler = ^(NSString *activityType, BOOL completed) {
        if (completed)
            [self dismissViewControllerAnimated:YES completion:nil];
    };

    if (avc)
        [self presentViewController:avc animated:YES completion:nil];
} 
```

产生一个`'NSInvalidArgumentException', reason: '*** -[__NSPlaceholderArray initWithObjects:count:]: attempt to insert nil object from objects[0]'`

我从根本上做错了什么？感谢任何可以提供任何帮助的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T06:42:20.383

尝试使用您的测试用户帐户在 Game Center 应用程序中注销/登录。
检查这个答案：[https ://stackoverflow.com/a/4420457/89364](https://stackoverflow.com/a/4420457/89364)

# objective-c - UIView.superView (BOOL) == 失败

> ID：12557594
> 
> 赞同：0
> 
> 时间：2012-09-24T00:52:11.263
> 
> 标签：objective-c, ios, uiview, casting, boolean

我有一个简单的方法来检查视图的超级视图，并返回一个 BOOL。然而，该方法间歇性地无法产生正确的答案（或者至少是我期望的答案）。

方法是：

```
-(BOOL) isTheViewShowing
{
    return (BOOL) [theView superview];
} 
```

有一个点击手势可以删除视图，我记录了以下内容（当发生不希望的情况时）：

```
isTheViewShowing: NO
theView: <UIView: 0x3c1a10; frame = (0 232; 320 135); clipsToBounds = YES; layer = <CALayer: 0x365480>>,
superView: <UIView: 0x392400; frame = (0 0; 320 367); autoresize = W+H; layer = <CALayer: 0x35fe90>> 
```

如日志所示，superView 存在，但为什么演员表失败了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T01:01:34.783

> 超级视图：<UIView：0x392400

注意低位字节`superview`为0x00。我还没有真正研究过当您尝试将指针强制转换为 a 时会发生什么`BOOL`，但由于 a`BOOL`本质上是 a`char`如果编译器只查看低位字节，我一点也不感到惊讶。试试这个：

```
-(BOOL) isTheViewShowing
{
    return ([theView superview] != nil);
} 
```

这在两个方面更好：1）它确实有效，2）它更好地传达了你想要做的事情。

# iphone - 视频无法在 Xcode 中播放；NIL 字符串参数

> ID：12557599
> 
> 赞同：0
> 
> 时间：2012-09-24T00:52:34.070
> 
> 标签：iphone, video, xcode4.3

这是我为在我的 Xcode 项目中播放视频而编写的代码。当我运行该项目时，它会在我身上崩溃。我得到这个原因：由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“ *** -[NSURL initFileURLWithPath:]: nil string parameter”

我找到了一个在模拟器上运行时可以使用的教程。我将我的视频添加到项目中并相应地更新了代码。我的视频是 m4v 格式，就像教程中的其他视频一样。当我用我的视频运行应用程序时，它仍然崩溃并给我同样的错误。我很快就把我的视频导出到了 iTunes。我究竟做错了什么？

.h 文件

```
#import <UIKit/UIKit.h>
#import <MediaPlayer/MediaPlayer.h>  

@interface BigBuckBunnyViewController : UIViewController {

}

-(IBAction)playMovie:(id)sender;

@end 
```

.m 文件

```
#import "BigBuckBunnyViewController.h"

@implementation BigBuckBunnyViewController

-(IBAction)playMovie:(id)sender
{
UIButton *playButton = (UIButton *) sender; 

NSString *filepath   =   [[NSBundle mainBundle] pathForResource:@"ladder rack 1 4"  
ofType:@"m4v"];
NSURL    *fileURL    =   [NSURL fileURLWithPath:filepath];
MPMoviePlayerController *moviePlayerController = [[MPMoviePlayerController alloc] 
initWithContentURL:fileURL];

[[NSNotificationCenter defaultCenter] addObserver:self

selector:@selector(moviePlaybackComplete:)

name:MPMoviePlayerPlaybackDidFinishNotification

object:moviePlayerController];

[moviePlayerController.view setFrame:CGRectMake(playButton.frame.origin.x, 

playButton.frame.origin.y, 

playButton.frame.size.width, 

playButton.frame.size.height)];

[self.view addSubview:moviePlayerController.view];
//moviePlayerController.fullscreen = YES;

//moviePlayerController.scalingMode = MPMovieScalingModeFill;

[moviePlayerController play];
}

- (void)moviePlaybackComplete:(NSNotification *)notification
{
MPMoviePlayerController *moviePlayerController = [notification object];
[[NSNotificationCenter defaultCenter] removeObserver:self

name:MPMoviePlayerPlaybackDidFinishNotification

object:moviePlayerController];

[moviePlayerController.view removeFromSuperview];
[moviePlayerController release];
}

- (void)dealloc {
[super dealloc];
}

@end 
```

好的，所以我能够创建一个 html 页面并将 html 页面链接到我的 .m 文件中的视图确实加载部分。我创建了一个 UIWebview 并将其添加到我的 xib 视图中。我将视频放在服务器上。这可能是一个更好的解决方案，更少的加载时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:08:38.800

这将起作用

```
#import <UIKit/UIKit.h>
#import <MediaPlayer/MediaPlayer.h>

@interface TipsViewController : UIViewController {

  MPMoviePlayerViewController *playerController;
}

-(IBAction)playVideo;

@end 
```

.m 文件

```
 - (IBAction)playVideo{

 NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]pathForResource:@"tcniche"  
    ofType:@"mp4"]];

 if(url != nil){

           playerController = [[MPMoviePlayerViewController alloc] 
    initWithContentURL:url];
           [self presentMoviePlayerViewControllerAnimated:playerController];

           playerController.moviePlayer.movieSourceType = MPMovieSourceTypeFile;

          [playerController.moviePlayer play]; 
 }
 else{

      NSLog(@"URL not found");

    }

 } 
```

如果 url 为空，请检查您的文件和路径。

**注意**：做内存管理自己的东西:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:10:19.247

你得到 nil 因为`NSString *filepath = [[NSBundle mainBundle] pathForResource:@"ladder rack 1 4" ofType:@"m4v"];`包含空格。所以你需要改变它：

```
NSURL   *fileURL    =   [NSURL fileURLWithPath:filepath] absoluteString]; 
```

参考这个[链接](http://www.iphonedevsdk.com/forum/iphone-sdk-development/26589-nsurl-fileurlwithpath-problems-with-spaces-in-path.html)

# c# - 将小型 C# 校验和程序转换为 Java

> ID：12557600
> 
> 赞同：1
> 
> 时间：2012-09-24T00:52:43.120
> 
> 标签：c#, java, checksum

我正在尝试为遥控飞机建造一个简单的地面控制站。我几乎完成了它，但是我在校验和计算方面遇到了很多麻烦。我了解 Java 和 C# 的数据类型是不同的。我试图解释这一点，但我不确定我是否成功。该程序使用 CRC-16-CCITT 方法。

这是我的港口：

```
public int crc_accumulate(int b, int crc) {
        int ch = (b ^ (crc & 0x00ff));
        ch = (ch ^ (ch << 4));
        return ((crc >> 8) ^ (ch << 8) ^ (ch << 3) ^ (ch >> 4));
}

public byte[] crc_calculate() {
        int[] pBuffer=new int[]{255,9,19,1,1,0,0,0,0,0,2,3,81,4,3};
        int crcEx=0;
        int clength=pBuffer.length;
        int[] X25_INIT_CRC=new int[]{255,255};
        byte[] crcTmp=new byte[]{(byte)255,(byte)255};
        int crcTmp2 = ((crcTmp[0] & 0xff) << 8) | (crcTmp[1] & 0xff);
        crcTmp[0]=(byte)crcTmp2;
        crcTmp[1]=(byte)(crcTmp2 >> 8);
        System.out.println("pre-calculation: 0x"+Integer.toHexString((crcTmp[0]&0xff))+" 0x"+Integer.toHexString((crcTmp[1]&0xff))+";   ushort: "+crcTmp2);
        if (clength < 1) {
                System.out.println("clength < 1");
                return crcTmp;
        }
        for (int i=1; i<clength; i++) {
                crcTmp2 = crc_accumulate(pBuffer[i], crcTmp2);
        }
        crcTmp[0]=(byte)crcTmp2;
        crcTmp[1]=(byte)(crcTmp2 >> 8);
        System.out.print("crc calculation: 0x"+Integer.toHexString((crcTmp[0]&0xff))+" 0x"+Integer.toHexString((crcTmp[1]&0xff))+";   ushort: "+crcTmp2);
        if (crcEx!=-1) {
                System.out.println("  extraCRC["+crcEx+"]="+extraCRC[crcEx]);
                crcTmp2=crc_accumulate(extraCRC[crcEx], crcTmp2);
                crcTmp[0]=(byte)crcTmp2;
                crcTmp[1]=(byte)(crcTmp2 >> 8);
        System.out.println("with extra CRC:  0x"+Integer.toHexString((crcTmp[0]&0xff))+" 0x"+Integer.toHexString((crcTmp[1]&0xff))+";   ushort: "+crcTmp2+"\n\n");
        }
        return crcTmp;
} 
```

这是原始的 C# 文件：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ArdupilotMega
{
class MavlinkCRC
{
    const int X25_INIT_CRC = 0xffff;
    const int X25_VALIDATE_CRC = 0xf0b8;

    public static ushort crc_accumulate(byte b, ushort crc)
    {
        unchecked
        {
            byte ch = (byte)(b ^ (byte)(crc & 0x00ff));
            ch = (byte)(ch ^ (ch << 4));
            return (ushort)((crc >> 8) ^ (ch << 8) ^ (ch << 3) ^ (ch >> 4));
        }
    }

    public static ushort crc_calculate(byte[] pBuffer, int length)
    {
        if (length < 1)
        {
            return 0xffff;
        }
        // For a "message" of length bytes contained in the unsigned char array
        // pointed to by pBuffer, calculate the CRC
        // crcCalculate(unsigned char* pBuffer, int length, unsigned short* checkConst) < not needed

        ushort crcTmp;
        int i;

        crcTmp = X25_INIT_CRC;

        for (i = 1; i < length; i++) // skips header U
        {
            crcTmp = crc_accumulate(pBuffer[i], crcTmp);
            //Console.WriteLine(crcTmp + " " + pBuffer[i] + " " + length);
        }

        return (crcTmp);
    }

}
} 
```

我很确定我的端口中的问题位于第 1 行和第 5 行之间。我希望得到 0x94 0x88 的输出，但程序输出的是 0x2D 0xF4。

如果有人能告诉我哪里出错了，我将不胜感激。

感谢您的帮助，卡梅伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T02:08:08.093

好吧，对于初学者来说，让我们稍微清理一下 C# 代码：

```
const int X25_INIT_CRC = 0xffff;

public static ushort crc_accumulate(byte b, ushort crc)
{
    unchecked
    {
        byte ch = (byte)(b ^ (byte)(crc & 0x00ff));
        ch = (byte)(ch ^ (ch << 4));

        return (ushort)((crc >> 8) ^ (ch << 8) ^ (ch << 3) ^ (ch >> 4));
    }
}

public static ushort crc_calculate(byte[] pBuffer)
{
    ushort crcTmp = X25_INIT_CRC;

    for (int i = 1; i < pBuffer.Length; i++) // skips header U
        crcTmp = crc_accumulate(pBuffer[i], crcTmp);

    return crcTmp;
} 
```

现在最大的问题是 Java 中没有无符号数字类型，因此您必须通过使用下一个更大的数字类型而不是`ushort`and`byte`并根据需要屏蔽高位来解决这个问题。您也可以直接删除，`unchecked`因为 Java 无论如何都没有溢出检查。最终结果是这样的：

```
public static final int X25_INIT_CRC = 0xffff;

public static int crc_accumulate(short b, int crc) {
    short ch = (short)((b ^ crc) & 0xff);
    ch = (short)((ch ^ (ch << 4)) & 0xff);

    return ((crc >> 8) ^ (ch << 8) ^ (ch << 3) ^ (ch >> 4)) & 0xffff;
}

public static int crc_calculate(short[] pBuffer) {
    int crcTmp = X25_INIT_CRC;

    for (int i = 1; i < pBuffer.length; i++) // skips header U
        crcTmp = crc_accumulate(pBuffer[i], crcTmp);

    return crcTmp;
} 
```

对于您问题中的输入（`{ 255, 9, 19, 1, 1, 0, 0, 0, 0, 0, 2, 3, 81, 4, 3 }`）原始 C#，清理 C# 和 Java 都产生`0xfc7e`.

# android - 以编程方式禁用和启用果冻豆导航栏

> ID：12557601
> 
> 赞同：1
> 
> 时间：2012-09-24T00:53:08.593
> 
> 标签：android, android-layout, lockscreen, softkeys

我正在开发一个安卓锁屏，需要禁用导航栏。使用启动器，您可以禁用主页按钮，您可以覆盖后退按钮，但不能覆盖最近按钮。是否可以暂时禁用或清除最近的软键？

后续问题 - 有没有人能够通过果冻豆上的 root 以编程方式禁用和启用导航栏？

在捕获触摸时使用熄灯模式并覆盖 onSystemUiVisibilityChange 怎么样？

我已经反编译了蹒跚学步的锁——它实现了这个功能，但它使用了一些黑客技术并且主要活动被破坏了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T02:17:23.813

在库存设备上没有办法做到这一点。您必须自定义 Android 操作系统。您看到的任何“黑客行为”都可能在下一次更新时中断。您也无法真正更换系统锁定屏幕。

# c# - 为什么我可以创建一个类的实例而不将其存储到变量中并且仍然可以正常工作？

> ID：12557603
> 
> 赞同：4
> 
> 时间：2012-09-24T00:53:32.637
> 
> 标签：c#, class, variables, instance

我有一个名为的非静态类`ImplementHeaderButtons`，其中包含一个名为`Implement`. 类名和方法名不重要，重要的是它们不是静态的，所以需要实例化才能使用，对吧？

所以我曾经这样做：

```
var implementHeaderButtons = new ImplementHeaderButtons();
implementHeaderButtons.Implement(this, headerButtons); 
```

但后来我决定尝试一下它（实际上我正在寻找一种使它成为单线的方法）并且我得出结论认为以下代码也可以工作：

```
new ImplementHeaderButtons().Implement(this, headerButtons); 
```

现在，我不需要一个变量来保存实例，但我的问题是：**我为什么可以动态创建一个类的新实例并调用它的方法而没有变量来存储实例？**

如果它没有按预期工作，我不会感到惊讶，但确实如此。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T00:59:44.533

> 它们不是静态的，所以需要实例化才能使用，对吧？

是的，但是您仍在使用 实例化该类`new ImplementHeaderButtons()`，只是没有在任何地方存储对该新创建实例的引用。

您仍然可以像在示例中所做的那样在此实例上调用方法，但之后您将无法在没有引用的情况下对它执行任何其他操作。最终，垃圾收集器将清理该实例（前提是您调用的方法未在某处存储对该对象的引用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T01:01:33.267

为方便起见，变量只是一个参考。您没有命名它，但它就在那里，在堆栈的顶部（通常;-)）。只要您可以通过使用它的名称（您没有）或通过处理您刚刚创建的“未命名”对象来引用变量，您是否可以调用它的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T01:03:11.310

您的调用将`new ImplementHeaderButtons()`返回 ImplementHeaderButtons 的一个实例。然后，您调用`.Implement()`该实例。

可以这样想：

```
(new ImplementHeaderButtons()).Implement(this, headerButtons); 
```

# objective-c - 在应用内播放音乐

> ID：12557605
> 
> 赞同：0
> 
> 时间：2012-09-24T00:53:57.257
> 
> 标签：objective-c, ios, core-audio

即使用户更改视图控制器等，我也想在整个应用程序中播放配乐。我有一个来自配乐的循环，我想在它完成后重复。我目前正在通过以下方式播放声音：

```
NSString *soundFile = [[NSBundle mainBundle]
                       pathForResource:@"Click03" ofType:@"wav"];
AVAudioPlayer  *audioPlayer = [[AVAudioPlayer alloc]
               initWithContentsOfURL:[NSURL fileURLWithPath: soundFile]
               error:nil];
[audioPlayer start];
 // or [audioPlayer stop]; 
```

我不太确定这是否是播放声音的最佳方式。有人可以向我解释如何做我上面问的吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:23:51.037

基本上你正在尝试播放背景音频..

检查以下链接，这将对您有所帮助

[使用 AVAudioplayer 在后台播放音乐](https://stackoverflow.com/questions/7619794/play-music-in-background-in-iphone-using-avaudioplayer)

[http://www.sagorin.org/2011/11/29/ios-playing-audio-in-background-audio/](http://www.sagorin.org/2011/11/29/ios-playing-audio-in-background-audio/)

如需重复音频，请查看此链接

[如何重复 AVAudioPlayer？](https://stackoverflow.com/questions/6804160/how-do-i-repeat-a-avaudioplayer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T06:24:47.627

编写代码以在 Appdelegate 中播放声音。

```
-(void)PlaySound:(NSString*)strSoundFileName 
{
    fileURL=[[NSURL alloc] initFileURLWithPath:strSoundFileName];
    audioPlayer=[[AVAudioPlayer alloc] initWithContentsOfURL:fileURL error:nil];
    audioPlayer.delegate=self;
    [audioPlayer prepareToPlay];

    audioPlayer.currentTime=0;
    [audioPlayer play];
    audioPlayer.numberOfLoops=-1;
} 
```

# javascript - 用户选择单选时向输入字段插入属性

> ID：12557606
> 
> 赞同：1
> 
> 时间：2012-09-24T00:54:05.290
> 
> 标签：javascript, input, attributes, insert, field

我需要一个可以向字段插入属性并在用户取消选择该字段时将其删除的 JavaScript。

这是我用于收音机选择的代码：

```
<script>
$(document).ready(function() {
    $("input[name$='sel']").click(function() {
        var test = $(this).val();

        $("div.desc").hide();
        $("#sel" + test).show();
    });

    if (test == "CreditCard") {
        $("#card").addClass("validate[custom[card]] text-input");
    } else {
        $("#card).removeClass("validate[custom[card]] text-input");
    }
});
</script> 
```

字段代码：

```
<table><tr><td>

<p>
Credit/Debit Card<lable  style="margin-right:1px;"></lable><input type="radio" name="sel" id="sel"  value="CreditCard" />
</p> 
<p>
Paypal<input type="radio" id="sel"  name="sel" value="Paypal"   />
</p>
<p>
Wire Transfer<input type="radio" id="sel"  name="sel" value="WireTransfer"  />
</p>
<!====================================================================================>
</td><td>
<!====================================================================================>
<div id="selCreditCard" class="desc">

<label for="card"><strong>Card Number<font color=red size=3> *</font></strong></label>
        <input name="card"   type="text"  id="card" value=""  style="width:85px;" />  
</div>
<!====================================================================================>
<div id="selPaypal" class="desc" style="display: none;margin-left:20px;margin-top:1px;margin-bottom:1px;">
    paypal
</div>
<!====================================================================================>
<div id="selWireTransfer" class="desc" style="display: none;margin-left:20px;margin-top:0px;margin-bottom:-5px;">

Transfer

</div>
<!====================================================================================>
</td></tr></table>
​ 
```

这是需要插入“卡片”输入字段的属性：

```
class="validate[custom[card]] text-input" 
```

当用户选择值为 的单选时`CreditCard`，该属性将被插入到输入字段中，当用户取消选择值为 的单选时，`CreditCard`该属性将被删除。

小提琴链接： [FIDDLE](http://jsfiddle.net/ECUN8/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T01:40:08.327

telexper，你的代码中有很多错误的地方，不幸的是我现在没有时间解释。

但我会在这里为你留下一个工作代码：http: [//jsfiddle.net/RASG/DSrLS/](http://jsfiddle.net/RASG/DSrLS/)

只需单击“信用卡/借记卡”，该类`nowitsadded`将被添加到输入字段中，该字段将变为红色。

**HTML**

```
<input type="radio" id="sel1" name="sel"> Credit/Debit Card

<br>

<input type="radio" id="sel2" name="sel"> Paypal

<br>

<input type="radio" id="sel3" name="sel"> Wire Transfer

<br>
<br>

<div id="selCreditCard" class="desc">
    Card Number <input name="card" type="text" id="card" value="">
</div> 
```

**JS**

```
$('#sel1').click(function() { $('#card').addClass('nowitsadded') }) 
```

**CSS**

```
.nowitsadded {background-color: red} 
```

# ruby-on-rails - 我如何管理与我的 Rails 应用程序不同的域上的注册？

> ID：12557609
> 
> 赞同：1
> 
> 时间：2012-09-24T00:54:47.380
> 
> 标签：ruby-on-rails, ruby-on-rails-3

所以我在 www.myapp.com 有一个 Rails 应用程序，在 www.marketingpage.com 我有一个营销登录页面。

我想要发生的是，当人们在我的营销页面上填写注册表时，它由我的 Rails 应用程序管理。

我正在考虑在 myapp.com/mktg 上创建一个视图，然后将 www.marketingpage.com 重定向到 myapp.com/mktg。

但是，这种方法的问题是我不希望用户看到不同的域名进行注册。

我该如何解决这个问题，以便营销页面上的注册看起来和感觉像是一个完整的“迷你站点”，但它由我的主要 Rails 应用程序提供支持？

谢谢。

**编辑 1**

另一件事是，对于marketingpage.com 的注册页面，我只想[对Devise](https://github.com/plataformatec/devise/wiki/How%20To%3a%20Email-only%20sign-up)使用电子邮件注册——所以marketingpage.com 不仅仅是一页。它将是 1 页，然后它们至少还有 1 或 2 页。因此，无论域/路由策略如何，也必须考虑到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:31:01.750

如果您有电子邮件输入：

```
<input id="email"></input>
<button id="submit-email"></button> 
```

您可以在单击按钮时发送一个 jsonp（绕过同源限制）请求：

```
$('#submit-email').click(function() {
    submitted_email = $('#email').value()

    // client-side validations

    $.ajax({
        type: 'POST',
        dataType: 'jsonp',
        url: "http://www.myapp.com/signup",
        data: { user: { email: submitted_email } },
        success: function(data) {
            // signup success
        }
    });
}); 
```

在铁轨末端：

```
class UserController
    def signup
        @user = User.create(params[:user])
        // handle success/failure
        respond_to do |format|
            format.js { render :json => @user }
        end  
    end
end 
```

要检索用户列表：

```
 $.ajax({
        type: 'GET',
        dataType: 'jsonp',
        url: "http://www.myapp.com/users",
        success: function(data) {
            // populate a list
        }
    }); 
```

# javascript - 导航视图上的 Sencha Touch 2 动态按钮

> ID：12557610
> 
> 赞同：1
> 
> 时间：2012-09-24T00:54:47.920
> 
> 标签：javascript, model-view-controller, mobile, sencha-touch-2

我正在尝试从另一个视图动态`initialize()`地`destroy()`在导航视图的栏上设置一个按钮。按钮创建得很好，但我无法删除它......也试过了`hide()`，但它被调用了两次并且没有帮助。所以我正式卡住了，请帮忙！:-)

**我的控制器：**

```
Ext.define('MyApp.controller.Application', {
    extend: 'Ext.app.Controller',

    config: {
        refs: {
            buttonNew1: '#btn-new1',
            buttonNew2: '#btn-new2',
            buttonNew3: '#btn-new3',
            buttonNew4: '#btn-new4',
            buttonDataNew: '#btn-data-new'
        },

        control: {
            buttonNew1: { tap: 'onNewButtonTap' },
            buttonNew2: { tap: 'onNewButtonTap' },
            buttonNew3: { tap: 'onNewButtonTap' },
            buttonNew4: { tap: 'onNewButtonTap' },
            buttonDataNew: { tap: 'onDataNewButtonTap' },
        }
    },

    onNewButtonTap: function(button) {
        console.log(button);
    },

    onDataNewButtonTap: function(button) {
        console.log(button);
    }
}); 
```

**我的导航视图：**

```
Ext.define('MyApp.view.Main', {
    extend: 'Ext.navigation.View',
    xtype: 'view-main',

    config: {
        autoDestroy: false,

        items: [
            {
                xtype: 'container',
                layout : { type: 'vbox', pack: 'top', align: 'middle' },

                items: [
                    {
                        xtype: 'container',
                        layout: 'hbox',

                        items: [
                            {
                                xtype: 'button',
                                id: 'btn-new1',
                                text: 'New1'
                            },
                            {
                                xtype: 'button',
                                id: 'btn-new2',
                                text: 'New2'
                            }
                        ]
                    },
                    {
                        xtype: 'container',
                        layout: 'hbox',

                        items: [
                            {
                                xtype: 'button',
                                id: 'btn-new3',
                                text: 'New3'
                            },
                            {
                                xtype: 'button',
                                id: 'btn-new4',
                                text: 'New4'
                            }
                        ]
                    }
                ]
            }
        ]
    }
}); 
```

**我的数据视图：**

```
Ext.define("MyApp.view.Data", {
    extend: 'Ext.dataview.DataView',
    xtype: 'view-data',

    config: {
        useComponents: true,
        layout: { type: 'fit', align: 'center' },
        defaultType: 'view-data-item',
        store: 'MyStore'
    },

    initialize: function() {
        this.callParent();
        Ext.Viewport.getActiveItem().getNavigationBar().add(Ext.create('Ext.Button', {
            id: 'btn-data-new',
            ui: 'normal',
            iconCls: 'add1',
            align: 'right',
            iconMask: true,
            hideAnimation: Ext.os.is.Android
                ? false : { type: 'fadeOut', duration: 200 },
            showAnimation: Ext.os.is.Android
                ? false : { type: 'fadeIn', duration: 200 }
        }));
    },

    destroy: function() {
        this.callParent();
        var button = Ext.getCmp('btn-data-new');
        if (button) {
            Ext.Viewport.getActiveItem().getNavigationBar().remove(button);
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T02:10:55.200

Well, I figured it out finally... The problem was with `autoDestroy: false` in the Navigation View!

# python - 从python中的子类调用父类构造函数

> ID：12557612
> 
> 赞同：58
> 
> 时间：2012-09-24T00:54:52.273
> 
> 标签：python, inheritance

所以，如果我有一堂课：

```
 class Person(object):
'''A class with several methods that revolve around a person's Name and Age.'''

    def __init__(self, name = 'Jane Doe', year = 2012):
        '''The default constructor for the Person class.'''
        self.n = name
        self.y = year 
```

然后这个子类：

```
 class Instructor(Person):
'''A subclass of the Person class, overloads the constructor with a new parameter.'''
     def __init__(self, name, year, degree):
         Person.__init__(self, name, year) 
```

我有点迷失如何让子类调用和使用父类构造函数`name`和`year`，同时在子类中添加新参数`degree`。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-09-24T01:00:53.617

Python 建议使用`super()`.

蟒蛇2：

```
super(Instructor, self).__init__(name, year) 
```

蟒蛇 3：

```
super().__init__(name, year) 
```

# java - 使用 URL 键/值样式参数的休眠查询限制

> ID：12557613
> 
> 赞同：1
> 
> 时间：2012-09-24T00:55:12.607
> 
> 标签：java, hibernate, tapestry

我正在使用 Tapestry5 和 Hibernate。我正在尝试构建一个使用从 URL 生成的动态限制的条件查询。我的 URL 上下文的设计类似于键/值对。

例子

```
www.mywebsite.com/make/ford/model/focus/year/2009 
```

我解码参数如下

```
private Map<String, String> queryParameters;
private List<Vehicle> vehicles;

    void onActivate(EventContext context) {
            //Count is 6 - make/ford/model/focus/year/2009
            int count = context.getCount();

            if (count > 0) {
                int i;
                for (i = 0; (i + 1) < count; i += 2) {
                    String name = context.get(String.class, i);
                    String value = context.get(String.class, i + 1);

                    example "make"
                    System.out.println("name " + name);

                    example "ford"
                    System.out.println("value " + value);

                    this.queryParameters.put(name, value);
                }
            }  

            this.vehicles = this.session.createCriteria(Vehicle.class)
...add dynamic restrictions. 
        } 
```

我希望有人可以帮助我弄清楚如何将限制列表动态添加到我的查询中。我确信这已经完成，所以如果有人知道一个帖子，那也会有帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T02:14:32.910

就像另一个答案所说的那样，但这里更详细地说明了。我认为您问题的症结确实是“告诉我如何添加限制”。无论如何，这就是我的解释。

您需要将每个限制解码为自己的字段。

您需要知道每个字段的 Java 实体属性名称。

然后构建这两个东西的 Map，键是已知的静态 Java 实体属性名称，值是 URL 解码数据（可能带有类型转换）。

```
private Map<String, Object> queryParameters;
private List<Vehicle> vehicles;

void onActivate(EventContext context) {
        //Count is 6 - make/ford/model/focus/year/2009
        int count = context.getCount();

        queryParameters = new HashMap<String,Object>();
        if (count > 0) {
            int i;
            for (i = 0; (i + 1) < count; i += 2) {
                String name = context.get(String.class, i);
                String value = context.get(String.class, i + 1);

                Object sqlValue = value;
                if("foobar".equals(name)) {
                    // sometime you don't want a String type for SQL compasition
                    //  so convert it
                    sqlValue = UtilityClass.doTypeConversionForFoobar(value);
                } else if("search".equals(name) ||
                          "model".equals(name) ||
                          "year".equals(name)) {
                    // no-op this is valid 'name'
                } else if("make".equals(name)) {
                    // this is a suggestion depends on your project conf
                    name = "vehicleMake.name";
                } else {
                    continue;  // ignore values we did not expect
                }
                // FIXME: You should validate all 'name' values 
                // to be valid and/or convert to Java property names here

                System.out.println("name " + name);
                System.out.println("value " + value);

                this.queryParameters.put(name, sqlValue);
            }
        }  

        Criteria crit = this.session.createCriteria(Vehicle.class)
        for(Map.Entry<String,Object> e : this.queryParameters.entrySet()) {
            String n = e.getKey();
            Object v = e.getValue();
            // Sometimes you don't want a direct compare 'Restructions.eq()'
            if("search".equals(n))
                crit.add(Restrictions.like(n, "%" + v + "%"));
            else  // Most of the time you do
                crit.add(Restrictions.eq(n, v));
        }

        this.vehicles = crit.list();  // run query
    } 
```

另请参阅[https://docs.jboss.org/hibernate/orm/3.5/reference/en/html/querycriteria.html](https://docs.jboss.org/hibernate/orm/3.5/reference/en/html/querycriteria.html)

有了上述情况，应该没有 SQL 注入的风险，因为“name”和“n”部分应该 100% 地针对已知的良好列表进行验证。"value" 和 "v" 被正确转义，就像使用 SQL 位置占位符'?'。

E&OE

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T02:47:05.653

另一种选择是通过从名称/值对构建对象来创建示例查询：

```
Vehicle vehicle = new Vehicle();
int count = context.getCount();
int i;
for (i = 0; (i + 1) < count; i += 2) {
  String name = context.get(String.class, i);
  String value = context.get(String.class, i + 1);
  // This will call the setter for the name, passing the value
  // So if name is 'make' and value is 'ford', it will call vehicle.setMake('ford')
  BeantUtils.setProperty(vehicle, name, value);
}

// This is using a Hibernate example query:
vehicles = session.createCriteria(Vehicle.class).add(Example.create(vehicle)).list(); 
```

有关更多信息，请参阅[BeanUtils.setProperty](http://commons.apache.org/beanutils/api/org/apache/commons/beanutils/BeanUtils.html#setProperty%28java.lang.Object,%20java.lang.String,%20java.lang.Object%29)和[示例查询](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html#querycriteria-examples)。

这假设您只允许每个属性一个值，并且查询参数正确映射到属性名称。可能还需要考虑转换问题，但我认为 setProperty 可以处理常见问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T01:49:03.710

我假设您只需遍历参数 Map 并为每对添加一个 Restriction 。

请注意，如果您不小心，这将使您面临 sql 注入攻击。防止这种情况发生的最简单方法是在添加到标准之前根据已知的车辆属性检查密钥。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T21:01:15.687

如果它们是查询参数，则应将它们视为查询参数而不是路径参数。您的 URL 应类似于：

www.mywebsite.com/vehicles?make=ford&model=focus&year=2009

你的代码应该是这样的：

```
public class Vehicles {

@ActivationRequestParameter
private String make;

@ActivationRequestParameter
private String model;

@ActivationRequestParameter
private String year;

@Inject
private Session session;

@OnEvent(EventConstants.ACTIVATE)
void activate() {
    Criteria criteria = session.createCriteria(Vehicle.class);

    if (make != null) criteria.add(Restrictions.eq("make", make));
    if (model != null) criteria.add(Restrictions.eq("model", model));
    if (year != null) criteria.add(Restrictions.eq("year", year));

    vehicles = criteria.list();
} 
```

}

假设您使用 Grid 组件来显示车辆，我强烈建议您使用 HibernateGridDataSource 而不是在“激活”事件处理程序中进行查询。

```
public class Vehicles {

    @ActivationRequestParameter
    private String make;

    @ActivationRequestParameter
    private String model;

    @ActivationRequestParameter
    private String year;

    @Inject
    private Session session;

    @OnEvent(EventConstants.ACTIVATE)
    void activate() {
    }

    public GridDataSource getVehicles() {
        return new HibernateGridDataSource(session, Vehicles.class) {
            @Override
            protected void applyAdditionalConstraints(Criteria criteria) {
                if (make != null) criteria.add(Restrictions.eq("make", make));
                if (model != null) criteria.add(Restrictions.eq("model", model));
                if (year != null) criteria.add(Restrictions.eq("year", year));
            }
        };
    }
} 
```

# asp.net-mvc - 在同一模式对话框中验证表单帖子

> ID：12557616
> 
> 赞同：3
> 
> 时间：2012-09-24T00:56:07.753
> 
> 标签：asp.net-mvc, dialog, validation

我已经用 mvc forms 和 jquery 试验了几天，发现了一些有趣的结果。

我有一个在视图中上传文件的表单。提交表单后，我使用模型验证来确保文件不为空，它是允许的类型等。如果模型验证失败，我可以将模型返回到视图（同一视图），并显示错误在验证摘要中非常好。这是我的代码：

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

   @using (Html.BeginForm("TestView", "TestController", FormMethod.Post, new { enctype = "multipart/form-data",  @id = "ImportFile"}))
    {    @Html.ValidationSummary(false, "")

        <span id="instructions">Select a File to Import:</span><br />           
        @Html.TextBoxFor(model => Model.UploadedFile, new { style = "width:275px;", type = "file", @id = "UploadedFile", @name = "UploadedFile" })
                @Html.ValidationMessageFor(model => Model.UploadedFile)
        <span style="font-size: 8pt">@Html.CheckBoxFor(model => Model.HeadersIncluded)
            First Column Includes Headers?</span>
        <p style="margin-bottom: 7px;">
            <input type="submit" name="launchbutton" value="Continue" class="InnerButton"/></p>
    } 
<div id="UploadPartial"></div> 
```

和我的控制器方法：

```
 [AcceptVerbs("GET")]
    public ActionResult TestView()
    {
        TestViewModel testModel = new TestViewModel();
        testModel.HeadersIncluded = true;
        return View(testModel);
    }

    [AcceptVerbs("POST")]
    public ActionResult TestView(TestViewModel model)
    {
        if (!ModelState.IsValid)
        {
             return View(model);
       }
        else
        {
             return View(model);
        }
    } 
```

这样，一切都很好，如果模型有效，或者原始表单不受干扰（验证错误除外），我已经能够使用 jquery 帖子将部分视图加载到同一页面，例如这个：

```
$(document).ready(function () {
    $('#UploadPartial').load('@Url.Content("~/TestController/TestView2")', function() {
    }); 
```

换句话说，如果模型是有效的，加载另一个额外的局部视图。

那么我想知道，我可以在模态对话框中执行此操作吗？换句话说，我可以在模态对话框中打开表单，提交它，执行模型验证，然后将结果返回到模态对话框。. .

发生的情况是，当模型被验证时，结果会被发送回一个空白页面。没有布局，没有脚本文件，只有一个包含表单的空白页面（如果存在验证错误）。我尝试返回 View、PartialView、修改视图布局、添加必要的脚本文件等。我使用相同的表单代码（但在对话框中），提交后，我可以看到模型验证确实发生了，如果模型验证成功与否，我只想将相同的 View 或 PartialView 返回到同一个对话框，其中包含验证错误或附加信息（在模型中），以便我可以继续下一步（其中将加载另一个视图）。这是我的控制器代码：

```
 [AcceptVerbs("GET")]
    public ActionResult TestView()
    {
        TestViewModel testModel = new TestViewModel();
        testModel.HeadersIncluded = true;
        return PartialView(testModel);
    }

    [AcceptVerbs("POST")]
    public ActionResult TestView(TestViewModel model)
    {
        if (!ModelState.IsValid)
        {
            return PartialView("TestView", model);

        }
        else
        {
             return PartialView(model);
        }
    } 
```

我已经尝试返回 PartialView，View，将 ActionResult 更改为 PartialViewResult，但我无法将现在的 Partial View 返回到表单所在的模式对话框。正在返回 Partial View，但只是返回到一个空白页面没有格式化，而不是我想要的模态对话框。似乎模态对话框消失了，所有的网站都用它格式化。

所以我的问题是，这甚至可能吗？您是否可以在模式对话框中提交表单，并将该表单提交的结果返回到同一对话框（在执行模型验证之后），并且仍然具有站点的格式以及处理进一步 jquery 所需的必要脚本文件.

谢谢，如果您需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T07:39:11.320

我通常在我的对话框 div 中有一个内容 div，并让 jQuery 从部分视图中填充内容 div。

您还可以使用将 UpdateTargetId 设置为内容 div 的 Ajax.BeginForm 助手。

当您的表单位于 jQuery 对话框中时，另一个问题是您必须在通过 Ajax 更新内容后重新触发验证。像 $.validator.unobtrusive.parse("form");

# javascript - 页面退出弹出框

> ID：12557627
> 
> 赞同：5
> 
> 时间：2012-09-24T00:58:05.253
> 
> 标签：javascript, popup

我想要做的是在页面退出或导航离开时制作一个弹出框。现在我有

```
<script type="text/javascript">
function box()
{
    var r=confirm("Message");
    if (r==true)
    {
        window.location.href="yes.html";
    }
    else
    {
        window.location.href="no.html";
    }
}
</script>

<body onunload="box();"> 
```

我有两个问题：

1.  如果您实际离开页面、刷新、新 url 等，它只会显示该框。如果您退出选项卡或浏览器，则不会弹出该框。

2.  无论您按什么按钮，它只会将您发送到您最初尝试去的地方，它永远不会将您发送到`no.html`or `yes.html`。

有人能告诉我这是怎么可能的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T01:02:12.130

尝试这个：

```
<script type="text/javascript">
  window.onbeforeunload = confirmExit;
  function confirmExit()
  {
      setTimeout(function() {
        setTimeout(function() {
           window.location.href="yes.html";
        }, 1000);
    },1);
    return "Message";
  }
</script> 
```

您只能捕获页面上的停留选项，您不能覆盖离开页面的用户。类似于：[如何知道用户是否在 Javascript onbeforeunload 对话框上单击了取消？](https://stackoverflow.com/questions/4650692/way-to-know-if-user-clicked-cancel-on-a-javascript-onbeforeunload-dialog)

# java - 错误：无法加载或找到主类语言

> ID：12557629
> 
> 赞同：0
> 
> 时间：2012-09-24T00:58:28.670
> 
> 标签：java, nlp, mallet

我是 Mallet 的新手

我已经在我的电脑上安装了 Mallet。我已经正确设置了类路径（我通过打印类路径来验证它）

我想执行以下命令 mallet import-smvlight file1 file2.mallet

每次我尝试运行命令时，我都会收到一条错误消息“错误：找不到或加载主类语言”

有人可以帮助我吗？我对此深感麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T10:16:55.840

我最近安装了槌。我没有使用 svmlight 的东西，而是简单的版本并输入了命令

```
bin/mallet --import-data filename output op.mallet 
```

最初这个命令给出了错误`Could not load the main class`- 我发现的原因是我安装 mallet 的目录不是`C:/`。我看过一篇文章说需要将槌子安装在`C:/`目录中，所以检查一下。一旦我这样做了，这个错误就没有出现。

问候，

# csv - Groovy 替换所有逗号

> ID：12557637
> 
> 赞同：0
> 
> 时间：2012-09-24T01:00:20.477
> 
> 标签：csv, groovy, replaceall

我遇到了 Groovy 中的 replaceAll 功能的问题。
我正在处理 CSV 解析器分配，我正在尝试用空格替换逗号。我无法弄清楚实际替换它们的语法，因为每次我运行脚本时，返回的数据仍然包含逗号。

```
class ActAsCSV {
    def headers = []
    def contents = []     
    def read() {
        def file = new File('C:/Users/Alex/Desktop/csv.txt')
        def lines = file.readLines()
        headers = lines[0].split(",")

        def last = lines.tail()
        def i = 0
        while (last[i] != null){last[i].replaceAll(/,(?=([^\"]*\"[^\"]*\")*[^\"]*$)/' ')
           println last[i]
           i++}
        }    
}

alex = new ActAsCSV()
alex.read() 
```

CSV 文件如下所示：年份、品牌、型号

```
1997,Ford,E350

2000,Mercury,Cougar 
```

headers 数组按预期工作。当前代码之后的输出是

```
1997,Ford,E350
2000,Mercury,Cougar 
```

我试过了

","

'，'

/','/

/,/

以及我在网上找到的各种正则表达式模式。从字面上看，没有任何效果。我不知道我错过了什么，我认为 replaceAll 不会那么难。我查看了文档，但不确定如何应用字符串、闭包组合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T01:23:21.993

请注意，该`replaceAll()`方法返回结果字符串，而上面的代码错误地假设 last[i] 正在被修改。

也就是说，请考虑以下代码片段：

```
String tmp = last[i].replaceAll(/,/,' ')
println tmp 
```

这会有所帮助。

# objective-c - 如何使用 NSError 初始化、传递参数和检查错误条件**

> ID：12557638
> 
> 赞同：1
> 
> 时间：2012-09-24T01:00:23.097
> 
> 标签：objective-c, xcode, exception, nserror

`Xcode 4.3`

我已经阅读了关于 NSError** 的 SO 问题，所以我编写了一个简单的测试程序，它使用了 Xcode 4.3 推荐的稍微不同的语法（见`__autoreleasing`下文），所以我不能 100% 确定这是否正确，尽管代码似乎运行正常。无论如何，只是一个简单的文件阅读器，如果找不到文件，则会打印错误。

**问题**

想知道 NSError 初始化、参数传递 using`&`和错误条件检查是否正确。此外，在该方法中，我注意到and`readFileAndSplit..`之间存在很大差异，实际上，当没有引发错误条件时，它不起作用。`if(!*error)``if(!error)``if(!error)`

**带有可能错误条件的文件读取方法**

```
 -(NSArray*) readFileAndSplitLinesIntoArray:(NSError *__autoreleasing *) error {
    NSString* rawFileContents =
          [NSString stringWithContentsOfFile:@"props.txt"
                                    encoding:NSUTF8StringEncoding    
                                       error:error
    NSArray* fileContentsAsArray = nil;  
    if(!*error)
          fileContentsAsArray = 
                [rawFileContents componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]];

    return fileContentsAsArray; 
```

**呼叫者**

```
SimpleFileReader* reader = ...
NSError* fileError = nil;
NSArray* array = [reader readFileAndSplitLinesIntoArray: &fileError];

if(fileError){
  NSLog(@"Error was : %@, with code: %li", 
       [fileError localizedDescription],(long)[fileError code]);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T02:54:23.060

有几个问题。

首先，根据[Apple 的错误处理编程指南](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/ErrorHandlingCocoa/CreateCustomizeNSError/CreateCustomizeNSError.html)，您应该检查方法的返回值以确定方法是否失败，而不是 NSError。如果方法失败，您只使用 NSError 来获取额外的错误信息。

例如：

```
NSArray* fileContentsAsArray = nil;
NSString* rawFileContents = [NSString stringWithContentsOfFile:@"props.txt"
                                encoding:NSUTF8StringEncoding    
                                   error:error];
if (rawFileContents)
{
    // Method succeeded
    fileContentsAsArray = [rawFileContents ...];
}

return fileContentsAsArray; // may be nil 
```

其次，NSError out 参数通常是可选的，并且可能为 NULL。但是，如果您将 NULL 错误变量传递给您的方法，它将在这一行崩溃：

```
if (!*error) { 
```

因为您要取消引用 NULL 指针。相反，您必须始终在引用指针之前检查 NULL，如下所示：

```
if (error && *error) 
{
    // Do something with the error info
} 
```

但是，如果您按照上面的说明重写方法，那么您根本不会访问错误变量。

# couchdb - 无法在 CouchDB 中添加设计文档（以“_”开头）

> ID：12557644
> 
> 赞同：3
> 
> 时间：2012-09-24T01:01:38.203
> 
> 标签：couchdb

当我尝试添加设计文档（以“_”开头）时，我收到错误消息“只有保留的文档 ID 可以以下划线开头。” 如何添加设计文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:49:09.163

根据[*权威指南*](http://guide.couchdb.org/editions/1/en/design.html)，这样的设计文档：

```
{
  "_id" : "_design/example",
  "views" : {
    "foo" : {
      "map" : "function(doc){ emit(doc._id, doc._rev)}"
    }
  }
} 
```

可以添加到`basic`使用 curl 命令命名的数据库中，如下所示：

```
curl -X PUT http://127.0.0.1:5984/basic/_design/example --data-binary @mydesign.json 
```

[就个人而言，我发现使用CouchApp](http://couchapp.org/page/index)添加和管理设计文档 要容易得多。*权威指南*的[这一部分](http://guide.couchdb.org/editions/1/en/managing.html)描述了如何安装和使用它。

# python - 在不使用 pytz 的情况下使日期时间有意识或幼稚

> ID：12557651
> 
> 赞同：1
> 
> 时间：2012-09-24T01:02:39.950
> 
> 标签：python, django, datetime

我对 django 的日期时间有一些问题。

```
from datetime import datetime
d = datetime(2000, 1, 1, <what do i put here, nothing works>) 
# making it aware requires a 4th arg according to the docs, but no matter what
# i enter for that arg, it keeps giving me an error that  tzinfo argument 
must be None or of a tzinfo subclass 
```

我在任何地方都找不到可以传递的可能 tzinfo 参数的可用选项……而且网上的所有东西都有 pytz 模块，它不在我的电脑上。如果可能的话，我怎么能在不使用 pytz 的情况下做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T01:16:42.940

没关系，我只是对自己花了这么多时间在这样的事情上感到生气，所以我没有直接思考，用时区的导入替换（tzinfo = timezone.utc）就可以了

# php - 如何回显 div 类？

> ID：12557653
> 
> 赞同：1
> 
> 时间：2012-09-24T01:03:05.023
> 
> 标签：php, class, html, echo

不知道如何做到这一点...林有点 php 菜鸟。我正在尝试回显 div 类 '.header1'

在我的 css 中，我给了 .header1 一个背景图像，我希望它出现，但我没有任何运气，所以我的代码一定是错误的。这里是：

```
echo '<div class="header1">';

.header1 {
background: url(_images/header1.png); 
```

我究竟做错了什么？我在有和没有关闭 div 的情况下都试过了，但都没有奏效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T01:04:36.997

div 标签需要结束标签和**内容**。

如果没有内容，则需要`height`手动`width`定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T01:11:06.180

每当我在 php 中回显 html 时，我都喜欢使用[heredoc 语法](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)

```
$div = <<<DIV
    <div class="header1"></div>
DIV; 
```

对我来说，看起来*好多*了，尤其是当你的字符串变得更复杂时，即引号和东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T01:06:14.340

A. 你`echo`正在工作.. 你可能什么也没看到，因为它是一个 HTML 标签

```
<?php
    echo '<div class="header1">Hello</div>';
?> 
```

B. 你应该尝试并确保你设置了 PHP 的打开标签`<?php`和关闭标签`?>`，如上所示

# c++ - 表达式必须有类类型？

> ID：12557655
> 
> 赞同：1
> 
> 时间：2012-09-24T01:03:13.167
> 
> 标签：c++, class, object, linked-list, nodes

因此，我一直在玩 Nodes，并在尝试对其进行测试时不断遇到此错误。如果我使用括号，我会收到此错误`list.`- “表达式必须具有类类型！”

如果我不使用括号，我会得到这个错误`list`，`insert`并且`display`- “这是无法访问的。”

在 Main() 中声明我的 LList 时会发生这种情况。这是怎么回事，为什么会这样？

**我的司机**

```
#include "LList.h"
#include <iostream>
using namespace std;

int main()
{
    LList<int> list;
    bool test = list.insert(5);
    list.display();

    return 0;
} 
```

**类 LList**

```
#include "Nodes.h"
#ifndef LLIST_H
#define LLIST_H

template<typename TYPE>
class LList
{
    Node<TYPE>* front;
    LList();
    ~LList();
    bool insert(const TYPE& dataIn);
    void display() const;
};

template<typename TYPE>
LList<TYPE>::LList()
{
    front = null;
};

template<typename TYPE>
LList<TYPE>::~LList()
{
    Node<TYPE>* temp;
    while(front)
    {
        temp = front;
        front = fornt -> next;
        delete temp;
    }
};

template<typename TYPE>
bool LList<TYPE>::insert(const TYPE& dataIn)
{
    bool success = false;
    Node<TYPE> pBefore = null;
    Node<TYPE> pAfter = front;

    while(pAfter && PAfter->data < dataIn)
    {
        pBefore = pAfter;
        pAfter = pAfter->next;
    }

    if(Node<TYPE>* store = new Node<TYPE>)
        store->data = dataIn

    return success;
};

template<typename TYPE>
void LList<TYPE>::display() const
{
    TYPE* temp = front;
    while(front && temp->next != null)
    {
        cout << temp->data << endl;
    }
};

#endif 
```

**类节点**

```
#ifndef NODES_H
#define NODES_H

template<typename TYPE>
struct Node
{
    Node<TYPE>* next;
    TYPE data;
    Node();
    Node(TYPE d, Node<TYPE> n);
};
template<typename TYPE>
Node<TYPE>::Node()
{
    data = 0;
    next = null;
};
template<typename TYPE>
Node<TYPE>::Node(TYPE d, Node<TYPE> n)
{
    data = d;
    next = n;
};

#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T01:14:52.127

您的错误是您的类声明的结果：

```
template<typename TYPE>
class LList
{
    Node<TYPE>* front;
    LList();
    ~LList();
    bool insert(const TYPE& dataIn);
    void display() const;
}; 
```

线索在错误“这是无法访问的”中。因为您没有给出任何访问修饰符，所以这个类的所有成员都默认为私有。要解决此问题，您只需标记班级的公共和私人部分：

```
template<typename TYPE>
class LList
{
    public:
        LList();
        ~LList();
        bool insert(const TYPE& dataIn);
        void display() const;

    private:
        Node<TYPE>* front;
}; 
```

通过此更改，您的代码应该可以在变量声明末尾使用或不使用括号`list`。

# ruby-on-rails - 嵌套fields_for表单不显示

> ID：12557660
> 
> 赞同：0
> 
> 时间：2012-09-24T01:04:50.163
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-attributes

我正在使用未显示的嵌套 fields_for，有什么想法吗？我认为我的关系设置正确，但该字段根本没有呈现。

模型摘录

```
class DaysEvent < ActiveRecord::Base
belongs_to :event
belongs_to :location

accepts_nested_attributes_for :event 
```

截断视图

```
<%= form_for(DaysEvent.new, :remote => true, :html => { :class => "form-inline"} ) do       |f| %>

<fieldset>
<%= f.fields_for :event do |event_form| %>   
 <div class="control-group">
  <%= event_form.label :allow_user_to_suggest_dates, :class => 'control-label' %>
  <div class="controls">
    <%= event_form.check_box :allow_user_to_suggest_dates, :class => 'text_field' %>
  </div>
</div>
</fieldset>
<% end %> 
```

# c++ - 为什么允许内联函数操作私有成员变量？

> ID：12557661
> 
> 赞同：8
> 
> 时间：2012-09-24T01:04:56.520
> 
> 标签：c++, inline, private-members

假设我有一个有两个内联函数的类：

```
class Class {
public:
   void numberFunc();
   int getNumber() { return number; }
private:
   int number;
};

inline void Class::numberFunc()
{
   number = 1937;
} 
```

我实例化该类，并调用该类中的两个函数：

```
int main() {
   Class cls;
   cls.numberFunc();
   cout << cls.getNumber() << endl;
   return 0;
} 
```

我知道这两个内联函数仍然是该类的成员，但我也理解内联函数体内的代码只是插入到它被调用的位置。由于该插入，我似乎无法直接访问成员变量`number`，因为据我所知，`main()`编译器中的代码如下所示：

```
main() {
   Class cls;
   cls.number = 1937;
   cout << cls.number << endl;
   return 0;
} 
```

有人可以向我解释为什么我仍然能够访问这些私有成员，或者纠正我对内联函数的理解吗？我知道编译器可以选择忽略`inline`某些函数；这就是这里发生的事情吗？

输出：

> 1937年

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-24T01:22:01.677

The rules for accessing private members of a class are enforced by the compiler on your C++ code. These rules don't apply directly to the output of the compiler, which is the code that a computer exectues.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-24T01:20:06.647

该 `inline`关键字确实意味着程序员认为编译器可能希望在调用位置插入代码。编译器也可以在没有关键字的情况下内联其他函数。编译器可能会认为程序员很傻，会忽略关键字而不是内联。这一切都符合 C++ 标准。

The inline member function is otherwise quite normal member function. No other privileges or restrictions.

Inlines do not cause errors that the function is defined by multiple compilation units (that include the header file where the inline function is defined). That may be one reason why people write inline functions.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-24T01:10:20.610

`private`访问说明符是对类用户（程序员）的限制，而不是对编译器的限制。只要程序的可观察行为相同，编译器就可以为所欲为。

# ruby-on-rails - RESTful 路由中的自定义参数名称，Rails 3

> ID：12557669
> 
> 赞同：0
> 
> 时间：2012-09-24T01:06:42.163
> 
> 标签：ruby-on-rails, routing

> **可能重复：**
> [在 Rails3 的路由资源中更改 :id 参数的名称](https://stackoverflow.com/questions/6592038/change-the-name-of-the-id-parameter-in-routing-resources-for-rails3)

我想知道一种干净优雅的方法来更改由“资源”方法生成的路线中的参数名称。当我检查“rake routes”时，默认情况下我得到这个：

```
edit_user GET    /users/:id/edit(.:format)      users#edit 
```

但我需要：

```
edit_user GET    /users/:kitties_and_puppies/edit(.:format)      users#edit 
```

为了以后能够在控制器中写入

```
params[:kitties_and_puppies] 
```

谢谢你。

# qt - 摆脱 QScrollArea 中不必要的滚动条

> ID：12557670
> 
> 赞同：4
> 
> 时间：2012-09-24T01:06:43.920
> 
> 标签：qt, qscrollarea

我正在处理配置 QDialog。它有几个类别（常规、外观等），当用户单击它们时会加载它们。每个类别都有自己的页面。这些页面本身就是独立的类（每个都有自己的 ui、cpp 和 h）。当 Preferences 窗口加载时，页面被实例化并被加载到 QStackedWidget 中。然后将 Stackedwidget 放置到 QScrollArea 中，以便在必要时可以滚动。

但是，有一个问题。自从我添加了 QStackedWidget 后，即使当前页面短到不需要一个，QScrollArea 也*总是有一个垂直滚动条：（图片为最短页面）*

![配置滚动条问题](../Images/9519a68409a5a17624493c2207686821.png)

ScrollArea 垂直滚动策略设置为 Qt::ScrollBarAsNeeded 因此逻辑上它应该只在页面大于可视区域时显示一个栏。

这是我已经尝试解决的问题：

1.  将滚动策略设置为 Qt::ScrollBarAlwaysOff。虽然这摆脱了滚动条，但这是不可接受的，因为它不会让用户知道他们需要在长页面上滚动。

2.  设置 QStackedwidget 的最小/最大高度。如果我将其设置为足够低的值，这会使滚动条消失，但这是不可接受的，因为它会导致某些小部件具有压扁的外观。

我知道问题与 QStackedWidget 有关，但由于这是我第一次使用 QStackedWidget，所以我不确定它是什么。我还注意到滚动总是相同的数量。即，无论页面小部件有多大/多小，可滚动区域的大小始终相同。由于某种原因，它比最长的页面略大。起初我认为我在每页底部放置的用于收紧布局的垂直间隔是造成这种情况的原因，但将它们取出并没有解决它。

更新：这是控制 Stackedwidget 的代码：

```
void Newconfig::on_Categories_currentItemChanged(QTreeWidgetItem *current)
{

    QModelIndex index=ui->Categories->currentIndex();
    int idx=index.row();

    QString category=current->text(0);

    this->setWindowTitle("Preferences -- " + category);

    if (stack->currentWidget() != 0) {
        stack->currentWidget()->setSizePolicy(QSizePolicy::Ignored,
                                                    QSizePolicy::Ignored);
    }
    stack->setCurrentIndex(idx);
    stack->currentWidget()->setSizePolicy(QSizePolicy::Expanding,
                                                QSizePolicy::Expanding);
    adjustSize();

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T03:55:34.813

采用`QStackedWidget`添加到其中的最大小部件的大小。在您的情况下，您的首选项对话框中最大的页面会影响 的大小，`QStackedWidget`因此即使看起来没有必要，也会强制滚动区域显示其滚动条。

为了解决这个问题，您可以创建一个在您更改当前小部件之前触发的插槽，该小部件`QStackedWidget`设置您要离开的页面`QSizePolicy::Ignored`的大小策略以及您将要显示的页面的大小策略为您想要的任何内容对于那个页面——`QSizePolicy::Expanding`例如。[本页](http://qt-project.org/faq/answer/how_can_i_get_a_qstackedwidget_to_automatically_switch_size_depending_on_th)详细介绍了这种技术的一个示例。示例中有很多代码，但重要的部分在这里：

```
void changeCurrent(int idx)
{
    if (stackWidget->currentWidget() !=0) {
        stackWidget->currentWidget()->setSizePolicy(QSizePolicy::Ignored,
                                                    QSizePolicy::Ignored);
    }
    stackWidget->setCurrentIndex(idx);
    stackWidget->currentWidget()->setSizePolicy(QSizePolicy::Expanding,
                                                QSizePolicy::Expanding);
    adjustSize();
} 
```

调用此函数来更改`QStackedWidget`. 它导致刚刚被查看的页面具有对整体大小没有影响的大小策略，`QStackedWidget`并且将要查看的页面具有重要的大小策略。

# unit-testing - 在单独的进程中运行 PHPUnit 测试

> ID：12557676
> 
> 赞同：1
> 
> 时间：2012-09-24T01:08:14.067
> 
> 标签：unit-testing, phpunit, zend-studio, zend-debugger

我正在开发一个 AOP 框架，因此我需要重新声明一些环境变量并重新包含由框架在每次测试中重新编译的文件。我正在尝试在单独的进程中运行每个测试，以便可以执行此操作，但我不确定如何在 Zend Studio 中执行此操作。

我已将`@runTestsInSeparateProcesses`注释添加到我的测试中，但这会导致测试失败并显示错误消息：

```
testName: [Zend Debugger] Cannot receive start command 
```

有没有人能够解决这个错误或找到另一种方法在 Zend 的单独进程中运行每个测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T06:12:40.977

Zend 调试器对 phpunit 来说不是很热。如果可能，请改用 xdebug。

# matlab - 如何连接两个不同matlab文件的所有变量？

> ID：12557680
> 
> 赞同：0
> 
> 时间：2012-09-24T01:08:59.157
> 
> 标签：matlab, concatenation

我有两个具有相同变量列表的 mat 文件。

在 file1.mat

```
*Variables*       *Value*       *Type*       

Time              [100X1]       double

Force             [100x1]       double 
```

在 file2.mat

```
*Variables*      *Value*       *Type*       

Time_1           [90X1]        double

Force_1          [90x1]        double 
```

我想垂直连接这两个文件。`_1`添加到 file2的后缀更改为`_2`or`_32`等​​。

如何引用变量并将它们连接在一个循环中，这样我就不必每次都打开文件并在其中输入变量名`vertcat`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T02:48:02.227

`load`您可以为此任务使用该命令的两个不错的属性。首先，`load`使用输出参数创建一个字段名称等于变量名称的结构，这意味着您可以加载数据而无需提前知道变量的名称。其次，字段按字母顺序分配，这意味着`force`始终是第一个字段和`time`第二个字段。

结合这些属性，您可以执行以下操作：

```
%# get a listing of all save files
fileList = dir('file*');
nFiles = length(fileList);

loadedData = cell(nFiles,2); %# for storing {force,time}

%# loop through files and write results into loadedData
for iFile = 1:nFiles
    tmp = load(fileList{iFile});
    loadedData(iFile,:) = struct2cell(tmp)';
end

%# catenate
time = cat(1,loadedData(:,2));
force = cat(1,loadedData(:,1)); 
```

Note that if your files are called `file1`...`file10`, instead of `file001`...`file010`, the alphabetical ordering you get from using the `dir` command may not be ideal. In that case, you may have to extract the number at the end of the file name and re-order the list.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T01:47:46.020

以下代码片段是否有助于解决您的问题？

```
Time_1 = [1; 2];
Time_2 = [2; 3];
Time_3 = 4;
All = [];
for i = 1:3
    CurTime = eval(horzcat('Time_', num2str(i)));
    All = [All; CurTime];
end 
```

基本上正在发生的事情是我循环遍历`Time_1`,`Time_2`和`Time_3`. 对于每次迭代，我`Time_x`通过在字符串中手动构建变量的名称来获取相关变量，然后将其分配给`CurTime`使用`eval`函数。然后只需使用执行所需的连接`CurTime`

当然，这段代码效率不是很高，因为`All`它在循环中增长。如果你`All`事先知道它的大小，那么你可以预先分配它。如果实际大小未知，您可以在[此处](https://stackoverflow.com/questions/1548116/matrix-of-unknown-length-in-matlab)实现解决方案（或者只是将其预先分配为任意大，然后在循环完成后将其缩减为大小）。

如果我误解了您遇到的问题，请告诉我，我会尝试提出更有帮助的建议。

此外，有些人认为`eval`是邪恶的。当然，如果您的代码包含 10 个不同的调用，`eval`那么您可能做错了。

# javascript - 动态调整 Flotr2 图表的大小

> ID：12557681
> 
> 赞同：0
> 
> 时间：2012-09-24T01:09:11.510
> 
> 标签：javascript, html, charts, resize, flotr

有没有一种好方法可以在渲染后调整 Flotr2 图表的大小？我现在唯一知道的方法就是重绘它。如果发现如果我只是改变画布的大小，图表就会消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T18:16:02.143

也许你可以试试这个插件：

jquery.flot.resize.js

[Flotr 调整大小示例](http://www.flotcharts.org/flot/examples/resize/)

# android - 阻止活动退出

> ID：12557682
> 
> 赞同：1
> 
> 时间：2012-09-24T01:09:21.883
> 
> 标签：android

我想知道如果用户按下后退和主页按钮，如何防止活动退出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T01:13:19.420

覆盖这些按钮是一个危险/坏主意，因此，如果没有用户确认，主页按钮无法真正永久覆盖。请参阅此讨论：[覆盖主页按钮 - 我如何摆脱选择？](https://stackoverflow.com/questions/2079691/overriding-the-home-button-how-do-i-get-rid-of-the-choice)

后退按钮更简单一些，只需覆盖 onBackPressed：

```
@Override
public void onBackPressed() {
//do nothing
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T02:55:09.320

您可以使用：

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event)  {
        if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
            // don't write anything here to make back button not work
            return true;
        }

        return super.onKeyDown(keyCode, event);
    } 
```

或者您可以使用`onBackPressed()`旧版本不支持此功能。

```
@Override
public void onBackPressed() {
// don't write anything here to make back button  not work
} 
```

# jquery - Windows 8 应用程序中的 jQuery 日期选择器

> ID：12557683
> 
> 赞同：-1
> 
> 时间：2012-09-24T01:09:38.257
> 
> 标签：jquery, windows-8, visual-studio-2012

我在我的 Windows 8 应用程序中使用以下日期选择器代码：

```
<head>
    <script type="text/javascript" src="/js/jquery.js"></script>
    <script type="text/javascript" src="/js/jquery.min.js"></script>
</head>

<body>
<form>
<input id="date" type="textbox"/>
</form>

<script type="text/javascript">
    $(document).ready(function(){
            $("#date").datepicker({ showOn: 'button', buttonImageOnly: true, buttonImage: 'images/icon_cal.png' });
    });
</script> 
```

这段代码在我们的浏览器中工作得很好，但是当我在 Win8 应用程序的 VS 代码中使用相同的代码时，它崩溃并给出错误：

```
Unhandled exception at line 74, column 26 in ms-appx://28644916-f22c-432f-a4f7-1b6441506d79/default.html

0x800a01b6 - JavaScript runtime error: Object doesn't support property or method 'datepicker' 
```

第 74 行：

$("#date").datepicker({ showOn: 'button', buttonImageOnly: true, buttonImage: 'images/icon_cal.png' });

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T01:44:16.520

这个想法是使用一个我没有使用过的简单的 jQuery UI 库。感谢@Hallie 指出。我不知道这件事。

# javascript - 实现 AJAX GET 和自定义事件的 javascript 对象的语法

> ID：12557684
> 
> 赞同：1
> 
> 时间：2012-09-24T01:10:10.480
> 
> 标签：javascript, jquery, ajax

[关于这个改编自我在这里](http://docs.kendoui.com/howto/load-templates-external-files)找到的教程的小片段，我有几个问题。

```
var loader = (function ($, host) {
    return {
        loadTemplate: function (path) {
            var tmplLoader = $.get(path)
                    .success(function (result) {
                        $("body").append(result);
                    })
                    .error(function (result) {
                        alert("Error Loading Template");
                    }) // --> (1) SEMICOLON?

            // (2) How does this wire up an event to the previous 
            // jQuery AJAX GET?  Didn't it already happen?
            tmplLoader.complete(function () {
                $(host).trigger("TemplateLoaded", [path]);
            });
        }
    };
})(jQuery, document); 
```

1.  那里应该有分号吗？
2.  似乎 AJAX GET 正在发生，*然后*一个事件被连接到它 - 我在这里错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T01:15:04.187

> 那里应该有分号吗？

它是可选的，但建议使用。

> 似乎 AJAX GET 正在发生，然后一个事件被连接到它 - 我在这里错过了什么？

AJAX 是异步的，因此请求在发送后不太可能已经完成。因此，有时间添加另一个回调。即使没有，它仍然可以工作，因为 jQuery 使用[promises](http://api.jquery.com/category/deferred-object/)实现了这些回调。请参见[此处的示例](http://jsfiddle.net/39NSm/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T01:33:52.713

对于 javascript，尤其是 ajax，了解浏览器如何执行您的代码非常重要。当您通过 ajax GET 请求远程数据时，其余代码仍在执行中。想象一下，如果您向繁忙的服务器发出一些 JSON 请求，假设它需要几秒钟，并且您页面上的所有内容在此期间都停止工作。编写与用户交互并不困难的代码将是非常困难的。幸运的是，ajax 是异步的，这意味着它会像往常一样发出请求并继续执行，直到触发完整事件（或等效事件）。这就是执行与您刚刚收到的数据相关的代码的原因。因此，当您在代码段底部指定回调时，您是在告诉浏览器，“现在就去做您的事情，但是当您收到服务器的回复时，

哦，是的，分号是可选的，但作为最佳实践，大多数人都使用它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T01:37:01.993

他们将 $.get 分配给一个变量，然后向它添加一个完整的处理程序。

这和这样做是一样的：

```
$.get('/path'), function(){
  //success callback
}).error(function(e){
  //errors
}).complete(function(){
  //always run
}); 
```

只是一种不寻常的方式。

# iphone - 数据 NSManagedObject 上的 valueForKey 未释放内存

> ID：12557687
> 
> 赞同：2
> 
> 时间：2012-09-24T01:10:21.077
> 
> 标签：iphone, objective-c, ios, core-data, memory-management

我想处理在商店中的`originalImage`每个实体中命名的数据属性。`Media`

问题是，尽管自动释放，但每次通过 访问它时都会积累内存`valueForKey`，最终应用程序崩溃。或者它可能正在加载大型单个 NSData 项目，这是问题所在，但 Instruments 显示它是内存使用情况的稳定倾斜图，直到它最终给我一个内存警告然后崩溃。

我还没有开始编写其余的代码，所以我没有执行一些我没有向你展示的隐藏任务。

```
 NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Media"
                                                      inManagedObjectContext:[self managedObjectContext]];
    [request setEntity:entity];
    [request setFetchBatchSize:10];
    NSArray *mediaItems = [[self managedObjectContext] executeFetchRequest:request error:nil];

    for (NSManagedObject *media in mediaItems) {

        @autoreleasepool {

            [media valueForKey:@"originalImage"];

        }

    } 
```

编辑：今天看来，即使只是提到 NSManagedObject 媒体就足以导致这种媒体泄漏。所以即使没有 valueForKey 行，我也有泄漏。我试过这个：

```
 while (i < count) {
        @autoreleasepool {
        NSManagedObject *media = [mediaItems objectAtIndex:i];

            [[self managedObjectContext] refreshObject:media mergeChanges:NO];

        NSLog(@"i: %i", i);
        i++;
        }
    } 
```

这也不起作用，并在同一点崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:23:41.120

您是否尝试过类似的方法：

```
for(int i=0;i<[mediaItems count]; i++) {
    @autoreleasepool {
        NSManagedObject *media = [mediaItems objectAtIndex:i];
        [media valueForKey:@"originalImage"];
    }
} 
```

也许这种方式“媒体”在每个循环中都会正确发布。

（对不起，我把这个放在评论上。我是新来的，没有足够的代表。）

# iphone - armv7 和 xcode 4.5

> ID：12557691
> 
> 赞同：0
> 
> 时间：2012-09-24T01:10:49.807
> 
> 标签：iphone, xcode, ipad, armv7

我刚刚使用 xcode 4.5 将我的应用程序发送到 iTunes 该应用程序与 iphone 3.5 屏幕和 4 屏幕兼容。和 iPad。当我转到二进制详细信息时，它说：

支持的架构：armv7

这是什么意思？我的应用程序会与所有 iPhone 兼容吗？因为它应该适用于任何 iphone 型号或 ipad 型号。如果不是，我怎样才能使它与所有设备兼容（添加其他架构？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T01:37:35.333

假设它们符合您的部署目标操作系统版本，您的应用程序将在 3GS 及更高版本的设备上运行。要在早期设备上运行，您还需要为 ARM v6 构建，我不确定您是否可以在 Xcode 4.5 中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:10:07.347

XCode 4.5.x 仅支持 armv7 架构：

**ios 6 的 Xcode 4.5.x 更改**

1.  Xcode 4.5.x（及更高版本）不**支持**生成 armv6 二进制文件。
2.  现在包括**iPhone 5/armv7s**支持。
3.  Xcode 4.5.x 或更高版本支持的最低部署目标是**iOS 4.3**。
4.  对 iPhone 的最低支持是**iPhone 3GS**或更高版本，因为早期版本使用 armv6。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-13T10:59:43.860

有趣的问题，为了避免打开另一个类似的问题，如果我使用 armv6、armv7 架构、iOS6 sdk、xCode 4.5 和部署目标 4.3 构建我的应用程序以提交会发生什么？

我目前在架构下有 armv6、armv7 构建设置。[截屏](http://cloud.takeitsimple.com/image/033J1a423738)

通过这些设置，我可以成功地构建我的应用程序并将其安装到 iPhone4、iPad3 设备并存档以进行 Ad-hoc 分发，而无需任何关于 armv6 的警告。

斯特凡诺

# java - 将 JSON 数据转换为一组 Java 对象

> ID：12557695
> 
> 赞同：2
> 
> 时间：2012-09-24T01:11:15.940
> 
> 标签：java, json

当给定 JSON 数据时，是否有一种工具可以在 Java 中生成 JSON 对象？此工具将假定是“流行” JSON 库之一，或者让您指定要使用的 JSON 库。例如使用有效的 JSON 数据

```
{
    "age":100,
    "name":"mkyong.com",
    "messages":["msg 1","msg 2","msg 3"]
} 
```

当使用“ `org.json.simple.*`”时，该工具会生成类似这样的东西

```
JSONObject obj = new JSONObject();
obj.put("name", "mkyong.com");
obj.put("age", new Integer(100));

JSONArray list = new JSONArray();
list.add("msg 1");
list.add("msg 2");
list.add("msg 3");

obj.put("messages", list); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T01:22:44.827

使用 Jackson，就像使用[`ObjectMapper`](http://jackson.codehaus.org/1.7.9/javadoc/org/codehaus/jackson/map/ObjectMapper.html)并创建 POJO 来表示您的 JSON 对象一样简单：

```
public class Person {
  private int age;
  private String name;
  private List<String> messages;

  // getters/setters
} 
```

接着：

```
String json = "{\"age\":100,\"name\":\"mkyong.com\",\"messages\":[\"msg 1\",\"msg 2\",\"msg 3\"]}";
ObjectMapper mapper = new ObjectMapper();
Person person = mapper.readValue(json.getBytes(), Person.class);
System.out.println(person.getMessages()); // [msg 1, msg 2, msg 3] 
```

要执行相反的操作，请使用`writeValue`：

```
Person person = new Person();
person.setAge(100);
// ...
mapper.writeValue(..., person); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T01:14:45.720

[Jackson](http://jackson.codehaus.org/)是一个流行的框架，用于在 JSON 和 Java POJO 之间进行转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T11:07:17.903

[FlexJson](http://flexjson.sourceforge.net/)也是一个很好的库，类似于我尝试过的 jackson。

您还可以尝试其他选项，例如[Gson](http://code.google.com/p/google-gson/)、[FastJson](http://code.alibabatech.com/jira/browse/FASTJSON)和[json-lib](http://json-lib.sourceforge.net/)。

请分享你喜欢哪一个以及为什么。

# r - 使用 TTR 包计算指数移动平均线

> ID：12557697
> 
> 赞同：6
> 
> 时间：2012-09-24T01:11:33.557
> 
> 标签：r, computation

好奇有没有人用过。我对时间序列做了一个简单的 EMA 操作。但是没能很好的调和。

我读到更新常数的值 = 2/(N+1)。我定义`x = 1:20`了，并且做了`EMA(x,5`）。然后我使用递归计算进行了 EMA 计算。这两个结果并没有真正对齐

函数返回

```
EMA(x,5)
 [1] NA NA NA NA  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 
```

而我的小东西给了我，

```
EMA
 [1]  1.000000  1.333333  1.888889  2.592593  3.395062  4.263374  5.175583  6.117055  7.078037  8.052025  9.034683 10.023122 11.015415 12.010276 13.006851 14.004567
[17] 15.003045 16.002030 17.001353 18.000902 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T04:31:12.990

要获得您正在寻找的答案，您需要编写

```
TTR::EMA(1:20, n=1,  ratio=2/(5+1))

 [1]  1.000000  1.333333  1.888889  2.592593  3.395062  4.263374  5.175583
 [8]  6.117055  7.078037  8.052025  9.034683 10.023122 11.015415 12.010276
[15] 13.006851 14.004567 15.003045 16.002030 17.001353 18.000902 
```

如果你调用`TTR::EMA(1:20, n=5)`它就相当于调用

```
TTR::EMA(1:20, n=5, ratio=2/(5+1)) 
```

这会将 NA 放在前 4 位，然后第 5 位将是前 5 个条目的简单平均值。（即在这种情况下为 3）。然后 EMA 算法将启动。第 6 名将是 6 * 2 / 6 + 3 * 4 / 6 = 4。第 7 名将是 7 * 2 / 6 + 4 * 4 / 6 = 5。等等...

[你可以在这里](https://r-forge.r-project.org/scm/viewvc.php/pkg/src/moving_averages.c?view=markup&revision=122&root=ttr)看到确切的算法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T03:49:37.350

`TTR::EMA`计算第一个非缺失值作为第一个`n`变量的算术平均值，然后开始递归计算。`n=1`您可以通过设置和来匹配您的计算`ratio=1/3`。

```
R> EMA(x,n=1,ratio=1/3)
 [1]  1.000000  1.333333  1.888889  2.592593  3.395062  4.263374  5.175583
 [8]  6.117055  7.078037  8.052025  9.034683 10.023122 11.015415 12.010276
[15] 13.006851 14.004567 15.003045 16.002030 17.001353 18.000902 
```

# backbone.js - 模板未加载到 Backbone.js 应用程序中 - 使用 Yeoman 构建

> ID：12557699
> 
> 赞同：2
> 
> 时间：2012-09-24T01:11:45.237
> 
> 标签：backbone.js, yeoman

我在我的视图中使用 .ejs 模板。但由于某种原因，视图不会加载给定的模板。它返回未定义。这是代码：

```
sandplate2.applicationView = Backbone.View.extend({
    el: 'div',

  template: _.template($("appl.ejs").html()),

  initialize: function(){
    console.log("Application view initialize");

    _.bindAll(this, "render");

    this.render();
  },

  render: function(){
    console.log("Application view rendering");
    this.$el.html(this.template());
    return this;
  }
}); 
```

我是否必须配置其他内容才能加载模板？

我使用 Yeoman 构建了我的应用程序。我使用了初始化和主干生成器。

仅供参考 - 我尝试加载的模板使用脚本元素加载到 index.html 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:01:08.947

如果您使用 Yeoman 构建它，请查看 app.js 以了解您是否使用[Backbone.LayoutManager](https://github.com/tbranyen/backbone.layoutmanager)。您可能必须更改那里的配置才能使 EJS 正常工作。默认情况下，我认为它应该期待[Underscore](http://documentcloud.github.com/underscore/#template)模板。

我正在使用[Handlebars](http://handlebarsjs.com/)，我更新了我的 app.js 看起来像这样：

```
Backbone.LayoutManager.configure({
  manage: true,

  paths: {
    layout: "templates/layouts/",
    template: "templates/"
  },

  fetch: function(path) {
    path = path + ".html";

    if (!JST[path]) {
      $.ajax({ url: app.root + path, async: false }).then(function(contents) {
        JST[path] = Handlebars.compile(contents);
      });
    }

    return JST[path];
  }
}); 
```

我还在模块的 define() 调用中添加了 Handlebars，将“Handlebars”作为参考传入。您可能需要为 EJS 做类似的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-26T00:39:11.447

撇开约定不谈，看起来问题只是您的 jQuery 查找。

```
_.template($("appl.ejs")... 
```

`$('appl.ejs')`不是有效的 DOM 选择器，除非您的 index.html 中有这样的元素

```
<appl class="ejs"></appl> 
```

如果您尝试使用 jQuery 来定位您的模板，请给它一个 ID 或 jQuery 可以找到的东西，如下所示：

```
<script type="text/template" id="appl">
    <div></div><!-- template html here -->
</script>

    // later...
    $('#appl').html()
    // will get your template html 
```

但是，正如其他人所提到的，在 yeoman 和 require.js 工作流程中，您可以要求 require.js 以文本形式为您获取模板，并在创建下划线模板之前将其作为变量抛出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T18:38:35.490

请尝试使用yeoman 1.0beta的最新[骨干生成器。](https://github.com/yeoman/generator-backbone)我们对其进行了很多改进，包括[预编译 ejs 模板](https://github.com/yeoman/generator-backbone/pull/20)。您不必担心模板，yeoman 会为您预编译和加载它。

下面提供了一个为输入视图生成的示例代码。

```
Todo.Views.InputView = Backbone.View.extend({

    template: JST['app/scripts/templates/input.ejs'],

    render: function(){
       $(this.el).html(this.template());
    }

}); 
```

# c++ - 是否可以在插件中安装 Chromium 浏览器？

> ID：12557700
> 
> 赞同：0
> 
> 时间：2012-09-24T01:11:55.347
> 
> 标签：c++, plugins, chromium, embedded-browser

我正在尝试将 chromium 浏览器嵌入到我的 C++ 插件中，该插件将在主机应用程序内运行。这是我第一次使用铬，所以请原谅我的无知。

我已经让程序运行到初始化 cef 并且浏览器被实例化而没有断言或问题的地步。但是，浏览器在加载内容时会卡住。我注意到在浏览器的实例化过程中，主机应用程序引发了关于滥用命令行参数的错误。铬是否试图从命令行接收消息？如果是这样，当我的应用程序是插件时如何接收这些消息？

我可以通过使用未知参数（例如“C:/HostApplication.exe -someRandomString”）从命令行调用它来重现主机应用程序的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:48:50.313

“Chrome Frame”与您所描述的非常接近：[https ://developers.google.com/chrome/chrome-frame/](https://developers.google.com/chrome/chrome-frame/)

好消息是，chrome 框架与 Chromium 项目的其余部分一样是开源的，因此请查看源代码：[http ://code.google.com/codesearch#OAMlx_jo-ck/src/chrome_frame/](http://code.google.com/codesearch#OAMlx_jo-ck/src/chrome_frame/)

# javascript - 浮动缩略图库，悬停时有额外的缩略图内容。如何允许悬停的缩略图与邻居重叠？

> ID：12557701
> 
> 赞同：0
> 
> 时间：2012-09-24T01:11:59.437
> 
> 标签：javascript, jquery, css

我有一个缩略图画廊。在每张图片下方，我显示缩略图标题：

```
<div class='gallery'>
  <div class='thumb'>
    <div class='thumbimage'></div>
    <div class='thumbtitle'></div>
  </div>
  <div class='thumb'>
    <div class='thumbimage'></div>
    <div class='thumbtitle'></div>
  </div>
</div> 
```

缩略图在网格中向左浮动：

```
.thumb {
  float: left;
} 
```

缩略图被缩短以适合一行：

```
.thumbtitle {
  line-height: 1.25em;
  min-height: 1.25em;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
} 
```

当用户将鼠标悬停在缩略图上时，缩写的缩略图将替换为完整的缩略图：

```
.thumb:hover .thumbtitle {
  height: auto;
  line-height: 1.25em;
  white-space: normal;
} 
```

如果完整的缩略图不适合一行，则悬停的缩略图框会向下扩展以容纳完整的标题。

这是我的问题：

当悬停的缩略图向下扩展时，下方的缩略图会向右移动以避开它。这不是我想要的行为。我希望扩展的缩略图与下面的缩略图重叠，而不是推开。也就是说，我希望悬停的缩略图框向下扩展而不会导致任何其他缩略图移动。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T01:41:30.427

你可以添加

```
.thumbtitle {
    position:absolute;
} 
```

为了从文档流中删除它们，并且

```
.thumb {
    position:relative;
} 
```

`.thumbtitle`相对于 定位`.thumb`。

这样你也可以添加

```
.thumbtitle {
    max-width:100%; /* or width:100% */
} 
```

最后，添加

```
.thumb:hover .thumbtitle {
    z-index:1;
} 
```

使其与以下元素重叠。

**演示**：http: [//jsfiddle.net/ANvvR/](http://jsfiddle.net/ANvvR/)

# html - 更改下划线颜色

> ID：12557707
> 
> 赞同：32
> 
> 时间：2012-09-24T01:12:53.817
> 
> 标签：html, css, underline

我在这里有这段代码：

```
echo "<u><font color='red'><br>$username</font></u>"; 
```

首先，如您所见，它带有下划线（< u >）。其次，所有文字都是红色的。那么有没有让文本 ($username) 为红色但下划线为黑色？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2014-02-06T09:44:51.887

现在有一个新的 css3 属性：[text-decoration-color](http://www.w3.org/TR/css-text-decor-3/#text-decoration-color-property)

因此，您现在可以使用一种颜色的文本和文本装饰下划线 - 使用不同的颜色...无需额外的“换行”元素

```
p {
  text-decoration: underline;
  -webkit-text-decoration-color: red; /* safari still uses vendor prefix */
  text-decoration-color: red;
}
```

```
<p>black text with red underline in one element - no wrapper elements here!</p>
```

## [密码笔](http://codepen.io/danield770/pen/YZaJrE?editors=1100)

**注意：**

1)[浏览器支持](http://caniuse.com/#feat=text-decoration)目前仅限于 Firefox 和 Chrome（从 V57 开始完全支持）和 Safari

2）您还可以使用如下所示的[text-decoration](https://www.w3.org/TR/css-text-decor-3/#text-decoration)速记属性：

```
<text-decoration-line> || <text-decoration-style> || <text-decoration-color> 
```

...所以使用`text-decoration`速记 - 上面的例子只是：

```
p {
  text-decoration: underline red;
} 
```

```
p {
  text-decoration: underline red;
}
```

```
<p>black text with red underline in one element - no wrapper elements here!</p>
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-03-07T16:48:48.860

作者更新：
**此答案已过时，因为大多数现代浏览器现在都支持[text-decoration-color 。](https://www.w3schools.com/cssref/css3_pr_text-decoration-color.asp "文字装饰颜色")**

* * *

## :伪 + em

为了在**不引入额外 HTML 标记**的情况下准确复制原生的大小、笔画宽度和位置，您应该使用带有单位的 a。这允许准确缩放元素和本机行为，而无需额外的标记。 [`text-decoration:underline`](https://developer.mozilla.org/en-US/docs/Web/CSS/text-decoration) **[`pseudo-element`](https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-elements)[`em`](http://www.w3.org/Style/Examples/007/units.en.html)** 

 **## CSS

```
`a {
  text-decoration: none;
  display: inline-table;
}

a:after {
  content: "";
  border-bottom: 0.1em solid #f00;
  display: table-caption;
  caption-side: bottom;
  position: relative;
  margin-top:-0.15em;
}` 
```

通过使用 display:[`table-caption`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/caption)并[`caption-side`](https://developer.mozilla.org/en-US/docs/Web/CSS/caption-side)在伪元素和 display 上[`inline-table`](https://developer.mozilla.org/en-US/docs/Web/CSS/display)，我们可以强制浏览器准确地垂直对齐线条和链接，即使在缩放时也是如此。

在这种情况下，我们使用 inline-table 而不是 inline-block 来强制显示伪而不需要指定高度或负值。

## 例子

[**JSFIDDLE**：https:](https://jsfiddle.net/pohuski/8yfpjuod/8/)
[**//jsfiddle.net/pohuski/8yfpjuod/8/ CODEPEN**：http://codepen.io/pohuski/pen/vEzxPj | （缩放示例）](http://codepen.io/pohuski/pen/vEzxPj)

**成功测试：**
Internet Explorer：
8、9、10、11 Firefox：41、40、39、38、37、36
Chrome：45、44、43、42
Safari：8、7、6.2
Mobile Safari：9.0、8.0
Android浏览器：4.4、2.3
海豚手机：8、11.4

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-09-24T01:14:20.693

不，你能做的最好的就是使用`border-bottom`不同颜色的 a，但这并不是*真正*的下划线。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-09-24T04:17:37.373

在实践中，如果您使用`span`element 而不是`font`：

```
<style>
u { color: black; }
.red { color: red }
</style>
<u><span class='red'><br>$username</span></u> 
```

见[jsfiddle](http://jsfiddle.net/yucca42/VHRzU/)。似乎适用于 Chrome、Safari、Firefox、IE、Opera（在最新版本的 Win 7 上测试）。

问题中的代码也应该可以工作，但由于某种原因它在 WebKit 浏览器（Chrome、Safari）上不起作用。

根据[CSS 规范](http://www.w3.org/TR/CSS2/text.html#propdef-text-decoration)：“文本装饰所需的颜色必须源自设置了 'text-decoration' 的元素的 'color' 属性值。即使后代元素具有不同的 'color' 值，装饰的颜色也必须保持不变。”</p>

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-09-24T01:16:35.730

我解决这个问题的最简单方法是使用 CSS：

```
<style>
.redUnderline {
    color: #ff0000;
    border-bottom: 1px solid #000000;
}
</style>
<span class="redUnderline">$username</span> 
```

此外，对于实际的下划线，如果您的项目是链接，则此方法有效：

```
<style>
a.blackUnderline {
   color: #000000;
   text-decoration: underline;
}
.red {
    color: #ff0000;
}
</style>
<a href="" class="blackUnderline"><span class="red">$username</span></a> 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-06-20T19:12:42.100

您还可以使用 box-shadow 属性来模拟下划线。

这是一个[小提琴](http://jsfiddle.net/eMWSQ/1/)。这个想法是使用两个分层的框阴影将线条定位在与下划线相同的位置。

```
a.underline {
    text-decoration: none;
    box-shadow: inset 0 -4px 0 0 rgba(255, 255, 255, 1), inset 0 -5px 0 0 rgba(255, 0, 0, 1);
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-02-22T21:32:40.463

danield 描述的另一种方法是内联显示子容器宽度，以及您想要的笔尖颜色。父元素宽度文本装饰，以及您想要的下划线颜色。像这样：

```
div{text-decoration:underline;color:#ff0000;display:inline-block;width:50px}
div span{color:#000;display:inline}
```

```
<div>
  <span>Hover me, i can have many lines</span>
</div>
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-07-18T00:39:29.683

伪元素效果最好。

```
a, a:hover {
  position: relative;
  text-decoration: none;
}
a:after {
  content: '';
  display: block;
  position: absolute;
  height: 0;
  top:90%;
  left: 0;
  right: 0;
  border-bottom: solid 1px red;
} 
```

见[jsfiddle](http://jsfiddle.net/6YJHM/)。

你不需要任何额外的元素，你可以将它放置在离文本尽可能近或远的地方（边框底部对我来说有点远），如果你的链接结束，则不会显示任何额外的颜色不同颜色的背景（如 box-shadow 技巧），它适用于所有浏览器（text-decoration-color 目前仅支持 Firefox）。

可能的缺点：链接不能是位置：静态的，但这在绝大多数情况下可能不是问题。只需将其设置为相对，一切都很好。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-09-24T01:17:59.017

您可以使用此 CSS 来“模拟”下划线：

```
text-decoration: none;
border-bottom: 1px solid #000; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-07-03T18:12:55.430

我认为最简单的方法是在你的 CSS 中，使用：

```
text-decoration-color: red; 
```

这将更改下划线的颜色，而不会更改文本的颜色。祝你好运！

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-03-13T10:21:26.137

在这里，我们可以在文本中创建带有颜色的下划线

```
<u style="text-decoration-color: red;">The color of the lines should now be red!</u>
```

或者

线条的颜色现在应该是红色的！

```
<h1 style=" text-decoration:underline; text-decoration-color: red;">The color of the lines should now be red!</u>
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-08-23T10:06:22.673

你可以用 a 包装你`<span>`的`<a>`并使用这个小 JQuery 插件来为下划线着色。您可以通过将参数传递给插件来修改颜色。

```
 (function ($) {
        $.fn.useful = function (params) {

            var aCSS = {
                'color' : '#d43',
                'text-decoration' : 'underline'
            };

            $.extend(aCSS, params);

            this.wrap('<a></a>');
            var element = this.closest('a');
            element.css(aCSS);
            return element;
        };
    })(jQuery); 
```

然后你通过写这个来调用：

```
 $("span.name").useful({color:'red'}); 
```

```
$(function () {

        var spanCSS = {
            'color' : '#000',
            'text-decoration': 'none'
        };

        $.fn.useful = function (params) {

            var aCSS = {
                'color' : '#d43',
                'text-decoration' : 'underline'
            };

            $.extend(aCSS, params);
            this.wrap('<a></a>');
            this.closest('a').css(aCSS);
        };

        // Use example:
        $("span.name").css(spanCSS).useful({color:'red'});

    });
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<section class="container">

    <div class="user important">
        <span class="name">Bob</span>
        -
        <span class="location">Bali</span>
    </div>

    <div class="user">
        <span class="name">Dude</span>
        -
        <span class="location">Los Angeles</span>
    </div>

    <div class="user">
        <span class="name">Gérard</span>
        -
        <span class="location">Paris</span>
    </div>

</section>
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-11-28T13:26:00.880

我遇到的最好方法是这样的：

HTML5：

```
<p>Initial Colors <a id="new-color">Different Colors</a></p> 
```

CSS3：

```
p {
    color: #000000;
    text-decoration-line: underline;
    text-decoration-color: #a11015;
}

p #new-color{
    color: #a11015;
    text-decoration-line: underline;
    text-decoration-color: #000000;
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-03-23T15:25:56.290

问题`border-bottom`是文本和行之间的额外距离。问题`text-decoration-color`是缺乏浏览器支持。因此，我的解决方案是使用带有线条的背景图像。这支持线条的任何标记、颜色和样式。`top`（在我的示例中为 12px）取决于`line-height`您的文本。

```
 u {
    text-decoration: none;
    background: transparent url(blackline.png) repeat-x 0px 12px;
} 
```**

# c - C 中的环境变量

> ID：12557712
> 
> 赞同：-1
> 
> 时间：2012-09-24T01:13:27.760
> 
> 标签：c, environment-variables, setenv, getenv

我知道这种类型的问题被问了很多，但似乎没有一个答案有帮助。`setenv()`我在 Ubuntu Linux 中通过函数调用设置了一个环境变量。但是，该程序似乎没有使用此环境变量。如果我使用`getenv()`它会得到正确的值，但程序的输出是错误的。但是，当我`export BLOCKSIZE=512`在 shell 中使用时，程序的输出是正确的。我没有从程序中产生不同的进程。下面只是我正在做的代码片段，它不是我的整个程序。

这有什么原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:35:21.983

这里的问题是 Ubuntu Linux 的默认`BLOCKSIZE`值为`1024`not `512`。因此，在计算`stat`结构中的块（即`st_blocks`字段）时，我收到了与正常情况不同的答案，`ls`因为在`stat`块中仅计算 512 字节块。这意味着我的程序不必考虑环境变量的大小。这里的主要问题是假设 Linux 使用 512 字节的块大小，正如我在教科书中所说的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T03:00:31.200

显示的代码中没有任何内容会受到 BLOCKSIZE 环境变量的影响。

BLOCKSIZE 不会影响任何系统调用。我看不到您在哪里使用 512。诸如`ls`使用相同系统调用从 o/s 获取数据的程序，然后根据环境变量的设置调整它们呈现给您的值。但关键是它是由`ls`用户代码决定的，而不是由内核代码决定的。

由于您的代码没有调用`ls`或任何其他程序，因此不会受到环境变量的影响。

# javascript - 不会在刷新时重置的计时器

> ID：12557716
> 
> 赞同：4
> 
> 时间：2012-09-24T01:14:09.397
> 
> 标签：javascript, jquery, timer

编辑：当我调用 Clock.start() 时如何传递参数以便更改 totalSeconds 的值？

我得到了一个计数器，我将它的值与计时器显示的 ID 连接起来，因为页面上会有多行计时器，但每个用户只会运行一个计时器。我想传递计时器的值，所以我知道我应该获取的计时器在哪一行，然后我将其转换为秒，最后我可以将该值分配给totalSeconds。然后也许我可以按照我想象的每件事的方式来完成这项工作。

我已经在运行的内容：我有一个计时器，除非我刷新，否则它不会显示它正在计数。当页面加载 PHP 查询 mySQL 并使用 TIMEDIFF(now(), time_log) 计算经过的时间，其中 time_log 是计时器启动的时间。

我想添加的内容：我想要做的是使用下面的 js/jquery 片段来获取我的 TIMEDIFF，然后将其用作 totalSeconds，因此 totalSeconds 不会重置并继续从 TIMEDIFF 值开始计数。

```
var Clock = 
{
    totalSeconds: 0,

    start: function () {
        var self = this;

        this.interval = setInterval(function () {
          self.totalSeconds += 1;

          var ctr;
          $(".icon-play").each(function(){
              if( $(this).parent().hasClass('hide') )
                  ctr = ($(this).attr('id')).split('_');
          });

          $("#hour_" + ctr[1]).text(pad(Math.floor(self.totalSeconds/3600)));
          $("#min_" + ctr[1]).text(pad( Math.floor((self.totalSeconds/60)%60) ));
          $("#sec_" + ctr[1]).text(pad(parseInt(self.totalSeconds%60)));
        }, 1000);
    },

    pause: function () {
      clearInterval(this.interval);
      delete this.interval;
    },

    resume: function () {
      if (this.interval) this.start();
    }
}; 
```

对于这个脚本，归功于 Speransky Danil 先生。[如何暂停和恢复计时器？](https://stackoverflow.com/questions/12487352/how-do-i-pause-and-resume-a-timer)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T01:20:24.670

与其记录总秒数，不如记录开始时间并计算从现在到开始计时器的秒数。

此外，您已经将开始时间存储在数据库中，因此您可以在页面加载时从中进行初始化。

如果您只计算秒数，您将失去页面刷新之间的时间。

**编辑：**您可以在 PHP 生成的 HTML 输出中初始化 Clock.totalSeconds。我知道你已经让这个时钟 JS 工作了（上面没有发布标记）。

```
<script type="text/javascript">
var Clock = {}; // your code above
Clock.totalSeconds = <?php echo (int)$seconds; ?>;
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T01:18:56.317

如果您可以定位现代浏览器，请将`totalSeconds`. 你可以读回`localStorage`
`totalSeconds``localStorage`

如果您必须针对较旧的浏览器，那么使用 cookie 来保存值是您的最佳选择。我会设置 cookie 日期，所以它很快就会过期。

# css - 如何在 LESS CSS 嵌套类上指定 html 标签？

> ID：12557718
> 
> 赞同：6
> 
> 时间：2012-09-24T01:14:19.513
> 
> 标签：css, less

我在一个`article`和一个`section`HTML5 标记上使用了一个类。

在家里：

```
<article class="exit">
    <a href="exit.php">
        <figure class="box">
            <img src="assets/img/projects/exit-m.jpg" alt="">
            <figcaption>…&lt;/figcaption>
        </figure>
    </a>
</article> 
```

在项目页面上：

```
<section class="page project exit">
    <div class="corner nw intro">
        <figure class="box">
            <img src="assets/img/projects/exit.jpg" alt="">
            <figcaption>…&lt;/figcaption>
        </figure>
   </div>
   … 
```

每个带有类**出口**的元素内部都有一个`figure`HTML5 元素。有了 Less，我使用这段代码来做我想做的事。

```
article.exit{width:260px; height:200px; top:315px; left:505px;
    figure{background-color:@exit-bg;}
    .box:hover{.perspective-box(se, 10, @exit-shadow);}
}
section.exit{
    .box:hover{.perspective-box(nw, 10, @exit-shadow);}
    .intro figcaption:hover{background:@exit-hover;}
} 
```

但我必须指定它是一个`article`还是一个`section`！我有很多这样的课程，这有点烦人……</p>

有没有办法做这样的事情？会很酷……</p>

```
.exit{
    &article{
        width:260px; height:200px; top:315px; left:505px;
        figure{background-color:@exit-bg;}
        .box:hover{.perspective-box(se, 10, @exit-shadow);}
    }
    &section{
        .box:hover{.perspective-box(nw, 10, @exit-shadow);}
        .intro figcaption:hover{background:@exit-hover;}
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-24T04:01:35.460

`exit`如果这两个规则在课堂上不共享任何共同的样式，我觉得尝试嵌套这两个规则没有多大意义。

也就是说，如果您仍想嵌套它们，请记住在选择器中，元素名称始终位于其他简单选择器之前。尝试在元素名称之后放置`&`，看看它是否有效：

```
.exit{
    article&{
        width:260px; height:200px; top:315px; left:505px;
        figure{background-color:@exit-bg;}
        .box:hover{.perspective-box(se, 10, @exit-shadow);}
    }
    section&{
        .box:hover{.perspective-box(nw, 10, @exit-shadow);}
        .intro figcaption:hover{background:@exit-hover;}
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-19T07:46:00.547

我也有同样的疑问并来到这里，但发现了一个有趣的怪癖可能会有所帮助。我更喜欢根据我在使用 LESS 时编写的 HTML 来嵌套样式。

例如，如果我的 HTML 看起来像这样：

```
<div id="content">
  .....
  <div class="form-container">
    <input type="text" class="form-control"....>
    <textarea class="form-control"></textarea>
    ......
  </diV
</div> 
```

我的样式表看起来像这样：

```
#content{
  .form-container{
     color: red;
     .form-control{
       border: 1px solid black;
     }
  }
} 
```

现在，我想对输入元素和文本区域进行不同的编码。当我查看上面的答案时，我尝试了这个：

```
#content{
  .form-container{
     color: red;
     .form-control{
       border: 1px solid black;
       input&{
         height: 40px;
       }
       textarea&{
         height: 100px;
       }
     }
  }
} 
```

`input&`部分 ( 和)`textarea&`编译为：

```
input#content .form-container .form-control {
  height: 20px;
} 
```

所以这是一个需要牢记的警告。要解决此问题，只需将 .form-control 部分从嵌套部分中提取出来。

# file - 读取文件汇编语言

> ID：12557723
> 
> 赞同：0
> 
> 时间：2012-09-24T01:15:36.497
> 
> 标签：file, assembly, byte

我正在用汇编语言编写这个文件，它读取一个 64,000 字节长的文件。我不想将它存储在 RAM 中，所以我需要让它读取一个字节，操作数据，然后将下一个字节存储在同一地址。

有任何想法吗？

我在 Windows XP 硬件上的 MS-DOS 启动盘上运行（我不知道规格），当我在存储 64,000 的地方运行它时，我收到一个 EMM 错误，告诉我需要重新启动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T06:06:54.497

您可以使用[DOS int 21h 函数 48h 来分配](http://www.ctyme.com/intr/rb-2934.htm)64000 字节的内存。它以 16 字节的倍数分配内存，因此您将 64000/16=4000 传递给`BX`.

从该函数返回时将包含已分配块的段，您必须在访问该块之前`AX`将其加载到段寄存器（`DS`、或）`ES`中。如果将其加载到除 之外的段寄存器中，则需要在访问块的指令前加上段覆盖前缀，如下所示：`FS``GS``DS`

`mov [es:0], al`-- 存储`AL`到块的第一个字节（块的段在 中`ES`）。

使用完分配的内存后，您可以使用[函数 49h](http://www.ctyme.com/intr/rb-2935.htm)释放它。

# wordpress - mamp 到 wordpress 链接问题

> ID：12557729
> 
> 赞同：0
> 
> 时间：2012-09-24T01:16:46.363
> 
> 标签：wordpress

我在本地 MAMP 主机上构建了这个站点。现在我上传了数据库 - 更改了配置 - 在数据库中查找并替换 :8888 为 .com - 上传了 wp-content 并加载了 home.php 页面。万岁！但链接让我出错。我尝试了我能想到的所有类型的链接。我难住了！有任何想法吗 ？

```
<ul>
<li><a href="<?php echo get_template_directory_uri(); ?>/us" class="menu-about">about</a></li>
<li><a href="http://camandbenny.com/resumes" class="menu-resumes">resumes</a></li>
<li><a href="/work.php" class="menu-work">work</a></li>
<li><a href="books" class="menu-books">books</a></li>
<li><a href="<?php echo get_template_directory_uri(); ?>/news.php" class="menu-news">news</a></li>
<li><a href="/contact.php" class="menu-contact">contact</a></li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T01:44:17.123

尝试更新固定链接。设置 -> 永久链接 -> 保存更改

通常 WordPress 没有 .php 扩展名。我看到新闻页面被硬编码为主题内部文件......这里有问题

# opengl - 体绘制：保持交互性

> ID：12557730
> 
> 赞同：0
> 
> 时间：2012-09-24T01:17:05.057
> 
> 标签：opengl, graphics, 3d, volume, volume-rendering

我尝试使用 OpenGL、GLSL 和 C++ 实现 Raycasting 体积渲染。众所周知，它是计算密集型的，并且很难获得良好的交互性，例如移动视点和放大和缩小。我们可以使用自适应方案来修改参数以在交互过程中实现反应性。

我们可以修改的一个参数是图像采样距离：图像平面上相邻光线之间在 x 和 y 方向上的距离。

当我进行光线投射体积渲染时，首先我绘制一个立方体，然后渲染它的背面（出口点）和正面（入口点），然后我可以进行光线投射通道。

我的问题是：如何减少图像采样距离？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T08:16:26.373

> 我的问题是：如何减少图像采样距离？

理想情况下，通过对原始体积数据进行下采样。如果您的采样距离比体素距离更远，您将获得令人讨厌的渲染伪影。作为一般规则，您的采样距离应与沿射线的体素距离完全匹配。

我目前正在编写的应用程序也可以处理高分辨率医学图像。请问你的卷有什么分辨率？您将遇到的主要问题是将卷放入您的 GPU 快速内存中。如果您的数据超过了这些限制，那么 GPU 必须从系统内存中交换数据，这很慢。这很容易在交互式速率和非常慢的幻灯片放映之间产生差异。

# python - “如果”条件产生 html 302

> ID：12557733
> 
> 赞同：0
> 
> 时间：2012-09-24T01:17:46.863
> 
> 标签：python

**更新 0** [此链接](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)描述了 302 代码，但我无法理解技术语言。302 代码出现在模板之后`self.response.out.write(`但从`unexpected.html`不触发模板是否重要？这是我可以使用最多帮助的部分。

```
INFO     2012-09-24 01:15:10,182 dev_appserver.py:2967] "POST /reserve/Rogers/1 HTTP/1.1" 302 - 
```

我担心`self.response.out.write(`必须使用其他代码才能访问，或者我使用条件句的**结构**`unexpected.html`存在缺陷。不过，我不希望任何人阅读我的代码的详细信息。 **更新 0**

 ******更新 1** 一行代码是多余的，在我的实际代码中被注释掉，已被删除。巧合的是，这是一个片面的`if`陈述，使事情更加混乱。 **更新 1**

**更新 2** 我已经使用下面的代码和不同的 a、b、c、d 值，并验证所有分支都按我的预期工作。所以我相信我的代码结构不是问题。我想我需要进一步研究这个`self.response.out.write(`过程。

```
a=3
b=3
c=5
d=6
if c<d:
    print "c<d"
if a<b:
    print "a<b"
elif a==b:
    print "a=b"
else:
    print "not a<=b"
print "not a b" 
```

**更新 2**

此代码有一对嵌套的 for 循环，其中包含 if/elif/elif/elif/else。第一个 if 包含一个 if，而 if 又包含一个 if、一个 if/else 和一个无条件短语。为简洁起见，我省略了几行。

着眼于第 10 行开始的向下`self.response.out.write(`，而两条相似的行也开始向下约 7 行`self.response.out.write(`。这些行都应该将用户发送到一个名为模板的模板`unexpected.html`，建议用户在该模板中按下“确定”按钮以将其发送到某处以修复其输入中的错误。

问题是我收到 302 错误，并且处理继续到此代码下方的代码。

我的条件句有什么问题，还是什么？

```
for courtname in courtnames:
    for time in times:
    if name == hiddenname:
        pass
    elif name != hiddenname and hiddenname == "":
        #check early and late
        if (res-utime)<timedelta(hours=minBefore[1]):
        template_values = {'trans':trans,'location_id':location_id}
        path = os.path.join(TEMPLATE_DIR, 'unexpected.html')
        self.response.out.write(template.render(path, \
            template_values))
        if endtime.endTime<[utime.hour,utime.minute]:
        if (res-utime)>timedelta(days=1+maxBefore[0], \
            hours=maxBefore[1],maxutes=maxBefore[2]):
            template_values = {'trans':trans,'location_id':location_id}
            path = os.path.join(TEMPLATE_DIR, 'unexpected.html')
            self.response.out.write(template.render(path, \
                template_values))
        else:
        if (res-utime)>timedelta(days=maxBefore[0], \
            hours=maxBefore[1],minutes=maxBefore[2]):
            template_values = {'trans':trans,'location_id':location_id}
            path = os.path.join(TEMPLATE_DIR, 'unexpected.html')
            self.response.out.write(template.render(path, \
                template_values))
        tempres.append([time, int(year), int(intMonth), \
            int(intWeekday), name,hiddenname,court_id, \
            weekday,weekday_key,int(day),0])
    elif name != hiddenname and name!="":
        #check early and late
        conflict = True
        tempres.append([time, int(year), int(intMonth), \
            int(intWeekday), name,hiddenname,court_id, \
            weekday,weekday_key,int(day),1])
    elif hiddenname != "" and name == "":
        conflict = True
        tempres.append([time, int(year), int(intMonth), \
            int(intWeekday), name,hiddenname,court_id, \
            weekday,weekday_key,int(day),2])
    else:
        pass 
```****

# facebook-c#-sdk - 新的 FacebookClient() 不起作用

> ID：12557734
> 
> 赞同：0
> 
> 时间：2012-09-24T01:17:49.823
> 
> 标签：facebook-c#-sdk

我已经从 Nuget 安装了 Facebook C# SDK，但我无法让代码工作：

> 找不到类型或命名空间名称“FacebookClient”（您是否缺少 using 指令或程序集引用？）

在使用 C# SDK 之前，是否需要添加对任何特定文件的引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T01:20:28.157

您将需要包含对包含`FacebookClient`. 编译器怎么会知道在哪里寻找它？

# javascript - 从 ajax 和 php 数据构建包含在 JS 或 jQuery 中的 divs JS 函数

> ID：12557738
> 
> 赞同：0
> 
> 时间：2012-09-24T01:18:12.667
> 
> 标签：javascript, jquery

如果用户选中表单复选框，我想创建一个新的 div。动态数据从 ajax 和 php 加载。我在问如何用 JS 或 jQuery 创建它。简化版本看起来像

```
<div id="ajaxSRC1" class="CLASS">
   <a href="javascript:void(0)" onmouseover="return myFunction('ajaxSRC5', 'ajaxSRC6')">
      <img src="ajaxSRC2" width="ajaxSRC3" height="ajaxSRC4" alt="..." />
   </a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T02:18:59.557

试试这个：

在复选框单击处理程序中：

```
$.ajax({
    type : 'post',
    url : 'test.php?id=52454',
    dataType : 'json',
    success : function (obj) {

        //construct and create the element
        var content = $('<div id="' + obj.ajaxSRC1 + '" class="CLASS">'
                    + '<a href="#">'
                    + '<img src="'+obj.ajaxSRC2+'" width="'+obj.ajaxSRC3+'" height="'+obj.ajaxSRC4+'" alt="..." />'
                    + '</a></div>');

        // bind mouseover event to the anchor tag
        content.find('a').mouseover(function() {
            myFunction(obj.ajaxSRC5, obj.ajaxSRC6);
            return false; // alternative to href="javascript:void(0)"
        });

        // append the newly created div to DOM
        divContainer.append(content);

    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T01:29:16.173

首先，不要使用内联JS，使用外部脚本文件
其次，可以像这样用jquery创建div

```
$('<div id="dataContainer" />'); 
```

只需将其添加到事件中，例如：

```
$('#checkbox').click(function(){
  $('<div id="dataContainer" />').html(ajaxSRC5);
}); 
```

# php - 像 tinkerpop 之类的 php 吗？

> ID：12557740
> 
> 赞同：2
> 
> 时间：2012-09-24T01:18:24.453
> 
> 标签：php, graph-databases, orientdb

我刚刚开始使用图形数据库。我想在 PHP 应用程序中与他们交谈。特别是，我正在关注[OrientDB](http://www.orientdb.org/orient-db.htm)，主要是因为它的许可优势和优于 neo4j 的功能。

在 PHP 中与 OrientDB 交互的推荐方式是什么？PHP 世界是否有像 tinkerpop 这样的通用框架？

我想主要使用 gremlin 和一些 OrientDB 的扩展 SQL（仅在必要时）来查询我的图表。

我知道有 2 个 php 连接器：[Orient](https://github.com/congow/Orient)和[OrientDB-PHP](https://github.com/AntonTerekhov/OrientDB-PHP)，但还没有尝试过。有没有人有过他们的经验？优缺点都有什么？如果存在的话，我当然更喜欢 PHP 的 tinkerpop 之类的东西，但如果它不存在，那么面向 OrientDB 的库也可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:16:20.003

我是 Alex，实际上我为 Orient（php 库）编写了代码库的最大部分。

在 PHP 中，目前没有 tinkerpop 之类的东西，但我认为您应该能够从 Orient 开始。使用它非常简单：

```
<?php

namespace Congow\Orient;

use Congow\Orient\Binding\HttpBinding;
use Congow\Orient\Binding\BindingParameters;

require __DIR__.'/../autoload.php';

$parameters = BindingParameters::create('http://admin:admin@127.0.0.1:2480/friends');
$binding = new HttpBinding($parameters);

$response = $binding->query('select from friends where any() traverse(0,1) ( @rid = #5:3 ) and @rid <> #5:3');
$friends = $response->getResult();

foreach ($friends as $friend) {
    echo $friend->name, "\n";
} 
```

您也可以使用查询构建器，而不是从头开始编写查询：

```
$query = new Select(array('myClass'));
$query->orderBy("name ASC", false);

echo $query->getRaw() // SELECT FROM myClass ORDER BY name ASC 
```

您可以查看库的测试，或者查看示例目录中的迷你示例。

我们正在慢慢地继续开发，所以你可以在这里找到一些资源：http: [//odino.org/blog/categories/orientdb/](http://odino.org/blog/categories/orientdb/)

干杯，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-08T16:31:39.950

我知道这已经有一段时间了，但我想指出您**可以**通过可用的驱动程序在 PHP 中使用 Tinkerpop 堆栈。

这些将允许您对您选择的底层数据库进行一定程度的抽象——从而允许您在需要时切换 DB（Neo4j、OrientDB、Titan 等）。

## 小叮当 3

您可以通过可用的 php 驱动程序使用[Gremlin 服务器](http://tinkerpop.incubator.apache.org/docs/3.0.1-SNAPSHOT/#gremlin-server)（rexster 的新名称）：

*   [gremlin-php](https://github.com/PommeVerte/gremlin-php)检查本[教程](https://dylanmillikin.wordpress.com/2015/07/20/get-up-and-running-with-tinkerpop-3-and-php/)

## Tinkerpop 2（不再维护）

您可以通过可用的 php 驱动程序从堆栈中使用[Rexster 服务器：](https://github.com/tinkerpop/rexster/wiki)

*   [rexpro-php](https://github.com/PommeVerte/rexpro-php)查看[这篇](https://dylanmillikin.wordpress.com/2013/08/05/chosing-your-graph-database-for-php/)文章
*   [杜立特](https://github.com/ConvergeSystems/Dolittle)
*   [rexpro-php-driver](https://github.com/travib/rexpro-php-driver) (PHP 扩展)

# performance - 查找与给定坐标最近的点 - 数据结构

> ID：12557747
> 
> 赞同：0
> 
> 时间：2012-09-24T01:19:34.093
> 
> 标签：performance, graphics, data-structures, distance, point

什么是保存二维点集合的好数据结构，以便以后我可以有效地调用像 collection.pointsCloserThanDistance(float d, float[] coordinates) 这样的方法？- 此方法将返回一个列表，其中每个点到给定坐标的距离小于或等于 d。

（以及该方法的实现方式如何？）

最简单且可能不太好的解决方案是标准数组，然后将每个点与给定坐标进行比较。这是 O(n)，n = 点数。但是可能有 O(m), m = 到给定坐标的距离小于或等于给定值的点数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T01:51:34.957

您需要像[kd 树](http://en.wikipedia.org/wiki/K-d_tree)这样的“空间分区”数据结构。

# wordpress - 如何在 XAMPP 服务器上创建 wordpress 数据库？

> ID：12557748
> 
> 赞同：0
> 
> 时间：2012-09-24T01:19:35.570
> 
> 标签：wordpress, phpmyadmin

我在 phpfog 上创建了一个 WordPress 站点，然后使用 git 将其下载到本地。phpfog 的设置方式我无法访问 wordpress 数据库并从我的本地主机安装访问它。我需要建立另一个数据库。到目前为止，我还无法让它工作。phpmyadmin 打不开。（我也尝试了新安装的 Wordpress 并且发生了同样的事情）

我认为问题是我需要一个数据库。但是，我把它放在哪里？什么目录？

这是我现在所处的位置：

在 wp-config.php 文件中，我在 mylini 中将参数“user”更改为“root”，将密码更改为“mypassword”，将密码参数更改为“mypassword”，端口更改为“3306”

在 config.inc.php 中，我将“用户”更改为“root”，将“密码”更改为“”

当我尝试连接到 phpmyadmin 时，我得到了这个。

```
Error
MySQL said:

Cannot connect: invalid settings.
phpMyAdmin tried to connect to the MySQL server, and the server rejected the connection. You should check the host, username and password in your configuration and make sure that they correspond to the information given by the administrator of the MySQL server. 
```

我在各种论坛上尝试了许多想法，但没有什么能让我超越这一点。任何想法都会很棒。

格雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T02:10:39.867

First - It's hard to know how to answer as your question is rather vague. There's two very different things involved. First, setting up xampp. Then setting up wordpress. I couldn't quite figure out which you were referring to for each error, so here's a long winded explination/answer in case any thing helps:

Are you on Linux I presume? On windows it was a bit of a hassle and wamp was 20x easier. But, you might consider a preconfigured stack that includes xampp (and necessary includes) and a few other goodies, some come with wordpress installed. I haven't personally used them, but wish I had - google ought to help out there.

I'm assuming you went to (http://)localhost/phpmyadmin, right?

First you need to get there before you hook up wordpress. As for hooking up xampp, it does take some configuration, so make sure you follow the docs - it's not quite a one click install.

Once you have xampp setup, you need to create a new database in localhost/phpmyadmin for wordpress. Then go back to your file folders, which should be located in xampp/htdocs/yourwordpressinstall.

config.inc.php - is that your wordpress directory? It needs to be wp-config.php (if it's not already there, save wp-config-sample.php as such). Open that, change server to localhost, database to the name of the database you just created. The username and password are the ones when you installed xampp. By default, I think they're User: Root, and PW: unset(blank). If you go to phpmyadmin there's a link to security and it'll show you there. localhost/phpmyadmin

Now, you should be able to type in the location of the filefolders.

localhost/wordpress/ - assuming your server is started, and the wordpress root folder is name "wordpress" and is in the xampp/htdocs/ folder.

From there you should see wordpress.

However, if you've exported your database, you'll need to change the site_url and home_url options to the new url. I'd suggest using the plugin wp db migrate (something like that) which will allow you to export the database from wordpress and auto set the values. Once the plugin is installed it's under the tools menu.

If you google migrating wordpress, you'll find plenty of tutorials and guides for moving wordpress from local to live, or as you're doing, online to local.

Sorry, I have to run, so I'm not sure if I really got to exactly what you needed, but that should get you started and give you the keywords to let google and other tutorials/docs get you the rest of the way.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T01:35:36.250

我建议在本地开发。也就是说，您在自己的机器上使用虚拟数据库开发东西。当您对更改感到满意时，将它们上传到您的服务器，该服务器与您的*真实*（生产）数据库一起使用。

要将本地副本与数据库挂钩：

1.  在本地机器上安装 MySQL
2.  打开 MySQL 的接口。在类 UNIX 系统上，您可以`mysql`在命令行上键入
3.  `CREATE DATABASE ''databasename'';`
4.  `GRANT ALL PRIVILEGES ON ''databasename''.* TO "''username''"@"''hostname''" IDENTIFIED BY "''password''";`（如果主机名是%，则可以从所有主机登录）
5.  `FLUSH PRIVILEGES;`
6.  使用本地凭据和数据库名称更新本地 wp-config.php

# c - c中的链表问题

> ID：12557753
> 
> 赞同：0
> 
> 时间：2012-09-24T01:20:25.357
> 
> 标签：c, linked-list

我正在尝试链接列表，但由于某种原因它没有做它应该做的事情。当我在选择 1 后输入数量时，一切都很好，直到将节点添加到现有列表中，之后数量变成一串奇怪的数字。而且，当我尝试将多个节点添加到捐赠列表时，程序就会崩溃。

编辑：上述问题已解决，但还有一个我忘记提及的问题是当我尝试打印列表时，没有打印任何内容。当我选择 4 时会发生这种情况。

EDIT2：打印功能只打印出第一个节点，之后什么也没有。请帮忙。

这是代码。

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

typedef struct donation{
    char name[50];
    int quant;
    struct donation* next;
}donate;

donate* addItem(donate *mylist,donate *temp){
    donate *front=(donate*)malloc(sizeof(donate*));

    if(mylist==NULL)
    return temp;

    front=mylist;
    while(mylist->next!=NULL)
        mylist=mylist->next;
    mylist->next=temp;

    return front;
}    
void print(donate* donList){

    printf("Printing the Donations Table\n\n");
    if(donList!=NULL){
        while(donList->next!=NULL){
            printf("%s %d\n",donList->name,donList->quant);
            donList=donList->next;
        }
    }
}

main(){

    donate *list=NULL;

    while(1){
        int choice;
        printf("1\. Add a donation\n);
        printf("Enter your choice: ");
        scanf("%d",&choice);

        if(choice==1){
            donate* temp=(donate*)malloc(sizeof(donate*));
            printf("\nEnter inventory type: ");
            scanf("%s",temp->name);
            printf("Enter the amount: ");
            scanf("%d",&temp->quant);
            temp->next=NULL;
            list=addItem(list,temp);
            printf("\nDonation Added!\n");
            printf("%s %d\n",list->name,list->quant);
        }
    else if(choice==4){
        print(list);
    }
}

    system("pause");
    return 0;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T01:27:19.757

一个问题是您正在为捐赠指针分配空间。您需要为结构本身分配空间。

```
donate* temp=(donate*)malloc(sizeof(donate*)); 
```

应该

```
donate* temp= malloc(sizeof(donate)); 
```

由于您正在执行 malloc，因此在添加项目之前，我认为 addItem 只需要：

```
donate* addItem(donate *mylist,donate *temp)
{
    if (mylist != NULL)
       temp->next = mylist;

    return temp;
} 
```

看起来您不会打印 1 项列表：

```
 printf("Printing the Donations Table\n\n");
    if(donList!=NULL){
        printf("Not NULL!!!!\n");
        while(donList->next!=NULL){
            printf("%s %d\n",donList->name,donList->quant);
            donList=donList->next;
        }
    } 
```

我认为应该是：

```
printf("Printing the Donations Table\n\n");
if (donList!=NULL)
{
    printf("Not NULL!!!!\n");
    do 
    {
        printf("%s %d\n",donList->name,donList->quant)
        donList=donList->next;
    }
    while(donList != NULL);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T01:22:42.870

尝试运行链接到[efence](http://linux.die.net/man/3/efence)或使用[valgrind](http://linux.die.net/man/1/valgrind)的程序。两者都会告诉你事情开始变坏的时间和地点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T01:36:45.597

我看到了两个问题。首先是Scooter指出的问题。其次是你的第一行有内存泄漏`addItem()`。

*编辑*要回答您的第二个问题，您需要修复构建错误；您引用`reqList`但从`main()`不声明它。

这是代码的更正版本：

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

typedef struct donation{
    char name[50];
    int quant;
    struct donation* next;
}donate;

donate* addItem(donate *mylist,donate *temp){
    if(mylist==NULL)
    return temp;

    donate *front=mylist;
    while(mylist->next!=NULL)
        mylist=mylist->next;
    mylist->next=temp;

    return front;
}    

main(){

    donate *list=NULL;

    while(1){
        int choice;
        printf("1\. Add a donation\n);
        printf("Enter your choice: ");
        scanf("%d",&choice);

        if(choice==1){
            donate* temp=(donate*)malloc(sizeof(donate));
            printf("\nEnter inventory type: ");
            scanf("%s",temp->name);
            printf("Enter the amount: ");
            scanf("%d",&temp->quant);
            temp->next=NULL;
            list=addItem(list,temp);
            printf("\nDonation Added!\n");
            printf("%s %d\n",list->name,list->quant);
        }
    }
    system("pause");
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T02:40:25.610

在这里更正 `donate *front=(donate*)malloc(sizeof(donate*))`
一下

```
donate *front=(donate*)malloc(sizeof(donate)) 
```

# javascript - 点击与 iframe 链接

> ID：12557755
> 
> 赞同：0
> 
> 时间：2012-09-24T01:20:48.127
> 
> 标签：javascript, jquery, iframe

如果我在 iFrame 中加载了一个网站，如下所示：

```
$("#myIframe").attr("src",url); 
```

...当用户单击该站点的链接时，是否可以捕获新页面的 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T01:24:30.810

您可以附加到 onLoad 事件

```
<iframe src="/test.html" onLoad="alert(this.contentWindow.location);"></iframe> 
```

或者

```
$('#myIframe').load(function() {
  alert("the iframe has been loaded, pull the src");
}); 
```

每个[Muthu Kumaran](https://stackoverflow.com/users/615746/muthu-kumaran)的工作样本：http : [//jsfiddle.net/muthkum/DuRTR/](http://jsfiddle.net/muthkum/DuRTR/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T01:24:24.240

您无法从包含 iframe 的页面访问 iframe 的内容，因为这将允许您做很多邪恶的事情，例如窃取会话 cookie、让用户点击他不想在另一个网站上点击的内容等。

Glennulars 的回答显然会起作用。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T01:40:04.160

我不知道事件是否会冒泡到 iframe，但您可以尝试：

```
$("iframe").click(function(e){
  console.log('something was clicked');
}); 
```

# android - 在哪里可以找到 osmdroid 3.0.5 的资源

> ID：12557758
> 
> 赞同：1
> 
> 时间：2012-09-24T01:21:03.720
> 
> 标签：android, map, osmdroid

最近在研究和使用osmdroid项目的架构。

一开始，我下载了 osmdroid-android-3.0.5.jar 并将其插入到我的 android 程序中。它运行平稳快速，尤其是在加载本地地图图块时。但我找不到版本“3.0.5”的代码资源。

我找到了版本'3.0.8'的代码资源，所以我把它移到我的项目中。然后发生了可怕的事情：加载本地地图图块非常慢！！！当我更改地图视图的缩放级别时，一些属于最后一个缩放级别的地图图块仍然存在！！！操作这个软件的感觉变差了！！！

那么，我该如何解决这个问题呢？我在哪里可以找到版本 osmdroid-3.0.5 的代码资源？

非常感谢您的回复！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T01:41:35.503

osmdroid 源代码可在 Google Code 上找到，并且有一个 3.0.5 的分支。

[http://osmdroid.googlecode.com/svn/branches/release_3_0_5/](http://osmdroid.googlecode.com/svn/branches/release_3_0_5/)

# php - 有没有办法在 CodeIgniter 中指定“使用索引”或“强制索引”

> ID：12557761
> 
> 赞同：6
> 
> 时间：2012-09-24T01:22:09.200
> 
> 标签：php, mysql, codeigniter

是否可以在 CodeIgniter 中指定“USE INDEX”或“FORCE INDEX”，而不是使用

```
$this->db->query() 
```

我的意思是是否可以在 ActiveRecord 的方法之一中插入“FORCE INDEX”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T14:55:37.840

您可以使用`from()`活动记录方法将其添加到如下查询中：

```
$this->db->like('name', 'user', 'after')->from('users use index (name)')->get(); 
```

产生这样的sql查询：

```
 SELECT * FROM (`users` use index (name)) WHERE  `name`  LIKE 'user%' 
```

需要注意的是，该`from()`方法会尝试查找标识符和多个表，因此`,`在其输入中添加一个或多个表很可能最终导致 SQL 语法错误。

# sql - 将不规则的时间序列拆分为定期的月平均值 - R

> ID：12557762
> 
> 赞同：7
> 
> 时间：2012-09-24T01:22:37.510
> 
> 标签：sql, r, data.table, xts, zoo

为了确定对能源使用的季节性影响，我需要将我从计费数据库中获得的能源使用信息与每月温度相匹配。

我正在使用具有不同长度以及开始和结束日期的账单的计费数据集，并且我想获得每个月内每个帐户的月平均值。例如，我有一个具有以下特征的计费数据库：

```
 acct amount      begin        end days
1  2242  11349 2009-10-06 2009-11-04   29
2  2242  12252 2009-11-04 2009-12-04   30
3  2242  21774 2009-12-04 2010-01-08   35
4  2242  18293 2010-01-08 2010-02-05   28
5  2243  27217 2009-10-06 2009-11-04   29
6  2243    117 2009-11-04 2009-12-04   30
7  2243  14543 2009-12-04 2010-01-08   35 
```

我想弄清楚如何强制这些有些不规则的时间序列（对于每个帐户）以获得每个账单中跨越的每个月内每天的平均金额，例如：

```
 acct amount      begin        end days avgamtpday
1  2242  11349 2009-10-01 2009-10-31   31          X
2  2242  12252 2009-11-01 2009-11-30   30          X
3  2242  21774 2009-12-01 2010-12-31   31          X
4  2242  18293 2010-01-01 2010-01-31   31          X
4  2242  18293 2010-02-01 2010-02-28   28          X
5  2243  27217 2009-10-01 2009-10-31   31          X
6  2243    117 2009-11-01 2009-11-30   30          X
7  2243  14543 2009-12-01 2009-12-31   30          X
7  2243  14543 2010-01-01 2010-01-31   31          X 
```

我对任何工具都可以做到这一点相当不可知，因为我只需要这样做一次。

另一个问题是该表大约有 150,000 行长，按照大多数标准，这并不是很大，但大到足以使 R 中的循环解决方案变得困难。我已经在 R 中使用 zoo、xts 和 tempdisagg 包进行了调查。我开始编写一个非常丑陋的循环，它会拆分每个账单，然后在现有账单中为每个月创建一行，然后用 tapply() 来汇总 accts和几个月，但老实说，看不出如何有效地做到这一点。

在 MySQL 中，我试过这个：

> 创建或替换视图 v3 为 select 1 n union all select 1 union all select 1;
> 创建或替换视图 v 为 select 1 n from v3 a, v3 b union all select 1;
> 设置@n = 0；
> 如果存在日历，则删除表；创建表日历（dt日期主键）；
> 插入日历
> select cast('2008-1-1' + interval @n:=@n+1 day as date) as dt from va, vb, vc, vd, ve, v;
> 
> select acct, amount, begin, end, billAmtPerDay, sum(billAmtPerDay), MonthAmt, count( *) Days, sum(billAmtPerDay)/count(* ) AverageAmtPerDay, year(dt), month(dt) FROM (select *, amount/days billAmtPerDay 来自账单 b 内部连接日历 c 在 begin 和 end 之间的 dt 和 begin <> dt) x 按帐户、金额、开始、结束、billAmtPerDay、年(dt)、月(dt) 分组；

但是由于我不明白的原因，我的服务器不喜欢这个表，并且在内部连接上挂断了，即使我进行不同的计算也是如此。我正在调查它是否有任何临时内存限制。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T17:38:06.363

这是一个开始使用`data.table`：

```
billdata <- read.table(text=" acct amount begin end days
1 2242 11349 2009-10-06 2009-11-04 29
2 2242 12252 2009-11-04 2009-12-04 30
3 2242 21774 2009-12-04 2010-01-08 35
4 2242 18293 2010-01-08 2010-02-05 28
5 2243 27217 2009-10-06 2009-11-04 29
6 2243 117 2009-11-04 2009-12-04 30
7 2243 14543 2009-12-04 2010-01-08 35", sep=" ", header=TRUE, row.names=1)

require(data.table)
DT = as.data.table(billdata) 
```

首先，更改列类型`begin`和`end`日期。与 data.frame 不同，这不会复制整个数据集。

```
DT[,begin:=as.Date(begin)]
DT[,end:=as.Date(end)] 
```

然后找到时间跨度，找到每天的通行账单，然后汇总。

```
alldays = DT[,seq(min(begin),max(end),by="day")]

setkey(DT, acct, begin)

DT[CJ(unique(acct),alldays),
   mean(amount/days,na.rm=TRUE),
   by=list(acct,month=format(begin,"%Y-%m")), roll=TRUE]

    acct   month        V1
 1: 2242 2009-10 391.34483
 2: 2242 2009-11 406.69448
 3: 2242 2009-12 601.43226
 4: 2242 2010-01 646.27465
 5: 2242 2010-02 653.32143
 6: 2243 2009-10 938.51724
 7: 2243 2009-11  97.36172
 8: 2243 2009-12 375.68065
 9: 2243 2010-01 415.51429
10: 2243 2010-02 415.51429 
```

我想你会发现流行的连接逻辑在 SQL 中相当繁琐，而且速度较慢。

我说这是一个提示，因为它并不完全正确。注意第 10 行是重复的，因为与帐户 2242 不同，帐户 2243 不会延伸到 2010-02。要完成它，您可以`rbind`在每个帐户的最后一行使用`rolltolast`而不是`roll`. 或者也许`alldays`按帐户而不是跨所有帐户创建。

看看上面的速度是否可以接受，我们可以从那里开始。

您可能会遇到 1.8.2 中已在 1.8.3 中修复的错误。我正在使用 v1.8.3。

> 修复了组合包含缺失组和分组依据的联接时的“内部”错误消息，#2162。例如：X[Y,.N,by=NonJoinColumn] 其中 Y 包含一些与 X 不匹配的行。此错误也可能导致段错误。

让我知道，我们可以解决问题，或者从 R-Forge 升级到 1.8.3。

顺便说一句，很好的示例数据。这使它更快地回答。

* * *

这是上面提到的完整答案。我不得不承认这有点棘手，因为它结合了`data.table`. 这应该在 1.8.2 中起作用，但我只在 1.8.3 中测试过。

```
DT[ setkey(DT[,seq(begin[1],last(end),by="day"),by=acct]),
    mean(amount/days,na.rm=TRUE),
    by=list(acct,month=format(begin,"%Y-%m")), roll=TRUE]

   acct   month        V1
1: 2242 2009-10 391.34483
2: 2242 2009-11 406.69448
3: 2242 2009-12 601.43226
4: 2242 2010-01 646.27465
5: 2242 2010-02 653.32143
6: 2243 2009-10 938.51724
7: 2243 2009-11  97.36172
8: 2243 2009-12 375.68065
9: 2243 2010-01 415.51429 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T08:11:20.063

这是一种方法：

```
billdata <- read.table(text=" acct amount begin end days
1 2242 11349 2009-10-06 2009-11-04 29
2 2242 12252 2009-11-04 2009-12-04 30
3 2242 21774 2009-12-04 2010-01-08 35
4 2242 18293 2010-01-08 2010-02-05 28
5 2243 27217 2009-10-06 2009-11-04 29
6 2243 117 2009-11-04 2009-12-04 30
7 2243 14543 2009-12-04 2010-01-08 35", sep=" ", header=TRUE, row.names=1)

#First, declare your columns "begin" and "end" as dates:
strptime(billdata$begin, format="%Y-%m-%d") -> billdata$begin
strptime(billdata$end, format="%Y-%m-%d") -> billdata$end

#Then create a column with the amount per day on the billing period:
billdata$avg_on_period<-billdata$amount/billdata$days

#Then split it into days:
temp <- data.frame(acct=c(),month=c(),day=c(), avg=c())
for(i in 1:nrow(billdata)){
    X <- billdata[i,]
    seq(X$begin,X$end,by="day") -> list_day
    rbind(temp, data.frame(acct=rep(X$acct,length(list_day)), 
        month=format(list_day, "%Y-%m"), day=format(list_day, "%d"), 
        avg=rep(X$avg_on_period, length(list_day)))) -> temp
    }

# And finally merge the different days of the months together:
output<-aggregate(temp$avg, by=list(temp$month,temp$acct), FUN=mean)

colnames(output) <- c("Month","Account","Average per day")

output
    Month Account Average per day
1 2009-10    2242       391.34483
2 2009-11    2242       406.69448
3 2009-12    2242       595.40000
4 2010-01    2242       645.51964
5 2010-02    2242       653.32143
6 2009-10    2243       938.51724
7 2009-11    2243        97.36172
8 2009-12    2243       364.06250
9 2010-01    2243       415.51429 
```

# javascript - Javascript公共方法参数作为私有变量

> ID：12557766
> 
> 赞同：1
> 
> 时间：2012-09-24T01:23:03.790
> 
> 标签：javascript, oop, prototype

我试图弄清楚如何在我的类上拥有一个由公共方法的参数设置的私有实例变量。但是，在这种情况下；似乎在 somePublicMethod myPrivateVar 之外将是未定义的。怎样才能实现我想要做的事情？

```
MyClass = function() {
    var myPrivateVar;

    this.somePublicMethod(myPrivateVar) {
        myPrivateVar = myPrivateVar //????
    }

    this.someOtherPublicMethod() {
        somePrivateMethod();
    }

    function somePrivateMethod() {
        myPrivateVar++;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T01:36:26.800

问题是您`var myPrivateVar`通过为参数提供相同的名称来隐藏 ，因此只有参数变量在范围内：

```
this.somePublicMethod = function(myPrivateVar) {
    myPrivateVar = myPrivateVar; // sets the argument to itself
} 
```

您需要为其中之一指定不同的名称以避免阴影：

```
this.somePublicMethod = function(inputVar) {
    myPrivateVar = inputVar;
}; 
```

否则，您将需要以某种方式包含其中之一：

```
MyClass = function () {
    var locals = {
        myPrivateVar: null
    };

    this.somePublicMethod = function (myPrivateVar) {
        locals.myPrivateVar = myPrivateVar;
    };

    function somePrivateMethod() {
        locals.myPrivateVar++;
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T01:26:04.060

使用`this.myPrivateVar`：

```
this.somePublicMethod = function(myPrivateVar) {
    this.myPrivateVar = myPrivateVar;
} 
```

要在 的上下文中调用私有方法`this`，可以使用：

```
this.somePublicMethod = function(myPrivateVar) {
    this.myPrivateVar = myPrivateVar;
    somePrivateMethod.call(this); // pass this as the context of the private method
}

function somePrivateMethod() {
    this.myPrivateVar++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T02:23:33.223

您是否考虑过采取稍微不同的路线？

```
var MyClass = function(){
    var bar = "private";
    return {
        setBar: function( newBar ) { bar = newBar; },
        getBar: function() { return bar; }
    }
}; 
```

当您新建此类的实例时， bar 属性将是私有的。但是，公众`setBar`和`getBar`方法仍然可以访问它。

```
var inst = new MyClass;

console.log( inst.bar ); // undefined
console.log( inst.getBar() ); // 'private'

inst.setBar( 'accessible' );

console.log( inst.getBar() ); // 'accessible' 
```

# c - c头文件中的静态结构声明和初始化

> ID：12557769
> 
> 赞同：2
> 
> 时间：2012-09-24T01:23:37.540
> 
> 标签：c, struct, embedded, header-files, microcontroller

我开发了一个使用 MindTree 蓝牙 SDK 的嵌入式应用程序。

我在头文件中有以下内容：

```
typedef struct {
    UCHAR outputDir;
    UCHAR reset;
    UCHAR nack;
    UCHAR startCondition;
    UCHAR stopCondition;
    UCHAR busy;
} USCI_ConfigurationFlags;

static USCI_ConfigurationFlags usciConfigFlags = { UCTR, UCSWRST, UCNACKIFG, UCTXSTT, UCTXSTP, UCBBUSY }; 
```

稍后在两个 .c 文件中，我包含了上述标头，并在不同的场合有时从中断中使用**usciConfigFlags 。**

这合法吗？

在调用 SDK 中的 BT_bluetooth_on 方法后，我试图了解为什么（以及是否与问题相关）结构的值在运行时发生变化。

谢谢，亚当。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T01:31:57.530

`static`这里并不意味着你认为它意味着什么。这意味着声明和变量将仅在一个编译单元中可见。也就是说，您有两个独立的`usciConfigFlags`.

如果您想要一个全局变量，您需要使用`extern`not并在您的一个 c 文件中使用初始值`static`进行实际声明（不带）。`extern`

还要厌倦在没有适当锁定的情况下更改结构中的值。只读并发访问通常没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T01:34:29.200

`.c`将标题包含在两个文件中没有问题。修饰符限制文件中变量的`static`可访问范围，仅包括标题。两个`usciConfigFlags`不同文件中的两个不相同。

也`static`不代表恒定。所以你可以用任何你想要的方式修改结构的值。

以下来自[维基百科](http://en.wikipedia.org/wiki/Static_variable)

> 在计算机编程中，静态变量是静态分配的变量——它的生命周期贯穿程序的整个运行。这与更短暂的自动变量（局部变量）形成对比，后者的存储在调用堆栈上分配和释放；并且与动态分配存储的对象相反。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T01:38:43.780

为变量添加静态关键字使其仅在当前翻译单元中可见（即，如果在函数中，则仅在该函数中，如果在文件中，则仅在该文件中）。

在头文件中定义变量绝不是一个好主意。即使您需要两个具有相同名称的不同文件中的两个静态变量，最好将 .c 文件本身放入，因为它有助于更​​好的维护和可读性，因为您将清楚它实际存在于哪些文件中，并且正在使用。

如果您将其添加到头文件中，那么稍后，如果某个其他 .c 文件包含此头文件，则该变量将不必要地包含在该翻译单元中。

Epsalon 提出了您可以考虑的其他优点。

# language-agnostic - 动态语言中的类是如何实现的？

> ID：12557771
> 
> 赞同：2
> 
> 时间：2012-09-24T01:23:40.553
> 
> 标签：language-agnostic, programming-languages

动态语言中的类是如何实现的？

我知道 Javascript 正在使用原型模式（“某处”有一个未绑定 JS 函数的容器，当通过对象调用它们时它们是绑定的），但我不知道它在其他语言中是如何工作的。

我对此感到好奇，因为我想不出一种有效的方法来拥有本机绑定方法，而不会通过复制每个实例的成员来浪费内存和/或 cpu。

（通过绑定方法，我的意思是以下代码应该可以工作:)

```
class Foo { function bar() : return 42; };

var test = new Foo();
var method = test.bar;
method() == 42; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:59:04.683

这在很大程度上取决于语言*和*实现。我会告诉你我对 CPython 和 PyPy 的了解。

一般的想法，这也是 CPython 在大多数情况下所做的，如下所示：

1.  每个对象都有一个类，特别是对该类对象的引用。
2.  除了显然存储在单个对象中的实例成员之外，该类还具有成员。这包括方法，因此方法没有每个对象的成本。
3.  一个类具有由继承关系确定的方法解析顺序 (MRO)，其中每个基类只出现一次。如果我们没有多重继承，这只是对基类的引用，但这样一来，MRO 就很难即时计算出来（每次都必须从最派生的类开始）。
4.  （类也是对象，它们本身也有类，但我们暂时忽略这一点。）
5.  如果对象的属性查找失败，则按照 MRO 指定的顺序在 MRO 中的类上查找相同的属性。（这是默认行为，可以通过定义 和 等魔术方法来更改`__getattr__`。`__getattribute__`）

到目前为止如此简单，并不能真正解释绑定方法。我只是想确保我们谈论的是同一件事。缺少的部分是**描述符**。描述[符协议](http://docs.python.org/reference/datamodel.html#implementing-descriptors)在语言参考的“深奥魔法”部分中定义，但简短而简单的故事是，对类的查找可以被它通过方法*产生的对象*`__get__`劫持。更重要的是，该`__get__`方法被告知查找*是在*实例上还是在“所有者”（类）上开始的。

在 Python 2 中，我们有一个丑陋且不必要的`UnboundMethod`描述符（除了`__get__`方法之外），它只是简单地包装函数以在`Class.method(self)`如果`self`不是可接受的类型时抛出错误。在 Python 3 中，`__get__`它只是所有函数对象的一部分，并且没有绑定方法。在这两种情况下，`__get__`当您在类上查找该方法时，该方法会返回自身（因此您可以使用`Class.method`，这在少数情况下很有用），当您在对象上查找它时，它会返回一个“绑定方法”对象。这个绑定的方法对象只是存储原始函数和实例，并将后者作为第一个参数传递给前者`__call__`（覆盖函数调用语法的特殊方法）。

因此，对于 CPython：虽然绑定方法有成本，但它比您想象的要小。在空间方面只需要两个引用，并且 CPU 成本仅限于小的内存分配，以及调用时的额外间接。请注意，此成本适用于所有方法调用，而不仅仅是那些实际使用绑定方法功能的方法调用。`a.f()` *必须*调用描述符并使用它的返回值，因为在动态语言中，我们不知道它是否经过猴子修补来做一些不同的事情。

在 PyPy 中，事情更有趣。由于它是一种不影响正确性的实现，因此上述模型对于语义推理仍然是正确的。但是，它实际上更快。除了 JIT 编译器在大多数情况下内联然后消除上述整个混乱之外，它们还解决了字节码级别的问题。有两个[新的字节码指令](http://doc.pypy.org/en/latest/interpreter-optimizations.html#lookup-method-call-method)，它们保留了语义，但在`a.f()`. 还有一个[方法缓存](http://doc.pypy.org/en/latest/interpreter-optimizations.html#method-caching)可以简化查找过程，但需要一些额外的簿记（尽管其中一些簿记已经为 JIT 完成）。

# ruby-on-rails - Capybara 无法点击链接，响应包含显示链接

> ID：12557772
> 
> 赞同：2
> 
> 时间：2012-09-24T01:23:51.860
> 
> 标签：ruby-on-rails, ruby, rspec, capybara

我正在尝试编写一个单击链接的测试，但是当我运行测试时，Capybara 返回以下错误：

```
 "no link with title, id or text 'New Mwod post' found 
```

所以我放了一个“调试器”并打印了响应。正文包含以下内容：

```
<a href=\"/mwod_posts/new\">New Mwod post</a> 
```

测试有以下代码：

```
describe "GET /mwod_posts/new" do
  it "creates a new mwod post" do
    FactoryGirl.create(:mwod_tag)
    get mwod_posts_path
    debugger
    response.status.should be(200)
    click_link "New Mwod post"
  end
end 
```

任何想法为什么水豚不能点击链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T01:44:37.770

问题是您在`get`应该使用[`visit`](http://www.ruby-doc.org/gems/docs/c/capybara-1.1.2/Capybara/Session.html#method-i-visit).

转变：

```
get mwod_posts_path 
```

至：

```
visit mwod_posts_path 
```

这将让您单击链接`click_link`等。要解析响应，您需要更改：

```
response.status.should be(200) 
```

至：

```
page.response_code.should be(200) 
```

我实际上并没有确认这是否有效，但[其他地方的讨论](https://groups.google.com/forum/?fromgroups=#!topic/ruby-capybara/KdMvhjcjm8E)似乎表明您可以通过这种方式从`page`. 虽然，正如讨论中所指出的，这不是您在集成测试中真正应该做的事情。

有关更多信息，请参阅[此答案](https://stackoverflow.com/questions/11090038/rspec-and-capybara-difference-between-visit-and-get-methods-with-regards-to-th)`get`和[这篇文章](http://blog.plataformatec.com.br/2012/06/improving-the-integration-between-capybara-and-rspec/)之间的区别。（这是一个常见的混淆点。）。`visit`

# php - 如果 PHP/HTML 电子邮件文件中的条件

> ID：12557774
> 
> 赞同：0
> 
> 时间：2012-09-24T01:24:08.607
> 
> 标签：php, html, email

我正在尝试根据 PHP`IF`条件显示原始 HTML 表格，但它不起作用。

你能告诉我有什么问题吗？

此代码是 html 电子邮件的一部分。`$heating`如果变量更大，我想显示原始数据`0`。

**PHP代码：**

```
<table border=\"1\">
    <tr>
        <td>Rental, cleaning and Taxes</td>
        <td align=right>$rent</td>
    </tr>
    <?php if ($heating > 0) ?>
    <tr>
        <td>Pool heating</td>
        <td align=right>$heating</td>
    </tr>
    <?php endif; ?>
    <tr>
        <td>BBQ</td>
        <td align=right>$bbq</td>
    </tr>
    <tr>
        <td>Refundable Damage deposit</td>
        <td align=right>250</td>
    </tr>
    <tr>
        <td>Total(includes all taxes and fees</td>
        <td align=right>$total</td>
    </tr>
</table> 
```

**电子邮件显示：**

```
Rental, cleaning and Taxes 1150 
Pool heating 0 
BBQ 50 
Refundable Damage deposit 250 
Total(includes all taxes and fees 1450 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T01:26:23.923

您使用的替代控制结构语法错误：

```
<?php if ($heating > 0): ?>
                       ^--- missing 
```

没有冒号，你写的相当于单行

```
if (somecondition) 
   do_a_one_line_action; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T01:26:35.863

您的所有变量实际上都不在 PHP 代码中。它们应该被包裹在`<?php echo $var; ?>`. 将以下模式应用于所有嵌入 HTML 的 PHP 变量`$heating, $bbq, $total`。

```
// As in:
<td align='right'><?php echo $heating; ?></td> 
```

有关模板语法的语法错误，请参见上面的 MarcB 回答`if`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T01:28:36.063

不应该是这样吗？

```
<?php if ($heating > 0) { ?>
<tr>
<td>Pool heating</td>
<td align=right><?=$heating?></td>
</tr>
<?php } ?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T01:28:54.503

我认为这是在一个变量中，例如：

```
HTMLtext = "<table border=\"1\">  
    <tr>  
    <td>Rental, cleaning and Taxes</td>  
    <td align=right>$rent</td></tr>  
    <?php if ($heating > 0) ?>  
    <tr>  
    <td>Pool heating</td>  
    <td align=right>$heating</td>  
    </tr>  
    <?php endif; ?>  
    <tr>  
    <td>BBQ</td>
    ....
" 
```

在这种情况下，PHP 代码将不会被执行——它将被包含在字符串中（然后被电子邮件客户端删除）

你需要分成几位：

```
HTMLtext = "<table border=\"1\">  
    <tr>  
    <td>Rental, cleaning and Taxes</td>  
    <td align=right>$rent</td></tr>";

if ($heating > 0) {
    HTMLtext .= "
    <tr>  
    <td>Pool heating</td>  
    <td align=right>$heating</td>  
    </tr>";
}

HTMLtext .= "
    <tr>  
    <td>BBQ</td>
    ....
"; 
```

# performance - JSP 页面加载时间过长

> ID：12557788
> 
> 赞同：1
> 
> 时间：2012-09-24T01:26:59.770
> 
> 标签：performance, jsp

我有一个带有 2 个文本框、2 个下拉菜单、复选框和 4 个列表框的 JSP 页面（这是一个选项卡式视图）。

通过连接到数据库并通过准备好的语句查询来填充一个下拉列表。

如果选中该复选框，则通过 AJAX 填充 4 个列表框和第二个下拉列表。默认情况下，该复选框未选中。

这里的问题是，JSP 页面加载时间过长。加载页面大约需要 0.11 分钟。甚至在我选中复选框并填充列表框和第二个下拉列表之前，页面加载速度太慢。

标签页中的页面会降低性能吗？

知道为什么会发生这种情况，我可以做些什么来提高页面性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T22:37:36.537

我找到了解决此问题的方法。我首先加载页面，然后进行 AJAX 调用来加载这个下拉控件。这样，用户就不会觉得页面加载缓慢。我知道这不是一个永久的解决方案。

# api - 从 Amazon.com 提取评论

> ID：12557793
> 
> 赞同：1
> 
> 时间：2012-09-24T01:27:44.143
> 
> 标签：api, amazon, review

我希望从 Amazon.com 中提取所有评论。检索后，我应该能够按产品 ID、用户 ID 查找评论。

请让我知道是否有任何 API 可用于执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T01:40:39.990

当用户在亚马逊上发表评论时，该评论将成为亚马逊的财产：

[**评论、评论、交流和其他内容**](http://www.amazon.com/gp/help/customer/display.html?ie=UTF8&nodeId=508088)

> 如果您确实发布内容或提交材料，除非我们另有说明，否则您授予亚马逊非排他性、免版税、永久、不可撤销和完全可再许可的使用、复制、修改、改编、发布、翻译、创建衍生作品的权利，在世界各地以任何媒体分发和展示此类内容。您授予亚马逊和分许可人使用您提交的与此类内容相关的名称的权利（如果他们愿意）。您声明并保证您拥有或以其他方式控制您发布的内容的所有权利；内容准确；使用您提供的内容不违反本政策，不会对任何人或实体造成伤害；并且您将赔偿亚马逊因您提供的内容而引起的所有索赔。

因此，似乎不太可能有人会发布一个从本质上剥夺亚马逊权利的 API。

# python - 在 Python 中剥离

> ID：12557794
> 
> 赞同：4
> 
> 时间：2012-09-24T01:27:47.437
> 
> 标签：python, strip

我有一个关于`strip()`Python 的问题。我正在尝试从字符串中删除分号，当分号位于字符串末尾时，我知道该怎么做，但是如果它不是最后一个元素，我该怎么做，但是说第二个到最后一个元素。

例如：

```
1;2;3;4;\n 
```

我想去掉最后一个分号。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T01:30:38.550

剥离其他字符。

```
>>> '1;2;3;4;\n'.strip('\n;')
'1;2;3;4' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T01:37:47.980

```
>>> "".join("1;2;3;4;\n".rpartition(";")[::2])
'1;2;3;4\n' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-24T12:28:19.957

更换怎么样？

```
string1='1;2;3;4;\n'
string2=string1.replace(";\n","\n") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-24T01:31:44.177

```
>>> string = "1;2;3;4;\n"
>>> string.strip().strip(";")
"1;2;3;4" 
```

这将首先删除任何前导或尾随空格，然后删除任何前导或尾随分号。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-24T01:46:18.073

试试这个：

```
def remove_last(string):
    index = string.rfind(';')
    if index == -1:
        # Semi-colon doesn't exist
        return string
    return string[:index] + string[index+1:] 
```

这应该能够删除该行的最后一个分号，无论它后面是什么字符。

```
>>> remove_last('Test')
'Test'
>>> remove_last('Test;abc')
'Testabc'
>>> remove_last(';test;abc;foobar;\n')
';test;abc;foobar\n'
>>> remove_last(';asdf;asdf;asdf;asdf')
';asdf;asdf;asdfasdf' 
```

提供的其他答案可能会更快，因为它们是根据您的特定示例量身定制的，但这个更灵活一些。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-24T02:10:54.857

```
re.sub(r';(\W*$)', r'\1', '1;2;3;4;\n') -> '1;2;3;4\n' 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-24T08:19:57.557

您可以用分号拆分字符串，然后使用 ; 再次将非空部分连接回来。作为分隔符

```
parts = '1;2;3;4;\n'.split(';')
non_empty_parts = []
for s in parts:
    if s.strip() != "": non_empty_parts.append(s.strip())
print "".join(non_empty_parts, ';') 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-06-08T03:02:00.230

如果您只想使用 strip 函数，这是一种方法：使用切片表示法，您可以将 strip() 函数的范围限制为字符串的一部分，并在末尾附加“\n”：

```
# create a var for later
str = "1;2;3;4;\n"
# format and assign to newstr
newstr = str[:8].strip(';') + str[8:] 
```

使用 rfind() 方法（类似于 Micheal0x2a 的解决方案），您可以使语句适用于许多字符串：

```
# create a var for later
str = "1;2;3;4;\n"
# format and assign to newstr
newstr = str[:str.rfind(';') + 1 ].strip(';') + str[str.rfind(';') + 1:] 
```

# php - 使用 Facebook SDK for PHP 发布操作时出现问题

> ID：12557798
> 
> 赞同：2
> 
> 时间：2012-09-24T01:28:27.173
> 
> 标签：php, facebook, facebook-graph-api, facebook-opengraph, publishing

我已将以下代码添加到“正文”部分：

```
<?php
  require "php-sdk/facebook.php";
  $facebook = new Facebook(array(
    'appId'=>'xxxxxxxxx',
    'secret'=>'xxxxxxxxxxxxxxxxx',
    'cookie'=>true
  ));
  if(!$facebook->getUser()) {
    $url = $facebook->getLoginUrl(array('scope'=>'publish_actions'));
    echo "<script> top.location=\"".$url."\"; </script>";
    exit(0);
  }
  $params = array('photo'=>'' . site_url( $this->uri->uri_string() ) . '',
      'access_token'=>$facebook->getAccessToken());
  $out = $facebook->api('/me/marcellusmusic:love','post',$params);
  print_r($out);
?> 
```

我收到以下错误：

```
Uncaught OAuthException:
  Unknown path components:
    /app_marcellusmusic:love thrown in /home/content/88/4739388/html/php-sdk/base_facebook.php on line 1238' 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T17:11:29.660

什么是**marcellusmusic:love**？

也许你应该像这样使用它：

```
<?php
  require "php-sdk/facebook.php";
  $facebook = new Facebook(array(
    'appId'=>'xxxxxxxxx',
    'secret'=>'xxxxxxxxxxxxxxxxx',
    'cookie'=>true
  ));
  if(!$facebook->getUser()) {
    $url = $facebook->getLoginUrl(array('scope'=>'publish_actions'));
    echo "<script> top.location=\"".$url."\"; </script>";
    exit(0);
  }
  $params = array('photo'=>'' . site_url( $this->uri->uri_string() ) . '',
      'access_token'=>$facebook->getAccessToken());
  $out = $facebook->api('/me/feed','post',$params);
  print_r($out);
?> 
```

我只更改了api路径。

# mapreduce - CouchDB stale=update_after 的表现如何？

> ID：12557801
> 
> 赞同：7
> 
> 时间：2012-09-24T01:28:35.940
> 
> 标签：mapreduce, couchdb

我很好奇`stale=update_after`CouchDB 视图 API 的功能是如何工作的。

我可以[在这里](http://wiki.apache.org/couchdb/HTTP_view_API#Querying_Options)看到它返回过时的结果，然后更新视图：

> 如果设置了 stale=ok，CouchDB 不会刷新视图，即使它是陈旧的，好处是改进了查询延迟。如果设置了 stale=update_after，CouchDB 将在返回过时的结果后更新视图。update_after 是在 1.1.0 版中添加的。

假设我已经插入了一些大量的文档——足以需要几分钟来更新视图索引——然后我快速连续地查询视图两次`stale=update_after`。第一个查询将很快返回；这就是重点`update_after`。

我的问题是，第二个查询也会很快返回陈旧的结果，还是会等待视图完成更新？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T08:35:58.930

第二个查询也返回过时的结果。它使用查询到达服务器时可用的部分结果。如果您只是添加文档，那很好。

但是如果您修改了视图，第一个查询将返回第一个查询的结果并触发视图的完全重建。所以第二个查询可能不会提供任何结果或只提供很少的行。

所以简短的回答：在您的情况下，两个查询都会快速返回，第二个查询可能会给出与第一个查询相同的结果，可能还有一些额外的行。

希望我能帮上忙！

你的，伯恩哈德

# php - PHP数组写入错误

> ID：12557802
> 
> 赞同：0
> 
> 时间：2012-09-24T01:28:54.050
> 
> 标签：php

我正在尝试为网站编写一个非常简单的 php 投票系统。基本上，投票记录在一个有 3 行的文本文件中。每行只是一个数字。没有任何投票的投票文件如下所示：

```
0
0
0 
```

这是我正在使用的 php：

```
$file = "votes.txt";
$votes = file($file); 
$votes[0] = intval($votes[0]) + 1;
$voteWrite = strval($votes[0]) . "\n" . strval($votes[1]) . "\n" . strval($votes[2]);
file_put_contents($file, $voteWrite); 
```

所以数组保存了文本文件的每一行，如果这是投票给第一个选项的代码，那一行的值加一，然后整个数组在连接成一个字符串后写回文件，保留数组的行。理想情况下，文本文件现在应该是：

```
1
0
0 
```

但它改为：

```
10
0 
```

有人可以告诉我这是为什么吗？php 真的不想和我一起工作......谢谢。

**编辑：**

我真的不明白这个 file() 东西......这是我设置的一个测试：

```
$file = "votes.txt";
$votes = file($file); 
$option1 = $votes[0];
$option2 = $votes[1];
$option3 = $votes[2]; 
```

其次，在 JavaScript 中：

```
alert(<?php echo $option1; ?>);
alert(<?php echo $option2; ?>);
alert(<?php echo $option3; ?>); 
```

文本文件在 3 个单独的行上读取 28、3 和 49。警报返回“28”、“450”和“未定义”。我勒个去？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T02:39:38.930

这样的事情可能会有所帮助：

```
// Define the whole path of where the file is
$fileName = '/var/home/votes/votes.txt';

// Check if the file exists - if not create it
if (!file_exists($fileName))
{
    $data = array('0', '0', '0');
    $line = implode("\n", $data);
    file_put_contents($line, $fileName);
}

// The file exists so read it
$votes = file($fileName);

// What happens if the file does not return 3 lines?
$vote_one   = isset($votes[0]) ? intval($votes[0]) : 0;
$vote_two   = isset($votes[1]) ? intval($votes[1]) : 0;
$vote_three = isset($votes[2]) ? intval($votes[2]) : 0;

$vote_one++;

$line = "{$vote_one}\n{$vote_two}\n{$vote_three}";
file_put_contents($line, $fileName); 
```

除了删除 str_val 并进行一些错误检查之外，我没有做太多事情。试试看，它可能会更好。

如果您选择与此不同的存储方法，可能会好很多。稍微改变格式将为未来提供更多的灵活性，但这个决定取决于你，它取决于你的约束是什么。

使用[json_encode](http://php.net/manual/en/function.json-encode.php)和[json_decode 之](http://php.net/manual/en/function.json-encode.php)类的东西，您甚至可以在文件中存储结构化数据并像以前一样检索它，并且它是 UTF8 安全的。

因此，如果您选择采用该路线，您的代码将变为：

```
// Define the whole path of where the file is
$fileName = '/var/home/votes/votes.txt';

// Check if the file exists - if not create it
if (!file_exists($fileName))
{
    $data = array('0', '0', '0');
    $line = json_encode($data);
    file_put_contents($line, $fileName);
}

// The file exists so read it
$line = file_get_contents($fileName);
$data = json_decode($line, TRUE);

$data[0] = intval($data[0]) + 1;

$line = json_encode($data);
file_put_contents($line, $fileName); 
```

json_decode 需要 TRUE 作为第二个参数，以便在解码数据时创建关联数组。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T04:05:43.023

有什么理由不能将信息存储为序列化数组？如果没有，您可能需要考虑此解决方案：

```
$file = "votes.txt";
$votes = file_get_contents($file); 
$votes = $votes ? unserialize($votes) : array(0,0,0);

$votes[0] += 1;

file_put_contents($file, serialize($votes)); 
```

如果您以其他语言或出于其他目的重用此文件，我认为 JSON 建议是一个很好的建议，或者甚至只是像 CSV 一样用逗号分隔存储值。

**至于为什么你的例子不起作用**：我不完全确定。零和行尾的解释有时可能很古怪。我想知道零值是否会在某个地方抛出 PHP，可能将一行解释为空？您可能想尝试一个`votes.txt`如下所示的起始文件：

```
1     
1
1 
```

看看它是否仍然如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:03:34.087

好的，奇怪的数字是由于没有在数组值周围使用 intval() 并使用 @file_put_contents 而不是 file_put_contents ......但是我无法走这条路，我想得还不够远提前，PHP 将无法满足我的需求。

# c# - 如何在 C# 中通过字符串调用构造函数（即通过反射）？

> ID：12557807
> 
> 赞同：3
> 
> 时间：2012-09-24T01:29:35.320
> 
> 标签：c#, wpf, reflection

我使用 Chart 类 WPFToolKit，我想通过字符串调用构造函数来缩短下面的代码

```
switch (node.Attributes["type"].Value)
{
    case "ColumnSeries":
        ans = new ColumnSeries();
        break;
    case "PieSeries":
        ans = new PieSeries();
        break;
    case "AreaSeries":
        ans = new AreaSeries();
        break;
    case "BarSeries":
        ans = new BarSeries();
        break;
    case "LineSeries":
        ans = new LineSeries();
        break;
} 
```

搜索后我找到以下代码：

```
Type type = Type.GetType(node.Attributes["type"].Value);
Console.WriteLine(type == null);
ConstructorInfo ctor = type.GetConstructor(new Type[] { });
object instance = ctor.Invoke(new object[]{}); 
```

但奇怪的是，类型总是空的，我不知道为什么。谁能告诉我？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T01:36:24.643

如果你的类有一个公共的默认构造函数，你可以使用`Activator.CreateInstance(Type.GetType("your type"))`. 但请确保您给它提供完整的类型名称（使用“System.Int64”之类的命名空间）。

参考：http: [//msdn.microsoft.com/en-us/library/wccyzw83.aspx](http://msdn.microsoft.com/en-us/library/wccyzw83.aspx)

更新：

如果该类型在另一个程序集中，请参阅[此 SO 问题](https://stackoverflow.com/questions/2233516/gettype-on-a-class-in-a-referenced-assembly-fails)以了解如何获取该类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T01:36:56.840

`Type.GetType`需要一个程序集限定名称：

这是有关它的文档：“要获取的类型的程序集限定名称。如果该类型在当前执行的程序集中或在 Mscorlib.dll 中，则提供由其命名空间限定的类型名称就足够了。”

这包括名称空间和类型的程序集。例如，字符串类的程序集限定名称是这样的：

“System.String，mscorlib，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089”

（我得到了`Console.WriteLine(typeof(string).AssemblyQualifiedName);`）

# android - 如何将“setOnEditorActionListener”设置为 ActionBarSherlock 中的 EditText？

> ID：12557808
> 
> 赞同：3
> 
> 时间：2012-09-24T01:29:36.483
> 
> 标签：android, actionbarsherlock

我已使用此代码将可折叠文件放置`View (EditText)`在`ActionBarSherlock`：

```
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.activity_main, menu);

    //Used to put dark icons on light action bar
    boolean isLight = false;

    menu.add("Search")
        .setIcon(isLight ? R.drawable.ic_search_inverse : R.drawable.ic_search)
        .setActionView(R.layout.collapsible_edittext)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);
    return true;
} 
```

当我尝试设置`setOnEditorActionListener`视图（通过其 id）时，应用程序崩溃：

```
EditText editText = (EditText) findViewById(R.id.search);

editText.setOnEditorActionListener(new OnEditorActionListener() {
    @Override
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {

        if (actionId == EditorInfo.IME_ACTION_SEARCH) {
            performSearch(v.getText().toString(), 3);
            return true;
        }
        return false;
    }
}); 
```

当用户按下键盘上的“搜索”键时，我需要进入`SearchField`并`ActionBar`执行搜索，但我不知道如何将其绑定`setOnEditorActionListener`到视图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T02:34:35.150

我假设这`R.id.search`是在你的`R.layout.collapsible_edittext`布局内？你从哪里打电话`findViewById()`？例如，您是在调用它`onCreate()`还是`onResume()`？您确定此时菜单已创建吗？

我建议将其包含在`onCreateOptionsMenu()`. 像这样的东西可能会起作用：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.activity_main, menu);
    boolean isLight = false;
    int menuItemId = 
        menu.add("Search")
            .setIcon(isLight ? R.drawable.ic_search_inverse : R.drawable.ic_search)
            .setActionView(R.layout.collapsible_edittext)
            .setShowAsActionFlags(MenuItem.SHOW_AS_ACTION_ALWAYS |
                MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW)
            .getItemId();
    EditText editText =
        (EditText) menu.findItem(menuItemId).getActionView().findViewById(R.id.search);
    editText.setOnEditorActionListener(...);
} 
```

另一种选择是在调用`MenuItem.setActionView(actionView)`.

（顺便说一句，如果您希望人们确定崩溃的原因，包含异常和堆栈跟踪会很有帮助。）

# php - 使用 phpMailer 将电子邮件发送到数据库中的多个收件人，使用复选框到选定的电子邮件地址

> ID：12557816
> 
> 赞同：3
> 
> 时间：2012-09-24T01:30:22.593
> 
> 标签：php, mysql, checkbox, phpmailer

我目前正在开发一个 php mysql 基础系统，该系统将在功能上使用复选框从数据库向多个收件人发送电子邮件。

如何使用检查所有功能向这些收件人发送电子邮件？

这是我的 phpMailer 代码，工作正常

```
<?php
require("class.phpmailer.php");
include("class.smtp.php");
$mailer = new PHPMailer();
$mailer->IsSMTP();
$mailer->Host = 'ssl://smtp.gmail.com:465';
$mailer->SMTPAuth = TRUE;
$mailer->Username = 'myemail@gmail.com';
$mailer->Password = 'mypassword';
$mailer->From = 'myemail@gmail.com';
$mailer->FromName = 'Admin';
$mailer->Body = 'TEST EMAIL';
$mailer->Subject = 'This is the subject of the email';
$mailer->AddAddress('myrecipient@yahoo.com');
if(!$mailer->Send())
{
echo "Message was not sent<br/ >";
echo "Mailer Error: " . $mailer->ErrorInfo;
}
else
{
 echo "Message has been sent";
}
?> 
```

我目前在系统中使用的另一个示例代码，用于从具有复选框功能的数据库中删除用户：

```
<?php
/*Check Box Commands*/
$id=$row_notification['user_id'];

if(isset($_POST['Delete'])) {
$checkbox = $_POST['checkbox'];
mysql_select_db($database_connection_ched, $connection_ched);
$id=$row_notification['user_id'];

for($i=0;$i<count($checkbox);$i++)
        {
            $delete = "DELETE FROM tb_user WHERE user_id=$checkbox[$i]";
            mysql_query($delete,$connection_ched);
        }
$result2 = mysql_query($delete);

    if($result2)
    {
    echo "<script language='javascript'>alert ('Successfully Deleted');</script>";
    echo "<meta http-equiv=\"refresh\" content=\"0;URL=notification.php?\">";   }
}
/*End of Checkbox Commands*/
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T02:34:10.063

您可以使用那里的删除代码中的一些逻辑，但您也可以通过调用 db 来获取您的信息来改进它：

```
<?php
require("class.phpmailer.php");
include("class.smtp.php");
$mailer = new PHPMailer();
$mailer->IsSMTP();
$mailer->Host = 'ssl://smtp.gmail.com:465';
$mailer->SMTPAuth = TRUE;
$mailer->Username = 'myemail@gmail.com';
$mailer->Password = 'mypassword';
$mailer->From = 'myemail@gmail.com';
$mailer->FromName = 'Admin';
$mailer->Body = 'TEST EMAIL';
$mailer->Subject = 'This is the subject of the email';

// get checkbox ids posted to us
$checkbox_ids = $_POST["checkbox"];

// get email addresses from db based on checkboxes posted to us
$query = "select email from tb_user where user_id in(".join(",",$checkbox_ids).")";

// connect to db and run query
mysql_select_db($database_connection_ched, $connection_ched);
$result = mysql_query($query);
while( $data = mysql_fetch_assoc($result) )
{
    // make SURE we are not sending this to each and every recipient incrementally.
    // alternately, you can use $mailer->ClearAllRecipients(); <-- this will clear cc and bcc as well
    $mailer->ClearAddresses();
    // send it to THIS user...
    $mailer->AddAddress($data["email"]);

    print ($mailer->Send()) ? "Message sent to: " : "Message <b>not</b> sent to: ";
    print $data["email"]."<br />\n";
}

?> 
```

# javascript - 如何创建像 IBM 一样的滑动菜单

> ID：12557821
> 
> 赞同：-4
> 
> 时间：2012-09-24T01:31:11.867
> 
> 标签：javascript, jquery, css, menu

我正在为一个项目寻找类似 IBM 的滑动菜单。当我们的菜单项可能分布在不同的类别时，我发现这是一种最佳方式。任何 css 或 javascript 或 jquery 菜单示例或片段都会有所帮助。谢谢约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T02:36:24.037

你试过吗？也许喜欢[这个](http://www.script-tutorials.com/css3-multilevel-menu-with-transition-and-animation/)或在这个[博客](http://www.treeshoots.com/)上搜索 如果你了解 css 和 jquery，我认为这很容易做到，因为你有基本的可能你必须学习一些技巧来使它 99% 相同，干杯 :))

# excel - 为什么在循环中为日期添加时间在 vba 中不起作用？

> ID：12557826
> 
> 赞同：0
> 
> 时间：2012-09-24T01:32:10.780
> 
> 标签：excel, vba

我试图做以下事情：

```
startDate = Date
endDate = DateAdd("yyyy", -1, startDate)

currentDate = startDate
Do While DateDiff("d", endDate, currentDate) <> 0
    With ActiveSheet.Range("A1")
        .Offset(i, 0).Value = currentDate
    End With
    currentDate = DateAdd("d", -1, currentDate)
    i = i + 1
Loop 
```

从 startDate 循环到 endDate 并输出其间的每个日期。在第一次迭代之后 currentDate 等于最小日期 (1899)。我知道还有其他方法可以做到这一点，而且我现在有一种可行的方法，但是为什么会失败？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T02:34:51.910

你的代码对我来说很好用

Yoo 实际上可以通过以下任一方式避免循环

*   将工作表函数添加到感兴趣的时间跨度
*   将函数转储到变量数组直接到工作表（如下所示）

**`code`**

```
Sub Test2()
Dim x
Dim dtStart As Date
Dim lngStart As Long
'test for leap year
lngStart = 365
If Year(Now()) Mod 4 = 0 Then
If Year(Now()) Mod 25 = 0 Then lngStart = lngStart + 1
End If

dtStart = Date
x = Application.Evaluate("NOW()-row(1:" & lngStart & ")+1")
With [a1].Resize(UBound(x, 1), 1)
.Value = x
.NumberFormat = "d/mm/yyyy;@"
End With
End Sub 
```

# wordpress - wordpress 中突出显示的多个菜单项

> ID：12557832
> 
> 赞同：1
> 
> 时间：2012-09-24T01:32:34.557
> 
> 标签：wordpress, menu, navigation, categories

我已经在互联网上搜索了几个小时并找到了与我类似的问题，但都没有得到答案，所以我来这里寻求支持。

我正在使用 Wordpress 作为我网站的 CMS。对于我的导航菜单，我使用的是 wordpress 内置的导航菜单功能。您向其中添加类别或页面等，它会生成一个列表，其中包含您可以设置样式的某些类 - 例如“当前菜单项”。

我的问题出在这里：我的菜单中有几个类别，有些帖子必须分配给多个类别。

例如，如果一个帖子仅属于 A 类，那么当您在该帖子的页面上时，A 类将在菜单中突出显示。

如果帖子在类别 A 和类别 B 中，那么当您在包含该帖子的页面上时，类别 A 和类别 B 都会突出显示。

我想要的是只突出显示一个菜单项，即使帖子属于多个类别。

有人知道怎么做这个吗？非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T02:57:50.160

也许您可以使用`nth-of-type`CSS3 选择器对其进行样式设置。

```
.current-menu-item:nth-of-type(1) {
    background:#ffff00;
    /* Highlight styles */
} 
```

这些样式将仅针对 .current-menu-item 的第一次出现。同样，您可以选择使用 等来定位第二个`nth-of-type(2)`。

# php - PHP If 语句不起作用

> ID：12557834
> 
> 赞同：-2
> 
> 时间：2012-09-24T01:32:40.623
> 
> 标签：php, if-statement

我曾尝试将其用作 if 语句，但它不起作用。它说不正确的传球和错误的东西。怎么了？

```
$status = $_POST['status'];
$server = $_POST['server'];
$room = $_POST['room'];
$password = $_POST['password'];
$submit = $_POST['submit'];
if ($submit) {
  if ($server && $status && $room && $password) {
    if ($password == "o") {
      echo "Done";
    } else {
      echo "all fields";
    }
  } else {
  }
  echo "incorrect pass";
} else {
  echo "submit";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T01:35:06.670

看到你想要做什么有点困难。

```
} else {

}
echo "incorrect pass"; 
```

那应该*在*大括号内。这应该强调正确的代码格式和缩进的重要性。

我认为它也应该与另一个 else 块一起切换，如下所示：

```
if ($server && $status && $room && $password) {
    if ($password == "o") {
        echo "Done";
    } else {
        echo "incorrect pass";
    }
} else {
    echo "all fields";
} 
```

另一件事，我总是`isset()`用来检查这些`$_POST`值是否实际上已设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T01:36:29.307

这不能是有效代码，您`}`的 s 多于`{`s。

假设有一些关于该代码的条件导致大括号不匹配，您的

```
echo "incorrect pass"; 
```

发生**在**'if ($submit) { `condition, and therefor will run *regardless* of the value of`$submit` 的右大括号之后。

# multithreading - 使用 QTtimer 调度线程？

> ID：12557835
> 
> 赞同：2
> 
> 时间：2012-09-24T01:33:17.470
> 
> 标签：multithreading, qt, time, thread-safety

我正在处理一个扩展的著名生产者-消费者线程问题（作为家庭作业）。我有一个共享队列作为“我的缓冲区”，生产者需要每秒产生一个“元素”。

我正在使用（我的第一次......）QT，我想要一个计时器，以便生产者每秒都会生成元素。

我不明白 QTimer 库...有人可以告诉我我必须为计时器使用哪些库/函数吗？只是 QTimer 似乎是用于 GUI...如果 Qtimer 是我必须使用的，那么如何使用？

也许这是一个愚蠢的问题，但是这件小事占用了我太多时间……而且我找不到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T03:27:54.883

您只需要使用 Qtimer 每秒发出一个信号。然后将一个插槽连接到该信号，您可以在其中启动一个线程，但您必须跨线程管理共享资源（“我的缓冲区”）。

`QTimer timer=new QTimer(); connect(timer,SIGNAL(timeout()),this,SLOT(On_Timeout));
timer->start(1000);`

其中 On_Timeout 每秒执行一次。

这是Qtimer的一些基本教程。 [http://www.youtube.com/watch?v=pHc7siV2Ads](http://www.youtube.com/watch?v=pHc7siV2Ads)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T01:47:59.993

您只需要确保 QEventLoop 在每个需要工作的线程中运行（使用 QObject 的）。

您将拥有一个运行`QApplication.exec()`.

然后你创建另一个线程（做并行工作）你在那个运行的线程中有 QEventLoop。你通常会确保 QObject（在这个额外的线程中工作）有这个额外的线程作为他们的“亲和线程”。如果您从额外线程中创建和设置 QObject，则新 QObject 的关联线程将是当前线程。

除此之外，您使用 QueuedConnection 在线程之间传递信号/插槽。

我敢肯定，如果您搜索，周围有很多示例 QTimer 代码博客条目。

# java - 分页查询/迭代器配方

> ID：12557837
> 
> 赞同：6
> 
> 时间：2012-09-24T01:33:50.557
> 
> 标签：java, database, pagination

我经常看到这种模式。

在服务器上：

```
// Get a bounded number of results, along with a resume token to use 
// for the next call. Successive calls yield a "weakly consistent" view of 
// the underlying set that may or may not reflect concurrent updates.
public<T> String getObjects(
        int maxObjects, String resumeToken, List<T> objectsToReturn); 
```

在客户端：

```
// An iterator wrapping repeated calls to getObjects(bufferSize, ...)
public<T> Iterator<T> getIterator(int bufferSize); 
```

大多数地方都推出了这两种方法的自己的版本，而且实现起来非常困难。有很多边缘案例错误。

这些查询是否有规范的配方或库？

（您可以对服务器端存储进行一些简化假设，例如 T 具有自然排序）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-11-05T19:31:11.967

这是对我有用的东西。它还使用来自 google-guava 库的 AbstractIterator，但利用 Java8 Stream 来简化实现。它返回类型为 T 的元素的迭代器。

```
Iterator<List<T>> pagingIterator = new AbstractIterator<List<T>>() {
    private String resumeToken;
    private boolean endOfData;

    @Override
    protected List<T> computeNext() {
        if (endOfData) {
            return endOfData();
        }

        List<T> rows = executeQuery(resumeToken, PAGE_SIZE);

        if (rows.isEmpty()) {
            return endOfData();
        } else if (rows.size() < PAGE_SIZE) {
            endOfData = true;
        } else {
            resumeToken = getResumeToken(rows.get(PAGE_SIZE - 1));
        }

        return rows;
    }
};

// flatten Iterator of lists to a stream of single elements
Stream<T> stream = StreamSupport.stream(Spliterators.spliteratorUnknownSize(pagingIterator, 0), false)
    .flatMap(List::stream);

// convert stream to Iterator<T>
return stream.iterator(); 
```

也可以通过以下方式使用方法引用返回 Iterable：

```
// convert stream to Iterable<T>
return stream::iterator; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:41:02.763

这是一个使用`AbstractIterator`google-guava 库和 spring-jdbc 来实际查询数据库的方法：

```
public Iterable<T> queryInBatches(
        final String query,
        final Map<String, Integer> paramMap,
        final int pageSize, final Class<T> elementType) {
    return new Iterable<T>() {
        @Override
        public Iterator<T> iterator() {
            final Iterator<List<T>> resultIter = 
                    queryResultIterator(query, paramMap, pageSize, elementType);

            return new AbstractIterator<T>() {
                private Iterator<T> rowSet;

                @Override
                protected T computeNext() {
                    if (rowSet == null) {
                        if (resultIter.hasNext()) {
                            rowSet = resultIter.next().iterator();
                        } else {
                            return endOfData();
                        }
                    }

                    if (rowSet.hasNext()) {
                        return rowSet.next();
                    } else {
                        rowSet = null;
                        return computeNext();
                    }
                }};
        }};
}

private AbstractIterator<List<T>> queryResultIterator(
        final String query, final Map<String, Integer> paramMap, 
        final int pageSize, final Class<T> elementType) {
    return new AbstractIterator<List<T>>() {
        private int page = 0;

        @Override
        protected List<T> computeNext() {
            String sql = String.format(
                    "%s limit %s offset %s", query, pageSize, page++ * pageSize);
            List<T> results = jdbc().queryForList(sql, paramMap, elementType);
            if (!results.isEmpty()) {
                return results;
            } else {
                return endOfData();
            }
        }};
} 
```

`AbstractIterator`隐藏了涉及编写自己的`Iterator`. 您只需要实现`computeNext`在迭代器中返回下一个值或调用`endOfData`以指示迭代器中没有更多值的方法。

# html - 表格中带有底部边框的图像

> ID：12557841
> 
> 赞同：0
> 
> 时间：2012-09-24T01:34:19.623
> 
> 标签：html, wordpress, image

我正在为我志愿服务的教堂使用 Wordpress 主题，并将其构建在子文件夹 (http://www.highlandcc.org/new) 中。这个网站还有很多地方仍然很粗糙，但现在......

我有两个问题：

1.  每个特色图像右侧的图标都在底部填充了空格，但我似乎找不到如何删除它。我试过`cellpadding="0"` `cellspacing="0"`了`border-collapse: collapse`……都无济于事。

2.  这是一个构建器主题，每个部分都是一个模块。我在所有模块周围都获得了额外的填充/边距。“新到高地”部分应与图像特征部分齐平。

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:37:58.453

将 CSS 类添加到小部件中的“a img”并写入：

```
.yourclass{
  margin: -7px 0 0 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:16:34.710

图像之间有一个空格，因为默认情况下它们是 inline-block。

在 CSS 中有一条规则说：

```
.widget *:last-child {
    margin-bottom: 0;
}
.widget *:first-child {
    margin-top: 0;
} 
```

为了使您的利润发挥作用，请制作您的图像`display: block;`

```
.textwidget img {
   display: block;
} 
```

# javascript - 如何在两个asp.net网站上使用一个asp.net页面共享

> ID：12557846
> 
> 赞同：0
> 
> 时间：2012-09-24T01:35:05.487
> 
> 标签：javascript, asp.net, css, redirect, popup

我有两个 asp.net 网站 A 和 B，它们部署在具有不同域的两个不同服务器上，但是，它们与同一个业务相关联，它们都包含相互定向的链接，并且它们使用 sessionId 来识别用户。

在站点 A，我有一个帮助页面和几个帮助表单页面，当用户单击链接时，帮助页面将作为嵌入页面弹出。目前我想在站点B上弹出相同的帮助页面，但是经过测试，我发现了一些问题。

1.  站点 B 上缺少 css，没有页面看起来很奇怪
2.  站点 B 上也缺少 js，因此大多数帮助功能停止工作

我想知道是否有一种聪明的方法可以在不同的 asp.net 站点上共享帮助页面，或者有更好的方法在站点 B 上创建重复页面。

谢谢

# c++ - 构造一个包含指针的类

> ID：12557847
> 
> 赞同：2
> 
> 时间：2012-09-24T01:35:23.943
> 
> 标签：c++, class, pointers, constructor

我有一个存储 16 个浮点数组的类。我使用浮点指针将它们存储为数组，因此我必须使用构造函数中的 new 运算符初始化数组。我的问题是，将 16 个浮点数的数组直接定义为类的一部分是否更有效/更好，还是我应该继续让类通过指针存储数据并在构造函数中调用 new？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T01:45:49.080

在内存管理方面没有通用的“更好的做法”，因此您应该为您的特定设计做正确的事情。

如果您总是精确分配 16 个浮点数，则将数组嵌入类中将减少对动态分配器的调用次数。当对象存储在自动存储器中时，这可能会有所帮助，但在某些情况下它可能会造成伤害。例如，如果您在自动存储中创建此类的大型数组，则嵌入数组会增加堆栈溢出的机会。

最好的方法是分析您的内存使用情况和时间，并查看分配这些数组是否会导致显着减慢，或显着导致内存碎片。如果当前方案没有给您带来任何麻烦，则没有理由更换它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T01:59:40.843

如果你知道你正好需要 16 个浮点数并且这个数字不太可能改变，那么你应该使用这个：

```
struct MyClass
{
    ....
    float       myData[16];
}; 
```

使用这种简单的设计并没有错。如果数组的大小因一种情况而异，那么最好使用以下内容：

```
template <int _len_data>
struct MyClass
{
    ....
    float       myData[_len_data];
}; 
```

之后，您可以定义变量，例如：

```
MyClass<16> a1;
MyClass<64> a2; 
```

# javascript - Javascript从另一个函数中设置变量？

> ID：12557849
> 
> 赞同：1
> 
> 时间：2012-09-24T01:35:47.420
> 
> 标签：javascript

假设我在一个名为“test”的函数中有一个名为“true”的变量。然后我在一个完全不同的脚本标签中有另一个函数，我想使用我的新函数更改“true”。我怎样才能做到这一点？谢谢。

```
<script type="text/javascript">
var hello="no";
if(hello=="yes"){ 
  window.onbeforeunload = confirmExit;
  function confirmExit()
  {
    return "Message";
  }
}
</script>

<script type="text/javascript">
function show(id) {
     $('#' + id).show();
     var hello="yes";

}
</script> 
```

它似乎没有工作...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T01:41:24.020

在你的函数中，不要使用`var`关键字。这样做`hello`会在函数范围内声明一个不同的变量。

```
// Earlier, you defined the variable at a higher scope here:
var hello="no";
// The function has *not* been called yet, so hello will never equal "yes" when this initially runs.
if(hello=="yes"){ 
  window.onbeforeunload = confirmExit;
  function confirmExit()
  {
    return "Message";
  }
}

function show(id) {
  $('#' + id).show();
  // No var here!
  // the variable was defined at a higher (window) scope already with the var keyword.
  hello="yes";
} 
```

### 更新：

调用时你的逻辑有问题`onbeforeunload`。你永远不会绑定事件除非`hello == "yes"`，它在运行时永远不会这样做。相反，检查`confirmExit()`函数中的变量内容：

```
window.onbeforeunload = confirmExit;
function confirmExit()
{
  if (hello == "yes") {
    return "Message";
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T01:58:43.590

```
// this will work in your case 
var hello="no";
if(hello=="yes"){
  window.onbeforeunload = confirmExit;
  function confirmExit()
  {
    return "Message";
  }
}
function show(id) {
     $('#' + id).show();
     hello="yes";
}

// Just an small explation of how scope works in Javascript

var hello = "no"; // this has a global scope.
function showGlobal(){
alert(hello); // will alert 'no'
}

function showLocal(){
 var hello ="yes"; // hello is now a local variable. Scope is limited to the function.
 alert(hello); // will alert 'yes'. Scope is local  

}

function showLocalBlock(){

    if(condition == 'true'){
    hello = 'yes';
    }
alert(hello); // will alert yes.

}

// Closure

function ShowClosure(){
 var hello = "yes";
    function ShowInner(){
    alert(hello); // here the variable hello takes the value of the function in which it was defined.

    }  
} 
```

# file - MATLAB - 使用存储为字符串变量的文件名从文件加载数据

> ID：12557851
> 
> 赞同：1
> 
> 时间：2012-09-24T01:36:21.147
> 
> 标签：file, matlab

我需要从文件名为 enh0.dat、enh1.dat、enh2.dat、...的文件中加载数据，最多 128 次。所以我需要将文件名存储在字符串变量中并从文件中加载数据，文件名存储在字符串变量中，然后将加载的数据存储在指定的变量中以供以后绘制。但是 MATLAB`load`命令将数据加载到具有特定名称（包含数据的文件的名称）的变量中，这不允许我自动使用 plot 命令。

是否可以将我需要从中加载数据的文件的名称存储在字符串变量中？我还检查了这个 [MATLAB 新手：当文件名存储在字符串中时读取文件时出现问题](https://stackoverflow.com/questions/6484942/matlab-newbie-problem-reading-in-file-when-the-file-name-is-stored-in-a-string)，但它看起来对我不起作用。尝试绘制以下结果时出现此错误`textscan`：

> ？？？使用 ==> plot 时出错 从单元格转换为双精度是不可能的。

这是使用的代码：

```
indx = [1:128];
enh_file_cntr = 0;
enh_pre = 'enh';
gain_pre = 'gain';
[enh_file_cntr_str, errmsg1] = sprintf('%d', enh_file_cntr);
enh_file_name = strcat('enh', enh_file_cntr_str, '.dat');
[gain_file_cntr_str, errmsg1] = sprintf('%d', enh_file_cntr);
gain_file_name = strcat('enh', gain_file_cntr_str, '.dat');
fid_enh = fopen(enh_file_name, 'r');
fid_gain = fopen(gain_file_name, 'r');
enh_data = textscan(fid_enh, '%f', 128);
gain_data = textscan(fid_gain, '%f', 128);
subplot(2,3,1);
plot(indx, enh_data, 'b', indx, gain_data, 'r'); 
```

如果这可行，我将`enh_file_cntr`在`for`循环中增加 的值。如何修复上述代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T02:05:33.250

首先：该`plot`函数接受数值矩阵类型的输入。您正在尝试输入`textscan`作为元胞数组的函数的输出。在您的情况下，元胞数组的第一个元素**包含**一个数字矩阵，但该对象本身不是一个数字矩阵。要检索存储在单元格内的数字矩阵，请使用：

```
enh_data = enh_data{1}; 
```

在调用绘图函数之前。**注意：**访问元胞数组的元素时，请始终使用大括号，即`{}`. 访问数值矩阵的元素时，请使用正则括号，即`()`. 如果您有一个包含多个单元格的单元格数组，您可以使用`()`.

当然，元胞数组中的一个元胞本身可以包含一个元胞数组，但现在可能不用担心这个:-)

第二：确保关闭您打开的所有文件`fopen`。即，一旦您使用过`textscan`，然后使用 再次关闭文件`fclose(fid_enh)`。

第三，我不太确定我是否理解将文件名存储在字符串中的意思？`enh_file_name`您似乎在上面的代码片段中使用变量完全做到了这一点？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T04:02:21.123

听起来您也可以使用 load 命令来读取数据。

要解决创建变量名的问题，您需要做的就是使用 load 命令指定和输出变量。

我想你最初尝试过

```
load(enh_file_name) 
```

并发现创建的变量是变量 enh_file_name 中的文件名。

你只需要使用

```
enh_data = load(enh_file_name) 
```

这样做的好处是您不必处理单元格变量。

# c++ - C++ ostream 引用

> ID：12557857
> 
> 赞同：0
> 
> 时间：2012-09-24T01:36:58.277
> 
> 标签：c++, reference, ostream

为什么下面的第 4 行打印的是内存地址而不是第 2 行打印的原始字符串，我该如何更正？非常感谢。

```
std::stringstream os (std::stringstream::in | std::stringstream::out);
std::cout << result->studentId;
os << result->studentId;
std::cout << &os << std::endl; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T01:39:29.933

使用该`str()`函数获取底层字符串：

```
std::cout << os.str() << std::endl; 
```

为了将来参考，这里有一个关于[的参考](http://en.cppreference.com/w/cpp/io/basic_stringstream)`std::stringstream`，其中包含每个成员函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T02:05:53.513

删除`&`运算符

```
std::cout << os.str() << std::endl; 
```

# c# - INSERT 查询显示数据已插入，但实际上没有数据插入

> ID：12557860
> 
> 赞同：2
> 
> 时间：2012-09-24T01:37:08.557
> 
> 标签：c#, sql-server, query-parameters

我运行参数化`INSERT`查询，它返回 1（插入 1 行）。但是当我在 SSMSE 中查看表格时，我什么也看不到。下面代码中的 return 语句返回 1。

这是代码：

```
SqlCommand insertProject=new SqlCommand("Insert into tbl_project (id, project_name, project_desc, creator_user_id) VALUES('@id', '@project_name', '@project_desc', @creator_user_id)", conn);
insertProject.Parameters.AddWithValue("@id", id);
insertProject.Parameters.AddWithValue("@project_name", project_name);
insertProject.Parameters.AddWithValue("@project_desc", project_desc);
insertProject.Parameters.AddWithValue("@creator_user_id", creator_user_id);

return insertProject.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T01:38:40.383

参数名称不应该用单引号引起来。

```
SqlCommand insertProject = new SqlCommand("Insert into tbl_project 
                (id,project_name,project_desc,creator_user_id) 
          VALUES(@id,@project_name,@project_desc,@creator_user_id)",conn); 
```

# android - 我如何在android中实现以下布局

> ID：12557864
> 
> 赞同：2
> 
> 时间：2012-09-24T01:37:57.407
> 
> 标签：android, android-layout

我需要在这样的弹出窗口中实现地图

![在此处输入图像描述](../Images/6c3343b63337b1905fe994e288a45f8b.png)

到目前为止，我已经完成了以下工作：

1.  使用按钮创建一个主要活动。
2.  单击按钮后，我启动了另一个活动，它是 MapsActivity 的子类。
3.  由于地图只能在 MapActivity 中创建，因此我应用了 Android Dialog 主题以使
    Activity 看起来像一个对话框。

    但我仍然无法在按钮下正确定位活动。另外，我怎样才能有一个像结构一样的标注？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T02:09:33.517

use RelativeView. It will allow you to define size and make the position relative to right and upper border. you can also add paddings for the space in between.

# android - 在 webview 中覆盖 javascript 函数

> ID：12557872
> 
> 赞同：0
> 
> 时间：2012-09-24T01:38:51.010
> 
> 标签：android

我想将现有网站集成到我的 webview 中，但还要用我自己的版本覆盖该网站上存在的 javascript 函数？然后我可以使用 java-javascript 桥。我尝试过使用以下内容，但似乎只执行该功能

```
webView.setWebViewClient(new WebViewClient() {
  @Override
  public void onPageFinished(WebView view, String url) {
    super.onPageFinished(view, url);
    webView.loadUrl("javascript: (function myFunc() { "
        + "alert('overriden alert ha!');"
        + "})()");
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T02:24:53.367

你需要

1.  [抓取html页面源码](https://stackoverflow.com/questions/2423498/how-to-get-the-html-source-of-a-page-from-a-html-link-in-android)
2.  编辑它。（添加到您抓取的 html 源代码中，简单的方法：`replace("<head>","<head>"+"your code");`
3.  使用加载编辑的 HTML 字符串`webview.loadDataWithBaseURL("", string, "text/html", "utf-8", "");`

# c# - 无效操作错误

> ID：12557874
> 
> 赞同：0
> 
> 时间：2012-09-24T01:39:30.973
> 
> 标签：c#, windows-phone-7, invalidoperationexception

我正在`Invalid Operation Error`输入以下代码。

```
 int m = l_score.Min(); 
```

`l_score`列表在哪里`int`。为什么会发生这种情况？

**编辑：代码**

```
 List<int> l_origin = new List<int>();
 List<int> l_k = new List<int>();
 List<int> l_score = new List<int>();

 for (int i = 0; i < 9; i++)
        {
            if (box_matrix[i, 5] == 0 | box_matrix[i, 5] == 1 | box_matrix[i, 5] == 2)
            {

                for (int k = 1; k < 5; k++)
                {

                    if (box_matrix[i, k] == 0)
                    {
                        int scr = 9;
                        l_origin.Add(box_matrix[i, 0]);
                        l_k.Add(k);
                        scr = score_the_move(box_matrix[i,0],k);
                        l_score.Add(scr);

                    }
                }
            }
        }

        //find the best move
       int m = l_score.Min();
       int min_index =  l_score.IndexOf(m);
       machine_line(l_origin[min_index], l_k[min_index]);
       l_origin.Clear();
       l_k.Clear();
       l_score.Clear(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T01:41:55.010

您需要导入 System.Linq：

```
using Sytem.Linq; 
```

然后您的线路将起作用：

```
int m = l_score.Min(); 
```

我敢打赌你会看到这个错误：`InvalidOperationException (Sequence contains no elements)`。它发生在列表为`empty`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T01:59:08.470

我猜`l_score`是空的，这就是你得到那个例外的原因。查看异常消息以获取更多详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T02:01:53.350

如果调用该`.Min()`方法，当列表中没有元素时，会抛出无效操作异常。

反编译 IEnumerable 时发现这个：

```
<exception cref="T:System.InvalidOperationException"><paramref name="source"/> contains no elements.</exception> 
```

# iphone - ios 模拟器 6.0 中没有照片

> ID：12557890
> 
> 赞同：0
> 
> 时间：2012-09-24T01:43:20.360
> 
> 标签：iphone, ios

从 ios 5.1 升级到 6.0。Simulator 6.o 中没有 ImagePicker 的照片。我创建了 .../DCIM/100APPLE/.. 并在那里放了照片，但又没有出现在模拟器 6.0 中？

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T02:03:41.630

我注意到 iOS 6.0 模拟器的行为相同。如果您在模拟器中保存照片，则会`Media/DCIM/100APPLE`创建该目录。但随后通过文件系统手动添加新照片不会将它们添加到模拟器中的照片应用程序中。

目前，我们似乎被其他添加照片的方式所困扰。您可以将照片一张一张拖到模拟器中，该模拟器在 MobileSafari 中打开文件 URL。从那里，长按图像将允许您将图像添加到库中。

# image - 将 xckd 的 Click and Drag 中的图像图块组合成单个复合 .png 的最有效方法是什么？

> ID：12557891
> 
> 赞同：0
> 
> 时间：2012-09-24T01:43:55.447
> 
> 标签：image, image-processing, imagemagick, imagemagick-convert

我正在尝试使用 ImageMagick组合[Click and Drag中的所有图像图块。](http://xckd.com/1110/)处理需要相当长的时间。

更一般地说，如果我收集了想要组合（平铺）成单个图像的灰度 8 位 png 文件，那么最有效的设置是什么？

到目前为止，我想出的策略是

*   `convert`与`+append`和一起使用`-append`
*   使用 Q8（8 位颜色）版本

还有其他我应该考虑的png设置吗？也许我们未压缩的中间文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:10:49.267

尝试[蒙太奇](http://www.imagemagick.org/script/montage.php)。它允许您使用一个命令连接多个图像。

# parsing - 野牛报告转移减少了冲突，但我怎样才能找到它们？

> ID：12557896
> 
> 赞同：0
> 
> 时间：2012-09-24T01:44:47.113
> 
> 标签：parsing, bison, shift-reduce-conflict

我正在开发具有 OOP 语言大部分功能的野牛解析器，现在野牛抱怨存在一些移位/减少冲突。我有：

```
conflicts: 21 shift/reduce 
```

问题是它没有告诉我他们在哪里。有谁知道如何找到那里的冲突？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T06:11:05.133

如果您阅读有关[命令行选项](http://www.gnu.org/software/bison/manual/html_node/Bison-Options.html#Bison-Options)的手册页，您会注意到一个被调用`--report`，另一个被调用`--report-file`。这两个告诉 Bison 创建一个指定名称的报告文件，其中应包括有关冲突的更多信息。

# css - 如何垂直居中对齐未知高度的浮动元素？

> ID：12557897
> 
> 赞同：47
> 
> 时间：2012-09-24T01:45:03.570
> 
> 标签：css, css-float, vertical-alignment

我有一个（水平）居中的外部 div，其中包含两个未知宽度的元素：

```
<div style='width:800px; margin:0 auto'>
  <div style='float:left'>...</div>
  <div style='float:right'>...</div>
</div> 
```

默认情况下，两个浮动都是顶部对齐的，并且具有不同/未知和不同的高度。有没有办法让它们垂直居中？

我最终制作了外部 div

```
display: table 
```

和内部 div

```
display: table-cell;
vertical-align: middle;
text-align: left/right; 
```

但我只是好奇是否有办法用花车做到这一点。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-09-24T02:15:03.250

您不能直接执行此操作，因为[浮动](https://www.w3.org/TR/CSS21/visuren.html#floats)与顶部对齐：

> 如果有行框，则浮动框的外顶部与当前行框的顶部对齐。

确切的[规则](https://www.w3.org/TR/CSS21/visuren.html#float-rules)说（强调我的）：

> 4.  浮动框的[外部顶部](https://www.w3.org/TR/CSS21/box.html#outer-edge)不得高于其[包含块](https://www.w3.org/TR/CSS21/visuren.html#containing-block)的顶部。
> 5.  浮动框的外部[顶部](https://www.w3.org/TR/CSS21/box.html#outer-edge)不得高于源文档中早期元素生成的任何[块](https://www.w3.org/TR/CSS21/visuren.html#block-boxes)或[浮动框的外部顶部。](https://www.w3.org/TR/CSS21/visuren.html#floats)
> 6.  元素浮动框的[外部顶部](https://www.w3.org/TR/CSS21/box.html#outer-edge)不得高于包含源文档中较早元素生成的框的任何[行框的顶部。](https://www.w3.org/TR/CSS21/visuren.html#line-box)
> 
> 8.  **浮箱必须放置在尽可能高的位置。**

也就是说，您可以利用规则 #4：

*   将每个浮点数放置在建立新[块格式化上下文](https://www.w3.org/TR/CSS21/visuren.html#block-formatting)/BFC的[行内级](https://www.w3.org/TR/CSS21/visuren.html#inline-boxes)元素中，例如.`display: inline-block`
*   这些包装器将包含浮点数，因为它们建立了 BFC，并且因为它们是内联级的，所以它们将是一个相邻的。
*   用于[`vertical-align`](https://www.w3.org/TR/CSS21/visudet.html#propdef-vertical-align)垂直对齐这些包装。

请注意，内联块包装器之间可能会出现一些空间。请参阅[如何删除内联块元素之间的空格？](https://stackoverflow.com/q/5078239/1529630)要解决这个问题。

```
.float-left {
  float: left;
}

.float-right {
  float: right;
}

#main {
  border: 1px solid blue;
  margin: 0 auto;
  width: 500px;
}

/* Float wrappers */
#main > div {
  display: inline-block;
  vertical-align: middle;
  width: 50%;
}
```

```
<div id="main">
  <div>
    <div class="float-left">
      <p>AAA</p>
    </div>
  </div>
  <div>
    <div class="float-right">
      <p>BBB</p>
      <p>BBB</p>
    </div>
  </div>
</div>
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-01-01T12:46:58.820

另一种方法是使用-如果您有两个部分`flex`，它可以替代 a 。`float`一个（浮动）将具有自动大小，第二个将增长到占据整个容器。在您选择的交叉轴上`center`，瞧，您将获得浮动和居中元素的**效果**。

这是关于 flex 的漂亮备忘单：http: [//jonibologna.com/flexbox-cheatsheet/](http://jonibologna.com/flexbox-cheatsheet/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T01:49:55.063

不，这是表格单元格突然看起来是个好主意的时候。如果它是固定高度，您可以使用 line-height。

# css - 回显的 div id 可在 Safari 中使用，但不适用于 Firefox、Chrome 或 Opera

> ID：12557898
> 
> 赞同：0
> 
> 时间：2012-09-24T01:45:20.713
> 
> 标签：css, image, html, safari, echo

```
echo '<div id="header1"></div>';

#header1 {
    background: url(_images/header1.png);
    width: 100%;
    height: 240px; 
```

背景图像出现在 Safari 中，但没有出现在任何其他浏览器中。有谁知道这是为什么以及我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:21:49.703

From the above snippet i am just guessing that you have missed closing barcket `}` but i am not saying its a perfect answer hope so that you have missed to write here or it can be a cause

```
echo '<div id="header1"></div>';

#header1 {
background: url(_images/header1.png);
width: 100%;
height: 240px;
} 
```

# hide - Flex Mobile TabbedView 应用程序在状态下隐藏标签栏

> ID：12557907
> 
> 赞同：1
> 
> 时间：2012-09-24T01:46:49.483
> 
> 标签：hide, tabbar, states

我正在 Flash Builder 4.6 中构建一个选项卡式视图移动应用程序，并希望有一个登录屏幕。

我有 5 个选项卡，在第一个视图页面上我有 2 个状态。

一种状态用于登录，另一种状态用于实际选项卡本身。我可以制作这些，但想在标签栏处于登录状态时隐藏它。

我发现了一些可以通过单击按钮将其关闭的东西，但是在第一个视图页面（登录状态）中将其关闭怎么样。

我试过这个：

```
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:s="library://ns.adobe.com/flex/spark"
        textAlign="center" title="Daily Settings"
    creationComplete="view2_creationCompleteHandler(event)">
    ...
protected function view2_creationCompleteHandler(event:FlexEvent):void
            {
                // TODO Auto-generated method stub
                this.tabBarVisible = false;
            } 
```

但奇怪的是，它只会在某些时刻消失，而不是一直消失……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T05:50:41.193

在另一个线程上得到它（抱歉重复发布......猜编程让我发疯） [在登录状态flex builder中隐藏标签栏](https://stackoverflow.com/questions/12887969/hide-tabbar-in-login-state-flex-builder)

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:s="library://ns.adobe.com/flex/spark"
        currentState="login" tabBarVisible="{currentState!='login'}">
    <s:actionContent>
        <s:Button includeIn="login" label="login" click="currentState='planner'"/>
    </s:actionContent>
    <s:states>
        <s:State name="login"/>
        <s:State name="planner"/>
    </s:states>
</s:View> 
```

# perl - 难以将 Perl 脚本作为 Bash 别名运行

> ID：12557908
> 
> 赞同：2
> 
> 时间：2012-09-24T01:47:08.063
> 
> 标签：perl, apache, bash, alias

为了格式化我的 apache error_log 以便看起来更愉快，我编写了一个快速而肮脏的 perl 脚本。

```
tail -f /var/log/apache2/error_log | perl -ne 
  '($timeStamp, $error, $hostName, $message) = 
      /^\[([^\]]+)\] \[([^\]]+)\] (?:\[client ([^\]]+)\])?\s*(.*)$/i; # Parse log
   ($day, $month, $date, $time, $year) = 
      $timeStamp =~ m/(\S*) (\S*) (\S*) (\S*) (\S*)$/; # Extract the timestamp
   $message =~ s/, referer: (.*)$/\./;  # Strip the referer references
   $message =~ s/\\n/\n/g; # Replace literal new lines to expand object dumps
   print $time . " " . $date . " " . $month . " | " . $message ."\n";' 
```

我想将脚本添加到 Bash 别名中，以便可以从终端轻松调用它。

例如

```
alias te=tail -f /var/log/apache2/error_log | perl -ne '($timeStamp, $error, $hostName, $message) = /^\[([^\]]+)\] \[([^\]]+)\] (?:\[client ([^\]]+)\])?\s*(.*)$/i; ($day, $month, $date, $time, $year) = $timeStamp =~ m/(\S*) (\S*) (\S*) (\S*) (\S*)$/; $message =~ s/, referer: (.*)$/\./; $message =~ s/\\n/\n/g; print $time . " " . $date . " " . $month . " | " . $message ."\n";' 
```

显然，转义引号开始变得混乱。我还尝试将 perl 脚本放在它自己的文件中并作为别名运行，但我想避免为了可移植性而不得不在 .bash_profile 文件之外运行脚本。

如何将 perl 脚本用作 bash 别名/函数？或者我是从完全错误的方向来的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T01:49:44.550

您绝对应该使用函数而不是别名：

```
function te ()
{
    tail -f /var/log/apache2/error_log \
    | perl -ne \
       '($timeStamp, $error, $hostName, $message) = 
          /^\[([^\]]+)\] \[([^\]]+)\] (?:\[client ([^\]]+)\])?\s*(.*)$/i; # Parse log
        ($day, $month, $date, $time, $year) = 
          $timeStamp =~ m/(\S*) (\S*) (\S*) (\S*) (\S*)$/; # Extract the timestamp
        $message =~ s/, referer: (.*)$/\./;  # Strip the referer references
        $message =~ s/\\n/\n/g; # Replace literal new lines to expand object dumps
        print $time . " " . $date . " " . $month . " | " . $message ."\n";
       '
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T01:57:08.083

改变

```
alias te=tail -f /var/log/apache2/error_log | perl -ne '...' 
```

到

```
alias te='tail -f /var/log/apache2/error_log | perl -ne '\''...'\''' 
```

# iphone - 无法摆脱 xib 文件中的 Group Table View Background Color deprecated 警告

> ID：12557910
> 
> 赞同：3
> 
> 时间：2012-09-24T01:47:24.597
> 
> 标签：iphone, uitableview, xib, deprecated, ios6

我了解组表视图背景颜色在 ios 6.0 中已弃用。我的问题是我似乎无法摆脱 xib 文件中的这个警告。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T08:32:56.113

我也很难找到分配此颜色的分组表视图，因为我的故事板有点大。对我来说，这很有效：

*   编辑故事板或 XIB 文件作为源文件（右键单击故事板，作为源代码打开）
*   删除所有出现的`<color key="backgroundColor" cocoaTouchSystemColor="groupTableViewBackgroundColor"/>`

确保首先备份您的 XIB 故事板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T05:31:09.370

检查这个答案已经发布。 [ios 6.0 中不推荐使用组表视图背景颜色](https://stackoverflow.com/questions/12539861/group-table-view-background-color-is-deprecated-in-ios-6-0)

您不能将“Group Table View”颜色设置为背景，因此您需要选择一种新颜色作为背景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T22:32:33.163

当我遇到所有这些错误时，我必须解决的问题是，在选择清晰的背景时，我并没有在我的 XIB 文件中挑剔；我会选择我看到的第一张清晰的彩色图像。当我查看时，我有一堆标签和使用“组表视图背景颜色”作为视图背景颜色的东西。我只是将它们全部更改为“清除颜色”并且效果很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T19:07:02.780

我遇到了同样的问题，所以我在编辑器中打开了故事板 XML 文件。（关于警告，“Open As”->“Source Code”）我搜索了字符串“groupTableViewBackgroundColor”。不幸的是，并不是这个字符串的每个实例都是一个问题，因为 ios 6 仍然使用它作为表格视图的背景颜色。在换句话说，我忽略了这样的任何情况：

```
<tableView key="view"  ... >
    <rect key="frame" .../>
    <autoresizingMask .../>
    <color key="backgroundColor" cocoaTouchSystemColor="groupTableViewBackgroundColor"/> 
```

您在其他任何地方发现 groupTableViewBackgroundColor 都可能是一个问题，您可以从 XML 源文件中找出在情节提要上修复它的位置。

# database - 项目数据库升级使用ant升级数据库

> ID：12557913
> 
> 赞同：0
> 
> 时间：2012-09-24T01:47:49.417
> 
> 标签：database, ant

我目前正在开发两个使用 Ant 升级数据库的 Web 项目。每个 Web 项目都有自己的 build.properties 文件，用于使用 ant 升级数据库。显而易见，每个单独的 build.properties 文件都用于为两个特定服务器登录到两个不同的数据库。

如何设置 ANT_HOME 以用于两个项目的数据库升级？目前，当我想对第一个项目执行数据库升级时，我必须将 ANT_HOME 更改为指向第一个项目，然后在处理第二个项目时更改为第二个项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T06:24:49.937

ANT_HOME 变量用于指示您安装 ANT 的位置。您不需要重置变量来构建不同的项目，除非出于某种原因每个项目都需要不同版本的 ANT（不太可能）。

当您调用 ant 时，它通常会在本地目录中查找名为“build.xml”的构建文件。要在不同的项目上调用 ANT，请使用“-f”参数：

```
ant -f /path/to/project1/build.xml
ant -f /path/to/project2/build.xml 
```

默认情况下，每个项目都会查找与 build.xml 文件相关的其他文件。

# iphone - iOS 6 在使用 modalTransitionStyle = UIModalTransitionStyleFlipHorizo ntal 时绘制视图很慢

> ID：12557915
> 
> 赞同：1
> 
> 时间：2012-09-24T01:48:04.397
> 
> 标签：iphone, performance, ios6, iphone-4

我最近将我的 iPhone 4 升级到了 iOS 6。这样做后，我注意到我正在开发的其中一个应用程序在呈现模式对话框时不再按预期运行。

我正在使用 UIModalTransitionStyleFlipHorizo​​ntal。

问题是在动画期间我看到了我只能描述为视图的中间绘制状态。我暂时看到部分绘制的视图，然后最终绘制了整个视图。在 iOS 6 之前我从未经历过这种情况。

流程如下：

ViewController 决定是时候向用户展示一个模态对话框了：

```
 self.newController = [[NewViewController alloc] initWithNibName:@"PaginatedView" bundle:[NSBundle mainBundle]];
    self.newController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;

    [self presentModalViewController:self.newController animated:YES]; 
```

NewViewController 为页面初始化视图：

（从 NewViewController:initWithNibName:bundle 调用：）

```
NSUInteger pages = 2;
CGFloat cx = 0;

for (int i = 0; i < pages ; i++) {
    // Load the view from nib
    NSArray *nibObjects = [[NSBundle mainBundle] loadNibNamed:@"SomeView" owner:nil options:nil];
    SomeView*  someView = (SomeView*)[nibObjects objectAtIndex:0];
    [someView initializeWithData:[_objects objectAtIndex:i]];
    [someView setParentController:self];
    [someView setBackButtonTarget:self withSelector:@selector(backButtonClick:)];

    // Set the x origin for the view
    CGRect viewRect = someView.frame;
    viewRect.origin.x = ((self.scrollView.frame.size.width - viewRect.size.width) / 2) + cx;
    viewRect.origin.y = ((self.scrollView.frame.size.height - viewRect.size.height) / 2);
    someView.frame = viewRect;

    [self.scrollView addSubview:someView];
    cx += self.scrollView.frame.size.width;
}

self.pageControl.numberOfPages = pages;
[self.scrollView setContentSize:CGSizeMake(cx, [scrollView bounds].size.height)]; 
```

SomeView 对象是一个向用户显示表格的视图。播放动画时，我暂时看到表格及其标题为空，然后内容终于出现了。

将 modalTransitionStyle 切换为任何其他样式可以解决问题，但我想使用 UIModalTransitionStyleFlipHorizo​​ntal。

关于正在发生的事情以及如何解决它的任何想法？

另外，我在运行 iOS 6 的 iPhone 4S 上进行了尝试。没问题...看起来 iOS 6 让 iPhone 4 的体验很糟糕...

# c# - 将 CSV 加载到 MySQL 这是一个错误吗？- 找不到文件异常

> ID：12557916
> 
> 赞同：0
> 
> 时间：2012-09-24T01:48:23.190
> 
> 标签：c#, mysql

我正在尝试将 CSV 文件加载到 C# 中的 MySQL 数据库中，但我不断收到无法从结果集中读取的异常。我在 MySQL 工作台中清理了语法，以至于我可以将 CSV 文件加载到 MySQL 工作台的数据库中而没有错误。在我的程序中尝试它，我仍然得到异常。我正在使用的文件具有以下路径和文件名：

```
D:\SANCentral\Customer Files\ibm\70738\0918\switch port.csv 
```

我得到的例外是“无法从结果集中读取”。查看内部异常，我得到文件未找到。我不知道那是从哪里来的。D:\Projects\CSVParser 是我的项目的位置。我假设 MySQL.Data.Client 类正在使用我给它打开文件的位置做一些事情。这显然是 SQL 命令试图从中加载文件的路径：

```
 {"Could not find file  'D:\\Projects\\CSVParser\\CSVParser\\bin\\Debug\\SANCentralCustomer Filesibm70738'
.":"D:\\Projects\\CSVParser\\CSVParser\\bin\\Debug\\SANCentralCustomer Filesibm70738"} 
```

我怎样才能解决这个问题？我在调试器中检查了要解析的文件的路径，它是正确的。我尝试将 .CSV 文件移动到从中运行项目的项目目录中，但仍然出现异常，但它是路径中的非法字符，而不是找不到文件。

这是执行加载的 C# 代码和 MySQL 语句：

```
string ConnectionString =  String.Format(@"server=localhost;userid={0};
        password={1};database=PerformanceMonitors;
Allow User Variables=True", user,password);
        MySqlConnection sqlconnect = new MySqlConnection(ConnectionString);
        sqlconnect.Open(); 
```

这是 MySQL 语句并执行查询。抱歉，字符串有点长：

```
string working = String.Format(@"LOAD DATA LOCAL INFILE '{0}' IGNORE
INTO TABLE {1} COLUMNS TERMINATED BY ',' LINES TERMINATED BY '\n'
  IGNORE 1 LINES (`Switch`,`Port`,`WWPN`,@the_slot,`Port Index`,@the_time,
`Interval`,`Port Send Packet Rate`,  
`Port Receive Packet Rate`,`Total Port Packet Rate`,`Port Send Data Rate`, 
`Port Receive Data Rate`,`Total Port Data Rate`, 
Peak Send Data Rate`,`Port Peak Receive Data Rate`, 
```

`Port Send Packet Size`, `Port Receive Packet Size`, `Overall Port Packet Size`,
`Error Frame Rate`, `Dumped Frame Rate`,
`Link Failure Rate`, `Loss of Sync Rate`, `Loss of Signal Rate`, `CRC Error Rate`,
`Short Frame Rate`, `Long Frame Rate`, `Encoding Disparity Error Rate`,
`Discarded Class3 Frame Rate`, `F-BSY Frame Rate`, `F-RJT Frame Rate`,
`Port Send Bandwidth Percentage`, `Port Receive Bandwidth Percentage`, `Overall Port Bandwidth Percentage`, `Primitive Sequence Protocol Error Rate`,
`Invalid Transmission Word Rate`, `Link Reset Transmitted Rate`, `Link Reset Received Rate`)

```
 SET Slot = nullif(@the_slot,''), Time= str_to_date(@the_time,'%m/%d/%y %h:%i %p')", files.FirstOrDefault().ToString(), "by_switch");

       string commandreplaced= working.Replace("\n", "");

        MySqlCommand cmd = new MySqlCommand(commandreplaced,sqlconnect);
        cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T20:34:16.257

好吧，我终于想出了答案。LOAD DATA FILE 语句要求文件名是字符串值，它不能被参数化。不幸的是，MySQLCommand 类不喜欢 C# 字符串对象的文件路径中的转义 \，因此它无法找到该文件。我通过逃避逃逸来让它工作：

```
//build the LOAD DATA File command
string working = String.Format("LOAD DATA LOCAL INFILE '{0}' IGNORE ", files.FirstOrDefault().ToString()) +
                         String.Format("INTO TABLE {0} COLUMNS TERMINATED BY ',' LINES TERMINATED BY '\n'", "by_switch")+
                         String.Format(" IGNORE 1 LINES (`Switch`,`Port`,`WWPN`,@the_slot,`Port Index`,@the_time,`Interval`,`Port Send Packet Rate`,")+
                         String.Format("`Port Receive Packet Rate`,`Total Port Packet Rate`,`Port Send Data Rate`,")+        
                         String.Format("`Port Receive Data Rate`,`Total Port Data Rate`,`Port Peak Send Data Rate`,`Port Peak Receive Data Rate`,")+ 
                         String.Format("`Port Send Packet Size`,`Port Receive Packet Size`,`Overall Port Packet Size`,`Error Frame Rate`,")+
                         String.Format("`Dumped Frame Rate`,`Link Failure Rate`,`Loss of Sync Rate`,`Loss of Signal Rate`,`CRC Error Rate`,")+
                         String.Format(" `Short Frame Rate`,`Long Frame Rate`,`Encoding Disparity Error Rate`,")+         
                         String.Format("`Discarded Class3 Frame Rate`,`F-BSY Frame Rate`,`F-RJT Frame Rate`, `Port Send Bandwidth Percentage`,")+
                         String.Format("`Port Receive Bandwidth Percentage`, `Overall Port Bandwidth Percentage`,`Primitive Sequence Protocol Error Rate`,")+
                         String.Format("`Invalid Transmission Word Rate`,`Link Reset Transmitted Rate`,`Link Reset Received Rate`)")+ 
                          String.Format("SET Slot = nullif(@the_slot,''),")+ 
                          String.Format(@"Time= str_to_date(@the_time,'%m/%d/%y %h:%i %p')");

// now escape the escape character
       commandreplaced = commandreplaced.Replace(@"\", @"\\");

   // now execute the command
        MySqlCommand cmd = new MySqlCommand(commandreplaced,sqlconnect); 
```

# javascript - 具有主干结构的 JSNI

> ID：12557917
> 
> 赞同：1
> 
> 时间：2012-09-24T01:48:46.490
> 
> 标签：javascript, gwt, jsni

在尝试使用 Google Web Toolkit 的 JSNI 包装一些 Javascript API 时，我遇到了一个问题。javascript API 由基于云的服务器 Parse.com 提供。我的代码是这样的：

```
public class MMParseComm {

  private MMProject project = new MMProject();//MMProject has a member: String projectName.

  private String _projectName;

  private native void _retrieveCurrentProject_step1(int projectId) /*-{
    var ProjectList = $wnd.Parse.Object.extend("ProjectList");
    var query = new $wnd.Parse.Query(ProjectList);
    query.equalTo("projectId", projectId);
    query.find({
        success: function(results) {
            //Questions here: In this function, I can access "_projectName" by 
            //this.@net.myname.myproject.myapi.client.MMParseComm::_projectName, 
            //but cannot access "project.projectName" using the same syntax.
            //Also, I have searched around but cannot find a way 
            //that can write out a JSON data retrieved in "results" 
            //as a JSONObject in Java.
        },
        error: function(error) {
                $wnd.alert("Error");
        }
    });
  }-*/;
} 
```

如上面的代码所示，问题在代码的注释部分。我不确定如何将数组`results`中的字符串写入`project.projectName`？另外，如何将`results`在 javascript 中检索到的 JSON 数据包装为 Java 中的 JSONObject？

提前致谢！

卫斌

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T07:56:14.307

我认为 JSNI 外部调用语法不支持链调用，这就是您无法访问 project.projectName 的原因。

我假设您有一个*Project*类型的外部 JavaScript 原型。你最好在这里创建一个[覆盖类型](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsOverlay)而不是使用 JSONObject API 来解析它——它更高效、更简单。我会让你开始..

```
public class MMProject extends JavaScriptObject
{
    protected MMProject () { }

    public final native String getProjectId() /*-{
        return this.projectId;
    }-*/; 
} 
```

然后将包装器与您的成功回调一起使用。

我怀疑 results 可能是数组类型，因此您的实现可能如下所示：

```
public class MMParseComm
{
    private JsArray<MMProject> projects = null;

    private native void _retrieveCurrentProject_step1(int projectId) /*-{
        var ProjectList = $wnd.Parse.Object.extend("ProjectList");
        var query = new $wnd.Parse.Query(ProjectList);
        query.equalTo("projectId", projectId);
        query.find({
            success: function(results) {
                this.@net.myname.myproject.myapi.client.MMParseComm::projects = results;
            },
            error: function(error) {
                $wnd.alert("Error");
            }
        });
    }-*/;
} 
```

在不知道您的对象模型的细节的情况下，这是我可以为您提供的最好建议。如果您需要进一步澄清，我可以为您提供帮助。

# knockout.js - 网格单元格中的 Knockout-kendo.js 下拉菜单

> ID：12557919
> 
> 赞同：3
> 
> 时间：2012-09-24T01:48:58.313
> 
> 标签：knockout.js, kendo-ui

是否有适当的方法将 kendo-ui 下拉列表集成到 kendo-ui 网格列中？

这是我使用 rniemeyer 的[Knockout-kendo.js](http://rniemeyer.github.com/knockout-kendo/web/Grid.html)尝试过的。在 $(document).ready 中：

```
function statusDropDownEditor(container, options) {
         $('<input data-text-field="name" data-value-field="id" data-bind="value:' + options.field + '"/>')
             .appendTo(container)
             .kendoDropDownList({
                 autoBind: false,
                 dataSource: {
                     transport: {
                         read: "/api/Status"
                     }
                 }
             }); 
```

HTML：

```
<div id="prod-grid" data-bind="kendoGrid: { data: Products, height: 480,
    sortable: true, selectable: 'row', scrollable: true, resizable: true, pageable: false,
    columns: [ 
    { field: 'ProdName', title : 'Product Name'}, 
    { field: 'UnitCost', title: 'Unit Cost'}, 
    { field: 'TotalAmt', title: 'Batch Total'},
    { field: 'Manufacturer', title: 'Manufacturer'},
    { title: 'Status', editor: statusDropDownEditor}
}>
</div> 
```

但是，它会产生一个错误，上面写着： *未捕获的错误：无法解析绑定。消息：ReferenceError：categoryDropDownEditor 未定义；*

另外，我希望下拉菜单显示基于 Products 模型的状态值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T17:19:39.163

您可以使用淘汰赛剑道的使用模板选项。这是你如何做到的

```
<script id='rowTemplate' type='text/html'>
    <tr> <td> <span data-bind = "text:ProdName" > </span>        </td> 
        <td> <span data-bind = "text:UnitCost" > </span>        </td>
        <td> <span data-bind = "text:TotalAmt" > </span>        </td>
        <td> <select data-bind = "options:$parent.availabeStates,value:Status" > </select>        </td>
        </tr>
</script>
<table id="prod-grid" data-bind="kendoGrid: { data: Products, height: 480,
    sortable: true,useKOTemplates:true,rowTemplate: 'rowTemplate',

    columns: [ 
    { field: 'ProdName', title : 'Product Name'}, 
    { field: 'UnitCost', title: 'Unit Cost'}, 
    { field: 'TotalAmt', title: 'Batch Total'},
    { field:'Status', title: 'Status'}]
}"></table>
<div data-bind="foreach:Products">
<span data-bind="text:ProdName"></span>

</div>

var vm = function () {
    var self = this;
    self.Products = ko.observableArray();
    self.availabeStates = ['Fulfilled', 'Pending']
    self.init = function () {
        self.Products.push({
            ProdName: 'Prod1',
            UnitCost: 200,
            TotalAmt: 400,
            Status: 'Fulfilled'
        });
        self.Products.push({
            ProdName: 'Prod2',
            UnitCost: 200,
            TotalAmt: 400,
            Status: 'Pending'
        });

    };
    self.init();
}
ko.applyBindings(new vm()); 
```

这是给你的 JSFiddle [http://jsfiddle.net/dhanasekaran/QqTwU/3/](http://jsfiddle.net/dhanasekaran/QqTwU/3/) 我没有故意使用 kendo 下拉菜单，因为我有下拉 zIndex 的问题，但那你应该修复并且与这个 Q/A 我无关猜测。

# ios - 在 OpenGL ES 2.0 中绘制点

> ID：12557920
> 
> 赞同：1
> 
> 时间：2012-09-24T01:48:58.407
> 
> 标签：ios, opengl-es-2.0

我是 opengl 的新手，并试图在 OpenGL ES 2.0 中获得类似 Apple 的 GLPaint 的行为。这是我得到的：

![在此处输入图像描述](../Images/df0dc4c61b8bf8d3582390fbb51fa26b.png)

如您所见，手指绘制不是连续的，而是虚线的。我试图改变我的纹理，尝试使用 GL_STREAM_DRAW 选项，但它似乎不起作用。谁能给我一些线索来缩小问题范围或提供一些解决方案的提示？谢谢。

以下是着色器和相关代码：

顶点着色器：

```
attribute vec4 Position; 
attribute vec4 SourceColor; 
uniform mat4 Projection;
varying vec4 DestinationColor; 

void main(void) { 
    DestinationColor = SourceColor; 
    gl_Position = Position * Projection;
    gl_PointSize = 50.0;
} 
```

片段着色器：

```
uniform sampler2D texture;

void main ( ){
    gl_FragColor = texture2D(texture, gl_PointCoord);
} 
```

渲染过程：

```
- (void) renderLineFromPoint:(CGPoint)start toPoint:(CGPoint)end withContainer:    (DVDrawingElement*)container
{
static Vertex*      vertexBuffer = NULL;
static NSUInteger   vertexMax = 64;
NSUInteger          vertexCount = 0,
    count,
    i;

// Convert locations from Points to Pixels
CGFloat scale = self.contentScaleFactor;
start.x *= scale;
start.y *= scale;
end.x *= scale;
end.y *= scale;

// Allocate vertex array buffer
if(vertexBuffer == NULL)
    vertexBuffer = malloc(vertexMax * 2 * sizeof(Vertex));

// Add points to the buffer so there are drawing points every X pixels
count = MAX(ceilf(sqrtf((end.x - start.x) * (end.x - start.x) + (end.y - start.y) * (end.y - start.y)) / kBrushPixelStep), 1);

    NSLog(@"start:%@ --- end: %@, count=%d", [NSValue valueWithCGPoint:start], [NSValue valueWithCGPoint:end], count);

for(i = 0; i < count; ++i) {
    if(vertexCount == vertexMax) {
        vertexMax = 2 * vertexMax;
        vertexBuffer = realloc(vertexBuffer, vertexMax * 2 * sizeof(Vertex));
    }
    vertexBuffer[i].Position[0] = start.x + (end.x - start.x) * ((GLfloat)i / (GLfloat)count);
    vertexBuffer[i].Position[1] = start.y + (end.y - start.y) * ((GLfloat)i / (GLfloat)count);
    vertexBuffer[i].Position[2] = 0.0f;        

    // color is RGBA.
    vertexBuffer[i].Color[0] = r;
    vertexBuffer[i].Color[1] = g;
    vertexBuffer[i].Color[2] = b;
    vertexBuffer[i].Color[3] = a;

    vertexCount += 1;
}

GLuint vbo;
glGenBuffers(1, &vbo);

glBindBuffer(GL_ARRAY_BUFFER, vbo);
glBufferData(GL_ARRAY_BUFFER, vertexCount * sizeof(Vertex), vertexBuffer, GL_STATIC_DRAW);

glVertexAttribPointer(_positionSlot, 3, GL_FLOAT, GL_FALSE,
                      sizeof(Vertex), 0);
glVertexAttribPointer(_colorSlot, 4, GL_FLOAT, GL_FALSE,
                      sizeof(Vertex), (GLvoid*) (sizeof(float) *3));

glUniform1i(_textureSlot, 0);
glActiveTexture(GL_TEXTURE0);

glDrawArrays(GL_POINTS, 0, vertexCount);

[_context presentRenderbuffer:GL_RENDERBUFFER];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:08:01.940

最后我发现设置中遗漏了一个选项，如下代码所示：

```
- (void)setupLayer {
    _eaglLayer = (CAEAGLLayer*) self.layer;
    _eaglLayer.opaque = YES;
    _eaglLayer.drawableProperties = [NSDictionary dictionaryWithObjectsAndKeys:**[NSNumber numberWithBool:YES
                                                                            ],     kEAGLDrawablePropertyRetainedBacking,**
                                     kEAGLColorFormatRGBA8, kEAGLDrawablePropertyColorFormat,
                                     nil];
} 
```

通过将此**kEAGLDrawablePropertyRetainedBacking**标志设置为 YES，opengl 将保留帧之间的绘图，而不是清理每一帧。

以下是固定版本：

![在此处输入图像描述](../Images/e65d271704362f6b6e5744e73794ca7e.png)

# html - 奇怪的 HTML 链接行为

> ID：12557921
> 
> 赞同：0
> 
> 时间：2012-09-24T01:49:00.650
> 
> 标签：html, hyperlink, visual-web-developer-2010

我在 HTML 中工作，当我开始无法引用不同的页面时，我开始使用`data/css/styles.css`并且在网站主目录中的页面上运行良好（不在任何其他文件夹内），然后当我在子目录中做同样的事情时- 目录（例如“/home/”）它不起作用。所以我然后尝试使用标准`/data/css/styles.css`，它在主目录或子目录中也不起作用。`../data/css/styles.css`所以然后我在子目录而不是主目录上尝试了我的最后一次尝试。但是当我在 JSFiddle 上的第二个（`/data/css...`）和第三个（`../data/css`）时，它们工作得很好。我的编译器（Visual Studio Web Developer 2010）有问题还是调试很奇怪？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:36:53.013

如果路径名以 开头`/`，则相对于网站的 DocumentRoot 进行解释。如果路径名不以 开头`/`，则相对于包含链接的页面的 URL 进行解释。因此，如果带有路径的页面`/a/b/c.html`包含链接`dir1/dir2/foo.css`，则将其转换为`/a/b/dir1/dir2/foo.css`. `../`前缀用于备份路径名中的目录，因此如果页面包含`../dir1/foo.css`，则将其转换为`/a/dir1/foo.css`.

# solver - 在求解器基础目标中使用天花板函数？

> ID：12557923
> 
> 赞同：0
> 
> 时间：2012-09-24T01:49:12.310
> 
> 标签：solver, ms-solver-foundation

我试图在我的 Solver 目标函数中将我的一个决策变量的上限乘以 2.5，但由于 foobar 变量不是双精度，因此无法应用 Math.Ceiling() 函数，它是一个“术语“ 多变的。有没有另一种方法可以表达同样的代码，这将在 Solver 中工作？

```
Decision foo = new Decision(Domain.IntegerNonnegative, "bar");
model.AddDecision(foo);

model.AddGoal("foobar", GoalKind.Maximize, Math.Ceiling(2.5 * foobar)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:18:24.567

[Model](http://msdn.microsoft.com/en-us/library/ff525471%28v=vs.93%29.aspx)类包含大量静态方法，它们对`Term`对象而不是`double`:s 执行算术运算。您会发现大部分（如果不是全部）类中可用的操作`Math`。

特别是，您应该能够将目标函数更改为使用[Model.Ceiling](http://msdn.microsoft.com/en-us/library/microsoft.solverfoundation.services.model.ceiling%28v=vs.93%29.aspx)。

# css - 在 CSS 中创建一个固定宽度的按钮

> ID：12557925
> 
> 赞同：7
> 
> 时间：2012-09-24T01:49:21.293
> 
> 标签：css

我有几个宽度可变的按钮，我希望它们都具有一定的宽度。当我试图添加`width: 150px;`它不起作用。如何创建这些都具有设定宽度的按钮？

[这是一个小提琴](http://jsfiddle.net/Lynda333/yQu8H/)，这里是代码：

*HTML*

```
<p><a class="dark_button 150px-width" href="#">Lorem</a></p>
<p><a class="dark_button 150px-width" href="#">Lorum Ipsum</a></p>
<p><a class="dark_button 150px-width" href="#">Lorum Ipsum dolor</a></p>
<p><a class="dark_button 150px-width" href="#">Lorum Ipsum dolor sit amet</a></p> 
```

*CSS*

```
.dark_button{
  border-top: 1px solid #969696;
  background: #000000;
  background: -webkit-gradient(linear, left top, left bottom, from(#545454), to(#000000));
  background: -webkit-linear-gradient(top, #545454, #000000);
  background: -moz-linear-gradient(top, #545454, #000000);
  background: -ms-linear-gradient(top, #545454, #000000);
  background: -o-linear-gradient(top, #545454, #000000);
  padding: 5px 10px;
  -webkit-border-radius: 8px;
  -moz-border-radius: 8px;
  border-radius: 8px;
  -webkit-box-shadow: rgba(0,0,0,1) 0 1px 0;
  -moz-box-shadow: rgba(0,0,0,1) 0 1px 0;
  box-shadow: rgba(0,0,0,1) 0 1px 0;
  text-shadow: rgba(0,0,0,.4) 0 1px 0;
  color: #e3e3e3 !important;
  font-size: 14px;
  text-decoration: none;
  vertical-align: middle;
}
.dark_button:hover {
  border-top-color: #4f4f4f;
  background: #4f4f4f;
  color: #ccc;
  text-decoration:none;
}
.dark_button:active {
  border-top-color: #4a4a4a;
  background: #4a4a4a;
}

.150px-width{
 width: 150px;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-24T01:56:28.567

几个问题：

1.  该`a`元素是一个内联元素，这意味着你不能给它一个明确的宽度。
2.  类不能以数字开头。

您需要将您的`display`财产设置为类似`block`或`inline-block`尊重您对`width`. 此外，使用类似的类`width-150px`名，它可以解决上面的问题 2。

小提琴：http: [//jsfiddle.net/yQu8H/5/](http://jsfiddle.net/yQu8H/5/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T01:53:10.140

CSS 类名不能以数字开头。您必须使用字母，并且名称区分大小写。

请参阅：[CSS 类名/选择器中哪些字符有效？](https://stackoverflow.com/questions/448981/what-characters-are-valid-in-css-class-names)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T02:01:49.387

关于类名的答案是正确的，但只是解决方案的一部分。

您还需要将锚元素（内联元素）包含在块元素（如 div）内，然后将宽度分配给块元素。因此，您希望将“结构”样式应用于 div，并将文本样式应用于锚点。

这是您应用了一些重构的小提琴。

[http://jsfiddle.net/gZtdZ/](http://jsfiddle.net/gZtdZ/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T01:56:39.393

你不能以数字开头类名。也许这就是问题所在。请检查[语法](http://www.w3.org/TR/CSS21/grammar.html#scanner)

# c# - 找出 Windows Server 2008 中的电影数据速率

> ID：12557926
> 
> 赞同：1
> 
> 时间：2012-09-24T01:49:26.453
> 
> 标签：c#, file, shell, properties, windows-server-2008

我试图找出 Windows Server 2008 中电影文件（mp4 或 wmv）的数据速率。我尝试使用[Windows API 代码包](http://archive.msdn.microsoft.com/WindowsAPICodePack)以及 C# 中的 Shell32 COM 对象。这在 Windows 7 中运行良好，但在 Windows Server 2008 中没有返回任何信息。

在 Windows 7 资源管理器中，我可以在文件夹中项目的详细信息列表中添加一列，以查看文件属性，例如数据速率、比特率和持续时间。在 Windows Server 2008 中尝试执行此操作时，这些列中没有显示任何内容。如果我使用 Windows API 代码包运行我的程序以找出 Windows 7 机器上文件的数据速率并指向它通过网络分析 Windows Server 2008 机器上的文件，那么我可以获得数据速率属性，但是通过网络查找这些属性比在本地查找要花费更长的时间。

如果有办法在 Windows Server 2008 中使用 C# 找出数据速率，请告诉我！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:38:03.543

媒体信息

1：创建一个C#项目

2：在项目中包含[这个（点击我）](http://www.google.co.uk/url?sa=t&rct=j&q=mediainfodll.cs&source=web&cd=1&ved=0CCAQFjAA&url=https://mcm-2-myfilms.googlecode.com/git/MediaInfoDLL.cs&ei=sQdrUJLpC9KEhQe9noCICQ&usg=AFQjCNFVooE1b7yf8zSZrue-uk7H28wLeg)文件

3：创建一个很好的包装类来提取值：

这是给你的；

```
public class MediaQuery
{
    public Dictionary<string, string> QueryFile(string filePath)
    {
        MediaInfo mediaInfo = new MediaInfo();
        string version = mediaInfo.Option("Info_Version");
        if (!File.Exists(filePath))
            throw new Exception("File Not Found");
        try
        {
            mediaInfo.Option("Inform", "XML");
            mediaInfo.Option("Complete", "1");
            mediaInfo.Open(filePath);

            string xml = mediaInfo.Inform();
            IEnumerable<XElement> el = XElement.Parse(xml, LoadOptions.None).Elements();
            XElement general = el.FirstOrDefault(e => e.Attribute("type").Value == "General");
            XElement video = el.FirstOrDefault(e => e.Attribute("type").Value == "Video");
            XElement audio = el.FirstOrDefault(e => e.Attribute("type").Value == "Audio");
            Dictionary<string, string> values = new Dictionary<string, string>();
            values = GetValues(general, "General");
            values = GetValues(video, "Video", values);
            values = GetValues(audio, "Audio", values);
            return values;
        }
        catch (Exception ex)
        {
            throw new Exception("Problem Querying File", ex);
        }
    }

    private Dictionary<string, string> GetValues(XElement xElement, string rootType)
    {
        Dictionary<string, string> values = new Dictionary<string, string>();
        return GetValues(xElement, rootType, values);
    }
    private Dictionary<string, string> GetValues(XElement xElement, string rootType, Dictionary<string, string> values)
    {
        foreach (XElement element in xElement.Elements())
        {
            string key = rootType + "/" + element.Name.ToString();
            if (!values.ContainsKey(key))
                values.Add(key, element.Value.ToString());
            else
            {
                int count = 1;
                key = rootType + "/" + element.Name.ToString() + count.ToString();
                while (values.ContainsKey(key))
                {
                    count++;
                    key = rootType + "/" + element.Name.ToString() + count.ToString();
                }
                values.Add(key, element.Value.ToString());
            }
        }
        return values;
    }
} 
```

将该文件粘贴在同一个项目中。

4：下载MediaInfo的当前版本：[下载页面](http://mediainfo.sourceforge.net/en/Download/Windows)。选择最适合您的版本（仅限DLL）。**确保 .dll 位于应用程序的执行目录中。**

5：用法：

```
MediaQuery query = new MediaQuery();
Dictionary<string, string> results = query.QueryFile(@"C:\text.mov");
string videoBitRate;

if (results.TryGetValue("Video/Bit_rate", out videoBitRate) == false)
{ 
   throw new Exception("Video bit rate not found"); 
}
else
{
   // Do whatever you want with this....
   Console.writeline("Video bitrate:" + videoBitRate);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T19:03:59.640

您可以尝试使用 ffmpeg 的库。您有一些可用的 C# 包装器。看看这个[SO 帖子](https://stackoverflow.com/questions/2527963/using-ffmpeg-in-net)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T16:29:24.613

这是一个非常简单的答案：Windows server 2008 没有 mpeg-4 多路复用器，因此使用服务器的默认配置，您无法在计算机上获取任何 mp4 信息。

- 在您的计算机中，您会注意到，如果您将鼠标光标放在视频文件上，您将能够看到基本的文件信息，例如持续时间...

- 在您的服务器上，您可能会发现，如果您对 mp4 媒体文件执行相同操作，您将无法看到此信息...（持续时间和尺寸）

该问题的答案是从开始菜单转到 Windows Server 2008 r2 中管理工具下的服务器管理器。

从那里您需要选择左侧的功能。之后，您需要添加功能并选择 DESKTOP EXPERIENCE 并安装。

这是您需要做的主要事情，您的机器才能读取 mp4 信息。之后，您需要为您的 mp4 媒体文件设置 mime 类型。安装编解码器。

# php - 使用 Laravel 插入延迟

> ID：12557930
> 
> 赞同：1
> 
> 时间：2012-09-24T01:50:00.413
> 
> 标签：php, mysql, laravel

如何`INSERT DELAYED`使用 Laravel 的 Fluent 完成 MySQL 子句？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T02:03:15.867

你不能，至少对于 Fluent 来说不能。Laravel 为您提供了通过方法执行原始查询的`DB::query()`方法。

有了`DB::query()`你应该能够达到你想要的结果。

如果由于某种原因它不能正常工作，那么请注意一些查询`DB::query()`仍然无法正常工作，那么您将需要使用原始 PDO 对象。您可以通过 获取 PDO 对象`DB::connection()->pdo`，请记住，如果您使用的是自定义连接而不是配置中定义的默认连接，则需要将其传递给`DB::connection('connection_name')`

更多信息可以在 Laravel 文档中找到：http: [//laravel.com/docs/database/raw](http://laravel.com/docs/database/raw)

# python - 项目设置的 Django 最佳实践

> ID：12557931
> 
> 赞同：0
> 
> 时间：2012-09-24T01:50:00.927
> 
> 标签：python, django

我正在开发一个项目，该项目将具有一些功能，例如登录、注册、向其他用户发送消息或创建事件。

根据我对 Django 的了解，我会将所有这些功能分离到他们自己的应用程序中，例如帐户应用程序（具有注册功能）、消息应用程序和事件应用程序。

如果到目前为止我是正确的，那么将构成我的项目的所有这些应用程序组合在一起的代码会去哪里？它会是另一个应用程序吗？该应用程序的名称是什么？（根据最佳实践）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T02:06:24.537

> “如果到目前为止我是正确的，那么将构成我的项目的所有这些应用程序组合在一起的代码会去哪里？它会是另一个应用程序吗？那个应用程序的名称是什么？（根据最佳实践）”

到目前为止，您是正确的。请记住，对于某些功能，您可以直接“插入”您的项目中的某些功能，例如用于[注册](http://www.djangopackages.com/grids/g/registration/)，或内置到 Django，例如[登录](https://docs.djangoproject.com/en/dev/topics/auth/)。

我认为没有最佳实践来命名融合在一起的应用程序。只需使用您认为合适的名称即可。我通常只是简单地命名它`web`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-05T09:39:10.743

运行命令时，基本的 Django 设置将如下所示

`django-admin.py startproject foo`

```
foo/
    manage.py
    foo/
       __init__.py
       settings.py
       urls.py
       wsgi.py 
```

这很好，但推荐的项目设置方式不同。推荐的结构就像创建不同的模块作为单独的应用程序，然后从根连接它。请参阅[此](http://www.revsys.com/blog/2014/nov/21/recommended-django-project-layout/)链接以简要了解项目布局。

# php - 从内部连接不明确的列名中检索列数据

> ID：12557934
> 
> 赞同：0
> 
> 时间：2012-09-24T01:50:30.973
> 
> 标签：php, mysql, join

我有这段代码，它使用对 11 个表的连接以编程方式生成的查询来执行大约 30-40 列的搜索，因此代理键自然会出现几次。然后将搜索结果按 tbl_sub_model.sub_model_sk 分组，以防止在最终搜索结果屏幕中出现双重搜索，并且我可以从相关表中检索数据（大多数是一对多）。

这里的代码应该遍历分组结果，检索与该子模型关联的任何徽章字段，将徽章连接到一个字符串中，并在制作和模型之后回显它们，例如“subaru forrester xs ltd” 我得到了品牌和模型但在 A 点没有其他内容，在 B 点没有其他内容。我怀疑这与我指的是“tbl_sub_model.sub_model_sk”而不是例如“model_name”这一事实有关。任何帮助将不胜感激。

```
while ($row = mysql_fetch_array($result)) {
            $badge_result_list = mysql_query("select badge from tbl_badge where sub_model_sk = {$row['tbl_sub_model.sub_model_sk']}");
            $badge_str='';
            while ($badge_result = mysql_fetch_array($badge_result_list)) {
                $badge_str.=$badge_result;
            }
            echo $row['tbl_sub_model.sub_model_sk'];  //<<<<<point B
            echo "<div class=\"top\" rel=\"{$div_count_id}\">{$row['manufacturer_name']} {$row['model_name']} {$badge_str}</div>";  //<<<<<point A
            echo "<div class=\"mid\" id=\"mid{$div_count_id}\" style=\"display: none;\">";
            echo $row['tbl_sub_model.sub_model_sk'];
            echo "</div>";

            $div_count_id++;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T02:05:11.690

使用 print_r($row); 查看查询中可用的行，然后您知道使用什么键来获取所需的信息。

# unit-testing - Xcode 4.5 命令行单元测试

> ID：12557935
> 
> 赞同：36
> 
> 时间：2012-09-24T01:50:35.030
> 
> 标签：unit-testing, ios6, xcodebuild, xcode4.5

通过命令行运行我的单元测试时更新到 Xcode 4.5 后出现问题。以下是我尝试运行测试时看到的输出

```
Unknown Device Type. Using UIUserInterfaceIdiomPad based on screen size
Terminating since there is no workspace.
/Applications/Xcode.app/Contents/Developer/Tools/RunPlatformUnitTests.include:334: note: Passed tests for architecture 'i386' (GC OFF)

/Applications/Xcode.app/Contents/Developer/Tools/RunPlatformUnitTests.include:345: note: Completed tests for architectures 'i386' 
```

尽管它确实说测试已经通过并完成，但我认为它们实际上并没有运行。

我正在使用以下命令来运行测试：

```
xcodebuild -workspace MyApp.xcworkspace -scheme MyAppTests -sdk iphonesimulator -configuration Debug clean build TEST_AFTER_BUILD=YES 
```

有没有人遇到同样的问题并可以提供解决方案？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-01T23:40:17.420

只是想我也应该分享我为解决这个问题所做的工作。我遵循了[https://stackoverflow.com/a/10823483/666943](https://stackoverflow.com/a/10823483/666943)中概述的解决方案，但将 ruby​​ 脚本转换为 shell。最后，我基本上是`ios-sim`通过自制软件安装的`Run Script`，并将`Build Phases`我的测试目标中的替换为以下内容：

```
if [ "$RUN_UNIT_TEST_WITH_IOS_SIM" = "YES" ]; then
    test_bundle_path="$BUILT_PRODUCTS_DIR/$PRODUCT_NAME.$WRAPPER_EXTENSION"
    ios-sim launch "$(dirname "$TEST_HOST")" --setenv DYLD_INSERT_LIBRARIES=/../../Library/PrivateFrameworks/IDEBundleInjection.framework/IDEBundleInjection --setenv XCInjectBundle="$test_bundle_path" --setenv XCInjectBundleInto="$TEST_HOST" --args -SenTest All "$test_bundle_path"
    echo "Finished running tests with ios-sim"
else
    "${SYSTEM_DEVELOPER_DIR}/Tools/RunUnitTests"
fi 
```

现在开始测试，我传入参数，`RUN_UNIT_TEST_WITH_IOS_SIM=YES`例如

```
xcodebuild -workspace MyApp.xcworkspace -scheme MyAppTests -sdk iphonesimulator -configuration Debug clean build RUN_UNIT_TEST_WITH_IOS_SIM=YES 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-28T10:15:53.197

我在 Xcode 4.5 / iOS 6 的 beta 版本中注意到了这个问题。我一直在开发一个独立的单元测试运行程序来解决这个问题。它的工作原理是编译您的单元测试包，然后编译您的应用程序版本，该版本在模拟器环境中自动运行单元测试。

该工具绝不是完整的，但似乎有足够多的人遇到这个问题，所以我现在按原样发布该工具。请分叉或评论，以便我改进工具。

xcodetest：[https ://github.com/sgleadow/xcodetest](https://github.com/sgleadow/xcodetest)

还要密切关注这个问题[http://openradar.appspot.com/12306879](http://openradar.appspot.com/12306879)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-29T19:37:13.793

`xcodebuild -project ${PROJECT_PATH}/${PROJECT_NAME}.xcodeproj \ -scheme ${TEST_SCHEME} \ -configuration Debug \ -sdk iphonesimulator5.1 \ clean build \ TEST_AFTER_BUILD=YES`

将 iphonesimulator 设置为 5.1 版似乎可以解决问题。在这个问题上有很多雷达错误。

本文还提到了一个很好的解决方案：

[http://baolei.tumblr.com/post/32428168156/ios-unit-test-from-command-line-ios6-xcode4-5](http://baolei.tumblr.com/post/32428168156/ios-unit-test-from-command-line-ios6-xcode4-5)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-18T09:27:32.177

还有一些小技巧可以帮助在 iOS6.0 模拟器 SDK 上运行命令行测试

我正在使用 Cedar，这个调整帮助了我：

首先，您需要稍微 更新一下**主文件：**

```
 // Faking up that workspace port
  CFMessagePortCreateLocal(NULL, (CFStringRef) @"PurpleWorkspacePort", NULL, NULL,NULL);
  return UIApplicationMain(argc, argv, nil, @"CedarApplicationDelegate"); 
```

其次，您需要向 UIWindow 添加类别：

```
@implementation UIWindow (Private)
- (void)_createContext {
   // Doing nothing here. Just for crash avoidance
}
@end 
```

Cedar **Unittest**可以正常运行，但会出现一些运行时警告，但至少它们可以运行 :)

# objective-c - 加载包含在框架中的 nib

> ID：12557936
> 
> 赞同：10
> 
> 时间：2012-09-24T01:51:07.517
> 
> 标签：objective-c, ios, xcode, cocoa-touch

> **可能重复：**
> [您可以从 iPhone 上的静态库中引用 Xib 文件吗？](https://stackoverflow.com/questions/707429/can-you-reference-xib-files-from-static-libraries-on-the-iphone)

我创建了一个 iOS 框架，它包含一个 xib 视图。当我调试程序时，这行代码运行良好：

```
MyViewController *controller = [[MyViewController alloc] initWithNibName:@"MyView" bundle:[NSBundle mainBundle]]; 
```

但是，当我从另一个项目中“引用”框架时 - 笔尖不再位于“mainBundle”中。我应该如何处理上面的代码（这是框架的一部分），以便它从框架而不是消费应用程序项目加载？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-24T02:10:54.680

The framework in question should have a bundle identifier in its `Info.plist` file typically. In the application that makes use of this custom framework, you should be able to access resources in this bundle by:

```
NSString *frameworkBundleID = @"com.yourCompany.YourFrameworkBundleID";
NSBundle *frameworkBundle = [NSBundle bundleWithIdentifier:frameworkBundleID]; 
```

This is the `NSBundle` from which you can access framework resources.

**EDIT:**

There appears to be an alternate (possibly better) means of accessing the bundle in question.

e.g.:

```
NSBundle *bundle = [NSBundle bundleWithURL:[[NSBundle mainBundle] URLForResource:@"MyLibraryResources" withExtension:@"bundle"]]; 
```

See [this excellent tutorial](http://www.galloway.me.uk/tutorials/ios-library-with-resources/)

# android - Dalvik (Androids JVM) 是否支持热代码替换？

> ID：12557940
> 
> 赞同：6
> 
> 时间：2012-09-24T01:52:03.750
> 
> 标签：android, dalvik

我尝试了像更改字符串值一样简单的替换，但它不起作用。我尝试在调试模式下运行我的测试应用程序，但总是收到“热代码替换失败”警告消息框。一些消息来源说它有效，但它非常有限，偶尔会忽略所有更改，另一些则说它根本不起作用。

**更新：** 此行为在设备和模拟器上完全相同（不起作用）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T03:51:53.227

不。Dalvik 不支持任何类型的热代码替换，无论是在设备上还是在模拟器上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-22T21:19:16.697

Dalvik 本身不支持这一点，但可以使用其他工具来实现所需的功能。由于广告的缺点，不会在这里发布名称：）

# java - Java DataInputStream 到图像文件

> ID：12557944
> 
> 赞同：1
> 
> 时间：2012-09-24T01:52:59.877
> 
> 标签：java, image, datainputstream

我正在做作业，我必须连接到 http 服务器并使用套接字编程下载 html 文件和图像文件。

我做得很好，能够正确下载和编写 html 和图像文件。但是当我编辑代码以满足作业的要求时（网页必须在本地工作，所以编辑代码以重写html，图像文件没有被正确写入。

我不记得编辑下载图像的方法的代码。当我认为我完成时，我刚刚检查了我的文件，并且图像显示无效图像。

字节（当我在记事本++中并排打开正确的图像和下载图像时），字节是相同的。问题是在下载的图像上，字节被写入一个长行，而在正确的图像中，字节是逐行写入的。

尝试了几种不同的方法，都没有奏效。事实上，我发送给朋友的旧代码（在上面的编辑之前）似乎也不起作用。有任何想法吗？

```
 DataInputStream imgIn=new DataInputStream(socket.getInputStream());
        DataOutputStream imgOut = new DataOutputStream(new FileOutputStream(host+path)); 
        byte[] byteArr=new byte[1024];

        int bytesRead=0,totalBytesRead=0;

        while (totalBytesRead<imageSize ){

            bytesRead=imgIn.read(byteArr,0,1024);
            totalBytesRead+=bytesRead;
            imgOut.write(byteArr,0,bytesRead);
                imgOut.flush();

        }

       /* while ((bytesRead = imgIn.read(byteArr)) > 0)
        {
          imgOut.write(byteArr, 0, bytesRead);
          imgOut.flush();
        }*/

        imgIn.close();
        imgOut.close();

    } 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:20:27.200

我认为如果这是要求：在本地创建网页。

您不应该只下载文件（htmls、jpegs 等），您还应该复制目录结构，并且您不需要编写单独的代码来在本地工作。

希望能帮助到你 ：-）

# css - IE9突然CSS大小写敏感

> ID：12557948
> 
> 赞同：0
> 
> 时间：2012-09-24T01:54:51.173
> 
> 标签：css, internet-explorer

由于某种原因，CSS 在 IE9 中突然变得区分大小写。我已经在其他人的计算机上尝试过，并且该站点在 IE9 中显示良好，但在我的机器上它不会显示 CSS，除非情况正确。

我可以将 IE 设置更改为怪癖模式，它会起作用，但它不能解释奇怪的行为。

我尝试将所有 IE 的设置重置为默认值，清除缓存，但无法重新安装。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T02:09:27.390

Are you in standards mode? Historically IE has been case-insensitive for the class and ID selectors, but I understand IE9 is case-sensitive when in standards mode.

CSS properties and most values are case-insensitive, exceptions being `url()` where the webserver serving up images might have case-sensitive filenames.

CSS selectors are case-insensitive except for parts outside of CSS, such as `#id` and `.class` selectors. For more information see this question: [Are CSS selectors case-sensitive?](https://stackoverflow.com/questions/7559205/are-css-selectors-case-sensitive)

# java - 如何将 parseInt 用于双精度？

> ID：12557950
> 
> 赞同：9
> 
> 时间：2012-09-24T01:55:31.887
> 
> 标签：java

我的程序接收到一些输入（a `String`）。输入的形式很有可能是`double`, like `"1.5"`。但我想把它转换成一个`integer`，所以我最终只能得到一个`1`。

首先，我试过这个：

```
Integer.parseInt(someString); 
```

但它不起作用 - 我假设它是因为`.`它无法解析它的点。

所以我想也许这个`Integer`类可以`integer`从`double`. 所以我决定创建一个`double`然后把它变成一个`int`，像这样：

```
Integer.parseInt(Double.parseDouble(someString)); 
```

但显然有

> 没有找到适合 parseInt(double) 的方法

所以你有什么建议？有没有针对此的单行代码？我想过制作一种方法来删除点和它之后的所有字符......但这听起来不太酷。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T02:00:51.390

将任何数字解析为 是安全的`double`，然后将其转换为另一种类型。像这样：

```
// someString = "1.5";
double val = Double.parseDouble(someString);  // -> val = 1.5;
int intVal = (int) Math.floor(val);           // -> intVal = 1; 
```

请注意，使用 Java 7（未使用早期 JVM 进行测试，但我认为它也应该可以工作），这也将产生与上述相同的结果：

```
int intVal = (int) Double.parseDouble(someString); 
```

因为从浮点值转换为 int 将丢弃任何小数而不四舍五入。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T02:02:34.020

使用铸造。

```
double val = Double.parseDouble(someString);  
int intVal = (int) Math.floor(val); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T02:01:45.353

`Double`我猜你有`Double.parseDouble`. 所以只需使用：

```
int i = (int) Double.parseDouble(someString); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T02:01:08.270

尝试，

```
int no= new Double(string).intValue(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-24T02:03:45.807

试试这个：

1) 将字符串解析为 double 2) 从 double 转换为 int

```
public static void main(String[] args) {
    String str = "123.32";
    int i = (int) Math.floor(Double.parseDouble(str));
    System.out.println(i);

} 
```

# r - 从命名列表和函数名创建可解析的字符串

> ID：12557951
> 
> 赞同：2
> 
> 时间：2012-09-24T01:56:23.030
> 
> 标签：r

我显然有一个简单的，我的灰质目前拒绝掌握 - 比如说我有一个清单：

```
list(a = "foo", b = c("bar", "biz", "booze")) 
```

和一个函数`fn`。我怎样才能得到这样的字符串：

```
"fn(a = \"foo\", b = c(\"bar\", \"biz\", \"booze\"))" 
```

附言

我知道我会后悔早上问这个...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T02:21:55.733

这应该让你开始，对吧......？

```
deparse(list(a = "foo", b = c("bar", "biz", "booze")),control = NULL)
[1] "list(a = \"foo\", b = c(\"bar\", \"biz\", \"booze\"))" 
```

一个更完整的版本，正如@aL3xa 评论的那样，我完成了......

```
gsub("^list","fn",
    deparse(list(a = "foo", b = c("bar", "biz", "booze")),control = NULL)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T03:09:00.207

您也可以直接操作语言对象，如R 语言定义的[第 6 章所述：](http://cran.r-project.org/doc/manuals/R-lang.html#Computing-on-the-language)

```
X <- quote(list(a = "foo", b = c("bar", "biz", "booze")))
X[[1]] <- quote(fn)  ## as.symbol("fn") would also work
deparse(X)
# [1] "fn(a = \"foo\", b = c(\"bar\", \"biz\", \"booze\"))" 
```

或者，如果您的列表已经存储在命名对象中，您可以使用`c()`and`as.call()`拼凑所需的调用：

```
ll <- list(a = "foo", b = c("bar", "biz", "booze"))
deparse(as.call(c(as.symbol("fn"), ll)))
# [1] "fn(a = \"foo\", b = c(\"bar\", \"biz\", \"booze\"))" 
```

# c# - 奇怪的错误：局部变量在定义之前不能使用。但我确实定义了它

> ID：12557954
> 
> 赞同：2
> 
> 时间：2012-09-24T01:56:54.103
> 
> 标签：c#, asp.net, .net

```
public partial class introduction : System.Web.UI.Page
    {
        static BusinessService bs = null;
        private static List<PCUser> coaches = new List<PCUser>();
.............

 public void BindRepeater()
        {
            if (coaches == null || coaches.Count == 0)
            { 

            } 
```

编译器抱怨 BindRepeater 中的教练。

错误信息：局部变量在定义之前不能使用。

但是，如果我像这样使用教练：

```
introduction.coaches 
```

然后错误就会消失。

有趣的是，不用参考介绍，我可以直接使用bs。

谁能告诉我这个错误的原因？

对我来说，我认为bs和coaches处于相同的访问级别，因此应该可以通过引用他们的名字直接访问它们。

**PS：还有一个问题，整个网页刷新后，变量coach的内容还会存在吗？因为我必须用它来进行分页。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T03:14:50.783

也许还有另一个名为 coaches 的变量，它在您的范围内具有优先权。

我建议使用不同的名称，并让[ReSharper](http://www.jetbrains.com/resharper/)警告您名称冲突。

# ios - 如何将文件放入库目录以进行 iphone 设备测试

> ID：12557955
> 
> 赞同：0
> 
> 时间：2012-09-24T01:57:02.577
> 
> 标签：ios, file, directory, storage

我已经在 ios 模拟器上测试了我的应用程序并使用以下代码：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *dictdir = [documentsDirectory stringByAppendingPathComponent:@"dict.plist"];
NSLog(dict); 
```

我找到了保存文件的路径，`dict.plist`以便以后应用程序可以使用它。

我现在正在我的设备上进行测试，我打算存储`.plist`文件的地方是

> var/mobile/Applications/......./Documents/freq.plist

首先，我知道非用户数据是要保存在库文件夹中的，那么如何更改我的代码以使路径指向`..../library/ directory`?

以及如何将我的文件实际放在这个目录中？现在使用“组织者”，我设法将文件放入应用程序沙箱，但不是在特定文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T02:03:31.873

相同的代码将在设备和模拟器上获得正确的路径，这就是它的目的。但是，如果你想复制它，你必须将它包含在你的包中，或者从互联网上下载它。你不能只用取景器复制它。要从包中复制，请使用函数[- copyItemAtURL:toURL:error:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/copyItemAtURL%3atoURL%3aerror%3a)。下载有点复杂，可能更适合单独的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T02:04:56.373

1.  只需更改`NSDocumentDirectory`为`NSLibraryDirectory`

# hibernate - JPA Hibernate 调用 Postgres 函数 Void 返回 MappingException：

> ID：12557957
> 
> 赞同：13
> 
> 时间：2012-09-24T01:57:13.387
> 
> 标签：hibernate, function, jpa, stored-procedures, postgresql-9.1

我在尝试使用 JPA 创建本机查询调用 postgres 函数时遇到一个问题：*org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111 。*

我在启动单例中创建了一个 EJB 计时器，以每 6 小时运行一次 Postgres 函数。该函数返回 void 并检查过期记录、删除它们并更新一些状态。它不接受任何参数，并且返回 void。

*   如果我使用 PgAdmin 查询工具 (select function();) 调用 postgres 函数并返回 void，则 postgres 函数运行完美。

*   当我在 Glassfish 3.1.1 上部署应用程序时，出现异常并且无法部署。

这是（缩短的）堆栈跟踪：

```
WARNING: A system exception occurred during an invocation on EJB UserQueryBean method public void com.mysoftwareco.entity.utility.UserQueryBean.runRequestCleanup()
javax.ejb.TransactionRolledbackLocalException: Exception thrown from bean
...STACK TRACE BLAH BLAH BLAH ...
Caused by: javax.persistence.PersistenceException: org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111 
```

这是代码：

首先是JPA的东西：

```
public void runRequestCleanup() {
    String queryString = "SELECT a_function_that_hibernate_chokes_on()";
    Query query = em.createNativeQuery(queryString);
    Object result = query.getSingleResult();
} 
```

这是单例调用它：

```
@Startup
@Singleton
public class RequestCleanupTimer {
    @Resource
    TimerService timerService;
    @EJB
    UserQueryBean queryBean;

    @PostConstruct
    @Schedule(hour = "*/6")
    void runCleanupTimer() {
        queryBean.runRequestCleanup();
    }
} 
```

和功能：

```
CREATE OR REPLACE FUNCTION a_function_that_hibernate_chokes_on()
  RETURNS void AS
$BODY$
    DECLARE 
        var_field_id myTable.field_id%TYPE;
    BEGIN
        FOR var_field_id IN
                select field_id from myTable 
                where status = 'some status'
                and disposition = 'some disposition'
                and valid_through < now()
        LOOP
            BEGIN
                -- Do Stuff
            END;
        END LOOP;
    END;
$BODY$
  LANGUAGE plpgsql VOLATILE
  COST 100; 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-08-26T08:02:10.413

这可能是一个 hack，但它对我有用并且非常简单。只需将查询更改为：

```
SELECT count(*) FROM your_function(); 
```

现在它返回一个正确的整数，hibernate 很高兴。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T19:59:36.003

我已经对 JPA 进行了足够的处理，试图让它运行一个存储过程。

我最终使用了带有准备好的语句的 JDBC。我花了几个小时试图将方形钉子插入圆孔中，但在 15 分钟内完成了。我调用了我的持久性单元用来获取连接的同一个 jndi 数据源，创建了一个准备好的语句并在完成后关闭它。

因此，如果您需要从（现在主要是）JPA 应用程序运行存储过程（或 Postgres 函数），这对我有用：

```
@Stateless
@LocalBean
public class UserQueryBean implements Serializable {

    @Resource(mappedName="jdbc/DatabasePool") 
    private javax.sql.DataSource ds;

    ...

    public void runRequestCleanup() {

        String queryString = "SELECT cleanup_function_that_hibernateJPA_choked_on()";
        Connection conn = null;
        PreparedStatement statement = null;
        try {
            conn = ds.getConnection();
            statement = conn.prepareCall(queryString);
            statement.executeQuery();
        } catch (SQLException ex) {
            Logger.getLogger(UserQueryBean.class.getName()).log(Level.SEVERE, null, ex);
        }finally{
            try {
                statement.close();
                conn.close();
            } catch (SQLException ex) {
                Logger.getLogger(UserQueryBean.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
        // bit of logging code here    
    }
    ...
} 
```

忽略 JPA 在服务器上运行函数或存储过程的简单能力似乎是一个可怕的疏忽；尤其是除了 void 或受影响的行数之外什么都不返回的。如果这是故意的……没有评论。

编辑：添加关闭连接。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-24T20:22:16.803

对于这个问题的未来访问者，演员也可以工作。也发布在[这个线程](https://stackoverflow.com/a/27743417/2310534)上

```
public void runRequestCleanup() {
    String queryString = "SELECT cast(a_function_that_hibernate_chokes_on() as text)";
    Query query = em.createNativeQuery(queryString);
    query.getSingleResult();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-02T17:28:06.257

当 postgres 存储过程返回 void 时，似乎会出现问题。尝试更改返回类型以返回一些虚拟值，可能是字符串。这在我的情况下有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-03T19:13:55.603

这是前一段时间发布的，但我遇到了类似的问题。如前所述，Hibernate 看起来对 void 过敏，并且每次都会尝试将您锁定为使用返回类型。从我的角度来看，这是一个很好的做法，因为您通常应该总是有一个返回，至少可以指定它是否成功：抛出异常通常是滥用。

然而，Hibernate 确实提供了一种绕过它的限制的方法：[org.hibernate.jdbc.Work](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/jdbc/Work.html)

您可以轻松地重现小班课程所需的内容：

```
class VoidProcedureWork implements Work {

    String query;

    private VoidProcedureWork(String sql) {
        query = sql;
    }

    public static boolean execute(Session session, String sql) {
        try {
            // We assume that we will succeed or receive an exception.
            session.doWork(new VoidProcedureWork(sql));
            return true;
        } catch (Throwable e) {
            // log exception
            return false;
        }
    }

    /** 
     * @see org.hibernate.jdbc.Work#execute(java.sql.Connection)
     */
    @Override
    public void execute(Connection connection) throws SQLException {
        Statement statement = null;
        try {
            statement = connection.createStatement();
            statement.execute(query);
        } finally {
            if (statement != null)
                statement.close();
        }
    }
} 
```

现在您可以随时使用

VoidProcedureWork.execute(hibernateSession, sqlQuery);

你会注意到关于这个类的两件事：1）我没有关闭连接。我离开它是因为我不知道谁打开了连接，如何以及为什么。事务中是否使用相同的连接？如果我关闭它之后有人使用它，它会崩溃吗？等等。我没有编写 Hibernate 代码，也没有使用 connection.open()。因此，我不会关闭它，并假设无论打开它都会关闭它。2）它比OOP更程序化。我知道，但我很懒：使用 VoidProcedureWork.execute(session, sql) 比使用 new VoidProcedureWork(sql).execute(session) 更容易（而且更清晰 imo）。甚至最糟糕的是：每次我想使用那个小技巧（session.doWork(new VoidProcedureWork(sql)) 和异常处理）时都重现执行代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-11T20:49:26.750

老兄！就像引用函数名一样简单。像这样：

```
public void runRequestCleanup() {
    String queryString = "SELECT \"a_function_that_hibernate_chokes_on\"()";
    Query query = em.createNativeQuery(queryString);
    Object result = query.getSingleResult();
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-05-20T20:50:49.490

将查询转换为：

```
SELECT cast(sqlFunction() as text) 
```

例如：`"SELECT cast(pushlogsToMainTable() as text)"`

它对我有用。

# php - Openid，我怎么知道用户是否登录

> ID：12557958
> 
> 赞同：0
> 
> 时间：2012-09-24T01:57:16.357
> 
> 标签：php, openid

有没有一种方法可以检查用户是否已登录？

```
if($openid->validate()) {
    // User has logged in
    $_SESSION['identity'] = $openid->identity;
} 
```

上面的代码有效吗？因为 validate 似乎没有显示任何内容。

使用 OpenID API 中提供的 openid.php 文件

有人对如何检查用户是否使用正确的帐户登录我的网站有任何建议吗？(php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:59:51.957

我使用[了 http://code.google.com/p/lightopenid/](http://code.google.com/p/lightopenid/)。包含一个文件，它处理收集登录信息，使用适当的源对其进行验证，并为您提供 openid 对象的一些属性，以确定用户是否已验证以及如何验证。

# android - 语音控制 API - 特定短语的高精度

> ID：12557970
> 
> 赞同：4
> 
> 时间：2012-09-24T01:59:23.397
> 
> 标签：android, iphone, speech-recognition, siri

我对语音控制应用程序有几个想法。不幸的是，根据我从 Siri 和 Google Voice Actions 中看到的情况，这项技术似乎还没有完全成熟。即使在完全安静的环境中，准确性也很差，以至于将其输入手机通常感觉更容易。

使任务更容易的一种方法是将系统限制为几个命令，特别选择听起来非常不同的命令，而不是将声音传递给服务并仅获取文本。

所以我的要求是：

*   当被要求使用一组有限的命令时，准确性非常高
*   最好在移动设备上工作，但仅限 PC 的库也可能有用
*   离线再次是可取的，但不是必需的
*   无需开源 - 许可很好

是否存在这样的 API 或软件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T22:16:05.903

我最近参与了一个开发基于移动语法的语音识别应用程序平台的项目，具有以下功能：

*   语法是用[Grammatical Framework](http://www.grammaticalframework.org/)编写的，请参阅：http: [//kaljurand.github.com/Grammars/](http://kaljurand.github.com/Grammars/)
*   服务器基于[Sphinx](http://cmusphinx.sourceforge.net/)，见：[https ://github.com/alumae/ruby-pocketsphinx-server](https://github.com/alumae/ruby-pocketsphinx-server)
*   服务器可以从Android访问，见：[https ://code.google.com/p/recognizer-intent/](https://code.google.com/p/recognizer-intent/)

所有组件都是开源的，设置自己的服务器并将系统移植到您的语言应该不会太难，因为您拥有该语言的声学模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:12:21.920

使用支持语法 ( [SRGS](http://www.w3.org/TR/speech-grammar/) ) 的语音识别系统将提高您的识别率。语法通过将预期的单词和短语指定为语音识别系统用来获得匹配的规则来限制搜索空间，因此可以提高性能和识别率。

[VoiceXML](http://www.w3.org/TR/voicexml20/)是一种很好的语言，用于开发使用电话作为交互模式的语音应用程序。我所说的使用电话作为交互模式的意思是，用户实际上拨打了一个[IVR 系统](http://www.voxeo.com/products/voicexml-ivr-platform.jsp)，该系统接听电话，然后通过录制的音频提示和通过语音或电话键盘输入的用户输入开始与用户交互。VoiceXML 不适用于具有原生 Android 应用程序或 Web 应用程序等可视界面的移动应用程序。要开发使用语音的视觉应用程序，您可以使用像[Nuance 的移动工具](http://www.nuance.com/for-business/by-solution/mobile-application/index.htm)这样的工具，它的价格可能很高。[或者像Sphinx](http://cmusphinx.sourceforge.net/)这样的开源软件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T03:45:50.970

VoiceXML 和[SRGS](http://en.wikipedia.org/wiki/Speech_Recognition_Grammar_Specification)可能是您搜索的良好起点。可悲的是，开源世界中并没有太多东西，因为“正确”处理这类东西将意味着一大笔收入。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T14:09:15.327

大多数基于云的语音识别 API（Google、AT&T、Siri 等）不允许使用自定义[SRGS](http://www.w3.org/TR/speech-grammar/)语法来提高准确性。这真的很不幸。

一种可能性是结合[Voxeo](http://www.voxeo.com)的两种技术，即[Tropo](http://tropo.com)和[Phono](http://phono.com)。前者是基于 API 的语音平台，比 VoiceXML 平台更易于使用，后者是用于从浏览器进行（和控制）语音呼叫的 jQuery 插件。Tropo 支持 SRGS 语法。

# xml - 根据 XSLT 中的子节点值选择节点

> ID：12557975
> 
> 赞同：11
> 
> 时间：2012-09-24T02:00:42.123
> 
> 标签：xml, xslt, xpath, xslt-1.0

我只想选择那些子节点值与某个值匹配的节点。

这是我的原始 XML：

这是我的原始 XML

```
<Entry>
 <Name>AAA</Name>
 <line id="1">A</line>
 <line id="2">B</line>
</Entry>
<Entry>
 <Name>BBB</Name>
 <line id="1">C</line>
 <line id="2">D</line>
</Entry>
<Entry>
 <Name>AAA</Name>
 <line id="1">E</line>
 <line id="2">F</line>
</Entry>
<Entry>
 <Name>CCC</Name>
 <line id="1">G</line>
 <line id="2">H</line>
</Entry> 
```

我想提取 Name = 'AAA' 的所有条目，因此结果将是：

```
<Entry>
 <Name>AAA</Name>
 <line id="1">A</line>
 <line id="2">B</line>
</Entry>
<Entry>
 <Name>AAA</Name>
 <line id="1">E</line>
 <line id="2">F</line>
</Entry> 
```

我仅限于使用 XSLT 1.0。

请提供任何指导。我被困在如何为不匹配的其他人删除所有子节点。

问候， 拉胡尔

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-24T02:24:49.750

以下将选择子节点“名称”等于 AAA 的所有入口节点。

```
//Entry[Name = "AAA"] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-21T16:44:45.643

尝试这样的事情（添加列表元素以获得格式良好的 xml）：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:template match="/">
    <List>
      <xsl:apply-templates select="//Entry[Name='AAA']"/>
    </List>
  </xsl:template>

  <xsl:template match="Entry">
    <xsl:copy-of select="."/>
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T02:03:06.763

怎么样

```
//Name[text()='AAA']/.. 
```

查找所有`Name`文本内容为 AAA 的节点，然后向上移动一级到 Name 的父节点，即`Entry`.

# html - 禁用 WordPress TwentyEleven 的响应式结构

> ID：12557976
> 
> 赞同：0
> 
> 时间：2012-09-24T02:00:45.993
> 
> 标签：html, wordpress, css, responsive-design

我创建了一个 211 的子主题并复制了 header.php 并从文件中删除了以下代码：

```
<meta name="viewport" content="width=device-width" /> 
```

另外，我从以下位置删除了所有样式（在 style.css of 211 中）：

```
/* =Responsive Structure
----------------------------------------------- */

@media (max-width: 800px) { 
```

一直到之前：

```
/* =Print
----------------------------------------------- */ 
```

但是页面宽度仍然在[此处](http://fusion.fusionconstruction.co.uk/)的站点上响应，并且当您调整浏览器窗口大小时所有元素相互重叠。

当我调整窗口大小或使用移动/平板电脑浏览器时，我不需要调整页面大小或移动任何元素。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T02:38:12.590

你有

```
#page {
margin: 2em auto;
max-width: 1000px;
} 
```

在你的 style.css 中设置。将此更改为

```
#page {
    margin: 2em auto;
    width: 1000px;
} 
```

设置显式宽度并阻止页面调整大小。

# php - 无法覆盖 s3 中的内容处置标头

> ID：12557980
> 
> 赞同：6
> 
> 时间：2012-09-24T02:01:11.250
> 
> 标签：php, amazon-s3, amazon-web-services

我正在使用以下 php 函数来临时访问公共文件以获取私有文件。

```
function get_s3_signed_url($bucket, $resource, $AWS_S3_KEY, $AWS_s3_secret_key, $expire_seconds) {
    $expires = time()+$expire_seconds;
    // S3 Signed URL creation
    $string_to_sign = "GET\n\n\n{$expires}\n/".str_replace(".s3.amazonAWS.com","", $bucket)."/$resource";
    $signature = urlencode(base64_encode((hash_hmac("sha1", utf8_encode($string_to_sign), $AWS_s3_secret_key, TRUE))));

    $authentication_params = "AWSAccessKeyId=".$AWS_S3_KEY;
    $authentication_params.= "&Expires={$expires}";
    $authentication_params.= "&Signature={$signature}";

    return $link = "http://s3.amazonAWS.com/{$bucket}/{$resource}?{$authentication_params}";
} 
```

我想添加内容处置标头，以便我可以将文件名更改为`test.mp3`当用户尝试访问此 url 时默认文件名为`982jdjd2p3.mp3`

```
$privateUrl = array('privateUrl' => get_s3_signed_url('testbucket', '982jdjd2p3.mp3', $my_aws_key, $my_aws_secret_key, 60)); 
```

我尝试将以下代码行添加到函数中

```
$file_name = 'test.mp3';       
$authentication_params.= "&Content-Disposition={$file_name}"; 
```

但是，当我点击网址时

`http://s3.amazonAWS.com/testbucket/982jdjd2p3.mp3?AWSAccessKeyId=***&Expires=***&Signature=***&Content-Disposition=test.mp3`

建议的文件名将另存为`982jdjd2p3.mp3`

如何使用此函数覆盖 s3 GET 请求的内容处置标头？

**也可以看看**

[Amazon S3 更改文件下载名称](https://stackoverflow.com/questions/2611432/amazon-s3-change-file-download-name)

**编辑**

这是使用此函数通过获取请求重命名文件的最新尝试。

```
function get_s3_signed_url($bucket, $resource, $AWS_S3_KEY, $AWS_s3_secret_key, $expire_seconds) {
    $expires = time()+$expire_seconds;
    // S3 Signed URL creation
    $filename='moot.mp3';
    $disposition = "response-content-disposition=" . urlencode("attachment; filename={$filename}");            

    $string_to_sign = "GET\n\n\n{$expires}\n/".str_replace(".s3.amazonAWS.com","", $bucket)."/$resource";
    $string_to_sign .= "?{$disposition}";
    $signature = urlencode(base64_encode((hash_hmac("sha1", utf8_encode($string_to_sign), $AWS_s3_secret_key, TRUE))));

    $authentication_params = "AWSAccessKeyId=".$AWS_S3_KEY;  
    $authentication_params.= "&Expires={$expires}";
    $authentication_params.= "&Signature={$signature}";
    $authentication_params.= "&{$disposition}";

    return $link = "http://s3.amazonAWS.com/{$bucket}/{$resource}?{$authentication_params}";
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T07:59:23.880

您的函数的问题是标头值应该在最终的超链接中编码，而不是用于签名。以下函数更正了这一点：

```
function get_s3_signed_url($bucket, $resource, $AWS_S3_KEY, $AWS_s3_secret_key, $expire_seconds, $save_as)
{
    $expires = time()+$expire_seconds;
    // S3 Signed URL creation
    $headers = array(
        'response-content-disposition' => 'attachment; filename=' . $save_as,
    );
    $resource = str_replace(array('%2F', '%2B'), array('/', '+'), rawurlencode($resource));

    $string_to_sign = "GET\n\n\n$expires\n/$bucket/$resource";
    $final_url = "http://s3.amazonaws.com/$bucket/$resource?";

    $append_char = '?';
    foreach ($headers as $header => $value) {
        $final_url .= $header . '=' . urlencode($value) . '&';
        $string_to_sign .= $append_char . $header . '=' . $value;
        $append_char = '&';
    }

    $signature = urlencode(base64_encode(hash_hmac('sha1', $string_to_sign, $AWS_s3_secret_key, true)));

    return $final_url . "AWSAccessKeyId=$AWS_S3_KEY&Expires=$expires&Signature=$signature";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T03:54:31.960

[您的Content-Disposition](http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html)格式无效，请指定`disposition-type`。

例子： `Content-Disposition: attachment; filename=test.mp3;`

`response-content-disposition`在签名和参数中使用：

```
$disposition = "response-content-disposition=" . urlencode("attachment; filename={$filename}");
/* ... */
$string_to_sign .= "?{$disposition}";
/* ... */
$authentication_params.= "&{$disposition}"; 
```

# mongodb - MongoDB更新查询：更新文档时，过滤未更新的文档是否更好？

> ID：12557987
> 
> 赞同：1
> 
> 时间：2012-09-24T02:02:06.743
> 
> 标签：mongodb

MongoDB 在更新文档方面有多聪明，如果它实际上不会改变任何东西，它会知道不打扰“更新”文档吗？

比较以下两个更新查询：

```
db.test.update({}, {'$set': {'something': true}})
db.test.update({'something': {'$ne': true}}, {'$set': {'something': true}}) 
```

目的是将集合`something`中所有文档的属性设置`test`为`true`.

假设某些文档可能已经将`something`属性设置为`true`。

让我们不考虑索引，因为我认为这不是重点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T03:26:12.530

我认为这并没有太大的区别，因为 MongoDB 无论如何都必须遍历所有文档（因为我们没有使用索引）。

此外，更新是一个三步操作：

1.  从磁盘获取包含文档的页面到 RAM（如果还没有）
2.  更新内存
3.  将脏页刷新到磁盘

第一部分无论如何都会发生。现在，如果我们在第二步进行检查，它会消耗更多的 CPU，但它会用可能减少的脏页数量来抵消。我的直觉是你的第一行没有检查和更新所有文件。

我希望核心 10gen 的人会出现在这个话题中，并告诉我们到底发生了什么。

# multithreading - 异步获取数据的推荐策略

> ID：12557988
> 
> 赞同：0
> 
> 时间：2012-09-24T02:02:09.243
> 
> 标签：multithreading, entity-framework

假设我需要对数据库执行几个不同的查询。每个查询返回不同的数据。每个查询都将在不同于 UI 线程的线程上执行。

我应该为对数据库的所有查询使用一个线程，还是每个查询可以自由使用一个线程？推荐的做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T03:37:35.783

单个`ObjectContext/DbContext`实例**不**应该用于**并发**数据库访问，因为它不是为这种情况设计的。

与由不同上下文实例加载的对象进行交互很容易出错，因为所有相关的实体实例都应该属于单个上下文实例。否则，您必须附加和分离实体。

如果所有操作都是读取，那么最好使用多个线程来检索数据，而对于 CRUD 操作，建议使用带有线程的单个上下文实例。

# objective-c - 简单的数学iOS？

> ID：12557996
> 
> 赞同：0
> 
> 时间：2012-09-24T02:03:41.207
> 
> 标签：objective-c, math, integer, equation

所以在我的应用程序中，我试图在我的一种方法中做一个简单的数学运算，而不使用大量的 if/else 语句。

所以我有一个名为“StartInt”的整数，最大值为 13。现在我需要得到的是 FinishInt 一个整数，它将成为这种模式的结果：

```
StartInt: 13 FinishInt: 1  
StartInt: 12 FinishInt: 2 
StartInt: 11 FinishInt: 3 
```

等等......一直到 StartInt 为 1 并且 FinishInt 为 13。无论如何我将如何完成这个？我知道这一定很简单，但我的数学不是那么好！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T02:13:08.553

> All the way down until StartInt is 0 and FinishInt is 13\. Anyway how would I accomplish this?

That won't quite work if `startInt = 13` gives `finishInt = 1` and you want a `finishInt` to increment 1 for each decrement of `startInt`. Check out the following table:

```
13   1
12   2
11   3
10   4
 9   5
 8   6
 7   7
 6   8
 5   9
 4  10
 3  11
 2  12
 1  13

```

So you're off by 1 at either the beginning or end of your sequence. Nevertheless, it looks like you want something like this:

```
(int) calculateFinish(int startInt)
{
    int finishInt = -1;
    if (startInt >= 0 && startInt <= 13) {
        finishInt = 14 - startInt;
    }
    return finishInt;
} 
```

That'd give a value of 14 for `finishInt` when `startInt = 0`.

# javascript - 如何使用 Javascript 或 jQuery 在选项属性中添加“选定”？

> ID：12557999
> 
> 赞同：8
> 
> 时间：2012-09-24T02:03:55.323
> 
> 标签：javascript, jquery

下面是选择选项的代码，并使用数据库中的 php 生成，我尝试`selected="selected"`使用`value="4"`jQuery 或任何 javascript 添加：

```
<select id="countryselect" name="country">
<option value="1">Afghanistan</option>
<option value="2">Albania</option>
<option value="3">Algeria</option>
<option value="4">Malaysia</option>
<option value="5">Maldives</option>
</select> 
```

我尝试参考这篇[文章](https://stackoverflow.com/questions/7473835/add-selected-attribute-using-the-option-value)，但仍然不能.. 下面是我当前的脚本：

```
<script>
localStorage.setItem("Select1", "Malaysia");
    $('#countryselect').find('option').each(function(i,e){
        if($(e).val() == localStorage.getItem("Select1")){
            $('#countryselect').prop('selectedIndex',i);
        }
    });
</script> 
```

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-24T02:10:12.073

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-24T02:20:29.227

The `selected` attribute is a [boolean attribute](http://www.w3.org/TR/html4/intro/sgmltut.html#h-3.3.4.2), its presence sets the value of the related DOM property to `true`. If the attribute is absent, the value of the selected property is `false`.

If an option has the selected **attribute**, then when the page is first loaded, or the form the control is in is reset, that option will be the selected option.

If the option's selected **property** is set to `true`, then that option will be selected. However, if the form is reset, the default selected option will be selected (i.e. the one with the selected **attribute**, or the first option, or none).

To set the selected attribute (i.e. make the option the default selected option):

```
var select = document.getElementById('countryselect');
var option;

for (var i=0; i<select.options.length; i++) {
  option = select.options[i];

  if (option.value == '4') {
  // or
  // if (option.text == 'Malaysia') {
     option.setAttribute('selected', true);

     // For a single select, the job's done
     return; 
  } 
} 
```

Note that this may not make the option the currently selected option, it will just add the selected attribute. To make sure it's selected (if that is what is required), the also set the selected property to `true` (see below).

Note that the second argument to [setAttribute](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-F68F082) is supposed to be a string that is used to set the attribute's value. However, the selected attribute doesn't have a "setable" value, so the second argument is ignored (e.g. even `false` will still set the attribute and make the option the default selected option). That causes some confusion. :-)

To set the selected property (i.e. just make the option the current selected option):

```
var select = document.getElementById('countryselect');
var option;

for (var i=0; i<select.options.length; i++) {
  option = select.options[i];

  if (option.value == '4') {
  // or
  // if (option.text == 'Malaysia') {
     option.selected = true;
     return;
  } 
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-24T02:10:43.113

`localStorage.getItem("Select1")` will return Malaysia and `$(e).val()` will return 1,2...5 in each loop. So your condition will never be true. Instead use

```
<script>
localStorage.setItem("Select1", "4");
    $('#countryselect').find('option').each(function(i,e){
        if($(e).val() == localStorage.getItem("Select1")){
            $('#countryselect').prop('selectedIndex',i);
        }
    });
</script> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-07-10T14:33:42.663

As of jQuery 1.6 "To retrieve and change DOM properties such as the checked, selected, or disabled state of form elements, use the .prop() method."

```
$("#countryselect option[value=4]").prop("selected", "selected") 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-24T02:07:12.737

你试一试

```
$("#countryselect").val('4')
    //OR

$("#countryselect option").val('4')​.attr("selected", true)​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

检查这个[小提琴](http://jsfiddle.net/f5e8m/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-24T02:17:07.327

```
$('#countryselect > option[value *= "4"] ').attr('selected',true); 
```

this will work