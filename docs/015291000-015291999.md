# StackOverflow 问答 15291000-15291999

# javascript - 为什么使用 linq2indexedDB 插入到 IndexedDB 失败，我该如何检索错误？

> ID：15291001
> 
> 赞同：2
> 
> 时间：2013-03-08T09:47:06.717
> 
> 标签：javascript, indexeddb, linq2indexeddb

我正在使用 linq2indexedDB 包装器来处理 IndexedDB。我正在使用 TypeScript，但我认为这与问题无关——它应该只是解释稍微奇怪的语法。我创建了我的数据库并添加了一些对象存储和索引（代码缩短以保持重点）：

```
var databaseDefinition = [{
        version: config.version,
        objectStores: [
            { name: "Regions", objectStoreOptions: { autoIncrement: false, keyPath: "ID" } },
            { name: "Countrys", objectStoreOptions: { autoIncrement: false, keyPath: "ID" } }
            // etc.
        ],
        indexes: [
            { objectStoreName: "Countrys", propertyName: "RegionID", indexOptions: { unique: true, multirow: false } }
            // etc.
        ]
    }]; 
```

这可行，通过在 chrome F12 工具中检查我的数据库结构，我可以看到预期的 objectStores。然后我尝试一个简单的插入操作：

```
 var region = serverData.Regions[0];
    this.db.linq.from("Regions").insert(region, region.ID).then((args) => {
        tracer.Trace("Insert success: " + args);
    }, (args) => {
        tracer.Trace("Insert failure: " + args);
    }); 
```

这失败了，但`args`返回的对象是未定义的，所以我不知道为什么。谁能解释这个问题可能是什么以及我该如何追踪它？

**编辑**（删除了附加代码，因为它与问题并不严格相关。打开日志记录，如下面 Kristof 的回答中所述，有助于追踪问题，这在下面我自己的回答中得到了解决）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:25:43.177

不是 100% 确定问题是什么，但是当定义了键路径并且对象中存在键路径的值时，无需提供键。

我看不到您的所有代码，但是您是否创建了 linq2indexeddb 对象的新实例？

如果你这样做了，你可以执行以下操作：

```
var db = window.linq2indexedDB("dbName", dbConfig, true); 
```

最后一个参数将启用日志记录，所有日志结果都将打印在控制台输出中。

另一种方法是

```
linq2indexedDB.prototype.utilities.debug(true); 
```

如果您对 linq2indexeddb 有任何其他问题，请告诉我。我写的 ;）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:10:24.817

这在我使用的 linq2indexedDB 版本中是一个小问题。常量`IDBTransaction.READ_ONLY`和`IDBTransaction.READ_WRITE`已弃用（[ref](https://developer.mozilla.org/en-US/docs/IndexedDB/Using_IndexedDB#Adding_data_to_the_database)）。快速搜索和替换，用字符串替换上面的内容`'readonly'`，`'readwrite'`分别为我解决了这个问题。

Kristof 提到可能还有一个 shim 来处理这个问题，但我似乎在从[codeplex](https://linq2indexeddb.codeplex.com/releases)下载的最新版本中没有这个。

# google-plus - 更改 Google+ 信息中的照片

> ID：15291002
> 
> 赞同：8
> 
> 时间：2013-03-08T09:47:07.623
> 
> 标签：google-plus

谁能告诉我照片在 Google+ 上发布后是否可以更改？

EG 我发布了一些文字并在帖子下方添加了一张图片（在添加链接、视频、照片部分）。那么，我现在可以编辑那个帖子并只更改照片吗？当我尝试这样做时，G+ 让我可以选择仅编辑链接，而不是照片。

有没有人遇到过这样的问题，有解决办法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T06:33:39.403

这是不可能的。您必须删除帖子并发布新帖子。

# java - 无法使用 www URL 访问 GlassFish 应用程序

> ID：15291008
> 
> 赞同：0
> 
> 时间：2013-03-08T09:47:17.153
> 
> 标签：java, url, jsf-2, glassfish-3, no-www

当我在本地或服务器上部署我的应用程序时，我始终可以通过`http://localhost:8080/myApp/`或访问该应用程序`http://example.com/myApp`。但是，每当我添加`www`到任一 URL 时，在 Chrome 上，我都会收到错误消息`Oops! Google Chrome could not find www.localhost:8080`。

如果您能告诉我如何使我的应用程序在URL`www`和`non-www`URL 上可用，我将不胜感激。

此致，

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:31:18.017

这可能是 DNS 设置。如果您的本地主机正在发布页面，那么您的服务器正在发布页面。*假设您正在远程访问该页面（通过互联网）*

您将需要 2 个不同的 DNS 记录来指向您的页面。

```
    主机（域）（类型）目标
    _______________ ______ __________
    www.example.com A [服务器 ip]
    example.com A [服务器 ip]

```

您也可以使用 CNAME 记录来完成此操作。

# c# - 使用不同的用户名连接到同一服务器

> ID：15291009
> 
> 赞同：7
> 
> 时间：2013-03-08T09:47:17.500
> 
> 标签：c#, wpf, ftp

我正在使用以下方法列出文件夹的内容：

```
private void TestFtp()
{
    try
    {
        // List all of the files from FTP
        FtpWebRequest ftprequest = (FtpWebRequest)WebRequest.Create(new Uri("ftp://m3database/recover/"));

        ftprequest.Credentials = new NetworkCredential("myusername1", "********");

        ftprequest.Method = WebRequestMethods.Ftp.ListDirectory;
        ftprequest.UsePassive = false;
        ftprequest.Proxy = null;            

        using (var resp = ftprequest.GetResponse())
        {
            StreamReader reader = new StreamReader(resp.GetResponseStream());

            MessageBox.Show(reader.ReadToEnd());
        }
    }
    catch (Exception e)
    {
        MessageBox.Show(e.Message);
    }
} 
```

我正在通过 FTP 连接到单个 Linux 服务器。我正在使用凭据进行`myusername1`连接`myusername2`。

如果我使用`myusername1`凭据，我可以在使用此功能时列出目录内容，但是如果我使用`myusername2`它会出现以下错误：

> 远程服务器返回错误：(503) 错误的命令序列。

**我尝试过的事情：**

1.  我试过设置`ftprequest.KeepAlive = false`。
2.  我尝试使用 UsePassive、Proxy 等的所有排列。
3.  我可以使用启用了安全 FTP 的 FileZilla 连接到两个用户名，并且它们都可以工作。如果不启用 FTP，则两者都不会连接。

奇怪的是，我的代码将`myusername1`在我的代码中未启用 SSL 的情况下进行连接。

总之：

*   `myusername1`并且`myusername2`不会在未启用安全 FTP 的情况下连接到 FileZilla。
*   `myusername1``ftprequest.EnableSsl`在没有启用的情况下在我的 C# 方法中工作。
*   `myusername2`无论是否`ftprequest.EnableSsl`启用，都无法在我的 C# 方法中工作。
*   `using()`在我的声明行触发了异常。

**我刚刚注意到的其他事情，当我将鼠标悬停在我的 上时`ftprequest`，它会显示 NotSupportedException，但是无论我使用哪一组凭据，都会出现这种情况**

`ftprequest`如果我在使用时将鼠标悬停在我的初始位置上`myusername2`，它会显示在我之前抛出的异常`using()`：

![在此处输入图像描述](../Images/25bf1aca00ce56f2253bb4501ac43b85.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:19:44.523

这可能是在黑暗中拍摄，但您是否尝试过使用 CredentialCache？

```
 System.Net.NetworkCredential nc = new System.Net.NetworkCredential("user", "password");
        System.Net.CredentialCache cc = new System.Net.CredentialCache();
        cc.Add(new Uri("ftp://m3database"), "Basic", nc);
        System.Net.FtpWebRequest ftprequest = (System.Net.FtpWebRequest)System.Net.WebRequest.Create("ftp://m3database/recover/");
        ftprequest.Credentials = cc;
        ftprequest.Method = System.Net.WebRequestMethods.Ftp.ListDirectory;

         using (var resp = ftprequest.GetResponse())
            {
                StreamReader reader = new StreamReader(resp.GetResponseStream());

                MessageBox.Show(reader.ReadToEnd());
            }
        } 
```

credentialcache 还为您提供了一系列身份验证类型选项（“NTLM”、“Digest”、“Kerberos”、“Negotiate”...）。

更多在这里 --> [http://msdn.microsoft.com/en-us/library/59x2s2s6.aspx](http://msdn.microsoft.com/en-us/library/59x2s2s6.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T15:47:11.303

> 我正在通过 FTP 连接到单个 Linux 服务器。

CHMOD 第二个用户的 FTP 服务器/文件夹上的权限，它们应该与第一个用户相同。

CHMOD 777 将允许需要访问..

# java - java.sql.Date 和 java.sql.Time 到 org.joda.time.DateTime

> ID：15291010
> 
> 赞同：2
> 
> 时间：2013-03-08T09:47:19.527
> 
> 标签：java, date, datetime, time, jodatime

正如问题标题所说，

我有`java.sql.Date`和`java.sql.Time`作为输入

现在我想将它们转换为一个`DateTime`对象，但是由于不推荐使用 getDay、getYear 等方法，我无法弄清楚如何将两者结合起来......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:12:31.033

看看这是否对你有用。

```
Date date = new Date(System.currentTimeMillis()); // Prints 2013-03-08
Time time = new Time(System.currentTimeMillis()); // Prints 15:40:33

String myDate = date + " " + time;

SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
java.util.Date utilDate = new java.util.Date();
try {
    utilDate = sdf.parse(myDate); // You get a Java Util Date object(Fri Mar 08 15:40:33 IST 2013)
} catch (ParseException pe) {
   // TODO something.
}

DateTime dateTime = new DateTime(utilDate); // You get your JODA object. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:14:35.440

您可以从日期创建一个 DateTime 对象并将 Duration 对象添加到该 DateTime 对象，从而生成一个对象，该对象是您的输入表示的 Date + Time 瞬间。

类似于以下内容：

```
Date d = //your Date
Time t = //your time

DateTime result = new DateTime(d).plus(t.getTime()); 
```

这将产生一个表示您想要的瞬间的不可变对象......我正确理解了您的问题，而您所追求的是一种“添加”两个代表时间的不同类的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:10:04.110

只需对 java.sql.Time 做一些技巧：计算持续时间。java.sql.Time 将日期组件隐式设置为 1970 年 1 月 1 日。

```
 java.sql.Date epoch = new Date(70, 0, 1);
    java.sql.Date date = new Date(113, 2, 8);
    java.sql.Time time = new Time(1, 1, 1);
    DateTime dt = new DateTime(date.getTime())
            .plus(time.getTime() - epoch.getTime());
    System.out.println(date);
    System.out.println(time);
    System.out.println(dt); 
```

# tfs - Git 存储库和 TFS 存储库

> ID：15291013
> 
> 赞同：2
> 
> 时间：2013-03-08T09:47:32.257
> 
> 标签：tfs, git-tf

曾几何时，我们有一个 TFS 存储库。我们想迁移到 Git。当时我们只使用了最新的工作版本，将其复制到一个新的 git repo 并开始着手处理。

然而，由于 TFS 的退役，我们希望将 TFS 存储库克隆到 Git（使用 git-tf）并在此基础上重新调整我们的更改。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:45:13.470

假设您只是在谈论源代码（TFS 也是一个工作项跟踪器，构建服务器等等）

**--deep**参数将克隆所有 TFS 变更集

```
git tf clone <tfsurl> <teamproject> --deep 
```

*更新*：请记住，这不考虑链接的工作项、分支、标签。

**当心**：对于大型存储库，这将需要一段时间......

进一步阅读：[http ://gittf.codeplex.com/wikipage?title=Clone&referringTitle=Home](http://gittf.codeplex.com/wikipage?title=Clone&referringTitle=Home)

# eclipse - Eclipse + Tomcat：Web 应用程序检查 TLD，如何停止？

> ID：15291016
> 
> 赞同：0
> 
> 时间：2013-03-08T09:47:43.067
> 
> 标签：eclipse, tomcat7

我有一个 Maven 项目，它给了我一个战争文件。

如果我将它直接部署到 Tomcat7.0.33，它似乎工作正常。

如果我从 Eclipse 内部启动 tomcat，那么我会在查找 TLD 时遇到错误

即 JSTL tld 缺失和“ [http://www.springframework.org/security/tags](http://www.springframework.org/security/tags)无法在 web.xml 或随此应用程序部署的 jar 文件中解析”

谁能告诉我为什么？

它几乎就像属性 '<constant name="struts.devMode" value=" **false** " />' 已设置为 true。

任何想法都会很棒！

谢谢杰夫波特

编辑：战争是一样的。通过 BeyondCompare 检查。如果我找到解决方案，我会发布它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:27:51.147

1.  您在两种情况下（独立/日食）都使用相同的tomcat实例吗？

2.  您确定在这两种情况下部署完全相同的罐子吗？在 Eclipse 中检查您的 Web 项目的部署程序集是什么（单击 Web-Project -> 选择 Web 项目的属性 -> 单击部署程序集），您可以看到使用 eclipse 时部署了什么）？

很难说到底出了什么问题，但是如果您在两种情况下都有相同的 tomcat 实例，那么只有在部署的 jar 中才会出现问题（并非所有都部署在 eclipse 中，或者部署了错误的版本，或者部署了太多并且一些罐子与 Tomcat 罐子冲突）。

我有类似的问题，但很久以前。我记得有一个库版本问题。我部署的这与一些 tomcat jars 冲突。

# sql-server - 使用 mssql_query 更新数据库时出错

> ID：15291026
> 
> 赞同：0
> 
> 时间：2013-03-08T09:48:16.483
> 
> 标签：sql-server, quoted-identifier, ansi-nulls

我`mssql_query`用来连接到现有的**SQL Server 2008 Database**。

`SELECT`查询没问题，但是当我运行`UPDATE`如下查询时：

```
mssql_query("UPDATE TABLENAME SET fieldname = 1 WHERE Pk = '".$pk."'"); 
```

我收到此错误：

> UPDATE 失败，因为以下 SET 选项的设置不正确：'ANSI_NULLS、QUOTED_IDENTIFIER、CONCAT_NULL_YIELDS_NULL、ANSI_WARNINGS、ANSI_PADDING'。验证 SET 选项对于索引视图和/或计算列上的索引和/或过滤索引和/或查询通知和/或 XML 数据类型方法和/或空间索引操作是否正确。（16 级）

这是我到数据库的连接代码：

```
$server = 'SRVSQL';

// Connect to MSSQL
$link = mssql_connect($server, 'xx', 'xxxxxx');

if (!$link) {
    die('Something went wrong while connecting to MSSQL');
}

$conn = mssql_select_db('xxxxxxx',$link); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:13:08.137

您可能必须通过打开设置来明确更改设置。您可以通过在 UPDATE 语句之前发出以下查询来做到这一点：

```
SET 
  ANSI_NULLS, 
  QUOTED_IDENTIFIER, 
  CONCAT_NULL_YIELDS_NULL, 
  ANSI_WARNINGS, 
  ANSI_PADDING 
ON; 
```

如果有其他设置产生错误，则可能也必须更改这些设置。

另请参阅：[回答：更新失败，因为以下 SET 选项的设置不正确：'ANSI_NULLS，QUOTED_IDENTIFIER'](http://www.julian-kuiters.id.au/article.php/set-options-have-incorrect-settings)

# python - Matplotlib 添加特定刻度呈现轴最大值 - 多尺度单观察

> ID：15291032
> 
> 赞同：5
> 
> 时间：2013-03-08T09:48:42.913
> 
> 标签：python, matplotlib, plot, scipy

尝试将观察分别绘制到每个观察的多个尺度，我设法产生了以下图：

![在此处输入图像描述](../Images/23df3b60f2cf670fe93d0919ef9db48d.png)

但是，我想**添加一个刻度，表示每个刻度中的 y-max**值，无论它与前一个刻度之间的差距如何。一个这样的情节的例子如下所示。它在 y-max 是滴答间隔的倍数时产生。

![在此处输入图像描述](../Images/ada4b097af65194ec4c7445ae2ed8905.png)

谢谢，F。

这是用于生成这些示例的代码。

```
import numpy as np
import pylab as pl
import matplotlib as plt
import matplotlib.ticker as ticker
import matplotlib.transforms

def add_scales(fig, axes, scales, subplot_reduction_factor=0.1, margin_size=50):
    nb_scales = len(scales)
    b,l,w,h = zoom_ax.get_position().bounds

    _, ymax = axes.get_ylim()

    # Saves some space to the right so that we can add our scales
    fig.subplots_adjust(right=1-(subplot_reduction_factor)*nb_scales)

    for (n, (vmin, vmax, color, label, alignment)) in enumerate(scales):

        # Adjust wrt. the orignial figure's scale 
        nax = fig_zoom.add_axes((b,l,w,(h * alignment) / ymax))
        nax.spines['right'].set_position(('outward', -40+n*margin_size))
        nax.set_ylim((vmin,vmax))

        # Move ticks and label to the right
        nax.yaxis.set_label_position('right')
        nax.yaxis.set_ticks_position('right')

        # Hides everything except yaxis
        nax.patch.set_visible(False)
        nax.xaxis.set_visible(False)
        nax.yaxis.set_visible(True)
        nax.spines["top"].set_visible(False)
        nax.spines["bottom"].set_visible(False)

        # Color stuff
        nax.spines['right'].set_color(color)
        nax.tick_params(axis='y', colors=color)
        nax.yaxis.set_smart_bounds(False)
        #nax.yaxis.label.set_color(color)

        if label != None:
            nax.set_ylabel(None)

if __name__ == '__main__':

    a=(np.random.normal(10,5,100))

    a=np.linspace(0,100,100) 
    c=np.linspace(0,80, 100)
    d=np.linspace(0,40,100)

    fig_zoom = plt.pyplot.figure()
    zoom_ax = fig_zoom.add_subplot(1,1,1)

    zoom_ax.plot(a,c)
    zoom_ax.plot(a,d)
    zoom_ax.set_title('Zoom')
    zoom_ax.set_xlabel('A')
    zoom_ax.set_ylabel('B')
    zoom_ax.set_ylim((0,100))
    zoom_ax.grid()
    add_scales(fig_zoom, 
               zoom_ax, [(0,.55,'green',None,40),
                          (0,.85,'blue',None,80)])

    fig_zoom.savefig(open('./test.svg','w'),format='svg') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T12:05:56.930

您可以将最高 ytick 值设置为最大值。如果第二高 ytick 值和您的最大值非常接近，则标签可能会混乱。

尝试将此添加到您的循环中：

```
tcks = nax.get_yticks()
tcks[-1] = vmax
nax.set_yticks(tcks) 
```

![在此处输入图像描述](../Images/ee9d5a63d39c8240315f4e8f49632bee.png)

# ruby - 如何使用 Ruby/Rake 在 .NET 项目文件中设置版本号？

> ID：15291033
> 
> 赞同：1
> 
> 时间：2013-03-08T09:48:43.057
> 
> 标签：ruby, xml, rake, albacore

我们正在将构建环境从 NAnt 迁移到 Rake。必须重写一些 NAnt 任务。在这种情况下，[XmlPoke 任务](http://nant.sourceforge.net/release/0.91/help/tasks/xmlpoke.html)（NAntContrib 库的一部分）。使用 Ruby 可以很容易地做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:38:35.913

我将回答我以为您要问的问题：如何更新程序集版本号。但我从您的回答中看到，您对一般 XML 更新（XML poke 任务的副本）感兴趣。

### 如何使用 Ruby/Rake/Albacore 更新程序集版本？

我对 .NET 项目的建议是始终更新[程序集信息文件](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.applicationservices.assemblyinfo.aspx)中的版本。不是通过直接编辑`csproj`. 而 Albacore 包含执行此操作的方法，请使用[AssemblyInfo Task](https://github.com/Albacore/albacore/wiki/AssemblyInfo-Task)。

### 如何重新创建 NAnt xmlpoke 任务？

实际上，我以 Albacore 的自定义任务的风格编写了几个 .NET 特定的[文件更新](https://github.com/anthonymastrean/fileupdatetasks#appconfig)任务。我打电话给他们`apprc`（用于重写 CLI 资源文件，这些文件有愚蠢的编码问题）。而且`appconfig`，它确实适用于任何 XML 文件。

信息在自述文件中，但它的工作方式与 xmlpoke 任务略有不同。

```
appconfig :taskname do |x|
  x.files = FileList['relative/wildcard/path/to/*.exe.config']
  x.replacements = {
    'some/x/path/expression' => 'replacment-value',
    'another/x/path/expression' => 'another-replacment!'
  }
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:48:43.057

```
 require 'albacore/tasks/versionizer'
    require 'semver'
    require 'rexml/document'
    include REXML

    Albacore::Tasks::Versionizer.new(:versioning)

    ver = SemVer.find
    ASSEMBLY_VERSION = "#{ SemVer.new(ver.major, ver.minor, ver.patch).format "%M.%m.%p"}" + ".0"

    class XmlPoke
      attr_accessor :xml_file_path
      def initialize xmlfilepath
        @xml_file_path = xmlfilepath
      end
      def pokeelement xpath, value
        file = File.open(xml_file_path, 'r')
        xmldoc = Document.new(file)
        xpathnode = XPath.first(xmldoc, xpath)
        xpathnode.text = value
        formatter = REXML::Formatters::Default.new
        File.open(xml_file_path, 'w') do |result|
          formatter.write(xmldoc, result)
        end
      end
    end

    desc "Sets Application Version in project file"
    task :outlookproj do
      projectfilepath = "dotnet_project_path/dotnet_project_name.csproj"
      xpath = "/Project/PropertyGroup/ApplicationVersion"
      value = "#{ASSEMBLY_VERSION}"
      poker = XmlPoke.new projectfilepath
      poker.pokeelement xpath, value
    end 
```

# linux - Sftp 文件从远程服务器到本地服务器

> ID：15291034
> 
> 赞同：3
> 
> 时间：2013-03-08T09:48:45.553
> 
> 标签：linux, shell, sftp, file-transfer

对不起，如果这是太简单的问题。但我是 Java 开发人员，对 shell 脚本一无所知。我用谷歌搜索，但找不到我要找的确切内容。

我的要求

1.  使用 Sftp [基于 pub/pri 密钥的身份验证] 连接到远程服务器。指向私钥文件的变量
2.  将具有特定扩展名 [.log] 的文件传输到本地服务器文件夹。用于设置远程服务器路径和本地文件夹的变量
3.  重命名远程服务器中传输的文件
4.  将所有传输的文件记录在 .txt 文件中

任何人都可以给我这个shell脚本吗？

到目前为止，这是我从建议中得出的。还有一些问题留在我身边;）

```
export PRIVKEY=${private_key_path}
export RMTHOST=user@remotehost
export RMTDIR=/logs/*.log
export LOCDIR=/downloaded/logs/
export LOG=sucess.txt

scp -i $PRIVKEY $RMTHOST:$RMTDIR $LOCDIR
for i in 'ls -1 $LOCDIR/*.log'
do
   echo $i >> $LOG
done

ssh $RMTHOST -c "for i in `ls -1 $RMTDIR; do mv /logs/$i /logs/$i.transferred; done" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T10:05:13.343

这种方法怎么样？

> 1.  使用 Sftp [基于 pub/pri 密钥的身份验证] 连接到远程服务器。指向私钥文件的变量
> 2.  将具有特定扩展名 [.log] 的文件传输到本地服务器文件夹。用于设置远程服务器路径和本地文件夹的变量

```
scp your_user@server:/dir/of/file/*.log /your/local/dir 
```

> 4.  将所有传输的文件记录在 .txt 文件中

```
for file in /your/local/dir/*.log
do
   echo "$file" >> $your_txt
done 
```

> 3.  重命名远程服务器中传输的文件

```
ssh your_user@server -c "for file in /dir/of/file/*.log; do mv /dir/of/file/"$file" /dir/of/file/new_name_based_on"$file"; done" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:00:33.550

使用 scp(secure copy) 命令传输文件。您可能还需要添加 -C 开关，用于压缩文件。这可以加快速度。即将file1从server1复制到server2，

**在服务器 1 上：**

```
#!/bin/sh
scp -C /home/user/file1 root@server2.com:/home/user

```

**编辑：**

```
#!/bin/sh
scp -i {path/to/pub/pri/key/file} /home/user/file1 root@server2.com:/home/user

```

# java - 本地驱动器中图像的路径

> ID：15291039
> 
> 赞同：1
> 
> 时间：2013-03-08T09:48:56.590
> 
> 标签：java, html, image, path, tooltip

我正在使用以下代码将本地驱动器中的图像用作工具提示，但它不显示图片：

```
String path = "C:/images/A.png";
labelIMG.setToolTipText("<html><img src='"+path+"'></html>"); 
```

任何解决此问题的方法，在此先感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T09:58:31.143

工具提示渲染需要一个 URL，而不是文件引用...

试试这样的东西。

```
String path = "C:/images/A.png";
File file = new File(path);
labelIMG.setToolTipText("<html><img src='"+file.toURI().toURL()+"'></html>"); 
```

当然，您可以只使用一个简单的`String`，但在我脑海中它可能看起来像`file:///c:/images/A.png`（我现在不是 Windows 盒子，所以我无法检查，抱歉）

# gmail - 仅从 IMAP 服务器检索自定义文件夹

> ID：15291040
> 
> 赞同：0
> 
> 时间：2013-03-08T09:48:57.403
> 
> 标签：gmail, imap

我想知道是否有办法查询 IMAP 服务器以便只检索自定义文件夹而不是系统文件夹。例如，对于一个 Gmail 帐户，如果我创建了两个标签`subfolder1`和`subfolder2`，我希望在查询后只接收这两个标签，而不是文件夹`[Gmail]/Draft`、`[Gmail]/Trashcan`、`[Gmail]/Sent`等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:35:42.617

使用标准 IMAP 协议（​​根据 rfc3501）这是不可能的。可能是一个扩展可能会提供它。

# java - 存储在变量中与具有多种不同的方法

> ID：15291046
> 
> 赞同：4
> 
> 时间：2013-03-08T09:49:20.803
> 
> 标签：java, variables, switch-statement, bytecode

使用这个有什么好处和坏处：

```
String a = new String();
switch (i) {
case 1: a = "Cueck"; break;
case 2: a = "Blub"; break;
case 3: a = "Writing cases is BORING!"; break;
}
System.out.println(a); 
```

相对：

```
switch (i) {
case 1: System.out.println("Cueck"); break;
case 2: System.out.println("Blub"); break;
case 3: System.out.println("Writing cases is BORING!"); break;
} 
```

哪个生成更好的字节码？哪个生成更多字节码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T09:55:46.113

您的第一个选项更简洁，冗余代码更少。一项建议更改：

```
String a;

switch (i) {
  case 1: a = "Cueck"; break;
  case 2: a = "Blub"; break;
  case 3: a = "Writing cases is BORING!"; break;
  default: throw new IllegalStateException("Unknown option!");
}

System.out.println(a); 
```

不要不必要地创建字符串 -`a`应在需要时设置。默认情况应该抛出异常或设置`a`为默认值。

> 哪个生成更好的字节码？哪个生成更多字节码？

我不会担心的。在我看来，这并不是任何现实应用程序中可能存在的瓶颈。此外，您无法确定一旦您的应用程序运行，JVM 将如何优化字节码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T09:53:22.147

我认为字节码大小不会有太大差异，但我建议第一种方法。如果您在将来的某些代码更改中决定不调用`System.out.println(a)`，但`logger.debug(a)`您只会在一个地方而不是所有`case`开关上更改它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-08T10:02:22.530

使用`javap -c classname`您可以自己检查字节码，

这是选项1：

（注意，我必须初始化，`a = null`否则无法编译）

```
 7:   aconst_null
   8:   astore_2
   9:   iload_1
   10:  tableswitch{ //1 to 3
                1: 36;
                2: 42;
                3: 48;
                default: 51 }
   36:  ldc     #3; //String Cueck
   38:  astore_2
   39:  goto    51
   42:  ldc     #4; //String Blub
   44:  astore_2
   45:  goto    51
   48:  ldc     #5; //String Writing cases is BORING!
   50:  astore_2
   51:  getstatic       #6; //Field java/lang/System.out:Ljava/io/PrintStream;
   54:  aload_2
   55:  invokevirtual   #7; //Method java/io/PrintStream.println:(Ljava/lang/String;)V
   58:  return 
```

这是选项2：

```
 7:   iload_1
   8:   tableswitch{ //1 to 3
                1: 36;
                2: 47;
                3: 58;
                default: 66 }
   36:  getstatic       #3; //Field java/lang/System.out:Ljava/io/PrintStream;
   39:  ldc     #4; //String Cueck
   41:  invokevirtual   #5; //Method java/io/PrintStream.println:(Ljava/lang/String;)V
   44:  goto    66
   47:  getstatic       #3; //Field java/lang/System.out:Ljava/io/PrintStream;
   50:  ldc     #6; //String Blub
   52:  invokevirtual   #5; //Method java/io/PrintStream.println:(Ljava/lang/String;)V
   55:  goto    66
   58:  getstatic       #3; //Field java/lang/System.out:Ljava/io/PrintStream;
   61:  ldc     #7; //String Writing cases is BORING!
   63:  invokevirtual   #5; //Method java/io/PrintStream.println:(Ljava/lang/String;)V
   66:  return 
```

就个人而言，我认为在这种情况下没有更好的字节码，我发现选项 1 更具可读性。

# javascript - 将存储在变量或数组中的值与字符串 javascript regex 匹配

> ID：15291048
> 
> 赞同：0
> 
> 时间：2013-03-08T09:49:22.143
> 
> 标签：javascript, jquery, regex

我试图在句子中找到用于正则表达式匹配的模式。在下面的代码中`result`包含一个字符串，我们正在检查该单词`apple`是否存在于其中。

```
 var patt = /apple/gi;
    var newResult = patt.test(result); 
```

我从一个用例中找到了上面的代码。但我想知道我是否有多个值并且我想在字符串结果中检查它，假设一个带有值的数组`var arr=["apple", "orange"]` `var patt=/arr[0]/gi` 将不起作用.. 可能是什么方式那个场景？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:53:37.287

要检查多个条目，您可以使用 OR 运算符：

```
var patt = /apple|orange/gi;
var newResult = patt.test(result); 
```

如果您有一个变量，您可以执行以下操作，**如果**（！）您的密钥当然是正则表达式安全的（也就是说，它不包含在正则表达式语法中有意义的字符）：

```
var key = "apple";
var patt = new RegExp(key, 'gi');
var newResult = patt.test(result); 
```

尽管在这种情况下，您不妨使用 indexOf：

```
var key = "apple";
var newResult = result.indexOf(key) > -1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:59:42.560

要将字符串用于正则表达式，您需要使用正则表达式构造函数创建正则表达式。

```
var pattern = "apple|orange";
var regex = new RegExp(pattern, "g");    // g is for global match 
```

在此处阅读更多信息：[https ://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)

# javascript - 尝试在 node.js 中使用 MongoDB 异步执行 find 时遇到问题

> ID：15291051
> 
> 赞同：0
> 
> 时间：2013-03-08T09:49:28.047
> 
> 标签：javascript, node.js, mongodb, asynchronous, underscore.js

我正在从我的路由中获取一个请求参数，例如`mydomain.com/topic/animals`where`requestParam = req.params.topicName`和在这种情况下，`animals`.

我遍历一个包含所有可能主题的对象，然后如果找到`topicName`与 匹配的`requestParam`，那么我想执行对数据库的调用以返回该主题的所有集合。

问题是它正在同步执行，因为它总是会执行`else`子句，例如

```
if (requestParam === topicName) {
  // fetch submission
} else {
  // return 404
} 
```

所以它总是返回 404，但是如果我在这里去掉这个`else`子句，那么它就可以工作了。我查看了下划线`_.after()`但无法让它正常工作（甚至不确定这是否是我应该使用的？

我的代码：

```
_.each(topics, function(key, topic) {
  var topicName = key['topicName'],

  if (requestParam === topicName) {
    Submission.getTopicSubmissions({ topicName : topicName }, function(err, submissions) {
      if (err) {
        res.redirect('/');
      } else if (submissions) {
        res.render('topic', {
          submissions: submissions
        });
      } else {
        res.redirect('/topics');
      }
    });
  } else {
    res.render('errors/404', {
      title: 'Page Not Found -',
      status: 404,
      url: req.url
    });
  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:10:25.697

问题是您不应该在每次迭代中渲染 404。因为您执行异步查找，所以它计划在未来某个时间点执行，而当前函数继续运行。毫无疑问，您将在某个时候遇到不同的情况并至少渲染一次 404。使用可破坏的迭代，在搜索时标记，并在迭代之外执行 404，如下所示：

```
var isWaitingForResult = false;
topics.every(function(topic, key) { // TODO: Check if this iterator matches _.each
    var topicName = key['topicName'],

    if (requestParam === topicName) {
      isWaitingForResult = true; // Wait for the result.
      Submission.getTopicSubmissions({ topicName : topicName }, function(err, submissions) {
        if (err) {
          res.redirect('/');
        } else if (submissions) {
          res.render('topic', {
            submissions: submissions
          });
        } else {
          res.redirect('/topics');
        }
      });
      return false; // stop iteration, we did start our search after all
    }
    return true; // continue iteration so we have another chance.
});
if (!isWaitingForResult) { // did a search NOT start?
    res.render('errors/404', {
      title: 'Page Not Found -',
      status: 404,
      url: req.url
    });
} 
```

请注意，我不确定我是否正确地重写了每一个。检查这个。:)

# git - GIT 损坏的文件（<<<<<<< 在 VS2012 git-plugin 遇到问题后，我的文件中有这个： using Microsoft.VisualStudio.TestTools.UnitTesting; <<<<<<< HEAD using NHibernate; ======= >>>>> 问问题 问问题 2013-03-08T09:49:43.130 24922 次 This question shows research effort; it is useful and clear 17 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 在 VS2012 git-plugin 遇到问题后，我的文件中有这个： using Microsoft.VisualStudio.TestTools.UnitTesting; <<<<<<< HEAD using NHibernate; ======= >>>>>>> dd2c3d7dfe81074e7c5a73f8e4ca2584481a74f1 namespace Controll.Hosting.Tests { [TestClass] public class TestBase { <<<<<<< HEAD protected ISessionFactory SessionFactory; [TestInitialize] public void InitializeTestBase() { SessionFactory = NHibernateHelper.GetSessionFactoryForMockedData(); ======= [ClassInitialize] public void InitializeTest() { Console.WriteLine("Settings NHibernateHelper.IsInTesting -> True"); NHibernateHelper.IsInTesting = true; >>>>>>> dd2c3d7dfe81074e7c5a73f8e4ca2584481a74f1 } } } 如何重置我的文件？ 你遇到的不是麻烦，而是冲突。当两个不同的人在同一个地方修改文件时会发生这种情况（你们都在同一行中添加/删除/修改内容）。 您可以简单地手动更新您的文件，方法是决定将所有内容保留在 and 之间<<<<<<< HEAD，=======或者在=======and之间，或者两者>>>>>>>的混合。一旦你解决了所有的冲突，你只需要提交你的更改。 要放弃对文件的本地更改，您可以执行 git checkout yourfile 或者，对于所有文件使用 git checkout -- . 您还可以为每个文件决定是否要保留您的版本或存储库版本 git checkout --ours yourfile # Your version git checkout --theirs yourfile # Repository version gitgit-mergemerge-conflict-resolution 4 3 回答 3 This answer is useful 28 你遇到的不是麻烦，而是冲突。当两个不同的人在同一个地方修改文件时会发生这种情况（你们都在同一行中添加/删除/修改内容）。 您可以简单地手动更新您的文件，方法是决定将所有内容保留在 and 之间<<<<<<< HEAD，=======或者在=======and之间，或者两者>>>>>>>兼而有之。一旦你解决了所有的冲突，你只需要提交你的更改。 要放弃对文件的本地更改，您可以执行 git checkout yourfile 或者，对于所有文件使用 git checkout -- . 您还可以为每个文件决定是否要保留您的版本或存储库版本 git checkout --ours yourfile # Your version git checkout --theirs yourfile # Repository version 于 2013-03-08T09:53:20.960 回答 This answer is useful 8 alestanis 已经回答了你的问题。仍然为了方便查找： 这些冲突标记的解释>>>>>......<<<<<可以在这个问题上找到。 在这个 Q上有更多关于合并的信息。 并且git help merge也非常有帮助： 如何解决冲突 看到冲突后，您可以做两件事： · 决定不合并。您需要的唯一清理是将索引文件重置为 HEAD 提交以反转 2\. 并清理 2\. 和 3\. 所做的工作树更改；git merge --abort可用于此。 · 解决冲突。Git 将标记工作树中的冲突。将文件编辑成形状并将git add它们编辑到索引中。用来敲定 git commit交易。 您可以使用多种工具解决冲突： · 使用合并工具。 git mergetool启动图形合并工具，它将帮助您完成合并。 · 看看差异。 git diff 将显示三向差异，突出显示 HEAD 和 MERGE_HEAD 版本的更改。 · 查看每个分支的差异。 git log --merge -p <path>将首先显示 HEAD 版本的差异，然后是 MERGE_HEAD 版本。 · 看原件。 git show :1:filename显示共同祖先，git show :2:filename显示 HEAD 版本，并git show :3:filename显示 MERGE_HEAD 版本。 于 2013-03-08T10:02:43.753 回答 This answer is useful 0 Using SourceTree for git to manage my builds with Kdiff installed has helped me resolve 99% of these issues really efficiently. I'm just left with trying to remove these from my SOU file in .Net, usually replacing the SOU file with an older version resolves this. 于 2016-10-25T14:01:59.490 回答 Related 1 api - wso2 治理注册表 4.6 通过 api 将属性添加到具有 maxoccurs 的表中 2 php - Custom WordPress Rewrite returns 404 2 javascript - 申请表 1 python - Python 异常 2 java - 使用 super 访问 protected 1 python - python代码有问题，我写了一个代码来枚举二进制代码并想从输出中删除空格 0 java - 使用 OpenIMAJ 识别两个图像之间的差异 1 javascript - 将表格定位在 div 中 2 android - 如何以编程方式在 android 设备上截屏？ 3 json - Scala调度GET请求，无法解析对json的响应 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</path>

> ID：15291056
> 
> 赞同：17
> 
> 时间：
> 
> 标签：git, git-merge, merge-conflict-resolution

在 VS2012 git-plugin 遇到问题后，我的文件中有这个：

```
using Microsoft.VisualStudio.TestTools.UnitTesting;
<<<<<<< HEAD
using NHibernate;
=======
>>>>>>> dd2c3d7dfe81074e7c5a73f8e4ca2584481a74f1

namespace Controll.Hosting.Tests
{
[TestClass]
public class TestBase
{
<<<<<<< HEAD
    protected ISessionFactory SessionFactory;

    [TestInitialize]
    public void InitializeTestBase()
    {
            SessionFactory = NHibernateHelper.GetSessionFactoryForMockedData();
=======
    [ClassInitialize]
    public void InitializeTest()
    {
        Console.WriteLine("Settings NHibernateHelper.IsInTesting -> True");
        NHibernateHelper.IsInTesting = true;
>>>>>>> dd2c3d7dfe81074e7c5a73f8e4ca2584481a74f1
        }
    }
} 
```

如何重置我的文件？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-08T09:53:20.960

你遇到的不是**麻烦**，而是**冲突**。当两个不同的人在同一个地方修改文件时会发生这种情况（你们都在同一行中添加/删除/修改内容）。

您可以简单地手动更新您的文件，方法是决定将所有内容保留在 and 之间`<<<<<<< HEAD`，`=======`或者在`=======`and之间，或者两者`>>>>>>>`兼而有之。一旦你*解决*了所有的*冲突*，你只需要提交你的更改。

要放弃对文件的本地更改，您可以执行

```
git checkout yourfile 
```

或者，对于所有文件使用

```
git checkout -- . 
```

您还可以为每个文件决定是否要保留您的版本或存储库版本

```
git checkout --ours yourfile # Your version
git checkout --theirs yourfile # Repository version 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-08T10:02:43.753

alestanis 已经回答了你的问题。仍然为了方便查找：

这些冲突标记的解释`>>>>>`......`<<<<<`可以在[这个问题](https://stackoverflow.com/q/10657315/923794)上找到。

[在这个 Q](https://stackoverflow.com/q/5772908/923794)上有更多关于合并的信息。

并且`git help merge`也非常有帮助：

> 如何解决冲突
> 
> 看到冲突后，您可以做两件事：
> 
> · 决定不合并。您需要的唯一清理是将索引文件重置为 HEAD 提交以反转 2\. 并清理 2\. 和 3\. 所做的工作树更改；`git merge --abort`可用于此。
> 
> · 解决冲突。Git 将标记工作树中的冲突。将文件编辑成形状并将`git add`它们编辑到索引中。用来敲定 `git commit`交易。
> 
> 您可以使用多种工具解决冲突：
> 
> · 使用合并工具。 `git mergetool`启动图形合并工具，它将帮助您完成合并。
> 
> · 看看差异。 `git diff` 将显示三向差异，突出显示 HEAD 和 MERGE_HEAD 版本的更改。
> 
> · 查看每个分支的差异。 `git log --merge -p <path>`将首先显示 HEAD 版本的差异，然后是 MERGE_HEAD 版本。
> 
> · 看原件。 `git show :1:filename`显示共同祖先，`git show :2:filename`显示 HEAD 版本，并`git show :3:filename`显示 MERGE_HEAD 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-25T14:01:59.490

Using SourceTree for git to manage my builds with Kdiff installed has helped me resolve 99% of these issues really efficiently.

I'm just left with trying to remove these from my SOU file in .Net, usually replacing the SOU file with an older version resolves this.

# css - Chrome 插入随机空格

> ID：15291057
> 
> 赞同：7
> 
> 时间：2013-03-08T09:49:46.610
> 
> 标签：css, html, google-chrome, cross-browser

我有一个页面，其样式在 Chrome 中被弄乱了（对于 Safari 和其他人来说没问题）。它似乎出于某种原因在 HTML 中插入了一些奇怪的空白，破坏了我在页面顶部和其他地方的布局。如果我选择查看我的 PHP 页面的源代码，我看到的是：

```
<body><div id="header-outer">
<div id="header" class="container">
    <div class="row">
        <div id="site-logo" class="span5">
            <img src='logo.png' />
        </div> ... etc ... 
```

（我已经修改了 PHP 在 BODY 和 DIV 之间没有任何空间）。但是当我打开开发者工具时，我看到的是：

```
<body>
    "" <- why?
    <div id="header-outer> etc. etc.. 
```

如果我手动删除“”，布局就好了。这里发生了什么？我很困惑。

**编辑**：您可以在[http://bit.ly/ZkZxVG查看页面](http://bit.ly/ZkZxVG) **编辑**：我尝试禁用所有扩展，但对我的问题没有影响。

提示：我正在使用引导程序和 JQuery。他们会弄乱代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T09:56:01.683

这真的很奇怪，您的文件中可能有一些不需要的字符，请尝试删除`<body><div id="header-outer">`并重写它。

尝试使用 utf8 No BOM 对文件进行编码，看看是否能解决问题。

更多关于 utf8 BOM 的信息[在这里](http://www.unicode.org/faq/utf_bom.html#bom1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:55:06.257

**编辑**

那不是空白，它们必须是那里的物理宪章。这可能不会显示在您的屏幕上，但只需按删除和退格键，直到您的标记中有下一个元素。

HTML中的空白被浏览器完全忽略，它不会呈现它。`"&#65279;"`查看您在编辑项目时呈现的 Firebug 。

# ios - iPhone 3GS 和 kCVPixelFormatType_420YpCbCr8BiPlanarFullRange 格式？

> ID：15291064
> 
> 赞同：0
> 
> 时间：2013-03-08T09:50:04.850
> 
> 标签：ios, avcapturesession

我正在使用最新的 SDK 开发一个 iOS 应用程序并在 iPhone 3GS 上对其进行测试。

我在 init 方法上这样做：

```
CFDictionaryRef formatDictionary = CVPixelFormatDescriptionCreateWithPixelFormatType(kCFAllocatorDefault, kCVPixelFormatType_420YpCbCr8BiPlanarFullRange);
CFNumberRef val = (CFNumberRef) CFDictionaryGetValue(formatDictionary, kCVPixelFormatBitsPerBlock);
if (val != nil)
{
    CFNumberGetValue(val,kCFNumberSInt8Type, &_bytesPerPixel);
    _bytesPerPixel /= 8;
}
else
    _bytesPerPixel = 4; 
```

但 val 始终为零。

和这里：

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput
didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer
       fromConnection:(AVCaptureConnection *)connection
{
    CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);

    //Lock the image buffer//
    CVPixelBufferLockBaseAddress(imageBuffer,0);
    //Get information about the image//
    uint8_t *baseAddress = (uint8_t *)CVPixelBufferGetBaseAddress(imageBuffer);

    size_t width = CVPixelBufferGetWidth(imageBuffer);
    size_t height = CVPixelBufferGetHeight(imageBuffer);
    //size_t stride = CVPixelBufferGetBytesPerRow(imageBuffer);

    //put buffer in open cv, no memory copied
    cv::Mat image = cv::Mat(height, width, CV_8UC4, baseAddress);

    // copy the image
    //cv::Mat copied_image = image.clone();
    [_previewBufferLock lock];

    memcpy(baseAddress, _lastFrame, _previewSurfaceHeight * _previewSurfaceWidth * _bytesPerPixel);

    [_previewBufferLock unlock];

     //We unlock the  image buffer//
     CVPixelBufferUnlockBaseAddress(imageBuffer,0);
} 
```

我在 memcpy 行上添加了一个断点，这些是我的 vars 值：

![在此处输入图像描述](../Images/35382e3c20225617e2734a03cebc4036.png)

但我在这里得到一个 EXEC_BAD_ACCESS：`memcpy(baseAddress, _lastFrame, _previewSurfaceHeight * _previewSurfaceWidth * _bytesPerPixel);`

**iPhone 3GS 是否支持 kCVPixelFormatType_420YpCbCr8BiPlanarFullRange？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T15:59:10.970

不，iPhone 3GS 不支持`kCVPixelFormatType_420YpCbCr8BiPlanarFullRange`作为相机的输出缓冲区类型，只有`kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange`. iPhone 4S 和 iPhone 5 支持全范围 YUV 输出，但旧设备不支持。

您可以使用以下代码测试此可用性：

```
videoOutput = [[AVCaptureVideoDataOutput alloc] init];

BOOL supportsFullYUVRange = NO;
NSArray *supportedPixelFormats = videoOutput.availableVideoCVPixelFormatTypes;
for (NSNumber *currentPixelFormat in supportedPixelFormats)
{
    if ([currentPixelFormat intValue] == kCVPixelFormatType_420YpCbCr8BiPlanarFullRange)
    {
        supportsFullYUVRange = YES;
    }
} 
```

# data-structures - Redis中的最优存储结构

> ID：15291065
> 
> 赞同：0
> 
> 时间：2013-03-08T09:50:09.700
> 
> 标签：data-structures, nosql, redis

我正在寻找存储以下信息组。我存储一分钟时间戳（例如，将在 1 分钟窗口中看到的所有 browserID 分组），然后存储浏览器引用列表。我希望能够只有一个浏览器 ID 实例

我可以为这个数据结构使用 Redis 中的什么数据结构？有没有更优化的存储方式？

```
...
12:06 -> browser1, browser7
12:07 -> browser8
12:08 -> browser4, browser5, browser6, browser9
... 
```

每行可以有大约 1 天的生存时间。

添加新的 browserID 时，我首先检查浏览器 ID 是否已存在于数据中的某个位置，如果存在，请删除并添加到新的分钟行。

最后，我每隔 1 分钟取出 30 分钟前的行并处理这些浏览器 ID，然后在完全处理后从列表中删除该行。

在任何时候，此数据结构中最多可能有 100 万个浏览器引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:21:19.853

好的，新信息，新答案:)

让我们让每个浏览器成为数据库中的一个键，指向它当前所在的时间戳。还有每个时间戳的一个键，它“包含”一组浏览器。

添加新浏览器时；

1.  通过检查它的密钥是否存在来检查它是否已经在系统中。
2.  如果是，请检查它属于哪个时间戳，将其从旧时间戳中删除，并将其添加到新时间戳中。更新浏览器密钥。
3.  如果没有，请将其添加到时间戳并设置浏览器密钥。

要使密钥到期，我可能不会使用内置的 expire，而是使用 cron 作业或其他东西来

1.  删除时间戳中的所有浏览器密钥
2.  删除时间戳键。

示例数据结构；

```
ts:12:01 -> {1, 3}
ts:12:02 -> {2}

browser:1 -> 12:01
browser:2 -> 12:02
browser:3 -> 12:01 
```

这应该是合理的 O(1)，但常数时间稍高（每个操作有多个请求）。可能通过使用服务器端 ruby​​ 脚本来减少。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:14:42.183

清单就够了。实际上，如果浏览器的数量小于 400（根据你的 conf 文件，但默认为 400），Redis 实现了一个顺序数组替换列表以节省空间。

欲了解更多信息：[https ://github.com/antirez/redis/blob/unstable/src/ziplist.h](https://github.com/antirez/redis/blob/unstable/src/ziplist.h)

# function - 致命错误：在非对象上调用成员函数 execute()

> ID：15291066
> 
> 赞同：1
> 
> 时间：2013-03-08T09:50:14.410
> 
> 标签：function, execute, member

我试图在我的表中插入一些值，但我收到了这个错误：

```
Fatal error: Call to a member function execute() on a non-object in C:\wamp\www\Diploma\Clire\login-edit_file.php on line 35 
```

我的桌子是：

```
param_string, inside is idstring, fileid, key and value. 
```

代码是

```
if (startsWith($key, "text_"))
            $query = $DB->prepare("INSERT INTO param_string (fileid, key, value) VALUES (?, ?, ?)") or die();
            $query->execute(array($file_id, $key, $value));
if (startsWith($key, "boolean_"))
            $query = $DB->prepare("INSERT INTO param_string (fileid, key, value) VALUES (?, ?, ?)") or die();
            $query->execute(array($file_id, $key, $value)); 
```

我尝试搜索类似这样的其他问题，但找不到任何答案。谢谢您的帮助！

# javascript - 使用child_process.spawn在windows OS上启动bat时如何从NodeJS获取输出，bat将打开一个新终端

> ID：15291068
> 
> 赞同：0
> 
> 时间：2013-03-08T09:50:23.833
> 
> 标签：javascript, windows, node.js, shell, command-line

**如果 bat 只运行一个终端，我们可以获得标准输出，但如果打开一个新窗口，我们将失败。**

```
 var terminal = require('child_process').spawn('aa.bat');
    console.log('Starting..terminal.pid.', terminal.pid, "process.pid", process.pid);
    terminal.stdout.on('data', function(data) {
        console.log('stdout:',data);
    });
    terminal.stderr.on('data', function(data) {
        console.log('stderr:',data);
    });
    terminal.on('uncaughtException', function(err) {
        console.log('Caught exception: ' + err);
    });
    terminal.on('exit', function(code) {
        console.log('exit code:', code, ' terinal.pid.', terminal.pid, "process.pid", process.pid);
        console.log('child process', process.pid, 'exited with code ' + code);
    }); 
```

**假设bat文件是这样的**

```
start  cmd 
```

如果我们将其更改为

```
start /b cmd 
```

这不会打开一个新终端，nodeJs 会工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:51:14.727

在 Windows 操作系统上很难从 NodeJS 获取另一个进程标准输出，大多数时候它会打开一个新的终端窗口。但您可以使用 bash 来启动它。

1.你可以从[http://www.steve.org.uk/Software/bash/](http://www.steve.org.uk/Software/bash/)下载 bash.exe， 然后代码可能是这样的：

```
 var terminal = require('child_process');
    function start() {
            if (process.platform.trim() !== 'win32') {
                terminal = terminal.spawn('bash');
                console.log('This is not the win32 plantform ,please confirm the bash woking!');
            } else {
                terminal = terminal.spawn('./bash-2.03/bash.exe');
            }
            // !!!must append the ./
            //terminal.stdin.write('./aa.exe');
            terminal.stdin.write('./aa.bat');
            terminal.stdin.end();
        };
        start();
        terminal.stdout.on('data', function(data) {
            console.log(data + "");
        });
        terminal.stdout.on('error', function(data) {
            console.log('error:\n' + data);
        });
        terminal.on('uncaughtException', function(err) {
            console.log('Caught exception: ' + err);
        });
        terminal.on('exit', function(code) {
            console.log('exit code:', code, ' terinal.pid.', terminal.pid, "process.pid", process.pid);
            console.log('child process', process.pid, 'exited with code ' + code);
        }); 
```

# iphone - 应用程序在 iOS 4.3 在模拟器上运行时会崩溃

> ID：15291069
> 
> 赞同：1
> 
> 时间：2013-03-08T09:50:25.033
> 
> 标签：iphone, ios, uitabbaritem

我的应用程序在 iOS 5.1 和 iOS 6.1 中完美运行。但是当我尝试在 iOS 4.3 上运行它时，它却在这段代码上崩溃了：

```
 [self.tabBarItem setFinishedSelectedImage:[UIImage imageNamed:@"home-active.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"home-normal"]]; 
```

我正在使用此代码在 TabBar 上设置图像。

这是我的日志信息。

```
2013-03-08 15:16:27.688 GrandNatural[3372:12c03] -[UITabBarItem setFinishedSelectedImage:withFinishedUnselectedImage:]: unrecognized selector sent to instance 0x628c090
2013-03-08 15:16:27.690 GrandNatural[3372:12c03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UITabBarItem setFinishedSelectedImage:withFinishedUnselectedImage:]: unrecognized selector sent to instance 0x628c090'
*** Call stack at first throw:
(
    0   CoreFoundation                      0x019785a9 __exceptionPreprocess + 185
    1   libobjc.A.dylib                     0x016e7313 objc_exception_throw + 44
    2   CoreFoundation                      0x0197a0bb -[NSObject(NSObject) doesNotRecognizeSelector:] + 187
    3   CoreFoundation                      0x018e9966 ___forwarding___ + 966
    4   CoreFoundation                      0x018e9522 _CF_forwarding_prep_0 + 50
    5   GrandNatural                        0x0000f8fe -[HomeViewController initWithNibName:bundle:] + 535
    6   GrandNatural                        0x00002985 -[GrandNaturalAppDelegate application:didFinishLaunchingWithOptions:] + 262
    7   UIKit                               0x00ce5c89 -[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1163
    8   UIKit                               0x00ce7d88 -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 439
    9   UIKit                               0x00cf2617 -[UIApplication handleEvent:withNewEvent:] + 1533
    10  UIKit                               0x00ceaabf -[UIApplication sendEvent:] + 71
    11  UIKit                               0x00ceff2e _UIApplicationHandleEvent + 7576
    12  GraphicsServices                    0x021dd992 PurpleEventCallback + 1550
    13  CoreFoundation                      0x01959944 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 52
    14  CoreFoundation                      0x018b9cf7 __CFRunLoopDoSource1 + 215
    15  CoreFoundation                      0x018b6f83 __CFRunLoopRun + 979
    16  CoreFoundation                      0x018b6840 CFRunLoopRunSpecific + 208
    17  CoreFoundation                      0x018b6761 CFRunLoopRunInMode + 97
    18  UIKit                               0x00ce77d2 -[UIApplication _run] + 623
    19  UIKit                               0x00cf3c93 UIApplicationMain + 1160
    20  GrandNatural                        0x00002856 main + 132
    21  GrandNatural                        0x00002795 start + 53
)
terminate called throwing an exception(lldb) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T11:13:29.277

您可以使用以下代码在标签栏上设置图像：

```
if ([[[UIDevice currentDevice] systemVersion] floatValue]<5.0)
{  
   self.tabBarItem = [[UITabBarItem alloc] initWithTitle:@"your name" image:[UIImage imageNamed:@"home-normal"] tag:0];
}
else
{
   self.tabBarItem = [[UITabBarItem alloc] init];
   self.tabBarItem.title = @"your name";
   [self.tabBarItem setFinishedSelectedImage:[UIImage imageNamed:@"home-active"] withFinishedUnselectedImage:[UIImage imageNamed:@"home-normal"]];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T09:57:16.287

好的，转到[文档页面](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarItem_Class/Reference/Reference.html)，`UITabBarItem`找到该方法，然后告诉我它在**可用性下的内容**

我给你一个提示：4.3 是无效的。

# z3 - 我如何为 Z3py 中的函数分配（断言）值？

> ID：15291070
> 
> 赞同：2
> 
> 时间：2013-03-08T09:50:25.440
> 
> 标签：z3, smt, constraint-programming

我想问一下，如何将以下 Z3 约束转换为 Z3py（Python API）。

```
 (declare-datatypes () ((S a b c d e f g)))

        (declare-fun fun1 ( S ) Bool)
        (declare-fun fun2 ( S   S ) Bool)

        (assert (forall ((x S)) (= (fun1 x)
        (or
        (= x  a)
        (= x  b)
        (= x  c)
        (= x  d)
        (= x  e)
        (= x  f)
        (= x g)
        ))))

       (assert (forall ((y1 S) (y2 S)) (= (fun2  y1  y2)
       (or
       (and (= y1  a) (= y2  b))
       (and (= y1  c) (= y2  d))
       (and (= y2  e) (= y2  f))
       )))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T15:10:28.577

您可以通过以下方式对其进行编码：

```
from z3 import *

S, (a, b, c, d, e, f, g) = EnumSort('S', ['a', 'b', 'c', 'd', 'e', 'f', 'g'])

fun1 = Function('fun1', S, BoolSort())
fun2 = Function('fun2', S, S, BoolSort())

s = Solver()

x = Const('x', S)
s.add(ForAll([x], fun1(x) == Or(x == a, x == b, x == c, x == d, x == e, x == f, x == g, x == e)))

y1, y2 = Consts('y1 y2', S)
s.add(ForAll([y1, y2], fun2(y1, y2) == Or(And(y1 == a, y2 == b), And(y1 == c, y2 == d), And(y1 == e, y2 == f))))

print(s.check())
print(s.model()) 
```

请注意，`fun1`and`fun2`本质上是宏。因此，我们可以避免使用量词并将它们定义为：

```
def fun1(x):
    return Or(x == a, x == b, x == c, x == d, x == e, x == f, x == g, x == e)

def fun2(y1, y2):
    return Or(And(y1 == a, y2 == b), And(y1 == c, y2 == d), And(y1 == e, y2 == f)) 
```

# c# - xml 格式中的元素名称中需要空格

> ID：15291072
> 
> 赞同：0
> 
> 时间：2013-03-08T09:50:31.020
> 
> 标签：c#, xml, c#-4.0, xml-parsing

我已经在数据库中设置了一组数据，需要转换为 xml 格式，但问题是其中一个元素名称在元素名称之间有空格，但我想在 xml 中使用这个名称

```
<Data>
<Out put xml>
<ROW>
</ROW>
</Out put xml>
<Data> 
```

我知道无法在元素名称中使用空格。请向我建议任何其他替代方案来实现这一目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T10:35:51.327

尝试在转换为 xml 时对名称进行编码

```
 XmlConvert.EncodeName(Name); 
```

然后转换回来只是解码它

```
 XmlConvert.DecodeName(Name); 
```

# c - 增加指向结构的指针

> ID：15291075
> 
> 赞同：0
> 
> 时间：2013-03-08T09:50:35.653
> 
> 标签：c, arrays, pointers, struct, increment

简单来说，我声明了一个结构：

```
typedef struct
{

char* studentID;
char* studentName;
int* studentScores;

}STUDENT; 
```

然后我声明了一个指针并为指针和每个元素分配了内存：

```
STUDENT* studentPtr = NULL;

   if ((studentPtr = (STUDENT*) calloc (5, sizeof(STUDENT))) == NULL)
{
    printf("Not enough memory\n");
    exit(100);
}

{
    if ((studentPtr->studentID = (char*) calloc (20, sizeof(char))) == NULL)
    {
        printf("Not enough memory\n");
        exit(100);
    }

    if ((studentPtr->studentName = (char*) calloc (21, sizeof(char))) == NULL)
    {
        printf("Not enough memory\n");
        exit(100);
    }
    if ((studentPtr->studentScores = (int*) calloc (5, sizeof(int))) == NULL)
    {
        printf("Not enough memory\n");
        exit(100);
    } 
```

之后，我想从文件中读取 5 条记录，但由于我的增量，当我尝试运行程序时出现错误。（如果我有类似“char studentName[20];”之类的东西，它工作得很好）我应该如何增加指针以达到我想要的结果？它必须采用指针表示法。

```
STUDENT* ptr = studentPtr;

while (*count < MAX_SIZE)
{
    fscanf(spData, "%s %*s %*s %*d %*d %*d %*d %*d", ptr->studentName)
    (*count)++;
    ptr++;
}

File Content:

Julie Adams 1234    52  7   100 78  34

Harry Smith 2134    90  36  90  77  30

Tuan Nguyen 3124    100 45  20  90  70

Jorge Gonzales  4532    11  17  81  32  77

Amanda Trapp    5678    20  12  45  78  34 
```

最后一个问题：如果我保留声明的结构并为其正确分配内存。完成后如何释放它？应该是这样的吗？

```
for (STUDENT* ptr = studentPtr; ptr < studentPtr + *count; ptr++)
{   //*count is the number of records
    free(ptr->studentID);
    free(ptr->studentName);
    free(ptr->studentScores);
}
  free(studentPtr); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:08:42.027

问题是您只为 studentPtr[0] 中的字段分配了内存。表 a 中的其余四个条目仍然为零。

尝试这个：

```
int i;
for (i = 0; i < 5; i++)
{
    if ((studentPtr[i]->studentID = (char*) calloc (20, sizeof(char))) == NULL)
    {
        printf("Not enough memory\n");
        exit(100);
    }

    if ((studentPtr[i]->studentName = (char*) calloc (21, sizeof(char))) == NULL)
    {
        printf("Not enough memory\n");
        exit(100);
    }
    if ((studentPtr[i]->studentScores = (int*) calloc (5, sizeof(int))) == NULL)
    {
        printf("Not enough memory\n");
        exit(100);
    }
} 
```

事实上，通过为各个字段使用动态分配的内存，您的生活变得更加艰难。您不仅需要显式分配每个字段（并且可能稍后释放它们），这会花费代码和时间，而且还会在堆表中产生额外的内存开销。如果您的字段是可变大小的，这将是必要的，但它们是固定大小的，因此直接数组更有效。

所以，我最终会这样：

```
typedef struct
{
  char studentID[20];
  char studentName[21];
  int studentScores[5];
} STUDENT;

STUDENT studentPtr[5]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:31:52.970

首先，您将内存分配给结构指针的内存是结构内存的 5 倍。

再次在同一行上，您仅将内存分配给您分配的第一个结构（5 个结构）。

您应该执行 5 次，因为您有 5 个结构，例如：

```
for (i = 0; i < 5; i++)
{
//Do assignments to each element in structure not more than required
//as you are doing in your code:
studentPtr[i]->studentScores = (int*) calloc(5,sizeof(int))
//so your assignment of memory should be:
studentPtr[i]->studentScores = (int*) calloc(sizeof(int))
} 
```

# java - Netbeans 找不到 java.io.InputStream

> ID：15291079
> 
> 赞同：0
> 
> 时间：2013-03-08T09:50:51.210
> 
> 标签：java, netbeans, inputstream, java-io

实际上，他找不到 java.io。

它承认`import java.io.*; import java.io.IOException;`

但是当我尝试时`InputStream = this.getClass().getResourceAsStream("users.xml");`，我收到以下错误：

> C:\Users\cpantaziu\Documents\NetBeansProjects\url\src\main\java\com\mkyong\common\controller\FailRegisterController.java:[120,12] 找不到符号符号：变量 InputStream。

工具-> Java 平台是我的 jdk 1.6。

为什么我会得到这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:53:19.070

你必须分配一个 **参考变量**：

```
InputStream ref= this.getClass().getResourceAsStream("users.xml"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T09:53:30.940

您必须命名一个变量：

```
InputStream is = this.getClas()... 
```

# php - cakephp，如何上传图片

> ID：15291080
> 
> 赞同：0
> 
> 时间：2013-03-08T09:50:51.477
> 
> 标签：php, image, cakephp, upload

在我的蛋糕视图中，我有以下形式：

```
<form enctype="multipart/form-data" action="<?php echo $this->base; ?>/reviews/upload/" method="post" target="_blank">
 <input type="file" id="file" name="file" />
 <input type="submit" />
</form> 
```

在 ReviewController 中，在 upload() 方法中有：

```
public function upload() {
    var_dump($this->request->data);        
} 
```

但它总是空的！我已经尝试过“this->request”、“this->data”，但它总是空的。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T09:58:18.203

尝试做蛋糕的方式，

```
echo $this->Form->create("Review", array("action" => "upload", "type" => "file"));
    echo $this->Form->input("my-file", array("type" => "file"));
echo $this->Form->end(); 
```

在您的评论控制器中

```
 public function upload() {
     debug($this->request->data);       
 } 
```

使用 var_dump 和 print_r 上的调试作为优势，可以通过在 core.php 中将调试级别设置为 0 在生产模式应用程序范围内关闭调试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:52:44.357

尝试将输入的名称更改为其他内容，然后是文件。之前有这个问题！

# add-on - Quickbooks POS 插件销售收据 TxnID

> ID：15291083
> 
> 赞同：0
> 
> 时间：2013-03-08T09:50:57.750
> 
> 标签：add-on, quickbooks

我正在使用 Quickbooks POS AddOn Dev Kit v10 创建我的第一个 AddOn。

我在收据侧按钮面板中创建了一个按钮。现在我想要的是当前的销售收据。

为此，我要做的是获取 TxnID 和查询请求处理器，并使用该 TxnID 来获取整个收据。

我已经设法获得了 Qty、Desc1、ItemNum 等信息。我还获得了 Receipt Schema。

[https://idnforums.intuit.com/messageview.aspx?catid=49&threadid=16722](https://idnforums.intuit.com/messageview.aspx?catid=49&threadid=16722) 从上面的 url，它说 DocSID 是 TxnID，但我无法通过 DocSID 获取字段值。

如何获取 TxnID 或者有更好的方法来获取当前的销售收据？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:19:02.223

经过2-3天的工作，我了解到通过IPOSService ProcessQBPOSXMLRequest方法将销售收据保存在QB POS中后会创建TxnID。

ProcessQBPOSXMLRequest 仅以 XML 格式接收和响应。我在 XML 中创建了收据请求并将其发送到 ProcessQBPOSXMLRequest 以进行处理。

我避免创建 XML 请求，因为这是一项漫长而乏味的工作，但我在使用 QBPOS SDK v3 和 QBPOSFC3 库创建另一个应用程序时做了类似的工作。我复制了代码并添加了对 QBPOSFC3.dll 的引用，并从 IMsgSetRequest 接口创建了 xml，该接口将请求发送到 POS 请求处理器并将请求转换为 XML 格式。

# regex - 需要一个非常通用的正则表达式来处理包含“@”的字符串，以使用自定义验证器

> ID：15291084
> 
> 赞同：0
> 
> 时间：2013-03-08T09:51:00.647
> 
> 标签：regex

我需要一个非常通用和松散的电子邮件正则表达式。

它只需要验证电子邮件字符串中是否有@。

例如：

*   a@a = 有效
*   a.@___asdsadc = 有效
*   aaaaa@sdsdc.com = 有效
*   ssdsadsadassd = 无效

我目前起床到这里：

```
public class EmailAttribute : RegularExpressionAttribute, IClientValidatable
{
    public EmailAttribute()
        //: base("[A-Za-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[A-Za-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[A-Za-z0-9](?:[A-Za-z0-9-_]*[A-Za-z0-9])?\\.)+[A-Za-z0-9](?:[A-Za-z0-9-_]*[A-Za-z0-9])?")
        : base(".*@.*")
    {
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        var errorMessage = FormatErrorMessage(metadata.GetDisplayName());

        yield return new EmailValidationRule(errorMessage);
    }
}

public class EmailValidationRule : ModelClientValidationRule
{
    public EmailValidationRule(string errorMessage)
    {
        ErrorMessage = errorMessage;
        ValidationType = "email";
    }
} 
```

所以第一个太紧了，第二个似乎没有返回正确的值 - 我仍然被告知我的字符串无效。

是因为我的正则表达式错误吗？我怀疑这个验证器可能与其他验证器不同，因为验证器类型是“电子邮件”，因此它可以在我不需要将其注册为不显眼的验证器的情况下工作。

它不必是正确的正则表达式，只要它上面有 @ 符号，它就必须能够验证任何东西。

我已经使用这个站点来验证我的正则表达式： http: [//gskinner.com/RegExr/](http://gskinner.com/RegExr/) 它说我的测试字符串是有效的，但是这个属性不接受更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:14:33.090

用这个：

```
^[^@]+@[^@]+$ 
```

`^`并`$`锚定到字符串的开头和结尾，要求*整个字符串*匹配。如果没有锚点，您可以拥有`@@@@foo@bar`并且正则表达式将匹配该`foo@bar`部分。

`[^@]+`匹配一个或多个不是 的字符`@`，确保字符串中只有一个`@`字符，并确保 . 的每一侧至少有一个字符`@`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:14:41.013

我不明白你的代码是如何工作的，如果你的错在那里，但是 RegEx 模式应该像`^.*\@{1}.*$` 我认为的那样简单，`@`它是你必须转义的保留字符。

# c# - 如何在 winform C# 中控制图表的缩放能力？

> ID：15291094
> 
> 赞同：5
> 
> 时间：2013-03-08T09:51:52.063
> 
> 标签：c#, winforms, zooming

我有一张图表，其中有一个带有 x 轴 y 轴的图表区域。首先，我必须将其设置为可缩放，

```
chart1.ChartAreas[0].AxisY.ScaleView.Zoomable = true;
chart1.ChartAreas[0].AxisX.ScaleView.Zoomable = true; 
```

默认情况下，如果我使用鼠标选择一个矩形区域，图表将缩放到所选区域。但这很烦人，因为它容易出现误操作。但如果我这样做：

```
chart1.ChartAreas[0].AxisY.ScaleView.Zoomable = false;
chart1.ChartAreas[0].AxisX.ScaleView.Zoomable = false; 
```

即使我打电话，Axes 也不会缩放

```
chart1.ChartAreas[0].AxisX.ScaleView.Zoom(a, b); 
```

所以，我希望图表区域可以缩放，但我不喜欢鼠标选择能力。

我找到了一个方法，

```
void chart1_SelectionRangeChanged(object sender, CursorEventArgs e) 
```

似乎当我选择一个新区域时，会调用这个方法，但它并不是要被覆盖。我能做些什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T00:58:40.327

试试这个：

```
var ca = chart1.ChartAreas["ChartArea1"];
ca.CursorX.IsUserEnabled = false;
ca.CursorX.IsUserSelectionEnabled = false; 
```

（与 CursorY 相同，如果不同，则将“ChartArea1”替换为图表区域的名称）。

这将禁用鼠标选择，因此您不会再冒着意外缩放的风险。

# c++ - 如何从 OpenMP 单块广播结果

> ID：15291097
> 
> 赞同：0
> 
> 时间：2013-03-08T09:52:04.560
> 
> 标签：c++, multithreading, openmp

我被一个看起来微不足道的问题所困扰（也许现在还为时过早）。从一个`omp parallel`区域内调用的函数中，我想返回一个值，该值 (1) 在每个线程上必须相同，但 (2) 在`omp single`块中计算。我怎样才能做到这一点？这是一个小代码片段：

```
// must work correctly when called from within omp parallel region
// this version is flawed. please suggest corrections
int func(vector<int>&args)
{
  int x;
#pragma omp single
  x = foo(args);    // foo() must be called in single block
                    // would need to broadcast x to all threads here
  return x;         // error: x only set for thread which executed foo()
}

// possible usage (elsewhere, you're not allowed to change this code)
#pragma omp parallel
{
   /* ... */
   int y = func(args);
   /* ... */
} 
```

一个相当不优雅的解决方案是将`single`块转换为`parallel for`with `reduction`：

```
int func(types args)
{
  int x=0;
#pragma omp for reduction(+:x)
  for(int i=0; i<1; ++i)
    x = foo(args);
  return x;
} 
```

但可以肯定的是，必须有更好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:56:38.787

解决方案非常简单 - 只需附加`copyprivate(x)`子句，它就是这样做的 - 它将构造中使用的列出的私有变量的实例的值广播`single`到其他线程：

```
int func(vector<int>&args)
{
  int x;
#pragma omp single copyprivate(x)
  x = foo(args);    // foo() must be called in single block
                    // would need to broadcast x to all threads here
  return x;
} 
```

# javascript - 后台页面中的引导模式对话框选项卡

> ID：15291107
> 
> 赞同：3
> 
> 时间：2013-03-08T09:52:50.020
> 
> 标签：javascript, twitter-bootstrap, navigation

当我初始化并显示引导模式对话框时，对话框后面页面上的所有元素和暴露掩码仍然可以通过选项卡导航访问。

[在官方Bootstrap](http://twitter.github.com/bootstrap/javascript.html#modals)页面上并非如此。没有任何具体的代码，只是简单的模态显示。

任何想法如何禁用模式后面的标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-19T14:15:09.420

考虑迁移到[Bootstrap 3](http://getbootstrap.com/)，这不是问题。

# c# - C# 使用“模板”在类中实现类似的属性

> ID：15291111
> 
> 赞同：6
> 
> 时间：2013-03-08T09:53:01.820
> 
> 标签：c#, generics, properties, macros

我一直想知道 - 在 c# 中是否有一种方法可以为类中的多个属性定义“模板”。这就是我的意思：假设我有以下课程

```
class MyCLass
{
    public int  IntVal1 { get {...}; set{...} }
    public byte IntVal2 { get {...}; set{...} }
    ....
    public long IntValN { get {...}; set{...} }
} 
```

我没有在 get 和 set 访问器中编写任何特定的实现，但我的想法是所有这些属性都有非常相似的实现——不同之处可能在于它们对具有不同类型的类的不同成员进行操作，但总的来说它们都是看起来像。

我的想法是找到一种方法来定义某种（让我们称之为）带有一些参数的“模板”，这些参数可能用于声明所有这些属性，而无需编写每个属性的实际实现 - 也许使用属性！？！

我想我需要的是类似于 C 宏。

提前 10 倍

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:59:22.193

简短的回答是“不”，但您可以采取一些措施来减少重复。例如，考虑：

```
private bool SetField<T>(ref T field, T value,
    [CallerMemberName] string memberName = null)
{
    if (!EqualityComparer<T>.Default.Equals(field, value))
    {
        field = value;
        var handler = PropertyChanged;
        if (handler != null) handler(this,
            new PropertyChangedEventArgs(memberName));
        return true;
    }
    return false;
} 
```

可用于通过以下方式减少开销：

```
private string bar;
public string Bar
{
    get { return bar; }
    set { SetField(ref bar, value); }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:57:02.423

是的，如果我理解正确，在 C# 中我们为此使用泛型：

```
class MyCLass<T>
{
    public T Val { get {...}; set{...} }
} 
```

`T`定义要“模板化”的类型。

然后你像这样使用这个类：

```
var myClassInt = new MyClass<int>();
myClassInt.Val // is an integer 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T09:57:12.797

您可以查看`T4 templates`并从中生成代码：http: [//msdn.microsoft.com/en-us/library/vstudio/bb126445.aspx](http://msdn.microsoft.com/en-us/library/vstudio/bb126445.aspx)

如果您使用部分类，您可以将一个用于生成的代码，另一个用于非生成的代码。

这是一个很好的教程：[http ://t4-editor.tangible-engineering.com/How-Do-I-With-T4-Editor-Text-Templates.html](http://t4-editor.tangible-engineering.com/How-Do-I-With-T4-Editor-Text-Templates.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T10:10:30.463

您需要基类中的虚拟受保护方法。此方法将设置属性。在子类中，您可以继承基本实现或覆盖 Init/Set/Get 方法并进行自定义实现。

```
abstract class BaseMyClass
{
    public BaseMyClass(arg1, arg2,...)
    {
        Init(arg1, arg2,...);
    }

    public int  IntVal1 { get {...}; set{...} }
    public byte IntVal2 { get {...}; set{...} }
    public byte IntVal3 
    { 
        get 
        {
            return GetIntVal3(); 
        } 
        set
        {
            SetIntVal3(value);
        }
    }

    protected void virtual Init(arg1, arg2,...)
    {
         //Init properties
    }

    protected virtual byte GetIntVal3()
    {
         //Implementation
    }

    protected virtual void SetIntVal3(value)
    {
         //Implementation
    }
}

class MyCLass : BaseMyClass
{
    public MyCLass(arg1, arg2, ...): base(arg1, arg2,...)
}

class AnotherMyCLass : BaseMyClass
{
    public MyCLass(arg1, arg2, ...): base(arg1, arg2,...)

    protected override void Init(arg1, arg2,...)
    {
         //Init properties
    }
} 
```

# android - 如何从android中的日期选择器获取日期？

> ID：15291112
> 
> 赞同：5
> 
> 时间：2013-03-08T09:53:02.410
> 
> 标签：android, datepicker

我正在`DatePicker`为我的应用程序使用 。我想获取我选择的日期（在 上`DatePicker`），但它没有返回选择的日期。它总是返回当前日期。如何从中获取所选日期`DatePicker`？

任何帮助将不胜感激。

```
 day = pickDate.getDayOfMonth();
    month = pickDate.getMonth() + 1;
    year = pickDate.getYear();
    readAndChoose = (Button) findViewById(R.id.btnReadAndChoose);
    readAndChoose.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            Context context = getApplicationContext();
            CharSequence text = "" + day + "-" + "" + month + "-" + ""
                    + year;
            int duration = Toast.LENGTH_SHORT;
            Toast toast = Toast.makeText(context, text, duration);
            toast.show();

            /*
             * Intent i = new Intent(BirthActivity.this,
             * CompassActivity.class); startActivity(i);
             */

        }

    }); 
```

我不想创建`DatePicker`对话框，但我想使用 Android 提供的 DatePicker。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T10:02:40.987

```
private DatePickerDialog.OnDateSetListener datePickerListener 
                = new DatePickerDialog.OnDateSetListener() {

        // when dialog box is closed, below method will be called.
        public void onDateSet(DatePicker view, int selectedYear,
                int selectedMonth, int selectedDay) {
            year = selectedYear;
            month = selectedMonth;
            day = selectedDay;

            // set selected date into textview
            tvDisplayDate.setText(new StringBuilder().append(month + 1)
               .append("-").append(day).append("-").append(year)
               .append(" "));

            // set selected date into datepicker also
            dpResult.init(year, month, day, null);

        }
    }; 
```

请参阅 Thsi 链接..这可能会对您有所帮助。 :- [http://www.mkyong.com/android/android-date-picker-example/](http://www.mkyong.com/android/android-date-picker-example/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T09:57:50.583

```
 public class pickerdate extends Activity {
 /** Called when the activity is first created. */
 private TextView mDateDisplay;
 private Button mPickDate;
 private int mYear;
 private int mMonth;
 private int mDay;

 static final int DATE_DIALOG_ID = 0;
 @Override
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mDateDisplay = (TextView) findViewById(R.id.dateDisplay);
    mPickDate = (Button) findViewById(R.id.pickDate);

    mPickDate.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            showDialog(DATE_DIALOG_ID);
        }
    });

    final Calendar c = Calendar.getInstance();
    mYear = c.get(Calendar.YEAR);
    mMonth = c.get(Calendar.MONTH);
    mDay = c.get(Calendar.DAY_OF_MONTH);

    updateDisplay();
}
private void updateDisplay() {
    mDateDisplay.setText(
        new StringBuilder()
                // Month is 0 based so add 1
                .append(mMonth + 1).append("-")
                .append(mDay).append("-")
                .append(mYear).append(" "));
}
private DatePickerDialog.OnDateSetListener mDateSetListener =
    new DatePickerDialog.OnDateSetListener() {

        public void onDateSet(DatePicker view, int year, 
                              int monthOfYear, int dayOfMonth) {
            mYear = year;
            mMonth = monthOfYear;
            mDay = dayOfMonth;
            updateDisplay();
        }
    };
    @Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case DATE_DIALOG_ID:
            return new DatePickerDialog(this,
                        mDateSetListener,
                        mYear, mMonth, mDay);
        }
        return null;
    }
 } 
```

主布局文件

```
 <?xml version="1.0" encoding="utf-8"?>
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:orientation="vertical">
 <TextView android:id="@+id/dateDisplay"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text=""/>
 <Button android:id="@+id/pickDate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Date Picker"/>
  </LinearLayout> 
```

上面的代码有效。我希望这正是你想要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-07T22:08:49.253

有两种方法可以做到这一点：

1.  传入的使用`init()`方法。`DatePicker``OnDateChangedListener`

    ```
     datePicker.init(
            datePicker.getYear(), datePicker.getMonth(), datePicker.getDayOfMonth(),
            new DatePicker.OnDateChangedListener() {
                @Override
                public void onDateChanged(DatePicker datePicker, int year, int monthOfYear, int dayOfMonth) {
                    selectedYear = year;
                    selectedMonth = monthOfYear;
                    selectedDayOfMonth = dayOfMonth;
                    Log.d(LOG_TAG, "selectedDate = " + selectedYear  + "-" + selectedMonth + "-" + selectedDayOfMonth );
                   //TODO save or use selected value here
                }//end onDateChangedListener

    }); 
    ```

2.  `onPause`当要采取特定操作或用户离开屏幕时，单击或覆盖按钮以获取当前选定的日期。

    ```
    @Override
    public void onPause() {
        int selectedYear = datePicker.getYear();
        int selectedMonth = datePicker.getMonth();
        int selectedDay =  datePicker.getDayOfMonth();
        //TODO save or use selected value here
    } 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T09:57:41.527

我认为这就是你需要的

```
// the call back received when the user "sets" the date in the dialog
private DatePickerDialog.OnDateSetListener mDateSetListener =
    new DatePickerDialog.OnDateSetListener() {
        public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
            mYear = year;
            mMonth = monthOfYear;
            mDay = dayOfMonth;

        }
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T10:51:19.617

Dj 的回答会奏效。如果您想使用日历变量来存储日期，那么，

```
 public void onDateSet(DatePicker view, int year, int monthOfYear,
            int dayOfMonth) {
        setDate.set(year, monthOfYear, dayOfMonth); 
```

希望这可以帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T02:10:13.267

[这里](http://javapapers.com/android/android-datepicker/)还有一个很棒的教程，其中也有源代码可供下载。

需要注意的一点是，在编译源代码时，您需要在 javapapers 代码中将 SelectDateFragment 类设为“静态”，并将 populateSetDate() 方法设为静态，我还移动了这段代码：

`mEdit = (EditText)findViewById(R.id.editText1);`

到 onCreate() 方法。之后，您就可以编译代码了。

MainActivity 编辑后最终应该是这样的：

```
package com.javapapers.andoiddatepicker;
import java.util.Calendar;
import android.app.DatePickerDialog;
import android.app.Dialog;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.support.v4.app.FragmentActivity;
import android.view.View;
import android.widget.DatePicker;
import android.widget.EditText;

public class MainActivity extends FragmentActivity {

private static EditText mEdit;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mEdit = (EditText) findViewById(R.id.editText1);
}

public void selectDate(View view) {
    DialogFragment newFragment = new SelectDateFragment();
    newFragment.show(getSupportFragmentManager(), "DatePicker");
}

public static void populateSetDate(int year, int month, int day) {
    mEdit.setText(month + "/" + day + "/" + year);
}

public static class SelectDateFragment extends DialogFragment implements
        DatePickerDialog.OnDateSetListener {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the current date as the default date in the picker
        final Calendar c = Calendar.getInstance();
        int year = c.get(Calendar.YEAR);
        int month = c.get(Calendar.MONTH);
        int day = c.get(Calendar.DAY_OF_MONTH);

        // Create a new instance of DatePickerDialog and return it
        return new DatePickerDialog(getActivity(), this, year, month, day);
    }

    public void onDateSet(DatePicker view, int year, int month, int day) {
        populateSetDate(year, month+1, day);
    }
} 
```

}

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-01T11:39:11.073

```
private void openCalendar() {
    DatePickerDialog dialog = new DatePickerDialog(getContext(), (view, year, month, dayOfMonth) -> {

        date = getDateString(year, month, dayOfMonth);

    }, mYear, mMonth, mDay);
    dialog.show();

}

private String getDateString(int year, int mMonth, int mDay) {
    Calendar calendar = Calendar.getInstance();
    calendar.set(year, mMonth, mDay);
    SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
    return dateFormat.format(calendar.getTime());
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-24T20:59:07.080

您的错误是您应该在 OnclickListener 事件中验证您的日、月和年，检查编辑后的代码。我曾经有过类似的错误

```
readAndChoose = (Button) findViewById(R.id.btnReadAndChoose);
readAndChoose.setOnClickListener(new OnClickListener() {

day = pickDate.getDayOfMonth();
month = pickDate.getMonth() + 1;
year = pickDate.getYear();

    @Override
    public void onClick(View arg0) {

        Context context = getApplicationContext();
        CharSequence text = "" + day + "-" + "" + month + "-" + ""
                + year;
        int duration = Toast.LENGTH_SHORT;
        Toast toast = Toast.makeText(context, text, duration);
        toast.show();

        /*
         * Intent i = new Intent(BirthActivity.this,
         * CompassActivity.class); startActivity(i);
         */

    }

}); 
```

# java - 避免java中的特定异常

> ID：15291113
> 
> 赞同：0
> 
> 时间：2013-03-08T09:53:03.660
> 
> 标签：java, exception-handling

我有这样的代码。

```
try {
        st = Session.getDbConnection().createStatement();
        delSt = Session.getDbConnection().createStatement();
        rs = st.executeQuery("SELECT msg_id,message,mobile_no FROM sms");

        while (rs.next()) {   
            delSt.executeUpdate("DELETE FROM sms WHERE msg_id = '" + rs.getString(1) + "'");

            System.out.println("Message sent");
        }
        Session.getDbConnection().commit();

    } catch (Exception ex) {
        if (ex.getMessage().startsWith("error occurred at recursive")){
        }
        else{
            logger.error(ex.getMessage(), ex);
        }
        try {
            if (rs != null) {
                rs.close();
            }
            if (st != null) {
                st.close();
            }
            if (delSt != null) {
                delSt.close();
            }

        } catch (Exception ex1) {
            logger.error(ex1.getMessage(), ex1);
            ex1.printStackTrace();
        }
        try {
            if (!Session.getDbConnection().isClosed()) {
                Session.getDbConnection().close();
            }
        } catch (Exception ex1) {
            logger.error("ERROR:Closing Database Connection:" + ex.getMessage(), ex);
        }

    } finally {
    } 
```

现在在这种情况下，我想忽略/避免日志的异常“错误发生在递归 SQL 级别 1”。但我想记录除此异常之外的其他内容。我的代码有什么问题。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:56:21.657

我不认为

```
 if (ex.getMessage().startsWith("error occurred at recursive")){
 } 
```

特别安全。您假设异常消息永远不会为空（！），然后对异常消息执行比较。我宁愿捕获特定类别的异常，例如

```
 catch (SQLException e) 
```

并过滤类本身。您还可以使用数据库返回的错误代码。请注意，这些是特定于数据库供应商的。有关更多详细信息，特别是方法，请参阅[SQLException](http://docs.oracle.com/javase/6/docs/api/java/sql/SQLException.html)`getErrorCode()`文档（我假设您实际上`SQLExceptions`在这里捕捉到了，但原理更广泛）

其他的建议。您应该在异常处理之外和您的`finally`块中关闭结果集/语句/连接。*无论*异常/成功如何，您都需要释放这些资源。也许查看[DBUtils.closeQuietly()](http://j2eedev.org/use-apache-dbutils-jar-to-ease-closing-jdbc-resources-in-application/)以安全简洁地执行此操作。

# mysql - MySQL 的 JPA 主键

> ID：15291116
> 
> 赞同：1
> 
> 时间：2013-03-08T09:53:08.027
> 
> 标签：mysql, jpa, primary-key, biginteger

我有一个具有 BIGINT UNSIGNED 类型主键的表。现在，我如何在 JPA 中为这个键建模？如果我使用 java.math.BigInteger，JPA 将不会接受它。如果我使用 Long，那么 JPA 的类型与 MySQL 的类型相比似乎太小了。如果记录数超过 Long.MAX_VALUE 怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:55:56.963

你应该使用Long并在晚上睡觉。长期看最大值。如果你的桌子接近这个数字，我会感到惊讶。我知道我们生活在大数据时代，但你的担忧在短期内被夸大和不切实际。

# php - Zend Framework：条件列更新

> ID：15291119
> 
> 赞同：0
> 
> 时间：2013-03-08T09:53:13.773
> 
> 标签：php, database, zend-framework

我有以下情况：

假设我的数据库表中有两列：

`visits`并且`date`，我`date`只想在`visits = 1`. 是否有 Zend_Db_Expression 用于此目的，或者我需要先查询表并检查`visits`值，然后决定是否更新`date`列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:36:52.730

您可以在 MySQL 中使用 CASE 语句。还应该在其他 SQL 引擎上工作。

[http://dev.mysql.com/doc/refman/5.1/de/case-statement.html](http://dev.mysql.com/doc/refman/5.1/de/case-statement.html)

我不认为 Zend_Db_Expression 支持案例。您将不得不手动编写该部分。

使用 CASE 看一下这个 UPDATE 示例：

[http://www.bennadel.com/blog/933-Using-CASE-Statements-In-A-SQL-UPDATE-Query.htm](http://www.bennadel.com/blog/933-Using-CASE-Statements-In-A-SQL-UPDATE-Query.htm)

卢西安

# jquery - jQuery preventDefault 在任何 IE 版本中都不起作用

> ID：15291138
> 
> 赞同：2
> 
> 时间：2013-03-08T09:53:56.997
> 
> 标签：jquery, internet-explorer, preventdefault

当字符数达到某个值时，我试图阻止用户在文本区域中输入更多输入。

我的代码在 Chrome、Safarai 和 Firefox 中运行良好。

但是***preventDefault***方法在任何版本的***IE****中都不*适合我。

 *我在 SO 上找到了许多类似的主题，其中包括最常见的建议：

*   执行检查以确保 preventDefault 存在。如果它不存在，请使用 IE ***returnValue=false***。问题是***returnValue=false***也不起作用。

有什么建议么？

```
// Attach textarea char counter to all textarea's with class of 'textarea-char-count'
$('.textarea-char-count').live("keyup", function(event) {
    MYAPP.COMMON.textareaCounter(this, event);
}); 

// Attach textarea char counter to element
MYAPP.COMMON.textareaCounter = function(element, evt) {

    //Get char limit
    var limit = $(element).attr("maxlength");

    // get current character count
    var current = $(element).val().length;

    // if current character count is greater than or equal to the character limit
    if(current >= limit) {
        // prevent further characters from being entered apart from the 
        // Delete and Backspace keys
        if(evt.which != 0 && evt.which != 8)
        {
            if (evt.preventDefault) {
                evt.preventDefault();
            }
            else {
                evt.returnValue = false;
            }
        }
    }

    // add the remaining character count to our span
    $(element).parent().next().show().text( current + " / " +  limit);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T10:02:10.673

将事件从 更改`keyup`为`keydown`，它将起作用

演示：[拨弄](http://jsfiddle.net/73EsY/)键盘

演示：用[keydown](http://jsfiddle.net/arunpjohny/73EsY/10/)摆弄

keypress 事件将不起作用[，因为 IE 和 Chrome 不会在退格和删除时触发它](https://stackoverflow.com/questions/4418562/why-isnt-backspace-being-detected-using-jquery-keypress-event)

注意：计数器仍然表现异常。

还有一些可以做的改变，ex move from `live`to `on`since`live`已弃用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:03:38.580

`live`被折旧和使用`keypress`

```
$('body').delegate(".textarea-char-count","keypress", function(event) {
        MYAPP.COMMON.textareaCounter(this, event);
    }); 
```*

# php - 在 STRING 中替换 标签白色换行符

> ID：15291139
> 
> 赞同：-1
> 
> 时间：2013-03-08T09:54:00.543
> 
> 标签：php, replace

我正在尝试替换标签`<br/>`并`<br>`在我的字符串中

这是我在网上找到的代码，但这会将“\n”打印为文本，我需要换行符

```
$fldtextArea_name = str_replace("<br>", "\n", $fldtextArea_name); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:00:08.437

**试试这个：**

```
$fldtextArea_name = str_replace("<br>", "\n", $fldtextArea_name); 
echo "<pre>" . $fldtextArea_name . "</pre>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:00:40.600

该代码完美运行。当你

```
echo $fldtextArea_name; 
```

它工作正常...你确定你没有写 '\n' 而不是（正确地） "\n" 吗？例如：

```
$fld = str_replace("<br>", "\n", "aaa<br>bbbb<br>ccc<br>");
echo $fld; 
```

将输出：

```
aaa bbbb ccc 
```

在浏览器上，如果您查看页面源代码，您将看到：

```
aaa
bbbb
ccc 
```

# dependency-injection - 在接口内使用 Log4Net

> ID：15291141
> 
> 赞同：0
> 
> 时间：2013-03-08T09:54:10.177
> 
> 标签：dependency-injection, log4net

我有一个界面

```
public interface ILoggerService
{
    void Info(string message);
    void Warn(string message);
} 
```

然后，我有一个使用 Log4Net 实现这个接口和日志的类

```
public class Log4NetLoggerService : ILoggerService
{
    private readonly ILog _logger;
    public Log4NetLoggerService()
    {
        // this always returns Log4NetLoggerService class type
        _logger = LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);
    }

    public void Info(string message)
    {
        _logger.Info(message);
    }
} 
```

这很好用，但问题是如果我想记录当前的类和方法名（使用 %class - %M），它总是`Log4NetLoggerService`作为类返回，作为方法返回`Info`作为方法。

我需要获取称为日志记录方法的“父”类类型。

我可以在创建`ILoggerService`实例时以某种方式注入调用日志方法的类的类型吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:01:04.117

查看 log4net 源代码；特别是他们如何实现 ILog 接口。您基本上不能在包装器中使用 ILog 接口，而是使用内部记录器，该记录器接受一个参数，该参数指示 log4net 在调用堆栈中查找正确的类/方法的位置。另请参阅此[答案](https://stackoverflow.com/a/3448439/106567)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:17:19.633

以我的经验，如果您需要您登录的类的名称，那么您可能在应用程序的太多地方登录了太多内容。这可能会导致维护问题。看看[这个 Stackoverflow 答案](https://stackoverflow.com/a/9915056/264697)，以验证您是否没有记录太多以及是否违反了 SOLID 原则。

# java - Swing MVC - 事件传播和数据共享

> ID：15291143
> 
> 赞同：7
> 
> 时间：2013-03-08T09:54:16.083
> 
> 标签：java, swing, model-view-controller, observer-pattern, mediator

我正在尝试在摇摆应用程序中应用 MVC 模式。但是，鉴于您具有嵌套的面板层次结构，例如 Parent -> Child -> Grand Child -> Grand Grand Child，我面临两个主要问题。

问题1：当你有这样的层次结构时，如何在控制器和视图之间传输数据？如果我去将数据从父母传递给孩子，那么会有很多重复，如果我改变一个孩子，所有父母都需要改变。我不希望视图直接访问数据库中的数据，我希望数据仅通过控制器传输到视图。

问题 2：如何在这样的层次结构中将事件从视图传播到控制器？我正在考虑使用 PropertyChangeListener。如果控制器必须采取任何行动，View 将触发PropertyChange 事件。控制器将监听这些事件并执行一些操作。但是，如果我为层次结构这样做，那么就会有代码重复。

我有三个可能有用的想法：

1.  要为每个面板使用控制器，但这样我最终会得到很多控制器。
2.  使用将提供视图和控制器之间的通信的中介者设计模式。
3.  使用 Central Reciever & Notifier 监听来自视图的所有属性更改事件，并通知感兴趣的控制器。但这只会解决我的第二个问题：

请参考下图以了解第三个想法的图片。如果是第 2 个，Mediator 将居中。

请评估并让我知道是否有人以更好的方式实施了此类问题。

![在此处输入图像描述](../Images/36d34475761e685943fbee17f4f2b1c2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:43:08.240

我对您的问题 1 有一个建议：

您可以拥有一个 ViewModel，其中包含另一个 View Model 的属性。在您的控制器方法上，您只需要接收父 ViewModel，因为模型绑定器将为您绑定所有属性。

```
public class GrandChildViewModel{
    public Int32 SelectedDropDownItem { get; set; }
    public List<Foo> ListOfFoo { get; set; }
}

public class ChildViewModel{
    public String Name { get; set; }
    public Int32 Age { get; set; }
}
public class FatherViewModel{
    public ChildViewModel Child { get; set; }
    public GrandChildViewModel GrandChild { get; set; }
} 
```

这是层次结构的一个例子。您的 View 将仅引用 FatherViewModel。您的控制器也将收到 FatherViewModel。modelBinder 将自动完成其工作，如果您创建 HTML 如下：

```
@Html.TextBoxFor(m => m.Child.Name) 
```

它将呈现输入：

```
<input type="text" id="Child_Name" name="Child_Name" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T22:40:12.930

> 问题1：当你有这样的层次结构时，如何在控制器和视图之间传输数据？如果我去将数据从父母传递给孩子，那么会有很多重复，如果我改变一个孩子，所有父母都需要改变。我不希望视图直接访问数据库中的数据，我希望数据仅通过控制器传输到视图。

如何通过向相关控制器注册视图来忽略层次结构并采用更线性的方法？数据可以通过模型获得，在该模型中，更改将通过`Observer`or`Listener`模式触发。

有了这个，你就不会发生任何重复。一切都将集中在一个模型或一系列模型中。在用户操作或外部事件发生后，一个或多个控制器可以在已注册视图列表上运行通知。

此外，视图绝对不应该像您所说的那样访问数据源。这里应该至少有一层抽象。如果您的控制器使用调解器模式，我将通过将请求转发到额外数据层中的接口来处理此问题。

进一步思考，我认为通过视图完成注册不是一个好主意。所以我会把这个分开。手动初始化视图或找到一种方法来遍历您需要的视图。也许通过一种自动化此步骤的工厂来获取您的意见。

> 问题 2：如何在这样的层次结构中将事件从视图传播到控制器？我正在考虑使用 PropertyChangeListener。如果控制器必须采取任何行动，View 将触发PropertyChange 事件。控制器将监听这些事件并执行一些操作。但是，如果我为层次结构这样做，那么就会有代码重复。

同样，您可以采用线性方法。当一个视图被注册时，控制器可以添加它的监听器。或者您可以让视图发送一些语义样式的消息（例如：doAction("Save")），这些消息可以通过调度机制进行处理。将让您决定如何转发参数。

需要 PropertyChangeListeners 吗？我的意思是，你需要那种粒度吗？

> 我有三个可能有用的想法：
> 
> 要为每个面板使用控制器，但这样我最终会得到很多控制器。使用将提供视图和控制器之间的通信的中介者设计模式。使用 Central Reciever & Notifier 监听来自视图的所有属性更改事件，并通知感兴趣的控制器。但这只会解决我的第二个问题：

这听起来有点像[HMVC](http://www.javaworld.com/jw-07-2000/jw-0721-hmvc.html)。使用这种方法，每个子系统都有模型-视图-控制器三元组。这是一个有趣的想法，但可能会很混乱，并且不清楚层次结构应该如何工作以及如何实现协调/从属关系。

也许您可以为应用程序的每个模块/子系统创建第四个中性类，您可以在其中插入视图、模型和控制器，如果其中一个丢失或不正确，则抛出异常。

或者，按照中央通知器的想法，您可以让中央控制器充当其他特定于功能的控制器或更基本操作的路由机制。如何将消息重新路由到这些取决于您。注意线程，因为集中化将使此类的设计变得必不可少。

不管你做什么，尽量让事情变得简单。您应该能够拥有一个带有模型和控制器的测试视图，而不必大惊小怪。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-05T11:19:11.460

当我最终使用[这个 HMVC Pattern](http://fearlessdeveloper.com/hmvc-pattern1/)时，我遇到了类似的问题。是的，你是对的，因为会有很多控制器。但它也确实会在代码中为您提供清晰的关注点分离。您可以通过创建一些特定于应用程序的高级复合小部件来限制控制器的数量。在这种情况下，层次结构最多可以限制为 2 或 3 级，并且可以链接控制器以将事件委托给任何父/子。

从服务器加载数据后，您还可以维护 Session 映射以快速[轻松地访问经常需要的数据](http://fearlessdeveloper.com/easy-data-access-in-pages-of-gwtswing-application/)，但我不太喜欢它。

如果开发团队理解并正确遵循该模式，则该模式运行良好。

# google-chrome - Chrome 扩展不断部署

> ID：15291147
> 
> 赞同：6
> 
> 时间：2013-03-08T09:54:21.613
> 
> 标签：google-chrome, google-chrome-extension, continuous-deployment

由于 Chrome 扩展程序不能真正使用 .crx 文件进行私有托管，因此被迫使用 Chrome 网上应用店，因此上传和更新扩展程序已成为一个相当乏味的手动过程。

是否可以自动将 Chrome 扩展程序发布到 Chrome 网上应用店？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-22T05:38:25.313

Chrome 网上应用店现在有一个[API](https://developer.chrome.com/webstore/using_webstore_api)，使发布变得容易。这是一个使用它的[示例桌面应用程序](https://github.com/GoogleChrome/chrome-app-samples/blob/master/samples/web-store/README.md)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-23T20:23:47.667

Konrad 是对的，有新的 API（截至问题发布时）可以做到这一点。

我还为这个问题写了一篇博文，因为我自己找不到这方面的信息：[https ://circleci.com/blog/continuously-deploy-a-chrome-extension/](https://circleci.com/blog/continuously-deploy-a-chrome-extension/)

这篇文章太长了，无法在这里真正引用，但总体思路是，在 CI 环境中：

*   使用满足 CI 需求/工作流程的 Git 和版本策略
*   准备您的扩展代码和资产（生产与开发等）
*   测试你的代码
*   测试浏览器支持
*   删除不需要的文件并压缩扩展
*   使用[Chrome 的 API](https://developer.chrome.com/webstore/using_webstore_api)上传 .ZIP 然后发布

# python - 熊猫数据框输出到 JSON

> ID：15291153
> 
> 赞同：5
> 
> 时间：2013-03-08T09:54:29.723
> 
> 标签：python, json, pandas

我有一个带有 DateTimeIndex 的 Pandas 数据框和带有每小时对象的列，我想将单个列转换并输出到一个 JSON 文件中，该文件由一组每小时值的每日数组组成。

一个简单的例子：

如果我有数据框：

```
In [106]: 
rng = pd.date_range('1/1/2011 01:00:00', periods=12, freq='H') 
df = pd.DataFrame(randn(12, 1), index=rng, columns=['A'])

In [107]:
df

Out[107]:
                     A
2011-01-01 01:00:00 -0.067214
2011-01-01 02:00:00  0.820595
2011-01-01 03:00:00  0.442557
2011-01-01 04:00:00 -1.000434
2011-01-01 05:00:00 -0.760783
2011-01-01 06:00:00 -0.106619
2011-01-01 07:00:00  0.786618
2011-01-01 08:00:00  0.144663
2011-01-01 09:00:00 -1.455017
2011-01-01 10:00:00  0.865593
2011-01-01 11:00:00  1.289754
2011-01-01 12:00:00  0.601067 
```

我想要这个 json 文件：

```
[    
 [-0.0672138259,0.8205950583,0.4425568167,-1.0004337373,-0.7607833867,-0.1066187698,0.7866183048,0.1446634381,-1.4550165851,0.8655931982,1.2897541164,0.6010672247]
] 
```

我的实际数据框要长很多天，因此大致如下所示：

```
[
 [value@hour1day1, value@hour2day1.....value@hour24day1],
 [value@hour1day2, value@hour2day2.....value@hour24day2],
 [value@hour1day3, value@hour2day3.....value@hour24day3],
 ....
 [value@hour1LastDay, value@hour2LastDay.....value@hour24LastDay]
] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T10:12:45.770

```
import json
import pandas as pd
import numpy as np

rng = pd.date_range('1/1/2011 01:00:00', periods=12, freq='H') 
df = pd.DataFrame(np.random.randn(12, 1), index=rng, columns=['A'])

print json.dumps(df.T.as_matrix().tolist(),indent=4) 
```

出去：

```
[
    [
        -0.6916923670267555, 
        0.23075256008033393, 
        1.2390943452146521, 
        -0.9421708175530891, 
        -1.4622768586461448, 
        -0.3973987276444045, 
        -0.04983495806442656, 
        -1.9139530636627042, 
        1.9562147260518052, 
        -0.8296105620697014, 
        0.2888681009437529, 
        -2.3943000262784424
    ]
] 
```

或者作为多天的完整示例，使用`groupby`功能：

```
rng = pd.date_range('1/1/2011 01:00:00', periods=48, freq='H') 
df = pd.DataFrame(np.random.randn(48, 1), index=rng, columns=['A'])

grouped = df.groupby(lambda x: x.day)
data = [group['A'].values.tolist() for day, group in grouped]
print json.dumps(data, indent=4) 
```

出去：

```
[
    [
        -0.8939584996681688, 
        ...
        -1.1332895023662326
    ], 
    [
        -0.1514553673781838, 
        ...
        -1.8380494963443343
    ], 
    [
        -1.8342085568898159
    ]
] 
```

# php - 如何从 PHP 中任何图像类型的 base64 字符串中剥离数据：图像部分

> ID：15291160
> 
> 赞同：10
> 
> 时间：2013-03-08T09:54:40.300
> 
> 标签：php, string, base64

我目前正在执行以下操作来解码 PHP 中的 base64 图像：

```
 $img = str_replace('data:image/jpeg;base64,', '', $s['image']);
   $img = str_replace('data:image/png;base64,', '', $s['image']);
   $img = str_replace('data:image/gif;base64,', '', $s['image']);
   $img = str_replace('data:image/bmp;base64,', '', $s['image']);
   $img = str_replace(' ', '+', $img);
   $data = base64_decode($img); 
```

正如您在上面看到的，我们接受四种最标准的图像类型（jpeg、png、gif、bmp）；

但是，其中一些图像非常大，使用 str_replace 扫描每个图像 4-5 次似乎是一种可怕的浪费，而且效率极低。

有没有一种方法可以可靠地剥离数据：base64 图像字符串的图像部分？也许通过检测字符串中的第一个逗号？

如果这是一个简单的问题，我很抱歉，PHP 不是我的强项。提前致谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-08T09:58:05.023

您可以使用正则表达式：

```
$img = preg_replace('#data:image/[^;]+;base64,#', '', $s['image']); 
```

如果您要替换的文本是图像中的第一个文本，则`^`在正则表达式的开头添加会使其更快，因为它不会分析整个图像，只分析前几个字符：

```
$img = preg_replace('#^data:image/[^;]+;base64,#', '', $s['image']); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-01-23T07:59:08.870

功能`file_get_contents`删除标题并使用`base64_decode`功能，因此您可以获得清晰的内容图像。

试试这个代码：

```
$img = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA0gA...';
$imageContent = file_get_contents($img); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:58:50.387

您必须对其进行测试，但我认为此解决方案应该比 Mihai Iorga 的稍快

```
$offset = str_pos($s['image'], ',');
$data = base64_decode(substr($s['image'], $offset)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-12T15:38:26.310

我用 javascript/kendo 生成图像并通过 ajax 将其发送到服务器。

```
preg_replace('#^data:image/[^;]+;base64,#', '', $s['image']); 
```

在这种情况下它不起作用。就我而言，这段代码效果更好：

```
$contentType  = mime_content_type($s['image']);
$img = preg_replace('#^data:image/(.*?);base64,#i', '$2', $s['image']); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-12T09:05:42.637

您可以使用正则表达式来删除图像或 pdf 数据格式。

```
data.replace(/^data:application\/[a-z]+;base64,/, "") 
```

# c# - 用于 C# 的 C++/Cx 中的 Directx 包装器

> ID：15291162
> 
> 赞同：2
> 
> 时间：2013-03-08T09:54:45.887
> 
> 标签：c#, c++, .net, directx

我正在尝试为 windows phone 或 windows 8 开发一个 C# xaml 游戏。我主要关心的是围绕 DirectX 创建包装器。

据我了解，我必须使用 C++/Cx 来创建这些包装器。我正在考虑在 C# 中创建一个接口，然后在 C++/Cx 中实现它，然后在 C# 中引用包装类并通过我声明的接口使用它。这可能吗？

另外，这种实现不会影响性能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T10:03:51.057

我*强烈*建议您查看[MonoGame](http://www.monogame.net/)。MonoGame 是整个 XNA 框架的开源实现，可在 Windows、Windows8、Windows Phone 8、iOS、Android、OSX、PS3 和 Xbox 上运行！在 MonoGame 上运行的多款备受瞩目的、屡获殊荣的游戏适用于各种平台。

如果您想专门访问 DirectX API，请查看[SharpDX](http://www.sharpdx.org/)，它已经提供了一个包含 DirectX 的综合 .NET 类库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T16:07:28.907

看看[http://slimdx.org/](http://slimdx.org/)

根据他们的网站：

> SlimDX 目前坚如磐石，几乎涵盖**了 Microsoft 提供的所有多媒体 API**，并且足够**稳定**以供商业项目和公司使用

# wordpress - htaccess 规则从 URL 中删除博客

> ID：15291164
> 
> 赞同：2
> 
> 时间：2013-03-08T09:54:50.657
> 
> 标签：wordpress, .htaccess, blogs

我有一个用 php 开发的网站。根文件夹包含所有文件和一个 .htaccess 文件，用于在根目录上重写页面。我已经在博客文件夹中安装了 wordpress。

假设我的网站网址是 www.abc.com 它在根目录上有页面，这些页面也被重写了，例如 www.abc.com/about-us/

不，当我访问博客文件夹中的帖子时，它显示为 [http://www.abc.com/blog/las-vegas/](http://www.abc.com/blog/las-vegas/)

我想要的是从上面的网址中删除博客词。即 url 应该是 [http://www.abc.com/las-vegas/](http://www.abc.com/las-vegas/)并且它应该指向 blog 文件夹中的一个页面。

同时，根文件夹的重写规则应该有效，即 www.abc.com/about-us/ 应该可以访问。

我用过下面的代码

```
#RewriteRule ^$ blog/
#RewriteCond %{REQUEST_FILENAME} !-f 
#RewriteCond %{REQUEST_FILENAME} !-d 
#RewriteRule ^(.*)$ blog/$1 [L] 
```

但上述规则仅适用于博客文件夹，当我们访问 www.abc.com/about-us/ （即根文件）时，甚至将其重定向到博客文件夹。

root htaccess 中有以下规则，它将所有请求重定向到特定文件。我需要找到一种方法，使博客文件夹中的页面绕过以下规则。但规则需要通用

RewriteCond %{REQUEST_URI} !blog rewriterule ^(.*)$ /mintonapillow.php [L]

# linux-kernel - 如何将Linux内核Bin转换为ELF格式

> ID：15291168
> 
> 赞同：5
> 
> 时间：2013-03-08T09:54:56.283
> 
> 标签：linux-kernel, elf, bootloader

我们有一个没有 ELF 标头的 Linux 内核二进制文件，我们的引导加载程序将根据来自 ELF 标头的计算加载内核映像（早期的 QNX 内核映像具有 ELF 标头），但是由于我们的 Linux 内核映像没有一个 ELF 标头，我们的引导加载程序拒绝将此内核映像加载到内存中。

由于某些原因，我们无法更改引导加载程序代码，因此我们唯一的选择是将 ELF 标头插入到具有特定入口点的 Linux BIN 文件中。

实现它的方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-09T02:29:46.497

该`objcopy`命令能够使用适当的 ELF 标头包装二进制文件。例如，以下命令会将二进制文件`input.in`转换为 i386 目标文件`output.o`：

```
objcopy -I binary -O elf32-i386 --binary-architecture i386 input.bin output.o 
```

三个符号将在`output.o`:`_binary_input_bin_start`和`_binary_input_bin_end`中定义`_binary_input_bin_size`。此外，输入文件的数据将在一个`.data`部分中。

然后，您需要使用`ld`链接描述文件来设置适当的加载/虚拟/物理地址和入口点。以下是一个最小的脚本：

```
ENTRY(_start);

SECTIONS
{
    _start = 0x12000;
    . = 0x10000;
    .data : {
        *(.data)
    }
} 
```

但可能需要根据引导加载程序的工作方式、物理内存布局、内核所在的位置、架构等进行大量修改。一旦调整，它就可以用来生成最终的 ELF 文件，如下所示：

```
ld -m elf_i386 output.o -T binary.ld -o output.elf 
```

# ruby-on-rails - Ruby-on-rails：jQuery-ui 和资产管道

> ID：15291170
> 
> 赞同：0
> 
> 时间：2013-03-08T09:55:02.153
> 
> 标签：ruby-on-rails, jquery-plugins, asset-pipeline

我正在寻找对 Rails 资产管道的更好理解的一点清晰。我想做的是我想使用 jQuery-ui 组件和启用了资产管道的 Rails。

资产管道对我来说相当新鲜。基本上，我知道资产管道的一般作用以及它如何通过搜索树中的资产查看。但是从下面的图片中，我不知道如何以及在何处放置 jQuery-ui 下载附带的样式表文件夹以使其在我的项目中工作或正确设置它。因此，指定的主题可以根据需要应用于我使用 jQuery-ui 呈现的 UI。

![在此处输入图像描述](../Images/2edbcbd5bb95c223ac64a4d940141c56.png)

application.css 文件是我应该引用该主题的地方吗？

我最好的猜测是，如果我在下面的 application.css 的第二行添加主题文件夹，它可能会起作用：

```
 *= require_self
 *= require_tree ., ./ui-lightness 
```

但我得到的是错误编译 CSS 资产

ArgumentError：参数数量错误（2 比 1）

请告诉我如何让这个工作如我所愿。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:05:00.200

您需要更改`*= require_tree ., ./ui-lightness`为

```
*= require_tree .
*= require ui-lightness/name_of_css_file 
```

您还需要将下载包中包含的图像复制到`app/assets/images/ui-lightness`目录。（不用说创建新文件夹）

从下载的图像中打开css文件，找到并替换`url: ("../images/image_name.jpg`为`url: ("image_name.jpg")`

这将设置适当的图像路径。建议将 3rd 方库放入`vendor/assets`目录。但是在您确定哪些 css/js 文件属于 3rd 方之前，将其放入常规资产目录中并没有什么坏处

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:58:48.740

你不能把几个东西放在一条`require_tree`线上。把这条线分开

```
*= require_tree ., ./ui-lightness 
```

分为两行：

```
*= require_tree .
*= require_tree ./ui-lightness 
```

# .net - 如何解密大小不是块大小倍数的数据？

> ID：15291176
> 
> 赞同：1
> 
> 时间：2013-03-08T09:55:10.843
> 
> 标签：.net, cryptography, aes, rijndael

我正在尝试在 VB.NET 中使用 AESManaged 或 RijndaelManaged 解密和加密数据。我有一个大小不是块大小的倍数的数据包。在这种情况下，当我尝试解密时，它会出现“要解密的数据长度无效”的错误。如果我删除数据末尾的缺陷块，我只能解密它。但我需要知道最后一个街区是什么。

所以

是否可以解密大小不是块大小倍数的数据？

如果是，我该怎么做？

## 编辑：

有些信息我忘记写了。

分组密码模式必须是 CBC。因为我可以成功解密除最后一个字节之外的所有数据。

有一个客户端可以解密整个数据。我找到了解密器功能的 asm 代码。如果我理解正确，它的工作原理是这样的：

x = 块大小不足 (x < 16)

缓冲区 = 大小为 (16 + x) 的数组

*   首先，该函数抓取先前未解密的字节并将其放入缓冲区的前 16 个字节。（16 字节）
*   将未解密的最后一个字节附加到缓冲区。(x 字节)
*   从 buffer[x​​] 解密到缓冲区的末尾，并将结果放在同一个地方。（缓冲区的最后 16 个字节）
*   从 buffer[0] 解密到 buffer[15] 并将结果放到同一个地方。（缓冲区的前 16 个字节）
*   如您所知，CBC xors 用先前解密的字节解密字节。因此，函数将缓冲区的前 x 个字节与缓冲区的最后 x 个字节进行异或运算。

有没有办法可以在.NET中解密这样的最后一个字节？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:37:00.640

### 更新：

你可能有一个带有密文窃取的 CBC 模式，有可能[只用一个 cbc implementation 来实现 cbc-cts](http://en.wikipedia.org/wiki/Ciphertext_stealing#CBC_implementation_notes)。

### 原来的：

确保您的所有数据包都是密文。如果它的前缀是标头或可以通过您的长度和解密算法的东西，它不会抱怨前缀数据，它只会在到达结尾之前解密为垃圾并抱怨填充。

如果使用经过[身份验证的加密](http://en.wikipedia.org/wiki/Authenticated_encryption)，使用 mac 对密文进行后缀也很常见，这也会为您提供非块大小长度倍数，但如果是这种情况，您需要读取 x 最后一个字节并验证您的密文（常用的是[HMAC](http://en.wikipedia.org/wiki/Hash-based_message_authentication_code) ) 在解密之前。

Also you make sure that you are using the right AES mode that matches the source of your ciphertext. There are some modes of AES that don't need a blocksize multiple, but they generally aren't supported in the built in .net cryptography anyway.

# bash - 在 bash 中替换文件中的所有 x 和 y 字段

> ID：15291179
> 
> 赞同：3
> 
> 时间：2013-03-08T09:55:20.723
> 
> 标签：bash, field, masking

我有一个用冒号分隔的文件，例如

```
1:2:3:4:5:6:7:8:9:10
11:12:13:14:15:16:17:18:19:20 
```

ETC

每行中的字段数量始终相同

我希望能够屏蔽（用 * 替换字段）该文件每一行的第 x 和第 y 字段。假设我想屏蔽第 5 个和第 7 个字段，以便文件看起来像：

```
1:2:3:4:*:6:*:8:9:10
11:12:13:14:*:16:*:18:19:20 
```

我怎样才能在 bash 中实现这样的目标？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T10:01:00.530

像这样让你开始

```
#!/bin/bash

x=5
y=7

awk -F':' -vX="$x" -vY="$y" 'BEGIN{OFS=FS}{$X="*";$Y="*"}{print}' input 
```

输出：

```
$ ./fields.sh 
1:2:3:4:*:6:*:8:9:10
11:12:13:14:*:16:*:18:19:20 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T10:23:16.273

一个bash解决方案：

```
#!/usr/bin/bash

while IFS=: read -a arr
do
         arr[4]='*'
         arr[6]='*'
         (IFS=":";echo "${arr[*]}")
done < file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T10:23:09.280

我会添加一个 sed 单线。（忽略 bash 变量部分，我使用硬编码值 5 和 7 为例）

```
sed -r 's/[^:]+:/*:/5;s/[^:]+:/*:/7' file 
```

用你的例子：

```
kent$  echo "1:2:3:4:5:6:7:8:9:10
11:12:13:14:15:16:17:18:19:20"|sed -r 's/[^:]+:/*:/5;s/[^:]+:/*:/7' 
1:2:3:4:*:6:*:8:9:10
11:12:13:14:*:16:*:18:19:20 
```

带变量：

```
sed -r "s/[^:]+:/*:/$X;s/[^:]+:/*:/$Y" file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T12:28:45.800

使用编辑：

```
 $ printf '%s\n' '1,$ g/./s/\(\([[:digit:]*]*\(:\|$\)\)\{'{4,6}'\}\)[[:digit:]*]*:/\1\*:/' ,p |
 ed -s <(xclip -o)
1:2:3:4:*:6:*:8:9:10
11:12:13:14:*:16:*:18:19:20 
```

w 写出文件。

# c# - 使用 EF 映射现有数据库中的关系

> ID：15291182
> 
> 赞同：1
> 
> 时间：2013-03-08T09:55:32.917
> 
> 标签：c#, asp.net-mvc-3, entity-framework, entity-framework-4, fluent-interface

我正在使用一个现有的数据库，很遗憾我无法更改，并且似乎在创建关系时遇到了麻烦。我对 EF 比较陌生，经过一些搜索发现用户试图实现类似的目标，但是给出的建议在这种情况下似乎不起作用。

我有以下课程：

```
public partial class Order
{
    public int Id { get; set; }
    public int BillingAddressId { get; set; }
    public int ShippingAddressId { get; set; }
    //more values

    public virtual Address ShippingAddress { get; set; }
    public virtual Address BillingAddress { get; set; }
}

public partial class Address
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    //more values
} 
```

我希望能够通过订单中的导航属性访问运输/账单地址。`ShippingAddressId`/`BillingAddressId`字段都与`Id`Address 类有关，但遗憾的是没有在数据库中设置为外键。

我相信我正在努力实现的关系是多对一的。即一个订单有一个收货地址（Address），但一个地址可以是多个订单的收货地址。

我尝试了以下多种变体：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{

    modelBuilder.Entity<Order>().HasOptional(o => o.ShippingAddress)
        .WithMany()
        .HasForeignKey(o => o.ShippingAddressId);

} 
```

但是每次我尝试访问 Order.ShippingAddress.FirstName 时，都会收到一个空引用异常。

我想要实现的目标是可能的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:04:19.263

如果您禁用了延迟加载，则需要在查询中“包含”导航属性

您可以使用以下方法之一执行此操作：

```
context.Orders.Include(o=>o.ShippingAddress).Where..... // make sure you are `using System.Data.Entity;`
context.Orders.Include("ShippingAddress").Where..... 
```

此外，如果您的关系是可选的，您将需要使 FK id 可以为空，例如：

```
public int? BillingAddressId { get; set; }
public int? ShippingAddressId { get; set; } 
```

# mysql - 无法导出mysql数据库

> ID：15291189
> 
> 赞同：1
> 
> 时间：2013-03-08T09:55:49.703
> 
> 标签：mysql, export

我试过这个：

```
mysqldump -u username -p database_name > dump.sql; 
```

和

```
mysqldump -u username -ppassword database_name > dump.sql; 
```

但我得到的只是这个错误：

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'mysqldump -u username -p database_name > dump.sql' at line 1 
```

我已经确认数据库存在，谁能指出发生了什么或如何解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T09:57:23.983

`mysqldump`是命令行界面而不是 SQL 的一部分。从 bash （或类似的）运行命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:58:21.877

我的眼镜可能需要调整，但我认为您需要在这些命令行参数上添加两个破折号：

[http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-25T07:23:37.440

用这个

```
mysqldump --single-transaction -u root -p db > db.sql 
```

# wordpress - 我可以使用 WordPress 酷视频扩展来显示截屏视频吗？

> ID：15291190
> 
> 赞同：0
> 
> 时间：2013-03-08T09:55:51.123
> 
> 标签：wordpress

我想使用很酷的视频扩展在一个页面上显示多个视频。但它只从 youtube 和上传的视频中获取视频。

如果我不想使用来自[www.screencast.com](http://www.screencast.com)的视频，有什么办法可以做到这一点。

或者请建议任何其他支持来自 www.screencast.com 的视频的扩展程序并以弹出形式显示它们。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:00:40.697

选择 HTML5 视频播放器，有很多播放器支持来自其他站点的流式视频。您需要做的就是安装插件并调用播放器并提供视频 URL。HTML5 音频视频播放器是最新趋势，易于使用，具有许多功能。去吧。

# iphone - NSURL 总是返回 Nil

> ID：15291197
> 
> 赞同：2
> 
> 时间：2013-03-08T09:56:19.703
> 
> 标签：iphone, ios, nsurl

我有 WCF 服务，我想从我的 Web 服务中获取数据。但是 URL 总是返回 nil。为什么？我想将来自文本字段值的参数发送到 WCF。例如;

```
txtfield.text = @"ATAŞEHİR"; 
```

怎么了 ？

```
NSString *request = [NSString stringWithFormat:@"http://www.xxxxxxxx.com/CCWCF.svc/MethodName/%@",txtfield.text];
NSURL *URL = [NSURL URLWithString:[request stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding]]; 
```

我尝试了不同的东西，但结果没有改变。

```
NSURL *URL = [NSURL URLWithString:[NSString stringWithFormat:@"http://www.xxxxxxxx.com/CCWCF.svc/MethodName/%@",txtfield.text]]; 
```

或者：

```
NSURL *URL = [[NSURL alloc] initWithString:[request stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding]]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T10:00:38.393

```
NSString* encodedText = [txtfield.text stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSString *request = [NSString stringWithFormat:@"http://www.xxxxxxxx.com/CCWCF.svc/MethodName/%@",encodedText];
NSURL *URL = [NSURL URLWithString:request];
```

在单独的注释中，`[NSString stringByAddingPercentEscapesUsingEncoding:]`URL 编码可能有点问题。有一种更安全的方式使用`Core Foundation`. 例如，请参阅[http://madebymany.com/blog/url-encoding-an-nsstring-on-ios](http://madebymany.com/blog/url-encoding-an-nsstring-on-ios)（找不到 SO 问题）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:59:29.813

您正在使用`NSASCIIStringEncoding`对 unicode 字符串进行编码，因此您会得到奇怪的字符。

像这样使用`NSUTF8StringEncoding`：

```
NSString *queryParemeters = [textField.text stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSString *request = [NSString stringWithFormat:@"http://www.xxxxxxxx.com/CCWCF.svc/MethodName/%@", queryParemeters];
NSLog(@"Encoded URL :%@", request);
NSURL *URL = [NSURL URLWithString:request]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:08:22.007

我相信这是Unicode字符。使用以下方法转换它们`stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding`：

```
NSString *text = @"ATAŞEHİR";
NSString *convertedText = [text stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSString *request = [NSString stringWithFormat:@"http://www.xxxxxxxx.com/CCWCF.svc/MethodName/%@", convertedText]; 
```

# sockets - IOException：无法使用 DNS 打开套接字

> ID：15291203
> 
> 赞同：0
> 
> 时间：2013-03-08T09:56:31.700
> 
> 标签：sockets, java-me, ioexception

尝试使用[文档](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/io/SocketConnection.html)中给出的示例打开套接字时：

```
try {
    SocketConnection sc = (SocketConnection)
            Connector.open("socket://host.com:79");
} catch (IOException e) {
    e.printStackTrace();
} 
```

我遇到了一个异常，这是完整的堆栈跟踪：

```
Exception in thread "main" java.io.IOException: Cannot open socket using DNS
at java.lang.Throwable.fillInStackTrace(Throwable.java:122)
at java.lang.Throwable.<init>(Throwable.java:53)
at java.lang.Exception.<init>(Exception.java:20)
at java.io.IOException.<init>(IOException.java:23)
at ej.ecom.connection.socket.SocketConnectionImpl.openSocket(SocketConnectionImpl.java:206)
at ej.ecom.connection.socket.SocketConnectionImpl.open(SocketConnectionImpl.java:72)
at ej.ecom.connection.socket.ConnectionFactory.open(ConnectionFactory.java:32)
at ej.ecom.io.Connector.open(Connector.java:129)
at ej.ecom.io.Connector.open(Connector.java:93)
at fr.cameon.net.http.client.HTTPClientTest.main(HTTPClientTest.java:16) 
```

我尝试过使用其他端口和 IP，但似乎没有任何效果。我还没有找到任何人得到这个异常描述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:16:11.140

这只是一个示例代码。您需要有有效的服务器。将“socket://host.com:79”替换为您的服务器

# mysql - MySql 连接和引号

> ID：15291210
> 
> 赞同：4
> 
> 时间：2013-03-08T09:57:05.990
> 
> 标签：mysql, concat

我正在尝试做这样的事情：

```
<td>style="background:url('myimage.jpg') no-repeat;"> + column + </td> 
```

但是尝试时出现 MySQL 错误：

```
Concat ('<td>style="background:url('myimage.jpg') no-repeat;">', info_text, '</td') as Nicetext 
```

我想是所有的报价都把事情搞砸了。

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T10:01:02.670

您的字符串包含引号。你将不得不逃离他们。尝试类似：

```
Concat ('<td>style="background:url(\'myimage.jpg\') no-repeat;">', info_text, '</td') as Nicetext 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:59:23.560

你没有逃脱引号。试试这个 ：

```
Concat ('<td>style="background:url(\'myimage.jpg\') no-repeat;">', info_text, '</td') as Nicetext 
```

# vba - 使用 Python / OGR 等份分割凸四边形多边形

> ID：15291223
> 
> 赞同：2
> 
> 时间：2013-03-08T09:57:31.387
> 
> 标签：vba, python-2.7, gis, geospatial, ogr

考虑一个有四个顶点的不规则多边形（P）。

我想将 P 细分为更小的多边形，如图所示。1.![左上角多边形 P，右上角镶嵌两个，左下角镶嵌四个等](../Images/47e784becfbd409205dcab58b47ab856.png)

在过去，我使用 ArcGIS 9.3 和 Miles Hitchen 编写的 VBA 宏来实现这一点。VBA代码如下：

```
Option Explicit

Const xSplit As Long = 10
Const ySplit As Long = 5
Dim dCoords(xSplit, ySplit, 1) As Double

Public Sub GridSelectedQuadrilaterals()
Dim pMxDoc As IMxDocument
Dim pInFtrLyr As IFeatureLayer
Dim pFtrSel As IFeatureSelection
Dim pPolygon As IPolygon
Dim pEnumIDs As IEnumIDs
Dim lID As Long

    ' Get the first selected polygon on the first layer
    Set pMxDoc = ThisDocument
    Set pInFtrLyr = pMxDoc.FocusMap.Layer(0)
    Set pFtrSel = pInFtrLyr
    Set pEnumIDs = pFtrSel.SelectionSet.IDs
    pEnumIDs.Reset

    lID = pEnumIDs.Next
    While lID >= 0
        Set pPolygon = pInFtrLyr.FeatureClass.GetFeature(lID).Shape
        GridQuadrilateral pPolygon
        lID = pEnumIDs.Next
    Wend

    MsgBox "Finished"

End Sub

Private Sub GridQuadrilateral(pPolygon As IPolygon)
Dim pSegColl As ISegmentCollection
Dim lIdx As Long
Dim cx(3) As Double, cy(3) As Double
Dim dx(3) As Double, dy(3) As Double
Dim dx2 As Double, dy2 As Double
Dim x1 As Double, x2 As Double, x3 As Double
Dim y1 As Double, y2 As Double, y3 As Double
Dim l As Long, xs As Long, ys As Long

    Set pSegColl = pPolygon

    ' Get the corner coords of the quad
    lIdx = 0
    For l = 0 To 3
        lIdx = GetIndexOfNextCornerSegment(lIdx, pPolygon)
        cx(l) = pSegColl.Segment(lIdx).FromPoint.X
        cy(l) = pSegColl.Segment(lIdx).FromPoint.Y
    Next l

    dx(0) = (cx(1) - cx(0)) / xSplit
    dx(1) = (cx(1) - cx(2)) / ySplit
    dx(2) = (cx(2) - cx(3)) / xSplit
    dx(3) = (cx(0) - cx(3)) / ySplit

    dy(0) = (cy(1) - cy(0)) / xSplit
    dy(1) = (cy(1) - cy(2)) / ySplit
    dy(2) = (cy(2) - cy(3)) / xSplit
    dy(3) = (cy(0) - cy(3)) / ySplit

    For ys = 0 To ySplit
      x1 = cx(3) + dx(3) * ys
      y1 = cy(3) + dy(3) * ys
      x2 = cx(2) + dx(1) * ys
      y2 = cy(2) + dy(1) * ys
      dx2 = (x2 - x1) / xSplit
      dy2 = (y2 - y1) / xSplit

      For xs = 0 To xSplit
        x3 = x1 + dx2 * xs
        y3 = y1 + dy2 * xs
        dCoords(xs, ys, 0) = x3
        dCoords(xs, ys, 1) = y3
      Next xs

    Next ys

    BuildGrid

End Sub

Private Function GetIndexOfNextCornerSegment(lStartIdx As Long, pPolygon As IPolygon) As Long
Dim PI As Double
Dim pSegColl As ISegmentCollection
Dim pLine1 As ILine, pLine2 As ILine
Dim l As Long
Dim lNxtIdx As Long
Dim dAng As Double

    PI = Atn(1) * 4
    Set pSegColl = pPolygon
    For l = 0 To pSegColl.SegmentCount - 2
        lNxtIdx = lStartIdx + l
        If lNxtIdx = pSegColl.SegmentCount Then lNxtIdx = 0
        Set pLine1 = pSegColl.Segment(lNxtIdx)
        lNxtIdx = lNxtIdx + 1
        If lNxtIdx = pSegColl.SegmentCount Then lNxtIdx = 0
        Set pLine2 = pSegColl.Segment(lNxtIdx)
        dAng = Abs(pLine1.Angle - pLine2.Angle) * 180 / PI
        ' *** Ensure we only deal with angles upto 180 ***
        If dAng >= 180 Then dAng = 360 - dAng
        If dAng > 20 Then
            ' The start point of this segment is a corner point
            GetIndexOfNextCornerSegment = lNxtIdx
            Exit Function
        End If
    Next l

GetIndexOfNextCornerSegment = -1
End Function

Private Sub BuildGrid()
' Now create the polygons on 2nd layer
Dim pMxDoc As IMxDocument
Dim pOutFtrLyr As IFeatureLayer
Dim i As Long, j As Long
Dim pFtrCls As IFeatureClass
Dim pFtrCsr As IFeatureCursor
Dim pFtrBfr As IFeatureBuffer
Dim pPtColl As IPointCollection
Dim pPt As IPoint

    Set pMxDoc = ThisDocument
    Set pOutFtrLyr = pMxDoc.FocusMap.Layer(1)
    Set pFtrCls = pOutFtrLyr.FeatureClass
    Set pFtrBfr = pFtrCls.CreateFeatureBuffer
    Set pFtrCsr = pFtrCls.Insert(True)

    For i = 0 To ySplit - 1
        For j = 0 To xSplit - 1

            Set pPtColl = New Polygon
            Set pPt = New Point
            pPt.PutCoords dCoords(j, i, 0), dCoords(j, i, 1)
            pPtColl.AddPoint pPt
            pPt.PutCoords dCoords(j, i + 1, 0), dCoords(j, i + 1, 1)
            pPtColl.AddPoint pPt
            pPt.PutCoords dCoords(j + 1, i + 1, 0), dCoords(j + 1, i + 1, 1)
            pPtColl.AddPoint pPt
            pPt.PutCoords dCoords(j + 1, i, 0), dCoords(j + 1, i, 1)
            pPtColl.AddPoint pPt
            pPt.PutCoords dCoords(j, i, 0), dCoords(j, i, 1)
            pPtColl.AddPoint pPt

            Set pFtrBfr.Shape = pPtColl
            pFtrCsr.InsertFeature pFtrBfr

        Next j
    Next i

    pMxDoc.ActiveView.Refresh

End Sub 
```

VBA 代码顶部的用户输入告诉脚本用户需要对每个轴进行多少细分

```
Const xSplit As Long = 10
    Const ySplit As Long = 5 
```

谁能帮我用 Python 翻译这段代码？我想使用 Python 和 OGR 来实现同样的目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T09:05:01.887

**编辑（部分 - 已解决）：**以下 Python 代码解决了部分问题。进行了细分，但仅将其中一个子多边形的结果写入新的形状文件。在 Python 中完成此算法的任何其他帮助将不胜感激。

```
import os
import ogr
import sys
import numpy as np

#Driver
driver = ogr.GetDriverByName('ESRI Shapefile')

#Working Directory Path
ws = 'C:/data/'

#Make ws the working directory
os.chdir(ws)

#vector path
in_data = 'data.shp'

#user inputs; how many splits per axis
xSplit = 2
ySplit = 2

#This is a three dimensional array (In numpy Z,Y,X values) 
dCoords = np.ones((2,ySplit+1,xSplit+1))

#Input polygons
source_ds = ogr.Open(in_data,0)
source_layer = source_ds.GetLayer(0)
source_features = source_layer.GetFeatureCount()

#Output polygons
target_ds = driver.CreateDataSource('split.shp')

if target_ds is None:
    print 'Creation of output file failed.\n'
    sys.exit(1)

geom_type = ogr.wkbPolygon
target_layer = target_ds.CreateLayer('split',None,geom_type)

if target_layer is None:
    print 'Creating of layer failed.\n'
    sys.exit(1)

field_defn = ogr.FieldDefn('parcel_no',ogr.OFTInteger)
field_defn.SetWidth(30)

if target_layer.CreateField(field_defn) !=0:
    print 'Creating plot_num field failed.\n'
    sys.exit(1)

featureDefn = target_layer.GetLayerDefn()

#Get the polygons from the layer
for i in xrange(0,source_features):
    source_poly = source_layer.GetFeature(i)
    source_plot = source_poly.GetField('id')
    source_geom = source_poly.GetGeometryRef()

    #Get the corner coords of the quad
    cx = []
    cy = []

    pts = source_geom.GetGeometryRef(0)
    points = []

    for p in xrange(pts.GetPointCount()):
        cx.append(pts.GetX(p))
        cy.append(pts.GetY(p))

    dx0 = (cx[1] - cx[0]) / xSplit
    dx1 = (cx[1] - cx[2]) / ySplit
    dx2 = (cx[2] - cx[3]) / xSplit
    dx3 = (cx[0] - cx[3]) / ySplit
    dy0 = (cy[1] - cy[0]) / xSplit
    dy1 = (cy[1] - cy[2]) / ySplit
    dy2 = (cy[2] - cy[3]) / xSplit
    dy3 = (cy[0] - cy[3]) / ySplit

    for ys in xrange(0,ySplit):
        x1 = cx[3] + dx3 * ys
        y1 = cy[3] + dy3 * ys
        x2 = cx[2] + dx1 * ys
        y2 = cy[2] + dy1 * ys
        dx2 = ( x2 - x1 )  / xSplit
        dy2 = ( y2 - y1 )  / xSplit

        for xs in xrange(0,xSplit):
            x3 = x1 + dx2 * xs
            y3 = y1 + dy2 * xs

            #Calculate Grid Coordinates
            dCoords[0][xs][ys] = x3
            dCoords[1][xs][ys] = y3

    #Build Grid
    for i in xrange(0,ySplit - 1):
        for j in xrange(0,xSplit - 1):

            #Create an empty ring geometry
            ring = ogr.Geometry(ogr.wkbLinearRing)

            ring.AddPoint(dCoords[0][j][i],dCoords[1][j][i])
            ring.AddPoint(dCoords[0][j][i+1],dCoords[1][j][i+1])
            ring.AddPoint(dCoords[0][j + 1][i + 1],dCoords[1][j + 1][i + 1])
            ring.AddPoint(dCoords[0][j + 1][i],dCoords[1][j + 1][i])
            ring.AddPoint(dCoords[0][j][i], dCoords[1][j][i])

            target_poly = ogr.Geometry(ogr.wkbPolygon)
            target_poly.AddGeometry(ring)

            target_feature = ogr.Feature(featureDefn)
            target_feature.SetGeometry(target_poly)
            target_feature.SetField('id',source_plot)
            target_layer.CreateFeature(target_feature) 
```

# javascript - 点击事件JavaScript后的kill函数

> ID：15291229
> 
> 赞同：1
> 
> 时间：2013-03-08T09:57:42.730
> 
> 标签：javascript, jquery, function, events

当我运行“关闭”点击事件时，我有一个想要停止的功能。

这背后的原因是当我`img.start`第二次运行 click 事件时，再次调用该函数并且现在运行了两次。

有问题的功能是幻灯片，所以我确实需要该功能只在页面上运行一次。

所以要明确一点，当我单击 时`img.close`，我希望该`BannerSlideshow`功能停止并且不再运行。

**启动功能点击事件**

```
$('img.start').click(function () {
  BannerSlideshow.Init()
}); 
```

**结束函数点击事件**

```
$('img.close').click(function () {
  //stop function BannerSlideshow from running
}); 
```

**幻灯片功能片段**

```
var BannerSlideshow = (function () {
return {
    Init: function () {
        //slideshow functionality            
    } 
```

*我已将我的问题更新为更具体，抱歉各位。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:59:50.613

你可以通过使用 bind () 和 unbind () 来做到这一点

```
$('img.close').bind('click',function () {
         // your code
    $(this).unbind('click');
}); 
```

或者

您可以使用 Off()

```
$(this).off('click'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:02:03.610

您可以使用关闭方法。[离开（）](http://api.jquery.com/off/)

> （从 jQuery 1.7 开始，首选 .on() 和 .off() 方法来附加和删除元素上的事件处理程序

```
$('img.close').off('click'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:06:43.227

为什么不使用带有布尔值的停止功能？

```
var running = false;

$('img.close').click(function () {
    running = true; 
```

});

如果 running = true，则使用 stop() 函数，否则开始幻灯片

我认为停止功能比取消绑定处理程序更好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T10:07:01.763

StartSlideshow 函数是什么样的？我猜你可能有一个全局变量来运行幻灯片......

```
function StartSlideshow() {
    globalVariableRunSlideshow = true;
    while (globalVariableRunSlideshow) {
         /* Do some slideshowing here */
    }
} 
```

然后您的活动可以执行以下操作：

```
$('img.close').click(function () {
    globalVariableRunSlideshow = false;
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T10:00:50.837

用这个：

```
event.stopPropagation(); 
```

或使用 on.click

并杀死使用

```
$(this).off(); 
```

或者

```
use .bind and  .unbind(); 
```

最好在这里查看：http: [//api.jquery.com/category/events/event-handler-attachment/](http://api.jquery.com/category/events/event-handler-attachment/)

# c# - 嵌套对象的企业库验证规则集问题

> ID：15291235
> 
> 赞同：0
> 
> 时间：2013-03-08T09:58:07.333
> 
> 标签：c#, validation, enterprise-library, enterprise-library-5

使用 Enterprise Library 验证时，我在使用嵌套对象验证对象时应用规则集时遇到问题。如果我有以下对象

```
public class Person
{
    [ObjectValidator]
    [ObjectValidator(Ruleset = "A")]
    public Address Address  { get; set; }
}

public class Address  
{
    [StringLengthValidator(0, 32, MessageTemplate = "Invalid value '{0}' for {1}, Max length:{5}")]
    public string Address1 { get; set; }

    [StringLengthValidator(0, 32, MessageTemplate = "Invalid value '{0}' for {1}, Max length:{5}", Ruleset = "A")]
    public string Address2 { get; set; }
} 
```

现在，如果我尝试通过调用来验证对象

```
ValidationResults results = Validation.Validate(myPersonObject); 
```

我按预期得到了我的默认验证，即如果 Person.Address.Address1 太长它会触发但 Person.Address.Address2 被忽略，这符合预期。

但是，如果我尝试调用我对规则集“A”的验证，如下所示

```
ValidationResults results = Validation.Validate(myPersonObject, "A"); 
```

尽管我已经指定了规则集，但我总是得到与之前的验证调用相同的结果。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:06:38.523

事实证明，我需要在 ObjectValidator 属性的构造函数中传递我的规则集，并指定规则集属性以获得我的预期行为。

```
public class Person
{
    [ObjectValidator]
    [ObjectValidator("A", Ruleset = "A")]
    public Address Address  { get; set; }
}

public class Address  
{
    [StringLengthValidator(0, 32, MessageTemplate = "Invalid value '{0}' for {1}, Max length:{5}")]
    public string Address1 { get; set; }

    [StringLengthValidator(0, 32, MessageTemplate = "Invalid value '{0}' for {1}, Max length:{5}", Ruleset = "A")]
    public string Address2 { get; set; }
} 
```

基本上，构造函数参数是目标对象（“地址”）中的目标规则集，而规则集命名参数是在当前对象（“人”）上调用规则集的内容。

# mysql - 如何编写这种类型的内连接

> ID：15291250
> 
> 赞同：1
> 
> 时间：2013-03-08T09:58:54.947
> 
> 标签：mysql, group-by, inner-join

我有下表`tbl_info`

```
 ---------------------------------------
  |  id   |  parentid  |  sortsequence  |
  |--------------------------------------
  | 1     |   0        |        1       | 
  |--------------------------------------
  | 2     |   1        |        1       | 
  |--------------------------------------
  | 3     |   1        |        1       | 
  |--------------------------------------
  | 4     |   1        |        2       |
  |--------------------------------------
  | 5     |   0        |        1       | 
  |--------------------------------------
  | 6     |   5        |        1       | 
  |-------------------------------------|
  | 7     |   5        |        2       | 
```

**我的问题**

我需要找出那些记录的 id 及其子 id（其中某些记录的 id 作为 parentid 存在），其子`sortsequence`列不是唯一的。例如，如果`id 1`有孩子`2,3,4`，那么 sortsequence`2,3,4`必须是唯一的。如果它们不是唯一的，它们就是错误的记录，我需要找出这些记录。

**评论后更新**

父子关系由`id`和`parentid`字段组成。如果`id`某些记录`parentid`与其他记录一样存在，则这些其他记录是这些记录的子项。**现在我需要找出那些`parentid`相同但 sortsequence 不是唯一的记录。** 理想条件和正确条件是所有 parentid 相同的记录，则 sortsequence 必须是 unqiue。在上述情况下，记录`2,3,4`是错误的记录。我需要找出这些记录

**到目前为止我做了什么**

我搜索了很多并写了这个查询

```
SELECT id, parentid, tbl_info.sortsequence FROM tbl_info
   INNER JOIN (SELECT sortsequence FROM tbl_info
GROUP BY sortsequence HAVING COUNT(id) > 1) dup ON tbl_info.sortsequence = dup.sortsequence 
```

此查询首先查找排序顺序相同但我需要查找的所有记录`parentid`。其次，我在这个表中有数百万条记录，所以我需要一个处理时间最短的查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:10:36.953

在有故障的情况下简单地加入两个表怎么样..如果有相同的父级，你不能有相同的排序序列......

```
SELECT child.id AS [thischild]
, child.sortsequence AS [isinthespot]
, sibling.id AS [allongwiththissibling]
FROM tbl_info child
INNER JOIN tbl_info sibling ON child.parentid = sibling.parentid --sameparent
AND child.sortsequence = sibling.sortsequence --and in sameplace
WHERE child.parentid > 0 --remove roots
AND child.id < sibling.id --remove duplicate return (because 2 is in same spot as 5 AND 5 is in the same spot as 2 ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:12:29.747

同样，如果我理解正确：

```
SELECT * FROM tbl_info WHERE parentid in (
SELECT parentid FROM tbl_info
GROUP BY parentid
HAVING COUNT(DISTINCT sortsequence) <> COUNT(sortsequence)
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T11:05:05.037

试试这个查询

```
SELECT 
     distinct b.id 
FROM 
     tbl b, 
     (select 
          t1.parentid AS rId
          FROM 
             tbl t1
          group by 
             t1.parentid
          HAVING 
             count(t1.parentid) <> count(distinct t1.sortsequence)
     ) a
WHERE 
     a.rId = b.id  or
     a.rId = b.parentId; 
```

内部查询列表是不具有唯一排序序列的 parentId，其结果用于列出该 id 的父项和子项。

希望这可以帮助

[小提琴](http://sqlfiddle.com/#!2/080ae/6)

# php - php多维foreach循环

> ID：15291252
> 
> 赞同：0
> 
> 时间：2013-03-08T09:59:02.803
> 
> 标签：php, multidimensional-array

我有一个数组，我试图用 foreach 循环它，但我得到了

> 为内部循环上的 foreach() 提供的参数无效。

我不确定我有什么不正确的。我试过使用`$key`

这是数组：

```
array(3) { ["company_id"]=> string(3) "159" 
    [0]=> array(9) { 
        ["company_id"]=> string(3) "159" 
        ["employee_id"]=> string(3) "544" 
        ["pay_week1"]=> string(1) "0" } 
    [1]=> array(9) { 
        ["company_id"]=> string(3) "159" 
        ["employee_id"]=> string(3) "545"  } } 
```

我的循环：

```
foreach ($this->request->data['MonthlyReturn'] as $key=>$m) // Cycle through each record

{
    foreach ($key as $empl)

    {
        $employee = $empl['employee_id'];
        print '<pre>';
        print_r ($employee);
        exit;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:00:57.963

1.  在内部 foreach 中，您正在循环`$key`将其更改为`$m`

2.  此外，您的数组的第一个值不是数组，即`["company_id"]=> string(3) "159"`是一个字符串（159），所以它会给出错误。所以在内部 foreach 之前也检查数组`if(is_array($m)){`。

这是代码：

```
 foreach ($this->request->data['MonthlyReturn'] as $key=>$m){
              if(is_array($m)){
                  echo $m['employee_id'];
              }
              else{
                   echo $m;
              }
         } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:00:36.370

改变这个

```
foreach ($key as $empl)  // $key is array key 
```

到

```
foreach ($m as $empl)   // $m is your array value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:10:59.247

您的数组不适用于该代码。它需要一个多维数组，但它不完全在第一个深度上有一个字符串值

```
array(3) {
        ["company_id"]=> string(3) "159" <--- problem
        [0]=> array(9) { 
            ["company_id"]=> string(3) "159" 
            ["employee_id"]=> string(3) "544" 
            ["pay_week1"]=> string(1) "0" 
        } 
        [1]=> array(9) { 
            ["company_id"]=> string(3) "159" 
            ["employee_id"]=> string(3) "545"  
        } 
    } 
```

它试图循环一个字符串值，这会产生一个错误

# c# - 将数组转换为 ObservableCollection

> ID：15291257
> 
> 赞同：17
> 
> 时间：2013-03-08T09:59:18.943
> 
> 标签：c#, arrays, observablecollection

在 C# 应用程序中，使用以下数组：

```
CProject[] projectArray = this.proxy.getProjectList(username, password); 
```

但是我需要`projectArray`as 一个`ObservableCollection<CProject>`. 推荐的方法是什么？到目前为止，我正在使用以下语句：

```
ObservableCollection<CProject> projectList = new ObservableCollection<CProject>(projectArray); 
```

您还会使用此声明还是会推荐其他方式？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-08T10:01:02.710

像你一样从一个新的集合中建立一个新的集合`IEnumerable`是这样做的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T10:14:24.657

恕我直言，每次您想添加对象范围时构建一个新集合并不好，而是我会遵循以下设计。

构建一个继承自 ObservableCollection 的类，以便您可以访问受保护的 Items 属性，然后创建一个 AddRange 方法，该方法将向其中添加项目

```
public class MyObObservableCollection<T> : ObservableCollection<T>
{
    public void AddRange(IEnumerable<T> items)
    {
        foreach (var item in items)
        {
            this.Items.Add(item);
        }

    }
OnCollectionChanged(new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Add));
} 
```

# alfresco - 如何在 Alfresco 4.0.d 中预览中文 HTML/XML 文件？

> ID：15291258
> 
> 赞同：0
> 
> 时间：2013-03-08T09:59:21.807
> 
> 标签：alfresco, preview

我无法预览从“/share”应用程序创建的中文 HTML/XML 文件。但中文TXT文件正常。三种文件的中文内容都很好，正常，除了TXT文件的预览。Chinese enoding 无法正确显示。

对于 HTML，当我在编辑器中用一些特殊字体定义文本内容时，预览就可以了。似乎如果你不为整个HTML文件文本内容定义字体，Alfresco不会找到任何字体来预览它，汉字会乱码。

但是对于 XML，我无法定义没有条目的文本字体。

我尝试使用这些文章进行调试：[http](http://wiki.alfresco.com/wiki/Content_Transformation_Debug) ://wiki.alfresco.com/wiki/Content_Transformation_Debug 并添加 log4j.logger.org.alfresco.repo.content.transform.TransformerDebugsmileyEBUG

进入文件：tomcat/webapps/share/WEB-INF/classes/log4j.properties

但是没有任何效果！任何帮助，将不胜感激

-----我的ENV Centos OS 5 mysql5 tomcat6 Alfresco:4.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T17:57:25.117

也许这篇文章会有所帮助：

[http://forums.alfresco.com/forum/installation-upgrades-configuration-integration/configuration/preview-missing-chinese](http://forums.alfresco.com/forum/installation-upgrades-configuration-integration/configuration/preview-missing-chinese)

> 我将文件“simhei.tff”和“simsun.ttc”复制到 /opt/bitnami/libreoffice/share/fonts/truetype 并在字体缓存刷新（重新启动）后它就像一个魅力。

# vim - 在vim和c.vim中，使用代码生成功能时如何跳转到下一个位置

> ID：15291260
> 
> 赞同：-1
> 
> 时间：2013-03-08T09:59:22.443
> 
> 标签：vim

在普通模式下输入\ss，生成代码如下

```
 char c ='b';
   switch ( c ) {
    case <-LABEL->: 
    break;
   } 
```

完成输入“c”后如何跳转到“LABEL”位置

键“TAB”不起作用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:57:47.093

除非插件为此提供了映射（您阅读过它的文档吗？），否则更改占位符的最快方法是`/<-<CR>cf>`（搜索占位符的开头并更改直到它的结尾）。你可以用`:nnoremap`映射来缩写它。

# wpf - WPF：显示来自访问数据库的图像？

> ID：15291267
> 
> 赞同：0
> 
> 时间：2013-03-08T09:59:43.350
> 
> 标签：wpf, vb.net

我想显示从我的访问数据库中保存的图像。坚果我无法逆转如何将二进制文件转换为图像......这是我使用recorset保存图像的方式。

```
Dim Stream As FileStream
            Dim Reader As StreamReader
            Stream = New FileStream(tpath.Text, FileMode.Open, FileAccess.Read)
            Reader = New StreamReader(Stream)
            Dim ImgData(Stream.Length - 1) As Byte
            Stream.Read(ImgData, 0, Stream.Length - 1)

            rs("logo").Value = ImgData 
```

请帮助我如何在图像控件中显示它。谢谢你。

```
 If sdr.HasRows Then
                sdr.Read()
                Ebrdesc.Text = sdr.Item("comp_desc")
                Ebrimage.Source = ??????????

  End If 
```

希望有人可以帮助并给我一些指示。谢谢！:)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-08T10:16:25.660

我不熟悉 vb.net 但这有[帮助](http://www.dotnetheaven.com/article/ado.net-reading-and-writing-blob-in-vb.net)吗？

# android - 如何从外部存储中获取图像

> ID：15291268
> 
> 赞同：0
> 
> 时间：2013-03-08T09:59:47.327
> 
> 标签：android, bitmap, xamarin.android, android-sdcard

我创建了一个名为`Items`in的文件夹`/mnt/sdcard/`，我想从中查找`JPG`图像。然后我想显示`ListView`所有列出图像的名称。单击列表中的一个名称后，我希望路径中的图像显示在`ImageView`. 我很难找到图像。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:45:01.917

外部存储路径因设备而异，我强烈建议您不要使用`/mnt/sdcard/`而是 rater `Environment.ExternalStorageDirectory`。

您应该能够使用正常的 C# 文件操作来获取文件列表。

```
string[] filePaths = Directory.GetFiles(Environment.ExternalStorageDirectory, "*.jpg"); 
```

您可以使用 filePaths 传递给您的自定义`Adapter`并在其中加载`Bitmap`s 如果您想在 s 内显示它们`ListView`：

```
using(var bitmap = BitmapFactory.DecodeFile(filePaths[position]))
    imageView.SetImageBitmap(bitmap); 
```

或者您可以简单地使用 a`SimpleAdapter`并将其传递给`filePaths`，然后将它们显示为字符串。

然后你只需要连接`ItemClick`事件来获得点击列表中的位置并将正确的加载`Bitmap`到 ImageView 中。

如果您使用大图像，请阅读[http://docs.xamarin.com/recipes/android/resources/general/load_large_bitmaps_efficiently ，因为您的资源非常有限。](http://docs.xamarin.com/recipes/android/resources/general/load_large_bitmaps_efficiently)

自定义列表适配器的好资源：[http ://redth.info/2010/10/12/monodroid-custom-listadapter-for-your-listview/](http://redth.info/2010/10/12/monodroid-custom-listadapter-for-your-listview/)

# c# - 如何使用 IsMatch 正则表达式不匹配字符？

> ID：15291283
> 
> 赞同：0
> 
> 时间：2013-03-08T10:00:44.973
> 
> 标签：c#

我尝试检查字符串是否包含任何字符，但不允许使用“\”和“^”。

```
Regex nameValidator = new Regex("^[\\^]+$"); 
```

这不起作用：

```
!nameValidator.IsMatch(myString) 
```

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:05:37.177

因为字符类内部的 ^ 与外部具有不同的含义。这意味着对类字符的否定。所以我的正则表达式将允许除了`\`和`^`

```
Regex nameValidator = new Regex(@"^[^^\\]+$"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:05:39.423

试试这种方式：

```
Regex nameValidator = new Regex(@"^[^\^\\]+$");

string sample_text = "hello world";
bool isMatch = nameValidator.IsMatch(sample_text); // true

sample_text = @"Hello ^  \world ";
isMatch = nameValidator.IsMatch(sample_text); // false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:05:57.673

\ 转义 C# 中字符串文字的反斜杠。因此，您的正则表达式（正如 regex engione 所见）是

```
^[\^]+$ 
```

这是有效的，但不是你想要的。（被关心的被反斜杠转义）更改为：

```
new Regex("[\\\\\\^]+"); 
```

或在字符串文字前使用 @（推荐）

```
new Regex(@"[\\\^]+"); 
```

您必须同时转义反斜杠和插入符号，因此使用三个反斜杠。要在没有@ 的字符串文字中使用它们，您必须再次转义每个反斜杠，因此您有六个。

# spring - 使用jstl或scriptlet在jsp中设置命令类对象的值

> ID：15291285
> 
> 赞同：0
> 
> 时间：2013-03-08T10:00:55.360
> 
> 标签：spring, jsp

我在 JSP 中有一个命令类并使用弹簧形式标签。我想为表单设置值：jsp 本身中的输入标记。

我该如何设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:16:38.180

将此添加到您的jsp：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> 
```

然后在您的输入标签中添加以下内容

```
<form:input type="text" path="member_variable_name"/> 
```

希望这能回答您的问题.. 看到[这个](http://www.dzone.com/tutorials/java/spring/spring-form-tags-1.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:02:01.340

编辑要使用的 MVC 控制器方法`@ModelAttribute`（我希望您正在使用注释）

```
@RequestMapping("/somepath/foo/do")
public String someHandlerMethod(
   @ModelAttribute("commandObject") CommandObject commandObject,
   Model model, 
   BindingResult result) {

     commandObject.setSomeValue("sample"); //Set value in command object

     ...processing...
     return("some.jsp");
} 
```

# matlab - 使用 imerode、imdilate、im2bw、imshow 转换图像

> ID：15291293
> 
> 赞同：0
> 
> 时间：2013-03-08T10:01:07.093
> 
> 标签：matlab, image-processing

我想将下面的图像 A 转换为图像 B。我该如何实现。请帮忙。

![在此处输入图像描述](../Images/8f39169f8f2aae2cc0659149273963b9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:53:55.837

有很多技术可以完成这项任务。您可以简单地在图像上运行 Sobel 掩码并找到梯度，然后使用标量阈值（如值 100）对图像进行分割，并运行圆形 Hough 变换来检测圆形。该算法返回圆心和半径。通过此信息，您可以将像素保留在该圆圈内并删除其他像素。

作为另一种技术，您可以搜索矩形，对于此操作，在 Sobel 蒙版之后，您可以运行 line Hough 变换以找到适合边缘的线，然后找到 sobel 图像中可见线的交点，由此您可以决定矩形的位置，然后决定移除时间。

请享用 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T11:58:21.417

在这种情况下尝试 ic 的形态学操作，不需要的对象是相同的，并且比其他对象的大小更小。只需使用 strel fn 识别您的结构元素，只需 c matlab 帮助，然后您有很多使用 fns 的选项： imerode ， imdilate ， bwmorph 更改 strel 形状大小并使用 imerode 直到您只得到大对象，然后使用 imdilate 和相同的形状和大小

# php - http请求后快速写入日志文件

> ID：15291294
> 
> 赞同：0
> 
> 时间：2013-03-08T10:01:08.707
> 
> 标签：php, python, performance, logging

我目前完成了一个 Web 服务器的构建，它的主要职责是简单地将每个 http post 请求中的正文数据的内容写入日志文件。发布数据的内容在收到时会被混淆。所以我不混淆发布数据并将其写入服务器上的日志文件。混淆后的内容是一系列随机键值对，每个请求之间都不同。它不是固定数据。

该服务器正在运行具有 2.6+ 内核的 Linux。服务器配置为处理大量流量（打开文件限制为 32k 等）。该应用程序是使用 web.py 框架用 Python 编写的。http 服务器是 Nginx 后面的 Gunicorn。

在使用 Apache Benchmark 进行一些负载测试后，我注意到它每秒可以处理大约 600-700 个请求，而不会出现任何日志写入问题。Linux 本身在缓冲方面做得很好。当每秒尝试写入同一文件的请求数超过此数量时，就会出现问题。数据不会被写入，信息会丢失。我知道“直接写入文件”设计可能从一开始就不是正确的解决方案。

所以我想知道是否有人可以提出一个我可以快速实施的解决方案，而无需更改太多可以克服这个问题的基础设施和代码？

我已经阅读过 Redis 等内存存储，但我意识到如果在服务器故障期间数据位于内存中，那么该数据就会丢失。我在文档中读到 redis 可以配置为持久存储，只需要服务器上有足够的内存供 Redis 执行。这个解决方案意味着我必须编写一个脚本，以一定的时间间隔将数据从 Redis（内存）转储到日志文件。

我想知道是否有更快的解决方案？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:21:05.313

我能想到的一种可能的选择是单独的日志记录过程。这样您的 web.py 就可以屏蔽性能问题。这是处理日志模块的经典方式。您可以使用 IPC 或任何其他总线通信基础设施。有了这个，您将能够解决两个问题 -

1.  记录不会成为高容量呼叫流的巨大瓶颈。
2.  一个单独的模块可以确保/提供开关关闭/打开设施。
3.  因此，不会有任何巨大/显着的进程内存使用。

但是，您应该记住以下几点 -

1.  您需要确保日志记录仅限于日志记录。它不能是用于业务处理的数据存储。否则，您的业务逻辑中可能存在许多同步问题。
2.  日志记录过程（这里我指的是实际的 Unix 过程）将变得至关重要并且稍微复杂（即您可能必须处理某种形式的 IPC）。

！

# reporting-services - 来自具有多个分组的另一个数据集的 distinctcount

> ID：15291295
> 
> 赞同：0
> 
> 时间：2013-03-08T10:01:09.370
> 
> 标签：reporting-services, ssrs-2008

我有从 2 个数据集生成策略数量的报告。

该表链接到 dataset1。

我用了公式

```
CountDistinct(Fields!Policy_ID.Value) 
```

我的问题是如何从第二个数据集“AccountingV10Dataset”中获取字段 Policy_ID 的不同计数，特别是我将 Contract_Start_Month、Contract_Cover_Type 和 Primary_LOB 分组。

下面是报告设计的屏幕截图，以帮助您了解我的要求 ![在此处输入图像描述](../Images/91292c6da292a3cede7ef76d1433c5da.png)

该报告应按如下方式生成： ![在此处输入图像描述](../Images/ea1a1fd32a6f8f13c08d9d6b65faa4e4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T23:08:30.147

我会在数据集层（例如在 SQL 中）得出不同的计数。SSRS 聚合函数仅此而已。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:35:11.430

我设法以这种方式解决：

我创建了以下代码来计算来自另一个数据集的区分计数：

```
Dim suma As Decimal = New Decimal()

Public Function SumLookup(ByVal items As Object(),ByVal CountSum As String) As Decimal
If items Is Nothing Then
Return Nothing
End If

Dim ct as Integer = New Integer()
Dim PolId as Integer = New Integer()
suma = 0
ct = 0
PolId = 0
For Each item As Object In items
suma += Convert.ToDecimal(item)
If (CountSum = "SUM") then
ct += 1
Else If (PolID <> Convert.ToInt32(item)) then 
ct += 1
END If
PolId = Convert.ToInt32(item)
Next
If (ct = 0) Then return 0 else If(CountSum = "SUM") then return suma else return ct 
End Function

Public Function GetMyVal() as Decimal
GetMyVal = suma 
End Function 
```

我通过以下方式调用此函数：

```
=code.SumLookup(Lookupset(Fields!Contract_Start_Month.Value & "-" & Fields!Contract_Cover_Type.Value & "-" & Fields!Primary_LOB.Value,Fields!Contract_Year_Start_Month.Value & "-" & Fields!Cover_Type.Value & "-" & Fields!LOB.Value,Fields!Layer_ID.Value, "AccountingV10Dataset"),"COUNT") 
```

希望我的解决方案能像对我一样对其他用户有所帮助。

问候，

# c# - 正则表达式 - 改进搜索并添加第三组

> ID：15291297
> 
> 赞同：3
> 
> 时间：2013-03-08T10:01:12.643
> 
> 标签：c#, regex, .net-3.5

这是对我之前的问题的一种改进：[c# generate random string based on pattern](https://stackoverflow.com/questions/14396482/c-sharp-generate-random-string-based-on-pattern)

我有如下代码：

```
class Generator
{
    private static readonly Random R = new Random();
    private static readonly char[] L = { 'a', 'b', 'c', 'd', 'e' };
    private static readonly char[] U = { 'A', 'B', 'C', 'D', 'E' };
    private static readonly char[] S = { '!', '@', '#', '$', '%' };

    public static string FromPattern(string pattern)
    {
        return Regex.Replace(pattern, @"\[([Ccds])(?::([\d]+))?\]", ReplaceSingleMatch);
    }

    private static string ReplaceSingleMatch(Match m)
    {
        int length;
        if (!int.TryParse(m.Groups[2].Value, out length))
            length = 1;

        var output = new StringBuilder();
        while (output.Length != length)
        {
            switch (m.Groups[1].Value)
            {
                case "d"://digits
                    output.Append(R.Next(0, 9));
                    break;
                case "c"://lowercase char
                    output.Append(L[R.Next(L.Length)]);
                    break;
                case "C"://uppercase char
                    output.Append(U[R.Next(U.Length)]);
                    break;
                case "s"://special char
                    output.Append(S[R.Next(S.Length)]);
                    break;
            }
        }
        return output.ToString();
    }
} 
```

使用上面我可以写：

```
Generator.FromPattern("ID: [d:3][c:2]#[C][s:2]") 
```

我将获得如下示例输出：`ID: 263ac#D$!`

因此，当我输入时，`[d]`我得到一位数，如果我输入，`[d:5]`我得到 5 位数字。

我想添加的是范围，所以当我输入时，`[d:2-5]`我会随机获得 2 到 5 个随机数字。

我最大的问题是正则表达式，休息很容易:)

我需要我的正则表达式来搜索以下组：

*   `[d]`,
*   `[d:3]`（必须是冒号后的数字），
*   `[d:2-5]`（用破折号分隔的两个数字）

**欢迎任何关于改进的建议！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:10:54.477

正则表达式的真棒工具：[http ://www.ultrapico.com/Expresso.htm](http://www.ultrapico.com/Expresso.htm)

这是我想出的表达式（带有命名的捕获组）：

```
\[(?<type>[Ccds])(:(?<a>[\d]+)(-(?<b>[\d]+))?)?\] 
```

![在此处输入图像描述](../Images/38a9bd5d9b901b86105072bb41eee346.png)

# php - 关于电子邮件表单重定向

> ID：15291300
> 
> 赞同：0
> 
> 时间：2013-03-08T10:01:23.740
> 
> 标签：php, forms

对于假设（xyz.com），我在 php 不支持的网站上有一个电子邮件表单，我在子域（123.com）上托管了一个 php 文件，以将我的网站视为假设（abc.123.com）。 ，它工作正常，但我如何从（abc.123.com）的那个php文件重定向到我在xyz.com的比你页面？

有什么解决办法吗？，在此先感谢并等待友好的答复。

更加具体

在我的表格中，我将网址包含为

```
urlWebsite = "abc.xyz.com" 
```

在 php 文件中，我将标题位置包含为

```
Header('Location:'. $_POST['urlWebsite'].'/p/thank-you.html') 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:04:31.610

您也需要通过该方案，`http`或者`https`：

```
header('Location: http://'. $_POST['urlWebsite'].'/p/thank-you.html');
die; 
```

# python - 如何从 Python 中重写的@classmethod 调用父类的@classmethod？

> ID：15291302
> 
> 赞同：11
> 
> 时间：2013-03-08T10:01:32.997
> 
> 标签：python, superclass, class-method

假设我有一堂课

```
class SimpleGenerator(object):
    @classmethod
    def get_description(cls):
        return cls.name

class AdvancedGenerator(SimpleGenerator):
    @classmethod
    def get_description(cls):
        desc = SimpleGenerator.get_description() # this fails
        return desc + ' Advanced(tm) ' + cls.adv_feature 
```

现在，我已经扩展了上述每个类，使其分别具有一个具体的类：

```
class StringGenerator(SimpleGenerator)
    name = 'Generates strings'
    def do_something():
        pass

class SpaceShuttleGenerator(AdvancedGenerator)
    name = 'Generates space shuttles'
    adv_feature = ' - builds complicated components'
    def do_something():
        pass 
```

现在假设我打电话

```
SpaceShuttleGenerator.get_description() 
```

问题是`AdvancedGenerator`我想在`SimpleGenerator`传递类的实例时调用该方法，特别是`SpaceShuttleGenerator`. 这可以做到吗？

注意：该示例已简化，因为我的具体示例涉及更多。假设我的目标不是连接字符串。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-08T10:04:52.497

使用[`super()`](http://docs.python.org/2/library/functions.html#super)：

```
@classmethod
def get_description(cls):
    desc = super(AdvancedGenerator, cls).get_description()
    return desc + ' Advanced(tm) ' + cls.adv_feature 
```

`SimpleGenerator.get_description()`使用和之间的区别在于将被设置`super(AdvancedGenerator, cls).get_description()`为什么。`cls`直接调用类时，`cls`设置为`SimpleGenerator`，使用`super()`，`cls`将引用`AdvancedGenerator`。

比较您的代码（调整以用于`__name__`说明差异）：

```
>>> class SimpleGenerator(object):
...     @classmethod
...     def get_description(cls):
...         return cls.__name__
... 
>>> class AdvancedGenerator(SimpleGenerator):
...     @classmethod
...     def get_description(cls):
...         desc = SimpleGenerator.get_description() 
...         return desc + ' Advanced(tm)'
... 
>>> AdvancedGenerator.get_description()
'SimpleGenerator Advanced(tm)' 
```

并使用`super()`：

```
>>> class AdvancedGenerator(SimpleGenerator):
...     @classmethod
...     def get_description(cls):
...         desc = super(AdvancedGenerator, cls).get_description()
...         return desc + ' Advanced(tm)'
... 
>>> AdvancedGenerator.get_description()
'AdvancedGenerator Advanced(tm)' 
```

# html - 水平滑块每个项目占据 100% 的窗口

> ID：15291304
> 
> 赞同：0
> 
> 时间：2013-03-08T10:01:37.300
> 
> 标签：html, css

我想制作一个水平滑块，每个项目占据 100% 的窗口。我不想使用 CSS 指定容器的宽度，因为它们需要是动态的。

```
<div class='container'>
  <div class='item'>item1</div>
  <div class='item'>item2</div>
  <div class='item'>item3</div>
  <div class='item'>item4</div>
</div> 
```

CSS如下

```
.container{
  width:100%;
  height:100%;
}

.item{
  width:100%;
  height:100%;
} 
```

我希望将项目水平放置在考虑窗口宽度并平均分割空间的情况下彼此相邻；我怎样才能做到这一点 ？

[编辑]

![粗略的草图](../Images/fb46bd7a343f0e3150cdcff16d4abb11.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:07:08.643

您可以像这样`display:table`用于父 div 和子 div`display:table-cell`

```
.container
{
    width:100%; 
    height:100%
    display:table;
}
.item
{
    width:100%;
    display:table-cell;
    padding:15px;
} 
```

看看这里[JS fiddle](http://jsfiddle.net/Jfaws/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:55:10.977

```
//Try with css and jquery. I hope that you get solutions.

<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
var totalWidth='';
$(document).ready(function(e) {
    $('.container .item').each(function(index, element) {
        totalWidth = totalWidth+$(this).outerWidth(); 
    });
    $('.container_inner').width(totalWidth);
});
</script>
<style type="text/css">
.clear{display:block;height:0px;width:0px;clear:both;}
.container{
  width:100%;
  height:100%;
  position:absolute;
  top:0px;
  left:0px;
  overflow:auto;
}

.item{
  width:100%;
  height:100%;
  float:left;
}
</style>
<div class='container'>
    <div class="container_inner">
        <div class='item'>item1</div>
        <div class='item'>item2</div>
        <div class='item'>item3</div>
        <div class='item'>item4</div>
        <div class='clear'></div>
    </div>
</div> 
```

# html - 仅包含查询字符串的相对 URL

> ID：15291307
> 
> 赞同：44
> 
> 时间：2013-03-08T10:01:50.410
> 
> 标签：html, url, query-string

我在页面中有一些链接，只需要更改当前 URL 的查询字符串部分。

例如当前页面是：

`http://demo.com/bigreport?page=13`

我想链接到

`http://demo.com/bigreport?page=14`

我可以`<a href="?page=14">Next</a>`用作这个的相对链接吗？

我惊讶地发现它可以在 Chrome 中使用。我从来没有在任何地方看到过它的文档或提及，所以我很想知道是否有人使用它，以及是否有更广泛的浏览器支持。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-08T10:22:04.423

进一步的研究表明这`<a href="?page=14">Next</a>` *是*一个有效的相对 URL。

它被记录为 WHATWG 的 URL 规范 [http://url.spec.whatwg.org/#relative-state的一部分](http://url.spec.whatwg.org/#relative-state)

新 URL 将继承基本 URL 的方案、主机、端口和路径。

经测试可用于：

*   铬合金
*   即 7

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-08T10:06:38.180

`<a href="?page14">Next</a>`有效，因为浏览器将其解释为相对 URL。与您网站上链接图像的工作方式类似，`<img src="logo.gif"/>`相对 url 以这种方式工作（链接相对于当前页面），您不需要使用完整的绝对 URL。

浏览器长期以来一直支持这一点。人们可能没有意识到它，因为浏览器会自动处理它。

# mysql - 哪个是最有效的 SELECT 方法，为什么？

> ID：15291314
> 
> 赞同：8
> 
> 时间：2013-03-08T10:02:14.000
> 
> 标签：mysql, sql

考虑一个人们对他们最喜欢的颜色投票赞成（+1）或反对（-1）的网站，我有两张桌子：

一个列出人们可以投票的所有颜色，第二个表格记录每个人的投票，它是什么颜色，是+1还是-1。

关于获取特定颜色的总投票，是否更有效地包括颜色表上的总分，当一个人投票时，有一个插入语句和一个更新语句：

```
INSERT INTO votes (colour,vote) VALUES (red,-1);
UPDATE colours SET score=score-1 WHERE colour='red';

SELECT score FROM colours WHERE colour='red'; 
```

还是在进行投票时只使用一个 INSERT 语句，然后获取您的分数会更有效吗？

```
SELECT SUM(vote) AS score FROM votes WHERE colour='red'; 
```

我猜什么时候有一个非常少数的投票然后选择＃2是最好的，但是当投票表非常大时，选择＃1变得更好吗？

是否有一些工具可以用来根据表大小等对某些 SQL 查询进行排名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T10:22:55.450

就个人而言，我认为如果你想显示一个聚合分数（并且我想你会想经常显示分数），那么随着投票表中行数的增加，你会发现聚合`SUM`查询会花费更长的时间并且更长并且不能很好地扩展。

此外，如果您计划实现只显示得分为 100 或更高的颜色的查询，那么聚合将使查询更简单、更快捷。

使用分数列的另一个优点是，如果在将来某个日期您想清理`votes`表格（例如，如果它变得太大），那么您可以这样做并且不会丢失颜色分数。

我不认为这是过早的优化，我认为这是在设计一个考虑到规模的系统，所以我要做的是创建一些样本数据集，这些样本数据集具有你所期望的每分钟的实际投票数、颜色和查询数运行一些性能测试来评估什么是更好的方法，因为现在选择正确的方法更容易（读起来更便宜），而不是在事情开始出错时修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:10:29.140

两个查询之间的性能差异是微不足道的。您应该根据要保留的信息确定结构。

如果您只需要总分，请使用

```
UPDATE colours SET score=score-1 WHERE colour='red'; 
```

这将非常快，因为该表`colours`将只有几行。

另一方面，存储每个用户的投票可能是有原因的（例如确保他们不会投票两次）。在这种情况下，为每张选票插入一行。

```
INSERT INTO votes (colour,vote,user_id) VALUES (red,-1); 
```

但是不要仅仅因为你认为它会更快就创建一个不必要的行结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:15:04.030

您是过早地优化还是这是一个真正的问题？

第一种方法可能更快，但您为了优化而更改了域模型。只要您知道自己在做什么以及它给您带来的不利条件就可以了（例如，可能需要在所有与投票有关的地方更新两个表，从而导致不同步）

但您可能会考虑其他选择。例如，如果颜色的数量不是那么大，您可以为它们的评级建立一个缓存。这将保持简单的模型，简单的评级机制并提供您需要的速度，减去一些内存；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T12:07:41.113

这种优化的关键是你要优化*什么。*存储总和会使插入/删除/更新需要更长的时间。计算总和会影响数据查询的性能。

如果您正在对数据进行删除或更新，您很快就会发现预先计算总和的愚蠢之处。当您认为您只更改一条记录时，对数据的任何此类更改都需要对多条记录进行修改。

不过，您的结构似乎只有插入物——顺便说一句，这是一个很好的设计选择，因为您可以看到每一个变化。在这种情况下，问题是您是要承担每个插入的开销，还是要“报告”端的开销。在某些情况下，这个问题很容易。

如果每次要查看总和时都有 1000 票，请即时计算总和。如果每次投票都有 1000 个总和，那么存储总和似乎是更有效的方法。

我的猜测是工作量介于两个极端之间。我天生的偏见是将生成的数据存储起来，然后有额外的表格用于汇总和报告。我会推荐以下两种方法之一：

(1) 仅保留交易数据并即时计算总和。排列表上的索引以使总和尽可能有效。

(2) 只保留一个表中的事务并在另一个表中计算总和（使用触发器或存储过程）。这为您提供了大多数用途所需的最新值。插入应该比在每条记录上存储总和更有效（因为用户级别的表小于投票级别的表）。

您关于计算投票记录总和的建议通常不是我会考虑的选择。当您需要增量投票的历史时，这将是可取的。但是，如果您正在查看历史记录，那么`sum`在应用层进行计算或计算总和也是可行的选择。

# mongodb - 在 MongoDb 中，如何应用文档中存在的排序内部字段？

> ID：15291318
> 
> 赞同：2
> 
> 时间：2013-03-08T10:02:29.383
> 
> 标签：mongodb

我的文档看起来像这样

```
{
  field1: somevalue,
   name:xtz

  nested_documents: [ // array of nested document
    { x:"1", y:"2" }, // first nested document
    { x:"2", y:"3" }, // second nested document
    { x:"-1", y:"3" }, // second nested document
    // ...many more nested documents
  ]
} 
```

如何对nested_documents 中的数据进行排序？
预期答案如下所示：

```
nested_documents: [ { x:"-1", y:"3" },{ x:"1", y:"2" },{ x:"2", y:"3" }] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:18:47.813

为此，您必须使用聚合框架

> db.test.aggregate([{$unwind:'$nested_documents'},{$sort:{'nested_documents.x': 1}}])

这返回

```
"result" : [
    {
            "_id" : ObjectId("5139ba3dcd4e11c83f4cea12"),
            "field1" : "somevalue",
            "name" : "xtz",
            "nested_documents" : {
                    "x" : "-1",
                    "y" : "3"
            }
    },
    {
            "_id" : ObjectId("5139ba3dcd4e11c83f4cea12"),
            "field1" : "somevalue",
            "name" : "xtz",
            "nested_documents" : {
                    "x" : "1",
                    "y" : "2"
            }
    },
    {
            "_id" : ObjectId("5139ba3dcd4e11c83f4cea12"),
            "field1" : "somevalue",
            "name" : "xtz",
            "nested_documents" : {
                    "x" : "2",
                    "y" : "3"
            }
    }
],
"ok" : 1 
```

希望这可以帮助

# php - 改进我的 SQL 数据库表单 PHP 代码

> ID：15291320
> 
> 赞同：-1
> 
> 时间：2013-03-08T10:02:32.657
> 
> 标签：php, sql

有人可以看看我的代码我终于在 2 天后开始工作，并从这里得到了很多帮助 - 谢谢！

我想做一些调整 -

*   对于交易 ID，如果我在交易 ID 中搜索任何字母，则会显示记录 - 如果已输入完整交易 ID 并与数据库中的记录匹配，我只希望它向我显示记录。交易 ID 示例：87K07228GD157974M

*   如果您想检索您的代码，您必须输入您的姓名、电子邮件和交易日期，这很完美但时间也包含在日期中，但我不希望任何人也必须输入时间只有日期即....您当前必须输入：2013-03-07 01:39:23 - 但我想以 DD/MM/YY 的格式输入 - 这可能吗？

我也不知道代码是否也安全，任何建议都将不胜感激。谢谢，

## 这是代码：

findme.html

```
<html>

<head>
<title>Search</title>
</head>

<body bgcolor=#ffffff>

<h2>Search Transaction ID</h2>

<form name="search" method="post" action="findme.php">
Seach for: <input type="text" name="find" /> 

<input type="submit" name="search" value="Search" />
</form>
OR

<h2>Search Name, E-Mail & Transaction Date</h2>

<form name="search" method="post" action="findme1.php">
Full Name (on paypal account) <input type="text" name="name" /> <br><br>
Paypal E-Mail Address <input type="text" name="email" />  <br><br>
Transaction Date - DD/MM/YY <input type="text" name="date" /> 

<input type="submit" name="search" value="Search" /><br><br>
If searching via Name, E-Mail & Transaction date, all fields must be completed to     obtain your code.
</form>

</body>

</html> 
```

* * *

findme.php

```
<html>
<head><title>Searching for a student...</title>
</head>
<body bgcolor=#ffffff>

<?php

echo "<h2>Search Results:</h2><p>";

//If they did not enter a search term we give them an error
if ($find == "")
{
echo "<p>You forgot to enter a search term!!!";
exit;
}

// Otherwise we connect to our Database
mysql_connect("location.com", "ipn", "password!") or                 die(mysql_error());
mysql_select_db("ipn") or die(mysql_error());

// We perform a bit of filtering
$find = strtoupper($find);
$find = strip_tags($find);
$find = trim ($find);

//Now we search for our search term, in the field the user specified
$iname = mysql_query("SELECT * FROM ibn_table WHERE itransaction_id LIKE '%$find%'");

//And we display the results
while($result = mysql_fetch_array( $iname ))
{
echo "<b>Name: </b>";
echo $result['iname'];
echo " "; 
echo "<br>";
echo "<b>E-mail: </b>";
echo $result['iemail'];
echo "<br>";
echo "<b>Transaction Date: </b>";
echo $result['itransaction_date'];
echo "<br>";
//And we remind them what they searched for
echo "<b>Search Term </b>(Transaction ID): </b> " .$find;
//}
echo "<br>";
echo "<br>";
echo "<b>Login Code: </b>";
echo $result['ipaymentstatus'];
echo "<br>";
}

//This counts the number or results - and if there wasn't any it gives them a little     message explaining that
$anymatches=mysql_num_rows($iname);
if ($anymatches == 0)
{
echo "Sorry, but we can not find an entry to match your search, please make sure the     correct details have been entered...<br><br>";
}

?> 

</body>
</html> 
```

* * *

findme1.php

```
<html>
<head><title>Searching for a student...</title>
</head>
<body bgcolor=#ffffff>

<?php

echo "<h2>Search Results:</h2><p>";

//If they did not enter a search term we give them an error
if ($name == "")
if ($email == "")
{
echo "<p>Please enter Full Name, E-Mail Address & Transaction Date EXACTLY how they     appear on your PayPal Account...";
exit;
}

// Otherwise we connect to our Database
mysql_connect("location.com", "ipn", "password") or         die(mysql_error());
mysql_select_db("ipn") or die(mysql_error());

// We perform a bit of filtering
$find = strtoupper($find);
$find = strip_tags($find);
$find = trim ($find);

//Now we search for our search term, in the field the user specified
$name = mysql_query("SELECT * FROM ibn_table WHERE iemail = '$email' AND iname =     '$name' AND itransaction_date = '$date'");

//And we display the results
while($result = mysql_fetch_array( $name ))
{
echo "<b>Name: </b>";
echo $result['iname'];
echo " "; 
echo "<br>";
echo "<b>E-mail: </b>";
echo $result['iemail'];
echo "<br>";
echo "<b>Transaction Date: </b>";
echo $result['itransaction_date'];
echo "<br>";
//And we remind them what they searched for
echo "<b>Search Term </b>(Transaction ID): " .$name;
//}
echo "<br>";
echo "<br>";
echo "<b>Login Code: </b>";
echo $result['ipaymentstatus'];
echo "<br>";
}

//This counts the number or results - and if there wasn't any it gives them a little     message explaining that
$anymatches=mysql_num_rows($name);
if ($anymatches == 0)
{
echo "Sorry, but we can not find an entry to match your search, please make sure the     correct details have been entered...<br><br>";
}

?> 

</body>
</html> 
```

* * *

我的数据库中的字段是：

```
iname
iemail
itransaction_id
ipaymentstatus
itransaction_date 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:43:12.727

如对事务 ID 的评论中所述，您拥有： `$iname = mysql_query("SELECT * FROM ibn_table WHERE itransaction_id LIKE '%$find%'");`

`LIKE`with 的作用是`%$find%`匹配交易 ID 中的任何部分，`$find`这就是为什么你会得到单个字母的结果。将其更改为：

```
$iname = mysql_query("SELECT * FROM ibn_table WHERE itransaction_id = '$find'"); 
```

对于日期问题，您可以决定从用户那里获取什么，例如您声明的日期：

如果你采取：

```
$date = "12-11-2012"; //(dd-mm-yyyy)

$split = explode("-", $date); 
```

那么您可以使用它来生成 SQL 日期/时间格式：

```
$sql_date = date("Y-m-d h:i:s", mktime(0, 0, 0, (int) $split[1], (int) $split[0], (int) $split[2])) 
```

并在 sql 查询中：

```
transaction_date LIKE '$sql_date%' 
```

最后不使用`mysql_*`它已被弃用。而是使用`mysqli`.

# php - json_encode 与面向对象的 PHP

> ID：15291324
> 
> 赞同：-2
> 
> 时间：2013-03-08T10:02:43.917
> 
> 标签：php, javascript, json

如何使用`json_encode`面向对象的 PHP 对以下 json 数据进行编码。

```
var datasets = {
  "usa": {
    label: "USA",
    data: [[1988, 483994], [1989, 479060], [1990, 457648], [1991, 401949], [1992, 424705], [1993, 402375], [1994, 377867], [1995, 357382], [1996, 337946], [1997, 336185], [1998, 328611], [1999, 329421], [2000, 342172], [2001, 344932], [2002, 387303], [2003, 440813], [2004, 480451], [2005, 504638], [2006, 528692]]
  }

  // skipped other data
} 
```

我是面向对象的 PHP 和 json 编码的新手，所以我非常感谢您的帮助。

PS。如果可能，请发布脚本的程序编码样式。我只是想和OO比较。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T10:06:36.460

你不需要面向对象来做到这一点：

```
$array = array("usa" => array(
               "label"=>"USA", 
                "data" => array(
                                array("1988","483994"),
                                array("1989","457645") //etc
                          )
                )
          );
 echo json_encode($array); 
```

同样适用于这样的 json 字符串：

```
$string = '{
  "usa": {
    label: "USA",
    data: [[1988, 483994], [1989, 479060], [1990, 457648], [1991, 401949], [1992, 424705], [1993, 402375], [1994, 377867], [1995, 357382], [1996, 337946], [1997, 336185], [1998, 328611], [1999, 329421], [2000, 342172], [2001, 344932], [2002, 387303], [2003, 440813], [2004, 480451], [2005, 504638], [2006, 528692]]
  }

  // skipped other data
}';

print_r(json_decode($string, true)); //Will show you the previous array 
```

请参阅[php 文档](http://www.php.net/manual/fr/function.json-decode.php)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T10:20:20.967

虽然其他人说您不需要面向对象，但显然您希望尽可能面向对象。而且我认为这是一个好主意，面向对象比大多数 PHP 程序所包含的程序性废话要好得多。

试试这个。

```
<?php

class DataSet {
    var $label;
    var $data;

    public function __construct($label, $data) {
        $this->label = $label;
        $this->data = $data;
    }
}

class CountryData {
    var $datasets;

    public function __construct() {
        $this->datasets = array();
    }

    public function add($label, DataSet $dataset)
    {
        $this->datasets[$label] = $dataset;
    }
}

$usa = new DataSet('USA', array(
    array(1988, 483994),
    array(1989, 479060)
));

$sweden = new DataSet('Sweden', array(
    array(1981, 1000),
    array(1982, 2000)
));

$result = new CountryData();
$result->add('usa', $usa);
$result->add('sweden', $sweden);

echo json_encode($result); 
```

使用这种方法，您可以将日志记录和其他功能附加到 add 方法等，面向对象的方法增加了更轻松地使用行业标准模式的可能性。

这就是上面的代码将输出的内容

```
{
    "datasets":{
        "usa":{
            "label":"USA",
            "data":[[1988,483994],[1989,479060]]
        },
        "sweden":{
            "label":"Sweden",
            "data":[[1981,1000],[1982,2000]]
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:10:23.900

数组在 JSON 中只能是数字，因此关联数组的编码方式与对象相同。你只需要`json_encode`像往常一样打电话：

```
json_encode($array) 
```

在 PHP 中解码 JSON 时，如果您需要关联数组而不是对象，请将 true 作为第二个参数传入：

```
json_decode($json,true); 
```

如果你想要一个对象，你可以`false`作为第二个参数传入，或者不使用它作为参数`false`的默认值。`associative``json_decode`

# wcf - 为什么使用基于声明的身份验证需要资源/操作而不是类型/值

> ID：15291327
> 
> 赞同：4
> 
> 时间：2013-03-08T10:03:18.490
> 
> 标签：wcf, security, .net-4.5, wif, claims-based-identity

我们旧的软件架构使用基于角色的验证。我们现在要使用基于声明的授权。事实上，我认为我们总是使用建模声称的东西，即使我们使用了角色库技术。

最低级别是权限。权限可以是“调用用户服务添加用户”或简称“UserService.Add”。可以将权限分配给组。用户可以是组的成员。最后，通过组成员身份，用户可以拥有一系列权限。

旧系统使用[UserNamePasswordValidator](http://msdn.microsoft.com/en-us/library/system.identitymodel.selectors.usernamepasswordvalidator%28v=vs.100%29.aspx)、[IAuthorizationPolicy](http://msdn.microsoft.com/en-us/library/system.identitymodel.policy.iauthorizationpolicy%28v=vs.100%29.aspx)和[CodeAccessSecurityAttribute](http://msdn.microsoft.com/en-us/library/system.security.permissions.codeaccesssecurityattribute%28v=vs.100%29.aspx)的组合来具有写在服务方法之上的属性，并且在调用服务方法时，将检查有效性。如果用户没有所需的权限，访问将被拒绝。工作得很好。

```
[CompanyRoleRequired(SecurityAction.Demand, Role = "Common.Connect")]
[CompanyRoleRequired(SecurityAction.Demand, Role = "SomeServiceName.Save")]
public void Save(IEnumerable<Data> data)
{
  // code
} 
```

现在我想使用基于声明的授权。保留上面的模型，我将为每个以前的特权创建一个声明，或者为每个具有其操作的有效值的服务创建一个声明。例如，我可以添加声明“UserService”而不是“UserService.Add”，而具有前一个特权的人将获得值为“Add”的声明。我想为服务开发人员提供同样方便的访问检查，所以我希望在服务方法上方注释所需的声明。Microsoft 已经为此提供了[ClaimsPrincipalPermissionAttribute](http://msdn.microsoft.com/en-us/library/microsoft.identitymodel.claims.claimsprincipalpermissionattribute.aspx)。

我没有实现 IAuthorizationPolicy，而是实现了[ClaimsAuthorizationManager](http://msdn.microsoft.com/en-us/library/hh194529.aspx)。

**问题 1)**授权管理器被调用两次。一次使用肥皂网址，一次使用我的属性。我用谷歌搜索了很多，这似乎是设计使然。我在区分通话和只检查我的通话时没有问题，但也许我什么也没看到。是否有一个选项或一种简单的方法可以不使用 url 调用肥皂调用而只调用属性？

**问题 2)**访问检查提供了检查主体是否有索赔的能力。显然，声明具有类型/名称和值。我本来希望该属性提供这样的接口。但是，该属性想了解资源和操作。我需要覆盖的[访问检查](http://msdn.microsoft.com/en-us/library/system.security.claims.claimsauthorizationmanager.checkaccess.aspx)功能也需要检查资源和操作。这是为什么？我是否需要将资源/操作映射到我的 AuthorizationManager 中的声明？如果我看不出有任何需要，是否可以将声明的预期类型和值作为资源和操作放入属性中并将它们 1:1 映射到授权管理器中？或者如果我这样做，我会错过一些重要的安全功能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T10:56:30.350

Q1) 不幸的是这种情况 - 由于“自动”调用和属性/.CheckAccess 都使用相同的声明类型，因此您无法轻松区分两者。我在这里写过：http: [//leastprivilege.com/2011/04/30/what-i-dont-like-about-wifs-claims-based-authorization/](http://leastprivilege.com/2011/04/30/what-i-dont-like-about-wifs-claims-based-authorization/)

Q2）你在这里错过了这个概念。这个想法是不检查特定的声明 - 而是用“你在做什么”来注释代码。编写业务代码的人通常不确切知道允许谁调用它（或者确切需要哪些声明）。您只需告诉 authZ 策略您将要添加一个客户（例如）。授权经理的工作是确定委托人是否被授权这样做（通过任何方式）。关注点分离。见这里： http: [//leastprivilege.com/2011/04/30/what-i-like-about-wifs-claims-based-authorization/](http://leastprivilege.com/2011/04/30/what-i-like-about-wifs-claims-based-authorization/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T05:42:02.060

不确定这是否会对您有所帮助，但 ClaimsAuthorizationManager 具有可被覆盖的方法 (LoadCustomConfiguration)，您可以使用该方法从 XML 文件加载策略。该策略的设计方式可能允许在资源、操作和角色之间进行映射。我已经建立了代码内访问控制列表，而不是如下所示：

```
public interface IAccessControlList
{
   List<CustomAccessRule> Rules { get; }
}

public class CustomAccessRule
{
    public string Operation { get; set; }
    public List<string> Roles { get; set; }

    public CustomAccessRule(string operation, params string[] roles)
    {
        Operation = operation;
        Roles = roles.ToList();
    }
} 
```

我的索赔授权管理器如下所示：

```
public class CustomClaimsAuthorizationManager : ClaimsAuthorizationManager
{
    private IAccessControlList _accessControlList;

    public CustomClaimsAuthorizationManager(IAccessControlList accessControlList)
    {
        _accessControlList = accessControlList;
    }

    public override bool CheckAccess(AuthorizationContext context)
    {
        string operation = context.Action.First().Value.Split('/').Last();
        CustomAccessRule rule = _accessControlList.Rules.FirstOrDefault(x => x.Operation == operation);
        if (rule == null) return true;
        if (context.Principal.Identities.First().IsInRoles(rule.Roles)) return true;
        throw new MessageSecurityException(string.Format("Username {0} does not have access to operation {1}.", context.Principal.Identities.First().Name, operation));
    }

} 
```

这是一个服务的一个访问控制列表实现的示例：

```
public class SampleServiceACL : IAccessControlList
{
    public List<CustomAccessRule> Rules { get; private set; }

    public SampleServiceACL()
    {
        Rules = new List<CustomAccessRule>();
        Rules.Add(new CustomAccessRule("OpenAccount", "Manager", "Owner"));
        Rules.Add(new CustomAccessRule("CloseAccount", "Manager", "Owner"));
        Rules.Add(new CustomAccessRule("SendEmail", "User", "Manager", "Owner"));
    }
} 
```

我正在使用以下方法在服务主机基础级别应用它：

```
 protected override void OnOpening()
    {
        base.OnOpening();

        IdentityConfiguration identityConfiguration = new IdentityConfiguration();
        identityConfiguration.SecurityTokenHandlers.Clear();
        identityConfiguration.ClaimsAuthorizationManager = new CustomClaimsAuthorizationManager(new SampleServiceACL());
        this.Credentials.IdentityConfiguration = identityConfiguration;

        ...
    } 
```

结果，我根本没有使用属性，所有授权逻辑都集中在 ACL 上的声明授权管理器中。

现在，如果您不喜欢这种方法，并且您仍在追求将检查特定声明的属性，那么您可以从[CodeAccessSecurityAttribute](http://msdn.microsoft.com/en-us/library/system.security.permissions.codeaccesssecurityattribute.aspx)派生并实际实现该逻辑。MS开箱即用的东西是好的，但这并不意味着你应该以任何方式坚持下去。检查声明的逻辑也可以作为身份的扩展来实现，即：

```
public static class IdentityExtensions
{
    public static bool IsInRoles(this ClaimsIdentity id, List<string> roles)
    {
        foreach (string role in roles)
            if (id.HasClaim(ClaimTypes.Role, role)) return true;
        return false;
    }
} 
```

因此，您可以构建扩展、自定义属性，然后在属性中使用扩展来执行验证逻辑。

同样，这只是我已经做过的事情。可能不是您正在寻找的，但它是一种自定义解决方案。

# c# - System.Exception 是否有内置的抛出时间戳？

> ID：15291328
> 
> 赞同：5
> 
> 时间：2013-03-08T10:03:20.257
> 
> 标签：c#, .net, exception, timestamp

有没有办法提取异常本身引发异常的时间，还是我需要手动将此信息添加到异常中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T10:05:11.580

该对象没有内置`Timestamp`属性`Exception`。您可以创建一个继承自`Exception`并添加您自己的属性的新类。

如果您将异常用作日志框架的参数，您可能希望直接在日志框架中处理时间戳（很可能使用`DateTime.Now`/ `UtcNow`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:07:20.347

当发生异常时，如果您已经处理了它，那么控件将立即转到 catch 块，这正是发生异常的时间

`DateTime.Now.Time`因此，在使用日期对象（等）时，catch 块中的第一行可以准确地告诉您

# c++ - 立方体在 QGLWidget 中呈现为正方形

> ID：15291329
> 
> 赞同：0
> 
> 时间：2013-03-08T10:03:25.623
> 
> 标签：c++, qt, opengl, qt5, qglwidget

我一直试图在 QGLWidget 中渲染一个立方体，但结果是错误的。无论我如何旋转它，它看起来都像一个扁平的正方形。就好像它没有注意到它的顶点的 Z 坐标一样。就在我添加清除 GL_DEPTH_BUFFER_BIT 之前，正方形看起来就像立方体的所有侧面都挤成一个。现在它似乎丢弃了不属于正面的顶点，但它仍然不是立方体。！

[截图 [链接]](http://i.stack.imgur.com/TiMst.png)

我的初始化GL（）和paintGL（）：

```
typedef struct
{
    float XYZW[4];
    float RGBA[4];
} Vertex;

Vertex Vertices[8] =
{
    //vertices
};

const GLubyte Indices[36] =
{
    //indices
};

void ModelView::initializeGL()
{
    m_program = new QGLShaderProgram(this);
    m_program->addShaderFromSourceCode(QGLShader::Vertex, vertexShaderSource);

    m_program->addShaderFromSourceCode(QGLShader::Fragment, fragmentShaderSource);

    m_program->link();
}

void ModelView::paintGL()
{
    glEnable(GL_DEPTH_TEST);
    glDepthFunc(GL_LESS);

    glClearColor(.5f, .5f, .5f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glViewport(0, 0, width(), height());

    m_program->bind();

    QMatrix4x4 matrix;
    matrix.perspective(60, 4.0/3.0, 0.1, 100.0);
    matrix.translate(0, 0, -2);
    matrix.rotate(50.0, 1, 1, 1);

    m_program->setUniformValue(m_matrixUniform, matrix);

    m_posAttr = m_program->attributeLocation("posAttr");
    m_colAttr = m_program->attributeLocation("colAttr");
    m_matrixUniform = m_program->uniformLocation("matrix");

    glGenBuffers(1, &BufferId);
    glGenBuffers(1, &IndexBufferId);

    glBindBuffer(GL_ARRAY_BUFFER, BufferId);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, IndexBufferId);

    glBufferData(GL_ARRAY_BUFFER, BufferSize, Vertices, GL_STATIC_DRAW);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(Indices), Indices, GL_STATIC_DRAW);

    glVertexAttribPointer(m_posAttr, 2, GL_FLOAT, GL_FALSE, VertexSize, 0);
    glVertexAttribPointer(m_colAttr, 3, GL_FLOAT, GL_FALSE, VertexSize, (GLvoid *)RgbOffset);

    glEnableVertexAttribArray(0);
    glEnableVertexAttribArray(1);

    glDrawElements(GL_TRIANGLES, 36, GL_UNSIGNED_BYTE, NULL);

    glDisableVertexAttribArray(1);
    glDisableVertexAttribArray(0);

    m_program->release();
} 
```

顶点和索引应该正确定义，它们取自教程，大多数代码也是如此。不过，二维对象的渲染似乎还不错。

另外，为什么教程用 -2 参数调用 matrix.translate ？如果我将其更改为大于 1 的任何其他值或将其删除，渲染的对象就会消失。

Qt5，Windows Vista 32 位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:19:19.763

> 另外，为什么教程用 -2 参数调用 matrix.translate ？如果我将其更改为大于 1 的任何其他值或将其删除，渲染的对象就会消失。

这是由于剪辑。当您渲染对象时，“太近”或“太远”的东西会被丢弃，通过近和远裁剪平面（分别）。

通过将立方体移动得更近（将 -2 更改为 1 或 0），您将立方体向前移动，越过近剪裁平面，因此它会消失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T14:57:12.630

`glVertexAttribPointer()`有一个`size`参数，它指定每个顶点的组件数。在代码中它是 2，因此一切都是 2D。更改为 3 即可解决问题。

# url - Joomla - 来自谷歌结果的错误 url 路径

> ID：15291330
> 
> 赞同：0
> 
> 时间：2013-03-08T10:03:30.570
> 
> 标签：url, joomla

我在一个 Joomla 网站上有一个奇怪的问题。如果我从主页访问然后导航到该站点，它可以正常工作，但是如果我从谷歌结果进入一些内部页面，它会显示不正确的页面布局，因为 url 不正确。

这是正确的网址 [主页上的正确页面](http://www.winetsolutions.it/index.php?option=com_content&view=category&layout=blog&id=20&Itemid=127&lang=en)

这是谷歌从谷歌发现的[不正确页面的不正确网址](http://www.winetsolutions.it/index.php?option=com_content&view=article&id=7%3areferenze&catid=11&Itemid=104&lang=en)

正如您在链接中看到的那样，在第二页中显示了评级模块（我从未使用过）而不是文章。

有人可以帮助我吗？

编辑：我正在使用 Joomla 2.5 版本。每个菜单项都是类别博客类型，并且必须显示一个类别的所有文章。每个类别有 2 篇文章。在不正确的链接中似乎它访问了单个文章，添加了我在每篇文章中隐藏的评级

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T23:32:31.550

您看到布局不正确的原因是两个不同的 Itemid 参数（正确的 url 有 127，而错误的有 104）。Joomla 将忽略 URL 中的其余差异。

解决方案：找到 ID 为 104 的菜单项（查看菜单项视图右侧的菜单 ID），然后从那里检查页面上显示的模块。可能有模块在不可见的位置。

其中一个模块是发布具有错误 ID 的链接。如果它是 Joomla 核心（如搜索模块），您通常可以在模块或组件配置中强制使用 Itemid。否则，您需要修复一些第三方代码。

只有当你解决了多个项目后，你才应该打开 SEF，否则你会遇到同样的问题，只是更难追踪。

sh404 可以帮助你解决这个问题，我会在测试站点上尝试一下，看看它是否能让你更快地摆脱麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:48:41.797

您使用的是哪个版本？如果您可以在 joomla 管理员的全局设置中打开 SEF 选项。然后你需要确保你所有的文章都在菜单中。那么如果你将它们链接到不同的页面上，它应该保持 url 相同。您目前使用所有 x=123&... 获取参数页面的方式将显示您将菜单更改为的任何 ID。

# c# - 在 C# 中高效的 EDI 解析到数据库

> ID：15291332
> 
> 赞同：2
> 
> 时间：2013-03-08T10:03:31.797
> 
> 标签：c#, edi, x12

3 多年前，我们被要求为客户开发 EDI 解决方案作为紧急事项。

他们想要解决方案的完整 IP/控制等，并且不想使用免费的开源解决方案、为 BizTalk 等支付大笔资金或向 VAN 支付经常性费用。

我们当时做了一些研究，实际上并没有找到很多关于 EDI 格式、解析等的信息，所以我们的 2 人开发团队直接介入并在 C#/ASP.Net 中开发了一个解决方案。由于将发生的 EDI 消息事务数量很少（每天大约 100 个），我们采用了 RegEx 流程来解析、验证和插入数据库。这是通过一个单独的 C# 应用程序完成的，该应用程序计划每隔几分钟运行一次，并连接到客户端各种提供商 FTP、AS2、EBMX 通信和下载数据以及上传任何出站 EDI 消息。

然后，我们开发了一个网络前端，允许客户员工通过各种收入报告完全访问数据，控制数据以及允许一些客户代理登录并与数据交互并启动发票交易也。

客户现在希望为他们的业务的另一条途径完成更多的 EDI 工作，然而，这一次 edi 消息事务将跃升至 1000 多个。我们的开发团队关注的是 RegEx 的使用。我最近读到，使用 RegEx 进行 EDI 解析会产生巨大的开销，应该避免。

我们最初采用它的唯一原因是缺乏经验，不知道什么是最好用的。也就是说，RegEx 使管理 edi 消息模板变得轻而易举，包括模板内的验证。客户在他们的书籍中添加了更多提供者，我们能够在几分钟内添加新的消息模板（带有自定义更改）。

经过最近的更多研究，我们发现大多数解决方案都将 EDI 文件解析为 XML。是否有一个原因？这只是为了采用更常见的格式和/或避免数据库访问吗？仅通过平面文件 EDI 消息解析 XML 是否更快？

我们希望 EDI 文件中的数据元素在数据库中吗？我们是否只解析 XML 文件？这不只是另一个可以避免的处理步骤吗？

我为我的问题的一般性质道歉，但我很难找到答案。

非常感谢您的时间。

注意：我们的开发团队仅使用 Microsoft 产品，因此请在提供反馈时考虑到这一点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T02:19:02.147

大约 3 年前，我还创建了一个 x12 解析器，它将 x12 edi 解析为 xml。[它目前在http://x12parser.codeplex.com](http://x12parser.codeplex.com)上以开源形式提供. 我这样做的原因是我希望解析部分不关心目标，无论是数据库还是平面文件。事实证明这很有价值，因为一些用户使用 Oracle 而不是 Sql Server，并且许多用户将其扁平化为平面文件以加载到他们的数据库或发送到某些下游进程。我认为这使得解析器本身对于许多环境都非常灵活。我喜欢 XML 的另一个原因是，我能够添加其他注释，这些注释对于没有记住所有 EDI 代码的任何人（基本上每个人）都很有价值，并且我能够将其转换为 HTML（请参阅站点以获取示例）与这些注释。我还内置了将您的对象拆分为单个消息的能力，以便您的后期处理一次可以使用一个对象。很多用户帮我优化了它，让它可以处理大文件，所以它变得相当稳定。我现在正在对其进行一些维护，以便它支持所有 4010 事务。关于解析到数据库的部分我留给用户，因为每个人似乎都对他们如何设计数据表非常挑剔（例如，对于是否使用整数或 GUID 作为表标识，我无法与同事达成一致，倾向于 DBA 心态的人更喜欢 int，使用大量 ORM 的人更喜欢 GUID）。

在我发布这篇文章后不久，我确实添加了数据库支持，因此您可以跳过 XML 并将其直接转到 Sql Server 数据库。您可以决定将多少段类型解析到单个表中，这样您就不会因为 300 个表而使您的数据库膨胀，而您可能只会使用 10 个或 20 个表。这里有一个讨论[SQL Server as Staging Environment](http://x12parser.codeplex.com/wikipage?title=SQL%20Server%20as%20a%20Staging%20Environment)关于优点和使用 xml 或 sql server 作为最终系统的中介的缺点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T15:19:21.460

我怀疑大多数选择编写自己的解决方案的开发人员都编写了自己的用于 EDI 到 XML 转换的类，因为他们的端点集成支持 XML（或者他们不能直接写入数据库，或者想使用 XSLT 向最终用户展示数据很好）。我已经编写了“翻译”成 CSV 和平面文件格式的解析器，因为这是我们需要导入的。我还编写了解析器以直接转储到数据库中。对于某些“中间件”方法来说，解析成 XML 通常是一个必要的步骤。如果你不需要做中间步骤，那你为什么要做呢？如果您可以将其写入数据库，请务必这样做。你也没有提到你在做什么文件，我假设你已经在你的应用程序中建立了 FA 流程。

话虽如此，我通常的免责声明适用。你在这里重新发明轮子。以英里为单位。我理解您客户的愿望，很高兴您能够满足需求。坦率地说，我可能会解雇客户 :) 因为您只使用 Microsoft 产品，所以您有点自闭了。环顾四周，BizTalk 比其他软件包讨论得更多。这可能是有原因的，正如您发现的那样，它也非常昂贵。我是 Liaison Delta 的忠实粉丝 - 在 Windows 上运行，在其核心使用 Microsoft 基础类，并允许您以 BizTalk 成本的一小部分进行任意翻译。在我看来，维护拖放“地图”比维护数千行代码更容易，但是，政策就是政策 :) 希望这会有所帮助。

# php - 日期和总价之间的多维数组

> ID：15291333
> 
> 赞同：0
> 
> 时间：2013-03-08T10:03:36.290
> 
> 标签：php, arrays, date, multidimensional-array, date-range

我正在尝试制作 PHP 数组，这是我的示例。

每个数组的第一行是唯一的记录号“[767962]”

在该阵列酒店房间 id 第一行之后。
第二是酒店名称
第三和第四是第一个价格范围
第五是价格

```
Array 

( 

    [767962] => Array /// --secial id for price record--//

    ( 

        [0] => 42923 /// --hotelroomid--//

        [1] => Crystal Hotels Kemer Deluxe Resort /// --Hotel Name--//

        [2] => 2013-04-01 /// --Start date--//

        [3] => 2013-05-16 /// --End Date--//

        [4] => 179 /// --Price --//

    ) 

    [767964] => Array 

    ( 

        [0] => 42923 

        [1] => Crystal Hotels Kemer Deluxe Resort 

        [2] => 2013-05-17 

        [3] => 2013-05-26 

        [4] => 239 

    ) 

    [767980] => Array 

    ( 

        [0] => 42940 

        [1] => Rixos Deluxe Resort 

        [2] => 2013-03-02 

        [3] => 2013-05-26 

        [4] => 340 

    ) 

) 
```

这是预期的输出。

我想知道那个酒店房间之间的总价 2013-05-14 - 2013-05-21

```
1 , 42923 , Crystal Hotels Kemer Deluxe Resort , 2013-05-14 , 2013-05-21 , 1553

2 , 42940 , Rixos Deluxe Resort                , 2013-05-14 , 2013-05-21 , 2380 
```

例如 1553 是 2013-05-14 - 2013-05-21 日期之间的总价格。
2013-05-14 - 179
2013-05-15 - 179
2013-05-16 - 239
2013-05-17 - 239
2013-05-18 - 239
2013-05-19 - 239
2013-05-20 - 239
2013 -05-21 - 239

总计 1553

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:53:43.367

兄弟，我在我的应用程序中做了这种工作，我认为这对你有很大帮助，但如果出现问题，请告诉我，我会改变......

例如，请参阅此链接以获取[演示](http://eval.in/12214)；

```
$room_id = 42923;
$start_date = "2013-05-10 00:00:00";
$end_date = "2013-05-21 00:00:00"; 
```

查找上述两个日期之间的日期

```
 $day = 86400; // Day in seconds  
        $format = 'Y-m-d'; // Output format (see PHP date funciton)  
        $sTime = strtotime($start_date); // Start as time  
        $eTime = strtotime($end_date); // End as time  
        $numDays = round(($eTime - $sTime) / $day) + 1;  
        $days = array();  

        for ($d = 0; $d < $numDays; $d++) {  
            $days[] = date($format, ($sTime + ($d * $day)));  
        } 
```

现在对于每个日期，您需要检查它落在哪个数组中

```
foreach($days as $key => $d)
{
    foreach($data as $key1 => $dat)
    {
        if($dat[0] == $room_id) {
            if($d >=  $dat[2] && $d<= $dat[3]) {
                $amount += $dat[4];
            }
        }
    }
}
echo $amount; 
```

# c# - 使用 ionic.zip 创建一个 zip 文件

> ID：15291337
> 
> 赞同：17
> 
> 时间：2013-03-08T10:03:40.943
> 
> 标签：c#, zipfile, ionic-zip

我设置了以下代码来创建一组文档的 zip 文件：

```
 public bool CreateDocumentationZipFile(int documentIdentifier, string zipDestinationPath, IList<string> documentPaths)        
    {
        bool zipped = false;

        if (documentPaths.Count > 0)
        {
            using (ZipFile loanZip = new ZipFile())
            {
                loanZip.AddFiles(documentPaths, false, zipDestinationPath);
                loanZip.Save(string.Format("{0}{1}.zip",zipDestinationPath, documentIdentifier.ToString()));
                zipped = true;
            }
        }

        return zipped;
    } 
```

我遇到的问题是，当创建 zip 文件时，文件夹结构在 zip 文件中维护：

例如

我正在创建一个选择的文件的 zip，位于

> C:\SoftwareDevelopment\Branches\ScannedDocuments\

打开创建的 zip 文件时，zip 内有一个文件夹结构，如下所示：

文件夹 1（“软件开发”）

文件夹 1 内是文件夹 2（“分支”）

文件夹 2 内是文件夹 3（“ScannedDocuments”）

扫描的文档文件夹然后包含实际的扫描文件。

谁能告诉我如何在不维护文件夹路径的情况下将扫描文件放在 zip 中？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-08T10:14:53.667

[文档](https://documentation.help/DotNetZip/ee0b15f2-2aaa-af65-7d25-586a7f8c0cc8.htm)指出第三个参数

> **directoryPathInArchive (String)**
> *指定用于覆盖文件名中任何路径的目录路径。此路径可能对应于当前文件系统中的真实目录，也可能不对应。如果稍后解压缩 zip 中的文件，则这是用于解压缩文件的路径。传递 null（在 VB 中为 Nothing）将使用每个文件名上的路径（如果有）。传递空字符串 ("") 将在存档的根路径中插入项目。*

因此，如果您总是希望将文件添加到 zip 存档的根目录，请更改

```
loanZip.AddFiles(documentPaths, false, zipDestinationPath); 
```

到

```
loanZip.AddFiles(documentPaths, false, ""); 
```

# templates - 使用自定义 UI 编辑器时不显示自定义选项卡

> ID：15291338
> 
> 赞同：1
> 
> 时间：2013-03-08T10:03:43.127
> 
> 标签：templates, customization, word-2007

我有一些按钮希望添加到 Word 2007 中的自定义选项卡（添加到`normal.dotm`模板，使用自定义 UI 编辑器），以完成我编写的一些操作，但我无法显示选项卡。

我已经多次在单个项目中使用过这种方法，并且效果很好，但是添加以下`normal.dotm`内容不起作用。

代码验证正常，所以我认为没有任何错误。有谁知道为什么这不起作用？谢谢。

```
<customUI xmlns="http://schemas.microsoft.com/office/2006/01/customui">
    <ribbon startFromScratch="false">
        <tabs>
            <tab id="tabCustomActions" label="Custom Actions">
                <group id="groupTLA" label="TLA">
                    <button id="startTLA" label="Format for TLA" imageMso="startTLA" size="large" onAction="on_action" />
                </group>
            </tab>
        </tabs>
    </ribbon>
</customUI> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T01:37:39.090

我在一个空的 .docm 文件上尝试了它，它对我有用，虽然图像没有显示，但我猜它是一个自定义图标？

我使用 Word 2007 运行它。

很奇怪，因为我整天都在尝试将功能区插入 Excel 中，但它没有工作，但我上周使用相同的过程多次做了不同的自定义功能区。

我建议查找最新的自定义 UI 编辑器，日期为 2010 年 8 月。版本号没有改变，但肯定是更新的。

这个版本是 2010 年 8 月的版本，虽然有些评论说它不适用于 2007 年，但我相信如果操作正确，它会起作用。

# string - 用于读取文件并用新字符串替换字符串的批处理文件

> ID：15291341
> 
> 赞同：2
> 
> 时间：2013-03-08T10:03:52.493
> 
> 标签：string, batch-file, replace

我想创建一个批处理文件来循环读取文件的每一行并用另一个字符串替换一个字符串。以下是我的代码片段：

```
for /F "tokens=*" %%i in (myfile) do (
  set str=%%i
  set str=%str: %oldstring% = %newstring%%
echo %str% >> newfile
) 
```

这会产生一个带有“Echo is off”的新文件，其行数与 myfile 中的行数一样多。似乎 str 变量在分配给 %%i 时根本没有任何值。有人能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T10:31:00.617

试试这个小脚本：

```
@echo off
set val=50
echo %val%
for /l %%i in (1,1,1) do (
    set val=%%i
    echo %val%
)
echo %val%
pause>nul 
```

输出是：

```
50
50
1 
```

不是你所期望的，对吧？

这是因为在`for`循环中，变量在循环完成之前不会更新。为了解决这个问题，您可以使用`setlocal enabledelayedexpansion`，并将百分号 ( `%`) 替换为感叹号 ( `!`)：

```
@echo off
setlocal enabledelayedexpansion
set val=50
echo %val%
for /l %%i in (1,1,1,) do (
    set val=%%i
    echo !val!
)
echo %val%
pause>nul 
```

输出：

```
50
1
1 
```

`str`变量没有值的原因（在`for`循环期间）是因为它没有事先设置。

因此，通过这些快速修改，您的脚本将工作......

```
setlocal enabledelayedexpansion
for /f "tokens=*" %%i in (myfile) do (
    set str=%%i
    set str=!str: %oldstring% = %newstring%!
    echo !str! >> newfile
) 
```

顺便说一句，这个片段假设`oldstring`并且`newstring`不会在 forloop 中设置，否则事情会变得一团糟。

玩得开心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-28T14:08:16.000

```
setlocal ENABLEDELAYEDEXPANSION
set filein="c:\program files\test1.txt"
set fileout="c:\program files\test2.txt"
set old=@VERSION@
set new=2.0.3
for /f "tokens=* delims=¶" %%i in ( '"type %filein%"') do (
    set str=%%i
    set str=!str:%old%=%new%!
    echo !str! >> %fileout% 
) 
```

工作完美，并没有在行文件的开头删除空格

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-11T14:34:33.860

花了一些时间在这我得到了正确的方法：

```
@echo off
setlocal enabledelayedexpansion

set oldstring=AF-07295
set /a count=1000

for %%f in (*.*) do (
  set /a count=!count!+1
  for /f "tokens=*" %%i in (%%f) do (
    set str=%%i

    call set str=%%str:!oldstring!=!count!%%
    echo !str! >> %%~nf.ordnew

  )
)

endlocal 
```

# windows - 使用 nmake.exe windows 在 makefile 中无法识别 addprefix 命令

> ID：15291343
> 
> 赞同：5
> 
> 时间：2013-03-08T10:03:58.990
> 
> 标签：windows, makefile, gnu-make, nmake

```
all: prd.exe

CC=cl
CFLAGS=-O2 -I../src -I. /W4
LDFLAGS = /Zi
LIBSRC = $(addprefix ../lib/, \
        open.c malloc.c \
     ) \
     $(addprefix ../src/, \
        main.c \
      ) \
      helper.c

LIBOBJS = $(LIBSRC:.c=.o)

prd.exe: ../src/main.obj
$(CC) $(LDFLAGS) -Fe$@ *.o

../src/main.obj: ../src/main.c
$(CC) $(CFLAGS) $(LIBOBJS) -c $< -Fo $@ 

.c.o:
$(CC) $(CFLAGS) $(LIBOBJS) -c $< -Fo $@ 

.c.i:
$(CC) $(CFLAGS) $(LIBOBJS) -C -E $< > $@

clean:
del /s /f /q ..\lib\*.o ..\src\*.o *.o *.exe *.pdb

distclean: clean 
```

我收到这个错误

致命错误 U1000：语法错误：第 6 行的宏调用中缺少')'

我在这里错过了什么吗？nmake 确实识别 addprefix，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T10:34:06.353

不，`addprefix`是 GNU make 扩展。您有一个需要 GNU make (gmake) 来处理的 GNUmakefile。

或者，您可以重写 GNU makefile 以不使用 GNU 扩展。在您的情况下，这应该很容易：

```
LIBSRC = $(addprefix ../lib/, \
        open.c malloc.c \
     ) \
     $(addprefix ../src/, \
        main.c \
      ) \
      helper.c 
```

变成

```
LIBSRC = ../lib/open.c ../lib/malloc.c ../src/main.c helper.c 
```

# ios - 重绘UILabel

> ID：15291344
> 
> 赞同：0
> 
> 时间：2013-03-08T10:04:01.067
> 
> 标签：ios, objective-c, xcode

**更新：**由于我无法解决这个问题，我做了一个丑陋的解决方法（添加了另一个标签）。

我目前正在尝试在以下步骤中设置 UILabel 的位置：

1) 更新标签文本

```
lblFirstWheelDescription.text = @"Select the tooth shade"; 
```

2) 为 UILabel 设置新位置

```
CGRect newframe = lblFirstWheelDescription.frame;
newframe.origin.y += 100;
lblFirstWheelDescription.frame = newframe; 
```

现在让我感到困惑的是什么。第一次调用该方法时，什么都没有发生（UILabel 不会像之前设置的那样移动）。在第二次调用（相同的方法）时，lblFirstWheelDescription.frame 的初始 y 值没有增加 100。在第二次调用时再次设置 y 值后，标签移动并且 y 值增加。

我试图强制重新绘制如下 - 不会改变任何东西：

```
[self.superview setNeedsLayout]; 
```

有人知道这种行为或知道这里有什么问题吗？

伊卡威斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:53:35.303

我过去注意到更改 CGRect 的属性不会使 UI 元素更新：

```
UILabel *label = [UILabel alloc] initWithFrame:CGRectMake(0,0,100,20)];
label.frame.size.width += 100; // does nothing 
```

为了使其正常工作，您需要创建一个新的 CGRect 并将其分配给 frame 属性，而不是尝试修改现有 frame 对象的值（这是您的原始代码正在执行的操作）。

```
label.frame = CGRectMake(0, 0, 200, 20); 
```

如果您喜欢轻松地使用 [UIView animateWithDuration:animations]，则可以动画此更改，从 CGRect 实例 1 到 CGRect 实例 2...您不能只修改现有框架的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:09:43.957

也许您假设您的函数正在被调用，而实际上它不是？尝试添加一条日志语句`NSLog("TESTING");`以查看您的函数被调用的时间和次数。

另外，调用这个函数是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:10:33.047

您必须重新绘制标签。当 viewcontroller 重绘其视图时 viewwillappear 调用。您必须强制在视图上重绘标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-11T18:00:16.240

您可以根据需要更新标签，但您必须在此循环中重绘要从此[链接显示的标签](https://stackoverflow.com/questions/11884786/how-to-update-uilabel-programmatically-in-ios)

检查 Mert 答案

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-02T03:43:52.680

您需要从视图控制器调用 setNeedsDisplay

```
[ViewController.view setNeedsDisplay]; 
```

这将迫使您的视图及其子视图更新/重绘

# java - 我怎样才能简化这个表达式

> ID：15291345
> 
> 赞同：-5
> 
> 时间：2013-03-08T10:04:09.457
> 
> 标签：java, boolean-expression

```
if (this.skills[i].isBasic() == true) 
```

如何简化这个表达式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T10:05:30.703

```
if(skills[i].isBasic()) {} 
```

这是最简单的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T10:05:11.810

```
if (this.skills[i].isBasic() ) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-08T10:05:44.397

明显地`if(skills[i].isBasic())`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-08T10:06:48.060

```
if(this.skills[i].isBasic()) 
```

这只是字符较少的替代方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T10:05:34.057

如果 this.skills[i].isBasic() 返回布尔值，你可以

```
 if (skills[i].isBasic()) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T10:05:58.627

```
bool isBasic = this.skills[i].isBasic();
if(isBasic){
//Do something
} 
```

# javascript - 如何使用 ASP.Net 中的 PageMethods 将多维数组从 Javascript 传递到服务器

> ID：15291347
> 
> 赞同：2
> 
> 时间：2013-03-08T10:04:19.903
> 
> 标签：javascript, jquery, asp.net, webmethod, pagemethods

`<li>`我的 HTML 页面中有一些这样的项目

```
<li id="A1" class="ui-state-default">Item 2</li>
  <li id="A2" class="ui-state-default">Item 3</li>
  <li id="A3" class="ui-state-default">Item 4</li>
  <li id="A4" class="ui-state-default">Item 5</li> 
```

我像这样使用Javascript和Jquery调用它来获取`<li>`元素的Id和Index

```
function LiOrder() {
            var order = $('li').map(function (i) {
                return { id: this.id, index: i };
            }).get();

            PageMethods.GetServerResponse(order, OnSuccess, OnFail);
        }

        function OnSuccess(arg) {
            alert(arg);
        } 
```

WebMethod 写在 Aspx.cs 页面是这个

```
[WebMethod]
    public static string GetServerResponse(string[,] LiOrder)
    {

        return LiOrder[0,0];
    } 
```

但是当我尝试执行它时，我在 Google Chrome（Javascript 控制台）中得到了这样的错误

```
POST http://localhost:2453/ERP29.1.13/Production/LifeCycleRegistration.aspx/GetServerResponse 500 (Internal Server Error) ScriptResource.axd:6979 
```

这个错误的原因可能是什么。我可以像这样将字符串传递给 WebMethod。但是当涉及到 Array 时，它是这样的。请帮我解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:26:03.647

JSON.stringfy 解决了我的问题。我像这样更改了我的代码

```
var LiArr=JSON.stringify(order);
            PageMethods.GetServerResponse(LiArr, OnSuccess, OnFail); 
```

# git - 如何将一个 git 存储库添加到另一个 git 存储库的子文件夹中？

> ID：15291348
> 
> 赞同：7
> 
> 时间：2013-03-08T10:04:25.133
> 
> 标签：git

**我在一个名为AA**的文件夹中有一个 GIT 存储库，我有第二个名为**BB**的 GIT 存储库。

我想将**AA**存储库作为子文件夹导入**BB存储库。**

前：

```
AA
 |- .git
 |-  A/
 |-  fileA

BB
 |- .git
 |-  B/
 |-  fileB 
```

后：

```
BB
 |- .git # new .git with both AA and BB .git infos
 |-  B/
 |-  fileB
 |-  AA/      # <== no .git anymore
 |-  AA/A/
 |-  AA/fileA 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T10:22:53.727

如果文件夹结构不同，则`git mv`可以解决：

1.  克隆原始存储库，
2.  `git mv`所有东西到一个新的 subdir `AA`。
3.  [然后将其用作源存储库，并使用此问题](https://stackoverflow.com/q/1683531/923794)的[此答案](https://stackoverflow.com/a/8396318/923794)进行克隆。

# javascript - 在 Windows 8 (Js/html) APP 中显示特定数量的项目

> ID：15291350
> 
> 赞同：3
> 
> 时间：2013-03-08T10:04:35.810
> 
> 标签：javascript, html, windows, windows-8, grid

我目前正在构建一个 Windows 8 Html/js 应用程序，并从 gridview 模板开始，因为这让我节省了大量时间来设计大多数应用程序。

我已经成功地将 Windows 8 分屏教程 ( [http://msdn.microsoft.com/en-us/library/windows/apps/hh974582.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh974582.aspx) ) 改编为我正在构建的应用程序。在这个应用程序中，我正在从 rss 提要中读取数据，就像在教程中一样。但在我的例子中，我得到了 60 多个项目。这很好，但我不想在我的主页上显示所有 60 个项目......我确实希望所有这些项目都显示在 groupDetails 页面中。

我现在所做的如下：在我的主屏幕中，我只想显示 12 个项目，所以在我的 data.js 文件中，在浏览所有帖子时，我正在检查这个，如果它是前 12 个中的一个，它'会得到一个参考'show'，否则这是'hide'。像这样：

```
 for (var i = 0; i < posts.length ; i++) {
        var post = posts[i];
        //get the title
        var postTitle = post.querySelector("title").textContent;
        //get the content
        var staticContent = toStaticHTML(post.querySelector("content,encoded").textContent);
        var ref = "show";
        if (i > 11) {
            ref = "hide";
        }
        //store the post info we care about
        cPosts.push({
            group: feed,
            backgroundImage: "http://www.thesedays.com/wp-content/uploads/2013/01/LTT_220_11.jpg",
            key: feed.key,
            ref: ref,
            title: postTitle,
            content: staticContent,
            description: feed.description
        });
    } 
```

现在我不熟悉 datapromises，但我可以用 .hide() 简单地隐藏这些元素（我将 jQuery 库添加到我的项目中），但我不确定何时加载所有项目......

有人可以帮我解决这个问题吗？您可以在此处查看完整的 data.js 文件[http://msdn.microsoft.com/en-us/library/windows/apps/jj663506.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/jj663506.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:03:06.383

如果我有足够的声誉来发表评论，我会留下评论，因为您似乎已经有了一个可行的解决方案。但我只想提一个替代方案。您可以使用绑定列表的[过滤投影](http://msdn.microsoft.com/en-us/library/windows/apps/hh700741.aspx)，因为您已经在修改数据以标记要显示的元素。代码可能如下所示：

```
cPosts.createFiltered(function (item) {
    return item.ref === 'show';
}); 
```

# php - 是否不可能动态创建安全托管的 PayPal 按钮？

> ID：15291354
> 
> 赞同：0
> 
> 时间：2013-03-08T10:04:57.770
> 
> 标签：php, security, paypal

我知道如何在 PayPal 上创建托管按钮，而且我知道这是安全的，我可以将它与我的购物车集成以使其工作。

但我需要动态创建一个托管的安全按钮 PayPal，因为我需要动态更新此按钮的价格。

基本上我只想要托管安全按钮的动态版本，而无需亲自添加任何加密或 IPN 或您拥有的东西。这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T13:54:17.947

这不会是一个问题。您可以使用 BMCreateButton API 即时创建动态托管按钮。[您可以在此处](https://www.x.com/developers/paypal/documentation-tools/api/bmcreatebutton-api-operation-nvp)找到更多相关信息，也可以在[此处](https://www.x.com/sites/default/files/pp_wpsbuttonmgrapinvp.pdf)查看开发人员指南。

# spring - 通过 URL 进行 Spring Security 身份验证

> ID：15291357
> 
> 赞同：3
> 
> 时间：2013-03-08T10:05:03.527
> 
> 标签：spring, spring-mvc, spring-security

我有一个 Spring MVC 应用程序，它使用 Spring Security 和基于表单的登录进行授权/身份验证。

现在我想添加一个特殊的 URL，其中包含一个无需其他信息即可访问的令牌，因为该令牌对用户来说是唯一的：

[http://myserver.com/special/5f6be0c0-87d7-11e2-9e96-0800200c9a66/text.pdf](http://myserver.com/special/5f6be0c0-87d7-11e2-9e96-0800200c9a66/text.pdf)

如何配置 Spring Security 以使用该令牌进行用户身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:43:31.680

您可以提供自定义 PreAuthenticatedProcessingFilter 和 PreAuthenticatedAuthenticationProvider。有关详细信息，请参阅[预身份验证方案](https://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#preauth)一章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-13T08:15:48.273

您需要定义您的自定义预授权过滤器。

在`http`标签内的安全应用上下文中：

```
<custom-filter position="PRE_AUTH_FILTER" ref="preAuthTokenFilter" /> 
```

然后定义您的过滤器bean（及其适当的属性）：

```
<beans:bean class="com.yourcompany.PreAuthTokenFilter"
      id="preAuthTokenFilter">
    <beans:property name="authenticationDetailsSource" ref="authenticationDetailsSource" />
    <beans:property name="authenticationManager" ref="authenticationManager" />
    <beans:property name="authenticationEntryPoint" ref="authenticationEntryPoint"/>
</beans:bean> 
```

创建从 GenericFilterBean 扩展的自定义过滤器

```
public class PreAuthTokenFilter extends GenericFilterBean {

private AuthenticationEntryPoint authenticationEntryPoint;
private AuthenticationManager authenticationManager;
private AuthenticationDetailsSource authenticationDetailsSource = new WebAuthenticationDetailsSource();

@Override
public void doFilter(ServletRequest req, ServletResponse resp,
                     FilterChain chain) throws IOException, ServletException {
    HttpServletRequest request = (HttpServletRequest) req;
    HttpServletResponse response = (HttpServletResponse) resp;

    String token = getTokenFromHeader(request);//your method

    if (StringUtils.isNotEmpty(token)) {
        /* get user entity from DB by token, retrieve its username and password*/

        if (isUserTokenValid(/* some args */)) {
            try {
                UsernamePasswordAuthenticationToken authRequest = new UsernamePasswordAuthenticationToken(username, password);
                authRequest.setDetails(this.authenticationDetailsSource.buildDetails(request));
                Authentication authResult = this.authenticationManager.authenticate(authRequest);
                SecurityContextHolder.getContext().setAuthentication(authResult);
            } catch (AuthenticationException e) {
            }
        }
    }

    chain.doFilter(request, response);
}

/*
other methods
*/ 
```

If you don't want or cannot retrieve a password, you need to create your own `AbstractAuthenticationToken` which will receive only username as param (principal) and use it instead of `UsernamePasswordAuthenticationToken`:

```
public class PreAuthToken extends AbstractAuthenticationToken {

    private final Object principal;

    public PreAuthToken(Object principal) {
        super(null);
        super.setAuthenticated(true);
        this.principal = principal;
    }

    @Override
    public Object getCredentials() {
        return "";
    }

    @Override
    public Object getPrincipal() {
        return principal;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T16:07:20.180

我遇到了这个问题，并使用 Spring Security RembereMe Service 基础架构的自定义实现解决了它。这是您需要做的。

*   定义自己的 Authentication 对象

    公共类 LinkAuthentication 扩展 AbstractAuthenticationToken { @Override public Object getCredentials() { return null; }

    ```
    @Override
    public Object getPrincipal()
    {

        return the prncipal that that is passed in via the constructor 
    } 
    ```

    }

定义

```
public class LinkRememberMeService implements RememberMeServices, LogoutHandler
{    
    /**
     * It might appear that once this method is called and returns an authentication object, that authentication should be finished and the
     * request should proceed. However, spring security does not work that way.
     * 
     * Once this method returns a non null authentication object, spring security still wants to run it through its authentication provider
     * which, is totally brain dead on the part of Spring this, is why there is also a
     * LinkAuthenticationProvider
     * 
     */
    @Override
    public Authentication autoLogin(HttpServletRequest request, HttpServletResponse response)
    {
        String accessUrl = ServletUtils.getApplicationUrl(request, "/special/");
        String requestUrl = request.getRequestURL().toString();
        if (requestUrl.startsWith(accessUrl))
        {
            // take appart the url extract the token, find the user details object 
                    // and return it. 
            LinkAuthentication linkAuthentication = new LinkAuthentication(userDetailsInstance);
            return linkAuthentication;
        } else
        {
            return null;
        }
    }

    @Override
    public void loginFail(HttpServletRequest request, HttpServletResponse response)
    {
    }

    @Override
    public void loginSuccess(HttpServletRequest request, HttpServletResponse response, Authentication successfulAuthentication)
    {
    }

    @Override
    public void logout(HttpServletRequest request, HttpServletResponse response, Authentication authentication)
    {
    }
}

public class LinkAuthenticationProvider implements AuthenticationProvider
{

    @Override
    public Authentication authenticate(Authentication authentication) throws AuthenticationException
    {
        // Spring Security is totally brain dead and over engineered
        return authentication;
    }

    @Override
    public boolean supports(Class<?> authentication)
    {
        return LinkAuthentication.class.isAssignableFrom(authentication);
    }

} 
```

破解其余的 spring security xml 以定义自定义身份验证提供程序和自定义记住我服务。

PS，如果您在 URL 中对 GUID 进行 base64 编码，它将缩短几个字符。您可以使用 Apache commons codec base64 二进制编码器/解码器来做更安全的 url 链接。

```
public static String toBase64Url(UUID uuid)
{
    return Base64.encodeBase64URLSafeString(toBytes(uuid));
} 
```

# java - 如何在已排序的数组上使用二进制搜索来查找特定范围内的整数个数。（有重复）

> ID：15291363
> 
> 赞同：3
> 
> 时间：2013-03-08T10:05:21.717
> 
> 标签：java, search, binary-search

假设您有一个排序的整数数组：

```
{3,4,4,6,10,15,15,19,23,23,24,30} 
```

并且你想找到 4 到 23 范围内的整数个数。

```
{4,4,6,10,15,15,19,23,23} 
```

因此结果将是 9。

我编写了一个二进制搜索实现，但我不确定如何修改它以同时考虑到可以有多个整数与范围的上限匹配。

我想在方法签名中添加一个布尔值来询问是否查找密钥的上限，但我不确定是否可以在保持 O(log(N)) 复杂性的同时在单个方法中完成。

或者是否有其他方法可以在 O(log(N)) 时间内找到排序数组中该范围内的项目数？

这是我到目前为止所拥有的：

```
int start = rangeBinarySearch(arr, 4, false);
int end = rangeBinarySearch(arr, 23, true); // true would indicate that I want the position of the last occurrence of the key.

int totalInRange = (Math.abs(end) - Math.abs(start) -1)

private static int rangeBinarySearch(int[] items, int key, boolean lastIndex) {
    if(items == null)
        throw new IllegalArgumentException();

    int start = 0;
    int end = items.length - 1;

    while(start <= end) {
        int mIndex = (start + end) / 2;
        int middle = items[mIndex];

        if(middle < key)
            start = (mIndex +1);
        else if(middle > key)
            end = (mIndex -1);
        else
            return mIndex; // Possible something here to find the upper bounds?
    }

    return -(start +1);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-20T12:26:33.350

范围二分查找的下限和上限是**不同**的。这里**不同**意味着他们有不同的停止标准和返回步骤。

1.  **对于下界（左范围）**，您可以调用以下函数来获取排序数组中值大于或等于它的索引，否则为-1。

    ```
    int binarySearchForLeftRange(int a[], int length, int left_range)
    {
        if (a[length-1] < left_range)
            return -1;

        int low = 0;
        int high = length-1;

        while (low<=high)
        {
            int mid = low+((high-low)/2);

            if(a[mid] >= left_range)
                high = mid-1;
            else //if(a[mid]<i)
                low = mid+1;
        }

        return high+1;
    } 
    ```

2.  **对于上界（右范围）**，您可以调用以下函数来获取排序数组中值小于或等于它的索引，否则为-1。

    ```
    int binarySearchForRightRange(int a[], int length, int right_range)
    {
        if (a[0] > right_range)
            return -1;

        int low = 0;
        int high = length-1;

        while (low<=high)
        {
            int mid = low+((high-low)/2);

            if(a[mid] > right_range)
                high = mid-1;
            else //if(a[mid]<i)
                low = mid+1;
        }

        return low-1;
    } 
    ```

3.  **最后**，如果你想得到这个范围内有多少个元素，根据上面这两个函数的返回值很容易。

    ```
    int index_left = binarySearchForLeftRange(a, length, left_range);
    int index_right = binarySearchForRightRange(a, length, right_range);

    if (index_left==-1 || index_right==-1 || index_left>index_right)
        count = 0;
    else
        count = index_right-index_left+1; 
    ```

* * *

**测试**：（有重复）

```
 int a[] = {3,4,4,6,10,15,15,19,23,23,24,30};
    int length = sizeof(arr)/sizeof(arr[0]);

    int left_range = 4;
    int right_range = 23;
    int index_left = binarySearchForLeftRange(a, length, left_range); // will be 1
    int index_right = binarySearchForRightRange(a, length, right_range); // will be 9

    int count; // will be 9
    if (index_left==-1 || index_right==-1 || index_left>index_right)
        count = 0;
    else
        count = index_right-index_left+1; 
```

* * *

**编辑**：当然，您可以通过传递一个额外的标志来将前两个函数合并为一个，以将其指示为下限或上限，但如果不是，它会更清楚。你的选择！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T05:03:50.367

您需要执行两次二进制搜索以找到 rangeLow 之前的最低索引和 rangeHigh 之后的最高索引，这样您就可以计算范围内的重复项。

当我们执行两次二进制搜索时，这将给出 o(2 log n) 的时间复杂度。

```
private int searchArrayForNumbersInRange(int[] arr, int start, int end) {
    int leftIndex = searchLeft(arr, start);
    int rightIndex = searchRight(arr, end);
    int count;

    if (leftIndex < 0 || rightIndex < 0)
        return -1;
    if (rightIndex == leftIndex)
        count = 1;
    else {
        count = rightIndex - leftIndex;
    }
    return count;
}

private int searchLeft(int[] arr, int start) {
    int lo = 0;
    int hi = arr.length - 1;

    while (lo <= hi) {
        int mid = lo + (hi - lo) / 2;

        if (arr[mid] == start && arr[mid -1] < start) {
            return mid - 1;
        }

        if (arr[mid] >= start)
            hi = mid - 1;
        else
            lo = mid + 1;
    }

    return -1;
}

private int searchRight(int[] arr, int end) {
    int lo = 0;
    int hi = arr.length -1;

    while (lo <= hi) {
        int mid = lo + (hi - lo) / 2;

        if (arr[mid] == end && arr[mid+1] > end)
            return mid;

        if (mid <= end)
            lo = mid + 1;
        else
            hi = mid - 1;
    }

    return -1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:13:08.640

如果您不学习算法，请改用标准函数：

```
 Arrays.binarySearch 
```

您基本上需要第一个元素（4）的第一个出现和最后一个（23）的最后出现和减法。但是不需要 (4) 存在，因此请阅读 Arrays.binarySearch 的文档，它会告诉您 (4) 的位置。

如果您期望有很多 (4) 个，则必须编写自己的 binSearch，它会返回第一个和最后一个索引：

如果有前一次查看 i/2，则在索引 i 处找到第一次出现，如果有（4）查看 i/4，否则查看 3*i/4 ...

# saxon - 使用 Saxon-B 还是购买 Saxon-PE/EE？

> ID：15291366
> 
> 赞同：2
> 
> 时间：2013-03-08T10:05:32.667
> 
> 标签：saxon

我们发现了 Saxon-HE（[见表](http://www.saxonica.com/feature-matrix.html)）在**使用 Reflexion**和**EXSLT 扩展函数**的可扩展性方面的局限性。

我们正在评估为服务器和开发团队成员购买少量许可证，我们没有时间来评估每个工具，考虑到购买和分发许可证也会消耗我们的时间。

显然有一个名为 Saxon-B 的 Saxon 的早期版本，saxonica 不再维护它，但它声称支持**使用反射的可扩展性**，并且根据这个[Q&A](https://stackoverflow.com/questions/5897664/how-do-i-get-exslt-support-in-saxon-he)也支持**EXSLT**。

我的问题是，对于提到的这些功能，我们是否可以坚持使用 Saxon-B（一种开源解决方案），还是应该购买这些许可证？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T15:12:45.873

最后是我自己回复。

在过去的几天里，我们尝试了**Saxon-B ，它完美地满足了我们的需求（在问题中提到）。**到目前为止，我们还没有发现任何次要/主要错误。

感谢 Saxonica 团队保持开源 Saxon-B 版本。

**编辑**：Saxon-B 不再与 Java 8 及更高版本兼容。

# javascript - jQuery 和 Javascript 更改复选框的选中属性？

> ID：15291368
> 
> 赞同：1
> 
> 时间：2013-03-08T10:05:34.100
> 
> 标签：javascript, jquery, jquery-mobile, checkbox

我有一个移动客户端并且有一个简单的问题。

这是我的html部分：

```
<label id="112233" for="checkbox-detailed_limit">Take Profit</label>
<input type="checkbox" name="checkbox-detailed_limit"
id="checkbox-detailed_limit" data-mini="true"/> 
```

当显示容器页面时，我想更改复选框的选中状态。

我已经使用 javascript 和 jquery 进行此操作，但都失败了。

这里有些例子：

```
$("#checkbox-detailed_limit").attr("checked", false).change();
$("#checkbox-detailed_limit").attr("checked", false).trigger("change");
$("#checkbox-detailed_limit").prop("checked", false);
$("#checkbox-detailed_limit").removeAttr("checked");
$('input:checkbox', $("#112233")).prop("checked", false);
$("#112233").filter(':checkbox').prop("checked", false);
$('input').filter(':checkbox').prop('checked',false);
$("#112233").children('input[type="checkbox"]').prop('checked', false);
$("#112233").find("checkbox").attr("checked", false);
document.getElementById("checkbox-detailed_limit").checked = false; 
```

有什么办法可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:13:10.030

这实际上是一个 jquery-mobile 问题，因为这些复选框将得到增强。

```
$("#checkbox-detailed_limit").attr("checked",true).checkboxradio("refresh"); 
```

来源：http: [//jquerymobile.com/demos/1.2.0/docs/forms/checkboxes/methods.html](http://jquerymobile.com/demos/1.2.0/docs/forms/checkboxes/methods.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:08:55.580

我不确定您真正想要什么，但您想将选中状态设置为复选框？那么这可以像这样完成。

```
$("#checkbox-detailed_limit").prop("checked", true); //for jquery 1.7+ 

$("#checkbox-detailed_limit").attr("checked", true); //for jquery < 1.7 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:10:23.177

**要选中复选框：**

```
$("#"+id).attr("checked", "checked"); 
```

**要取消选中该复选框：**

```
$("#"+id).removeAttr("checked"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T10:11:05.083

试试这个，

```
 $("#checkbox-detailed_limit").prop("checked", true);
   $("#checkbox-detailed_limit").prop("checked", false); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T10:12:37.907

```
$('input[name=foo]').attr('checked', !$('input[name=foo]').is(':checked')); 
```

该脚本将切换复选框，并且应该可以正常工作。如果这不起作用，则您的 javascript 代码在其他地方有错误。使用控制台将帮助您找到问题。

# php - Zend_Auth_Adpter_Ldap 到 Active Directory - 配置问题

> ID：15291379
> 
> 赞同：1
> 
> 时间：2013-03-08T10:06:01.067
> 
> 标签：php, zend-framework, active-directory, ldap, zend-auth

我正在尝试弄清楚如何配置`Zend_Auth_Adapter_Ldap`以针对我们的`ActiveDirectory`. 手动验证没有问题，但我无法使用`Zend_Auth_Adapter_Ldap`.

这是最基本的方法。**这行得通！**

```
ldap_set_option($ldapcon, LDAP_OPT_PROTOCOL_VERSION, 3);
ldap_set_option($ldapcon, LDAP_OPT_REFERRALS, 0);

$ldapcon = ldap_connect("ldaps://srv.dom.de", 636);
$bind = ldap_bind($ldapcon, "CN=USERNAME,OU=Benutzer,OU=DOM,DC=dom,DC=de", "PASSWORD"); 
```

这就是我尝试配置`Zend_Auth_Adapter_Ldap`. **这不起作用！**

```
ad.server2.host                = srv.dom.de
ad.server2.port                = 636
ad.server2.bindRequiresDn      = false
ad.server2.baseDn              = "OU=Benutzer,OU=DOM,DC=dom,DC=de"
ad.server2.accountFilterFormat = "CN=%s"
ad.server2.useSsl              = true
ad.server2.useStartTls         = false
;ad.server2.accountDomainName   = "dom.de"
;ad.server2.username            = "CN=TESTUSER"
;ad.server2.password            = "TESTPASS" 
```

我尝试`accountFilterFormat`以一种更像 AD 的方式设置，如下所示，但它没有产生任何不同的结果......

```
ad.server2.accoutnFilterFormat = "(&(objectclass=user)(sAMAccountName=%s)" 
```

当前的 debuf 输出如下：

```
Ldap: 1: host=srv.dom.de,port=636,bindRequiresDn=,
         baseDn=OU=Benutzer,OU=DOM,DC=dom,DC=de,accountFilterFormat=CN=%s,
         useSsl=1,useStartTls=

Ldap: 2: USERNAME authentication failed: 0x31 
         (Invalid credentials; 80090308: LdapErr: DSID-0C090334, 
         comment: AcceptSecurityContext error, data 525, vece): USERNAME 
```

我现在已经尝试了很多东西，试图调试 Zend-Code 本身，但我就是想不通。如果有人对我需要设置哪些选项有更多的了解，我会非常非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:36:47.663

这毕竟只是一个配置问题。仔细阅读文档会产生以下配置：

```
ad.server2.host                   = srv.dom.de
ad.server2.port                   = 636
ad.server2.bindRequiresDn         = false
ad.server2.baseDn                 = "OU=Benutzer,OU=DOM,DC=dom,DC=de"
ad.server2.accountFilterFormat    = "CN=%s"
ad.server2.useSsl                 = true
ad.server2.useStartTls            = false
ad.server2.accountCanonicalForm   = 3
ad.server2.accountDomainNameShort = "dom" 
```

仅此而已。针对 AD 的身份验证是通过 Username: 完成`dom\username`的，因此`accountCanonicalForm`必须将 设置为 3，这是反斜杠样式语法，`accountDomainNameShort`然后定义规范帐户名称的域部分。

曾经理解得很合乎逻辑，但是在没有任何知识的情况下就弄清楚了……好吧，它现在可以工作了:)

# r - tryCatch - 命名空间？

> ID：15291384
> 
> 赞同：4
> 
> 时间：2013-03-08T10:06:33.013
> 
> 标签：r, try-catch, assign

我对 R 很陌生，我对`tryCatch`. 我的目标是对大型数据集进行预测。如果预测无法放入内存，我想通过拆分数据来规避问题。

现在，我的代码大致如下：

```
tryCatch({
  large_vector = predict(model, large_data_frame)
}, error = function(e) { # I ran out of memory
  for (i in seq(from = 1, to = dim(large_data_frame)[1], by = 1000)) {
    small_vector = predict(model, large_data_frame[i:(i+step-1), ])
    save(small_vector, tmpfile)
  }
  rm(large_data_frame) # free memory
  large_vector = NULL
  for (i in seq(from = 1, to = dim(large_data_frame)[1], by = 1000)) {
    load(tmpfile)
    unlink(tmpfile)
    large_vector = c(large_vector, small_vector)
  }
}) 
```

关键是，如果没有发生错误，`large_vector`则按预期填充我的预测。如果发生错误，`large_vector`似乎只存在于错误代码的命名空间中——这是有道理的，因为我将它声明为一个函数。出于同样的原因，我收到一条警告说`large_data_frame`无法删除。

不幸的是，这种行为不是我想要的。我想`large_vector`从我的错误函数中分配变量。我认为一种可能性是指定环境并使用分配。因此，我将在我的错误代码中使用以下语句：

```
rm(large_data_frame, envir = parent.env(environment()))
[...]
assign('large_vector', large_vector, parent.env(environment())) 
```

但是，这个解决方案对我来说似乎很脏。我想知道是否有可能用“干净”的代码来实现我的目标？

[编辑] 似乎有些混乱，因为我把代码放在上面主要是为了说明问题，而不是给出一个工作示例。这是一个显示命名空间问题的最小示例：

```
# Example 1 : large_vector fits into memory
rm(large_vector)
tryCatch({
  large_vector = rep(5, 1000)
}, error = function(e) {
  # do stuff to build the vector
  large_vector = rep(3, 1000)
})
print(large_vector)  # all 5

# Example 2 : pretend large_vector does not fit into memory; solution using parent environment
rm(large_vector)
tryCatch({ 
  stop();  # simulate error
}, error = function(e) {
  # do stuff to build the vector
  large_vector = rep(3, 1000)
  assign('large_vector', large_vector, parent.env(environment()))
})
print(large_vector)  # all 3

# Example 3 : pretend large_vector does not fit into memory; namespace issue
rm(large_vector)
tryCatch({ 
  stop();  # simulate error
}, error = function(e) {
  # do stuff to build the vector
  large_vector = rep(3, 1000)
})
print(large_vector)  # does not exist 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T10:45:52.477

我会做这样的事情：

```
res <- tryCatch({
  large_vector = predict(model, large_data_frame)
}, error = function(e) { # I ran out of memory
  ll <- lapply(split(data,seq(1,nrow(large_data_frame),1000)),
         function(x)
             small_vector = predict(model, x))
  return(ll)
})
rm(large_data_frame)
if(is.list(ll)) 
  res <- do.call(rbind,res) 
```

这个想法是在内存用完时返回一个预测结果列表。

注意，我不确定这里的结果，因为我们没有可重现的示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T10:35:46.647

**编辑：让我们再试一次：**

您可以使用以下`finally`参数`tryCatch`：

```
step<-1000
n<-dim(large_data_frame)[1]
large_vector <- NULL
tryCatch({
  large_vector <- predict(model, large_data_frame) 
}, error = function(e) { # ran out of memory
  for (i in seq(from = 1, to = n, by = step)) {
    small_vector <- predict(model, large_data_frame[i:(i+step-1),]) #predict in pieces
    save(small_vector,file=paste0("tmpfile",i)) #same pieces
  }  
 rm(large_data_frame) #free memory

},finally={if(is.null(large_vector)){ #if we run out of memory
   large_vector<-numeric(n) #make vector
   for (i in seq(from = 1, to = n, by = step)){
     #collect pieces
     load(paste0("tmpfile",i)) 
     large_vector[i:(i+step-1)] <- small_vector
   }
}}) 
```

这是一个简化版本，可以查看发生了什么：

```
large_vector<-NULL
rm(y)
tryCatch({
  large_vector <- y 
}, error = function(e) {# y is not found
  print("error")
},finally={if(is.null(large_vector)){
 large_vector<-1
}})
> large_vector
[1] 1 
```

**EDIT2：**关于可能对您有用的范围的另一个提示（尽管可能不是在这种情况下，因为您不想`large_vector`事先声明）：`<<-`操作员，来自 R-help：

> 运算符 <<- 和 ->> 通常仅在函数中使用，并导致通过父环境搜索正在分配的变量的现有定义......

因此，您可以像这样使用上面的示例代码：

```
large_vector<-NULL
rm(y)
tryCatch({
  large_vector <- y 
}, error = function(e) {# y is not found
  large_vector <<- 1
  print("error")
})
> large_vector
[1] 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-15T03:53:31.640

下面的代码是非常不言自明的。实际上，问题在于错误函数中的任何内容默认情况下都不会应用于父环境。

> b=0
> 
> # 如上所述，这不起作用：
> 
> tryCatch(expr = {stop("error1")}, error=function(e) {b=1})
> b
> 
> # 解决方案1：分配给父环境
> 
> tryCatch(expr = {stop("error2")}, error=function(e) {assign(x = "b", value = 2, envir = parent.env(env = environment()))})
> b
> 
> # `expr`解决方案2：最简单的（仅当您在and中都分配给 b 时才有效`error`）
> 
> b = tryCatch(expr = {stop("error3")}, error=function(e) {b=3;return(b)})
> b

# objective-c - 在 Objective-C 中，如何完全替换父类的方法，同时保留该父方法的继承功能？

> ID：15291390
> 
> 赞同：3
> 
> 时间：2013-03-08T10:06:52.560
> 
> 标签：objective-c, cocoa-touch, cocoa

基本上我有一个像这样的类层次结构：

```
NSObject
  MySpecialController
    MyExtraSpecialController 
```

它们中的每一个都有一个`init`方法，并且每个实现首先调用`super`以让超类首先初始化自己，一直到链上。由于缺乏更好的术语，我会说每个类都“增强”了它的超类的行为。

但是让我们假设我想完全“替换”我的超类的行为（仅仅是因为我想为特定的应用程序进一步专门化它，但又不会弄乱通用的可重用超类。所以假设我对超类有深入的了解）。我想要做的实际更改是将属性替换为更具体的类类型之一。为了完全实现这一点，我需要`init`实例化`widget`适当类的实例的方法。所以如果我实例化 a `MySpecialController`，它的`widget`属性应该是 type `MySpecialWidget`；但如果我实例化 a `MyExtraSpecialController`，它`widget`应该是类型`MyExtraSpecialWidget`：

```
//MySpecialController:

@interface MySpecialController : NSObject

@property (strong, nonatomic) MySpecialWidget *widget;

@end

@implementation MySpecialController

-(id)init {
    if (self = [super init]) {
        self.widget = [MySpecialWidget new];
    }
}

@end

//MyExtraSpecialController:

@interface MyExtraSpecialController : MySpecialController

@property (strong, nonatomic) MyExtraSpecialWidget *widget;

@end

@implementation MyExtraSpecialController

-(id)init {
    if (self = [super init]) {
        self.widget = [MyExtraSpecialWidget new];
    }
}

@end 
```

现在，这在某种意义上是`MySpecialController`有效的，并且可以被任何拥有公共 API 的人使用。而且`MyExtraSpecialController`也有效，并且遵循适当的关注点分离，因为它对超类的行为没有任何假设。这是为框架或库类创建的子类类型：健壮且不张扬。

但实际发生的是，当我创建 的新实例时`MyExtraSpecialController`，它的超类首先实例化 a `MySpecialWidget`，然后立即释放该实例并将其替换为 的实例`MyExtraSpecialWidget`。当然这可行，但由于我对超类有深入的了解（这基本上意味着我确切地知道它的`init`方法做了什么，所以我可以安全地替换它而无需先调用它），我想避免这个问题并且只实例化一个小部件（碰巧创建一个小部件真的很昂贵，而且不是过早的优化）。所以我想完全替换 super 的实现，这样它就不会创建一个小部件，并且会根据我的知识替换它所做的所有其他事情，但是，这是关键，我仍然想调用`init`更进一步，因为我不知道我替换的类的“超类”`init`方法做了什么（`NSObject`在这种情况下），因为这是一个我不熟悉的类。

想到的直接解决方案是使用 Objective-C 动态运行时来获取祖父实例，然后调用它`init`（如果需要，它将负责调用链），从而绕过 super。但是每当我发现自己要做类似的事情时，我总是想知道是否有更好的方法——从概念上讲，即替换而不是增加超类的方法。在那儿？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T10:51:13.397

`self.widget`您可以从`init`函数中删除实例化并实现自定义“惰性”getter 函数：

```
- (MySpecialWidget *)widget
{
     if (_widget == nil) {
         _wigdet = [MySpecialWidget new];
     }
     return _widget;
} 
```

然后你可以在子类中重写这个方法。小部件将在第一次访问时创建`self.widget`，并且调用超类或子类 getter。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:48:46.510

解决此问题的一种简单方法是创建一个用于制作小部件的钩子。

```
@implementation MySpecialController

-(id)init {
    if (self = [super init]) {
        self.widget = [self makeWidget];
    }
}

- (MySpecialWidget*) makeWidget
 {
     [MySpecialWidget new];
@end 
```

然后您的子类可以覆盖`makeWidget`以返回一个`VerySpecialWidget`. 当您不希望客户知道这些小部件时，这是有道理的。

在您的场景中，客户可能对小部件*有所*了解——例如，他们想要一个 VerySpecialController 来获得一个 VerySpecialWidget。如果是这种情况，您可能希望让客户端选择小部件：

```
 [MySpecialController initWith: [MyVerySpecialWidget new]]; 
```

如果小部件是创建子类的主要力量，那么任何一种方法都可能首先消除生成子类的需要。

第二种方法具有使单元测试更容易的额外优势。您可以构建一个 MySpecialController 并将其传递给一个 dummy、stub 或 mock，而无需大惊小怪：

```
 [MySpecialController initWith: [MyTestObjectThatPretendsToBeAWidget new]]; 
```

但是如果客户不应该知道任何关于小部件的事情，那么第一种模式会更清晰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:06:16.853

一种方法是将实例方法添加`-widgetClass`到`MySpecialController`

```
@implementation MySpecialController

- (id)init
{
    self = [super init];
    if (self) {
        self.widget = [[[self widgetClass] alloc] init];
    }
    return self;
}

- (id)widgetClass
{
    return [MySpecialWidget class];
}

//...

@end 
```

并覆盖该方法`MyExtraSpecialController`

```
@implementation MyExtraSpecialController

- (id)widgetClass
{
    return [MyExtraSpecialWidget class];
}

//...

@end 
```

# c++ - 编译时出现 OpenGL GLI 错误

> ID：15291392
> 
> 赞同：2
> 
> 时间：2013-03-08T10:07:00.217
> 
> 标签：c++, opengl, compiler-errors, include

当我尝试使用 gli/gli.hpp 进行编译时，出现以下错误。我以前从未接触过这些文件。所以我不知道如何解决这个问题。

```
In file included from /usr/include/gli/gli.hpp:42:0,
              from window.cpp:4:
/usr/include/gli/./core/storage.hpp:89:25: error: declaration of ‘gli::storage::format_type gli::storage::format() const’ [-fpermissive]
/usr/include/gli/./core/format.hpp:36:8: error: changes meaning of ‘format’ from ‘enum gli::format’ [-fpermissive]

In file included from /usr/include/gli/gli.hpp:45:0,
              from window.cpp:4:
/usr/include/gli/./core/texture2d.hpp:71:24: error: declaration of ‘gli::texture2D::format_type gli::texture2D::format() const’ [-fpermissive]
/usr/include/gli/./core/format.hpp:36:8: error: changes meaning of ‘format’ from ‘enum gli::format’ [-fpermissive]

In file included from /usr/include/gli/gli.hpp:46:0
             from window.cpp:4:
/usr/include/gli/./core/texture2d_array.hpp:72:24: error: declaration of ‘gli::texture2DArray::format_type gli::texture2DArray::format() const’ [-fpermissive]
/usr/include/gli/./core/format.hpp:36:8: error: changes meaning of ‘format’ from ‘enum gli::format’ [-fpermissive]

In file included from /usr/include/gli/gli.hpp:47:0,
             from window.cpp:4:
/usr/include/gli/./core/texture3d.hpp:71:24: error: declaration of ‘gli::texture3D::format_type gli::texture3D::format() const’ [-fpermissive]
/usr/include/gli/./core/format.hpp:36:8: error: changes meaning of ‘format’ from ‘enum gli::format’ [-fpermissive]

In file included from /usr/include/gli/gli.hpp:51:0,
             from window.cpp:4:
/usr/include/gli/./core/load_dds.hpp:37:3: error: ‘string’ is not a member of ‘std’

In file included from /usr/include/gli/./core/load_dds.hpp:41:0,
             from /usr/include/gli/gli.hpp:51,
             from window.cpp:4:
/usr/include/gli/./core/load_dds.inl: In function ‘gli::storage gli::loadStorageDDS(const string&)’:
/usr/include/gli/./core/load_dds.inl:303:1: error: ‘gli::storage gli::loadStorageDDS(const string&)’ redeclared as different kind of symbol
/usr/include/gli/./core/load_dds.hpp:36:10: error: previous declaration of ‘gli::storage gli::loadStorageDDS’ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:56:38.613

我认为问题在于您没有告诉编译器您需要使用 C++11 标准进行编译。

如果您使用的是 gcc，那么您必须通过

```
-std=c++11 
```

在你的命令行上（或者 -std=c++0x 如果你使用的是旧版本的 gcc）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:24:47.367

简短的回答似乎是您的 C++ 编译器比用于开发 gli 的编译器更严格。`-fpermissive`通过错误，第一个可以通过在您的`g++`线路上添加来静音（不一定正确修复） 。这个错误看起来像是来自使用错误的返回类型`gli::storage::format()`

```
In file included from /usr/include/gli/gli.hpp:42:0,
              from window.cpp:4:
/usr/include/gli/./core/storage.hpp:89:25: error: declaration of ‘gli::storage::format_type gli::storage::format() const’ [-fpermissive]
/usr/include/gli/./core/format.hpp:36:8: error: changes meaning of ‘format’ from ‘enum gli::format’ [-fpermissive]

In file included from /usr/include/gli/gli.hpp:45:0,
              from window.cpp:4:
/usr/include/gli/./core/texture2d.hpp:71:24: error: declaration of ‘gli::texture2D::format_type gli::texture2D::format() const’ [-fpermissive]
/usr/include/gli/./core/format.hpp:36:8: error: changes meaning of ‘format’ from ‘enum gli::format’ [-fpermissive]

In file included from /usr/include/gli/gli.hpp:46:0
             from window.cpp:4:
/usr/include/gli/./core/texture2d_array.hpp:72:24: error: declaration of ‘gli::texture2DArray::format_type gli::texture2DArray::format() const’ [-fpermissive]
/usr/include/gli/./core/format.hpp:36:8: error: changes meaning of ‘format’ from ‘enum gli::format’ [-fpermissive]

In file included from /usr/include/gli/gli.hpp:47:0,
             from window.cpp:4:
/usr/include/gli/./core/texture3d.hpp:71:24: error: declaration of ‘gli::texture3D::format_type gli::texture3D::format() const’ [-fpermissive]
/usr/include/gli/./core/format.hpp:36:8: error: changes meaning of ‘format’ from ‘enum gli::format’ [-fpermissive] 
```

以下错误似乎是包含错误头文件的情况。特别是，`load_dds.hpp`包括另一个头文件 ( `storage.hpp`)，其中包括`<cstring>`，而不是`<string>`，这是 C++ 声明`std::string`的 . 快速修复是添加`<string>`到`storage.hpp`您下载的副本中，并提交错误。

```
In file included from /usr/include/gli/gli.hpp:51:0,
             from window.cpp:4:
/usr/include/gli/./core/load_dds.hpp:37:3: error: ‘string’ is not a member of ‘std’ 
```

对于这个，我认为问题在于 in被定义为一个函数`load_dds.hpp`，`gli::loadStorageDDS`但没有标记为 being `inline`，这就是 in 正在发生的事情`load_dds.inl`。该`.inl`机制似乎是微软的混合物，因此您可能需要修改`.hpp`以包含`.inl`实现以保持一致。（这是一个猜测，顺便说一句）。

```
In file included from /usr/include/gli/./core/load_dds.hpp:41:0,
             from /usr/include/gli/gli.hpp:51,
             from window.cpp:4:
/usr/include/gli/./core/load_dds.inl: In function ‘gli::storage gli::loadStorageDDS(const string&)’:
/usr/include/gli/./core/load_dds.inl:303:1: error: ‘gli::storage gli::loadStorageDDS(const string&)’ redeclared as different kind of symbol
/usr/include/gli/./core/load_dds.hpp:36:10: error: previous declaration of ‘gli::storage gli::loadStorageDDS’ 
```

# c# - C:/Temp/ 中的未知临时文件由 .Net 应用程序生成，该应用程序将文件发送到远程 Web 服务

> ID：15291397
> 
> 赞同：1
> 
> 时间：2013-03-08T10:07:13.090
> 
> 标签：c#, .net, web-services, file, bytearray

我们正在客户端服务器上运行文件发送应用程序。该应用程序将文件转换`ByteArray`为 Web 服务并将其发送到 Web 服务。

一开始，我们无权更改 C:/ 驱动器。该应用程序出现错误消息：“找不到路径 C:/temp/[hash code name].tmp 的一部分”

然后我们要求管理员让我们完全控制它，我手动创建了临时文件夹，然后它就可以工作了。

第二天，当我们重新启动应用程序时，它不再发送文件，而是给我们这个消息。“找不到路径 C:/temp/ **1** /[hash code name].tmp 的一部分”。

我不知道临时文件是什么，是 ByteArray 吗？它会自动写入 C:/ 中的临时文件吗？我可以指定临时文件的位置吗？为什么有时临时文件位于临时文件夹的子文件夹中（例如文件夹 1）？为什么应用程序无法自行在临时文件夹中自动创建文件夹 1？

# c# - 客户端无法接收服务器发送的数据，只能发送数据？

> ID：15291398
> 
> 赞同：0
> 
> 时间：2013-03-08T10:07:14.953
> 
> 标签：c#, sockets, c#-4.0, client-server, serversocket

我有一个 winform 服务器和一个客户端程序。两者都是连接的，客户端可以向服务器发送数据，服务器接收。但是当服务器发送数据时，客户端无法接收。

这是客户端接收数据的代码：

```
//RECIEVE PART
 private Socket _clientSocket; // We will only accept one socket

    private byte[] _buffer;

    public Form1()
    {
        InitializeComponent();
        StartRecieve();
    }

    #region Receiving Data
    private void StartRecieve()
    {
        try
        {
            _serverSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
           // _serverSocket.Bind(new IPEndPoint(IPAddress.Any, 3333));
            _serverSocket.Listen(10);
            _serverSocket.BeginAccept(new AsyncCallback(AcceptCallback), null);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    }

    private void AcceptCallback(IAsyncResult AR)
    {
        try
        {
            _clientSocket = _serverSocket.EndAccept(AR);
            _buffer = new byte[_clientSocket.ReceiveBufferSize];
            _clientSocket.BeginReceive(_buffer, 0, _buffer.Length, SocketFlags.None, new AsyncCallback(ReceiveCallback), null);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    }

    private void ReceiveCallback(IAsyncResult AR)
    {
        try
        {
            int received = _clientSocket.EndReceive(AR);
            Array.Resize(ref _buffer, received); // Shrink buffer to trim null characters
            string text = Encoding.ASCII.GetString(_buffer);
            Array.Resize(ref _buffer, _clientSocket.ReceiveBufferSize); // Regrow buffer
            //AppendToTextBox(text);
            MessageBox.Show(text);
            // Start receiving data again
            _clientSocket.BeginReceive(_buffer, 0, _buffer.Length, SocketFlags.None, new AsyncCallback(ReceiveCallback), null);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    }

    #endregion

    #region Display
    /// <summary>
    /// Provides a thread safe way to append text to the textbox
    /// </summary>
    private void AppendToTextBox(string text)
    {
        MethodInvoker invoker = new MethodInvoker(delegate
        {
            // Add two new lines afterwards
            TboxDisp.Text += text + "\r\n" + "\r\n";
        });

        this.Invoke(invoker);
    }

    #endregion
//Connection Part
 private void BtnConnect_Click(object sender, EventArgs e)
    {
        try
        {
            string ip = TboxIP.Text;
            int port = int.Parse(TboxPort.Text);
            _clientSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
            // Connect to the  host
            _clientSocket.BeginConnect(new IPEndPoint(IPAddress.Parse(ip), port),
                                            new AsyncCallback(ConnectCallback), null);

            if (SocketConnected(_clientSocket) == true)
            {
                lblstatus.Text = "Establishing Connection to " + ip;
                lblstatus2.Text = "Connection Established";
            }

           // Connect1(ip, port);

        }
        catch (SystemException ex)
        {
            MessageBox.Show(ex.Message);
        }

    }

    //ends bending requests
    private void ConnectCallback(IAsyncResult AR)
    {
        try
        {
            _clientSocket.EndConnect(AR);
            EnableSearchButton();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    }

    //Enables the button search
    private void EnableSearchButton()
    {
        MethodInvoker invoker = new MethodInvoker(delegate
        {
            BtnSearch.Enabled = true;
        });

        this.Invoke(invoker);
    }

    #endregion

    private void BtnSearch_Click(object sender, EventArgs e)
    {
        try
        {
            // Serialize the textBoxes text before sending
           // byte[] buffer = Encoding.ASCII.GetBytes(textBox.Text);
            string command = "HELOTAGP/1.1\n";
            byte[] buffer = Encoding.ASCII.GetBytes(command);
            _clientSocket.BeginSend(buffer, 0, buffer.Length, SocketFlags.None, new AsyncCallback(SendCallback), null);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    }

    //Ends pending asynchronous send
    private void SendCallback(IAsyncResult AR)
    {
        try
        {
            _clientSocket.EndSend(AR);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    } 
```

完整的服务器代码（接收+发送）是：

```
 public partial class ServerForm : Form
{
    private Socket _serverSocket;
    private Socket _clientSocket; // We will only accept one socket
    private byte[] _buffer;

    public ServerForm()
    {

        InitializeComponent();
        StartServer();
    }

    private void StartServer()
    {
        try
        {
            _serverSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
            _serverSocket.Bind(new IPEndPoint(IPAddress.Any, 3333));
            _serverSocket.Listen(10);
            _serverSocket.BeginAccept(new AsyncCallback(AcceptCallback), null);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    }

    private void AcceptCallback(IAsyncResult AR)
    {
        try
        {
            _clientSocket = _serverSocket.EndAccept(AR);
            _buffer = new byte[_clientSocket.ReceiveBufferSize];
            _clientSocket.BeginReceive(_buffer, 0, _buffer.Length, SocketFlags.None, new AsyncCallback(ReceiveCallback), null);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    }

    private void ReceiveCallback(IAsyncResult AR)
    {
        try
        {
            int received = _clientSocket.EndReceive(AR);
            Array.Resize(ref _buffer, received); // Shrink buffer to trim null characters
            string text = Encoding.ASCII.GetString(_buffer);
            Array.Resize(ref _buffer, _clientSocket.ReceiveBufferSize); // Regrow buffer

            AppendToTextBox(text);
            // Start receiving data again
            _clientSocket.BeginReceive(_buffer, 0, _buffer.Length, SocketFlags.None, new AsyncCallback(ReceiveCallback), null);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    }

    /// <summary>
    /// Provides a thread safe way to append text to the textbox
    /// </summary>
    private void AppendToTextBox(string text)
    {
        MethodInvoker invoker = new MethodInvoker(delegate
            {
                // Add two new lines afterwards
                textBox.Text += text + "\r\n" + "\r\n";
            });

        this.Invoke(invoker);
    }

    //sending data

    private void BtnSend_Click(object sender, EventArgs e)
    {
        try
        {
            // Serialize the textBoxes text before sending
            string command = "Test";
            byte[] buffer = Encoding.ASCII.GetBytes(command);
            _clientSocket.BeginSend(buffer, 0, buffer.Length, SocketFlags.None, new AsyncCallback(SendCallback), null);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    }

    private void SendCallback(IAsyncResult AR)
    {
        try
        {
            _clientSocket.EndSend(AR);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    }
} 
```

服务器正确接收数据，但我不知道为什么客户端无法从服务器接收数据。是服务器发送的方式不对吗？还是客户接收的方式不对？我必须为客户端设置 IP 地址吗？

任何帮助表示赞赏....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T03:36:12.790

你误解了 Sockets 的使用。一个套接字有一个读通道和一个写通道。两个通道相互隔离。查看您的客户端代码，您使用“serverSocket”侦听传入数据，同时使用“clientSocket”将数据发送到服务器。相反，您应该使用同一个套接字的读取和写入通道。

澄清一下：连接了一个 TCP 套接字。这意味着对于每个套接字，在使用套接字之前都需要一个连接。侦听套接字意味着您期望连接到。在您的客户端中，“clientSocket”正在连接到服务器，但“serverSocket”从未连接到服务器，服务器也从未连接到客户端（它不应该）。

# wpf - 使用 WPF 的动态按钮宽度

> ID：15291399
> 
> 赞同：1
> 
> 时间：2013-03-08T10:07:15.507
> 
> 标签：wpf, wpf-controls, wpf-4.0

我正在尝试创建一个控件，该控件在鼠标悬停按钮事件时执行多个动画。第一个功能是，按钮应该采用 padding=2 并占据整个列。我无法做到这一点；如果我试图在鼠标悬停时减小按钮的宽度，我可以这样做，但是当我试图增加宽度时，按钮正在扩展，但扩展的部分不可见。如何实现相同？

我在控制模板中使用以下代码。请提出更改建议：-

```
<!--Create a control template for button-->
<ControlTemplate x:Key="buttonAnimate" TargetType="Button">
    <Grid Name="myGrid">
        <Button Name="myButton" Background="{TemplateBinding Background }" Width="{TemplateBinding Width}">
        </Button>
    <Border Name="MyBorder" BorderBrush="Orange" BorderThickness="3" CornerRadius="2"></Border>
    </Grid>
    <ControlTemplate.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
            <Setter Property="Background" Value="DarkRed" TargetName="MyBorder"/>
            <Setter Property="Width" Value="200" TargetName="myButton"/>
            <Setter Property="Cursor" Value="Hand" TargetName="myGrid"/>
            <Setter Property="Width" Value="300" TargetName="myButton"/>
            <Setter Property="Width" Value="300" TargetName="MyBorder"/>
            <Setter Property="Padding" Value="2" TargetName="myButton"/>
        </Trigger>
    </ControlTemplate.Triggers>
</ControlTemplate> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:06:22.410

您的 Button 被 Grid 裁剪。尝试将 ClipsToBounds 属性设置为 false 或尝试以下操作：

```
public class MyButton : Button
{
    protected override Geometry GetLayoutClip(Size layoutSlotSize)
    {
        return ClipToBounds ? base.GetLayoutClip(layoutSlotSize) : null;
    }
} 
```

希望能帮助到你。

# java - 这是重载，不同类中具有相同名称和不同签名的方法吗？

> ID：15291400
> 
> 赞同：9
> 
> 时间：2013-03-08T10:07:18.737
> 
> 标签：java, oop, overloading

如果我在 Java 中有以下代码：

```
class A {

    public int add(int a , int b) {
        return (a+b);
    }
}

class B extends A {
    public float add(float a , float b) {
        return (a+b);
} 
```

在这种特殊情况下，子类并没有完全覆盖基类的`add`函数，因为它们具有不同的签名，并且只有在它们处于相同范围内时才会出现重载的概念。那么，`add(float , float)`子类中的函数是否`B`被视为一个全新的函数，重载和覆盖的概念不适用呢？它使用“静态绑定”还是“动态绑定”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T10:09:41.230

b 类中的方法 add 是 a 类中 add 的**重载**。不是**覆盖**。覆盖只是原始 add 方法的不同实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T10:08:58.280

简而言之，是的。要*覆盖*，您需要复制完整的方法签名，其中包括方法名称、参数和返回类型。从[教程](http://docs.oracle.com/javase/tutorial/java/IandI/override.html)

> 子类中具有相同签名（名称，加上其参数的编号和类型）和返回类型作为超类中的实例方法的实例方法会覆盖超类的方法。

您可能需要考虑[@Override 批注](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Override.html)，如果您没有成功覆盖方法，它将触发编译器错误。

在这个特定的例子中，看起来你不需要重写包括泛型在内的一些解决方案。所以你可以实例化一个类`a<Integer>`和一个类似的类`a<Float>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T10:10:04.263

在这种情况下，您不会**覆盖**该方法，因为签名不同。

但是在 b 类中存在**重载**，因为您有两个名称相同但参数不同的方法（一个是 a 类，另一个是 b 类）

希望能帮助到你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-31T05:48:47.110

在子类中可以有一个方法没有被重写但被重载。这里的子类有两个 add() 方法。接受 int 参数的版本（未覆盖），以及接受浮点参数的重载方法 add()。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-28T20:25:26.917

我知道这是迟到的答案，但我认为对于初学者来说这是一个重要的问题。

**重载的一个关键点是它在继承中起作用。**

接下来是它的`Static binding`或`Dynamic binding`。

它是**静态绑定**那么，为什么？

**静态绑定**

1.  Java 中的静态绑定发生在`Compile time`.
2.  `private`，`final`并且`static`方法和变量使用静态绑定并由编译器绑定。
3.  静态绑定使用类型（Java 中的类）信息进行绑定。

**动态绑定**

4.  动态绑定发生在`Runtime`.

5.  基于运行时对象在运行时绑定的动态方法。

6.  动态绑定使用 Object 来解析绑定。

**但重要的部分在这里**

> 重载的方法使用静态绑定进行绑定，而重写的方法在运行时使用动态绑定进行绑定。

Java 编译器根据用于调用方法的参数类型确定要在编译时执行的重载方法的正确版本，这两个类的重载方法的参数接收调用中使用的参数值并执行重载方法。

```
B a=new B();
a.add(4, 5);
a.add(4.0f, 5.0f); 
```

因此，如果您将创建类型 B 的引用，那么它将搜索正确的参数类型，并且对于上述代码，它将执行这两种方法。

```
A a=new B();
a.add(4, 5);
a.add(4.0f, 5.0f); 
```

但是对于上面的代码，它会给出浮点参数的编译时错误。

希望它能消除所有疑虑。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-03T05:46:27.703

我认为在这种特殊情况下，不会发生重载和覆盖，因为在重载和覆盖的情况下返回类型必须相同，因此在这种情况下既不会发生静态绑定，也不会发生动态绑定。在返回类型不同的情况下，方法重载是不可能的，因为编译器无法确定他需要调用哪个方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-02T02:58:53.753

第一件事

**它是方法覆盖吗？**

不，因为要覆盖一个方法，您需要复制完整的方法签名，正如 Brian Agnew 的回答中指出的那样，正如我在下面解释的那样。

**是否超载？**

是的，方法“add”在 B 类中有一个重载的实现。

考虑以下代码：

```
class C{
    public static void main(String args[]){
        B a = new B();
        a.add(2 , 3);
        a.add(2.0 , 3.0);
    }
}

class A {

    public int add(int a , int b) {
        System.out.print("INT ");
        return a + b;
    }
}

class B extends A {
    public double add(double a , double b) {
        System.out.print("Double ");
        return a + b;
    }
} 
```

> 输出：INT 双

因此，代码中 Class B 中的方法重载了它从其父级继承的 add 方法

**它使用静态绑定还是动态绑定？**

这就是让我得出结论认为 OP 很困惑的原因。它是静态绑定，因为它是一个重载函数。考虑动态绑定的唯一方法是在以下场景中

```
class C{
    public static void main(String args[]){
        A a = new B();
        a.add(2.0 , 3.0);
    }
}

class A {

    public int add(int a , int b) {
        System.out.println("A : INT");
        return a + b;
    }
}

class B extends A {
    public int add(int a , int b) {
        System.out.println("B : INT");    
        return a + b;
    }

    public double add(double a , double b) {
        System.out.println("Double");
        return a + b;
    }   
} 
```

> 输出：B：INT

在这里，父类 A 有一个契约，上面写着“我有一个整数的添加行为”。B 类继承了这种添加行为并使其更加具体，同时还提供了一种可以添加双打的新行为。但是 A 类“不知道这种行为”。

所以A类的对象“不能”添加双打。为此，您需要更具体的 A 对象类型，即 B 对象。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-09-11T16:23:55.763

类 A 中的方法`add()`也可以通过继承提供给类 B，因此`overloaded`通过将数据类型从 更改为 ，该方法在类`int, int`中`float, float`。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-07-13T18:06:51.253

当且仅当函数在相同的范围或类中时，重载的概念才会起作用。cz 如果这是方法重载的情况，那么对于相同的方法签名或相同的参数类型，编译器会感到困惑并且必须给出编译时错误。但是在上面的B类程序中，如果你以相同的顺序传递相同的参数，那么根据重载它必须给出错误但它没有发生你可以检查它我已经有。这是继承的情况，如果您调用任何方法，则通过对象引用，编译器将在子类中检查它，如果它不存在，则它将查看上述程序所涉及的父类。希望这会有所帮助。

# c# - 正则表达式用标签替换多个换行符

> ID：15291402
> 
> 赞同：3
> 
> 时间：2013-03-08T10:07:21.420
> 
> 标签：c#, .net, regex

我有一个字符串如下：

> \r\n \r\n 一些文字 blahblah \r\n \r\n \r\n \r\n 一些其他文字 \r\n \r\n \r\n \r\n blah blah blah \ r\n

我想用一个`<br>`标签替换多个换行符的任何实例，并将任何单个 \r\n 替换为`<br>`

所以上面的文字应该是这样的：

```
<br>  Some text blahblah <br><br> Some other text <br><br> blah blah blah <br> 
```

我已经尝试过了，但它没有考虑到： \r\n \r\n 之间的空格

```
Regex.Replace(text, @"[\r\n]+", "<br>") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:11:50.577

也许试试这个（不是正则表达式，但有效:)），这将支持奇数/偶数，并且如果缺少`\r\n`标签，则会在开始和结束时添加标签。`\r\n`

```
 var result = string.Concat(text.Split(new char[] { '\r', '\n' })
                .Where(l => !string.IsNullOrWhiteSpace(l))
                .Select(s => string.Format("<br> {0} <br>",s))); 
```

结果：

```
\r\n \r\n Some text blahblah \r\n \r\n \r\n \r\n Some other text \r\n \r\n \r\n \r\n blah blah blah \r\n
"<br> Some text blahblah <br><br> Some other text <br><br> blah blah blah <br>"

 \r\n \r\n Some text \r\n Some other \r\n \r\n \r\n  blah blah blah 
"<br> Some text <br><br> Some other <br><br> blah blah blah <br>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:13:00.510

这个怎么样：

```
Regex.Replace(text, @"([\r\n]\s*)+", "<br>") 
```

或者，如果您不希望它在换行符运行后占用空间：

```
Regex.Replace(text, @"[\r\n](\s*[\r\n])+", "<br>") 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-08T10:12:58.007

这应该做的工作

```
string myString = "\r\n \r\n Some text blahblah \r\n \r\n \r\n \r\n Some other text \r\n \r\n \r\n \r\n blah blah blah \r\n";
myString = Regex.Replace(myString, @"(?:\r\n *){1,2} *", "<br>"); 
```

会产生

```
<br>Some text blahblah <br><br>Some other text <br><br>blah blah blah <br> 
```

# sql - SQL Server 拆分两列

> ID：15291403
> 
> 赞同：0
> 
> 时间：2013-03-08T10:07:22.060
> 
> 标签：sql, sql-server-2005, split

我必须在我们的系统中导入一些数据，并且有**一个特定的列**[FiscalInfo] 不幸地包含**FiscalDepartment**和 FiscalNumber 信息。我想把它分成**两**列：[FiscalDepartment] 和 [FiscalNumber]

这是一个示例

```
[FiscalInfo]
F.O 885621791  F.D
F.O   F.D 
F.O 335064214  F.D KALOST
F.O  F.D ASRIT 
```

从你所看到的，我**并不总是**有关于 FO 和 FD 的信息，但**我总是**在列内有它们的缩写（FO 和 FD）。

有没有办法拆分信息？

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:17:06.150

它对这些细节非常硬编码*（假设该字段总是以'FO'等开头）*，但希望能说明这一点......

```
WITH cte as
(      select 'F.O   F.D' as ss
 UNION select 'F.O 885621791  F.D'
 UNION select 'F.O 335064214  F.D KALOST'
 UNION select 'F.O  F.D ASRIT '
)
select 
  substring(ss, 5, charindex('F.D',ss)-5) as FO,
  substring(ss, charindex('F.D',ss)+4, 8000) as FD
from cte 
```

# javascript - RequireJS中的define和require有什么区别？

> ID：15291408
> 
> 赞同：7
> 
> 时间：2013-03-08T10:07:42.557
> 
> 标签：javascript, jquery, requirejs

和有什么区别`define`，`require`我应该什么时候使用它们？我在 Stack Overflow 上阅读了不同的答案，但我仍然无法理解。

例如，如果这是 on `main.js`（配置文件需要指向），有什么区别？

```
define(["jquery"], function($) {
 do something with $            
});

require(["jquery"], function($) {
 do something with $            
}); 
```

是否`$/jQ`保证两者都已加载并准备就绪？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T10:12:45.627

他们在内部做同样的事情。但是......您应该使用定义您的应用程序的入口点，`require`并使用定义其余模块`define`。我发现这清楚地表明了您正在查看的当前模块实际上在您的整个应用程序中扮演什么角色。

# java - 如何沙箱类？

> ID：15291409
> 
> 赞同：3
> 
> 时间：2013-03-08T10:07:45.277
> 
> 标签：java, php, security, sandbox, securitymanager

假设我有一个网站，人们可以在其中以课堂形式上传他们的代码。我怎么能限制该课程中实际可以做的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T10:09:51.483

为客户端代码实现¹。我还建议测试代码运行多长时间，如果超过限制就结束它（这更旨在捕捉导致无限循环的程序员无能，而不是故意的恶意行为）。[`SecurityManager`](http://docs.oracle.com/javase/7/docs/api/java/lang/SecurityManager.html)

1.  [EG 如this answer](https://stackoverflow.com/a/5401319/418556)中所见，旨在实现[从 API 中防止 System.exit()](https://stackoverflow.com/q/5401281/418556)。

# jquery - splashScreen - 淡入，但理想情况下直到最后才消失

> ID：15291410
> 
> 赞同：1
> 
> 时间：2013-03-08T10:07:45.273
> 
> 标签：jquery

我正在使用一些代码来创建一种闪屏，使用此处的文件淡入淡出一些图像：http: [//tutorialzine.com/2010/11/apple-style-splash-screen-jquery/](http://tutorialzine.com/2010/11/apple-style-splash-screen-jquery/)

但是，我正在尝试解决如何阻止图像淡出，然后它会创建一个图像，慢慢建立起来，然后最终淡出以显示下面的网站...

我对此很陌生，所以试图找到要更改的代码对我来说是一个问题，我正在使用下面的代码 - 任何人都可以指导我了解我需要更改的内容以达到我想要的结果吗？

// 自执行匿名函数，// 开发 jQuery 插件的标准技术。

(函数($){

```
$.fn.splashScreen = function(settings){

    // Providing default options:

    settings = $.extend({
        textLayers      : [],
        textShowTime    : 3500,
        textTopOffset   : 80
    },settings);

    var promoIMG = this;

    // Creating the splashScreen div.
    // The rest of the styling is in splashscreen.css

    var splashScreen = $('<div>',{
        id  : 'splashScreen',
        css:{
            backgroundImage     : promoIMG.css('backgroundImage'),
            backgroundPosition  : 'center '+promoIMG.offset().top+'px',
            height              : $(document).height()
        }
    });

    $('body').append(splashScreen);

    splashScreen.click(function(){
        splashScreen.fadeOut('slow');
    });

    // Binding a custom event for changing the current visible text according 
    // to the contents of the textLayers array (passed as a parameter)

    splashScreen.bind('changeText',function(e,newID){

        // If the image that we want to show is
        // within the boundaries of the array:

        if(settings.textLayers[newID]){
            showText(newID);
        }
        else {
            splashScreen.click();
        }
    }); 

    splashScreen.trigger('changeText',0);

    // Extracting the functionality as a 
    // separate function for convenience.

    function showText(id){
        var text = $('<img>',{
            src:settings.textLayers[id],
            css: {
                marginTop : promoIMG.offset().top+settings.textTopOffset
            }
        }).hide();

        text.load(function(){
            text.fadeIn('slow').delay(settings.textShowTime).fadeOut('slow',function(){text.remove();
                splashScreen.trigger('changeText',[id+1]);
            });
        });

        splashScreen.append(text);
    }

    return this;
} 
```

})(jQuery);

# android - Android TranslateAnimation 没有在点击时播放

> ID：15291411
> 
> 赞同：0
> 
> 时间：2013-03-08T10:07:46.080
> 
> 标签：android, animation, onclick, translate-animation

我有以下想要播放的动画：

```
 public void onConfirmPayment(View view){        
         Animation flowAway = new TranslateAnimation(0, 400, 0, 0);
         flowAway.setDuration(1500);
         dummyTextView.setAnimation(flowAway);
         flowAway.start();
    } 
```

单击 ImageButton 时调用该方法。问题是：动画不播放，除非我转动设备（方向改变）而不是播放我点击按钮时应该播放的动画。我从来没有遇到过这样的事情，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:25:14.450

好吧，现在很清楚了：我真是个白痴。它根本不会执行动画，因为在动画的 start() 调用之后没有程序指令。

因为我希望 TextView 在动画之后消失，所以我简单地添加了`dummyTextView.setVisibility(View.GONE)`它，它就像它应该的那样工作。

抱歉这个愚蠢的问题。

# javascript - Javascript SPA 多语言和本地存储

> ID：15291412
> 
> 赞同：3
> 
> 时间：2013-03-08T10:07:46.693
> 
> 标签：javascript, breeze, single-page-application, durandal

我正在使用 DurandalJs 和 BreezeJs 作为客户端的主要技术开发 JavaScript SPA。我想知道我可以使用哪些库来做我的应用程序支持不同的语言。我一直在进行一些搜索，发现 JED.js ( [http://slexaxton.github.com/Jed/](http://slexaxton.github.com/Jed/) ) 是完成这项任务的一个不错的选择。

但是我不太确定，有人可以为这项任务推荐 nay 库，或者给我一些关于 JED.js 的意见。

另外我想询问一些用于在浏览器中存储信息的库。有人可以给我推荐一个吗？我在 amplify.js 中想过，它提供了很好的功能来向服务器发出请求并缓存此信息。但是在我的应用程序中，我使用的是轻风，所以这部分是不需要的。我只需要存储一些数据，比如用户名和一些小信息。

很感谢。

我的解决方案：

我已经使用 amplify.storage 实现了我的系统，用于在浏览器中存储信息，并使用 i18next ( [http://i18next.com/](http://i18next.com/) ) 使我的应用程序可用于不同的人类语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:22:20.533

我对你问题的第一部分没有太多帮助。我对自己的回应很感兴趣！

我确实对本地存储有一些想法。AmplifyJS 实际上是三个独立的库。其中之一是[**amplify.store**](http://amplifyjs.com/api/store/)，专门解决本地存储问题，值得一看。你可以看看[**草坪椅**](http://brian.io/lawnchair/)。最后，查看[**Breeze DocCode 示例**](http://www.breezejs.com/samples/doccode)，了解在浏览器本地存储中存储全部和部分实体缓存的示例；它很原始，但会给你提示。

# javascript - Backbone.js 主细节视图，导航问题（包括 jsfiddle）

> ID：15291413
> 
> 赞同：2
> 
> 时间：2013-03-08T10:07:54.223
> 
> 标签：javascript, jquery, backbone.js

我正在努力获得一个使用 Backbone 的简单主从场景。这是[jsfiddle](http://jsfiddle.net/Rn7bG/4/)，代码如下。

问题 1：如果我将“pushstate”切换为 true，则此导航根本不起作用。我真正想要的是在我的网址中没有哈希/井号。

问题 2：我的用户可能会在 /accommodation/287 之类的 url 上摇摆不定，而不总是在主页上。您将如何使用路由器处理该问题？

非常感谢您的帮助！

```
var AccommodationItem = Backbone.Model.extend({
    defaults: {
        html: "",
        loaded: false
    },
    urlRoot: "/Home/Accommodation/"
});

var AccommodationItemView = Backbone.View.extend({
    tagName: "li",
    template: _.template("<a href='#accommodation/<%= id %>'><%= description %></a>"),
    render: function () {
        this.$el.html(this.template(this.model.toJSON()));
        return this;
    }
});

var AccommodationList = Backbone.Collection.extend({
    model: AccommodationItem
});

var DetailView = Backbone.View.extend({
    initialize: function () { },
    render: function () {
        this.$el.html(this.model.get("html"));
    },
    setModel: function (model) {
        this.model = model;
        var $this = this;
        if (!this.model.get("loaded")) {
            /*
            this.model.fetch({ success: function () {
                $this.model.set("loaded", true);
                $this.render();
            }
            });*/
            $this.model.set("html", "<h2>Full item " + this.model.get("id") + "</h2>");
    $this.model.set("loaded", true);
    $this.render();

        } else {
            $this.render();
        }
    }
});

var AccommodationListView = Backbone.View.extend({
    tagName: "ul",
    initialize: function () {
        this.collection.on("reset", this.render, this);
    },
    render: function () {
        this.addAll();
    },
    addOne: function (item) {
        var itemView = new AccommodationItemView({ model: item });
        this.$el.append(itemView.render().el);
    },
    addAll: function () {
        this.collection.forEach(this.addOne, this);
    }
});

var App = new (Backbone.Router.extend({
    routes: {
        "": "index",
        "accommodation/:id": "show"
    },
    initialize: function () {
        this.detailView = new DetailView({ model: new AccommodationItem({ id: 1 }) });
        $("#detail").append(this.detailView.el);
        this.accommodationList = new AccommodationList();
        this.accommodationListView = new AccommodationListView({ collection: this.accommodationList });
        $("#app").append(this.accommodationListView.el);
    },
    start: function () {
        Backbone.history.start({ pushState: false });
    },
    index: function () {
        this.fetchCollections();
    },
    show: function (id) {
        var model = this.accommodationList.get(id);
        this.detailView.setModel(model);
    },
    fetchCollections: function () {
        var items = [{ id: 1, description: "item one" }, { id: 2, description: "item two" }, { id: 3, description: "item three" }];
        this.accommodationList.reset(items);
    }
}));
$(function () {
    App.start();
}); 
```

**编辑：**在下面的评论中，我提到了 Codeschool 主干.js 教程。只想说我现在已经完成了课程的两个部分，它确实涵盖了已接受答案中描述的 AppView 模式。这是一门很棒的课程，我强烈推荐它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T15:14:31.500

您混淆了一些概念。

这里有太多要解释的东西，所以我（非常粗略地）整理了你想要的代码补丁。我建议你把它和你自己的放在一起，看看我做了什么不同的事情。

[http://jsfiddle.net/wtxK8/2](http://jsfiddle.net/wtxK8/2)

有几件事，您不应该从路由器中初始化 Backbone.history。你的'init'应该看起来更像这样

```
 $(function () {
        window.app = new App();
        window.appView = new AppView({el:document});
        Backbone.history.start({ pushState: true });
      }); 
```

这是设置一个“包装器”视图，而不是包含整个页面。此外，您的路由器中的逻辑太多了。尝试仅将路由器用于路由。经过我的快速重新考虑，您的路由器仅包含以下内容：

```
 var App = Backbone.Router.extend({
        routes: {
          "": "index",
          "accommodation/:id": "show"
        },
        show: function (id) {
          var model = window.appView.accommodationList.get(id);
          window.appView.detailView.setModel(model);
        }
      }); 
```

（`AppView`我现在为你写的所有这些初始化工作。

```
 var AppView = Backbone.View.extend({
        initialize : function(){
          this.detailView = new DetailView({ model: new AccommodationItem({ id: 1 }) });
          $("#detail").append(this.detailView.el);
          this.accommodationList = new AccommodationList();
          this.accommodationListView = new AccommodationListView({ collection: this.accommodationList });
          $("#app").append(this.accommodationListView.el);
          this.fetchCollections();
        },
        fetchCollections: function () {
          var items = [
            { id: 1, description: "item one" },
            { id: 2, description: "item two" },
            { id: 3, description: "item three" }
          ];
          this.accommodationList.reset(items);
        }
      }); 
```

即使在我重新考虑之后，它仍然远非最佳，但我已经提供了所有这些来帮助你的学习之旅:)

然后，我建议您逐步遵循一些在线教程，以便您可以更好地设置应用程序的结构。

祝你好运，请务必查看[http://jsfiddle.net/wtxK8/2](http://jsfiddle.net/wtxK8/2)以查看它是否正常工作。

**编辑：**我没有解决你的第二个问题。问题 1 有足够的工作让你忙碌。如果以后有更多时间，我会进一步提供帮助。

# mysql - 选择适合时间表mysql的用户

> ID：15291416
> 
> 赞同：1
> 
> 时间：2013-03-08T10:08:05.040
> 
> 标签：mysql, select, timetable

我需要选择所有“适合”他们工作时间表的用户。

MySQL **时间表中的表：**

```
user_id                           PRIMARY
day_number(0-sunday 6-saturday)   PRIMARY (one user - one day)
start                             start worktime 
end                               end worktime 
```

示例用户：

```
user_id    = 1
day_number = 1
start      = 10:00
end        = 18:00

user_id    = 1
day_number = 2
start      = 12:00
end        = 18:00

user_id    = 1
day_number = 3
start      = 14:00
end        = 16:00 
```

现在我想选择**从 1(Monday) 到 3(Wednesday) 从 14:00 到 16:00**工作的每个用户。应包括示例用户（ID 为 1）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:24:53.170

试试这个查询

```
SELECT * 
FROM  `Timetable` 
WHERE day_number between 
 1 and 3 
AND TIME_TO_SEC( start ) <= TIME_TO_SEC(  '14:00' ) 
AND TIME_TO_SEC( end ) >= TIME_TO_SEC(  '16:00' ) 
```

或者

```
SELECT * 
FROM  `Timetable` 
WHERE day_number in (1,2,3 )
AND TIME_TO_SEC( start ) <= TIME_TO_SEC(  '14:00' ) 
AND TIME_TO_SEC( end ) >= TIME_TO_SEC(  '16:00' ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:14:32.660

```
SELECT user_id
FROM   my_table
  NATURAL JOIN (SELECT 1 day_number UNION ALL SELECT 2 UNION ALL SELECT 3) days
  JOIN (SELECT MAKETIME(14,0,0) start, MAKETIME(16,0,0) end) times
    ON my_table.start <= times.start
   AND my_table.end   >= times.end
GROUP BY user_id
HAVING   COUNT(DISTINCT my_table.day_number) = 3 -- number of days in range 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/31660/2/0)上查看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:21:49.807

**试试下面的代码：**

```
Select * from Timetable
Where day_number>=1 and day_number <=3 And
hour(start) >= 12 and hour(end)<= 16 
```

# php - 移动主机后的代码错误：mysql_fetch_array() 期望参数 1 是资源，布尔值在

> ID：15291421
> 
> 赞同：-2
> 
> 时间：2013-03-08T10:08:21.430
> 
> 标签：php, html, mysql, boolean, hosting

所以我已经搬到了一个新的主机（从一个免费主机）到 Crazy Domains，一切似乎都很好，但一些代码似乎正在播放。

做了一些研究，它似乎是 fetch 数组。现在，我迷失了解决方案。

在转移到 Crazydomain 托管之前，整个网站都在运行。

这是一条错误消息：

> “警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在第 11 行的 /home/lgbtrada/public_html/login.php 中给出”

代码：

```
 <?
session_start();
include("config.php");
include("clean.php");
$login = clean($_GET[login]);
if(isset($_SESSION[usr_name]) && isset($_SESSION[usr_level]) && $login!=logout)
echo('<meta http-equiv="refresh" content="0;url=main.php" />');
else {
$ip = $_SERVER['REMOTE_ADDR'];
$sqlcontent = mysql_query("select * from usr_config");
$content = mysql_fetch_array($sqlcontent);

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" href="css.css" type="text/css" />
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Usersystem &bull; <? echo("$content[site]");?></title>
</head>

<body>
<div align="center">
  <p>&nbsp;</p>
  <table width="50%" border="1">
    <tr>
      <td><div align="center"><? echo("$content[site]");?> UserSystem </div></td>
    </tr>
    <tr>
      <td>
      <? if($login!=login){ ?>
      <div align="center"><form method="post" action="admin.php?login=login">
        Your Username:<br />
              <input type="text" name="username" />
              <br />
          <br />
          Password:<br />
          <input type="password" name="password" />
          <br />
          <br />
          <input type="hidden" name="ip" value="<? echo("$ip");?>" />
          <input type="submit" value="Login" />
    <? if($content[pwd]==1){ ?><br /><a href="lostpw.php">Forgot Password?</a> <? } ?><br />
    <a href="register.php">Register</a></form></div>
      <? } 
      elseif($login==login)
      {
      $username = clean($_POST[username]);
      $password = md5($_POST[password]);
      $date = date("Y-m-d");
      $time = date("H:i:s");
      $sql = mysql_query("select * from usr_users where username = '$username' AND password = '$password'");
      $check = mysql_num_rows($sql);
      if($check!=1)
      {
      echo("Invalid Username or Password!");
      echo('<meta http-equiv="refresh" content="1;url=admin.php" />');
      $success = "Failed";
      if($content[loginlog]==1)
      $sqllog = mysql_query("insert into usr_logs(user, ip, time, date, success) values('$username', '$ip', '$time', '$date', '$success')");
      }
      else
      {
      $user = mysql_fetch_array($sql);
      $_SESSION[usr_name] = $user[username];
      $_SESSION[usr_level] = $user[level];
      $_SESSION[usr_ip] = $ip;
      $success = "Success";
      echo("Logged in as $username, Now redirecting..");
      echo('<meta http-equiv="refresh" content="1;url=main.php" />');
      if($content[loginlog]==1)
        $sqllog = mysql_query("insert into usr_logs(user, ip, time, date, success) values('$username', '$ip', '$time', '$date', '$success')");
      }
      }
      if($login==logout)
      {
      session_unset();
      session_destroy();
      echo("You are now logged out!");
      }
      ?></td>
    </tr>
    <tr>
      <td><? if($content[loginlog]==1){ ?>Logged: Your IP: <? echo("<b>$ip</b>");?><? } else echo("Your IP was NOT logged");?></td>
    </tr>
  </table>
  <? } ?>
</div>
</body>
</html> 
```

使用我们的新闻系统，它会返回这个；"'; echo stripslashes( $myrow['title'] ); echo ''; echo ' '; echo stripslashes( $myrow['text1'] ); echo '

'; 回声“”；回声''; echo ''.$myrow["reporter"].' | '.$myrow["dtime"].' | 评论 | '.$myrow["views"].' 视图'; }//循环结束？>”

新闻显示代码：

```
<?php    
// load the configuration file.    
include("config.php");    
        //load all news from the database and then OREDER them by newsid    
        //you will notice that newlly added news will appeare first.    
        //also you can OREDER by (dtime) instaed of (news id)    
        $result = mysql_query("SELECT * FROM news ORDER BY newsid DESC LIMIT 7",$connect);    
        //lets make a loop and get all news from the database    
        while($myrow = mysql_fetch_assoc($result))    
             {//begin of loop    
               //now print the results:    
               echo '<h2>';    
               echo stripslashes( $myrow['title'] );    
               echo '</h2>';    
               echo '<p>';    
               echo stripslashes( $myrow['text1'] );    
               echo '</p>';    
               echo "<br />";    
               echo '<a href="https://twitter.com/share" class="twitter-share-button" ata-url="http://www.mylasuni.com/read_more.php?id='.$myrow["newsid"].'" data-text="'.$myrow["title"].'" data-via="mylasuni" data-related="mylasuni">Tweet</a>';    
               echo '<hr>
                            <span style="float:right;"><strong><a href="profile.php?user='.$myrow["reporter"].'">'.$myrow["reporter"].'</a></strong> | '.$myrow["dtime"].' | <a href="read_more.php?id='.$myrow["newsid"].'">Comment</a> | '.$myrow["views"].' view(s)</span><br><hr>';   

             }//end of loop    
?> 
```

看了布尔参数和一些 tuts，任何其他可以帮助我的文章你知道吗？请帮我解决这个问题！这个网站是有充分理由的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:18:11.367

看起来查询返回一个空结果。检查它是否正确连接到数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:09:38.350

免责声明：您不应该使用`mysql_`函数，因为出于商品原因，自 PHP 5.5.0 起已弃用它（请参阅[PHP 文档](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)）。

无论如何，您的查询返回错误。确保 ：

1.  您已连接到数据库
2.  您的 SQL 查询中的字段和列是正确的：

`$result = mysql_query('SELECT * FROM news ORDER BY newsid DESC LIMIT 7',$connect);`

```
if($result)
{
    while($myrow = mysql_fetch_assoc($result)) 
    //do stuff
}   
else error_log(mysql_error()); //Or echo, print or whatever 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:50:43.813

为什么你不能运行简单的调试，而不是使用 Stack Overflow。在执行数据库相关操作时检查查询或放置异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T10:39:37.023

您的查询（**$sqlcontent**）失败（*返回 false*），因此没有产生有效的查询资源。使用来查看错误，Either This，

```
$sqlcontent = mysql_query("select * from usr_config") or die($myQuery."<br/><br/>".mysql_error()); 
```

或者使用这个

```
echo "select * from usr_config";exit;
$sqlcontent = mysql_query("select * from usr_config"); 
```

并执行脚本，复制打印在浏览器上的查询并在 mysql 查询窗口中运行。

# node.js - 用于 nodeJS 开发的 CoffeeScript 源映射

> ID：15291424
> 
> 赞同：14
> 
> 时间：2013-03-08T10:08:33.760
> 
> 标签：node.js, coffeescript, source-maps

现在 CoffeeScript 支持新的 Source Map 热点，我想知道我是否不仅可以在我的浏览器中使用源映射，还可以在开发我的 nodeJS 应用程序时在命令行上使用。

我希望 JS 编译器给我更多有用的错误跟踪，其中的行实际上与我的咖啡脚本文件匹配，而不是编译的 JS 文件。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-09T05:19:01.547

[source-map-support](https://github.com/evanw/node-source-map-support)模块执行此操作，只需安装该模块并将其放在代码的顶部：

```
require('source-map-support').install() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T08:43:19.280

现在使用 CoffeeScript 1.6.2，如果您使用命令运行您的应用程序，它只会“工作” `coffee`:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-01T20:01:59.067

在 coffee-script 获得对 require() 的更好支持之前，试试这个： [https ://npmjs.org/package/coffee-script-mapped](https://npmjs.org/package/coffee-script-mapped)

# javascript - 如何使用 CSS 隐藏图像按钮不打印？

> ID：15291427
> 
> 赞同：2
> 
> 时间：2013-03-08T10:08:42.973
> 
> 标签：javascript, html, css, printing

我的网页（php html）中有一个“打印”按钮，我不希望它与我的数据一起打印。我可以用 CSS 做吗？还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T10:12:06.030

是的，您可以使用 CSS，尽管仅支持 CSS3 的浏览器。

但它很简单：

```
 @media print {
    …
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:10:36.297

为按钮分配一个 id(buttonId) 例如：`id="buttonId"` 然后在 css 中：

```
#buttonId
{
    display:none;
}

<link rel="stylesheet" href="print.css" type="text/css" media="print" /> 
```

只需使用上面的 css 文件即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T10:11:33.540

只需创建多个样式表

```
<style type="text/css" media="all"> @import "nucss2.css";</style>
<link rel="stylesheet" type="text/css" media="print" href="print.css" /> 
```

看看

> 媒体=“打印”

# ruby-on-rails - heroku db:pull 导致 TypeError

> ID：15291434
> 
> 赞同：0
> 
> 时间：2013-03-08T10:09:17.207
> 
> 标签：ruby-on-rails, ruby, heroku

运行时`heroku db:pull`，我立即看到此错误：

```
Failed to connect to database:
  Sequel::DatabaseConnectionError -> TypeError: wrong argument type nil (expected Hash) 
```

即使添加`--debug`标志也不会显示任何额外内容。

*   heroku heroku-toolbelt/2.35.0 (x86_64-darwin10.8.0) ruby​​/1.9.3
*   水龙头 0.3.24
*   红宝石 2.0.0-p0
*   导轨 4.0.0.beta1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:12:37.197

您的开发数据库是否正确设置？例如，您可以开始`rails console`并运行查询吗？

# xml - 读取大型 XML 文档以在 Powershell 中生成 XML 节点数组？

> ID：15291441
> 
> 赞同：0
> 
> 时间：2013-03-08T10:09:46.493
> 
> 标签：xml, sql-server-2008, powershell

我有加载 XML 文档的代码，执行 a`$xmlDoc.SelectNodes($XPath)`然后`foreach($node in $nodes)`将 XML 作为字符串插入表中。

此代码适用于 ca 的文件。100KB，有 10 条记录。

但是，我有一个文件是 ca. 100MB 和 ca。50k 条记录和代码只是挂起`$xmlDoc =[xml](gc $xmlpath)`（并使用所有可用的系统内存）。有没有更好的方法来生成我的数组`$nodes`而不首先解析整个 XML 文档？

```
# Loads xml document
$xmlpath = $filepath
$xmlDoc =[xml](gc $xmlpath)
$nodes = $xmlDoc.SelectNodes('//root') #One element per record in SQL

...

$SqlQuery = @"
INSERT INTO {0} VALUES ({1})
"@

....

foreach($node in $nodes) 
{ 
$StringWriter = New-Object System.IO.StringWriter 
$XmlWriter = New-Object System.XMl.XmlTextWriter $StringWriter 
$XmlWriter.Formatting = "None" 
$XmlWriter.Flush() 
$StringWriter.Flush() 
$node.WriteTo($XmlWriter) 
#data content (for this quote)
$Pxml = "`'"+$StringWriter.ToString()+"`'"

#Write to database
$SqlCmd = New-Object System.Data.SqlClient.SqlCommand
$SqlCmd.CommandText = [string]::Format($sqlquery, $tableName, $Pxml)
$SqlCmd.Connection = $SqlConnection
$SqlCmd.ExecuteScalar()
} 
```

XML 文档具有以下结构：

```
<xml>
  <root>
   ...
  </root>
  <root>
   ...
  </root>
</xml> 
```

结果字符串的形式为：

```
<root>
 ...
</root> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T11:14:19.097

使用[此链接](http://blogs.technet.com/b/stephap/archive/2009/05/27/choking-on-very-large-xml-files.aspx?Redirected=true)作为基础，尝试下面的代码。`$object`应该包含你的根对象

```
$object= @()
type "$filepath" | %{
  if($_.trim() -eq "<root>") {
    $object= @()
    $object+= $_
  }
  elseif($_.trim() -eq "</root>"){
    $object+= $_
    #call the code within your foreach($node in $nodes) {} section here
  } else {
    $object+= $_
  }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:33:45.413

据我所知，XML 解析需要完整的文件在内存中。尝试使用更有效的 .Net 方法来阅读内容。以下应该运行得更快并且可能使用更少的内存，因为它将内容保存为字符串数组，而不是像`Get-Content`这样的字符串对象数组。

```
# Loads xml document

# Get aboslute path
$xmlpath = (Resolve-Path $filepath).Path
# Get xml
$xmlDoc = [xml]([IO.File]::ReadAllLines($xmlpath)) 
```

一个更快的解决方案是将强制转换为 xml-document 并将其解析为纯文本。我仍然会避免`Get-Content`，因为它很慢。像这样的东西可以工作：

```
# Get aboslute path
$xmlpath = (Resolve-Path $filepath).Path

# Get streamreader 
$reader = [io.file]::OpenText($xmlpath)
$currentroot = @()

# Read every line
while (($line = $reader.ReadLine()) -ne $null) {
    if ($line.Trim() -eq "<root>") {
        $currentroot.Clear()
        $currentroot += $line
    } else if ($line.Trim() -eq "</root>") {
        $currentroot += $line

        #process root element (by extracting the info from the strings in $currentroot)

        $currentroot.Clear()
    } else {
        $currentroot += $line
    }
} 
```

# javascript - 谷歌地图接收多边形坐标

> ID：15291443
> 
> 赞同：0
> 
> 时间：2013-03-08T10:09:58.450
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers, polygon

我用这个例子在谷歌地图上绘制多边形：

[http://nettique.free.fr/gmap/toolbar.html](http://nettique.free.fr/gmap/toolbar.html)

绘制多边形后，我想读取我创建的多边形的坐标。因此，在文件`mapToolbar.js`（这是来自 nettique.free.fr 的上述示例的一部分）中调用的 javascript 函数`stopediting`（当我单击“手”按钮时运行）。

所以，我读取这些坐标的解决方案是我读取坐标的某种循环：

```
MapToolbar.features.shapeTab.shape_1.latLngs.b[0].b[i].ib - latitude

MapToolbar.features.shapeTab.shape_1.latLngs.b[0].b[i].jb - longitude 
```

它工作得很好，但我的问题是不时将后缀`ib`和`jb`更改为例如`Ya`and `Za`。我希望你知道这意味着什么。我必须更改我的代码；/但我不想！;)

你知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:34:17.273

MapToolbar.features.shapeTab.shape_1 是一个[`google.maps.Polygon`](https://developers.google.com/maps/documentation/javascript/reference?hl=en#Polygon)-instance。

用于`getPath()`检索路径和`forEach`循环路径的方法：

```
 MapToolbar.features.shapeTab.shape_1.getPath().forEach(function(latLng,index){
    console.log('shape_1',index,latLng.toString());
  }); 
```

# javascript - 更改 div 的内部 html 并向其添加图像

> ID：15291446
> 
> 赞同：0
> 
> 时间：2013-03-08T10:10:08.983
> 
> 标签：javascript, jquery

我有一个问题。当我尝试更改 div 的内部 html 并将 img 源放入该 div 的 innerhtml 时，它不会显示图像

我的 JavaScript 代码：

```
var sliderimg = document.getElementById('abc_'+obj).src;
$("#event-img").html("<img src=sliderimg>"); 
```

当我尝试提醒它时，它会给我对象对象错误。

有人可以建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T10:12:07.180

试试这个

```
var sliderimg = document.getElementById('abc_'+obj).src;
$("#event-img").html("<img src='"+sliderimg+"' />"); 
```

您需要转义引号以确保将 sliderimg 视为变量而不是字符串。你错过了一个关闭标签

# mootools - 如何使用 mootools 删除列表 (ul)

> ID：15291447
> 
> 赞同：0
> 
> 时间：2013-03-08T10:10:09.187
> 
> 标签：mootools

我正在使用 mootoolsv1.3.2。使用 mootools 如何从以下代码中删除 Ul。我现在的代码：

```
<ul class="clean menu" id="topics">
    <li class="drop png">
        <a cat="ntech" class="sec_accnt" href="javascript:void(0);" name="&amp;lid=choose_category_billing" rel="1" style="BACKGROUND-POSITION: 13px -164px">Billing</a>
    </li>
    <li class="drop png">
        <div class="add">
            <span href="#" id="tv" style="BACKGROUND-POSITION: 13px 9px">TV</span>
        </div>
        <ul class="clean menu sub">
            <li>
                <a cat="tech" class="sec_tv" href="javascript:void(0);" name="&amp;lid=choose_category_tv_fios" rel="1">FiOS TV</a>
            </li>
            <li class="last" style="margin-bottom:6px;">
                <a cat="tech" class="sec_tv_1" href="javascript:void(0);" name="&amp;lid=choose_category_tv_direct" rel="1">DIRECTV</a>
            </li>
        </ul>
    </li>
</ul> 
```

应该是这样的：

```
<ul class="clean menu" id="topics">
    <li class="drop png">
        <a cat="ntech" class="sec_accnt" href="javascript:void(0);" name="&amp;lid=choose_category_billing" rel="1" style="BACKGROUND-POSITION: 13px -164px">Billing</a>
    </li>
    <li class="drop png">
        <a cat="ntech" class="sec_tv_fios" href="javascript:void(0);" name="&amp;lid=choose_category_tv" rel="1" style="BACKGROUND-POSITION: 13px -164px">TV</a>
    </li>   
</ul> 
```

更改应基于标志变量的值。

```
If flag=0{
   code remains same
}else{
   code changes as mentioned.
} 
```

有人请帮助解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:26:27.607

确保子菜单是“主题”的子菜单的安全方式

```
$('topics').getElements('ul.sub').destroy(); 
```

destroy() 将确保 DOM 元素将被 GC:ed

# php - 在将图像链接更新到数据库之前验证图像链接是否真的是图像链接

> ID：15291448
> 
> 赞同：0
> 
> 时间：2013-03-08T10:10:12.293
> 
> 标签：php

如果它真的是使用 php 的图像链接，我们如何验证图像链接？

我有一个网站，用户可以在其中保存图像链接，但我想在将其添加到数据库之前检查该链接，并且我只想接受 jpg 和 png 文件类型。

认为：`http://sphotos-a.ak.fbcdn.net/hphotos-ak-ash3/65952_491770220880511_1455944784_n.jpg`

如何验证？

只是想知道是否有办法:)

提前致谢

**谢谢大家的帮助**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:18:22.787

您可以使用 PHP 函数[get_headers](http://php.net/manual/en/function.get-headers.php)来检查文件的内容类型。

虽然您可以伪造标题（例如使用 PHP 的 header() 函数），但对于基本验证，这应该可以工作。

```
$headers = get_headers("http://sphotos-a.ak.fbcdn.net/hphotos-ak-ash3/65952_491770220880511_1455944784_n.jpg", 1);
if ($headers["Content-Type"] == "image/png" or $headers["Content-Type"] == "image/jpeg") {
    // It is a PNG or JPG
} 
```

此外，可能（但我不完全确定）服务器返回 Content-Type 的变体，如“image/jpg”或“img/png”。你必须玩弄它，直到你涵盖所有的可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:12:08.433

您可以尝试使用 CURL 检索图片并检查标题以查看 Content-Type。如果它与图片匹配，您可以使用 imageMagick 复制图片或将链接保存到数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:23:56.603

您可以仅检查标题以查看**Content-Type**，这可以确保您只有文件类型不存在或无错误文件。我也很想知道是否可以验证（存在）URL 或图像 url？

# c# - JSON反序列化为对象

> ID：15291451
> 
> 赞同：1
> 
> 时间：2013-03-08T10:10:21.810
> 
> 标签：c#, .net, json, serialization, windows-phone-7.1

我正在尝试反序列化以下字符串

```
{
    "city": [
        {
            "city_id": "31",
            "City_Name": "Bergisch Gladbach",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340553787.JPG"
        },
        {
            "city_id": "33",
            "City_Name": "Bielefeld",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340553877.JPG"
        },
        {
            "city_id": "30",
            "City_Name": "Augsburg",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340553748.JPG"
        },
        {
            "city_id": "27",
            "City_Name": "Düsseldorf",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1339865688.JPG"
        },
        {
            "city_id": "29",
            "City_Name": "Aachen",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340553717.JPG"
        },
        {
            "city_id": "23",
            "City_Name": "Jena",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1339000040.JPG"
        },
        {
            "city_id": "12",
            "City_Name": "Aachen",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1336759859.JPG"
        },
        {
            "city_id": "25",
            "City_Name": "Berlin",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1339865665.JPG"
        },
        {
            "city_id": "26",
            "City_Name": "Essen",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1339865677.JPG"
        },
        {
            "city_id": "14",
            "City_Name": "Bergisch Gladbach",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1336759880.JPG"
        },
        {
            "city_id": "34",
            "City_Name": "Bochum",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340553912.JPG"
        },
        {
            "city_id": "21",
            "City_Name": "Frankfurt am Main",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1337670208.JPG"
        },
        {
            "city_id": "20",
            "City_Name": "All",
            "City_Image": "http://beta.preis-ente.de/admin/1"
        },
        {
            "city_id": "35",
            "City_Name": "Bonn",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340553958.JPG"
        },
        {
            "city_id": "36",
            "City_Name": "Bottrop",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340553996.JPG"
        },
        {
            "city_id": "37",
            "City_Name": "Braunschweig",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340554029.JPG"
        },
        {
            "city_id": "38",
            "City_Name": "Bremen",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340554080.JPG"
        },
        {
            "city_id": "39",
            "City_Name": "Bremerhaven",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340554112.JPG"
        },
        {
            "city_id": "40",
            "City_Name": "Chemnitz",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340554147.JPG"
        },
        {
            "city_id": "41",
            "City_Name": "Cottbus",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340554189.JPG"
        },
        {
            "city_id": "42",
            "City_Name": "Darmstadt",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340554234.JPG"
        },
        {
            "city_id": "43",
            "City_Name": "Dessau ",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340554279.JPG"
        },
        {
            "city_id": "44",
            "City_Name": "Dortmund",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340554332.JPG"
        },
        {
            "city_id": "45",
            "City_Name": "Duisburg",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340554432.JPG"
        },
        {
            "city_id": "46",
            "City_Name": "Düsseldorf",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340554469.JPG"
        },
        {
            "city_id": "47",
            "City_Name": "Erfurt",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340554505.JPG"
        },
        {
            "city_id": "48",
            "City_Name": "Erlangen",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340554546.JPG"
        },
        {
            "city_id": "49",
            "City_Name": "Essen",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340554585.JPG"
        },
        {
            "city_id": "50",
            "City_Name": "Essen",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340554585.JPG"
        },
        {
            "city_id": "51",
            "City_Name": "Flensburg ",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340554625.JPG"
        },
        {
            "city_id": "52",
            "City_Name": "Frankfurt am Main",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340554667.JPG"
        },
        {
            "city_id": "53",
            "City_Name": "Freiburg im Breisgau",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340554703.JPG"
        },
        {
            "city_id": "54",
            "City_Name": "Fürth",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340554740.JPG"
        },
        {
            "city_id": "55",
            "City_Name": "Gelsenkirchen",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340554783.JPG"
        },
        {
            "city_id": "56",
            "City_Name": "Gera",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340554829.JPG"
        },
        {
            "city_id": "57",
            "City_Name": "Görlitz ",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340554864.JPG"
        },
        {
            "city_id": "58",
            "City_Name": "Göttingen",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340554925.JPG"
        },
        {
            "city_id": "59",
            "City_Name": "Hagen (Westfalen)",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340554969.JPG"
        },
        {
            "city_id": "60",
            "City_Name": "Halle (Saale)",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340555012.JPG"
        },
        {
            "city_id": "61",
            "City_Name": "Hamburg",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340555055.JPG"
        },
        {
            "city_id": "62",
            "City_Name": "Hamm",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340555097.JPG"
        },
        {
            "city_id": "63",
            "City_Name": "Hannover",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340555143.JPG"
        },
        {
            "city_id": "64",
            "City_Name": "Heidelberg",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340555192.JPG"
        },
        {
            "city_id": "65",
            "City_Name": "Heilbronn",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340555550.JPG"
        },
        {
            "city_id": "66",
            "City_Name": "Herne",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340555598.JPG"
        },
        {
            "city_id": "67",
            "City_Name": "Hildesheim",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340555635.JPG"
        },
        {
            "city_id": "68",
            "City_Name": "Ingolstadt",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340555774.JPG"
        },
        {
            "city_id": "69",
            "City_Name": "Jena",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340555818.JPG"
        },
        {
            "city_id": "70",
            "City_Name": "Kaiserslautern ",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340555863.JPG"
        },
        {
            "city_id": "71",
            "City_Name": "Karlsruhe",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340555908.JPG"
        },
        {
            "city_id": "72",
            "City_Name": "Kassel",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340555942.JPG"
        },
        {
            "city_id": "73",
            "City_Name": "Kiel",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340555977.JPG"
        },
        {
            "city_id": "74",
            "City_Name": "Koblenz",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340556039.JPG"
        },
        {
            "city_id": "75",
            "City_Name": "Köln",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340556080.JPG"
        },
        {
            "city_id": "76",
            "City_Name": "Krefeld",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340556125.JPG"
        },
        {
            "city_id": "77",
            "City_Name": "Leipzig",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340556161.JPG"
        },
        {
            "city_id": "78",
            "City_Name": "Leverkusen",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340556197.JPG"
        },
        {
            "city_id": "79",
            "City_Name": "Lübeck",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340556239.JPG"
        },
        {
            "city_id": "80",
            "City_Name": "Ludwigshafen am Rhein",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340556278.JPG"
        },
        {
            "city_id": "81",
            "City_Name": "Magdeburg",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340556325.JPG"
        },
        {
            "city_id": "82",
            "City_Name": "Mainz",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340557473.JPG"
        },
        {
            "city_id": "83",
            "City_Name": "Mannheim",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340557533.JPG"
        },
        {
            "city_id": "84",
            "City_Name": "Moers",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340557586.JPG"
        },
        {
            "city_id": "85",
            "City_Name": "Mönchengladbach",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340557637.JPG"
        },
        {
            "city_id": "86",
            "City_Name": "München",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340557760.JPG"
        },
        {
            "city_id": "87",
            "City_Name": "Neuss",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340557855.JPG"
        },
        {
            "city_id": "88",
            "City_Name": "Nürnberg",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340557896.JPG"
        },
        {
            "city_id": "89",
            "City_Name": "Oberhausen",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340557934.JPG"
        },
        {
            "city_id": "90",
            "City_Name": "Offenbach am Main",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340557984.JPG"
        },
        {
            "city_id": "91",
            "City_Name": "Oldenburg",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340558036.JPG"
        },
        {
            "city_id": "92",
            "City_Name": "Osnabrück",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340558082.JPG"
        },
        {
            "city_id": "93",
            "City_Name": "Paderborn",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340558119.JPG"
        },
        {
            "city_id": "94",
            "City_Name": "Pforzheim",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340558158.JPG"
        },
        {
            "city_id": "95",
            "City_Name": "Plauen ",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340558196.JPG"
        },
        {
            "city_id": "96",
            "City_Name": "Potsdam",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340558232.JPG"
        },
        {
            "city_id": "97",
            "City_Name": "Recklinghausen",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340558279.JPG"
        },
        {
            "city_id": "98",
            "City_Name": "Regensburg",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340558320.JPG"
        },
        {
            "city_id": "99",
            "City_Name": "Remscheid",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340558369.JPG"
        },
        {
            "city_id": "100",
            "City_Name": "Rostock",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340558482.JPG"
        },
        {
            "city_id": "101",
            "City_Name": "Saarbrücken",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340558527.JPG"
        },
        {
            "city_id": "102",
            "City_Name": "Salzgitter",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340558573.JPG"
        },
        {
            "city_id": "103",
            "City_Name": "Schwerin ",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340558621.JPG"
        },
        {
            "city_id": "104",
            "City_Name": "Siegen",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340558671.JPG"
        },
        {
            "city_id": "105",
            "City_Name": "Solingen",
            "City_Image": "files/city/1340558822.jpg"
        },
        {
            "city_id": "106",
            "City_Name": "Stuttgart",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340558759.JPG"
        },
        {
            "city_id": "107",
            "City_Name": "Trier",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340558803.JPG"
        },
        {
            "city_id": "108",
            "City_Name": "Ulm",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340558854.JPG"
        },
        {
            "city_id": "109",
            "City_Name": "Wiesbaden",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340558898.JPG"
        },
        {
            "city_id": "110",
            "City_Name": "Wilhelmshaven ",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340558939.JPG"
        },
        {
            "city_id": "111",
            "City_Name": "Witten",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340558974.JPG"
        },
        {
            "city_id": "112",
            "City_Name": "Wolfsburg",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340559036.JPG"
        },
        {
            "city_id": "113",
            "City_Name": "Wuppertal",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340559075.JPG"
        },
        {
            "city_id": "114",
            "City_Name": "Würzburg",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340559126.JPG"
        },
        {
            "city_id": "115",
            "City_Name": "Zwickau",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340559178.JPG"
        },
        {
            "city_id": "116",
            "City_Name": "Dresden",
            "City_Image": "http://beta.preis-ente.de/admin/files/city/1340615331.JPG"
        }
    ],
    "success": "true"
} 
```

使用下面的代码：

```
public static List<T> Deserialize<T>(string json)
        {
            List<T> obj = new List<T>();
            MemoryStream ms = new MemoryStream(Encoding.Unicode.GetBytes(json));
            System.Runtime.Serialization.Json.DataContractJsonSerializer serializer = new System.Runtime.Serialization.Json.DataContractJsonSerializer(obj.GetType());
            obj = (List<T>)serializer.ReadObject(ms);
            ms.Close();
            ms.Dispose();
            return obj;
        }

[DataContract]
    public class CityList
    {
        public CityList()
        {
            this.city_id = string.Empty;
            this.City_Image = string.Empty;
            this.City_Name = string.Empty;
        }

        #region city id
         [DataMember]
        public string city_id { get; set; }
        #endregion

        #region City Name
        [DataMember]
        public string City_Name { get; set; }
        #endregion

        #region City Image
         [DataMember]
        public string City_Image { get; set; }
        #endregion
    } 
```

当我调用函数 Deserialize>(jsonString) 我该如何解决这个问题？我收到以下错误：

```
 Error: InvalidCastException was Unhandled

  at ListPickerSample.Common.Utility.Deserialize[T](String json)
   at ListPickerSample.MainPage.client_DownloadStringCompleted(Object sender, DownloadStringCompletedEventArgs e)
   at System.Net.WebClient.OnDownloadStringCompleted(DownloadStringCompletedEventArgs e)
   at System.Net.WebClient.DownloadStringOperationCompleted(Object arg)
   at System.Reflection.RuntimeMethodInfo.InternalInvoke(RuntimeMethodInfo rtmi, Object obj, BindingFlags invokeAttr, Binder binder, Object parameters, CultureInfo culture, Boolean isBinderDefault, Assembly caller, Boolean verifyAccess, StackCrawlMark& stackMark)
   at System.Reflection.RuntimeMethodInfo.InternalInvoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, StackCrawlMark& stackMark)
   at System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters)
   at System.Delegate.DynamicInvokeOne(Object[] args)
   at System.MulticastDelegate.DynamicInvokeImpl(Object[] args)
   at System.Delegate.DynamicInvoke(Object[] args)
   at System.Windows.Threading.DispatcherOperation.Invoke()
   at System.Windows.Threading.Dispatcher.Dispatch(DispatcherPriority priority)
   at System.Windows.Threading.Dispatcher.OnInvoke(Object context)
   at System.Windows.Hosting.CallbackCookie.Invoke(Object[] args)
   at System.Windows.Hosting.DelegateWrapper.InternalInvoke(Object[] args)
   at System.Windows.RuntimeHost.ManagedHost.InvokeDelegate(IntPtr pHandle, Int32 nParamCount, ScriptParam[] pParams, ScriptParam& pResult) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:27:19.563

是的，您的`City`对象与您的 JSON 字符串不匹配。

这是一个工作版本：

```
public class CityList
{
    public List<City> city { get; set; }
    public bool success { get; set; }
}

public class City
{
    public string city_id { get; set; }
    public string City_Name { get; set; }
    public string City_Image { get; set; }
}

public class Program
{
    private static void Main(string[] args)
    {
        var input = YOUR_STRING;

        DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(CityList));
        using (var ms = new MemoryStream(Encoding.Unicode.GetBytes(input)))
        {
            var zz = serializer.ReadObject(ms);
        }
    }
} 
```

# jquery - jquery删除textarea重复行

> ID：15291454
> 
> 赞同：0
> 
> 时间：2013-03-08T10:10:24.937
> 
> 标签：jquery, textarea

我对 textarea 有问题，发现重复项。

```
<textarea name="listnumber" >
12345678
12345674
12345678
12345672
12345678
</textarea> 
```

我在使用 jquery 更改时自动删除重复项。结果会是这样

```
<textarea name="listnumber" >
12345678
12345674
12345672
</textarea> 
```

问题：如何删除文本区域中的重复条目。如上所示的预期结果

**编辑**

我有一个 name="listnumber" 的 textarea

我的源代码：

```
 <script type="text/javascript">
<!--
 $(document).ready(function() {
    $("textarea#listnumber").bind('input propertychange keyup cut paste',function(){
        text = $("textarea#listnumber").val()
        lines = $.unique(text.split(/\r|\r\n|\n/))
        count = lines.length
        $('input#totalnumber').val(count)
    });
});
-->
</script>
<form action="index.php" method="post">
    <ul>
        <li><label>List Of Number</label><textarea name="listnumber" id="listnumber" ></textarea></li>
        <li><label>Total Number</label><input type="text" name="totalnumber" readonly="readonly" /></li>
    </ul>
    <a onclick="submit();" href="#" >Send List</a>
</form> 
```

我希望 jquery 使用 $('textarea').change(function(){} 删除 textarea 内的重复项，但我不知道该怎么做。任何人请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T10:21:59.230

尝试将您的 textarea-text 拆分为数组： [Javascript: Convert textarea into an array](https://stackoverflow.com/questions/2299604/javascript-convert-textarea-into-an-array)

然后查找重复 [项在 JavaScript 数组中查找重复值的最简单方法](https://stackoverflow.com/questions/840781/easiest-way-to-find-duplicate-values-in-a-javascript-array)

顺便说一句：进行这项研究的时间：不到一分钟（包括写这篇文章）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:40:33.117

这可能对你有帮助：http: [//jsfiddle.net/Milian/Y3WLk/](http://jsfiddle.net/Milian/Y3WLk/)

```
$("#anchor").click(function(){
    var arr = $("#txtArea").val().split("\n");

    var arrDistinct = new Array();
     $(arr).each(function(index, item) {
         if ($.inArray(item, arrDistinct) == -1)
                    arrDistinct.push(item);
     });
    alert(arrDistinct);

}); 
```

# java - Java：独立任务的多进程

> ID：15291456
> 
> 赞同：0
> 
> 时间：2013-03-08T10:10:26.773
> 
> 标签：java, multithreading, multiprocessing

我的问题很简单：

我在 Ubuntu 上工作，我用 Java 编写了一个程序（使用 Eclipse IDE）。该程序不会在任何地方读取或写入任何内容，它只是进行大量计算并创建许多自制类的实例。程序的输出很简单：它在终端中写入A、B或C。（认为它是一个随机过程）

我必须重复运行程序，直到我得到 1000000 次 A 并计算我得到 B 和 C 的次数。我做到了，它有效，但它太慢了。

例如：输出为：“A:1000000 B:1012458 C:1458”

这是我需要你帮助的地方：

我想并行化程序。我尝试了多线程，但它没有更快地工作！所以，虽然每个模拟都是独立的，但我想进行多重处理。例如，我想创建 10 个进程并要求他们运行程序，直到 A 出现 100000 次。（所以我想要的 10 * 100000 = 1000000）问题是我需要知道 B 和 C 的总数，现在我得到了每个 10 的值。

我能怎么做？我尝试了 ProcessBuilder ( [http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html) ) 但我不明白它是如何工作的！

到目前为止，我唯一的想法是在终端中使用以下命令询问我的程序（A 直到 100000）10 次：“java Main & java Main & java Main & java Main & java Main & java Main & java Main & java Main & java Main & java Main" 但是我必须手动计算 B 和 C 出现的总和。我相信有更好的方法来做到这一点！我考虑过创建 10 个值为 (A)、B 和 C 的文件，然后读取所有文件并对其进行总结，仅对某个整数求和确实需要大量工作，不是吗？

谢谢转发，我正在等待帮助：D

ps：为了方便回答，假设我有一个名为“prog”的程序，它只接受代表 AI 想要达到的数量的 int 参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:19:21.533

在单台机器上，与多进程相比，使用多线程的并行处理效率更高。

然而，在单核/单 CPU 系统上运行时，并行处理只会带来很小的性能损失，但对于纯计算并没有性能优势。- 然而，当涉及多个慢速 IO 时，多线程毕竟可能会加快进程。

简而言之：多处理总是比多线程*慢。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:17:18.047

您可以尝试创建一个`prog`使用其中一种方法版本启动您的主类[`Runtime.exec(...)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29)。这样，您可以使用其[进程的 outputStream](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Process.html#getOutputStream%28%29)将每个进程计算的值传输到主程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T10:43:28.517

仅当您拥有多核 CPU 时，并行化才有意义。运行 java.lang.Runtime.availableProcessors() 以了解您应该运行多少线程。

然后，运行 10 批 100000 次重复与运行一批 1000000 次重复是不一样的，因为您的应用程序的内部状态正在发生变化，因此请考虑并行化是否适用于您的情况。

要知道 A、B 和 C 结果的总数，只需对所有线程使用 AtomicInteger。每次检查 A 的计数是否小于 1000000。

# javascript - AngularJS ng-repeat over json 查询

> ID：15291467
> 
> 赞同：0
> 
> 时间：2013-03-08T10:10:45.287
> 
> 标签：javascript, angularjs

我在一个项目中使用 AngularJS。在我看来，我重复了一些员工并将他们展示在屏幕上。那行得通，但我必须使用代码

```
<li ng-repeat="employee in employees.employee"> 
```

代替

```
<li ng-repeat="employee in employees"> 
```

为什么我不能直接访问员工以遍历不同的 json 对象？

我的项目代码片段：

控制器

```
Test.controller('EmployeeListController', function($scope, Employee) {
    $scope.employees = Employee.query();
}); 
```

HTML 视图

```
<ul>
    <li ng-repeat="employee in employees.employee">
        <a href="mailto:{{employee.email}}" title="{{employee.email}}">{{employee.firstName}} {{employee.lastName}} ({{employee.email}})</a>
    </li>
</ul> 
```

工厂

```
Test.factory('Employee', function ($resource) {
    return $resource('/TestServer/rest/employees/:employeeId', {}, {
        update: {method:'PUT'},
        query: {method:'GET', isArray:false}
    });
}); 
```

JSON 响应

```
{"employee":[{"created":null,"description":"TestDescription","email":"TestMail","firstName":"TestFirstName","id":"1","image":"TestImage.jpg","lastModification":null,"lastName":"TestLastName","phone":"121212121212"},{"created":null,"description":"TestDescription","email":"TestEmail","firstName":"TestFirstName","id":"2","image":"TestImage2.jpg","lastModification":null,"lastName":"TestLastName","phone":"2124343434"}]} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:15:39.920

中继器在阵列上重复。在你的回应中，你给了它一个对象。该数组实际上位于员工属性上（在您的 json 响应中，也因为 isArray: false）

# html - 选择框与 Superfish 菜单栏重叠

> ID：15291469
> 
> 赞同：0
> 
> 时间：2013-03-08T10:10:52.197
> 
> 标签：html, css, superfish

菜单栏是一个超级鱼 3 层菜单。菜单栏的css代码是：-

```
 /*** ESSENTIAL STYLES ***/
.sf-menu, .sf-menu * {
    margin:         0;
    padding:        0;
    list-style:     none;
}
.sf-menu {line-height:  1.0;}
.sf-menu ul {
    position:       absolute;
    top:            -999em;
    width:          11em; /* left offset of submenus need to match (see below) */
}
.sf-menu ul li {width:100%;}
.sf-menu li:hover {visibility:inherit; /* fixes IE7 'sticky bug' */}
.sf-menu li {
    float:          left;
    z-index:        9999;     #######Edited the Z-index here##########
    position:       relative;
}
.sf-menu a {display:block;position: relative;}
.sf-menu li:hover ul,
.sf-menu li.sfHover ul {
    left:           0;
    top:            2.5em; /* match top ul list item height */
    z-index:        99;
}
ul.sf-menu li:hover li ul,
ul.sf-menu li.sfHover li ul {top:-999em;}
ul.sf-menu li li:hover ul,
ul.sf-menu li li.sfHover ul {left:11em; /* match ul width */top:0;}
ul.sf-menu li li:hover li ul,
ul.sf-menu li li.sfHover li ul {top:-999em;}
ul.sf-menu li li li:hover ul,
ul.sf-menu li li li.sfHover ul {left:10em; /* match ul width */top: 0;}

/*** DEMO SKIN ***/
.sf-menu {float:left;margin-bottom: 1em;}
.sf-menu ul {box-shadow: 2px 2px 6px rgba(0,0,0,.2);}
.sf-menu a {
    border-left:    1px solid #fff;
    border-top:     1px solid #CFDEFF;
    padding:        .75em 1em;
    text-decoration:none;
}
.sf-menu a, .sf-menu a:visited  { /* visited pseudo selector so IE6 applies text colour*/
    color:          #13a;
}
.sf-menu li {background:#BDD2FF;}
.sf-menu li li {background:#AABDE6;}
.sf-menu li li li {background:#9AAEDB;}
.sf-menu li:hover, .sf-menu li.sfHover,
.sf-menu a:focus, .sf-menu a:hover, .sf-menu a:active {
    background:     #CFDEFF;
    outline:        0;
} 
```

选择框的 HTML 代码是：-

```
<select name="designation" id="designation" class=forCombobox>
<option value="">--Select--</option>
</select> 
```

forCombobox 的 CSS ： -

```
 .forCombobox
{
    font-family: Verdana;
    font-size: 11px;
    color: #000000;
    z-index:-1;
    border: 1px outset;
    border-color:#58585A;
} 
```

我已将 Z-index 设置为 9999 ...菜单栏仍然与选择框重叠。并且选择框没有设置 Z-index 。该怎么办...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T10:15:09.187

来自[w3schools.com](http://www.w3schools.com/cssref/pr_pos_z-index.asp)：

> z-index 属性指定元素的堆栈顺序。
> 
> 具有较大堆栈顺序的元素始终位于具有较低堆栈顺序的元素之前。
> 
> 注意：z-index 仅适用于定位元素（位置：绝对、位置：相对或位置：固定）。

# django - 分配前引用的Django错误局部变量'Person'

> ID：15291476
> 
> 赞同：0
> 
> 时间：2013-03-08T10:11:09.563
> 
> 标签：django

我正在尝试制作一个应用程序，宠物主人可以在其中创建自己的个人资料并上传宠物的照片。

当用户创建帐户或登录时，他会被重定向到配置文件。个人资料页面应显示他的信息，例如姓名，而不是我收到此错误。

```
UnboundLocalError at /profile/
local variable 'Person' referenced before assignment
Request Method: GET 
Request URL: /profile/ 
Django Version: 1.4.3 
Exception Type: UnboundLocalError 
Exception Value: local variable 'Person' referenced before assignment 

Traceback Switch to copy-and-paste view

C:\o\mysite\pet\views.py in Profile 

60\.  return render_to_response('profile.html', {'Person': Person}, context_instance=RequestContext(request)) 
```

问题是在views.py 链接到我的个人资料功能

我的观点.py

```
@login_required     
def Profile(request):
        if not request.user.is_authenticated():
            return HttpResponseRedirect('/login/')
        Person = request.user.get_profile
        return render_to_response('profile.html', {'Person': Person}, context_instance=RequestContext(request)) 
```

我的个人资料.html

```
{% if Person %}
<ul>
        <li>Name : {{Person.user}} </li>
</ul>
{% endif %} 
```

我的模型.py

```
from django.db import models
from django.db.models.signals import post_save
from django.contrib.auth.models import User

class Person(models.Model):
    user = models.OneToOneField(User)
    name = models.CharField(max_length=100)
    image = models.FileField(upload_to="images/",blank=True,null=True)

    def __unicode__(self):
        return self.name

class Pet(models.Model):
    Person = models.ForeignKey(Person)
    description = models.CharField(max_length=100)
    image = models.FileField(upload_to="images/",blank=True,null=True)

    def __unicode__(self):
        return self.description 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:17:54.903

尝试将 Person 放在 request.user.is_authenticated 的顶部。你忘了把'（）'放在get_profile

```
@login_required     
def Profile(request):
    Person = request.user.get_profile()
    if not request.user.is_authenticated():
        return HttpResponseRedirect('/login/')
    return render_to_response('profile.html', {
        'Person': Person
     }, context_instance=RequestContext(request)) 
```

# jquery - jquery添加点击事件困难

> ID：15291481
> 
> 赞同：0
> 
> 时间：2013-03-08T10:11:35.043
> 
> 标签：jquery, function, click, live

我是 Jquery 的新手，需要帮助解决以下问题：

我正在尝试将 Click Function 添加到现有的 li 元素（共享相同的类名），但尚未成功。

我的html如下：

```
<div class="ol_results" style=" display: inherit; width: 100%; top: 276px; left: 175px;">
<ul>
<li class="myorders">
<span id="Orderid" class="orderDetails">1</span>
<span id="orderDate" class="orderDetails">2012/12/20</span>
<span id="DispatchDate" class="orderDetails">Dispatched</span>
</li>
</ul>
</div> 
```

我的jQuery是：

```
$('.myorders').live('click', function () { alert("Clicked!") }); 
```

我错过了什么？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:19:29.537

使用 bind 而不是 live()

```
$('.myorders').bind('click', function () { 
  alert("Clicked!") 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:12:18.923

如果您使用的是 jquery 1.9...`live()`已删除 ..so 使用`on`

```
 $('.ol_results').on('click','.myorders', function () { alert("Clicked!") }); 
```

否则，如果您`<li>`没有动态添加，则可以直接调用。

```
$('.myorders').click(function(){alert("Clicked!")}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:14:38.560

在最新版本中使用 live() 而不是 on()

```
$('.myorders').on('click', function () { 
     alert("Clicked!") 
}); 
```

# opencart - 如何在 Opencart 产品描述中添加添加到 Shopcart 按钮

> ID：15291487
> 
> 赞同：1
> 
> 时间：2013-03-08T10:11:51.037
> 
> 标签：opencart

我试图在 Opencart 版本 1.5.4 的产品描述底部插入一个购物车按钮，并使用默认主题。

我查看了特定产品的源代码，并将此信息从源代码复制到产品描述的底部。

```
 <div class="cart">
    <div>Qty:          <input type="text" name="quantity" size="2" value="1" />
      <input type="hidden" name="product_id" size="2" value="85" />
      &nbsp;
      <input type="button" value="Add to Cart" id="button-cart" class="button" />
    </div>
    <div><span>&nbsp;&nbsp;&nbsp;- OR -&nbsp;&nbsp;&nbsp;</span></div>
    <div><a onclick="addToWishList('85');">Add to Wish List</a><br />
      <a onclick="addToCompare('85');">Add to Compare</a></div>
          </div> 
```

当我单击添加到购物车按钮时，没有任何反应。

但是，当我单击添加到愿望清单并比较时，该产品将添加到相应的列表中。

我错过了什么？

我应该使用不同的代码吗？

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-23T05:54:51.020

畅你添加到购物车按钮，用这个 `<a onclick="addToCart('<?php echo $product['product_id']; ?>');" class="button"><?php echo $button_cart; ?></a>`。

希望它对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:20:47.693

**更新**

您的意思是“移动”添加到购物车按钮吗？还是简单地复制现有的一个，以便您的页面中有两个#button-cart？

如果是第一个，@TheBlackBenzKid 的解决方案应该可以按您的预期工作。但是，如果要复制现有按钮，则应修改选择器，使其使用类 (.button-cart)。我希望这会有所帮助。

这么晚才回复很抱歉。根据您的回答：

> 我想复制现有的，以便页面中有两个按钮

我*的意思是修改选择器以便它使用类（.button-cart）*是你应该改变你的ajax触发器以匹配2个选择器（因为现在你有2个'触发器'，顶部的“添加到购物车”和底部的那个你复制到）。

首先将您的添加到购物车修改为`<input type="button" value="Add to Cart" id="" class="button-cart button" />`

看，我们不再使用`id="button-cart"`，而是使用`button-cart`我们的类属性（`class="button-cart button"`）。通过使用类，我们可以声明另一个具有相同类的元素（即产品描述底部的“添加到购物车”按钮）。

然后修改您的 Ajax 脚本。原始的ajax脚本是：

```
$('#button-cart').bind('click', function() {
$.ajax({
// another code 
```

});

改成：

```
$('.button-cart').bind('click', function() {
$.ajax({
// another code 
```

});

id 使用`#`和类使用`.`。我希望这对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T11:42:46.570

据我所知，添加到购物车代码按钮使用一个在 DIV 中链接的 ID。所以 jQuery 不是在寻找 #button-cart - 它是在寻找例如购物车。addform #button-cart 以及您还缺少一些需要嵌套的变量.. 也请使用完整版本的 product.tpl 更新您的帖子

这是您需要用于移动“添加到购物车”按钮的代码：

```
 <div class="cart">
    <div><?php echo $text_qty; ?>
      <input type="text" name="quantity" size="2" value="<?php echo $minimum; ?>" />
      <input type="hidden" name="product_id" size="2" value="<?php echo $product_id; ?>" />
      &nbsp;
      <input type="button" value="<?php echo $button_cart; ?>" id="button-cart" class="button" />
      <span>&nbsp;&nbsp;<?php echo $text_or; ?>&nbsp;&nbsp;</span>
      <span class="links"><a onclick="addToWishList('<?php echo $product_id; ?>');"><?php echo $button_wishlist; ?></a><br />
        <a onclick="addToCompare('<?php echo $product_id; ?>');"><?php echo $button_compare; ?></a></span>
    </div>
    <?php if ($minimum > 1) { ?>
    <div class="minimum"><?php echo $text_minimum; ?></div>
    <?php } ?>
  </div> 
```

但请确保在您的新 DIV 移动中支持`.product-info`and `#cart`ID 和 Class 子元素。为什么？看看这个 jQuery，它依赖于它们来找到值 - 话虽如此 - 你也可以改变它。

```
$('#button-cart').bind('click', function() {
    $.ajax({
        url: 'index.php?route=checkout/cart/add',
        type: 'post',
        data: $('.product-info input[type=\'text\'], .product-info input[type=\'hidden\'], .product-info input[type=\'radio\']:checked, .product-info input[type=\'checkbox\']:checked, .product-info select, .product-info textarea'),
        dataType: 'json',
        success: function(json) {
            $('.success, .warning, .attention, information, .error').remove();

            if (json['error']) {
                if (json['error']['option']) {
                    for (i in json['error']['option']) {
                        $('#option-' + i).after('<span class="error">' + json['error']['option'][i] + '</span>');
                    }
                }
            } 

            if (json['success']) {
                $('#notification').html('<div class="success" style="display: none;">' + json['success'] + '<img src="catalog/view/theme/default/image/close.png" alt="" class="close" /></div>');

                $('.success').fadeIn('slow');

                $('#cart-total').html(json['total']);

                $('html, body').animate({ scrollTop: 0 }, 'slow'); 
            }   
        }
    });
}); 
```

根据您的需要更新版本将是：

```
/*
Notice I have changed the DIV to assign div#cart
So it looks for <div id="cart">
But make sure options are available for the error response
and validation
*/

$('#button-cart').bind('click', function() {
    $.ajax({
        url: 'index.php?route=checkout/cart/add',
        type: 'post',
        data: $('div#cart input[type=\'text\'], div#cart input[type=\'hidden\'], div#cart input[type=\'radio\']:checked, div#cart input[type=\'checkbox\']:checked, div#cart select, div#cart textarea'),
        dataType: 'json',
        success: function(json) {
            $('.success, .warning, .attention, information, .error').remove();

            if (json['error']) {
                if (json['error']['option']) {
                    for (i in json['error']['option']) {
                        $('#option-' + i).after('<span class="error">' + json['error']['option'][i] + '</span>');
                    }
                }
            } 

            if (json['success']) {
                $('#notification').html('<div class="success" style="display: none;">' + json['success'] + '<img src="catalog/view/theme/default/image/close.png" alt="" class="close" /></div>');
                $('.success').fadeIn('slow');
                $('#cart-total').html(json['total']);
                $('html, body').animate({ scrollTop: 0 }, 'slow'); 
            }   
        }
    });
}); 
```

# google-maps-api-3 - Google Maps JS API v3 单个标记 多个圆圈

> ID：15291491
> 
> 赞同：0
> 
> 时间：2013-03-08T10:12:00.397
> 
> 标签：google-maps-api-3, google-maps-markers, infowindow

截图：http: [//imageshack.us/a/img59/8541/72825985.png](http://imageshack.us/a/img59/8541/72825985.png)

上述结果是由同一地点的多个标记（具有不同半径）传递的。

我想一次拖动一个标记，而不是多个标记。

其次，信息窗口可用于不同的半径。

任何帮助是极大的赞赏！

```
var locations = [
  ['US gov suggested', 1.8833, 102.7833, 5, 'green', 80000],
  ['agricultural contamination', 1.8833, 102.7833, 4, 'blue', 60000],
  ['Chernobyl_Exclusion_Zone (fallout)', 1.8833, 102.7833, 3, 'yellow', 30000],
  ['Fukushima evacuation zone', 1.8833, 102.7833, 2, 'red', 20000],
  ['emergency zone', 1.8833, 102.7833, 1, 'black', 5000]

]; 
```

和

```
var infowindow = new google.maps.InfoWindow();

var marker, i;

for (i = 0; i < locations.length; i++) {  
  marker = new google.maps.Marker({
    position: new google.maps.LatLng(locations[i][1], locations[i][2]),
    draggable: true,
    map: map
  });

  google.maps.event.addListener(marker, 'click', (function(marker, i) {
    return function() {
      infowindow.setContent(locations[i][0]);
      infowindow.open(map, marker);
    }
  })(marker, i));

var circle = new google.maps.Circle({
      map: map,
      fillColor:locations[i][4],
      //fillOpacity:0.3, 
      //strokeColor:locations[i][4],
      strokeOpacity:0.1,
      //strokeWeight:1,
      radius: locations[i][5] // 30 km
});

circle.bindTo('center', marker, 'position');

} 
```

参考： [Google Maps JS API v3 - 简单的多标记示例](https://stackoverflow.com/questions/3059044/google-maps-js-api-v3-simple-multiple-marker-example)

[http://code.google.com/p/gmaps-samples-v3/source/browse/trunk/circle-overlay/circle-overlay.html?r=67](http://code.google.com/p/gmaps-samples-v3/source/browse/trunk/circle-overlay/circle-overlay.html?r=67)

[http://plugins.svn.wordpress.org/google-maps-v3-shortcode-multiple-markers/trunk/](http://plugins.svn.wordpress.org/google-maps-v3-shortcode-multiple-markers/trunk/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:39:00.557

创建尽可能多的圆圈，并使用圆圈的方法将每个圆圈的 -property 绑定到`center`标记的`position`-property[`bindTo()`](https://developers.google.com/maps/documentation/javascript/reference?hl=en#MVCObject)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T02:51:24.393

```
var infowindow = new google.maps.InfoWindow()

var marker, i;
  marker = new google.maps.Marker({
  position: new google.maps.LatLng(locations[0][1], locations[0][2]),
  draggable: true,
  map: map
  });

for (i = 0; i < locations.length; i++) {  

  var circle = new google.maps.Circle({
    map: map,
    clickable:true,
    fillColor:locations[i][4],
    //fillOpacity:0.3, 
    //strokeColor:locations[i][4],
    strokeOpacity:0.1,
    //strokeWeight:1,
    radius: locations[i][5] // 30 km
  });

circle.bindTo('center', marker, 'position'); 
```

其次，为多个圆圈叠加添加[信息窗口](https://stackoverflow.com/questions/tagged/infowindow)并不容易。有什么想法或提示吗？例如， http: [//img443.imageshack.us/img443/8198/overlap.jpg](http://img443.imageshack.us/img443/8198/overlap.jpg)

参考：[google maps v3 向圆圈添加信息窗口](https://stackoverflow.com/questions/6584358/google-maps-v3-adding-an-info-window-to-a-circle)

# jquery-ui - Jquery Datepicker Days

> ID：15291496
> 
> 赞同：4
> 
> 时间：2013-03-08T10:12:12.087
> 
> 标签：jquery-ui, jquery-ui-datepicker

我已经包含了一个 jqueryUI Datepicker，例如，我需要将 2 个字母天数更改为 1 个字母。而不是周日的“Su”，它将成为周日的“S”，其余的......我将如何改变它？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-25T22:26:36.820

我只是想知道同样的事情。在查看了 api 之后，我发现您可以将一个选项传递给 datepicker 来更改日期名称。这是 api 部分： [http ://api.jqueryui.com/datepicker/#option-dayNamesMin](http://api.jqueryui.com/datepicker/#option-dayNamesMin)

这是一个例子：

```
$("#datepicker").datepicker({
    dayNamesMin: ['S', 'M', 'T', 'W', 'T', 'F', 'S']
}); 
```

# jquery - 在 Jquery Post 中发布复杂列表

> ID：15291498
> 
> 赞同：0
> 
> 时间：2013-03-08T10:12:23.010
> 
> 标签：jquery, asp.net-mvc

我处于需要在我的 jquery post 方法中发布复杂列表的情况。这是我在做什么

```
function UpdateOrder() {
    var results = new Array();
    $("#divMainContainer").find(".teamTr").each(function() {
        var o = { 'projectid': $(this).attr("projectid"),
                  'designTeamID': $(this).attr("designTeamID"), 
                  'designTeamOrder': $(this).attr("designTeamOrder") 
                };
        results.push(o);
    });

    var url = "/DesignManagerQueue/UpdateOrder";
    $.post(url, { queryArr: results}, function(data) {
    }); 
```

而 MVC 动作是

```
public JsonResult UpdateOrder(List<SS> queryArr)
{
    //Do something
    return Json(new { Status = true, Message = "" });
} 
```

而类是

```
public class SS
{
    public string Projectid{ get; set; }
    public int DesignTeamID{ get; set; }
    public int DesignTeamOrder { get; set; }
} 
```

但在行动中

```
List<SS> queryArr 
```

是空的

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:15:17.763

您的 js 对象属性应与模型类的属性匹配

```
public class SS
{
    public string Projectid{ get; set; }
    public int DesignTeamID{ get; set; }
    public int DesignTeamOrder { get; set; }
} 
```

像

```
 var o = { 'ProjectId': $(this).attr("projectid"),
                  'DesignTeamID': $(this).attr("designTeamID"), 
                  'DesignTeamOrder': $(this).attr("designTeamOrder") 
                }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:16:32.947

ASP.NET MVC 框架中的模型绑定很简单。您的操作方法需要数据，传入的 HTTP 请求携带您需要的数据。问题是数据被嵌入到 POST-ed 表单值中，可能还有 URL 本身。 [MVC 中的模型绑定](http://msdn.microsoft.com/en-us/library/dd410405%28v=VS.90%29.aspx)

模型绑定期望您的属性应该与模型类匹配。

```
 var o = { 'ProjectId': $(this).attr("projectid"),
                  'DesignTeamID': $(this).attr("designTeamID"), 
                  'DesignTeamOrder': $(this).attr("designTeamOrder") 
                }; 
```

# python - 我安装了 2 个版本的 python，但 cmake 使用的是旧版本。如何强制 cmake 使用较新的版本？

> ID：15291500
> 
> 赞同：67
> 
> 时间：2013-03-08T10:12:27.640
> 
> 标签：python, python-2.7, cmake

我安装了 2 个版本的 python，但**cmake**使用的是旧版本。如何强制**cmake**使用较新的版本？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2016-01-03T20:01:02.340

您可以根据需要尝试以下任何一种：

## 为了`CMake >= 3.12`

根据变更日志：

> 添加了新的“FindPython3”和“FindPython2”模块，以及新的
> “FindPython”模块，以提供一种定位
> Python 环境的新方法。

```
find_package(Python COMPONENTS Interpreter Development) 
```

**[文档](https://cmake.org/cmake/help/latest/module/FindPython.html#module:FindPython)：**

> 这个模块看起来更适合 Python 版本 3。如果未找到，则搜索版本 2。要管理 Python 的并发版本 3 和 2，请使用 FindPython3 和 FindPython2 模块而不是这个模块。

## 为了`CMake < 3.12`

**[文档](https://cmake.org/cmake/help/v3.12/module/FindPythonInterp.html)：**

```
find_package(PythonInterp 2.7 REQUIRED)
find_package(PythonLibs 2.7 REQUIRED) 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-03-08T10:20:01.437

尝试添加`-DPYTHON_EXECUTABLE:FILEPATH=/path/to/python2.7` 可能是路径问题？

也可以指定你的 python 库的路径，使用你想要的版本：

```
 cmake -DPYTHON_LIBRARIES=/Library/Frameworks/Python.framework/Versions/2.7/lib/libpython2.7.dylib . 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2013-04-16T19:55:52.943

我有一个类似的问题，并使用[保罗的回答](https://stackoverflow.com/a/15291663/712526)作为提示解决了它。我需要使用`python2.7`来编译一个较旧的库，但`cmake`不断拿起我的`python3.2`库（和可执行文件）。

首先，我`cmake`使用默认选项运行，然后编辑`CMakeCache.txt`它生成的文件。我这样做主要是因为我首先不知道正确的`-D...`咒语来`cmake`获取 python 库和包含路径等。

在我的`CmakeCache.txt`中，我发现了这样的行

*   程序路径

    ```
    PYTHON_EXECUTABLE:FILEPATH=/usr/bin/python 
    ```

*   目录的路径

    ```
    PYTHON_INCLUDE_DIR:PATH=/usr/include/python3.2 
    ```

*   图书馆的路径

    ```
    PYTHON_LIBRARY:FILEPATH=/usr/lib/libpython3.2.so 
    ```

并用 替换每一次`python3.2`出现`python2.7`。我还必须重命名`PYTHON_EXECUTABLE`to use `python2.7`，因为它是我系统上`python`的符号链接。`python3.2`

然后我又跑了`cmake`。因为它更喜欢它的缓存值而不是实际查找库，所以这应该适用于所有情况。至少，它在我的身上发生了。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-04-06T01:07:52.107

我使用 anaconda(python 2.7.8) 以及 python 2.7.6。

我试过`-DPYTHON_EXECUTABLE:FILEPATH=$ANACONDA_HOME/bin`了，但找到了 1.4 版（奇怪：）。

我的解决方案是将其更改为 PYTHON_EXECUTABLE：

```
cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -DBUILD_TIFF=ON \
-DPYTHON_LIBRARY=$ANACONDA_HOME/lib/libpython2.7.so \
-DPYTHON_INCLUDE_DIR=$ANACONDA_HOME/include/python2.7/ \
-DPYTHON_EXECUTABLE=$ANACONDA_HOME/bin/python 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-13T12:12:47.353

我的用例是一个相当大的项目，其中 C++ 类通过`Boost.Python`. 在与 CMake 的 Python 解释器和库检测的各种怪癖作斗争之后，我终于放弃了自己的想法。我的方法基于稍微经过编辑的`python-config`脚本版本，*有时*（但不总是！）将其放入新创建的虚拟环境中（[有关这些问题，请参阅此 SO 帖子`pyvenv`](https://stackoverflow.com/questions/42020937/why-pyvenv-does-not-install-python-config/48946977#48946977)，但我离题了）。该脚本由一个小的 CMake 片段调用`pyconfig.cmake`。两者都可以从 GitHub repo [cmake-python-config](https://github.com/aaszodi/cmake-python-config)免费获得。

警告：脚本假定您的`PATH`. 未尝试检测 Python 2。这些脚本也*不会*尝试查找*所有*已安装的 Python3 版本。

# android - Android：OpenCV：imwrite总是返回false，写入失败

> ID：15291504
> 
> 赞同：14
> 
> 时间：2013-03-08T10:12:33.287
> 
> 标签：android, opencv

这段代码曾经可以工作，但在 Android 4.2 和 OpenCV 2.4.4 上它失败了，但我不知道为什么。任何人都可以为我阐明它吗？

谢谢你的帮助。

巴兹

```
public void SaveImage (Mat mat) {
  Mat mIntermediateMat = new Mat();

  Imgproc.cvtColor(mRgba, mIntermediateMat, Imgproc.COLOR_RGBA2BGR, 3);

  File path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);
  String filename = "barry.png";
  File file = new File(path, filename);

  Boolean bool = null;
  filename = file.toString();
  bool = Highgui.imwrite(filename, mIntermediateMat);

  if (bool == true)
    Log.d(TAG, "SUCCESS writing image to external storage");
  else
    Log.d(TAG, "Fail writing image to external storage");
  } 
```

bool 每次都返回 false。用户 #0 的文件路径/名称应该是（“storage/emulated/0/Pictures/barry.png”），并且目录 Pictures 在那里。

什么可以使 imwrite 返回 false？

我可以将垫子转换为 bmp 并自己保存（我在非 OpenCV 应用程序的其他地方这样做）但是因为 Highgui.imwrite 在那里，并且当我写入 2.4.0 并在 Android 上测试时，这段代码曾经可以工作3.x，如果可以的话，我想使用它。

非常感谢

巴兹

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-14T11:13:01.180

我不敢相信。[捂脸]。

将此添加到您的清单文件 Barry：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

请问有人过来打我一巴掌吗？我设法从清单中删除了写权限，所以它不会写真的应该不足为奇......

多哈。

巴里

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-11T12:33:37.907

实际上有两个可能的问题：

1.  **安卓权限。**要解决此问题，请将权限添加到清单

    “android.permission.WRITE_EXTERNAL_STORAGE”

2.  您正在尝试将文件保存到 SD 卡，并且您的设备以“磁盘驱动器”模式连接到 PC。这意味着您与 PC 共享访问权限。在“仅充电”模式下连接您的设备。要检查连接模式，请使用

    `Environment.getExternalStorageState()`，它将 为“磁盘模式”返回**共享并为“仅充电”****安装**。

    我修改了你的代码，现在看起来像

    ```
    public void SaveImage (Mat mat) {
       Mat mIntermediateMat = new Mat();
       Imgproc.cvtColor(mRgba, mIntermediateMat, Imgproc.COLOR_RGBA2BGR, 3);

       File path = new File(Environment.getExternalStorageDirectory() + "/Images/");
       path.mkdirs();
       File file = new File(path, "image.png");

       filename = file.toString();
       Boolean bool = Highgui.imwrite(filename, mIntermediateMat);

       if (bool)
        Log.i(TAG, "SUCCESS writing image to external storage");
       else
        Log.i(TAG, "Fail writing image to external storage");
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-10T14:19:54.970

请注意版本 +4.4 (KitKat)，因为`android.permission.WRITE_EXTERNAL_STORAGE`不允许在外部 SD 卡上写入：

> WRITE_EXTERNAL_STORAGE 权限只能授予对设备上主要外部存储的写访问权限。不允许应用程序写入辅助外部存储设备，除非在合成权限允许的特定包目录中。以这种方式限制写入可确保系统可以在卸载应用程序时清理文件。

看看：[写入 SD 卡总是失败](https://stackoverflow.com/questions/33689457/writing-to-sd-card-always-failing)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-02T14:34:28.547

从安卓 6+

> 从 Android 6.0（API 级别 23）开始，用户在应用运行时授予应用权限，而不是在安装应用时...

你需要添加类似的东西：

```
 if (ContextCompat.checkSelfPermission(this, Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) 
  {
        ActivityCompat.requestPermissions(
                this,
                new String[] { Manifest.permission.WRITE_EXTERNAL_STORAGE },
                PERMISSION_REQUEST_WRITE_EXTERNAL_STORAGE);
  } 
```

[https://developer.android.com/training/permissions/requesting.html](https://developer.android.com/training/permissions/requesting.html)

# sql - SQL查询以选择具有最小值的不同行

> ID：15291506
> 
> 赞同：73
> 
> 时间：2013-03-08T10:12:36.080
> 
> 标签：sql, database, greatest-n-per-group

我想要一条 SQL 语句来获取具有最小值的行。

考虑这张表：

```
id  game   point
1    x      5
1    z      4
2    y      6
3    x      2
3    y      5
3    z      8 
```

如何选择`point`列中具有最小值的 id，按游戏分组？如下所示：

```
id  game   point    
1    z      4
2    y      5
3    x      2 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-03-08T10:38:25.417

利用：

```
SELECT tbl.*
FROM TableName tbl
  INNER JOIN
  (
    SELECT Id, MIN(Point) MinPoint
    FROM TableName
    GROUP BY Id
  ) tbl1
  ON tbl1.id = tbl.id
WHERE tbl1.MinPoint = tbl.Point 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2016-02-09T22:49:13.500

这是做同样事情的另一种方式，它可以让你做一些有趣的事情，比如选择前 5 名获胜的游戏等。

```
 SELECT *
 FROM
 (
     SELECT ROW_NUMBER() OVER (PARTITION BY ID ORDER BY Point) as RowNum, *
     FROM Table
 ) X 
 WHERE RowNum = 1 
```

您现在可以正确获取被识别为得分最低的实际行，并且您可以修改排序函数以使用多个标准，例如“显示得分最低的最早游戏”等。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-03-08T10:18:41.753

这将起作用

```
select * from table 
where (id,point) IN (select id,min(point) from table group by id); 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2015-09-26T17:00:01.663

由于这`sql`仅被标记，因此以下使用 ANSI SQL 和[窗口函数](http://modern-sql.com/slides)：

```
select id, game, point
from (
  select id, game, point, 
         row_number() over (partition by game order by point) as rn
  from games
) t
where rn = 1; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-06T21:29:13.877

[肯克拉克的回答](https://stackoverflow.com/a/15292049/896802)对我来说不起作用。它也可能不适用于您的。如果没有，试试这个：

```
SELECT * 
from table T

INNER JOIN
  (
  select id, MIN(point) MinPoint
  from table T
  group by AccountId
  ) NewT on T.id = NewT.id and T.point = NewT.MinPoint

ORDER BY game desc 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-09T10:56:28.780

```
SELECT DISTINCT 
FIRST_VALUE(ID) OVER (Partition by Game ORDER BY Point) AS ID,
Game,
FIRST_VALUE(Point) OVER (Partition by Game ORDER BY Point) AS Point
FROM #T 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-16T13:22:30.900

这是可移植的——至少在 ORACLE 和 PostgreSQL 之间：

```
select t.* from table t 
where not exists(select 1 from table ti where ti.attr > t.attr); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-26T16:13:43.993

```
SELECT * from room
INNER JOIN
  (
  select DISTINCT hotelNo, MIN(price) MinPrice
  from room
 Group by hotelNo
  ) NewT   
 on room.hotelNo = NewT.hotelNo and room.price = NewT.MinPrice; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-05-21T22:18:02.393

这种替代方法使用 SQL Server 的`OUTER APPLY`子句。这样一来，

1.  创建不同的游戏列表，以及
2.  获取并输出该游戏得分最低的记录。

该`OUTER APPLY`子句可以想象为`LEFT JOIN`，但其优点是您可以**将主查询的值用作子查询中的参数**（此处为：游戏）。

```
SELECT colMinPointID
FROM (
  SELECT game
  FROM table
  GROUP BY game
) As rstOuter
OUTER APPLY (
  SELECT TOP 1 id As colMinPointID
  FROM table As rstInner
  WHERE rstInner.game = rstOuter.game
  ORDER BY points
) AS rstMinPoints 
```

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2013-03-08T10:15:54.340

尝试：

```
select id, game, min(point) from t
group by id 
```

# php - PHP：1 个变量中有 2 个对象。试图获得第二个对象

> ID：15291511
> 
> 赞同：-2
> 
> 时间：2013-03-08T10:12:51.500
> 
> 标签：php, variables, object

我有一个包含 2 个页面对象的变量（页面）。

页面变量的 print_r：

```
 Page Object
(
    [blocksAliasedFromMasterCollection:protected] =&gt; 
    [cID] =&gt; 233
    [attributes:protected] =&gt; Array
        (
        )

)
Page Object
(
    [blocksAliasedFromMasterCollection:protected] =&gt; 
    [cID] =&gt; 234
    [attributes:protected] =&gt; Array
        (
        )

)
{"rel":"SITEMAP","name":"something","cID":"234"} 
```

如何获取第二个页面对象的 cID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:16:27.290

它不是一个单一的变量，你有一个数组。您可以使用索引访问所有元素。

```
$obj1 = $page[0]; // get first object
$obj2 = $page[1]; // get second object\ 
```

然后，您可以正常使用该对象：

`$obj2->method();`或者`$obj2->property;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:16:42.643

尝试使用下面的代码

```
if $data contains the objects then
$i=0;
foreach($data as $ar)
{
    if(++$i==2)
    {
       echo $ar->cID;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T11:10:10.800

我发布的 print_r 正如 Jon 所说的那样不正确。

发生的事情是其中带有 print_r 的函数被调用了 2 次。这就是为什么页面对象被打印了 2 次而不是在同一个变量中的原因。

在检查该函数第二次运行后，我得到了正确的页面对象。

# php - 根据动态变量（PHP 5.2）引用模型类型时解析运算符出错

> ID：15291516
> 
> 赞同：-8
> 
> 时间：2013-03-08T10:13:03.787
> 
> 标签：php, yii, php-5.2, scope-resolution

**背景资料：**

我试图通过将一个公共函数从子类移动到它们扩展的基类来简化我的 Yii 应用程序的结构。

我将`loadModel($id)`功能从用户（子）控制器移动到基本控制器。

之前，在 UserController.php 中。这有效：

```
public function loadModel($id) {
    $model = User::model()->findByPk($id);
    if ($model === null)
        throw new CHttpException(404, 'The requested page does not exist.');
    return $model;
} 
```

之后，我把上面的函数去掉了，放到Controller.php里面，UserController继承的，还有很多其他的：

```
public function loadModel($id) {
    $type = modelname(); // returns a string, i.e.: "User"
    $model = $type::model()->findByPk($id);
    if ($model === null)
        throw new CHttpException(404, 'The requested page does not exist.');
    return $model;
} 
```

**问题：**

我已经在我的本地 PC 上尝试了这个，运行 PHP 5.4.4，它***按预期工作***，但是当它被上传到运行 PHP 5.2 的测试服务器时，这会引发 HTTP 错误 500（内部服务器错误）。查看错误日志，错误为`PHP Parse error: syntax error, unexpected T_PAAMAYIM_NEKUDOTAYIM`error，指的是第三行的[解析操作符。](http://en.wikipedia.org/wiki/Scope_resolution_operator#PHP)

**问题：**

*   在这种情况下，解析运算符在 PHP 5.2 上失败的任何原因？和，
*   是否有任何解决方法可以使这项工作具有相同的效果？

==================

**附加信息：**

我正在使用的全局模型名称函数，它返回模型名称，即：“用户”：

```
function modelname() {
    return Yii::app()->controller->id;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:10:51.040

Actually, you don't have to upgrade to reference the class dynamically. Yii does it without and yii supports PHP 5.2\. If you are interested, I can see if I can dig up how it is done, but I've run into the same problem and resolved it on PHP 5.2

Edit: Ok, here's the info. I posted the original info on a [Yii wiki page.](http://www.yiiframework.com/wiki/9/how-to-log-changes-of-activerecords/#c7621)

Here's the code that returns a Yii singleton model:

```
 $thisModel = call_user_func($modelname, 'model'); 
```

But, per DCoder, it looks like `CActiveRecord::model($modelname)` will also work:

Yii info here: [http://www.yiiframework.com/doc/api/1.1/CActiveRecord#model-detail](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#model-detail)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:27:35.063

我在这里找到了答案：

[http://php.net/manual/en/language.oop5.paamayim-nekudotayim.php](http://php.net/manual/en/language.oop5.paamayim-nekudotayim.php)

> 范围解析运算符（也称为 Paamayim Nekudotayim）或更简单的术语是双冒号，是一个允许访问类的静态、常量和重写属性或方法的标记。
> 
> 从类定义之外引用这些项目时，请使用类的名称。
> 
> **从 PHP 5.3.0 开始，可以使用变量来引用类。**变量的值不能是关键字（例如 self、parent 和 static）。

基本上，我必须升级 PHP 版本才能动态引用一个类。

# android - 广播接收器 Android

> ID：15291521
> 
> 赞同：-2
> 
> 时间：2013-03-08T10:13:09.280
> 
> 标签：android, broadcastreceiver

我们可以在清单中声明广播接收器，也可以通过代码动态声明。我想知道两种方法的区别，以及在哪种情况下应该使用哪种方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:16:28.367

我认为当您通过清单文件注册它时，它会永久注册，您无法取消注册。如果它以编程方式完成，您可以注册它以及取消注册它。

如果您希望广播接收器仅在您的应用程序运行时工作，或者如果您想取消注册某个触发事件，那么最好采用编程方法。

如果您希望广播接收器继续接收广播，即使您的应用程序处于睡眠状态或未运行，并且您无意取消注册它，请执行清单注册。

# c - 接受来自 scanf 函数的任意数量的输入

> ID：15291523
> 
> 赞同：5
> 
> 时间：2013-03-08T10:13:11.807
> 
> 标签：c, while-loop, scanf

我正在尝试使用`scanf`函数读取未知数量的输入。

```
int a[100];
int i = 0;

while((scanf("%d", &a[i])) != '\n')
 i++;

// Next part of the code 
```

但是这个函数不会进入下一部分代码，似乎有一个无限的while循环。

如何解决这个逻辑错误？有没有其他选择`scanf`喜欢`sscanf`将整数读入数组？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T10:26:39.813

[`scanf`](http://linux.die.net/man/3/scanf)返回已成功匹配和分配的输入项的数量，因此这样做是合理的：

```
while(scanf(...) == 1) 
```

现在您希望能够读取多个数字，每个数字都在新行上定义。然后你可以简单地这样做：

```
int array[100];
int i = 0;

while(i < 100 && scanf("%d\n", &array[i]) == 1)
    i++; 
```

请注意，仅当输入无效输入（例如 letter `q`）或输入输入结束控制代码时，此读取才会停止，即`Ctrl`+ `Z`（在 Windows 上）或`Ctrl`+ `D`（在 Mac、Linux、Unix 上）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T10:20:41.640

scanf 的返回值是**成功匹配和分配的输入项的数量**，所以当遇到非数字输入时尝试这样结束：

```
while (i < 100 && (scanf("%d", &a[i])) == 1) { i++; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:20:02.430

你想做

```
char discard;

while(i < 100 && (scanf("%d%1[^\n]s", &arr[i], &discard)) == 2)
 i++; 
```

不断获得输入直到换行。

scanf() 不是读取整行的最佳工具。您应该使用 fgets() 读取该行，然后使用 sscanf() 或其他函数对其进行解析。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T10:20:25.693

scanf 的返回值是*每次调用*扫描的输入数。您可以将其与整数 10（或 '\n'）进行比较，这将在 scanf 实际读取 10 个项目时停止循环。（为此，格式字符串中必须有十个说明符。

你可以试试

```
 while((i<10) && (scanf("%d",a+i)==1)) i++; 
```

必须对接受任意数量的参数进行编程，例如。作为

```
 while (fgets(mybuf, ALLOCATED_LENGTH-1, stdin)) {
        char *p = mybuf;
        if (*p=='\n') break; // or a better function to test for empty line
        while (custom_scan_next_integer(&p)) i++;
   } 
```

where`custom_scan_next_integer`修改指针 p 以转发适当数量的字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T10:20:58.027

首先用这个替换`"%d"`将`" %d"`避免新行问题

其次，如果您的输入包含非数字输入，那么您的 while 循环将进入无限循环。所以你必须检查你的输入是否是数字输入

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-26T14:00:15.797

我认为主要问题是您不知道应该从输入中读取多少数字我从其他地方找到了这个答案，这不是我的，但这是一个很棒的技巧

```
#include <stdio.h> 
#include <stdlib.h> 

int main() { 
    int i=0, j=0; 
    int arr[10000]; 
    char temp; 
    do { 
       scanf("%d%c", &arr[i], &temp); 
       i++; 
    } while(temp != '\n'); 

    for(j=0; j<i; j++) { 
       printf("%d ", arr[j]); 
    } 

    return 0; 
} 
```

此代码属于[Abhishek Bhattacharya（来自 Quora）](http://qr.ae/pNQsHa)（第一个答案）

# java - 有效地复制图书馆项目

> ID：15291524
> 
> 赞同：2
> 
> 时间：2013-03-08T10:13:15.223
> 
> 标签：java, android, eclipse

我制作了一个应用程序，我想将其转换为`library project`. 之后，我想为不同的公司徽标和详细信息制作副本。

我需要做的主要更改是更改可绘制资源并更改 Constants.java 文件。

我不想复制整个代码，而是想将此代码转换为库并使用它来制作不同的副本。问题是，一旦我将其转换为库，我如何将我的 Constants.java 链接到其中，以及如何将我的链接`drawable resources`到库项目中的 xml 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:28:50.210

我昨天自己尝试。例如，如果您的库项目调用 R.drawable.logo 它将首先在您的主项目上查找可绘制徽标如果您的项目没有 R.drawable.logo 系统将查找您的库项目.

所以图书馆项目中的资源是默认的。如果您想更改徽标或某些资源，只需在主项目中使用相同的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:04:02.117

可以用 Ant 来实现。谷歌进一步说明。
PS：我不是 100% 确定，但是，据我所知，在 eclipse 中你可能只会“复制整个代码”。

# maven - 构建路径包含依赖项未指定的条目

> ID：15291538
> 
> 赞同：0
> 
> 时间：2013-03-08T10:13:55.600
> 
> 标签：maven, dependencies, m2e, buildpath

使用 m2e 插件将项目导入 eclipse 后，构建路径包含 pom.xml 文件中的依赖项未指定的条目。为什么？
依赖关系显示在以下文件中。
`pom.xml:`

```
<dependencies>
  <dependency>
   <groupId>${spring.group}</groupId>
   <artifactId>spring-context</artifactId>
   <version>${spring.version}</version>
  </dependency>
  <dependency>
   <groupId>${spring.group}</groupId>
   <artifactId>spring-aop</artifactId>
   <version>${spring.version}</version>
  </dependency>
  <dependency>
   <groupId>org.aspectj</groupId>
   <artifactId>aspectjweaver</artifactId>
   <version>1.6.4</version>
  </dependency>

  <dependency>
   <groupId>cglib</groupId>
   <artifactId>cglib-nodep</artifactId>
   <version>2.2</version>
  </dependency>

  <dependency>
   <groupId>junit</groupId>
   <artifactId>junit</artifactId>
   <version>4.5</version>
   <scope>test</scope>
  </dependency>

  <dependency>
   <groupId>org.mockito</groupId>
   <artifactId>mockito-core</artifactId>
   <version>1.8.0</version>
   <scope>test</scope>
  </dependency>
  <dependency>
   <groupId>org.mockito</groupId>
   <artifactId>mockito-all</artifactId>
   <version>1.8.0</version>
   <scope>test</scope>
  </dependency>

 </dependencies> 
```

[构建路径快照](https://www.dropbox.com/s/ueypas4659n2s0o/build_path.png)

编辑：
当我发布这个问题时，我是 maven 的新手（而且我仍然是），但是在阅读了关于我的问题之后，`transitive dependencies`我发现了我的问题的答案。

# cryptography - 块密码输出长度谜题

> ID：15291542
> 
> 赞同：0
> 
> 时间：2013-03-08T10:14:14.670
> 
> 标签：cryptography, block, encryption

我的问题是 - 如何确定输出密文的长度？

我隐约知道输出长度必须是所使用密码的块大小的倍数。但这是否意味着：

1.  如果输入数据的长度是密码块大小的倍数，那么输出长度将与输入长度相同吗？
2.  如果输入数据的长度不是密码块大小的倍数，那么输出长度将是输入长度+一个块大小？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:15:21.147

罗伯特关于密文大小是正确的，这取决于密码模式和填充，可能还有块模式。

如果您在流模式下使用密码（例如 CTR），则密文大小与明文大小相同。如果您使用诸如 GCM 之类的身份验证模式，那么您必须至少使用身份验证标签来增加它。您还可以使用 CBC 模式和密文窃取 (CTS) 来摆脱填充开销，但这仅适用于两个或更多块。

现在让我们假设 CBC 模式的 PKCS#5/7 兼容填充，这是目前最常用的模式。在这种情况下，您的明文至少填充了一个填充字节（否则 unpadding 无法区分例如用单个`01`值填充字节填充的明文和明文 - 可除以块大小 - 以`01`值字节结尾）。这意味着如果明文已经块对齐，则添加整个块。

当然，如果明文不是块对齐的，那么 PKCS#7 填充只需要填充最后一个块。因此，在这种情况下，`block size`添加了 1 个字节。于是计算变为：

L[密文]=（L[明文]/L[块]）*（L[块]+1）

其中 L[明文]/ L[块]被四舍五入（在大多数编程语言中进行整数计算时通常如此）。

现在让我们假设 AES，它的块大小总是 16 字节：

```
 0 bytes -> 16 bytes
  1 byte  -> 16 bytes
  2 bytes -> 16 bytes
 ...
 15 bytes -> 16 bytes
 16 bytes -> 32 bytes
 17 bytes -> 32 bytes
 ... 
```

请注意，有相当多的实现使用非标准化填充。一个例子是 PHP 中的 mcrypt 库（您可能可以使用 mcrypt 作为密码学中任何不良做法的基础）。这使用零填充，因此它只是填充`00`有价值的字节，直到明文块对齐。在这种情况下，结果大小可以这样计算：

L[密文]= (L[明文]/ L[块]- 1) * (L[块]+ 1)

显然，当您将它与任何不期望非标准化零填充的实现一起使用时，或者当明文可能以一个或多个`00`有价值的字节结尾时，您会遇到麻烦。

最后说明：某些语言（例如 Java `Cipher`）具有检索块大小甚至从加密实现中得到的密文的方法。在你开始自己实现之前检查 API 永远不会有坏处。

在撰写本文时，维基百科对[填充模式](http://en.wikipedia.org/wiki/Padding_%28cryptography%29)有很好的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:50:01.580

输出密文的长度取决于块长度、密码模式以及是否使用填充。

有一些像 CTS 这样的密码模式可以创建与输入相等的密码输出长度，即使使用分组密码也是如此。

关于1：如果输入数据的长度是密码块大小的倍数并且使用了填充，那么输出长度将大一个块，因为您需要至少一个字节来指定填充长度。

关于2：输出长度必须是块长度的倍数，因此它是输入长度+（输入长度*​​模块*长度）

# c# - 使用 Async Await 调用服务

> ID：15291546
> 
> 赞同：1
> 
> 时间：2013-03-08T10:14:26.097
> 
> 标签：c#, async-await

我正在考虑在`async` `await`调用服务时使用关键字，但想知道是否`await`需要关键字？

如果找到，则修改示例；我想做的是设置一个`async`对可以继续工作的服务的调用，但不需要等待响应：

```
async Task CallService(InformationForService informationForService)
{
    var service = SetupService();

    // Does this need the await keyword?
    service.Doof(informationForService);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:27:28.860

如果您将函数声明为异步并且它返回 Task，那么您的代码中的某些内容需要返回该类型。我在您的代码中看不到任何执行此操作的内容，因为您没有使用 await 关键字，该关键字通常会在将调用发送到服务时从您的函数中产生，然后在对服务的调用响应时从下一行继续.

如果您不关心服务返回什么，请忽略它，但使用 await 关键字，因为这将允许您的代码在服务调用完成时继续进行其他工作。

```
async Task<int> CallService(InformationForService informationForService)
{
    var service = SetupService();

    // Does this need the await keyword?
    await service.Doof(informationForService);

} 
```

此外，请注意，如果您使用 WCF 调用服务，则可以发出单向调用，该调用在消息的最后一个字节发送后完成。[Juval Lowy 在本文中讨论了单向调用](http://msdn.microsoft.com/en-us/magazine/cc163537.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:53:46.413

方法不必是`async`可等待的。有许多方法可以返回`Task`并可供 使用`await`，即使它们不是`async`。

我假设您的服务是 WCF 服务。在这种情况下，如果您（重新）使用 VS2012 生成代理，对于`Doof`您的服务上的每个方法，您[将获得一个`DoofAsync`适用于`await`](http://blogs.msdn.com/b/endpoint/archive/2010/11/13/simplified-asynchronous-programming-model-in-wcf-with-async-await.aspx).

你的`CallService`方法不需要是`async`；您可以返回`Task`您从中获得的内容`DoofAsync`：

```
Task CallService(InformationForService informationForService)
{
  var service = SetupService();
  return service.DoofAsync(informationForService);
} 
```

# multidimensional-array - 使用 CDBCriteria 动态生成递归数据数组

> ID：15291550
> 
> 赞同：0
> 
> 时间：2013-03-08T10:14:36.037
> 
> 标签：multidimensional-array, yii

请问我如何动态生成这种格式的数据数组。？我想要实现的是将此数据与我的下拉列表一起用作选项组数据

```
$data=array(
    'one'=>array(
        '1'=>'Satu',
        '2'=>'Dua',
        '3'=>'Tiga',
     ),
    'two'=>array(
        '1'=>'Sidji',
        '2'=>'Loro',
        '3'=>'Telu',
    ),
    'three'=>array(
        '1'=>'Hiji',
        '2'=>'Dua',
        '3'=>'Tilu',
     ),
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:49:49.420

您可以使用`groupField`属性[`CHtml::listData()`](http://www.yiiframework.com/doc/api/1.1/CHtml#listData-detail)来生成这样的数组。

```
$data=CHtml::listData($models,'valueAttribute','labelAttribute','groupAttribute'); 
```

其中`$models`是模型数组。你可以直接把这个`$data`数组传给[`CHtml::dropDownList()`](http://www.yiiframework.com/doc/api/1.1/CHtml#dropDownList-detail)yii会自动`optgroup`为你生成s

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:45:51.790

You can use this:

```
CMap::mergeArray(array($first array),$second array,....nth $array); 
```

# android - 启动相机后父活动被杀死

> ID：15291552
> 
> 赞同：1
> 
> 时间：2013-03-08T10:14:39.840
> 
> 标签：android

考虑这种情况。1.)onCreate - 找到背景图像视图的高度和宽度，并做一些数学运算来创建放置相机拍摄照片的子图像视图。但是，我添加了一个回调，`ViewTreeObserver.OnPreDrawListener`因为我无法获得它的宽度和高度。

2.) 意图启动相机

```
Intent intent = new Intent(
                android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        startActivityForResult(intent, CAMERA_REQUEST_CODE); 
```

当我按确定返回到我的活动的 onActivityResult 时，在相机中。我的活动被杀死，并且 onCreate 再次被触发。

序列触发

```
onCreate

onActivityResult 

ViewTreeObserver.OnPreDrawListener 
```

我得到空指针，因为我的子视图尚未创建。

我想在活动中拍摄 3 张相机图像。所以我不知道我应该如何将拍摄的照片保留在图像视图上。我该如何管理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T05:45:42.327

在 android 生命周期之间传递/持久化位图很麻烦。我只是使用一个静态类来存储位图并在不需要时适当地回收它们

# c# - 如果只使用静态方法，是否应该创建对象？

> ID：15291554
> 
> 赞同：-3
> 
> 时间：2013-03-08T10:14:44.033
> 
> 标签：c#, class, methods, static

如果一个类只包含静态方法，是否应该创建该类的对象以利用该类的静态方法？

例如。如果类`MyClass`只包含静态方法，以下哪个是首选？

```
MyClass.MyStaticMethod(3); 
```

或者

```
MyClass mc = new MyClass(); 
mc.MyStaticMethod(3); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T10:15:46.663

如果它们是静态的，则不需要实例。您不能在 C# 中执行此操作（正确 - 您可以在 Java 中执行此操作，我认为这很令人困惑）。

如果您*可以*实例化一个实例，我会倾向于该解决方案。如果你需要增强你的方法来维护状态，你会让这些方法变成静态的，这会给自己带来一些麻烦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T10:20:51.073

你**不能**像这样调用静态方法：

```
MyClass mc = new MyClass(); 
mc.MyStaticMethod(3); 
```

它不会编译。调用静态方法的唯一方法是，如果在实现它们的类之外调用，则在它们前面加上类型名称。

所以你只能用`MyClass.MyStaticMethod(3);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T10:21:00.047

与其他人在回答中所说的相反：

您**不能**在类实例上调用静态方法。这将产生编译器错误。

这使您的问题变得毫无意义，因为只有一个选择：

```
MyClass.MyStaticMethod(3); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T10:19:01.033

```
MyClass.MyStaticMethod(3); is preferred. 
```

此外，您希望将类声明为静态，这样它就不会被错误地实例化并且预期用途很明确

```
public static MyClass
{
public static Property {get;set;}
public static MyMethod() { .... }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T10:19:43.223

静态成员与类本身相关联，而**不是**与对象相关联。

通过对象访问静态成员是没有意义的，所以是一个**错误**..

您应该通过类本身访问静态成员

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T10:17:25.103

不，如果您只使用实例变量或方法，则不需要构造函数或创建实例

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-08T10:21:15.943

恕我直言 ，

如果该类具有静态方法 + 实例方法，并且您认为只使用静态方法，我建议是时候重构您的代码，使用“Extract CLass”重构来生成一个类并使其成为静态并使用如果静态方法在数量上很重要，则不要将静态方法与实例方法混为一谈。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-08T10:21:47.090

如果一个类只包含静态方法，最好也将类设为静态。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-08T10:28:19.040

如果您在类中声明所有静态方法，那么您将不得不使用类名调用这些方法，即

```
 MyClass.MyStaticMethod(3); 
```

***是的，您不能通过创建类的对象来调用静态方法***

您不需要创建该类的对象。如果您的类不包含任何内容，那么您应该将静态方法创建为静态类。

对于其他非静态变量或方法，您将需要该类对象。

# perl - 在 perl 中使用 while 循环

> ID：15291555
> 
> 赞同：1
> 
> 时间：2013-03-08T10:14:44.430
> 
> 标签：perl, selenium

我对 perl 很陌生。我正在使用 selenium 在 perl 中开发一个脚本。我有一个 .pl 文件，其中有一个按钮`(Test and Save)`。我的逻辑是我想一次又一次地点击那个按钮直到它存在。我使用了以下命令。

```
while ($sel->is_element_present ("//Button[text()='Test and Save']"))
{$sel->clickAndWait("//Button[text()='Test and Save']");} 
```

但问题是即使按钮消失了，它也没有出现循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:32:50.243

该元素可能存在于页面上但不可见。试试`is_visible()`吧。

（另外，请尝试查看页面源以确认该元素是否仍然存在但不可见。）

# web-services - 如何从 webservice 接收到 wso2 esb 代理服务 outsequence 的响应？

> ID：15291560
> 
> 赞同：0
> 
> 时间：2013-03-08T10:14:58.993
> 
> 标签：web-services, soap, jms, wso2, wso2esb

目前，我正在将 xml 作为 jms 消息从 activemq 发送到 wso2 esb 代理服务。我正在使用中介类聚合该消息，并且该消息已发送到外部 Web 服务。

所以现在，如何从 webservice 获得对 wso2 esb 代理 outsequence 的响应，我必须将它作为 jms 消息发送回活动的 mq 输出队列。

```
 Here is the proxy service ::-

    <proxy xmlns="http://ws.apache.org/ns/synapse" name="Demo" transports="https,http,jms" statistics="disable" trace="disable" startOnLoad="true">
       <target>
          <inSequence>
             <property name="OUT_ONLY" value="false"/>
             <property name="ContentType" value="text/plain"/>
             <class name="com.test.Mediator1"/>
             <send>
                <endpoint>
                   <address uri="http://localhost:9989/ws/param?wsdl"/>
                </endpoint>
             </send>
          </inSequence>
          <outSequence>
             <send>
                <endpoint>
                   <address uri="jms:/OutputQueue?transport.jms.ConnectionFactoryJNDIName=QueueConnectionFactory&java.naming.factory.initial=org.apache.activemq.jndi.ActiveMQInitialContextFactory&java.naming.provider.url=tcp://localhost:61616"/>
                </endpoint>
             </send>
          </outSequence>
       </target>
       <parameter name="transport.jms.ContentType">
          <rules>         
             <jmsProperty>contentType</jmsProperty>         
             <default>application/xml</default>      
          </rules>
       </parameter>
       <description></description>
    </proxy>

    This is the message which I got when I invoke webservice through soapui client.

    <?xml version="1.0" ?><S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/"><S:Body><ns2:getHelloWorldAsStringResponse xmlns:ns2="http://ws.mkyong.com/"><result>true</result></ns2:getHelloWorldAsStringResponse></S:Body></S:Envelope>

    This is the message which I got in activemq output queue.

    <?xml version='1.0' encoding='UTF-8'?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Body/></soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T01:41:00.777

您可以使用 callout mediator 调用服务并获得对序列的响应。请参考 [1] [2]

[1] [http://docs.wso2.org/wiki/display/ESB460/Callout+Mediator](http://docs.wso2.org/wiki/display/ESB460/Callout+Mediator)

[2] [http://docs.wso2.org/wiki/display/ESB460/Sample+430%3A+Simple+Callout+Mediator+for+Synchronized+Web+Service+Invocation](http://docs.wso2.org/wiki/display/ESB460/Sample+430%3A+Simple+Callout+Mediator+for+Synchronized+Web+Service+Invocation)

# php - RedBeanPhp 如何创建活动记录模型

> ID：15291561
> 
> 赞同：0
> 
> 时间：2013-03-08T10:15:00.753
> 
> 标签：php, redbean

任何人都知道可以将其转换为：

```
$u = R::dispense('users');
$u->login = $this->login;
$u->password = $this->password;
R::store($u); 
```

进入这个：

```
class User
{
    var $login;
    var $password;
    var $id;

    public function save() {
        $u = R::dispense('users');
        $u->login = $this->login;
        $u->password = $this->password;
        $this->id = R::store($u);
    }
}

$u = new User();
$u->login = 'login';
$u->password = 'pass';
$u->save(); 
```

但不使用代码保存这样的东西

```
public function save() {
    R::store($this);
} 
```

我厌倦了重写像 $u->login = $this->login; 这样的语句。

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T13:41:00.807

您应该创建一个扩展 Redbean 简单模型的用户模型，如下所示：

```
class Model_users extends \RedBean_SimpleModel
{
    private $_login = 'My default login name';
    private $_password = 'My default not so secret password';

    // The following method is executed right before an insert or update
    function update()
    {
        $this->bean->login = $this->_login;
        $this->bean->password = $this->_password;
    }
} 
```

然后你可以简单地使用：

```
$user = R::dispense('users');
R::store($user); 
```

祝你好运！

# javascript - 将列表从 MVC ViewBag 传递给 JavaScript

> ID：15291566
> 
> 赞同：13
> 
> 时间：2013-03-08T10:15:16.080
> 
> 标签：javascript, asp.net-mvc-4, viewbag

我有一个用户列表，我使用视图包从控制器传递到我的视图。现在我需要能够将相同的列表传递给页面上的 javascript。我可以使用 foreach 循环重建列表：

```
 @foreach (var item in ViewBag.userList) //Gets list of users passed from controller and adds markers to the map
{
    var userLat = item.LastLatitude;
    var userLon = item.LastLongitude;
    var _userId = item.Id;

    <script>array.push({"userId":"'@_userId'","userLat":"'@userLat'","userLon":"'@userLon'"});</script>
} 
```

然而，这似乎是一种混乱的方法，如果进行更改，则需要进行大量返工。我知道 Stack Overflow 上也有类似的帖子，但其中很多都使用以前版本的 MVC，而且似乎不适用相同的语法。有任何想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-08T10:17:24.857

您可以使用 JSON 解析器在一行安全的代码中完成此操作。你绝对不应该像你在你的例子中尝试做的那样，用一些字符串连接和东西手动构建 JSON。也不需要编写任何循环。

这是正确的方法：

```
<script type="text/javascript">
    var array = @Html.Raw(
        Json.Encode(
            ((IEnumerable<UserModel>)ViewBag.userList).Select(user => new 
            { 
                userId = user.Id, 
                userLat = user.LastLatitude, 
                userLon = user.LastLongitude 
            })
        )
    );

    alert(array[0].userId);
</script> 
```

The generated HTML will look exactly as you expect:

```
<script type="text/javascript">
    var array = [{"userId":1,"userLat":10,"userLon":15}, {"userId":2,"userLat":20,"userLon":30}, ...];
    alert(array[0].userId);
</script> 
```

Of course the next level of improvement in this code is to get rid of the `ViewCrap` and use a strongly typed view model.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T10:21:12.793

Another option, could be to create a new action in your controller returning a JsonResult. This json result could return your list. In your page you can call the action with jquery and use it from there.

```
public ActionResult GetMyList()
{
    var list = GetMyUserList();

    return Json(new { userlist = list }, JsonRequestBehaviour.AllowGet);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-19T09:56:55.270

@Darin Dimitrov answer is spot on. I would just like to add to it if anyone is passing a model and not a viewbag.

```
<script type="text/javascript">
 var array = @Html.Raw(Json.Encode(
            Model.YourModel.Select(_ => new {
              id = _.Id,
              text = _.Name
            })
          )) 
```

My use case was specific to [select2](http://ivaynberg.github.io/select2/) . One can then just pass the array to the data: attribute

```
 $("#storeSelect").select2({
        data: array,
        placeholder: "Select something"
 });
</script> 
```

**viewmodel**

```
public class YourViewModel
  {
    public IEnumarable<YourPoco> YourPocos { get; set; }
  } 
```

**Controller**

```
public class YourController : Controller
{
    public ActionResult Index()
    {
        YourViewModel vm = new YourViewModel{
            // Using Dependancy injection
            YourPocos = yourRepo.GetYourPocos();
        };
        return View("Index", "_Layout",vm);
    }
} 
```

I realise this answer might be redundant, but it is the first time i am using Json.Encode and passing model values to a jquery extension. This for me is too cool. It does to a certain degree create massive extensibility on what would otherwise be an @htmlhelper

# matlab - 灰度图像分析

> ID：15291570
> 
> 赞同：0
> 
> 时间：2013-03-08T10:15:25.887
> 
> 标签：matlab, image-processing

我有一个 128*500 像素的灰度图像。我需要分析图像并确定它是否遵循任何特定分布，例如 Weibull 或对数正态分布或 K 分布。我需要有关如何分析图像的帮助？我可以对此图像使用加窗傅里叶变换吗？如果有怎么办？帮助我提供特定的教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:46:08.057

正如 Junuxx 所说，回答你的问题有点困难。但是，无论`probability match`您想检查[什么](http://www.mathworks.com/matlabcentral/fileexchange/34943) `MATLAB Exchange Function`，都可以派上用场。我自己用过很多次。

它有什么作用？--> 好吧，它的名字是`Fit all valid parametric probability distributions to data`，我个人认为它是不言自明的。;)

阅读有关特定功能的相关帖子[。](http://blogs.mathworks.com/pick/2012/02/10/finding-the-best/)

希望能帮助到你！

# python - python列表文字/使用动态数量的元素初始化

> ID：15291574
> 
> 赞同：2
> 
> 时间：2013-03-08T10:15:42.373
> 
> 标签：python

我的测试脚本中有以下列表初始化：

```
newSequenceCore=["ls", "ns", "*", "cm", "*", "ov", "ov", "ov", "ov", "kd"] 
```

（代表要在控制台应用程序中输入的一系列命令）。

有没有一种惯用的方法来动态控制列表中“ov”元素的数量？（即不必创建一个函数，将“ov”元素的数量作为返回列表的参数）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T10:19:04.847

您可以为此使用乘法运算符。

```
>>> ['ov'] * 4
['ov', 'ov', 'ov', 'ov']

>>> ["ls", "ns", "*", "cm", "*"] + ["ov"] * 4 + ["kd"]
['ls', 'ns', '*', 'cm', '*', 'ov', 'ov', 'ov', 'ov', 'kd']
>>> 
```

有趣的提示：您也可以使用字符串执行此操作：

```
>>> '-' * 15
'---------------' 
```

# c++ - 如何使用 marshap_cppstd.h 将带有命名空间接口的标头包含到 c++/cli 项目中

> ID：15291577
> 
> 赞同：1
> 
> 时间：2013-03-08T10:15:52.640
> 
> 标签：c++, c++-cli, marshalling

尝试编译使用本机库的 c++/cli 库时出现几个错误，并且 c++/cli 项目包括用于编组的 msclr 帮助程序。如果我添加以下标题

```
#include <msclr\marshal_cppstd.h> 
```

我得到了错误

```
Error   1   error C2059: syntax error : '<class-head>' 
```

还有其他几个人也在跟进。

语法错误指向外部（第 3 方）c++ lib 的头文件（因此我无法更改头文件）。

```
namespace SomeExternalLibNamespace
{
   namespace interface // problem might be here (interface is a keyword in c++/cli)
   { 
```

如果我不包含 marshal_cppstd.h 并使用自己的方法手动进行编组，那么一切都可以编译并正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T11:52:41.947

问题是外部 c++ 库命名为命名空间***接口***。这是 c++/cli 中的关键字。这个库的 c++/cli-wrapper 的 Visual Studio 解析器/编译器在包含此库的 c++ 标头（以及名为***interface***的命名空间）并包括帮助程序的标头（例如在 marshap_cppstd.h 中）时会损坏。

如果不自己进行编组而不是使用 ms-helpers，我无法解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:46:00.070

我的错，没有正确阅读它，如果'interface'确实是一个关键字，那么这显然是错误的原因，例如尝试使用：namespace interface_，然后重新编译以检查结果。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-08T10:36:44.600

您应该使用引号：“”来包含自定义头文件：

```
#include "msclr\marshal_cppstd.h" 
```

# puppet - 在资源中调用 puppet 函数来定义类属性

> ID：15291580
> 
> 赞同：1
> 
> 时间：2013-03-08T10:16:02.003
> 
> 标签：puppet

我试图在清单中的 puppet 资源中调用一个新函数，但我不知道如何创建一个资源来评估从资源中的函数检索到的值。

## 定义函数

目录*puppet-module/lib/puppet/parser/functions/*。

```
module Puppet::Parser::Functions
  newfunction(:retrive_pub_key, :type => :rvalue, :doc => <<-EOS
    Returns content of ssh key pub file.
    EOS
  ) do |args|
    File.read(args[0])
  end
end 
```

调用函数：

```
$key = retrive_pub_key('/opt/ssh-keys/admin_rsa.pub') 
```

如何调用资源内的函数以使用 rvalue定义**$key变量？**创建“admin_rsa.pub”之后？

## 调用函数

在 Puppet 清单*init.pp*中。

```
??? {"retrieve_key":
    ???,
    ???,
    require => [File["/opt/ssh-keys/admin_rsa.pub"],
} 
```

我一直在关注这个关于[puppet 函数的教程](http://www.masterzen.fr/2011/10/29/puppet-extension-points-part-1/)

这是测试功能[的示例项目。](https://bitbucket.org/ricardogarfe/gerrit-ssh-sql-template/overview)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-16T13:20:40.560

如果我理解正确，您希望将某个文件的内容设置*为*`/opt/ssh-keys`您目录中相应公钥文件的内容。

像这样的东西会起作用吗？

```
file { 'admin_rsa'
    content => retrieve_pub_key("/opt/ssh-keys/${name}.pub"),
    path => '/home/admin/.ssh/id_rsa.pub',
    ....
    require => File["/opt/ssh-keys/${name}.pub"],
} 
```

# sql-server - sql:variable 在 MS-SQL 节点中定义 xpath

> ID：15291581
> 
> 赞同：1
> 
> 时间：2013-03-08T10:16:04.810
> 
> 标签：sql-server, xml, tsql, xquery, xquery-sql

我浏览了一些来自不同博客的示例和评论，虽然我看到了很多使用 sql:variable 选择某些节点/属性的示例，但我不确定节点选择这样简单的东西是否可以用 SQL 变量替换. 例如，如果我有以下内容：

```
declare @NodeStartPoint    varchar(255) = '/root/parent/child' 
```

后来，我可能会使用交叉应用，例如：

```
cross apply MyXml.nodes(@NodeStartPoint) 
```

显然上述交叉应用节点选择不起作用。我也试过：

```
cross apply MyXml.nodes('sql:variable(@NodeStartPoint)') 
```

可能还有其他一些奇怪的组合！

这个想法是让我可以从参数等传递节点选择。

我已经开始浏览[http://blogs.msdn.com/b/mrys/](http://blogs.msdn.com/b/mrys/)和[http://msdn.microsoft.com/en-us/library/ms186960%28SQL.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms186960%28SQL.90%29.aspx)但到目前为止，我找不到任何我想要达到的目标的例子，这让我觉得我找错了树！:)

任何想法都感激不尽！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:05:25.560

好的，鉴于我在互联网上看到的类似问题的回答类型，有点回答我自己的问题。这个非常相似：[将参数传递给 T-SQL 节点方法（XML CROSS APPLY）](https://stackoverflow.com/questions/7946224/passing-an-argument-to-the-t-sql-nodes-method-xml-cross-apply)

所以，我猜它不能在 nodes() 语句中使用变量替换来完成..

# javascript - Javascript Date.parse 方法无法正常工作

> ID：15291585
> 
> 赞同：6
> 
> 时间：2013-03-08T10:16:13.937
> 
> 标签：javascript, date, date-parsing

我正在使用一种方法来检查我的应用程序中的日期是否有效

```
myApp.isValidDate = function(date) {
  var timestamp;
  timestamp = Date.parse(date);
  if (isNaN(timestamp) === false) {
    return true;
  }
  return false;
}; 
```

它在大多数情况下都能正常工作，但是当我输入像`"something.com Eq Phone 1"`Date.parse这样`978300000000`的值时返回并且方法返回`true`

它是如何将其解析为实际日期的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T10:45:14.180

这种行为在浏览器中并不一致。在 IE9 和 FireFox 中，`Nan`正确返回，但在 Chrome 中，它似乎认为`something.com Eq Phone 1`是 2001 年 1 月 1 日。

我自己没有使用过这个库，但为什么不看看[DateJS](http://www.datejs.com/)呢？我复制`something.com Eq Phone 1`到他们的演示中，但它没有产生有效的日期。

**编辑：**

至于为什么会这样，查看 Chromium 的[日期解析源代码](http://code.google.com/p/chromium/codesearch#chromium/src/v8/src/dateparser-inl.h&sq=package:chromium&rcl=1362686753&l=37)，我们可以看到以下注释：

> 忽略第一个数字之前的任何无法识别的单词。

和

> MM 和 DD 缺失时默认为 01
> 
> mm、ss 和 sss 缺失时默认为 00

这可以解释为什么它设法（基本上）将数字 1 转换为有效日期。

**编辑2：**

因此，为了澄清，中的数字`something.com Eq Phone 1`似乎表示月份。例如，将 更改`1`为 a`3`会给出 2001 年 3 月 1 日。

在这个阶段，我找不到任何确凿的证据表明年份默认为 2001 年。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:48:02.587

正如您在此处看到的，这似乎是 Chrome 的 parse.date 实现的一个怪癖：

[http://jsfiddle.net/feZ9P/1/](http://jsfiddle.net/feZ9P/1/)

```
"something.com" is false
"something.com is invalid" is false
"something.com eq phone" is false
"something.com eq phone 1" is true
"something.com eq phone 5" is true
"anything that has one at the end 1" is true
"as long as 1 isn't earlier in the string 1" is false 
```

似乎只有在字符串末尾附加了一个数字时才会发生，如果没有，则似乎不会发生此错误。

# java - 如何使用需要正确 HTML 的库处理来自 Web 的无效 HTML 文档

> ID：15291586
> 
> 赞同：4
> 
> 时间：2013-03-08T10:16:14.567
> 
> 标签：java, html, itext, saxparser

我在解析网站时收到此错误。错误：“实体“ContentType”的声明必须以“>”结尾。' 或输入类型必须关闭

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:19:17.203

你考虑过[JTidy](http://sourceforge.net/projects/jtidy/)吗？

> JTidy 是 HTML Tidy 的 Java 端口，是一个 HTML 语法检查器和漂亮的打印机。像它的非 Java 表亲一样，JTidy 可以用作清理格式错误和有缺陷的 HTML 的工具。此外，JTidy 还为现实世界的 HTML 提供了一个 DOM 解析器。

显然，在某些时候它会根据 HTML 格式的糟糕程度而与 HTML 发生冲突，但您可能会发现这对您有用。

# php - 在约束查询慢？

> ID：15291587
> 
> 赞同：1
> 
> 时间：2013-03-08T10:16:18.863
> 
> 标签：php, mysql

我有这个需要时间的查询。下面是那个查询-

```
SELECT
    m1.mes_id,
    m1.body, 
    m1.subject,
    m1.frm_id AS mem_id,
    m1.date 
FROM 
    messages_system_new m1 
WHERE 
    m1.mes_id IN 
        (SELECT
            MAX(mn1.mes_id) AS mes_id 
        FROM messages_system_new mn1
        WHERE
            mn1.mem_id = '401' 
            AND mn1.frm_id != '401' 
            AND mn1.trashed_user NOT LIKE '%401%' 
            AND mn1.type = 'message' 
            AND mn1.folder = 'inbox' AND mn1.is_spam='N' 
        GROUP BY mn1.frm_id
        ) 
```

当被解雇时解释它的给予

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   PRIMARY m1  ALL (NULL)  (NULL)  (NULL)  (NULL)  6091    Using where
2   DEPENDENT SUBQUERY  mn1 ref mem_id,frm_id   mem_id  8   const   59  Using where; Using temporary; Using filesort 
```

这是什么意思，我该如何改进查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:32:47.017

可能改用 JOIN 来尝试。像这样的东西

```
SELECT
    m1.mes_id,
    m1.body, 
    m1.subject,
    m1.frm_id AS mem_id,
    m1.date 
FROM messages_system_new m1 
INNER JOIN (SELECT mn1.frm_id  MAX(mn1.mes_id) AS mes_id 
        FROM messages_system_new mn1
        WHERE
            mn1.mem_id = '401' 
            AND mn1.frm_id != '401' 
            AND mn1.trashed_user NOT LIKE '%401%' 
            AND mn1.type = 'message' 
            AND mn1.folder = 'inbox' AND mn1.is_spam='N' 
        GROUP BY mn1.frm_id
        ) Sub1
ON m1.mes_id = Sub1.mes_id 
```

messafes_system_new 上的索引是什么？

# ajax - JSF 2 中自定义验证中的空指针异常

> ID：15291594
> 
> 赞同：0
> 
> 时间：2013-03-08T10:16:35.060
> 
> 标签：ajax, jsf-2, richfaces

我有 3 h:inputText ：名称、起始编号和结束编号。

如 Bean 类所示，我有两个自定义验证函数 validateName 和 validateNumber。这些函数的调用如 show.xhtml 中所示。

其中 validateName() 成功运行，但在 validateNumber() 处生成错误，如下所示：

show.xhtml @83,93 验证器="#{myBean.validateNumber}": java.lang.NullPointerException

第 83 行是：

```
<h:inputText id="idstart" value="#{myBean.start}" validator="#{myBean.validateNumber}"/> 
```

显示.xhtml：

```
<h:inputText id="name" required="true" requiredMessage="Name cannot be empty!" value="#{myBean.name}" validator="#{myBean.validateName}">
<rich:message for="name"/>

<h:inputText id="idstart" value="#{myBean.start}" validator="#{myBean.validateNumber}"/>
<rich:message for="id1"/>

<h:inputText id="id2" value="#{myBean.end}" /> 
```

SessionScoped bean：

```
import javax.faces.application.Application;
import javax.faces.validator.ValidatorException;
public class MyBean
{
private Integer start;
private Integer end;
private String name;

public void validateName(FacesContext context,UIComponent component,Object value)throws ValidatorException
    {
        String name=value.toString();
        /*Code for having Unique name */
        FacesMessage msg = new FacesMessage("Unique Validation failed","Name used is already existing");
                 msg.setSeverity(FacesMessage.SEVERITY_ERROR);
                 throw new ValidatorException(msg);
            }           
        }
    }

public void validateNumber(FacesContext context,UIComponent component,Object value)throws ValidatorException
    {

        if(start > end)
            {
            FacesMessage msg = new FacesMessage("Number Validation failed","Start Number Should be less the End Number");
                 msg.setSeverity(FacesMessage.SEVERITY_ERROR);
                 throw new ValidatorException(msg);
            }           
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:35:39.813

您不应该直接从验证器内部访问 bean 的属性。那时它们还没有被设置。JSF 需要在更新模型值（阶段 4）之前首先处理验证（阶段 3）。相反，您应该从验证器方法的第三个参数或组件树中获取值。

在您的`validateNumber`方法中，第三个参数是开始日期。结束日期当时尚未转换/验证。您需要从请求参数映射中*手动获取它，*

```
String end = context.getExternalContext().getRequestParameterMap().get("formIc:id2"); 
```

*（你的父母在哪里`formId`；`id`顺便`<h:form>`说一句，这`id2`是一个糟糕的选择，而是选择更明智和自我记录的东西，例如`end`）*

*或*作为组件树中的提交值：

```
UIForm formComponent = (UIForm) component.getNamingContainer();
UIInput endComponent = (UIInput) formComponent.findComponent("id2");
String end = endComponent.getSubmittedValue(); 
```

### 也可以看看：

*   [JSF 不支持跨字段验证，有解决方法吗？](https://stackoverflow.com/questions/6282466/jsf2-0-doesnt-support-cross-field-validation-is-there-a-workaround/6282509#6282509)
*   [OmniFaces -`<o:validateOrder>`](http://showcase.omnifaces.org/validators/validateOrder)

# regex - 使用 RegEx 提取逗号分隔值

> ID：15291595
> 
> 赞同：3
> 
> 时间：2013-03-08T10:16:35.557
> 
> 标签：regex, powershell, csv

我想知道是否有人可以对使用 RegEx 提取一些值有所了解。

我有一个看起来像这样的字符串：

```
$Aa37.33092,-2.9084$ 
```

*   该字符串将始终以美元符号开头和结尾。
*   起始美元符号后的两个字母无关紧要，但会一直存在。
*   后面是两个数值，用逗号分隔。
*   两者都可以是负数，但不一定是。
*   两个CAN在点之前最多有三位，在点之后最多有五位（实际位数在字符串到达​​之前是未知的）

然后每个值都应该进入 PowerShell 中的一个唯一变量以进行进一步处理，但我想我可以应付其余的。我只需要一些关于如何提取这些值的提示或指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:32:14.260

像这样的东西：

```
$vals = [regex]::Matches('$Aa37.33092,-2.9084$','(-?\d*\.\d*)') | 
select -expa value 
$val1 = $vals[0]
$val2 = $vals[1] 
```

使用拆分方法：

```
$vals =( ('$Aa37.33092,-2.9084$').Split(',') ) -replace '\$|[a-z]'
$val1 = $vals[0]
$val2 = $vals[1] 
```

或使用`select-string`

```
 '$Aa37.33092,-2.9084$' | select-string '(-?\d*\.\d*)' -AllMatches |
   Foreach {$_.matches} | select -expa value 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T11:16:33.800

还有另一种可能：

```
$vals = '$Aa37.33092,-2.9084$' -split '[^--9]' -match '\S'
$val1,$val2 = $vals[0,1] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T10:47:27.773

正如我在上面的评论中提到的，这个正则表达式似乎有效（如果有人有更简单的解决方案，我很感兴趣）

```
"\$\D*(-?\d*[.]\d*),(-?\d*[.]\d*)\$" 
```

所以在它周围有一点PowerShell：

```
$sourceString = '$Aa37.33092,-2.9084$'
if($sourceString -match "\$\D*(-?\d*[.]\d*),(-?\d*[.]\d*)\$")
{
    $firstNumber = $matches[1]
    $secondNumber = $matches[2]
    Write-Host ("Here are the numbers: {0} - {1}" -f $firstNumber,$secondNumber)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T10:25:24.923

你很亲密。查看此页面以[调试正则表达式](http://www.debuggex.com/?re=&str=)并尝试一些简单的方法，例如： \$\D*((-?\d*[.]\d*) *,)* \$

# git - 如何使用命令行了解我的分支是否位于 Git 中的远程存储库后面？

> ID：15291598
> 
> 赞同：0
> 
> 时间：2013-03-08T10:16:39.957
> 
> 标签：git

如果我在存储库后面，我应该在 Windows 中使用什么命令来学习？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T10:19:59.637

只需键入

```
git status 
```

它会告诉你有多少次提交：

![提前一次提交](../Images/a92c39418759ef0f2659935d1f9fcee7.png)

对于“落后”，你必须这样做

```
git fetch 
```

然后是`git status`：

![在此处输入图像描述](../Images/440402829aa05541cc23592658f17ccd.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:20:14.113

首先，您必须从存储库中获取新的引用：

```
git fetch <remote> <branch> 
```

然后使用

```
git status 
```

会告诉你你落后了多少次提交。

# c# - WinRT XAML 文本框、SelectionStart 和 CR/LF

> ID：15291600
> 
> 赞同：4
> 
> 时间：2013-03-08T10:16:42.113
> 
> 标签：c#, string, xaml, textbox, windows-store-apps

我在其中一个中使用了一个简单的多行`TextBox`，`Windows Store Apps`我希望能够使用`tab`来缩进文本。

由于 WinRT 上没有 XAML`AcceptsTab`属性，`TextBox`我想当我检测到 Tab 击键时，我必须手动处理它。

**问题是：`\r\n`似乎由 SelectionStart 属性作为一个字符而不是两个字符来处理，我没有得到真正的`char`位置。**

我现在唯一的想法是`SelectionStart`通过解析文本并为我在插入符号之前看到`SelectionStart`的每个事件添加 1 来规范化 。`\r\n`

```
public static class TextBoxExtension
{
    public static int GetNormalizedSelectionStart(this TextBox textBox)
    {
        int occurences = 0;
        string source = textBox.Text;

        for (var index = 0; index < textBox.SelectionStart + occurences ; index++)
        {
            if (source[index] == '\r' && source[index + 1] == '\n')
                occurences++;
        }
        return textBox.SelectionStart + occurences;
    }
} 
```

最后在`SelectionStart`操作后重置为 0，所以我必须将它设置回正确的位置，这次使用非标准化位置。这是调用者：

```
if (e.Key == VirtualKey.Tab)
{
    int cursorIndex = MainTextBox.SelectionStart;
    int cursorIndexNormalized = MainTextBox.GetNormalizedSelectionStart();
    MainTextBox.Text = MainTextBox.Text.Insert(cursorIndexNormalized, "\t");
    MainTextBox.SelectionStart = cursorIndex + 1;
    e.Handled = true;
} 
```

它有效，但是……我又重新发明了那个圆形的东西吗？有没有更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-27T18:06:33.177

似乎您必须执行“Ctrl + Tab”才能在文本框中实际插入选项卡。因此，您所要做的就是这样

```
TextBox_KeyDown(object sender, System.Windows.Forms.KeyEventArgs e)
{
      if (e.KeyCode == Keys.Tab)
      {
          e.Handled = true;
          SendKeys(^{TAB});
      }
} 
```

`^`代表`CTRL`键和你的`TAB`tab键。使用此组合，您可以在应用程序中正常使用 Tab

# java - 必须为元素类型“beans”声明属性“xmlns”

> ID：15291602
> 
> 赞同：6
> 
> 时间：2013-03-08T10:16:44.297
> 
> 标签：java, spring, asynchronous

我是弹簧框架的新手。我正在尝试使用 spring @Async 注释的教程。我**在类路径资源 [spring.xml] 的 XML 文档中收到此错误第 9 行无效；嵌套异常是 org.xml.sax.SAXParseException；行号：9；列号：109；必须为元素类型“beans”声明属性“xmlns”**。

我想知道为什么会发生此错误以及如何解决？

我的 spring.xml 文件在下面

**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN 2.0//EN" "http://www.springframework.org/dtd/spring-beans-2.0.dtd">
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:p="http://www.springframework.org/schema/p" xmlns:context="http://www.springframework.org/schema/context"
xmlns:task="http://www.springframework.org/schema/task"
xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd">
<context:component-scan base-package="cs"/>
<bean id="regularService" class="cs.RegularService">

</bean>
<task:annotation-driven/>
</beans> 
```

**

常规服务.java

```
package cs;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import cs.MailUtility;

@Service
public class RegularService {

@Autowired
private MailUtility mailUtility ;

public void registerUser(String userName){

System.out.println(" User registration for  "+userName +" complete");

mailUtility.sendMail(userName);

System.out.println(" Registration Complete. Mail will be send after 5 seconds ");
}

} 
```

MailUtility.java

```
package cs;

import org.springframework.scheduling.annotation.Async;
import org.springframework.stereotype.Component;

@Component
public class MailUtility {

@Async
public void sendMail(String name){

System.out.println(" I Will be formatting html mail and sending it  ");

try {
Thread.sleep(5000);

} catch (InterruptedException e) {

e.printStackTrace();
}

System.out.println(" Asynchronous method call of send email — Complete ");

}

} 
```

测试服务.java

```
package cs;

import org.springframework.context.support.ClassPathXmlApplicationContext;
import cs.RegularService;

public class TestService {

public static void main(String args[]){

ClassPathXmlApplicationContext appContext = new ClassPathXmlApplicationContext(new String[] {"spring.xml"});

RegularService regService = (RegularService) appContext.getBean("regularService");

regService.registerUser("Skill-Guru");

}

} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-08T10:22:18.547

删除这一行：

```
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN 2.0//EN" "http://www.springframework.org/dtd/spring-beans-2.0.dtd"> 
```

那么你的文件是有效的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-24T16:47:08.103

您正在混合 DTD 和 XSD 声明。只需删除该行：

```
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:30:11.057

你的 springmvc`config.xml`有错误。

xmlns:task="http://www.springframework.org/schema/**任务**"

将其更新为**mvc**

# web-services - 黑莓未使用 WIFI 连接到网络上的本地 IP

> ID：15291603
> 
> 赞同：0
> 
> 时间：2013-03-08T10:16:49.327
> 
> 标签：web-services, cordova, networking, jquery-mobile, blackberry

我正在 Zend Studio 上使用 Phonegap 和 jQuery mobile 构建移动应用程序，并且我正在运行 OSX Mountain Lion 的 macbook pro 上执行此操作。

我已将该应用程序部署到 iPhone 4、Samsung Galaxy Android 设备和 Blackberry Curve。

该应用程序为各种功能调用 Web 服务。该网络服务目前位于我们本地 wifi 网络上的另一台 macbook 上。iPhone 和 Android 连接到 web 服务并在连接到 wifi 网络时 100% 工作。

但是，黑莓在执行 web 服务调用时，得到一个 SQUID ERROR?? 这告诉我们找不到该网址。我们正在使用运行服务器的 macbook 的本地 IP 进行连接。在黑莓的浏览器中，当我单独输入 IP 地址时，我会到达在网络服务器上运行的 IIS。但是当我从应用程序本身进行 web 服务调用时，我收到 URL NOT FOUND 错误。

我还关闭了黑莓手机网络并确保它只连接到本地 WIFI 连接，但这并不能解决问题。

以前有没有其他人遇到过这种类型的问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:25:22.633

您需要将以下内容添加到您的 Url：

```
url += ";interface=wifi"; 
```

你可以看看这个参考： [黑莓](http://docs.blackberry.com/en/developers/deliverables/11938/Open_a_WiFi_HTTP_connection_509041_11.jsp)

# xcode - 更新标签栏项目的徽章值延迟

> ID：15291604
> 
> 赞同：4
> 
> 时间：2013-03-08T10:16:56.907
> 
> 标签：xcode, ios6, uitabbaritem, tabbarcontroller

我有一个每 5 秒运行一次以检查新消息的功能，如果触发了新消息，我将使用以下代码更新标签栏项目的徽章值

```
 NSString *chkUrl = @"http://domain.com/script.php";
    NSURL *url = [[[NSURL alloc] initWithString:chkUrl] autorelease];
    NSError *error = nil;
    NSStringEncoding encoding;
    NSString *returnHTML = [[NSString alloc] initWithContentsOfURL:url usedEncoding:&encoding error:&error];

    int totalNewMessages = [[returnHTML stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]] intValue];
    AppDelegate *mainDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    NSLog(@"badge before:%@",[[mainDelegate.tabBarController.viewControllers objectAtIndex:2] tabBarItem].badgeValue);
    [[mainDelegate.tabBarController.viewControllers objectAtIndex:2] tabBarItem].badgeValue = [NSString stringWithFormat:@"%d",totalNewMessages];
    NSLog(@"badge after:%@",[[mainDelegate.tabBarController.viewControllers objectAtIndex:2] tabBarItem].badgeValue); 
```

问题是徽章值没有立即更新！也许在第四次通话中的第三次，它会被更新！我做错了什么！或者它是iOS中的一个错误！

作为一种解决方法，我在每次更新时重复上述行 10 次，但它再次没有更新，所以问题是更新徽章值的延迟，这不是重新运行更新行的问题！

顺便说一句，这个问题发生在 Xcode 4.6 Simulator 和我的带有 iOS 6.1 的 iPhone 5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T17:40:42.453

我发现了问题:)

我每 5 秒运行一次的函数在下面的代码中

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,
                                         (unsigned long)NULL), ^(void) {
    [self checkNewMessages];
}); 
```

当我将其更改为以下内容时，它就像一个魅力！

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    dispatch_async(dispatch_get_main_queue(), ^{
        [self checkNewMessages];
    });
}); 
```

# r - 按列名合并 3 个 data.frames

> ID：15291613
> 
> 赞同：9
> 
> 时间：2013-03-08T10:17:37.510
> 
> 标签：r, dataframe

我有三个独立`data.frames`的。这三个`data.frames`具有相同的列数和相同的行数。此外，它们具有相同的列名。我正在尝试根据列名合并三个 data.frames。我正在使用以下代码来合并两个 data.frames 并返回匹配的数量。

> ```
> Merged_DF = sapply(names(DF1),function(n) nrow(merge(DF1, DF2, by=n))) 
> ```

问题是，虽然在这个例子中有两个 data.frames，但在我的例子中，我有 3 个 data.frames。如何修改代码以合并三个 data.frame 而不是两个？我试图以这种方式修改字符串，只需添加第三个 data.frame 但它不起作用：

```
 Merged_DF = sapply(names(DF1),function(n) nrow(merge(DF1, DF2, DF3,  by=n))) 
```

它返回以下错误：

```
 Error in fix.by(by.x, x) :  'by' must specify column(s) as numbers, names or logical 
```

前任：

> DF1
> 
> ```
>  G1  G2  G3
>   a   b   f
>   b   c   a
>   c   d   b 
> ```
> 
> DF2
> 
> ```
>  G1  G2  G3
>   A   b   f
>   b   c   a
>   h   M   b 
> ```
> 
> DF3
> 
> ```
>  G1  G2  G3
>   a   b   f
>   b   l   a
>   j   M   v 
> ```

data.frames 有大约 250 行和 50 列。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T10:32:21.767

您可以使用该`Reduce`功能合并多个数据框：

```
df_list <- list(DF1, DF2, DF3)
Reduce(function(x, y) merge(x, y, all=TRUE), df_list, accumulate=FALSE) 
```

或`merge_recurse`从`reshape`包装中：

```
library(reshape)
data <- merge_recurse(df_list) 
```

另请参阅 R Wiki：[合并数据帧](http://rwiki.sciviews.org/doku.php?id=tips%3adata-frames%3amerge)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-07-07T00:55:04.923

在今天研究了同样的问题几个小时之后，我想出了这个简单而优雅的解决方案，它结合了“dplyr”管道和基本的 R“merge()”函数。

```
MergedDF <- merge(DF1, DF2) %>%
              merge(DF3) 
```

正如您在帖子中提到的那样，这假设列名相同，并且您要合并的每个数据框中的行数相同。这也将自动消除在合并过程中使用的任何重复列（即标识符）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-18T08:34:42.710

以防万一有人想合并具有相同列名但行号不相等的多个数据框，这篇文章很有帮助：[https ://medium.com/coinmonks/merging-multiple-dataframes-in-r-72629c4632a3](https://medium.com/coinmonks/merging-multiple-dataframes-in-r-72629c4632a3)

基本上，您使用 do.call 和 rbind 函数：

```
Merged <- do.call("rbind", list(df1, df2, df3, df4)) 
```

# heroku - Blower.io 内部服务器错误

> ID：15291618
> 
> 赞同：2
> 
> 时间：2013-03-08T10:17:51.497
> 
> 标签：heroku, sms, beta

还有其他人在 Heroku 中使用 Blower.io beta 插件吗？[我已经按照https://devcenter.heroku.com/articles/blowerio](https://devcenter.heroku.com/articles/blowerio)的说明成功配置并从环境中获取了 URL，但是尝试通过它发送任何类型的消息总是会导致内部服务器错误。

```
HTTP/1.1 500 Internal Server Error
Content-Type: text/html;charset=utf-8
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Xss-Protection: 1; mode=block
Content-Length: 30
Connection: keep-alive

<h1>Internal Server Error</h1> 
```

无论我是从 Resque 工作人员（目标）、rails 控制台还是通过 curl 请求运行它，都会发生这种情况。

它没有提示我出了什么问题，这非常令人沮丧！非常感谢任何提示或指针。

（抱歉，我无法标记此 Blower.io - 我没有足够的声誉来创建新标签。）

# php - 有一些日期格式问题

> ID：15291624
> 
> 赞同：0
> 
> 时间：2013-03-08T10:18:15.563
> 
> 标签：php, date

我的 php 代码中有一些日期问题。我的代码是这样的：

```
$add_remind ="15/03/2013";
$add_time = "03:00";
$add_remind_on =$add_remind." ".$add_time.":00"; 
$formated_add_remind_on = date('Y-m-d',strtotime($add_remind_on)); 
```

但如果我打印`$formated_add_remind_on`，它正在打印`1970-01-01 05:30:00`。你能告诉我错误在哪里吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:20:22.690

```
$add_remind ="2013-03-15";
$add_time = "03:00";
$add_remind_on =$add_remind." ".$add_time.":00"; 
$formated_add_remind_on = date('Y-m-d',strtotime($add_remind_on)); 
```

strtotime 不接受这种格式：15/03/2013

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:23:49.363

您的日期格式似乎不受支持，唯一[受支持](http://www.php.net/manual/en/datetime.formats.date.php)且看起来像“xx/xx/xxxx”的日期格式是美国日期，但它们使用月份的第一段，15 不是有效月份。

您可能需要转换您的输入，或者使用[DateTime::createFromFormat](http://www.php.net/manual/en/datetime.createfromformat.php)或[strptime 之](http://www.php.net/manual/en/function.strptime.php)类的东西，您可以在其中指定输入的格式（DateTime 对象也带有其他好东西，例如非全局时区支持）。

您的格式似乎是这样的（您可能希望将 UTC 更改为您创建的时间戳的时区）：

```
$d = DateTime::createFromFormat("d/m/Y H:i:s", "15/03/2013 03:00:00", new DateTimeZone('UTC')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:22:06.923

[strtotime](http://php.net/manual/en/function.strtotime.php)只接受[英文日期格式](http://www.php.net/manual/en/datetime.formats.php)，您的日期应该是 MM/DD/YYYY 才能使这项工作。

# sql - 按月和类别作为列获取sql数据组

> ID：15291626
> 
> 赞同：0
> 
> 时间：2013-03-08T10:18:22.017
> 
> 标签：sql, sql-server

请帮助解决我的
mssql 问题。我有一些表结构：

```
Category   amt    year  month  
cat1      800.00  2013  jan  
cat2       30.00  2013  jan  
cat3      120.00  2013  feb  
cat4      125.00  2013  feb 
```

我想要数据来（按月分组）示例...

```
Month    cat1     cat2     cat3     cat4  
jan     800.00    30.00     0.00     0.00  
feb       0.00     0.00   120.00   125.00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:35:51.940

您可以为此使用[PIVOT 。](http://geekswithblogs.net/lorint/archive/2006/08/04/87166.aspx)请检查查询：

```
SELECT 
    [Month], 
    isnull(cat1, 0.00) cat1, 
    isnull(cat2, 0.00) cat2, 
    isnull(cat3, 0.00) cat3, 
    isnull(cat4, 0.00) cat4 
FROM(
        SELECT 'cat1' Category, 800.00 amt,2013 [year], 'jan' [month] UNION
        SELECT 'cat2' Category, 30.00 amt, 2013 [year], 'jan' [month] UNION
        SELECT 'cat3' Category, 120.00 amt, 2013 [year], 'feb' [month] UNION
        SELECT 'cat4' Category, 125.00 amt, 2013 [year], 'feb' [month]
    )UP
    PIVOT (SUM(amt) FOR Category IN (cat1, cat2, cat3, cat4)) AS PVT 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:41:25.717

如果我理解正确，您想在交叉表中获取数据吗？如果是这种情况，您可以使用数据透视表。

```
select
    month
  , coalesce(cat1,0) as cat1
  , coalesce(cat2,0) as cat2
  , coalesce(cat3,0) as cat3
  , coalesce(cat4,0) as cat4
from tbl
pivot(sum(amt) for category in ([cat1], [cat2], [cat3], [cat4])) p 
```

# java - NullPointerException 错误

> ID：15291631
> 
> 赞同：0
> 
> 时间：2013-03-08T10:18:26.870
> 
> 标签：java, android, nullpointerexception

我对 java 编码很陌生，目前我正在使用 Eclipse 开发一个适用于 Android 的应用程序。

`NullPointerException`每次我运行我的java代码时都会遇到问题，我猜这是一个简单的问题，但我不知道如何解决这个错误。

这是与此问题相关的代码块：

```
EditText taskArray[] = new EditText[200];
String taskArr[] = new String[200];

protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    LinearLayout layout = (LinearLayout)findViewById(R.id.layout);
    Button submit = new Button(this);
    submit.setText("enter dare");
    layout.addView(submit);

    submit.setOnClickListener(new Button.OnClickListener()
    {
        public void onClick(View v)
        {
            inputdare();
        }
    });
}             

public void addtask()
{
    n++;
    LinearLayout layout = (LinearLayout)findViewById(R.id.layout);
    taskArray[n] = new EditText(this);
    layout.addView(taskArray[n]);
}

public void inputdare()
{
    for (int i=0; i<n;i++)
    {
        taskArr[i] = taskArray[i].getText().toString();
    }
} 
```

所以基本上每当我调用这个函数`inputdare();`时，

我会`NullPointerException`遇到错误，我真的被卡住了，不知道该怎么办）：

此外，错误消息在这里：

```
03-08 09:50:36.273: E/AndroidRuntime(4653): FATAL EXCEPTION: main
03-08 09:50:36.273: E/AndroidRuntime(4653): java.lang.NullPointerException
03-08 09:50:36.273: E/AndroidRuntime(4653):     at com.cep.daredevil.MainActivity.inputdare(MainActivity.java:135)
03-08 09:50:36.273: E/AndroidRuntime(4653):     at com.cep.daredevil.MainActivity$2.onClick(MainActivity.java:64)
03-08 09:50:36.273: E/AndroidRuntime(4653):     at android.view.View.performClick(View.java:4204)
03-08 09:50:36.273: E/AndroidRuntime(4653):     at android.view.View$PerformClick.run(View.java:17355)
03-08 09:50:36.273: E/AndroidRuntime(4653):     at android.os.Handler.handleCallback(Handler.java:725)
03-08 09:50:36.273: E/AndroidRuntime(4653):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-08 09:50:36.273: E/AndroidRuntime(4653):     at android.os.Looper.loop(Looper.java:137)
03-08 09:50:36.273: E/AndroidRuntime(4653):     at android.app.ActivityThread.main(ActivityThread.java:5041)
03-08 09:50:36.273: E/AndroidRuntime(4653):     at java.lang.reflect.Method.invokeNative(Native Method)
03-08 09:50:36.273: E/AndroidRuntime(4653):     at java.lang.reflect.Method.invoke(Method.java:511)
03-08 09:50:36.273: E/AndroidRuntime(4653):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-08 09:50:36.273: E/AndroidRuntime(4653):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-08 09:50:36.273: E/AndroidRuntime(4653):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T10:24:14.610

```
public void inputdare()
{
    for (int i=0; i<n;i++)
    {
        taskArr[i] = taskArray[i].getText().toString();
    }
} 
```

在上面的代码中，您声明了 taskArray，因此当您从那里检索时，它会为您提供 null。在这种情况下 null.toString() 给出异常。

`taskArray[i].getText() != null`之前使用
`taskArr[i] = taskArray[i].getText().toString();`

解决了你的问题...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T10:23:40.440

改变你的 inputdare()

```
public void inputdare()
{
    for (int i=0; i<n;i++)
    {
        if (taskArray[i].getText() != null) {
            taskArr[i] = taskArray[i].getText().toString();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:26:41.623

设置条件以防止 NullPointer Exception 对其进行更多调试

```
 public void inputdare()
  {
    for (int i=0; i<n;i++)
    {
    if(taskArr[i]!=null)
    taskArr[i] = taskArray[i].getText().toString();
    }
  } 
```

您将获得哪些数组元素确实具有空值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T10:33:00.003

EditText taskArray[] = new EditText[200];

taskArray 是一个数组，它的每个个体都没有被初始化，所以如果你试图在它的成员上调用一个方法而不初始化它，它们会产生一个空指针异常

因此，在标记了一个类数组之后，您将不得不初始化单个对象

像

```
taskArray[0] = new EditText(context);
taskArray[1] = new EditText(context);
.
.
.
taskArray[200] = new EditText(context); 
```

一旦确定它们已初始化，然后调用方法 inputDare(); 这将解决空指针异常。

要准确解决问题：

现在根据您的要求初始化所有 EditText 字段并将它们添加到您的布局中，然后调用 inputDare() 方法。

或者您也可以通过调用 findViewByID() 来获取 EditText Field 对象

IF n is initialized = 0 那么 n++ 应该在 taskArray[n] = new EditText(this); 的初始化之后出现

否则你会在数组的索引 0 上得到一个 Nullpointer

公共无效添加任务（）{

```
LinearLayout layout = (LinearLayout)findViewById(R.id.layout);
taskArray[n] = new EditText(this);
layout.addView(taskArray[n]);
n++; 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T10:51:56.493

您没有在代码中的任何地方调用 addTask() 方法。因此，当您单击提交按钮并执行 inputdere() 方法时，您的 taskArray 元素为空，因为

```
taskArray[n] = new EditText(this); 
```

尚未执行。所以你得到 NullPointerException

```
taskArr[i] = taskArray[i].getText().toString(); 
```

要解决此问题，请在将按钮添加到布局后，在 onCreate() 方法中添加以下代码。

```
 n = -1;
    for (int i = 0; i < taskArray.length; i++) {
        addtask();
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T10:52:36.017

我认为你还没有将你的edittext添加到你的布局中，把对 addtask() 的调用放在 onCreate() 中。

# java - 将 Java 运行时的方法标记为已弃用

> ID：15291633
> 
> 赞同：1
> 
> 时间：2013-03-08T10:18:40.613
> 
> 标签：java, deprecated

我想让我的队友知道不应使用 String.replace()（因为我们的许多开发人员不知道正则表达式参数）并建议他们改用 StringUtils.replace()。

我可以通过告诉他们，将重点放在代码审查中，为 Findbugs、CheckStyle 或其他工具编写自定义规则来做到这一点，但我更愿意在代码中记录这一点，让*编译器*知道我的意图。

如果 String 是我自己代码中的一个类，我会简单地添加弃用注释。有没有办法为**我没有来源的类**添加弃用注释？

（不，我不想自己编译 JDK 作为解决方法：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:40:42.230

最简洁的答案是不。

有可行的替代方案，例如在您的组的样式/错误检查工具（FindBugs、PMD、CheckStyle 等）中启用或添加规则。

* * *

但是我认为你在这里采取了错误的方法。`String.replace()`如果我是您的开发人员之一，我会因为我“太笨拙”而无法使用或`String.replaceAll()`正确使用而感到冒犯。

如果您的开发人员确实存在不理解的问题，那么您需要对他们进行更多教育，或者（如果他们真的很愚蠢......）替换他们。

如果真正的问题是你的代码库被错误的使用所感染，那么你需要做的是代码审计；例如`grep`，所有出现该方法名称的代码库，并检查它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:25:46.130

这是一个由 IDE 验证的编译时实用程序，因此没有其他方法可以添加弃用方法，您必须更改 JDK 的源并编译它们。

也许如果您正在使用构建工具，请检查是否有任何插件，如果调用特定方法，您可以告诉构建失败

# android - Android 图像下载器问题

> ID：15291634
> 
> 赞同：1
> 
> 时间：2013-03-08T10:18:40.737
> 
> 标签：android, image, properties, bitmap

我正在尝试实现图像下载器。

这是我使用的示例： [http ://android-developers.blogspot.de/2010/07/multithreading-for-performance.html](http://android-developers.blogspot.de/2010/07/multithreading-for-performance.html)

但不幸的是，我收到了一堆警告，结果是没有显示任何图像。

[https://www.dropbox.com/s/jpstbcehoii2xt7/snipp2.PNG](https://www.dropbox.com/s/jpstbcehoii2xt7/snipp2.PNG)

```
 runOnUiThread(new Runnable() {
         public void run() {
            final Handler uiHandler = new Handler();    
            Timer myTimer = new Timer(); // Timer erzeugen
            myTimer.schedule(new TimerTask() {          
                @Override           
                public void run() {                     
                             try{
                                  imageDownloader.download("http://osthessen-news.de/Media/13/03/News130308_10_DSC_2375.jpg_Thumbnail0.jpg", (ImageView) mainImage1);                   
                                } catch (Exception e) {
                                    e.printStackTrace(); 
                                }
                             }
        }, 0L, 60L * 1000); //Intervall = 60000 Millisekunden, 0 Millisekunden bis zum ersten Start.

    }});

03-08 14:22:14.577: W/ImageDownloader(12411): Error while retrieving bitmap from http://osthessen-news.de/Media/13/03/News130308_10_DSC_2375.jpg_Thumbnail0.jpg
03-08 14:22:14.577: W/ImageDownloader(12411): android.os.NetworkOnMainThreadException
03-08 14:22:14.577: W/ImageDownloader(12411):   at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
03-08 14:22:14.577: W/ImageDownloader(12411):   at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
03-08 14:22:14.577: W/ImageDownloader(12411):   at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
03-08 14:22:14.577: W/ImageDownloader(12411):   at java.net.InetAddress.getAllByName(InetAddress.java:214)
03-08 14:22:14.577: W/ImageDownloader(12411):   at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
03-08 14:22:14.577: W/ImageDownloader(12411):   at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
03-08 14:22:14.577: W/ImageDownloader(12411):   at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
03-08 14:22:14.577: W/ImageDownloader(12411):   at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
03-08 14:22:14.577: W/ImageDownloader(12411):   at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
03-08 14:22:14.577: W/ImageDownloader(12411):   at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:59:21.073

您收到此错误的原因是因为您尝试从另一个线程访问 UI 视图，而不是`Main Thread`或`Activity Thread`

您的问题已在此处得到解答： [Android“只有创建视图层次结构的原始线程才能触及其视图。”</a>](https://stackoverflow.com/questions/5161951/android-only-the-original-thread-that-created-a-view-hierarchy-can-touch-its-vi)

[](https://stackoverflow.com/questions/5161951/android-only-the-original-thread-that-created-a-view-hierarchy-can-touch-its-vi)

[我还没有完成那个人的教程，但是您可以轻松地创建一个](https://stackoverflow.com/questions/5161951/android-only-the-original-thread-that-created-a-view-hierarchy-can-touch-its-vi)[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)并调用`ImageDownloader`in`doInBackground()`先检索图像，然后将视图的图片设置为`onPostExecute()`

我建议彻底阅读该教程，因为那个人解释了你需要的一切。检查[此](https://code.google.com/p/android-imagedownloader/source/browse/trunk/src/com/example/android/imagedownloader/ImageListActivity.java)示例以了解他如何使用`ImageDownloader`and `ImageAdapter`。

# azure - Azure 网站保留模式负载平衡似乎不起作用

> ID：15291636
> 
> 赞同：1
> 
> 时间：2013-03-08T10:18:44.607
> 
> 标签：azure, azure-web-app-service

当我处于免费或共享网站模式（实例计数为 2）并删除 ARRAffinity cookie 时，我可以看到它将在运行的两个不同实例之间交换。为了仔细检查这一点，我还在网站上显示了机器名称。

但是，当在保留模式下运行 2 个或更多实例时，我总是会被定向到同一台机器。如果我删除 Cookie 或从不同的机器/IP 访问该站点并不重要，我总是使用相同的 ARRAffinity cookie 访问同一台机器。

在我看来，负载平衡在保留模式下无法正常工作，或者我不了解负载平衡器的工作方式？

如果这是预期的行为，那么我如何判断其他实例是否实际运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:57:49.913

Azure 网站项目经理负责人 Nir ​​Mashkowski 在 Channel9 上展示了一场精彩的“网站内部”[网络广播会议](http://channel9.msdn.com/Shows/Web+Camps+TV/Windows-Azure-Web-Sites-Internals-with-Nir-Mashkowski)。本演讲涉及网站架构的低级细节，包括网站中的所有组件（例如 IIS ARR）。

网站作为一项*服务*，负责负载平衡、实例运行状况等。没有规定的负载平衡方法，尽管 Nir ​​谈到了 asp.net 粘性会话（意味着路由到同一个实例）。会话数据需要保留在共享资源中。

希望此内容为您提供所需的信息...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:40:07.160

在负载均衡器后面以保留模式运行的 Azure 网站上的文章并不多。理解负载均衡器的重要方面是它的算法。在这里，我们不确定负载均衡器是使用会话粘性还是轮询，或者至少不确定路由是否依赖于 ARRAffinity cookie。

我建议检查它的方式是进行负载测试（一个沉重的测试）并查看每台机器上的日志。保留模式必须是所有其他网站模式和 Azure 网站实例中最好的给定负载均衡器，因为它们被命名为“保留”并保证有保证的基础设施。

另一个我的感觉是，免费和共享网站负载平衡器的设计方式可能与保留的负载平衡器不同。

如果没有任何结果，请提出支持票以询问他们发生了什么，并可能在此处分享他们的回应。

# sql-server - 维护视频文件的 ViewCount 数

> ID：15291640
> 
> 赞同：0
> 
> 时间：2013-03-08T10:19:00.993
> 
> 标签：sql-server, database, database-design

我需要有关架构更改的帮助。我有一个存储视频的视频表，我想知道`ViewCount`视频的实际情况。

这是我现在拥有的 Video 表架构：

```
CREATE TABLE dbo.VideoFiles(
VideoId     int IDENTITY(1, 1) PRIMARY KEY,
VideoTitle  nvarchar(64) NOT NULL,
VideoDescription nvarchar(2048),
PublishDate date,
Duration    time,
VideoUrl    nvarchar(256),
--ViewCount bigint,
UpdateTime  datetime default CURRENT_TIMESTAMP ) 
```

我可以有一个`ViewCount`在每次启动视频文件时增加 +1 的列，这看起来很简单。但是如何管理视频视图中的唯一性？

```
User1 view Video1 = Video1 Count =>1  
User2 view Video1 = Video1 Count =>2  
User1 view Video2 = Video2 Count =>1  
User1 view Video1 = Video1 Count =>2 (not increased as he already seen this video) 
```

谢谢，
普拉巴特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:44:13.840

Create a table

```
UserId int/UniqueIdentifier
VideoId Int
TimeOfView Datetime
SessionId int/UniqueIdentifier 
```

This will help you.You will be able to give every answer from the business point. Like total view, view/day or unique visits/day. Similarly for week,months and year. More attributes can also be added for UserVisit.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:43:45.443

所需的结构可能如下所示

```
CREATE TABLE [dbo].[ViedeoViews](
    [VideoID] [int] NOT NULL,
    [UserID] [int] NOT NULL,
 CONSTRAINT [PK_ViedeoViews] PRIMARY KEY CLUSTERED 
(
    [VideoID] ASC,
    [UserID] ASC
) ON [PRIMARY]
) ON [PRIMARY]

GO

ALTER TABLE [dbo].[ViedeoViews]  WITH CHECK ADD  CONSTRAINT [FK_ViedeoViews_VideoFiles] FOREIGN KEY([VideoID])
REFERENCES [dbo].[VideoFiles] ([VideoId])
GO

ALTER TABLE [dbo].[ViedeoViews] CHECK CONSTRAINT [FK_ViedeoViews_VideoFiles]
GO

Create View V_VideoFiles as
Select dbo.VideoFiles.*,(Select COUNT(*) from ViedeoViews vv where vv.VideoID=VideoFiles.VideoID) as ViewCount
from VideoFiles 
```

# database - 数据库->Servlet->jsp

> ID：15291642
> 
> 赞同：-4
> 
> 时间：2013-03-08T10:19:03.877
> 
> 标签：database, jsp, servlets

我想在servlet中检索所有mysql数据库表记录并通过jsp显示所有行。同样令人困惑的是我应该使用`String[]`数组还是应该创建和使用另一个类并为该类创建对象。到目前为止，我已经完成了对`String[]`数组的考虑，但在显示中它只显示了表数据库的第一条记录。

我希望尽快回答我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:32:48.083

我已经很多年没有做过jsp了，但是过去以下内容对我有用

```
String Query = "Select fieldname1, fieldname2, fieldname3 from table";

ResultSet SQLResult = SQLStatement.executeQuery(Query);
while(SQLResult.next())
{
    field1 = SQLResult.getString("fieldname1");
    field2 = SQLResult.getString("fieldname2");
    field3 = SQLResult.getString("fieldname3");

    out.println(field1 + "," + field2 + "," + field3);
} 
```

# iphone - 如何知道视图控制器是否在堆栈中。如果它在堆栈中，则应将其弹出，否则应将其推送

> ID：15291644
> 
> 赞同：0
> 
> 时间：2013-03-08T10:19:06.547
> 
> 标签：iphone, ios, ipad

我在一个下拉列表中有 4 个视图控制器。当我从下拉列表中选择一个视图控制器时，如果视图控制器已经在堆栈中（即，已经推送）它应该被弹出或推送。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:35:55.210

如果在 navigationController 中可以出现类“ViewController”的相同实例，这会更好

```
-(void)gotoViewController:(id )viewController
{
    if ([self.navigationController.viewControllers containsObject:viewController])
    {
        [self.navigationController popToViewController:viewController animated:YES];
    }
    else
    {
        [self.navigationController pushViewController:viewController animated:YES];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:25:13.040

```
NSInteger index = -1;
NSArray* arr = [[NSArray alloc] initWithArray:self.navigationController.viewControllers];
NSLog(@"View list=== %@",arr);
for(int i=0 ; i<[arr count] ; i++)
{
        if([[arr objectAtIndex:i] isKindOfClass:NSClassFromString(@"ViewContollerName")])
        {
            index = i;
        }        
}
[self.navigationController popToViewController:[arr objectAtIndex:index] animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:35:38.453

您可以简单地检查`navigationController`要推送或弹出的视图控制器上的属性。如果 vc 在导航堆栈上，则设置此属性，`nil`如果不在。这将使您免于遍历堆栈上的所有 vcs 并进行丑陋的类测试。

假设您想知道它`theVC`是否在导航控制器堆栈上，您可以这样做：

```
if (theVC.navigationController == nil)
    //push the vc on the nav stack
else
    //pop the vc from the nav stack 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T10:54:17.343

我建议更好地维护一个数组。您只需要维护导航控制器的关键字，这是您可以添加对象的方式，其逻辑不实用，因此请相应理解

检索时检查对象是否在数组中，如果是则弹出它。弹出时将其从堆栈中删除，否则将其推送

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-08T10:28:14.833

尝试这个：

```
UIViewController *currentView = [[UIViewController alloc] init];
currentView = [navigationController.visibleViewController retain];
if (![currentView isMemberOfClass:[YourViewController class]])
{
    //push
}

else
{
    //pop
}
[currentView release]; 
```

注意：如果您使用 ARC，请进行调整。

确保引用正确的 navigationController

# php - 通过jquery上传toDataUrl图片

> ID：15291651
> 
> 赞同：1
> 
> 时间：2013-03-08T10:19:30.193
> 
> 标签：php, jquery, canvas, kineticjs

我正在尝试从我的画布上创建一个图像，但经过一些尝试后，我似乎无法在后端获得一个有效的上传 PNG。有人可以看看这里发生了什么吗？

我的JavaScript：

```
 stage.toDataURL({
    callback: function(dataUrl) {
        var imgURL = dataUrl; // keep the entire url
        $.ajax({
            type: "POST",
            url: "http://www.xxxx.nl/pointer/upload.php", 
            data: ({imgData : imgURL}),
            cache: false,
            success: function(result){
                //window.open(dataUrl); // Show result stage in a new window
                alert(result); // show php error if exists
            }
        });
    }
}); 
```

我现在非常基本的.php：

```
$im = imagecreatefrompng($_POST['imgData']);
header('Content-Type: image/png');
imagepng($im);
imagedestroy($im); 
```

我的错误日志：

```
[Fri Mar 08 11:29:16 2013] [error] [client 24.132.214.139] mod_security: Access denied with code 500\. Error reading request body, error code 70007: The timeout specified has expired [hostname "www.ccc.nl"] [uri "/pointer/upload.php"] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:45:00.750

当你这样做时：

```
var canvasData = myCanvas.toDataURL("image/png"); 
```

您将获得表示 .png 的 base64 编码字符串，如下所示：

```
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAAGB……… 
```

请注意，此字符串的前缀是此标头：data:image/png;base64。.png 文件不需要/无法识别此标头，并且会破坏 imagecreatefrompng()。因此，当保存此字符串以创建 .png 时，您必须去掉标题。在 php 方面，您可以这样做（尽管您也可以在客户端将其剥离）：

```
$justPngData=substr($imageData, strpos($imageData, ",")+1); 
```

然后正常继续……</p>

# c# - c# - 如果我在代码中动态添加了一些控件，则用户控件不会出现在 winform 上

> ID：15291656
> 
> 赞同：0
> 
> 时间：2013-03-08T10:19:44.773
> 
> 标签：c#, winforms, visual-studio-2008, user-controls

您好，我已经为 Windows 窗体 C# 创建了一个 userControl，我在代码中动态添加了一些面板，在运行窗体后**我的控件没有出现**在窗体中，我从代码中删除了添加的控件，然后**控件出现**可以帮助我请 ？？

```
public partial class Schedual : UserControl
    {
        int days;

        public int Days
        {
            get { return days; }
            set
            {
                days = value;
                change = true;
                this.Refresh();
            }
        }

        int periods;

        public int Periods
        {
            get { return periods; }
            set
            {
                periods = value;
                change = true;
                this.Refresh();
            }
        }

        Brush brush;

        bool change;

        List<Panel> panels;

        public Schedual()
        {
            InitializeComponent();
            this.days = 1;
            this.periods = 1;
            brush = Brushes.White;
            change = false;
            panels = new List<Panel>();
            InitFirstPanel();
        }

        /// <summary>
        /// Initialize the first panel on the board
        /// </summary>
        private void InitFirstPanel()
        {
            var p = new Panel();
            p.Size = this.Size;
            p.Location = this.Location;
            AddPanels(p);
        }

        /// <summary>
        /// Adds a given panel to the list of panels
        /// </summary>
        /// <param name="panel">the wanted panel</param>
        private void AddPanels(Panel panel)
        {
            panels.Add(panel);
            this.Controls.Add(panel);  //if i removed this then the control work
        }

        protected override void OnPaint(PaintEventArgs e)
        {
            Graphics g = e.Graphics;
            g.DrawString("Yaser", new Font("Arial", 20.5f), Brushes.Violet, new PointF(200, 150));
            base.OnPaint(e);
        }

        protected override void OnPaintBackground(PaintEventArgs e)
        {
            Graphics g = e.Graphics;
            var h = this.Height / days;
            var w = this.Width / periods;
            g.Clear(Color.White);
            g.FillRectangle(Brushes.White, new Rectangle(0,0,this.Width,this.Height));
            if (change)
                panels.Clear();
            for (int i = 0; i <= days; i++)
            {
                for (int j = 0; j <= periods; j++)
                {
                    g.FillRectangle(brush, j * w, i * h, w, h);
                    if (change)
                    {
                        AddPanel(j * w, i * h, w, h);
                    }
                    g.DrawLine(Pens.Black, 0, i * h, this.Width, i * h);
                    g.DrawLine(Pens.Black, j * w, 0, this.Height, j * w);
                    if (brush == Brushes.White)
                        brush = Brushes.YellowGreen;
                    else
                        brush = Brushes.White;
                }
            }
            change = false;
        }

        /// <summary>
        /// Create a new Panel and adds it to the list
        /// </summary>
        /// <param name="x">the x position of the panel</param>
        /// <param name="y">the y position of the panel</param>
        /// <param name="width">the width of the panel</param>
        /// <param name="height">the height position of the panel</param>
        private void AddPanel(int x, int y, int width, int height)
        {
            var panel = new Panel();
            panel.Location = new Point(x, y);
            panel.Size = new Size(width, height);
            AddPanels(panel);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:24:45.873

这显示得很好，问题是您 `p.Size = this.Size;`在其中设置了`InitFirstPanel`这意味着您的灰色面板将在您将其添加到`Controls`. 尝试设置不同的大小，你会没事的:)

```
p.Size = new Size(50,50); 
```

# c# - 加密数据 (AES) 的大小错误

> ID：15291657
> 
> 赞同：1
> 
> 时间：2013-03-08T10:19:47.397
> 
> 标签：c#, encryption, aes, cryptostream

我需要执行字节[]的加密数组。我使用了 Microsoft 上提供的示例。不幸的是，加密数据被截断为 16 的倍数。如果在数据示例中我将添加 8 倍字节 0，则数据将被正确加密。填充已设置，但我没有看到任何可以更改的内容。如何解决这个问题，数据不被截断。

```
public byte[] EncryptAES(byte[] plainBytes)
{
    System.Text.ASCIIEncoding encoding = new System.Text.ASCIIEncoding();
    byte[] FKey = encoding.GetBytes("A002AD9AD73C402190C3E733D82CEA00");
    byte[] FIV = encoding.GetBytes("zyxwvutsrqponmlk");

    // Check arguments.
    if (plainBytes == null || plainBytes.Length <= 0)
        throw new ArgumentNullException("plainText");
    if (FKey == null || FKey.Length <= 0)
        throw new ArgumentNullException("Key");
    if (FIV == null || FIV.Length <= 0)
        throw new ArgumentNullException("Key");
    byte[] encrypted;
    // Create an RijndaelManaged object
    // with the specified key and IV.
    using (RijndaelManaged rijAlg = new RijndaelManaged())
    {
        rijAlg.Key = FKey;
        rijAlg.IV = FIV;
        rijAlg.Padding = PaddingMode.Zeros;
        rijAlg.Mode = CipherMode.CBC;

        // Create a decrytor to perform the stream transform.
        ICryptoTransform encryptor = rijAlg.CreateEncryptor(rijAlg.Key, rijAlg.IV);

        // Create the streams used for encryption.
        using (MemoryStream msEncrypt = new MemoryStream())
        {
            using (CryptoStream csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))
            {
                // plainBytes.Length = 2216 
                csEncrypt.Write(plainBytes, 0, plainBytes.Length);

                // encrypted.Length = 2208
                encrypted = msEncrypt.ToArray();
            }
        }
    }

    // Return the encrypted bytes from the memory stream.
    return encrypted;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:43:52.827

[`CryptoStream`](http://msdn.microsoft.com/en-gb/library/system.security.cryptography.cryptostream.aspx)：

> 使用完 CryptoStream 对象后，应始终通过调用[Close](http://msdn.microsoft.com/en-gb/library/system.io.stream.close.aspx)方法显式关闭它。这样做会刷新流并**导致所有剩余的数据块由 CryptoStream 对象处理**。但是，如果在调用[Close](http://msdn.microsoft.com/en-gb/library/system.io.stream.close.aspx)方法之前发生异常，则可能不会关闭 CryptoStream 对象。为确保始终调用[Close方法，请将对](http://msdn.microsoft.com/en-gb/library/system.io.stream.close.aspx)[Close](http://msdn.microsoft.com/en-gb/library/system.io.stream.close.aspx)方法的调用放在try/catch 语句的 finally 块中。

（**我的重点**）

所以，[`Close`](http://msdn.microsoft.com/en-gb/library/system.io.stream.close.aspx)在你尝试对结果做任何事情之前打电话。

* * *

基本上，[填充](http://en.wikipedia.org/wiki/Padding_%28cryptography%29#Byte_padding)用于处理加密块序列的最后一个块。由于`CryptoStream`不知道您打算调用多少次`Write()`，因此在您调用之前它不会应用填充或写入任何最终的不完整块`Close`。

（或者，正如 Monkieboy 指出的那样，[`FlushFinalBlock`](http://msdn.microsoft.com/en-gb/library/system.security.cryptography.cryptostream.flushfinalblock.aspx)也可以用来表示你已经完成了）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-20T03:54:56.090

只需调用 FlushFinalBlock() 即可解决 16 的倍数问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:42:23.270

试试这个

```
 using (MemoryStream msEncrypt = new MemoryStream())
    {
        using (CryptoStream csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))
        {
            csEncrypt.Write(plainBytes, 0, plainBytes.Length);
        }
        encrypted = msEncrypt.ToArray();
    } 
```

# algorithm - n 个元素之间的最小差异

> ID：15291658
> 
> 赞同：2
> 
> 时间：2013-03-08T10:19:50.917
> 
> 标签：algorithm, language-agnostic

我正在使用 C++ 开发一个项目。我有和 的`n`元素。`int``K`

我需要找到一种方法来获得`min{a1+a2+....+an} - K <= ε >= 0`ε = 最小数字。

数字的组合可以是`{a1+a2+a6}`or just `{a2}`or `{a2+an}`，我的意思是它不像 find (nk) 组合。

我正在研究一个小的 n (n < 15)，所以复杂性不是问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:58:38.840

Imagine you find a polynomial solution to your problem, i.e., you can find a subset of numbers whose sum is closest to `K`.

Now imagine this algorithm:

```
- Find the subset of numbers with sum closest to K
- If (sum(subset) - K == 0)
-     return subset
- Else
-     return DOESNT_EXIST 
```

What is this algorithm? A polynomial solution to [the subset-sum problem](http://en.wikipedia.org/wiki/Subset_sum_problem)!

Since it's very unlikely that P=NP, then it's very unlikely that you're ever going to find any scalable solution.

In other words, you're stuck with brute force.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:41:08.187

我将为此编写伪代码：

您可以使用值列表创建一个可排序的映射。并将 a1..n 元素的一个值及其值放入映射中。并且在插入 set compare 方法时 < map 看起来像：

```
[n] [value] 
```

该列表将是 ASC

并且要获得最小的数字，您将从头开始遍历列表并执行 + 操作，直到 mapelement[0] + mapelement[1] > e + K

并且您将拥有地图的第一个元素的列表，以及它们的 n 值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:32:48.240

您可以将位掩码用于蛮力方法。像这样：

```
#include <iostream>
using namespace std;

int main()
{
    int n = 15;
    int a[] = {8, 6, 14, 3, 4, 11, 100, 24, 41, 56, 18, 22, 11, 39, 91};
    int k = 16;
    int best_sum = -1;
    int best_i = -1;
    for(int i = 0; i < (1 << n); i++) {
        int sum = 0;
        for(int j = 0; j < n; j++) {
            if((i >> j) & 1) {
                sum += a[j];
            }
        }
        if(sum >= k && (best_sum == -1 || sum < best_sum)) {
            best_sum = sum;
            best_i = i;
        }
    }
    cout << best_sum << " ->";
    for(int j = 0; j < n; j++) {
        if((best_i >> j) & 1) {
            cout << " " << a[j];
        }
    }
    cout << endl;
    return 0;
} 
```

# php - 即使删除了取消按钮单击时如何维护图像？

> ID：15291660
> 
> 赞同：1
> 
> 时间：2013-03-08T10:19:55.920
> 
> 标签：php, codeigniter, crud, grocery-crud

在杂货杂货编辑表单中，有一个取消按钮用于取消此编辑选项，并将转到查看表单。

在编辑表单中，图像选择有图像删除选项。

![在此处输入图像描述](../Images/d86941d2f5d552543147de764d472caa.png)

但是点击删除按钮后，即使点击取消按钮，图像也会被删除。

任何人有任何解决方案来解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T03:09:13.290

那么当你点击删除后点击取消按钮时，图片还是被删除了？如果是这样，那是因为您已经发送并处理了删除图像的请求。因此，即使您单击取消，图像也已被删除。

解决此问题的一种方法是包含一个保存按钮。在用户单击保存之前，不会发送删除请求。如果用户单击取消，则将他们重定向回视图。

# c++ - c++中奇怪的天花板错误

> ID：15291665
> 
> 赞同：2
> 
> 时间：2013-03-08T10:20:03.793
> 
> 标签：c++, floating-point, ceil

您好，我对 c++ 中的 ceil 函数有一些困难：

我有一个规则的点网格，我需要对其执行插值以计算一组点的 z 值。

为了做到这一点，对于每个计算点，我需要获取网格上最近的点。我这样做：

```
y1 = dy*floor(p.y/dy);
y2 = dy*ceil(p.y/dy); 
```

其中 dy 是网格两点之间的空间。（y1，py 和 dy 是双精度的）如果我使用显示结果

```
cout << static_cast<double>(p.y/dy) << ": " << y1 << ", " << y2 << endl; 
```

我得到了这些奇怪的结果：

```
0: 0, 0
1: 0.1, 0.1
2: 0.2, 0.2
3: 0.3, 0.4 
```

前三个结果都可以，但最后一个结果是错误的，因此断言失败。

我想知道这个奇怪的错误是从哪里来的以及如何避免它。谢谢。

我为我的英语道歉

**编辑**

我用 dy = 0.1 调用该函数，但在执行期间，它采用以下值 dy = 0.10000000000000001。py 是这样初始化的：

```
 const uint N = round((x2 - x1) / dx2);
 const uint M = round((y2 - y1) / dy2);

 double p = persistence;
 double n = number_of_octaves;

 // generation of the points where the perlin noise is generated
 std::vector<Vertex3d> ret;
 std::vector<Vertex3d> dummy;
 for (uint i=0;i<=N;++i)
 {
        for (uint j=0;j<=M;++j)
        {
                ret.push_back({.x = i*dx2, .y=j*dy2, .z=0});
                dummy.push_back({.x = i*dx2, .y=j*dy2, .z=0});
        }
 } 
```

其中 x1 = 0 和 x2 = 1（根据 gdb）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:24:49.273

鉴于您的结果，我认为`dy`等于`0.1`。

你的结果没有错。如果你有，`0.3 < p.y < 0.4`那么你将拥有`3 < p.y/dy < 4`如此的`ceil`意志`4`和`floor`意志`3`。

也许您感到困惑，因为您在代码中的其他地方设置`p.y`为 0.3 或 0.4。你应该知道浮点数**不是那么精确**。这意味着即使您设置`p.y = 0.3`它也可以具有值`0.30000001`或类似的值，从而导致您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:24:14.370

当你使用浮点运算时，你通常不应该依赖结果是一个整数，因为浮点计算不精确。您可能需要重新设计您的代码，使其不依赖于此。

这是[浮点运算的经典讨论](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-08T10:24:29.840

这看起来就像浮点运算的舍入错误。

最后一种情况的结果可能是 3.00000000000001，所以它的上限是 4 而不是 3（然后乘以 0.1）

# c# - 使用具有可分配 Func 委托的对象的基于树的数学表达式

> ID：15291667
> 
> 赞同：4
> 
> 时间：2013-03-08T10:20:09.073
> 
> 标签：c#, linq, function, math, tree

我想在 C# 中实现一个通用树数据结构，它有一个类`Tree<E>`，它引用一个根`TreeNode<E>`对象，该对象包含一个子节点的链接列表和相同节点类型的单个父节点。这是一个基本的树形结构，实现这部分我真的没有任何问题。

我想扩展这个树结构来创建`Function`，它扩展`Tree<double>`，以及它的补充节点类型`Expression`，它适当地扩展`TreeNode<double>`。我想用这个结构来表示可以用函数的适当变量评估的数学函数。

我目前处于该项目的设计阶段，因此有很多方法可以实现它，但我正在寻找具有适当抽象级别的设计，以涵盖所有类型的功能，同时仍保持其参数签名的密封. 例如，我应该能够`Function`在运行时为数学函数创建一个：

`f() = 42`, `f(x) = x^2`,`f(x, y) = x/y + 5`等

如果每个`Expression`人都有自己的子项列表（分解以定义给定参数的函数过程的子表达式），那么`Expression`应该使用某种评估方法，它接受`double`值并吐出它们的标量值（或者如果可能，将其提取到向量级别）。

我对 LINQ 之类的函数式语言不太熟悉，但如果有人是的话，是否有一种简单而强大的方法来实现我计划使用的功能？如果我不必为每种基本操作（比如`SinExpression(X)`或`AdditionExpression(X,Y)`那些）创建具体的类，而是能够动态定义可能存储在字典中的数学函数，那就太好了，前提是所有变量要么是其他表达式，要么归结为浮点值。那时，如果我需要的话，具体的函数类可以扩展这些抽象的类，只需在基本构造函数中定义评估函数即可。

我还想指出，维护树结构很重要，因为我计划在一个单独的程序中使用这些表达式，该程序将直接更改函数的表达式树（更改节点、删除分支等）。

谁能指出我正确的方向？我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T11:57:25.590

已经有一个 API 可以将复杂的操作表示为节点树；LINQ `Expression`API。对于一个*简单*的示例，您可以让编译器为您构建树 - 例如：

```
Expression<Func<double,double,double>> f = (x,y) => Math.Sin(x/y) + 5; 
```

这可以通过调用来*评估*`Compile()`事物，即

```
var func = f.Compile(); // this is a Func<double,double,double>
Console.WriteLine(func(12,5));
Console.WriteLine(func(23,4)); 
```

但是*表达式树*比较复杂，可以任意检查。此外，您可以使用`ExpressionVisitor`交换件。例如，假设我们想将“x”替换为“ln(x)”作为随机基因突变的一部分：

```
// swap x for ln(x)
var munged = SwapExpressionVisitor.Swap(
    f, // the lambda to rewrite
    f.Parameters[0], // "x"
    Expression.Call(typeof(Math), "Log", null, f.Parameters[0]) // ln(x)
); // (x, y) => (Sin((Log(x) / y)) + 5)

func = munged.Compile();
Console.WriteLine(func(12, 5));
Console.WriteLine(func(23, 4)); 
```

使用如下实用程序：

```
class SwapExpressionVisitor : ExpressionVisitor
{
    public static Expression<T> Swap<T>(Expression<T> lambda,
        Expression from, Expression to)
    {
        return Expression.Lambda<T>(
            Swap(lambda.Body, from, to), lambda.Parameters);
    }
    public static Expression Swap(
        Expression body, Expression from, Expression to)
    {
        return new SwapExpressionVisitor(from, to).Visit(body);
    }
    private readonly Expression from, to;
    public SwapExpressionVisitor(Expression from, Expression to)
    {
        this.from = from;
        this.to = to;
    }
    public override Expression Visit(Expression node)
    {
        return node == from ? to : base.Visit(node);
    }
} 
```

# node.js - Node.js 和 TeamCity

> ID：15291674
> 
> 赞同：7
> 
> 时间：2013-03-08T10:20:27.327
> 
> 标签：node.js, plugins, gruntjs, npm, teamcity

我有以下问题：

在我们公司，我们开始了一个新的 Web 项目，其中包含很多 .js .css 文件。我们公司是一家 Java 公司，这意味着所有的开发都在：Java/Maven/Team City 进行构建过程。

由于该公司已经在使用 TeamCity，我们也希望将它用于 Web 构建，我们正在尝试在我们的构建过程中引入 Node.js 和 GruntJs。我想知道是否有人像 TeamCity 中的跑步者一样有设置/配置 Node.js 的经验？

最后，我们想要“提交”一个更改然后构建，这个构建将使用 Node.js 运行器完成。我为 TeamCity 找到了以下[插件](https://github.com/jonnyzzz/TeamCity.Node)。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-03T17:54:29.413

我在 Web 项目中使用 GruntJS 和 TeamCity，其中包含几个站点，例如 API、用户和​​管理员门户以及单元/工作服/集成测试。经过几次原型设计后，我最终决定将所有逻辑放在一个 GruntJS 文件中，以分别构建项目的每个部分。

为此，我向源存储库添加了一个新项目，仅用于部署。在那个项目中，我有我的基础 Gruntfile.js，它只是项目每个部分的子 Grunt 构建过程的入口点。我可以通过 Grunt-CLI 将参数传递给 base 以选择我的构建目标，例如： grunt --target=api （注意：我也传递版本/修订版和其他东西，但为简单起见，我不会深入这个答案）

然后我创建了一个 shell 脚本，它使用所有可能的参数按顺序运行 grunt。最后，在 TeamCity 中创建了构建配置的一个步骤来运行该 shell 脚本！

通过这样做，我获得了很多好处，例如：

1.  将所有部署逻辑放在源代码控制中，以获得更好的可维护性。
2.  每个开发人员都可以访问它，甚至可以在本地机器上构建
3.  TeamCity 集成变得如此简单，您也可以轻松地将其移至其他 CI 平台！

如果您希望将每个项目放在单独的存储库中，那么您可以使用基本 GruntJS 设置一个部署存储库，并为其他存储库创建子模块。

# c# - 保存多个工作项时，TFS 2012 插件缺少事件？

> ID：15291677
> 
> 赞同：3
> 
> 时间：2013-03-08T10:20:38.727
> 
> 标签：c#, plugins

我们正在使用 TFS 2012 的插件，只要 WorkItem 更改就会触发它：

```
class WorkItemChangedEventHandler : ISubscriber

public EventNotificationStatus ProcessEvent(
        TeamFoundationRequestContext requestContext,
        NotificationType notificationType, object notificationEventArgs,
        out int statusCode, out string statusMessage, out ExceptionPropertyCollection properties)
{
// ...
} 
```

如果我一次保存一个工作项，那效果很好。但是，如果我在 Visual Studio 2012 中更改多个工作项并按下“全部保存”按钮，那么对于具有最高 ID 的工作项，我只会获得一个事件。所有其他工作项的事件永远不会被触发。

我做错什么了吗？是否在一个事件中处理了所有工作项而我找不到其他工作项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T11:06:33.537

看起来我的自动化太耗时了，我在博客中找到了一个解决方案：

[http://blogs.microsoft.co.il/blogs/assafstone/archive/2011/07/29/how-to-write-a-robust-tfs-server-plugin-with-job-extensions.aspx](http://blogs.microsoft.co.il/blogs/assafstone/archive/2011/07/29/how-to-write-a-robust-tfs-server-plugin-with-job-extensions.aspx)

猜猜我需要实施工作服务并尽快完成活动。

# microsoft-metro - 第一项为空 - WinJS.Binding.Template

> ID：15291680
> 
> 赞同：0
> 
> 时间：2013-03-08T10:20:49.620
> 
> 标签：microsoft-metro, windows-store-apps, winjs

我有一个这样的模板：

```
<tbody id="departureTemplate" data-win-control="WinJS.Binding.Template">
<tr >
    <td>
        <span data-win-bind="innerText: timezone_scheduled_departure_time "></span> <span class="small" data-win-bind="innerText: flights_joined"></span>
    </td>

    <td>
        <span data-win-bind="innerText: destination_joined"></span> <span class="small" data-win-bind="innerText: airline_names_joined"></span>
    </td>

    <td>
        <span data-win-bind="innerText: remarkstr"></span> Värav <span class="small" data-win-bind="innerText: gate"></span>
    </td>
</tr>
</tbody> 
```

和这样的代码：

```
var departureData = JSON.parse(response.responseText);
var departureBinding = new WinJS.Binding.List(departureData);

var tableBody = document.getElementById("departureTemplate");
var template = document.getElementById("departureTemplate").winControl;

var showItems = 4;
var currentItems = 0;

departureBinding.forEach(function (item) {
    if (currentItems < showItems) {
        template.render(item, tableBody);
    }

    currentItems++;
}); 
```

但我的问题是第一个渲染的 TR 没有数据。其他渲染就好了。如果我在发送到 template.render 之前注销数据，则它具有所有需要的值。

知道是什么导致了这种行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:50:19.303

绑定模板（WinJS.Binding.Template 控件）旨在与 ListView 和 FlipView 控件一起使用。

我建议查看主题[如何使用模板绑定数据（使用 JavaScript 和 HTML 的 Windows 应用商店应用程序）](http://msdn.microsoft.com/en-us/library/windows/apps/hh700356.aspx)，它演示了它是如何工作的。

使用 ListView 和一些 CSS 样式，您应该能够获得与使用 table 元素相同的外观，并且代码更少，灵活性更高。

希望有帮助。

有关 Windows 应用商店应用开发的更多信息，请注册[App Builder](http://bit.ly/gd30tolaunch)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:06:30.313

你在理论上对这种情况很好（有点）。我会单独定义您的模板，因为您的模板表应该是这样的 - 您的模板表并与您渲染的实体分开，否则如果您直接渲染到它，您真的会破坏您的模板，这可能是您看到第一行消失的原因因为它被您的模板数据占用。

只需将其添加到您的表格下方：

```
<table>
    <tbody id="airlineData"></tbody>
</table> 
```

并更改您的表格主体以指向新表格。

```
var tableBody = document.getElementById("airlineData"); 
```

让我知道这是否适合你。

# windows-8 - 如何在 Window 8 商店应用程序中获取 ApplicationExecutionState.Terminated

> ID：15291686
> 
> 赞同：0
> 
> 时间：2013-03-08T10:21:11.270
> 
> 标签：windows-8, windows-runtime, winrt-xaml, simulator, application-lifecycle

我想模拟`ApplicationExecutionState.Terminated`状态。

我正在执行以下操作
1\. 启动应用程序
2\. 导航到桌面，等待应用程序处于挂起状态
3\. 使用任务管理器中的结束任务终止应用程序。

此应用程序用于演示，之前它在消费者预览版中。当时，上述步骤效果很好。

现在，在 Windows 8 RTM 中，使用上述步骤，`ApplicationExecutionState`即将成为`NotRunning`.

我想知道`Terminated`状态如何？

我已经知道以下
1\. 通过使用模拟器，首先让应用程序暂停，然后从模拟器中注销。
2.通过在windows中施加内存压力。这样应用程序将自动终止。问题是我不知道，如何把内存压力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:05:36.610

要在调试期间触发`Suspend and shutdown`以及其他进程生命周期管理事件，请使用`Debug Location`Visual Studio 中的工具栏。在 Dropbox 旁边`Process`有一个包含上述命令的下拉按钮：

![进程生命周期管理命令](../Images/cf5234240e4b8a5e68df843004f61cf0.png)

无需使用模拟器即可。您也可以在本地计算机上运行该应用程序。

[您可以在此 MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/apps/hh974425.aspx)的下拉按钮中阅读有关此命令和其他命令的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:52:50.680

从[这个微软论坛问题](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/63519d67-7eb5-4f6b-be4f-a6d064830d3f)：

Terminated 表示应用先被挂起，然后用户 Session 正常结束。

要在调试器中模拟这一点，您可以在模拟器中运行您的应用程序，然后触发挂起（调试、触发挂起）。然后您可以注销模拟器。然后，您可以在调试器中再次启动模拟器，并看到您遇到了来自先前“终止”状态的条件。

或者，您可以使用[winrt.codeplex.com上提供的工具](http://winrt.codeplex.com)

[更新：2013-03-11 @ 11:02PST]

重要的是要了解，在[Windows 8 App Lifecycle](http://msdn.microsoft.com/en-us/library/windows/apps/hh464925.aspx)中，[`ApplicationExecutionState`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.activation.applicationexecutionstate%28v=win.10%29.aspx)枚举指示上次进程退出时应用程序的状态（通过几个对象的`PreviousExecutionState`property ）。

模拟这种状态的唯一方法是暂停您的应用程序，注销并重新登录并重新启动应用程序，或者您可以通过使用/编写一个可以消耗相当大一部分可用物理 RAM 的应用程序来模拟负载下的系统，强制 Windows 通过强制终止暂停的应用程序来尝试回收资源。

要使您的机器压力过大并消耗大量内存等，您可以使用 Windows SDK 中的 consume.exe 命令行应用程序或使用[James McCaffrey 的 EatMem 工具](http://msdn.microsoft.com/en-us/magazine/cc163613.aspx#S4)。

# python - 有没有办法让 ZeroMQ 在一个套接字上为所有传入/传出消息模式工作？

> ID：15291689
> 
> 赞同：2
> 
> 时间：2013-03-08T10:21:14.133
> 
> 标签：python, messaging, zeromq, messagebroker

Zmq 非常快，但对于任何复杂的架构来说，每侧的每个 2 路连接（以及每种连接类型 - 例如 REQ-REQ 和 PUB-SUB 等）都有一对套接字。于是出现了经纪人的概念。

具有通道的代理套接字（例如命名连接抽象），将提供模式类型封装。一种在每台机器上的一个端口上打开一个套接字并让它完成所有操作（PUB-SUB，REQ-REP 等）的方法将是花哨的。

有没有办法用 zmq 或它的一些扩展为所有人创建这样一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T14:20:23.807

您不能使用相同的 ZMQ 套接字执行 PUB/SUB 和 REQ/REP，它根本行不通。但是，您可以将逻辑封装在单个组件中，至少可以使用 接收来自不同套接字类型的消息`ZMQ.Poller`，这是 Python 示例，希望对您有所帮助...

[https://github.com/imatix/zguide/blob/master/examples/Python/mspoller.py](https://github.com/imatix/zguide/blob/master/examples/Python/mspoller.py)

顺便说一句，如果你在做 N 对 N PUB/SUB，你应该使用 ZMQ 代理/转发器作为中介；否则，您会遇到动态发现问题，请在此处阅读：http: [//zguide.zeromq.org/page :all#The-Dynamic-Discovery-Problem](http://zguide.zeromq.org/page:all#The-Dynamic-Discovery-Problem)

# python - 将 xlwt 生成的 excel 文件导入 SAS

> ID：15291693
> 
> 赞同：1
> 
> 时间：2013-03-08T10:21:23.243
> 
> 标签：python, excel, sas, xlwt

我使用 xlwt 将一堆 csv 文件转换为 excel 文件。之后，我需要将这些 excel 文件导入 SAS（统计软件）。

在第一次尝试时，SAS 会抛出一个错误，指出文件格式无效。

但是，当我只用 MS Excel 打开任何生成的文件并关闭而不做任何更改并且不保存文件时，文件会成功导入 SAS。

我发现 MS Excel 更改了文件头，在其中添加了当前用户名并更新了文件修改日期。

我想知道是否有可能在保存之前修改excel文件二进制头。

更新：我正在使用 xlwt 版本 0.7.4、Python 2.7.3、SAS 9.3、Excel 2010、Windows 7 32 位。

这是我将 CSV 转换为 Excel 的代码的一部分：

```
wb = xlwt.Workbook(encoding='latin-1')
ws = wb.add_sheet('Sheet1')
sourceCSV = csv.reader(open(files, 'rb'), delimiter=";")
for rowi, row in enumerate(sourceCSV):
    for coli, value in enumerate(row):
        ws.write(rowi, coli, value)
wb.save(xls_file) 
```

以下是与 SAS 导入功能一起使用的选项：

```
...
DBMS=EXCEL REPLACE;
RANGE="Sheet1$";
GETNAMES=YES;
MIXED=NO;
SCANTEXT=YES;
USEDATE=YES;
SCANTIME=YES;
... 
```

这是 SAS 产生的错误：

```
ERROR: Connect: External table is not in expected format. 
ERROR: Error in the LIBNAME statement. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:15:21.473

如果在 Excel 中打开工作簿并保存它允许 SAS 正确导入它，这将表明（对我而言）存在一些缺陷`xlxt`（我一无所知的过程）。由于 Excel 工作簿的类型很多，将 Excel 文件导入 SAS 是一个复杂的主题。

直接读取 CSV 文件并跳过转换为 Excel 会容易得多。当您使用**PROC IMPORT**读取 CSV 文件时，SAS 检查文件的前几行以确定列类型。默认情况下，SAS 将只查看文件中的前 20 行，但您可以使用**GUESSINGROWS**语句进行更改：

```
proc import datafile="C:\temp\test.csv"
     out=mydataset
     dbms=csv
     replace;
     getnames=yes;  /* Uses first row in CSV for column names */
     guessingrows=32767; 
run; 
```

**以上是 SAS 9.2 版GUESSINGROWS**的最大值；如果您使用的是 9.3，则最大值已增加到 2,147,483,647。

# objective-c - 自定义类的对象未存储在 NSMutableArray 中

> ID：15291697
> 
> 赞同：1
> 
> 时间：2013-03-08T10:21:45.507
> 
> 标签：objective-c, nsmutablearray, nsobject

我想将对象添加到 NSMutableArray 但在编写以下代码后我得到 benchmarkArray NIL。错在哪里请帮帮我

```
 [benchmark setBenchmarkTitle:self.benchmarkTitle.text];
    [benchmark setBenchmarkDescription:self.benchmarkDescription.text];
    [benchmarkArray addObject:benchmark]; 
```

我的基准课程是：

```
@interface Benchmark : NSObject

@property (nonatomic, retain) NSString *bid;
@property (nonatomic, retain) NSString *benchmarkTitle;
@property (nonatomic, retain) NSString *benchmarkDescription;

-(id)initWithCoder: (NSCoder *)coder;
-(void)encodeWithCoder:(NSCoder *)encoder;

@end

@implementation Benchmark

@synthesize bid;
@synthesize benchmarkTitle;
@synthesize benchmarkDescription;

- (id) initWithCoder:(NSCoder *)coder {

    self = [super init];
    if(self) {
        bid = [coder decodeObjectForKey:@"id"];
        benchmarkTitle = [coder decodeObjectForKey:@"benchmarkTitle"];
        benchmarkDescription = [coder decodeObjectForKey:@"benchmarkDescription"];
    }
    return self;
}

- (void) encodeWithCoder:(NSCoder *)encoder {

    [encoder encodeObject:bid forKey:@"id"];
    [encoder encodeObject:benchmarkTitle forKey:@"benchmarkTitle"];
    [encoder encodeObject:benchmarkDescription forKey:@"benchmarkDescription"];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:36:02.467

您的 BenchMark 课程没有任何问题。

您的问题在于您创建的类`benchMarkArray`。

创建它的属性后，您需要在`init/awakeFromNib/viewDidLoad`方法中将其初始化为：

```
benchMarkArray=[[NSArray alloc]init]; 
```

或者，

```
benchmarkArray=[NSArray new]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:30:03.063

你忘了分配和初始化

```
benchmarkArray = [[NSMutableArray alloc] init]; 
```

# android - 将自定义列表视图与 Arraylist 一起使用时出现问题

> ID：15291699
> 
> 赞同：0
> 
> 时间：2013-03-08T10:21:48.620
> 
> 标签：android, arraylist, android-listview

```
 private void dataCollection() {
    ArrayList<BreachHistoryData> responselist = SessionClass.getResponseList();

    listView = (ListView) findViewById(R.id.breachHistoryLstView);
    View header = (View) getLayoutInflater().inflate(R.layout.custom_breach_history_header, null);
    listView.addHeaderView(header);

    for (BreachHistoryData breachHistoryData : responselist) {
        messageView= new MessageView[] { new MessageView(breachHistoryData.getDate(), breachHistoryData.getTime(),breachHistoryData.getBreachNo(),breachHistoryData.getFee(), null) };

    }
    CustomAdapter adapter = new CustomAdapter(this,R.layout.custom_breach_history_items, messageView);
    listView.setAdapter(adapter); 
```

在上面的代码中，我在 responselist 中有大约 100 个值。但是当我尝试在我的列表视图中添加这些值时，它总是添加响应列表（ArraList）的最后一个值。当我打印值时它工作正常。但是将值添加到列表视图中只有一些问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:29:50.123

那是因为您只有一个 messageView，并且它正在被您 arrayList 中的每个元素重用。这意味着当 for 循环完成时，只有最后一项将在其中，这就是为什么您的适配器只显示最后一项。您要么需要一个 messageView 数组，要么在循环再次执行之前将每个消息视图添加到适配器。

# javascript - 为什么 onclick 事件不会在 asp.net 中触发？

> ID：15291702
> 
> 赞同：0
> 
> 时间：2013-03-08T10:21:51.670
> 
> 标签：javascript, onclick, html-table

我有一个`<td>`，点击我想显示的，`div`
这是我的代码：

```
 <td id="tdmord" style="padding-left: 15px; color: #86A7C5; padding-right: 15px; font family: Arial;
  font-size: small;" onclick="return showdiv1()">
  My Orders
 </td> 
```

这是JavaScript：

```
function showdiv1 {
        document.getElementById("divmo").style.display="block";
        return false;
    } 
```

问题是`<td>`不可点击，我无法点击它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T10:26:53.657

你失踪`()`了`showdiv1`

```
function showdiv1() {
    document.getElementById("tdmord").style.display="block";
    return false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T10:27:10.873

你的 showdiv1 缺少这个`()`

像这样定义 showdiv1() ：

```
<script type="text/javascript">
   function showdiv1()   {
      document.getElementById("tdmord").style.display="block";
       alert('s');
       return false; 
}
</script> 
```

您的函数 showdiv1 使用的 ID 也是错误的。纠正那个！！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T10:28:23.547

工作代码，无需为其创建额外的功能。

```
<table>
    <tr>
        <td onclick="document.getElementById('abc').style.display='block';">change color</td>
    </tr>
</table>
<div id="abc" style="display:none;">       
    pranay       
</div> 
```

[**JSFiddle 演示**](http://jsfiddle.net/k8UgT/167/)

* * *

您错过的代码错误 () ，更新的代码是

```
function showdiv1() {
        document.getElementById("divmo").style.display="block";
        return false;
    } 
```

[**JSFiddle 演示**](http://jsfiddle.net/k8UgT/168/)

# ios - 检测 UIWebview 的 FPS

> ID：15291705
> 
> 赞同：0
> 
> 时间：2013-03-08T10:22:02.270
> 
> 标签：ios, uiwebview, frame-rate

我正在构建一个 iOS 应用程序，使用 UIWebview 加载任何页面。如何检测每个页面的 FPS？或应用程序的 FPS？我想向使用我的应用程序查看其页面的用户显示 FPS 仪表。我知道我没有这样的 API 可以做到这一点。我可以使用 CADisplayLink 绘制一些东西然后计算 PFS 吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:25:05.860

> 我知道我没有这样的 API 可以做到这一点。

因为是 ViewController，它会根据需要显示。如果您没有任何操作，则会显示相同的操作，因此 FPS = 0.000000001 在这种情况下

# grails - GrailsApplicationAware 的使用

> ID：15291710
> 
> 赞同：0
> 
> 时间：2013-03-08T10:22:17.357
> 
> 标签：grails

根据[文档](http://grails.org/doc//2.1.3/api/org/codehaus/groovy/grails/plugins/support/aware/GrailsApplicationAware.html)，`GrailsApplicationAware`界面是

> 插件注册的类可以实现的便捷接口。

所以大概实现了这个接口的 Spring bean 可以使用它来获取`GrailsApplication`. 但是其他对象可以为同样的目的实现这个接口吗？我不清楚这是什么意思

> 插件注册的类

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T10:34:27.770

它与标准 Spring 接口的工作方式相同，例如`ApplicationContextAware`- 实现该接口的任何 bean（无论是隐式注册为人工制品还是显式注册在`resources.xml`或`resources.groovy`插件中`doWithSpring`）都将由框架自动调用其`setGrailsApplication(GrailsApplication ga)`方法，而无需将其显式命名为属性或打开自动装配。

对于设置为进行自动装配的 bean（例如 Grails 服务），您不需要实现`GrailsApplicationAware`，您只需要提供一个`setGrailsApplication`方法（Groovy 属性定义`def grailsApplication`将为您创建）并且它将自动装配，因为它`GrailsApplication`已注册为一个名为`grailsApplication`. 或者当然你可以显式地注入 bean

```
doWithSpring = {
  myPluginBean(MyPluginBean) {
    grailsApplication = ref('grailsApplication')
  }
} 
```

# css - 高度 100% 属性剪裁列

> ID：15291712
> 
> 赞同：0
> 
> 时间：2013-03-08T10:22:21.647
> 
> 标签：css

我有一个由三列构成的网站，每列必须是外部包装器（即页面）的 100% 高度。

我已将 html、body 和所有列设置为：

```
height: 100%; 
```

但是第三列正在剪辑内容，我不知道为什么。我看过关于 SO 的类似问题，但似乎没有一个可以解决我的问题。

我在这里设置了一个 jsfiddle 示例：http: [//jsfiddle.net/rTXt6/](http://jsfiddle.net/rTXt6/)

我确信它是一个简单的解决方案，但它让我发疯，我希望有人能提供帮助。

编辑：为了更清楚一点， height: 100% 似乎将高度设置为浏览器窗口高度的 100%，它不会调整大小以考虑其可能运行时间更长的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:26:18.900

[使用 css 浮动，您应该使用这样](http://nicolasgallagher.com/micro-clearfix-hack/)的 clearfix 。

我刚刚添加到您的代码中：

**html**

```
<div class="cf"></div> 
```

**CSS**

```
.cf:before,
.cf:after {
    content: " "; /* 1 */
    display: table; /* 2 */
}

.cf:after {
    clear: both;
}

.cf {
    *zoom: 1;
} 
```

Clearfix 来自下面的链接。

查看更新[的小提琴](http://jsfiddle.net/soyuka/rTXt6/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:07:16.170

在花了一些时间之后，我似乎找到了解决方案。设置`min-height:100%`而不是设置div`height:100%`的所有内部容器。[更新的小提琴](http://jsfiddle.net/rTXt6/4/)`#container`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T11:41:58.227

我找到了一个纯 HTML/CSS 修复并更新了 jsfiddle 以[在此处显示](http://jsfiddle.net/rTXt6/7/)

基本上我只是将前一个 div 中的每个 div 嵌套到最后一个（rightcol），并给每个子 div 一个较低的百分比宽度。

```
<div>LeftCol
    <div>CenterCol
         <div>RightCol
         </div>
    </div>
</div> 
```

像往常一样感谢大家的投入:)

# windows-phone-7 - 如何使应用程序出现在 wp 7/8 的游戏 (xbox) 部分

> ID：15291720
> 
> 赞同：2
> 
> 时间：2013-03-08T10:22:49.223
> 
> 标签：windows-phone-7, windows-phone-8

我做了一个游戏（简单的一个，不使用xna）。

我希望安装后它应该出现在 windows phone 7/8 的游戏 (xbox) 部分。

这个怎么做？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:42:34.343

只有获得批准的开发者才能制作出现在 Games Hub 的 Xbox 子部分中的游戏。

例如，请参阅[此 Channel 9 帖子的评论，该帖子讨论了适用于 Windows 8 的 Xbox live](http://channel9.msdn.com/Events/BUILD/BUILD2011/PLAT-756T)。（然而，评论指的是 WP7）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:34:10.263

将游戏清单中 App 元素的 Genre 属性设置为“Apps.Game”，您的游戏将显示在 Games Hub 中。

# windows-phone-7 - 在 windows phone 7 中使用 plist 文件打开

> ID：15291724
> 
> 赞同：0
> 
> 时间：2013-03-08T10:22:56.317
> 
> 标签：windows-phone-7, plist

我想使用 windows phone 7 打开 plist 文件，显然他无法理解文件的扩展名，因为当我将它从 file.plist 更改为 file.xml 时它可以工作！但我需要它来处理 plist 扩展。

我正在使用此代码打开它：

```
var resource = Application.GetResourceStream(
    new Uri(@"/myproject;component/cdp/document-category-info.plist", 
    UriKind.Relative)); 
StreamReader streamReader = new StreamReader(resource.Stream); 
string x = streamReader.ReadToEnd(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:44:19.373

Are you trying to load a file from Isolated Storage or is your plist embedded within one of your assemblies as a resource or included in your app's setup?

Your code above constructs an isolated storage file object, but never uses it and then tries to read the named resource from your EXE.

# objective-c - 为 Mac 构建 Objective-C 框架

> ID：15291727
> 
> 赞同：1
> 
> 时间：2013-03-08T10:23:04.127
> 
> 标签：objective-c, frameworks, xcodebuild

奥拉，

我按照本教程为 iOS 构建框架，[https://github.com/jverkoey/iOS-Framework](https://github.com/jverkoey/iOS-Framework)我想知道如何将它转换为为 Mac 构建框架。我被困在构建脚本上。

```
set -e
set +u
# Avoid recursively calling this script.
if [[ $SF_MASTER_SCRIPT_RUNNING ]]
then
    exit 0
fi
set -u
export SF_MASTER_SCRIPT_RUNNING=1

SF_TARGET_NAME=${PROJECT_NAME}
SF_EXECUTABLE_PATH="lib${SF_TARGET_NAME}.a"
SF_WRAPPER_NAME="${SF_TARGET_NAME}.framework"

# The following conditionals come from
# https://github.com/kstenerud/iOS-Universal-Framework

if [[ "$SDK_NAME" =~ ([A-Za-z]+) ]]
then
    SF_SDK_PLATFORM=${BASH_REMATCH[1]}
else
    echo "Could not find platform name from SDK_NAME: $SDK_NAME"
    exit 1
fi

if [[ "$SDK_NAME" =~ ([0-9]+.*$) ]]
then
    SF_SDK_VERSION=${BASH_REMATCH[1]}
else
    echo "Could not find sdk version from SDK_NAME: $SDK_NAME"
    exit 1
fi

if [[ "$SF_SDK_PLATFORM" = "iphoneos" ]]
then
    SF_OTHER_PLATFORM=iphonesimulator
else
    SF_OTHER_PLATFORM=iphoneos
fi

if [[ "$BUILT_PRODUCTS_DIR" =~ (.*)$SF_SDK_PLATFORM$ ]]
then
    SF_OTHER_BUILT_PRODUCTS_DIR="${BASH_REMATCH[1]}${SF_OTHER_PLATFORM}"
else
    echo "Could not find platform name from build products directory: $BUILT_PRODUCTS_DIR"
    exit 1
fi

# Build the other platform.
xcodebuild -project "${PROJECT_FILE_PATH}" -target "${TARGET_NAME}" -configuration "${CONFIGURATION}" -sdk ${SF_OTHER_PLATFORM}${SF_SDK_VERSION} BUILD_DIR="${BUILD_DIR}" OBJROOT="${OBJROOT}" BUILD_ROOT="${BUILD_ROOT}" SYMROOT="${SYMROOT}" $ACTION

# Smash the two static libraries into one fat binary and store it in the .framework
lipo -create "${BUILT_PRODUCTS_DIR}/${SF_EXECUTABLE_PATH}" "${SF_OTHER_BUILT_PRODUCTS_DIR}/${SF_EXECUTABLE_PATH}" -output "${BUILT_PRODUCTS_DIR}/${SF_WRAPPER_NAME}/Versions/A/${SF_TARGET_NAME}"

# Copy the binary to the other architecture folder to have a complete framework in both.
cp -a "${BUILT_PRODUCTS_DIR}/${SF_WRAPPER_NAME}/Versions/A/${SF_TARGET_NAME}" "${SF_OTHER_BUILT_PRODUCTS_DIR}/${SF_WRAPPER_NAME}/Versions/A/${SF_TARGET_NAME}" 
```

我认为 SF_OTHER_PLATFORM 应该是 mac 的 macosx，但似乎仍然中断。任何帮助将不胜感激。

**更新**

如果我调整脚本以使用这些变量运行

```
SF_OTHER_PLATFORM=macosx
SF_OTHER_BUILT_PRODUCTS_DIR="${BASH_REMATCH[1]}" 
```

然后我得到这个错误

```
lipo: can't open input file: 10.8/libTestFramework.a (No such file or directory)
Showing first 200 notices only
Command /bin/sh failed with exit code 1 
```

# android - 在 chartengine 图表周围绘制框架

> ID：15291733
> 
> 赞同：2
> 
> 时间：2013-03-08T10:23:25.343
> 
> 标签：android, achartengine

我想通过从 X 轴和 Y 轴的末端延伸线来“装箱”一个时间表，如下所示：

```
 ----------------------
   |                    |
10 +                    |
   |                    |
 5 +                    |
   |                    |
   ---+---+---+---+---+--
      1   2   3   4   5 
```

我的边距和图表背景颜色相同。

只是为了澄清：我不想要辅助轴。而且我不想要网格。

我还没有找到一个现成的 API，但我想它可以在绘制背景或使网格适合整个图表时完成。最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:02:09.270

好的，所以我想这不是很多人需要的功能。我继续实施了一个我并不引以为豪的解决方案，但它适用于我™。我最终继承了 TimeChart 类并覆盖了 draw()：

```
 @Override
public void draw(Canvas canvas, int x, int y, int width, int height,
        Paint paint) {
    super.draw(canvas, x, y, width, height, paint);
    int[] margins = mRenderer.getMargins();
    int left = x + margins[1];
    int top = y + margins[0];
    int right = x + width - margins[3];
    int legendSize = getLegendSize(mRenderer, height / 5, mRenderer.getAxisTitleTextSize());
    int bottom = y + height - margins[2] - legendSize;
    paint.setColor(mRenderer.getAxesColor());
    canvas.drawLine(left, top, right, top, paint);
    canvas.drawLine(right, top, right, bottom, paint);
} 
```

# actionscript-3 - 如果 Adob e Air ANE 影响 Adob e Air 或与 Adob e Air 冲突

> ID：15291734
> 
> 赞同：0
> 
> 时间：2013-03-08T10:23:29.243
> 
> 标签：actionscript-3, flash, air, adobe

因为 Adob​​e Air ANE 使开发人员能够编写本机代码来控制几乎所有内容。所以我想知道 ANE 代码是否可能会影响或与 Adob​​e Air 原生功能发生冲突。比如我通过actionscript3调音量。同时，我也通过 ANE 调节音量。是否可能导致错误或冲突？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T18:06:11.957

AS3 是单线程且完全线性的。即使使用 ANE，两件事也不能同时发生（显然，除非您使用 ANE 来利用第二个线程）。基本上，使用 ANE，您可以调用 SWC/AS3 库中的方法，该库调用本机代码中的方法。本机代码运行，然后返回到 SWC/AS3 库，然后返回到原始代码。

所以...

```
as3 -> start changeVolume()
as3 library -> start changeVolume()
native code -> changeVolume()
as3 library -> finish changeVolume()
as3 -> finish changeVolum()
as3 -> next set of instructions run 
```

编辑：我应该提到这不再完全正确。您可以使用允许您利用其他线程的工作程序。但是，ANE 最有可能的情况是在移动设备上，而工作人员目前不为移动设备工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T15:24:49.473

据我所知，`ANE`就像 AS3 代码中的库一样工作。它就像一个链接的 SWC。因此，您只需将`ANE`SWC 视为 AS3 库代码的一部分，而不必担心冲突。

# sass - 在不使用注释的情况下将文本传递给已编译的 CSS

> ID：15291737
> 
> 赞同：0
> 
> 时间：2013-03-08T10:23:34.140
> 
> 标签：sass

有没有办法将自定义文本传递给编译的 CSS？我们正在尝试传递 {if} 语句，但不希望在最终 CSS 中包含注释标签：

```
{if something}
body { color: red; }
{/if} 
```

现在我有编译错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:36:35.370

使用[插值](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#interpolation_) `#{}`和引号的组合`' '`：

```
#{'{if something}'}
body { color: red; }
#{'{/if}'} 
```

# c# - 为序列化目的反转接口实现者的选择

> ID：15291741
> 
> 赞同：2
> 
> 时间：2013-03-08T10:23:48.657
> 
> 标签：c#, implementation

我有一个方法通过 HTTP 获取一些数据作为 Json 并在将实际对象传递回调用者之前对其进行反序列化，这是标题

```
public IServiceResponse<IEnumerable<ISession>> 
       GetAllBySubscriptionAndApp(string subscriptionId, 
                                  string appId) 
```

因为我真的不关心上述接口的任何实现细节，所以我的响应语句看起来像这样。

```
var httpResponse = 
_httpClient.GetResponse<IServiceResponse<IEnumerable<ISession>>>(request, 
                                                                 _serializer); 
```

有眼光的读者会注意到，这将引发异常，因为提供的序列化程序对接口了解不足，无法重新水合请求的对象。

*   **所以我的问题是**

鉴于上述情况，调用者向我提供使我的序列化工作所需的具体实现的最干净的方式是什么。

# asp.net-mvc-4 - 将 C# MVC-4 视图转换为 Web 应用程序

> ID：15291747
> 
> 赞同：0
> 
> 时间：2013-03-08T10:24:05.130
> 
> 标签：asp.net-mvc-4, ext.net

所以我在一个正在运行的 MVC-4 / Ext.Net 2.1 应用程序上得到了一个小的 aspx 视图。我想将其转换为带有代码隐藏和设计器的“Web 应用程序”。

第一次单击视图上下文菜单中的“转换为 Web 应用程序”时，我收到以下错误消息：

```
Unable to convert to Web Application because Code-Behind file is missing 
```

创建一个名为“Default.aspx.cs”的新类并从“Default.aspx”作为代码隐藏文件引用它后，我收到以下错误消息：

```
Class 'System.Web.Mvc.ViewPage<dynamic>' not found in code-behind file 
```

我尝试直接使用'System.Web.Mvc'以及创建一个类并初始化它的实例：

```
public void Page_Load(object sender, EventArgs e)
{
   ViewPage<dynamic> viewpage = new ViewPage<dynamic>();
   //Do Some Stuff
} 
```

现在我向 SO 寻求帮助，因为谷歌搜索没有带来除“ext.net/download”或“msdn.microsoft.com/asp.net/”以外的结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:32:12.653

[Visual Studio 中缺少 ASP.NET MVC“转换为 Web 应用程序”选项](https://stackoverflow.com/questions/2215277/asp-net-mvc-convert-to-web-application-option-is-missing-in-visual-studio)很好地回答了这个问题。按照描述的步骤进行操作后，转换工作。

后面的代码现在看起来像这样：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using Ext.Net;
using Ext.Net.MVC;
using Ext.Net.Utilities;
using System.Web.Mvc;

namespace MyNamespace.Views.Component
{
    public partial class Default : ViewPage<dynamic>
    {
    //do the usual stuff
    }
} 
```

和 Default.aspx 的 @Page：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Base.Master"
CodeBehind="~/Views/Component/Default.aspx.cs" Inherits="MyNamespace.Views.Component.Default" AutoEventWireup="True" %>
<%@ Register Assembly="Ext.Net" Namespace="Ext.Net" TagPrefix="ext" %> 
```

# memory-management - 导入库是否会在 Arduino 中加载所有内容？

> ID：15291750
> 
> 赞同：0
> 
> 时间：2013-03-08T10:24:14.457
> 
> 标签：memory-management, embedded, arm, arduino, microcontroller

我正在使用为 Arduino 编写的各种开源库来试验 Arduino。这些库中的大多数都有数百种方法/功能，但我实际上只使用了其中的一小部分。

在这种情况下，Arduino 是否会将所有内容加载到它的内存中？换句话说，从库中提取所需的内容有什么好处吗？

此外，请指出任何描述 Arduino 内存管理的好文章。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:58:45.863

不，不是的。它只是使用您通过#include 语句选择的库。
由于 arduino 中的内存有限，您只能加载所需的库，一旦编译它们，只有所需的函数会被编译成二进制文件。所以内存使用量是最小的。
看看 arduino 的内存模型[http://arduino.cc/en/Tutorial/Memory](http://arduino.cc/en/Tutorial/Memory)，相当简洁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:38:06.323

静态链接库是存档中目标文件的集合。*链接器*将搜索库以解析代码中的引用，并将仅提取和链接那些包含解析此类符号所需的代码的目标文件。

这有多有效取决于库的*粒度*。例如，如果所有函数（即使是您不需要的函数）都定义在单个目标文件中，则链接器将提取并链接整个目标文件，这可能会导致代码臃肿。理想情况下，库作者将为每个目标文件定义一个外部接口（或至少始终一起使用的接口）。

智能链接器可以执行所谓的*链接器反馈*，它本质上执行链接两次，因此即使在单个目标文件中也可以删除未引用的代码。我不知道您的链接器是否这样做，但大概信息将在文档中。

在任何情况下，您都可以让链接器生成一个链接图，该图将准确显示已链接的内容以及链接的大小。当然请注意，许多库函数将依赖于其他库函数，因此将包含您在任何情况下都可能没有直接引用的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:55:21.000

您可以“avr-objdump -t”从您的精灵创建地图。-d 用于汇编列表。至于自己看。您需要从 IDE 的首选项中启用显示编译的详细输出，以显示包含 elf 文件的临时目录。

例子：

```
C:\DOCUME~1\mflaga\LOCALS~1\Temp\build6395515806682540138.tmp>C:\projects\Arduino\hardware\tools\avr\bin\avr-objdump -t MP3Shield_Library_Demo.cpp.elf > MP3Shield_Library_Demo_wo_mem.cpp.elf.map
C:\DOCUME~1\mflaga\LOCALS~1\Temp\build6395515806682540138.tmp>C:\projects\Arduino\hardware\tools\avr\bin\avr-objdump -d MP3Shield_Library_Demo.cpp.elf > MP3Shield_Library_Demo_wo_mem.cpp.elf.lst 
```

我做了上述操作，并在后续构建之间注释掉了对我的库的函数成员的调用。查看代码没有链接到程序集中。

# java - Java ssl/https 连接到 JAX-WS（在 WL 10.3 中部署）失败

> ID：15291751
> 
> 赞同：0
> 
> 时间：2013-03-08T10:24:19.247
> 
> 标签：java, ssl, jax-ws, ssl-certificate, httpsurlconnection

我正在尝试使用 jdk 版本 1.6.0_29 编写 Java https 客户端（使用 HttpsURLConnection）。然后我将证书 /wlserver_10.3/server/lib/CertGenCA.der 导入客户端的密钥库。通过以下命令：

> keytool -import -alias test -keystore "D:\Program Files\Java\jdk1.6.0_29\jre\lib\security\cacerts" -file CertGenCA.der

问题是我不断收到“线程“主”javax.net.ssl.SSLHandshakeException：握手期间远程主机关闭连接中的异常”SSL调试输出如下：

```
 keyStore is : 
           keyStore type is : 
           jks keyStore provider is : 
           init keystore

           init keymanager of type SunX509
           trustStore is: D:\Program Files\Java\jdk1.6.0_29\jre\lib\security\cacerts
           trustStore type is : jks
           trustStore provider is : 
           init truststore
enter code here
adding as trusted cert:
Subject: CN=SwissSign Platinum CA - G2, O=SwissSign AG, C=CH
Issuer:  CN=SwissSign Platinum CA - G2, O=SwissSign AG, C=CH 
Algorithm: RSA; Serial number: 0x4eb200670c035d4f 
Valid from Wed Oct 25 04:36:00 VET 2006 until Sat Oct 25 04:06:00 VET 2036

adding as trusted cert:
Subject: EMAILADDRESS=info@valicert.com, CN=http://www.valicert.com/, OU=ValiCert Class    1 Policy Validation Authority, O="ValiCert, Inc.", L=ValiCert Validation Network 
```

颁发者：EMAILADDRESS=info@valicert.com，CN= [http://www.valicert.com/，OU=ValiCert](http://www.valicert.com/) Class 1 Policy Validation Authority，O="ValiCert, Inc."，L=ValiCert 验证网络算法：RSA；序列号：0x1 有效期从 1999 年 6 月 25 日星期五 18:23:48 VET 到 2019 年 6 月 25 日星期二 17:53:48 VET

.. .. ..

```
 trigger seeding of SecureRandom
            done seeding SecureRandom

            Allow unsafe renegotiation: false 
            Allow legacy hello messages: true 
            Is initial handshake: true 
            Is secure renegotiation: false 

            %% No cached client session 
            *** ClientHello, SSLv3 
            RandomCookie:  GMT: 1362670800 bytes = { 77, 1, 89, 245, 75, 245, 125, 199, 168, 78, 33, 255, 83, 57, 65, 228, 118, 11, 240, 48, 210, 7, 245, 45, 70, 153, 149, 149 }

            Session ID:  {} 
            Cipher Suites: [SSL_RSA_WITH_RC4_128_MD5, SSL_RSA_WITH_RC4_128_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_DES_CBC_SHA, SSL_DHE_RSA_WITH_DES_CBC_SHA, SSL_DHE_DSS_WITH_DES_CBC_SHA, SSL_RSA_EXPORT_WITH_RC4_40_MD5, SSL_RSA_EXPORT_WITH_DES40_CBC_SHA, SSL_DHE_RSA_EXPORT_WITH_DES40_CBC_SHA, SSL_DHE_DSS_EXPORT_WITH_DES40_CBC_SHA, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]

              Compression Methods:  { 0 } 
              *** 
              main, WRITE: SSLv3 Handshake, length = 75 
              main, received EOFException: error 
              Exception in thread "main" javax.net.ssl.SSLHandshakeException: Remote host closed connection during handshake 
```

主要，处理异常：javax.net.ssl.SSLHandshakeException：握手期间远程主机关闭连接

```
 main, SEND TLSv1 ALERT:  fatal, description = handshake_failure
              main, WRITE: TLSv1 Alert, length = 2 
              main, called closeSocket() 
```

main，称为 close() main，在 com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:849) 处称为 closeInternal(true)

......

```
 Caused by: java.io.EOFException: SSL peer shut down incorrectly
               at com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:333)
               at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:830)
... 7 more 
```

不知道如何解释所有这些信息

我的代码是从 Eclipse 和 URL (JAX-WS) 运行的，它在 LAB 和 solaris 框中

我的测试客户端代码如下：

```
 URL wsdlLocation = new URL("[https://server.lab.ciso.com:8833/Impl/Service?wsdl](https://server.lab.ciso.com:8833/Impl/Service?wsdl)");

```
 System.setProperty("weblogic.security.SSL.ignoreHostnameVerification", "true");
    System.setProperty("javax.net.ssl.trustStore", "D:\\Program Files\\Java\\jdk1.6.0_29\\jre\\lib\\security\\cacerts");
    System.setProperty("javax.net.ssl.trustStorePassword", "changeit");
    System.setProperty("https.protocols", "SSLv3");

    SSLSocketFactory sslsocketfactory = (SSLSocketFactory) SSLSocketFactory.getDefault();

    HttpsURLConnection conn = null;
    try {
        conn = (HttpsURLConnection) wsdlLocation.openConnection();
        conn.setSSLSocketFactory(sslsocketfactory);
        conn.setDoOutput(true);
        conn.setUseCaches(false);
        conn.setRequestMethod("GET");
        conn.setRequestProperty("Content-Type","application/Json");
        conn.setDoInput(true);
        conn.connect();
        BufferedReader br = new BufferedReader(new InputStreamReader(conn.getInputStream()));
        StringBuilder sb = new StringBuilder();
        String line;
        while ( ((line = br.readLine()) != null)) {
            if((line.indexOf("wsp:PolicyReference") == -1))
                sb.append(line+"\n");
        }
        br.close();
        System.out.println("Random code::"+sb.toString());

    } finally {
        if (conn != null) {
            conn.disconnect();
        }
    } 
``` 
            回答 #1

赞同：0

时间：2013-03-08T12:52:34.893

首先，修改 JDK 安装的 cacerts 信任库是非常糟糕的做法，因为由于漏洞，您将使用当前大约每周发布一次的 JDK 更新来丢失修改。

如果您想使用修改后的 Java 信任库，请将其复制到您的项目中并从那里修改/使用它。

您的代码的主要问题（我假设）是您使用以下调用将协议限制为 SSLv3 `System.setProperty("https.protocols", "SSLv3");`：.

SSL3 在某些情况下非常陈旧且不安全，因此您应该使用 TLS v1.0 或更高版本。如果服务器仅限于 TLS（这里似乎就是这种情况），您的连接将失败。

因此将`"SSLv3"`其更改为`"TLSv1"`或`"TLSv1.1"`（`"TLSv1.2"`仅 Java 7 支持 AFAIR）。

```

# asp.net-mvc - MVC3 两个字段集两个按钮

> ID：15291753
> 
> 赞同：0
> 
> 时间：2013-03-08T10:24:19.900
> 
> 标签：asp.net-mvc, html, post

我在 MVC3 项目中使用引导程序。我已经实现了 Bootstrap 选项卡导航功能。

我的麻烦是我需要在每个选项卡上使用不同的表单，每个选项卡都有自己的字段和提交按钮，但是当我单击第二个提交按钮（在第二个选项卡上）时，表单正在提交第一个选项卡中包含的信息。

我的代码...

```
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

@*<fieldset>*@

<div class="tabbable"> <!-- Only required for left/right tabs -->
  <ul class="nav nav-tabs">
    <li class="active">
        <a href="#tab1" data-toggle="tab">Usuario</a>
    </li>
    <li>
        <a href="#tab2" data-toggle="tab">Agente</a>
    </li>
  </ul>
  <div class="tab-content">

    <div class="tab-pane active" id="tab1">

    <fieldset>

    <table class="table" border="0" cellspacing="5" >
    <tr> 

    <td>

        @*<td style="border-top:0px;">*@
        <span class="label">Datos del usuario</span>

        <br />
        <br />

        <div class="editor-field" title="User name"> 

            <select>

             <option>usuario numero 1</option>
             <option>usuario numero 2</option>
             <option>usuario numero 3</option>
             <option>usuario numero 4</option>
             <option>usuario numero 5</option>

            </select>

            @*@Html.TextBoxFor(model => model.Users.Name, new { @maxlength = "9", @autocomplete = "off", style = "width: 140px;" })
            @Html.ValidationMessageFor(model => model.Users.Name)*@

       </div> 

       <br />
        <div class="editor-label">
            <span class="label">Login (e-mail)</span> 
        </div>

        <div class="editor-field" title="User Login">
            @Html.TextBoxFor(model => model.Login, new {style = "width: 140px;" })
            @Html.ValidationMessageFor(model => model.Login)

        </div>
        <br />
        <div class="editor-label">
            <span class="label">Password</span> 
        </div>

        <div class="editor-field" title="User Password">

            <span>Se genera automáticamente</span>                       

        </div>

        </td>
        </tr>
    </table>

        <br />
        <br />

     <div style="float: right;">

        <button type="reset" class = "btn btn-warning">
            <i class="icon-fire icon-white"></i> Clear
        </button>

        <button type="submit" class = "btn btn-success">
            <i class="icon-plus icon-white"></i> Create
        </button>

    </div>
    </fieldset>

    </div>

    <div class="tab-pane" id="tab2">

    <fieldset>

    <table class="table" border="0" cellspacing="5" >
    <tr> 
    <td>
        <span class="label">Datos del agente</span>
        <br />
        <br />

        <div class="editor-label">
            <span class="label">Login (e-mail)</span> 
        </div>

        <div class="editor-field" title="Agent Login">

            @Html.TextBoxFor(model => model.Login, new { style = "width: 140px;" })
            @Html.ValidationMessageFor(model => model.Login)

        </div>
        <br />
        <div class="editor-label">
            <span class="label">Password</span> 
        </div>

        <div class="editor-field" title="Agent Password">

            <span>Se genera automáticamente</span> 

        </div>

        <br /><br /><br /><br /><br />

    </td>   
    </tr>
    </table>

        <div style="float: right;">

        <div class = "btn-group">
                <a class="btn" href="#" onclick="location.href='@Url.Action("Index", "Admin", null)';return false;"><i class="icon-ban-circle"></i> Cancel</a>
        </div>

        <button type="reset" class = "btn btn-warning">
            <i class="icon-fire icon-white"></i> Clear
        </button>

        <button type="submit" class = "btn btn-success">
            <i class="icon-plus icon-white"></i> Create
        </button>

        </div>

        </fieldset>

    </div>
  </div>
</div>

} 
```

关于如何让它工作的任何想法？

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:51:09.687

您需要在每个选项卡上拥有：

```
@using(Html.BeginForm())
{
    ...
} 
```

您还需要为其中至少一个指定非默认发布操作。

有一个 是可以的`@Html.ValidationSummary()`，但如果你想在两个实例中看到任何错误，它就必须不在选项卡之外。

# wordpress - RSS 提要打印 XML 代码

> ID：15291754
> 
> 赞同：1
> 
> 时间：2013-03-08T10:24:26.560
> 
> 标签：wordpress, rss

我有一个 WordPress 网站，它有一个`RSS`提要，但是当我检查`RSS`提要页面时，它会显示`XML`代码；

![在此处输入图像描述](../Images/aa7d3906a42057e18c770302a5a0d6fc.png)

为什么 ？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T22:13:36.257

不同的浏览器以不同的方式显示 RSS 提要，因为 RSS 只是一种标准化的 XML 格式。您似乎正在尝试在 Chrome 中查看提要。如果您尝试在 Internet Explorer 中打开它，它可能会显示为“正常”，因为 IE 有一个内置的 RSS 查看器，它将为您格式化 RSS XML。

例如，在 Chrome 中查看 Wordpress 自己的博客，您会看到与屏幕截图类似的行为：[http ://wordpress.org/news/feed/](http://wordpress.org/news/feed/)

如果它仍然显示为 XML，作为最后的故障排除步骤，您可以随时尝试[W3C Feed Validator](http://validator.w3.org/feed/ "W3C 提要验证器")。

# c# - 如何在 c# 中使用随机类生成单个随机数（xna）

> ID：15291756
> 
> 赞同：-1
> 
> 时间：2013-03-08T10:24:37.163
> 
> 标签：c#, xna

我正在尝试使用`Random`c# 中的类生成一个随机数来绘制纹理。我正在尝试将纹理绘制到屏幕上的随机坐标，但是当我尝试运行下面的代码时，纹理会一直在随机空间中移动。我需要把它画出来，让它留在原地。

```
Random _Random = new Random();
private int MaxX;
private int MaxY; //screen height and width 

public Texture2D hat;

//code to load in image

//draw code
spriteBatch.Begin();
int hatx = _Random.Next(1, MaxX);
int haty = _Random.Next(1, MaxY);

spriteBatch.Draw(hat, new Rectangle(hatx, haty, 80, 80), Color.White);
spriteBatch.End(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:27:01.523

您只需为纹理调用`Random.Next`一次。目前，您正在为每个绘制操作调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:31:45.317

```
Random _Random = new Random();
private int MaxX;
private int MaxY; //screen height and width 

public Texture2D hat;

//code to load in image

// make sure x and y are initialized only once before rendering loop
int x = _Random.Next(1, MaxX);
int y = _Random.Next(1, MaxY);

//draw code
spriteBatch.Begin();
 int hatx = x;
 int haty = y;

 spriteBatch.Draw(hat, new Rectangle(hatx, haty, 80, 80), Color.White);
 spriteBatch.End(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:31:56.620

问题是每次绘制函数调用 x 和 y 数字都会改变。因为每次随机数都会生成一个新数。所以你的纹理会移动到不同的地方。您需要在这里做的是让两个类成员 X 和 Y，并在 ContentLoad 函数上生成随机数并填充 X 和 Y 值。并且在绘制函数中使用类成员 X 和 Y 而不是制作新的 X 和 Y。

# php - PHP 5.4.12 上传 > 2GB 仍有问题？

> ID：15291758
> 
> 赞同：0
> 
> 时间：2013-03-08T10:24:40.953
> 
> 标签：php, upload, debian

我在某处读到，在 PHP 5.4.4 之后，上传文件 >2GB 的问题已得到修复（但在更改日志中没有看到）。但我仍然无法通过 Chrome 3GB 文件上传。

有没有人遇到同样的问题？

Debian 6，nginx 1.2.7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:48:21.787

好的，快速检查后的一些信息。在 post_max_size 的文档中（在 PHP 4.2.3 之后显然无效，请参阅[http://www.php.net/manual/en/ini.core.php#ini.post-max-size](http://www.php.net/manual/en/ini.core.php#ini.post-max-size)）它被告知该 memory_limit 也与文件上传有关。如果我做对了，这意味着 PHP 将在上传期间将完整文件存储在内存中。这告诉我，一些分块会很聪明……如果你没有很多可用的 RAM，那就是。如果你有那么多可用的 RAM，你似乎也必须增加 memory_limit。希望这个对你有帮助。

# android - android listview在asynctask中解析并传递响应

> ID：15291763
> 
> 赞同：0
> 
> 时间：2013-03-08T10:25:08.693
> 
> 标签：android

我有 asynctask 类，我在其中执行使用 web 服务并解析响应。解析后我得到列表<>。我怎样才能通过我的其他班级？

这是我的异步任务类

```
String response;
    List<Item> lstresponse_locations = null;
//  CustomAdapter CustAdapter;
//  List<Item> lstresult = new ArrayList<Item>();
//  ListView lstcities;

//  String params;
    @Override
    protected String doInBackground(String... params) {
        // TODO Auto-generated method stub\

        SendRequesttoServer(params);
        return response;
    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);

    }

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
    }

// getting response from webservice

    public void SendRequesttoServer(String[] params) {

        try {

        SOAP_ACTION = NAMESPACE + METHOD;
        SoapObject request = new SoapObject(NAMESPACE, METHOD);
        request.addProperty("CityName", params[0]);

        SoapSerializationEnvelope res = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);
        res.dotNet = true;
        res.setOutputSoapObject(request);

        HttpTransportSE call = new HttpTransportSE(url);

        SoapPrimitive result;
        call.call(SOAP_ACTION, res);
        result = (SoapPrimitive) res.getResponse();
        ParseLocations Objparselocations = new ParseLocations(
                    new ByteArrayInputStream(result.toString()
                            .getBytes("UTF-8")));
        lstresponse_locations = Objparselocations.parse();

        response = lstresponse_locations.toString();
            // lstCities.toArray();

        System.out.println(lstresponse);
    } catch (SoapFault e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
    e.printStackTrace();
    } catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
    e.printStackTrace();
    }

    }
} 
```

我怎样才能通过响应？谢谢 ramu

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:59:30.853

Try to override the onPostExecute in you activity itself and create a adapter object inside of the onPostExecute and set the adapter to your listview like

```
Class MyActivity extends Activity {

    public void onCreate(Bundle args) {
     ......
     ......
     new MyAsyncTask() {

       public void onPostExecute(List<Object> list) {
          listView.setAdapter(new MyAdapter(list));
       }

     }.execute(params);
     .......
     ........
   }
} 
```

**Edit** : In your AsyncTask class make the third parameter as List like

```
class MyAsync extends AsycnTask<String, Integer, List<Object>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:00:08.260

just pass your `ListView` and its `Adapter` to the `AsyncTask` in the constructor, set the `Adapter` in the `onPostExecute()` method. Worked fine for me

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:30:29.927

字符串由 doInBackground 返回以发布执行，因此 postExceute 中的结果是您的响应

```
 protected void onPostExecute(String result) {
                // TODO Auto-generated method stub
                super.onPostExecute(result);
Log.d("Response: ",result);

} 
```

# python - BeautifulSoup - str(soup) 与给出的 html 不同

> ID：15291766
> 
> 赞同：-1
> 
> 时间：2013-03-08T10:25:14.033
> 
> 标签：python, html, string, beautifulsoup

```
>>> from bs4 import BeautifulSoup as bs
>>> html = """<html>
<head><title>Test</title></head>
<body>
<p><b>para1</b><\p>
<p><b>para2</b><\p>
</body>
</html>"""
>>> 
>>> soup = bs(html)
>>> html == str(soup)
False
>>> print html
<html>
<head><title>Test</title></head>
<body>
<p><b>para1</b><\p>
<p><b>para2</b><\p>
</body>
</html>
>>> print soup
<html>
<head><title>Test</title></head>
<body>
<p><b>para1</b>&lt;\p&gt;
<p><b>para2</b>&lt;\p&gt;
</p></p></body>
</html> 
```

如您所见，`html`和`str(soup)`.. 之间有区别

```
< became &lt;
> became &gt; 
```

为什么会这样？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T10:27:00.703

您的 HTML 无效，BeautifulSoup 已尽力修复该问题。

请注意`<\p>`标签被转义，因为它们不是有效的 HTML 结束标签。相反，`</p>`添加了适当的标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T10:27:33.453

元素的结束标签`<p>`有错误的斜线。由于这是汤而不是 XML，bs4 接受这一点，但如果您打印它，则可以正确地转义它。

# openssl - 将 DER 格式的私钥文件转换为 PEM 格式

> ID：15291778
> 
> 赞同：1
> 
> 时间：2013-03-08T10:25:29.403
> 
> 标签：openssl, private-key, pem, der

我有一个 .prv 文件，它可能是 DER 格式的私钥文件。此文件用于认证 Cable Modem。

我想将此文件转换为 PEM 格式的文件。我尝试使用 openssl 工具，但以下命令均无效。

```
openssl x509 -inform der -in FILENAME.prv -out FILENAME.key
openssl rsa -inform der -in FILENAME.prv -out FILENAME.key
openssl pkcs8 -inform der -in FILENAME.prv -out FILENAME.key 
```

这是 .prv 文件内容的一些开头。

```
00000000h: 30 82 02 76 02 01 00 30 0D 06 09 2A 86 48 86 F7 ; 0?v...0...*낷놑
00000010h: 0D 01 01 01 05 00 04 82 02 60 30 82 02 5C 02 01 ; .......?`0?\..
00000020h: 00 02 81 81 00 BB 0F 6E DE 49 59 13 4A 44 12 AF ; ..걖.?n?Y.JD.?
00000030h: 84 F0 B7 13 18 C8 F8 43 AE 09 A6 8A 6C 9B F0 AC ; 꾭?.힉C?쫲l쏊?
00000040h: 90 1F 48 C2 75 75 41 78 74 FA DD 08 19 E0 C0 BF ; ?H혋uAxt玹..敾?
00000050h: CC 98 D7 72 B7 C3 8C 4A 2A B9 BC 95 B6 9A 54 17 ; ??련똉*뭡빒숿.
00000060h: 7C 5A 57 78 E1 68 87 69 18 56 8E 5D F4 D5 36 46 ; |ZWx?뇁.V?添6F
00000070h: DF 0F 6D 54 FC 30 B6 16 AD AF D2 C6 A8 D0 C1 F7 ; ?mT???盧ⓓ직 
```

还有什么我可以尝试的吗？

# ruby-on-rails - Backbone.js - 在模板中获取值

> ID：15291784
> 
> 赞同：0
> 
> 时间：2013-03-08T10:25:47.607
> 
> 标签：ruby-on-rails, backbone.js

我通过调用 API 从集合中获得了一个 Json。

```
{
  "next_page_link": null,
  "prev_page_link": null,
  "posts": [
    {
      "id": 1,
      "public": true,
      "actor": {
        "displayName": "Srikanth Jeeva",
        "id": "28"
      }
   },
  {
    "id": 2,
    "public": true,
    "actor": {
      "displayName": "Srikanth jeeva",
      "id": "21"
    }
 }] 
} 
```

这是意见：

```
Raffler.Views.StreamsIndex = Backbone.View.extend({
    template: JST['streams/index'],
    initialize: function(){
        this.collection.on('reset',this.render, this);
    },

    render: function(){
       $(this.el).html(this.template({entries: this.collection}));
       return this;
   }
}); 
```

现在我如何在模板中获取这些条目？

```
<h1>Stream</h1>
<%= entries["posts"] %> 
```

条目[“帖子”] 不显示帖子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:58:02.160

您应该循环数组，并且可以使用 <% %> 标记在模板中使用 javascript 代码。

一个例子可能是：

```
<ul>
<% _.each(entries.posts,function(post){ %>
    <li><%= post.actor.displayName %><li>
<% }); %>
</ul> 
```

# php - php 是否等待 API 调用的响应？

> ID：15291787
> 
> 赞同：-1
> 
> 时间：2013-03-08T10:26:00.913
> 
> 标签：php

如何从 php 脚本中调用外部域的最佳方式。是卷曲吗？如果是这样，php 在继续之前等待该行被处理，以便我们可以确定返回数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T10:28:48.743

从外部 URL 获取响应的最简单方法是使用 file_get_contents()，但如果您想要更多选项或发送帖子数据，cURL 绝对是更好的方法。不过，这两个函数都在等待响应。PHP 非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:30:13.540

您可以使用 Curl、file_get_contents（加载了适当的扩展）或做一些套接字工作。

```
class Tools
{
public static function post_request($url, $datos) 
{
    $resultado=null;
    $datos=http_build_query($datos);
    $url=parse_url($url);

    // extract host and path:
    $host=$url['host'];
    $ruta=$url['path'];

    $socket=fsockopen($host, 80, $errno, $errstr, 30);

    if($socket)
    {
        // send the request headers:
        fputs($socket, "POST $ruta HTTP/1.1\r\n");
        fputs($socket, "Host: $host\r\n");
        fputs($socket, "Content-type: application/x-www-form-urlencoded\r\n");
        fputs($socket, "Content-length: ". strlen($datos) ."\r\n");
        fputs($socket, "Connection: close\r\n\r\n");
        fputs($socket, $datos);

        while(!feof($socket))
        {
            $resultado.= fgets($socket, 128);
        }
    }
    else die('ERROR');

    fclose($socket);

    $resultado=explode("\r\n\r\n", $resultado, 2);
    $header=isset($resultado[0]) ? $resultado[0] : '';
    $contenido=isset($resultado[1]) ? $resultado[1] : '';

    return array(
        'status' => 'ok',
        'header' => $header,
        'content' => $contenido
        );
    }
}; 
```

如果我没记错的话，在处理请求之前脚本不会继续。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:30:14.047

是 - 使用 cURL，是的，它会等待回复（或失败）。

# validation - 在 DevExpress GridControl 中验证单元格

> ID：15291788
> 
> 赞同：3
> 
> 时间：2013-03-08T10:26:02.030
> 
> 标签：validation, devexpress, datasource, gridcontrol

只是一个简单的问题，我无法管理自己。

我有一个用于 Winforms (12.2) 的 DevExpress GridControl，其中填充了一些数值，网格是可编辑的，用户可以更改这些值。

想象一下用户改变了一个，我想要的是验证这个单元格，以便在我的数据源中修改相应的值，而无需在单元格外部单击。

也就是说，我希望用户能够验证和应用所有值，只需按下工具栏中的按钮，而不是单击 enter、esc 或单击表格。

我在看一些论坛并没有得到正确的答案

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:11:24.003

这取决于你想做什么。你有2个选择。验证该行并返回一个显示错误消息的消息框。或者你可以在单元格内有那个红色的小“x”

这两种方法都可以。但需要稍微不同的实现。这两种方法都要求您订阅gridview 的Validate row 事件，而不是gridcontrol。

像这样的东西会给你一个文本框；

```
private void gridView1_ValidateRow(object sender,
DevExpress.XtraGrid.Views.Base.ValidateRowEventArgs e) 
{
    e.Valid = false;
} 
```

像这样的东西会给你单元格中的红色“x”；

```
private void gridView1_ValidateRow(object sender, 
DevExpress.XtraGrid.Views.Base.ValidateRowEventArgs e) {
    GridView view = sender as GridView;
    GridColumn inStockCol = view.Columns["UnitsInStock"];
    GridColumn onOrderCol = view.Columns["UnitsOnOrder"];
    //Get the value of the first column
    Int16 inSt = (Int16)view.GetRowCellValue(e.RowHandle, inStockCol);
    //Get the value of the second column
    Int16 onOrd = (Int16)view.GetRowCellValue(e.RowHandle, onOrderCol);
    //Validity criterion
    if (inSt < onOrd) {
        //Set errors with specific descriptions for the columns
        view.SetColumnError(inStockCol, "The value must be greater than Units On Order");
        view.SetColumnError(onOrderCol, "The value must be less than Units In Stock");
    }
} 
```

信息在这里找到：[http ://documentation.devexpress.com/#windowsforms/DevExpressXtraGridViewsBaseColumnView_ValidateRowtopic](http://documentation.devexpress.com/#windowsforms/DevExpressXtraGridViewsBaseColumnView_ValidateRowtopic)

这仍然需要用户退出单元格，

我在这里找到了更多信息：http: [//www.devexpress.com/Support/Center/p/A289.aspx](http://www.devexpress.com/Support/Center/p/A289.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:37:22.320

在 menuItem_click 的处理程序中，执行以下操作：

```
private menuItem_Click(object sender, EventArgs e)
{
  gridView1.UpdateCurrentRow(); //return a bool, false = if validation error(s) was found
} 
```

这会强制视图验证输入并将其推送到数据源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-04T07:19:55.943

接受的答案，UpdateCurrentRow() 完全按照它所说的去做 - 它强制视图更新其结果，如果由于验证错误而无法更新，则返回 false。但这还不是全部。

要导致验证错误，您需要使用 ValidateRow 或 ValidatingEditor。所以这些是一起使用的。

不同之处在于 ValidatingEditor 在字段之间移动时起作用。

这个例子取自这里[https://docs.devexpress.com/WindowsForms/3055/controls-and-libraries/data-grid/examples/data-editing/how-to-validate-data-entered-by-end-users](https://docs.devexpress.com/WindowsForms/3055/controls-and-libraries/data-grid/examples/data-editing/how-to-validate-data-entered-by-end-users)

```
using DevExpress.XtraEditors.Controls;
using DevExpress.XtraGrid.Views.Base;
using DevExpress.XtraGrid.Views.Grid;
using DevExpress.XtraGrid.Columns;

private void gridView1_ValidatingEditor(object sender, BaseContainerValidateEditorEventArgs e) {
    ColumnView view = sender as ColumnView;
    GridColumn column = (e as EditFormValidateEditorEventArgs)?.Column ?? view.FocusedColumn;
    if (column.Name != "colBudget") return;
    if ((Convert.ToInt32(e.Value) < 0) || (Convert.ToInt32(e.Value) > 1000000))
        e.Valid = false;
}

private void gridView1_InvalidValueException(object sender, InvalidValueExceptionEventArgs e) {
    ColumnView view = sender as ColumnView;
    if (view == null) return;
    e.ExceptionMode = ExceptionMode.DisplayError;
    e.WindowCaption = "Input Error";
    e.ErrorText = "The value should be greater than 0 and less than 1,000,000";
    // Destroy the editor and discard the changes made within the edited cell.
    view.HideEditor();
} 
```

我的代码通常看起来像这样（VB）：

```
 Private Function ValidateView(view As ColumnView) As Boolean
        If view.IsEditing Then
            view.CloseEditor()
            Return view.UpdateCurrentRow()
        End If
        Return True
  End Function 
```

# c# - 检查类型是否为 CLR 对象

> ID：15291789
> 
> 赞同：2
> 
> 时间：2013-03-08T10:26:02.707
> 
> 标签：c#, xmlreader

我正在尝试序列化一个对象，并想知道某个类型是否可以由`XmlReader.ReadElementContentAsObject()`或 使用`ReadElementContentAs()`。

我可以询问一个类型是否是 CLR 类型，以便我知道我可以将它传递给这些方法吗？

```
if(myType.IsCLRType) // how can I find this property?
    myValue = _cReader.ReadElementContentAsObject(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T10:37:47.110

> 我想我正在寻找这个列表：http: [//msdn.microsoft.com/en-us/library/xa669bew.aspx](http://msdn.microsoft.com/en-us/library/xa669bew.aspx)

您可能可以通过 获得大部分方法`Type.GetTypeCode(type)`，但坦率地说，我希望您最好的选择更简单：

```
static readonly HashSet<Type> supportedTypes = new HashSet<Type>(
    new[] { typeof(bool), typeof(string), typeof(Uri), typeof(byte[]), ... }); 
```

并检查`supportedTypes.Contains(yourType)`。

没有神奇的预定义列表可以*完全*匹配您心目中的“此列表”。例如，`TypeCode`不记`byte[]`或`Uri`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:32:15.573

也许是这样；如果您将 CLR 类型定义为 System Core 类型。

错了我就删

```
public static class TypeExtension
{
    public static bool IsCLRType(this Type type)
    {
        var fullname = type.Assembly.FullName;
        return fullname.StartsWith("mscorlib");
    }
} 
```

或者;

```
 public static bool IsCLRType(this Type type)
    {
        var definedCLRTypes = new List<Type>(){
                typeof(System.Byte),
                typeof(System.SByte),
                typeof(System.Int16),
                typeof(System.UInt16),
                typeof(System.Int32),
                typeof(System.UInt32),
                typeof(System.Int64),
                typeof(System.UInt64),
                typeof(System.Single),
                typeof(System.Double),
                typeof(System.Decimal),
                typeof(System.Guid),
                typeof(System.Type),
                typeof(System.Boolean),
                typeof(System.String),
                /* etc */
            };
        return definedCLRTypes.Contains(type);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T10:35:58.123

```
bool isDotNetType = type.Assembly == typeof(int).Assembly; 
```

# javascript - 从 innerHTML 字符串获取输入元素

> ID：15291795
> 
> 赞同：0
> 
> 时间：2013-03-08T10:26:35.810
> 
> 标签：javascript, html

如何从作为字符串的 innerHTML 获取输入字段？getElementById 显然不起作用。

```
div.innerHTML = "<input id=\"ValueField\" name=\"test1\" value=\"1\" type=\"hidden\">" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:32:44.807

试试下面的代码：

```
var div = document.getElementById('div');
div.innerHTML = '<input id="ValueField" name="test1" value="1" type="hidden" />';
var input = document.getElementById('ValueField'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:33:08.880

如果您想将其作为字符串获取，这就是解决方案

```
div.innerHTML = '<input id="ValueField" name="test1" value="1" type="hidden">' 
```

# android - 适用于多个应用程序 android 的 admob 广告

> ID：15291798
> 
> 赞同：0
> 
> 时间：2013-03-08T10:26:43.830
> 
> 标签：android, admob, ads, developer-tools

我在任何地方都找不到如何使用广告暴民和广告中介来处理多个应用程序。我目前有 2 个应用程序，我知道什么更好：

1.  在广告提供商中拥有一个应用程序，并在我将制作的所有应用程序中使用相同的 id

2.  每个应用程序都有单独的应用程序 ID。

每个选项的后果（好的和坏的）是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:10:58.510

这个问题之前已经回答过很多次了。

你可以做任何一个。

为了获得更有针对性的广告，您应该为每个应用设置一个唯一的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:46:42.453

1.  您绝对应该为您拥有的每个应用程序设置一个单独的广告 ID。这使您可以更好地跟踪您的应用程序的执行情况。它也打算从 admob（和其他提供程序）中执行此操作。

# mysql - 动态优化查询以获得最佳结果

> ID：15291799
> 
> 赞同：0
> 
> 时间：2013-03-08T10:26:45.107
> 
> 标签：mysql

我必须对大型数据库执行高级搜索查询，每个数据库都有数百万个条目。

我们不想对查询进行硬编码，而是想即时提出查询。高级搜索允许您根据各种参数进行搜索 - 日期、来自其他列的 id，包括一次在搜索字段中给出的多个 order_id、order_item。事实上，批量订单搜索是它的主要焦点。

因此，查询框架的方式是这个应用程序有多好的核心。

我正在寻找有关我应该注意什么的建议，或优化查询的最佳实践。例如-：

在 where 条件下，应该先搜索索引更好的列，然后再搜索另一个参数 。`select * from orders where order_id in (a,b,c....) and relayed=true;`基本上比`select * from orders where relayed=true and order_id in (a,b,c....);`. 由于relayed的索引百分比只有50。它可以是真也可以是假，所以结果查询集仍然很大

另外，由于条目中有很多，这是一个好主意 - [http://explainextended.com/2009/08/18/passing-parameters-in-mysql-in-list-vs-temporary-table/](http://explainextended.com/2009/08/18/passing-parameters-in-mysql-in-list-vs-temporary-table/)

提出通用示例来说明您与 select、join、where、order_by 相关的观点。应该如何构造对如此大的表的查询？

对于这个问题的一般性质，我深表歉意，但坦率地说，这可能会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:43:34.840

在具有数百万条目的大型数据库上执行高级搜索查询

并动态优化查询以获得最佳结果，这是一个好主意

[http://sphinxsearch.com/](http://sphinxsearch.com/)

# java - 使用 mockito 跳过静态方法调用

> ID：15291804
> 
> 赞同：2
> 
> 时间：2013-03-08T10:26:53.960
> 
> 标签：java, mocking, mockito

我的主类中有一个调用 webservice 的方法。我想跳过那个方法调用，我怎么能在 mockito 中做到这一点。代码如下

```
MainCLass{

int main(){
    // I want to skip this method getting called
    MyClass.callWebservice();
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T11:38:45.513

如果您不想使用 PowerMock，可以执行以下操作：

*   将 Web 服务调用提取到自己的方法中。
*   扩展您的 MainClass 并覆盖此方法或使用间谍并存根该方法。

但可以肯定的是，如果您不想仅为此测试更改生产代码，那么这将是一个有效的论点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T10:29:31.663

这是一个静态调用，不能仅使用 Mockito 来模拟。但是您可以使用[PowerMock](http://code.google.com/p/powermock/)来做到这一点。这有点复杂，你可以在这里找到一个例子：[MockStatic](http://code.google.com/p/powermock/wiki/MockStatic)

# c# - 引入 Web 服务的 Visual Studio 问题

> ID：15291805
> 
> 赞同：1
> 
> 时间：2013-03-08T10:26:56.240
> 
> 标签：c#, visual-studio-2010, web-services, wsdl

我正在使用 VS2010，我想使用给我的 web 服务

[https://www.##################/pinManagement.cfc?wsdl](https://www.###################/pinManagement.cfc?wsdl) 我以前做过很多次，但由于某种原因，这一次我做错了

1.  右键，添加解决方案
2.  添加服务参考
3.  过去在 url 中，给一个命名空间，瞧

这很好，但由于某种原因，wsdl 中的一堆对象被遗漏了，即所有请求/响应对象。方法在那里，但没有别的。

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:49:10.853

好的，我解决了。感谢 Ian 查看我的错误的步骤。

我从这个网站 [http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/51babae5-26e5-4405-b03c-4301710854c0/得到了解决方案](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/51babae5-26e5-4405-b03c-4301710854c0/)

但如果链接失效，我会重新发布以下步骤

在 Visual Studio 中： 1\. 在解决方案资源管理器中单击“显示所有文件”

1.  在服务参考中打开名为“Reference.svcmap”的文件

2.  在“Reference.svcmap”中将选项 UseSerializerForFaults 设置为 false 并保存（请不要更新服务引用，显然这样做会将选项重置为 true）

3.  打开 Reference.cs，您应该会看到生成的操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:41:42.660

右键单击您的网络服务选择：

**配置服务引用=>取消选中引用程序集中的重用类型**

看看有没有帮助

**编辑 ：：**

![在此处输入图像描述](../Images/065d1d88315835db8cd1461c5e475824.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T11:11:12.823

尝试使用 XmlSerializer 创建代理。您可以通过从命令行运行 svcutil 然后将生成的 .cs 和 .config 文件拉入您的项目来做到这一点：

```
svcutil /serializer:XmlSerializer https://www.example.com/Collections/1x0x0/pinManagement.cfc?wsdl 
```

您从 svcutil 获得的任何错误都可能会帮助您缩小问题范围。

# javascript - 如何使用流星自动更新传单地图上的标记

> ID：15291809
> 
> 赞同：7
> 
> 时间：2013-03-08T10:27:05.233
> 
> 标签：javascript, meteor, leaflet

对于一个学校项目，我们有制作地理空间标签游戏的想法。您登录我们的应用程序，您的位置会显示在地图上，每当您靠近其他玩家时，您就会标记该人。（像儿童标签，但带有流星）

我们遇到的问题是，我们似乎无法自动更新传单地图上的标记。有一个标记显示它只是没有更新。

我们曾尝试过使用 Player.update，但它不起作用。

有什么建议么？

编码

```
 if (Meteor.isClient) {

    var userLatitude;
    var userLongitude;

    var map;

    Template.map.rendered = function () {

        // Setup map
        map = new L.map('map', {
            dragging: false,
            zoomControl: false,
            scrollWheelZoom: false,
            doubleClickZoom: false,
            boxZoom: false,
            touchZoom: false
        });

        map.setView([52.35873, 4.908228], 17);
        //map.setView([51.9074877, 4.4550772], 17);

        L.tileLayer('http://{s}.tile.cloudmade.com/9950b9eba41d491090533c541f170f3e/997@2x/256/{z}/{x}/{y}.png', {
            maxZoom: 17
        }).addTo(map);

        // If user has location then place marker on map
        if (userLatitude && userLongitude) {
            var marker = L.marker([userLatitude, userLongitude]).addTo(map);
        }

        var playersList = players.find().fetch();
        playersList.forEach(function(players) {
            // Change position of all markers
            var marker = L.marker([players.latitude, players.longitude], options={"id" : 666}).addTo(map);
        });
    };

    // If the collection of players changes (location or amount of players)
    Meteor.autorun(function() {

        var playersList = players.find().fetch();
        playersList.forEach(function(players) {
            // Change position of all markers
            var marker = L.marker([players.latitude, players.longitude]).addTo(map);
        });
    });
}

if (Meteor.isServer) {
    Meteor.startup(function () {
        // code to run on server at startup

    });
}

    /*
Template.hello.events({
        'click input' : function () {
        // template data, if any, is available in 'this'
        if (typeof console !== 'undefined')
            console.log("You pressed the button");
        }
    });
*/

/*
if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {                   
                userLatitude = 52.35873;
                userLongitude = 4.908228;

                players.insert({
                    name: "Martijn",
                    latitude: userLatitude,
                    longitude: userLongitude
                });
            });
        }
*/ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T14:07:58.833

您需要清除现有标记，否则它们会保留在地图上。最简单/最有效的方法是在创建标记时将标记附加到 LayerGroup。然后，当您要更新时，清除所有标记，然后再次添加它们。

在顶部添加图层组声明，这样你就有了

```
var map, markers; 
```

初始化地图后，

```
markers = new L.LayerGroup().addTo(map); 
```

更改此行：

```
var marker = L.marker([userLatitude, userLongitude]).addTo(map); 
```

到：

```
var marker = L.marker([userLatitude, userLongitude]).addTo(markers); 
```

在你的自动运行中，在 forEach 之前，

```
markers.clearLayers(); 
```

然后在你的 foreach 中，

```
var marker = L.marker([players.latitude, players.longitude]).addTo(markers); 
```

# html - 将一个 div 定位在另一个没有指定高度的 div 的底部

> ID：15291810
> 
> 赞同：0
> 
> 时间：2013-03-08T10:27:09.203
> 
> 标签：html

我有这个 HTML

```
<div style="position: relative;">

<div style="top:0">

</div>

<div style='position: absolute; bottom:0; margin-bottom:0px;'>

</div>

</div> 
```

这段代码在 IE 上工作得非常好，但在其他浏览器上，两个内部 div 重叠，我不能给外部 div 任何指定的高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:30:19.287

您不需要绝对定位：

```
<div style="position: relative;">

    <div style="background:black;">
        test
    </div>

    <div style='background:red;'>
        test    
    </div>

</div> 
```

见工作[小提琴](http://jsfiddle.net/soyuka/BzTLK/)。

# visual-studio - 在 VS2012 中切换“所有异常中断”的快速方法？

> ID：15291811
> 
> 赞同：25
> 
> 时间：2013-03-08T10:27:10.107
> 
> 标签：visual-studio, debugging, exception, visual-studio-2012, visual-studio-debugging

我经常发现在调试时打开**公共语言运行时异常非常有用： Visual Studio 的“调试”>“异常”屏幕中的*抛出***选项。我想要一种快速的方法，因为它始终是我正在切换的同一个复选框，并且该屏幕加载速度非常慢。在以前的版本中，可以使用[宏](https://stackoverflow.com/questions/958011/toggle-break-when-an-exception-is-thrown-using-macro-or-keyboard-shortcut)来执行此操作，但遗憾的是宏[已从 VS2012](http://social.msdn.microsoft.com/Forums/en-US/vsx/thread/d8410838-085b-4647-8c42-e31b669c9f11)中删除。有谁知道使用插件/扩展/键盘快捷键快速/简单的方法？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-05-10T09:26:32.170

[Exception Breaker](http://visualstudiogallery.msdn.microsoft.com/50091e25-9e75-40d3-9780-a05892f474de)是一个由[SO 用户](https://stackoverflow.com/users/39068)为此目的创建的 Visual Studio (2010, 2012, 2013) 插件。[它是在他在一个类似的问题](https://stackoverflow.com/q/15582736/468244)中担心这个问题之后创建的。

它目前通过工具栏命令按钮和快捷方式工作。

这个项目也有一个[github 存储库](https://github.com/ashmind/ExceptionBreaker)。

# php - 获取当前类别的父类别

> ID：15291813
> 
> 赞同：0
> 
> 时间：2013-03-08T10:27:13.097
> 
> 标签：php, magento, magento-1.7

我正在一个网站上工作，我的客户希望我显示当前类别的父类别。我知道如何显示当前产品的类别。

```
Mage::registry('current_category')->getName(); 
```

但我正在努力获得该类别的父类别。请帮助我解决这个问题。我是一个崭露头角的开发者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:38:16.943

要获取父类别 ID，您必须知道当前类别 ID，为此您需要编写

```
<?php
$_cat = new Mage_Catalog_Block_Navigation();
$curent_cat = $_cat->getCurrentCategory();
$curent_cat_id = $curent_cat->getId();?> 
```

现在您可以获得父类别 ID。编写下面给出的代码以获取 Id

```
<?php $parentId=Mage::getModel('catalog/category')->load($curent_cat_id)->getParentId();
echo $parentId; // $parentId will print your current category's parent Id
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:42:13.337

您可以简单地使用这个短代码来获取父类别：

```
$parentId = Mage::registry('current_category')->getParentId();
$parent = Mage::getModel('catalog/category')->load($parentId);
exit($parent->getName()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:36:17.050

请参阅[此](http://fishpig.co.uk/blog/display-categories-and-subcategories-in-magento.html)博客，其中包含满足您要求的必要信息

祝你好运:)

# delphi - 是否有可靠的方法在 Tprinter 画布上绘制位图？

> ID：15291814
> 
> 赞同：1
> 
> 时间：2013-03-08T10:27:16.080
> 
> 标签：delphi, delphi-2007

我创建了一个打印预览对象，它允许我将来自不同来源的多个图形对象组织到打印页面上。

为了在打印机画布上渲染这些对象，我必须首先将它们渲染为计算大小的位图，然后使用 canvas.draw(x,y,bitmap) 方法将位图渲染到 Tprinter 画布的正确位置。

我很早就发现需要一个与设备无关的位图，并将像素格式设置为 pf24bit。

在办公室 HP Laserjet 上试过，工作正常，HP 彩色 Deskjet 工作正常，Cannon 彩色打印机但不工作或偶尔在随机点出现断断续续的图形。

现在，如果我让图形对象直接渲染到打印机画布上，那么一切正常。

然而，由于各种原因，直接渲染到打印机画布对我来说不是一个可行的长期解决方案。

所以，我的问题是，Tprinter.canvas 是什么使它依赖于硬件并且有任何解决方法吗？

一些示例代码将页面划分为具有边距和单元格填充的 4 个象限，并在每个象限中放置一个图形对象。每个图形对象都有一个绘制图形的 RenderToBitmap 方法。

```
procedure TMultiPrintForm.PrintBtnClick(Sender: TObject);
var w,h,h2,w2,mv,iw,ih,pv,cw,ch:integer; Abmp:Tbitmap;
begin
  Abmp:=Tbitmap.create;
  Abmp.PixelFormat := pf24bit;
  try
    with Printer do
    begin
      w:=pagewidth;   
      h:=pageheight; 
      h2:=h div 2; 
      w2:=w div 2;
      mv:=h*margin.value div 200;    //margin percentage div 2 
      pv:=h*padding.value div 400;   //padding percentage div 4
      iw:=w-mv;                      //internal width
      ih:=h-mv;                      //internal height
      cw:=(iw-mv) div 2-pv;          //Quadrant Cell Width
      ch:=(ih-mv) div 2-pv;          //Quadrant Cell Height
      Abmp.width:=cw;
      Abmp.height:=ch;
      If Fsources[0]<>nil then
      begin
        Fsources[0].rendertoBitmap(Abmp);
        canvas.draw(mv,mv,Abmp);
      end;
      If Fsources[1]<>nil then
      begin
        Fsources[1].rendertoBitmap(Abmp);
        canvas.draw(w2+pv,mv,Abmp);
      end;
      If Fsources[2]<>nil then
      begin
        Fsources[2].rendertoBitmap(Abmp);
        canvas.draw(mv,h2+pv,Abmp);
      end;
      If Fsources[3]<>nil then
      begin
        Fsources[3].rendertoBitmap(Abmp);
        canvas.draw(w2+pv,h2+pv,Abmp);
      end;
    end;
  finally
    printer.Enddoc;
    Abmp.free;
  end
end; 
```

在网上的进一步调查中，我在 PrintBitmap 程序中积累了一些建议，该程序使用了 Microsoft 推荐的技术。

我用 PrintBitmap 调用替换了所有 Canvas.draw 调用（它假设 begindoc 和 enddoc 设置在调用之外）。

由于是周末，我无法在办公室有问题的打印机上对其进行测试，但它至少不会破坏家用 HP Deskjet 打印机的打印（无论如何都适用于这两种方法）。

```
procedure PrintBitmap(X,Y:integer; Abmp:Tbitmap);
var Info: PBitmapInfo;
  InfoSize,ImageSize: DWORD;  Image: Pointer;
  DIBWidth, DIBHeight: LongInt;
begin
  with Printer do
  begin
    GetDIBSizes(Abmp.Handle, InfoSize, ImageSize);
    Info  := AllocMem(InfoSize);
    Image := AllocMem(ImageSize);
    try
      GetDIB(Abmp.Handle, 0, Info^, Image^);
      with Info^.bmiHeader do
      begin
        DIBWidth := biWidth;
        DIBHeight := biHeight;
      end;
      StretchDIBits(Canvas.Handle, X, Y, DIBWidth, DIBHeight, 0, 0,
      DIBWidth, DIBHeight, Image, Info^, DIB_RGB_COLORS, SRCCOPY);
    finally
      FreeMem(Image, ImageSize);
      FreeMem(Info, InfoSize);
    end
  end;
end; 
```

# php - 在mysql查询中循环拆分字符串

> ID：15291816
> 
> 赞同：-1
> 
> 时间：2013-03-08T10:27:20.277
> 
> 标签：php, mysql

在这样的表中有一个字符串（$string）和一个列（DOMAIN）：

```
$string="'domain3','domain2,'domain1'";
-----------------
|     DOMAIN    |
|---------------|
|     domain1   |
|     domain2   |
|domain1,domain2|
----------------- 
```

如果域包含在字符串中，我正在尝试创建一个返回结果的 sql 查询。我发现我必须拆分列中的条目，所以我有这样的东西：

```
SELECT * FROM TABLE1 WHERE SUBSTRING_INDEX(DOMAIN, ',', 1) IN ('$string') 
```

但这只有在第一个索引匹配时才给我一个结果，我想做一种循环。我不知道我的问题是否足够清楚，但为了解释上下文，我正在尝试使用复选框过滤结果。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:36:34.650

你得到的结果是正确的。您只能从第一个索引中提取子字符串。您正在寻找 mysql 中的爆炸功能。

您可以阅读此页面上的评论，了解字符串拆分问题的大量解决方案：http: [//dev.mysql.com/doc/refman/5.0/en/string-functions.html](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html)。

# wordpress - 带有设置 api wordpress 的子页面

> ID：15291818
> 
> 赞同：0
> 
> 时间：2013-03-08T10:27:25.733
> 
> 标签：wordpress, api, settings

我目前正在尝试了解设置 api，说实话，这有点困难。

我遇到的问题是，当我在子页面上提交表单时，它只是转到 options.php 页面？

到目前为止，这是我的代码

```
function setup_theme_admin_menus() {  

add_menu_page('Theme settings', 'SMate Options', 'manage_options',   
    'theme_settings', 'theme_settings_page');  

add_submenu_page('theme_settings',   
    'Front Page Elements', 'Front Page', 'manage_options',   
    'theme_settings_fp', 'theme_front_page_settings'); 

    add_submenu_page(
    'theme_settings',   
    'Team Option', 
    'Team Option', 
    'manage_options',   
    'theme_team_options', 
    'theme_team_settings_fn'
    );  
}

add_action('admin_init', 'initialize_theme_options'); 

function initialize_theme_options(){

register_setting('team_details', 'team_details' );

add_settings_section( 
    'member1',         
    'MEMBER 1',                  
    'theme_settings_fn', 
    'theme_team_options'
); 

add_settings_field(   
    't1',                  
    'Name',                 
    'text_fn',                       
    'theme_settings_team',
    'member1'
); 
add_settings_field(   
    'jt1',        
    'Job',      
    'text_fn',    
    'theme_settings_team', 
    'member1' 
);  
add_settings_field(   
    'lt1',
    'Description',  
    'longtext_fn',  
    'theme_settings_team',
    'member1' 
);
}

add_action('admin_init', 'initialize_theme_options');

function theme_team_settings_fn() { 

?>  

    <div class="wrap">  

        <div id="icon-themes" class="icon32"></div>  
        <h2>Sandbox Theme Options</h2>  

        <?php print_r('team_details');
         settings_errors(); ?>

        <form method="post" action="options.php">  
            <?php do_settings_sections('theme_team_options'); ?> 
            <?php submit_button(); ?>  
        </form>  

    </div><!-- /.wrap -->  
<?php  

} 
```

任何帮助将不胜感激，因为我似乎已经碰壁了，所有教程似乎都使用 add_theme_page

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:28:10.370

对于初学者来说，你`register_settings('option_group','option_name);`不应该是我会做的同名`team_details_group`，也许`team_details_options`，等等。

然后`settings_fields('team_details_group')`在表格内执行

`<form method=post action=options.php>`

紧随其后的是`$options = get_option('team_details_options')`

然后使用`team_details_options`to 在输入字段名称属性内保存任何数据，即：

`<input type="text" name="team_details_options[memberName]" />`

让我知道这是否有帮助或您需要更多信息。

# events - GWTP：事件和嵌套演示者

> ID：15291820
> 
> 赞同：0
> 
> 时间：2013-03-08T10:27:30.617
> 
> 标签：events, nested, gwtp, presenter

我对 GWTP 中的事件有一些问题。

我有一个扩展 TabContainerPresenter 的 MainPresenter。此演示者链接到包含一些 ui 组件 + 一些 com.gwtplatform.mvp.client.Tab 的 MainView：HomeTab、ContactTab 等。

MainPresenter 应该对某些事件“MyEvent”做出反应 MyEvent 具有相应的 MyHandler 并且是按照这些良好做法创建的[http://arcbees.wordpress.com/2010/08/24/gwt-platform-event-best-practice/](http://arcbees.wordpress.com/2010/08/24/gwt-platform-event-best-practice/)

当我像这样从 MainView 的 ui 组件触发事件时：

```
MyEvent.fire(this, new MyEventContext(..)); 
```

我在 MainPresenter 中正确捕获了该事件。

但是当我在“Tab Presenter”之一中执行完全相同的操作时，MainPresenter 不会捕获该事件。

例如，在作为 MainPresenter 的“HomeTab”的 HomePresenter 中，当我这样做时

```
MyEvent.fire(this, new MyEventContext(..)); 
```

我可以从 HomePresenter 中捕获事件，但不能从 MainPresenter 中捕获。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:17:00.127

确保您遵守这些规则：

1.  您在 View 中注入的 EventBus 是`com.google.web.bindery.event.shared.EventBus`（而不是`com.google.gwt.event.shared.EventBus`）
2.  在处理事件的 Presenter（HomePresenter 或 MainPresenter）中，使用生命周期方法中的方法注册到`addRegisteredHandler`事件`onBind`：

    ```
    @Override
    protected void onBind() {
        super.onBind();

        addRegisteredHandler(MyEvent.getType(), this);
    } 
    ```

我不知道你犯了什么特别的错误。为了帮助你，我做[了一个快速的概念证明，](https://github.com/spg/GWTP-Samples/tree/spg_event_tabbed_presenters)它表明事件可以从选项卡式演示者发送到 TabContainerPresenter。克隆这个项目，然后前往#!settingsPage。您将看到两个“Fire true”和“Fire false”按钮，它们将触发将被 ApplicationPresenter 捕获的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:23:47.710

首先，让我感谢您提供了这个很棒的 POC，它是了解问题所在的绝佳基础。我看到我实际上并没有以好的方式使用 GWTP。

根本问题是我有 2 个不同的 eventBus 我通过尝试看到它

```
Log.info("eventBus: "+eventBus) 
```

在 MainPresenter 和 HomePresenter 中。日志显示它们没有相同的哈希码。

这是因为有时我通过以下方式直接访问 EventBus：

```
EventBus.Util.getInstance(); 
```

而 placeManager 实例化为：

```
DelayedBindRegistry.bind(GWT.create(MyInjector.class)) 
```

# ruby-on-rails - 如何从 Rails 中的视图模板进行控制器函数调用？

> ID：15291823
> 
> 赞同：0
> 
> 时间：2013-03-08T10:27:43.493
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我是 Rails 新手，在 product_controller.rb 中有一个功能

```
def detach
  @product.photo = nil
  @product.save
end 
```

现在我想从视图文件 show.html.erb 中调用此方法，以便执行该方法。怎么做 ？我可以看到通过 .find(params[id]) 调用了 7 种方法，但这对我来说也不清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:41:09.717

您需要添加一条路线，如下所示`routes.rb`：

```
resources :products do
  member do
    get 'detach' # /products/:id/detach
  end
end 
```

这将为您提供`detach_product_path(@product)`可以在您的视图中使用的内容。您可能还需要在 detach 方法中进行重定向：

```
def detach
  @product = Product.find(params[:id])
  @product.photo = nil

  if @product.save
    redirect_to @product, notice: 'Photo was detached!'
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T11:24:04.160

尝试更改如下

```
<%= link_to 'detach_image', product_detach_path(@product) %> 
```

我建议您查看 guides.rubyonrails.org/routing.html。

你可以这样做，

你可以使用匹配

```
match '/update_profile', :to => 'users#update_profile' 
```

或者

```
resources :users do
  get 'update_profile', on: :member
end 
```

然后你肯定会在你的用户控制器中有方法

```
def update_profile
  @user = User.find(params[:id])

  if @user.save
    redirect_to @user, notice: 'user updated successfully!'
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T11:43:34.587

我已经修复了西蒙的答案。但是，您仍然面临问题，因为您没有通过路径传递产品：

```
<%= link_to 'detach_image', detach_product_path %> 
```

您需要将产品传递给操作：

```
<%= link_to 'detach_image', detach_product_path(@product) %> 
```

否则，`Product.find(params[:id])`将找不到任何产品，并且`@product`将变为空...

**编辑**以回答您的问题：

1 -是控制器`product_detach_path`中动作的助手。还有，它做同样的事情，但还包括当前主机、端口和路径前缀。更多细节[在这里](http://guides.rubyonrails.org/routing.html#paths-and-url)。 但是，它没有传递任何参数，因此找不到产品。因此，您必须指定要查找的产品。在操作中定义，因此它在您的视图中可用，但您可以为.... 发送任何其他产品。也许是第一个：`detach``product``product_detach_url`
`Product.find(params[:id])``@product``show``detach action``product_detach_path(Product.first)`

2 -`resources :products`生成[七个默认路由：](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)索引、新建、创建、显示、编辑、更新和销毁。
为了向它添加更多路线，您可以使用`member`或`collection`。基本上，`member`将向产品添加路由（products/1/detach），同时`collection`向控制器添加路由，如索引（products/detach）。更多信息[在这里](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)。

我希望它有帮助...

# java - 设计模式：多个swing接口监听线程变量

> ID：15291829
> 
> 赞同：1
> 
> 时间：2013-03-08T10:28:01.473
> 
> 标签：java, multithreading, swing, design-patterns, synchronization

我对采用哪种设计模式来获得以下内容有一个很大的疑问：

我有一个不能是静态的 A 类，它有一个更新变量 a1 的正在运行的线程；

多个摇摆类别（B、C、D）必须用变量 A.a1 的当前值更新 JLabel b1、c1、d1。

因为 A 不能是静态的 B、C、D 不能像 b1.setText(A.getInstance().getA1());

同样每次创建 A 的新实例也没有意义，因为 A 具有特定的角色并且不能每次都创建。

因为 A 有一个更新 a1 变量的线程，所以我认为 A、B、C、D 之间共享此变量以进行读写也存在同步问题。

我想到了观察者模式，但它仍然要求每个 B、C、D 都向 A 注册，它并没有解决同步问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:31:55.913

如果你想将 A 与 B、C 和 D 的存在解耦，那么你需要创建一个[代理](http://en.wikipedia.org/wiki/Proxy_pattern)对象来充当中间人。该对象将知道如何到达 A 的实例，并在它不可用时做出临时响应。

为了减少同步问题，我建议使用一个消息队列来保存`a1`值的连续更改。代理将轮询此队列并相应地更新 swing 类。事实上，代理可以`Observer`为此目的实现该模式。在 A 上工作的线程必须将更新发布到消息队列。通过将其转换为一对一的生产者消费者设置，您可以通过使用适当的队列（如[`ConcurrentLinkedQueue`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html).

`Proxy`甚至不必为队列中的每个值运行摆动组件的更新，而只需更新最新的（丢弃所有中间值）。

更新：[SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)类似乎是一个很好的候选者。

# asp.net-mvc-3 - 带有for循环的分页获取起始页问题

> ID：15291832
> 
> 赞同：0
> 
> 时间：2013-03-08T10:28:11.130
> 
> 标签：asp.net-mvc-3, pagination, extension-methods

我有一个分页的扩展方法。目录中有 23 个条目，所以 3 页，

简而言之，我的控制器：

```
public ActionResult Index(int? page)
{
  List<ScormModuleInfo> modules = new List<ScormModuleInfo>();

  string[] dirs = Directory.GetDirectories(scormRootDir);

  int totalResults = dirs.Count();
  int pageSize = PageSizeSettings.ScormPackages;
  int totalPages = Math.Max(Convert.ToInt32(Math.Ceiling((double)totalResults / pageSize)), 1);
  if (page >= 1)
  {
    int startresult = ((Math.Max(1, **page**) - 1) * pageSize) + 1;
    int endresult = Math.Min(startresult + (pageSize - 1), totalResults);
    for (int i = startresult; i <= endresult; i++) 
    {
       //more code
    }
  } 
```

在视图中：

```
 <div class="actions-left">
   <%= Html.GlobalisedPageLinks(Amico.Web.Mvc.Extensions.Enums.PageLinksFormat.Empty, Model.CurrentPage, Model.PageSize, Model.Total, x => Url.Action("Index", "Scorm", new { area = "Admin", page = x }))%>
 </div> 
```

扩展方法：

```
public static string GlobalisedPageLinks(this HtmlHelper html, Amico.Web.Mvc.Extensions.Enums.PageLinksFormat format, int currentPage, int pageSize, int totalResults, Func<int, string> pageUrl)
{
  int totalPages = Math.Max(Convert.ToInt32(Math.Ceiling((double)totalResults / pageSize)), 1);

  int startresult = ((Math.Max(1, currentPage) - 1) * pageSize) + 1;
  int endresult = Math.Min(startresult + (pageSize - 1), totalResults);

  string pagesText = html.Resource(Resources.Global.PageLinks.PageLinksFormatPages, currentPage, totalPages);
  string resultsText = html.Resource(Resources.Global.PageLinks.PageLinksFormatResults, startresult, endresult, totalResults);
  string firstText = html.Resource(Resources.Global.PageLinks.First);
  string previousText = html.Resource(Resources.Global.PageLinks.Previous);
  string nextText = html.Resource(Resources.Global.PageLinks.Next);
  string lastText = html.Resource(Resources.Global.PageLinks.Last);

  return "<span class='page-links'>" + html.PageLinks(format, currentPage, pageSize, totalResults, pageUrl,
    pagesText, resultsText, firstText, previousText, nextText, lastText) + "</span>";
 } 
```

我在 Math.Max(1, page) 上得到一条红线，用于 startresult 说明：最佳重载方法是 (decimal,decimal) 我有一些无效参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:31:11.330

试试这样：

```
Math.Max(1, page ?? 1) 
```

这样做的原因是因为该`Max`方法需要一个整数作为第二个参数，但您传递给它一个可为空的整数（您的`page`参数被声明为`int? page`）。通过使用空合并运算符 ( `??`)，如果此参数为空，则表示默认值。

# asp.net-mvc-4 - 路线不匹配

> ID：15291833
> 
> 赞同：0
> 
> 时间：2013-03-08T10:28:14.237
> 
> 标签：asp.net-mvc-4

## 应用程序

如果指定了 CoId，我有一个包含给定公司的客户列表的视图，否则，所有注册的客户都会出现在列表中。HanlderId 只代表谁在处理客户端。该列表是分页的（因此是 page 参数）和排序，因此在下面的代码中是 sortField 和 sortDir。一切正常，除了路线。所以...

## 设置

我有一个带有以下路线的区域注册文件：

```
context.MapRoute(
                "Companies_Clients",
                "Companies/Clients/Page/{page}/{sortField}/{sortDir}/{HandlerId}/{CoId}",
                new
                {
                    controller = "MyController",
                    action = "Index", 
                    CoId = -1,
                    HandlerId = -1, 
                    page = 1, 
                    sortField = "ClaimId",
                    sortDir = "ASC", 
                    AccidentDate = UrlParameter.Optional,
                    DateOfBirth = UrlParameter.Optional,
                    ClientSurname = UrlParameter.Optional,
                    InvoiceNumber = UrlParameter.Optional
                }
            ); 
```

默认为 UrlParameter.Optional 的参数是搜索参数（列表也可以搜索）。

我在 MyController 中有一个动作定义如下：

```
public virtual ActionResult Index(
    Nullable<int> FeId = -1, 
    Nullable<DateTime> AccidentDate = null, 
    Nullable<DateTime> DateOfBirth = null,
    string ClientSurname = null,
    Nullable<int> InvoiceNumber = null, 
    int page = 1, string sortField = "ClaimId", string sortDir = "DESC", int SolicitorId = -1)
{
    var model = service.BuildModel(FeId, AccidentDate, DateOfBirth, ClientSurname, InvoiceNumber, page, sortField, sortDir, SolId);
    return View("Index", model);
} 
```

我希望对 Index 的所有调用都与我的“Companies_Clients”路由匹配。

## 问题

@Html.ActionLink 帮助程序调用（参见下一个代码块）生成的 url 与“Companies_Clients”路由不匹配。

```
//This creates a link with a url that matches the default route (the usual one)
@Html.ActionLink("Sort by Client Name", MVC.MyArea.MyController.Index(feId, accidentDate, dateOfBirth, clientSurname, invoiceNumber, currentPage, "ClientSurname", "DESC")) 
```

与路线匹配的是我的 mvcSiteMap 节点：

```
<mvcSiteMapNode title="Clients" area="Companies" controller="MyController" action="Index" key="clients"> 
```

即这个mvcsitemap节点生成的路由是：

```
/Companies/Clients/Page 
```

## 问题

琐碎的问题是：

**我究竟做错了什么？？为什么 Html.ActionLink 调用不匹配路由？**

另一个问题是：

为什么mvcsitemapnode生成的路由中没有出现默认参数？

# xml - 为什么我会收到此错误“xml 中元素目录的内容无效”？

> ID：15291836
> 
> 赞同：0
> 
> 时间：2013-03-08T10:28:21.490
> 
> 标签：xml, xsd, xls

说明资源路径位置类型 cvc-complex-type.2.4.a：发现以元素“ **os:catalog** ”开头的无效内容。需要 '{" [http://www.example.org/objectshop](http://www.example.org/objectshop) ":CatalogType}' 之一。objectshop.xml /HelloWorld/WebContent 第 6 行 XML 问题

XSD 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema"
 targetNamespace="http://www.example.org/objectshop"
 elementFormDefault="qualified"
 xmlns:os="http://www.example.org/objectshop">

    <complexType name="ProductType">
        <sequence>
            <element name="productId" type="string"></element>
            <element name="name" type="string"></element>
            <element name="description" type="string"></element>
            <element name="price" type="double"></element>
            <element name="campaignPrice" type="double"></element>
            <element name="icon" type="string"></element>
        </sequence>
    </complexType>

    <complexType name="CustomerType">
        <sequence>
            <element name="userId" type="string"></element>
            <element name="name" type="string"></element>
            <element name="address" type="string"></element>
            <element name="phone" type="string"></element>
            <element name="email" type="string"></element>
        </sequence>
    </complexType>

    <complexType name="CatalogType">
        <sequence>
            <element name="ProductType" type="os:ProductType"
                minOccurs="0" maxOccurs="unbounded">
            </element>
        </sequence>
    </complexType>

    <complexType name="MembersType">
        <sequence>
            <element name="customer" type="os:CustomerType" minOccurs="0" maxOccurs="unbounded"></element>
        </sequence>
    </complexType>

    <element name="objectshop" type="os:ObjectShopType"></element>

    <complexType name="ObjectShopType">
        <sequence>
            <element name="CatalogType" type="os:CatalogType"></element>
            <element name="MembersType" type="os:MembersType"></element>
        </sequence>
    </complexType>
</schema> 
```

XML 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="objectshop.xsl" ?>
<os:objectshop xmlns:os="http://www.example.org/objectshop"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://www.example.org/objectshop objectshop.xsd ">
  <os:catalog>
    <os:product>
        <os:productId>1</os:productId>
        <os:name>Achtung Baby - U2</os:name>
        <os:description>Audio CD</os:description>
        <os:price>21.0</os:price>
        <os:campaignPrice>19.0</os:campaignPrice>
        <os:icon>images/u2AchtungBaby.jpg</os:icon>
    </os:product>
    <os:product>
        <os:productId>2</os:productId>
        <os:name>Achtung Baby - U2</os:name>
        <os:description>Audio CD</os:description>
        <os:price>21.0</os:price>
        <os:campaignPrice>19.0</os:campaignPrice>
        <os:icon>images/u2AchtungBaby.jpg</os:icon>
    </os:product>
    <os:product>
        <os:productId>2</os:productId>
        <os:name>Achtung Baby - U2</os:name>
        <os:description>Audio CD</os:description>
        <os:price>21.0</os:price>
        <os:campaignPrice>19.0</os:campaignPrice>
        <os:icon>images/u2AchtungBaby.jpg</os:icon>
    </os:product>
    <os:product>
        <os:productId>4</os:productId>
        <os:name>Achtung Baby - U2</os:name>
        <os:description>Audio CD</os:description>
        <os:price>21.0</os:price>
        <os:campaignPrice>19.0</os:campaignPrice>
        <os:icon>images/u2AchtungBaby.jpg</os:icon>
    </os:product>
  </os:catalog>
  <os:membership>
    <os:customer>
        <os:userId>eteration</os:userId>
        <os:name>Esma Meral</os:name>
        <os:address>ITU andesea</os:address>
        <os:phone>+90 123 456 789</os:phone>
        <os:email>a@b.com</os:email>
    </os:customer>
  </os:membership>
</os:objectshop> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:49:15.033

您的 XSD 文件需要一个 XML 文件，其格式如下

```
<os:objectshop>
  <os:CatalogType>
    ...
  </os:CatalogType>
  <os:MembersType>
    ...
  </os:MembersType>
</os:objectshop> 
```

例如定义在

```
 <complexType name="ObjectShopType">
  <sequence>
    <element name="CatalogType" type="os:CatalogType"></element>
    <element name="MembersType" type="os:MembersType"></element>
  </sequence>
</complexType> 
```

我建议更新您的架构以替换

```
<complexType name="CatalogType">
    <sequence>
      <element name="ProductType" type="os:ProductType" minOccurs="0" maxOccurs="unbounded"/>
    </sequence>
  </complexType>
  <complexType name="ObjectShopType">
    <sequence>
      <element name="CatalogType" type="os:CatalogType"/>
      <element name="MembersType" type="os:MembersType"/>
    </sequence>
  </complexType> 
```

和

```
<complexType name="CatalogType">
    <sequence>
      <element name="product" type="os:ProductType" minOccurs="0" maxOccurs="unbounded"/>
    </sequence>
  </complexType>
  <complexType name="ObjectShopType">
    <sequence>
      <element name="catalog" type="os:CatalogType"/>
      <element name="membership" type="os:MembersType"/>
    </sequence>
  </complexType> 
```

# asp.net - ASP.Net 应用程序中的运行时错误

> ID：15291842
> 
> 赞同：2
> 
> 时间：2013-03-08T10:28:34.197
> 
> 标签：asp.net

我正在使用使用 asp 创建的 asp.net 页面修改网站。在我正在使用的 web.config 文件中

```
<system.web>
    <compilation debug="true" strict="false" explicit="true" tarrgetFramework="4.0"/>
    <httpRuntime requestValidationMode="2.0" maxRequestLength="1048576" executionTimeout="3600" />
    <customErrors mode="Off"/>
</system.web> 
```

也试过

```
 <customErrors mode="RemoteOnly" defaultRedirect="error.htm"/> 
```

但仍然发生错误

**运行时错误**

说明：服务器上发生应用程序错误。此应用程序的当前自定义错误设置可防止远程查看应用程序错误的详细信息（出于安全原因）。但是，它可以被本地服务器机器上运行的浏览器查看。

详细信息：要在远程计算机上查看此特定错误消息的详细信息，请在位于当前 Web 应用程序根目录的“web.config”配置文件中创建一个标签。然后，此标记应将其“模式”属性设置为“关闭”。

```
<!-- Web.Config Configuration File -->

<configuration>
<system.web>
    <customErrors mode="Off"/>
</system.web>
</configuration> 
```

注意：您看到的当前错误页面可以通过修改应用程序配置标记的“defaultRedirect”属性以指向自定义错误页面 URL 来替换为自定义错误页面。

```
<!-- Web.Config Configuration File -->

<configuration>
<system.web>
    <customErrors mode="RemoteOnly" defaultRedirect="mycustompage.htm"/>
</system.web>
</configuration> 
```

它的解决方法是什么？？

# jquery - 在一页上使用多个 slideToggle

> ID：15291844
> 
> 赞同：0
> 
> 时间：2013-03-08T10:28:43.290
> 
> 标签：jquery, jquery-ui, slidetoggle

我使用 slideToggle 创建了一个“下拉菜单”以在单击链接时显示内容。

单击“查看开放时间”时，会显示一个显示时间的 div。

问题是，在我的页面上有多个不同的位置具有不同的开放时间。因此，通过使用一个功能，单击链接会打开所有隐藏的 div。如何仅将一个链接链接到它的相关 div？

[JSFiddle](http://jsfiddle.net/ubPve/1/)

HTML：

```
 <div class="timeList">
    <a>See opening times</a>
    <p class="openingTimes" style="display: none;">
    <strong>Mon-Fri</strong>: 7am - 5.30pm<br />
    <strong>Sat</strong>:<br />
    <span class="seasonTimes"><em>Summer</em>: 7.30am - 5.30pm<br />
    </span>
    <span class="seasonTimes"><em>Winter</em>: 8am - 5pm<br />
    </span>
    <span class="seasonTimes"><em>November - March</em>: 8am - 1pm<br />
    </span>
    <strong>Sun</strong>: Closed
    </p>
    </div>
<br /><br />
 <div class="timeList">
    <a>See opening times</a>
    <p class="openingTimes" style="display: none;">
    <strong>Mon-Fri</strong>: 8am - 5.30pm<br />
    <strong>Sat</strong>:<br />
    <span class="seasonTimes"><em>Summer</em>: 90.30am - 5.30pm<br />
    </span>
    <span class="seasonTimes"><em>Winter</em>: 10am - 5pm<br />
    </span>
    <strong>Sun</strong>: 10am - 5.30pm
    </p>
    </div> 
```

jQuery：

```
$(".timeList a").click(function () {
  $(".openingTimes").slideToggle("slow");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:31:01.207

`<p class="openingTimes">`您要切换的元素`<a>`是处理`click`事件的下一个兄弟元素，因此您可以使用一些简单的 DOM 遍历来获取对下一个元素的引用：

```
$('.timeList a').click(function(e) {
    $(this).next().slideToggle('slow');
}); 
```

函数内部`this`是锚点的实际 DOM 元素，`$(this)`创建一个包含该元素的 jQuery 对象，`.next()`获取 DOM 中紧随其后的元素，然后显然`.slideToggle('slow')`进行实际切换。

如果它也匹配选择器，您可以选择将选择器传递`.next()`给仅选择下一个元素。如果您在每个`<div class="timeList">`元素中有多个锚点，那么您可能需要考虑使用：

```
$(this).next('.openingTimes').slideToggle('slow'); 
```

反而。尽管使用您显示的 HTML，但这不是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:30:53.787

您的代码的问题是..您选择了所有带有类的div`openingtimes`并使用slideToggle..因为bthe浏览器通过调用找到了两个 `openingtimes`..它滑动了两个div...

您可以使用`$(this)`引用来获取单击的元素并找到该`openingTimes`块的 div 并滑动它

试试这个

```
$(this).parent().find(".openingTimes").slideToggle("slow"); 
```

或者

```
$(this).next().slideToggle("slow"); 
```

[在这里工作小提琴](http://jsfiddle.net/bipen/ubPve/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:33:11.327

试试下面给出的代码

```
$(".timeList a").click(function () {
    $(this).parent('.timeList').children(".openingTimes").slideToggle("slow");
}); 
```

# java - JTable 拆分单元格。如何

> ID：15291845
> 
> 赞同：1
> 
> 时间：2013-03-08T10:28:46.377
> 
> 标签：java, swing, jtable

我是 Swing 新手，我想创建一个具有这种形式的表格：

![在此处输入图像描述](../Images/c850d9c77263288b06c1877220907c70.png)

那么如何拆分表格显示的单元格？您有任何有用的链接或教程或想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T17:01:42.357

在我看来，这就像一张保龄球记分卡。基于该假设，列数是固定的，条目数趋向于 6 或更少。由于您可能不需要滚动，因此我建议使用固定的组件网格而不是 JTable。

这可以使用 GridBagLayout 轻松实现。对于名称，我将使用 JTextArea。对于每帧的 2 个评分单元，我将使用 JTextFields。对于保存框架分数的底部 2-column-span 组件，我可能会使用 JLabel。

将所有这些放在 JPanel 上，并为每个投球手重新创建面板。

**编辑：** 这是一个快速模型，只是为了展示这个概念。不一定在视觉上很漂亮，但我将把它作为练习留给读者：

```
import java.awt.*;
import java.awt.event.*;

import javax.swing.*;

public class BowlingScoreCard implements Runnable
{
  public static void main(String[] args)
  {
    SwingUtilities.invokeLater(new BowlingScoreCard());
  }

  public void run()
  {
    JFrame frame = new JFrame("Demo");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().add(createScorecard(4), BorderLayout.CENTER);
    frame.pack();
    frame.setVisible(true);
  }

  private JPanel createScorecard(int numPlayers)
  {
    JPanel p = new JPanel(new GridBagLayout());

    p.add(new JLabel("Player"), gbc(0, 0, 1, 1));
    for (int x = 1; x <= 10; x++)
    {
      p.add(new JLabel(Integer.toString(x)), gbc(x, 0, 1, 1));
    }

    for (int y = 1; y <= numPlayers; y++)
    {
      JTextArea textArea = new JTextArea(2, 10);
      p.add(textArea, gbc(0, y, 1, 1));

      for (int i = 1; i <= 9; i++)
      {
        p.add(createFrame(2), gbc(i, y, 1, 1));
      }

      p.add(createFrame(3), gbc(10, y, 1, 1));
    }

    return p;
  }

  private JPanel createFrame(int entries)
  {
    JLabel label = new JLabel(" ");
    label.setBackground(Color.GRAY);

    JPanel p = new JPanel(new GridBagLayout());
    p.setBorder(BorderFactory.createLineBorder(Color.GRAY, 1));
    for (int i = 0; i < entries; i++)
    {
      p.add(new JTextField(3), gbc(i, 0, 1, 1));
    }
    p.add(label, gbc(0, 1, 2, 1));
    return p;
  }

  private GridBagConstraints gbc(int x, int y, int colspan, int rowspan)
  {
    GridBagConstraints gbc = new GridBagConstraints();
    gbc.gridx = x;
    gbc.gridy = y;
    gbc.gridwidth = colspan;
    gbc.gridheight = rowspan;
    gbc.weightx = 0;
    gbc.weighty = 0;
    gbc.anchor = GridBagConstraints.CENTER;
    gbc.fill = GridBagConstraints.NONE;
    return gbc;
  }
} 
```

# javascript - Twitter Bootstrap 轮播和轮播问题

> ID：15291848
> 
> 赞同：-8
> 
> 时间：2013-03-08T10:29:04.643
> 
> 标签：javascript, jquery, twitter-bootstrap, effects

请帮帮我。控制问题，他没有工作=（在网站non-toxic.com.ua上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:53:42.130

您没有正确设置 data-target 属性。.carousel-indicators 的数据目标设置为#myCarousel，但 Carousel div 的 id 是 jumbotron。

> `<ol class="carousel-indicators"> <li data-target="#jumbotron" data-slide-to="0" class=""></li> <li data-target="#jumbotron" data-slide-to="1" class=""></li> <li data-target="#jumbotron" data-slide-to="2" class=""></li> <li data-target="#jumbotron" data-slide-to="3" class=""></li> </ol>`

轮播导航也存在同样的问题。您也应该将 href attr 设置为 '#jumbotron'。

# knockout.js - 如何将 Durandal#composition 集成到淘汰赛模板引擎中

> ID：15291849
> 
> 赞同：0
> 
> 时间：2013-03-08T10:29:05.330
> 
> 标签：knockout.js, kendo-ui, durandal

我使用允许模板用于渲染行的 kendo ui 网格。它使用 KO 模板引擎，希望模板在标签中，但是我想将模板外部化并使用 Durandal Compose 插件......知道如何轻松挂钩吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:03:40.560

问题是从外部加载模板异步/。这是通过 durandal 的普通视图的 compose 绑定来完成的。剑道模板不支持这个。我现在的解决方案是通过组合绑定加载模板并让剑道网格使用它。事实上，我正在使用剑道淘汰赛，它支持剑道网格中的淘汰赛模板。所以我不必在 html 中编写 javascript (rowTemplate: kendo.template($("#rowTemplate").html()))。

唯一的问题是，如果我通过另一个模板加载网格，则行绑定的组合不能在同一个模板内。它应该像

```
<html>
  <div data-bind="compose:{view:rowTemplateFromServer}"></div>
  <div data-bind="compose:{view:templateWithKendoGridBindinh}"></div>
</html> 
```

这不利于维护或我的下一代开发人员......我认为我必须扩展淘汰赛剑道才能使用 durandal 组合绑定。（knockoutkendo 确实支持外部模板，但它不能在 durandal 或 jquery 9 下工作）

* * *

固定的：

我已经修改了 KoExternalTemplate 库中的 ExternalTemplateSource.js 以使用 Durandal 的 viewLocator 而不是使用注入器，现在我可以很好地使用剑道网格而没有任何问题（如上所述）。ExternalTemplateSource.js 中的 getTemplate 函数现在如下所示：

```
getTemplate: function () {
  var self = this;
  viewLocater.locateView(self.templateId).then(function (element) {
    self.data("precompiled", null);
    var t = $(element).html();
    //system.log("got template: "+t );
    self.template(t);
    self.loaded = true;
  });
} 
```

# vba - 如何在图像之间添加段落？

> ID：15291850
> 
> 赞同：0
> 
> 时间：2013-03-08T10:29:09.447
> 
> 标签：vba, import, openfiledialog

我一直在向 Word 中的 customUi 菜单添加一系列按钮。其中一个按钮从服务器上的库文件夹中导入一个或多个图像，但是当将它们添加到页面时，我无法让它在每个图像之间放置一个段落返回。

```
With fd
    .InitialFileName = strFolder & "\*.png; *.jpg; *.gif"
    .ButtonName = "Insert"
    .AllowMultiSelect = True  ' Make multiple selection
    .Title = "Choose one or more pictures from the library"
    .InitialView = msoFileDialogViewPreview

'Sets the initial file filter to number 2.
'    .FilterIndex = 2

'Use the Show method to display the File Picker dialog box and return the user's action.
'If the user presses the action button...
If .Show = -1 Then
'Step through each string in the FileDialogSelectedItems collection.
    For Each vrtSelectedItem In .SelectedItems
'vrtSelectedItem is a String that contains the path of each selected item.
    Selection.InlineShapes.AddPicture FileName:= _
                  vrtSelectedItem _
                , LinkToFile:=False, SaveWithDocument:=True

    Next vrtSelectedItem 
```

我尝试在不同的地方添加段落行 [Selection.TypeParagraph]，但它只是在所有图像之后添加返回。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:38:00.777

您是否尝试使用：

```
Selection.InsertParagraphAfter
Selection.Move 
```

这可能是您正在寻找的东西？`Next`在语句之前添加行。

# asp.net-mvc - 动态构建 Kendo UI 网格

> ID：15291852
> 
> 赞同：1
> 
> 时间：2013-03-08T10:29:19.410
> 
> 标签：asp.net-mvc, kendo-grid

我在从数组 columnName 制作我的剑道网格标题时遇到了挑战，如下面的代码所示。columnName 是我想用作列/字段名称的数组。

```
@(Html.Kendo()
    .Grid<rtxVending.Web.Models.ProductDetails>()
    .Name("ProductDetailGrid").ClientDetailTemplateId("")
    .HtmlAttributes(new { @style = "align:center; font-size:9px;" })
    .Columns(columns =>
    {
        var colums = rtxVending.Web.Repositories.SessionRepository.GetSessionObject<IList<rtxVending.Web.Models.
        ProductCategoryTags>>(ApplicationConstants.sesProductsHeaderCategoryTags);
        if (colums != null && colums.Count > 0)
        {
            **//columnName is an array that i want to use as my column/field name**
            var columnName = colums.Select(a => a.ValueX).ToArray();

            foreach (var column in columnName)
            {
                columns.Bound(column.ToString());
            }
        }
        else
        {
            columns.Bound(o => o.Amount).Width(100);
            columns.Bound(o => o.Value).Width(100);
            columns.Bound(o => o.Value1).Width(100);
            columns.Bound(o => o.Value2).Width(100);
            columns.Bound(o => o.Value3).Width(100);
            columns.Bound(o => o.Value4).Width(100);
            columns.Bound(o => o.Value5).Width(100);
            columns.Bound(o => o.Value6).Width(100);
            columns.Bound(o => o.Value7).Width(100);
            columns.Bound(o => o.Value8).Width(100);
            columns.Bound(o => o.Value9).Width(100);
            columns.Bound(o => o.Value10).Width(100);
        }
    })
    .Pageable(pager => pager.Refresh(true))
    .Sortable()
    .Scrollable()
    .DataSource(dataSource => dataSource
        .Ajax()
        .Read(read => read.Action("GetProductDetailsGrid", "Products"))
        .Events(events => events.Error("error_handler"))
    )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:48:45.710

感谢 Pickle 教授的回复。

这就是我所做的。读取网格数据的方法如下。

```
public ActionResult GetProductDetailsGrid([DataSourceRequest] DataSourceRequest request)
    {
        try
        {
            List<ProductDetails> productDetails = null;
            //IEnumerable<ProductDetails> productDetails = null;

            if (SessionRepository.VerifySessionExists(ApplicationConstants.sesProductDetails))
            {
                productDetails = SessionRepository.GetSessionObject<List<ProductDetails>>(ApplicationConstants.sesProductDetails).ToList(); //.AsEnumerable();

                //Return converted list<T> as DataTable
                var dataTable = ToDataTable<ProductDetails>(productDetails);
                if (dataTable != null)
                {
                    var dataColumnCollection = dataTable.Columns;
                    SessionRepository.CacheSession<DataColumnCollection>(ApplicationConstants.sesAcquireStockDataColumnCollection, dataColumnCollection);
                }

                return Json(dataTable.ToDataSourceResult(request));
            }
        }
        catch (Exception ex)
        {
            ModelState.AddModelError("", ex.Message);
            return Json(ModelState.ToDataSourceResult());
        }

        return Json(ModelState.ToDataSourceResult(request));
    } 
```

我的模型是

```
public class ProductDetails
{
        [Key,ScaffoldColumn(false)]
        public long ProductDetailId { get; set; }
        public int ProductHeaderId { get; set; }
        public double Amount { get; set; }
        public string Value { get; set; }
        public string Value1 { get; set; }
        public string Value2 { get; set; }
        public string Value3 { get; set; }
        public string Value4 { get; set; }
        public string Value5 { get; set; }
        public string Value6 { get; set; }
        public string Value7 { get; set; }
        public string Value8 { get; set; }
        public string Value9 { get; set; }
        public string Value10 { get; set; }
        public string Value1DisplayName {get; set;}
        public bool Valid { get; set; }

} 
```

在视图出现之前，如果我的会话不为空，我会将数据传递给网格，否则它不会向视图传递任何内容，如下所示：

```
public ActionResult AcquireStock()
    {
        //TODO uncomment the Session Below 
        //SessionRepository.RemoveSession(ApplicationConstants.sesProductDetails); 

        var productHeader = new ProductHeaders();
        if (SessionRepository.VerifySessionExists(ApplicationConstants.sesProductDetails))
        {

            var productDetails = SessionRepository.GetSessionObject<List<ProductDetails>>(ApplicationConstants.sesProductDetails).ToList(); //.AsEnumerable();

            //Return converted list<T> as DataTable
            var dataTable = ToDataTable<ProductDetails>(productDetails);
            if (dataTable != null)
            {
                productHeader.ProductDetailsDataTable = dataTable;
                //SessionRepository.CacheSession<DataColumnCollection>(ApplicationConstants.sesAcquireStockDataColumnCollection, dataColumnCollection);
            }

            return View(productHeader);
        }

        productHeader.ProductDetailsDataTable = null;

        return View(productHeader);
    } 
```

我创建了一个**通用方法，该方法通过分别传入列名和行来将我的数据转换为数据表，而不必显示模型属性的每个值**。我希望它传递值不是“”或空值的字段。以便网格显示它。我的通用方法如下：

```
//Converts Generic List to DataTable
    private DataTable ToDataTable<T>(List<T> data)// T is any generic type
    {
        PropertyDescriptorCollection props = TypeDescriptor.GetProperties(typeof(T));
        int columnCount = 0;
        DataTable table = new DataTable();
        var colums = rtxVending.Web.Repositories.SessionRepository.GetSessionObject<IList<rtxVending.Web.Models.ProductCategoryTags>>(ApplicationConstants.sesProductsHeaderCategoryTags);
        if (colums != null && colums.Count > 0)
        {
            var columnName = colums.Select(a => a.ValueX).ToArray();

            for (int i = 0; i < columnName.Count(); i++)
            {
                table.Columns.Add(columnName[i]);
            }

            columnCount = columnName.Count();
        }
        else
        {
            for (int i = 0; i < props.Count; i++)
            {
                PropertyDescriptor prop = props[i];
                table.Columns.Add(prop.Name, prop.PropertyType);
            }            
        }            

        object[] values = new object[props.Count];
        foreach (T item in data)
        {
            for (int i = 0; i < values.Length; i++)
            {
                values[i] = props[i].GetValue(item);
            }

            object[] newValues = new object[columnCount];
            int j = 0;
            foreach (var p in values)
            {
                Type argType = p.GetType();

                if (argType == typeof(bool) && !((bool)p)) 
                {
                    newValues[j] = p;
                    j++;
                }
                else if(argType == typeof(int) && (int)p != 0)
                {
                    newValues[j] = p;
                    j++;
                }
                else if (argType == typeof(double) && (double)p != 0)
                {
                    newValues[j] = p;
                    j++;
                }
                else if (argType == typeof(string) && p != null && p != string.Empty)
                {
                    newValues[j] = p;
                    j++;
                }

                if (j >= columnCount)
                    break;
            }

            //table.Rows.Add(values);
            //table.Rows.Add(newValues);
        }
        return table;
    } 
```

我的网格现在是这个

```
@(Html.Kendo()
        //.Grid<rtxVending.Web.Models.ProductDetails>()
                  .Grid(Model.ProductDetailsDataTable)
                  .Name("ProductDetailGrid")//.ClientDetailTemplateId("")
                  .HtmlAttributes(new { @style = "align:center; font-size:9px;" })
                  .Columns(columns =>
                  {
                      //var columnData = rtxVending.Web.Repositories.SessionRepository.GetSessionObject<System.Data.DataColumnCollection>(ApplicationConstants.sesAcquireStockDataColumnCollection);

                      //if(columnData != null && columnData.Count > 0)
                      if (Model.ProductDetailsDataTable != null)
                      foreach (System.Data.DataColumn column in Model.ProductDetailsDataTable.Columns)
                      {
                          columns.Bound(column.ColumnName);
                      }
})
.Pageable(pager => pager.Refresh(true))   
.Sortable()
.Scrollable()    
.DataSource(dataSource => dataSource
    .Ajax()
    .Read(read => read.Action("GetProductDetailsGrid", "Products"))
                      .Model(model =>
                    {
                        if (Model.ProductDetailsDataTable != null)
                        foreach (System.Data.DataColumn column in Model.ProductDetailsDataTable.Columns)
                        {
                            model.Field(column.ColumnName, column.DataType);
                        }                
                    }) 
```

.Events(events => events.Error("error_handler"))))

如果有什么需要解释的，我会尽快回复。感谢泡菜教授！

# javascript - jQuery treeTable 插件抛出错误“TypeError: $(...).treetable is not a function”

> ID：15291854
> 
> 赞同：2
> 
> 时间：2013-03-08T10:29:25.343
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, jqtree

**场景：**在代码 html 文件中考虑以下内容：

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>jQuery treetable</title>
        <link rel="stylesheet" href="assets/css/screen.css" media="screen" />
        <link rel="stylesheet" href="assets/css/jquery.treetable.css" />
        <link rel="stylesheet" href="assets/css/jquery.treetable.theme.default.css" />
    </head>
    <body>
        <div id="main">
            <table id="tree">
                <tr id="node-1">
                    <td>Parent</td>
                </tr>
                <tr id="node-2" class="child-of-node-1">
                    <td>Child</td>
                </tr>
                <tr id="node-3" class="child-of-node-2">
                    <td>Child</td>
                </tr>
            </table>
        </div>
        <script src="assets/js/jquery.js"></script>
        <script src="assets/js/jquery-ui.js"></script>
        <script src="assets/js/jquery.treetable.js"></script>
        <script>
            $("#tree").treetable({ expandable: true }); 
        </script>
    </body>
</html> 
```

所有资源/依赖项（js、css 和图像文件）都以 200 HTTP 状态（稍后为 304）完美加载。

**问题：** Firebug 中的错误。以下是来自 firebug 控制台的错误：

```
TypeError: $(...).treetable is not a function
[Break On This Error] 
$("#tree").treetable({ expandable: true }); 
```

**链接：**

1.  [插件的来源](https://github.com/ludo/jquery-treetable)
2.  [文档和演示/示例](http://ludo.cubicphuse.nl/jquery-plugins/treeTable/doc/index.html)

**问题：**是否有人遇到此问题并知道任何解决方案？那么请对此有所了解，这将有很大帮助。

* * *

**更新 1：**甚至尝试使用以下代码：

```
<script>
    $(document).ready(function () {
        $("#tree").treetable({ expandable: true });
    });
</script> 
```

* * *

**更新 2：**基于所有答案。

我尝试使用以下代码：

```
<script>
    $(document).ready(function () {
        $("#tree").treeTable({ expandable: true });
    });
</script> 
```

但没有运气:-(

并且是源示例它只是't'而不是大写'T'。（[链接](https://github.com/ludo/jquery-treetable/blob/master/index.html#L857)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:36:21.127

你的方法是错误的。[例如检查文档](https://github.com/ludo/jquery-treetable/blob/master/index.html)。您需要使用小写的方法。

```
 $("#tree").treetable({ expandable: true }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:20:29.993

文档和安装步骤中提供的旧参考（[链接 > 2.2](http://ludo.cubicphuse.nl/jquery-plugins/treeTable/doc/index.html)）

2.2 步骤说“添加[src/javascripts/jquery.treeTable.js](http://ludo.cubicphuse.nl/jquery-plugins/treeTable/src/javascripts/jquery.treeTable.js) ”

但它不起作用，并且工作示例引用`jquery.treeTable.js`了服务器上的不同文件。它在[GitHub 源代码中是正确的](https://github.com/ludo/jquery-treetable/blob/master/javascripts/src/jquery.treetable.js)

提到代码`treetable()`的其他答案必须像`treeTable()`. 但它没有用。:-(

**问题是：** 2.2 步骤说“添加[src/javascripts/jquery.treeTable.js](http://ludo.cubicphuse.nl/jquery-plugins/treeTable/src/javascripts/jquery.treeTable.js) ”

**解决方案：从**[GitHub](https://github.com/ludo/jquery-treetable/blob/master/javascripts/src/jquery.treetable.js)获取`jquery.treeTable.js`文件

[在 GitHub 上提出的问题](https://github.com/ludo/jquery-treetable/issues/53)

# sql - 如何确定哪个 UNIQUE 索引在 Oracle 中强制执行 PRIMARY KEY

> ID：15291855
> 
> 赞同：1
> 
> 时间：2013-03-08T10:29:25.557
> 
> 标签：sql, oracle

给定一个具有两个唯一索引的表，如下所示，如何确定哪个唯一索引对应于 PRIMARY KEY，而不是该表上的其他 UNIQUE 索引？

user_indexes 和 user_ind_columns 似乎没有携带该信息。谢谢，--DD

PS：当然没有明确命名索引并使用命名约定。

```
SQL> create table tt (id number not null primary key, name varchar2(64 char) not null unique, info varchar2(4000));

SQL> create index tt_idx on tt(info);

SQL> select INDEX_NAME, INDEX_TYPE, UNIQUENESS from user_indexes where TABLE_NAME='TT';

INDEX_NAME           INDEX_TYPE                  UNIQUENES
-------------------- --------------------------- ---------
SYS_C0029541         NORMAL                      UNIQUE
SYS_C0029542         NORMAL                      UNIQUE
TT_IDX               NORMAL                      NONUNIQUE

SQL> select * from user_ind_columns where TABLE_NAME='TT';

INDEX_NAME           TABLE_NAME           COLUMN_NAME  COLUMN_POSITION COLUMN_LENGTH CHAR_LENGTH DESC
-------------------- -------------------- ------------ --------------- ------------- ----------- ----
SYS_C0029541         TT                   ID                         1            22           0 ASC
SYS_C0029542         TT                   NAME                       1           256          64 ASC
TT_IDX               TT                   INFO                       1          4000        4000 ASC 
```

**更新：**

**这是运行Florin**查询的结果，它清楚地显示了哪个索引强制执行主键：

```
SQL> select constraint_name, constraint_type, index_name from user_constraints where table_name='TT';

CONSTRAINT_NAME                C INDEX_NAME
------------------------------ - --------------------
SYS_C0029539                   C
SYS_C0029540                   C
SYS_C0029541                   P SYS_C0029541
SYS_C0029542                   U SYS_C0029542 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T10:37:45.943

```
select 
   owner, constraint_name, table_name, index_name 
from 
   user_constraints 
where constraint_type in ('P'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T10:36:14.613

非唯一索引可以支持主键，因此它根本不是真正强制唯一性的索引，而是约束本身。

如果您针对一组列创建主键或唯一键，则默认情况下会创建唯一索引，除非将约束声明为可延迟，然后创建非唯一索引。还可以针对由非唯一索引覆盖的一组列声明主键或唯一键，而无需创建新的唯一索引。

因此，强制主键约束的不是支持索引的唯一性，也不是强制主键列必须为非空的 NOT NULL 列约束的存在——在这两种情况下都是负责的主键约束本身。

但是，除了列 NOT NULL 声明之外，您绝对应该命名所有约束。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T10:59:06.030

In rare cases indexes columns can be a superset of PK's columns. For example index on (A, B, C) while PK is only (A, B).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T10:37:20.033

如您的查询所示，主键列上只有一个索引，这里没有混淆！

列`ID`( `SYS_C0029541`) 上的唯一索引用于强制执行主键。

在一般情况下，您可以使用视图的`INDEX_NAME`列[`USER_CONSTRAINTS`](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_1046.htm#REFRN20047)来查找用于监管唯一约束或主键的索引：

```
SELECT constraint_name, index_name, constraint_type
  FROM user_constraints
 WHERE table_name = 'TT'; 
```

# ios - Dropbox 错误在设备上打开另一个应用程序，而不是在模拟器上

> ID：15291857
> 
> 赞同：2
> 
> 时间：2013-03-08T10:29:32.537
> 
> 标签：ios, objective-c, cocoa-touch, dropbox-api

我有三个将文件上传到 Dropbox 的应用程序。三者的代码相同。他们都共享同一个文件夹，所以我使用了相同的密钥等

这是它变得奇怪的地方

**1.** 几个月来一切都很好

**2.** 现在在应用 2 和 3 上，当用户尝试登录时会打开第一个应用？

**3.** 注销再登录，没有帮助，只是说连接到 Dropbox 时出错，稍后再试

**我试过什么**

为所有三个应用程序创建单独的密钥等而不是共享相同的，仍然得到相同的行为？

对此的一些研究表明，Dropbox 已经改变了它通过应用程序链接到用户帐户的方式，并且即使您删除了应用程序，也可以链接提醒？有没有其他人有这方面的经验？

**应用委托**

```
NSString* appKey = @"00000000000";
NSString* appSecret = @"0000000000";
NSString *root = kDBRootAppFolder;

DBSession* session = 
[[DBSession alloc] initWithAppKey:appKey appSecret:appSecret root:root];
session.delegate = self; // DBSessionDelegate methods allow you to handle re-authenticating
[DBSession setSharedSession:session];

[DBRequest setNetworkRequestDelegate:self]; 
```

**viewController 中的按钮处理程序**

```
LogCmd();
self.publishButtonPressed = YES;
if (![[DBSession sharedSession] isLinked]) {
    [self loginLogoutButtonPressed:nil];
} else {

    DBRestClient *restClient = [[DBRestClient alloc] initWithSession:[DBSession sharedSession]];
    restClient.delegate = self;
    NSError *error = nil;
    NSString *filePath = [ICUtils pathForDocument:self.fileName];
    [self.pdfData writeToFile:filePath options:0 error:&error];
    if (nil == error) {

        [restClient uploadFile:self.fileName
                        toPath:@"/"
                 withParentRev:nil
                      fromPath:filePath];
    } else {
        [ICUtils raiseAlertWithTitle:@"An error occurred" message:[error localizedDescription]];
    }
 }
} 
```

**注意**在模拟器上工作正常，问题仅出现在设备上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T00:14:21.297

那是因为您对多个应用程序使用相同的密钥。Dropbox 应用通过自定义 URL 方案与您的应用通信 - 以启动您的应用（因为在 iOS 上没有其他方式以编程方式启动应用）。

换句话说，Dropbox 应用程序告诉系统打开“db-yoursecretkey://somemessage”，这会打开该自定义 URL 方案的注册应用程序。不幸的是，您的所有应用程序都使用相同的自定义方案，因为它们都使用相同的密钥，因此系统只会选择一个：很可能是第一个。

但是，您可以授予应用访问 Dropbox 中所有文件夹的权限，从而有效地共享文件夹。因此，没有必要让所有三个应用程序都使用相同的密钥。

# biztalk - Microsoft BizTalk 接口系统关系

> ID：15291858
> 
> 赞同：0
> 
> 时间：2013-03-08T10:29:39.047
> 
> 标签：biztalk, biztalk2006r2

我们已经使用 Microsoft BizTalk 2006 作为数据中心来执行多个接口系统的信息交换。

在 BizTalk 内部，我们使用接收端口、接收位置、平面文件反汇编程序、Xml 映射、发送端口组过滤、编排、动态发送端口来确定消息流。

是否有关于如何从 BizTalk 中提取信息以便管理员知道这些接口系统之间的关系（例如系统 A 将预算数据传输到系统 B 等）的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:37:20.627

我不相信有任何自动化工具可以生成演示接口系统之间关系的文档，因为产品中没有足够的元数据。但是[http://biztalk2010autodc.codeplex.com/](http://biztalk2010autodc.codeplex.com/)和[http://biztalkdocumenter.codeplex.com/](http://biztalkdocumenter.codeplex.com/)是开始自动化文档生成过程的两个好地方。

我已经看到您过去在 Visio 中生成的那种文档，它提供了对各种消息路由/关系等的易于理解的概述。

# java - 为什么后自增运算符不适用于返回 int 的方法？

> ID：15291861
> 
> 赞同：62
> 
> 时间：2013-03-08T10:29:51.707
> 
> 标签：java, post-increment

```
public void increment(){
    int zero = 0;

    int oneA = zero++; // Compiles

    int oneB = 0++; // Doesn't compile

    int oneC = getInt()++; // Doesn't compile
}

private int getInt(){
    return 0;
} 
```

都是int的，为什么B&C编译不出来？是否与`++`operator 不同的方式有关`= 0 + 1;`？

> 操作参数无效 ++/--

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-03-08T10:32:43.477

`i++`是对变量的赋值`i`。

在您的情况下，`zero++`等效于`zero = zero + 1`. 所以`0++`意味着`0 = 0 + 1`，这没有任何意义，以及`getInt() = getInt() + 1`。

更精确地 ：

```
int oneA = zero++; 
```

方法

```
int oneA = zero;
zero = zero + 1; // OK, oneA == 0, zero == 1 
```

* * *

```
int oneB = 0++; 
```

方法

```
int oneB = 0;
0 = 0 + 1; // wrong, can't assign value to a value. 
```

* * *

```
int oneC = getInt()++; 
```

方法

```
int oneC = getInt();
getInt() = getInt() + 1; // wrong, can't assign value to a method return value. 
```

* * *

从更一般的角度来看，变量是**L-value**，这意味着它指的是内存位置，因此可以被分配。**L** in **L** -value 代表赋值运算符的**左侧**（即`=`），即使 L 值可以在赋值运算符的左侧或右侧找到（`x = y`例如）。

相反的是**R 值**（**R**代表赋值运算符的**右侧**）。R-values 只能用在赋值语句的右侧，将某些东西赋给 L-value。通常，R 值是文字（数字、字符串...）和方法。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-03-08T10:32:12.093

因为如 [**JLS**](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.14.2)所述：

> 后缀表达式的结果必须是可转换（第 5.1.8 节）为数字类型的类型的变量，否则会发生编译时错误。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-03-08T10:32:36.907

`getInt()`不是`int`

`getInt()`返回`int`

`++`操作员做了两件事`increment`+`assignment`

因此，`++`要让操作员工作，您需要一个变量来存储增量操作的结果，`0`而`getInt()`两者都不是。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-03-08T10:35:20.950

前置和后置运算符仅在调用它们时对变量或左值进行操作。lvalue 是左值的缩写，即在赋值中可以站在左边的东西。在您的示例中：

```
 zero = 1; // OK
    0 = 1; // Meaningless
    getInt() = 1; // Also meaningless 
```

//jk

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-08T10:32:11.540

B 和 C 都使编译器说：

> 意外类型，必需：变量，找到：值

所以你不能增加一个值，只能增加一个变量。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-03-08T10:34:21.110

> 为什么后自增运算符不适用于返回 int 的方法？

因为它是一个getter方法，通过getter改变一个值是没有意义的。

* * *

```
int z = x + y++; 
```

相当于：

```
int z = x + y;
y = y + 1; 
```

所以有类似的东西是无效的：

```
int z = x + getY()++; 
```

这相当于：

```
int z = x + getY();
getY() = getY() + 1; // invalid! 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-03-08T10:34:45.380

> 0++

它等同于`0 = 0 + 1;`并且当然不可能。

即它必须`l-value`分配给它。

> getInt()++;

类似的原因在这里。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-03-08T10:32:44.293

因为`0`是一个`rValue`（即您只能从赋值运算符的右侧使用它）`not a lValue`。

`++`运算符增加值并将其设置为自身，因此`0++`会给您一个错误。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-03-15T18:11:31.540

我的回答有点“开箱即用”。

当我对运算符的用法有疑问时，我认为该运算符的“其重载函数等效”？

我知道，Java 运算符没有运算符重载，它只是一种解决方案的替代方法。

在这种情况下：

```
...
x++;
... 
```

应该读作：

```
...

int /* function */ postincrement (/* ref */ int avalue)
{
  int Result = avalue;

  // reference value, 
  avalue = avalue + 1;

  return Result;
}

...
postincrement(/* ref */ x);
... 
```

和：

```
...
++x;
...

...

int /* function */ preincrement (/* ref */ int avalue)
{
  // reference value, 
  avalue = avalue + 1;

  int Result = avalue;

  return Result;
}

...
preincrement(/* ref */ x);
... 
```

因此，“++”的两个版本都作为一个通过引用接收可变参数的函数工作。

因此，像“0++”这样的字面值或像“getInt()++”这样的函数结果，都不是变量引用。

干杯。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-19T11:53:51.487

由于函数返回是 RHS 表达式，并且前/后递增/递减操作只能应用于 LHS 表达式。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-03-13T06:33:05.130

postincrement 和 preincrement 只能在变量的帮助下应用。所以第一种情况编译。

# jsf-2 - 使用 @Named @ViewScoped 时提交的值为 null

> ID：15291862
> 
> 赞同：2
> 
> 时间：2013-03-08T10:29:57.653
> 
> 标签：jsf-2

我对`@ViewScoped`Bean 有意见。触发该方法时，bean 会引发一个`NullPointerException`. 但同样适用于 `@RequestScoped`和`@SessionScoped`Beans。这是我的代码：

控制.xhtml

```
 <h:form id="form1" >
               <p:growl id="messages" />
         <h:outputText value="Numero de Compte :" />  
  <p:inputText   id="txtCompte" value="#{controlBean.numeroCompte}" /> &nbsp; 
 <p:commandButton value="RECHERCHER" ajax="false" action="#{controlBean.rechercheCompte}"/>

                </h:form> 
```

Bean ControlBean：

```
@Named(value = "controlBean")
    @ViewScoped
    public class ControlBean extends Controller implements Serializable {
  private String numeroCompte;

        public String rechercheCompte() {

                if (numeroCompte!=null) {
                    System.out.println("Enter rechercheCompte "+numeroCompte);

                } else if (numeroCompte==null){
                      System.out.println("Enter rechercheCompte ; numcompte is null ");
                }

                return null;
            }

    } 
```

变量的值`numeroCompte`始终为 null ；但是对于 RequestScoped 和 SessionScoped Bean，我们可以从接口获得值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-23T23:41:00.953

在大家的帮助下解决了。要使用 @ViewScoped，bean（在 jsf2.1 中）需要注解 @ManagedBean，而不是 CDI Bean。所以，最好的方法是：

```
@ManagedBean(value = "controlBean")
    @ViewScoped
    public class ControlBean extends Controller implements Serializable {
  private String numeroCompte;

        public String rechercheCompte() {

                if (numeroCompte!=null) {
                    System.out.println("Enter rechercheCompte "+numeroCompte);

                } else if (numeroCompte==null){
                      System.out.println("Enter rechercheCompte ; numcompte is null ");
                }

                return null;
            }

    } 
```

谢谢 ：）

# wpf - 如何获取 WPF 数据网格中的当前元素以及如何处理它？

> ID：15291864
> 
> 赞同：2
> 
> 时间：2013-03-08T10:30:00.523
> 
> 标签：wpf, data-binding, mvvm, icommand, commandparameter

前段时间我开始通过这个[教程](http://www.codeproject.com/Articles/165368/WPF-MVVM-Quick-Start-Tutorial)学习 MVVM 模式。我使用 MicroMvvm。

我有一个带有 EntityFramework 模型的 WPF 项目。我编写了 ViewModel 和 XAML 视图。我想在 DataGrid 中显示我的数据。（2 列数据和 2 个按钮列：编辑、删除）

```
<DataGrid Height="250" ItemsSource="{Binding Books}" AutoGenerateColumns="False" >
    <DataGrid.Resources>
        <DataTemplate x:Key="DeleteTemplate" >
            <Button x:Name="DeleteButton" Command="{Binding DeleteBook, Mode=OneWay}" CommandParameter="{Binding}" >Delete</Button>
        </DataTemplate>
    </DataGrid.Resources>
    <DataGrid.Columns>
        <DataGridTextColumn Binding="{Binding Title}"  Header="Book"/>
        <DataGridTextColumn Binding="{Binding Author}"  Header="Author"/>
        <DataGridTemplateColumn  CellTemplate="{StaticResource EditTemplate}" Header="Редактировать"/>
        <DataGridTemplateColumn  CellTemplate="{StaticResource DeleteTemplate}" Header="Удалить"/>
    </DataGrid.Columns>
</DataGrid> 
```

在我的 LibraryViewModel.cs

```
#region Commands
void DeleteBookExecute()
{
    if (_books == null)
        return;

    //MessageBox.Show("This is delete button. Delete item id:" myMysticalObjectFromCommandParameter );
}
bool CanDeleteBookExecute()
{
    return true;
}
public ICommand DeleteBook
{
    get
    {
        return new RelayCommand(DeleteBookExecute, CanDeleteBookExecute);
    }
} 
```

当我按下按钮（删除/编辑）时，我想删除/编辑当前对象。我不知道如何在 MVVM 中做到这一点。

我可以这样做`Command="{Binding DeleteBook, Mode=OneWay}" CommandParameter="{Binding}"`吗？

如果正确，如何从`CommandParameter`LibraryViewModel 中获取数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:54:57.677

我有点好奇你的命令方法没有参数。我希望他们看起来像这样

```
void DoSomething(object param) {}
bool CanDoSomething(object param) {} 
```

不过，我会将 的`SelectedItem`属性绑定`DataGrid`到 VM 上的属性。有关更多信息，请查看[此处](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.selecteditem%28v=vs.95%29.aspx)。

```
<DataGrid ItemsSource={Binding Books} SelectedItem={Binding SelectedBook} /> 
```

因此，您可以轻松访问命令中的“当前”项目。

希望这个对你有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T11:54:29.153

正如 DHN 所说，您的命令执行方法`DeleteBookExecute()`应该`CanDeleteBookExecute()`有一个 object 类型的参数。

你的想法指向正确的方向。试试这个：

```
<DataGrid Name="LibraryGrid"
          Height="250" 
          ItemsSource="{Binding Books}" 
          AutoGenerateColumns="False" > 
```

和

```
Command="{Binding DataContext.DeleteBook, ElementName=LibraryGrid}" CommandParameter="{Binding}" 
```

使用`ElementName`with`DataContext.DeleteBook`可以获得 LibraryViewModel 的命令。

# c++ - 用 constexpr 引用会导致多重定义错误

> ID：15291867
> 
> 赞同：1
> 
> 时间：2013-03-08T10:30:10.480
> 
> 标签：c++, c++11, constexpr

我使用基于 gcc 4.7.2 的 CodeSourcery g++ lite 为 MCU 编程
我想定义位于特定地址的外围对象。所以我尝试将引用与 constexpr 说明符一起使用。

例如：

```
typedef int& int_ref;
constexpr int_ref i = *(int*)0; 
```

如果我将该代码放入标题中并编译我的程序，我将得到如下诊断：

```
xx1.o:(.rodata.i+0x0): multiple definition of `i'
...
xxx.o:(.rodata.i+0x0): first defined here
collect2.exe: error: ld returned 1 exit status 
```

它让我感到困惑`constexpr int i = 5`，因为编译器的运行非常愉快。

当然还有其他解决方案：
1\. 宏， `#define i *(int*)0`，它会污染每个 .c/.cpp 文件，包括标题。目前，我正在使用宏。
2.静态对象，`static constexpr int_ref i = *(int*)0;`。如果没有一些编译器选项（-fdata-sections），编译器就无法消除未使用的对象，这样就会浪费大量空间。

有没有更好的方法来做到这一点？

# sql-server-2005 - 我想在 sql 数据库的列中添加零并将其设置为 3 位

> ID：15291875
> 
> 赞同：0
> 
> 时间：2013-03-08T10:30:23.347
> 
> 标签：sql-server-2005

我想在我的 sql 数据库列中添加零。例如，如果数据是 1，那么它应该显示 001，如果数据是 11，它应该显示 011..如果数据是 222，那么什么都不做，因为它已经完成了 3 位数字......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:42:55.707

```
SELECT RIGHT('000' + CAST(1 AS VARCHAR(3)), YourColumnNameHere) AS Value 
```

# vb.net - 搜索字符串以在 VB.net 中的特定单词后添加行

> ID：15291877
> 
> 赞同：0
> 
> 时间：2013-03-08T10:30:33.500
> 
> 标签：vb.net, string, search, save

*（我是一个非常基础的程序员）*

我有一段文本需要搜索以找到特定的单词“客户”，然后将下一行保存为 CustomerName (CustomerName = >line of text<)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:54:05.770

如果您的“*正文*”是一个`TextBox`，您可以从该`.Lines`财产中获利：

```
Dim index As Integer
Dim customerName As String = ""

For i As Integer = 1 to TextBox1.Lines.Length - 1
    If TextBox1.Lines(i-1).Contains("Customer") Then
        customerName =  TextBox1.Lines(i)
        Exit For
    End If
Next 
```

如果您有纯文本，则可以获得分割整个文本的行：

```
Dim lines() As String = sAllText.Split(Environment.NewLine()) 
```

然后像以前一样做，但不是使用`TextBox1.Lines`，而是使用`lines`。

# android - C++ 中对构造函数的未定义引用

> ID：15291878
> 
> 赞同：1
> 
> 时间：2013-03-08T10:30:35.137
> 
> 标签：android, c++, cocos2d-x

我正在创建类 Level 的构造函数，如下所示，但是我收到一条错误消息：

```
D:\downloads\cocos2d-2.0-x-2.0.4\cocos2d-2.0-x-2.0.4\armadillo\proj.android/jni/../../Classes/HelloWorldScene.cpp:43: undefined reference to `Levels::Levels()'
D:\downloads\cocos2d-2.0-x-2.0.4\cocos2d-2.0-x-2.0.4\armadillo\proj.android/jni/../../Classes/HelloWorldScene.cpp:44: undefined reference to `Levels::getCachedDataFromFile(std::string)' 
```

代码：

```
bool HelloWorld::init()
{
  if ( !CCLayer::init() )
  {
    return false;
  }
  _levels = new Levels();
  _levels->getCachedDataFromFile("\mnt\sdcard\levels.json");
  return true;
} 
```

我在 HelloWorld.cpp 文件的构造函数中调用此方法。我已将 Levels.h 文件包含在 HelloWorld.h 中，该文件已包含在 HelloWorld.cpp 中。

如果有人能帮助我，我将不胜感激，因为我是 cpp 的初学者。

我已经在头文件中包含了方法和构造函数，你可以在下面的代码中检查它：

```
#include "Box2d.h"
#include "cocos2d.h"

using namespace cocos2d;

#ifndef LEVELS_H_
#define LEVELS_H_

class Levels: public b2ContactListener {

public:

Levels();
~Levels();

void BeginContact(b2Contact *contact);
void EndContact(b2Contact *contact);
void preSolve(b2Contact* contact, const b2Manifold* oldManifold);
void postSolve(b2Contact* contact, const b2ContactImpulse* impulse);
void getCachedDataFromFile(string filePath);

private:

//  const string LEVEL_FILE_NAME = "levels.json";

};

#endif /* LEVELS_H_ */ 
```

级别.cpp

```
#include "Levels.h"
#include <android/log.h>

#define  LOG_TAG    "levels"
#define  LOGD(...)  __android_log_print(ANDROID_LOG_DEBUG,LOG_TAG,__VA_ARGS__)

Levels::Levels() {

}

Levels::~Levels() {

}

void Levels::BeginContact(b2Contact *contact) {

}

void Levels::EndContact(b2Contact *contact) {

}

void Levels::getCachedDataFromFile(string filePath) {
unsigned long filesize = 0;
unsigned char* fileData = NULL;
std::string content, fullPath;
int i =1;
fullPath = CCFileUtils::sharedFileUtils()-    >       fullPathFromRelativePath(filePath.c_str());

fileData = CCFileUtils::sharedFileUtils()->getFileData(fullPath.c_str(),
        "r", &filesize);
content.append((char*) fileData);
LOGD(content.c_str());
 // if (languagesDocument.Parse < 0 > (content.c_str()).HasParseError()) {
 //     LOGD(languagesDocument.GetParseError());
 ////       CCLog(languagesDocument.GetParseError());
//  } 
```

// 返回 NULL; }

安卓.mk

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
#OpenCV
OPENCV_CAMERA_MODULES:=on
OPENCV_INSTALL_MODULES:=on
include ../../../projects/android-opencv/sdk/native/jni/OpenCV.mk

LOCAL_MODULE := game_shared

LOCAL_MODULE_FILENAME := libgame

LOCAL_SRC_FILES := hellocpp/main.cpp \
               ../../Classes/AppDelegate.cpp \
               ../../Classes/HelloWorldScene.cpp
#Required for android log from jni code
LOCAL_LDLIBS +=  -llog -ldl

#Add path to OpenCV's header files
LOCAL_C_INCLUDES := $(LOCAL_PATH)/../../Classes     \
$(LOCAL_PATH)/../../libs/Box2d \
../../../projects/android-opencv/sdk/native/jni/include/

LOCAL_WHOLE_STATIC_LIBRARIES := cocos2dx_static cocosdenshion_static          c cocos_extension_static box2d_static

include $(BUILD_SHARED_LIBRARY)

$(call import-module,CocosDenshion/android) \
$(call import-module,cocos2dx) \
$(call import-module,extensions) \ 
$(call import-module,Box2D) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:14:11.870

你实现了构造函数吗？在 Levels.cpp 中添加：

```
Levels::Levels()
{
    // constructor code here …
} 
```

与析构函数类似：

```
Levels::~Levels()
{
    // destructor code here …
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T23:29:06.163

您忘记添加`Levels.cpp`到 Android.mk 中的 src 文件列表。它应该是：

```
LOCAL_SRC_FILES := hellocpp/main.cpp \
               ../../Classes/AppDelegate.cpp \
               ../../Classes/HelloWorldScene.cpp \
               ../../Classes/Levels.cpp 
```

您稍后创建的任何具有类的文件也应添加到列表中。

# c# - axWindowsMediaPlayer1_PlayStateChange 事件不起作用

> ID：15291880
> 
> 赞同：0
> 
> 时间：2013-03-08T10:30:41.320
> 
> 标签：c#, axwindowsmediaplayer

我想在我的播放器中自动播放下一首歌曲。我已经使用 Windows 媒体播放器对象。
这是我的代码。

```
 private void timer2_Tick(object sender, EventArgs e)
    {
        if (songList.SelectedIndex < files.Length - 1)
        {
            songList.SelectedIndex++;
            timer2.Enabled = false;
        }
        else
        {
            songList.SelectedIndex = 0;
            timer2.Enabled = false;
        }            

    }

    private void axWindowsMediaPlayer1_PlayStateChange(object sender, AxWMPLib._WMPOCXEvents_PlayStateChangeEvent e)
    {
        if (axWindowsMediaPlayer1.playState == WMPLib.WMPPlayState.wmppsMediaEnded)
        {
            timer2.Interval = 100;
            timer2.Enabled = true;
        }

    } 
```

但它不起作用我已经破解了它正在工作的计时器代码，但我认为`axWindowsMediaPlayer1_PlayStateChange`事件不起作用，并且在我编写此行时在设计器代码中`axWindowsMediaPlayer`

```
 this.axWindowsMediaPlayer1.PlayStateChange += new System.EventHandler(this.axWindowsMediaPlayer1_PlayStateChange); 
```

它显示了这个错误：

> axWindowsMediaPlayer1_PlayStateChange 没有重载匹配委托 System.EventHandler

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:32:55.747

查看. [_ `PlayStateChange`](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd562460%28v=vs.85%29.aspx)它给了你一个清晰的例子。

而不是使用您所拥有的，只需使用此事件分配：

```
axWindowsMediaPlayer1.PlayStateChange +=
      new AxWMPLib._WMPOCXEvents_PlayStateChangeEventHandler(axWindowsMediaPlayer1_PlayStateChange); 
```

# sql-server-2008 - 如何在where子句sql server中以月和年格式给出日期范围

> ID：15291883
> 
> 赞同：0
> 
> 时间：2013-03-08T10:30:48.337
> 
> 标签：sql-server-2008

我试图在下面的 where 子句中给出日期范围.. 但是它没有给出正确的 o/p

```
 declare @StartDate DATETIME,  @EndDate DATETIME   
  set @StartDate='9/01/2011'
  set @EndDate='1/30/2012'
   Select * from mytable Where  MONTH(WT.ToDate) >= MONTH(@StartDate) AND MONTH(WT.ToDate) <=MONTH(@Enddate)
   AND YEAR(WT.ToDate)>= YEAR(@StartDate) AND YEAR(WT.ToDate) <=YEAR(@Enddate) 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:37:31.337

WT.ToDate是什么，WT指的是什么？

它应该是。

```
 declare @StartDate DATETIME,  @EndDate DATETIME   
  set @StartDate='9/01/2011'
  set @EndDate='1/30/2012'
   Select * from mytable as WT Where MONTH(WT.ToDate) >= MONTH(@StartDate) AND MONTH(WT.ToDate) <=MONTH(@Enddate)
   AND YEAR(WT.ToDate)>= YEAR(@StartDate) AND YEAR(WT.ToDate) <=YEAR(@Enddate) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:37:42.837

首先，请注意我已经更改了您指定日期的格式，以避免任何误解的风险（现在是 yyyyMMdd）。

其次，尝试这样的子句：

```
declare @StartDate DATETIME,  @EndDate DATETIME   
set @StartDate='20110901'
set @EndDate='20120130'

Select * 
from mytable 
Where  WT.ToDate >= @StartDate AND WT.ToDate < @EndDate 
```

请注意，这不会返回 2012 年 1 月 30 日的行，因此只需适当调整您的 @EndDate

# django - Django DateTimeField 输入表单

> ID：15291887
> 
> 赞同：3
> 
> 时间：2013-03-08T10:31:01.750
> 
> 标签：django, datetime

我的模型中有一个`DateTime`字段，我正在寻找一种简单的方法让它在表单中看起来不错。类似的东西`SelectDateWidget`。

我一直在研究很多类似的问题，让管理员 datepicker 或 jquery 之类的东西工作似乎真的很棘手。（这是我第一次使用 Django，之前从未使用过 jquery）。

所以，我在[这个](https://stackoverflow.com/questions/4665719/add-fields-to-django-modelform-that-arent-in-the-model)`ChoiceField`例子中使用了，但我也无法让它工作。我得到错误名称*'self' is not defined*。我不能在这里使用吗？还是有更好*的简单*方法来做到这一点？我不需要花哨的日期选择器，只需要让用户轻松输入的东西。 *`self`*

 **```
class ProjectForm(ModelForm):
    startdate = forms.DateField()
    starthour = forms.ChoiceField(choices=((6,"6am"),(7,"7am"),(8,"8am"),(9,"9am"), ...))
    startminute = forms.ChoiceField(choices=((0,":00"),(15,":15"),(30,":30"),(45,":45")))

    class Meta:
        model = Project

    def clean(self):
        starttime = time(int(self.cleaned_data.get('starthour')), 
                         int(self.cleaned_data.get('startminute')))
        return self.cleaned_data

    try:
        self.instance.start_time = datetime.datetime.combine(
            self.cleaned_data.get("startdate"), starttime)
    except TypeError:
        raise forms.ValidationError("") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T10:45:46.770

**表格.py**

```
from django import forms
from django.contrib.admin import widgets                                       

class MyForm(forms.ModelForm):
    class Meta:
        model = MyModel

    def __init__(self, *args, **kwargs):
        super(MyForm, self).__init__(*args, **kwargs)
        self.fields['mydate'].widget = widgets.AdminDateWidget()
        self.fields['mytime'].widget = widgets.AdminTimeWidget()
        self.fields['mydatetime'].widget = widgets.AdminSplitDateTime() 
```

在模板中：

```
<script type="text/javascript" src="/my_admin/jsi18n/"></script>
<script type="text/javascript" src="/media/admin/js/core.js"></script> 
```

…或者，对于 Django 1.4+：

```
{% load static %}

<link rel="stylesheet" type="text/css" 
    href="{% static 'admin/css/forms.css' %} "/>
<link rel="stylesheet" type="text/css" 
    href="{% static 'admin/css/base.css' %} "/>
<link rel="stylesheet" type="text/css" 
    href="{% static 'admin/css/global.css' %}"/>
<link rel="stylesheet" type="text/css" 
    href="{% static 'admin/css/widgets.css' %}"/>

<script type="text/javascript" 
    src="/admin/jsi18n/"></script>
<script type="text/javascript" 
    src="{% static 'admin/js/core.js' %}"></script>
<script type="text/javascript" 
    src="{% static 'admin/js/admin/RelatedObjectLookups.js' %}"></script>
<script type="text/javascript" 
    src="{% static 'admin/js/jquery.js' %}"></script>
<script type="text/javascript" 
    src="{% static 'admin/js/jquery.init.js' %}"></script>
<script type="text/javascript" 
    src="{% static 'admin/js/actions.js' %}"></script>
<script type="text/javascript" 
    src="{% static 'admin/js/calendar.js' %}"></script>
<script type="text/javascript" 
    src="{% static 'admin/js/admin/DateTimeShortcuts.js' %}"></script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-21T14:57:10.237

如果您遇到错误

```
Could not parse the remainder: '/js/jquery.init.js'' from 'admin/js/jquery.init.js''". 
```

`admin/js/jquery.init.js` 只需在它看起来像之前添加一个撇号：

```
'admin/js/jquery.init.js' 
```**

# hadoop - 3D 渲染工具

> ID：15291893
> 
> 赞同：0
> 
> 时间：2013-03-08T10:31:45.110
> 
> 标签：hadoop, 3d, rendering, visualization, distributed-computing

众所周知，3D 渲染的计算成本很高。

我想`Apache Hadoop`用于分布式 3D 渲染（渲染图像或视频）以减少渲染时间。所以在了解了 Hadoop 之后，我明白我需要两件事：

*   数据，将被可视化（可能是某种文件，其中包含指令（如绘制矩形、设置坐标、设置颜色等））
*   一些工具/程序/实用程序来呈现上述文件。我想从我的程序中调用它，将它指向带有数据的文件。（如果这个程序有命令行 API 就好了）。

但是我对 3D 渲染一无所知，所以我需要您的帮助来推荐用于渲染 3D 图像/视频的工具（开源）。另外我对输入数据一无所知。所以如果你建议我渲染工具+文件格式来渲染会很好。

我听说过使用具有`.rib`文件格式的 Hadoop 作为数据来可视化，并使用`rndr`程序来呈现这些数据。所以我需要一些类似的东西。

请注意，我的目标是更深入地了解 Hadoop 和分布式计算，而不是 3D 渲染，所以请建议我最简单的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:35:37.903

**吻：Gnuplot**

如果您真的只关心使用 Hadoop，并且您对渲染的唯一要求是它需要一个输入文件并制作图像以便您可以显示完整的动画，那么我建议`gnuplot`. 它实际上是一个绘图程序，但它需要脚本并生成图像文件，而且对您最有用的是，您可以输入数学公式进行绘图，而不是构建 3d 世界进行渲染。

您只需准备*n 个*文件，除了自启动以来的时间偏移值外，所有文件都相同，gnuplot 将生成适当的帧。

这是最简单的选项，可以让您专注于 Hadoop 方面。为了向您展示多么简单，这将为 3 叶片风扇旋转的动画生成一个帧：

```
set xrange[-1:1]
set yrange[-1:1]
set polar
unset key
unset border
unset tics
set terminal png size 1000,1000
set output "frame_$FRAME.png" 
plot cos(3*t+$FRAME/5) 
```

Gnuplot 的一大优点是您可以在交互式提示中输入命令来操作图形，这些命令与您在脚本中输入的命令相同。因此，一旦您有了满意的东西，您就可以执行`save 'newscript.gpt'`或复制您使用的命令。您可以通过`gnuplot newscript.gpt`在提示符下运行来重新创建图形。

顺便说一句，模拟难以渲染的场景比实际构建它们更容易，所以只需在 gnuplot 脚本中添加一个 sleep 命令，使其花费 15 秒或多长时间。

**整根香蕉：搅拌机**

Blender*是*一个 3D 渲染系统。我相信它被用作服务器场上一些主流动画的渲染系统，就像你描述的那样。它有相当长的学习曲线，但我认为您应该能够学习教程或其他预先存在的动画项目文件。从那里你需要弄清楚如何调用渲染引擎作为特定帧的命令。我只在搅拌机中做过静态渲染，所以我不能带你走得更远。这在视觉上会更令人印象深刻，但在学术上不会更令人印象深刻，而且你会在这方面浪费更多时间。

**我的选择**

我个人会选择gnuplot。`splot`您可以使用命令而不是 2d来制作 3d 绘图`plot`，虽然它不是您想象的 3d 场景渲染，但它达到了使用脚本制作图片的目的。您可以从像上面这样完全基本的东西开始，直到您进行设置，然后引入更多复杂性；从实现的角度来看，运行 gnuplot 脚本比运行还需要数据文件的脚本更容易，但是当您想要执行命令 + 脚本 + 数据而不是命令时，预先生成数据并让 gnuplot 读取它仍然很容易+ 脚本。关键是逐渐增加难度，而不是在你能走路之前跑步。

如果您最终发现自己有空闲时间并将其更改为使用搅拌机，那么这一切都是免费的，而且您并没有危及您的 hadoop 项目使其变得漂亮。

# android - 播放某些声音后，声音不与媒体播放器一起播放

> ID：15291897
> 
> 赞同：1
> 
> 时间：2013-03-08T10:32:05.120
> 
> 标签：android, audio, media-player, playing

我正在开发一个包含 100 种音效的 android 应用程序。在我播放了 25 个声音之后，我不能再播放了，我必须关闭应用程序并等待几分钟然后打开应用程序，现在我可以播放其他声音了。

```
final MediaPlayer mp81 = MediaPlayer.create(MainActivity.this, R.raw.a81); 
```

我使用以下代码播放声音：

```
mp81.start(); 
```

我使用以下代码停止播放声音：

```
mp81.seekTo(0); 
```

我也使用`stop()`了方法，但问题仍然存在。我还需要添加其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:50:49.380

请注意：考虑使用[SoundPool](http://developer.android.com/reference/android/media/SoundPool.html)播放短声音。

`MediaPlayer`关于您的用例：您使用静态方法初始化您的实例，`create()`这意味着您`MediaPlayer`为每个声音创建一个新对象，而不是重用现有实例并仅更改数据源。这可能会对您的应用程序的性能产生负面影响。我建议你为你的声音创建一个路径数组，然后`MediaPlayer`像这样实例化：

```
MediaPlayer mp = new MediaPlayer();
try {
     mp.setDataSource(yourArray[x]);
     mp.prepare();
     mp.start();
  } catch(Exception e){
    e.printStackTrace();
  } 
```

有关详细信息，请参阅[MediaPlayer 文档](http://developer.android.com/reference/android/media/MediaPlayer.html)。

# asp.net - 为 ASP.NET 网站创建 DAL

> ID：15291898
> 
> 赞同：5
> 
> 时间：2013-03-08T10:32:10.657
> 
> 标签：asp.net, gridview, data-access-layer

我正在使用 Microsoft Visual Studio `DAL`，在其中我正在执行获取/更新数据的传统方法，以通过从`ItemDetails`网站数据库表中检索数据来显示网站所列项目的评论，以创建`ItemDetails.aspx`文件。我添加了一个`DropDownList Control`来显示其类别中的所有项目。从下拉列表中选择类别时，它会显示该类别中的所有项目，并附加一个超链接`"Show Details"`以在网格视图中显示详细信息。我是新手，我不知道`DAL`为 asp.net 网站创建。需要简单的指南来为 asp.net 网站创建 DAL。帮助将不胜感激。创建 DAL 而不是`SQLadapter`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:42:28.110

因此，例如，这是我之前用于调用 SP 的 DAL。

它允许您执行存储过程并返回数据集、数据表、成功响应等。

**实际上，这取决于您打算如何访问数据**，您将编写存储过程还是在代码中进行查询。您还可以选择使用实体框架/LINQ。

```
using System;
using System.Collections.Generic;
using System.Web;
using System.Data;
using System.Data.Sql;
using System.Data.SqlClient;
using System.Configuration;

public class _DataInteraction
{

    #region "Stored Procedures"

    public static DataTable stdReturnDataTableQuery(string procedureName, string db)
    {
        DataTable myDataTable;

        SqlConnection myConnection = new SqlConnection(ConfigurationManager.ConnectionStrings[db].ConnectionString);
        SqlCommand cmd = new SqlCommand();
        SqlDataAdapter myDataAdapter = new SqlDataAdapter();

        cmd.CommandText = procedureName;
        cmd.CommandType = CommandType.Text;
        cmd.Connection = myConnection;

        //-----------------------------------------------------------------------
        // make our datatable to return
        //-----------------------------------------------------------------------
        myDataTable = new DataTable();

        //-----------------------------------------------------------------------
        // fill the datatable with the stored procedure results
        //-----------------------------------------------------------------------
        try
        {
            myConnection.Open();
            myDataAdapter.SelectCommand = cmd;
            myDataAdapter.Fill(myDataTable);
        }
        catch (Exception ex)
        {
            //flag as error happened
            throw ex;
        }
        finally
        {
            myConnection.Close();
            if ((myDataAdapter != null))
                myDataAdapter.Dispose();
            if ((cmd != null))
                cmd.Dispose();
        }

        return myDataTable;
    }

    //   Return a datatable from the database
    public static DataTable stdReturnDataTable(string procedureName, List<SqlParameter> myParameters, string db)
    {
        SqlConnection myConnection = default(SqlConnection);
        SqlCommand myCommand = default(SqlCommand);
        SqlDataAdapter myDataAdapter = default(SqlDataAdapter);
        DataTable myDataTable = default(DataTable);
        string connString = null;

        //   -----------------------------------------------------------------------
        //   create instance of connection
        //   -----------------------------------------------------------------------
        connString = ConfigurationManager.ConnectionStrings[db].ConnectionString;
        myConnection = new SqlConnection();
        myConnection.ConnectionString = connString;

        //-----------------------------------------------------------------------
        //   create instance of command and dataadapter
        //-----------------------------------------------------------------------
        myCommand = new SqlCommand(procedureName, myConnection);
        myDataAdapter = new SqlDataAdapter(myCommand);

        //-----------------------------------------------------------------------
        //   say its a stored procedure command
        //-----------------------------------------------------------------------
        myCommand.CommandType = CommandType.StoredProcedure;

        //-----------------------------------------------------------------------
        //   add any parameters?
        //-----------------------------------------------------------------------
        if ((myParameters != null))
        {
            foreach (SqlParameter myParm in myParameters)
            {
                // add the parameter to the command
                myCommand.Parameters.Add(myParm);
            }
        }

        //-----------------------------------------------------------------------
        // make our datatable to return
        //-----------------------------------------------------------------------
        myDataTable = new DataTable();

        //-----------------------------------------------------------------------
        // fill the datatable with the stored procedure results
        //-----------------------------------------------------------------------
        try
        {
            myConnection.Open();
            myDataAdapter.Fill(myDataTable);
        }
        catch (Exception ex)
        {
            //flag as error happened
            throw ex;
        }
        finally
        {
            myConnection.Close();
            if ((myDataAdapter != null))
                myDataAdapter.Dispose();
            if ((myCommand != null))
                myCommand.Dispose();
        }

        return myDataTable;
    }

    //   Return a dataset from the database
    public static DataSet stdReturnDataset(string procedureName, List<SqlParameter> myParameters, string db)
    {
        SqlConnection myConnection = default(SqlConnection);
        SqlCommand myCommand = default(SqlCommand);
        SqlDataAdapter myDataAdapter = default(SqlDataAdapter);
        DataSet ds = new DataSet();
        string connString = null;

        //-----------------------------------------------------------------------
        //   create instance of connection
        //-----------------------------------------------------------------------
        connString = ConfigurationManager.ConnectionStrings[db].ConnectionString;
        myConnection = new SqlConnection();
        myConnection.ConnectionString = connString;

        //-----------------------------------------------------------------------
        //   create instance of command and dataadapter
        //-----------------------------------------------------------------------
        myCommand = new SqlCommand(procedureName, myConnection);
        myDataAdapter = new SqlDataAdapter(myCommand);

        //-----------------------------------------------------------------------
        //   say its a stored procedure command
        //-----------------------------------------------------------------------
        myCommand.CommandType = CommandType.StoredProcedure;

        //-----------------------------------------------------------------------
        //   add any parameters?
        //-----------------------------------------------------------------------
        if ((myParameters != null))
        {
            foreach (SqlParameter myParm in myParameters)
            {
                // add the parameter to the command
                myCommand.Parameters.Add(myParm);
            }
        }

        //-----------------------------------------------------------------------
        // fill the datatable with the stored procedure results
        //-----------------------------------------------------------------------
        try
        {
            myConnection.Open();
            myDataAdapter.Fill(ds);
        }
        catch (Exception ex)
        {
            //flag as error happened
            throw ex;
        }
        finally
        {
            myConnection.Close();
            if ((myDataAdapter != null))
                myDataAdapter.Dispose();
            if ((myCommand != null))
                myCommand.Dispose();
        }

        return ds;
    }

    //   Return success from a query from the database
    public static bool db_NonQuerySuccessResponse(string strCommandText, List<SqlParameter> myParameters, string db)
    {
        SqlConnection SQLConnection = new SqlConnection(ConfigurationManager.ConnectionStrings[db].ConnectionString);
        SqlCommand SQLCommand = new SqlCommand();
        DataSet ds = new DataSet();
        string Value = "";
        bool success = false;

        try
        {
            SQLCommand.CommandText = strCommandText;
            SQLCommand.CommandType = CommandType.StoredProcedure;
            SQLCommand.Parameters.Clear();

            if ((myParameters != null))
            {
                foreach (SqlParameter myParm in myParameters)
                {
                    // add the parameter to the command
                    SQLCommand.Parameters.Add(myParm);
                }
            }

            SQLCommand.Connection = SQLConnection;
            SQLConnection.Open();
            SQLCommand.ExecuteNonQuery();
            SQLConnection.Close();

            success = true;

        }
        catch (Exception ex)
        {
            success = false;
            return success;
        }

        return success;

    }

    //   General non query, no results no success
    public static bool db_NonQuery(string strCommandText, List<SqlParameter> myParameters, string db)
    {

        SqlConnection SQLConnection = new SqlConnection(ConfigurationManager.ConnectionStrings[db].ConnectionString);
        SqlCommand SQLCommand = new SqlCommand();
        DataSet ds = new DataSet();

        try
        {
            SQLCommand.CommandText = strCommandText;
            SQLCommand.CommandType = CommandType.StoredProcedure;
            SQLCommand.Parameters.Clear();

            if ((myParameters != null))
            {
                foreach (SqlParameter myParm in myParameters)
                {
                    // add the parameter to the command
                    SQLCommand.Parameters.Add(myParm);
                }
            }

            SQLCommand.Connection = SQLConnection;
            SQLConnection.Open();
            SQLCommand.ExecuteNonQuery();
            SQLConnection.Close();

        }
        catch (Exception ex)
        {
            return false;
        }

        return true;

    }

    ////   Execute scalar on db
    //public static string db_Scalar(string strCommandText, ref List<SqlParameter> myParameters, string db)
    //{

    //    SqlConnection SQLConnection = new SqlConnection(ConfigurationManager.ConnectionStrings[db].ConnectionString);
    //    SqlCommand SQLCommand = new SqlCommand();
    //    string Value = "";

    //    SQLCommand.CommandText = strCommandText;
    //    SQLCommand.CommandType = CommandType.StoredProcedure;
    //    SQLCommand.Parameters.Clear();

    //    if ((myParameters != null))
    //    {
    //        foreach (SqlParameter myParm in myParameters)
    //        {
    //            // add the parameter to the command
    //            SQLCommand.Parameters.Add(myParm);
    //        }
    //    }

    //    SQLCommand.Connection = SQLConnection;
    //    SQLConnection.Open();
    //    Value = SQLCommand.ExecuteScalar;
    //    SQLConnection.Close();
    //    return Value;
    //}

    #endregion
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T06:18:14.540

以下是1个样本供参考............

```
 public List<T> GetRequests(string strNo)
    {
        List<T> objlstMapping = null;
        Mapping objMapping = null;
        try
        {
            Database objDbInstance = CreateSQLDatabase(DbConnection.MF);

            using (DbCommand objDbCommand = objDbInstance.GetStoredProcCommand(Constants.SP_QUESTS))
            {
                DALBase.AddDbParam(objDbInstance, objDbCommand, "@No", DbType.AnsiString, ParameterDirection.Input, strFolioNo);

                objDbCommand.Connection = objDbInstance.CreateConnection();
                objDbCommand.Connection.Open();
                using (DbDataReader dr = objDbCommand.ExecuteReader(CommandBehavior.CloseConnection))
                {
                    objMapping = new List<T>();
                    if (dr.HasRows)
                    {
                        while (dr.Read())
                        {
                            objMapping = new BrokerFolioMapping();
                            objMapping .Brok_Code = SProposedValue(dr, "Code");
                            objMapping .Active = SProposedValue(dr, "Status");
                            objMapping .AccStmt_Active = SProposedValue(dr, "PortfolioStatus");

                            objlstFolioMapping.Add(objMapping );
                        }
                    }
                }
            }
        }
        catch (Exception ex)
        {
                        }
        return objlstFolioMapping;
    } 
```

# asp.net - 我有一个下拉列表，其中有事件集值到下拉列表我如何在另一个类文件中使用它？

> ID：15291919
> 
> 赞同：2
> 
> 时间：2013-03-08T10:32:54.730
> 
> 标签：asp.net, class, events, webforms

我的 aspx 中有一个下拉列表，其中有一个为其设置值的事件：

```
protected void Page_Load(object sender, EventArgs e)
{
    DropDownList1.Items.Add("No Image News");
    DropDownList1.Items.Add("Small News");
    DropDownList1.Items.Add("Medium News");
    DropDownList1.Items.Add("Large News");
    DropDownList1.DataBind();         
} 
```

我有一个有方法的类文件，我想在方法中使用下拉列表。

示例：如果选择的下拉列表值为“汽车”，请执行此操作..

是否可以在类文件中以某种方式使用 aspx 文件中的下拉列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:50:09.370

创建一个以`DropDownList`作为参数的函数从您的文件中
调用该函数。 它会起作用的。`.aspx.cs`

功能会是这样的

```
 public void MyControlData(DropDownList ddl)
 {

 } 
```

`System.Web`在`.cs`要定义此函数的文件中添加对的引用。

## 编辑 1

```
 using System;
 using System.Data;
 using System.Configuration;
 using System.Web;
 using System.Web.Security;
 using System.Web.UI;
 using System.Web.UI.WebControls;
 using System.Web.UI.WebControls.WebParts;
 using System.Web.UI.HtmlControls; 

 public class MyControlData
 {

       public void MyControlData(DropDownList ddl)
       {
          // DO SOMETHING HERE
       }
  } 
```

# javascript - 需要帮助从 c# 调用 java 脚本

> ID：15291922
> 
> 赞同：1
> 
> 时间：2013-03-08T10:32:58.630
> 
> 标签：javascript, asp.net

我需要将值格式化为像（$ 1,000）这样的货币，我有代码，但我需要知道如何从 c# 调用 java 脚本

**aspx.cs 页面**（代码页

```
x= 2345
textbox1.text = x.ToString();// i need the format currency here 
```

**JavaScript**

```
function formatCurrency(num)
 {
    num = num.toString().replace(/\$|\,/g,'');
    if(isNaN(num))
    num = "0";
    sign = (num == (num = Math.abs(num)));
    num = Math.floor(num*100+0.50000000001);
    cents = num%100;
    num = Math.floor(num/100).toString();
    if(cents<10)
    cents = "0" + cents;
    for (var i = 0; i < Math.floor((num.length-(1+i))/3); i++)
    num = num.substring(0,num.length-(4*i+3))+','+
    num.substring(num.length-(4*i+3));
    return (((sign)?'':'-') + '$' + num + '.' + cents);
} 
```

请帮助我如何从 c# 文件中调用格式货币，我需要在文本框中显示格式值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:37:33.073

在 c# 中使用这种类型的代码。我认为您不需要 javascript 来格式化货币值。

```
decimal somemoney = 2345m;
string html = String.Format("{0:C}", somemoney);
textbox1.text = html; 
```

# php - PHP 数组到 HTML 层次结构（多个面包屑路径）

> ID：15291927
> 
> 赞同：0
> 
> 时间：2013-03-08T10:33:15.617
> 
> 标签：php, arrays, recursion, breadcrumbs

我在 php 中有一个数组，在执行 print_r($breadcrumb) 时看起来像这样

```
Array (
    [url] => /category/
    [text] => Category
)
Array (
    [url] => /category/subcategory/
    [text] => Subcategory
)
Array (
    [url] => /category/subcategory/subsubcategory/
    [text] => Subsubcategory
) 
```

我希望这个面包屑显示为

```
Category > Subcategory > Subsubcategory 
```

根据[Google 文档](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=185417)，HTML 应如下所示：

```
<div xmlns:v="http://rdf.data-vocabulary.org/#"> 
  <span typeof="v:Breadcrumb">
    <a href="/category/" rel="v:url" property="v:title">
      Category
    </a> ›
    <span rel="v:child">
      <span typeof="v:Breadcrumb">
        <a href="/category/subcategory/" rel="v:url" property="v:title">
          Subcategory
        </a> ›
        <span rel="v:child">         
          <span typeof="v:Breadcrumb">
            <a href="/category/subcategory/subsubcategory/" rel="v:url" property="v:title">
              Subsubcategory
            </a> ›          
          </span>
        </span>
      </span>
    </span>
  </span>
</div> 
```

如何从 PHP 数组转到 HTML？

我看过[其他答案](https://stackoverflow.com/questions/2997548/php-formatting-multi-dimensional-array-as-html)，但它们在我的场景中不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:48:13.263

以下是我将如何解决这个问题：

PHP：

```
<?php
    $breadcrumb = array(
        array(
            'url' => '/category/',
            'text' => 'Category'
        ),
        array(
            'url' => '/category/subcategory/',
            'text' => 'Subcategory'
        ),
        array(
            'url' => '/category/subcategory/subcategory',
            'text' => 'Subsubcategory'
        )
    );
    $children = count($breadcrumb) - 1;
?> 
```

显示标记：

```
<div xmlns:v="http://rdf.data-vocabulary.org/#">
    <span typeof="v:Breadcrumb">
        <?php for ($i = 0; $i < count($breadcrumb); $i++) : ?>
        <?php if ($i == 0) : ?>
        <a href="<?php echo $breadcrumb[0]['url']; ?>" rel="v:url" property="v:title"><?php echo $breadcrumb[0]['text']; ?></a> › 
        <?php else : ?>
        <span rel="v:child">
            <span typeof="v:Breadcrumb">
                <a href="<?php echo $breadcrumb[$i]['url']; ?>" rel="v:url" property="v:title"><?php echo $breadcrumb[$i]['text']; ?></a> ›
        <?php endif; ?> 
        <?php endfor; ?>
        <?php echo str_repeat("</span>\r\n</span>\r\n", $children); ?>
    </span>
</div> 
```

如有必要，这种方法还将允许更深的子类别。

希望能帮助到你

更新显示代码：

```
<div xmlns:v="http://rdf.data-vocabulary.org/#">
    <span typeof="v:Breadcrumb">
        <?php for ($i = 0; $i < count($breadcrumb); $i++) : ?>
        <?php if ($i == 0) : ?>
        <a href="<?php echo $breadcrumb[0]['url']; ?>" rel="v:url" property="v:title"><?php echo $breadcrumb[0]['text']; ?></a> › 
        <?php else : ?>
        <span rel="v:child">
            <span typeof="v:Breadcrumb">
                <a href="<?php echo $breadcrumb[$i]['url']; ?>" rel="v:url" property="v:title"><?php echo $breadcrumb[$i]['text']; ?></a><?php if ($i < $children):?> › <?php endif; ?>
        <?php endif; ?> 
        <?php endfor; ?>
        <?php echo str_repeat("</span>\r\n</span>\r\n", $children); ?>
    </span>
</div> 
```

上面的代码从末尾修剪了最后一个 > 符号:)

# javascript - 更改步骤时，jQuery 滑块无法正确更改值

> ID：15291934
> 
> 赞同：0
> 
> 时间：2013-03-08T10:33:24.900
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-slider

[http://jsfiddle.net/ntSrb/4/](http://jsfiddle.net/ntSrb/4/)

问题：第二个滑块应以 1 为增量递减，因为第一个滑块以 3 为增量变化

我已经检查了第二个滑块的变化，它就像第一个滑块第一次更改它一样工作，之后第二个滑块只是没有注册新值

如果大步拉第一个滑块，第二个滑块也会随机跳跃。

这是我的问题的简化版本，因为实际上我有 4 个滑块，它们会以类似的方式相互影响（一个滑块递增 3，然后其他三个滑块递减 1）

HTML

```
<span id="firstspan">25</span>
<div id="firstrange" style="max-width: 300px;"></div>
<span id="secondspan">25</span>
<div id="secondrange" style="max-width: 300px;"></div> 
```

JS

```
function updateSpans(numberChange) {

    var oldval;
    var newval;

    oldval = $("#secondrange").slider("value"); //number                 
    newval = Math.round(oldval + numberChange / 3);

    $('#secondrange').slider("option", "step", 1);
    $("#secondrange").slider("option", "value", newval);
    $('#secondrange').slider("option", "step", 3);
    $("#secondspan").text(newval);
}

$(function () {
    $("#firstrange").slider({
        orientation: "horizontal",
        min: 0,
        max: 100,
        value: 25,
        step: 3,
        slide: function (event, ui) {
            var currentvalue = ui.value; //number
            var oldvalue = parseInt($('#firstspan').text()); //number
            $("#firstspan").text(currentvalue);
            updateSpans(oldvalue - currentvalue);
        },
    });
});

$(function () {
    $("#secondrange").slider({
        orientation: "horizontal",
        min: 0,
        max: 100,
        value: 25,
        step: 3,
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:48:21.533

请参阅此[jsFiddle 链接](http://jsfiddle.net/ntSrb/5/)。我已经更改了您的 jsfiddle 代码，现在它可以工作了。请检查。第 22 行的更改：

```
change: function(event, ui){ 
```

# symfony - Symfony2 security.yml：http 基本身份验证返回 500 而不是 401

> ID：15291935
> 
> 赞同：4
> 
> 时间：2013-03-08T10:33:33.240
> 
> 标签：symfony, basic-authentication

我正在尝试使用 symfony 2 设置一个非常简单的 http-basic 身份验证。不幸的是，我不断收到 500 HTTP 错误代码`AccessDeniedException: Access Denied`，而不是 401，这将迫使浏览器显示用户名/密码框。

这是我的security.yml：

```
jms_security_extra:
    secure_all_services: false
    expressions: true

security:
    firewalls:
        secured_area:
            pattern:    ^/
            anonymous: ~
            http_basic:
                realm: "Flow"

    access_control:
        - { path: ^/flow/checkout/, roles: ROLE_USER }

    providers:
        in_memory:
            memory:
                users:
                    user:  { password: userpass, roles: ROLE_USER }
                    admin: { password: kitten, roles: ROLE_ADMIN }

    encoders:
        Symfony\Component\Security\Core\User\User: plaintext 
```

有什么想法有什么问题吗？

这是我正在调用的 URL：`http://local.shop/web/app_dev.php/flow/checkout`

这就是我得到的答案： ![在此处输入图像描述](../Images/18eb1645f0a391a32b0c5d9eb8d2f9e5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:52:44.213

你试过`pattern: .*`吗？

```
security:
    firewalls:
        secured_area:
            pattern: .*
            anonymous: ~
            http_basic:
                realm: "Flow" 
```

我想您的防火墙被绕过了，并且您尝试直接访问应用程序的“部分”，如果您没有经过身份验证，您将无法访问

使用您的“旧”路径，仅当该请求针对 url 时，您才要求防火墙“考虑请求” `/`（这意味着 /foo 或 /foo/bar 或 /foo/bar/foobar 未被拦截）

## 更新

```
[2013-03-18 09:20:48] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Component\Security\Http\Firewall::onKernelRequest". [] []
[2013-03-18 09:20:48] security.INFO: Populated SecurityContext with an anonymous Token [] []
[2013-03-18 09:20:48] security.INFO: No expression found; abstaining from voting. [] []
[2013-03-18 09:20:48] event.DEBUG: Notified event "kernel.exception" to listener "Symfony\Component\Security\Http\Firewall\ExceptionListener::onKernelException". [] []
[2013-03-18 09:20:48] security.DEBUG: Access is denied (user is not fully authenticated) by "/var/www/html/cm/vendor/symfony/symfony/src/Symfony/Component/Security/Http/Firewall/AccessListener.php" at line 73; redirecting to authentication entry point [] []
[2013-03-18 09:20:48] security.DEBUG: Calling Authentication entry point [] [] 
```

这是一个日志示例，当内核拦截对“必须拥有的”资源的请求时

# android - 带有操作按钮的 Android 自定义操作栏

> ID：15291937
> 
> 赞同：2
> 
> 时间：2013-03-08T10:33:42.267
> 
> 标签：android, width, android-actionbar, menuitem

这是我要创建的操作栏。

![在此处输入图像描述](../Images/bbfb0464227bab44ecdba23a71fb0f89.png)

这是我放入菜单的项目。

```
 <item
        android:id="@+id/search"
        android:title="Search"
        android:showAsAction="ifRoom|collapseActionView"
        android:actionLayout="@layout/search_layout"
    />

     <item
        android:id="@+id/search1"
        android:title="PHOTO"
        android:showAsAction="ifRoom"
        android:actionLayout="@layout/search_layout"
    /> 
```

collapseActionView - 启动时折叠搜索菜单。

![在此处输入图像描述](../Images/6c77aa73b75e49380684e6b3a20a577d.png) 单击搜索项后，它会显示如图 1 所示的编辑文本。但我需要始终看到它，不仅在单击后。

如果我将它设置为始终，它会因为 fill_parent 而从屏幕上弹出菜单项。

```
<EditText
        android:id="@+id/txt_search"
        android:inputType="text"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
    /> 
```

是否可以在没有菜单项的情况下获得标题栏布局的宽度？在这种情况下，我可以将固定宽度设置为 edittext 项目。

是否有其他方法可以使其发挥作用？结果它必须是自定义标题布局+菜单项。此自定义布局必须填充菜单项和图标之间的空白空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-24T05:54:54.033

使用**Custom ActionBar**，您可以解决您的问题。对于**自定义 ActionBar**，您必须按照以下方式在自定义布局上创建：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:enabled="false"
android:orientation="horizontal"
android:layout_alignParentRight="true"
android:layout_gravity="right"
android:paddingEnd="8dip"
android:paddingRight="8dip"
android:paddingLeft="8dip">

<EditText
    android:layout_width="200dip"
    android:layout_height="wrap_content"
    android:id="@+id/action_bar_edt_search"/>
<ImageButton
    android:layout_width="50dip"
    android:layout_height="50dip"
    android:id="@+id/action_bar_img_search"
    android:background="@drawable/search_ico"/>
<Button
    android:id="@+id/action_bar_search"
    android:layout_alignParentRight="true"
    android:layout_gravity="right"
    style="@style/ActionBarButtonWhite" />

<Button
    android:id="@+id/action_bar_photo"
    android:layout_alignParentRight="true"
    android:layout_gravity="right"
    style="@style/ActionBarButtonOffWhite" />

<Button
    android:id="@+id/action_bar_video"
    android:layout_alignParentRight="true"
    android:layout_gravity="right"
    style="@style/ActionBarButtonOffWhite" />

<Button
    android:id="@+id/action_bar_mobile"
    android:layout_alignParentRight="true"
    android:layout_gravity="right"
    style="@style/ActionBarButtonOffWhite" /> 
```

**颜色.xml**

```
<resources>
<color name="action_bar">#ff0d0d0d</color>
<color name="white">#ffffffff</color>
<color name="off_white">#99ffffff</color>
</resources> 
```

**样式.xml**

```
<style name="MyActionButtonStyle" parent="android:Widget.ActionButton">
    <item name="android:minWidth">28dip</item>
</style>

<style name="ActionBarButton">
    <item name="android:layout_width">wrap_content</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:background">@null</item>
    <item name="android:ellipsize">end</item>
    <item name="android:singleLine">true</item>
    <item name="android:textSize">@dimen/text_size_small</item>
</style> 
```

现在您需要在您的 java 文件中创建**ViewGroup**和**ActionBar**，如下所示：

```
final ViewGroup actionBarLayout = (ViewGroup) getLayoutInflater().inflate(
            R.layout.actions,
            null);

    // Set up your ActionBar
    final ActionBar actionBar = getActionBar();
    actionBar.setDisplayShowHomeEnabled(false);
    actionBar.setDisplayShowTitleEnabled(false);
    actionBar.setDisplayShowCustomEnabled(true);
    actionBar.setCustomView(actionBarLayout);

    // You customization

    final int actionBarColor = getResources().getColor(R.color.action_bar);
    actionBar.setBackgroundDrawable(new ColorDrawable(actionBarColor));

    final EditText actionBarEditSearch = (EditText) findViewById(R.id.action_bar_edt_search);
    actionBarEditSearch.setVisibility(View.GONE);

    final ImageButton actionBarImgSearch = (ImageButton) findViewById(R.id.action_bar_img_search);
    actionBarImgSearch.setVisibility(View.GONE);

    final Button actionBarSearch = (Button) findViewById(R.id.action_bar_search);
    actionBarSearch.setText("SEARCH");

    final Button actionBarPhoto = (Button) findViewById(R.id.action_bar_photo);
    actionBarPhoto.setText("PHOTO");

    final Button actionBarVideo = (Button) findViewById(R.id.action_bar_video);
    actionBarVideo.setText("VIDEO");

    final Button actionBarMobile = (Button) findViewById(R.id.action_bar_mobile);
    actionBarMobile.setText("MOBILE");

    actionBarSearch.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            actionBarEditSearch.setVisibility(View.VISIBLE);
            actionBarImgSearch.setVisibility(View.VISIBLE);
            actionBarSearch.setVisibility(View.GONE);
        }
    });

    actionBarImgSearch.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            actionBarEditSearch.setVisibility(View.GONE);
            actionBarImgSearch.setVisibility(View.GONE);
            actionBarSearch.setVisibility(View.VISIBLE);
        }
    });

<style name="ActionBarButtonWhite" parent="@style/ActionBarButton">
    <item name="android:textColor">@color/white</item>
</style>

<style name="ActionBarButtonOffWhite" parent="@style/ActionBarButton">
    <item name="android:textColor">@color/off_white</item>
</style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T16:07:22.597

您可以通过设置自定义视图来代替操作栏标题来实现此目的。

```
ActionBar actionBar = getActionBar();
actionBar.setCustomView(R.layout.search_layout);
actionBar.setDisplayShowCustomEnabled(true); 
```

结果是`EditText`填充了操作栏的整个宽度，除了操作按钮。它看起来与问题中的第一张图片完全相同。

# c# - 如何返回 ListViewItems 的集合？

> ID：15291941
> 
> 赞同：3
> 
> 时间：2013-03-08T10:33:50.407
> 
> 标签：c#, winforms, listview

很抱歉关于新手的问题，`ListViewItems`但以前从未使用`ListView`过，我想做的是将所有内容`ListViewItems`从`AnimalManager`类返回到 UI`lsbOverview`控件。这种方法的原因是我有一个`Manager`类可以处理所有数据并将其返回给 UI 控件。问题是如何将所有物品退回`lsboverView` `ListView`？

```
 // declared in AnimalManager class
    private static List<Animal> AnimalList { get; set; }

     public static ListViewItem DisplayAllAnimals()
    {
        //Show animals on ListView by proper column
        foreach (var animal in AnimalList)
        {
            ListViewItem item = new ListViewItem(animal.Id); // generated ID
            item.SubItems.Add(animal.AnimalSort); // AnimalSort
            item.SubItems.Add(animal.Name); //Name
            item.SubItems.Add(animal.Age); //Age
            item.SubItems.Add(animal.Gender.ToString()); // Animal gender

            return item;
        }

        // how to return all items back to UI ?
    }

    // Mainform UI class where its used
    lsbOverview.Items.Add(AnimalManager.DisplayAllAnimals()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:40:26.053

你在找这个吗？

```
// declared in AnimalManager class
    private static List<Animal> AnimalList { get; set; }

     public static ListViewItem[] DisplayAllAnimals()
    {
        //Show animals on ListView by proper column
        var listViewItems = new List<ListViewItem>();
        foreach (var animal in AnimalList)
        {
            ListViewItem item = new ListViewItem(animal.Id); // generated ID
            item.SubItems.Add(animal.AnimalSort); // AnimalSort
            item.SubItems.Add(animal.Name); //Name
            item.SubItems.Add(animal.Age); //Age
            item.SubItems.Add(animal.Gender.ToString()); // Animal gender
            listViewItems.Add(item);

        }

        return listViewItems.ToArray();
    }

    // Mainform UI class where its used
    lsbOverview.Items.AddRange(AnimalManager.DisplayAllAnimals()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:38:33.370

我想你想要的是这样的：

```
 // declared in AnimalManager class
    private static List<Animal> AnimalList { get; set; }

     public static IEnumerable<ListViewItem> DisplayAllAnimals()
    {
        //Show animals on ListView by proper column
        foreach (var animal in AnimalList)
        {
            ListViewItem item = new ListViewItem(animal.Id); // generated ID
            item.SubItems.Add(animal.AnimalSort); // AnimalSort
            item.SubItems.Add(animal.Name); //Name
            item.SubItems.Add(animal.Age); //Age
            item.SubItems.Add(animal.Gender.ToString()); // Animal gender

            yield return item;
        }
    }

    // Mainform UI class where its used
    lsbOverview.Items.AddRange(AnimalManager.DisplayAllAnimals().ToArray()); 
```

编辑：注意 AddRange 调用而不是 Add。有关 IEnumerable<> 和 yield 的更多信息，我建议谷歌或在此处搜索以获得更深入的了解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T10:44:53.913

我认为构建一组动物，然后在列表视图上使用 AddRange 可以解决问题：

```
public static List<ListViewItem> DisplayAllAnimals()
{
    var animals = new List<ListViewItem>();

    //Show animals on ListView by proper column
    foreach (var animal in AnimalList)
    {
        ListViewItem item = new ListViewItem(animal.Id); // generated ID
        item.SubItems.Add(animal.AnimalSort); // AnimalSort
        item.SubItems.Add(animal.Name); //Name
        item.SubItems.Add(animal.Age); //Age
        item.SubItems.Add(animal.Gender.ToString()); // Animal gender

        animals.Add(item);
    }

    return animals;
}

lsbOverview.Items.AddRange(AnimalManager.DisplayAllAnimals().ToArray()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T10:40:36.723

您可以使用`yield return`返回一个`IEnumerable<ListViewItem>`

```
public static IEnumerable< ListViewItem> DisplayAllAnimals()
{
    //Show animals on ListView by proper column
    foreach (var animal in AnimalList)
    {
        ListViewItem item = new ListViewItem(animal.Id); // generated ID
        item.SubItems.Add(animal.AnimalSort); // AnimalSort
        item.SubItems.Add(animal.Name); //Name
        item.SubItems.Add(animal.Age); //Age
        item.SubItems.Add(animal.Gender.ToString()); // Animal gender

        yield return item;
    }

} 
```

您可以将其用作：

```
lsbOverview.Items.AddRange(AnimalManager.DisplayAllAnimals().ToArray()); 
```

# iphone - 在 iPhone 中使用 OpenCV 从图像创建视频

> ID：15291942
> 
> 赞同：1
> 
> 时间：2013-03-08T10:33:51.120
> 
> 标签：iphone, ios, objective-c, opencv

有没有办法在 iPhone 中使用 OpenCV 框架从图像数组创建视频？请帮助我。我不知道有关 OpenCV 框架的详细信息。提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:36:29.500

你必须使用OpenCV吗？

该`AVFoundation`框架支持这一点。看看 - [https://stackoverflow.com/a/3742212/384155](https://stackoverflow.com/a/3742212/384155)

如果您只需要使用 OpenCV，请尝试[http://myopencv.wordpress.com/2008/12/19/creating-your-own-videos-in-opencv/](http://myopencv.wordpress.com/2008/12/19/creating-your-own-videos-in-opencv/)

# c++ - 如何避免与 OpenMPI 的名称冲突？

> ID：15291944
> 
> 赞同：-1
> 
> 时间：2013-03-08T10:33:59.270
> 
> 标签：c++, c, openmpi

为了在我们的代码中设置所谓的功能标志，我们使用一个外部文件。在那里我们定义宏

```
#define LB 
```

我们只是将我们的软件移植到 C++，然后出现错误，特别是这个

```
/usr/local/openmpi-1.6.4/include/openmpi/ompi/mpi/cxx/constants.h:174:28: error: declaration does not declare anything [-fpermissive] 
```

在相应的文件中查找 OpenMPI 使用名为`LB`.

```
OMPI_DECLSPEC extern const Datatype LB; 
```

如何避免名称冲突？重命名宏`#define LB`不是一种选择，因为这会破坏向后兼容性。是否可以将`C`OpenMPI 的 -Interface 与 一起使用`C++`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:41:04.767

LB 是官方 MPI C++ 绑定的一部分。如果不关闭整个 C++ 绑定集，就无法关闭它。

但请注意，MPI“LB”位于 MPI:: 命名空间中。所以你也可以让你的 LB 成为一个实际的常量（与 #define 相比）——也许在你的头文件中是这样的：

```
extern const int LB; 
```

（然后你必须在某个地方实际实例化那个 const int LB ，当然）

这将使 LB 常量位于 MPI 命名空间之外，因此不会发生冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:02:35.697

可以使用宏禁用 OpenMPI C++ 绑定

```
#define OMPI_SKIP_MPICXX 
```

# ios - 企业经销证书更新

> ID：15291946
> 
> 赞同：0
> 
> 时间：2013-03-08T10:34:02.460
> 
> 标签：ios, xcode

我刚刚更新了客户的企业分销证书，该证书即将在未来 20 天内到期。新证书一切正常，但唯一看到的问题是新证书的到期日期，即 3 年后，即 2016 年。

我已阅读[文档](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/ManaginganiOSDistributionCertificate/ManaginganiOSDistributionCertificate.html)，上面写着“分发证书自签发之日起一年内有效。” 企业经销证书是否有3年的有效期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:03:09.497

您的证书可能会持续 3 年，但您使用它签署的配置文件只会在一年内有效。今年我们更新应用程序时，我遇到了这个问题。

# javascript - 如何将fabric js文本转换为pdf

> ID：15291951
> 
> 赞同：0
> 
> 时间：2013-03-08T10:34:07.060
> 
> 标签：javascript, svg, fabricjs

我正在使用**fabricjs**创建海报（包含文本和图像）。

对于字体系列（如龙虾），我使用的是谷歌字体。我将海报以 .svg 格式（使用`fabric.toSVG()`）保存在服务器上。**我正在尝试使用Apache FOP**生成 pdf （我也尝试了 rsvg、cariosvg 和 phantomjs rasterize），但它们无法正确嵌入字体系列。

问题是因为他们找不到该特定字体的 css。我以前提供了css的路径，但是生成的pdf仍然不包含字体系列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:24:37.630

实际上 Apache FOP 为您提供了添加字体矩阵的功能。我解决了我从 googlefont 目录下载字体并为 Apache FOP 创建 conf 文件的问题。在 conf 文件中，我提到了目录的路径。我使用 -c 选项从字体文件运行配置。在 conf.xml 文件中添加了以下行

```
<directory recursive="true">/var/www/pic/fonts</directory> 
```

# c# - 如何使用 C#.net 为 iPhone 中的推送通知准备后端

> ID：15291954
> 
> 赞同：4
> 
> 时间：2013-03-08T10:34:10.330
> 
> 标签：c#, iphone, asp.net, ios

```
using System;
using System.Collections.Generic;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Net;
using System.IO;
using System.Text;
using System.Security.Authentication;
using System.Net.Security;
using System.Net.Sockets;
using System.Security.Cryptography.X509Certificates;
using Newtonsoft.Json.Linq;

namespace WebApplication1
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void btnPush_Click(object sender, EventArgs e)
        {
            pushMessage(txtDeviceID.Text.Trim(), txtPayload.Text.Trim());
        }

        public void pushMessage(string deviceID, string Mesaj)
        {

            int port = 2195;
            String hostname = "gateway.push.apple.com";

            String certificatePath = HttpContext.Current.Server.MapPath("new_dev_cert.p12");
            X509Certificate2 clientCertificate = new X509Certificate2(System.IO.File.ReadAllBytes(certificatePath), "taxmann");
            X509Certificate2Collection certificatesCollection = new X509Certificate2Collection(clientCertificate);

            TcpClient client = new TcpClient(hostname, port);
            SslStream sslStream = new SslStream(client.GetStream(), false, new RemoteCertificateValidationCallback(ValidateServerCertificate), null);

            try
            {
                sslStream.AuthenticateAsClient(hostname, certificatesCollection, SslProtocols.Ssl3, false);

                MemoryStream memoryStream = new MemoryStream();
                BinaryWriter writer = new BinaryWriter(memoryStream);
                writer.Write((byte)0);  //The command
                writer.Write((byte)0);  //The first byte of the deviceId length (big-endian first byte)
                writer.Write((byte)32); //The deviceId length (big-endian second byte)

                writer.Write(HexStringToByteArray(deviceID.ToUpper()));
                String payload = "{\"aps\":{\"alert\":\"" + Mesaj + "\",\"badge\":1,\"sound\":\"default\"}}";
                writer.Write((byte)0);
                writer.Write((byte)payload.Length);
                byte[] b1 = System.Text.Encoding.UTF8.GetBytes(payload);
                writer.Write(b1);
                writer.Flush();
                byte[] array = memoryStream.ToArray();
                sslStream.Write(array);
                sslStream.Flush();
                client.Close();
                lblResponse.Text = "Sucess..";
            }
            catch (System.Security.Authentication.AuthenticationException ex)
            {
                client.Close();
                lblResponse.Text = ex.Message;
            }   
            catch (Exception e)
            {
                client.Close();
                lblResponse.Text = e.Message;
            }
        }

        // The following method is invoked by the RemoteCertificateValidationDelegate. 
        public static bool ValidateServerCertificate(object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors)
        {
            if (sslPolicyErrors == SslPolicyErrors.None)
                return true;
            else // Do not allow this client to communicate with unauthenticated servers. 
                return false;
        }

        private static byte[] HexStringToByteArray(String DeviceID)
        {
            //convert Devide token to HEX value.
            byte[] deviceToken = new byte[DeviceID.Length / 2];
            for (int i = 0; i < deviceToken.Length; i++)
                deviceToken[i] = byte.Parse(DeviceID.Substring(i * 2, 2), System.Globalization.NumberStyles.HexNumber);

            return deviceToken;
        }
    }
} 
```

以上是我发送通知的后端源代码。我的代码调试成功并收到消息。但我无法在 iPhone 上获取通知。

我已经关注了这个[http://blog.serverdensity.com/how-to-build-an-apple-push-notification-provider-server-tutorial/](http://blog.serverdensity.com/how-to-build-an-apple-push-notification-provider-server-tutorial/)。我不知道问题出在哪里。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:08:57.580

阅读本教程，它解释了您从头到尾所需的一切，并且完美运行。它解释了如何在服务器端和 ios 设备上设置所有内容，以及如何在开发人员门户中整理所有证书。

[http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

希望这可以帮助

山姆

```
{
    "aps":
    {
        "alert":
        {
            "body": "Hello, world!"
        },
        "badge": 2
    }
} 
```

# asp.net - 通过 asp.net 应用程序上传视频

> ID：15291955
> 
> 赞同：1
> 
> 时间：2013-03-08T10:34:14.230
> 
> 标签：asp.net, multithreading, video, delegates

我必须通过我的应用程序在服务器上上传视频。所以，我想以这样的方式创建应用程序，它可以一次上传多个视频。

因此，为此我可以创建单独的**线程**，如下面的代码：

```
 Thread childThread1 = new Thread(new ParameterizedThreadStart(UploadVideo));
     childThread1.Start(videos[videocount++]); 
```

此方法运行良好，可**同时**上传多个文件。

但是我也可以通过代表同时上传多个文件。

```
UploadVideoDelegate delUploadVideo;  
AsyncCallback objAsyncCallBack = new AsyncCallback(this.TocuhLogResult);  
IAsyncResult objIAsyncRes;  
delUploadVideo = new UploadVideoDelegate(UploadVideo);  
objIAsyncRes = delInsertTouchLogToDB.BeginInvoke(videos[videocount++],  objAsyncCallBack, null); 
```

那么，我应该在这里使用哪一个，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:26:12.877

更好的方法是使用**委托**，因为有时当多个线程出现时，某些线程可能会崩溃，我个人认为更好的方法是通过委托而不是线程来使用它。

更重要的是它的全部给你。

# css - 小提琴工作，真实页面不在 IE9 中

> ID：15291956
> 
> 赞同：0
> 
> 时间：2013-03-08T10:34:14.913
> 
> 标签：css, internet-explorer, html, header

我有一个问题，但我不知道为什么：p 我正在尝试制作一个在线表单，并且我在 IE9 中的 css 实现遇到了一些问题。到目前为止，我的页面在 chrome 中工作（div 显示为内联块），但不是 IE9。但是，当我将完全相同的代码放入小提琴时，它也适用于 IE9 [http://jsfiddle.net/XuD6j/1/](http://jsfiddle.net/XuD6j/1/)

这让我觉得我可能在标题中遇到了一些问题。这是它目前的样子：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd">

<html>
<head>
<title> Registratieformulier Peuters</title>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<meta name="generator" content="syn">
<style type="text/css"></style>
<link href="http://www.doenwatikkan.nl/jeroen/style.css" type="text/css" rel="stylesheet" media="screen">
<link href="http://www.doenwatikkan.nl/jeroen/print.css" type="text/css" rel="stylesheet" media="print">
</head> 
```

如果您有任何想法，请告诉我，如果您认为问题不能在标题中，而应该在其他地方。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T10:40:34.227

你的文档类型看起来不对，这可能是迫使 IE 进入[怪癖模式](http://en.wikipedia.org/wiki/Quirks_mode)，试试：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

按照[http://www.quirksmode.org/css/quirksmode.html的建议](http://www.quirksmode.org/css/quirksmode.html)

**更新**

这是一个怪癖模式问题，按 F12 并查看**Browser mode**。您的代码似乎在我认为是问题的标题中呈现以下内容：

```
Notice: Undefined index: route in /home/doenwa01/domains/doenwatikkan.nl/public_html/jeroen/verwerking.php on line 7

Notice: Undefined index: ID in /home/doenwa01/domains/doenwatikkan.nl/public_html/jeroen/verwerking.php on line 8
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

**更多更新**

您的源现在似乎包含两种文档类型：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>

<head> 
```

如果您加载页面并单击查看源代码，您会看到问题，基本上您希望得到：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T11:05:31.860

我认为这是您的文档类型，目前它已被注释掉并且在错误的位置。当您没有文档类型（在正确的位置）时，会强制使用 Quirks 模式。

您希望它位于页面的最顶部，这是 HTML5 文档类型

```
<!DOCTYPE html> 
```

**编辑：**您的页面顶部有一些错误，如果您删除它们应该可以正常工作。

```
<!-- Created: 01-23-09 13:49:39 by R.Haenbeukers -->

Notice: Undefined index: route in /home/doenwa01/domains/doenwatikkan.nl/public_html/jeroen/verwerking.php on line 7

Notice: Undefined index: ID in /home/doenwa01/domains/doenwatikkan.nl/public_html/jeroen/verwerking.php on line 8
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
<head> 
```

# iphone - UIImage 字节顺序已更改

> ID：15291957
> 
> 赞同：1
> 
> 时间：2013-03-08T10:34:16.950
> 
> 标签：iphone, ios, opengl-es, uiimage, cgimage

我正在使用`[uiImage drawAtPoint]`绘制新图像。但事实证明颜色变了。我的原始图像`uiImage`是红色的，而生成的图像`newImage`是蓝色的。这是我的代码：

```
UIImage* uiImage = [UIHelper loadImage:fileName];
NSString *text = [ApplicationSettings instance].user.name;
UIGraphicsBeginImageContext(uiImage.size);
[uiImage drawAtPoint: CGPointZero];
[text drawAtPoint: CGPointMake(10, 10) withFont: [UIFont systemFontOfSize: 12]];
UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
return [Texture createTexture: newImage]; 
```

并在`[Texture createTexture]`：

```
+ (Texture*) createTextureWithImage:(UIImage*)image {
    Texture* tex = [[[Texture alloc] init] autorelease];
    if ([tex loadImage:image])
        return tex;
    else {
        NSLog(@"Failed to load image %@", image);
        return nil;
    }
}

- (BOOL)loadImage:(UIImage *)image {
    BOOL ret = NO;

    if (image) {
        // Get the inner CGImage from the UIImage wrapper
        CGImageRef cgImage = image.CGImage;

        // Get the image size
        width = CGImageGetWidth(cgImage);
        height = CGImageGetHeight(cgImage);

        // Record the number of channels
        channels = CGImageGetBitsPerPixel(cgImage)/CGImageGetBitsPerComponent(cgImage);

        // Generate a CFData object from the CGImage object (a CFData object represents an area of memory)
        CFDataRef imageData = CGDataProviderCopyData(CGImageGetDataProvider(cgImage));

        // Copy the image data for use by Open GL
        ret = [self copyImageDataForOpenGL: imageData];
        CFRelease(imageData);
    }

    return ret;
} 
```

而在`[texture copyImageDataForOpenGL]`

```
- (BOOL)copyImageDataForOpenGL:(CFDataRef)imageData {
    if (pngData) {
        free(pngData);
    }

    pngData = (unsigned char*)malloc(width * height * channels);
    const int rowSize = width * channels;
    const unsigned char* pixels = (unsigned char*)CFDataGetBytePtr(imageData);

    // Copy the row data from bottom to top
    for (int i = 0; i < height; ++i) {
        memcpy(pngData + rowSize * i, pixels + rowSize * (height - 1 - i), width * channels);
    }

    return YES;
} 
```

我猜生成的图像使用 RGB 顺序，而原始图像使用相反的顺序。这是因为白色和黑色保持不变。

**编辑**

我正在使用 OpenGL ES 来渲染这个纹理。

`return [Texture createTexture: uiImage];`而不是`return [Texture createTexture: newImage]`完美地工作，但我想在`uiImage`.

我已经测试过`UIImageWriteToSavedPhotosAlbum(newImage, nil, nil, nil);`，保存的图像是正确的。

我打印了`CGImageGetBitmapInfo(uiImage.CGImage))`and `CGImageGetBitmapInfo(newImage.CGImage)`，它们不一样！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:55:27.720

这是我当前和正确的版本`copyImageDataForOpenGL`

```
- (BOOL)copyImageDataForOpenGL:(CGImageRef)image {
    if (pngData) {
        free(pngData);
    }

    pngData = (GLubyte*)malloc(width * height * channels);
    const int rowSize = width * channels;
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    NSUInteger bytesPerPixel = channels;
    NSUInteger bytesPerRow = bytesPerPixel * width;
    NSUInteger bitsPerComponent = 8;
    CGContextRef context = CGBitmapContextCreate(pngData, width, height,
                                                 bitsPerComponent, bytesPerRow, colorSpace,
                                                 kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
    CGColorSpaceRelease(colorSpace);
    CGContextClearRect(context, CGRectMake(0, 0, width, height));
    CGContextTranslateCTM(context, 0,0);
    CGContextDrawImage(context, CGRectMake(0, 0, width, height), image);

    [ARRenderer flipRGBData: pngData bytesPerRow:bytesPerRow height:height];
    return YES;
} 
```

其中`[ARRenderer flipRGBData]`定义为

```
+ (void)flipRGBData:(GLubyte*)data bytesPerRow:(int)bytesPerRow height:(int)height {
    GLubyte* swp = (GLubyte*)malloc(bytesPerRow);
    for (int h = 0; h < height / 2; h++) {
        memcpy(swp, data + (height - 1 - h) * bytesPerRow, bytesPerRow);
        memcpy(data + (height - 1 - h) * bytesPerRow, data + h * bytesPerRow, bytesPerRow);
        memcpy(data + h * bytesPerRow, swp, bytesPerRow);
    }
    free(swp);
} 
```

# iphone - 如何将url图像存储在缓存中，然后在iphone的imageview中显示

> ID：15291960
> 
> 赞同：4
> 
> 时间：2013-03-08T10:34:22.863
> 
> 标签：iphone, ios, ios4

我直接在 Imageview 中打开 URL 图像，但我想将图像存储在缓存中以供将来参考...帮助我解决我的问题..

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T10:39:18.653

您可以使用使用图像缓存[的 SDWebImage](https://github.com/rs/SDWebImage) ...

该库提供了一个类别`UIImageVIew`，支持来自网络的远程图像。

它提供：

向 Cocoa Touch 框架添加 Web 图像和缓存管理的`UIImageView`类别

一个异步图片下载器

具有自动缓存过期处理的异步内存 + 磁盘映像缓存

背景图片解压

保证不会多次下载相同的 URL

保证不会一次又一次地重试虚假 URL

保证主线程永远不会被阻塞

表演！使用 GCD 和 ARC

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:57:14.407

这是iOS开发中的一个经典问题，我之前写了一个类[OnlineImageView](https://github.com/siqin/OnlineImageView)，它使用的是NSOperationQueue——现在GCD可能会更好。

您想访问在线图像：

1.  首先，您尝试点击内存缓存中的图像（使用密钥，可能是 url），但未命中。
2.  其次，你尝试在磁盘中查找图像，再次错过。
3.  然后，您应该使用 GCD 或其他方法异步下载在线图像。
4.  图片下载成功后，在 UIImageView 中显示，并缓存在内存中，写入磁盘以备后用。

一些示例代码：

```
- (void)downloadImage:(NSDictionary *)info
{
    /* HOWTO: Prevent Downloading the same url many times */
    /* Keep the download task one by one ? */

    NSString *url = [info objectForKey:@"url"];
    NSURL *imageUrl = [NSURL URLWithString:url];
    UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:imageUrl]];

    if (image) {
        id theDelegate = [info objectForKey:@"delegate"];
        if ([theDelegate respondsToSelector:@selector(imageDownloader:didFinishWithImage:)]) {
            [theDelegate imageDownloader:self didFinishWithImage:image];
        }

        [cacheQueue cacheImage:image withKey:url];
    } else {
#ifdef DEBUG
        NSLog(@"Failed to download : %@\n", url);
#endif
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T11:18:51.193

使用[SDWebImage](https://github.com/rs/SDWebImage)。它最好和最容易的图像数据缓存。

# c# - 组合框 SelectedValue 不显示？

> ID：15291962
> 
> 赞同：1
> 
> 时间：2013-03-08T10:34:26.107
> 
> 标签：c#, combobox, microsoft-metro, store

我在 xaml 中创建了一个组合框，如下所示：

```
ComboBox x:Name="cbTest" ItemsSource="{Binding}" SelectedValue="{Binding Test, Mode=TwoWay}" HorizontalAlignment="Left" Margin="0,10,0,0" Width="250" SelectionChanged="cbTest_SelectionChanged"/> 
```

Combobox 中填充了以下 ItemSource：

```
cbTest.ItemsSource = new string[] { "Left", "Right", "Center" }; 
```

我在组合框中看到了 3 个字符串，但它没有显示我之前选择的 SelectedValue。这是属性：

```
private short _test;
public short Test
{
    get
    {
        return _test;
    }
    set
    {
        _test = value;
        NotifyPropertyChanged();
    }
} 
```

测试给了我以下数据：“左”。所以，我得到了数据，但绑定不起作用！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:56:48.357

问题是你不能转换`System.String`为`System.Int16`（短），你也不能解析，因为“左”、“右”、“中心”不是数字。

尝试`string`用作您的`SelectedValue`

```
private string _test;
public string Test
{
    get
    {
        return _test;
    }
    set
    {
        _test = value;
        NotifyPropertyChanged();
    }
} 
```

# mysql - SQL & VBScripts：如何将 SQL 查询列 (USER_FIRSTNAME) 存储到 VBScript 变量中？

> ID：15291964
> 
> 赞同：0
> 
> 时间：2013-03-08T10:34:27.987
> 
> 标签：mysql, sql, vbscript

我试图让它工作，但它不起作用，因此想知道这里是否有人能够帮助我解决这个问题。问题是在 select 语句运行后，我无法将 SQL 查询列存储到 VBScript 变量中。我只是希望在 SQL 查询运行时将用户的名字和姓氏存储到数据库中 user_id 和密码匹配的变量中。这样我就可以像欢迎“名字，姓氏”一样显示他们的名字。我的数据库确实连接到数据库和所有内容，但我只是不知道如何将某些人的姓名从 oracle 存储到 VBScript 变量，我可以在同一页面上显示欢迎 John Smith 或其他内容。

请不要担心 SQL 注入的东西，目前不需要它。

以下是 ASP 文件代码：

```
<%@ Language=VBScript %>

<%user_id=Request("user_id") user_pwd=Request("user_pwd") %>

<% Set DBConn = Server.CreateObject("ADODB.Connection")
   DBConn.Open "Driver={Oracle in OraClient11g_home1};DBQ=ORCL;UID=ops$dbID;PWD=dbPWD;"
   Login = "SELECT USER_ID, USER_FIRSTNAME, USER_SURNAME FROM UserTable WHERE USER_ID = '" & user_id & "' AND USER_PWD='"& user_pwd &"';"

   Set QueryResult = DBConn.Execute(QueryToRun)

   QueryResult.Close

   DBConn.Close
%> 
```

我什至尝试过`response.write("USER_FIRSTNAME")`，但它仍然不起作用，因为它需要首先从查询中存储到一个变量中，我不知道该怎么做:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:14:07.287

下面是一个如何查询 oracle 数据库并返回数据读取器的示例，然后您可以在 VB 中对其进行迭代：

```
data_source = "Driver={Oracle in OraClient11g_home1};DBQ=ORCL;UID=ops$dbID;PWD=dbPWD;"
Set con = Server.CreateObject("ADODB.Connection")
con.Open data_source
Set rs = Server.CreateObject("ADODB.Recordset")
sqlread = "SELECT USER_ID, USER_FIRSTNAME, USER_SURNAME FROM UserTable WHERE USER_ID = '" & user_id & "' AND USER_PWD='"& user_pwd &"';"

rs.Open sqlread, con
Do while not rs.eof
  FName=rs.fields("USER_FIRSTNAME")
rs.Movenext
Loop 
```

# cakephp - CakePHP 1.3 清除单个视图的缓存

> ID：15291967
> 
> 赞同：0
> 
> 时间：2013-03-08T10:34:45.603
> 
> 标签：cakephp, caching, view

在控制器中我可以使用`clearCache();`，但它会删除整个 /cache/views/ 目录。有没有办法只删除当前的pageid缓存？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:18:06.167

您应该阅读有关它的 docblock / 文档

```
function clearCache($params = null, $type = 'views', $ext = '.php') {} 
```

它为 $params 声明：

```
@param string|array $params As String name to be searched for deletion, if name is a directory all files in
 *   directory will be deleted. If array, names to be searched for deletion. If clearCache() without params,
 *   all files in app/tmp/cache/views will be deleted 
```

# php - 在 PHP 中更改 manifest.plist 值

> ID：15291969
> 
> 赞同：0
> 
> 时间：2013-03-08T10:34:51.937
> 
> 标签：php, xml, simplexml, manifest

我有一个 manifest.plist 文件（来自 Apple）。这是一个 XML 文件。这是结构的一个例子：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
  <dict>
    <key>id</key>
    <string>3214</string>
    <key>name</key>
    <dict>
      <key>en</key>
      <string>Hello World</string>
      <key>jp</key>
      <string>Hello World JP</string>
    </dict>
    <key>kilometers</key>
    <integer>430</integer>
    <key>cloud</key>
    <true/>
  </dict>
</plist> 
```

我可以使用 simplexml 将此 XML 作为对象。现在我想更改我的 XML 中的一些值（例如 cloud 为 jp 字符串值的 false）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:56:27.297

> 现在我尝试使用 DOMElement 和 Xpath 查询 '/plist/dict/key[4]' 来获取云密钥。但是如何将其值更改为 false ？

你说的元素在这里：

```
 <key>cloud</key>
    <true/> 
```

而你想从 更改`<true/>`为`<false/>`。然而，这并*没有*改变值，而是用`<true/>`一个新节点替换元素节点，一个`<false/>`元素节点。

这（真的）不可能，`SimpleXML`因为它不能替换节点。

`DomDocument`您可以使用 Docs 功能来做到这[`DOMNode::replaceChild()`^(*一点*)](http://php.net/DOMNode.replaceChild)。

一个例子：

假设您有变量`$key`，并且它是`<key>`您通过 xpath 获取的元素。

```
$true  = $key->nextSibling;
$false = $key->ownerDocument->createElement('false');
$key->parentNode->replaceChild($false, $true); 
```

# asp.net - DeleteOnSubmit - 未找到或更改行

> ID：15291970
> 
> 赞同：1
> 
> 时间：2013-03-08T10:34:55.977
> 
> 标签：asp.net

```
//SelectUtilitiesCheckbox is bound to a complete list of the Utilitie_companies table
foreach (ListItem x in SelectUtilitiesCheckBox.Items)
{
    Select_Utility SU = rows.Where(r => r.Utility_Id == Convert.ToInt32(x.Value)).FirstOrDefault();
    bool initialValue = SU != null;

    if (x.Selected == true && initialValue == false)
    {
        // New qualification added so save it
        Select_Utility NewSelectUtility = new Select_Utility();
        NewSelectUtility.WorkId = tempWorkSiteId;
        NewSelectUtility.Utility_Id = System.Convert.ToInt32(x.Value);

        context.Select_Utilities.InsertOnSubmit(NewSelectUtility);
    }
    else if (x.Selected == false && initialValue == true)
    {
        // Removed old qualification so remove it in the database
        context.Select_Utilities.DeleteOnSubmit(SU);
    }
}

context.SubmitChanges(); 
```

我的 Q 是 - 使用 LINQ - 提交时插入工作正常，但是当我尝试使用 deleteOnSubmit 时，我得到一个

> 错误：用户代码未处理 ChangeConflictEception - 未找到或更改行。

当它到达 context.submit 但在 context.Select_Utilities.DeleteOnSubmit(SU) 中使用断点“Su”; 包含要删除的正确记录

关于为什么的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T10:57:53.227

Thanks to...

[System.Data.Linq.ChangeConflictException: Row not found or changed](https://stackoverflow.com/questions/805968/system-data-linq-changeconflictexception-row-not-found-or-changed)

I have solved the issue.

The problem being: one of my fields in the Db was nullable but not nullable in the DBML file. Changing records to suit solved the issue.

# c++ - `new (std::nothrow)` 是如何实现的？

> ID：15291971
> 
> 赞同：9
> 
> 时间：2013-03-08T10:34:57.843
> 
> 标签：c++, memory-management, new-operator

我有一个 C++ 程序，其中`new`运算符重载。问题是，如果我在`new`运算符中的分配失败，我仍在调用构造函数。我知道我可以通过投掷来避免这种情况`std::bad_alloc`，但我不想那样做。

我怎么能在我的重载`new`运算符中失败并且仍然不调用我的构造函数？本质上我想实现类似`new (std::nothrow)`.

这是一个例子来说明我的意思。**请注意，我正在测试的系统没有内存保护。所以访问`NULL`不会做任何事情**

*示例 1：重载 new 运算符*

```
#include <stdio.h>
#include <stdlib.h>
#include <memory>

class Test {

public:

    Test(void) {
        printf("Test constructor\n");
    }

    void print(void) {
        printf("this: %p\n", this);
    }

    void* operator new(size_t size, unsigned int extra) {

        void* ptr = malloc(size + extra);
        ptr = NULL; // For testing purposes
        if (ptr == NULL) {
            // ?
        }
        return ptr;
    }
};

int main(void) {

    Test* t = new (1) Test;            
    t->print();
    printf("t: %p\n", t);

    return 0;
} 
```

输出是：

```
$ ./a.out
Test constructor
this: 00000000
t: 00000000 
```

显然，在*failed**时调用了 constrcutor`new`*。

*示例 2：带有 new (std::nothrow) 的巨大类声明*

```
#include <stdio.h>
#include <stdlib.h>
#include <memory>

class Test {

    int x0[0x0fffffff];
    int x1[0x0fffffff];
    int x2[0x0fffffff];
    int x3[0x0fffffff];
    int x4[0x0fffffff];
    int x5[0x0fffffff];
    int x6[0x0fffffff];
    int x7[0x0fffffff];
    int x8[0x0fffffff];
    int x9[0x0fffffff];
    int xa[0x0fffffff];
    int xb[0x0fffffff];
    int xc[0x0fffffff];
    int xd[0x0fffffff];
    int xe[0x0fffffff];
    int xf[0x0fffffff];

public:

    Test(void) {
        printf("Test constructor\n");
    }

    void print(void) {
        printf("this: %p\n", this);
    }
};

int main(void) {

    Test* t = new (std::nothrow) Test;    
    t->print();
    printf("t: %p\n", t);

    return 0;
} 
```

输出是：

```
this: 00000000
t: 00000000 
```

显然，*当**failed时****没有****调用constrcutor**`new`*****。**

 **那么如何`new (std::nothrow)`在我的重载运算符中实现某种功能`new`呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T10:43:50.393

Whether the compiler checks for a null pointer after calling `operator new` or not, before calling the destructor, depends on whether the allocator function has a non-throwing exception specification or not. If not, the compiler assumes that `operator new` will throw if no memory is available. Otherwise, it assumes that `operator new` will return a null pointer. In your case, your `operator new` should be:

```
void* operator new( size_t size, unsigned int extra ) throw()
{
    //...
} 
```

or if you can count on C++11 support:

```
void* operator new( size_t size, unsigned int extra) noexcept
{
} 
```**

# java - 使用 sql server 在 jdbc 中进行连接池

> ID：15291973
> 
> 赞同：3
> 
> 时间：2013-03-08T10:35:02.373
> 
> 标签：java, jdbc, connection-pooling, jdbc-odbc

我正在尝试使用 java 从 Web 服务器通过 SQL Server 建立连接。它只是通过 sql 驱动程序打开连接，但是当多个用户尝试与公司的 Web 服务器连接时，由于流量过大，服务器速度变慢。所以我认为它必须使用连接池概念。我正在使用以下代码连接数据库

```
 try{   
     Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
       cnn     =java.sql.DriverManager.getConnection("jdbc:sqlserver://202.54.119.141:1433;Database=LCXERP" ,"shivam","shivbabaji");
     st1=cnn.createStatement();

    }
    catch(Excpetion ex)
  {
    ex.printStackTrace();
  } 
```

建议与数据库连接以避免拥塞的替代方式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T11:00:04.913

Connection Pooling can help you. There are various connection pooling avaible most common among them are `DBCP` connection pooling and `C3pO` connection pooling. You can refer [Sample connection pooling](http://support.microsoft.com/kb/313173) for your guidance . Also you can read more on the advantages of connection pooling [here](http://en.wikipedia.org/wiki/Connection_pool).In general connection pooling can reduce the number of connections made to the backend at a time thereby increasing the performance.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:02:00.523

我建议您使用 JNDI 代码来实现连接代码。应用程序服务器可以处理连接池。例如，在 weblogic 服务器中，您可以设置连接池大小。

不要重新发明轮子并使用 AS 功能。会帮助..

# java - EAR 文件需要包含所有 jar 的清单吗？

> ID：15291974
> 
> 赞同：0
> 
> 时间：2013-03-08T10:35:05.690
> 
> 标签：java, jakarta-ee, ear

为什么发布 EAR 时需要在 MANIFEST 文件中声明所有 JAR 名称？类路径应该不够吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:44:53.210

If you have an application in an EAR file, it is desireable that the application have its own classpath, independent of other applications on the server. If the classpath for the server was used for all applications, that could force all of them to use the same versions of all jars they needed, which would be a maintenance nightmare. If the application needs to use a set of jars that are specific to that application, the manifest file is the logical place to put them.

# c++ - cmake 和默认编译器

> ID：15291978
> 
> 赞同：2
> 
> 时间：2013-03-08T10:35:19.263
> 
> 标签：c++, gcc, g++, cmake

我最近将我的 OS X 更新为 Mountain Lion。不幸的是，FreeBSD 切换到了我需要的不支持 OpenMP 的编译器套件 (llvm/clang)，而 Apple 将该套件设置为默认编译工具。

幸运的是 OS X 10.8 包含一个旧的 gcc 4.2 编译器，它仍然可以用于一些遗留代码。

我使用 cmake (v2.8) 构建程序。为了使用 gcc 编译器，我首先尝试在 CMakeLists.txt 脚本中设置两个变量。更具体地说，我设置`CMAKE_C_COMPILER`和`CMAKE_CXX_COMPILER`。但是，设置这两个变量没有效果：cmake 一直使用不支持 OpenMP 的 llvm 编译器。

然后我尝试设置两个环境变量，`CC`并且`CXX`（在 .profile/.bashrc 脚本中）指向用于 CMake 变量的相同编译器。通过使用这两个变量，我可以编译我的源代码。

我的问题是：这两个 CMake 变量（CMAKE_..._COMPILER）有什么意义？我应该如何使用它们？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T10:49:32.000

这些变量确实可以使用，但是必须在编译器自动检测到**之前设置好。**您通常使用命令行或缓存初始化脚本来执行此操作：

```
# by setting CC anc CXX
CC=gcc-4.2 CXX=g++-4.2 cmake ...

# by passing the definitions of CMAKE_{C,CXX}_COMPILER to cmake directly
cmake -DCMAKE_C_COMPILER:FILEPATH=`which gcc-4.2` -DCMAKE_CXX_COMPILER:FILEPATH=`which g++-4.2` ...

# by passing a cache-initialization script
cmake -C init_cache.cmake 
```

文件`init_cache.cmake`包含以下内容的位置

```
set(CMAKE_C_COMPILER CACHE FILEPATH /usr/bin/gcc-4.2)
set(CMAKE_CXX_COMPILER CACHE FILEPATH /usr/bin/g++-4.2) 
```

# java - 如何将流从一个线程传递到另一个线程？也许我应该以不同的方式执行此操作？

> ID：15291980
> 
> 赞同：0
> 
> 时间：2013-03-08T10:35:22.590
> 
> 标签：java, multithreading, stream, outputstream, processbuilder

我有一个包装器，`ProcessBuilder`以便任何需要运行进程的类都可以使用它。
该类传递过程和参数并将返回结果。
结果将是`Process`我猜的或错误流的输出流。
我的问题是如何在线程之间传递流？我的意思是我正在做类似以下的事情：

```
String line=null;  
try {  
    while ( (line = br.readLine()) != null) {  
            if (pw != null)  
                    pw.println(line);                   
        }
} catch (IOException e) {             
    e.printStackTrace();  
}
if (pw != null)  
       pw.flush(); 
```

我想我应该`flush`但不应该关闭蒸汽，对吗？还是我应该以不同的方式做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:15:36.347

您可以将数据写入[ByteArrayOutputStream](http://docs.oracle.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html)并将其传递给调用者。完成对 BAOS 的写入后，关闭输入流并将输出流传递给调用者。调用者负责关闭/刷新 BAOS 并释放与其相关的任何内存。

# sql - 按具有 VARCHAR2 数据类型的 COLUMN 排序

> ID：15291981
> 
> 赞同：0
> 
> 时间：2013-03-08T10:35:24.163
> 
> 标签：sql, oracle-apex

我有一个表，用户可以添加和编辑现有记录。当用户输入新记录时，修订设置为“-”，因为它是初始草稿。当用户编辑一条记录并且它是一个“-”时，它会将修订设置为 1。之后，如果再次编辑它，它会执行修订 + 1，这将是 2。依此类推..

我在按修订排序的 Apex 报告中显示记录的历史记录。这一直有效，直到我达到版本 10，因为我现在得到以下信息：

9
8
7
6
5
4
3
2
10
1'-
'

10 应该从 9 开始，但它介于 2 和 1 之间。这是因为我的数据类型设置为 VARCHAR2 而不是 NUMBER。是否可以像这样正确订购：

10
9
8
7
6
5
4
3
2
1'-
'

注意：修订可能会不断增长，甚至可能达到 100。最简单的方法是将数据类型更改为 NUMBER 并使用 0 代替“-”。但是，如果可以的话，我更喜欢破折号。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T10:38:37.743

我建议将其转换为数字并使用零或 null 而不是`'-'`. 数字列也有助于比较哪个版本更高或查找相邻版本：

```
select...
    where version_a > version_b

select...
    where version_a = version_b + 1 
```

如果你有一个`varchar`字段，那么任何类似的事情都需要特殊的逻辑。在我看来，如果你想显示`-`为零，你可以在显示逻辑中轻松处理，而不是将其放入数据库中。

但是，如果您确实需要将其保留为角色，则应该可以执行以下操作：

```
order by case when column = '-' then 0 else to_number(column) end descending 
```

您需要`'-'`作为特殊情况进行检查，因为将其转换为数字会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:43:00.780

使用数字类型，然后出于显示目的，您可以使用 a 包装该字段的返回值
`CASE WHEN field=0 THEN '-' ELSE field-converted-to-string END as revisionStr`
（使用适当的函数将字段转换为字符串！）

对“字段”进行排序将自动为您工作（DESC），因为它只是一个普通数字。

**编辑**
示例：

```
SELECT
  CASE WHEN revision=0 THEN
    '-' 
  ELSE
    RTrim(CAST(revision AS varchar(30))) 
  END AS revisionStr
FROM table
ORDER by revision DESC 
```

# c# - C# 中的用户控件文本框验证？

> ID：15291983
> 
> 赞同：0
> 
> 时间：2013-03-08T10:35:29.403
> 
> 标签：c#, winforms, validation, user-controls, textbox

在我的用户控件中，我有一个不是从 TextBox 继承的 TextBox，我正在做一个

数字验证（仅允许数字）

```
public delegate void usercontrolError(string message);
    public event usercontrolError onerror;

 Private void txtLocl_KeyPress(object sender, KeyPressEventArgs e)
{
    if(e.KeyChar != '\b')
    {
        if(!char.IsDigit(e.KeyChar))
        {
        e.Handled=true;
        }
        else
       {
         onerror.Invoke("Enter Digits Only");
       }
    }
} 
```

在表格中我写了以下代码

```
 public Form1()
 {
     txtLocl.onerror += new ciscontrols.UserControl.usercontrolError(mtbDtTmPk1_onerror);
 }

    void UserControl_onerror(string message)
    {
        epfrm2.SetError(mtbDtTmPk1, message);
        //throw new NotImplementedException();
    } 
```

我把上面的代码写在Form中。现在我不想在表单中编写任何代码。但 errorProvider 仅在 Form1 中。我怎么知道。用户不能在 Form1 中编写任何代码。但 Form ErrorProvider 将起作用。

# c - 配置交叉编译器以使用自定义库搜索路径

> ID：15291985
> 
> 赞同：4
> 
> 时间：2013-03-08T10:35:32.307
> 
> 标签：c, gcc, arm

我为 ARM（具体来说是 Raspberry Pi）创建了一个跨工具链。它的图书馆检索顺序如下：

```
armv6j-hardfloat-linux-gnueabi-gcc -print-search-dirs | grep libraries | sed "s/:/\n/g"

libraries
 =/usr/lib/gcc/armv6j-hardfloat-linux-gnueabi/4.7.2/
/usr/lib/gcc/armv6j-hardfloat-linux-gnueabi/4.7.2/../../../../armv6j-hardfloat-linux-gnueabi/lib/armv6j-hardfloat-linux-gnueabi/4.7.2/
/usr/lib/gcc/armv6j-hardfloat-linux-gnueabi/4.7.2/../../../../armv6j-hardfloat-linux-gnueabi/lib/
/usr/armv6j-hardfloat-linux-gnueabi/lib/armv6j-hardfloat-linux-gnueabi/4.7.2/
/usr/armv6j-hardfloat-linux-gnueabi/lib/
/usr/armv6j-hardfloat-linux-gnueabi/usr/lib/armv6j-hardfloat-linux-gnueabi/4.7.2/
/usr/armv6j-hardfloat-linux-gnueabi/usr/lib/ 
```

我想补充

```
/usr/armv6j-hardfloat-linux-gnueabi/usr/local/lib/ 
```

给它。据我所知，交叉编译器会忽略 LIBRARY_PATH 并具有固定的搜索顺序。但是 - 有没有可能在构建时改变这个搜索顺序 - 即在创建跨工具链时？也许一些 ./configure 用于 gcc 的选项，或者环境变量呢？

我见过一些跨工具链，它们具有非标准（但仍然是固定的）库搜索顺序。它们是由 ./configure 选项或类似机制指定的，还是被 gcc 破解来实现的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:03:53.947

gcc takes a -L option which can specify the library path.

If your code has a makefile there is often a line in there you can add user-paths to.

# php - 加载模型和库需要太长时间

> ID：15291987
> 
> 赞同：1
> 
> 时间：2013-03-08T10:35:39.320
> 
> 标签：php, codeigniter, codeigniter-2

我一直在 Codeigniter 上构建一个大型社交应用程序。有一个函数可以加载 4 个模型和 1 个库（5 个资源），然后执行一些 PHP 逻辑和数据库插入/选择等。这 5 个资源是特定于该函数的，不需要经常使用，因此无法自动加载它。

```
function abc(){

  log_message('error' , 'block 1'.date('Y-m-d H:i:s'));

  $this->load->model('model1');
  $this->load->model('model2');
  $this->load->model('model3');
  $this->load->model('model4');
  $this->load->library('lib1');

  log_message('error' , 'block 2'.date('Y-m-d H:i:s'));
  // Some DB queries performed here

  if(){
     // Some PHP code
  }else{
    // Some PHP code
  }

 // Some DB queries performed here

 log_message('error' , 'block 3'.date('Y-m-d H:i:s'));
} 
```

通过使用 Codeigniter 的 Profiling Class，我发现整个函数执行大约需要 8 秒，而其中的 DB 查询只需要 1 秒。在我的代码中许多点的记录时间之后，我发现在 8 秒中，仅加载这些库和模型就花费了大约 6.5 秒，而代码的处理只花费了 1 多秒。

通过对我的函数进行分析并以特定的时间间隔记录时间戳，我发现我的总函数 abc 需要 8 秒才能执行。但是块 1 和块 2 之间的时间差是 7 秒，而块 2 和块 3 之间的时间差只有 1 秒。所以至少我知道它的加载资源需要很多时间我不知道为什么:(

8 秒的功能执行是不可接受的，我无法确定解决方案。请帮忙……</p>

该站点托管在具有 512 MB RAM 的 DigitalOcean 云上，只有 2 个用户对其进行测试。我是否需要增加 RAM 才能实现这一点。我怎样才能加快这个加载时间...</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:27:43.830

很难说“你怎么能加快加载时间”而不检查你的 lib 和模型代码，无论如何你应该能够测试你的应用程序基准，只需放置：

```
$this->output->enable_profiler(true); 
```

在视图、模型或控制器内部。

试试看

# c++ - 如何在 lldb 命令行中调用 C++ 对象的公共函数？

> ID：15291990
> 
> 赞同：2
> 
> 时间：2013-03-08T10:35:45.720
> 
> 标签：c++, xcode, debugging, lldb

我正在尝试测试 C++ 函数调用的结果。该函数是公共的，调试器位于对象是成员的调用中。这是类接口：

```
class NumerialDispersion {
    MeshSystem mesh;

    vector<double> b_k;
    vector<double> c_k;

public:
    void setupMeshSystem();
    void setUpAnalysis();
    void calculateK();
}; 
```

我需要测试我在 MeshSystem 中声明的函数。MeshSystem类的接口如下：

```
class MeshSystem {

    Element mainMeshElement;

public:
    MeshSystem(Element element, double tStep);

    double get_b_k(uint index);

}; 
```

我需要在 lldb 中使用不同的索引值执行函数 get_b_k()。我正在使用 Xcode 4.6 用户 Mountain Lion。

lldb 是否支持这样的表达式？如果是，任何人都可以帮助我吗？

非常感谢提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-30T15:45:12.447

任一种类型

```
p mesh.get_b_k(1) 
```

或者

```
expr -- mesh.get_b_k(1) 
```

请注意，该函数可能根本不存在于目标中，即未使用且其主体未编译。在这种情况下，以某种虚假的方式使用它，或使其可导出（使用**属性**((visibility ("default"))) 进行注释）