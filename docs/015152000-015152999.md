# StackOverflow 问答 15152000-15152999

# python - 如何从fabric def返回

> ID：15152001
> 
> 赞同：2
> 
> 时间：2013-03-01T06:37:16.227
> 
> 标签：python, fabric, os.system

```
def diffFile(path):
    firstFile=run("md5sum "+path)
    return firstFile 
```

我想执行上述方法并在python的调用方法中获得返回“firstFile”到目前为止没有成功尝试了所有可能的方式。全局也无法将返回发送到主调用..织物创建另一个进程，所以还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:07:40.243

只需使用 subprocess 模块来调用外部文件。调用外部文件时有几种方法可以处理不同的输出流。

```
def diffFile(path):
  return subprocess.check_output("md5sum "+path) 
```

# session - 用户登录时使用不同的数据库

> ID：15152003
> 
> 赞同：0
> 
> 时间：2013-03-01T06:37:24.547
> 
> 标签：session, symfony, database-connection

在 Symfony 2.0 中，我需要为特定用户更改数据库，直到他注销，但代码是相同的。

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:01:44.387

查看[Symfony2，Dynamic DB Connection/Early override of Doctrine Service](https://stackoverflow.com/questions/15108732/symfony2-dynamic-db-connection-early-override-of-doctrine-service/15110867#15110867)

它与另一个略有重复，但特定于使用请求参数，并且答案在它的服务接线中提供了更多详细信息。不确定它是否对其他答案有帮助，但无论如何都要检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:30:02.793

这是可能的，但不应该按照您描述的方式进行。

您将始终需要不会改变的连接：将处理身份验证的数据库。

然后对于每个用户，您可能有一个特定的数据库。登录后，您应该拥有连接到用户数据库所需的帐户详细信息（数据库详细信息）。

拥有它后，请使用中描述的方法之一

看一看：[Symfony 2：多动态数据库连接](https://stackoverflow.com/questions/6409167/symfony-2-multiple-and-dynamic-database-connection)

它应该很简单。

PS：除了永久连接，您还可以让用户在 SSO（单点登录）环境中由另一台服务器进行身份验证 - 这是高级主题。然后，用户数据库的连接详细信息应该来自该服务器。

# asp.net - 从子 iframe src 页面访问母版页

> ID：15152004
> 
> 赞同：0
> 
> 时间：2013-03-01T06:37:28.627
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, asp-classic

我有两个页面“childpage”和“pageforIFrame”。这里的 childpage 是母版页“Master1”的子页。在子页面上我有一个 IFRAME，它的 src 是 pageforIFrame。在 pageforIFrame 按钮的按钮单击上，我想要母版页内的标签。是否可以？

![在此处输入图像描述](../Images/6709963df25cd0546afaa5dedcd928c6.png)

提前致谢.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T06:43:11.843

您可以像这样从 iframe 访问父页面。考虑到您的 myLabel 有 id="myLabel" 将此代码放在您的 iframe 脚本标签中以单击按钮

```
alert(top.document.getElementById('myLabel')); 
```

并更改标签

```
top.document.getElementById('myLabel').innerHTML = "Hello"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T06:43:29.320

> 是否可以？

是的，如果这两个应用程序托管在同一个域上。您可以像这样从 iframe 访问父 DOM：

```
window.parent.document.getElementById... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T07:07:21.773

```
try to write this
$("#IfrmaeID").contents().find("#ElementID")
alert this and if this give object you can assign any value. 
```

# python - Python webbrowser - 在 Windows 上注册浏览器

> ID：15152022
> 
> 赞同：1
> 
> 时间：2013-03-01T06:38:53.470
> 
> 标签：python, browser

我正在尝试注册 Firefox 浏览器以在 Windows 上运行。根据 Webbrowser 的文档，“如果环境变量 BROWSER 存在，它被解释为覆盖浏览器的平台默认列表，作为 os.pathsep 分隔的浏览器列表按顺序尝试”。我尝试设置它，但它没有影响。

```
Z:\>SET BROWSER=C:\Program Files (x86)\Mozilla Firefox\firefox.exe %s

Z:\>python3
Python 3.3.0 (v3.3.0:bd8afb90ebf2, Sep 29 2012, 10:55:48) [MSC v.1600 32 bit (I
tel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>>
>>> import webbrowser
>>>
>>> webbrowser.open('http://google.com')
True
>>> 
```

webbrowser.get("firefox") 也不起作用

如何让 webbrowser 启动 Firefox？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:00:50.927

您可能需要设置静态环境病毒，您可以在我的计算机的属性中执行此操作...是否有帮助由您自己弄清楚（在这里工作...）。

另一种方法：

```
import webbrowser

webbrowser.get("open -a C:\\Program F~\\Mozilla Firefox\\firefox.exe %s")
webbrowser.open('http://google.com') 
```

# c++ - valgrind 如何以及何时检测内存泄漏

> ID：15152029
> 
> 赞同：4
> 
> 时间：2013-03-01T06:39:16.440
> 
> 标签：c++, memory, valgrind, memory-leaks

我的代码中有内存泄漏。随着流的触发，堆继续增加。在我的代码中，我有一个 while(1) 循环，它基本上在队列中等待。当从 web 服务触发该流时，传入的 msg 被推送到队列中，并调用 c++ 中的一个方法，该方法获取消息并以图形的形式实现流。

对于每个触发器，我发现堆中的内存增加了 604kb。我需要解决这个问题。

我停止了服务 [在产品中运行的二进制文件]。

我用 valgrind 启动了服务 [将二进制文件作为 valgrind 的输入]

```
valgrind  --log-file=/home/valgrind-output.txt --leak-check=full <service binary> 
```

但是，当二进制文件运行时，它不会显示任何泄漏，只有当我停止服务时，我才会看到一些泄漏。但这些是一次性泄漏，一旦我们重新启动服务就会被清除。[二进制]。

当每个流程被触发时，我有意在流程开始时添加了一个分配。

```
 int *p = new int[10]; 
```

并添加了一个日志。每次触发流程时，我都会看到日志打印。但我没有看到 valgrind 在输出文件中出现任何泄漏。

如何检查每个流调用之间的泄漏？valgrind 是否仅在调用 main 结束时才消除泄漏？在这种情况下，如何动态检查我的代码导致了什么泄漏。如果我需要安装任何其他检测器？请建议。这会很有帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T06:50:28.940

valgrind 仅在程序退出时检查内存泄漏。此时，它会跟踪从堆栈和全局变量中可访问的所有内存，并且任何无法访问的内容都被认为是泄漏。

如果你想在一个长时间运行的程序中发现泄漏，你需要插入一个退出调用（中止程序），它会在它运行一段时间后发生，它会告诉你当时有什么泄漏。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-01T06:48:01.277

使用 -massif 它会为您提供详细的输出，其中内存正在与所有调用堆栈一起分配。

# mysql - 在 mysql 中加入两个表时，我收到错误为“'on 子句'中的未知列'm.machinenumber'”？

> ID：15152036
> 
> 赞同：1
> 
> 时间：2013-03-01T06:40:01.433
> 
> 标签：mysql, sql, join

![在此处输入图像描述](../Images/ce72719903ab074bf25ca952294548f2.png)![在此处输入图像描述](../Images/b5c862288144194091f606599e77fbed.png)在加入两个表时，我执行了一个查询，但它没有正确显示第二个表数据，而是显示垃圾值..

我使用的查询是，

```
select p.machinenumber,
max(case when (p.shift)=1 then xxxx end) s1_xxxx,
max(case when (p.shift)=2 then xxxx end) s2_xxxx,
avg(case when (p.shift)=1 then yyyy end) s1_yyyy ,
avg(case when (p.shift)=2 then yyyy end) s2_yyyy 
from pdata p
inner  join (select  count(case when (shift)=1 and (ename)=1  then ename end) s1_wa,
count(case when (shift)=1 and (ename)=2 then errorname end) s1_we,
count(case when (shift)=2 and (ename)=1 then errorname end) s2_wa,
count(case when (shift)=2 and (ename)=2 then ename end) s2_we,
count(case when (shift)=1 and (ename)=0 then ename end) s1_merror,
count(case when (shift)=2 and (ename)=0 then ename end) s2_merror  from mstop)m
on p.mnumber=m.mnumber
where date(p.proddate)='2013-02-25'; 
```

请解决这个问题？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T06:41:43.110

您还需要返回`mnumber`. `m.mnumber`在 mstop 表的内部连接中，您还需要返回`mnumber`才能根据`mnumber`.

```
inner  join (select  count(case when (shift)=1 and (ename)=1  then ename end) s1_wa,
count(case when (shift)=1 and (ename)=2 then errorname end) s1_we,
count(case when (shift)=2 and (ename)=1 then errorname end) s2_wa,
count(case when (shift)=2 and (ename)=2 then ename end) s2_we,
count(case when (shift)=1 and (ename)=0 then ename end) s1_merror,
count(case when (shift)=2 and (ename)=0 then ename end) s2_merror,
     mnumber  from mstop)m
on p.mnumber=m.mnumber 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T06:42:14.040

这是因为您没有将列*投影*`mnumber`到子查询上。您需要`SELECT`子查询中的列名才能在连接上可见。不要忘记`GROUP BY`在查询中添加子句。

```
select  p.machinenumber,
        max(case when (p.shift)=1 then xxxx end) s1_xxxx,
        max(case when (p.shift)=2 then xxxx end) s2_xxxx,
        avg(case when (p.shift)=1 then yyyy end) s1_yyyy ,
        avg(case when (p.shift)=2 then yyyy end) s2_yyyy 
from    pdata p
        inner  join 
        (
            select  mnumber,
                    count(case when (shift)=1 and (ename)=1  then ename end) s1_wa,
                    count(case when (shift)=1 and (ename)=2 then errorname end) s1_we,
                    count(case when (shift)=2 and (ename)=1 then errorname end) s2_wa,
                    count(case when (shift)=2 and (ename)=2 then ename end) s2_we,
                    count(case when (shift)=1 and (ename)=0 then ename end) s1_merror,
                    count(case when (shift)=2 and (ename)=0 then ename end) s2_merror  
            from    mstop
            GROUP   BY mnumber
        ) m on p.mnumber=m.mnumber
where   date(p.proddate)='2013-02-25'
GROUP   BY  p.machinenumber 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T06:41:40.987

如果垃圾来自第二张桌子，请尝试`LEFT JOIN`代替`INNER JOIN`

# binary - 二进制补码 8 位有符号幅度，二进制

> ID：15152039
> 
> 赞同：0
> 
> 时间：2013-03-01T06:40:22.447
> 
> 标签：binary, signed

所以这是我教科书中的问题之一，我们还没有到那里，但我对这一切是如何运作的很感兴趣，

对于这里的第一点，我对补码的理解是翻转，所以在有 1 的地方放 0，在有 0 的地方放 1。这必须是 8 位，所以我在开始时在二进制中添加了一个零 Therefre 01001001 写下 +73 的以下二进制表示：

```
8-bit unsigned: 01001001
8-bit signed-magnitude: 01001001
8-bit one's complement: 10110110
8-bit two's complement: 10110111
8-bit excess-128: 10110111 
```

这些是我想出的答案，但我很确定我做错了。对此有何澄清？

其次，我到底是如何用负数来做的，所以-73，二进制文件只是-01001001，所以我认为这是有符号的，你是否使用与上述相同的技术（假设我得到了正确的）

```
8-bit signed-magnitude: -01001001
8-bit one's complement: 
8-bit two's complement: 
8-bit excess-128: 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T06:56:55.170

+73 在您命名的所有表示中都是 01001001，*除了*excess-128。超过 128 为 11001001（加 128）。正数的符号幅度、一个的补码和二进制的补码都相同，只有负数不同。这些表示中的 -73 值为：

```
8-bit sign magnitude   11001001
8-bit one's complement 10110110
8-bit two's complement 10110111
8-bit excess-128       00110111 
```

一个补码“翻转所有位”是您如何在一个补码表示法中否定一个数字。因此，如果您有 n，要获得 -n，您将翻转所有位。

“翻转所有位并加 1”是您否定二进制补码中的数字的方式。

二进制补码和二进制补码都有一个奇数。对于一个补码是 -0（所有位都设置），这实际上与 0 相同 - 或者您可以将其视为无效和特殊情况否定 0。对于二进制补码，即 -2^(n-1) -- 128 表示 8 位 - 这是一个由于溢出而对自身取反的数字。

# eclipse - mysql驱动日食

> ID：15152042
> 
> 赞同：-1
> 
> 时间：2013-03-01T06:40:36.947
> 
> 标签：eclipse, jdbc

嗨，这个问题已被问过好几次，我搜索了所有这些，但一切都是徒劳的。我有一个在 Eclipse 中作为 Java 应用程序运行的简单 JDBC 程序。我将 MySQL 连接器放在构建路径中。但它显示`driver not found`。我在互联网上搜索了整整两天。每个人都说这是构建路径的问题。我确定 1000 次这是构建路径的问题。

使用 Eclipse Juno，MySQL 连接器 5.1（我也试过 5.0）。但所有这些努力都是徒劳的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:25:38.567

下面列出的过程是从头开始完成的，因此它应该适合您。

1.  创建一个 Java 项目。
2.  向项目中添加一个文件，例如“JDBCexample”。
3.  添加此代码：

    ```
    import java.io.*;

    //STEP 1\. Import required packages
    import java.sql.*;

    public class JDBCexample {
       // JDBC driver name and database URL
       static final String JDBC_DRIVER = "com.mysql.jdbc.Driver";  
       static final String DB_URL = "jdbc:mysql://localhost/EMP";

       //  Database credentials
       static final String USER = "user1";
       static final String PASS = "user1";

       public static void main(String[] args) {
       Connection conn = null;
       Statement stmt = null;
       try{
          //STEP 2: Register JDBC driver
          Class.forName("com.mysql.jdbc.Driver");

          //STEP 3: Open a connection
          System.out.println("Connecting to database...");
          conn = DriverManager.getConnection(DB_URL,USER,PASS);

          //STEP 4: Execute a query
          System.out.println("Creating statement...");
          stmt = conn.createStatement();
          String sql;
          sql = "SELECT id, first, last, age FROM Employees";
          ResultSet rs = stmt.executeQuery(sql);

          //STEP 5: Extract data from result set
          while(rs.next()){
             //Retrieve by column name
             int id  = rs.getInt("id");
             int age = rs.getInt("age");
             String first = rs.getString("first");
             String last = rs.getString("last");

             //Display values
             System.out.print("ID: " + id);
             System.out.print(", Age: " + age);
             System.out.print(", First: " + first);
             System.out.println(", Last: " + last);
          }
          //STEP 6: Clean-up environment
          rs.close();
          stmt.close();
          conn.close();
       }catch(SQLException se){
          //Handle errors for JDBC
          se.printStackTrace();
       }catch(Exception e){
          //Handle errors for Class.forName
          e.printStackTrace();
       }finally{
          //finally block used to close resources
          try{
             if(stmt!=null)
                stmt.close();
          }catch(SQLException se2){
          }// nothing we can do
          try{
             if(conn!=null)
                conn.close();
          }catch(SQLException se){
             se.printStackTrace();
          }//end finally try
       }//end try
       System.out.println("Goodbye!");
    }//end main
    }//end FirstExample 
    ```

4.  下载[此](http://www.mysql.com/downloads/mirror.php?id=412052)文件。

5.  提取文件“mysql-connector-java-5.1.23-bin.jar”并将其添加到项目的构建路径中。（右键单击 --> 构建路径 --> 配置构建路径 --> 库 --> 添加外部 JAR）。

6.  创建适当的表。以下是我使用的：模式名称是'emp'。表名是“员工”。 ![在此处输入图像描述](../Images/bcd23ad8b69967fbf122f9e5a6db4175.png)

7.  构建项目并运行它。

你应该能够得到这样的结果：

```
 Connecting to database...
    Creating statement...
    ID: 100, Age: 18, First: Zara, Last: Ali
    ID: 101, Age: 25, First: Mahnaz, Last: Fatma
    ID: 102, Age: 30, First: Zaid, Last: Khan
    ID: 103, Age: 28, First: Sumit, Last: Mittal
    Goodbye! 
```

如果您愿意，请尝试将其用作您自己的代码的模板。如果您遇到任何问题，请在下面发布。

# ios - Zbar sdk 扫描仪无法正常工作

> ID：15152050
> 
> 赞同：1
> 
> 时间：2013-03-01T06:41:10.137
> 
> 标签：ios, objective-c, ipad, ios5, zbar-sdk

在我的应用程序中，我集成了 Zbar SDK 扫描器，虽然扫描通常可以正常工作，但我的情况有时是 didfinishpickingmediawithInfo: 委托方法触发两次。这是我在单音类中的代码。

```
-(void)scanProductBarCode
{

        ZBarReaderViewController *reader = [ZBarReaderViewController new];
        reader.readerDelegate = self;

        if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
            reader.supportedOrientationsMask = ZBarOrientationMaskLandscape;
        else
            reader.supportedOrientationsMask = ZBarOrientationMaskPortrait;

        ZBarImageScanner *scanner = reader.scanner;
        [scanner setSymbology: ZBAR_UPCA config: ZBAR_CFG_ENABLE to: 1];
        [scanner setSymbology: ZBAR_CODE39 config: ZBAR_CFG_ADD_CHECK to: 0];

}

#pragma mark - Scanner delegate methods

- (void) imagePickerController: (UIImagePickerController*) reader didFinishPickingMediaWithInfo: (NSDictionary*) info
{
    id<NSFastEnumeration> results = [info objectForKey: ZBarReaderControllerResults];
    ZBarSymbol *symbol = nil;
    for(symbol in results)
        break;

    barCodeString = [[NSString alloc] initWithString:symbol.data];

    if(self.delegate)
        [self.delegate getBarcodeString:barCodeString];

    [reader dismissModalViewControllerAnimated:YES];

} 
```

看这个屏幕截图：

![在此处输入图像描述](../Images/e1fe5d49618e058d498fd82853ba9d0f.png)

在后台，扫描仪在两次发生的情况下仍然像这样运行..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T06:51:57.603

我遇到了同样的问题。我在我的类中添加了一个`BOOL`实例变量，名为`_processing`. 然后我这样做了：

```
- (void)imagePickerController:(UIImagePickerController*)reader didFinishPickingMediaWithInfo:(NSDictionary*)info
{
    if (_processing) return;

    id<NSFastEnumeration> results = [info objectForKey:ZBarReaderControllerResults];
    ZBarSymbol *symbol = nil;
    for(symbol in results) {
        _processing = YES;
        barCodeString = symbol.data;

        if(self.delegate) {
            [self.delegate getBarcodeString:barCodeString];
        }

        break;
    }

    [reader dismissModalViewControllerAnimated:YES];
} 
```

这确保只处理第一个调用。`_processing`如果您计划多次重用视图控制器，则可能需要重置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:19:38.913

由于 ZBarReaderViewController 以连续模式扫描图像，因此在您关闭 ZBarReaderViewController 之前，可能会扫描图像两次。您可以尝试使阅读器（ZBarReaderViewController *reader）成为您的类的实例变量，并在委托方法中：

```
- (void)imagePickerController:(UIImagePickerController*)reader didFinishPickingMediaWithInfo:(NSDictionary*)info
{
    // Stop further scanning
    [reader.readerView stop];
    ...
    //Continue with processing barcode data.
} 
```

# batch-file - 从命令行以管理员身份运行

> ID：15152051
> 
> 赞同：1
> 
> 时间：2013-03-01T06:41:29.207
> 
> 标签：batch-file, admin, uac

为了帮助我的计算机更快地启动，我创建了一个简单的批处理文件，它可以打开我想要的程序，而不是在我有时不想要它们的时候在启动时全部打开。

```
@ECHO OFF

cd "C:\Users\Aaron\Documents\Documents"
start SSS.lnk

cd "C:\Program Files (x86)\puush"
start puush.exe

cd "C:\Users\Aaron\AppData\Roaming\Google\Google Talk\"
start googletalk.exe

cd "C:\Users\Aaron\AppData\Local\Facebook\Messenger\2.1.4651.0\"
start FacebookMessenger.exe

cd "C:\Program Files\Synergy\"
start synergy.exe

cd "C:\Program Files (x86)\Skype\Phone\"
start Skype.exe

cd "C:\Program Files (x86)\Miranda IM\"
start miranda32.exe 
```

然而，

```
cd "C:\Users\Aaron\Documents\Documents"
start SSS.lnk 
```

是一项设置为 的服务，`Manual`我自己启动它，它需要以管理员身份运行才能启动。在此之前有什么要添加的以管理员​​身份运行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T06:45:21.643

您可能希望看看*[Runas](http://technet.microsoft.com/en-us/library/cc771525%28WS.10%29.aspx)*。

简短回答：您可以使用 runas.exe：

```
C:\>runas /user:<localmachinename>\administrator cmd 
```

或者

```
runas.exe /user:administrator "full qualified path to your exe" 
```

对于最后一个cmd，你可以添加`/savecred`保存管理员的密码（不是我说这是个好主意）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-15T11:43:12.490

解决方法：创建脚本的快捷方式。转到属性，快捷方式，高级。勾选“以管理员身份运行”。

你去吧；每次您通过快捷方式访问时，它都会以管理员身份打开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-13T15:55:16.893

有一些误解：

1.  如何获取本地机器名

    有很多方法，其中一些是：

    一个。`c:\>hostname`或者

    湾。`c:\>echo %computername%`

2.  `runas [...]`如果您没有为 Windows 设置密码，则无法使用命令。

    `1327: Logon failure: user account restriction. Possible reasons are blank passwords not allowed, logon hour restrictions, or a policy restriction has been enforced.`

# php - 按下后退按钮会将登录的用户重定向到注销？

> ID：15152052
> 
> 赞同：0
> 
> 时间：2013-03-01T06:41:32.427
> 
> 标签：php, javascript, login, logout

我有一个带有用户名和密码的日志系统，在用户使用用户名和密码登录后，如果我按下后退按钮，它会将我重定向到登录页面。如何在php中防止这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T06:55:01.020

首先，您要使页面过期并防止它们被浏览器缓存：

```
<?
//Set no caching
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT"); 
header("Cache-Control: no-store, no-cache, must-revalidate"); 
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");
?> 
```

其次，您应该检查用户是否已登录，如果已登录，请将其重定向回上一页，如下所示：

```
// SET REFERRER

    function strleft($s1, $s2) { 
        return substr($s1, 0, strpos($s1, $s2));
    }   

    function selfURL() { 
        if(!isset($_SERVER['REQUEST_URI'])) { 
           $serverrequri = $_SERVER['PHP_SELF']; 
        }
        else { 
           $serverrequri = $_SERVER['REQUEST_URI']; 
        } 
        $s = empty($_SERVER["HTTPS"]) ? '' : ($_SERVER["HTTPS"] == "on") ? "s" : ""; 
        $protocol = strleft(strtolower($_SERVER["SERVER_PROTOCOL"]), "/").$s; 
        $port = ($_SERVER["SERVER_PORT"] == "80") ? "" : (":".$_SERVER["SERVER_PORT"]); 
        $_SESSION['ref'] = $protocol."://>/".$_SERVER['SERVER_NAME'].$port.$serverrequri; 
    }               

selfURL(); 
```

然后

`header("Location: " . $_SESSION['ref']);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T06:46:16.157

您必须检查用户的会话。当会话存在时给出用户已经登录的警告或将用户重定向到 index.php 或其他东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T06:57:19.540

根据您的评论，您建议您真正要问的问题是如何禁用后退按钮？

这在 php 中绝对是不可能的，我认为可能根本不可能，因为它是由浏览器控制的。JavaScript 为您提供了一些控制，因此您可能会找到忽略或禁用按钮的代码。

谷歌搜索“JavaScript 禁用后退按钮”应该会给你一些结果。

# jquery - 如何在提交表单时使用 JQuery 禁用保存按钮

> ID：15152056
> 
> 赞同：0
> 
> 时间：2013-03-01T06:41:47.443
> 
> 标签：jquery, razor, asp.net-mvc-4, submit

我的 MVC 应用程序中有一个数据输入表单作为剃刀视图。此视图包含一些输入控件、验证器和一个提交按钮。当用户点击提交按钮时，它会执行验证，如果其中任何一个失败，用户提交方法就会终止。当所有的验证都满足时，表单就会被提交，但是由于一些业务逻辑的执行需要更多的时间。现在我不希望用户在此期间允许点击提交按钮。所以提交按钮应该被禁用，一旦提交完成，它应该被重新启用。

我怎样才能做到这一点？我想我需要为此编写 JQuery，但不确定要处理哪个事件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T06:45:52.720

没有看到 HTML... 或 javascript...

```
$('form').submit(function(){
    var $submit = $(this).find('input[type=submit]').prop('disabled', true);

    $.ajax({
        url: 'foo',
        //... the rest...

        complete: function(){
            $submit.prop('disabled', false);
        }
    });
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T06:45:34.563

尝试以下操作：

```
$("form").submit(function() {
    var form = this;
    setTimeout(function() {
       $(':submit', form).attr('disabled', true);
    }, 50)
}); 
```

# c# - ScrollViewer 边框 (Windows Phone 7)

> ID：15152057
> 
> 赞同：0
> 
> 时间：2013-03-01T06:42:03.017
> 
> 标签：c#, windows-phone-7, scrollviewer

我的 Windows Phone 页面上有一个 ScrollViewer。我想明确表明存在滚动的可能性。默认情况下，控件本身不显示任何可以向用户提示空间可滚动的内容。例如，是否可以始终在右侧显示滚动条？同样，默认情况下，它仅在用户想要并尝试滚动时显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T06:57:20.803

`<ScrollViewer VerticalScrollBarVisibility="Visible">`不能在 Windows 手机中工作。我认为您可以更改 ScrollViewer 的 ControTemplate 并使滚动条可见。

编辑：

示例如何更改 ScrollViewer 的控制模板。我是从 msdn 得到的

```
<Style x:Key="LeftScrollViewer" TargetType="ScrollViewer">

        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ScrollViewer">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <ScrollContentPresenter Grid.Column="1"/>

                        <ScrollBar Name="PART_VerticalScrollBar"
        Value="{TemplateBinding VerticalOffset}"
        Maximum="{TemplateBinding ScrollableHeight}"
        ViewportSize="{TemplateBinding ViewportHeight}"
        Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"/>
                        <ScrollBar Name="PART_HorizontalScrollBar"
        Orientation="Horizontal"
        Grid.Row="1"
        Grid.Column="1"
        Value="{TemplateBinding HorizontalOffset}"
        Maximum="{TemplateBinding ScrollableWidth}"
        ViewportSize="{TemplateBinding ViewportWidth}"
        Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"/>

                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

将此样式应用于 ScrollViewer

```
<ScrollViewer  Grid.Column="1" Style="{StaticResource LeftScrollViewer}"> 
```

此示例在 Windows Phone 中不起作用，因为来自 descktop wpf 的此 ScrollViewer ControlTemplate。但是您可以使用 Expression Blend 并获取 Windows Phone ScrollViewer ControlTemplate 并更改类似

```
Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"/> 
```

在 `Visibility="Visible"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T07:46:17.530

您可以将默认的 ScrollViewer 模板替换为始终显示滚动条的模板。请注意，这与 windows phone 设计指南不一致，您应该在选择始终显示滚动条之前仔细考虑。

```
<phone:PhoneApplicationPage.Resources>
    <Style x:Key="ScrollViewerStyle1" TargetType="ScrollViewer">
        <Setter Property="VerticalScrollBarVisibility" Value="Auto"/>
        <Setter Property="HorizontalScrollBarVisibility" Value="Disabled"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Padding" Value="0"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="BorderBrush" Value="Transparent"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ScrollViewer">
                    <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="ScrollStates">
                                <VisualStateGroup.Transitions>
                                    <VisualTransition GeneratedDuration="00:00:00.5"/>
                                </VisualStateGroup.Transitions>
                                <VisualState x:Name="Scrolling">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="VerticalScrollBar"/>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="HorizontalScrollBar"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="NotScrolling"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Grid Margin="{TemplateBinding Padding}">
                            <ScrollContentPresenter x:Name="ScrollContentPresenter" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}"/>
                            <ScrollBar x:Name="VerticalScrollBar" HorizontalAlignment="Right" Height="Auto" IsHitTestVisible="False" IsTabStop="False" Maximum="{TemplateBinding ScrollableHeight}" Minimum="0" Opacity="1" Orientation="Vertical" Visibility="Visible" Value="{TemplateBinding VerticalOffset}" ViewportSize="{TemplateBinding ViewportHeight}" VerticalAlignment="Stretch" Width="5"/>
                            <ScrollBar x:Name="HorizontalScrollBar" HorizontalAlignment="Stretch" Height="5" IsHitTestVisible="False" IsTabStop="False" Maximum="{TemplateBinding ScrollableWidth}" Minimum="0" Opacity="0" Orientation="Horizontal" Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}" Value="{TemplateBinding HorizontalOffset}" ViewportSize="{TemplateBinding ViewportWidth}" VerticalAlignment="Bottom" Width="Auto"/>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</phone:PhoneApplicationPage.Resources>

<ScrollViewer Style="{StaticResource ScrollViewerStyle1}"> 
```

# java - 线程安全的集合是否必须同步？

> ID：15152058
> 
> 赞同：0
> 
> 时间：2013-03-01T06:42:08.040
> 
> 标签：java, collections, thread-safety, hashmap, synchronized

我只想`Collection`用于单线程环境，并且我使用的`HashMap`是同步的。

但是，我仍然怀疑同步它是否是线程安全的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T06:46:15.717

如果您只使用单个线程，则*不需要*线程安全集合 -`HashMap`应该没问题。

您应该非常小心地制定出您的要求：

*   如果您真的使用单线程，请坚持使用`HashMap`（或考虑`LinkedHashMap`）
*   如果您要共享地图，则需要确定您想要什么样的安全：
    *   如果地图在被刚刚读取的多个线程使用之前已完全填充，那么 `HashMap`仍然可以。
    *   `Collections.synchronizedMap`只会同步每个单独的操作；在一个线程中迭代并在另一个线程中修改映射而不同步仍然是不安全的。
    *   `ConcurrentHashMap`是一种更“彻底”的线程安全方法，我通常更喜欢`synchronizedMap`. 它允许在迭代期间进行修改，但不保证在迭代时会在哪里看到此类修改。另请注意，虽然`HashMap`允许空键和值，`ConcurrentHashMap`但不允许。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T06:43:24.677

根据您的需要，使用`ConcurrentHashMap`. 它允许从多个线程同时修改 Map 而无需阻塞它们。`Collections.synchronizedMap(map)`创建一个会降低性能的阻塞映射，尽管会确保一致性

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-01T06:45:13.363

1.  标准的 java HashMap 不同步。
2.  如果您在单线程环境中，则无需担心同步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T06:44:44.547

常用的`Collection`类，例如`java.util.ArrayList`，是不同步的。但是，如果两个线程有​​可能同时更改一个集合，您可以使用该`synchronizedCollection()`方法从它生成一个同步集合。与只读方法类似，线程安全 API 允许您生成同步的集合、列表、集合或映射。例如，您可以通过以下方式从 a 生成同步地图`HashMap`：

```
 Map map = Collections.synchronizedMap(new HashMap());
  map.put(... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T06:44:55.277

作为单线程环境，您可以安全地使用 HashMap。

# python - 如何比较字典的值并使用python为答案制作一个新字典

> ID：15152065
> 
> 赞同：0
> 
> 时间：2013-03-01T06:43:03.110
> 
> 标签：python, list, dictionary, tuples

我有一本像这样的字典：

```
dict = {'Books' : [(2,2), (3,4), (7,19)],
        'CDs'   : [(1,9), (3,5), (3,6), (10,9)],
        'Toys'  : [(0,1), (2,8), (3,3), (4,6)]} 
```

我想比较这本字典的 VALUES 并制作另一个字典，其中包含`index[0]`所有元组列表中的相似值，例如：

```
dict = {'Books' : [(3,4)],
        'CDs'   : [(3,5), (3,6)],
        'Toys'  : [(3,3)]} 
```

在 dict 的所有值中不能有超过一个具有 index[0] 的相似元组！
我为这个问题找到了多个答案，但没有发生任何积极的事情。
以下字典不是我的情况：

```
dict = {'Books' : [(2,2), (3,4), (7,19)],
        'CDs'   : [(1,9), (2,7)(3,5), (3,6), (10,9)],
        'Toys'  : [(0,1), (2,8), (3,3), (4,6)]} 
```

像 index[0] 处的 '2' 出现在 dict 的所有值中！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T06:49:09.187

首先，您需要一个包含所有第一个元素的集合（按键分组）：

```
firsts = [set([pair[0] for pair in v]) for v in dict.values()] 
```

要查找所有条目中出现的值，您可以设置交集：

```
similar = reduce(lambda x,y: x.intersection(y), firsts) 
```

Then you can filter the dict to have only pairs that belong to the intersection:

```
filtered = { k:[pair for pair in v if pair[0] in similar] \
             for k,v in dict.items() } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T06:49:01.377

如果“相似”是指元组的第一个索引是相同的，那么类似于：

```
d =  {'Books' : [(2,2), (3,4), (7,19)],
        'CDs'   : [(1,9), (3,5), (3,6), (10,9)],
        'Toys'  : [(0,1), (2,8), (3,3), (4,6)]}

def find_when(d, n):
    return {k: [el for el in v if el[0] == n] for k, v in d.iteritems()}

print find_when(d, 3)
# {'CDs': [(3, 5), (3, 6)], 'Books': [(3, 4)], 'Toys': [(3, 3)]} 
```

# javascript - 如何使用javascript RegExp（）查找给定字符串中多个字符串的出现

> ID：15152071
> 
> 赞同：1
> 
> 时间：2013-03-01T06:43:42.260
> 
> 标签：javascript, jquery, regex

我想检查给定字符串中多个字符串的可用性（**不使用循环**）。

像

```
my_string = "How to find occurence of multiple sting in a given string using javascript RegExp";
// search operated on this string
// having a-z (lower case) , '_' , 0-9 , and space

// following are the strings wanted to search .( having a-z , 0-9 , and '_')

search_str[0]="How";
search_str[1]="javascript";
search_str[2]="sting";
search_str[3]="multiple"; 
```

*   我不需要他们的位置。
*   我只需要知道所有 search_str 都**必须在 my_string 中**。
*   search_str 的顺序永远不会影响结果。

有没有可用的正则表达式？

> **更新：我错过了什么**

在答案中我发现这个正在解决上述问题

```
if (/^(?=.*\bHow\b)(?=.*\bjavascript\b)(?=.*\bsting\b)(?=.*\bmultiple\b)/.test(subject)) {
    // Successful match
} 
```

*但在这种情况下，它不起作用。*

```
m_str="_3_5_1_13_10_11_";
search_str[0]='3';
search_str[1]='1';
tst=new RegExp("^(?=.*\\b_"+search_str[0]+"_\\b)(?=.*\\b_"+search_str[1]+"_\\b)");
if(tst.test(m_str)) alert('fooooo'); else  alert('wrong'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T06:47:29.720

```
if (/^(?=.*\bHow\b)(?=.*\bjavascript\b)(?=.*\bsting\b)(?=.*\bmultiple\b)/.test(subject)) {
    // Successful match
} 
```

这假设您的字符串不包含换行符。如果是这样，您需要将所有`.`s 更改为`[\s\S]`.

我使用了单词边界锚来确保`Howard`或`resting`不意外地提供匹配。如果您确实想允许这样做，请删除`\b`s。

**解释：**

`(?=...)`是一个前瞻断言：它在字符串中前瞻，以检查封闭的正则表达式是否*可以* 在当前位置匹配，而无需实际消耗匹配字符。因此，一连串的先行操作就像一系列正则表达式（锚定到字符串的开头 by `^`），它们与逻辑`&&`运算符组合在一起。

# android - 如何从onContextItemSelected中判断item属于哪个类

> ID：15152075
> 
> 赞同：1
> 
> 时间：2013-03-01T06:44:12.393
> 
> 标签：android, database, object, contextmenu, expandablelistview

我有一个 expandListView **diaryDisplaylist**

这是适配器**DiaryExpandListAdapter mAdapterForAll**将用于填充 diaryDisplayList

执行此操作的代码片段：

```
 mAdapterForAll = new DiaryExpandListAdapter(this, diaryList);
    diaryDisplaylist.setAdapter(mAdapterForAll); 
```

日记列表的类型：

```
 diaryList = new ArrayList<Object>(); 
```

diaryList 将包含来自大约 8 个数据库的所有项目，expandlist 根据数据库中存在的条目时间日期对这些数据库进行分组。它完美地展示了它。

现在我有扩展列表，其中包含属于不同数据库的元素。

所以对于我使用的编辑和删除功能

```
 diaryDisplaylist.setOnCreateContextMenuListener(this); 
```

contextMenu 的代码片段：

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);

    ExpandableListView.ExpandableListContextMenuInfo info = (ExpandableListView.ExpandableListContextMenuInfo) menuInfo;
    int type = ExpandableListView.getPackedPositionType(info.packedPosition);

    if (type == ExpandableListView.PACKED_POSITION_TYPE_CHILD) {

        menu.add(0, Constants.MENU_EDIT, 0, "Edit");
        menu.add(0, Constants.MENU_DELETE, 1, "Delete");
    }
}

@Override
public boolean onContextItemSelected(android.view.MenuItem item) {

    ExpandableListContextMenuInfo info = (ExpandableListContextMenuInfo) item.getMenuInfo();

    switch (item.getItemId()) {

    case Constants.MENU_EDIT:
        // once i get item belonging to respective database i can edit
        return true;

    case Constants.MENU_DELETE:

        return true;

    default:
        return super.onContextItemSelected(item);
    }
} 
```

在 contextMenuItem selected 中，我如何找到该项目所属的数据库？我无法使用适配器找到我的对象，因为我在 contextItemSelected 中没有 groupPosition 和 childPosition。如果我能得到那些我可以简单地使用的。

```
Object selectedObject = mAdapterForAll.getChild(groupPosition, childPosition); 
```

然后使用 selectedObject 我可以发现

```
if(selectedObject isInstanceOf db1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:24:48.263

获得我使用的组和子位置

```
Object obj = diaryList.get((int) info.packedPosition); 
```

在 onContextItemSelected 中它起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:51:44.810

抱歉，上面的代码有问题，此代码对我来说可以很好地从展开列表视图中确定组和子位置

```
int groupPos = 0, childPos = 0;
int type = ExpandableListView.getPackedPositionType(info.packedPosition);
if (type == ExpandableListView.PACKED_POSITION_TYPE_CHILD) {
    groupPos = ExpandableListView
            .getPackedPositionGroup(info.packedPosition);
    childPos = ExpandableListView
            .getPackedPositionChild(info.packedPosition);
} 
```

# matlab - matlab代码中的矩阵维数错误

> ID：15152082
> 
> 赞同：1
> 
> 时间：2013-03-01T06:44:44.077
> 
> 标签：matlab, image-processing, watermark, bsxfun

我正在 matlab 中尝试特定代码但收到错误
`Error using ==> plus
Matrix dimensions must agree.`

在这条线上

```
LL_1=LL+k; 
```

在哪里`k=w*alpha;`和`[LL,LH,HL,HH] = dwt2(X,'db1','d');`请`X=imread('cameraman.tif'); X=im2double(X);`
帮助我应该如何解决这个错误？

编辑：我浏览了这里的一篇文章并尝试使用 bsxfun

```
LL_1=bsxfun(@plus,LL+k); 
```

但这并不能解决问题

编辑 2：代码是关于使用 dwt 算法的数字图像水印，我在浏览互联网时发现了这个代码，但它给出了我上面讨论的错误。
我已经发布了代码的前半部分，直到出现错误。
我希望我的回复对解决错误有用

```
%loading cover image 
X=imread('cameraman.tif'); 
X=im2double(X); 
[F1,F2]=wfilters('db1','d'); 
[LL,LH,HL,HH] = dwt2(X,'db1','d');

%watermark image 
b=imread('copyright.bmp'); 
level=graythresh(b); 
w=im2bw(b,level); 
w=double(w); 
alpha=0.09; 
k=w*alpha; 
LL_1=bsxfun(@plus, LL, k); 
Y=idwt2(LL_1,LH,HL,HH,'db1','d'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:57:21.443

看起来重新`b`调整大小`X`（或反之亦然）将解决您的问题。读完`b`试试，

```
 b=imresize(b,size(X)) 
```

那么`bsxfun`@Dan建议的应该可以工作......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T07:11:16.173

试试`bsxfun`这样：

```
LL_1=bsxfun(@plus, LL, k); 
```

**编辑**：合并上述建议的答案、对 Natan 答案的评论以及 OP 发布的新代码

```
%loading cover image 
X=imread('cameraman.tif'); 
X=im2double(X); 
[F1,F2]=wfilters('db1','d'); 
[LL,LH,HL,HH] = dwt2(X,'db1','d');

%watermark image 
b=imread('copyright.bmp');
b=imresize(b,size(squeeze(LL(:, :, 1)));
level=graythresh(b); 
w=im2bw(b,level); 
w=double(w); 
alpha=0.09; 
k=w*alpha; 
LL_1=bsxfun(@plus, LL, k); 
Y=idwt2(LL_1,LH,HL,HH,'db1','d'); 
```

# jquery - 如何找到两个形状之间的最短路径？

> ID：15152088
> 
> 赞同：2
> 
> 时间：2013-03-01T06:44:59.710
> 
> 标签：jquery, google-maps

我在我的应用程序中使用 Google Maps Api。

我在我的谷歌地图上画了两种形状，一种是多边形，另一种是折线。

我想找到两个形状之间的最短距离。

我试过`google.map.sperical.computedistance()`了，但这只能找到总距离而不是最短距离。

谁能告诉我如何找到两条路径之间的最短距离？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:56:39.447

除非您需要添加的功能来证明额外的代码权重，否则我个人会远离计算出的距离。

至于答案，只需执行所有已知点之间的距离计算。你知道多边形和直线的所有点。因此，只需选择点数最少的那个，然后开始循环与初始部分的一个点进行比较，然后再移动到下一个。

将变量设置为最短，每次找到较短的变量时，只需更新该变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:10:37.613

有一个距离矩阵服务可能是您想要的：[https ://developers.google.com/maps/documentation/javascript/distancematrix](https://developers.google.com/maps/documentation/javascript/distancematrix)

还有对应的webservice

# php - 在正确的页面上回显 $_POST 错误

> ID：15152091
> 
> 赞同：-2
> 
> 时间：2013-03-01T06:45:17.163
> 
> 标签：php, html, mysql, forms, mysqli

谢谢阅读。

提交表单后，在正确页面上回显错误时遇到问题。提交表单后，它会重定向到**website.com/controllers/accountController.php**。我希望它刷新当前页面**website.com/play.php?p=myaccount**

***请注意，表单正在提交，它只是在重定向页面而不是带有表单的页面上打印错误。***

请看[一下我之前的问题](https://stackoverflow.com/questions/15151464/html-form-seemingly-not-posting-to-php)（相关但完全不同的问题）。

**HTML 表单（myaccount.inc.php）：**

```
<div id="change-password">

    <form class="clearfix" action="controllers/accountController.php" method="post">

        <div><span class="he1">Change Password</span></div>

        <div><label class="DEVON" for="password">Current Password:</label></div>
        <input type="password" name="password" id="password" size="23" /><br />

        <div><label class="DEVON" for="passwordnew1">New Password:</label></div>
        <input type="password" name="passwordnew1" id="passwordnew1" size="23" /><br />

        <div><label class="DEVON" for="passwordnew2">Confirm New Password:</label></div>
        <input type="password" name="passwordnew2" id="passwordnew2" size="23" /><br />

        <input type="submit" name="submit" value="Change Password" class="bt_changepass" />

    </form>

</div> 
```

**PHP 代码（accountController.php）：**

```
<?php

// Checking whether the Password Change form has been submitted.
if(isset($_POST['submit'])=='Change Password')
{
echo "<br />";

// Get the data from the database.
$sql = $mysqli->query("SELECT * FROM ss_members WHERE usr = '".$_SESSION['usr']."' AND pass = '".md5($_POST['password'])."'");

$row = $sql->fetch_assoc();

// Will hold our errors
$err = array();

if($_POST['password'] == "" || $_POST['passwordnew1'] == "" || $_POST['passwordnew2'] == "")
{
    $err[] = 'All the fields must be filled in!';
}

if(!$row['pass'] == md5($_POST['password']) && $_POST['passwordnew1'] != "" && $_POST['passwordnew2'] != "")
{
    $err[] = 'Current password is not correct!';
}

if($_POST['passwordnew1'] <> $_POST['passwordnew2'])
{
    $err[] = 'New passwords do not match!';
}

if(!count($err))
{
    if($row['usr'])
    {
        // If everything is OK change password.
        $stmt = $mysqli->prepare("UPDATE ss_members SET pass = md5(?) WHERE usr = {$_SESSION['usr']}");
        $stmt->bind_param('s', $_POST['passwordnew1']);
        $stmt->execute();
        $stmt->close();

        echo "Password has been sucessfully updated!<br />";
    }
    else
    {
        $err[]='Something broke!';
    }
}

if($err)
{
    // Save the error messages in the session.
    foreach($err as $error)
    {
        echo $error . "<br />";
    }   
}

echo "<br />";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T06:46:45.040

`if(isset($_POST['submit'])=='Change Password')`陈述是错误的。

因为`isset`总是返回`Boolean`所以你的 if 永远不会执行。

**或者**

您可以将其用作

```
if(isset($_POST['submit']) && $_POST['submit'] =='Change Password') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T06:47:50.723

```
if(isset($_POST['submit'])=='Change Password') 
```

isset 与更改密码比较时返回 true 或 false 将返回 false

问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T08:57:53.413

if(isset($_POST['submit'])=='change Password') 这种用法在php中无效

# iphone - 调整大小后提高图像质量

> ID：15152098
> 
> 赞同：2
> 
> 时间：2013-03-01T06:45:37.030
> 
> 标签：iphone, ios, image, resize

谁能建议提高图像质量的方法，将其调整为更大的尺寸？在调整大小时，生成的图像像素化。我需要这种像素化来最大限度地减少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T13:14:32.190

有一篇文章叫做：[Resize a UIImage the right way](http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/)，你应该阅读并理解那里给出的每一个方面。我认为它会给你脑海中出现的每一个问题的答案。我认为这是一篇带有适当图形表示的漂亮文章（意味着阅读时不那么无聊）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T06:47:57.003

您可以使用以下代码来压缩或增加图像的大小。

```
CGFloat compression = 222.0f;
CGFloat maxCompression = 202.1f;
int maxFileSize = 160*165; //fill your size need

NSData *imageDat = UIImageJPEGRepresentation(image.image, compression);

while ([imageDat length] > maxFileSize && compression > maxCompression)
{
compression -= 0.1222;
imageDat = UIImageJPEGRepresentation(decodedimage.image, compression);
}
NSLog(@"image compressed success");

[image setImage:[UIImage imageWithData:imageDat]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T07:30:03.353

您可以使用以下代码来压缩或增加图像的大小。

```
image1 = [self imageWithImage:image1 convertToSize:CGSizeMake(100, 100)]; 

// For convert the image to fix size

- (UIImage *)imageWithImage:(UIImage *)image convertToSize:(CGSize)size 
{
UIGraphicsBeginImageContext(size);
[image drawInRect:CGRectMake(0, 0, 320,460)];
UIImage *destImage = UIGraphicsGetImageFromCurrentImageContext();    
UIGraphicsEndImageContext();
return destImage;
} 
```

# android - 在 Eclipse 中更新 ADT 插件

> ID：15152099
> 
> 赞同：4
> 
> 时间：2013-03-01T06:45:37.037
> 
> 标签：android, eclipse-adt

我已将我的 SDK 从 API 级别 15 更新到 17。现在在打开 Eclipse 时，我收到了更新 ADT 的消息。当我尝试更新 ADT 时，它根本没有进展。请参阅随附的屏幕截图。

![在此处输入图像描述](../Images/fca53d5a3ffcbc8b4bc2192206c813c7.png)

我正在使用 Ubuntu 12.01。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-30T13:59:50.987

[从 Eclipse 中的http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)下载它，从帮助菜单中选择安装新软件。选择 adt 插件并为其命名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T21:26:18.807

尝试下载它然后在本地安装它[http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)为您提供离线安装的步骤或尝试取消选中最后一个选项在安装过程中联系所有更新站点以查找软件更新

# python - Plone：如何更改原型内容的所有权？

> ID：15152100
> 
> 赞同：4
> 
> 时间：2013-03-01T06:45:47.917
> 
> 标签：python, plone, archetypes

我有需要更改其所有权的内容。默认情况下，内容类型的所有者是管理员，来自代码，`obj.getOwner()`但内容类型的创建者不是管理员，例如 someuser@samplemail.com。

我已经关注了这个链接： http: [//developer.plone.org/content/ownership.html](http://developer.plone.org/content/ownership.html)并为内容类型创建了一个视图方法。以下是我的代码片段：

```
def change_owner(self):
    membership = getToolByName(self.context,'portal_membership')
    path='/'.join(self.context.getPhysicalPath())
    brains=self.portal_catalog.searchResults(path={'query':path,'depth':0})
    for brain in brains:
        creator = brain.Creator
        crtor_obj = membership.getMemberById(crtor1).getUser()
        brain.getObject().setCreators(creator,)
        brain.getObject().changeOwnership(crtor_obj)
        brain.getObject().reindexObjectSecurity()
    return 
```

看来我的代码并没有改变内容的所有权。所有者仍然是管理员，而创作者仍然是原始创作者。我的代码有问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T15:06:32.737

我看到三个问题：

*   你`getObject()`反复打电话。这是一个相对昂贵的操作，请将结果缓存在局部变量中：

    ```
    obj = brain.getObject() 
    ```

*   您`setCreators()`使用一个参数而不是列表调用：

    ```
    obj.setCreators([creator]) 
    ```

*   你不改变`Owner`角色：

    ```
    roles = list(obj.get_local_roles_for_userid(crtor_obj))
    if 'Owner' not in roles:
        roles.append('Owner')
        obj.manage_setLocalRoles(crtor_obj, roles) 
    ```

有一种[`plone.app.changeownership`产品](http://plone.org/products/plone.app.changeownership)可以为您处理所有这些细节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T08:57:12.803

你看过[plone.app.changeownership](http://plone.org/products/plone.app.changeownership)吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-27T07:23:53.353

有一个辅助函数可以`changeOwnershipOf(self, object, userid, recursive=0, REQUEST=None)`为`plone_utils`您完成所有这些事情。

（可通过曝光不足的`change_ownership`表格找到。）

# php - 具有社交网站集成的最佳 codeigniter 2.1 身份验证库

> ID：15152106
> 
> 赞同：3
> 
> 时间：2013-03-01T06:46:16.943
> 
> 标签：php, facebook, codeigniter, codeigniter-a3m

支持社交网络集成等的最佳codeigniter身份验证库是`facebook, twitter, linkedin, google+`什么？

目前我正在学习 a3m，这还可以，但是我在将它集成到 twitter 时遇到了一些麻烦，因为他们已经更新了他们的 API。

我在谷歌搜索时发现了坦克，但我还没有尝试过。我找到了其他一些身份验证库，但它们缺少我很难学习的文档。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:14:05.877

终于解决了我在 twitter 上的 a3m 问题。我只需要为我的回调 url 提供正确的路径。

像这样的东西。

```
$callback_url = http://mywebsite.com/somephpfile.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T18:34:24.263

我已经开始开发一个 Codeigniter 库，用于向 Twitter 发出 oAuth 请求。 [源代码可以在这里找到。](https://github.com/pattle/codeigniter-twitter-library)

# sql-server - 命名管道提供程序：无法打开到 SQL Server [53] 的连接

> ID：15152107
> 
> 赞同：3
> 
> 时间：2013-03-01T06:46:20.890
> 
> 标签：sql-server, sql-server-2008

我正在尝试使用 jdbc 连接来连接 mssql server 2008。我的连接网址就像

jdbc:jtds:sqlserver://localhost:1433/dbname;user=username;password=password

但是，当我尝试通过准备好的语句执行存储过程时，我得到了上述异常

我启用了 TCP/IP 和命名管道。我禁用了防火墙。

可能是什么问题。

我发现这是因为出现以下错误“ole/db provider returned message login timeout expired”...

但不确定为什么会这样

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T12:49:04.213

链接服务器配置了错误的身份验证值。因此，当我尝试连接到链接服务器时，它会引发身份验证异常，进而引发上述异常。

创建具有正确身份验证值的链接服务器解决了该问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-22T16:30:39.203

我有同样的问题，可能问题与DNS有关。
我修复了使用 IP 地址而不是服务器名称创建链接服务器的问题。

# javascript - 当子元素上的鼠标进入时，如何不触发父级上的鼠标离开？

> ID：15152109
> 
> 赞同：4
> 
> 时间：2013-03-01T06:46:31.440
> 
> 标签：javascript, jquery, mouseevent, jquery-events

一直没能搞定这个工作。在不了解我的确切情况以及我为什么要尝试做我正在做的事情的情况下，一个基本的摘要是：

我在 parent 中有 4 个元素子元素。我目前正在`mouseenter`为孩子们附加一个：

```
$('.parent').on('mouseenter', '.child', function() {
    showSomething();
}); 
```

然后我想说

```
$('.parent').on('mouseleave', function() {
    hideSameSomething();
}); 
```

但是，当`mouseenter`on 子级向父级触发 a`mouseleave`并产生令人讨厌的闪烁时。我已经尝试`e.stopPropagation()`过儿童处理程序，但没有运气。`mouseleave`当我进入子元素并且只有当我真正离开父元素时，有什么想法如何不触发父事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T06:49:27.923

尝试将两者合二为一。

**官方文档**：[http ://api.jquery.com/on/#on-events-selector-data](http://api.jquery.com/on/#on-events-selector-data)

```
$(".parent, .child").on({
    mouseenter: function() {
        // Handle mouseenter...
    },
    mouseleave: function() {
        // Handle mouseleave...
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:41:00.150

尝试：

```
$('.parent .child').on("mouseenter", function() {

    showSomething();

    $(this).closest('.parent').on("mouseleave", function() {
        hideSameSomething();
    });

}); 
```

# java - 使用 Java API 填充 Google 图表

> ID：15152115
> 
> 赞同：0
> 
> 时间：2013-03-01T06:46:49.440
> 
> 标签：java, javascript, web-applications, real-time, google-visualization

我必须使用[Java API](http://www.dataturbine.org/sites/default/files/programs/RBNB/doc/com/rbnb/sapi/Sink.html)从服务器获取数据。我需要使用这些数据来填充实时图表（带[注释的时间线](https://developers.google.com/chart/interactive/docs/gallery/annotatedtimeline)）。我们想使用用 javascript 编写的 Google Charts API。

有没有人有很好的资源来连接这两种语言？同样，我们想要一个使用 javascript 从 java 源中提取数据的网页。

# xcode4.5 - 如何使用上一个、下一个和完成按钮创建数字 KB 界面

> ID：15152117
> 
> 赞同：0
> 
> 时间：2013-03-01T06:46:50.800
> 
> 标签：xcode4.5

我在我的 iPhone 上访问网站时遇到了网站的留言簿。与那些文本字段。正如您在下面的屏幕中看到的那样，我的键盘外观完全改变了。 ![知识库图片](../Images/71907b36b7a7d39cf72ab4727dcba1ba.png)

我的应用程序中有很多文本字段，我想知道是否可以创建类似的内容。由于我是开发新手，仍然不知道有什么限制。谁能指导我正确的方向或正确的文档。是否有一些常规方式或它只是对 Keybard 的完全自定义。我还有一个疑问，当我的所有字段都有数字键盘时，弹出什么样的键盘是否重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:30:17.510

好吧，我只是想对与我遵循相同学习曲线的人有所帮助。

在有问题的屏幕截图中实现效果。UIToolbar 控件可用于制作这些按钮。之后，您只需使用键盘使此工具栏出现和消失即可。

要使上一个和下一个按钮起作用，您可以使用 textfield 的 tag 属性。单击上一个或下一个时，您可以专注于上一个或下一个文本字段。很抱歉没有发布代码，因为我还没有编码，但想给任何正在寻找的人指点。

# android - .getText().toString() 给出 NullPointerException

> ID：15152120
> 
> 赞同：0
> 
> 时间：2013-03-01T06:47:27.227
> 
> 标签：android, google-maps

这是我在 google maps android api v2 中添加标记的代码。我的问题是我无法从我的 EditText 片段中获取字符串值。代码 .getText().toString() 无法获取字符串值，只发送空值。请帮我。

```
 googlemap.setOnMapLongClickListener(new GoogleMap.OnMapLongClickListener() {

        @Override
        public void onMapLongClick(final LatLng latlng) {
            LayoutInflater li = LayoutInflater.from(context);
            final View v = li.inflate(R.layout.alertlayout, null);

            AlertDialog.Builder builder = new AlertDialog.Builder(context);
            builder.setView(v);
            builder.setCancelable(false);

            builder.setPositiveButton("Create", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    EditText title = (EditText) v.findViewById(R.id.ettitle);
                    EditText snippet = (EditText) v.findViewById(R.id.etsnippet);
                    String s = title.getText().toString();
                    String ss = snippet.getText().toString();
                    googlemap.addMarker(new MarkerOptions()
                            .title(s)
                            .snippet(ss)
                            .icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_BLUE))
                            .position(latlng)
                            );
                }
            });

            //Create Negative button
            builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    dialog.cancel();

                }
            });

            AlertDialog alert = builder.create();
            alert.show();

        }
    });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T06:53:45.940

添加下面的代码

onMapLongClick()

```
LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View rowView = inflater.inflate(R.layout.alertlayout, parent, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:15:38.047

你得到空指针是因为你没有为你需要遵循这个的编辑文本值实现 getter 和 setter。

1.  适当地膨胀你的布局，比如..

    ```
    LayoutInflater mInflater =(LayoutInflater)context.getSystemService(Activity.LAYOUT_INFLATER_SERVICE); 
    ```

    convertView =mInflater.inflate(R.layout.alertlayout,null);

2.Crate ViewHolder 类，包含该编辑文本的 getter 和 setter。

1.  `convertView.setTag(holder);`

2.  像现在这样创建持有者对象，`holder = (ViewHolder) convertView.getTag();` 您可以获得`holder.get....();`

# qml - Blackberry10 上的 SimCardInfo 问题

> ID：15152126
> 
> 赞同：2
> 
> 时间：2013-03-01T06:47:48.553
> 
> 标签：qml, blackberry-10, blackberry-cascades

我想在 IMSI 上显示/阅读（在 Dev Alpha B 上测试过）。问题是我可以读取 SimCardInfo 的其他属性，例如移动网络代码、移动国家代码、序列号，但 IMSI（订阅者标识符）。这是代码

主文件

```
#include <bb/cascades/Application>
#include <bb/cascades/QmlDocument>
#include <bb/cascades/AbstractPane>
#include <bb/device/HardwareInfo>
#include <bb/device/SimCardInfo>

#include <QLocale>
#include <QTranslator>
#include <Qt/qdeclarativedebug.h>

using namespace bb::cascades;
using namespace bb::device;

Q_DECL_EXPORT int main(int argc, char **argv)
{
    qmlRegisterUncreatableType<bb::device::HardwareInfo>("bb.device", 1, 0, "HardwareInfo", "");
    qmlRegisterUncreatableType<bb::device::SimCardInfo>("bb.device", 1, 0, "SimCardInfo", "");

    // this is where the server is started etc
    Application app(argc, argv);

    // localization support
    QTranslator translator;
    QString locale_string = QLocale().name();
    QString filename = QString( "hwinfo_%1" ).arg( locale_string );
    if (translator.load(filename, "app/native/qm")) {
        app.installTranslator( &translator );
    }

    //create object
    HardwareInfo hwInfo;
    SimCardInfo simcardInfo;

    QmlDocument *qml = QmlDocument::create("asset:///main.qml");

    qml->setContextProperty("_hardware", &hwInfo);
    qml->setContextProperty("_simcardinfo", &simcardInfo);

    // create root object for the UI
    AbstractPane *root = qml->createRootObject<AbstractPane>();
    // set created root object as a scene
    Application::instance()->setScene(root);

    // we complete the transaction started in the app constructor and start the client event loop here
    return Application::exec();
    // when loop is exited the Application deletes the scene which deletes all its children (per qt rules for children)
} 
```

main.qml 文件

```
import bb.cascades 1.0
import bb.device 1.0

Page 
{
    Container 
    {   
        leftPadding: 20
        topPadding: 20
        Container 
        { 
            topMargin: 10
            layout: StackLayout 
                    {
                        orientation: LayoutOrientation.LeftToRight
                    }  
            Button
            {
                text: "retrieve"
                onClicked: 
                {
                    lbl0.text = "Model name: " + _hardware.modelName
                    lbl1.text = "IMEI: " + _hardware.imei
                    lbl2.text = "IMSI: " + _simcardinfo.subscriberIdentifier
                    lbl3.text = "SN: " + _simcardinfo.serialNumber
                    lbl4.text = "Mobile Network Code: " + _simcardinfo.mobileNetworkCode
                    lbl5.text = "Mobile Country Code: " + _simcardinfo.mobileCountryCode
                } 
            }
        }

        Container 
        {   
            layout: StackLayout {                        
                    }
            Label
            {
                id:lbl0
            }                    
            Label 
            {   
                id:lbl1      
            }
            Label
            {
                id:lbl2
            }        
            Label
            {
                id:lbl3
            }        
            Label
            {
                id:lbl4
            }        
            Label
            {
                id:lbl5
            }       
        }

    }
} 
```

任何帮助深表感谢。

参考 [http://developer.blackberry.com/cascades/reference/bb_device_simcardinfo.html *_* _](http://developer.blackberry.com/cascades/reference/bb__device__simcardinfo.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-26T20:19:14.157

您声明`hwInfo`并`simCardInfo`作为堆栈变量，这意味着在构造函数结束后两个变量都不再存在，因此当 QML 运行时尝试访问您分配给它们的属性时，它就是不能。

要使其工作，您需要将这些变量声明为堆变量，以便它们可以超出其范围。

```
HardwareInfo* hwInfo = new HardwareInfo();
SimCardInfo* simcardInfo = new SimCardInfo();
qml->setContextProperty("_hardware", hwInfo);
qml->setContextProperty("_simcardinfo", simcardInfo); 
```

# view - Joomla 2.5 在模态窗口中打开视图以添加数据

> ID：15152131
> 
> 赞同：0
> 
> 时间：2013-03-01T06:48:04.590
> 
> 标签：view, modal-dialog, joomla2.5

目标应该如下：我有一个编辑视图，其中包含一个依赖于另一个表的自定义字段（下拉列表）。在那里我可以从地址列表（第二个表）中选择来保存数据行的 id。我从这个开始：

自定义字段代码：

```
jimport('joomla.form.helper');
JFormHelper::loadFieldClass('list');
JHTML::_('behavior.modal');
class JFormFieldInvoiceAdress extends JFormFieldList
{
    protected $type = 'invoiceadress';
    protected function getInput() {
        $db = JFactory::getDBO();
        $query = $db->getQuery(true);
        $query->select('id,zip,city,adress');
        $query->from('#__pb_invoiceadresses');
        $db->setQuery((string)$query);
        $types = $db->loadObjectList();
        $options = array();
        foreach($types as $type) {
        $options[] = JHTML::_('select.option', $type->id, $type->zip . " " . $type->city . ", " .$type->adress);
        }
        $dropdown = JHTML::_('select.genericlist', $options, $this->name, 'class="inputbox"', 'value', 'text', $this->value);
        $link = 'index.php?option=com_mycomponent&view=invoiceadresseedit&layout=edit&id=0';
        $dropdown .= "<a href=\"" . JRoute::_($link) . "\" class=\"modal\" rel=\"{handler: 'iframe', size: {x: 875, y: 550}, onClose: function() {}}\" >Neue Adresse</a>";                      
        return $dropdown ;
    }
} 
```

到目前为止这有效，但我必须在关闭此模式窗口时更新下拉列表的内容，而不是在模式窗口中获取 invoiceadresses 的列表视图。

我的第二次尝试是在链接中添加“tmpl=component”，但我没有保存按钮。我不知道如何做到这一点。有人已经解决了这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:33:40.093

找到了解决方案，我正在为下一个提出相同问题的人回答。

使用此链接调用编辑视图：

```
$link = 'index.php?option=com_mycomponent&view=invoiceadresseedit&layout=edit&id=0&tmpl=component'; 
```

这将只显示表单而不显示管理 gui 和工具栏的其余部分。

在您的编辑表单中添加一个保存按钮，如下所示：

```
<input class="button" type="submit" value="<?php echo JText::_('SAVE');?>"  onClick="window.parent.location.reload();" /> 
```

就是这样。数据将被保存，在此之后模式窗口关闭并重新加载当前页面，下拉菜单将使用新数据进行更新。

# objective-c - 不推荐将“SEL”类型转换为“SEL”；改用 sel_getName

> ID：15152136
> 
> 赞同：5
> 
> 时间：2013-03-01T06:48:40.510
> 
> 标签：objective-c, casting

您建议如何处理此错误？首先演员阵容是必要的吗？

```
- (NSMethodSignature*)methodSignatureForSelector:(SEL)selector {

  return [dummyStream_ methodSignatureForSelector:(SEL)selector];

} 
```

这是错误

> 不推荐将“SEL”类型转换为“SEL”；改用 sel_getName

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T06:50:03.920

`selector`已经被声明为 type `SEL`，所以强制转换是不必要的。

# java - 如何在 JAXB 中处理相同单词的不同大小写？

> ID：15152137
> 
> 赞同：1
> 
> 时间：2013-03-01T06:48:46.773
> 
> 标签：java, xml, xsd, jaxb

```
<xs:simpleType name="PowerUnit">
    <xs:restriction base="xs:int">
        <xs:enumeration value="MWh"/>
        <xs:enumeration value="mWh"/>
    </xs:restriction>
</xs:simpleType> 
```

Jaxb 无法为上述示例生成类，其中 MWh 和 mWh 的拼写相同但大小写不同。甚至，JAXB 也没有显示任何错误。只需生成除此枚举之外的其他文件。

如何处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:45:43.513

**XML 模式 (schema.xsd)**

以下是基于您的问题的示例 XML 架构。我必须更改基本类型以`string`使其有效。

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    targetNamespace="http://www.example.org" 
    xmlns="http://www.example.org"
    elementFormDefault="qualified">

    <xs:simpleType name="PowerUnit">
        <xs:restriction base="xs:string">
            <xs:enumeration value="MWh" />
            <xs:enumeration value="mWh" />
        </xs:restriction>
    </xs:simpleType>

    <xs:complexType name="root">
        <xs:sequence>
            <xs:element name="power-unit" type="PowerUnit"/>
        </xs:sequence>
    </xs:complexType>

</xs:schema> 
```

**默认生成类**

如果[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现无法生成枚举，那么它将创建基本类型的属性。

```
package org.example;

import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "root", propOrder = {
    "powerUnit"
})
public class Root {

    @XmlElement(name = "power-unit", required = true)
    protected String powerUnit;

    public String getPowerUnit() {
        return powerUnit;
    }

} 
```

**外部绑定文件 (binding.xml)**

您可以使用外部绑定文件来重命名枚举中的一项。

```
<?xml version="1.0" encoding="UTF-8"?>
<jxb:bindings
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
    version="2.1">
    <jxb:bindings schemaLocation="schema.xsd">
        <jxb:bindings node="//xs:simpleType[@name='PowerUnit']/xs:restriction/xs:enumeration[@value='mWh']">
            <jxb:typesafeEnumMember name="M"/>
        </jxb:bindings>
    </jxb:bindings>
</jxb:bindings> 
```

**新生成的类**

现在枚举中的名称冲突已经解决，将在生成的 JAXB 模型中使用枚举。

```
package org.example;

import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "root", propOrder = {
    "powerUnit"
})
public class Root {

    @XmlElement(name = "power-unit", required = true)
    protected PowerUnit powerUnit;

} 
```

**枚举 (PowerUnit)**

下面是生成的`enum`样子：

```
package org.example;

import javax.xml.bind.annotation.*;

@XmlType(name = "PowerUnit")
@XmlEnum
public enum PowerUnit {

    @XmlEnumValue("MWh")
    M_WH("MWh"),
    @XmlEnumValue("mWh")
    MWH2("mWh");
    private final String value;

    PowerUnit(String v) {
        value = v;
    }

    public String value() {
        return value;
    }

    public static PowerUnit fromValue(String v) {
        for (PowerUnit c: PowerUnit.values()) {
            if (c.value.equals(v)) {
                return c;
            }
        }
        throw new IllegalArgumentException(v);
    }

} 
```

# c# - 在主页面和内容页面之间传递数据

> ID：15152139
> 
> 赞同：0
> 
> 时间：2013-03-01T06:48:51.877
> 
> 标签：c#, asp.net, master-pages

这是我的任务。我必须创建一个母版页及其两个子页。详情如下

*   在母版页中声明 3 个会话变量。
    *   Pages_viewed
    *   ChildAppData1
    *   ChildAppData2
*   在每个子应用程序中声明 1 个会话变量
    *   子变量1
    *   ChildVar2
*   一旦子应用程序加载
    *   Pages_viewed ++;
    *   设置`ChildVar1 = ChildAppData1 = datetime.now();`或`ChildVar2 = ChildAppData2 = datetime.now();`

将一个按钮添加到重置所有变量的母版页。

在母版页和活动子应用程序中显示所有 5 个变量。

我必须在 page_viewed 变量中显示访问子页面的次数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T06:57:55.077

`get`最简单的方法是使用参数到自我页面中的一些信息/命令重定向到自我。

像 `Default.master`封闭 `Default.aspx`

```
->Redirect to

   `Default.aspx?cmd=clearAllVariables` 
```

检查`Page_Load`时

```
if(!PostBack && (Request["cmd"] != null) && (Request["cmd"].ToString() == "clearAllVariables")) 
{ 
  clearAllVariablesImplementation(); 
} 
```

# android - android中的Mapapi v2导致片段错误

> ID：15152142
> 
> 赞同：5
> 
> 时间：2013-03-01T06:49:00.287
> 
> 标签：android, android-fragments, google-maps-api-2

我在`fragment`. 下面是我的代码。

```
import android.app.Fragment;
import android.app.FragmentTransaction;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.MapFragment;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.CameraPosition;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.MarkerOptions;
import com.tfick.android.R;

public class PoiFragment extends Fragment{

private GoogleMap mGoogleMap;

private static final LatLng SYDNEY = new LatLng(23.03,72.62);

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    View v=inflater.inflate(R.layout.poi_fragment, container,false);

    MapFragment  mMapFragment = MapFragment.newInstance();
     FragmentTransaction fragmentTransaction =
             getFragmentManager().beginTransaction();
     fragmentTransaction.add(R.id.container1, mMapFragment);
     fragmentTransaction.commit();

     if(mGoogleMap ==null){

            /*initializing map */

            mGoogleMap=mMapFragment.getMap();

            /*cretaing custom camera position*/

            CameraPosition mCameraPosition=new CameraPosition.Builder().target(SYDNEY).bearing(0).tilt(30).build();

            /*setting custom camera position*/

            mGoogleMap.animateCamera(CameraUpdateFactory.newCameraPosition(mCameraPosition));

            /*adding custom marker on the map.*/
             mGoogleMap.addMarker(new MarkerOptions().draggable(true).position(new LatLng(22.03, 72.56)).title("hello world").snippet("Ahmedabad").icon(BitmapDescriptorFactory.fromResource(R.drawable.wifi)));

            mGoogleMap.addMarker(new MarkerOptions().draggable(true).position(new LatLng(23.03, 78.10)).title("hello world").snippet("Baroda").icon(BitmapDescriptorFactory.fromResource(R.drawable.wifi)));

        }

        if(mGoogleMap !=null){

            /* map is already initialized then setting map type */
            /*
             * normal 
             * satellite
             * hybrid
             * terrain
             * none
             */
            mGoogleMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);

        }

    return v;
}
} 
```

```
03-01 12:15:31.439: E/AndroidRuntime(9299): FATAL EXCEPTION: main
03-01 12:15:31.439: E/AndroidRuntime(9299): java.lang.RuntimeException: Unable to start activity    ComponentInfo{com.tfick.android/com.tfick.android.PointOfIntrest}: java.lang.NullPointerException: CameraUpdateFactory is not initialized
03-01 12:15:31.439: E/AndroidRuntime(9299):     at    android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
03-01 12:15:31.439: E/AndroidRuntime(9299):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
03-01 12:15:31.439: E/AndroidRuntime(9299):     at android.app.ActivityThread.access$600(ActivityThread.java:140)
03-01 12:15:31.439: E/AndroidRuntime(9299):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
03-01 12:15:31.439: E/AndroidRuntime(9299):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-01 12:15:31.439: E/AndroidRuntime(9299):     at android.os.Looper.loop(Looper.java:137)
03-01 12:15:31.439: E/AndroidRuntime(9299):     at  android.app.ActivityThread.main(ActivityThread.java:4898)
03-01 12:15:31.439: E/AndroidRuntime(9299):     at java.lang.reflect.Method.invokeNative(Native Method)
03-01 12:15:31.439: E/AndroidRuntime(9299):     at java.lang.reflect.Method.invoke(Method.java:511)
03-01 12:15:31.439: E/AndroidRuntime(9299):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
03-01 12:15:31.439: E/AndroidRuntime(9299):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
03-01 12:15:31.439: E/AndroidRuntime(9299):     at dalvik.system.NativeStart.main(Native Method)
03-01 12:15:31.439: E/AndroidRuntime(9299): Caused by: java.lang.NullPointerException: CameraUpdateFactory is not initialized
03-01 12:15:31.439: E/AndroidRuntime(9299):     at com.google.android.gms.internal.at.a(Unknown Source)
03-01 12:15:31.439: E/AndroidRuntime(9299):     at com.google.android.gms.maps.CameraUpdateFactory.J(Unknown Source)
03-01 12:15:31.439: E/AndroidRuntime(9299):     at com.google.android.gms.maps.CameraUpdateFactory.newCameraPosition(Unknown Source)
03-01 12:15:31.439: E/AndroidRuntime(9299):     at com.tfick.fragment.PoiFragment.onCreateView(PoiFragment.java:51)
03-01 12:15:31.439: E/AndroidRuntime(9299):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:829)
03-01 12:15:31.439: E/AndroidRuntime(9299):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1035)
03-01 12:15:31.439: E/AndroidRuntime(9299):     at android.app.BackStackRecord.run(BackStackRecord.java:635)
03-01 12:15:31.439: E/AndroidRuntime(9299):     at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1397)
03-01 12:15:31.439: E/AndroidRuntime(9299):     at android.app.Activity.performStart(Activity.java:5215)
03-01 12:15:31.439: E/AndroidRuntime(9299):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2073)
03-01 12:15:31.439: E/AndroidRuntime(9299):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:48:56.387

多亏了我，如果有人遇到同样的问题，我找到了解决方案，请使用以下代码。

```
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.MapFragment;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.CameraPosition;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.MarkerOptions;
import com.tfick.android.R;

public class PoiFragment extends MapFragment {
    /*object of google map*/
    public GoogleMap mGoogleMap;
    /* summy location*/
    private static final LatLng SYDNEY = new LatLng(23.03, 72.62);

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        return super.onCreateView(inflater, container, savedInstanceState);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onActivityCreated(savedInstanceState);

        if (getMap() != null) {
            Log.d(getClass().getSimpleName(), "Map ready for use!");

            mGoogleMap = getMap();

            /* cretaing custom camera position */

            CameraPosition mCameraPosition = new CameraPosition.Builder()
                    .target(SYDNEY).bearing(0).tilt(30).build();
            Log.i("gmap", mGoogleMap.toString());

            /* setting custom camera position */

            mGoogleMap.animateCamera(CameraUpdateFactory
                    .newCameraPosition(mCameraPosition));

            /* adding custom marker on the map. */
            mGoogleMap
                    .addMarker(new MarkerOptions()
                            .draggable(true)
                            .position(new LatLng(22.03, 72.56))
                            .title("hello world")
                            .snippet("Ahmedabad")
                            .icon(BitmapDescriptorFactory
                                    .fromResource(R.drawable.wifi)));

            mGoogleMap
                    .addMarker(new MarkerOptions()
                            .draggable(true)
                            .position(new LatLng(23.03, 78.10))
                            .title("hello world")
                            .snippet("Baroda")
                            .icon(BitmapDescriptorFactory
                                    .fromResource(R.drawable.wifi)));

        }

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T22:27:48.740

我遇到了完全相同的问题。`getMap()`返回时会发生此错误`null`。

我做了以下事情：

```
SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);
googleMap = mapFragment.getMap();

/* if googleMap == null then there may be following problem :
 * 1\. google play service version are not matching on both device and installed apk.Will show update message on map.
 * 2\. No google play service installed. Will show a install message on map.
 */
if (googleMap != null) {
    LatLng iniLoc = new LatLng(44.97651081283853, -93.2245754142059);
    googleMap.moveCamera(CameraUpdateFactory.newLatLng(iniLoc));
    googleMap.getUiSettings().setZoomGesturesEnabled(false);
    currentMarkerOption = new MarkerOptions();
    currentMarkerOption.position(iniLoc);
    currentMarker = googleMap.addMarker(currentMarkerOption);
    currentMarker.setIcon((BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_GREEN)));
    currentMarker.setTitle("Current Position");
    currentMarker.showInfoWindow();
    currentMarker.setVisible(false);
    initDestinationMarker();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:23:48.210

问题是`getMap()`返回`null`并因此`CameraUpdateFactory`抛出异常，因为它需要一个初始化的`GoogleMap`.

我在使用`MapFragment`inside a时遇到了类似的问题`Fragment`。我通过将地图初始化移动到`OnResume`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T14:34:42.947

Google 地图的实现很大程度上依赖于几个生命周期方法（onCreate、onCreateView、onDestroy、onResume 和 onPause）。如果将这些调用封装在自己的片段中，则应该将这些调用中继到 MapFragment。在您调用 mapView.getMap() 并获得 GoogleMap 作为回报后，地图应该已经初始化。

如果您从 getMap() 得到 null ，可能会发生几件事：

*   您没有在 MapFragment 上调用 onCreate 和/或 onCreateView（在这些方法之后调用 getMap()）
*   您的清单中缺少 OpenGL ES 2 功能条目
*   您缺少地图所需的权限
*   设备上未安装 Google Play SDK 服务或它们太旧

我经常在 StackOverflow 上阅读有关 initialize(this) 解决方案的信息，但在大多数情况下实际上不需要它。

**编辑：** 我刚刚看到您正在通过事务添加 Mapfragment。您是否考虑过在 PoiFragment 中仅使用 MapView ？我相信通过使用 MapFragment 并通过事务添加它，您会遇到时间问题。当您仍在 PoiFragment.onCreateView 方法中时，事务可能尚未完成（因此 Maps 尚未初始化）。您可以尝试使用 onResume，但您必须确保只初始化一次地图代码，因为 onResume 会被更频繁地调用。

我在架构方面的建议：

*   如果可行，直接在您的活动中使用 MapFragment
*   如果您有足够的代码可以放在那里，请扩展 Mapfragment

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T07:34:48.833

初始化 CameraUpdateFactory。
根据文档 -
调用**initialize(Context)**。只要不抛出**GooglePlayServicesNotAvailableException ，这个类就会被正确初始化。**

链接- http://developer.android.com/reference/com/google/android/gms/maps/MapsInitializer.html#initialize(android.content.Context
[)](http://developer.android.com/reference/com/google/android/gms/maps/MapsInitializer.html#initialize(android.content.Context))
如何初始化-

```
try {
     MapsInitializer.initialize(this /*the context*/);
 } catch (GooglePlayServicesNotAvailableException e) {
     e.printStackTrace();
 } 
```

参考 - [api v2 中的 mapview 和 cameraupdate](https://stackoverflow.com/questions/13905230/mapview-and-cameraupdate-in-api-v2)

# java - 在 Java 中是否允许和接受 hashCode 和 equals 方法中的异常？

> ID：15152145
> 
> 赞同：13
> 
> 时间：2013-03-01T06:49:04.480
> 
> 标签：java, exception, nullpointerexception, equals, hashcode

一些由框架填充的类（如 bean）。因此，您不能保证所有字段都已设置。

查看示例：标记为`@Entity`通常具有`Integer id`字段的类。`hashCode`可以写成：

```
public int hashCode() {
    return id.hashCode();
} 
```

但防御代码可能如下所示：

```
public int hashCode() {
    return (id != null) ? id.hashCode() : 0;
} 
```

我是否需要使用`try { ... } catch (Exception e)`in`hashCode`和`equals`函数编写对 null 或环绕代码的检查？

我没有理由支持防御性编码是这种情况，因为它隐藏了将不一致的对象放入集合并导致后期错误。我在这个位置上错了吗？

**更新**我写了这样的代码：

```
import java.util.*;

class ExceptionInHashcode {

    String name;

    ExceptionInHashcode() { }
    ExceptionInHashcode(String name) { this.name = name; }

    public int hashCode() {
        // throw new IllegalStateException("xxx");
        return this.name.hashCode();
    }

    public static void main(String args[]) {
        Hashtable list = new Hashtable();
        list.put(new ExceptionInHashcode("ok"), 1);
        list.put(new ExceptionInHashcode(), 2); // fail
        System.out.println("list.size(): " + list.size());
    }
} 
```

并运行它：

```
java -classpath . ExceptionInHashcode
Exception in thread "main" java.lang.NullPointerException
        at ExceptionInHashcode.hashCode(ExceptionInHashcode.java:12)
        at java.util.Hashtable.hash(Hashtable.java:262)
        at java.util.Hashtable.put(Hashtable.java:547)
        at ExceptionInHashcode.main(ExceptionInHashcode.java:18) 
```

我认为如果对象处于错误状态，我可以及早发现错误而不是返回零......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T06:55:38.563

我会亲自检查是否为空，并使方法始终无异常返回。

虽然运行时异常通常没有记录并且可以在任何地方抛出，但我认为它们通常被`equals`and抛出会很糟糕`hashCode`。一方面，我绝对可以理解您关于在完全填充之前放入地图的观点......但另一方面，很难真正知道`equals`将在哪里调用。

正如 lc 在评论中所说，如果您真的想抛出异常，最好抛出 an`IllegalStateException`以明确表明这是故意的，而不是让 a`NullReferenceException`被“默认”抛出，这看起来就像你只是没有考虑空场景。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-01T07:12:38.060

一般来说，答案是“视情况而定”。

*   如果您*永远不会*看到`null`该字段的类的实例，那么允许抛出 NPE 是合理的。NPE 表示错误；即您的非正式不变量被破坏的情况。

*   如果在某些情况下可以合理地预期具有 a 的实例，那么您应该在不引发异常的情况下`null`处理这种情况。`null`

* * *

In this particular case, you are apparently dealing with objects where the `id` field can be null if the object hasn't been persisted yet. This presents a tricky problem:

*   If you don't allow `null` for the `id`, then you have to be careful not to put non-persistent objects into a hash table.

*   If you do allow `null` for the `id`, then you have the problem that if you add an object to a hash table and THEN persist it, the `hashcode` may change leading to breakage of the hash table. So, now you need to defend against THAT ... by memoising the object's hashcode value in a transient field. And roughly the same problem occurs with `equals`. If equality changes when an object is persisted, then you had better not mix persisted and non-persisted keys in the same hash table.

Taking all of that into account, I'd advise to either throw that NPE, or not use the `id` fields in `equals` / `hashcode`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T06:53:09.310

为了验证对象的状态，您应该使用[Bean 验证框架](http://www.hibernate.org/subprojects/validator.html)来确保对象的状态是有效的。

**没有**hashcode 和 equals 方法不应该**抛出**异常。

`equals`方法**必须**检查是否为空。创建对象时，创建者有责任确保对象处于有效状态，因此`hashCode`永远不必抛出异常。对于那个 bean 验证可以使用。国际海事组织。

**更新**：当您使用为您创建 bean 的 bean 框架时，您必须依赖 bean 验证。但否则它必须是`Factory`创建对象的责任，以确保**只创建一个有效的实例**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T06:55:35.813

您永远不希望代码中出现空指针异常。**从不**。尤其是在您自己的代码之外大量使用的函数中。`hashcode` `equals` `toString`永远不应该抛出异常。

顺便说一句：你总是可以只返回 id 作为哈希码。

# xslt - javax.xml.transform.TransformerException：com.sun.org.apache.xml.internal.utils.WrappedRuntimeException：连接超时：连接

> ID：15152149
> 
> 赞同：1
> 
> 时间：2013-03-01T06:49:22.530
> 
> 标签：xslt, https, doctype, dtd

我正在尝试使用 XSLT 转换 xml。我的 xml 在 xml doctype 中有 dtd 文件的“https”url。如果我删除此文档类型，我可以转换文件，但使用文档类型我会遇到错误。

```
ERROR:  'Connection timed out: connect'
ERROR:  'com.sun.org.apache.xml.internal.utils.WrappedRuntimeException: Connection timed out: connect'
javax.xml.transform.TransformerException: javax.xml.transform.TransformerException: com.sun.org.apache.xml.internal.utils.WrappedRuntimeException: Connection timed out: connect
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:719)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:313)
    at Example.main(Example.java:59)
Caused by: javax.xml.transform.TransformerException: com.sun.org.apache.xml.internal.utils.WrappedRuntimeException: Connection timed out: connect
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.getDOM(TransformerImpl.java:546)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:709)
    ... 2 more
Caused by: com.sun.org.apache.xml.internal.utils.WrappedRuntimeException: Connection timed out: connect
    at com.sun.org.apache.xalan.internal.xsltc.dom.XSLTCDTMManager.getDTM(XSLTCDTMManager.java:446)
    at com.sun.org.apache.xalan.internal.xsltc.dom.XSLTCDTMManager.getDTM(XSLTCDTMManager.java:234)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.getDOM(TransformerImpl.java:524)
    ... 3 more
---------
javax.xml.transform.TransformerException: com.sun.org.apache.xml.internal.utils.WrappedRuntimeException: Connection timed out: connect
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.getDOM(TransformerImpl.java:546)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:709)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:313)
    at Example.main(Example.java:59)
Caused by: com.sun.org.apache.xml.internal.utils.WrappedRuntimeException: Connection timed out: connect
    at com.sun.org.apache.xalan.internal.xsltc.dom.XSLTCDTMManager.getDTM(XSLTCDTMManager.java:446)
    at com.sun.org.apache.xalan.internal.xsltc.dom.XSLTCDTMManager.getDTM(XSLTCDTMManager.java:234)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.getDOM(TransformerImpl.java:524)
    ... 3 more
---------
com.sun.org.apache.xml.internal.utils.WrappedRuntimeException: Connection timed out: connect
    at com.sun.org.apache.xalan.internal.xsltc.dom.XSLTCDTMManager.getDTM(XSLTCDTMManager.java:446)
    at com.sun.org.apache.xalan.internal.xsltc.dom.XSLTCDTMManager.getDTM(XSLTCDTMManager.java:234)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.getDOM(TransformerImpl.java:524)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:709)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:313)
    at Example.main(Example.java:59)
---------
java.net.ConnectException: Connection timed out: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182) 
```

我无法在实时场景中删除此文档类型。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:19:14.343

您收到错误是因为解析器正在访问 Web 以解析 DOCTYPE 中 url 处的 DTD。此提取失败。

您需要在本地存储 DTD 并使用 EntityResolver 来使用本地副本。

请参阅此问题和最佳答案以了解如何执行此操作。[使用 XSLT 即 XML Transformer 时防止 DTD 下载](https://stackoverflow.com/questions/1091384/prevent-dtd-download-when-using-xslt-i-e-xml-transformer)

# jsp - 绕过jsf中某些链接的基于表单的身份验证

> ID：15152150
> 
> 赞同：1
> 
> 时间：2013-03-01T06:49:24.367
> 
> 标签：jsp, jsf

我正在学习 jsf。我创建了一个示例应用程序，我使用基于表单的身份验证对其进行了保护。

我能够使用正确的密码成功登录。问题是我在登录页面上有一个注册新用户链接。当我点击这个链接时，系统仍然要求输入密码。

我想绕过注册链接的身份验证。我怎样才能做到这一点？

# php - Magento：以编程方式更新购物车数量

> ID：15152153
> 
> 赞同：7
> 
> 时间：2013-03-01T06:49:33.467
> 
> 标签：php, magento, e-commerce, magento-1.7

我正在创建一个 magento 扩展。我想以编程方式更新购物车中的商品数量。我正在使用以下代码来显示购物车中的商品。

```
$quote = Mage::getSingleton('checkout/session')->getQuote();
$cartItems = $quote->getAllVisibleItems();
foreach ($cartItems as $item) {
  //Do something
} 
```

我想要的是更新购物车上特定产品的数量。我知道可以这样做

```
$pid=15;
$quote = Mage::getSingleton('checkout/session')->getQuote();
$cartItems = $quote->getAllVisibleItems();
foreach ($cartItems as $item) {
if($pid==$item->getId())
$item->setQty($qty);
} 
```

但我不喜欢这种方法，因为它会遍历每个产品来更新单个产品的数量。我想知道是否有一种方法可以在不使用 for 循环的情况下更新一行中的数量。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-01T08:43:44.550

您有 product_id，而不是 item_id 对吗？

如果是这种情况，则不可能在不执行整个项目的情况下获得产品 ID。

看看`Mage_Sales_Model_Quote::getItemByProduct($product);`你会发现它执行了整个目录。

基本上我会这样做：

```
//get Product 
$product = Mage::getModel('catalog/product')->load($pid);
//get Item
$item = $quote->getItemByProduct($product);

$quote->getCart()->updateItem(array($item->getId()=>array('qty'=>$qty)));
$quote->getCart()->save(); 
```

您应该使用一些快速技巧来优化它：

```
$quote->hasProductId($pid) to check if product is in the cart 
```

和

```
($qty!=$item->getQty()) 
```

检查数量是否还不是很好...

请注意，它是未经测试的代码，以及一些帮助您找到解决方案的反思，我没有为您完成这项工作。

亲切的问候，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-13T13:39:14.027

我相信它会起作用。试试这个。这是节省我的时间。

```
public function updateCartAction(){
    $item_id = $this->getRequest()->getParam('item_id');
    $qty = $this->getRequest()->getParam('qty');

    $quote = Mage::getSingleton('checkout/session')->getQuote();
    $quote->updateItem($item_id, array( 'qty' => $qty));
    $quote->save();
    echo "Sssssss";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-29T20:58:39.573

另一种解决方案

```
 $quote = Mage::getModel('sales/quote')->setStoreId($storeId)->load($cartid);
     $cartItems = $quote->getAllItems();
        foreach ($cartItems as $item) {

         if($cartiemid==$item->getId()){
             $item->setQty($qty);
             $item->save(); // you need to save the item after qty update
         }

        }
    $quote->save(); 
```

# android - 在 HTML5 中获取 Touchmove 的速度

> ID：15152155
> 
> 赞同：1
> 
> 时间：2013-03-01T06:49:51.533
> 
> 标签：android, html

我怎样才能获得速度（velocityX），我的手指在 HTML5 中从一个点移动到另一个点。我在 android 中使用了速度（velocityX）。像这样

```
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY){

    private static final int SWIPE_MIN_DISTANCE = 30;
private static final int SWIPE_MAX_OFF_PATH = 200;
private static final int SWIPE_THRESHOLD_VELOCITY = 400;

try {
    if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
        return false;
    // right to left swipe
    if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {

        startActivity( new Intent( this, x.class ) );
    }  else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
        //  Toast.makeText(getApplicationContext(), "Right Swipe", Toast.LENGTH_SHORT).show();

        startActivity( new Intent( this , aasas.class) );

    }
    else if(e1.getY() - e2.getY() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {

    }  else if (e2.getY() - e1.getY() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {

    }
} catch (Exception e) {
    // nothing
}

return true; 
```

}

我想在 html5 中实现同样的功能，但我无法获得velocityX，我的 html5 代码是这样的

```
 this.downX = null;
   this.upX = null;

document.body.addEventListener('touchstart', function(event) {
        event.preventDefault();
        console.log("movvv");
                this.downX = event.touches[0].pageX;

    }, true);

    document.body.addEventListener('touchmove', function(event) {
        event.preventDefault();
        this.upX = event.touches[0].pageX;
    }, true);

    document.body.addEventListener('touchend', function(event) {
        event.preventDefault();

        if ((this.downX - this.upX) > 50) {

            console.log("goooo");

        }
        if ((this.upX - this.downX) > 50) {

        }

    }, true); 
```

其实我想把这行Android改成Html5

```
if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) 
```

如果有任何请指导 HTML5 中的单点触控功能，如 Android onSingleTapUp

# iphone - NSOperation 和 NSURLConnection 冲突

> ID：15152157
> 
> 赞同：1
> 
> 时间：2013-03-01T06:50:16.317
> 
> 标签：iphone, ios, multithreading, thread-safety

在单独的线程上运行代码的最佳方式是什么？

```
 NSInvocationOperation *operationToComplete = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(operationMethod) object:nil];
 NSOperationQueue *queueToStart=[[NSOperationQueue alloc] init];
 [queueToStart addOperation:operationToComplete];

 -(void) operationMethod
 {
   NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&_response error:&_error];
 } 
```

或者：

```
 NSURLConnection *conn = [[NSURLConnection alloc] initWithRequest:request
                                                            delegate:self]; 
```

我一直在做第二种方式，但对此有点困惑或使用另一种方式来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T07:31:17.813

如果您有许多要调用的并发请求，则将操作队列与同步请求一起使用会特别有用。操作队列不仅可以轻松指定并发操作，还可以指定`maxConcurrentOperationCount`限制要运行的并发操作数量（如果您要启动一大堆并发操作，这一点很重要，因为您受限于可以运行的数量与给定的服务器同时运行）。

如果您需要这些方法（出于多种原因，例如您想要更新进度视图、您想要执行一些流式操作、您想要能够取消连接等），您的后一个示例（带有`initWithRequest`）很有用。 [`NSURLConnectionDataDelegate`](https://developer.apple.com/library/ios/DOCUMENTATION/Foundation/Reference/NSURLConnectionDataDelegate_protocol/Reference/Reference.html).

第三种方法是将`initWithRequest`方法与 an 结合`NSOperationQueue`起来，即将 the 包裹`NSURLConnection`在其自身`NSOperation`中。这结合了这两种技术，提供了丰富的`NSURLConnectionDataDelegate`方法（可取消、进度更新等），以及操作队列的强大功能（能够将网络请求添加到队列中，您可以为其配置并发度，建立操作之间的依赖关系，等），但提供了一个很好的界面。有一些特质可以正确实现这种方法（`NSURLConnection`如果你在`NSOperationQueue`. 因此，我可能会建议您使用第三方库，例如[AFNetworking](https://github.com/AFNetworking/AFNetworking)，如果您想享受这项技术的丰富性而又不会迷失在实现细节中。

在回答您“哪个最好”的问题时，这仅取决于您要做什么，因为它们都有优点和缺点。但我更喜欢`NSOperation`-based ，如果您想简化开发工作`NSURLConnection`，通常会建议使用[AFNetworking 。](https://github.com/AFNetworking/AFNetworking)

* * *

顺便说一句，您可能可以简化第一个示例：

```
NSOperationQueue *queue = [[NSOperationQueue alloc] init];

[queue addOperationWithBlock:^{
    NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&_response error:&_error];
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T06:56:32.443

使用 Grand Central Dispatch (GCD)，您可以在后台运行代码，这也更容易。

```
 dispatch_async( dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    }); 
```

而且[NSURLConnection 还支持两种操作模式：异步和同步。根本不使用单独的线程。](https://stackoverflow.com/questions/3364021/does-nsurlconnection-block-the-main-thread)

# sql - 使用现有主键在 DB2 中添加现有列作为主键

> ID：15152159
> 
> 赞同：3
> 
> 时间：2013-03-01T06:50:25.463
> 
> 标签：sql, db2

我在 DB2 中有一个表 MY_TABLE，其中包含几列：

```
PRODUCT_ID
ADDED_DT
PRODUCT_NAME
PRODUCT_COLOR
PRODUCT_PRICE
EXPIRY_DT 
```

在这些列中，下面的列构成主键：

```
PRODUCT_ID
ADDED_DT 
```

我想添加 EXPIRY_DT 作为主键，这样表现在将具有三个主键，即。PRODUCT_ID、ADDED_DT 和 EXPIRY_DT

我尝试了以下命令集：

```
ALTER TABLE MY_TABLE ADD PRIMARY KEY (EXPIRY_DT);
REORG TABLE MY_TABLE; 
```

但是，查询失败并出现错误：

```
Table "MY_TABLE" already has a "PRIMARY" key. 
```

如何实现这一目标？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-01T06:54:29.873

首先您需要删除现有的主键，然后添加新的主键

```
ALTER TABLE Table_Name DROP PRIMARY KEY;

ALTER TABLE Table_Name ADD PRIMARY KEY (Column_One, Column_Two); 
```

# jquery - 无法将 TextBox 值更改为大写

> ID：15152163
> 
> 赞同：0
> 
> 时间：2013-03-01T06:50:42.077
> 
> 标签：jquery

我有以下代码将 TextBox 值更改为大写。它仅适用于前两个 keyup 事件。例如“ab”到“AB”。但不会将“abc”更改为“ABC”。我不知道发生了什么。[jsFiddle在这里。](http://jsfiddle.net/XPkfj/24/)

```
<input type="text" class="FrmTextBox" id="Code">
<div id="output">

$(document).ready(function(){
    $(".FrmTextBox").keyup(function(key){
        $("#output").html($(this).val($(this).val().toUpperCase()));
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T06:57:57.307

而不是 html() 你可以在这里给出文本是代码尝试一下

```
$(document).ready(function(){
    $(".FrmTextBox").keyup(function(key){
        $("#output").text($(this).val($(this).val().toUpperCase()));
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T06:54:43.703

试试这个

```
$(document).ready(function () {
    $(".FrmTextBox").keyup(function (key) {
        $(this).val($(this).val().toUpperCase());
        $("#output").html($(this).val());
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T06:54:34.597

`$(elem).val(newValue)`返回一个 jQuery 对象而不是值。`$(elem).val()`（不带任何参数）返回值。

如果您需要设置值并返回它，请使用：`$(elem).val(newValue).val()`

在您的情况下，这将是：

```
$(document).ready(function(){
    $(".FrmTextBox").keyup(function(key){
        $("#output").html($(this).val($(this).val().toUpperCase()).val());
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T06:59:59.433

**CSS怎么样：**

```
input.upper { text-transform: uppercase; } 
```

# ruby - 长代码片段中的正确格式

> ID：15152164
> 
> 赞同：1
> 
> 时间：2013-03-01T06:50:44.980
> 
> 标签：ruby, formatting

如果我必须使用除非/如果和块，代码可能会变得很长。这看起来一点也不好看，我的问题是如何处理这种情况，正确的格式是什么，例如在这种假设的情况下？

```
if some_array.each.all? {|argument| argument.method_one == @some_value} && another_array.method_two == @completely_different_value

    #
    #some stuff here
    #

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:02:02.373

你可以把它分成几行。我认为这种格式更容易阅读

```
result1 = some_array.each.all? { |argument| argument.method_one == @some_value }
result2 = another_array.method_two == @completely_different_value
if result1 && result2
  #
  #some stuff here
  #
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:37:57.617

我建议将部分提取到变量中

```
condition1 = some_array.each.all? do |argument|
  argument.method_one == @some_value
end

condition2 = another_array.method_two == @completely_different_value

if condition1 && condition2
    #
    # some stuff here
    #
end 
```

或将条件变成方法

```
def condition1?(arr)
  arr.some_array.each.all? do |argument|
    argument.method_one == @some_value
  end
end

def condition2?(arr)
  arr.method_two == @completely_different_value
end

if condition1?(some_array) && condition2?(another_array)
    #
    # some stuff here
    #
end 
```

提取到方法中的优点是您的代码通常更容易测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T07:38:10.120

有很多方法可以完成您的任务。

最常见的方法是在 shell 提示符下使用反斜杠：

```
if some_array.each.all? { |argument| \
    argument.method_one == @some_value \
  } \
  && another_array.method_two == @completely_different_value \

 puts a
end 
```

您也可以在 s 处静默换行`dot`（点必须放在Ruby < 1.9*的行尾*或Ruby 1.9+ 的下一行*的开头。）*

```
"foo bar baz".
  reverse.
  split.
  map(&:capitalize).
  join ' '
# ⇒ "Zab Rab Oof" 
```

# php - 取消链接或 rmdir 无法删除文件夹。仅删除文件夹中的文件

> ID：15152165
> 
> 赞同：0
> 
> 时间：2013-03-01T06:50:47.177
> 
> 标签：php, unlink, rmdir

我在上传/project1/update 中有文件。

问题是，只有更新中的文件被删除。我想删除文件夹上传中的目录...也就是说，文件夹名称“project1”和“update”也会在更新中的文件被删除后删除。你能帮我找出错误吗？

```
$id = $_GET['id'];
$filename = $_GET['filename']; //gets the file name eg:update.zip
$fname = $_GET['fname']; //gets the folder name eg: project1
$upload = "upload/";

$name = explode(".", $filename);
$folder = $fname."/".$name[0];

$files = glob($upload.$folder.'/*'); // get all file names
foreach($files as $file)
{ // iterate files
if(is_file($file))
 unlink($file); // delete file dlm folder

}

closedir($name[0]); //close update dir
rmdir($name[0]); //remove update dir 
```

这个编码给出警告

> 警告：closedir() 期望参数 1 是资源，
> 
> 警告：rmdir（更新）[function.rmdir]：没有这样的文件或目录..

但是在目录上传中，有这个文件project1/update。

此外，文件名是“update.zip”只是数据库中的名称而已..不在目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:13:28.937

您不能`closedir()`在以前未使用`opendir()`PHP 函数打开（并存储在文件句柄中）的目录上。如果你愿意，`closedir()`你需要先使用`opendir()`. 这是根据 PHP 手册： http: [//php.net/manual/en/function.closedir.php](http://php.net/manual/en/function.closedir.php)

此外，如果您想要`rmdir()`一个目录，它需要完全为空，并且您需要适当的权限。否则，你会得到错误。这也是根据 PHP 手册： http: [//php.net/manual/en/function.rmdir.php](http://php.net/manual/en/function.rmdir.php)

# forms - Zend Framework 表单提交按钮样式

> ID：15152170
> 
> 赞同：0
> 
> 时间：2013-03-01T06:51:17.927
> 
> 标签：forms, zend-framework, button, zend-form, form-submit

是否可以从默认更改表单的提交按钮 - 就像 Gmail 按钮说的那样，它是蓝色的？目前我的表格中有这个：

```
$this->addElement('submit', 'form_element_signup', array('label' => 'Sign up',
                                                                 'tabindex' => 20,
                                                                 'decorators' => array('ViewHelper',
                                                                                        array(array('div' => 'HtmlTag'),
                                                                                               array ('tag' => 'button',
                                                                                                      'class' => 'action blue'))))); 
```

但这仍然给了我 div 按钮中的默认提交按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T07:18:00.027

您可以使用自己的 css 属性添加自定义类，如下所示

```
$this->addElement(new Zend_Form_Element_Button( 'send',
                   array( 'label' => 'registrieren', 
                          'class' => 'button-red', 
                          'type' => 'submit',
                          'escape' => false,
                          'required' => false,
                           'ignore' => false, ) )); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:26:10.567

是的，只需根据需要将适当的 CSS 应用于“div”、“tag”或“class”。 [22 CSS 按钮样式教程和技术](http://speckyboy.com/2009/05/27/22-css-button-styling-tutorials-and-techniques/)可能会有所帮助。

# media-player - 当 MediaPlayer 完成播放第一个音频时，MediaPlayer 更改数据源错误

> ID：15152172
> 
> 赞同：0
> 
> 时间：2013-03-01T06:51:37.767
> 
> 标签：media-player, android-mediaplayer, mpmediaplayercontroller

MediaPlayer 错误的任何一项帮助。当第一个音频正在编译其播放时，目标是更改数据源并播放第二个音频。

我的代码如下：- mMediaPlayer.setOnCompletionListener(new OnCompletionListener() {

```
 @Override
        public void onCompletion(MediaPlayer arg0) 
        {

           String fileName = Environment.getExternalStorageDirectory().getAbsolutePath() + FILENAME+arrListSize+".wav";
           mMediaPlayer.release();
           mMediaPlayer = null;
           mMediaPlayer = new MediaPlayer();
           Uri uri  = Uri.parse("file://"+fileName);                                    mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
            try 
            {
              mMediaPlayer.setDataSource(getApplicationContext(), uri);
              mMediaPlayer.prepare();
            } 
            catch (Exception e) 
            {                       
                e.printStackTrace();
            } 
```

错误：- setDataSource 在状态 32 中调用

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:39:24.770

从错误来看，之前的实例似乎`MediaPlayer`没有完全释放。播放完成后，播放器在调用时处于**暂停**状态。`onCompletionListener`你能在发布之前取悦`stop`吗`MediaPlayer`？

```
mMediaPlayer.stop();
mMediaPlayer.release();
mMediaPlayer = NULL;
mMediaPlayer = new MediaPlayer();
... 
```

# python - 将列表中的数字与整数进行比较，然后返回数字

> ID：15152174
> 
> 赞同：0
> 
> 时间：2013-03-01T06:51:53.967
> 
> 标签：python, list, python-3.x

我正在使用 python 版本 3。

对于家庭作业，我试图允许用户输入五位数字，然后找到这些数字的平均值。我已经弄清楚了那部分（花了一个小时学习地图功能，非常酷）。

问题的第二部分是将列表中的每个单独元素与平均值进行比较，然后返回大于平均值的元素。

我认为底部的“如果有”会将列表中的数字与平均值进行比较，但我不知道如何提取该值来打印它。你们为所有的帮助而摇滚。

```
#Creating a list
my_numbers = [input("Enter a number: ") for i in range(5)]

#Finding sum
Total = sum(map(int, my_numbers))

#Finding the average
Average = Total/5

print ("The average is: ")
print (Average)
print ("The numbers greater than the average are: ")

if any in my_numbers > Average: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T06:54:39.070

您需要做的是遍历列表并打印出高于平均值的数字：

```
for i in my_numbers:
    if int(i) > Average:
        print(i) 
```

为了使事情更容易，您可能还希望`my_numbers`列表实际上以整数列表*开始：*

```
my_numbers = [int(input("Enter a number: ")) for i in range(5)] 
```

现在我们可以去掉这个`map`函数了（别担心，时间没有浪费，你会发现它在其他情况下也很有用）。您也可以直接计算平均值而不计算总数，因为您不再需要总数。

```
Average = sum(my_numbers) / 5 
```

这意味着您可以更改`for`循环，以便可以替换`int(i)`为`i`.

您还可以创建一个带有列表推导的列表，然后打印出该列表中的值。

```
aboveAverage = [i for i in my_numbers if i > Average]
for i in aboveAverage:
    print i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T06:56:05.123

不幸的是，“如果有的话”不起作用。查看 any 函数的文档以了解它的作用。即使您的语法正确，它也不会做您想做的事。你想要的只是大于平均值的数字。您可以使用列表理解：[my_numbers 中数字的数字，如果数字 > 平均值]。或者你可以使用一个循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T07:16:40.900

```
#Creating a list
my_numbers = []
r = range(5)
for i in r:
    try:
        my_numbers.append(int(input("Enter a number: ")))
    except:
        print( 'You must enter an integer' )
        r.append(i)

#Finding sum
Total = sum(my_numbers)

#Finding the average
Average = Total/5
print ("The average is: ")
print (Average)
print ("The numbers greater than the average are: ")
print ([x for x in my_numbers if x>Average]) 
```

我敢肯定，即使没有人回答，您最终也会成功编写代码。

我的代码实际上是要指出您应该预见条目可能是非整数，然后放置指令管理输入错误。
这里的基本方式是使用`try except`

请注意我每次发生错误时添加的方式`i`，`r`以弥补`r`已消耗的元素。

# c# - 如何使用 ReportViewer Control for Windows 应用程序创建报告

> ID：15152182
> 
> 赞同：0
> 
> 时间：2013-03-01T06:52:25.420
> 
> 标签：c#, winforms

我在 Microsoft Access 2007 中有 2 个表。

表名“BillDetail”和“BillMaster”

BillMaster 中包含的字段为：BillNO、BillType、Dt、PartyName

BillDetail 表中包含的字段为：BillNo(Ref) Serial No. Desc HSNCode Qty Rate。

我需要从两个表中获取数据。主记录应显示在表头中，所有相关项目应以表格形式显示。我最后想把这些信息打印成账单。

我的基本需求是不使用水晶报表。我在互联网上进行了很多搜索，并找到了使用 ReportViewer 控件的解决方案。但不幸的是，我不知道如何使用此控件构建报告。请帮我生成报告或发布一些教程链接。

请帮忙。我对 Windows 应用程序开发完全陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T06:59:11.720

报表查看器控件能够呈现在文件中定义的`rdl`报表`rdlc`。

`rdl`代表“报告定义语言”，“C”代表“客户端报告”，即“服务器报告”

因此，如果您没有安装报告服务器，您可能最好使用`rdlc`并附加您的 Access 2007 DB 作为报告的数据源。

这里有几个用于创建`rdlc`报告文件和使用报告查看器控件的教程：

[CodeProject - 如何将报告（即 rdlc 文件）与项目表单连接起来。](http://www.codeproject.com/Questions/398128/How-to-connect-a-report-i-e-rdlc-file-with-the-pro)

[使用 ssrs 创建独立 .rdlc 报告的初学者指南](http://www.c-sharpcorner.com/UploadFile/robo60/StandaloneRDLCReports11142007183516PM/StandaloneRDLCReports.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T05:51:50.727

在这里您可以找到一个示例，如何使用代码示例在 C# 中生成 RDLC 报告...

[http://www.dotnetsharepoint.com/2013/08/how-to-create-rdlc-report-in-c-windows.html#.UgCO6pKfjwg](http://www.dotnetsharepoint.com/2013/08/how-to-create-rdlc-report-in-c-windows.html#.UgCO6pKfjwg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-17T15:23:32.647

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Configuration;

using System.Data.SqlClient;
using Microsoft.Reporting.WinForms;

namespace RDLC
{
    public partial class RD : Form
    {
        public RD()
        {
            InitializeComponent();
        }

        private void RD_Load(object sender, EventArgs e)
        {
            DataTable dt = new DataTable();
            dt = GetData("select * from tbl_Admission_Form");
            ReportDataSource datasource = new ReportDataSource("DataSet1", dt);
            reportViewer1.LocalReport.DataSources.Clear();
            reportViewer1.ProcessingMode = ProcessingMode.Local;
            reportViewer1.LocalReport.ReportEmbeddedResource = "RDLC.Report1.rdlc";
            reportViewer1.LocalReport.DataSources.Add(datasource);
            //this.reportViewer1.RefreshReport();
            this.reportViewer1.RefreshReport();
        }
        private DataTable GetData(string query)
        {
            string conString = ConfigurationManager.ConnectionStrings["constr"].ConnectionString;
            SqlConnection con = new SqlConnection(conString);
            con.Open();
            SqlCommand cmd = new SqlCommand(query);
            cmd.Connection = con;
            cmd.ExecuteNonQuery();
            cmd.Dispose();
            SqlDataAdapter sda = new SqlDataAdapter(cmd);
            DataTable ds = new DataTable();
            sda.Fill(ds);
            return ds;
        }
    }
} 
```

# python - python中的简单正则表达式过滤掉一个单词

> ID：15152183
> 
> 赞同：0
> 
> 时间：2013-03-01T06:52:28.233
> 
> 标签：python, regex, python-2.7

我的输出为

```
app_39    281   33    94332  21228 ffffffff afd0c51c S abc
app_39    292   33    103864 30060 ffffffff afd0c51c S cvc.notes
app_39    303   33    94332  21344 ffffffff afd0c51c S cocccs:syncHandler
app_39    312   33    94332  21404 ffffffff afd0c51c S cccs:cacheHandler
app_39    321   33    94332  21344 ffffffff afd0c51c S cocccs:dailyReceiver 
```

整个输出存储在一个名为 outresult 的变量中

如何使用 python 提取第二行的第二个单词？那是292并将其存储在变量中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T06:54:09.833

```
output.split('\n')[1].split()[1] 
```

不需要正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:32:17.673

```
ss = '''app_39    281   33    94332  21228 ffffffff afd0c51c S abc
app_39    292   33    103864 30060 ffffffff afd0c51c S cvc.notes
app_39    303   33    94332  21344 ffffffff afd0c51c S cocccs:syncHandler
app_39    312   33    94332  21404 ffffffff afd0c51c S cccs:cacheHandler
app_39    321   33    94332  21344 ffffffff afd0c51c S cocccs:dailyReceiver'''

def lect(inp,nline,nw):
    gen = (xli.split() for i,xli in enumerate(inp.splitlines()) if i==nline-1)
    return gen.next()[nw-1]

print lect(ss,2,2) 
```

# mysql - MYSQL 错误 #1064 尝试使用另一个表的总和更新一个表

> ID：15152184
> 
> 赞同：-1
> 
> 时间：2013-03-01T06:52:30.600
> 
> 标签：mysql, sql, sql-update, mysql-error-1064

我已经在这个问题上工作了几天，并且在论坛之后搜索了论坛。对于格式化这个问题，我想出了相同的答案，但我仍然遇到同样的问题。我希望有人能提供帮助。我在此代码上收到错误 #1064。我知道这与调用学生表有关，我无法修复错误。

```
UPDATE
  s 
SET
  tot_cred = u.real_cred 
FROM
  student s
  JOIN (
    SELECT ID, SUM( credits ) real_cred
    FROM takes t
    JOIN course c ON t.course_id = c.course_id
    WHERE grade <>  'F'
    AND grade IS NOT NULL 
    GROUP BY ID
  ) u ON s.ID = u.ID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T06:53:46.907

您正在使用带有连接语法的更新 for `SQL Server`，这里是 for `MySQL`：

```
UPDATE  student s 
        INNER JOIN 
        (
            SELECT  ID,     SUM( credits ) real_cred
            FROM    takes t
                    INNER JOIN course c 
                        ON t.course_id = c.course_id
            WHERE   grade <>  'F' AND 
                    grade IS NOT NULL 
            GROUP   BY ID
        ) u ON s.ID = u.ID
SET     s. tot_cred = u.real_cred 
```

# python - 单元测试失败，说“WSGIRequest”对象没有属性“城市”

> ID：15152185
> 
> 赞同：1
> 
> 时间：2013-03-01T06:52:44.623
> 
> 标签：python, django

我已经编写了一个单元测试来测试一个 api ......它是一个 GET 调用......当我运行它时，我得到这个错误......这是回溯......

```
Traceback (most recent call last):
  File "/home/arindam31/XXX-Name/mapi/tests.py", line 141, in test_get_cities
    response = self.cl.get('/mapi/latest/cities/')
  File "/usr/local/lib/python2.7/dist-packages/django/test/client.py", line 445, in get
    response = super(Client, self).get(path, data=data, **extra)
  File "/usr/local/lib/python2.7/dist-packages/django/test/client.py", line 229, in get
    return self.request(**r)
  File "/usr/local/lib/python2.7/dist-packages/django/test/client.py", line 387, in request
    response = self.handler(environ)
  File "/usr/local/lib/python2.7/dist-packages/django/test/client.py", line 84, in __call__
    response = self.get_response(request)
  File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 169, in get_response
    response = self.handle_uncaught_exception(request, resolver, sys.exc_info())
  File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 218, in handle_uncaught_exception
    return callback(request, **param_dict)
  File "/home/arindam31/XXX-Name/saul/views.py", line 546, in do_handle_500
    return render_to_response("500.html", context_instance=RequestContext(request))
  File "/usr/local/lib/python2.7/dist-packages/django/template/context.py", line 177, in __init__
    self.update(processor(request))
  File "/home/arindam31/XXX-Name/saul/context_processors.py", line 46, in common_context
    ret_dict['city'] = request.city
AttributeError: 'WSGIRequest' object has no attribute 'city' 
```

这是我的单元测试...

```
def test_get_cities(self):
    request = HttpRequest()
    request.city = self.c1
    response = self.cl.get('/mapi/latest/cities/')
    content = response.content
    data = json.loads(content)
    for city in City.objects.all():
        assert city.name in data
        assert data[city.name] == city.pk 
```

这里，self.c1是setUp部分中的城市类型对象......HttpRequest来自django.http。

正在测试的视图如下：

```
def get_cities(request): 
    print "1"
    if ENABLE_HTTPS_CHECK and not request.is_secure():
        return HttpResponseForbidden()
    if request.method != 'GET':
        return HttpResponseNotAllowed('Not allowed')
    city_map = _get_city_map()
    response = HttpResponse(json.dumps(city_map)
    content_type='application/json')
    response['Cache-Control'] = 'no-cache'
    return response 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-02T08:45:20.760

如果你想用你自己的请求对象测试你的视图，你应该直接调用视图。您应该使用[RequestFactory](https://docs.djangoproject.com/en/1.5/topics/testing/advanced/#django.test.client.RequestFactory)来创建您的请求。

正如 Daniel Roseman 指出的那样，您的请求对象具有 city 属性仍然损坏，除非您有一些可以设置它的中间件。您显然有一些中间件需要在`saul/context_processors.py`.

直接使用`RequestFactory`和调用视图完全绕过了中间件，因此您可以专注于测试您的视图（如果视图支持缺少的中间件）。

如果您的视图需要 middelware 可操作，您可能只需要使用测试客户端登录即可。它有一个会话公关测试方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T09:11:24.070

我不知道你想在这里做什么。您实例化一个请求对象，分配一个城市属性，然后继续忽略该对象并仅使用标准测试客户端。我不知道您为什么认为该请求将用于客户端获取。

老实说，虽然我认为你的整个设计都被打破了。您不会显示在正常的非测试场景中如何将参数放入请求中，但通常您会通过 POST 或 GET 参数传递它，而不是以某种方式将其注释到请求中。这当然会使测试更容易，因为您可以将字典传递给客户端调用。

# c - 使用 C 进行字符串对齐

> ID：15152187
> 
> 赞同：2
> 
> 时间：2013-03-01T06:52:56.380
> 
> 标签：c

所以我必须将字符串以及该字符串的长度写入文件。输出应如下所示：

```
======= =====
merrily   7
    row   3
   your   4
   boat   4
 gently   6
   down   4
    the   3
  dream   5
 stream   6
   life   4
     is   2
    but   3
      a   1 
```

所以我有一个名为的字符串数组`char big[50]`，它保存列表中最大长度的字符串。如果我使用`strlen(big)`，我会得到 7，因为`merrily`它是该列表中最大的字符串并且字数为 7。那么我应该如何打印它并说明理由？我不能写`fprintf(fpOut, "%7s %d\n, table[i], strlen(table[i]);`，因为我的程序有多个用户可以打开的文件，如果我使用`%7s`它就不能正确地证明其他文件是正确的。有没有解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T06:59:18.817

您可以用星号替换恒定宽度说明符 (7) 以获得可变宽度说明符。所以下面的代码将有一个宽度说明符`strlen(big)`：

```
fprintf(fpOut, "%*s %d\n", strlen(big), table[i], strlen(table[i]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T06:59:01.503

您可以为此使用 printf：

```
#include <stdio.h>

int main(int argc, char *argv[]){
  printf("%*s |\n", 7, "let"); 
  // or to file:  fprintf(file, "%*s |\n", 7, "let");
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T21:07:46.517

您可以在 fprintf 参数中指定字符串的长度。你也可以看看我的项目：libtprint - 一个打印表格数据的简单库，[https://github.com/wizzard/libtprint](https://github.com/wizzard/libtprint)。在那里，我使用各种技巧来证明字符串的合理性。

希望能帮助到你 ！

# iphone - AWS iOS SDK 获取存储桶元数据

> ID：15152191
> 
> 赞同：0
> 
> 时间：2013-03-01T06:53:10.693
> 
> 标签：iphone, ios, objective-c, amazon-s3

我看到有一个 S3GetObjectMetaDataRequest，但是有什么方法可以获取存储桶中所有对象的元数据吗？我检查了 S3ObjectSummary，它没有任何元数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:18:27.307

要通过 API 获取有关存储桶中对象的信息，您必须遍历枚举对象列表，即您必须获取对象列表，然后单独调用您想要获取信息的每个对象，即没有办法比如说“给我一个包含所有对象元数据的数组”。在使用 S3 对象版本控制数小时后，我了解到这一点。

# android - Android编程如何翻译一个数字

> ID：15152205
> 
> 赞同：2
> 
> 时间：2013-03-01T06:54:00.010
> 
> 标签：android

在我的应用程序中，我试图将用户当前设备​​的 Android 版本显示为文本视图，但是我使用了 os.build.version.sdk，当我使用它时，只有 sdk 代码显示例如 Android 4.0.4 和我的 17正在尝试让 Android 版本显示，所以有没有办法制作 if 或 else 语句在运行时将 17 更改为 4.0.4。我在下面附上了我的java类。

```
{
    TextView tv = (TextView) findViewById(R.id.display);
    tv.setText(android.os.Build.VERSION.SDK);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:04:27.613

要显示 Android 版本号，我建议使用 android.os.Build.VERSION.RELEASE：http: [//developer.android.com/reference/android/os/Build.VERSION.html](http://developer.android.com/reference/android/os/Build.VERSION.html)

```
{
    TextView tv = (TextView) findViewById(R.id.display);
    tv.setText(android.os.Build.VERSION.RELEASE);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:04:56.443

尝试使用

```
TextView tv = (TextView) findViewById(R.id.display);
tv.setText(String.valueOf(android.os.Build.VERSION.RELEASE)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T06:58:08.073

我认为您可以改用 VERSION.RELEASE 字段。

```
tv.setText(android.os.Build.VERSION.RELEASE + ""); 
```

# json - 如何从json字符串制作列表

> ID：15152207
> 
> 赞同：-4
> 
> 时间：2013-03-01T06:54:03.797
> 
> 标签：json, r, date

我有一个 JSON 文件“adjFloatTest.data”。在 R 中，我使用以下代码从该文件中读取字段“Volume”：

```
json <- fromJSON("adjFloatTest.data")
volume <- json$volume 
```

音量值如下

```
> volume
$AAPL
$AAPL[[1]]
1980-12-12 
  16751200 

$AAPL[[2]]
1980-12-15 
 100424081 

$AAPL[[3]]
1980-12-16 
 0.1177374 

$AAPL[[4]]
1980-12-17 
   7164476 

$AAPL[[5]]
1980-12-18 
   5364366 
```

每个元素对应公司、日期、价值。我想将每个日期存储到一个列表中。怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:12:03.933

这将为您提供日期列表

```
sapply(volume,names) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T06:58:04.107

以下应该有效：

```
 sapply(volume, function(x) lapply(x, "[[", 1)) 
```

* * *

但是可以复制+粘贴的可重现示例会有所帮助。

如果上述方法不起作用，请使用诸如`dput(volume[1:2])`提供一些可行的示例数据之类的东西。

# android - 将时间戳更改为另一个 gmt+ 时间戳

> ID：15152209
> 
> 赞同：1
> 
> 时间：2013-03-01T06:54:12.363
> 
> 标签：android

这是我的代码，但在更改时区后得到相同的时间戳。

```
TimeZone timeZone = TimeZone.getTimeZone("GMT+11");
Calendar cal1 = Calendar.getInstance();
Calendar cal2 = Calendar.getInstance();

cal1.setTimeInMillis(Long.parseLong(classListDto.get(i)
    .getClassStartTime()) * THOUSAND);
cal2.setTimeInMillis(Long.parseLong(classListDto.get(i)
    .getClassEndTime()) * THOUSAND);
cal1.setTimeZone(timeZone);
cal2.setTimeZone(timeZone);

long startTimestamp = cal1.getTimeInMillis();
long endTimestamp = cal2.getTimeInMillis(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:15:52.780

尝试这样的事情，而不是在您的`Calendar`实例中设置时区。

```
TimeZone timeZone = TimeZone.getTimeZone("GMT+11");
Calendar cal1 = Calendar.getInstance();
cal1.setTimeInMillis(Long.parseLong(classListDto.get(i).getClassStartTime()) * THOUSAND);

Date tempDate = cal1.getTime();
SimpleDateFormat df = new SimpleDateFormat();
SimpleDateFormat df1 = new SimpleDateFormat();

df.setTimeZone(timeZone);
Date gmtDate = df1.parse(df.format(tempDate)); // Put this in a Try/Catch block

long startTimestamp = gmtDate.getTime(); 
```

希望这可以帮助！我知道使用 2 个`SimpleDateFormat`对象很糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:24:45.553

`cal1.getField(Calendar.HOUR);`如果您执行 a而不仅仅是读取毫秒数，您可以在代码中看到时区更改。日历似乎仅根据 UTC 存储毫秒：http: [//docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#getTimeInMillis()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#getTimeInMillis())

# linux - FSCK“意外不一致；手动运行 fsck”的解决方法

> ID：15152215
> 
> 赞同：2
> 
> 时间：2013-03-01T06:54:34.797
> 
> 标签：linux

我有一个基于 Linux 系统的 LFS（来自 Scrach 的 Linux）。Linux 内核版本 2.6.29.6 #1 SMP PREEMPT。该系统使用 Extlinux 引导程序并从 SSD（Micron USB 固态设备）引导。此系统中还有一个备用硬盘驱动器，但不用于启动。我们将引导从 HDD 更改为 SSD，因为我们发现 SSD 比 HDD 更快且可靠。

每当断电时，设备会重新启动，断电会导致 SSD 损坏。重新启动后，Fsck 命令由脚本 checkfs 运行。系统停止并显示错误消息“”UNEXPECTED INCONSISISTANCY; 手动运行 fsck 错误并且单元停止并且无法重新启动，直到我们手动重新启动。

我检查了 checkfs 脚本，发现在这种情况下，运行 fsck -a -A -C -T 并返回错误值 > 3 和 < 16，其操作是停止系统并使用 CD 重新启动并运行 fsck手动解决问题。

我尝试更改 checkfs 脚本并使用 fsck -y 修复了所有错误并且单元正常启动，但是在修复问题时，许多文件被删除。其次，如果我忽略 fsck 错误而不是系统停止，如果我继续正常启动，它可以工作，但由于它不能修复文件系统问题，因此该单元可能无法正常工作。

在这一点上，我想知道是否有任何解决方法来解决这个问题，并且仍然可以正常启动系统并修复文件系统问题？如果 fsck 失败然后从 SSD 卸载根文件系统并从 HDD 安装并正常启动，然后在启动后恢复 SSD 文件系统，我可以做类似的事情吗？如果是的话，有什么指示吗？请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-11T09:26:12.193

您可以附加“fastboot”作为内核参数（在 grub 中）以跳过 fsck。

# mysql - 从忽略前 Y 行的表中选择前 X 行

> ID：15152217
> 
> 赞同：1
> 
> 时间：2013-03-01T06:54:35.750
> 
> 标签：mysql, sql

如果我想从表中检索前 10 行，我将使用以下代码：

```
SELECT *
FROM Persons
LIMIT 10 
```

我想知道的是如何检索前 10 个之后的 10 个结果。

如果我在下面执行此代码将得到我想要的结果，但前 10 行将是不必要的：

```
SELECT *
FROM Persons
LIMIT 20 
```

那么我怎样才能忽略前 10 个结果而只获得下一个结果呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T06:56:06.763

如果要获取接下来的 10 个值，则需要指定起始记录和持续时间。

```
SELECT *
FROM   Persons
LIMIT  10, 10 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/de3c9/1)

其他来源：

*   [MySQL 限制](http://php.about.com/od/mysqlcommands/g/Limit_sql.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T06:57:39.803

根据[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/select.html)，您可以指定限制的*偏移量*（从 1 开始索引）。有两种有效的语法：

```
SELECT cols FROM t1 LIMIT 10, 10
SELECT cols FROM t1 LIMIT 10 OFFSET 10 
```

请注意，在第一个中，`OFFSET`实际是第一个参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T06:58:30.600

我强烈建议使用它，

```
SELECT *
FROM   Persons
LIMIT  10, OFFSET 10; 
```

因为，如今最大的问题是代码的可读性。这有点可读。

# app-store - AppStore 应用程序文件大小是什么意思？

> ID：15152219
> 
> 赞同：0
> 
> 时间：2013-03-01T06:54:43.173
> 
> 标签：app-store, itunes, filesize

它说从 AppStore 无线下载的限制仅为 50 MB。但是我们有这个应用程序出于某种原因它超过了 50+ MB。之前的版本只有 49.1 MB，然后我们只增加了大约 100 kB，但是当我们发布它并发布时，它变成了 51.5 MB。

我们没有收到任何关于文件大小的警告，我们也可以通过 3G 下载它。

现在，我的问题是，文件大小的真正含义是什么？是包的文件大小还是安装时间？见下图。

![文件大小](../Images/36996c941ea3a5fd51bba30e36ccf041.png)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T07:02:53.940

就是包文件。Apple 可能会在您将其提交到应用商店（例如 DRM）之间对其进行修改。

我建议在提交时将应用程序保持在 45MB 以下。这样一来，您就可以确信 Apple 在此过程中可能引入的管理费用不会使其超过 50MB 的限制。

此外，可能是 Apple 在某些区域使用了不同的转换（可能是 1000KB = 1MB，而不是 1024KB = 1MB），这可能是造成这种情况的原因。

# perl - 我在哪里做错了？

> ID：15152222
> 
> 赞同：1
> 
> 时间：2013-03-01T06:54:50.553
> 
> 标签：perl

我只想在输入介于 1 到 5 之间时才进入循环，否则它应该要求“输入有效选项：”

这是我尝试过的

```
#!/usr/bin/perl
use strict;
use warnings;
use Switch;

print qq/\tMENU\n 1.BACKUP\n 2.RESTORE\n 3.TABLESPACES\n 4.BUFFERPOOLS\n 5.EXIT\n/;
print "Enter Your Choice : ";

while(<STDIN>){
        chomp;
        if (1..5){
        print qq/wright\n/;
        } else {
        print qq/wrong\n/;

        }
} 
```

我在中途，我试图检查它是否工作，但它不是....即使我给 6 或 7 .... 作为输入它的给写，我的意思是它进入if循环而不是else............帮助表示赞赏............

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T07:09:44.043

您的问题是，在标量上下文中是[范围运算符](http://perldoc.perl.org/perlop.html#Range-Operators)`1..5`的触发器版本。

> 一旦左操作数为真，范围运算符保持真，直到右操作数为真，之后范围运算符再次变为假。

`1`总是正确的，所以你的 if 语句在第一次通过时总是正确的。 `5`也始终为真，因此 if 语句第二次变为假，此后保持假。请注意，您的输入变量永远不会参与其中。

您可以使用正则表达式，但如果您需要锚定它：

```
if (/^[1-5]$/) 
```

锚点确保*整个字符串*是 1 到 5 之间的单个字符。如果您只使用`if (/[1-5]/)`，则匹配*包含*数字 1-5 的任何内容，因此`1200`并且`foo5`将被视为有效。

但是，假设您将根据用户输入的内容执行五项不同的操作。因此，您可能根本不应该使用正则表达式，而只需检查每个条件：

```
 if    ($_ == 1) { do something         }
 elsif ($_ == 2) { do something else    }
 elsif ($_ == 3) { do something else    }
 elsif ($_ == 4) { do something else    }
 elsif ($_ == 5) { do something else    }
 else            { handle invalid input } 
```

您可以使用不同的语法来完成与[`Switch`模块](http://perldoc.perl.org/Switch.html)相同的事情（您包含但未在代码中实际使用）：

```
switch ($_) {
case 1      { print "number 1" }
case 2      { print "number 2" }
case 3      { print "number 3" }
case 4      { print "number 4" }
case 5      { print "number 5" }
else        { print "invalid"  }
} 
```

另一种可能性（如 Raina77ow 所建议的）是使用[smartmatch 运算符](http://perldoc.perl.org/perlop.html#Smartmatch-Operator)。它有多种用途，包括检查数组中是否存在元素：

```
my @valid_input = (1..5); #Range operator in list context generates an array.
if ($_ ~~ @valid_input) { print "Input was a number between 1 and 5"; } 
```

您可以使用匿名数组引用 ( `[ ]`) 来缩短该代码。

```
if ($_ ~~ [1..5]) { print "Input was a number between 1 and 5"; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T07:01:33.717

试试这个循环：

```
my $input;
do {
  print "Enter valid option: ";
  chomp ($input = <STDIN>);
} while ($input < 1 && $input > 5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T07:13:02.510

那这个呢？

```
if ($_ =~ /^[1-5]$/) 
```

或者

```
if (/^[1-5]$/) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T07:01:41.217

使用`if (/^[1-5]$/)`而不是`if (1..5)`

# visual-studio - Visual Studio 2012 中外部项目的配置

> ID：15152226
> 
> 赞同：3
> 
> 时间：2013-03-01T06:55:06.050
> 
> 标签：visual-studio, visual-c++, visual-studio-2012, ide, propertysheet

我在使用 Visual Studio 2012 时遇到问题，我希望有一个解决方案。我的解决方案中有 2 个项目：1 个项目是“.exe”项目，另一个是“.lib”项目。我已经在exe项目中添加了lib项目作为参考，并且我已经确保它被安排在第一个编译。lib 项目有一堆额外的包含目录和一堆额外的依赖和链接库。lib 项目编译良好。但是，exe 应用程序不会继承任何其他包含目录或其他库目录或依赖项。我可以通过将配置复制到 exe 项目来解决这个问题，但这意味着如果我更新了 lib 依赖项，然后我需要在每个使用这个库的项目中更新它（我玩这个库用于多个项目）。这似乎应该有一个解决方案，但我似乎无法找到它。有没有人想办法让项目继承引用项目的配置，或者没有办法解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T03:28:23.647

没错，项目不会继承它们引用的其他项目的属性。为了解决您的问题，您需要一张**属性表**。属性表是与项目分开的属性集合（就像您在项目属性中设置的一样）。您可以将单个属性表应用于多个项目。

在您的情况下，“其他库依赖项”和“其他包含目录”将被放入属性表中。该属性表将应用于您的`.exe`项目和您的`.lib`项目。当您进行更改时，您将对属性表进行更改，并且两个项目都会看到更改。

让我们一步一步地设置一个属性表来做你想做的事。

1.  将您的解决方案文件与您的`.exe`项目`.lib`一起加载。假设您的库的名称是`PowerMath.lib`并且您的主要可执行文件是`SuperCalc.exe`.
2.  在 Visual Studio 中找到**解决方案资源管理器**窗口。这是列出所有项目以及这些项目中的文件的子窗口。（如果您没有，请单击“查看”菜单并选择“解决方案资源管理器”选项来创建一个。）
3.  首先，让我们从您现在设置的项目属性中*取出设置。*转到项目的项目属性`PowerMath.lib`（在解决方案资源管理器中右键单击该项目，然后从上下文菜单中选择属性）。找到您所做的“其他库依赖项”和“其他包含目录”设置，然后将其删除。（只删除您的更改，而不是之前的任何更改。）（另外，将您的内容写下来或复制到某处——它将在第 10 步中返回。）当您完成项目后，对项目`PowerMath.lib`重复该过程`SuperCalc.exe`. 把它全部撕掉，这样它就不会干扰我们将要采用的新方法。确保您已为项目的所有配置（调试和发布，
4.  在解决方案资源管理器窗口的底部，您将看到几个选项卡，包括：解决方案资源管理器、类视图和属性管理器。如果窗口很小，这些可能会被缩写。单击**属性管理器**。
5.  在属性管理器中，您将看到两个条目：`PowerMath`和`SuperCalc`项目名称。右键单击`PowerMath.lib`项目，然后选择菜单选项**Add New Property Sheet**。
6.  选择一个引用您的库的好名称。我会建议`PowerMath-settings.props`。然后单击**Add**创建属性表，并自动将其附加到`PowerMath`.lib 项目。
7.  回到 Property Manager 窗格，您会看到 PowerMath 在其下方有两个元素：**Debug**和**Release**。这是您的库的两种配置。如果您通过用鼠标单击它们“打开它们”，您会看到`PowerMath-settings`属性表已附加到两个配置中。
8.  `PowerMath-settings`属性表列在一堆已经存在的其他属性表的上方，它们的名称类似于`Core Windows Libraries`和`Unicode Support`。 *您项目的任何配置中的所有*设置都来自这些属性表的组合！这就是属性在 Visual Studio 中的工作方式——将项目的所有属性表按顺序放在一起，第一个在底部。
9.  双击`PowerMath-settings`列表中的属性表。这将带您进入熟悉的项目属性界面。此处所做的更改不适用于项目或该项目中的特定配置。相反，您只为属性表编写设置`PowerMath-settings.props`。
10.  现在您可以编写**附加的库依赖项**和**附加的包含目录**。转到您希望设置这些内容的对话框。在相应的字段中，单击字段右侧的小向下箭头并选择`Edit...`。
11.  在编辑框中，您将看到一个空白区域，您可以在其中编写新设置。（您还将看到“继承值”，它们是来自其他属性表的设置。）添加您的内容，然后单击“确定”。
12.  完成后，您将拥有一个名为的属性表`PowerMath-settings.props`，其中存储库的所有用户所需的设置`PowerMath.lib`。
13.  现在返回到 Property Manager 窗口。而是右键单击`SuperCalc`项目（这是您的 .exe）。选择菜单选项**Add Existing Property Sheet**。找到`PowerMath-settings.props`并选择它。
14.  Boom，现在`SuperCalc.exe`获取您刚刚创建的所有设置`PowerMath.lib`。
15.  要验证这一点，请从属性管理器切换回解决方案资源管理器（通过单击子窗口底部的解决方案资源管理器选项卡）。转到项目的项目属性`SuperCalc.exe`。转到“其他包含目录”。单击该字段左侧的向下箭头并选择`Edit...`。您将看到您的属性表设置被列为“继承值”。
16.  有时，在您退出 Visual Studio、重新启动并重新加载解决方案之前，不会应用全新属性表的设置。当它询问您是否要保存项目更改和新属性表时，请记住单击**“是” ！**一旦一切都设置好，你不应该再这样做了。

现在，只要您有一个使用 的新项目`PowerMath.lib`，只需转到属性管理器并添加现有属性表：`PowerMath-settings.props`。

请记住，对属性表中的属性所做的所有更改都必须通过属性管理器对话框进行，*而不是*使用`PowerMath.lib`项目属性！项目属性是一种“覆盖”属性表，仅适用于一个特定项目。它位于物业经理列出的所有物业表之上。

# sql - 触发计算值并将其添加到表中

> ID：15152227
> 
> 赞同：1
> 
> 时间：2013-03-01T06:55:07.197
> 
> 标签：sql, sql-server-2008, triggers

我正在尝试编写触发器，它将在表中插入缺失值。我正在使用 SQL Server Express 我有表

```
create table test 
(suma int ,
summ_year int,
summ_month int 
); 
```

然后我插入一个测试值

```
INSERT  into test (suma)values (4951) 
```

比我创建的触发器应该根据`summ`表中的值计算值

```
create trigger updatetest
on test
AFTER update
as update test
set summ_year = round(suma*1.85,0 ),summ_month = round(summ_year/12,0) 
```

它在哪里`1.85`是固定值，`12`是几个月

比我更新 suma

```
update test  set suma = 4950 
```

并选择检查它是如何工作的

```
select * from test 
```

从选择返回看起来像这样`4950 9158 NULL` 但是我的触发器的第二部分应该计算`summ_month = round(summ_year/12,0)`返回给我 NULL 值。

当我运行这个选择时

```
select summ_month = round(summ_year/12,0) from test 
```

这是工作。任何想法如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:06:46.363

Why not just use computed columns:

```
create table test 
(suma int ,
summ_year as round(suma*1.85,0 ),
summ_month as round(round(suma*1.85,0 )/12,0) 
); 
```

No trigger, no muss, no fuss.

As to why your `UPDATE` isn't working? The expressions in the `SET` statement are meant to be computed as if they're evaluated in parallel. They're certainly not evaluated from left to right. So, at the point at which you're computing `summ_month = round(summ_year/12,0)`, `summ_year` hasn't been updated yet and is still `NULL`.

A nice consequence of this behaviour is that to swap the value of two columns, you need only write:

```
UPDATE tab SET a = b, b = a 
```

And it does the right thing.

If you do want (for some odd reason) to continue to perform these calculations in a trigger, you'll have to do as I did for the computed columns up at the top - repeat the expression for computing the year value in calculating the month value:

```
update test
set summ_year = round(suma*1.85,0 ),summ_month = round(round(suma*1.85,0 )/12,0) 
```

# c++ - 为什么查找字符串的方法比我的单遍更快？

> ID：15152228
> 
> 赞同：3
> 
> 时间：2013-03-01T06:55:07.483
> 
> 标签：c++, performance, stl

`O(n)`为什么 C++ STL 字符串查找子字符串的 find 方法比简单的字符串传递要快，我有点震惊。这里有两个不同的函数：为什么在 , 中找到的第二个函数`str1`比`str2`第一个函数快（优化得很好）？我知道第一个函数的任务略有不同，但它仍然只是一个传递`str1`and `str2` `(O(n))`，而第二个函数可能`O(n^2)`需要`str1`在`str2`. 真的为什么？你们有什么想法吗？先感谢您。

PS 这些功能是更大项目的一部分。它们在我的代码中被调用了很多次来比较两个字符串。如果我使用第二个函数，整个代码的运行时间几乎是一半（135 秒 VS 235 秒）！

```
bool Is_Included1(string str1, string str2)
{
    size_t i,s;
    s=str1.size();
    if (s<=str2.size())
    {
        for (i=0;i<s;i++)
            if (str1[i]!=str2[i])
                return false;
        return true;
    }
    return false;
}

bool Is_Included2(string str1, string str2)
{
    size_t i;
    if (str1.size()<=str2.size())
    {
        i=str2.find(str1);
        if (i==0)
            return true;
        else
            return false;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T12:37:35.080

区别在于数组访问器`[i]`与指针算术。

使用`str1[i]`and`str2[i]`是主要区别。这些访问器通常不会像使用底层指针算法那样优化，例如。`const char* c1 = str1.cstr()`然后`++c1; ++c2`对它们进行迭代（这是任何 STL 实现在幕后所做的）。

一般来说，底层硬件在迭代指针而不是数组方面做得更好。有时，编译器可以优化循环以使用指针算术而不是数组算术，但由于`std::string`使用 的复杂重载实现`operator[]`，它基本上总是`arrayBase+offset`在循环的每次迭代中结束。

尝试这个：

```
bool Is_Included1(string str1, string str2)
{
    size_t i,s;
    s=str1.size();
    if (s<=str2.size())
    {
        const char* c1 = str1.c_str();
        const char* c2 = str2.c_str();
        for (i=0;i<s;i++, c1++, c2++)
            if (*c1!=*c2)
                return false;
        return true;
    }
    return false;
} 
```

看看它与 STL 参考实现的比较。

（请注意，STL 版本可能仍然快一点，因为现在您可以进一步优化它以`int i`完全删除使用）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-10T12:27:20.467

原因必须至少部分是您查询的特定结构，找出答案是一个有趣的侦探挑战！例如，当 str2 比 str1 长得多（并且不包含完全不同的字符）时，您的实现显然会更快。为了避免混淆，我们现在假设两个字符串的长度相同。

可能的解释是您的 STL 版本实现使用 CPU 上可用的较长寄存器对字符进行批量比较。您可以将多个字符打包到一个寄存器中，然后并行比较它们。这样，您可以一步比较几个连续的字符（即使使用标准的 64 位寄存器，您也可以打包 8 个字符并同时比较它们）。有关讨论，请参阅[此堆栈溢出问题](https://stackoverflow.com/questions/1128096/c-string-comparison-in-one-clock-cycle)。

另一种可能的解释是，STL 使用一种算法，例如，从字符串的结尾开始比较字符串，如果您的字符串往往比字符串的前缀差异更大，则比较结尾。

您可以通过运行测试来检查：速度差异是由于匹配还是不匹配，还是两者兼而有之？对于我的第二个解释，您会看到在 STL 版本中不匹配更好，第一个解释会加快匹配速度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-10T12:26:11.273

我已经跟踪了 GCC 4.7.2 中的实现。它的复杂度是 O(nm)，其中 n, m 是两个字符串的长度。

假设n.size()小于m.size()，对于m的每一个可能的起点i，它首先比较n[0]和m[i](traits_type::eq)，然后调用traits_type::compare，它实际上执行 __builtin_memcmp()。

这不是确切的实现，但它说明了算法。

```
for (size_t i=0; i<m.size(); ++i) {
    if (traits_type::eq(n[0], m[i]) &&
        traits_type::compare(n[1], m[i+1], n.size()-1) == 0) {
            return i;
    }
}
return -1; 
```

虽然算法的时间顺序更差，但我想这是因为 __builtin_memcmp() 没有逐一比较字符，因此变得比我们预期的要快。

顺便说一句，如果您经常调用该函数，您应该传递两个字符串的 const 引用而不是按值传递，这会导致不必要的副本。

如下：

```
bool Is_Included2(const string& str1, const string& str2)
{
    if (str1.size() > str2.size()) return false;
    return str2.find(str1) == 0;
} 
```

# linq - linq 语句返回重复记录

> ID：15152230
> 
> 赞同：0
> 
> 时间：2013-03-01T06:55:12.350
> 
> 标签：linq

我想使用 select * from dbo.vwListDetails where productid ='20D9F725-6667-4F3A-893A-7D30FED550BE' 翻译 linq 语句

我已经编写了 linq 语句，但是它返回了不正确的数据

使用上面的 sql 语句返回：

```
productid                            productname custmerid customername 
20D9F725-6667-4F3A-893A-7D30FED550BE         nike         1        andy
20D9F725-6667-4F3A-893A-7D30FED550BE         nike         2        randy  

public IEnumerable<vwListDetails > GetAllListDetailConsumer(Guid productid)
{
    ObjectQuery<vwListDetails> cust = db.vwListDetails ;
    IEnumerable<vwListDetails> query = from d in cust 
                                       where d.productid == productid
                                       select d;
    return query;

} 
```

如果我使用上面的 linq c# 代码返回

```
 productid                                  productname custmerid customer name 
  20D9F725-6667-4F3A-893A-7D30FED550BE         nike         1        andy
  20D9F725-6667-4F3A-893A-7D30FED550BE         nike         1        andy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:00:09.537

你的`where`条件不正确。我想你需要那个：

```
public IEnumerable<vwListDetails > GetAllListDetailConsumer(string productid)
{
    ObjectQuery<vwListDetails> cust = db.vwListDetails ;
    IEnumerable<vwListDetails> query = from d in cust 
                                       where d.productid == productid
                                       select d;
    return query;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T06:57:40.087

我怀疑你的情况是错误的。您的产品 ID 永远不会匹配 GUID。

1.  你在谓词上做错了。 `where d.productid == new Guid(productid)`.
2.  正如您在 Sql 示例中所说的那样。你提到的是productid。但是使用 LINQ 你正在使用 GUID。所以更正谓词。

    `var urList= db.vwListDetails.Select(e=>e.productid==yourCondition);`

# wordpress - 关于 Wordpress 媒体库的问题

> ID：15152233
> 
> 赞同：1
> 
> 时间：2013-03-01T06:55:28.043
> 
> 标签：wordpress, media-library

我有两个关于 wordpress 和媒体库的相关问题：

1.  在 Wordpress 媒体库（3.5.1 版）中，可以选择将**图像与帖子相关联**。有谁知道这在数据库中做了什么更改。根据我的发现，有两个表似乎与媒体库和帖子关联有关。第一个是`wp_posts`包含三个相关字段的表：`post_type=attachment`、`post_mime_type=image`、`post_parent=<associated post id>`。还`wp_postmeta`带有字段`meta_key=_wp_attached_file`或`=_wp_attachment_metadata`.
    是否涉及其他表格/字段？有没有详细描述这些的文章？
    现在，从编程上讲，似乎有两个与上述相关的功能：`wp_insert_attachment`和`wp_update_attachment_metadata`. 还有更多还是只有它们？

2.  该`wp_insert_attachment`函数需要一个绝对文件名。如果图像已经在本地服务器上并且我们只有它的（本地）URL，我们如何以编程方式找到它的绝对路径？我问是因为上面的函数实际上上传了一个不是我想要的文件，因为该文件已经在服务器上。
    或者，是否有另一个函数只接受本地文件 URI 并将其与帖子相关联，而不尝试先上传？

# php - 用变量更新 config.php

> ID：15152236
> 
> 赞同：3
> 
> 时间：2013-03-01T06:55:34.850
> 
> 标签：php

我有这个直接编写配置文件的 php 设置，我想更新文件中的变量而不是编写整个文件。谁能指出我正确的方向？

```
 $allowedExts = array(".jpg", ".jpeg", ".gif", ".png");
  $extension = strrchr ($_FILES["logoFile"]['name'], '.');

  if (($_FILES["logoFile"]["size"] < 2000000)
  && in_array($extension, $allowedExts))
  {
if ($_FILES["logoFile"]["error"] > 0)
{
    echo "Return Code: " . $_FILES["logoFile"]["error"] . "<br />";
}
else
{

move_uploaded_file($_FILES["logoFile"]["tmp_name"],"../../upload/logo".$extension);

$path= "./upload/logo".$extension;

//update logo settings variable

$data = file_get_contents('../settings/settings.php'); // grab data
$data = str_replace("/'LOGO_IMAGE_PATH', '[^']+'/", "'LOGO_IMAGE_PATH', '$path'", $data); // replace that section
file_put_contents('../settings/settings.php', $data); // save data

}
}
else
{
    echo "Invalid file";
} 
```

其余变量来自 saveSettings。

```
case "saveSettings":

        //Logo settings
        $showLogo=$_REQUEST["showLogoOption"];
        $roundOption=$_REQUEST["roundOption"];
        $siteTitle=$_REQUEST["siteTitle"];
        $requireJobTypes=$_REQUEST["requireJobTypes"];
        $enableJobTypes=$_REQUEST["useJobTypes"];
        $enableMileage=$_REQUEST["enableMileage"];
        $allowViewingPayrolls=$_REQUEST["allowViewingPayrolls"];
        $trackIP=$_REQUEST["trackIP"];
        $enableMobile=$_REQUEST["enableMobile"];
        $config="<?php 
           define('USE_LOGO_IMAGE', $showLogo);
           define('ROUND_TO_QUARTERS', $roundOption);
           define('SITE_TITLE', '$siteTitle');
           define('ENABLE_JOB_TYPES', $enableJobTypes);
           define('REQUIRE_JOB_TYPES', $requireJobTypes);
           define('ENABLE_MILEAGE', $enableMileage);
           define('ALLOW_VIEW_PAYROLLS', $allowViewingPayrolls);
           define('TRACK_IP', $trackIP);
           define('MOBILE_VERSION_ENABLED', $enableMobile);
        ?>";
        $fp = fopen("../settings/settings.php", "w");
        fwrite($fp, $config);
        fclose($fp);
        break; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:04:23.647

这是为您更新设置的功能，它会这样做，因此您的 settings.php 文件仅在设置过程中修改一次，因此它不会不必要地为每个设置打开文件。它将一口气将它们全部保存下来。

```
function save_settings($settings) // function to update settings to file
{
    $data = file('../settings/settings.php', FILE_SKIP_EMPTY_LINES); // grab current settings file

    foreach ($data as $key => $line) // loop through lines in file
    {
        foreach ($settings as $name => $value) // loop through settings that are being modified
        {
            if (strcasecmp('true', $value) && strcasecmp('false', $value)
            && '0' !== $value && '1' !== $value)
            {
                $value = "'" . htmlspecialchars($value, ENT_QUOTES) . "'"; // quote non-boolean, also escape quotes
            }

            if (FALSE !== strpos($line, $name)) // if exists update it
            {
                $data[$key] = "define('" . $name . "', " . $value . ");\n"; 
            }
        }
    }
    file_put_contents('../settings/settings.php', implode('', $data)); // save it all
} 
```

将此行放在我们设置过程的开头

```
// run this line BEFORE you begin to set values in settings.php to initialize the settings array
$settings = array(); 
```

然后，您可以像这样修改设置：

```
// update settings easily by doing the below anywhere you like
// as long as it is after the above line and before you run save_settings()
$settings['LOGO_IMAGE_PATH']        = $path;
$settings['USE_LOGO_IMAGE']         = $_POST['showLogoOption'];
$settings['ROUND_TO_QUARTERS']      = $_POST['roundOption'];
$settings['SITE_TITLE']             = $_POST['siteTitle'];
$settings['ENABLE_JOB_TYPES']       = $_POST['requireJobTypes'];
$settings['REQUIRE_JOB_TYPES']      = $_POST['useJobTypes'];
$settings['ENABLE_MILEAGE']         = $_POST['enableMileage'];
$settings['ALLOW_VIEW_PAYROLLS']    = $_POST['allowViewingPayrolls'];
$settings['TRACK_IP']               = $_POST['trackIP'];
$settings['MOBILE_VERSION_ENABLED'] = $_POST['enableMobile']; 
```

然后，当您全部完成后，您可以通过保存更新的设置来完成设置文件：

```
// run this line at the end to save ALL settings AFTER you are done setting their values
save_settings($settings); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:29:55.420

你可以做这样的事情。

// 传递要更新的数组

```
function update_config($myConfig) {
  $myConfig = json_encode($myConfig);
  $fp = fopen('my_config.ini', 'a');
  fwrite($fp, $myConfig);
  return 'success';
} 
```

// 需要时更新配置

```
$myConfig = array();
$myConfig['section_1'] = "a";
$myConfig['section_2'] = "b";
$myConfig['section_3'] = "c";
echo update_config($myConfig) 
```

# git - 验证裸 Git 存储库是否有数据

> ID：15152239
> 
> 赞同：3
> 
> 时间：2013-03-01T06:55:39.337
> 
> 标签：git, git-bare

如何验证文件是否正确推送到裸存储库？由于裸存储库没有工作树，因此您显然不能做简单的事情，`git log`因为它没有作为 git 存储库被拾取。

[我意识到这里](https://stackoverflow.com/questions/13864421/preview-files-in-a-bare-repository/13865676#13865676)有建议的解决方案，但我想知道如何使用命令行进行操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T07:01:09.443

`git log`工作得很好。裸存储库仍被视为存储库。明显地。:)

```
git@koiru /var/git/repositories/sanpera.git $ ls
total 37k
-rw-r--r--   1 git nogroup 1.2k Mar  1 06:00 FETCH_HEAD
-rw-r--r--   1 git nogroup   23 Sep 14  2011 HEAD
drwxr-xr-x   2 git nogroup 4.1k Sep 14  2011 branches/
-rw-------   1 git nogroup  236 Jun 12  2012 config
-rw-r--r--   1 git nogroup   34 Jun 12  2012 description
drwxr-xr-x   2 git nogroup 4.1k Jun 12  2012 hooks/
drwxr-xr-x   2 git nogroup 4.1k Sep 14  2011 info/
drwxr-xr-x 222 git nogroup 4.1k Sep  9 06:00 objects/
drwxr-xr-x   5 git nogroup 4.1k Oct 18  2011 refs/

git@koiru /var/git/repositories/sanpera.git $ git log
commit a60f2ad3cc118eb7fd290be56448bcef82fe8252
Author: Eevee <git@veekun.com>
Date:   Sun Sep 2 18:22:50 2012 -0700

    Stub a few more tests.

... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T07:02:36.603

您可以尝试使用[`git ls-remote`](http://git-scm.com/docs/git-ls-remote)：

```
 git ls-remote http://www.kernel.org/pub/scm/git/git.git

 # or, also a bare repo
 git ls-remote https://github.com/git/git 
```

只要它不只返回[空树 SHA1](https://stackoverflow.com/a/9766506/6309)，那应该意味着该上游存储库中有提交。

# php - 你管特定个性的视频

> ID：15152245
> 
> 赞同：0
> 
> 时间：2013-03-01T06:56:00.290
> 
> 标签：php, youtube, youtube-api

我想在我的网站上添加我最喜欢的个性的视频。所以基本上我想做两个任务：

1.  使用 You Tube API 或其他工具从 youtube 上获取该个性的视频。

为此，我尝试了以下

```
$url = "http://gdata.youtube.com/feeds/api/videos?
     q=personalityname
     &start-index=0
     &max-results=10
     &v=2";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$body = curl_exec($ch);
print_r($body); 
```

但我没有得到我的结果。任何人都可以帮助我完成第一项任务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:02:45.170

使用 V3，会更容易 'GET [https://www.googleapis.com/youtube/v3/search?part=id%2C+snippet&q=personalityname&key=](https://www.googleapis.com/youtube/v3/search?part=id%2C+snippet&q=personalityname&key=) {YOUR_API_KEY}'

“ [https://developers.google.com/youtube/v3/docs/search/list](https://developers.google.com/youtube/v3/docs/search/list) ”

# php - 使用 No Cache Headers，Safari 仍然允许在注销后查看帐户的页面

> ID：15152247
> 
> 赞同：0
> 
> 时间：2013-03-01T06:56:06.297
> 
> 标签：php, safari, logout

当用户退出我的站点时，他们会被带到 logout.php。会话被销毁后，它们被重定向到一个新页面。如果按下后退按钮，它们将被带回 account.php，并且仍然显示页面上的用户信息。但是，如果我点击刷新，页面就会识别出没有设置会话并且页面被锁定。当按下后退按钮时，我需要页面不显示任何信息，并且不能使用 JavaScript 来执行此操作。这个问题在 Safari 中似乎一直存在。

这是我的logout.php：

```
// *** Logout the current user.
$logoutGoTo = "../login/index.php?i=logout";
if (!isset($_SESSION)) {
  session_start();
}
$_SESSION['CM_Username'] = NULL;
$_SESSION['CM_UserGroup'] = NULL;
unset($_SESSION['CM_Username']);
unset($_SESSION['CM_UserGroup']);
if ($logoutGoTo != "") {header("Location: $logoutGoTo");
exit;
} 
```

这是我放置的 PHP 标头。我从这个网站上的另一个帖子中找到了这些：

```
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
header("Cache-Control: no-cache");
header("Pragma: no-cache"); 
```

正如我上面所说，这段代码在 Safari 中不起作用，但在 Chrome 和 FireFox 中运行良好。

如何仅使用 PHP 解决此问题？

先感谢您！

# node.js - Node.js 服务器使用 Express.js 上传文件名

> ID：15152250
> 
> 赞同：3
> 
> 时间：2013-03-01T06:56:14.547
> 
> 标签：node.js, express

一些背景知识：我正在尝试使用 node.js 创建一个 Web 服务并表示它接受带有附加图像的 POST 请求。

我已经能够成功发送请求，但我希望能够对图像做一些事情。我看到的所有示例都使用表单来使用 POST 上传文件，这样做允许他们为要上传的文件命名。允许他们执行以下操作

```
app.post('/upload',function(req,res) {
    req.files.formName // have access to the file's information
} 
```

我只是希望能够以类似 REST 的方式创建 POST 请求，因此文件通过 API 调用上传，因此当文件到达服务器时，express 给它一个随机名称和访问文件的方式files 数组是使用实际的图片文件名，这取决于用户的文件名是什么，我不能让它保持不变。

```
app.post('/upload',function(req,res) {
    req.files.<what goes here>
    req.files[0] // this wont work
} 
```

感谢您的帮助，如果我做错了，说使用 express 是一个不好的选择，那么请继续提出建议。我正在做这个项目来学习如何使用 node.js 和所有它的好处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:06:46.787

它仍然以相同的方式工作。

即使您以类似 REST 的方式发送 POST，您仍然必须在 api 调用中命名参数。

例如，如果您将图片命名为“图像”。

```
var data = {"image":imageData}; 
```

访问它仍然是

```
req.files.image 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:12:52.953

如果您想访问原始 HTTP 正文：

```
app.post('/upload', function(req, res) {
  var chunks = '';
  req.on('data', function(data) {
    chunks += data;
  });
  req.on('end', function() {
    console.log('received', chunks.length, 'bytes', chunks);
    res.send(...);
  });
}); 
```

（如果您也需要使用，`express.bodyParser`请确保*在*设置上述路线后）`app.use()`

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T12:18:47.353

对于简单的上传，您只需要这些配置：

```
app.use(express.static(__dirname + '/upload'));
app.use(express.bodyParser({uploadDir:__dirname + '/upload'})); 
```

在玉模板中：

```
form(method='post', action='/upload', enctype='multipart/form-data')
    input(name='file', type='file')
    input(type='submit') 
```*

# android - Android微调器所选项目与文本不匹配

> ID：15152253
> 
> 赞同：-1
> 
> 时间：2013-03-01T06:56:17.090
> 
> 标签：android, spinner

我使用下面的代码来获取 selectediem 文本，我喜欢根据选择的内容显示一些内容，但奇怪的是它不匹配，有什么线索吗？

```
Spinner mlogin_store;
mlogin_store = (Spinner) findViewById(R.id.spinlogin_store);
String Text = mlogin_store.getSelectedItem().toString().trim(); 

Log.d("click",Text);  //I can see the "Abc" in LogCat. but it doesn't match the string    below. 
if (Text=="Abc"){  //first block
//Do something 
}else{
//do something else} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T06:58:29.947

**使用 Text.equals("Abc")**

现在你的代码

```
Spinner mlogin_store;
    mlogin_store = (Spinner) findViewById(R.id.spinlogin_store);
    String Text = mlogin_store.getSelectedItem().toString().trim(); 

    Log.d("click",Text);  //I can see the "Abc" in LogCat. but it doesn't match the string    below. 
    if (Text.equals("Abc")){  //first block
    //Do something 
    }else{
        //do something else
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:01:21.470

不要将字符串与**==**进行比较。始终使用字符串函数进行比较，例如。

```
if (Text.equalsIgnoreCase("Abc"))
{  
     //first block
     //Do something 
}
else
{
    //do something else}
} 
```

> equalsIgnoreCase 函数 将指定字符串与此字符串进行比较，忽略字符的大小写，如果相等则返回 true。

# android - 屏幕方向更改为纵向时显示详细信息片段

> ID：15152254
> 
> 赞同：2
> 
> 时间：2013-03-01T06:56:24.673
> 
> 标签：android

我是 Fragments 的新手，我的应用程序包含一个单帧布局，该布局在纵向模式下显示选项列表，在横向模式下显示左窗格中的列表视图和右窗格中所选选项的详细信息的组合。

在屏幕顶部，我有一个标题，其中包含注销、页面标题等图像。

当我将屏幕的方向从横向更改为纵向时，我总是看到列表视图出现，但带有横向模式屏幕的标题详细信息。

我的问题是，当屏幕方向从横向变为纵向时，如何显示详细信息片段而不是列表片段？

另外，我得到了一个 java.lang.RuntimeException，例如：您的内容必须有一个 ListView，其 id 属性为“android.R.id.list”。为了摆脱它，我放置了一个虚拟列表视图并将其可见性设置为消失。现在它工作正常，但这是一个好习惯吗？为什么我会得到这个例外？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:07:32.880

您需要实现的双窗格布局只需检查例如您的布局是否包含详细信息片段，如果包含然后在此处显示详细信息。

```
 View detailsFrame = getActivity().findViewById(R.id.details);
    mDualPane = detailsFrame != null && detailsFrame.getVisibility() == View.VISIBLE; 
```

请参阅详细信息文章[在 Activity 中显示 Fragment](http://developer.android.com/guide/components/fragments.html)

# c++ - 在 C++ 中存储表的最佳方法是什么

> ID：15152256
> 
> 赞同：2
> 
> 时间：2013-03-01T06:56:33.050
> 
> 标签：c++, data-structures, decision-tree

我正在使用稍微修改过的[C4.5 算法](http://en.wikipedia.org/wiki/C4.5_algorithm)版本在 C++ 中编写决策树。每个节点代表数据集的一个属性或一列，并且每个可能的属性值都有一个子节点。

我的问题是如何存储训练数据集，记住我必须为每个节点使用一个子集，所以我需要一种快速方法来只选择行和列的子集。

主要目标是尽可能以尽可能高的内存和时间效率（按优先级顺序）进行操作。

我认为最好的方法是拥有一个数组数组（或 std::vector）或类似的东西，并且每个节点都有一个列表（数组，向量等）或带有`column,line`（可能是元组）对的东西对该节点有效。

我现在应该有更好的方法来做到这一点，有什么建议吗？

**更新：**我需要的是这样的：

一开始我有这个数据：

```
Paris    4    5.0    True
New York 7    1.3    True
Tokio    2    9.1    False
Paris    9    6.8    True
Tokio    0    8.4    False 
```

但对于第二个节点，我只需要这些数据：

```
Paris    4    5.0
New York 7    1.3
Paris    9    6.8 
```

对于第三个节点：

```
Tokio    2    9.1
Tokio    0    8.4 
```

但是有一个包含数百万条记录的表，最多有数百列。

我想到的是将所有数据保存在一个矩阵中，然后为每个节点保存当前列和行的信息。像这样的东西：

```
Paris    4    5.0    True
New York 7    1.3    True
Tokio    2    9.1    False
Paris    9    6.8    True
Tokio    0    8.4    False 
```

节点 2：

```
columns = [0,1,2]
rows = [0,1,3] 
```

节点 3：

```
columns = [0,1,2]
rows = [2,4] 
```

这样在最坏的情况下我只能浪费

```
size_of(int) * (number_of_columns + number_of_rows) * node 
```

这比为每个节点拥有一个独立的数据矩阵要少得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:01:08.413

在 trie 使用怎么样：[http](http://en.wikipedia.org/wiki/Trie) ://en.wikipedia.org/wiki/Trie 。

还有一个关于如何实现trie的讨论： [Trie implementation](https://stackoverflow.com/questions/1036504/trie-implementation)

# python - 避免 django 1.4.3 中的 csrf 错误

> ID：15152258
> 
> 赞同：4
> 
> 时间：2013-03-01T06:56:52.427
> 
> 标签：python, django, templates, views, csrf

我正在使用 django 设计一个基本的登录和注销页面。所以下面是我的代码

**设置.py**

```
TEMPLATE_CONTEXT_PROCESSORS = (
    ...........
    ...........
    "django.contrib.messages.context_processors.messages",
    "django.core.context_processors.request",
    "django.core.context_processors.csrf",
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
)
INSTALLED_APPS = (
    'django.contrib.auth',
    .......
    ....... 
) 
```

**网址.py**

```
from django.conf.urls.defaults import *
from django.conf import settings

urlpatterns = patterns('',
             url(r'^$', 'learn_django.views.home_page'),          
             url(r'^login/$', 'learn_django.views.login'),
             url(r'^logged_in$', 'learn_django.views.logged_in'),
             url(r'^logout/$', 'learn_django.views.logout'),
)

if settings.DEBUG:
    urlpatterns = patterns('',
    url(r'^media/(?P<path>.*)$', 'django.views.static.serve',{'document_root': settings.MEDIA_ROOT, 'show_indexes': True}),
) + urlpatterns 
```

**视图.py**

```
from django.shortcuts import render_to_response
from django.template import RequestContext

def home_page(request):
    return render_to_response("home_page.html")

def login(request):
    return render_to_response("login.html")

def logged_in(request):
    return render_to_response("logged_in.html",context_instance=RequestContext(request)) 
```

**base.html**

```
{% load staticfiles %}
<html xmlns="http://www.w3.org/1999/xhtml"> 
  <head>
    <link rel="stylesheet" href="{% static 'css/home_remaining.css' %}" type="text/css">
    <title>{% block title %}{% endblock %}</title>
  </head>
  <body>
   <header>
     <div class='header_div'>
       <div class="logout"><p id='logout'><a href="/logout" >Logout</a></p><div>
       <div class="login"><p id='login'> <a href="/login" >Login</a></p><div>
     </div>
   </header>
   <div class="body_content">
      {% block body %}{% endblock %}
   </div>
</body> 
</html> 
```

**登录.html**

```
{% extends 'base.html' %}
{% block title %}Login Page{% endblock %}
{% block body %}
  <div id='container'>
      <form action="/logged_in" method="POST">
         {% csrf_token %}
            <label for="name">Username:</label><input type="name">
            <label for="username">Password:</label><input type="password">
            <div id="lower">
                <input type="submit" value="Login">
            </div>
      </form> 
   </div>     
{% endblock %} 
```

`Login`所以上面是我的完整代码，当我们点击给出的链接时，它会显示一个登录表单`base.html`。

登录显示并输入一些`username`并`password`单击`Login`按钮后，显示了一个错误页面，指示`csrf error`已显示

google了很多，加`{% csrf_token %}`在form标签里面，也加`django.core.context_processors.csrf`在template context过程中`settings.py`

所以下面是错误消息，看起来像

```
Forbidden (403)
CSRF verification failed. Request aborted.
Help
Reason given for failure:
    CSRF cookie not set.

In general, this can occur when there is a genuine Cross Site Request Forgery, or when Django's CSRF mechanism has not been used correctly. For POST forms, you need to ensure:
Your browser is accepting cookies.
The view function uses RequestContext for the template, instead of Context.
In the template, there is a {% csrf_token %} template tag inside each POST form that targets an internal URL.
If you are not using CsrfViewMiddleware, then you must use csrf_protect on any views that use the csrf_token template tag, as well as those that accept the POST data.
You're seeing the help section of this page because you have DEBUG = True in your Django settings file. Change that to False, and only the initial error message will be displayed.
You can customize this page using the CSRF_FAILURE_VIEW setting. 
```

因此，当我从模板上下文进程中删除 django.core.context_processors.csrf 时，它工作正常。但我也想使用 csrf 保护。

最后，实际上上面的视图代码有什么问题，为什么会出现 csrf 错误页面以及如何避免上面的错误页面？

我是否需要在我的`views.py`函数中添加任何代码？

谁能在我上面的函数中添加基本的登录和注销功能代码，这样对实际理解代码更有帮助......

## 已编辑

对于上述问题，我导入了如下的 csrf_exempt 函数

`from django.views.decorators.csrf import csrf_exempt`

并将其作为`logged_in`视图之前的装饰器，当我单击登录按钮时，它没有显示错误页面

但是仍然想知道为什么下面提到的方法（例如从模板发送 Requestcontext）不起作用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T07:08:50.163

您需要将 a 传递`RequestContext`给您的`render_to_response`函数。

```
def home_page(request):
    return render_to_response("home_page.html", context_instance=RequestContext(request)) 
```

或者使用新的渲染函数，它`RequestContext`为你处理传递。

```
def home_page(request):
    return render(request, "home_page.html") 
```

RequestContext 将各种有用的东西添加到传递给模板的上下文字典中。这包括 csrf 令牌。查看[RequestContext 文档](https://docs.djangoproject.com/en/1.5/ref/templates/api/#django.template.RequestContext)了解更多信息。

在您的情况下，您的`login`视图正在呈现`login.html`模板，但没有传递 csrf 令牌。当`login.html`模板回传到服务器（到`/logged_in`）时，`logged_in`视图会检查该 csrf 令牌。它不存在（因为您从未包含它）。所以它假设它收到了一个跨站点请求伪造。

阅读[csrf 文档](https://docs.djangoproject.com/en/1.4/ref/contrib/csrf/)以更了解该过程。

# c# - 从 WCF-RESTful 服务读取多部分表单数据和 json 输入

> ID：15152276
> 
> 赞同：2
> 
> 时间：2013-03-01T06:58:08.697
> 
> 标签：c#, json, wcf, rest, multipartform-data

我想创建一个 WCF-RESTful Web 服务方法，在该方法中我需要上传图像（多部分形式的数据）以及一些其他信息（JSON 格式）。android 和 iPhone 应用程序将访问此 Web 服务，以发送 Image 和 json 信息为

```
{ "description":"blah blah", "id"=123,"Comments":"blah blah" } 
```

在同一个要求。我的服务输入将是 Stream，我想从流本身读取图像和上述 json 内容。

```
 StreamReader reader = new StreamReader(fileStream);
            jsonData = HttpUtility.UrlDecode(reader.ReadToEnd());
            byte[] buffer = new byte[10000];
            int bytesRead, totalBytesRead = 0;
            do
            {
                bytesRead = fileStream.Read(buffer, 0, buffer.Length);
                totalBytesRead += bytesRead;
            } while (bytesRead > 0); 
```

如何从流中读取传递的 JSON 字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:56:47.363

您可以使用[DataContractJsonSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)。或者，如果您想更好地控制序列化[Json.Net](http://json.codeplex.com/)

# asp.net - ms sql server 2005 数据库容量

> ID：15152285
> 
> 赞同：0
> 
> 时间：2013-03-01T06:58:41.223
> 
> 标签：asp.net, sql-server-2005

嘿，我开发了一个使用 asp.net(c#) 和 ms sql server 2005 作为数据库的 Web 应用程序。我的应用程序将在具有 3 个表的数据库员工中添加十万员工数据 1）登录表（用户名、密码、状态、类型、id） 2）员工表（申请号、代码、名字、姓氏、年龄性别、地址，职业，州，区，pincode，taluk，gram panchayat 等）3）家庭成员表（姓名，年龄，性别，关系）现在我不想我的数据库可以保存或限制每个表的数据量。多少这样的员工数据我可以填写我的数据库吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:35:17.247

请参考这里，您将获得有关 Micrsoft SQL Server 2005 容量的所有信息

[http://msdn.microsoft.com/en-us/library/ms143432(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms143432(v=sql.90).aspx)

# java - 使用java遍历父子关系

> ID：15152286
> 
> 赞同：0
> 
> 时间：2013-03-01T06:58:40.723
> 
> 标签：java, tree, hashmap, parent-child, hierarchy

我有一个类似的输入 -</p>

```
emp_id,emp_name,manageremp_id
1,A,
2,B,1
4,C,1
3,F,4
5,E,2 
```

我想要的输出是这样的——</p>

```
1,A,
2,B,/A/B
4,C,/A/C
3,F,/A/C/F
5,E,A/B/E 
```

我知道这可以通过 Oracle 分层查询来实现。但是，数据来自平面文件，我们不想进行暂存。关于我们如何使用 java 来做到这一点的任何想法。使用两个 HashMap 我可以做一些直到 -</p>

```
1,A
2,B,A
4,C,A
3,F,C 
```

但是，我无法打印完整路径。谁能帮我用java来做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:15:43.800

创建一个名为 Employee 的类，其字段为`id`, `name`, `managerId`。将所有这些员工存储在`Map<Integer, Employee>`其中，键是员工的 ID，值是具有此 ID 的员工。

然后对于每个员工，您可以通过递归地在地图中查找他的经理来轻松获得他的所有管理链：

```
public void fillManagementChain(Deque<Employee> chain, Employee employee) {
    chain.addFirst(employee);
    if (employee.getManagerId() != null) {
        Employee manager = employeesById.get(employee.getManagerId());
        fillManagementChain(chain, manager);
    }
} 
```

剩下的就是解析和格式化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-25T12:47:53.730

可以使用以下代码 -

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class Emp {

    private static Map<Integer,Emp> empMap= new HashMap<>();

    private Integer empId;
    private String empName;
    private Integer mgrId;

    public Integer getMgrId() {
        return mgrId;
    }

    public static Emp createEmp(Integer empId, String empName, Integer mgrId){
        Emp e= new Emp(empId, empName, mgrId);
        empMap.put(empId,e);
        return e;
    }

    private Emp(Integer empId, String empName, Integer mgrId) {
        this.empId = empId;
        this.empName = empName;
        this.mgrId = mgrId;
    }

    private String getManagerName(Integer empId){
        if (Emp.empMap.get(empId).getMgrId() == null) {
            return Emp.empMap.get(empId).empName;
        }else {
            return getManagerName(Emp.empMap.get(empId).getMgrId()) + "/" +
                    Emp.empMap.get(empId).empName;
        }
    }
    @Override
    public String toString() {
        String displayManager = getManagerName(empId).equals(empName)?"":getManagerName(empId);
        return empId + "," +
                empName + "," +
                displayManager;

    }

    public static void main(String[] args) {
        List<Emp> emps = new ArrayList<>();
        emps.add(Emp.createEmp(1,"A",null));
        emps.add(Emp.createEmp(2,"B",1));
        emps.add(Emp.createEmp(4,"C",1));
        emps.add(Emp.createEmp(3,"F",4));
        emps.add(Emp.createEmp(5,"E",2));

        for(Emp emp:emps){
            System.out.println(emp);
        }
    }

} 
```

# html - 边距属性不适用于css中的选择元素

> ID：15152290
> 
> 赞同：5
> 
> 时间：2013-03-01T06:58:45.110
> 
> 标签：html, css

我有这个代码：

```
<div class= "foo">
<select >blablabl</select>;</br>
<select >blablabl</select>;
</div> 
```

在 CSS 中

```
.foo select{
    margin-bottom:50px;
} 
```

输出是 2 个彼此相邻且不相隔 50px 的选择元素。我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T06:59:50.290

`select`元素`display: inline`默认情况下（通常）并且不会尊重边距。`display: block`如果您希望每个都在自己的行上，或者`display: inline-block`如果您希望每个都具有较大的下边距，请将它们更改为。

编辑：我看到你有`<br>`，所以它们也将在两条单独的行上`display: inline-block`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:06:51.177

```
<div class= "foo">
  <select >blablabl</select>
  <select >blablabl</select>
</div> 
```

in css

```
.foo select {
    display: block;
    margin-bottom: 50px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T08:13:49.360

试试这个代码：

**HTML：**

```
<div class= "foo">
    <select ><option>blablabl</option></select>;</br>
    <select ><option>blablabl</option></select>;
</div> 
```

**CSS：**

```
.foo select{
    margin-bottom:50px;
} 
```

# java - 如何获得JFrame的extendedState宽度

> ID：15152297
> 
> 赞同：0
> 
> 时间：2013-03-01T06:59:06.310
> 
> 标签：java, swing, jframe

*   我有一个 JFrame，其扩展状态选项设置为 MAXIMIZE_BOTH

*   当我想获得 JFrame 的宽度时，它返回 0。

所以为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T07:04:59.917

> *   我有一个 JFrame，其扩展状态选项设置为 MAXIMIZE_BOTH

[JFrame.getExtendedState()](http://docs.oracle.com/javase/7/docs/api/java/awt/Frame.html#getExtendedState%28%29)返回正确的状态

> *   当我想获得 JFrame 的宽度时，它返回 0。

任何协调后都可以访问

1.  `pack()`叫做

2.  对于屏幕上已经可见的容器

# windows-phone-7 - 如何在 windows phone 开发中的密码中添加提示文本

> ID：15152302
> 
> 赞同：1
> 
> 时间：2013-03-01T06:59:17.100
> 
> 标签：windows-phone-7, windows-phone-8, passwordbox

样式就像android textbox.hint（希望我拼写正确）
看起来像密码框中间的水印
我了解到phonetextbox有一个名为**hint**
的属性 但是phonetextbox不能用作密码输入，因为它不能将我的输入更改为像星星这样的字符

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-22T20:49:01.690

我正在用代码提供更具体的答案......

要获得所需的效果，您可以使用 Grid 并将相同的 Row 分配给两个控件。请记住，由于 TextBlock 位于 TextBox 的顶部，因此您需要考虑用户点击 TextBlock 以及 TABing 进入 TextBox 的情况。

XAML：

```
<Grid>
 <PasswordBox x:Name="PasswordTextBox" 
    Grid.Row="0" HorizontalAlignment="Left" 
    GotFocus="PasswordTextBox_GotFocus" LostFocus="PasswordTextBox_LostFocus"

 <TextBlock Name="PasswordWatermark" Text="Password" VerticalAlignment="Center"
    Grid.Row="0" Margin="20,0,0,0" Foreground="Gray" FontSize="24" 
    Tap="PasswordWaterMark_Tap" />
</Grid> 
```

代码背后：

```
private void PasswordTextBox_GotFocus(object sender, RoutedEventArgs e)
{
  PasswordWatermark.Visibility = Visibility.Collapsed;
}

private void PasswordWatermark_Tap(object sender, GestureEventArgs e)
{
  PasswordWatermark.Visibility = Visiblity.Collapsed;
  PasswordTextBox.Focus();
}

private void PasswordTextBox_LostFocus(object sender, RoutedEventArgs e)
{
  PasswordWatermark.Visibility = PasswordTextBox.Password.Length > 0 
                                    ? Visibility.Collapsed
                                    : Visibility.Hidden;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T09:45:21.147

降低不透明度的文本块覆盖如何？点击/点击文本框，隐藏它

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T09:30:56.213

下载[Windows Phone Toolkit](http://phone.codeplex.com/)并使用`PhoneTextbox`控件。

# sql - 将希伯来语 XML 数据插入 sql server 2005 面临的问题

> ID：15152304
> 
> 赞同：0
> 
> 时间：2013-03-01T06:59:22.897
> 
> 标签：sql, xml, hebrew

我在将带有希伯来语内容的 XML 数据插入 Sql Server 2005 数据库时遇到问题。

下面给出了相同的数据。Thnx 提前。

```
Declare @XML nvarchar(max)

set @XML = 
'

    <Table1>
        <Selected>1</Selected>
        <Resource_Key>הקונסולרית היטל</Resource_Key>
      </Table1>

'
select @xml1

Output ->

  <Table1>     <Selected>1</Selected>      <Resource_Key>?????????? ????</Resource_Key>    </Table1> 
```

笔记 ：

当我附加 N 时

```
set @XML = 
N'
<Table1>.....</Table1>'

enter code here 
```

我得到了想要的结果。

如何在 XML 之前附加 N unicode 字符以更新数据库中的相同字符。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-01T07:03:03.263

`N''`当您想设置一个值时，您也可以使用该符号。

尝试这个：

```
DECLARE @XML nvarchar(max)

set @XML = N'd0ff867e-c426-4ac2-ad35-6cf18aabf310 303f511d-a99f-463e-ba08-14774ce5b501 Consular Surcharge db95f19b-3122-4408-8594-e9be0a9db17d false 1 הקונסולרית היטל ' 

select @xml 
```

输出

d0ff867e-c426-4ac2-ad35-6cf18aabf310 303f511d-a99f-463e-ba08-14774ce5b501 领事附加费 db95f19b-3122-4408-8594-e9be0a9db17d false 1

**编辑**

我正在查看您的问题以及`SET`您没有使用的问题`N''`

尝试这个

```
Declare @XML nvarchar(max)

set @XML = N'<Table1>
        <Selected>1</Selected>
        <Resource_Key>הקונסולרית היטל</Resource_Key>
      </Table1>
      '
select @xml 
```

# ant - 在声纳中看不到 PMD 违规

> ID：15152305
> 
> 赞同：0
> 
> 时间：2013-03-01T06:59:28.277
> 
> 标签：ant, sonarqube

我是声纳新手，使用 ant 我可以得到 Junit 报告。但我没有得到 Pmd 报告。所以请帮我解决这个问题谢谢我的 build.xml 是

```
 <property name="sonar.sources" value="src" />  

  <property name="sonar.tests" value="${junit.output.dir}" />  

  <property name="sonar.binaries" value="bin" />  
    <property name="sonar.dynamicAnalysis" value="reuseReports"/>

<property name="sonar.surefire.reportsPath" value="${junit.output.dir}" />  

  <property name="sonar.surefire.reportsPath" value="pmd_report.xml"/>

    <property name="sonar.java.coveragePlugin" value="cobertura"/>
    <property name="sonar.cobertura.reportPath" value="${dir.coverage}/coverage.xml"/>

    <sonar:sonar key="com.sample:research1" version="0.3-SNAPSHOT" xmlns:sonar="antlib:org.sonar.ant" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:47:35.323

要查看 pmd 违规，您应该在质量配置文件中启用 PMD 规则。好像还没有启用。此页面可能会有所帮助：[http ://docs.codehaus.org/display/SONAR/Quality+Profiles#QualityProfiles-ConfiguringRules](http://docs.codehaus.org/display/SONAR/Quality+Profiles#QualityProfiles-ConfiguringRules)

# oracle - 在服务器而不是客户端创建 oracle 转储

> ID：15152307
> 
> 赞同：0
> 
> 时间：2013-03-01T06:59:45.730
> 
> 标签：oracle, oracle11g, export

谁能告诉我如何在服务器本身而不是在客户端为我使用的 oracle 数据库创建转储文件，`exp`但`expdp`它将`.dmp`文件存储在客户端 C:. 但我希望它在服务器本身中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:12:11.247

`expdp`在服务器文件系统中创建`.dmp`文件。如果你想找到它的创建位置，

```
select * from dba_directories 
```

并搜索您用作参数的目录对象的位置`expdp`

# ios - 在渲染回调方法之外调用 AudioUnitRender

> ID：15152310
> 
> 赞同：0
> 
> 时间：2013-03-01T06:59:55.573
> 
> 标签：ios, audiounit

像示例项目[MixerHost](http://developer.apple.com/library/ios/#samplecode/MixerHost/Introduction/Intro.html)一样，我想将混合输出流写入文件而不是扬声器。所以我使用了 kAudioUnitSubType_GenericOutput 并调用：

```
CheckError(AudioUnitInitialize(mixerUnit), "AudioUnitInitialize mixerUnit");
CheckError(AudioUnitInitialize(ioUnit), "AudioUnitInitialize iOUnit");
CheckError(AudioOutputUnitStart(ioUnit), "AudioOutputUnitStart iOUnit");

AudioUnitRenderActionFlags ioActionFlags = 0;
AudioTimeStamp inTimeStamp;
memset(&inTimeStamp, 0, sizeof(AudioTimeStamp));
inTimeStamp.mFlags = kAudioTimeStampSampleTimeValid;
UInt32 inOutputBusNumber = 0;
UInt32 inNumberFrames = 100;
AudioBuffer buffer;
buffer.mNumberChannels = 2;
buffer.mDataByteSize = inNumberFrames*2;
buffer.mData = malloc(inNumberFrames*2);
AudioBufferList ioData;
ioData.mNumberBuffers = 1;
ioData.mBuffers[0] = buffer;
CheckError(AudioUnitRender(ioUnit,
                           &ioActionFlags,
                           &inTimeStamp,
                           inOutputBusNumber,
                           inNumberFrames,
                           &ioData),
           "AudioUnitRender"); 
```

错误：AudioUnitRender (-50)，请告诉我调用 AudioUnitRender() 的正确方法

iluvcapra 是对的，我改变了它并且它有效：

```
AudioUnitRenderActionFlags flags = 0;
AudioTimeStamp inTimeStamp;
memset(&inTimeStamp, 0, sizeof(AudioTimeStamp));
inTimeStamp.mFlags = kAudioTimeStampSampleTimeValid;
UInt32 busNumber = 0;
UInt32 numberFrames = 100;

int channelCount = 2;
AudioBufferList *bufferList = (AudioBufferList*)malloc(sizeof(AudioBufferList)+sizeof(AudioBuffer)*(channelCount-1));
bufferList->mNumberBuffers = channelCount;
for (int i=0; i<channelCount; i++) {
    AudioBuffer buffer = {0};
    buffer.mNumberChannels = 1;
    buffer.mDataByteSize = numberFrames*sizeof(AudioUnitSampleType);
    buffer.mData = calloc(numberFrames, sizeof(AudioUnitSampleType));

    bufferList->mBuffers[i] = buffer;

}
CheckError(AudioUnitRender(ioUnit,
                           &flags,
                           &inTimeStamp,
                           busNumber,
                           numberFrames,
                           bufferList),
           "AudioUnitRender ioUnit"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T01:28:53.517

有两件事，虽然没有看到更多，但我不能说这是否都是错的：

*   您的采样时间无效，您必须为再现的每个循环增加它。

*   您的 AudioBuffer 和 AudioBufferList 设置不正确，混音器的输出数据格式通常将通道拆分为单独`AudioBuffer`的 s 而不是交错。无论哪种方式，您都没有分配足够的空间，您在`malloc`应该分配的时候`calloc`分配，并且分配的是样本大小的对象，而不是字节大小的对象。

您的`AudioBufferList`分配应该更像这样（在 MixerHost 之后）：

```
AudioBufferList *ioData = (AudioBufferList *) malloc (
        sizeof (AudioBufferList) + sizeof (AudioBuffer) * (channelCount - 1)
    );

    ioData->mNumberBuffers = channelCount;

    int i;
    for (i = 0; i < channelCount; i++) {
        ioData->mBuffers[i] = {0};
        ioData->mBuffers[i].mNumberChannels  = 1;
        ioData->mBuffers[i].mDataByteSize = BUFFER_SIZE_IN_SAMPLES * 
             sizeof (AudioUnitSampleType);
        ioData->mBuffers[i].mData = calloc(BUFFER_SIZE_IN_SAMPLES, 
             sizeof(AudioUnitSampleType);
    } 
```

# jsf-2 - 使用普通 HTML 按钮在 JavaScript 中调用托管 bean 方法

> ID：15152314
> 
> 赞同：3
> 
> 时间：2013-03-01T07:00:03.233
> 
> 标签：jsf-2, primefaces

单击普通 HTML 按钮时，我需要在 JavaScript 中调用托管 bean 方法。如果我使用 JSF2.x 和 Primefaces，是否可以这样做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T08:38:23.343

是的，有可能。Primefaces 为它的组件提供了一个有用的钩子[`<p:remoteCommand>`](http://www.primefaces.org/showcase/ui/remoteCommand.jsf)。它基本上为您提供了一个能够与您的 bean 通信的 javascript 函数。

基本用法示例：

风景：

```
<p:remoteCommand name="remote" actionListener="#{bean.listener}" update="text"/>
<h:outputText id="text" value="#{bean.text}/>
<div onclick="remote()">...<div> 
```

豆子：

```
private String text = "Starting text";//getter + setter

public void listener(ActionEvent event) {
    text = "Text was changed via remote command";
} 
```

在上面的示例中，只要`<div>`单击您，就会执行远程命令。当然，可以通过单击按钮来调用相同的函数。

此外，最好查看[Primefaces 文档](http://www.primefaces.org/documentation.html)。

# heroku - Celery 2.5 启动多个工人来处理不同类型的作业

> ID：15152315
> 
> 赞同：1
> 
> 时间：2013-03-01T07:00:05.060
> 
> 标签：heroku, celery

我们需要在 Heroku 应用中启用后台处理。有两种工作，即工作 A 和工作 B。

创建这个之后，我们使用命令 heroku ps:scale worker=1 扩展工作，两者似乎都可以工作，但问题是如果我们排队 100 个 A 类型的作业，然后一个 B 类型的作业，作业 B 等到所有 A 类型的作业已完成。但我们想这样做如下

创建两个工人，即工人 A，工人 B，它们将分别处理作业 A 和 B。在排队作业时，我们要确保工人 A 只处理作业 A，工人 B 只处理作业 B。这些工人应该独立执行。即工人 A 不应等待工人 B 完成其工作，反之亦然。

我们可以在 Celery 中做到这一点吗？

目前我正在查看[Routing Tasks](http://docs.celeryproject.org/en/latest/userguide/routing.html)中的文档。但我不确定如何为作业 A 和作业 B 启动两个单独的工人实例。

请帮忙。任何帮助，将不胜感激。

提前致谢。

# facebook - FQL 事件 pic_cover 返回 null

> ID：15152316
> 
> 赞同：4
> 
> 时间：2013-03-01T07:00:07.560
> 
> 标签：facebook, facebook-fql, facebook-events

我正在尝试获取 Facebook 上公共活动的封面图片，但 pic_cover 字段返回 null。

这是活动：[https ://www.facebook.com/events/545127275518406/](https://www.facebook.com/events/545127275518406/)

这是我的 FQL 查询：`SELECT pic_cover FROM event WHERE eid=545127275518406`

该查询返回：

```
{
  "data": [
    {
      "pic_cover": null
    }
  ]
} 
```

另一个使用相同查询（替换为**eid ）的公共事件（** [https://www.facebook.com/events/133752506800219/](https://www.facebook.com/events/133752506800219/)）返回：

 **```
{
  "data": [
    {
      "pic_cover": {
        "cover_id": 431180503630072, 
        "source": "https://sphotos-a.xx.fbcdn.net/hphotos-ash4/299824_431180503630072_82863704_n.jpg", 
        "offset_y": 36
      }
    }
  ]
} 
```

如果第一个事件确实有封面图像，为什么它会返回 null？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:15:12.547

询问用户的权限`user_photos`部分解决了这个问题。我说部分是因为有些照片没有退回。请记住 pic_cover 和 pic_big 是两个不同的东西**

# algorithm - 计算对序列进行排序的最小交换次数

> ID：15152322
> 
> 赞同：48
> 
> 时间：2013-03-01T07:00:45.543
> 
> 标签：algorithm, sorting, sequence, graph-theory

我正在将一个没有相同数字的整数序列（不失一般性，假设该序列是 的排列`1,2,...,n`）排序为它的自然递增顺序（即`1,2,...,n`）。我正在考虑以最少的交换次数直接交换元素（无论元素的位置如何；换句话说，交换对任何两个元素都有效）（以下可能是一个可行的解决方案）：

> 交换两个元素，其中一个或两个元素应交换到正确的位置。直到每个元素都放在正确的位置。

但我不知道如何在数学上证明上述解决方案是否是最优的。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-03-01T07:21:38.380

我能够用[图论](/questions/tagged/graph-theory "显示标记为“图论”的问题")证明这一点。可能想在 :) 中添加该标签

创建一个有`n`顶点的图。如果位置中的元素应该以`n_i`正确的顺序就位，则从节点创建一条边。您现在将拥有一个由几个非相交循环组成的图形。我认为正确排序图表所需的最小交换次数是`n_j``i``j`

```
M = sum (c in cycles) size(c) - 1 
```

花点时间说服自己……如果两个项目在一个循环中，一次交换就可以解决它们。如果三个项目在一个循环中，您可以交换一对以将一个放在正确的位置，然后剩下两个循环，等等。如果`n`项目在一个循环中，您需要`n-1`交换。（即使您不与直接邻居交换，这始终是正确的。）

鉴于此，您现在可能能够看到为什么您的算法是最优的。如果您进行交换并且至少一个项目位于正确的位置，那么它将始终将 的值减少`M`1。对于任何长度的循环`n`，请考虑将一个元素交换到正确的位置，由其邻居占据。您现在有一个正确排序的元素和一个长度循环`n-1`。

由于`M`是交换的最小数量，并且您的算法`M`每次交换总是减少 1，因此它必须是最优的。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2018-12-27T15:39:33.043

所有的周期盘点都很难记住。有一种方法更容易记忆。

首先，让我们手动浏览一个示例案例。

*   序列：**[7、1、3、2、4、5、6]**
*   枚举它：**[(0, 7), (1, 1), (2, 3), (3, 2), (4, 4), (5, 5), (6, 6)]**
*   按值对枚举进行排序：**[(1, 1), (3, 2), (2, 3), (4, 4), (5, 5), (6, 6), (0, 7)]**
*   从头开始。当索引与枚举索引不同时，继续交换索引和枚举索引定义的元素。记住：`swap(0,2);swap(0,3)`是一样的`swap(2,3);swap(0,2)`
    *   `swap(0, 1)`=> [ **(3, 2)** , **(1, 1)** , (2, 3), (4, 4), (5, 5), (6, 6), (0, 7)]
    *   `swap(0, 3)`=> [ **(4, 4)** , (1, 1), (2, 3), **(3, 2)** , (5, 5), (6, 6), (0, 7)]
    *   `swap(0, 4)`=> [ **(5, 5)** , (1, 1), (2, 3), (3, 2), **(4, 4)** , (6, 6), (0, 7)]
    *   `swap(0, 5)`=> [ **(6, 6)** , (1, 1), (2, 3), (3, 2), (4, 4), **(5, 5)** , (0, 7)]
    *   `swap(0, 6)`=> [ **(0, 7)** , (1, 1), (2, 3), (3, 2), (4, 4), (5, 5), **(6, 6)** ]

即语义上，您对元素进行排序，然后通过交换最左边的不合适的项目来弄清楚如何将它们置于初始状态。

Python 算法就这么简单：

```
def swap(arr, i, j):
    arr[i], arr[j] = arr[j], arr[i]

def minimum_swaps(arr):
    annotated = [*enumerate(arr)]
    annotated.sort(key = lambda it: it[1])

    count = 0

    i = 0
    while i < len(arr):
        if annotated[i][0] == i:
            i += 1
            continue
        swap(annotated, i, annotated[i][0])
        count += 1

    return count 
```

因此，您不需要记住访问过的节点或计算一些周期长度。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-11-09T12:57:57.363

供您参考，这是我编写的一种算法，用于生成对数组进行排序所需的最小交换次数。它找到@Andrew Mao 描述的循环。

```
/**
 * Finds the minimum number of swaps to sort given array in increasing order.
 * @param ar array of <strong>non-negative distinct</strong> integers. 
 *           input array will be overwritten during the call!
 * @return min no of swaps
 */
public int findMinSwapsToSort(int[] ar) {
    int n = ar.length;
    Map<Integer, Integer> m = new HashMap<>();
    for (int i = 0; i < n; i++) {
        m.put(ar[i], i);
    }
    Arrays.sort(ar);
    for (int i = 0; i < n; i++) {
        ar[i] = m.get(ar[i]);
    }
    m = null;
    int swaps = 0;
    for (int i = 0; i < n; i++) {
        int val = ar[i];
        if (val < 0) continue;
        while (val != i) {
            int new_val = ar[val];
            ar[val] = -1;
            val = new_val;
            swaps++;
        }
        ar[i] = -1;
    }
    return swaps;
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-03-17T11:20:11.513

我们不需要交换实际的元素，只需找出有多少元素不在正确的索引中（循环）。最小掉期为 Cycle - 1；这是代码...

```
static int minimumSwaps(int[] arr) {
        int swap=0;
        boolean visited[]=new boolean[arr.length];

        for(int i=0;i<arr.length;i++){
            int j=i,cycle=0;

            while(!visited[j]){
                visited[j]=true;
                j=arr[j]-1;
                cycle++;
            }

            if(cycle!=0)
                swap+=cycle-1;
        }
        return swap;

    } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-10-28T21:39:10.877

@Archibald，我喜欢您的解决方案，这是我最初的假设，即对数组进行排序将是最简单的解决方案，但我认为不需要像我所说的那样进行反向遍历，即枚举然后对数组进行排序，然后计算枚举的交换。

我发现从数组中的每个元素中减去 1 然后计算对该列表进行排序所需的交换更简单

这是我的调整/解决方案：

```
def swap(arr, i, j):
    tmp = arr[i]
    arr[i] = arr[j]
    arr[j] = tmp

def minimum_swaps(arr):

    a = [x - 1 for x in arr]

    swaps = 0
    i = 0
    while i < len(a):
        if a[i] == i:
            i += 1
            continue
        swap(a, i, a[i])
        swaps += 1

    return swaps 
```

至于证明最优性，我认为@arax 有一个很好的观点。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-08-13T11:50:50.693

斯威夫特 4 版本：

```
func minimumSwaps(arr: [Int]) -> Int {

      struct Pair {
         let index: Int
         let value: Int
      }

      var positions = arr.enumerated().map { Pair(index: $0, value: $1) }
      positions.sort { $0.value < $1.value }
      var indexes = positions.map { $0.index }

      var swaps = 0
      for i in 0 ..< indexes.count {
         var val = indexes[i]
         if val < 0 {
            continue // Already visited.
         }
         while val != i {
            let new_val = indexes[val]
            indexes[val] = -1
            val = new_val
            swaps += 1
         }
         indexes[i] = -1
      }
      return swaps
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-08-26T15:55:34.963

// 假设我们只处理从零开始的序列

```
function minimumSwaps(arr) {
    var len = arr.length
    var visitedarr = []
    var i, start, j, swap = 0
    for (i = 0; i < len; i++) {
        if (!visitedarr[i]) {
            start = j = i
            var cycleNode = 1
            while (arr[j] != start) {
                j = arr[j]
                visitedarr[j] = true
                cycleNode++
            }
            swap += cycleNode - 1
        }
    }
    return swap
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-04-13T20:22:49.653

我真的很喜欢@Ieuan Uys 在 Python 中的解决方案。

我对他的解决方案的改进；

*   while循环少迭代一次以提高速度；`while i < len(a) - 1`
*   交换函数被解封装成一个单一的函数。
*   添加了大量的代码注释以提高可读性。

**我在 python 中的代码。**

```
def minimumSwaps(arr):
    #make array values starting from zero to match index values. 
    a = [x - 1 for x in arr] 

    #initialize number of swaps and iterator.
    swaps = 0
    i = 0

    while i < len(a)-1:
        if a[i] == i:
            i += 1
            continue

        #swap.
        tmp = a[i] #create temp variable assign it to a[i]
        a[i] = a[tmp] #assign value of a[i] with a[tmp]
        a[tmp] = tmp #assign value of a[tmp] with tmp (or initial a[i])

        #calculate number of swaps.
        swaps += 1

    return swaps 
```

**详细解释代码对大小为 n 的数组执行的操作；**

我们逐一检查数组中除最后一个（n-1 次迭代）之外的每个值。如果该值与数组索引不匹配，则我们将该值发送到其索引值等于其值的位置。例如，如果 a[0] = 3。那么这个值应该与 a[3] 交换。a[0] 和 a[3] 交换。值`3`将在 a[3] 应该在的位置。一个值被发送到它的位置。我们还有 n-2 次迭代。我对现在的 a[0] 不感兴趣。如果在该位置不为 0，则稍后将其交换为另一个值。因为另一个值也存在于错误的地方，所以后面的while循环会识别出来。

**真实例子**

```
a[4, 2, 1, 0, 3]
#iteration 0, check a[0]. 4 should be located at a[4] where the value is 3\. Swap them. 
a[3, 2, 1, 0, 4] #we sent 4 to the right location now.  
#iteration 1, check a[1]. 2 should be located at a[2] where the value is 1\. Swap them. 
a[3, 1, 2, 0, 4] #we sent 2 to the right location now.  
#iteration 2, check a[2]. 2 is already located at a[2]. Don't do anything, continue. 
a[3, 1, 2, 0, 4] 
#iteration 3, check a[3]. 0 should be located at a[0] where the value is 3\. Swap them. 
a[0, 1, 2, 3, 4] #we sent 0 to the right location now.  
# There is no need to check final value of array. Since all swaps are done. 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-11-22T23:12:13.720

@bekce 做得很好的解决方案。如果使用 C#，设置修改数组的初始代码`ar`可以简洁地表示为：

```
var origIndexes = Enumerable.Range(0, n).ToArray();
Array.Sort(ar, origIndexes); 
```

然后在其余代码中使用`origIndexes`而不是。`ar`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-01-05T09:47:05.087

这是 C++ 中的示例代码，它找到最小交换次数来对序列的排列进行排序`(1,2,3,4,5,.......n-2,n-1,n)`

```
#include<bits/stdc++.h>
using namespace std;

int main()
{
    int n,i,j,k,num = 0;
    cin >> n;
    int arr[n+1];
    for(i = 1;i <= n;++i)cin >> arr[i];
    for(i = 1;i <= n;++i)
    {
        if(i != arr[i])// condition to check if an element is in a cycle r nt
        {
            j = arr[i];
            arr[i] = 0;
            while(j != 0)// Here i am traversing a cycle as mentioned in 
            {             // first answer
                k = arr[j];
                arr[j] = j;
                j = k;
                num++;// reducing cycle by one node each time
            }
            num--;
        }
    }
    for(i = 1;i <= n;++i)cout << arr[i] << " ";cout << endl;
    cout << num << endl;
    return 0;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-01-15T09:31:31.170

Java（和测试）中具有原始类型的整数的实现。

```
import java.util.Arrays;

public class MinSwaps {
  public static int computate(int[] unordered) {
    int size = unordered.length;
    int[] ordered = order(unordered);
    int[] realPositions = realPositions(ordered, unordered);
    boolean[] touchs = new boolean[size];
    Arrays.fill(touchs, false);
    int i;
    int landing;
    int swaps = 0;

    for(i = 0; i < size; i++) {
      if(!touchs[i]) {
        landing = realPositions[i];

        while(!touchs[landing]) {
          touchs[landing] = true;
          landing = realPositions[landing];

          if(!touchs[landing]) { swaps++; }
        }
      }
    }

    return swaps;
  }

  private static int[] realPositions(int[] ordered, int[] unordered) {
    int i;
    int[] positions = new int[unordered.length];

    for(i = 0; i < unordered.length; i++) {
      positions[i] = position(ordered, unordered[i]);
    }

    return positions;
  }

  private static int position(int[] ordered, int value) {
    int i;

    for(i = 0; i < ordered.length; i++) {
      if(ordered[i] == value) {
        return i;
      }
    }

    return -1;
  }

  private static int[] order(int[] unordered) {
    int[] ordered = unordered.clone();
    Arrays.sort(ordered);

    return ordered;
  }
} 
```

测试

```
import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class MinimumSwapsSpec {
  @Test
  public void example() {
    // setup
    int[] unordered = new int[] { 40, 23, 1, 7, 52, 31 };

    // run
    int minSwaps = MinSwaps.computate(unordered);

    // verify
    assertEquals(5, minSwaps);
  }

  @Test
  public void example2() {
    // setup
    int[] unordered = new int[] { 4, 3, 2, 1 };

    // run
    int minSwaps = MinSwaps.computate(unordered);

    // verify
    assertEquals(2, minSwaps);
  }

  @Test
  public void example3() {
    // setup
    int[] unordered = new int[] {1, 5, 4, 3, 2};

    // run
    int minSwaps = MinSwaps.computate(unordered);

    // verify
    assertEquals(2, minSwaps);
  }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-02-11T04:52:57.747

斯威夫特 4.2：

```
func minimumSwaps(arr: [Int]) -> Int {
    let sortedValueIdx = arr.sorted().enumerated()
        .reduce(into: [Int: Int](), { $0[$1.element] = $1.offset })

    var checked = Array(repeating: false, count: arr.count)
    var swaps = 0

    for idx in 0 ..< arr.count {
        if checked[idx] { continue }

        var edges = 1
        var cursorIdx = idx
        while true {
            let cursorEl = arr[cursorIdx]
            let targetIdx = sortedValueIdx[cursorEl]!
            if targetIdx == idx {
                break
            } else {
                cursorIdx = targetIdx
                edges += 1
            }
            checked[targetIdx] = true
        }
        swaps += edges - 1
    }

    return swaps
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-09-07T19:27:30.980

Python代码

```
A = [4,3,2,1]
count = 0
for i in range (len(A)):
    min_idx = i
    for j in range (i+1,len(A)):
        if A[min_idx] > A[j]:
            min_idx = j
    if min_idx > i:
        A[i],A[min_idx] = A[min_idx],A[i]
        count = count + 1
print "Swap required : %d" %count 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-10-17T10:19:27.100

### 在 Javascript 中

如果数组的计数从 1 开始

```
function minimumSwaps(arr) {
   var len = arr.length
    var visitedarr = []
    var i, start, j, swap = 0
    for (i = 0; i < len; i++) {
        if (!visitedarr[i]) {
            start = j = i
            var cycleNode = 1
            while (arr[j] != start + 1) {
                j = arr[j] - 1
                visitedarr[j] = true
                cycleNode++
            }
            swap += cycleNode - 1
        }
    }
    return swap
} 
```

else 以 0 开头的输入

```
function minimumSwaps(arr) {
    var len = arr.length
    var visitedarr = []
    var i, start, j, swap = 0
    for (i = 0; i < len; i++) {
        if (!visitedarr[i]) {
            start = j = i
            var cycleNode = 1
            while (arr[j] != start) {
                j = arr[j]
                visitedarr[j] = true
                cycleNode++
            }
            swap += cycleNode - 1
        }
    }
    return swap
} 
```

只是为当前的 HackerEarth 输入扩展 Darshan Puttaswamy 代码

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-12-14T15:14:41.267

这是@Archibald 已经解释过的Java 解决方案。

```
 static int minimumSwaps(int[] arr){
        int swaps = 0;
        int[] arrCopy = arr.clone();
        HashMap<Integer, Integer> originalPositionMap
                = new HashMap<>();
        for(int i = 0 ; i < arr.length ; i++){
            originalPositionMap.put(arr[i], i);
        }

        Arrays.sort(arr);
        for(int i = 0 ; i < arr.length ; i++){
            while(arr[i] != arrCopy[i]){
                //swap
                int temp = arr[i];
                arr[i] = arr[originalPositionMap.get(temp)];
                arr[originalPositionMap.get(temp)] = temp;
                swaps += 1;
            }
        }
        return swaps;
    } 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-04-04T07:02:02.043

```
def swap_sort(arr)
  changes = 0
  loop do
    # Find a number that is out-of-place
    _, i = arr.each_with_index.find { |val, index| val != (index + 1) }
    if i != nil
      # If such a number is found, then `j` is the position that the out-of-place number points to.
      j = arr[i] - 1

      # Swap the out-of-place number with number from position `j`.
      arr[i], arr[j] = arr[j], arr[i]

      # Increase swap counter.
      changes += 1
    else
      # If there are no out-of-place number, it means the array is sorted, and we're done.
      return changes
    end
  end
end 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-04-18T21:56:38.873

使用 Javascript 的解决方案。

首先，我使用当前需要排序的索引设置所有元素，然后我遍历映射以仅对需要交换的元素进行排序。

```
function minimumSwaps(arr) {
  const mapUnorderedPositions = new Map()
  for (let i = 0; i < arr.length; i++) {
    if (arr[i] !== i+1) {
      mapUnorderedPositions.set(arr[i], i)
    }
  }

  let minSwaps = 0
  while (mapUnorderedPositions.size > 1) {
    const currentElement = mapUnorderedPositions.entries().next().value
    const x = currentElement[0]
    const y = currentElement[1]

    // Skip element in map if its already ordered
    if (x-1 !== y) {
      // Update unordered position index of swapped element
      mapUnorderedPositions.set(arr[x-1], y)

      // swap in array
      arr[y] = arr[x-1]
      arr[x-1] = x

      // Increment swaps
      minSwaps++
    }

    mapUnorderedPositions.delete(x)
  }

  return minSwaps
} 
```

如果你有一个像 7 2 4 3 5 6 1 这样的输入，调试过程如下：

```
Map { 7 => 0, 4 => 2, 3 => 3, 1 => 6 }
currentElement [ 7, 0 ]
swapping 1 with 7
[ 1, 2, 4, 3, 5, 6, 7 ]

currentElement [ 4, 2 ]
swapping 3 with 4
[ 1, 2, 3, 4, 5, 6, 7 ]

currentElement [ 3, 2 ]
skipped

minSwaps = 2 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-08-08T20:26:02.483

苹果斯威夫特版本 5.2.4

```
func minimumSwaps(arr: [Int]) -> Int {
    var swapCount = 0
    var arrayPositionValue = [(Int, Int)]()
    var visitedDictionary = [Int: Bool]()

    for (index, number) in arr.enumerated() {
        arrayPositionValue.append((index, number))
        visitedDictionary[index] = false
    }

    arrayPositionValue = arrayPositionValue.sorted{ $0.1 < $1.1 }

    for i in 0..<arr.count {
        var cycleSize = 0
        var visitedIndex = i

        while !visitedDictionary[visitedIndex]! {
            visitedDictionary[visitedIndex] = true
            visitedIndex = arrayPositionValue[visitedIndex].0
            cycleSize += 1
        }

        if cycleSize > 0 {
            swapCount += cycleSize - 1
        }
    }

    return swapCount
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-05-09T11:04:29.570

找到排列 1..N 所需的最小交换次数。

我们可以使用我们知道的排序结果：1..N，这意味着我们实际上不必进行交换，只需计算它们。

1..N 的改组称为置换，由不相交的循环置换组成，例如 1..6 的置换：

```
1 2 3 4 5 6
6 4 2 3 5 1 
```

由循环排列 (1,6)(2,4,3)(5) 组成

```
1->6(->1) cycle: 1 swap
2->4->3(->2) cycle: 2 swaps
5(->5) cycle: 0 swaps 
```

因此，k 个元素的循环需要 k-1 次交换才能整理好。

由于我们知道每个元素“属于”哪里（即值 k 属于位置 k-1），我们可以轻松地遍历循环。从 0 开始，我们得到 6，它属于 5，然后我们找到 1，它属于 0，我们又回到了开始的地方。

为了避免以后重新计算一个周期，我们会跟踪访问了哪些元素 - 或者您可以执行交换，以便稍后访问它们时元素位于正确的位置。

结果代码：

```
def minimumSwaps(arr):
    visited = [False] * len(arr)
    numswaps = 0
    for i in range(len(arr)):
        if not visited[i]:
            visited[i] = True
            j = arr[i]-1
            while not visited[j]:
                numswaps += 1
                visited[j] = True
                j = arr[j]-1
    return numswaps 
```

# amazon-dynamodb - 从 Dynamodb 生成报告

> ID：15152328
> 
> 赞同：8
> 
> 时间：2013-03-01T07:00:59.667
> 
> 标签：amazon-dynamodb

我是 DynamoDB 的新手，我想知道从这个键/值对数据存储生成报告与从 DBMS 生成报告是否会有任何不同。

我的（Java）应用程序将数据写入 DynamoDB，我希望从中生成业务报告（例如销售报告）。

我的理解是亚马逊提供 EMR（弹性地图缩减），进一步阅读是它下面有 Hive，这将允许我使用类似 SQL 的语法来查询 DynamoDB。

如果我的数据小于 50GB，使用 EMR 完成这项任务是否过大？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T00:22:15.300

是的，hive 使用类似 SQL 的语法。Hive 仍然是用 java 编写的，并且在底层它仍然是 java。[Hive wiki](https://cwiki.apache.org/confluence/display/Hive/LanguageManual)是一个很好的起点。这是一篇关于将 Dynamo DB 与 EMR 结合使用的好文章 [http://aws.amazon.com/articles/28549](http://aws.amazon.com/articles/28549)

> 如果我的数据小于 50GB，使用 EMR 完成这项任务是否过大？

我不这么认为，一旦您设置了 EMR 并将 dynamo 表导出到 s3 或内部 hadoop 表。然后，您可以查询 S3 或内部 hadoop 表，而不会影响 DynamoDB 的临时吞吐能力。由于 S3 非常快，您可以编写各种复杂的配置单元查询来获得所需的报告。

[启动 EMR的命令行工具](http://docs.aws.amazon.com/ElasticMapReduce/latest/DeveloperGuide/emr-cli-reference.html)非常容易设置，如果您想省钱，您可以随时竞价竞价实例。

此外，当作业运行缓慢时，您可以根据需要增加核心和任务节点以使作业快速运行。

# java - java并发处理多个文件

> ID：15152335
> 
> 赞同：0
> 
> 时间：2013-03-01T07:01:14.643
> 
> 标签：java, multithreading, concurrency

我的要求是这样的。有一个中央存储库，用户将在其中放置多个 xml 文件，我们的目录观察服务（简单的 java 类）将获取 xml 文件并对其进行处理。

在这种情况下，我们如何进行并发处理？我们应该进行一对一的 xml 处理还是并发处理？

通常在现场项目中我们应该采取哪种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:54:50.887

> 在这种情况下，我们如何进行并发处理？

目录观察服务可以挑选新文件并将它们放在一个队列中，多个线程在其中挑选文件并根据需要对它们进行操作。

> 我们应该进行一一的xml处理还是并发处理？

这取决于您希望以多快的速度完成处理以及其他因素，例如整个处理过程是分开的，还是处理过程需要访问其他已经存在的文件，您在某些时候是否需要等待其他资源？

> 通常在现场项目中我们应该采取哪种方法？

并发处理可能更快，但可能需要更多内存

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:54:09.050

在这种情况下，到目前为止，您最大的成本将是 IO，除非您正在对同样昂贵的数据做一些事情（比如与另一个服务交谈）

您可能会发现您生成了许多线程，并且大多数线程没有做任何事情，因为您处理已加载（在内存中）文件的速度比实际加载它们的速度要快。

我建议你先看看你是否真的需要这样做，如果你真的可以通过实现并发方法获得任何东西。您可能会发现在吞吐量方面没有获得任何有意义的东西，但是您获得了额外的代码复杂性。

# c# - 使用 Way2SMS api 发送短信时出错

> ID：15152337
> 
> 赞同：1
> 
> 时间：2013-03-01T07:01:21.537
> 
> 标签：c#, visual-studio-2010, sms

我正在使用 Way2SMS api 在 Visual Studio 2010 中使用 c# 从我的 Windows 窗体应用程序发送短信。这是我的代码：

```
SendSms sms = new SendSms();
string status = sms.send(textBoxId.Text, textBoxPassword.Text, richTextBoxText.Text, textBoxSendTo.Text);
if (status == "1")
{
    MessageBox.Show("Message Sent Successfully");
}
else if (status == "2")
{
    MessageBox.Show("No Internet Connection");
}
else
{
    MessageBox.Show("Invalid Login Or No Internet Connection " + status);
} 
```

我总是遇到第二个或第三个错误情况，即没有互联网连接或无效登录。

我是否需要授予特殊权限，以便应用程序可以访问互联网。请注意，我已经关闭了防火墙。我正在使用 Windows 8 和 Visual Studio 2010。

使用：[http ://www.c-sharpcorner.com/UploadFile/b8d90a/send-sms-using-C-Sharp-net/](http://www.c-sharpcorner.com/UploadFile/b8d90a/send-sms-using-C-Sharp-net/)

# php - 具有动态值的空 SUM()

> ID：15152339
> 
> 赞同：5
> 
> 时间：2013-03-01T07:01:25.710
> 
> 标签：php, mysql

如果我只用 244 替换第一个 %s，我得到的总和没有任何问题。但是在这种情况下使用动态值 $shot 时，它似乎什么也没得到，而且我的查询也没有失败，因为其他结果都很好（例如 stories.id、story.title）。

```
$query = sprintf("
SELECT 
stories.id, 
stories.title,  
stories.timestamp, 
stories.text, 
users.name, 
users.avatar, 
users.id AS idus,
(SELECT sum(reviews.amount) FROM reviews WHERE reviews.storyid='%s') AS reviews 

FROM stories INNER JOIN users ON stories.uid=users.id WHERE stories.id = '%s'",
    mysql_real_escape_string($shot),
    mysql_real_escape_string($shot)); 
```

镜头来自这里：

```
$shot = $_GET['shot']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:08:27.933

我会写这样的东西。

```
SELECT 
stories.id, 
stories.title,  
stories.timestamp, 
stories.text, 
users.name, 
users.avatar, 
users.id AS idus,
SUM(reviews.amount) as reviews
FROM stories 
INNER JOIN users ON stories.uid=users.id 
INNER JOIN reviews ON stories.id = reviews.storyid
WHERE stories.id = '%s'" 
```

*这与您的问题无关，但与优化有很大关系。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:12:44.570

鉴于 id 始终是数字，

Make `$shot = (int)$_GET['shot'];`（%d 说明符将变量视为整数，但您可能在其他地方需要它）。

然后替换：

`reviews.storyid='%s'`和`reviews.storyid=%d`

和

`WHERE stories.id = '%s'`和`WHERE stories.id = %d`

不需要做`mysql_real_escape_string`（[为什么？](http://php.net/manual/en/function.mysql-real-escape-string.php)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T07:14:13.600

在执行查询之前，使用

```
echo $query; 
```

看看结果是什么，如果它不像你输入手动值而不是你需要改变它。

我建议使用。

```
$shot = mysql_real_escape_string($shot);
$query = "SELECT 
stories.id, 
stories.title,  
stories.timestamp, 
stories.text, 
users.name, 
users.avatar, 
users.id AS idus,
(SELECT sum(reviews.amount) FROM reviews WHERE reviews.storyid='" . $shot . "') AS reviews 

FROM stories INNER JOIN users ON stories.uid=users.id WHERE stories.id = '" . $shot . "'"; 
```

# ios - 从 UIWebView 调用 javascript 方法

> ID：15152343
> 
> 赞同：1
> 
> 时间：2013-03-01T07:01:37.290
> 
> 标签：ios, uiwebview

```
[self.webview stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"myfunc('%@')",string]]; 
```

上面的代码工作得很好，绝对没有问题，但只有当我的 javascript 方法出现在我正在加载的页面中时。但是，如果在任何外部 js 文件中引用了 js 方法，它就不会被触发，这就是我加载页面的方式

```
 [self.webview loadRequest:[[NSURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://example/mypage.html"]]]; 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T16:11:07.930

为了确保只有*在*页面完全加载后才会调用您的 javascript 函数，您必须在`webViewDidFinishLoad:`实现中调用它。

因此，例如：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {
    [webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"myfunc('%@')",string]];
    // Do any additional stuff
} 
```

# python - 什么是非类型？不太明白

> ID：15152346
> 
> 赞同：1
> 
> 时间：2013-03-01T07:01:48.053
> 
> 标签：python, debugging, nonetype

为帖子简化了它（大多数“”是我程序中功能齐全的实际代码）：

```
studentName = ""

def getExamPoints (total):

"calculates examPoints here"

def getHomeworkPoints (total):
"calculates hwPoints here"

def getProjectPoints (total):
"calculates projectPoints here"

def computeGrade ():
if studentScore>=90:
     grade='A'
elif studentScore>=80:
        grade='B'
elif studentScore>=70:
        grade='C'
elif studentScore>=60:
        grade='D'
else:
    grade='F'

def main():

classAverage = 0.0      # All below is pre-given/ required code
classAvgGrade = "C"

studentScore = 0.0
classTotal = 0.0
studentCount = 0
gradeReport = "\n\nStudent\tScore\tGrade\n============================\n"

studentName = raw_input ("Enter the next student's name, 'quit' when done: ")

while studentName != "quit":

    studentCount = studentCount + 1

    examPoints = getExamPoints (studentName)
    hwPoints = getHomeworkPoints (studentName)
    projectPoints = getProjectPoints  (studentName)

    studentScore = examPoints + hwPoints + projectPoints #(<---- heres where my problem is!)

    studentGrade = computeGrade (studentScore)

main() 
```

它一直在说：

> 文件“/home/hilld5/DenicaHillPP4.py”，第 65 行，在 main studentScore =examPoints + hwPoints + projectPoints
> 
> 类型错误：+ 不支持的操作数类型：“NoneType”和“NoneType”

我从未了解或听说过非类型错误，即使在谷歌搜索时也没有真正理解。任何认为他们了解正在发生的事情/知道什么是非类型的人？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T07:03:27.023

这只是 Python 的说法，即值是`None`（`NoneType`是“值的类型`None`”）。

它们的原因`None`是因为您的函数实际上并不是`return`一个值，因此分配调用函数的结果只是 assigns `None`。

举个例子：

```
>>> def foo():
...   x = 1
...
>>> print foo()
None
>>> def bar():
...   x = 1
...   return x
...
>>> print bar()
1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T07:04:17.910

`NoneType`是 的类型`None`。就那么简单。这意味着你正在做这样的事情：

```
a = b = None
c = a + b 
```

# android - runOnUiThread(new Runnable(){}) 对于 new Thread(){} 类型未定义

> ID：15152355
> 
> 赞同：16
> 
> 时间：2013-03-01T07:02:51.450
> 
> 标签：android

看部分：

```
runOnUiThread(new Runnable() { 
```

我有问题：

```
The method runOnUiThread(new Runnable(){}) is undefined for the type new Thread(){} 
```

所以我知道 runOnUiThread 必须来自一个活动。但我不确定这将如何实施？它是首选项/设置视图中的一个对话框

这就是 ChannelsDialogPreference 的形式：**pref_channels.xml**

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <com.example.tvrplayer.ChannelsDialogPreference
        android:title="@string/pref_channels_dialog_title"
        android:dialogMessage="@string/pref_channels_dialog_message"              
        android:negativeButtonText="test"/> 

</PreferenceScreen> 
```

**ChannelsDialogPreference：**

```
package com.example.tvrplayer;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Context;
import android.content.DialogInterface;
import android.preference.DialogPreference;
import android.util.AttributeSet;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ListView;

public class ChannelsDialogPreference extends DialogPreference {

    public static Context ctx;
//    Activity activity;

    public ChannelsDialogPreference(Context context, AttributeSet attrs) {
        super(context, attrs);

        this.ctx = context;
    }

    @Override
    protected View onCreateDialogView() {

//      Set loading spinner

//      Start looking for channels

//      When complete, show channels

        LayoutInflater inflater = ((SettingsActivity) ctx).getLayoutInflater();
        final View vw = inflater.inflate(R.layout.channel_content_view, null);
//        Do this in a new Thread

        Thread thread = new Thread()
        {
            @Override
            public void run() {
                try {
                    final JSONArray channels;
                    String username = null;
                    String linkid = null;
                    final String apiurl = "http://192.168.2.136:8080";
                    final String channelID = null;
                    final DatabaseHandler db = new DatabaseHandler(ctx);
                    List<User> users = db.getAllUsers();  
                    for (User cn : users) {
                         linkid = cn.getLinkID();
                         username = cn.getUserName();
                     }
                     db.close();

                    final ArrayList< HashMap < String, String > > channelList = new ArrayList < HashMap < String, String > > ();
                    try {

                        if ( channelID != null ) {
                            channels = Json.getJson(apiurl + "/rest/channel/"+ linkid +"/"+ username + "/" + channelID, "GET");
                            Log.i("CHANNELS", channels.toString());
                            for (int i=0; i < channels.length(); i++) { 
                                JSONObject json_data = channels.getJSONObject(i);
                                String name = json_data.getString("Name");
                                String channelid = json_data.getString("ChannelID");
                                HashMap<String, String> channelObject = new HashMap<String, String>();
//                                  if ( json_data.getString("ParentPath") == "" ) {
                                channelObject.put("id", channelid);
                                channelObject.put("name", name);
                                channelList.add(channelObject);
//                                  }
                            }
                        } else {
                            channels = Json.getJson(apiurl + "/rest/channel/"+ linkid +"/"+ username, "GET");
                            Log.i("CHANNELS", channels.toString());
                            for (int i=0; i < channels.length(); i++) { 
                                JSONObject json_data = channels.getJSONObject(i);
                                String name = json_data.getString("Name");
                                String channelid = json_data.getString("ChannelID");
                                HashMap<String, String> channelObject = new HashMap<String, String>();
                                Log.i("CHANNEL LEN", ""+ json_data.getString("ParentID").length());
                                if ( json_data.getString("ParentID").length() < 32 ) {
                                    channelObject.put("id", channelid);
                                    channelObject.put("name", name);
                                    channelList.add(channelObject);
                                }
                            }
                        }
                        runOnUiThread(new Runnable() {
                             public void run() {
                                 HiddenChannelsListAdapter adapter = new HiddenChannelsListAdapter(ctx, channelList);
                                    ListView lv = (ListView) vw.findViewById(R.id.list);
                                    lv.setAdapter(adapter);
                                    lv.isClickable();
                                    lv.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() 
                                    {
                                        @Override
                                        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3)
                                        {
                                            Log.i("CLICKED ON LV ITEM", "YEA");
                                        }
                                    });
                            }
                        });

                    } catch (JSONException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }                               
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        };

        thread.start(); 

//        new ChannelHandler().execute(apiurl, username, linkid, vw, ctx, channelID);
        return vw;
    }

    @Override
    protected void onDialogClosed(boolean positiveResult) {
        super.onDialogClosed(positiveResult);
        persistBoolean(positiveResult);
    }

    @Override
    public void onClick (DialogInterface dialog, int which)
    {
        super.onClick(dialog, which);
//
        Log.v("which", Integer.toString(which));
//
        if(which == -1) { //Clear all
//          new ChannelHandler().execute(apiurl, username, linkid, vw, ctx, channelID);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-01T07:12:51.917

像这样写——

```
((Activity) context).runOnUiThread(new Runnable() {
    @Override
    public void run() {
        //Code for the UiThread
    }
}); 
```

* * *

对于片段：

```
getActivity().runOnUiThread(new Runnable() {
    @Override
    public void run() {
        //Code for the UiThread
    }
}); 
```

这可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-14T14:01:25.680

如果您正在使用`Fragments`，只需在`getActivity()`

此处添加替换：
`runOnUiThread(new Runnable() {`
按
`getActivity().runOnUiThread(new Runnable() {`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T07:33:53.240

你必须`setOnClickListener`在你的代码中没有设置

```
Button confirm = (Button) dialog.findViewById(R.id.btn_confirm);
confirm.setOnClickListener(new OnClickListener() 
{

    @Override
    public void onClick(View v)
    {
        your call to method...
    }
}); 
```

# javascript - JavaScript 闭包问题

> ID：15152357
> 
> 赞同：1
> 
> 时间：2013-03-01T07:02:57.890
> 
> 标签：javascript

为什么这不会触发：

```
var counter = function () {

    return function() {
        alert('Fire!');
    }
}

counter(); 
```

但这确实：

```
var counter = function () {

    return function() {
        alert('Fire!');
    }
}

var test = counter(); 
test(); 
```

似乎将函数分配给变量会有所不同，但为什么呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T07:05:52.917

尝试调用返回的函数

```
counter()(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T07:04:38.143

您正在返回一个函数。你也必须调用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T07:04:56.623

`count()`返回一个函数。它确实触发了，它只是不调用它返回的函数。在第二个示例中，您将返回内部函数，*然后*通过`test()`. 如果您希望示例相似，请更改`test = count()`为`test = counter`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T07:05:31.400

好的，你的第一个例子，你正在分配

```
function() {
    alert('Fire!');
} 
```

到变量。但不要求它的价值。在您的第二个示例中，您将函数分配给上述变量，然后您调用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T07:05:32.817

```
var counter = function () {
        alert('Fire!');
}

counter(); 
```

这会火

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T07:07:50.343

在您的代码中

```
var counter = function () {

    return function() {
        alert('Fire!');
    }
}

counter(); 
```

你很容易得到一个函数来返回counter()。这就像调用一个返回值的函数而你没有捕捉到它。

您必须捕获返回函数，然后像在第二个代码中那样调用它。

# hibernate - 两个表中相同主键的一对一映射

> ID：15152359
> 
> 赞同：0
> 
> 时间：2013-03-01T07:03:01.600
> 
> 标签：hibernate

我正在通过 xml 的一对一映射，通过在两个表中使用相同主键的方法，我有以下 pojo .. 也请告知我在 hbm 文件或其他东西中特别遵循的正确方法如果我失踪了，请告诉我

1) 第一个是人

```
public class Person
{
     private int personId;
     private String name;
     private Address address;
    public Person() 
    {
        super();
    }
    public Person(String name, Address address) 
    {
        super();
        this.name = name;
        this.address = address;
    }
    public int getPersonId() {
        return personId;
    }
    public void setPersonId(int personId) {
        this.personId = personId;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public Address getAddress() {
        return address;
    }
    public void setAddress(Address address) {
        this.address = address;
    }

} 
```

2) 另一个是地址

```
public class Address 
{
     private int id;
     private String city,state;

    public Address()
    {
        super();

    }

    public Address(String city, String state)
    {
        super();
        this.city = city;
        this.state = state;
    }

    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }
    public String getCity() {
        return city;
    }
    public void setCity(String city) {
        this.city = city;
    }
    public String getState() {
        return state;
    }
    public void setState(String state) {
        this.state = state;
    }

} 
```

hbm xml映射文件是..

```
<class name="mypack.Address" table="address31">
<id name="id" column="addressId" type="int">
<generator class="increment"/>
</id>
<property name="city"/>
<property name="state"/>
</class>

<class name="mypack.Person" table="person31">
<id name="personId" type="int">
<generator class="foreign">
<param name="property">address</param>
</generator>
</id>
<property name="name"/>
<one-to-one name="address" class="mypack.Address"/>
</class>

</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:09:39.610

请参阅下面的链接以供参考。可能会对您有所帮助

[http://www.jcombat.com/hibernate/one-to-one-xml-mapping-with-primary-key-association](http://www.jcombat.com/hibernate/one-to-one-xml-mapping-with-primary-key-association)

# android - ViewFlipper.setDisplayedChild() 在 Android 中不起作用

> ID：15152361
> 
> 赞同：2
> 
> 时间：2013-03-01T07:03:04.830
> 
> 标签：android, layout, viewflipper

我有这样的 ViewFlipper 布局，

```
 <ViewFlipper xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/flipper"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
     <include android:id="@+id/mainView"  layout="@layout/activity_main" />
     <include android:id="@+id/readingView"  layout="@layout/get_reading" />
     <include android:id="@+id/datePickView" layout="@layout/custom_dialog" />
    </ViewFlipper> 
```

在 MainActivity 中，

```
 public class MainActivity extends Activity {

  final Context context = this;
  public ViewFlipper flipper;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);   
    flipper = (ViewFlipper) findViewById(R.id.flipper);
  //Inflate the Views      
    setContentView(R.layout.activity_main);
    Button AddWaterReading=(Button)findViewById(R.id.button1);    //click on + button.
    AddWaterReading.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            flipper.setDisplayedChild(R.id.readingView);
            TextView txtgetCurrentDate=(TextView)findViewById(R.id.editText1);
            final Calendar c=Calendar.getInstance();
            txtgetCurrentDate.setText((c.get(Calendar.MONTH)+1)+"/"+c.get(Calendar.DATE)+"/"+c.get(Calendar.YEAR));                         
        }
    });
    } 
```

当我单击“AddWaterReading”按钮时，布局视图不会更改为“readingView”。我使用 ViewFlipper 从主布局更改为另一个布局。但显示应用程序错误（“不幸的是应用程序已停止”）。

日志猫：

```
 03-01 07:29:58.122: E/Trace(3924): error opening trace file: No such file or   directory               (2)
   03-01 07:29:59.102: I/Choreographer(3924): Skipped 200 frames!  The application may   be doing too much work on its main thread.
   03-01 07:29:59.232: D/gralloc_goldfish(3924): Emulator without GPU emulation detected.
   03-01 07:30:07.972: D/AndroidRuntime(3924): Shutting down VM
   03-01 07:30:07.972: W/dalvikvm(3924): threadid=1: thread exiting with uncaught exception (group=0x2bd39930)
   03-01 07:30:07.982: E/AndroidRuntime(3924): FATAL EXCEPTION: main
   03-01 07:30:07.982: E/AndroidRuntime(3924): java.lang.NullPointerException
   03-01 07:30:07.982: E/AndroidRuntime(3924):  at com.example.electricityreading.MainActivity$1.onClick(MainActivity.java:35)
   03-01 07:30:07.982: E/AndroidRuntime(3924):  at android.view.View.performClick(View.java:4202)
   03-01 07:30:07.982: E/AndroidRuntime(3924):  at android.view.View$PerformClick.run(View.java:17340)
   03-01 07:30:07.982: E/AndroidRuntime(3924):  at android.os.Handler.handleCallback(Handler.java:725)
   03-01 07:30:07.982: E/AndroidRuntime(3924):  at android.os.Handler.dispatchMessage(Handler.java:92)
   03-01 07:30:07.982: E/AndroidRuntime(3924):  at android.os.Looper.loop(Looper.java:137)
  03-01 07:30:07.982: E/AndroidRuntime(3924):   at android.app.ActivityThread.main(ActivityThread.java:5039)
  03-01 07:30:07.982: E/AndroidRuntime(3924):   at java.lang.reflect.Method.invokeNative(Native Method)
  03-01 07:30:07.982: E/AndroidRuntime(3924):   at java.lang.reflect.Method.invoke(Method.java:511)
  03-01 07:30:07.982: E/AndroidRuntime(3924):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
  03-01 07:30:07.982: E/AndroidRuntime(3924):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
  03-01 07:30:07.982: E/AndroidRuntime(3924):   at dalvik.system.NativeStart.main(Native Method) 
```

谁能建议如何在布局之间切换？我是安卓新手。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:28:47.580

ViewFlipper 的`setDisplayedChild()`方法采用视图的 INDEX 来显示，而不是视图： http: [//developer.android.com/reference/android/widget/ViewAnimator.html#setDisplayedChild(int)](http://developer.android.com/reference/android/widget/ViewAnimator.html#setDisplayedChild(int))

# java - PMD中不可避免的DD异常

> ID：15152365
> 
> 赞同：5
> 
> 时间：2013-03-01T07:03:40.213
> 
> 标签：java, performance, pmd

我遇到了一个特殊情况，我无法解决 PMD 中的 DD 异常。假设代码是：

```
BigDecimal amount = BigDecimal.ZERO;
for(int i=0;i<5;i++)
{
      amount = amount.add(i);
}
return amount; 
```

通过 PMD 运行此代码时，它会在声明金额时显示 DD 异常。但是，如果我删除初始化，我会得到一个异常。这种情况如何通过 PMD。任何人？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T07:06:39.333

从[“有争议的规则”](http://pmd.sourceforge.net/pmd-5.0.2/rules/java/controversial.html)页面，DataflowAnomalyAnalysis 部分：

> DD - 异常：重新定义最近定义的变量。这是不祥之兆，但不一定是错误。

在这种情况下，它绝对不是错误。我建议您抑制或忽略此特定情况的警告。（在计算下一个值时使用原始值的事实表明该规则可以写得更好，老实说。）

了解规则的原因并选择遵守哪些规则以及在何处遵守是非常重要的。例如，我*强烈*反对“只有一个出口点”的规则——很多时候，拥有多个出口点会使一种方法更易于阅读。要有选择性，如果一条规则*通常*没问题，但您已验证您的代码在这种特定情况下没问题，请在该位置[取消警告](http://pmd.sourceforge.net/pmd-5.0.2/suppressing.html)。

# sql - 如何使此光标更改列值？

> ID：15152370
> 
> 赞同：0
> 
> 时间：2013-03-01T07:03:54.930
> 
> 标签：sql, sql-server

我是 sql 新手，没有编写游标的经验。`distance`我的表客户中有一个列名，具有这样的值

```
distance

5miles
3km
6miles
null
6km 
```

我想编写一个游标，读取距离列的每列数值并增加 30% 并将整个数字乘以 0.62137 并将列值替换为单位英里。有人可以帮我解决这个问题。或者给我一个想法，我急需修复它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T07:25:02.060

你可以用一个简单的查询来试试：

```
SELECT CAST(CAST(REPLACE(REPLACE(distance, 'km' , '' ), 'miles', '')as float) * 1.3 * 0.62137 AS VARCHAR) + ' miles'
FROM customer 
```

在这里，字符串被替换并乘以您的值，然后将其转换回字符串并与“英里”连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T07:25:24.133

我不清楚您要执行哪些计算，或者用英里替换列值是什么意思。但我会告诉你一个开始：

```
--Your sample data
declare @t table (distance varchar(20) null)
insert into @t (distance) values
('5miles'),('3km'),('6miles'),(null),('6km')

--A possible update
; with Positioned as (
    select distance, PATINDEX('%[a-z]%',distance) as FirstLetter from @t
), Converted as (
    select distance,FirstLetter,CONVERT(int,SUBSTRING(distance,1,FirstLetter-1)) as Number from Positioned
)
update Converted set distance = CONVERT(varchar(20), Number * 0.6174) + 'miles ' + SUBSTRING(distance,FirstLetter,8000)

select * from @t 
```

这会产生以下结果：

```
distance
--------------------
3.0870miles miles
1.8522miles km
3.7044miles miles
NULL
3.7044miles km 
```

您会注意到，在`UPDATE`语句中，我可以访问字符串的数字部分，转换为 an `int`（它可以很容易地是 a `float`），并且我还可以访问原始单位（如果我想做一些基于那些）。

这是我目前能做的最好的事情——你的问题很不清楚到底要发生什么转变（你提到了增加 30%*和*乘以 0.62137）。所以我去了：

> 给个主意

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T07:40:07.317

改进的[Obl Tobl](https://stackoverflow.com/users/1855968/obl-tobl)回答一点：

```
UPDATE d    
SET 
    d.dist = CAST(CAST(REPLACE(REPLACE(d1.dist, 'km', ''), 'miles', '') as FLOAT) * 1.3 * 0.62137 AS VARCHAR) + 'miles'
FROM distance d
INNER JOIN distance d1
    ON d.id = d1.id 
```

# ruby-on-rails - 设计注册无效的电子邮件或密码错误

> ID：15152376
> 
> 赞同：0
> 
> 时间：2013-03-01T07:04:12.897
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我目前正在测试我的 Devise 实现——除了我的注册表单外，一切都运行良好。

闪信错误：

> 无效的电子邮件或密码。

然后我被定向到登录表单。

不知道我哪里错了。

报名表：

```
<h2>Sign Up</h2>
<%= simple_form_for(resource, :as => resource_name, :url => session_path(resource_name), :html => {:class => 'form-vertical' }) do |f| %>
  <%= f.error_notification %>
  <%= f.input :name, :autofocus => true %>
  <%= f.input :email, :required => true %>
  <%= f.input :password, :required => true %>
  <%= f.input :password_confirmation, :required => true %>
  <%= f.button :submit, 'Sign up', :class => 'button' %>
<% end %>
<% render 'devise/shared/links' %> 
```

路线：

```
authenticated :user do
    root :to => 'home#index'
  end

  devise_for :users

  resources :users

  root :to => 'home#index'

  resources :songs

  get 'home/index'

  match 'home/about', :to => 'home#about'

  match 'home/contact', :to => 'home#contact' 
```

导轨服务器：

```
Started POST "/users/sign_in" for 127.0.0.1 at 2013-03-01 16:42:47 +1000
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"DxwF+dMC//5UIX5beKhzaBLjnB2xaJe7pQb/C3xNK1k=", "user"=>{"name"=>"test", "email"=>"asdfas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Sign up"}
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."email" = 'asdfas@gmail.com' LIMIT 1
Completed 401 Unauthorized in 2ms
Processing by Devise::SessionsController#new as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"DxwF+dMC//5UIX5beKhzaBLjnB2xaJe7pQb/C3xNK1k=", "user"=>{"name"=>"test", "email"=>"asdfas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Sign up"}
  Rendered /Users/thmsmxwll/.rvm/gems/ruby-1.9.3-p194/gems/devise-2.2.3/app/views/devise/shared/_links.erb (0.4ms)
  Rendered devise/sessions/new.html.erb within layouts/application (7.5ms)
  Rendered layouts/_navigation.html.erb (0.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 104ms (Views: 19.1ms | ActiveRecord: 0.0ms) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:36:38.987

这是由于表单助手中的**url**错误，只需将其替换为，

```
 <%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => {:class => 'form-vertical' }) do |f| %> 
```

注册时，url 需要是 registration_path 而不是 session_path。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:17:34.263

你有错误的注册路径。

您正在注册，但您的 rails 服务器的处理是：

```
Processing by Devise::SessionsController#create as HTML 
```

上面的行表明该设计以某种方式尝试为用户创建登录会话，而不是注册。

因此，rails 正在寻找`email" = 'asdfas@gmail.com`您的数据库中尚未存在的行，因为您正在注册。

# linux - 如何在 Linux 内核中使用 RSA

> ID：15152379
> 
> 赞同：1
> 
> 时间：2013-03-01T07:04:24.003
> 
> 标签：linux, kernel, rsa

我正在编写一个模块，该模块将使用 RSA 来编码、解码和生成密钥。但是我在内核源代码（我的意思是 linux-kernel/crpyto/）中没有找到任何关于 RSA 的 API。

我不想将 OpenSSL 或类似的东西带入内核，因为这会花费很多时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T07:21:53.543

[加密模块](http://www.cs.fsu.edu/~baker/devices/lxr/http/source/linux/include/linux/crypto.h?v=2.6.25.8)公开了Linux [Kernel Crypto API](http://www.linuxjournal.com/article/6451)。RSA 支持存在于[内核 3.7](https://github.com/torvalds/linux/tree/master/crypto/asymmetric_keys)中。虽然实现[仅限于签名验证](http://kernelnewbies.org/Linux_3.7#head-04b98580ad0a22b9dfb66cc1c6f7c744fdcd22a4)。

**更多信息**

*   [如何在 linux 内核 2.6 中使用 CryptoAPI](https://stackoverflow.com/questions/3869028/how-to-use-cryptoapi-in-the-linux-kernel-2-6)
*   [Linux Crypto API 和 linux/crypto.h - 文档](https://stackoverflow.com/questions/5152829/linux-crypto-api-and-linux-crypto-h-documentation)
*   [Linux 交叉参考 - crypto.h](http://lxr.free-electrons.com/source/include/linux/crypto.h)

# c - 如何从父进程写入 getpass() 输入？

> ID：15152386
> 
> 赞同：0
> 
> 时间：2013-03-01T07:04:49.410
> 
> 标签：c, linux, input, passwords, popen

假设我有以下短程序，我将其称为`Parent.c`.

```
#include <unistd.h>
#include <stdio.h>
#include <string.h>

int main(){
    char buffer[100];
    memset(buffer, '\0', 100);
    scanf("%s", buffer);
    printf("%s\n", buffer);

    FILE* child =  popen("./child","w");
    fwrite(buffer, 1, strlen(buffer), child);
    pclose(child);

} 
```

现在有两种情况`child.c`。

情况1：

```
#include <unistd.h>
#include <stdio.h>
#include <string.h>

int main(){
    char buffer[100];
    memset(buffer, '\0', 100);
    scanf("%s", buffer);
    printf("%s\n", buffer);
} 
```

案例二：

```
#include <unistd.h>
#include <stdio.h>
#include <string.h>

int main(){
    char* password = getpass("");
    printf("%s\n", password);

} 
```

在第一种情况下，如果我运行`./Parent`，然后键入“Hello World”，我会得到两个“Hello World”的回声。一个来自子程序，一个来自父程序。

情况二，如果我运行`./Parent`，然后键入“Hello World”，我会得到一个“Hello World”的回声，然后从子进程中得到一个输入提示。如果我在此提示符下键入“再见”，我将得到“再见”的回声。

如何修改`Parent.c`以在案例 2 中获得与案例 1 中当前发生的相同行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:15:29.920

简单的答案是：你不能。

从[`getpass`手册页](http://linux.die.net/man/3/getpass)：

> **getpass()**函数打开（进程的`/dev/tty`控制终端），输出字符串提示，关闭回显，读取一行（“密码”），恢复终端状态并`/dev/tty`再次关闭。

这意味着它直接从终端设备读取，而不是从标准输入读取。

# c - 有没有办法计算以下东欧字符所需的字节数？

> ID：15152393
> 
> 赞同：2
> 
> 时间：2013-03-01T07:05:23.570
> 
> 标签：c, character-encoding, sizeof

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T07:10:54.660

代码：

```
 printf("%d\n",(int)strlen("‰")); 
```

返回值：

```
 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T09:03:20.433

正如 Aki 所建议的，您可以使用 strlen，或者您可以通过以下方式计算字节数：

```
#include <stdio.h>

int fn(const char *s)
{
    int n = 0;

    if (*s != '\0') {
        do {
            n++;
            s++;
        } while ((*s & 0xc0) == 0x80);
    }
    return n;
}

int main(void)
{
    printf("%d\n", fn("‰"));
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T23:46:46.193

sizeof 可以工作。我想使用：

```
unsigned char a[]="‰"; 
size_t s=sizeof(a)-1;
size_t t=strlen((char*)a); 
```

但在 VC2012 中`s`，`t`是 1。`a[0]`是 137。另外，我认为正在寻找的正是[`mblen()`](http://en.cppreference.com/w/c/string/multibyte/mblen)

# python - Getting value from the tag

> ID：15152398
> 
> 赞同：2
> 
> 时间：2013-03-01T07:05:38.987
> 
> 标签：python, html, parsing

How can I read the value from

```
<th class="class_name"> Sample Text </th> 
```

Can any one help me in getting the string "Sample Text" from the above HTML code using python.

Thank you.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T07:29:25.877

你可以使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)这是我最喜欢的解析 html 的库。

```
from BeautifulSoup import BeautifulSoup
html = '<th class="class_name"> Sample Text </th>'
soup = BeautifulSoup(html)
print soup.th.text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:19:44.527

正则表达式解决方案：

```
import re

th_regex = re.compile(r'<th\s+class="class_name">(.*?)</th>')
search_result = th_regex.search(input_string)

print(search_result and search_result.group(1) or 'not found') 
```

注意：您需要使用`?`after使用非贪婪搜索，当发生`.*`时将停止获取字符。`</th>`否则你会得到整个字符串到`input_string`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T07:20:11.323

您可以使用`minidom`它来解析它。不过，我不确定您的确切需求是什么。

```
from xml.dom import minidom
dom = minidom.parseString(html)
for elem in dom.getElementsByTagName('th'):
    if elem.getAttribute('class') == 'class_name':
        print elem.firstChild.nodeValue 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T07:33:26.497

正则表达式解决方案：

```
import re

s = '<th class="class_name"> Sample Text </th>'
data = re.findall('<th class="class_name">(.*?)</th>', s)
print data 
```

# java - how to compare the distance and duration strings returned by google directions api

> ID：15152402
> 
> 赞同：0
> 
> 时间：2013-03-01T07:06:02.373
> 
> 标签：java, android, google-maps

Since the directions google map api returns the drivind distance and time between origin and destinations. Now If I have to compare the time and distance value in java ,how can we do it. eg : Distance1= 22km Distance2= .98km Time1= 1hour 2 min Time2 = 3 min

Now if I have to compare the time and distance string which is greater ,how we can do it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:49:43.727

您需要将这些值转换为数字，例如距离的公里数和时间的分钟数 - 例如 22 和 0.98，分别。62 和 3 为您的示例。然后你可以简单地比较数字。

我不知道 api 是否总是以公里和小时/分钟为单位返回值，你应该确保这一点，然后“简单地”解析你得到的值。对于距离，这将是这样的：

```
double distance1 = Double.valueOf("22km".replace("km,""));
double distance2 = Double.valueOf(".98km".replace("km,""));
if (distance1 < distance2) {
    System.out.println("distance1 is smaller");
} else if (distance2 < distance1) {
   System.out.println("distance2 is smaller");
} else {
   System.put.println("both distances are the same.");
} 
```

对于时间部分，解析会稍微复杂一些。

是的，我知道您可以使用正则表达式更优雅地做到这一点，但我不得不尝试让它们正确，所以我采用了简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:39:20.070

您错误地标记了这个。这与 Javascript 而不是 Java 有关。它们“不”是同一种语言。

至于你的问题。您可以通过直接访问 json 从方向检索值。

```
alert(JSON.stringify(response['routes'][0])); 
```

在您的 OK 检查之后直接放置的那条线应该可以帮助您入门。

# php - 使用 DOM 解析 html

> ID：15152404
> 
> 赞同：2
> 
> 时间：2013-03-01T07:06:19.360
> 
> 标签：php, html, dom

我想从提供的特定 url 解析 HTML 数据。但我无法解析数据，因为我收到的错误很少。

这是我的代码：-

```
 $html = new DOMDocument();
    $html->loadHTML($url);  //$url is where the site url is defined
    $value = array();
    foreach($html->find($identifier) as $element) //$identifier is where div, a etc is stored
    {
        $value[] = $element->src."<br />";
    }
    print_r($value); 
```

我收到以下错误

```
Call to undefined method DOMDocument::find() 
```

谁能帮我解决这个问题。我正在使用 cake-php 2.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T07:12:35.673

如错误所示，`DOMDocument`没有`find`方法。但是，它确实有很多非常好的 DOM 解析方法：[http ://www.php.net/manual/en/class.domdocument.php](http://www.php.net/manual/en/class.domdocument.php)

如果`$identifier`是元素名称，则使用它是有意义的

```
foreach ($html->getElementsByTagName($identifier) as $element) {
    $value[] = $element->nodeValue + "<br>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T07:12:30.793

这将不起作用：

```
$html->loadHTML($url); 
```

LoadHTML 加载一个字符串，例如：

```
$html->loadHTML("<html><body>Test<br></body></html>"); 
```

尝试使用 loadHTMLfile：

```
$html->loadHTMLFile("filename.html"); 
```

见：[http ://www.php.net/manual/en/domdocument.loadhtmlfile.php](http://www.php.net/manual/en/domdocument.loadhtmlfile.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T07:13:39.247

阅读有关您正在使用的课程的文档怎么样？[DOMDocument](http://php.net/manual/en/class.domdocument.php)在 php.net 站点上有很好的文档记录，并且没有提及`find`方法，您为什么认为它会这样做？

`DOMDocument`有许多任何`JavaScript`开发人员都熟悉的方法，例如您正在寻找的应该是什么`getElementsByTagName`。`getElementById`

此外，如果您从 URL 加载 HTML，该`DOMDocument::loadHTML`方法将不起作用，因为它需要一个包含有效 HTML 的字符串，而不是 URI。

`DOMDocument::loadHTMLFile`可能与 URL 参数一起工作（不能确定，没有在这台计算机上安装 PHP 来检查），但如果没有，你可以结合起来`DOMDocument::loadHTML`让它`file_get_contents`工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T07:28:30.263

据我所见，蛋糕 php 文档...... domDocument 类没有 find() 函数。

如何使用[此处记录的 Xml 类的 toArray() 方法](http://api.cakephp.org/2.0/source-class-Xml.html#284-302)

# joomla2.5 - joomla 2.5 not geting $_POST values of form on submit

> ID：15152416
> 
> 赞同：1
> 
> 时间：2013-03-01T07:07:11.633
> 
> 标签：joomla2.5

i am new to joomla.i design a form component for understand mvc pattern like contact form.i form show easily and it is viewable in front end now i want to understand how database is used in joomla.how i send form values to database which files we have to use model view controller.

```
// no direct access
defined('_JEXEC') or die;
JHtml::_('behavior.keepalive');
JHtml::_('behavior.tooltip');
JHtml::_('behavior.formvalidation');

//Load admin language file
$lang = JFactory::getLanguage();
$lang->load('com_new', JPATH_ADMINISTRATOR);
$document = &JFactory::getDocument();
$document->addStyleSheet(JURI::base() . 'C:\wamp\www\j25\components\com_new\assets\demo.css');
?>
<div class="item_fields">
<?php #if( $this->item ) : ?>
 <form id="form-feild" action="#" method="post" class="form-validate" enctype="multipart/form-data">

<table class="body">
        <tr><td><?php echo $this->form->getLabel('firstname'); ?></td><td></td><td><?php echo $this->form->getInput('firstname'); ?></td></tr>
        <tr><td><?php echo $this->form->getLabel('middlename'); ?></td><td></td><td><?php echo $this->form->getInput('middlename'); ?></td></tr>
        <tr><td><?php echo $this->form->getLabel('lastname'); ?></td><td></td><td><?php echo $this->form->getInput('lastname'); ?></td></tr>
        <tr><td><?php echo $this->form->getLabel('gender'); ?></td><td></td><td><?php echo $this->form->getInput('gender'); ?></td></tr>
        <tr><td><?php echo $this->form->getLabel('dateofbirth'); ?></td><td></td><td><?php echo $this->form->getInput('dateofbirth'); ?></td></tr>
        <tr><td><?php echo $this->form->getLabel('address'); ?></td><td></td><td><?php echo $this->form->getInput('address'); ?></td></tr>
        <tr><td><?php echo $this->form->getLabel('state'); ?></td><td></td><td><?php echo $this->form->getInput('state'); ?></td></tr>
        <tr><td><?php echo $this->form->getLabel('postcode'); ?></td><td></td><td><?php echo $this->form->getInput('postcode'); ?></td></tr>
        <tr><td><?php #echo 'index.php?option=com_details&task=feild.save'; ?></td></tr>    
    <table>   
 <div>
    <button type="submit" class="validate"><span><?php echo JText::_('JSUBMIT'); ?></span></button>
    <?php echo JText::_('or'); ?>
<a href="<?php echo JRoute::_('index.php?option=com_new&task=new.cancel'); ?>" title="<?php echo JText::_('JCANCEL'); ?>"><?php echo JText::_('JCANCEL'); ?></a>

    <input type="hidden" name="option" value="com_new" />
    <input type="hidden" name="task" value="new.save" />
    <?php echo JHtml::_('form.token'); ?>
    </div>
    </form>
 note:->how action work on joomla.In few files i find like JRoute::_('index.php?option=com_new&task=new.save') 
```

help me thank in advance

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:37:29.920

您好[这里](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Example_of_a_frontend_update_function#Basic_frontend_form)有在 joomla 中使用 mvc 模式构建表单的官方文档。

表单进入您的 tmp/default.php (site/views/updhelloworld/tmpl/default.php)，然后设置您的操作，当您提交表单时，您将“重定向”到控制器 (site/controllers/updhelloworld.php)，在这里你必须检查你的表格数据

```
 $data = JRequest::getVar('jform', array(), 'post', 'array'); 
```

然后在您的模型中使用该操作

```
 $upditem        = $model->updItem($data); 
```

在您的模型中，您使用您的数据库。

```
 public function updItem($data)
    {
    // set the variables from the passed data
    $id = $data['id'];
    $greeting = $data['greeting'];

    // set the data into a query to update the record
            $db             = $this->getDbo();
            $query  = $db->getQuery(true);
    $query->clear();
            $query->update(' #__helloworld ');
            $query->set(' greeting = '.$db->Quote($greeting) );
            $query->where(' id = ' . (int) $id );

            $db->setQuery((string)$query);

    if (!$db->query()) {
        JError::raiseError(500, $db->getErrorMsg());
            return false;
    } else {
            return true;
            }
    } 
```

# c# - Paypal page not displaying in the iframe tag

> ID：15152420
> 
> 赞同：0
> 
> 时间：2013-03-01T07:07:26.703
> 
> 标签：c#, asp.net, paypal, payment-gateway

I am newbie to paypal. I want to integrate the direct payment in the same website. I have read the pdf file (Website payment Pro Hosted) and put some code in the html page. I have posted the code like:

```
<iframe name="hss_iframe" width="570px" height="540px"></iframe>
<form style="display:none" target="hss_iframe" name="form_iframe" method="post" action="https://securepayments.paypal.com/cgi-bin/acquiringweb">
   <input type="hidden" name="cmd" value="_hosted-payment">
   <input type="hidden" name="subtotal" value="50">
   <input type="hidden" name="business" value="HNZ3QZMCPBAAA">
   <input type="hidden" name="paymentaction" value="sale">
   <input type="hidden" name="template" value="templateD">
   <input type="hidden" name="return" value="https://yourwebsite.com/receipt_page.html">
</form> 
```

but the iframe is not loading. What am I doing wrong. Am I missing any fields. I am displaying the iframe in button click.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:22:16.970

如果你只有我们看到的代码，那么什么都不做，是一个隐藏的表单，`iframe`当你提交它时会填写！

最后（或某处）你必须也有`submit()`这种形式：

```
<script type="text/javascript">
 document.form_iframe.submit();
</script> 
```

# c++ - 类成员的内存泄漏

> ID：15152421
> 
> 赞同：0
> 
> 时间：2013-03-01T07:07:26.480
> 
> 标签：c++, string, text, directwrite

我认为这不需要另一个问题，所以我正在编辑这个非常相关的问题。

我有一个代码可以通过从 char* 转换为 wchar_t* 来绘制文本，我怀疑是内存错误，因为程序内存会以疯狂的速度增长（5,000 K 到 1,500,000 分钟）。

我怀疑 mbstowcs()，但我想我现在发现了问题。

我正在使用一种相当糟糕的方式来获取颜色来绘制一般的东西。

```
class MainClass {
    public:
        ID2D1SolidColorBrush* custom_color;
        ID2D1SolidColorBrush  get_rgba(float r, float g, float b, float a) {
            // render is a validated ID2D1RenderTarget*
            render->CreateSolidColorBrush(D2D1::ColorF(r,g,b,a),&custom_color);
            return custom_color;
        }
}; 
```

几乎可以肯定，内存使用量的增加来自此功能。有没有更好的方法可以返回这样的自定义颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:21:44.003

您似乎实际上没有内存泄漏。而且内存泄漏工具报告的许多“泄漏”有时是误报。但是，有一个简单的解决方法可以消除 nxtx 作为可能的泄漏。由于您每次都分配固定数量（250 个字符），因此您可以轻松地从堆栈中分配它：

```
 const int MY_MAX_STRING_SIZE = 1000;
    wchar_t ntxt[MY_MAX_STRING_SIZE]; // simple stack allocation
    mbstowcs(ntxt,text.c_str(),MY_MAX_STRING_SIZE);
    ntxt[MY_MAX_STRING_SIZE-1] = 0; //insure null termination
    render->DrawTextA(ntxt,text.length(),font,trect,color);
} 
```

我注意到的一件事是您的 mbstowc 调用将“大小”指定为要复制的最大字符数，但硬编码 250 作为长度。你确定你确定“大小”总是小于 250 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:24:17.470

它不像你有内存泄漏。但可能存在危险行为：**mbstowcs**接受 dest 中**wchar_t**的最大长度，但您提供字符串长度。修复此问题：

```
 int size=text.length()+1;
    enum { NTXT_LEN = 250 };
    wchar_t* ntxt= new wchar_t[NTXT_LEN];
    mbstowcs(ntxt, text.c_str(), NTXT_LEN); 
```

此外，值得将 raw **new替换为****scoped_array**之类的东西

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T23:08:10.460

我的问题是在返回 ID2D1SolidColorBrush* 作为颜色变量的代码中，每次调用它时都会执行 Create() 而不是 Release，因此画笔会堆积起来并变成内存泄漏。**

# iphone - 如何在 iOS 中的 PDF 中绘制多个彩色文本？

> ID：15152427
> 
> 赞同：2
> 
> 时间：2013-03-01T07:07:48.320
> 
> 标签：iphone, ios, objective-c, xcode

我正在做一个项目，我需要将一些 NSString 文本绘制到 PDF 中。我能够以单色绘制 PDF 中的文本。我想在 PDF 中实现搜索方法，通过它我可以搜索 PDF 中的特定字符串并用不同的颜色标记它。

下面是我用来在 PDF 中绘制单色文本的代码。

```
- (void) drawText
{
    CGContextRef    currentContext = UIGraphicsGetCurrentContext();
    CGContextSetRGBFillColor(currentContext, 0.0, 0.0, 1.0, 1.0);

    NSString *textToDraw = pdfTextView.text;

    UIFont *font = [UIFont systemFontOfSize:14.0];

    CGSize stringSize = [textToDraw sizeWithFont:font
                               constrainedToSize:CGSizeMake(pageSize.width - 2*kBorderInset-2*kMarginInset, pageSize.height - 2*kBorderInset - 2*kMarginInset)
                                   lineBreakMode:UILineBreakModeWordWrap];

    CGRect renderingRect = CGRectMake(kBorderInset + kMarginInset, kBorderInset + kMarginInset + 50.0, pageSize.width - 2*kBorderInset - 2*kMarginInset, stringSize.height);

    [textToDraw drawInRect:renderingRect
                  withFont:font
             lineBreakMode:UILineBreakModeWordWrap
                 alignment:UITextAlignmentLeft];

} 
```

是否可以从 PDF 中检索文本（如果它只包含文本）？

请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T07:17:50.120

您需要绘制属性字符串而不是简单字符串。试试这个。

```
CGContextSetTextMatrix(pdfContext, CGAffineTransformIdentity);
CGMutablePathRef path = CGPathCreateMutable(); 
CGRect bounds = CGRectMake(x,   y, width, height); 
CGPathAddRect(path, NULL, bounds);

NSMutableAttributedString * string = [[NSMutableAttributedString alloc] initWithString:@"firstsecondthird"];
[string addAttribute:NSForegroundColorAttributeName value:[UIColor redColor] range:NSMakeRange(0,5)];
[string addAttribute:NSForegroundColorAttributeName value:[UIColor greenColor] range:NSMakeRange(5,6)];
[string addAttribute:NSForegroundColorAttributeName value:[UIColor blueColor] range:NSMakeRange(11,5)];

CTFramesetterRef framesetter =  CTFramesetterCreateWithAttributedString(string);
// Create the frame and draw it into the graphics context 
CTFrameRef frame = CTFramesetterCreateFrame(framesetter,CFRangeMake(0, 0), path, NULL);
CFRelease(framesetter); 
CTFrameDraw(frame, pdfContext); 
CGContextTranslateCTM(pdfContext, 0, pageheight);
CGContextScaleCTM(pdfContext, 1.0, -1.0); 
```

这是给你的方向，可能会有所帮助。我将属性字符串用于粗体和全部。希望这也适用于颜色。

快乐编码。

# jekyll - Jekyll - 排除文件夹，但包含子文件夹

> ID：15152432
> 
> 赞同：25
> 
> 时间：2013-03-01T07:08:25.773
> 
> 标签：jekyll

我有一个像这样的结构：

```
folder/
folder/subfolder/ 
```

我想从文件夹/中排除所有内容，文件夹/子文件夹/除外。

我有什么办法可以用 Jekyll 做到这一点？我尝试了一些组合，但都不起作用，例如：

```
exclude: ["folder"]
include: ["folder/subfolder"] 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-05-24T18:45:28.753

从 Jekyll 版本 4.X 开始，现在可以像 OP 在帖子中所做的那样[包含子文件夹并排除基本文件夹。](https://jekyllrb.com/docs/upgrading/3-to-4/#exclusion-changes)

# sql - 不使用游标从多行更新为一

> ID：15152438
> 
> 赞同：1
> 
> 时间：2013-03-01T07:09:05.173
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个表，其中包含一个将逗号分隔的值存储为字符串的字段。我想从另一个表的多行中的一行中向该字符串添加更多值。下面你会看到一个例子。

我认为 COALESCE() 会起作用，并且我知道如何使用该技巧来加载变量，但我认为这意味着我必须使用游标来收集我想要的所有值t1 的每一行，我真的很想避免游标。这个表格设计是我继承的一团糟，我宁愿通过到处使用游标来处理它来避免让它变得更糟。

```
CREATE Table t1(
StringColumn VARCHAR(10)
)

CREATE Table T2(
    TestString VARCHAR(10),
    ConcatString VARCHAR(10)
)

INSERT INTO t1(StringColumn) VALUES('1,2,3')

INSERT INTO T2(TestString,ConcatString) VALUES('2','4')
INSERT INTO T2(TestString,ConcatString) VALUES('2','5')
INSERT INTO T2(TestString,ConcatString) VALUES('2','6')

INSERT INTO t1(StringColumn) VALUES('A,B,C')

INSERT INTO T2(TestString,ConcatString) VALUES('A','D')
INSERT INTO T2(TestString,ConcatString) VALUES('B','E')
INSERT INTO T2(TestString,ConcatString) VALUES('B','F')    

Begin Tran --Commit Rollback
UPDATE t1
Set t1.StringColumn = t1.StringColumn + ',' + t2.ConcatString
FROM t1 
INNER JOIN t2 ON charindex(t2.TestString,t1.StringColumn) <> 0

SELECT * FROM t1 
```

根据这个例子，结果是：

1,2,3,4

A B C D

我希望 t1 的两行看起来像：

1,2,3,4,5,6

A,B,C,D,E,F

谢谢。任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:18:34.990

你为什么不在这里使用行处理。你可以使用一个值表，然后像这个例子一样使用一段时间：

```
DECLARE @T TABLE(Id int identity,Value int)
DECLARE @MinId INT = (SELECT MIN(Id) FROM @T)
DECLARE @MaxId INT = (SELECT MAX(Id) FROM @T)

DECLARE @ResultTable TABLE (Value int)

WHILE(@MinId <= @MaxId)
BEGIN
    INSERT @ResultTable
        SELECT Value
        FROM @T
        WHERE Id = @MinId

        SET @MinId += 1
END

SELECT *
FROM @ResultTable 
```

我认为这将有助于你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:43:59.023

如果您想远离游标、循环并且至少运行 SQL 2008，则此解决方案将起作用。这实际上最终比您可以创建的任何函数或游标都更有效（在 SQL 2008+ 中）。

您想使用 2008 年（或 2005 年？）引入的一些新 XML 功能。具体来说，在您的查询中，您希望使用 XML PATH 模式构造一个 XML 字符串。一旦所有的结果都被塞进一个单一的 XML 字符串中，您就可以构造一个复杂的表达式来返回您想要的结果。来自msdn的更详细解释：

[MSDN 路径模式](http://msdn.microsoft.com/en-us/library/ms189885%28v=sql.105%29.aspx)

使用您提供的示例表，尝试以下查询：

```
SELECT
Test_String = T.StringColumn + (SELECT
                            (',' + t2.ConcatString)
                            FROM 
                                T1 t1
                            INNER JOIN T2 t2
                                ON charindex(t2.TestString,t1.StringColumn) <> 0
                            WHERE 
                            t1.StringColumn = t.StringColumn
                            FOR XML PATH( '' ))
FROM
    T1 T 
```

根据您所说的一切，听起来您可能需要修改我的查询。您可能需要做一些额外的连接，或者可能需要更改一些查询的内容。让我知道！

# java - mysql 5.5无效的转义序列java

> ID：15152451
> 
> 赞同：3
> 
> 时间：2013-03-01T07:10:28.347
> 
> 标签：java, mysql, escaping

```
static byte[] ac = {'\\', '\'', '{', '}', '{'}; //not OK insert into tt values('\\\'{}{')
static byte[] ac = {'\\', '\'', '{', '}'}; //OK insert into tt values('\\\'{}')
static byte[] ac = {'\\', '\'', '{'}; //OK insert into tt values('\\\'{')
static byte[] ac = {'\'', '{', '}', '{'}; //OK insert into tt values('\'{}{')
static byte[] ac = {'\\', '{', '}', '{'}; //OK insert into tt values('\\{}{') 
```

*   Ubuntu系统
*   MySQL 5.5
*   MySQL JDBC 5.1.22

我无法向 blob 表字段插入 5 个字节，这些字节如上所示。数据源连接编码设置为`UTF-8`。

相关资料：[http ://dev.mysql.com/doc/refman/5.5/en/string-literals.html](http://dev.mysql.com/doc/refman/5.5/en/string-literals.html)

知道为什么`{}`这么特别吗？它适用于工作台。

对于不好的，我得到了以下异常：

`java.sql.SQLException: Not a valid escape sequence: {')`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T07:39:40.127

这是 MySQL 的 JDBC 客户端 (Connector/J) 的某些版本中的错误；请参阅[http://bugs.mysql.com/bug.php?id=31457](http://bugs.mysql.com/bug.php?id=31457)（以及从那里链接的其他错误）。您应该可以通过升级到最新的 Connector/J 来修复它；或者，您可以通过禁用转义处理（通过编写`Statement.setEscapeProcessing(false)`）来解决它。

# javascript - Tizen 登录 Facebook

> ID：15152454
> 
> 赞同：2
> 
> 时间：2013-03-01T07:10:44.717
> 
> 标签：javascript, facebook, login, tizen

与 Android 和 iOS 一样，Tizen 没有可用的子浏览器插件。

那么在 Facebook 的 Tizen 上执行 oAuth 2.0 的过程是什么？

从 Web 应用程序中，我们可以在 Tizen 上启动浏览器。Tizen 是否可以在启动后跟踪浏览器中的当前 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:56:38.767

在 tizen 2.0 上是不可能的。唯一的方法是使用已弃用的 Facebook REST API 来获取访问令牌，然后使用 Facebook Graph API。从这里尝试示例[https://developer.tizen.org/documentation/social-network-services-tizen](https://developer.tizen.org/documentation/social-network-services-tizen)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-10T12:39:01.187

无法启动浏览器。但是可以使用 window.open() 在应用程序内部打开另一个窗口并监视 url。不用担心，您的应用程序中的页面将被保留。

# android - 如何在不生根设备的情况下授予 adb shell 权限

> ID：15152456
> 
> 赞同：7
> 
> 时间：2013-03-01T07:10:55.393
> 
> 标签：android, adb

我在运行时从命令提示符运行以下命令，显示权限被拒绝。谁能解释一下如何授予权限？

```
C:\android\tools>adb push asl-native /data/local/asl-native
failed to copy 'asl-native' to '/data/local/asl-native': Permission denied 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:47:59.153

除非您的手机已获得 root 权限并且能够以 root 身份运行 adb shell，否则您不得写入 /data。

查看 asl 的运行脚本，您可能可以更改它以将其安装到 scard。我还没有测试它，但它看起来像这样：

```
# Install service
echo "Installing native service..."
$adb push ./asl-native /sdcard/asl-native
$adb shell /system/bin/chmod 0777 /sdcard/asl-native

# Start the service
echo "Starting service..."
$adb shell "/sdcard/asl-native /sdcard/asl-native.log" &
echo "Service started successfully." 
```

虽然我不知道你是否被允许运行 chmod 并使某些东西可执行。您可能想先尝试在本地计算机上运行 chmod 0777。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-23T01:33:25.140

按照 [ankita] 的评论（[https://code.google.com/p/android-screenshot-library/wiki/UserGuide](https://code.google.com/p/android-screenshot-library/wiki/UserGuide)）：“它也适用于非 root 设备。只需将所有路径 /data/local 更改为/data/local/tmp 在 run.bat 文件中，然后保存并运行它。” 我试过了，问题解决了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T20:56:19.427

在您的手机上找到一个既可写（对于`shell`用户）又没有`noexec`选项的分区，然后将您的可执行文件推送到该分区。

# asp.net-mvc-3 - 在 jquery.Ajax 上发送特殊字符时出错

> ID：15152458
> 
> 赞同：0
> 
> 时间：2013-03-01T07:11:12.680
> 
> 标签：asp.net-mvc-3, jquery

我想知道为什么调用 jquery.Ajax 并通过参数在数据上发送这样的字符串：`"Z<Z"`=`"String<String"`崩溃！我试过和其他人一样`|@##~¬//("·$`，但没有问题......

我已经使用 encodeUriComponent 解决了，但我想知道为什么会崩溃以及是否有其他方法可以解决它。

```
function getData() {
    var code = "Z<Z"
    return { Id : code };
}

function goAjax(){   
    dataSelected = getData();
    $.ajax({
            url: "/Controller/Action",
            type: "POST",
            data: dataSelected,
            success: function (data, status, xhr) {
                alert("Ok")
            },
            error: function (xhr, status, err) {
                alert('error');
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:32:11.593

那是因为您在服务器上使用 ASP.NET，默认情况下不允许您发送此类字符。你可以禁用它。例如，如果您使用的是 ASP.NET MVC，您可以使用以下`[ValidateRequest(false)]`属性装饰您要发布到的控制器操作：

```
[ValidateRequest(false)]
public ActionResult Action(MyViewModel model)
{
    ...
} 
```

或者，如果您不想禁用整个操作的请求验证，则只能使用属性装饰视图模型上的`[AllowHtml]`属性：

```
public class MyViewModel
{
    [AllowHtml]
    public string Id { get; set; }
} 
```

进而：

```
public ActionResult Action(MyViewModel model)
{
    ...
} 
```

`Id`现在您可以仅为该属性发送这些字符。

# c# - 如何在不使用 .net 中的会话的情况下共享用户特定数据

> ID：15152459
> 
> 赞同：0
> 
> 时间：2013-03-01T07:11:15.047
> 
> 标签：c#, .net, cookies, asp.net-mvc-4, session-state

在这里，我遇到了一种情况，我需要在页面之间共享用户特定数据（如名字/姓氏/电子邮件等）而不使用会话。

我不能使用会话的原因是因为我们正在使用负载均衡器，它可能会分配不同的机器来服务用户的请求。

所以我公司严格规定避免使用会话。

由于一些限制，我们不能使用数据存储（sql）来存储会话。

现在，这里的一个关键问题是，我们如何在不使用会话/cookies/数据存储的情况下共享用户特定数据。

我有一个选项可以在每个请求上 ping 数据库以获取用户特定信息（这显然不是推荐的方法）

谁能帮我建议可以做些什么来跨页面共享用户特定信息。

注意：我使用的是 MVC4（Razor 引擎）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:15:00.687

> 我有一个选项可以在每个请求上 ping 数据库以获取用户特定信息（这显然不是推荐的方法）

事实上，这是推荐的方法。如果您担心可能会为您的数据库产生大量流量，您可以随时缓存结果。小心为缓存使用用户特定的键，以避免在用户之间混合信息。您也可以考虑使用分布式缓存，例如`memcached`跨节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:52:13.267

可以使用 Cookie。

*   在浏览器和服务器之间传输时会消耗额外的负载。
*   它将存储在客户端计算机中。
*   您可以使用自定义代码加密/解密数据以确保安全。

# c# - 如何在 C# 中保存转换为 blob 的图像

> ID：15152463
> 
> 赞同：-6
> 
> 时间：2013-03-01T07:11:22.520
> 
> 标签：c#, wpf, winforms

我需要转换一个 blob 图像并插入到**MYSQL**数据库..并且需要检索该数据并加载到图片框中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:23:40.703

请看

[图像 - 到 - 字节 - 数组](https://stackoverflow.com/questions/553611/wpf-image-to-byte)

和

[字节 - 数组 - 至 - 图像](https://stackoverflow.com/questions/9564174/convert-byte-array-to-image-in-wpf)

这两个链接可以解决你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:25:46.003

```
v_file_data = Encoding.UTF8.GetBytes(ds.Tables[0].Rows[0]["logo"]); 
```

# php - 在类外调用函数

> ID：15152468
> 
> 赞同：0
> 
> 时间：2013-03-01T07:11:35.660
> 
> 标签：php, wordpress

这是涉及我的问题的代码的一部分：

```
class My_Box {
  function __construct( $args ) {
    add_action( 'admin_footer', array( __CLASS__, 'add_templates' ) );
  }
  static function add_templates() {
    self::add_template( 'list' );
    self::add_template( 'grid' );
  }
  private static function add_template( $name ) {
    echo html('script',array( /*args*/));
  }
} 
```

上面代码中的 add_action 要求参数是这样的字符串：

```
add_action('handle','function_name'); 
```

现在我需要在类外运行 add_action 语句，我想到了这样的事情：

```
add_action( 'wp_footer', My_Box::add_templates() ); 
```

此语句收到“注意：未定义偏移量：0”的调试消息。

如何正确编码这个 add_action 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:21:26.667

在课堂上获取

```
add_action('handle', array(get_class(), 'function_name')); 
```

课外

```
add_action('handle', array('class_name', 'func_name')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:23:49.880

您作为第二个参数传递的数组`add_action`是一个回调。数组中的第一个值是类名，第二个是该类上的静态方法的名称。在一个类`__CLASS__`中将包含该类的名称。因此，要在其他地方进行相同的调用，您只需将其替换为实际的类名，例如

```
add_action( 'wp_footer', array('My_Box', 'add_templates' ); 
```

有关如何定义回调的更多信息，请参见：[http ://www.php.net/manual/en/language.types.callable.php](http://www.php.net/manual/en/language.types.callable.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T07:33:24.057

查看此[http://codex.wordpress.org/Function_Reference/add_action#Using_add_action_with_a_class](http://codex.wordpress.org/Function_Reference/add_action#Using_add_action_with_a_class)

要在使用类构建插件或主题时使用 add_action 挂钩，请将 $this 与该类中的函数名称一起添加到 add_action 调用中，如下所示：

```
class MyPluginClass
{
    public function __construct()
    {
         //add your actions to the constructor!
         add_action( 'save_post', array( $this, 'myplugin_save_posts' ) );
    }

    public function myplugin_save_posts()
    {
         //do stuff here...
    }
} 
```

# html - Chrome 渲染问题。体内带有 UL 的固定位置锚

> ID：15152470
> 
> 赞同：57
> 
> 时间：2013-03-01T07:11:37.707
> 
> 标签：html, css, google-chrome, rendering

Google Chrome 和 Opera 存在渲染问题（为什么？=），代码如下：

```
<html>
<style>
    #content {
        width: 150px;
        background: gray;
    }

    #sidebar {
        position: fixed;
        left: 200px;
        background: gray;
    }
</style>
<body>
    <div id="sidebar">
        <a href="#s1">Link #1</a><br/>
        <a href="#s2">Link #2</a>
    </div>

    <div id="content">
        <div id="s1">
            <a href="#s1">Link #1 TARGET</a>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,
            sed do eiusmod tempor incididunt ut labore et dolore magna
            aliqua. Ut enim ad minim veniam, quis nostrud exercitation
            ullamco laboris nisi ut aliquip ex ea commodo consequat.
            Duis aute irure dolor in reprehenderit in voluptate velit
            esse cillum dolore eu fugiat nulla pariatur.
            Excepteur sint occaecat cupidatat non proident, sunt in culpa
            qui officia deserunt mollit anim id est laborum.</p>
        </div>
        <div id="s2">
            <a href="#s2">Link #2 TARGET</a>
            <ul>
                <li>Item 1</li>
                <li>Item 2</li>
            </ul>
        </div>
    </div>

    <a href="#">TOP</a>
</body>
</html> 
```

如您所见，我试图在右侧使侧边栏保持静态。一切正常，直到您`<UL>`在页面上添加一些标签：

[http://www.youtube.com/watch?v=zkhH6di2M0c](http://www.youtube.com/watch?v=zkhH6di2M0c)

当我单击锚链接时，固定的 div 有时会开始消失。

可以做些什么来避免这种行为？

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2013-03-04T14:31:10.373

### 铬解决方案：

为我解决`-webkit-transform: translateZ(0)`了`#sidebar`这个问题。

`translateZ(0)`多年来，我曾经修复过许多 Chrome 显示错误。基本原理是通过调用 3D 转换，重新绘制与 CSS 痛苦堆栈的其余部分分离（我无法提供更多细节，对我来说几乎都是希腊语）。无论如何，它似乎对我有用！

```
 #sidebar {
        -webkit-transform: translateZ(0);
    } 
```

### 歌剧解决方案：

这不是一个通用的解决方案（需要根据相关元素的定位要求进行调整）。它通过在可能影响布局的属性上强制连续重绘（通过 CSS 动画）来工作（强制计算和渲染其他布局因素，即保持固定定位），但实际上不会。在这种情况下，我使用`margin-bottom`了 ，因为这不会影响您的页面布局（但 Opera 不知道！）：

```
@keyframes noop {
  0%   { margin-bottom: 0; }
  100% { margin-bottom: 1em; }
}

#sidebar {
    animation: noop 1s infinite;
} 
```

**注意：**解决方案并不完美，因为（至少在我的机器上）错误测试用例会导致 Opera 失去定位并快速重绘时闪烁一分钟。遗憾的是，我认为这与您将得到的一样好，因为[正如 George 在他的回答中所说](https://stackoverflow.com/questions/15152470/chrome-rendering-issue-fixed-position-anchor-with-ul-in-body#answer-15245741)，这是 Opera 在重绘之间的自然行为——理论上我的代码使元素的重绘是连续的，但实际上会有无限小的间隙。

**编辑 2** (2013-11-05) **：**从那以后我经常遇到这个错误的变体。尽管原始发布者的简化测试用例提出了一个完全合法的错误，但大多数情况都是在身体上已经有 3D 变换操作的情况下（或类似地在 DOM 树的高处）。这通常被用作强制 GPU 渲染的黑客手段，但实际上会导致像这样令人讨厌的重绘问题。2 个无操作 3D 变换不正确：如果您使用的是树上更高的一个，请先尝试删除它，然后再添加另一个。

**编辑 3**（2014-12-19）**：** [克里斯](https://stackoverflow.com/users/79677/chris-barr) [报告](https://stackoverflow.com/questions/15152470/chrome-rendering-issue-fixed-position-anchor-with-ul-in-body/15203880#comment30610117_15203880)说`translateZ(0)`在某些情况下`scale3d(1,1,1)`不起作用。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-04T14:34:09.860

Chrome 的关键是：

```
 html, body {height:100%;overflow:auto} 
```

通过添加这个，应该解决固定位置问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T11:09:30.963

如果您了解文档的正常流程是如何工作的，那就有意义了。假设这是一个边缘案例。

在任何元素中都没有声明高度，并且#sidebar 被从文档的正常流程中取出`position:fixed`。

如果将高度属性添加到#sidebar（像素，而不是百分比），问题就解决了。

我建议包括 Normalize.css，我认为它会解决这个错误。

# haproxy - 带 ACL 的 Haproxy 负载均衡器

> ID：15152471
> 
> 赞同：0
> 
> 时间：2013-03-01T07:11:43.567
> 
> 标签：haproxy

我们如何根据 cookie 状态将 Haproxy 配置为基于 cookie 的负载平衡器？即如果 cookie 不存在则重定向到 server1 & 如果 cookie 存在则 server2？

我搜索这个然后我得到 ACL，但它是用于 Header，我们可以将它配置为 cookie 存在吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:24:51.523

下面是我如何检查 cookie “fslanguage” 的值并根据语言在请求中设置 Accept-Language 标头。您可以轻松地执行后端规则（请参阅 use_backend）而不是 reqrep 规则。

```
 acl langCookie_en cook(fslanguage) en
      reqrep Accept-Language:\ (.*) Accept-Language:\ en,\1 if langCookie_en
    acl langCookie_fr cook(fslanguage) fr
      reqrep Accept-Language:\ (.*) Accept-Language:\ fr,\1 if langCookie_fr
    acl langCookie_de cook(fslanguage) de
      reqrep Accept-Language:\ (.*) Accept-Language:\ de,\1 if langCookie_de
    acl langCookie_es cook(fslanguage) es
      reqrep Accept-Language:\ (.*) Accept-Language:\ es,\1 if langCookie_es
    acl langCookie_pt cook(fslanguage) pt
      reqrep Accept-Language:\ (.*) Accept-Language:\ pt,\1 if langCookie_pt
    acl langCookie_it cook(fslanguage) it
      reqrep Accept-Language:\ (.*) Accept-Language:\ it,\1 if langCookie_it
    acl langCookie_ru cook(fslanguage) ru
      reqrep Accept-Language:\ (.*) Accept-Language:\ ru,\1 if langCookie_ru
    acl langCookie_ja cook(fslanguage) ja
      reqrep Accept-Language:\ (.*) Accept-Language:\ ja,\1 if langCookie_ja
    acl langCookie_ko cook(fslanguage) ko
      reqrep Accept-Language:\ (.*) Accept-Language:\ ko,\1 if langCookie_ko
    acl langCookie_zh cook(fslanguage) zh
      reqrep Accept-Language:\ (.*) Accept-Language:\ zh,\1 if langCookie_zh 
```

# arrays - Perl "->" 运算符

> ID：15152472
> 
> 赞同：1
> 
> 时间：2013-03-01T07:11:48.407
> 
> 标签：arrays, perl, syntax

这是一段代码：

```
foreach my $in (@_)
{
    my $x1 = sprintf("%.2f", $in->[0]);
    my $x2 = sprintf("%.2f", $in->[1]);
    my $x3 = sprintf("%.2f", $in->[2]);
    $count++;
    print "running: $x1 $x2 $x3\n";
    print PF "$x1 $x2 $x3\n";
} 
```

我想知道 $in 变量是什么？它是一个数组吗？为什么我们在这里使用 $in->[0] 而不是 $in[0] ？如何获得 $in 的长度？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T07:15:14.490

`$in`是一个数组引用（数组引用数组也是如此`@_`）。

`scalar(@$in)`您可以使用（或仅`@$in`在标量上下文中使用）获得元素的数量（假设这就是您所说的长度）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T07:15:07.777

您不能在 Perl 的其他结构中嵌套数组。您必须使用对数组的*引用*`$`，它是一个标量（因此它使用），并且需要`->`获取数据。

可以说这是一个很大的话题，对于任何重要的 Perl 编程来说都是不可或缺的。给[perlreftut](http://perldoc.perl.org/perlreftut.html)读一读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T07:27:32.180

`$in`是 的标量持有引用`ARRAY`。

使用`Data::Dumper`并检查`@_`. 如果它们是引用，那么为了访问它们，我们使用`->`.

在您的代码中，

*   `$in->[0]`将意味着您正在访问数组引用的第一个元素`@_`。
*   `$in->[1]`将意味着您正在访问数组引用的第二个元素`@_`。
*   `$in->[2]`将意味着您正在访问数组引用的第三个元素`@_`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T07:14:53.567

`$in`这是[对数组的引用（类似于 C 指针）](http://www.thegeekstuff.com/2010/06/perl-array-reference-examples/)。因此，`->`用于取消引用此引用以获取数组本身。

# extjs - 将表格适合extjs中的父容器

> ID：15152475
> 
> 赞同：2
> 
> 时间：2013-03-01T07:11:51.993
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

在我的项目中，我试图使创建的表格适合父面板。

**内面板**

```
var items = []; 
```

* * *

```
layout: {
    type: 'table',
    columns: 6
},
initComponent: function(){
    //creating child items dynamically
    for(var i=0;i<36;i++){
        items.push({
            xtype: 'panel',
            layout:'fit'
        })          
    }
    this.callParent();
}
items: items 
```

子项已成功添加到面板，但具有`0`尺寸（宽度和高度）。如何让子面板计算尺寸以适应父面板？

`36`PS：如果我手动给出尺寸，我可以看到块。

我也可以在[煎茶聊天](https://chat.stackoverflow.com/rooms/23760/sencha)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T08:06:17.357

您可以添加[`tableAttrs`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.layout.container.Table-cfg-tableAttrs)到您的布局配置以使父面板 100% 宽度。

```
layout: {
    type: 'table',
    columns: 6,
    tableAttrs: {
        style: {
            width: '100%'
        }
    }
}, 
```

对于您的项目，您需要指定标题或 html。

```
items.push({
    xtype: 'container',
    html: i.toString(),
    layout:'fit'
}) 
```

结果与`xtype: 'container', html: i.toString()`： ![在此处输入图像描述](../Images/1db001545b7c58c3e2386fdb3e20b3cb.png) 结果与`xtype: 'panel', title: i.toString()`： ![在此处输入图像描述](../Images/923fcc226e6cecbd16846ae3fd35d44e.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T10:25:30.673

`containers`我使用作为子项而不是`panels`（默认）解决了这个问题。我曾经`tableAttrs`在父面板内拉伸表格布局（正如@A1rPun 所建议的那样）。并且还`tdAttrs`用于向容器显示边框。

```
var items = []; 
```

* * *

```
layout: {
    type: 'table',
    columns: 6

    tableAttrs: {
        style: {
            width: '100%',
            height:'100%'
        }
    },
    tdAttrs: {
       style:{
           border:'1px groove #abc7ec'
       }
    }
},
initComponent: function(){
    for(var i=0;i<36;i++){
        items.push({
             xtype: 'container',
             style:{
                 height:'100%'
             }
        })          
    }
    this.callParent();
},
items: items 
```

**[工作小提琴](http://jsfiddle.net/8G5zV/3/)**

即使我解决了它，我仍然认为 extjs 中可能有一些内置方法可以在父面板中拉伸表格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T09:01:08.113

如果你试试这个怎么办：

```
...
items: [],

initComponent: function() {
    for(var i=0; i<36; i++) {
        this.add({
            xtype: 'panel',
            layout:'fit',
            items: []
        });          
    }
    this.callParent(arguments);
} 
```

**更新：**

```
items: [],

initComponent: function() {
    this.callParent(arguments);
    for(var i=0; i<36; i++) {
        this.add({
            xtype: 'panel',
            layout:'fit',
            html: 'Content'
        });
    }
} 
```

jsfiddle：http: [//jsfiddle.net/8G5zV/](http://jsfiddle.net/8G5zV/)

# algorithm - 匈牙利算法选择 0

> ID：15152476
> 
> 赞同：4
> 
> 时间：2013-03-01T07:11:54.590
> 
> 标签：algorithm, graph-algorithm

我有一个与此处发现的问题非常相似的问题：

[匈牙利算法 - 系统分配](https://stackoverflow.com/questions/4527299/hungarian-algorithm-assign-systematically)

他提出了一个可能有效也可能无效的解决方案……但它在逻辑上似乎并不完全合理。

是否有一个万无一失的动态算法来确定哪一组 0 将是一个可行的解决方案？（表示每行每列只有一个 0）

请参阅第 9 步：http: [//www.wikihow.com/Use-the-Hungarian-Algorithm](http://www.wikihow.com/Use-the-Hungarian-Algorithm)

如何实现一种算法来执行该任务？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:09:19.340

本质上，您可以将 n*n 矩阵视为表示二分图。行表示图左侧的顶点，列表示图右侧的顶点。第 i 行中的零，col j 表示左侧的顶点 i 和右侧的顶点 j 之间有一条边。

您想找到一个完整的二分匹配，即一组没有公共顶点的 n 边。为此，您可以使用您最喜欢的匹配算法，例如 Hopcroft-Karp。

找到匹配项后，选择与匹配项中的边相对应的零点。匹配属性保证在每一行/列中选择的零不超过一个。

# ruby-on-rails - 如何使用 link_to 添加引导模式，以便链接内容以模式打开？

> ID：15152486
> 
> 赞同：26
> 
> 时间：2013-03-01T07:12:46.267
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap

我正在尝试在 Rails 链接上使用引导模式[http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)在模式中打开该链接

```
<%= link_to page_path, target: '_blank' %> 
```

但不知何故它不起作用。标准切换代码是 -

```
<a data-toggle="modal" href="#myModal" class="btn">Launch demo modal</a> 
```

但我不确定如何将它应用于rails中的link_to，有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-01T07:49:28.887

如果您想在隐藏状态的页面上预加载模式，下面是代码

```
<%= link_to "Open modal", "#my-modal", :class => "btn", "data-toggle" => "modal" %>
<div class="modal hide fade" id="my-modal" title="My modal">
  <div class="modal-header">
    <button aria-hidden="true" class="close" data-dismiss="modal" type="button">×</button>
    <h3 id="myModalLabel">Modal header</h3>
  </div>
  <div class="modal-body">
    Modal Body
  </div>
  <div class="modal-footer">
    <button aria-hidden="true" class="btn" data-dismiss="modal">Close</button>
  </div>
</div> 
```

如果你想通过 ajax 加载模态，那么你可以做这样的事情

```
<%= link_to "Open modal", new_post_path, :class => "btn", :remote => true, "data-toggle" => "modal", "data-target" => "my-modal" %>
<div class="modal hide fade" id="my-modal" title="My modal">
  <div class="modal-header">
    <button aria-hidden="true" class="close" data-dismiss="modal" type="button">×</button>
    <h3 id="myModalLabel">New Post</h3>
  </div>
  <div class="modal-body a-unique-class">
    New Post Body
  </div>
  <div class="modal-footer">
    <button aria-hidden="true" class="btn" data-dismiss="modal">Close</button>
  </div>
</div> 
```

在`posts/new.js.erb`你会包括

```
$(".a-unique-class").html('<%= j render "posts/_form" %>') 
```

确保每个模态体都有一个*唯一的*id 或类。

假设您要使用模态表单创建新帖子，控制器代码和`_form.html.erb`到位

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-04-21T20:24:39.510

`data`在 Rails 中添加属性有一种更漂亮的方法。你可以做这样的事情来获得相同的结果。

```
<%= link_to 'Click Here', "#", data: {toggle: "modal", target: "#modal"} %> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-12-25T07:53:54.387

上面 benchwarmer 的回答中存在语法错误。

试试这个：

```
$(".a-unique-class").html('<%= j render "posts/form" %>') 
```

# javascript - 使用 javascript/jQuery 加载 iFrame 的跨域问题

> ID：15152489
> 
> 赞同：1
> 
> 时间：2013-03-01T07:12:53.257
> 
> 标签：javascript, jquery, iframe, cross-domain

我有一个脚本，它从 txt 文件中读取 URL，然后将每个 URL 作为源放入一个 iframe 中，并一个接一个地用新源加载框架。我这样做是为了计算列表中每个 url 的加载时间。这是我的代码：

```
$.get("test.txt", function (data) {
        var array = data.split(/\r\n|\r|\n/) 
        var beforeLoad = (new Date()).getTime();    
        var loadTimes = [];
            var beforeTimes = [];               
        $('#frame_id').on('load', function () {                                 
            beforeTimes.push(beforeLoad);
            loadTimes.push((new Date()).getTime()); 
            $('#frame_id').attr('src', array.pop());
                $.each(loadTimes, function (index, value) { 
                    var result = (value - beforeTimes[index]) / 1000;
                        if (result < 0) {
                            result = result * (-1);
                        }   
                    $("#loadingtime" + index).html(result);
                    beforeLoad = value;
                });
        }).attr('src', array.pop());
    }); 
```

我的问题是，当我获得一个具有 iframe 保护（同源）的 URL 时，我的脚本崩溃并且它不会显示任何加载时间值。经过大量研究后，我找到了一种使用 AnyOrigin 网站将“同源”URL 加载到框架中的方法。我测试了该站点的代码并且它有效：

```
<script type="text/javascript">
            $.getJSON("http://anyorigin.com/get?url="+"google.lt"+"&callback=?", function(data) {
                var iframe = $("#frame_id")[0];
                var doc = iframe.document;
                if(iframe.contentDocument) {
                    doc = iframe.contentDocument;
                } else if(iframe.contentWindow) {
                    doc = iframe.contentWindow.document;
                }
                doc.open();
                doc.writeln(data.contents);
                doc.close();
            });
</script>
        <iframe  id="frame_id"></iframe>
</body>
</html> 
```

我想将我的代码与来自 AnyOrigin 的代码结合起来，所以它会从我的 .txt 文件中加载许多 URL，获取每一帧的加载时间，并绕过“同源”的东西，有人能帮我吗？

# deployment - TFS Build后如何运行可执行文件

> ID：15152491
> 
> 赞同：2
> 
> 时间：2013-03-01T07:12:56.160
> 
> 标签：deployment, batch-file, workflow-activity, build-agent

我的任务是：

TFS 构建后

1) 在服务器 X 停止文件 Example.exe

2) 将文件从 Drop Location 复制到服务器 X

3) 在服务器 X 上运行全新版本的 Example.exe

我正在更新 TFS 2012、Visual Studio 2012 中的 DefaultTemplate.xaml。我正在输入运行 Do.bat 脚本的 InvokeProcess 活动。

我的构建代理将文件复制到服务器 X，然后运行文件 \X...\Do.bat

Do.bat 有点像

```
taskkill /F /IM Example.exe
start \\%~p0Example.exe 
```

所以，问题是 Example.exe 在构建代理上运行，而不是在服务器 X 上。

如何让构建代理在另一台服务器上运行可执行文件？另一个问题 - 是否值得在 TFS Build 中使用 bat 文件作为脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:37:18.557

[`PsExec`](http://technet.microsoft.com/en-ca/sysinternals/bb897553.aspx)是一个 SysInternals 工具，它将在远程计算机上运行一个进程。

PowerShell 还能够[远程启动进程。](http://technet.microsoft.com/en-us/library/dd819505.aspx)

至于您的其他问题，我通常发现自定义我的 tfs 构建在 C# 中编写构建活动和/或使用内置活动并在 xaml 中自定义构建模板更值得。不好玩，但我发现外部脚本会遇到更多权限问题并且难以调试。我已经尝试过它们，然后我通常会回到 C# 中。

# javascript - 井字游戏与 javascript

> ID：15152494
> 
> 赞同：1
> 
> 时间：2013-03-01T07:13:02.913
> 
> 标签：javascript

我正在使用 html、css 和 JavaScript 编写一个井字游戏。我创建了按钮来从`markbox(cell)`函数和 deres 函数中获取输入，称为winning_condition，它检查赢得游戏的条件。

在我的代码中，它没有`winning_condition`正确检查它遇到问题？

这是我的代码

* * *

```
<html>
<head>
    <title>TIC TAC TOE</title>
    <script type="text/javascript">
    var cell;
    var symbol = "X";
    function markbox(cell)
    {
        if (cell.value == "     ")
        {
        cell.value = symbol;
        if (symbol == "X")
        symbol = "O";
        else
        symbol = "X";
        }
        //else 
        //{
        //alert("This square is occupied");
        //}
        if (winning_condition())
        {
        alert ("You win!");
        return;
        }
        else  if(!winning_condition())
        {
        alert("You loose!");
        }
        else 
        {
        alert("Draw!")
        }
    }
    function winning_condition()
        {
        if(document.f1.b00.value==symbol && document.f1.b01.value==symbol && document.f1.b02.value==symbol)
        return true;
        else if(document.f1.b10.value==symbol && document.f1.b11.value==symbol && document.f1.b12.value==symbol)
        return true;
        else if(document.f1.b20.value==symbol && document.f1.b21.value==symbol && document.f1.b22.value==symbol)
        return true;
        else if(document.f1.b00.value==symbol && document.f1.b10.value==symbol && document.f1.b20.value==symbol)
        return true;
        else if(document.f1.b01.value==symbol && document.f1.b11.value==symbol && document.f1.b21.value==symbol)
        return true;
        else if(document.f1.b02.value==symbol && document.f1.b12.value==symbol && document.f1.b22.value==symbol)
        return true;
        else if(document.f1.b00.value==symbol && document.f1.b11.value==symbol && document.f1.b22.value==symbol)
        return true;
        else if(document.f1.b02.value==symbol && document.f1.b11.value==symbol && document.f1.b20.value==symbol)
        return true;
        }
    function clearBtn()
    {
        status = "X"
        document.f1.b00.value="   ";
        document.f1.b01.value="   ";
        document.f1.b02.value="   ";
        document.f1.b10.value="   ";
        document.f1.b11.value="   ";
        document.f1.b12.value="   ";
        document.f1.b20.value="   ";
        document.f1.b21.value="   ";
        document.f1.b22.value="   ";
    }
    </script>
</head>
<body>
    <div align="center">
    <h1>Tic Tac Toe</h1>
    <form name="f1">
        <input type="button" name="b00" value="     " onclick="markbox(this)"/>
        <input type="button" name="b01" value="     " onclick="markbox(this)"/>
        <input type="button" name="b02" value="     " onclick="markbox(this)/></br>
        <input type="button" name="b10" value="     " onclick="markbox(this)"/>
        <input type="button" name="b11" value="     " onclick="markbox(this)"/>
        <input type="button" name="b12" value="     " onclick="markbox(this)"/></br>
        <input type="button" name="b20" value="     " onclick="markbox(this)"/>
        <input type="button" name="b21" value="     " onclick="markbox(this)"/>
        <input type="button" name="b22" value="     " onclick="markbox(this)"/>
        </br></br></br>
        <input type="reset" value="RESET GAME" onclick="clearBtn()">
    </form>     
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:25:21.237

首先是您没有正确关闭 HTML：

```
onclick="markbox(this)/> 
```

需要是：

```
onclick="markbox(this)" /> 
```

（注意最后的“）。

问题似乎是您在单击其中一个按钮时正在重置符号 var。您将始终检查错误的符号以获胜。制作一个 var last_clicked 并在您的winning_condition 中使用它。

试试这个代码来处理：

[http://jsfiddle.net/wG9G5/1/](http://jsfiddle.net/wG9G5/1/)

# html - 图标字体在 Internet Explorer 中不起作用

> ID：15152498
> 
> 赞同：1
> 
> 时间：2013-03-01T07:13:23.070
> 
> 标签：html, css, internet-explorer

我必须在字体图标上创建笔触效果。我已经尝试过文本阴影技术，但问题是它非常不稳定，所以我最终做的是将轮廓与图标分开并将其作为字体导出，然后再次将它们相互合并。

它现在完美运行！...只是不在 IE 中。

除了向大家展示之外，我不确定我能解释我的问题有多好：自定义字体在 jsfiddle 中不起作用，所以我暂时将其上传到 - [http://babysignlanguage.co.za/icon_fonts/](http://babysignlanguage.co.za/icon_fonts/)

继承人的代码：

CSS：

```
@font-face {
    font-family: 'icomoon';
    src:url('fonts/icomoon.eot');
    src:url('fonts/icomoon.eot?#iefix') format('embedded-opentype'),
        url('fonts/icomoon.woff') format('woff'),
        url('fonts/icomoon.ttf') format('truetype'),
        url('fonts/icomoon.svg#icomoon') format('svg');
    font-weight: normal;
    font-style: normal;
}
body {background:#99FFCC;}
.menu_icon_gen {font-size: 6em; font-family: 'icomoon';}
.space { letter-spacing:-2em; zoom:1;}
.left {float:left;}
.green {color:#ACBB72;}
.white {color:#FFF;} 
```

HTML

```
<div class="menu_icon_gen" aria-hidden="true">
    <span class="green space left">&#xe000;</span> 
    <span class="white">&#xe001;</span> 
```

```
<div class="menu_icon_gen" aria-hidden="true">
    <span class="green space left">&#xe002;</span> 
    <span class="white">&#xe003;</span>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T06:50:10.717

我给了`position: relative`,`div`和.`position: absolute``span`

在 IE 9 中为我工作。

![在此处输入图像描述](../Images/78c660d4e91787581910b8c90f0342cd.png)

# c# - 在文本框中显示详细信息

> ID：15152501
> 
> 赞同：0
> 
> 时间：2013-03-01T07:13:36.093
> 
> 标签：c#

我有一个列表框。每当我从数据库中搜索一个人时，结果都会显示在列表框中。然后我想要的是每当我从列表框中单击人员的姓名时，人员详细信息将显示在文本框中。我有我的代码，但问题是只有我第一次点击的人的详细信息才会显示在文本框中。

```
private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        connection.Open();
        OleDbCommand select = new OleDbCommand();
        select.Connection = connection;
        select.CommandText = "Select * From Accounts";
        OleDbDataReader reader = select.ExecuteReader();

        while (reader.Read())
        {
            if (reader[0].ToString() == listBox1.Tag.ToString())
            {
                fnametb.Text = reader[1].ToString();
                lnametb.Text = reader[2].ToString();
                agetb.Text = reader[3].ToString();
                addresstb.Text = reader[4].ToString();
                coursetb.Text = reader[5].ToString();
            }

        }
        connection.Close();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:17:23.473

查看

```
if (reader[0].ToString() == listBox1.Tag.ToString())
it will not work.... 
```

您需要获取列表框的选定索引

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:18:13.780

将其更改为`listBox1.selectedItem.ToString()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T07:18:20.090

如果你想使用你的代码，你需要刷新`listBox1.Tag`并放入`Tag`Selected 列表框项键。或者你需要使用类似的东西`reader[0].ToString() ==listBox1.SelectedValue`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T07:23:21.067

您正在检查`ListBox.Tag`而不是`ListBox.SelectedItem`.

> > Tag 属性可用于存储要与项目关联的任何对象。尽管您可以存储任何项目，但 Tag 属性通常用于存储有关项目的字符串信息，例如唯一标识符或项目数据在数据库中的索引位置。

无论如何[`SelectedItem`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.selecteditem.aspx)，您都可以简单地检查一下。`listBox1_SelectedIndexChanged`

代替

```
if (reader[0].ToString() == listBox1.Tag.ToString()) 
```

尝试

```
if (reader[0].ToString() == listBox1.SelectedItem.ToString()) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-01T07:22:46.133

您的 Select Query 必须具有一些参数，例如 WHERE 子句，以便程序知道它将加载数据库中的哪些特定数据。

告诉我你的列表框中的显示是什么？

这只是另一种选择。

# cakephp - cakephp 2.3 如何为用户管理文件上传并在用户登录时显示文件？

> ID：15152503
> 
> 赞同：1
> 
> 时间：2013-03-01T07:13:42.803
> 
> 标签：cakephp, cakephp-2.3

到目前为止，我已经设法将文件上传到 app/files 目录并使用已弃用的媒体视图下载它们。我无法使用

```
 $file = $this->Attachment->getFile($id); 
```

我想向用户显示图像/文件，比如用户的个人资料图像。我怎样才能在不影响用户图像安全的情况下完成这项工作。

我得到错误

```
 Call to a member function getFile() on a non-object 
```

我不想使用任何插件。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:55:22.727

你有三个选择；

1.  创建一个 mod_rewrite 规则，允许通过 URL 访问您的 Web 根目录之外的目录。这样，图像就不必通过 PHP 脚本输出
2.  在您的 webroot 中创建一个指向您的 web 根目录之外的目录的符号链接。这样图像也将直接由 apache 输出，而不是通过 PHP 脚本。您可以在此处按照“插件资产”的说明进行操作：http: [//book.cakephp.org/2.0/en/plugins.html#plugin-assets](http://book.cakephp.org/2.0/en/plugins.html#plugin-assets)
3.  使用 PHP 读取文件并使用 PHP 输出（调整大小的版本）图像，例如通过`imagejpeg()`函数。为此，您应该在不使用“布局”的情况下输出图像并设置正确的响应标头。可以在此处找到有关“响应”对象的更多信息：http: [//book.cakephp.org/2.0/en/controllers/request-response.html#sending-files](http://book.cakephp.org/2.0/en/controllers/request-response.html#sending-files)

我现在没有时间写例子，但如果需要可以提供一些指示

**更新**

尽管在 CakePHP 2.3 中不推荐使用 MediaView，但您仍然可以从中“学习”如何自己处理文件下载。MediaView 中的大部分“魔法”都集中在 Response-object 周围，它几乎在 Cake 内部的每个对象中都可用（也在你的 Controller 内部）。将 de MediaView 转换为可以附加到控制器以输出/发送文件的组件可能很容易。

MediaView 的来源可以在这里找到：http: [//api.cakephp.org/2.2/source-class-MediaView.html#23-242](http://api.cakephp.org/2.2/source-class-MediaView.html#23-242)

而且，关于通过响应对象发送文件的其他信息可以在我之前提到的链接中找到（[http://book.cakephp.org/2.0/en/controllers/request-response.html#sending-files](http://book.cakephp.org/2.0/en/controllers/request-response.html#sending-files)）

**重要的**

尽管与您的问题没有直接关系，但有一些警告；

***用户提供的上传是危险的***，请务必检查文件类型并清理文件名和路径（如果您允许用户指定路径）。始终假设用户能够发送类似“../../../../”之类的路径名，以*防范这种情况*

确保对包含用户上传的文件的目录/URL**禁用 PHP 解析。**我已经看到用户能够上传`dangerous_file.php.jpg`并能够在之后重命名文件的情况（删除`.jpg`）。

可以在此处找到有关在路径中禁用 PHP 的更多信息： [使用 .htaccess 在目录（包括所有子目录）中禁用 PHP](https://stackoverflow.com/questions/1271899/disable-php-in-directory-including-all-sub-directories-with-htaccess)

并且，关于最后一点：确保在用户目录中禁用“覆盖”这些设置（例如，考虑*用户*能够*上传*文件的情况`.htaccess`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:26:47.943

现在在 cakephp 2.3 中不推荐使用媒体视图

请查看此链接：

[http://book.cakephp.org/2.0/en/views/media-view.html](http://book.cakephp.org/2.0/en/views/media-view.html)

```
public function download() {
    $this->viewClass = 'Media';
    // Download app/outside_webroot_dir/example.zip
    $params = array(
        'id'        => 'example.zip',
        'name'      => 'example',
        'download'  => true,
        'extension' => 'zip',
        'path'      => APP . 'outside_webroot_dir' . DS
    );
    $this->set($params);
} 
```

# c# - 无法将“System.String”类型的对象转换为“iTextSharp.text.Rectangle”类型

> ID：15152504
> 
> 赞同：0
> 
> 时间：2013-03-01T07:13:53.190
> 
> 标签：c#, itextsharp

我用 itextsharp 预定义的页面大小填充了下拉列表。
我需要将选定的页面大小传递给：

```
 pdfDoc = new Document(dropdownlist.selectedvalue, 50, 50, 50, 50); 
```

我收到*错误*：

> 无法将“System.String”类型的对象转换为“iTextSharp.text.Rectangle”类型”

我如何从下拉列表中传递代表最常见纸张尺寸的矩形对象和

如何将字符串转换为类型`iTextSharp.text.Rectangle`？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:07:50.930

您不能*将*a强制转换`String`为 a `iTextSharp.text.Rectangle`，因为它们是完全不同的类，没有隐式翻译。

但是有一个`PageSize`你可能感兴趣的实用程序类

```
namespace iTextSharp.text {
    /// <summary>
    /// The PageSize-object contains a number of read only rectangles representing the most common paper sizes.
    /// </summary>
    /// <seealso cref="T:iTextSharp.text.RectangleReadOnly"/>
    public class PageSize {
        [...]
        /**
        * This method returns a Rectangle based on a String.
        * Possible values are the the names of a constant in this class
        * (for instance "A4", "LETTER",...) or a value like "595 842"
        */
        public static Rectangle GetRectangle(String name)  {
            [...]
        }
    }
} 
```

您可以尝试使用此方法`Rectangle`为您的`String`.

# c++ - C ++中的局部/静态变量范围

> ID：15152506
> 
> 赞同：6
> 
> 时间：2013-03-01T07:13:59.980
> 
> 标签：c++, variables, static, scope

如果我写这样的东西：

```
#include <iostream>

int main()
{
    using namespace std;

    {int n;n=5;} cout<<n;
    system("pause");
    return 0;
} 
```

编译器告诉我 n 未声明。然后我尝试将其设为静态，但编译器再次告诉我它未声明。变量 declad static 没有程序范围吗？如果没有，我如何在这个程序中使用 n ？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-01T07:16:52.017

您将范围与生命周期混淆了。静态变量的生命周期等于程序的生命周期，但它们仍然遵循基于它们声明位置的范围规则。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-01T07:24:58.440

n 的范围就在括号之间：

```
{int n;n=5;} 
```

所以在块之外，你没有 n 变量。

将其设置为静态只会在您退出该块后使其值保留，以便下次再次进入该块时，您可以从上次执行该块时检索它的值，但它的范围仍在括号内。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T11:56:59.340

此处编译器给出错误 n 未声明，因为此处“ **{int n;n=5;}** ”**在大括号中声明**。大括号告诉我们变量的范围。**当作用域结束时，变量就会从内存中删除**。

对于静态和本地。

**静态**：该变量与全局变量相同，但其值在整个应用程序中保持不变。并且静态变量不能在使用**extern**的其他页面上使用。

**局部**：局部变量存储在堆栈中，当它们**超出范围**时被删除。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T07:18:06.857

在全局范围内声明为静态的变量的范围仅限于翻译单元。在函数中声明为 static 的变量的生命周期设置为与程序的相同，但在这种情况下不影响其范围。您必须放入与声明`cout`相同的范围`n`才能使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T07:17:04.037

*我如何在这个程序中使用 n？*

```
using namespace std;
int main()
{
     int n;      // declare n as int
     n=5;        // assign it a value
     cout << n;  // display it.
     system("pause");
     return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-11T05:46:25.483

请不要混淆静态变量的范围和生命周期。范围意味着您可以在哪里访问变量。变量的生命周期是变量在内存中的持续时间。在您的情况下， x 变量的范围在花括号内。x 的生命周期将是程序范围。

# codeigniter - 不使用谷歌地图api查找当前位置的方法

> ID：15152507
> 
> 赞同：1
> 
> 时间：2013-03-01T07:14:03.007
> 
> 标签：codeigniter, currentlocation

Google map api 的当前位置在某些环境中不起作用。我们可以使用任何其他服务来获取当前的地理位置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:38:33.883

您可以为此使用 Html5。

请参见下面的示例：

JS）

```
<script type="text/javascript">
function showLocation(position) {
  var latitude = position.coords.latitude;
  var longitude = position.coords.longitude;
  alert("Latitude : " + latitude + " Longitude: " + longitude);
}

function errorHandler(err) {
  if(err.code == 1) {
    alert("Error: Access is denied!");
  }else if( err.code == 2) {
    alert("Error: Position is unavailable!");
  }
}
function getLocation(){

   if(navigator.geolocation){
      // timeout at 60000 milliseconds (60 seconds)
      var options = {timeout:60000};
      navigator.geolocation.getCurrentPosition(showLocation, 
                                               errorHandler,
                                               options);
   }else{
      alert("Sorry, browser does not support geolocation!");
   }
}
</script> 
```

调用函数的 HTML 按钮

```
 <form>
     <input type="button" onclick="getLocation();" value="Get Location"/>
   </form> 
```

# asp.net - ASP.Net Web 应用程序身份验证问题

> ID：15152510
> 
> 赞同：0
> 
> 时间：2013-03-01T07:14:09.700
> 
> 标签：asp.net, authentication, deployment

我们有一个 ASP.Net Web 应用程序，它的 App Pool 的标识是“网络服务”。在这个应用程序中，我们有一个设置页面；那里我们接受用户名。我们在针对 ADSI (Active Directory) 验证用户名时遇到以下异常。如果我们将应用程序池的身份从“网络服务”更改为我们的域帐户，那么我们就可以成功验证用户名。

在这里，我们不能使用我们的域帐户作为 App Pool 的身份。请提出任何替代方案来解决此问题。

```
Exception Information
*********************************************
Exception Type: System.DirectoryServices.DirectoryServicesCOMException
     ExtendedError: -1073740781
      ExtendedErrorMessage: C0000413: LdapErr: DSID-0C0904DC, comment:      AcceptSecurityContext error, data 78f, v1db1
          ErrorCode: -2147023570
Message: Logon failure: unknown user name or bad password.

    Data: System.Collections.ListDictionaryInternal
    TargetSite: Void Bind(Boolean)
       HelpLink: NULL
     Source: System.DirectoryServices
     HResult: -2147023570

    StackTrace Information
      *********************************************
   at System.DirectoryServices.DirectoryEntry.Bind(Boolean throwIfFail)
      at System.DirectoryServices.DirectoryEntry.Bind()
at System.DirectoryServices.DirectoryEntry.get_AdsObject()
      at System.DirectoryServices.DirectorySearcher.FindAll(Boolean findMoreThanOne)
   at System.DirectoryServices.DirectorySearcher.FindOne()
         at.-------UserSettings.IsValidUser(String userName)" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T12:36:07.057

以域用户身份运行进程（IIS 进程或 ASPNET 进程）。这意味着设置应用程序池标识。

在 IIS5 中，将匿名帐户 (IUSR_MACHINE) 设置为域用户，然后使用 .

在更高版本的 IIS 中，将服务帐户添加到 IIS_WPG 组。

# android - 通知显示但不加载下一个活动

> ID：15152516
> 
> 赞同：0
> 
> 时间：2013-03-01T07:14:46.747
> 
> 标签：android, notifications

```
private void generateNotification() {

    // TODO Auto-generated method stub
    String notificationTicket=new Date(System.currentTimeMillis()).toLocaleString();
    long when=System.currentTimeMillis();

    Notification myNotification=new Notification(R.drawable.ic_launcher, notificationTicket, when);

    Intent intent=new Intent(getApplicationContext(),MyNewActivity.class);
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    PendingIntent pendingIntent=PendingIntent.getActivity(getApplicationContext(), 0, intent, 0);

    myNotification.setLatestEventInfo(getApplicationContext(), null, "Hi some package Added", pendingIntent);

    notificationManager.notify(0, myNotification);
} 
```

我使用了一个按钮来触发通知，它显示在我的 ActionBar 上，但它没有加载我想要的新 Activity。我之前已经定义了我的 NotificationManager。还有一个用于取消通知的按钮，但它不值得因为通知仅在“几秒钟”内触发。提前致谢。

```
startButton=(Button)findViewById(R.id.button1);
        startButton.setOnClickListener(this);

        stopButton=(Button)findViewById(R.id.button2);
        stopButton.setOnClickListener(this);
        notificationManager=(NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE); 
```

我仍在寻找成功运行通知的解决方案！！！！我显示消息，但在通知用户后我试图触发的活动不起作用....我只需要一个通知演示，它会给出结果，我会完成其余的。再次感谢。我正在寻找您的友好回复..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:39:21.593

**尝试这个..！**

```
 long timestamp=System.currentTimeMillis();

 int i=(int) timestamp;

NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(context)
                .setSmallIcon(R.drawable.ic_launcher)
                .setContentTitle("Title")
                             .setAutoCancel(true);;

 TaskStackBuilder stackBuilder = TaskStackBuilder.create(this);

 stackBuilder.addParentStack(MyNewActivity.class);

 stackBuilder.addNextIntent(resultIntent);

 PendingIntent pendingIntent =stackBuilder.getPendingIntent(0,PendingIntent.FLAG_UPDATE_CURRENT);

 mBuilder.setContentIntent(pendingIntent);

  mNotificationManager =(NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);

  mNotificationManager.notify(i, mBuilder.build()); 
```

# javascript - 当我单击 HTML 中的锚链接时，有什么方法可以打开全屏打开的 ppt 文件？

> ID：15152520
> 
> 赞同：1
> 
> 时间：2013-03-01T07:15:06.607
> 
> 标签：javascript, jquery, html, css

我在锚标记的 href 属性中有 ppt 文件。如果我单击 Anchor 标记，文件应该全屏打开。我尝试以不同的格式保存 ppt 文件，但没有任何效果。请让我知道是否有任何方法可以在 Html 或使用 Javascript 中做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:03:10.353

将您的 PowerPoint 上传到[Scribd](http://www.scribd.com)，您可以使用他们的 API 在您的网站上显示它，而无需任何附加组件或特殊软件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:21:42.297

Ppt 不是 HTML 标准，因此您不能期望在网页中正确看到它，但前提是您在计算机中安装了适当的查看器，但您无法预测它的行为。为什么不将 ppt 导出为 HTML，然后用 target="_blank" 指向它的链接？

# jquery - 自动完成文本框----未找到值

> ID：15152530
> 
> 赞同：3
> 
> 时间：2013-03-01T07:15:37.470
> 
> 标签：jquery, jquery-autocomplete

我已经使用 jquery 函数实现了一个自动完成文本框，并且正在从数据库中获取建议值。一切看起来都很好。

但是，如果没有找到匹配的数据，我想向用户显示一些用户友好的消息“未找到匹配项”并清除文本框。我该如何实施？

添加了当前代码

```
function txtAutoComplete(acUrl, minLength, txtbxId) {
    $("#" + txtbxId).autocomplete({
        minLength: minLength, 
        source: function (request, responseFn) {
                $.post(acUrl, null, function (resp) {
                var txtValue = $.ui.autocomplete.escapeRegex(request.term);
                var matcher = new RegExp("^" + txtValue, "i");
                var a = $.grep(resp, function (item, index) {
                    return matcher.test(item);
                });
                responseFn(a);
            });
        } 
```

感谢 Yuriy Rozhovetskiy。

```
var error = 'No match';
if (a.length == 0) {
    responseFn(error);
}
else {
    responseFn(a);
} 
```

但是错误建议是垂直显示的，我怎样才能让它像正常的自动建议一样显示。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:55:11.440

您可以在源函数中完成所有这些工作：

```
source: function (request, responseFn) {
    $.post(acUrl, null, function (resp) {
        var txtValue = $.ui.autocomplete.escapeRegex(request.term);
        var matcher = new RegExp("^" + txtValue, "i");
        var a = $.grep(resp, function (item, index) {
            return matcher.test(item);
        });

        if(a.length == 0){
            alert("No matches found");
            $("#" + txtbxId).val("");
        }
        responseFn(a);
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T09:53:58.610

按照 Yuriy Rozhovetskiy 的建议更改了我的代码，几乎没有修改以发送有效的 JSON

```
var error = ["No match"];
if (a.length == 0) {
    responseFn(error);
}
else {
    responseFn(a);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T08:15:41.640

您可以在返回值的脚本中返回该值。

不要返回任何内容，只需检查您是否有一些值，如果没有返回一个包含“未找到匹配项”值的数组。

# java - android图像库上的NullPointer Exception onselected

> ID：15152534
> 
> 赞同：1
> 
> 时间：2013-03-01T07:15:42.630
> 
> 标签：java, android

我正在使用 android 图片库，我想通过单击图库项目来选择图片标签 ID 并将该 ID 放入`HashMap`（param_ids）。我使用了下面的代码`NullPointerException`。但是在我点击画廊项目之前，这给了我一个。

```
 param_ids.put("facial_appearance_id",view.getTag().toString()); 
```

这将正常工作，`android 2.3`但这会给出一个`NullPointerException`on `android 4.0.3`。那么我该如何解决这个问题呢？

代码

```
Gallery faceGallery= (Gallery) findViewById(R.id.gallery);
faceGallery.setOnItemSelectedListener(new OnItemSelectedListener() {

@Override
public void onItemSelected(AdapterView<?> parent, View view,int position, long id) {
    param_ids.put("facial_appearance_id",view.getTag().toString());
            }
@Override
public void onNothingSelected(AdapterView<?> parent) {
// TODO Auto-generated method stub

        }
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:20:33.523

使用`Gallery` `OnItemClickListener()`.

```
 faceGallery.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View v, int pos,
                long id) {

            //Do your stuff

        }
    }); 
```

# python - 为本地 MacPorts 使用外部 Portfile

> ID：15152541
> 
> 赞同：1
> 
> 时间：2013-03-01T07:16:19.827
> 
> 标签：python, macports

我对 MacPorts 很满意，但我经常遇到没有 Portfile 的东西。例如，我想使用 Python 和 PDF 生成器 libharu（[链接](http://libharu.org/)）。似乎这里有一个可用于 libharu 的[Portfile](https://github.com/sakuro/macports/blob/master/print/libharu/Portfile)。

有没有办法设置 MacPorts，这样每个`port selfupdate`Portfile 都从远程 github.com 位置更新？我*不想*一直在本地维护它。

（下一步是处理我还找不到 Portfile 的 pyharu，但希望[这里](https://github.com/libharu/libharu/blob/master/if/python/README.python)或[这里](http://libfir.googlecode.com/svn/trunk/aliens/libharu-2.1.0/if/python/README.python)有足够的文档）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T01:18:28.600

您链接的存储库是官方 MacPorts 端口树的克隆。因此，此 github 存储库中的任何文件也在标准端口树中。`port info libharu`因此应该在您的系统上开箱即用。

还要回答关于从 git 同步端口树的问题中现已过时的部分：是的，MacPorts 主干支持从 git 同步端口树（请参阅[相关来源的这一部分](http://trac.macports.org/browser/trunk/base/src/macports1.0/macports.tcl?marks=2229-2253#L2229)）。不过，这在已发布的版本中不可用，并将进入 MacPorts 2.2。

要使用此功能，请在您选择的位置创建标准克隆，确保用户 macports 对该位置具有读写权限，编辑您的`/opt/local/etc/macports/sources.conf`并附加`file:///path/to/your/clone`.

# c# - sp_executesql 在 SSMS 中以毫秒为单位运行，但从 ado.net 需要 3 秒

> ID：15152542
> 
> 赞同：2
> 
> 时间：2013-03-01T07:16:23.123
> 
> 标签：c#, sql-server, tsql, ado.net, sql-server-2012

这是我在搜索表单上使用的动态查询，它在 SSMS 中以毫秒为单位运行，大约在 300 到 400 毫秒之间：

```
exec sp_executesql N'set arithabort off;
set transaction isolation level read uncommitted;

With cte as 
  (Select ROW_NUMBER() OVER 
      (Order By  Case When d.OldInstrumentID IS NULL 
          THEN d.LastStatusChangedDateTime Else d.RecordingDateTime End 
       desc) peta_rn,   
      d.DocumentID
   From Documents d
   Inner Join Users u on d.UserID = u.UserID 
   Inner Join IGroupes ig on ig.IGroupID = d.IGroupID
   Inner Join ITypes it on it.ITypeID = d.ITypeID 
   Where 1=1  
       And (CreatedByAccountID = @0 Or DocumentStatusID = @1 Or DocumentStatusID = @2 )  
       And (d.JurisdictionID = @3 Or DocumentStatusID = @4 Or DocumentStatusID = @5)   
       AND (  d.DocumentStatusID = 9  ) 
   ) 
Select d.DocumentID, d.IsReEfiled, d.IGroupID, d.ITypeID, d.RecordingDateTime, 
    d.CreatedByAccountID, d.JurisdictionID, 
    Case When d.OldInstrumentID IS NULL THEN d.LastStatusChangedDateTime 
        Else d.RecordingDateTime End as LastStatusChangedDateTime, 
    dbo.FnCanChangeDocumentStatus(d.DocumentStatusID,d.DocumentID) as CanChangeStatus, 
    d.IDate, d.InstrumentID, d.DocumentStatusID,ig.Abbreviation as IGroupAbbreviation, 
    u.Username, j.JDAbbreviation, inf.DocumentName,
    it.Abbreviation as ITypeAbbreviation, d.DocumentDate, 
    ds.Abbreviation as DocumentStatusAbbreviation,
    Upper(dbo.GetFlatDocumentName(d.DocumentID)) as FlatDocumentName 
From Documents d 
Left Join IGroupes ig On d.IGroupID = ig.IGroupID 
Left Join ITypes it On d.ITypeID = it.ITypeID 
Left Join Users u On u.UserID = d.UserID 
Left Join DocumentStatuses ds On d.DocumentStatusID = ds.DocumentStatusID 
Left Join InstrumentFiles inf On d.DocumentID = inf.DocumentID 
Left Join Jurisdictions j on j.JurisdictionID = d.JurisdictionID 
Inner Join cte on cte.DocumentID = d.DocumentID 
Where 1=1 
    And peta_rn>=@6 AND peta_rn<=@7 
Order by peta_rn',
N'@0 int,@1 int,@2 int,@3 int,@4 int,@5 int,@6 bigint,@7 bigint',
@0=44,@1=5,@2=9,@3=1,@4=5,@5=9,@6=94200,@7=94250 
```

这个 sql 是用 C# 代码形成的，where 子句是根据用户在搜索表单中搜索的值动态添加的。从一页移动到第二页大约需要 3 秒。我在搜索的大多数列上已经有了必要的索引。

知道为什么我的 Ado.Net 代码会变慢吗？

**更新：**不确定执行计划是否会有所帮助，但它们是：

![在此处输入图像描述](../Images/9863e81d8eee6a0dc1f716ce02636976.png)

![在此处输入图像描述](../Images/028ef50774c3b59fe72ce75d9a940eaa.png)

![在此处输入图像描述](../Images/c782b518de89b81d4a4422553a0c4540.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:21:33.957

SQL Server 可能为 ADO.NET 连接创建了不适当的查询计划。我们已经看到与 ADO 类似的问题，通常的解决方案是清除所有查询计划并再次运行慢查询 - 这可能会创建更好的计划。要清除查询计划，最通用的解决方案是更新相关表的统计信息。就像你的下一个：

```
update statistics documents with fullscan 
```

对涉及的其他表执行相同操作，然后从 ADO.NET 运行慢速查询（之前不要运行 SSMS）。

请注意，这种时间不一致可能暗示查询或数据库设计错误 - 至少对我们来说通常是这样 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:27:52.707

.net 默认使用 UTF 字符串，这相当于 NVARCHAR 而不是 VARCHAR。

当您在 dot net 中执行 WHERE ID = @foo 时，您可能会隐式执行

```
WHERE CONVERT(ID, NVARCHAR) = @foo 
```

结果是这个 where 子句不能被索引，并且必须被表扫描。解决方案是实际将每个参数作为 DbParameter 传递到 SqlCommand 中，并将 DbType 设置为 VARCHAR（在字符串的情况下）。

如果 .net 参数比等效的 SQL 列“更宽”，则 Int 类型当然会发生类似的情况。

PS“证明”此问题的最简单方法是在 SSMS 中运行您的查询，并执行以下操作

```
DECLARE @p0 INT = 123
DECLARE @p1 NVARCHAR = "foobar" //etc etc 
```

并与

```
DECLARE @p0 INT = 123
DECLARE @p1 VARCHAR = "foobar" //etc etc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T09:05:06.130

如果在 SSMS 中重复运行查询，数据库可能会重复使用之前创建的执行计划，并且所需的数据可能已经缓存在内存中。

我在您的查询中注意到了几件事：

*   CTE 连接用户、IGroupes 和 IType，但连接的记录未在 SELECT 中使用

*   CTE 对计算表达式执行 ORDER BY（请注意（未索引）排序中的 85% 成本）

可能用可以索引的计算持久列替换 CASE 表达式可以加快执行速度。

*   请注意，ORDER BY 是对连接 4 个表产生的数据执行的

*   CTE 状态的 WHERE 条件`AND d.DocumentStatusID = 9`，但 AND 的其他 DocumentStatusID

*   对 8 个 JOINed 表的结果执行分页。

最有可能创建一个中间 CTE，它根据`peta_rn`改进性能过滤第一个 CTE

# mysql - 在 MySQL 中的存储过程上使用变量

> ID：15152544
> 
> 赞同：1
> 
> 时间：2013-03-01T07:16:26.403
> 
> 标签：mysql, sql

我正在尝试使这个存储过程工作；我正在尝试接收一个参数，并在“参与者”表中查找一行，计算结果以验证表中是否存在该 ID。不知何故，当我尝试保存该过程时，它失败说“您的 SQL 语法有错误；请检查与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在第 16 行的 'END' 附近使用”。任何帮助将不胜感激。

```
BEGIN
DECLARE cuentaAtleta INT;

SELECT COUNT(*)
INTO cuentaAtleta 
FROM participantes
WHERE id_participante =  id; /* id is a parameter */

IF cuentaAtleta > 0 THEN
    SELECT *
    FROM participantes
    INNER JOIN disciplinas ON participantes.id_disciplina = disciplinas.id_disciplina
    WHERE id_participante =  'id;

END IF
END 
```

它在 Linux 服务器上
MySQL 版本：5.1.68-cll
PHP 版本：5.3.16

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T07:18:06.027

因为您没有终止语句，也没有更改分隔符。

```
DELIMITER $$
CREATE PROCEDURE procNameHERE(IN ID INT)
BEGIN

    DECLARE cuentaAtleta INT;

    SELECT  COUNT(*)
    INTO    cuentaAtleta 
    FROM    participantes
    WHERE   id_participante =  id;

    IF cuentaAtleta > 0 THEN
        SELECT  *
        FROM    participantes
                INNER JOIN disciplinas 
                    ON participantes.id_disciplina = disciplinas.id_disciplina
        WHERE   id_participante =  id;
    END IF ;

END $$
DELIMITER ; 
```

# r - 在 lmer 模型上运行时 anova 输出空白

> ID：15152552
> 
> 赞同：0
> 
> 时间：2013-03-01T07:17:03.983
> 
> 标签：r, anova, lme4, lmer

我正在尝试使用 lme4 库运行方差分析模型。我没有任何真实数据，所以我只是从 MASS 中提取了 Cars93 数据。虽然我可以让 lmer(...) 工作，但我似乎无法让 anova 表打印。

这是发生的事情：

```
> library(MASS)

> cars <- Cars93

> library(lme4)
Loading required package: Matrix
Loading required package: lattice

Attaching package: ‘lme4’

The following object(s) are masked from ‘package:stats’:

AIC, BIC

> fit <- lmer(Max.Price ~ 1+(1|AirBags)+(1|Man.trans.avail), data=cars)
> anova(fit)
Analysis of Variance Table
Df Sum Sq Mean Sq F value   
> summary(fit)
Linear mixed model fit by REML 
Formula: Max.Price ~ 1 + (1 | AirBags) + (1 | Man.trans.avail) 
Data: cars 
AIC   BIC logLik deviance REMLdev
688 698.1   -340    685.1     680
Random effects:
Groups          Name        Variance Std.Dev.
AirBags         (Intercept) 62.2339  7.8888  
Man.trans.avail (Intercept)  6.3022  2.5104  
Residual                    83.2786  9.1257  
Number of obs: 93, groups: AirBags, 3; Man.trans.avail, 2

Fixed effects:
            Estimate Std. Error t value
(Intercept)    23.81       5.00   4.761 
```

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:42:30.520

我认为您的公式中需要一个变量才能使方差分析起作用。例如

```
fit <- lmer(Max.Price ~ Weight + (1 | AirBags) + (1 | Man.trans.avail),data=cars)

anova(fit)
Analysis of Variance Table
       Df Sum Sq Mean Sq F value
Weight  1 1932.1  1932.1   29.67 
```

# html - 奇怪的 HTML 'Bud1% @' 注入

> ID：15152559
> 
> 赞同：1
> 
> 时间：2013-03-01T07:17:47.643
> 
> 标签：html, expressionengine, code-injection

我正在使用 MAMP Pro 在 ExpressionEngine 中本地开发一个网站，突然之间我遇到了最奇怪的问题。

我的由 Typekit 提供的 webfonts 突然停止运行。经过仔细检查，我发现我的 Typekit 嵌入代码的第二行附加了`Bud1% @`. 这是我完整的 Typekit 代码，供参考：

```
<script type="text/javascript" src="//use.typekit.net/*******.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}Bud1% @</script> 
```

澄清一下，此代码仅在浏览器中查看时才被注入，而不是在我的代码编辑器中。我还没有测试它是否被注入到生产环境中。

在 SO 中搜索类似问题会产生[此线程](https://stackoverflow.com/questions/5616918/what-is-bud1-edsdb)，表明该问题是由 Finder 隐藏的 .DS_STORE 文件以某种方式引起的，但并未阐明如何解决该问题。

我尝试从目录中删除 .DS_STORE 文件并重新创建受影响的 HTML 文件，但无济于事。

为了进一步澄清，我正在 OSX Mountain Lion (10.8.2) 上开发，使用 Sublime Text 2 作为我的代码编辑器和 Safari 进行测试。ExpressionEngine 2.5.5 是我正在使用的 CMS，整个内容位于 Git Tower 管理的 Git 存储库中。

有任何想法吗！？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:11:52.110

**我已经解决了我的问题。**

此问题特定于 ExpressionEngine。这是由于我安装了一个名为**SnippetsSync**的插件。

该插件从目录中的文件创建了一个空的 ExpressionEngine 片段`.DS_STORE`，因此将`{ }`我的 Typekit 嵌入代码中的内容替换为可怕的`Bud1% @`.

如果您遇到同样的问题，请转到*Design > Templates > Snippets*仔细检查您是否没有空白片段。*如果问题仍然存在，请从Add-Ons > Modules*删除或禁用扩展。

# ruby-on-rails - 数组长度不正确

> ID：15152561
> 
> 赞同：0
> 
> 时间：2013-03-01T07:17:53.483
> 
> 标签：ruby-on-rails, ruby

在`view.html.erb`页面中我有如下代码：

```
<%
 str="D:\\projects\\curator\\java\\hpc"  
 no=str.count("\\")  
 splitstr=str.split(pattern="\\",no+1) 

%> 
```

在此之后我打印

```
<%= splitstr.length %> 
```

它给我的输出为`9`. 但`splitstr`只有`5`元素。
它是如何发生的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:24:39.347

改用这个..

```
 splitstr=str.split("\\")
 splitstr.length 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:27:25.743

```
1.9.3p385 :007 > str="D:\\projects\\curator\\java\\hpc"  
 => "D:\\projects\\curator\\java\\hpc" 
1.9.3p385 :008 > no=str.count("\\")
 => 4 
1.9.3p385 :009 >  splitstr=str.split(pattern="\\",no+1) 
 => ["D:", "projects", "curator", "java", "hpc"] 
1.9.3p385 :010 > splitstr.length
 => 5 
1.9.3p385 :011 > 
```

我做对了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T08:40:26.080

你最终在你的数组中有四个“”（空）字符串

# ios - 更改 textField 边框颜色 iOS

> ID：15152564
> 
> 赞同：22
> 
> 时间：2013-03-01T07:18:04.097
> 
> 标签：ios, objective-c, uitextfield, xib

我想更改**UITextField 边框**颜色。是否可以自定义边框颜色？我搜索了所有选项，`xib`但没有找到任何要更改的选项`border color`。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-01T07:22:20.033

你可以使用这个：

```
yourTextField.layer.borderColor=[[UIColor blackColor]CGColor];

yourTextField.layer.borderWidth=1.0; 
```

`#import <QuartzCore/QuartzCore.h>`并记住在您的 .h 文件中导入

您还可以指定 RGB 值。

```
yourTextField.layer.borderColor=[[UIColor colorWithRed:178.0f/255.0f green:178.0f/255.0f blue:178.0f/255.0f alpha:1.0] CGColor]; 
```

*注意：您需要从 iOS 7 开始设置这两个值*

***Swift 2.3 的更新***

```
yourTextField.layer.borderColor = UIColor.blackColor().CGColor
yourTextField.layer.borderWidth = 1.0 
```

*或者*

```
yourTextField.layer.borderColor = UIColor(red: 178.0 / 255.0, green: 178.0 / 255.0, blue: 178.0 / 255.0, alpha: 1.0).CGColor 
```

***Swift 3.1.1 更新***

```
yourTextField.layer.borderColor = UIColor.black.cgColor
yourTextField.layer.borderWidth = 1.0 
```

*或者*

```
yourTextField.layer.borderColor = UIColor(red: 178.0 / 255.0, green: 178.0 / 255.0, blue: 178.0 / 255.0, alpha: 1.0).cgColor 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-02T19:11:38.707

```
#import <QuartzCore/QuartzCore.h> 
```

使用以下代码更改文本字段的边框颜色

```
textField.layer.borderWidth = 2.0f;
textField.layer.borderColor = [[UIColor redColor] CGColor];
textField.layer.cornerRadius = 5;
textField.clipsToBounds      = YES; 
```

**对于 SWIFT：**

```
textField.layer.borderColor = UIColor.redColor().CGColor; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-01T07:21:46.733

使用 Quartzcore 框架。你可以设置textField.layer.borderWidth，以及borderColor：

```
tField.layer.borderColor = [UIColor redColor].CGColor; 
```

更多参考： [https ://stackoverflow.com/a/5749376/1554632](https://stackoverflow.com/a/5749376/1554632)

# mysql - MySql 触发错误

> ID：15152570
> 
> 赞同：0
> 
> 时间：2013-03-01T07:18:23.350
> 
> 标签：mysql, sql, triggers

我在 MySql`dealers`和`dealers_info`. 我尝试创建触发器，删除信息`dealers`后将删除相应的行`dealers info`

```
CREATE TRIGGER del_info AFTER DELETE ON  dealers
FOR EACH ROW 
BEGIN
DELETE FROM dealers_info WHERE dealer_id = OLD.dealer_id;
END; 
```

但我有一个错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds 
to your MySQL server version for the right syntax to use near '' at line 4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:20:24.727

更改分隔符以正确执行查询，

```
DELIMITER $$
CREATE TRIGGER del_info 
AFTER DELETE ON  dealers
FOR EACH ROW 
BEGIN
    DELETE FROM dealers_info WHERE dealer_id = OLD.dealer_id;
END $$
DELIMITER ; 
```

# php - PHP 使用中的私有方法和变量

> ID：15152571
> 
> 赞同：0
> 
> 时间：2013-03-01T07:18:24.937
> 
> 标签：php, oop

我一直在思考`private`php中变量和方法的使用。

我不会谈论一类汽车或类似的东西。我想谈谈自己的剧本。

程序员和脚本所有者使用公共或私有有什么区别。

如果脚本是一个计算器，那么我是唯一一个将来会编写代码的人。我什么时候必须使用方法的私有变量。这将如何改变脚本中的任何内容？

另外，如果是关于触摸变量？如果有人试图改变价值，他不能因为私人的事情。他会直接去用setter去改吗？

我需要一个很好的例子，我可以看到私有方法或变量对程序员或最终用户有很好的好处。

我正在编写一些脚本，一个人告诉我不要`var`在课堂上使用。我问他为什么？他说你必须使用公共或私人..并问为什么？

如果有办法直接更改变量，为什么要使用 setter？

如果有办法直接更改变量，为什么要使用 getter？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T07:32:01.990

首先，当你开发strong-OO 类时，你应该尽可能少地暴露你的类的内部语义（显然不影响功能）。

一些变量仅在类本身的上下文中才有价值，并且对于使用该类的开发人员来说毫无意义。将变量公开允许使用该类的任何人随意更改此类变量，尽管他们可能不知道它的用途。在 PHP 中，当您甚至没有类型安全来至少减轻可以造成的损害时，这可能是一个特殊的问题。

考虑一下：您有一个包含一些 I/O 操作的类。让我们称之为`FileReader`

```
class FileReader {
    public $_handle;

    public function __construct($filepath) {
        $this->_handle = fopen($filepath, 'r');
        if ($this->_handle === NULL) {
            throw new Exception("Unable to open the file for reading");
        }
    }

    // ... the rest of the class
} 
```

现在您可以看到该类打开了一个文件句柄。通过将`$_handle`变量公开，您已将其公开给在您的班级工作的所有人员。他们不需要知道您打开的原始文件句柄，他们只想使用您的好类来执行一些读取操作。但是，它是公开的；他们不仅可以看到它，而且可以改变它。这很糟糕，尤其是当您的其他代码假定`$_handle`变量有效时。

```
$reader = new FileReader();
$reader->_handle = "I hope this doesn't break anything. /trololol";
$reader->someOperation(); // oh no! Our file handle has just been changed to something completely wrong, this is now going to the break the class. 
```

通过首先将变量设为私有，可以完全避免这种荒谬的情况。有关每个访问修饰符的作用以及何时应用它们的更多（更好）示例，请参见此[答案](https://stackoverflow.com/questions/4361553/php-public-private-protected)。

现在，进入 getter 和 setter。在您的问题中，您似乎假设所有 getter 和 setter 都按以下方式编写：

```
class Foo {
    private $_bar;

    public function getBar() {
        return $this->_bar;
    }

    public function setBar($newBar) {
        $this->_bar = $newBar
    }
} 
```

`$_bar`在这种情况下，您是绝对正确的，这与首先将变量更改为公共没有区别。

但是，getter 和 setter 方法使您可以控制外部开发人员**如何**设置变量，因此您可以立即检测它们何时会发出嘘声并避免以后出现未定义的行为。例如：

```
class Foo {
    private $_bar;

    public function getBar() {
        return $this->_bar;
    }

    public function setBar($newBar) {
        // Now we're going to ensure that $newBar is always an integer
        if (!is_int($newBar)) {
            // not an integer, throw out an exception to let the developer know that somewhere is setting invalid input
            throw new Exception("Expected an integer value for 'Bar'");
        }
        $this->_bar = $newBar;
    }
} 
```

这不仅使您的类更加健壮，而且使使用您的类的开发人员的生活变得更加轻松。当类尝试使用 的损坏值时，不必稍后在某个地方调试一个极其奇怪的问题`$_bar`，他们可以很容易地从堆栈跟踪中判断损坏值是从哪里设置的，并从源头修复它。

有大量关于变量访问和 getter/setter 方法的文档，它适用于各种语言，所以不要害怕查找基于 C++/C#/VB.NET 的文章，它们都大致翻译成相同的材料。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T07:27:06.037

最终用户看不到代码，因此那里没有（不利）优势。

对于程序员来说，在对象之外声明不需要的东西`private`只是一种良好的编程习惯和保护机制。从技术上讲，如果您是一个完美的程序员，并且您不关心代码的外观，那么使用`private`不会给您带来任何好处。但是，私有成员强制执行黑盒模型——您只关心对象做什么，而不关心它是如何工作的（从外部查看它时）。最后，如果您（或其他人）出于任何原因需要/想要使用您的代码，他们将知道使用/调用哪些方法和属性来获得**功能**对象具有，而无需修改对象需要维护的内部值。它可能会或可能不会给您带来任何优势——它只是关于代码的外观。这就是良好的编程实践的意义所在，并且通常会遵循它们，因为经验表明它们倾向于最大限度地减少错误。

至于`var`，它已被弃用。这意味着它可以（并且将）在未来被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T07:27:54.743

Public、Private 和 Protected 仅在它们是函数的一部分或类的一部分时才重要。

如果您想设置一次变量并“锁定”它，以便以后无法更改该值，您可以`define`将其设置为`const`（常量）。

> 公共范围以使该变量/函数可从任何地方、对象的其他类和实例中使用。
> 
> 当您希望变量/函数仅在其自己的类中可见时，私有范围。
> 
> 当你想让你的变量/函数在所有扩展当前类（包括父类）的类中可见时，受保护范围。

见这里： http: [//php.net/manual/en/language.oop5.visibility.php](http://php.net/manual/en/language.oop5.visibility.php)

# java - 文本表的 jdbc-hsqldb 异常

> ID：15152573
> 
> 赞同：-5
> 
> 时间：2013-03-01T07:18:32.383
> 
> 标签：java, jdbc, hsqldb

我的Java代码是：

```
conn = DriverManager.getConnection(url, "user", "password"); // line 1

stm = conn.createStatement(); // line 2

stm.execute("CREATE TEXT TABLE someTableName("NLID" VARCHAR(20),
 "Scheduled.Primary.Scripting.Code" VARCHAR(20), "Scheduled.Site" VARCHAR(20),
 "Scheduled.Location.Long.Name" VARCHAR(20),
 "primary_key_1644" int PRIMARY KEY)"); // line 3

stm.execute("SET TABLE someTableName SOURCE 
"/some.csv;ignore_first=true;all_quoted=true;shutdown=true""); // line 4 
```

链接到 hsqldb 的 CSV 是：

```
NLID,Scheduled.Primary.Scripting.Code,Scheduled.Site,Scheduled.Location.Long.Name,primary_key_1644   
100,INMRSB,Shopping,Shopping General-Banner-728x90-INMRSB-I,1 
100002,MSVT08,MSN Video,msnbc.com-TODAYshow.com Special Sponsorships 8-Streaming Media-300x60-MSVT08-S,2  
100004,MSV10T,MSN Video,msnbc.com-TODAYshow.com Special Sponsorships 10-Streaming Media-300x60-MSV10T-S,3 
```

我在第 4 行得到以下异常：

`java.sql.SQLException: bad TEXT table source file - line number: 1196 java.lang.NumberFormatException: For input string: "Body Connection-Banner-728x90-HEAMBA-S" in statement [SET TABLE someTableName SOURCE "/some.csv;ignore_first=true;all_quoted=true;shutdown=true"] at org.hsqldb.jdbc.Util.sqlException(Unknown Source) at org.hsqldb.jdbc.Util.sqlException(Unknown Source) at org.hsqldb.jdbc.JDBCStatement.fetchResult(Unknown Source) at org.hsqldb.jdbc.JDBCStatement.execute(Unknown Source) at java.lang.NumberFormatException: For input string: "Body Connection-Banner-728x90-HEAMBA-S" at org.hsqldb.error.Error.error(Unknown Source) at org.hsqldb.TextTable.connect(Unknown Source) at org.hsqldb.TextTable.openCache(Unknown Source) at org.hsqldb.TextTable.setDataSource(Unknown Source) at org.hsqldb.StatementCommand.getResult(Unknown Source) at org.hsqldb.StatementCommand.execute(Unknown Source) at org.hsqldb.Session.executeCompiledStatement(Unknown Source) at org.hsqldb.Session.executeDirectStatement(Unknown Source) at org.hsqldb.Session.execute(Unknown Source) ... 6 more Caused by: java.lang.NumberFormatException: For input string: "Body Connection-Banner-728x90-HEAMBA-S" at java.lang.NumberFormatException.forInputString(Unknown Source) at java.lang.Integer.parseInt(Unknown Source) at java.lang.Integer.parseInt(Unknown Source) at org.hsqldb.rowio.RowInputText.readInteger(Unknown Source) at org.hsqldb.rowio.RowInputBase.readData(Unknown Source) at org.hsqldb.rowio.RowInputText.readData(Unknown Source) at org.hsqldb.rowio.RowInputBase.readData(Unknown Source) at org.hsqldb.rowio.RowInputText.readData(Unknown Source) at org.hsqldb.RowAVLDiskData.getRowData(Unknown Source) at org.hsqldb.persist.RowStoreAVLDiskData.get(Unknown Source) ... 14 more`

任何帮助都将是可观的。

**编辑：** Hsqldb 在读取定义为 VARCHAR 的列时抛出 NumberFormatException ！！！

**MODIFIED：**发生异常是因为其中一个列值中包含逗号，例如`"Mind, Body Connection-Banner-728x90-HEAMBA-S"`。由于 hsqldb 将 csv 作为表读取，因此附加逗号被 hsql 解释为附加列。谁能指导我如何规避这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:31:03.057

正如 OP 发现的那样，遵循这些简单的步骤有助于在 CSV 文件中找到问题：

1.  查看报错信息：`bad TEXT table source file - line number: 1196` 行号是CSV文件的行号。使用文本编辑器，转到该行。行从 1 开始编号。
2.  `ava.lang.NumberFormatException: For input string: "Body Connection-Banner-728x90-HEAMBA-S"`注意 NumberFormatException 表示需要一个数字，而不是找到报告的字符串。
3.  幸运的是，表中只有一个数字 (INT) 列，因此很容易看到 CVS 中有一个额外的逗号，它终止了最后一个 VARCHAR 字符串并导致了问题。
4.  TEXT 表定义包括`all_quoted=true`，这意味着如果您在包含逗号的字符串周围使用双引号，则整个字符串将被视为一个字段，问题就会消失。

# facebook - Facebook UI，如何检查用户是否可以向另一个用户发送 Facebook 消息

> ID：15152575
> 
> 赞同：2
> 
> 时间：2013-03-01T07:18:37.587
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, sendmessage

我想跟进[这个问题](http://facebook.stackoverflow.com/questions/11235527/facebook-api-error-code-100-error-message-viewer-cannot-message-specified-reci)。我使用 FB.ui 发送链接并为某些用户得到完全相同的错误。无论如何要检查它并决定是否向用户显示ui？

```
API Error Code: 100
API Error Description: Invalid parameter
Error Message: Viewer cannot message specified recipients. 
```

* * *

```
<a href='#' onClick="
        FB.ui({
          method: 'send',
          link: 'http://www.xxxxxxxxxxx.com',
          to: ###########,
          });
">Send a message</a> 
```

* * *

即使我使用 url 发送方法，某些用户也无法工作。例如：

错误用户：[https ://www.facebook.com/dialog/send?app_id=123050457758183&name=People%20Argue%20Just%20to%20Win&link=http://www.nytimes.com/2011/06/15/arts/people -argue-just-to-win-scholars-assert.html&redirect_uri=https://www.bancsabadell.com/cs/Satellite/SabAtl/&to=100000104626944](https://www.facebook.com/dialog/send?app_id=123050457758183&name=People%20Argue%20Just%20to%20Win&link=http://www.nytimes.com/2011/06/15/arts/people-argue-just-to-win-scholars-assert.html&redirect_uri=https://www.bancsabadell.com/cs/Satellite/SabAtl/&to=100000104626944)

普通用户：[https ://www.facebook.com/dialog/send?app_id=123050457758183&name=People%20Argue%20Just%20to%20Win&link=http://www.nytimes.com/2011/06/15/arts/people -argue-just-to-win-scholars-assert.html&redirect_uri=https://www.bancsabadell.com/cs/Satellite/SabAtl/&to=1311251197](https://www.facebook.com/dialog/send?app_id=123050457758183&name=People%20Argue%20Just%20to%20Win&link=http://www.nytimes.com/2011/06/15/arts/people-argue-just-to-win-scholars-assert.html&redirect_uri=https://www.bancsabadell.com/cs/Satellite/SabAtl/&to=1311251197)

（这是取自[https://developers.facebook.com/docs/reference/dialogs/send/](https://developers.facebook.com/docs/reference/dialogs/send/)的共享链接示例）

* * *

向 Facebook 报告的错误：[https ://developers.facebook.com/bugs/538638372825668](https://developers.facebook.com/bugs/538638372825668)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:16:01.427

**编辑：**事实上，现在每个人都应该可以通过消息联系到。它只是有新的“[过滤偏好](https://www.facebook.com/help/398578543552207)”。我猜这个`can_message`字段现在没用了，因为它应该总是返回`true`。我认为它会在一段时间内被弃用。

* * *

在`user`FQL 表中，您有一个字段必须验证您需要什么：

> **can_message** *(boolean)* : 用户是否可以向另一个用户发送消息

*来源：[https ://developers.facebook.com/docs/reference/fql/user](https://developers.facebook.com/docs/reference/fql/user)*

```
select can_message from user where uid=USER_ID 
```

*`USER_ID`*成为您的应用用户想要向其发送消息的人。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-01T14:52:12.190

您可以使用 FB api；

我使用类似的东西：

```
FB.api('/me/permissions', function (response) 
{
//check contents of response for required permissions here
fb_publish_perm = response.data[0]['publish_stream'] ? response.data[0]['publish_stream'] : false;

if (fb_publish_perm)
{
    // it permissions exist
}
else 
{
    // permissions dont exist launch the ui to request.
}

}); 
```

请将以上内容视为伪代码，因为它直接来自我的脑海！

# sql - SQL 查询问题 无法对包含聚合或子查询的表达式执行聚合函数99

> ID：15152576
> 
> 赞同：0
> 
> 时间：2013-03-01T07:18:57.030
> 
> 标签：sql, sql-server

![在此处输入图像描述](../Images/439607ce7d937e662cbf3dde7ba9b3e5.png) 当我删除子查询时，上述查询有效。但我希望金额乘以查询中指定的表 n_bank_rate 中的名义利率。如何实现？

```
 select 2 as orderby, 2 as n_order2,null as exp_id ,null as company,
         'Total -' + fac.facility_type as cashflow,
         null as exp_identification_date,
         bk.bank_name as bank,null as branch,
         null as Counterparty,null as country,null as facility_type,
         bank_facility_id as bank_facility_id ,  null as curr1, 
          sum(m.amount) as curr1_amt,
         null as curr2,
         sum(m.amount * (select top 1 notional_rate from n_bank_rate where bank_id = m.bank_id order by id desc)) as curr2_amt,
         null as converstion_rate,null as due_date,null as bank_ref,null as invoice_no,null as remarks ,
         null as [term],null as [terms_type] 
        from m_forex_exposure m 
        join m_company cm on m.comp_id = cm.comp_id
        left join m_bank bk on m.bank_id = bk.id
        left join m_facility_type fac on m.bank_facility_id = fac.id 
        join n_link_exposure le on  m.exp_id = le.ref_exp_id 
        where 
        (cm.comp_main_id = 1 and cm.group_id =1 )
        and m.amount > 0
        and (m.bank_id =94) 
        and isnull(m.bank_id,0) <> 0
        and bank_facility_id in (select id as bank_facility_id from m_facility_type where facility_type  in ('EBRD','PCFC'))
        group by  bk.bank_name , bank_facility_id,fac.facility_type 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:27:20.983

正如 sql server 告诉你的那样......你不能运行聚合，为什么有一个子查询子查询只需在子查询完成后从整个事情中再次选择。

```
SELECT 
sum(curr1_amt), 
sum(curr1_amt)*curr2_amt,
orderby,
n_order2,
exp_id ,
company,
cashflow,
exp_identification_date,
bank,
branch,
Counterparty,
country,
facility_type,
bank_facility_id ,
curr1,
curr2,
converstion_rate,
due_date,
bank_ref,
invoice_no,
remarks ,
[term],
[terms_type] 
FROM
(
    SELECT
    2 as orderby,
    2 as n_order2,
    null as exp_id ,
    null as company,
    'Total -' + fac.facility_type as cashflow,
    null as exp_identification_date,
    bk.bank_name as bank,
    null as branch,
    null as Counterparty,
    null as country,
    null as facility_type,
    bank_facility_id as bank_facility_id ,
    null as curr1,
    m.amount as curr1_amt,
    null as curr2,
    curr2_amt = (select top 1 notional_rate from n_bank_rate where bank_id = m.bank_id),
    null as converstion_rate,
    null as due_date,
    null as bank_ref,
    null as invoice_no,
    null as remarks ,
    null as [term],
    null as [terms_type]           

    FROM 
    m_forex_exposure m   
    join m_company cm on m.comp_id = cm.comp_id          
    left join m_bank bk on m.bank_id = bk.id          
    left join m_facility_type fac on m.bank_facility_id = fac.id           
    join n_link_exposure le on  m.exp_id = le.ref_exp_id           

    WHERE
    (cm.comp_main_id = 1 and cm.group_id =1)          
    and m.amount > 0          
    and (m.bank_id =94)           
    and isnull(m.bank_id,0) <> 0          
    and bank_facility_id in (select id as bank_facility_id 
                     from m_facility_type 
                     where facility_type  in ('EBRD','PCFC')
                         )          
) AS mytable
GROUP BY
orderby,
n_order2,
exp_id ,
company,
cashflow,
exp_identification_date,
bank,
branch,
Counterparty,
country,
facility_type,
bank_facility_id ,
curr1,
curr2,
converstion_rate,
due_date,
bank_ref,
invoice_no,
remarks ,
[term],
[terms_type] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:36:31.347

同样在 SQLServer2005+ 中，您可以使用[CROSS APPLY](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)

```
 select 2 as orderby, 2 as n_order2,null as exp_id ,null as company,
         'Total -' + fac.facility_type as cashflow,
         null as exp_identification_date,
         bk.bank_name as bank,null as branch,
         null as Counterparty,null as country,null as facility_type,
         bank_facility_id as bank_facility_id ,  null as curr1, 
          sum(m.amount) as curr1_amt,
         null as curr2,
         sum(m.amount * curr2_amt.notional_rate) as curr2_amt,
         null as converstion_rate,null as due_date,null as bank_ref,null as invoice_no,null as remarks ,
         null as [term],null as [terms_type] 
        from m_forex_exposure m 
        join m_company cm on m.comp_id = cm.comp_id
        left join m_bank bk on m.bank_id = bk.id
        left join m_facility_type fac on m.bank_facility_id = fac.id 
        join n_link_exposure le on  m.exp_id = le.ref_exp_id 
        CROSS APPLY (select top 1 notional_rate from n_bank_rate where bank_id = m.bank_id order by id desc) as curr2_amt (notional_rate) 
        where 
        (cm.comp_main_id = 1 and cm.group_id =1 )
        and m.amount > 0
        and (m.bank_id =94) 
        and isnull(m.bank_id,0) <> 0
        and bank_facility_id in (select id as bank_facility_id from m_facility_type where facility_type  in ('EBRD','PCFC'))
        group by  bk.bank_name , bank_facility_id,fac.facility_type 
```

# sql-server-2008 - 游标使用中的 T-Sql 错误

> ID：15152577
> 
> 赞同：2
> 
> 时间：2013-03-01T07:19:09.410
> 
> 标签：sql-server-2008, tsql

下面是我的商店操作的一部分，用于从表的视图中读取数据并对其进行处理，但是有一个错误，我想知道...（在选择语句中出现 8 个参数和光标前面出现8个参数但有错误！！！）

```
DECLARE CUR CURSOR FOR 
SELECT PkJobDoneDaily_Id
       , Fk_ExecCarInOwner
       , Fk_ActivityType
       , Fk_CostSrc
       , Fk_ShiftNum
       , Fk_WorkGroup
       , DetachNum
        TotalTime
FROM  dbo. ViewAccJobDoneDaily
WHERE Fk_JobDonePeriod = @Fk_JobDonePeriod and IsOk=1 AND IsDel=0 AND Fk_ActivityType=2

OPEN CUR
FETCH NEXT FROM CUR INTO @Fk_JobDoneDaily,@Fk_ExecCarInOwner,@Fk_ActivityType
    ,@Fk_CostSrc,@Fk_ShiftNum,@Fk_WorkGroup,@DetachNum,@TotalTime 
```

**错误：消息 16924，级别 16，状态 1，第 52 行 Cursorfetch：INTO 列表中声明的变量数必须与所选列的数匹配。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T07:31:36.250

你错过了一个逗号：

```
SELECT PkJobDoneDaily_Id
   , Fk_ExecCarInOwner
   , Fk_ActivityType
   , Fk_CostSrc
   , Fk_ShiftNum
   , Fk_WorkGroup
   , DetachNum
    TotalTime --<-- Here 
```

因此，您选择的是 7 列，而不是选择 8 列，最后一个列的别名为`TotalTime`to。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T07:30:52.637

`DetachNum`选择列和之间缺少逗号`TotalTime`。

备注：也许您也应该检查您的选择列 PkJobDoneDaily_Id 是否与变量 @Fk_JobDoneDaily 具有相同的名称以避免混淆（名称以 P 与 F 开头）。

# linux - 在 Lapack 中链接错误未定义对“dgels_”的引用

> ID：15152578
> 
> 赞同：4
> 
> 时间：2013-03-01T07:19:26.327
> 
> 标签：linux, lapack

我按照下面的网页在 linux 中安装 ATLAS + Lapack ：

[http://math-atlas.sourceforge.net/atlas_install/node6.html](http://math-atlas.sourceforge.net/atlas_install/node6.html)

```
bunzip2 -c atlas3.10.1.tar.bz2 | tar xfm -    # create SRCdir
mv ATLAS ATLAS3.10.1                          # get unique dir name
cd ATLAS3.10.1                                # enter SRCdir
mkdir Linux_C2D64SSE3                         # create BLDdir
cd Linux_C2D64SSE3                            # enter BLDdir
../configure -b 64 -D c -DPentiumCPS=2400 \   # configure command
  --prefix=/home/whaley/lib/atlas \           # install dir
  --with-netlib-lapack-tarfile=/home/whaley/dload/lapack-3.4.2.tgz
make build                                    # tune & build lib
make check                                    # sanity check correct answer
make ptcheck                                  # sanity check parallel
make time                                     # check if lib is fast
make install                                  # copy libs to install dir 
```

[之后，我尝试在http://www.netlib.org/lapack/lapacke.html](http://www.netlib.org/lapack/lapacke.html)中运行示例

示例代码：

```
#include <stdio.h>
#include <lapacke.h>

int main (int argc, const char * argv[])
{
   double a[5*3] = {1,2,3,4,5,1,3,5,2,4,1,4,2,5,3};
   double b[5*2] = {-10,12,14,16,18,-3,14,12,16,16};
   lapack_int info,m,n,lda,ldb,nrhs;
   int i,j;
   m = 5;
   n = 3;
   nrhs = 2;
   lda = 5;
   ldb = 5;

   info = LAPACKE_dgels(LAPACK_COL_MAJOR,'N',m,n,nrhs,a,lda,b,ldb);

   for(i=0;i<n;i++)
   {
      for(j=0;j<nrhs;j++)
      {
         printf("%lf ",b[i+ldb*j]);
      }
      printf("\n");
   }
   return(info);
} 
```

我发现构建库没有 iblapacke.a ，所以我通过 myslef 构建了这个库

```
cd lapack-3.4.2
cp make.inc.example make.inc
cd lapacke
make 
```

然后，我终于有了 iblapacke.a，所以我编译了上面的示例：

```
g++ test3.cpp liblapacke.a -o test3.exe 
```

我收到以下错误：

```
liblapacke.a(lapacke_dgels_work.o): In function `LAPACKE_dgels_work':
lapacke_dgels_work.c:(.text+0x1dd): undefined reference to `dgels_'
lapacke_dgels_work.c:(.text+0x2b7): undefined reference to `dgels_' 
```

谷歌后，我发现： http: [//www.netlib.org/lapack/explore-html/d7/d3b/group__double_g_esolve.html](http://www.netlib.org/lapack/explore-html/d7/d3b/group__double_g_esolve.html)

```
Functions/Subroutines 
subroutine  dgels (TRANS, M, N, NRHS, A, LDA, B, LDB, WORK, LWORK, INFO) 
  DGELS solves overdetermined or underdetermined systems for GE matrices 
```

有一个函数 dgels ，没有下划线，并且在

[http://shtools.ipgp.fr/www/faq.html#l4](http://shtools.ipgp.fr/www/faq.html#l4)

我认为下划线是为了意外而添加的，

```
nm -A liblapacke.a |grep "dgels_"

liblapacke.a:lapacke_dgels.o:                 U LAPACKE_dgels_work
liblapacke.a:lapacke_dgels_work.o:                 U LAPACKE_dge_trans
liblapacke.a:lapacke_dgels_work.o:0000000000000000 T LAPACKE_dgels_work
liblapacke.a:lapacke_dgels_work.o:                 U LAPACKE_xerbla
liblapacke.a:lapacke_dgels_work.o:                 U dgels_
liblapacke.a:lapacke_dgels_work.o:                 U free
liblapacke.a:lapacke_dgels_work.o:                 U malloc 
```

我想我应该尽量避免在构建 liblapack.a 时避免像构建“dgels”而不是“dgels”这样的下划线，这意味着我应该改变一些构建 Lapack 和 ATLAS 的东西，只是不知道该怎么做......任何建议赞赏！

更新： http: [//software.intel.com/sites/products/documentation/doclib/mkl_sa/11/mkl_lapack_examples/c_bindings.htm](http://software.intel.com/sites/products/documentation/doclib/mkl_sa/11/mkl_lapack_examples/c_bindings.htm)

我不知道是否相关，添加了-Ddgels=dgels_，同样的链接错误！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-27T02:09:27.840

见： http: [//icl.cs.utk.edu/lapack-forum/viewtopic.php ?f=12&t=3336](http://icl.cs.utk.edu/lapack-forum/viewtopic.php?f=12&t=3336)

例如：

```
gcc LinearEquation.c -Ilapack-3.5.0/lapacke/include/ -Llapack-3.5.0 -llapacke -llapack -lrefblas -lgfortran -o LinearEquation 
```

的顺序`lapacke > lapack > refblas`很重要...如果您不想使用双步`gcc gfortran`，请使用`-lgfortran`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-15T02:01:42.857

我遇到了同样的问题（使用 g++），但通过添加 -lblas 和 -lgfortran 解决了我的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-12T16:02:36.113

我有同样的问题。您需要执行以下操作：

```
gcc(or g++) -c -O3 -I ../include -o test.o test.c 
```

接着

```
gfortran test.o ../liblapacke.a ../liblapack.a ../blas.a -o test.exe 
```

然后你可以像这样运行它：

```
./test.exe 
```

基本上，您需要使用 gfortran 编译来遵循 gcc 编译。第一个命令中的 -c 选项强制 gcc 跳过链接器。然后使用 gfortran 链接库。

您可以通过查看 LAPACKE 提供的示例的 makefile 来了解更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-13T11:55:17.153

为了解决这个问题，这是我已经完成的步骤。

1.  `sudo apt-get install libblas-dev liblapack-dev gfortran`
2.  链接 a`-lblas`和`-lgfortran`它何时运行

# c# - 如何在网格视图中获取可见行数？

> ID：15152579
> 
> 赞同：0
> 
> 时间：2013-03-01T07:19:42.733
> 
> 标签：c#, .net, gridview

我有 GridView，其中有可见行和不可见行，

但我只想计算该网格中的可见行

我试过这个

```
int rowCount = gv_SPAvailable.Rows.Count(row => row.IsVisible); 
```

但是我无法获得，有没有其他方法，请任何人帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T07:26:49.987

尝试这个：

```
int rowCount = gv_SPAvailable.Rows.GetRowCount(DataGridViewElementStates.Visible); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:22:35.303

这些代码也工作正常

```
 int numVisible = 0; 
        foreach(GridViewRow row in gv_SPAvailable.Rows) 
        { 
            if(row.Visible == true) 
            { 
                numVisible += 1; 
            } 
        } 
```

# ios - 在未越狱的 ipad 上测试开发 ipa 文件

> ID：15152580
> 
> 赞同：-1
> 
> 时间：2013-03-01T07:19:44.777
> 
> 标签：ios, jailbreak, provisioning, ipa

我正在为客户开发一个应用程序并在他的设备上显示它我向他发送了应用程序的 ipa 文件，他的设备已越狱，他成功地将文件安装在他的设备上。但现在他想在未越狱的设备上安装应用程序，我有设备 UDID，我将该设备添加到新的配置文件并使用该配置文件重建应用程序。并重新创建了一个新的 ipad 文件。但这也没有帮助，他无法安装文件。
有没有办法在未越狱的设备上测试 ipa 文件？
如果有人可以帮助我，我将不胜感激
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:07:35.100

您需要在 iTunes 连接帐户的设备部分添加 UDID，然后创建一个选择设备的 adHoc 配置文件，然后使用此配置文件在 XCode 中存档应用程序，然后向他发送 ipa 和配置文件。如果你想要有一个很棒的网站[http://testflightapp.com](http://testflightapp.com)允许你发送 ipa OTA，并且有很多关于如何创建和发送 ipa 的解释。

# c# - FFMPEG - windows - MJPEG 流 - 转换为 MP4 并重新流式传输 - C# - 新手

> ID：15152582
> 
> 赞同：0
> 
> 时间：2013-03-01T07:19:52.963
> 
> 标签：c#, ffmpeg, video-streaming, mjpeg, ip-camera

我是一个处理视频和东西的新手。

使用松下 IP cam (WV-ns-202A) 进行项目，这将是 MJPEG 流的来源。

我需要在**IIS下的****ASP.net、C#** Web 应用程序上显示此内容，并将其存储在文件系统中。

 **到目前为止，已经尝试了一些**ffmpeg/vlc**的东西并没有多大帮助。

（尝试 #transcoding 到 flv 并保存在本地文件系统中 - 成功 #transcoding 并通过 http 重新流式传输 - 失败 #transcoding with vlc & streaming (sout) - 失败）

看起来我迷路了。

我必须需要一个媒体服务器来流式传输这个还是我可以用 ffmpeg 本身管理？一台相机给一个用户，在任何时候都没有用户超过这个数量。

任何帮助表示赞赏 - 指南、示例代码、链接、c#、

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-27T19:20:54.453

我已经使用 Panasonic 提供的 Active X API/SDK 解决了这个问题。早些时候，我们在为特定模型寻找资源时遇到了问题。谢谢！。**

# c++ - 指针函数

> ID：15152583
> 
> 赞同：0
> 
> 时间：2013-03-01T07:20:01.397
> 
> 标签：c++, function, pointers

有人可以解释这实际上代表什么吗？

```
Foo *getfoo()
{
    return foo_object;
} 
```

`Foo`这是一堂课。我的问题是函数名之前的指针代表什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:28:52.663

有些人喜欢在名称前添加星号。我个人更喜欢这种语法：

```
Foo * getfoo () {
  return foo_object;
} 
```

我认为这更清楚地表明这`Foo *`只是函数返回的类型（就像它可能一样`int`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T07:29:17.597

这意味着该函数返回一个指针。以及`type`该指针是指针之前提到的内容。那就是指针将是 type `Foo`。`Foo`正如您所说，这是 a `class`，**该函数返回一个类对象指针**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T07:38:15.500

正如其他人所指出的，“Foo *”语法意味着函数正在返回指向内存中某个位置的指针，而不是对象本身。

它的含义是，如果你得到这个指针，这意味着 getfoo() 可以为它分配内存。因此，您可能必须自己释放它，否则将在程序运行的整个过程中分配此内存。这称为内存泄漏。

下面是一个释放内存的例子：

```
class Foo {};

Foo *getfoo() {
  Foo *f = new Foo();  // Memory allocated here
  return f;
}

int main () {
  Foo *g = getfoo();
  // some code here

  delete(g); // free the memory as "g" is no longer needed.

  return 0;
} 
```

在 C++ 中，学习管理内存至关重要。否则，您的应用程序迟早会失败。有一些编程模式对此有所帮助，其中最流行的是[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T07:21:41.887

getfoo 函数返回一个对象指针（类 foo）

# javascript - 我如何在带有 html5 的设备中获得相机和麦克风的存在？

> ID：15152586
> 
> 赞同：2
> 
> 时间：2013-03-01T07:20:12.117
> 
> 标签：javascript, jquery, html, webrtc, getusermedia

我正在编写一个使用带有 HMTL5 的摄像头和麦克风的应用程序，我阅读了所有文档以使用带有 getUserMedia、webRTC、webAudio 等 API 的摄像头和麦克风，但我不知道在使用 getusermedia 或任何其他 api 之前如何，我怎么知道是否连接了摄像头或麦克风？

我想根据摄像头或麦克风的连接状态来实现我的应用程序流程。

是否可以获取设备连接状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:24:27.380

如果您查看[示例 2](http://dev.w3.org/2011/webrtc/editor/getusermedia.html#examples)，您会看到相机不可用的异常处理。

# php - 查找每天销量最高的三个产品 php mysql

> ID：15152587
> 
> 赞同：1
> 
> 时间：2013-03-01T07:20:12.323
> 
> 标签：php, mysql

我想找到每天最畅销的三种产品，并将它们与销量一起展示。

但是，如果有多个产品共享相同数量的销售额，我只想知道有多少产品获得了这个排名。

我有两张桌子

```
Products:
+-----+---------+
| Pid | Product |
+-----+---------+
|  1  | Moon    |
|  2  | Sun     |
|  3  | Venus   |
|  4  | Mars    |
+-----+---------+

SalesRows:
+-----+---------+------------+
| Pid | No_sold | Sales_date |
+-----+---------+------------+
|  1  |    1    | 2013-01-01 |
|  2  |    5    | 2013-01-01 |
|  3  |    2    | 2013-01-01 |
|  2  |    2    | 2013-01-01 |
+-----+---------+------------+ 
```

应该给：

```
+------+--------------+-------+
| Rank | Product      | Sales |
+------+--------------+-------+
|  1   | Sun          |   7   |
|  2   | Venus        |   2   |
|  3   | Moon         |   1   |
+------+--------------+-------+ 
```

然而这个销售数据：

```
SalesRows:
+-----+---------+------------+
| Pid | No_sold | Sales_date |
+-----+---------+------------+
|  1  |    1    | 2013-01-01 |
|  2  |    5    | 2013-01-01 |
|  3  |    2    | 2013-01-01 |
|  2  |    2    | 2013-01-01 |
|  4  |    1    | 2013-01-01 |
+-----+---------+------------+ 
```

应该给：

```
+------+--------------+-------+
| Rank | Product      | Sales |
+------+--------------+-------+
|  1   | Sun          |   7   |
|  2   | Venus        |   2   |
|  3   | *2 products* |   1   |
+------+--------------+-------+ 
```

任何建议如何解决这最后一部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:43:30.123

此查询可能会对您有所帮助。

```
SELECT @rownum := @rownum + 1 rownum, 
       t.* 
  FROM (SELECT @rownum:=0) r, 
       (select case when indicator = 1 then Product
else concat( indicator, ' Products') end as Product, sales from (Select *, count(sales) as indicator from (SELECT Product,SUM(No_sold) AS sales FROM SalesRows
JOIN Products ON Products.Pid = SalesRows.Pid
WHERE Sales_date = curdate()
GROUP BY SalesRows.Pid ) a group by sales Order by sales desc) a) t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:26:16.850

尝试这个 ：

```
SELECT Product,SUM(No_sold) AS sales FROM SalesRows 
LEFT JOIN Products ON Products.Pid = SalesRows.Pid
WHERE Sales_date = '".$today."'
GROUP BY Pid 
```

# c++ - 具有给定容错的容器中存在的 find_if 编号

> ID：15152590
> 
> 赞同：0
> 
> 时间：2013-03-01T07:20:34.273
> 
> 标签：c++, stl

有带有数字的容器，它需要查找容器中是否有一个数字等于给定容差内的查询值。有没有办法通过类似于 find_if 方法来实现它以进行比较，例如`bool areEqual(double a, double b, double eps)`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T07:28:07.863

如果可以使用 C++11：

```
bool areEqual(double a, double b, double eps)
{
    return abs(a - b) < eps;
}

int main(int argc, char * argv[])
{
    std::vector<double> myvector;
    myvector.push_back(1.0);
    myvector.push_back(0.0);
    myvector.push_back(2.0);

    double eps = std::numeric_limits<double>::epsilon();
    double value = 0.0;

    std::vector<double>::iterator it = std::find_if (myvector.begin(), 
        myvector.end(), 
        [=](double d) -> bool
            {
                return areEqual(d, value, eps);
            });

    if (it != myvector.end())
        printf("Found value: %f\n", *it);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T07:26:45.980

```
struct CompareFuzzy{
    CompareFuzzy(double qVal, double tolerance = 0.0f):m_tolerance(tolerance),m_qVal(qVal){}

    bool operator()(double a) {return std::abs( a-qVal ) < m_tolerance;}
    private:
    double m_tolerance , m_qVal;    
}

std::find_if(container.begin(),container.end(),CompareFuzzy(5.0, 0.5)); 
```

如上所示，使用[老式仿函数](http://en.wikipedia.org/wiki/Function_object)，如果使用 C++11，则使用 lambda。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-01T07:30:35.987

您可以绑定第二个和第三个参数：

```
std::find_if(
   c.begin(),
   c.end(),
   boost::bind(
       &areEqual,
       _1,
       number,
       eps
   )
); 
```

C ++ 11 std::bind 也应该可以解决问题

# android - 通过 Android 设备发送短信失败

> ID：15152591
> 
> 赞同：3
> 
> 时间：2013-03-01T07:20:39.203
> 
> 标签：android

我正在编写一个应用程序，我试图在其中向收件人发送短信，但每当我点击发送时，都会收到消息：- 短信失败，请稍后再试！

我正在使用模拟器或 Android 设备....

就像您在下面的屏幕截图中看到的那样，我正在尝试向 Pratik 发送消息，该消息保存在我的电话簿联系人中，但是每当我尝试向 Pratik 发送消息时都无法向 Pratik 发送消息

请看下面的屏幕截图，就像你看到的那样，我正在尝试向 Rahul 发送消息......

清单.xml：

```
<uses-permission android:name="android.permission.SEND_SMS" /> 
```

请检查以下代码：

```
 private TextView name;
private ListView list;
private Database db;
private Contact contact;
ImageButton buttonSend;
EditText textSMS;

     protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.editor);

    // bind GUI components
    this.name = (TextView) findViewById(R.id.editor_name);
    this.list = (ListView) findViewById(R.id.editor_list);

    // check if contact id is valid
    this.db = new Database(getContentResolver());
    int contactId = getIntent().getIntExtra(CONTACT_ID, NO_CONTACT_ID);
    this.contact = this.db.getContact(contactId);
    if (this.contact == null) {
        finish();
    }
    this.name.setText(this.contact.getName());

    // pre-load information about all account types
    AuthenticatorDescription[] authTypes = AccountManager.get(this).getAuthenticatorTypes();
    for (AuthenticatorDescription authDesc : authTypes) {
        this.map.put(authDesc.type, authDesc);
    }

    // bind list events
    this.list.setOnItemClickListener(this);
    this.list.setOnCreateContextMenuListener(this);

    // create the GUI
    updateView();

    saveGreeting = (ImageButton) findViewById(R.id.greeting);
    saveGreeting.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            customGreeting(v);
        }
    });
    buttonSend = (ImageButton) findViewById(R.id.buttonSend);
    textSMS = (EditText) findViewById(R.id.editTextSMS);
    buttonSend.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

          String sms = textSMS.getText().toString();

          try {
            SmsManager smsManager = SmsManager.getDefault();
            smsManager.sendTextMessage(CONTACT_ID, null, sms, null, null);
            Toast.makeText(getApplicationContext(), "SMS Sent!",
                        Toast.LENGTH_LONG).show();
          } catch (Exception e) {
            Toast.makeText(getApplicationContext(),
                "SMS faild, please try again later!",
                Toast.LENGTH_LONG).show();
            e.printStackTrace();
          }

        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T07:27:18.863

不要使用收件人姓名发送消息，使用手机号码发送消息。

从联系人列表中获取联系人号码，并在 sendTextMessage 函数中使用该联系人号码而不是姓名。

# android - 无法使用 SMS 获取位置名称

> ID：15152593
> 
> 赞同：0
> 
> 时间：2013-03-01T07:21:01.230
> 
> 标签：android

我无法通过 SMS 获取位置名称。我得到纬度和经度，但不是位置名称。我已经使用地理编码器来获取位置名称。这是我的代码，请告诉我我犯了什么错误。提前致谢。

# php - 我的 ajax 代码不会从 php 发送每一行

> ID：15152594
> 
> 赞同：0
> 
> 时间：2013-03-01T07:21:05.023
> 
> 标签：php, javascript, mysql, ajax

我有一个从数据库答案表中加载数据的 php 代码

php代码：

```
 <?php while ($rowanswer=mysql_fetch_assoc($answer)) :?>
       <div  class="text-soal2">

        <div class="vote-svj">
                <div class="vote-svj-vt3"><a class="voteupa" onclick="" ><img src="images/plus.png" alt="like" title="+"/></a></div>
                <div class="vote-svj-vt2"><?php echo $rowanswer['vote'] ;
                echo $aid=$rowanswer['id'];
                ?></div>
                <div class="vote-svj-vt"><a class="votedowna" ><img src="images/minus.png" alt="dislike" title="-"/></a></div>

           </div>

         <div class="text-javab">

               <p>

             <?php echo $rowanswer['answer'] ?>

               </p>  

      </div><div class="clr"></div>
      <h5>نوشته شده توسط <?php 

      $query1="select username from user where id=$rowanswer[user_id]";
      $senderanswer=mysql_query($query1);
$ssender=mysql_fetch_assoc($senderanswer);

      echo $ssender['username'];

       ?> در تاریخ <?php echo $rowanswer['date'] ?></h5>
   </div>
        <?php endwhile; ?> 
```

我努力将带有 ajax 的 $aid=$rowanswer['id'] 答案 ID 发送到另一个页面，但它只将最后一个帮助发送到另一个页面当我点击它按钮时，如何使用 ajax 发送每一行帮助

阿贾克斯代码：

```
$('.votedowna').click(function(){
$.ajax({
         url : '<?php echo "php_func/answer_vote.php?aid=".$aid ?>',
         type : 'GET',

         data : { send : "dislike"},
        beforeSend : function()
        {
            alert(<?php echo $aid ?>);
            },
        success : function(callback){
            alert(callback);

        })

    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T07:26:36.023

你可以试试这个：

```
<div class="vote-svj-vt"><a class="votedowna" id="<?php echo $rowanswer['id'];"><img src="images/minus.png" alt="不喜欢" title="-"/></a></div>

```

然后在 JS 中只需获取我们在锚标记中添加的那个 id`votedowna`并用 url 传递它。

```
$('.votedowna').click(function(){
varaid = $(this).attr("id");
$.ajax({
         网址：'php_func/answer_vote.php?aid='+aid,
         类型：'GET'，

         数据：{发送：“不喜欢”}，
        发送前：函数（）
        {
            警报（）;
            },
        成功：函数（回调）{
            警报（回调）；

        })

    });

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T07:27:51.480

因为您的`.votedowna`重复次数取决于循环的迭代次数，所以您必须在要如何处理事件之前`while`有一个语句。`.each``click`

```
$('.votedowna').each(function() {
 $(this).click(function() {
  $.ajax( ... 
```

这可能是问题所在。顺便问一下，您是否`while`在 PHP 中创建了 Javascript 代码，或者您有`.js`文件吗？因为如果您使用 JS 文件，那么您必须以不同的方式传递 ajax URL，这意味着您的 Javascript 应该如下所示，

```
$.ajax({
     url : 'php_func/answer_vote.php',
     type : 'GET',

     data : { 
       send : "dislike",
       aid: $(this).parent().parent().find('div.vote-svj-vt2').text(), // This is where you have the aid for this row, you better save it somewhere else though
     },
    beforeSend : function()
    {
        alert('<?php echo $aid ?>');
        },
    success : function(callback){
        alert(callback);

    }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T07:33:31.827

首先，如果你想多次调用一个ajax方法，你可以使用[foreach](http://php.net/manual/en/control-structures.foreach.php)或者[for](http://php.net/manual/en/control-structures.for.php)循环来做。

其次，请不要`mysql_query`在你的脚本中使用，因为它太旧了。改用[PDO](http://php.net/manual/en/book.pdo.php)。

最后，如果您需要在 javascript 中多次选择任何内容，您可以使用 .each() 而不是使用 .click

另外，使用像这样的标准查询编写方法

```
 SELECT username FROM user WHERE id= '$rowanswer[user_id]' 
```

# apache - NginX 对论坛有用吗？NginX 真的很快吗？

> ID：15152595
> 
> 赞同：-1
> 
> 时间：2013-03-01T07:21:09.407
> 
> 标签：apache, nginx, forum

我第一次从共享主机迁移到 VPS，我处于两难境地，想知道我是否需要使用 NginX 或仍然坚持使用 Apache。Atm 我将 Apache 用于在 phpbb 3.0.11 上运行的站点。它有论坛和静态页面。当我在谷歌上搜索 NginX 的信息时，它似乎比 Apache 更快，并且在提供静态页面方面效果很好。所以我的问题是：

1) NginX 适合用于论坛吗？

2) NginX 如何从 MySql 提供动态页面？

3) 与 Apache 相比，NginX 真的很快还是被高估了？

4) 我坚持使用 Apache 还是值得冒险尝试 NginX 为我的 phpbb 论坛？

任何建议请..我处于这样的困境中，我希望对 NginX 和 Apache 有实际经验的人能有所启发！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:09:39.620

如果您了解 Apache，请坚持使用它。Nginx 的学习曲线相当高，如果你还没有进行基本的调优，这里不需要。

确保您正在使用 16M 缓存加载 APC 和 memcached。

使用 APC 进行操作码缓存，使用**acm_memcache**进行变量缓存。

这将使phpBB快 *很多。*

# solr - 具有多字段方面的 Solr 分组

> ID：15152596
> 
> 赞同：1
> 
> 时间：2013-03-01T07:21:13.067
> 
> 标签：solr, lucene

我想知道这是否可以使用**solr 查询**：

1.  需要考虑的两列：location1、location2
2.  想在两列上做一个脸。

下面的查询将起作用：

```
http://localhost:8983/solr/select/? q=*:*&version=2.2&rows=0&facet=true&facet.field=location1&facet.field=location2 
```

**回复：**

```
 <response>
        <lst name="responseHeader">
            <int name="status">0</int>
            <int name="QTime">13</int>
        </lst>
        <result name="response" numFound="7789" start="0"/>
        <lst name="facet_counts">
        <lst name="facet_queries"/>
        <lst name="facet_fields">
        <lst name="location1">
            <int name="Chicago">100</int>
            <int name="NewYork">50</int>
            <int name="Washington">30</int>
        </lst>
        <lst name="location2">
            <int name="Washington">200</int>
            <int name="Philadelphia">100</int>
            <int name="Chicago">50</int>
        </lst>
<response> 
```

我需要的是对 location1 和 location2 进行分组并得到以下结果：

```
Washington  :230
Chicago     :50
Philadelphia:100
Washington  :30 
```

目前我们在服务层做这件事。但这可以使用 solr 中的结果分组来完成吗？我的理解是结果分组提供了所有数据的聚合，但不进行方面主题聚合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:39:52.603

您需要将两者都存储`location1`在`location2`一个多值字段中，例如`locations`. 然后你可以发出这个方面查询来得到你想要的：

```
q=*:*&rows=0&facet=true&facet.field=locations 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:54:18.997

Solr 不支持对多值字段进行[分组。](http://wiki.apache.org/solr/FieldCollapsing)

```
Support for grouping on a multi-valued field has not yet been implemented. 
```

您可能可以使用组合值在索引处创建一个新字段，并将这些字段用于分面。

编辑：- 使用复制字段将两个字段的内容复制到单个字段并对其执行构面。只需要架构更改和数据重新索引

# c++ - 正常块后检测到堆损坏（#174）

> ID：15152609
> 
> 赞同：3
> 
> 时间：2013-03-01T07:22:06.863
> 
> 标签：c++, char, swap, heap-corruption

我知道有人问过这个问题，我无法修复我的程序

```
 void swap1(char*str1,char*str2)
{
    char *ezer =new char[strlen(str1)];
    for (int i = 0 ; i <= strlen(str1);i++)
        ezer[i]=str1[i];
    delete [] str1;
    str1= new char[strlen(str2)];
    for (int i = 0 ; i <= strlen(str2);i++)
        str1[i]=str2[i];
    delete [] str2;
    str2= new char[strlen(ezer)];
    for (int i = 0 ; i <= strlen(ezer);i++)
        str2[i]=ezer[i];
    delete[] ezer;
} 
```

一次第一次在第二次（有其他值）工作时出现错误，错误出现在最后一行`delete[] ezer;`，为什么我不能删除`ezer`？

错误：

```
heap corruption detected after normal block (#174) at 0x007D7A48
CRT detected that the application wrote to memory end of heap buffer 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T07:31:15.127

strlen 不计算字符串末尾的空终止符。这意味着在您的交换函数应用一次之后，两个字符串将被交换，但将不再以空值结尾。strlen 在没有空终止符的字符串上的行为是未定义的，这意味着当您遍历其中一个被屠杀的字符串时，您正在分配堆的边界之外运行。

C 中的字符串表示为带有零值字节的字符指针，指示字符串的结尾（我提到的空终止符）。任何对“字符串”进行操作的库例程都需要提供一个以 null 结尾的字符数组，否则将具有未定义的行为（因为此时您将提供一个 char 数组，而不是字符串）。

使用库函数 strcpy 而不是自己滚动。

有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/5941617/heap-corruption-while-freeing-memory)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:57:02.800

您在这里缺少为 0 终止符分配空间：

```
char *ezer = new char[strlen(str1)]; 
```

将其更改为：

```
char *ezer = new char[strlen(str1) + 1]; 
```

实际的（第一次）内存损坏发生在这里：

```
 for (int i = 0 ; i <= strlen(str1);i++)
    ezer[i]=str1[i]; 
```

与最后一次迭代（复制 0 终止符的那个）一样，指的`ezer[i]`是内存“就在”分配给`ezer`.

对字符数组c 的其他两个分配重做相同的操作。

无论如何，由于这将修复堆损坏，因此该函数不会按预期运行。但这是另一个故事……不是吗？;-)

# reflection - 是否有满足这些要求的编程语言？

> ID：15152611
> 
> 赞同：2
> 
> 时间：2013-03-01T07:22:06.597
> 
> 标签：reflection, programming-languages, requirements

在实现我的下一个程序之前，我有一些要求 - 希望存在一种可以执行以下操作的编程语言：

1.  给定一个类（或接口）C，编程语言允许用户访问扩展/实现 C 的所有类的列表。
2.  编程语言允许用户遍历类的所有变量和方法。
3.  用户能够确定函数将采用的参数的数量和类型。

    ```
    eg. foo(int a, String b, int c) can be queried 
    to return 3 or [int, String, int] 
    ```

这些是荒谬的要求，还是某些语言将它们作为基本的反射技术来实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:12:06.133

我希望大多数 Lisp 系统（Scheme、CommonLisp、...）能够满足这些要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:35:50.330

我知道你更喜欢静态类型的语言，但如果你认为动态类型的 Smalltalk 可能是一个不错的选择，因为一切都是对象（类和方法也不例外），因此一切都可以被操纵（不仅查询，而且更改）。满足您的要求：

> 给定一个类（或接口）C，编程语言允许用户访问扩展/实现 C 的所有类的列表。

在 Smalltalk 中没有内置的接口概念（尽管我认为我已经看到了增加对它的支持的扩展）。但是，您可以：

*   给定一个类，找到它的直接子类：`Number subclasses`answers `{Fraction. Float. Integer}`。
*   或者它下面的所有层次结构：`Number allSubclasses` 答案`an OrderedCollection(Fraction Float Integer ScaledDecimal SmallInteger LargePositiveInteger LargeNegativeInteger)`

您还可以找到所有实现给定选择器的类（`pop`在本例中）：

`SystemNavigation default allClassesImplementing: #pop`答案`{ContextPart. FileSystemGuide. LIFOQueue. Stack}`

如您所见，定义一个“接口”对象来查询实现一组方法的类非常容易（只需拥有一组方法名称并查询实现每个方法的类，将类添加到集合中）。但是，如果您想在类中明确声明它实现了一个接口，那么您需要做更多的工作。

> 编程语言允许用户遍历类的所有变量和方法。

`Point instVarNames`答案`#('x' 'y')`

`Point allMethods`回答 s 的集合`CompiledMethod`（表示方法的对象）

`Point allSelectors`回答该类的实例可以回答的所有方法名称的集合。

> 用户能够确定函数将采用的参数的数量和类型。

在这种情况下，您与已编译的方法进行交互并询问它们所需的参数数量（没有参数类型的概念）：

`(Point methodNamed: #x) numArgs`答案为 0，因为它只是一个吸气剂。

`(Point methodNamed: #+) numArgs`答案 1

这只是 Smalltalk 反射能力的一个小预览；如果您想更深入，可以查看其中一些链接：

*   [Smalltalk-80 中的反射设施](http://www.laputan.org/ref89/ref89.html)
*   [评估 Smalltalk 中的消息传递控制技术](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.67.3949&rep=rep1&type=pdf)
*   [调试对象](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.57.3575)

高温高压

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-01T10:31:49.080

Java 可以做到这一点。但是，请注意，**没有任何**语言可以：

> 给定一个类（或接口）C，编程语言允许用户访问扩展/实现 C 的所有类的列表

原因是扩展 C 的类的数量是零（在最终类的情况下）或无限的。在后一种情况下，这是常态，实际上只有一小部分扩展 C 的类被写下来和编译，而且只有那些你可以访问的。

# android - 从活动中获取 TabSpec id

> ID：15152620
> 
> 赞同：1
> 
> 时间：2013-03-01T07:22:52.777
> 
> 标签：android, android-tabhost, android-tabactivity

我在包含 4 个选项卡的 Android 应用程序中使用了一个 tabhost。我正在从所有这 4 个选项卡导航到相同的活动。所以我需要区分这 4 个标签。

如何从被调用的活动中获取标签（在创建 tabspec 时指定）？

# c# - 继承 SplitterPanel

> ID：15152630
> 
> 赞同：0
> 
> 时间：2013-03-01T07:23:45.943
> 
> 标签：c#, .net, winforms, .net-4.0, splitterpanel

我有以下 C# 类：

```
class BufferedSplitPanel : SplitterPanel
{
    public BufferedSplitPanel()
    {
         this.DoubleBuffered = true;
    }
} 
```

但是编译器（和 Intellisense）告诉我`this`没有这样的成员`DoubleBuffered`（或任何其他成员）。MSDN 明确声明它确实如此，因为它继承自 Panel。如果我将其更改`SplitterPanel`为`Panel`编译。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T07:29:20.917

[`SplitterPanel`](http://msdn.microsoft.com/en-us/library/system.windows.forms.splitterpanel.aspx)是`sealed`类而[`Panel`](http://msdn.microsoft.com/en-us/library/system.windows.forms.panel.aspx)不是类。

你不能从`sealed`类型派生。

> [文档](http://msdn.microsoft.com/en-us/library/88c54tsw%28v=vs.71%29.aspx)：
> 
> 密封类不能被继承。使用密封类作为基类是错误的。在类声明中使用sealed 修饰符来防止类的继承。

如果你想扩展`sealed`类的功能，最好的方法 [IMO] 是创建[扩展方法](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)。例如：

```
public static class SplitterPanelExtensions {
    public static void MyAdvancedMethod(this SplitterPanel splitterPanel) {
        /*
         * Check if splitterPanel is null and throw ArgumentNullException.
         * because extension methods are called via "call" IL instruction.
         */
        //Implementation.
    }

    //Other extension methods...
} 
```

另一种方法是创建将保存密封类实例的类。如果您想隐藏要包装的类接口的某些部分，这是一个更好的选择。例如：

```
public class SplitterPanelWrapper {
    private readonly SplitterPanel m_SplitterPanel;

    public SplitterPanelWrapper(SplitterPanel splitterPanel) {
        m_SplitterPanel = splitterPanel;
    }

    //Other implementation. 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T07:28:33.303

[我在MSDN 文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.splitterpanel.aspx)中看不到任何 DoubleBuffered 属性。你确定你需要那个属性吗？使用它似乎也没有多大意义。

除此之外，MSDN 还说该类是**seal**。你不能从中得到。你应该得到编译器错误。

# ios - iOS更改目标名称

> ID：15152632
> 
> 赞同：26
> 
> 时间：2013-03-01T07:23:49.863
> 
> 标签：ios, xcode

在 iOS 项目中，我更改了目标名称。但是对于构建，在左上角（在停止按钮旁边），它仍然只显示旧的目标名称......我应该改变什么以便旧的项目名称将从 XCode 中完全消失？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-01T07:28:41.527

![管理计划](../Images/81349f07a3bc02cf0334de7b7ac16912.png)

![设置名称](../Images/d5b006e5751b2248f6a9e47d580a6a68.png)

只需单击停止按钮旁边的目标名称 > 管理方案 > 选择并更改名称

![改名](../Images/68a398d0ce56f6acf9fddb476f50b5bf.png)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2017-12-06T07:02:45.873

从 TARGETS（左侧导航栏中）中选择您的目标并双击，然后重命名它。

[![在此处输入图像描述](../Images/055bcfdbcdfddd554a082a5cb5e02b8d.png)](https://i.stack.imgur.com/9WE1E.png)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-05-15T13:04:27.920

如果要更改项目名称、目标名称、-Info.plist 名称和 -Prefix.pch 名称，

```
 - Select Project in Xcode (.xcodeproj file)
    - Selecte file inspector
    - In identity section change project name which u want to update & press enter
    - After scanning whole project it will ask to change the file names i.e target, plist & pch file
    - Select check boxes as per your need 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-08-04T16:48:12.280

**目标名称（TARGET_NAME）**

要更改 a `Target name(TARGET_NAME)`，您可以：

*   重命名过`target`孔`Project Settings`（双击或按回车键）

![](../Images/a2181fb923141f9f8709bd186885129a.png)

同样在更改目标名称后，您可以：

*   重命名`schema`通过`Manage Schemas...`-> 选择 -> 按回车键

![](../Images/a139e5dee430b1e3bc9c2a3492ef25c9.png)

*   `Group`通过重命名根`Navigator`。在这种情况下，您应该解决可能由过时路径引起的错误。例如：

    *   `Info.plist`(INFOPLIST_FILE) 或

        ```
        Build input file cannot be found: '<some_path>/Info.plist' 
        ```

    *   `Bridging Header`(SWIFT_OBJC_BRIDGING_HEADER) 或

        ```
        error opening input file '<some_path>/<module_name>-Bridging-Header.h' (No such file or directory) 
        ```

    *   将伞头从私有范围移动到公共范围或

        ```
        Umbrella header '<name>.h' not found 
        ```

![](../Images/283b014f0a133a6cea2622b6476fa5ba.png)

[[Xcode 组件]](https://stackoverflow.com/a/59215808/4770877)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-03-01T07:28:17.500

要使目标名称的更改生效，您可以转到管理方案，然后删除所有旧目标。然后点击“立即自动创建方案”

# json - perl Mojo 和 JSON 用于同时请求

> ID：15152633
> 
> 赞同：3
> 
> 时间：2013-03-01T07:23:50.350
> 
> 标签：json, perl, mojolicious, mojo

我通常不是 Perl 编码器。但是我必须完成这个任务。

以下代码适用于我：

```
#!/usr/bin/perl

use LWP::UserAgent;
use JSON;
use strict;

my $md5 = $ARGV[0];
$md5 =~ s/[^A-Fa-f0-9 ]*//g;
die "invalid MD5" unless ( length($md5) == 32 );

my $ua = LWP::UserAgent->new(ssl_opts => { verify_hostname => 1 }, timeout => 10);
my $key="12345...7890";
my $url='https://www.virustotal.com/vtapi/v2/file/report';
my $response = $ua->post( $url, ['apikey' => $key, 'resource' => $md5] );
die "$url error: ", $response->status_line unless $response->is_success;
my $results=$response->content;

my $json = JSON->new->allow_nonref;
my $decjson = $json->decode( $results);

print "md5: ",$md5,"\n";
print "positives: ", $decjson->{"positives"}, "\n";
print "total: ", $decjson->{"total"}, "\n";
print "date: ", $decjson->{"scan_date"}, "\n"; 
```

现在我想重新编码上面的代码，以便使用 Mojo 使用异步 http。我正在尝试这个：

```
#!/usr/bin/perl

use warnings;
use strict;
use Mojo;
use Mojo::UserAgent;

my $md5 = $ARGV[0];
$md5 =~ s/[^A-Fa-f0-9 ]*//g;
die "invalid MD5" unless ( length($md5) == 32 );

my ($vt_positives, $vt_scandate, $response_vt);
my $url='https://www.virustotal.com/vtapi/v2/file/report';
my $key="12345...7890";
my $ua = Mojo::UserAgent->new;
my $delay = Mojo::IOLoop->delay;

$ua->max_redirects(0)->connect_timeout(3)->request_timeout(6);
$ua->max_redirects(5);
$delay->begin;

$response_vt = $ua->post( $url => ['apikey' => $key, 'resource' => $md5] => sub {
    my ($ua, $tx) = @_;
    $vt_positives=$tx->res->json->{"positives"};
    print "Got response: $vt_positives\n";
    });

Mojo::IOLoop->start unless Mojo::IOLoop->is_running; 
```

第一个代码可以，第二个代码不起作用。我在发送请求时一定做错了，因为我似乎收到了 403 响应（API 使用不正确）。我也尝试过 -> json 调用，但没有成功。

即使我正确完成了请求，我也不确定我是否使用 Mojo 正确解码了 json 结果。

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T21:07:37.733

**编辑**

似乎我们错过了真正的问题，即如何发布表单。哎呀对不起。

发布表格取决于您使用的 Mojolicious 版本。[直到最近](https://github.com/kraih/mojo/blob/master/Changes#L33)（v3.85 -- 2013-02-13）还有一种`post_form`方法。然而，经过反思，我们决定要么应该`*_form`为每种请求类型提供方法，要么我们应该做一些更聪明的事情，因此[`form`生成器](https://metacpan.org/module/Mojo%3a%3aUserAgent#post)诞生了。

```
$response_vt = $ua->post( 
  $url, 
  form => {'apikey' => $key, 'resource' => $md5}, 
  sub { ... }
); 
```

它可以添加到任何请求方法中，使其比旧形式更加一致。另请注意，它应该是 hashref，而不是 LWP 允许的 arrayref。顺便说一句，还有一个`json`像这样工作的生成器，或者你甚至可以[添加你自己的](https://metacpan.org/module/Mojo%3a%3aUserAgent%3a%3aTransactor#add_generator)！

我将留下我原来的答案，显示非阻塞用法，您现在可以根据上述内容进行修改。

**原来的**

从 creaktive 建立逻辑，这就是我要开始的方式。主要区别在于没有监视器在监视以确保有工作进行，而是在完成时检查以确保没有闲人。

我也在解析逻辑上做了一些改变，但没什么大不了的。

```
#!/usr/bin/env perl
use Mojo::Base -strict;
use utf8::all;

use Mojo::URL;
use Mojo::UserAgent;

# FIFO queue
my @urls = qw(
    http://sysd.org/page/1/
    http://sysd.org/page/2/
    http://sysd.org/page/3/
);

# User agent following up to 5 redirects
my $ua = Mojo::UserAgent
    ->new(max_redirects => 5)
    ->detect_proxy;

start_urls($ua, \@urls, \&get_callback);

sub start_urls {
  my ($ua, $queue, $cb) = @_;

  # Limit parallel connections to 4
  state $idle = 4;
  state $delay = Mojo::IOLoop->delay(sub{say @$queue ? "Loop ended before queue depleated" : "Finished"});

  while ( $idle and my $url = shift @$queue ) {
    $idle--;
    print "Starting $url, $idle idle\n\n";

    $delay->begin;

    $ua->get($url => sub{ 
      $idle++; 
      print "Got $url, $idle idle\n\n"; 
      $cb->(@_, $queue); 

      # refresh worker pool
      start_urls($ua, $queue, $cb); 
      $delay->end; 
    });

  }

  # Start event loop if necessary
  $delay->wait unless $delay->ioloop->is_running;
}

sub get_callback {
    my ($ua, $tx, $queue) = @_;

    # Parse only OK HTML responses
    return unless 
        $tx->res->is_status_class(200)
        and $tx->res->headers->content_type =~ m{^text/html\b}ix;

    # Request URL
    my $url = $tx->req->url;
    say "Processing $url";
    parse_html($url, $tx, $queue);
}

sub parse_html {
    my ($url, $tx, $queue) = @_;

    state %visited;

    my $dom = $tx->res->dom;
    say $dom->at('html title')->text;

    # Extract and enqueue URLs
    $dom->find('a[href]')->each(sub{

        # Validate href attribute
        my $link = Mojo::URL->new($_->{href});
        return unless eval { $link->isa('Mojo::URL') };

        # "normalize" link
        $link = $link->to_abs($url)->fragment(undef);
        return unless grep { $link->protocol eq $_ } qw(http https);

        # Don't go deeper than /a/b/c
        return if @{$link->path->parts} > 3;

        # Access every link only once
        return if $visited{$link->to_string}++;

        # Don't visit other hosts
        return if $link->host ne $url->host;

        push @$queue, $link;
        say " -> $link";
    });
    say '';

    return;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:35:55.513

LWP::UserAgent 将参数作为引用到数组或引用到散列格式发布。

[http://search.cpan.org/~gaas/libwww-perl-6.04/lib/LWP/UserAgent.pm#REQUEST_METHODS](http://search.cpan.org/~gaas/libwww-perl-6.04/lib/LWP/UserAgent.pm#REQUEST_METHODS)

```
$ua->post( $url, \%form )
$ua->post( $url, \@form ) 
```

您在 ref 中的第一个脚本中提供的数组格式“\@form”

```
my $response = $ua->post( $url, ['apikey' => $key, 'resource' => $md5] ); 
```

因为它是一个散列，所以最好用散列格式“\%form”编写

```
my $response = $ua->post( $url, {'apikey' => $key, 'resource' => $md5} ); 
```

在 Mojo::UserAgent 中，要发布的参数稍微复杂一些，但本质上似乎是哈希键的哈希引用的“字符串”，我对此并不熟悉。但是，您可能会发现使用 hash ref 格式正确地提供了预期的参数。

[http://search.cpan.org/~sri/Mojolicious-3.87/lib/Mojo/UserAgent.pm#post](http://search.cpan.org/~sri/Mojolicious-3.87/lib/Mojo/UserAgent.pm#post)

```
POST

my $tx = $ua->post('kraih.com');
my $tx = $ua->post('http://kraih.com' => {DNT => 1} => 'Hi!');
my $tx = $ua->post('http://kraih.com' => {DNT => 1} => form => {a => 'b'});
my $tx = $ua->post('http://kraih.com' => {DNT => 1} => json => {a => 'b'}); 
```

试试这个 ？：

```
$response_vt = $ua->post( $url => form => {'apikey' => $key, 'resource' => $md5} => sub {... }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T18:09:14.593

看看我写的这个基于 Mojolicious 的并发请求网络爬虫来说明我的文章[Web Scraping with Modern Perl](http://blogs.perl.org/users/stas/2013/01/web-scraping-with-modern-perl-part-1.html)：

```
#!/usr/bin/env perl
use 5.010;
use open qw(:locale);
use strict;
use utf8;
use warnings qw(all);

use Mojo::UserAgent;

# FIFO queue
my @urls = map { Mojo::URL->new($_) } qw(
    http://sysd.org/page/1/
    http://sysd.org/page/2/
    http://sysd.org/page/3/
);

# Limit parallel connections to 4
my $max_conn = 4;

# User agent following up to 5 redirects
my $ua = Mojo::UserAgent
    ->new(max_redirects => 5)
    ->detect_proxy;

# Keep track of active connections
my $active = 0;

Mojo::IOLoop->recurring(
    0 => sub {
        for ($active + 1 .. $max_conn) {

            # Dequeue or halt if there are no active crawlers anymore
            return ($active or Mojo::IOLoop->stop)
                unless my $url = shift @urls;

            # Fetch non-blocking just by adding
            # a callback and marking as active
            ++$active;
            $ua->get($url => \&get_callback);
        }
    }
);

# Start event loop if necessary
Mojo::IOLoop->start unless Mojo::IOLoop->is_running;

sub get_callback {
    my (undef, $tx) = @_;

    # Deactivate
    --$active;

    # Parse only OK HTML responses
    return
        if not $tx->res->is_status_class(200)
        or $tx->res->headers->content_type !~ m{^text/html\b}ix;

    # Request URL
    my $url = $tx->req->url;

    say $url;
    parse_html($url, $tx);

    return;
}

sub parse_html {
    my ($url, $tx) = @_;

    say $tx->res->dom->at('html title')->text;

    # Extract and enqueue URLs
    for my $e ($tx->res->dom('a[href]')->each) {

        # Validate href attribute
        my $link = Mojo::URL->new($e->{href});
        next if 'Mojo::URL' ne ref $link;

        # "normalize" link
        $link = $link->to_abs($tx->req->url)->fragment(undef);
        next unless grep { $link->protocol eq $_ } qw(http https);

        # Don't go deeper than /a/b/c
        next if @{$link->path->parts} > 3;

        # Access every link only once
        state $uniq = {};
        ++$uniq->{$url->to_string};
        next if ++$uniq->{$link->to_string} > 1;

        # Don't visit other hosts
        next if $link->host ne $url->host;

        push @urls, $link;
        say " -> $link";
    }
    say '';

    return;
} 
```

# ajax - Ajax 调用 WebMethod

> ID：15152636
> 
> 赞同：1
> 
> 时间：2013-03-01T07:24:01.187
> 
> 标签：ajax, webmethod

我动态地创建了 Accrodions，每个窗格内都有一个链接按钮。我已经为链接按钮的 ID 分配了一个值。我想要完成的是，当我单击其中一个窗格中的链接按钮时，我想使用 ID' 值作为参数。

我的阿贾克斯：

```
function FireThisEvent() {
    var Value;

        $("lnkCopy").click(function(event) {Value = (event.target.id);})
        alert(Value);
        alert(lnkCopy.val());
        $.ajax({
            type: "POST",
            url: "frmSchemeSetup.aspx/sbGetData",
            data: '{sdPreNo: Value}',
            type: "POST",
            contentType: "application/json; charset=utf-8",
            dataType: "JSON",
            timeout: 10000,
            success: function() {
                alert("YEAH!!!");
            },
            error: function(xhr, status) {
                alert(status + " - " + xhr.responseText);
            }
        });

    } 
```

我怎样才能做到这一点？

这是我将事件添加到链接按钮的地方

```
lnkCopy.Attributes.Add("onclick", "FireThisEvent()") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:35:48.450

[在下面这篇文章](https://stackoverflow.com/questions/1916309/pass-multiple-parameters-to-jquery-ajax-call)的帮助下，我设法让我的 Ajax 调用我的 WebMethod 。

# tomcat7 - 删除Tomcat7中的临时文件

> ID：15152638
> 
> 赞同：0
> 
> 时间：2013-03-01T07:24:08.693
> 
> 标签：tomcat7

我在服务器中安装了tomcat7。我们在其中有一个应用程序。现在应用程序崩溃了。当我们尝试登录时，会话没有被创建。所以我正在考虑删除`temp`TOMCAT7 主文件夹下的文件。

现在我的问题，

1.  删除临时文件夹是否安全？
2.  删除后会不会有问题？

这是日志`catalina.log`

```
`Mar 01, 2013 2:13:16 AM org.apache.catalina.core.AprLifecycleListener init
INFO: Loaded APR based Apache Tomcat Native library 1.1.24 using APR version 1.4.6.
Mar 01, 2013 2:13:16 AM org.apache.catalina.core.AprLifecycleListener init
INFO: APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true].
Mar 01, 2013 2:13:17 AM org.apache.catalina.core.AprLifecycleListener initializeSSL
INFO: OpenSSL successfully initialized (OpenSSL 1.0.1c 10 May 2012)
Mar 01, 2013 2:13:18 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-apr-8081"]
Mar 01, 2013 2:13:18 AM org.apache.coyote.AbstractProtocol init
SEVERE: Failed to initialize end point associated with ProtocolHandler ["http-apr-8081"]
 java.lang.Exception: Socket bind failed: [730048] Only one usage of each socket address (protocol/network address/port) is normally permitted.  
at org.apache.tomcat.util.net.AprEndpoint.bind(AprEndpoint.java:423)
at org.apache.tomcat.util.net.AbstractEndpoint.init(AbstractEndpoint.java:610)
at org.apache.coyote.AbstractProtocol.init(AbstractProtocol.java:429)
at org.apache.catalina.connector.Connector.initInternal(Connector.java:981)
at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
at org.apache.catalina.core.StandardService.initInternal(StandardService.java:559)
at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
at org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:814)
at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
at org.apache.catalina.startup.Catalina.load(Catalina.java:624)
at org.apache.catalina.startup.Catalina.load(Catalina.java:649)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:281)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)

   Mar 01, 2013 2:13:18 AM org.apache.catalina.core.StandardService initInternal
   SEVERE: Failed to initialize connector [Connector[HTTP/1.1-8081]]
   org.apache.catalina.LifecycleException: Failed to initialize component [Connector[HTTP/1.1-8081]]
at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:106)
at org.apache.catalina.core.StandardService.initInternal(StandardService.java:559)
at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
at org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:814)
at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
at org.apache.catalina.startup.Catalina.load(Catalina.java:624)
at org.apache.catalina.startup.Catalina.load(Catalina.java:649)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:281)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
    Caused by: org.apache.catalina.LifecycleException: Protocol handler initialization failed
at org.apache.catalina.connector.Connector.initInternal(Connector.java:983)
at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
... 12 more
    Caused by: java.lang.Exception: Socket bind failed: [730048] Only one usage of each socket address (protocol/network address/port) is normally permitted.  
at org.apache.tomcat.util.net.AprEndpoint.bind(AprEndpoint.java:423)
at org.apache.tomcat.util.net.AbstractEndpoint.init(AbstractEndpoint.java:610)
at org.apache.coyote.AbstractProtocol.init(AbstractProtocol.java:429)
at org.apache.catalina.connector.Connector.initInternal(Connector.java:981)
... 13 more

  Mar 01, 2013 2:13:18 AM org.apache.coyote.AbstractProtocol init
  INFO: Initializing ProtocolHandler ["ajp-apr-8010"]
  Mar 01, 2013 2:13:18 AM org.apache.coyote.AbstractProtocol init
  SEVERE: Failed to initialize end point associated with ProtocolHandler ["ajp-apr-8010"]
   java.lang.Exception: Socket bind failed: [730048] Only one usage of each socket address (protocol/network address/port) is normally permitted.  
at org.apache.tomcat.util.net.AprEndpoint.bind(AprEndpoint.java:423)
at org.apache.tomcat.util.net.AbstractEndpoint.init(AbstractEndpoint.java:610)
at org.apache.coyote.AbstractProtocol.init(AbstractProtocol.java:429)
at org.apache.catalina.connector.Connector.initInternal(Connector.java:981)
at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
at org.apache.catalina.core.StandardService.initInternal(StandardService.java:559)
at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
at org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:814)
at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
at org.apache.catalina.startup.Catalina.load(Catalina.java:624)
at org.apache.catalina.startup.Catalina.load(Catalina.java:649)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:281)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)

    Mar 01, 2013 2:13:18 AM org.apache.catalina.core.StandardService initInternal
    SEVERE: Failed to initialize connector [Connector[AJP/1.3-8010]]
    org.apache.catalina.LifecycleException: Failed to initialize component        [Connector[AJP/1.3-8010]]
at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:106)
at org.apache.catalina.core.StandardService.initInternal(StandardService.java:559)
at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
at org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:814)
at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
at org.apache.catalina.startup.Catalina.load(Catalina.java:624)
at org.apache.catalina.startup.Catalina.load(Catalina.java:649)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:281)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
    Caused by: org.apache.catalina.LifecycleException: Protocol handler initialization failed
at org.apache.catalina.connector.Connector.initInternal(Connector.java:983)
at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
... 12 more
    Caused by: java.lang.Exception: Socket bind failed: [730048] Only one usage of each socket address (protocol/network address/port) is normally permitted.  
at org.apache.tomcat.util.net.AprEndpoint.bind(AprEndpoint.java:423)
at org.apache.tomcat.util.net.AbstractEndpoint.init(AbstractEndpoint.java:610)
at org.apache.coyote.AbstractProtocol.init(AbstractProtocol.java:429)
at org.apache.catalina.connector.Connector.initInternal(Connector.java:981)
... 13 more

   Mar 01, 2013 2:13:18 AM org.apache.catalina.startup.Catalina load
   INFO: Initialization processed in 2816 ms
   Mar 01, 2013 2:13:18 AM org.apache.catalina.core.StandardService startInternal
   INFO: Starting service Catalina
   Mar 01, 2013 2:13:18 AM org.apache.catalina.core.StandardEngine startInternal
   INFO: Starting Servlet Engine: Apache Tomcat/7.0.29
   Mar 01, 2013 2:13:18 AM org.apache.catalina.valves.AccessLogValve open
   SEVERE: Failed to open access log file [C:\storefront\tomcat8081\logs\localhost_access_log.2013-03-01.txt]
   java.io.FileNotFoundException: C:\storefront\tomcat8081\logs\localhost_access_log.2013-03-01.txt (Access is denied)
at java.io.FileOutputStream.open(Native Method)
at java.io.FileOutputStream.<init>(FileOutputStream.java:212)
at org.apache.catalina.valves.AccessLogValve.open(AccessLogValve.java:1115)
at   org.apache.catalina.valves.AccessLogValve.startInternal(AccessLogValve.java:1222)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at   org.apache.catalina.core.StandardPipeline.startInternal(StandardPipeline.java:185)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1137)
at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:785)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
at java.util.concurrent.FutureTask.run(FutureTask.java:166)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)

    Mar 01, 2013 2:13:18 AM org.apache.catalina.startup.HostConfig deployWAR
    INFO: Deploying web application archive C:\storefront\tomcat8081\webapps       \storefrontAdmin.war
    Mar 01, 2013 2:13:27 AM org.apache.catalina.startup.HostConfig deployWAR
    INFO: Deploying web application archive C:\storefront\tomcat8081\webapps  \storefrontAppServer.war
    Mar 01, 2013 2:13:56 AM org.apache.catalina.startup.HostConfig deployWAR
    INFO: Deploying web application archive C:\storefront\tomcat8081\webapps\storefrontCatalog.war
    Mar 01, 2013 2:14:02 AM org.apache.catalina.startup.HostConfig deployWAR
    INFO: Deploying web application archive C:\storefront\tomcat8081\webapps \storefrontCommerceTest.war
    Mar 01, 2013 2:14:05 AM org.apache.catalina.startup.TaglibUriRule body
    INFO: TLD skipped. URI:  is already defined
    Mar 01, 2013 2:14:05 AM org.apache.catalina.startup.TaglibUriRule body
    INFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/core is already defined 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:57:43.097

似乎另一个应用程序正在使用该端口。如果一个应用程序已经绑定到一个端口，另一个应用程序不能使用/绑定到同一个端口。检查哪个应用程序绑定到该端口。试试这个：

```
netstat -ntl | grep :8080 
```

查看已经使用 8080 的进程。

如果要更改 Tomcat 的端口，请检查目录**TOMCAT_HOME\conf中的文件****server.xml**会提到端口地址，如果是**8080**，请尝试将其更改为**8081**或其他任何内容并启动服务器并点击 localhost:8081 进行检查。

 ******在**server.xml**中，代码如下所示：

```
<Connector port="8080" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="8443" /> 
```

此外，如果您想知道哪个进程正在使用该端口，请尝试以下操作：

```
netstat -aon | findstr 0.0:8080 
```

这将在最后一列中为您提供进程 ID。然后从任务管理器中，找到具有该进程 ID 的进程，您就会知道哪个进程正在使用该端口。******

# javascript - 使用 phantomjs 在点击时加载 javascript/ajax 调用

> ID：15152642
> 
> 赞同：2
> 
> 时间：2013-03-01T07:24:25.173
> 
> 标签：javascript, ajax, phantomjs, headless

我正在尝试构建一个 webscraper，在单击时从 ajax 调用接收到信息后，我可以使用它下载 HTML 源代码。简单地说，最初我下载了一个网页，然后单击下一步按钮，该页面使用 ajax 调用加载了一组新图像，单击下一步后我需要捕获 html 源。

下一个点击源看起来像这样

```
<a href="javascript:void(0);" onclick="return nextpage('xyz.html','2');" class="nextimage">Next Page</a> 
```

在同一页面上是处理 ajax 调用的 javascript 函数 nextpage。

有没有办法使用 phantomjs 做到这一点？我对 phantomjs 很陌生，所以如果有什么不清楚的地方请告诉我。目前我只能从原始网页加载内容。

```
var page = require('webpage').create();
page.open('somewebpage', function (status) {
    if (status !== 'success') {
        console.log('Unable to access network');
    } else {
        var p = page.evaluate(function () {
            return document.getElementsByTagName('html')[0].innerHTML
        });
        console.log(p);
    }
    phantom.exit();
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:38:04.827

尝试：

var content = page.evaluate( function() { return
(new XMLSerializer()).serializeToString( document ); } );

# iphone - 无法相对于 Y 轴裁剪 UIImage

> ID：15152644
> 
> 赞同：1
> 
> 时间：2013-03-01T07:24:29.953
> 
> 标签：iphone, ios, uiimageview, uiimage, crop

我正在使用以下代码裁剪 UIImage：

```
UIImage *image=[info objectForKey:UIImagePickerControllerOriginalImage];

CGRect rect = CGRectMake(10,10,700, 700);

CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage], rect);
UIImage *img = [UIImage imageWithCGImage:imageRef];
CGImageRelease(imageRef); 
```

我可以裁剪一个高度，但是如果我增加了 Y 轴，它就不会被裁剪。

```
CGRect rect = CGRectMake(10,50,700, 700); 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:53:05.270

从逻辑上讲，对于图像的裁剪，只有大小是相关的。所以你必须相应地调整你的`width`和`height`。框架的`x`和`y`坐标只会改变位置，而不是大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:58:25.933

查看这个 github 库，它可以执行您想要[的操作 imageCroppedToRect](https://github.com/soffes/sstoolkit/blob/master/SSToolkit/UIImage+SSToolkitAdditions.h#L46)

```
- (UIImage *)imageCroppedToRect:(CGRect)rect {
    // CGImageCreateWithImageInRect's `rect` parameter is in pixels of the image's coordinates system. Convert from points.
    CGFloat scale = self.scale;
    rect = CGRectMake(rect.origin.x * scale, rect.origin.y * scale, rect.size.width * scale, rect.size.height * scale);

    CGImageRef imageRef = CGImageCreateWithImageInRect(self.CGImage, rect);
    UIImage *cropped = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);
    return cropped;
} 
```

# c# - Linq 选择错误

> ID：15152660
> 
> 赞同：0
> 
> 时间：2013-03-01T07:25:51.417
> 
> 标签：c#, linq, dataset

这是我的代码：

```
DataSet ds = new DataSet();
ds.ReadXml("drivers"); 
```

这是正常的代码：

```
var q = from drivers in ds.Tables[0]
        .Select("EmployeeNumber = " + "0000008823")
        select (drivers["EmployeeNumber"] + " - " + drivers["Name"]); 
```

相同的代码，但此代码给出了错误：

```
var q = from drivers in ds.Tables[0]
        .Select("EmployeeNumber = " + "0000000023")
        select (drivers["EmployeeNumber"] + " - " + drivers["Name"]); 
```

> 无法对 System.String 和 System.Int32 执行“=”操作

这是我的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
  <drivers>
    <Driver>
      <Name>John</Name>
      <EmployeeNumber>0000000023</EmployeeNumber>
    </Driver>
    <Driver>
      <Name>Mike</Name>
      <EmployeeNumber>0000008823</EmployeeNumber>
    </Driver>
</drivers> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:10:09.873

您如何看待进入 Linq to Dataset 的方式？

```
var q2 = from drivers in ds.Tables[0].AsEnumerable()
         where drivers.Field<string>("EmployeeNumber") == "0000000023"
         select (drivers["EmployeeNumber"] + " - " + drivers["Name"]); 
```

额外的好处是，如果您使用标准的“where”而不是数据表的 Select() 方法过滤行，您可以轻松地移至 Linq2Sql 或 Linq2EF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T07:30:46.623

我的解决方案是这样

```
var q = from drivers in ds.Tables[0]
        .Select("EmployeeNumber = '" + employeeNumber + "'")
        select (drivers["EmployeeNumber"] + " - " + drivers["Name"]); 
```

但我不知道为什么我之前得到了那个错误

# .htaccess - 无法访问社交引擎中核心模块外部文件夹中的 php 文件4

> ID：15152671
> 
> 赞同：0
> 
> 时间：2013-03-01T07:26:53.043
> 
> 标签：.htaccess, socialengine

我已经安装了younet的插件'Advanced Search Plugin Like Facebook Search'，我注意到application/modules/Core/externals/scripts/ynadvsearch.php没有找到的错误。

然后我检查了位置，文件在那里。所以我上传了一个 test.php 文件并在地址栏中输入了 url 然后我也无法访问 test.php 页面。但我可以访问该文件夹中的所有 js 页面。

我已经删除了外部文件夹的 htaccess 文件。但问题还是一样。

我们如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:00:17.003

这有点奇怪，通常 /externals/scripts 文件夹仅用于 javascript 文件（以及所有 php 文件 - 在 /controllers 文件夹内）。

/externals 文件夹内的文件 .htaccess 包含一条规则

```
<FilesMatch   "\.avi|flv|mov|wmv|wma|mp3|mp4|m4a|mkv|swf|pdf|doc|ppt|ico|jpg|jpeg|png|gif|js|css)$">` 
```

这意味着不允许在此文件夹内访问 *.php 文件。

# javascript - 在 Vim 模式下使用 Codemirror

> ID：15152675
> 
> 赞同：3
> 
> 时间：2013-03-01T07:27:15.600
> 
> 标签：javascript, plugins, codemirror

我在编造这件事时遇到了一点麻烦。我只想在 Vim 模式下使用 Codemirror 编辑功能，没有任何语法高亮。也就是说，如果我单击文本区域，它会在类似的文本编辑器中转换，如演示页面[VIM Demo](http://codemirror.net/demo/vim.html)所示。谢谢！

**编辑**：如果不是 Codemirror，请告诉我如何将用户单击的文本区域转换为 VIM 类型编辑区域的方法。我想把它做成一个插件，这样每当我点击某个页面上的文本区域时，它就会给我一个类似 VIM（不完全是 vim）的环境来编辑。我应该如何处理键绑定的事情？请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T10:34:53.967

CodeMirror 负责所有键绑定（以及 vim 模式的键映射），因此您所要做的就是为`textarea`手头创建一个编辑器实例。

查看`CodeMirror.fromTextArea()`文档，在[静态方法部分](http://codemirror.net/doc/manual.html#api_static)下，看看它是如何完成的。

你也可以参考[vim bindings demo](http://codemirror.net/demo/vim.html)，简单看一下源码。这是 CodeMirror 实例在那里初始化的方式：

```
1  | CodeMirror.commands.save = function () {
2  |     alert("Saving");
3  | };
4  |
5  | var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
6  |     lineNumbers: true,
7  |     mode: "text/x-csrc",
8  |     keyMap: "vim",
9  |     showCursorWhenSelecting: true
10 | }); 
```

让我们把它拆开，如下行：

*   **1-3：为***保存*命令分配一个处理程序，该处理程序映射到`:w`vim 键绑定。从文档中，在键绑定部分：

    > 键映射中的属性值可以是单个参数（CodeMirror 实例）的函数、字符串或 false。此类字符串引用`CodeMirror.commands`对象的属性，它定义了默认键绑定使用的许多常用命令，并将它们映射到函数

*   **4：**寂静的声音。

*   **5：**从 DOM 中获取`textarea`元素（用`code`其 ID 表示），并将其传递给静态方法，该方法将基于该元素创建 CodeMirror 实例。

*   **6-9：**设置各种选项：

    *   **6：**在装订线中显示行号。

    *   **7：**将编辑器模式设置为类 C 以突出显示 C 代码。

    *   **8：**分配 vim 键绑定。

    *   **9：**嗯，选择时显示光标。

*   **10：**把它包起来。

为了使编辑器模式和键绑定工作，需要加载所需的脚本，所以我们也想包括这些：

```
<script src="../lib/codemirror.js"></script> <!-- main script -->
<script src="../addon/dialog/dialog.js"></script> <!-- addon for vim messages -->
<script src="../addon/search/searchcursor.js"></script> <!-- addon for vim messages -->
<script src="../mode/clike/clike.js"></script> <!-- mode for C-like languages -->
<script src="../keymap/vim.js"></script> <!-- key bindings for vim --> 
```

# javascript - 将鼠标悬停在热点上时带有图像弹出窗口的图像映射

> ID：15152681
> 
> 赞同：1
> 
> 时间：2013-03-01T07:27:33.387
> 
> 标签：javascript, html, css, popup, imagemap

我正在构建一个在某些日子有事件的日历。日历是我为其创建了图像映射的 jpg。当您将鼠标悬停在日历上的热点或“事件”上时，我希望将图像悬停在鼠标指针旁边，上面将显示事件信息，然后在鼠标离开热点时消失。我有六个热点，每个热点都有一个 javascript 函数。这些函数将弹出图像替换为正确的事件图像。下面是其中一个区域和一个功能的示例（其他区域相同，但图像名称和坐标不同）

我在悬停时在日历下方弹出了事件图像，但页面拒绝将图像的位置重新定位到当前鼠标位置。如何使弹出图像重新定位？我究竟做错了什么？还是我应该使用不同的方法？

JS：

```
function pop(e) { //function called by first hotspot
        Image.src = "../img/Bubble - Aloha.png" //event image
        document.popup1.src = Image.src; 
        var thing = document.getElementById("popup1");

        $("#popup1").toggle();
        thing.style.left = e.screenX + 'px';
        thing.style.top = e.screenY + 'px';

        return true;
        } 
```

地图：

```
<map id="feb1050" name="feb1050">
<area shape="rect" alt="" coords="464,170,588,263" HREF="../img/feb1050.jpg" onMouseOver="pop(event);"  onMouseOut="pop(event);"/>
...</map> 
```

HTML：

```
<ul><li>
        <img src="../img/feb1050.jpg" width="1050" alt="calendar" USEMAP="#feb1050">
    </li>
    <li>
        <div id="popup"><img NAME="popup1" id="popup1" src="../img/Bubble - Aloha.png" width="400" alt="calendar" style="display:none;top:-2000;left:-1000;> 
        </div><br />Click Here To RSVP! 
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T08:46:05.750

也许您可以定位封闭的 div，而不是操纵图像本身的位置。对于 HTML：

```
<div id="popup" class="popup"><img NAME="popup1" id="popup1" src="../img/feb1050.jpg" alt="calendar"> 
<br />Click Here To RSVP!</div> 
```

为 div 加上一些 CSS：

```
.popup {
        position:absolute;
        z-index:20000;
        top: 0px;
        left: 0px;
        display: none;
} 
```

然后是JS：

```
function pop(e) { //function called by first hotspot

    Image.src = "../img/Bubble - Aloha.png" //event image
    document.popup1.src = Image.src; 
    var thing = document.getElementById("popup");

    thing.style.left = e.clientX + 'px';
    thing.style.top = e.clientY  + 'px';
    $("#popup").toggle();

    return true;
 } 
```

请注意，我还将使用 clientX 和 clientY 而不是 screenX 和 screenY：

[screenX/Y、clientX/Y和pageX/Y有什么区别？](https://stackoverflow.com/questions/6073505/what-is-the-difference-between-screenx-y-clientx-y-and-pagex-y)

[JSFiddle 上的工作示例](http://jsfiddle.net/SiCurious/CjrU4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:40:35.833

我做过的一件事（在几乎完全一样的情况下：客户希望在将鼠标悬停在价格关键字上时出现一些定价框）几乎是纯 CSS 和 HTML。您可以在标签内生成弹出区域`<a>`，然后将其放置在悬停区域旁边的一些`<span>`（或绝对定位）中。`<div>`您确保这些 span/div 元素仅为选择器定义`a:hover`，并将它们设置`display:none;`为其余`a:x`选择器，以便 span/div 框仅在您将鼠标悬停在锚点上时出现，并在您没有​​时消失.

# c# - "Convert.ToString(Nullable) 之间的区别 )”和“可以为空 .ToString()”？

> ID：15152689
> 
> 赞同：2
> 
> 时间：2013-03-01T07:27:59.843
> 
> 标签：c#, type-conversion, resharper, tostring

我对转换方法“.ToString()”有一个普遍的疑问。起初我使用这个语句进行转换：

```
Nullable<int> SomeProperty;
string test = SomeProperty.ToString(); 
```

到这里为止没有问题，但在那之后我想将“CultureInfo.InvariantCulture”添加到 ToString() 方法中。它不起作用，因为 Nullable 的 .ToString() 没有参数。为什么 Resharper 建议向我插入 CultureInfo 信息？

之后我尝试另一种方式并使用此语句：

```
Nullable<int> SomeProperty;
string test = Convert.ToString(SomeProperty, CultureInfo.InvariantCulture); 
```

该语句工作正常，但现在我想了解第一个和第二个语句之间的技术差异？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T07:32:33.527

[Convert.ToString 方法（对象，IFormatProvider）](http://msdn.microsoft.com/en-us/library/ms131014.aspx)：

> 如果 value 参数实现了 IConvertible 接口，则该方法调用 value 的 IConvertible.ToString(IFormatProvider) 实现。否则，如果 value 参数实现了 IFormattable 接口，则该方法调用其 IFormattable.ToString(String, IFormatProvider) 实现。如果 value 没有实现任何接口，则该方法调用 value 参数的 ToString() 方法。

`Nullable<int>`被*视为*标准`int`，并在调用格式提供程序`IFormattable.ToString(String, IFormatProvider)`时被触发。`Convert.ToString`

证明：

```
class MyFormatProvider : IFormatProvider
{

    public object GetFormat(Type formatType)
    {
        return "G";
    }
}

static void Main(string[] args)
{
    Nullable<int> SomeProperty = 1000000;
    Console.WriteLine(SomeProperty.ToString());
    Console.WriteLine(Convert.ToString(SomeProperty));
    Console.WriteLine(Convert.ToString(SomeProperty, new MyFormatProvider()));
} 
```

把断点放在里面`GetFormat`，当最后一个`Main`执行时它会被击中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:36:50.177

阅读 msdn [http://msdn.microsoft.com/en-us/library/6t7dwaa5.aspx](http://msdn.microsoft.com/en-us/library/6t7dwaa5.aspx)

返回值使用通用数字格式说明符 ("G") 和当前区域性的 NumberFormatInfo 对象进行格式化。

# ruby - Ruby TCPSocket 发送/接收二进制数据 -> 数组哈希等

> ID：15152697
> 
> 赞同：1
> 
> 时间：2013-03-01T07:28:29.280
> 
> 标签：ruby, sockets, tcp, binary, protocols

我正在尝试在 Ruby 中创建自定义游戏服务器协议，但我无法理解我可以/应该如何做几件事：

**Q->1#**

服务器使用 TCPServer/TCPSocket 向客户端发送一个数组。但我不能使用 JSON，因为传输需要是二进制的。我如何将 ruby​​ 数组转换为二进制，然后可以将其转换回客户端的数组？

这是我的服务器：

```
#!/usr/bin/env ruby

require 'socket'

server = TCPServer.new 5020

loop do
    Thread.start(server.accept) { |c|
        print "new Client connected" 
        a = ["Hello, there"]

        payload_with_header = CustomProtocolModule.constructMethod(a) # what method do i use to convert a (array -> binary representation?  don't really understand .unpack, .pack, what template would i use if i did use String#Unpack? will String#Unpack work for what i need?
        client.write payload_with_header
        client.close
    }
end 
```

（以上是我的第一个问题）

**Q->2#**

接下来，因为我知道我需要使用某种终止来检查消息的结尾或确定客户端/服务器是否已收到完整消息的方法，我是否可以将有效负载的前两个字节设置为包含消息的大小? 我将如何做这个服务器端和客户端？接收方必须循环 TCPSocket.recv 吗？直到它接收到前两个字节（标头），然后读取前两个字节包含的大小？我的想法是这样的：

```
| Payload Header  (2 bytes) | array (contains cmd, message etc) | 
```

如果有人可以帮助指导我正确的方向和/或提供可以提供帮助的伪代码。这将不胜感激。具体来说，我对如何循环标头感兴趣，然后将有效负载读回数组并构造有效负载标头。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:43:38.703

```
payload_with_header = CustomProtocolModule.constructMethod(a) 
```

你可以序列化

```
payload = Marshal.dump(a) 
```

然后你可以使用

```
[payload.length].pack('l>') # to create a big endian signed long integer size for the packet 
```

另一方面，您可以从套接字读取一个整数，然后读取二进制文件并使用反序列化

```
array= Marshal.load(read_binary) 
```

这几乎适用于所有数据结构。Proc 实例是一个例外。

[Ruby 还支持远程对象和过程调用](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/drb/rdoc/DRb.html)，因此您可以进行进程间通信，甚至在不同的 ruby​​ 实现之间（例如 JRuby 和 MRI）

# java - Hibernate 自定义排序和 java.text.Collat or

> ID：15152704
> 
> 赞同：2
> 
> 时间：2013-03-01T07:28:53.657
> 
> 标签：java, hibernate, sorting, hibernate-4.x

我需要根据字段按 asc 或 dsc 顺序对结果集进行排序。该字段是字符串类型并包含用户名。现在的名字是法国名字。因此，为了根据用户的姓名对用户列表进行排序，我通常使用以下代码：

```
final Collator collator = Collator.getInstance(Locale.FRANCE);

Comparator<ActivityUserDTO> comparator = new Comparator<ActivityUserDTO>() {

    @Override
    public int compare(ActivityUserDTO dto1, ActivityUserDTO dto2) {
        return collator.compare(dto1.getFullName(), dto2.getFullName());
    }
};

Collections.sort(users, comparator); 
```

在这种情况下，我有从数据库加载的整个列表，`users`然后我正在做排序。

现在下面的代码是用于休眠的，我有`startIndex`: 设置`FirstResult`for `Criteria`，`maxResult`: 设置`MaxResults`of`Criteria`和排序：

```
Criteria criteria = getSessionFactory().getCurrentSession().createCriteria(entityClass);

if (StringUtils.isNotEmpty(sortField)) {
    criteria.addOrder(sortOrder ? Order.asc(sortField) : Order.desc(sortField));
}

criteria.setFirstResult(startIndex);
criteria.setMaxResults(maxResult); 
```

这里的`sortField`is`fullName`是法语，`sortOrder`可以是`true`or `false`。

有没有办法以自定义方式进行排序，以便它进行排序/排序，这是由`Collator`？任何指针都会对我很有帮助。

我看过一些网站，例如：

*   [文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/collections.html#collections-sorted)
*   [使用比较器对休眠集进行排序](http://parasjain.net/2008/11/10/sorting-hibernate-set-using-a-comparator/)
*   [使用 Comparator 对 Hibernate 注释进行排序](http://www.codereye.com/2009/05/hibernate-annotations-sort-using.html)

他们在哪里`Comparator`对 进行排序`Set of Assoicated Objects`，但在我的情况下我该怎么做？

这是我的`User`：

```
@javax.persistence.Entity
@Table(name = "USER")
public class User extends Entity {

    @Transient
    private static final long serialVersionUID = -112950002831333869L;

    private String username;
    private String firstName;
    private String lastName;
    private String fullName;
    private String mail;
    private String homePostalAddress;
    private String mobile;
    private String homePhone;
    private Date dateOfBirth;
    private Date dateOfJoining;
    private Date dateOfRelease;
    private boolean active;
    private String role;
    private Set<Activity> activities;

    public User() {
        super();
    }

    @NaturalId
    @Column(name = "USERNAME", nullable = false)
    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    @Column(name = "FIRST_NAME")
    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    @Column(name = "LAST_NAME")
    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    @Column(name = "FULL_NAME")
    public String getFullName() {
        return fullName;
    }

    public void setFullName(String fullName) {
        this.fullName = fullName;
    }

    @Column(name = "MAIL")
    public String getMail() {
        return mail;
    }

    public void setMail(String mail) {
        this.mail = mail;
    }

    @Column(name = "HOME_POSTAL_ADDRESS")
    public String getHomePostalAddress() {
        return homePostalAddress;
    }

    public void setHomePostalAddress(String homePostalAddress) {
        this.homePostalAddress = homePostalAddress;
    }

    @Column(name = "MOBILE")
    public String getMobile() {
        return mobile;
    }

    public void setMobile(String mobile) {
        this.mobile = mobile;
    }

    @Column(name = "HOME_PHONE")
    public String getHomePhone() {
        return homePhone;
    }

    public void setHomePhone(String homePhone) {
        this.homePhone = homePhone;
    }

    @Column(name = "DATE_OF_BIRTH")
    public Date getDateOfBirth() {
        return dateOfBirth;
    }

    public void setDateOfBirth(Date dateOfBirth) {
        this.dateOfBirth = dateOfBirth;
    }

    @Column(name = "DATE_OF_JOINING")
    public Date getDateOfJoining() {
        return dateOfJoining;
    }

    public void setDateOfJoining(Date dateOfJoining) {
        this.dateOfJoining = dateOfJoining;
    }

    @Column(name = "DATE_OF_RELEASE")
    public Date getDateOfRelease() {
        return dateOfRelease;
    }

    public void setDateOfRelease(Date dateOfRelease) {
        this.dateOfRelease = dateOfRelease;
    }

    @Column(name = "ACTIVE", nullable = false)
    public boolean isActive() {
        return active;
    }

    public void setActive(boolean active) {
        this.active = active;
    }

    @Column(name = "ROLE")
    public String getRole() {
        return role;
    }

    public void setRole(String role) {
        this.role = role;
    }

    @ManyToMany(cascade = { CascadeType.ALL }, mappedBy = "users", targetEntity = Activity.class)
    public Set<Activity> getActivities() {
        return activities;
    }

    public void setActivities(Set<Activity> activities) {
        this.activities = activities;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:09:45.453

Hibernate 不进行排序。数据库可以。执行条件查询归结为执行具有`order by fullName`子句的 SQL 查询。

因此，请检查数据库的配置以了解如何指定表或列使用的排序规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:11:35.610

```
ALTER DATABASE adb DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci; 
```

做了这项工作。

# gnu-prolog - 为什么 absolute_file_name 不起作用

> ID：15152705
> 
> 赞同：0
> 
> 时间：2013-03-01T07:28:55.617
> 
> 标签：gnu-prolog

以下代码适用于 swi-prolog：

```
:- asserta(user:file_search_path(money, '/media/D/db')).
dataFile(F) :-
absolute_file_name(money('test.dat'), F, []). 
```

gprolog 中似乎没有模块。我怎样才能让它在 gprolog 下工作？

真挚地！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T05:06:07.490

您没有提供足够的详细信息，但我推断问题出在操作员' **:-** '尝试使用' **initialization/1** '

```
$ cat > file.pl

initialization(asserta(user:file_search_path(money, '/media/D/db'))).
dataFile(F) :- absolute_file_name(money('test.dat'), F, []).
^d

$ gprolog --init-goal "['file.pl']"
compiling /Users/user/file.pl for byte code...
/Users/user/file.pl compiled, 2 lines read - 763 bytes written, 8 ms
GNU Prolog 1.4.1
By Daniel Diaz
Copyright (C) 1999-2012 Daniel Diaz
| ?- 
```

希望这项工作......</p>

# c++ - SFML 1.6 - 模糊文本

> ID：15152707
> 
> 赞同：0
> 
> 时间：2013-03-01T07:29:09.433
> 
> 标签：c++, text, sfml

我对 SFML 有一个奇怪的问题，当我想绘制一个 sf::String 时，文本内会出现一种阴影。

见： http: [//puu.sh/2aaGs](http://puu.sh/2aaGs)

编码 ：

```
text.SetSize(90);
text.SetFont(font);
text.SetText("Oktopus");
text.SetPosition(300, 300);
text.SetColor(sf::Color(255,215,0)); 
```

...

```
render.Draw(text); 
```

编辑：感谢Armin，我必须在加载时修复它的大小。

```
font.LoadFromFile("fonts/Minecraftia.ttf", 90) 
```

# google-chrome - CSS：位置：固定在位置：绝对内部

> ID：15152712
> 
> 赞同：34
> 
> 时间：2013-03-01T07:29:41.553
> 
> 标签：google-chrome, css, webkit, openlayers

我遇到了一些非常奇怪的行为，并且在我测试过的每个浏览器中都不一致。

我有一个非常复杂的布局，但主要问题在于：

```
<div id="drop">
  <div id="header"></div>
</div> 
```

`#drop`有`position:absolute`和`z-index:100`
`#header`有`position:fixed; top:60px;`

当我开始向下滚动时，Chrome 会忽略该`position:fixed`规则。如果我从中删除上述两种样式中的*任何一种*`#drop`，那么 Chrome 就会开始`position:fixed`遵守规则。

无法让它在 Ubuntu Chrome 23.0.1271.97 上运行，并在 Mac Chrome 25.0.1364.99 上看到相同的行为。我的朋友使用的是 Ubuntu Chrome 25.0.1364.68 beta，它对他来说可以正常工作。我已经在 Firefox 上对其进行了测试，它有点工作（有其他症状）

有人听说过这个错误吗？或者任何人都可以复制它吗？

# 编辑

我将 openlayers 地图用作另一个 div，`position:fixed`如果我删除该图层或至少将其更改为，`display:none`那么这个奇怪的错误就会消失。

# 编辑

请注意，在存在此错误期间，如果我来回更改缩放级别，则位置会自行调整为正确的行为。对我来说，这表明 webkit 问题无法在滚动时执行某些内部回调函数。

另一个非常奇怪的事情是，我有几个链接，`#header`如果我只是点击预期的位置，它们就会工作，即使 div 没有出现在那里。总的来说**，我注意到只有渲染**被破坏了。如果在任何时候我通过调整窗口大小或更改缩放或只是执行全选来强制浏览器重新渲染，那么标题栏会跳转到正确的位置，但不会保持固定。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-12-29T21:46:20.453

您在评论中提到 OpenLayers 使用 CSS 转换。既然如此：

具有固定定位的元素将成为相对于具有变换的元素 -*而不是相对于视口*

看一下规范：[Transform Rendering Model](http://www.w3.org/TR/css3-transforms/#transform-rendering)

> 为 'transform' 属性指定除 'none' 以外的值会在其应用到的元素处建立一个新的局部坐标系。
> 
> ```
> .wpr
> 
> {
> 
>     width: 200px;
> 
>     height:1000px;
> 
>     background: pink;
> 
>     position:relative;
> 
>     margin: 0 200px;
> 
>     -webkit-transform: translateX(0);
> 
>     transform: translateX(0);
> 
> }
> 
> .fixed
> 
> {
> 
>     width: 200px;
> 
>     height:200px;
> 
>     margin: 50px;
> 
>     position: fixed;    
> 
>     top:0;
> 
>     left:0;
> 
>     background: aqua;
> 
> }
> ```
> 
> ```
> <div class="wpr">
> 
>     <div class="fixed"></div>
> 
> </div>
> ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-19T22:59:41.350

正如公认的答案所说，这是预期的行为，并且符合规范。另一个重要的组成部分是使用 CSS 转换意味着什么。

在您的情况下，这是由于 OpenLayers 造成的，但这也适用于任何使用`will-change: transform`的人（可能很多人访问这个问题）。这已经在 Chromium bug tracker [here](https://bugs.chromium.org/p/chromium/issues/detail?id=413456)上提出，并标记为`WontFix`，因为（正如我所说）这是预期的行为。官方评论是这样的：

> 规范要求此行为（[http://dev.w3.org/csswg/css-will-change/](http://dev.w3.org/csswg/css-will-change/)）：“如果属性的任何非初始值会导致元素生成包含块的固定-位置元素，在 will-change 中指定该属性必须使元素为固定位置元素生成包含块。”
> 
> 这个想法是，一旦指定了 will-change:transform，您应该能够廉价地添加/删除/更改转换，而无需重新布局固定位置的后代。
> 
> 请注意，使用 will-change 的其他值（例如 opacity、top）不会改变固定位置后代的定位。

据我所知，唯一的解决方案是将元素的*子*`will-change`元素改为*兄弟*元素，以防止属性级联。

作为旁注，在我的具体情况下，我能够通过更具体的`will-change`属性来修复它。我没有在`div`包含需要 GPU 卸载的性能影响元素上使用它，而是直接在有问题的元素上使用它。不过，这是由于我原来的错误代码造成的，因此它不适用于大多数情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T12:16:40.757

您必须将其放置`header`在父容器之外`drop`才能使其工作。

几天前我遇到了一些类似的问题。例如，如果您设置 z-index `header`，它将获得父`drop`容器的 z-index 。z-index`header`将无用，因为它已经在另一个容器中z-索引。

z-index 的相同逻辑适用于位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-06T22:42:49.613

我想添加另一个可能的解决方案，因为我一直在为 chrome 忽略位置而苦苦挣扎：修复了很长一段时间，直到我终于找到了罪魁祸首：

```
-webkit-perspective: 1000; 
```

它来自我正在使用的插件，并导致所有位置：固定元素被忽略。希望它可以帮助某人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-21T12:39:48.570

将此添加到父级：

```
position: fixed; 
```

......这给孩子：

```
position: sticky; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-29T13:31:51.983

我认为这是不可能的，我不认为如果两个位置可以放在同一个地方而没有一个倒塌。但我认为在javascript中使用Avail高度更好，我的意思是如果你想要一个外部div来容纳内部div，并且外部div必须覆盖整个屏幕，在js中使用Availheight，这将获得屏幕高度然后应用如果，此后将所有div设置在固定位置。

* * *

## 回答 #7

> 赞同：-6
> 
> 时间：2013-03-01T08:28:45.717

首先，把一些东西放在你`div`的空里面，行为真的很奇怪。`fixed`那么，通过将 a放入a 中，您期望什么`absolute`？显然，没有人知道你的`fixed`div 的参考点是什么。它应该是它的父母位置吗？哪个不会随着滚动或页面位置的变化而变化？尝试使用完全有意义并且有明确定义的东西，因为如果你在 chrome 中修复它，另一个浏览器会发生什么？你真的更喜欢测试所有这些吗？

我想你的 s 有一个小的变化，`div`以便将`fixed`div 从`absolute`其中拉出或将`absolute`div 移动到其他地方。

# php - 通过 AJAX 发送的 POST 为空

> ID：15152717
> 
> 赞同：3
> 
> 时间：2013-03-01T07:29:57.670
> 
> 标签：php, ajax, .htaccess, codeigniter, post

所以我有以下 jQuery 块；

```
var file = "something.html";
$.post("/load", {which: file}, function(data){
  // do stuff
}); 
```

应该调用加载文件的后端。`load`控制器（我在 CodeIgniter 2.1.3 上）看起来像这样；

```
class Load extends MY_Controller {
    public function index()
    {
        $file = $this->input->post("which");
        $content = get_file_contents($file);
        echo $content;
    }
} 
```

但是，由于某种原因，该`$file`变量仍然为空。

现在，我通过将 更改为 a并从浏览器访问页面（例如），测试了`load`控制器**确实有效；**正确的文件被加载并回显。`$this->input->post()``$this->input->get()``/load?which=something.html`

我已经通过使用**普通`$_POST`**变量而不是 CodeIgniter 处理程序来调试代码。`$_POST["which"]`出现未定义的索引错误。

根据其他线程的建议，**我也尝试过`var_dump()`and `$_POST`，`file_get_contents('php://input')`**它们都显示为空。出于所有意图和目的，后端只是没有收到任何 POST 数据。

从我的 Inspector 的 Network 部分，我可以看到**AJAX 调用确实已发送**，并且“Form Data”部分包含`which: something.html`它应该包含的内容。请求返回 404 Not Found 状态码。但是，我确实知道`echo "test"; exit;`在它确实为 AJAX 请求返回“测试”之前，确实联系了正确的控制器作为添加到控制器中。

就我在网上找到的候选解决方案而言，我的 php.ini 应该是正确的；我已经确保它`variables_order`包含`P`并且`post_max_size`是一个合理的大小。正如一些回答者建议它可能是一个 .htaccess 重定向的东西，我确实尝试在 JS 请求的 URL 中添加一个斜杠，但都无济于事。

这是我的 .htaccess 供参考；

```
# Customized error messages.
ErrorDocument 404 /index.php

# Set the default handler.
DirectoryIndex index.php

# Various rewrite rules.
<IfModule mod_rewrite.c>
  RewriteEngine on
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ index.php/$1 [L,QSA]
</IfModule> 
```

同样的代码在过去也有效，但现在我在一台全新安装 Apache (2.2.22) 和 PHP (5.3.13) 的新计算机上，这让我相信这很可能是某种Apache 或 PHP 的配置问题。我不知道这是否使这个线程比 Stack Overflow 更适合服务器故障，但由于我是程序员而不是系统管理员，我想看看这里是否有人有任何想法。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:21:37.633

根据 Jan Dvorak 的尖锐建议，我将当前环境的配置与代码上次运行的环境进行了比较，并确保启用的 Apache 模块和 PHP 扩展的列表是相同的。

在这个过程中，除了我已经打开的模块之外，我还打开了以下 Apache 模块；

*   auth_digest_module
*   dav_lock_module
*   headers_module
*   信息模块
*   代理模块
*   proxy_ajp_module
*   ssl_module
*   状态模块

我还打开了以下以前没有打开的 PHP 扩展；

*   php_bz2
*   php_curl
*   php_exif
*   php_gettext
*   php_imap
*   php_openssl
*   php_pdo_odbc
*   php_pdo_sqlite
*   php_soap
*   php_sockets
*   php_sqlite
*   php_sqlite3
*   php_xmlrpc

比我更聪明的人可以告诉我哪个模块或扩展或它们的组合是这个问题的确切解决方案。

但是，对我来说，启用这些模块和扩展使我能够确保我的环境与我以前的环境相似，并且在这种情况下，无需更改代码或`.htaccess`.

# java - MySQL 自定义主键生成器

> ID：15152718
> 
> 赞同：2
> 
> 时间：2013-03-01T07:29:58.500
> 
> 标签：java, mysql, primary-key, generator

我为我们的预订系统编写了一个发票模块。

所以当我创建一个新的发票时，我会通过 MySQL 自动生成一个主键。

然而，目前这只是一个简单的整数计数。

问题是我们有义务以“#year#id”的形式提供发票编号，其中#year 是例如 2013，而#id 是每年从 1 开始的 id。

因此，例如 20131、20132、20133 和 2014 年将是 20141、20142。

如何使用自定义主键生成器解决此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T07:35:51.477

您可以在您的年份和 ID 中创建两个字段。

在两个字段上创建一个主键，为 id 提供 auto_increment 选项。对于 year 的每个唯一值，id 将向上计数。例如：

```
2012    1
2012    2
2012    3
2013    1 
```

您可以在选择时连接它们：SELECT CONCAT(year,id) AS primary FROM table

插入将是：

INSERT INTO 表 SET 年份 = YEAR(NOW())

您不必指定 id。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T07:38:54.673

您应该使用过程或触发器。构建 newInvoiceId 的特定查询应该是这样的：

```
SELECT CONCAT(YEAR(now()),count(*)+1) as newInvoiceId
FROM table
WHERE InvoiceId like CONCAT(YEAR(now()),'%'); 
```

我不是 100% 有信心的唯一部分是`CONCAT(YEAR(now()),'%')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-15T11:51:06.103

***警告不要像 2012/01 这样幼稚的年/周。YEAR(NOW()) 是错误的。***

更好用`YEARWEEK(NOW())`。给出一个像 201201 这样的数字

下面显示 year 不一定是 year-of-week-number：

```
mysql> SELECT YEARWEEK('1987-01-01');
       -> 198652 
```

对于在一个 int 中包含年和周的其余部分，实际上更简单。

```
int year = yearweek / 100;
int week = yearweek % 100; 
```

# iphone - 将对象插入索引 1 处的 NSMutableArray 时出现奇怪的结果

> ID：15152719
> 
> 赞同：2
> 
> 时间：2013-03-01T07:29:59.367
> 
> 标签：iphone, ios

在我的应用程序中，我想将对象插入 NSMutableArray：

```
NSMutableArray *test = [NSMutableArray arrayWithObjects:[NSNumber numberWithInt:1], [NSNumber numberWithInt:3], [NSNumber numberWithInt:4], nil];
[test insertObject:[NSNumber numberWithInt:2] atIndex:1]; 
```

我在第二个代码行放了断点，调试区域的结果是好的：

```
self = (MasterViewController *) 0x074b9cb0
test = (NSMutableArray *)   0x07462c50 @"3 objects"
   [0] = (id)   0x07461f10 (int) 1
   [1] = (id)   0x07473ec0 (int) 3
   [2] = (id)   0x074cbd30 (int) 4 
```

但运行第二行代码后，结果出乎意料：

```
self = (MasterViewController *) 0x074b9cb0
test = (NSMutableArray *)   0x07462c50 @"4 objects"
   [0] = (id)   0x074713f0 (int) 2
   [1] = (id)   0x07473ec0 (int) 3
   [2] = (id)   0x074cbd30 (int) 4
   [3] = (id)   0x07461f10 (int) 1 
```

谁能解释为什么在索引 1 处插入后第一个对象（int 1）成为最后一个对象，或者这种情况是 ios 6.1 的错误？

在索引> 1处插入对象时，没有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T07:42:41.007

我很少相信来自该领域的结果。请改用调试器命令。数组正在正确创建。我复制并粘贴了这两行，我得到了

> (lldb) po 测试
> $0 = 0x1dda1ad0 <__NSArrayM 0x1dda1ad0>(
> 1,
> 3,
> 4
> )

在第一行之后，和

> (lldb) po 测试
> $1 = 0x1dda1ad0 <__NSArrayM 0x1dda1ad0>(
> 1,
> 2,
> 3,
> 4
> )

在第二行之后。但是，结果是您在变量窗口中所说的方式。这个故事的寓意是，相信调试器而不是变量窗口！

# facebook-php-sdk - Facebook - 无法创建应用

> ID：15152732
> 
> 赞同：1
> 
> 时间：2013-03-01T07:30:46.143
> 
> 标签：facebook-php-sdk

我是 developer.facebook.com 的新手，想创建应用程序。当我转到此 URL 时`https://developers.facebook.com/apps`，它没有显示任何按钮`+ create new app`

我之前创建了一个应用程序，后来删除了它，因为它对我没有用。现在谁能告诉我应该怎么做才能创建一个新的应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T07:54:42.860

我现在也有同样的问题。我有一些应用程序，我删除了它们。现在我无法创建任何应用程序。

编辑：

在 4 小时前的另一篇文章中找到了解决方案。

[http://developers.facebook.com/setup](http://developers.facebook.com/setup)

# javascript - Highcharts - 突出显示范围内的鼠标位置

> ID：15152738
> 
> 赞同：2
> 
> 时间：2013-03-01T07:31:08.833
> 
> 标签：javascript, highcharts

当鼠标位于 HIighCharts 中折线图的 xAxis 范围内时，我需要突出显示鼠标位置。我想显示一个圆圈以突出显示鼠标位置。但我只希望最后 25 个 xAxis 值具有此功能。

是否可以在 Highcharts 中执行此操作？

一种方法是遵循代码，但它有其局限性：

```
var circle = chart.renderer.circle(0, 0, 5).attr({
    fill: 'blue',
    stroke: 'black',
        'stroke-width': 1
}).add()
    .toFront()
    .hide();

$(chart.container).mousemove(function (event) {
        circle.attr({
            x: event.offsetX,
            y: event.offsetY
        });
        if (event.offsetX > SOME_VALUE) circle.show();
    }); 
```

缺点是我比较的是 event.offsetX 而不是 event.xAxis[0].value，即我比较的是页面中鼠标的 xValue 而不是图表中的 xAxis 值。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T12:44:59.550

您可以使用`point.plotX`and`chart.plotLeft`获取图表上的位置，请参阅：http: [//jsfiddle.net/PNMAG/35/](http://jsfiddle.net/PNMAG/35/)

片段：

```
function addCircle() {
  var chart = this;
  var circle = chart.renderer.circle(0, 0, 5).attr({
      fill: 'blue',
      stroke: 'black',
      'stroke-width': 1
    }).add()
    .toFront()
    .hide();

  $(chart.container).mousemove(function(event) {
    var normalizedEvent = chart.pointer.normalize(event);

    if (normalizedEvent.chartX > chart.series[0].data[5].plotX + chart.plotLeft) {
      circle.attr({
        x: normalizedEvent.chartX,
        y: normalizedEvent.chartY
      }).show();
    } else {
      circle.hide();
    }
  });
}
var chart = new Highcharts.Chart({
  chart: {
    renderTo: 'container',
    type: 'area',
    events: {
      load: addCircle
    }
  },
  series: [{
    data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
  }, {
    data: [71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4, 20]
  }]
}); 
```

# java - 将数据从 java 发送到 Jasper 表

> ID：15152741
> 
> 赞同：1
> 
> 时间：2013-03-01T07:31:18.497
> 
> 标签：java, jasper-reports, report

我的问题是我必须做一份报告，里面有两张桌子。我必须填写的表使用 java 发送其数据，例如使用 JavaBean 连接。

例子。我有 3 节课

```
class MainFields{
int id; String name; String code;
/*Getters and Setters*/}

class SubTable1{
int materialCode; String materialName; String materialLocation;
/*Getters and Setters*/}

class SubTable2{
int serviceCode; String serviceName; float cost;
/*Getters and Setters*/} 
```

我知道使用

```
JasperReport report = JasperCompileManager.compileReport(
"Absolute Path of the jasper");
JasperPrint jPrint = JasperFillManager.fillReport(
report, hashMapOfParameter, CollectionBeans); 
```

存在

*   **报告**：一个对象提示 JasperReport
*   **hashMapOfParameter** : 带有我发送给 jasper 的参数的 HashMap
*   **CollectionBeans**：具有主查询不同字段的向量

我想再发送 2 个向量来填写报告中的 2 个表格。

```
Vector<SubTable1> vst1;
Vector<SubTable2> vst2; 
```

实际上我正在使用iReport。

我不知道我是否真的可以使用 Jasper + Java 做到这一点，但我看到我可以在 iReport 中使用 JavaBeans 作为数据源，我想知道它是否属实。

# c - 在c中拆分字符串

> ID：15152744
> 
> 赞同：0
> 
> 时间：2013-03-01T07:31:25.383
> 
> 标签：c

我有一个文件，其中每一行如下所示：

```
cc ssssssss,n 
```

其中前两个'c'是单个字符，可能是空格，然后是空格，然后是's'是一个8或9个字符长的字符串，然后是一个逗号，然后是一个整数。

我对c真的很陌生，我试图弄清楚如何将它放入每行4个单独的变量中（前两个字符中的每一个，字符串和数字）

有什么建议么？我看过 fscanf 和 strtok 但我不确定如何让它们为此工作。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T07:33:54.050

正如问题所暗示的那样，我假设这是一个 C 问题，而不是标签可能暗示的 C++。

1.  读入整行。

2.  用于[`strchr`](http://en.cppreference.com/w/c/string/byte/strchr)查找逗号。

3.  对前两个字符做任何你想做的事情。

4.  将逗号换成零，标记字符串的结尾。

5.  `strcpy`从第四个字符开始调用以提取`sssssss`部分。

6.  调用`atoi`逗号过去的一个字符来提取整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:03:04.323

字符串是一个以第一个结尾的字符序列`'\0'`。请记住这一点。您描述的文件中的内容不是字符串。

我认为`n`是一个整数，可以跨越多个小数位并且可能是负数。如果是这种情况，我相信您需要的格式字符串是`"%2[^ ] %9[^,\n],%d"`. 您需要传递`fscanf`以下表达式：

1.  你的`FILE *`，
2.  格式字符串，
3.  一个由 3 个字符组成的数组，默默地转换为一个指针，
4.  一个由 9 个字符组成的数组，默默地转换为一个指针，
5.  ...和一个指向`int`.

将 fscanf 的返回值存储到 int 中。如果 fscanf 返回负数，则您遇到了诸如 EOF 或其他一些读取错误之类的问题。否则， fscanf 会告诉您它为多少对象赋值。在这种情况下，您正在寻找的“成功”值是 3。任何其他都意味着输入格式不正确。

我建议阅读[fscanf 手册](http://pubs.opengroup.org/onlinepubs/000095399/functions/fscanf.html)以获取更多信息和/或澄清。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T08:14:59.970

[fscanf](http://www.cplusplus.com/reference/cstdio/fscanf/)功能非常强大，可用于解决您的任务：

1.  我们需要读取两个字符——格式是“%c%c”。
2.  然后跳过一个空格（只需将其添加到格式字符串中）-“%c%c”。
3.  然后读取一个字符串，直到我们碰到一个逗号。不要忘记指定最大字符串大小。因此，格式为“%c%c %10[^,]”。10 - 要读取的最大字符数。[^,] - 允许的字符列表。^, - 表示除逗号之外的所有内容。
4.  然后跳过一个逗号 - “%c%c %10[^,]”。
5.  最后读取一个整数 - “%c%c %10[^,],%d”。
6.  最后一步是确保读取所有 4 个令牌 - 检查 fscanf 返回值。

这是完整的解决方案：

```
FILE *f = fopen("input_file", "r");

do
{
    char c1 = 0;
    char c2 = 0;
    char str[11] = {};
    int d = 0;

    if (4 == fscanf(f, "%c%c %10[^,],%d", &c1, &c2, str, &d))
    {
        // successfully got 4 values from the file
    }
}
while(!feof(f));

fclose(f); 
```

# ios - 在 iOS 中使用 NSJSONSerialization 进行序列化时导致崩溃

> ID：15152748
> 
> 赞同：0
> 
> 时间：2013-03-01T07:31:55.173
> 
> 标签：ios, json, crash, nsjsonserialization

在我的 iPhone 应用程序中，我正在使用 JSON 调用 Web 服务。我`NSJSONSerialization`用于从服务中检索数据。运行应用程序时，我在随机点崩溃。这是该问题的屏幕截图。 ![截屏](../Images/b58ef87cc5e8f327393e8593b09af33d.png)

有人可以检查一下吗？如果需要更多代码，请告诉我。提前致谢。

# iis-7 - IIS7 和经典 ASP 以及应用程序和路径

> ID：15152751
> 
> 赞同：0
> 
> 时间：2013-03-01T07:32:04.977
> 
> 标签：iis-7, asp-classic

我昨天收到了一个 zip 文件，其中包含一个 2005 年的旧 asp 站点。它位于一个名为`ivx`.

我已经解压缩`ivx`到`c:\inetpub\wwwroot`然后在`IIS`调用中创建了一个应用程序`ivxapp`并将其指向`c:\inetpub\wwwroot\ivx`. 现在，当我输入 时`http://localhost/ivxapp`，我可以访问索引页面。

我的问题是，无论是谁设计了那个网站，都是在 IIS5 或 IIS6 出现时设计的。`<a href=""/new_posts.asp"">more...</a>`他使用了通向`http://localhost/new_posts.asp`而不是通向的路径`http://localhost/imagevertex/new_posts.asp`

整个站点大约有 21000 行代码，并且包含许多这样的参考。然后问题来了`<!--#include virtual = "/common/adminverify.asp" -->`

不必手动编辑整个代码，您知道如何让事情顺利进行吗？

该站点在生产服务器上运行良好。现在它在我的 Windows 7 64 家庭高级版本地机器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:04:05.670

是的，您需要为该站点提供自己的根 URL，而不是在 localhost 的子目录中运行它。

这更像是一个网络管理问题，但您需要做的是直接在“localhost”下运行它，或者在您的网络中添加一个域名来运行这个站点。现在对您来说最简单的可能是第一个选项。

**如果您还没有在 localhost 下运行其他站点：**

转到 IIS 管理器并单击“本地主机”站点。在 IIS 界面的右侧，您可以更改基本设置。将物理路径指向 ivx 目录。您可以直接访问该网站`http://localhost`。

**如果您已经在 localhost 下运行站点，则需要保留：**

现在，如果您已经在 localhost 上运行了一个站点，第二个最简单的选择是在 localhost 下运行 ivx 站点，但在不同的端口上。为此，请单击 IIS 中的当前 ivx 站点，以与上述相同的方式更改路径，然后单击 IIS 中的“绑定”，并将 ivx 站点的 PORT 更改为 80 以外的其他值，例如例 81。

然后 ivx 站点将运行`http://localhost:81`，您当前的 localhost 仍将运行`http://localhost`。

**困难的方法：将主机添加到您的网络或 PC：**

最后一个选项是将站点的新主机名添加到您的网络。您可以在 DNS 中为服务器的 IP 地址添加 A 记录，或在服务器上的 Windows 中的 HOSTS 文件中添加主机名（“服务器”是指运行该站点的机器，也可以是您的本地计算机）您可以在服务器的 IP 地址中添加一个虚构的名称，然后在 IIS 的绑定中将该名称添加到“主机名”下。这样您就可以在同一台机器上运行两个不同的站点，IIS 中的“主机名”设置将确保对该特定主机名的调用将到达正确的站点。将其添加到网络的 DNS 或 Windows 中的 HOST 文件将确保名称被解析到正确的机器（您的网络服务器）。

这最后一个选项有点棘手，因为您以前从未做过类似的事情，但第一个选项同样有效。

祝你好运！

埃里克

# javascript - JQuery 动画 .css() 而不是使用 .anmiate()？

> ID：15152758
> 
> 赞同：0
> 
> 时间：2013-03-01T07:32:43.993
> 
> 标签：javascript, jquery, animation

我想对 div 的 margin-top 变化进行动画处理。

通常我会这样：

```
 $("#mydiv").animate({ marginTop: '+='+myvar}, 200); 
```

但这总是增加（或减少）价值。我想要一种方法来简单地*改变*价值的变化。

例如：如果 div 以 100 的边距顶部开始，而 myvar 值为 50，我想为 div 设置动画，使其缩小到 50。同样，如果 myvar 值为 200，我想为变化设置动画，因此增长到 200。

我可以在某种程度上实现这一点，但要重置 CSS，例如：

```
$("#mydiv").css("margin-top", "0px");
$("#mydiv").animate({ marginTop: '+='+myvar}, 200); 
```

每次，但这使它有点笨拙。

有谁知道可以实现这一目标？

（ps：不使用 CSS 过渡）

编辑：在下面添加了我的代码

```
$("#info1tab").click(function() {
  $(".textbox").slideUp('200');
  $("#info1").delay(300).slideDown('200');
  var itemheight = $("#info1").css("height");
  var itemheightint = parseInt(itemheight);
  $("#photobox").animate({ marginTop: itemheightint }, 200);

});

$("#info2tab").click(function() {
  $(".textbox").slideUp('200');
  $("#info2").delay(300).slideDown('200');
  var itemheight = $("#info2").css("height");
  var itemheightint = parseInt(itemheight);
  $("#photobox").animate({ marginTop: itemheightint }, 200);

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:41:46.163

有什么问题`$('#mydiv').animate({marginTop: myvar});`？

[http://jsfiddle.net/muVsE/](http://jsfiddle.net/muVsE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:44:30.643

创建具有所需 CSS 属性的其他 CSS 类，然后执行以下操作：

```
$("#mydiv").addClass("classname", 1000); 
```

或者

```
$("#mydiv").removeClass("classname", 1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T07:49:32.410

试试这个代码：

```
$("#mydiv").css("margin-top", "0px");
$("#mydiv").animate({ marginTop: topMargin+myvar}, 200); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T07:50:26.197

我希望这有助于[JSFiddle](http://jsfiddle.net/CFNUJ/)

```
$('#left-bg, #right-bg').click(
    function(){
        $(this).animate({'width': '100%'},600).siblings().animate({'width':'0'},600);
    }); 
```

或者你可以使用这个[JSfiddle](http://jsfiddle.net/davidThomas/CFNUJ/1/)

```
$('#left-bg, #right-bg').click(
    function(){
        $(this).animate({'width': '100%'},600).siblings().animate({'width':'0'},600);
        $('<button class="show">Show all</button>')
            .appendTo('#wrapper');
    });

    $('.show').live('click',
                    function(){
                        $('#left-bg').animate(
                            {
                                'width': '50%'
                            },600);
                        $('#right-bg').animate(
                            {
                                'width': '50%'
                            },600);
                        $(this).remove();
                    }); 
```

或者您可以使用它来扩展一个 div 并同时缩小另一个：

```
$('.cell')
    .on('mouseenter', function(){
        $(this).animate ({width:"75%"},"slow").siblings('.cell').animate({'width': '15%'}, "slow");
    })
    .on('mouseleave', function(){
        $(this).add($(this).siblings('.cell')).animate ({width:"45%"},"slow");
    }); 
```

问候。

# java - 如何使用 sendmail 发送附件

> ID：15152761
> 
> 赞同：0
> 
> 时间：2013-03-01T07:33:22.973
> 
> 标签：java, email

我正在使用这个类发送邮件它可以工作但现在我想添加附件如何添加它请帮助如果你能

```
public static void sendMail(String subject, String body, String toEmail, String ccEmail, String fromMail)
                throws IOException {
            Random generator = new Random();
            int r = Math.abs(generator.nextInt());

            body = body.replaceAll("(\\r|\\n)", "");
            body = body.replaceAll("\"", "\\\\\"");
            body = body.replaceAll("&", "\\\\&");
            body = body.replaceAll("©", "\\\\&#169;");
            //body = body.replaceAll("> <", ">\\\n<");

            if(CommonUtils.emptyString(fromMail))
                fromMail = "No Reply <iotasol@pcc.com>";
            else
                fromMail = "No Reply <"+fromMail+">";

            ProcessBuilder processBuilder = new ProcessBuilder(
                    ApplicationProperties.MAIL_SENDER_SH_PATH, CommonUtils.getEmptyStringForNull(subject), CommonUtils.getEmptyStringForNull(body),
                    toEmail, ccEmail, String.valueOf(r), fromMail);
            processBuilder.start();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:13:43.067

从您的代码示例中，我可以看出您正在使用外部*邮件*程序发送电子邮件。您创建一个**ProcessBuilder**并调用一个操作系统工具来发送电子邮件。

我不会使用这个解决方案。首先，它取决于操作系统（在 Windows 上，您没有 mail 命令）。其次，这样做效率不高；因为您为此创建了外部流程（想象一下发送许多电子邮件）。

相反，请尝试在 java 中使用现有的**邮件**解决方案（您将需要：mail.jar 和 activation.jar）。有了它，您可以直接从您的应用程序发送电子邮件，而不依赖于外部工具。

虽然使用**mail** Java 库，您可以做任何您想做的事情，您也可以查看[Jodd Email](http://jodd.org/doc/email.html)。这是一个小型但方便的 java 邮件库包装器，可以帮助您发送电子邮件和附件。正如您在“*使用 fluent API*的电子邮件”部分中看到的，您可以执行以下操作：

```
Email email = Email.create()
    .from("from@foo.org")
    .to("to@bar.com")
    .subject("test")
    .addText("Hello!")
    .addHtml(
        "<html><body><h1>Hey!</h1>" +
        "<img src='cid:c.png'><h2>Hay!</h2></body></html>")
    .embed(attachment().bytes(new File("d:\\c.png")))
    .attach(attachment().file("d:\\b.jpg")); 
```

在此示例中，您可以看到附加文件的两种方式：*嵌入*它们以便它们出现在 HTML 内容中，或者常见的*附加*. 当然，您不必使用流畅的界面，它只是这个库的一个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:42:31.760

```
 MimeBodyPart messageBodyPart = new MimeBodyPart();
       File file = new File("somefile.txt");
       if (file.exists()) {
           DataSource source = new FileDataSource("somefile.txt");
           messageBodyPart.setDataHandler(new DataHandler(source));
           messageBodyPart.setFileName(file.getName());
           multipart.addBodyPart(messageBodyPart);
       } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T07:38:05.657

如果您需要发送图像，作为一个想法：使其与 base64 内联。

附件取决于使用的库、使用的邮件服务器等。

# nginx - 如何在 Nginx 上设置 SPDY 协议？

> ID：15152775
> 
> 赞同：13
> 
> 时间：2013-03-01T07:34:29.953
> 
> 标签：nginx, spdy

我有一个 Rails 应用程序，想设置谷歌 SPDY 协议支持。但是在使用 SPDY 补丁安装 Nginx 然后在虚拟主机中启用 spdy 之后，它不允许我重新启动 nginx 而是引发以下错误。

```
Restarting nginx: nginx: [emerg] invalid parameter "spdy" in /etc/nginx/sites-enabled/default:112
nginx: configuration file /etc/nginx/nginx.conf test failed 
```

我已经用 spdy 补丁编译了最新的 nginx 1.3.13，这里我提到我的安装步骤

```
wget http://nginx.org/download/nginx-1.3.13.tar.gz
tar xvfz nginx-1.3.13.tar.gz
cd nginx-1.3.13

# Fetch the SPDY patch and apply it
wget http://nginx.org/patches/spdy/patch.spdy.txt
patch -p1 < patch.spdy.txt

 ./configure \
 --sbin-path=/usr/local/sbin/nginx \
 --prefix=/etc/nginx \
 --conf-path=/etc/nginx/nginx.conf \
 --error-log-path=/var/log/nginx/error.log \
 --http-client-body-temp-path=/var/lib/nginx/body \
 --http-fastcgi-temp-path=/var/lib/nginx/fastcgi \
 --http-log-path=/var/log/nginx/access.log \
 --http-proxy-temp-path=/var/lib/nginx/proxy \
 --http-scgi-temp-path=/var/lib/nginx/scgi \
 --http-uwsgi-temp-path=/var/lib/nginx/uwsgi \
 --lock-path=/var/lock/nginx.lock \
 --pid-path=/var/run/nginx.pid \
 --with-debug \
 --with-http_addition_module \
 --with-http_dav_module \
 --with-http_gzip_static_module \
 --with-http_realip_module \
 --with-http_stub_status_module \
 --with-http_ssl_module \
 --with-http_sub_module \
 --with-http_xslt_module \
 --with-http_spdy_module \
 --with-ipv6 \
 --with-sha1=/usr/include/openssl \
 --with-md5=/usr/include/openssl \
 --with-mail \
 --with-mail_ssl_module \

 # wget https://you.googlecode.com/files/ngx_cache_purge-1.6.tar.gz
 --add-module=/software/ngx_cache_purge-1.6 \

 #http://www.openssl.org/source/openssl-1.0.1e.tar.gz
 --with-openssl='/software/openssl-1.0.1e' 

 # Build and install nginx
 make && sudo make install 
```

它编译成功，没有任何错误。结果 0f nginx -V 给出以下

```
nginx version: nginx/1.3.13
built by gcc 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) 
TLS SNI support enabled
configure arguments: --sbin-path=/usr/local/sbin/nginx --prefix=/etc/nginx --conf-           path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-client-body-temp-path=/var/lib/nginx/body --http-fastcgi-temp-path=/var/lib/nginx/fastcgi --http-log-path=/var/log/nginx/access.log --http-proxy-temp-path=/var/lib/nginx/proxy --http-scgi-temp-path=/var/lib/nginx/scgi --http-uwsgi-temp-path=/var/lib/nginx/uwsgi --lock-path=/var/lock/nginx.lock --pid-path=/var/run/nginx.pid --with-debug --with-http_addition_module --with-http_dav_module --with-http_gzip_static_module --with-http_realip_module --with-http_stub_status_module --with-http_ssl_module --with-http_sub_module --with-http_xslt_module --with-http_spdy_module --with-ipv6 --with-sha1=/usr/include/openssl --with-md5=/usr/include/openssl --with-mail --with-mail_ssl_module --add-module=/software/ngx_cache_purge-1.6 --with-openssl=/software/openssl-1.0.1e 
```

我的 /etc/nginx/site-enabled 配置有

```
server {
      listen 443 ssl spdy;

      ssl_certificate      server.crt;
      ssl_certificate_key  server.key;  

      ...
  } 
```

在所有这些成功安装之后，nginx 不会在启用站点的文件的服务器块中使用 spdy 参数重新启动。

有什么建议么？我肯定会在这里遗漏一些东西，但无法弄清楚。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-02T03:03:05.550

更新（2013 年 11 月 19 日）： nginx 1.4.3 的修改脚本（不需要 spdy 补丁）

[https://gist.github.com/deepak-kumar/7541199#file-compile_nginx_1-4-3_with-spdy-sh](https://gist.github.com/deepak-kumar/7541199#file-compile_nginx_1-4-3_with-spdy-sh)

我为设置编写了 Shell 脚本

[https://gist.github.com/deepak-kumar/5069550#file-compile_nginx_with_spdy-sh](https://gist.github.com/deepak-kumar/5069550#file-compile_nginx_with_spdy-sh)

我找到了解决问题的方法。

甚至在编译导致问题的 1.3.13 之前，我已经在我的 ubuntu 12.04 上安装了 nginx 包。`$ sudo apt-get install nginx`

为了解决这个问题，我确保 /etc/init.d/nginx 应该使用正确的二进制文件。

我在终端上做了以下操作：

```
$ which nginx
$ /usr/local/sbin/nginx 
```

检查了我现有的`/etc/init.d/nginx`脚本它使用了错误的`DAEMON`路径所以我把它改成这样（有效）

```
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
DAEMON=/usr/local/sbin/nginx # $which nginx 
```

较早的上述值是（不起作用）

```
#PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
#DAEMON=/usr/sbin/nginx 
```

文件的其余部分保持不变。所以基本上我使用了正确版本的二进制文件。

更新：这个博客也是一个很好的参考点，以防你们感兴趣。 [http://blog.bubbleideas.com/2012/08/How-to-set-up-SPDY-on-nginx-for-your-rails-app-and-test-it.html](http://blog.bubbleideas.com/2012/08/How-to-set-up-SPDY-on-nginx-for-your-rails-app-and-test-it.html)

# c# - 如何从 Excel udf 返回数组？

> ID：15152779
> 
> 赞同：2
> 
> 时间：2013-03-01T07:34:45.120
> 
> 标签：c#, excel, user-defined-functions

我想从我的 Excel UDF 返回一个二维数组，但它似乎只返回第一个元素：

```
public object[,] Get2DArray()
{         
     object [,] a = new object[2, 2];
     a[0,0] = 0;
     a[0,1] = 1;
     a[1,0] = 2;
     a[1,1] = 3;
     return a;
} 
```

调用如下所示：

```
=Get2DArray() 
```

我究竟做错了什么？

编辑：数组的大小可能会不时改变，所以我不想指定结果将填充的范围的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:18:06.333

因为它是一个二维数组，所以不能将数组的内容分配给**单个**单元格。

在您的示例中，您将返回一个 2x2 数组 - 选择一个范围（大小准确）并将公式写入选择的第一个单元格中。
例如，说您选择A1至B2，按`F2`，在单元格A1中输入公式（而选择为活动），然后您也应该能够看到写入B1，A2，B2的值。

我知道返回值数组可以是动态的。我不知道如何处理。但是，您可以在 VBA 中完成此操作，而不是使用 UDF。

# sql-server - 一对一关系数据库关系的可能优化

> ID：15152781
> 
> 赞同：0
> 
> 时间：2013-03-01T07:34:46.907
> 
> 标签：sql-server, sqlite, optimization

除了索引和可能合并表之外，优化一对一数据库连接的策略是什么？

假设每个表包含 100 万行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:34:14.217

像您提到的那样对表进行索引已经非常好，但是根据索引顺序在磁盘上对表进行物理排序使其几乎是理想的。

为此，您可以[在 SQL Server 中创建聚簇索引](http://msdn.microsoft.com/en-us/library/aa933131%28v=sql.80%29.aspx)（聚簇索引也支持其他一些数据库，如[PostgreSQL](http://www.postgresql.org/docs/9.2/static/sql-cluster.html)）。不幸的是，SQLite 不支持聚集索引。显然，只能聚集一个索引 - 基本上，这是表页将尝试在磁盘上进行物理排序的索引。

此外，在所有数据库（包括 SQLite）上，您可以简单地复制您的表，同时根据索引对其进行重新排序，使用类似

```
CREATE TABLE mytable_ordered AS
SELECT * FROM mytable
ORDER BY key_column;

DROP TABLE mytable;

ALTER TABLE mytable_ordered RENAME TO mytable;

CREATE INDEX mytable_key_column_idx ON mytable (key_column); 
```

你应该在你提到的另一张大桌子上做同样的事情。在此之后，通过有序键连接这些表`1:1`应该尽可能快（没有将这些表合并为一个）。

# python - 如何保护我的 Python 程序

> ID：15152785
> 
> 赞同：0
> 
> 时间：2013-03-01T07:34:58.270
> 
> 标签：python, html, css, server-side

我想做的是保护一个 Python 程序不被没有计算机知识的人窃取。我接受程序被盗版的必然性，我要做的就是保护它免受普通用户的侵害。

我提出了两个想法。1.)通过在线检查日期和时间来设置时间限制。IE 下载后 10 天。2.）检查下载它的计算机的IP或名称，并使程序仅在该计算机上运行。（以防止朋友简单地共享文件）。

这两者的问题是我需要“即时”创建一个 .py 文件，然后使用 pytoexe 之类的东西将它变成一个 .exe，这样用户就不需要安装 Python。

第二个问题是，据我了解，更改 ip 并获取计算机名称是一种安全风险，可能会吓跑用户。

综上所述，这是我的两个问题：1.）python中有没有一种好方法只允许程序在那台计算机上运行？2.) 实现“动态”创建 exe 的最佳方法是什么？（我打算在我的计算机上托管网站并学习 php(?)/servers。

我有中等的 c/c++ 和基本的 html/css、java 和 python 经验。

感谢您的时间！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T08:15:12.340

乱七八糟的生意。您可能已经明白，已*编译*并不意味着已*加密*。

但是，如果您的老板认为 c-compiled 令人满意，您可以使用[cython](http://cython.org/)将您的 python 代码编译为 c-code，然后使用 gcc 编译 c-code。

在此处查看如何构建 setup.py 脚本。

[http://docs.cython.org/src/reference/compilation.html#compiling-with-distutils](http://docs.cython.org/src/reference/compilation.html#compiling-with-distutils)

您可以使用以下选项将 python using 嵌入到生成的 c 代码中`--embed`：

```
# will generate the target.c 
$ cython target.py --embed 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T07:51:33.147

为每个用户提供一个定制的*安装程序*，其中包含一个唯一的密钥。当它运行时，它联系服务器（使用密钥）并请求实际程序。在服务器端，您检查密钥是否有效，如果有效，则为使用密钥定制的程序提供服务，并将密钥标记为已使用。安装程序将程序保存在用户可以访问的地方，并创建一个隐藏文件，其中包含计算机内部深处某处的密钥，“普通用户”不会想到查看。程序运行时，首先检查隐藏文件是否存在以及是否包含正确的密钥，如果不存在则拒绝运行。

（我假设解压缩可执行文件和阅读源代码超出了“普通用户”（阅读：“奶奶”）的能力，所以使用 py2exe 是可以的。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T09:18:24.607

为避免接触 Internet 上的任何内容，您可以使用以下方式“加密”您的程序：

*   采取程序的重要部分（没有它其余部分将无用），
*   把它放到一个字符串中，
*   用运行它的计算机的[MAC 地址](https://stackoverflow.com/questions/159137/getting-mac-address)对称地加密该字符串，
*   然后在你的程序中这样做：
    *   使用它运行的当前机器的 MAC 地址解密该字符串，并且
    *   使用 调用该解密字符串`exec`。

重要部分的示例是`print "hello world"`：

```
def getMyMac():
  return 123456789L  # for testing now
  return uuid.getnode()  # this would be the real thing

def strxor(s, key):
  key *= len(s) / len(key) + 1
  return ''.join(chr(ord(key[i]) ^ ord(s[i])) for i in range(len(s)))

def performVitalCode():
  code = 'A@ZZA\x16\x15P\\]^\\\x14BYET]\x13'
  # I found that code by entering:
  # strxor('print "hello world"', str(getMyMac()))
  realCode = strxor(code, str(getMyMac()))
  exec realCode 
```

*   我在这里对字符串使用了一个简单的 xor 进行加密（这不是一个难以破解的密码）。
*   当然，“允许”计算机的用户可以将他的 MAC 地址交给下一个用户，然后
    *   要么可以修补`getMyMac()`要么
    *   欺骗自己的MAC地址；大多数网卡都允许这样做。

因此，这不是解决您问题的“安全”解决方案。

但是，如果一个计算机知识很少的人在没有任何进一步信息的情况下将您的代码提供给其他人（可能通过将其放在论坛或类似网站上），接收者将无法开箱即用地执行它。

最后我需要指出的是，每一个链接到特定计算机的代码都可能成为代码的合法用户的麻烦。如果我使用的程序因为我切换到不同的硬件而停止工作（可能只是因为我买了一台新笔记本电脑），我通常会生气并诅咒该代码的作者。您可能不想惹恼您的客户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T00:53:16.843

似乎这里的东西组合在一起。像其他人建议的那样封装 python 是一个很好的方法，用于捆绑。你也可以考虑混淆，就像在另一个 StackOverflow 线程中讨论的那样：

[Python 代码混淆](https://stackoverflow.com/questions/576963/python-code-obfuscation)

其中参考：

[http://freecode.com/projects/pyobfuscate](http://freecode.com/projects/pyobfuscate)

至于让别人不能仅仅下载你的程序并在别处运行或分发它，你愿意给你的最终用户带来不便吗？:)

正如上面其他人所指出的，您可以生成具有特定于用户的 ID 的已编译和捆绑的代码位。这样，如果/当应用程序打电话回家时，您可以跟踪使用情况。

如果您的最终用户/客户满足以下要求：

*   您的帐户，他们可以登录并检查他们的订阅/帐户状态
*   运行程序的机器的 Internet 连接

您可以使安装过程执行以下操作：

*   安装程序不是完整的程序。生成机器的配置文件。
*   捆绑此配置文件并生成哈希。两者都上传到您的服务器。
*   一旦他们登录到他们的在线网络帐户，哈希就会显示给最终用户输入。
*   安装应用程序的用户提交哈希，并获得下载链接和解锁密钥。该密钥仅适用于动态生成的下载，并且仅适用于该机器。但是，下载的程序将接受一系列自身独有的密钥（迭代生成等）。
*   然后用户可以完成安装并运行他们的程序。该程序将定期检查它所在机器的配置文件，以确保散列不会偏离。如果是这样，程序可以提示他们登录到他们的网络帐户以生成新密钥。然后使用新密钥刷新他们的应用程序。这可以由应用程序自动执行，但根据互联网法律等，让用户登录他们的帐户并可能同意对 EULA 的任何更新会更好。

如果他们决定在 VM 包中共享程序，他们仍然需要一个活动帐户来获取密钥。

请注意，这不会阻止某人绕过哈希检查。但是对于普通用户来说，这将成为阻止人们放弃或转售您的程序的好方法。

请记住，没有系统是万无一失的。

# mysql - 在一个查询中计算来自不同表的结果

> ID：15152791
> 
> 赞同：1
> 
> 时间：2013-03-01T07:35:20.597
> 
> 标签：mysql

我有`orders`, `order_attachments`, `order_preship_check`, `order_preship_check_attachment`, `order_log`,`order_log_attachments`表

这些列中唯一的共同点是 order_id。现在在查询中，我只使用以下查询检查类型 1 和类型 2 的 order_attachments

```
SELECT
    COUNT(file_id) AS totalFiles
FROM
    orders_files
WHERE
    order_id = '88125'
AND attachment_type IN ('1', '2') 
```

因此，如果它返回，我会显示一个带有该订单的附件图标。现在，我还需要在其中组合 preship 附件和日志附件。没有额外的检查，两者的单独查询如下

```
SELECT
    COUNT(file_id) AS totalFiles
FROM
    orders_preship_check_attachment
WHERE
    order_id = '88125' 
```

和

```
SELECT
    COUNT(id) AS totalFiles
FROM
    orders_log_attachment
WHERE
    order_id = '88125' 
```

我需要将这 3 个查询组合在一个查询中。所以如果每个表有 1 条记录，我只需要得到 3 的计数，即使 3 也不重要。表示如果这些记录中的任何一个有附件，我需要显示图标，TRUE 或 FALSE。我希望它更清楚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:41:18.377

使用 UNION 或 UNION ALL，但这必须具有相同的类型和列数。

示例代码：

```
 SELECT 'Customer' AS type, id, name FROM customer
    UNION ALL
    SELECT 'Supplier', id, name FROM supplier 
```

如果您的查询包含不同数量的列，请尝试使用联接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T07:44:28.127

试试这个

```
SELECT SUM(totalFiles) AS totalFiles
  FROM (
    SELECT COUNT(file_id) AS totalFiles
      FROM orders_files
     WHERE order_id = '88125' AND
           attachment_type IN ('1', '2')
     UNION ALL
    SELECT COUNT(file_id) AS totalFiles
      FROM orders_preship_check_attachment
     WHERE order_id = '88125'
     UNION ALL
    SELECT COUNT(id) AS totalFiles
      FROM orders_log_attachment
     WHERE order_id = '88125'
    ) t 
```

或者

```
SELECT COUNT(file_id) AS totalFiles
  FROM (
    SELECT file_id
      FROM orders_files
     WHERE order_id = '88125' AND
           attachment_type IN ('1', '2')
     UNION ALL
    SELECT file_id
      FROM orders_preship_check_attachment
     WHERE order_id = '88125'
     UNION ALL
    SELECT id
      FROM orders_log_attachment
     WHERE order_id = '88125'
    ) t 
```

# apache-flex - 访问 DataProvider 数组集合

> ID：15152792
> 
> 赞同：0
> 
> 时间：2013-03-01T07:35:26.747
> 
> 标签：apache-flex, itemrenderer, dataprovider

如何从与该 DataProvider 相关的自定义 ItemRenderer 类访问 dataprovider 数组集合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:13:18.307

您可以在自定义 ItemRenderer 中使用肮脏的方式：

```
if (owner.hasOwnProperty("dataProvider")) trace( owner["dataProvider"] ); 
```

但我不建议这样做。ItemRenderer 不应该有对父或父属性的引用。

# sql - 插入并结合选择位置

> ID：15152794
> 
> 赞同：1
> 
> 时间：2013-03-01T07:35:30.587
> 
> 标签：sql, sql-server, tsql, sql-insert, select-into

假设我们有一个这样的查询（我的实际查询与此类似，但很长）

```
insert into t1(id1,c1,c2)
select id1,c1,c2 from t2 
where not exists(select * from t1 where t1.id1=t2.id1-1) 
```

此查询是先选择并全部插入，还是将每个选定项逐一插入？这很重要，因为我正在尝试根据之前插入的记录插入一条记录，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T07:38:19.430

这会运行一次 select 语句，然后基于该语句插入。这种方式效率更高。

由于您已经知道要插入的内容，因此您应该能够在选择查询中处理此问题，而不是查看已插入的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T07:38:32.210

首先运行**选择**查询。因此它将选择与您的过滤器匹配的所有行。之后执行插入。使用一个操作时没有逐行插入。

不过，如果您想做一些在每次插入后检查的递归操作，您可以使用 CTE（通用表表达式）。[http://msdn.microsoft.com/en-us/library/ms190766(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms190766(v=sql.105).aspx)

# php - php邮件功能不起作用

> ID：15152806
> 
> 赞同：0
> 
> 时间：2013-03-01T07:36:36.617
> 
> 标签：php, forms, email

在研究了几个问题并尝试了多种选择之后，我仍然无法让它工作！

我有这个不会发送的联系表格。

```
<form id="contact" method="post" action="process.php">
    <fieldset>  

        <label for="name">Name:</label>
        <input type="text" name="name" placeholder="Your name" title="Your name" class="required">

        <label for="email">E-mail:</label>
        <input type="email" name="email" placeholder="yourmail@domain.com" title="Your e-mail address" class="required email">

        <label for="phone">Phone number:</label>
        <input type="tel" name="phone" placeholder="+34 111 22 33 44" title="Your phone number">

        <p>&nbsp;</p>
        <input type="radio" name="rsvp" value="si">
        <span class="destacar-contacto">ACCEPT</span> the invitation<br>
        <input type="radio" name="rsvp" value="no">
        <span class="destacar-contacto">REJECT</span> the invitation<br>

        <p>&nbsp;</p>
        <p class="negrita-contacto">If you're coming: what would you like better?</p>
        <input type="radio" name="menu" value="carne"> Calf sirloin with foie<br>
        <input type="radio" name="menu" value="pescado"> Marinade salmon with dill<br>
        <input type="radio" name="menu" value="vegetariano"> Fungus risotto<br>

        <label for="mas">Is someone coming with you? Let us know their name and their prefered menu here:</label>
        <textarea name="mas"></textarea>

        <label for="message">Aditional message:</label>
        <textarea name="message"></textarea>

        <input type="submit" name="submit" class="boton" id="submit" value="Enviar" />

    </fieldset>
</form> 
```

这是 PHP 函数：

```
$name = strip_tags($_POST['name']);
$email = strip_tags($_POST['email']);
$phone = strip_tags($_POST['phone']);
$rsvp = strip_tags($_POST['rsvp']);
$menu = strip_tags($_POST['menu']);
$mas = strip_tags($_POST['mas']);
$message = strip_tags($_POST['message']);

mail( "formulario@ourdreamjourney.com", "rsvp",
"Name: $name\nEmail: $email\nPhone: $phone\nRsvp: $rsvp\nMenu: $menu\nMas: $mas\nMessage: $message\n",
"From: Our Dream Journey <mail@hotmail.com>" ); 
```

我尝试随机发送“姓名：$name”并收到一封电子邮件！但是然后将所有其他选项放回原处，再无...

有人可以帮助我吗？

非常感谢您！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:50:04.460

您可以使用 phpMailer 类。从这里下载这个库。发送电子邮件的许多示例。

[http://code.google.com/a/apache-extras.org/p/phpmailer/downloads/list](http://code.google.com/a/apache-extras.org/p/phpmailer/downloads/list)

**编辑：**

试试这个代码

```
 $headers  = 'MIME-Version: 1.0' . "\r\n";
    $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

    // Additional headers
    $headers .= 'From:Our Dream Journey <mail@hotmail.com>' . "\r\n";

    if(mail( "formulario@ourdreamjourney.com", "rsvp",nl2br("Name: $name\nEmail: $email\nPhone: $phone\nRsvp: $rsvp\nMenu: $menu\nMas: $mas\nMessage: $message\n"),
    $headers )) echo "Sent"; die; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:26:43.643

尝试将所有信息添加到标题元素：

```
$headers = "From: myplace@here.com\r\n";
$headers .= "Reply-To: myplace2@here.com\r\n";
$headers .= "Return-Path: myplace@here.com\r\n";
$headers .= "CC: sombodyelse@noplace.com\r\n";
$headers .= "BCC: hidden@special.com\r\n"; 
```

也许还有其他我不记得的选项，例如 MIME
也许另一个问题是某些变量会破坏字符串（关闭字符串）。尝试在某个地方打印它，一个带有 file_put_contents 的文件，或者只是回显它

# spring - Spring MVC：JSP 表单值绑定为 char 数组

> ID：15152812
> 
> 赞同：1
> 
> 时间：2013-03-01T07:37:16.227
> 
> 标签：spring, jsp, spring-mvc, jsp-tags

我这里有个问题。我的 jsp 中有一个表格，每个 td 都有一个输入框，
我的 html 源代码中包含以下内容

```
<input type="text" name="sessionVO.tableGroupDetails[2].colValues[0]" value="5"/> 
```

当我提交表单并调试 colvalues arraylist 时，我看到一个 char 数组 [5]，它应该只是字符串值 5。这是我的 colvalues 定义。

```
private List<String> colValues; 
```

下面是我的调试器的截图。 ![在此处输入图像描述](../Images/02170b1b466c47f0fe76d42783c6bceb.png) 谁能帮我理解发生了什么？提前谢谢

斯里尼瓦桑

# c# - 在路由代码中指定控制器/方法的“规范”是否不好？

> ID：15152815
> 
> 赞同：2
> 
> 时间：2013-03-01T07:37:37.070
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing, fluent-interface, api-design

我正在为 ASP.Net 设计一个替代 MVC 框架。我对该框架的部分目标是尽可能少地拥有“魔法”。我唯一的反思是将表单、查询字符串等内容绑定到一个普通的 ol' 类（具有一些用于忽略、转换等的可选属性）。因此，我绝对不做类/方法检测。一切都必须非常明确。我已经经历了大约 3 次 API“形状”的迭代。前两个实现了我没有魔法的目标，但它非常冗长且不易阅读......并且控制器通常必须完成 MVC 框架应该做的繁重工作。

所以，现在在第三次迭代中，我非常*努力*地让它正确。我做的一件有点*争议*的事情是路由代码。因为一切都是明确的并且不鼓励反射，所以我无法在控制器中搜索某些属性来解析路由。必须在路由级别指定所有内容。在第一次迭代中，这并没有完成，但它使控制器变得非常繁琐和冗长......

现在，我有这个流畅的 API 来指定路由。它已经有点超出了我最初的想象，现在作为一种方式来指定控制器的方法能够做什么以及它应该接受什么。

进入实际代码。实施无关紧要。您真正需要知道的唯一一件事是涉及到很多泛型类型。因此，这里是一些路由的快速示例：

```
var router=new Router(...);
var blog=router.Controller(() => new BlogController());
blog.Handles("/blog/index").With((ctrl) => ctrl.Index());
blog.Handles("/blog/{id}").With((ctrl,model) => ctrl.View(model["id"])).WhereRouteLike((r) => r["id"].IsInteger()); //model defaults to creating a dictionary from route parameters
blog.Handles("/blog/new").UsingFormModel(() => new BlogPost()).With((ctrl, model) => ctrl.NewPost(model)); //here model would be of type BlogPost. Also, could substitue UsingRouteModel, UsingQueryStringModel, etc 
```

还有一些其他方法可以实现，例如`WhereModelIsLike`对模型进行验证的方法。但是，这种“规范”是否属于路由层？路由层应指定哪些限制？什么应该留给控制器来验证？

我是不是让路由层担心太多了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:28:23.080

我认为路由太冗长了。我不想为 20 个控制器编写那种代码。特别是，因为它真的是重复的。
我在这里看到的问题是，即使是默认情况也需要详细的声明。只有在特殊情况下才需要那些冗长的声明。
它具有表现力和可读性，但您可能需要考虑打包高级功能。

看看下面的规范。这仅适用于单个控制器中的单个操作：

```
blog.Handles("/blog/new")
    .UsingFormModel(() => new BlogPost())
    .With((ctrl, model) => ctrl.NewPost(model))
    .WhereModelIsLike(m => m.Status == PostStatus.New); 
```

仅略微减少代码量的一种方法是允许指定根文件夹：

```
var blog=router.Controller(() => new BlogController(), "/blog");
blog.Handles("index").Wi..
blog.Handles("{id}").Wit..
blog.Handles("new").Usin.. 
```

减少默认情况下代码的另一个想法是为每个默认操作引入一个接口。控制器需要为支持的操作实现接口：

可能是这样的：

```
public interface ISupportIndex
{
    void Index();
}

public interface ISupportSingleItem
{
    void View(int id);
} 
```

现在，您可以提供诸如`blog.HandlesIndex();`,之类的方法`blog.HandlesSingleItem();`。
这些方法返回的内容与您现有的方法相同，因此可以进一步完善结果。
它们可以设计为仅当控制器实际实现接口时才可用的扩展方法。为了实现这一点，返回类型`router.Controller`需要是与控制器作为通用参数的协变接口，例如：

```
IControllerRoute<out TController> 
```

例如，扩展方法`HandlesIndex`将这样实现：

```
public static IRouteHandler HandlesIndex(
    this IControllerRoute<ISupportIndex> route)
{
    // note: This makes use of the "root" as suggested above:
    // It only specifies "index", not "/someroot/index".
    return route.Handles("index").With(x => x.Index);
} 
```

work on `IControllerRoute<ISupportIndex>`，仅在控制器实际支持它的情况下显示。

博客控制器的路由可能如下所示：

```
blog.HandlesIndex();
blog.HandlesSingleItem();

// Uses short version for models with default constructor:
blog.HandlesNew<BlogPost>().UsingFormModel();
// The version for models without default constructor could look like this:
//blog.HandlesNew<BlogPost>().UsingFormModel(() => new BlogPost(myDependency)); 
```

添加验证规则也可以更简洁一些：

```
blog.HandlesNew<BlogPost>().UsingFormModel()
    .When(m => m.Status == PostStatus.New); 
```

如果规范更复杂，可以将其封装在自己的实现类中`IModelValidation`。现在使用该类：

```
blog.HandlesNew<BlogPost>().UsingFormModel()
    .WithValidator<NewBlogPostValidation>(); 
```

* * *

我所有的建议只是让您当前的方法更容易处理的方法，所以我想到目前为止，它并没有真正**回答您的实际问题**。我现在这样做：

我喜欢我的控制器尽可能干净。将验证规则放在路由上对我来说看起来非常好，因为控制器操作现在可以假设它只使用有效数据调用。我会继续这种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T08:05:14.147

是的，恕我直言，路由不应包含有关模型甚至视图的逻辑。

如果你看看现在的轻量级 Web 框架（Nancy 等），路由概念不包括视图链接生成之类的东西。它完全是关于将 URI 模板映射到控制器。这从 ASP.NET 实现中消除了很多“魔力”。

[https://github.com/NancyFx/Nancy/wiki/Defining-routes](https://github.com/NancyFx/Nancy/wiki/Defining-routes)

但是，Nancy 方法仍然需要一些“框架”代码来了解哪些路由可用。因此，它不完全符合您的要求。

# asp.net - Sql存储过程中的两列相乘

> ID：15152816
> 
> 赞同：1
> 
> 时间：2013-03-01T07:37:37.973
> 
> 标签：asp.net, sql, sql-server, stored-procedures

我有一张桌子

```
StockID   ItemID   Quantity   Price 
```

现在我想选择这样的数据

```
StockID   ItemID   Quantity Price   TotalPrice(Quantity*Price) 
```

我试过这个

```
ALTER PROC [dbo].[SelectItemStock] 
@Item   int
as
BEGIN
    SELECT  Stock.*, (SELECT Quantity*Price FROM Stock) AS TotalPrice
    FROM    Stock
    WHERE   ItemID = @Item
END 
```

但它给了我错误`Subquery returned more than 1 value.`

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T07:38:33.767

你不需要做子查询来获得两列的乘积，直接相乘即可，

```
ALTER PROC [dbo].[SelectItemStock] 
@Item   int
as
BEGIN
    SELECT  Stock.*, 
            (Quantity*Price) AS TotalPrice
    FROM    Stock
    WHERE   ItemID = @Item
END 
```

# android - 我可以在 Wi-Fi Direct 中更改永久组中的组所有者吗？

> ID：15152817
> 
> 赞同：7
> 
> 时间：2013-03-01T07:37:38.913
> 
> 标签：android, android-wifi, wifi-direct, wifip2p

通过 Wi-Fi Direct 创建组时，我知道我可以创建一个持久组。

我的问题是：我可以创建一个持久组，但每次更改组所有者（即；每轮组所有者将是组中的设备之一）。

另外，创建持久组时，只需要第一次接受连接，对吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-10-07T17:58:49.560

您现在可以通过`WifiP2pManager.createGroup(..)`. 它将创建一个新组并使呼叫设备 (A) 成为组所有者，并且可以执行您所描述的操作。唯一的问题是，一旦您创建了一个组并连接到另一台设备，另一台设备 (B) 将记住该特定组。如果您尝试在 A 中创建一个新组（例如，再次打开应用程序）并尝试从 B 连接，它将自动加入旧组，并且不会显示为已连接到 A 中的新组。

编辑：有一种方法可以清除所有持久组。它是一个隐藏函数，称为`deletePersistentGroups`. 虽然这会消灭每一个，但它似乎是解决您的问题的唯一可靠方法。调用后调用它`WifiP2pManager.initialize(..)`，以便您可以使用该频道。

```
private void deletePersistentGroups(){
    try {
        Method[] methods = WifiP2pManager.class.getMethods();
        for (int i = 0; i < methods.length; i++) {
            if (methods[i].getName().equals("deletePersistentGroup")) {
                // Delete any persistent group
                for (int netid = 0; netid < 32; netid++) {
                    methods[i].invoke(wifiP2pManager, mChannel, netid, null);
                }
            }
        }
    } catch(Exception e) {
        e.printStackTrace();
    }
} 
```

我不太清楚为什么`netid`会上升到 31，我认为这是允许的最大记住连接数。代码取自[这里](https://android.googlesource.com/platform/cts/+/jb-mr1-dev%5E1%5E2..jb-mr1-dev%5E1/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-27T04:07:27.080

你的第一个问题的答案是否定的。“持久 P2P 组的 P2P 组所有者在 P2P 组成立时确定，并且在后续 P2P 组会话中是相同的 P2P 设备。” p2p 规范中的这一行表明您不能更改组所有者。

是的，需要在第一次接受连接。持久组允许重新连接而无需用户干预。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-07T20:22:06.653

android wifi direct 框架尚不支持持久化行为。

# html - 如何居中“div的中心”而不是div的“起点”

> ID：15152819
> 
> 赞同：0
> 
> 时间：2013-03-01T07:37:45.073
> 
> 标签：html, css, responsive-design

[![](../Images/d21c573939677cc5db0d83aa8dafacc1.png)](https://i.stack.imgur.com/0OfcM.jpg)
[（来源：[ctrlv.in](http://img.ctrlv.in/51305a45c3aa8.jpg)）]

当我将浏览器的宽度减小到小于约 700 像素时，我在响应式设计网站中遇到了这个问题。

我添加了`margin-left: auto; margin-right: auto;`，但输出保持不变。如果我放左：50％，它可能会显示一些奇怪的位置，因为我的标题是`postion:fixed`（尽管我没有在其他任何地方提到它的顶部/左侧/右侧/底部）。

徽标“ivetrolls”从页面中心开始......因此图像的中心没有居中。[页面](https://ilovetrollstestbeta.blogspot.com/2012/12/top-14-funniest-pictures-of-day.html) [（来源：][[ctrlv.in](http://img.ctrlv.in/51305a532c7fd.jpg)][）][![](../Images/de70c6fef22de7e1f4487d6a236c54c4.png)](https://i.stack.imgur.com/OV0co.jpg)

任何帮助将不胜感激。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:46:15.117

您需要将（第 663 行）的`display`属性更改为. 我在我的 Chrome 网络检查器中摆弄了一下，让它以这种方式工作。将其设置为也无妨。`#topdiv1``display: block``float``float: none`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T07:52:49.830

只需删除此样式

```
#header {
    text-align: center;
} 
```

在仅媒体屏幕宽度 767 中放置内联行号 428

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T07:54:17.687

尝试这样的事情：

```
<style>
.container {
  margin-left: auto;
  margin-right: auto;

  /* To see the affect of the above; not part of centering implementation. */
  background-color: #aaa;
  width: 200px;
}
</style>
<div class="container">
  Hello, world!
</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T07:54:42.740

取出`div.#topdiv3`并`float: left`添加`margin-left: auto; margin-right: auto`。然后移到`div.#topdiv3`外面`div.#outter-wrapper`

![在此处输入图像描述](../Images/693cc6268eef259fb0983f12f1739b7e.png)

# r - 计算每行与平均值的偏差

> ID：15152822
> 
> 赞同：0
> 
> 时间：2013-03-01T07:38:10.083
> 
> 标签：r, row, mean, deviation

使用以下代码，我编写了一个函数，该函数为我提供了每行 (1) 中值的平均值。现在我想计算第 i 行中每个值 (i,j) 与第 i 行中计算的平均值的偏差（使用函数）。我在下面写了一个函数（2），但它似乎不起作用。有人可以帮忙吗？

```
(1) n=28 
k=4

Avg  <- function (n,k) {
  for (i in 1:28) {
    AverageGrades[i]=((rowSums(Z)[i])/k)
  }
  return(AverageGrades)
}
AverageGrades=Avg(28,4)
AverageGrades 
```

在哪里

```
Z is:
> Z
            V1       V2       V3       V4
 [1,] 77.81146 80.37801 72.33208 77.73541
 [2,] 70.38343 62.33750 67.74083 71.18287
 [3,] 69.03035 74.43367 77.87572 77.89755
 [4,] 83.05206 83.07390 71.76214 80.16890
 [5,] 70.61465 60.07529 59.31726 69.93781
 [6,] 72.22979 59.44618 74.65016 68.75547
 [7,] 75.28208 79.15410 81.72065 73.67472
 [8,] 94.78838 88.89368 73.35592 84.79245
 [9,] 78.00313 66.96430 78.79857 95.90012
[10,] 66.70869 81.91267 76.01797 60.48021
[11,] 69.98514 54.44738 65.88391 64.10529
[12,] 80.21977 78.44115 74.95861 78.83063
[13,] 87.17776 76.04111 77.99261 74.81652
[14,] 75.67206 68.03770 56.90106 58.85256
[15,] 68.63858 79.25913 75.31810 82.69422
[16,] 65.40212 77.23639 94.33794 86.70359
[17,] 66.59640 75.00316 63.96433 75.79860
[18,] 65.77463 73.59685 63.05748 62.29946
[19,] 78.46871 77.71069 88.33124 84.39021
[20,] 71.37807 78.75419 65.97058 81.17457
[21,] 72.17469 75.61673 75.63857 64.32681
[22,] 65.97012 62.48757 66.35959 68.92614
[23,] 86.51898 82.57795 89.95407 77.17046
[24,] 77.95162 79.90312 76.72703 84.54925
[25,] 83.10545 79.92936 87.75158 77.21221
[26,] 69.64127 81.07779 79.29918 75.81663
[27,] 81.02364 69.71188 78.11864 67.07981
[28,] 71.42319 88.52474 80.89039 69.75374

(2)     Deviation= function (n,k){
for(i in 1:28){
    AverageGrades[i]=((rowSums(Z)[i])/k)
}
return(AverageGrades)
} 
{
    for (j in 1:4) {
dev[i,j]=(Z[i,j]-AverageGrades[i])
}
return(dev)
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T09:15:43.520

您不需要制作自己的功能。只需使用函数计算行均值`rowMeans()`并使用这些值来获得与这些均值的偏差。

```
Z<-matrix(sample(1:40),ncol=4)
Z
      [,1] [,2] [,3] [,4]
 [1,]   32   19   35    4
 [2,]   11   31   33   38
 [3,]   15   29    2    8
 [4,]   18   34    5    3
 [5,]   21   24   39   10
 [6,]    9   16   27   30
 [7,]   20    1   37   17
 [8,]   22   23   25   40
 [9,]   12    7   26    6
[10,]   13   28   36   14

rowMeans(Z)
 [1] 22.50 28.25 13.50 15.00 23.50 20.50 18.75 27.50 12.75 22.75

Z-rowMeans(Z)
        [,1]   [,2]   [,3]   [,4]
 [1,]   9.50  -3.50  12.50 -18.50
 [2,] -17.25   2.75   4.75   9.75
 [3,]   1.50  15.50 -11.50  -5.50
 [4,]   3.00  19.00 -10.00 -12.00
 [5,]  -2.50   0.50  15.50 -13.50
 [6,] -11.50  -4.50   6.50   9.50
 [7,]   1.25 -17.75  18.25  -1.75
 [8,]  -5.50  -4.50  -2.50  12.50
 [9,]  -0.75  -5.75  13.25  -6.75
[10,]  -9.75   5.25  13.25  -8.75 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:40:54.397

您可以使用`sweep`和`rowMeans`：

```
> set.seed(1) # for the sample to be reproducible
> x <- matrix(sample(1:12),4)
> sweep(x, 1, rowMeans(x))
           [,1]      [,2]      [,3]
[1,]  1.0000000 -1.000000  0.000000
[2,]  0.6666667  2.666667 -3.333333
[3,] -3.0000000  1.000000  2.000000
[4,] -0.6666667  2.333333 -1.666667 
```

有关详细信息，请参阅`?sweep`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T15:58:17.857

您可以使用 apply 以更“类似 R”的方式考虑您的循环。

```
( Z <- data.frame(V1=runif(28,0,100), V2=runif(28,0,100), 
                V3=runif(28,0,100), V4=runif(28,0,100)) )

( Z.dev <- Z - apply(Z, MARGIN=1, FUN=mean) ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T10:11:06.440

您可以使用`scale`获取列偏差（因为它执行居中），所以只需在转置上使用它，然后再次转置以获得所需的输出：

```
x <- matrix(sample(1:12),4)
x
     [,1] [,2] [,3]
[1,]    6    4    1
[2,]   12    3    7
[3,]    9   10   11
[4,]    2    5    8
t(scale(t(x),scale=F))
          [,1]       [,2]       [,3]
[1,]  2.333333  0.3333333 -2.6666667
[2,]  4.666667 -4.3333333 -0.3333333
[3,] -1.000000  0.0000000  1.0000000
[4,] -3.000000  0.0000000  3.0000000
attr(,"scaled:center")
[1]  3.666667  7.333333 10.000000  5.000000 
```

center 属性给出了行的意思。

# iphone - 使用 SDWebImageDownloader 显示和隐藏 ActivityIndi cator

> ID：15152824
> 
> 赞同：0
> 
> 时间：2013-03-01T07:38:17.227
> 
> 标签：iphone, ios, uiactivityindicatorview, sdwebimage

我在视图中的每个按钮单击时都使用 SDWebImageDownloader 类加载图像。

```
__block UIActivityIndicatorView *activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
activityIndicator.center = mainImage.center;
activityIndicator.hidesWhenStopped = YES;

[activityIndicator startAnimating];
[imgView setImageWithURL:url   placeholderImage:[UIImage imageNamed:@"placeholderLarge.png"] options:0 andResize:CGSizeMake(mainImage1.frame.size.width,imgview.frame.size.height) withContentMode:UIViewContentModeScaleAspectFit];
[imgView addSubview:activityIndicator]; 
```

我没有找到删除活动指示器的位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:45:39.777

您可以使用以下块..它更有效，对我有用...

```
[imgView setImageWithURL:url placeholderImage:[UIImage imageNamed:@"Default.png"] success:^(UIImage *image, BOOL cached){
        [activityIndicator stopAnimating];
    } failure:^(NSError *error){  
     //do any additional tasks if its failure
        }]; 
```

# c# - C# List Generic Extension Method vs Non-Generic

> ID：15152826
> 
> 赞同：7
> 
> 时间：2013-03-01T07:38:30.473
> 
> 标签：c#, generics, collections

这是一个简单的问题（我希望如此），集合类中有泛型和非泛型方法，`List<T>`例如`Where`和`Where<T>`.

例子：

```
 List<int> numbers = new List<int>()
        {
            1, 2, 3, 4, 5, 6, 7, 8, 9, 10
        };

        IEnumerable<int> evens = numbers.Where((x) =>
        {
            return x % 2 == 0;
        });

        IEnumerable<int> evens2 = numbers.Where<int>((x) =>
        {
            return x % 2 == 0;
        }); 
```

为什么要使用另一种（通用或非通用）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T07:41:56.650

它们是相同的方法（[此处](http://msdn.microsoft.com/en-us/library/bb534803.aspx)的文档）。`<int>`当编译器能够从上下文中自动且明确地推断类型时，方法名称之后的类型参数部分（即在这种情况下）是可选的。在这种情况下，该方法被应用于实现接口`IEnumerable<int>`的对象（即`numbers`type的对象`List<int>`），编译器可以从中安全地推断出类型参数是`int`。

另请注意，这`Where<T>`实际上是类的*扩展方法*，`System.Linq.Enumerable`可以应用于任何实现的类的对象，`IEnumerable<T>`例如`List<T>`.

# css - 尝试在 div 中编辑链接样式

> ID：15152830
> 
> 赞同：0
> 
> 时间：2013-03-01T07:38:40.673
> 
> 标签：css, html

所以我很难弄清楚这一点。

我想编辑特定 div 中的一些链接，看起来很简单吧？

就放

`#mydiv a:link {color:#B40404}`

但是它似乎对我不起作用！下面是我的代码：

```
<div id="leftcontent"><a href="http://google.de"><div id="MYDIV">why this is no work</div></a> 
```

CSS：

```
#MYDIV {
background-image: url(http://mypicture.com/mypic.jpg);
width:290px;
height:280px;
font-family:Tahoma,Geneva,sans-serif;
padding:25px;
background-repeat:no-repeat;
}

#MYDIV a:link {color:#B40404; } 
```

我不知道为什么这不起作用。任何帮助表示赞赏！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:41:17.987

HTML 应该如下所示（div 内的标签）

```
<div id="leftcontent">
<div id="MYDIV"><a href="http://google.de">why this is no work</a></div>
</div> 
```

CSS

```
#MYDIV a{color:#B40404; text-decoration:none} 
```

**[演示](http://jsfiddle.net/rb7cc/)**

* * *

在您的情况下（a 标签内的 div），您无需在 css 中写入 id 名称，直接为标签编写样式

`a{color:#B40404; text-decoration:none`}

**或者**

```
#leftcontent a{color:#B40404; text-decoration:none } 
```

**[演示 2](http://jsfiddle.net/rb7cc/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:11:36.057

这种方式在编码 html 中不是正确的格式 这不会在 html 验证器中验证

```
<div id="leftcontent">
  <a href="http://google.de">
  <div id="MYDIV">why this is no work</div>
  </a>
</div> 
```

而不是这样做

```
<div id="leftcontent">
  <div id="MYDIV">
  <a href="http://google.de">sample</a>
  </div>
</div> 
```

如果你想要整个`div`链接在你的`div` `a`

css

```
#MYDIV {
float:left;
}

#MYDIV a {
float:left;
width:100px;
height:100px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T07:42:48.463

您的 CSS 正在选择标签内的标签。您需要执行以下操作：

```
a #MYDIV { /* css code */ } 
```

或者

```
<div id="MYDIV"><a>My link here</a></div> 
```

编辑：

我刚刚在另一页上阅读了您的评论。在这种情况下，您需要向 中添加一个类或一个 ID，然后引用它。

```
<div id="leftcontent"><a href="http://google.de" id="myLink"><div id="MYDIV">why this is no work</div></a> 
```

**CSS**

```
#myLink { /* add style here */ } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T07:44:17.940

```
<div id="leftcontent"><div id="MYDIV"><a href="http://google.de">why this is no work</a></div> 
```

在 CSS 中

```
#MYDIV a:link {color:#B40404; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T07:56:34.627

我认为你不需要在你的案例中设置超链接的样式。

由于样式最终将应用于**您的 div ，因此包含在锚标记**中。因此，将**颜色：#your_hex_code赋予****#MYDIV**即可满足您的需要。这就是你所需要的。

如果您在 html 中犯了错误，Sowmya 的答案是完美的。

**可选的：**

此外，您可以使用 jquery 来设置样式， $("#your anchor").parent().css 或使用最接近的。

谢谢

# java - 将原生方法定义为 public native synchronized int doSum(int a, int b) 是否正确？

> ID：15152832
> 
> 赞同：0
> 
> 时间：2013-03-01T07:38:50.703
> 
> 标签：java, c++, multithreading, android-ndk, java-native-interface

我对多线程环境下的 JNI 实现感到困惑。我有一个如下的java类，代表本机接口：

```
public class Test {
    public native int doSum(int a, int b);
} 
```

而对应的native方法是用c实现的。

现在，我的问题是，我有多个线程，比如说 5。它们都在使用上面类 Test 的一个全局实例。那么，用 C 编写的本机方法代码是否可能是线程安全的？或者我是否需要像问题中提到的那样使其线程安全？

如果我为每个线程创建单独的 Test 类实例，然后调用本机函数怎么办？这会表现出线程安全吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:12:10.177

> 将原生方法定义为 public native synchronized int doSum(int a, int b) 是否正确？

如果您希望它是一个接受两个整数参数并返回一个整数结果的同步方法，这是正确的。只有你知道。

> 那么，用 C 编写的本机方法代码是否可能是线程安全的？

如果以这种方式实施，这是可能的。没有看到代码就不可能说。

> 或者我是否需要像问题中提到的那样使其线程安全？

如果它的实现还不是线程安全的，并且您的使用模式要求它是线程安全的，则需要使其成为线程安全的。这不是一个真正的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:02:58.157

我对用 C 实现的 Java 方法一无所知，但是在 C 和 Java 中，如果没有显式同步，就无法保证线程安全。两个线程可以同时执行相同的方法。

“线程安全”意味着方法可以在所有情况下容忍这种情况。想象一下，线程 A 执行了一半的方法，然后暂停，而线程 B 执行了其中的一部分，然后又恢复了……这会导致非常难以诊断的错误，所以最好小心。

一般来说，如果该方法正在读取或修改对象状态的任何部分，那么它应该被同步或保持在单个线程的本地。

关于这个主题有很多很好的阅读。如果您有兴趣，我建议您阅读一本关于并发编程的介绍性书籍。:)

# c# - 编译时出错？

> ID：15152835
> 
> 赞同：-2
> 
> 时间：2013-03-01T07:39:20.173
> 
> 标签：c#, .net

如何在编译短代码时修复错误。

这是代码：

```
 private void button1_Click(object sender, EventArgs e)
 {
      int a = 5;
      MessageBox.Show(a.ToString);
 } 
```

它给了我这两个错误：

> 错误 1 ​​'System.Windows.Forms.MessageBox.Show(string)' 的最佳重载方法匹配有一些无效参数`Error 2 Argument 1: cannot convert from 'method group' to 'string'`

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T07:40:11.173

你`()`在结尾处不见了`ToString`

```
MessageBox.Show(a.ToString()); 
```

你得到的错误：

```
Argument 1: cannot convert from 'method group' to 'string' 
```

那是因为`MessageBox.Show`需要一个字符串类型参数，并且由于您忘记`()`在最后指定，`a.ToString`是一个方法组。

[Marc Gravell](https://stackoverflow.com/a/886840/961113)从 Stackoverflow 上的问题中获得了以下方法组。

> 方法组是一组方法的名称（可能只是一个） - 即理论上 ToString 方法可能有多个重载（加上任何扩展方法）：ToString()、ToString(string format) 等 - 因此 ToString本身就是一个“方法组”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T07:40:04.530

你缺乏方法`()`，`ToString()`

```
private void button1_Click(object sender, EventArgs e)
 {
      int a = 5;
      MessageBox.Show(a.ToString()); // <<== HERE
 } 
```

# ssl - 购买 DNSimple SSL 证书以使其与 Heroku ssl 插件一起使用时，我应该在主机名中输入什么？

> ID：15152838
> 
> 赞同：0
> 
> 时间：2013-03-01T07:39:31.430
> 
> 标签：ssl, heroku, dnsimple

我对 Heroku 文档中的这一行感到困惑（[https://devcenter.heroku.com/articles/ssl-certificate](https://devcenter.heroku.com/articles/ssl-certificate)）

> 您必须在“主机名”字段中输入子域。将其留空将生成与 Heroku 的 SSL 端点不兼容的根域证书。

我想要的是[https://foo.com](https://foo.com)和[https://www.foo.com](https://www.foo.com)工作。

那么我需要在这个字段中填写什么来获得可以帮助我实现上述目标的 SSL 证书？

![DNSimple SSL 证书购买](../Images/77ac8ceeebead111decdbdea3629314d.png)

其余步骤（将 CNAME 设置为 Heroku 的 SSL 端点，添加别名以重定向根域等）对我来说很清楚。我只是停留在这一步，它应该是空白还是“www”或其他什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:02:53.940

你应该填写www。

www 只是一个子域，因此可以解决您的 www.foo.com 问题，但是您必须将裸域[https://foo.com](https://foo.com)重定向到 www 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T08:43:07.823

如果您希望您的证书对 rood 域和 www 主机名有效，那么您应该使用该`www.example.com`版本。

您也可以购买通配符，但除非您需要支持任何额外的子域，否则在这种情况下不值得。

[支持页面选择证书主机名](http://support.dnsimple.com/questions/48899-Selecting-the-Certificate-Hostname)中提供了更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T20:38:26.273

输入“*”作为您的主机名，它将对包括根子域在内的所有子域有效。

# ios - 我如何知道用户是否收到了 privatepub gem 发送的推送通知

> ID：15152839
> 
> 赞同：0
> 
> 时间：2013-03-01T07:39:32.487
> 
> 标签：ios, ruby-on-rails, sockets, private-pub, socketrocket

谁能告诉我与 PrivatePub 相关的解决方案。好吧，我正在使用 privatepub gem 向 ios 应用程序推送通知。我想知道是否有可能得到任何类型的响应，表明特定用户已收到通知而特定用户尚未收到通知。如果是，请将代码与您的答案一起发布，我将通过控制器发布通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:49:49.090

APNS 不提供任何传递报告的机制。您可以从 iOS 应用程序对您的服务器执行一些回调，以指示用户对通知采取了行动，但这不包括不采取行动的交付

# android - 如何在 Android 中获取子字符串？

> ID：15152842
> 
> 赞同：4
> 
> 时间：2013-03-01T07:39:40.033
> 
> 标签：android, string, file, substring

我正在尝试从字符串中获取最后一个子字符串，因为我有一个文件名 tulips.jpg 如何使用子字符串方法仅获取 .jpg？

我用过：

```
String Main_String =  dsfdsf.jpg or dfdfgfhfghgh.jpg or dsfsdfgdgsdg.jpg; 

(can have any length, not fixed length)

String str_jpg = Main_String.substring(1, Main_String.length()); 
```

///////////////////

```
for(int i=0; i < folderResponse.getPropertyCount(); i++) 
        {
            SoapObject SingleFolder = (SoapObject)folderResponse.getProperty(i);

        ID = Integer.parseInt(SingleFolder.getProperty(0).toString());
        KEY_SUBFOLDERNAME = SingleFolder.getProperty(1).toString();
        KEY_SUBJECTTYPE = SingleFolder.getProperty(3).toString();

            String[] str = KEY_SUBFOLDERNAME.split(".");
            for(int j = 0; j < str.length; j++){
                  System.out.println(""+str[j]);
                  // you got all name here use what ever you want.
                  if(str[1] == "jpg"){
                        FolderList item = new FolderList(JPGimages[0], SingleFolder.getProperty(1).toString();, SingleFolder.getProperty(3).toString();;
                        Subfolderdata.add(item);
                    } 
```

请立即提出建议

谢谢

```
 03-01 16:28:17.115: I/FolderID(3254): 13002
03-01 16:28:17.115: I/User_ID(3254): 1
03-01 16:28:17.175: D/dalvikvm(3254): GC_FOR_ALLOC freed 16K, 5% free 7881K/8263K, paused 52ms
03-01 16:28:17.175: I/dalvikvm-heap(3254): Grow heap (frag case) to 8.042MB for 262160-byte allocation
03-01 16:28:17.255: D/dalvikvm(3254): GC_FOR_ALLOC freed 3K, 6% free 8134K/8583K, paused 70ms
03-01 16:28:17.705: I/AllFolders(3254): anyType{FileFolderDetails=anyType{ID=13003; Name=Doc file; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13004; Name=My Pics; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13005; Name=Testing; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13075; Name=satnam; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13080; Name=Saini; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13084; Name=Jelly; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13092; Name=pushie; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13096; Name=Jarnail_Testing; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13099; Name=amarjeet; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13101; Name=Kuta; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13103; Name=tajmehal; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13105; Name=TextArea; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13107; Name=TextArea1; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13109; Name=TextArea2; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13115; Name=TextArea3; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13121; Name=TextArea5; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13124; Name=Check Char; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13128; Name=amitestinggggg; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13132; Name=kkk; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13136; Name=hhhhhhhhhhhhhhhhhh; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13140; Name=ravitevffvvgfdcvgbgvf; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13002; Name=Capture.PNG; URL=Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=13002; Name=Capture1.PNG; URL=Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=13002; Name=Chrysanthemum.jpg; URL=Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=13002; Name=Content4Work.pdf; URL=Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=13002; Name=Desert.jpg; URL=Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=13002; Name=DMS_Drag_and_Drop(2).doc; URL=Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=13002; Name=groups.jpg; URL=Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=13002; Name=Jellyfish.jpg; URL=Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=13002; Name=Koala.jpg; URL=Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=13002; Name=Lighthouse.jpg; URL=Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=13002; Name=office.jpg; URL=Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=13002; Name=Penguins.jpg; URL=Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=13002; Name=Rohit.docx; URL=Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=13002; Name=Tulips.jpg; URL=Tulips.jpg; SubjectType=File; }; }
03-01 16:28:17.725: W/System.err(3254): java.lang.ArrayIndexOutOfBoundsException: length=0; index=1
03-01 16:28:17.725: W/System.err(3254):     at com.web.dms.Files_Folders_Activity.subfolderTreedata(Files_Folders_Activity.java:106)
03-01 16:28:17.725: W/System.err(3254):     at com.web.dms.Files_Folders_Activity.onCreate(Files_Folders_Activity.java:56)
03-01 16:28:17.735: W/System.err(3254):     at android.app.Activity.performCreate(Activity.java:4465)
03-01 16:28:17.735: W/System.err(3254):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
03-01 16:28:17.735: W/System.err(3254):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
03-01 16:28:17.735: W/System.err(3254):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
03-01 16:28:17.735: W/System.err(3254):     at android.app.ActivityThread.access$600(ActivityThread.java:122)
03-01 16:28:17.735: W/System.err(3254):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
03-01 16:28:17.735: W/System.err(3254):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-01 16:28:17.735: W/System.err(3254):     at android.os.Looper.loop(Looper.java:137)
03-01 16:28:17.745: W/System.err(3254):     at android.app.ActivityThread.main(ActivityThread.java:4340)
03-01 16:28:17.745: W/System.err(3254):     at java.lang.reflect.Method.invokeNative(Native Method)
03-01 16:28:17.745: W/System.err(3254):     at java.lang.reflect.Method.invoke(Method.java:511)
03-01 16:28:17.745: W/System.err(3254):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-01 16:28:17.755: W/System.err(3254):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-01 16:28:17.779: W/System.err(3254):     at dalvik.system.NativeStart.main(Native Method)
03-01 16:30:37.056: D/AndroidRuntime(3283): Shutting down VM
03-01 16:30:37.066: W/dalvikvm(3283): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
03-01 16:30:37.077: E/AndroidRuntime(3283): FATAL EXCEPTION: main
03-01 16:30:37.077: E/AndroidRuntime(3283): java.lang.RuntimeException: Unable to instantiate application android.app.Application: java.lang.NullPointerException
03-01 16:30:37.077: E/AndroidRuntime(3283):     at android.app.LoadedApk.makeApplication(LoadedApk.java:482)
03-01 16:30:37.077: E/AndroidRuntime(3283):     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3909)
03-01 16:30:37.077: E/AndroidRuntime(3283):     at android.app.ActivityThread.access$1300(ActivityThread.java:122)
03-01 16:30:37.077: E/AndroidRuntime(3283):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1184)
03-01 16:30:37.077: E/AndroidRuntime(3283):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-01 16:30:37.077: E/AndroidRuntime(3283):     at android.os.Looper.loop(Looper.java:137)
03-01 16:30:37.077: E/AndroidRuntime(3283):     at android.app.ActivityThread.main(ActivityThread.java:4340)
03-01 16:30:37.077: E/AndroidRuntime(3283):     at java.lang.reflect.Method.invokeNative(Native Method)
03-01 16:30:37.077: E/AndroidRuntime(3283):     at java.lang.reflect.Method.invoke(Method.java:511)
03-01 16:30:37.077: E/AndroidRuntime(3283):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-01 16:30:37.077: E/AndroidRuntime(3283):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-01 16:30:37.077: E/AndroidRuntime(3283):     at dalvik.system.NativeStart.main(Native Method)
03-01 16:30:37.077: E/AndroidRuntime(3283): Caused by: java.lang.NullPointerException
03-01 16:30:37.077: E/AndroidRuntime(3283):     at android.app.LoadedApk.initializeJavaContextClassLoader(LoadedApk.java:362)
03-01 16:30:37.077: E/AndroidRuntime(3283):     at android.app.LoadedApk.getClassLoader(LoadedApk.java:305)
03-01 16:30:37.077: E/AndroidRuntime(3283):     at android.app.LoadedApk.makeApplication(LoadedApk.java:474)
03-01 16:30:37.077: E/AndroidRuntime(3283):     ... 11 more
03-01 16:30:46.506: D/dalvikvm(3315): GC_FOR_ALLOC freed 58K, 4% free 6909K/7171K, paused 52ms
03-01 16:30:46.517: I/dalvikvm-heap(3315): Grow heap (frag case) to 7.309MB for 488976-byte allocation
03-01 16:30:46.656: D/dalvikvm(3315): GC_CONCURRENT freed 1K, 4% free 7385K/7687K, paused 4ms+3ms
03-01 16:30:47.206: D/gralloc_goldfish(3315): Emulator without GPU emulation detected.
03-01 16:30:47.356: W/TextLayoutCache(3315): computeValuesWithHarfbuzz -- need to force to single run
03-01 16:30:52.366: D/InputEventConsistencyVerifier(3315): KeyEvent: ACTION_UP but key was not down.
03-01 16:30:52.366: D/InputEventConsistencyVerifier(3315):   in android.widget.EditText@41051d18
03-01 16:30:52.366: D/InputEventConsistencyVerifier(3315):   0: sent at 20208706000000, KeyEvent { action=ACTION_UP, keyCode=KEYCODE_TAB, scanCode=15, metaState=0, flags=0x8, repeatCount=0, eventTime=20208706, downTime=20208634, deviceId=0, source=0x101 }
03-01 16:30:53.956: I/LoginDetail(3315): Username jarnail@sassypuma.comPassword admin
03-01 16:30:54.036: D/dalvikvm(3315): GC_FOR_ALLOC freed 72K, 3% free 7633K/7815K, paused 44ms
03-01 16:30:54.356: I/myLogin(3315): 1
03-01 16:30:54.726: D/dalvikvm(3315): GC_CONCURRENT freed 362K, 7% free 7694K/8199K, paused 29ms+6ms
03-01 16:30:55.026: I/AllFolders(3315): anyType{TreeData=anyType{ID=13002; FolderName=My Drive; ParentID=0; CreatedBy=1; }; TreeData=anyType{ID=13006; FolderName=Testing1; ParentID=0; CreatedBy=1; }; TreeData=anyType{ID=13007; FolderName=Testing123; ParentID=0; CreatedBy=1; }; }
03-01 16:30:55.506: D/dalvikvm(3315): GC_CONCURRENT freed 362K, 7% free 7767K/8263K, paused 24ms+7ms
03-01 16:30:55.886: W/IInputConnectionWrapper(3315): finishComposingText on inactive InputConnection
03-01 16:30:57.246: I/FolderID(3315): 13002
03-01 16:30:57.246: I/User_ID(3315): 1
03-01 16:30:57.297: D/dalvikvm(3315): GC_FOR_ALLOC freed 17K, 5% free 7880K/8263K, paused 48ms
03-01 16:30:57.297: I/dalvikvm-heap(3315): Grow heap (frag case) to 8.041MB for 262160-byte allocation
03-01 16:30:57.356: D/dalvikvm(3315): GC_FOR_ALLOC freed 3K, 6% free 8133K/8583K, paused 52ms 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T07:51:04.590

假设您有如下字符串

```
String Main_String =  "dsfdsf.jpg&&dfdfgfhfghgh.jpg&&dsfsdfgdgsdg.jpg"; 
String[] a = Main_String.split("&&");
for(int i = 0; i < a.length; i++){
  System.out.println(""+a[i]);
  // you got all name here use what ever you want.
} 
```

只想要姓氏：

```
int last = Main_String.lastIndexOf('&&');
String laatname = Main_String.substring(last-2,Main_String.length()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-01T07:42:06.123

听起来您想要最后“。”中的所有内容。之后，这将是这样的：

```
int lastDot = text.lastIndexOf('.');
if (lastDot == -1) {
    // No dots - what do you want to do?
} else {
    String extension = text.substring(lastDot);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-25T07:00:59.290

您可以使用此代码来获取您的答案，例如：`String Main_String = dsfdsf.jpg`

```
Main_String.substring(path.lastIndexOf("/") + 1);    //for`jpg` 
```

`Main_String.substring(path.lastIndexOf("/"));` `//for`.jpg 享受你的代码:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-08T05:03:44.107

你可以使用这个：

```
public static String getSubString(String mainString, String lastString, String startString) {
    String endString = "";
    int endIndex = mainString.indexOf(lastString);
    int startIndex = mainString.indexOf(startString);
    Log.d("message", "" + mainString.substring(startIndex, endIndex));
    endString = mainString.substring(startIndex, endIndex);
    return endString;
} 
```

这`mainString`是一个超级字符串。像“I_AmANDROID.Devloper”，`lastString`是一个像“.”这样的字符串。就像`startString`“_”。所以这个函数返回“AmANDROID”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T07:45:53.337

如果你有类似的“tulips.jgp”：

```
"tulips.jpg".split("\\.") 
```

将返回一个字符串数组，其中包含第一项“郁金香”和第二项“jpg”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T05:40:45.240

在得到所有人的答案之后..我想我已经使用了 StringTokenizer。它真的很好用。

```
 StringTokenizer tokens = new StringTokenizer(KEY_SUBFOLDERNAME, ".");
                String first_string = tokens.nextToken();
                File_Ext = tokens.nextToken();
                System.out.println("First_string : "+first_string);
                System.out.println("File_Ext : "+File_Ext); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-24T08:53:47.133

作为 Jeen Broekstra，

如果这样输入会发生什么？

```
String Input = " ,, Num1: 12, Num2: 23, ";
String n1 = getSubString(Input, ",", "Num1:"); 
```

所以我认为稍微改变一下会更好：

```
public static String getSubString(String mainString, String startString, String lastString) {
    String endString = "";

    int startIndex = mainString.indexOf(startString);

    startIndex += startString.length();

    int endIndex = mainString.indexOf(lastString,startIndex );

    endString = mainString.substring(startIndex, endIndex);

    return endString;
}

String Input =" ,, Num1: 12, Num2: 23, ";
String n1=getSubString(Input,"Num1:",","); // n1=" 12"
String n2=getSubString(Input,"Num:",","); // n2=" 23" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-24T09:02:44.497

这需要您获取最后四个字符。我是这样做的：

```
String fileName = "tulips.jpg";
String fileExt = fileName.substring(fileName.length() - 4);
Toast.makeText(this, "File extension is: "+ fileExt, Toast.LENGTH_LONG).show(); 
```

# java - 如何在java中将Long数据类型转换为double数据类型？

> ID：15152844
> 
> 赞同：-5
> 
> 时间：2013-03-01T07:40:04.730
> 
> 标签：java, android

(isPlusClicked || op == '+'){

```
 long result = 0;
                String finaldata = edt.getText().toString();
                finaldata = finaldata.replace("(", "");
                finaldata = finaldata.replace(")", "");
                System.out.println(" the string is now ==== "+edt.getText().toString());

                String[] total = finaldata.split("\\+");
                System.out.println(" *************** "+total[0] + "************** "+total[1]);
                System.out.println(" the index in the string array are ..... "+sb.toString());
                ArrayList<String> alvalue = new ArrayList<String>();

                System.out.println(" the splited number is ==== "+total[0] +" the second number is "+total[1]);

                StringBuilder sb1 = new StringBuilder(edt.getText().toString());

                int inc = 0;
                for(int i = 0;i<sb1.length() ; i++){

                    char plus = sb1.charAt(i);

                    if(plus == '+'){

                        String[] totaly = finaldata.split("\\+| \\++ | \\+++");

                    if(inc>=1){ 

                        System.out.println(" *******inc value with result is ***************** "+result+"?&&&&&& "+inc);    
                    result = result + Long.parseLong(totaly[inc+1]);

                    }else if(inc<=0){
                        result =  Long.parseLong(totaly[inc]) + Long.parseLong(totaly[inc+1]);
                        //double myDouble = new Long(result).doubleValue();   
                        System.out.println(" Second value is---- ---- "+totaly[inc+1]);
                    }
                     inc = inc +1;
                    }
                    edt.setText("");
                    edt.setText( String.valueOf(result));
                }

            } 
```

当我将值设为双倍时，例如：12345678+32164 比它给我的答案：5.12377842E8 并且当我尝试转换为长于 122.81+212.122 时它给出零（0）答案所以请告诉我我做了什么? 为正确答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:44:51.770

我认为您需要这个，尽管从您的问题中看不出任何迹象。

```
double myDouble = new Long(result).doubleValue(); 
```

# c# - 如何在 C# 中使用 BackgroundWorker

> ID：15152850
> 
> 赞同：2
> 
> 时间：2013-03-01T07:40:21.140
> 
> 标签：c#, backgroundworker

如何在 C# 中使用 BackgroundWorker？

实际上，我正在执行从名为`fill()`. 将结果显示到 pdfviewer 需要更多时间，所以我决定使用 backgroundworker 显示“处理图像”，并尝试使用它但未能实现

这是我的代码片段：

```
 private void bgwLoadFile_DoWork(object sender, DoWorkEventArgs e)
        {
            this.Invoke((MethodInvoker)delegate()
           {
               ???? 
           }); 
        }

        private void bgwLoadFile_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
          if (e.Cancelled == true)
          {
          }
          else if (e.Error != null)
          {
          }
          else
          {
           picLoading.SendToBack();
          }
       } 
```

当点击按钮**FILL**时调用 Fill 方法

```
private void btnFill_Click(object sender, EventArgs e)
        {
            if (btnFill.Text == "Fill")
            { 
                bgwLoadFile.RunWorkerAsync();
                picloading.BringToFront();

                Fill();
            } 
```

我是否需要在 DoWork 方法中添加 wat 语句，如果我尝试添加 FILL() 填充被调用两次...

谁能帮我吗

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T07:43:20.857

添加`Fill();`到您的`bgwLoadFile_DoWork`并从中删除`btnFill_Click`

只是一个旁注，您可能希望将您的`picLoading.SendToBack();`外部称为“其他”，就好像您出错或取消它会留在那里一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T08:13:09.567

所以让我们试着找到一些答案：

该方法`worker_DoWork()`将在另一个线程中执行。通过在该方法中调用，`this.Invoke()`您将把调用传递回 gui 线程，这使得后台工作人员的使用变得无用。相反，在 worker 方法中，您必须调用需要一些时间**且不与 gui 交互的**方法。如果这个被调用的方法产生任何结果（例如有一个返回值），你应该把这个信息写入变量`e.Result`。

该方法`worker_RunWorkerCompleted()`将再次在 gui 线程中调用。允许您获取结果并让它以某种方式与 gui 交互。由于这个方法将在 gui 线程上执行，因此它应该非常简单（或快速），否则您的 gui 将再次冻结。

因此，鉴于这些信息，让我们清理您的代码：

```
private void btnFill_Click(object sender, EventArgs e)
{
    if (btnFill.Text == "Fill")
    { 
        // Update the gui for the user
        // and start our long running task
        // (disable buttons etc, cause the
        // user is still able to click them!).
        picloading.BringToFront();
        bgwLoadFile.RunWorkerAsync();
    }
}

private void bgwLoadFile_DoWork(object sender, DoWorkEventArgs e)
{
    // Let's call the long running task
    // and wait for it's finish.
    Fill();
}

private void bgwLoadFile_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    // We're back in gui thread.
    // So let us show some results to the user.
    if (e.Cancelled)
    {
        // To support cancellation, the long running
        // method has to check some kind of cancel
        // flag (boolean field) to allow fast exit of it.
        labelMessage.Text = "Operation was cancelled.";
    }
    else if (e.Error != null)
    {
        labelMessage.Text = e.Error.Message;
    }

    // Hide the picture to allow the user
    // to access the gui again.
    // (re-enable buttons again, etc.)
    picLoading.SendToBack();
} 
```

# xcode - UITableView 推送新的 UITableView

> ID：15152855
> 
> 赞同：0
> 
> 时间：2013-03-01T07:40:57.723
> 
> 标签：xcode, uitableview

我有一个 UTTableView，它显示 SQLite 数据库中的项目列表。这很好用。我希望用户单击 ListView 中的一个项目，然后推送一个新的 TableView，该 TableView 显示 SQLite 数据库中另一个 ListView 上的数据。例如：用户从 TableView_1 的列表中选择 Apple 我希望新的 TableView 列表显示苹果的类型。我如何告诉第二个 TableView 用苹果的类型填充列表。任何想法都会很棒，我无法在我的项目中超越这一部分。大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T12:09:09.010

如 Matthisas 所示，您可以再次将数据加载到同一个表中。

或者，您可以转到加载数据的另一个 UITable（可能在另一个 View Controller 中）。很容易识别选中的行

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath { 
```

因此，您可以执行以下操作：

*   (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    selectedFruit=[selectionTableArray objectAtIndex:indexPath.row];

    [self performSegueWithIdentifier:@"showDetailsS​​egue" sender:self];

}

# mysql - MySQL错误代码1005 errno -1

> ID：15152857
> 
> 赞同：1
> 
> 时间：2013-03-01T07:41:06.647
> 
> 标签：mysql, mysql-error-1005

我正在尝试像我一直在做的那样对 Workbench 数据库进行正向工程。不过这次不同，它没有正常工作，而是给了我一个奇怪的错误。

```
Error Code: 1005\. Can't create table '~~~~~~~~~~~~~~~~~~~' (errno: -1) 
```

我尝试搜索 errno -1 是什么，但没有运气。任何人都知道此错误消息试图告诉我什么？

```
CREATE  TABLE IF NOT EXISTS `database`.`User` (

`Uid` MEDIUMINT UNSIGNED NOT NULL AUTO_INCREMENT ,

`Username` VARCHAR(45) NOT NULL ,

`Password` TINYTEXT NOT NULL ,

`Avatar` TINYTEXT NULL ,

`Status` CHAR(6) NOT NULL DEFAULT 'Active' COMMENT 'Active, Warned, Banned' ,

 PRIMARY KEY (`Uid`) )

  ENGINE = InnoDB; 
```

它还有其他部分，但它甚至无法通过任何表创建。还更改了数据库名称，很确定我拼写正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T08:04:07.847

我只是删除并在[SQL Fiddle](http://sqlfiddle.com/#!2/ab9a8/1)`database.`上运行您的查询，它可以工作：

```
CREATE  TABLE IF NOT EXISTS `User` (

`Uid` MEDIUMINT UNSIGNED NOT NULL AUTO_INCREMENT ,

`Username` VARCHAR(45) NOT NULL ,

`Password` TINYTEXT NOT NULL ,

`Avatar` TINYTEXT NULL ,

`Status` CHAR(6) NOT NULL DEFAULT 'Active' COMMENT 'Active, Warned, Banned' ,

 PRIMARY KEY (`Uid`) )

  ENGINE = InnoDB; 
```

看看[InnoDB 错误代码](http://dev.mysql.com/doc/refman/5.6/en/error-messages-server.html)，因为它说：

```
Error 1005 (ER_CANT_CREATE_TABLE)

Cannot create table. If the error message refers to error 150, table creation failed because a foreign key constraint was not correctly formed.
If the error message refers to error –1, table creation probably failed because the table includes a column name that matched the name of an internal InnoDB table. 
```

# python - 使用带有 eval() 的变量名字典

> ID：15152864
> 
> 赞同：-1
> 
> 时间：2013-03-01T07:41:44.260
> 
> 标签：python

我知道 eval() 对于这样的事情非常有用：

```
x = 3
y = 2
myformula = "x + y"
print eval(myformula)
>>> 5 
```

但是，如果我不想硬编码变量名称和值而是使用字典怎么办？

```
mydict = {'x':3, 'y':2, 'z':5}
myformula = "x + y + z"
print eval(myformula)
>>> 10
or,
mydict = {'a':100, 'b':10, 'c':1}
myformula = "(a * b) - c"
print eval(myformula)
>>> 999 
```

我查找了如何将变量分配给变量，但我无法将其他答案应用于我的问题。我仍然想为 myformula 字符串保留该符号。任何帮助，将不胜感激。

谢谢。

伊利诺伊州保罗
芝加哥

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T07:44:12.890

这就是第二个和第三个参数`eval`的用途（阅读[文档](http://docs.python.org/2/library/functions.html#eval)）：

```
>>> d = {'x':3, 'y':2, 'z':5}
>>> eval("x + y + z", d)
    10 
```

请注意，使用`eval`任意用户输入是不安全的（想想`rm -Rf /`）。躲开它。

# java - 使用 mandrill 发送邮件时附件的文件大小限制

> ID：15152866
> 
> 赞同：1
> 
> 时间：2013-03-01T07:41:48.197
> 
> 标签：java, email, mandrill

山魈附件的文件大小限制是多少？
在 mandrill 站点中，他们仅提供有关最大消息大小的详细信息。（10MB）

非常感谢任何帮助，在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:28:38.853

您可以发送任何大小的附件，只要总邮件大小不超过 25MB。因此，如果您有一个 5MB 的附件和另一个 2MB 的附件，并且您的 HTML/文本部分小于 1MB，那么您仍然会受到总邮件大小的限制。请记住，当附件采用 Base-64 编码时，它们占用的空间比它们在磁盘上的空间多 1/3，因此如果您的附件在磁盘上为 3MB，那么它在经过 Base-64 编码后将是 4MB。您可以在[官方文档](https://mandrill.zendesk.com/hc/en-us/articles/205582407-Does-Mandrill-Support-Attachments-)中阅读更多相关信息。

如果您有其他问题或对您的帐户有任何具体问题，请随时给我们发送电子邮件。[您可以在help.mandrill.com](http://help.mandrill.com)提交请求。

# php - 如何使用 php 从数据库中添加时间/持续时间

> ID：15152870
> 
> 赞同：1
> 
> 时间：2013-03-01T07:41:57.960
> 
> 标签：php, database, datetime, add

我有来自数据库的数据。

```
+----+------------+----------+
| id |     date time        |  duration |
+----+------------+----------+-----------
| 3  | 2012-12-20  09:28:53 |     ?     |
| 1  | 2012-12-20  19:44:10 |    ?      |
| 2  | 2012-12-23  16:25:15 |           |
| 4  | 2012-12-23  18:26:16 |           |
| 4  | 2012-12-24  08:01:27 |           |
| 5  | 2012-12-29  20:57:33 |           | 
| 5  | 2012-12-29  20:57:33 |           | 
+----+------------+----------+------------ 
```

*   id 的持续时间`#1`应等于日期 id `#2`- id #1
*   id 的持续时间`#2`应等于日期 id `#3`- id #2

如果`id`相同，则会添加。

抱歉，这只是我的想法，在 php 中仍然很新，所以我不知道如何开始。任何帮助表示赞赏。谢谢

编辑按日期排序。第 1 条记录的持续时间或总时间 = 第 2 条记录 - 第 1 条记录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:50:02.440

如果我理解正确的话，有一些东西被称为`id=3`，它从“2012-12-20 09:28:53”开始，然后在“2012-12-20 19:44:10”结束，在同一秒`id=3`开始你想知道一切持续多久？

我会为所有记录做一个循环，但我会从结束开始（在 SQL: 中`...ORDER BY date_time DESC`），假设最后一个结束（即`id=5`从 2012-12-29 20:57:33 开始）是现在，那么我将持续时间计算为日期的减法（开始和结束），然后我会将事件开始作为前一个事件的结束，依此类推。

一个例子（未测试）：

```
$end=now();
$dbh=new PDO(...); // here you need to connect to your db, see manual
while($record=$dbh->query('SELECT id, datetime FROM table_name ORDER BY datetime DESC')->fetchObject()){
  $start=$record->datetime;
  echo $duration=$end-$start; // convert $end and $start to timestamps, if necessary
  $end=$start; // here I say that next (in sense of loop, in fact it is previous) record will end at the moment where this record started
} 
```

这并不总和，因为我不知道你将如何存储你的数据，但我认为你会管理这个。

已编辑

一开始我定义了一个数组：

```
$durations=array(); // this will hold durations
$ids=array();  // this will hold `id`-s
$last_id=-1; // the value that is not existent 
```

然后代码如下，而不是`echo`我放这个：

```
$duration=$end-$start;
if($last->id==$record->id){ // is this the same record as before?
  $durations[count($durations)-1]->duration+=$duration; // if yes, add to previous value
  }
else { // a new id
  $durations[]=$duration; // add new duration to array of durations
  $ids[]=$record->id; // add new id to array of ids
  $last_id=$record->id; // update $last_id 
  } 
```

然后`$end=$start`如上所述。

简单地查看所有持续时间和 ID

```
for($i=0;$i<count($durations);$i++){
  echo 'id='.$ids[$i].', duration='.$durations[$i].'<br />';
  } 
```

请注意，这些表的顺序是相反的。

# mysql - 即使使用 --skip-grant-tables 重新启动，也无法以 root 身份登录 mysql

> ID：15152872
> 
> 赞同：2
> 
> 时间：2013-03-01T07:42:16.567
> 
> 标签：mysql, root

我在 FreeBSD 7.3 上运行 MySQL 5.0.77。MySQL root 密码丢失，我想重置它。但我有以下问题。

`--skip-grant-tables`我停止了 MySQL 并使用以下选项重新开始：

```
/usr/local/etc/rc.d/mysqld start --skip-grant-tables 
```

该服务启动，但是当我尝试在没有密码的情况下登录时：

```
 mysql -u root 
```

我得到这个回应：

> 错误 1045 (28000): 用户 'root'@'localhost' 的访问被拒绝（使用密码：否）

我可以以其他用户（缺乏 SUPERUSER 权限）的身份登录，但不能以 root 身份登录。有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:35:59.777

这就是我的诀窍：

[https://help.ubuntu.com/community/MysqlPasswordReset](https://help.ubuntu.com/community/MysqlPasswordReset)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-03T07:15:41.297

我尝试`sudo systemctl set-environment MYSQLD_OPTS="--skip-grant-tables --skip-networking"`重新启动 mariadb 服务器，但仍然收到拒绝访问错误`sudo mysql -u root`。

对我有用的是：

```
sudo systemctl stop mariadb
sudo /usr/sbin/mysqld --skip-grant-tables --skip-networking &
sudo mysql -u root 
```

现在在 mysql 控制台中：

```
FLUSH PRIVILEGES; 
```

当我这样做时出现错误：

```
SET PASSWORD FOR root@'localhost' = PASSWORD('password'); 
```

但这有效：

```
UPDATE mysql.user SET Password=PASSWORD('password') WHERE User='root'; 
```

完成：

```
FLUSH PRIVILEGES;
exit 
```

回到外壳：

```
sudo /etc/init.d/mysql stop 
```

对我来说，我仍然可以使用连接，`mysql -u root`所以我以一种不好的方式停止了服务器：获取 PID(s)`ps -aux | grep mysql`并终止它们`sudo kill -9 <pid>`

一旦我们确定 mysql 服务器没有运行，请以正常方式重新启动：

```
sudo systemctl start mariadb 
```

现在将再次需要密码，但我们知道 root 密码是什么。

在 final 之前，如果您尝试使用该方法`systemctl start mariadb`，可能希望安全运行。`sudo systemctl set-environment MYSQLD_OPTS=""`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-08T06:23:03.560

我刚刚经历了一些类似的情况，经过一番挫折后，我意识到我的计算机上运行了 2 个 MySQL 安装，一个在我的操作系统中，一个在本地服务器包中。就我而言，这个烦人的情况刚刚解决了关闭我的操作系统的 SQL 服务

# java - 如何将多个CA添加到tomcat中的信任库

> ID：15152873
> 
> 赞同：1
> 
> 时间：2013-03-01T07:42:17.037
> 
> 标签：java, tomcat, ssl

我按照以下教程实现了两种 SSL 身份验证：http: [//virgo47.wordpress.com/2010/08/23/tomcat-web-application-with-ssl-client-certificates/](http://virgo47.wordpress.com/2010/08/23/tomcat-web-application-with-ssl-client-certificates/)

服务器上的结构： **cacerts.jks**将**my_ca**作为可信证书条目 **keystore.jks**将**sercer**作为密钥对条目

浏览器：安装了**我的 CA**生成的**Client.cer**

 **如果我访问应用程序 url，浏览器现在会弹出我的“客户端”证书以供使用，我单击证书并单击确定，将显示网页。

现在我有一个实际的 ProductionCertificate MyProdCer 链是：**MyProdCer -> IssuerCA -> IntermediateCA-> RootCA**

我已更新服务器上的 cacerts.jks 以包含 IssuerCA、IntermediateCA 和 RootCA 证书以及原始 my_ca 浏览器现在弹出两个选项 1.'Client' cert & 2.'MyProdCer' 如果我选择 1\. Client cer 那么它可以工作像往常一样，没问题

但是，如果我选择 2\. 'MyProdCer' 然后浏览器显示

```
Certificate-based authentication failed - Error 117 (net::ERR_BAD_SSL_CLIENT_AUTH_CERT): Bad SSL client authentication certificate. 
```

我错过了什么，请指教。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-20T21:28:31.963

您需要 JKS 完全信任 ca。使用 portecle，您可以编辑 JKS 文件。在您的教程中，使用 Java 找到这个“truststoreFile”，您可以这样做

```
-Djavax.net.ssl.trustStore=adminca.jks -Djavax.net.ssl.trustStorePassword=iofesac123 
```**

# linux - 更改默认目录结构

> ID：15152884
> 
> 赞同：1
> 
> 时间：2013-03-01T07:43:14.233
> 
> 标签：linux, unix, directory-structure, linux-from-scratch, distro

如果我启动一个新发行版（例如[LFS](http://www.linuxfromscratch.org/lfs/)）：

1.  如何更改目录结构？
2.  准备好后我应该期待什么？（可能无法在不修改的情况下安装大部分软件包，对吧？

但是，在你投反对票之前：我被要求为他们需要（实际上，想要）一个新的目录结构并进行一些更改的特定项目制作一个新发行版，例如删除`var`和`bin`目录，但不会停止系统. 这个发行版的应用非常有限，所以我认为这应该没什么大不了的，因为他们只需要安装几个包。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T07:49:26.507

这些是我想到的几个指针，绝对是不完整的：

1.  您`PATH`应该在启动脚本中进行更新，例如`~/.bashrc`、`/etc/profile.d`等，以反映更新后的目录。
2.  配置文件往往会`/var`经常使用。( `/var/log`, `/var/tmp`) 您需要修改所有这些位置引用。
3.  基本上，您的内核将启动，它将在或等效`/sbin/init`时启动初始化。`/etc/rc.d`如果您开始跟踪在这些启动脚本中调用的所有脚本和服务，我相信您应该能够捕获您需要修改路径名的所有位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-08T18:32:51.673

您可以创建一个名为 system 的文件夹并将所有文件移动到该`/system`文件夹​​中。然后创建符号链接，这样系统仍然可以使用。例子：

`su -i`

`cd /`

`mkdir system`

`mv /usr /system/usr`

`ln -s /system/usr /usr`

我刚刚做到了........它破坏了我的系统 XD（我认为这是因为我将所有文件都移到了`/system`，包括`/boot`GRUB 使用的女巫）

如果您没有背景知识，则破坏系统的机会很大。例如，如果您移动`/bin`到`/system/bin`​​，那么之后您将无法创建符号链接，因为`ln`命令（这是一个程序）位于`/bin`文件夹中，因此移动它最终会出错。

另外，请查看基于我刚刚所做的[gobolinux.org 。](http://www.gobolinux.org)整个系统已重新组织并保持兼容性，他们创建了符号链接，以便在移植应用程序时不必重新编程应用程序。

# python - numpy：排除数组中的单盐和双盐

> ID：15152888
> 
> 赞同：0
> 
> 时间：2013-03-01T07:43:27.183
> 
> 标签：python, arrays, numpy

我将 Python 与`numpy`.

我有 numpy 数组`b`：

```
 b = np.array([True,True,True,False,False,True,True,False,False,False,True,False,True]) 
```

我需要分别替换数组`[False]`和`[False,False]`数组。（我需要排除数组的单盐和双盐）`[True]``[True,True]``False`

对于此示例：

```
out= np.array([True,True,True,True, True, True,True,False,False,False,True,True,True]) 
```

有人可以建议，**我怎么得到`out`？**

**PS：**如果我需要分别替换 arrays `[False]`, `[False,False]`, `[False,False,False]`and `[False,False,False,False]`on arrays `[True]`, `[True,True]`, `[True,True,True]`and `[True,True,True,True]`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T08:31:46.240

怎么用`scipy.ndimage.binary_dilation`&`scipy.ndimage.binary_erosion`

```
import numpy as np
from scipy import ndimage
b = np.array([True,True,True,False,False,True,True,False,False,False,True,False,True])
ndimage.binary_erosion(ndimage.binary_dilation(b), border_value=1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T08:28:52.613

这可能不是解决此问题的最佳方法，但请查看以下内容...

```
In [115]: b
Out[115]:
array([ True,  True,  True, False, False,  True,  True, False, False,
       False,  True, False,  True], dtype=bool)

In [116]: l = [(k,len(list(g))) for k, g in itertools.groupby(b)]

In [117]: l
Out[117]:
[(True, 3),
 (False, 2),
 (True, 2),
 (False, 3),
 (True, 1),
 (False, 1),
 (True, 1)]

In [118]: l2 = [(True, x[1]) if x[1] in [1,2] else x for x in l]

In [119]: l2
Out[119]: [(True, 3), (True, 2), (True, 2), (False, 3), (True, 1), (True, 1), (True, 1)]

In [120]: l3 = [[x[0]] * x[1] for x in l2]

In [121]: l3
Out[121]:
[[True, True, True],
 [True, True],
 [True, True],
 [False, False, False],
 [True],
 [True],
 [True]]

In [122]: l4 = [x for x in itertools.chain(*l3)]

In [123]: l4
Out[123]:
[True,
 True,
 True,
 True,
 True,
 True,
 True,
 False,
 False,
 False,
 True,
 True,
 True]

In [124]: out = np.array(l4)

In [125]: out
Out[125]:
array([ True,  True,  True,  True,  True,  True,  True, False, False,
       False,  True,  True,  True], dtype=bool) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T08:46:45.127

我还没有安装 numpy，但如果我正确理解你想要的，我认为下面的代码会让你想到在 numpy 中做类似的事情：

```
b = [True,True,True,False,False,True,True,False,False,False,True,False,True,
     False,False,False,False,True,False,False,True]
print b,'\n'

def grignote(X):
    it = iter(xrange(len(X)))
    for i in it:
        print 'i == %d     %s' % (i,X[i])
        if X[i]==False:
            j = (k for k in it if X[k]==True).next()
            print '  j == %d   %s   X[%d:%d]==%r' % (j,X[j],i,j,X[i:j])
            if j-i<3:
                print '  executing X[%d:%d]==%r' % (i,j,[True for m in xrange(j-i)])
                X[i:j] = [True for m in xrange(j-i)]
            else:
                print '  --- no execution ---   too long'

grignote(b)
print '\n',b 
```

结果

```
[True, True, True, False, False, True, True, False, False, False, True, False, True, False, False, False, False, True, False, False, True] 

i == 0     True
i == 1     True
i == 2     True
i == 3     False
  j == 5   True   X[3:5]==[False, False]
  executing X[3:5]==[True, True]
i == 6     True
i == 7     False
  j == 10   True   X[7:10]==[False, False, False]
  --- no execution ---   too long
i == 11     False
  j == 12   True   X[11:12]==[False]
  executing X[11:12]==[True]
i == 13     False
  j == 17   True   X[13:17]==[False, False, False, False]
  --- no execution ---   too long
i == 18     False
  j == 20   True   X[18:20]==[False, False]
  executing X[18:20]==[True, True]

[True, True, True, True, True, True, True, False, False, False, True, True, True, False, False, False, False, True, True, True, True] 
```

# google-chrome - Google Chrome 最近是否更改了 Textarea 功能？

> ID：15152893
> 
> 赞同：0
> 
> 时间：2013-03-01T07:44:03.520
> 
> 标签：google-chrome, textarea

就在今天，我为个人使用而编写的网站中的所有文本区域，托管在我的笔记本上/在我的笔记本上，每当我将文本剪切并粘贴到其中时，都会显示波浪状的红线。我绝对没有改变那些脚本中的任何东西！！！几个月没接触过 Apache 和 PHP 的 .ini 文件了，目前的堆栈是可靠和稳定的。

有没有其他人注意到类似的变化？事实上，谷歌是否在四处施压并入侵我的网站？

经过测试的 Firefox 并没有搞乱我网站的 textarea 内容，请写几行：

“没有靠近 .ini 文件/...”

“我经常选择在我的个人写作和代码中创建新词并使用讽刺拼写，而且突然间，所有该死的红色溅满了整个页面，这非常令人讨厌。”

将它们放到 Firefox 中网站的文本区域 [要清楚：在我的笔记本/本地主机上]，并且没有波浪线破坏“.ini”以及这些行中的故意拼写错误和新词。但是从今天开始，将这些行放到与正在使用 Chrome 查看的网站相同的文本区域中，这种改变和不受欢迎的行为就会出现。

如果有人最近遇到过这种现象，那么真正的问题（因为如果它是 Chrome 的变化就不太可能改变）我可以做什么，代码〜明智地否定它？编写一个脚本以某种方式将其关闭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:51:16.333

这可能是 Chrome 的拼写检查功能。如果要禁用站点上 textarea 或 input 元素的拼写检查，请使用[spellcheck 属性，](http://www.whatwg.org/specs/web-apps/current-work/multipage/editing.html#spelling-and-grammar-checking)例如：

```
<textarea spellcheck="false">
</textarea> 
```

这将为您网站的所有用户禁用 Chrome 中的红色下划线。

您还可以在 Chrome 中关闭拼写检查。不幸的是，具体操作方法在 Windows、OS X、Linux 等平台上有所不同。例如，在 OS X 上，我认为您可以关闭红色下划线，方法是按住 Ctrl 键单击文本区域，然后选择 Spelling and Grammar，然后取消选中 Check Spelling While Typing。

# ios - 如何更改uiimage中单个像素的颜色

> ID：15152894
> 
> 赞同：0
> 
> 时间：2013-03-01T07:44:10.390
> 
> 标签：ios, uiimage

我有一个 UIImage，它是山区景观的图像。我需要通过将现场相应的 2-3 个像素变为红色来显示此图像上的位置。我该如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T07:58:49.020

您可以像这样将图像绘制到图形上下文：

```
CGRect imageRect = CGRectMake(0, 0, width, height);
UIGraphicsBeginImageContext(size);
CGContextRef context = UIGraphicsGetCurrentContext();
//Save current status of graphics context
CGContextSaveGState(context);
CGContextDrawImage(context, imageRect, image.CGImage); 
```

然后在任何你想要的地方画一个点，如下所示：

```
//CGContextFillRect(context, CGRectMake(x,y,1,1));
//Fix error according to @gsempe's comment
CGContextFillRect(context, CGRectMake(x,y,1./(image.scale),1./(image.scale))) 
```

然后再次将其保存到 UIImage ：

```
CGContextRestoreGState(context);
UIImage *img = UIGraphicsGetImageFromCurrentImageContext(); 
```

您还应该注意图像的方向。[这](http://trandangkhoa.blogspot.ru/2009/07/iphone-os-drawing-image-and-stupid.html)是一些关于它的好文章。

# mysql - 如何从 MySQL 中的数据库中找出表和字段

> ID：15152898
> 
> 赞同：3
> 
> 时间：2013-03-01T07:44:21.433
> 
> 标签：mysql, sql, database

我正在开发一个基于 MySQL 的项目，其中我的数据库中有 57 个表。我需要根据存储的数据从数据库中查找表/表和字段。

我想在这里描述我的问题。

让我在我的数据库的 57 个表之一的字段中有数据“value1”，我只知道我的数据库中某处有数据“value1”，现在基于“value1”我想找出

1）存在哪个表“value1”。2) 该数据存储在哪个字段中。

我希望你能得到我想要的东西。提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T07:51:11.740

你应该看看下面的链接。

[http://code.google.com/p/anywhereindb/](http://code.google.com/p/anywhereindb/)

**或者**

```
<?php  
    $search_word = 'new.example.com';
    mysql_connect($host, $username, $password);

    $connection = mysql_connect('localhost','root','')or die(mysql_error());
    $database   = mysql_select_db('stackoverflow')or die(mysql_error());

    $sql = "SHOW TABLES FROM stackoverflow";
    $tables_result = mysql_query($sql)or die(mysql_query());

    echo "Look for '$search_word'\n\n";
    while ($table = mysql_fetch_row($tables_result))
    {
        echo "Table: {$table[0]}\n";
        //serach query for tables $table[0]     
    }
    mysql_free_result($tables_result);  
?> 
```

**使用 mysqli_* 或 PDO，因为 mysql_* 已被弃用。**

# iphone - UIControlStateHighlighted 和 UIControlStateSelected 有什么区别？

> ID：15152900
> 
> 赞同：13
> 
> 时间：2013-03-01T07:44:29.233
> 
> 标签：iphone, ios, objective-c, uibutton

我正在尝试为 UIButton 设置状态。

但我不知道 和 之间的`UIControlStateHighlighted`区别`UIControlStateSelected`。

谁能帮帮我？

谢谢和最好的问候。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-01T07:50:11.603

它们可以表示您想要的任何含义，但通常它们的含义如下：

突出显示 = 用户当前正在与一旦他们停止交互就会改变的事物进行交互（例如按住按钮）

Selected = 该项目是组中的当前活动项目（例如，分段控件中的选定项目）。这只能通过以编程方式设置来实现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T07:49:42.507

*   `UIControlStateHighlighted`= 当用户点击时，它会用一些闪光灯（在按钮背景中）突出显示按钮。

*   `UIControlStateSelected`= 它没有突出显示该按钮。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T07:49:49.013

来自官方文档：

> **UIControlStateHighlighted**控件的突出显示状态。当在跟踪过程中触摸进入和退出以及发生触摸事件时，控件将进入此状态。您可以通过突出显示的属性检索和设置此值。
> 
> **UIControlStateSelected**控件的选定状态。对于许多控件，此状态对行为或外观没有影响。但是其他子类（例如，UISegmentedControl 类）可能会根据它们选择的状态而具有不同的外观。您可以通过选定的属性检索和设置此值。

您的按钮会`highlighted`响应触摸事件。然后它可以`selected`处于组内的状态（用于分段控制）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T07:51:45.077

突出显示通常在触摸控件时暂时应用，选择是更永久的状态。想象一个复选框类型的按钮，它在被触摸时变暗 - 变暗突出显示，选中选中，未选中未选中。

通常，您永远不会手动设置突出显示状态，因为系统将设置/取消设置以响应触摸，而选择更安全。这尤其适用于按钮。

# android - Android，在 TableLayout 中设置列 大小

> ID：15152903
> 
> 赞同：0
> 
> 时间：2013-03-01T07:44:38.790
> 
> 标签：android, tablelayout

因此，我通过扩展布局文件从代码创建 TableLayout。我试图让第一行跨越两列，下一行包含两个 TextView：键和值。问题是值可能很长，所以我在 TableLayout xml 中使用`android:stretchColumns`settings `android:shrinkColumns`。现在键列和值列看起来不错，但首先，跨越，标题比屏幕尺寸更宽。

我的文件的当前情况如下所示：

tale_row.xml：

```
 <TableRow xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:paddingTop="5dp"
     android:paddingBottom="5dp"
     android:paddingLeft="10dp"
     android:paddingRight="10dp" >
        <TextView 
            android:id="@+id/key"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@color/gray"
            android:textStyle="bold"
            android:layout_marginRight="10dp" />
        <TextView 
            android:id="@+id/value"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@android:color/black" />"
 </TableRow> 
```

header_row.xml：

```
<TableRow xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView 
        android:id="@+id/header"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_span="2"
        style="@style/group_separator_style"
        android:layout_marginBottom="5dp"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp" />

</TableRow> 
```

表.xml：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:stretchColumns="1" >
</TableLayout> 
```

任何想法，可能是什么原因？将属性`clipChildren`和设置`clipToPadding`为 true 并没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:36:59.433

它看起来像设置`android:stretchColumns="1"`并`android:shrinkColumns="1"`解决了问题

# python - 如何快速计算二进制列表中 0 的数量？

> ID：15152912
> 
> 赞同：1
> 
> 时间：2013-03-01T07:45:44.710
> 
> 标签：python

对于像这样的数组`[0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0]`，有没有一种快速的方法来返回示例中的`0(s)`数量`5`？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T07:46:33.890

使用`list.count`：

```
your_list.count(0) 
```

和帮助：

```
>>> help(list.count)
Help on method_descriptor:

count(...)
    L.count(value) -> integer -- return number of occurrences of value 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T07:47:08.803

```
In [16]: l = [0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0]

In [17]: l.count(0)
Out[17]: 5 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T08:00:56.307

```
li = [0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0]
print len(li) - sum(li) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T08:01:01.967

你的选择，无论什么让你晚上睡觉：

```
l = [0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0]

print l.count(0)
# or maybe:
print len(filter(lambda a: a == 0, l))
# or maybe:
print len([0 for x in l if x==0]) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T10:45:38.990

您可以通过使用数组将速度提高 100 倍（这仅对大型列表很重要）...

这应该比 : 快 100 倍`my_list.count(0)`：

```
(my_array==0).sum() 
```

但是，如果您的数据已经排列为 numpy 数组（或者您可以在创建时将其放入 numpy 数组），它只会有帮助。否则转换`my_array = np.array(my_list)`会消耗时间。

# android - 三指触摸后关闭Android应用

> ID：15152915
> 
> 赞同：2
> 
> 时间：2013-03-01T07:46:02.167
> 
> 标签：android, android-fragments, android-viewpager

我想在三个手指触摸屏幕时关闭我的应用程序（就像 mac os 一样）。在我的应用程序中，我同时使用了碎片和视图寻呼机，但我不明白如何使用 event.getAction() 和 Action Mask。

我都用过

```
MotionEvent.ACTION_UP
MotionEvent.ACTION_POINTER_DOWN: 
```

但它们不起作用。

当使用不同的 ACTION_MASKED 应用程序时，会被多次调用。

```
int maxPointercount=0;
int previousPointercount=0;

public boolean onTouch(View v, MotionEvent event) {
    int currentpointerCount = event.getPointerCount();
    System.out.println("My pointer....." + currentpointerCount);

    int action = event.getAction() & MotionEvent.ACTION_MASK;
    System.out.println("pre......."+previousPointercount);
    System.out.println("max......."+maxPointercount);

    if(maxPointercount < previousPointercount){
        maxPointercount = currentpointerCount;
    }

    previousPointercount = currentpointerCount;

    if(action==MotionEvent.ACTION_) {
       if(maxPointercount>=3){
        maxPointercount = 0;
        Toast.makeText(MyclassActivity.this,"FingerToched!!"Toast.LENGTH_SHORT).show();
        Intent intent = newIntent(MyclassActivity.this,DashboardActivity.class);
        startActivity(intent);
        finish();
        //your code that will run 1 time
       }
       maxPointercount = 0;
       previousPointercount = 0;      
    }
    return super.onTouchEvent(event);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T08:56:49.700

这应该有效。

```
 @Override
    public boolean dispatchTouchEvent(MotionEvent event) {
        int currentpointerCount = event.getPointerCount();
        Log.d("hi", "My pointer....." + currentpointerCount);

        int action = event.getAction() & MotionEvent.ACTION_MASK;
        System.out.println("pre......."+previousPointercount);
        System.out.println("max......."+maxPointercount);

        if(maxPointercount < previousPointercount){
            maxPointercount = currentpointerCount;
        }

        previousPointercount = currentpointerCount;

        if(action==MotionEvent.ACTION_UP) {            
           if(maxPointercount==3){        
            finish();
            //your code that will run 1 time
           }
           maxPointercount = 0;
           previousPointercount = 0;      
        }
        return true;
        /** This worked for OP's specific case 
        return super.dispatchTouchEvent(event);
        **/
    } 
```

# iphone - iphone phonegap 应用程序中的错误 Filetranser 与服务器端 asp.net mvc

> ID：15152923
> 
> 赞同：0
> 
> 时间：2013-03-01T07:46:35.767
> 
> 标签：iphone, ios, cordova, asp.net-mvc-4

按照[本](http://zacvineyard.com/blog/2011/03/upload-a-file-to-a-remote-server-with-phonegap)教程，我创建了 iPhone 客户端用于文件传输。我可以选择要上传的文件，但是在上传到服务器时会出现如下错误。

```
2013-03-01 19:38:35.841 StampedeTest[1687:c07] FileTransferError {
code = 3;
"http_status" = 405;
source = "file://localhost/Users/davidroper/Library/Application%20Support/iPhone%20Simulator/6.0/Applications/5C506A40-959F-4A15-8D01-B3343EDB3257/tmp/cdv_photo_004.jpg";
target = "http://******.azurewebsites.net/api/FileUploadTest";
} 
```

用于上传的客户端代码

```
 function uploadPhoto(imageURI) {
        var options = new FileUploadOptions();
        options.fileKey="file";
        options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
        options.mimeType="image/jpeg";

        var params = new Object();
        params.value1 = "test";
        params.value2 = "param";

        options.params = params;
        options.chunkedMode = false;

        var ft = new FileTransfer();
        ft.upload(imageURI, "http://*****.azurewebsites.net/api/FileUploadTest", win, fail, options);
    } 
```

服务器端代码

```
public class FileUploadTestController : ApiController
{ 
    [WebMethod]
    public string Getupload()
    {
        if (HttpContext.Current.Request.Files["file"] != null)
        {
            HttpPostedFile file = HttpContext.Current.Request.Files["file"];
            string targetFilePath = "http://stampedemvc.azurewebsites.net/Content/img/" + file.FileName;
            file.SaveAs(targetFilePath);

            return file.FileName.ToString();

        }
        else {

            return "Error";

        }
    }
} 
```

我怎样才能使它工作？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:06:20.780

我让它工作了！

我将 apicontroller 更改为控制器

工作代码

```
 [HttpPost]
    public string Getupload()
    {

        HttpFileCollectionBase Files = Request.Files;

        bool fileSaved = false;

        foreach (string h in Files.AllKeys)
        {

            if (Files[h].ContentLength > 0)
            {
                string fileName = Files[h].FileName;
                int fileSize = Files[h].ContentLength;

                string serverPath = Path.Combine(Server.MapPath("..\\Content\\img\\"));

                if (!Directory.Exists(serverPath))
                {
                    Directory.CreateDirectory(serverPath);
                }

                try
                {
                    //Get & Save the File
                    Request.Files.Get(h).SaveAs(serverPath + fileName);
                    fileSaved = true;

                }
                catch (Exception ex)
                {

                }

            }
        }

        return "Success";
    } 
```

# java - 使用 IO 多路复用的 Java 回显服务器客户端

> ID：15152924
> 
> 赞同：0
> 
> 时间：2013-03-01T07:46:42.523
> 
> 标签：java, io, network-programming, client-server, socketchannel

我对客户端服务器和 Java 编程都比较陌生。有一个任务要做，我坚持使用这个程序来用 java 编写一个 echo 客户端和服务器。我总是在这里找到我的答案，所以我再次求助于 stackoverflow。

这是服务器：

```
public class Server_select {
public static void main(String[] args) throws IOException {
    int port = 4666;
    String address = "localhost";
    String channelserver = "Server Channel";
    String channelclient = "Client Channel";
    String typechannel = "Channel Type";
    ArrayList<Server_sockets> socketlist = new ArrayList<Server_sockets>();
    Iterator<Server_sockets> socketiterator = socketlist.iterator();
    ServerSocketChannel serverchannel = ServerSocketChannel.open();
    serverchannel.bind(new InetSocketAddress(address,port));
    serverchannel.configureBlocking(false);
    Selector selector = Selector.open();
    SelectionKey newconnectionkey = serverchannel.register(selector, SelectionKey.OP_ACCEPT);
    socketlist.add(new Server_sockets(serverchannel, newconnectionkey, channelserver));
    ArrayList<SelectionKey> selectedkeys = new ArrayList<SelectionKey>();
    Iterator<SelectionKey> keyiterator = selectedkeys.iterator();
    ByteBuffer buffer = ByteBuffer.allocate(4096);
    StringBuffer message = null;
    int count;
    for(;;){
        System.out.println("Entering the infinite for loop");
        if(selector.select() == 0){
            continue;
        }
        selectedkeys = (ArrayList<SelectionKey>) selector.selectedKeys();
        while(keyiterator.hasNext()){
            SelectionKey tempkey = keyiterator.next();
            while(socketiterator.hasNext()){
                if(socketiterator.next().key.equals(tempkey)){
                    if(socketiterator.next().channeltype == channelserver){
                        SocketChannel clientchannel = socketiterator.next().serverchannel.accept();
                        SelectionKey clientkey = clientchannel.register(selector, SelectionKey.OP_READ, SelectionKey.OP_WRITE);
                        socketlist.add(new Server_sockets(clientchannel,clientkey,channelclient));
                        System.out.println("Client connection established");
                    }
                    if(socketiterator.next().channeltype == channelclient){
                        if(socketiterator.next().key.isReadable()){
                            buffer.clear();
                            message = new StringBuffer("");
                            while((count = socketiterator.next().clientchannel.read(buffer))>0){
                                buffer.flip();
                                message.append(Charset.defaultCharset().decode(buffer));
                            }
                            System.out.println("Server here " + message);
                            buffer.clear();
                            while(!(socketiterator.next().key.isWritable())){
                                buffer.wrap(message.toString().getBytes());
                                while(buffer.hasRemaining()){
                                    socketiterator.next().clientchannel.write(buffer);
                                }
                                buffer.clear();
                            }
                        }
                    }
                }
            }
        }
    }
} 
```

}

这是客户：

```
public class Client_select {

SocketChannel clientchannel;
int port = 4666;
String address = "localhost";
String message = "Hey there!";
Selector selector = null;
SelectionKey key = null;

Client_select() throws IOException{
    this.clientchannel = SocketChannel.open();
    this.clientchannel.configureBlocking(false);
    this.clientchannel.connect(new InetSocketAddress(this.address,this.port));
    this.selector = Selector.open();
    this.key = this.clientchannel.register(this.selector, SelectionKey.OP_READ, SelectionKey.OP_WRITE);
}

public void write_to_socket() throws IOException{
    ByteBuffer buffer = ByteBuffer.wrap(message.getBytes());
    while(buffer.hasRemaining()){
        this.clientchannel.write(buffer);
    }
}

public void read_from_socket() throws IOException{
    ByteBuffer buffer = ByteBuffer.allocate(4096);
    StringBuffer message = new StringBuffer("");
    int count=0;
    while((count = this.clientchannel.read(buffer)) > 0){
        buffer.flip();
        message.append(Charset.defaultCharset().decode(buffer));
    }
    System.out.println("Read From Socket" + message);
}
public static void main(String[] args) throws Exception {
    Client_select obj = new Client_select();
    ArrayList<SelectionKey> keylist = new ArrayList<SelectionKey>();
    Iterator<SelectionKey> iterator = keylist.iterator();
    for(;;){
        System.out.println("Entering Infinite loop Client");
        if(obj.selector.select() == 0){
            continue;
        }
        keylist = (ArrayList<SelectionKey>) obj.selector.selectedKeys();
        while(iterator.hasNext()){
            if(iterator.next().isWritable()){
                obj.write_to_socket();
            }
            if(iterator.next().isReadable()){
                obj.read_from_socket();
            }
        }
    }
} 
```

}

错误是服务器因此错误而终止：线程“main”中的异常 java.lang.ClassCastException: sun.nio.ch.Util$2 cannot be cast to java.util.ArrayList at Server_select.main(Server_select.爪哇：40）

我只是想知道其余的都好吗？我想澄清我对此的一些其他疑问。提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T07:59:53.257

我对 java.nio 不是很有经验，但似乎[Selector.selectedKeys()](http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/channels/Selector.html#selectedKeys%28%29)返回的是 Set，而不是 ArrayList。

# grails - 使用 Spring Security 的“记住我”选项登录时出错

> ID：15152932
> 
> 赞同：2
> 
> 时间：2013-03-01T07:47:10.510
> 
> 标签：grails, spring-security

我正在使用 Grails 1.3.4 和 Spring Security Core 1.0.1。

如果我在登录时选择“记住我”选项，有时当我再次加载页面时会出现以下错误：

```
errors.GrailsExceptionResolver Error executing tag <g:render>: Error executing tag <sec:ifLoggedIn>: Cannot create a session after the response has been committed at D:/Workspace/steer/grails-app/views/templates/_header.gsp:18 at D:/Workspace/steer/grails-app/views/layouts/main.gsp:29
org.codehaus.groovy.grails.web.taglib.exceptions.GrailsTagException: Error executing tag <g:render>: Error executing tag <sec:ifLoggedIn>: Cannot create a session after the response has been committed at D:/Workspace/steer/grails-app/views/templates/_header.gsp:18 at D:/Workspace/steer/grails-app/views/layouts/main.gsp:29
at D__Workspace_steer_grails_app_views_layouts_main_gsp$_run_closure2.doCall(D__Workspace_steer_grails_app_views_layouts_main_gsp:66)
at D__Workspace_steer_grails_app_views_layouts_main_gsp$_run_closure2.doCall(D__Workspace_steer_grails_app_views_layouts_main_gsp)
at D__Workspace_steer_grails_app_views_layouts_main_gsp.run(D__Workspace_steer_grails_app_views_layouts_main_gsp:75)
at java.lang.Thread.run(Thread.java:662)
Caused by: org.codehaus.groovy.grails.web.taglib.exceptions.GrailsTagException: Error executing tag <sec:ifLoggedIn>: Cannot create a session after the response has been committed at D:/Workspace/steer/grails-app/views/templates/_header.gsp:18
at D__Workspace_steer_grails_app_views_templates__header_gsp.run(D__Workspace_steer_grails_app_views_templates__header_gsp:35)
... 4 more
Caused by: java.lang.IllegalStateException: Cannot create a session after the response has been committed
at D__Workspace_steer_grails_app_views_templates__header_gsp$_run_closure1.doCall(D__Workspace_steer_grails_app_views_templates__header_gsp:22)
at D__Workspace_steer_grails_app_views_templates__header_gsp$_run_closure1.doCall(D__Workspace_steer_grails_app_views_templates__header_gsp)
at grails.plugins.springsecurity.SecurityTagLib$_closure6.doCall(SecurityTagLib.groovy:130)
... 5 more 
```

有谁知道我为什么会收到这个错误？

**_Hearer.gsp**

```
 <%@ page import="com.mycompany.myapp.partymodel.roles.SystemUserRole" %>
    <sec:ifLoggedIn>
    <%
    def userId = session.SPRING_SECURITY_CONTEXT?.authentication?.principal?.id
    def userDetails = SystemUserRole.get(userId)
     %>
    <div class="mast_head">
        <ul>
            <li>Welcome ${userDetails?.party?.firstName}</li>
            <li> | </li>
            <li><a href="${createLink(controller: "systemUserRole", action: "editprofile")}">Profile</a></li>
            <li> | </li>
            <li><a href="${createLink(controller: "systemUserRole", action: "changepassword")}">Edit Password</a></li>
            <li> | </li>
            <li><a href="${createLink(controller: "logout", action: "index")}">Sign Out</a></li>
        </ul>
    </div>
    </sec:ifLoggedIn>
    <div id="grailsLogo" class="logo">
        <a href="http://www.mycompany.in/"><img src="${resource(dir:'images',file:'mycompany_trans.png')}" alt="Grails" border="0" height=67 /></a>
    </div> 
```

**LayoutTagLib.groovy**

```
 package com.mycompany.myapp.layout
    import  com.mycompany.myapp.trips.Trip

    class LayoutTagLib {
        static namespace = "my"

          def header = { attrs ->
            Trip.withNewSession {
              sec.ifLoggedIn() {
                out << "<div class="mast_head">
        <ul>
            <li>Welcome ${userDetails?.party?.firstName}</li>
            <li> | </li>
            <li><a href="${createLink(controller: "systemUserRole", action: "editprofile")}">Profile</a></li>
            <li> | </li>
            <li><a href="${createLink(controller: "systemUserRole", action: "changepassword")}">Edit Password</a></li>
            <li> | </li>
            <li><a href="${createLink(controller: "logout", action: "index")}">Sign Out</a></li>
        </ul>
    </div>"
              }
            }
          }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:37:56.407

我认为这是使用此类标签的限制，`layouts`因为它是在提交休眠会话后由 SiteMesh 处理的。

解决方案是将其包装在会话中（`withNewSession`域类的关闭）。就像是：

**LayoutTagLib 是一个 TagLib，可以用命令 create-taglib 创建**

```
grails create-tag-lib com.app.layout.LayoutTagLib 
```

**重要提示：**将“SomeDomain”替换为应用程序的任何现有域类。

```
class LayoutTagLib {
  static namespace = "my"

  def header = { attrs ->
    SomeDomain.withNewSession {
      sec.ifLoggedIn() {
        out << "Logged In"
      }
    }
  }
} 
```

这`out`是将在页面中打印的 html。因此，使用您在标题模板中的任何内容进行更改。

那么你有一个正确的**_header.gsp**吗？只需将`<sec:ifLoggedIn>`块替换为您的 taglib 调用即可。

```
<my:header /> 
```

**编辑：**

您需要将查询包装在`withNewSession`. 并从您的标题中删除内容，只需调用 taglib 即可。要获取用户数据，您可以使用`springSecurityService`.

```
package com.mycompany.myapp.layout
import  com.mycompany.myapp.trips.Trip

class LayoutTagLib {
    //dependency injection of the plugin service
    def springSecurityService

    static namespace = "my"

      def header = { attrs ->

        Trip.withNewSession {

          sec.ifLoggedIn() {

            def userId = springSecurityService.currentUser.id
            def userDetails = SystemUserRole.get(userId)

            //better transform this in a private method or a template!
            out << """<div class="mast_head">
              <ul>
                <li>Welcome ${userDetails?.party?.firstName}</li>
                <li> | </li>
                <li><a href="${createLink(controller: "systemUserRole", action: "editprofile")}">Profile</a></li>
                <li> | </li>
                <li><a href="${createLink(controller: "systemUserRole", action: "changepassword")}">Edit Password</a></li>
                <li> | </li>
                <li><a href="${createLink(controller: "logout", action: "index")}">Sign Out</a></li>
              </ul>
            </div>"""              
           }
         }
      }
} 
```

**_header.gsp**

```
<my:header/> <!-- This line will call your taglib!! -->
<div id="grailsLogo" class="logo">
        <a href="http://www.mycompany.in/"><img src="${resource(dir:'images',file:'mycompany_trans.png')}" alt="Grails" border="0" height=67 /></a>
    </div> 
```

# android - Android 如何在res/values中添加自定义xml文件以及如何向系统注册customvalues.xml

> ID：15152933
> 
> 赞同：21
> 
> 时间：2013-03-01T07:47:14.067
> 
> 标签：android

我想添加一个自定义 xml，其中包含指向 res/values 文件夹的 URL。我可以添加文件，但如何通过 getResources() 读取其内容？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-01T08:08:04.560

**更新：**这似乎不再起作用（但它曾经）并且您无法在 android.xml 中创建自己的自定义类型。现在只有[标准的可用资源类型有效](http://developer.android.com/guide/topics/resources/available-resources.html)。

因此，实现这样的事情的唯一方法是，按照建议使用您的单独文件**url.xml**，并将您的所有 URL 都放在该文件中，这样它就不会与其他字符串混淆。它只是提高了可读性和可维护性，AFAIK。

URL 项现在看起来像，

```
<item name="myUrl" type="string">http://myUrl.com</item> 
```

您需要以通常的方式访问：

```
String myurl = getResources().getString(R.string.myUrl); 
```

* * *

**原答案：**

尝试这样的事情： -

**网址.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <item name="myUrl" type="urls">http://myUrl.com</item>
</resources> 
```

在你的活动中，得到它： -

```
String s = getResources().getString(R.urls.myUrl); 
```

**注意：-**您无需在`xml`任何地方注册。只要确保它在`res/values`文件夹中可用。

**快照：-**

![我是如何使用的](../Images/8e18b628716579ebc610e96fcf5d77bf.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-09T10:36:25.850

1.  创建您的自定义 xml 文件，确保它位于 res 文件夹中（我已经通过将其放在 res/values 文件夹中进行了测试）
2.  确保您在此 XML 中放置的所有值都是[标准类型](http://developer.android.com/guide/topics/resources/available-resources.html)。
3.  然后，您可以使用相应的 R 调用。例如对于整数，您执行 R.integer.YOUR_CUSTOM_XML_VALUE。不管这个整数位于哪个 xml 中，只要它在 res 文件夹中，它就会被 R 注册。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-27T23:57:56.493

是的，您可以拥有一个自定义文件：我只是这样做了几次。1）制作一个新的xml文件。2）使用文件格式作为你的包装器示例：

```
<?xml version="1.0" encoding="utf-8" ?>
<resources>
    <item name="languages">
        <languages>
            <language>
                <isocode>
                    en-UK
                </isocode>
                <name>
                    English (UK)
                </name>
            </language>
        </languages>
    </item>
</resources> 
```

# iphone - 禁用选项卡栏的“更多”表格视图中的选项。问题：标签栏“更多”表格视图中 VC 底部的双栏

> ID：15152935
> 
> 赞同：0
> 
> 时间：2013-03-01T07:47:22.520
> 
> 标签：iphone, ios, objective-c, cocoa-touch

我有一个有八个选项卡的 Tab Bar VC。当然，其中四个会自动转移到“更多”表中。

每个选项卡 VC 都嵌入在导航控制器中。

首先，我想**禁用标签栏的****更多**表格视图中的一些选项。即对于tableview 中的特定单元格，用户交互是关闭的。

Secondly, a problem I'm facing is that when a VC in the **More** tableview is selected, the displayed VC has **TWO** Bars at the bottom(as seen in image). 最低的是 TabBar。没关系。但是，TabBar 上方会出现另一个额外栏。为什么会出现这种情况，我该如何解决这个问题？

[![一只忙碌的猫](../Images/e4177b9d3126be64b83aba5d2cc61f88.png)](https://i.stack.imgur.com/qCJGq.png)

# c++ - C++ 从另一个模板函数调用模板函数

> ID：15152940
> 
> 赞同：1
> 
> 时间：2013-03-01T07:47:44.380
> 
> 标签：c++, templates

我刚刚尝试了以下代码

```
class MailBox{
};

 template<typename T>
     void foo(T){
     cout << "In foo" << endl;
 }

template<typename T>
 void foo1(T){
     foo(T);
 }

 main()
 {
         MailBox m;
         std::vector<MailBox> m1;

         foo1(m1);
 } 
```

编译时出现以下错误

```
test1.cpp: In function âvoid foo1(T)â:
test1.cpp:15: error: expected primary-expression before â)â token 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T07:49:38.657

您缺少形式参数：

```
 template<typename T>
     void foo(T t) {
         cout << "In foo" << endl;
 }

 template<typename T>
     void foo1(T t) {
         foo(t);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T07:50:42.223

您忘记了参数的名称！

例如，`foo1()`应该如下所示：

```
template <typename T>
  foo1 (T myT) {
    foo(myT);
  } 
```

请记住，模板类型仍然是类型，您需要使用它们来声明这些类型的事物（如变量）。

# c# - 消除对 ASP.NET 网站和 ASP.NET WebAPI 的跨域/子域 OPTIONS 请求

> ID：15152942
> 
> 赞同：1
> 
> 时间：2013-03-01T07:48:11.987
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api, cors, amplifyjs

我有一个`ASP.Net MVC 4 Website`和另一个`ASP.Net Web API`项目。目前两者都托管`amplify.js`在不同的域上。我用来在前端使用 API。由于两个网站都托管在不同的域上，所以当我`API`从这个目的。）。这会导致我每次调用都会产生额外的请求，这会增加开销。我还尝试在子域上托管这两个网站，但请求仍然存在，我想摆脱这些额外的请求。`UI``CORS``OPTIONS``HTTP API``OPTIONS`

有什么办法可以消除这个`OPTIONS`请求吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T07:51:16.337

> 有什么方法可以消除 OPTIONS 请求？

您可以使用[`JSONP`](http://en.wikipedia.org/wiki/JSONP)代替 CORS。不幸的是，这可能不足以满足您的方案，因为 JSONP 仅适用于 GET 请求（jQuery 的`$.ajax`方法有此限制）。

或者，如果您将 2 托管在同一域上并且您没有违反[`same origin policy`](http://en.wikipedia.org/wiki/Same_origin_policy)，则可以使用正常的 AJAX 请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T08:05:58.160

为了防止跨域请求，源域和目标域必须完全相同：在主机、域和端口中（[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)）。但是，无论如何，您有一些选项可以防止 CORS：

1.  将网站和 API 放在同一个域中 - 有点明显;)
2.  创建某种服务器端代理脚本（PHP、Node.js 或任何你喜欢的），通过 curl 或任何类似于 API 的方式路由请求。这应该阻止 OPTIONS 标头，但需要另一个 HTTP 请求（AJAX <-> 网站 httpd <-> API httpd）。
3.  一个类似的解决方案是使用 Apache 作为反向代理（[howto here](http://www.apachetutor.org/admin/reverseproxies)）。与脚本解决方案一样，这也会产生两个 HTTP 请求，但我假设反向代理会导致更少的开销。
4.  您也可以使用[JSONP](http://en.wikipedia.org/wiki/JSONP)，但 API 需要支持它（因此您可能必须重新实现网站<->API 通信）并且您的 API 将不再是[RESTful](http://en.wikipedia.org/wiki/REST)（如果您关心的话）。

我会选择一种方式或方式三种方式，因为脚本解决方案感觉太笨拙了；）我还建议检查是否真的有必要在不同的域上运行 API 和网站。OPTIONS 标头通常不会造成太多开销，因此您可以考虑先优化代码的其他部分。

也许您可以将网站和 API 放在一个域中，而仅将 API 的数据库放在另一台服务器上？只是一个想法...

# jquery - 用jquery粘贴页脚

> ID：15152949
> 
> 赞同：0
> 
> 时间：2013-03-01T07:48:48.310
> 
> 标签：jquery

我刚刚开始我的 JQuery 之旅，并为粘性页脚制作了​​一个简单的脚本。

```
jQuery(document).ready(function($) {
    function StickyFooter() {
        var footer  = $('#footer');
        var pos     = footer.position();
        var height  = $(window).height();

        height = height - pos.top;
        height = height - footer.outerHeight();

        if (height > 0) {
            footer.css({'margin-top' : height+'px'});
        }
        else {
            footer.css({'margin-top' : '0px'});
        }
    }

    StickyFooter();

    $(window).resize(StickyFooter)
}); 
```

以上工作正常，但我想知道这是否正确完成。我是否正确创建了自定义函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:51:27.780

这看起来是正确的；但是您创建的功能是重复的功能。CSS ' [fixed' position 属性](http://davidwalsh.name/css-fixed-position)为您完成了这项工作。

一个例子：

```
.myFooter{
      position:fixed; 
      bottom:0;
      left:0
 }

 <div class="myFooter">
      This code is locked to the bottom of the window!
 </div> 
```

# php - php加密给出URL字符

> ID：15152950
> 
> 赞同：0
> 
> 时间：2013-03-01T07:48:49.340
> 
> 标签：php, mcrypt

嗨，我有一个“/”，编码后是 %2F。问题是，当我将其添加为 URL 的一部分并打开时，由于 / 之间存在 /，因此会抛出 404。所以我的问题是在 php 中有什么方法可以 1\. 加密并获取一个永远不会给出任何特殊字符的字符串 2\. 将盐传递给加密。

顺便说一下，以下是我的加密方法：

```
$string='16';
$key='ec5dc8c8'
$cipher_alg = MCRYPT_TRIPLEDES;
$iv = mcrypt_create_iv(mcrypt_get_iv_size($cipher_alg,MCRYPT_MODE_ECB), MCRYPT_RAND); 
$encrypted_string = mcrypt_encrypt($cipher_alg, $key, $string, MCRYPT_MODE_ECB, $iv); 
return base64_encode($encrypted_string); 
```

注意：当我使用这组特定的字符串和键时，我可以生成一个导致此问题的字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T07:50:25.827

试试这个：

`return urlencode(base64_encode($encrypted_string));`

更新：

使用标准散列函数进行加密。它不会返回任何无法进行 URL 编码的字符。

尝试这样的事情：

```
$string='16';
$key='ec5dc8c8'
$cipher_alg = MCRYPT_TRIPLEDES;
$iv = mcrypt_create_iv(mcrypt_get_iv_size($cipher_alg,MCRYPT_MODE_ECB), MCRYPT_RAND); 
$encrypted_string = mcrypt_encrypt($cipher_alg, $key, $string, MCRYPT_MODE_ECB, $iv); 
$encrypted_string = hash('sha256', "$encrypted_string");
return urlencode(base64_encode($encrypted_string)); 
```

# .net - WCF- System.ServiceModel.Channels.ServiceChannel 已中止

> ID：15152954
> 
> 赞同：1
> 
> 时间：2013-03-01T07:49:09.900
> 
> 标签：.net, wcf, duplex

以下是双工服务及其 WebConfig 文件。在服务中，发送客户端通过**TransmitUserData**方法向其发送数据，接收客户端通过**PublishUserData**从 CallBackContract 接收数据。

现在的问题是，如果我第一次运行客户端，它可以完美运行，但是如果我重新运行客户端，它会在**传输**时出现以下错误。

> 通信对象 System.ServiceModel.Channels.ServiceChannel 不能用于通信，因为它已被中止。

**双工服务合同**

```
 [ServiceContract(CallbackContract=typeof(IContactManagerCallBackService))]
    public interface IContactManagerUserService
    {
        [OperationContract(IsOneWay = true)]
        void SubscribeAsReceiver();

        [OperationContract(IsOneWay = true)]
        void SubscribeAsTransmitter();

        [OperationContract]
        void TransmitUserData(UserInfo info);

    }

    [ServiceContract]
    public interface IContactManagerCallBackService
    {
        [OperationContract(IsOneWay = true)]
        void PublishUserData(UserInfo info);        
    }

    [DataContract]
    public class UserInfo
    {
        [DataMember]
        public bool PaidUser { get; set; }

        [DataMember]
        public string ProfileName{ get; set;}

        [DataMember]
        public string ComputerName { get; set; }

        [DataMember]
        public string IPAddress { get; set; }

        [DataMember]
        public string MACAddress { get; set; }
    } 
```

**服务实施**

```
 [ServiceBehavior(InstanceContextMode=InstanceContextMode.Single)]
    public class ContactManagerUserService : IContactManagerUserService
    {
        SynchronizedCollection<IContactManagerCallBackService> receiverClients;

        public ContactManagerUserService()
        {
            receiverClients = new SynchronizedCollection<IContactManagerCallBackService>();
        }   

        public void SubscribeAsReceiver()
        {
            IContactManagerCallBackService client = OperationContext.Current.GetCallbackChannel<IContactManagerCallBackService>();
            receiverClients.Add(client);
        }   

        public void TransmitUserData(UserInfo info)
        {
            foreach (IContactManagerCallBackService receiverClient in receiverClients)
            {
                receiverClient.PublishUserData(info);                       
            }                
        } 
```

**网页配置**

```
 <system.serviceModel>
    <diagnostics>
      <messageLogging logEntireMessage="true" logMalformedMessages="true"
        logMessagesAtServiceLevel="true" logMessagesAtTransportLevel="true" />
    </diagnostics>
    <bindings>
      <netTcpBinding>
        <binding name="NewBinding0" maxConnections="1000"
          portSharingEnabled="true">
          <security mode="None" />
        </binding>
      </netTcpBinding>
    </bindings>
    <services>
      <service name="ContactManagerService.ContactManagerUserService">
        <endpoint address="mex" binding="netTcpBinding" bindingConfiguration=""
          name="dataEndPoint" contract="ContactManagerService.IContactManagerUserService" />
        <endpoint binding="mexTcpBinding" bindingConfiguration="" name="mexHttp"
          contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://localhost/ContactManagerUserService" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata httpGetEnabled="false" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

* * *

**编辑：**

代码第一次完美运行。实际上问题是由 Transmitter 造成的，我们从不订阅或取消订阅。 ![在此处输入图像描述](../Images/f1722d3fc2bcce6df342e87056a607d4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-14T03:08:17.670

第一个receiver退出后，它的channel仍然保存在service中的receiverClients集合中，所以下次发送的时候，server会尝试回调一个不存在的client。您必须在集合结束时将接收者从集合中移除，可能使用取消订阅合约操作。有很多方法可以实现这一点。这是一个例子。（这些只是更改 - 如果您想要整个项目，请告诉我。）

在 IContactManagerUserService.cs 中：

```
// receivers must identify themselves
[OperationContract(IsOneWay = true)]
void SubscribeAsReceiver(string receiverID);

// new operation
[OperationContract(IsOneWay = true)]
void UnSubscribeAsReceiver(string receiverID); 
```

在 ContactManagerUserService.cs

```
// replace synchronized collection with thread-safe dictionary
using System.Collections.Concurrent;

ConcurrentDictionary<string, IContactManagerCallBackService> receiverClients;

public ContactManagerUserService()
{
    receiverClients = new ConcurrentDictionary<string, IContactManagerCallBackService>();
}

public void SubscribeAsReceiver(string receiverID)
{
    IContactManagerCallBackService client = OperationContext.Current.GetCallbackChannel<IContactManagerCallBackService>();
    receiverClients.TryAdd(receiverID, client);
}

public void UnSubscribeAsReceiver(string receiverID)
{
    IContactManagerCallBackService client;
    receiverClients.TryRemove(receiverID, out client);
}

public void TransmitUserData(UserInfo info)
{
    foreach (IContactManagerCallBackService receiverClient in receiverClients.Values)
    {
        receiverClient.PublishUserData(info);                   
    }        
} 
```

在 ReceiverClient.Program.cs 中（不要忘记更新 ServiceReferences，因为合同已更改）：

```
// one way to uniquely identify this receiver
string rcvID = Guid.NewGuid().ToString();
// .... //
receivingClient.SubscribeAsReceiver(rcvID);
// .... //

Console.ReadLine();

// Important - this line must be executed, or service will again throw error. 
// So when debugging, don't just close window, press enter to execute this line. 
// In more robust setting, this would probably go in finally{} block, or in Dispose()

receivingClient.UnSubscribeAsReceiver(rcvID); 
```

**调试提示**您可能希望拥有一个可以在本地运行的服务版本，以便您可以单步执行并调试它。此外，当您无法在本地运行服务时，我发现将消息记录到服务日志非常有用。

您可以搜索 WCF 发布者/订阅者以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:32:27.403

1）您可以使用[IErrorHandle](https://stackoverflow.com/questions/15126788/how-to-add-global-error-handling-in-wcf-rest-service/15138044#15138044)来捕获此异常（可能有用）。通常在回调期间抛出异常（序列化/（un）KnownType（s）问题）。

2) 如果您在服务器/服务端（在 svclog 中）看不到问题 - 通信中止的根本原因可能在客户端。**查看您在客户端上的回调实现。如果在回调方法中抛出异常（引发事件处理程序等）并且它被吞没了（或者你因为某种原因错过了它，可能是因为它没有在 UI 线程或其他东西中抛出......调试器没有通知你） - 它会（或可能）中止通信（客户端代理将出现故障）。**

# android - 从 SD 卡读取 xml 文件不起作用

> ID：15152956
> 
> 赞同：0
> 
> 时间：2013-03-01T07:49:22.553
> 
> 标签：android, xml-parsing, xmlpullparser

我正在尝试从 sdcard 读取 xml 文件，但它不起作用。加载了空白活动并且 TextView 为空。如果我删除代码以读取 xml 并将文本设置为 t.setText("hello"); 它工作正常

代码在这里。

```
 public void onCreate(Bundle savedInstanceState) {

     super.onCreate(savedInstanceState);

     setContentView(R.layout.activity_sdcard1);

     TextView t;

     t=(TextView) findViewById(R.id.T1);

     try{

          File f = new File(Environment.getExternalStorageDirectory()+"/page1.xml");

          InputStream fileIS = new FileInputStream(f);

          // InputStreamReader input= new InputStreamReader(fileIS);

          xpp.setInput(fileIS,"UTF-8");

          eventType = xpp.getEventType();

          while (eventType != XmlPullParser.END_DOCUMENT){

             if(eventType == XmlPullParser.TEXT) {
                          t.setText(t.getText()+xpp.getText());
                  }
         }

       } catch (FileNotFoundException e1) {

            e1.printStackTrace();

       } catch (XmlPullParserException e) {

        // TODO Auto-generated catch block

        e.printStackTrace()
       }

    } 
```

```
 <?xml version="1.0" encoding="UTF-8"?>

<page1>

<Text1>Hello.</Text1>

<Text2>World!</Text2>

</page1> 和 sdcard/page1.xml 中的 xml 文件我尝试了不同的方法但不起作用。谢谢 ...

我现在发现我必须在 while 循环中编写两行代码

```
 eventType = xpp.next();

    eventType = xpp.getEventType(); 
```

现在它工作正常！感谢帮助....

            回答 #1

赞同：0

时间：2013-03-01T07:56:08.443

```
Try below code -

File rootDir = null;

            rootDir = Environment.getExternalStorageDirectory();

            try {
                File myFile = new File(rootDir.getAbsolutePath(), "Your file Name");
                FileInputStream fIn = new FileInputStream(myFile);

            } catch (Exception e) {

            } 
```

            回答 #2

赞同：0

时间：2013-03-01T07:58:17.077

尝试使用以下代码读取文件：

```
 File myFile = new File("/sdcard/page1.xml");
        FileInputStream fIn = new FileInputStream(myFile);
        BufferedReader myReader = new BufferedReader(
                new InputStreamReader(fIn));
        String aDataRow = "";
        String aBuffer = "";
        while ((aDataRow = myReader.readLine()) != null) {
            aBuffer += aDataRow + "\n";
            Log.d("File Is DATA:===>",aBuffer.toString());
        }
        myReader.close();
        Toast.makeText(getBaseContext(),
                "Done reading SD 'page1.xml'",
                Toast.LENGTH_SHORT).show();
    } catch (Exception e) {
        Toast.makeText(getBaseContext(), e.getMessage(),
                Toast.LENGTH_SHORT).show();
    } 
```

```

# c# - 如何更新数据库中的库存数量？

> ID：15152963
> 
> 赞同：-4
> 
> 时间：2013-03-01T07:49:36.153
> 
> 标签：c#, sql, winforms

我有 Windows 应用程序来添加购买信息。在将购买添加到数据库之前，用户从组合框中选择项目并添加到列表框中。当用户单击添加购买时，数据库中将有一个或多个项目。

那里项目的名称与数据库中的产品名称完全匹配。

我想获取列表框中每个项目的字符串，然后编写减少数据库中项目数量的 sql 查询。总数量存储在 Quantity 列下的表 Product 中。

有没有人有想法执行这项任务？

我正在尝试将列表框项的字符串一一传递给此方法

```
 public string Update(string product)
        {
            // Create connection object
            int ix = 0;
            string rTurn = "";
            OleDbConnection oleConn = new OleDbConnection(connString);
            try
            {
                oleConn.Open();
                string sql = "UPDATE [Product] SET [Quantity]=[Quantity] - 1 " + " WHERE [Product Name]= " + product;
                OleDbCommand oleComm = new OleDbCommand(sql, oleConn);

                oleComm.Parameters.Add("@product", OleDbType.Char).Value = product;

                ix = oleComm.ExecuteNonQuery();
                if (ix > 0)
                    rTurn = "Stock Updated";
                else
                    rTurn = "Update Failed";
            }
            catch (Exception ex)
            {

            }
            finally
            {
                oleConn.Close();
            }
            return rTurn;
        } 
```

以上方法将从以下方法中获取产品名称：

```
 public string updateStock()
        {
            string listItem = string.Empty;
            foreach (var listBoxItem in listBox1.Items)
            {

                if (listBox1.Items.IndexOf(listBoxItem) < listBox1.Items.Count - 1)
                {
                    listItem = listBox1.Items.ToString();
                }
            }

            return listItem;

        } 
```

我将从按钮事件处理程序中调用此代码

```
Update(updateStock()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:29:35.307

你可以尝试这样的事情：

```
public void UpdateStock()
{
    foreach (var listBoxItem in listBox1.Items)
    {
        string result = Update(listBoxItem.ToString());
    }
}

public string Update(string product)
{
    // Create connection object
    string rTurn = "";
    OleDbConnection oleConn = new OleDbConnection(connString);
    try
    {
        oleConn.Open();
        string sql = "UPDATE [Product] SET [Quantity]=[Quantity] - 1 WHERE [Product Name] = @product";
        OleDbCommand oleComm = new OleDbCommand(sql, oleConn);

        oleComm.Parameters.Add("@product", OleDbType.VarChar, 50).Value = product;

        oleComm.ExecuteNonQuery();

        rTurn = "Stock Updated";    
    }
    catch (Exception ex)
    {
        rTurn = "Update Failed";
    }
    finally
    {
        oleConn.Close();
    }
    return rTurn;
} 
```

**编辑**：您可以在添加参数时轻松指定大小 - 如上所示。50只是任意的。您应确保大小与目标 [产品名称] 列的大小相同。

# iphone - 如何将架构 armv7、armv7s 添加到 {name}.framework？

> ID：15152969
> 
> 赞同：0
> 
> 时间：2013-03-01T07:50:01.787
> 
> 标签：iphone, ios, xcode, frameworks, armv7

我在我的 iOS 应用程序中使用[libmusicxml2.framework 。](http://libmusicxml.sourceforge.net/)她是为 Mac OSX 构建的，当我在模拟器上运行它时一切正常。但是当我在设备上运行时，出现以下错误：

```
 Undefined symbols for architecture armv7:
  "vtable for MusicXML2::xmlreader", referenced from:
      MusicXML2::xmlreader::~xmlreader() in TransposerLibXML.o
      MusicXML2::xmlreader::xmlreader() in TransposerLibXML.o
  NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.
  "MusicXML2::xmlreader::read(char const*)", referenced from:
      +[TransposerLibXML transposeFileAtPath:interval:] in TransposerLibXML.o
      +[TransposerLibXML currentKeyInrevalForFile:] in TransposerLibXML.o
      +[TransposerLibXML moodForFile:] in TransposerLibXML.o
      +[TransposerLibXML songNameForFile:] in TransposerLibXML.o
      +[TransposerLibXML composerNameForFile:] in TransposerLibXML.o
  "MusicXML2::TXMLFile::print(std::ostream&)", referenced from:
      +[TransposerLibXML transposeFileAtPath:interval:] in TransposerLibXML.o
  "MusicXML2::transposition::transposition(int)", referenced from:
      +[TransposerLibXML transposeFileAtPath:interval:] in TransposerLibXML.o
  "vtable for MusicXML2::xml_tree_browser", referenced from:
      MusicXML2::xml_tree_browser::xml_tree_browser(MusicXML2::basevisitor*) in TransposerLibXML.o
  NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.
  "MusicXML2::xmlelement::getAttributeValue(std::string const&) const", referenced from:
      composernamevisitor::visitStart(MusicXML2::SMARTP<MusicXML2::musicxml<52> >&) in TransposerLibXML.o
  "MusicXML2::xml_tree_browser::browse(MusicXML2::xmlelement&)", referenced from:
      +[TransposerLibXML transposeFileAtPath:interval:] in TransposerLibXML.o
      +[TransposerLibXML currentKeyInrevalForFile:] in TransposerLibXML.o
      +[TransposerLibXML moodForFile:] in TransposerLibXML.o
      +[TransposerLibXML songNameForFile:] in TransposerLibXML.o
      +[TransposerLibXML composerNameForFile:] in TransposerLibXML.o
  "MusicXML2::transposition::~transposition()", referenced from:
      +[TransposerLibXML transposeFileAtPath:interval:] in TransposerLibXML.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

如何为 libmusicxml2.framework 添加 armv7 支持？请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:15:23.970

您将需要再次构建您的框架 iOS SDK。它具有不同的项目文件结构，并且 SDK 支持完全不同的功能集：OSX 中支持的许多方法和类在 iOS 中不支持。您可以尝试从头开始为 iOS 创建项目文件，但这将是一项具有挑战性的任务，并且由于 SDK 不兼容，无法保证成功。也许您可以向框架的作者寻求帮助。

# firefox - 为什么这个 CSS 在 Firefox 中不起作用？

> ID：15152972
> 
> 赞同：4
> 
> 时间：2013-03-01T07:50:16.603
> 
> 标签：firefox, css

我已经花了几个小时试图解决这个问题 - 所以是时候问了。

有人告诉我，要拥有`height: x%`某个东西（高度为百分比），它的父级需要有一个高度，它的父级也是如此，等等。

所以这是我的结构：

```
html
  body
    div#wrapper
      div#viewer_wrapper
        iframe#viewer 
```

这里有一些适用的 CSS：

```
html, body{
    height: 100%;
}
#wrapper{
    min-height: 100%; /*it's this that seems to trip me up - a fixed height works for the problem, but not for the layout obviously*/
    position: relative;
}
#viewer_wrapper {
    height: 100%;
    position: relative;
}
#viewer {
    width: 100%;
    height: 96%;
} 
```

Chrome 很听话——即使没有`height:100%`on `#viewer_wrapper`，我也没有问题。但在 Firefox 和 IE 上，iframe 拒绝占据屏幕高度的 96%（我想要的）。我什至尝试过大量的 JS 修复，所有这些不仅会导致丑陋的代码，还会导致不良的副作用。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:59:21.737

是的，它的父母需要有一个`height`，而不是一个`min-height`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:07:29.607

正如我刚刚了解你到底想要做什么，你可以使用这样的东西：

```
<div id="viewer_wrapper">
    <div id="top">Something on the top</div>
    <iframe></iframe>
</div> 
```

这个CSS：

```
#viewer_wrapper {
    position: absolute;
    z-index: 100;
    width: 100%;
    top: 200px; /* Some number that fits to the content on the top. */
    bottom: 0;
} 
```

* * *

对我来说，它适用于 100% 的高度和 96% 的高度。但一般来说，最好不要使用`min-height`. 使用`height`and`overflow: visible;`代替。请注意，`padding`s 和`margin`s 可能不同，因此请将它们设置为一个值（可能为 0）。

这也是`height`使`body`页面内容（例如背景）仅在首屏可见的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T08:10:05.143

没有必要将最小高度设置为 100%，这没有任何意义。

相反，您将使用这样的最小/最大高度：

```
#wrapper{
    min-height:50%;max-height: 100%;
    position: relative;
} 
```

以这种方式使用的相对高度/宽度只会在内容强制时占用这些尺寸。即除非内容扩展容器，否则它们将占用最小高度，它将扩展到最大高度值。您已经提到的解决方案是设置一个固定的高度，例如 height:100% 。

这是一个带有相对值的小提琴[http://jsfiddle.net/zB2Za/](http://jsfiddle.net/zB2Za/) 和一个修复[http://jsfiddle.net/zB2Za/2/的小提琴](http://jsfiddle.net/zB2Za/2/)

如果您希望页面内容“填充”整个页面，则将正文的边距和填充设置为 0，这在第二个小提琴中显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T09:15:20.527

在我看来，你想要做的是将你的#wrapper 一分为二。

顶部包含除#viewer_wrapper 之外的所有内容，应具有其自然高度。包含#viewer_wrapper 的底部应具有高度：100%。

html

```
<div id="wrapper">
    ...
</div>
<div id="wrapper2">     
    <div id="viewer_wrapper">
        ...
    </div>
</div> 
```

css

```
#wrapper2 { height:100%; }
#wrapper, #wrapper2 {
    width:70%;
    position:relative;
    padding:4px 10px;
    margin:0 auto;
    background:whiteSmoke;
    border-left:2px solid black;
    border-right:2px solid black;
    -webkit-box-sizing:border-box; -moz-box-sizing:border-box;
    box-sizing:border-box;
} 
```

# iphone - 向公司分发内部 iOS 应用程序

> ID：15152982
> 
> 赞同：0
> 
> 时间：2013-03-01T07:51:00.070
> 
> 标签：iphone, ios, xcode, ipad, in-house-distribution

我们公司注册了企业 iOS 开发人员计划，我们正在为另一家公司制作一个将在许多移动设备上使用的 ios 应用程序。

另一家公司也有企业许可证，所以我想知道我们应该如何分发我们的应用程序。我能想到的最简单的方法是我们将我们的应用程序作为 .ipa 文件发送给另一家公司，然后他们必须自己分发它。

我想知道的是：

*   我们是否在这里违反了任何适用的许可协议？
*   如果没有，是否可以以这种方式将其分发给几家公司？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:00:17.990

是的，您违反了许可协议。使用您的企业许可证，您只能将应用程序分发给您的公司员工。如果您想将应用程序分发给其他企业员工，您应该使用他们的企业帐户对其进行签名。

当您创建 ipa 时，有一个“保存以供企业分发”复选框，选中它，它将创建一个 plist 文件，然后将该 plist 和您的 ipa 上传到任何网络服务器和一个 index.html

```
<a href="itms-services://?action=download-manifest&url=http://yourweb.com/thePlistYouCreatedBefore.plist">Install app</a></body></html> 
```

# ruby-on-rails - 如何在 Rails 应用程序中重用模型和控制器

> ID：15152985
> 
> 赞同：0
> 
> 时间：2013-03-01T07:51:08.213
> 
> 标签：ruby-on-rails, twitter-bootstrap, twitter-bootstrap-rails

我们正在`twitter bootstrap`为我们的应用程序中的新功能提出一个新主题。我们现有的功能将使用现有的主题`models/controllers`。

但我想重新使用现有的`models/controllers`并将新的 twitter 引导主题用于新功能。

我该如何解决这个问题并维护代码库（旧应用程序将在 host:port1 上，新应用程序将在 host:port2 上）

**编辑 ：**

我的旧 Rails 应用程序在`public/javascripts public/stylesheets`. 部分观点在下方`app/views/foos/` 部分观点在下方`app/views/bars/`

我将`app/views/cars/` 如何引用我的新索引文件下的新视图指向新的`theme/css`下`app/assets`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:19:09.403

要添加到 benchwarmer 答案，您可能会修改 html 和 javascript，以便您可以**定义新布局**并根据需要在新旧布局之间切换。

但是为了编译这些资产，假设您的资产未命名为 application.css 或 application.js，请在 application.rb 中添加一行

```
config.assets.precompile += %w(new.css new.js) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:06:58.130

您可以在 css 清单文件之间切换。所以对于新主题，它可能就像

```
new_theme.css
 /*
 *= bootstrap_alternative_theme
   ... 
 */

old_theme.css
 /*
 *= bootstrap_original_theme
   ... 
 */ 
```

和 layouts/application.html.erb

```
<% if request.port == port1 %>
   <%= stylesheet_link_tag  "old_theme" %>
<% else %>
   <%= stylesheet_link_tag  "new_theme" %>
<% end %> 
```

# ruby-on-rails - rails迁移：默认为随机字符串的md5的postgresql

> ID：15152988
> 
> 赞同：5
> 
> 时间：2013-03-01T07:51:26.713
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, rails-activerecord, rails-migrations

Rails 3 + postgresql

我想要一个随机字符串的 sha 作为列的默认值。

所以，在我的迁移中，我有：

`t.string :uniqueid, default: md5(random()::text)`

但是我不能让它真正产生任何东西，我使用了反引号、引号等。从我看到的示例中，似乎 pg 函数仅在`SELECT`语句中有效。

那准确吗？关于如何实现这一目标的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T15:24:54.847

**注意**：如果您使用的是更新版本的 Rails，您可能想查看[brcebn 的答案。](https://stackoverflow.com/a/60724518/479863)

* * *

Rails 将尝试解释这一点：

```
t.string :uniqueid, default: md5(random()::text) 
```

作为 Ruby 代码，`:default => md5(...)`在 Ruby 中没有任何意义。`uniqueid`如果你引用它，那么 Rails 会认为它是一个字符串并为该字符串设置默认值，`'md5(random()::text)'`这将无济于事。

如果要在默认列中使用函数调用，可以[`alter table`](http://www.postgresql.org/docs/current/static/sql-altertable.html)手动执行：

```
connection.execute(%q{
    alter table your_table alter column uniqueid set default md5(random()::text)
}) 
```

这将使您在数据库中获得所需的默认值，但您可能会注意到在您的`schema.rb`. 如果你想要一个可用的模式，那么你必须使用[SQL 模式，而不是将它放在你的`application.rb`](https://stackoverflow.com/q/4698467/479863)：

```
config.active_record.schema_format = :sql 
```

然后删除你的`schema.rb`并`structure.sql`改用。请注意，SQL 模式转储在 3.2 之前被破坏，并且在各种 Rails 版本中存在模式加载问题（但您总是`psql < structure.sql`可以解决这个问题）。从好的方面来说，SQL 模式转储将跟踪花哨的东西真正的外键、检查约束、触发器......

顺便说一句，如果您真的想要 SHA ，那么您需要查看[`digest`.`pgcrypto`](http://www.postgresql.org/docs/current/static/pgcrypto.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-03-17T14:35:16.840

你也可以做

```
t.string :token, default: -> { "md5((random())::text)" }, null: false 
```

**编辑：**即使这会生成一个 32 位的随机字符串，也并不意味着它是唯一的。我是这么认为的，但我只是遇到了唯一索引错误。

# git - 为什么 git 会合并我没有修改的东西？

> ID：15152991
> 
> 赞同：1
> 
> 时间：2013-03-01T07:51:33.393
> 
> 标签：git

我有一个 git merge 问题，它说文件更改和重命名操作之间存在冲突。分支是这样完成的：

1.  基础-> more_design
2.  more_design 的一些变化
3.  更多设计-> 固定工具栏
4.  fixed_toolbar 最小更改（PNG 文件中没有更改）
5.  在more_design中修改PNG文件
6.  将 more_design 重新设置为基础（PNG 文件中没有更改）
7.  尝试从 fixed_toolbar 合并（git 对 PNG 文件感到困惑）

错误示例：

```
Auto-merging ui-app/css/images/icons-retina/item-unselected.png
CONFLICT (add/add): Merge conflict in ui-app/css/images/icons-retina/item-unselected.png
CONFLICT (rename/delete): ui-app/css/images/icons-retina/item-selected.png deleted in HEAD and renamed in fixed_toolbar. Version fixed_toolbar of ui-app/css/images/icons-retina/item-selected.png left in tree. 
```

当我尝试接受我们的版本时，它说没有这样的版本（但它们肯定在分支中）：

```
git checkout --ours -- ui-app/css/images/icons-retina/item-*.png
error: path 'ui-app/css/images/icons-retina/item-unselected.png' does not have our version
error: path 'ui-app/css/images/icons-retina/item-selected.png' does not have our version 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T08:01:26.310

# **变基和合并不要混合！**

永远不要从可能被重新定位的东西分支和/或永远不要重新定位任何可能被分支的东西！

你有这样的历史：

```
base - b1 - b2 - b3 - 
  \               \
   \              more_design' - m1' - m2' - m3' - m4' >?
    \                                               ..
    more_design - m1 - m2 - m3 - m4              ..  
                        \                      ..
                        fixed_toolbar - f1 - f2 
```

上面的变基`more_design`创建了历史的全新版本。而不是*m1..m4*你现在有*m1'..m4'*。就 git 而言，这些是完全不同的修订版。所以最近的共同祖先是*base*！因此“本地”更改是*m1'+m2'+m3'+m4'*而“远程”更改是*m1+m2+f1+f2*。而且因为*m3'*和*m4'*覆盖了*m1*和*m2*中的更改，所以你会遇到冲突。

解决方案是将*fixed_toolbar*重新定位到重新定位的 more_design 分支上。要么作为

```
git checkout fixed_toolbar
git rebase --onto more_design original_more_design 
```

或者通过使用交互式合并并手动删除修订版 m1 和 m2 如果 git 无法识别它们；它经常这样做：

```
git checkout fixed_toolbar
git rebase -i more_design 
```

只有合并。或者在 fixed_toolbar 中挑选变化；最近的git应该明白了

```
git cherry-pick original_more_design..fixed_toolbar 
```

# python - Py2exe 令人困惑的错误

> ID：15152993
> 
> 赞同：0
> 
> 时间：2013-03-01T07:51:45.253
> 
> 标签：python, module, pygame, executable, py2exe

我正在使用适合我的 Python 版本的 Python 2.4 和 py2exe 版本。我要使其可执行的文件位于与其 setup.py 文件相同的目录中的 Python 2.4 文件夹中。

当我运行脚本（在 cmd 中）`c:\Python24\python.exe setup.py py2exe`时，我的 cmd 中有一堆文本和错误，就像你在图片中看到的那样。模块丢失，文件无法转入可执行文件。我遇到这个问题很久了，不知道怎么解决。我需要使我的程序可执行。

任何想法如何解决这个问题？

![错误图像](../Images/f62755fdb3b4b5f8cb1236efaa1ac93a.png)

**编辑：我尝试使用 Python、Pygame 和 Py2exe 较新版本（2.6、2.7、3.2），但没有成功。我总是收到这些错误：S 另外，我尝试过使用 cx_Freeze 并再次相同：/**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:27:43.317

几周后（甚至之前也遇到过这个问题）我很高兴地说我解决了这个问题！:)

**我的问题的第一部分**（[http://i.stack.imgur.com/WpkjR.png](http://i.stack.imgur.com/WpkjR.png)）：我通过编辑 setup.py 脚本并在其中添加“排除”部分来解决它。这导致成功制作可执行文件！

修改 setup.py 脚本：

```
from distutils.core import setup
import py2exe
setup(windows=['source_static.py'], options={
          "py2exe": {
              "excludes": ["OpenGL.GL", "Numeric", "copyreg", "itertools.imap", "numpy", "pkg_resources", "queue", "winreg", "pygame.SRCALPHA", "pygame.sdlmain_osx"],
              }
          }
      ) 
```

因此，如果您有类似的问题，只需将那些“缺失”的模块放入此“排除”行。

**第二部分：**

在我成功制作可执行文件后，我遇到了下一个问题：*“**应用程序已请求运行时以异常方式终止它。请联系...** ”*。经过几天和几天的搜索和思考如何解决另一个问题，我找到了一种方法。我无法相信这个问题是如此荒谬。问题出在我的代码中，字体定义：

```
font1 = pygame.font.SysFont(None, 13) 
```

在将“ **None** ”更改为某个系统字体名称（例如“Arial”（必须是字符串））并编译后，我不敢相信我的 .exe 文件能正常工作！

```
font1 = pygame.font.SysFont("Arial", 13) 
```

当然，您可以使用自己的字体，但您必须指定它的路径并在您的程序中定义它。

因此，对于所有遇到此问题的人，请尝试此步骤，希望您能成功。我真的希望这会对您有所帮助，因为我已经浪费了几天和几周的时间来尝试解决这些问题。我什至尝试使用所有版本的 python 和 pygame 以及许多其他 .exe 构建器和设置脚本来制作我的 .exe 文件，但没有运气。除了这些问题，我之前也遇到过很多其他问题，但我在 stackoverflow.com 上找到了答案。

我很高兴我找到了解决这些问题的方法，并在您遇到相同问题时为您提供帮助。

**小技巧（我也做过）：**

> > 第一：将您的 Microsoft Visual C++ 库更新到最新版本。
> > 
> > 第二：如果您有可执行程序所需的类似图像或字体，请将它们包含到**dist**文件夹（您的 .exe 文件已在其中创建）。
> > 
> > 第三：当你制作你的 .exe 文件时，将所有需要的文件包含到你的 setup.py 脚本所在的文件夹中（你的主脚本使用的所有文件和目录）。

使用**Python 2.7 x64**、**pygame**和**py2exe**。

# ruby-on-rails - 如何在 ActiveRecord 中获取未保存的 HABTM 集合代理的所有者？

> ID：15152996
> 
> 赞同：1
> 
> 时间：2013-03-01T07:51:54.923
> 
> 标签：ruby-on-rails, ruby, activerecord

假设我有两个这样定义的模型，一个带有自定义验证，用于检查其父级（所有者）的某些条件。它可以是父母的任何条件，而不仅仅是我在示例中使用的条件：

```
class Project < ActiveRecord::Base
  has_and_belongs_to_many :phrases
end

class Phrase < ActiveRecord::Base
  has_and_belongs_to_many :projects

  validate do
    if self.projects.size == 0
      errors.add(:base, "Must have at least one parent project")
    end
  end
end 
```

然后，在创建一个新项目后，我想在它下面创建一个新短语：

```
project = Project.create!(:name => "My Project")
phrase = project.phrases.create!(:value => "My phrase") 
```

运行验证时，连接表中实际上没有创建任何行，并且`phrase`未保存。验证失败，正如我们预期的那样。

那么问题是：如何访问块`Project`内的父实例`validate`？既然我打电话给`project.phrases.create!`我，我明确地说“创建一个新`Phrase`的作为这个特定父母的孩子`Project`”。有什么方法可以访问它吗？ActiveRecord 关联提供了一种方法，但据我所知`owner`，它在内部不可用。`validate`

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:04:26.010

使用 inverse_of，它有助于了解内存中已经存在的对象。

[http://gsusmonzon.blogspot.in/2011/09/rails-power-of-inverseof.html](http://gsusmonzon.blogspot.in/2011/09/rails-power-of-inverseof.html)

**编辑：** 关于 SO 的类似问题： [Rails: :inverse_of 和 A​​ssociation extensions](https://stackoverflow.com/questions/4146278/rails-inverse-of-and-association-extensions)