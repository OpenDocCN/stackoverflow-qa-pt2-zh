# StackOverflow 问答 12684000-12684999

# python - 如何将 Py3k HTTPResponse 转储到 json.load 中？

> ID：12684001
> 
> 赞同：2
> 
> 时间：2012-10-02T03:03:15.230
> 
> 标签：python, json, python-3.x, urllib2

我认为`json.load()`应该能够像 一样读取对象`http.client.HTTPResponse`，但它似乎因为它`read()`是一个类似字节的对象而绊倒了。（我使用的是 Python 3.3。）令我惊讶的是，尽管我认为这是一个主要用例，但我发现没有直接解决此用途的资源。

```
import urllib.request, json

# Y!F url
yf = 'http://d.yimg.com/autoc.finance.yahoo.com/autoc'

# Mock lookup
data = urllib.parse.urlencode({'query': 'Ford', 'callback': 'YAHOO.Finance.SymbolSuggest.ssCallback'})
data = data.encode('utf-8')
request = urllib.request.Request(yf)
request.add_header('User-Agent','Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.26.14 (KHTML, like Gecko) Version/6.0.1 Safari/536.26.14')
request.add_header('Content-type','text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8;charset=utf-8')
request.add_header('Accept','text/plain')

mock = urllib.request.urlopen(request, data)
json.load(mock) 
```

这会导致错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/json/__init__.py", line 264, in load
    parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/json/__init__.py", line 309, in loads
    return _default_decoder.decode(s)
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/json/decoder.py", line 352, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
TypeError: can't use a string pattern on a bytes-like object 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:02:31.483

这已经在之前的帖子中解决了：[Python 3, let json object accept bytes or let urlopen output strings](https://stackoverflow.com/questions/6862770/python-3-let-json-object-accept-bytes-or-let-urlopen-output-strings) (HT: Matthew Trevor)

此外，什么雅虎！这里返回的不仅仅是 JSON 对象，也是一个`YAHOO.Finance.SymbolSuggest.ssCallback()`包装器。剥离可以解决问题。（虽然仍然很伤心，但它是必要的。）

这有效：

```
import urllib.request, json, re

# Y!F url
yf = 'http://d.yimg.com/autoc.finance.yahoo.com/autoc'

# Mock lookup
data = urllib.parse.urlencode({'query': 'Ford', 'callback': 'YAHOO.Finance.SymbolSuggest.ssCallback'})
data = data.encode('utf-8')
request = urllib.request.Request(yf)
response = urllib.request.urlopen(request, data)
j = json.loads(re.search(r'{.*}',response.readall().decode('utf-8')).group()) 
```

# algorithm - 用于计算数组中特定类型的反转的算法

> ID：12684005
> 
> 赞同：3
> 
> 时间：2012-10-02T03:04:05.720
> 
> 标签：algorithm

我需要一种计算类型反转的算法：如果 a 具有较低的索引且 a > 2b，则存在 a 和 b 之间的反转。

你能想到一个算法可以在 O(n logn) 中完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T03:08:22.613

它可以通过合并排序算法中的一个小调整来完成。[计算数组中的反转](https://stackoverflow.com/questions/337664/counting-inversions-in-an-array)

在合并阶段的正常标准算法中，您比较左半部分和右半部分的元素，并通过左部分中剩余的元素数量增加反转。在这里，我们增加的不是左半部分剩余的元素数量，而是左半部分剩余元素的数量增加两倍以上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:00:21.570

```
A[1..n]
B[1..n] = copy(A)
sort(B) //n*log(n)

for i = 1 to n-1
  //log(n)
  exists = specialBinarySearch(B, A[i], 1, n)

  //log(n)    
  setHighest(B, A[i], 1, n)
  if exists
    count++

specialBinarySearch(a, key, from, to)
  if from <= to
    mid = from + (to-from)/2

    if a[mid] < floor(key/2)
      return true
    else //must go to left of it to get even smaller value
      specialBinarySearch(a, key, from, mid-1)
  else
    return false

setHighest(a, key, from, to)
  if from <= to
    mid = from + (to-from)/2
    if a[mid] == key
      a[mid] = INT_MAX
    else if a[mid] < key
      setHighest(a, key, mid+1, to)
    else
      setHighest(a, key, from, mid-1) 
```

好的。所以，基本上这里是步骤。

1.  复制到辅助数组 B。这个 O(n)
2.  使用任何 n*log ^n算法进行排序
3.  对于 A 中的每个元素`a`，在 B 中执行对任何元素的二分搜索，`B[i]`使得`a > 2*B[i]`. O(log ^n )。（我为避免溢出而编写的算法）
4.  由于我们不必`B[i]`考虑，通过设置使其不符合比较条件`B[i] = infinity`。另一个二分搜索。O(log ^n )
5.  重复 3 和 4 直到耗尽。

所以，让我们计算一下我们有

```
 O(n) + O(n*log(n)) + n*O(log(n))
=> O(n*log(n)) asymptotically 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T09:16:42.700

这可以使用动态订单统计数据结构来解决。我知道这种结构的两种选择：

1.  [订单统计树](http://en.wikipedia.org/wiki/Order_statistic_tree)
2.  [可索引的跳过列表](http://en.wikipedia.org/wiki/Skip_list#Indexable_skiplist)

对于按顺序排列的数组 ( ) 的每个元素，在顺序统计数据结构中`b`查找值的排名。`2b`然后插入`b`到订单统计数据结构中。

该值的等级给出了具有较低索引且小于`2b`的元素的数量。这些数字的总和给出了“反转”的数量。`a``2b`

# c# - 如何检测是否安装了 System.Web.Mvc.dll？

> ID：12684006
> 
> 赞同：1
> 
> 时间：2012-10-02T03:04:05.403
> 
> 标签：c#, .net, asp.net-mvc, dynamic, dll

我有一个类库，它为我提供了一些用于`WebForm`、`MVC`、`WinForm`和`WPF`应用程序的共享功能。只有一个`class`使用放置在 中的类型*`System.Web.Mvc.dll`*。虽然`System.Web.Mvc`不是 的主要部分*`.NET`*，但某些环境可能没有它。例如，这个类库可以用在`WPF`应用程序中，也可以在应用程序中`MVC`使用。

我需要的是检查是否*`System.Web.Mvc.dll`*可用。如果是，则`System.Web.Mvc`动态创建我的依赖类，否则忽略这部分代码。有没有办法检测是否*`System.Web.Mvc.dll`*安装在系统上或在环境中启用？如果是，我如何检测它的版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T04:43:25.273

您可以尝试创建类的实例（或者更好的是 System.Web.Mvc.dll 中的某个类）并捕获适当的异常。注意不要有可能不存在的类型的静态成员，因为检测会更棘手，因为静态构造函数被称为需要“之前”对象（其中“之前”在代码执行中没有严格的位置）。

您也可以简单地将 DLL 与您的 DLL 一起携带（请仔细检查许可证）。

# javascript - window.clientWidth 在 IE 中始终为 0

> ID：12684007
> 
> 赞同：2
> 
> 时间：2012-10-02T03:04:08.580
> 
> 标签：javascript, internet-explorer

我需要 IE 中文档包含窗口的实际像素 clientWidth 以计算正确的缩放值，但发现窗口始终返回 0 值。有没有办法从任何 DOM 对象中获取该值？我是一个 JS 菜鸟，发现只要缩放为 100%，document.body.clientWidth 就可以解决问题，否则会返回缩放后的像素值。帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T03:20:20.560

在早于版本 8 的 Internet Explorer 中，它以物理像素大小检索宽度，而从版本 8 开始，它以逻辑像素大小返回宽度。

这是什么意思？

如果浏览器未处于正常缩放级别（用户可以放大或缩小网页：CTRL 和 +、CTRL 和 -），clientWidth 属性的工作方式与版本 8 和早期版本不同。

*   即使文档中的当前像素大小不同，宽度也是在 8 版之前的 Internet Explorer 中以默认像素大小计算的。
*   从 Internet Explorer 8 和 Firefox、Opera、Google Chrome 和 Safari 开始，宽度以当前像素大小计算。

例如，如果缩放级别为 200%，对于相同的客户端窗口大小，clientWidth 属性在版本 8 之前检索的值是版本 8 的两倍。

对于获取浏览器窗口大小的跨浏览器解决方案：

```
<head>
    <script type="text/javascript">
        // always return 1, except at non-default zoom levels in IE before version 8
        function GetZoomFactor() {
            var factor = 1;
            if (document.body.getBoundingClientRect) {
                // rect is only in physical pixel size in IE before version 8 
                var rect = document.body.getBoundingClientRect();
                var physicalW = rect.right - rect.left;
                var logicalW = document.body.offsetWidth;
                // the zoom level is always an integer percent value
                factor = Math.round((physicalW / logicalW) * 100) / 100;
            }
            return factor;
        }

        function GetWindowSize() {
            var zoomFactor = GetZoomFactor();
            var w = Math.round(document.documentElement.clientWidth / zoomFactor);
            var h = Math.round(document.documentElement.clientHeight / zoomFactor);
            var info = document.getElementById("info");
            info.innerHTML = w + "px * " + h + "px";
        }
    </script>
</head>
<body onload="GetWindowSize ()">Size of the browser's client area:
<span id="info" style="margin-left:20px;"></span>

    <div
    style="width:500px; height:1000px; background-color:#e0a0a0;">Size of this element: 500px * 1000px</div>
</body> 
```

# c# - 使用大量数据调用 Web 服务时出错

> ID：12684008
> 
> 赞同：1
> 
> 时间：2012-10-02T03:04:18.737
> 
> 标签：c#, xml, wcf

我有一个本地托管的 WCF 服务。我的 web.config 看起来像这样：

```
<system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpBinding_INavigationService" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="6553600" maxBufferPoolSize="5242880" maxReceivedMessageSize="6553600"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
        maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>      
  </basicHttpBinding>
</bindings>
<client>
  <endpoint address="http://localhost/WebServices/NavigationService.svc/"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_INavigationService"
    contract="NavigationService.INavigationService" name="BasicHttpBinding_INavigationService" />
</client>   
</system.serviceModel> 
```

如果我传入少于 8K 的文本，我的服务就可以正常工作。还有更多，我收到以下错误：

```
Sys.WebForms.PageRequestManagerServerErrorException: The formatter threw an exception while trying to deserialize the message: Error in deserializing body of request message for operation 'UpdateSiteMap'. The maximum string content length quota (8192) has been exceeded while reading XML data. This quota may be increased by changing the MaxStringContentLength property on the XmlDictionaryReaderQuotas object used when creating the XML reader. Line 75, position 166 
```

有人能告诉我如何增加文本配额吗？如您所见，我将其设置为最大整数大小。

编辑

根据 Tim 的建议，这是我的新 Web.Config 文件：

```
<system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="6553600" maxBufferPoolSize="5242880" maxReceivedMessageSize="6553600"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
        maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>      
  </basicHttpBinding>
</bindings>
<client>
  <endpoint address="http://localhost/WebServices/NavigationService.svc/"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_INavigationService"
    contract="NavigationService.INavigationService" name="BasicHttpBinding_INavigationService" />
</client>
<services>
  <service name="Navigation.INavigationService">

    <endpoint address="" 
              binding="basicHttpBinding"
              bindingConfiguration="BasicHttpBinding_INavigationService"
              contract="NavigationService.INavigationService"  />

  </service>
</services> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:20:04.880

根据错误消息和您对问题的描述，您需要确保您的服务具有相同的设置，并`bindingConfig`在元素的属性中引用相同的定义绑定`endpoint`：

```
<system.serviceModel>
  <services>
    <service name="Navigation.INavigationService">
      <endpoint address="" 
                binding="basicHttpBinding"
                bindingConfiguration="BasicHttpBinding_INavigationService"
                contract="NavigationService.INavigationService" />
    </service>
  </services>
</system.serviceModel> 
```

如果您使用的是 .NET 4.0 并且没有指定服务元素，那么您使用的是默认端点和默认绑定（这意味着您的 maxStringContentLength 限制为 8192）。克服这个问题的最简单方法是`name`从配置的绑定部分中删除该属性 - 然后.NET 将使用您的定义作为默认绑定。例如：

```
<binding closeTimeout="00:01:00" .... 
```

注意没有`name`设置属性。

在这种情况下，您可能需要使用选项 1，或者创建一个没有名称的类似绑定定义，因为我不能 100% 确定客户端使用了默认绑定；他们绝对是为了服务。

有关默认绑定和终结点的详细信息，请参阅[开发人员对 Windows Communication Foundation 4 的介绍。](http://msdn.microsoft.com/en-us/library/ee354381.aspx)

**基于编辑的附加答案**

试试这个：

```
<client>
  <endpoint address="http://localhost/WebServices/NavigationService.svc/"
            binding="basicHttpBinding" 
            contract="NavigationService.INavigationService" 
            name="BasicHttpBinding_INavigationService" />
</client> 
```

删除该`<services>`部分，因为 WCF 4.0 的默认终结点机制将为您处理该部分，并`bindingConfiguration`从客户端终结点中删除该属性。

# windows-8 - Expression Blend 中的“星级”度量是什么？

> ID：12684009
> 
> 赞同：4
> 
> 时间：2012-10-02T03:04:29.833
> 
> 标签：windows-8, microsoft-metro, visual-studio-2012, expression-blend

我目前正在开发一个 Windows 8 Metro/Modern UI 应用程序。现在，我正在为 Visual Studio 处理 Expression Blend 中的界面。

我的问题是：在调整网格列等 UI 元素的大小时，我可以使用像素、自动或星号。在这种情况下，什么是明星？谷歌搜索一无所获，我在 Windiws 8 开发人员文档中也没有找到任何内容。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T03:11:02.607

在网格中，a`*`意味着它将与其他`*`列（或行）平等地共享可用空间。这里有一些很好的 WPF 示例来说明它是如何工作[的](https://stackoverflow.com/questions/1768293/what-does-the-wpf-star-do-width-100)。

从[这里](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.columndefinition.width)的文档：

> 星号
> 
> > 一种约定，您可以根据该约定调整行或列的大小以占用 Grid 中剩余的可用空间。星号大小始终包含星号字符 ( *)，并且可选地在星号之前加上一个整数值，该整数值指定与其他可能的星号大小相比的加权因子（例如 3*）。有关星号大小的更多信息，请参阅网格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T09:40:54.593

在具有多列的网格中，* size 列划分剩余空间。例如，假设一个 300 像素宽的网格有 3 列（150 像素、120 像素和 1*）。

计算如下：

```
remainder = (300 - 150 - 120) 
```

由于余数是 30px，1* 列是 30px 宽

现在添加一些列并将宽度修改为 (35px, 85px, 2*, 1*, 3*)

重新计算：

```
remainder = (300 - 35 - 85) 
```

在这种情况下，余数为 180 像素，因此每个 * 列根据其权重数拆分剩余像素。

```
factor = (180/ (2 + 1 + 3)) 
factor = 30px 
```

因此 2* 列是 60px，1* 列是 30px，3* 列是 90px

```
300 == 35 + 85 + 60 + 30 + 90 
```

当然，同样的原则也适用于行大小。

当网格调整大小时，* 列将新的剩余大小分开。但它们在其他 * 尺寸项目之间保持相同的尺寸比例。在示例中，3* 列的宽度始终是 1* 列的 3 倍。

# c# - 如何从两个表达式创建表达式 AND 子句

> ID：12684010
> 
> 赞同：8
> 
> 时间：2012-10-02T03:04:31.540
> 
> 标签：c#, expression-trees

我正在尝试使用 LINQ 为我的视图创建 where 子句。

我能够创建单列 where 子句，我现在想创建多列 where 子句..

我已经看到要在 .Net 4 及更高版本中实现的代码，但由于我必须使用 .Net 3.5，因此我需要快速解决这个问题。所以我想做的是....

```
 Expression leftexp = {tag=>((tag.id=2)||(tag.id=3))}
 Expression rightexp = {tag=>((tag.uid="MU")||(tag.uid="ST"))} 
```

从这两个表达式我想创建

```
 BinaryExpression be = {tag=>((tag.id=2)||(tag.id=3))} && 
                       {tag=>((tag.uid="MU")||(tag.uid="ST"))} 
```

像这样的东西，我可以传递给我在 LINQ 中的 where 子句。

我尝试使用**Expression.And(leftexp,rightexp)**

但得到了错误..

> 二元运算符 And 没有为类型
> “System.Func `2[WebApplication1.View_MyView,System.Boolean]' and 'System.Func`2[WebApplication1.View_MyView,System.Boolean]”定义。

表达式对我来说是新的，可能已经看了太多的代码，所以对如何去做这件事有点困惑......如果你能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T21:58:16.880

Rewriting expressions has been made easy with the addition of [ExpressionVisitor](http://msdn.microsoft.com/en-us/library/system.linq.expressions.expressionvisitor.aspx "ExpressionVisitor") to BCL. With some helpers the task gets almost trivial.

Here's a visitor class I use to apply a delegate to the tree nodes:

```
internal sealed class ExpressionDelegateVisitor : ExpressionVisitor {

    private readonly Func<Expression , Expression> m_Visitor;
    private readonly bool m_Recursive;

    public static Expression Visit ( Expression exp , Func<Expression , Expression> visitor , bool recursive ) {
        return new ExpressionDelegateVisitor ( visitor , recursive ).Visit ( exp );
    }

    private ExpressionDelegateVisitor ( Func<Expression , Expression> visitor , bool recursive ) {
        if ( visitor == null ) throw new ArgumentNullException ( nameof(visitor) );
        m_Visitor = visitor;
        m_Recursive = recursive;
    }

    public override Expression Visit ( Expression node ) {
        if ( m_Recursive ) {
            return base.Visit ( m_Visitor ( node ) );
        }
        else {
            var visited = m_Visitor ( node );
            if ( visited == node ) return base.Visit ( visited );
            return visited;
        }
    }

} 
```

And here are the helper methods to simplify the rewriting:

```
public static class SystemLinqExpressionsExpressionExtensions {

    public static Expression Visit ( this Expression self , Func<Expression , Expression> visitor , bool recursive = false ) {
        return ExpressionDelegateVisitor.Visit ( self , visitor , recursive );
    }

    public static Expression Replace ( this Expression self , Expression source , Expression target ) {
        return self.Visit ( x => x == source ? target : x );
    }

    public static Expression<Func<T , bool>> CombineAnd<T> ( this Expression<Func<T , bool>> self , Expression<Func<T , bool>> other ) {
        var parameter = Expression.Parameter ( typeof ( T ) , "a" );
        return Expression.Lambda<Func<T , bool>> (
            Expression.AndAlso (
                self.Body.Replace ( self.Parameters[0] , parameter ) ,
                other.Body.Replace ( other.Parameters[0] , parameter )
            ) ,
            parameter
        );
    }

} 
```

Which allows to combine the expressions like this:

```
static void Main () {
    Expression<Func<int , bool>> leftExp = a => a > 3;
    Expression<Func<int , bool>> rightExp = a => a < 7;
    var andExp = leftExp.CombineAnd ( rightExp );
} 
```

UPDATE:

In case `ExpressionVisitor`'s not available, its source had been published a while ago [here](https://docs.microsoft.com/en-us/archive/blogs/mattwar/linq-building-an-iqueryable-provider-part-ii). Our library used that implementation until we've migrated to .NET 4.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T06:04:53.803

如果不将两个完整的表达式树都重写为一个全新的表达式树，就无法做到这一点。

原因：整个表达式树的参数表达式对象必须相同。如果将两者结合起来，您将有两个用于同一参数的参数表达式对象，这是行不通的。

它使用以下代码显示：

```
Expression<Func<Tab, bool>> leftexp = tag => ((tag.id == 2) || (tag.id == 3));
Expression<Func<Tab, bool>> rightexp = tag => ((tag.uid == "MU") || (tag.uid == "ST"));

Expression binaryexp = Expression.AndAlso(leftexp.Body, rightexp.Body);
ParameterExpression[] parameters = new ParameterExpression[1] {
    Expression.Parameter(typeof(Tab), leftexp.Parameters.First().Name)
};
Expression<Func<Tab, bool>> lambdaExp = Expression.Lambda<Func<Tab, bool>>(binaryexp, parameters);

var lambda = lambdaExp.Compile(); 
```

这在 lambdaExp.Compile() 调用上失败，它给出了以下异常：

```
Lambda Parameter not in scope 
```

这是因为我基本上是在重复使用 leftexp 和 rightexp 表达式，但是它们有不同的参数表达式，这两个表达式都不是我给`Expression.Lambda<Func<Tab>>(...)`调用的。在 leftexp 和 rightexp 的深处，有参数表达式对象，它们必须与给定`Expression.Lambda<Func<Tab>>(...)`调用的对象相匹配。

为了解决这个问题，您必须使用新的（单个）参数表达式为参数标记重新创建完整的表达式。

有关该问题的更多信息，请参见[此处](https://stackoverflow.com/questions/1574427/lambda-parameter-not-in-scope-while-building-binary-lambda-expression)。

# codeigniter - 访问数组数据中的数组从控制器传递到 codeigniter 的视图

> ID：12684011
> 
> 赞同：1
> 
> 时间：2012-10-02T03:04:52.470
> 
> 标签：codeigniter, foreach

我的控制器中有以下代码。我想打印我有我的数组的数据。它应该是双 forloop 还是 foreach？

控制器：

```
public function index()
{
    $in_cart = array();

    if (!isset($_SESSION['cartProducts'])){
        $in_cart['list'] = "No Products";
    }
    else{
        foreach ($_SESSION['cartProducts'] as $key => $value) {
            $in_cart[$key] = $this->shopmod->get_one_data($key);

        }
        $cart['list'] = $in_cart;

    }

    $this->load->vars($cart);
    $data['cart'] = $this->load->view('shop/cart', '',  TRUE);
    $this->load->view('layout/default', $data);
} 
```

看法：

```
<?php if(is_array($list)): ?>
        <?php foreach($list as  $row):?>
            <tr>
                <td><?=$row->name?></td>
            </tr>

        <?php endforeach ?>
    <?php endif;?> 
```

但我有以下错误： **遇到 PHP 错误严重性：通知消息：尝试获取非对象文件名的属性：shop/cart.php 行号：18**

有帮助吗？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:23:25.953

我看到你正在使用代码点火器（很好！）

我会执行以下操作以确保 $key 采用“名称”

> 公共函数 index() { foreach ($_SESSION['cartProducts'] as $key => $value) { echo $key; } }

然后

> 公共函数索引（） { $in_cart = 数组（）；
> 
> ```
> if (!isset($_SESSION['cartProducts'])){
>     $in_cart['list'] = "No Products";
> }
> else{
>     foreach ($_SESSION['cartProducts'] as $key => $value) {
>         $in_cart[$key] = $this->shopmod->get_one_data($key);
> 
>     }
> }
> 
> $this->load->vars($cart);
> $data['cart'] = $this->load->view('shop/cart', '',  TRUE);
> $data['list'] = $in_cart;
> $this->load->view('layout/default', $data); } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T03:16:15.103

PHP 准确地告诉你出了什么问题。

当语法专门为对象保留时，您正试图访问数组的`name`属性。`$row``->`

要访问数组值，请使用方括号和键：`<?=$row['name']?>`

有助于理解的提示 - 你正在做的是准等价于: `7->name`，因为左值 (7) 不知道如何使用箭头语法。它是为左值是对象时保留的。不是整数，也不是在您的情况下是数组。

## 评论后更新：

你会得到这样的数据：

```
<? foreach($row['list'] as $r):?>
<tr>
    <td><?=$r[0]->name;?></td>
</tr>
<? endforeach;?> 
```

# c++ - Windows C++ Eclipse MinGW 链接动态和静态库

> ID：12684012
> 
> 赞同：0
> 
> 时间：2012-10-02T03:05:00.923
> 
> 标签：c++, windows, eclipse, mingw, eclipse-cdt

我是 C++ 编程的新手。我的程序中有2个库，一个需要动态链接，另一个需要静态链接，在Eclipse中如何设置？我正在使用 Eclipse CDT + MinGW + Windows 7。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T03:16:07.397

目前还不完全清楚你在这里追求什么。

大多数静态与动态都在库本身中，而不是您如何链接到它。你可以有一个静态库，它基本上只是一个目标文件的集合，被塞进一个文件中，有一个目录来告诉哪些部分最初是哪些文件。

你也可以有一个DLL。创建 DLL 时，链接器通常还会为该 DLL 创建链接库。这个库基本上只包含存根——足够的信息，因此链接器可以将指向 DLL 的链接插入到另一个 DLL 或可执行文件中。

当您使用 DLL 时，您基本上可以通过三个选项来使用它：

1.  最常见的情况：DLL 将在加载父可执行文件时加载。
2.  delayload：直到/除非您实际使用其中的函数才加载该DLL（例如，如果您有一个仅在Windows Vista或更高版本下使用的特殊DLL，则很方便）。
3.  显式动态链接。在这里，您根本不会告诉链接器有关 DLL 或关联库的信息。你调用`LoadLibrary`and`GetProcAddress`来加载库，并获得一个可调用的函数地址。

# linux-kernel - perf 命令和 perfmon2 或 libpfm4 有什么区别

> ID：12684019
> 
> 赞同：6
> 
> 时间：2012-10-02T03:05:52.283
> 
> 标签：linux-kernel, perfmon, perf

最近我正在挖掘性能计数器周围的东西。我用谷歌搜索了 perfmon2 和 libpfm4 [http://perfmon2.sourceforge.net/](http://perfmon2.sourceforge.net/)，还找到了 perf 命令[https://perf.wiki.kernel.org/index.php/Main_Page](https://perf.wiki.kernel.org/index.php/Main_Page)并附带了 linux 的内核源代码。 [perf 源代码链接](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=tree;f=tools/perf;h=97b27760f8421010756e5587ce44464ba662add2;hb=HEAD)我玩过 libpfm4 和 perf 命令，而 libpfm4 似乎只能提供 cpu 的周期数或指令数。

我找不到任何示例代码或可运行示例来说明如何检索 L1-dcache-loads 之类的信息，这些信息似乎可以通过使用 perf 获得，我在 stackoverflow 上查找了它并找到了讨论 perf 命令和 libpfm4 之间关系的文章：[使用硬件性能Linux 中的计数器](https://stackoverflow.com/questions/7107825/using-hardware-performance-counters-in-linux) 人们说 libpfm4 的作者对 perf 命令的贡献者之一 Ingo 很生气，但后来他实际上帮助审查了 perf 的代码。

那么有人可以用 perf 命令解释 perfmon2 或 libpfm4 之间的关系。我可以像使用 perf 命令一样使用 libpfm4 检索 L1-dcache 之类的信息吗？非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T18:26:52.980

perf 命令提供要测量的常见性能计数器事件的子集，例如处理器时钟周期、指令计数和缓存事件度量。但是，大多数处理器提供许多其他实现特定的硬件事件，例如浮点操作和微体系结构事件（例如由于硬件资源限制而导致的停顿）。要访问那些特定于实现的事件，需要使用 perf (http://lxr.linux.no/#linux+v3.6/tools/perf/Documentation/perf-record.txt#L33) 中的原始事件，它可以乏味。libpfm4 提供了一种映射机制来按名称引用那些特定于实现的硬件事件。papi 使用 libpfm。你可以看看 papi 如何使用 libpfm 来访问那些特定于实现的事件 (http://icl.cs.utk.edu/projects/papi/)

# jquery - 使用 jQuery 查找匹配的 ID

> ID：12684020
> 
> 赞同：-1
> 
> 时间：2012-10-02T03:05:57.790
> 
> 标签：jquery

我有一组隐藏的 div，它们都具有相同的类，但具有唯一的自动生成的 ID。我也有与隐藏 div 具有完全相同 ID 的缩略图。

单击缩略图时，它的 ID 存储在变量中，`clickedId`如下所示：

`var clickedId = $(this).attr("id");`

但我不知道如何找到具有该特定 ID 的隐藏 div，以便可以通过相同的点击显示它。

这是显示要取消隐藏的 div 的相关 HTML。

```
<div id="projectHolder">
   <div class="project-content" id="project-<?php echo $post->post_name;?>">                                
   <p>Div content</p>
   </div>

   <div class="project-content" id="project-<?php echo $post->post_name;?>">                                
   <p>Div content</p>
   </div>
</div> 
```

我已经尝试过这方面的变化，但它们主要是我的猜测：

```
$('.project-content').find().each(function(){
if ($this.is(clickedId)).fadeIn(); 
}); 
```

有什么建议可以为我指明正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T03:09:19.790

如果您使用类，您可以执行以下操作：

```
$(".project-content").click(function(){
  $('.project-content').not(this).fadeToggle();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T03:08:56.493

在缩略图上使用[HTML5`data-*`属性](http://html5doctor.com/html5-custom-data-attributes/)，该属性包含单击缩略图时应相应显示的元素的 ID（或选择器）。

```
<div data-open-target="#foo">...</div> 
```

然后：

```
var clicked = $(this).data('open-target');
// later
$(clicked).fadeIn(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T03:10:54.237

未经测试，但应该让你去。

```
$('#projectHolder').children("#" + clickedId).fadeIn(); 
```

另外，如前所述，考虑切换到类，这样页面上就不会出现重复的 Id。

# android - Android WebView 自定义错误

> ID：12684022
> 
> 赞同：1
> 
> 时间：2012-10-02T03:06:22.010
> 
> 标签：android, webview

如果应用程序无法连接到互联网，我希望我的应用程序能够提供我自己的自定义错误消息。我不知道该怎么办，我试着举杯，但没有用。

```
WebView mWebView;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);

    this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
    setContentView(R.layout.main );

    getWindow().setFeatureInt(  Window.FEATURE_PROGRESS, Window.PROGRESS_VISIBILITY_ON); 

    mWebView = (WebView) findViewById( R.id.MyWebview ); 
    mWebView.getSettings().setJavaScriptEnabled(true);   

    mWebView.loadUrl("http://mywebpage.html");

    final Activity MyActivity = this;
    mWebView.setWebChromeClient(new WebChromeClient() {
    public void onProgressChanged(WebView view, int progress)   
    {

        MyActivity.setTitle("Loading...");
        MyActivity.setProgress(progress * 100); 

        if(progress == 100)
            MyActivity.setTitle(R.string.app_name);
      }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:31:28.027

在调用 Android WebView 之前，您可以检查设备是否已连接到互联网。如果设备已连接或未连接，则以下方法返回：

```
public boolean isConnected(Activity activity) {
    ConnectivityManager connectivityManager = (ConnectivityManager) activity
            .getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeNetworkInfo = connectivityManager
            .getActiveNetworkInfo();
    return activeNetworkInfo != null && activeNetworkInfo.isConnectedOrConnecting();
} 
```

最好把它放在一个单独的类中。在启动 Android WebView 之前，您可以调用此方法。如果返回 false，则显示一条消息，要求用户连接到 Internet，否则只需打开链接。

# android - 如何检索移动网站html源代码，android

> ID：12684026
> 
> 赞同：2
> 
> 时间：2012-10-02T03:06:31.290
> 
> 标签：android

我想从移动版网站检索 html 源代码，

```
String url = "m.kitco.com";
HttpClient client = new DefaultHttpClient();
HttpGet request = new HttpGet(url);
HttpResponse response = client.execute(request);
InputStream in = response.getEntity().getContent();
BufferedReader reader = new BufferedReader(new InputStreamReader(in)); 
```

但是，我能得到的源代码只是完整的站点源代码，而不是移动版本。似乎网络服务器会自动将链接转发到完整站点。

如何强制它检索移动网站 html 源代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T03:12:39.130

例如，您需要添加 android 用户代理

```
 request.setHeader("User-Agent", "Mozilla/5.0 (Linux; U; Android 4.0.3; ko-kr; LG-L160L Build/IML74K) AppleWebkit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30"); 
```

# c# - 是否可以在 WinRT 中注册类事件处理程序？

> ID：12684027
> 
> 赞同：0
> 
> 时间：2012-10-02T03:06:34.610
> 
> 标签：c#, windows-8, windows-runtime

是否可以在 WinRT 中注册类事件处理程序？

在 WPF 中，这可以通过`EventManager.RegisterClassHandler`. WinRT中是否有任何等价物？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:10:17.237

它不是可用的 API，因为 Jupiter 中没有路由事件。您需要它的场景是什么？大多数全局事件都可以通过 Window.Current.CoreWindow 处理。

# mutt - Mutt电子邮件客户端开发结束了？

> ID：12684029
> 
> 赞同：0
> 
> 时间：2012-10-02T03:06:47.693
> 
> 标签：mutt

Mutt（电子邮件客户端）的开发结束了吗？我无法从Wiki页面中弄清楚。如果我有一个补丁，我将如何向上游推送补丁？（到目前为止，我只有一些适合我的东西）。

顺便说一句：现在还有很多人在使用它吗？为什么几个月没有开发呢？

我看这里：[http ://dev.mutt.org/hg/mutt/](http://dev.mutt.org/hg/mutt/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T00:33:26.427

幸运的是，自从您的帖子发布以来，已经发生了相当多的活动：

[http://dev.mutt.org/hg/mutt/](http://dev.mutt.org/hg/mutt/)

# java - 递归和不同的列表

> ID：12684033
> 
> 赞同：1
> 
> 时间：2012-10-02T03:08:25.557
> 
> 标签：java, recursion, linked-list

不确定这是否是一个有效的问题，但它就在这里。当涉及到不同的列表（linkedList、队列、堆栈等）和递归算法时，我有这个疑问。我只是不明白什么时候应该使用它们或为什么。我知道如何实现它们，但我不确定为什么要使用列表而不是常规数组，或者为什么要使用递归而不是 for。我将在 1 1/2 年后毕业，我不想在不知道这一点的情况下去找工作。

提前致谢，如果你能给我一个我应该使用其中任何一个问题的例子，我将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T03:23:10.727

就“他们能做什么”而言，递归和迭代是等价的。使用递归而不是迭代的原因是它简化了如何编写某些算法。例如，递归地遍历二叉树会比尝试迭代地生成更清晰的代码；以递归方式编写快速排序比以迭代方式编写更容易和更简洁。递归只是利用程序堆栈来存储状态的行为。您可以通过自己存储堆栈将任何递归算法转换为其迭代算法。我建议你使用像[Racket](http://racket-lang.org/)这样的语言一段时间。它会比我的话更能深入你的脑海。

您通常会使用列表而不是需要频繁删除的数组，并且您不需要经常访问特定元素。从数组中删除是一项`O(n)`操作，因为删除元素之后的所有内容都需要向左移动一个索引。队列不一定是列表结构，它们可以使用数组来表示。队列和堆栈在许多算法中都很有用，例如广度和深度优先的图形搜索。我建议您为此获取一本数据结构和算法书籍，让算法说明为什么某些数据结构有用将是无价的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T03:14:42.310

看看这篇比较递归和迭代的文章：http: [//www.codeproject.com/Articles/21194/Iterative-vs-Recursive-Approaches](http://www.codeproject.com/Articles/21194/Iterative-vs-Recursive-Approaches)
Go thru [Array or List in Java。哪个更快？](https://stackoverflow.com/questions/716597/array-or-list-in-java-which-is-faster)为了更好地理解列表和数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T03:15:49.230

这是一个描述不同 Java 集合的页面。基本上，这取决于您的内容以及您希望如何使用它们。例如，当我需要一个没有重复的值的集合时，我使用一个 Set。当重复无关紧要时，我会使用 List，因为它们执行速度快，并且在我看来更容易编码。还有一些像队列这样的东西，它们按照您输入它们的顺序存储数据。

[集合说明](http://en.wikiversity.org/wiki/Java_Collections_Overview)

# entity-framework - 在实体框架中预生成 INSERT / UPDATE 视图

> ID：12684036
> 
> 赞同：2
> 
> 时间：2012-10-02T03:09:12.390
> 
> 标签：entity-framework

我们遇到了 Entity Framework 的问题，我们第一次在非常简单的对象插入上执行 SaveChanges 时，会有 2-4 秒的延迟。我已将其范围缩小（通过 ANTS Performance Profiler）以查看生成。[我已经看过并关注了使用EdmGen](http://msdn.microsoft.com/en-us/library/bb896240.aspx)或[T4 模板](http://blogs.msdn.com/b/adonet/archive/2008/06/20/how-to-use-a-t4-template-for-view-generation.aspx)预生成视图的文章，但这无济于事：.Views.cs 文件仅包含 SELECT 语句，而不包含 UPDATE 或 INSERT 语句。有很多关于 EF 和使用预编译查询、缓存查询等的性能的讨论，但它都集中在选择，而不是插入或更新，这些都隐藏在 SaveChanges() 后面。

我发现让 EF 生成 INSERT 视图的唯一方法是尝试在服务启动时插入我知道会失败的行，例如将外键设置为不应该存在的 ID。这在我看来绝对荒谬。有没有更好的办法？我真的不在乎它是否发生在编译时或服务启动时，但有没有办法强制 EF 生成所有（基本）UPDATE 和 INSERT 视图？让服务的第一个用户等待 2-4 秒以插入单行是不可接受的。

我们现在正在使用 EF 4，但如果需要解决此问题，我们将跳转到 EF 5 和 .NET 4.5。

编辑：进一步调查表明，虽然在创建/编译更新视图时第一次在表上调用 SaveChanges() 时存在开销，但可以忽略不计（30-40 毫秒）*。*由于巨大的调用堆栈，对其进行分析使它看起来比实际情况更糟。我最初的 2-4 秒时间最终分解为其他开销，例如：创建第一个上下文：1600 毫秒第一个 EF 操作（加载或创建查询视图）如果预编译，则为 400 毫秒，否则为 3000 + 毫秒初始连接到远程数据库：500 毫秒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T06:02:32.637

进一步挖掘显示，与其他开销相比，生成更新视图的时间可以忽略不计，并且不需要任何特殊处理。

# php - 使用 php 和 mysql，在用户注销时插入时间戳

> ID：12684037
> 
> 赞同：0
> 
> 时间：2012-10-02T03:09:15.313
> 
> 标签：php, mysql

使用 PHP 和 MySQL

当用户登录时，我可以在使用会话和使用函数时将他们的登录时间戳插入 MySQL。该功能将更新数据库并且工作得很好。

现在，当用户单击“注销”以及注销将在哪里运行时，是否可以获得时间戳并将其记录到 MySQL 中`session_destroy()`？

我正在寻找的只是用户单击注销时的时间戳，这样我就知道他们已经注销了。我不担心他们是否只是关闭浏览器然后走开了。

我试过做类似 session_destroy(something); 并将其用作功能。我得到的只是运行时错误。这是什至可以做到的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T03:11:58.777

当用户单击注销时记录注销时间应该没有问题（当然，如果浏览器关闭，这将不起作用）。只需在调用 session_destroy() 之前获取用户 ID 并在数据库中更新该用户。

例如：

注销.php

```
$query = "update user set logoutDate=CURRENT_TIMESTAMP where user={$_SESSION['userID']}";
mysql_query($query);

session_destroy(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T03:50:37.143

您可以编写一个类似于 login() 的名为 logout() 的函数，不同之处在于它存储注销时间戳，然后调用 session_destroy()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T03:14:12.007

试试这样

```
//code for inserting logout time in database of user
session_destroy(); 
```

并发布您的代码。

# c# - GetUserDetails 错误 错误 27 当前上下文中不存在名称“IMGUserLabel”

> ID：12684043
> 
> 赞同：0
> 
> 时间：2012-10-02T03:11:31.100
> 
> 标签：c#, asp.net, error-handling

我需要在用户图片旁边显示用户名。图片效果很好，但是 IMGUserLabel 说它不在上下文中。. 你能帮我解决这个问题吗？

```
public void GetUserDetails(int id)
{
    string getUserDetail = "Select ID,Email,Name,Country,Convert(varchar (20), RegisterDate, 106) RegisterDate,Convert(varchar (20), LastLogin, 106) LastLogin ,Description,ImageName FROM [User] where Id='" + id + "'";

    dt = dbClass.ConnectDataBaseReturnDT(getUserDetail);
    if (dt.Rows.Count > 0)
    {
        IMGUserLabel.Text = dt.Rows[0]["Name"].ToString();
        NameLabel.Text = dt.Rows[0]["Name"].ToString();
        UserImage.ImageUrl = "~/UserImage/" + dt.Rows[0]["ImageName"].ToString();
        lblCreated.Text = dt.Rows[0]["RegisterDate"].ToString();
        LabelLastLogin.Text = dt.Rows[0]["LastLogin"].ToString();
        lblCreated.Text = dt.Rows[0]["RegisterDate"].ToString();
        LabelAboutMe.Text = dt.Rows[0]["Description"].ToString();
    }
} 
```

////////////.aspx //////////

```
 <a href="<%#GetUserDetails(GetUser(Int Id)%>">

             <asp:Label ID="IMGUserLabel" runat="server" Text="Label" Font-Names="Segoe UI" 
                Font-Size="Larger" ForeColor="White"
             src="<%#GetUserDetails(GetUser(Int Id)%>">

             </asp:Label>

              </a> 
```

他的名字“IMGUserLabel”在当前上下文中不存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:20:39.480

你至少有两个我可以看到的问题：

1）您已将图像命名为`IMGNameLabel`标记中的名称，但尝试将其引用为`IMGUserLabel`

2)`GetUserDetails(GetUser.(Int Id);)`不是有效的 c# 语法。我不确定您要在这里做什么，因为`GetUserDetails`不返回值。

此外，最好在您的问题中复制/粘贴实际代码，即您的代码截图。所以会很好地格式化你的代码。随意在代码中添加注释以指出问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T03:18:10.700

您的代码引用 IMGUserLabel 但您的标签显示 IMGNameLabel...

重命名其中之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T03:18:39.687

GetUserDetail 标记中的代码似乎有问题...... GetUser.(Int Id) 是什么？

# mysql - Visual Studio 2012 上的 mySQL 数据源

> ID：12684047
> 
> 赞同：29
> 
> 时间：2012-10-02T03:12:34.167
> 
> 标签：mysql, visual-studio, entity-framework, datasource

我一直在阅读有关 mySQL DataSource 以及将 mySQL 与 Entity Framework 一起使用的能力，但如果不使用 DataSource 对话框，我无法真正使用 mySQL 生成 EF

![在此处输入图像描述](../Images/75fed3e8d6200b5f14dd2e7df4729cb1.png)

如何将 mySQL 数据库添加到此类对话框？

这是我到目前为止所做的：

*   安装了[mySQL 连接器](http://dev.mysql.com/downloads/connector/net/)v.6.5.4
*   重新启动了 n 次我的 Windows 7 机器
*   阅读有关 mySQL 连接器在以前版本的 Visual Studio 上的工作情况的所有信息

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-02T03:29:48.450

我刚刚从 mySQL 论坛中了解到 mySQL 将提供 Visual Studio 2012 与 mySQL 连接器 v.6.5.5 的集成

> 我们将在 Connector/NET 6.5.5 和更高版本 6.6.x 中添加对 VS 2012 的支持 [http://forums.mysql.com/read.php?38,546265,564533#msg-564533](http://forums.mysql.com/read.php?38,546265,564533#msg-564533)

并给出一个测试技巧的链接

> [http://social.technet.microsoft.com/wiki/pt-br/contents/articles/10476.instalando-mysql-connector-no-visual-studio-2011-beta.aspx](http://social.technet.microsoft.com/wiki/pt-br/contents/articles/10476.instalando-mysql-connector-no-visual-studio-2011-beta.aspx)

`vsix`如果您按照[教程](http://social.technet.microsoft.com/wiki/pt-br/contents/articles/10476.instalando-mysql-connector-no-visual-studio-2011-beta.aspx)进行操作，这是文件（葡萄牙语）

> **适用于 mySQL 的**Microsoft Visual Studio 扩展：http:** [//cl.ly/JqXO](http://cl.ly/JqXO)**

 **只需**下载并双击**...

然后，您将开始工作

![在此处输入图像描述](../Images/bbdc0ca92d5b709b81a6e1366eaac841.png)

*使用 Visual Studio 2012 专业版*

![在此处输入图像描述](../Images/0edcf20ab38db41df7a399c390e3ecd7.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-27T18:22:00.757

一个澄清：Visual Studio Express 不支持 MySQL .NET 连接器作为扩展。

您仍然可以使用它添加对 MySQL 连接器安装文件夹中的 MySql.Data.dll 文件的引用（对我来说它是 W:\Program Files\MySQL\Connector NET 6.5.4\Assemblies\v4.0）。之后，您可以像这样使用它：

```
using MySql.Data.MySqlClient;
...
var mycon = new MySqlConnection(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-26T21:28:21.943

根据这个页面：[http ://dev.mysql.com/downloads/connector/net/](http://dev.mysql.com/downloads/connector/net/)

“从 6.7 版开始，Connector/Net 将不再包括 MySQL for Visual Studio 集成。该功能现在可在名为 MySQL for Visual Studio 的单独产品中使用，可使用 Windows 的 MySQL 安装程序（参见[http://dev.mysql .com/tech-resources/articles/mysql-installer-for-windows.html](http://dev.mysql.com/tech-resources/articles/mysql-installer-for-windows.html)）。”

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-02T03:15:28.690

Visual Studio 2012 尚不受`MySQL Connector v.6.5.4`. 一开始就无法在服务器资源管理器中添加与 MySQL 的连接。

根据这篇[文章](http://forums.mysql.com/read.php?38,546265,564533#msg-564533)，将添加支持`MySQL Connector v.6.5.5`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T18:54:09.700

Connector/NET 6.5.5 不支持 VS2012，但 Connector/NET 6.6.x 支持。

但是不支持 Visual Studio Express 版本，因此在 Entity Framework 和 Visual Studio Express 和 MySql（或与 SQL Server 不同的其他数据库）中工作的唯一方法是首先使用代码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-01T07:52:01.967

据我所知，如果您显示 MySQL 驱动程序并不重要。我正在运行 VS 2012.3，如果我尝试在 VS 服务器浏览器中创建数据连接，我可以选择 MySQL 驱动程序，仅此而已。如果我尝试输入服务器名/用户名/密码（任何字段），窗口就会消失，是的，只有在使用 MySQL 驱动程序时才会出现，所以不，它不是 vs（不是唯一）导致问题。继续说这是我的环境，但与正在发生的事实相比，你甚至无法证明这一点。我所有的其他软件/扩展/加载项/库都可以正常工作。看到“3 分钟”的 Windows 安装程序有多错误也就不足为奇了。必须卸载/重新安装服务器实例才能进入配置向导，没有它就没有其他明显的方法来配置实例。我宁愿有旧的设置。/咆哮

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-06T19:45:57.067

下载并安装 下载 MySQL for Visual Studio [http://dev.mysql.com/downloads/windows/visualstudio/1.1.html](http://dev.mysql.com/downloads/windows/visualstudio/1.1.html)**

# ios - 从 Facebook iOS SDK 2.x 迁移到 3.x 的问题

> ID：12684053
> 
> 赞同：5
> 
> 时间：2012-10-02T03:13:52.607
> 
> 标签：ios, facebook, sdk

我们希望升级到 3.x，以便我们在 iOS 6 / iPhone 5 上的用户将拥有尽可能简化的 FB 体验......鉴于此，我是否面临 FB 集成重写，或者我是否可以使用折旧的标头并继续将 2.x API 与 3.1 SDK 一起使用？

我们依赖的一些关键方法和请求是： **[ad.facebook authorize:perms], shouldExtendAccessToken, extendAccessTokenIfNeeded, isSessionValid, dialog:@"feed" andParams:params andDelegate:delegate, "https://graph.facebook .com/me?fields=id,email,first_name&access_token="**等。3.1 示例项目中的一些搜索看起来好像所有这些都已被替换——我想这不仅仅是名称的更改。

我还没有找到 [从 3.0 升级到 3.1](https://developers.facebook.com/docs/tutorial/iossdk/upgrading-from-3.0-to-3.1/)的 2.x 到 3.x 版本——如果我忽略了这一点，请告知。

最近尝试升级到 3.0 时，我在尝试使用折旧的 API 时遇到了严重的损坏（重复的 SBJson 标头，无法解析的 FB 标头），一旦编译，handleOpenURL 似乎损坏了，它会重新切换到 FB a第二次，然后崩溃。而且我遇到的帖子表明禁用 3.x 的 ARC 可能存在问题（我们不能使用它，因为我们有 C++）。

我还没有开始从 2.x 到 3.1。也许这会更顺利，但我很想从那些在我第二次长击球之前走在我之前的人那里获得一些见解——非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-08T20:26:09.137

我最近刚刚为我的应用程序进行了升级。我这样做的原因是 iOS 6 的流畅性和未来对 facebook 的支持，因为它们最终会弃用旧的 sdk。最大的变化是登录流程和开放图形调用。该对话框要求在您的墙上发布仍然背负弃用的标题。对于您感兴趣的方法，它们将被替换如下：

**[ad.facebook 授权：perms]**

```
FBSession *session = [[FBSession alloc] initWithAppID:appId
                                permissions:permissionsArray
                            urlSchemeSuffix:urlSuffix
                         tokenCacheStrategy:nil];

[FBSession setActiveSession:session];
if(allowLoginUI == YES)
{
    [session openWithBehavior:FBSessionLoginBehaviorUseSystemAccountIfPresent completionHandler:handler];
}
else if(session.state == FBSessionStateCreatedTokenLoaded)
{
    [session openWithCompletionHandler:^(FBSession *_session, FBSessionState status, NSError *error) {
        [self _sessionStateChanged:_session state:status error:error];            
    }];
}
[session release]; 
```

有关登录的其他实施说明，请参阅
[https://developers.facebook.com/docs/howtos/share-appid-across-multiple-apps-ios-sdk/](https://developers.facebook.com/docs/howtos/share-appid-across-multiple-apps-ios-sdk/)
[https://developers.facebook.com/docs/howtos/login -with-facebook-using-ios-sdk/](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)

**shouldExtendAccessToken, extendAccessTokenIfNeeded,** - 这些现在都消失了，facebook SDK 实现缓存并在需要时扩展令牌。如果您在我的第一个代码片段中看到 loginUI 不应该显示，但会话状态处于 FBSessionStateCreatedTokenLoaded 中，您仍然希望打开会话。当您的会话处于状态 FBSessionStateCreatedTokenLoaded 时，这意味着：

> 两个初始会话状态之一，指示已加载缓存的令牌；当会话处于此状态时，对 open* 的调用将导致会话打开，无需 UX 或应用程序切换

查看 SessionLoginSample 了解更多信息。

**isSessionValid** - 这是现在

```
FBSession.activeSession.isOpen 
```

**dialog:@"feed" andParams:params andDelegate:delegate** - 这仍然是一样的，但是您必须在使用它之前创建这样的 facebook 实例：

```
Facebook *facebook = [[Facebook alloc] initWithAppId:FBSession.activeSession.appID andDelegate:nil];
facebook.accessToken = FBSession.activeSession.accessToken;
facebook.expirationDate = FBSession.activeSession.expirationDate;
//... normal code to setup a feed post
[facebook dialog:@"feed" andParams:params andDelegate:self];
[facebook release]; 
```

有关更多信息，请参阅[https://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/](https://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/)

**"https://graph.facebook.com/me?fields=id,email,first_name&access_token=",** - 图形调用现在简单多了。您也可以很容易地将它们批处理在一起。

```
//[facebook requestWithGraphPath:@"me" andDelegate:self]; would become
[FBRequestConnection startForMeWithCompletionHandler:^
     (FBRequestConnection *connection, id result, NSError *error)   {}];

//[facebook requestWithGraphPath:@"me/albums" andParams:params andHttpMethod:@"POST" andDelegate:self]; would become
  [FBRequestConnection startWithGraphPath:@"me/albums"
                             parameters:params
                             HTTPMethod:@"POST"
                      completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {}]; 
```

有关更多信息，请参阅[https://developers.facebook.com/docs/howtos/batch-requests-ios-sdk/](https://developers.facebook.com/docs/howtos/batch-requests-ios-sdk/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T16:14:48.083

我即将做同样的事情，我在 Facebook 的文档上找到了这篇文章“从 2.0 升级到 3.1”：

[https://developers.facebook.com/docs/tutorial/iossdk/upgrading-from-2.0-to-3.1/](https://developers.facebook.com/docs/tutorial/iossdk/upgrading-from-2.0-to-3.1/)

# python - request.headers 与 request.environ

> ID：12684054
> 
> 赞同：1
> 
> 时间：2012-10-02T03:13:56.590
> 
> 标签：python, cgi, bottle

我正在使用 Bottle.py 和 Python，我对`request.headers`VS`request.environ`变量之间的区别有点困惑。我正在使用会话，`request.environ`当我枚举数据时，我的会话数据出现在变量中，这使我得出结论，其中一些数据不是公开的。

我如何知道哪些变量是公开的，哪些不是？这两个变量有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T06:01:00.513

对于 WSGI，[环境变量](http://www.python.org/dev/peps/pep-0333/#environ-variables)是一组 CGI 和其他对 WSGI 服务可见的服务器端环境变量。

据我了解，在瓶中`request.environ`保存*所有*WSGI 环境值，而`request.headers`仅对标头中使用的值进行受限只读视图。您可以通过 访问相同的信息`.environ`，但会`.headers`返回一个忽略关键大小写的专用字典。

这些信息都不应该以任何方式在服务器之外“公开”。

# json - Delphi / SuperObject - 访问子节点

> ID：12684057
> 
> 赞同：7
> 
> 时间：2012-10-02T03:14:27.473
> 
> 标签：json, delphi, superobject

我的服务器有以下 JSON：

```
{
   "userid":"12",
   "username":"TestChar",
   "logged":"yes",
   "status":"Premium User",
   "areas":{
      "SERVICEAREA_XX1":{
         "id":"1",
         "area":"SERVICEAREA_XX1",
         "version":"3000",
         "usr_group":"0"
      },
      "SERVICEAREA_XX2":{
         "id":"2",
         "area":"SERVICEAREA_XX2",
         "version":"31000",
         "usr_group":"0"
      },
      "SERVICEAREA_XX3":{
         "id":"3",
         "area":"SERVICEAREA_XX3",
         "version":"2000",
         "usr_group":"1"
      }
   }
} 
```

使用 SuperObjects，我可以获得“SERVICEAREA”的计数

```
ob['areas'].AsObject.count 
```

我现在如何才能访问不同“SERVICEAREA”的元素？

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T05:54:36.227

`for ... in`您可以使用循环访问数组的元素：

```
var
  item: ISuperObject;
begin
  for item in ob['areas'] do ... 
```

或没有枚举器，使用“正常”for循环：

```
var
  idx: Integer;
  item: ISuperObject;
begin
  for idx := 0 to ob['areas'].AsArray.Length - 1 do
    item := ob['areas'].AsArray[idx]; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-02T16:08:46.813

马里安有你的答案。以下是有关如何通过示例访问项目属性的更多信息：

```
var
  item: ISuperObject;
...
for item in ob['areas'] do
begin
  WriteLn(item['id'].AsInteger);
  WriteLn(item['area'].AsString);
  WriteLn(item['version'].AsInteger);
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-13T12:15:06.067

如果您想访问键/值（如 Javascript `for..in`） ，请使用此代码

```
 if ObjectFindFirst(JsonData, ite) then
    with JsonData.AsObject do
    repeat
      PutO(ite.key, ite.val.Clone);
    until not ObjectFindNext(ite);
    ObjectFindClose(ite); 
```

# javascript - 在服务器上实现 HTML DOM 重写逻辑

> ID：12684061
> 
> 赞同：3
> 
> 时间：2012-10-02T03:15:05.143
> 
> 标签：javascript, node.js, dom, saxon

我的应用程序在加载时对客户端的 DOM 进行了大量重写。它遍历页面扫描特殊标记（想想 Markdown）或其他模式，用有时相当复杂的 DOM 结构（使用 DOM 调用，例如`createElement`）替换它们以设置文本样式，同时创建图表和图形。

我采用这种架构是为了避免任何构建或预处理步骤。它在桌面浏览器中运行良好，但在移动设备上明显慢（几秒钟，即使经过不懈的优化）。所以我想重新架构系统以预扫描页面并预构建 DOM。我在弄清楚如何做到这一点时有点精神障碍。显然，我不希望用其他服务器端语言重写所有 Javascript。另外，我想像现在一样保留在加载时进行构建的选项，基本的重写逻辑共享相同的代码。

最有可能的选择是将其构建为节点应用程序，尽管我是节点初学者。使用 jsdom 来解析输入和修改 DOM。或者，由于我是 XSLT 的粉丝，并且对 Saxon-CE 很感兴趣，即使这意味着重写所有内容，我也考虑在 XSLT 中实现扫描/重写逻辑，以便从节点调用（用于预构建案例——人们使用节点中的撒克逊人吗？）或浏览器（用于加载时构建案例）。

任何人都可以评论这种方法或抛出替代想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T04:12:53.200

不确定您正在处理大规模 DOM 重写的具体用例，也不确定您的吞吐量要求是什么。也就是说，node/jsdom 路由的另一种方法可能是运行一组无头 Webkit 浏览器，并在该实时渲染上下文中按原样运行您当前的 JavaScript。这将允许您将处理从那些 pokey 移动 CPU 转移到任意可扩展的云资源中（假设这对于您的项目/业务来说可能是负担得起的），并且完全不需要重写或调整您当前的工作代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T03:16:46.157

听起来你想要 Node.js。如果您已经了解 JavaScript，那么学习它真的很容易。

我会推荐一个这样的教程：[http ://www.nodebeginner.org/](http://www.nodebeginner.org/)

这将花费您一个小时左右的时间，但在您与作者一起构建一个小而实用的应用程序时，会提供对 Node 的全面概述。

# sql - sql脚本中的重复周期

> ID：12684062
> 
> 赞同：1
> 
> 时间：2012-10-02T03:15:24.767
> 
> 标签：sql, sql-server

情况：

用户创建一个包含日期字段 (DateOpened) 的案例记录，并希望每 30 天向客户发送一次跟进，直到案例结束。用户将定期（可能每周）运行查询，并提供“从”和“到”日期范围以指定记录可能在 30 天的多个时间段内。

请求：

我需要一种方法来识别用户指定的日期范围包括自 DateOpened 日期起 30 天的倍数的记录。

**更新** 这是昨晚看三流电视节目时突然想到的！

```
SELECT 
.... 
FROM 
....
WHERE
(CAST((DATEDIFF(dd, Invoice.DateOpened @EndDate)/30) AS INT) - CAST((DATEDIFF(dd, Invoice.DateOpened, @StartDate)/30) AS INT)) >=1 
OR DATEDIFF(dd, Invoice.DateOpened, @StartDate) % 30 = 0 --this line to capture valid records but where From and To dates are the same 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T03:32:38.930

您可以使用 DATEDIFF 函数以天数计算日期之间的差异。您可以使用模数 (%) 运算符来获取除法运算的“余数”。将两者结合起来可以为您提供：

```
SELECT
    ....
FROM
    ....
WHERE
    --In MS T-SQL, BETWEEN is inclusive.
    DateOpened BETWEEN @UserSuppliedFromDate AND @UserSuppliedToDate
    AND DATEDIFF(dd, DateOpened, getdate()) % 30 = 0 
```

这应该会给你想要的结果。

编辑（在 MSSQL 中尝试这个例子）：

```
DECLARE @Table TABLE
(
    ID integer,
    DateOpened datetime
)

DECLARE @FromDate as datetime = '1/1/2012'
DECLARE @ToDate as datetime = '12/31/2012'

INSERT INTO @Table VALUES (0, '1/1/1982')
INSERT INTO @Table values (1, '1/1/2012')
INSERT INTO @Table VALUES (2, '2/17/2012')
INSERT INTO @Table VALUES (3, '3/16/2012')
INSERT INTO @Table VALUES (4, '4/16/2012')
INSERT INTO @Table VALUES (5, '5/28/2012')
INSERT INTO @Table VALUES (6, '1/31/2012')
INSERT INTO @Table VALUES (7, '12/12/2013')

DECLARE @DateLoop as datetime
DECLARE @ResultIDs as table ( ID integer, DateLoopAtTheTime datetime, DaysDifference integer )

--Initialize to lowest possible value
SELECT @DateLoop = @FromDate

--Loop until we hit the maximum date to check
WHILE @DateLoop <= @ToDate
BEGIN
    INSERT INTO @ResultIDs (ID,DateLoopAtTheTime, DaysDifference)
        SELECT ID, @DateLoop, DATEDIFF(dd,@DateLoop, DateOpened)
        FROM @Table 
        WHERE 
            DATEDIFF(dd,@DateLoop, DateOpened) % 30 = 0
            AND DATEDIFF(dd,@DateLoop,DateOpened) > 0 -- Avoids false positives when @DateLoop and DateOpened are the same
            AND DateOpened <= @ToDate
    SELECT @DateLoop = DATEADD(dd, 1, @DateLoop) -- Increment the iterator
END

SELECT distinct * From @ResultIDs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T03:17:46.607

这是微软的 SQL 吗？这是快递版吗？只要不是 Express，您可能需要考虑使用 SQL 代理服务，它可以让您安排可以针对数据库运行的任务。一旦达到 30 天，您希望它与记录做什么？

# javascript - JQuery 鼠标事件触发 If 语句

> ID：12684065
> 
> 赞同：0
> 
> 时间：2012-10-02T03:15:59.183
> 
> 标签：javascript, jquery, jquery-ui, mouseevent, mouseover

我有一个我想更好地控制的绑定。这是代码：

```
 $('#topnav').bind({

                            mouseenter: function() {
                                $("#topnav").animate({opacity: 1.0, width: '98%', height: '38px'});
                            },
                            mouseleave: function() {
                                   $("#topnav").delay(2000).animate({opacity: 0.9, width: '310px', height: '33px'});
                            }

                            }); 
```

目前你看到我正在延迟 mouseleave，因为这个人正在“mouseenter-ing”的导航栏非常小，如果鼠标碰巧离开一秒钟，它会触发 mouseleave 事件。我想控制得更好一点。我想要某种类型的 if 语句，上面写着“如果鼠标离开 #topnav div 不到三秒钟并重新进入，则假装鼠标从未离开过”

如果这没有意义，我会澄清。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T03:23:28.717

`setTimeout()`您可以使用and实现此目的`clearTimeout()`：

```
var tout;
$('#topnav').bind({
  mouseenter: function() {
    clearTimeout(tout);
    $("#topnav").animate({opacity: 1.0, width: '98%', height: '38px'});
  },
  mouseleave: function() {
    tout = setTimeout(function() {
      $("#topnav").animate({opacity: 0.9, width: '310px', height: '33px'});
    }, 2000);
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T03:24:56.640

利用 setTimeout() 和 clearTimeout()

```
var timeout = null
var onMouseEnter = function(){
  clearTimeout(timeout)
  $("#topnav").animate({opacity: 1.0, width: '98%', height: '38px'}) 
}

var onMouseLeave = function(){
  timeout = setTimeout(function(){
    $("#topnav").animate({opacity: 0.9, width: '310px', height: '33px'});
  },1000)
}

$('#topnav').bind({ mouseenter: onMouseEnter, mouseleave: onMouseLeave })​ 
```

[http://jsfiddle.net/gmhLZ/](http://jsfiddle.net/gmhLZ/)

# javascript - ASP.NET：从驻留在网络共享（UNC 路径）中的表单中获取文件路径的最佳方式

> ID：12684071
> 
> 赞同：0
> 
> 时间：2012-10-02T03:16:35.890
> 
> 标签：javascript

在我们的 Intranet 环境中，我试图有一种方法（如文件上传/telerik 文件浏览器）使用浏览器选择文件，然后只返回路径。我需要将路径保存在数据库中，用户需要从网络共享驱动器中选择文件。

对于 Telerik Explorer，您需要实现自定义提供程序来做到这一点，而我无法使用文件上传控制来做到这一点。

关于用户友好解决方案的提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:34:23.647

不能这样做，因为它会带来安全问题。

请阅读以下内容：

*   [http://forums.asp.net/t/1077850.aspx/1](http://forums.asp.net/t/1077850.aspx/1)
*   [https://stackoverflow.com/a/4176605/290343](https://stackoverflow.com/a/4176605/290343)

# java - 使用 ObjectInputStream 读取文件时出现 EOFException

> ID：12684072
> 
> 赞同：4
> 
> 时间：2012-10-02T03:16:43.207
> 
> 标签：java

我基本上有一个与此处所述类似的问题：[EOFexception in Java when reading objectinputstream](https://stackoverflow.com/q/2308128/1065197)，但我没有找到干净代码的答案。

答案表明`ObjectInputStream#readObject`当阅读器到达文件末尾时将抛出异常。在网上寻找解决方案后，我还没有找到解决方案。对于这种情况，可能是一个好的和干净的解决方案吗？

注意：我已经尝试过这个（但它看起来很丑而且不是干净的代码）。我正在寻找更好的解决方案：

```
ObjectInputStream ois = new ObjectInputStream(new FileInputStream(file));
try {
    Object o;
    while ((o = ois.readObject()) != null) {
        if (o instanceof MyClass) {
            MyClass m = (MyClass)o;
            //use the object...
        }
    }
} catch (EOFException eofex) {
    //do nothing
}  catch (IOException ioex) {
    throw ioex;
    //I have another try/catch block outside to control the life of the ObjectInputStream
}
//later in the code...
ois.close(); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-02T03:27:34.363

这就是应该发生的事情。你的代码是错误的。检查Javadoc。`readObject()`仅`null`当您编写了`null`. 它没有说明在 EOF 处返回空值。只有当你写过via时，循环直到`readObject()`返回`null`才会停止，如果你没有写过，你会得到一个.`null``writeObject()``EOFException`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-02T03:50:33.873

@EJP 的回答已经确定了。

但是，如果您是*“异常不应用于正常流量控制”*俱乐部的付费会员^*，那么如果您可以使用其他方式确定何时停止，则可以避免捕获异常；例如

*   `int`您可以使用作为对象或对象发送的计数来启动流`Integer`。
*   您可以通过发送一个`null`.
*   您可以通过发送一个表示“这是结束”的特殊对象来标记流的结束。它不需要是一个`MyClass`实例。
*   您可以发送`List<MyClass>`... 虽然这意味着您不能“流式传输”对象。

请注意，这意味着您可以更改发送方代码...

* * *

^(* 该俱乐部的会员要求要么有能力吸收循环论证，要么愿意盲目地接受教条作为真理。:-))

* * *

与其重复那些*令人作呕*的论点，这里有一些链接指向我与“正常流量控制”辩论相关的一些答案：

*   [Java 6 中的 if/or 与 try/catch 的复合成本](https://stackoverflow.com/questions/12358686/cost-of-compound-if-or-versus-try-catch-in-java-6/12362236#12362236)
*   [流控制异常的替代方法是什么？](https://stackoverflow.com/questions/5797781/java-whats-an-alternative-to-exceptions-for-flow-control/5797806#5797806)
*   [正则表达式还是异常处理？](https://stackoverflow.com/questions/5227633/regex-or-exception-handling/5227746#5227746)
*   [在调用 openFileInput 之前检查文件是否存在](https://stackoverflow.com/questions/8867334/check-if-a-file-exists-before-calling-openfileinput/8868140#8868140)
*   [哪个更快，在 java 中尝试 catch 或 if-else（WRT 性能）](https://stackoverflow.com/questions/3490770/what-is-faster-try-catch-or-if-else-in-java-wrt-performance/3490854#3490854)

如果你通读它们，你会发现我并没有坚定地站在栅栏的任何一边。相反，我的观点是你应该了解权衡，并根据具体情况决定例外是否合适。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-22T04:23:54.990

你可以试试这个：

```
boolean check=true;
while (check) {
   try{
       System.out.println(ois.readObject());
   } catch(EOFException ex){
       check=false;
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-14T22:32:36.813

I encountered this error because I had forgot to close an ObjectOutputStream in the code that wrote the data. Once I wrote the data again with code that closed the output stream the data was able to be read in fine.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-05-29T09:46:38.483

虽然到达文件末尾时`readObject()`不会返回，但如果您从一开始就控制文件，您总是可以在关闭输出流之前添加。它将作为对象传递，但您可以像这样测试文件结尾：`NULL``NULL`

```
Boolean complete = false;
ObjectInputStream in = <...>

while(complete != true) {
    Object test = (Object)in.readObject();
    if(test != null) { someArrayList.add(test); }
        else { complete = true; }
} 
```

# perl - 在 Perl 的一行中执行多个 +=

> ID：12684074
> 
> 赞同：2
> 
> 时间：2012-10-02T03:17:03.920
> 
> 标签：perl, variables, equals

在 Perl 中，可以像这样实例化多个变量：

```
my ($a, $b, $c) = (1,2,3); 
```

也可以以相同的方式重新分配多个变量值：

```
($a, $b, $c) = (4,5,6); 
```

然而，当我尝试用加号等于运算符做同样的事情时，

```
($a, $b, $c) += (7,8,9); 
```

only`$c`被正确添加，其他变量保持其原始值。这在 Perl 中应该是可能的，还是它只是偶然地部分工作并且它真的不能那样工作？如果后者是真的，有没有办法在一行中做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-02T03:23:36.407

> 它只是偶然地部分工作，它真的不能那样工作吗？

是的。

标量上下文中的列表运算符依次计算其每个操作数，并返回其最后一个操作数的计算结果。所以你基本上是在做以下事情：

```
do { $a; $b; $c } += do { 7; 8; 9 }; 
```

这就是为什么你得到以下

```
Useless use of a constant (7) in void context at -e line 1.
Useless use of a constant (8) in void context at -e line 1.
Useless use of a variable in void context at -e line 1.
Useless use of a variable in void context at -e line 1. 
```

* * *

> 有没有办法做到这一点？

当然，有无限多。这里有三个：

```
$a += 7; $b += 8; $c += 9;

${$_->[0]} += $_->[1] for [\$a,7],[\$b,8],[\$c,9];

use List::MoreUtils qw( pairwise );
pairwise { $$a += $b; } @{[\$x,\$y,\$z]}, @{[7,8,9]}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T03:19:44.583

的简写版本`+=`应该可以工作：

```
($a,$b,$c) = ($a+7,$b+8,$c+9) 
```

# php - PHP shmop如何将数组存储在共享内存中

> ID：12684081
> 
> 赞同：4
> 
> 时间：2012-10-02T03:18:20.280
> 
> 标签：php, mysql, shared-memory

我需要将一些 6-8GB 的​​静态数据作为数组对象存储到共享内存中。数据是从数据库中获取的。我想 fork() 并允许孩子根据索引访问和搜索数组中的元素。

就我而言，我只能使用 shmop() 存储“字符串”。但我想存储一个 PHP 识别为数组对象的数组。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:49:11.277

看来这可以通过 PHP 的[SEM 函数](http://www.php.net/manual/en/ref.sem.php)来完成。

它在内部序列化对象。鉴于数据量巨大，性能会随着数据的增加而大幅下降。并且 8GB（并且还在上升）对于 shmop 和 SEM 来说太多了，无法有效处理。

我的替代方法是在需要时简单地查询数据库（同时为每个线程存储一个本地缓存版本），我认为这会更快（尤其是使用 SSD）。所以这些功能不是我要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T03:32:09.680

shmop 只能真正存储字符串。要存储数组，您需要在存储它之前对其进行序列化，并在使用它之前对其进行反序列化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T03:32:19.590

您总是可以序列化`ArrayObject`并使用 Memcached 将其存储在内存中。

如果你想坚持使用 shmop: 因为`shmop_write()`使用字符串来存储数据，你也需要使用`serialize()`那里的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T03:32:25.833

使用 PHP 的`serialize()`函数。

[http://php.net/manual/en/function.serialize.php](http://php.net/manual/en/function.serialize.php)

我建议编写一个负责序列化/反序列化和写入/读取共享内存的类。

# c++ - 使用堆栈从中缀表达式转换为后缀 (C++)

> ID：12684086
> 
> 赞同：9
> 
> 时间：2012-10-02T03:18:41.370
> 
> 标签：c++, stack, infix-notation, postfix-notation

我的讲师给了我一个任务，让我创建一个程序来使用 Stacks 将表达式转换和中缀为后缀。我已经制作了堆栈类和一些函数来读取中缀表达式。

但是这个函数，被称为`convertToPostfix(char * const inFix, char * const postFix)`负责使用堆栈将数组 inFix 中的 inFix 表达式转换为数组 postFix 中的后置表达式，并没有做它应该做的事情。你们能帮助我并告诉我我做错了什么吗？

以下是从 inFix 转换为 postFix 的函数的代码，`convertToPostfix(char * const inFix, char * const postFix)`也是我需要帮助修复的代码：

```
 void ArithmeticExpression::inputAndConvertToPostfix()
    {
       char inputChar; //declaring inputChar
       int i = 0; //inizalize i to 0

       cout << "Enter the Arithmetic Expression(No Spaces): ";

       while( ( inputChar = static_cast<char>( cin.get() ) ) != '\n' )
       {
          if (i >= MAXSIZE) break; //exits program if i is greater than or equal to 100

          if(isdigit(inputChar) || isOperator(inputChar))
          {
             inFix[i] = inputChar; //copies each char to inFix array
             cout << inFix[i] << endl;
          }
          else
             cout << "You entered an invalid Arithmetic Expression\n\n" ;

          }

          // increment i;
          i++;
          convertToPostfix(inFix, postFix);

       }

    bool ArithmeticExpression::isOperator(char currentChar)
    {

        if(currentChar == '+')
            return true;
        else if(currentChar == '-')
            return true;
        else if(currentChar == '*')
            return true;
        else if(currentChar == '/')
            return true;
        else if(currentChar == '^')
            return true;
        else if(currentChar == '%')
            return true;
        else
            return false;
    }

    bool ArithmeticExpression::precedence(char operator1, char operator2)
    {
        if ( operator1 == '^' )
           return true;
        else if ( operator2 == '^' )
           return false;
        else if ( operator1 == '*' || operator1 == '/' )
           return true;
        else if ( operator1 == '+' || operator1 == '-' )
           if ( operator2 == '*' || operator2 == '/' )
              return false;
           else
              return true;

        return false;
    }

   void ArithmeticExpression::convertToPostfix(char * const inFix, char * const postFix)
        {
           Stack2<char> stack;

           const char lp = '(';

           stack.push(lp); //Push a left parenthesis ‘(‘ onto the stack.

           strcat(inFix,")");//Appends a right parenthesis ‘)’ to the end of infix.

          // int i = 0;
           int j = 0;

           if(!stack.isEmpty())
           {

               for(int i = 0;i < 100;){

                   if(isdigit(inFix[i]))
                   {
                        postFix[j] = inFix[i];
                        cout << "This is Post Fix for the first If: " << postFix[j] << endl;
                        i++;
                        j++;
                   }

                    if(inFix[i] == '(')
                   {
                       stack.push(inFix[i]);
                       cout << "The InFix was a (" << endl;
                       i++;
                       //j++;
                   }

                    if(isOperator(inFix[i]))
                               {
                            char operator1 = inFix[i];

                            cout << "CUrrent inFix is a operator" << endl;
                                   if(isOperator(stack.getTopPtr()->getData()))
                                       {
                                       cout << "The stack top ptr is a operator1" << endl;
                                       char operator2 = stack.getTopPtr()->getData();
                                           if(precedence(operator1,operator2))
                                           {
                                               //if(isOperator(stack.getTopPtr()->getData())){
                                                   cout << "The stack top ptr is a operato2" << endl;
                                                   postFix[j] = stack.pop();
                                                   cout << "this is post fix " << postFix[j] << endl;
                                                   i++;
                                                   j++;
                                              // }

                                           }

                                       }
                                   else

                                       stack.push(inFix[i]);
                                   // cout << "Top Ptr is a: "<< stack.getTopPtr()->getData() << endl;

                               }

                    for(int r = 0;r != '\0';r++)
                        cout << postFix[r] << " ";

                        if(inFix[i] == ')')
                       {
                           while(stack.stackTop()!= '(')
                         {
                               postFix[j] = stack.pop();
                               i++;
                               j++;
                                }
                           stack.pop();

                            }
                       }
           }

                   } 
```

请注意，函数 convertToPostfix 是使用此算法生成的：

*   将左括号 '(' 压入堆栈。
*   在中缀末尾附加一个右括号')'。
*   当堆栈不为空时，从左到右读取中缀并执行以下操作：

    *   如果中缀中的当前字符是数字，则将其复制到后缀的下一个元素。
    *   如果中缀中的当前字符是左括号，则将其压入堆栈。
    *   如果中缀中的当前字符是运算符，

        *   弹出操作符（如果有的话）在堆栈顶部，当它们具有与当前操作符相同或更高的优先级时，并将弹出的操作符插入到后缀中。
        *   将中缀中的当前字符压入堆栈。
    *   如果中缀中的当前字符是右括号
        *   从堆栈顶部弹出运算符并将它们插入到后缀中，直到左括号位于堆栈顶部。
        *   从堆栈中弹出（并丢弃）左括号。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T12:10:11.550

这基本上是对Yuushi回答的评论。

*   外部 while(!stack.empty()) 循环是错误的。只需将其删除。（保持c的循环体）。在函数结束时，检查堆栈是否为空，否则表达式有语法错误。
*   正如 Yuushi 已经说过的，优先功能看起来很假。首先你应该给参数起一个更好的名字：一个是左边的操作符，另一个是右边的。（现在你叫它`precedence(rightOp, leftOp)`）。然后你应该记录结果的含义 - 现在你返回 true if `a rOp b lOp c == (a rOp b) lOp c`（是的，运算符顺序与你所说的不匹配 - 例如，两个命令中的“+”和“-”不一样）。
*   如果你找到一个新的操作符，你需要遍历堆栈上的旧操作符，例如在读取`a - b * c`你的输出 is`a b c`和堆栈是`[- *]`. 现在您阅读 a `+`，并且需要弹出两个运算符，从而导致`a b c * -`. 即，输入`a - b * c + d`应该导致`a b c * - d +`

**更新**：附加完整的解决方案（基于 Yuushi 的回答）：

```
bool isOperator(char currentChar)
{
    switch (currentChar) {
    case '+':
    case '-':
    case '*':
    case '/':
    case '^':
    case '%':
        return true;
    default:
        return false;
    }
}

// returns whether a `lOp` b `rOp` c == (a `lOp` b) `rOp` c
bool precedence(char leftOperator, char rightOperator)
{
    if ( leftOperator == '^' ) {
        return true;
    } else if ( rightOperator == '^' ) {
        return false;
    } else if ( leftOperator == '*' || leftOperator == '/' || leftOperator == '%' ) {
        return true;
    } else if ( rightOperator == '*' || rightOperator == '/' || rightOperator == '%' ) {
        return false;
    }

    return true;
}

#include <stdexcept>
#include <cctype>
#include <sstream>
#include <stack>
std::string convertToPostfix(const std::string& infix)
{
    std::stringstream postfix; // Our return string
    std::stack<char> stack;
    stack.push('('); // Push a left parenthesis ‘(‘ onto the stack.

    for(std::size_t i = 0, l = infix.size(); i < l; ++i) {
        const char current = infix[i];

        if (isspace(current)) {
            // ignore
        }
        // If it's a digit or '.' or a letter ("variables"), add it to the output
        else if(isalnum(current) || '.' == current) {
            postfix << current;
        }

        else if('(' == current) {
            stack.push(current);
        }

        else if(isOperator(current)) {
            char rightOperator = current;
            while(!stack.empty() && isOperator(stack.top()) && precedence(stack.top(), rightOperator)) {
                postfix << ' ' << stack.top();
                stack.pop();
            }
            postfix << ' ';
            stack.push(rightOperator);
        }

        // We've hit a right parens
        else if(')' == current) {
            // While top of stack is not a left parens
            while(!stack.empty() && '(' != stack.top()) {
                postfix << ' ' << stack.top();
                stack.pop();
            }
            if (stack.empty()) {
                throw std::runtime_error("missing left paren");
            }
            // Discard the left paren
            stack.pop();
            postfix << ' ';
        } else {
            throw std::runtime_error("invalid input character");
        }
    }

    // Started with a left paren, now close it:
    // While top of stack is not a left paren
    while(!stack.empty() && '(' != stack.top()) {
        postfix << ' ' << stack.top();
        stack.pop();
    }
    if (stack.empty()) {
        throw std::runtime_error("missing left paren");
    }
    // Discard the left paren
    stack.pop();

    // all open parens should be closed now -> empty stack
    if (!stack.empty()) {
        throw std::runtime_error("missing right paren");
    }

    return postfix.str();
}

#include <iostream>
#include <string>
int main()
{
    for (;;) {
        if (!std::cout.good()) break;
        std::cout << "Enter the Arithmetic Expression: ";
        std::string infix;
        std::getline(std::cin, infix);
        if (infix.empty()) break;

        std::cout << "Postfix: '" << convertToPostfix(infix) << "'\n";
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T05:26:44.913

因此，您的代码存在许多问题。我会发布什么（应该是）一个更正的解决方案，其中有大量的评论来解释正在发生的事情以及你在哪里犯了错误。前面有几件事：

1.  我将使用`std::string`而不是`char *`因为它使事情变得更清洁，老实说，`C++`除非你有充分的理由不使用它（例如与`C`库的互操作性），否则你应该使用它。此版本还返回 a`string`而不是将 a`char *`作为参数。

2.  我使用的是标准库中的堆栈`<stack>`，它与您的自制堆栈略有不同。`top()`显示下一个元素*而不*将其从堆栈中删除，并`pop()`返回`void`，但从堆栈中删除顶部元素。

3.  它是一个免费功能，不是类的一部分，但应该很容易修改 - 我用这种方式测试更容易。

4.  我不相信您的运算符优先级表是正确的，但是，我会让您仔细检查一下。

* * *

```
#include <stack>
#include <cctype>
#include <iostream>

std::string convertToPostfix(std::string& infix)
{
    std::string postfix; //Our return string
    std::stack<char> stack;
    stack.push('('); //Push a left parenthesis ‘(‘ onto the stack.
    infix.push_back(')');

    //We know we need to process every element in the string,
    //so let's do that instead of having to worry about
    //hardcoded numbers and i, j indecies
    for(std::size_t i = 0; i < infix.size(); ++i) {

        //If it's a digit, add it to the output
        //Also, if it's a space, add it to the output 
        //this makes it look a bit nicer
        if(isdigit(infix[i]) || isspace(infix[i])) {
            postfix.push_back(infix[i]);
        }

        //Already iterating over i, so 
        //don't need to worry about i++
        //Also, these options are all mutually exclusive,
        //so they should be else if instead of if.
        //(Mutually exclusive in that if something is a digit,
        //it can't be a parens or an operator or anything else).
        else if(infix[i] == '(') {
            stack.push(infix[i]);
        }

        //This is farily similar to your code, but cleaned up. 
        //With strings we can simply push_back instead of having
        //to worry about incrementing some counter.
        else if(isOperator(infix[i]))
        {
            char operator1 = infix[i];
            if(isOperator(stack.top())) {
                while(!stack.empty() && precedence(operator1,stack.top())) {
                    postfix.push_back(stack.top());
                    stack.pop();
                }
            }
            //This shouldn't be in an else - we always want to push the
            //operator onto the stack
            stack.push(operator1);
        }    

        //We've hit a right parens - Why you had a for loop
        //here originally I don't know
        else if(infix[i] == ')') {
            //While top of stack is not a right parens
            while(stack.top() != '(') {
            //Insert into postfix and pop the stack
                postfix.push_back(stack.top());
                stack.pop();
            }
            // Discard the left parens - you'd forgotten to do this
            stack.pop(); 
        }
    }

    //Remove any remaining operators from the stack
    while(!stack.empty()) {
        postfix.push_back(stack.top());
        stack.pop();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:47:01.427

这是我的使用具有多位数评估的 C。

```
#include <stdio.h>
#include <math.h>
#define MAX 50
void push(char[],char);
void in_push(double[], double);
int pop();
int prec(char);
double eval(char[],int,double[]);
int top = 0;
void main() {
double eval_stack[MAX];
int op_count=0;
char stack[MAX], exps[MAX], symbols[MAX];
int i=0,j=0,len,check;
while((symbols[i]=getchar())!='\n') {
if(symbols[i]!=' ' || symbols[i]!='\t') {
if(symbols[i]=='+' || symbols[i]=='-' || symbols[i]=='/' || symbols[i]=='*' || symbols[i]=='^')
op_count++;
i++;
}
}
symbols[i]='#';
symbols[++i]='\0';
len = strlen(symbols);
stack[top] = '#';
for(i=0; i<=len; i++) {
if(symbols[i]>='a'  && symbols[i]<='z') {
exps[j]=symbols[i];
j++;
}
switch(symbols[i]) {
case '0': case '1': case '2': case '3': case '4': case '5': case '6': case '7': case '8': case '9':
//if(symbols[i]>='a'  && symbols[i]<='z') {
exps[j]=symbols[i];
j++;
break;
case '+': case '-': case '*': case '/': case '^':
exps[j++] = ' ';
while(prec(symbols[i]) <= prec(stack[top])) {

             exps[j] = stack[top];
             pop();
             //printf("\n\t\t%d\t\t%d\n", top,j);
                j++;

}
if(prec(symbols[i]) > prec(stack[top])) {
push(stack,symbols[i]);
}
break;
case '(':
push(stack,symbols[i]);
break;
case ')':
while(stack[top]!='(') {
      exps[j] = stack[top];
       pop();
      j++;

}
pop();
break;
case '#':
exps[j++] = ' ';
while(stack[top]!='#') {
      exps[j] = stack[top];
       pop();
       j++;

}
pop();
break;
}
}
exps[j]='\0';
printf("Postfix: %s", exps);
for(i=0; i<j; i++)
if(exps[i]=='a')
check = 1;
if(check!=1)
printf("\nSolution: %.1f", eval(exps,j,eval_stack));
}

double eval(char exps[],int exps_len,double eval_stack[]) {
    int i; int len=exps_len,temp;
    double in_temp[MAX],t;
    int count,power,j,in_count;
    count=power=j=t=in_count=0;
    double result;
for(i=0; i<len; i++) {
switch(exps[i]) {
case '0': case '1': case '2': case '3': case '4': case '5': case '6': case '7': case '8': case '9':
in_temp[i] = exps[i]-'0';
j=i+1;
while(exps[j]>='0' && exps[j]<='9') {
in_temp[j] = exps[j]-'0';
j++; // 2
}
count = i; // 3
while(in_temp[count]<='0' && in_temp[count]<='9') {
power = (j-count)-1;
t = t + in_temp[count]*(pow(10,power));
power--;
count++;
}
in_push(eval_stack,t);
i=j-1;
t=0;
break;
case '+':
temp = pop();
pop();
result = eval_stack[temp] + eval_stack[temp+1];
in_push(eval_stack,result);
break;
case '-':
temp = pop();
pop();
result = eval_stack[temp] - eval_stack[temp+1];
in_push(eval_stack,result);
break;
case '*':
temp = pop();
pop();
result = eval_stack[temp] * eval_stack[temp+1];
in_push(eval_stack,result);
break;
case '/':
temp = pop();
pop();
result = eval_stack[temp] / eval_stack[temp+1];
in_push(eval_stack,result);
break;
case '^':
temp = pop();
pop();
result = pow(eval_stack[temp],eval_stack[temp+1]);
in_push(eval_stack,result);
break;
}
}
return eval_stack[top];
}
int prec(char a) {
if(a=='^')
return 3;
else if(a=='*' || a=='/' || a=='%')
return 2;
else if(a=='+' || a=='-')
return 1;
else if(a=='(')
return 0;
else
return -1;
}

void push(char stack[], char ele) {
    if(top>=MAX) {
    printf("\nStack Overflow");
    exit(1);
    }
stack[++top] = ele;
}
void in_push(double stack[], double ele) {
    if(top>=MAX) {
    printf("\nStack Overflow");
    exit(1);
    }
stack[++top] = ele;
}
int pop() {
    if(top<0) {
    printf("\nStack Underflow");
    exit(1);
    }

top = top - 1;
return top;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-16T06:25:22.800

**这是我将中缀转换为后缀表达式的实现**

```
//Infix to Postfix conversion
#include <bits/stdc++.h> 
using namespace std; 

bool isoperator(char c)                                            // function to check         if the character is an operator
{
if(c=='+'||c=='-'||c=='*'||c=='/'||c=='^')
    return true;
else
    return false;
}

int precedence(char c)                // function to given the precedence of the operators
{
if(c == '^') 
    return 3; 
else if(c == '*' || c == '/') 
    return 2; 
else if(c == '+' || c == '-') 
    return 1; 
else
    return -1; 
}

void infixToPostfix(string s)                          // funtion to convert infix to postfix
{
stack<char>st;
string postfix;
for(int i=0;i<s.length();i++)
{
    if((s[i]>='a'&&s[i]<='z')||(s[i]>='A'&&s[i]<='Z'))         // if the given character is alphabet add it to the postfix string
        postfix+=s[i];
    else if(s[i]=='(')                                         // if the given character is "(" add it to the postfix string 
        st.push('(');
    else if(s[i]==')')                                         // if we find a closing bracket we pop everything from stack till opening bracket and add it to postfix string
    {
        while(st.top()=='(' && !st.empty())
        {
            postfix+=st.top();
            st.pop();
        }
        if(st.top()=='(')                                      // popping the opening bracket
            st.pop();
    }  
    else if(isoperator(s[i]))                                 // if we find a operator
    {
        if(st.empty())                                        // if stack is empty add it to the stack
            st.push(s[i]);
        else
        {
            if(precedence(s[i])>precedence(st.top()))       // if operator precedence is grater push it in stack
                st.push(s[i]);
            else if((precedence(s[i])==precedence(st.top()))&&(s[i]=='^'))  // unique case for ^ operator
                st.push(s[i]);
            else
            {
                while((!st.empty())&&(precedence(s[i])<=precedence(st.top())))   // if precedence of st.top() is greater than s[i] adding it the postfix string
                {
                    postfix+=st.top();
                    st.pop();
                }
                st.push(s[i]);       // pushing s[i] in the stack 
            }
        }
    }
}
while(!st.empty())                  // popping the remaining items from the stack and adding it to the postfix string
{ 
    postfix+=st.top();
    st.pop();
} 
cout<<postfix<<endl;               // printing the postfix string
}

int main() 
{
ios_base::sync_with_stdio(false);
cin.tie(NULL);
string s;
cin>>s;
infixToPostfix(s); 
return 0;
} 
```

**例子：**

**输入：** a+b*(c^de)^(f+g*h)-i

**输出：** abc^efgh*+i-(^-(*+

ps：如果发现错误，请在下方评论：）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-05-15T03:51:38.700

C++实现如下：

* * *

```
 void infix2postfix(string s)
   {
     stack<char>st;
     for(int i=0; i<s.length(); i++)
     {
        if(isdigit(s[i]) || isalpha(s[i]))  cout<<s[i];
        else if( s[i]==')' )
        {
           while(st.top()!='(')
           {
                cout<<st.top();
                st.pop();
           }
          st.pop();
        }

        else st.push(s[i]);
      }
   } 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-01-25T12:39:04.177

在这种情况下，运算符优先级是问题所在。按降序排列的正确运算符优先级是：

```
mul, div, mod   << *, /, % >>
add, sub        << +, - >>
XOR             << ^ >> 
```

在上面的问题中考虑优先功能

```
bool ArithmeticExpression::precedence(char operator1, char operator2)
{
    if ( operator1 == '^' )
       return true;
    else if ( operator2 == '^' )
       return false;
    else if ( operator1 == '*' || operator1 == '/' )
       return true;
    else if ( operator1 == '+' || operator1 == '-' )
       if ( operator2 == '*' || operator2 == '/' )
          return false;
       else
          return true;
    return false;
} 
```

对于 operator1 中的每个值，应根据上面提到的 OPERATOR PRECEDENCE TABLE 检查 operator2 的相应值的优先级。在没有适当比较的情况下不要返回任何值。

# google-bigquery - AVG 没有考虑空值

> ID：12684102
> 
> 赞同：2
> 
> 时间：2012-10-02T03:21:10.540
> 
> 标签：google-bigquery

我已经加载了以下测试数据：

```
name,   age,gender
"John", 33,m
"Sam",  33,m
"Julie",33,f
"Jimbo",, m 
```

使用架构：`name:STRING,age:INTEGER,gender:STRING`并且我已确认 Jimbo 行在 BigQuery 浏览器工具 > mydataset > 详细信息 > 预览部分中的“年龄”列显示为空。

当我运行此查询时：

```
SELECT AVG(age) FROM [peterprivatedata.testpeople] 
```

我得到 24.75 这是不正确的。我预计是 33，因为[AVG 的文档](https://developers.google.com/bigquery/docs/query-reference#aggfunctions)说“计算中不包括具有 NULL 值的行”。

我做错了什么还是这是一个已知的错误？（我不知道是否有要检查的公共问题列表）。对此最简单的解决方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:08:50.140

这是一个已知的错误，我们在导入时将 null 数值强制为 0。我们目前正在努力修复。然而，这些值*确实*显示为未定义（由于各种原因与 null 不同），因此您可以检查 IS_EXPLICITLY_DEFINED。例如：

```
SELECT sum(if(is_explicitly_defined(numeric_field), numeric_field, 0)) / 
       sum(if(is_explicitly_defined(numeric_field), 1, 0)) 
    AS my_avg FROM your_table 
```

或者，您可以使用另一列来表示 is_null。然后查询将如下所示：

```
 SELECT sum(if(numeric_field_is_null, 0, numeric_field)) / 
       sum(if(numeric_field_is_null, 0, 1)) 
    AS my_avg FROM your_table 
```

# java - XmlAdapter 未在 CXF 中使用

> ID：12684103
> 
> 赞同：3
> 
> 时间：2012-10-02T03:21:14.367
> 
> 标签：java, jaxb, jax-ws, cxf

我有一个外部（即不可修改）`com.external.Money`类，它有一个`java.util.Currency`带有 getter 和 setter 的字段。在我的 CXF jaxws Web 服务中，我有一个如下所示的请求对象：

```
@XmlRootElement
public ExampleRequest {
    private Money money;
    public Money getMoney() { return money; }
    public void setMoney(Money money) { this.money = money; }
} 
```

当我尝试启动服务时，出现以下错误：

```
Exception in thread "main" com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 1 counts of IllegalAnnotationExceptions
java.util.Currency does not have a no-arg default constructor.
    this problem is related to the following location:
        at java.util.Currency
        at public java.util.Currency com.external.Money.getCurrency()
        at com.external.Money
        at public com.external.Money com.internal.ExampleRequest.getMoney()
        at com.internal.ExampleRequest 
```

因此，我创建了一个`MoneyAdapter`，它将 转换`Money`为 JAXB 可用的东西，即一个`TransportableMoney`将货币存储为`String`. 理想情况下，我会创建一个`CurrencyAdapter`，但由于货币字段是由外部类封装的，我无法将其连接起来（或者我不知道如何连接）。

我正在尝试使用以下方式连接适配器`package-info.java`：

```
@XmlJavaTypeAdapters({
    @XmlJavaTypeAdapter(value=MoneyAdapter.class, type=Money.class)
})
package com.internal;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapters;

import com.external.Money; 
```

问题是，这行不通。而不是上面的错误，我现在得到：

```
Caused by: com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 1 counts of IllegalAnnotationExceptions
java.util.Currency does not have a no-arg default constructor.
    this problem is related to the following location:
        at java.util.Currency
        at public java.util.Currency com.external.Money.getCurrency()
        at com.external.Money 
```

**我认为这是因为`com.external.Money`有一个无参数构造函数。当它没有无参数构造函数时，此设置似乎有效。**

我在这里错过了什么吗？有谁知道如何强制 CXF 使用`XmlAdapter`？

**编辑**

正如 Blaise Doughan 指出的那样，上面的配置只使用 JAXB 编组器就可以工作。它只是不适用于 CXF 2.6.0。这是我的主要方法：

```
SomeService ss = new SomeService();
JaxWsServerFactoryBean jwsfb = new JaxWsServerFactoryBean();
jwsfb.setServiceClass(SomeService.class);
jwsfb.setServiceBean(ss);
jwsfb.setAddress("http://localhost:9020/hello");
jwsfb.create(); 
```

maven依赖：

```
 <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-frontend-jaxws</artifactId>
            <version>2.6.0</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-transports-http</artifactId>
            <version>2.6.0</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-transports-http-jetty</artifactId>
            <version>2.6.0</version>
            <scope>runtime</scope>
        </dependency> 
```

一些服务：

```
@WebService
@SOAPBinding(use = SOAPBinding.Use.LITERAL, style = SOAPBinding.Style.DOCUMENT)
public class SomeService {
    public ExampleRequest getRequest() {
        ExampleRequest request = new ExampleRequest();
        request.setMoney(new Money(Currency.getInstance("USD"), BigDecimal.ONE));
        return request;
    }

    public void setRequest(ExampleRequest req) {
        // do nothing
    }
} 
```

**更新**

创建了一张[JIRA 票](https://issues.apache.org/jira/browse/CXF-4537)，看起来它已经被 CXF 团队解决了（哇）！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:52:37.630

以下内容在 CXF 环境之外对我有用。您可以将此与您正在做的事情进行比较。如果您正在做的事情匹配，那么您可能会遇到 CXF 问题。

**钱**

以下是`Money`基于您的问题描述的类的实现。

> 我有一个外部（即不可修改的）com.external.Money 类，它有一个带有getter 和setter 的java.util.Currency 字段。

```
package com.external;

import java.util.Currency;

public class Money {

    private Currency currency;

    public Currency getCurrency() {
        return currency;
    }

    public void setCurrency(Currency currency) {
        this.currency = currency;
    }

} 
```

**钱适配器**

以下是`MoneyAdapter`基于您问题中的描述的实现：

> 因此，我创建了一个 MoneyAdapter，它将 Money 转换为 JAXB 可用的东西，即一个 TransportableMoney 类，其中货币存储为一个字符串

```
package com.internal;

import java.util.Currency;
import javax.xml.bind.annotation.adapters.XmlAdapter;
import com.external.Money;

public class MoneyAdapter extends XmlAdapter<TransportableMoney, Money> {

    @Override
    public Money unmarshal(TransportableMoney v) throws Exception {
        Money money = new Money();
        Currency currency = Currency.getInstance(v.currency);
        money.setCurrency(currency);
        return money;
    }

    @Override
    public TransportableMoney marshal(Money v) throws Exception {
        TransportableMoney transportableMoney = new TransportableMoney();
        transportableMoney.currency = v.getCurrency().getCurrencyCode();
        return transportableMoney;
    }

} 
```

**可移动货币**

```
package com.internal;

public class TransportableMoney {

    public String currency;

} 
```

**包信息**

这是您的`package-info`课程直接取自您的问题。

```
@XmlJavaTypeAdapters({
    @XmlJavaTypeAdapter(value=MoneyAdapter.class, type=Money.class)
})
package com.internal;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapters;

import com.external.Money; 
```

**示例请求**

这是您的`ExampleRequest`课程直接取自您的问题。

```
package com.internal;

import javax.xml.bind.annotation.XmlRootElement;

import com.external.Money;

@XmlRootElement
public class ExampleRequest {
    private Money money;
    public Money getMoney() { return money; }
    public void setMoney(Money money) { this.money = money; }
} 
```

**演示**

下面是一些将 XML 读入对象并将其写回以证明一切正常的示例代码。

```
package com.internal;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(ExampleRequest.class);

        File xml = new File("src/com/internal/input.xml");
        Unmarshaller unmarshaller = jc.createUnmarshaller();
        ExampleRequest er = (ExampleRequest) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(er, System.out);
    }

} 
```

**输入.xml/输出**

这是示例输入和输出 XML。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<exampleRequest>
    <money>
        <currency>USD</currency>
    </money>
</exampleRequest> 
```

# php - 如何将变量从表单传递到 ajax 脚本中的 php 页面？

> ID：12684104
> 
> 赞同：0
> 
> 时间：2012-10-02T03:21:19.793
> 
> 标签：php, javascript, ajax

我有这个表格：

```
<form onsubmit="serverconnect('Div1', 'query.php'); return   
false;" 
Minimum Discount: <br />
<input type="radio" value="20%" name="discount" /> 20% <br />
<input type="radio" value="15%" name="discount" /> 15% <br />
<input type="radio" value="10%" name="discount" /> 10% <br />
<input type="radio" value="5%" name="discount" /> 5% <br />
<input type="submit" value="Refine Search" />
</form> 
```

提交时，表单调用以下 ajax 脚本

```
<script language="javascript" type="text/javascript">

var xmlhttp = false;

if (window.XMLHttpRequest)
{
    xmlhttp = new XMLHttpRequest(); 
}
else if (window.ActiveXObject)
{
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
}

function serverconnect(divID, datalocation)
{
var1=$clickvalue;
if(xmlhttp)
{
    var obj = document.getElementById(divID);
    xmlhttp.open("GET", datalocation);

    xmlhttp.onreadystatechange = function()
    {
        if (xmlhttp.readyState == 4 &&
        xmlhttp.status == 200)
        {
        obj.innerHTML = xmlhttp.responseText;
        }
    }
    xmlhttp.send(null); 
}

}
</script> 
```

我需要将表单数据通过我的 query.php 页面（这是 ajax 的输出）来修改其输出，而不使用 jquery 库。

那么有没有办法通过ajax函数将表单数据传递给函数调用的页面呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T03:28:06.090

是的，您可以使用`ajax`. 当您只使用`GET`方法时，您必须将数据嵌入到这样的页面中

```
<input type="radio" value="20%" name="discount" id="discount" /> 20% <br />

var obj = document.getElementById(divID);
var disc = document.getElementById("discount");
xmlhttp.open("GET", datalocation + "?disc="+disc); 
```

并在 query.php`$_GET['disc']`中用于获取`get`数据。

# php - 检测 PHP 字符串中的高级布尔搜索运算符

> ID：12684107
> 
> 赞同：0
> 
> 时间：2012-10-02T03:21:45.327
> 
> 标签：php

我网站的大多数用户都不熟悉如何正确使用高级搜索运算符。以下只是我在数据库中看到的一个示例：

薰衣草+烧伤+

而不是使用 +lavender +burns

我正在尝试触发错误消息，以便他们可以正确学习如何进行高级搜索。当他们尝试在单个单词而不是短语周围使用引号时，我已经出现了一个错误。现在我试图提出一个错误，当他们没有正确使用 + 时会显示该错误。我的代码可以检测是否有加号，但我只需要一些帮助来判断 + 出现在单词的前面还是后面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T03:25:53.483

这些方面应该做的事情：

```
if (preg_match('/\w\+/', $string)) {
    // a plus was found following a word
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T03:27:05.860

看看你上面的例子，你会感兴趣的正则表达式运算`^`符`$`。它们匹配行的开头和结尾。例如，`^+[a-zA-z]*`将匹配您想要的内容并`[a-zA-Z]*+$`匹配您的用户输入的内容。

在这里阅读更多：[http ://www.regular-expressions.info/anchors.html](http://www.regular-expressions.info/anchors.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T03:28:31.873

您可能可以编写一个很好的正则表达式来执行此操作，但您可能想尝试类似这样的简单操作。

```
$queryArray = explode(' ', $rawQuery);
if (count($queryArray)) {
    if ('+' === $queryArray[0][0]) {
        // + is in front of first word in query
    }

    $lastWordInQuery = $queryArray[count($queryArray) - 1];
    if ('+' === $lastWordInQuery[strlen($lastWordInQuery) - 1]) {
        // + is at the end of last word in query
    }
} 
```

# selenium-webdriver - 使用 selenium webdriver 使用 xpath 遍历父子节点

> ID：12684108
> 
> 赞同：1
> 
> 时间：2012-10-02T03:22:03.757
> 
> 标签：selenium-webdriver

我有一个类似于以下的 html

```
<table>
<tr>
    <td class='1'>
        <div>
            <a class='abc'> element1 </a>
        </div>
    </td>
    <td class='2'></td>
    <td class='3'>
        <img id='generated id' class='xyz' />
    </td>
</tr>
</table> 
```

我有 element1 作为函数的参数。当我得到element1时，我需要遍历到img标签并点击它。

我尝试了 xpath 选择器

```
WebElement e = driver.getelementbyXpath("//a[contains(@class,'abc')
and text()='element1')"]);

WebElement e2 = e1.findelementbyxpath("../..//img[contains(@id,'something') 
and contains(@class='xyz')]"); 
```

这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:06:20.960

您的“element1”文本节点两侧都有空格填充。 `"//a[contains(@class,'abc') and text()=' element1 ')"`会工作的;）

此外，您使用了太多`contains`，我认为这与`[@class='abc']` `[@id='blah..']`.

# python - 不带替换功能的替换

> ID：12684109
> 
> 赞同：-1
> 
> 时间：2012-10-02T03:22:15.643
> 
> 标签：python

> 作业：设 X 和 Y 是两个词。查找/替换是一种常见的文字处理操作，它查找单词 X 的每次出现，并将其替换为给定文档中的单词 Y。
> 
> 你的任务是编写一个执行查找/替换操作的程序。您的程序将提示用户输入要替换的词 (X)，然后是替换词 (Y)。假设输入文档名为 input.txt。您必须将此查找/替换操作的结果写入名为 output.txt 的文件。最后，您不能使用 Python 中内置的 replace() 字符串函数（这会使赋值变得过于简单）。
> 
> 要测试您的代码，您应该使用记事本或 IDLE 等文本编辑器修改 input.txt 以包含不同的文本行。同样，您的代码输出必须与示例输出完全相同。

这是我的代码：

```
 input_data = open('input.txt','r') #this opens the file to read it. 
 output_data = open('output.txt','w') #this opens a file to write to. 

 userStr= (raw_input('Enter the word to be replaced:')) #this prompts the user for a word 
 userReplace =(raw_input('What should I replace all occurences of ' + userStr + ' with?')) #this      prompts the user for the replacement word

 for line in input_data:
    words = line.split()
    if userStr in words:
       output_data.write(line + userReplace)
    else:
       output_data.write(line)

 print 'All occurences of '+userStr+' in input.txt have been replaced by '+userReplace+' in   output.txt' #this tells the user that we have replaced the words they gave us

 input_data.close() #this closes the documents we opened before 
 output_data.close() 
```

它不会替换输出文件中的任何内容。帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T03:39:50.833

问题是如果找到匹配项，您的代码只会将替换字符串粘贴到行尾：

```
if userStr in words:
   output_data.write(line + userReplace)  # <-- Right here
else:
   output_data.write(line) 
```

由于您不能使用`.replace()`，因此您将不得不解决它。我会在你的行中找到单词出现的位置，把那部分剪掉，然后贴`userReplace`在它的位置上。

为此，请尝试以下操作：

```
for line in input_data:
   while userStr in line:
      index = line.index(userStr)  # The place where `userStr` occurs in `line`.

      # You need to cut `line` into two parts: the part before `index` and
      # the part after `index`. Remember to consider in the length of `userStr`.

      line = part_before_index + userReplace + part_after_index

   output_data.write(line + '\n')  # You still need to add a newline 
```

一个稍微烦人的解决方法`replace`是使用`re.sub()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T03:56:45.240

您可以只使用`split`并`join`实现`replace`

```
output_data.write(userReplace.join(line.split(userStr))) 
```

# python - 在 Python 中计算唯一单词并使用单词和计数创建 dict

> ID：12684112
> 
> 赞同：1
> 
> 时间：2012-10-02T03:22:43.003
> 
> 标签：python, dictionary

我需要帮助创建一个调用函数，该函数`strcount(S)`返回一个字典，其中单词作为键，单词出现的次数作为相应的值。输出应该是这样的：

```
strcount("a a a a b b")
{'a': 4, 'b': 2}
strcount("one")
{'one': 1}
sorted(strcount("this one and that one for one time").items())
[('and', 1), ('for', 1), ('one', 3), ('that', 1), ('this', 1), ('time', 1)] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T03:25:05.030

最 Pythonic 的解决方案是使用`collections.Counter`：

```
>>> from collections import Counter
>>> Counter("this one and that one for one time".split()).items()
[('and', 1), ('for', 1), ('that', 1), ('this', 1), ('one', 3), ('time', 1)] 
```

如果您想编写自己的解决方案，我会尝试这样的事情：

1.  将字符串拆分为单词列表。你可以用`.split()`这个。
2.  构造一个字典，其中每个键是一个单词，值是`0`。
3.  遍历您的单词列表。对于每个单词，添加`1`到`your_dict[word]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-08T21:24:46.873

[或者，您可以在不使用Counter](https://docs.python.org/2/library/collections.html)的情况下实现自己的算法。

```
def countwords(A):  
    dic = {}  
    for item in A.split():  
       if dic.has_key(item):  
           dic[item] += 1  
       else:  
           dic[item] = 1  

    return sorted(dic.items())  # return sorted list. 
```

如果您使用的是 Python 3.x，请替换以下行：

```
if dic.has_key(item): 
```

和：

```
if item in dic: 
```

输出：

```
>>> print (countwords("this one and that one for one time"))
[('and', 1), ('for', 1), ('one', 3), ('that', 1), ('this', 1), ('time', 1)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T04:15:17.240

@Blender 使用的答案[`Counter`](http://docs.python.org/library/collections.html)很棒，但它适用于 Python 2.7 及更高版本。

这是适用于较低版本 Python 的替代解决方案：

```
from collections import defaultdict

word_freq = defaultdict(int)
for i in "this one and that one for this one".split():
   word_freq[i] += 1 
```

这会给你：

```
>>> word_freq
defaultdict(<type 'int'>, {'this': 2, 'and': 1, 'that': 1, 'for': 1, 'one': 3})
>>> word_freq['one']
3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-06T00:56:30.263

我会这样做：

```
def strcount(input):
    d = dict()
    for word in input:
        if word not in d:
            d[word] = 1
        else:
            d[word] += 1
    return d 
```

这是我使用的一种简单方法，也适用于您。也许不是最快的，但绝对有效并且很简单。

# python - 列表中的列表

> ID：12684119
> 
> 赞同：1
> 
> 时间：2012-10-02T03:24:09.107
> 
> 标签：python, python-3.x

我正在解决这个问题，但我无法弄清楚第二部分。我尝试使用反向列表，但它没有解决我的计划。

> 给定一个列表 L（例如 [1,2,3,4]），编写一个生成以下嵌套列表的程序：
> 
> 1.  L1 = `[[1],[1,2],[1,2,3],[1,2,3,4]]`,
> 2.  L2 = `[[4],[3,4],[2,3,4],[1,2,3,4]]`。

到目前为止我的代码：

```
mylist=[,1,2,3,4] 
print("Orginal list L=",mylist) 
n=len(mylist) 
l1=[] 
l2=[] 

for x in range(1,n+1,1):
    l1.append(mylist[0:x]) 
print("L1=",l1) #prints final product of l1

mylist.reverse() #this is where i get messed up
for x in range(1,n+1,1): 
    l2.append(mylist[0:x]) 
print("L2=",l2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T03:30:52.753

您可以在 python 中使用负索引：

> 我的列表[-1] -> 4

鉴于此，这将起作用：

```
mylist=[1,2,3,4] 
print("Orginal list L=", mylist)
n=len(mylist) 
l1=[] 
l2=[] 

for i in range(1, n+1):
    l1.append(mylist[0:i])
    l2.append(mylist[-i:])
print("L1=", l1)
print("L2=", l2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T03:34:16.057

伙计，我喜欢列表理解。

```
L1 = [L[:i+1] for i in xrange(len(L))]
L2 = [L[-i-1:] for i in xrange(len(L))] 
```

您可以将列表理解视为构建列表的一种简单方法。通常，如果你看到自己在做`for x in y: ... list.append(z)`，列表推导式可能是一个更短更优雅的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T03:37:16.693

```
lst = [1,2,3,4]
[lst[0:i] for i in range(1,5)]
[lst[-i:] for i in range(1,5)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T03:30:38.387

不要颠倒您的列表并更改第二个循环

```
for x in range(n-1,-1,-1): 
    l2.append(mylist[x:]) 
```

# javascript - 编译 Jade 模板时出现 TypeError

> ID：12684120
> 
> 赞同：2
> 
> 时间：2012-10-02T03:24:41.823
> 
> 标签：javascript, node.js, express, pug

我有这个玉模板开始导致以下类型错误。

```
TypeError: /home/jared/code/fiestah-admin/views/items.jade:11
    9|         a(href=urlFor('item details', {
    10|           params: {    
 \> 11|             //id: item._id
    12|           }
    13|         })) #{item.name}
    14|         .planner By

Cannot read property '_id' of null
    at list_mixin (eval at <anonymous> (/home/jared/code/fiestah-admin/node_modules/jade/lib/jade.js:176:8))
    at list_mixin (eval at <anonymous> (/home/jared/code/fiestah-admin/node_modules/jade/lib/jade.js:176:8))
    at eval (eval at <anonymous> (/home/jared/code/fiestah-admin/node_modules/jade/lib/jade.js:176:8))
    at Object.exports.compile (/home/jared/code/fiestah-admin/node_modules/jade/lib/jade.js:181:12)
    at ServerResponse.res._render (/home/jared/code/fiestah-admin/node_modules/express/lib/view.js:425:21)
    at ServerResponse.res.render (/home/jared/code/fiestah-admin/node_modules/express/lib/view.js:318:17)
    at render (/home/jared/code/fiestah-admin/controllers/items-controller.js:23:7)
    at module.exports (/home/jared/code/fiestah-admin/controllers/items-controller.js:41:5)
    at Request._callback (/home/jared/code/fiestah-admin/node_modules/lib/libraries/api.js:95:5)
    at Request.init.self.callback (/home/jared/code/fiestah-admin/node_modules/request/main.js:120:22) 
```

它抱怨一个属性`_id`，但我认为它实际上与**`item._id`**. 如果我注释掉该行，或者在 id 之前添加另一个参数，则行号会更改，但异常保持不变。我什至删除`_id`了模板中的两个引用，例外是相同的。

这是模板：

```
.page-header
  h1 Items

mixin list(items)
  hr
  ul.index
    - each item in items
      li
        a(href=urlFor('item details', {
          params: {
            id: item._id
          }
        })) #{item.name}
        .planner By
          | 
          a(href=urlFor('user details', {
            params: {
              id: item.planner._id
            }
          })) #{item.planner.name.full}

.row
  .span4
    h1 Open Items (#{openItems.length})
    mixin list(openItems)
.row
  .span4
    h1 Open Items - No Offers (#{emptyItems.length})
    mixin list(emptyItems)
.row
  .span4
    h1 Past Items (#{pastItems.length})
    mixin list(pastItems) 
```

我检查了三个“项目”数组中传递的内容，它们要么都是空的，要么包含带有`_id`字段的有效对象。数组没有空成员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-22T19:56:53.423

在内联代码中，执行以下操作：

```
.row
  .span4
    h1 Open Items (#{openItems.length})
      +dolist(openItems) 
```

而不是这个：

```
.row
  .span4
    h1 Open Items (#{openItems.length})
      mixin dolist(openItems) 
```

# opencart - 在 opencart 中禁用产品退货功能

> ID：12684123
> 
> 赞同：1
> 
> 时间：2012-10-02T03:25:43.083
> 
> 标签：opencart

我的客户不接受退货。有没有办法在不修改模板文件的情况下禁用此返回功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:09:20.610

AFAIK 答案是否定的。您必须编辑模板和/或使用 VQmod 更改引用返回的代码。

但是管理员中没有选项可以禁用产品退货

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-19T22:01:10.287

非常简单的解决方案....只需转到您的 cpanel，然后：/catalog/language/english/common/footer.php

在那里您会找到一个列表，其中包括：“返回”....只需删除该行并单击保存，它就会消失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-11T15:27:45.120

只需添加：

```
 $this->response->redirect($this->url->link('account/account', '', 'SSL')); 
```

在catalog/controller/account/return的每个类方法的开头

您还必须禁用帐户和页脚中显示的链接

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-02T07:58:25.000

在较新版本的 OC (3.x) 中，这可以通过在管理控制面板的“编辑主题”部分下编辑页脚模板来完成：

1.  转到管理控制面板。
2.  在“设计”下，选择主题编辑器。
3.  从列表中，选择 Common->footer.twig。
4.  在“footer.twig”中搜索这一行：`<li><a href="{{ return }}">{{text_return }}</a></li>`并将其删除。
5.  保存您的更改。

# ruby-on-rails - Rails 上的基本数据库设计表

> ID：12684124
> 
> 赞同：0
> 
> 时间：2012-10-02T03:25:43.627
> 
> 标签：ruby-on-rails, database, database-design, activerecord

我对一个概念感到困惑。我在轨道上做这个。

该实体集是否等于数据库中的表？

该关系集是否等于数据库中的表？

假设我们有实体集“USER”和实体集“POST”和实体集“COMMENT”

用户-可以随意发布许多帖子和评论帖子-属于
用户
评论-属于帖子，用户，因此评论是弱实体。

```
SCHEMA
======
USER
-id
-name
POST
-id
-user_id(FK)
-comment_id (FK)
COMMENT
-id
-user_id (FK)
-post_id (FK) 
```

所以 USER,POST,COMMENT 是我认为的表格。

还有什么是桌子？我需要一张表来建立关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:34:26.977

是的，它们是表格，但它们应该始终是复数形式。因此，您可以将用户、帖子、评论作为模型，将用户、帖子、评论作为表格。然后你的模型与他们自己的表相关

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:13:22.060

给定您所做的数据，从生成器开始（添加任何其他需要的字段，请参阅[rails 生成模型字段：类型，字段：类型的选项是什么？](https://stackoverflow.com/questions/4384284/rails-generate-model-fieldtype-what-are-the-options-for-fieldtype)）：

```
rails generate model user name:string
rails generate model post user:references
rails generate model comment user:references post:references 
```

# mysql - 使用 64bit mysql 和 R 32bit (64Bit Win7 )

> ID：12684125
> 
> 赞同：2
> 
> 时间：2012-10-02T03:25:46.700
> 
> 标签：mysql, r, windows-7, 64-bit, 32-bit

RMySQL 库适用于 R-64 位版本。但它仍然不适用于 32bit R 版本

因为我正在使用仅适用于 32 版本 R 的 statconn 工具（DCOM，rcom），

我需要使用 R-32 位版本访问 MySQL 数据库。

以下是我到目前为止所做的事情。

*   安装最新的 Rtools
*   安装 64 位 MySQL 客户端（32 位版本不起作用）
*   C:\Program Files\R\R-2.12.1\etc\Renviron.site 并添加类似 MYSQL_HOME=C:/mysql 的行（mysql文件的路径）
*   将 libmysql.lib 复制到 (mysql/lib/opt, R_HOME\bin, windows\system32)
*   install.packages('RMySQL',type='source')
*   将 R_HOME, MYSQL_HOME 正确设置为环境变量
*   将 R_HOME、MYSQL_HOME、Rtools 添加到路径。

错误信息：

```
RS-MySQL.o:RS-MySQL.c:(.text+0x2f23): undefined reference to `mysql_get_client_version@0' 
RS-MySQL.o:RS-MySQL.c:(.text+0x2f44): undefined reference to `mysql_get_client_info@0'
RS-MySQL.o:RS-MySQL.c:(.text+0x2f71): undefined reference to `mysql_server_end@0'

collect2: ld returned 1 exit status

ERROR: compilation failed for package 'RMySQL'

* removing 'C:/Program Files/R/R-2.15.1/library/RMySQL' 
```

**如何在 64 位 MySQL 中使用 32 位 R 版本？**

供您参考。

“RODBC”库适用于 64 位 R 版本，但适用于 32 位 R 版本

# python - 循环遍历 Django 模板中的两个对象

> ID：12684128
> 
> 赞同：0
> 
> 时间：2012-10-02T03:26:07.937
> 
> 标签：python, django

我有一个应用程序对象和图像对象，它们相互链接（应用程序有图像）。

```
def index(request):
    latest_apps_list = App.objects.all().exclude(approved=False).order_by('name')[:20]
    app_images = Image.objects.filter(app__in=latest_apps_list).order_by('app__name')[:20]
    t = loader.get_template('apps/index.html')
    c = Context({
        'latest_apps_list': latest_apps_list,
        'app_images': app_images
    })
    return HttpResponse(t.render(c)) 
```

现在我想在我的模板中循环浏览这些图像。我将如何使用**这两个**变量来做到这一点？我尝试使用 zip()，但这会返回 mysql 错误，因为它需要不支持的数据库查询。还有其他方法吗？

目前我有：

```
{% for app in latest_apps_list %}

...{{ app.name }}

{% endfor %} 
```

这行得通。当然，它不会返回图像 url。（顺便说一句，我正在使用 sorl-thumbnail。）

**更新**也许我只是以错误的方式做这件事。这是我的**模型**：

```
class App(models.Model):
    name = models.CharField(max_length=200)
    # ...

class Image(models.Model):
   app = models.ForeignKey(App)
   image = models.ImageField(upload_to = "apps") 
```

我的**观点**是在上面帖子的原始部分。似乎我应该以某种方式使应用程序的属性和图像属性成为一件事，而无需在视图中压缩。这可能吗？

**更新 2**我通过大大简化模型的创建方式解决了这个问题。如果其他人试图这样做，这就是我所做的。

**apps/admin.py**：图像对象作为普通字段包含在内。

```
class AppAdmin(admin.ModelAdmin):
   fieldsets = [
      ('Basic', {'fields':['name','desc','price','approved','image']}),
      ('Author',        {'fields':['docs_url', 'preview_url']}),
   ]
   list_display = ('name', 'desc', 'price', 'approved')

admin.site.register(App, AppAdmin) 
```

**apps/models.py**：只需将图像作为应用程序本身的一部分。不需要外键。

```
class App(models.Model):
    name = models.CharField(max_length=200)
    # ...
    image = models.ImageField(upload_to = "apps") 
```

**apps/views.py**：现在视图只有一个要循环的对象。不需要奇怪的 sql 查询。

```
def index(request):
    latest_apps_list = App.objects.all().exclude(approved=False).order_by('name')[:20]
    t = loader.get_template('apps/index.html')
    c = Context({
        'latest_apps_list': latest_apps_list,
    })
    return HttpResponse(t.render(c)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T04:49:19.563

您应该将它们压缩到视图中，并将压缩后的对象传递给模板，然后遍历它们。

看法：

```
def index(request):
    latest_apps_list = list(App.objects.all().exclude(approved=False).order_by('name')[:20])
    app_images = Image.objects.filter(app__in=latest_apps_list).order_by('app__name')[:20]
    t = loader.get_template('apps/index.html')
    c = Context({
        'zipped_app_list': zip(latest_apps_list, list(app_images))
    })
    return HttpResponse(t.render(c)) 
```

模板：

```
{% for app, image in zipped_app_list %}
    {{ app }}
    {{ image}}
{% endfor %} 
```

# macos - 如何在 mac osx 中将 mongodb 从 2.0 升级到 2.2

> ID：12684132
> 
> 赞同：5
> 
> 时间：2012-10-02T03:26:34.597
> 
> 标签：macos, mongodb, upgrade

当您已经使用 brew 安装 2.0 时，我无法在 mongodb 网站上找到有关如何安装 2.2 的说明。我可以看到使用“brew 版本 mongodb”的版本，但是当我尝试安装一个版本时，它说“mongodb 在地窖中没有版本“2.2.0-x86_64”。”

版本命令显示：

```
new-host-4:~ scott$ brew versions mongodb
2.2.0-x86_64 git checkout 34fb67d /usr/local/Library/Formula/mongodb.rb
2.0.7-x86_64 git checkout 6434ebb /usr/local/Library/Formula/mongodb.rb
2.0.6-x86_64 git checkout 2553479 /usr/local/Library/Formula/mongodb.rb
... 
```

我知道这只是几行魔法，但我不知道正确的咒语。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-02T03:29:07.073

我所要做的就是以下...

```
$ brew update
$ brew upgrade mongodb 
```

# java - 通过重定向在 java web 服务器和 php web 服务器之间传递属性

> ID：12684133
> 
> 赞同：0
> 
> 时间：2012-10-02T03:26:41.647
> 
> 标签：java, php, web-applications, web

场景：用户访问Web容器A（Apache Tomcat），A在会话范围内设置值，

```
HttpServletRequest.getSession().setAttribute(“key”, “value”); 
```

并将用户重定向到另一个 Web 容器 B（一个 php 服务器）。

```
HttpServletResponse.sendRedirect("path to server B"); 
```

B 能否在 A 设置的会话范围内获得相同的值？

```
HttpServletRequest.getSession().getAttribute(“key”); 
```

根据这个问题，[java servlet application scope redirect](https://stackoverflow.com/questions/11744528)

似乎有可能，虽然它可能**重定向到同一个容器**，但 httpsession 将**在同一个 VM**中，或者**负载平衡服务器中的另一个容器中**，httpsession 可以**在这些容器之间迁移**，因此***httpsession***在这两种情况下将***保持静止。***

如果我想在重定向时在两个不同的服务器（java 和 PHP）之间传递属性怎么办？

希望我能正确表达我的想法，任何建议将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T03:32:27.473

如果您希望在 Java Web 服务器和 PHP Web 服务器之间传递属性，您必须将它们作为请求参数（作为查询字符串的一部分，HTTP URL 之后的部分`?`）添加到传出的 HTTP 请求中。

Java Web 服务器中的`HttpSession`信息在服务器端可用，并通过`JSESSIONID`请求参数或 cookie（基于浏览器是否支持 cookie）在两个无状态 HTTP 会话之间连接。因此，在 Java Web 服务器的 Session 中设置的任何属性对于 PHP Web 服务器都将不可用。

# eclipse - 在 Eclipse 中自动附加源文件

> ID：12684134
> 
> 赞同：0
> 
> 时间：2012-10-02T03:26:45.673
> 
> 标签：eclipse

是否可以配置该 Eclipse IDE 以便它自动下载并显示所使用的依赖类的源代码？我尝试在 text 上使用 CTRL+click ，但是当我导航到它时，并没有自动下载和显示`java.lang.annotation.retention`的源代码。`java.lang.annotation.retention`相反，我收到了通常的“找不到源”错误消息。我想知道是否可以配置 Eclipse 以便它自动附加`java.lang`类的源（可能还有其他类），这样就不需要手动附加源。

# video - Joomla 显示流媒体视频

> ID：12684137
> 
> 赞同：1
> 
> 时间：2012-10-02T03:27:29.873
> 
> 标签：video, joomla, video-streaming

我需要从 joomla 2.5 网站阅读流媒体视频。
有什么线索吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:24:19.000

通过“阅读”，我假设您的意思是“观看”。

在问这样的问题之前，你真的应该检查[Joomla 扩展目录](http://extensions.joomla.org)，在那里你会发现大量关于视频的扩展。抱歉，我无法给出更具体的答案，但是您可能需要在问题中提供更多细节。

# mysql - MySQL连接来自多个列的数据跳过重复

> ID：12684139
> 
> 赞同：0
> 
> 时间：2012-10-02T03:27:43.083
> 
> 标签：mysql

我正在寻找一种对重复列数据进行分组的方法。
我有一个表格，其中包含如下数据：

```
-------------------------------------------
ID  | locationId | day | open     | close
-------------------------------------------
1   | 1213       | Wed | 10:00 am | 4:30 pm
-------------------------------------------
2   | 1213       | Thr | 10:00 am | 4:30 pm
-------------------------------------------
3   | 1213       | Fri | 10:00 am | 4:30 pm
-------------------------------------------
4   | 1213       | Sat | 10:00 am | 5:30 pm
------------------------------------------- 
```

我正在使用`group_concat`将 locationId 1213 的信息返回为

`Wed: 10:00 am-04:30 pm,Thu: 10:00 am-04:30 pm,Fri: 10:00 am-04:30 pm,Sat: 10:00 am-05:30 pm`

有没有办法使用 group_concat 或其他函数/查询对重复的打开和关闭时间进行分组并返回类似于以下的数据？

```
Wed,Thr,Fri: 10:00 am-04:30 pm,Sat: 10:00 am-05:30 pm 
```

甚至

```
Wed-Fri: 10:00 am-04:30 pm,Sat: 10:00 am-05:30 pm 
```

下面是我正在使用的 SQL 代码：

```
SELECT appdata.nameShort, 
group_concat(distinct concat(appdatahours.`day`,": ", appdatahours.open, "-", 
appdatahours.close)) as hours
FROM appdata
LEFT JOIN appdatalocations on appdatalocations.listingId = appdata.id
LEFT JOIN appdatahours on appdatahours.locationId = appdatalocations.id
GROUP BY appdata.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:37:01.990

试试这个（使用派生表）：

```
select locationId, group_concat(day_group) from
(
    SELECT
    locationID, concat(group_concat(`day`),": ", open, "-", close) as day_group
    FROM tableB
    GROUP BY locationID, open, close
) dayGroup; 
```

sqlfiddle在这里：[http ://sqlfiddle.com/#!2/c19c5/1/0](http://sqlfiddle.com/#!2/c19c5/1/0)

# ruby-on-rails-3 - 你如何指定一个被覆盖的 Rails 3 FormHelper？

> ID：12684146
> 
> 赞同：2
> 
> 时间：2012-10-02T03:28:41.753
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, rspec2, erb, actionview

我已经覆盖了标准的 Rails FormHelper，让它以我们的（几乎基于 Bootstrap）格式吐出表单元素（在[http://www.likeawritingdesk.com/posts/very-custom-form-b](http://www.likeawritingdesk.com/posts/very-custom-form-builders-in-rails) ​​uilders-in-rails 之后）。

它工作正常，但很难为其编写规范。我正在使用这样的规范：

```
rendered_form = helper.my_custom_form_for(@account, :url => '/accounts') do |f|
  f.inputs do
    # This isn't rendered
    f.text_field 'name', :size => 30 
    # This is rendered
    f.select 'locale', options_for_select([%w(Australia en-AU), %w(UK en-GB)]) 
  end
end 
```

呈现的内容包括选择标签，但不包括文本字段标签。我怀疑这是因为 ActionView 现在处理块的方式，附加块的返回值而不是块中每个语句的返回值。显然，当在应用程序的上下文中使用时，辅助方法会通过一些 ERB 并在该上下文中进行评估。

1.  我是对的，不可能以这种方式测试渲染辅助方法，在一个块中有多个语句吗？
2.  如果我是对的，那么在一个完整的应用程序的上下文中，制作一个与助手所做的事情相同的规范的最简单的方法是什么？制作一个 ERB 字符串并以某种方式将其传递给助手进行渲染？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T17:28:03.267

你解决了吗？我很好奇您是否只是在返回块中的最后一条语句。您是否尝试过更改 f.text_field/f.select 顺序以查看返回的内容？如果是这样，那么您只需要添加它们：

```
rendered_form = helper.my_custom_form_for(@account, :url => '/accounts') do |f|
  f.inputs do
    f.text_field('name', :size => 30) +
    f.select('locale', options_for_select([%w(Australia en-AU), %w(UK en-GB)]))
  end
end 
```

# mysql - 使用 MySQL 空间扩展从一个点查找 N 个最近的 LineString

> ID：12684148
> 
> 赞同：8
> 
> 时间：2012-10-02T03:29:11.023
> 
> 标签：mysql, geospatial

我正在使用[MySQL Spatial Extensions](http://dev.mysql.com/doc/refman/5.5/en/spatial-extensions.html)来存储有关道路和酒店的数据。我将酒店数据存储为点，而将道路数据存储为 LineString。桌子看起来像这样

```
CREATE TABLE IF NOT EXISTS `Hotels` (
    `id` int unsigned NOT NULL AUTO_INCREMENT,
    `name` text,
    `coordinate` point NOT NULL,
    PRIMARY KEY (`id`),
    SPATIAL KEY `coordinate` (`coordinate`),
)

CREATE TABLE IF NOT EXISTS `Roads` (
    `id` int unsigned NOT NULL AUTO_INCREMENT,
    `name` text,
    `route` linestring NOT NULL,
    PRIMARY KEY (`id`),
    SPATIAL KEY `coordinate` (`route`),
) 
```

实例的可视化将是这样的。

![http://i.stack.imgur.com/8IVVA.png](../Images/8e4403b1b22d9190bc1998841dba137e.png)

我的问题是给定一个数字 N 和一个点 P，从 P 点找到 N 条最近的道路的 SQL 查询是什么？该距离由道路中的一段与上图所示点之间的最小垂直距离定义。（虽然在现实中，最近的距离应该是高速公路大门和酒店之间，但在这种情况下，我们可以从任何一点进入高速公路：P）

如果这个问题没有单一的 SQL 语句解决方案，我可以接受中间 SQL 查询和后处理。但是什么是高效的 SQL 查询以及如何对数据进行后处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:12:57.357

您可以在数据库中创建两个函数：

1.  距离：这将为您提供两点之间的距离
2.  DistanceFromLine ：此处的距离将从直线中的每个点计算，并为您提供最短距离。

比较你的点和线之间的距离并选择最短的。

这是距离函数

* * *

```
delimiter //

CREATE FUNCTION distance (latA double, lonA double, latB double, LonB double)
RETURNS double DETERMINISTIC
    BEGIN
        SET @RlatA = radians(latA);
        SET @RlonA = radians(lonA);
        SET @RlatB = radians(latB);
        SET @RlonB = radians(LonB);
        SET @deltaLat = @RlatA - @RlatB;
        SET @deltaLon = @RlonA - @RlonB;
        SET @d = SIN(@deltaLat/2) * SIN(@deltaLat/2) +
        COS(@RlatA) * COS(@RlatB) * SIN(@deltaLon/2)*SIN(@deltaLon/2);
        RETURN 2 * ASIN(SQRT(@d)) * 637101;
    END// 
```

* * *

这是 DistanceFromLine 函数：

* * *

```
DROP function IF EXISTS `DistanceFromLine`;
delimiter //
    CREATE FUNCTION `DistanceFromLine`(
    route LINESTRING, point1 POINT
    ) RETURNS INT DETERMINISTIC
        BEGIN
        DECLARE a INT Default 0 ;
        DECLARE minDistance INT Default 0;
        DECLARE currentDistance INT Default 0;
        DECLARE currentpoint point ;
        DECLARE size INT Default 0 ;
        SET size =  NumPoints(route);
              simple_loop: LOOP
       SET a = a+1;
       SET currentpoint = PointN(route,a);
       SET currentDistance = Distance(X(point1), Y(point1),       
               X(currentpoint),Y(currentpoint));

       IF a = 1 THEN
        SET minDistance = currentDistance;
           END IF;

       IF currentDistance < minDistance THEN
        SET minDistance = currentDistance;
       END IF;
       IF a=size THEN
                 LEAVE simple_loop;
       END IF;
          END LOOP simple_loop;
     RETURN (minDistance);
 END// 
```

* * *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-08T05:19:02.030

这对我来说是一个非常有用的答案，但我使用的是 MySQL 5.7.18，它具有更高级或不同的地理查询功能。不再需要发布的距离函数 - 使用 ST_Distance_Sphere。所以这里是相同代码的更新，以使 DistanceFromLine 与现代（5.7.6+）MySQL 兼容......

```
DROP function IF EXISTS `DistanceFromLine`;
delimiter //
    CREATE FUNCTION `DistanceFromLine`(
    route LINESTRING, point1 POINT
    ) RETURNS INT DETERMINISTIC
        BEGIN
        DECLARE a INT Default 0 ;
        DECLARE minDistance INT Default 0;
        DECLARE currentDistance INT Default 0;
        DECLARE currentpoint point ;
        DECLARE size INT Default 0 ;
        SET size =  ST_NumPoints(route);
              simple_loop: LOOP
       SET a = a+1;
       SET currentpoint = ST_PointN(route,a);
       SET currentDistance = ST_Distance_Sphere(point1,currentpoint);

       IF a = 1 THEN
        SET minDistance = currentDistance;
           END IF;

       IF currentDistance < minDistance THEN
        SET minDistance = currentDistance;
       END IF;
       IF a=size THEN
                 LEAVE simple_loop;
       END IF;
          END LOOP simple_loop;
     RETURN (minDistance);
 END// 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-02T21:00:03.303

我也一直在研究这个问题，但不幸的是，为酒店找到最近的道路是一个不利的解决方案。我发现道路所在的入口是确定的答案。换句话说，地址。这意味着有一个地址表和匹配点到*最近的地址道路*。

# c - 在动态 DLL 中使用线程私有变量？

> ID：12684149
> 
> 赞同：0
> 
> 时间：2012-10-02T03:29:36.107
> 
> 标签：c, multithreading, visual-studio-2010, openmp

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:03:09.513

`threadprivate`在 MS OpenMP 实现中被转换为`__declspec(thread)`将声明的变量放入静态 TLS（线程本地存储）中。当程序启动时，TLS 的大小是通过考虑可执行文件所需的 TLS 大小以及所有其他隐式加载的 DLL 的 TLS 要求来确定的。当您使用 动态加载`LoadLibrary`或卸载另一个 DLL 时`FreeLibrary`，系统必须检查所有正在运行的线程并相应地扩大或压缩它们的 TLS 存储。根据[KB118816](http://support.microsoft.com/kb/118816)：

> 这个过程对于操作系统来说管理太多，当动态加载 DLL 或代码引用数据时，这可能会导致异常。

访问这些变量被认为是未定义的行为。它适用于您的情况，但这并不意味着它可以随时随地使用。[在这里](http://www.nynaeve.net/?p=187)，您可以了解为什么它在 Windows XP/2003 和更早的 Windows 版本上很可能会失败。根据同一来源，隐式 TLS 处理在 Windows Vista 和 OpenMP 中被重写，并且`threadprivate`从那时`__declspec(thread)`起应该在运行时加载的 DLL 中正确运行。建议的解决方案是改为使用`TlsAlloc`。

```
DWORD dwTlsIdx;

extern "C" __declspec(dllexport) int MyFunc1(void)
{
   int i;
   #pragma omp parallel for
   for (i = 0; i < n; i++) {
      MyFunc2(i);
   }
   return TRUE;
}

void MyFunc2(void)
{
    int **pp = (int **)TlsGetValue(dwTlsIdx);
    *pp = malloc(sizeof(int));
    **pp  = 0;
    printf(“value = %d”,**pp);
    free(*pp);
} 
```

`dwTlsIdx`应通过`DllMain`调用`TlsAlloc`. 应该在线程附加上分配足够的内存来保存一个`int *`，并且它的地址应该设置为`dwTlsIdx`TLS 索引的值。或者你可以在第一次调用时这样做`MyFunc2`：

```
void MyFunc2(void)
{
    int **pp = (int **)TlsGetValue(dwTlsIdx);
    if (pp == NULL)
    {
       pp = malloc(sizeof(int *));
       TlsSetValue(dwTlsIdx, pp);
    }
    *pp = malloc(sizeof(int));
    **pp  = 0;
    printf(“value = %d”,**pp);
    free(*pp);
} 
```

有关更多详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686997%28v=vs.85%29.aspx)（带有错误检查）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:02:36.483

我没有尝试使用 OMP，但我有很好的使用经验

```
DWORD WINAPI TlsAlloc(void); 
```

和其他`TlsXxx`功能。我很确定这`threadprivate(p)`是最终实现此功能的包装器。此功能在 exe、静态和动态加载的 dll 等中完美运行。

在一种情况下，我在处理过程中同时看到了大约 800 个 TLS 索引。每个线程（大约 200 个线程）在其线程本地存储中都有这个数量的对象。NT 在堆中分配缓冲区来处理这些数据。所有这一切都很好。

可能是在写 MSDN 文章的时候出现了一些问题，但现在很可能已经修复了。

我的 2 美分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T01:31:34.587

赫里斯托和基里尔，

感谢您的回复。

微软似乎已经解决了动态 DLL 中的 TLS 问题（至少在我使用的 Windows 7 中）。也许他们只是没有更新文档。我保持手指交叉。

我创建了一个测试项目，在其中通过 __declspec(thread) pragmas 使用 TLS 测试了这个想法（正如 Hristo Iliev 在另一篇文章中向我建议的那样）。该项目使用了大量的 TLS 变量（只是为了测试）并且一切正常。然后我在工作项目中移动了代码。这是一个加载许多动态 DLL 的大型项目（约 100 万行代码）。这一切也都在那里工作。

对于最坏的情况，我仍然持有使用 TlsAlloc、TlsSetValue、TlsGetValue 函数的想法。但它并不适合我，因为我担心这些功能会在我拥有的数字运算代码中增加大量偷听。我的库只需要一些 TLS 变量，但这些变量在代码中被广泛使用，包括位于堆栈深处的低级函数。

干杯，

亚历克斯·亚姆奇科夫

# c# - Api 文档和枚举语义

> ID：12684150
> 
> 赞同：1
> 
> 时间：2012-10-02T03:29:38.480
> 
> 标签：c#, api, enums, documentation

我正在为我的 REST Web 服务创建 API 文档。请求和响应包含一些枚举，但是描述这些的好标题是什么。标题“枚举”听起来很编程，我错了吗？

```
Gender

Male - 1
Female - 2

Pool Team Status

All - 1
Active - 2
Active and Paid - 3

Registration Status

All - 1
Active - 2
Active and Paid - 3

Status

All - 1
Active - 2
Active and Paid - 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:43:25.567

您可以将它们称为选项、替代品或任何其他同义词（如果它们是这样的话）。

尽管如此，假设您正在为其他程序员编写文档，而不仅仅是管理必须经历的事情，我认为枚举或枚举是好的，因为您的听众会很清楚，这就是您想要实现的目标。

# jslint - jslint - jslint4java - 如何在 javascript 中跳过检查必需块条件

> ID：12684151
> 
> 赞同：0
> 
> 时间：2012-10-02T03:29:37.863
> 
> 标签：jslint, jslint4java, gjslint

我必须在我的 Javascript 代码中使用这样的条件

```
if (condition) statement; 
```

但它返回一个错误

> (" 预期为 '{' 而看到的是 ' '。")

在使用 jslint4java 进行验证时。有没有办法跳过这个检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T06:07:13.100

我不这么认为。找出答案的方法是访问[jslint.com](http://jslint.com/)并查看可以使用的选项，然后将该选项传递给 jslint4java。但是我刚刚检查过，似乎没有一个选项可以满足您的要求。

# qt-creator - 如何在 QtCreator 中设置我的项目层次结构？

> ID：12684152
> 
> 赞同：5
> 
> 时间：2012-10-02T03:29:39.977
> 
> 标签：qt-creator, subdirectory

我对 QtCreator 很陌生，所以也许我把心留在了 eclipse-ville，但我一生都无法理解应该如何在 QtCreator 中设置项目层次结构。我知道有一个选项可以创建一种根项目，然后从那里添加子项目，这是有道理的，但这让我想知道在创建项目时这是否是必要的，例如我可以在一个项目中创建一个库并稍后由另一个项目引用它？

我已经尝试通过创建一个新的 subdirs 项目然后将主程序添加为子项目来设置一揽子类型的项目，但是我应该如何添加我的库项目？

理想情况下，我想创建一个项目作为主应用程序，并将另一个项目作为库引用。帮助？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T06:30:37.650

[Qt Creator](http://doc.qt.io/qtcreator/index.html)的文档包含两个部分，可以帮助您找到问题的答案：

*   [将子项目添加到项目](http://doc.qt.io/qtcreator/creator-project-creating.html#adding-subprojects-to-projects)
*   [将库添加到项目](http://doc.qt.io/qtcreator/creator-project-qmake-libraries.html)

编辑：您可以在这里找到一个非常简单的示例项目：[QtSymbianDllExample](https://bugreports.qt.io/secure/attachment/13361/QtSymbianDllExample.zip)。“它旨在演示如何在 Symbian 平台上通过 Qt 创建和使用 DLL”。它是 Symbian 开发的示例，但现在无关紧要，我没有 Symbian 手机。重要的是它包含一个根项目（QtSymbianDllExample\qtssymbiandllexample.pro）和两个子项目（QtSymbianDllExample\qtenginedll\qtenginedll.pro、QtSymbianDllExample\testui_simpledllengine\testui_simpledllengine.pro），您可以检查并与您的项目进行比较。我已检查是否可以通过执行以下步骤来构建根项目：

1.  [从http://www.qt.io/download/](http://www.qt.io/download/)下载并安装 Windows 离线安装程序
2.  下载并解压 QtSymbianDllExample.zip
3.  运行 Qt Creator
4.  文件/打开文件或项目...选择 qtssymbiandllexample.pro
5.  构建/运行 qmake
6.  构建/构建项目“qtsymbiandllexample”

# python-2.7 - 来自 PIL 的 pix[x,y] 产生名称错误

> ID：12684158
> 
> 赞同：1
> 
> 时间：2012-10-02T03:31:18.830
> 
> 标签：python-2.7, python-imaging-library, pixel

我是一名初学者程序员，我正在尝试使用 python 从图片中访问像素数据。我想最终将像素数据放入一个数组中。我在网上搜索了如何执行此操作的代码，这就是我得到的：

```
from PIL import Image

im = Image.open("C:/Users/Owner/Desktop/bw.png")
pix = im.load()
print pix[x,y]
pix[x,y] = value 
```

在我到达 print[x,y] 行之前，它似乎工作正常。我收到一条错误消息，提示“NameError: name 'x' is not defined”。我已经下载了 PIL 1.1.7。

谁能帮我一把？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:32:27.523

呃，你没有定义`x`, `y`, 或者`value`...也许可以先定义那些？你想访问哪个像素？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T23:22:53.467

```
im = Image.open("C:/Users/Owner/Desktop/bw.png")
x, y = 1, 2    #sample coordinates
print im.getpixel((x, y)) 
```

这应该有效，请注意`getpixel`您传递一个参数的方法 - 一个元组

# directx - 二维纹理交换

> ID：12684159
> 
> 赞同：1
> 
> 时间：2012-10-02T03:31:22.377
> 
> 标签：directx, directx-11

我是 dx 编程的新手，我对纹理有疑问。我正在做一个 2d 引擎，我实现了一个简单的精灵批处理，我可以在我的动态缓冲区上写，设置 uv 坐标并在屏幕上绘制一些精灵。如果我使用单个纹理，一切都可以正常工作，但是当我想更改纹理并绘制新的精灵时，就没有任何效果了。我正在做的是使用函数 D3DX11CreateShaderResourceViewFromFile 加载纹理并存储指针。然后在渲染循环中，当我完成一个纹理时，我使用： PSSetShaderResources(0, 1, &texture_pointer) 交换到另一个纹理，但最后一个函数崩溃，它只适用于一个纹理。我应该怎么做才能从纹理交换到另一个纹理？谢谢！

# sql - 将许多值非规范化为一列的游标的替代方法？

> ID：12684162
> 
> 赞同：1
> 
> 时间：2012-10-02T03:32:06.183
> 
> 标签：sql, sql-server, sql-server-2008

> **可能重复：**
> [SQL Server：我可以用逗号将多行分隔为一列吗？](https://stackoverflow.com/questions/2046037/sql-server-can-i-comma-delimit-multiple-rows-into-one-column)
> [SQL Query 以逗号分隔符以及 SQL Server 中的按列分组获取聚合结果](https://stackoverflow.com/questions/6344950/sql-query-to-get-aggregated-result-in-comma-seperators-along-with-group-by-colum)

我有一个类似的表：

```
DocumentID      Name
1           Jack D'Souza
1           Rick Astley
1           Frankestein
1           Einstein 
```

我想编写一个 SQL Server 标量函数，该函数将在参数中接受 DocumentID 并给出一个 CSV 分隔值。所以，如果我通过`1`，它会给`Jack D'Souza, Rick Astley, Frankestein, Einstein`

在函数内部，我可以在光标中创建并创建这个 CSV 列表。但是除了使用游标还有其他选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T03:40:26.837

看看这个例子

```
CREATE FUNCTION MyConcat(@ID INT)
RETURNS VARCHAR(MAX)
AS
BEGIN
  DECLARE @RetVal VARCHAR(MAX)
    SELECT  @RetVal = stuff(
                    (
                        select  ',' + t1.Name
                        from    MyTable t1
                        where   t1.DocumentID = t.DocumentID
                        for xml path('')
                    ),1,1,'') 
    FROM    MyTable t
    WHERE   t.DocumentID = @ID
    GROUP BY t.DocumentID
  RETURN @RetVal
END; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/8d6c6/1/0)

您还可以创建一个表函数，该函数将返回您需要的所有值。

就像是

```
CREATE FUNCTION MyConcatTable()
RETURNS @RetTable TABLE(
    [DocumentID] int, 
    [Name] varchar(MAX)
)
AS
BEGIN
    INSERT INTO @RetTable
    SELECT  t.DocumentID,
            stuff(
                    (
                        select  ',' + t1.Name
                        from    MyTable t1
                        where   t1.DocumentID = t.DocumentID
                        for xml path('')
                    ),1,1,'') 
    FROM    MyTable t
    GROUP BY t.DocumentID
  RETURN
END; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/10c1f/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T03:37:01.547

您可以创建一个执行此操作的 CLR 聚合函数。快速搜索谷歌发现：

[http://www.mssqltips.com/sqlservertip/1691/sql-server-clr-function-to-concatenate-values-in-a-column/](http://www.mssqltips.com/sqlservertip/1691/sql-server-clr-function-to-concatenate-values-in-a-column/)

似乎在 VB.Net 中，我敢肯定还有其他示例，尽管这些示例已经编写好了，因为这是一个非常常见的请求

# php - 延迟 PHP 执行直到 JavaScript cookie 设置？

> ID：12684174
> 
> 赞同：2
> 
> 时间：2012-10-02T03:33:33.447
> 
> 标签：php, javascript

我试图延迟 PHP 执行，直到通过 JavaScript 设置 cookie。代码如下，`createCookie`为了简单起见，我修剪了 JavaScript 函数（我已经测试了函数本身并且它可以工作）。

```
<?php
if(!isset($_COOKIE["test"])) {
    ?>
    <script type="text/javascript">
        $(function() {
            // createCookie script
            createCookie("test", 1, 3600);
        });
    </script>
    <?php
    // Reload the page to ensure cookie was set
    if(!isset($_COOKIE["test"])) {
        header("Location: http://localhost/");
    }
}
?> 
```

起初我不知道为什么这不起作用，但是在使用之后`microtime()`我发现 PHP 在jQuery 就绪函数*之前*`<script>`执行。我显着减少了我的代码以显示一个可以回答的简单版本，我很清楚我能够在 PHP 中使用，对 cookie 的要求是客户端。*`setcookie()`*

 *我知道混合 PHP 和 JavaScript 是不正确的，但是对于如何使这项工作有任何帮助（是否有 PHP 延迟？-我试过`sleep()`了，没有工作并且认为它不会工作，因为脚本也会被延迟) 将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T03:55:38.197

正如其他答案所述，做您想做的事情并非***不可能，但是对于您的服务器而言，等待客户端“设置cookie”的每个请求也不是微不足道且严重的坏主意。***

但这是可以完成的。

1.  PHP 代码将编写一个`<script>`用于设置 cookie 的块。
2.  PHP 代码将开始一个空闲循环，监视**会话**变量。不是饼干。执行 PHP 脚本的 cookie 已经设置好，不会被 JavaScript 更改。
3.  #1 中编写的 JavaScript 块还需要对服务器进行 AJAX 调用。它调用的 PHP 脚本应该设置你关心的 cookie，但也设置会话变量#2 关心。
4.  监视会话的原始脚本应该唤醒并按您的计划继续。

虽然 PHP*确实*在 JavaScript 之前执行，但所有浏览器都会增量加载由 PHP（或任何服务器端语言）生成的 HTML/CSS/JavaScript 内容。由于增量加载，您的 PHP 脚本可能会延迟 JavaScript 执行某些操作（如上所述），然后再继续。但是您的服务器将有很多令人头疼的事情要处理，例如如果 JavaScript 请求从未通过，那么要等待多长时间才能让 JavaScript 打破 #2 中的空闲循环等。

这不是标准网页的正常执行流程。除非您真的需要这个，否则也许可以将其视为概念验证答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T03:38:12.407

如果要在 PHP 之前执行 JavaScript，则必须将其分成两个请求。您可以在一个请求中加载 JavaScript，并在设置 cookie 后执行 Ajax 请求。请记住，在执行客户端代码之前会处理所有服务器端代码。

我不得不问..你为什么要这样做？你想达到什么目的？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T03:45:15.680

Cookies 可以在 PHP 中设置[`setcookie`](http://php.net/setcookie)

```
setcookie("test",1,time()+3600); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T03:37:30.863

PHP 首先在服务器上完整执行。然后它将最终的 HTML/Javascript/CSS 输出发送到浏览器。浏览器接收到这个并执行任何 Javascript。

用该代码做你想做的事情基本上是**不可能的。**PHP 和 Javascript 在完全不同的环境中运行在完全不同的时间。*一旦 Javascript 设置 cookie 以启动另一个*PHP 脚本，您需要启动另一个对服务器的请求。使用 Javascript 重定向或查看 AJAX。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T03:37:49.737

PHP 在服务器端执行，JS 在客户端执行。在来自浏览器的单个 GET 请求中，PHP 将**始终**在 JS 之前执行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T03:43:36.277

这不能在单个请求中完成。PHP 首先运行，然后是 JavaScript。即使是增量加载也无济于事，因为 cookie 是通过标头发送的，并且在 PHP 运行时已经发送。

但是，您可以让 JavaScript 设置 cookie，然后在完成后使用`location.reload()`. 然后 PHP 只需要打印 JavaScript，如下所示：

```
<?php
if(!isset($_COOKIE["test"])) {
    ?>
    <script type="text/javascript">
        $(function() {
            // createCookie script
            createCookie("test", 1, 3600);
            // reload the page, which would send the cookie at the next request
            location.reload();
        });
    </script>
    <?php
    // stop execution and wait for JavaScript to call you again.
    exit;
}
?> 
```*

# java - 压缩方法在哈希表中会做什么？

> ID：12684175
> 
> 赞同：3
> 
> 时间：2012-10-02T03:33:42.833
> 
> 标签：java, data-structures, hashtable, hashcode

对于作业，我必须为通用哈希表编写代码。在示例 Put 方法中，有两行：

```
int hash = key.hashCode(); // get the hashcode of the key
int index = compress(hash); // compress it to an index 
```

我的理解是 hashCode 方法使用键来返回索引，并且您可以将键/值对放在该索引处的数组中。但是这里我们“压缩”哈希码来获取索引。这个方法有什么作用？它如何“压缩”哈希码？是否有必要和/或首选？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T03:36:57.710

哈希码可以是介于 -2 ^(31)和 2 ^(31) -1 之间的任何整数。那是大约 40 亿种不同的可能哈希码。例如，如果您有 40 个哈希表存储桶，则需要将这 40 亿个整数“压缩”到 0-39 范围内。

一种常见的方法是使用模运算符`%`。`a % b`返回除以 后的余`a`数`b`。例如，`7 % 3 == 1`。

```
int compress(int hash) {
    return hash % numBuckets;
} 
```

**注意：**并非所有语言都如此，但在 Java[中，结果的符号等于被除数的符号](http://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html#15.17.3)，这意味着我们上面的计算结果将始终为非负数。在 C 和 C++ 中，情况并非如此（符号由实现定义），因此需要特别注意正确处理负哈希值。

有关每种编程语言如何处理模数符号的详细信息，请参阅Wikipedia 上[各种编程语言中的整数模运算符。](http://en.wikipedia.org/wiki/Modulo_operation#Remainder_calculation_for_the_modulo_operation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T03:40:58.477

你也可以有负哈希码，而你想要的是一个大于或等于零的有效索引。compress 在应用模数运算符之前也会对哈希码进行 abs() 。

# ios - ios如何播放音频文件

> ID：12684176
> 
> 赞同：3
> 
> 时间：2012-10-02T03:33:46.853
> 
> 标签：ios, xcode, avfoundation, avaudioplayer

我正在尝试播放音频文件，但我可以让它工作。我导入了`AVFoundation`框架。

这是代码：

```
NSString *fileName = [[NSBundle mainBundle] pathForResource:@"Alarm" ofType:@"caf"];
    NSURL *url = [[NSURL alloc] initFileURLWithPath:fileName];
    NSLog(@"Test: %@ ", url);

    AVAudioPlayer *audioFile = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:NULL];
    audioFile.delegate = self;
    audioFile.volume = 1;

    [audioFile play]; 
```

我收到一个错误`nil string parameter`

我将文件复制到支持文件文件夹中，因此文件在那里。

你们能帮帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-12T15:55:05.643

只需遵循两个简单的步骤

步骤1：

UIViewController.h

```
#import <AudioToolbox/AudioToolbox.h>
#import <AVFoundation/AVFoundation.h>

@property(nonatomic, retain) AVAudioPlayer *player; 
```

第2步：

UIViewController.m

```
NSString *soundFilePath = [[NSBundle mainBundle] pathForResource:@"sound" 
                                                      ofType:@"m4a"];
NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];

 _player = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:NULL];
[_player setVolume:1.0];
[_player play]; 
```

只需确保 AVAudioPlayer 属性必须是非原子的并保留。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T03:48:31.973

当文件位于特定文件夹中时，我使用类似的东西：

```
// Build URL to the sound file we are going to play
NSURL *sound_file = [[NSURL alloc] initFileURLWithPath: [[NSBundle mainBundle] pathForResource:sound_file_name ofType:@"mp3" inDirectory:directory]];   

// Play it
audio_player = [[AVAudioPlayer alloc] initWithContentsOfURL:sound_file error:nil];
audio_player.delegate = self;
[audio_player play];
[sound_file release]; 
```

`sound_file_name`是不带扩展名的文件名：`@"success"`

`directory`是这样的：`@"media/sound_effects"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T03:48:43.267

添加这个并查看程序是否识别出该文件存在。

`NSLog(@"File Exists:%d",[[NSFileManager defaultManager] fileExistsAtPath:fileName]);`

如果存在，它将打印一个 1。如果不确定你有正确的文件名（大小写很重要）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-12T16:56:50.223

确保导入您的 audiotoolbox 框架，然后编写以下内容。这是我用来播放简单声音的

```
#import <AudioToolbox/AudioToolbox.h>

 CFBundleRef mainBundle = CFBundleGetMainBundle();
CFURLRef soundFileURLRef;
soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"Your sound here", CFSTR ("mp3"), NULL);

UInt32 soundID;
AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
AudioServicesPlaySystemSound(soundID); 
```

如果您对此有任何困惑，请告诉我。

# javascript - Javascript - EXTjs 访问数组值

> ID：12684177
> 
> 赞同：0
> 
> 时间：2012-10-02T03:33:54.000
> 
> 标签：javascript, arrays, extjs

同样，我对 Javascript 和 Extjs 还是很陌生。

代码：

```
 var test = [
        {
            id: 0,
            test: 'Hello'
        },
        {
            id: 1,
            test: 'World'
        }
    ]; 
```

如何获取每个实例的 ID？

谢谢回复。

问候， 罗内尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T03:35:38.617

你的意思是：

```
for(var i = 0; i < test.length; i++) {
  console.log( test[i].id);
} 
```

或者

```
console.log( test[0].id); //for first
console.log( test[1].id); //for second 
```

在 Extjs 中，你可以使用迭代器函数：

```
Ext.each(test, function(val, index) {
  console.log(val.id)
}); 
```

或者

```
Ext.pluck(test, 'id'); //returns [0, 1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T03:35:59.830

```
Ext.each(test, function(item) {
   console.log(item.id); 
}); 
```

# python - Numpy 中的快速图像坐标查找

> ID：12684182
> 
> 赞同：1
> 
> 时间：2012-10-02T03:34:50.910
> 
> 标签：python, numpy

我有一个充满坐标的大 numpy 数组（大约 400 个）：

```
[[102, 234],
 [304, 104],
  ....
] 
```

还有一个大小为 800x800 的 numpy 二维数组 my_map。

查找该数组中给出的坐标的最快方法是什么？我尝试了像这篇文章中描述的调色板：http://opencvpython.blogspot.com/2012/06/fast-array-manipulation-in-numpy.html[但](http://opencvpython.blogspot.com/2012/06/fast-array-manipulation-in-numpy.html)无法让它工作。

我还在考虑将每个坐标转换为地图的线性索引，然后将其直接通过管道传输到 my_map 中，如下所示：

```
my_map[linearized_coords] 
```

但我无法矢量化以将坐标正确转换为线性方式。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T03:41:38.233

尝试使用`tuple`索引：

```
my_map[tuple(coords.T)] 
```

[*这通过高级索引*](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#advanced-indexing)选择数组元素。

# java - Spring MVC @RequestMapping 注解的大小写不敏感映射

> ID：12684183
> 
> 赞同：17
> 
> 时间：2012-10-02T03:35:01.440
> 
> 标签：java, web-applications, spring-mvc

> **可能重复：**
> [如何在带有注释映射的 Spring MVC 中使用不区分大小写的 URL](https://stackoverflow.com/questions/4150039/how-can-i-have-case-insensitive-urls-in-spring-mvc-with-annotated-mappings)

我的控制器中有多个 @RequestMapping 注释。

```
@Controller
public class SignUpController {

 @RequestMapping("signup")
 public String showSignUp() throws Exception {
    return "somejsp";
 }

 @RequestMapping("fullSignup")
 public String showFullSignUp() throws Exception {
    return "anotherjsp";
 }

 @RequestMapping("signup/createAccount")
 public String createAccount() throws Exception {
    return "anyjsp";
 }
} 
```

如何将这些 @RequestMapping 映射为不区分大小写。即，如果我使用“/fullsignup”或“/fullSignup”，我应该得到“anotherjsp”。但这不是现在发生的。只有“/fullSignup”工作正常。

我试过扩展 RequestMappingHandlerMapping 但没有成功。我也尝试过 AntPathMatcher，就像那个人提到的，这个论坛上有另一个问题，但它也不适用于 @RequestMapping 注释。

调试控制台 ![在此处输入图像描述](../Images/0c3fbba013dff47266d4b2fc78aae45c.png)

服务器启动时输出控制台。

![在此处输入图像描述](../Images/06f79d3b9ab82c5423c904a7cf5407ad.png)

我添加了两张显示问题的图像。我已经尝试了下面提到的两种解决方案。控制台说它映射了小写的 URL，但是当我请求访问具有小写 URL 的方法时，它显示存储值的原始映射仍然包含 MixCase URL。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T19:44:00.387

[How can I have case insensitive URLS in Spring MVC with annotated mappings](https://stackoverflow.com/questions/4150039/how-can-i-have-case-insensitive-urls-in-spring-mvc-with-annotated-mappings)中的一种方法效果很好。我只是在控制器和请求方法级别使用@RequestMapping 组合尝试了它，它工作得很好，我只是在这里为 Spring 3.1.2 复制它：

CaseInsensitivePathMatcher：

```
import java.util.Map;

import org.springframework.util.AntPathMatcher;

public class CaseInsensitivePathMatcher extends AntPathMatcher {
    @Override
    protected boolean doMatch(String pattern, String path, boolean fullMatch, Map<String, String> uriTemplateVariables) {
        return super.doMatch(pattern.toLowerCase(), path.toLowerCase(), fullMatch, uriTemplateVariables);
    }
} 
```

使用 Spring MVC 注册此路径匹配器，删除`<mvc:annotation-driven/>`注释，并替换为以下内容，适当配置：

```
<bean name="handlerAdapter" class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter">
    <property name="webBindingInitializer">
        <bean class="org.springframework.web.bind.support.ConfigurableWebBindingInitializer">
            <property name="conversionService" ref="conversionService"></property>
            <property name="validator">
                <bean class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean">
                    <property name="providerClass" value="org.hibernate.validator.HibernateValidator"></property>
                </bean>
            </property>
        </bean>
    </property>
    <property name="messageConverters">
        <list>
            <ref bean="byteArrayConverter"/>
            <ref bean="jaxbConverter"/>
            <ref bean="jsonConverter"/>
            <bean class="org.springframework.http.converter.StringHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.ResourceHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.xml.SourceHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.xml.XmlAwareFormHttpMessageConverter"></bean>
        </list>
    </property>
</bean>
<bean name="byteArrayConverter" class="org.springframework.http.converter.ByteArrayHttpMessageConverter"></bean>
<bean name="jaxbConverter" class="org.springframework.http.converter.xml.Jaxb2RootElementHttpMessageConverter"></bean>
<bean name="jsonConverter" class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter"></bean>
<bean name="caseInsensitivePathMatcher" class="org.bk.lmt.web.spring.CaseInsensitivePathMatcher"/>
<bean name="handlerMapping" class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping">
    <property name="pathMatcher" ref="caseInsensitivePathMatcher"></property>
</bean> 
```

或者使用@Configuration 更轻松、更干净：

```
@Configuration
@ComponentScan(basePackages="org.bk.webtestuuid")
public class WebConfiguration extends WebMvcConfigurationSupport{

    @Bean
    public PathMatcher pathMatcher(){
        return new CaseInsensitivePathMatcher();
    }
    @Bean
    public RequestMappingHandlerMapping requestMappingHandlerMapping() {
        RequestMappingHandlerMapping handlerMapping = new RequestMappingHandlerMapping();
        handlerMapping.setOrder(0);
        handlerMapping.setInterceptors(getInterceptors());
        handlerMapping.setPathMatcher(pathMatcher());
        return handlerMapping;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T17:28:51.410

以下简单的解决方案应该使 @RequestMapping 不敏感，无论它是注释控制器还是方法。Biju 的解决方案也应该有效。

创建此自定义 HandlerMapping ：

```
public CaseInsensitiveAnnotationHandlerMapping extends DefaultAnnotationHandlerMapping {

    @Override
    protected Object lookupHandler(String urlPath, HttpServletRequest request)
                    throws Exception {

        return super.lookupHandler(urlPath.toLowerCase(), request);
    }

    @Override
    protected void registerHandler(String urlPath, Object handler)
                    throws BeansException, IllegalStateException {

        super.registerHandler(urlPath.toLowerCase(), handler);
    }

} 
```

并将其添加到您的 *[servlet-name]* -servlet.xml 中：

```
<bean class="yourpackage.CaseInsensitiveAnnotationHandlerMapping" /> 
```

注意：如果您不希望在您的应用程序中有两个 HandlerMapping，您可能需要删除`<mvc:annotation-driven />`（它实例化 a `DefaultAnnotationHandlerMapping`）。

# regex - 如何在perl中的关键字之前或之后搜索字母数字单词？

> ID：12684184
> 
> 赞同：0
> 
> 时间：2012-10-02T03:35:03.437
> 
> 标签：regex, perl

我的句子如下例所示：

```
$sen1 = "The quick brown fox jump KEYWORD over123 the3 lazy dog, fox is quick";

$sen2 = "The quick brown fox jump123 KEYWORD over the lazy dog, fox is quick"; 
```

我想使用关键字“KEYWORD”作为我的搜索字符串，以使用 Perl 正则表达式在搜索字符串之前和之后提取字母数字单词。

样本输出：

**超过123**

**跳转123**

注意：“the3”这个词被省略了，因为我只在“KEYWORD”之前或之后搜索字母数字词。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:00:15.897

鉴于您的关键字仅在字符串中出现一次，您可以使用以下命令：

```
my $string = 'The quick brown fox jumps123 KEYWORD over the lazy dog';

my ( $w_before, $w_after ) = $string =~ m/(\w+)\s*KEYWORD\s*(\w+)/;
# $w_before == jumps123
# $w_after == over 
```

我假设，当您说字母数字时，您的意思是它是字母或数字或两者的组合。在这种情况下，`\w`可以这样做。我还放`\s*`了以防万一关键字和前后单词之间有空格。

使用我写的，它可以捕获单词“blah”和“foo”：

```
blahKEYWORDfoo
blah KEYWORD foo
blahKEYWORD foo
blah KEYWORDfoo
blah          KEYWORD      foo 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T04:11:53.857

您可以使用命名的捕获方法，这样如果只存在一种情况，您就不需要检查 $1 或 $2。`(?<before>[\w\d]+)?\s*KEYWORD\s*(?<after>[\w\d]+)?`

```
my $str = <<DAT;
The quick brown fox jump KEYWORD over123 the3 lazy dog, fox is quick
The quick brown fox jump123 KEYWORD over the lazy dog, fox is quick
The quick brown fox jump123 KEYWORD over123 the lazy dog, fox is quick
The quick brown fox jump123KEYWORDover123 the lazy dog, fox is quick
DAT

foreach (split(/\n/,$str)){
    if(/(?<before>[\w]+)?\s*KEYWORD\s*(?<after>[\w]+)?/){
        print $+{before} . "-" . $+{after} . "\n";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T03:58:11.400

假设您对任何一个目标都没有更严格的要求，但它至少由单词或数字之一组成，例如

```
([\w\d]+)\s+KEYWORD\s+([\w\d]+) 
```

在这两种情况下都应该这样做；这会给你1美元之前的单词，2美元之后的单词。

# javascript - 使用 Ajax 提交表单

> ID：12684190
> 
> 赞同：1
> 
> 时间：2012-10-02T03:35:44.827
> 
> 标签：javascript, jquery, html, ajax

所以我完全不知道如何使用 Ajax 提交表单。我对 Javascript 还很陌生，希望我不会太过分了。

当我在我的表单上单击提交时，我的页面上没有任何反应，而不是在我应该存储信息的 SQL 数据库中（也仔细检查了流程表单）。

如果有人愿意提供帮助，这是代码：

**Javascript：**

```
$(document).ready(function() {
    $('#form').submit(function() {
        $.ajax({
            url: "../process.php",
            type: "post",
            data: $(this).serialize()
        });
    });
}); 
```

**HTML：**

```
<form name="contact" method="post" action="" id="form">

    <span id="input">
        <input  type="text" name="first" maxlength="50" size="30" title="First Name" class="textbox">
        <input  type="text" name="last" maxlength="80" size="30" title="Last Name" class="textbox">
        <input  type="text" name="email" maxlength="80" size="30" title="Email" class="textbox">
        <textarea  name="request" maxlength="1000" cols="25" rows="6" title="Request"></textarea>
    </span>

    <input type="submit" value="Submit" class="submit">   

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:38:34.010

```
$('#form').submit(function(e) {
    e.preventDefault(); //prevents the page from refreshing
    var $this = $(this); // cache $(this) for later use
    $.ajax({
        url: "../process.php",
        type: "post",
        data: $this.serialize()
    });
}); 
```

也可能与`dataType`物业有关。或者其他各种东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T06:03:32.403

我使用输入类型按钮而不是提交按钮。当用户使用单击事件单击按钮时，我验证表单字段。当验证通过时，然后调用 ajax。

像这样的东西，

```
 <input type="button" value="Submit" class="submit">   

jQuery(function(){
jQuery('.submit').click(function(){
    if(validatemyform()){
    //call ajax here
}
});
}); 
```

# c++ - 使用 C++ 11 在二叉（或任意）树上实现迭代器

> ID：12684191
> 
> 赞同：10
> 
> 时间：2012-10-02T03:35:58.760
> 
> 标签：c++, tree, iterator

我想在二叉树上创建一个迭代器，以便能够使用基于范围的 for 循环。我知道我应该先实现 begin() 和 end() 函数。

开始应该可能指向根。然而，根据规范，end() 函数返回“最后一个有效元素之后的元素”。那是哪个元素（节点）？指向一些“无效”的地方不是违法的吗？

另一件事是运算符++。在树中返回“下一个”元素的最佳方法是什么？我只需要一些建议来开始这个编程。

* * *

我想扩展/增加我的问题*。如果我想遍历具有任意数量的树怎么办？让每个节点都有一个子节点向量，并让 begin() 指向“真正的”根。我可能必须在迭代器类中实现一个队列（对于广度优先）来将 unique_ptr 存储到节点，对吧？然后，当队列为空时，我会知道我已经通过了所有节点，因此应该在调用 oprator++() 时返回 TreeIterator(nullptr)。是否有意义？我希望它尽可能简单并且只向前迭代。

*或者我应该创建一个新线程？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-02T03:50:38.850

您`begin()`应该指向的位置几乎取决于您要遍历树的顺序。使用根可能是明智的，例如，对于树的广度优先遍历。`end()`并不真正位于树节点上：访问此位置并指示已到达序列的末尾。它是否指示与树相关的任何内容在某种程度上取决于您要支持哪种迭代：当仅支持前向迭代时，它只能指示结束。当还支持双向迭代时，它需要知道如何在结束之前找到节点。

无论如何，所指向的地方并没有真正被访问，您需要一个合适的指标。对于前向迭代，只有迭代器`end()`可以只返回一个指向 null 的迭代器，当您从最后一个节点继续前进时，您只需将迭代器的指针也设置为 null：比较两个指针的相等性会产生`true`，表明您已经到达终点。当想要支持双向迭代时，您需要某种链接记录，可用于导航到前一个节点但不需要存储值。

有序的关联容器（`std::map<K, V>`、`std:set<V>`等）在内部实现为某种树（例如，红/黑树）。`begin()`迭代器从最左边的节点开始，迭代`end()`器指向最右边节点之后的位置。`operator++()`只是找到当前右侧的下一个节点：

*   如果迭代器位于没有右子节点的节点上，它将沿着父节点链遍历，直到找到父节点通过树的左分支到达其子节点
*   如果它位于具有右子节点的节点上，它会走到该子节点，然后沿着该子节点的左子节点序列（如果有的话）找到右子树中最左边的子节点。

显然，如果你不是从左到右走你的树，而是从上到下，你将需要一个不同的算法。对我来说最简单的方法是在一张纸上画一棵树，看看如何到达下一个节点。

如果您没有使用自己的迭代器实现数据结构，我建议您尝试使用简单的顺序数据结构，例如列表：如何到达下一个节点以及何时到达终点非常明显。一旦明确了一般的迭代原则，创建树只是获得正确导航的问题。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-02T04:53:23.547

查看 RBTree 的 SGI 实现（这是`std::set`/ `std::map`... 容器的基础）。

[http://www.sgi.com/tech/stl/stl_tree.h](http://www.sgi.com/tech/stl/stl_tree.h)

你会看到 begin() 是最左边的节点。

您将看到 end() 是一个特殊的“空”节点**标头**，它是超级根 - 我的意思是真正的根（仅当树不为空时才预设）是它的子节点。

`operator ++`就是去右孩子，然后找到这个孩子最左边的节点。如果这样的孩子不存在 - 我们去最右边父节点的左父节点。如本例所示（红线是跳过移动，蓝线结束是给定的迭代步骤）：

![在此处输入图像描述](../Images/fbe363166012333564739921889c2333.png)

从 SGI 复制的代码：

```
 void _M_increment()
  {
    if (_M_node->_M_right != 0) {
      _M_node = _M_node->_M_right;
      while (_M_node->_M_left != 0)
        _M_node = _M_node->_M_left;
    }
    else {
      _Base_ptr __y = _M_node->_M_parent;
      while (_M_node == __y->_M_right) {
        _M_node = __y;
        __y = __y->_M_parent;
      }
      if (_M_node->_M_right != __y)
        _M_node = __y;
    }
  } 
```

当一棵树为空时 -`begin()`是 header 的最左边 - 所以它是 header 本身 -`end()`也是 header - 所以`begin() == end()`。请记住 - 您的迭代方案必须与`begin() == end()`空树的条件相匹配。

这似乎是一个非常聪明的迭代方案。

当然，您可以定义自己的方案 - 但吸取的教训是要有专门的节点`end()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T03:45:08.970

树的迭代器不仅仅是一个指针，尽管它可能包含一个指针：

```
struct TreeIterator {
  TreeIterator(TreeNode *node_ptr) : node_ptr(node_ptr) { }
  TreeIterator &operator++();
  TreeIterator operator++(int);
  bool operator==(const TreeIterator &) const;

  private:
    TreeNode *node_ptr;
};

TreeIterator begin(const Tree &tree) { ... }
TreeIterator end(const Tree &tree) { ... } 
```

你可以让你的 end() 函数返回一些特殊的东西，比如`TreeIterator(nullptr)`

您的开始迭代器指向的内容取决于您想要的遍历类型。如果您正在进行广度优先遍历，那么从根开始是有意义的。

# objective-c - Xcode 4.5 黑屏或异常：“一个视图一次只能与一个视图控制器关联！”

> ID：12684197
> 
> 赞同：2
> 
> 时间：2012-10-02T03:37:05.013
> 
> 标签：objective-c, xcode, cocos2d-iphone

在升级到 Xcode 4.5 之前，我有一个在 Xcode 4.0 中运行良好的现有 iPhone 应用程序。升级后，现在我在 iPhone/iPad 4.3 模拟器中运行时出现黑屏，并在运行 iPhone/iPad 6.0 模拟器时出现以下异常。

```
Terminating app due to uncaught exception 'UIViewControllerHierarchyInconsistency', reason: 'A view can only be associated with at most one view controller at a time! View <CCGLView: 0x8c7f380; frame = (0 0; 320 480); layer = <CAEAGLLayer: 0x8c7f670>> is associated with <CCDirectorDisplayLink = 0x994c7f0 | Size: 320 x 480, view = <CCGLView: 0x8c7f380; frame = (0 0; 320 480); layer = <CAEAGLLayer: 0x8c7f670>>>. Clear this association before associating this view with <RootViewController: 0x8c7ef00>.' 
```

该应用程序使用 Cocos2D 2.0，基于网上找到的教程非常简单。没有 XIB 文件。一切都以编程方式完成。

这些是导致 6.0 模拟器中异常的行（来自 IOS6TestAppDelegate.m）：

```
viewController = [[RootViewController alloc] initWithNibName:nil bundle:nil];
[enter link description here][1]viewController.wantsFullScreenLayout = YES; 
```

如果这些行被注释掉，那么 6.0 模拟器也会显示黑屏，而不是常规的菜单屏幕。

我在网上搜索了这方面的解决方案并尝试了很多方法，但一直无法取得进展。我对 iPhone 编程相当陌生（虽然对一般编程并不陌生），而且我真的在为此苦苦挣扎。我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T04:18:19.773

一、删除

```
viewController = [[RootViewController alloc] initWithNibName:nil bundle:nil];
viewController.wantsFullScreenLayout = YES; 
```

然后更换

```
[window setRootViewController:viewController]; 
```

和

```
if( ! [director enableRetinaDisplay:YES] )
    CCLOG(@"Retina Display Not supported");

// Create a Navigation Controller with the Director
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:director];
navController.navigationBarHidden = YES;
NSString *reqSysVer = @"6.0";
NSString *currSysVer = [[UIDevice currentDevice] systemVersion];
if ([currSysVer compare:reqSysVer options:NSNumericSearch] != NSOrderedAscending)
{
    [window setRootViewController:navController];
} else
{
    [window addSubview: navController.view];
} 
```

应该这样做！

# view - Zend 框架 2 中的自定义视图助手错误

> ID：12684201
> 
> 赞同：0
> 
> 时间：2012-10-02T03:37:44.793
> 
> 标签：view, helper, zend-framework2, custom-view

我似乎无法在 zend Framework 2.02 中注册自定义视图助手我尝试了此处发布的所有解决方案以及我认为应该做的任何事情，但我不断收到此错误：

> 致命错误：第 177 行的 C:\wamp\vhosts\projectName\vendor\zendframework\zendframework\library\Zend\ServiceManager\AbstractPluginManager.php 中找不到类 'ModuleName\view\Helper\mylinkhelper'

这是我的 module.config.php 的样子：

```
return array{
      'controllers'=>array(

           ....
       ),
      'view_manager' => array(
          'template_path_stack' => array(
             'ModuleName' => __DIR__ . '/../view',
           ),    
   ),
   'view_helpers' => array(  
            'invokables' => array(  
                 'mylink' => 'ModuleName\view\Helper\mylinkhelper',   
             ),  
       ),
}; 
```

在我的视图文件中，我有：

```
echo $this->mylink($someparameter); 
```

我很感激对此的任何反馈。我真的不知道在这里还能做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T02:10:12.223

问题是**没有加载类文件**。它应该包含在 autoload_classmap.php 中。

```
<?php
return array(
    '{module}\View\Helper\{helper}' => __DIR__ . '\View\Helper\{helper}.php',
);
?> 
```

我遇到了同样的问题，这个页面帮助了我。

由于我是 ZF 的新手，我不知道是否有另一种方法可以在 autoload_classmap 中添加路径，我想可能有，但我只是手动编辑了文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:28:20.757

```
<?php
// ./module/Application/src/Application/View/Helper/AbsoluteUrl.php
namespace Application\View\Helper;

use Zend\Http\Request;
use Zend\View\Helper\AbstractHelper;

class AbsoluteUrl extends AbstractHelper
{
    protected $request;

    public function __construct(Request $request)
    {
        $this->request = $request;
    }

    public function __invoke()
    {
        return $this->request->getUri()->normalize();
    }
} 
```

你会注意到这个特殊的助手有一个依赖——一个 Zend\Http\Request 对象。为了注入这个，我们需要为我们的视图助手设置一个带有初始化逻辑的工厂：

```
 <?php
    // ./module/Application/Module.php
    namespace Application;

    use Application\View\Helper\AbsoluteUrl;

    class Module
    {
        public function getViewHelperConfig()
        {
            return array(
                'factories' => array(
                    // the array key here is the name you will call the view helper by in your view scripts
                    'absoluteUrl' => function($sm) {
                        $locator = $sm->getServiceLocator(); // $sm is the view helper manager, so we need to fetch the main service manager
                        return new AbsoluteUrl($locator->get('Request'));
                    },
                ),
            );
        }

     // If copy/pasting this example, you'll also need the getAutoloaderConfig() method; I've omitted it for the sake of brevity.
} 
```

而已！现在您可以在视图脚本中调用您的助手：

当前页面的完整 URL 是：`<?php echo $this->absoluteUrl(); ?>`

感谢 evan 创建本[教程](http://blog.evan.pro/creating-a-simple-view-helper-in-zend-framework-2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T09:00:12.950

看起来 View Helper 已正确添加到，`ServiceManager`因为调用`mylink()`正在尝试创建`ModuleName\view\Helper\mylinkhelper`.

我会确保可以`new College\view\Helper\mylinkhelper();`从控制器创建该类，这可能会引发一些线索。还要检查文件名和类名是否正确。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T13:11:21.810

您的方法是正确的，但可能有两件事会导致您遇到这种麻烦：

1.  您谈论的是顶级名称空间`ModuleName`，但在您的示例配置中，您拥有顶级名称空间`College`。当您有`ModuleName`命名空间并尝试加载`College`时，这显然不起作用

2.  您的视图助手无法自动加载。您确定类名正确 ( `MyLinkHelper`)、命名空间正确 ( `College\View\Helper`，另见上文) 以及文件名正确 ( `MyLinkHelper.php`)。你是否在你的模块类中为这个模块启用了类名自动加载？

第三种选择可能是小写的“view”和“mylinkhelper”，就像你通常`College\View\Helper\MyLinkHelper`用大写的 V、M、L 和 H 写的那样。但既然你在 Windows 上，那应该没关系。我知道对于 Linux，您必须注意类名的大小写敏感性。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-05T18:05:37.283

遇到同样的问题，我自己发现没有包含查看帮助文件。在将其放入控制器进行测试时，它可以工作

例如：`require_once('module/Pages/view/Helper/RenderNav.php');`

为什么它没有被自动加载？

# jquery-mobile - Knockout.js 和 jQuery Mobile – 按天分组数组并为每一天设置一个列表分隔符

> ID：12684207
> 
> 赞同：0
> 
> 时间：2012-10-02T03:39:01.997
> 
> 标签：jquery-mobile, knockout.js, knockout-mvc

我正在开发一个使用 knockout.js 和 jQuery Mobile 的项目。我有一个可观察的可观察属性数组。这个可观察的数组通过对服务器的 AJAX 调用（Web API）填充了 JSON 数据。

```
// ViewModel
my.vm = function () {
    var
    alarms = ko.observableArray([]),
    loadAlarmsCallback = function (json) {
        $.each(json.Alarms, function (i, p) {
            alarms.push(new my.Alarm()
                .AlarmID(p.AlarmID)
                .StartTime(my.utilities.formatDate(p.StartTime))
                .EndTime(my.utilities.formatDate(p.EndTime))
                .TimeAcknowledged(my.utilities.formatDate(p.TimeAcknowledged))
                .AcknowledgedBy(p.AcknowledgedBy)
                .AlarmType(p.AlarmType)
                .AlarmCategory(p.AlarmCategory)
                .AlarmPriority(p.AlarmPriority)
                .Message(p.Message));
        }),
    loadAlarms = function () {
        my.dataService.getAllAlarms(my.vm.loadAlarmsCallback);
    },
    ...;
    return {
        alarms: alarms,
        loadAlarmsCallback: loadAlarmsCallback,
        loadAlarms: loadAlarms,
        ...
    };
}();

my.vm.loadAlarms();
ko.applyBindings(my.vm); 
```

如您所见，视图模型中数组中的每一行都有一个 StartTime，它实际上是一个日期和时间，它被格式化为 MM/dd/yyyy HH:mm。

在我看来（启用 jQuery Mobile 的 .cshtml 文件），我在 ul/li 标签上为数组提供了一个 foreach 绑定。

```
<ul data-bind="foreach: alarms" data-role="listview" data-inset="true" data-theme="c">
    <!-- NEED ONLY ONE list-divider PER DAY -->
    <li data-role="list-divider"><span data-bind="text: StartTime"></span></li>
    <!-- NEED MULTIPLE li TAGS FOR EACH ALARM ON THAT DAY -->
    <li>
        <p><span data-bind="text: AlarmCategory"></span></p>
        ...
    </li>
</ul> 
```

我需要的是每天只显示一个列表分隔线行，并将当天所有单独的警报行分组在该列表分隔线行下。当一天发生变化时（基于视图模型的可观察数组中的 StartTime 值），将创建一个新的列表分隔行并在其下方显示当天的警报。

无论如何，我该如何编码这个场景？有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T04:38:03.690

一种方法是创建一个计算的 observable `alertsPerDay`，它构建一个数组，其中每个元素对应一天。该元素的值是一个包含日期的对象（因为您想在视图中显示它）和属于该日期的嵌套警报数组。然后在 HTML 中，您可以嵌套`foreach`每天的警报。构建起来并不简单，但也不是太复杂。

这是一个如何做到这一点的简单示例：http: [//jsfiddle.net/antishok/KXhem/49/](http://jsfiddle.net/antishok/KXhem/49/)

主要思想是您可以以最适合您的视图的方式表示您的数据，然后 KO 绑定本身是微不足道的。

# android - 在另一个活动中按下后退按钮后如何返回主屏幕

> ID：12684208
> 
> 赞同：0
> 
> 时间：2012-10-02T03:39:15.667
> 
> 标签：android, android-intent

就我而言，我正在开发一个可以调用系统应用程序的应用程序，例如内部短信应用程序等。我想要做的是我想回到主屏幕而不是我的应用程序或以前在 SMS 应用程序启动后按下后退按钮时调用的以前的系统应用程序，这意味着我想关闭所有以前的活动或任何在我调用下一个系统应用程序之前的意图活动。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T03:52:29.380

我认为您不能覆盖任何其他应用程序（如系统应用程序）的后退按钮行为。

并显示主屏幕，

```
Intent startMain = new Intent(Intent.ACTION_MAIN);
startMain.addCategory(Intent.CATEGORY_HOME);
startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(startMain); 
```

祝你好运 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T03:43:38.927

您可以在转到其他活动之前调用**完成（）并将标志设置为清除顶部。**

```
Intent sendIntent = new Intent();
sendIntent.setAction(Intent.ACTION_SEND);
sendIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
sendIntent.putExtra(Intent.EXTRA_TEXT, "This is my text to send.");
sendIntent.setType("text/plain");
startActivity(Intent.createChooser(sendIntent, "Share Text To..."));
finish(); 
```

# c# - 根据C#中的日期过滤来自Xml的数据

> ID：12684213
> 
> 赞同：3
> 
> 时间：2012-10-02T03:40:30.173
> 
> 标签：c#, xml, linq, xml-parsing

我需要根据日期过滤xml文件的帮助，我拥有的这部分代码仅根据用户名和地点打印出所有平均信息

```
 Runner run = new Runner();
       string filePath = "runners.xml"; //path
        XDocument xDoc = XDocument.Load(filePath);
        string userSelect = name;

        var averageAddDistancequery = xDoc.Descendants("User").Where(w => (string)w.Element("Name") == user).Select(s => new
        {
            add = s.Elements("Attempts").Where(w => (string)w.Element("Place").Value == "Paris").Select(t => t.Element("Distance").Value)
        }).ToList();

        if (averageAddDistancequery[0].add.Count() > 0) 
        {
            var aa = averageAddDistancequery[0].add.Average(a => float.Parse(a));
            run.averageDistance = aa.ToString();        
        }
        else
        {
           // nothing
        }

        var averageAdd2Distancequery = xDoc.Descendants("User").Where(w => (string)w.Element("Name") == userSelector).Select(s => new
        {
            add = s.Elements("Attempts").Where(w => (string)w.Element("Place").Value == "Madrid").Select(t => t.Element("Distance").Value)
        }).ToList();

        if (averageAdd2Distancequery[0].add.Count() > 0)
        {
            var aa = averageAdd2DistanceSubquery[0].add.Average(a => float.Parse(a));
            run.averageDistance2 = aa.ToString();
        }
        else
        {
           // nothing
        }

        xmlDoc.DocumentElement.SetAttribute("searching", user);
        XmlNodeList tests = xmlDoc.SelectNodes("//User[Name =/*/@searching]/Attempts");
        listBox1.Items.Clear();
        listBox1.Items.Add("Runners Name: " + user);
        listBox1.Items.Add("Overall  Distance in Paris: " + run.averageAdd);
        listBox1.Items.Add("Overall Distance in Madrid: " + run.averageSub); 
```

例如，如果我的 xml 文件看起来像这样

```
 Users>
    <User>
     <Name>David</Name>
      <Attempts>
       <Place>Paris</Place>
       <Date>3/29/2012</Date>
       <Distance>100</Distance>
     </Attempts>
     <Attempts>
      <Place>Madrid</Place>
      <Date>7/28/2012</Date>
      <Distance>100</Distance>
     </Attempts>
     <Attempts>
      <Place>Paris</Place>
      <Date>8/19/2012</Date>
      <Distance>60</Distance>
     </Attempts>
     <Attempts>
      <Place>Madrid</Place>
      <Date>9/29/2012</Date>
      <Distance>200</Distance>
    </Attempts>  
   </User>
   <User>
    <Name>Lenny</Name>
     <Attempts>
      <Place>Paris</Place>
      <Date>9/29/2012</Date>
      <Distance>130</Distance>
     </Attempts>
  </User>
 </Users> 
```

如果我为大卫运行代码，它将打印出类似这样的内容

用户：大卫

巴黎的平均距离：//数据

马德里的平均距离：//数据

这不是我想要的，我想要的是从文本框中选择任意两个日期并仅显示这两个日期之间的信息例如，如果我选择大卫，从 2012 年 3 月 29 日到 2012 年 8 月 29 日

我想要并输出如下内容：

用户：大卫

从 2012 年 3 月 29 日到 2012 年 8 月 29 日在巴黎的平均距离：//数据

从 2012 年 3 月 29 日到 2012 年 8 月 29 日，马德里的平均距离：//数据

我已经尝试了几个小时，我需要帮助来实现这个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:46:17.817

您可以使用 Linq to Xml 做您需要的事情：

```
XElement x = XElement.Load("In.xml");
IFormatProvider f = new System.Globalization.CultureInfo("en-US");

DateTime bdate = DateTime.Parse("3/29/2012", f);
DateTime edate = DateTime.Parse("8/29/2012", f);
string username = "David";

var info = x.Elements("User")
            .Where(u => u.Element("Name").Value == username)
            .Select(u => new
{
  Name = u.Element("Name").Value,                   //user name
  AverageAttempts = u.Elements("Attempts")          //select user's attempts 
                     .Where(a =>                    //filter by dates
                     {
                        DateTime d = DateTime.Parse(a.Element("Date").Value, f);
                        return d >= bdate && d <= edate;
                     })
                     .GroupBy(a => a.Element("Place").Value) //group by place
                     .Select(g => new         // create summary info by place
                     {
                        Place = g.Key,              //place
                        BeginDate = g.Elements("Date") 
                                     .Select(d => DateTime.Parse(d.Value, f))
                                     .Min(),   //min date, i.e. first attempt
                        EndDate = g.Elements("Date")   
                                   .Select(d => DateTime.Parse(d.Value, f))
                                   .Max(),   //max date, i.e. last attempt
                        Distance = g.Elements("Distance")//average distance
                                    .Average(d => decimal.Parse(d.Value))
                     })
})
.FirstOrDefault();

if(info!=null)
{
   Console.WriteLine(info.Name);
   foreach (var aa in info.AverageAttempts)
   {
       Console.WriteLine(string.Format("{0} [{1} - {2}]:\t{3}",
                                       aa.Place,
                                       aa.BeginDate,
                                       aa.EndDate,
                                       aa.Distance));
   }
} 
```

输出不包含用于过滤的日期，而是用户尝试的实际最小和最大日期。

当然，此代码不包含对文件中是否存在所有必要的 xml 标记或值是否为有效日期和小数的任何有效性检查……您可以根据特定需要对其进行修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T05:00:25.067

使用 LINQ to XML，假设您从 TextBox 中选择了两个日期：

```
var userElement = xDox.Descendants("User")
                .SingleOrDefault(u => u.Element("Name").Value == "David");

if (userElement != null)
{
    var result = userElement.Descendants("Attempts")
        .Select(a => new
            {
                Place = a.Element("Place").Value,
                Date = DateTime.Parse(a.Element("Date").Value),
                Distance = int.Parse(a.Element("Distance").Value)
            })

        .Where(a => a.Date >= DateTime.Parse("3/29/2012")
                    && a.Date <= DateTime.Parse("8/29/2012"))

        .GroupBy(a => a.Place)
        .Select(g => new {Place = g.Key, Avg = g.Average(x => x.Distance)});
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T06:33:21.357

您可以使用这个[Xml 库](https://github.com/ChuckSavage/XmlLib/)来读取日期并按日期排序。

```
XElement root = XElement.Load(file);
XElement david = root.XPathElement("//User[Name={0}]", "David");
XElement[] attempts = david
         .XPath("Attempts[Date>={0} and Date<={1}]",
                new DateTime(2012, 3, 29), new DateTime(2012, 8, 29))
         .ToArray(); 
```

# java - Android 中 Canny 边缘检测器的快速自适应阈值

> ID：12684214
> 
> 赞同：5
> 
> 时间：2012-10-02T03:40:33.180
> 
> 标签：java, android, image-processing, opencv, image-recognition

根据我的研究，Canny Edge Detector 对于检测图像的边缘非常有用。经过我的努力，我发现OpenCV函数可以做到这一点，即

```
 Imgproc.Canny(Mat image, Mat edges, double threshold1, double threshold2) 
```

但是对于低阈值和高阈值，我知道不同的图像有不同的阈值，请问有没有快速自适应阈值的方法可以根据不同的图像自动分配低阈值和高阈值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T00:10:09.260

这相对容易做到。查看有关该主题的较早的[SO 帖子](https://stackoverflow.com/questions/4292249/automatic-calculation-of-low-and-high-thresholds-for-the-canny-operation-in-open)。

一种快速的方法是计算当前图像的均值和标准偏差，并将 +/- 一个标准偏差应用于图像。

C++ 中的示例类似于：

```
Mat img = ...;
Scalar mu, sigma;
meanStdDev(img, mu, sigma);

Mat edges;
Canny(img, edges, mu.val[0] - sigma.val[0], mu.val[0] + sigma.val[0]); 
```

另一种方法是计算图像的中值，并以高于和低于中值的比率为目标（例如`0.66*medianValue`和`1.33*medianValue`）。

希望有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T09:30:15.633

Opencv 有一个自适应阈值函数。使用 OpenCV4Android 是这样的：

```
Imgproc.adaptiveThreshold(src, dst, maxValue, adaptiveMethod, thresholdType, blockSize, C); 
```

一个例子：

```
Imgproc.adaptiveThreshold(mInput, mInput, 255, Imgproc.ADAPTIVE_THRESH_MEAN_C, Imgproc.THRESH_BINARY_INV, 15, 4); 
```

至于如何选择参数，您必须阅读文档以获取更多详细信息。为每个图像选择正确的阈值是一个完全不同的问题。

# asp.net - 如何使用 ASP.NET 读取和写入 Amazon ElasticCache

> ID：12684219
> 
> 赞同：3
> 
> 时间：2012-10-02T03:41:36.290
> 
> 标签：asp.net, amazon-web-services, amazon-elasticache

我很想知道哪些命令允许我使用 ASP.NET 开发工具包向 Amazon ElasticCache 写入和读取数据。我查看了在线文档，但无法弄清楚它是如何完成的。

我在代码中所做的：我在 web.config 中创建了密钥来存储 Id 和 Access 密码。

```
AmazonElastiCacheClient client = new AmazonElastiCacheClient(ElasticCache_Id, ElasticCache_Pass); 
```

初始化 AmazonElasticCacheClient 对象并传递凭证字符串。

我需要一个示例代码来演示如何放置数据以及如何从 ElasticCache 集群中检索数据。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T05:12:09.187

看起来您只能通过 AWS 开发工具包管理弹性缓存集群。

您可以使用任何 memcached 客户端来读取和写入 elasticcache，因为这是底层技术。

这是一个例子： http: [//geekswithblogs.net/shaunxu/archive/2010/04/07/first-round-playing-with-memcached.aspx](http://geekswithblogs.net/shaunxu/archive/2010/04/07/first-round-playing-with-memcached.aspx)

# javascript - 从 yui 数据表中获取数据

> ID：12684220
> 
> 赞同：1
> 
> 时间：2012-10-02T03:41:37.227
> 
> 标签：javascript, yui, yui2

我有以下[jsfiddle](http://jsfiddle.net/vjfu6/6/)生成`YUI Datatable`带有复选框的，但是我在单击`Get Records`按钮后从表中获取 id 数据时遇到问题。

无论如何要从javascript调用表？

PS：我正在使用 YUI2 库，因为我的项目正在使用它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:34:49.543

使用**复选框侦听器**

我希望这段代码能显示你需要什么[http://yuilibrary.com/yui/docs/datatable/datatable-chkboxselect.html](http://yuilibrary.com/yui/docs/datatable/datatable-chkboxselect.html)

**编辑：**

我更新了您的代码以添加`checkboxClickEvent`以处理每个数据行中的复选框事件，并使用数组来保留所有已检查的记录 ID。

```
var selectedID = []; 
```

* * *

```
myDataTable.subscribe("checkboxClickEvent", function(oArgs){ 
                alert("check box clicked");
                var elCheckbox = oArgs.target; 
                var oRecord = this.getRecord(elCheckbox); 
                if (elCheckbox.checked) {
                    selectedID.push(oRecord.getData("id"));
                } 
                else {
                    selectedID.pop(oRecord.getData("id"));
                }
                oRecord.setData("check",elCheckbox.checked); 
            }); 
```

工作代码的详细信息在[这里](http://jsfiddle.net/vjfu6/19/)。

# ajax - Google App Engine：不使用 RPC (Java) 的 AJAX

> ID：12684222
> 
> 赞同：1
> 
> 时间：2012-10-02T03:41:50.970
> 
> 标签：ajax, google-app-engine

我是 GAE 和 AJAX 的新手，并且一直在尝试通过使用 JAVA 编写一些应用程序来学习 GAE（虽然没有 GWT）。有人可以告诉我是否可以在不使用 Python 或 RPC 和 Java 的情况下编写 AJAX 应用程序？如果有，有样品吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:53:33.697

GAE 上的代码在服务器上运行，而 AJAX 代码在浏览器中完成，最典型的是 JavaScript。

您可以拥有一个扩展 HttpServlet 并在 GAE 上运行的 Java 类，然后让一个 java 脚本调用它并向其发送 POST 或 GET 参数并接收响应并执行所需的操作。这称为 servlet，您可以在 Google 上搜索它或获取许多关于该主题的书籍。

```
public class Biller extends HttpServlet {

    public void doPost(HttpServletRequest req, HttpServletResponse resp) {
        //Do something in here.
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T04:06:20.830

您可以使用 JavaScript（或 jQuery 之类的库）和常规 HTTP 请求编写一个好的应用程序。

网上有很多例子。喜欢这个：http: [//vimeo.com/m/8066901](http://vimeo.com/m/8066901)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:08:08.520

实际上 GEA 应用程序与 Java EE Web 应用程序非常相似。您可以只应用 JSP 文件并在 JSP 中做任何您想做的事情。您还可以添加更多静态 HTML 文件。只需将它们放在 /web 目录中，它们将在部署后在网站的根目录中可用。

# android - Android 应用开发 - 基础项目包含错误

> ID：12684223
> 
> 赞同：1
> 
> 时间：2012-10-02T03:42:10.627
> 
> 标签：android

我使用 Eclipse 制作了一个新项目（API 级别 14，BlankActivity，Tabs+Swipe。）

整个`src`文件夹包含`@Override`我可以修复的错误。但是，该`AndroidManifest.xml`文件显示错误：

```
The markup in the document following the root element must be well-formed. 
```

我该如何解决？

这是未更改的默认 xml：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.sohamchowdhury.ferric"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
    </application>

</manifest><manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.sohamchowdhury.ferric"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".AspectListActivity"
            android:label="@string/title_aspect_list" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

              <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".AspectDetailActivity"
            android:label="@string/title_aspect_detail" >
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value=".AspectListActivity" />
        </activity>
    </application>

</manifest><manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.sohamchowdhury.ferric"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:58:04.710

您的 xml 文件中有多个清单标签。从您的代码中删除以下部分。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.sohamchowdhury.ferric"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
    </application>

</manifest> 
```

并确保在 manifest.xml 文件的第一行有 xml 声明。

```
<?xml version="1.0" encoding="utf-8"?> 
```

# iphone - 随机索引处的 NSMutableArray insertObject

> ID：12684227
> 
> 赞同：1
> 
> 时间：2012-10-02T03:43:19.877
> 
> 标签：iphone, objective-c, ios, nsmutablearray, nsdictionary

我有一个包含对象和键的 NSDictionary。键包含名称和编号。我想使用 insertObject: atIndex: 将这些对象插入到 NSMutableArray 中。对象是名称，数字是我想放置对象的索引。我现在知道 NSMutableArrays 能够在 index:6 处插入对象，如果没有 1-5 那么我该如何实现呢？任何建议都非常感谢！

示例字典 [dict objectForKey:@"array"]：

```
 preferences as whole (
        {
        Name = PowerDown;
        btnIndex = 3;
    },
        {
        Name = ClearCache;
        btnIndex = 5;
    },
        {
        Name = KillBGApps;
        btnIndex = 6;
    },
        {
        Name = InfoPanel;
        btnIndex = 2;
    },
        {
        Name = Lock;
        btnIndex = 4;
    },
        {
        Name = Reboot;
        btnIndex = 0;
    },
        {
        Name = Respring;
        btnIndex = 1;
    }
) 
```

到目前为止我所拥有的，但是在将对象添加到数组边界之外时会崩溃

```
-(void)loadArray{

 self.buttons = [NSMutableArray array];

    NSMutableArray *tempArray = [[NSMutableArray alloc] init];
    tempArray = [buttonsPrefs objectForKey:@"buttonsToOrder"];

    for(NSDictionary * dict in tempArray)
    {
        if (dict) {

            NSString *btnName = [dict objectForKey:@"Name"];

            NSString *btnIndex = [dict objectForKey:@"btnIndex"];
            NSUInteger index = [btnIndex integerValue];

            NSLog(@"Name = %@",btnName);
            NSLog(@"at index %i",index);

            [self.buttons insertObject: btnName atIndex: index];
        }

    }

} 
```

编辑：当用户移动单元格时，这些值会更改名称的“索引”

```
- (void) tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath 
*)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath {
NSUInteger fromIndex = [fromIndexPath row];
NSUInteger toIndex = [toIndexPath row];
if (fromIndex == toIndex)
    return;
NSMutableDictionary *selectedButton = [[[_buttons objectAtIndex:fromIndex] retain] 
autorelease];
[_buttons removeObjectAtIndex:fromIndex];
[_buttons insertObject:selectedButton atIndex:toIndex];

//[buttonsPrefs setObject:_buttons forKey:@"buttonsToOrder"];
//[buttonsPrefs writeToFile:[self getFilePath] atomically: YES];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T04:13:41.640

尝试根据 yourDict 计数用一些虚拟数据填充目标数组，如下所示：

```
for (int i=0, i<[yourDict count], ++i){
    [yourArray addObject:@"dummyData"];
} 
```

当您需要 insertObject 时，请执行以下操作：

```
for(NSDictionary * dict in tempArray)
{
    if (dict) {

        NSString *btnName = [dict objectForKey:@"Name"];

        NSString *btnIndex = [dict objectForKey:@"btnIndex"];
        NSUInteger index = [btnIndex integerValue];

        [yourArray insertObject:btnName atIndex:index];
        [yourArray removeObjectAtIndex:index+1];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:14:10.597

```
NSMutableArray insertObject: atIndex: 
```

根据苹果文档`

> "注意 NSArray 对象不像 C 数组。也就是说，即使你在创建数组时指定了大小，指定的大小也被视为“提示”；数组的实际大小仍然为 0。这意味着您不能在大于数组当前计数的索引处插入对象。”

只能填充有效的数组值集。您可以做两件事。

1.  排序并填充数组
2.  用一些默认对象填充数组，如字符串（不能为 nil），然后替换它。如果您要填充数组中的所有值，则此选项有效，因为稍后使用时，您必须检查天气值是否正确或默认值价值在那个位置

# buildr - 构建器包含 jar 文件

> ID：12684236
> 
> 赞同：0
> 
> 时间：2012-10-02T03:44:27.180
> 
> 标签：buildr

我有一个旧项目，文件布局仍在“src/”中，jar 在“lib/”中。我将布局定义为指向 src。

`compile.with(Dir[_("lib/*.jar")])`

但当我跑步时`buildr build`，它仍然停留`package <name> does not exist`。我该如何解决这个问题？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T04:12:24.097

您可能想通过添加一行来自己调试它：

```
puts Dir[_("lib/*.jar")] 
```

如果子目录中有 jar，您可能需要使用 Dir[_("lib/* */ .jar")]。*

# aspdotnetstorefront - 扩展aspdotnetstorefront 应用程序需要xmlpackages？

> ID：12684237
> 
> 赞同：0
> 
> 时间：2012-10-02T03:44:30.627
> 
> 标签：aspdotnetstorefront

我目前正在考虑 aspdotnetstorefront。我最初的想法是构建用户控件或其他东西而不是 xmlpackages 来扩展 aspdotnetstorefront 的功能。为什么我必须使用 xmlpackages 而不是其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T23:57:42.873

我选择使用 XMLPackages 有几个原因。首先，它是产品用于布局的东西，因此更容易替换现有的包。ASPDNSF 为 XMLPackages 构建了一堆函数，让您可以访问它们的核心功能。您可以在主题和模板中使用 XMLPackages，因此无需滚动您自己的代码。最后，如果您要返回简单的 html 和 javascript，最好使用 XSLT 来完成。是的，学习曲线有点陡峭，但取决于你在做什么，它让生活更轻松。

高温高压

韦德

# jquery - $ajax.success 问题

> ID：12684246
> 
> 赞同：1
> 
> 时间：2012-10-02T03:46:01.867
> 
> 标签：jquery, asp.net, ajax

我正在从作为表格的 webmethod 中重新提取一个字符串。$.ajax 上的成功方法被命中，但不将返回的结果插入到指定元素中。

```
 success: function(result){
          $('#divSubjectQuestions').html(result);
  }, 
```

当我插入一些 html 字符串时，它会被渲染，但这段代码不起作用。

编辑：

```
 int SubjectId = Convert.ToInt32(sSubjectId);
    DataTable QuestionsTable = QuestionDataAccess.RetrieveSubjectQuestion(SubjectId);

    string head = "<table class='gridstyle' cellspacing='0' rules='all' border='1'  style='border-collapse:collapse;width: 100%;'><tr class='headerclass'><th scope='col'>Subject l Questions</th></tr>";
    string body = "";
    foreach (DataRow row in QuestionsTable.Rows)
    {
        body += " <tr><td> <a  href='QuestionDisplay.aspx?Id=" + row.ItemArray.GetValue(1) + "'style='font-size:Small;text-decoration:none;'>" + row.ItemArray.GetValue(0) + "</a><br /><span  style='font-size:XX-Small;'>" + row.ItemArray.GetValue(2) + "</span>&nbsp;<span  style='color:Gray;font-size:XX-Small;'>Boosts" + row.ItemArray.GetValue(5) + "</span>&nbsp;<span  style='font-size:XX-Small;'>" + row.ItemArray.GetValue(4) + "</span>&nbsp;<span  style='font-size:XX-Small;'>" + row.ItemArray.GetValue(3) + "</span>&nbsp;<span  style='font-size:XX-Small;'>" + row.ItemArray.GetValue(6) + "</span></td></tr>";
    }
   // return head + body + "</table>";
    return "<p>boom!</b>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:48:57.543

实际上我正在返回 json 数据，因此使用 console.log(result) 检查结果。我找到了将结果附加到“d”变量的 json 对象。然后访问 result.d 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T03:51:01.683

这是一个疯狂的猜测，没有看到任何标记或您的数据是什么样的，但请尝试：

```
 success: function(result){
          $('#divSubjectQuestions').html(result[0]);
  }, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T03:51:24.040

可能是您在同一页面上有其他 Ajax 调用。在这种情况下，建议在函数内使用不同的变量......例如成功：函数（ajax1）......

编辑
1\. 检查您正在调用的函数的语法。如果它工作与否。2.一旦1.完成，发出警报（“HH”）；在成功函数中，并检查在执行 ajax 调用时是否看到警告框。如果看不到警告框，则表示 jquery 代码有错误。如果您看到警告框，则说明与 jquery 代码冲突或语法错误。

# bash - 如何在 Unix 中为 bash、tsch、ksh shell 显示以相反顺序排序的进程列表

> ID：12684247
> 
> 赞同：0
> 
> 时间：2012-10-02T03:46:24.963
> 
> 标签：bash, unix, ksh, pid

想知道是否有人可以帮助我...我想显示以相反顺序排序的正在运行的进程列表。相反的顺序是基于进程标识值——PID。

我还想知道在某个 shell 中显示进程是否重要？我是否必须在代码行中包含特定的内容，或者只是更改外壳。我想对 tsch 和 bash 都这样做。

我已经查找了命令，但我不确定如何将它们组合在一起。见下文：

```
ps = is the command that shows information about processes running in memory
-p = by process ID
r = running processes
sorting method? 
```

不知道如何把它放在一起。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T03:51:42.970

这将做到：

```
ps aux | sort -k2 -rn 
```

该`ps`命令因操作系统而异。我可以确认以上内容适用于 Linux 和 FreeBSD。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-16T13:05:32.360

ps 在 linux 上有它自己的排序，这就是我使用它的方式：

```
ps -eo pid,user,rss,vsz,pmem,comm,lstart --sort rss 
```

在你的情况下

```
ps aux --sort pid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-22T20:48:08.440

在 bash 中，以下命令将执行此操作：

```
~$ ps aux --sort -pid | less 
```

正常（降序）顺序是通过指定`--sort pid`or来实现的`--sort +pid`。后者没有多大意义。

# java - SMTP 主机配置

> ID：12684250
> 
> 赞同：0
> 
> 时间：2012-10-02T03:47:35.443
> 
> 标签：java, smtp

我们正在使用自己的邮件服务器在我们的应用程序中配置电子邮件服务器，但是在发送邮件时我遇到了这个异常。

```
 host = "mail.xxx.com"
  port = 25
  username = "xx@xx.com"
  password = "xx"
  props = ["mail.smtp.auth":"true",
            "mail.smtp.socketFactory.port":"25",
            "mail.smtp.socketFactory.class":"javax.net.ssl.SSLSocketFactory",
            "mail.smtp.socketFactory.fallback":"false"]

 org.springframework.mail.MailSendException: Mail server connection failed; nested exception is javax.mail.MessagingException: Could not connect to SMTP host: mail.co-optimum.com, port: 25;
  nested exception is:
    javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?. Failed messages: javax.mail.MessagingException: Could not connect to SMTP host: mail.co-optimum.com, port: 25;
  nested exception is:
    javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?; message exceptions (1) are:
Failed message 1: javax.mail.MessagingException: Could not connect to SMTP host: mail.co-optimum.com, port: 25;
  nested exception is:
    javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:59:02.050

我看到发生这种情况的前三个原因是由于以下几点：

1.  由于安全策略，应用服务器上的 TCP 端口被阻止
2.  由于安全策略，TCP 端口被防火墙或其他网络设备阻止
3.  目标 SMTP 服务器要求您将应用程序服务器“列入白名单”以允许连接。

所有这三种情况的发生都是因为一家公司希望防止垃圾邮件发送者使用他们的电子邮件服务器有垃圾邮件递送系统。

与您的支持人员交谈。

希望有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:02:13.873

从 Exception 看来，服务器在 25 上似乎无法正常工作。

首先尝试通过 telnet 发送邮件，以确保邮件服务器正常工作。

*   如果 mailfrom 的域不是邮件服务器域

    1.  the domain of rcptto is not mail server domain,

        the mail server should deny it, because it can be generate many spam mail.

    2.  the domain of rcptto is mail server domain,

        no problem

*   the domain of mailfrom is mail server domain,

    you must do auth-login (I think it is your problem).

If you use javamail, props.put("mail.smtp.auth", "true"); and create session with Authenticator.

# iphone - 从 iOS 上的 Temp 目录中删除文件

> ID：12684252
> 
> 赞同：1
> 
> 时间：2012-10-02T03:47:41.303
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我正在编写一个 iOS 应用程序，我从服务器下载文件并将其存储在 sql 数据库中，稍后当用户单击消息时，它将解压缩文件并显示文件的内容。

为此，我编写了这个函数，我认为它适合我想做的事情：

这是从 sql 获取文件并将这些文件解压缩到临时文件夹

```
NSString *unzipFolder = [[CommonFunctions getCachePath]stringByAppendingPathComponent:@"temp"]; 
```

并且一旦用户完成查看此消息，我将尝试删除此临时文件夹，因此当用户单击下一条消息以显示它时，临时文件夹上有空间，因为函数总是可以稍后解压缩文件以显示

```
[[NSFileManager defaultManager] removeItemAtPath:unzipFolder error:&error]; 
```

我的问题是当我运行删除解压缩文件夹内容的功能时，它不会删除此内容，并且当用户单击消息中的下一个项目时，它会显示以前的消息图像（因为它们没有清理和自动替换）。

我该如何解决这个问题，以及如何在 iOS 上使用 Temp 文件夹存储文件并在用户完成后清理 p。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T04:58:36.447

检查文件是否存在：

```
if([[NSFileManager defaultManager] fileExistsAtPath:unzipFolder])
{
  NSError *error;
  [[NSFileManager defaultManager] removeItemAtPath:unzipFolder error:&error];
  NSLog@"Error : %@",[error description]);
}
else
{
  NSLog@"File Exists Not Exists");
} 
```

# iphone - 在iphone的图像视图中以原始方向显示图像

> ID：12684254
> 
> 赞同：1
> 
> 时间：2012-10-02T03:48:02.840
> 
> 标签：iphone

我正在制作基于照片的应用程序。当我从照片库中选择图像或从相机捕获任何图像时，它会自动改变其方向。图像在图像视图中旋转其方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:41:11.083

试试这个，我想它肯定会对你有所帮助。

```
UIImage *resized = [image resizedImageWithContentMode:UIViewContentModeScaleAspectFit bounds:image.size interpolationQuality:kCGInterpolationHigh]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:49:41.903

使用以下功能使用 EXIF 数据校正您的方向。

```
+(UIImage *)scaleAndRotateImage:(UIImage *)image //for correcting the orientation of images
{
    int kMaxResolution = 640; // Or whatever
CGImageRef imgRef = image.CGImage;

CGFloat width = CGImageGetWidth(imgRef);
CGFloat height = CGImageGetHeight(imgRef);

CGAffineTransform transform = CGAffineTransformIdentity;
CGRect bounds = CGRectMake(0, 0, width, height);
if (width > kMaxResolution || height > kMaxResolution) {
    CGFloat ratio = width/height;
    if (ratio > 1) {
        bounds.size.width = kMaxResolution;
        bounds.size.height = bounds.size.width / ratio;
    }
    else {
        bounds.size.height = kMaxResolution;
        bounds.size.width = bounds.size.height * ratio;
    }
}

CGFloat scaleRatio = bounds.size.width / width;
CGSize imageSize = CGSizeMake(CGImageGetWidth(imgRef), CGImageGetHeight(imgRef));
CGFloat boundHeight;
UIImageOrientation orient = image.imageOrientation;
switch(orient) {

    case UIImageOrientationUp: //EXIF = 1
        transform = CGAffineTransformIdentity;
        break;

    case UIImageOrientationUpMirrored: //EXIF = 2
        transform = CGAffineTransformMakeTranslation(imageSize.width, 0.0);
        transform = CGAffineTransformScale(transform, -1.0, 1.0);
        break;

    case UIImageOrientationDown: //EXIF = 3
        transform = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height);
        transform = CGAffineTransformRotate(transform, M_PI);
        break;

    case UIImageOrientationDownMirrored: //EXIF = 4
        transform = CGAffineTransformMakeTranslation(0.0, imageSize.height);
        transform = CGAffineTransformScale(transform, 1.0, -1.0);
        break;

    case UIImageOrientationLeftMirrored: //EXIF = 5
        boundHeight = bounds.size.height;
        bounds.size.height = bounds.size.width;
        bounds.size.width = boundHeight;
        transform = CGAffineTransformMakeTranslation(imageSize.height, imageSize.width);
        transform = CGAffineTransformScale(transform, -1.0, 1.0);
        transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
        break;

    case UIImageOrientationLeft: //EXIF = 6
        boundHeight = bounds.size.height;
        bounds.size.height = bounds.size.width;
        bounds.size.width = boundHeight;
        transform = CGAffineTransformMakeTranslation(0.0, imageSize.width);
        transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
        break;

    case UIImageOrientationRightMirrored: //EXIF = 7
        boundHeight = bounds.size.height;
        bounds.size.height = bounds.size.width;
        bounds.size.width = boundHeight;
        transform = CGAffineTransformMakeScale(-1.0, 1.0);
        transform = CGAffineTransformRotate(transform, M_PI / 2.0);
        break;

    case UIImageOrientationRight: //EXIF = 8
        boundHeight = bounds.size.height;
        bounds.size.height = bounds.size.width;
        bounds.size.width = boundHeight;
        transform = CGAffineTransformMakeTranslation(imageSize.height, 0.0);
        transform = CGAffineTransformRotate(transform, M_PI / 2.0);
        break;

    default:
        [NSException raise:NSInternalInconsistencyException format:@"Invalid image orientation"];

}

UIGraphicsBeginImageContext(bounds.size);

CGContextRef context = UIGraphicsGetCurrentContext();

if (orient == UIImageOrientationRight || orient == UIImageOrientationLeft) {
    CGContextScaleCTM(context, -scaleRatio, scaleRatio);
    CGContextTranslateCTM(context, -height, 0);
}
else {
    CGContextScaleCTM(context, scaleRatio, -scaleRatio);
    CGContextTranslateCTM(context, 0, -height);
}

CGContextConcatCTM(context, transform);

CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, width, height), imgRef);
UIImage *imageCopy = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

return imageCopy;
} 
```

# ruby-on-rails - 尝试运行 rails 服务器时出现错误消息

> ID：12684257
> 
> 赞同：0
> 
> 时间：2012-10-02T03:48:25.133
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

尝试在具有服务器文件夹的目录中运行时，我一直遇到此问题。在其他地方，它很好，并说 Rails 3.2.8。这是问题消息：（我使用 ruby​​ 1.9.2 ）

```
$ rails -v  
/Users/ngockhanhdao/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.8/lib/rails/script_rails_loader.rb:11: warning: Insecure world writable dir /usr/local in PATH, mode 040777
Could not find builder-3.0.0 in any of the sources
Run `bundle install` to install missing gems. 
```

我安装了bundle，它说：

```
$ sudo bundle install
/Users/ngockhanhdao/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find bundler (>= 0) amongst [actionmailer-3.2.8, actionpack-3.2.8, activemodel-3.2.8, activerecord-3.2.8, activeresource-3.2.8, activesupport-3.2.8, arel-3.0.2, builder-3.0.3, erubis-2.7.0, hike-1.2.1, i18n-0.6.1, journey-1.0.4, json-1.7.5, mail-2.4.4, mime-types-1.19, multi_json-1.3.6, polyglot-0.3.3, rack-1.4.1, rack-cache-1.2, rack-ssl-1.3.2, rack-test-0.6.2, rails-3.2.8, railties-3.2.8, rdoc-3.12, rubygems-update-1.8.24, sprockets-2.1.3, thor-0.16.0, tilt-1.3.3, treetop-1.4.10, tzinfo-0.3.33] (Gem::LoadError)
    from /Users/ngockhanhdao/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
    from /Users/ngockhanhdao/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems.rb:1231:in `gem'
    from /Users/ngockhanhdao/.rvm/gems/ruby-1.9.2-p320@global/bin/bundle:22:in `<main>' 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:52:47.650

你错过了两个`builder`和`bundler`宝石......`gem install bundler`然后做一个`bundle install`

不确定您是否需要`sudo`这些命令...

# python - 返回字典Python中所有值的总和

> ID：12684259
> 
> 赞同：2
> 
> 时间：2012-10-02T03:48:39.117
> 
> 标签：python, dictionary, count, sum

需要帮助制作函数 sumcounts(D) 其中 D 是一个以数字为值的字典，返回所有值的总和。示例输出应如下所示：

```
>>> sumcounts({"a":2.5, "b":7.5, "c":100})
110.0
>>> sumcounts({ })
0
>>> sumcounts(strcount("a a a b"))
4 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T03:51:51.057

它已经在那里了：

```
sum(d.values()) 
```

或者也许是：

```
def sumcount(d):
    return sum(d.values()) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T03:52:50.583

我不确定您对字典的了解是什么，所以我假设最低限度。

1.  创建一个`total`变量并将其设置为`0`.
2.  `for x in y`使用正常语法遍历字典中的所有键。
3.  对于每个键，使用 . 从字典中获取其各自的值`your_dict[key_name]`。
4.  将该值添加到`total`.
5.  在你的作业中获得 A。

[Michael](https://stackoverflow.com/a/12684294/464744)已经发布了常规的 Pythonic 解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T16:04:04.950

上面迈克尔给出的答案是正确的！

我想建议，如果您要使用大型数据集来查看最优秀的[Pandas](http://pandas.pydata.org/) Python 框架。（对于您的问题可能有点矫枉过正，但值得一看）

例如，它接受字典并将其转换为数据集

```
 yourdict = {"a":2.5, "b":7.5, "c":100}
 dataframe = pandas.Series(yourdict) 
```

你现在有一个非常强大的数据框，你可以做很多简洁的事情，包括求和

```
sum = dateframe.sum() 
```

您还可以轻松绘制它，将其保存到 excel、CSV、获取平均值、标准差等...

```
 dateframe.plot()      # plots is in matplotlib
   dateframe.mean()      # gets the mean
   dateframe.std()       # gets the standard deviation
   dataframe.to_csv('name.csv') # writes to csv file 
```

我真的可以推荐熊猫。它改变了我使用 Python 进行数据业务的方式......顺便说一下，它与 R 数据框架相比很好。

# oracle - 将员工休假字段状态数据库表（Lotus notes 8.5.3）上传到人力资源表（Oracle 9I）

> ID：12684264
> 
> 赞同：0
> 
> 时间：2012-10-02T03:49:16.293
> 
> 标签：oracle, oracle10g, lotus-notes, lotus, lotusscript

我正在使用 Oracle 10g Express 或 Oracle XE 和 lotus notes 8.5.3。在员工休假数据库中，我很少有字段需要在上次运行休假数据库时更新到 Oracle 数据库。

示例字段是：

```
StaffID,
StaffName,
LeaveTitle,
LvStartDate,
LvEndDate 
```

更新到 oracle 数据库

```
EmplyID,
EmplyName,
Lv_Title,
Lv_Start_Date,
Lv_End_Date 
```

从 Leave DB 到 Oracle HR DB 的匹配字段：

```
StaffID=EmplyID
StaffName=EmplyName
LeaveTitle=Lv_Title
LvStartDate=Lv_Start_Date
LvEndDate=Lv_Start_Date 
```

问题1：无论如何要确定员工信息是否被修改或创建新文件（Lotus数据库）？

问题 2：在 Oracle 数据库上更新什么 Lotus 脚本/方法。

通常我们更新信息是使用“Replaceitemvalue”

```
**notesDocument.ReplaceItemValue( itemName$, value )** 
```

它使用相同的方式来更新它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:54:40.247

问题已经解决了.....我的客户端oracle数据库dint设置正确。那为什么会报错。不管怎么说，还是要谢谢你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:08:09.710

为了连接到 Oracle，我会查看 LSConnection 类并使用它们来更新 Oracle 中的表。网络上有一些示例，但这给出了总体思路：

[http://www-10.lotus.com/ldd/nd6forum.nsf/0/06354b64eb34aa92852572900060b3d3?OpenDocument](http://www-10.lotus.com/ldd/nd6forum.nsf/0/06354b64eb34aa92852572900060b3d3?OpenDocument)

要确定信息是否已被修改，一个简单的处理方法是在表单的 QueryOpen 和 QuerySave 事件中编写代码。将这些字段的值存储在 QueryOpen 事件中，然后检查它们是否在 QuerySave 事件期间被修改。如果它们被修改，只需将另一个字段设置为当前日期/时间以表明它已被修改。然后，您可以在更新脚本中查找自某个日期以来所有修改过的文档。

# c# - 空 ItemSource 上的 Linq ToList

> ID：12684269
> 
> 赞同：2
> 
> 时间：2012-10-02T03:49:42.293
> 
> 标签：c#, linq

在我清除数据网格后，此语句将给我空异常`this.ProductList.ItemSource = null;:`

```
 salesItem = (from SalesItem items in this.ProductList.ItemsSource
                             select items).ToList<Sales>(); 
```

我怎么解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T04:58:45.320

您可以通过不将 ItemsSource 设置为 null 来解决问题：

```
this.ProductList.ItemsSource = Enumerable.Empty<Sales>(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T03:57:30.973

```
if (this.ProductList != null && this.ProductList.ItemsSource != null)
{
    salesItem = (from SalesItem items in this.ProductList.ItemsSource
                             select items).ToList<Sales>();
} 
```

# django - Django 多对多朋友关系

> ID：12684271
> 
> 赞同：2
> 
> 时间：2012-10-02T03:49:50.933
> 
> 标签：django, django-models

我正在试验 Django，并试图弄清楚如何定义一个实体与其自身相关的多对多关系。例如，假设我有一个名为“Myuser”的自定义用户对象。我希望 Myuser 有一个也是 Myuser 类型的朋友列表：

```
class Myuser(models.Model):
    user = models.OneToOneField(User)
    username = models.CharField(max_length=200)
    last_login = DateTimeField(blank=True)
    is_active  = BooleanField(default=True)
    birthday = models.DateField()
    name = models.CharField(max_length=200)
    friends = models.ManyToManyField(Myuser)
    objects = MyuserManager()

    def __init__(self, *args, **kwargs):
        super(Myuser, self).__init__(*args, **kwargs)
        self.myuser = self

    def __unicode__(self):
        return self.name

    def is_authenticated(self):
        return self.user.is_authenticated() 
```

这是行不通的，因为 Myuser 没有在friends 范围内定义。那么我该如何定义这样的关系呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T04:06:03.300

Django 对从模型到自身的多对多字段有特殊的语法。

从[文档](https://docs.djangoproject.com/en/1.4/ref/models/fields/#manytomanyfield)中，您可能希望在模型中使用类似这样的内容：

```
friends = models.ManyToManyField('self') 
```

一般来说，Django 在为超出范围或尚未定义的模型定义字段时没有问题。解决方案是用字符串命名模型，一旦定义了另一个模型，该名称就会被解析。例如，在定义两个相互具有外键的模型时，这是必要的。`'self'`但是，对于返回到您当前定义的模型的关系来说，这是一种特殊情况。

# mysql - MySQL 查询辅助（用于 PHP 输出）

> ID：12684272
> 
> 赞同：2
> 
> 时间：2012-10-02T03:49:51.033
> 
> 标签：mysql, sql

我有一张表格，列出了 MLM 的团队成员层次结构。我试图弄清楚如何在 MySQL 中最有效地查询表，以便我可以在 PHP 中输​​出结果。

我在研究中了解到嵌套查询或 PHP`while`循环中的嵌套查询并不理想，但是当我查看 MySQL 连接时，我看不到如何正确访问信息。

表值（表名称为 MLM）：

```
ID  Upline   FName

1     1      Joe    (he is at the top of the hierarchy)
2     1      Jane   (Jane is directly under Joe)
3     2      Jack
4     3      Jill 
```

要找出所有这些在乔手下报告的人的名字吗？

```
Select FName from MLM where Upline = 1;
and
Select FName from MLM where Upline in (Select FName from MLM where Upline = 1);
and
Select FName from MLM where Upline in (Select FName from MLM where Upline in (Select FName from MLM where Upline = 1)); 
```

这不是一个好的开始，而且不知道 Joe 下会有多少级别，它是不可扩展的。

您能否让我知道如何最好地查询此信息或`mysql_fetch_array`在 while 循环中组合 PHP 以查找和回显所有值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:53:48.280

不为人所知，但您可以自己加入一个表。您必须为每个实例指定一个单独的别名，以便您可以根据需要引用它们。

以下查询将检索与 Joe 具有相同 Upline 的所有人员：

```
SELECT m2.* FROM MLM m1
JOIN MLM m2 ON m1.Upline = m2.Upline
WHERE m1.FName LIKE "Joe" 
```

如果您只希望向乔报告的人，而不是乔本人，您可以执行以下操作：

```
SELECT m2.* FROM MLM m1
JOIN MLM m2 ON m1.Upline = m2.Upline
WHERE m1.FName LIKE "Joe"
AND m1.FName <> m2.FName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T05:01:49.400

在数据库中表示分层数据很棘手。您可以考虑以下任何一项：-

1.  重新设计您的表，以便轻松识别层次结构 - 检查此链接以更好地了解子查询层次结构的限制和问题[在 MySQL 中管理分层数据](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/) 或
2.  从表中选择 * 并在您的 php 代码中通过遍历结果来创建层次结构。

除此之外，如果您继续对子查询进行子查询，那么您将不会接近实际的解决方案。

# javascript - 使用 Javascript 打开和关闭显示内容

> ID：12684273
> 
> 赞同：0
> 
> 时间：2012-10-02T03:49:52.517
> 
> 标签：javascript, jquery, css

我想要做的是，使用 css 或 javascript 打开和关闭一些内容。不是 jQuery，原因是我有一些 jQuery 类并且下面的脚本没有呈现。花了几个小时试图找到原因，但不能。

我有 2 个问题。

**问题 1**

有人可以帮我把它翻译成 Javascript。在这里工作的小提琴：[小提琴](http://jsfiddle.net/En4Ka/)

```
$(document).ready(function(){
$('select').on('change',function(){
var val = $(this).val();
$('div').hide();
$('.' + val).css('display','block'); }).change();
}); 
```

**问题2**

有没有办法找到网站脚本发生了什么以及它们如何呈现。因为我发现很难看到阻止上述脚本的内容。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:04:46.640

1 试试这个 :)

```
$('select').on('change', function() {
    var val = $(this).val();
    $('div[class$=claims]').hide();
    $('.' + val).show();
}).change(); 
```

和 2 - 在 chrome 中使用 webinspector（按 F12）或在 firefox 中使用 firebug

# mysql - 如何在 phpmyadmin MySql 中导入记事本 .txt 文件

> ID：12684274
> 
> 赞同：1
> 
> 时间：2012-10-02T03:49:52.970
> 
> 标签：mysql, apache, phpmyadmin, xampp

我在记事本中有一个 31 mb 的 .txt 文件，我不确定如何将其导入 phpmyadmin。我在 stackExchange 上查看了类似的问题，但无济于事。每次我尝试上传时，我都会收到错误消息“您可能尝试上传过大的文件。请参阅文档以了解解决此限制的方法。” 考虑到文件太大，我什至将它修改为只有 3 行作为测试，我得到了一个完全不同的错误！我确定我的问题之一是没有选项显示 .txt，我只能从 CSV、SQL、DocSQL、Open Document Spreadsheet 和 XML 中进行选择。所以我假设我必须将我的 .txt 文件转换为其中一个文件来上传，除非当然有一种我不知道的完全不同的导入方式。我的 .txt 文件中的一些有问题的代码读作

```
CREATE TABLE IF NOT EXISTS occupationalinfo (
`ID` VARCHAR(255),
`Title` VARCHAR(255),
`DESCRIPTION` VARCHAR(255)) TYPE=MyISAM;

INSERT IGNORE INTO occupationalinfo (`ID`,`Title`,`DESCRIPTION`) VALUES  
('1','Architects, Except Landscape and Marine','CODE: 22302   TITLE: Architects, Except Landscape and Marine   DEFINITION: Plan and design structures, such as private residences, office buildings, theaters, factories, and other structural property.    TASKS  KNOWLEDGE  SKILLS  ABILITIES  WORK ACTIVITIES  WORK CONTEXT  INTERESTS  WORK VALUES  CROSSWALKS   TASKS: 1\. Prepares information regarding design, structure specifications, materials, color, equipment, estimated costs, and construction time.   2\. Plans layout of project.   3\. Integrates engineering element into unified design. 
```

我仍处于编程的早期学习阶段，因此将不胜感激任何提示和解释

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:09:14.110

您可以将文件的扩展名从 .txt 更改为 .sql。这并不神秘，它们都是文本文件。只要它包含上面的 SQL，就可以了。

**如果您对服务器具有命令行访问权限，请单独上传文件并使用mysql**从命令行运行它。

您也可以尝试暂时增加上传文件大小限制，尽管 31 MB 确实很大。

如果您安装了带有 PHP zip 扩展名的现代 phpmyadmin，您可以将文件扩展名更改为 .sql，压缩然后上传。它应该远远小于 31 MB。

然而，最明确的解决方案是将其分解：检查您的文件并分离出每个表，以及每个包含 500 个插入语句的集合。将它们保存为单独的文件，在 phpmyadmin 中按顺序上传并运行它们。

# php - 如何使用 PHP 创建多维数组并使用 jQuery 访问？

> ID：12684275
> 
> 赞同：-2
> 
> 时间：2012-10-02T03:49:53.670
> 
> 标签：php, javascript, jquery, arrays, multidimensional-array

所以我在我的网站上已经到了一个阶段，我需要将大量信息打包到一个像对象一样的 json 数组中，所以为了做到这一点，我需要在某个键名下打包一个数组信息列表，然后是另一个另一个键名下的一组数据。

例如：

```
$array = array();

foreach(action goes here)
{
    $array['data1'] = array('information' => data, 'more_information' => more_data)
}

$array['data2'] = array("more data"); 
```

这基本上说明了我正在尝试做的事情，我可以部分做到这一点，但是为新数据集命名键只会替换每个数据，而不是在 foreach 循环中添加到其中。

现在，如果这部分不太令人困惑，我需要一些帮助。然后除此之外，一旦解决了这个问题，我需要能够在我的 jQuery 响应中使用数据，所以我需要能够访问每组数据，例如：json.data1[i++].data，理想情况下会返回“more_information”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T04:18:45.177

您需要在该循环中增加一个数字并将结果作为 json 对象提供......

```
$array = array();
$i = 0;

foreach(action goes here)
{
    $array['data'.$i] = array('information' => data, 'more_information' => more_data)
    $i++;
}

$array['data2'] = array("more data"); 

$data = json_encode($array); 
```

然后在 php 中你可以像这样设置一个 js var：

```
<script type="text/javascript">
var data = <?php echo $data; ?>;
</script> 
```

然后可以很容易地在js中访问：

```
alert(data.data1.information); 
```

如果我正确理解您的问题，您希望得到这个对象作为对某事的回应？像 jQuery .ajax 调用一样？

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

这个链接非常清楚地说明了如何使用它。您需要确保指定`dataType = "json"`然后将您的数据处理放在成功调用中：

```
$.ajax({
    url: 'some url string',
    type: "GET",
    dataType: "json",
    success: function(data)
    {
        $.each(data, function(i, v){
            console.log(data[i]);
        });
    },
    error: function()
    {
        //error handling
    }
}); 
```

这是相对未经测试的，但这个概念是我想要传达的。你基本上在 php 和 json_encode 中制作你的多维数组。这些方法中的任何一种都允许您解析 json。

# matlab - Matlab中的多分辨率离散小波3D图

> ID：12684277
> 
> 赞同：1
> 
> 时间：2012-10-02T03:50:05.217
> 
> 标签：matlab, signal-processing, matlab-figure, wavelet, haar-wavelet

我正在尝试使用带有多分辨率分析 (MRA) 的小波分析对 1-D 信号执行 DWT 并制作 3D 图。

简而言之，MRA 将采用离散的采样数据集并对其进行小波分析。

每次通过产生前一次运行的 1/2 样本。我最终得到一个 X x Y 矩阵，每个值中都存储了一个幅度。X 是样本数（或时间），Y 是“细节”小波结果。数据矩阵可能如下所示：

```
[ 1 1 1 1 2 4 8 2 1 1 1 1 2 1 1 2 ]
[ 1 . 1 . 3 . 6 . 1 . 1 . 2 . 1 . ]
[ 1 . . . 3 . . . 1 . . . 2 . . . ]
[ 1 . . . . . . . 1 . . . . . . . ] 
```

这 '。' 将是 NaN 或 0 或其他可能的东西（我假设我做错了什么）。

我想制作这样的情节：

![在此处输入图像描述](../Images/a7de9443cf6ab5f6656988fe5f83573f.png)

Matlab 似乎无法在图中插入那么多数据。我尝试过 meshgrid、surf、ribbon、plot3 等——但它要求所有向量的长度相同。输入 NaN 或 0 会导致结果不可靠。

到目前为止，我所做的最好的事情是使用功能区将数据表示为条带 - 但这也存在它所表示的数据的问题。

我已尽力阅读 Matlab 中的帮助页面，但没有取得太大进展。有人可以将我推向正确的方向吗？

**2012 年 11 月的另一个更新** 高密度冲浪图由于网格边缘颜色将显示为完全黑色。要禁用它，请使用以下函数： surf(zi, 'EdgeColor', 'none');

**调整更新** 我仍然不相信这是最终的解决方案，但这是我在产生像 3D 随机数据图这样的热浪方面的最大努力。这是否会帮助我意识到我的信号数据是另一回事。

```
% initialize the matrix of sampled data
indx = 1;
data = NaN(5, 128);
for row=1:5
    for col=1:128
        if ( mod(col-1, indx) == 0)
            data(row, col) = rand();
        end
    end
    indx = power(2, row);
end

% Linearize the data in each row to overcome NaN entries
for row=1:5
    fprintf('Linear interpolation for row %d\n', row); 
    indx = NaN;
    for col=1:128
        if (data(row, col) ~= NaN) || (col == 128)
            if isnan(indx)
                % initalize first point
                indx = col;
            elseif isnan(data(row,col)) && (col ~= 128)
                % ignore NaN values between 1 and N-1
            elseif ((col-1) ~= indx)
                fprintf('Creating linspace from col=%d to indx=%d\n', col, indx)
                if (col == 128)
                    % first row will always contain all points
                    v = linspace(data(row, indx), data(1, col), col+1-indx);
                else
                    v = linspace(data(row, indx), data(row, col), col+1-indx);
                end
                i=1;
                for j=indx:col
                    data(row,j) = v(i); % update our data
                    i = i + 1; % increment counter
                end
                indx = col;
            elseif ((col-1) == indx)
                indx = NaN;
            end
        end
    end
end

% Populate the X and Y vectors, X is columns, Y is rows, Z is data
xmin = 1;
ymin = 1;
xmax = 128;
ymax = 5
[X, Y] = meshgrid(1:5, 1:128);

[xi, yi] = meshgrid(.1:.1:5, 0:.5:128);
zi = griddata(X, Y, data.', xi, yi);
surf(zi);
% disable edge color for high density plots (or it will look solid black)
surf(zi, 'EdgeColor', 'none'); 
```

![使用线性化的随机离散 3D 图](../Images/6806ec01b29a22a24d40e23610b45e53.png)

# html - 缩小页面时菜单栏变形

> ID：12684285
> 
> 赞同：0
> 
> 时间：2012-10-02T03:50:51.417
> 
> 标签：html, css

伙计们，我的菜单需要帮助。当我缩小页面时，它会失真。这是我的链接。我在 IE 上测试了这个链接，它很好，但是在 chrome 和 firefox 中缩放页面会扭曲菜单和下面的内容。

[https://dl.dropbox.com/u/22813136/Finding%20Nemo%20Inc/FNemo_front.htm#](https://dl.dropbox.com/u/22813136/Finding%20Nemo%20Inc/FNemo_front.htm#)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T03:59:49.837

`div#text-contents`继承了上面的 div float 属性。要删除它，您应该 Give `clear:both`to`div#text-contents`它会正常工作。我建议您使用宽度百分比而不是像素。（没有必要）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:22:12.713

看起来您已将每个菜单项放置在自己的`ul`容器中，如下所示：

```
<ul>
    <li>something</li>
</ul>
<ul>
    <li>something</li>
</ul>
<ul>
    <li>something</li>
</ul> 
```

尝试使用一个带有多个 lis 的单个 ul

```
<ul>
    <li>something</li>
    <li>something</li>
    <li>something</li>
</ul> 
```

然后你需要做一些 css 来让它们垂直对齐。这有点额外的工作，但这是正确的方法。否则，您将尝试修复最初被破坏的结构的外观。:)

这是一种方法：http: [//jamesowers.co.uk/css-tutorials/10/vertical-list-menu/](http://jamesowers.co.uk/css-tutorials/10/vertical-list-menu/)

# javascript - jQuery fn 属性

> ID：12684287
> 
> 赞同：2
> 
> 时间：2012-10-02T03:51:02.527
> 
> 标签：javascript, jquery

使用例如 Chrome 开发者工具，我们可以轻松地检查 JavaScript / jQuery 对象。我试图了解以下内容：

```
$.ajax    // defined as 'function ...'
$.fn.ajax // undefined

$.removeClass    // undefined
$.fn.removeClass // defined 
```

既然`$.removeClass`没有定义，我们怎么能调用 eg`$('body').removeClass('some-class')`呢？而且，这会导致错误`$('body').fn.removeClass('some-class')`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T04:10:31.533

您正在询问两种不同类型的对象。

`$`是相同的，`jQuery`并且是一个具有属性的函数。 `$.ajax`是这些属性之一。

创建的实际 jQuery 对象`$('body')`实际上是一个对象，它是`jQuery.fn.init`not of 的一个实例`jQuery`。

所以，这是你看到不同方法的第一个原因，`$`因为`$('body')`它们是不同类型的对象，因此可以有不同类型的方法。

* * *

为了进一步理解，方法 on `$`（它是 的同义词`jQuery`）是直接添加到`jQuery`函数本身的方法。在 jQuery 代码中，这主要是`jQuery.extend()`在 jQuery 对象上完成的。 `$.ajax`就是其中之一。

jQuery 函数创建的 jQuery 对象上的方法是分配给的方法，`jQuery.fn.init.prototype`由于 jQuery 的一些诡计，它们是分配给`jQuery.fn`. 事实证明，当任何东西被分配给 时，它`jQuery.fn.init.prototype`被设置为同一个对象，它会自动转到并且该原型上的任何东西都会自动成为对象的方法，该对象是由 jQuery 函数创建的，例如or 。`jQuery.fn``jQuery.fn``jQuery.fn.init.prototype``jQuery.fn.init``jQuery('body')``$('body')`

您可以在 jQuery 代码中看到这一点。如果您查看 jQuery 函数，它看起来像这样（它创建一个对象，`jQuery.fn.init`因此将具有来自的方法`jQuery.fn.init.prototype`：

```
// Define a local copy of jQuery
var jQuery = function( selector, context ) {
    // The jQuery object is actually just the init constructor 'enhanced'
    return new jQuery.fn.init( selector, context, rootjQuery );
}, 
```

而且，后来`.fn`是这样的：

```
// Give the init function the jQuery prototype for later instantiation
jQuery.fn.init.prototype = jQuery.fn; 
```

这就是分配给的任何方法也是如何`jQuery.fn`在`jQuery.fn.init.prototype`jQuery 对象上成为方法的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T03:54:31.427

当您执行类似的操作时`var el = $("#content");`，您正在处理几种不同类型的对象：

*   **字符串。** `"#content"`. '纳夫说。
*   **功能。** `$`（这里是 的同义词`jQuery`）是一个函数。`"#content"`正如我们在上面建立的那样，您使用 string 调用它。
*   **jQuery 对象。**该`jQuery`函数创建 jQuery 对象。`el`是这些对象之一。

`jQuery`函数及其直接附加属性大多是不适用于任何特定元素的东西；它们是您可能想要自己做的事情。举个例子，`jQuery.ajax`; 这不适用于元素，所以它被直接放在`jQuery`函数上。

其他功能只有在您了解要应用操作的元素的上下文时才有意义。比如说，删除一个类。如果我说`jQuery.removeClass("selected");`，我想从什么中删除课程？你从来没有指定，所以你不能这样做。相反，假设我们`el`如上所述分配，`el.removeClass("selected");`确实有一定的意义；它从代表的任何元素中删除一个类`el`（这里是 ID 为 的元素`content`）。

每当我们在点之后有这些函数名称之一时，它就是点之前某些东西的属性（直接或间接）。对于不涉及任何元素的函数`ajax`，它直接放在`$`/上`jQuery`。对于类似的方法`removeClass`，它被放在所有`jQuery`对象上。

当然，如果你想添加一个新方法，可以在一组元素上使用，例如`removeClass`，将这个属性添加到每个元素上会相当乏味，更不用说获取对每个 jQuery 对象的引用的问题了，过去、现在和未来！出于这个原因，`jQuery.fn`是一个充当所有 jQuery 对象*原型的对象。*这意味着每当您创建一个新的 jQuery 对象时，它的行为都会像它所基于的原型一样，`jQuery.fn`. 如果向 中添加一个属性`jQuery.fn`，它将出现在所有 jQuery 对象上。事实上，原型的概念深深嵌入到 JavaScript 中，修改`jQuery.fn`会影响*所有*jQuery 对象，无论是新创建的、过去创建的还是将来创建的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T03:52:54.210

我对 jQuery 很陌生，但我的理解是 $.fn 是一个包含所有可以在 jQuery 对象上调用的方法的属性。

这就是为什么当您[编写插件](http://docs.jquery.com/Plugins/Authoring)时，您通过添加自己的函数定义来扩展 $.fn。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T04:12:20.303

当你在 JavaScript 中声明一个函数时，它就是一个对象：

```
function foo() {...}
foo.bar = 'baz'; //set the `bar` property on `foo` 
```

...以及作为构造函数：

```
var f = new foo();
f instanceof foo; //`true`
f.bar; //undefined 
```

当你从一个函数构造一个对象时，实例会从`prototype`它的构造函数继承属性：

```
function Bar() {...}
Bar.prototype = {
    baz: function () {
        console.log('baz');
    }
}
var b = new Bar();
b.baz(); //logs 'baz'
Bar.baz(); //error 
```

此外，JavaScript 中的对象通过引用传递*。

```
var fizz,
    buzz;
fizz = {};
buzz = fizz;
buzz.foo = 'bar';
console.log(fizz.foo); //logs 'bar' 
```

jQuery 工厂函数 ( `jQuery`or `$`) 本质上是**以下列方式定义的：

```
function jQuery(...args...) {
    //the map returned is a jQuery init object
    return new jQuery.init(...args...);
}
//jQuery.init is a function used as a constructor
jQuery.init = function () {...do stuff...};
//jQuery.init.prototype is an object containing the methods that can be called on
//jQuery.init objects
jQuery.init.prototype = {
    addClass: function () {...},
    on: function () {...},
    removeClass: function () {...}
};
//The jQuery.init.prototype object is exposed via jQuery.fn
jQuery.fn = jQuery.init.prototype;
//functions available on the jQuery namespace are added to the jQuery function object.
jQuery.ajax = function () {};
jQuery.extend = function () {}; 
```

[**有点*]
[** 过于简单化了]

# sql-server - SQL Server：转换到今天然后加上 8 小时：第二部分

> ID：12684288
> 
> 赞同：1
> 
> 时间：2012-10-02T03:51:22.290
> 
> 标签：sql-server, dateadd

在我较早的帖子中，我尝试将日期更改为当前日期并添加 8 小时时间。

[SQL Server：转换为今天，然后增加 8 小时](https://stackoverflow.com/questions/12674274/sql-server-convert-to-today-then-add-8-hours#comment17103691_12674274)

```
UPDATE business.dbo.db_schedule
SET nextUpdate= DATEADD(hh, 8,
                DATEADD(d, DATEDIFF(D,nextUpdate,Getdate()),
                          nextUpdate))
where sno=8 
```

注意：**nextUpdate**可能是过去的任何时间。

如果我想更进一步；我希望**nextdate**在未来的时间。因为如果我添加一次 8 小时，结果可能仍然是过去的时间，我可能必须再添加一个（甚至两次），所以结果是将来的。我可以一步完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T04:32:15.860

```
UPDATE business.dbo.db_schedule
SET nextUpdate =
  DATEADD(HOUR
    , 8 * CEILING((DATEDIFF(MILLISECOND, nextUpdate, GETDATE()) / 3600000.) / 8.)
    , nextUpdate)
  )
WHERE sno = 8; 
```

我们不只是加 8 小时，而是将 8 乘以`CELING`相隔的小时`nextUpdate`数`GETDATE()`

例如，如果`nextUpdate`is`2012-10-01 02:30:00`和`GETDATE()`is current `2012-10-02 15:15:00`，则有 36.75（四舍五入为 37）小时差。37 / 8的`CEILING`值为 5，这意味着您需要添加 5 * 8 小时才能获得一个时间，`GETDATE()`但仍保留当前`nextUpdate`值的 8 小时的倍数。

[SQLFiddle 解决方案示例](http://sqlfiddle.com/#!3/d41d8/4807/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T06:21:02.660

我认为这虽然有很多值得一看的地方，但实际上会表现得更好，因为它只是一次通过数据的一堆计算。

```
UPDATE business.dbo.db_schedule
SET nextUpdate=
  CASE
  WHEN
                DATEADD(hh, 8, DATEADD(d, DATEDIFF(
                D,nextUpdate,Getdate()), nextUpdate))
              > Getdate() THEN
                DATEADD(hh, 8, DATEADD(d, DATEDIFF(
                D,nextUpdate,Getdate()), nextUpdate))
  WHEN
                DATEADD(hh, 16, DATEADD(d, DATEDIFF(
                D,nextUpdate,Getdate()), nextUpdate))
              > Getdate() THEN
                DATEADD(hh, 16, DATEADD(d, DATEDIFF(
                D,nextUpdate,Getdate()), nextUpdate))
  ELSE
                DATEADD(d, 1+DATEDIFF(
                D,nextUpdate,Getdate()), nextUpdate)
  END
where sno=8 
```

注意：最后一个是通过在内部表达式中添加 1 天而不是在外部表达式中添加 24 小时来简化的。

* * *

**原意如下**

这个想法在前一个的基础上进行了扩展，只是我们不是只添加 8 小时，而是将所有 8、16*和*24 都添加为 3 个单独的行，并使用 GROUP BY/MIN 来获取当前时间之后最早的时间。

```
update s
set nextUpdate = a.newTime
from business.dbo.db_schedule s
join
(
  select nextupdate, min(nextUpdate2) newTime
  from
  (
    SELECT nextupdate,
           nextUpdate2 = 
              DATEADD(hh, 8*x.y,
                  DATEADD(d,DATEDIFF(D,
                      d.nextUpdate,Getdate()),d.nextUpdate))
    from business.dbo.db_schedule d
    cross join (select 1 union all
                select 2 union all
                select 3) x(y)
  ) z
  where newTime > getdate()
  group by nextupdate
) a on a.nextUpdate = b.nextUpdate; 
```

# php - 将日期重写到数组范围内

> ID：12684297
> 
> 赞同：-2
> 
> 时间：2012-10-02T03:52:23.217
> 
> 标签：php, arrays, max, min

我需要重写数组中每个酒店房间可用的日期范围。这是我的数组值：

```
1=2012-10-07
1=2012-10-08
1=2012-10-09
1=2012-10-10
2=2012-10-07
2=2012-10-08
2=2012-10-09
2=2012-10-10
3=2012-10-05
3=2012-10-06
3=2012-10-08
3=2012-10-09
3=2012-10-10 
```

我需要把它写在：

```
1 available from 7-10 October 2012 //I know this line need to use date("F Y",strtotime());
2 available from 7-10 October 2012 
3 available from 5-10 October 2012 
```

请建议如何将这些天栈写入 PHP 中的日期范围。问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T04:15:37.867

像这样的东西应该工作：

```
$dates = array('2000-10-02', '2000-10-01', '2000-10-03');
sort($dates);

// prints "1-3 October 2000"
echo date('j', strtotime(current($dates))) . '-'
   . date('j', strtotime(end($dates))) . ' '
   . date('F Y', strtotime(current($dates))); 
```

改进领域：

*   当日期范围不连续时会发生什么？
*   当一个范围跨越两个不同的年份或月份时会发生什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T04:13:11.013

你去[http://codepad.viper-7.com/EKo9ky](http://codepad.viper-7.com/EKo9ky)

```
$dates = array(
    array(1, "2012-10-07"),
    array(1, "2012-10-08"),
    array(1, "2012-10-09"),
    array(1, "2012-10-10"),
    array(2, "2012-10-07"),
    array(2, "2012-10-08"),
    array(2, "2012-10-09"),
    array(2, "2012-10-10"),
    array(3, "2012-10-05"),
    array(3, "2012-10-06"),
    array(3, "2012-10-08"),
    array(3, "2012-10-09"),
    array(3, "2012-10-10")
);
$info = array();
foreach($dates as $roominfo) {
    $time = strtotime($roominfo[1]);
    $room = $roominfo[0];
    if(!array_key_exists($roominfo[0], $info))
        $info[$room] = array($time, $time);
    if($time<$info[$room][0])
        $info[$room][0] = $time;
    if($time>$info[$room][1])
        $info[$room][1] = $time;
}

foreach($info as $roomId => $roomRange) {
    echo $roomId.' available from '.
        date('d', $roomRange[0]).' - '.
        date('d F Y', $roomRange[1]).' <br/>';
} 
```

输出：

```
1 available from 07 - 10 October 2012
2 available from 07 - 10 October 2012
3 available from 05 - 10 October 2012 
```

这并不完全符合您的要求，但我认为这应该足以达到您的目标。小心，房间不能在某个范围内一天可用，请记住这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T04:25:34.743

以下是有关如何完成任务的一些流程。

首先根据您的 1,2,3 将它们切片

那么你可以像这样处理你的日期：

不使用排序，当前，结束。我们可以只使用最小和最大数组；

```
<?php
$dates = array('2012-10-07','2012-10-10','2012-10-01');
$stimes = array_map('strtotime',$dates);

var_dump($dates);
var_dump($stimes);

echo date('F j, Y', min($stimes));
echo "<br />\n";
echo date('F j, Y', max($stimes)); 
```

# c++ - 在 C++ 中链接到库的 Makefile

> ID：12684299
> 
> 赞同：1
> 
> 时间：2012-10-02T03:52:39.553
> 
> 标签：c++, makefile, libcurl, ubuntu-12.04

最近，我尝试创建一个makefile，如下所示：

```
all:
     g++ test.cpp -o Test 
```

它创建一个可运行的`Test`. 但是，如果我尝试将它链接到一个库（如`LibCurl`使用 SSL 连接）：

```
all:
     g++ test.cpp -o Test -lcurl 
```

出错了（我已经将`libcurl4-openssl-dev`包安装为标准库）！我想念什么？你能给出任何解决方案吗？谢谢！！

编辑：错误如下：

```
fatal error: curl.h: No such file or directory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T04:01:22.937

我想，你需要修复你的来源：

```
#include <curl/curl.h> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T19:38:46.433

包含搜索路径中缺少头文件。

您将安装 libcurl 的开发包。例如，为 Open Suse 11.1 安装 libcurl-devel-7.19.0-11.1.x86_64.rpm。

要了解 rpm 将安装的文件列表，请下载 rpm，在下载的目录中键入以下命令。

`rpm -qlp <rpmname>`

根据上面的示例，命令将是 `rpm -qlp libcurl-devel-7.19.0-11.1.x86_64.rpm`

这将列出文件及其安装路径。在我们的示例中，结果看起来像..

`/usr/include/curl` `/usr/include/curl/curl.h` `/usr/include/curl/curlbuild.h`
`/usr/include/curl/curlrules.h`
`/usr/include/curl/curlver.h` 等等...

和

为您使用的 linux 版本安装开发 libcurl 包，并将其包含`#include <curl/curl.h>`在您的代码中。

参考[http://curl.haxx.se/download.html](http://curl.haxx.se/download.html)下载正确的

# java - 不继承 Object 类的类

> ID：12684305
> 
> 赞同：9
> 
> 时间：2012-10-02T03:53:02.047
> 
> 标签：java, object

是否有任何类不继承 Object 作为 SuperClass 或者可能已经过时/弃用？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-02T04:06:39.473

根据[Java Object 超类](https://stackoverflow.com/questions/2706069/java-object-superclass)，`java.lang.Object`不扩展`Object`。

除此之外，所有课程，即

```
class ClassName {
    //some stuff
} 
```

如果它们不扩展任何其他超类，则隐式扩展 Object 类。

另一方面，接口不能扩展 Object，因为根据定义，接口不能扩展 Class。此外，接口不能包含可调用的方法，也不能从它们实例化对象。当最终实现接口时，实现类将必然扩展 Object（并且，不，`Object`不实现或扩展任何其他实体/类/接口）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T04:01:39.993

根据[java.lang.Object javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html)

> 类对象是类层次结构的根。每个类都有 Object 作为超类。所有对象，包括数组，都实现了这个类的方法。

因此，Java 中的所有对象都直接或间接地扩展了它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T03:56:11.143

所有 Java 类都继承`java.lang.Object`（直接 - 默认情况下，或通过父类）。如果某些平台版本不推荐使用某些类或方法，它总是会反映在适当的 JavaDoc 中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T05:00:59.013

> 是否有任何类不继承 Object 作为 SuperClass

正是其中之一，它就是`java.lang.Object`它本身。还有所有接口。

> 或者可能已经过时/弃用？

有很多这样的。请参阅 Javadoc。

# java - 如何加密将从网络下载的音频文件，该文件应该有限制，只能在 3 台 PC 上播放

> ID：12684310
> 
> 赞同：-1
> 
> 时间：2012-10-02T03:53:44.217
> 
> 标签：java, encryption, drm, rights-management

我正在寻找一种在 Java 或 Asp 中允许我加密文件并将其上传到网站的方法。当有人下载​​它并在计算机上可用的播放器上播放时，它应该跟踪该计算机并且只有在否时才应该播放。播放此文件的 PC 少于 3。

有没有办法做到这一点。我通过在 Flash 中编写脚本想到了 flv，但并没有那么确信，因为它很容易出路..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T04:01:44.453

您正在寻找 DRM 解决方案，例如受保护的 WMA 文件。请注意，任何 DRM 解决方案都需要 DRM 权限管理服务器和兼容的播放器才能在下载时正确许可文件。

另请注意，由于客户的挫败感，此类用于媒体保护的系统在很大程度上即将淘汰，许多在线音乐商店都倒闭了，他们的客户不再能够“激活”他们的购买。

# iphone - UITextField 在 UITableView 中滚动时清除 - 自定义单元格

> ID：12684316
> 
> 赞同：2
> 
> 时间：2012-10-02T03:54:43.710
> 
> 标签：iphone, ios, uitableview

我试图从 UITextField 中保存某些值，但是我无法做到这一点，因为每当我滚动时，UITextField 中什么都没有。我正在使用自定义单元格。我知道自定义单元格必须加载到特定视图中，因此我使用 textFieldDidEndEditing 将值存储在数组中。但是，我收到以下错误消息： *** 由于未捕获的异常 'NSInvalidArgumentException' 导致应用程序终止，原因：'*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil'

非常感谢您的帮助！我的代码在下面，我在 IOS 开发中很新。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

  if (indexPath.section == 0) {
    if (indexPath.row == 7) {
      static NSString *CellIdentifier = @"RevButtonCell";

      RevButtonCell *cell = (RevButtonCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

      if (cell == nil) {
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"RevButtonCell" owner:self options:nil];
        cell = [topLevelObjects objectAtIndex:0];
        [cell.revsaveB addTarget:self action:@selector(revaddparse:) forControlEvents:UIControlEventTouchUpInside];

        cell.reveditdeleteB.hidden = YES;
        cell.reveditsaveB.hidden = YES;
        cell.revsaveB.hidden = NO;
        cell.revdeleteB.hidden = NO;

      }
      return cell;
    } else {

      static NSString *CellIdentifier = @"TextCell";

      TextCell *cell = (TextCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

      if (cell == nil) {
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"TextCell" owner:self options:nil];
        cell = [topLevelObjects objectAtIndex:0];
      }

      cell.detaillabel.text = [revdetailsA objectAtIndex:indexPath.row];

      cell.detailtext.placeholder = @"Enter Text";
      cell.detailtext.tag = indexPath.row;
      cell.detailtext.delegate = self;

      if (indexPath.row == 0) {
        cell.detailtext.text = dateS;
      }
      if (indexPath.row == 1) {
        cell.detailtext.text = clientS;
      }
      if (indexPath.row == 2) {
        cell.detailtext.text = productS;
      }
      if (indexPath.row == 3) {
        cell.detailtext.text = amountS;
      }
      if (indexPath.row == 4) {
        cell.detailtext.text = qtyS;
      }
      if (indexPath.row == 5) {
        cell.detailtext.text = taxS;
      }
      if (indexPath.row == 6) {
        cell.detailtext.text = totalS;
      }

      cell.selectionStyle = UITableViewCellSelectionStyleNone;

      return cell;
    }
  }
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
  [client insertObject:clientS atIndex:0];
  [product insertObject:productS atIndex:0];
  [date insertObject:dateS atIndex:0];
  [amount insertObject:amountS atIndex:0];
  [qty insertObject:qtyS atIndex:0];
  [tax insertObject:taxS atIndex:0];
  [total insertObject:totalS atIndex:0];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T03:59:37.470

将 vales 初始化为空字符串

```
clientS = @"";
productS = @"";
dateS = @"";
amountS = @"";
qtyS = @"";
taxS = @"";
totalS = @""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:37:41.490

只需使用每个 CellIdentifier 就可以了`CellIdentifier`，如下所示

并且在这里使用此代码后，不需要创建数组并在其中插入对象，因此不要创建数组只需使用此代码..

```
 NSString *CellIdentifier = [NSString stringWithFormat:@"Cell%d%d",indexPath.section,indexPath.row]; 
```

使用这个 CellIndentifier 插入另一个像“TextCell”和“ButtonCell”

我希望这可以帮助你...

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T05:16:18.787

从您的代码看来，您正试图在表格视图中实现静态单元格。您可能要考虑的是使用情节提要并创建一个仅使用 Interface Builder 支持静态表格单元格的表格视图。这将允许您消除整个`cellForRowAtIndexPath:`方法。如果您不能使用情节提要，那么您将不得不按照您的方式管理您的单元格，但在我的书中，只要您可以消除代码，就应该这样做。

如果你要使用故事板，你应该知道几件事：

*   故事板中的视图控制器需要是表视图控制器
*   您将表格内容字段设置为“静态单元格”
*   将要使用的文本字段添加到每个单元格中，方法是将它们拖到您添加的单元格中
*   在视图控制器标题中创建插座，然后在界面构建器中将连接拖到它们

有一些关于使用带有静态单元格的表格视图的教程。它们可能有点长，但是，坚持使用它们，您应该能够产生您正在寻找的结果。

此致。

# ios - 使用 NSURL 在启动画面上加载

> ID：12684326
> 
> 赞同：0
> 
> 时间：2012-10-02T03:56:25.627
> 
> 标签：ios

我有一个 NSURL 需要花费大量时间来加载 url，我需要显示一个微调器，我正在使用下面的代码，但微调器不是第一个出现的东西，它首先显示黑屏，我想要应用程序在启动时首先加载微调器，直到 URL 加载完成，任何人都可以帮助解决这个问题，将不胜感激。

```
 [NSThread detachNewThreadSelector:@selector(showLoading) toTarget:self withObject:nil];

    NSURL *URL = [NSURL URLWithString:@"http://strappcenter.net/strapp-projects/ohs/admin/jsonstring.php"];
    //NSURL *URL = [NSURL URLWithString:@"http://strappcenter.net/strapp-projects/ohs/admin/jsonstring.php"];
    NSError *error;
    NSString *stringFromFileAtURL = [[NSString alloc]
                                     initWithContentsOfURL:URL
                                     encoding:NSUTF8StringEncoding
                                     error:&error];

    [NSThread detachNewThreadSelector: @selector(spinEnd) toTarget:self withObject:nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T04:09:32.453

您需要添加启动画面，就像您的第一个屏幕一样。
然后从互联网加载数据。
看看[这个教程](http://adeem.me/blog/2009/06/22/creating-splash-screen-tutorial-for-iphone/)。

# ruby-on-rails - Rails 引导数据表

> ID：12684328
> 
> 赞同：0
> 
> 时间：2012-10-02T03:56:31.370
> 
> 标签：ruby-on-rails, datatable, twitter-bootstrap

我成功地将 jquery-datatables-rails gem 与 twitter bootstrap 一起使用。使用引导程序需要使用：

```
 sPaginationType: "bootstrap" 
```

在数据表 jquery 函数中。一切都很好。

默认情况下，引导分页如下所示：

```
 <- previous  1  2  3  4  5  next -> 
```

有没有办法限制引导分页创建的页面数量？例如，它看起来像这样？：

```
 <- previous  1  2  3 next -> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:09:36.977

显示的页面数在 dataTables 给出的示例代码中（以及在 jquery-datatables-rails gem 中）硬编码。

我提交[了一个拉取请求](https://github.com/rweng/jquery-datatables-rails/pull/37)以使用与“full_numbers”分页相同的行为。

当这个拉取请求将被合并时，你只需要像这样初始化你的数据表：

```
$.fn.dataTableExt.oPagination.iFullNumbersShowPages = 3;
$('#my-table').dataTable({
    "bPaginate": true,
    "sPaginationType": "bootstrap",
    "bScrollCollapse": true
}); 
```

# .htaccess - 无法访问安装在根目录下的 Magento 的子目录/文件夹？

> ID：12684334
> 
> 赞同：1
> 
> 时间：2012-10-02T03:57:31.617
> 
> 标签：.htaccess, magento, mod-rewrite

我在我的域的根目录安装了 Magento，我试图在 mydomain.com/forum/ 的子文件夹中安装一个论坛，但似乎 Magento 的 .htaccess（当然位于 mydomain.com/.htaccess）是阻止对子目录 /forum/ 的任何请求。

每当我访问 /forum/ 或 /anything 时，它只会给出 404 错误，而不是提供位于那里的实际文件。

知道我可以在不破坏 Magento 的 URL 重写的情况下解决这个问题吗？很烦人....

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:22:57.940

问题解决了。

似乎这是一个权限问题，因为我安装了 suPHP。虽然我对 /forums/ 下的所有内容进行了 chmod，文件为 644，文件夹为 755，但 /forums/ 本身并没有这样做。

```
chown -R youruser /home/youruser/public_html/forums
chgrp -R youruser /home/youruser/public_html/forums
find /home/youruser/public_html/forums -type f -exec chmod 644 {} \;
find /home/youruser/public_html/forums -type d -exec chmod 755 {} \; 
```

suPHP：[http ://www.kavoir.com/2012/10/500-internet-server-error-for-incorrect-permissions-after-installing-suphp-and-uploading-php-script.html](http://www.kavoir.com/2012/10/500-internet-server-error-for-incorrect-permissions-after-installing-suphp-and-uploading-php-script.html)

在 chmod /forums/ 本身为 755 之后，mydomain.com/forums/ 可以正确访问而没有任何错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T07:55:00.817

我的magento安装似乎没有这个问题。尝试在 docroot 中创建一个测试文件夹并在其中放置一个 index.php 文件。然后导航到 mydomain.com/test/，您应该会看到 index.php 的内容。还要检查你的 magento .htaccess 文件是否有这些行：

```
## never rewrite for existing files, directories and links

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-l 
```

也许您的论坛有自己的 .htaccess 导致 404？您的论坛可能需要指定

```
 RewriteBase /forum/ 
```

# java - 通用类型警告

> ID：12684335
> 
> 赞同：1
> 
> 时间：2012-10-02T03:57:38.093
> 
> 标签：java, generics

我刚刚安装了 jdk1.7.0_07，我突然被大量关于泛型原始类型的警告所淹没。（我收到了数百个，它们混淆了其他可能有意义的警告。）据我所知，这些错误不应该产生，我没有用 java-6-openjdk-i386 得到它们。

我创建了以下小示例。（每个类都在自己的文件中。）

```
public interface Generic<T> {
    public T get( );
}

public class Test {

    public Test safeAsHell( Generic thing, int number ) {
        return new Test( );
    }

    public void safeAsHell( Generic thing ) { }

} 
```

当我尝试编译它（javac -Xlint）时，我收到以下警告：

```
Test.java:3: warning: [rawtypes] found raw type: Generic
    public Test safeAsHell( Generic thing, int number ) {
                        ^
  missing type arguments for generic class Generic<T>
  where T is a type-variable:
    T extends Object declared in interface Generic
Test.java:7: warning: [rawtypes] found raw type: Generic
    public void safeAsHell( Generic thing ) { }
                        ^
  missing type arguments for generic class Generic<T>
  where T is a type-variable:
    T extends Object declared in interface Generic
2 warnings 
```

添加`Object`为泛型类型参数 ( `Generic<Object> thing`) 可以解决问题。我本来以为类型`Generic`和`Generic<Object>`是等价的。我忽略了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T04:02:08.240

`Generic<Object>`是参数化类型，`Generic`而是原始类型。这就是警告的原因。

# winapi - 了解程序的资源文件(Win32)

> ID：12684339
> 
> 赞同：1
> 
> 时间：2012-10-02T03:58:31.477
> 
> 标签：winapi

假设我有一个带有菜单的简单 Win32 程序，并且所有语法都是正确的。这是资源文件：

```
#define IDR_MYMENU                      101
#define IDI_MYICON                      102
#define ID_FILE_EXIT                    40001
#define ID_STUFF_GO                     40002
#define ID_STUFF_GOSOMEWHEREELSE        40003 
```

我对声明的常量有点困惑，我可以使用任何 ol 数字来表示每个选项吗？如：

```
#define IDR_MYMENU                      23
#define IDI_MYICON                      412
#define ID_FILE_EXIT                    40071
#define ID_STUFF_GO                     40892
#define ID_STUFF_GOSOMEWHEREELSE        64982 
```

还是这些特定数字背后有什么东西？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T04:08:30.833

您可以使用任何有效的 32 位无符号整数值（即 < 65535）。它们用于唯一标识资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T04:11:25.203

您可以使用几乎任何数字。但是，我发现在 WinCE 上，一些菜单项标识符可以保留用于特殊的系统操作。最好避开100以下的。

# windows-7 - [Microsoft][ODBC Visual FoxPro Driver]无法打开文件 C:\users\aleer\locals\locals~1\temp\6uu0004.tmp？

> ID：12684340
> 
> 赞同：0
> 
> 时间：2012-10-02T03:58:37.950
> 
> 标签：windows-7, odbc, foxpro, squirrel-sql

好的，我检查了这一点，`C:\users\aleer\locals\locals~1\temp\6uu0004.tmp`实际上是指向文件甚至不存在的位置。 `C:\Users\aleer\Local Settings\temp``6uu0004.tmp`

我想这个文件可能正在创建，然后一旦我进入命令提示符它就会消失。

我不确定问题是什么...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T03:59:34.270

发现创建临时文件的目录不属于我的用户。更改了目录的所有者，现在它可以工作了。

# xcode - Xcode 捕获所有未捕获的异常

> ID：12684343
> 
> 赞同：6
> 
> 时间：2012-10-02T03:58:43.053
> 
> 标签：xcode, exception, exception-handling, breakpoints, uncaught-exception

在 Xcode 中我可以创建一个断点来捕获所有异常（异常断点）。然而，这个断点也会在 try-catch 情况下触发。

我正在使用第三方库，所以 try-catch 情况是一个事实，而不是一个选项。

有没有办法只处理**未捕获**的异常，而不是所有异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T04:39:34.760

您可以在线程的条目中放置一个顶级`try/catch`。

您可能还对`NSSetUncaughtExceptionHandler`.

通常，顶级处理程序在生产中几乎没有用处（您实际上并没有试图从您不准备处理的问题中恢复，但它可能对最后一句话或断点有用）。理想情况下，当且仅当您可以处理异常时，您将使用 try/catch 保护您从这些库接口的退出。要么，要么`nothrow`作为开发过程中的快速调试实用程序。

如果你试图捕捉 Cocoa 异常——只要让它死掉，然后将 bug 提交给任何认为 Cocoa 异常应该可以恢复的人。

# mysql - 如何将 vb.net 日期保存到没有 0000-00-00 的 mysql 日期

> ID：12684345
> 
> 赞同：2
> 
> 时间：2012-10-02T03:59:15.800
> 
> 标签：mysql, vb.net, datetime, windows-applications, date-conversion

我已经用这个问题杀死了脑细胞超过 5 个小时。如何正确地将日期从 vb.net 保存到 mysql 日期，而不会一直获取 0000-00-00。

我尝试了多种建议，您在输入之前格式化日期值，但它得到了相同的结果，例如：

```
Dim departDate As Date
Dim d As String = Format(departDate, "05/05/2007") 
```

我在其中测试但没有工作我仍然得到 0000-00-00

我试过了：

```
 Dim changeFormatDate As Date
    Dim AddFechaListadoCasas2 as String
    changeFormatDate = AddCasasListadoDatePicker.Text
    AddFechaListadoCasas2 = changeFormatDate.ToString("yyyy-MM-dd") 
```

这仍然给了我在 mysql 上的 0000-00-00

我也试过这个例子：

```
Dim myDate as DateTime = DateTime.ParseExact(x, "yyyy-MM-dd", CultureInfo.CurrentCulture) 
```

并试图保存到 mysql 仍然给了我 0000-00-00

在我的程序中，我从日期选择器中获取日期作为文本，然后将其转换为字符串并尝试将其保存到数据库中。如有必要，我很想将其转换为格式为 yyyy-MM-dd 的日期，这对 MySQL 来说是必需的，但我在上面所做的一切仍然显示 0000-00-00 令人沮丧。

任何帮助将不胜感激。

狮子座

这是我的程序中的 MySQL 插入语句。

```
AddFechaListadoCasas2 = AddCasasListadoDatePicker.Text
        AddFechaCierreCasas2 = AddFechaCierreCasas.Text

SqlVentaCasas = "INSERT INTO VentaCasas (ID, Direccion, Ciudad_Municipio, Zona_Localidad, Barrio, " & _
                                    "Estatus, Precio, Unidad, Departamento, Conjunto, Estrato, Matricula_Inmobiliaria, Cedula_Catastral," & _
                                    "Escritura, Notaria, Ano, Area_Metros_2, Tipo_de_Construccion, Niveles, Habitaciones, Garajes," & _
                                    "Techo, Vista, Picina, Cocina_Integral, Bar, Cuarto_Bano_Servicio, Antejardin, Equipos," & _
                                    "Aire_Acondicionado, Detalles_addicionales, Estilo, Ano_Construccion, Orientacion, Banos, Parqueos," & _
                                    "Piso, Balcon, Jacuzzi_Sauna, Chimenea, Hall_Television, Zona_lavanderia, Patio, Accesorios," & _
                                    "Calefaccion, Administracion, Amenidades, Impuestos, Condiciones, Ocupacion," & _
                                    "Cuota_Administracion, Restricciones, Seguridad, Mostrar, Comision, Fecha_Listado, " & _
                                    "Agente_Cooperante, Fecha_Expiracion, CiudadEscritura, Agente, Licensia, Compania, NumeroPersonal," & _
                                    "NumeroCompania, NumeroFax, Email, AreaLotesM2, PrecioOriginal, Account_Creator, NumeroDias ) VALUES ('" & _
                                    AddIDCasas2 & "','" & _
                                    AddDireccionCasas2 & "','" & AddCiudadCasas2 & "','" & AddZonaCasas2 & "','" & AddBarrioCasas2 & "','" & _
                                    AddEstatusCasas2 & "'," & AddPrecioCasas2 & ",'" & AddUnidadCasas2 & "','" & AddDepartamentoCasas2 & "','" & _
                                    AddConjuntoCasas2 & "'," & AddEstratoCasas2 & ",'" & AddMatriculaCasas2 & "','" & _
                                    AddCedulaCatastralCasas2 & "','" & AddEscrituraCasas2 & "','" & AddNotariaCasas2 & "'," & _
                                    AddAnoCasas2 & "," & AddMetros2Casas2 & ",'" & AddTipoConstruccionCasas2 & "'," & _
                                    AddNivelesCasas2 & "," & AddHabitacionesCasas2 & "," & AddGarajesCasas2 & ",'" & _
                                    AddTechoCasas2 & "','" & AddVistaCasas2 & "','" & AddPicinaCasas2 & "','" & AddCocinaIntegralCasas2 & "','" & _
                                    AddBarCasas2 & "','" & AddCuartoCasas2 & "','" & AddAnteJardinCasas2 & "','" & AddEquiposCasas2 & "','" & _
                                    AddAireAcondicionadoCasas2 & "','" & AddDetallesAddicionalesCasas2 & "','" & AddEstiloCasas2 & "'," & _
                                    AddAnoConstruccionCasas2 & ",'" & AddOrientacionCasas2 & "'," & AddBanoCasas2 & "," & _
                                    AddParqueoCasas2 & ",'" & AddPisoCasas2 & "','" & AddBalconCasas2 & "','" & AddJacuzziCasas2 & "','" & _
                                    AddChimeneaCasas2 & "','" & AddTVCasas2 & "','" & AddZonaLavanderiaCasas2 & "','" & AddPatioCasas2 & "','" & _
                                    AddAccesoriosCasas2 & "','" & AddCalefaccionCasas2 & "','" & AddAdministracionCasas2 & "','" & _
                                    AddAmenidadesCasas2 & "','" & AddImpuestosCasas2 & "','" & AddCondicionesCasas2 & "','" & _
                                    AddOcupacionCasas2 & "','" & AddCuotaAdministracionCasas2 & "','" & AddRestriccionesCasas2 & "','" & _
                                    AddSeguridadCasas2 & "','" & AddMonstrarCasas2 & "','" & AddComisionCasas2 & "','" & _
                                    AddFechaListadoCasas2 & "','" & AddAgenteCooperanteCasas2 & "','" & _
                                    AddFecdhaExpiracionCasas2 & "','" & _
                                    AddCiudadEscrituraCasas2 & "','" & AgenteNameCasas2 & "','" & _
                                    AgenteLicensiaCasas2 & "','" & AgenteCompaniaCasas2 & "','" & _
                                    AgentePersonalCasas2 & "','" & AgenteTelefonoCasas2 & "','" & _
                                    AgenteFaxCasas2 & "','" & AgenteEmailCasas2 & "'," & AddAreaLotesM2Casas2 & "," & AddPrecioOriginalCasas2 & ", '" & AgenteAccountCreatorCasas2 & "', 0 );" 
```

AddFechaListadoCasas2 和 AddFecdhaExpiracionCasas2 是包含我想在 MySQL 上输入的日期的字符串

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T04:07:46.737

您当前的查询容易受到`SQL Injection`. 请使用`ADONet Object`诸如`Connection`和`Command`带参数。更具体地说，既然您正在使用`MySQL`，请使用`MySQL Data provider`。它会自动为您转换数据类型。

```
Dim query As String = "INSERT INTO tableName (dateColumn) VALUES (@dateParam)"
Using conn As New MySqlConnection("connectionstringHere")
    Using comm As New MySqlCommand()
        With comm
            .Connection = conn
            .CommandText = query
            .CommandType = Commandtype.Text
            ' Assuming this is a DatePicker '
            .Parameters.AddWithValue("@dateParam", AddCasasListadoDatePicker.Value) 
        End With
        Try
            conn.Open()
            comm.ExecuteNonQuery()
        Catch(ex as MySqlException)
            Msgbox(ex.Message.ToString())
        End Try
    End Using
End Using 
```

# android - 动态创建的 TableRow 然后 RelativeLayout 不显示

> ID：12684350
> 
> 赞同：1
> 
> 时间：2012-10-02T03:59:52.910
> 
> 标签：android, android-relativelayout, tablerow, android-tablelayout

我正在遍历`RelativeLayouts`在`TableRows`. 如果我尝试设置`LayoutParams`则`RelativeLayout`什么都不会出现并且不会出现错误。如果我不这样做，那么一切都会出现，但布局设置为`WRAP_CONTENT`. 我已经尝试了几个示例，但无法使其正常工作。下面是我的代码：

```
 TableLayout tblItems = (TableLayout) findViewById(R.id.tblItems);

            // Fields from the database (projection)
            String[] projection = new String[] { ItemsTable.ITEM_ID,
                                                ItemsTable.ITEM_NAME,
                                                ItemsTable.ITEM_PRICE,
                                                ItemsTable.ITEM_PICTURE };          
            Cursor cursor = getContentResolver().query(ItemsTable.CONTENT_URI, projection, null, null, null);                   
            startManagingCursor(cursor);        

            // Establish the item mapping
//          String[] columns = new String[] {"name", "price"};
//          int[] to = new int[] {R.id.tv_description, R.id.tv_price};

//          adapter = new SimpleCursorAdapter(this, R.layout.item_list_select, cursor, columns, to, 0);
//          lvSelectItems.setAdapter(adapter);

/*          
            adapter.setViewBinder(new SimpleCursorAdapter.ViewBinder() { 

                public boolean setViewValue(View view, Cursor cursor, int columnIndex) { 
                    if(columnIndex == cursor.getColumnIndexOrThrow(OrderDetailTable.ORDERDETAIL_PRICE)) { 

                  //          String createDate = aCursor.getString(aColumnIndex); 
                  //          TextView textView = (TextView) aView; 
                  //          textView.setText("Create date: " + MyFormatterHelper.formatDate(getApplicationContext(), createDate)); 

                            double total = cursor.getDouble(columnIndex);
                            TextView textView = (TextView) view;
                            textView.setText("$" + String.format("%.2f",dRound(total, 2)));

                            return true; 
                    } 
                    return false; 
                } 

            });
*/          
            // tblItems

            int totalRows = 0;
            int tcolumn = 1;

            int numItems = cursor.getCount();
            double tempRow = numItems / 2;

            if (numItems > 0) {
                itemsFound = true;
            } else {
                itemsFound = false;
            }

            long iPart;  // Integer part
            double fPart;  // Fractional part
            boolean ifFirst = true;

            // Get user input
            iPart = (long) tempRow;
            fPart = tempRow - iPart;

            if (fPart > 0) {
                totalRows = (int) (iPart + 1);
            } else {
                totalRows = (int) iPart;
            }

            TableRow row = null;

            cursor.moveToFirst(); 
            while (cursor.isAfterLast() == false)  
            { 
                // tblItems    // TableLayout
                // TableRow
                // RelativeLayout
                // ImageView
                // TextView
                // TextView

                if (ifFirst) {
                    // create a new TableRow
                    row = new TableRow(this);
                    ifFirst = false;
                }

                // Creating a new RelativeLayout
                RelativeLayout relativeLayout = new RelativeLayout(this);

                // Defining the RelativeLayout layout parameters.
                // In this case I want to fill its parent
                RelativeLayout.LayoutParams rlp = new RelativeLayout.LayoutParams(
                        RelativeLayout.LayoutParams.WRAP_CONTENT,
                        RelativeLayout.LayoutParams.WRAP_CONTENT);   

                rlp.setMargins(5, 5, 5, 5);

                relativeLayout.setPadding(5, 5, 5, 5);
                relativeLayout.setBackgroundResource(R.drawable.grpbx_item);

                row.addView(relativeLayout, rlp);

                // add text view
                ImageView imgPic = new ImageView(this);
                imgPic.setBackgroundResource(R.drawable.takepic);
                imgPic.setPadding(0, 0, 0, 0);
                relativeLayout.addView(imgPic);

                // add text view
                TextView tvName = new TextView(this);
                String name = cursor.getString(cursor.getColumnIndexOrThrow(ItemsTable.ITEM_NAME));
                tvName.setText("" + name);

             // Defining the layout parameters of the TextView
                RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(
                        RelativeLayout.LayoutParams.WRAP_CONTENT,
                        RelativeLayout.LayoutParams.WRAP_CONTENT);
                lp.addRule(RelativeLayout.CENTER_IN_PARENT);

           //     RelativeLayout.

                // Setting the parameters on the TextView
                tvName.setLayoutParams(lp);
                relativeLayout.addView(tvName);

                // add text view
                double iPrice = cursor.getDouble(cursor.getColumnIndexOrThrow(ItemsTable.ITEM_PRICE));

                TextView tvPrice = new TextView(this);
                tvPrice.setText("$" + String.format("%.2f",dRound(iPrice, 2)));
                relativeLayout.addView(tvPrice);

                tcolumn++;

                numItems--;

                if (tcolumn == 3) {
                    // add the TableRow to the TableLayout
                    tblItems.addView(row,new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

                    // create a new TableRow
                    row = new TableRow(this);
                    tcolumn = 1;
                } else {
                    if (numItems == 0) {
                        // add the TableRow to the TableLayout
                        tblItems.addView(row,new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
                    }
                }

                // Move to the next record
                cursor.moveToNext(); 
            } 

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T04:07:58.807

> 如果我尝试为 relativeLayout 设置布局参数，则不会出现任何内容并且不会出现错误。如果我不这样做，那么一切都会出现，但布局设置为 wrapcontent。

你用错`LayoutParams`了`RelativeLayout`。你用：

```
RelativeLayout.LayoutParams rlp = new RelativeLayout.LayoutParams(
                        RelativeLayout.LayoutParams.WRAP_CONTENT,
                        RelativeLayout.LayoutParams.WRAP_CONTENT);   
row.addView(relativeLayout, rlp); 
```

但作为它的父母，`RelativeLayout`你`TableRow`必须使用`TableRow.LayoutParams`：

```
TableRow.LayoutParams rlp = new TableRow.LayoutParams(
                        TableRow.LayoutParams.FILL_PARENT,
                        TableRow.LayoutParams.WRAP_CONTENT);   
row.addView(relativeLayout, rlp); 
```

# javascript - 如何使用替换方法在javascript中将“/”转换为“\”

> ID：12684353
> 
> 赞同：-3
> 
> 时间：2012-10-02T04:01:00.337
> 
> 标签：javascript

路径就像“C：/TEST/”，我想将它转换为“C：\ TEST \”，我搜索了很多并且很难做到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T04:04:54.513

`\`表示转义序列的开始，因此必须用另一个`\`.

要全局替换，您需要使用正则表达式，这需要更多的字符转义：

```
 > 'C:/TEST/'.replace(/\//g, '\\')
 "C:\TEST\" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:04:07.573

```
"C:/TEST/".replace(/\//g, '\\') 
```

# python - python manage.py syncdb 无法正常工作

> ID：12684357
> 
> 赞同：1
> 
> 时间：2012-10-02T04:01:28.777
> 
> 标签：python, mysql, django, mysql-python

我玩过 Django、python 和 MySQL；并在导入 django 时安装并使其工作，通过 python 命令行导入 MySQLdb。

但是当我尝试在项目的根目录中执行 python manage.py syncdb 时，我得到了以下错误消息：

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/core/management/base.py", line 231, in execute
    self.validate()
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/core/management/base.py", line 266, in validate
    num_errors = get_validation_errors(s, app)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/core/management/validation.py", line 103, in get_validation_errors
    connection.validation.validate_field(e, opts, f)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/db/backends/mysql/validation.py", line 14, in validate_field
    db_version = self.connection.get_server_version()
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/db/backends/mysql/base.py", line 415, in get_server_version
    self.cursor().close()
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/db/backends/__init__.py", line 306, in cursor
    cursor = self.make_debug_cursor(self._cursor())
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/db/backends/mysql/base.py", line 387, in _cursor
    self.connection = Database.connect(**kwargs)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/MySQLdb/__init__.py", line 81, in Connect
    return Connection(*args, **kwargs)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/MySQLdb/connections.py", line 187, in __init__
    super(Connection, self).__init__(*args, **kwargs2)
_mysql_exceptions.OperationalError: (2002, "Can't connect to local MySQL server through socket '/opt/local/var/run/mysql5/mysqld.sock' (13)") 
```

可能的问题是什么？好像是连接错误的东西？我是新手，感谢您的帮助:)

我附上了我的 settings.py 文件：

```
 # Django settings for mysite project.
   DEBUG = True
   TEMPLATE_DEBUG = DEBUG

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASES = {
     'default': {
        'ENGINE': 'django.db.backends.mysql', 
        'NAME': '',                      
        'USER': 'localhost',                 
        'PASSWORD': '',                 
        'HOST': '',                     
        'PORT': '',                     
    }
}

  TIME_ZONE = 'America/Chicago'

  LANGUAGE_CODE = 'en-us'

  SITE_ID = 1

  USE_I18N = True

  USE_L10N = True

  USE_TZ = True

  MEDIA_ROOT = ''

  MEDIA_URL = ''

  STATIC_ROOT = ''

  STATIC_URL = '/static/'

  STATICFILES_DIRS = (
  )

  STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
  )

SECRET_KEY = 'wke73b4pm&amp;s-g(ra*to+ykxe*3@0h=nrnt(v&amp;3kf)fx=co*72@'

TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
)

ROOT_URLCONF = 'mysite.urls'

WSGI_APPLICATION = 'mysite.wsgi.application'

TEMPLATE_DIRS = (
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
)

LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

我可以使用命令行成功登录到mysql数据库：mysql -u localhost

使 HOST = "127.0.0.1" 后，我收到更新的错误消息：

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/core/management/commands/syncdb.py", line 60, in handle_noargs
    tables = connection.introspection.table_names()
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/db/backends/__init__.py", line 896, in table_names
    return self.get_table_list(cursor)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/db/backends/mysql/introspection.py", line 33, in get_table_list
    cursor.execute("SHOW TABLES")
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/db/backends/util.py", line 40, in execute
    return self.cursor.execute(sql, params)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/db/backends/mysql/base.py", line 114, in execute
    return self.cursor.execute(query, args)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/MySQLdb/cursors.py", line 174, in execute
    self.errorhandler(self, exc, value)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/MySQLdb/connections.py", line 36, in defaulterrorhandler
    raise errorclass, errorvalue
django.db.utils.DatabaseError: (1046, 'No database selected') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:47:12.227

Just add database name and port number ..

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', 
        'NAME': 'Database_name',                 
        'USER': 'root',                    
        'PASSWORD': 'root',                
        'HOST': '',                     
        'PORT': '3306',                  
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T02:16:31.053

我面临着完全相同的问题。settings.py 中的 DATABASES 需要为 HOSTNAME 和 PORT 设置值。

就我而言，mysql 使用主机“localhost:3306”。当我将 PORT(in settings.py) 值设置为 3306 时，它可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:43:53.653

您`HOST`在数据库设置中丢失。使用`localhost`或`127.0.0.1`。

显然，当未指定主机时，mysqldb 默认使用 unix 域套接字，而不是使用常规主机名/端口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T12:28:39.337

您需要先在 MySQL 中创建一个模式（让我们将其命名为 my_db_schema），然后在 NAME 下指定它的名称。

```
DATABASES = {
     'default': {
        'ENGINE': 'django.db.backends.mysql', 
        'NAME': 'my_db_schema',                      
        'USER': 'localhost',                 
        'PASSWORD': '',                 
        'HOST': '',                     
        'PORT': '',                     
    }
} 
```

# android - 应用程序在第一次收到来自 GCM 的消息时崩溃，后续消息被处理且没有错误

> ID：12684361
> 
> 赞同：2
> 
> 时间：2012-10-02T04:02:02.877
> 
> 标签：android, android-intent, google-cloud-messaging

我的模拟器上安装了两个应用程序。“经理”应用程序向 GCM 发送消息。另一个名为“调度程序”的应用程序接收消息并向用户显示通知。

当我在模拟器上同时运行两个应用程序时，管理器应用程序工作正常。但是，调度程序应用程序在`GCMIntentService`进程后崩溃`onMessage();`这只发生在第一条消息上。所有剩余的消息都会在应用程序不崩溃的情况下得到处理。

logcat 中不会打印出任何错误。

问题

1.  GCMIntentService 是否有异常处理？
2.  如果应用程序不可见并且 GCMIntentService 调用一个函数来打开一个 Activity。这会使程序崩溃吗？
3.  如果我同时在模拟器上运行两个应用程序，会不会是模拟器的问题？

这是 GCMIntentServe 代码：

```
/**
 * {@link IntentService} responsible for handling GCM messages.
 */
public class GCMIntentService extends GCMBaseIntentService {
    @SuppressWarnings("hiding")
    private static final String TAG = "GCMIntentService";
    // Request code
    public static final int CUSTOM_REQUEST_CODE_ENTER_TEXT = 666;

    public GCMIntentService() {
        super(SENDER_ID);
    }

    @Override
    protected void onRegistered(Context context, String registrationId) {
        Log.i(TAG, "Device registered: " + "regId = " + registrationId);
      //  displayMessage(context, getString(R.string.gcm_registered));
        ServerUtilities.register(context, registrationId);

        displayError(context, "Device registered for Notifications from Anime Convention");
        System.out.println("Device registered: " + "regId = " + registrationId);
    }

    @Override
    protected void onUnregistered(Context context, String registrationId) {
        Log.i(TAG, "Device unregistered");
       // displayMessage(context, getString(R.string.gcm_unregistered));
        if (GCMRegistrar.isRegisteredOnServer(context)) {
            ServerUtilities.unregister(context, registrationId);
            System.out.println("Device Unregistered: " + "regId = " + registrationId);
        } else {
            // This callback results from the call to unregister made on
            // ServerUtilities when the registration to the server failed.
            Log.i(TAG, "Ignoring unregister callback");
        }
    }

    @Override
    protected void onMessage(Context context, Intent intent) {
        Log.i(TAG, "Received message");
        //String message = getString(R.string.gcm_message);

        System.out.println("onMessage: ");

        Bundle extras = intent.getExtras(); 

               String message =extras.getString("message");
               String event_id_from_server =extras.getString("server_id");
           //    displayMessage(context, message);
                generateNotification(context, message);
                saveMsg(message);    

                System.out.println("server id is "+ event_id_from_server);

                updateLocalDatabase(event_id_from_server);
        }

    @Override
    protected void onDeletedMessages(Context context, int total) {
        Log.i(TAG, "Received deleted messages notification");
        String message = getString(R.string.gcm_deleted, total);
       // displayMessage(context, message);
        // notifies user
        generateNotification(context, message);
    }

    @Override
    public void onError(Context context, String errorId) {
        Log.i(TAG, "Received error: " + errorId);

        if(errorId.equals("ACCOUNT_MISSING")){

        String error="Anime Convention Scheduler was unable to register your device for notifications. You need to add a GMAIL account to the phone inorder to use this service. Then use the Options Menu to register";

        displayError(context, error);
        displayMessage(context, error);
        }

     // save using saved preferences than display.
        if(errorId.equals("SERVICE_NOT_AVAILABLE")){

            String error="Google Cloud Messageing Service is not currently available";

            displayError(context, error);
        }

        // save using saved preferences than display.
        if(errorId.equals("AUTHENTICATION_FAILED")){
            String error="Google Cloud Messageing did not recognized your password. Please re-enter your password for your GMAIL account";
            displayError(context, error);
        }

        // save using saved preferences than display.
        if(errorId.equals("PHONE_REGISTRATION_ERROR") || errorId.equals("INVALID_PARAMETERS")){

            String error="Your phone does not support Google Cloud Messageing. You will not receive notifications from Anime Convention";
            displayError(context, error);
        }
    }

    @Override
    protected boolean onRecoverableError(Context context, String errorId) {
        // log message
        Log.i(TAG, "Received recoverable error: " + errorId);
     //   displayMessage(context, getString(R.string.gcm_recoverable_error,               errorId));

        return super.onRecoverableError(context, errorId);
    }

    /**
     * Issues a notification to inform the user that server has sent a message.
     */
    private static void generateNotification(Context context, String message) {
        int icon = R.drawable.icon;
        long when = System.currentTimeMillis();
        NotificationManager notificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(icon, message, when);
        String title = context.getString(R.string.app_name);
        Intent notificationIntent = new Intent(context, TabBarExample.class);
        // set intent so it does not start a new activity
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent intent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
        notification.setLatestEventInfo(context, title, message, intent);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        notificationManager.notify(0, notification);
    }

    private String handleMessage(Intent intent) {
        String id = intent.toString();
        String message = null;
        try {
            JSONObject json = new JSONObject(id);
             message = json.getString("message_id");
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return message;
    }

    public void saveMsg(String msg) {
        boolean worked = true;
        try {
            NotificationsDatabase entry = new NotificationsDatabase(GCMIntentService.this);
            entry.open();
            java.util.Date date= new java.util.Date();
             Timestamp x = new Timestamp(date.getTime());

            String timeStamp=x.toLocaleString();
            entry.createEntry(msg,timeStamp);

            entry.close();

            NoteAdapter note = null;
            note.notifyDataSetChanged();

            NewsRowAdapter nra  = null;
            nra.notifyDataSetChanged();

            AlertAdapter aa=null;
            aa.notifyDataSetChanged();
        } catch (Exception e) {
            worked = false;
            String error = e.toString();
            System.out.println(error);
        } finally {
            if (worked) {
            }
        }
    }
    @Override
    public void onDestroy() {
        GCMRegistrar.onDestroy(GCMIntentService.this.getApplicationContext());
        super.onDestroy();
    }

    public void updateLocalDatabase(String serverId){

        List<Alerts> listAlerts;

        int server_id=Integer.parseInt(serverId);

        DatabaseSqlite entry = new DatabaseSqlite (GCMIntentService.this);
        entry.open();
        listAlerts = entry.getData();       
        entry.close();

        int alerts=listAlerts.size();

        for (int i = 0; i < alerts; i++) {
            Alerts item = listAlerts.get(i);

        int remote_id =item.getRemoteServerId();
        String eventName=item.getEventName();
        int local_id=item.getRowId();

        if(server_id ==remote_id){

            //update database with new info

            // Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag
            Intent intent = new Intent(GCMIntentService.this, UpdateLocalDatabase.class);
            intent.putExtra("server_id", server_id);
            intent.putExtra("local_id", local_id);
            intent.putExtra("event_name", eventName);
            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

            startActivity(intent);
            }
        }                   
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:13:11.217

导致此问题的代码存在两个问题。

1.  我没有检查应用程序中 event_id_from_server 是否为空或为空的条件。

2.  当您向 GCM 发送消息时，它们不能为空或“”。这会使服务崩溃。所以我需要在 php 中为没有关联 id 的消息创建这个条件：

    if(!$id || $id==""){

    ```
     $fields = 
    array(
    'registration_ids' => $registrationIDs, 
    'data' => array("message" => $message), 
    'delay_while_idle'=> false,
    'collapse_key'=>'core_update'
    );

    }else{

    $fields = 
    array(
    'registration_ids' => $registrationIDs, 
    'data' => array("message" => $message,"server_id"=>$id), 
    'delay_while_idle'=> false,
    'collapse_key'=>'core_update'
    );

    } 
    ```

# matlab - 在matlab中计算大数幂

> ID：12684364
> 
> 赞同：3
> 
> 时间：2012-10-02T04:02:20.443
> 
> 标签：matlab, encryption, rsa

我试图弄清楚如何在 matlab 中计算大数的大幂来进行 RSA 加密。

例如：一个 50+ 位整数的 999999 次幂。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T04:15:19.690

您可以通过平方来使用求幂：

[https://en.wikipedia.org/wiki/Exponentiation_by_squaring](https://en.wikipedia.org/wiki/Exponentiation_by_squaring)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T06:26:56.617

所以最终的结果将是`1e49^1e6 = 1e49000000`. 对于任何基本的 matlab 数据类型来说，这个数字都太大了。一个解决办法是使用文件交换的[vpi工具箱](http://www.mathworks.com/matlabcentral/fileexchange/22725)；它可以以速度为代价处理大量数据。

更好的解决方案是以不同的方式实现您的最终目标；即重新定义公式以获得最终结果..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T06:21:13.947

我们需要实现某种形式的大量数据类型
对于 C，这是使用 GMP 多精度库或 LibToMMath 库完成
的 还有很多其他的
对于 Matlab 可能会有所帮助 [>>> LInK <<<](http://www.mathworks.com/matlabcentral/fileexchange/6446)

# c# - 使用 .NET 数据集的正确方法是什么？

> ID：12684367
> 
> 赞同：6
> 
> 时间：2012-10-02T04:03:08.900
> 
> 标签：c#, .net, ado.net, dataset

我试图找出使用 .NET 数据集的正确方法。您是否应该为数据库中的每个表创建一个 DataTable 并在 DataSet 中创建关系？在 DataSet 中重建整个数据库结构对我来说似乎很疯狂。

我将使用我的数据库的简化示例。假设我有一张`CompanyEquipment`桌子。每台设备都属于一个成本中心，成本中心数据存储在`CostCenter`表中，并与`CompanyEquipment`表相关联。假设我有一个存储过程，它返回`CompanyEquipment`已与`CostCenter`表连接的数据，以在一个查询中返回所有信息。我可以使用存储过程来填充`DataTable`，但是如何将这个非规范化的结果表保存回数据库？我不知道这是否是一个好方法。无论如何，我认为查询使用关联（桥）表的多对多关系需要多个查询。例如，我有一个`EquipmentRole`存储不同设备使用情况的表，以及一个`EquipmentRoleAssignment`可以将多个角色分配给设备的表格。

或者，如果我有模仿数据库的 DataTables，我将不得不在每个表上使用 DataAdapter.Fill() 分别查询每个表，以将相关数据放入每个`DataTable`. 所以我会有类似的东西`select * from CompanyEquipment where equipID = 1234`，我会用一个适配器来填充一个`CompanyEquipment DataTable`，然后我将不得不使用另一个查询`select * from CostCenter where costCenterID = <costcenterID from the companyequipment record>`并填充`CostCenter DataTable`. 使用这种方法，我必须访问数据库两次，并且我失去了 DBMS 执行连接的能力。

我是数据驱动应用程序的新手，所以我不熟悉工作流程；特别是我应该访问数据库多少次才能获得一种数据表示。任何帮助表示赞赏。我在 C# 中工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T04:11:28.303

一点也不？自 .NET 1.0 以来，我一直没有使用 DataSet。使用 ORM，游戏结束。数据集在报告应用程序之外的实际用途为零，这些应用程序允许用户完全动态地组合他们的查询，即使在这种情况下，大多数时候也有更好的解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T04:12:47.513

我过去使用过数据集（虽然很久以前），根据我的经验，这是我的 0.02$

您的选项 1 和选项 2 都是关于如何使用数据集的有效方案。

**对于检索场景：-** 这取决于您如何使用数据。

例如，在您知道所有主表 + 相关表数据正在例如立即显示给用户的情况下，选项 1 可能更可取。

但是，在一个场景中，您可能会显示一个包含主表数据的表，并且仅在单击一行时才显示相关的表信息，因此最好使用选项 2，因为它允许您按要求获取数据.

**对于插入/更新方案**

选项 2 在内存结构模仿数据库的情况下效果最好。因此，使用适配器甚至命令构建器对象和数据行状态（插入/更新/删除），您可以轻松插入/更新/删除适当的数据，而无需太多麻烦。如果您要使用选项 1，则需要编写逻辑将其拆分并自己保存到单独的表中。

希望这是有用的。然而，就像大多数现实生活场景一样，这真的取决于

**注意：**我完全避免使用数据集/数据表，我有一段时间因为它们是相当重的对象，因此往往会消耗资源。如果您确实使用它们，请确保您测试性能 - 根据您的性能要求，以确保它们最终不会长期不适合

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T17:38:10.323

我建议将 POCO 与实体框架一起使用。借助 EF，您可以使用[Entity Framework Power Tools](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d/)，它为现有数据库生成 POCO 类、派生的 DbContext 和 Code First 映射。这将减少您自己创建课程的努力。您现在有了可以与 EF 一起使用的类来解决您在问题中描述的问题。

# python - 如何左对齐固定宽度的字符串？

> ID：12684368
> 
> 赞同：79
> 
> 时间：2012-10-02T04:03:09.177
> 
> 标签：python, string-formatting

我只想要固定宽度的文本列，但字符串都向右填充，而不是向左填充！！？

```
 sys.stdout.write("%6s %50s %25s\n" % (code, name, industry)) 
```

生产

```
BGA                                BEGA CHEESE LIMITED   Food Beverage & Tobacco
BHP                               BHP BILLITON LIMITED                 Materials
BGL                               BIGAIR GROUP LIMITED Telecommunication Services
BGG           BLACKGOLD INTERNATIONAL HOLDINGS LIMITED                    Energy 
```

但我们想要

```
BGA BEGA CHEESE LIMITED                                Food Beverage & Tobacco
BHP BHP BILLITON LIMITED                               Materials
BGL BIGAIR GROUP LIMITED                               Telecommunication Services
BGG BLACKGOLD INTERNATIONAL HOLDINGS LIMITED           Energy 
```

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-10-02T04:08:41.627

您可以在大小要求前加上`-`左对齐：

```
sys.stdout.write("%-6s %-50s %-25s\n" % (code, name, industry)) 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-10-02T04:24:49.530

此版本使用[str.format](http://docs.python.org/library/stdtypes.html#str.format)方法。

**Python 2.7 及更新版本**

```
sys.stdout.write("{:<7}{:<51}{:<25}\n".format(code, name, industry)) 
```

**Python 2.6 版本**

```
sys.stdout.write("{0:<7}{1:<51}{2:<25}\n".format(code, name, industry)) 
```

**更新**

以前，文档中有一条关于将来从语言中删除 % 运算符的声明。此声明[已从 docs](https://stackoverflow.com/a/23381153/1699750)中删除。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-10-02T04:05:08.727

```
sys.stdout.write("%-6s %-50s %-25s\n" % (code, name, industry)) 
```

在旁注中，您可以使用`*-s`

```
>>> d = "%-*s%-*s"%(25,"apple",30,"something")
>>> d
'apple                    something                     ' 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2017-12-12T22:44:42.160

我绝对更喜欢该`format`方法，因为它非常灵活，可以通过定义`__format__`or`str`或`repr`表示轻松地扩展到您的自定义类。为了简单起见，我`print`在以下示例中使用，可以将其替换为`sys.stdout.write`.

> **简单示例：**对齐/填充

```
#Justify / ALign (left, mid, right)
print("{0:<10}".format("Guido"))    # 'Guido     '
print("{0:>10}".format("Guido"))    # '     Guido'
print("{0:^10}".format("Guido"))    # '  Guido   ' 
```

`align`我们可以在指定的`^`旁边添加一个填充字符以`<`用`>`任何其他字符替换空格

```
print("{0:.^10}".format("Guido"))    #..Guido... 
```

> **多输入示例：**对齐和填充多个输入

```
print("{0:.<20} {1:.>20} {2:.^20} ".format("Product", "Price", "Sum"))
#'Product............. ...............Price ........Sum.........' 
```

> **高级示例**

如果您有自定义类，则可以按如下方式定义它`str`或表示：`repr`

```
class foo(object):
    def __str__(self):
        return "...::4::.."

    def __repr__(self):
        return "...::12::.." 
```

现在您可以使用`!s`(str) 或`!r`(repr) 告诉 python 调用那些定义的方法。如果没有定义，Python 默认 `__format__`也可以被覆盖。x = 富（）

```
print "{0!r:<10}".format(x)    #'...::12::..'
print "{0!s:<10}".format(x)    #'...::4::..' 
```

资料来源：Python Essential Reference，David M. Beazley，第 4 版

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2019-02-09T09:45:09.670

**使用Python 3.6**中新的和流行的**f 字符串**，我们是这样左对齐的，比如一个具有 16 个填充长度的字符串：

 **```
string = "Stack Overflow"
print(f"{string:<16}..")
Stack Overflow  .. 
```

如果您有可变填充长度：

```
k = 20
print(f"{string:<{k}}..")
Stack Overflow      .. 
```

**f弦**更紧凑。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-10-02T04:06:41.223

使用`-50%`而不是`+50%`它们将左对齐..

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-05-10T07:39:47.450

一个更易读的替代解决方案：
`sys.stdout.write(code.ljust(5) + name.ljust(20) + industry)`

请注意，它`ljust(#ofchars)`使用固定宽度的字符，并且不会像其他解决方案那样动态调整。

（另请注意，`+`在现代 Python 中，字符串添加 with 比过去快得多，但如果您仍然出于习惯更喜欢该方法，您可以换掉`+`with ）`''.join(...)`

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-11-12T17:14:02.477

这个在我的python脚本中工作：

```
print "\t%-5s %-10s %-10s %-10s %-10s %-10s %-20s"  % (thread[0],thread[1],thread[2],thread[3],thread[4],thread[5],thread[6]) 
```**

# c++ - C++ 指针向量，添加引用变量

> ID：12684374
> 
> 赞同：0
> 
> 时间：2012-10-02T04:03:50.977
> 
> 标签：c++

我有一个指向对象的指针向量：

```
vector<Foo*> bar; 
```

在一个方法中，我得到了一个 Foo 对象，需要将它添加到向量中。这是我目前的尝试：

```
void push(const Foo &a){
bar.insert(bar.begin(), a);
} 
```

我知道这不起作用，因为`a`作为参考传递，但我似乎无法获得`a`要添加到的指针`bar`。

如何添加`a`到向量中`bar`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T04:09:44.613

您不能将对象放入指针容器中。

如果要放入对象，则需要一个对象容器：

```
vector<Foo> bar; 
```

在这种情况下，所有对象必须属于同一类型；如果`Foo`实际上是一个基类，并且您想要存储各种不同的派生类型，那么您将需要存储指针。

如果你想要一个指针容器，那么你需要在其中放置一个指针：

```
bar.insert(bar.begin(), &a); 
```

在这种情况下，您需要注意对象的生命周期，并确保在对象被销毁后不使用指针。[智能指针](https://stackoverflow.com/questions/106508)可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T04:06:21.793

添加的地址`a`。指针存储地址，这就是它们指向某物的方式。

```
bar.insert(bar.begin(), &a); 
```

我假设您有充分的理由使用指针，但请确保`a`传入的不是临时的，并且您传入的对象比向量的寿命长，这样您就不会得到一个悬空指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T04:06:31.397

如果我错了，请纠正我，但`a`不是该代码中的指针，即使它是通过引用传递的。您应该能够在其上使用 & 来获取它的地址，对吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T04:08:49.380

取地址即可`a`。引用实际上就是一个引用，因此获取它的地址实际上会产生它所引用的地址。

```
void push(const Foo& a)
{
    bar.insert(bar.begin(), &(a));
} 
```

# assets - TypeScript 资产管理器

> ID：12684379
> 
> 赞同：3
> 
> 时间：2012-10-02T04:04:31.663
> 
> 标签：assets, typescript

我使用 node.js 连接/表达。

有谁知道支持动态编译和缩小 TypeScript 源代码的资产管理器？

知道如何以编程方式调用编译器吗？

我一直在使用建立在[Snockets](https://github.com/TrevorBurnham/snockets)之上的[connect-assets](https://github.com/TrevorBurnham/connect-assets)。**一旦我弄清楚如何编译.ts**资源，实现起来应该不会那么难。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:29:03.773

通过阅读 tsc.js 代码，看起来有一个`TypeScript.TypeScriptCompiler(outfile, errout, new TypeScript.NullLogger(), this.compilationSettings);`可以挂钩的函数。代码在 Codeplex 上，在 Apache 许可下，它是模块化的。由于 TypeScript 可以编译为以 CommonJS 模块为目标，因此将其破解为 express 应该相当简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:44:30.450

还没有一个完整的答案，但我发现了这个项目：它公开了 TypeScript 编译器。

[https://bitbucket.org/nxt/node-typescript-wrapper](https://bitbucket.org/nxt/node-typescript-wrapper)**

# c - 读取字符串中的每个单词并用 C 在不同行上打印每个单词的函数

> ID：12684380
> 
> 赞同：0
> 
> 时间：2012-10-02T04:04:33.207
> 
> 标签：c

到目前为止，这是我的代码，我仍然需要弄清楚如何添加`'\0'`到字符串的末尾并将 nextindex 推进到下一个单词的开头。

```
 * inputs: str - the string,
 * if str is NULL, return the index of the next word in the string
 * AND place a '\0' at the end of that word.
 */
int nextword(char *str)
{
    // create two static variables - these stay around across calls
    static char *s;
    static int nextindex;
    int thisindex;
    // reset the static variables
    if (str != NULL)
    {
        s = str;
        thisindex = 0;
        // TODO:  advance this index past any leading spaces
        while (s[thisindex]=='\n' || s[thisindex]=='\t' || s[thisindex]==' '                )
          thisindex++;  

    }
    else
    {
        // set the return value to be the nextindex
        thisindex = nextindex;
    }
    // if we aren't done with the string...
    if (thisindex != -1)
    {
        // TODO: two things
        // 1: place a '\0' after the current word
        // 2: advance nextindex to the beginning
        // of the next word

    }
    return thisindex;
} 
```

我想要以下代码

```
char *str = "Welcome everybody! Today is a beautiful day\t\n";
int i = nextword(str);
while(i != -1)
{
    printf("%s\n",&(str[i]));
    i = nextword(NULL);
} 
```

输出

```
Welcome 
everybody!
Today 
is
a 
beautiful
day 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T04:42:12.447

当您的代码中已经包含所需的操作时，我真的不明白您为什么要寻求帮助：

```
 // TODO: two things
    // 1: place a '\0' after the current word
    // 2: advance nextindex to the beginning
    // of the next word 
```

所以让我们分解一下。

1.  您需要搜索您的字符串，直到找到一个空格。您已经有一个执行相反操作的循环。您将单词后面的字符替换为`'\0'`. 小心不要跑过字符串的末尾。

2.  我认为数字 2 不需要解释，只是说您需要确保如果您发现自己位于输入字符串的末尾（在上面的数字 1 中），则设置`nextindex`为 -1。

# ruby-on-rails - 使用 validates_timeliness gem 时出现异常

> ID：12684383
> 
> 赞同：0
> 
> 时间：2012-10-02T04:05:37.090
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation

自从开始使用 validates_timeliness gem 以来，我经常收到以下异常

```
 Message undefined method `<' for nil:NilClass
    Location    /client_issue/create?client_id=15285
    Action  create
    Controller  client_issue
    Query   client_id=15285
    Method  POST
    SSL true 
```

如果有人输入诸如 2012 年 9 月 28 日之类的日期，则会发生异常。如果他们使用正确的三个字母月份（即 2012 年 9 月 28 日），则没有问题。事实上，任何无效的月份名称都会导致异常，例如 28 bjhg 2012。

这是堆栈跟踪的顶部

```
 /shared/bundle/ruby/1.8/gems/timeliness-0.3.6/lib/timeliness/parser.rb:142:in `fast_date_valid_with_fallback'
    /shared/bundle/ruby/1.8/gems/timeliness-0.3.6/lib/timeliness/parser.rb:24:in `make_time'
    /shared/bundle/ruby/1.8/gems/timeliness-0.3.6/lib/timeliness/parser.rb:17:in `parse'
    /shared/bundle/ruby/1.8/gems/validates_timeliness-3.0.14/lib/validates_timeliness/attribute_methods.rb:49:in `start_date='
    /shared/bundle/ruby/1.8/gems/activerecord-3.2.8/lib/active_record/attribute_assignment.rb:85:in `send'
    /shared/bundle/ruby/1.8/gems/activerecord-3.2.8/lib/active_record/attribute_assignment.rb:85:in `assign_attributes' 
```

我的模型模型的相关位如下所示：

```
 class ClientIssue < PauaServiceTable
      validates_date :start_date ,:allow_blank => true 
       ...
    end 
```

我的 gem 初始化程序包含以下内容：

```
 config.restriction_shorthand_symbols.update(
      :now   => lambda { Time.current },
      :today => lambda { Date.current }
     )
     config.parser.remove_formats(:date, 'm/d/yy')
     config.parser.remove_us_formats
     config.parser.use_euro_formats 
```

我不明白为什么我会遇到异常。我应该能够通过任何旧垃圾并得到无效的日期消息，而不是例外。我有什么设置错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:06:27.343

您正在使用`validates_timeliness`提供`validates_date`方法的`timeliness`gem 和引发错误的 gem。

您可能会使用其中一个，而不是两者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:06:33.307

问题似乎是及时性宝石的问题。[在这里](https://github.com/adzap/validates_timeliness/issues/84)查看我的问题的答案

但是，由于任何不正确的月份名称都会导致异常（例如 28 sap 2012），因此也会引发异常。我决定手动验证日期，否则我的用户将一直遇到异常。

# discrete-mathematics - 用 4 种颜色着色房子

> ID：12684385
> 
> 赞同：1
> 
> 时间：2012-10-02T04:06:05.213
> 
> 标签：discrete-mathematics

我被困在这个问题上：

> 假设没有两个连续的房子可以有相同的颜色（红色、绿色、蓝色或白色），那么 N 个房子在一个圆圈中可能排列的数量是多少？

谁能给我有关如何解决它的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:33:48.180

我会试一试：可能的排列数=（排列数）- 4 *（都具有相同的颜色）- 4 *（4个元素中相邻3个房屋的组合数）- 4 *（组合数4 个元素中的 2 个房屋）

# xcode - 升级到 OSX Mountain Lion 是否对使用 Xcode 进行开发有任何注意事项？

> ID：12684386
> 
> 赞同：1
> 
> 时间：2012-10-02T04:06:09.703
> 
> 标签：xcode, osx-mountain-lion

就像标题所说的那样，在切换到 Mountain Lion 之前，Xcode 开发人员应该注意什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T01:35:40.060

这回答了你的问题了吗？

[关联](http://benjaminfleischer.com/2012/08/10/caveats-for-the-developer-when-upgrading-mac-osx-to-mountain-lion/)

# javascript - jsp代码未在backbone.js视图中执行

> ID：12684390
> 
> 赞同：3
> 
> 时间：2012-10-02T04:06:26.103
> 
> 标签：javascript, jquery, jsp, backbone.js, backbone-views

我正在尝试从我的主干视图执行 jsp 代码。我从我的 Html 调用服务器端 api，如下所示

## index.jsp（sample.js包含在这个jsp中）

```
%@ page contentType="text/html;charset=UTF-8"
         import="foo.*,java.util.List"

%>
<%

            Foo foo = new Foo();
            List<XYZ> xyzList = foo.getList();

%> 
```

我正在使用骨干框架。我的js代码如下。

## 示例.js

```
SampleView = Backbone.ModalView.extend(
        {
        name: "SampleView",
        model: SomeModel,
        templateHtml : "<div ><span>Search </span>" +
                "<table border='1'>"+
                "<thead>"+
                "<tr>"+
                        "<td></td>"+
                        "<th>header1</th>"+
                        "<th>header2</th>"+
                        "<th>header3</th>"+
                "</tr>"+
                "</thead>"+
                "<tr>"+
                     "<% for(XYZ xyz: xyslist ){   %>"+
                     "<td><input type='checkbox' value='<%= xyz.getName()%>'></td>"+
                     "<td name='selected'><%= xyz.getName()%></td>"+
                     "<td></td>"+
                     "<td></td>"+
                    "<% } %>"+
                "</tr>"+
                "<tr>"+
                "<td><input type='checkbox' value='test'></td>"+
                     "<td name='selected'>test</td>"+
                     "<td></td>"+
                     "<td></td></tr>"+
                "</table><button id='select'>Select</button></div>",

                initialize: function(){
                _.bindAll( this, "render");
                                this.template = _.template( this.templateHtml);
                        },
        events: {
                "click #select": "select"
                        },
                select: function(){
                         //implementation

                },        
        render: function(){
                                $(this.el).html( this.template());
                return this;
            }
    }); 
```

问题是，它不执行jsp代码。它仅显示硬编码的“测试”复选框，不会从服务器端检索列表。如果我在这里遗漏了什么，你能告诉我吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T05:05:09.023

JSP 中使用的 <% 和 %> 标记也被下划线模板引擎使用。当您没有任何变量要提供时，为什么要在视图中使用模板？

在尝试运行您的代码时，下划线模板引擎给了我一个“意外标识符”，因为 <% 和 %> 不包含有效的 JavaScript 代码供它处理。

代替

```
$(this.el).html( this.template()); 
```

你应该直接插入 HTML 字符串，像这样

```
$(this.el).html(this.templateHtml); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-11T11:35:48.420

您已经使用 Underscore.js 更改了 _.templateSettings

例如 {{ your_variable }} 和没有更多 <%= yourVariable %>

```
_.templateSettings = {
    interpolate: /\{\{(.+?)\}\}/gim,
    evaluate: /\{\{(.+?)\}\}/gim,
    escape: /\{\{\-(.+?)\}\}/gim
};

var Auto =  Backbone.Model.extend     defaults: {
        color : 'red',
        name  : 'ferrari',
        year  : 2008
    }
});

var AutoView = Backbone.View.extend({
    tagName : 'li',

    template: _.template('<strong>'
        +'{{ year }}</strong>{{ name }}'),

    initialize : function(){
        this.render();
    },

    render : function(){    
        this.$el.html( this.template( this.model.toJSON() ) );
    }
});

var auto = new Auto();
var autoView = new AutoView({model:auto}); 
```

# postgresql - 循环遍历数组参数而不使用 foreach

> ID：12684397
> 
> 赞同：0
> 
> 时间：2012-10-02T04:07:52.097
> 
> 标签：postgresql, foreach, postgresql-9.1, plpgsql, postgresql-8.4

```
CREATE OR REPLACE FUNCTION fnMyFunction(recipients recipient[]) ...

    FOREACH v_recipient IN ARRAY recipients
       LOOP
          v_total := v_total + v_recipient.amount;
          INSERT INTO tmp_recipients(id, amount)
          VALUES(v_recipient.id, v_recipient.amount::numeric(10,2));
    END LOOP;

... 
```

这在开发环境中效果很好，但刚刚发现发布环境是 8.4，它似乎不支持 FOREACH 构造。我希望有人可以通过数组参数集并以类似的方式使用数组中的值来避免完全重构，从而对循环的替代实现有所了解。

我收到的错误消息是：

> 错误：“FOREACH”SQL 状态或附近的语法错误：42601 上下文：PL/PgSQL 函数“fnMyFunction”中的 SQL 语句靠近行 ##

db 环境位于共享主机上，因此我没有平台升级选项。
我标记了 postgres 9.1 和 8.4，因为该功能在 9.x 中正常工作，但在 8.4 中失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T04:46:54.793

使用[`unnest`](http://www.postgresql.org/docs/current/static/functions-array.html)；我认为是在 8.4 中。未经测试，但我认为是正确的：

```
FOR v_recipient IN SELECT vr FROM unnest(recipients) x(vr)
LOOP
....
END LOOP; 
```

如果你不能这样做，你将不得不`array_length`使用对数组的索引来循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T23:23:24.810

按照你的方式，你一次执行一个`INSERT`。对于关系数据库，基于集合的操作通常比一次遍历一个记录要快得多*。*

这应该更简单、更快，并且适用于 PostgreSQL 8.4 或更高版本：

```
INSERT INTO tmp_recipients(id, amount)
SELECT (r.col).*
FROM   (SELECT unnest(recipients) AS col) r 
```

这假定数组的复合基类型由`(id, amount)`- 按此顺序 - 并且`amount`可以强制转换为的类型`numeric(10,2)`。否则，或者只是为了确定，更明确：

```
INSERT INTO tmp_recipients(id, amount)
SELECT (r.col).id, (r.col).amount::numeric(10,2)
FROM   (SELECT unnest(recipients) AS col) r 
```

周围的括号`(r.col)`不是可选的。它们需要消除复合类型的语法歧义。

# javascript - 使用 Javascript 扩张和侵蚀 SVG 形状

> ID：12684398
> 
> 赞同：0
> 
> 时间：2012-10-02T04:08:02.070
> 
> 标签：javascript, svg, geometry

编辑：

我终于找到了一种侵蚀和扩张多边形（偏移）的方法，以便使用 Clipper 库创建新几何： [https ://sourceforge.net/projects/jsclipper/](https://sourceforge.net/projects/jsclipper/)

Javascript Clipper 的现场演示：http: [//jsclipper.sourceforge.net/5.0.2.1/main_demo.html](http://jsclipper.sourceforge.net/5.0.2.1/main_demo.html)

Clipper 只能处理多边形或多多边形（例如带孔的多边形），因此要与其他 SVG 格式的图形对象一起工作，必须将它们转换为直线。至少路径很容易使用`path.getTotalLength()`和`path.getPointAtLength()`（[http://whaticode.com/2012/02/01/converting-svg-paths-to-polygons/](http://whaticode.com/2012/02/01/converting-svg-paths-to-polygons/)）转换为行。

另一种可能性是使用这种类似的技术（不创建新几何）： [https ://stackoverflow.com/a/12723835/1691517](https://stackoverflow.com/a/12723835/1691517)

* * *

有什么方法可以通过 Javascript 腐蚀和扩张 SVG 中的形状？

我有以下 SVG 示例：http: [//jsfiddle.net/timo2012/2S4Kt/1/](http://jsfiddle.net/timo2012/2S4Kt/1/)

共有三种形状，蓝色是原始的，绿色是侵蚀的（变细的）和红色的是膨胀的（加粗的）。它们是在 Illustrator 中制作的。

我测试过侵蚀和扩张过滤器，但效果不是很好： [https ://dvcs.w3.org/hg/FXTF/raw-file/tip/filters/examples/feMorphology.svg](https://dvcs.w3.org/hg/FXTF/raw-file/tip/filters/examples/feMorphology.svg)

在互联网上搜索了几个小时后，我只找到了有关位图图像侵蚀和膨胀的示例，但没有找到有关矢量形状的示例。

我已经成功地在 Python 中使用 Shapely（[http://toblerity.github.com/shapely/manual.html](http://toblerity.github.com/shapely/manual.html)）扩张和侵蚀 SVG 多边形，方法是通过 Ajax 调用向 PHP 脚本发送路径点，从而使 system() 调用 Python 脚本，但是这种方法很慢，并且需要服务器完成可以在客户端完成的工作。

这是我在 Python 中进行膨胀和腐蚀的代码（如您所见，它很短）：

```
#!/usr/bin/python26

from shapely.geometry import Polygon
from shapely.geometry import MultiPolygon

import sys

if len(sys.argv)>2:
  inset=eval(sys.argv[1])
  coords=eval(sys.argv[2])
else:
  sys.exit()

bowtie = Polygon(coords)
clean = bowtie.buffer(inset)
clean = clean.simplify(1, preserve_topology=False)
if clean.length>0:
  if clean.geom_type=="MultiPolygon":
    for n in range(0, len(clean)):
      print list(clean[n].exterior.coords)
      #print "\n"
  elif clean.geom_type=="Polygon":
    print list(clean.exterior.coords) 
```

还可以找到这个文件，它试图用数学术语定义扩张和腐蚀： [http ://en.wikipedia.org/wiki/Mathematical_morphology](http://en.wikipedia.org/wiki/Mathematical_morphology)

有一句话“二元形态学的基本思想是用一个简单的、预定义的形状探测图像，得出关于这个形状如何适合或错过图像中的形状的结论。这个简单的“探测”被称为结构元素，并且本身就是一个二值图像（即空间或网格的子集）。”

我假设这种方法可以用于变形矢量形状，但是如何......

编辑：回复中的一条评论提出了使用过滤器而不是创建新几何图形的可能问题：如果有人想将拖动手柄添加到多边形点，那么拖动手柄可能似乎在错误的位置。这是可以接受的，因为给人的印象是原始路径数据没有受到影响，这实际上是过滤器的情况，但是 - 经过进一步测试 - 证明质量是一个更大的问题。根据[这个](https://stackoverflow.com/a/12705125/1691517)和[这个](https://stackoverflow.com/a/12718568/1691517)SVG 过滤器使用矢量图形对象的像素表示而不是路径数据本身，这导致[看起来不太好看](https://stackoverflow.com/q/12702955/1691517)。

EDIT2：可能的解决方法：此页面中的一个答案使我使用可变宽度笔画和蒙版来实现此问题的美观解决方法。我做了一些测试并实现了类似[Adob​​e Illustrator 的 Offset Path Effect](https://stackoverflow.com/a/12723835/1691517)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:26:34.430

你真的测试过 SVG 的原生过滤器吗？这看起来足够接近：

```
<svg width="612" height="792" viewBox="0 0 612 792" xmlns="http://www.w3.org/2000/svg">

  <defs>
    <filter id="erode">
      <feMorphology operator="erode" in="SourceGraphic" radius="12" />
    </filter>
    <filter id="dilate">
      <feMorphology operator="dilate" in="SourceGraphic" radius="8" />
    </filter>
      <path id="original_path" d="M193.193,85c23.44,0.647,45.161,0.774,62,12c1.596,1.064,12,11.505,12,13
    c0,2.941,8.191,5.669,3,12c-3.088,3.767-6.01-0.758-11-1c-19.56-0.948-33.241,12.296-33,34c0.163,14.698,8.114,24.492,4,41
    c-1.408,5.649-6.571,15.857-10,21c-2.484,3.726-7.898,10.784-12,13c-4.115-11.677,2.686-27.29-6-35c-6.693-5.942-20.021-4.051-26,1
    c-13.573,11.466-11.885,41.492-7,58c-5.8,1.772-18.938,7.685-23,12c-6.752-10.805-15.333-17.333-24-26c-3.307-3.307-9.371-12-15-12
    c-16.772,0-13.963-15.741-13-28c1.283-16.324,1.727-28.24,4-42c1.276-7.72,8-16.411,8-23c0-7.416,15.945-29,23-29
    c4.507,0,17.678-8.701,24-11C164.853,90.76,178.27,88.546,193.193,85"/>
  </defs>
  <use xlink:href="#original_path" fill="#f00" filter="url(#dilate)"></use>    
  <use xlink:href="#original_path" fill="blue"></use>
  <use xlink:href="#original_path" fill="#1CFF00" filter="url(#erode)"></use>    
</svg> 
```

过滤器上有一些剪裁`dilate`似乎无法通过增加过滤器区域来解决，但除此之外它非常接近您的插画渲染。当然胜过渲染服务器端。

[http://jsfiddle.net/5Qv5v/](http://jsfiddle.net/5Qv5v/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T08:05:50.470

你可以通过结合使用不同的笔划宽度来获得你想要的东西`clip-path`or `mask`。这是一个[示例](http://xn--dahlstrm-t4a.net/svg/presentations/svgopen2012/presentation/)，有关它的构造方式的一些解释请参见[此处](http://xn--dahlstrm-t4a.net/svg/presentations/svgopen2012/presentation/index.html#/0/2)和[此处](http://xn--dahlstrm-t4a.net/svg/presentations/svgopen2012/presentation/index.html#/0/2)（向上或向下箭头以查看该示例中的其他幻灯片）。

但是它并没有给你新的几何，只是看起来像新的几何。

# double - 双类型 DependencyProperties 在 WinRT 中有错误的值

> ID：12684399
> 
> 赞同：0
> 
> 时间：2012-10-02T04:08:11.847
> 
> 标签：double, windows-runtime, dependency-properties

我有一个具有双类型依赖属性的自定义控件。当我从 XAML 设置此属性时，假设我将 12.34 作为此属性的值。属性更改回调，将值设为 12.3400001525879，实际值具有尾随垃圾十进制值。

（这不是 Silverlight 的情况）

仅当我们通过 XAML 设置值时才会发生这种情况，并且仅当我们有多个十进制值时才会发生这种情况。

```
 public double Value
    {
        get { return (double)GetValue(ValueProperty); }
        set { SetValue(ValueProperty, value); }
    }

    // Using a DependencyProperty as the backing store for Value.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty ValueProperty =
        DependencyProperty.Register("Value", typeof(double), typeof(TextBoxExt), new PropertyMetadata(null, new PropertyChangedCallback(OnValueChanged)));

    private static void OnValueChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        System.Diagnostics.Debug.WriteLine(e.NewValue);//Not priniting the exact value.
    } 
```

有没有人面临同样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:15:37.463

`float`并非所有十进制值都可以用 和等固定宽度二进制浮点类型精确表示`double`。不能精确表示的十进制值（如 12.34）将四舍五入为可表示的最接近的值。[您可以在 David Goldberg 的优秀文章“每个计算机科学家应该了解的浮点算术知识”](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)中阅读有关浮点类型的所有内容。

在这种情况下，您提到的实际值表明（a）值 12.34 被解析为 a`float`或（b）它在某个时候被转换为 a `float`。这有点奇怪，但可能是设计使然，也可能是错误。无论是否是错误，如果您在软件中使用浮点类型，则需要考虑潜在的舍入误差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:36:54.377

我可以在我的测试中看到同样的问题。看起来显然像木星中的一个错误。我会在 MSDN 论坛上报告它。

# ruby-on-rails-3.2 - 带有主题的 Rails 资产管道

> ID：12684400
> 
> 赞同：5
> 
> 时间：2012-10-02T04:08:22.167
> 
> 标签：ruby-on-rails-3.2, asset-pipeline

我有一个应用程序，允许用户为他们的页面选择一个主题。有几个不同的主题供他们选择。

每个页面的 HTML 结构与 div 上的相同类名完全相同。CSS 因主题而异。当用户选择一个主题时，我将主题 id 存储在数据库中，并在访问页面时对其进行查询，并在以下位置加载适当的 CSS 文件`application_layout.html.erb`：

```
<%= yield(:theme_style) %> 
```

在 上`users_page.html.erb`，我使用以下命令获取适当的文件：

```
<%= provide(:theme_style, "theme_styles/#{@user.style.style_filename_file_name}") %> 
```

因为页面结构没有改变，所以不要将 CSS 文件一起编译到一个大的 CSS 文件中，否则最后一个主题将是唯一可用的主题，因为它将覆盖所有以前的样式，这一点很重要。如何让 Rails 处理主题文件？

在`production.rb`，我有，`config.assets.precompile += ['theme_styles/basic.css', 'theme_styles/two-column.css']`但这似乎并没有起到作用，因为它告诉我它没有预编译。

我似乎无法在任何地方找到足够的信息来让我朝着正确的方向前进，我查看了博客、SO 问题和 Rails 文档。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-25T22:30:13.607

我知道这是一个旧的，但我想我会回答我所做的，以防它帮助其他人。我在我的应用程序中有类似的需求，并且在没有找到很多结果之后，并且在由自定义选择器控制的一个 css 文件中使用它们时遇到了 IE 最大数量的选择器错误，我最终走上了让每个主题不同的路线通过创建如下所示的文件夹结构来创建 CSS 文件：

## 整体文件夹结构：

*   /应用程序/资产/样式表/
*   /应用程序/资产/样式表/全部/
*   /app/assets/stylesheets/theme-1/
*   /app/assets/stylesheets/theme-2/
*   等等

在 app/assets/styleshseets 我放了 application.css.scss （或者如果你不使用 sass 就只放 css ）这个文件有一个 require self 和一些我在所有网站上使用的 mixin ，但就是这样

```
 *= require_self 
```

展望未来，每个主题都有一个 css 文件夹，所有主题都有一个文件夹，每个都有一个清单（清单放在主 /stylesheets 文件夹中）。正确设置最终需要做一些工作，但是一旦配置就可以像魅力一样工作，不再为具有不同主题的人提供重叠或无关的 css，[也解决了 IE 最大选择器问题](http://blogs.msdn.com/b/ieinternals/archive/2011/05/14/internet-explorer-stylesheet-rule-selector-import-sheet-limit-maximum.aspx)。

# 更多细节

## 所有共享css的所有文件夹

/应用程序/资产/样式表/全部/

所以把你在所有主题上使用的任何css文件放在那里。我把我的项目的引导程序放在那里，但你可以把任何共享的 CSS 放在那里。那个清单是……

```
 *= require_self
 *= require_tree ./all 
```

然后是您的主题，每个主题都有自己的文件夹：

/app/assets/stylesheets/theme-1/

它很明显：

```
 *= require_self
   *= require_tree ./theme-1 
```

因此，您的第二个主题将是相同的（文件夹名称和清单中的 2 而不是 1）。

## 使这些工作在资产管道中

在您的 production.rb 文件中添加以下内容

```
 config.assets.precompile += %w( application-all.css application-theme-1.css application-theme-2.css, etc.) 
```

我确实将我的主题存储到一个客户端站点并动态提供服务，这也允许我在运行时进行更改。在我的一个控制器（或应用程序，如果这是一个站点范围的设置）：

```
class MyController < ApplicationController
  layout :serve_layout
...
  def serve_layout
    #do what you need to call your layout / theme...    
  end 
```

希望这可以帮助其他困在这条船上的人。

# mysql - 如何在 UNION mysql 查询中使用 ORDER BY 和 LIMIT

> ID：12684407
> 
> 赞同：0
> 
> 时间：2012-10-02T04:09:13.327
> 
> 标签：mysql, union

我有一个小问题，我有一个这样的 MySQL 查询代码：

```
SELECT a.id, b.name AS itemName, b.slug AS itemSlug FROM table_idx a
INNER JOIN table_product b ON b.id = a.targetid AND a.target='PRODUCT'
WHERE a.memberid=$memberid
UNION
SELECT a.id, c.name AS itemName, c.slug AS itemSlug FROM table_idx a
INNER JOIN table_news c ON c.id = a.targetid AND a.target='NEWS'
WHERE a.memberid=$memberid
UNION
SELECT a.id, d.name AS itemName, d.slug AS itemSlug FROM table_idx a
INNER JOIN table_promo d ON d.id = a.targetid AND a.target='PROMO'
WHERE a.memberid=$memberid 
```

如何`ORDER BY a.id DESC LIMIT 0,10`在上面的查询中添加？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T04:13:59.537

用另一个选择包裹它。

```
SELECT * FROM (
SELECT a.id, b.name AS itemName, b.slug AS itemSlug FROM table_idx a
INNER JOIN table_product b ON b.id = a.targetid AND a.target='PRODUCT'
WHERE a.memberid=$memberid
UNION
SELECT a.id, c.name AS itemName, c.slug AS itemSlug FROM table_idx a
INNER JOIN table_news c ON c.id = a.targetid AND a.target='NEWS'
WHERE a.memberid=$memberid
UNION
SELECT a.id, d.name AS itemName, d.slug AS itemSlug FROM table_idx a
INNER JOIN table_promo d ON d.id = a.targetid AND a.target='PROMO'
WHERE a.memberid=$memberid
) AS t ORDER BY t.id DESC LIMIT 0,10 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T04:12:40.223

除非您的意图是`ORDER BY`和`LIMIT`之前的每个查询`UNION`，否则只需添加

```
ORDER BY id DESC LIMIT 0,10 
```

在查询的底部。

# macos - Mac osx 上的 RInside 链接

> ID：12684408
> 
> 赞同：0
> 
> 时间：2012-10-02T04:09:25.653
> 
> 标签：macos, r, rinside

嗨，我正在尝试在 mac osx 上编译和运行简单的 RInside 示例。我正在使用 R 安装形式的 macports 和通过 R 安装的 RInside 以及所有库的最新版本，这是我的 R 信息

```
R version 2.15.1 (2012-06-22) -- "Roasted Marshmallows"
Copyright (C) 2012 The R Foundation for Statistical Computing
Platform: x86_64-apple-darwin11.4.0/x86_64 (64-bit) 
```

这是我尝试编译示例的方法

```
 g++-mp-4.7 -I/opt/local/lib/R/library/RInside/include/
    -I/opt/local/lib/R/library/Rcpp/include/ -I/opt/local/lib/R/include/ -L/opt/local/lib/R/library/RInside/libs/ -L/opt/local/lib/R/library/Rcpp/libs/ -lRInside -lRcpp test.cpp -o test 
```

这是我的错误

```
In file included from /opt/local/lib/R/library/Rcpp/include/RcppCommon.h:155:0,
                 from /opt/local/lib/R/library/Rcpp/include/Rcpp.h:27,
                 from /opt/local/lib/R/library/RInside/include/RInsideCommon.h:31,
                 from /opt/local/lib/R/library/RInside/include/RInside.h:26,
                 from thread_safe_test.cpp:5:
/opt/local/lib/R/include/R.h:34:21: fatal error: Rconfig.h: No such file or directory
compilation terminated. 
```

有什么建议么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:42:06.607

为什么不使用[r-project.org的版本并从](http://www.r-project.org)[http://r.research.att.com/tools/](http://r.research.att.com/tools/)下载编译器等？这是我认为的首选方法。对我来说，这种方法有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:24:43.720

我记得，你必须在 OS X 上从源代码编译 RInside。尝试 rcpp-devel 列表的档案以获取更多信息。

# ruby - 将 ruby 连接到 sql server 2012 express

> ID：12684416
> 
> 赞同：0
> 
> 时间：2012-10-02T04:10:42.820
> 
> 标签：ruby, sql-server

我想将 ruby​​ 连接到 sql server 2012 express。经过研究，我想出了这篇文章。唯一的问题是[这篇文章](http://rubydoc.info/gems/sql_server/0.1.1/frames)是从 2010 年开始的。是否有任何新文章解释了如何进行连接。是不是很难找到一个最近的。我只需要能够连接到 Sql Server 2012。ruby 和 Sql Server 2012 Express 都在我运行 Windows 7 的笔记本电脑上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:02:47.687

使用 Ruby On Rails 时，您应该查看 ActiveRecord SqlServer 适配器

*   [https://github.com/rails-sqlserver/activerecord-sqlserver-adapter](https://github.com/rails-sqlserver/activerecord-sqlserver-adapter)。

它使用 TinyTDS 作为其低电平连接适配器。但您也可以独立使用 TinyTDS

*   [https://github.com/rails-sqlserver/tiny_tds](https://github.com/rails-sqlserver/tiny_tds)。

两者都经过充分测试和记录。我在我们的生产环境中使用它们。

# php - 使用 PDO fetchAll::fetch_assoc 将数据添加到 php 变量

> ID：12684417
> 
> 赞同：0
> 
> 时间：2012-10-02T04:10:45.807
> 
> 标签：php, sql, pdo

好的，这可能会让人感到困惑，因为我还没有完全弄清楚如何完美地解释这一点，但我只会展示代码来比我用文字更好地解释。

基本思想：我试图从查询中收集所有相关数据，将其分配给 PHP 变量，然后通过 json.encode 返回它，以便在需要使用 Javascript 的网站上使用。

所以这是我想要做的一个例子：

```
$stmt = $pdo->prepare("SELECT * FROM users WHERE uid= ?");
try {
    $stmt->execute(array($uid));
} catch (PDOException $e) {
    echo $e -> getMessage();  exit;
}

if(!$stmt->rowcount()){
    return false; exit;
}

$data = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

所以我此时显示 $data 并得到以下结果：

```
Array ( 
  [0] => Array (
            [uid] => 1 
            [pass] => *****
            [show_name] => Dave
            [email] => test@test.com
  ) ) 
```

这是我期望发生的:)

接下来我想将更多查询结果添加到“$data”。像这样：

```
 $stmt = $pdo->prepare("SELECT * FROM databank WHERE uid=?");
    try{
        $stmt->execute(array($uid));
    } catch (PDOException $e){
        echo $e -> getMessage();  exit;
    }   
$data .= $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

这就是它出错的地方......当我此时 echo/print_r $data 结果是：

```
 ArrayArray 
```

有人可以解释为什么会这样吗？以及我如何解决它：）

感谢您的时间！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T04:17:48.863

您将每个结果连接到 $data 就好像结果是字符串一样，但它们是数组；当强制将数组表示为字符串时，PHP 会生成“数组”，这不是您想要的。

在你的第一行之前，做

```
 $data = array(); 
```

代替你的最后一行，做

```
 $data[] = $stmt->fetchAll(PDO::FETCH_ASSOC) 
```

你应该得到

```
Array ( 
  [0] => Array (
            [uid] => 1 
            [pass] => *****
            [show_name] => Dave
            [email] => test@test.com
  ),
  [1] => Array (
            [uid] => 2
            [pass] => *****
            [show_name] => Joe
            [email] => test@test.com
  ),
  [...]
) 
```

在 $ 数据中。

希望这可以帮助！

# c++ - c++改变空间进入

> ID：12684420
> 
> 赞同：1
> 
> 时间：2012-10-02T04:11:03.217
> 
> 标签：c++, formatting, space, enter

我不知道这是否可能。

我有一个任务是用 C++ 将单词和短语翻译成猪拉丁语。最快的方法是让用户在每个单词后按回车键，但是如果不按回车键而不是空格键，这将导致无法输入连续的短语。

```
your
text
would
be
entered
like
this 
```

您的输出很容易是：

```
youway exttay ouldway ebay enteredway ikelay histay 
```

但是仍然将信息放入会很奇怪。

相反，我想强制程序将空格键视为回车键（回车）。

```
your text would be entered like this 
```

这样，每个单词都会与字符串分开输入我的数组，用户只需按回车键 1 次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T04:12:59.877

您可以执行以下操作：

1.  从用户输入中读取一行文本（可能有多个单词）
2.  将行拆分为单词
3.  将每个单词翻译成猪拉丁语
4.  打印单词，它们之间有空格

与其从“如何将这些键更改为其他含义”来考虑这一点，不如从“我如何才能最好地使用用户期望输入的内容”来考虑它。如果用户希望在单词之间输入空格（有意义），那么设计您的程序以便它可以处理这种输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T05:46:51.847

这是便宜的方法：

```
std::string in;
while (std::cin >> in)
  std::cout << piglatin(in) << char(std::cin.get()); 
```

`std::cin >> in`跳过输入流中的任何前导空格，然后用输入流中`in`的下一个以空格结尾的单词填充，将空格结尾留在输入流中。`char(std::cin.get())`然后提取该终止符（可能是空格或换行符）。while 循环由文件结尾终止。

只要你理解它，你就可以使用它。

添加：

这里有一个更好的方法来判断单词 read 是否以空格或换行符结尾：

```
#include <cctype>
char look_for_nl(std::istream& is) {
  for (char d = is.get(); is; d = is.get()) {
    if (d == '\n') return d;
    if (!isspace(d)) {
      is.putback(d);
      return ' ';
    }
  }
  // We got an eof and there was no NL character. We'll pretend we saw one
  return '\n';
} 
```

现在黑客看起来像这样：

```
std::string in;
while (std::cin >> in)
  std::cout << piglatin(in) << look_for_nl(std::cin); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T04:59:13.257

您可以将用户输入数据作为一行，因为这看起来很自然。

如果您在解析单词以一次操作一个单词时需要一些帮助，请尝试this other [question](https://stackoverflow.com/questions/236129/splitting-a-string-in-c)。

# c# - 我将如何获得将在当前状态下重新创建运行时对象的等效 C# 代码？

> ID：12684426
> 
> 赞同：1
> 
> 时间：2012-10-02T04:11:43.613
> 
> 标签：c#, serialization

是否有任何 .Net 库可以获取对象并将其序列化为 Stream，作为创建对象的 C# 代码？

```
Stream fs = ...;

CSharpFormatter formatter = new CSharpFormatter();

var p = new Person { Name = "Russ", Address = "1024 Oak St" };

formatter.Serialize(fs, p); 
```

在这结束时， fs 会得到一个这样的字符串：

```
new Person { Name = "Russ", Address = "1024 Oak St" }; 
```

我认为这样的事情对于从棘手的运行时案例编写单元测试非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:32:49.690

您可能会破解 JSON 序列化程序来执行此操作。给定您的 Person 对象，JSON 序列化器可能会返回如下内容：

```
{"name":"Russ","Address":"1024 Oak St"} 
```

从那里开始，它的使用`Split()`和`Replace()`接近你想要的东西相当简单：

```
{ Name = "Russ", Address = "1024 Oak St" } 
```

其余的只是装点门面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:35:31.450

只是部分答案，但您可以使用[System.CodeDom](http://msdn.microsoft.com/en-us/library/system.codedom.aspx)命名空间中的类来创建代码，例如[this example](http://msdn.microsoft.com/en-us/library/ms404245.aspx)，然后使用[CSharpCodeProvider](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx)类中的 GenerateCodeFromXXX 方法来发出 C#。

另一种方法是使用[T4 文本模板](http://msdn.microsoft.com/en-us/library/bb126445.aspx)，例如[本演练](http://msdn.microsoft.com/en-us/library/dd820614.aspx)。和反射，但它需要 Visual Studio。

# c# - 如何将联合通用列表转换为通用列表？

> ID：12684427
> 
> 赞同：0
> 
> 时间：2012-10-02T04:11:43.160
> 
> 标签：c#, .net, c#-4.0, lambda

我有两个已合并的通用列表。说 listA 和 listB，两者都是 type `List<SomeType>`。

```
listA.Union(listB); 
```

联合集的类型`System.Linq.Enumerable.UnionIterator<string>`为 ，与 不同`List<SomeType>`。

我试过铸造：

```
listA.Union(listB).ToList<SomeType>(); 
```

和

```
(List<SomeType>)listA.Union(listB); 
```

两者都失败了。我试图访问 ForEach()，以为我可以将结果添加到新列表中。.Foreach() 不可用。

我可以使用传统的 foreach 并将每个项目添加到`List<SomeType>`变量中。但是，是否有一个 lambda 语句可以在一行中进行转换，分配给一个类型的变量`List<SomeType>`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T04:26:54.897

您不必在`ToList`方法中显式转换 List。如果两个列表都是相同类型的，你可以简单地`ToList`在最后得到一个相同类型的列表。

```
List<MyClass> listA = new List<MyClass>();
List<MyClass> listB = new List<MyClass>();
List<MyClass> temp = listA.Union(listB).ToList(); //Just do ToList at the end. 
```

在 ToList 方法中显式指定类型也应该有效。我不确定为什么它不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:55:08.103

`Union``IEnumerable<T>`是interface 上的扩展方法，而不是 on `List<T>`，因此它不知道或不关心您正在尝试连接列表，因此除非您`ToList`明确调用，否则不会创建一个。

如果您想将一个列表“附加”到另一个列表，则可能需要使用`AddRange`方法。

# ios - 如果用户取消 Facebook 登录，如何返回应用程序？

> ID：12684428
> 
> 赞同：3
> 
> 时间：2012-10-02T04:11:42.957
> 
> 标签：ios, xcode, facebook

我正在处理 Facebook 登录。一切都很好，当我点击登录按钮时，它会带我进入 safari（或 FB 应用程序）并询问我是否登录 FB。

我的问题是如果我决定不登录并点击取消按钮，如何让 safari 返回我的应用程序？它目前在点击取消后将我带到我的 Facebook 主页并且没有用

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T09:19:04.497

我不知道如何完全按照你的建议去做，但你可以做的是创建另一个视图控制器，里面有一个 web 视图，顶部有一个导航栏，上面有一个取消按钮。这样他们就可以从应用程序内登录到 Facebook，因此他们不必在可能有点冗长的事情之间切换！它还允许使用“dismissModalViewController”或在 iOS6 中更改为任何内容的简单取消按钮。我相信这应该可行:)

# php - 访问命名空间公共函数中的私有值

> ID：12684429
> 
> 赞同：2
> 
> 时间：2012-10-02T04:11:50.190
> 
> 标签：php, namespaces

我有一个只需要计算一次的值。我不能用`const`它来声明它，因为我需要运行一些函数来最初计算。我希望能够以某种受保护的方式存储它并在（命名空间）全局函数中访问它。这样做的好模式是什么？这是我所拥有的：

**选项 1** - 效果很好，但仅适用于常量，所以我不能使用它：

```
<?php 
namespace my;

const PREFIX = 'example';

/**
 * my\get_prefix()
 */
function get_prefix () {
    return PREFIX;
} 
```

**选项 2** - 命名空间函数从预先配置的命名空间公共静态类访问值：

```
<?php 
namespace my;

class Hash {
    public static $prefix;

    public static function configure () {
        self::$prefix = call_user_func(function () {
            // calculate and return a string 
        });
    }
}

Hash::configure();

/**
 * my\get_prefix()
 */
function get_prefix () {
    return Hash::$prefix;
} 
```

**选项 3** - 类似于 #2，但此处配置运行第一次`get_prefix`被调用，并且每次都检查为字符串：

```
<?php 
namespace my;

class Hash {
    public static $prefix;
}

/**
 * my\get_prefix()
 */
function get_prefix () {
    if ( is_string(Hash::$prefix) )
        return Hash::$prefix;

    Hash::$prefix = call_user_func(function () {
        // calculate and return a string 
    });

    return Hash::$prefix;
} 
```

**选项 4** - 通过使用静态方法/私有 var 完全保护，但如果通过以下方式调用，则会添加额外的函数调用`my\get_prefix()`：

```
<?php 
namespace my;

class Hash {
    private static $prefix;

    public static function configure () {
        if ( isset(self::$prefix) ) return;
        self::$prefix = call_user_func(function () {
            // calculate and return a string 
        });
    }

    public static function get_prefix () {
        return self::$prefix;
    }
}

Hash::configure();

/**
 * my\get_prefix()
 */
function get_prefix () {
    return Hash::get_prefix();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:14:44.887

我会通过结合选项#3和#4（延迟加载）来解决它：

```
class Hash 
{
    private static $prefix;

    public static function getPrefix()
    {
        if (is_null(self::$prefix)) {
            // the value is not set yet, so generate it
            self::$prefix = function_that_generates_prefix();
        }
        return self::$prefix;
    }
}

$prefix = Hash::getPrefix(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T04:32:08.720

乍一看，这看起来是延迟加载的绝佳选择。

```
namespace My;

class Hash
{
    protected static $prefix;

    public static function getPrefix()
    {
        if (null === self::$prefix) {
            self::$prefix = calculate_and_return_a_string();
        }
        return self::$prefix;
    }
}

$prefix = My\Hash::getPrefix(); 
```

有几点需要注意。`My\Hash::$prefix`首先，我将from的可见性更改`private`为`protected`。一般来说，除非有很好的理由使用 ，否则`private`我更喜欢使用`protected`变量。

其次，您可能想要重新评估`My\Hash`类和`calculate_and_return_a_string()`函数之间的关系（您使用过`call_user_func`）。也许找到一种注入计算值的方法，这将使类与函数分离并消除额外的依赖关系。

最后，重新评估是否需要将它放在自己的类中可能是值得的。如果您只使用它来存储和注册单个变量，那么使用注册表或类似的东西可能会更好。当然，我看不到整个上下文，所以只有你会知道这是否适用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T05:07:05.860

天哪，我刚刚发现`static`关键字 to 可用于创建一个私有作用域，每次调用该函数时都可以重新访问该作用域：

```
<?php
namespace my;

/**
 * my\get_prefix()
 */
function get_prefix () {
    static $prefix; 
    if ( !isset($prefix) ) {
        // calculate $prefix (only runs once)
    }
    return $prefix;
} 
```

请参阅[此线程](https://stackoverflow.com/questions/6188994/static-keyword-inside-function)和[php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

# ios - UIButton 不隐藏

> ID：12684432
> 
> 赞同：1
> 
> 时间：2012-10-02T04:12:00.877
> 
> 标签：ios, uibutton

我使用 IB 并正确连接了我的按钮。我已经验证它们连接正确，因为某些 IBAction 方法将正确隐藏按钮。我遇到的问题是在首次加载应用程序时隐藏 UIButtons。在 viewDidLoad 我将按钮属性设置为隐藏，但它不会隐藏它。想法？

```
- (void)viewDidLoad {
    stop.hidden = YES;
    play.hidden = YES;

    [activity startAnimating];

    [super viewDidLoad];
} 
```

经过更多调试，停止按钮隐藏但不播放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:35:50.860

即使从您发布的代码中也很难判断为什么会发生这种情况，最好的猜测是在下一行代码中的某个地方您错误地将其设置回`visible = YES`。我会检查是否有一种方法可以显示在需要之前调用的按钮。

**但**

如果您的按钮的初始状态是隐藏的。为什么不简单地将它们隐藏在 IB 界面上呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:21:21.640

试试这个

*   删除插座运行代码，测试天气它工作正常
*   删除插座，通过 IB 添加隐藏属性并再次运行它并测试它是否正确。

如果它工作正常，问题出在编写的代码上。

*   检查通过代码编写的隐藏属性

# actionscript-3 - 两个实例碰撞时如何添加 Child？

> ID：12684434
> 
> 赞同：1
> 
> 时间：2012-10-02T04:12:08.187
> 
> 标签：actionscript-3, collision

我正在尝试创建一个虚拟生活模拟，当一条男孩鱼和一条女孩鱼碰撞时，它们会繁殖。这是我第一次使用外部类文件，我很困惑。

```
package {

import flash.display.MovieClip;
import flash.events.Event;

public class Main extends MovieClip
{
    var numBalls:Number = 3;
    var bFishList:Array = new Array();
    var gFishList:Array = new Array();

    public static var bFish:BoyFish = new BoyFish  ;
    public static var gFish:GirlFish = new GirlFish  ;
    var fishName:Object = bFish.name;

    public function Main()
    {
        addEventListener(Event.ADDED_TO_STAGE, enterFrameNow);
        function enterFrameNow(event:Event):void {
            // constructor code
            for (var i = 0; i < numBalls; i++) {
                var bFish:MovieClip = new BoyFish();
                bFish.name = "bFish"+i;
                addChild(bFish);

                //variable ball a movieclip is a new instance of Ball

                var gFish:MovieClip = new GirlFish();
                // ball x and y value was in the middle of the stage
                bFish.x = stage.stageWidth / 2;
                bFish.y = stage.stageHeight / 2;
                // add ball to stage

                bFishList.push(bFish);

                // ball x and y value was in the middle of the stage
                gFish.x = stage.stageWidth / 2;
                gFish.y = stage.stageHeight / 2;

                // add ball to stage
                addChild(gFish);
                gFishList.push(gFish);

                addEventListener(Event.ENTER_FRAME, hitTest);
                function hitTest(event:Event):void {
                    for (i = 0; i < bFishList.length; i++) {
                        if (gFish.hitTestObject(bFishList[i]) == true) {
                            addChild(gFish);
                            gFishList.push(gFish);
                            trace("hit");
                        }
                    }
                }
            }

        }
        trace(bFishList);
        trace(gFishList);
    }

}
} 
```

这是我的 Main.as 文件中的代码。我已经尝试了很长时间，`hitTestObject`但它对我不起作用。

谁能帮我？`bFish`我希望它在 a和 a`gFish`碰撞时向舞台添加另一个实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:24:48.297

您不应该添加那么多 enterFrame 事件。

在您的类中仅添加一个 enterFrame 处理程序，而不是作为本地函数，并在其中添加一个嵌套循环。

```
//Somewhere in your Main() function :
addEventListener(Event.ENTER_FRAME, this.hitTest);

//In class Main
public function hitTest(event:Event):void
{
    for (var i = 0; i < bFishList.length; i++)
    {
        for (var j = 0; j < gFishList.length; j++)
        {
            if (gFishList[j].hitTestObject(bFishList[i]))
            {
                var newFish:MovieClip = new GirlFish(); //Create it.
                addChild(newFish);
                gFishList.push(newFish);
            }
        }
    }
} 
```

请注意，如果您不再执行任何操作，则可能会导致每帧创建许多女孩鱼，这最终可能会冻结 flashplayer。

# javascript - WebKit 动画已启动，但在第一帧冻结（仅限 Safari）

> ID：12684437
> 
> 赞同：3
> 
> 时间：2012-10-02T04:12:25.697
> 
> 标签：javascript, css, safari, webkit, css-transitions

**适用于所有现代浏览器，Safari 除外**

这是一种非常罕见的情况，并且*Safari*可能出现故障。我正在使用 JS 将**.highlighted**类动态添加到**fieldset**元素中。

这是不寻常的部分......它开始停留在第一帧，直到我在不同的元素上触发单独的动画（例如：按钮悬停 webkit 动画）。我试过直接通过 CSS 和 JS 调用播放状态。我花了一整天的时间把头撞在墙上。

我也尝试过在基本样式上使用过渡属性，但没有运气。

**CSS**

```
footer form fieldset {
    position:relative;
    display:block;
    background:#000;
    width:80%;
    margin:0;
    padding:5px;        
    -moz-box-shadow: 0px 0px 1px #888;
    -webkit-box-shadow: 0px 0px 1px #888;
    box-shadow: 0px 0px 1px #888;
  }
  footer form fieldset.highlighted {
    -webkit-animation-name: glow;
    -webkit-animation-duration: 1.7s;
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-play-state:running !important;
  }
  @-webkit-keyframes glow {
    0% { -webkit-box-shadow: 0 0 1px #888; }
    50% { -webkit-box-shadow: 0 0 15px #888; }
    100% { -webkit-box-shadow: 0 0 1px #888; }
  } 
```

我还尝试使用 JS，将“webkitAnimationEnd”事件绑定到字段集，然后设置播放状态（示例）：

```
document.getElementById('blah').style.webkitAnimationPlayState='running'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:23:32.993

终于在最后一分钟搞定了！应用了冲突的 CSS3 过渡样式。删除后，现在可以使用。

**经验教训，小心混合 CSS3 过渡和 WebKit 关键帧动画。**

```
.transition-med
{
   transition:all 0.5s ease;
   -webkit-transition:all 0.5s ease;
   -moz-transition:all 0.5s ease;
   -o-transition:all 0.5s ease;
} 
```

# java - F-Droid.com 上的 R.java 文件

> ID：12684444
> 
> 赞同：0
> 
> 时间：2012-10-02T04:12:58.770
> 
> 标签：java, android, r.java-file, motodev-studio

我正在尝试从 F-Droid.com 下载和分析一些应用程序，但是当我抓取所有 java 文件和所有其他文件并将它们复制到我的 IDE（Android 的 Motodev Studio）中时，到处都会出现错误，因为R.java 文件丢失。我似乎找不到 R.java 文件不存在并且应用程序（显然）没有它就无法运行的原因。谁能帮忙？这是我尝试下载的应用程序示例：

[http://f-droid.org/repository/browse/?fdid=arity.calculator&fdpage=2](http://f-droid.org/repository/browse/?fdid=arity.calculator&fdpage=2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T04:20:59.237

您不能创建 R.java，它将由系统自动生成，因为它的内容基于资源文件（包括布局和首选项）。

如果您在项目上运行 clean，它应该重新生成所有生成的 java 文件。如果不是，那么您的布局 xml 中可能有一些错误

你可以关注这个链接

[R.java 文件背后的魔法](https://stackoverflow.com/questions/2048415/magic-behind-r-java-file)

[在 Eclipse 中为 Android 开发：R.java 未重新生成](https://stackoverflow.com/questions/2757107/developing-for-android-in-eclipse-r-java-not-generating?page=1&tab=votes#tab-top)

[R.java 未生成，R 无法解析为变量](https://stackoverflow.com/questions/8643873/r-java-is-not-generating-r-cannot-be-resolved-to-a-variable)

# cakephp-2.0 - 如何在 Fixtures 中使用数据源

> ID：12684447
> 
> 赞同：1
> 
> 时间：2012-10-02T04:13:09.363
> 
> 标签：cakephp-2.0, cakephp-2.1

情况如下：
我正在尝试为使用数据源的模型创建测试用例。数据源连接到 API。

我尝试了什么：
我尝试`$useDbConfig`像这样将夹具的 var 设置为数据源。

```
class ProjectFixture extends CakeTestFixture {
    public $useDbConfig = 'project';
    public $useTable = false;
} 
```

然后在我的模型测试中，这就是我所做的：

```
App::uses('Project', 'Model');

class ProjectTest extends CakeTestCase {
    public $fixtures = array('app.project');

    public function setUp() {
        parent::setUp();
        $this->Project = ClassRegistry::init('Project');
    }
... 
```

但是，当我运行测试时，我收到此错误消息：

```
Invalid datasource project for object Project
Error: An Internal Error Has Occurred.

Stack Trace
CORE/Cake/TestSuite/Fixture/CakeFixtureManager.php line 144 → CakeTestFixture->__construct()
CORE/Cake/TestSuite/Fixture/CakeFixtureManager.php line 78 → CakeFixtureManager->_loadFixtures(array)
CORE/Cake/TestSuite/CakeTestRunner.php line 52 → CakeFixtureManager->fixturize(ProjectTest)
CORE/Cake/TestSuite/CakeTestSuiteCommand.php line 111 → CakeTestRunner->doRun(PHPUnit_Framework_TestSuite, array)
CORE/Cake/TestSuite/CakeTestSuiteDispatcher.php line 242 → CakeTestSuiteCommand->run(array)
CORE/Cake/TestSuite/CakeTestSuiteDispatcher.php line 99 → CakeTestSuiteDispatcher->_runTestCase()
CORE/Cake/TestSuite/CakeTestSuiteDispatcher.php line 116 → CakeTestSuiteDispatcher->dispatch()
APP/webroot/test.php line 92 → CakeTestSuiteDispatcher::run() 
```

有没有人尝试过这样做？我一直在网上搜索，但似乎找不到任何类似的资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:11:47.057

多一点修补，我就能让它工作。它不使用 Fixtures，但可以完成工作。这是我对模型测试文件所做的：

```
App::uses('Project', 'Model');

class ProjectTest extends CakeTestCase {
    public function setUp() {
        parent::setUp();
        $this->Project = ClassRegistry::init('Project');
        $this->Project->useDbConfig = 'project';
    }
... 
```

我只是强制模型在 setUp 中使用我想要的数据源。

我现在可以使用此设置运行我的测试。不过，如果有人通过固定装置成功地做到了这一点，您的帮助将不胜感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T12:14:52.897

我使它工作的唯一方法是使用一个名为：

test_（实际模型使用的连接名称）

例如，在我的情况下，模型`ActivePermission`使用连接登录，因此，对于我使用的夹具：

```
public $useDbConfig = 'test_login'; 
```

此外，如果您没有明确设置`$useDbConfig`cake 的默认值，则使用测试连接。

# php - PHP $_POST 数组变量被截断

> ID：12684449
> 
> 赞同：6
> 
> 时间：2012-10-02T04:13:22.280
> 
> 标签：php, arrays, forms, post

我将 PHP 5.3.8 与 Apache 2.0 一起使用。我也在使用 Symfony 2，但这不是脚本失败的地方。我有一个带有数组变量的表格：

```
<form action="/app_dev.php/admin/position/create" method="post">
  <input type="text" id="po_name" name="po[name]" required="required" maxlength="50">
  <input type="text" id="po_role" name="po[role]" required="required" maxlength="20">
</form> 
```

直接在 app_dev.php 文件中（从问题中排除 Symfony）我这样做：

```
echo file_get_contents("php://input"); // outputs: po%5Bname%5D=Developer&po%5Brole%5D=ROLE_USER
var_dump($_POST); // outputs: array(1) { ["po"]=> array(1) { ["name"]=> string(9) "Developer" } }
die(); 
```

基本上它只保留数组中的第一个变量。如果我将变量的名称从 po[role] 更改为 ba[role] 然后 $_POST 输出：

```
array(1) {
  ["po"]=> array(1) { ["name"]=> string(9) "Developer" },
  ["ba"]=> array(1) { ["role"]=> string(9) "ROLE_USER" }
} 
```

我发现可能导致此问题的典型问题是由于以下 php.ini 配置，我也给你我的值是什么：

```
max_execution_time = 30
max_input_time = 60 
max_input_nesting_level = 64
max_input_vars = 1000
post_max_size = 8M
upload_max_filesize = 2M
memory_limit = 128M 
```

这些值似乎是合理的，我认为不会导致问题，但不能 100% 确定。

我*没有安装 suhosin*，因为我读过它也会导致类似的问题。

它也类似于[这个问题](https://stackoverflow.com/questions/5077969/php-some-post-values-missing-but-are-present-in-php-input)，但给出的解决方案需要我重写 HttpFoundation Symfony 组件。

此外，我不想重写没有数组的表单变量（*例如*po[name] 到 po_name），因为表单是由 Symfony 自动生成的，这似乎是 PHP 应该能够处理的基本功能。

有人对这个问题有任何想法吗？

[PS：这与此处](https://stackoverflow.com/questions/10026198/passed-arrays-lose-all-but-first-element)描述的问题类似。另外，问题发生在相同版本的 Suse (SUSE Linux Enterprise Server 11) 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:39:11.480

你提出的建议对我来说很好。完整的测试代码：

```
<html>
<body>
<pre>
<?php
if (isset($_POST) && !empty($_POST))
{
        echo file_get_contents("php://input");
        echo "\n\n";
        var_dump($_POST);
}
?>
</pre>
<form action="" method="post">
  <input type="text" id="po_name" name="po[name]">
  <input type="text" id="po_role" name="po[role]">
  <input type="submit">
</form>
</html> 
```

具有“一”和“二”值的结果片段：

```
po%5Bname%5D=one&po%5Brole%5D=two

array(1) {
  ["po"]=>
  array(2) {
    ["name"]=>
    string(3) "one"
    ["role"]=>
    string(3) "two"
  }
} 
```

我的PHP：

```
PHP Version 5.3.3-7+squeeze14
CGI/FastCGI
Apache/2.2
Suhosin Patch 0.9.9.1 
```

这里没有问题，所以它应该清楚地工作。如果此测试代码对您不起作用，我最好的选择是您拥有的版本中的 PHP 错误（或者在任何地方都没有提到的一些看似无关的功能中的错误）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T03:23:00.957

我们最终决定将我们的 PHP 版本更新到更新的版本（5.3.15），它现在可以正常工作了。所以这肯定是这个 5.3.8 的问题，至少我们拥有的版本。

# c# - 我应该复制使用模拟的单元测试并将它们更改为真正的数据库以进行集成测试吗？

> ID：12684452
> 
> 赞同：2
> 
> 时间：2012-10-02T04:13:36.803
> 
> 标签：c#, unit-testing, integration-testing

我目前正在使用模拟库对我的代码进行单元测试。我现在正处于我想测试一切都与数据库很好地配合并按预期工作的地步。

复制大量单元测试并调整它们以使用测试数据库是否有意义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T04:33:10.680

不要复制你的测试。

我之前已经这样做了，以针对不同版本的 MySQL 和 SQL Server 进行测试。我遇到的一个问题是当 MySQL 服务器实例在 Windows 或 UNIX 上运行时，MySQL 在命名表等时如何处理“大小写”。因此，针对不同数据库引擎运行集成测试的能力被证明是相当有价值的。

我推荐以下模式。它使用 MSTest 完成，但是您可以将其调整到其他人。它假定 IMyRepository 是一个包装数据库逻辑的接口。

```
[TestClass]
public abstract class MyTestBase 
{
    protected abstract IMyRepository CreateRepository();

    [TestMethod]
    public void MyTest1()
    {
        // use IMyRepository
        // execute tests
    }
}

[TestClass]
public sealed class MyUnitTest : MyTestBase
{
    protected abstract IMyRepository CreateRepository()
    {
        IMyRepository mockedRepository = /* create a mock */;
    }

    // additional unit tests that are not dependent upon database
}

[TestClass]
public sealed class MyIntegrationTest : MyTestBase
{
    [TestSetup]
    public void TestSetup()
    {
        // configure the database to be pristine
    }

    [TestCleanup]
    public void TestCleanup()
    {
        // dispose of database connections etc.
    }

    protected abstract IMyRepository CreateRepository()
    {
        IMyRepository mockedRepository = /* create real repository */;
    }
} 
```

另一种方法是只为 IMyRepository 编写集成测试，而 IMyRepository 又使用不同的数据库引擎。在您的业务逻辑测试中，您只需模拟 IMyRepository。如果您的业务逻辑模拟数据库问题并且 IMyRepository 适当地封装了数据库问题，那么两次测试业务逻辑实际上并没有任何价值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T04:18:01.777

取决于测试，我们需要更多关于他们在做什么的细节。

但是，如果您只是复制测试，您现在必须维护两个副本。也许您可以在两种模式下运行相同的测试。一种模式使用模拟基础设施，另一种使用真实（测试）基础设施。您如何完成此操作取决于您如何完成模拟以及您的配置系统如何工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T04:21:42.437

在做任何事情之前，先想想你的目标是什么。集成测试很容易过火，最终导致大量测试需要很长时间才能运行，但实际上并没有提供任何价值。

话虽如此，将最高级别的单元测试作为集成测试的模板（最高含义离数据库最远）可能会有一些好处。这些测试对该服务的功能有期望，因此插入真正的依赖项、服务和数据库可以让您对该部分进行很好的测试。这不是一个完整的测试，但它确实可以确保一切都按预期工作。

# php - 无法在php中获取请求参数

> ID：12684456
> 
> 赞同：0
> 
> 时间：2012-10-02T04:14:07.163
> 
> 标签：php

我正在使用以下代码从`$_REQUEST`php 中获取数据：

```
for($i=0;$i<intval($q);$i++)
    {
       $construct="'".$i."'";
       echo $construct;
       $p=$_REQUEST[$construct];
       echo $p;

    } 
```

其中 '0','1',... 等等都有值。但由于某种原因，它不起作用。但是，如果我用 $_REQUEST['0'] 替换它，它似乎可以很好地打印该值。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:16:39.750

删除周围的引号`$i`：

```
for($i=0;$i<intval($q);$i++)
{
   $construct=$i;
   echo $construct;
   $p=$_REQUEST[$construct];
   echo $p;

} 
```

这是因为引号不是数组索引的一部分。

此外，如果要调试，可以`$_REQUEST`像这样写出 -variable 的全部内容：

```
print "<pre>";
print_r($_REQUEST);
print "</pre>"; 
```

**编辑：**

`$a[$b]``$b=0`或`$b='0'`或都相同`$b="0"`，但何时 不同`$b="'0'"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T04:18:34.087

您的`$construct`变量值包含单引号，这不是必需的。当您将其写出时，`'0'`表示实际值为`0`，而`"'0'"`表示值为`'0'`。您的代码应为：

```
for($i=0;$i<intval($q);$i++)
{
   $construct= strval($i);
   echo $construct;
   $p=$_REQUEST[$construct];
   echo $p;
} 
```

或更简单地说：

```
for ($i=0; $i<intval($q); $i++) {
   echo $_REQUEST[strval($i)];
} 
```

# ruby-on-rails-3 - 使用块和条件导轨查看逻辑

> ID：12684457
> 
> 赞同：2
> 
> 时间：2012-10-02T04:14:09.060
> 
> 标签：ruby-on-rails-3, view, controller, logic

![在此处输入图像描述](../Images/2d0c798f22e7aa6dc3c39f2b906e43a5.png)我想要一些经验丰富的资深人士关于如何找到答案的建议。我知道我认为我的逻辑太多了，我在重复自己，但我仍在尝试“边做边学”，这就是我要让它发挥作用的地方，我会学习如何当然要从那里重构。

我想迭代创建的物流，如果logistic_title（通过“X”、“Y”或“Z”的形式传递）与“X”匹配，则在 div 中显示 X，否则不显示任何内容。

```
<div class="container-fluid">
<div class="row-fluid">
<div class="span4 hero-unit">
   <% @logistics.each do |logistic| %>
      <% if logistic.logistic_title = "Practice" %><br>
       <%= logistic.logistic_title %>
       <%= logistic.user.full_name %>
       <%= logistic.content %><br>
       <%= link_to time_ago_in_words(logistic.created_at) + " ago", logistic %> |
       <%= link_to "Edit", edit_logistic_path(logistic) %> |
       <%= link_to "Remove", logistic, method: :delete, data: { confirm: "Remove? This action cannot be undone."} %> 
     <% else %>
      <%= puts "" %>  
     <% end %> 
   <% end %>
</div>
<div class="span4 hero-unit">
  <% @logistics.each do |logistic| %>
     <% if logistic.logistic_title = "Game" %><br>
      <%= logistic.logistic_title %>
      <%= logistic.user.full_name %>
      <%= logistic.content %><br>
      <%= link_to time_ago_in_words(logistic.created_at) + " ago", logistic %> |
      <%= link_to "Edit", edit_logistic_path(logistic) %> |
      <%= link_to "Remove", logistic, method: :delete, data: { confirm: "Remove? This action cannot be undone."} %> 
    <% else %>
     <%= puts "" %>  
    <% end %> 
  <% end %>
</div>
<div class="span4 hero-unit">
  <% @logistics.each do |logistic| %>
     <% if logistic.logistic_title = "Etc." %><br>
      <%= logistic.logistic_title %>
      <%= logistic.user.full_name %>
      <%= logistic.content %><br>
      <%= link_to time_ago_in_words(logistic.created_at) + " ago", logistic %> |
      <%= link_to "Edit", edit_logistic_path(logistic) %> |
      <%= link_to "Remove", logistic, method: :delete, data: { confirm: "Remove? This action cannot be undone."} %> 
    <% else %>
     <%= puts "" %>  
    <% end %> 
  <% end %>
</div> 
```

我知道我需要写一些帮助的东西，但正确的方向会有所帮助。请温柔，这就是我的学习方式。

感谢您的关注和关注。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T04:32:25.287

你是对的，你的视图中有很多重复的代码和逻辑。如果我要自己执行此操作，我可能会更改控制器，以便您的 @logistics 实例变量根据标题拆分为三个实例变量：

```
@practice = @game = @etc = []
@logistics.each do |logistic|
  if logistic.title == 'Practice'
    @practice << logistic
  elsif logistic.title == 'Game'
    @game << logistic
  elsif logistic.title == 'Etc.'
    @etc << logistic
  end
end 
```

关于助手，我认为如果您正在编写标准 Rails 应用程序并且您的控制器名称与模型匹配，则通常会为您的助手创建 link_to 和logistic_edit_path 助手，因此您不需要自己添加这些助手。

当您指的是相等运算符时，请注意不要使用单个等号 (=)。我认为您的代码可能应该如下所示：

```
<div class="container-fluid">
<div class="row-fluid">
<div class="span4 hero-unit">
   <% @logistics.each do |logistic| %>
      <% if logistic.logistic_title == "Practice" %>
       <br>
       <%= logistic.logistic_title %>
       <%= logistic.user.full_name %>
       <%= logistic.content %><br>
       <%= link_to time_ago_in_words(logistic.created_at) + " ago", logistic %> |
       <%= link_to "Edit", edit_logistic_path(logistic) %> |
       <%= link_to "Remove", logistic, method: :delete, data: { confirm: "Remove? This action cannot be undone."} %> 
     <% else %>
      <%= puts "" %>  
     <% end %> 
   <% end %>
</div>
<div class="span4 hero-unit">
  <% @logistics.each do |logistic| %>
     <% if logistic.logistic_title == "Game" %><br>
      <%= logistic.logistic_title %>
      <%= logistic.user.full_name %>
      <%= logistic.content %><br>
      <%= link_to time_ago_in_words(logistic.created_at) + " ago", logistic %> |
      <%= link_to "Edit", edit_logistic_path(logistic) %> |
      <%= link_to "Remove", logistic, method: :delete, data: { confirm: "Remove? This action cannot be undone."} %> 
    <% else %>
     <%= puts "" %>  
    <% end %> 
  <% end %>
</div>
<div class="span4 hero-unit">
  <% @logistics.each do |logistic| %>
     <% if logistic.logistic_title == "Etc." %><br>
      <%= logistic.logistic_title %>
      <%= logistic.user.full_name %>
      <%= logistic.content %><br>
      <%= link_to time_ago_in_words(logistic.created_at) + " ago", logistic %> |
      <%= link_to "Edit", edit_logistic_path(logistic) %> |
      <%= link_to "Remove", logistic, method: :delete, data: { confirm: "Remove? This action cannot be undone."} %> 
    <% else %>
     <%= puts "" %>  
    <% end %> 
  <% end %>
</div> 
```

# vba - 删除名称以特定值开头的工作表

> ID：12684460
> 
> 赞同：2
> 
> 时间：2012-10-02T04:14:38.093
> 
> 标签：vba, excel

我想删除名称以“data as at”开头的工作表。我使用了以下但不工作。

```
For Each SheetExists In Worksheets
    If Left(SheetExists.Name, 10) = "Data as at" Then
        Application.DisplayAlerts = False
        Sheets(Left("Data as at", 10)).Delete
        Application.DisplayAlerts = True
        Exit For
    End If
Next SheetExists 
```

它返回以下行的下标错误。

```
Sheets(Left("Data as at", 10)).Delete 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T04:25:09.953

~~`Sheets(Left("Data as at", 10)).Delete`~~

`SheetExists.Delete`

# php - 通过 ODBC 使用 PHP 连接到 Oracle

> ID：12684462
> 
> 赞同：1
> 
> 时间：2012-10-02T04:14:50.097
> 
> 标签：php, database, oracle, pdo, oracle-call-interface

我首先要说我完全糊涂了。我已经阅读了“The Underground PHP and Oracle Manual White Paper”以及 StackOverflow 上的一些类似问题，但我仍然不知道我需要做什么。

我在 Ubuntu 12.04 上使用 PHP 5.3.1。我正在尝试连接到 Oracle 11g。我不知道我**是否需要**Instant Client 或 Oracle XE。我想使用 PDO 连接到它，因为这就是我的代码已经结构化的方式，但我无法确定文档的正面或反面。我还可以选择通过 ODBC 进行连接。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T05:15:03.610

无论如何，如果您使用 PDO 连接，您至少需要即时客户端。

Oracle XE 包含 OCI 运行时（Oracle 调用接口），但您可能需要设置一些环境变量才能使其工作。

它是与 Apache/PHP 位于同一服务器上的 Oracle XE 实例吗？

你有几篇关于谷歌搜索结果的好文章，比如：

1.  [http://www.sitepoint.com/oracle-10g-xe-and-php/](http://www.sitepoint.com/oracle-10g-xe-and-php/)

2.  [http://docs.oracle.com/cd/E17781_01/appdev.112/e18555/ch_one.htm](http://docs.oracle.com/cd/E17781_01/appdev.112/e18555/ch_one.htm)

3.  [http://web3us.com/drupal6/how-create-web-site-handbook/oracle-xe-php](http://web3us.com/drupal6/how-create-web-site-handbook/oracle-xe-php) 【推荐阅读】

4.  [http://www.devshed.com/c/a/Oracle/Configuring-Oracle-Database-XE-and-PHP/](http://www.devshed.com/c/a/Oracle/Configuring-Oracle-Database-XE-and-PHP/)

5.  [http://php.net/manual/en/function.oci-connect.php](http://php.net/manual/en/function.oci-connect.php)

# ruby - 没有弹出命令提示符的 Ruby 系统调用（在 Windows 上）

> ID：12684463
> 
> 赞同：2
> 
> 时间：2012-10-02T04:15:02.733
> 
> 标签：ruby, system, command-prompt

我正在尝试整理一个使用 ruby​​w.exe (1.8.7) 执行的 ruby​​ 脚本内部的多个系统调用的进程。

据我所知，rubyw.exe 的主要原因是它不会弹出命令提示符来分散用户的注意力。然而，该进程内的系统调用似乎仍然会生成这些弹出窗口，这对于该进程脚本的用户来说非常分散注意力。

有谁知道如何做到这一点？

SO上有很多与此类似的问题，但没有一个可以完全回答这个问题，如果我使用python，这个问题/答案会有所帮助（[http://code.activestate.com/lists/python-list/46042/](http://code.activestate.com/lists/python-list/46042/)）但是所以到目前为止，我的搜索还没有找到用 ruby​​ 完成此任务的方法。

更新：这里有这个线程[Hiding curl Window on Windows](https://stackoverflow.com/questions/10869789/hiding-curl-window-on-windows)已关闭，但唯一可行的解​​决方案也不允许您获得标准输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:43:22.700

我最终选择了 win32-open3 gem。因为 fork 没有在 Windows 系统上实现，所以你不能使用内置的 open3，你需要做一个

```
gem install win32-open3 
```

但是，这带有您可以传递给调用方法的标志，特别是

> open3 的 Windows 版本（也适用于 Open4.popen4）有几个不同之处 - 模式标志和显示标志。对于模式，您可以指定“t”（文本，默认值）或“b”（二进制）作为第二个参数。**对于 show 标志，您可以指定 true 或 false，这将显示或不显示控制台窗口，具体取决于您传递的值。 *默认值为 false*。**

这个特定脚本的用户不再被 15 个不断窃取焦点的 cmd 窗口轰炸，所以....赢了？

# jquery - Smooth transform SVG vertically using jQuery

> ID：12684469
> 
> 赞同：0
> 
> 时间：2012-10-02T04:16:02.297
> 
> 标签：jquery, dom, svg

In my index.html I have:

`<ellipse id="ellipseRed" cx="500" cy="1300" rx="40" ry="150" />`

In my javascript file I have:

```
$('ellipse').click(function() {
  $(this).attr('transform', 'translate(0 -350) rotate(0)');
}); 
```

The transform works, but it is not smooth. That is it seems to "jump" to its new location rather than transition into it.

I want to click the SVG ellipse and have it slowly move vertically up. Then If I click it again, have it slowly move down.

I'm new html, SVG, and jQuery/Javascript

Am I even going about this the right way? Should I be using jQuery to animate this SVG?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T05:14:58.897

While it is certainly possible to animate SVG with jQuery it is awkward and not very efficient. I'd suggest using a library with good SVG support such as [Raphael](http://raphaeljs.com) or [D3](http://d3js.org).

This is how you would do it in jQuery:

```
//jQuery way, not recommended
$('#ellipseRed').click(function() {
    //min-height is just a placeholder value
    //so jquery knows what values to put into
    //the transformation
    $(this)
    .css({"min-height": 0})
    .animate(
      {"min-height": -350},
      {duration: 1000,
       step: function( top ){
           this.setAttribute("transform", "translate(0,"+top+")");
         }
       });
}); 
```

Compare how clear this is in D3:

```
d3.select("#ellipseBlue").on("click", function(){
  d3.select(this)
      .attr("transform", "translate(0,0)")
      .transition()
        .duration(1000)
        .ease("in-out")
        .attr("transform", "translate(0,-350)")
}); 
```

You can find a demo here: [http://jsfiddle.net/LupTw/](http://jsfiddle.net/LupTw/)

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:58:57.137

For animation you must use translate. Example you can see here [http://www.the-art-of-web.com/css/css-animation/#4](http://www.the-art-of-web.com/css/css-animation/#4)

# bash - 找到恰好出现两次的字符？

> ID：12684472
> 
> 赞同：-1
> 
> 时间：2012-10-02T04:17:03.793
> 
> 标签：bash, unix

例如，假设字符串“test this”被插入到我的应用程序中——我只想要 s

我正在考虑 grep 通配符，但我从未真正使用过它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T04:23:14.433

你可以写一个脚本。

1.  遍历每个字符。
2.  每看到一个字符，就为每个字符增加一个计数器。
3.  最后，检查你的计数器是否等于`2`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T05:41:21.070

这是 alex 建议的纯 bash 实现，执行 steve 的操作`awk`：

```
#!/bin/bash

# your string
string="test this"

# First, make a character array out of it
for ((i=0; i<"${#string}"; i++)); do  # (quotes just for SO higlighting)
    chars[$i]="${string:$i:1}"        # (could be space, so quoted)
done

# associative array will keep track of the count for each character
declare -A counts

# loop through each character and keep track of its count
for ((i=0; i<"${#chars[@]}"; i++)); do # (quotes just for SO higlighting)

    key="${chars[$i]}"              # current character 
                                    # (could be space, so quoted)

    if [ -z counts["$key"] ]; then  # if it doesn't exist yet in counts, 
        counts["$key"]=0;           # initialize it to 0
    else
        ((counts["$key"]++))        # if it exists, increment it
    fi

done

# loop through each key/value and print all with count 2
for key in "${!counts[@]}"; do
    if [ ${counts["$key"]} -eq 2 ]; then
        echo "$key"
    fi
done 
```

请注意，它使用了在 Bash 4.0 中引入的关联数组，因此这只适用于该数组或更新版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T04:41:25.653

一种使用方式`GNU awk`：

```
echo "$string" | awk -F '' '{ for (i=1; i<=NF; i++) array[$i]++; for (j in array) if (array[j]==2) print j }' 
```

# php - 使用 fwrite 显示 sql 查询

> ID：12684474
> 
> 赞同：2
> 
> 时间：2012-10-02T04:17:34.073
> 
> 标签：php, sql, fwrite

我正在尝试从 sql 数据库中提取用户名以放置在[我的聊天](http://www.goawaymom.com/)中。我的数据库的结构如下所示。无论我做什么，它都不起作用，我似乎不明白，因为我可以通过执行 .$user_info['username'] 来回显人们的用户名。但是，当我将它放在 fwrite 函数中时，什么也没有出现。我错过了什么，为什么用户名没有出现在 fwrite 函数中。

[数据库 http://goawaymom.com/db.jpg](http://goawaymom.com/db.jpg)

```
<?
mysql_connect("localhost", "root", "password") or die(mysql_error());
mysql_select_db("root_members") or die(mysql_error());

session_start();
if(isset($_SESSION['name'])){
$text = $_POST['text']; 
$fp = fopen("log.html", 'a');
fwrite($fp, "<div class='msgln'> ".$user_info['username'].">".stripslashes(htmlspecialchars($text))."</div>");
fclose($fp);
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T04:39:28.463

您需要定义 $user_info：

```
<?
mysql_connect("localhost", "root", "password") or die(mysql_error());
mysql_select_db("root_members") or die(mysql_error());

session_start();
if(isset($_SESSION['name'])){

// select from database
$result = mysql_query('SELECT * FROM users WHERE username="' . $_SESSION['name'] . '"'); 
// retrieve row
$user_info = mysql_fetch_assoc($result); // fixed this from mysql_fetch_row to mysql_fetch_assoc

$text = $_POST['text']; 
$fp = fopen("log.html", 'a');
fwrite($fp, "<div class='msgln'> ".$user_info['username']." &gt;".stripslashes(htmlspecialchars($text))."</div>");
fclose($fp);
}
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T04:40:54.513

`$user_info`人口在哪里？看起来这是拼图中缺失的一块。我还修复了大于符号，它需要实体代码才能在 HTML 中正确呈现。

```
<?php
mysql_connect("localhost", "root", "password") or die(mysql_error());
mysql_select_db("root_members") or die(mysql_error());

session_start();
if (isset($_SESSION['name'])) {
    $sql = sprintf("SELECT username FROM root_members WHERE querygoeshere='%s'",
                   mysql_real_escape_string($querygoeshere));

    $result = mysql_query($sql);
    if (!$result) {
        die('Could not execute query: ' . mysql_error());
    }
    $row = mysql_fetch_row($result);
    $username = $result[0];

    $text = $_POST['text'];
    $fp = fopen("log.html", 'a');
    fwrite($fp, "<div class='msgln'>" . $username . " &gt; " . stripslashes(htmlspecialchars($text)) ."</div>");
    fclose($fp);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T04:20:11.933

看起来你`fwrite`很好，但是你`>`跟随用户名输出可能会被浏览器混淆为标签的结尾。

尝试这个：

```
fwrite($fp, "<div class='msgln'> ".$user_info['username']."&gt;".stripslashes(htmlspecialchars($text))."</div>"); 
```

# sql-server-2008-r2 - 在 SQL Server 2008 R2 的另一个 SNAPSHOT 事务中写入 SNAPSHOT 隔离级别块写入

> ID：12684477
> 
> 赞同：7
> 
> 时间：2012-10-02T04:17:58.303
> 
> 标签：sql-server-2008-r2, isolation-level

对于 SQL Server 2008 R2 中的 SNAPSHOt 隔离级别，MSDN ADO.Net 文档中提到了以下内容：

> 修改数据的事务不会阻塞读取数据的事务，读取数据的事务不会阻塞写入数据的事务，因为它们通常会在 SQL Server 中的默认 READ COMMITTED 隔离级别下阻塞。

当两个事务都处于 SNAPSHOT 隔离模式时，没有提及写入是否会阻止写入。所以我的问题如下： **SNAPSHOT transaction1 中的写入是否会写入另一个 SNAPHOT transaction2 中的相同表？**

**最近更新**

在对我的问题进行了很多思考之后，我得出了以下段落中提到的结论。希望其他人可以对此有所了解。

> **没有写入不会阻塞写入的关系数据库**。换句话说，写入*总是*会阻塞写入。写入将包括诸如 INSERT 或 UPDATE 或 DELETE 之类的语句。无论您使用哪种隔离级别都是如此，因为当数据库中发生多次写入时，所有关系数据库都需要实现数据一致性。当然，同时写入需要有冲突（如插入同一个表或更新相同的行）才能发生这种阻塞。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-20T14:50:58.087

Ligos 实际上是不正确的——如果两个单独的事务试图在 Snapshot 开启的情况下更新同一记录，事务 2 将被阻塞，直到事务 1 释放锁。然后，只有那时，你会得到错误 3960。我意识到这个线程已经有 2 年多了，但我想避免丢失信息。

甚至 Ligos 引用的链接也与我上面提到的完全相同（查看最后一个非红色段落）

仅当尝试更新的两条记录（即行）不同时，Write vs. Write 才会被阻止

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T04:44:40.807

不，他们不会阻止。相反，输入`UPDATE`命令`trans2`将失败，错误号为 3960。

由于`SNAPSHOT`隔离级别的工作方式，任何`UPDATE`命令都可能失败。您可以判断的唯一方法是捕获并处理错误 3960（它被称为乐观并发，因为您不希望这种情况经常发生）。

我最终根据经验对此进行了测试，因为它在文档中并不完全明显。[这篇博](http://blogs.msdn.com/b/sqlcat/archive/2011/02/20/concurrency-series-minimizing-blocking-between-updaters.aspx)文很好地说明了这一点。

* * *

假设：两者`trans1`都`trans2`在更新同一张表中的同一行。更新两个不同的行应该可以正常工作。

# c++ - 由于不一致而无法追踪崩溃

> ID：12684484
> 
> 赞同：0
> 
> 时间：2012-10-02T04:18:45.790
> 
> 标签：c++, cocos2d-iphone, cocos2d-x

我正在 cocos2d-x 中制作二十一点游戏，下面是我遇到崩溃的相同代码，但无法理解为什么会发生这种情况发生了什么问题？我尝试了几件事，认为崩溃可能是由于字符串内存泄漏或其他原因

CCSprite* _big = CCSprite::createWithSpriteFrameName(ptr);

这是继承CCSprite的卡片cpp文件

卡片.cpp

```
#include "Card.h"

Card::Card() {
  }

Card::~Card() {
  }

void Card::init(int value, int suit) {
    mValue = value;
    mSuit = suit;
    mGameValue = 0;
    UnHide();
  }

void Card::UnHide() {

    mHidden = false;
    //if(this)
    //this->removeAllChildrenWithCleanup(true);
    //this->setDisplayFrame(CCSpriteFrameCache::sharedSpriteFrameCache()->spriteFrameByName("card"));
    this->initWithSpriteFrameName("card");

    char strName[64]={0};

    //memset ( strName, 0, sizeof ( strName ));

    switch(mSuit){
    case 0: sprintf(strName,"%s","club_big");break;
    case 1: sprintf(strName,"%s","diamond_big");break;
    case 2: sprintf(strName,"%s","spade_big");break;
    case 3: sprintf(strName,"%s","heart_big");break;
    default :
            break;
    }

    const char *ptr = strdup(strName);  

    CCSprite* _big = CCSprite::createWithSpriteFrameName(ptr);
    delete  ptr;

   // CCSprite* big = CCSprite::create(strName);
    _big->setPosition(ccp(55, 44));
    this->addChild(_big);

    switch(mSuit){
        case 0: sprintf(strName,"%s","club");break;
        case 1: sprintf(strName,"%s","diamond");break;
        case 2: sprintf(strName,"%s","spade");break;
        case 3: sprintf(strName,"%s","heart");break;
        default :
            break;
    }

    const char *_ptr = strdup(strName); 

    CCSprite* _small = CCSprite::createWithSpriteFrameName(_ptr);
    delete _ptr;

   // CCSprite* small = CCSprite::create(str);
    _small->setPosition(ccp(16, 82));
    this->addChild(_small);

    if(mSuit==0 || mSuit==2){
        switch(mValue){
            case 1: sprintf(strName,"%s","blacka");mGameValue = 1;break;
            case 2: sprintf(strName,"%s","black2");mGameValue = mValue;break;
            case 3: sprintf(strName,"%s","black3");mGameValue = mValue;break;
            case 4: sprintf(strName,"%s","black4");mGameValue = mValue;break;
            case 5: sprintf(strName,"%s","black5");mGameValue = mValue;break;
            case 6: sprintf(strName,"%s","black6");mGameValue = mValue;break;
            case 7: sprintf(strName,"%s","black7");mGameValue = mValue;break;
            case 8: sprintf(strName,"%s","black8");mGameValue = mValue;break;
            case 9: sprintf(strName,"%s","black9");mGameValue = mValue;break;
            case 10: sprintf(strName,"%s","black10");mGameValue = mValue;break;
            case 11: sprintf(strName,"%s","blackj");mGameValue = 10;break;
            case 12: sprintf(strName,"%s","blackq");mGameValue = 10;break;
            case 13: sprintf(strName,"%s","blackk");mGameValue = 10;break;
            default :
            break;
        }
    }
    else {
        switch(mValue){
        case 1: sprintf(strName,"%s","reda");mGameValue = 1;break;
        case 2: sprintf(strName,"%s","red2");mGameValue = mValue;break;
        case 3: sprintf(strName,"%s","red3");mGameValue = mValue;break;
        case 4: sprintf(strName,"%s","red4");mGameValue = mValue;break;
        case 5: sprintf(strName,"%s","red5");mGameValue = mValue;break;
        case 6: sprintf(strName,"%s","red6");mGameValue = mValue;break;
        case 7: sprintf(strName,"%s","red7");mGameValue = mValue;break;
        case 8: sprintf(strName,"%s","red8");mGameValue = mValue;break;
        case 9: sprintf(strName,"%s","red9");mGameValue = mValue;break;
        case 10: sprintf(strName,"%s","red10");mGameValue = mValue;break;
        case 11: sprintf(strName,"%s","redj");mGameValue = 10;break;
        case 12: sprintf(strName,"%s","redq");mGameValue = 10;break;
        case 13: sprintf(strName,"%s","redk");mGameValue = 10;break;
        default :
            break;
        }
    }

    const char *_ptrr = strdup(strName);    

    CCSprite* _num = CCSprite::createWithSpriteFrameName(_ptrr);
    delete _ptrr;
   // CCSprite* _num = CCSprite::create(strName);
    _num->setPosition(ccp(18, 108));
    this->addChild(_num);
}

void Card::Hide() {

    mHidden = true;
    this->removeAllChildrenWithCleanup(true);
    this->setDisplayFrame(CCSpriteFrameCache::sharedSpriteFrameCache()->spriteFrameByName("deck"));
    //this->initWithSpriteFrameName("deck");
} 
```

卡片的初始化是按照这个

```
for (int suit = 0; suit < 4; suit++) {
            for (int value = 0; value < 13; value++) {
                Card* card = new Card;
                //card->init
                card->init(value+1, suit);
              mCard[suit*13 + value] = card;
            }
          } 
```

我得到的崩溃是在 initWithSpriteFrameName 线上，但它不会经常发生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T00:26:44.917

h 文件：

```
class Card : public cocos2d::Node
{
public:
int mValue;
int mSuit;
bool mHidden;
int mGameValue;
CCSprite* front;
CCSprite* back;

static Card* create();
bool init(int value, int suit);
void UnHide();
void Hide();
}; 
```

.cpp 文件

```
Card* Card::create(int value, int suit){
    Card* card = new Card();
    if(card && card->init(value, suit)){
        card->autorelease();
        return card;
    }
    else{
        CC_SAFE_DELETE(card);
        return NULL;
    }
}

bool Card::init(int value, int suit) {
    if(CCNode::init()){
        mValue = value;
        mSuit = suit;
        mGameValue = 0;

        //create your front and back sprite here as what you did in Unhide
        CCSprite* back = blablabla;
        CCSprite* front = blablabla;

        //add them as a child of current node
        this->addChild(back);
        this->addChild(front);

        this->UnHide();
        return true;
    }
    return false;
}

void Card::UnHide() {
    back->setVisible(false);
    front->setVisible(true);
}

void Card::Hide() {
    back->setVisible(true);
    front->setVisible(false); 
} 
```

根据我的理解，对于你的甲板，

```
CCArray::createWithCapacity(52); 
```

会是更好的选择。

# ruby-on-rails - Rails 验证错误不包括属性名称

> ID：12684486
> 
> 赞同：0
> 
> 时间：2012-10-02T04:19:00.547
> 
> 标签：ruby-on-rails, validation

我知道我可以用 i18n 解决这个问题，如果我有时间我会尝试这样做，但为了更快地解决我很好奇：有没有办法将属性名称添加到 rails 验证错误？例如，我的模型中有以下内容：

```
validates_presence_of :name 
```

呈现的验证错误是`can't be blank`. 我更愿意这样说`Name can't be blank`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:21:23.133

```
validates_presence_of :name, :format => { :message => "whatever you want" } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:32:32.683

使用`errors.full_messages`：

```
<ul>
  <% @record.errors.full_messages.each do |msg| %>
    <li><%= msg %></li>
  <% end %>
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T04:39:38.413

仅有的 -

```
validates_presence_of :name, :message => "Name can't be blank" 
```

对于`validates_presence_of`, 错误语言环境是 - “不能为空”；属性/属性名称在验证期间作为前缀。您可以通过上面的方法覆盖它。因此，对于您的情况，由于属性名称为“名称”，错误将自动变为“名称不能为空”。要覆盖所有验证的属性名称，您可以使用 human_attribute_name(http://apidock.com/rails/ActiveModel/Translation/human_attribute_name)

# php - FOSUserBundle 自定义错误信息 change_password

> ID：12684488
> 
> 赞同：5
> 
> 时间：2012-10-02T04:19:11.607
> 
> 标签：php, symfony, fosuserbundle

我将 Symfony 2.1 用于项目并使用 FOSUserBundle 来管理用户。

我正在尝试自定义更改密码表单，但无法很好地显示错误消息。实际上，当输入错误填充时，错误消息会在标签和输入之间打印（具有列表结构）。但我喜欢在输入之后或下方显示它。

此外，我想在设置页面中显示我的更改密码表单，因此我需要显示其他一些表单。如何将此表单集成到页面中的精确位置？

提前致谢， 瓦伦丁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T22:27:25.053

对于我的第一个问题，我成功使用了 change_password 表单：

```
<form action="{{ path('fos_user_change_password') }}" {{ form_enctype(form) }} method="POST" class="fos_user_change_password">

<div class="form_errors_change_pwd">
    {{ form_errors(form) }}
</div>
<div>
    {{ form_label(form.current_password) }}
    {{ form_widget(form.current_password) }}
    <span class="form_error_field">{{ form_errors(form.current_password) }}</span>
</div>
<div>
    {{ form_label(form.new.first) }}
    {{ form_widget(form.new.first) }}
    <span class="form_error_field">{{ form_errors(form.new.first) }}</span>
</div>
<div>
    {{ form_label(form.new.second) }}
    {{ form_widget(form.new.second) }}
    <span class="form_error_field">{{ form_errors(form.new.second) }}</span>
</div>
{{ form_rest(form) }}
<div>
    <input type="submit" value="{{ 'change_password.submit'|trans({}, 'FOSUserBundle') }}" />
</div> 
```

但我仍在尝试将此表单集成到具有多个表单的另一个页面中......

# python - Python 语法空格

> ID：12684489
> 
> 赞同：0
> 
> 时间：2012-10-02T04:19:28.317
> 
> 标签：python, whitespace

晚上，

这不一定是pythonic，我知道进入它。但是，我根本无法让它正确触发。

我想要做的是将两个字母与“寄存器”中的项目匹配，这是正确完成的，但是我试图查看这两个字母之后是否有空格。空白是没有被正确拾取的地方。我确定我只是在搞砸语法。任何帮助将不胜感激。

```
registers = ['R0','R1','R2','R3','R4','R5','R6','R7']
whiteSpace = ['\t', ' ']
if (item[idx +2] + item[idx +3]) in registers and (item[idx +4] in whiteSpace): 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:04:45.597

`item`如果没有看到一个例子来说明你做错了什么或者为什么你用索引指针来遍历它，就很难判断你做错了什么。如您所说，如果它只是一个字符串，则可以将测试简化为以下内容：

```
if item[:2] in registers and item[-1] in whiteSpace: 
```

您需要保证该项目的长度为 3 个字符，或者在该条件下放置另一个警卫。

顺便说一句，我喜欢在这类事情上使用命名切片来使意图更明显：

```
code = slice(0, 2)
spacer = slice(-1)

if item[code] in registers and item[spacer] in whiteSpace: 
```

# drupal - Drupal 7 更改 IMCE 文件上传路径（目标）？

> ID：12684493
> 
> 赞同：0
> 
> 时间：2012-10-02T04:20:15.710
> 
> 标签：drupal

如何更改 IMCE 的文件保存路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:19:10.953

保存路径由登录用户使用的 IMCE 配置文件确定。您可以在 Drupal 站点的配置中配置配置文件`admin/config/media/imce`。

当您编辑配置文件时，保存路径在标有目录的部分中设置。

# mysql - table_schema 和 table_name 关系的工具

> ID：12684494
> 
> 赞同：-1
> 
> 时间：2012-10-02T04:20:25.040
> 
> 标签：mysql, profiling, data-profiling

您知道任何用于分析的工具，以查看数据库中每个表的结构和关系吗？它看起来像这样：

请参阅下面的屏幕截图，

![在此处输入图像描述](../Images/0a946a90abcf59ae43807252e014a4fa.png)

[如需**更大的分辨率**，请点击这里。](http://www.geneontology.org/images/diag-godb-er.jpg)

提前致谢。

任何帮助都更加感激！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T04:29:45.603

MySQL Workbench 是您正在寻找的

[http://www.mysql.com/products/workbench/](http://www.mysql.com/products/workbench/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:29:57.320

你可以使用[MySQL Workbench](http://www.mysql.com/products/workbench/)，如果我没记错的话，它有一个功能，可以做到这一点（逆向工程数据库或类似的东西）。

请参阅[此 SO 帖子](https://stackoverflow.com/questions/2488/auto-generate-database-diagram-mysql)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T06:23:34.697

查看[dbForge Studio for MySQL](http://www.devart.com/dbforge/mysql/studio)中的[Database Designer for](http://www.devart.com/dbforge/mysql/studio/database-designer.html) MySQL 。

*Database Designer 是一个强大的数据库开发可视化设计工具，让您可以直观地构建清晰有效的数据库结构，并在数据库上查看代表所有表、它们之间的外键关系、视图和存储例程的完整图片图表。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T06:27:09.843

[Toad for MySQL](http://toadformysql.com/index.jspa)具有数据库图表功能，允许您从现有数据库创建此类绘图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-04T05:20:48.567

[SchemaCrawler for MySQL](https://sourceforge.net/projects/schemacrawler/files/SchemaCrawler%20-%20MySQL/)是一个免费的命令行工具，用于绘制数据库图表。SchemaCrawler 在绘制大型复杂模式图表时特别有用，因为它可以根据表名和列名的正则表达式搜索结果绘制表。

Sualeh Fatehi，SchemaCrawler

# c++ - 为什么 C++ 中有替代标记？

> ID：12684497
> 
> 赞同：2
> 
> 时间：2012-10-02T04:20:49.357
> 
> 标签：c++, ansi

> **可能重复：**
> [为什么 C 和 C++ 中有二合字母？](https://stackoverflow.com/questions/432443/why-are-there-digraphs-in-c-and-c)
> [C ??!??! 是什么意思？运营商呢？！](https://stackoverflow.com/questions/7825055/what-does-the-c-operator-do)

在 C++ 中，有 [] 和 {} 等替代标记。

例如下面的代码编译：

```
%:include <stdio.h>
int main() <%
    printf("Hello World!");
} 
```

我想了一会儿，但想不出任何适用性，这有什么合乎逻辑的理由吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T04:22:57.757

他们是C的宿醉，真的。在 C 的某些实现中，并非所有字符都可用（例如一些没有方括号的 EBCDIC 变体）。

C99 基本原理文档部分`5.2.1.1 Trigraph sequences`有这样的说法：

> 在 C89 中引入了三字母序列作为某些字符的替代拼写，以允许在不提供足够数量的非字母图形的字符集中实现 C。
> 
> C 使用的 ASCII 曲目中的字符和 ISO/IEC 646 不变曲目中不存在的字符是`#`, `[`, `]`, `{`, `}`, `\`, `|`, `~`, 和`^`

# android - 在 Android 4.1 中打开图库

> ID：12684498
> 
> 赞同：0
> 
> 时间：2012-10-02T04:20:56.007
> 
> 标签：android, android-intent

我有一个应用程序，可让您从图库中打开图片。当您将图库中的图片添加到应用程序时，它会记录 URI，然后在您需要时使用该 URI 再次打开图片。

这在 Honeycomb 和 ICS 上运行良好，但在 Jellybean (4.1) 上，我总是得到画廊中打开的相册中的第一张图片。

当我调用画廊时，我仔细检查了 URI 是否确实在发生变化。

这是打开画廊的代码

```
startActivity(new Intent(Intent.ACTION_VIEW, uri)); 
```

这是URI...

```
content://com.google.android.gallery3d.provider/picasa/item/5477659987595757282 
```

同样，这是最初选择图片时从图库中提供的 URI，所以 URI“应该”没问题，这是 Jellybean 唯一的问题，我什至在运行 ICS 的同一设备上运行，并且它曾经工作正常。现在它会打开正确的相册，但总是显示第一张图片。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T04:33:51.517

我不完全确定具体是什么问题，但我所知道的是您正在使用内部 API……您不应该那样做。OEM（即三星、HTC 等）将来可能会更改这些 URI，从而导致旧应用程序在新设备上中断。更具体地说，您无法保证您发布的 URI 在新版本的 Android 发布时会保持一致（因为它不是公共 API 的一部分）。

至少您应该使用 来检查与给定 uri 关联的包是否存在`PackageManager`（如果不存在，则用 toast 提示用户，警告他们该操作无法完成）。

# python - 你能解释一下 mod_wsgi 和 werkzeug 之间更详细的区别吗？（求救新手）

> ID：12684509
> 
> 赞同：12
> 
> 时间：2012-10-02T04:22:26.057
> 
> 标签：python, mod-wsgi, wsgi, werkzeug

正如我在标题中所说，我目前对它们的基本理解感到非常不舒服。

据我所知，mod_wsgi 实现了可以在 Apache Web 服务器下运行的 WSGI 规范。

它是用 C 语言编写的。

另一个，werkzeug 是一种工具包，具有有用的实用程序。我还回顾了 werkzeug 可以运行在其源中实现的简单服务（serving.py 中的 make_server）。我知道 werkzeug 具有有用的功能和简单的服务器功能。

我想知道的如下。

在 Apache Web 服务器下使用基于 werkzeug 的类似 Flask 的框架时，mod_wsgi 究竟做了什么？

werkzeug 还有基本的 http 服务器功能，不需要 mod_wsgi 支持。

谁能解释 mod_wsgi 和 werkzeug 之间的区别？

mod_wsgi 和 werkzeug 从 Web 服务器的角度来看具有重复的功能。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-02T04:37:58.930

WSGI 代表 Web 服务器网关接口，（大部分）由 PEP 333 在[http://www.python.org/dev/peps/pep-0333/](http://www.python.org/dev/peps/pep-0333/)定义。

Python 社区努力为 Web 服务器建立与 Python 应用程序对话的标准机制。

理论上，任何 wsgi 兼容的服务器（或现有 Web 服务器的扩展）都应该能够加载和运行任何 wsgi 兼容的应用程序。

**werkzeug**是一个 Web 应用程序框架，可以在兼容的 WSGI 服务器下运行，例如 Apache+mod_wsgi。它还包含一个可用于开发的内置开发服务器。

* * *

WSGI 一开始可能会让人很困惑，但实际上它非常简单。WSGI 规范要求您的 python 应用程序执行以下操作：

1.  定义一个名为`application`
2.  说 callable 应该接受 2 个参数： ( `environ`, `start_response`)
3.  `environ`是环境变量的字典
4.  `start_response`是一个可调用对象，需要调用才能开始响应

一旦`application`被调用，它就会处理请求，构建输出，然后：

1.  来电`start_response('200 OK', Headers)`
2.  `return [content]`

一个简单的 WSGI 应用程序可能如下所示：

```
def application(environ, start_response):
    status = '200 OK'
    output = 'Hello World!'

    response_headers = [('Content-type', 'text/plain'),
                    ('Content-Length', str(len(output)))]
    start_response(status, response_headers)

    return [output] 
```

强烈建议您使用现有的 WSGI 框架，因为在解析 HTTP 请求、处理文件上传、编码字符等方面涉及很多细节......

看看 Bottle、Flask、werkzeug、AppStruct 等...

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-02T05:06:50.693

`mod_wsgi`是一个兼容 wsgi 的 python 模块，它连接了 python 和 apache。它允许您在 apache 下运行编码为 wsgi 规范的应用程序。

`werkzeug`是一个 wsgi 实用程序库，用于构建 wsgi 兼容的应用程序。它附带一个开发服务器。

有一些 Python Web 应用程序框架：Pyramid/Pylons、Flask、Bottle、Django、CherryPy 等。它们都实现了 WSGI 规范，这是用 Python 构建 Web 应用程序的事实标准（[http:// en.wikipedia.org/wiki/Web_Server_Gateway_Interface](http://en.wikipedia.org/wiki/Web_Server_Gateway_Interface)）

大多数 Web 应用程序框架都附带一个仅可调试或具有生产能力的 Web 服务器。当您拥有 WSGI 应用程序时，您可以通过库的应用程序、通过 Apache 通过 Apache`mod_wsgi`或使用“纯”wsgi 服务器（如`uWSGI`、`gunicorn`、`fapws`或`twisted`.

我认识的大多数人都会像这样部署一个 wsgi 应用程序：

*   一个轻量级的服务器，比如 nginx，监听 port80
*   轻量级服务器本身提供静态文件
*   轻量级服务器将 uWSGI 请求代理到另一个服务器，这通常是 uWSGI，但有时是 apache+mod_wsgi 或其他。根据设置，代理可以是 http 代理，也可以直接或通过套接字连接到 uWSGI 服务器。

话虽如此，要具体回答您的问题，请阅读此文档页面的第一段 - [http://werkzeug.pocoo.org/docs/serving/](http://werkzeug.pocoo.org/docs/serving/)：

> > 有很多方法可以为 WSGI 应用程序提供服务。在开发它时，您通常不希望有一个像 Apache 这样成熟的网络服务器启动并运行，而是一个简单的独立网络服务器。因此，Werkzeug 带有一个内置的开发服务器。

出于开发原因，或者在流量非常低的站点上，您可以只使用 Werkzeug 服务器。如果您正在部署一个能够获得合理流量的应用程序，您将需要更健壮的东西。

mod_wsgi 或 uWSGI 复制了 Werkzeug 的服务特性，但他们这样做是因为他们可以做得更好——更快的响应时间、更低的内存、更好的并发性、更稳定等等等等等等。Werkzeug 服务器对于许多用途来说“足够好” ，但它不是为符合 wsgi 的应用程序提供服务的“最佳方式”。

# zend-framework - Zend - 如何在同一个视图中组合表单和分页

> ID：12684510
> 
> 赞同：0
> 
> 时间：2012-10-02T04:22:47.613
> 
> 标签：zend-framework, pagination

这可能看起来更简单，但我很难过。我有一个简单的控制器，它构建了一个用于输入参数的小表单。提交表单时，将重绘同一页面，顶部是相同的表单，但其下方是结果的分页视图。我的控制器在这里：

```
public function indexAction()
{
    $form = new Application_Form_Battery();

    $request = $this->getRequest();
    if ($request->isPost()) {
        $data = $request->getPost();
        $form->populate($data);

        // get the data
        Zend_View_Helper_PaginationControl::setDefaultViewPartial('pagination.phtml');
        $reportsTBL = new Model_DBTable_Reports();
        $paginator = new Zend_Paginator(new Zend_Paginator_Adapter_Array($reportsTBL->getBatteryLog($data)));
        $paginator->setCurrentPageNumber($this->_getParam('page',1))
              ->setItemCountPerPage(50);
        $this->view->paginator = $paginator;
    }   
    $this->view->form = $form;
} 
```

可以看到，表单提交后，分页结果被view->form语句覆盖了……表单提交后如何合并呢？我不能有两个视图调用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:51:27.100

像这里未经测试的东西，

**索引控制器**

```
 public function indexAction()
    {
                .....
            $_category = new Admin_Model_DbTable_Category();
            $category = $_category->browse($browseArray);
            $this->view->vCount = count($category);
        $paginator = Zend_Paginator::factory($category);
        $page = ($postData['page'] > 0) ? $postData['page'] : 1;
        $paginator->setCurrentPageNumber($page); 
        $paginator->setItemCountPerPage(10);
        $paginator->setPageRange(5);
        $this->view->categoryList   = $paginator;  // print_obj($paginator);
....
} 
```

**索引.phtml**

```
.....
<ul>
     <?php if (count($this->categoryList) != 0) { ?>
       <?php
         foreach ($this->categoryList AS $key => $category) {
           ?>
             <li>

               <div >
                   <?php echo $category['name'] ?>

               </div>
              </li>
         <?php } ?>
         <li>
            <div><?php echo "Total Category(" . $this->vCount . ")"; ?></div>
                                <div style="text-align:center;"><?php echo $this->paginationControl($this->categoryList, 'Sliding', 'pagination.phtml'); ?></div>
                            </li>
                            <?php } else { ?>
                            <li><div style="text-align:center;">No records found</div></li> 
                    <?php } ?>
                    </ul>
... 
```

**分类.php**

```
class Admin_Model_DbTable_Category extends Zend_Db_Table_Abstract
{
...
    protected $_name = 'category';
    protected $_primary = 'category_id';

    public function browse($browseArray = array()) 
    {
        extract($browseArray);

        $whereSQL       = ' `parent` = 0 ';

        if($category_id)                
            $whereSQL   .= ' AND `category_id` = "'. $category_id .'"';
        if($catname)
            $whereSQL   .= ' AND `name` = "'. $catname .'"';
        if($name)
            $whereSQL   .= ' AND `name` LIKE "%'. $name .'%"';  
        if($description)
            $whereSQL   .= ' AND `description` LIKE "%'. $description .'%"';    
        if($status) 
            $whereSQL   .= ' AND `status` = "'. $status .'"';   

        $select         = $this->_db->select()
                            ->from($this->_name)
                            ->where($whereSQL);
        $result         = $this->getAdapter()->fetchAll($select);

        return $result;
    }
    ....
} 
```

您可以使用名为 browse 的通用函数从 table 获取结果，通过使用结果我们可以在页面呈现时对数据进行分页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:28:53.960

I solved it. I was using a view that called a form template and I was trying to display the paginated results on that form. I moved the paginated results to the actual view script and everything is solved.

Thanks for the help.

# silverlight - Devexprerss GridControl 日期时间列自动筛选

> ID：12684512
> 
> 赞同：0
> 
> 时间：2012-10-02T04:23:00.837
> 
> 标签：silverlight, devexpress, gridcontrol

我想自定义自动过滤行

我为自动筛选行创建模板并将 gridColumn AutofilterRowEdiTtemplate 设置为我的模板

它适用于一般列，但日期时间列始终在 Autorowfilter 中显示 dateedit

我不希望 dateedit 显示在自动过滤器上

我应该怎么办？

坦克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:01:50.670

检查[ColumnBase.ColumnFilterMode 属性](http://documentation.devexpress.com/#WPF/DevExpressXpfGridColumnBase_ColumnFilterModetopic)，您可以自定义特定列的过滤模式。这是 WPF 网格参考，但 silverlight 网格也有这样的属性。检查[过滤器模式和自定义过滤](http://documentation.devexpress.com/#Silverlight/CustomDocument5225)..

代码片段供参考：

```
foreach (GridColumn column in grvAvailableCompnents.Columns)
{
    column.OptionsFilter.FilterPopupMode = FilterPopupMode.CheckedList;
    column.OptionsFilter.AutoFilterCondition = AutoFilterCondition.Contains;
} 
```

参考： [GridControl.CustomRowFilter 事件](http://documentation.devexpress.com/#WPF/DevExpressXpfGridGridControl_CustomRowFiltertopic)

# python - 返回列表中以给定最小频率出现的项目

> ID：12684515
> 
> 赞同：1
> 
> 时间：2012-10-02T04:23:15.120
> 
> 标签：python, function, sequence, probability

需要帮助创建函数 freqitems(S,p)，它返回序列 S 中的项目的排序列表，这些项目以至少 p% 的频率出现，没有重复。示例输出应该是这样的：

```
>>> freqitems([2,2,2,3],50)
[2]
>>> freqitems(5*["alpha"]+["beta"]+3*["gamma"]+7*["delta"], 25)
['alpha', 'delta']
>>> freqitems(5*["alpha"]+["beta"]+3*["gamma"]+7*["delta"], 33)
['delta'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:51:27.963

```
yourlist = 5*["alpha"]+["beta"]+3*["gamma"]+7*["delta"]

def freqitems(sequence, p):
  import collections
  counter = collections.Counter(sequence)
  return sorted([k for k,v in counter.iteritems() if 100.*v/len(sequence) >= p])

print freqitems(yourlist, 25)
print freqitems(yourlist, 33) 
```

# pthreads - pthread_create() 的参数

> ID：12684518
> 
> 赞同：1
> 
> 时间：2012-10-02T04:23:33.680
> 
> 标签：pthreads

我们知道我们这样调用 pthread

```
int pthread_create(pthread_t *thread, const pthread_attr_t *attr, 
                    void *(*start_routine) (void *), void* arg); 
```

但是，如果`start_routine`我要调用的函数中有多个参数，我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T04:27:24.443

你可以将任何你想要的东西放入一个结构中并传递一个指向它的指针。

在 C 中：

```
typedef struct {
  int a;
  int b;
} ChildMainArgs;

void child_main(int a,int b);

void child_main_thread(void *arg)
{
  ChildMainArgs *args_ptr = (ChildMainArgs *)arg;
  child_main(args_ptr->a,args_ptr->b);
}

ChildMainArgs args;
args.a = 5;
args.b = 7;
pthread_create(..,..,child_main_thread,&args); 
```

# ssas - 到 SSAS 的基本经过身份验证的 HTTP 连接非常慢

> ID：12684519
> 
> 赞同：2
> 
> 时间：2012-10-02T04:23:35.083
> 
> 标签：ssas, basic-authentication, datapump

我已将我的 SSAS 连接配置为使用 HTTP，并且一切正常。问题是，当我只使用基本身份验证并将用户名和密码作为 ConnectionString 的一部分传递时，连接速度非常慢。如果我将 MSMDPUMP.dll IIS 应用程序更改为使用匿名身份验证，则连接工作“与没有 HTTP 一样快”。同样，问题是匿名身份验证对我来说是不可接受的，我真的需要基本身份验证安全性。

基本身份验证发生了什么？有没有办法让它更快？该解决方案目前无法使用。

# algorithm - 最坏情况下的时间复杂度是多少？

> ID：12684522
> 
> 赞同：1
> 
> 时间：2012-10-02T04:24:00.450
> 
> 标签：algorithm

```
for(int i = 1 ; i < n ; i* = 2)
for(int j = 1 ; j < i ; j* = 2) 
```

谁能给我解释一下？我认为是`log(n)*log(i)`。对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T04:42:00.513

假设

```
for (i = 1; i < n; i *= 2)
   for (j = 1; j < i; j *= 2)
      ...stuff... 
```

“东西”将运行 1 + 2 + 3 + ... + log(n)-1 次。由于整数 1 到 N 的总和为 N * (N + 1) / 2，因此最坏情况的运行时间为 O(log(n) ^ 2)。

# java - Java - 具有相同方法的不同对象的数组

> ID：12684528
> 
> 赞同：4
> 
> 时间：2012-10-02T04:25:30.467
> 
> 标签：java, inheritance, interface, casting, polymorphism

我正在练习继承。

我有两个相似的类，我想将它们同化到一个数组中，所以我想将 Object 类用作超类，因为一切都是 Object 的子类。

因此，例如，我将 T 类和 CT 类放入一个名为 all 的数组中，如下所示：

```
 Object all[] = new Object[6];

    all[0] = T1;

    all[1] = CT2;

    all[2] =T3;

    all[3] = CT1;

    all[4] = T2;

    all[5] = CT3; 
```

我跳过了声明，因为那不是我的问题。

当我希望使用循环调用数组中的函数时，我真正的问题变成了：

```
for (int i = 0; i < 6; i++) {

    all[i].beingShot(randomNum, randomNum, AK47.getAccuracy());
} 
```

T 和 CT 分别涉及的类都有beingShot 方法，该方法是公共的。

Eclipse 建议将它们转换为快速修复。我想知道除了创建自己的包含beingShot方法的Object类或将其添加到Object类之外是否还有其他合乎逻辑的选择，尽管我觉得从长远来看，这些选择中的任何一个都会导致更多问题。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-02T04:31:29.510

如果两个类都实现了相同的方法，你应该考虑创建一个`interface`.

界面非常强大且易于使用。

你可以调用你的 interface `Shootable`。

您可以创建实现*Shootable*的不同对象的数组，并将它们一视同仁。

```
// Define a VERY simple interface with one method.

interface Shootable {
    public void beingShot();
}

// Any class that implements this interface can be treated interchangeably

class Revolver implements Shootable {
    public void beingShot() {
        System.out.println("Revolver: firing 1 round");
}

class MachineGun implements Shootable {
    public void beingShot() {
        System.out.println("Machine Gun: firing 50 rounds");
    }
}

class HockeyPuck implements Shootable {
    public void beingShot() {
        System.out.println("Hockey Puck: 80 MPH slapshot");
    }
}

class RayBourquePuck implements Shootable {
    public void beingShot() {
        System.out.println("Hockey Puck: 110 MPH slapshot");
    }
}

class OunceOfWhiskey implements Shootable {
    public void beingShot() {
        System.out.println("Whiskey Shot: 1 oz down the hatch...");
    }
}

// You can declare an array of objects that implement Shootable

Shootable[] shooters = new Shootable[4];

// You can store any Shootable object in your array:

shooters[0] = new MachineGun();
shooters[1] = new Revolver();
shooters[2] = new HockeyPuck();
shooters[3] = new OunceOfWhiskey();

// A Shootable object can reference any item from the array

Shootable anyShootableItem;

// The same object can to refer to a MachineGun OR a HockeyPuck

anyShootableItem = shooters[0];
anyShootableItem.beingShot();

anyShootableItem = shooters[2];
anyShootableItem.beingShot();

// You can call beingShot on any item from the array without casting

shooters[0].beingShot();
shooters[1].beingShot();

// Let's shoot each object for fun:

for (Shootable s : shooters) {
    s.beingShot();
} 
```

* * *

这是一个[很好的相关问题和答案](https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T04:30:00.930

对象没有方法beingShot。如果数组中的所有对象都属于同一类，那么您的数组应该属于同一类。否则，它们都应该实现相同的接口或扩展相同的类。我无法想象你为什么要在这里显式扩展 Object，它不会添加任何功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T04:30:36.907

您需要将您的`object`引用类型转换为适当的类来调用他们的方法..

`array`对于您从`instanceof`.

但是类型转换是一件丑陋的事情..你应该尽可能避免它..如果你必须根据确切的子类来选择调用哪个方法，你可能应该选择一个`Interface`..这是你可以实现什么的最好方法你想在这里...

而且我认为您已经获得了有关如何实施它的足够信息..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T04:36:25.063

你不能这样做......因为Java不支持扩展方法。（C# 可以）

阅读以下链接：

[Java 等价于 C# 扩展方法](https://stackoverflow.com/questions/4359979/java-equivalent-to-c-sharp-extension-methods)

# magento - 致命错误：安装自定义模板后在非对象上调用成员函数 toHtml()

> ID：12684532
> 
> 赞同：3
> 
> 时间：2012-10-02T04:26:43.397
> 
> 标签：magento

```
( ! ) SCREAM: Error suppression ignored for
( ! ) Fatal error: Call to a member function toHtml() on a non-object in C:\wamp\www\app\code\core\Mage\Core\Model\Layout.php on line 555 
```

安装了 Magento 1.7 和 WAMP 2.2 以及自定义模板。Magento 管理员工作完美，但前端给出了上述错误。

Magento 1.7 安装和自定义模板中的 Page.xml 根本没有以下代码，因此没有尝试以下修复：

```
<block type="core/profiler" output="toHtml"/> 
```

会成为：

```
<block type="core/profiler" output="toHtml" name="core_profiler"/> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T06:32:06.863

更改后：

```
<block type="core/profiler" output="toHtml"/> 
```

至

```
<block type="core/profiler" output="toHtml" name="core_profiler"/> 
```

在**app/design/frontend/base/default/layout （或您的自定义 page.xml）下的 page.xml** 中：从管理员刷新布局构建指令中的缓存或删除位于根目录下的**/var/cache**文件夹的内容你的magento文件夹

# python - 在 Python 中从 json 解析字符串

> ID：12684533
> 
> 赞同：0
> 
> 时间：2012-10-02T04:26:51.020
> 
> 标签：python, json, simplejson

我正在用 Python 解析一个 JSON 文档，我几乎已经完成了整个过程，除了我无法将 GPS 字符串转换为正确的形式。

我有以下表格：

```
"gsx$gps":{"$t":"44°21′N 68°13′W\ufeff / \ufeff44.35°N 68.21°W\ufeff / 44.35; -68.21\ufeff (Acadia)"} 
```

那就是来自这个 HTML 表单：

```
44°21′N 68°13′W / 44.35°N 68.21°W / 44.35; -68.21 (Acadia) 
```

我希望最终产品是一个看起来像这样的字符串：

```
(44.35, -68.21) 
```

这里有一些其他示例 JSON 字符串，只是为了给您更多的使用：

```
"gsx$gps":{"$t":"14°15′S 170°41′W\ufeff / \ufeff14.25°S 170.68°W\ufeff / -14.25; -170.68\ufeff (American Samoa)"}

"gsx$gps":{"$t":"38°41′N 109°34′W\ufeff / \ufeff38.68°N 109.57°W\ufeff / 38.68; -109.57\ufeff (Arches)"} 
```

我有以下内容：

```
GPSlocation = entry['gsx$gps']['$t'] 
```

然后我不知道如何将 GPSlocation 转换为我想要的形式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:28:07.983

不是超级优雅，但它可以工作......你也没有解析json......只是解析一个字符串......

```
import re
center_part = GPSLocation.split("/")[1]
N,W = centerpart.split()
N,W = N.split("\xb0")[0],W.split("\xb0")[0]
tpl = (N,W)
print tpl 
```

附带说明，这些不是整数...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T04:38:47.340

开始了：

```
import json
jstr = """{"gsx$gps":{"$t":"14°15′S 170°41′W\ufeff / \ufeff14.25°S 170.68°W\ufeff / -14.25; -170.68\ufeff (American Samoa)"}}"""
a = json.loads(jstr)
tuple(float(x) for x in a['gsx$gps']['$t'].split('/')[-1].split(u'\ufeff')[0].split(';')) 
```

给出：

```
(-14.25, -170.68) 
```

或从纯字符串：

```
GPSlocation = u"14°15′S 170°41′W\ufeff / \ufeff14.25°S 170.68°W\ufeff / -14.25; -170.68\ufeff (American Samoa)"
tuple(float(x) for x in GPSlocation.split('/')[-1].split(u'\ufeff')[0].split(';')) 
```

有些时间很花哨，为什么要避免花哨的正则表达式；）

```
import re
import timeit
setup='GPSlocation = u"14°15′S 170°41′W\ufeff / \ufeff14.25°S 170.68°W\ufeff / -14.25; -170.68\ufeff (American Samoa)"; import re'
print timeit.timeit("map(float, GPSlocation.split('/')[-1].split(u'\ufeff')[0].split(';'))", setup=setup)
print timeit.timeit("map(float, re.findall(r'(-?\d+(?:\.\d+)?)', GPSlocation)[-2:])", setup=setup)

5.89355301857
22.6919388771 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T04:45:41.637

您可以使用正则表达式提取数据：

```
>>> import re
>>> text = '''"gsx$gps":{"$t":"44?21?N 68?13?W\ufeff / \ufeff44.35?N 68.21?W\ufeff / 44.35; -68.21\ufeff (Acadia)"}'''
>>> map(float, re.findall(r'(-?\d+(?:\.\d+)?)', text)[-2:])
[44.35, -68.21] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T05:20:08.093

```
re.sub(r'.+/ (-?\d{1,3}\.\d\d); (-?\d{1,3}\.\d\d)\\.+',
       "(\g<1>, \g<2>)",
       "44°21′N 68°13′W\ufeff / \ufeff44.35°N 68.21°W\ufeff / 44.35; -68.21\ufeff (Acadia)") 
```

# sql - 如何将 FOR XML Path 的输出存储在变量中？

> ID：12684534
> 
> 赞同：8
> 
> 时间：2012-10-02T04:26:50.407
> 
> 标签：sql, sql-server, sql-server-2008

我想将 XML Path 的输出存储在一个变量中。然而这不起作用：

```
Declare @Tab    dbo.SingleColumnTable

Insert INTO @Tab

Values(
    'Jack'
)

Insert INTO @Tab

Values(
    'Armageddon'
)

Declare @RetVal varchar(8000) = ''

Select Top 1 @RetVal = Data
From
(
    Select ';' + ' ' + Name as 'Data'
               From @Tab t2
               for xml path('')
) v 
```

如您所见，我正在尝试将返回的输出的列名设置为 Data 但它不起作用。我收到错误`Invalid column name 'Data'.`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-02T04:37:13.003

尝试改变

```
Select Top 1 @RetVal = Data 
From 
( 
    Select ';' + ' ' + Name as 'Data' 
               From @Tab t2 
               for xml path('') 
) v 
```

到

```
Select @RetVal = 
( 
    Select ';' + ' ' + Name as Data
   From @Tab t2 
   for xml path('') 
) 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/d41d8/4784/0)

# java - 如何为 Android 应用托管 Java RESTful Web 服务

> ID：12684536
> 
> 赞同：4
> 
> 时间：2012-10-02T04:27:04.993
> 
> 标签：java, android, web-services, rest

我正在寻找开发一个 java REST web 服务来与我也在开发的我的 android 应用程序一起工作，我一直在努力寻找托管服务的最佳选择，我发现的一切似乎都在引导我走向不同的方向。

谁能给我关于托管 java REST Web 服务的最佳方式的建议？我可以做linux或windows，对灯栈和IIS比较熟悉。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T04:32:16.950

我建议查看用于托管的 Google App Engine，并用 Java 编写服务。我只是以这种方式为我正在开发的应用程序设置了一些服务，它既快速又简单，目前它是免费的，用于非常慷慨的有限使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:30:28.023

因此，如果您熟悉灯栈，为什么不使用 php 来提供 REST 服务呢？查看[zend 的 REST 实现](http://framework.zend.com/manual/1.12/en/zend.rest.server.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T06:34:10.950

公开 REST 类型对作为 JPA 实体持久化的资源的访问非常简单`Play! framework`：

*   [http://www.playframework.org](http://www.playframework.org)

*   [RESTful 畅玩！框架](https://stackoverflow.com/questions/4379485/restful-on-play-framework)

**托管：** `Heroku` ( [http://www.heroku.com](http://www.heroku.com) ) 支持将 Java 作为一种语言（以及 Ruby、Node.js、Clojure、Python 和 Scala）和`Play!`作为一种框架，如果您是去玩！route;-) ...虽然显然不是唯一的用例。

**开发生命周期：** [这个概述](http://blog.heroku.com/archives/2011/8/29/play/)和[本教程](https://devcenter.heroku.com/articles/database-driven-play-apps)`Heroku`应该让您对 git 和+的开发生命周期有一个很好的感觉`Play`；如果来自“常规”Java 工具类型的环境，您可能会发现这种方法令人耳目一新。

**IDE 集成：** `Play!`有用于 NetBeans、IntelliJ IDEA 和 Eclipse 的**插件（** [http://www.playframework.org/documentation/1.2/ide](http://www.playframework.org/documentation/1.2/ide)）

# ruby - 如何在 Ruby 中编辑文件的每一行，而不使用临时文件

> ID：12684538
> 
> 赞同：0
> 
> 时间：2012-10-02T04:27:22.933
> 
> 标签：ruby, file-io

有没有办法在不涉及 2 个文件的情况下编辑文件中的每一行？说，原始文件有，

```
test01
test02
test03 
```

我想编辑它

```
test01,a
test02,a
test03,a 
```

尝试了代码块中显示的内容，但它替换了一些字符。

将其写入临时文件，然后替换原始文件，但是，我需要经常编辑文件，因此更喜欢在文件本身中进行。任何指针表示赞赏。

谢谢！

```
File.open('mytest.csv', 'r+') do |file|
  file.each_line do |line|        
      file.seek(-line.length, IO::SEEK_CUR)
      file.puts 'a'        
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:42:23.247

```
f = open 'mytest.csv', 'r+'
r = f.readlines.map { |e| e.strip << ',a' }
f.rewind
f.puts r
f.close # you can leave out this line if it's the last one that runs 
```

这是一个单行变体，请注意在这种情况下 2 个描述符保持打开状态，直到程序退出。

```
open(F='mytest.csv','r+').puts open(F,'r').readlines.map{|e|e.strip<<',a'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:45:00.243

写入文件不会插入；它总是覆盖。这使得就地修改文本变得很尴尬，因为每次添加新内容时都必须重写文件的其余全部内容。

如果文件足够小以适合内存，您可以将其读入、修改并写回。否则，您确实最好使用临时文件。

# makefile - 为ffmpeg编写测试时，如何编写makefile？

> ID：12684543
> 
> 赞同：0
> 
> 时间：2012-10-02T04:28:55.697
> 
> 标签：makefile, ffmpeg

这里有人知道如何为ffmpeg的测试代码编写makefile吗？

makefile是由automake制作的吗？

我找到了演示的makefile，但没有找到makefile.in，所以我无法编写makefile.in。
你有makefile.in吗？

我已经搜索了一个星期的答案，但没有解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:41:41.247

这是来自 ffmpeg 示例目录的 makefile：

```
# use pkg-config for getting CFLAGS and LDLIBS
FFMPEG_LIBS=    libavdevice                        \
                libavformat                        \
                libavfilter                        \
                libavcodec                         \
                libswresample                      \
                libswscale                         \
                libavutil                          \

CFLAGS += -Wall -O2 -g
CFLAGS := $(shell pkg-config --cflags $(FFMPEG_LIBS)) $(CFLAGS)
LDLIBS := $(shell pkg-config --libs $(FFMPEG_LIBS)) $(LDLIBS)

EXAMPLES=       decoding_encoding                  \
                demuxing                           \
                filtering_video                    \
                filtering_audio                    \
                metadata                           \
                muxing                             \
                scaling_video                      \

OBJS=$(addsuffix .o,$(EXAMPLES))

# the following examples make explicit use of the math library
decoding_encoding: LDLIBS += -lm
muxing:            LDLIBS += -lm

.phony: all clean-test clean

all: $(OBJS) $(EXAMPLES)

clean-test:
    $(RM) test*.pgm test.h264 test.mp2 test.sw test.mpg

clean: clean-test
    $(RM) $(EXAMPLES) $(OBJS) 
```

如您所见，它是一个简单的手写 Makefile，因此没有自动工具的东西，您可以轻松更改它

# jquery - jQuery 验证 - 如何使用现有标签

> ID：12684544
> 
> 赞同：0
> 
> 时间：2012-10-02T04:29:04.160
> 
> 标签：jquery, jquery-validate

所以我使用 jQuery 和验证插件来验证客户端的表单输入。当然我需要在服务器上重新验证它。我想将错误标签静态地放入所有表单项的 HTML 中。因此，即使没有错误，它们仍然会存在。我想这样做，以便 jQuery 验证和 PHP 都可以输出到相同的标签。

现在我的问题是——如何强制验证插件输出到现有标签？有可能吗，如果没有，我怎么能完成我想要的？当然，这是一件很常见的事情，但我还没有找到任何答案（也许我只是不知道要搜索什么）。

这是我所追求的一个小例子。

```
<li>
   <label for="description" class='form_desc'>Description</label>
   <textarea name="description" id='description' class='required' title="A description of your listing." rows="15" ></textarea>
   <label for='description' class='error'>This is the tag I want to use.</label>
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:38:36.887

如果我正确理解您的问题，您可以使用 jquery 验证。它更容易使用。看看下面的代码。

```
 jQuery("#description").validate({
            expression: "if(VAL) return true; else return false;",
            message: "<?php echo JText::_('DESC_ERROR_BLANK'); ?>"
        }); 
```

在服务器级别（PHP），您可以定义 DESC_ERROR_BLANK，如下所示。

```
define("DESC_ERROR_BLANK", "This is the tag I want to use"); 
```

在服务器级别

```
If($_POST['description'] == '')
{
 //php validation goes here
 //use the same 'DESC_ERROR_BLANK' to output the error here
} 
```

希望这能解决您的问题。如果您有任何问题，请随时提问。谢谢。

# oracle - oracle 使用连接语法更新

> ID：12684550
> 
> 赞同：0
> 
> 时间：2012-10-02T04:30:16.443
> 
> 标签：oracle, oracle8i

我是 oracle 8i PL/SQL 的新手，请帮助我进行 PL/SQL 简单更新，我熟悉 T-SQL，但对 PL/SQL 感到困惑。

```
Update a
SET a.column = null
FROM table1 a INNER JOIN table2 b ON a.fields1=b.fields1
WHERE a.fields3=[criteria] 
```

任何帮助将不胜感激，

Rgds阿凡

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T04:40:14.593

Oracle 不支持使用连接语法进行更新。但是你可以这样做：

```
update table1 a set field1 = null 
where field3 = [criteria] and 
    exists (select 1 from table2 where field1 = a.field1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-12T07:49:27.397

我知道这个问题很老，但这可能有效：

```
merge into table1 t
enter code hereusing (select a.IdColumnt from table1 a INNER JOIN table2 b ON a.fields1=b.fields1 WHERE a.fields3=[criteria]) u
on t.IdColumnt = u.IdColumnt
when matched then update set t.column = null;

commit; 
```

# css - 消除 HTML/CSS 中图像之间的空白

> ID：12684551
> 
> 赞同：0
> 
> 时间：2012-10-02T04:30:22.683
> 
> 标签：css, image

我正在制作可打印的证书。由于默认情况下未启用背景图像，因此我通过放置 img 标签来制作边框。

由于某种原因，img 标签之间存在几个像素的间隙......

[jsfiddle](http://jsfiddle.net/chGzP/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T04:40:14.217

你只需要让你的图像块元素：

```
img { display: block; } 
```

一切都会顺理成章。默认情况下，图像是内联元素，因此正如 Xavi 所说，您从换行符中获得了空白。当然，如果涉及到任何其他图像，您将需要优化您的选择器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T04:34:29.650

用于`position: relative;`移动图像以填补空白

```
#bottom_border{
   position: relative; 
   bottom: 5px;
 }

#top_border{
   position: relative; 
   top: 5px;
 } 
```

[**我的小提琴**](http://jsfiddle.net/chGzP/5/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T04:42:17.417

设置`Vertical-align`在你的`#top_border`和`#bottom_border`作为

```
#top_border{ vertical-align:bottom}
#bottom_border{vertical-align:top} 
```

[小提琴](http://jsfiddle.net/chGzP/10/)在这里

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T04:35:12.907

尝试添加`font-size: 0`到`#certificate`. 您看到的空白实际上是空格（字符）。我完全承认将字体大小设置为零有点麻烦。幸运的是，当完全支持 css3[的空白规则](http://dev.w3.org/csswg/css3-text/#white-space-rules)[`text-space-collapse: collapse`](http://realworldvalidator.com/css/module/Text/text-space-collapse)时，您可以改用它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T04:50:06.290

添加

```
#certificate img { display: block; } 
```

到 css 的结尾

# android - 无法设置 Cocos2dx [Android、Eclipse、Windows]

> ID：12684557
> 
> 赞同：1
> 
> 时间：2012-10-02T04:30:41.887
> 
> 标签：android, game-engine, cocos2d-x

[通过本教程](http://www.multigesture.net/articles/how-to-setup-cocos2d-x-windows-and-android)在 Windows 上的 Eclipse 中设置好 cocos2d-x 的 Android 开发环境后，我以为我已经解决了所有问题并准备好进行开发，只是我无法将示例项目复制到自己的工作区中..（仍然可以't）..

但是，后来我发现[这个教程](http://www.raywenderlich.com/11283/cocos2d-x-for-ios-and-android-getting-started)，..它是用于在iOS上的Eclipse中设置cocos2dx for android..在下一个教程中，作者不再使用Cgywin或MinGW..他只是用Android NDK设置..

我很好奇的是

1.  第一个教程和第二个教程之间有很多区别。这仅仅是因为第二个教程仅适用于 iOS 吗？
2.  我没有看到任何 CPP 文件，除了在`jni/hellocpp/main.cpp`项目内容中的“”项目中的“ `org.cocos2dx.hellocpp.HelloCpp`”项目。但是，第二作者在他的教程中提到了很多 CPP 文件。为什么 ？因为cocos2dx版本不同？
3.  当我打开`main.cpp`文件时，它显示了很多错误.. 几乎所有这些都是`xxx could not be resolved`. 我已经正确添加了`..\cocos2dx\include`路径和`..\platforms\android-9\arch-arm\usr\include`路径。为什么 ？
4.  我真的无法运行示例程序..它说`java.io.IOException: An established connection was aborted by the software in your host machine`..在Logcat中`don't support gles2.0`..为什么？那是因为我的 JVM 是 Java SE 7 Server Version 吗？第一作者提到“JavaSE 7”不适用于 cocos2dx。它仅适用于“JavaSE 6”。但是，我还有其他依赖于“JavaSE 7”的 Android 应用程序项目。如何在“JavaSE 7”中运行示例项目？

很抱歉有 1001 个问题.. 我完全是 cocos2dx 的新手，真的很想用它做点什么.. :-)

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:34:36.317

如果您仍在寻找答案，这里有一些：

1）“无法解决”错误实际上是错误的，并且基于 eclipse 的错误预测。您应该关闭此错误报告（请参阅您拥有的第二个教程链接，它在最后向您展示了如何）。

2) 我最近使用了 cocos2d-x 2.x，而且（令我惊讶的是）它不支持在 AVD 上运行。我买了一个便宜的 eBay 旧 Galaxy S，应用程序运行良好。

3）您看不到 cpp 文件，因为它们最初仅添加到 make 文件中。您必须做一些额外的工作才能使它们出现在 eclipse 中。（再次，检查第二个教程）。

# c# - 使用 C# 更新 WISP（Windows Ink 服务平台）的注册表更改

> ID：12684560
> 
> 赞同：0
> 
> 时间：2012-10-02T04:31:04.633
> 
> 标签：c#, windows, registry, touch

我正在尝试在 Windows 7 或 8 上为我的 WPF 绘图应用程序启用/禁用触摸功能。

据我搜索，链接[如何在应用程序、窗口或控件级别关闭所有触摸输入？](https://stackoverflow.com/questions/5120890/how-to-turn-off-all-touch-input-at-application-window-or-control-level)为触摸功能状态提供注册表的正确位置。

但是，它并没有受到即时影响，因为 Windows 系统可能无法确认这些更改。

在我的假设中，需要使用**SystemParametersInfo**刷新 User32.dll才能在不重新启动的情况下进行更改。但很难弄清楚如何做到这一点，因为我不知道哪个[*SPI_*](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724947%28v=vs.85%29.aspx#Input)[与](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724947%28v=vs.85%29.aspx#Input)*WISP 相关。*

 *有没有其他方法或者你能帮我实现它吗？

示例代码如下（与上面的 StackOverflow 引用的链接非常相​​似）

```
 RegistryKey regKey = Registry.CurrentUser.OpenSubKey(@"Software\Microsoft\Wisp\Touch", true);
        if (regKey != null)
        {
            regKey.SetValue("TouchGate", 0x00000000); // Turn off touch.
            regKey.Close();

            // NOTIFY REGISTRY CHANGES TO WINDOWS
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T00:35:19.793

问题的当前答案*如何在应用程序、窗口或控件级别关闭所有触摸输入？*还提供了一种让 Windows 重新读取注册表的方法。请参阅：[答案的](https://stackoverflow.com/a/5128991/391693) `internal static void Notify_SettingChange()`方法。

**SystemParametersInfo**中没有记录用于触摸禁用的 SPI_* 常量。此外，那里的所有 SPI_ 常量都与可访问性功能有关 - 而不是像触摸这样的一般功能。*

# c# - 从文本文件中读取特定数据

> ID：12684563
> 
> 赞同：0
> 
> 时间：2012-10-02T04:31:23.463
> 
> 标签：c#, .net, file

我有一个如下的文本文件（它有几十万行）：

```
Header
AGROUP1
ADATA1|0000
ADATA2|0001
ADATA3|0002
D0000|TNE
D0001|TNE
D0002|TNE
AGROUP2
ADATA1|0000
ADATA2|0001
ADATA3|0002
D0000|TNE
D0001|TNE
D0002|TNE
AGROUP3
ADATA1|0000
ADATA2|0001
ADATA3|0002
D0000|TNE
D0001|TNE
D0002|TNE 
```

事实上，它有超过几十万行代码。

我需要基于组读取数据例如在一个方法中：

```
public void ReadData(string strGroup)
{
    if(strGroup == "AGROUP2)
       //Read from the text file starting from line  "AGROUP2" to "AGROUP3"(i.e lines under AGROUP2)
} 
```

我试过的是

```
 public void ReadData(string strGroup)
    {
             bool start = false;
             while ((line = reader.ReadLine()) != null)
                    {
                        if (line == strGroup && line.Length == 5)
                            start = true;
                        else if (line.Length == 5)
                            start = false;
                        if(start)
                            yield return line;
                    }
    } 
```

它工作正常，性能方面，它需要更长的时间，因为我的文本文件是一个非常非常大的文件......方法中的每一行都有 if 条件。

这是更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:55:05.967

如果您对文件结构有任何了解，可以帮助您使用它：

*   如果列表已排序，您可能知道何时停止解析。
*   如果列表包含跳转表或索引，您可以跳过行
*   如果这些组有特定数量的行，您可以跳过这些

如果没有，你注定要从上到下搜索，你将只能使用技术技巧来提高速度：

*   读取成批的行而不是单行
*   尽量避免在代码中创建许多可能阻塞垃圾收集器的微小对象（字符串）
*   如果您需要进行大量随机访问（在整个文件中来回访问），您可能会考虑先索引或拆分文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:56:34.590

如果您使用 bash 命令将大文件切割成更小的文件，并以 AGROUP# 作为第一行。我认为 bash 命令更加优化。

# c# - 在 Release 模式下快速构建项目，无需从 Debug 模式切换到 Release 模式

> ID：12684567
> 
> 赞同：2
> 
> 时间：2012-10-02T04:31:58.090
> 
> 标签：c#, visual-studio-2010

在我的工作中，我通常使用 Debug 模式来运行我的项目，并且我也想根据需要对其进行调试。有时，我还想将一个项目 DLL 部署到生产中。我必须在我的解决方案上从调试模式切换到发布模式并重新构建它。完成后，我从 Release 模式重新切换到 Debug 模式以返回我的工作。

当我的解决方案仍处于调试模式时，我需要最快的方式或可以选择在我选择的项目上构建 Release。

我正在使用 VS 2010 和 C#。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T04:35:41.780

不确定是否有类似的直接捷径。但你可以这样做：

```
Alt + B , O, R, Enter
F6
Alt + B, O, D, Enter 
```

它实际上是从菜单中打开选项，如下所示：

```
Alt + B -> Build Menu
O -> Configuration Manager
R -> To Select Release Mode
Enter -> To close the Configuration Manager

F6 -> Build
Alt + B -> Build Menu
O -> Configuration Manager
D -> To Select Debug Mode
Enter -> To close the Configuration Manager 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T04:54:01.543

您可以使用 devenv.exe 将工具菜单条目添加到 Visual Studio，并在参数字段中使用命令行参数“$(SolutionDir)$(SolutionFileName)/build Release”，以当前打开的解决方案和配置模式作为参数发送到devenv.exe 的新命令行实例。这可以通过 Visual Studio 中的“工具”菜单、“外部工具”项来完成。这不需要您在打开的解决方案中更改构建配置，您可以为该项目分配一个菜单快捷键。

IE：

devenv c:\temp\solution.sln /build 发布

您可能还希望通过执行“devenv /？”来查看其他 devenv 参数。在提示下。此外，如果您在 Visual Studio 中打开了解决方案，请确保在发布构建之前保存您的源文件。

# android - Android服务绑定麻烦

> ID：12684577
> 
> 赞同：1
> 
> 时间：2012-10-02T04:33:09.067
> 
> 标签：android, exception, service, bind, classcastexception

你好社区我有以下问题。

我的清单文件如下所示。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.someCo.test"
    android:versionCode="1"
    android:versionName="1.0">
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/> 
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.CHANGE_WIFI_STATE"/>
    <uses-permission android:name="android.permission.CHANGE_WIFI_MULTICAST_STATE"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />    
    <uses-feature android:name="android.hardware.location.network" />
    <uses-feature android:name="android.hardware.location.gps" />   
    <uses-feature android:name="android.hardware.wifi" />
    <uses-sdk android:minSdkVersion="8" />

    <application android:icon="@drawable/ic_launcher" android:label="@string/app_name" >
        <service android:name = ".BackgroundService" android:exported="true" />
    </application>

</manifest> 
```

我的 Activity 的 onCreate 具有以下代码行。

```
this.context.startService(new Intent(this.context, com.someCo.test.BackgroundService.class));
         this.context.bindService(new Intent(this.context, com.someCo.test.BackgroundService.class), serviceConnection, Context.BIND_AUTO_CREATE); 
```

我的活动也有以下私人课程。

```
private ServiceConnection serviceConnection = new ServiceConnection() {

        public static final String TAG = "Service Connection Class";

          public void onServiceConnected(ComponentName className, IBinder service) {

              try {
                com.someCo.test.BackgroundService.MyBinder binder = (com.someCo.test.BackgroundService.MyBinder)service;
                backgroundService = binder.getService();

            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            //backgroundService = ((BackgroundService.MyBinder) service).getService();

            //Toast.makeText(context,"service connected", Toast.LENGTH_LONG);
            Log.i(TAG, "onServiceConnected");

          }

          //@Override
          public void onServiceDisconnected(ComponentName className) {
            backgroundService = null;
          }
        }; 
```

我的服务有以下内容。

```
 private final IBinder binder = new MyBinder();

public class MyBinder extends Binder{

    private static final String TAG = "MyBinder";

    BackgroundService getService(){
        Log.i(TAG, "get service");
        return BackgroundService.this;
    }
}

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    Log.i(TAG, "onBind destroyed");
    return binder;

}

@Override
public boolean onUnbind(Intent intent) {
    Log.i(TAG, "onUnbind destroyed");
  return super.onUnbind(intent);
} 
```

在这一行，我得到了代码下方的异常。

```
(com.someCo.test.BackgroundService.MyBinder)service;
                    backgroundService = binder.getService(); 
```

java.lang.classCastException：android.os.BinderProxy。

有人可以指出我的错误，我似乎无法弄清楚。请原谅非常冗长的代码，因为我试图在调试这个问题时尽可能明确。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:43:37.120

我不知道您为什么使用两种方式（StartService 和 BindService）编写启动服务的代码？

这是[绑定服务的示例](http://dharmendra4android.blogspot.in/2012/05/bind-service-using-ibinder-class.html)。你可以参考这个博客。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:50:27.083

我已经多次尝试过这个东西。但是从我的经验来看，如果只是需要绑定服务来从服务中获取一些数据，则没有必要这样做。

只需使用本地广播管理器。将数据从服务发送到应用程序就足够了。它非常简单、安全、不易发生内存泄漏。

# c# - 保存后流利的 NHibernate 不加载跨数据库引用对象

> ID：12684580
> 
> 赞同：1
> 
> 时间：2012-10-02T04:33:47.660
> 
> 标签：c#, fluent-nhibernate

当我第一次调用一个对象时，跨数据库对象得到了完美的水合；但是，当我保存一个对象时，然后获取 CreateUser 和 UpdateUser 为空。OriginalNote 参考一直有效（它的 CreateUser 不为空）。我试图在保存后获取新 ID 以重新填充整个对象图。原始笔记的第一个 Get 效果很好，但填充刚刚保存的对象的那个不起作用。

映射：

```
public sealed class DocumentNoteMap : EntityMapBase<DocumentNote>
{
    public DocumentNoteMap()
    {
        Table("DocDataNote");
        Id(x => x.DocDataNoteID).GeneratedBy.Native().UnsavedValue(null);

        Map(x => x.DocDataID);
        Map(x => x.DocDataEventID);
        Map(x => x.NoteText).Column("Note");
        References(x => x.OriginalNote).Class<DocumentNote>().Column("ParentDocDataNoteID")
            .Not.LazyLoad()
            .Not.Update();

        References(x => x.UpdateUser).Class<CasUser>().Column("UpdateBy")
            .ReadOnly()
            .Not.LazyLoad()
            .Not.Update();
        References(x => x.CreateUser).Class<CasUser>().Column("CreateBy")
            .ReadOnly()
            .Not.LazyLoad()
            .Not.Update();
    }

public class CasUserMap : ClassMap<CasUser>
{
    public CasUserMap()
    {
        Schema("CAS.dbo");
        Table("CAS_User");
        Id(x => x.CASUserID);

        Map(x => x.FirstName);
        Map(x => x.LastName);
    }
} 
```

文档注释存储库：

```
[Repository]
public class DocumentNoteRepository : HibernateRepositoryBase<DocumentNote,int?>, IDocumentNoteRepository
{
    public DocumentNoteRepository(ISessionFactory sessionFactory)
        :base(sessionFactory)
    {

    }

    public int? Save(DocumentNote entity, bool autoFlush)
    {
        var persisted = (DocumentNote)CurrentSession.Merge(entity);
        entity.DocDataNoteID = persisted.DocDataNoteID;
        if (autoFlush) { CurrentSession.Flush(); }

        return entity.DocDataNoteID;
    }
} 
```

get 方法在基类中：

```
/// <summary>
/// Base class for data access operations.
/// </summary>
public abstract class HibernateRepositoryBase<TEntity, TId> : IRepository<TEntity, TId> where TEntity : class
{
    private ISessionFactory _sessionFactory;

    public IQueryable<TEntity> Query()
    {
        return CurrentSession.Query<TEntity>();
    }
    protected HibernateRepositoryBase(ISessionFactory sessionFactory)
    {
        _sessionFactory = sessionFactory;

    }

    /// <summary>
    /// Session factory for sub-classes.
    /// </summary>
    protected ISessionFactory SessionFactory
    {
        get { return _sessionFactory; }
        private set { _sessionFactory = value; }
    }

    /// <summary>
    /// Get's the current active session. Will retrieve session as managed by the 
    /// Open Session In View module if enabled.
    /// </summary>
    protected ISession CurrentSession
    {
        get
        {
            var session = _sessionFactory.GetCurrentSession();
            _sessionFactory.GetCurrentSession().EnableFilter("TenantFilter").SetParameter("TenantID", User.Current.OrganizationId);
            return session;
        }
    }

    [Transaction(ReadOnly = true)]
    public TEntity Get(TId id)
    {

        var entity=CurrentSession.Get<TEntity>(id);
        if (entity == null)
        {
            throw new DataException("Could not find entity of Type{0} and Primary Key {1}".FormatWith(typeof(TEntity), id.ToString()));   
        }
        // evict so changes don't get inadvertently persisted
        //CurrentSession.Evict(entity);

        return entity;
    }
    [Transaction(ReadOnly = true)]
    public IList<TEntity> GetAll()
    {
        var listOfEntities = CurrentSession.CreateCriteria<TEntity>().List<TEntity>();

        // evict so changes don't get inadvertently persisted - can change when OSIV is removed
        listOfEntities.ToList().ForEach(e => CurrentSession.Evict(e));

        return listOfEntities;
    }
} 
```

编辑：

我尝试过的事情：
1.尝试在保存后（在获取之前）强制刷新。
2\. 保存后驱逐保存的对象（获取前）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:23:41.880

我发现了我的问题。当我试图驱逐我的对象时，我驱逐了错误的对象。我正在驱逐我正在合并的对象（实体），而不是 NHibernate 在合并中返回的对象（持久化）。

驱逐从合并返回的持久对象（如下所示）解决了这个问题。

```
 public int? Save(DocumentNote entity, bool autoFlush)
    {
        var persisted = (DocumentNote)CurrentSession.Merge(entity);
        entity.DocDataNoteID = persisted.DocDataNoteID;
        if (autoFlush)
        {
            CurrentSession.Flush();
            CurrentSession.Evict(persisted);
        }

        return entity.DocDataNoteID;
    } 
```

# javascript - 允许用户一次只创建一个谷歌地图标记

> ID：12684589
> 
> 赞同：2
> 
> 时间：2012-10-02T04:35:08.543
> 
> 标签：javascript, google-maps-api-3, geolocation, google-maps-markers

我有以下代码，允许用户单击地图上的某个位置，并记录他们单击的任何位置的 GPS 位置。它在后端正常工作，但每当用户点击不止一次时，它就会在地图上留下多个标记。它始终保留最后一个位置，因此它可以工作，但对于不知道后端发生了什么的用户来说，这有点令人困惑。我可以做一些小技巧来做到这一点，以便每当用户单击以创建新标记时，旧标记就会被删除？

代码：

```
 var map;
var GPSlocation;

function initialize() {
  var haightAshbury = new google.maps.LatLng(37.7699298, -93.4469157);
  var mapOptions = {
    zoom: 4,
    center: haightAshbury,
    mapTypeId: google.maps.MapTypeId.TERRAIN
  };
  map =  new google.maps.Map(document.getElementById("map"), mapOptions);

  google.maps.event.addListener(map, 'click', function(event) {
    addMarker(event.latLng);
  });
}

function addMarker(location) {
//I save the location right here
    GPSlocation = location;
    document.getElementById("GPSlocation").value = GPSlocation;
    marker = new google.maps.Marker({
    position: location,
    map: map
  });
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T04:41:04.077

只需使用实例`setPosition`方法：`google.maps.Marker`

```
var map,
    GPSlocation,
    marker;  // <-- Added

// ... snip ...

function addMarker(location) {
    // ... snip ...
    if (!marker) {
        // Create the marker if it doesn't exist
        marker = new google.maps.Marker({
        position: location,
        map: map
        });
    }
    // Otherwise, simply update its location on the map.
    else { marker.setPosition(location); }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T04:40:19.580

通过在函数外部声明标记使标记成为全局变量：

```
var marker;
function addMarker(location) {
    GPSlocation = location;
    document.getElementById("GPSlocation").value = GPSlocation;
    marker = new google.maps.Marker({
        position: location,
        map: map
    });
} 
```

您还可以通过仅更新标记的位置而不是创建新对象来提高效率：

```
var marker;
function addMarker(location) {
    GPSlocation = location;
    document.getElementById("GPSlocation").value = GPSlocation;
    if (!marker) {
        marker = new google.maps.Marker({
            position: location,
            map: map
        });
    } else {
        marker.setPosition(location);
    }
} 
```

# sql - “SUM”的 PDO 语句错误

> ID：12684591
> 
> 赞同：0
> 
> 时间：2012-10-02T04:35:29.993
> 
> 标签：sql, pdo

我有一个查询，我试图从一个查询中的字段收集计数以避免查询 4 ​​次，我将它们全部添加到一个查询中。

但我收到此错误：

```
SQLSTATE[42000]: Syntax error or access violation: 1064
You have an error in your SQL syntax; check the manual that corresponds
to your MySQL server version for the right syntax to use near

           ')) as english,
            sum(if(class='2')) as science,
            sum(if(class='3')) as french 
            F' at line 3 
```

我不确定语法的含义是什么，所以希望有人知道……我的查询是这样的：

```
$stmt = $pdo->prepare("SELECT 
            count(id) AS total, 
            sum(if(class=?)) as english,
            sum(if(class=?)) as science,
            sum(if(class=?)) as french 
            FROM school");

    try{
        $stmt->execute(array(1,2,3));
    } catch (PDOException $e){
        echo $e -> getMessage();  exit;
    } 
```

有谁知道这个的正确语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:45:27.580

至少，您在每个总和行中都错过了一个右括号。

然后，我不确定 if(..,..,..) 语句，我通常写 CASE WHEN (condition) THEN expr1 ELSE expr2 END

# xml - 将数据合并到 KML 文件中 - 加利福尼亚邮政编码热图

> ID：12684598
> 
> 赞同：0
> 
> 时间：2012-10-02T04:36:40.587
> 
> 标签：xml, excel, kml, google-earth, google-earth-plugin

我在一家保险公司工作，正在将投资回报数据映射到谷歌地图上。我正在尝试根据 ROI 数据的热图为加利福尼亚州的邮政编码地图着色。拉链的成功率越高，颜色就越热。

我有一个从人口普查数据构建的 KML 文件，该文件具有每个邮政编码的形状层。是`<name>`邮政编码，并且`<styleURL>`将映射到#A - #I 从热到冷的颜色。默认样式是#empty，没有数据。我有一个包含 2 列、邮政编码和颜色代码的 excel 表。我可以使用什么程序将我的 excel 表中的数据合并到我的 KML 文件中的地标？我尝试在 Excel 中使用 KML 文件，并设法将我的数据与地标对齐，但意识到 Excel 无论如何都无法导出该数据......

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:37:33.403

你看过 FusionTables 吗？

[https://developers.google.com/fusiontables/docs/samples/heatmap?hl=en](https://developers.google.com/fusiontables/docs/samples/heatmap?hl=en)

您可以导入您的 KML 文件。

# android - 在安卓中的位置

> ID：12684600
> 
> 赞同：0
> 
> 时间：2012-10-02T04:37:00.507
> 
> 标签：android, geolocation, gps, location, android-location

我使用 GPS 测量行进距离。问题是 GPS 有时长时间不更新位置变化。

有什么解决办法吗？

```
 locationListen = new LocationListener() {

        public void onLocationChanged(Location currentLocation) {
            if (prevLocation != null){
                test = currentLocation.distanceTo(prevLocation);
                distance+=test;
            }
            prevLocation = currentLocation;

        }

        public void onStatusChanged(String provider, int status, Bundle b) {
            switch (status) {
            case LocationProvider.OUT_OF_SERVICE:
                Toast.makeText(MainActivity.this,
                        "Status Changed: Out of Service " + provider,
                        Toast.LENGTH_SHORT).show();
                break;
            case LocationProvider.TEMPORARILY_UNAVAILABLE:
                Toast.makeText(
                        MainActivity.this,
                        "Status Changed: Temporarily Unavailable "
                                + provider, Toast.LENGTH_SHORT).show();
                break;
            case LocationProvider.AVAILABLE:
                Toast.makeText(MainActivity.this,
                        "Status Changed: Available " + provider,
                        Toast.LENGTH_SHORT).show();
                break;
            }
        }

        public void onProviderDisabled(String s) {
        }

        public void onProviderEnabled(String s) {
        }
    };

    startOperation.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View but) {
            if (startOperation.getText().equals("Start Calculating Fare")) {
                mHandler.post(run);
                myManager.requestLocationUpdates(
                                LocationManager.GPS_PROVIDER, 1000, 10,
                                locationListen);
                startOperation.setText("Stop the calculations");
            } else {
                mHandler.removeCallbacks(run);
                myManager.removeUpdates(locationListen);
                finalInfos();
            }
        }
    }); 
```

我的位置监听器代码。它只是使用 GPS 更新。正如我所说，GPS有时太长而无法检测到位置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:21:46.263

您在代码中明确请求仅 GPS 的位置提供程序。这迫使 Android 仅依赖 GPS，并具有其所有缺点（例如，GPS 需要清晰的天空视野才能工作）。

为了获得更可靠的设备跟踪，您必须使用更可靠和灵活的定位策略，根据变化的外部场景（室内/室外等）相应地更改当前位置提供者。更好的是，您可以同时使用一整套不同的位置提供程序（即：“混合”定位系统）。

看看这些以前回答过的 SO 问题：

[同时拥有多个位置提供商](https://stackoverflow.com/questions/9785768/more-than-one-location-provider-at-same-time)

[为多个提供者使用 requestLocationUpdates](https://stackoverflow.com/questions/4150462/using-requestlocationupdates-for-more-than-one-provider)

以及 Android 文档的这些页面：

[http://developer.android.com/guide/topics/location/strategies.html](http://developer.android.com/guide/topics/location/strategies.html)

[http://developer.android.com/training/basics/location/locationmanager.html](http://developer.android.com/training/basics/location/locationmanager.html)

# java - Android Timer 时间表与 scheduleAtFixedRate

> ID：12684604
> 
> 赞同：44
> 
> 时间：2012-10-02T04:37:25.950
> 
> 标签：java, android, multithreading, timer, scheduled-tasks

我正在编写一个每 10 分钟录制一次音频的 Android 应用程序。我正在使用计时器来做到这一点。但是 schedule 和 scheduleAtFixedRate 有什么区别呢？使用其中一种是否有任何性能优势？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-10-02T04:48:24.697

[这个非Android文档](http://carbon.sourceforge.net/modules/scheduler/docs/Usage.html)最好地解释了这种差异：

固定速率计时器 ( `scheduleAtFixedRate()`) 基于开始时间（因此每次迭代都将在 执行`startTime + iterationNumber * delayTime`）。

> 在固定速率执行中，每次执行都是相对于初始执行的计划执行时间安排的。如果由于任何原因（例如垃圾收集或其他后台活动）延迟了执行，则会快速连续发生两次或更多执行以“赶上”。

固定延迟计时器 ( `schedule()`) 基于先前的执行（因此每次迭代都将在 执行`lastExecutionTime + delayTime`）。

> 在固定延迟执行中，每次执行都是相对于前一次执行的实际执行时间安排的。如果由于任何原因（例如垃圾收集或其他后台活动）延迟执行，则后续执行也会延迟。

除此之外，没有任何区别。您也不会发现显着的性能差异。

如果您在想要与其他东西保持同步的情况下使用它，您将需要使用`scheduleAtFixedRate()`. 延迟`schedule()`会漂移并引入错误。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-02T04:43:49.583

一个简单的`schedule()`方法将立即执行，而`scheduleAtFixedRate()`方法需要和额外的参数，用于在特定时间间隔内再次重复任务。

通过查看语法：

```
Timer timer = new Timer(); 
timer.schedule( new performClass(), 30000 ); 
```

这将在 30 秒时间段间隔结束后执行一次。一种时间输出动作。

```
Timer timer = new Timer(); 
//timer.schedule(task, delay, period)
//timer.schedule( new performClass(), 1000, 30000 );
// or you can write in another way
//timer.scheduleAtFixedRate(task, delay, period);
timer.scheduleAtFixedRate( new performClass(), 1000, 30000 ); 
```

这将在 1 秒后开始，并每隔 30 秒时间间隔重复一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-12T08:45:05.953

根据**java.util.Timer.TimerImpl.TimerHeap**代码

```
// this is a repeating task,
if (task.fixedRate) {
    // task is scheduled at fixed rate
    task.when = task.when + task.period;
} else {
    // task is scheduled at fixed delay
    task.when = System.currentTimeMillis() + task.period;
} 
```

--

```
java.util.Timer.schedule(TimerTask task, long delay, long period) 
```

将设置`task.fixedRate = false;`

```
java.util.Timer.scheduleAtFixedRate(TimerTask task, long delay, long period) 
```

将设置`task.fixedRate = true;`

顺便说一句，屏幕关闭时计时器不起作用。您应该使用警报管理器。

有示例：http: [//developer.android.com/training/scheduling/alarms.html](http://developer.android.com/training/scheduling/alarms.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-02T04:44:41.690

在**计划**的情况下，它仅在适当的时间到来时执行一次。另一方面**scheduleAtFixedRate**有一个额外的参数**period**包含后续执行之间的时间量（以毫秒为单位）。

更多信息可以在这里找到

[http://developer.android.com/reference/java/util/Timer.html#schedule(java.util.TimerTask](http://developer.android.com/reference/java/util/Timer.html#schedule(java.util.TimerTask) , long)

# scheme - 返回函数的方案函数正在返回意外的值

> ID：12684608
> 
> 赞同：0
> 
> 时间：2012-10-02T04:37:48.537
> 
> 标签：scheme, return, r5rs

我在计划中有一个功能

```
 (define (m-m f)
      (let ((count 0))
      (define (h-m-c?) count)
      (define (r-c) (begin (set! count 0) count))
      (define (m-f m)
        (cond ((eq? m 'h-m-c?) (h-m-c))
              ((eq? m 'r-c) (r-c))
              (else (set! count (+ 1 count)) f)))
      m-f)) 
```

其中 mf 是返回的函数。

但是，它不是返回一个值，而是返回

```
 #<procedure:m-f> 
```

代码似乎没有错误，那么为什么不返回可用值呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T06:18:14.510

你告诉它返回`m-f`。那是您定义的过程的名称，因此它正在返回该过程。要使用此返回值，您需要将其分配给另一个变量。

```
(define thing1 (m-m 'unused))
(define thing2 (m-m 'who-cares))
(thing1 'h-m-c?)
(thing1 'increment)
(thing1 'h-m-c?)
(thing2 'h-m-c?) 
```

其他一些评论：

以 结尾的过程名称`?`用于报告真/假的谓词。

你不需要`begin`在`(r-c)`. 过程体允许多个表达式，并按顺序执行它们，就像`begin`.

为什么不`count`为递增的情况定义一个函数，就像为其他情况所做的那样？

使用默认值进行递增似乎不合适，您应该为此需要一个特定的`m`参数。

参数的目的是`f`什么？它的唯一用途是在递增时返回？新值不是`count`更有用的返回值吗？似乎它打算成为实例的“名称”；如果是这样，也许您应该添加一个新操作来返回名称，而不是在递增时这样做。

编辑：

根据下面的答案，我怀疑您滥用了该`f`参数。它可能应该是您在进行增量时调用的函数。因此，您需要将其作为 lambda 表达式提供，并返回`(f)`而不仅仅是`f`.

# java - 将货币格式化为特定于区域设置的格式

> ID：12684609
> 
> 赞同：1
> 
> 时间：2012-10-02T04:37:57.183
> 
> 标签：java, concurrency, formatting, currency-formatting

我希望能够将双倍价格格式化为特定于语言环境的格式。您可以使用以下代码实现此目的：

```
NumberFormat.getCurrencyInstance(locale).format(20.0); 
```

但是，仅支持 21 个语言环境，我需要支持的不仅仅是这些国家/地区。如果能够根据 ISO 国家代码格式化价格，那就太好了。例如，给定 ISO 国家代码*CAN*我想将价格格式化为*$20.00*等。

java支持这个吗？如果没有，是否有可以实现此目的的开源版本（例如日期的 joda time）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T04:54:23.267

您可以`Locale`根据需要的语言和国家/地区创建一个。默认情况下，Java 将其中一些语言环境作为常量，但它支持 200 多个国家/地区：

```
Locale locale = new Locale("es", "pe"); //Spanish, Peru 
```

更多信息：

*   [`java.util.Locale`](http://docs.oracle.com/javase/6/docs/api/java/util/Locale.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:50:30.630

```
NumberFormat f = NumberFormat.getInstance(loc);
if (f instanceof DecimalFormat) {
    ((DecimalFormat) f).setDecimalSeparatorAlwaysShown(true);
} 
```

你试过 DecimalFormat 它有很多方法来自定义输出请在这里检查各种 setMethods：http: [//docs.oracle.com/javase/8/docs/api/java/text/DecimalFormat.html#method.summary](http://docs.oracle.com/javase/8/docs/api/java/text/DecimalFormat.html#method.summary)

# java - FreeTTS 找不到任何声音

> ID：12684627
> 
> 赞同：2
> 
> 时间：2012-10-02T04:40:41.847
> 
> 标签：java, text-to-speech, freetts

我正在尝试使用 FreeTTS，这是代码：

```
import com.sun.speech.freetts.Voice;
import com.sun.speech.freetts.VoiceManager;

public class FreeTTSVoice {

public static final String VOICE_ALAN = "alan";
public static final String VOICE_KEVIN = "kevin";
public static final String VOICE_KEVIN16 = "kevin16";

private Voice voice;

public FreeTTSVoice(String voiceName) {

    VoiceManager voiceManager = VoiceManager.getInstance();
    voice = voiceManager.getVoice(voiceName);

    if (voice == null) {
        System.err.println(
            "Cannot find a voice named "
            + voiceName + ".  Please specify a different voice.");
        System.exit(1);
    }
}

public void speak(String msg) {
    voice.speak(msg);

}

public void open() {
    voice.allocate();
}

public void close() {
    voice.deallocate();
}

public static void main(String[] args) {
    System.setProperty("freetts.voices", "com.sun.speech.freetts.en.us.cmu_us_kal.KevinVoiceDirectory");

    FreeTTSVoice me = new FreeTTSVoice(FreeTTSVoice.VOICE_KEVIN);
    me.open();
    me.speak("Hello java is smart. isn't is?");
    me.close();
} 
```

}

它编译得很好，但会引发以下运行时错误：

```
 pkswatch@neurals:~/dev/java/speech/viame-speech$ javac FreeTTSVoice.java
    pkswatch@neurals:~/dev/java/speech/viame-speech$ java FreeTTSVoice 
    Exception in thread "main" java.lang.Error: Unable to load voice directory.java.lang.ClassNotFoundException: com.sun.speech.freetts.en.us.cmu_us_kal.KevinVoiceDirectory
    at com.sun.speech.freetts.VoiceManager.getVoiceDirectories(VoiceManager.java:198)
    at com.sun.speech.freetts.VoiceManager.getVoices(VoiceManager.java:110)
    at com.sun.speech.freetts.VoiceManager.getVoice(VoiceManager.java:502)
    at FreeTTSVoice.<init>(FreeTTSVoice.java:15)
    at FreeTTSVoice.main(FreeTTSVoice.java:39) 
```

我正在使用：java版本“1.6.0_24”

OpenJDK 运行时环境 (IcedTea6 1.11.3) (6b24-1.11.3-1ubuntu0.12.04.1)

OpenJDK Server VM（build 20.0-b12，混合模式）

FreeTTS 版本 1.2.2

为什么会出现这个错误？请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-11-18T12:14:42.443

我在以下 Java 论坛中找到了解决方案：[https ://community.oracle.com/thread/2182800](https://community.oracle.com/thread/2182800)

尝试设置合成器使用的 SystemProperty..

```
System.setProperty("freetts.voices", "com.sun.speech.freetts.en.us.cmu_us_kal.KevinVoiceDirectory"); 
```

现在它工作得很好！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T07:18:15.920

可能有些罐子没有正确链接..我使用netbeans构建项目后就开始工作了！

谢谢你们（@netbeans）..你们拯救了我的一天！:)

对于那些可能有同样问题的人，使用 netbeans 来避免库的麻烦。

1.  从“freetts-1.2.2-src.zip”中的“lib”文件夹添加 lib/freetts.jar（可从[sf.net](http://sourceforge.net/projects/freetts/files/FreeTTS/FreeTTS%201.2.2/)下载）
2.  将 jdk 文件夹（如果尚未列出）添加到项目库
3.  你完成了！现在运行代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-16T13:01:40.147

我最近遇到了同样的异常，这个异常是因为在您的应用程序中，您在构建路径中添加了 JAR，但没有在 lib 文件夹中。

请在 lib 文件夹中添加罐子，它将起作用。希望能帮助到你。

# javascript - 如何在 rails 3.x 中对 Galleria.js 进行故障排除

> ID：12684629
> 
> 赞同：0
> 
> 时间：2012-10-02T04:40:53.713
> 
> 标签：javascript, ruby-on-rails, ruby, galleria

我正在将某人的 python 项目导入到 rails 并且在使 Galleria.js 画廊插件工作时遇到了一些麻烦。本地似乎一切正常，但当我部署到 heroku 时，网站根本无法加载，即“我们很抱歉，但出了点问题。” 该插件在本地正常工作。

我们将从 application.html.erb 中的 Galleria 加载标签开始

`Galleria.loadTheme('<%= javascript_path('galleria.cinekine.js') %>');`

我的 js 目录看起来像

```
javascripts/application.js`
javascripts/app.js.coffee`
javascripts/galleria.cinekine.js
javascripts/galleria.js 
```

我的 .scss 看起来像

```
*
*= require_self
*/
@import 'bourbon';
@import 'meyer';
@import 'sfm';
@import 'apps';
@import 'galleria.cinekine'; 
```

我已经配置了 application.rb

```
config.assets.enabled = true 
```

我相对确定 heroku 在预编译 Galleria.cinekine.js 文件时遇到问题，因为相关输出`heroku logs`是

```
 eb.1]:   Rendered layouts/_footer.html.haml (1.5ms)
2012-10-02T04:36:05+00:00 app[web.1]: Completed 500 Internal Server Error in 106ms
2012-10-02T04:36:05+00:00 app[web.1]: 
2012-10-02T04:36:05+00:00 app[web.1]:   app/views/layouts/application.html.erb:18:in `_app_views_layouts_application_html_erb___1858155475977362126_43698200'
2012-10-02T04:36:05+00:00 app[web.1]: ActionView::Template::Error (galleria.cinekine.js isn't precompiled):
2012-10-02T04:36:05+00:00 app[web.1]: 
2012-10-02T04:36:05+00:00 app[web.1]:     21:   autoplay: 5000,
2012-10-02T04:36:05+00:00 app[web.1]:     15: <%= yield %>
2012-10-02T04:36:05+00:00 app[web.1]:     16: <%= render 'layouts/footer' %> 
```

所有这些都非常有趣，因为当我推送它时，heroku 告诉我预编译在控制台中是可以的。

想法？一如既往，StackFoo 非常感谢。

application.js 的内容

```
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require_tree .
//= require galleria 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:52:47.930

您的所有 JS 都被预编译到一个文件中，大概是`application.js`，因此您不能在页面上包含 JS 文件的非预编译版本，除非您将其添加到`config/environments/production.rb`：

```
config.assets.precompile += %w( galleria.cinekine.js ) 
```

# xaml - 如何根据集合的空性进行数据绑定？

> ID：12684637
> 
> 赞同：0
> 
> 时间：2012-10-02T04:41:50.287
> 
> 标签：xaml, data-binding, windows-8

我只想`TextBlock`在集合为空时才可见。我有一个 ListView，它已经数据绑定到集合，这很简单。我只想在 ListView 为空时显示其他内容。

我写了一个`IValueConverter`可以收集、计数或任何我需要的东西，并`Visibility`适当地返回一个。XAML 如下所示：

```
<TextBlock Visibility="{Binding Count, ElementName=ContactsList, Converter={StaticResource visibilityWhenEmpty}}"
           Text="No contacts yet.  Add one using the AppBar below." /> 
```

问题在于，仅绑定集合本身只会调用我的值转换器一次，当它为空时，而不是在集合的内容发生变化时再次调用（有点道理）。如上所示，当我尝试绑定集合的 Count 属性时，它根本不会调用我的值转换器。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:03:53.717

我遇到了同样的问题。我应用了一个棘手的解决方案。它也可能对你有用。获取一个临时组合框并将集合与它绑定。

```
<ComboBox  x:Name="TempComboBox" 
                       ItemsSource="{Binding DataContext.ContactsList,
                                   RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=UserControl}}" >
                <ComboBox.Template>
                    <ControlTemplate>
                        <!--Add file button..-->
                        <TextBlock Content="Your text..."
                                >
                            <TextBlock.Visibility>
                                <Binding Path="Items.Count"
                                         RelativeSource="{RelativeSource Mode=FindAncestor,AncestorType=ComboBox}"
                                Converter="{StaticResource visibilityWhenEmpty}">
                                </Binding>
                            </TextBlock.Visibility>
                        </TextBlock>
                    </ControlTemplate>
                </ComboBox.Template>
            </ComboBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T06:00:05.353

您可以使用 notifyPropertyChanged 进行计数，或使用 BindableBase 实现。

# java - 如何在 JSF 中编写 Java 代码？

> ID：12684646
> 
> 赞同：0
> 
> 时间：2012-10-02T04:42:45.823
> 
> 标签：java, jsf

有什么方法可以像在 JSP 中使用 script-lets 一样在 JSF 中编写 Java 代码？

我想在 JSF 中编写以下代码：

```
<% 
EditProperties editProperties = new EditProperties();
Map<String,String> dataMap = new HashMap<String,String>();
dataMap = editProperties.getDocumentProperties();
if (dataMap.size() > 0) {
    Iterator<Map.Entry<String,String>> entries = dataMap.entrySet().iterator();
    while (entries.hasNext()) {
        Map.Entry<String, String> entry = entries.next();  
%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:55:40.033

**不允许**您这样做涉及很多工作。

正如 Luiggi 所提到的 - 花一些时间学习 JSF 基础知识，看看它能给你带来什么。另一个很好的知识来源是[D. Geary 和 C. Horstmann 编写的 Core JavaServer Faces 一书](https://rads.stackoverflow.com/amzn/click/com/0137012896)。

如果您仍然无法使用 JSF 核心库（或一些附加的、广泛可用的库）实现您想要的，那么任何与前端相关的 Java 代码都应该在您的控制器类中，如 JSF 托管 bean。它将使您的代码更易于维护，并允许您对其进行测试。

没有什么比将 scriptlet 放入您的 JSP/JSF/任何视图技术更糟糕的了。

# load - MIPS 代码中的混乱

> ID：12684650
> 
> 赞同：1
> 
> 时间：2012-10-02T04:43:33.133
> 
> 标签：load, mips, memory-address

在浏览 MIPS 代码时，我有些困惑。代码如下所示

```
.data
 key: .ascii "key: "              # "key:  \n"
char: .asciiz "  \n"               
 .text
 .globl main
main:
 jal getchar     

la $a0, char                    # $a0 contains address of char variable (" \n")
  sb $v0, ($a0)                   # replace " " in char with v0, which is read_character (X) 
 la $a0, key                     # now a0 will contain, address of "key: "  "X\n" 
```

我不明白的是加载地址指令是如何工作的。第一个 a0 包含 char 变量的地址。在下一行中，我们将 v0 的值存储在该位置。( )没有偏移量`$a0`，是否像 0( ) 中那样假定为 0 `$a0`？为什么只有 " " 空白空间被替换为 v0，而 "\n" 为什么不被替换？或者也可能是空格和 \n 字符都被 v0 替换。

其次，当我们在a0中加载key的地址时，之前的地址应该会被覆盖。a0 应该只包含 key 的地址，但从评论看来，这两个字符串是连接的。怎么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:35:23.173

`sb`在内存中存储一​​个字节。

详细回答您的问题：

```
there is no offset with ($a0), is that assumed to be 0 like in 0($a0)? 
```

是的。

```
Why only the " " empty space is replaced with v0, and why not the "\n" get replaced? 
```

`sb`只存储一个字节，在这种情况下是 address 上的字节`char`，它是一个空格。换行符是下一个字节。

```
or It may also have been the case that both the empty space and \n character get replced by v0. 
```

不，只有一个字节。

```
a0 should have contained the address of key only, but from comment it seems that the two strings are concatenated. How does that happen. 
```

是的，$a0 包含地址`key`，但字符串由空字符关闭。当你这样做

```
key: .ascii "key: " 
```

由 表示的字节`"key: "`被放置在内存中，末尾没有空字符（因为使用了 .ascii）。接下来，该指令`char: .asciiz " \n"`将 的字节`" \n"`放在内存中前一个字节的后面。在这种情况下，它们是空终止的，因为使用了 .asciiz（而不是 .ascii）。因此，该地址`key`指向一个在换行符之后以空结尾的字符串。或者，`key`是字符串第一个字符的地址。

为了更清楚

```
.asciiz "abc" 
```

和

```
.ascii "a"
.ascii "b"
.asciiz "c" 
```

是相同的。

# c++ - 逻辑错误，需要帮助

> ID：12684661
> 
> 赞同：0
> 
> 时间：2012-10-02T04:45:04.333
> 
> 标签：c++

我遇到了这个应用程序的逻辑错误。这是一个单词混词应用程序，它显示一个混杂的单词，并询问玩家他/她是否想在猜对后再次播放。

当我告诉应用程序我不想再玩时，它无论如何都会继续播放序列。我有一种感觉，这对我来说嵌套不好。

```
#include <iostream>
#include <string>
#include <cstdlib>
#include <ctime>

using namespace std;

int main()
{
    enum fields {WORD, HINT, NUM_FIELDS};
    const int NUM_WORDS = 5;
    const string WORDS[NUM_WORDS][NUM_FIELDS] =
    {
        {"wall", "Are you banging your head against something?"},
        {"jumble", "Its what this game is all about."},
        {"glasses", "You might need these to read this text."},
        {"labored", "Going slowly, is it?"},
        {"persistent", "Keep at it."},

    };

    srand(static_cast<unsigned int>(time(0)));

    cout << "\t\tWelcome to Word Jumble!\n\n";
    cout << "Unscramble the the letters to make the word!\n";
    cout << "Enter 'hint' for a hint\n";
    cout << "Enter 'quit' to quit the game\n\n";

    const int MAX_LEVEL = NUM_WORDS - 1;
    int totalScore = 0;

    for (int level = 0; level <= MAX_LEVEL; ++level)
    {
        string theWord = WORDS[level][WORD]; // Word to guess
        string theHint = WORDS[level][HINT]; // Word hint
        char playAgain;
        string jumble = theWord; //Jumbled version of the word
        int length = jumble.size();
        int score = jumble.size() * 10;

        for (int i = 0; i < length; ++i)
        {
            int index1 = (rand() % length);
            int index2 = (rand() % length);
            char temp = jumble[index1];
            jumble[index1] = jumble[index2];
            jumble[index2] = temp;
        }

        cout << jumble << endl;

        string guess;
        cout << "\nYour Guess: ";
        cin >> guess;

        while ((guess != theWord) && (guess != "quit"))
        {
            if (guess == "hint")
            {
                cout << theHint;
                score = score / 2;
            }

            else
            {
                cout << "\n\nSorry thats not it.\n\n";
            }

            cout << "\n\nYour Guess: \n\n";
            cin >> guess;

        }

        if (guess == theWord)
        {
            cout << "Thats it! You guessed it!\tYou scored: " << score << "\n\n";

            cout << "Would you like to play again? (y/n): ";
            cin >> playAgain;

            if (playAgain = 'y')
            {
                continue;
            }

            else if (playAgain = 'n')
            {
                cout << "Your total score is: " << totalScore << endl;
                break;
            }

        }

        else if (guess == "quit")
        {
            if (totalScore > 0)
            {
                cout << "Your total score is: " << totalScore << endl;
            }

            break;
        }
    }

    cout << "\nGoodbye.";

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T04:51:38.120

与and比较`playAgain`时，只有一个等号，导致第一个 ( ) 始终执行而不是实际选择，因为 的值不是 0。`'y'``'n'``'y'``'y'`

要解决此问题，它们应该是：

```
if (playAgain == 'y') //note ==
{
    continue;
}

else if (playAgain == 'n') //note ==
{
    cout << "Your total score is: " << totalScore << endl;
    break;
} 
```

此外，如果您打开了警告，任何理智的（更现代的）编译器都应该警告您。一定要打开它们并注意它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T04:52:43.810

我认为您将需要 == 来解决您的 playAgain 问题。我经常在这方面犯错。

# jquery - 需要 LightBox2 与我的悬停动画一起工作

> ID：12684662
> 
> 赞同：-1
> 
> 时间：2012-10-02T04:45:07.477
> 
> 标签：jquery, magento, jquery-animate, lightbox, magento-1.7

在我看来，这一切都是由js文件冲突引起的。其中我仍然无法完全解决。

[在这里查看网站](http://foryourrestroom.com/in-corner-one-stall-ada-package-in-select-cherry.html)

最初我的问题是我想集成一个 .hover 类 java 脚本动画来降低我的整体页面高度。自从：

```
<script type="text/javascript"     src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>
$(document).ready(function() {

  $("#div1").hover(
//on mouseover
function() {
  $(this).animate({
    height: '+=250' //adds 250px
    }, 'slow' //sets animation speed to slow
  );
},
//on mouseout
function() {
  $(this).animate({
    height: '-=250px' //substracts 250px
    }, 'slow'
  );
}
);

});
</script> 

<style type="text/css">
#div1{
height:50px;
overflow:hidden;
background: red; /* just for demo */
}
</style>

<body>
<div id="div1">This is div 1</div>
</body> 
```

这似乎是实现此动画的最简单方法。所以我首先创建了一个静态块并放置了上面的修改版本。

```
<script type="text/javascript"     src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>
$(document).ready(function() {

$(".short-description").hover(
//on mouseover
function() {
$(this).animate({
height: '+=250' //adds 250px
}, 'slow' //sets animation speed to slow
);
},
//on mouseout
function() {
$(this).animate({
height: '-=250px' //substracts 250px
}, 'slow'
);
}
);

});
</script> 
```

然后我在我的主题皮肤 css 文件夹编辑行 1987 中修改了 styles.css 以添加高度和溢出属性：

```
.product-view .product-shop .short-description { margin:10px 0; height:200px; overflow: hidden; } 
```

此解决方案有效，但干扰了默认的 magento 图像查看器。在产品页面上，主要产品图像不会调整大小（缩放）以适合图像框。在决定实施 shadowbox 之前，我尝试了调整和修复。我从来没有能够实现 shadowbox，后来我更改为 LightBox2，因为 magentocommerce.com 上提供了该扩展，并带有评论说明 1.7.0.2 的功能。

我安装了我通过magento后端中的连接管理器直接从发布者那里收到的扩展下载，没有输出错误。有一段时间，LightBox2 运行良好，但在尝试了不同的建议修复后，例如在 page.xml 文件中放置以下行：

```
<action method="addItem">
    <type>skin_js</type>
    <name>http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js</name>
</action> 
```

它在刷新 css/js 缓存后停止工作，我在前端得到 WSOD / 空白屏幕，但在后端出现正常行为。在尝试了许多不同的修复后，问题似乎来自包含显示在的静态块的小部件 - 所有产品类型，所有产品，块参考 - 页面标题，CMS - 静态块默认模板。当我将小部件移动到其他位置（例如主要内容区域）时，更新 page.xml 以首先包含此行：

```
<action method="addJs"><script>lib/jquery.min.js</script></action> 
```

将 .js 文件放在本地，然后刷新块布局缓存，前端恢复活力。

我将静态块更新为：

```
<script type="text/javascript">// <![CDATA[
jQuery.noConflict();
// ]]></script>
<script type="text/javascript" src="/js/lib/jquery.min.js">// <![CDATA[
$j(document).ready(function() {

$j(".short-description").hover(
//on mouseover
function() {
  $j(this).animate({
    height: '+=300' //adds 300px
    }, 'slow' //sets animation speed to slow
  );
},
//on mouseout
function() {
  $j(this).animate({
    height: '-=300px' //subtracts 300px
    }, 'slow'
  );
}
);

});
// ]]></script> 
```

仍然没有悬停动画。根据查看源代码，这个静态块从未被放置在页面上的任何地方。我将脚本从静态块中移出，并将其放置在 System -> Configuration -> Design -> Miscellaneous Scripts 中（这将包含在页面 HTML 中的 head 结束标记之前。）：

```
<script type="text/javascript" src="http://foryourrestroom.com/js/lib/jquery.min.js">
var $j = jQuery.noConflict();

$j(document).ready(function() {

$j(".short-description").hover(
//on mouseover
function() {
  $j(this).animate({
    height: '+=250px' //adds 250px
    }, 'slow' //sets animation speed to slow
  );
},
//on mouseout
function() {
  $j(this).animate({
    height: '-=250px' //substracts 250px
    }, 'slow'
  );
}
);

});
</script> 
```

该脚本现在加载到页面上，并且可以从视图源中看到，但与主页上的滑块冲突。现在我没有工作的 LightBox2 也没有动画。

根据查看源代码，这是 LightBox2 的脚本：

```
<script type="text/javascript">
//<![CDATA[
jQuery('.ig_lightbox2').fancybox({"padding":10,"margin":20,"opacity":0,"modal":0,"cyclic":1,"autoScale":1,"centerOnScroll":1,"hideOnOverlayClick":1,"hideOnContentClick":0,"overlayShow":1,"overlayOpacity":0.3,"overlayColor":"#333333","titleShow":1,"titlePosition":"float","transitionIn":"fade","transitionOut":"fade","speedIn":300,"speedOut":300,"changeSpeed":300,"changeFade":"fast","easingIn":"swing","easingOut":"swing","showCloseButton":1,"showNavArrows":1,"enableEscapeButton":1});
//]]>
</script> 
```

这是根据查看源的悬停动画的脚本：

```
<script type="text/javascript" src="http://foryourrestroom.com/js/lib/jquery.min.js">
var $j = jQuery.noConflict();

$j(document).ready(function() {

$j(".short-description").hover(
//on mouseover
function() {
  $j(this).animate({
    height: '+=250px' //adds 250px
    }, 'slow' //sets animation speed to slow
  );
},
//on mouseout
function() {
  $j(this).animate({
    height: '-=250px' //substracts 250px
    }, 'slow'
  );
}
);

});
</script></head> 
```

非常感谢任何让 LightBox2 与我的悬停动画一起工作的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:24:05.027

我检查了您的代码，似乎问题是缺少 jQuery No conflict 变量。

所以只需使用完整的 jQuery 格式，如下所示：

```
jQuery(document).ready(function() {
    jQuery(".short-description").hover(
    //on mouseover
    function() {
      jQuery(this).animate({
        height: '+=250px' //adds 250px
        }, 'slow' //sets animation speed to slow
      );
    },
    //on mouseout
    function() {
      jQuery(this).animate({
        height: '-=250px' //substracts 250px
        }, 'slow'
      );
    }
    );
}); 
```

并且不要忘记具有“简短描述”类的 div 的 CSS 样式：

```
.product-view .product-shop .short-description {
    height: 100px;
    margin: 10px 0;
    overflow: hidden;
} 
```

祝福。

# elliptic-curve - 有没有等效于 RSA 的非对称加密的椭圆曲线算法？

> ID：12684663
> 
> 赞同：2
> 
> 时间：2012-10-02T04:45:11.157
> 
> 标签：elliptic-curve

我一直在搜索，但找不到任何关于此的信息……只有具有对称密码学[的 EC Diffie-Hellman](http://en.wikipedia.org/wiki/Elliptic_curve_Diffie%E2%80%93Hellman)，这正是我不想要的:(

想象一下：

*   生成随机私钥，`k`
*   然后用 ECC 计算一个“公钥”，`d=kG`

我正在寻找的算法是这样的：任何用公钥加密的消息将“仅”由私钥的所有者解密。

这存在吗？有没有开发过这样的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T06:03:24.280

你可以试试 ecc (pip install ecc)

```
from ecc.Key.Key import Key

# Create keypair
k=Key.generate(521)

# Encode public key
pub=k.encode()

# Encode private key
priv=k.encode(include_private=True)

# Decode public key
pubK=Key.decode(pub)

# Decode private key
privK=Key.decode(priv)

# Encrypt message
msg=pubK.encrypt("Test")

# Decrypt message
print privK.decrypt(msg) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T10:11:51.133

实际上，基于 Diffie-Hellman 密钥交换的 El Gamal 方案假定了一种非对称加密算法，具有私钥和公钥，因此您应该考虑这一点。在该方案中计算公钥将与计算组中的离散对数一样困难。

# objective-c - NSString sizeWithFont 上的 EXC_BAD_ACCESS

> ID：12684667
> 
> 赞同：2
> 
> 时间：2012-10-02T04:45:55.020
> 
> 标签：objective-c, ios, nsstring, exc-bad-access, iphone-5

我不知道发生了什么。我已经尝试了很多方法来弄清楚导致 EXC_BAD_ACCESS 的特定代码行发生了什么。我尝试启用 NSZombies，但它对我没有任何帮助。这是代码：

```
- (int)linesFromText:(NSString *)string withFont:(UIFont *)font andSize:(CGSize)size {
    NSArray *splitString = [string componentsSeparatedByString:@" "];
    NSMutableArray *allLines = [NSMutableArray array];
    NSMutableString *line = [NSMutableString string];
    NSString *word;
    NSString *fakeLine;
    for (int i = 0; i < splitString.count; i++) {

        word = [splitString objectAtIndex:i];
        fakeLine =  [NSString stringWithFormat:@"%@%@ ",line, word];
        //NSLog(@"line %@, font %@",fakeLine,font);

        ////THIS IS THE LINE CAUSING THE EXC_BAD_ACCESS
        CGSize lineSize = [fakeLine sizeWithFont:font];

        if (lineSize.width <= size.width) {
            [line appendFormat:@"%@ ", word];
        } else {
            [allLines addObject:[line stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]]];
            line = [NSMutableString string];
            [line appendFormat:@"%@ ", word];
        }

    }
    [allLines addObject:[line stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]]];
    return allLines.count;
} 
```

这让我发疯了，因为它只发生在新的 iphone 5 上，当你在我构建的应用程序中滚动浏览这些日子以加快速度时。这是商店中应用程序的链接：

[http://itunes.apple.com/us/app/id543324451?mt=8](http://itunes.apple.com/us/app/id543324451?mt=8)

如果你有一个 iphone 5 你可以明白我的意思。iphone 4 不这样做。

此代码在 UITableViewCell 的 layoutSubviews 中调用，用于帮助调整使用 TTTAttributedLabel (https://github.com/mattt/TTTAttributedLabel) 的自定义属性标签的框架。

我还尝试启用“Gaurd malloc 尝试给我更多详细信息，但我的 XCode 给了我这个错误：

dyld：无法加载插入的库“/usr/lib/libgmalloc.dylib”，因为找不到图像

如果我查看 /usr/lib 该文件是指向同一目录中确实存在的文件的符号链接： libgmalloc.dylib -> libgmalloc.B.dylib

我在这里没有想法，并认为它可能是 UIFont 很快就会发布然后它不可用，所以我在 UITableViewCell 中放置了引用来保存 UIFont 直到该 Cell 的生命结束。

我也在互联网上搜索过，并没有找到太多关于这个细节的东西。

这里还有一张来自调试器的堆栈跟踪图像：

[http://i.stack.imgur.com/gWC5L.png](http://i.stack.imgur.com/gWC5L.png)

有任何想法吗？我是否提供了足够的信息？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:57:17.157

我想你的问题在这里得到了回答：

[UIStringDrawing 方法在 iOS 6 中似乎不是线程安全的](https://stackoverflow.com/questions/12744558/uistringdrawing-methods-dont-seem-to-be-thread-safe-in-ios-6)

简短版本：sizeWithFont 和大多数其他 UIKit 方法在您在屏幕上使用它时（而不是使用它进行预渲染）不是线程安全的。

好消息：看看 Adam Swinden 在那个帖子中的回答；他解释了如何在 iOS6 中使用 CoreText 而不是 UIKit 获得相同的结果。

# c - 概念线程问题

> ID：12684668
> 
> 赞同：1
> 
> 时间：2012-10-02T04:46:04.980
> 
> 标签：c, multithreading, pthreads

我正在某些线程中生成从 1 到 N 的数字的哈希值 (MD5)。根据散列的第一个字母，生成它的数字存储在一个数组中。例如，数字 1 生成 c4ca4238a0b923820dcc509a6f75849b，数字 2 生成 c81e728d9d4c2f636f067f89cc14862c，因此它们存储在以“c”开头的特定哈希数组中。

问题是我需要生成从低到高排序的它们。序列完成后对它们进行排序非常昂贵，N 可以大到 2^40。当我使用线程时，排序永远不会自然发生。例如，一个线程可以生成数字 12 的哈希 (c20ad4d76fe97759aa27a0c99bff6710) 并将其存储在 "c" 数组中，然后其他线程生成数字 8 的哈希 (c9f0f895fb98ab9159f51fd0297e236d) 并将其存储在数字 12 之后的 "c" 数组中。

我不能简单地验证数组上的最后一个数字，因为就线程运行而言，它们可能彼此相距很远。

这个线程问题有什么解决方案吗？任何比在所有线程完成后排序数组更快的解决方案都会很棒。

我在 C 中实现这个。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T05:39:40.770

不是为每个前缀（例如“c”）设置一个数组，而是为每个前缀在每个线程中设置一个数组。每个线程只插入自己的数组，所以它总是以递增的顺序插入数字，并且各个线程数组将保持排序。

然后，您可以`O(N)`在过程结束时快速 ( ) 合并数组，因为各个数组都将被排序。这也将加快创建过程，因为您不需要对数组进行任何锁定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T05:00:41.853

既然您提到了 pthreads，我将假设您正在使用 gcc（不一定是这种情况，但可能是这种情况）。您可以使用`__sync_fetch_and_add`来获取数组末尾的值，并在一次原子操作中将其加一。它会像下面这样：

```
insertAt = __sync_fetch_and_add(&size[hash], 1);
arrayOfInts[insertAt] = val; 
```

您会遇到的唯一问题是您是否需要调整数组大小（不确定您是否事先知道数组大小）。为此，您将需要一个锁（最有效的是每个数组一个锁），您在重新分配数组时独占锁定，在插入时非独占锁定。特别是这可以通过以下函数来完成（假设程序员没有释放解锁的锁）：

```
// Flag 2 indicates exclusive lock
void lockExclusive(int* lock)
{
    while(!__sync_bool_compare_and_swap(lock, 0, 2));
}

void releaseExclusive(int* lock)
{
    *lock = 0;
}

// Flag 8 indicates locking
// Flag 1 indicates non-exclusive lock
void lockNonExclusive(int* lock, int* nonExclusiveCount)
{
    while((__sync_fetch_and_or(lock, 9) & 6) != 0);
    __sync_add_and_fetch(nonExclusiveCount, 1);
    __sync_and_and_fetch(lock, ~8);
}

// Flag 4 indicates unlocking
void releaseNonExclusive(int* lock, int* nonExclusiveCount)
{
    while((__sync_fetch_and_or(lock, 4) & 8) != 0);
    if(__sync_sub_and_fetch(nonExclusiveCount) == 0);
        __sync_and_and_fetch(lock, ~1);
    __sync_and_and_fetch(lock, 4);
} 
```

# javascript - 如何根据下拉选择隐藏和显示内容

> ID：12684677
> 
> 赞同：0
> 
> 时间：2012-10-02T04:46:56.073
> 
> 标签：javascript, css

我想根据下拉选择隐藏和显示一个 div。也就是说，如果我选择下拉选项 1，id 为 1 的 div 应该显示出来，对于 id 为 2 的 2 div 等等。但我想在不使用 jQuery 而是使用 css 或 Javascript 的情况下做到这一点。这可能吗？这是我的示例下拉列表。多谢你们。

```
<select name="options">
  <option value="1"> Loan Protection Insurance</option>
  <option value="2"> GAP or Cash Assist Insurance</option>
  <option value="3"> Home Insurance</option>
  <option value="4"> Landlords Insurance</option>
  <option value="5">  Car Insurance</option>
</select>

<div id="1">Test</div>
<div id="2">Test</div> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T04:51:34.320

单独使用 CSS 是不可能的，因为您需要处理`change`下拉事件并采取适当的措施。

您可以通过纯 JS 轻松完成：

```
document.getElementById('id-of-select').onchange = function() {
    var i = 1;
    var myDiv = document.getElementById(i);
    while(myDiv) {
        myDiv.style.display = 'none';
        myDiv = document.getElementById(++i);
    }
    document.getElementById(this.value).style.display = 'block';
}; 
```

**演示：http:** [//jsfiddle.net/2ukyA/](http://jsfiddle.net/2ukyA/)

* * *

**更新：**如果 DIV 的 ID 类似于“divname1”等。

```
document.getElementById('id-of-select').onchange = function() {
    var i = 1;
    var myDiv = document.getElementById("divname" + i);
    while(myDiv) {
        myDiv.style.display = 'none';
        myDiv = document.getElementById("divname" + ++i);
    }
    document.getElementById(this.value).style.display = 'block';
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T06:01:04.897

如果您不关心“选择”，那么制作纯 CSS 下拉菜单非常容易。

查看：[http ://www.alistapart.com/articles/horizdropdowns/](http://www.alistapart.com/articles/horizdropdowns/)

You can show/hide content using the css :hover selector.

i.e:

```
<ul>
   <li class="menu">
       group1
       <div class="dropdown">dropdown content1</div>
   </li>
   <li class="menu">
       group2
       <div class="dropdown">dropdown content2</div>
   </li>
   <li class="menu">
       group3
       <div class="dropdown">dropdown content3</div>
   </li>
   <li class="menu">
       group4
       <div class="dropdown">dropdown content4</div>
   </li>
<ul> 
```

Your css then needs to be similar to:

```
.top-menu{}
.top-menu .dropdown{display:none;}
.top-menu:hover .dropdown{display:block;} 
```

# python - 在 django 中发布。用户如何更新？

> ID：12684682
> 
> 赞同：0
> 
> 时间：2012-10-02T04:47:30.133
> 
> 标签：python, django, post

我对 django 很陌生，对编程来说也很陌生。我已经完成了 django 教程并在网上搜索了这个问题的答案，但无济于事，所以现在我在这里。我很困惑 post 如何与 django 一起工作。我看过的所有教程如何在显示网页的视图中具有返回函数。我明白了。但是，如果页面是从该返回语句呈现的，那么用户如何更新数据呢？return 后不能再更新了，因为函数停止了，对吧？我在这里想念什么？任何帮助将不胜感激，我在这里变得相当绝望。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T05:26:42.070

`view`用户更新函数逻辑中的数据。也就是说，如果用户想要更新一些东西，你可以将更新逻辑`view`放在`return`. 例如，你会这样做：

```
def update(request):
    item = <some model>.objects.get(<something>)
    <more code>
    return <something> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T06:13:37.037

通常一个编辑视图函数包含两部分——一个用于更新数据，另一个用于显示更新表单。例如，

```
def user_edit(request):

    if request.method == 'POST':            # is this a save action?
        # save the user data

        user_id = request.POST.get('user_id')
        username = request.POST.get('username')
        description = request.POST.get('description')

        user = User.objects.get(id=user_id)
        user.username = username
        user.description = description
        user.save()

        return HttpResponseRedirect('/user/')          # redirect to index

    else:

        # show the edit form
        user_id = request.GET.get('user_id')
        user = User.object.get(id=user_id)

        return render_to_response('/user/edit.html', { 'user': user }) 
```

这条线有很多不同的选择`if request.method == 'POST'`。您还可以使用`if request.POST.get('user_id')`检查是否设置了指定字段，以确定这是否是保存操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T06:14:04.177

Django 视图的一种模式（绝不是唯一的模式）是在视图的开头检查请求方法（GET 或 POST）。如果是 POST，则处理传入的数据（*在*视图返回之前），然后返回呈现的模板或重定向。

```
def view_function(request):
    if request.method == 'POST':
        if data_is_valid(request.POST):
            save_data(request.POST)
            return HttpResponseRedirect('/somewhere/good')
        else:
            return render('template', {'errors': what_went_wrong}
    else:
        return render('template') 
```

# android - 如何以编程方式更改 TextView 的图标？

> ID：12684686
> 
> 赞同：25
> 
> 时间：2012-10-02T04:47:51.640
> 
> 标签：android, textview

在 xml 中，您可以在 TextView 中的文本的左侧、右侧、底部或顶部设置可绘制对象。有没有办法通过代码设置/更改这个drawable？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-10-02T04:49:59.167

```
TextView textView = (TextView)findViewById(R.id.myTxtView);
textView.setCompoundDrawablesWithIntrinsicBounds(
  R.drawable.icon, //left
  0, //top
  0, //right
  0);//bottom 
```

# php - php无法读取通过ajax发送的数据

> ID：12684688
> 
> 赞同：-2
> 
> 时间：2012-10-02T04:48:10.937
> 
> 标签：php, javascript, ajax

> **可能重复：**
> [XMLHttprequest 发送一个空帖子](https://stackoverflow.com/questions/10221974/xmlhttprequest-sends-an-empty-post)

Javascript 部分

![在此处输入图像描述](../Images/279bbd684daa7cfcdca0273d96c534d2.png)

PHP部分

```
<?php echo $_REQUEST['p'] ?> 
```

只是一个愚蠢的问题，但我真的被困在这里

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T04:50:31.183

您必须设置内容类型，这样 php 才会知道如何处理请求正文

```
x.setRequestHeader("Content-type","application/x-www-form-urlencoded"); 
```

# jquery - disabled="disabled" 不适用于锚按钮：JQuery mobile

> ID：12684691
> 
> 赞同：1
> 
> 时间：2012-10-02T04:48:34.993
> 
> 标签：jquery, jquery-mobile

在我的 JQuery 移动应用程序中，我有一个锚按钮。一开始应该禁用它，并在选中复选框时启用锚按钮。但它不起作用。

html代码是

```
<input type="checkbox" name="checkbox2" id="checkbox2" class="custom" />
<div id="check">
 <a data-role="button" data-transition="fade" data-theme="c" disabled="disabled" onclick="PostRegistration()" class="forcolouredbuttontext">
    REGISTER
 </a>
</div> 
```

脚本是

```
 $('#check').ready(function(){
            $('#checkbox2').click(function() {
                var buttonsChecked = $('input:checkbox:checked');
                if (buttonsChecked.length) {            
                    $('div#check a').button('enable');              
                } 
                else {              
                    $('div#check a').button('disable');             
                }
            });
        }); 
```

我在这里做错了什么？

请帮忙，

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:59:01.303

`disabled="disabled"`用于输入控件。您不能禁用锚标记。

尝试使用按钮元素代替..

```
<input type="checkbox" name="checkbox2" id="checkbox2" class="custom" />
<div id="check">
 <input type="button" data-role="button" data-transition="fade" data-theme="c" disabled="disabled" onclick="PostRegistration()" class="forcolouredbuttontext" value="REGISTER" />
</div> 
```

//

```
$('#check').ready(function(){
            $('#checkbox2').click(function() {
                var buttonsChecked = $('input:checkbox:checked');
                if (buttonsChecked.length) {            
                    $('div#check input[type=button]').attr('disabled', false);              
                } 
                else {              
                    $('div#check input[type=button]').attr('disabled', true);              
                }
            });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:52:08.127

```
<a data-role="button" data-transition="fade" data-theme="c" disabled="disabled" onclick="PostRegistration()" class="forcolouredbuttontext" id="checkbox2"> 
```

# wordpress - 简单按永久链接 404 错误

> ID：12684695
> 
> 赞同：0
> 
> 时间：2012-10-02T04:49:01.990
> 
> 标签：wordpress, plugins

我正在尝试为 WordPress 使用 Simple:Press 论坛插件。如果我进入我的网站设置/永久链接并选择默认以外的任何内容，则每当我尝试访问任何论坛或用户个人资料时都会收到 404 错误。

有没有人有解决方法？

编辑：我应该添加这是在 Windows 机器上，并且我添加了 Web.config 文件，该文件似乎适用于其他页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:32:43.793

根据您拥有的 Wordpress 版本，这可能是解决方法。这是一个mod重写错误。

右键单击书签，然后更改

> u='+e(l.href)+'

至

> u='+e(l.href.replace(///g,'\/'))+'</p>

一个快速的解决方法是删除弹出窗口中的部分 URL。之后删除

> http%3A%2F%2F

在 u= 之后，一直到网站域的开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:59:43.817

启用永久链接时是否创建了正确的 .htaccess 文件？可能是目录不可写问题。

# tfs - 是否可以在机器上不安装 TFS Server 的情况下运行 TFS Build Agent？

> ID：12684696
> 
> 赞同：2
> 
> 时间：2012-10-02T04:49:17.707
> 
> 标签：tfs, tfsbuild

我刚刚在服务器上设置了两个构建代理。从我的想法来看，我不需要在这台机器上安装 TFS 服务器，因为它用作构建代理而不是服务器本身。我可能需要安装 TFS Server 来配置构建代理，但我希望在完成配置后可以卸载它们。

我不确定是否可以在不安装 TFS 服务器的情况下运行 TFS Build Agent？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T05:07:50.393

您不必在构建代理机器上配置应用层（服务器）。

您可以安装构建代理，但为了**完全**配置构建代理，需要针对服务器的集合（本地或远程）进行配置。

[此处](http://msdn.microsoft.com/en-us/library/ee259683%28v=vs.100%29.aspx)介绍的向导中的第 3 步详细说明了您需要如何浏览并选择构建代理将通过浏览构建的集合（它与您从 VS 客户端获得的连接对话框相同）。

请注意，如果您在本地使用 TFS 2012 构建向导（它现在已发布），它可以让您免于部署服务器 :) 在第 3 步，您指向云托管帐户 @tfspreview.com，它会提示您进行身份验证和下载构建代理的服务帐户详细信息。

[此处](http://msdn.microsoft.com/en-us/library/ee259683.aspx)介绍了 2012 向导。

# autohotkey - 显示 AutoHotkey 热键列表

> ID：12684703
> 
> 赞同：2
> 
> 时间：2012-10-02T04:49:50.153
> 
> 标签：autohotkey, tabular, hotkeys

我编写了包含许多热键的脚本（一般结构如下）。我想创建另一个，按下时会显示所有热键的列表及其相应的描述，脚本包含在一个漂亮的格式化表格中。

由于 AutoHotkey 的输出仅限于消息框，因此格式化和显示很脆弱，但可能。更多问题是获取热键和相应的描述。

热键都使用不同的参数调用相同的函数。我考虑向函数添加一个变量，以便根据值，该函数在由普通热键触发时执行正常功能，或者在由特殊显示热键触发时构建字符串或其他内容。

我根本想不出一种以编程方式访问脚本热键的方法。我检查了文档，似乎没有任何`A_`变量可用于此目的，该`Hotkey`命令也不能很好地发挥作用（它可用于测试是否存在热键，但循环遍历无数组合是，*在最好*的，乏味的）。

失败的尝试：

*   我尝试使用 Elliot 的解析脚本本身的建议（用 %A_ScriptFullPath% 替换路径，虽然它适用于原始脚本，但在编译脚本时它不起作用
*   我尝试将脚本的整个热键部分分配给一个变量作为延续部分，然后解析变量并使用该`Hotkey`命令创建热键。这一直到最后一部分都运行良好，因为该[`Hotkey`](https://stackoverflow.com/questions/12851677/)命令不能将任意命令作为目标并且需要*现有*标签。
*   该`ListHotkeys`命令不适用，因为它仅在控制窗口中将热键显示为纯文本。

有谁知道我如何显示热键列表及其相应的参数或评论？

* * *

示例脚本：

```
SomeFunc(foobar)
{
  MsgBox %foobar%
}

         !^#A::SomeFunc("a") ; blah
 ^+NumpadMult::SomeFunc("c") ; blivet
        ^+!#`::SomeFunc("b") ; baz
      ^#Space::SomeFunc("d") ; ermahgerd
 … 
```

示例所需的“输出”：

```
C+A+  W+ A   a    | C+ S+   NumpadMult  b
------------------+----------------------
C+A+S+W+ `   c    | C+   W+ Space       d 
```

    或者

```
Ctrl Alt Shift Win  Key         Action
-----------------------------------------
 ×    ×         ×   A           blah
 ×        ×         NumpadMult  baz
 ×    ×   ×     ×   `           blivet
 ×              ×   Space       ermahgerd

etc. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:48:23.080

我唯一能想到的就是单独阅读脚本的每一行并解析它。此代码一次读取一行脚本 (script.ahk) 并对其进行解析。这应该让你开始。此外，您还可以解析该行以检查修饰符。

```
Loop
{
    FileReadLine, line, C:\script.ahk, %A_Index%
    if ErrorLevel
        break

    If Instr(line, "::")
    {
        StringSplit, linearray, line, ::,

        key := linearray1
        StringSplit, commandarray, linearray3, `;

        action := commandarray2

        hotkeyline := "key:  " . key . "`tAction:  " . action
        final .= hotkeyline . "`r"

    }
}
msgbox % final

return 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:42:35.630

我找到了解决方案。它并不完美（或理想），希望将来可以使用适当的内置方法，但它工作得很好（足够）并且适用于原始和编译的脚本。

我所做的是使用[`FileInstall`](http://www.autohotkey.com/docs/commands/FileInstall.htm)命令告诉编译器将文件添加到可执行文件（并在运行时提取它）。

遗憾的是，该`FileInstall`命令不允许对源文件使用变量，因此我不能简单地包含脚本本身（`FileInstall, %A_ScriptFullPath%, %A_Temp%\%A_ScriptName%, 1`）。

作为一种解决方法，我最终将所有所需的热键提取到第二个文件中，然后按照 Elliot 的建议进行解析，然后删除，并`#Include`在我的脚本末尾（它*必须*在末尾，因为热键将终止[自动执行](http://www.autohotkey.com/docs/Scripts.htm)部分）。

```
;;;;; Test.ahk ;;;;;

; Add hotkey file to executable and extract to Temp directory at runtime
FileInstall, Hotkeys.ahk, %A_Temp%\Hotkeys.ahk, 1

Loop
{
  ;Read a line from the extracted hotkey script and quit if error
  FileReadLine, line, %A_Temp%\Hotkeys.ahk, %A_Index%
    if ErrorLevel
      break

  ;Trim whitespace
  line=%line%

  ; Parse the line as in Elliot’s answer, but with tweaks as necessary
  ParseHotkey(line)
  …
}

FileDelete, %A_Temp%\Hotkeys.ahk ; Delete the extracted script
DisplayHotkeys()                 ; I ended up bulding and using a GUI instead
#Include, Hotkeys.ahk            ; It is included at compile-time, so no A_Temp

;;;;; Hotkeys.ahk ;;;;;

z::MsgBox foo
y::MsgBox bar 
```

# calculator - TI-BASIC 制表符/输出格式

> ID：12684705
> 
> 赞同：0
> 
> 时间：2012-10-02T04:49:53.317
> 
> 标签：calculator, ti-basic

我在我的 TI-nspire CAS 计算器上编写了一个程序，输出类似于以下内容...

```
intercepts

x = 2 and x = 4

y = 0

derivative

2x - 4

turning points

(2, -4) 
```

这显然是在计算器中通过多行输出的相当多的信息。
我想知道如何才能更好地输出这个，例如，将 x 和 y 截距放在同一行**，由 tab 分隔**，或者将转折点**打印在同一行**（如果打印了多个。他们' 目前保存在一个列表中并迭代， Disp 'ing 每个）。

TI-Basic 是否具有 TAB 字符，或者是否有一种方法允许在同一行上打印内容（通过多个语句。像 Disp 但没有尾随换行符后缀）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T15:50:41.370

**TI-BASIC 中没有 TAB 字符。**

如果您希望间距保持一致，我建议使用空格并确定第一行的长度。

# javascript - 检测除 IE 以外的所有浏览器？

> ID：12684707
> 
> 赞同：0
> 
> 时间：2012-10-02T04:50:00.967
> 
> 标签：javascript, internet-explorer, .htaccess, redirect

有没有办法检测除 IE 之外的所有浏览器，以便使用 HTAccess 或 Javascript 进行重定向？如果不是 IE，则重定向到 site.com？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T04:52:13.917

```
var ie = /msie/i.test(navigator.userAgent);
if (!ie) { location.href = 'http://site.com'; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T04:56:15.107

我建议使用 IE 的*条件注释*，因为这意味着重定向代码甚至不会被 IE 解释。即 IE 根本不会*运行*JS 代码，只有其他浏览器会。

**使用 JS 重定向**

```
<!--[if !IE]> -->
    <script>
    window.location.href = 'http://not-ie.com'
    </script>
<!-- <![endif]--> 
```

**使用元刷新重定向**

```
<!--[if !IE]> -->
    <meta http-equiv="refresh" content="5;url=http://not-ie.com/"> 
<!-- <![endif]--> 
```

**重定向前*不显示页面的*技术**

您可以通过有条件地呈现`<body>`标签来做到这一点。*免责声明*：尚未对此进行测试。

```
<!-- for non-ie browsers, render the body tag as invisible -->
<!--[if !IE]> -->
    <meta http-equiv="refresh" content="5;url=http://not-ie.com/"> 
    <body style="display: none">
<!-- <![endif]-->

<!-- for ie, render the body tag normally -->
<!--[if IE]> -->
    <body>
<!-- <![endif]-->

<!-- your page content HTML goes here -->

</body></html> 
```

有关*条件评论*的更多信息：[http ://www.quirksmode.org/css/condcom.html](http://www.quirksmode.org/css/condcom.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T04:55:59.977

你可以做：

```
<!--[if IE 6]><script>location.href='youhazie6.htm';</script><![endif]--> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T06:31:09.870

**您确实了解带有条件注释的方法，在前面的 unswer 中描述的方法在 IE10 中不起作用？**IE10 不支持条件注释，很快就会发布。

因此，要使您的代码真正起作用，请依赖特征检测或 userAgent。但是 userAgent 有时也会失败，当有很多插件时，“Internet Explorer”或“MSIE”可能会在现实生活中被剪掉。

为了使检测更可靠，加入一些特征嗅探：

```
if ('\v'=='v' || /msie/i.test(navigator.userAgent);) {
  // ah that's you IE!
} 
```

够了。

# android - 将 iPhone 连接到 Android 的 Wifi Direct 软 AP

> ID：12684709
> 
> 赞同：16
> 
> 时间：2012-10-02T04:50:16.403
> 
> 标签：android, iphone, networking, wifi, wifi-direct

我知道 Wifi Direct 的工作原理是在其中一个设备中创建一个软 AP（软件接入点）。我也知道很多安卓都支持 Wifi Direct，但 iPhone 不支持。

我的问题是：是否可以创建一个设备到设备的 wifi 链接，在 Android 端是 Wifi Direct，但在 iPhone 端是常规 wifi？Android 的 Wifi Direct 将呈现一个软 AP，iPhone 会认为它与普通 AP 没有区别，并且能够与之关联。

想象一下，这是在没有路由器 AP 可用的荒野中。此外，两个用户都没有网络共享计划。

类似 Bump 的应用程序将使用此链接来传输文件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T13:23:17.420

根据您的手机，您可以将您的 Android 手机设置为便携式热点并使用 iPhone 连接到该热点。从那里获取数据传输将是特定于应用程序的。

但是，您也可以使用 Androids WiFi-Direct 库。在这种情况下，您将使用它们来设置 Android 手机以创建“群组所有者”，这与作为便携式热点基本相同。查看：

[http://developer.android.com/guide/topics/connectivity/wifip2p.html](http://developer.android.com/guide/topics/connectivity/wifip2p.html)

我会给你一个代码示例来帮助你入门。

```
public class WifiDirectAPtestActivity extends Activity 
{
private WifiP2pManager manager;
private boolean isWifiP2pEnabled = false;
private boolean retryChannel = false;

private final IntentFilter intentFilter = new IntentFilter();
private Channel channel;
private BroadcastReceiver receiver = null;

public void setIsWifiP2pEnabled(boolean isWifiP2pEnabled) {
    this.isWifiP2pEnabled = isWifiP2pEnabled;
}
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
 // add necessary intent values to be matched.

    intentFilter.addAction(WifiP2pManager.WIFI_P2P_STATE_CHANGED_ACTION);
    intentFilter.addAction(WifiP2pManager.WIFI_P2P_PEERS_CHANGED_ACTION);
    intentFilter.addAction(WifiP2pManager.WIFI_P2P_CONNECTION_CHANGED_ACTION);
    intentFilter.addAction(WifiP2pManager.WIFI_P2P_THIS_DEVICE_CHANGED_ACTION);

    manager = (WifiP2pManager) getSystemService(Context.WIFI_P2P_SERVICE);
    channel = manager.initialize(this, getMainLooper(), null);
}
/** register the BroadcastReceiver with the intent values to be matched */
@Override
public void onResume() {
    super.onResume();
    receiver = new WiFiDirectBroadcastReceiver(manager, channel, this);
    registerReceiver(receiver, intentFilter);
    createGroup();
}

@Override
public void onPause() {
    super.onPause();
    unregisterReceiver(receiver);
    manager.removeGroup(channel, new ActionListener() {

        @Override
        public void onFailure(int reasonCode) {
            Log.d("WifiDirectAptestActivity", "Disconnect failed. Reason :" + reasonCode);

        }

        @Override
        public void onSuccess() {
            Log.d("WifiDirectAptestActivity", "Should have been sucessfully removed");
        }

    });
}
public void createGroup()
{
    manager.createGroup(channel, new ActionListener() {

        @Override
        public void onSuccess() {
            // WiFiDirectBroadcastReceiver will notify us. Ignore for now.
            Log.d("WifiDirectAPtestActivity", "Group creating request successfully send");
        }

        @Override
        public void onFailure(int reason) {
            Toast.makeText(WifiDirectAPtestActivity.this, "Connect failed. Retry.",
                    Toast.LENGTH_SHORT).show();
        }
    });
} 
```

此外，您还需要广播接收器，查看 WiFi-Direct 演示，您应该很清楚。

请注意，manager.createGroup(channel, new ActionListener() 行是感兴趣的代码行，正是这一行实际将设备设置为便携式热点。

希望这可以澄清事情，我真的不知道您需要多详细的解释。如果有些事情不清楚，请发表评论。

# sql-server - 生成可靠的系统范围的唯一标识符

> ID：12684724
> 
> 赞同：0
> 
> 时间：2012-10-02T04:52:09.727
> 
> 标签：sql-server, uniqueidentifier

我们将文档存储在我们的数据库（sql server）中，文档分布在各个表中，因此没有一张表包含所有这些。

我现在需要为所有文档提供一个系统范围的唯一 ID，它是半可读的，不像 guid。

我以前通过创建一个具有单行/列的表来完成此操作，其中只有一个在创建新文档时会递增的数字。

这是最好的方法吗，如果有人要更新，我如何确保没有人读取当前号码，反之亦然？

在这种情况下，数字可以是 001 和根据需要自动递增，我主要担心停止碰撞而不是获得一个花哨的标识符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T06:41:45.013

如果您想要单行/列方法，我使用过：

```
declare @MyRef int
update CoreTable set @MyRef = LastRef = LastRef + 1 
```

更新将是安全的 - 每个执行它的人都会在`@MyRef`. 这比单独读取、递增、更新更安全。

* * *

表定义：

```
create table CoreTable (
    X char(1) not null,
    LastRef int not null,
    constraint PK_CoreTable PRIMARY KEY (X),
    constraint CK_CoreTable_X CHECK (X = 'X')
)
insert into CoreTable (X,LastRef) values ('X',0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T04:55:01.263

为此，您可以使用 Redis。看看这篇文章：[http ://rediscookbook.org/create_unique_ids.html](http://rediscookbook.org/create_unique_ids.html)

Redis 是一种非常快速的内存 NoSQL 数据库，但具有持久性功能。您可以快速利用 Redis 实例并使用它来创建唯一的增量编号。

然后，您可以在应用程序中将 Redis 用于其他多种用途。

另一个不涉及安装 Redis 的查询建议是按照您的建议使用单个数据库行/列，同时将其封装在事务中。这样你就不会遇到冲突。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T06:05:41.947

一种“经典”方法确实是拥有一个单独的表（例如`Documents`），其中（至少）一个 ID 列（`int identity`）。然后，将外键列和约束添加到所有现有文档表。这确保了文档 ID 在所有表中的唯一性。

像这样的东西：

```
CREATE TABLE Documents (Id int identity not null)

ALTER TABLE DocumentTypeOne 
ADD CONSTRAINT (DocumentId) DocumentTypeOne_Documents_FK Documents(Id) 
```

# php - 在正则表达式中使用字母 h 不起作用？

> ID：12684731
> 
> 赞同：0
> 
> 时间：2012-10-02T04:53:24.810
> 
> 标签：php, regex, preg-match-all

我已经在这几个小时......任何帮助将不胜感激。

我想`preg_match_all`在字符串之间，“ `Level:`”和“ `<HR>`”

一切正常，**除非**我添加了这封信`h`

为什么？！？

```
<?php
include("courses.php");
preg_match_all('/(level:.*?)r>/i', $str, $matches); 
// this works but picks up <br>, so i wanted to add in the letter h

preg_match_all('/(level:.*?)h/i', $str, $matches); 
// i've tried changing it to `hr` but that fails, now, *even only* `h` fails

print_r($matches[1]);
?> 
```

我试过转义 h，但不知道这封信有什么问题。

字符串是：

```
$str='Level: <B>Undergraduate</B><BR>
Information Literacy Course: <B>N</B><BR>
Special Restriction: <B>None</B><BR>
<HR>';
// this repeats alot. I just wrote it out once, but it's all in the same variable like this. 
```

我想你们问我要那根绳子，点亮了我脑海中的灯泡。我没有考虑换行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T05:01:12.267

不知道为什么你认为它会失败，但如果你想要这两个术语之间的字符串：

```
preg_match_all('/Level:(.*?)<hr>/i', $str, $matches);
// $matches[1] contains the matches 
```

如果这不起作用，也许你的字符串中有换行符，在这种情况下，你需要`/s` [修饰符](http://sg3.php.net/manual/en/reference.pcre.pattern.modifiers.php)来`.`匹配换行符：

```
preg_match_all('/Level:(.*?)<hr>/is', $str, $matches); 
```

# java - 结果集返回空值

> ID：12684732
> 
> 赞同：1
> 
> 时间：2012-10-02T04:53:28.533
> 
> 标签：java, mysql, database

在一个非常简单的 SELECT 查询中检索时遇到问题。我正在尝试从表“db_con_type”中检索所有信息并将它们放入 dbChoices 的数组字符串中。

数据库：

Select 查询在报表设计器中运行良好。对不起，我不能上传图片，因为我是新来的。

代码：

```
public void setDbTypeChoices()
    {
       try
        {
            con2db connect2db = new con2db();
            con = connect2db.aksesDatabase();
            stmt = con.createStatement();
            String sql = "SELECT * FROM db_con_type";

            rs = stmt.executeQuery(sql);

            int i = 0;
            while(rs.next())
            {
                this.dbChoices[i] = rs.getString("DB_Type");
                i++;
            }

            rs.close();
            stmt.close();
            ps.close();
            con.close();

            //Close Connection
            connect2db.tutupKoneksi();
        }
       catch(Exception e)
       {
           System.out.println("SQL ERROR 1 = " + e.getMessage());
           System.out.println("SQL ERROR 2 = " + e.toString());
       }
    } 
```

错误：

SQL 错误 1 ​​= 空

SQL 错误 2 = java.lang.NullPointerException

问题：

知道发生了什么吗？任何解决方案？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T02:29:44.593

发现了问题。这是因为 ps.close() 代码..

因为我不在这里使用它，但我关闭它并出现问题..

感谢 Luiggi 的 printStackTrace 想法。感谢所有答案。我真的很感激.. :D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T02:38:12.760

顺便说一句，这是一个很好的做法，如果你正在处理`ResultSet`它，你首先检查返回的结果集是否不为空，然后再对其进行操作，例如，如果是`rs.next()`，这会给你一个 NPE 。`rs``null`

```
if(rs != null) {
    while(rs.next()) {
        this.dbChoices[i] = rs.getString("DB_Type");
        i++;
    }
} 
```

# java - 如何为 TestNG 中的每个套件设置单独的 testng-failed.xml？

> ID：12684734
> 
> 赞同：2
> 
> 时间：2012-10-02T04:54:13.947
> 
> 标签：java, testng

我想使用以下代码同时运行两个 TestNG 套件：

```
TestNG testng = new TestNG();
List<String> suites = Lists.newArrayList();
suites.add("src/test/resources/NewRegTest.xml");
suites.add("src/test/resources/NewRegTest1.xml");
testng.setSuiteThreadPoolSize(2);
testng.setTestSuites(suites);
testng.run(); 
```

代码工作正常。问题是我想`testng-failed.xml`为每个套件单独设置一个。现在，每次运行套件时，TestNG 都会不断重写 xml，因此我无法从第一个套件中看到失败的测试用例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:31:41.943

我认为您在两个 xml 文件中使用相同的套件名称。

```
<suite verbose="0" name="**Suite1**"> 
```

testng 在输出目录下为每个套件名称创建一个子文件夹，该文件夹包含该套件的 testng-failed.xml。使用不同的名称可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:40:40.063

这里的问题是没有办法为每次执行保留报告。您可以指定任何报告位置，它将在新的执行发生时替换所有报告。您可以做的一个技巧是添加带有时间戳的报告目录附加。这将为每次执行生成报告目录，并且您的历史报告在那里是安全的。

```
java.util.Date date= new java.util.Date(); 
testng.setOutputDirectory("src/main/reports"+new Timestamp(date.getTime()));
testng.run(); 
```

# ruby - 在 Ruby 中行走的目录的一个转折

> ID：12684736
> 
> 赞同：0
> 
> 时间：2012-10-02T04:54:37.617
> 
> 标签：ruby, algorithm, directory, performance, processing-efficiency

我想做以下事情：

给定一个目录树：

```
Root
 |_dirA  
 |_dirB  
    |_file1  
    |_file2  
 |_dirC  
    |_dirD  
       |_dirE  
          |_file3  
          |_file4  
 |_dirF  
    |_dirG  
       |_file5  
       |_file6  
       |_file7 
```

...我想遍历目录树并构建一个数组，其中包含每个目录中至少有一个文件的第一个文件的路径。整体结构可能非常大，文件多于目录，所以我想只捕获第一个文件的路径，而不遍历给定目录中的所有文件。一个文件就够了。对于上面的树，结果应该看起来像一个仅包含以下内容的数组：

```
 root/dirB/file1
  root/dirC/dirD/dirE/file3
  root/dirF/dirG/file5 
```

我在 ruby​​ 中使用过 Dir 和 Find 选项，但我的方法感觉太暴力了。

有没有一种有效的方法来编码这个功能？感觉就像我在这里错过了一些红宝石技巧。

非常感谢！

这是我的方法：

```
root="/home/subtest/tsttree/"
Dir.chdir(root)
dir_list=Dir.glob("**/*/") #this invokes recursion
result=Array.new
dir_list.each do |d|
        Dir.chdir(root + d)
        Dir.open(Dir.pwd).each do |filename| 
            next if File.directory? filename  #some directories may contain only other directories so exclude them
            result.push(d + filename)
            break
        end
end
puts result 
```

有效，但看起来很乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T05:39:36.230

```
require 'pathname'

# My answer to stackoverflow question posted here:
# http://stackoverflow.com/questions/12684736/a-twist-on-directory-walking-in-ruby
class ShallowFinder
  def initialize(root)
    @matches = {}
    @root = Pathname(root)
  end

  def matches
    while match = next_file
      @matches[match.parent.to_s] = match
    end

    @matches.values
  end

  private

  def next_file
    @root.find do |entry|
      Find.prune if previously_matched?(entry)
      return entry if entry.file?
    end
    nil
  end

  def previously_matched?(entry)
    return unless entry.directory?
    @matches.key?(entry.to_s)
  end
end

puts ShallowFinder.new('Root').matches 
```

# 输出：

# 根/B/file1

# 根目录/C/D/E/file3

# 根/F/G/file5

# java - httpClient.execute(httpget, responseHandler) 中的 ClientProtocolException

> ID：12684739
> 
> 赞同：7
> 
> 时间：2012-10-02T04:54:50.423
> 
> 标签：java, android, http, http-get

我正在使用以下代码从 Web 服务器请求 xml：

```
HttpClient httpclient = new DefaultHttpClient()
try 
{
    HttpGet httpget = new HttpGet("http://63.255.173.242/get_public_tbl.cgi?A=1");              
    ResponseHandler responseHandler = new BasicResponseHandler();
    String responseBody = httpclient.execute(httpget, responseHandler);
    System.out.println(responseBody);
}
catch (ClientProtocolException e)
{
    e.printStackTrace();
}
catch (IOException e)
{
    e.printStackTrace();
} 
finally 
{
    httpclient.getConnectionManager().shutdown();
} 

```

当我调用 httpclient.execute(httpget, responseHandler) 时，我得到一个 clientProtocolException。url 在 web 浏览器中工作得很好，它返回 xml 并且浏览器显示它。

任何想法为什么我会得到一个 clientProtocolException 而浏览器却可以很好地处理它？

编辑1：

查看协议异常，详细消息是：“服务器未能以有效的 HTTP 响应响应”。我无法更改正在访问的 Web 服务器。有没有办法忽略这一点而只访问响应？

编辑2：

我发现服务器没有发回完整的标头。即使返回损坏的标头，有没有办法访问响应的内容？

编辑 3：我将 IP 地址编辑为我要访问的真实 IP 地址。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T23:48:09.587

由于您的代码似乎是正确的，您必须弄清楚：这是客户端的错误（无效请求）还是服务器的错误（无效响应）。为此，请使用[http 跟踪实用程序](https://stackoverflow.com/questions/12944862/http-trace-utitlity/12967817#12967817)并将浏览器的请求与客户端的请求进行比较。如果有的话，您还可以看到来自服务器的原始响应。如果您无法弄清楚，请将原始请求和响应添加到您的问题中，有人可能会提供帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T05:10:18.673

我已经用我的 IP 地址测试了你的代码。代码没有错误。我刚改成`ResponseHandler`.`BasicResponseHandler`

检查这个

```
 HttpClient httpclient = new DefaultHttpClient();
    try 
    {
        HttpGet httpget = new HttpGet("http://www.MyServer.com/get_public_tbl.cgi?A=1");               
        BasicResponseHandler responseHandler = new BasicResponseHandler();//Here is the change
        String responseBody = httpclient.execute(httpget, responseHandler);
        System.out.println(responseBody);
    }
    catch (ClientProtocolException e)
    {
        e.printStackTrace();
    }
    catch (IOException e)
    {
        e.printStackTrace();
    } 
    finally 
    {
        httpclient.getConnectionManager().shutdown();
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T13:24:49.243

您可以尝试添加自己的响应拦截器，您可以在其中添加或删除标头，或打印一些调试信息

```
hc.addResponseInterceptor(new HttpResponseInterceptor() {
    @Override
    public void process(HttpResponse response, HttpContext context) throws HttpException, IOException {
        response.getEntity().writeTo(System.out);
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-04T14:58:51.640

检查您在客户端中设置的标头，重新验证标头的键和值。就我而言，我使用的是“csrf”参数而不是“Cookie”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-05T17:28:21.937

我遇到了类似的问题，ClientProtocolException
显然服务器没有目标 Web 服务 SSL
，所以它是错误的 SSL 配置，

根本错误是：

```
 java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty 
```

将信任库添加到 java 后，此错误消失了。

希望它可以帮助某人。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2019-08-28T12:23:02.827

就我而言，我已从 pom 文件中删除了以下依赖项并解决了该问题：

```
 <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>httpclient</artifactId>
        <version>4.5.9</version>
    </dependency> 
```

# c# - 无法使用 DataContractJsonSerializer 反序列化枚举

> ID：12684740
> 
> 赞同：1
> 
> 时间：2012-10-02T04:54:59.723
> 
> 标签：c#, asp.net-mvc, json, serialization

REST 服务返回此 json 字符串

```
"{\"UserProfile\":2,\"UserInfo\":0,\"Status\":1,\"Photo\":0,\"Video\":1,\"Comment\":0,\"ProfilePic\":0,\"Friends\":0,\"Tags\":2}" 
```

并使用以下代码反序列化：

```
 public static T Deserialize<T>(string json)
    {
        T obj = Activator.CreateInstance<T>();
        MemoryStream ms = new MemoryStream(Encoding.Unicode.GetBytes(json));
        System.Runtime.Serialization.Json.DataContractJsonSerializer serializer = new System.Runtime.Serialization.Json.DataContractJsonSerializer(obj.GetType());
        obj = (T)serializer.ReadObject(ms);
        ms.Close();
        ms.Dispose();
        return obj;
    }  

Security sec = Deserialize<Security>(jsonresult); 
```

在哪里：

```
[DataContract]
public class Security
{
    [DataMember]
    SecurityType UserProfile { get; set; }

    [DataMember]
    SecurityType UserInfo { get; set; }

    [DataMember]
    SecurityType Status { get; set; }

    [DataMember]
    SecurityType Photo { get; set; }

    [DataMember]
    SecurityType Video { get; set; }

    [DataMember]
    SecurityType Comment { get; set; }

    [DataMember]
    SecurityType ProfilePic { get; set; }

    [DataMember]
    SecurityType Friends { get; set; }

    [DataMember]
    SecurityType Tags { get; set; }
} 
```

和枚举：

```
[DataContract]
public enum SecurityType
{
    [EnumMember]
    Everyone,

    [EnumMember]
    FriendsOf,

    [EnumMember]
    Friends
} 
```

反序列化 jsonstring 后，它返回`Security`所有属性值都等于`Everyone`（等于零）的类型。
看着`console.log`

```
$.post('@Url.Action("GetSecurityProfile", "Home")', { reload: reload }, function (data) {

    console.log(data);

    $('[data-security-profile] option').eq(data.UserProfile).attr('selected', 'selected');
    $('[data-security-info] option').eq(data.UserInfo).attr('selected', 'selected');
    $('[data-security-status] option').eq(data.Status).attr('selected', 'selected');
    $('[data-security-photos] option').eq(data.Photo).attr('selected', 'selected');
    $('[data-security-videos] option').eq(data.Video).attr('selected', 'selected');
    $('[data-security-comment] option').eq(data.Comment).attr('selected', 'selected');
    $('[data-security-profilepic] option').eq(data.ProfilePic).attr('selected', 'selected');
    $('[data-security-colleagues] option').eq(data.Friends).attr('selected', 'selected');
    $('[data-security-tags] option').eq(data.Tags).attr('selected', 'selected');

}); 
```

返回：（`object{ }`空值）
我无法弄清楚代码有什么问题。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T05:02:36.110

尝试公开**Security**类的属性：

```
[DataContract]
public class Security
{
    [DataMember]
    public SecurityType UserProfile { get; set; }

    [DataMember]
    public SecurityType UserInfo { get; set; }

    [DataMember]
    public SecurityType Status { get; set; }

    [DataMember]
    public SecurityType Photo { get; set; }

    [DataMember]
    public SecurityType Video { get; set; }

    [DataMember]
    public SecurityType Comment { get; set; }

    [DataMember]
    public SecurityType ProfilePic { get; set; }

    [DataMember]
    public SecurityType Friends { get; set; }

    [DataMember]
    public SecurityType Tags { get; set; }
} 
```

# sql - 为什么要创建从主键字段引用同一张表的主键的外键约束

> ID：12684749
> 
> 赞同：6
> 
> 时间：2012-10-02T04:56:05.537
> 
> 标签：sql, foreign-key-relationship

我继承了一个 SQL Server 数据库，该数据库有一个主键名为 RecordID 的表。表定义和外键定义如下：

```
CREATE TABLE [dbo].[MyTable](
  [RecordId] [int] IDENTITY(1,1) NOT NULL,
  [FileName] [nvarchar](255) NOT NULL,
  [Record] [nvarchar](255) NOT NULL,
  [ErrorDescription] [nvarchar](255) NULL,
  [ProcessDate] [datetime] NOT NULL,
 CONSTRAINT [PK_MyTable] PRIMARY KEY CLUSTERED 
(
  [RecordId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON, FILLFACTOR = 90) ON [PRIMARY]
) ON [PRIMARY]

GO

ALTER TABLE [dbo].[MyTable]  WITH CHECK ADD  CONSTRAINT [FK_MyTable_MyTable] FOREIGN KEY([RecordId])
REFERENCES [dbo].[MyTable] ([RecordId])
GO

ALTER TABLE [dbo].[MyTable] CHECK CONSTRAINT [FK_MyTable_MyTable]
GO 
```

如果从同一个表中的不同字段引用的外键返回到允许层次结构的主键字段，我可以理解这一点，但在这种情况下，外键定义中的两个字段是完全相同的字段。这只是表和外键的原始定义中的错误吗？或者这有什么真正的优势？

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T05:32:27.327

因为外键引用自身，所以检查永远不会失败。这使得它，作为一个约束，一个无操作，所以它在这个词的每一个意义上，*extraneous*。显然有人在创建约束时犯了错误。

我以为我可能遗漏了什么，所以快速检查了一下：http: [//www.dotnetnuke.com/Resources/Forums/forumid/-1/postid/342163/scope/posts.aspx](http://www.dotnetnuke.com/Resources/Forums/forumid/-1/postid/342163/scope/posts.aspx)这加强了我的怀疑（用户错误）。我最有根据的结论是，有人在某个阶段想创建一个自引用（其他列）表约束，但在混乱的邪恶扭曲中创造了这种可憎的东西。

# php - 在 PHP 中更新 XML 节点

> ID：12684753
> 
> 赞同：-1
> 
> 时间：2012-10-02T04:56:56.363
> 
> 标签：php, xml, xml-parsing

> **可能重复：**
> [一个简单的程序来 CRUD 节点和 xml 文件的节点值](https://stackoverflow.com/questions/4906073/a-simple-program-to-crud-node-and-node-values-of-xml-file)

我在更新 xml 文件中的节点时遇到问题。我的xml文件是这样的：

```
 <container id="header"> 
        <widgetname="header" cache='true' cachetime='7200' ><parameter name="image" value="gnome"></parameter></widget>
    </container>

    <container id="nav_wrapper">    
        <container id="main_menu_container">
            <widget name="menu">
                <parameter name="menuid" value="9"></parameter>
            </widget>
        </container>
        <container id="search_wrapper">
            <widget name="search" cache='true' cachetime='7200' ></widget>
        </container>
    </container>

    <container class="subpage_wrapper">
        <container id="leftcol">
            <container class="subnav">
                <widget name="menu">
                    <parameter name="menuid" value="5"></parameter>
                </widget>
            </container>
        </container>
        <container id="rightcol">
            <page name="articlelist"></widget>
        </container>
    </container>
</container>
</layout> 
```

整个页面的布局会按照这个xml来渲染，工作正常。当管理员必须更新小部件的参数时，麻烦就开始了。为此，我提供了预览布局，管理员可以选择小部件的参数。

例如，当管理员单击`container>topbar>top_nav>menu`小部件的配置时，将为他提供所有可用选项。但是我还没有找到将新选择的值保存到该节点的任何解决方案。
有谁知道该怎么做？

[编辑] 主要问题是子元素可以是无限的。此外，同一路径可能有多个子 **容器>容器>小部件**将在 xml 中重复可能多次

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:01:07.000

在 PHP 中编辑 XML 有很多选项。

看看[PHP DOM](http://php.net/manual/en/book.dom.php)或[SimpleXML](http://www.php.net/manual/en/book.simplexml.php)。

SimpleXML 文档有很多示例。示例之一是[将值写入 XML 文档](http://www.php.net/manual/en/simplexml.examples-basic.php#example-5150)。

# multithreading - 为什么使用 Shelly.Background 调用外部可执行文件时主可执行文件很忙

> ID：12684754
> 
> 赞同：3
> 
> 时间：2012-10-02T04:56:57.237
> 
> 标签：multithreading, haskell, concurrency, shelly

我正在尝试用[Shelly](http://hackage.haskell.org/package/shelly-0.14.1)编写一个程序来并行编译 Delphi 项目。我以为程序会在等待 Delphi 编译器返回时被阻塞。但是我的程序在编译了 2 个项目后开始最大化一个 CPU 核心。我无法弄清楚它这么忙在做什么。请帮忙？谢谢。

ps：我对 Haskell 很陌生，如果我没有以正确的方式实现这一点，我们将不胜感激。

```
{-# LANGUAGE OverloadedStrings, ExtendedDefaultRules #-}
{-# OPTIONS_GHC -fno-warn-type-defaults #-}
import Shelly 
import Shelly.Background

import Control.Monad
import Control.Arrow
import System.IO.Temp (withSystemTempDirectory)
import System.Directory (getCurrentDirectory)
import System.FilePath (splitFileName)
import Data.Text.Lazy (Text, pack)
default (Int, Text)

dcc32 = command "dcc32" ["-RC:\\Program Files\\Borland\\BDS\\4.0\\Lib", "-Q", "-H", "-W", "-B"]

compile project = liftIO $ withSystemTempDirectory "TempDCU_" compile'
  where
    compile' tmpDir = shellyNoDir $ silently $ 
      chdir dir (dcc32 [toTextIgnore file, pack $ "-N" ++ tmpDir])
    (dir, file) = mapTuple (fromText . pack) $ splitFileName project
    mapTuple = join (***)

compilePooled n projects = shellyNoDir $ jobs n (\job -> mapM (background job . compile) projects)

projectList = [
    "C:\\Path\\to\\project1.dpr",
    "C:\\Path\\to\\project2.dpr",
    "C:\\Path\\to\\project3.dpr",
    "C:\\Path\\to\\project4.dpr",
    ]

main = do
  output <- compilePooled 2 projectList
  shellyNoDir $ mapM getBgResult output >>= mapM_ inspect 
```

# algorithm - 在部分排序的数组中插入比合并排序更好吗？

> ID：12684756
> 
> 赞同：1
> 
> 时间：2012-10-02T04:57:34.127
> 
> 标签：algorithm, sorting, complexity-theory

我必须开发一种能够对 n 元素列表进行排序的算法，其中对第一个 (n-root(n)) 元素进行排序。是的，这是一个家庭作业问题。

经过对互联网和[stack-overflow的一些](https://stackoverflow.com/questions/6771166/sorting-a-partially-sorted-array)[研究](http://en.wikipedia.org/wiki/Adaptive_sort)，我相信插入排序和冒泡排序最适合部分排序的数组。该[链接](http://www.sorting-algorithms.com/)清楚地表明插入排序优于合并排序。我已经把插入排序作为我作业的答案。

但是，当我开始进行渐近复杂性分析时，我会感到困惑。

对于插入排序，我们至少要看看每个元素。如果元素未排序，我们将不得不进行移位/反转。因此，插入排序将有 O(n + m)，其中 m 是总反转。或者，我们也可以说它具有线性复杂度 O(n)。

对于归并排序，我们需要对未排序的 root(n) 元素进行归并排序，这将给出 root(n)log(root (n)) 复杂度。此外，我们需要与排序列表进行合并（这将花费 O(n)）。因此，复杂度将是 O(root(n) log (root (n)) + n) 或 O(n)，因为 n 支配 root(n) log (root(n))。

为什么两者具有相同的渐近复杂度？这只是我的好奇心。我可能在复杂性计算中间的某个地方犯了错误。

我是学生，还在学习。我很感激任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:29:48.673

此列表中的总反转计数可能高达 (n - Sqrt(n)) * Sqrt(n) = O(n ^(3/2) )。

示例：100 元素列表 (10 11 12..99 100 1 2 3 4 5 6 7 8 9 10) 的反转计数为 900，因此插入排序将执行大约 900 次操作（每个尾元素 90 次移位）

# coffeescript - 为什么编译的 CoffeeScript 不通过 JSHint？

> ID：12684758
> 
> 赞同：4
> 
> 时间：2012-10-02T04:57:57.860
> 
> 标签：coffeescript, jshint

我使用[CoffeeScript 主页](http://coffeescript.org)中的示例，但它没有验证。

[`for`循环](http://coffeescript.org/#loops)一是一个完美的例子，如果您使用咖啡脚本语句，它不会将主体包装在`if`语句中。

*   应为“{”，而是看到“孩子”。
*   可能严格违反。
*   构造函数名称应以大写字母开头。
*   'insertclassnamehere' 已定义。
*   你的意思是返回一个条件而不是一个赋值？
*   预期为“===”，而是看到了“==”。
*   意外的'〜'。
*   预期为 '!==' 而看到的是 '!='。
*   for in 的主体应该包含在 if 语句中，以从原型中过滤掉不需要的属性。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T07:13:17.017

> 我编译的 CoffeeScript 不会在 JSHint 中验证 .. 为什么？

简短的回答是：因为 CoffeeScript 编译器的创建者认为没有必要。

对开发人员编写和维护的代码进行 lint 检测是有意义的。它通过使代码可读来避免人为错误。

另一方面，编译器生成的代码有完全不同的要求。可读性通常不是问题。更重要的是代码高效且小巧。

如果你真的想要这个，那么你需要修改 CoffeeScript 编译器源。

# math - 类似于 ms paint 的“spraypaint”程序编程数学

> ID：12684759
> 
> 赞同：-1
> 
> 时间：2012-10-02T04:58:04.967
> 
> 标签：math

我正在尝试编写一个喷漆类型的程序，但我忘记了我所有的数学。

我需要某种概率方程来选择用户点击附近的像素。因此，中心附近的概率应该很高，然后随着与中心的距离变大而降低，一旦达到一定距离，概率应该为零。中心的概率也应该是一条平滑曲线（如果你知道我的意思）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T05:49:02.563

我不确定您使用哪种语言进行编码，所以这里有一些伪代码。我将假设您知道您正在编码的语言中的相应语法。

```
// Parameters:
// Radius is the radius of the brush in pixels
// Strength is a double ranging 0.0 to 1.0 and multiplies the probability of a pixel being painted
function spraypaint(int radius, double strength) {
    strength = (strength * 2) - 1; //Change strength from 0.0->1.0 to -1.0->1.0 for logical application

    // For each pixel within the square...
    for(int x = -radius; x < radius; x++) {
        for(int y = -radius; y < radius; y++) {
            double distance = sqrt(x*x + y*y); // Get distance from center pixel
            double angle = 90*(distance/radius); // Get angle of "bell curve"
            double probability = sine(angle); // Determine probability of filling in this pixel

            // Apply additional probability based on strength parameter
            if(strength >= 0.0)
                probability += ((1-probability) * strength);
            else
                probability += probability * strength;

            if(distance > radius) {
                continue;   // Skip this pixel if it's out of the circle's radius
            }

            if(random(0.0 to 1.0) < probability) { // If we random a decimal lower than our probability
                setPixel(mouse.x + x, mouse.y + y, "Black"); // Draw this pixel
            }
        }
    }
} 
```

基本思想是：

```
Iterate through each pixel and...

1\. Find its distance from the center pixel (The clicked pixel).
2\. Get distance/radius (0.0 to 1.0) and find the corresponding sine, creating a
   smooth probability curve.
3\. Apply the supplied strength to the probability.
4\. Pull a random double 0.0 to 1.0 and draw the pixel if it's within our probability. 
```

# amazon-ec2 - 新 EC2 实例上的 Yum 命令

> ID：12684760
> 
> 赞同：0
> 
> 时间：2012-10-02T04:58:06.907
> 
> 标签：amazon-ec2, amazon-web-services

在新的 EC2 实例启动后自动运行“yum update”的推荐方法是什么（基于 Amazon Linux AMI 的实例）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:41:12.310

您可以使用[CloudInit](https://help.ubuntu.com/community/CloudInit)用户数据脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:35:40.120

我会亲自配置一个 shell 脚本作为用户数据传递，它将运行所有需要的服务器设置任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T07:41:47.470

在新的 EC2 实例上配置一个 init 任务以`yum update`按某种计划运行（您通常希望确保所有实例始终运行相同版本的软件），然后从您刚刚修改的正在运行的实例创建一个新的 AMI。

从那时起，只需启动新的 AMI 而不是新的 AMI。随着时间的推移，您将希望再次执行相同的操作，以便在越来越多的更新可用时实例启动不会花费很长时间。

每 3-4 个月一次似乎是一个很好的增量。

# php - Twitter API 返回错误 215，错误的身份验证数据

> ID：12684765
> 
> 赞同：112
> 
> 时间：2012-10-02T04:58:37.330
> 
> 标签：php, api, twitter

我正在尝试调用关注 Twitter 的 API 来获取用户的关注者列表。

[http://api.twitter.com/1.1/followers/ids.json?cursor=-1&screen_name=username](http://api.twitter.com/1.1/followers/ids.json?cursor=-1&screen_name=username)

我收到此错误消息作为回应。

```
{
    code = 215;
    message = "Bad Authentication data";
} 
```

我似乎找不到与此错误代码相关的文档。有人对此错误有任何想法吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-01-22T18:14:06.750

一个非常简洁的代码，没有任何其他 php 文件包括 oauth 等。请注意获取以下密钥，您需要使用[https://dev.twitter.com](https://dev.twitter.com)注册并创建应用程序。

```
<?php
$token = 'YOUR_TOKEN';
$token_secret = 'YOUR_TOKEN_SECRET';
$consumer_key = 'CONSUMER_KEY';
$consumer_secret = 'CONSUMER_SECRET';

$host = 'api.twitter.com';
$method = 'GET';
$path = '/1.1/statuses/user_timeline.json'; // api call path

$query = array( // query parameters
    'screen_name' => 'twitterapi',
    'count' => '5'
);

$oauth = array(
    'oauth_consumer_key' => $consumer_key,
    'oauth_token' => $token,
    'oauth_nonce' => (string)mt_rand(), // a stronger nonce is recommended
    'oauth_timestamp' => time(),
    'oauth_signature_method' => 'HMAC-SHA1',
    'oauth_version' => '1.0'
);

$oauth = array_map("rawurlencode", $oauth); // must be encoded before sorting
$query = array_map("rawurlencode", $query);

$arr = array_merge($oauth, $query); // combine the values THEN sort

asort($arr); // secondary sort (value)
ksort($arr); // primary sort (key)

// http_build_query automatically encodes, but our parameters
// are already encoded, and must be by this point, so we undo
// the encoding step
$querystring = urldecode(http_build_query($arr, '', '&'));

$url = "https://$host$path";

// mash everything together for the text to hash
$base_string = $method."&".rawurlencode($url)."&".rawurlencode($querystring);

// same with the key
$key = rawurlencode($consumer_secret)."&".rawurlencode($token_secret);

// generate the hash
$signature = rawurlencode(base64_encode(hash_hmac('sha1', $base_string, $key, true)));

// this time we're using a normal GET query, and we're only encoding the query params
// (without the oauth params)
$url .= "?".http_build_query($query);
$url=str_replace("&amp;","&",$url); //Patch by @Frewuill

$oauth['oauth_signature'] = $signature; // don't want to abandon all that work!
ksort($oauth); // probably not necessary, but twitter's demo does it

// also not necessary, but twitter's demo does this too
function add_quotes($str) { return '"'.$str.'"'; }
$oauth = array_map("add_quotes", $oauth);

// this is the full value of the Authorization line
$auth = "OAuth " . urldecode(http_build_query($oauth, '', ', '));

// if you're doing post, you need to skip the GET building above
// and instead supply query parameters to CURLOPT_POSTFIELDS
$options = array( CURLOPT_HTTPHEADER => array("Authorization: $auth"),
                  //CURLOPT_POSTFIELDS => $postfields,
                  CURLOPT_HEADER => false,
                  CURLOPT_URL => $url,
                  CURLOPT_RETURNTRANSFER => true,
                  CURLOPT_SSL_VERIFYPEER => false);

// do our business
$feed = curl_init();
curl_setopt_array($feed, $options);
$json = curl_exec($feed);
curl_close($feed);

$twitter_data = json_decode($json);

foreach ($twitter_data as &$value) {
   $tweetout .= preg_replace("/(http:\/\/|(www\.))(([^\s<]{4,68})[^\s<]*)/", '<a href="http://$2$3" target="_blank">$1$2$4</a>', $value->text);
   $tweetout = preg_replace("/@(\w+)/", "<a href=\"http://www.twitter.com/\\1\" target=\"_blank\">@\\1</a>", $tweetout);
   $tweetout = preg_replace("/#(\w+)/", "<a href=\"http://search.twitter.com/search?q=\\1\" target=\"_blank\">#\\1</a>", $tweetout);
}

echo $tweetout;

?> 
```

问候

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-05-16T03:52:40.217

到目前为止，我发现的唯一解决方案是：

*   在 twitter 开发者面板中创建应用程序
*   使用您的应用程序（或您在用户帐户中的应用程序）授权用户并保存 Twitter 给您的“oauth_token”和“oauth_token_secret”。为此使用[TwitterOAuth](https://github.com/abraham/twitteroauth)库，这很容易，请参阅库附带的示例。
*   使用此令牌，您可以代表用户发出经过身份验证的请求。您可以使用同一个库来完成。

    ```
    // Arguments 1 and 2 - your application static tokens, 2 and 3 - user tokens, received from Twitter during authentification  
    $connection = new TwitterOAuth(TWITTER_CONSUMER_KEY, TWITTER_CONSUMER_SECRET, $tokens['oauth_token'], $tokens['oauth_token_secret']);  
    $connection->host = 'https://api.twitter.com/1.1/'; // By default library uses API version 1\.  
    $friendsJson = $connection->get('/friends/ids.json?cursor=-1&user_id=34342323'); 
    ```

这将返回您用户的朋友列表。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-06-22T12:31:33.273

找到解决方案 - 使用[Abraham TwitterOAuth 库](https://github.com/abraham/twitteroauth/blob/master/README.md)。如果您使用的是较旧的实现，则应在实例化新的 TwitterOAuth 对象后添加以下行：

```
$connection->host = "https://api.twitter.com/1.1/";
$connection->ssl_verifypeer = TRUE;
$connection->content_type = 'application/x-www-form-urlencoded'; 
```

前 2 行现在记录在 Abraham 库自述文件中，但第 3 行没有。还要确保您的 oauth_version 仍然是 1.0。

这是我的代码，用于使用新认证的用户从 'users/show' 获取所有用户数据，并使用 1.1 返回用户全名和用户图标 - 以下代码在身份验证回调文件中实现：

```
session_start();
require ('twitteroauth/twitteroauth.php');
require ('twitteroauth/config.php');

$consumer_key = '****************';
$consumer_secret = '**********************************';

$to = new TwitterOAuth($consumer_key, $consumer_secret);

$tok = $to->getRequestToken('http://exampleredirect.com?twitoa=1');

$token = $tok['oauth_token'];
$secret = $tok['oauth_token_secret'];

//save tokens to session
$_SESSION['ttok'] = $token;
$_SESSION['tsec'] = $secret;

$request_link = $to->getAuthorizeURL($token,TRUE);

header('Location: ' . $request_link); 
```

然后以下代码在身份验证和令牌请求之后的重定向中

```
if($_REQUEST['twitoa']==1){
    require ('twitteroauth/twitteroauth.php');
    require_once('twitteroauth/config.php');
    //Twitter Creds
    $consumer_key = '*****************';
    $consumer_secret = '************************************';

    $oauth_token = $_GET['oauth_token']; //ex Request vals->http://domain.com/twitter_callback.php?oauth_token=MQZFhVRAP6jjsJdTunRYPXoPFzsXXKK0mQS3SxhNXZI&oauth_verifier=A5tYHnAsbxf3DBinZ1dZEj0hPgVdQ6vvjBJYg5UdJI

    $ttok = $_SESSION['ttok'];
    $tsec = $_SESSION['tsec'];

    $to = new TwitterOAuth($consumer_key, $consumer_secret, $ttok, $tsec);
    $tok = $to->getAccessToken();
    $btok = $tok['oauth_token'];
    $bsec = $tok['oauth_token_secret'];
    $twit_u_id = $tok['user_id'];
    $twit_screen_name = $tok['screen_name'];

    //Twitter 1.1 DEBUG
    //print_r($tok);
    //echo '<br/><br/>';
    //print_r($to);
    //echo '<br/><br/>';
    //echo $btok . '<br/><br/>';
    //echo $bsec . '<br/><br/>';
    //echo $twit_u_id . '<br/><br/>';
    //echo $twit_screen_name . '<br/><br/>';

    $twit_screen_name=urlencode($twit_screen_name);
    $connection = new TwitterOAuth($consumer_key, $consumer_secret, $btok, $bsec);
    $connection->host = "https://api.twitter.com/1.1/";
    $connection->ssl_verifypeer = TRUE;
    $connection->content_type = 'application/x-www-form-urlencoded';
    $ucontent = $connection->get('users/show', array('screen_name' => $twit_screen_name));

    //echo 'connection:<br/><br/>';
    //print_r($connection);
    //echo '<br/><br/>';
    //print_r($ucontent);

    $t_user_name = $ucontent->name;
    $t_user_icon = $ucontent->profile_image_url;

    //echo $t_user_name.'<br/><br/>';
    //echo $t_user_icon.'<br/><br/>';
} 
```

我花了太长时间才弄清楚这一点。希望这对某人有帮助！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-02T05:05:50.290

**更新：** Twitter API 1 现已弃用。参考上面的答案。

Twitter 1.1 不适用于该语法（当我写这个答案时）。必须是 1，而不是 1.1。这将起作用：

[http://api.twitter.com/1/followers/ids.json?cursor=-1&screen_name=username](http://api.twitter.com/1/followers/ids.json?cursor=-1&screen_name=username)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-05-14T15:59:04.953

Gruik 的回答在下面的线程中为我工作。

{摘录 | [Zend_Service_Twitter - 准备好 API v1.1](https://stackoverflow.com/questions/12677004/zend-service-twitter-make-api-v1-1-ready/16002174#16002174) }

> 对于 ZF 1.12.3，解决方法是在 oauthOptions 选项中传递 consumerKey 和 consumerSecret，而不是直接在选项中传递。

```
 $options = array(
        'username' => /*...*/,
        'accessToken' => /*...*/,
        'oauthOptions' => array(
            'consumerKey' => /*...*/,
            'consumerSecret' => /*...*/,
        )
    ); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-11-16T12:51:53.967

其中的 url`/1.1/`是正确的，它是新的 Twitter API 版本 1.1。

但是您需要一个应用程序并使用 oAuth 授权您的应用程序（和用户）。

[在Twitter 开发者文档网站](https://dev.twitter.com)上阅读更多相关信息 :)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-11-26T20:11:58.373

您需要将*customerKey*和*customerSecret*发送到 Zend_Service_Twitter

```
$twitter = new Zend_Service_Twitter(array(
                'consumerKey' => $this->consumer_key,
                'consumerSecret' => $this->consumer_secret,
                'username' => $user->screenName,
                'accessToken' => unserialize($user->token)
)); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-08-28T21:46:18.167

经过两天的研究，我终于发现要访问如此公开的推文，您只需要**任何**应用程序凭据，而不是特定用户的凭据。因此，如果您正在为客户开发，您不必要求他们做任何事情。

**要使用新的 Twitter API 1.1，您需要做两件事：**

*   [Dante Cullari](https://stackoverflow.com/a/17250736/288808)已经提到的Abraham[的 TwitterOAuth 库](https://github.com/abraham/twitteroauth/tree/master/twitteroauth)
*   [通过Twitter 开发者网站](https://dev.twitter.com/apps/new)创建的全新或已经运行的应用程序

**首先，您可以（实际上必须）使用自己的**凭据创建应用程序，然后从“**您的访问令牌**”部分获取*访问令牌*(OAUTH_TOKEN) 和*访问令牌机密(OAUTH_TOKEN_SECRET)。*然后在新 TwitterOAuth 对象的构造函数中提供它们。现在您可以访问**任何人**的公开推文。

 ****```
$connection = new TwitterOAuth( CONSUMER_KEY, CONSUMER_SECRET, OAUTH_TOKEN, OAUTH_TOKEN_SECRET );

$connection->host = "https://api.twitter.com/1.1/"; // change the default
$connection->ssl_verifypeer = TRUE;
$connection->content_type = 'application/x-www-form-urlencoded';

$tweets = $connection->get('http://api.twitter.com/1.1/statuses/user_timeline.json?screen_name='.$username.'&count='.$count); 
```

实际上，我认为这也是[Pavel](https://stackoverflow.com/a/16578726/288808)所建议的，但从他的回答中并不那么明显。

希望这两天能救别人:)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-06-12T09:47:26.800

这可能会帮助使用 Zend_Oauth_Client 的人使用 twitter api。这个工作配置：

```
$accessToken = new Zend_Oauth_Token_Access();
$accessToken->setToken('accessToken');
$accessToken->setTokenSecret('accessTokenSecret');

$client = $accessToken->getHttpClient(array(
    'requestScheme' => Zend_Oauth::REQUEST_SCHEME_HEADER,
    'version' => '1.0', // it was 1.1 and I got 215 error.
    'signatureMethod' => 'HMAC-SHA1',
    'consumerKey' => 'foo',
    'consumerSecret' => 'bar',
    'requestTokenUrl' => 'https://api.twitter.com/oauth/request_token',
    'authorizeUrl' => 'https://api.twitter.com/oauth/authorize',
    'accessTokenUrl' => 'https://api.twitter.com/oauth/access_token',
    'timeout' => 30
)); 
```

看起来 twitter api 1.0 允许 oauth 版本为 1.1 和 1.0，而 twitter api 1.1 只要求 oauth 版本为 1.0。

PS 我们不使用 Zend_Service_Twitter，因为它不允许在状态更新时发送自定义参数。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-10T08:13:36.143

Be sure that you have read AND write access for application in twitter

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-06-24T19:37:31.577

我正在使用[HybridAuth](http://hybridauth.sourceforge.net/)并且在连接到 Twitter 时遇到了这个错误。我将其追踪到（我）向 Twitter 发送错误大小写的请求类型（get/post 而不是 GET/POST）。

这将导致 215：

```
$call = '/search/tweets.json';
$call_type = 'get';
$call_args = array(
    'q'           => 'pancakes',
    'count'       => 5,
);
$response = $provider_api->api( $call, $call_type, $call_args ); 
```

这不会：

```
$call = '/search/tweets.json';
$call_type = 'GET';
$call_args = array(
    'q'           => 'pancakes',
    'count'       => 5,
);
$response = $provider_api->api( $call, $call_type, $call_args ); 
```

旁注：在 HybridAuth 的情况下，以下内容也不会（因为 HA 在内部为请求类型提供了正确大小写的值）：

```
$call = '/search/tweets.json';
$call_args = array(
    'q'           => 'pancakes',
    'count'       => 5,
);
$response = $providers['Twitter']->get( $call, $call_args ); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-02-23T05:52:45.860

这里首先每个人都需要使用**oauth2/token api，然后使用 follower/list api**。
否则，您将收到此错误。因为关注者/列表 api 需要身份验证。

在swift（对于移动应用程序）中，我也遇到了同样的问题。

如果你想知道 api 和它的参数，请点击这个链接，[快速获取 twitter 好友列表？](https://stackoverflow.com/questions/54807221/get-twitter-friends-list-in-swift/54838712#54838712)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-04-17T16:58:30.740

我一直面临同样的问题，我想出的唯一解决方案是输入`CONSUMER_KEY`并`CONSUMER_SECRET`直接输入新的 TwitterOAuth 类定义。

```
$connection = new TwitterOAuth(  "MY_CK" , "MY_CS"  ); 
```

不要对此使用变量或静态变量，看看问题是否已解决。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2014-03-01T12:31:08.853

我知道这很旧，但昨天我在使用 C# 和带有承载身份验证令牌的 HttpClient 类调用此 URL 时遇到了同样的问题：

[http://api.twitter.com/1.1/followers/ids.json?cursor=-1&screen_name=username](http://api.twitter.com/1.1/followers/ids.json?cursor=-1&screen_name=username)

事实证明，我的解决方案是使用 HTTPS 而不是 HTTP。所以我的 URL 看起来像这样：

**https://api.twitter.com/1.1/followers/ids.json?cursor=-1&screen_name=username** _

所以这是我的代码片段：

```
 using (var client = new HttpClient())
            {
                client.BaseAddress = new Uri("https://api.twitter.com/1.1/");
                client.DefaultRequestHeaders.Accept.Clear();
                client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
                client.DefaultRequestHeaders.Add("Authorization", "Bearer **** YOUR BEARER TOKEN GOES HERE ****");

                var response = client.GetAsync("statuses/user_timeline.json?count=10&screen_name=username").Result;
                if (!response.IsSuccessStatusCode)
                {
                    return result;
                }
                var items = response.Content.ReadAsAsync<IEnumerable<dynamic>>().Result;
                foreach (dynamic item in items)
                {
                    //Do the needful
                }
            } 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2015-12-03T03:16:13.493

试试这个 twitter [API explorer](https://dev.twitter.com/rest/tools/console)，你可以作为开发者登录并查询任何你想要的东西。****

# java - 如何使用外部 jar 文件为 java 制作 makefile？

> ID：12684771
> 
> 赞同：0
> 
> 时间：2012-10-02T04:59:12.493
> 
> 标签：java, jar, makefile

我有一个 java 项目，需要编写 makefile 让它在 Linux 上运行。我的项目包括外部jar文件和资源包（.txt资源）。我真的是Linux新手，只是学习如何编写makefile。

![我的项目结构](../Images/12d14a28230f62e653614362e39d1ed0.png)

我参考了一些材料并编写了这样的makefile：

```
# Set the file name of your jar package:
JAR_PKG = ADBproject1.jar

# Set your entry point of your java app:
ENTRY_POINT = adb/Bing_WebResults/Run.java

# Need resource directory
RES_DIR = yes

SOURCE_FILES = \
adb/jsonModels/Metadata.java \
adb/jsonModels/Result.java \
adb/jsonModels/Data.java \
adb/jsonModels/DataContainer.java \
adb/models/Weight_ID.java \
adb/models/Pair.java \
adb/models/Document.java \
adb/models/Collections.java \
adb/Bing_WebResults/Bing_Search.java\
adb/Bing_WebResults/Run.java \

JAVAC = javac
JFLAGS = -encoding UTF-8

vpath %.class bin
vpath %.java src

# show help message by default
Default:
    @echo "make new: new project, create src, bin, res dirs."
    @echo "make build: build project."
    @echo "make clean: clear classes generated."
    @echo "make rebuild: rebuild project."
    @echo "make run: run your app."
    @echo "make jar: package your project into a executable jar."

build: $(SOURCE_FILES:.java=.class)

# pattern rule
%.class: %.java
    $(JAVAC) -cp bin -d bin $(JFLAGS) $<

rebuild: clean build

.PHONY: new clean run jar

new:
ifeq ($(RES_DIR),yes)
    mkdir -pv src bin res
else
    mkdir -pv src bin
endif

clean:
    rm -frv bin/*

run:
    java -cp bin $(ENTRY_POINT)

jar:
ifeq ($(RES_DIR),yes)
    jar cvfe $(JAR_PKG) $(ENTRY_POINT)  -C bin . res
else
    jar cvfe $(JAR_PKG) $(ENTRY_POINT) -C bin .
endif 
```

但我不知道如何将这两个外部 .jar 文件（gson.jar、commons.jar）添加到 makefile 中。而且我不太确定我写的文件路径是否正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:03:07.890

`javac`有一个`-cp`and`-classpath`论点：

```
-classpath <path>          Specify where to find user class files and
                           annotation processors
-cp <path>                 Specify where to find user class files and
                           annotation processors 
```

就文档而言，它们似乎是等效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T23:19:42.303

我通过将所有 *.jar 文件添加到新文件夹“lib”来解决问题。然后 `javac -sourcepath src/ -classpath lib/*.jar` 将解决外部jar文件问题。

# .net - 在具有 .NET4 客户端配置文件的机器上安装 Gitextension

> ID：12684772
> 
> 赞同：0
> 
> 时间：2012-10-02T04:59:17.933
> 
> 标签：.net, git, installation, git-extensions, .net-client-profile

我想在我的新笔记本电脑上安装 GitExtensions。Microsoft 更新已在计算机上安装了 .NET Framework 客户端配置文件。但是 GitExtensions 安装程序抱怨说没有安装 .NET Framework。

这是一个类似于[.NET 3.5 问题](https://stackoverflow.com/questions/7431943/install-gitextensions-on-a-machine-with-net-4-0-only)的问题吗？如何避免在[Microsoft .NET Framework 4 客户端配置文件中](http://www.microsoft.com/en-us/download/details.aspx?id=24872)*额外安装*[Microsoft .NET Framework](http://www.microsoft.com/de-de/download/details.aspx?id=17718) 4 ？它们的大小相似，我想我不需要两者。

 ** * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T21:32:53.980

您的问题不一样，但如果您没有安装 .NET3.5 Full（不是客户端配置文件）以及 .NET4 Full，那么在解决此问题后您肯定也会遇到[该问题。](https://stackoverflow.com/q/7431943/1609364)

正如 Yan Sklyarenko 所[注意到](https://stackoverflow.com/a/7904634/1609364)的，安装程序配置要求特定版本的 .NET。对于最新分发：

```
<Condition Message='.NET Framework 4.0 must be installed prior to installation of Git Extensions.'>
      Installed OR NETFRAMEWORK40FULL
</Condition> 
```

而且您必须安装 .NET 3.5，因为 WiX 安装程序使用它。您应该再次使用完整分发，因为[客户端配置文件不包含](https://stackoverflow.com/a/2786831/1609364)WiX 所依赖的 MSBuild 组件：

```
Search "msbuild" (19 hits in 1 files):
  ...gitextensions-gitextensions-09f0e22\bin\Wix35.msi (19 hits) 
```

还有一些 GitExtensions 模块针对与 .NET3.5 一起分发的以前的 .NET 版本，而[.NET4 是单独分发的](https://stackoverflow.com/a/2803451/1609364)。

即使是 Yan 的作弊，也无法帮助您解决这种依赖关系。至少您可以使用 Web 安装程序（[4.0](http://www.microsoft.com/en-us/download/details.aspx?id=17851)、[3.5](http://www.microsoft.com/en-us/download/details.aspx?id=21)）节省一些流量，这些安装程序仅下载您还没有的模块。*

# authentication - Symfony2 在登录时设置用户角色

> ID：12684775
> 
> 赞同：1
> 
> 时间：2012-10-02T04:59:34.537
> 
> 标签：authentication, symfony, symfony-2.1

我想使用一个表单来登录普通用户和管理员，我在实体“isAdmin”上有一个标志。如果是管理员重定向到面板并设置 ROLE_ADMIN，如果不是重定向到站点并设置 ROLE_USER。

这是可能的，有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:01:21.267

这似乎完全没有意义。您应该在注册时设置用户的角色，而不是在登录时。

当用户登录时，您可以从数据库中检索其对象并获取角色属性来决定加载哪个视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T05:51:05.807

检查 fosuserbundle 的控制台命令，您可以使用 ROLE_ADMIN “提升”用户。每次登录时，他都会自动分配到该角色。

它不会在您的模型实体上使用“isAdmin”标志，更有可能使用 fosuserbundle 本身提供的机制（老实说，我自己并没有深入研究）。

您可能还想查看[https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/groups.md](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/groups.md)

# java - 小程序上传错误

> ID：12684778
> 
> 赞同：1
> 
> 时间：2012-10-02T04:59:46.580
> 
> 标签：java, php, forms, security, applet

我想将一些文件从客户端 pc 上传到我的网络服务器，我在 Java 小程序中使用以下代码我也成功签署了小程序，它提示信任小程序，请在此处查看代码，但它不上传文件

```
import java.applet.Applet;
import java.net.*;
import java.io.*;
import java.util.*;
public class UploaderExample extends Applet
{
private static final String Boundary = "--7d021a37605f0";

public void upload(URL url, List<File> files) throws Exception
{
    HttpURLConnection theUrlConnection = (HttpURLConnection) url.openConnection();
    theUrlConnection.setDoOutput(true);
    theUrlConnection.setDoInput(true);
    theUrlConnection.setUseCaches(false);
    theUrlConnection.setChunkedStreamingMode(1024);

    theUrlConnection.setRequestProperty("Content-Type", "multipart/form-data; boundary="
            + Boundary);

    DataOutputStream httpOut = new DataOutputStream(theUrlConnection.getOutputStream());

    for (int i = 0; i < files.size(); i++)
    {
        File f = files.get(i);
        String str = "--" + Boundary + "\r\n"
                   + "Content-Disposition: form-data;name=\"file" + i + "\"; filename=\"" + f.getName() + "\"\r\n"
                   + "Content-Type: image/png\r\n"
                   + "\r\n";

        httpOut.write(str.getBytes());

        FileInputStream uploadFileReader = new FileInputStream(f);
        int numBytesToRead = 1024;
        int availableBytesToRead;
        while ((availableBytesToRead = uploadFileReader.available()) > 0)
        {
            byte[] bufferBytesRead;
            bufferBytesRead = availableBytesToRead >= numBytesToRead ? new byte[numBytesToRead]
                    : new byte[availableBytesToRead];
            uploadFileReader.read(bufferBytesRead);
            httpOut.write(bufferBytesRead);
            httpOut.flush();
        }
        httpOut.write(("--" + Boundary + "--\r\n").getBytes());

    }

    httpOut.write(("--" + Boundary + "--\r\n").getBytes());

    httpOut.flush();
    httpOut.close();

    // read & parse the response
    InputStream is = theUrlConnection.getInputStream();
    StringBuilder response = new StringBuilder();
    byte[] respBuffer = new byte[4096];
    while (is.read(respBuffer) >= 0)
    {
        response.append(new String(respBuffer).trim());
    }
    is.close();
    System.out.println(response.toString());
}

public static void main(String[] args) throws Exception
 {
    List<File> list = new ArrayList<File>();
    list.add(new File("C:\\square.png"));
    list.add(new File("C:\\narrow.png"));
    UploaderExample uploader = new UploaderExample();
    uploader.upload(new URL("http://localhost/test2/upload.php"), list);
 }

} 
```

控制台输出是

```
security: User has granted the priviledges to the code for this session only
security: Adding certificate in Deployment session certificate store
security: Added certificate in Deployment session certificate store
security: Saving certificates in Deployment session certificate store
security: Saved certificates in Deployment session certificate store
security: Validate the certificate chain using CertPath API
security: The certificate hasnt been expired, no need to check timestamping info
security: Found jurisdiction list file
security: No need to checking trusted extension for this certificate
security: The CRL support is disabled
security: The OCSP support is disabled
security: This OCSP End Entity validation is disabled
security: Checking if certificate is in Deployment denied certificate store
security: Checking if certificate is in Deployment permanent certificate store
security: Checking if certificate is in Deployment session certificate store
basic: Plugin2ClassLoader.getPermissions CeilingPolicy allPerms
security: Validate the certificate chain using CertPath API
security: The certificate hasnt been expired, no need to check timestamping info
security: Found jurisdiction list file
security: No need to checking trusted extension for this certificate
security: The CRL support is disabled
security: The OCSP support is disabled
security: This OCSP End Entity validation is disabled
security: Checking if certificate is in Deployment denied certificate store
security: Checking if certificate is in Deployment permanent certificate store
security: Checking if certificate is in Deployment session certificate store
basic: Applet loaded.
basic: Applet resized and added to parent container
basic: PERF: AppletExecutionRunnable - applet.init() BEGIN ; jvmLaunch dt 121613 us,       pluginInit dt 29241825 us, TotalTime: 29363438 us
basic: Applet initialized
basic: Starting applet
basic: completed perf rollup
basic: Applet made visible
basic: Applet started
basic: Told clients applet is started 
```

# ios5 - 使用情节提要从 iOS 5 中的 ViewController 导航到 TabBarController

> ID：12684780
> 
> 赞同：0
> 
> 时间：2012-10-02T04:59:56.093
> 
> 标签：ios5, uiviewcontroller, uitabbarcontroller, uistoryboard, uistoryboardsegue

我开始使用 TabBarController 开发我的应用程序，但我最近意识到在访问应用程序之前验证用户的使用。所以我在 TabBarContoller（2 个标签和 2 个视图）之前创建了一个登录页面。但现在我无法将控制器从 ViewController 推送到 TabBarController。到目前为止，我尝试过的是：（用户点击登录页面上的提交按钮后）：

```
 UIStoryboard*  sb = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
   UIViewController* vc = [sb instantiateViewControllerWithIdentifier:@"twoOptions"];
   [self.navigationController pushViewController:vc animated:YES]; 
```

这里， twoOptions 是我在 Interface Builder 中为 StoryBoard 中的 TabBarController 命名的标识符

请指导我

我浏览了以下链接： [ViewController to TabBarController](https://stackoverflow.com/questions/8763475/storyboard-viewcontroller-to-tab-bar-controller?rq=1)但仍然不明白需要做什么。我无法推送视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:29:37.997

这是[示例的链接](http://ioscoderef.blogspot.in/2012/08/adding-uitabbarcontroller-in.html)。

```
UITabBarController *tabBarController=[[UITabBarController alloc]init];
tabBarController.viewControllers = [NSArray arrayWithObjects:firstViewController,secondViewController,thirdViewController, nil];
[self presentModalViewController:tabBarController animated:NO]; 
```

我不知道您为什么要使用故事板，但也可以使用代码轻松完成。

# webserver - 无法向 Varnish 缓存发出 PURGE 请求

> ID：12684784
> 
> 赞同：0
> 
> 时间：2012-10-02T05:00:30.947
> 
> 标签：webserver, varnish, webdev.webserver

我在运行多个 WordPress 站点的 nginx 前使用 Varnish 3。我正在使用许多大型 WordPress 网站推荐和使用的 default.vcl。

默认.vcl： http: [//pastebin.com/KaSdvuRS](http://pastebin.com/KaSdvuRS)

我正在使用 W3 Total Cache，它有一个选项可以在清除缓存时自动清除。我还测试了安装 Varnish HTTP Purge 插件以在编辑帖子/页面时清除它们。两者似乎都不起作用，所以我通过 ssh w/curl 测试了交互式会话。

我在 varnish/nginx 框上登录 SSH，然后键入以下命令来测试 varnish 清除：

curl -X PURGE [http://www.example.com](http://www.example.com)

结果是：

```
<head>
    <title>405 Not allowed.</title>
  </head>
  <body>
    <h1>Error 405 Not allowed.</h1>
    <p>Not allowed.</p>
    <h3>Guru Meditation:</h3>
    <p>XID: 265824636</p>
    <hr>
    <p>Varnish cache server</p>
  </body> 
```

有什么我想念的想法吗？这个 vcl 文件与 Varnish-Cache.org 为 WordPress 推荐的文件非常相似，并且是我看到的到处推荐的清除配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:33:04.917

很有可能，您正在通过公共 IP 连接到您的 Varnish 盒子，并且 Varnish 还将看到一个公共 IP 连接，而不是本地 IP。您的清除 ACL 现在只允许 localhost/127.0.0.1。您可能还想使用服务器的公共 IP 地址扩展该列表。

或者，尝试通过删除 ACL 检查并简单地允许从所有人中清除来进行调试，只是将 ACL 排除为有罪的 ACL。

# xml - 无法在 cakephp 中写入 xml 站点地图

> ID：12684795
> 
> 赞同：0
> 
> 时间：2012-10-02T05:02:00.663
> 
> 标签：xml, cakephp-1.3, sitemap

**更新**为了让一些人更清楚地了解正在发生的事情，我的页面没有显示文档树（这是我第一次看到这个）。只有一长行我的 xml 内容，没有任何 xml 元素/标签。

我按照[本教程](http://bakery.cakephp.org/articles/masterkeedu/2008/08/26/automatically-generate-dynamic-sitemaps)在 cakephp 中创建动态站点地图。本教程编写于 2008 年，我（继承）正在使用 cakephp 1.3 应用程序（我假设本教程对 1.3 有效？我查看了其他一些在 2009 年和 2010 年几乎使用相同代码的人。 ) 除了我的一个查询没有产生任何结果这一令人痛心的事实之外，当我导航到 mysite.com/sitemap.xml 时，我的输出是这样的：

```
http://www.site.com/ daily 1.0 http://www.site.com/gulf-coast-finest/3 2012-10-01T19:00:00Z weekly 0.9 http://www.site.com/gulf-coast-finest/4 2012-10-01T19:00:00Z weekly 0.9 
```

当我“查看源代码”时，我得到了正确格式化的 xml（除了我缺少关键数据），如下所示：

```
 <?xml version="1.0" encoding="UTF-8" ?><urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
<url> 
    <loc>http://www.site.com/</loc> 
    <changefreq>daily</changefreq> 
    <priority>1.0</priority> 
</url> 
 <!-- posts-->  

<url> 
    <loc>http://www.site.com/gulf-coast-finest/3</loc> 
    <lastmod>2012-10-01T19:00:00Z</lastmod> 
    <changefreq>weekly</changefreq>
    <priority>0.9</priority> 
</url>

<url> 
    <loc>http://www.site.com/gulf-coast-finest/4</loc> 
    <lastmod>2012-10-01T19:00:00Z</lastmod> 
    <changefreq>weekly</changefreq>
    <priority>0.9</priority> 
</url>
</urlset>  
.... 
```

我想知道为什么没有空格或 xml 标记，除非我查看源代码。这是我的路线文件中的相关代码：

```
Router::parseExtensions('xml'); 
Router::connect('/sitemap', array('controller' => 'sitemaps', 'action' => 'index')); 
```

我的 app/views/layouts/xml/default.ctp 文件：

```
<?php
header("content-type: text/xml");
echo $this->Xml->header();
echo $content_for_layout;
?> 
```

我的 app/views/sitemaps/xml/index.ctp 文件：

```
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
<url> 
    <loc><?php echo Router::url('/',true); ?></loc> 
    <changefreq>daily</changefreq> 
    <priority>1.0</priority> 
</url> 
 <!-- posts-->  
 <?php foreach ($static as $s):?> 
<url> 
    <loc><?php echo Router::url('/gulf-coast-finest/'.$s['Article']['Article.link_txt'].'/'.$s['Article']['id'],true); ?></loc> 
    <lastmod><?php echo $time->toAtom('2012-10-01 19:00:00'); ?></lastmod> 
    <changefreq>weekly</changefreq>
    <priority>0.9</priority> 
</url>
<?php endforeach; ?>
</urlset> 
```

和我明显完成的混乱控制器：

```
<?php 
class SitemapsController extends AppController{ 

var $name = 'Sitemaps'; 
var $uses = array('Category', 'Listing', 'Article', 'Location'); 
var $helpers = array('Time'); 
var $components = array('RequestHandler'); 
function beforeFilter() {
    //debug logs will destroy xml format, make sure were not in drbug mode 
Configure::write ('debug', 0); 

}
function index (){  
    $this->RequestHandler->respondAs('xml'); 
    $this->viewPath .= '/xml';
     $this->layoutPath = 'xml';
    $a=$this->Article->find('all', array('fields'=>array('Article.id', 'Article.link_txt')));
    $this->set('static', $a);

}
} 
?> 
```

非常重要的缺失数据问题可能适合另一个问题。XML 文件是一行并且没有人类可见的标签，这不是我可以接受的。我想知道它为什么这样做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T17:40:14.360

我有同样的问题，我想我已经找到了解决方案。我认为您的 HTML / XML 代码前面有空格

```
<-- space here--><?xml version="1.0" encoding="UTF-8" ?><urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"> 
```

如果 PHP 结束标记后有空格，您可以尝试在 sitemap_controller.php 中查找

```
?>__space here__ 
```

# html - 如何水平居中此警报？

> ID：12684803
> 
> 赞同：2
> 
> 时间：2012-10-02T05:02:47.343
> 
> 标签：html, css, twitter-bootstrap

当用户单击按钮但无法弄清楚如何水平居中警报时，我试图显示警报。我希望警报保持在#main 内。看到[这个小提琴。](http://jsfiddle.net/6epab/6/)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T05:28:07.160

确保 #main 具有`position`other than `static`，然后将以下规则分配给警报：

```
position: absolute;
left: 50%;
top: 50%;
margin-left: -width;
margin-top: -height; 
```

用正确的值替换`width`和。`height`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-17T23:37:41.073

由于@Darkwater提出的通过css的解决方案是正确的，前段时间我为jQuery创建了这个插件，它仍然使用CSS，这样它就可以在多个对象上快速重用。

为 jQuery 创建一个新方法，称为*`center`*：

```
$.fn.center = function() {
    this.css("position","absolute").css("z-index","5000")
    .css("top","50%").css("left","50%")
    .css("margin",(-(this.height()/2))+"px 0 0 "+(-(this.width()/2))+"px"); 
    return this;
}; 
```

然后将其绑定到您的对象（`div#message`在本例中为您的警报），紧随其后`.show()`：

```
$("#message").show().center(); 
```

并且`div`将垂直和水平居中。

编辑：记住在使元素可见的`center()`方法或类似方法之后绑定方法`show()`，因为据我所知，jQuery 无法正确处理隐藏的元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T05:14:32.767

您的标记和 CSS 定位实际上是错误的，而不是使用`position: fixed;`use `position: relative;`for`#main`和`position: absolute;`for`#message`并将您的消息`div`移入`#main div`

而关于计算部分，当你想居中 a 时`div`，你必须放弃`top: value (-)minus height`将`div`其垂直居中..

[我的小提琴](http://jsfiddle.net/6epab/9/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-02T05:21:02.117

```
#message{
  display: none;
  position: relative;
  top: 50%;
  text-align: center;
} 
```

# php - 如何在mysql中按升序计算值？

> ID：12684804
> 
> 赞同：0
> 
> 时间：2012-10-02T05:02:50.883
> 
> 标签：php, mysql, select-query

我希望这种类型的输出以这种格式从数据库中获取 task_name

```
Task 10 Task 2 Task 3 Task 5........ 
```

我的查询是

```
 SELECT task_name, section_name, ref_student_id
 FROM scores
 WHERE ref_student_id = '".$studentid."'
    AND section_name = 'sm1'
 GROUP BY task_name 
```

所以我想这样输出..

```
 Task 2 Task 3 Task 5 Task 10........ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:12:22.820

用这个

```
"SELECT task_name, section_name, ref_student_id
 FROM scores
WHERE ref_student_id = '1'
AND section_name = 'sm1'
GROUP BY task_name
ORDER BY cast( SUBSTRING( task_name, 5 ) AS unsigned ) ASC" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T05:04:55.980

用这个

```
SELECT task_name, section_name, ref_student_id
FROM scores
WHERE ref_student_id = '".$studentid."'
AND section_name = 'sm1'
ORDER BY ltrim(task_name) ASC          //order by should come for ordering....
GROUP BY task_name 
```

代替

```
SELECT task_name, section_name, ref_student_id
FROM scores
WHERE ref_student_id = '".$studentid."'
AND section_name = 'sm1'
GROUP BY task_name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T05:05:09.027

```
"select task_name,section_name,ref_student_id from scores where ref_student_id = '".$studentid."' and section_name = 'sm1' GROUP BY task_name order by task_name ASC " 
```

按升序排列

# count - 查找表集位计数算法的提示

> ID：12684805
> 
> 赞同：5
> 
> 时间：2012-10-02T05:03:03.473
> 
> 标签：count, binary, numbers, operations, representation

我正在寻找设置位计数问题的解决方案（给定一个二进制数，如何有效地计算设置了多少位）。

在这里，[http](http://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetNaive) ://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetNaive ，我找到了一些方法。

查找表方法呢？我不明白二进制表示/数字的哪些属性使它起作用。

```
static const unsigned char BitsSetTable256[256] = 
{
#   define B2(n) n,     n+1,     n+1,     n+2
#   define B4(n) B2(n), B2(n+1), B2(n+1), B2(n+2)
#   define B6(n) B4(n), B4(n+1), B4(n+1), B4(n+2)
   B6(0), B6(1), B6(1), B6(2)
};

unsigned int v; // count the number of bits set in 32-bit value v
unsigned int c; // c is the total bits set in v

// Option 1:
c = BitsSetTable256[v & 0xff] + 
   BitsSetTable256[(v >> 8) & 0xff] + 
   BitsSetTable256[(v >> 16) & 0xff] + 
   BitsSetTable256[v >> 24]; 

// Option 2:
unsigned char * p = (unsigned char *) &v;
c = BitsSetTable256[p[0]] + 
    BitsSetTable256[p[1]] + 
    BitsSetTable256[p[2]] + 
    BitsSetTable256[p[3]];

// To initially generate the table algorithmically:
BitsSetTable256[0] = 0;
for (int i = 0; i < 256; i++)
{
   BitsSetTable256[i] = (i & 1) + BitsSetTable256[i / 2];
} 
```

特别是，我一开始不明白这个`BitsSetTable256`定义。为什么要定义这些量 B2、B4、...？在我看来，它们之后没有使用。

您能否提示有关二进制表示的进一步文档？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T05:06:55.110

定义是通过模式形成表格。它们是递归宏，B6 使用 B4，B4 使用 B2。B6(0) 将分解为：

```
B4(0), B4(1), B4(1), B4(2) 
```

B4(0) 将分解为：

```
0, 1, 1, 2 
```

该序列的前几个数字将是：

```
// 0, 1, 2, 3, 4, 5, 6, 7, 8, 9,10,11
   0, 1, 1, 2, 1, 2, 2, 3, 1, 2, 2, 3 
```

如您所见，这些是为表中每个索引设置的位数。

算法的其余部分是将数字分解为 8 位块并将每个块中设置的位数相加，这就是这些行的含义（您可以根据自己的喜好使用选项 1 或选项 2，而不是两者） ：

```
// Option 1:
c = BitsSetTable256[v & 0xff] + 
    BitsSetTable256[(v >> 8) & 0xff] + 
    BitsSetTable256[(v >> 16) & 0xff] + 
    BitsSetTable256[v >> 24]; 

// Option 2:
unsigned char * p = (unsigned char *) &v;
c = BitsSetTable256[p[0]] + 
    BitsSetTable256[p[1]] + 
    BitsSetTable256[p[2]] + 
    BitsSetTable256[p[3]]; 
```

底部的代码：

```
// To initially generate the table algorithmically:
BitsSetTable256[0] = 0;
for (int i = 0; i < 256; i++)
{
   BitsSetTable256[i] = (i & 1) + BitsSetTable256[i / 2];
} 
```

是生成 BitsSetTable256 的另一种方式。它在运行时而不是在编译时生成表（这是宏定义所做的。

PS 如果您的目标是足够近的 (SSE4) x86，您可以使用 POPCNT 指令。

# java - Jackson Parser：忽略类型不匹配的反序列化

> ID：12684808
> 
> 赞同：5
> 
> 时间：2012-10-02T05:03:55.543
> 
> 标签：java, android, json, cakephp, jackson

我得到以下从服务器生成的响应`cakephp`

```
 [
 {
  "id": "42389",
  "start": "0000-00-00",
  "end": "0000-00-00",
  "event_id": null,
  "trip_id": "5791",
  "location_id": "231552",
  "user_id": "105",
  "users_attending": "0",
  "user_local": "0",
  "Trip": {
   "name": "Asdas"
  },
  "Event": [],
  "Location": {
   "name": "South Melbourne"
  }
 },
 {
  "id": "42392",
  "start": "0000-00-00",
  "end": "0000-00-00",
  "event_id": "1218",
  "trip_id": "4772",
  "location_id": "271505",
  "user_id": "105",
  "users_attending": "3",
  "user_local": "50",
  "Trip": {
   "name": "trip by 1059200"
  },
  "Event": {
   "title": "SampleEvent 454",
   "id": "1218"
  },
  "Location": {
   "name": "Houston"
  }
 },
 .......
 ] 
```

问题是解析器需要`Event`对象，但如果是，`null`那么它正在接收空数组。

由于响应是由 自动生成的`cakephp`，因此必须在服务器端的很多地方进行更改。

`Event`如果它是一个空数组，杰克逊是否有任何简单的方法来忽略属性？

编辑：

我尝试过拥有两个带有`Event`名称的属性：一个数组和另一个对象，但这也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T18:52:52.347

因为，我不得不为许多对象处理这样的响应，所以我最终继续创建一个通用类，该类将为`Deserializer`特定的`class`.

这是我用的

```
public class Deserializer<T> {

  public JsonDeserializer<T> getDeserializer(final Class<T> cls) {
      return new JsonDeserializer<T> (){

         @Override
         public T deserialize(JsonParser jp, DeserializationContext arg1) throws IOException, JsonProcessingException {
            JsonNode node = jp.readValueAsTree();
            if (node.isObject()) {
              return new ObjectMapper().convertValue(node, cls);
            }
            return null;
         }
     };
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:21:05.003

如果类型不兼容，我认为将其分开是有意义的。

另一种选择是使用常见的超类型，这意味着`java.lang.Object`，您将获得`List`（对于 JSON 数组）或`Map`（对于 JSON 对象）。但是需要进行后处理才能绑定到具体类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-15T08:55:10.320

我发现这个问题最简单的解决方案是添加以下功能：

```
DeserializationFeature.ACCEPT_EMPTY_ARRAY_AS_NULL_OBJECT, true 
```

到我的对象映射器。杰克逊会为您完成其余的工作。请参阅[https://fasterxml.github.io/jackson-databind/javadoc/2.6/com/fasterxml/jackson/databind/DeserializationFeature.html](https://fasterxml.github.io/jackson-databind/javadoc/2.6/com/fasterxml/jackson/databind/DeserializationFeature.html)。

这个答案给出了深入的解释：[https ://stackoverflow.com/a/22956168/9279756](https://stackoverflow.com/a/22956168/9279756)

# android - 你能帮我为什么我得到这个例外吗？请在下面查看我的 logcat

> ID：12684810
> 
> 赞同：0
> 
> 时间：2012-10-02T05:04:30.773
> 
> 标签：android, arraylist

这是我的数据库管理器类

```
public class MyDbManager {

private String DB_NAME="MyDb";
private String TABLE="TableReg";
private int DB_VERSION=1;
//private String ID="id";
private String Fname="Fname";
private String Lname="Lname";
private String Email="Email";
private String Password="Password";
private String Language="Languages";
private String Gender ="gender"; 
private String Id="id";

private SQLiteDatabase sdb;
Context context;
public MyDbManager(Context context) {
    // TODO Auto-generated constructor stub
    this.context=context;
    CustomSQLiteOpenHelper helper= new CustomSQLiteOpenHelper(context);
    this.sdb=helper.getWritableDatabase();      
}

public void insertValues(String fn,String ln, String em, String pwd)
{
    ContentValues values=new ContentValues();
    values.put(Fname, fn);
    values.put(Lname, ln);
    values.put(Email, em);
    values.put(Password, pwd); 
```

// values.put(Language, lang); // values.put(Gender, gen);

```
 sdb.insert(TABLE, null, values);
}

public ArrayList<Object> getRow(String email)
{
    // create an array list to store data from the database row.
    // I would recommend creating a JavaBean compliant object 
    // to store this data instead.  That way you can ensure
    // data types are correct.
    ArrayList<Object> rowArray = new ArrayList<Object>();
    Cursor cursor;

    try
    {

        cursor = sdb.query
        (
                TABLE,
                new String[]{Id,Fname,Lname,Email,Password},
                Email + "=" + email,
                null, null, null, null, null
        );

        // move the pointer to position zero in the cursor.
        cursor.moveToFirst();

        // if there is data available after the cursor's pointer, add
        // it to the ArrayList that will be returned by the method.
        if (!cursor.isAfterLast())
        {
            do
            {
                rowArray.add(cursor.getLong(0));
                rowArray.add(cursor.getString(1));
                rowArray.add(cursor.getString(2));
                rowArray.add(cursor.getString(3));
                rowArray.add(cursor.getString(4));

            }
            while (cursor.moveToNext());
        }

        // let java know that you are through with the cursor.
        cursor.close();
    }
    catch (SQLException e) 
    {
        Log.e("DB ERROR", e.toString());
        e.printStackTrace();
    }

    // return the ArrayList containing the given row from the database.
    return rowArray;
}
private class CustomSQLiteOpenHelper extends SQLiteOpenHelper
{
    public CustomSQLiteOpenHelper(Context context)
    {
        super(context,DB_NAME,null,DB_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db)
    {

        String newTableQueryString = " create table " + 
                                      TABLE + 
                                      " (" +
                                       Id + " integer primary key autoincrement not null," +
                                      Fname + " text," + 
                                      Lname + " text," + 
                                      Email + " text," + 
                                      Password + " text" +
                                      ");";

        db.execSQL(newTableQueryString);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
    {
        //
    }
} 
```

}

我试图检索该行的活动：

```
public class Login extends Activity {

MyDbManager dbm;
EditText ed_em,ed_ps;
Button btn_sgn_in;
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);
    dbm=new MyDbManager(this);
    setupviews();
    btn_sgn_in.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            retrieveRow();
        }
    });

}

public void retrieveRow()
{
    String Email=ed_em.getText().toString();
    ArrayList<Object> row;
    row=dbm.getRow(Email);
    String r1=(String)row.get(3);
    Toast.makeText(getBaseContext(), r1, Toast.LENGTH_LONG).show();

}
public void setupviews()
{
    ed_em=(EditText)findViewById(R.id.ed_email_ver);
    ed_ps=(EditText)findViewById(R.id.ed_pass_ver);
    btn_sgn_in=(Button)findViewById(R.id.btn_sgn_in);
} 
```

}

我试图从数据库中检索一行，但出现错误。请帮助我。我是安卓新手。![在此处输入图像描述](../Images/7d1732653759cb2859d530a965e17853.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:08:45.143

它说您正在调用`ArrayList`(index=3) 的第三个元素，但您的大小`ArrayList`为 0，因此您超出范围，您可能需要确保已在其中添加数据`ArrayList`以避免此类异常或者在你做任何你的功能之前检查是否`ArrayList`不为空。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T05:13:04.597

If条件下先检查arraylist的大小

```
if(arraylist.size()>3)
{
     //use arraylist here
} 
```

并将您在 dbhelper 中的方法更改为

```
public ArrayList<Object> getRow(String email)
{
    // create an array list to store data from the database row.
    // I would recommend creating a JavaBean compliant object 
    // to store this data instead.  That way you can ensure
    // data types are correct.
    ArrayList<Object> rowArray = new ArrayList<Object>();
    Cursor cursor;

    try
    {
        Cursor cursor = this.db.query(TABLE, new String[] { "Id,Fname,Lname,Email,Password" },
                "Email =  \"" + email +"\" " , null, null, null,null);

        if (cursor.moveToFirst()) {
             do {
                    rowArray.add(cursor.getLong(0));
                    rowArray.add(cursor.getString(1));
                    rowArray.add(cursor.getString(2));
                    rowArray.add(cursor.getString(3));
                    rowArray.add(cursor.getString(4));              

               } while (cursor.moveToNext());
          }
          if (cursor != null && !cursor.isClosed()) {
             cursor.close();
          }
    }
    catch (SQLException e) 
    {
        Log.e("DB ERROR", e.toString());
        e.printStackTrace();
    }

    // return the ArrayList containing the given row from the database.
    return rowArray;
} 
```

# php - jquery显示来自数据库的2系列hightchart

> ID：12684815
> 
> 赞同：0
> 
> 时间：2012-10-02T05:04:57.967
> 
> 标签：php, jquery, json, charts, highcharts

任何人请帮助我，

我有 sp.php

```
<script type="text/javascript" src="js/jquery-1.7.1.min.js" ></script>
<script type="text/javascript" src="js/highcharts.js" ></script>
<script type="text/javascript" src="js/themes/dark-green.js"></script>

<script type="text/javascript">
    var chart;
            $(document).ready(function() {
                var options = {
                    chart: {
                        renderTo: 'container',
                        defaultSeriesType: 'spline',
                        marginRight: 130,
                        marginBottom: 40
                    },
                    title: {
                        text: 'Grafik jumlah SUM SUK',
                        x: -20 //center
                    },
                    subtitle: {
                        text: 'per Hari',
                        x: -20
                    },
                    xAxis: {
                       title: {
                  text: 'tanggal '
                  //color:'#808080'
             },
                        type: 'datetime',
                        tickInterval: 172800 * 1000, // two days
                        tickWidth: 0,
                        gridLineWidth: 1,
                        labels: {
                            align: 'center',
                            x: -3,
                            y: 20,
                            formatter: function() {
                                return Highcharts.dateFormat('%e', this.value);
                            }
                        }
                    },
                    yAxis: {
                        title: {
                            text: 'Rupiah'
                        },
                        tickInterval: 5000000,
                        plotLines: [{
                            value: 0,
                            width: 1,
                            color: '#808080'
                        }]
                    },
                tooltip: {
                        formatter: function() {
                                return  Highcharts.dateFormat('%e %b', this.x) +': <b>'+ 'Rp' + this.y + '</b>';

                        }
                    },

                      plotOptions: {
                line: {
                    dataLabels: {
                        enabled: true
                    },
                    enableMouseTracking: false
                }
            },
            /*      tooltip: {
            valueDecimals: 2,
            valuePrefix: 'Rp',
            valueSuffix: ' ID'
        }, */

                    legend: {
                        layout: 'vertical',
                        align: 'right',
                        verticalAlign: 'top',
                        x: -10,
                        y: 300,
                        borderWidth: 2
                    },
                    series: [{
                        name: 'Saldo'
                    }]
                }
                // Load data asynchronously using jQuery. On success, add the data
                // to the options and initiate the chart.
                // This data is obtained by exporting a GA custom report to TSV.
                // http://api.jquery.com/jQuery.get/
                jQuery.get('datasp.php', null, function(tsv) {
                    var line = [];
                    traffic = [];
                    traffic1 = [];

                    try {
                        // split the data return into lines and parse them
                        tsv = tsv.split(/\n/g);
                        jQuery.each(tsv, function(i, line) {
                            line = line.split(/\t/);
                            date = Date.parse(line[0] +' UTC');
                                traffic.push([
                                date,
                                parseInt(line[1].replace(',', ''), 10),
                                parseInt(line[2].replace(',', ''), 10),
                            ]);
                        });
                    } catch (e) {  }
                     options.series[0].data = traffic;
                    // chart.addSeries(series);
                    // options.series[0].data = traffic;
                    chart = new Highcharts.Chart(options);
                });
            });
</script>
</head>
<body>

<div id="container" style="width: 100%; height: 400px; margin: 0 auto"></div>

</body> 
```

然后 datasp.php 从 ms sql 获取数据

```
$result = mssql_query("select tanggal, sum(kredit) umasuk,sum(debet) ukluar   from tbl_transaksi
where year(tanggal)=2012 and month(tanggal)=09 and kd_subperkiraan='150'
group by tanggal ");

//while($row = mssql_fetch_array($result)) {
//  echo $row['tgl_masuk'] . "\t" . $row['jumlah']. "\n";
//}

while($row = mssql_fetch_array($result)) {
$uts=strtotime($row[tanggal]);   //convertir a Unix Timestamp
$date=date("l, F j,Y  H:i:s",$uts);
//echo $valor3 . "\t" . $row[$valor2]. "\n";
//echo $date . "\t" . $row[umasuk]. "\n";
echo $date . "\t" . $row[ukluar] . "\t" . $row[umasuk]. "\n";

} 

mssql_close($con); 
```

datasp.php 上的查询结果示例如下：

```
Monday, September 3,2012 00:00:00   28425000    7149000
Wednesday, September 5,2012 00:00:00    22100000    5519000 
```

现在我想在 highchart 上显示**28425000**和**7149000**的 2 个系列值，但在我的图表中只显示 28425000 值（所有 line[1]），但 line[2] 不显示。所以我的图表上只显示了 1 条线，任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:24:04.603

看来您需要制作两个数组。

1) 第 1 行的第一个数组并传递给系列 0

2) 第 2 行的第二个数组并传递到第 1 行

尝试如下更改您的代码

```
 traffic = [];
            traffic1 = [];

            try {
                // split the data return into lines and parse them
                tsv = tsv.split(/\n/g);
                jQuery.each(tsv, function(i, line) {
                    line = line.split(/\t/);
                    date = Date.parse(line[0] +' UTC');
                        traffic.push([
                        date,
                        parseInt(line[1].replace(',', ''), 10),
                    ]);

                    traffic1.push([
                        date,
                        parseInt(line[2].replace(',', ''), 10),
                    ]);
                });
            } catch (e) {  }

            options.series[0].data = traffic;
            options.series[1].data = traffic1; 
```

您还需要将您的系列名称更改为选项

```
series: [{
                        name: 'Saldo'
                    },{
                        name: 'Saldo1'
                    }] 
```

来自此链接的参考：

[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/spline-irregular-time/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/spline-irregular-time/)

# java - 用于 mongodb 的 javadoc

> ID：12684816
> 
> 赞同：4
> 
> 时间：2012-10-02T05:05:07.197
> 
> 标签：java, mongodb, javadoc

有谁知道以下地址是否有 Java MongoDB 库的 javadoc？

[http://www.mongodb.org/display/DOCS/Java+Tutorial](http://www.mongodb.org/display/DOCS/Java+Tutorial)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:55:28.747

javadocs 可[在此处](http://mongodb.github.io/mongo-java-driver)获得。

**更新**：要离线查看 javadocs，您可以生成一个。
前往[https://github.com/mongodb/mongo-java-driver](https://github.com/mongodb/mongo-java-driver)并获取源代码。
调用`mvn javadoc:javadoc`以在本地生成 javadocs。

您可能还想看看

*   [春季数据 MongoDB](http://www.springsource.org/spring-data/mongodb)
*   [吗啡](http://code.google.com/p/morphia/)

# maven - 禁用 maven-remote-resources-plugin 的资源过滤

> ID：12684820
> 
> 赞同：1
> 
> 时间：2012-10-02T05:05:18.217
> 
> 标签：maven, filtering, maven-resources-plugin

我正在尝试使用 maven-remote-resources-plugin 在多模块 maven 项目中跨模块共享许多资源。不幸的是，共享的二进制资源在捆绑过程中被破坏了，大概是通过过滤。

我相信这个阶段正在发生损坏，因为从我的本地存储库中提取共享资源 jar 包含损坏的二进制文件。

有什么可以关闭 maven-remote-resources-plugin 的过滤吗？

目前我的共享资源模块中的 pom 看起来像

```
<build>
  <plugins>
    <plugin>
       <artifactId>maven-remote-resources-plugin</artifactId>
       <executions>
         <execution>
           <goals>
             <goal>bundle</goal>
           </goals>
         </execution>
       </executions>
       <configuration>
         <includes>
           <include>**/*</include>
         </includes>
       </configuration>
     </plugin>
  </plugins>
</build>

<dependencies>
  <dependency>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-remote-resources-plugin</artifactId>
    <version>1.3</version>
  </dependency>
</dependencies> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T13:44:40.550

听起来资源在捆绑过程中被破坏了。由于资源项目只是一个 jar，它`resources`作为默认生命周期的一部分执行插件。尝试将此添加到资源项目的 POM。

```
<plugin>
    <artifactId>maven-resources-plugin</artifactId>
    <version>2.6</version>
    <executions>
      <execution>
        <id>default-resources</id>
        <configuration>
          <nonFilteredFileExtensions>
            <nonFilteredFileExtension>exe</nonFilteredFileExtension>
            <nonFilteredFileExtension>dontFilterMeEither</nonFilteredFileExtension>
          </nonFilteredFileExtensions>
          [...]
        </configuration>
      </execution>
    </executions>
  </plugin> 
```

[文档](http://maven.apache.org/plugins/maven-resources-plugin/resources-mojo.html#nonFilteredFileExtensions)描述了默认情况下哪些二进制文件未被过滤；上面的配置将扩展名添加到列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:44:09.963

你试过了吗 ：

```
<plugin>
        <artifactId>maven-remote-resources-plugin</artifactId>
        <version>1.3</version>
        <executions>
          <execution>
            <id>process-remote-resources</id>
            <goals>
              <goal>process</goal>
            </goals>
            <configuration>
              <useDefaultFilterDelimiters>false</useDefaultFilterDelimiters>
              [...]
            </configuration>
          </execution>
        </executions>
      </plugin> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T00:40:13.570

我们为解决这个问题而采取的方法如下。
请注意，我误解了 user944849 的答案，所以我没有对其进行测试，它可能会起作用。

我们使用共享资源 pom 中的资源子句直接在本地存储库中创建了 jar。我认为这是使用 maven-resources-plugin (?)。

然后使用maven-dependency-plugin解压到一个临时目录，在resource-consumer pom的resources子句中过滤出想要的资源。

共享资源

```
<build>
  <resources>
    <resource>
      <directory>src/main/resources</directory>
      <filtering>false</filtering>
      <includes>
        <include>**/*</include>
      </includes>
    </resource>
  </resources>
</build> 
```

资源消费者

```
<build>
  <resources>
    <resource>
      <directory>${project.build.directory}/shared-resources</directory>
      <includes>
        <include>theOnlyOneIWant.properties</include>
      </includes>
    </resource>
  </resources>
  [...]
  <plugins>
    <plugin>
      <artifactId>maven-dependency-plugin</artifactId>
      <version>2.5</version>
      <executions>
        <execution>
          <id>shared-resources</id>
          <goals>
            <goal>unpack-dependencies</goal>
          </goal>
          <phase>generate-resources</phase>
          <configuration>
            <includeGroupIds>myProjectGroup</includeGroupIds>
            <includeArtifactIds>myProjectSharedResources</includeArtifactIds>
            <outputDirectory>${project.build.directory}/shared-resources</outputDirectory>
          </configuration>
        </execution>
      </executions>
    </plugin>
  </plugins>
</build> 
```

这可能不适用于可以使用 maven-remote-resources-plugin 的所有实例，但它对我们有用并解决了二进制资源损坏的问题。

# macros - 如何在 Clojurescript 的宏中共享原子？

> ID：12684822
> 
> 赞同：3
> 
> 时间：2012-10-02T05:05:24.550
> 
> 标签：macros, clojure, clojurescript

我在 clj (clojure) 命名空间中有以下代码。

（ns project.clojure.clojurescript 宏）

```
(def trace-history (atom []))

; hmm, you could run out of memory on recursive functions here?
; Fortunately functions aren't actually recursive in clojure. :]
(defmacro push-args [name args]
  `(swap! trace-history
     (fn [stack#]
       (conj stack# [~name (zipmap ~(vec (map str args)) ~args)]))))

(push-args :hello [:a :b :c]) 
```

在另一个 cljs (clojurescript) 命名空间中，我有以下内容

```
(ns project.clojurescript.user   
  (:require-macros [project.clojure.clojurescript-macros :as c]))

(c/push-args :hello [:a :b :c]) 
```

我编译了我的 clojurescript 代码，并在我的浏览器中打开它，不幸的是，我收到以下错误。

```
Uncaught TypeError: Cannot read property 'trace_history' of undefined main.js:22348
(anonymous function)                                                  main.js:22348 
```

查看我编译的 clojurescipt 代码中的第 22348 行，我看到以下内容。

```
cljs.core.swap_BANG_.call(null, project.clojure.trace_history, function(stack__6402__auto__) {
  return cljs.core.conj.call(null, stack__6402__auto__, 
    cljs.core.PersistentVector.fromArray(["\ufdd0'hello", 
      cljs.core.zipmap.call(null, 
        cljs.core.PersistentVector.fromArray([":a", ":b", ":c"], true),          
        cljs.core.PersistentVector.fromArray(["\ufdd0'a", "\ufdd0'b", "\ufdd0'c"], 
      true))], 
    true))
  }); 
```

问题是 project.clojure.trace_history 没有在 main.js 的任何地方定义。我知道出了什么问题，但我不确定如何解决它。我尝试了其他解决方案，例如将跟踪历史记录放在共享的 clojure 文件中，并将跟踪历史记录放在 cljs 文件本身中。似乎没有一个工作。鉴于我想在这个宏的所有编译之间有一个共享的全局原子，我如何在 Clojurescript 中这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T15:43:45.873

原子是运行时数据，宏是编译时构造。宏拥有“共享全局原子”并没有真正的意义——你的宏所做的就是编译成代码，它只是*期望*`trace-history`在当前的 NS 中调用一个符号。

如果您只是想编写可以*使用*原子的通用代码，那么您应该编写它以便可以将原子作为参数，而不是通过硬编码的符号名称假设它的存在。

如果您的意思是希望在 Clojure+ClojureScript 应用程序的客户端和服务器上都可以使用相同的原子值，则需要编写自己的代码来通过 Ajax 调用来协调值……这不是内置的在语言中。

# c++ - Boost Serializer：除非使用虚拟类析构函数，否则会收到警告 C4308

> ID：12684829
> 
> 赞同：3
> 
> 时间：2012-10-02T05:06:29.787
> 
> 标签：c++, serialization, boost

我正在开发一个项目，该项目有 2 个需要序列化的类（与我的问题相关）。有一段时间，其中一个类编译得很好，另一个类编译时出现以下警告：

```
...\boost\mpl\print.hpp(51): warning C4308: negative integral constant converted to unsigned type 
```

对于他们两个，我使用 Boost 类导出器来注册类，所以稍后我可以安全地序列化指向它们实例的基类指针，如下所示：

```
BOOST_CLASS_EXPORT_GUID(ClassName, "ClassName") 
```

所以我慢慢消除了两个类之间的差异，发现警告的来源是：安静编译的类有一个虚拟析构函数，因为我打算让其他类继承它可能需要自己的析构函数。

现在，我也只是给了另一个类一个虚拟析构函数，但是由于我不打算从它继承，这看起来很奇怪。

我的问题是：为什么给类一个虚拟析构函数“修复”这个警告，这个警告的真正含义是什么？BOOST_CLASS_EXPORT_GUID 宏的某些部分是否创建了一个从我的类或其他东西继承的类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T05:23:31.830

我刚刚发布了这个问题，但我想我可能已经意识到至少部分解决方案。

BOOST_CLASS_EXPORT_GUID 宏旨在“注册”一个将从基类继承的类，以防需要序列化包含指向子类实例的基类指针的结构，以便序列化程序可以区分像这样的指针

```
BaseClass* base;// = new BaseClass()
BaseClass* derived;// = new DerivedClass() 
```

为了多态性，没有显式地转换它们。

如果要继承一个类，（我认为）给它一个虚拟析构函数是最安全的，这样派生类就可以自己清理。

但是：我不打算从编译时遇到问题的类继承，因此使用 BOOST_CLASS_EXPORT_GUID 导出它是没有意义的。所以我收到了错误做法的警告——你不应该导出以后不会继承的类。

# qt - 在 QTableView 中与编辑器小部件的数据交互

> ID：12684830
> 
> 赞同：1
> 
> 时间：2012-10-02T05:06:37.700
> 
> 标签：qt, qt4, qwidget, qtableview, qtgui

我正在使用可编辑的 QTableView + QStandardItemModel。

在表格视图中编辑单元格时，我想在将新数据提交到表格视图时**根据此特定单元格中的新输入数据做一些事情。**

为此，我需要新的输入数据和当前模型索引（或列和行号）。我尝试了一些插槽，例如

> virtual void closeEditor（QWidget * 编辑器，QAbstractItemDelegate::EndEditHint 提示）

和

> 虚拟 void commitData ( QWidget * editor )。

commitData 似乎是我需要的，但是，参数只是编辑器，我不知道如何在这个编辑器小部件中获取文本。我查看了 QTextEdit，但它不是 QWidget 的继承类。

我想知道是否有任何方法可以获取编辑器小部件的数据（文本）和轴（列、行）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:13:11.493

我建议实现您自己的项目委托，继承`QStandardItemDelegate`（或`QAbstractItemDelegate`）。在那里你可以覆盖

```
void setModelData ( QWidget * editor, QAbstractItemModel * model, const QModelIndex & index ) const 
```

只需进行自定义处理，然后调用`QStandardItemDelegate::setModelData(...)`以确保使用新编辑的数据更新您的模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T06:54:39.013

每当项目的数据发生变化时，[`itemChanged(QStandardItem*)`](http://qt-project.org/doc/qt-4.8/qstandarditemmodel.html#itemChanged)信号就会由 a 发出。`QStandardItemModel`

从给定的`QStandardItem`，您可以直接检索行和列。要获取显示的文本，请传递`Qt::DisplayRole`给项目的`data()`方法。

# ajax - 我应该在服务器端还是客户端做 API 请求？

> ID：12684835
> 
> 赞同：15
> 
> 时间：2012-10-02T05:07:23.903
> 
> 标签：ajax, api, node.js, coffeescript, express

我正在尝试使用 ExpressJS 和 Coffeescript 制作一个从 Amazon、LastFM 和 Bing 的 Web API 中提取数据的 Web 应用程序。
用户可以请求数据，例如来自特定乐队的特定专辑的价格、即将举行的音乐会时间和乐队的位置等等......类似的东西。

我的问题是：我应该在客户端使用这些 API 调用`jQuery`，`getJSON`还是应该在服务器端调用它们？我已经完成了客​​户端请求；我什至如何从服务器端进行 API 调用？
我只想知道最佳实践是什么，如果有人能指出我提出服务器端 API 请求的正确方向，那将非常有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T06:30:38.470

这个问题有两个关键考虑因素：

1.  通话会导致任何数据访问吗？结果会直接写到屏幕上吗？
2.  您计划如何以及在哪里处理错误？你如何处理节流？

第 2 项在这里非常重要，因为由于各种原因，Web 服务一直处于关闭状态。您对 Bing、Amazon 和 Last FM 的呼叫可能会失败 1% 或 0.1% 的时间（*根据我在这里的经验*）。

要向用户请求服务器端 JS，您可能需要查看`Request` [NPM 上的包](https://npmjs.org/package/request)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T05:32:54.260

抽象出您的存储和相关服务以隔离更改并为您的应用程序提供统一且一致的 Web API 通常是件好事。但有时，如果你有一个好的超媒体 web api（RESTful 响应链接到其他资源），你可以在你的服务的响应中引用另一个服务的资源链接（例如：SO 请求可以引用用户的 gravatar 图像/资源）。没有一种适合所有人的方式——这取决于您是要封装依赖项还是与它集成。

将来自您的服务的 web-api 请求通过 expressjs 公开为您自己的 web-api 可能是有益的。

从节点发出 http web-api 请求很容易。这是另一篇涵盖该内容的 SO 帖子：

[Node.js Express 中的 HTTP GET 请求](https://stackoverflow.com/questions/9577611/http-get-request-in-node-js-express/9577651#9577651)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T05:17:19.647

好吧，你描述它的方式我想你可能想从亚马逊、lastfm 等获取数据，用 node 处理它，将它保存在你的数据库中并提供你自己的 api。

您可以使用 node 的[http.request()来获取数据并使用](http://nodejs.org/api/http.html#http_http_request_options_callback)[express.js](http://expressjs.com/)构建自己的 rest api

# c# - 与 SQL Server 中的日期范围相关的问题

> ID：12684838
> 
> 赞同：0
> 
> 时间：2012-10-02T05:07:44.563
> 
> 标签：c#, sql-server-2008

我在 SQL Server 中编写了以下查询：

```
SELECT * 
FROM AttendanceMaster 
WHERE Date between '8/12/2012' AND '8/20/2012' 
```

对接查询结果返回 '8/13/2012' AND '8/19/2012'

但它不返回日期 12/8/2012 和日期 8/20/2012 的结果

那么获取上述两个日期的数据的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:23:56.203

尝试以下查询：

```
SELECT * 
FROM AttendanceMaster 
WHERE CAST(Date AS DATETIME) 
                   BETWEEN DATEADD(DAY , -1 ,CAST('2012-08-12' AS DATETIME)) AND 
                           DATEADD( DAY , 1 ,CAST('2012-08-20' AS DATETIME)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T05:29:09.140

如果您使用的是 SQL Server 2008，则只需执行以下操作：

```
SELECT * 
FROM   AttendanceMaster 
WHERE  CONVERT(DATE, [Date]) BETWEEN CAST('2012-08-12' AS DATE) AND CAST('2012-08-20' AS DATE) 
```

**编辑**：我在这里做了两个假设。

1) 您确实已确认您的*AttendanceMaster*表中有 [Date] 等于 2012 年 8 月 12 日和/或 20 日的数据 - 您不想寻找一开始就不存在的东西；)

2) [Date] 列很可能是 DATETIME SQL Server 类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T05:08:56.147

 ~~它不是`TO`而是`AND`

```
select * 
from AttendanceMaster 
where Date between '8/12/2012' AND '8/20/2012' 
```

~~尝试将其投射到日期~~

 ~~```
SELECT * 
FROM   AttendanceMaster 
WHERE  CAST([Date] AS DATE) BETWEEN CAST('2012-08-12' AS DATE) AND CAST('2012-08-20' AS DATE) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T05:35:13.477

如果您给出日期`'2012-08-12'`，`'2012-08-20'`然后它会返回 和 之间的数据`'2012-08-12 0:00 AM'`，`'2012-08-20 0:00 AM'`因此它不会返回 date 的值`'2012-08-12'`。因此，您需要将目标日期写为`'2012-08-21'`

如果您`'2012-08-20'`在变量中有日期，例如：

```
DECLARE @FromDate DATETIME
DECLARE @ToDate DATETIME
SET @FromDate = '2012-08-12'
SET @ToDate = '2012-08-20'

DECLARE @NextDate DATETIME

SET @NextDate=CAST(FLOOR(CAST(dateadd(day,1,@ToDate) AS FLOAT)) AS DATETIME)
/*This Returns the Next Day Date.*/

SELECT * 
FROM AttendanceMaster 
WHERE Date between @Date AND @NextDate 
```

或者你可以写成

```
DECLARE @FromDate DATETIME
DECLARE @ToDate DATETIME
SET @FromDate = '2012-08-12'
SET @ToDate = '2012-08-20'

SELECT * 
FROM AttendanceMaster 
WHERE Date between @Date AND CAST(FLOOR(CAST(dateadd(day,1,@ToDate) AS FLOAT)) AS DATETIME) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T05:36:49.560

我建议您使用`<, <=, >=, or >`，因为它们允许比 BETWEEN 更大的灵活性，并且您可以选择包括或排除端点。所以你可以像这样重写你的查询

```
SELECT * 
FROM AttendanceMaster 
WHERE Date > '8/12/2012 00:00:00' AND Date < '8/21/2012 00:00:00' 
```

请注意，在上述查询中，结束日期是 21 日而不是 20 日。

另请记住，默认情况下，SQL Server 将采用任何日期，例如 '8/20/2012' AS '8/20/2012 00:00:00'，因此如果您使用 BETWEEN 或如果您没有指定确切的时间戳。
希望能帮助到你。~~~~

# visual-studio - 没有在 VS2012 中安装打字稿？

> ID：12684839
> 
> 赞同：1
> 
> 时间：2012-10-02T05:07:46.200
> 
> 标签：visual-studio, typescript

> **可能重复：**
> [在 Visual Studio 中创建一个新的 TypeScript 项目](https://stackoverflow.com/questions/12684987/create-a-new-typescript-project-in-visual-studio)

[我下载并运行了此处](http://www.microsoft.com/en-us/download/details.aspx?id=34790)找到的 Typescript 安装程序。我的开发环境是 Win8 + VS2012。

但是，VS2012 中没有任何变化表明安装程序完全运行。我尝试将 .ts 文件添加到项目中，但没有智能感知。然后，如果安装了特殊的项目类型模板，我尝试四处寻找，但没有。

如果有的话，如何让它在 VS2012 中工作？

-谢谢你的帮助！

# c++ - 构建和同步多线程游戏循环

> ID：12684844
> 
> 赞同：6
> 
> 时间：2012-10-02T05:09:02.193
> 
> 标签：c++, multithreading, thread-safety

关于我的游戏循环的线程安全，我遇到了一个温和的难题。我下面有 3 个线程（包括主线程），它们可以一起工作。一个用于事件管理（主线程），一个用于逻辑，一个用于渲染。所有这 3 个线程都存在于它们自己的类中，如下所示。在基本测试中，该结构可以正常工作。该系统使用 SFML 并使用 OpenGL 进行渲染。

```
int main(){
    Gamestate gs;
    EventManager em(&gs);
    LogicManager lm(&gs);
    Renderer renderer(&gs);

    lm.start();
    renderer.start();
    em.eventLoop();

    return 0;
} 
```

但是，您可能已经注意到我有一个“Gamestate”类，它旨在充当需要在线程之间共享的所有资源的容器（主要使用 LogicManager 作为编写器，Renderer 作为读取器。EventManager 主要是仅用于窗口事件）。我的问题是：（1和2是最重要的）

1）这是处理事情的好方法吗？意思是使用“全局” Gamestate 类是个好主意吗？有没有更好的方法呢？

2) 我的意图是让 Gamestate 在 getter/setter 中有互斥锁，但它不适用于读取，因为我无法在对象仍处于锁定状态时返回它，这意味着我必须将同步放在 getter 之外/setters 并公开互斥锁。这也意味着我将为所有不同的资源拥有大量的互斥锁。解决这个问题的最优雅的方法是什么？

3）我让所有线程访问“bool run”以检查是否继续它们的循环

```
while(gs->run){
....
} 
```

如果我在 EventManager 中收到退出消息，run 会设置为 false。我是否需要同步该变量？我会将其设置为易失性吗？

4）不断取消引用指针等是否会对性能产生影响？例如 gs->objects->entitylist.at(2)->move(); 做所有那些'->'和'。导致任何重大放缓？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T06:07:54.733

# 全局状态

> 1）这是处理事情的好方法吗？意思是使用“全局” Gamestate 类是个好主意吗？有没有更好的方法呢？

对于游戏而言，与一些可重用的代码相比，我认为全局状态就足够了。您甚至可以避免传递游戏状态指针，而是真正将其设为全局变量。

# 同步

> 2) 我的意图是让 Gamestate 在 getter/setter 中有互斥锁，但它不适用于读取，因为我无法在对象仍处于锁定状态时返回它，这意味着我必须将同步放在 getter 之外/setters 并公开互斥锁。这也意味着我将为所有不同的资源拥有大量的互斥锁。解决这个问题的最优雅的方法是什么？

我会尝试从交易的角度来考虑这一点。将每个状态更改包装到自己的互斥锁代码中不仅会影响性能，而且如果代码获取一个状态元素，对其执行一些计算并稍后设置值，而其他一些代码修改了之间的相同元素。所以我会尝试构建`LogicManager`和`Renderer`以这样的方式与游戏状态的所有交互都捆绑在几个地方。在该交互的持续时间内，线程应该在状态上持有一个互斥锁。

如果您想强制使用互斥锁，那么您可以创建一些至少有两个类的构造。让我们称它们为`GameStateData`and `GameStateAccess`。`GameStateData`将包含所有状态，但不提供对它的公共访问。`GameStateAccess`将成为其私人数据的朋友`GameStateData`并提供对其私人数据的访问权限。的构造函数`GameStateAccess`将获取指向 的引用或指针，`GameStateData`并将锁定该数据的互斥锁。析构函数将释放互斥锁。这样，您用于操作状态的代码将被简单地编写为`GameStateAccess`对象在范围内的块。

但是，仍然存在一个漏洞：如果从此类返回的对象`GameStateAccess`是指针或对可变对象的引用，那么此设置不会阻止您的代码将此类指针带出受互斥体保护的范围。为了防止这种情况，要么注意你是如何写东西的，要么使用一些自定义的类似指针的模板类，一旦`GameStateAccess`超出范围就可以清除，或者确保你只通过值而不是引用传递东西。

## 例子

使用C++11，上述锁管理思想可以实现如下：

```
class GameStateData {
private:
  std::mutex _mtx;
  int _val;
  friend class GameStateAccess;
};
GameStateData global_state;

class GameStateAccess {
private:
  GameStateData& _data;
  std::lock_guard<std::mutex> _lock;
public:
  GameStateAccess(GameStateData& data)
    : _data(data), _lock(data._mtx) {}
  int getValue() const { return _data._val; }
  void setValue(int val) { _data._val = val; }
};

void LogicManager::performStateUpdate {
  int valueIncrement = computeValueIncrement(); // No lock for this computation
  { GameStateAccess gs(global_state); // Lock will be held during this scope
    int oldValue = gs.getValue();
    int newValue = oldValue + valueIncrement;
    gs.setValue(newValue); // still in the same transaction
  } // free lock on global state
  cleanup(); // No lock held here either
} 
```

# 循环终止指示器

> 3）我让所有线程访问“bool run”以检查是否继续它们的循环
> 
> ```
> while(gs->run){
> ....
> } 
> ```
> 
> 如果我在 EventManager 中收到退出消息，run 会设置为 false。我是否需要同步该变量？我会将其设置为易失性吗？

对于这个应用程序，一个易失但不同步的变量应该没问题。您必须将其声明为 volatile 以防止编译器生成缓存该值的代码，从而隐藏另一个线程的修改。

作为替代方案，您可能希望为此使用[`std::atomic`](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/libstdc++/api/a00536.html)变量。

# 指针间接开销

> 4）不断取消引用指针等是否会对性能产生影响？例如`gs->objects->entitylist.at(2)->move();`，所有这些都会`->`导致`.`任何重大放缓吗？

这取决于替代品。在许多情况下，如果重复使用，编译器将能够保留`gs->objects->entitylist.at(2)`上述代码中 eg 的值，而不必一遍又一遍地计算它。一般来说，我认为由于所有这些指针间接导致的性能损失是次要问题，但这很难确定。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T05:55:33.623

## 这是处理事情的好方法吗？( `class Gamestate`)

> 1）这是处理事情的好方法吗？

是的。

> 意思是使用“全局” Gamestate 类是个好主意吗？

是的，如果 getter/setter 是线程安全的。

> 有没有更好的方法呢？

不，数据对于游戏逻辑和表示都是必需的。如果将*全局*游戏状态放在子例程中，则可以删除它，但这只会将您的问题转移到另一个函数。全局 Gamestate 还可以让您非常轻松地保护当前状态。

## 互斥锁和获取器/设置器

> 2) 我的意图是让 Gamestate 在 getter/setter [...] 中有互斥锁。解决这个问题的最优雅的方法是什么？

这称为读/写问题。为此，您不需要公共互斥锁。请记住，您可以有很多读者，但只有一位作者。您可以为读取器/写入器实现一个队列并阻止其他读取器，直到写入器完成。

## `while(gs->run)`

> 我是否需要同步该变量？

每当对变量的非同步访问可能导致未知状态时，就应该对其进行同步。所以如果在渲染引擎开始下一次迭代并且Gamestate已经被销毁后立即`run`设置`false`，就会造成混乱。但是，如果`gs->run`只是指示循环是否应该继续，它是安全的。

请记住，逻辑和渲染引擎应该同时停止。如果您不能同时关闭两者，请先停止渲染引擎以防止冻结。

## 取消引用指针

> 4）不断取消引用指针等是否会对性能产生影响？

有两个优化规则：

1.  不优化
2.  暂时不要优化。

编译器可能会处理这个问题。作为程序员，您应该使用对您来说最易读的版本。

# php - 什么可能导致 PUT 请求在 Google Cloud Storage 上失败？

> ID：12684846
> 
> 赞同：0
> 
> 时间：2012-10-02T05:09:10.257
> 
> 标签：php, rest, google-cloud-storage

我没有从谷歌得到任何形式的回复。我会说请求在 99% 的情况下都会成功，但我最近开始注意到请求没有成功。它不会失败，因为没有返回指示失败的响应：没有 HTTP 状态代码，没有 XML 响应...... nada。

这可能是由于将超时设置得太低造成的吗？我的设置为10s

这是我的代码的外观：

```
public function putObject($objectPath, $bucket, $accessToken, $metaHeaders)
{
    $version_header =   "x-goog-api-version: 2";
    $project_header =   "x-goog-project-id: ".$this->projectID;
    $timestamp      =   date("r");

    $url = 'https://'.$bucket.'.commondatastorage.googleapis.com/object';

    $fp = fopen($objectPath, 'r'); 

    $headers    = array('Host: '.$bucket.'.commondatastorage.googleapis.com',
                    'Date: '.$timestamp, $version_header, 'Content-Type: text/plain',
                    $project_header, 'Content-Length: '.filesize($objectPath),
                    'Authorization: OAuth '.$accessToken);
    if(isset($metaHeaders))
    {
        foreach($metaHeaders as $metaHeader)
        {
            array_push($headers,$metaHeader);
        }
    }

    $c   = curl_init();
    curl_setopt($c, CURLOPT_URL, $url);
    curl_setopt($c, CURLOPT_PUT, 1);
    curl_setopt($c, CURLOPT_INFILE, $fp); 
    curl_setopt($c, CURLOPT_INFILESIZE, filesize($objectPath)); 
    curl_setopt($c, CURLOPT_HEADER, 1);
    curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($c, CURLOPT_CUSTOMREQUEST, "PUT");
    curl_setopt($c, CURLOPT_TIMEOUT, 10); //timeout in 10s
    curl_setopt($c, CURLOPT_HTTPHEADER, $headers);
    $response = curl_exec($c);
    curl_close($c);
    fclose($fp);

    // split up the response into header and xml body
    list($header, $xml) = explode("\r\n\r\n", $response, 2);
    // tokenize 
    $status = strtok($header, "\r\n"); 

    if(stristr($status,"200 OK"))
    {
        //success
        $result = "success";
        //check xml object for specific bucket creation errors

    }
    else
    {
        //failed
        $result = "fail";
        //check xml object for specific bucket creation errors

    }

    return $result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:19:43.200

根据请求的大小，10 秒可能不够。如果请求需要很长时间，我会从 60 秒开始超时。而且，这就是互联网。一些请求将超时并需要重试，但这应该远少于 0.001% 的时间。

# iphone - 关键帧动画期间应用程序崩溃：-[NSConcreteValue doubleValue] 无法识别的选择器

> ID：12684849
> 
> 赞同：3
> 
> 时间：2012-10-02T05:09:33.877
> 
> 标签：iphone, ios, uiviewanimation

由于这个原因应用程序崩溃`-[NSConcreteValue doubleValue]: unrecognized selector sent to`

在我的项目中使用了以下代码，我非常搜索并且我得到了由于变换的原因，但是如果我将 transform.scale 替换为它，那么动画更改对我有帮助！

```
[viewContent.layer addAnimation:[self getShakeAnimation] forKey:@"transform.scale"];

- (CAAnimation*)getShakeAnimation 
{ 
    CAKeyframeAnimation *animation = [CAKeyframeAnimation animation];

    animation.values = [NSArray arrayWithObjects:
                        [NSValue valueWithCATransform3D:CATransform3DMakeRotation(M_PI_2, 0.0f, 1.0f, 0.0f)],
                        [NSValue valueWithCATransform3D:CATransform3DMakeRotation(M_PI, 0.0f, 0.0f, 0.0f)],
                        [NSValue valueWithCATransform3D:CATransform3DMakeRotation(M_PI * 2, 0.0f, 1.0f, 0.0f)],nil];

 animation.duration = 0.8f;
 animation.delegate = self;

    return animation;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T09:04:28.583

`transform.scale`您正在为 keypath (a )添加动画，`float`但正在传入`CATransform3D`s。您需要更正您的密钥路径或您的输入。

# java - 如何确保同步覆盖的方法

> ID：12684850
> 
> 赞同：26
> 
> 时间：2012-10-02T05:09:37.463
> 
> 标签：java, class, synchronization, thread-safety, synchronize

我有一类线程安全的通用代码。

该类中的方法之一是抽象的，需要为不同的实现重写。

我需要确保或至少向其他开发人员表明此方法的所有实现都需要是线程安全的。

做这个的最好方式是什么？

是否有此效果的关键字或注释？

我已经尝试过`abstract synchronized`，但是不允许使用关键字组合。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-02T05:18:56.697

你不能直接做。您可以做的一件事是让方法具体化，但调用抽象方法：

```
public synchronized final void foo() {
    doFoo();
}
protected abstract void doFoo(); 
```

这样，doFoo() 将始终* 在 foo() 建立的同步下被调用。

* 除非有人直接调用它，所以你应该命名并记录它以明确他们不应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T05:25:48.550

来自[子类中的同步方法](http://www.coderanch.com/t/240527/java-programmer-SCJP/certification/Synchronized-method-subclass)

> 同步是方法的实现细节。您可以使用方法覆盖同步方法，而无需将其声明为同步，反之亦然。重载也是如此。

你也可以看看，[超类中的同步方法获取与子类中相同的锁。](https://stackoverflow.com/questions/625726/java-a-synchronized-method-in-the-superclass-acquires-the-same-lock-as-one-in-t)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T07:00:06.563

[这个指向 JLS 的链接](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.3)确认我们不能混合抽象和同步。

虽然比关键字或标准注释弱得多，但比文档强：也许试试[Marker 接口](http://en.wikipedia.org/wiki/Marker_interface_pattern)？

> ...提供了一种将元数据与语言没有明确支持此类元数据的类相关联的方法。

这是一个延伸，但可能会有所帮助，因为派生类进行了声明（**编辑**：新示例测试声明）：

```
interface EatMethodIsThreadSafe {}

abstract class Animal {
    public Animal() {
        if (! (this instanceof EatMethodIsThreadSafe)) { 
            throw new IllegalArgumentException("eat method must be thread safe");
        }
    }
    public abstract void eat();
}

public class Bear extends Animal implements EatMethodIsThreadSafe {
    public synchronized void eat() {}
    public static void main(String...args) { Bear b = new Bear(); } 
} 
```

# java - 使用java从表单中获取数据

> ID：12684851
> 
> 赞同：0
> 
> 时间：2012-10-02T05:09:40.383
> 
> 标签：java, jsoup

```
<div></div>
    <div></div>
           <div></div>
            <div></div>
                <ul>
        <form id=the_main_form method="post">
                   <li>
                       <div></div>
                       <div> <h2> 
                <a onclick="xyz;" target="_blank" href="http://sample.com" style="text-decoration:underline;">This is sample</a>
                 </h2></div>
                       <div></div>
                        <div></div>
                      </li> 
```

有50里是这样的

我已经从一个大的 HTML 中发布了 html 的片段。

`<div> </div>` => 表示它们之间有数据删除了数据，因为它不是必需的。

我想知道 JSOUP-select 语句是如何提取 href 和 Text 的？

我选择了 doc.select("div div div ul xxxx");

其中xxx是表格..我应该给表格ID（或）我应该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:25:44.190

试试这个：

```
Elements allLis = doc.select("#the_main_form > li ");
for (Element li : allLis) {
    Element a = li.select("div:eq(1) > h2 > a");
    String href = a.attr("href");
    String text = a.text();
} 
```

希望能帮助到你！

**编辑：**

```
Elements allLis = doc.select("#the_main_form > li "); 
```

这部分代码获取带有 id`<li>`的所有标签。`<form>``#the_main_form`

```
Element a = li.select("div:eq(1) > h2 > a"); 
```

然后我们遍历所有`<li>`标签并获取`<a>`标签，首先获取标签（使用 index=1 ->`<div>`在所有 s 中的第二个标签）然后获取标签，我们的标签存在于其中。`<li>``div:eq(1)``<h2>``<a>`

希望你现在明白！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T05:35:48.967

请试试这个：

```
package com.stackoverflow.works;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;

/*
 * @ author: sarath_sivan
 */

public class HtmlParserService {

    public static void parseHtml(String html) {
        Document document = Jsoup.parse(html);
        Element linkElement = document.select("a").first();
        String linkHref = linkElement.attr("href"); // "http://sample.com"
        String linkText = linkElement.text(); // "This is sample"
        System.out.println(linkHref);
        System.out.println(linkText);
    }

    public static void main(String[] args) {
        String html = "<a onclick=\"xyz;\" target=\"_blank\" href=\"http://sample.com\" style=\"text-decoration:underline;\">This is sample</a>";
        parseHtml(html);
    }

} 
```

希望您的类路径中有 Jsoup 库。

谢谢！

# c - C中的自引用结构

> ID：12684856
> 
> 赞同：1
> 
> 时间：2012-10-02T05:10:31.457
> 
> 标签：c, pointers, data-structures, linked-list

我想声明一个自引用结构如下

```
 typedef struct
    {
            entry_t *entry;
            node_t *next;
    }node_t; 
```

而不是下面的链接列表

```
 struct node
  {
         entry_t *entry;
         struct node *next;
  }*head; 
```

这在 C 中有效吗？如果没有，为什么不呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T05:15:06.263

它不起作用，因为符号/名称`node_t`在声明中是未知的`next`：

```
typedef struct
{
    entry_t *entry;
    node_t *next; /* <-- Error: unknown type */
} node_t; 
```

您的结构在其声明中需要一个名称才能“自引用”。但是，您可以保留 typedef：

```
typedef struct node
{
    entry_t *entry;
    struct node *next; /* <-- type struct node is known */
} node_t; 
```

现在您可以使用`struct node`或`node_t`来创建一个新节点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T05:16:10.443

你第二次提到的版本被广泛使用，你**可以**像

```
typedef struct some_struct_name {
    /* other fields, etc... */
    struct some_struct_name *next;
} *some_type; 
```

如果您**真的非常**希望在声明结构本身时使用该类型定义的名称，则可以使用不完整类型的前向声明：

```
typedef struct node *node_t;

struct node {
    int data;
    node_t next;
}; 
```

这也被 C89 接受：

![在此处输入图像描述](../Images/c96419cf26e0afcdf08264097383b41a.png)

# javascript - jquery 多个事件处理程序

> ID：12684857
> 
> 赞同：9
> 
> 时间：2012-10-02T05:10:45.340
> 
> 标签：javascript, jquery, events, event-handling

我已经根据我正在处理的最新项目中的类名定义了事件处理程序。

例如。所有具有类名“foo”的元素都应以特定方式响应更改事件。并且所有类名为“bar”的元素都应该以其他方式响应。

现在我的一些元素属于两个类，即 class="foo bar" 并且它们应该以两种方式响应。现在，只有一个事件处理函数被调用。

如何使两个响应同时执行。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-02T05:14:01.597

这取决于您如何绑定事件。如果您通过 jQuery 绑定它们而不是通过覆盖处理程序`x.onchange = function() { ... }`- 所有绑定的事件处理程序都将被执行。这是因为 jQuery将事件处理程序*排队*，而不是*覆盖*以前的绑定。

检查此项[`fiddle`](http://jsfiddle.net/maEjL/)以查看*多个事件被触发*：
和

检查此项[`fiddle`](http://jsfiddle.net/qjZxX/2/)以查看事件处理程序是如何被覆盖的，从而仅导致*最后一个绑定的处理程序触发*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T06:22:57.210

您想要的是“行为”模式的变体。

它使您可以自动处理具有给定类或其他属性的元素上的事件。

通常的实现是监听“文档”上的事件，然后通过 event.target 定义动作。

例如：小提琴（[http://jsfiddle.net/PRkAr/](http://jsfiddle.net/PRkAr/)）

```
$(document).on('click change', '.foo.bar', function(e) {
  var classes = this.className.split(/\s+/);
  $.each(classes, function(i, cls) {
    handle(e, this, cls);
  })
})

function handle(e, elem, cls) { 
  // example: Event type click on elem DIV with class foo
  alert("Event type " + e.type + " on elem " + elem.tagName + " with class " + cls);
} 
```

此处函数处理具有您选择的类的元素上的所有事件。如果您想添加其他事件或类，只需将它们附加到“on”列表中。

# ruby-on-rails - Rails Twilio 呼叫跟踪应用程序——这是正确的数据结构吗？

> ID：12684860
> 
> 赞同：0
> 
> 时间：2012-10-02T05:11:26.200
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, twilio

完成 Michael Hartl 的 Rails 教程后，我的第一个宠物项目是使用 Twilio API 构建一个呼叫跟踪应用程序。基本思路如下——

用户可以注册 4 个计划，这限制了他们拥有的电话号码数量以及他们可以使用的分钟数

每个用户，一旦注册，就会从 Twilio 获得他们自己的子帐户

每个用户都可以购买电话号码，但仅限于他们的计划

每个用户都可以跟踪他们的电话号码上发生的事情。

现在，我已经构建了一个基本的授权系统，并集思广益了一个潜在的数据结构。不过，我在理解上存在巨大的循环漏洞，因此将不胜感激有经验的程序员的眼睛。即是否有更好的数据结构，我在下面概述的内容是否有意义？

---所以，这是数据结构

**表：计划**

```
max_phone_numbers: integer 
max_minutes: integer
has_many: users 
```

**表：用户**

```
name:string
email:string
password_digest:string
remember_token:string [For log in system]
Twilio_SubAccountSid: string
Twilio_SubAccountAuthToken: string
Plan id : integer [to connect to plan] 
stripe_token : string [for charging]
belongs_to: plan
has_many: phone_numbers 
```

**表 : 电话号码**

```
belongs_to users
phone_number:string
user_id: integer
has_many: data_points 
```

**表：Twilio 数据**

```
belongs_to phone_numbers
phone_number_id: string
[All of Twilio's call tracking data..i.e duration of call, location etc.] 
```

好的，这几乎就是我对它如何工作的解释。请撕开！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:50:54.437

在数据结构方面，我认为似乎是这样。但我没有意识到的是涉及更多的控制器。例如，在 Twilio 中搜索和购买涉及两个 CREATE 操作，因此我必须制作另一个控制器。我想会有另一个控制器负责路由呼叫。

# objective-c - 仅向受支持的国家/地区显示 iOS iAd

> ID：12684863
> 
> 赞同：2
> 
> 时间：2012-10-02T05:12:04.763
> 
> 标签：objective-c, ios, iad

苹果似乎只向极少数国家提供 iAd。因此，当应用程序在不支持 iAd 的国家/地区使用时，我想停止发送 iAd 请求。那么最好的方法是什么？

我问这个问题是因为我最近通过 iAd 网络的消息部分收到了来自 Apple 的以下消息。

> iAd 网络最近在加拿大推出。广告现已投放到美国、加拿大、英国、德国、意大利、西班牙、法国和日本 App Store 上的应用程序。请配置您的应用以仅在这些国家/地区投放广告。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T06:33:19.877

（我在 StackOverflow 上的第一篇文章！）

我也在努力解决这个问题。似乎没有完美的方式来做到这一点。我的方法是使用用户语言环境的国家。（见下文）

有什么改进的建议吗？

```
// Indicate if the iAds framework is supported for this particular device
+ (bool) iAdsIsSupported
{
    // List of supported countries for iAds
    static NSSet* supportedCountries = nil;
    if (supportedCountries == nil)
    {
        supportedCountries = [[NSSet setWithObjects:
                           @"ES", // spain
                           @"US", // usa
                           @"UK", // united kingdom
                           @"CA", // canada
                           @"FR", // france
                           @"DE", // german
                           @"IT", // italy
                           @"JP", // japan
                           nil] retain];
    }

    // Check if the country is in the supported countries
    // http://stackoverflow.com/questions/3940615/find-current-country-from-iphone-device
    NSLocale* currentLocale = [NSLocale currentLocale];  // get the current locale.
    NSString* countryCode = [currentLocale objectForKey:NSLocaleCountryCode];

    return [supportedCountries containsObject:countryCode];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T05:45:38.803

iAd 框架是一个黑盒子。它的用例在文档中定义，您打算按预期使用它或根本不使用它。

恕我直言，iAd 没有*最好的方法*，只有不好的方法。

您必须执行以下操作：

1.  在您的应用程序中计算当前支持的国家/地区，因为它们会随着时间的推移而变化。
2.  找出您的用户所在的位置，这会随着时间的推移而改变。

上述两种选择都有不好的副作用。

1.  检查受支持的 iAd 国家/地区的网络请求/解析将比 iAd 请求工作更多。
2.  在您的应用程序中使用用户位置必须符合[Apple 的 App Store 审核指南](https://developer.apple.com/appstore/resources/approval/guidelines.html)

你也可能犯规：

> 4.4 位置数据只能在与应用程序向用户提供的功能和服务直接相关或支持批准的广告用途时使用

# java - 如何在 mac 上使用 javaxt？

> ID：12684865
> 
> 赞同：0
> 
> 时间：2012-10-02T05:12:30.613
> 
> 标签：java

我正在使用jdk1.6，以下代码在Windows上正常工作，但我也需要在mac上运行它但它不在mac上运行，谁能告诉我。如何在mac上运行它？

```
 javaxt.io.File file1=new javaxt.io.File(fname);
      Date d1=file1.getLastAccessTime();      
      System.out.println("LastAccessed Date:"+d1);
      Date d2=file1.getCreationTime();
      System.out.println("Creation time of file"+d2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:23:06.770

javaxt-core 的最新版本，1.5.6 版，包括针对 Mac OS X 的修复程序。这是网站： [http ://www.javaxt.com](http://www.javaxt.com)

# linux - ffmpeg音视频同步错误

> ID：12684869
> 
> 赞同：0
> 
> 时间：2012-10-02T05:12:57.220
> 
> 标签：linux, ffmpeg, pandaboard

```
./ffmpeg \
-f alsa -async 1 -ac 2 -i hw:2,0 \
-f video4linux2 -vsync 1 -s:v vga -i /dev/video0 \
-acodec aac -b:a 40k \
-r 25 -s:v vga -vcodec libx264 -strict -2 -crf 25 -preset fast -b:v 320K -pass 1 \
-f flv rtmp://192.168.2.105/live/testing 
```

使用上述命令，我能够以 25 的 fps 进行流式传输，但它们没有音频和视频同步，即音频比视频快，我在 pandaboard 上使用 ffmpeg 0.11.1 版本进行 rtmp 流式传输，帮我解决这个问题问题。

谢谢

阿米斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:22:30.367

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-06T03:37:46.223

我正在流式传输到 Twitch，有趣的是，删除该`-r`选项使视频与音频同步。现在，您可能希望以某种方式限制帧速率；不幸的是，我对此没有解决方案，但它确实可以很好地将视频与音频同步。

# ruby-on-rails - 如何在 Ruby on Rails 中的中间关系中创建一行

> ID：12684870
> 
> 赞同：1
> 
> 时间：2012-10-02T05:12:57.280
> 
> 标签：ruby-on-rails

我有表用户、位置和关注，其中用户有_许多位置：通过 =>：关注。关注属于用户和位置。我想在 Follows 表中添加一行，即在用户和位置之间创建 Follow 关系。

我不确定如何执行此操作，或者我是否正确实施了以下操作：

```
class CreateFollows < ActiveRecord::Migration
   def change
     create_table :follows |do| t
      t.references :user_id
      t.references :location_id
      t.timestamps
     end
   end
end 
```

给定用户 ID 和位置 ID，我试图用来添加关注关系的代码是

```
newFollow = Follow.new(:user_id => userid, :location_id => locationid)
newFollow.save 
```

我收到错误未知属性：user_id。

有任何想法吗？我真的被困住了。非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T05:18:07.213

在迁移中，`references`需要不带 的字段名称`_id`，然后附加`_id`到它。现在，您正在创建两列：`user_id_id`和`location_id_id`.

而不是这些行...

```
t.references :user_id
t.references :location_id 
```

...你需要这些行：

```
t.references :user
t.references :location 
```

一旦你修复了你的列名......

您不必在“通过”表中手动创建记录。如果你有一个用户，你有一个位置，并且你的关联设置正确（`has_many follows; has_many :locations, through: :follows`），你可以简单地使用

```
user.locations << location 
```

这将自动创建加入记录。

# php - 如何捕获反序列化异常？

> ID：12684871
> 
> 赞同：21
> 
> 时间：2012-10-02T05:12:59.133
> 
> 标签：php, serialization, try-catch

`unserialize()`生成错误时是否可以在 PHP 上捕获异常？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-02T07:05:04.227

一个简单的方法是：

```
$ret = @unserialize($foo);
if($ret === null){
   //Error case
} 
```

但这不是最现代的解决方案。

如前所述，最好的方法是拥有一个自定义错误/异常处理程序（不仅适用于这种情况）。但取决于你在做什么，这可能是矫枉过正。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-02T05:15:05.590

不，你不能抓住它，`unserialize()`不会抛出异常。

*如果传递的字符串不是不可序列化的，则返回 FALSE 并发出 E_NOTICE。*

您可以设置自定义异常处理程序来处理所有错误：

```
function exception_error_handler($errno, $errstr, $errfile, $errline ) {
    throw new ErrorException($errstr, $errno, 0, $errfile, $errline);
}
set_error_handler("exception_error_handler"); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-02T05:45:43.377

将所有 PHP 错误（警告通知等）转换为异常。例子在[这里](http://php.net/manual/en/class.errorexception.php)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-08-27T05:42:03.327

完整的解决方案如下所示：

```
<?php
// As mentioned in the top answer, we need to set up 
// some general error handling
function exception_error_handler($errno, $errstr, $errfile, $errline ) {
    throw new ErrorException($errstr, $errno, 0, $errfile, $errline);
}
set_error_handler("exception_error_handler");

// Note, there are two types of way it could fail, 
// the fail2 fail is when try to unserialise just 
// false, it should fail. Also note, what you 
// do when something fails is up to your app. 
// So replace var_dump("fail...") with your 
// own app logic for error handling
function unserializeSensible($value) {
    $caught = false;
    try {
        $unserialised = unserialize($value);
    } catch(ErrorException $e) {
        var_dump("fail");
        $caught = true;
    }
    // PHP doesn't have a try .. else block like Python
    if(!$caught) {
        if($unserialised === false && $value !== serialize(false)) {
            var_dump("fail2");
        } else {
            var_dump("pass");
            return $unserialised;
        }
    }
}

unserializeSensible('b:0;'); // Should pass
unserializeSensible('b:1;'); // Should pass
unserializeSensible('a:2:{s:1:"a";b:0;s:1:"b";s:3:"foo";}'); // Should pass
unserializeSensible('a:2:{s:1:"a";b:0;s:1:"b";s:3:1111111111111111;}'); // Should fail
unserializeSensible(123); // Should fail
unserializeSensible("Gday"); // Should fail
unserializeSensible(false); // Should fail2
unserializeSensible(true); // Should fail 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-10-30T15:48:16.400

正如 Mihai Iorga 解释的那样，`unserialize`不会扔任何东西。您可以通过将返回值与 进行比较来检查错误，但如果序列化值是布尔值`false`，它将失败。`false`下面的解决方案解决了这个问题，而无需借助缓慢而繁琐的技术（例如设置自定义错误处理程序）。

`InvalidArgumentException`如果序列化的值`$v`无效，以下代码将抛出 a ，否则`$x`将包含未序列化的值。

特别注意区分：

*   `unserialize()`返回`false`以表示无效的序列化值
*   原始值实际上是一个 boolean `false`。

```
$x = @unserialize ($v);
if ($x === false && $v != 'b:0;')
  throw new InvalidArgumentException; 
```

# android - 如何使用列表参数创建 WCF 肥皂服务以从 android 使用

> ID：12684873
> 
> 赞同：0
> 
> 时间：2012-10-02T05:13:23.267
> 
> 标签：android, wcf, android-ksoap2

我需要通过一个`List<string> or List<object>`来使用来自 Android 的 WCF 肥皂服务。我已经尝试了很多方法。

当我使用以下代码时：

> 公共类 MarshalArray 实现 Marshal{

```
@Override
public Object readInstance(XmlPullParser parser, String namespace, String name,
        PropertyInfo expected) throws IOException, XmlPullParserException {

    return GenericType.getObject(parser.nextText());
}

@Override
public void register(SoapSerializationEnvelope envelope) {
    envelope.addMapping("http://schemas.datacontract.org/2004/07/WcfService1", "GenericType", GenericType.class, this);
}

@Override
public void writeInstance(XmlSerializer writer, Object obj)
        throws IOException {
    GenericType sp =  (GenericType) obj;

    writer.startTag("http://schemas.datacontract.org/2004/07/WcfService1", "mydata");       
    for(String str : sp.mydata){
        writer.startTag("http://schemas.datacontract.org/2004/07/WcfService1", "string");
        writer.text(str);
        writer.endTag("http://schemas.datacontract.org/2004/07/WcfService1", "string");

    }       
    writer.endTag("http://schemas.datacontract.org/2004/07/WcfService1", "mydata"); 

    }} 
```

使用以下 wcf 服务：

```
[ServiceContract]
[ServiceKnownType(typeof(WcfService1.GenericType<string>))]
public interface IService1
{

    [OperationContract]
    [ServiceKnownType(typeof(WcfService1.GenericType<string>))]
    string GetDataList(GenericType<string> objs);
} 

 [DataContract(Name = "GenericType")]
public class GenericType<T>
{
    List<T> data;

    [DataMember]
    public List<T> mydata
    {
        get { return data; }
        set { data = value; }
    }
} 
```

Wcf 服务返回一个肥皂错误错误，例如：内部服务错误..

然后我尝试了另一种方式：

```
public class Members extends Vector<String> implements KvmSerializable {

private static final long serialVersionUID = -1166006770093411055L;

@Override
public Object getProperty(int index) {
    return this.get(index);
}

@Override
public int getPropertyCount() {
    return this.size();
}

@Override
public void getPropertyInfo(int arg0, Hashtable arg1, PropertyInfo param) {
    param.name = "String";
    param.type = PropertyInfo.STRING_CLASS;
}

@Override
public void setProperty(int arg0, Object obj) {
    this.add(obj.toString());
} 
```

}

使用以下 wcf 服务：

```
[ServiceContract] 
```

公共接口 IService1 {

```
[OperationContract]

string GetDataList(List<string> objs); 
```

}

我收到从 wcf 服务返回的肥皂错误错误：

```
Deserialization fail... 
```

每次我从 wcf 服务中得到一个错误.. 我认为我的`wcf`服务有问题。如果有人知道答案..请回答我的问题。

非常感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:37:51.223

终于我得到了答案...

我决定使用 MarshalArray 类，而不是 Members(KvmSerializable)。

使用 MarshalArray 时，问题出在 android 的 MarshalArray 类中。

这是发生错误的旧代码：

```
 for(String str : sp.mydata){
    writer.startTag("http://schemas.datacontract.org/2004/07/WcfService1", "string");
    writer.text(str);
    writer.endTag("http://schemas.datacontract.org/2004/07/WcfService1", "string");

} 
```

我将其更改为如下所示：

```
for(String str:gt.mydata){
        writer.startTag("http://schemas.microsoft.com/2003/10/Serialization/Arrays", "string");
        writer.text(str);
        writer.endTag("http://schemas.microsoft.com/2003/10/Serialization/Arrays", "string");               
    } 
```

然后它成功运行......

感谢您的帮助，stepoverflow。我必须自己找出答案.... !!

# firebase - 我可以防止 Firebase set() 覆盖现有数据吗？

> ID：12684874
> 
> 赞同：12
> 
> 时间：2012-10-02T05:13:34.880
> 
> 标签：firebase

如果我这样做，我的 itemRef 一切都很好：

```
itemRef.child('appreciates').set(newFlag);
itemRef.child('id').set(newId); 
```

itemRef 的其他属性仍然存在，但 child_changed 被调用了两次

如果我这样做：

```
itemRef.set({appreciates:newFlag,id:newId}); 
```

child_changed 只被调用一次，但我的其他属性被破坏了。除了重新填充整个参考对象的笨拙之外，还有其他解决方法吗？

谢谢，

蒂姆

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-12T03:26:47.780

Firebase update() 函数将允许您修改对象的某些子对象，同时保持其他对象不变。更新函数只会在其他客户端上为正在写入的路径触发一个“值”事件，无论有多少孩子被改变。

在此示例中，您可以执行以下操作：

```
itemRef.update({appreciates:newFlag,id:newId}); 
```

update() 的文档在[这里](https://www.firebase.com/docs/javascript/firebase/update.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-11-29T23:41:50.323

如果数据已经存在，您可以创建一个规则来防止覆盖。转载自[Firebase 文档现有数据与新数据](https://firebase.google.com/docs/database/security/securing-data#existing_data_vs_new_data)

```
// we can write as long as old data or new data does not exist
// in other words, if this is a delete or a create, but not an update
".write": "!data.exists() || !newData.exists()" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-01T07:16:35.787

虽然您可以使用`update`，但您也可以`set`将`merge`选项设置为`true`：

```
itemRef.set({ appreciates:newFlag, id:newId }, { merge: true }); 
```

如果它不存在，这将创建一个新文档，如果存在则更新现有文档。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-13T14:41:55.603

现在**.update**会处理它，您可以更改现有数据或添加新数据，而不会影响您已经拥有的其余数据。

在此示例中，我使用此函数将产品设置为已售出，该产品具有其他带有数据的变量，可能有也可能没有`sold`，`sellingTime`但没关系，因为它是否不存在将创建它们，如果存在，将更新数据

```
var sellingProduct = function(id){
 dataBase.ref('product/'+id).update({
   sold:true,
   sellingTime: Date.now(),

 }).then (function(){
   alert ('your product is flaged as sold')

 }).catch(function(error){
    alert ('problem while flaging to sold '+ error)
 })

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-16T13:03:49.733

I've been trying to do this having a structure like the following:

[![Firebase gigs database structure](../Images/10cc5c505bbac0caeacac00970af1222.png)](https://i.stack.imgur.com/ysVsl.png)

The problem I was having was when running say set on specific fields such as name, description and date all of the other child nodes would then be removed with the following:

```
return (dispatch) => {
    firebase.database().ref(`/gigs/${uid}`)
        .set({ name, description, date })
        .then(() => {
            dispatch({ type: GIG_SAVE_SUCCESS });
            Actions.home({ type: 'reset' });
        });
}; 
```

Leaving only the name, description and date nodes but using the following the specific nodes are updated without removing the other child nodes i.e. members, image etc:

```
return (dispatch) => {
    var ref = firebase.database().ref(`/gigs/${uid}`);
    ref.child('name').set(name)
    ref.child('description').set(description)
    ref.child('date').set(date)
        .then(() => {
            dispatch({ type: GIG_SAVE_SUCCESS });
            Actions.home({ type: 'reset' });
        });
}; 
```

# php - 更改列mysql查询出错

> ID：12684875
> 
> 赞同：1
> 
> 时间：2012-10-02T05:13:35.540
> 
> 标签：php, mysql

这个查询有什么问题？

```
ALTER TABLE test_table 
CHANGE text_string text_string VARCHAR(255) 
    COLLATE utf8_unicode_ci NOT NULL 
    COMMENT 'hey here are mysql comments..' ; 
```

在 PHPMyAdmin 中它运行良好，但如果我从我的 PHP 类执行这个查询，它会返回：

```
error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '<br>' at line 1 
```

注意 mysql 错误中有一个`<br>`标签，我假设它来自 mysql 本身，因为我总是使用`<br />`. 我也在我的代码中搜索`<br>`过，所以它不是我。我可能只是累了，这就是所有 mysql 错误！

我现在已经有一段时间了，那么为什么 mysql 不喜欢这个查询呢？新鲜的眼睛非常感谢！

* * *

运行生成的查询的 PHP 处理程序：

```
$q = isset($_POST['q']) ? base64_decode(($_POST['q'])): false;

$db->q($q) or die("error: ".mysql_error()); 
```

是的，base64_decode 工作正常。

* * *

**$q 输出：**

解码查询

```
ALTER TABLE sNOWsh_amb_nicks_1st_test_table CHANGE text_string text_string VARCHAR(255) collate utf8_unicode_ci NOT NULL COMMENT 'hey here are mysql comments..' ; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T05:33:55.730

当我解码那个 bas64 字符串时，它以`;<br />`. 如果您使用 PHP 来显示它，请确保使用`htmlentities`，否则浏览器会将 转换`<br />`为换行符而您将看不到它。

您需要查看发送 POST 数据的应用程序。看起来它正在从其输入构造 HTML，因此换行符正在转换为`<br />`.

# c++ - 适用于 Windows、Linux 和 Mac 的 C++ 简单 GUI

> ID：12684879
> 
> 赞同：0
> 
> 时间：2012-10-02T05:14:04.357
> 
> 标签：c++

我正在为 C++ 程序寻找一个简单的 gui。它将用于一个简单的项目，并且必须在没有 dll 之类的文件中。并且必须在 Windows、Linux 和 Mac 上运行。

请原谅我的英语。我正在尽力而为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T05:20:25.607

QT [http://qt-project.org/downloads](http://qt-project.org/downloads)

在 Windows、Linux 和 Mac 上运行。

示例 QT 代码：

```
#include <QApplication>
 #include <QPushButton>

 int main(int argc, char *argv[])
 {
     QApplication app(argc, argv);

     QPushButton hello("Hello world!");
     hello.resize(100, 30);

     hello.show();
     return app.exec();
 } 
```

更多的：

[http://doc.qt.digia.com/3.3/tutorial1-01.html](http://doc.qt.digia.com/3.3/tutorial1-01.html)

[http://linux301.wordpress.com/2009/06/15/hello-world-with-qt/](http://linux301.wordpress.com/2009/06/15/hello-world-with-qt/)

[http://www.greyc.ensicaen.fr/ensicaen/Docs/Qt4/tutorial-t1.html](http://www.greyc.ensicaen.fr/ensicaen/Docs/Qt4/tutorial-t1.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T05:21:51.920

我推荐[WxWidgets 库](http://www.wxwidgets.org/)。你一定要查一下。

它可以在 Windows、Linux 和 mac 上运行。

# c# - 在 C# 中检查图像是否为空白

> ID：12684885
> 
> 赞同：7
> 
> 时间：2012-10-02T05:14:50.707
> 
> 标签：c#, image, pixel

我到处都看过，但似乎没有一个标准（我可以看到）如何检查图像是否为空白。在 C# 中

我有这样做的方法，但很想知道检查图像是否为空白的正确方法是什么，以便将来每个人都可以知道。

我不会复制粘贴一堆代码，如果您愿意，我会很高兴，但我首先想解释一下我如何检查图像是否为空白。

您拍摄 .jpg 图像，获取它的宽度。例如 500 像素然后你将它除以 2 得到 250

然后你检查每个像素的颜色在（250 宽度和 i 高度）的位置（你迭代认为图像的高度。

然后这样做只是垂直检查图像的中间像素线。它会检查所有像素以查看颜色是否为白色以外的任何颜色。我已经这样做了，因此您不必搜索所有 500* 高度的像素，因为您几乎总是会在页面中间遇到一种颜色。

它的工作......有点慢......必须有更好的方法来做到这一点？您可以将其更改为垂直搜索 2/3/4 行，以增加发现非空白页面的机会，但这将花费更长的时间。

（另请注意，在这种情况下，使用图像的大小来检查它是否包含某些内容将不起作用，因为带有两个句子的页面和空白页面的大小彼此太接近）

**加入溶液后。**

帮助实施和理解解决方案的资源。

*   [编写不安全代码 - C 中的指针](http://www.c-sharpcorner.com/UploadFile/gregory_popek/WritingUnsafeCode11102005040251AM/WritingUnsafeCode.aspx)
*   [在 C# 中使用指针](http://www.c-sharpcorner.com/UploadFile/pcurnow/usingpointers10022007082330AM/usingpointers.aspx)
*   [/unsafe（C# 编译器选项）](http://msdn.microsoft.com/en-us/library/ct597kb0.aspx)
*   [Bitmap.LockBits 方法（矩形、ImageLockMode、PixelFormat）](https://docs.microsoft.com/en-us/dotnet/api/system.drawing.bitmap.lockbits)

（请注意，在第一个网站上，所述 Pizelformat 实际上是 Pixelformat） - 我知道的小错误，只是提到，可能会给某些人造成一些混淆。

在我实施了加快像素搜寻的方法后，速度并没有提高多少。所以我会认为我做错了什么。

旧时间 = 15.63，40 张图像。

新时间 = 40 张图像的 15.43

我在 DocMax[引用](https://web.archive.org/web/20141229164101/http://bobpowell.net/lockingbits.aspx)的精彩文章中看到，代码“锁定”在一组像素中。（或者这就是我的理解）所以我所做的就是锁定每页的中间行像素。这是正确的做法吗？

```
private int testPixels(String sourceDir)
    {
         //iterate through images
        string[] fileEntries = Directory.GetFiles(sourceDir).Where(x => x.Contains("JPG")).ToArray();

        var q = from string x in Directory.GetFiles(sourceDir)
                where x.ToLower().EndsWith(".jpg")
                select new FileInfo(x);

        int holder = 1;
        foreach (var z in q)
        {
            Bitmap mybm= Bitmap.FromFile(z.FullName) as Bitmap;
            int blank = getPixelData2(mybm);

            if (blank == 0)
            {
                holder = 0;
                break;
            }
        }
        return holder;
    } 
```

然后上课

```
private unsafe int getPixelData2(Bitmap bm)
        {
            BitmapData bmd = bm.LockBits(new System.Drawing.Rectangle((bm.Width / 2), 0, 1, bm.Height), System.Drawing.Imaging.ImageLockMode.ReadOnly, bm.PixelFormat);

            int blue;
            int green;
            int red;

            int width = bmd.Width / 2;
            for (int y = 0; y < bmd.Height; y++)
            {
                byte* row = (byte*)bmd.Scan0 + (y * bmd.Stride);

                blue = row[width * 3];
                green = row[width * 2];
                red = row[width * 1];

                // Console.WriteLine("Blue= " + blue + " Green= " + green + " Red= " + red);
                //Check to see if there is some form of color
                if ((blue != 255) || (green != 255) || (red != 255))
                {
                    bm.Dispose();
                    return 1;
                }
            }
            bm.Dispose();
            return 0;
        } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T05:34:41.697

如果您可以容忍出错的机会，那么该方法似乎很好；在我的案例中，我做了一些非常相似的事情，尽管我总是有一个视觉确认来处理错误。

对于性能，关键的悬而未决的问题是如何让像素进行测试。如果你使用[`Bitmap.GetPixel`](https://docs.microsoft.com/en-us/dotnet/api/system.drawing.bitmap.getpixel)，你肯定会遇到性能问题。（在 Google 中搜索“ [Bitmap.GetPixel slow](https://www.google.com/search?q=bitmap.getpixel%20slow) ”可以看到很多讨论。）

一次获取所有像素然后循环它们将获得更好的性能。为了清晰和完整，我个人喜欢[Bob Powell 的 LockBits 讨论。](https://web.archive.org/web/20141229164101/http://bobpowell.net/lockingbits.aspx)使用这种方法，根据您的性能需求检查所有像素可能是合理的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T05:49:02.017

如果您使用的是 System.Drawing.Bitmap，您可以通过以下方式（基本上）加快速度：

1.  不使用 GetPixel 访问像素，使用 LockBits 和 UnlockBits 将图像位图复制到常规内存。有关用法，请参阅[MSDN 文档中的示例。](http://msdn.microsoft.com/en-us/library/5ey6h79d.aspx)
2.  不在 for 循环中调用 Width、Height 或 Size 属性。调用 Size 一次，将值存储在局部变量中并在循环中使用它们。

笔记：

1.  使用 System.Drawing.Bitmap 时，您的图像可能在设备内存中，访问它可能会很耗时。
2.  我不记得将图像加载到位图中是否已经将其转换为 RGB 格式，因为其他格式更难以使用，但如果不是这种情况，您可以创建与原始图像大小相同的 RGB 位图，获取它的 Graphic 对象（Graphics.FromImage）并使用 DrawImage 在 RGB 位图中绘制原始图像。

编辑：被 DocMax 击败。

无论如何，为了速度，您还可以尝试使用替代库，例如包含 C# 包装器的优秀[FreeImage 。](http://freeimage.sourceforge.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-04T15:03:50.840

将图像缩放到 1x1，然后检查一个像素

新位图(previousImage, 新尺寸(1, 1));

# iphone - AVCapture 拍照后暂停屏幕

> ID：12684886
> 
> 赞同：1
> 
> 时间：2012-10-02T05:14:51.613
> 
> 标签：iphone, objective-c, ios, avcapture

我使用了 avcapture 的演示示例，我想在拍照后在 viewcontroller 的 imagview 中显示图像我有使用代码

```
{
 ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];

[library enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos usingBlock:^(ALAssetsGroup *group, BOOL *stop) {
    NSInteger numberOfAssets = [group numberOfAssets];
    if (numberOfAssets > 0) {
        NSInteger lastIndex = numberOfAssets-1;
        [group enumerateAssetsAtIndexes:[NSIndexSet indexSetWithIndex:lastIndex] options:0   usingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop) {
            UIImage *thumbnail = [UIImage imageWithCGImage:[result thumbnail]];
            if (thumbnail && thumbnail.size.width > 0) {
                imagviewlastimage.image = thumbnail;
                *stop = YES;
            }
        }];
    }
} failureBlock:^(NSError *error) {
    NSLog(@"error: %@", error);
}]; 
```

从照片库中获取最后一张图片，但我正在获取倒数第二张图片

并在选择我写过的图像后重定向 viewController

```
captureManagerStillImageCaptured:(AVCamCaptureManager *)captureManager delegate

ViewController *temp=[[ViewController alloc]init];

temp.modalTransitionStyle = UIModalTransitionStyleCoverVertical;

[self presentModalViewController:temp animated:YES]; 
```

这么用，怎么解决？拍照后暂停屏幕

# objective-c - xcode - 用户从 iphone 登录到 php

> ID：12684899
> 
> 赞同：2
> 
> 时间：2012-10-02T05:16:00.393
> 
> 标签：objective-c, xcode, ios5, ios6

我在 .m 文件中有一段代码，如下所示：

```
- (IBAction)btnLogin:(UIButton *)sender 
{

    NSString *strURL = [NSString stringWithFormat:@"http://www.myworkingdomain.com/fn_checkLogin2.php?name=%@&pass=%@", self.email.text, self.password.text];

    // to execute php code
    NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];

    // to receive the returend value
    NSString *strResult = [[[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding]autorelease];

    if ([strResult isEqualToString:@"0"]) {
        UIStoryboard *loginFailStoryBoard = [UIStoryboard storyboardWithName:@"loginFailStoryboard" bundle:nil];
        UIViewController *initialFailLogin = [loginFailStoryBoard instantiateInitialViewController];
        initialFailLogin.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        [self presentModalViewController:initialFailLogin animated:YES];
        //NSLog(@"%@", strResult); 
    } else {
        UIStoryboard *memberMenuBoard = [UIStoryboard storyboardWithName:@"memberMenuStoryboard" bundle:nil];
        UIViewController *initialMemberMenu = [memberMenuBoard instantiateInitialViewController];
        initialMemberMenu.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        [self presentModalViewController:initialMemberMenu animated:YES];
        //NSLog(@"%@", strResult);
    }

    NSLog(@"%@", strResult);

}
@end 
```

我试图确定一个人是否输入了正确的电子邮件和密码，然后转到下一个视图。我的`'strResult'`日志中有 ，它表明 php 脚本可以正常工作。现在看来，`if..else`由于部分原因，该语句不起作用`[strResult isEqualToString:@"0"]`

有人可以建议我应该在哪里更改以更正此问题，以便当会员使用正确的密码登录时，他可以进入会员视图？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:27:41.137

@dan 主线程是显示所有 UI 元素的地方。如果您在主线程上启动连接，您的 UI 将变得无响应，直到连接被解决（无法按下按钮，无法滚动等......）为了避免您应该使用另一个线程。还有其他方法可以做到这一点，但下面的代码应该可以在不阻塞用户界面的情况下做到这一点。

```
 NSString *loginString =[NSString stringWithFormat:@"fn_checkLogin2.php?name=%@&pass=%@", self.email.text, self.password.text];

    NSURL *url = [NSURL URLWithString:@"http://www.myworkingdomain.com/"];
    NSMutableURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:url ];

    [urlRequest setTimeoutInterval:30.0f];
    [urlRequest setHTTPMethod:@"POST"];
    [urlRequest setHTTPBody:[loginString dataUsingEncoding:NSUTF8StringEncoding]];

    NSOperationQueue *queue= [[NSOperationQueue alloc] init];

    [NSURLConnection sendAsynchronousRequest:urlRequest queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error){
        if ([data length]>0 && error==nil) {
            NSString *html = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
            NSLog(@"HTML = %@",html);
        }
    }
     ]; 
```

因此，如果返回数据，您可以做一些事情，如果连接失败，您可以做其他事情而不会阻塞您的 UI。

# asp.net - 使用带有 Facebook C#sdk 的 Facebook 开放图形 api 发布对象时出错

> ID：12684904
> 
> 赞同：0
> 
> 时间：2012-10-02T05:16:20.560
> 
> 标签：asp.net, asp.net-mvc-3, facebook-graph-api, facebook-c#-sdk, oauth-2.0

我正在使用以下代码使用开放图将我的对象发布到 facebook，但是自 2 天以来，我对以下错误感到目瞪口呆。早期回复非常有价值，谢谢 S。

使用的技术：Asp.net mvc3 & C#

```
FacebookClient fb = new FacebookClient("AppID", "AppSecret");
            fb.AccessToken = "AccessToken";

            var parameters = new Dictionary<string, object>
                                 {
                                     {"og:type", "appnamespace:object"},
                                     {"og:url", "objecturl"},
                                     {
                                         "blog", "url-to-post"
                                     }
                                 };

            try
            {
                var Response = fb.Post("https://graph.facebook.com/me/namespace:objecturl", parameters);
            }
            catch (FacebookApiException ex)
            {
            } 
```

异常：(OAuthException) (#100) 应用程序 276304102435847 不拥有 175053105965645 操作类型

在此先感谢，

# android - 旋转后如何获取TextView的精确点（矩形）

> ID：12684908
> 
> 赞同：1
> 
> 时间：2012-10-02T05:16:44.197
> 
> 标签：android, rotation, textview

我正在尝试在 textview 中获取文本的确切位置，当旋转为 0'、180'、360' 时，我通过此代码获得了文本在 textview 中的位置

fTranslationX 和 fTranslationY 是 MOtionEvent 的 event.getX 和 event.getY

```
 Rect rect = new Rect();
    rect.left = (int) fTranslationX;
    rect.top = (int) fTranslationY;
    rect.right = (int) (fTranslationX + getTextWidth());
    rect.bottom = (int) (fTranslationY + getLineHeight()); 
```

我的 TextView 是自定义的，所以旋转后我无法获得旋转的 Rect，我的文本被旋转但 Rect 保持在同一点！！如何在 TextView 中获取旋转文本的 Rect（TextView 的宽度 = 高度 = fill_parent）

任何想法？

# javascript - 使用组合的 Build/Cesium.js 而不是单独的 .js 文件

> ID：12684914
> 
> 赞同：3
> 
> 时间：2012-10-02T05:17:24.200
> 
> 标签：javascript, dojo, cesium

我一直在兜圈子，试图让[Cesium](http://cesium.agi.com/)依赖项在从 " [combined](https://github.com/AnalyticalGraphicsInc/cesium/wiki/Quick-Start) "导入时不导入`Cesium.js`。

我已经将这段代码带到了正确找到铯文件路径的阶段，但它正在加载100个文件，而不仅仅是组合`Build/Cesium.js`和`CesiumViewerWidget`（似乎不包含在组合中）。例如，它加载的众多文件之一`Source/Core/Clock.js`是内置于`Build/Cesium.js`.

我如何告诉 dojo 或`CesiumViewerWidget`假设核心依赖项已经存在？

我正在使用 Rails 运行它，因此是`/assets/`路径。

我正在使用的代码：

```
<script src="/assets/cesium/Build/Cesium.js" type="text/javascript"></script>
<script src="//ajax.googleapis.com/ajax/libs/dojo/1.8.0/dojo/dojo.js" type="text/javascript"></script>

require({
    baseUrl: '/assets/cesium/Source/Widgets',
    packages: [
        // {name: 'Cesium', location: '../../Build/Cesium'},
        {name: 'Widgets/Dojo/CesiumViewerWidget'},
        // {name: 'dojo/on', location: 'dojo/on'},
        // {name: 'dojo/dom', location: 'dojo/dom'},
        // {name: 'dojo/io-query', location: 'dojo/io-query'}
    ]},
    [
        'Widgets/Dojo/CesiumViewerWidget',
        'dojo/on', 'dojo/dom', 'dojo/io-query'
    ], function(CesiumViewerWidget, on, dom, ioQuery) {
}) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T01:10:37.060

在 cesium-dev 邮件列表上询问后，我得到了[答案](https://groups.google.com/forum/#!topic/cesium-dev/rDdNTHWjY0s)。

基本上，组合`Cesium.js`并不意味着与 dojo`require()`依赖项一起使用。这是一个删除依赖关系并使用包含组合文件`Cesium`时可用的全局对象的问题。`Cesium.js`

# vb.net - 如何使用参数启动exe

> ID：12684915
> 
> 赞同：2
> 
> 时间：2012-10-02T05:17:45.793
> 
> 标签：vb.net, exec, parameter-passing

我是 Visual Basic 的新手。我正在使用 VB Premium 2012。有没有办法可以`exe`使用参数打开/启动文件（不是我的应用程序）。我知道我们可以使用`echo`和其他东西在批处理编码中做到这一点。可以在vb中完成吗？

我想打开“ `app.exe`”，参数为“ `-login usernamehere passwordhere`”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T05:39:45.390

尝试这个

```
Dim pHelp As New ProcessStartInfo
pHelp.FileName = "YourApplication.exe"
pHelp.Arguments = "parameter1,parameter2"
pHelp.UseShellExecute = True
pHelp.WindowStyle = ProcessWindowStyle.Normal
Dim proc As Process = Process.Start(pHelp) 
```

我希望这有帮助...

# android - 为什么我们使用 Context 为 Android 中的其他类创建对象？

> ID：12684917
> 
> 赞同：2
> 
> 时间：2012-10-02T05:17:50.610
> 
> 标签：android, android-context

在某些地方，我们给出了类似“DatabaseUtil db=new DatabaseUtil(DailyPlanView.this);” 其中 DatabaseUtil 是类，构造函数参数是上下文。但是，如果我们在 DailyPlanVIew 类中为 DatabaseUtil 类创建对象，我们将使用上面的代码。我的疑问是上下文的用途是什么，而不是传递上下文对象作为我们传递“this”的参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T05:38:30.027

每当您处理 Context 时，了解它在所有事物中的用途很重要。从使用数据库到获取系统服务。这是 android 使用 Context 的方式所必需的。具体来说，当您传递时，`this`您基本上传递的是封装此语句的类。

```
class MyActivity extends Activity
{

     onCreate(Bundle bundle)
     {
        View v = new View(this);
     }
} 
```

传递`this`是指封装它的对象。这是一个面向对象的概念......在哪里`this`引用`MyActivity`. 传递上下文时要记住的一件事是确保传递正确的类型。某些 Context 对象的寿命比其他对象长**，如果管理不当，可能会导致 Context 泄漏**。特别是在这个例子中，这是有效的，因为 Activity 扩展了 Context。

差异出现在 View 类中。

`getApplicationContext()`

`getBaseContext()`

`this`，在活动的上下文中具有活动的生命周期（上面的示例）

关于 Context 要添加的一件事是，它基本上是对当前应用程序的引用，它是特定数据。

可以在此线程中找到有关上下文的更多信息： [Android 上的“上下文”是什么？](https://stackoverflow.com/questions/3572463/what-is-context-in-android)

# php - 购物车框架

> ID：12684919
> 
> 赞同：0
> 
> 时间：2012-10-02T05:18:06.680
> 
> 标签：php, codeigniter, shopping-cart

我的任务是建立一个卖书的购物车。我想寻求帮助，让我在正确的方向上从这里去哪里。

据我所见，我可以通过两种方式做购物车：

*   使用 CI 框架并从头开始构建站点。
*   使用现有的购物车系统并从那里构建。

做 CI 的问题是它非常乏味。你基本上是从头开始构建的。所以这需要时间，而且这是我第一次构建购物车。第二个选项似乎没问题。我为什么要重新发明轮子这么说。唯一的问题是找到合适的开源购物车，它有据可查，可供我开始使用。

所以基于我有的两个选择。如果您认为是第二种选择，您能否建议（如果您之前创建过购物车）一个简单且代码库类似于 CI 的购物车应用程序。我发现 OpenCart 没问题，但我想在开始之前寻求其他建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T06:42:15.907

这里有很多事情需要考虑。

*   你的编程经验是什么？
    *   您以前使用过大型 Web 应用程序吗？（我想说几乎所有的在线商店都可以被认为是大型网络应用程序）
    *   您是否使用过支付集成？
    *   您是否曾在设置托管环境方面工作过？
*   您的项目的预算是多少？
*   你是唯一一个在这个项目上工作的人吗？
*   您的客户对成品的期望是什么？
*   当商店在线时，谁来管理托管、支持、维护等？

建立在线商店绝非易事。一个像这样流程的小商店`add product to cart -> go to checkout -> pay using a third part payment provider`可以很容易和快速地完成。但这里有一些更多的考虑：

*   运输方式，应该有多种吗？
*   该站点必须处理多个国家/地区，在这种情况下，您必须考虑增值税、再次运输等。
*   付款方式：信用卡、短信、发票、贝宝，不胜枚举。应该提供哪些服务？如果您希望直接实现（SSL 证书等），这将需要一个良好的托管环境。
*   在后端处理订单、退货和产品
*   折扣功能，例如折扣码
*   能够销售捆绑在一起的多种产品。

我可以继续一段时间，让列表越来越具体，但我真的没有时间这样做:) 这只是为了向你展示，在构建时有很多因素可以发挥作用一个在线商店。

## [Magento](http://www.magentocommerce.com/)

如果您是经验丰富的开发人员并且熟悉 Zend 框架（它是基于该框架构建的），那么这是一个很好的选择。看看 Magento 的[功能](http://www.magentocommerce.com/product/enterprise-features)，如果您知道如何正确自定义它，Magento 几乎一切皆有可能。如果您不熟悉它并且学习曲线非常陡峭，这不是一件容易的事。

**如果您没有经验或商店不需要所有高级功能，这是一个糟糕的选择。**这是一种资源消耗，如果您不知道您的缓存，您将度过一段糟糕的时光。

## [Shopify](http://www.shopify.com/)

如果您需要在稳定的环境中快速设置在线商店，并且您可以满足他们提供的[功能](http://www.shopify.com/tour/sell-online)，我会说这是您的最佳选择。好吧，实际上我会说至少 90% 的时间，这将是最好的选择。

您不必担心支付实施、后端开发、支持、托管以及所有其他相关的事情。

## 结论

我在这里只列出了 2 个选项，一个是高级的，一个是简单的。我认为您应该真正研究不同的选择。看看他们的功能，他们的成本等。然后你必须考虑到你完成商店所需的时间。

至少我希望我能给你一些观点，如果你对我写的内容有任何疑问，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T05:37:40.113

我推荐 Zend Framework 来构建购物车网站。如果您想从现有工具构建，请使用 Magento。在此处检查[前端](http://demo.magentocommerce.com/) 和[管理端](http://demo-admin.magentocommerce.com/index.php/admin/)

您可以创建自定义模块或下载免费模块，也可以从 magento 购买开发模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T05:40:37.123

你有几个选择

1.  Magento
2.  打开购物车

它们都是为电子商务而构建的。

毫无疑问，Magento 很慢，opencart 很快，但不如 Magento 最好。

如果您的应用程序范围有限，您可以在 CI 中构建应用程序，我知道它会比这两者都快。

但是从编程的角度来看，它总是更好的是已经构建而不是从头开始。

# android - 下载完整的 Android 示例应用程序以进行分析

> ID：12684924
> 
> 赞同：0
> 
> 时间：2012-10-02T05:19:00.377
> 
> 标签：android, r.java-file, motodev-studio

一段时间以来，我一直在尝试从[http://f-droid.org/repository/browse/获取示例应用程序。](http://f-droid.org/repository/browse/)我只是想测试这个应用程序，看看它是如何工作的并更好地理解它。每次我尝试下载一个时，我点击“源代码”并得到一个看起来类似于 BitBucket 的屏幕（我不知道如何从中下载），或者我得到一个命令提示符命令，它可以让我得到正确的代码，但由于某种原因或其他有关 R.java 问题的代码不会运行。

该网站上的代码应该已经可以工作了，所以我猜它是我正在做的事情。我只是将文件复制到我的 IDE（Motodev Studio）中，并在我试图摆脱看似微不足道的错误后清理项目。但是，当我弄乱它时，IDE 指出 R.java 无法解析。我知道为什么会这样的问题已经在这个网站上被问过很多次了，所以我只是假设错误出在我身上而不是 IDE 上。有没有一种特殊的方法可以从网站上获取这些完整的样本？有没有更容易获得完整样本的网站？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:26:37.340

您没有提及有关您尝试下载和编译/运行的示例应用程序的任何内容。从名为[Abstract Art](http://f-droid.org/repository/browse/?fdid=net.georgewhiteside.android.abstractart&fdpage=1)[的页面中](http://f-droid.org/repository/browse/)随机选择一个示例，有一个**源代码**链接可将您带到代码存储库。从代码存储库（在本例中为 Github），您可以下载包含源代码的压缩文件夹。解压缩并导入您的 IDE。Motodev Studio 应该有教程，可以帮助您导入下载和编译的代码。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T05:29:20.997

您将需要了解源代码控制，因为该站点上的各种应用程序要么使用 git、subversion 或 mercurial。这些版本控制系统中的每一个都有大量教程，因此值得您花时间学习。

或者下载并解压每个页面上应该有源的“tarball”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T05:37:21.630

下载 tar.gz 文件后

*   解压/解压文件
*   在日食

    文件->导入->将现有项目放入工作区->给出路径并单击浏览，然后单击完成

*   将在您的工作区中创建一个具有项目名称的文件夹。

*   通过右键单击项目检查项目属性并为项目设置目标
*   由于`@override`. 所以删除它
*   运行项目**

# ruby-on-rails - 活动记录对象的动态字段名称

> ID：12684930
> 
> 赞同：1
> 
> 时间：2012-10-02T05:19:56.773
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我有这段代码，我可以在其中动态获取字段名称。

```
field_name = #code to get field name as string 
```

然后我循环遍历一组活动记录对象

```
results. each do |record| 
   puts "#{record.field_name}"
end 
```

我如何评估将语句放入 ruby​​ 中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T05:26:21.230

红宝石方式：`record.send(field_name)`

ActiveRecord 的另一种方式：`record[field_name]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T05:22:51.503

采用[`send`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)

```
results.each do |record| 
  puts "#{record.send(field_name)}"
end 
```

# html - html5 kineticjs 绘制多条线

> ID：12684934
> 
> 赞同：1
> 
> 时间：2012-10-02T05:20:32.393
> 
> 标签：html, canvas, drawing, kineticjs

如此处发现： [KineticJS - 用鼠标画线](https://stackoverflow.com/questions/12311535/kineticjs-drawing-lines-with-mouse)

KineticJs 非常适合绘制线条、形状和拖放它们。实际示例重绘总是同一条线，我想知道如何在舞台上绘制多条线（不再可编辑）以便将绘制导出为图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T07:53:08.027

您可以创建一个新行并将其添加到鼠标按下的图层中。

```
 stage.on("mousedown", function(){
            if (moving){
                moving = false;layer.draw();
            } else {
                var mousePos = stage.getMousePosition();
                //CHANGED - Create new line
                line = new Kinetic.Line({
                    points: [0, 0, 50, 50],
                    stroke: "red"
                });
                //CHANGED - Add line to layer
                layer.add(line);
                //start point and end point are the same
                line.getPoints()[0].x = mousePos.x;
                line.getPoints()[0].y = mousePos.y;
                line.getPoints()[1].x = mousePos.x;
                line.getPoints()[1].y = mousePos.y;

                moving = true;    
                layer.drawScene();            
            }

        }); 
```

检查演示：http: [//jsfiddle.net/QTsgn/](http://jsfiddle.net/QTsgn/)

# linux - 在 plesk 11 linux 服务器(Media Temple) 上启用 php-mssql

> ID：12684935
> 
> 赞同：1
> 
> 时间：2012-10-02T05:21:00.390
> 
> 标签：linux, sql-server-2005, plesk, mediatemple, dedicated-server

我需要使用 php 连接到 mssql 和 MySQL。所以我尝试使用 yum install my-mssql 启用扩展 php-mssql，当我支持 PHP 5 时，它说缺少 php-api。并建议改用php5.3，在我切换后，它得到错误php54-common is conflicted with php-common。

# asp.net - 我应该在这种情况下使用 azure connect

> ID：12684938
> 
> 赞同：0
> 
> 时间：2012-10-02T05:21:11.297
> 
> 标签：asp.net, azure, acs, azure-connect

我托管在 windows azure 上的 web 应用程序需要与 TFS 服务器通信。我的 webroles 使用类似于 (http://ed12-ektfsp-01:8080/tfs/eeol/ ) 的 uri 连接到 TFS 在 azure 上，我发现我的 webrole 无法与 tfs 服务器通信。

1.  我是否需要为我的 azure webrole 启用“azure connect”才能与 tfs 通信？
2.  我是否需要远程访问我的 tfs 服务器并将 azure connect 安装到我的 TFS 服务器中以启用 azure connect？
3.  为什么 azure 无法使用“http://ed12-ektfsp-01:8080/tfs/eeol/”进行通信？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T06:48:57.517

您的 Web 应用程序不知道服务器**ed12-ektfsp-01**（我假设这是您的数据中心/内部网络中的服务器）。但是有一些选项可以让您的 Web 应用程序连接到此服务器，即使它不是托管在 Windows Azure 中：

*   配置防火墙以允许来自 Internet 的流量到达服务器 ed12-ektfsp-01。这可能是您不想做的事情，除非服务器已经可用（也许对于在家工作的开发人员）。然后不要使用机器名称，而是使用公共域（如 tfs.mycompany.com）（如果可用）。
*   就像您已经提到的那样，使用 Windows Azure Connect。这允许您在角色和数据中心/内部网络之间创建安全隧道。即使 ed12-ektfsp-01 没有通过防火墙暴露在互联网上，您也可以连接到它。为了使其工作，您需要在要连接到您的角色[的每台服务器上安装代理，这包括您的 TFS 服务器。](http://msdn.microsoft.com/en-us/library/windowsazure/gg508836.aspx#EnableLocal)
*   您可以将您的角色连接到虚拟网络。然后，您可以使用本地 VPN 设备创建到此虚拟网络的站点到站点 VPN 连接。请参阅此处的教程：[为跨界连接创建虚拟网络](https://www.windowsazure.com/en-us/manage/services/networking/cross-premises-connectivity/)
*   您可以使用[服务总线中继](https://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-relay/)。这允许您创建一个调用 TFS 的 WCF 服务并将该服务托管在您的数据中心/网络中，但将其发布到云中。您的 Web 应用程序将能够使用 WCF 服务，就像它托管在 Windows Azure 中一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T06:49:50.630

请看看我对[这个问题](https://stackoverflow.com/questions/12668768/using-windows-azure-connect/12669792#12669792)的回答。

至于你的具体问题：

> 我是否需要为我的 azure webrole 启用“azure connect”才能与 tfs 通信？

是的。

> 我是否需要远程访问我的 tfs 服务器并将 azure connect 安装到我的 TFS 服务器中以启用 azure connect？

是的。并将 WebRole 和 TFS 服务器添加到单个连接组中。

> 为什么 azure 无法使用“ [http://ed12-ektfsp-01:8080/tfs/eeol/](http://ed12-ektfsp-01:8080/tfs/eeol/) ”进行通信？

因为所提供的地址仅在您的公司网络内是已知的，并且只能由公司的 DNS 服务器解析。外面的任何人都无法访问此地址。

# java - 忘记在 Java 中关闭服务器套接字

> ID：12684939
> 
> 赞同：0
> 
> 时间：2012-10-02T05:21:18.473
> 
> 标签：java, sockets, serversocket

当您忘记`ServerSocket`在 Java 中关闭 a 时会发生什么？JVM 或 TCP/IP 堆栈会自动为您关闭它吗？

此外，当您关闭 a 时`ServerSocket`，它是否还会关闭`Socket`它通过该`accept`方法产生的所有关联连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T05:23:07.737

当 JVM 终止时，所有资源将被操作系统关闭并释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T05:45:47.413

> 当您忘记在 Java 中关闭 ServerSocket 时会发生什么？

GC 将最终确定 ServerSocket 最终将其关闭，但您不能说何时会发生（或者可能永远不会发生）

> JVM 或 TCP/IP 堆栈会自动为您关闭它吗？

它的JVM。TCP/IP 堆栈不知道应该关闭它。

> 此外，当您关闭 ServerSocket 时，它是否还会关闭它通过 accept 方法产生的所有关联的 Socket 连接？

ServerSocket 用于建立连接，一旦被接受，它与在客户端创建的连接没有什么不同。关闭服务器套接字对接受的连接没有影响。（将关闭那些没有被接受的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T10:11:14.797

> JVM 或 TCP/IP 堆栈会自动为您关闭它吗？

如果它被垃圾收集，JVM 可能会关闭它。当进程退出时，TCP/IP 堆栈将关闭它。您没有说明您期望该操作在什么条件下发生，因此不可能更具体。

> 当你关闭一个 ServerSocket 时，它是否也会关闭它通过 accept 方法产生的所有关联的 Socket 连接？

当然不。

# android - 无法启用 ActionbarSherlock

> ID：12684940
> 
> 赞同：0
> 
> 时间：2012-10-02T05:21:42.047
> 
> 标签：android, android-actionbar, actionbarsherlock

按照说明，我下载了 ABS 4.1，从 library/ 文件夹中的现有资源创建了一个新项目。一旦我这样做，日志中就会弹出一些错误：

```
[2012-10-02 10:47:30 - library] Unable to resolve target 'android-14' 
```

伴随着大量错误：

```
[2012-10-02 10:34:40 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for C:\Users\****\Documents\Code\Eclipse\Ferric\AndroidManifest.xml: The markup in the document following the root element must be well-formed. 
```

据我推测，这是因为我没有设置正确的目标 SDK 版本。我应该在图书馆里做这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T05:41:34.830

在 Eclipse 中，Project -> Properties -> Android 并检查 Android 4.0 或更高版本。

# android - 创建套接字时出错？

> ID：12684942
> 
> 赞同：1
> 
> 时间：2012-10-02T05:21:54.790
> 
> 标签：android, sockets, runtime-error

我正在尝试在 android 设备上创建套接字连接。但是一旦我编写`Socket s = new Socket("192.168.1.126",3000)`并运行它就会给我错误

```
FATAL EXCEPTION: main
10-01 16:18:55.509: E/AndroidRuntime(15664): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.senddata1/com.example.senddata1.SendData1}: java.lang.NullPointerException: println needs a message
10-01 16:18:55.509: E/AndroidRuntime(15664):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1818)
10-01 16:18:55.509: E/AndroidRuntime(15664):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1834)
10-01 16:18:55.509: E/AndroidRuntime(15664):    at android.app.ActivityThread.access$500(ActivityThread.java:122)
10-01 16:18:55.509: E/AndroidRuntime(15664):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1027)
10-01 16:18:55.509: E/AndroidRuntime(15664):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-01 16:18:55.509: E/AndroidRuntime(15664):    at android.os.Looper.loop(Looper.java:132)
10-01 16:18:55.509: E/AndroidRuntime(15664):    at android.app.ActivityThread.main(ActivityThread.java:4126)
10-01 16:18:55.509: E/AndroidRuntime(15664):    at java.lang.reflect.Method.invokeNative(Native Method)
10-01 16:18:55.509: E/AndroidRuntime(15664):    at java.lang.reflect.Method.invoke(Method.java:491)
10-01 16:18:55.509: E/AndroidRuntime(15664):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
10-01 16:18:55.509: E/AndroidRuntime(15664):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
10-01 16:18:55.509: E/AndroidRuntime(15664):    at dalvik.system.NativeStart.main(Native Method)
10-01 16:18:55.509: E/AndroidRuntime(15664): Caused by: java.lang.NullPointerException: println needs a message
10-01 16:18:55.509: E/AndroidRuntime(15664):    at android.util.Log.println_native(Native Method)
10-01 16:18:55.509: E/AndroidRuntime(15664):    at android.util.Log.e(Log.java:230)
10-01 16:18:55.509: E/AndroidRuntime(15664):    at com.example.senddata1.SendData1.onCreate(SendData1.java:66)
10-01 16:18:55.509: E/AndroidRuntime(15664):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1050)
10-01 16:18:55.509: E/AndroidRuntime(15664):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1782)
10-01 16:18:55.509: E/AndroidRuntime(15664):    ... 11 more 
```

请帮我解决我面临的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:19:53.723

您不能像这样直接传递 IP 地址。您必须将其转换为 InetAddress 类型

```
private String ip="192.168.1.126";
InetAddress serveradd =  InetAddress.getByName(ip);
socket=new DatagramSocket(6000,serveradd); 
```

Tt 将为 udp 连接创建套接字，或者您可以使用

```
Socket s=new Socket(serveradd,3000) 
```

# ruby - SimpleCov 0% 覆盖率

> ID：12684945
> 
> 赞同：9
> 
> 时间：2012-10-02T05:22:18.270
> 
> 标签：ruby, gem, code-coverage

我正在研究一个小宝石，并将[simplecov 包含](https://github.com/colszowka/simplecov)在`spec_helper.rb`两行中：

```
require 'simplecov'
SimpleCov.start 
```

当我运行 rspec 测试时，simplecov 似乎正确启动，但报告不是：

```
Finished in 0.00214 seconds
8 examples, 0 failures

Coverage report generated for /home/...... 
spec to /home/megas/Work/calc/coverage. 0 / 0 LOC (0.0%) covered. 
```

可能是什么问题以及如何解决？谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-02T07:17:21.507

还要确保在文件的开头启用 simplecov ( **aka** ) `SimpleCov.start`；特别是在您需要您的代码之前。

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-21T17:57:33.237

我有同样的症状。我的问题是在我的测试文件中：

```
#spec/oneclass_spec.rb
require 'oneclass'
require 'spec_helper'

...Rest of the test file 
```

我需要将`require`s 的顺序更改为：

```
#spec/oneclass_spec.rb
require 'spec_helper'
require 'oneclass'

...Rest of the test file 
```

希望这对某人有帮助，我快疯了......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-25T19:50:17.607

万一上述两个答案不起作用（如我的情况），simplecov 的 github 问题页面上的用户建议这样做，这对我有用。

在你需要 simplecov- 之后添加这个

```
module SimpleCov::Configuration
  def clean_filters
    @filters = []
  end
end

SimpleCov.configure do
  clean_filters
  load_adapter 'test_frameworks'
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-03T17:57:20.280

如果上述方法之一不起作用。

在 test.rb 中验证：

```
config.eager_load = false 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-09T17:40:44.523

就我而言，问题是春天 - 我必须`config/spring.rb`使用以下内容创建一个：

```
if ENV['RAILS_ENV'] == 'test'
  require 'simplecov'
  SimpleCov.start
end 
```

如此[处所述](https://github.com/colszowka/simplecov#want-to-use-spring-with-simplecov)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-13T13:53:39.063

我正在从命令行运行脚本，我发现解决方案只是在我的脚本末尾放置一个**出口。**嗬！

或者，以下也适用

```
SimpleCov.at_exit do
  SimpleCov.result.format!
end 
```**

# objective-c - 如何在用户关闭它之前继续播放 UILocalNotification 声音？

> ID：12684950
> 
> 赞同：0
> 
> 时间：2012-10-02T05:22:55.773
> 
> 标签：objective-c, ios, uilocalnotification

如标题所示，我`UILocalNotification`用于警报目的。但声音只播放一次。

我想一直播放声音，直到用户关闭通知。那可能吗？

如果可能，请发布一些示例代码。

多个通知当然可以，但我想让通知中心保持整洁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:17:42.133

您可以有一分钟的重复间隔。然后有一个声音播放 30 秒。在闹钟再次响起之前，当然会有 30 秒的静默。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:01:30.720

将 设置`fireDate`为该特定时间，并将警报设置`repeatInterval`为`NSDayCalendarUnit`并安排警报`[[UIApplication sharedApplication] scheduleLocalNotification: myNotification];`

# c# - 列表 添加值时抛出空引用异常

> ID：12684954
> 
> 赞同：0
> 
> 时间：2012-10-02T05:23:23.993
> 
> 标签：c#, collections, ilist, icollection

我有一堂课：

```
public class ClientModelData
{
    public int clientID { get; set; }
    public IList<int> LocationIDs { get; set; }
} 
```

当我调用它时：

```
ClientModelData obj = new ClientModelData();
obj.LocationIDs.Add(1); 
```

它抛出一个异常：

```
`((System.Collections.Generic.ICollection<int>)(client.LocationID))' is null` 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T05:25:45.633

`LocationIDs`未初始化，因此它会给您错误。

```
public IList<int> LocationIDs { get; set; } 
```

您应该在构造函数中创建一个实例

```
public ClientModelData()
{
  LocationIDs = new List<int>();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T05:26:47.570

您应该使用实际对象初始化列表，例如在构造函数中。将此添加到您的课程中：

```
public ClientModelData()
{
   LocationIDs = new List<int>();
} 
```

# java - GAE：如何为长时间工作过程配置 backends.xml

> ID：12684958
> 
> 赞同：3
> 
> 时间：2012-10-02T05:24:06.170
> 
> 标签：java, google-app-engine

在我的 java 应用程序中，我每天使用 cron 作业处理一个缺少的数据，但无法正确处理 cron 作业（DeadLineExceedException），并且 10 分钟不足以完成该过程。所以我想将进程切换到 backends.xml。但我不知道如何移动 backends.xml。移至后端后，如何在固定时间启动该过程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T12:22:53.387

如果我理解正确，您希望您的 Cron 作业在您的后端执行，以便在处理作业时有更长的期限。您可以在[cron.xml](https://developers.google.com/appengine/docs/java/config/cron#About_cron_xml)`<target>[backend_version]</target>`中添加cron 作业定义，以便在应用程序的特定版本中执行 cron。

结合您的[backends.xml](https://developers.google.com/appengine/docs/java/config/backends#About_backends)文件，这意味着您可以按照以下示例配置这两个文件：

> **后端.xml**
> 
> ```
> <backends>
> <backend name="longtimeworker">
>     <class>B1</class>
>     <instances>1</instances>
> </backend> 
> ```

和

> **cron.xml**
> 
> ```
> <cronentries>
> <cron>
>     <url>/longtimeworkingprocesshandler</url>
>     <schedule>every 12 hours</schedule>
>     <target>longtimeworker</target>
> </cron> 
> ```

这样，您可以将您的 cron 配置为在`longtimeworker`后端执行。

# php - 返回true，使用switch时返回false

> ID：12684960
> 
> 赞同：-2
> 
> 时间：2012-10-02T05:24:30.707
> 
> 标签：php

我试图让开关返回真或假，但我似乎在某个地方失败了。我一直在说假话。我完全迷路了。这实际上应该有效。我怎样才能做到这一点？

```
if (validNum(1))
{echo 'Ok';}else{echo 'Fail';}

function validNum($x)
{
switch ($x)
{
case 1:
  echo "Number 1";
  break;
  return true;

case 2:
  echo "Number 2";
  break;
  return true;
case 3:
  echo "Number 3";
  break;
  return true;

default:
  echo "No number between 1 and 3";
  return false;
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T05:34:27.913

我会把它改写到下面。它将三种情况合并在一起，避免使用`break`否则会超出您的`switch`. 基本上，`return`你不需要`break`.

```
switch ($x)
{
  case 1:
  case 2:
  case 3:
    echo "Number $x";
    return true;

  default:
    echo "No number between 1 and 3";
    return false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T05:26:54.683

的全部意义`break`在于它跳出`case`. 你永远达不到你的`return`陈述。您永远不需要在一个案例中都`return` *这样做。* `break`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T05:27:36.510

你在`break`你的`return`. 它永远不会击中`return`.

# lift - 覆盖 CloudBees 的提升版本

> ID：12684961
> 
> 赞同：1
> 
> 时间：2012-10-02T05:24:45.553
> 
> 标签：lift, cloudbees

目前 CloudBees 的默认 Lift 版本是 2.4，这是您在使用 Lift ClickStart 时得到的。使用 Lift 2.5-M1 的最佳方法是什么？创建一个 ClickStart 并覆盖默认版本，还是其他方式？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:39:01.283

Clickstart 被设计为“可分叉”和可更新的 - 如果您想使用更新的提升版本 - 请查看：

[https://github.com/CloudBees-community/lift_template](https://github.com/CloudBees-community/lift_template)

fork 它，更改 pom.xml（因为它当前使用 maven 构建类型）** - 使用适当的版本，并推送您的更改。

然后，您可以通过将如下 URL 粘贴到浏览器中来重新运行 clickstart

[https://grandcentral.cloudbees.com/#CB_clickstart=https://raw.github.com/YOUR_GITHUB_ACCOUNT/lift_template/master/clickstart.json](https://grandcentral.cloudbees.com/#CB_clickstart=https://raw.github.com/YOUR_GITHUB_ACCOUNT/lift_template/master/clickstart.json)

它将使用较新的版本。如果你愿意，可以提交一个拉取请求——这样它是最新的，以备将来使用。

如果您创建了现有的应用程序 - 您可以克隆 git 存储库，更新 pom.xml 并推送它 - 然后它将为您更新您的应用程序。

这是制作自己的 ClickStart 的指南：[http ://wiki.cloudbees.com/bin/view/RUN/How+to+make+your+own+Clickstart](http://wiki.cloudbees.com/bin/view/RUN/How+to+make+your+own+Clickstart)

# hadoop - HADOOP_HOME 和 hadoop 流

> ID：12684963
> 
> 赞同：2
> 
> 时间：2012-10-02T05:24:49.720
> 
> 标签：hadoop, hadoop-streaming

嗨，我正在尝试在安装了 hadoop 的服务器上运行 hadoop，但我不知道 hadoop 所在的目录。服务器由服务器管理员配置。

为了加载 hadoop，我使用了 dotkit 包中的 use 命令。

可能有几种解决方案，但想知道 hadoop 包的安装位置、如何设置 $HADOOP_HOME 变量以及如何运行 hadoop 流式作业，例如 $HADOOP_HOME/bin/hadoop jar $HADOOP_HOME/mapred/contrib /streaming/hadoop-streaming.jar，又名，`http://wiki.apache.org/hadoop/HadoopStreaming`.

谢谢！任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T10:39:43.683

如果您使用的是 cloudera 发行版，那么它最有可能在 中`/usr/lib/hadoop`，否则它可能在任何地方（由您的系统管理员决定）。

您可以使用一些技巧来尝试找到它：

1.  `locate hadoop-env.sh`（假设已经安装了 locate 并且最近运行了 updatedb ）
2.  如果您正在运行它的机器正在运行 hadoop 服务（例如数据节点、作业跟踪器、任务跟踪器、名称节点），那么您可以为 hadoop 命令执行进程列表和 grep：`ps axww | grep hadoop`
3.  以上两个都失败了，在一些常见的位置寻找hadoop根目录，例如：`/usr/lib`,,,`/usr/local``/opt`
4.  失败所有这一切，并假设您当前的用户具有权限：`find / -name hadoop-env.sh`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T10:16:19.153

如果您使用 rpm 安装，那么它很可能在`/etc/hadoop`.

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-11-13T22:46:59.987

你为什么不试试：

`echo $HADOOP_HOME`

显然，必须先设置上述环境变量，然后才能从盒子上的任何位置发出 hadoop 可执行文件。

# r - 绘制时间序列的样本

> ID：12684967
> 
> 赞同：2
> 
> 时间：2012-10-02T05:25:11.763
> 
> 标签：r, ggplot2, time-series

我有一个数据集，其中包含连续四天的每一秒的观察结果（大约 340'000 个数据点）。这太多了，无法在散点图中显示。我只想绘制一个统一的样本，比如 2000 个时间点。

`ggplot2`是否可以通过“图形语法”方法来实现这一点？我还没有找到任何内置的“采样”修饰符，但也许写一个很容易？

```
library(ggplot2)

x <- 1:100000
d <- data.frame(x=x, y=rnorm(length(x)))
ggplot(d[sample(x, 2000), ], aes(x=x, y=y)) + geom_point() 
```

这就是通过修改传递给 ggplot 的数据来“破解”它的方式。但我不想修改数据，只需过滤它以仅包含一个样本。

```
ggplot(d, aes(x=x, y=y)) + ??? + geom_point() 
```

**编辑**：我专门寻找采样，而不是平滑或分箱。我拥有的数据显示了模拟特定过程的一秒钟所需的时间。模拟已经并行化，对于每个模拟秒，我都有所涉及的每个内核的运行时间（总共 8 个）。我想通过仅绘制原始数据点来显示次优负载平衡。采样的原因只是 300'000 个数据点对于散点图来说太多了：绘图时间太长而且可视化效果不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T06:28:14.850

如果您想为大数据创建散点图，这里有几个`ggplot2` 选项

他们来自[哈德利的这门课程](http://courses.had.co.nz/11-rice/slides/01-basics.pdf)

```
# upload all images to imgur.com
opts_chunk$set(fig.width = 5, fig.height = 5, dev = "png")
render_markdown(strict = T)

# some autocorrelated data
set.seed(1)
x <- 1:1e+05
d <- data.frame(x = x)
d$y <- arima.sim(list(order = c(1, 1, 0), ar = 0.9), n = 1e+05 - 1)
# the basic plot 
base_plot <- ggplot(d, aes(x = x, y = y)) 
```

# geom_bin2d

您可以`binwidth`为`x`和`y`变量设置

```
base_plot + geom_bin2d(binwidth = c(200, 5)) 
```

![在此处输入图像描述](../Images/7b8a52f09654ae1c60aae50579a72607.png)

# geom_hex

你可以设置数量`bins`

```
base_plot + geom_hex(bins = 200) 
```

![在此处输入图像描述](../Images/e029639c7d8b26974c39dcdf0517f7d7.png)

# 小点

停止过度绘图

```
base_plot + geom_point(size = I(".")) 
```

![在此处输入图像描述](../Images/34610bf2bec043b347cea107ab2bf911.png)

# 使用更平滑的

这依赖于一种平滑方法，可以在不崩溃或花费太长时间的情况下获得所需的细节。在这种情况下，节数是通过反复试验选择的（也许你会想要更多细节）

```
library(mgcv)
base_plot + stat_smooth(method = "gam", formula = y ~ s(x, k = 50)) 
```

![在此处输入图像描述](../Images/beba7f1228acb1f1033ad52697cce6fd.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T08:16:20.793

您可以`geom_point`使用 data 参数在调用中使用子集：

```
... + geom_point(data=d[sample(x,2000),]) 
```

这样，您可以使用所有数据自由添加其他几何图形，例如，使用示例数据：

```
ggplot(d, aes(x=x, y=y)) + geom_hex() + geom_point(data=d[sample(x,2000),]) 
```

![hexbin 和采样点](../Images/22c448e374177db5b5b6d13ce5e54cfe.png)

# java - 在 logica SMPP 异步模式下关联对请求的响应

> ID：12684968
> 
> 赞同：3
> 
> 时间：2012-10-02T05:25:15.843
> 
> 标签：java, smpp

我正在尝试使用 logica SMPP API 实现 SMPP 客户端。

我面临的问题是，如何在异步模式下将请求 pdu 与响应 pdu 映射？我想我可以使用 CommandId 和序列号来做到这一点。但是logica模拟器返回的CommandId不等于请求的CommandId。

例子 ：

```
Enquire Link Comman ID (Request) = 21
Enquire Link Comman ID (async response from simulator) = -2147483627 
```

请告诉我如何在异步模式下将请求事件与响应事件映射。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T05:36:09.143

查看第 16 页的[协议定义 PDF](http://opensmpp.logica.com/CommonPart/Documentation/external/SMPP-IF-SPEC.v3.3.pdf)表 6.1，您会发现用于关联的字段不是`CommandID`（定义请求的类型）而是`Sequence No`.

从文件：

> 允许关联请求和响应的序列号。此参考编号的分配是发起者的责任，发起者应确保该编号对于每个提交的请求都是单调递增的。相关的响应包必须保留该字段。

# jquery-animate - Raphaeljs 动画 onmouseout 问题

> ID：12684971
> 
> 赞同：0
> 
> 时间：2012-10-02T05:25:36.513
> 
> 标签：jquery-animate, raphael, onmouseover, onmouseout

我有这段代码，其中 onmouseout 和 onmouseover 事件的颜色会发生变化。但是，如果我将鼠标快速移到这些框上，则 onmouseover 功能将无法正常工作并且不会改变颜色。可能是什么问题呢？

JS小提琴[代码](http://jsfiddle.net/PrXEM/)

```
window.onload = function() {
    var paper = Raphael(0, 0, 640, 540);

    for (i = 0; i < 2; i++) {
        for (j = 0; j < 2; j++) {
            (function(i, j) {
                var boxes = paper.rect(0 + (j * 320), 0 + (i * 270), 320, 270).attr({
                    fill: '#303030',
                    stroke: 'white'
                });
                boxes.node.onmouseover = function() {
                    boxes.animate({fill:'red'},500);
                };
                boxes.node.onmouseout = function() {
                    boxes.animate({fill:'#303030'},300);
                };
            })(i, j);
        }
    }
}​ 
```

> *编辑：即使我快速移动鼠标，如何确保动画仅应用于 1 个框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T05:29:27.627

鼠标悬停动画比鼠标悬停动画长 200 毫秒，因此如果鼠标悬停和鼠标悬停的总时间少于 200 毫秒，动画将并行运行，鼠标悬停动画最后完成，留下红色。

相反，`.stop()`在每个之前添加一个`.animate`以阻止动画竞争：

```
 boxes.node.onmouseover = function() {
                boxes.stop().animate({fill:'red'},500);
            };
            boxes.node.onmouseout = function() {
                boxes.stop().animate({fill:'#303030'},300);
            }; 
```

见：http: [//jsfiddle.net/Eheqc/1/](http://jsfiddle.net/Eheqc/1/)

# entity-framework - EF 中的问题，映射片段，无默认值且不可为空

> ID：12684972
> 
> 赞同：4
> 
> 时间：2012-10-02T05:25:37.903
> 
> 标签：entity-framework, entity-framework-4, entity-framework-4.1, entity-relationship

我正在开发 MVC 3 应用程序。

我有模型优先的方法。

我有公司实体（摘要）。Lead 和 Customer 继承自公司实体。

当我试图验证模型时，它给出了一个错误。

> 错误 41 错误 3023：从第 70 行开始映射片段时出现问题：必须映射表 Companies 中的列 Companies.Status：它没有默认值且不可为空。

这是表的映射。

![在此处输入图像描述](../Images/169c3c0df231c3635f23d89006b17109.png)

这是 HTML 视图中的 EDMX 代码。

```
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx Version="2.0" xmlns:edmx="http://schemas.microsoft.com/ado/2008/10/edmx">
  <!-- EF Runtime content -->
  <edmx:Runtime>
    <!-- SSDL content -->
    <edmx:StorageModels>
    <Schema Namespace="Model1.Store" Alias="Self" Provider="System.Data.SqlClient" ProviderManifestToken="2008" xmlns="http://schemas.microsoft.com/ado/2009/02/edm/ssdl" xmlns:store="http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator">
    <EntityContainer Name="Model1StoreContainer">

        <EntitySet Name="Companies" EntityType="Model1.Store.Companies" store:Type="Tables" Schema="dbo" />

    </EntityContainer>

    <EntityType Name="Companies">
        <Key>
            <PropertyRef Name="Id" />
        </Key>
        <Property Name="Id" Type="int" StoreGeneratedPattern="Identity" Nullable="false" />
        <Property Name="Name" Type="nvarchar(max)" Nullable="false" />
        <Property Name="Status" Type="nvarchar(max)" Nullable="false" />
        <Property Name="__Disc__" Type="nvarchar" MaxLength="Max" Nullable="false" />
    </EntityType>
</Schema></edmx:StorageModels>
    <!-- CSDL content -->
    <edmx:ConceptualModels>
      <Schema xmlns="http://schemas.microsoft.com/ado/2008/09/edm" xmlns:cg="http://schemas.microsoft.com/ado/2006/04/codegeneration" xmlns:store="http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator" Namespace="Model1" Alias="Self" xmlns:annotation="http://schemas.microsoft.com/ado/2009/02/edm/annotation">
        <EntityContainer Name="Model1Container" annotation:LazyLoadingEnabled="true">
          <EntitySet Name="Companies" EntityType="Model1.Company" />
          </EntityContainer>
        <EntityType Name="Company" Abstract="true">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Type="Int32" Name="Id" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Type="String" Name="Name" Nullable="false" />
        </EntityType>
        <EntityType Name="Lead" BaseType="Model1.Company" >
          <Property Type="String" Name="Status" Nullable="false" />
        </EntityType>
      </Schema>
    </edmx:ConceptualModels>
    <!-- C-S mapping content -->
    <edmx:Mappings>
    <Mapping Space="C-S" xmlns="http://schemas.microsoft.com/ado/2008/09/mapping/cs">
    <EntityContainerMapping StorageEntityContainer="Model1StoreContainer" CdmEntityContainer="Model1Container">
        <EntitySetMapping Name="Companies">
            <EntityTypeMapping TypeName="IsTypeOf(Model1.Company)">
                <MappingFragment StoreEntitySet="Companies">
                    <ScalarProperty Name="Id" ColumnName="Id" />
                    <ScalarProperty Name="Name" ColumnName="Name" />
                    <Condition ColumnName="__Disc__" Value="Company" />
                </MappingFragment>
            </EntityTypeMapping>
            <EntityTypeMapping TypeName="Model1.Lead">
                <MappingFragment StoreEntitySet="Companies">
                    <ScalarProperty Name="Id" ColumnName="Id" />
                    <ScalarProperty Name="Name" ColumnName="Name" />
                    <ScalarProperty Name="Status" ColumnName="Status" />
                    <Condition ColumnName="__Disc__" Value="Lead" />
                </MappingFragment>
            </EntityTypeMapping>
        </EntitySetMapping>
    </EntityContainerMapping>
</Mapping></edmx:Mappings>
  </edmx:Runtime>
  <!-- EF Designer content (DO NOT EDIT MANUALLY BELOW HERE) -->
  <edmx:Designer xmlns="http://schemas.microsoft.com/ado/2008/10/edmx">
    <edmx:Connection>
      <DesignerInfoPropertySet>
        <DesignerProperty Name="MetadataArtifactProcessing" Value="EmbedInOutputAssembly" />
      </DesignerInfoPropertySet>
    </edmx:Connection>
    <edmx:Options>
      <DesignerInfoPropertySet>
        <DesignerProperty Name="ValidateOnBuild" Value="true" />
        <DesignerProperty Name="EnablePluralization" Value="True" />
        <DesignerProperty Name="DatabaseGenerationWorkflow" Value="$(VSEFTools)\DBGen\Generate T-SQL Via T4 (TPH).xaml" />
      </DesignerInfoPropertySet>
    </edmx:Options>
    <!-- Diagram content (shape and connector positions) -->
    <edmx:Diagrams>
      <Diagram Name="Model1" >
        <EntityTypeShape EntityType="Model1.Company" Width="1.5" PointX="2.375" PointY="0.875" Height="1.2636116536458335" />
        <EntityTypeShape EntityType="Model1.Lead" Width="1.5" PointX="3.375" PointY="2.625" Height="1.0992643229166665" />
        <InheritanceConnector EntityType="Model1.Lead" >
          <ConnectorPoint PointX="3.125" PointY="2.1386116536458335" />
          <ConnectorPoint PointX="3.125" PointY="2.325" />
          <ConnectorPoint PointX="4.125" PointY="2.325" />
          <ConnectorPoint PointX="4.125" PointY="2.625" />
        </InheritanceConnector>
        </Diagram>
    </edmx:Diagrams>
  </edmx:Designer>
</edmx:Edmx> 
```

有什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-08T17:58:25.937

Put the DefaultValue attribute on the SSDL Status property. It would look like this (I used the empty string):

```
<Property Name="Status" Type="nvarchar(max)" Nullable="false" DefaultValue=""/> 
```

Since the base entity is abstract you won't be able to create entities of this type so this DefaultValue will not really be used but it should make EF stop complaining.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:49:06.147

在您的存储模型中，Company.Status 列不允许空值。

由于从 Company 继承的所有实体（Lead 实体除外）都不会设置 Status 属性，因此您需要在 Companies.Status 列中允许 null 或设置用于其他实体的默认值。

# sql - PostgreSQL 链接表

> ID：12684981
> 
> 赞同：1
> 
> 时间：2012-10-02T05:26:13.853
> 
> 标签：sql, postgresql, entity-relationship

我有这个七表数据库存储具有历史价值的区域（例如旧墓地或石器时代的房屋遗址），可以划分为子区域。对这些地区进行了检查和挖掘。区域、子区域、检查和挖掘这四个表都可以有一个或多个“位置”或“发现”。

位置表和查找表目前与链接表相关，链接表包含目标表的名称和该表中的目标 ID，例如`target_table="subarea", target_id=5`.

问题是在数据库中存储表名是我的理解不是好的做法。那么，将位置和查找与四个表中的任何一个的 N-1 关系联系起来的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:50:01.800

有很多不同的方法可以做到这一点。我的解决方案使用了 PostgreSQL 的一些有争议的特性，因此请参阅下面的注意事项。

```
CREATE TABLE link_categories (
    id int not null unique,
    label text primary key
);

INSERT INTO link_categories(id, label)
VALUES (1, 'Area'), 
       (2, 'Sub-area'),
       (3, 'Inspection'),
       (4, 'Excavation');

CREATE TABLE location_base (
   -- add your base fields here
   link_category int not null,
   refkey bigint not null -- assume all id's on the other tables are bigints?
);

CREATE TABLE finding_base (
  -- add your base fields here
   link_category int not null,
  refkey bigint not null -- see above
); 
```

然后我会使用表继承来创建子表，以管理您的多态关联。

```
CREATE TABLE location_area (
   CHECK (link_category = 1),
   FOREIGN KEY (refkey) REFERENCES area(id),
   PRIMARY KEY (...) -- needs to be repeated for each child table
) INHERITS (location_base);

CREATE TABLE location_subarea (
   CHECK (link_category = 2),
   FOREIGN KEY (refkey) REFERENCES subarea(id),
   PRIMARY KEY (...) -- needs to be repeated for each child table
) INHERITS (location_base); 
```

等对结果表重复

请注意，表继承在 PostgreSQL 上是一个颇有争议的特性。您需要考虑利用表继承的一些底层怪癖来发挥您的优势，并像表分区系统一样实现它。请注意，在这种情况下，link_category 基本上成为主键的一部分。

但是，在使用此解决方案之前，请阅读 PostgreSQL 文档：

*   [DDL继承](http://www.postgresql.org/docs/9.0/static/ddl-inherit.html)注意注意事项！
*   [表分区](http://www.postgresql.org/docs/9.0/static/ddl-partitioning.html)
*   另请阅读[我关于表继承的博客文章](http://ledgersmbdev.blogspot.com/2012/08/postgresql-or-modelling-part-3-table.html)

请注意，这是一个有点危险的特性，但多态关联通常会带来危险。我在这里特别推荐这个，因为我认为它可以简化你的失败案例，即使它是以牺牲其他一些东西为代价的。

# default-value - 为什么 AutoHotkey 不支持参数列表中间的默认参数？

> ID：12684985
> 
> 赞同：6
> 
> 时间：2012-10-02T05:26:44.980
> 
> 标签：default-value, autohotkey, optional-parameters

在 AutoHotkey 中，您可以在内置函数调用中间省略参数，如下所示：

```
MsgBox, 4,, Blah
MouseGetPos,,, MouseWin 
```

您还可以使用 C++ 中的可选参数创建函数：

```
Foobar(baz, blah="something")
{
  MsgBox baz=%baz%, blah=%blah%
} 
```

但是[文档](http://www.autohotkey.com/docs/Functions.htm#optional)说，当你创建一个函数时，你不能在默认参数之后有非默认参数。尝试这样做会导致解释器错误，指出默认参数之后的第一个非默认参数需要默认值。

为什么？这样称呼有什么问题？

```
Foobar(baz, blah="something", blivet)
{
  MsgBox baz=%baz%, blah=%blah%, blivet=%blivet%
}

Foobar("cat",,"dog") 
```

有没有办法在中间创建带有可选参数的函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T00:15:18.397

当您在内置*命令*（不是函数）中省略参数时，您真正要做的是传递一个空字符串。这两种情况是有区别的：

*   使用可选参数定义函数，后跟强制参数。
*   调用带有省略的可选参数的命令，后跟未被省略的可选参数。

对于 MsgBox 和 MouseGetPos，所有参数都是可选的。

AutoHotkey 1.1 允许以下用户定义函数：

```
Foobar(1,, 3)
Foobar(baz, blah="something", blivet="")
{
    MsgBox baz=%baz%, blah=%blah%, blivet=%blivet%
} 
```

这只有在参数的默认值已知时才有可能（即在动态调用函数时不行）。

* * *

**允许省略中间参数**

如果您不想更改参数的顺序或使三个中的两个可选，您可以做一些“杂耍”：

```
Foobar("baz", "blivet")
Foobar("baz", "blah", "blivet")
Foobar(baz, p2, p3="omitted")
{
    blah := p3="omitted" ? "default" : p2   ; optional
    blivet := p3="omitted" ? p2 : p3        ; required
    MsgBox baz=%baz%, blah=%blah%, blivet=%blivet%
} 
```

这样，该函数始终需要至少两个参数，并且在**调用**该函数时，您实际上可以省略中间的参数。但是，您需要保留一个（字符串或数字）值来指示参数已被省略。AutoHotkey 1.1 可以通过使用[可变参数函数](http://l.autohotkey.net/docs/Functions.htm#Variadic)来避免这种情况：

```
Foobar("baz", "blivet")
Foobar("baz", "blah", "blivet")
Foobar(baz, p2, p3*)
{
    blah := p3.MaxIndex() ? p2 : "default"   ; optional
    blivet := p3.MaxIndex() ? p3[1] : p2     ; required
    MsgBox baz=%baz%, blah=%blah%, blivet=%blivet%
} 
```

或者，可以将函数声明为`Foobar(baz, p*)`，并且您可以将条件基于`p.MaxIndex()`（附加参数的数量），但在这种情况下，只有第一个参数是强制性的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T03:23:17.203

两个选项...（解决方法...）

**1.把所有有默认值的参数放在右边...**

```
Foobar(baz, blivet, blah="something")
{
  MsgBox baz=%baz%, blah=%blah%, blivet=%blivet%
}

Foobar("cat","dog") 
```

**2.定义一个“空”的默认值...**

```
Foobar(baz, blah="something", blivet="")
{
  MsgBox baz=%baz%, blah=%blah%, blivet=%blivet%
}

Foobar("cat",,"dog") 
```

我不能说为什么会这样，但现在，没有其他办法......（除非你修改 autohotkey :P ）
我猜内置函数的工作方式不同。

# visual-studio - 在 Visual Studio 中创建一个新的 TypeScript 项目

> ID：12684987
> 
> 赞同：62
> 
> 时间：2012-10-02T05:26:49.270
> 
> 标签：visual-studio, typescript

如何开始在 Visual Studio 中编写 TypeScript 项目？当我创建一个新项目时，没有选择。我安装了 Visual Studio 2012 和 TypeScript 插件

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-02T09:36:27.607

我刚刚找到了解决方案：**手动安装 VS-Extension。**

在某种程度上，没有安装 VS-Extension。您可以手动完成。有一个`.vsix`文件位于`C:\Program Files (x86)\Microsoft SDKs\TypeScript\0.8.0.0`名为`TypeScriptLanguageService.vsix`. 尝试运行此文件。它应该安装 TypeScript 扩展。

如果您正在运行基于 x86 的系统，请尝试查看`C:\Program Files\Microsoft SDKs\TypeScript\0.8.0.0`.

为我工作。现在我可以创建 TypeScript 项目，它列在 Visual Studio 扩展列表中。

请注意，较新版本的 TypeScript 删除了该文件夹`0.8.0.0`。您可能会`.vsix`在`C:\Program Files (x86)\Microsoft SDKs\TypeScript`.

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-02T08:58:25.217

您可以使用 Add > New Item 对话框将 TypeScript 文件添加到现有项目中。

![在此处输入图像描述](../Images/6955e6a41016dca6994a04036def5c85.png)

您还可以使用“添加”>“新建项目”对话框使用 TypeScript 创建类型为 HTML 应用程序的项目。此项目类型位于 Installed->(Templates)->Visual C# 下。

![在此处输入图像描述](../Images/476330496e51cad12c64e115a7f8df8c.png)

如果 Visual Studio 中缺少这些选项，您应该尝试重新安装[TypeScript Visual Studio 插件](http://go.microsoft.com/fwlink/?LinkID=266563)。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-06-15T12:11:47.913

如果您使用 Visual Studio 2017，则模板“带有 TypeScript 的 HTML 应用程序”已从模板中删除。

但是你可以在 Github 上安装 rich-newman 制作的扩展：[https ://github.com/rich-newman/typescript-html-application-vs2017-template](https://github.com/rich-newman/typescript-html-application-vs2017-template)

要安装它，请执行以下操作：

*   转到“添加新项目”窗口
*   在左侧转到左侧树视图中的“在线”
*   搜索“TypeScript HTML 应用程序模板” [![在此处输入图像描述](../Images/78f29270620dbd2d9f939ecd159f11a6.png)](https://i.stack.imgur.com/75oY6.png)
*   安装扩展，模板应该在“已安装 --> TypeScript”下可用

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-10-02T23:30:34.457

遵循其他答案，但在 Win7 64 w/VS 2010 上安装 TypeScriptSetup.0.8.0.msi 后找不到 TypeScriptLanguageService.vsix。

要在 VS 2010 上安装，请使用[7zip](http://www.7-zip.org/)打开上述 msi 并提取“TypeScriptLS.vsix_File”，删除尾随 _File，然后照常运行。

这提供了一个新的 TypeScript 项目模板（但不是神秘的文件模板）、智能感知、代码突出显示等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T09:50:45.683

我也没有项目和 ts 文件模板，尝试重新安装它（仅通过运行 vsix 文件）没有帮助，所以我 1\. 卸载（从 VS2012 管理器）扩展 2\. 关闭 VS2012 然后安装它再次，瞧——项目和文件模板神奇地出现了。感谢上帝，它起作用了——我可以开始使用这种语言，而不必每次都手动运行转编译。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-25T08:30:42.653

对于 0.9.1.1 版本，我能够按照此处的说明使其工作：[http](http://typescript.codeplex.com/wikipage?title=Compile-on-Save) ://typescript.codeplex.com/wikipage?title=Compile-on-Save 。

刚刚在 Web Essentials 2012 3.0 上禁用了对 Typescript 的支持：http: [//vswebessentials.com/changelog](http://vswebessentials.com/changelog)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-02T06:02:01.700

安装 typescript 会添加新的项目类型以及为现有项目添加文件类型。安装好打字稿后，您可以尝试在新项目窗口中搜索“打字稿”。它向我显示“带有 TypeScript 的 HTML 应用程序”。

每个 .ts 文件 typescript 文件都会添加一个依赖的 .js 文件。

希望这可以帮助！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-01T12:39:47.773

老帖子，新建议：

我在 Win8/VS2012 上的这个问题上花了几个小时。在多次安装/重新安装（Typescript 插件 v 0.8.3）之后，有效的一件事**是以管理员模式运行 VS2012**并（重新）安装**Web Essentials 2012**。这对我有用，我得到了 Typescript 作为它自己的部分`Add New Project...`（以及上面提到的所有其他好东西）。

让我想起*在管理员模式下运行的*是更新文档的过程（如果你想在本地安装文档），它也有一个令人讨厌的神秘错误。以管理员模式运行也是答案。

您不必一直在管理员模式下运行，这可能是更新 IDE 本身（新插件等）时的一个好习惯。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-09-11T07:53:20.567

另一个提示 - 您需要安装 Visual Studio for Web。它不适用于 VS for Desktop。另外，你需要在VS之后安装插件，所以如果你先安装了插件，请卸载它然后重新安装。

# arrays - 访问数组和对象

> ID：12684989
> 
> 赞同：-2
> 
> 时间：2012-10-02T05:27:13.290
> 
> 标签：arrays, codeigniter, object, foreach

我在打印数据时遇到问题。在我的程序中，我得到对象中的数据并放入一个数组中。说 array1[$id] = 数据对象。整个 array1 然后将被放入 array2['list'] 像 array2['list'] = array1;

问题是我如何获取 id、name 和 description 等数据。这是整个数组的 print_r：

这实际上是数组的结果，我不知道如何访问它。我想获取并获取名称并打印它们：

```
Array ( 
[list] => Array ( 
    [0] => Array ( 
        [0] => stdClass Object ( 
            [id] => 1 
            [name] => harry potter 4 
            [description] => harry potter and the goblet of fire book by j.k. rowling 
            [unit_price] => 300.99 
        ) 
    ) 
    [1] => Array (
        [0] => stdClass Object ( 
            [id] => 4
            [name] => lipton tea
            [description] => yellow label tea
            [unit_price] => 15.00 
        ) 
    ) 
    [2] => Array (
        [0] => stdClass Object (
            [id] => 9
            [name] => tisyu
            [description] => tissue twenty pieces
            [unit_price] => 20.00
        ) 
    )

) 

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:34:33.957

您必须通过以下方式访问它们：

```
foreach($array['list'] as $array_item){
    $object = $array_item[0];

    echo $object->id."<br />";
    echo $object->name."<br />";
    echo $object->description."<br />";
    echo $object->unit_price."<br />";
} 
```

这将产生：

```
1
harry potter 4
harry potter and the goblet of fire book by j.k. rowling
300.99
4
lipton tea
yellow label tea
15.00
9
tisyu
tussue twenty pieces
20.00 
```

您可以使用 -> 运算符访问对象属性，后跟要访问的属性。

# path-finding - A* 寻路：陷入困境，现在怎么办？

> ID：12684996
> 
> 赞同：1
> 
> 时间：2012-10-02T05:29:02.310
> 
> 标签：path-finding, shortest-path, a-star

我正在编写一个塔防游戏，并且我正在实现教程中的 A* 寻路算法等等，但是我遇到了一个我无法编写代码的情况！考虑下图。青色节点代表目前发现的最短路径，紫色节点代表已检查节点，深灰色节点代表一堵墙。

根据我对 A* 算法的了解，要计算以下情况的路径，它...

1.  从“start”开始并检查上层节点是否可用。这是。它计算其 G 和 H 分数。它对右、下和左节点执行相同的操作。
2.  发现右节点的 F 分数最低 (F = G + H)。然后它重复与步骤 #1 相同的方法来查找下一个节点，将“开始”节点标记为父节点。
3.  继续这种模式并落在“C 陷阱”中心的节点上，因为该节点迄今为止的 F 分数最低。
4.  发现上、右、下、左节点全部闭合。A* 然后将该节点标记为已关闭并重新开始，理解不要理会该节点。

**#4 之后会发生什么？** A* 会沿着同一条路径重新检查 G 和 H 分数，跳过那个新关闭的节点吗？[此外，当使用此 SWF](http://theory.stanford.edu/~amitp/game-programming/a-star-flash/main-square.swf)绘制此场景时，表明发现了更多节点来弥补陷阱，如此[处建议](http://8bitboobs.com/stuff/situation1_solution.png)的那样。为什么？

![A* 问题的图形](../Images/34516209b2f9d85fa00cc681f42f00dd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:23:05.693

您似乎缺少的是，A* 不像单个单元沿着网格移动，并且在撞到墙壁时会回溯；它更像是一个观察者在查看图表周围的各个节点，总是考虑下一个“最有可能”在最短路径中的节点。

所以，上面的第 4 步永远不会发生。当 A* 确定它不能成为最佳路径的一部分时，它不会将节点标记为已关闭 - 它只是将它访问的每个节点放在`closed`列表中，只要它访问它。而且它永远不会“重新开始”——它总是查看下一个“最有可能”的节点，其中“最有可能”是指按 .排序的[优先级队列](http://en.wikipedia.org/wiki/Priority_queue)`f(x)`的前面。

因此，在上面的示例中，A* 接下来将跳转到其中一个蓝色节点，因为它们都在`open`列表中，并且都具有相同的`f(x)`值。虽然它可以在技术上考虑接下来的任何一个，但如果您使用[正确的打破平局标准](http://theory.stanford.edu/~amitp/GameProgramming/Heuristics.html#breaking-ties)，它将采用最接近结束的两个之一。

# android - 在用户操作应用程序时更新 Android SQLite 数据库表并避免错误/糟糕的用户体验

> ID：12684999
> 
> 赞同：2
> 
> 时间：2012-10-02T05:29:18.437
> 
> 标签：android, sqlite

我的 Android 应用程序在用户安装它时预先填充的 SQLite 数据库中有一个产品表。可以从 Azure Web 服务更新该表。

我不想只从 Web 服务返回更新的记录并用更新的记录填充 SQLite 表，我只想将 2900 条记录返回给应用程序。这是因为大多数产品都会发生变化。打开应用程序时，使用 SQL 查询删除产品表，并将 ksoap2 响应发送到插入数据库的产品对象。

虽然产品表的更新正在发生，但我希望用户能够在不中断的情况下使用该应用程序。如果 Products 表已被删除，那么他们将无法正常运行 App。

我有哪些选择？我可以填充一个临时产品表，当服务完成填充它时，我可以将它复制到“实时”产品表中。或者我可以完全删除产品表并将临时表重命名为“产品”吗？

还是我完全错了。任何建议将不胜感激。代码摘录如下：

```
 try {

          productDatasource.open();
          productDatasource.deleteProductTable();
          productDatasource.close();
          ArrayList<Product> arrProduct = new ArrayList<Product>();
          SoapObject request = new SoapObject(NAMESPACE, PRODUCT_METHOD_NAME); 

         SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
         envelope.dotNet = true;
         envelope.setOutputSoapObject(request);
         System.out.println("startit");
         HttpTransportSE ht = new HttpTransportSE(URL);
         ht.debug = true;
         ht.call(SOAP_ACTION_PRODUCT, envelope);

         SoapObject response = (SoapObject) envelope.getResponse();

         productDatasource.open();
         productDatasource.deleteProductTable();
         Product[] products = new Product[response.getPropertyCount()];

         for (int i = 0; i < products.length; i++) {

             SoapObject prodObj = (SoapObject)response.getProperty(i);
             Product product = new Product();

             product.setProductID(Integer.parseInt(prodObj.getProperty(10).toString()));
             product.setProductName(prodObj.getProperty(11).toString());
             product.setFKCategoryID(Integer.parseInt(prodObj.getProperty(5).toString()));
             product.setFKSubCategoryID(Integer.parseInt(prodObj.getProperty(13).toString()));
             product.setFKBrandID(Integer.parseInt(prodObj.getProperty(2).toString()));      

             productDatasource.createProduct(product);
         } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:20:27.827

DBHelper 类遵循 Respsitory 模式。对底层数据的访问包含在“存储库”类中。这释放了您的主要逻辑以专注于业务逻辑并将所有数据处理责任推到存储库中。根据您的应用程序的复杂性，存储库可能充当“门面”，其中调用被简单地代理到负责域对象的存储库。

下面的代码为 DBHelper 创建了一个非常简单的模板

```
public class DBHelper 
{

    Context context;
    private SQLiteDatabase db;
    private final String DB_NAME = "MYDataBase";
    private final int DB_VERSION = 1;
    private final String TABLE_NAME = "Animal";
    private final String TABLE_ROW_ID = "id";
    private final String TABLE_ROW_ONE = "animal_name";
    private final String TABLE_ROW_TWO = "animal_bio";

    public DBHelper(Context context)
    {
        this.context = context;
        CustomSQLiteOpenHelper helper = new CustomSQLiteOpenHelper(context);
        this.db = helper.getWritableDatabase();
    }

    public static byte[] getBitmapAsByteArray(Bitmap bitmap)
     {
        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
        bitmap.compress(CompressFormat.PNG, 0, outputStream);       
        return outputStream.toByteArray();
    }   

    public void addRow(String name, String bio)
    {

        ContentValues values = new ContentValues();
        values.put(TABLE_ROW_ONE, name);
        values.put(TABLE_ROW_TWO, bio);

        try
        {
            db.insert(TABLE_NAME, null, values);
            Log.w("database message","Insert successfully");
        }
        catch(Exception e)
        {
            Log.e("DB ERROR", e.toString());
            //e.printStackTrace();
        }
    }
    public void deleteRow(long rowID)
    {
        try 
        {
            db.delete(TABLE_NAME, TABLE_ROW_ID + "=" + rowID, null);
                Log.w("database message","delete successfully");
        }
        catch (Exception e)
        {
            Log.e("DB ERROR", e.toString());
            e.printStackTrace();
        }
    }

    public void updateRow(long rowID,String name,String bio)
    {

        ContentValues values = new ContentValues();
        values.put(TABLE_ROW_ONE, name);
        values.put(TABLE_ROW_TWO, bio);

        try 
        {
            db.update(TABLE_NAME, values, TABLE_ROW_ID + "=" + rowID, null);
            Log.w("database message","Update successfully");
        }
        catch (Exception e)
        {
            Log.e("DB Error", e.toString());
            e.printStackTrace();
        }
    }
    public int count_row()
    {
        int row=0;
            Cursor cursor;

        try
        {
                    cursor = db.query(
                    TABLE_NAME,
                    new String[]{TABLE_ROW_ID, TABLE_ROW_ONE, TABLE_ROW_TWO},
                    null, null, null, null, null
            );

            cursor.moveToFirst();

            if (!cursor.isAfterLast())
            {
                do
                {
                    row++;
                }

                while (cursor.moveToNext());
            }
        }
        catch (SQLException e)
        {
            Log.e("DB Error", e.toString());
            e.printStackTrace();
        }
    Log.w("row count..",""+row);
        return row;
    }

    public void getRow(long rowID)
    {
        Cursor cursor;

        try
        {
            cursor = db.query
            (
                    TABLE_NAME,
                    new String[] { TABLE_ROW_ID, TABLE_ROW_ONE, TABLE_ROW_TWO},
                    TABLE_ROW_ID + "=" + rowID,
                    null, null, null, null, null
            );

            cursor.moveToFirst();

            if (!cursor.isAfterLast())
            {
                do
                {                   
                    Log.w("row ",""+cursor.getLong(0));
                    Log.w("row ",""+cursor.getString(1));
                    Log.w("row ",""+cursor.getFloat(2));

                }

                while (cursor.moveToNext());
            }
            cursor.close();
        }
        catch (SQLException e) 
        {
            Log.e("DB ERROR", e.toString());
            e.printStackTrace();
        }
    }
    public void getAllRows()
    {

        int i=0;
            Cursor cursor;

        try
        {
                    cursor = db.query(
                    TABLE_NAME,
                    new String[]{TABLE_ROW_ID, TABLE_ROW_ONE, TABLE_ROW_TWO},
                    null, null, null, null, null
            );

            cursor.moveToFirst();

            if (!cursor.isAfterLast())
            {
                do
                {
                    Log.w("row "+i,""+cursor.getLong(0));
                    Log.w("row "+i,""+cursor.getString(1));
                    Log.w("row "+i,""+cursor.getFloat(2));

                    i++;
                }

                while (cursor.moveToNext());
            }
        }
        catch (SQLException e)
        {
            Log.e("DB Error", e.toString());
            e.printStackTrace();
        }

    }
    private class CustomSQLiteOpenHelper extends SQLiteOpenHelper
    {
        public CustomSQLiteOpenHelper(Context context)
        {
            super(context, DB_NAME, null, DB_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db)
        {
            String newTableQueryString = "create table " +
                                        TABLE_NAME +
                                        " (" +
                                        TABLE_ROW_ID + " integer primary key autoincrement not null," +
                                        TABLE_ROW_ONE + " text," +
                                        TABLE_ROW_TWO + " text" +
                                        ");";
                db.execSQL(newTableQueryString);

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
        {

        }
    }
} 
```

公共无效 onCreate(Bundle savedInstanceState) {

```
 super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    DBHelper database = new DBHelper(this);
    database.addRow("name1","bio1"); 
    database.addRow("name2","bio2");        
    database.addRow("name3","bio3"); 
    database.addRow("name4","bio4"); 
    database.addRow("name5","bio5");

    database.getAllRows();

    database.updateRow(2,"name20","bio20");

    database.getAllRows();

    database.deleteRow(2);

    database.getAllRows();
} 
```

更多详细信息 [http://mel-tools.mit.edu/code/SimpleContentProvider/doc/edu/mit/mobile/android/content/class-use/DBHelper.html](http://mel-tools.mit.edu/code/SimpleContentProvider/doc/edu/mit/mobile/android/content/class-use/DBHelper.html)

在您的应用程序中复制 DBHelper 类我希望它有用.....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:27:16.913

将 ContentProvider 与 CursorLoader 一起使用，以便您的 UI 在内容更新时保持流畅。使用 BulkInsert 更快地添加行。如果您可以只更新记录而不是替换它们，那么添加一个列，让您将记录标记为需要更新。有关在 Android 上开始使用 SQL 数据库的信息，请参阅[http://developer.android.com/guide/topics/data/data-storage.html#db](http://developer.android.com/guide/topics/data/data-storage.html#db)和[http://developer.android.com/training/basics/数据存储/databases.html](http://developer.android.com/training/basics/data-storage/databases.html)。