# StackOverflow 问答 14045000-14045999

# php - putItem 在新的 PHP AWS 开发工具包中失败

> ID：14045003
> 
> 赞同：0
> 
> 时间：2012-12-26T19:05:15.083
> 
> 标签：php, amazon-web-services, amazon-dynamodb

我正在尝试学习 PHP AWS SDK，我将它正确安装在我的系统中并配置了访问密钥和密钥，我还使用控制台登录并创建了表。

我现在要做的是添加一行！就那么简单！我将 Amazon DynamoDB 书下载到我的 Kindle 并尝试阅读 API，但可能在新版本中发生了一些变化，因为任何地方都没有 AmazonDynamoDB 类。

到目前为止，这是我的代码。

```
$dynamodb = DynamoDbClient::factory(array(
        'key'    => AWS_ACCESS_KEY,
        'secret' => AWS_SECRET_KEY,
        'region' => Region::US_EAST_1
 ));

 $dynamodb->putItem(array('TableName'=>'LoginToken',
        'Item'=>array(
                'Uid' => array(AmazonDynamoDB::TYPE_NUMBER =>  $uid),
                'OAuth_Token' => array (AmazonDynamoDB::TYPE_STRING => $oauth_token),
                'IpAdress' => array (AmazonDynamoDB::TYPE_STRING => $ip_address)
                )
        )); 
```

我试图 grep 整个供应商目录，似乎这个类真的不存在。我该如何进行？如何正确添加一行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T19:15:44.723

Ok this was very easy to answer after all... AmazonDynamoDB doesn't exist anymore..

So I grepped for STRING, and I found Type.php

So in order to solve issue like that you need to add

```
use Aws\DynamoDb\Enum\Type; 
```

nd then you can use `Type::S` or `Type::String` or whatever.. just read the class file. Didn't think about it till I posted the question.

# ruby-on-rails - Rails CanCan 对 has_many 的问题：通过模型案例

> ID：14045004
> 
> 赞同：1
> 
> 时间：2012-12-26T19:05:17.313
> 
> 标签：ruby-on-rails, model-view-controller, authorization, cancan

在我的 rails 应用程序中，我的用户通过参与者有许多项目。

目前我正在使用 CanCan 进行授权。我已经做了一些研究，但不能完全弄清楚如何做以下事情。

在我的ability.rb 文件中，我想向项目中的用户提供：管理能力。目前看起来像：

```
can :manage, Project if user.has_role? :silver 
```

我的 Participants 表有 user_id 和 project_id。如何仅将这些管理功能提供给通过参与者表与项目关联的用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:09:50.577

我目前正在使用以下解决方案。我更喜欢使用原生解决方案来设计或 cancan。

在模型中。

```
def is_participant?(participant)
  self.participants.exists?(:project_id => participant)
end 
```

在我看来。

```
<% if current_user.is_participant?(@project.id) %> 
```

# .net - 两种类型的客户端的 WCF 服务，只有一种带有回调

> ID：14045008
> 
> 赞同：1
> 
> 时间：2012-12-26T19:05:43.700
> 
> 标签：.net, wcf, wcf-data-services, wcf-binding, wcf-callbacks

我想为两种类型的客户端创建 WCF 服务

1- 适用于 Windows Phone 7

2- 用于 Windows (wpf)

而且我只想支持（wpf客户端）的回调，因为我不需要Windows Phone 7（而且我认为它不支持它）

创建两个端点（WPF 客户端的 wsDualHttp 和 WP7 的基本）没有问题，但是当我添加回调功能时，WP7 不理解整个服务。

# mysql - SQL 查询以获取具有某些条件的最后一组不同的记录

> ID：14045015
> 
> 赞同：1
> 
> 时间：2012-12-26T19:06:20.127
> 
> 标签：mysql, sql

我有下表：

![在此处输入图像描述](../Images/0b15b510ee9b78744b721069079a95f3.png)

我正在尝试找到一种方法来获取那些已过期的客户的记录，然后相应地更新表（通过更新我的意思是添加一条新记录，其中包含相关客户的 customer_id 条目）。

如果您查看表的底部，您会注意到两条记录，其中包含已存在客户的条目“SERVICE EXPIRED”（customer_id 11 和 16）。

我正在寻找一个 SQL 查询，它将：

1.  通过 customer_id 获取最后一组不同的记录
2.  从结果集中排除相同 customer_id 的记录，这些记录具有条目“SERVICE EXPIRED”或 status_id 为 2 稍后出现在表中

如果我使用以下内容：

```
SELECT MAX(id) FROM mytable WHERE status_id != '2' AND expiry < '2012-12-26 19:00:00' GROUP BY customer_id 
```

它将返回 ids 1、11、13 和 16。但是，我不想要 ids 11 和 16，因为表中已经在后面注明了到期状态（请参阅表的最后两条记录）和 id从 id 3 中更新的到期日期可以看出，1 已更新。我想要的只是 id 13，因为这是唯一没有在表中稍后出现的“SERVICE EXPIRED”条目的过期记录。

我正在寻找一个 SQL 查询，它可以让我捕捉到这个需求。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:20:35.233

经过一番摆弄，我设法想出了一个解决方案：

```
SELECT MAX(id) 
FROM mytable
WHERE status_id != '2' 
    AND expiry < '2012-12-26 19:00:00' 
    AND customer_id NOT IN (SELECT MAX(customer_id) FROM mytable WHERE status_id = '2' GROUP BY customer_id) 
GROUP BY customer_id 
```

感谢@JupiterP5 为我指明了正确的方向。

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T19:12:48.310

它效率不高，但这应该有效。

```
SELECT MAX(id)
FROM mytable
WHERE status_id != '2'
    AND expiry < '2012-12-26 19:00:00'
    AND id NOT IN (SELECT id FROM mytable where status_id = 2)
GROUP BY customer_id 
```

编辑：错过了服务更新案例。如果我想到什么，我会更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T19:13:22.010

您的要求相当于在一条记录的最后一次到期后查找“n”条记录。以下查询返回给定客户最后一次到期后的所有记录：

```
select t.*
from t join
     (select t.customer_id, MAX(id) as maxid
      from t
      where status_id = 2
     ) texp
     on t.customer_id = texp.customer_id and
        t.id > texp.maxid 
```

通过巧妙地使用变量，您可以枚举这些变量以获得最后一个“n”。但是，你真的需要一个固定的号码吗？为什么不是全部？为什么不只是其中之一？

# ruby - rbenv 可以在共享的 Dreamhost 上使用吗？

> ID：14045019
> 
> 赞同：0
> 
> 时间：2012-12-26T19:06:37.773
> 
> 标签：ruby, dreamhost, rbenv

由于dreamhost 有非常旧的默认设置，我想使用1.9.3 和更新的Ruby on Rails。

```
[bayhawks]$ ruby -v
ruby 1.8.7 (2008-08-11 patchlevel 72) [x86_64-linux]
[bayhawks]$ rails -v
Rails 3.0.3 
```

[我知道RVM](http://wiki.dreamhost.com/RVM)有一个wiki 页面。

但我想使用 rbenv，因为它更轻量级，而且我可以根据项目更改 ruby​​ 版本。

是否有人在 dreamhost 上使用过 rbenv 并且可以分享信息，如果这是工作的 dreamhost，或者在 dreamhost 上存在一些针对 rbenv 的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T23:28:27.213

我能够让它工作。简短的版本是您必须使用 ruby​​-build 在您的帐户上构建自己的 ruby​​ 版本，但与其他一些共享托管服务提供商不同，DreamHost 实际上允许您这样做。您可以在我的博客上看到更详细的详细分步详细信息：

[http://blog.micahchalmer.net/blog/2012/dreamhost-shared-hosting-rbenv](http://blog.micahchalmer.net/blog/2012/dreamhost-shared-hosting-rbenv)

# php - 在 PHP 中将日期从 YYYYMMDD 转换为 DD/MM/YYYY 格式

> ID：14045027
> 
> 赞同：11
> 
> 时间：2012-12-26T19:07:21.823
> 
> 标签：php, date

我有一个 MySQL 数据库表，其中日期以 YYYYMMDD 格式存储。例如：20121226。

我想以 DD/MM/YYYY 格式显示这个日期。例如：26/12/2012

我想出的是用来`substr`分别提取日、月和年。我想知道是否有更简单的方法可以做到这一点。

此外，有没有办法将此日期转换为“2012 年 12 月 26 日”格式而无需编写单独的代码？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-26T19:09:55.833

您可以轻松地使用 DateTime 类来执行此操作

```
$retrieved = '20121226';
$date = DateTime::createFromFormat('Ymd', $retrieved);
echo $date->format('d/m/Y'); 
```

[http://php.net/manual/en/datetime.format.php](http://php.net/manual/en/datetime.format.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T19:13:00.690

在您的 SQL 语句中，您可以设置不同的日期格式。

```
SELECT DATE_FORMAT(date_column, '%d/%m/%Y') AS my_date FROM my_table 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T19:12:36.767

这是解决方案：

`SELECT DATE_FORMAT('20121226', '%d/%m/%Y');`

=>

```
DATE_FORMAT('20121226', '%d/%m/%Y')
26/12/2012 
```

或者

`SELECT DATE_FORMAT('20121226', '%W %M %Y');`

=>

```
DATE_FORMAT('20121226', '%W %M %Y')
Wednesday December 2012 
```

检查更多格式： [http ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

# ios - iOS中的图像裁剪问题

> ID：14045028
> 
> 赞同：2
> 
> 时间：2012-12-26T19:07:56.940
> 
> 标签：ios, image, uiscrollview, imageview, crop

我正在创建一个具有图像裁剪功能的 iPhone 应用程序。在此，我从 UIImagePickerController 获取照片并将其传递给裁剪。它有一个滚动视图，所选图像将作为子视图添加到滚动视图。我正在使用 UIButton 来选择裁剪区域。用户可以将按钮移动到 imageview 上并将其放置在任何位置，当单击 CROP 按钮时，应从 imageview 中裁剪出与按钮框架大小相似的区域。

我使用了以下代码，但它没有返回实际图像。

```
CGRect clippedRect  = CGRectMake(self.scrollView.frame.origin.x+90, self.scrollView.frame.origin.y, self.scrollView.frame.size.width-180, self.scrollView.frame.size.height-220);
CGImageRef imageRef = CGImageCreateWithImageInRect([self.myPhoto CGImage], clippedRect);
UIImage *newImage   = [UIImage imageWithCGImage:imageRef];
CGImageRelease(imageRef);

self.imageView.image = newImage; 
```

也用过

```
- (UIImage *)cropImage:(UIImage *)oldImage {
    CGSize imageSize = self.cropFrame.frame.size;
    UIGraphicsBeginImageContextWithOptions( CGSizeMake( imageSize.width, imageSize.height), NO, 0.);
    [oldImage drawAtPoint:CGPointMake( xPosition, yPosition)
                blendMode:kCGBlendModeCopy
                    alpha:1.];
    UIImage *croppedImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return croppedImage;
} 
```

但结果图像不是按钮框架的确切图像。我正在从另一个区域获取图像。

**更新代码**

```
- (void)loadPhoto{

    CGFloat w = self.myPhoto.size.width;
    CGFloat h = self.myPhoto.size.height;
    CGRect imageViewFrame = CGRectMake(0.0f, 0.0f, roundf(w / 2.0f), roundf(h / 2.0f));
    self.scrollView.contentSize = imageViewFrame.size;

    UIImageView *iv = [[UIImageView alloc] initWithFrame:imageViewFrame];
    iv.contentMode = UIViewContentModeScaleAspectFit;
    iv.image = self.myPhoto;
    [self.view addSubview:iv];
    self.imageView = iv;
    [iv release];    
}

CGRect crop;//= CGRectMake(10, 10, 360, 360);
crop.origin.x = self.cropFrame.frame.origin.x;
crop.origin.y = self.cropFrame.frame.origin.y;
crop.size.width = roundf(self.cropFrame.frame.size.width * 2.0f); //self.cropFrame.frame.size.width * 2;
crop.size.height = roundf(self.cropFrame.frame.size.height * 2.0f);  //self.cropFrame.frame.size.height * 2;

NSLog(@"Rect: %@", NSStringFromCGRect(crop));
self.imageView.image = [self croppedImage:crop];

- (UIImage *)croppedImage:(CGRect)bounds {
    CGImageRef imageRef = CGImageCreateWithImageInRect([self.imageView.image CGImage], bounds);
    UIImage *croppedImage = [UIImage imageWithCGImage:imageRef scale:1.0 orientation:self.myPhoto.imageOrientation];
    CGImageRelease(imageRef);
    return croppedImage;
} 
```

请帮助找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:42:53.797

由于您使用的是允许滚动图像的滚动视图，因此您需要将裁剪矩形调整到滚动视图的位置：

```
float zoomScale = self.scrollView.zoomScale;
int cropX = (self.scrollView.contentOffset.x-imageView.frame.origin.x)/zoomScale;
int cropY = (self.scrollView.contentOffset.y-imageView.frame.origin.y)/zoomScale; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:45:52.613

你可以使用我制作的这个裁剪工具。它本质上为您提供了一个界面，允许用户选择裁剪区域。我认为这与您正在寻找的一致。

[https://github.com/nicholjs/BFCropInterface](https://github.com/nicholjs/BFCropInterface)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T07:40:46.707

iOS具有裁剪图像的默认功能。试试这个代码。

```
 picker.allowsEditing = YES; 
```

并检查此控制器是否裁剪..这正是您要寻找的那个我认为[https://github.com/barrettj/BJImageCropper](https://github.com/barrettj/BJImageCropper) .希望这对您有所帮助..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-02T15:46:11.683

相信你已经解决了这个问题。尝试裁剪功能时我也有这个

将 image.size 设置为 imageView.size 和 scrollView.contentSize。下面的代码将给矩形裁剪

```
cropRect.origin = scrollView.contentOffset;
cropRect.size = scrollView.bounds.size;    
cropRect.origin.x /= scrollView.zoomScale;
cropRect.origin.y /= scrollView.zoomScale;
cropRect.size.width /= scrollView.zoomScale;
cropRect.size.height /= scrollView.zoomScale; 
```

如果计划首先在可见矩形上显示完整图像。将 imageView.size 和 scrollView.contentSize 设置为可见视图大小将给出其他区域的裁剪图像。而是尝试通过以下方式找到缩放比例

```
CGFloat dxWidth = viewCrop.frame.size.width / imageView.image.size.width;
CGFloat dxHeight = viewCrop.frame.size.height / imageView.image.size.height;
CGFloat zoomScale = fmaxf(dWidth, dHeight) 
```

并应用（如果通过添加 subView 然后在 addSubView 之后）

```
scrollView.minimumZoomScale = zoomScale; // to disable further zoom-out
[scrollView setZoomScale: zoomScale]; 
```

# java - 在 Java 中搜索 LinkedList

> ID：14045035
> 
> 赞同：-1
> 
> 时间：2012-12-26T19:08:29.690
> 
> 标签：java, linked-list

我正在使用 Java S2SE 制作一个简单的原型项目。目标是制作一个文本文件，逐行读取，填充链接列表，然后要求用户输入名字和名字。

文本文件格式为：

> 名字 名字 名字 移动 家 mobile2 办公室
> 
> contact1contact2 手机之家 mobile2s 办公室

我连接文本文件中的名字和第二个名字。

然后我要求用户输入名字和名字，并使用这两个字符串的连接，将搜索填充的链接列表。无论出现包含具有这些名字和第二个名称的字符串的节点，拆分该节点并显示该节点的结果

我的代码是：

```
try {
    String fullname;
    String mobile;
    String home;
    String mobile2;
    String office;

    Node current=first;

    while(current.data == null ? key !=null : !current.data.equals(key)) {
        String splitter[]=current.next.data.split(" ");

        //fullname=splitter[9];
        mobile=splitter[1];
        home=splitter[2];
        mobile2=splitter[3];
        office=splitter[4];

        if(current.next.data.split(" ")==null?key==null:){

            mobilefield.setText(mobile);
            homefield.setText(home);
            mobilefield2.setText(mobile2);
            officefield.setText(office);
        } else {
            throw new FileNotFoundException("SORRY RECORD NOT LISTED IN DATABASE");
        }
            break;
    }
} catch(Exception e) {
        JOptionPane.showMessageDialog(this,e.getMessage()
        +"\nPLEASE TRY AGAIN !","Search Error", JOptionPane.ERROR_MESSAGE);
} 
```

问题是一切都很好，但是对于列表中的第一个和直到第 n-1 个节点的搜索出错，但在此搜索中没有到达最后一个节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:26:13.890

快速浏览一下，您正在尝试引用一个`next`可能为空的节点。

`current.next.data`可能是`null`，如果是这样，那么您将获得 NPE。

你的循环应该专注于它正在处理的*第 i 个*部分 - 也就是说，一个大小为*n*的链表，当我得到一个*n的节点**i*时，我应该这样**做**。

 ***此外，您不应该在其中没有数据的节点中工作。跳过那些空的。

```
while(current.data != null) 
```

最后，提前你的`current`参考，否则你会无限期地循环。

```
current = current.next; 
```

另一项观察：

*   编辑时，我从上下文中不知道这两行是否应该在同一行。如果是这种情况，那么您可能希望使用常量代替原始整数来指示去哪里 - 例如，您要查找的名称将在`[0]`其中并且可以称为`FULL_NAME`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T19:29:15.953

根据我从您的问题中收集到的信息，我已经修改了您的代码。这应该有希望工作：

```
try {
String fullname;
String mobile;
String home;
String mobile2;
String office;

Node current;

    //This loop will start from the first `Node`, check for `null`, then check if it is equal to the `key`. If not, then it will advance to `next`
for(current=first; current!=null && !current.data.equals(key); current = current.next);

    //the loop will terminate if current is null or is equal to key. If it is equal to key, we should display data.
if(current.data.equals(key))
{

    String splitter[]= current.data.split(" ");

    fullname=splitter[0];
    mobile=splitter[1];
    home=splitter[2];
    mobile2=splitter[3];
    office=splitter[4]; 

    mobilefield.setText(mobile);
    homefield.setText(home);
    mobilefield2.setText(mobile2);
    officefield.setText(office);
}
else
    throw new FileNotFoundException("SORRY RECORD NOT LISTED IN DATABASE");

} catch(Exception e) {
    JOptionPane.showMessageDialog(this,e.getMessage()
    +"\nPLEASE TRY AGAIN !","Search Error", JOptionPane.ERROR_MESSAGE); 
```

**编辑：**添加评论。***

# crm - 是否仍然可以在 eclipse/netbeans 中调试 opentap 1.5.0？

> ID：14045036
> 
> 赞同：0
> 
> 时间：2012-12-26T19:08:45.493
> 
> 标签：crm, erp, opentaps

我严格按照[本教程](http://www.opensourcestrategies.com/ofbiz/ofbiz_eclipse.php)进行操作，但我得到的只是错误之后的错误，更重要的是，因为它太旧了，当 Eclipse 询问我尝试运行它时它是什么类型的 Java 应用程序时，尽管有错误，它还是缺少了一些额外的步骤。任何有关如何实现这一目标的帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:54:36.100

我发现您可以将 eclipse 项目导入 netbeans，因为它已经包含一个 eclipse 项目。

# java - 在数据库中存储巨大的 HashMap

> ID：14045037
> 
> 赞同：1
> 
> 时间：2012-12-26T19:08:49.387
> 
> 标签：java, database, hashtable

我有类似的东西：

```
import java.util.HashMap;
import java.util.List;

public class A {
    HashMap<Long, List<B>> hashMap = new HashMap<Long, List<B>>();
}

class B{
    int a;
    int b;
    int c;
} 
```

我想将它存储在数据库中，因为它会非常巨大。

我将在 HashMap 中有更多的 250000000 个键，每个键代表巨大的数据列表（比如说列表大小可能在 1000 左右）。

如何在从数据库中检索具有 Long hashKey 的 B 对象列表时获得最佳性能？

还有其他建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T19:15:35.503

To me, this looks like a classical One-To-Many or Many-To-Many association between two tables.

If each B belongs to only one A, then you would have a table A and a table B containing a foreign key to A.

If a given B can belong to multiple As, then you would have a table A, a table B, and a join table between the two tables.

Make sure to index the foreign keys.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T19:36:44.270

由于您拥有高达 1/4 亿 * 20 * 1 k 或大约 5 TB 的非常大的数据集，因此您遇到的主要问题是它无法存储在内存中并且太大而无法存储在 SSD 上，所以您必须有效地访问磁盘，否则每个键的延迟大约为 8*毫秒*

除非您非常了解如何使用内存映射文件来实现这一点，否则您将需要使用数据库，最好使用一种设计来处理大量记录。您还需要一个磁盘子系统，不仅是为了提高容量，还要为您提供更多的心轴，这样您就可以增加可以并发执行的请求数量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T19:13:31.570

使用[infinispan](http://www.jboss.org/infinispan/)，您可以只使用巨大的地图并将其中的一部分（最近未访问的）存储到磁盘以节省 RAM。比编写整个 D 层更容易，并且（我认为）更快并且使用更少的内存@runtime（整个地图从来没有在内存中）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T19:13:33.927

您可以将其直接映射为一对多关系。你需要两张桌子。一个保存密钥（我们称之为 KeyTable），另一个保存 B 对象（BTable）。在具有 B 对象的 BTable 上，您需要 KeyTable 的外键。然后你可以查询这样的东西来获取键为 1234 的对象：

```
 SELECT * FROM BTABLE WHERE key=1234; 
```

为了提高性能，您可能应该使用 JDBC 而不是 Hibernate 之类的代码来编写代码，以便更好地控制内存使用。

# c# - 不知道下载的是哪个文件

> ID：14045041
> 
> 赞同：0
> 
> 时间：2012-12-26T19:09:32.040
> 
> 标签：c#, http-headers, httpwebrequest

我正在尝试从如下链接下载文件：www.sample.com/download.php?id=1234231

我不知道我会从这个链接得到哪个文件。首先我尝试`webclient.downloadfile(link,path)`了 - 但是我作为文件应该所在的文件夹提供的路径给了我一个拒绝访问错误。我的问题是我无法确定我将获得的文件。

我试过类似的东西：

```
var wreq = (HttpWebRequest)HttpWebRequest.Create(link);
using (var res = (HttpWebResponse) wreq.GetResponse())
{
    using (var reader = new StreamReader(res.GetResponseStream()))
    {
        //get filename Header
        var filenameHeader =
            res.GetResponseHeader("Content-Disposition")
               .Split(';')
               .Where(s => s.Contains("filename"))
               .ToList()[
                   0];
        var fileName = filenameHeader.Replace(" ", "").Split('=')[1];
        //clear fileName
        fileName = fileName.Replace(":", "");
        using (var writer = new StreamReader(Path.Combine(folderToSave , fileName),FileMode.Create))
        {
            writer.Write(reader.ReadToEnd());
        }
    }
} 
```

难道没有比这更简单的事情了吗？
我是否有机会下载文件而不获得“Content-Disposition”标头？

最后一件事，目前我正在尝试使用 a 写入文件，`StreamWriter`但生成的文件已损坏。我认为这与不以二进制格式编写有关，但我不确定。

我还检查了“Content-Length”标头，它与 的值不同`response.GetResponse().ToString().Length`，也许标头也算作长度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:24:47.780

您可以为此扩展 WebClient 类

```
 class MyWebClient : WebClient
  {
     public string FileName { get; private set; }

     protected override WebResponse GetWebResponse(WebRequest request)
     {
        WebResponse response = base.GetWebResponse(request);

        FileName = Regex.Match(((HttpWebResponse)response).Headers["Content-Disposition"], "filename=(.+?)$").Result("$1");
        string regexSearch = new string(Path.GetInvalidFileNameChars()) + new string(Path.GetInvalidPathChars());
        Regex r = new Regex(string.Format("[{0}]", Regex.Escape(regexSearch)));
        FileName = r.Replace(FileName, "-");
        return response;
     }
  } 
```

用法：

```
 MyWebClient mwc = new MyWebClient();
     byte[] bytes = mwc.DownloadData("http://subtitle.co.il//downloadsubtitle.php?id=202500");
     File.WriteAllBytes(Path.Combine(folderToSave, mwc.FileName), bytes); 
```

# vb.net - 我的表单名称是什么，mvc3 vb.net

> ID：14045042
> 
> 赞同：0
> 
> 时间：2012-12-26T19:09:41.647
> 
> 标签：vb.net, asp.net-mvc-3, webforms

我非常感谢您在下一个方面的帮助：

实际上我正在使用 mvc3 (razor) 和 vb.net ，

```
in my view:

@Using Html.BeginForm()
my content ....
End Using 
```

当我从浏览器中看到我的视图时

```
<form action="/App/Schedule/Capt" method="post">    <fieldset> 
```

我想得到这个表格的名字。 **我的表格叫什么名字？？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T19:12:48.997

您可以在 htmlAttributes 参数中指定一些属性。尝试这样的事情：

```
@Using Html.BeginForm("Action", "Controller", FormMethod.Post, New With {.name = "formName", .Id = "formId" })

   my content ....

End Using 
```

默认情况下，[asp.net-mvc](/questions/tagged/asp.net-mvc "显示标记为“asp.net-mvc”的问题")不会为`<form />`标记生成名称。因此，使用 htmlAttributes anyoimous 类型，您可以设置名称、id、enctype 等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T19:12:33.770

表单元素没有名称。

如您所见，元素上没有`id`or`name`属性。它通常不需要一个。

但是，您可以将可选 ID 传递给`BeginForm`HTML Helper。

```
@Using Html.BeginForm("ActionName", "ControllerName", New With {.Id = "TheId"}) 
```

# vbscript - VBScript：FormatNumber() / 舍入问题

> ID：14045045
> 
> 赞同：1
> 
> 时间：2012-12-26T19:09:56.327
> 
> 标签：vbscript, rounding, output

```
dim num

num = 4895390000000005 

msgbox FormatNumber(num, 0, -2, -2, false) 
```

输出为 4895390000000010

而不是 4895390000000005

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:34:08.460

似乎您的“数字”大于整数，声明为十进制对我有用：

```
Dim num As Decimal

num = 4895390000000005

MsgBox(FormatNumber(num, 0, -2, -2, False)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:32:36.533

这是使用 com visible .net 类的工作示例。

```
With CreateObject("System.IO.StringWriter")
    .Write_7 4895390000000005
    MsgBox .GetStringBuilder().ToString()
End With 
```

这里是更多信息的参考[链接](http://www.visualbasicscript.com/Interop-Using-NET-from-VBScript-m26652.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T19:23:46.197

诚然，如果您希望在普通的旧 vbscript (.vbs) 中执行此操作，您可以轻松创建一个库来处理 vbscript 中不可用的数学函数和类型。下面是一个简短的工作示例。让我知道它是否有帮助。

--在视觉工作室：

```
Imports System

Public Class mathLibrary

    Public Function roundNumber(number As String) As String

        Dim roundedNumber As String = ""
        Dim largeNumber As Decimal = 0

        If IsNumeric(number) Then

            largeNumber = Convert.ToDecimal(number)

            roundedNumber = FormatNumber(largeNumber, 0, TriState.UseDefault, TriState.UseDefault, TriState.False)

        End If

        Return roundedNumber

    End Function

End Class 
```

--现在更新你的.vbs：

```
dim mathLib
set mathLib = CreateObject("sampleMathLibrary.mathLibrary")

Dim num
num = "4895390000000005"

msgbox mathLib.roundNumber(num) 
```

# grails - Grails Helloworld 教程应用程序不工作

> ID：14045046
> 
> 赞同：3
> 
> 时间：2012-12-26T19:10:05.880
> 
> 标签：grails

带着这样一个微不足道的问题来到 Stack Exchange，我感到很内疚，但我整个早上都在用头撞它，似乎无处可去。我正在尝试在 Grails 教程中运行简单的 HelloWorld 应用程序：http: [//grails.org/doc/latest/guide/gettingStarted.html#creatingAnApplication](http://grails.org/doc/latest/guide/gettingStarted.html#creatingAnApplication)

我已经安装了 Grails，我可以运行它，创建控制器和一切，但无论我点击哪个页面，我只得到一个空白。即使页面不存在，也会返回空白页面而不是错误。

例如，我尝试了 http://localhost:8080/helloworld，显然，得到的只是一个空白页。同样的事情发生在 http://localhost:8080/hellowrld、http://localhost:8080/helphelphelp 和 http://localhost:8080/pleasefortheloveofpeteworkalready。总是空洞的回应。

当我尝试不同的端口时，我得到一个错误。当我停止应用程序并尝试时，出现错误。当我使用端口 9090 运行 grails run-app 并尝试使用端口 8080 时，出现错误，但在 9090 上，我得到空白页。所以，我假设服务器正在处理请求，但由于某种原因没有响应。

我可能错过了一些超级简单的东西，一些愚蠢的东西，但我不知道它是什么，完全缺乏反馈让我很生气。

我可以在任何地方查看日志吗？而且，我有什么明显的遗漏吗？

（PS：我假设环境变量是正确的，因为我可以运行 Grails 没问题。另外，我安装了 GGST IDE 的东西，但从未运行过。从那以后我重新启动了，但它可以安装一些接管的服务吗？）

谢谢，彼得

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T04:31:37.343

The application name is the default "context", so if you create an application called foo (`grails create-app foo`) it will be available at `http://localhost:8080/foo` if you run `grails run-app`. You can use a different port, for example 9090, by running `grails -Dserver.port=9090 run-app` and you can also use a different context (or none at all).

The `run-app` script displays the full URL of the application in the output window - you should see something like:

```
Server running. Browse to http://localhost:8080/helloworld 
```

# ios - How to populate an UITableView when JSON response arrives?

> ID：14045049
> 
> 赞同：0
> 
> 时间：2012-12-26T19:10:24.693
> 
> 标签：ios, afnetworking

I am looking for a sample code, showing what is the best way to populate an UITableView with the response of JSON data. Let me explain in details.

The situation is the following:

When I navigate to the current view controller(the one with the table view), I send a request to my server in order to send me a JSON response. Meanwhile, I display an Activity indicator in foreground, showing the user that an activity is loading. When the response arrives, I need to parse it, store it with Core Data and then populate my Table View with the data.

My question is:

What is the best practice, best way to populate the table view? Should I grab the whole data that I need and use a NSArray while populating the table view? Or may be use NSFetchedResultsController for this purpose? How should I reload the table view? Is [self.tableView reloadData] good enough for my purpose?

I hope I was clear enough with my question(s) :) Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:13:04.343

If the view controller *always* needs to call out to the server on every view, you can simply retain the response dictionary (or convert it to your own plain objects and retain an array of those) and bind the tableview in the afnetworking callback.

If you do not always need to call it, you could save the objects to core data on call back then create your retained NSFetchedResultsController and set the delegate on it (just in case the data gets modified/altered elsewhere).

# c++ - 并行：我的电脑和ideone上的结果不一样？

> ID：14045050
> 
> 赞同：0
> 
> 时间：2012-12-26T19:10:25.973
> 
> 标签：c++, c++11, lambda, stdthread

> **可能重复：**
> [并行使用 std::thread？](https://stackoverflow.com/questions/14044539/a-parallel-for-using-stdthread)

考虑以下实现 a 的代码`parallel_for`：

```
// parallel_for.cpp
// compilation: g++ -O3 -std=c++0x parallel_for.cpp -o parallel_for -lpthread
// execution: time ./parallel_for 100 50000000 
// (100: number of threads, 50000000: vector size)
#include <iostream>
#include <iomanip>
#include <cstdlib>
#include <vector>
#include <thread>
#include <cmath>
#include <algorithm>
#include <numeric>
#include <utility>

// Parallel for
template<typename Iterator, class Function>
void parallel_for(const Iterator& first, const Iterator& last, Function f, const int nthreads = 1, const int threshold = 100)
{
    const unsigned int group = std::max(std::max(1, std::abs(threshold)), (last-first)/std::abs(nthreads));
    std::vector<std::thread> threads;
    for (Iterator it = first; it < last; it += group) {
        threads.push_back(std::thread([=, &f](){std::for_each(it, std::min(it+group, last), f);}));
    }
    std::for_each(threads.begin(), threads.end(), [](std::thread& x){x.join();});
}

// Function to apply
template<typename Type>
void f(Type& x)
{
    x = std::sin(x)+std::exp(std::cos(x))/std::exp(std::sin(x)); 
}

// Main
int main(int argc, char* argv[]) {

    const unsigned int nthreads = (argc > 1) ? std::atol(argv[1]) : (7);
    const unsigned int n = (argc > 2) ? std::atol(argv[2]) : (1000);
    double x = 0;
    double y = 0;
    std::vector<double> v(n);

    std::iota(v.begin(), v.end(), 0);
    std::for_each(v.begin(), v.end(), f<double>);
    for (unsigned int i = 0; i < n; ++i) x += v[i];

    std::iota(v.begin(), v.end(), 0);
    parallel_for(v.begin(), v.end(), f<double>, nthreads);
    for (unsigned int i = 0; i < n; ++i) y += v[i];

    std::cout<<std::setprecision(15)<<x<<" "<<y<<std::endl;
    return 0;
} 
```

在 ideone（[http://ideone.com/GrYJsQ](http://ideone.com/GrYJsQ)）上它给出：

```
1567.22616587821 1567.22616587821 
```

而在我使用 g++ 4.6 的计算机上，它给出 (`g++ -O3 -std=c++0x parallel_for.cpp -o parallel_for -lpthread`和`./parallel_for`) ：

```
1567.22616587821 499500 
```

问题出在哪里 ？

# zend-framework - Smarty 似乎忽略了 addTemplateDir

> ID：14045055
> 
> 赞同：0
> 
> 时间：2012-12-26T19:10:59.560
> 
> 标签：zend-framework, smarty

我正在使用基于 Zend 框架的应用程序（Shopware）。

我在控制器中添加了一个模板目录，如下所示：

```
class Shopware_Controllers_Backend_Pricify extends Shopware_Controllers_Backend_ExtJs
{
    public function init()
    {
        $this->View()->addTemplateDir(dirname(__FILE__) . "/../../Views/backend/");
        parent::init();
    }
} 
```

但不知何故，smarty 总是查看控制器动作的（不存在的）部分：

```
Unable to load template snippet 'backend/mycontroller/model/main.js' in 'snippet:string:{include file="backend/pricify/model/main.js"} in Smarty/sysplugins/smarty_internal_templatebase.php on line 128 
```

控制器通过 ext js 超载工作，但我不认为这是一个问题。当我 var_dump 模板目录时，包含正确的目录。我将代码调试到 smarty 中，但从未找到检查目录的部分。

我知道，这可能是软件堆栈中的一个问题，但是由于我不知道在哪里搜索，所以我在这里问。如果我需要发布更多数据，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T11:48:33.633

我发现，问题在于商店软件将 CamelCase 扩展到了 camel_case 文件夹。

# hadoop - 多大的数据是“大数据”？

> ID：14045056
> 
> 赞同：11
> 
> 时间：2012-12-26T19:11:01.720
> 
> 标签：hadoop, mapreduce, bigdata

有多少数据有资格被归类为大数据？

有多大的数据可以决定现在是采用 Hadoop 之类的技术并利用分布式计算的力量的时候了？

我相信使用这些技术有一定的溢价，那么如何确保使用大数据方法能够利用当前系统呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-26T19:46:54.783

“大数据”是一个有点模糊的术语，更多地用于营销目的而不是做出技术决策。一个人称之为“大数据”的另一个人可能会认为它只是单个系统上的日常操作。

我的经验法则是，大数据始于您拥有一组不适合单个系统的主内存的工作数据。工作集是您在给定时间积极处理的数据。因此，例如，如果您有一个存储 10 TB 数据的文件系统，但您正在使用它来存储视频以进行编辑，那么您的编辑人员在任何给定时间可能只需要几百个演出；他们通常从光盘上流式传输数据，这不需要随机访问。但是，如果您尝试对定期更改的完整 10 TB 数据集进行数据库查询，您不希望从磁盘上提供这些数据；这开始成为“大数据”。

对于基本的经验法则，我现在可以为 2 TB 的 RAM 配置现成的戴尔服务器。但是，您需要为将这么多 RAM 塞入单个系统而付出高昂的代价。单台服务器上 512 GB 的 RAM 更实惠，因此使用 4 台 512 GB RAM 的机器通常比使用 2 TB 的单台机器更具成本效益。因此，您可能会说超过 512 GB 的工作集数据（您需要在日常基础上访问任何给定计算的数据）将符合“大数据”的条件。

鉴于为“大数据”系统开发软件相对于传统数据库的额外成本，对于某些人来说，迁移到 2 TB 系统而不是重新设计他们的系统以分布在多个系统之间可能更具成本效益，所以根据您的需要，512 GB 到 2 TB 的数据可能是您需要迁移到“大数据”系统的地方。

我不会使用“大数据”一词来做出任何技术决策。相反，制定您的实际需求，并确定现在需要什么样的技术来满足这些需求。稍微考虑一下增长，但也要记住系统的容量仍在增长；所以不要试图过度计划。许多“大数据”系统可能难以使用且不灵活，因此如果您实际上并不需要它们将数据和计算传播到数十或数百个系统，那么它们可能会带来更多麻烦而不是价值。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-26T19:14:33.983

To quote from the wiki page for Bigdata:

> When it becomes difficult to store, search, analyse, share etc. a given amount of data using our traditional database management tools, that large and complex dataset is called to be Bigdata.

Basically, it’s all relative. What is considered Bigdata varies depending on the capabilities of the organization managing the dataset. For some organizations, facing hundreds of gigabytes of data for the first time may trigger a need to reconsider data management options. For others, it may take tens or hundreds of terabytes before data size becomes a significant consideration.

**Amount of data is just one of the key elements in defining Bigdata. `Variety` in data and the `velocity` at which data increases are other two major elements in defining a data set to be Bigdata.**

`Variety` in data means having many different data and file types which may required to be analyzed and processed in ways which is out of bounds of traditional relational databases.Some examples of this variety include sound and movie files, images, documents, geo-spatial data, web logs, and text strings.

`Velocity` is about the speed of change in the data and how quickly it must be processed to generate significant value. Traditional technologies are especially poorly suited to storing and using high-velocity data. So new approaches are needed. If the data in question is created and aggregates very quickly and must be used swiftly to uncover patterns and problems, the greater the velocity and the more likely you are to have a Bigdata problem at hand.

By the way if you are looking for a 'cost-effective' solution, you can explore [amazon's EMR](http://aws.amazon.com/elasticmapreduce/).

# mysql - mysql：选择具有一定数量关系行的人

> ID：14045057
> 
> 赞同：0
> 
> 时间：2012-12-26T19:11:03.157
> 
> 标签：mysql, in-clause, having-clause

我有两个关系表，person 和 event_registration，我想选择所有注册到 10 个或更少事件的人。我发现了一个似乎是正确的查询。它可以通过以下查询找到这些人：

```
 SELECT person_id 
    FROM event_registration 
GROUP BY person_id 
  HAVING COUNT(*) <= 10 
```

注意，event_registration.person_id 与匹配 person.id 的表行相关。现在我想使用这个查询来搜索 person 表，但是我的查询似乎使 mysql 崩溃。为什么？

```
SELECT id 
  FROM person 
 WHERE id IN (
       SELECT person_id 
         FROM event_registration 
     GROUP BY person_id 
       HAVING COUNT(*) <= 10
 ) 
```

我想更改查询的原因是因为我还寻找其他属性，所以（更接近）最终查询看起来像：

```
SELECT * 
  FROM person 
 WHERE name LIKE '%something%' 
   AND AGE > 20 
   AND id IN (
       SELECT person_id 
         FROM event_registration 
     GROUP BY person_id 
       HAVING COUNT(*) <= 10
 ) 
```

当然这不起作用，因为 mysql 似乎崩溃了。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:15:52.783

```
SELECT distinct id FROM person 
WHERE id IN
    (SELECT person_id 
     FROM event_registration 
     GROUP BY person_id HAVING COUNT(*) <= 10) 
```

# android - 如何将声音片段上传到 SoundCloud

> ID：14045061
> 
> 赞同：1
> 
> 时间：2012-12-26T19:11:35.650
> 
> 标签：android, soundcloud

在我的 android 应用程序中，我正在录制一个音频文件，然后我想将其分享给 SoundCloud 及其`GET`网址。最好的方法是什么？

我可以通过明确的方式分享，`Intent`但我怎样才能获得曲目网址呢？我应该使用java包装器上传音频吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T20:34:53.703

```
File myAudiofile = new File("/path/to/audio.mp3");
Intent intent = new Intent("com.soundcloud.android.SHARE")
  .putExtra(Intent.EXTRA_STREAM, Uri.fromFile(myAudiofile))
  .putExtra("com.soundcloud.android.extra.title", "Demo");
  // more metadata can be set, see below

try {
    // takes the user to the SoundCloud sharing screen
    startActivityForResult(intent, 0);
} catch (ActivityNotFoundException e) {
    // SoundCloud Android app not installed, show a dialog etc.
} 
```

参考：

*   [https://github.com/soundcloud/android-intent-sharing/wiki/Explicit-intent-sharing](https://github.com/soundcloud/android-intent-sharing/wiki/Explicit-intent-sharing)

# c++ - WxWidgets 文件对话框问题

> ID：14045063
> 
> 赞同：0
> 
> 时间：2012-12-26T19:11:45.923
> 
> 标签：c++, wxwidgets

我在尝试学习 WXWidgets 时遇到了一些麻烦。我目前正在尝试使用文件对话框，并且我有一个打开就好了。但是每当我尝试将样式应用于窗口时，我都会遇到麻烦。对于我使用的任何样式，我都会得到一个未声明的标识符。

我的代码如下（是的，我知道，hello world 应用程序。在真正制作一个成熟的应用程序之前，我正在尝试所有我需要学习的东西）

```
 #include "wx/wx.h"
    #include "wx/filedlg.h"

    #include "HelloWorldApp.h"

    IMPLEMENT_APP(HelloWorldApp)

    bool HelloWorldApp::OnInit()
    {
        wxFrame *frame = new wxFrame((wxFrame*) NULL, -1, _T("Hello wxWidgets World"));

        wxFileDialog* OpenDialog = new wxFileDialog(frame, _("Choose a file to open"), wxEmptyString, wxEmptyString, 
            _("Image Files (*.jpg, *.png, *.gif, *.bmp)|*.jpg;*.png;*.gif;*.bmp|Sound Files (*.wav, *.mp3)|*.wav;*.mp3"),
wxFD_MULTIPLE);

        frame->CenterOnScreen();
        frame->Show(true);

        OpenDialog->ShowModal();

        SetTopWindow(frame);
        return true;
    } 
```

没有“wxFD_MULTIPLE”参数，它运行得很好。我正在使用 2.8.12 版的 wxWidgets。

谢谢阅读。我非常感谢任何人可以提供的任何帮助或指导。对不起，如果我错过了一些非常明显的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:20:51.967

在非常旧的 wxWidgets 版本（2.6）中，这种风格被称为`wxMULTIPLE`但`wxFD_MULTIPLE`绝对可以在任何 2.8.x 版本中使用。你应该给出你得到的错误（开始），让我们了解真正发生的事情。

完全独立，您的代码是错误的，因为它包含内存泄漏：对话框必须被销毁，因为模式对话框是所有窗口都应该在堆上分配并且可以在堆栈上分配的通常规则的例外，即用作简单的本地变量，请参阅[文档中的示例](http://docs.wxwidgets.org/trunk/classwx_file_dialog.html#details)。强烈建议查看“对话框”示例代码。

# c - 如何接受超时的套接字

> ID：14045064
> 
> 赞同：7
> 
> 时间：2012-12-26T19:11:48.990
> 
> 标签：c, linux, windows

是否存在超时跨平台解决方案来接受客户端使用`accept`功能而不将套接字设置为非阻塞？

我知道我应该使用`select`功能，但我做错了什么？

```
SOCKET NativesAcceptClient(SOCKET s, int timeout)
{
   int iResult;
   struct timeval tv;
   fd_set rfds;
   FD_ZERO(&rfds);
   FD_SET(s, &rfds);

   tv.tv_sec = (long)timeout;
   tv.tv_usec = 0;

   iResult = select(s, &rfds, (fd_set *) 0, (fd_set *) 0, &tv);
   if(iResult > 0)
   {
      return accept(s, NULL, NULL);
   }
   else
   {
     //always here, even if i connect from another application
   }
   return 0;
} 
```

如何解决？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T19:22:26.360

调用的第一个参数`select`应该等于 fd_set 集中的最大文件描述符加 1（参见[此处](http://linux.die.net/man/2/select)）。尝试将第一个参数更改为`s+1`; 当您的集合中有多个插槽时，您将需要添加一些逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T19:29:45.353

select() 的第一个参数是一个 int，它至少*比*任何位集中的文件描述符的最大值大 1。在这种情况下

```
iResult = select(s + 1, &rfds, (fd_set *) 0, (fd_set *) 0, &tv); 
```

应该管用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T20:59:44.077

`select()`如果套接字发出信号，则返回 >0，超时返回 0，错误返回 -1。什么价值`select()`实际上返回给你？您只检查 >0 和 <=0，这意味着您没有区分 -1 和 0。如果它返回 0，则没有客户端连接到您的套接字，但如果它返回 -1，那么您的套接字很可能一开始就无效。

# github - 如何撤消同步以取回本地仓库中的文件？

> ID：14045068
> 
> 赞同：3
> 
> 时间：2012-12-26T19:12:21.157
> 
> 标签：github, github-for-mac

我对 github 很陌生，几周前我开始在我的 uni group 项目中使用它。

我遇到的问题是： github 上有一个远程仓库，组中的每个人都在使用它。我的笔记本电脑上确实有一个本地存储库，在那里我完成了我的项目部分。我最近使用 Mac 的桌面应用程序提交并同步了我对 github 所做的更新。我遇到了一些错误，同步失败。之后，当我查看本地文件时，它们被 git（非更新版本）中的文件覆盖，我所有的工作都消失了。

你能帮我看看我应该怎么做才能接收我在本地拥有的文件吗？有什么方法可以撤消上次同步。我在网上找到了一些建议，但由于我不确定该使用哪一个，我真的不想再弄乱文件了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:19:03.177

（几乎）对 git 存储库所做的所有更改都可以撤消。我们不知道您输入的命令，但在 Google 中输入它以获得特定的解决方案。

你必须使用类似的东西：

```
$git rebase 
```

# java - Java：将数字存储在向量中，转移到数组，然后从数组中取素数并存储在另一个向量中

> ID：14045071
> 
> 赞同：0
> 
> 时间：2012-12-26T19:12:37.477
> 
> 标签：java, arrays, vector, primes

我将发布问题，然后发布我目前完成的代码。我觉得我很接近它，但我被困在一个我似乎无法弄清楚的部分。开始：

问题：创建一个存储 N 个数字的向量。通过控制台将 N 个非负数输入到数组中。然后创建另一个向量，它只存储 N 个数中的 M 个质数。

到目前为止我的代码：

```
import java.util.*;

public class VectorPrimes {

    public static Vector<Integer> inputVc = new Vector<Integer>();
    public static Vector<Integer> primeVc = new Vector<Integer>(inputVc);

    public static boolean isPrime(int n) {
        boolean prime = true;
        for (int i = 2; i * i <= n; i+= 2) {
            if (n % i == 0) {
                prime = false;
                break;
            }
        }

        return prime;
    }

    public static void main(String[] args) {
        Scanner scan = new Scanner(System.in);
        System.out
                .println("This program will take input of positive numbers and output"
                        + " prime numbers, if any, from the input numbers.");

        System.out
                .println("Input a positive number to check for prime numbers: ");

        boolean looping = true;

        while (looping) {
            System.out
                    .println("Input '0' to finish inputting numbers and print the primes.");
            String userin = scan.nextLine();
            int input = Integer.parseInt(userin);

            if (input != 0) {

                System.out.println("Enter next number: ");

                inputVc.add(input);
            } else if (input == 0) {
                //Integer[] inputArray = inputVc.toArray(new Integer[inputVc.size()]);
                looping = false;

                System.out.println(inputVc);
                System.out.print(primeVc);
                System.exit(0);
            }

        }

    }
} 
```

我确信这不是最好的方法，但这就是我到目前为止所拥有的。需要明确的是，我无法将输入向量 (inputVc) 中的输入数字放入数组 (inputArray) 中，然后将素数存储在素数向量 (primeVc) 中并打印它们。我尝试了 3 或 4 种不同的方法，但我无法将任何东西存储在 primeVc 向量中，它只是保持打印空白。

我不是要代码，我想弄清楚的是如何将素数输入到 primeVc 向量中，然后打印出来。当然 inputVc 数字需要通过 isPrime 方法运行，然后如果为真则添加到 primeVc 向量中，但我很确定这就是我遇到问题的地方。

大家看到什么了？？我肯定错过了一些东西，并且无法为我的生活弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T19:18:39.057

执行以下操作：

```
//...
if (input != 0) {
    System.out.println("Enter next number: ");
    inputVc.add(input);
    if (isPrime(input))
        primeVc.add(input);
}
//... 
```

你也可以创建`while(true)`循环，`break`当你得到`0`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T19:25:44.710

首先你必须调用你的函数`isPrime`然后如果返回值为真然后将它添加到你的第二个列表和其他东西，你的函数`isPrime`将不起作用，你的'i'的初始值为2，然后你将它增加2，所以它将返回`true`每个奇数的值

# c# - 使用 ZipArchive 在 Windows 应用商店应用程序中提取 .zip 文件时获取 InvalidDataException

> ID：14045083
> 
> 赞同：1
> 
> 时间：2012-12-26T19:13:57.650
> 
> 标签：c#, windows-8, windows-runtime, zipfile

我正在开发一个 Windows 应用商店应用程序概念证明，它将打开一个 .zip 文件并将内容提取到特定于应用程序的漫游文件夹。我查看了几个流行的库以提取内容，结果发现这些库不支持 Windows 应用商店应用程序（至少目前还不支持）。所以，我决定使用[ZipArchive](http://msdn.microsoft.com/en-us/library/system.io.compression.ziparchive.aspx)。我在按钮单击处理程序中有以下代码：

```
private async void Button_Click_1(object sender, RoutedEventArgs e)
{
    var fileOpenPicker = new FileOpenPicker();
    fileOpenPicker.FileTypeFilter.Add(".zip");
    var openedFile = await fileOpenPicker.PickSingleFileAsync();

    var booksFolder = await Windows.Storage.ApplicationData.Current.RoamingFolder.CreateFolderAsync("Stuff", CreationCollisionOption.OpenIfExists);
    var folder = await booksFolder.CreateFolderAsync(openedFile.Name.Replace(".zip", string.Empty), CreationCollisionOption.ReplaceExisting);

    using (var stream = await openedFile.OpenStreamForReadAsync())
    {
        using (var zip = new ZipArchive(stream, ZipArchiveMode.Read))
        {
            foreach (var entry in zip.Entries)
            {
                using (var entryStream = entry.Open())
                {
                    var file = await folder.CreateFileAsync(entry.Name);
                    using (var decompressedStream = await file.OpenStreamForWriteAsync())
                    {
                        using (var deflateStream = new DeflateStream(entryStream, CompressionMode.Decompress))
                        {
                            await deflateStream.CopyToAsync(decompressedStream, (int)entry.Length);
                        }
                    }
                }
            }
        }
    }
} 
```

但是，我`InvalidDataException`上线了

```
await deflateStream.CopyToAsync(decompressedStream, (int)entry.Length); 
```

以下是异常的详细信息：

```
System.IO.InvalidDataException was unhandled by user code
  HResult=-2146233087
  Message=Unknown block type. Stream might be corrupted.
  Source=System
  StackTrace:
       at System.IO.Compression.DeflateStream.EndRead(IAsyncResult asyncResult)
       at System.IO.Stream.<BeginEndReadAsync>b__e(Stream stream, IAsyncResult asyncResult)
       at System.Threading.Tasks.TaskFactory`1.FromAsyncTrimPromise`1.Complete(TInstance thisRef, Func`3 endMethod, IAsyncResult asyncResult, Boolean requiresSynchronization)
    --- End of stack trace from previous location where exception was thrown ---
       at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
       at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
       at System.IO.Stream.<CopyToAsyncInternal>d__2.MoveNext()
    --- End of stack trace from previous location where exception was thrown ---
       at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
       at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
       at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
       at POC.MoviePlayer.GroupedItemsPage.<Button_Click_1>d__4.MoveNext() in c:\Users\Brent\Documents\Visual Studio 2012\Projects\POC.MoviePlayer\POC.MoviePlayer\GroupedItemsPage.xaml.cs:line 108
  InnerException: 
```

我尝试导入的 .zip 文件是使用 Windows 资源管理器的发送到压缩（压缩）文件夹选项创建的。我还尝试使用 ZipArchive 在代码中创建一个 .zip 文件，但我也遇到了更多关于该代码的异常。因为无论如何这都不是我理想的用例，所以我不会包含我的代码来创建 .zip，除非它对某人有用。

我希望有人可以在上面的代码中看到我的方式的错误，或者提供一个链接到一个可靠的库来处理最好是开源的 zip 文件。这位沮丧的开发人员将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:22:38.450

您不必解压缩`entry.Open()`. 它已经解压了。

您还可以使用`ZipFileExtensions.ExtractToDirectory`(http://msdn.microsoft.com/en-us/library/system.io.compression.zipfileextensions.extracttodirectory.aspx) 来简化您的代码。

# ios - 侧面导航栏（菜单）（iOS 6），如 Facebook 应用程序 + 故事板

> ID：14045085
> 
> 赞同：4
> 
> 时间：2012-12-26T19:14:07.730
> 
> 标签：ios, xcode, facebook, ios6, storyboard

我想使用 Xcode 和 Storyboards 在 iOS 6 的 Facebook iPhone 应用程序中创建侧边菜单。我怎样才能做到？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-16T01:55:53.407

我们编写了 MMDrawerController 来解决这个问题，但我没有想过在故事板中使用它（仅仅是因为故事板对于大型团队来说是不可维护的）。

[https://github.com/mutualmobile/MMDrawerController](https://github.com/mutualmobile/MMDrawerController)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T19:23:29.603

获取 Inferis/ViewDeck 等自定义组件并以编程方式实现遏制：

```
@interface YourViewController : IIViewDeckController

@end 
```

执行：

```
@implementation YourViewController

-(void)awakeFromNib
{
  UIStoryboard* storyboard = [UIStoryboard storyboardWithName:@"Storyboard" bundle:nil];
  self.centerController = [storyboard instantiateViewControllerWithIdentifier:@"CenterViewController"];
  self.leftController = [storyboard instantiateViewControllerWithIdentifier:@"LeftViewController"];
}

@end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-27T10:14:58.900

如果其他人想做类似的事情..我已经成功使用 ECSlidingView。它已经使用情节提要完成了。还包括一个例子。

[https://github.com/edgecase/ECSlidingViewController.git](https://github.com/edgecase/ECSlidingViewController.git)

编辑：

好吧，在实现了这个 ECSlidingViewController 之后，我发现导航很慢而且很奇怪。毕竟切换到 IIViewDeckController。快速简单，超级棒！

# crystal-reports - Crystal master-detail reports with data in POCOs

> ID：14045086
> 
> 赞同：1
> 
> 时间：2012-12-26T19:14:08.057
> 
> 标签：crystal-reports, poco, subreport

OK, I've worked out how to do master/detail reports from POCO's by having my master data in one collection and detail records in another, and binding the master data collection to the main report and the detail records to a subreport, and telling Crystal how to link the details records to a master record.

However, that's not how my domain model objects are structured. My objects look more like this:

```
public class Invoice
{
    public string InvoiceNumber { get; set; }    
    public string CustomerName { get; set; }    
    public InvoiceLine[] Lines { get; set; }
}

public class InvoiceLine
{
    public string Description { get; set; }    
    public int Quantity { get; set; }    
    public decimal UnitPrice { get; set; }
} 
```

Is it possible to use this structure as the data for a Crystal report, or do I really have to split the master and detail records into two separate collections?

# performance - 优化插入到列表中间

> ID：14045087
> 
> 赞同：4
> 
> 时间：2012-12-26T19:14:12.547
> 
> 标签：performance, optimization, data-structures, arraylist, insertion

我的[算法](http://nlist.codeplex.com)适用于动态增长的列表（连续内存，如 C++ 向量、Java ArrayList 或 C# 列表）。直到最近，这些算法才会将新值插入到列表的中间。当然，这通常是一个非常缓慢的操作。每次添加一个项目时，它之后的所有项目都需要移动到更高的索引。对每个算法都这样做几次，事情变得*非常*缓慢。

我意识到我可以将新项目添加到列表的末尾，然后稍后将它们旋转到位。这是一种选择！

![从后面旋转物品](../Images/a911e60b67908180999b6abaeaee64fb.png)

另一种选择是，当我提前知道要添加多少项目时，将那么多项目添加到后面，移动现有项目，然后在我为自己制作的孔中就地执行算法。不利的是，我必须在列表末尾添加一些默认值，然后覆盖它们。

![打个洞](../Images/84b2592a1b0b6e5c249fa915fe331a20.png)

我对这些选项进行了快速分析，并得出结论认为第二个选项更有效。我的理由是第一个选项的轮换将导致就地交换（需要临时）。我对第二个选项的唯一担心是我正在创建一堆被丢弃的默认值。大多数情况下，这些默认值将是 null 或 mem 填充的值类型。

但是，我希望其他熟悉算法的人告诉我哪种方法更快。或者，也许还有一个我没有考虑过的更有效的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:58:03.440

数组对于在数组末尾以外的任何地方进行大量插入或删除操作效率不高。考虑使用不同的数据结构（例如在其他答案之一中建议的数据结构）是否可能更有效。在不知道您要解决的问题的情况下，几乎不可能提出一种数据结构（没有一种解决方案可以解决所有问题）。话虽如此...

第二种选择绝对是两者中更好的选择。一个更好的选择（避免默认值问题）：只需复制`789`到末尾并`789`用`456`. 所以唯一的中间步骤是`0123789789`.

但是，您的默认值问题（通常）不是一个大问题：

*   在 Java 中，就我所知，您甚至不能为非 0 或空值填充的数组分配内存。我相信 C++ STL 容器也会强制执行这一点（但不是 C++ 本身）。

*   与任何中等大小的类相比，指针的大小是最小的（因此将其分配给默认值也需要最少的时间）（在 Java 和 C# 中，一切都是指针，在 C++ 中，您可以使用指针（类似于`boost::shared_ptr`指针向量优于直接指针）（对原语不适用，它们一开始很小，所以通常也不是什么大问题）。

我还建议在开始插入数组末尾（Java`ArrayList::ensureCapacity`或 C++ `vector::reserve`）之前强制重新分配到指定的大小。如果您不知道 - 可变长度数组实现往往有一个内部数组，该数组大于`size()`返回值或可访问值（以防止在插入或删除值时不断重新分配内存）。

另请注意，与使用 for 循环（例如 Java's `System.arraycopy`）手动复制数组部分相比，复制数组部分的方法更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T19:53:06.353

您可能需要考虑将列表的表示形式从使用动态数组更改为使用其他结构。这里有两个选项可让您有效地实施这些操作：

1.  顺序统计树是一种经过修改的二叉树，它支持在 O(log n) 时间内的任何地方进行插入和选择，以及在 O(log n) 时间内进行查找。由于指针的开销和额外的簿记，这将大大增加您的内存使用量，但应该会大大加快插入速度。但是，它会稍微减慢查找速度。

2.  如果您总是提前知道插入点，您可以考虑切换到链表而不是数组，并保留一个指向将发生插入的链表单元格的指针。但是，这会减慢对 O(n) 的随机访问，这可能是您设置中的一个问题。

3.  或者，如果您总是知道插入将发生在哪里，您可以考虑将您的数组表示为两个堆栈 - 一个堆栈将数组的内容保存在插入点的左侧，另一个将元素的（反向）保存在插入点。这使得插入速度很快，如果你有正确类型的堆栈实现可以保持快速随机访问。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T19:31:17.850

HashMaps 和 Linked Lists 是为您遇到的问题而设计的。给定带有编号项目的索引数据结构，在中间插入项目的困难需要对列表中的每个项目重新编号。

您需要一个经过优化的数据结构，以使插入具有恒定的`O(1)`复杂性。HashMaps 旨在使插入和删除操作闪电般快速，无论数据集大小如何。

我不能通过描述来假装 HashMap 主题公正。这是一个很好的介绍：[http ://en.wikipedia.org/wiki/Hash_table](http://en.wikipedia.org/wiki/Hash_table)

# actionscript-3 - How to implement custom google search for ActionScript 3.0

> ID：14045088
> 
> 赞同：2
> 
> 时间：2012-12-26T19:14:23.857
> 
> 标签：actionscript-3, flash-cs5, google-search

I was trying to implement custom google search in my course-ware that developed in flash. I define a class named 'Main' (Main.as) and put my search code there. But the problem is, that Main class has a conflict with the other codes containing in my course-ware (i've combo box & other basic navigation in course-ware). i have no idea how to resolve it. is there any way to put that code in timeline layer? help please.. thanks. here is my Main class:

```
package 
{
    import flash.display.Sprite;
    import flash.events.MouseEvent;
    import flash.events.KeyboardEvent;
    import flash.ui.Keyboard;
    import flash.net.navigateToURL;
    import flash.net.URLRequest;

    public class Main extends Sprite
    {
        public function Main():void
        {
            searchButton.addEventListener(MouseEvent.MOUSE_UP, google);
            addEventListener(KeyboardEvent.KEY_DOWN, google);
            searchTerms.addEventListener(MouseEvent.MOUSE_DOWN, selectText);
        }

        private function google(e:*):void
        {
            if(e.type == "mouseUp")
            {
                navigateToURL(new URLRequest("http://www.google.com/search?q=" + searchTerms.text));
            }
            else if(e.keyCode == Keyboard.ENTER)
            {
                navigateToURL(new URLRequest("http://www.google.com/search?q=" + searchTerms.text));
            }
        }

        private function selectText(e:MouseEvent):void
        {
            searchTerms.setSelection(0, searchTerms.length);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T03:35:22.587

根据您在[此处](http://www.mediafire.com/view/?r6fhnr26b36o4pp)共享的内容和消息，我假设您正在尝试通过 flash IDE 添加代码，同时为您的应用程序创建一个名为 Main的**文档类。**

有很多方法可以解决这个问题。

假设您希望在添加 Main 类的实例时保持时间线代码不变：

*   将一个空影片剪辑添加到库中，例如 SearchClass。

*   转到影片剪辑的属性并单击操作脚本的导出。

*   将类设置为 Main。请确保 Main.as 相对于 fla 位于外部的位置。

*   将此影片剪辑添加到舞台上的任何帧或图层上。

*   请记住清除文档类字段。

* * *

作为旁注，您还应该将 Main 类重命名为有意义的名称，例如 SearchClass。

如果您想知道设置类与基类，

我们仅在您希望扩展类的功能时使用基类（例如通过添加 UI 元素）。

* * *

您也可以直接从时间线代码中直接调用该类：

```
var main:Main = new Main();

addChild(main); 
```

只要确保Main.as 文件位于fla 旁边... 即确保编译器可以使用该路径。

# maven - maven deploy-file says it succeeded but no files are actually deployed

> ID：14045094
> 
> 赞同：0
> 
> 时间：2012-12-26T19:15:13.900
> 
> 标签：maven

I've build a custom version of an OSS (zookeeper) project and want to deploy it to a local group-wide repository. So I ran:

> *mvn deploy:deploy-file -DgroupId=org.apache.zookeeper -DartifactId=zookeeper -Dversion=3.4.5.1 -Dpackaging=jar -Dfile=./zookeeper-3.4.5.1.jar -DrepositoryId=cabot.maven.repo -Durl=file://xxx/myRepo*

and got lots of success messages:

> *Uploading: file://xxx/myRepo/org/apache/zookeeper/zookeeper/3.4.5.1/zookeeper-3.4.5.1.jar Uploaded: file://xxx/myRepo/org/apache/zookeeper/zookeeper/3.4.5.1/zookeeper-3.4.5.1.jar (1292 KB at 12914.2 KB/sec) Uploading: file://xxx/myRepo/org/apache/zookeeper/zookeeper/3.4.5.1/zookeeper-3.4.5.1.pom Uploaded: file://xxx/myRepo/org/apache/zookeeper/zookeeper/3.4.5.1/zookeeper-3.4.5.1.pom (404 B at 394.5 KB/sec) Downloading: file://xxx/myRepo/org/apache/zookeeper/zookeeper/maven-metadata.xml Downloaded: file://xxx/myRepo/org/apache/zookeeper/zookeeper/maven-metadata.xml (313 B at 43.7 KB/sec) Uploading: file://xxx/myRepo/org/apache/zookeeper/zookeeper/maven-metadata.xml Uploaded: file://xxx/myRepo/org/apache/zookeeper/zookeeper/maven-metadata.xml (313 B at 305.7 KB/sec)*

but no files were actually uploaded...or at least when I go to the repo url I don't see anything.

If an error had been reported I could fix it but in this case there is no error other than the file(s) were not uploaded. How can I troubleshoot this?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:16:26.053

khmarbaise 是 99% 正确的。我正在使用`file://`并且应该声明为`file:///`，即（`file://`加上根`/`）

这些文件正在部署，但不是部署`myRepo`在`/myRepo`我的本地文件系统上。

# jquery - parse JSON Map in JQuery

> ID：14045097
> 
> 赞同：2
> 
> 时间：2012-12-26T19:15:29.587
> 
> 标签：jquery, json

I have the following map where every key is a map which its values are lists as the following json:

```
{
  "key": {
    "source": ["element1", "element2"],
    "target": ["element1", "element2"]
  },
  "key2": {
    "source": ["element1"],
    "target": ["element1"]
  }
}​ 
```

I want to do the following:

1.  Get key ( get("key2")) which will return the map

2.  Go over every key in this map( source and target)

3.  iterate over each item in the result list (element1, element2)

How can I achieve this?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T19:28:12.580

使用 jQuery`.each()`循环遍历`key2`项目。

```
var obj = $.parseJSON(yourJSONString);

$.each(obj["key2"], function(key, value){
    console.log(key); // <-- source, target
    $.each(value, function(arrKey, arrValue){
        console.log(arrValue); // <-- element1, element2 etc etc
    });
}); 
```

如果您不想指定`key2`目标，并且想要遍历所有外部对象，则：

```
$.each(obj, function(outerKey, outerValue){
    console.log(outerKey); // <-- key, key2
    $.each(outerValue, function(key, value){
        console.log(key); // <-- source, target
        $.each(value, function(arrKey, arrValue){
            console.log(arrValue); // <-- element1, element2 etc etc
        });
    });
}); 
```

您也可以在没有 jQuery 的情况下通过使用本机`JSON.parse()`和嵌套的 vanilla`for(var=0; i<something.length; i++)`循环来实现相同的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T19:23:25.203

```
var o = {
  "key": {
    "source": ["element1", "element2"],
    "target": ["element1", "element2"]
  },
  "key2": {
    "source": ["element1"],
    "target": ["element1"]
  }
}​
var key = o.key2;
for(p in key)
{
 elementArray = key[p];
 for(var i=0;i<elementArray.length;i++)
 {
   //access element 1 and 2 here
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T19:42:56.743

Not sure if this is what you needed, but it should lead you down the right path:

```
var things = {
  "key": {
    "source": ["element1", "element2"],
    "target": ["element1", "element2"]
  },
  "key2": {
    "source": ["element1"],
    "target": ["element1"]
  }
};

var get = function( key ) {
    var output = '';

    for( thisKey in things ) {
        if( thisKey === key ) {
            var myThing = things[ key ];

            for( thingKey in myThing ) {
                output += thingKey + ': ' + myThing[thingKey].join(', ') + '<br />';
            }

            return output;
        }
    }
}

document.write( get( 'key' ));
document.write('<hr />');
document.write( get( 'key2' )); 
```

Demo: [http://jsfiddle.net/RucB3/](http://jsfiddle.net/RucB3/)

# python-2.7 - Why isn't this code returning a floating point number? (python 2.7.3)

> ID：14045098
> 
> 赞同：0
> 
> 时间：2012-12-26T19:15:29.850
> 
> 标签：python-2.7

Hi so I just got into python a few days ago and I was working on this assignment from a book. I am supposed to find the property tax and assessment tax on a piece of land.

```
def assessment_value(property_value):
    assessed_value = property_value * 0.60
    print "Your assessed property value is $%d." % assessed_value
    property_tax(assessed_value)

def property_tax(assessed_value):
    tax = (assessed_value / 100.0) * 0.64
    print "Your property tax is $%d." % tax

def main():
    property_value = float(raw_input("Please enter the value of your property. "))
    assessment_value(property_value)

main() 
```

When everything runs using 10000 as the property value the result I get is 38 instead of 38.4\. What confuses me is if I do float(60) * 0.64 it returns the value I want which is 38.4\. But if I set the value of tax to be 60 it returns 38\. Sorry if this is an extremely simple question as I said I am new to python and I have no one to help me.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T19:22:25.440

您正在使用该值作为`%d`字符串中的整数。您将需要使用`%f`. 请参阅[字符串格式化操作的文档](http://docs.python.org/2/library/stdtypes.html#string-formatting-operations)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T19:23:06.483

这是因为你使用`%d`. 对于浮动，您可以使用`%f`或`%.2f`

# vb6 - How can I make my program alert the user if there is text on the page?

> ID：14045099
> 
> 赞同：-1
> 
> 时间：2012-12-26T19:15:30.257
> 
> 标签：vb6

In VB6, I want to make a msg box pop up if the word ERROR: appears on the webpage. If anyone could link me to a website or just help we out, that would be great.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T19:19:28.777

请示例代码如下：

```
URL = "www.yoursite.com"
Set http = CreateObject("Microsoft.XmlHttp")
http.open "GET", URL, FALSE
http.send ""
IF InStr(http.responseText, "ERROR:") > 0 THEN
    MsgBox "Some error occurred"
END IF 
```

# node.js - How can I save the state of pagination in a NodeJS + Express + Jade app?

> ID：14045101
> 
> 赞同：0
> 
> 时间：2012-12-26T19:15:36.433
> 
> 标签：node.js, express

I have list of items in a page with pagination. Let's say, I am in the page 10 and I want to edit an item.

After I click the update button, this code is run:

```
 res.redirect('back') 
```

But this redirects me to the same page, not the last one.

What is the best way to do it with pagination?

# c - Arduino IDE：在循环内打印一次

> ID：14045105
> 
> 赞同：0
> 
> 时间：2012-12-26T19:15:53.947
> 
> 标签：c, loops, arduino

我正在使用 LDR 来告诉我 Arduino 是否有光。我的代码非常简单，但不是发送垃圾邮件“light light light”，我希望它说一次“light”，然后如果灯熄灭，让它说一次“No light”。从“readanalogvoltage”编辑的代码：

```
void setup() {
    // initialize serial communication at 9600 bits per second:
    Serial.begin(9600);
}

// the loop routine runs over and over again forever:
void loop() {
    // read the input on analog pin 0:
    int sensorValue = analogRead(A0);

    // Convert the analog reading (which goes from 0 - 1023) to a voltage (0 - 5V):
    float voltage = sensorValue * (5.0 / 1023.0);

    // print out the value you read:
    if (voltage > 1.5)
    {
        Serial.print("Light");
        Serial.println();
        delay(5000);
    }

    if (voltage < 1.5)
    {
        Serial.print("No Light");
        Serial.println();
        delay(50);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T19:19:11.193

保留一个保存最后状态的变量：

```
void setup() {
    // initialize serial communication at 9600 bits per second:
    Serial.begin(9600);
}

int wasLit = 0;

// the loop routine runs over and over again forever:
void loop() {
    // read the input on analog pin 0:
    int sensorValue = analogRead(A0);

    // Convert the analog reading (which goes from 0 - 1023) to a voltage (0 - 5V):
    float voltage = sensorValue * (5.0 / 1023.0);

    // print out the value you read:
    if (!wasLit && voltage > 1.5) {
        wasLit = 1;
        Serial.print("Light");
        Serial.println();
        delay(5000);
    } else if(wasLit && voltage <= 1.5) {
        wasLit = 0;
        Serial.print("No Light");
        Serial.println();
        delay(50);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T02:07:05.757

这种测试将受益于滞后的使用。特别是如果你有荧光灯，会有一些闪烁。这将导致传感器读数发生变化，以至于它可能不会以干净的方式从 <1.5 变为 >=1.5。

```
boolean bLast = false;

const float vTrip = 1.5;
// you find a good value for this by looking at the noise in readings
// use a scratch program to just read in a loop  
// set this value to something much larger than any variation
const float vHyst = 0.1;

float getLight() {
    int sensorValue = analogRead(A0);
   // Convert the analog reading (which goes from 0 - 1023) to a voltage (0 - 5V):
   float voltage = sensorValue * (5.0 / 1023.0);
   return voltage;
}

void setup() {
    // establish the initial state of the light
    float v = getLight();
    bLast = ( v < (vTrip-vHyst) );
}

void loop() {
    float v = getLight();
    if( bLast ) {
        // light was on
        // when looking for decreasing light, test the low limit
        if( v < (vTrip-vHyst) ) {
             bLast = false;
             Serial.print("Dark");
        }
    }
    else {
        // light was off
        // when looking for increasing light, test the high limit
        if( v > (vTrip+vHyst) ) {
            bLast = true;
            Serial.print("Light");
        }
    }
} 
```

# javascript - Access simple-prefs from xul window

> ID：14045107
> 
> 赞同：0
> 
> 时间：2012-12-26T19:15:58.743
> 
> 标签：javascript, firefox-addon, xul, firefox-addon-sdk

I want to access the simple-prefs module from a XUL settings dialog. My code looks as follows.

```
var WINDOW = Cc["@mozilla.org/embedcomp/window-watcher;1"].getService(Ci.nsIWindowWatcher);
var mainWindow = MEDIATOR.getMostRecentWindow(null);

var pref = require("simple-prefs");
var win = WINDOW.openWindow(mainWindow, "chrome://myextension/content/settings.xul", "aboutMyExtension", "chrome,centerscreen,modal,dependant,dialog", pref); 
```

As shown above, i give the simple prefs reference as an argument to the xul window. In the xul page, I try the following to get the simple-prefs reference.

```
<script type="application/x-javascript" src="chrome://global/content/XPCNativeWrapper.js"/>
... 
XPCNativeWrapper.unwrap(window.arguments[0]) 
```

`window.arguments[0]` is a `[xpconnect wrapped nsISupports]`, but the unwrap() returns a `[xpconnect wrapped nsISupports]` instead of actually unwrapping it.

So, how do I access the simple-prefs module from the xul dialog?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T00:24:36.963

# mysql - LEFT OUTER JOIN with mySQL analyse all rows

> ID：14045109
> 
> 赞同：1
> 
> 时间：2012-12-26T19:16:22.020
> 
> 标签：mysql

my tables are simple:

```
mysql> desc muralentry ;
+-----------------+------------------+------+-----+---------+----------------+
| Field           | Type             | Null | Key | Default | Extra          |
+-----------------+------------------+------+-----+---------+----------------+
| id              | int(11)          | NO   | PRI | NULL    | auto_increment |
| user_src_id     | int(11)          | NO   | MUL | NULL    |                |
| content         | longtext         | NO   |     | NULL    |                |
+-----------------+------------------+------+-----+---------+----------------+

mysql> desc muralentry_user ;
+-----------------+------------------+------+-----+---------+----------------+
| Field           | Type             | Null | Key | Default | Extra          |
+-----------------+------------------+------+-----+---------+----------------+
| muralentry_id   | int(11)          | NO   | PRI | NULL    | auto_increment |
| userinfo_id     | int(11)          | NO   | MUL | NULL    |                |
+-----------------+------------------+------+-----+---------+----------------+ 
```

Im doing the following query:

```
SELECT DISTINCT *
FROM muralentry
LEFT OUTER JOIN muralentry_user ON (muralentry.id = muralentry_user.muralentry_id)
WHERE user_src_id = 1 
```

The explain:

```
+----+-------------+----------------------------+------+-------------------------------------------------------+-------------------------------------+---------+------------------------------------------+------+-----------------+
| id | select_type | table                      | type | possible_keys                                         | key                                 | key_len | ref                                      | rows | Extra           |
+----+-------------+----------------------------+------+-------------------------------------------------------+-------------------------------------+---------+------------------------------------------+------+-----------------+
|  1 | SIMPLE      | muralentry                 | ref  | muralentry_99bd10ae                                   | muralentry_99bd10ae                 | 4       | const                                    |  686 | Using temporary |
|  1 | SIMPLE      | muralentry_user            | ref  | muralentry_id,muralentry_user_bcd7114e                | muralentry_user_bcd7114e            | 4       | muralentry.id                            |   15 |                 |
+----+-------------+----------------------------+------+-------------------------------------------------------+-------------------------------------+---------+------------------------------------------+------+-----------------+ 
```

Good result (for me :D) But, when i add another where clause:

```
SELECT DISTINCT *
FROM muralentry
LEFT OUTER JOIN muralentry_user ON (muralentry.id = muralentry_user.muralentry_id)
WHERE user_src_id = 1 OR userinfo_id = 1; 
```

The explain:

```
+----+-------------+----------------------------+------+-------------------------------------------------------+-------------------------------------+---------+------------------------------------------+---------+-----------------+
| id | select_type | table                      | type | possible_keys                                         | key                                 | key_len | ref                                      | rows    | Extra           |
+----+-------------+----------------------------+------+-------------------------------------------------------+-------------------------------------+---------+------------------------------------------+---------+-----------------+
|  1 | SIMPLE      | muralentry                 | ALL  | muralentry_99bd10ae                                   | NULL                                | NULL    | NULL                                     | 1140932 | Using temporary |
|  1 | SIMPLE      | muralentry_user            | ref  | muralentry_id,muralentry_user_bcd7114e                | muralentry_user_bcd7114e            | 4       | muralentry.id                            |      15 | Using where     |
+----+-------------+----------------------------+------+-------------------------------------------------------+-------------------------------------+---------+------------------------------------------+---------+-----------------+ 
```

Wow... the result if ALOT worst... How can i "fix" this? Should i create some index to do this job? Or recreate my query?

I'm expecting the following result: 'muralentry' rows where the user is 'user_src_id' AND the 'muralentry_user' rows where he is 'userinfo_id'.

-- edit --

I edited the question because when I wrote an AND actually wanted an OR... sorry for that!

# c# - Parallel.For 使用 step != 1

> ID：14045112
> 
> 赞同：8
> 
> 时间：2012-12-26T19:16:43.017
> 
> 标签：c#, for-loop, parallel-processing, task-parallel-library

有没有办法实现`Parallel.For`这个`for`循环的版本？

```
for (int i = 0; i < 100; i += 2) { DoStuff(i); } 
```

我没有看到接受 step 参数的重载，尽管我想不出任何原因这在逻辑上是不可能的。

[对此](https://stackoverflow.com/questions/7142446/parallel-for-step-size)和[这个](https://stackoverflow.com/questions/3980300/changing-the-incremental-value-of-a-c-sharp-parallel-for-loop)问题的公认答案建议在使用生成`Parallel.ForEach`的一系列`int`s 上使用`Enumerable.Range`，但在我的情况下，我使用的是线程本地数据~~，因此`Parallel.ForEach`不是一个选项~~。

另一种选择是只检查`i % 2 == 0`我的循环体中是否存在 and `return`，但这仍然会执行线程本地数据初始化器`Func`和终结器`Func`。下面是演示此选项的代码片段：

```
Parallel.For<Bar>(0, limit, 

    () => new Bar(), //thread local data initialize

    (i, state, local) => //loop body
    {
        if (i % 2 != 0) return local;
        local.foo += DoStuff(i);
        return local;
    },

    (local) => //thread local data post-action
    {
        lock (loopLocker)
        {
            globalData.foo += local.foo;
        );
    }
); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-26T19:19:36.640

这里有一个提示：

```
for (int j = 0; j < 50; j++) { i = 2*j; DoStuff(); } 
```

一般来说，看看你是否可以计算出迭代次数以及从迭代次数到变量值的转换。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-27T10:31:13.290

这是处理阶梯索引的另一种方法

```
private void ParallelForEachProcessSteppedIndexes()
        {
            Parallel.ForEach(SteppedIterator(0, 100, 2), (index) => DoStuff(index));
        }

private static IEnumerable<int> SteppedIterator(int startIndex, int endIndex, int stepSize)
        {
            for (int i = startIndex; i < endIndex; i = i + stepSize)
            {
                yield return i;
            }
        } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-26T19:41:21.183

Ben 的建议非常适合恒定步长，例如 +2、+3 等。

或者（如果你的步骤是随机的）你可以使用`Parallel.ForEach`例如

```
int[] input = { 1, 3, 4, 5, 7, 10, 20, 25 }; 

Parallel.ForEach(input,
    () => new Bar(), //thread local data initialize
    (i, state, local) => //loop body
    {
        // your code
    },
    (local) => //thread local data post-action
    {
        // your code
    } 
```

变量`i`将从`input`数组中获取数据。您可以替换`input`为`Enumerable.Range`（或将其与`With`等结合使用）

如果您只想获得`i`变量中的素数，那将非常有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-11T13:02:05.450

转换为 VB.NET 的新迭代器函数后，Toan 的回答对我有用

```
Private Sub LoopExample()
    Parallel.ForEach(SteppedIterator(1,100,5), AddressOf Test)

End Sub

Private Iterator Function SteppedIterator(startIndex As Integer, endIndex As Integer, stepSize As Integer) As IEnumerable(Of Integer)
    For i As Integer = startIndex To endIndex Step stepSize
        Yield i
    Next

End Function

Private Sub Test(i As Integer, state As ParallelLoopState, index As Long)
    Debug.WriteLine(i.ToString)
End Sub 
```

# sharepoint - Adding a document to a SharePoint list using a Ribbon button

> ID：14045113
> 
> 赞同：-1
> 
> 时间：2012-12-26T19:16:47.370
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-api

I have a SharePoint solution using a custom document library. I need a way to allow users to added documents, but I need to specify the file name based on strict naming conventions. I am currently trying to use a Sharepoint workflow, but there is some contention for document control. I was thinking I could write a ribbon button that would added the document, and immediately name it. It looks like ribbon buttons calls javascript, but I not sure how to create a new document using a Javascript function. Any suggestions or alternatives?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:17:02.243

您不需要使用 javascript 创建文档，您只需要编写一个自定义操作 [RibbonButton]，该操作调用某个程序集中的方法，按照您的规则将新文档添加到所需的文档库中。如果您只能使用一组特定的规则添加文档，请确保禁用该自定义文档库上的“添加项目”按钮。

您应该查看此链接：[http ://www.sharepointnutsandbolts.com/2010/01/customizing-ribbon-part-1-creating-tabs.html](http://www.sharepointnutsandbolts.com/2010/01/customizing-ribbon-part-1-creating-tabs.html)

希望能帮助到你。

# visual-studio-2010 - Visual Studio、插件和 Nuget

> ID：14045119
> 
> 赞同：2
> 
> 时间：2012-12-26T19:17:18.353
> 
> 标签：visual-studio-2010, msbuild, visual-studio-2012, continuous-integration, nuget

通常，“[持续包集成](http://www.xavierdecoster.com/post/2011/07/18/continuous-package-integration-nuget-vs-source-control)”涉及源代码控制、构建服务器和参与团队尽可能频繁地获取更新的包。但我正在寻找这个故事的一个更极端的版本——没有 CM——完全发生在开发人员的机器上，一举一动。我想要的更详细的描述是这样的......

使用 Visual Studio 2010 或 2012，假设有一个实现插件系统的“foo.csproj”应用程序。每个插件代表一个 nuget 包，并具有相应的 Visual Studio 项目。这些项目中的每一个都是包含基本应用程序的同一 VS 解决方案的一部分。

我想要以下发展故事：

1.  更改插件的源代码。
2.  构建解决方案，或执行调试启动，这会导致 msbuild...
    1.  重建更改的插件
    2.  然后 nuget 将每个插件打包并上传到本地存储库（可以只是 VS 解决方案的子文件夹）
    3.  重建基础应用程序。
    4.  刷新基础应用程序的 nuget-plugin 依赖项，这些依赖项刚刚在前面的步骤中更新。 *备注*：
        1.  这假设 MSBuild 神奇地知道在构建、打包和上传所有插件之前不执行最后一步。
        2.  “foo”应用程序本身可以使用 nuget.core 来刷新包，但在这种情况下，我假设 VS 构建过程完成了这一步。

我想知道这个故事是否足够普遍，以至于有“常见”（msbuild？）脚本。

我自己对应该如何处理的猜测如下：

1.  所有插件项目都放置在 VS 解决方案文件夹结构中某处的公共“插件”文件夹中。
2.  基本应用程序“项目依赖项”配置有对所有插件项目的引用。 *注意：*我不喜欢手动管理这些项目依赖项的想法。
3.  基础应用程序“foo.csproj”有一个构建步骤，它扫描“foo.csproj”XML 以查找它在“plugins”文件夹中的依赖项，并为每个启动 nuget 打包和部署。
4.  然后，基础应用程序启动 nuget“全部更新”。希望这是可能的，即使 msbuild 已经在执行中。

简而言之，基础应用程序能够立即使用已更改的插件。这是在没有签入、构建服务器或手动和任意请求更新插件包的情况下完成的。

如果这个故事不存在预先存在的脚本，那么我将自己制作。但我还是想知道：

1.  可以将上面的第 2 步转换为通用的吗？也就是说，我如何说服 msbuild 在特定文件夹中的所有项目都已构建之前不要构建“基础应用程序”？请记住，我不想手动管理项目依赖项。
2.  这种整体方法有什么缺陷吗？

我特别想知道是否有一个已经存在的 nuget-visual-studio 集成可以帮助我可能忽略的这个故事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T20:16:04.323

这是一个很长的问题要回答，所以不确定我是否涵盖了这个问题的所有内容；我将尽我所能。首先，您的情况并不少见。您计划的方法的前两个步骤对我来说似乎没问题（您可以自由选择插件项目的位置）。

有一点是肯定的：您必须手动定义构建顺序，因为您的解决方案不知道使用 (NuGet) 插件的项目是否依赖于包含这些插件源代码的项目。不要使用 Visual Studio 中的内置构建顺序对话框，而是查看MSDN 博客上的[这篇文章](http://blogs.msdn.com/b/visualstudio/archive/2010/12/21/incorrect-solution-build-ordering-when-using-msbuild-exe.aspx)，了解正确的方法（或者您最终可能会得到在本地工作但在构建服务器上不起作用的东西）。参考帖子中的关键 MSBuild 元素如下：

```
<ProjectReference Include="... foo.csproj"> 
    <ReferenceOutputAssembly>false</ReferenceOutputAssembly> 
</ProjectReference> 
```

现在，关于那些插件的打包、部署和使用：

*   每个**插件项目都应在****构建后步骤**中触发包创建和发布。[我博客上的这篇](http://xavierdecoster.com/nuget-tfs-preview-a-challenging-combination)文章包含 ZIP 下载，其中包含很多可用于入门的 MSBuild 内容。例如，我在 Release 版本中为类库版本、打包和发布 NuGet 包。我正在使用 NuGet 命令行工具来`pack`（[命令参考](http://docs.nuget.org/docs/reference/command-line-reference#Pack_Command)）和`push`（[命令参考](http://docs.nuget.org/docs/reference/command-line-reference#Push_Command)）包。
*   **消费应用程序项目**应在**预构建步骤**中运行`NuGet.exe update <packages.config>`（[命令参考](http://docs.nuget.org/docs/reference/command-line-reference#Update_Command)）。

 **还要注意你**不是**[在并行](http://www.hanselman.com/blog/FasterBuildsWithMSBuildUsingParallelBuildsAndMulticoreCPUs.aspx)运行构建。**

# php - 使用 foreach 从 CMS 页面将产品添加到购物车？

> ID：14045120
> 
> 赞同：0
> 
> 时间：2012-12-26T19:17:23.297
> 
> 标签：php, javascript, magento

我正在尝试使用 foreach 循环从 CMS 页面添加产品到购物车，该循环显示特定类别的产品列表。问题是我的添加到购物车表单只会将其中一种产品提交到购物车。

谁能指出我正确的方向，我已经在这里待了几个小时！

我不确定这是否是我的形式，或者这在 Magento 中是否可能，但我很感激一些建议......

```
<?php if($this->getItems()->getSize()): ?>
<div class="block block-related">
    <div class="block-title">
        <strong><span><?php echo $this->__('Related Products') ?></span></strong>
    </div>
    <div class="block-content">
        <p class="block-subtitle"><?php echo $this->__('Check items to add to the cart or add to your wishlist') ?>&nbsp;<br /></p>
        <div class="form-horizontal">
        <?php foreach($this->getItems() as $_item): ?>

                <div class="control-group">
                    <label for="related-checkbox<?php echo $_item->getId() ?>" class="control-label">
                        <a class="fancybox static-thumbs pull-left" href="<?php echo $this->helper('catalog/image')->init($_item, 'small_image')->resize(500, 450); ?>" title="<?php echo $this->htmlEscape($_item->getName()) ?>" ><img src="<?php echo $this->helper('catalog/image')->init($_item, 'small_image')->resize(135, 135) ?>" width="150" height="125" alt="<?php echo $this->htmlEscape($_item->getName()) ?>" /></a>
                    </label>

                    <div class="controls">
                    <label class="checkbox">
                        <?php if(!$_item->isComposite() && $_item->isSaleable()): ?>
                            <?php if (!$_item->getRequiredOptions()): ?>
                                <input type="checkbox" class="checkbox related-checkbox" id="related-checkbox<?php echo $_item->getId() ?>" name="related_products[]" value="<?php echo $_item->getId() ?>" />
                            <?php endif; ?>
                        <?php endif; ?>
                                                        <?php if ($this->helper('wishlist')->isAllow()) : ?>
                            <a href="<?php echo $this->getAddToWishlistUrl($_item) ?>" class="pull-right" title="<?php echo $this->__('Add to Wishlist') ?>" rel="tooltip"><span class="icon-check"></span></a>

<form action="<?php echo $this->getAddToCartUrl($_item) ?>" method="post">
       <fieldset>
        <p class="product-name"><?php echo $this->__('Quantity:'); ?></p>
  <select name="qty" class="span1">
  <?php $i = 1 ?>
  <?php do { ?>
    <option value="<?php echo $i?>">
      <?php echo $i?>
      <?php $i++ ?>
    </option>
    <?php } while ($i <= (int)Mage::getModel('cataloginventory/stock_item')->loadByProduct($_item)->getMaxSaleQty()) ?>
</select>

            <button title="<?php echo $this->__('Add to Cart') ?>" class="btn btn-danger" onclick="productAddToCartForm.submit(this)"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button>

                <?php else: ?>
            <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
       </fieldset>
</form>
                        <?php endif; ?>
                        <?php echo $this->getPriceHtml($_item, true, '-related') ?>
                        <a href="<?php echo $_item->getProductUrl() ?>"><?php echo $this->htmlEscape($_item->getName()) ?></a>

                    </label>
                    </div>
                </div>
        <?php endforeach ?>
        </div>
    </div>
  <script type="text/javascript">
    $j(document).ready(function() {
        $j(".fancybox").fancybox();
    });
</script>

 <script type="text/javascript">
    //<![CDATA[
        var productAddToCartForm = new VarienForm('product_addtocart_form');
        productAddToCartForm.submit = function(button, url) {
            if (this.validator.validate()) {
                var form = this.form;
                var oldUrl = form.action;

                if (url) {
                   form.action = url;
                }
                var e = null;
                try {
                    this.form.submit();
                } catch (e) {
                }
                this.form.action = oldUrl;
                if (e) {
                    throw e;
                }

                if (button && button != 'undefined') {
                    button.disabled = true;
                }
            }
        }.bind(productAddToCartForm);

        productAddToCartForm.submitLight = function(button, url){
            if(this.validator) {
                var nv = Validation.methods;
                delete Validation.methods['required-entry'];
                delete Validation.methods['validate-one-required'];
                delete Validation.methods['validate-one-required-by-name'];
                if (this.validator.validate()) {
                    if (url) {
                        this.form.action = url;
                    }
                    this.form.submit();
                }
                Object.extend(Validation.methods, nv);
            }
        }.bind(productAddToCartForm);
    //]]>
    </script>
</div>
<?php endif ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T10:56:16.230

让它工作，对于任何试图在 CMS 页面上添加相关产品的人，请使用以下代码：

```
<?php if($this->getItems()->getSize()): ?>
<div class="block block-related">
    <div class="block-title">
        <strong><span><?php echo $this->__('Related Products') ?></span></strong>
    </div>
    <div class="block-content">
        <p class="block-subtitle"><?php echo $this->__('Check items to add to the cart or add to your wishlist') ?>&nbsp;<br /></p>
        <div class="form-horizontal">
        <?php foreach($this->getItems() as $_item): ?>
             <div class="control-group">
                    <label for="related-checkbox<?php echo $_item->getId() ?>" class="control-label">
                        <a class="fancybox static-thumbs pull-left" href="<?php echo $this->helper('catalog/image')->init($_item, 'small_image')->resize(500, 450); ?>" title="<?php echo $this->htmlEscape($_item->getName()) ?>" ><img src="<?php echo $this->helper('catalog/image')->init($_item, 'small_image')->resize(135, 135) ?>" width="135" height="135" alt="<?php echo $this->htmlEscape($_item->getName()) ?>" /></a>
                    </label>
<div class="controls">
<label class="checkbox">
        <?php if(!$_item->isComposite() && $_item->isSaleable()): ?>
            <?php if (!$_item->getRequiredOptions()): ?>
                <input type="checkbox" class="checkbox related-checkbox" id="related-checkbox<?php echo $_item->getId() ?>" name="related_products[]" value="<?php echo $_item->getId() ?>" />
        <?php endif; ?>
    <?php endif; ?>
<?php if ($this->helper('wishlist')->isAllow()) : ?>
    <a href="<?php echo $this->getAddToWishlistUrl($_item) ?>" class="pull-right" title="<?php echo $this->__('Add to Wishlist') ?>" rel="tooltip"><span class="icon-check"></span></a>

<p class="product-name span6">
 <a href="<?php echo $_item->getProductUrl() ?>" class="product-title"><?php echo $this->htmlEscape($_item->getName()) ?></a>
 <br />
    <?php echo nl2br($this->getProduct()->getDescription()) ?>
</p>
<form action="<?php echo $this->getAddToCartUrl($_item) ?>" method="post">

<fieldset>
  <label class="product-name"><?php echo $this->__('Quantity:'); ?></label>
  <select name="qty" class="span1">
  <?php $i = 1 ?>
  <?php do { ?>
    <option value="<?php echo $i?>">
      <?php echo $i?>
      <?php $i++ ?>
    </option>
    <?php } while ($i <= (int)Mage::getModel('cataloginventory/stock_item')->loadByProduct($_item)->getMaxSaleQty()) ?>
</select>
<button class="btn btn-danger"><span><?php echo $this->__('Add to Cart') ?></span></button>            
</fieldset>

</form>
<?php endif; ?>
<?php echo $this->getPriceHtml($_item, true, '-related') ?>
</label>

</div>
    </div>
    <hr />
        <?php endforeach ?>
        </div>
    </div> 
```

# php - 在 Windows php 任务计划上隐藏 cgi 命令窗口

> ID：14045124
> 
> 赞同：0
> 
> 时间：2012-12-26T19:17:43.580
> 
> 标签：php, cgi, scheduled-tasks

我试图为 php 文件设置 Windows 任务计划并成功完成。问题是“ **C:\xampp\php\php.exe** ”，它是旧版本 php5 的 cgi exe。但是对于较新的版本，它应该是“ **C:\xampp\php\php-cgi.exe** ”，现在我的整个数据包看起来像这样：

**C:\xampp\php\php-cgi.exe -f "C:\xampp\htdocs....\file.php"**

因此，在此基础上，我的问题是：

1.  当脚本在那里运行时，cgi exe 的命令窗口总是出现并在半秒后消失。有没有办法隐藏或禁用窗口？

2.  我读了某事。关于**php-win.exe**。消息来源将其描述为没有出现窗口。所以我试了一下，但脚本不能与 **C:\xampp\php\php-win.exe**一起运行。

你们知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:37:24.547

将您的`php script.php`调用放入 .bat 文件中，然后将其添加到任务中：

```
CMD /C START /MIN your.bat 
```

或者您可以与其他用户（除了您自己）一起运行 .bat 文件...

# file-upload - 如何在 Rails 3 中调试文件上传

> ID：14045125
> 
> 赞同：0
> 
> 时间：2012-12-26T19:17:44.980
> 
> 标签：file-upload, ruby-on-rails-3.2

在将应用程序从 Rails 2.3/Ruby 1.8.7 迁移到 Rails 3.2.9/Ruby 1.9.3 时，我遇到了将文件上传到数据库的问题。不使用 Paperclip 或 Carrierwave gem（由于遗留原因，这不是一种选择。

在接收上传文件的 controller#create 操作中，params 哈希有一个字符串，而不是预期的 ActionDispatch::Http::UploadedFile 对象。

字符串是`"#<ActionDispatch::Http::UploadedFile>"`. 所以上传失败 b/c 这个字符串不响应#read。

该文件已正确上传到 Rails（查看浏览器时间线工具）。

中间件堆栈与全新的 Rails 3.2.9 应用程序相同。

我处于停顿状态，不知道如何调试它。在传入的请求和控制器之间，有些东西正在从 UploadedFile 对象中生成一个字符串。

谁能给我任何线索在哪里看？

提前致谢

# asp.net-mvc-4 - ASP.NET MVC RemoteAttribute 验证不起作用 - 未执行操作

> ID：14045127
> 
> 赞同：5
> 
> 时间：2012-12-26T19:18:35.400
> 
> 标签：asp.net-mvc-4, jquery-validate, unobtrusive-validation, remote-validation

我一直在努力弄清楚为什么没有触发 ValidationController 操作。

我在项目范围的 web.config 中启用了设置：

```
<add key="ClientValidationEnabled" value="true" />
<add key="UnobtrusiveJavaScriptEnabled" value="true" /> 
```

我有以下控制器：

```
[OutputCache(Location = OutputCacheLocation.None, NoStore = true)]
public class ValidationController : Controller
{
    private readonly IUserRepository userRepository;

    public ValidationController(IUserRepository userRepository)
    {
        this.userRepository = userRepository;
    }

    public JsonResult IsUserNameAvailable(string username)
    {
        User user = userRepository.Get(u => u.UserName == username);

        if (user == null) return Json(true, JsonRequestBehavior.AllowGet);
        else return Json(false, JsonRequestBehavior.AllowGet);
    }
} 
```

和以下视图模型：

```
 [Required(ErrorMessage = "Required *")]
    [StringLength(50, MinimumLength = 4, ErrorMessage = "Please keep the username between four and twenty character.")]
    [Remote("IsUserNameAvailable", "Validation", ErrorMessage = "A user with this username already exists.")]
    [Display(Name = "Username")]
    public string UserName { get; set; } 
```

我的表单中有以下字段：

```
<form id="registerForm">
     ...
     @Html.ValidationMessageFor(m => m.UserName)
     @Html.TextBoxFor(m => m.UserName)
     @Html.LabelFor(m => m.UserName)
</form> 
```

我做了 ajax 表单提交，并且已经让服务器端验证完美运行：

```
$.post("/Account/Register", $('#registerForm').serialize(), function(){
   updateFormWithServerGeneratedErrors();
}) 
```

尽管服务器为我的字段生成了正确的输入标签：

```
<input ... data-val-remote-url="/Validation/IsUserNameAvailable" data-val-remote-additionalfields="*.UserName" data-val-remote="A user with this username already exists." ... > 
```

我可以通过输入 url 手动点击我的操作：“/Validation/IsUserNameAvailable?username=SomeName”但 Fiddler 没有显示在按键或焦点更改时对该 url 发出的任何请求。

根据[本教程](http://msdn.microsoft.com/en-us/library/gg508808%28v=vs.98%29.aspx)，我不需要编写任何 javascript 即可使其正常工作。是的，当我开始修改表单时，我已经加载了 jquery.validate.js 和 jquery.validate.unobtrusive.js 脚本。

这里有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T18:05:18.620

好的，我找到了答案。

[在这里](https://stackoverflow.com/a/14135013/1267778)引用 Darin Dimitrov的话：

“不显眼的验证在动态添加到 DOM 的元素时无法开箱即用 - 例如向服务器发送 AJAX 请求，该请求返回部分视图，然后将该部分视图注入到 DOM 中。

为了使其工作，您需要使用不显眼的验证框架注册这些新添加的元素。为此，您需要在新添加的元素上调用 $.validator.unobtrusive.parse。您应该将此代码放在将部分注入您的 DOM 的 AJAX 成功处理程序中。”

框架在页面加载时调用此方法一次，在我的场景中的问题是表单本身是一个 jquery 对话框，因此即使初始加载也是“动态的”。我必须在对话框加载时使用不显眼的框架注册表单元素：

```
$.validator.unobtrusive.parse('#registerForm'); 
```

如果它没有在服务器端验证，我的 ajax 调用也将返回并替换表单，如下所示：

```
registerDialog.empty().html(result.viewResult); 
```

所以我必须在成功回调上调用 parse() 以确保在 ajax 提交后验证继续工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-01T13:52:20.840

您需要将您的 JsonResult 方法参数名称从

```
public JsonResult IsUserNameAvailable(string username) 
```

**到**

```
public JsonResult IsUserNameAvailable(string UserName) 
```

它应该与属性名称相同，区分大小写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T03:56:02.257

验证功能没有被触发的问题是这段代码

```
public JsonResult IsUserNameAvailable(string username)
{
    User user = userRepository.Get(u => u.UserName == username);

    if (user == null) return Json(true, JsonRequestBehavior.AllowGet);
    else return Json(false, JsonRequestBehavior.AllowGet);
} 
```

应该添加到 中`AccountController`，而不是`ValidationController`. 删除`ValidationController`类并将`IsUserNameAvailable`方法添加到您的`AccountController`类中。

还要改变模型中的线，应该是这样的

```
[System.Web.Mvc.Remote("IsUserNameAvailable", "Account")] 
```

这将解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T03:29:33.030

您似乎忘记为表单指定绑定操作。我在下面的代码中尝试了这个并且它有效

```
<form id="registerForm" action="Controller/Action">
     @Html.ValidationMessageFor(m => m.UserName)
     @Html.TextBoxFor(m => m.UserName)
     @Html.LabelFor(m => m.UserName)
</form> 
```

或者简单地说：

```
@using(Html.BeginForm()) {
     @Html.ValidationMessageFor(m => m.UserName)
     @Html.TextBoxFor(m => m.UserName)
     @Html.LabelFor(m => m.UserName)
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-19T15:41:15.730

我有同样的问题。简单地改变这个：

```
public JsonResult IsUserNameAvailable(string username)
{
    User user = userRepository.Get(u => u.UserName == username);

    if (user == null) return Json(true, JsonRequestBehavior.AllowGet);
    else return Json(false, JsonRequestBehavior.AllowGet);
} 
```

到：

```
public JsonResult IsUserNameAvailable(string Username)
{
    User user = userRepository.Get(u => u.UserName == Username);
    if (user == null) 
    {
        return Json(true, JsonRequestBehavior.AllowGet);
    }
    return Json(false, JsonRequestBehavior.AllowGet);       
} 
```

`username`哪个`UserName`是你的

```
public string UserName { get; set; } 
```

我认为它区分大小写。

希望它会有所帮助:)

# android - View 方法 getId() 返回什么？

> ID：14045131
> 
> 赞同：11
> 
> 时间：2012-12-26T19:18:41.600
> 
> 标签：android

View 的 getId() 方法和 XML 文件中定义的 id 之间有什么关联？有没有？我的 ID 如下所示：“field1”、“field2”……最后的这些数字对我的应用程序非常重要，我需要检索它们。有什么办法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-01-10T11:25:17.397

要获取资源 ID 名称：

```
res.getResourceEntryName(view.getId()) 
```

你会得到“field1”

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-26T19:25:43.437

> View 的 getId() 方法和 XML 文件中定义的 id 之间有什么关联？

`getId()`返回`android:id`值，或您通过设置的值`setId()`。

> 我的 ID 如下所示：“field1”、“field2”

在您的 XML 中，它们可能看起来像`@+id/field1`和`@+id/field2`. 这些是分配 ID 资源，在编译时转换为数字。这些是您在 Java 代码中称为`R.id.field1`和的数字`R.id.field2`。

> 最后的这个数字对我的应用程序非常重要，我需要检索它们。有什么办法吗？

有一个大的 switch 语句将 ID 与`R.id.field1`等进行比较。或者，设置一个值和“非常重要”的数字`HashMap`之间的映射。`getId()`或者，在您的 ID 值上找到一些不涉及魔术名称的其他解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T19:23:38.550

> View 的 getId() 方法和 XML 文件中定义的 id 之间有什么关联？有没有？

从[文档](http://developer.android.com/reference/android/view/View.html#getId%28%29)：

> 返回此视图的标识符。
> 
> 相关 XML 属性
> 
> 机器人：身份证
> 
> 退货
> 
> 用于标识视图的正整数，如果视图没有 ID，则为 NO_ID

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-20T10:01:15.517

It returns a positive number which android studio gives to every component of android app for backup use, In case the developer does not provide the ID of that component, android studio uses that number as a unique ID for that component.

# php - 通过插入 time() 严格标准错误

> ID：14045138
> 
> 赞同：0
> 
> 时间：2012-12-26T19:19:17.853
> 
> 标签：php, sql, pdo

我想插入用户注册的时间：

```
function InsertUserToSql()  
...
$stmt = $this->dbh->prepare("INSERT INTO users 
(username, password, email, regdate) VALUES 
(:username,:password, :email, :regdate)");

        $stmt->bindParam(':username', $this->Username);
        $stmt->bindParam(':password', $this->Password);
        $stmt->bindParam(':email', $this->Email);
        $stmt->bindParam(':regdate', time());  // this line shows the error
        $stmt->execute();
... 
```

错误：`Strict standards: Only variables should be passed by reference`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:21:59.227

```
$stmt = $this->dbh->prepare("INSERT INTO users 
(username, password, email, regdate) VALUES 
(:username,:password, :email, UNIX_TIMESTAMP())"); 
```

至于错误消息 - 它非常适合谷歌搜索。

# javafx-2 - 带有集合的 TableView

> ID：14045140
> 
> 赞同：2
> 
> 时间：2012-12-26T19:19:19.933
> 
> 标签：javafx-2

我应该如何使用 1 列的集合？我努力了：

```
private ObservableList<EmailU> emails= FXCollections.observableList(new ArrayList<EmailU>());

public ObservableList<EmailU> emailsProperty() {
        return emails;
    } 
```

接着

```
 col_email.setCellValueFactory(
        new PropertyValueFactory<Client, ObservableList<EmailU>>("emails"));
    col_email.setCellFactory(new MultilineTextFieldCellFactory()); 
```

但得到以下错误：

```
SEVERE: javafx.scene.control.Control loadSkinClass Failed to load skin 'StringProperty [bean: TableRow[id=null, styleClass=cell indexed-cell table-row-cell], name: skinClassName, value: com.sun.javafx.scene.control.skin.TableRowSkin]' for control TableRow[id=null, styleClass=cell indexed-cell table-row-cell]
java.lang.RuntimeException: java.lang.ClassCastException: com.sun.javafx.collections.ObservableListWrapper cannot be cast to javafx.beans.property.ReadOnlyProperty* 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T21:16:09.097

`FooProperty`方法应该根据[javafx.beans.property.Property](http://docs.oracle.com/javafx/2/api/javafx/beans/property/Property.html)返回属性。这些属性能够通知其他实体有关它们的更改，这对于绑定和 TableView 工作至关重要。在您的情况下，它将是`ListProperty`：

```
private ListProperty<EmailU> emails = new SimpleListProperty<>(
                       FXCollections.observableList(new ArrayList<EmailU>()));

public ListProperty<EmailU> emailsProperty() {
    return emails;
}

public ObservableList<EmailU> getEmails() {
    return emailsProperty().get();
}

public void setEmails(ObservableList<EmailU> emails) {
    emailsProperty().set(emails);
} 
```

请注意，您需要为 TableView 的正确工作提供 getter 和 setter。

# php - 不要在 CakePHP 视图中缓存动态内容

> ID：14045143
> 
> 赞同：0
> 
> 时间：2012-12-26T19:19:27.030
> 
> 标签：php, cakephp, caching

我正在尝试使用缓存助手缓存视图。它适用于静态内容或会话内容，`<!--nocache-->{...}<!--/nocache-->`但不适用于内部操作变量。

例如，如果我有一篇可缓存的文章和一个不可缓存的用户定义的文章评分，我不能`<!--nocache-->echo $rating;<!--/nocache-->`用来显示这个评分，因为评分变量也会被缓存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:00:03.750

如果我理解正确，这是预期的行为。

一旦缓存了一个动作，所有的视图变量都会被序列化，并且不会再次调用该动作（直到缓存被清除等）。

要么：不要使用视图缓存，要么将缓存时间设置为更频繁地过期。

如果您希望“实时”提高评分，那么每次有人修改评分时让您的应用清除缓存。

您的应用至少在某些时候会受益于缓存版本。

# javascript - Underscore.js：将对象数组转换为多级嵌套对象？

> ID：14045145
> 
> 赞同：1
> 
> 时间：2012-12-26T19:19:34.377
> 
> 标签：javascript, arrays, functional-programming, underscore.js, transformation

你将如何使用 underscore.js 以一种功能性的方式进行这种转换？我最近多次重复以下模式，这对我来说似乎有点难看。

```
var fruitList = [
        { id:1, name:lime, color:green, size:small },
        { id:2, name:banana, color:yellow, size:large },
        { id:3, name:lemon, color:yellow, size:small },
        { id:4, name:papaya, color:green, size:large },
        { id:5, name:kiwi, color:green, size:small },
        { id:6, name:apple, color:green, size:small },
        { id:7, name:pear, color:yellow, size:small },
        { id:8, name:grape, color:green, size:small },
        { id:9, name:mango, color:yellow, size:large },
        { id:10, name:honeydew, color:green, size:large }
    ],
    fruitByColorThenSize = {};

jQuery.each(fruitList, function (fruit) {
    if (!fruitByColorThenSize[fruit.color]) {
        fruitByColorThenSize[fruit.color] = {};
    }

    if (!fruitByColorThenSize[fruit.color][fruit.size]) {
        fruitByColorThenSize[fruit.color][fruit.size] = {};
    }

    fruitByColorThenSize[fruit.color][fruit.size][fruit.id] = fruit.name;
}); 
```

fruitByColorThenSize 看起来与此类似：

```
{
    yellow: {
        large: {
            2: 'banana',
            9: 'mango'
        },
        small: {
            3: 'lemon',
            7: 'pear'
        }
    },
    green: {
        large: {
            4: 'papaya',
            10: 'honeydew'
        },
        small: {
            1: 'lime',
            5: 'kiwi',
            6: 'apple',
            8: 'grape'
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T21:23:00.423

有一个很好的函数[`groupBy`](http://underscorejs.org/#groupBy)，它完全符合您的要求，但仅适用于一维对象。在[这个答案](https://stackoverflow.com/a/13869056/1048572)中，我编写了它的通用多维版本，但对于您的情况，以下~~功能~~脚本就足够了：

```
var fruitList = […];

var fruitByColorThenSize = _.groupBy(fruitList, "color");
for (var color in fruitByColorThenSize) {
    var byColor = _.groupBy(fruitByColorThenSize[color], "size");
    for (var size in byColor) {
        var bySize = _.groupBy(byColor[size], "id");
        for (var id in bySize) {
            bySize[id] = bySize[0].name;
        }
        byColor[size] = bySize;
    }
    fruitByColorThenSize[color] = byColor;
} 
```

> 我最近多次重复以下模式

然后写一个泛型函数抽象它！这很简单：

```
function getBy(arr, valprop, props) {
    var res = {};
    $.each(arr, function(obj) {
        var acc = res;
        for (var i=0; i<props.length; i++) {
            var prop = obj[props[i]];
            if (i==props.length-1) 
                acc[prop] = obj[valprop];
            else {
                if (! (prop in acc))
                    acc[prop] = {};
                acc = acc[prop];
            }
        }
    });
    return res;
}
// usage:
var fruitByColorThenSize = getBy(fruitList, "name", ["color", "size", "id"]); 
```

# sql - 更新查询错误

> ID：14045146
> 
> 赞同：0
> 
> 时间：2012-12-26T19:19:36.077
> 
> 标签：sql, sql-server

我正在尝试更新表**tarRecurInvcLineDS**中存在的表**tciSTran中的记录**

这是我写的查询...

```
 update [mas500_test_app].[dbo].[tciSTaxTran] 
 set STaxSchdKey = 310
 where STaxTranKey in
 (select STaxTranKey  from [mas500_test_app].[dbo].[tarRecurInvcLineDs] 
```

我收到此错误

`Unable to update the tciSTaxTran record because it is trying to reference a record in tciSTaxSchedule that does not exist.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:22:41.303

似乎您在 tciSTaxTran.STaxSchdKey 和 tciSTaxSchedule 表之间有一个外键。tciSTaxSchedule 表是否有主键为 的行`310`？

# css - css3旋转在ie9中不起作用

> ID：14045148
> 
> 赞同：-1
> 
> 时间：2012-12-26T19:19:42.630
> 
> 标签：css

我发现这个有用的链接解释了 IE9 [CSS3 变换中的旋转：旋转；在 IE9 中](https://stackoverflow.com/questions/4865167/css3-transform-rotate-in-ie9)

不幸的是，使用其中任何一个都不起作用

```
.mark.festival:hover{
    -ms-transform: rotate(360deg);
    transform: rotate(360deg);
} 
```

我在各个地方都看到这两个规则都适用于 IE9，尽管我读到的大多数情况下你需要 -ms 前缀

[http://www.wanderfest.com](http://www.wanderfest.com)是链接，如果你想检查它

该站点未按照此处的建议处于怪癖模式

[http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/2567faea-fcea-4ddf-9116-1e2c703ee2e7/](http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/2567faea-fcea-4ddf-9116-1e2c703ee2e7/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:23:55.447

caniuse.com 上的支持有一个警告：您需要使用 MS `filter`：此转换器会将 CSS3 转换转换为 MS 矩阵以用于过滤器：[http ://www.useragentman.com/IETransformsTranslator/](http://www.useragentman.com/IETransformsTranslator/)

例子：

```
 #transformedObject {
      -moz-transform:    rotate(360deg);
      -o-transform:      rotate(360deg);
      -webkit-transform: rotate(360deg);
      transform:         rotate(360deg);

      /* IE8+ - must be on one line, unfortunately */ 
      -ms-filter: "progid:DXImageTransform.Microsoft.Matrix(M11=1, M12=0, M21=0, M22=1, SizingMethod='auto expand')";

      /* IE6 and 7 */ 
      filter: progid:DXImageTransform.Microsoft.Matrix(
           M11=1,
           M12=0,
           M21=0,
           M22=1,
           SizingMethod='auto expand');
 } 
```

# android - Android xml布局部分？

> ID：14045149
> 
> 赞同：0
> 
> 时间：2012-12-26T19:19:44.860
> 
> 标签：android, android-layout

我想知道是否有任何方法可以在“layout.xml”中指定对某些“layout_element.xml”的引用，以便我可以重用一些代码。

这将有助于页眉、页脚和其他可重用的“视图”块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:32:44.657

为了有效地重复使用完整的布局，您可以使用`<include/>`and`<merge/>`标签在当前布局中嵌入另一个布局。

`<include>`标签基本上意味着'<strong>获取该文件并将其内容粘贴到此处'</p>

`<merge>`我们必须使用的布局必须包含在合并标签下，以便我们可以包含来自其他 xml 的布局。

my_activity.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    android:orientation="vertical">

    // some views

    <include layout="@layout/repeated_layout"/>

   // probably more views

</LinearLayout> 
```

重复布局.xml：

```
<merge xmlns:android="http://schemas.android.com/apk/res/android">

    // the views to be merged

</merge> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T19:28:04.313

目前在文档中提到了两个这样的结构。第一个是[Include](http://developer.android.com/training/improving-layouts/reusing-layouts.html)，第二个是[Merge](http://android-developers.blogspot.de/2009/03/android-layout-tricks-3-optimize-by.html) Tag（主要用于优化）。

# c# - ReceiveBufferSize 的 Windows Mobile 问题

> ID：14045150
> 
> 赞同：0
> 
> 时间：2012-12-26T19:20:07.670
> 
> 标签：c#, sockets, windows-mobile, compact-framework

所以我有点挑剔，我有这个代码在桌面 .net 4.5 上运行，但它不会在 Windows CE/Windows Mobile 6.1 Pro 的 .NET 3.5 中编译......

```
public void Init()
        {
            try
            {
                myTcpListener = new TcpListener(myAddress, myPortNumber);
                myTcpListener.Server.RecieveBufferSize = 500000;
            }
            catch (Exception ex)
            {
                throw ex;
            }
        } 
```

也尝试使用`TcpClient.ReceiveBufferSize = 500000;`，但这会引发异常。

> 在 getsockopt 或 setsockopt 调用中指定了未知、无效或不受支持的选项或级别

我有点不确定如何继续......目的是有一个足够大的缓冲区来容纳 500.000 字节......也许我需要以不同的方式处理这个问题。

编辑：这是源代码

```
using System;

using System.Collections.Generic;
using System.Text;
using System.Net.Sockets;
using System.Net;
using System.Threading;
using System.Diagnostics;

namespace SmartDevice_Server
{
    /// <summary>
    /// ClientConnection saves connection information is used to keep context in Async and Event calls
    /// </summary>
    /// <param name="networkStream"> NetworkStream Object of TCPClient</param>
    /// <param name="data">Byte array that serves as Buffer</param>
    /// <returns></returns>
    public class ClientConnection : EventArgs
    {
        public NetworkStream NetworkStream { get; private set; }
        public byte[] Data { get; private set; }
        public int byteReadCount { get; set; }

        public ClientConnection(NetworkStream networkStream, byte[] data)
        {
            NetworkStream = networkStream;
            Data = data;
        }
    }

    /// <summary>
    /// MySocket - Is a server that listens for events and triggers Events upon Request Completion 
    /// </summary>
    public class MySocketTCP
    {
        #region Members
        TcpListener myTcpListener;
        TcpClient myTcpClient;
        NetworkStream myNetworkStream;

        const string localHost = "127.0.0.1";
        IPAddress myAddress = IPAddress.Parse(localHost);
        int myPortNumber = 58889;
        byte[] myData;

        int bytesReadCount;
        const int MIN_REQUEST_STRING_SIZE = 10;

        int TimeStart;

        //Event Setup
        public event socketReadCompleteHandler socketReadCompleteEvent;
        public EventArgs eventArguments = null;
        public delegate void socketReadCompleteHandler(MySocketTCP myTcpSocket, ClientConnection eventArguments);

        //BufferSize
        public const int myBufferSize = 300000;

        #endregion

        //Constructor
        /// <summary>
        /// MySocketTCP Constructor
        /// NOTE: By default connects to local host (127.0.0.1:58889)
        /// </summary>
        /// <returns></returns>
        public MySocketTCP()
        {
            Init();
        }

        /// <summary>
        /// Constructor overloaded to receive IPAdress Host, and Port number
        /// </summary>
        /// <param name="hostAddress">IPAdress that represent an IP address</param>
        /// <param name="portNumber">Integer that represents the port number</param>
        /// <returns></returns>
        public MySocketTCP(IPAddress hostAddress, int portNumber)
        {
            myAddress = hostAddress;
            myPortNumber = portNumber;

            Init();
        }

        /// <summary>
        /// Initializes the TCPListner with address, and port number
        /// </summary>
        /// <returns></returns>
        public void Init()
        {
            try
            {
                myTcpListener = new TcpListener(myAddress, myPortNumber);
            }
            catch (Exception ex)
            {
                throw ex;
            }
        }

        /// <summary>
        /// Listens Asynchronously to Clients, class a recieveMessageHandler to process the read
        /// 
        /// * TODO_Listener_Timer: After you accept a connection you wait for data to be Read indefinitely
        /// Possible solution: Use a timeout to close the socket connection.
        /// Check WIKI, TODOS
        /// </summary>
        /// <returns></returns>
        public void ListenAsync()
        {
            myTcpListener.Start();

            while (true)
            {
                //blocks until a client has connected to the server
                myTcpClient = myTcpListener.AcceptTcpClient();
                //myTcpClient.ReceiveBufferSize = 300000;

                var client = new ClientConnection(myTcpClient.GetStream(), new byte[myTcpClient.ReceiveBufferSize]);

                // Capture the specific client and pass it to the receive handler
                client.NetworkStream.BeginRead(client.Data, 0, client.Data.Length, r => receiveMessageHandler(r, client), null);
            }
        }

        /// <summary>
        /// Callback is used to read the request Asynchronously, triggers socketReadCompleteEvent
        /// </summary>
        /// <param name="asyncResult"></param>
        /// <param name="clientInstance"></param>
        /// <returns></returns>
        public void receiveMessageHandler(IAsyncResult asyncResult, ClientConnection clientInstance)
        {
            bytesReadCount = 0;

            lock (clientInstance.NetworkStream)
            {
                try
                {
                    bytesReadCount = clientInstance.NetworkStream.EndRead(asyncResult);
                    clientInstance.byteReadCount = bytesReadCount;
                }
                catch (System.IO.IOException ioexcp)
                {
                    Debug.WriteLine(ioexcp.ToString());
                }
                catch (System.ObjectDisposedException objdispexc)
                {
                    Debug.WriteLine(objdispexc.ToString());
                }
                catch (Exception excp)
                {
                    Debug.WriteLine(excp.ToString());
                }
            }

            if (bytesReadCount < MIN_REQUEST_STRING_SIZE)
            {
                //Could not read form client.
                Debug.WriteLine("NO DATA READ. Close Connection");
                //If there is no data then close connection.

                //clientInstance.NetworkStream.Close();
            }
            else
            {
                if (socketReadCompleteEvent != null)
                {
                    socketReadCompleteEvent(this, clientInstance);
                }
            }
        }

        /// <summary>
        /// Reads the request, uses the ClientConnection for context
        /// </summary>
        /// <param name="connObj">Connection object contains the NetworkStream,
        /// Data Buffer, and Number of bytes read.</param>
        /// <returns></returns>
        public string ReadAsync(ClientConnection connObj)
        {
            int bytesReadCount = connObj.byteReadCount;
            byte[] myData = connObj.Data;

            string xmlMessage;

            try
            {
                xmlMessage = Encoding.ASCII.GetString(myData, 0, bytesReadCount);
            }
            catch (Exception ex)
            {
                throw ex;
            }

            return xmlMessage;
        }

        /// <summary>
        /// Is used to send/write the message to the correct socket
        /// Closes the connection.
        /// </summary>
        /// <param name="connObj">context object</param>
        /// <param name="outMessage">message to send</param>
        /// <returns></returns>
        public void WriteAsync(ClientConnection connObj, string outMessage)
        {
            const int timeDivisor = 10000;
            byte[] outBytes = Encoding.ASCII.GetBytes(outMessage);

            try
            {
                Delay(outBytes.Length/timeDivisor);
                connObj.NetworkStream.Write(outBytes, 0, outBytes.Length);
            }
            catch (Exception ex)
            {
                throw ex;
            }

            //TODO_5254: Closes the connection, check MoSync side.
            //try
            //{
            //    connObj.NetworkStream.Close();
            //}
            //catch (Exception ex)
            //{
            //    throw ex;
            //}

            int TimeEnd = Environment.TickCount;
            int TimeResult = TimeEnd - TimeStart;
        }

        /// <summary>
        /// Closes TCPClient
        /// Warning: Does not close the underlying connection.
        /// </summary>
        /// <returns></returns>
        public void Close()
        {
            try
            {

                myTcpClient.Close();
            }
            catch (Exception ex)
            {       
                throw ex;
            }
        }

       /// <summary>
       /// Helper Function creates timeouts and delays.
       /// </summary>
       /// <param name="ms"></param>
       /// <returns></returns>
       private void Delay(int ms)
       {
           int time = Environment.TickCount;

           do
           {
               if (Environment.TickCount - time >= ms) return;
           } while (true);
       }
    }
} 
```

更新：

```
try
                {
                    bytesReadCount = clientInstance.NetworkStream.EndRead(asyncResult);
                    clientInstance.stringBuilder.Append(Encoding.ASCII.GetString(clientInstance.Data, 0, bytesReadCount));
                    //If buffer is bigger than myTcpClient.ReceiveBufferSize
                    while (clientInstance.NetworkStream.DataAvailable)
                    {
                        Debug.WriteLine("More data to read...");
                        //clientInstance.NetworkStream.EndRead(asyncResult);
                        int chuckByteSize = clientInstance.NetworkStream.Read(clientInstance.Data, 0, myTcpClient.ReceiveBufferSize);
                        bytesReadCount += chuckByteSize;
                        //string textReceived = Encoding.ASCII.GetString(clientInstance.Data, 0, chuckByteSize);
                        clientInstance.stringBuilder.Append(Encoding.ASCII.GetString(clientInstance.Data, 0, chuckByteSize));
                        //BP - Ver Data
                    }
                    clientInstance.byteReadCount = bytesReadCount;
                    //string sbString = clientInstance.sb.ToString();
                    //int sizeString = sbString.Length;
                }
                catch (System.IO.IOException ioexcp)
                {
                    Debug.WriteLine(ioexcp.ToString());
                }
                catch (System.ObjectDisposedException objdispexc)
                {
                    Debug.WriteLine(objdispexc.ToString());
                }
                catch (Exception excp)
                {
                    Debug.WriteLine(excp.ToString());
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T21:41:43.347

根据您的问题，这不是 100% 清楚，您的意思是 50,000 还是 500,000（代码和文本不一致）。

[该文档表明](http://msdn.microsoft.com/en-us/library/aa916772.aspx)with`setsockopt`并且`SOL_SOCKET`应该`SO_RCVBUF`在操作系统中有效，尽管您所在的平台可能不允许它。

也就是说，我通过套接字传输的数据量远远超过 50k（甚至 500k），而且我从未设置过此属性。您使用它是否有特定原因？如果您省略它，我希望使用套接字的调用仍然有效。

# ocaml - ocamllex 中的 yytext 等效项

> ID：14045154
> 
> 赞同：1
> 
> 时间：2012-12-26T19:20:17.220
> 
> 标签：ocaml, yacc, lex

我的常规（不是 ocaml）yacc 文件中有以下内容：

```
wsorword         :  WS 
                    {
                      strcpy($$, yytext);
                    }
                 |  WORD
                    {
                      strcpy($$, yytext);
                    }
                 ; 
```

如何解决 ocamllex/ocamlyacc 中 WS 或 WORD 返回的词位？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T19:48:12.527

好的，您的 yacc 代码正在使用 lex 提供的全局变量。OCaml 不禁止全局变量，但它们与编写代码的函数式方式不一致。如果你将你的词法缓冲区设置为全局名称`!lexbufr`（比如），手册说你可以通过调用`Lexing.lexeme !lexbufr`. 请注意，我自己没有尝试过。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T20:05:25.503

我会在`mly`文件中将我的标记定义为：

```
%token<string> WORD WS 
```

在`mll`文件中，我将使用以下操作：

```
 rule lexer = parse
   | ws                    { WS (Lexing.lexeme lexbuf) }
   | word                { WORD (Lexing.lexeme lexbuf) } 
```

当然，其中`ws`和`word`是它们各自标记的正则表达式。

最后，语法规则变为：

```
wsorword: 
  WS             { $1 }
| WORD        { $1 }
; 
```

# c# - ECMA 内存模型下的字段和寄存器交错读取

> ID：14045155
> 
> 赞同：1
> 
> 时间：2012-12-26T19:20:20.117
> 
> 标签：c#, multithreading, volatile

这是 - 据我所知 - 一个严格的学术/理论问题。

据我了解（Vance Morrison， http: [//msdn.microsoft.com/en-us/magazine/cc163715.aspx](http://msdn.microsoft.com/en-us/magazine/cc163715.aspx)，“无法创建易失性内存访问......”），`volatile`C# 中的关键字——除此之外-- 防止通过“代码运动”引入相应字段的任何额外读取。

有一个不使用 C# 的双重检查锁定的变体 ( [http://blogs.msdn.com/b/brada/archive/2004/05/12/130935.aspx](http://blogs.msdn.com/b/brada/archive/2004/05/12/130935.aspx)`volatile` ) ：

```
public sealed class Singleton
{
   private static Singleton value;
   private static object syncRoot = new object();

   public static Singleton Value
   {
      get
      {
         if (value == null)
         {
            lock (syncRoot)
            {
               if (value == null)
               {
                  Singleton newVal = new Singleton();
                  Thread.MemoryBarrier(); // ensures that all is ready to publish
                  value = newVal;
               }
            }
         }

         return value;
      }
   }     
} 
```

但是，如果我们只假设 ECMA 内存模型（而不是更强大的 .NET 2.0 内存模型），我想知道这个变体是否会失败？换句话说（通过尝试与 Morrison 的一种构造进行类比，在他的图 8 下），假设代码如下所示：

```
public sealed class Singleton
{
   private static Singleton value;
   private static object syncRoot = new object();

   public static Singleton Value
   {
      get
      {
         Singleton register = value; // read the field into a register
         if (value == null) // re-read the field (for some unknown reason)
         {
            lock (syncRoot)
            {
               if (value == null)
               {
                  Singleton newVal = new Singleton();
                  Thread.MemoryBarrier();
                  value = register = newVal; // update the register and the field
               }
            }
         }

         return register; // return the reference from the register
      }
   }     
} 
```

在第二个代码示例中，如果线程在将尚未初始化的字段读入寄存器后立即被抢占，并且如果线程在其他线程初始化该字段后的某个时间恢复，则该属性将返回 null。如果有人在代码中以这种方式编写它（使用名为 的局部变量`register`），我会认为它被破坏了。但是“代码运动”——在理论上，如果不是在实践中——是否可以有效地将第一个样本（在代码中）变成第二个样本（用于执行）？我相信`volatile`将防止这种情况。而且我不知道为什么任何现实世界的系统都可能在将值复制到寄存器后重新读取该字段，但这不是我要驱动的重点。我想我的问题真的归结为：在 ECMA 内存模型下，上面隐含的转换（将第一个样本转换为第二个样本）是否有任何无效（作为“代码运动”的问题）？

在第二个代码示例中，从单个线程的角度来看，在读取寄存器时，寄存器肯定与字段保持相同的引用。但是我们知道我们可能正在查看一个线程共享的字段，如果代码运动引入对该字段的读取是有效的，那么我们是否会遇到读取该字段可能会看到不同值的可能性从登记册目前持有的那一份？如果没有任何东西（如`volatile`）表明这将是一个问题，那么实际上会*阻止*代码运动以这种方式交错读取一个字段和一个（假设的）寄存器（除了没有任何理由这样做） ? 进入`lock`（及其嵌入`MemoryBarrier`) 应该（大概）表明一个寄存器——一个真正的寄存器，而不是一个代表寄存器的局部变量——可能是陈旧的，但是如果线程永远不会进入`lock`（由于前面的重复读取）呢？

显然这很难测试，因为 .NET 内存模型提供了更强的保证。

# javascript - 链接到另一个页面和选项卡的选项卡中包含的锚标记

> ID：14045162
> 
> 赞同：0
> 
> 时间：2012-12-26T19:21:28.420
> 
> 标签：javascript, jquery, html, tabs

我刚刚发现如何使用 ID 分配链接到特定的锚标记和平。现在我还需要知道如何链接到选项卡内的锚点：来自另一个选项卡（可能在同一页面或另一个）和另一个页面。

与此问题相关的代码片段如下 **请注意，这不适用于标签！**

这是我包含所有图像的地方

**html**

```
<div class="container" id="tab4">
<a href=".jpg" id="tab></a>
<a href=".jpg" id="tab1></a>
<a href=".jpg" id="tab2></a>
<a href=".jpg" id="tab3></a> 
```

这就是我链接到他们的地方

**html**

```
<a href="1.html#tab"><img src=".jpg" /></a>
<a href="1.html#tab1"><img src=".jpg" /></a>
<a href="1.html#tab2"><img src=".jpg" /></a>
<a href="1.html#tab3"><img src=".jpg" /></a> 
```

# c++ - c++程序得到分段错误

> ID：14045166
> 
> 赞同：1
> 
> 时间：2012-12-26T19:21:47.127
> 
> 标签：c++

我一直在进行一些编码，但遇到了分段错误。我已经尽力让它发挥作用，但我一直失败。现在我正在寻求帮助。这是我的代码：

```
#include <iostream>
#include <string>

using namespace std;

int main()
{

    string symbols = "ABCDEFGHIJKLMNOPRSTUVYZ_";

    int sim, a = 0;

    sim = symbols.size();

    string temp[sim];

    while(sim > 0)
    {
    sim--;

    temp[sim] = symbols.substr(sim, 1);

    cout << temp[sim] << endl;
    }

} 
```

好吧，这有点用，但是如果我做一些更改，它就会崩溃。

我改变：

```
 while(sim > 0)
    {
    sim--;

    temp[sim] = symbols.substr(sim, 1);

    cout << temp[sim] << endl;
    } 
```

对此：

```
 while(a < sim)
    {
    a++;

    temp[a] = symbols.substr(a, 1);

    cout << temp[a] << endl;
    } 
```

我得到了 SIGFAULT，我真的不明白这是错误的。我使用了调试器，它并没有真正显示它在哪一行崩溃，它只是显示：

程序收到信号 SIGSEGV，分段错误。

在`__gnu_cxx::__exchange_and_add(int volatile *, int) () ()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:24:37.000

想想当`a == sim-1`你立即递增它时会发生什么，所以它变成了`sim`，然后访问`temp[a]`，尽管对.`temp`有有效的索引。`0``sim-1`

我建议您放弃语言扩展 - 即 VLA 的 - 并`std::vector`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T19:26:50.843

当`a == sim-1`它将重新进入`while`循环时，增加，`a`然后它会在尝试访问时崩溃。 `a++``a == sim``temp[a]`

`a`您可以通过在 while 循环结束而不是开始时递增来解决此问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T19:34:15.173

嗯，使用 temp[a] 很清楚，一个更微妙的问题是 substr(a, 1) 以防 a == sym 将返回您分配给 temp[a] 的空字符串。这可能不会导致崩溃，但仍然是一个错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T19:25:58.683

您的 a in temp[a] 将作为从 1 到 sim（含）的索引。temp 数组具有 sim 元素，这意味着 thay 数组的有效索引是从 0 到 sim-1 （含）。

移动你一个++；成为while循环中的最后一条语句，这将起作用。

# sql - 将外键从非空更改为空

> ID：14045168
> 
> 赞同：3
> 
> 时间：2012-12-26T19:21:56.487
> 
> 标签：sql, sql-server

这是我的项目所需要的，但我只需要知道如何在 sql 中获取一个设置为非空列的外键，并使其成为空列而不删除任何内容。我有一个在这里引用的大型数据集，但是，展望未来，我不想将 fk 作为必填列。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-26T19:30:44.103

假设这里的 MySQL 和一个名为 INT 的列`col`，您可以这样做：

```
ALTER TABLE mytable MODIFY col INT NULL 
```

ETA：对于 SQL Server，看起来像这样：

```
ALTER TABLE mytable ALTER COLUMN col INT NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-27T12:50:40.123

简单使用

```
Alter Table table_name Alter Column column_name datatype 
```

没有提到外键约束如下

```
Alter Table table_name Alter Column column_name datatype foreign key references ref_table(ref_table_col) 
```

# java - 在 Eclipse 中键入时查看错误列表

> ID：14045169
> 
> 赞同：1
> 
> 时间：2012-12-26T19:21:57.547
> 
> 标签：java, eclipse

我一直在浏览 Eclipse SDK Version: 4.2.1 中的菜单，但没有找到扩展错误视图的方法，因此我可以很好地看到错误。我在右侧看到一个非常窄的可能错误面板，在我附加的图片中可见，但我无法展开它（无法将轮廓拖到左侧）以查看它包含的内容。如果有人经历过同样的事情，只是寻找一种快速的方法来解决它。谢谢！

![在此处输入图像描述](../Images/472fae1b3bae22b34c19fde3fc69e663.png)

如果我“无论如何”启动程序而不考虑它包含错误的警告，我目前能够在控制台窗口中看到错误（但这看起来很奇怪，应该有一种方法可以在您键入时在窗口中查看错误和警告）： ![在此处输入图像描述](../Images/c45981bc67bf8fbd31cd0d42ca6be41c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T19:28:29.940

尝试以下步骤：

1.  右键单击透视图，例如`Java`或`Java EE`（显示在右上角的图标栏中）并选择`reset`选项以重置当前透视图
2.  `Alt+Shift+Q, X`或`Window > Show View -> General -> Problems`打开问题视图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T19:25:26.847

您可以在 Eclipse 中打开显示当前编译器错误的“问题”窗口：

```
Window->Show View->Other...->General->Problems 
```

# user-interface - 在同一控件中同时显示 RTL 和 LTR 语言

> ID：14045172
> 
> 赞同：1
> 
> 时间：2012-12-26T19:22:10.710
> 
> 标签：user-interface, multilingual, right-to-left

我正在开发一个 WinForms 应用程序，我有几个控件（特别是列表框和数据网格视图）需要同时显示 RTL 和 LTR 数据的**混合**。例如，我有一个包含英语、阿拉伯语、德语和希伯来语字符串的列表框。显然，列表框控件具有 RightToLeft 属性，目前，我的 UI 中有一个按钮，可让用户根据需要在 RTL 和 LTR 之间切换该属性。我的客户似乎对这种方法感到满意，但我很好奇其他设计师/开发人员通常如何处理这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:52:58.370

我不太了解 Winforms，但您可能可以将 Unicode 方向控制字符添加到实际字符串中。这很hacky，但它应该可以工作。

以下是相关字符：

*   RLM (Right-to-left mark) - 一个不可见的从右到左的字母。您可以将它放在右括号之后以确保它出现在右端，或者放在希伯来语字符串和数字之间以确保数字出现在字符串的左侧。
*   LRM（从左到右标记）- 与 RLM 类似，但用于从左到右。
*   RLE (Right-to-left Embedding) - 把它放在 RTL 字符串的开头
*   LRE (Left-to-Right Embedding) - 把它放在 LTR 字符串的开头
*   PDF（流行定向格式） - 将其放在以 RLE 或 LRE 开头的字符串的末尾。它类似于 HTML 中的结束标记：<span dir="rtl">שלום* *</span>* *

您可以从字符映射中复制和粘贴它们，或者从 Unicode 数字创建字符串并在运行时将它们连接起来。

希望能帮助到你。

# android - libgdx 中的桌面应用程序在配置后出现错误

> ID：14045175
> 
> 赞同：0
> 
> 时间：2012-12-26T19:22:21.507
> 
> 标签：android, libgdx

[我忘了记下libgdx wiki](http://code.google.com/p/libgdx/wiki/ProjectSetup)上的第一行， 现在将 java 1.7 用于 libgdx ..

```
import com.badlogic.gdx.backends.lwjgl.LwjglApplication;
 public class DesktopGame {
    public static void main (String[] args) {
            new LwjglApplication(new Game(), "Game", 480, 320, false);
    }
  } 
```

`Configure build path` 即使在完成所有配置步骤后，这是唯一给我错误的文件。

有没有其他方法可以解决它？

在这种情况下，如果我安装了java 6，它会影响项目的conf和工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T08:10:06.723

我也在使用 Java 1.7，我确信这可能不是问题。我建议您使用 gdx-setup-ui 来创建项目。在这里查看[http://code.google.com/p/libgdx/wiki/ProjectSetupNew](http://code.google.com/p/libgdx/wiki/ProjectSetupNew)，使用此设置创建项目要容易得多。

# java - 插入数据库仅填充 2 行

> ID：14045178
> 
> 赞同：0
> 
> 时间：2012-12-26T19:22:26.670
> 
> 标签：java, mysql

您好，我想将值插入到数据库表有 3 行的数据库中

id - 项目 - 日期

在这里，我想填写 Item 和 Date 行，因为 ID 是一个 Auto_increment 字段，其中每条记录的 id++ 都是。但现在我不知道我的查询在 Java 中应该是怎样的，因为它与我以前（​​在 PHP 中）有很大不同

我认为这是相关的代码

```
st = con.createStatement();
String query = "INSERT INTO toDoList " + "VALUES ('" + value + "', 'CURDATE()')";
st.executeUpdate(query); 
```

谁能告诉我第一条记录要填什么？我只尝试了空引号，但这会导致错误..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T19:24:25.347

由于 id 是自动递增的，因此您无需提供任何值，只需在查询中列出所有列减去您的 id 列。

```
String query = "INSERT INTO toDoList(item, date) " + "VALUES ('" + value + "', 'CURDATE()')"; 
```

我看到您是 Java 开发的新手，我建议您使用[**preparedStatement**](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)而不是简单的语句来使用JDBC 执行SQL 查询，以防止SQL 注入

例子：

```
String query="INSERT INTO toDoList(item, date) VALUES (?,?)";";
PreparedStatement st = conn.prepareStatement(query);
st.setString(youritemval);
st.setDate(new SimpleDateFormat("dd/MM/yyyy").format(Calendar.getInstance().getTime()));
st.executeUpdate(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T19:28:22.317

如果您的值不适用于所有列，那么您必须在插入数据时定义列名。

```
String query = "INSERT INTO toDoList(item,date) " + "VALUES ('" + value + "', 'CURDATE()')"; 
```

# html - 没有空格的内联 div 并在所有的后面渲染父 div

> ID：14045179
> 
> 赞同：0
> 
> 时间：2012-12-26T19:22:27.830
> 
> 标签：html, css

我试图在水平行中获得三个 div。每个 div 都有不同的高度。我想要他们的父元素（黄色）。这是我最接近的东西：

```
<div style="background-color: yellow;">
    <div style="display:inline-table; background-color:red; width:50px; height:50px;">aaa</div>
    <div style="display:inline-table; background-color:green;">
       <div>bbbbb</div>
       <div>ccccc</div>
    </div>
    <div style="display:inline-table; background-color:blue;">ddddd</div>
</div> 
```

[http://jsfiddle.net/UuZeM/1/](http://jsfiddle.net/UuZeM/1/)

这几乎正​​是我想要的，但我不知道如何摆脱块之间的空间。

我还尝试将每个元素设置为“float:left”而不是“display:inline-table”，这几乎正是我想要的 - 但是黄色背景的父级不会被绘制在元素后面一些原因（我希望将父级绘制在元素后面）：

[http://jsfiddle.net/kbR8P/](http://jsfiddle.net/kbR8P/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:28:57.593

add`margin-left: -5px`将元素向左移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T19:30:49.657

添加`overflow: hidden`到第二个示例中的包含（黄色）`<div>`（带有浮动）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T19:44:08.477

`display: table-cell;`代替`display:inline-table;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T20:07:38.887

使用显示：内联块；将解决您的问题。
如果你想让黄色背景填满屏幕的整个宽度，那么试试这个<a href="http://jsfiddle.net/kbR8P/1/" rel="nofollow">fiddle

```
<div style="background-color:yellow; display:inline-block; width:100%;">
  <div style="float:left; background-color:red; width:50px; height:50px;">aaa</div>
  <div style="float:left; background-color:green;">
    <div>bbbbb</div>
    <div>ccccc</div>
  </div>
  <div style="float:left; background-color:blue;">ddddd</div>
</div> 
```

否则你应该试试这个[小提琴](http://jsfiddle.net/kbR8P/2/)

```
<div style="background-color:yellow; display:inline-block;">
  <div style="float:left; background-color:red; width:50px; height:50px;">aaa</div>
  <div style="float:left; background-color:green;">
    <div>bbbbb</div>
    <div>ccccc</div>
  </div>
  <div style="float:left; background-color:blue;">ddddd</div>
</div> 
```

​</p>

# python - 为什么绘制到我的表面的椭圆没有出现？

> ID：14045180
> 
> 赞同：1
> 
> 时间：2012-12-26T19:22:29.277
> 
> 标签：python, animation, pygame, geometry-surface, blit

我正在尝试制作一个相对简单的动画，需要在旋转背景上旋转椭圆。我不得不采取一些技巧来`pygame.transform.rotate`与我试图旋转的表面打得很好。即，我制作了这个函数来重新定位从 pygame 的旋转函数获得的新矩形：

```
def recenter(orig_rect, rotated_surf):
    oldcenter = orig_rect.center

    rotRect = rotated_surf.get_rect()
    rotRect.center = oldcenter

    screen.blit(rotated_surf, rotRect) 
```

功能是不言自明的。我意识到原来的（未旋转的）表面仍然在显示器上显示，但这并不是真正的问题。别担心。

上述函数由旋转函数（背景和椭圆）使用，如下所示：

```
# width, height, screen are globals
def rotate_background(surf, speed, t0):
    new_angle = ((pygame.time.get_ticks() - t0) * (speed / 1000)) % 360

    w, h = surf.get_size()
    blittedRect = screen.blit(surf, (width / 2 - w / 2, height / 2 - h / 2))
    recenter(blittedRect, pygame.transform.rotate(surf, new_angle))

    return surf

def rotate_ellipse(surf, coords, speed, t0):
    new_angle = ((pygame.time.get_ticks() - t0) * (speed / 1000)) % 360
    if new_angle > 90:
        new_angle = 90  # limit rotation

    w, h = surf.get_size()
    x, y = coords
    blittedRect = screen.blit(surf, (width / 2 - w / 2 + x, height / 2 - h / 2 + y))
    recenter(blittedRect, pygame.transform.rotate(surf, new_angle)) 
```

这些旋转函数被称为每一帧的一个。

这是我的主要游戏循环的简化版本。请注意，这不是实际的生产代码，而是说明上述元素（*直接*取自代码库）如何结合在一起的：

```
ellipse = create_ellipse()  # returns a surf
background = create_background()  # returns a surf

while True:
    rotate_background()
    rotate_ellipse()
    pygame.display.flip() 
```

关于上面的`background`和`ellipse`变量的一句话。这两个变量都包含一个`pygame.Surface`实例，在该实例上绘制了一些东西。我不会详细介绍，`background`因为它工作正常。在中，一个椭圆通过，黄色`create_ellipse`绘制到表面上。在此之前，被称为。的颜色键也设置为确保整个表面是透明的，*除了*绘制黄色椭圆的地方。`ellipse``pygame.draw.ellipse``ellipse.fill(GREEN)``ellipse``GREEN`

 ***问题：我没有看到椭圆**

我注释掉`ellipse.set_colorkey`以确保椭圆被正确地blitted。这是。我看到一个绿色矩形出现，当椭圆旋转时尺寸会发生变化。这使我推断出确实有一个椭圆正在绘制，因为它可以旋转。

是什么赋予了？如果有用的话，我可以提供完整的代码。整个东西大约有200行，但我希望我上面的解释对你们来说已经足够了。我认为我们应该从本地开始并向外工作 =)

首先十分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T21:17:23.357

```
while True:
    rotate_background()
    rotate_ellipse
    pygame.display.flip() 
```

`rotate_elipse()`没有被调用，并且没有参数。如果是拼写错误，请使用 print 检查 elipse 是否正在传送到您期望的位置。也许数学不正确？

你可以简化事情，like`width/2`相当于`rect.centerx`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T22:14:50.213

好的，所以问题源于我自己的愚蠢。

`rect`我把这个论点误认为`pygame.draw.ellipse`是`center_x_coordinate, center_y_coordinate, width, height`。

我改变了我的电话，`pygame.draw.ellipse`现在一切都很好。*

# mysql - 未找到时为 select 语句定义返回参数

> ID：14045182
> 
> 赞同：1
> 
> 时间：2012-12-26T19:22:35.440
> 
> 标签：mysql, sql

这是我的选择声明。它有什么作用？

*   检查数据库中是否已经有给定日期的约会
*   检查用户是否在该特定时间工作。

`mysql_num_rows($result)`我检查是否有任何行。如果返回 0，则可以添加约会，如果返回其他内容（数据库中已经有约会），则被阻止。

该语句适用于第 1 点。如果已经有约会，则返回 1 或更多。但是，当所选日期超出用户的工作时间范围时，它也返回0。

问题：当用户在特定时间**不工作**时，我可以在语句中添加什么以获得返回的行（`mysql_num_rows`返回 1 或更多） ？

 **工作时间范围示例：`08:00:00 to 17:00:00`。

```
select * 
from ios_appointments a join ios_workinghours h using(workerid_fk) 
where workerid_fk = 1 
AND h.start <= '19:57:20' AND h.end >= '20:57:20' 
AND ( 
   a.start BETWEEN '2012-12-24 19:57:20'  AND  '2012-12-24 20:57:20' 
   OR  a.end   BETWEEN '2012-12-24 19:57:20'  AND  '2012-12-24 20:57:20' 
   OR (a.start < '2012-12-24 19:57:20' AND a.end > '2012-12-24 20:57:20') 
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:26:24.337

您可以返回一行空值：

```
select * 
from ios_appointments a join ios_workinghours h using(workerid_fk) 
where workerid_fk = 1 
AND h.start <= '19:57:20' AND h.end >= '20:57:20' 
AND ( 
   a.start BETWEEN '2012-12-24 19:57:20'  AND  '2012-12-24 20:57:20' 
   OR  a.end   BETWEEN '2012-12-24 19:57:20'  AND  '2012-12-24 20:57:20' 
   OR (a.start < '2012-12-24 19:57:20' AND a.end > '2012-12-24 20:57:20') 
)
union
select null, null, null -- how every many column are in the first part
where not exists (
    select * 
    from ios_appointments a join ios_workinghours h using(workerid_fk) 
    where workerid_fk = 1 
    AND h.start <= '19:57:20' AND h.end >= '20:57:20' 
    AND ( 
       a.start BETWEEN '2012-12-24 19:57:20'  AND  '2012-12-24 20:57:20' 
       OR  a.end   BETWEEN '2012-12-24 19:57:20'  AND  '2012-12-24 20:57:20' 
       OR (a.start < '2012-12-24 19:57:20' AND a.end > '2012-12-24 20:57:20') 
    )
) 
```

如果您的查询一无所获，这将返回一行空值，或者如果找到行则表现得像现在一样。

您可以返回任何您想要的值，而不是 null。**

# ssrs-2008 - 如何使用 BIDS 在 SSRS 中创建共享数据集

> ID：14045183
> 
> 赞同：0
> 
> 时间：2012-12-26T19:22:36.783
> 
> 标签：ssrs-2008

我正在使用 BIDS 或 Visual Studio 2008。在解决方案资源管理器中，在我的项目下，我有一个用于共享数据源的“文件夹”和一个用于报告的“文件夹”。我已经看到到处都提到并显示共享数据集“文件夹”的帖子和屏幕截图。我怎么得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:01:05.577

请问你运行的是SSRS版本吗？我有 SSRS 版本 10.50.2500.0，其中有“共享数据集”文件夹。

所以我建议将 SSRS 更新到以下版本。

Microsoft SQL Server Reporting Services 设计器版本 10.50.2500.0

# jquery - 简单的 jQuery 选择器不起作用

> ID：14045186
> 
> 赞同：2
> 
> 时间：2012-12-26T19:22:41.757
> 
> 标签：jquery, jquery-selectors

我不知道为什么这个选择器不起作用。

HTML 元素很简单：

```
 <div id="myDiv">Original Text</div> 
```

我使用的脚本很简单：

```
 <script language="javascript" src="jquery.min.js"></script>
    <script type="text/javascript"> 
    $(document).ready(function(){
        $("#myDiv").innerHTML = "Replaced Text";
    }); 
```

由于某种原因，这不起作用，而其他两个选项确实起作用：

**选项1：**

```
 document.getElementById("myDiv").innerText = "This will work!" 
```

**选项 2：**

```
 $("#myDiv").get(0).innerHTML = "This will work as well!" 
```

我正在阅读的每个教程都说，如果我像我一样使用 $(#id)，选择器将简单地工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T19:24:09.900

jQuery 对象使用[`.html()`](http://api.jquery.com/html/)方法，而不是`innerHTML`：

```
$("#myDiv").html("Replaced Text"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T19:24:24.190

`$("#myDiv")`是 jQuery 对象，你不能设置它的`innerHTML`属性，因为它没有。

使用 jQuery 方法[`.html()`](http://api.jquery.com/html/)或[`.text()`](http://api.jquery.com/text/)

```
$("#myDiv").html("Replaced Text"); 
```

选项 1 有效，因为它只是普通的 JS - 您选择元素并设置其属性。选项二有效，因为您从 jquery 对象获取 DOM 元素并设置其属性 - 也有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T19:24:51.647

```
 $(document).ready(function(){
        $("#myDiv").html("Replaced Text");
    }); 
```

# javascript - Requirejs 加载没有模型定义的模板

> ID：14045187
> 
> 赞同：1
> 
> 时间：2012-12-26T19:22:59.853
> 
> 标签：javascript, backbone.js, requirejs

我注意到每次使用 require 时都需要先定义所有模块。就我而言，我现在不需要这样做，我只需要加载主干模板。

是否可以加载没有模块定义的模板？

这可能看起来像这样：

```
View = Backbone.View.extend({
    tagName: 'div',
    className: 'entry',
    initialize: function(model, response){
        console.log("View Intialized: "+this.model.get('id') )

        _.bindAll(this, "render") 
        this.model.bind('change', this.render)
        this.template = _.template( require( ['text!templates/users/view.html'] ) ) //would look something like this?
    },
    render: function(){
        var rendered = this.template( this.model.toJSON() ) 
        $(this.el).html( rendered ); 
        return this 
    }
}) 
```

在大多数情况下，我在一个文件中有多个视图，并且不确定模块定义将如何使用它。虽然，我会像上面一样简单的解决方案。

编辑：除了答案之外，这里还有一个更轻的解决方案[http://coenraets.org/blog/2012/01/backbone-js-lessons-learned-and-improved-sample-app/](http://coenraets.org/blog/2012/01/backbone-js-lessons-learned-and-improved-sample-app/)最初加载所有模板这可能比根据需要加载更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T01:59:49.033

好的，首先感谢您提出这个问题：我为它写了一个（不好的）答案，然后意识到我不像我那样理解 Require ，它迫使我去教育自己更多:-) 希望现在我可以提供更好的答案。

有两种使用 require 的方法：

1) 同步：`var baz = require('foo/bar')`

2）异步：`require(['foo/bar'], function(bar) {var baz = bar;}`

问题是，您将两者与这一行结合起来：

```
this.template = _.template( require( ['text!templates/users/view.html'] ) 
```

您将依赖项以数组的形式提供给 require ，就好像您正在执行异步样式一样，但您希望它立即返回同步样式的模块。

解决方案很简单，要么：

A）预加载（使用定义调用或异步要求调用）您的模板，然后使用同步样式语法：

```
this.template = _.template( require('text!templates/users/view.html')
// NOTE: If you don't pre-load this won't work 
```

或者：

B）使用异步风格：

```
require(['text!templates/users/view.html'], function(viewTemplate) {
    View = Backbone.View.extend({
    // rest of your code
    this.template = _.template(viewTemplate);
}) 
```

# php - foreach 和数组映射错误

> ID：14045192
> 
> 赞同：0
> 
> 时间：2012-12-26T19:23:29.277
> 
> 标签：php

我收到：3 个警告（isset 中的偏移类型非法或在...中为空） 3 个通知（未定义的索引：...）

3 个警告是通过第一个 foreach 实现的。并且这 3 个通知与第二个 foreach 循环有关。

我真的不明白我做错了什么......在这里需要一些帮助。

```
<form name="form" action="index.php" method="POST">
    <input type="text" name="name" value="<?php if (isset($_POST['name'])) { echo $_POST['name']; } ?>" />
    <input type="text" name="age" value="<?php if (isset($_POST['age'])) { echo $_POST['age']; } ?>" />
    <input type="text" name="email" value="<?php if (isset($_POST['email'])) { echo $_POST['email']; } ?>" />
    <input type="submit" />
</form>

<?php
$expected = array(
    'name' => array("filter" => FILTER_SANITIZE_STRING),
    'age' => array("filter" => FILTER_SANITIZE_NUMBER_INT),
    'email' => array("filter" => FILTER_SANITIZE_EMAIL)
);

foreach ($expected AS $key => $value) {
    if (!isset($_POST[$value])) {
        echo "not set";
    } elseif (empty($_POST[$value])) {
        echo "empty";
    }
}

$result = filter_input_array(INPUT_POST, $expected);

foreach ($result AS $key => $value) {
    if (!$result[$value]) {
        echo "not valid value";
    }
}
?> 
```

谢谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T19:33:03.440

[`foreach`](http://php.net/manual/en/control-structures.foreach.php)are `foreach($iterable as $value)`和的形式`foreach($iterable as $key => $value)`。没有`foreach ($iterable as $key)`像 javascript 那样的形式`for (key in obj)`。

而是使用`foreach ($expected as $key => $value) {`和`foreach($result as $key=>$value) { if (!$value) die(false); }`

你的完整代码应该是这样的：

```
$expected = array(
    'name' => array("filter" => FILTER_SANITIZE_STRING),
    'age' => array("filter" => FILTER_SANITIZE_NUMBER_INT),
    'email' => array("filter" => FILTER_SANITIZE_EMAIL)
);

foreach ($expected AS $key => $value) {
    if (!isset($_POST[$key])) {  // NOT $value!!!!
        echo "not set";
    } elseif (empty($_POST[$key])) {
        echo "empty";
    }
}

$result = filter_input_array(INPUT_POST, $expected);

foreach ($result AS $key => $value) {
    if (!$result[$key]) {  // NOT $value!!!
        echo "not valid value";
    }
} 
```

如果您的目标是验证输入，那么我建议您不要大量使用 PHP 清理机制。像所有 PHP 一样，它建立在从根本上破坏输入*过滤*而不是*验证*输入的哲学之上。但是，我不确定还建议您使用什么。[尊重/验证](https://github.com/Respect/Validation)看起来很有希望，尽管我认为如果可以的话，你最好离开 PHP。

使用我们所拥有的，仅使用`FILTER_VALIDATE_*`过滤器使用以下功能。您仍然需要进行预处理和后处理，并且必须模拟具有多个调用的“链式”过滤器。

```
function filter_array($data, $filter) {
    $missing = array_diff_key($filter, $data);
    $filtered = filter_var_array($data, $filter);
    $invalid = array_filter($filtered, function($v){return $v===FALSE;});
    $filtered = array_diff_key($filtered, $missing, $invalid);
    return array($filtered, array_keys($invalid), array_keys($missing));
} 
```

使用示例：

```
$_POST = array('extra'=>'extra', 'age'=>array('30a'), 'name'=>'the name');

$expected = array(
    'name'   => array("filter" => FILTER_UNSAFE_RAW, // using this as a "passthrough" filter
                      "flags"  => FILTER_REQUIRE_SCALAR, // just to set this flag
    ),
    'age'   => array("filter"  => FILTER_VALIDATE_INT,
                     "flags"   => FILTER_REQUIRE_SCALAR,
                     "options" => array('min_range'=>0, 'max_range'=>120)
    ),
    'email' => array("filter"  => FILTER_VALIDATE_EMAIL,
                     "flags"   => FILTER_REQUIRE_SCALAR,
    ),
);

list($valid, $invalid, $missing) = filter_array($_POST, $expected);

var_export($valid); var_export($invalid); var_export($missing); 
```

# java - Java - 获取网页内容跳过中间页面以响应达到所需的响应

> ID：14045194
> 
> 赞同：1
> 
> 时间：2012-12-26T19:23:35.117
> 
> 标签：java, web-crawler, web-content

Java 我有一种情况，我必须在表单提交的结果中获取响应的 Web 内容，但这有点棘手，因为流程不像请求和响应那么简单，如下所示。

```
Submit button pressed -> Display page processing wait timer -> Display quick advertisement page -> Display page result. 
```

从“按下提交按钮”开始，我想要“显示页面结果”内容并在两者之间跳过页面。

我有这个示例代码，但它只能以一种方式工作，发送请求和接收响应。

```
URL url;
InputStream is = null;
DataInputStream dis;
String line;

try {
    url = new URL("http://stackoverflow.com/");
    is = url.openStream();  // throws an IOException
    dis = new DataInputStream(new BufferedInputStream(is));

    while ((line = dis.readLine()) != null) {
        System.out.println(line);
    }
} catch (MalformedURLException mue) {
     mue.printStackTrace();
} catch (IOException ioe) {
     ioe.printStackTrace();
} finally {
    try {
        is.close();
    } catch (IOException ioe) {
        // nothing to see here
    }
} 
```

任何java库都可以为我做吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:59:00.510

考虑尝试[Selenium web driver](http://code.google.com/p/selenium/wiki/GettingStarted)。可能它有你想要实现的东西。

# google-apps-script - onopen“未知工作表名称”错误

> ID：14045197
> 
> 赞同：2
> 
> 时间：2012-12-26T19:23:50.977
> 
> 标签：google-apps-script, google-sheets

这是我第一次涉足 Google 脚本和 JavaScript（我是一个改革后的 VBAer）。但事实证明，我的简单代码很难开始工作。

我有几个要在打开时运行的例程。当工作表已经打开时，它们运行正常，但在打开时却没有。我熟悉触发器，并且设置了即时错误消息。

如果标题中的数据在今天之前，这是删除某些列的方法——如果工作表已经打开，它可以正常工作。

```
function DeletePastDays(){
  var sheet  = SpreadsheetApp.getActiveSheet();
  var today = new Date();
  today = rounddownday(today);
  var date = sheet.getRange(1,4).getValue();
  while(date < today){
  sheet.deleteColumn(4);
  var date = sheet.getRange(1, 4).getValue();
  }
} 
```

错误消息是：未知工作表名称（第 6 行）（这是定义变量日期的行，基于使用 getActiveSheet 定义的工作表）。

其他例程显然都以同样的方式失败，因为它无法识别工作表，即使它们都从打开的工作表中运行正常。

想知道我是否必须按名称调用工作表，因为它还没有真正打开？尽管我见过的其他代码似乎并没有那么麻烦。已经尝试了几个小时的一堆东西，但最终不得不承认我需要帮助！谢谢你。

# ruby-on-rails - mongoid_fulltext utf-8 特殊字符

> ID：14045201
> 
> 赞同：2
> 
> 时间：2012-12-26T19:24:02.240
> 
> 标签：ruby-on-rails, ruby, mongodb, full-text-search, mongoid

我正在为我的数据库使用 mongodb（和 mongoid）构建一个小型 rails 3 应用程序。我正在使用 mongoid_fulltext gem ( [https://github.com/aaw/mongoid_fulltext](https://github.com/aaw/mongoid_fulltext) ) 使我的数据库可搜索，到目前为止效果很好。但是，我刚刚尝试使用包含字符“æøå”的单词测试搜索功能，并且可以看到我得到了一些无效的结果。看起来 mongoid_fulltext 忽略了这些字符，因此搜索字符串“københavn”变成了“kbenhavn”。

现在有谁告诉 mongoid_fulltext 使用 UTF-8 编码？

我已添加`# encoding: utf-8`到我的模型和控制器中，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:06:45.083

好的，所以我想通了。如果有人有兴趣，这里是我的解决方案。您可以通过在模型上设置字母参数来添加特殊字符，例如： fulltext_search_in :name, :city, :alphabet => 'abcdefghijklmnopqrstuvwxyzæøå0123456789' 默认情况下，参数设置为： :alphabet => 'abcdefghijklmnopqrstuvwxyz0123456789'

# c# - SMTPAppender 使用虚拟帐户发送电子邮件

> ID：14045204
> 
> 赞同：0
> 
> 时间：2012-12-26T19:24:19.893
> 
> 标签：c#, .net-4.0, log4net, log4net-appender, smtpappender

我正在使用 SMTPAppender 为我的应用程序中的错误发送电子邮件。如果我指定主机设置以及我的帐户用户名和密码，我就可以做到这一点。这是我的配置文件的样子：

![在此处输入图像描述](../Images/49c07066c525fcb5d7ea1f8100e6fc34.png)

是否可以在此处使用匿名邮件帐户或以某种方式不使用用户名/密码。我不想将我的用户名/密码暴露给最终用户。我见过有人使用虚拟帐户，应用程序使用提供的帐户名称发送电子邮件。我只是不记得该怎么做。

有人可以帮我吗？

感谢期待。莫妮卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:42:32.760

To use a dummy account, you would need to allow unauthenticated access to your SMTP server, which of course makes it possible to be used as an open relay for sending spam.

If you are storing your log4net settings in your app.config file, you should be able to use encrypted configuration settings to encrypt the whole section though.

# iphone - 如何“在 malloc_error_break 中设置断点进行调试”

> ID：14045208
> 
> 赞同：140
> 
> 时间：2012-12-26T19:24:28.977
> 
> 标签：iphone, ios

我得到很多这样的控制台输出，而我的应用程序没有崩溃：

> malloc: *** 对象 0xc6a3970 的错误：未分配被释放的指针 ***在 malloc_error_break 中设置断点以进行调试

如何找出受影响的对象或变量？

我尝试像这样设置一个符号断点，但它永远不会停止：

![在此处输入图像描述](../Images/a474d16c66b428aaf4acdf985f3c8046.png)

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-12-26T19:31:26.213

通过打开断点导航器（视图->导航器->显示断点导航器或⌘8），单击左下角的加号按钮，然后选择“添加符号断点”，在 malloc_error_break() 上设置断点。在出现的弹出窗口中，`malloc_error_break`在符号字段中输入，然后单击完成。

编辑：openfrog 添加了一个屏幕截图，并表示在我发布答案*后他已经尝试了这些步骤但没有成功。*有了那个编辑，我不知道该说什么。我还没有看到自己无法正常工作，实际上我总是在 malloc_error_break 集上保留一个断点。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-09-03T13:49:54.890

在您的屏幕截图中，您没有指定任何模块：尝试设置“libsystem_c.dylib”

![在此处输入图像描述](../Images/56926a8346c3f1514605652482f61cd9.png)

我这样做了，它起作用了：断点在这里停止（尽管堆栈跟踪通常来自一些晦涩的系统库......）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-19T08:55:39.430

我对 Xcode 也有同样的问题。我按照您提供的步骤进行操作，但没有成功。我疯了，因为在我看到的每一个论坛中，这个问题的所有线索都是你提供的。我终于看到我在 malloc_error_break 之后放了一个空格，我压制了它，现在它可以工作了。一个愚蠢的问题，但如果解决方案不起作用，请确保您没有在 malloc_error_break 之前和之后放置任何空间。

希望这个消息会有所帮助..

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-07-16T07:52:15.173

我已经授予了我不应该在某些文件夹中写入的权限（尤其是 /usr/bin/），这导致了问题。我通过打开磁盘工具并在 Macintosh HD 磁盘上运行“修复磁盘权限”来修复它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-05-10T07:54:18.183

我通过近距离的野生动物园检查员解决了它。参考我**[的帖子](https://stackoverflow.com/a/43885754/6521116)**。当我运行我的应用程序进行测试时，有时我也会发现声音，然后我打开带有自动检查器的 safari，之后，我在我的应用程序中执行了一些操作，然后触发了这个问题。

[![在此处输入图像描述](../Images/448b2ec0abf6ec9cdf131e7e52c6e077.png)](https://i.stack.imgur.com/CAYOp.png)

# html - CSS3：子元素的悬停效果 - Firefox 和 Explorer 不起作用

> ID：14045209
> 
> 赞同：0
> 
> 时间：2012-12-26T19:24:32.023
> 
> 标签：html, css

我有：

**HTML**

```
<div class="home-product-display-box">
  <div>Lots of other stuff</div>
  <div class="fb-home-holder">
    <div class="fb-like" data-href="www.myurl.com" data-send="false" data-layout="button_count" data-width="50" data-show-faces="false" ></div>
  </div>

</div> 
```

**CSS**

```
.home-product-display-box .fb-home-holder {
    position:absolute;
    top:5px;
    right:5px;
    display:none;
}

.home-product-display-box:hover .fb-home-holder {
     display:block !important;
} 
```

这适用于 Webkit（Chrome 和 Safari），但不适用于 Firefox 和 Internet Explorer。我打算隐藏 Facebook div 并在将鼠标悬停在父元素上时显示它，但它没有显示。为什么这对于这两个浏览器都不能正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:32:58.923

`display:none`不接收鼠标悬停，但您可以使用`opacity:0`：

```
 .home-product-display-box .fb-home-holder {
    position:absolute;
    top:5px;
    right:5px; 

    /*CHANGE OPACITY*/
    filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0); /*ie*/
    -moz-opacity: 0;         /* Mozilla extension */
    -khtml-opacity:0;        /* Konqueror extension (Safari 1.1)*/
    opacity: 0;              /* the correct CSS3 syntax */
}

.home-product-display-box:hover .fb-home-holder {
    /*CHANGE OPACITY*/
    filter: progid:DXImageTransform.Microsoft.Alpha(opacity=100); /*ie*/
    -moz-opacity: 1;         /* Mozilla extension */
    -khtml-opacity:1;        /* Konqueror extension (Safari 1.1)*/
    opacity: 1;              /* the correct CSS3 syntax */
} 
```

示例：http: [//jsbin.com/epozag/6/edit](http://jsbin.com/epozag/6/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T19:31:14.467

使用您提供的代码，它不可能工作。

当您将内容设置`.home-product-display-box`为`display: none;`并且没有为其设置宽度和高度时，div 会将其大小调整为内容的大小。在您的情况下，宽度为 0px，高度为 0px。

所以没有什么可以悬停的。

# node.js - node.js 和 socket.io 未捕获的错误

> ID：14045212
> 
> 赞同：4
> 
> 时间：2012-12-26T19:24:37.793
> 
> 标签：node.js, sockets, twitter, socket.io, twitter-streaming-api

我正在尝试使用 ntwitter、node.js 和 socket.io 来访问 twitter 用户流。twitter 用户流工作正常，我可以实时获取推文。使用以下函数在控制台中显示推文。

```
console.log(data.text) ; 
```

然后我想将数据推送到浏览器。这可以使用套接字来完成。以下链接显示了用于 twitetrs 公共流的简单 node.js 客户端的示例。

[http://www.informit.com/articles/article.aspx?p=1947699&seqNum=5](http://www.informit.com/articles/article.aspx?p=1947699&seqNum=5)

现在同样不适用于我的用户流。数据显示在控制台中没有任何问题，但如果我尝试将其推送到浏览器，我会出错。

```
Error: Uncaught, unspecified 'error' event.
at EventEmitter.emit (events.js:73:15)
at EventEmitter.receive (C:\Users\tweeple\Desktop\ho
odules\ntwitter\lib\parser.js:41:14)
at IncomingMessage.Twitter.stream (C:\Users\prathamesh\
e03\node_modules\ntwitter\lib\twitter.js:266:14)
at IncomingMessage.EventEmitter.emit (events.js:96:17)
at IncomingMessage._emitData (http.js:359:10)
at HTTPParser.parserOnBody [as onBody] (http.js:123:21)
at CleartextStream.socketOnData [as ondata] (http.js:13
at CleartextStream.CryptoStream._push (tls.js:526:27)
at SecurePair.cycle (tls.js:880:20)
at EncryptedStream.CryptoStream.write (tls.js:267:13) 
```

代码是：

```
var app = require('express').createServer(),
twitter = require('ntwitter'),
io = require('socket.io').listen(app);
app.listen(3000);

var twit = new twitter({
consumer_key: 'key',
consumer_secret: 'consumer secret',
access_token_key: 'token',
access_token_secret: 'token secret'
});

twit.stream('user', {track:'nodejs'}, function(stream) {
stream.on('data', function (data) {
io.sockets.emit('tweet',{
  user: data.user.screen_name,
  text: data.text
});
});
});
app.get('/', function (req, res) {
res.sendfile(__dirname + '/index.html');
}); 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-18T12:09:53.967

处理错误可能有效：

```
stream.on('error', function(error) {
    console.error(error);
}); 
```

# c# - 在 Visual Studio 2010 的解决方案资源管理器中禁用添加引用

> ID：14045213
> 
> 赞同：1
> 
> 时间：2012-12-26T19:24:40.127
> 
> 标签：c#, visual-studio-2010

我正在使用 Visual Studio 2010，我想添加参考以制作本[指南](https://i.stack.imgur.com/TRNro.png)中所述的项目，但由于某种原因它被禁用。

这是我的打印屏幕图片，它解释了一切。

![在此处输入图像描述](../Images/7123b14543fcf4ca868142081dc4eda0.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T19:29:06.440

您可能会在调试代码时尝试*添加引用。*停止调试，您可以自由添加参考。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T19:28:42.633

确保您未处于**调试模式**。添加引用选项通常在调试模式下被禁用。

# java - 使用 mvn exec:java 时如何将 src/main/resources 添加到类路径

> ID：14045214
> 
> 赞同：9
> 
> 时间：2012-12-26T19:24:40.383
> 
> 标签：java, maven

我正在尝试运行以下应用程序，该应用程序尝试`src/main/resources/test.txt`从类路径加载文件 ( )：

```
package com.example;

public class Main {
    public static void main(String[] args) {
        System.out.println(Main.class.getResource("test.txt"));
    }
} 
```

当我这样做时`mvn exec:java -Dexec.mainClass=com.example.Main`，我会`null`在命令行上打印出来。

那么如何将 src/main/resources 中的文件添加到类路径中呢？请注意，我运行了`mvn package`，检查了生成的`target/test.jar`，并确认它包含`test.txt`在顶层。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T19:28:18.723

斜线应该解决它

```
System.out.println(Main.class.getResource("/test.txt")); 
```

如果您将 test.txt 文件放在以下位置，您的代码将起作用：

```
src/main/resources/com/example 
```

# c# - 创建 NuGet 包时，如何为程序集指定框架版本？

> ID：14045217
> 
> 赞同：3
> 
> 时间：2012-12-26T19:24:49.293
> 
> 标签：c#, nuget, nuget-package

我正在尝试使用 NuGet 核心创建 NuGet 包作为构建过程的一部分。构建过程会创建特定的框架版本 3.5、4.0 和 4.5。如何为每个程序集指定框架版本？

```
public void Create(Package package)
{
    if (String.IsNullOrEmpty(package.Id))
        throw new ArgumentException("package.Id is required", "package");

    if (String.IsNullOrEmpty(package.Version))
        throw new ArgumentException("package.Version is required", "package");

    if (String.IsNullOrEmpty(package.Authors))
        throw new ArgumentException("package.Authors is required", "package");

    if (String.IsNullOrEmpty(package.Description))
        throw new ArgumentException("package.Description is required", "package");

    if (package.Files == null || package.Files.Count == 0)
        throw new ArgumentException("package.Files cannot be empty", "package");

    ManifestMetadata metadata = new ManifestMetadata();
    metadata.Id = package.Id;
    metadata.Version = package.Version;
    metadata.Title = package.Title;
    metadata.Authors = package.Authors;
    metadata.Owners = package.Authors;
    metadata.IconUrl = package.IconUrl;
    metadata.ProjectUrl = package.ProjectUrl;
    metadata.RequireLicenseAcceptance = true;
    metadata.LicenseUrl = package.LicenseUrl;
    metadata.Summary = package.Summary;
    metadata.Description = package.Description;
    metadata.Copyright = package.Copyright;
    metadata.Language = "en-US";
    metadata.Tags = package.Tags;
    metadata.ReleaseNotes = package.ReleaseNotes;

    List<ManifestFile> manifestFiles = new List<ManifestFile>();

    foreach (var file in package.Files)
    {
        ManifestFile manifestFile = new ManifestFile();
        manifestFile.Source = Path.GetFileName(file);
        manifestFile.Target = @"lib\" + Path.GetFileName(file);
        manifestFiles.Add(manifestFile);
    }

    PackageBuilder builder = new PackageBuilder();
    builder.PopulateFiles(ExtractPath(package.Files[0]), manifestFiles);
    builder.Populate(metadata);

    using (FileStream stream = File.Open(package.PackagePath, FileMode.OpenOrCreate))
    {
        builder.Save(stream);
    }
}

private static string ExtractPath(string fullPath)
{
    if (fullPath.Length == 0)
        throw new ArgumentNullException("fullPath");

    //Account for already in form of path
    if (String.IsNullOrEmpty(Path.GetFileName(fullPath))
        || String.IsNullOrEmpty(Path.GetExtension(fullPath)))
    {
        return fullPath;
    }

    return Path.GetDirectoryName(fullPath);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T19:54:42.710

按照惯例，在定义目标时，您使用根目录，然后使用框架版本。[这在此处](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package)进行了概述。

因此，在 nuspec 文件中，您会在 .NET 4.5 中看到：

```
 <files>
    <file src="bin\Release\MyAssembly.dll" target="lib\net45" />
  </files> 
```

因此，在定义您的目标时，只需添加您所针对的 .NET 版本的约定：

```
var netVersion45 = "\net45";
foreach (var file in package.Files)
    {
        ManifestFile manifestFile = new ManifestFile();
        manifestFile.Source = Path.GetFileName(file);
        manifestFile.Target = @"lib\" + netVersion45;
        manifestFiles.Add(manifestFile);
    } 
```

# oracle - 在 JPA 连接中设置上下文——这安全吗？

> ID：14045219
> 
> 赞同：4
> 
> 时间：2012-12-26T19:24:57.260
> 
> 标签：oracle, hibernate, jakarta-ee, jpa, jboss7.x

我需要*在每次数据库操作之前设置一些上下文*（我曾尝试使用 Oracle 的包级变量，但由于包重新编译的一些问题，我将尝试使用[DBMS_SESSION](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_sessio.htm#BHCCFGIF)和/或[DBMS_APPLICATION_INFO](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_appinf.htm#CHECEIEB)），以便我们可以在任何地方获取特定的用户信息我们需要它（过程、触发器等），而不是将数十个数据库连接标识为“JBoss”。

我编写了一个 Java EE 拦截器来拦截对 @Stateless bean 的调用。它调用一个 Oracle 函数来设置一些会话上下文（查看这个问题以获取一些示例代码[如何判断事务是否在 Java EE 6 拦截器中处于活动状态](https://stackoverflow.com/questions/14004504/how-to-tell-if-a-transaction-is-active-in-a-java-ee-6-interceptor)）。

**我首先担心的是连接池**。起初我认为 Java EE 提供的默认 @PersistenceContext 传播足以保证一切都在同一个连接/事务/EntityManager 中运行，而我只需要在拦截器结束时取消设置所有内容（在一个`finally`块中）之前连接返回到池中。它似乎有点脆弱，但我认为它可以工作。

**然后我发现 Hibernate 有一个名为 hibernate.connection.release_mode 的属性** （[关于 hibernate.connection.release_mode 的 Hibernate 文档](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#configuration-jdbc-properties)，[关于 org.hibernate.ConnectionReleaseMode 的 Red Hat 文档](https://access.redhat.com/knowledge/docs/en-US/JBoss_Enterprise_Web_Server/1.0/html/Hibernate_Core_Reference_Guide/transactions-connection-release.html)）并且使用 JTA 事务时的**默认和推荐**行为是**释放每个语句之后的连接**（尽管文档说了一些关于*重新获取相同的底层连接*，这让我很困惑）。

现在我什至不确定我是否可以在拦截器中可靠地设置一些内容，这些内容只对这个用户/操作可见，而不会有其他人在我的业务方法中间抓住相同的连接并弄乱我的用户上下文的风险. 据我了解，Oracle 数据库会话变量是为连接保留的，而不是为事务或 @PersistenceContext （数据库毕竟对持久性上下文一无所知，并且一个连接可用于多个事务）。

我即将放弃，因为随着我对所涉及的所有技术的实现细节的了解越来越多，这看起来越来越脆弱。**可以使这个*用户上下文*的想法起作用还是我应该尝试一种完全不同的方法？我如何测试/调试我的实现以确保没有任何并发​​问题？**我还没有找到任何有用的事件监听器来监视框架行为，并且构建一个程序来对服务器进行压力测试是太多的工作，无法投资于我不确定是否应该工作的东西。

我正在使用 JBoss AS 7.1、EJB 3.1、Oracle 10g 数据库和 JPA 2.0（由 Hibernate 支持，尽管我们不使用任何特定于 Hibernate 的 API）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-06T13:00:54.967

所以我会用我最近发现的所有东西来回答我自己的问题。

为了了解服务器行为，我将 JBoss 配置更改为使用只有 1 个连接的池，这样我就可以检测到其他人何时被阻塞等待。

如果当前操作在事务内部（例如@TransactionAttribute(REQUIRED)），则在事务完成之前，连接不会用于其他任何事情（其他客户端将不得不等待）。但是，如果您在没有事务的情况下读取数据库，则其他客户端可能会在您不使用它时获取相同的连接，甚至在您的业务方法完成之前（我不知道这种行为有多少是标准的，有多少是实现细节）。

默认情况下，Hibernate 在每个语句之后都会释放连接，这就是为什么可以在非事务方法中重用连接的原因。另一方面，如果您仍在同一个事务中，JDBC 和 JEE 具有重新获取相同连接所需的功能。

但是为什么 Hibernate 会释放一个稍后会重新获取的连接呢？如果 Hibernate 没有释放它，一些 JEE 服务器可能会认为 Hibernate 在嵌套 EJB 调用中打开一个连接并使其保持打开状态以供调用者重用时正在泄漏连接。这篇文章对此进行了解释：

[http://www.mail-archive.com/hibernate-dev@lists.jboss.org/msg00612.html](http://www.mail-archive.com/hibernate-dev@lists.jboss.org/msg00612.html)

为了安全起见，我们需要保存的所有数据（以及稍后呈现给用户）都作为参数显式传递，但出于日志记录的目的，我们确实使用了存储在 Oracle 会话中的一些数据，因为我们知道该连接不能被其他客户端重用，因为只要您使用交易业务方法。

**更新**：似乎可以使用与连接器和/或自定义数据源相关的一些应用服务器特定设置来做我想做的事情（不确定这里的最佳答案是什么：[https](https://developer.jboss.org/thread/250132) ://developer.jboss.org/thread/250132 )

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T05:53:28.337

我个人会避免尝试在池中的 JDBC 连接上设置单个参数。毕竟，池的想法是所有连接都是相同的。因此，尽管您的拦截器想法可行，但我也担心它会变得多么脆弱。该实现中的任何错误都将是最恶劣的竞争条件。

另一方面，由于您使用的是 Oracle，您可能希望查看 EclipseLink。它实现了 JPA2，并得到了 Oracle 的大力资助，因此它支持他们所有的奇异特性。您可能想考虑使用['Isolated Client Sessions'](http://wiki.eclipse.org/Configuring_Exclusive_Isolated_Client_Sessions_for_Virtual_Private_Database_%28ELUG%29)。它看起来支持需要单独会话设置的虚拟专用数据库。因此，如果您*需要*更改会话上下文，这将是一个解决方案。

# c# - 循环 Web 服务调用在 10% 的情况下失败，出现错误：服务器无法在发送 HTTP 标头后清除标头

> ID：14045220
> 
> 赞同：1
> 
> 时间：2012-12-26T19:24:57.017
> 
> 标签：c#, web-services

我创建了一个代理服务来调用第 3 方网络服务。我在我的代理服务中循环调用该方法 5000 次。我在循环中间的大约 100 个调用中收到此错误（大约 4000 个成功工作，然后大约 100 个错误，然后它成功完成剩余的 900 个）。

这是在服务器端抛出的错误：

> System.InvalidOperationException 消息无法处理请求。方法
> 
> > System.Web.Services.Protocols.WebServiceHandlerFactory.CoreGetHandler
> 
> 在 System.Web.Services.Protocols.WebServiceHandlerFactory.CoreGetHandler（类型
> 
> > 类型、HttpContext 上下文、HttpRequest 请求、HttpResponse 响应）
> 
> 在 System.Web.Services.Protocols.WebServiceHandlerFactory.GetHandler(HttpContext
> 
> > 上下文、字符串动词、字符串 url、字符串文件路径）
> 
> 在 System.Web.Script.Services.ScriptHandlerFactory.GetHandler（HttpContext
> 
> > 上下文，字符串 requestType，字符串 url，字符串路径翻译）
> 
> 在 System.Web.HttpApplication.MaterializeHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
> 
> 在 System.Web.HttpApplication.ExecuteStep(IExecutionStep 步骤，
> 
> > Boolean & completedSynchronously)
> 
> 附加信息
> 
> > +System.InvalidOperationException：+System.Web.HttpException：
> > 
> > ```
> >  Message: Server cannot clear headers after HTTP headers have been sent. 
> > 
> >  Source: System.Web 
> > 
> >  Method: System.Web.HttpResponse.ClearHeaders 
> > ```

我看到客户端的错误是：

> System.Net.WebException：请求失败，HTTP 状态为 400：错误请求。在 System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse（SoapClientMessage 消息，WebResponse 响应，流 responseStream，布尔 asyncCall）在 System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke（字符串方法名，对象 [] 参数）

到目前为止，我发现的谷歌搜索只与服务器上的文件传输有关。谁能指出我不同的方向？

编辑：我刚刚检查了托管代理服务的服务器，并在 EventViewer/EventLog 中注意到了这个错误：

> *   0 2 0
>     0x80000000000000
>     569114
>     应用程序
>     labdevapp21.dot.labidot.lan
>     
> *   HTTP/ASMX 消息接收失败：System.InvalidOperationException：在 System.Web.Services.Protocols.SoapMessage.get_ContentType 的 System.Web.Services.Protocols.SoapMessage.EnsureStage（SoapMessageStage 阶段）的消息阶段 0 中可能无法访问该值() 在 Microsoft.Web.Services3.WseProtocol.CheckMtomContentType(SoapServerMessage 消息) 在 Microsoft.Web.Services3.WseProtocol.CreateRequestSoapEnvelope(SoapServerMessage 消息) 在 Microsoft.Web.Services3.WseProtocol.GetRequestEnvelopeFromMessage(SoapServerMessage 消息)

# python - 如何将变量传递给 django 中的 {% url %} 标签？

> ID：14045221
> 
> 赞同：4
> 
> 时间：2012-12-26T19:25:05.650
> 
> 标签：python, django, templates, url

我有 2 个视图：a 和 b 它们都渲染到一个模板 T。还有 a_2 和 b_2 视图。T 模板应该生成 a_2 和 b_2 视图的 url。

但是我不能使用 {% url %} 因为我不能将 url 名称作为参数传递。

我无法在视图中生成整个 url，因为我应该多次执行（一个在表中的一行 - 所以它可能是数百个链接）

我不想写2个完全相同的模板。所以问题是 - 如何避免这种情况？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-26T19:43:36.100

This is fixed in django 1.5.

In versions prior to 1.5 you need to use

```
{% extends 'base.html' %}

{% load url from future %}

{% url 'name_as_a_string' %}
{% url name_stored_in_variable %} 
```

From [https://docs.djangoproject.com/en/dev/releases/1.5/](https://docs.djangoproject.com/en/dev/releases/1.5/)

> One deprecated feature worth noting is the shift to “new-style” url tag. Prior to Django 1.3, syntax like {% url myview %} was interpreted incorrectly (Django considered "myview" to be a literal name of a view, not a template variable named myview). Django 1.3 and above introduced the {% load url from future %} syntax to bring in the corrected behavior where myview was seen as a variable.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T19:47:17.340

好吧，在这种情况下，您可以使用`{% if %}`标签并为其添加一些条件（可能还有一些变量到上下文中）或编写自定义 url 标签。

```
myapp
    templatetags
        __init__.py
        myapp_urls.py 
```

myapp_urls.py

```
from django import template
from django.template import Context
from django.template.defaulttags import register

@register.tag(name="custom_url")
def render_map(parser, token):
    contents, url_name = token.split_contents()
    return CustomURLNode(url_name)

class CustomURLNode(template.Node):
    def __init__(self, url_name):
        self.url_name = template.Variable(url_name)

    def render(self, context):
        return reverse(url_name.resolve(context)) 
```

在模板中：

```
{% load myapp_urls %}

{% custom_url myvar %} 
```

这是未经测试的代码，可能包含错误，但编写[自定义模板标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-tags)应该是一个很好的解决方案。

# c# - 为什么我的简单页面导航失败并出现 TargetInvocationException？

> ID：14045223
> 
> 赞同：1
> 
> 时间：2012-12-26T19:25:34.547
> 
> 标签：c#, navigation, winrt-xaml, windows-phone-8, invocationtargetexception

我的应用程序在此处的“Debugger.Break”处失败：

```
private void RootFrame_NavigationFailed(object sender, NavigationFailedEventArgs e)
{
    if (Debugger.IsAttached)
    {
        // A navigation has failed; break into the debugger
        Debugger.Break();
    }
} 
```

...我得到：“ *System.Reflection.TargetInvocationException 未处理消息：System.Windows.ni.dll 中发生'System.Reflection.TargetInvocationException' 类型的未处理异常*”

到目前为止，我的代码非常简单。我只是在主页上有一个 HyperlinkBut​​ton，它试图导航到另一个页面：

```
//winrt-xaml:
        <HyperlinkButton x:Name="hyperlinkButtonManageInvitations" Margin="24" Grid.Row="1" Tap="HyperlinkButtonManageInvitations_OnTap">Manage Invitations</HyperlinkButton> 
```

//C#代码隐藏：

```
private void HyperlinkButtonManageInvitations_OnTap(object sender, GestureEventArgs e)
{
    NavigationService.Navigate(
        new Uri("//TaSLs_Pages/InvitationManagePage.xaml", UriKind.Relative));
} 
```

我确实使用 Resharper 将 MainPage.xaml（和 *.cs）移动到我的 TaSLs_Pages 子文件夹中；这不会是一个问题，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-23T08:40:30.033

检查 NavigationFailedEventArgs。您可以通过 e.Exception.Message 检查异常

# apache - 在 htaccess 中只允许某些 ip 和引用者

> ID：14045225
> 
> 赞同：1
> 
> 时间：2012-12-26T19:25:42.443
> 
> 标签：apache, .htaccess, referrer

我有一个用于 Apache htaccess 的规则集，以允许访问某些 IP 地址，该地址非常适合在维护模式下工作。但是，这也会阻止一些引荐来源网址（例如 wordpress.com 或 google.com）访问该网站。当前规则集是：

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond %{REMOTE_ADDR} !^123\.123\.123\.123

RewriteCond %{HTTP_REFERER} wordpress\.com [NC, OR]
RewriteCond %{HTTP_REFERER} google\.com [NC]
RewriteCond %{HTTP_REFERER} ^(.*)$
RewriteRule .* /maintenance.html [R=302]

RewriteCond %{REQUEST_URI} !/maintenance.html$ [NC]
RewriteCond %{REQUEST_URI} !\.(jpe?g?|png|gif) [NC]
RewriteRule .* /maintenance.html [R=302,L] 
```

以上规则集有效，但有一个小故障，它并不完美。不知何故，网站可以从任何 IP 访问，并且推荐人是毫无疑问的。我需要一个允许从某些 IP 和某些引荐来源访问网站的规则集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:30:54.023

在我看来就像这条线

```
RewriteCond %{HTTP_REFERER} ^(.*)$ 
```

匹配任何东西，使其余条件静音。那条线是干什么用的？

此外，虽然您所做的可能适合您的目的，但请注意，使用虚假的 referer [sic] 标头创建请求并不困难。

此外，如果您的目标是允许那些特定的引用者并将其余部分添加到“maintenance.html”，那么我认为您希望拒绝引用者的匹配条件。但我可能会误解你的意图。

# adsense - Adsense 重新加载 ajax

> ID：14045231
> 
> 赞同：0
> 
> 时间：2012-12-26T19:26:10.583
> 
> 标签：adsense

我知道这个问题在这里很多次，但它有点老了。所以我的问题很简单。是否有任何正确的方法来重新加载谷歌 adsense 广告？感谢您的回复。

# c# - sql server 连接到数据库

> ID：14045233
> 
> 赞同：0
> 
> 时间：2012-12-26T19:26:16.453
> 
> 标签：c#, sql-server

我做了一些更多的研究并想出了别的东西。但是，这次消息框显示密码已更改，但是当我刷新数据库中的页面时，它没有更改。这是代码：

```
SqlConnection sqlconn = new SqlConnection();

sqlconn.ConnectionString = @" ";          
sqlconn.Open();
string empCode = comboEmpCode.Text;
string oldPwd = txtOldPwd.Text;
string newPwd = txtNewPwd.Text;
string confirmPwd = txtConNewPwd.Text;
string sqlquery = "UPDATE [Employee] SET Pwd=@newpass where EmployeeCode=@empcode";
SqlCommand cmd = new SqlCommand(sqlquery, sqlconn);
cmd.Parameters.AddWithValue("@newpass", txtNewPwd.Text);
cmd.Parameters.AddWithValue("@empcode", comboEmpCode.Text);
cmd.Parameters.AddWithValue("@oldPwd", txtOldPwd.Text);
cmd.Connection = sqlconn;
cmd.ExecuteNonQuery();
SqlDataReader reader = null;
reader = cmd.ExecuteReader();
while (reader.Read())
{
    if ((txtNewPwd.Text == reader["newPwd"].ToString()) & (txtConNewPwd.Text == (reader["confirmPwd"].ToString()))) { }
}
MessageBox.Show("Password was changed Successfully!", "Password Change", MessageBoxButtons.OK, MessageBoxIcon.Information);
this.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T19:49:04.107

看一下这个方法，如果更新成功则返回 true，如果更新不成功则返回 false，我添加了消息框以在故障排除期间提供一些清晰性。此外，我将您的 SQLConnection 和 SQLCommand 对象包装在 Using 语句中，当您完成它们时，它们应该可以很好地处理这些对象。

```
public bool ChangePassword(string empCode, string newPassword, string oldPassword)
{
    string connectionString = "@<Enter your Connection String Here>";

    string sql = "UPDATE [Employee] SET Pwd=@newpass where EmployeeCode=@empcode";

    if (oldPassword != newPassword)
    {
        try
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                using (SqlCommand cmd = new SqlCommand(sql, conn))
                {
                    conn.Open();
                    cmd.Parameters.AddWithValue("@newpass", newPassword);
                    cmd.Parameters.AddWithValue("@empcode", empCode);
                    cmd.ExecuteNonQuery();
                }
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(string.Format("{0}-{1}", ex.Message, ex.InnerException));
            return false;
        }
        return true;
    }
    else
    {
        MessageBox.Show(string.Format("Your New password {0}, can not be the same as the old password {1}. Please try again.", newPassword, oldPassword));
        return false;
    }
} 
```

# python - 构建 RESTful Tornado Web 应用程序

> ID：14045236
> 
> 赞同：1
> 
> 时间：2012-12-26T19:26:33.407
> 
> 标签：python, design-patterns, tornado

[Tornado](http://www.tornadoweb.org/)使用派生自`tornado.web.RequestHandler`定义`post`和`get`方法的类。我为路径创建了一个请求处理程序`r/action/*`

由于有不同的更具体的路径，例如`action/doThis`，`action/requestThat`我`get`使用 if-then-else 结构检查具体请求 URI 来构建该方法。

**这似乎很笨拙，是否有更复杂的方法来构建它，例如使用方法？**或者 Tornado 的方式是定义更多的 RequestHandlers 吗？我喜欢[bottle](http://bottlepy.org/docs/dev/)使用 Function Decorators 的方式，但由于它们是 Python 3，目前这不是一个选项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T19:39:50.987

装饰器不仅限于 Python 3；我`bottle`经常使用 2.7（我更喜欢装饰器语法和更轻量级的`bottle`原型接口，或者当我发现我的实现不需要基于类的行为时`Tornado`）。

也就是说，如果`action/doThis`提供`action/requestThat`不同的行为，将它们定义为单独的路线会更好吗？如果他们共享他们行为的某些方面，您总是可以让两个`RequestHandler`子类共享一个共同的基础。

```
class HandleAction(tornado.web.RequestHandler):
    def take_appropriate_action(route):
        print("Responding to action/{}".format(route))

class HandleThis(HandleAction):
    def get(self):
        self.take_appropriate_action('doThis')

class HandleThat(HandleAction):
    def get(self):
        self.take_appropriate_action('requestThat')

app = tornado.web.Application([
    (r'/action/doThis', HandleThis),
    (r'/action/requestThat', HandleThat)
]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T20:21:37.243

[类似的问题](https://stackoverflow.com/questions/8176185/tornado-restful-handler-classes)和我同意的第一个答案。由于 Tornado 提供的功能缺乏，您必须推出自己的解决方案或使用像[Tornado Addons](https://github.com/nod/tornado_addons)这样的东西，这将减轻创建必要的处理程序及其相关路由的烦恼。

```
from tornado_addons.route import route

@route( "/action/doThis" )
class HandleDoThis( Request ):
 pass

@route( "/action/requestThat" )
class HandleRequestThat:
 pass

app = tornado.web.Application( route.get_routes() ) 
```

这将使为每个 RESTful 资源创建单独的处理程序类变得更加可行。这将消除您对`if`陈述的担忧。

# scala - squeryl 查询中的模式匹配

> ID：14045241
> 
> 赞同：1
> 
> 时间：2012-12-26T19:27:18.180
> 
> 标签：scala, orm, squeryl

我刚开始使用 squeryl，对于如何编写这样的查询没有答案

```
SELECT ref label 
FROM x_table 
WHERE ref like x% or lable like x% 
```

用户的价值在哪里`x`，特别是我还没有找到类似`%` squeryl 的登录或如何使用它。

我的版本：

```
val products = from(AppDB.productTable) (
    s => where ((s.label like value) or (s.ref like value))  select(s)
) 
```

不正确。

`val value : Option[String]`我从用户那里得到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:36:14.663

您可以尝试选择您的字段，如下所示：

```
val products = from(AppDB.productTable) (s => 
  where ((Some(s.label) like value) or (Some(s.ref) like value)) 
  select(s)) 
```

这将编译，因为查询会将 Option[String] 与 Option[String] 进行比较。Squeryl 将在内部处理选项状态。

如果您只是想将通配符添加到您要比较的内容中，假设 like 子句的两边都是 type `Option[String]`，那么您可以这样做：

```
s.label like value.map(_ + "%") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T10:46:48.257

您可以使用较短的版本：

```
AppDB.productTable.where ((s.label like value) or (s.ref like value)) 
```

和选项字段用于可为空的列

# jsf - 如何在过滤器中检索 FacesContext

> ID：14045242
> 
> 赞同：13
> 
> 时间：2012-12-26T19:27:19.523
> 
> 标签：jsf, servlet-filters, facescontext, flash-scope

如何在过滤器中检索 FacesContext？

我关注了以下关于如何`FacesContext`在 a中检索的文章`Filter`：

[http://ocpsoft.org/java/jsf-java/jsf-20-extension-development-accessing-facescontext-in-a-filter/](http://ocpsoft.org/java/jsf-java/jsf-20-extension-development-accessing-facescontext-in-a-filter/)

但问题是它不适用于 Flash 范围。抛出以下 NPE：

```
java.lang.NullPointerException
at com.sun.faces.context.flash.ELFlash.loggingGetPhaseMapForWriting(ELFlash.java:751)
at com.sun.faces.context.flash.ELFlash.getPhaseMapForWriting(ELFlash.java:785)
at com.sun.faces.context.flash.ELFlash.put(ELFlash.java:392)
at com.sun.faces.context.flash.ELFlash.put(ELFlash.java:112) 
```

我想在我的过滤器中添加重定向并使用 flash 范围来保存一些数据和消息，这不起作用。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-26T21:04:05.480

> *如何在过滤器中检索 FacesContext？*

你不能。由`FacesContext`来创建，`FacesServlet`因此只能在由 处理的任何 Java 代码中使用`FacesServlet`，它涵盖了所有 JSF 工件，例如托管 bean 和阶段侦听器。文章只展示了如何手动创建`FacesContext`，但这种方法最终是没有用的。这`FacesContext`只是标准 Servlet API 已经可用的所有内容的抽象，例如`HttpServletRequest`、`HttpSession`、`ServletContext`等。只需像 JSF 的“幕后操作”一样直接使用它们。

您有 2 个选项：

1.  请改用 JSF `PhaseListener`。根据您没有说明的具体功能要求，这可能是一个相当笨拙的解决方案/解决方法。

2.  不要使用 JSF 提供的 Flash 范围工具，而是自己自制一个。原理相当简单：在初始请求中设置 cookie，发送重定向，在重定向请求中查找 cookie**并将**其删除（以便在任何后续请求中不再存在）。这正是 JSF Flash 作用域的工作原理。另请参阅[将通知消息设置为请求属性，该属性应在 sendRedirect 之后显示以](https://stackoverflow.com/questions/32410695/set-notification-message-as-request-attribute-which-should-show-after-sendredire/32411517#32411517)获取具体示例。

# ios - ios webview设置委托后没有显示

> ID：14045243
> 
> 赞同：0
> 
> 时间：2012-12-26T19:27:29.300
> 
> 标签：ios, uiwebview, delegates

我正在以编程方式设置 webview，并且在我实际设置委托之前一切正常。

## MainPageViewController.h

```
#import <UIKit/UIKit.h>

@interface MainPageViewController : UIViewController <UIWebViewDelegate>

@property (nonatomic, strong) UIWebView *webViewForStories;

@end 
```

## MainPageViewController.m

```
- (void)viewDidLoad
{
    webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, self.view.bounds.size.width, 300)];    
    NSString *urlAddress = @"http://myurl.com/mypage";
    NSURL *url = [NSURL URLWithString:urlAddress];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
    [webView loadRequest:requestObj];
    [self.view addSubview:webView];

    webViewForStories = [[UIWebView alloc] initWithFrame:CGRectMake(0, webView.bounds.size.height, self.view.bounds.size.width, self.view.bounds.size.height)];

    NSString *urlAddressForStories = @"http://myurl.com/mysecondpage";
    NSURL *urlForStories = [NSURL URLWithString:urlAddressForStories];
    NSURLRequest *requestObjForStories = [NSURLRequest requestWithURL:urlForStories];
    [webViewForStories loadRequest:requestObjForStories];
    [self.view addSubview:webViewForStories];
    [webViewForStories setDelegate:self];

    NSLog(@"webviewForStories delegate is %@", webViewForStories.delegate);
    NSLog(@"webviewForStories is %@", webViewForStories);
} 
```

这是我设置委托时页面的样子：

![我设置委托时的页面](../Images/4248d9fa88141e388f391249fd308233.png)

这是我不设置委托时页面的样子：

![未设置委托时的页面](../Images/573b8ea2dce18cead2c5f9a7c187271a.png) 唯一的区别是这行代码：

```
[webViewForStories setDelegate:self]; 
```

以下是 NSLog 的相关输出：

```
2012-12-26 14:18:40.720 WGGB for iPad[3144:907] webviewForStories delegate is <MainPageViewController: 0x1f878cc0>
2012-12-26 14:18:40.721 WGGB for iPad[3144:907] webviewForStories is <UIWebView: 0x1f8838c0; frame = (0 300; 768 1004); layer = <CALayer: 0x1f883920>> 
```

这是一个谜，任何帮助表示赞赏。仅供参考，我尝试注释掉第一个 webview，我认为它们可能会发生冲突，但这并没有什么不同。

编辑：

这是我的委托方法：

```
-(void)webViewDidFinishLoad:(UIWebView *)webView
{
    NSLog(@"webview finished loading");
}

-(void)webViewDidStartLoad:(UIWebView *)webView
{
    NSLog(@"webview started loading");
}

// This function allows me to intercept links clicked in a webview and open in
// a navigation window with a back button.
-(BOOL) webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSURL *url = request.URL;
    NSString *urlString = url.absoluteString;

    NSLog(@"urlstring is %@", urlString);

    // Only catching links without "mobile" in the url (i.e. stories)
    if ([urlString rangeOfString:@"/mobile"].location == NSNotFound && [urlString rangeOfString:@"facebook"].location == NSNotFound && [urlString rangeOfString:@"facebook"].location == NSNotFound &&[urlString rangeOfString:@"twitter"].location == NSNotFound && [urlString rangeOfString:@"fb://"].location == NSNotFound && [urlString rangeOfString:@"liverail"].location == NSNotFound && [urlString rangeOfString:@"about:blank"].location == NSNotFound) {
        //DetailViewController *detailView = [[DetailViewController alloc] init];
        //[self.navigationController pushViewController:detailView animated:YES];

        return NO;
    } else {
        return YES;
    }
}

-(void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{
    NSLog(@"error is %@", [error localizedDescription]);
} 
```

他们似乎都没有接到电话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:18:40.830

我想通了...问题出在这种方法上：

```
// This function allows me to intercept links clicked in a webview and open in
// a navigation window with a back button.
-(BOOL) webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSURL *url = request.URL;
    NSString *urlString = url.absoluteString;

    NSLog(@"urlstring is %@", urlString);

    // Only catching links without "mobile" in the url (i.e. stories)
    if ([urlString rangeOfString:@"/mobile"].location == NSNotFound && [urlString     rangeOfString:@"facebook"].location == NSNotFound && [urlString rangeOfString:@"facebook"].location == NSNotFound &&[urlString rangeOfString:@"twitter"].location == NSNotFound && [urlString rangeOfString:@"fb://"].location == NSNotFound && [urlString rangeOfString:@"liverail"].location == NSNotFound && [urlString rangeOfString:@"about:blank"].location == NSNotFound) {
        //DetailViewController *detailView = [[DetailViewController alloc] init];
        //[self.navigationController pushViewController:detailView animated:YES];

        return NO;
    } else {
        return YES;
    }
} 
```

if 语句在 webview 的初始加载时被捕获，因此它返回 NO，这基本上给了我一个空白屏幕。在允许 if 语句运行之前，我必须检查这是否是初始加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:23:13.060

尝试将委托设置为属性而不是 ivar。

```
[self.webViewForStories setDelegate:self] 
```

让 webviews 调用您已实现的委托方法。

# html - 使用正则表达式在 Python 2.7 中解析 html - 不太明白

> ID：14045250
> 
> 赞同：0
> 
> 时间：2012-12-26T19:28:18.567
> 
> 标签：html, regex, string, parsing, python-2.7

抱歉有点笨，但我真的需要 Python 的帮助。

```
['<a href="needs to be cut out">Foo to BAR</a>', '<a href="this also needs to be cut out">BAR to Foo</a>'] 
```

所以我有这个元组，我需要剪掉那个 href 属性里面的内容和`<a>`标签里面的内容 - 基本上，我想要一个看起来像这样的元组：

```
[["needs to be cut out", "Foo to BAR"], ["this also needs to be cut out", "BAR to Foo"]] 
```

在 href 属性里面有很多特殊的符号，例如，

```
<a href="?a=p.stops&amp;direction_id=23600&amp;interval=1&amp;t=wml&amp;l=en"> 
```

我认为，如果我真的不需要尝试解析对象树而只需要网页中的几个 url 和单词，那么使用 HTML 解析器会遇到太多麻烦。但我真的不明白如何形成正则表达式。我形成的正则表达式似乎完全错误。所以我问是否有人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T05:14:20.063

您可以使用 BeautifulSoup 来解析 HTML 实体。

根据您的问题，您已经有以下列表：

```
l = ['<a href="needs to be cut out">Foo to BAR</a>', '<a href="this also needs to be cut out">BAR to Foo</a>'] 
```

现在你需要的只是下面的代码。

```
from BeautifulSoup import BeautifulSoup

parsed_list = []

for each in l:
    soup = BeautifulSoup(each)
    parsed_list.append([soup.find('a')['href'], soup.find('a').contents[0]]) 
```

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T19:44:12.677

Just use a HTML parser anyway. Python comes with a few included, and the [`xml.etree.ElementTree` API](http://docs.python.org/2/library/xml.etree.elementtree.html) is easier to get working than a regular expression for even simple `<a>` tags with arbitrary attributes:

```
from xml.etree import ElementTree as ET

texts = []
for linktext in linkslist:
    link = ET.fromstring(linktext)
    texts.append([link.attrib['href'], link.text]) 
```

If you use `' '.join(link.itertext())` you can get the text out of *anything* nested under the `<a>` tag, if you find that some of the links have nested `<span>`, `<b>`, `<i>` or other inline tags to mark up the link text further:

```
for linktext in linkslist:
    link = ET.fromstring(linktext)
    texts.append([link.attrib['href'], ' '.join(link.itertext())]) 
```

This gives:

```
>>> from xml.etree import ElementTree as ET
>>> linkslist = ['<a href="needs to be cut out">Foo to BAR</a>', '<a href="this also needs to be cut out">BAR to Foo</a>']     
>>> texts = []
>>> for linktext in linkslist:
...     link = ET.fromstring(linktext)
...     texts.append([link.attrib['href'], ' '.join(link.itertext())])
... 
>>> texts
[['needs to be cut out', 'Foo to BAR'], ['this also needs to be cut out', 'BAR to Foo']] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-20T10:17:31.277

我会为此使用 Easy Html Parser EHP。

查看[https://github.com/iogf/ehp](https://github.com/iogf/ehp)

```
lst = ['<a href="needs to be cut out">Foo to BAR</a>', '<a href="this also needs to be cut out">BAR to Foo</a>', '<a href="?a=p.stops&amp;direction_id=23600&amp;interval=1&amp;t=wml&amp;l=en">']

data = [(tag.text(), attr.get('href'))for indi in lst
            for tag, name, attr in Html().feed(indi).walk() if attr.get('href')]

data 
```

输出：

```
[('Foo to BAR', 'needs to be cut out'), ('BAR to Foo', 'this also needs to be cut out'), ('', u'?a=p.stops&direction_id=23600&interval=1&t=wml&l=en')] 
```

# java - 保存和加载首选项，Android 4

> ID：14045256
> 
> 赞同：0
> 
> 时间：2012-12-26T19:28:46.893
> 
> 标签：java, android, sharedpreferences

我正在尝试保存和加载 Android 应用程序的首选项，但我似乎无法让它正常工作。我遇到的所有教程的代码都与我几乎相同。应用程序中的保存代码是：

```
// s is a prepared string
// nameVal is the preference identifier
SharedPreferences pref = getPreferences(Context.MODE_PRIVATE);
                  pref.edit().putString(nameVal, s).commit(); 
```

并且加载代码（到 ArrayList 中）是：

```
a = ((SharedPreferences) getPreferences(Context.MODE_PRIVATE)).getString(fileName, "").split("\n"); 
```

没有要添加的特定于偏好的异常，它只是不存储和检索“”。有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T02:51:14.123

解决方案很简单——Android 对话框不会暂停主线程（我不知道这一点）。我添加了一个静态编辑文本，并且完美加载了首选项……嗯，不完美，但其余的都是由于解析。如果您遇到类似问题来到此站点，请取出提示对话框并添加编辑文本。

再次感谢！

# javascript - 将一个 div 变成一个可拖动的元素，可以对齐位置

> ID：14045260
> 
> 赞同：1
> 
> 时间：2012-12-26T19:29:08.273
> 
> 标签：javascript, jquery, jquery-ui-draggable

我已经审查 jQuery 和 Javascript 很长一段时间了——但我很难进入为它们编程的心态。在找到以前的 stackoverflow 线程并将其修改为我为本次学习练习所考虑的规范后，我很难将每个 div 转换为可排序/可拖动的元素。

```
<!DOCTYPE html>

<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>seed</title>  
<script type='text/javascript' src='http://code.jquery.com/jquery-1.4.4.min.js'></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.js"></script>
<style type='text/css'>
    .redbox {
    position: relative;
    display: block;
    width: 780px;
    height: auto;
    background: red;
    }

    .togglecontainer
    {

        width: 780px;
        height: auto;   
    }

    .handler {
        width: 780px;
        height: auto;
        background: yellow;
    }  

    .container {
        position: relative;
        width: 780px;
        height: 780px;
        background: blue;
    }

    .complete { text-decoration: line-through; color: grey;
    }

    input { padding:2px; border:1px solid #999; border-radius:4px; -moz-border-radius:4px; -web-kit-border-radius:4px; -khtml-border-radius:4px; font-size:20px;}

</style>
<script type='text/javascript'>
// taken from http://jsfiddle.net/davidThomas/XsCAN/6/ 
// http://stackoverflow.com/questions/4639487/remove-specific-box-with-jquery
$(function(){
    var counter = 0;

    $('#creaters').click(function() {
        counter++;
        var redbox = $('<div class="redbox"><div class="handler"> ' + (counter) + ')<input name ="thestep" type="text" value="" maxlength="255" size="65" /></div><div class="togglecontainer"></div></div>').appendTo('.container'),
            appendbtn = $('<button class="appendbtn">Add a link to a pic/vid</button>').appendTo(redbox.find('.togglecontainer')),
            togglebtn = $('<button class="togglebtn">Hide options</button>').appendTo(redbox.find('.handler')),
            deletelistbtn = $('<button class="deletelistbtn">X</button>').appendTo(redbox.find('.handler'));

        redbox.draggable({
            handle: '.handler'
        });

        appendbtn.click(function() {
            var elems = $('<div><input value="some value"  type="text" class="inputfield' + (counter) + '"/>' + '<input type="button" class="removebtn" value="x" id="removebtn"' + (counter) + '"/>' + '</div>').insertBefore(redbox.find('.togglecontainer'));
        });

        $('.removebtn').live('click', function() {
            $(this).parent().remove();
        });

        $('.deletelistbtn').live('click', function() {
            $(this).closest('.redbox').remove();
        });

        togglebtn.click(function() {
            var that = this;
            $('.togglecontainer', redbox).toggle(10, function() {
                var txt = $(that).html();
                $(that).html((txt == 'Hide options') ? 'add media' : 'Hide options');
            });
        });
        togglebtn.trigger("click");

    });

});
</script>
</head>
<body>
  <button id="creaters">Add a Step</button>
<div class="container"></div>
</body>
</html> 
```

目前，代码将每个 .redbox 类转换为可拖动的 jquery 元素，但是它们不会“对齐”到位，不会停留在容器 div 的范围内，也不会在被拖动到新位置后移动它们下方的周围元素。

到目前为止，我已经尝试在容器 div 中启动一个元素，并将每个 redbox 元素变成一个

*   声明，但事实证明是徒劳的。

    我还尝试了 draggable() 和 sortable() 方法，但遇到了困难。

    任何帮助将不胜感激！

    谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:36:48.737

好吧，我没有看到您在可拖动功能中添加快照和包含元素选项。

```
redbox.draggable({
     handle: '.handler',
     snap : '.container',
     containment : '.container'
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T19:50:43.903

见[这里](http://jsfiddle.net/juanpastas/AphpB/1/)。

你是这个意思吗？

我使用了可排序的：

```
$(function(){
    var counter = 0;

    $('.container').sortable();
    $('#creaters').click(function() { 
```

# ubuntu - 如何修复 apt-get: 在 AWS EC2 上找不到命令？

> ID：14045262
> 
> 赞同：128
> 
> 时间：2012-12-26T19:29:33.540
> 
> 标签：ubuntu, amazon-web-services, amazon-ec2

我在我的实例上安装了 Ubuntu 12.04 并尝试使用 apt-get 安装软件包，但出现以下错误：

```
sudo: apt-get: command not found 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：362
> 
> 时间：2013-02-03T02:01:38.670

尝试替换`apt-get`为`yum`基于 Amazon Linux 的 AMI 使用`yum`命令而不是`apt-get`.

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-06-25T19:30:24.407

我猜您实际上使用的是 Amazon Linux AMI 2013.03.1 而不是 Ubuntu Server 12.x，因为您没有安装 apt-get 工具。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-22T14:04:19.463

检查“uname -a”和/或“lsb_release -a”以查看您在 AWS 实例上实际运行的 Linux 版本。默认的 Amazon AMI 映像使用 YUM 作为其包管理器。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-06-29T03:42:18.967

请确保您已连接到 ubuntu 服务器，我遇到了同样的问题，但我已连接到其他发行版，请检查您的详细信息实例中的 AMI 值，它应该类似于

```
AMI: ubuntu/images/ebs/ubuntu-precise-12.04-amd64-server-20130411.1 
```

希望能帮助到你

# delphi - 递归遍历树视图中的节点？

> ID：14045263
> 
> 赞同：6
> 
> 时间：2012-12-26T19:29:34.290
> 
> 标签：delphi, recursion, treeview, iteration

我有一个树视图，其中已经填充了来自另一个过程的文件/文件夹。我想逐一迭代树视图中的项目，从上到下按照确切的顺序进行。但是，与普通列表不同，我不能只使用一个简单的`for`语句。我必须进入每个节点等。

我该怎么做呢？我希望有一种方法可以在不运行递归过程的情况下做到这一点。当我遍历这些项目时，我不一定关心当前关注的项目的父节点或子节点。我只需要能够在`Data`传递每个节点时读取它们的属性，并在通过它时在树视图中突出显示当前节点。对于此树视图中的每个项目，我将执行一些工作，并希望向用户直观地显示在此过程中当前选择了哪个项目。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-26T19:40:55.827

事实上，您可以使用`for`循环。

```
var
  Node: TTreeNode;
....
for Node in TreeView.Items do
  DoSomething(Node); 
```

这是语法糖：

```
for i := 0 to TreeView.Items.Count-1 do
  DoSomething(TreeView.Items[i]); 
```

在可读性方面，我会推荐`for/in`循环。

在不支持节点迭代器的旧 Delphi 版本中，您可能更喜欢使用`while`循环来完成。

```
Node := TreeView.Items.GetFirstNode;
while Assigned(Node) do
begin
  DoSomething(Node);
  Node := Node.GetNext;
end; 
```

我希望还有其他方法可以做到这一点。我知道的只有这些！

* * *

LU RD 进行了有趣的观察，[文档](http://docwiki.embarcadero.com/Libraries/XE3/en/API%3aVcl.ComCtrls.TTreeView.Items)指出：

> 按索引访问树视图项目可能会耗费大量时间，尤其是当树视图包含许多项目时。为获得最佳性能，请尝试设计您的应用程序，使其对树视图的项目索引的依赖关系尽可能少。

这是完全正确的。对于随机访问，代码必须遍历树，从根开始，直到找到第 i^个节点。

但是，对顺序访问进行了优化。Delphi 树视图包装器记住由索引定位的最后一个节点的索引。下次你请求一个与缓存节点的索引不超过一个的节点时，可以快速返回所需的节点。这是在`TTreeNodes.GetNodeFromIndex`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T19:42:59.853

```
var
 i:Integer;
begin
  for I := 0 to tv.Items.Count - 1 do
      begin
        Listbox1.Items.Add(tv.Items[i].Text +' SubItems: ' + IntToStr(tv.Items[i].Count))
      end;

end; 
```

# ruby-on-rails-3 - Rails has_many 嵌套条件

> ID：14045264
> 
> 赞同：0
> 
> 时间：2012-12-26T19:29:39.583
> 
> 标签：ruby-on-rails-3, activerecord

我有一个模型叫`site`.

`site has_many site_settings`
`site_settings belongs_to setting`
`setting`有一个名为的布尔字段`temporary`

我希望和之间的关系`site`只`site_settings`返回`site_settings`与临时无关的`setting`.

我试过了：

```
class Site < ActiveRecord::Base

  has_many :site_settings, :dependent => :destroy, 
    :conditions => {:setting => {:temporary => false} } 
```

我也尝试过一些事情`Proc.new`，但没有成功。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T02:24:40.263

不要忘记加入/包括设置：

```
has_many :site_settings, :dependent => :destroy, :include => :setting, :conditions => {:setting => {:temporary => false}} 
```

# python - 使用字符串动态添加类成员来命名它

> ID：14045265
> 
> 赞同：6
> 
> 时间：2012-12-26T19:29:41.220
> 
> 标签：python, class, dynamic, member

在 Python 中，我很清楚这样一个事实，即可以在定义后将成员添加到类中。但是，有没有办法使用字符串的内容来命名成员？

例如，我可以这样做：

```
class A:
    pass
A.foo = 10

a = A()
print a.foo 
```

但是有没有办法做到这一点：

```
name = "foo"
class A:
    pass
A.[some trick here(name)] = 10

a = A()
print a.foo 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-26T19:32:41.043

使用`setattr`：

```
setattr(A, 'foo', 10) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-26T19:36:05.753

是的！这可以通过[getattr](http://effbot.org/zone/python-getattr.htm)和[setattr](http://docs.python.org/2/library/functions.html?highlight=setattr#setattr)的组合来完成。

```
setattr(A, 'foo', 10)
getattr(A, 'foo') // Returns 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-26T20:45:33.570

仅供参考 - 您可以使用以下命令从整个对象的成员生成字典`vars()`：

```
class A:
    pass
A.foo = 10
A.bar = 'hello'

a = A()
b = vars(a)
print(b['bar'])  # prints hello 
```

# mysql - （几乎）数据丢失免费内存支持数据库

> ID：14045266
> 
> 赞同：1
> 
> 时间：2012-12-26T19:29:44.137
> 
> 标签：mysql

有可能吗？我尝试了内存mysql引擎，但正常重启后数据丢失了。是否有从内存读取并写入内存和硬盘的引擎（或设置）？

我听到你在想：如果你还在使用硬盘，为什么你想要一个内存引擎？好吧，写性能不是问题，读才是。

另外，我注意到有些人在 ramdisk 上运行数据库，这安全吗？是否可以在 ramdisk 上只运行几个表？

# javascript - Google Chrome 扩展的 storage.sync 上出现 QUOTA_BYTES_PER_ITEM 错误

> ID：14045270
> 
> 赞同：2
> 
> 时间：2012-12-26T19:30:23.677
> 
> 标签：javascript, google-chrome, google-chrome-extension, sync

tl;dr：关于 QUOTA_BYTES_PER_ITEM 的同步错误，但我的项目很小，需要帮助找出问题所在。

因此，我在 Google Chrome 扩展程序上遇到了这个错误，我认为这没有多大意义，因为我要保存的内容不会超过 400 字节（序列化，大于JSON 字符串），并且考虑到，`QUOTA_BYTES_PER_ITEM`它`4096`远非该限制。

要么我计算错误（很可能），要么我做错了（并非不可能！）。

您可以查看我的扩展程序的[代码](https://github.com/emotionLoop/paGen)并从[网上商店安装它](https://chrome.google.com/webstore/detail/pagen/eligfkfpdmeloopcoighgpdgedhnoool)

对这个问题很重要的部分如下（CoffeeScript）：

```
# Object: Default settings
defaultSettings =
    type: 'single'
    chars: 14
    howmany: 1
    security:
        lowercase: true
        uppercase: true
        special: true
        punctuation: true
        readable: false

# Object: Current settings
paGenSettings = defaultSettings

# Function: Save Settings
saveSettings = (settings, notify) ->
    if validateSettings settings, true
        # Save settings using the Chrome extension storage API. Try sync, fallback to local
            window.chrome.storage.sync.set { settings: settings }, () ->
                if chrome.runtime.lastError && chrome.runtime.lastError.message && chrome.runtime.lastError.message.indexOf( 'MAX_WRITE_OPERATIONS_PER_HOUR' ) != -1
                    window.chrome.storage.local.set { settings: settings }, () ->
                        paGenSettings = settings

                        if notify
                            showNotification window.chrome.i18n.getMessage( 'settingsSaved' )

                        applySettings()

                        true
                else
                    paGenSettings = settings

                    if notify
                        showNotification window.chrome.i18n.getMessage( 'settingsSaved' )

                    applySettings()

                    true
    true
    else
        false

# Function: Get Settings
getSettings = () ->
    # Get settings using the Chrome extension storage API. Try sync, fallback to local
    window.chrome.storage.sync.get 'settings', (items) ->
        if items.settings
            settings = extend( paGenSettings, items.settings)

            if validateSettings settings, false
                paGenSettings = settings

                applySettings()
            true
        else
            window.chrome.storage.local.get 'settings', (items) ->
                if items.settings
                    settings = extend( paGenSettings, items.settings)

                    if validateSettings settings, false
                        paGenSettings = settings
                applySettings()
            true 
```

如果您检查它，当您保存设置或生成密码（也保存设置）时，您会看到弹出以下错误：

> storage.set 期间出错：超出 QUOTA_BYTES_PER_ITEM 配额。

我已经让它回退到本地存储，但我真的希望它能够同步设置。

因此，如果这不起作用，我将更改 get/set 代码以对每个设置使用不同的键/值，而不是对象，但我认为这没有多大意义，因为此同步功能被宣传为支持对象（而且这个很小），所以我希望我只是做错了什么。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T18:41:28.223

所以我整理了一下。

The main issue was an **"infinite loop"** (n00b) I had because of the **onChanged** listener for **chrome.storage** ( [https://developer.chrome.com/extensions/storage.html#event-onChanged](https://developer.chrome.com/extensions/storage.html#event-onChanged) ), where I'd save the settings every time there was a change detected.

I didn't read the documentation carefully enough and thought this was to "listen" for changes in the settings that came, for example, from a sync (but it listens to any change), and since I can get the settings **from** sync, I don't even need it.

**Removing that listener fixed the problem.**

The new version of the extension (1.0.4) is bug-free as far as I'm aware.

# python - Tkinter 配置列宽

> ID：14045271
> 
> 赞同：8
> 
> 时间：2012-12-26T19:30:29.110
> 
> 标签：python, tkinter

我一直在查看文档，并在 columnconfigure 中找到了 3 个可行的选项：

*   缩小
*   软垫
*   重量

但是，如果您想让列尽可能小怎么办？

我有 3 个检查按钮，我想并排排列。

我发现工作是：

```
weekly.grid(row = 2, column = 1, sticky = W)
monthly.grid(row = 2, column = 1, padx = 75, sticky = W)
yearly.grid(row = 2, column = 1, padx = 150, sticky = W) 
```

难道没有更“漂亮”的方式来做到这一点吗？

（可能值得一提的是，当使用第 2 列和第 3 列时，它们被分开太多了 :-()

最好的祝福，

卡斯帕

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-26T20:47:51.273

使用网格几何管理器的默认行为是列将尽可能小，因此您不需要做任何事情（假设您正确使用网格）。

您描述的元素之间空间过大的行为可能是由于您在同一列中有其他更宽的小部件。该列将默认为可容纳最宽项目的最小宽度。那，或者在您的代码中的其他地方，您为导致它们扩展的某些列赋予非零权重。

在我谈论解决方案之前，让我确保您使用网格将多个小部件放在同一个单元格中的方式很明显是错误的方式。绝对没有理由诉诸这样的解决方案。一般的经验法则是，您永远不应该在一个单元格中放置多个小部件。

对您来说最简单的解决方案是结合 grid 和 pack。将所有复选按钮放在一个框架中，并将它们打包在该框架的左侧。然后，使用 . 将框架放入网格中`sticky="w"`。然后，无论窗口有多大，检查按钮都将始终粘在其包含框架的左侧。

请注意，此解决方案不会违反我之前提到的经验法则。您只需将一个小部件放在一个单元格中：框架。您可以在该内部框架中放置您想要的任何内容，但从网格的角度来看，网格的每个单元格中只有一个小部件。

这是一个基于 python 2.7 的工作示例：

```
import Tkinter as tk

class ExampleView(tk.Frame):
    def __init__(self, *args, **kwargs):
        tk.Frame.__init__(self, *args, **kwargs)
        cbframe = tk.Frame(self)
        cb1 = tk.Checkbutton(cbframe, text="Choice 1")
        cb2 = tk.Checkbutton(cbframe, text="Choice 2")
        cb3 = tk.Checkbutton(cbframe, text="Choice 3")

        cb1.pack(side="left", fill=None, expand=False)
        cb2.pack(side="left", fill=None, expand=False)
        cb3.pack(side="left", fill=None, expand=False)

        # this entry is for illustrative purposes: it
        # will force column 2 to be widget than a checkbutton
        e1 = tk.Entry(self, width=20)
        e1.grid(row=1, column=1, sticky="ew")

        # place our frame of checkbuttons in the same column
        # as the entry widget. Because the checkbuttons are
        # packed in a frame, they will always be "stuck"
        # to the left side of the cell.
        cbframe.grid(row=2, column=1, sticky="w")

        # let column 1 expand and contract with the 
        # window, so you can see that the column grows
        # with the window, but that the checkbuttons
        # stay stuck to the left
        self.grid_columnconfigure(1, weight=1)

if __name__ == "__main__":
    root = tk.Tk()
    view = ExampleView(root)
    view.pack(side="top", fill="both", expand=True)
    root.wm_geometry("400x200")
    root.mainloop() 
```

当然，您也可以将复选按钮放在单独的列中——这通常是最简单的——但您可能需要让其他行中的其他项目跨越多个列并处理列权重。由于根据您的描述尚不清楚您的问题究竟是什么，因此上述解决方案可能对您来说是最简单的。

# batch-file - 需要一点帮助批量过滤行

> ID：14045275
> 
> 赞同：2
> 
> 时间：2012-12-26T19:30:51.300
> 
> 标签：batch-file

我有包含以下内容的文本文件

```
Pool        p c Dev   Dev             Total  Enabled     Used     Free   a   b
------------ - - ----- ------------ -------- -------- -------- -------- --- ---
FC100        T F FBA   RAID-3(1+1)   13849.1  13849.1  13119.4   7292.0   0 Ena
SATA500      T S FBA   RAID-3(1+1)   50019.2  50019.2  46974.5   3044.9 Ena   0 
```

我想从文件中显示提取 FC100 和 SATA500，因为这两行包含“Ena”。我的批处理脚本经验很少，因此以我有限的知识，我想出了以下脚本。

```
@ECHO OFF
setlocal enabledelayedexpansion

FOR /F "tokens=1,* delims= " %%a in (list.txt) DO (
    if "%%b" NEQ "" (

        set string=%%b
        set substring= Ena

        echo !string! |findstr "!substring!" > nul
        if errorlevel 1 (
            rem echo !SubString!
        ) else (
            echo %%a
        )
    )
) 
```

上面代码发生的情况是我得到了所需的输出，但我也得到了 Pool，因为该行包含启用的 Ena。如何提取仅包含 Ena 且与 Enabled 不匹配的行。

电流输出

```
Pool
FC100
SATA500 
```

我尝试对 findstr 使用一些正则表达式魔法，但它不适合我。注意 - 我可以在 Perl 中解决这个问题，但不幸的是我无法在系统上安装 Perl，所以我必须批量执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T20:16:05.503

```
@echo off
for /F "skip=1" %%a in ('findstr /C:" Ena" list.txt') do (
   echo %%a
) 
```

**编辑：** *在任何部分精确寻找带有“Ena”字符串的行的新解决方案*

```
@echo off
for /F %%a in ('findstr /R /C:"\<Ena\>" list.txt') do (
   echo %%a
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T20:47:04.323

您可能希望匹配`Ena`整个单词。为此，您可以用`\<`and包围您的搜索词`\>`，即`substring`像这样更改分配：

```
set "substring=\<Ena\>" 
```

顺便说一句，可能不需要`substring`在循环的每次迭代中分配相同的值。您可以在循环之前只分配一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T19:58:55.690

试试这个：

```
set substring="Ena[^a-zA-Z]" 
```

`[^a-zA-Z]`指示`findstr`不要使用在 . 之后包含字母的字符串`Ena`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-29T13:18:30.747

代替

```
echo !string! |findstr "!substring!" > nul 
```

和

```
echo !string! |findstr "!substring!" |findstr /v "Enabled" > nul 
```

甚至更简单：

```
echo !string! |findstr "Ena" |findstr /v "Enabled" > nul 
```

首先`findstr`将包括所有带有“Ena”的行，第二个`findstr /v`将排除所有带有“Enabled”的行。

# magento - 浏览器在 Magento 中显示空白页面

> ID：14045282
> 
> 赞同：2
> 
> 时间：2012-12-26T19:31:16.833
> 
> 标签：magento

加载 Magento 主页时出现空白页，即浏览器显示为空白。看来我面临一些错误。

我应该怎么做才能克服这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T19:34:17.670

请转到 Magento 根文件夹，找到`index.php`，打开它，找到以下行并取消注释（删除`#`），然后保存文件。

```
#ini_set('display_errors', 1); 
```

您现在应该在浏览器中看到错误。希望这对您有所帮助。

# android - 将视图添加到 Android 的滚动视图

> ID：14045286
> 
> 赞同：0
> 
> 时间：2012-12-26T19:31:46.280
> 
> 标签：android, view, scrollview

我将首先解释完成的程序应该做什么。首先，我希望它为特定按钮设置一个 OnClickListener。单击按钮后，我将假定用户已在 EditText 中输入了一些内容。我读入了用户在 EditText 中输入的内容，然后检查它是否是特定的字符串。如果是，那么我添加一个 TextView 而不是设置该 TextView 的文本以询问用户他想拨打什么号码。我添加了一个 EditText 供用户输入数据，而不是一个按钮。一旦用户在 EditText 中输入了数据并单击了按钮，我想创建一个名为 theCall 的新对象，并且该应用程序会在课堂电话中创建一个意图。这是我当前的代码：

主类：

```
package com.sam.projectDAD;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnFocusChangeListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.TextView;

public class ProjectDADActivity extends Activity {
/** Called when the activity is first created. */

private EditText functionName,input;
private Button subCommand,subParam;
private TextView response;
private LinearLayout convo;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    response = new TextView(this);
    convo = new LinearLayout(this);
    input = new EditText(this);
    subParam = new Button(this);

    functionName = (EditText) findViewById(R.id.functionName);
    subCommand = (Button) findViewById(R.id.unFocus);

    subCommand.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {
            String functionNameText = functionName.getText().toString();
            if (functionNameText == "call") {
                convo.addView(response);
                response.setText("What phone number would you like to call?");
                convo.addView(input);
                convo.addView(subParam);
                subParam.setOnClickListener(new OnClickListener() {
                    public void onClick(View v) {
                            phone theCall = new phone(response.getText().toString());
                    }

                });
            }
        }
    });

}
} 
```

电话班：

```
package com.sam.projectDAD;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.view.View;
import android.view.View.OnFocusChangeListener;

public class phone extends Activity {
public phone(String phone){
    call(phone);
}

private void call(String phoneNum){
    String uri = "tel:" + phoneNum.trim() ;
    Intent intent = new Intent(Intent.ACTION_CALL);
    intent.setData(Uri.parse(uri));
    startActivity(intent);
}

} 
```

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.33" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <Button
            android:id="@+id/unFocus"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />

<EditText
    android:id="@+id/functionName"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10" >

    <requestFocus />
</EditText>

    </LinearLayout>
</ScrollView>

</LinearLayout> 
```

我的问题是，当我在初始 EditText 中输入“呼叫”时，什么也没有发生。

任何帮助表示赞赏！

谢谢，

山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:36:03.397

您需要添加`convo`到根 LinearLayout。`onClick()`在您的方法中可能像这样：

```
LinearLayout root = (LinearLayout) findViewById(R.id.scrollView1).getParent();
root.addView(convo); 
```

此外，您*不能*用于`==`比较 Java 中的字符串，您必须使用`equals()`：

```
if (functionNameText.equals("call")) { 
```

（有关原因的更多信息，请阅读：[如何在 Java 中比较字符串？](https://stackoverflow.com/q/513832/1267661)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T19:52:41.487

尝试以下：

1.  使用try catch，

    `try { //your code} catch(ActivityNotFoundException activityException) {Log.e("helloandroid dialing example", "Call failed", e); }`

2.  添加 `<uses-permission android:name="android.permission.CALL_PHONE"></uses-permission>` 到您的清单中。

# rest - 使用 XMLHttpRequest 规范化 URL？

> ID：14045287
> 
> 赞同：1
> 
> 时间：2012-12-26T19:31:47.893
> 
> 标签：rest, xmlhttprequest, http-redirect

根据[AJAX 重定向困境，如何获取重定向 URL 或如何设置重定向请求的属性，](https://stackoverflow.com/q/2800982/14731)似乎无法找出 HTTP 重定向何时发生，也无法找出浏览器重定向到的目标 URL。

因此，如何以可靠的方式比较两个 URL？例如，我的代码比较两个 URL：

`http://example.com/users/joe@home.com/`和 `http://example.com/users/53/`

两者实际上指的是同一个用户（第一个请求重定向到第二个 using `HTTP 303`），但浏览器似乎没有办法发现这一点，因此它错误地认为这两个用户不同。

从技术上讲，资源表示可以包含其规范的 URI，但如果可能的话，我想避免这种变通方法/黑客。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:44:12.787

我最终将规范 URI 作为响应正文的一部分返回。这是一个丑陋的黑客，但似乎没有人有任何其他想法。

欢迎投稿！随时发布新的答案，我会考虑的。

**更新**：W3C 正在讨论解决此问题[https://www.w3.org/Bugs/Public/show_bug.cgi?id=15417](https://www.w3.org/Bugs/Public/show_bug.cgi?id=15417)

# android - 将 Parcelables 写入 Parcel

> ID：14045316
> 
> 赞同：0
> 
> 时间：2012-12-26T19:34:29.727
> 
> 标签：android

我有一个实现`Parcelable`. 该类的三个字段也是`Parcelable`对象。当我通过 dest.writeParcelable(mParcelableObject, 0) 将这些字段写入 Parcel 并尝试读回它们并通过`in.readParcelable(classLoader)`我得到一个`ClassCastException`. 似乎我无法将多个写入`Parcelables`a`Parcel`并期望系统找出写入的哪些 Parcelables 对应于我的哪些字段。换句话说，如果我把它们都写出来，然后依次读出来：

```
someFieldOfTypeA = in.readParcelable(classLoader)
someFieldOfTypeB = in.readParcelable(classLoader)
someFieldOfTypeC = in.readParcelable(classLoader) 
```

..那么我永远无法成功写入`someFieldOfTypeB`from `readParcelable`。阅读假设 this`readParcelable`的类型是 A 类，这是我写的第一个类型`writeParcelable`。

我希望这有任何意义。

那么如何编写多个 parcelables 然后读取它们并将它们分配给它们相应的字段而不得到一个`ClassCastException`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:53:06.370

好吧，对我来说，我最好直接调用 FieldOfTypeB.CREATOR.writeToParcel(dest) （因为这些字段本身就是 Parcelable）。

# django - Django/Python 从具有相同应用程序名称和相同模型名称的不同 django 项目导入

> ID：14045317
> 
> 赞同：0
> 
> 时间：2012-12-26T19:34:37.063
> 
> 标签：django, importerror

我的django项目结构如下：

主要的/

```
project_A/
 apps/
    account
       models.py
       views.py
       urls.py
       __init__.py
    purchase
       models.py
       views.py
       urls.py
       __init__.py
   …..

project_B/
 apps/
    account
      models.py
      views.py
      urls.py
      __init__.py
    signups
      models.py
      views.py
      urls.py
      __init__.py
   …. 
```

在我的主/工作区下，我有两个单独的 django 项目，分别称为“Project_A”和“Project_B”。每个项目都有自己的一组应用程序。每个项目都有一个名为“帐户”的应用程序。（在不同的 Django 项目中使用相同的应用程序名称）。我需要让两个项目相互交谈，为此我需要在 Project_A 中的“购买”应用程序的 views.py 中执行以下导入

从 project_B.apps.account.models 导入账户

（这里的Account是account app的models.py中的一个model，两个不同django项目中的model和app名字一样）

但是，它看起来像基于导入的工作方式；从 Project_A 中，上述导入基本上解析为：

from account.models import Account（它从models.py解析为Project_A的帐户应用程序的Account模型。）但是，我需要从Project_B导入。我怎样才能让它工作？

Django 版本：1.3 Python 版本 2.7.2 Ubuntu 12.04

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T05:19:50.763

Try giving alias via Python keyword `as`. Take a look [here](http://docs.python.org/2/reference/simple_stmts.html#import)

Example:

```
from project_B.apps.account.models import Account as Account_b 
```

# hadoop - Cassandra Hadoop 集成和字数统计示例

> ID：14045318
> 
> 赞同：1
> 
> 时间：2012-12-26T19:34:45.187
> 
> 标签：hadoop, cassandra, integration, word-count

我正在使用 Cassandra 1.1.6 和 Hadoop 1.0.4。我试图整合它们并在 cassandra 中运行 worcount 示例。我知道默认情况下这个例子使用了一些罐子。但是，我想用 hadoop 运行这个例子。目前，我使用的是 master 并且只有一个 slave。为了使用 hadoop 运行这个示例，我需要做哪些修改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:34:39.337

我设置了一次并记录了我在这里所做的事情

[http://blog.alvazan.com/165/how-to-set-up-the-cassandra-wordcount-example/](http://blog.alvazan.com/165/how-to-set-up-the-cassandra-wordcount-example/)

它可能已经过时了。我们最终将使用 PlayOrm 为 cassandra 以及它的 NoSql 实体做另一个示例（尽管使用一些关系模式，但使用 nosql 模式而不是关系模式）。

院长

# c# - 在 ASP.NET MVC 4 中更新相关数据

> ID：14045319
> 
> 赞同：0
> 
> 时间：2012-12-26T19:34:47.750
> 
> 标签：c#, asp.net-mvc, database, entity-framework, database-first

我有 3 个与外键 Student、Loan 和 Book 相关的表，当我创建一个新学生时，我可以将它与 book 表 Book 相关联，并将其保存在表 Loan 中，但是如果我在现有学生中进行编辑，则更改不会保存在 Student 中桌子。

StudentController.cs 我

```
 public ActionResult Create()
    {
        ViewBag.ISBN = new SelectList(db.Books, "ISBN", "Titulli");
        return View();
    }

    //
    // POST: /Student/Create

    [HttpPost]
    public ActionResult Create(Student student)
    {
        if (ModelState.IsValid)
        {
            db.Students.Add(student);
            db.SaveChanges();
            Loan l = new Loan()
            {
                StudentID = student.StudentID,
                ISBN = student.ISBN.Value,
            };
            db.Loans.Add(l);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        ViewBag.ISBN = new SelectList(db.Books, "ISBN", "Titulli", student.ISBN);

        return View(student);
    }

    //
    // GET: /Student/Edit/5

    public ActionResult Edit(int id = 0)
    {

        Student student = db.Students.Find(id);
        if (student == null)
        {
            return HttpNotFound();
        }

        ViewBag.ISBN1 = new SelectList(db.Books, "ISBN", "Titulli");
        return View(student);
    }

    //
    // POST: /Student/Edit/5

    [HttpPost]
    public ActionResult Edit(Student student)
    {
        if (ModelState.IsValid)
        {
            db.Entry(student).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        ViewBag.ISBN1 = new SelectList(db.Books, "ISBN", "Titulli", student.ISBN);
        return View(student);
    } 
```

如果我将代码预先保存在 Loan 中，在这种情况下我会收到错误消息，说“可空对象必须有一个值”。

StudentController.cs II

```
public ActionResult Create()
    {
        ViewBag.ISBN = new SelectList(db.Books, "ISBN", "Titulli");
        return View();
    }

    //
    // POST: /Student/Create

    [HttpPost]
    public ActionResult Create(Student student)
    {
        if (ModelState.IsValid)
        {
            db.Students.Add(student);
            db.SaveChanges();
            Loan l = new Loan()
            {
                StudentID = student.StudentID,
                ISBN = student.ISBN.Value,
            };
            db.Loans.Add(l);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        ViewBag.ISBN = new SelectList(db.Books, "ISBN", "Titulli", student.ISBN);

        return View(student);
    }

    //
    // GET: /Student/Edit/5

    public ActionResult Edit(int id = 0)
    {

        Student student = db.Students.Find(id);
        if (student == null)
        {
            return HttpNotFound();
        }

        ViewBag.ISBN1 = new SelectList(db.Books, "ISBN", "Titulli");
        return View(student);
    }

    //
    // POST: /Student/Edit/5

    [HttpPost]
    public ActionResult Edit(Student student)
    {
        if (ModelState.IsValid)
        {
            db.Entry(student).State = EntityState.Modified;
            db.SaveChanges();
            Loan w = new Loan()
            {
                StudentID = student.StudentID,
                ISBN = student.ISBN.Value,
            };
            db.Loans.Add(w);
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        ViewBag.ISBN1 = new SelectList(db.Books, "ISBN", "Titulli", student.ISBN);
        return View(student);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:00:57.677

尝试这个：

```
[HttpPost]
public ActionResult Edit(Student student)
{
    if (ModelState.IsValid)
    {
        var studentDB = db.Students.Find(id);
        db.Entry(studentDB).CurrentValues.SetValues(student);

        db.SaveChanges();
        Loan w = new Loan()
        {
            StudentID = student.StudentID,
            ISBN = student.ISBN.Value,
        };
        db.Loans.Add(w);
        db.SaveChanges();
        return RedirectToAction("Index");
    }
    ViewBag.ISBN1 = new SelectList(db.Books, "ISBN", "Titulli", student.ISBN);
    return View(student);
} 
```

# lua - 这种设计模式是否存在问题：主要 --> 图形 <--> 数据？

> ID：14045321
> 
> 赞同：3
> 
> 时间：2012-12-26T19:35:08.577
> 
> 标签：lua, design-patterns, codea

*我在 Lua 和 Codea 中发布了这个，因为这就是我正在使用的，但我认为这是一个非常普遍的问题。*

我正在考虑显示图形的整体设计模式，我想知道它是否存在问题。

这是我正在考虑的设计模式：

类中的`setup()`方法`Main`告诉`Graphics`类创建一些图形元素：例如，两个正方形和一个椭圆。

该类`Graphics`生成每个元素所需的参数，将它们存储为一个表，并将该表发送到一个`Data`类。

当应用程序开始绘制时，`draw()`函数 in`Main`告诉`Graphics`类绘制已创建的对象。

然后`Graphics`班级要求`Data`班级交回它在 期间发送的所有表格`setup()`，并使用它们来绘制元素。

`Main`commands`Graphics`哪些命令和查询`Data`。我确信这是一个已知模式：是否存在通常与之相关的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T21:08:06.547

你在做什么——本质上是模型-视图-控制器，通常用于工业和应用程序开发。它工作得相对较好，尽管没有一种编程范式是没有缺陷的。话虽如此，MVC 是为*从事大型项目的大型团队*而设计的。多个人在一个 Codea 项目上一起工作在逻辑上是不可能的，所以考虑到你自己工作，我猜这个项目将是中小型项目。在这样的项目上单独工作时，务实、直观的方法是迄今为止最好的选择。

在这样的事情上使用 MVC 有点像建立一个完整的民主国家，包括一个国会/议会、国家元首和法院系统，只是为了管理一个家庭的事情。民主是好的，健全的选举和制衡制度是保持制度平稳运行的唯一途径。然而，在一个家庭中，即使仍然需要维持秩序和幸福，但方法却完全不同。

对你来说，你能做的最好的事情就是想想这些想法是如何在你的脑海中形成的。你认为一大群敌人是一个单一的实体，还是一组自主对象？你认为宇宙飞船是一个完美的数学属性集合，还是用户在屏幕上与之交互的图像？当暂停画面出现时，游戏画面是否还在，只是隐藏了，还是已经不复存在并被替换了？

此外，您如何构建想法？您是从广泛的类别开始，逐步深入到更精细的细节，还是您的脑海中有一个生动的心理形象，您努力为之建立一个世界？你的程序概念是由一个在某些点深入现实的巨大流程图组成，还是由一组节点相互发送消息组成？所有这些都是只有你能回答的问题。如果您天生就倾向于 MVC，那么您可能想要坚持下去。如果你在一本书中读到它，并决定，即使你并没有真正明白它为什么有用，它一定是某种神奇的精灵粉，你可以洒在任何项目上以使其变得容易，我敦促你重新考虑。

快乐编码！

顺便说一句，我认为这个问题比堆栈溢出更适合[堆栈交换程序员。](https://softwareengineering.stackexchange.com/)这是一个微妙的区别，但 Stack Overflow 是针对*事实*的，例如错误修复和算法，而 Programmers 是针对如何编写软件的*意见。*

# c - 错误 C2143：语法错误：在 '&' 之前缺少 ')'

> ID：14045325
> 
> 赞同：4
> 
> 时间：2012-12-26T19:35:51.793
> 
> 标签：c, visual-studio, compiler-errors

我找到[了这个链接](http://answers.yahoo.com/question/index?qid=20091203110734AAHlSdb)，但这不是我的问题。

我在声明中遇到错误。

这里是我的报关表：

```
typedef struct
{
    int buffer[10];
} Special_t;

void Special_Reset(Special_t &context); 
```

这是一个 .c 文件。我正在使用 Visual Studio 2010 为 Windows 编译它。这是跨平台项目的一部分。这个确切的代码使用嵌入式 C 编译器可以正常工作。

我还尝试使用以下命令使用命令行进行构建：

```
cl main.c /I. /TC 
```

/TC 表示“强制 c 编译器”，而不是 C++ 编译器。它也没有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T19:38:32.073

使用`&`通过引用传递仅在 C++ 中有效。尝试通过指针传递或切换到 C++ 编译器。

# android - FragmentActivity 生成的整数资源都是大整数

> ID：14045329
> 
> 赞同：0
> 
> 时间：2012-12-26T19:36:14.303
> 
> 标签：android, android-resources, android-fragmentactivity, r.java-file

我使用了一个常数

```
private int SOME_GEN_ID = 1;
startActivityForResult(intent , SOME_GEN_ID); 
```

而不是使用 /res/values/integers.xml 中定义的整数作为参数`startActivtyForResult()`

```
startActivityForResult(intent , R.integer.some_gen_id); 
```

通过使用常量，它解决了错误：

```
"Can only use lower 16 bits for requestCode" 
```

但是，我想知道这个问题是否已经解决，或者在使用时是否所有整数资源都解析为大整数`FragmentActivty`？

[此处](http://code.google.com/p/zxing/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Priority%20Owner%20Summary&groupby=&sort=&id=958)报告的原始问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T19:39:57.877

`R.integer.some_gen_id`不是整数资源的值。它是整数资源的*ID*。ID 是 32 位值。如果您想要整数资源的*值*，请使用`getResources().getInteger(R.integer.some_gen_id)`.

# yii - 扩展 Cmenu 以更改视图文件中的默认“调用”$this->menu

> ID：14045331
> 
> 赞同：0
> 
> 时间：2012-12-26T19:36:17.093
> 
> 标签：yii, yii-components

我已经扩展了默认的 CMenu，当我想使用这个扩展版本的 CMenu 时，我执行以下操作： `$this->widget('application.components.translateCMenu',....`

这对我有用，但在大多数 CRUD 生成的视图文件中，menuwidget 是以另一种方式“准备”的：

`$this->menu=array()`

我想强制 yii 使用我扩展的 CMenu 类而不是默认的 CMenu 小部件类来呈现（操作）菜单。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:21:22.437

如果您希望自动生成的代码无论如何都是自定义的，那么您需要编写自己的[Gii 模板](http://www.yiiframework.com/doc/guide/1.1/en/topics.gii#extending-gii)，这非常简单，并且经常被推荐，因此您可以拥有适合您个人/公司风格的自动生成代码。

# excel - Excel Countif 列 A 中的日期大于列 B

> ID：14045332
> 
> 赞同：11
> 
> 时间：2012-12-26T19:36:19.790
> 
> 标签：excel, date, countif

A 列和 B 列都有日期。如果 A 列中的日期大于 B 列同一行中的日期，则应计算该行。为了添加上下文，我试图计算完成日期超过截止日期的行数。如何实现？

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-26T19:41:56.740

你可以试试这个：

```
=SUMPRODUCT(--(A:A>B:B)) 
```

它将汇总列中日期`A`大于列中日期的范围内的所有实例`B`。

您也可以这样做，但需要以数组公式 ( `Ctrl+Shift+Enter`) 的形式输入：

```
=SUM(IF(A:A>B:B,1,0)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T19:42:12.677

创建一个具有执行比较功能的列，例如`=A1 > B1`。这将为您提供一个包含 TRUE 或 FALSE 的列以供您比较。然后你可以使用 COUNTIF 函数来统计这个函数的结果，例如`=COUNTIF(C:C, "=TRUE")`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T19:44:36.297

我会添加一个新的附加列（比如 C），它应该有这个公式 =IF(A1>B1; 1; 0)。然后您可以添加一个新单元格 =SUM(C:C) 以获取结果编号。

# php - PHP 简单缓存

> ID：14045333
> 
> 赞同：2
> 
> 时间：2012-12-26T19:36:33.007
> 
> 标签：php, caching

我有一个从以下代码生成的动态样式表。

如果文件存在，这是将其缓存到文件并加载它的最佳方法。

```
case 'stylesheet':
    header('Content-type: text/css');   
    header("Cache-Control: must-revalidate"); 
    $offset = 72000 ; 
    $ExpStr = "Expires: " . gmdate("D, d M Y H:i:s", time() + $offset) . " GMT"; 
    header($ExpStr);

    $stylesheets = array(
        'open_sans'   => file_get_contents('http://fonts.googleapis.com/css?family=Open+Sans:400,600,700')
    );
    exit; 
```

从 echo CSS {$stylesheets['open_sans']} CSS 打印；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T05:53:42.893

我觉得我现在很好。

我发现了一个非常简单而强大的类： [https ://github.com/gilbitron/PHP-SimpleCache](https://github.com/gilbitron/PHP-SimpleCache)

为了检查我正在做的事情：

```
if (file_exists(CACHE_PATH . 'stylesheet.cache')) {
    require CACHE_PATH . 'stylesheet.cache'; 
    exit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T19:44:09.777

[这里](http://kyleslattery.com/entries/simple-php-caching-using-output-buffering)有一个简单的缓存实现，可以在像你这样的代码中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T10:44:19.130

为什么不缓存整个网站而不仅仅是 CSS 文件。看看这个[Cache](http://codecanyon.net/item/php-simple-cache/4169137)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-17T18:57:48.600

试试[phpFastCache.com](http://phpFastCache.com)

这是一个例子，很简单。缓存你的 CSS 可以这样做：

```
require_once("phpfastcache/phpfastcache.php");

$css = __c()->get("csspage.user_id_something");

if($css == null) {
       // handle your css function here
       $css = "your handle function here";
       // write to cache 1 hour
       __c()->set("csspage.user_id_something", $css, 3600);
}

echo $css; 
```

PHP 缓存整个网页：您也可以使用 phpFastCache 轻松缓存整个网页。这是一个简单的示例，但在实际代码中，您应该将其拆分为 2 个文件：cache_start.php 和 cache_end.php。cache_start.php 将存储开始代码直到 ob_start(); cache_end.php 将从 GET HTML WEBPAGE 开始。然后，您的 index.php 将在文件开头包含 cache_start.php，在文件末尾包含 cache_end.php。

```
<?php
    // use Files Cache for Whole Page / Widget

    // keyword = Webpage_URL
    $keyword_webpage = md5($_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'].$_SERVER['QUERY_STRING']);
    $html = __c("files")->get($keyword_webpage);

    if($html == null) {
        ob_start();
        /*
            ALL OF YOUR CODE GO HERE
            RENDER YOUR PAGE, DB QUERY, WHATEVER
        */

        // GET HTML WEBPAGE
        $html = ob_get_contents();
        // Save to Cache 30 minutes
        __c("files")->set($keyword_webpage,$html, 1800);
    }

    echo $html;
?> 
```

减少数据库调用数据库的 PHP 缓存类：您的网站有 10,000 名在线访问者，并且您的动态页面必须在每次页面加载时向数据库发送 10,000 个相同的查询。使用 phpFastCache，您的页面仅向 DB 发送 1 个查询，并使用缓存为 9,999 名其他访问者提供服务。

```
<?php
    // In your config file
    include("phpfastcache/phpfastcache.php");
    phpFastCache::setup("storage","auto");

    // phpFastCache support "apc", "memcache", "memcached", "wincache" ,"files", "sqlite" and "xcache"
    // You don't need to change your code when you change your caching system. Or simple keep it auto
    $cache = phpFastCache();

    // In your Class, Functions, PHP Pages
    // try to get from Cache first.
    // product_page = YOUR Identity Keyword
    $products = $cache->product_page;

    if($products == null) {
        $products = YOUR DB QUERIES || GET_PRODUCTS_FUNCTION;

   // set products in to cache in 600 seconds = 10 minutes
        $cache->product_page  = array($products,600);
    }

    foreach($products as $product) {
        // Output Your Contents HERE
    }
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-17T20:19:09.620

我建议你[APC 缓存](http://php.net/manual/en/book.apc.php)。它是一个稳定且快速的 PHP 内存缓存。我将它用于我的整个应用程序，但如果需要，您可以使用它来保存变量。您可以将 $stylesheets['open_sans']（使用 apc_store 函数）的内容保存在缓存变量中，然后从 RAM 内存（快速）从那里提供服务（您将使用 apc_fetch），只要您想要设置过期时间。

# c# - 调试时，应用程序是否已构建？

> ID：14045337
> 
> 赞同：0
> 
> 时间：2012-12-26T19:36:50.333
> 
> 标签：c#, .net, compilation

> **可能重复：**
> [调试器如何工作？](https://stackoverflow.com/questions/216819/how-does-a-debugger-work)

当我使用调试时，它的内部看起来如何？该应用程序已编译并构建还是有一些运行编译？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T19:39:26.603

该应用程序像往常一样编译并生成调试符号。还有通常的即时编译，这不是调试所独有的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T19:39:15.247

它是通过添加允许调试的[PDB 文件构建的。](http://msdn.microsoft.com/en-us/library/ms241903%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T19:40:20.780

深入调试只是[MSBUILD](http://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx)
中的一种配置类型， 无论您`MSBUILD`在本`DEBUG`节中做什么，都可以完成

# c# - 尝试将添加到项目的脚本作为 URI 引用

> ID：14045339
> 
> 赞同：0
> 
> 时间：2012-12-26T19:37:19.123
> 
> 标签：c#, wpf, reference, uri, directory

这个问题应该很简单，但我很难让一些东西工作。首先，这是我的文件结构：

![在此处输入图像描述](../Images/a5d02e7050c8b12dc16250470f337b04.png)

我只是想使用这行代码：

```
StreamResourceInfo sri = Application.GetResourceStream(new Uri(string.Format("{0}", path), UriKind.Relative)); 
```

在哪里

字符串路径 = @"Alliance\CommonUI\Dashboard\Scripts\JavaScript.js";

我收到以下错误：

![在此处输入图像描述](../Images/4573794874af0fb2cd1e6bab5ce7f2b5.png)

如果有人能引导我朝着正确的方向前进，我将不胜感激。请注意，此代码已交给我，可能需要更改。我仍在学习...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:37:16.897

我最终无法使用这种方法。我最终试图将 Telerik 控件导出到 HTML。使用 Telerik 推荐的方法（我在问题中尝试做的）证明是不可能的，因为该控件包含另一个不会将足够信息传递给 Javascript 的控件。我最终将图表的 PNG 嵌入 HTML 以解决问题。不像我们想要达到的那样，但也不算太糟糕。它完成了工作。

# ios - 呈现新的 ModalViewController 时出现 NSUNKnownKeyException 异常

> ID：14045342
> 
> 赞同：0
> 
> 时间：2012-12-26T19:37:26.517
> 
> 标签：ios

我在我的模型类组件中设置所有者视图控制器，单击时需要呈现一个详细视图控制器。模型组件的点击手势代码如下：

```
DetailViewController *dvc = [[DetailViewController alloc] init];
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil];
dvc = [storyboard instantiateViewControllerWithIdentifier:@"TileDetailView"];
dvc.infoRequest = self.data; // data to display
[dvc setModalTransitionStyle:UIModalTransitionStyleCoverVertical];
[self.viewController presentViewController:dvc animated:YES completion:^{
        ;
    }]; 
```

`'TileDetailView'`是`detailedViewController`故事板中的 id。现在执行此代码时，我收到下面提到的错误。在网上搜索时，我发现当有所有者错误时会出现这种错误；但是我无法在此处识别错误，因为 The`detailedViewController`是从此处发起的`Mainstoryboeard`并且是此处的有效身份。

任何帮助/参考表示赞赏。谢谢。

错误跟踪：

**由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类与键 metadataView 的键值编码不兼容。**'

```
*** First throw call stack:
(0x27d2012 0x1c0fe7e 0x285afb1 0x16bc711 0x163dec8 0x163d9b7 0x1668428 0xd740cc 0x1c23663 0x27cd45a 0xd72bcf 0xc37e37 0xc38418 0xc38648 0xc38882 0xc44235 0xe433d2 0xc414f3 0xc41777 0x46010 0xe2189a 0xe209db 0xe2211f 0xe24d6d 0xe24cec 0xe1ca68 0xb89fc2 0xb8a4a3 0xb683aa 0xb59cf8 0x2c9bdf9 0x2c9bad0 0x2747bf5 0x2747962 0x2778bb6 0x2777f44 0x2777e1b 0x2c9a7e3 0x2c9a668 0xb5765c 0x24ed 0x2415)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:42:47.283

NSUnknownKeyException', reason: '[setValue:forUndefinedKey:]' 通常表明您在 XIB 文件中将一个项目设置为多个 IBOutlets，或者您在 initWithNibFileName: 中加载了错误的 XIB 文件。视图控制器上的每个属性都应与 XIB 文件中的项目相对应。XIB 的键/值对必须与 XIB 文件中的属性匹配。

# apache - 试图解释 mod_rewrite - 可以使用一些信息

> ID：14045344
> 
> 赞同：1
> 
> 时间：2012-12-26T19:37:53.040
> 
> 标签：apache, .htaccess, mod-rewrite

好的，我对 mod_rewrite 并不感到惊讶。我正在努力变得更好-但有时阅读起来有点困难。

无论如何，我正在尝试为客户设置一个测试站点，并移动他们当前的实时站点。我一直在阅读 mod_rewrite，但很难为我找到一个易于理解的来源。

他们有一个相当广泛的 .htaccess 文件。

例如：

```
RewriteCond %{HTTP_HOST} ^clientdomain\.com
RewriteCond %{HTTPS} =on
RewriteRule .* https://www.%{SERVER_NAME}%{REQUEST_URI} [R,L] 
```

我读这个的方式是——

如果域以 clientdomain.com 开头，则重定向到启用了 HTTPS 的服务器 - 我读对了吗？

接下来是这样的：

```
RewriteCond %{HTTP_HOST} ^(.*)clientdomain2.COM [NC]
RewriteRule ^(.*)$ clientdomain/template.php?pid=49 [R,L] 
```

据我所知，这表示如果域是 clientdomain2.com，则指向 clientdomain 并使用 pid=49 的 GET 参数转到 template.php 页面 - 对吗？

最后，我完全不知道这意味着什么：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/index.php
RewriteCond %{REQUEST_URI} (/|\.php|\.html|\.htm|/[^.]*)$  [NC]
RewriteRule ^(.*)(/|\.php|\.html|\.htm)*$ index.php?phpinc=$1 [QSA]
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization},L] 
```

看起来第一部分正在剥离所有 .php、.htm 和 .html - 对吗？

对此的任何建议，或易于理解的 mod_rewrite 处理的来源将非常受欢迎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:56:53.413

> 如果域以 clientdomain.com 开头，则重定向到启用了 HTTPS 的服务器 - 我读对了吗？

几乎，它应该被阅读：

“如果域以`clientdomain.com` **AND**请求是 HTTPS 请求开头，则 302 重定向到`ServerName`指令定义的服务器（可能在 vhost 配置中），但`www.`前面有一个相同的请求并使用 HTTPS。”

> 据我所知，这表示如果域是 clientdomain2.com，则指向 clientdomain 并使用 pid=49 的 GET 参数转到 template.php 页面 - 对吗？

不，这会检查其中的任何内容`clientdomain2.COM`，不区分大小写（`NC`标志），并且 302 会将其重定向到相同的主机和协议以及 URI `/clientdomain/template.php?pid=49`。因为它不包含协议和主机名（例如`http://clientdomain2.com/`），所以它将重定向到与发出请求的主机和协议相同的主机和协议，只有 URI 发生变化。示例：请求是 for`http://www.clientdomain2.com/something/foo`并且重定向到`http://www.clientdomain2.com/clientdomain/template.php?pid=49`.

> 看起来第一部分正在剥离所有 .php、.htm 和 .html - 对吗？

这是一种“路由”类型的规则。这些规则通常*在*重定向规则之后，因为它是一个包罗万象的东西。它在说：

1.  该请求不适用于现有文件
2.  该请求不适用于现有目录
3.  请求的 URI 不以`/index.php`
4.  请求的 URI 以下列扩展名之一结束（不区分大小写，`NC`标志）：`php`, `html`, `htm`，或者请求的 URI 只是`/`，或者请求的 URI 根本没有扩展名（`/[^.]*`表达式）。看起来这个条件是为了防止将规则应用于脚本、图像、css 样式等。
5.  如果满足条件 1-4，则在内部将请求重写为使用请求 URI 的值`/index.php`命名的查询字符串参数（如果存在则不带任何扩展名）（无扩展名）。`phpinc`任何现有的查询字符串参数都附加到末尾（`QSA`标志）。

最后一条规则是将环境变量设置为标头`HTTP_AUTHORIZATION`中的任何内容`Authorization`。`$_SERVER`这通过php 脚本中的变量获取。

# jquery - 获取每月发生的选定日期选择器工作日

> ID：14045346
> 
> 赞同：0
> 
> 时间：2012-12-26T19:37:55.367
> 
> 标签：jquery, datepicker, jquery-ui-datepicker

我正在尝试制作 Google Calender 重复对话框的副本，但当我试图弄清楚如何让 jQuery datepicker 返回一个月中的工作日数时（例如，如果我选择一个日期和这是一个星期三，我想让 datepicker 告诉我我选择的那个月的星期三数，对于 2012 年 12 月，如果我选择 26\. December 它应该返回 4 或第四个。

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T01:57:31.917

尝试以下操作：

```
$("#datepicker").datepicker({
    dateFormat: "DD, MM d, yy"
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T02:49:28.953

做这样的事情怎么样：

JAVASCRIPT：

```
$(document).ready(function(){
    $("#datePick").datepicker({
        onSelect: function(event,ui){
        $(ui.dpDiv)
           .children(".ui-datepicker-calendar")
           .find("td")
           .filter(function() {
               if($(this).text() === ui.selectedDay){
                   var col = $(this).parents("tr")
                                     .children("td")
                                     .index($(this));
                    var row = $(this).parents("tbody")
                                     .children("tr")
                                     .index($(this).parents("tr"));

          if($(this).parents("tbody").children("tr").eq(0).children("td").eq(col).hasClass("ui-datepicker-unselectable")){
                 $("#result").text(row);   
              }else{
                 $("#result").text(row + 1);
                   }
               }

})
           }
    });
});​ 
```

演示：http: [//jsfiddle.net/93RGW/108/](http://jsfiddle.net/93RGW/108/)

希望这会有所帮助，如果您需要其他任何东西，请告诉我！

# git - 本地分支机构跟踪其他本地分支机构的用例是什么？

> ID：14045347
> 
> 赞同：18
> 
> 时间：2012-12-26T19:37:59.127
> 
> 标签：git, version-control

在 Git 中，我们可以这样做：

```
$ git checkout -b testbranch --track master
Branch testbranch set up to track local branch master.
Switched to a new branch 'testbranch' 
```

这些分支的用例是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T19:36:11.347

设置一个本地分支来跟踪另一个本地分支通常不是很有用，但我可以想到一些可能很方便的情况：

*   您可能有一些别名或脚本来处理上游分支（例如，通过`@{u}`简写；参见 参考资料`git help revisions`）。如果是这样，将本地分支配置为跟踪另一个本地分支将允许您测试别名或脚本，而不会影响远程存储库或创建临时虚拟存储库。

*   假设您正在处理一个名为`foo`本地`master`分支（跟踪`origin/master`）的新本地分支，但您还没有准备好发布`foo`到`origin`。或者，也许你永远不想推送`origin`——也许提交添加了一堆令人讨厌的`printf()`调用，你为了帮助调试而撒入。无论如何，无论何时`master`更新，您都希望重新定位`foo`到`master`. 通常你只会打字`git rebase master`，但如果你像我一样，你可能会发现自己经常打字只是`git rebase`出于习惯。如果这样做，您将收到以下错误消息：

    ```
    $ git rebase
    There is no tracking information for the current branch.
    Please specify which branch you want to rebase against.
    See git-rebase(1) for details

        git rebase <branch>

    If you wish to set tracking information for this branch you can do so with:

        git branch --set-upstream-to=origin/<branch> foo 
    ```

    您可能很想这样做：

    ```
    git branch --set-upstream-to=origin/master foo 
    ```

    但是，如果您习惯于每隔几个提交输入一次，这可能会产生毁灭性的影响（假设您已经设置为像我一样，您最终会将本地分支`git push`上的正在进行的提交推送到的分支） .`foo``origin``master``push.default``upstream`

    相反，您可以配置本地`foo`分支来跟踪您的本地`master`分支。现在你打字的习惯`git rebase`就是你想要的，一个心不在焉的`git push`只会弄乱你的本地`master`分支，而不是你`origin`的`master`分支。

    但是配置一个本地分支来跟踪另一个本地分支通常是不值得的`git rebase`。我认为记住输入`git rebase master`而不是`git rebase`. 如果我忘记了，我会收到一条错误消息，让我记忆犹新，然后我再试一次。没什么大不了的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:13:17.110

我尝试了这个命令，发现 master 将作为一个“真正的”远程分支执行。

在 .git/config 中，添加了以下内容：

```
[branch "testbranch"]
    remote = .
    merge = refs/heads/master 
```

你可以从 master using 中拉取`$git pull`，并 push to master using

`$git push . testbranch:master`

或者您可以`$git push`在 .gitconfig 中添加以下配置后键入

```
[push]
    default = upstream 
```

# javascript - JavaScript 函数未定义 - 语法错误

> ID：14045349
> 
> 赞同：0
> 
> 时间：2012-12-26T19:38:04.620
> 
> 标签：javascript, function, defined

复制函数执行以下操作：如果用户在文本区域中输入 @，它会使 div 可见并使用来自关键字数组的建议填充 div。与 @ 之后输入的内容匹配的任何数组条目，直到在 div 中填充空格。复制功能附在文本区的onkeyup事件上

突然间，浏览器报告功能复制未定义。我相信这可能是我遗漏的语法错误。我已经看了无数次我的代码，我找不到错误。

```
function copy()
{
    var ta = document.getElementById("ta") ;
    var taarray = ta.value.split(" ") ;
    var lastword = taarray[taarray.length - 1] ;
    document.getElementById('selector').innerHTML = " " ;
    if (lastword.indexOf("@") == 0)
    {       
        selector1(); // Function that makes the div visible
        if (lastword.substr(1).length > 0)
        {
            var f = 0 ;
            while (f <= friends.length )
            {
                if (friends[f].toLowerCase().indexOf(lastword.substr(1).toLowerCase()) != -1)
                {                   
                    var x ;
                    x = "<a onmouseover=projectImage('" + friends[f].split(|)[1] + "') onclick=tagfriend('" + friends[f].split("|")[1] + "')  >" ;
                    x += friends[f].split("|")[0] ;
                    x += "</a>" ;                                       
                    document.getElementById('selector').innerHTML = x + "<br />" ;
                }
                f++ ;           
            }
        }
    }
    else
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:44:22.220

您的错误表明“复制”未定义，因为您将函数定义为“复制”（小写）。JS 中的变量名和函数名区分大小写。然而，这只是评论中建议的许多其他错误之一。您应该考虑使用 JSLint 等调试工具来解决此类问题。

# java - 我将如何添加一个 onClickListener 呢？

> ID：14045353
> 
> 赞同：0
> 
> 时间：2012-12-26T19:38:33.460
> 
> 标签：java, android, listview

我有一个通过 listview 类型的东西显示的数据库，我将如何添加 OnClickListener？
这是代码：

```
public void DisplayRecord(Cursor c) {
    Cursor c1 = DBAdapter.getAllRecords();
    startManagingCursor(c1);

    String[] from = new String[] { DBAdapter.KEY_ITEM };
    int[] to = new int[] { R.id.text1 };

    SimpleCursorAdapter notes = new SimpleCursorAdapter(this, R.layout.row,
            c1, from, to);
    setListAdapter(notes);
} 
```

或者甚至有可能吗？

我将如何按字母顺序对这个列表进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:42:36.030

您需要将 onItemClickListener 添加到列表视图。

```
yourListVeiw.setOnItemClickListener(new AdapterView.OnItemClickListener() {
     public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {
 // id is the clicked item id
     Cursor clickedItem = DBAdapter.getRecord(id);
     // DO what you need to do

} 
```

为了使列表排序，您应该在 DBAdapter 中实现 getSortedRecords()，添加 order by 子句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T19:43:02.193

> 我将如何添加 OnClickListener？

您想将 OnItemClickListener 与 ListView 一起使用，或者由于您使用的是 ListActivity 或 ListFragment，您可以覆盖[`OnListItemClick`](http://developer.android.com/reference/android/app/ListActivity.html#onListItemClick%28android.widget.ListView,%20android.view.View,%20int,%20long%29)。

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    // Do something
} 
```

> 我将如何按字母顺序对这个列表进行排序？

查询数据库时使用[Order By子句](http://www.sqlite.org/lang_select.html)`DBAdapter.getAllRecords();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T19:41:38.493

你当然可以，但是你应该在你的 ListView 上设置你的监听器，而不是提供它的数据的适配器。在[安卓](http://developer.android.com/reference/android/widget/AdapterView.html)
上看看`setOnItemClickListener`

# java - Matcher.appendEvaluated() 上的 NullPointerException？

> ID：14045354
> 
> 赞同：0
> 
> 时间：2012-12-26T19:38:55.870
> 
> 标签：java, android, optimization, nullpointerexception, matcher

这是堆栈跟踪............你会在代码中多次看到“ *removed ”，因为我希望将我的包保密。*

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.*removed*.*removed*/com.*removed*.*removed*.List}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1768)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
at android.app.ActivityThread.access$1500(ActivityThread.java:123)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3835)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at java.util.regex.Matcher.appendEvaluated(Matcher.java:135)
at java.util.regex.Matcher.appendReplacement(Matcher.java:115)
at java.util.regex.Matcher.replaceAll(Matcher.java:322)
at java.lang.String.replaceAll(String.java:1963)
at com.*removed*.*removed*.List.fillData(NoteList.java:100)
at com.*removed*.*removed*.List.onCreate(NoteList.java:31)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
... 11 more 
```

......这是相关的代码。当用户启动 List 活动时，我希望他们看到基于他们从上一个列表中单击的项目的结果。主页是一个列表，所以 List 活动基本上是一个查询，我在数据库中搜索书籍列名称与他们在主页中单击的名称匹配的所有条目。此方法用查询结果“填充”List 列表视图。

```
@SuppressWarnings("deprecation")
private void fillData() {

String[] args = {"woo"};

    for(int i = 0; i < args.length ; i++){
        args[i] = args[i].replaceAll("woo", getBook());}

    String[] projection = ............removed

    Cursor cursor = managedQuery(Provider.CONTENT_URI, projection,
            Database.COLUMN_BOOK + "=" + "?",
            args, null);

    String[] from = ............removed     
    int[] to = ...........removed

    adapter = new SimpleCursorAdapter(List.this, R.layout.note_row, cursor, from,
            to);

    setListAdapter(adapter); }

static String book;
public static String getBook() {return book;}
public static void setBook(String book) {List.book = book;} 
```

这里是主页上的代码

```
public void onItemClick(AdapterView<?> adapter, View v,
        int position, long id) {
    final String[] choice = getResources().getStringArray(R.array.booknames);
       String book = choice[position];
       List.setBook(book);
   Intent x = new Intent(Home.this, List.class);
   Home.this.startActivity(x);

} 
```

这个应用程序已经上市，大约 3% 的设备出现了这个空指针异常。所以这种做法并不像我希望的那样 100% 有效。

我的第一个猜测是我没有正确初始化变量 args，这导致 ReplaceAll 方法在极少数情况下出现故障。我的第二个猜测是我应该避免使用 getter 和 setter 并使用包。

如何重写此查询以获得 100% 的成功？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T20:11:01.453

查看堆栈跟踪，在问题情况下返回 null 的可能性似乎更大*。*`getBook()`

您使用静态变量将信息传递给您的 List 活动，这通常*不是*一个好主意。这就是传递额外内容（捆绑）的用途。

在极少数情况下，您的所有应用程序都可能被杀死并重新创建。任何额外的东西都会再次传递给活动，但`book`在这种情况下你仍然是空的。

# ruby - 无法使用 rvm 在 Mountain Lion 上安装 Ruby

> ID：14045359
> 
> 赞同：2
> 
> 时间：2012-12-26T19:39:38.240
> 
> 标签：ruby, rvm, osx-mountain-lion, homebrew

尝试使用 rvm 在 Mountain Lion 上安装 Ruby，但收到以下错误消息：

```
ruby-1.9.3-p362 - #extracted to /usr/local/rvm/src/ruby-1.9.3-p362
ruby-1.9.3-p362 - #configuring
Error running 'env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include ./configure --enable-shared --disable-install-doc --prefix=/usr/local/rvm/rubies/ruby-1.9.3-p362 --with-opt-dir=/usr/local/rvm/usr', please read /usr/local/rvm/log/ruby-1.9.3-p362/configure.log
There has been an error while running configure. Halting the installation.
ruby-1.9.3-p362 is not installed.
Creating alias default for ruby-1.9.3-p362.
Recording alias default for ruby-1.9.3-p362.
Creating default links/files
ruby-1.9.3-p362 is not installed.
Could not load ruby ruby-1.9.3-p362.
/usr/local/rvm/scripts/alias: line 111: /usr/local/rvm/rubies/ruby-1.9.3-p362/bin/ruby: No such file or directory 
```

我该怎么做才能正确安装 Ruby？还安装了 Homebrew 包管理器；有冲突吗？

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-26T19:43:55.297

It's probably due to the fact that recent versions of OS X use the LLVM instead of defaulting to the GCC compiler.

Try this:

```
brew update
brew tap homebrew/dupes
brew install apple-gcc42 
```

to install the GCC compiler. Then:

```
rvm install 1.9.3 --with-gcc=clang` 
```

**EDIT:** If the previous solution doesn't work, try giving the following a try before running `rvm install 1.9.3`:

`export CC=/usr/local/bin/gcc-4.2`

**EDIT 2:** The following github page outlines the issue and multiple solutions, added to this post for documentation purposes: [Installation tips for RVM/Ruby on OSX 10.8 Mountain Lion](https://gist.github.com/3237860)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:36:28.000

这有关于您需要做什么的详细说明。

[RVM 不断设置 ruby​​ 1.8.7 而不是 MAC 中的最新版本 1.9](https://stackoverflow.com/questions/14012963/rvm-keeps-setting-up-ruby-1-8-7-instead-of-the-latest-version-1-9-in-mac/14016321#14016321)

# image-processing - 图像处理 - “非最大抑制”与“局部最大值”

> ID：14045360
> 
> 赞同：4
> 
> 时间：2012-12-26T19:39:39.910
> 
> 标签：image-processing, computer-vision

在图像处理文本中，经常有描述为非极大值抑制的算法。我的问题是：找到局部最大值有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T19:55:15.270

非最大值抑制通常在两种情况下遇到：边缘检测和局部最大值检测。

在边缘检测的上下文中，它指的是一种专门针对梯度幅度图像的细化算法。

在后一种情况下，它相当于其经典含义（不是形态最小值等）的局部最大值检测，其中不大于其邻居的像素设置为零。

# php - 如何在 PHP 中自动更新变量输出？

> ID：14045368
> 
> 赞同：0
> 
> 时间：2012-12-26T19:40:28.877
> 
> 标签：php, ajax, live

我目前有一个看起来像这样的脚本：

```
<?php
$pattern = '/(?<=\=\s)([0-9]+)(?=\s\=)/';
$total = 0;
$matches;

$handle = @fopen("log.txt", "r");

if ($handle) {
    while (($buffer = fgets($handle, 4096)) !== false) {        
        if(preg_match($pattern, $buffer, $matches))
        {
            $total += intval($matches[0]);
        }       
    }
    if (!feof($handle)) {
        echo "Error: unexpected fgets() fail\n";
    }
    fclose($handle);
}
echo $total;
?> 
```

问题是变量 $total 会经常更新一个全新的数字。我希望页面上的数字自动更新，而无需用户刷新。我认为我可能需要使用 AJAX，但我的 AJAX 很弱。有谁能够帮助我？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:42:41.047

您将不得不使用 AJAX 或仅使用元刷新或 javascript 刷新。当然，这些刷新会重新加载页面，但可以在没有用户交互的情况下这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T21:03:37.850

又快又脏：

```
<html lang="en">
    <head>
        <script type="text/javascript" src="http://www.google.com/jsapi"></script>
        <script type="text/javascript">
            google.load('jquery', '1.4.2'); 
            google.load('jqueryui', '1.8.8');
        </script>
        <script type="text/javascript">
            $(document).ready(function() {
                setInterval('get_counter()', 500);
            });
            function get_counter()
            {
                $('.counter').load('PATH_TO_YOUR_PHP_SCRIPT');
            }
        </script>
    </head>
    <body>
        <h1>Counter</h1>
        <div class="counter"></div>
    </body>
</html> 
```

# javascript - How to get html tag id when uploading multiple files?

> ID：14045369
> 
> 赞同：1
> 
> 时间：2012-12-26T19:40:34.233
> 
> 标签：javascript, jquery, html, ajax, asp.net-mvc-3

I have this form on my view: ![my view](../Images/464fd4b4391be1b20fe2d259245c8bf3.png)

On my controller I have the following method:

```
 [HttpPost]
 public ActionResult UploadFile(HttpPostedFileBase file)
{
// ...
} 
```

How can I receive the id of the input tag that was clicked to upload the file? (id=1 or id= 2?

Thank you!!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:55:40.930

id仅用于标识页面上的html元素，不用于提交给服务器。如果你不需要在客户端操作数据，你甚至不需要指定 id。通过指定相同的名称，您可以“堆叠”文件。

所以

```
<form action="/action" enctype="multipart/form-data" method="post">
   <input name="file" type="file"></input>
   <input name="file" type="file"></input>
</form> 
```

在您的控制器中，您会收到一组文件。

```
[HttpPost]
 public ActionResult UploadFile(HttpPostedFileBase[] file)
{
// ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T19:55:47.950

```
<script src="INCLUDE JQUERY"></script>
<script>
$(function(){
$('input[type="file"]').click(){
 $('#id').value = $(this).attr('id');
}
})
function fillId(){}
</script>
<form>

<input type="text" id="id" name="id"/>
<input type="file" id="file1"/>
<input type="file" id="file2"/>
<input type="Submit" value="submit"/>
</form> 
```

*注意-今晚不是最终代码，但你明白了

# jquery - 使用 jQuery 单击外部容器时隐藏 div

> ID：14045373
> 
> 赞同：2
> 
> 时间：2012-12-26T19:40:57.517
> 
> 标签：jquery

我有 2 个 div，一个覆盖在另一个之上。当我点击外部 div 时，我想隐藏内部 div。当我单击内部 div 时，内部 div 不会发生任何事情。同时，内部 div 中的链接应该可以正常工作。如何使用jquery做到这一点？

```
<div class="outer">
    <div class="inner"></div>
</div>

.outer {
    background-color: #000;  
    position: fixed;
    top: 0;
    left: 0;
    z-index: 9998;
    height: 100%;
    width: 100%;
    opacity: 0.5;
}

.inner {
    background-color: blue;
    width: 240px;
    position: fixed;
    z-index: 9999;
    left: 50%;
    top: 50%;
    margin-left: -300px;
    margin-top: -150px;
} 
```

无法按预期工作的 jQuery 代码：

```
$('.outer').click(function(e){
    $('.inner').hide();
});

$('.inner').click(function(e){
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T19:46:08.500

这几乎总是通过防止冒泡来完成。由于任何点击`.inner`都会冒泡到`.outer`，我们需要防止这些点击：

```
$(".outer")
    .on("click", function () {
        $(this).find(".inner").slideUp();
    })
    .on("click", ".inner", function (event) {
        event.stopPropagation();
    });​ 
```

小提琴： http: [//jsfiddle.net/22Uz7/](http://jsfiddle.net/22Uz7/)
小提琴（使用你的 CSS）：http: [//jsfiddle.net/22Uz7/1/](http://jsfiddle.net/22Uz7/1/)

您在下面的评论中表明您使用的是 jQuery 1.4.2。因此，您将无法访问该`.on`方法 - 以下代码应在 1.4.2 下工作：

```
$(".outer").bind("click", function () {
    $(this).find(".inner").slideUp();
});

$(".inner").bind("click", function (event) {
    event.stopPropagation();
});​ 
```

小提琴：http: [//jsfiddle.net/22Uz7/3/](http://jsfiddle.net/22Uz7/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T19:47:20.240

`event.target`仅当目标类名称匹配时，您才能使用指定您的操作`outer`：

```
$('.outer').click(function(ev){
    var target = ev.target;
    if (target.className.match(/\bouter\b/)) {
        $(this).find('.inner').toggle();
    }
});​​​​​​ 
```

## [看演示](http://jsfiddle.net/QzeY3/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T19:44:35.440

做这样的事情？

```
$('.outer').click(function(){
   $('.inner').css('display', 'none');
}); 
```

或者因为它的孩子

```
$('.outer').click(function(){
   $(this).find('.inner').css('display', 'none');
}); 
```

# c# - how to post like with facebook c# sdk

> ID：14045375
> 
> 赞同：0
> 
> 时间：2012-12-26T19:41:16.317
> 
> 标签：c#, facebook-like, facebook-c#-sdk

How do you post a like to a facebook app using the c# sdk ? I tried with this code:

```
...
FacebookClient app = new FacebookClient(accessToken);
Dictionary<string,object> parameters = new Dictionary<string, object>();
app.PostAsync(string.Format("{0}/likes", appId), parameters);
... 
```

but I get ArgumentNullException: stream cannot be null

# silverlight - 如何从 PropertyPath 获取 DependencyProperty？

> ID：14045376
> 
> 赞同：1
> 
> 时间：2012-12-26T19:41:18.203
> 
> 标签：silverlight

我有 PropertyPath 和对象实例。我需要使用 DependencyObject.SetValue(DependencyProperty ...) 更改属性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:48:57.733

在您的情况下，我怀疑您可以只使用 PropertyPath.Path 属性作为依赖属性的名称。一般来说，PropertyPath 可能非常复杂，您需要对 Path 属性进行解析以查看它的实际含义。查看[此页面](http://msdn.microsoft.com/en-us/library/system.windows.propertypath.path.aspx)并阅读备注部分以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:58:48.453

如果这是 UserControl 或 TemplateControl，您可以在要覆盖的属性上使用“new”关键字。

# windows - WSF script which calls telnet won't run in task scheduler

> ID：14045378
> 
> 赞同：0
> 
> 时间：2012-12-26T19:41:29.407
> 
> 标签：windows, batch-file, scheduler, wsh

If have a wsf file which remote logs into another machine via telnet, executes a command, and logs out.

I have it set up in task scheduler to execute once a day.

If I manually run it in task scheduler the script works.

If I manually run in outside of task scheduler the script works.

While watching it run in task scheduler (logged in via remote desktop, FWIW), "Running" appears for a little while and then disappears. The task is never actually executed.

I have the task configured to "Run as" my network user (I personally can't try running it as SYSTEM as I don't have the SYSTEM password, although if that will fix the problem I can get the Admin to fix that).

I have a start in directory (omitting a start in directory doesn't help).

I am calling the script thusly:

cmd.exe /c "F:\util\startextr.wsf"

I've tried it using just cmd.exe "F:\Util...", cmd.exe f:\util..., just f:util... (and other obvious variations). Nothing helps.

I've changed the permissions on cmd.exe to included "BATCH", with no success.

???

Thanks, --sw

reply to question: It's not being killed by the time out kill process. A little while means 10-15 seconds.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-08T14:36:19.003

我也有同样的问题; 我还没有答案，但到目前为止我发现我的脚本使用“sendkeys”命令，该命令似乎将密钥发送到所选的任何窗口。当您运行交互式时，您会看到出现的命令窗口和那里的脚本类型......当您运行任务时，窗口在后台打开并且脚本类型......我不知道确切的位置，但可能不在您期望的窗口中！这解释了为什么它以交互方式工作而不是任务......

# code-contracts - Why is the CC1033 message suppression not applied?

> ID：14045380
> 
> 赞同：0
> 
> 时间：2012-12-26T19:41:37.620
> 
> 标签：code-contracts

I am implementing the `System.IServiceProvider.GetService` method and I cannot suppress the warning `... implements interface method 'System.IServiceProvider.GetService(System.Type)', thus cannot add Requires.`

```
[SuppressMessage("Microsoft.Contracts","CC1033", Justification="Check to require service type not null cannot be applied")]
public object GetService(Type serviceType)
{
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:06:36.530

我猜`GetService`是您在具体类中实现的接口中的方法，并且具体类中的方法包含合同。需要将此合同移动到为接口提供合同的合同类中。完整的详细信息可以在[代码合同文档](http://research.microsoft.com/en-us/projects/contracts/userdoc.pdf)中找到（在第 2.8 节中）。以下是摘录：

> 由于大多数语言/编译器（包括 C# 和 VB）不允许您将方法主体放在接口中，因此为接口方法编写协定需要创建一个单独的协定类来保存它们。
> 
> 接口和它的契约类通过一对属性链接（第 4.1 节）。

```
[ContractClass(typeof(IFooContract))]
interface IFoo
{
    int Count { get; }
    void Put(int value);
}

[ContractClassFor(typeof(IFoo))]
abstract class IFooContract : IFoo
{
    int IFoo.Count
    {
        get
        {
            Contract.Ensures( 0 <= Contract.Result<int>() );
            return default( int ); // dummy return
        }
    }
    void IFoo.Put(int value)
    {
        Contract.Requires( 0 <= value );
    }
} 
```

如果您不想这样做，那么要取消警告，只需删除代码合同，因为它无论如何都不会被应用。

**更新**

*这是一个似乎*有效的测试用例。

```
namespace StackOverflow.ContractTest
{
    using System;
    using System.Diagnostics.Contracts;

    public class Class1 : IServiceProvider
    {
        public object GetService(Type serviceType)
        {
            Contract.Requires<ArgumentNullException>(
                serviceType != null,
                "serviceType");
            return new object();
        }
    }
}

namespace StackOverflow.ContractTest
{
    using System;

    using NUnit.Framework;

    [TestFixture]
    public class Tests
    {
        [Test]
        public void Class1_Contracts_AreEnforced()
        {
            var item = new Class1();
            Assert.Throws(
                Is.InstanceOf<ArgumentNullException>()
                    .And.Message.EqualTo("Precondition failed: serviceType != null  serviceType\r\nParameter name: serviceType"),
                () => item.GetService(null));
        }
    }
} 
```

这是否与您的情况有所不同？

# php - 使用 jQuery 将可变大小的表单传递给 PHP 文件进行处理

> ID：14045381
> 
> 赞同：0
> 
> 时间：2012-12-26T19:41:37.277
> 
> 标签：php, javascript, jquery, ajax

我有一个从 MySQL 数据库填充的可变大小（长度）的表单。有 4 个字段构成用于创建按钮的信息（id、button#、name 和 price）。提交表单后，我想将所有值保存到 MySQl db 并使用成功消息更新页面底部的 div。目前我有这个表格。

```
<?php include("./db/db_connect.php"); ?>
<form method="POST" action="fixcon.php">
<?php
$sql = "SELECT * FROM concessions ORDER BY button ASC ";
$result = mysql_query($sql);
echo "<table border='1' id='table'>
<tr>
<td align='center'>Button #</td>
<td align='center'>Item</td>
<td align='center'>Price</td>
<td align='center'>Button</td>
</tr>";

while($row = mysql_fetch_array($result)) {
  echo "<tr>";
  echo "<td><input type='text' name='btn[]' size='5' value='".$row['button']."'/></td>";
  echo "<td><input type='text' name='itm[]' size='5' value='".$row['item']."'/></td>";
  echo "<td><input type='text' name='prc[]' size='5' value='".$row['price']."'/></td>";
  echo "<td><input type='button' class=myButton name='button01' value='".$row['item'].'&#10;$'.$row['price']."'></td>";
  echo "<input type='hidden' name='id[]' value='".$row['id']."'/>";
  echo "</tr>";
}
  echo "</table>";
  mysql_close($con);
  ?> 
```

它发送到的任何 PHP

```
<?php include("./db/db_connect.php"); ?>
<?php
$buttonArray = $_POST['btn'];
$itemArray = $_POST['itm'];
$priceArray = $_POST['prc'];
$idArray = $_POST['id'];

$numberofItems = count($itemArray);

for ($i=0; $i<$numberofItems; $i++) {
 $sql = "UPDATE concessions SET button = '".$buttonArray[$i]."', item = '".$itemArray[$i]."', price = '".$priceArray[$i]."' WHERE id = '".$idArray[$i]."'";
 mysql_query($sql);
}

echo "<b>User updated</b>";
mysql_close($con);
?> 
```

对于我所有其他页面，我将表单发送到 JS 并使用类似...

```
xmlhttp.open("GET","myfile.php?a="+val1+"&b="+val2+"&c="+val3+"&d="+val4,true);
xmlhttp.send(); 
```

PHP 文件保存数据并为 div 生成消息。要写入 div...

```
xmlhttp.onreadystatechange=function() {
  if (xmlhttp.readyState==4 && xmlhttp.status==200) {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
  }
} 
```

这适用于我的所有其他页面，但由于我不知道会有多少字段，我无法对 xmlhttp.open 语句进行硬编码。不熟悉 jQuery（现在学习）或 ajax（只知道我做 jQuery 的一点点）我不知道如何执行此操作。我知道我需要序列化数据并已完成并将其发送到 javascript 使用

```
$.each($('#yourform').serializeArray(), function() { console.log(" <" +this.name+ '>' + this.value + "</" + this.name + "> " ); }); 
```

但我不知道如何将其发送到 PHP 文件以将其写入 MySQL 数据库，然后发送回以更新页面上的 div。请给出完整的代码，因为到目前为止我在尝试实现片段和建议时遇到了很多问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:43:52.227

由于您不知道输入的数量，您可以`serialize`在 jquery 中使用来序列化整个表单。这是[手册](http://api.jquery.com/serialize/)。

从说明书来看，

```
 $('form').submit(function() {
  alert($(this).serialize());
  return false;
 }); 
```

这会产生一个标准的查询字符串：

```
a=1&b=2&c=3&d=4&e=5 
```

# extjs - 在 EXTJS 4 中更改触发字段的高度

> ID：14045383
> 
> 赞同：1
> 
> 时间：2012-12-26T19:41:40.210
> 
> 标签：extjs, triggers, height

触发场​​高度太小 IMO..

![在此处输入图像描述](../Images/2ded17fab6706b6c0f8c1822290a177d.png)

如您所见...右侧的按钮更大。我试过了

```
height: 40 
```

但触发场的高度不会改变。有没有另一种改变高度的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:27:07.803

您可以通过添加以下 CSS 规则来**部分解决此问题：**

```
.x-form-field-wrap .x-form-trigger {
    height:40px;
} 
```

按钮具有固定的图像，因此具有固定的高度。Sencha需要解决这个问题。

# perl - Perl 分叉服务器测试程序 - 接受（）失败

> ID：14045384
> 
> 赞同：1
> 
> 时间：2012-12-26T19:41:49.103
> 
> 标签：perl, sockets, fork

我正在尝试组装一个骨架服务器（在 Perl 中），它遵循我在 Lincoln Stein 的*Network Programming with Perl*（c. 2001）中阅读的一些指导方针。我这里有一个简单的回显服务器，它为每个连接分配一个子节点，并回显它收到的任何内容，直到它收到终止令牌。

我有一个原始版本正在工作，然后添加了新功能，例如 $SIG{CHLD} 处理程序和在分叉后更多地关闭“不必要的”文件句柄，现在它被破坏了：它在连接完成后终止 while() 循环。（我尝试有选择地退出更改，但无济于事。）

以下是说明该错误的服务器和客户端的可运行版本。通过简单地检查代码，问题可能很明显。如果要运行它，您可以通过输入一个句点 (.) 来终止客户端，该句点是终止令牌 - 这将触发服务器中的错误。

服务器：

```
#!/usr/bin/perl 

# Template for a server.
#
use warnings;
use strict;
use Carp;
use Getopt::Std;
use File::Basename;
use IO::Socket;
use Net::hostent;    # for OO version of gethostbyaddr
use POSIX 'WNOHANG';
use Data::Dumper;
use 5.010;

my $program    = basename $0;
my $master_pid = $$;            # Master server's pid
$|             = 1;             # flush STDOUT buffer regularly

###############################################################################
#
# Initialize.
#
###############################################################################

my %opts;
getopts( 'hp:', \%opts );

if ( $opts{'h'} ) {    # no args, or the -h arg
    print <<EOF;

      Usage:  $program [-p port]

      Where:  -p port      advertised port number, > 1024 (default: 2000)

EOF
    exit(0);
}

my $server_port = $opts{p} || 2000;

croak "-p port omitted.\n" if !defined $server_port;
croak "port must be numeric.\n" if $server_port !~ /^[[:digit:]]+$/;
croak "port must be 1025 .. 65535.\n"
    if $server_port < 1025 || $server_port > 65535;

# Set up a child-reaping subroutine for SIGCHLD
#
$SIG{CHLD} = sub {
    while ( ( my $kid = waitpid(-1, WNOHANG )) > 0 ) {
    }
};

###############################################################################
#
# Become a server.
#
###############################################################################

# Open the server's advertised port for incoming connections
#
my $listen_socket = IO::Socket::INET->new(
    Proto     => 'tcp',
    LocalPort => $server_port,
    Listen    => SOMAXCONN,
    Reuse     => 1
);
croak "Can't set up listening port: $!\n" unless $listen_socket;
say "Server ready.";

# Block on accept() call until a new connection arrives
#
my $client_fh;
while ( $client_fh = $listen_socket->accept() ) {

    $client_fh->autoflush(1);                      # turn on frequent flushing
    my $hostinfo
        = gethostbyaddr( $client_fh->peeraddr );   # resolve ipaddr to name

    # Now that a connection is established, spawn a conversation.
    #
    defined (my $child_pid = fork())
                 or croak "Can't fork: $!\n";

    if ( $child_pid == 0 ) {    # if being run by the forked child

        # S T A R T   O F   C H I L D   C O N T E X T
        #
        conversate($client_fh); # run the child process
        #
        # E N D   O F   C H I L D   C O N T E X T
    }

    $client_fh->close;     # Parent immediately closes its copy 
}

say "Bummer - for some reason the socket->accept() failed.";

###############################################################################
#
#                          S U B R O U T I N E S
#
###############################################################################

# conversate ( client_fh )
#
# S T A R T   O F   C H I L D   P R O C E S S
#
sub conversate {

    my $client_fh = shift;    # connection to client
    $listen_socket->close;    # we don't need our copy of this
    my $child_pid = $$;       # get our new pid

    print $client_fh "READY\n";    # tell them we're here

 EXCHANGE:
    while (1) {

        # Let client talk first
        #
        my $line = <$client_fh>;   # ?? Isn't there an OO way?

        if ( !defined $line ) {
            last EXCHANGE;
        }

        chomp $line;

        last EXCHANGE if $line eq '.';

        # Now send a reply (echo) and close the connection.
        #
        print $client_fh "$line\n";  # ?? Isn't there an OO way?
    }
    exit 0;                 # child process exits
}
#
# E N D   O F   C H I L D   P R O C E S S 
```

客户：

```
#!/usr/bin/perl 
#

use warnings;
use strict;
use Getopt::Std;
use Data::Dumper;
use File::Basename;
use 5.010;

#sub say { print "@_\n"; }

my $program = basename $0;

my %opts;
getopts( 'hvs:p:', \%opts );

if ( $opts{'h'} ) {    # -h arg
    print <<EOF;

      Usage:  $program [-v] [-s hostname [-p port]]

      Where:
              -s hostname   host name (default: localhost)
              -p port       port number (default: 2000)
              -v            verbose mode

EOF
    exit;
}

my $verbose  = $opts{v} || 0;
my $hostname = $opts{s} || 'localhost';    # hard coded for now
my $port     = $opts{p} || 2000;

###############################################################################
#
# Initialize
#
###############################################################################

# Initialize the ReadLine terminal
#
use Term::ReadLine;
my $term = Term::ReadLine->new($0);

###############################################################################
#
# Contact server and begin main loop
#
###############################################################################

use IO::Socket;
my $remote = IO::Socket::INET->new(
    Proto    => "tcp",
    PeerAddr => $hostname,
    PeerPort => $port,
) or die "Cannot connect to $hostname:$port";

my $line;
EXCHANGE:
while (1) {

    # Wait for server
    #
    $line = <$remote>;
    last EXCHANGE if !defined $line; # connection closed by remote?

    # Print server response
    #
    chomp $line;
    say "SERVER: $line";

    # Read from STDIN
    #
    $line = $term->readline("Enter something: ");

    chomp $line;

    # Send to server
    #
    print $remote "$line\n";

}

close $remote or die "Close failed: $!";

print "\n$program exiting normally.\n\n";
exit; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T20:21:26.790

那么返回什么错误呢？检查`$!`。

我打赌`accept`被打断了`SIGCHLD`。程序在将控制权交给操作系统时无法处理信号，因此为了给您的程序一个机会信号，`EINTR`当带有处理程序的信号被引发时，阻塞系统调用返回（带有错误）。

一旦您的处理程序处理了信号（这发生在您甚至注意到`accept`返回之前），您就可以简单地重新启动`accept`. 换句话说，您可以通过如下编写循环来解决此问题：

```
while (1) {
    my $client_fh = $listen_socket->accept();
    if (!$client_fh) {
       redo if $!{EINTR};
       last;
    }

    ...
} 
```

请注意，您必须`$!`通过添加以下内容来停止信号处理程序的破坏：

```
local ( $!, $^E, $@ ); 
```

# c# - '+' not allowed to concatenate string or method group

> ID：14045390
> 
> 赞同：1
> 
> 时间：2012-12-26T19:42:29.337
> 
> 标签：c#, .net

> **Possible Duplicate:**
> [What is a method group in C#?](https://stackoverflow.com/questions/886822/what-is-a-method-group-in-c)

What is the problem with the '+' signal to concatenate a string?

This is print screen of my problem:

[http://pbrd.co/UtDf61](http://pbrd.co/UtDf61)

```
Json(new
{
    dom = "RegistroUsuario",
    type = "showErrorToast",
    msg = "Erro: " + e,
}, JsonRequestBehavior.AllowGet);

string jsScript = "closeAndRedirectJson(" + Json + ")"; 
```

The error I am receiving is

> Operation '+' cannot be applied to operands of type 'string' and 'method group'

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T19:45:25.133

正如错误清楚地告诉你的那样，`Json`它既不是字符串也不是对象。

相反，它是一个*方法组*——函数的“参考”。
与 Javascript 不同，C# 函数不是对象；您只能使用方法组来创建委托实例。（这不是你想要的）

如果要将之前的对象转换为可用的 JSON 字符串，则需要`JavascriptSerializer`直接使用该类。

该`Json()`方法返回一个`JsonResult`实例，该实例只能用于将 JSON 写入响应正文；在这里没用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T19:47:03.813

考虑以下：

```
static string X() { return "hello"; }
static void Main()
{
    Console.WriteLine(X + "goodbye");
} 
```

你看到问题了吗？该代码*将方法 X*与字符串“goodbye”连接起来。但是方法不是可以连接到字符串的东西！目的是*调用方法*。正确的代码是：

```
 Console.WriteLine(X() + "goodbye"); 
```

从您的程序片段中我不清楚您打算在其中连接什么，但`Json`它是一种方法，而不是可以与字符串连接的东西。

顺便说一句，编译器在错误中使用有点令人困惑的术语“方法组”的原因是因为您可能处于这种情况：

```
static string X(int y) { return "hello"; }
static string X(double z) { return "hello"; }
static void Main()
{
    Console.WriteLine(X + "goodbye");
} 
```

现在还不清楚指的是*哪个方法* `X`，实际上，C# 语言说表达式`X`指的是*这两种*方法。这样的表达式被归类为“方法组”。*重载解决*过程从方法组中挑选出唯一的最佳方法。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-12-26T19:44:18.497

It's a `function`. Not a `string`. You can't use it with concatenation.

# c# - Cassandra 时间戳类型列转换

> ID：14045396
> 
> 赞同：2
> 
> 时间：2012-12-26T19:42:51.000
> 
> 标签：c#, cassandra, thrift

如果有人能解决我的问题，我会非常感动。

我正在通过 C# 使用 Cassandra Thrift API。我在 Cassandra 中有一个“时间戳”类型的列，它应该是自 Unix 纪元以来的秒数，表示为 8 字节长。

要转换，我这样做：

```
BitConverter.GetBytes(ToUnixTimestamp(columnValue))); 
```

在哪里：

```
protected static long ToUnixTimestamp(DateTime dateTime)
{
    return Convert.ToInt64((dateTime - new DateTime(1970, 1, 1).ToLocalTime()).TotalSeconds);
} 
```

当我在 CLI 中检查我的值时，我看到：

```
=> (column=created, value=225330207-01-15 03:30:53-0500, timestamp=1356568301) 
```

Cassandra 没有解释我正确插入的值。**225330207**年不是我插入的年份。为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T20:46:15.293

您需要将“时间戳”类型列中的值存储和检索为自 Unix 纪元以来的**毫秒数，而不是秒数。**

[http://cassandra.apache.org/doc/cql/CQL.html#usingdates](http://cassandra.apache.org/doc/cql/CQL.html#usingdates)

# java - Working with many jFrames

> ID：14045398
> 
> 赞同：2
> 
> 时间：2012-12-26T19:42:58.283
> 
> 标签：java, swing, jframe, jdialog, cardlayout

When I start my program I create the MainFrame. When I click on the button "search", I show another JFrame. If it obtains results on the search, the goal is to fill the information in MainFrame.

It's all working. But to be able to display the information, I have to re-create the MainFrame. What means, that the two MainFrame's stay open.

How do I hide the first?

* * *

**Supose thet i have only the MainFrame and one dialog with the Search form.**

**When i click on ok button on the search dialog, i have some info.**

**In the MainFrame Class i know that the info is there.**

**I have the settext on the textfield's, etc... and on the final line i have the "setvisible(true)".**

**But they remain blanc! Why??**

* * *

**Can anyone post here an example, how to do it? Please**

**I just search for all options, but i can't solve.**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T19:46:01.897

[`JFrame`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html)Swing 应用程序最多应包含一个。如果您需要显示多个“窗口”，那么您可以使用多个[`JDialog`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JDialog.html)和使用`dispose()`来隐藏对话框。

或者，您可以使用 a[`CardLayout`](http://docs.oracle.com/javase/7/docs/api/java/awt/CardLayout.html)作为布局管理器，而不是使用太多对话框。

看：

*   [Java 教程：如何使用 CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T19:45:19.700

用于`JFrame.setVisible(false)`隐藏，并`JFrame.setVisible(true)`使其重新出现。这将适用于 swing 中的任何 JComponent，而不仅仅是 JFrame。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T19:45:48.260

您可以通过调用该方法来隐藏 JFrame：

```
 setVisible(false); 
```

但是，您可以考虑改用 JDialogs，因为您可以选择创建模式对话框，这意味着用户只能在搜索对话框打开时与它进行交互。

# java - How to select and play a song in Android

> ID：14045402
> 
> 赞同：1
> 
> 时间：2012-12-26T19:43:06.570
> 
> 标签：java, android, android-music-player

I have been wondering how I could select a song from my music library and play it by pressing a button. I have been searching for about and hour now and I cannot find an example that is not complete overkill. If you could point me in the right direction or give me some code would be great. Thanks in advanced.

# python - Closures: What is a good use case example? Why not a functor? And is it worth the negatives?

> ID：14045403
> 
> 赞同：9
> 
> 时间：2012-12-26T19:43:17.407
> 
> 标签：python, ruby, closures, functor

I recently dove into Python. Previous, I had programmed mostly numerical and data analysis code in C++ and Matlab. I saw a lot of discussions about Python and Ruby and closures. Almost all examples looked like this:

```
>>> def makeAdder(y):
...  def myAdder(x):
...   return x + y
...  return myAdder
... 
>>> f = makeAdder(10)
>>> f(5)
15 
```

I understand that this can be useful in some sense. However, realistically, the behavior in situations like this ('read only' situations as it were) can easily be emulated by an object (a functor):

```
>>> class MyAdder(object):
...  def __init__(self,y):
...   self.y = y
...  def __call__(self,x):
...   return self.y + x
... 
>>> f = MyAdder(5)
>>> f(10)
15 
```

The object doesn't take up substantially more space to code, and it is far more versatile. It's also much easier to track and debug subsequent code.

In this case, we only read from the nonlocal variable. But we can also write to it: in Ruby, naturally, in Python by using the nonlocal keyword. The object supports that as well of course. But with the object, you have the data bundled together so you know exactly what's going on. The closure can potentially be carrying around variables in a totally non-transparent way and this can lead to code that's amazingly hard to debug. Here's a really bizarre example:

```
irb(main):001:0> def new_counter
irb(main):002:1> x = 0
irb(main):003:1> lambda { x +=1 }
irb(main):004:1> end
=> nil
irb(main):005:0> counter_a = new_counter
=> #<Proc:0x00007f85c6421cd0@(irb):3>
irb(main):006:0> counter_a.call
=> 1
irb(main):007:0> counter_a.call
=> 2 
```

At least to me, this behavior is unintuitive. It also has the potential to cause memory leaks. This gives you a huge amount of rope to hang yourself with. Again, this is especially true in Ruby where you do not need to enable this explicitly (unlike Python), and because in Ruby one has blocks all over their main code, which have access to everything. If an outside variable gets changed as a result of being in a closure, if you pass that closure around you can have a variable changed indefinitely far and out of scope from the place where it lives. Contrast to an object that always safely carries its data with it.

Why do you hear a lot of talk about how good closures are, and how they should be potentially included in Java, how it sucked when they weren't fully in Python, etc. ? Why not use a functor? Or refactor the code to avoid, given how incredibly dangerous they can be? Just to clarify, I'm not one of those foaming at the mouth OO types. Have I underestimated their use, overstated their danger, or both?

Edit: maybe I should distinguish between three things: closures that only read once (which is what my example shows, and almost everyone discusses), closures that read in general, and closures that write. If you define a function inside another function using a variable local to the outer function, there's almost no chance this will come back to haunt you. The variable in that space is not accessible in any way I can think of, so you can't change it. This is pretty safe, and a convenient (possibly more than functors) way to generate functions. On the other hand, if you create a closure inside a class method or inside the main thread, it will read in variables each time that are called that can be accessed from other places. So it can change. I think this is dangerous because the closed over variable does not appear in the function header. You could have say a long closure on page 1 of your code that closes over a main thread variable x, and then modify x for unrelated reasons. Then re-use the closure and get bizarre behavior you don't understand, which may be hard to debug. If you actually write to enclosed variables, then as my example with Ruby shows you really have the potential to make a mess and cause unexpected behavior.

Edit2: I gave an example of bizarre behavior from closures for the third usage, writing to non local variables. Here's an example of bizarre (not as bad) behavior from the second usage (defining closures in scopes where their closed-over variables can be modified):

```
>>> fs = [(lambda n: i + n) for i in range(10)]
>>> fs[4](5)
14 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-26T19:48:29.747

可读性。您的 Python 示例显示了与函子相比，闭包版本更加明显和易于阅读。

我们还巧妙地避免创建一个除了像函数一样什么都不做的类——这有冗余的味道。

如果不出意外，当我们*在做某事*时，[将其描述为一个动作而不是一个对象是有意义的](http://steve-yegge.blogspot.co.uk/2006/03/execution-in-kingdom-of-nouns.html)。

作为另一个说明，这些结构在 Python 中被*大量*使用的一个例子是装饰器，效果很好。大多数函数装饰器都会做这样的事情，它们是一个非常有用的特性。

编辑：作为状态说明，请记住函数在 Python 中并不特殊，它们仍然是对象：

```
>>> def makeAdder(y):
...     def myAdder(x):
...         return x + myAdder.y
...     myAdder.y = y
...     return myAdder
... 
>>> f = makeAdder(10)
>>> f(5)
15
>>> f.y
10 
```

# c++ - Should I use std::remove to remove elements from a list?

> ID：14045404
> 
> 赞同：0
> 
> 时间：2012-12-26T19:43:19.493
> 
> 标签：c++, stl

I've tried removing the elemetns (pointers to a named type) from a list using std::remove (I've read about this algorithm [here](http://www.cplusplus.com/reference/algorithm/remove/) and [here](http://www.sgi.com/tech/stl/remove.html)) and a combination of list::erase and std::find.

Here's the code that I wrote for this purpose:

```
#include <iostream>

#include <list>
#include <functional>
#include <string>
#include <algorithm>

class NamedType
{
    std::string name_; 

    public: 
        NamedType (const char* name)
            : 
                name_(name)
        {}    

        void info()
        {
            std::cout << name_ << ": NamedType::update()" << std::endl;
        }
};

class NamedTypeList
{
    std::list<NamedType*> objectList_; 

    public: 

        void addNamedType(NamedType& o)
        {
            NamedType* oPtr = &o; 
            objectList_.push_back(oPtr);
        }

        void removeNamedTypeWithFind(NamedType& o)
        {
            std::list<NamedType*>::iterator removedNamedType = std::find(
                objectList_.begin(), objectList_.end(), &o);

            if (removedNamedType != objectList_.end())
            {
                objectList_.erase(removedNamedType); 
            }
        }

        void removeNamedType(NamedType& o)
        {
            std::remove(objectList_.begin(), objectList_.end(), &o); 
        }

        void namedObjectsInfo()
        {
            std::for_each(objectList_.begin(), objectList_.end(), 
                std::mem_fun(&NamedType::info)); 
        }
};

using namespace std;

int main ()
{
    NamedType o1("o1"); 
    NamedType o2("o2"); 
    NamedType o3("o3"); 
    NamedType o4("o4"); 

    NamedTypeList objectList1; 
    NamedTypeList objectList2; 

    objectList1.addNamedType(o1); 
    objectList1.addNamedType(o2); 
    objectList1.addNamedType(o3); 
    objectList1.addNamedType(o4); 

    objectList2.addNamedType(o1); 
    objectList2.addNamedType(o2); 
    objectList2.addNamedType(o3); 
    objectList2.addNamedType(o4); 

    cout << "Registered objects into objectList1:" << endl;
    objectList1.namedObjectsInfo(); 

    cout << "Registered objects into objectList2:" << endl;
    objectList2.namedObjectsInfo(); 

    cout << "Removing o2 object from objectList1 with remove" << endl;

    objectList1.removeNamedType(o2); 
    objectList1.namedObjectsInfo(); 

    cout << "Removing o2 object from objectList2 with std::find" << endl;

    objectList2.removeNamedTypeWithFind(o2); 
    objectList2.namedObjectsInfo(); 

}; 
```

What I don't get is why I get the following output when I call *objectList1.removeNamedType(o2);* :

```
Removing o2 object from objectList1 with remove
o1: NamedType::update()
o3: NamedType::update()
o4: NamedType::update()
o4: NamedType::update() 
```

I'm having trouble understanding the documentation: I get that there is a new_end iterator showing the new end of the range, but this does not work then if I have multiple same NamedTypes. E.g. if I register the object o2 twice in the objectList1, it will be visible and its member function will be called by the namedObjectsInfo() method since it loops over all elements (it doesn't see the new_end iterator).

If I understood it right, should I even use std::remove to remove elements from a container, or a combination of std::find and list::erase in this case?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T19:53:36.597

当容器有自己的`remove`方法时`std::list`，你应该使用它而不是`std::remove`. 对于没有`remove`方法的容器，您应该使用此处其他答案中描述的擦除删除习语。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T19:48:59.390

`std::remove`不会更新容器结构本身，因此您最终会在迭代器范围的末尾出现“无关”元素。为了彻底清理容器，你需要结合 remove 和 erase：

```
 void removeNamedType(NamedType& o)
    {
        objectList_.erase(std::remove(objectList_.begin(), objectList_.end(), &o), objectList_.end()); 
    } 
```

但是，正如 IronMensan 的回答中提到的，更好的方法是`std::list::remove()`在您的情况下使用它，因为它针对列表上的操作进行了优化并摆脱了多阶段删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T19:52:19.310

您必须同时使用两者`remove`，`erase`因为`remove`不会通知您的容器它已取出元素（它仍会认为它包含 4 个对象，因此您最终会遇到奇怪的事情）。

```
void removeNamedType(NamedType& o)
{
    objectList_.erase(
        std::remove(objectList_.begin(), objectList_.end(), &o),
        objectList_.end()); 
} 
```

# sql - Make a query with DISTINCT clause run faster

> ID：14045405
> 
> 赞同：1
> 
> 时间：2012-12-26T19:43:31.277
> 
> 标签：sql, oracle, distinct

I have the following query:

```
select distinct type, account 
  from balances_tbl 
 where month = 'DEC-12' 
```

The table `balances_tbl` has over 3 million records per month. The distinct type and account rows are maybe around 20,000 records. The `month` column is indexed. The `type` and `account` columns are also indexed. The query takes a really long time (about 30 minutes) to execute.

Is there a way to make this query with the `DISTINCT` clause faster?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T20:07:56.120

您需要添加一个包含所有三列的索引。我建议对（月份、类型、帐户）进行索引。这样，Oracle 只需扫描索引即可完成工作。

否则，您必须进行全表扫描，然后才能找到不同的值。

我可能还建议按月对表进行分区。但是，这将需要重新组织表格并且工作量更大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T21:27:12.140

首先，与您的 DBA 核实您是否有该表/索引的最新统计信息。

然后，30 分钟对于那个查询*来说太长*了，没有看到`EXPLAIN PLAN`，我猜 Oracle 正在做一个完整的扫描，所以它正在访问表中的每一行。鉴于每月大约有 300 万行，这可能是很多行。正如你所说的那样`month`，你可以尝试强制索引访问`month`：

```
select /*+ index(b <index_on_month)>*/ distinct type, account 
from balances_tbl b
where month = 'DEC-12' 
```

where`<index_on_month>`是`month`列上索引的名称。由于它是与日期相关的字段，因此索引可能具有良好的[聚类因子](http://asktom.oracle.com/pls/apex/f?p=100:11:0::::P11_QUESTION_ID:1032431852141)。

无论如何，如果没有看到执行计划，很难确定为什么要花这么长时间。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-27T11:43:24.043

尝试添加聚合函数并**确保月份列上有索引**。除非服务器很差，否则我不应该花这么长时间。

尝试：

```
select type, 
       account,
       count(*) as dummy
from   balances_tbl 
where  month = 'DEC-12'
group by type,
       account 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-27T07:16:24.473

您可以创建逐月分区或使用可以使用 oracle 优化提示来更快地检索数据

这些是对您的查询有用的提示

```
 1) /*+ ALL_ROWS */
 2) /*+ FIRST_ROWS(n) */ 
 3) /*+ parallel */ 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-27T14:40:15.813

这是最简单的解决方案 - 不需要索引、计划和所有这些......：

```
SELECT DISTINCT d.deptno, dname FROM scott.dept D, scott.emp E WHERE D.deptno = E.deptno
/  
-- Same as Distinct --
SELECT deptno, dname FROM scott.dept D WHERE EXISTS ( SELECT 'X' FROM scott.emp E WHERE E.deptno = D.deptno)
/ 
```

# android - Android 开发 LogCat

> ID：14045424
> 
> 赞同：3
> 
> 时间：2012-12-26T19:44:46.780
> 
> 标签：android, android-logcat

我正在尝试在我的华为 Acend G330 上调试我的应用程序。但我不知道如何使用 LogCat 应用程序启动但所有 logcat 都在说：“信息：日志设备是空的！”

即使我在控制台中键入“adb logcat”，也会显示此信息。在 DDMS 下，我选择了我的设备，adb 也找到了它。

有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T20:12:20.840

这个解决方案会起作用，因为它对我有用，而且我也有 g330。

拨入**`*#*#2846579#*#*`**手机打开一个秘密菜单，选择“ProjectMenu”，然后选择“Background setting”，最后选择“Log setting”。在那里，“日志开关”允许您激活\停用日志，“日志级别设置”允许您选择将在日志中看到的条目，就像您在 eclipse 中的 logcat 设置中所做的一样。激活日志后，重启手机，你就可以在eclipse中看到和看到模拟器日志一模一样了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:41:00.290

1) 请务必查看此最优秀链接中的所有选项：

*   [为什么 logcat 在我的 Android 中不显示任何内容？](https://stackoverflow.com/questions/2250112/why-doesnt-logcat-show-anything-in-my-android)

2) Nick 是对的 - 您需要配置和/或安装这款特定手机可能有些奇怪。

3) 这是一个专门用于调试 G300 的链接：

*   [http://www.modaco.com/topic/359891-how-to-install-adb-and-logcat-for-g300/](http://www.modaco.com/topic/359891-how-to-install-adb-and-logcat-for-g300/)

4）最后，查看这个链接（来自上面的“logcat-for-g300”链接）：

> *   [http://goo.gl/3lhwy](http://goo.gl/3lhwy)
> 
> /proc/last_kmsg（在 G300 CM9 中不可用。将来可能吗？）

# ruby-on-rails - ZeroClipboard 在 Rails 应用程序中不起作用（闪存桥错误），在本地工作，脱轨

> ID：14045428
> 
> 赞同：2
> 
> 时间：2012-12-26T19:45:14.407
> 
> 标签：ruby-on-rails, flash, zeroclipboard

我正在尝试在 Rails 项目中使用[ZeroClipboard](https://github.com/jonrohan/ZeroClipboard)`ZeroClipboard.min.js` ，虽然和`ZeroClipboard.swf`加载很好，但当我将鼠标悬停在`div`附加的 Flash 电影上时，我收到此错误（并且没有任何效果）。

`Uncaught TypeError: Object #<HTMLEmbedElement> has no method 'setSize'`

我正在使用、复制粘贴 GitHub 页面上的示例，并明确设置电影路径 epath：

```
 <html>
  <body>
    <div id="d_clip_button" data-clipboard-text="Copy Me!" title="Click to copy." style="border:1px solid black; padding:20px;">Copy To Clipboard</div>

    <script type="text/javascript" src="/assets/lib/ZeroClipboard.js"></script>
    <script language="JavaScript">
      ZeroClipboard.setMoviePath("/assets/lib/ZeroClipboard.swf");
      var clip = new ZeroClipboard.Client('#d_clip_button');
    </script>
  </body>
  </html> 
```

如果我在非 Rails 服务器上运行此表单，则此方法有效，但是当我在本地或远程登台服务器上运行它时，出现上述错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-25T15:53:38.480

我在使用带有 Turbolinks 的 ZeroClipboard 时看到了这个错误。我能够通过添加来解决它：

```
$(document).on "page:before-change", ->
  ZeroClipboard.destroy() 
```

到`application.js.coffee`. YMMV。

# sql - 在 CTE 中插入的行无法在 postgreSQL 中加入？

> ID：14045434
> 
> 赞同：3
> 
> 时间：2012-12-26T19:45:36.803
> 
> 标签：sql, postgresql, postgresql-9.1

我有一张**桌子**

```
 Table "public.foo"
      Column       |            Type             |              Modifiers              
-------------------+-----------------------------+-------------------------------------
 foo_id            | uuid                        | not null default uuid_generate_v1()
 col1              | uuid                        | 
 col2              | uuid                        | 
 col3              | uuid                        | not null 
```

我有一个视图**goo_view**，它主要从 foo 中选择，但也加入另一个表

```
SELECT * from foo LEFT JOIN foo_helper USING (foo_id); 
```

我有以下 CTE 查询，我试图在其中插入表**foo**，同时返回适当的**goo_view**信息

```
WITH ins AS (
    INSERT INTO foo (col1,col2, col3) VALUES (111,222,333) RETURNING foo_id
)                              
SELECT v.foo_id, v.col1, v.col2, v.fk1
FROM goo_view v 
JOIN ins 
USING (foo_id) 
```

但是结果是空的。

如果我运行插入并单独选择它可以工作，是否存在导致此失败的时间？

解决方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T19:48:38.140

为什么在 CTE 中使用插入物？

```
WITH ins AS (
    select 111 as col1, 222 as col2, 333 as col3
) 
. . . 
```

你的语法真的有用吗？我以前没见过。哇，我刚刚学到了一些东西。这似乎是[Postgres 语法](http://www.postgresql.org/docs/9.1/static/queries-with.html)。

我最好的猜测是您使用的返回子句返回一个 foo_id 。. . 你刚刚插入的那个。这个 foo_id 可能不存在于 goo_view 中，因此没有匹配项和空集。

而且，文档中明确不允许您尝试做的事情：

> WITH 中的子语句彼此同时执行，并与主查询同时执行。因此，当在 WITH 中使用数据修改语句时，指定更新实际发生的顺序是不可预测的。所有语句都使用同一个快照执行（参见第 13 章），因此它们无法“看到”彼此对目标表的影响。这减轻了行更新的实际顺序的不可预测性的影响，并且意味着返回数据是在不同的 WITH 子语句和主查询之间传达更改的唯一方法。. .

因此，您不会在视图中看到新行。要解决此问题，您必须在`from`子句中显式引用 CTE，使用`returning`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T20:10:50.627

由于视图`foo`在 SQL 命令开始的状态下从表中进行选择，因此您必须重写为：

```
WITH ins AS (
   INSERT INTO foo (col1,col2, col3) VALUES (111,222,333)
   RETURNING foo_id, col1, col2
   )
SELECT i.foo_id, i.col1, i.col2, h.fk1
FROM   ins i
LEFT   JOIN foo_helper h USING (foo_id); 
```

通过这种方式，您可以获取*新插入*的值并将辅助表加入其中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T20:31:32.720

顺便说一句：关于隔离级别，CTE、链式返回、子查询或普通连接之间（应该）没有区别。如果“后续”子查询引用实际的表元组（即进行选择），它应该“看到”查询开始时的行。

在其他情况下，具有以下自联接更新湖的查询无法工作：

```
SET search_PATH='tmp';

DROP TABLE ztable CASCADE;
CREATE TABLE ztable
    ( id integer NOT NULL PRIMARY KEY
    , payload varchar
    );
INSERT INTO ztable(id,payload) VALUES (1,'one' ), (2,'two' ), (3,'three')
      ,(4,'four' ), (5,'five' ), (6,'six' );
SELECT * FROM ztable;

    -- This can only work if 
    -- t2 is seen in its original form
    -- **before the update**
UPDATE ztable t1
SET payload=t2.payload
FROM ztable t2
WHERE t1.id  = 7-t2.id
    ;
SELECT * FROM ztable; 
```

结果：

```
CREATE TABLE
INSERT 0 6
 id | payload 
----+---------
  1 | one
  2 | two
  3 | three
  4 | four
  5 | five
  6 | six
(6 rows)

UPDATE 6
 id | payload 
----+---------
  6 | one
  5 | two
  4 | three
  3 | four
  2 | five
  1 | six
(6 rows) 
```

CTE 返回的元组或 RETURNING 产生的“链表表达式”当然是虚拟的；它们不是指实际的元组，而是指新“合成”的新实体。

# jquery - MVC 视图未在页面上显示模型属性

> ID：14045435
> 
> 赞同：0
> 
> 时间：2012-12-26T19:45:37.470
> 
> 标签：jquery, asp.net-mvc, razor

在我尝试解释我的问题时，请耐心等待我。

我将我的表单发布回控制器并更新模型并将其传递回视图。如果我使用提交按钮，这可以正常工作，但如果我使用非提交按钮并尝试使用 javascript 回发，则无法正常工作。

我试过寻找这个问题，但我不知道如何措辞，所以我可以得到任何接近它的结果。

基本上

1.  正确 - 当我单击输入类型 =“提交”的 AddDetail 按钮时，我的控制器被调用，模型被更新并传递回视图，元素正确显示在页面上。

2.  错误 - 当我单击输入类型 =“按钮”的 AddDetail1 按钮时，单击按钮时调用我的 javascript，调用控制器方法，将 FormCollection 和模型正确传递到控制器中。模型得到更新并传回视图，但页面上没有显示任何元素。

我已经将这段代码单步执行了 100 次，我看到的一切都与视图中设置的元素完全相同。唯一的区别是提交按钮将呈现控件，但其他按钮不会呈现任何内容。我在点击每个按钮后查看了 html 源代码，并且提交按钮显示了控件，但是当我单击其他按钮时没有控件。

我什至在页面上添加了一个@Model.cases.count - 最初它显示 0 是正确的，但在回发后它显示 1 用于提交按钮，当我单步执行另一个按钮的代码时，它显示 1 ，但是当页面最终完成并呈现所有内容时，它显示为 0，即使在我单步执行代码时它是 1。

非常令人沮丧

任何想法将不胜感激。

这是我的简化视图

```
@model CASA.ViewModels.CaseViewModel

<script type="text/javascript">
    $(function () {
        $("#AddDetail1").click(function () {
            var form = $(':input');
            //var action = form.attr("action");
            var serializedForm = form.serialize();
            var url = '@Url.Action("CreateCase")';
            //$.post(url, serializedForm);
            $.ajax({
                url: url,
                data: serializedForm,
                type: 'POST',
                success: function (response) {
                    alert(response);
                    // process the results from the controller action

                    //  window.location.href = response.Url;
                }

            });
        });
    });
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    @if (Model.cases != null && Model.cases.Count > 0)
        {
            for (int i = 0; i < Model.cases.Count; i++)
            {
                <tr>
                    <td>
                        @Html.TextBoxFor(m => m.cases[i].CaseNumber, new { @class = "textbox" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => m.cases[i].FirstName, new { @class = "nameTextbox" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => m.cases[i].LastName, new { @class = "nameTextbox" })
                    </td>
                    <td>
                        @Html.EditorFor(m => m.cases[i].DOB)
                    </td>
                    <td>
                        @Html.RadioButtonListFor(m => m.cases[i].Sex, Model.radiobuttons.RadioButtonListItems)
                    </td>
                </tr>
            }
        }

<input type="submit" value="+" id="AddDetail" class="button" />
<input type="button" value="+" id="AddDetail1" class="button" />
} 
```

这是我的控制器：

```
[HttpPost]
        public ActionResult CreateCase(FormCollection collection, CaseViewModel model)
        {
            if (ModelState.IsValid)
            {
                model.cases.Add(new CASA_Cases
                {
                    CaseNumber = collection["CaseNumber"],
                    FirstName = collection["FirstName"],
                    LastName = collection["LastName"],
                    DOB = Convert.ToDateTime(collection["DOB"]),
                    Sex = collection["Sex"]
                });

                UpdateModel(model);
                if (submit.Count() > 0)
                {
                    model.cases.ForEach(item =>
                        {
                            if (model.group.ID == null)
                            {
                                model.group.ID = Guid.NewGuid();
                                model.group.UserID = Utilities.Utilities.GetUserID;
                            }

                            item.CASA_CaseGroups_ID = model.group.ID;
                        });
                }
            }
            return View(model);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T03:45:44.280

再次感谢所有建议。

这就是解决我的问题的方法。

我在 PartialView 上方制作了视图并将 jQuery 更改为

```
<script type="text/javascript">
    $(function () {
        $("#AddDetail1").click(function () {
            var form = $(':input');
            var serializedForm = form.serialize();
            var url = '@Url.Action("CreatePartialView")';
            $.ajax({
                url: url,
                data: serializedForm,
                type: 'POST',
                success: function (response) {
                    $("#result").html(response);
                }
            });
        });
    });
</script> 
```

接下来我创建了一个实际的视图来保存 PartView 如下

```
<div id="result">
@model CASA.ViewModels.CaseViewModel

@using (Ajax.BeginForm(new AjaxOptions { UpdateTargetId = "result" }))
{
        @Html.Partial("CasePartialView", Model)
}
</div> 
```

最后，我修改了Controller以返回PartialView如下

```
[HttpPost]
        public PartialViewResult CreatePartialView(FormCollection collection, CaseViewModel model)
        {
            //Determine if submit button was clicked
            IEnumerable<string> submit = collection.AllKeys.Where(n => n.ToLower().Equals("submit"));

            model.cases.Add(new CASA_Cases
            {
                CaseNumber = collection["CaseNumber"],
                FirstName = collection["FirstName"],
                LastName = collection["LastName"],
                DOB = Convert.ToDateTime(collection["DOB"]),
                Sex = collection["Sex"]
            });

            return PartialView("CasePartialView",model);
        } 
```

再次感谢所有的建议

# nginx - 404 使用 nginx、unicorn、rails 设置子域时出错

> ID：14045439
> 
> 赞同：4
> 
> 时间：2012-12-26T19:45:53.177
> 
> 标签：nginx, ruby-on-rails-3.2, vps, unicorn

我有一个 VPS，最近将我的服务器设置从 apache/passenger 移动到 nginx/unicorn 并添加了一个登台服务器。如果我直接点击服务器[http://xxx.xxx.xx.xx](http://xxx.xxx.xx.xx)，我的应用程序就没有问题了。但是，如果我使用 staging 子域[http://staging.myurl.com 访问](http://staging.myurl.com)它，我会得到 404。我怀疑 unicorn 存在问题，但我无法弄清楚。

这是我所拥有的：

/etc/nginx/sites-enabled/codemarks

```
upstream unicorn {
  server unix:/tmp/unicorn.blog.sock fail_timeout=0;
}

server {
  listen 80 default deferred;
  server_name staging.codemarks.com;
  root /home/deployer/apps/codemarks/current/public;

  location ^~ /assets/ {
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  try_files $uri/index.html $uri @unicorn;
  location @unicorn {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://unicorn;
  }

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
} 
```

然后在 /etc/hosts

```
127.0.0.1       localhost.localdomain   localhost
xxx.xxx.xxx.xxx staging.codemarks.com   staging 
```

我有一个站点的 DNS 记录，并添加了一条 A 记录来指向我的新 IP 的暂存。此外，我检查了 /var/log/nginx/access.log 并记录了直接（成功）请求，但使用 staging.codemarks.com yields

```
216.21.198.16 - - [26/Dec/2012:14:41:07 -0500] "GET /codemarks HTTP/1.1" 404 446 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_0) AppleWebKit/537.20 (KHTML, like Gecko) Chrome/25.0.1337.0 Safari/537.20 
```

我是使用独角兽的新手，所以我不确定我错过了什么。由于直接命中是成功的，我怀疑是 DNS 问题或缺少某些特定于域的独角兽设置，但我正在碰壁。提前感谢您的帮助！

*更新*

/tmp/unicorn.blog.sock 似乎不合适，因为我偷了一个有它的 railscast 的一部分。不过，它应该可以工作，因为我将它作为我的独角兽配置传递：

配置/独角兽.rb

```
root = "/home/deployer/apps/codemarks/current"
working_directory root
pid "#{root}/tmp/pids/unicorn.pid"
stderr_path "#{root}/log/unicorn.log"
stdout_path "#{root}/log/unicorn.log"

listen "/tmp/unicorn.blog.sock"
worker_processes 2
timeout 30 
```

我通过（盲目且不知不觉地）运行来设置我的 unicorn.blog.sock：

```
sudo update-rc.d -f unicorn_blog defaults 
```

# ios - 这种 autoRelease 用法有什么潜在的问题吗？

> ID：14045443
> 
> 赞同：0
> 
> 时间：2012-12-26T19:46:04.957
> 
> 标签：ios, uilabel, autorelease

或者：这种 UILabel 用法怎么可能生成 NSMutableDictionary NSInvalidArgumentException？

这是一个非 ARC iOS 应用程序。当 showLabel（下）运行时，我会偶尔但很少会看到 [__NSDictionaryM setObject:forKey:] 抛出错误：NSInvalidArgumentException *** setObjectForKey: key cannot be nil。

```
@property (nonatomic, retain) UILabel *myLabel;
@synthesize myLabel = _myLabel;

- (void)showLabel{

if (self.myLabel) {
    return;
}

self.myLabel                        = [[[UILabel alloc] initWithFrame:self.tableView.frame] autorelease];
self.myLabel.textColor              = [UIColor whiteColor];
self.myLabel.shadowColor            = [UIColor blackColor];
self.myLabel.shadowOffset           = CGSizeMake(0, 1);
self.myLabel.textAlignment          = UITextAlignmentCenter;
self.myLabel.text                   = @"blah";
self.myLabel.userInteractionEnabled = YES;
[self.myLabel addGestureRecognizer:[[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(labelTapped:)] autorelease]];
[self.view addSubview:self.myLabel];
[self.view bringSubviewToFront:self.myLabel];

}

- (void)hideLabel {
if (!self.myLabel) {
    return;
}

[self.myLabel removeFromSuperview];
self.myLabel = nil;

} 
```

如果我中断 [__NSDictionaryM setObject:forKey:]，它会在 UILabel 的 setTextColor、setShadow、setShadowOffset 和 setTextAlignment 方法中被调用。我发送的任何值都不应该为零，但是这个字典的使用是标签内部的，所以我想知道在发送自动释放后我是否会因为其他一些导致自动释放池的事件而丢失对标签的引用在我仍在使用方法时耗尽（应用程序中涉及多个外部库），因此内部字典的使用偶尔会遇到错误。

在这种情况下，这可能解释 NSMutableDictionary 的 NSInvalidArgumentException 错误吗？

这是完整的堆栈跟踪：

```
NSInvalidArgumentException *** setObjectForKey: key cannot be nil

1 libobjc.A.dylib 0x3678c963 objc_exception_throw + 31
2 CoreFoundation 0x378625ef -[__NSDictionaryM setObject:forKey:] + 143
3 MyApp 0x000effab -[TableViewController showLabel] (MainTableViewController.m:222)
4 CoreFoundation 0x37851349 _CFXNotificationPost + 1421
5 Foundation 0x37b2d38f -[NSNotificationCenter postNotificationName:object:userInfo:] + 71
6 MyApp 0x000d9141 -[Event setDictionary:] (Event.m:123) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:54:41.437

我可以肯定地说它与自动释放无关。您的属性具有保留，并且您在存储变量时正确使用了该属性，因此您的保留计数器变为 +1（分配）+1（属性设置器保留）并最终变为 -1（自动释放）

您的问题可能在其他地方，但是如果没有更多代码我无法弄清楚，对不起！

编辑：如果你想玩超级安全（我实际上会推荐这个），你可以这样做：

```
self.myLabel = [[UILabel alloc] initWithFrame:self.tableView.frame];
// configure
[self.myLabel release]; 
```

您的手势识别器也是如此

试试看你是否仍然遇到崩溃

# mongodb - 无法使用引用其他文档的 Doctrine2 查询 MongoDB 嵌入文档

> ID：14045448
> 
> 赞同：0
> 
> 时间：2012-12-26T19:46:18.557
> 
> 标签：mongodb, doctrine-orm, doctrine-odm

本质上，我正在尝试运行以下查询，因为它在命令行运行时返回正确的结果。

```
db.order_in_progress.find({ "orderProducts.carrierAccount.$id" : "50db39141311fa9421000000" }); 
```

我无法让它使用 doctine2 创建正确的查询。我当前的查询如下：

```
$qb = $this->createQueryBuilder();
$qb->find($this->getClassName());
$qb->field('orderProducts.carrierAccount.$id')->equals(new \MongoId($carrierAccount->getId()));
return $qb->getQuery()->execute(); 
```

这导致以下查询正在运行。

```
db.order_in_progress.find({ "orderProducts.carrierAccount": ObjectId("50db39141311fa9421000000") }) 
```

如果我删除 \MongoID 的东西，我最终会得到以下查询。这更接近，但它截断了字段名称的“$id”部分。

```
db.order_in_progress.find({ "orderProducts.carrierAccount": "50db39141311fa9421000000" }) 
```

相关的父文档（我正在查询的文档）如下所示。（我已经剥离了不相关的字段）

```
{
  "_id" : 148,  
  "orderProducts" : [{      
      "carrierAccount" : {
        "$ref" : "carrier_account",
        "$id" : ObjectId("50db39141311fa9421000000"),
        "$db" : "dev"
      },      
    }, {
      "carrierAccount" : {
        "$ref" : "carrier_account",
        "$id" : ObjectId("50db39141311fa9421000000"),
        "$db" : "cerberus_dev"
      }],
} 
```

帮助！

# php - 如何将“奥布莱恩港”替换为“奥布莱恩港”？

> ID：14045450
> 
> 赞同：2
> 
> 时间：2012-12-26T19:46:46.133
> 
> 标签：php, regex, string

我是字符串操作的新手，只是想替换列表中的值。

我要修复的两个输入是`MCAFEE`和`PORT O'BRIAN`。

所以我跑`ucwords(strtolower($rawTitle))`。但是现在我有`Mcafee`并且`Port O'brian`当我需要显示`McAfee`and时`Port O'Brian`。

首先关注`Port O'brian`，这是我的尝试，但显然它不起作用，因为它大写字符串的第三个字母而不是第三个匹配的字符，就像我想要的那样:(

```
$oPattern = "/O\'[a-z]/"; //Pattern to match
$doesMatch = preg_match($oPattern, $output, $matches); //Do I need to the perform operation?
if ($doesMatch == 1) {
    $letters = str_split($output);//break it out into an array
    $cappedLetter = strtoupper($letters[2]);//capitalize the 3rd letter
    $output = preg_replace("/O'$letters[2]/", $output, "O'$cappedLetter");//replace the O'x with O'X
    return $output;
} 
```

我应该在这里使用不同的功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T19:52:50.630

不，如果字符串中没有大小写信息，则没有通用的方法可以做到这一点。（例如，考虑姓氏 O'Hara/O'hara 的两种可能的大小写。）您可以尽可能地尝试：

```
$title = ucwords(strtolower($rawTitle));
$title = preg_replace_callback('/(?<=O\'|Mc)./', function($match) {
    return strtoupper($match[0]);
}, $title); 
```

但请确保之后手动检查它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T20:24:24.947

名称大写的规则可能相当复杂。这是我如何处理这些问题的教学示例。请参阅[http://www.laprbass.com/RAY_capitalize_names.php](http://www.laprbass.com/RAY_capitalize_names.php)

```
<?php // RAY_capitalize_names.php
error_reporting(E_ALL);

// SOME TEST NAMES
$names = array
( "o'brien"
, 'MCAFEE'
, "barrett-o'reilly"
, "smith jones"
, "burns"
, "CROWTHER"
, "George w. bush, iiI"
, "RONALD    MCDONALD"
, "RONALD    MCDONALD-o'brien"
, "van De Graaff GeneratoR"
)
;

// TEST EACH CASE
foreach ($names as $name)
{
    echo "<br/>$name ";
    echo fixname($name);
}

// FUNCTION TO HANDLE NAMES
function fixname($name)
{
    // SPECIAL CASES FOR UPPER OR LOWER CASE DISPOSITION
    $uc = array  // UPPERCASE AFTER ANY OF THESE
    ( 'Mc'
    , "'"
    , '-'
    )
    ;

    $lc = array  // ALWAYS LOWER CASE
    ( 'Van De '
    )
    ;

    $mc = array  // ALWAYS UPPER CASE
    ( 'Iii'
    )
    ;

    // REMOVE UNNECESSARY BLANKS
    $name = preg_replace('/\s\s+/', ' ', $name);

    // START WITH LOWER CASE AND UPPER FIRST
    $name = strtolower($name);
    $name = ucwords($name);

    // CHECK FOR KNOWN SPECIAL UPPER-CASES
    foreach ($uc as $dlm)
    {
        // FIX THE Mcdonald EXAMPLE, ETC
        $namex = explode($dlm, $name);
        foreach ($namex as $k => $v)
        {
            $namex[$k] = ucwords($v);
        }
        $name = implode($dlm, $namex);
    }

    // CHECK FOR KNOWN CONSTANT LOWER-CASES
    foreach ($lc as $dlm)
    {
        // FIX THE van de Graaff EXAMPLE
        $name = str_replace($dlm, strtolower($dlm), $name);
    }

    // CHECK FOR KNOW CONSTANT UPPERCASE
    foreach ($mc as $dlm)
    {
        // FIX THE Bush, III EXAMPLE
        $name = str_replace($dlm, strtoupper($dlm), $name);
    }

    // RETURN THE REPAIRED STRING
    return $name;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T20:08:09.880

把这个解决方案扔在那里..利用数组函数在你正在寻找的外壳中制作你的名字。它很脏，但快速有效。

1) 按'分割

2) 大写项目`array_walk()`

3）内爆。

4）对空格做同样的事情

```
function nameFix(&$name, $key)
{
    $name = ucfirst($name);
}

function nameFixer($name)
{
    $array = explode(" ", $name);
    array_walk(
            $array, 
            function (&$name, $key) { 
                $name = explode("'", $name); 
                array_walk($name, 'nameFix'); 
                $name = implode("'", $name); 
            }
    );
    array_walk($array, nameFix);
    return implode(" ", $array);
}

echo nameFixer("mister port o'hare o'brian fredrickson"); 
// Returns: Mister Port O'Hare O'Brian Fredrickson 
```

# css - 包装宽度不适合 2 列 50%

> ID：14045451
> 
> 赞同：2
> 
> 时间：2012-12-26T19:46:48.400
> 
> 标签：css, width

我设置了一个 960px 宽度的页面包装器。我创建了 2 个块来填充包装器宽度，因此我将单独块的宽度设置为 50%，但是这两个块不适合并排放置在包装器中。

我想这与单独块的 1px 实心边框有关。是 1px 边框的块将是 50% 宽度 + 1px 边框吗？

如何在不删除 1px 边框的情况下解决此问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T19:51:22.040

如果您不需要支持 IE7，您应该使用：

```
-webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
-moz-box-sizing: border-box;    /* Firefox, other Gecko */
box-sizing: border-box;         /* Opera/IE 8+ */ 
```

这个盒子模型在宽度内部而不是外部添加边框和填充。

![盒子模型](../Images/894055c3d6a2befe124a8c224c817ea1.png)

如需更多信息[，请参阅 css-tricks.com 上的精彩文章](http://css-tricks.com/box-sizing/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T19:48:59.823

那就不要使用百分比。在 div 和 1px 边框上使用 476px 宽度。你也可以使用`margin: -1px;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-29T18:27:20.330

正确答案是这样的：

这是因为 display:inline-block 考虑了 html 中的空白。如果您删除 div 之间的空格，它会按预期工作。现场示例：http: [//jsfiddle.net/XCDsu/4/](http://jsfiddle.net/XCDsu/4/)

```
<div id="col1">content</div><div id="col2">content</div> 
```

但是，如果你想保持你的代码干净/易于阅读（至少在开发模式下），你可以通过 css using white-space 删除空格，这样你就可以保持你漂亮的 HTML 布局。如果您希望文本在列内换行，请不要忘记将空白再次设置为正常。

```
.container { white-space: nowrap; }
.column { display: inline-block; width: 50%; white-space: normal; }

<div class="container">
  <div class="column">text that can wrap</div>
  <div class="column">text that can wrap</div>
</div> 
```

来源：[https](https://stackoverflow.com/a/6872020/2208466) ://stackoverflow.com/a/6872020/2208466和[https://stackoverflow.com/a/10592283/2208466](https://stackoverflow.com/a/10592283/2208466)

# php - 我需要在我的服务器上做些什么才能在书签上运行 jQuery.getJSON 吗？

> ID：14045455
> 
> 赞同：0
> 
> 时间：2012-12-26T19:47:03.310
> 
> 标签：php, javascript, jquery, getjson

我正在制作一个需要一些用户详细信息的书签。

我了解跨域通信的最佳选择是`jQuery.getJSON`将表单和 iframe 附加到文档并将表单目标设置为 iframe。

我决定从 getJSON 开始，因为它看起来不那么混乱，但似乎我有一些问题。

这是我用于 json 调用的内容：

```
$.getJSON('http://mydomain.com/bookmarklet_getjson_functions.php', function(data) {
        alert(data);
}); 
```

这是php页面：

```
echo "{";
echo "item1: ", json_encode($item1), "\n";
echo "item2: ", json_encode($item2), "\n";
echo "item3: ", json_encode($item3), "\n";
echo "}" 
```

当我在打开 Firebug 时单击书签链接时，我得到：

`GET http://mydomain.com/bookmarklet_getjson_functions.php 200 OK 116ms`

但警报不会发生。

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T21:00:34.453

好的 - 在测试了其他几个示例后发现我做错了什么 - 问题是我没有返回 jquery 产生的回调 - 它被用作一种“密码”

所以解决方案基本上是：

```
$.getJSON('http://mydomain.com/bookmarklet_getjson_functions.php?jsoncallback=?', function(data) {
    alert(data);
}); 
```

最后一个`?`被`?jsoncallback=?`自动替换为稍后用作“密码”的随机函数名称

所以现在在我的 php 文件中，我首先回显回调函数，然后`()`在括号内以 json 格式回显变量：

```
$toecho = array(
"firstname" => "someone",
"lastname" => "somoene's lastname"

);
//return in JSON format
echo $_GET['jsoncallback'].'('.json_encode($toecho).')'; 
```

这将回显类似：

`jquery_37328327837823232_3236363({"firstname":"somsomeonee","lastname":"omoene's lastname"})`

希望能帮助那里的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T20:57:56.303

那个“php页面”有点奇怪。你可以试试这个：

```
header('Content-Type: text/javascript');
echo json_encode(array(
    'item1' => $item1,
    'item2' => $item2,
    'item3' => $item3,
));
exit; 
```

您应该设置响应的内容类型并正确编码要发送的数据。（...测试响应会`console.log()`更好`alert()`：）

# c# - 向表单控件添加属性

> ID：14045456
> 
> 赞同：3
> 
> 时间：2012-12-26T19:47:08.873
> 
> 标签：c#, winforms, datagridview

我已扩展 DataGridView 单元格以在角落显示其 Tag 属性中的文本（例如，在日历的角落显示天数），并希望能够指定文本的颜色和不透明度。

为了实现这一点，我向子类 DataGridView 单元格添加了 2 个属性，但是它们不会在运行时存储它们的值。这是 DataGridViewCell 和列：

```
class DataGridViewLabelCell : DataGridViewTextBoxCell
{
    private Color _textColor;
    private int _opacity;

    public Color TextColor { get { return _textColor; } set { _textColor = value; } }
    public int Opacity { get { return _opacity; } set { _opacity = value; } }

    protected override void Paint(Graphics graphics,
                                  Rectangle clipBounds,
                                  Rectangle cellBounds,
                                  int rowIndex,
                                  DataGridViewElementStates cellState,
                                  object value,
                                  object formattedValue,
                                  string errorText,
                                  DataGridViewCellStyle cellStyle,
                                  DataGridViewAdvancedBorderStyle advancedBorderStyle,
                                  DataGridViewPaintParts paintParts)
    {
        // Call the base class method to paint the default cell appearance.
        base.Paint(graphics, clipBounds, cellBounds, rowIndex, cellState,
            value, formattedValue, errorText, cellStyle,
            advancedBorderStyle, paintParts);

        if (base.Tag != null)
        {
            string tag = base.Tag.ToString();
            Point point = new Point(base.ContentBounds.Location.X, base.ContentBounds.Location.Y);
            Font font = new Font("Arial", 25.0F, FontStyle.Bold);
            graphics.DrawString(tag, font, new SolidBrush(Color.FromArgb(_opacity, _textColor)), cellBounds.X, cellBounds.Y);
        }
    }
}

public class DataGridViewLabelCellColumn : DataGridViewColumn
{
    public DataGridViewLabelCellColumn(Color TextColor, int Opacity = 128)
    {
        DataGridViewLabelCell template = new DataGridViewLabelCell();
        template.TextColor = TextColor;
        template.Opacity = Opacity;
        this.CellTemplate = template;
    }
} 
```

我按如下方式添加列：

```
col = new DataGridViewLabelCellColumn(Color.Blue, 115);
dgv.Columns.Add(col);
col.HeaderText = "Saturday";
col.Name = "Saturday"; 
```

`graphics.DrawString`但是，如果我向该行添加断点，则既没有值`_textColor`也没有`_opacity`值。如果我为它们分配默认值，如下所示：

```
private Color _textColor = Color.Red;
private int _opacity = 128; 
```

然后它工作正常。如何确保值存储在 CellTemplate 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:06:52.537

我相信这是因为`CellTemplate`存储为更通用的`DataGridViewCell`，而不是子类`LabelCell`。无论如何，将值存储在 Column 上并从那里引用它们都可以正常工作：

```
DataGridViewLabelCellColumn clm = (DataGridViewLabelCellColumn)base.OwningColumn;
int opacity = clm.Opacity;
Color textColor = clm.TextColor;
graphics.DrawString(tag, font, new SolidBrush(Color.FromArgb(opacity, textColor)), cellBounds.X, cellBounds.Y); 
```

# breeze - 如何在微风.js 中使用数据绑定显示 Validationerror

> ID：14045461
> 
> 赞同：1
> 
> 时间：2012-12-26T19:47:21.243
> 
> 标签：breeze

我正在尝试找到一种方法，以类似于 MVC 中的 ASP.NET(Validation Error) 的方式在 HTML 表中正在编辑的字段下方显示验证错误消息。

任何样品或链接将不胜感激。

这是我尝试过的。它不会立即更新错误消息，因为我认为它不是可观察的。

```
<script id="editTmpl" type="text/html">
   <tr>
       <td><input data-bind="value: Country_Code "/>

            <div data-bind="if: $data.entityAspect.getValidationErrors().length>0">
             <pre data-bind="text:  $data.entityAspect.getValidationErrors('Country_Code')[0].errorMessage "></pre>
        </div>

       </td>
       <td><input data-bind="value: Country_Name"/></td>
        <td class="buttons">
            <a class="btn btn-success" data-bind="click: $root.save" href="#" title="save"><i class="icon-ok"></i></a>
            <a class="btn" data-bind="click: $root.cancel" href="#" title="cancel"><i class="icon-trash"></i></a>
        </td>
   </tr>
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T10:40:36.823

你是对的，这`getValidationErrors`不是一个可观察的淘汰赛。它只是一个返回实体当前 Breeze 验证错误集合的函数。

但是有一个事件可以用来监听该集合的变化。在有事件的地方，有一种方法可以创建可以绑定的 KO observable。这是将这种可观察对象添加到实体的一种方法。

```
功能 addhasValidationErrorsProperty（实体）{

     var prop = ko.observable(false);

     var onChange = 函数 () {
         var hasError = entity.entityAspect.getValidationErrors().length > 0;        
         if (prop() === hasError) {
             // 即使实体网络错误状态未更改，集合也已更改
             prop.valueHasMutated(); // 强制通知
         } 别的 {
             道具（有错误）；// 改变值并通知
         }
     };

     onChange(); // 现在检查 ...
     entity.entityAspect // ...以及当错误集合发生变化时
         .validationErrorsChanged.subscribe(onChange);

     // observable 属性被连接起来；现在将其添加到实体
     entity.hasValidationErrors = 道具；
}

```

然后你应该能够写出类似的东西：

```
  <div data-bind="if: hasValidationErrors">
     <pre data-bind="text: $data.entityAspect.getValidationErrors('Country_Code')[0].errorMessage "></pre>
  </div>

```

该`addhasValidationErrorsProperty`方法在 DocCode:validationTests.js 中的“*使用 validationErrorsChanged 触发 KO 计算属性”测试中执行*

如果您喜欢它，您可能希望在[此处讨论](http://www.breezejs.com/documentation/extending-entities)`EntityType`的构造后初始化程序中调用它。

**额外学分**

我不喜欢

```
$data.entityAspect.getValidationErrors('Country_Code')[0].errorMessage

```

我希望我可以把它变成每个 Breeze 实体的函数，但 Breeze 实体没有基本类型。

您可以使用此类函数扩展特定 Breeze 实体类型的原型。这样做的最佳时机可能是在您使用`hasValidationErrors`属性配置该类型时。

假设我们正在使用`Employee`实体类型。在应用程序引导的早期，我们可以编写：

```
var store = manager.metatdataStore; // 获取 MetadataStore 的一种方法

// 一个虚拟的员工构造函数；也许你有一个真正的
var employeeCtor = function() {};

// 用辅助方法扩展它的原型
employeeCtor.prototype.getFirstValErrMsg = function (pname) {
        var errs = this.entityAspect.getValidationErrors(pname);
        返回（错误长度）？错误[0].errorMessage：“”；
    };

// 同时注册 ctor 和初始化器
store.registerEntityTypeCtor(
       “员工”，
       employeeCtor, // 自定义 ctor
       addhasValidationErrorsProperty); // 初始化器

```

现在你应该可以像这样绑定了：

```
  <div data-bind="if: hasValidationErrors">
     <pre data-bind="text: $data.getFirstValErrMsg('Country_Code')"></pre>
  </div>

```

我已经测试了这种方法的一些部分（例如`getFirstValErrMsg`扩展和`addhasValidationErrorsProperty`方法），但我还没有完全了解整个事情。也许您可以为我们采取下一步行动并报告您的发现。

# scala - 有没有办法重构这个匹配案例功能？

> ID：14045463
> 
> 赞同：0
> 
> 时间：2012-12-26T19:47:48.113
> 
> 标签：scala, pattern-matching

我有这段代码将在我的应用程序中重复多次（超过 15 次）。

```
val entityList = params.map(paramPair => {
//THIS LINE DEPENDS ON THE ENTITY
val entityX = new Entity1
paramPair.foreach { case (key, value) => (key, value) match {
  //THIS BLOCK CHANGES DEPENDING THE ENTITY
  case (KEY1, v: TYPE1) => entityX setX v
  case (KEY2, v: TYPE2) => entityX setY v
  ...
  //END BLOCK
  case _ =>
  }
}
entityX
}) 
```

唯一改变的代码是实体类型和模式匹配 case 子句。有没有办法创建一个接收这些情况的函数以避免代码重复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:54:17.297

你可以转

```
paramPair.foreach { case (key, value) => (key, value) match {
  //THIS BLOCK CHANGES DEPENDING THE ENTITY
  case (KEY1, v: TYPE1) => entityX setX v
  case (KEY2, v: TYPE2) => entityX setY v
  ...
  //END BLOCK
  case _ =>
  }
} 
```

进入

```
paramPair.foreach { case (key, value) => 
  case (KEY1, v: TYPE1) => entityX setX v
  case (KEY2, v: TYPE2) => entityX setY v
  ...
  //END BLOCK
  case _ =>
  }
} 
```

如果您对匿名类没问题，您可以进一步将整个代码转换为：

```
val entityList = params.map(paramPair => {
  new Entity1 {
    paramPair.foreach { case (key, value) => 
      //THIS BLOCK CHANGES DEPENDING THE ENTITY
      case (KEY1, v: TYPE1) => setX v
      case (KEY2, v: TYPE2) => setY v
      ...
      //END BLOCK
      case _ =>
    }
}}) 
```

如果块根据实体发生变化，您可能会像@pst 所说的那样，使用所谓的*函数文字*变成函数：带有花括号和 case 语句的表达式将变成 PartialFunction，例如

```
val fillEntitityOne: PartialFunction[A,B] = {
  case (KEY1, v: TYPE1) => entityX setX v
  case (KEY2, v: TYPE2) => entityX setY v
} 
```

其中 A 和 B 输入和返回类型，例如

```
val foobar: Int => String = { case 1 => "1" } 
```

这就是为什么你可以在第二个片段中省略匹配部分：foreach 需要函数实例（并且 PartialFunction 继承自函数），当然有一些类型，所以实际上我们可以去糖

```
.foreach {
  case x => 
} 
```

进入

```
.foreach({
  case x => 
}) 
```

进而

```
val anon = new PartialFunction[A,B]{....}
.foreach(anon) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T05:19:08.090

只是为了好玩。因为重点是玩得开心，对吧？

由于我忘记了如何使用可变字段，我更喜欢构造不可变的 Dog。

Impersonator 可以通过重构 PartialFunction 来扩展 AnyVal（因为 AnyVal 不允许匿名嵌套类，“计划在后续版本中删除此限制。”）

```
package populate

import scala.reflect._
import scala.reflect.runtime.{ currentMirror => cm }
import scala.reflect.runtime.universe._
import java.util.{ Calendar, Date }

case class Person(var name: String, var birth: Date) { def this() = this(null,null) }
case class Book(var title: String, var pub: Date) { def this() = this(null,null) }
case class Dog(val name: String, val rabies: Date, val goodBoy: Boolean = true)

object Test extends App {
  def dateOf(y:Int,m:Int,d:Int) = { val c = Calendar.getInstance; c.set(1974, 2, 14); c.getTime }
  val input = Seq("id" -> "Sybil", "n" -> dateOf(1974, 2, 14), "garbage" -> "error")

  trait Completer[A] extends Any {
    def filler: PartialFunction[A, Unit]
    def complete(info: Seq[A]) = info foreach (filler orElse {
      case (k, v)             => println(s"Can't use $k -> $v")
    })
  }
  type Info = (String, Any)
  implicit class Impersonator(val p: Person) extends Completer[Info] {
    override def filler = {
      case ("id", s: String)  => p.name = s
      case ("n", d: Date)     => p.birth = d
    }
  }
  implicit class Booker(val b: Book) extends Completer[Info] {
    override def filler = {
      case ("id", s: String)  => b.title = s
      case ("n", d: Date)     => b.pub = d
    }
  }

  def personify(p: Person, info: Seq[(String, Any)]) = info foreach {
    case ("id", s: String)  => p.name = s
    case ("n", d: Date)     => p.birth = d
    case (k, v)             => println(s"Can't use $k -> $v")
  }
  def bookish(b: Book, info: Seq[(String, Any)]) = info foreach {
    case ("id", s: String)  => b.title = s
    case ("n", d: Date)     => b.pub = d
    case (k, v)             => println(s"Can't use $k -> $v")
  }
  def inject[A: ClassTag](a: A, info: Seq[(String, Any)]): A = {
   implicitly[ClassTag[A]] match {
    case ClassTag(k) if k == classOf[Person]  => personify(a.asInstanceOf[Person], info)
    //case ClassTag(k) if k == classOf[Book]    => bookish(classOf[Book] cast a, info)
    case ClassTag(k) if k == classOf[Book]    => a.asInstanceOf[Book] complete info
    case k => println(s"Unknown $k")
   }
   a
  }
  def entity[A: ClassTag](info: Seq[(String, Any)]): A = {
    val e = implicitly[ClassTag[A]].runtimeClass.newInstance.asInstanceOf[A]
    inject(e, info)
  }

  val v = entity[Person](input)
  println(v)
  Console println entity[Book](input)

  Console println Defaulter((input map {
    case ("id", v)  => ("name", v)
    case ("n", v)   => ("rabies", v)
    case p          => p
  }).toMap).newCase[Dog]
}

case class Defaulter(input: Map[String, Any]) {
  def newCase[A]()(implicit t: ClassTag[A]): A = {
    val claas = cm classSymbol t.runtimeClass
    val modul = claas.companionSymbol.asModule
    val im = cm reflect (cm reflectModule modul).instance
    defaut[A](im, "apply")
  }

  def defaut[A](im: InstanceMirror, name: String): A = {
    val at = newTermName(name)
    val ts = im.symbol.typeSignature
    val method = (ts member at).asMethod

    // either defarg or default val for type of p
    def valueFor(p: Symbol, i: Int): Any = {
      val defarg = ts member newTermName(s"$name$$default$$${i+1}")
      if (input contains p.name.toString) {
        input(p.name.toString)
      } else if (defarg != NoSymbol) {
        println(s"default $defarg")
        (im reflectMethod defarg.asMethod)()
      } else {
        println(s"def val for $p")
        p.typeSignature match {
          case t if t == typeOf[String] => null
          case t if t == typeOf[Int]    => 0
          case t if t == typeOf[Date]   => new Date(0L)
          case x                        => throw new IllegalArgumentException(x.toString)
        }
      }
    }
    val args = (for (ps <- method.paramss; p <- ps) yield p).zipWithIndex map (p => valueFor(p._1,p._2))
    (im reflectMethod method)(args: _*).asInstanceOf[A]
  }
} 
```

# jquery - 在 jQuery 中更新 HiddenFor，然后将新值提交给控制器

> ID：14045464
> 
> 赞同：1
> 
> 时间：2012-12-26T19:48:03.240
> 
> 标签：jquery, asp.net-mvc, jquery-ui, razor, asp.net-mvc-4

我已经为此花了几个小时，这令人沮丧：

我的 ViewModel 属性之一是分配列表。对于每个分配，我都会显示一个 jQueryUI 滑块。滑动时，DisplayFor 元素更新为新值（包含滑块的新值）。

这是代码：

js：

```
var slider = someDiv.find(".sliderInitial");
slider.each(function () {
    $(this).slider(
        {
            min: 0,
            max: 10,
            value: $(this).parent().find(".pointsForSliderInitial").text(),
            orientation: "vertical",
            slide: function (event, ui)
            {
                var thisDiv = $(this).parent().find('.pointsForSliderInitial');
                thisDiv.text(ui.value);
                thisDiv.find('#pointsForSliderInitial').val(ui.value); //this line does nothing
                calculatePointsSumInitial();
            }
        }
   ); 
```

部分视图（使用 ViewModel）：

```
@for (int i = 0; i < Model.Allocations.Count(); i++) 
{
<td>
    <div class="hidCategoryDescriptionInitial">
            @Html.(alloc => alloc.Allocations[i].CategoryName)
            - @Html.DisplayFor(alloc => alloc.Allocations[i].CategoryDescription)
    </div>
    <div class="pointsForSliderInitial round label">
        @Html.HiddenFor(alloc => alloc.Allocations[i].AllocationID, new { id = "pointsForSliderInitial" + i }) //this hidden isn't working as expected
        @Html.DisplayFor(alloc => alloc.Allocations[i].Points)
    </div>
    <div class="sliderInitial" />
</td>
} 
```

这是一个局部视图，包含在 Html.BeginForm() 中。表单通过输入类型提交提交。

这行得通。但现在我还需要将新滑动的值提交到数据库。这是困难所在 - 如何将 Html.DisplayFor() 包含的值从我的 pointsForsliderInitial 提交到数据库？

我需要提交一个提交，其中我的分配属性填充了从 HiddenFor() 中获取的值，这些值应该包含我通过使用滑块更新的值。

每次我提交时，模型分配属性都为空。

我在这里做错了什么？如果信息不完整，请告诉我。

编辑：

Allocations 属性的 Viewmodel 定义是一个 AllocationsViewModel 类型的列表（这是一个将数据库中多个表中的数据放在一起的视图模型：

```
public List<AllocationsViewModel>  Allocations { get; set; } 
```

div“pointsForSliderInitial”的输出 html：

```
<div class="pointsForSliderInitial round label">
    <input data-val="true" data-val-number="The field AllocationID must be a number." 
    data-val-required="The AllocationID field is required." 
    id="pointsForSliderInitial0" 
    name="Allocations[0].AllocationID" 
    type="hidden" value="75" />
    0
</div> 
```

* * *

编辑 2

在有用的评论和回答之后，我取得了一些进展。首先，我更新了滑块创建和幻灯片事件：

```
 $(this).slider(
        {
            animate:true,
            min: 0,
            max: 10,
            value: $(this).parent().find("input.valueHolder").val(),
            orientation: "vertical",
            slide: function (event, ui)
            {
                var thisDiv = $(this).parent().find('.pointsForSliderInitial');
                var newValue = ui.value;
                thisDiv.text(newValue);
                thisDiv.find('.valueHolder').val(newValue);
            } 
```

其次，我通过将属性 [HiddenInput] 添加到 AllocationID 和 Points 属性来更新 AllocationsViewModel：

```
public class AllocationsViewModel
{
    [HiddenInput]
    public int AllocationID { get; set; }

    [HiddenInput]
    public int Points { get; set; }

    public DateTime LastUpdated { get; set; }
    public int CategoryID { get; set; }
    public string CategoryName { get; set; }
    public string CategoryDescription { get; set; }
} 
```

最后，我更新了视图：

```
<div class="pointsForSliderInitial round label">
@Html.HiddenFor(alloc => alloc.Allocations[i].AllocationID)
@Html.HiddenFor(alloc => alloc.Allocations[i].Points,new {@class="valueHolder"})
</div> 
```

完成所有这些操作后，当使用按钮提交表单时，控制器会正确地将对象传递给操作（按应有的方式填充分配列表）。但是，只有当我不使用滑块时才会发生这种情况。如果我使用滑块（更新隐藏的输入），该操作再次接收分配为空。所以只要我不干扰滑块，它就可以工作。

不知何故，这条 jQuery 行打破了一些东西：

```
thisDiv.find('.valueHolder').val(newValue); 
```

我想我将不得不更深入地挖掘，因为在 Firebug 中，当我调试时，在这条线执行之后，当我检查它的 val() 时，它给了我“未定义”。

编辑3：

我发现了chrome调试的问题！这真的很有趣：我在滑动时切换了滑块事件的顺序：

```
slide: function (event, ui)
{
var thisDiv = $(this).parent().find('.pointsForSliderInitial');
var newValue = ui.value;
thisDiv.find('.valueHolder').val(newValue);
thisDiv.text(newValue);
} 
```

调用 val(newValue) 时，该值已正确设置。但接下来的一行，设置 .text(newValue) 正在破坏隐藏并混淆我的模型，使其返回 null 到操作。我刚刚删除了 thisDiv.text(newValue); -> 现在一切正常，我的模型接收到从滑块更新的正确点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T17:40:42.753

@NunoCarmo 是对的，也不`.val(ui.value)`适用于用于输入元素的 div，请改用 .text() ...

但无论如何，您应该将该滑块值存储在输入而不是 div 中，因为 div 内容不会发布在表单提交上。

我不确定使用

```
@Html.DisplayFor(alloc => alloc.Allocations[i].Points) 
```

因为输出是普通的`0`.

您必须使用输入，例如 AllocationID 使用隐藏，例如

```
@Html.HiddenFor(alloc => alloc.Allocations[i].Points,new {@class="valueHolder"}) 
```

然后在您的 JS 中，您可以执行以下操作：

```
thisDiv.find('input.valueHolder').val(ui.value); 
```

您还需要在滑块设置中进行更改：

```
value: $(this).parent().find("input.valueHolder").val(), 
```

# javascript - 帮助用户定位附近的地方 Google JS API

> ID：14045465
> 
> 赞同：0
> 
> 时间：2012-12-26T19:48:08.903
> 
> 标签：javascript, google-maps, geolocation

我想显示用户地理位置附近的所有博物馆。当我想用 user_lat_long 替换 init 中的 latLng 时遇到问题。由于某种原因，在 init 中使用 alert 时 user_lat_long 值未定义。你能向我解释我做错了什么吗？我仍然是 JS 的新手。谢谢！

```
function init() {
  var latLng = new google.maps.LatLng(44.43, 26.11);
  Demo.map = new google.maps.Map(Demo.mapContainer, {
    zoom: 13,
    center: latLng,
    mapTypeId: google.maps.MapTypeId.ROADMAP});
    var request = {
      location: latLng,
      radius: 50000,
      types: ['museum']
    };
    infowindow = new google.maps.InfoWindow();
    var service = new google.maps.places.PlacesService(Demo.map);
    service.nearbySearch(request, function (results, status) {
        if (status == google.maps.places.PlacesServiceStatus.OK) {
          for (var i = 0; i < results.length; i++) {
            {
                 var placeLoc = results[i].geometry.location;
                 var marker = new google.maps.Marker({
                   map: Demo.map,
                   position: placeLoc
                 });

                 google.maps.event.addListener(marker, 'click', function() {
                   infowindow.setContent(restults[i].name);
                   infowindow.open(map, this);
                 });
               }
          }
        }
      });

 }

google.maps.event.addDomListener(window, 'load', init);
function pozitie() {
    if(navigator.geolocation) {

     navigator.geolocation.getCurrentPosition(currentPositionCallback);

     } else {

     alert('The browser does not support geolocation');

 }
function currentPositionCallback(position) {

user_lat_long = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

 var marker = new google.maps.Marker({
 position: user_lat_long,
 map: Demo.map,
 icon: image
 });

 Demo.map.setCenter(user_lat_long);
 Demo.map.setZoom(15);

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:22:34.617

我认为您缺少 pozitie 函数的右括号，这是修改后的代码。我相信您是在服务器中运行此代码（而不是作为本地 HTML 文件），否则您将无法获取用户位置。

```
function init() {
  var latLng = new google.maps.LatLng(44.43, 26.11);
  Demo.map = new google.maps.Map(Demo.mapContainer, {
    zoom: 13,
    center: latLng,
    mapTypeId: google.maps.MapTypeId.ROADMAP});
    var request = {
      location: latLng,
      radius: 50000,
      types: ['museum']
    };
    infowindow = new google.maps.InfoWindow();
    var service = new google.maps.places.PlacesService(Demo.map);
    service.nearbySearch(request, function (results, status) {
        if (status == google.maps.places.PlacesServiceStatus.OK) {
          for (var i = 0; i < results.length; i++) {
            {
                 var placeLoc = results[i].geometry.location;
                 var marker = new google.maps.Marker({
                   map: Demo.map,
                   position: placeLoc
                 });

                 google.maps.event.addListener(marker, 'click', function() {
                   infowindow.setContent(restults[i].name);
                   infowindow.open(map, this);
                 });
               }
          }
        }
      });

 }

google.maps.event.addDomListener(window, 'load', init);
google.maps.event.addDomListener(window, 'load', pozitie);//Assuming you are calling this method after init is called
function pozitie() {
    if(navigator.geolocation) {

     navigator.geolocation.getCurrentPosition(currentPositionCallback);

     } else {

     alert('The browser does not support geolocation');

 }
}
function currentPositionCallback(position) {

var user_lat_long = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
 var marker = new google.maps.Marker({
 position: user_lat_long,
 map: Demo.map
 });

 Demo.map.setCenter(user_lat_long);
 Demo.map.setZoom(15);

 } 
```

# android - Android：如何向布局元素添加自定义属性？

> ID：14045470
> 
> 赞同：2
> 
> 时间：2012-12-26T19:48:35.053
> 
> 标签：android, android-layout, attributes

说我有

```
<Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/editText2"
        android:text="Save" /> 
```

在某些时候我可能需要添加一些自定义属性，像这样

```
<Button
            ...................................
            my-attribute = "value"
            ...................................
            android:text="Save" /> 
```

我试图这样做，但我当然会遇到一些错误。我来自html5世界..

有命名约定还是什么？

还有另一种（正确的）方法吗？

# jquery - jQuery - 悬停时从元素获取属性

> ID：14045472
> 
> 赞同：1
> 
> 时间：2012-12-26T19:48:54.130
> 
> 标签：jquery

尝试应用`.hover`到基于动态 ID 显示 div 的类。例如：

**HTML**

```
<div id="parent_one">
    <div class="touch" id="one">Touch me!</div>
    <div id="t_one"></div>
</div>
<div id="parent_two">
    <div class="touch" id="two">Touch me!</div>
    <div id="t_two"></div>
</div> 
```

**jQuery**

```
$('.touch').hover(
    function(){
        var id = $(this).attr('id');
        var value = '#t_' + id;
        $(value).fadeIn(800);
    },
    function(){
        var id = $(this).attr('id');
        var value = '#t_' + id;
        $(value).delay(1500).fadeOut(800);
    }
); 
```

我有一种感觉，我的错误在于使用`$(this)`但无法确定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T19:49:56.157

这：

```
var value = 't_' + id; 
```

需要包括`#`：

```
var value = '#t_' + id; 
```

否则，您只是选择带有标签的元素`t_one`，这不是现有的标签名称。

但是，为此使用 id 非常难看。如果你有像这样一致的 HTML，为什么不使用这样的类结构：

```
<div>
  <div class="touch-handle">Touch me!</div>
  <div class="content"></div>
</div> 
```

用这样的JS：

```
$('.touch-handle').hover(
  function(){
    $(this).next('.content').fadeIn(800);
  },
  function(){
    $(this).next('.content').delay(1500).fadeOut(800);
  }
); 
```

# c# - DataGridView 的魔力

> ID：14045480
> 
> 赞同：6
> 
> 时间：2012-12-26T19:50:07.773
> 
> 标签：c#, winforms, datagridview

我有一个 Windows 窗体，包含一个文本框和一个 datagridview。一旦文本框的文本发生更改，datagridview 的数据源就会更新。例如，它是通过处理文本框的 TextChanged 事件并为数据源分配一个新列表来完成的。通常新数据源包含1000+行，数据量相当大。此外，查询数据库以获取此列表也很耗时。

令我惊讶的是，如果我在文本框中输入的速度足够快，数据网格会一次又一次地暂停呈现自己，它只会呈现最终结果。它完全忽略了中间结果。这是有道理的，因为在连续文本更改期间正在运行的 UI 线程很忙。但是为什么我仍然可以在文本框中输入？

1.  文本变化
2.  获取数据
3.  刷新 DataGridView（无渲染/绘画）
4.  文本变化
5.  获取数据
6.  刷新 DataGridView（无渲染/绘画）
7.  ...文本更改
8.  获取数据
9.  刷新 DataGridView（最终渲染/绘画）
10.  完毕。

就像文本框在另一个线程上一样，但绝对不是。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T20:47:54.140

这不是 DataGridView 特有的，任何 Windows 窗口都会自动具有此功能。它由*消息队列*提供，消息队列是一种与显示窗口的线程相关联的数据结构。当线程忙于做其他事情时，Windows 会在输入事件（如鼠标按钮单击或键盘按键按下）上将消息添加到队列中。

一旦线程完成它正在做的事情，它就会重新进入消息循环（由 Application.Run() 启动的循环），从队列中检索消息并处理它。哪个轮次会触发 TextChange 事件。因此，将队列可视化的一个好方法是作为*缓冲区*。默认情况下，它最多可以存储 10,000 个事件。

# wordpress - 在 PayPal 付款期间存储信息以供以后处理

> ID：14045487
> 
> 赞同：0
> 
> 时间：2012-12-26T19:51:15.453
> 
> 标签：wordpress, paypal, information-retrieval

在用户提交注册后创建数据库记录之前，我希望他通过 PayPal 付款流程。只有当他从 PayPal 的付款页面回到我的 (WordPress) 网站时，才会创建数据库记录。

为此，我需要将他的注册详细信息（姓名、电子邮件、年龄、电话等）存储在某处。而且因为他可以一次注册一组人，所以可以不是一个人，而是几个人的详细信息。

如何在 PayPal 付款期间安全地存储它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T05:38:54.300

您可以将数据保存在临时数据库表中，直到您准备好将其移动到最终表中，或者您可以使用会话变量。

我个人更喜欢在将人发送到 PayPal 付款之前创建数据库记录。这样，您可以在发票下的付款中包含数据的记录 ID 或 PayPal 在其 API 中提供的自定义参数。这使您可以轻松地将 PayPal 交易数据与您自己的内部发票或记录 ID 进行交叉引用。

当您第一次添加它时，您可以将其作为待处理放入其中，然后一旦付款完成，只需将该记录从待处理更新为完成或您想要调用它的任何内容。

如果您使用的是 PayPal Express Checkout 或 Payments Pro，这一切都可以在结账流程中完成。如果您使用的是付款标准，我建议您在付款完成后使用 IPN 更新数据库。

# javascript - 通过jQuery分离谷歌地图的纬度和经度

> ID：14045489
> 
> 赞同：0
> 
> 时间：2012-12-26T19:51:20.330
> 
> 标签：javascript, jquery, google-maps

我使用谷歌地图并希望通过以下代码获得单独的字符串`(46.43303011014231, -95.1344145834446)`：

```
google.maps.event.addListener(map, 'click', function (event) {

    //placeMarker(event.latLng); // this output is: (46.43303011014231, -95.1344145834446)

    var str = event.latLng;
    var ret = str.split(",");
    alert(ret[0]); // this don't work for me

}); 
```

我希望它为：

```
Latitude = 46.43303011014231
Longitude = -95.1344145834446 
```

`(46.43303011014231, -95.1344145834446)`jquery如何提取它们？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T19:52:40.333

`event.latLng`是`LatLng`您不必要地转换为字符串的对象。使用[对象的本机方法](https://developers.google.com/maps/documentation/javascript/reference#LatLng)：

```
var lat = event.latLng.lat(); 
var lng = event.latLng.lng(); 
```

[https://developers.google.com/maps/documentation/javascript/reference#MouseEvent](https://developers.google.com/maps/documentation/javascript/reference#MouseEvent)

# c# - UpdatePanel 和 GridView

> ID：14045496
> 
> 赞同：2
> 
> 时间：2012-12-26T19:51:48.233
> 
> 标签：c#, asp.net, gridview, updatepanel

我在 UpdatePanel 中有一个 GridView，如下所示：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" GridLines="None"
            AllowPaging="True" OnRowCommand="GridViewAllProducts_RowCommand">
            <Columns>
                <asp:TemplateField>
                    <ItemTemplate>
                        <img id="imgImage" src='<%# Bind("Image") %>' class="imgNewsAllNewsUC noBorder" alt=""
                            runat="server" />
                        <asp:ImageButton ID="ibDelete" CommandName="delete" CommandArgument='<%# Bind("Id") %>'
                            runat="server" />
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>
</ContentTemplate>
</asp:UpdatePanel> 
```

后面的代码如下：

```
protected void GridViewAllProducts_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "delete")
    {
        new ProductC().DeleteBy_Id(Convert.ToInt32(e.CommandArgument));

        GridViewAllProducts.DataSource = new ProductC().GetAllProducts();
        GridViewAllProducts.DataBind();
    }
} 
```

当我单击 ibDelete 时，相关行将从数据库中删除，但在我刷新页面之前页面不会更改。我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:17:06.083

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
    ....
</asp:UpdatePanel>

protected void GridViewAllProducts_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "delete")
    {
        new ProductC().DeleteBy_Id(Convert.ToInt32(e.CommandArgument));

        GridViewAllProducts.DataSource = new ProductC().GetAllProducts();
        GridViewAllProducts.DataBind();
        UpdatePanel1.Update();
    }
} 
```

# .net - 如何忽略 .net 配置管理器上的未知配置

> ID：14045498
> 
> 赞同：0
> 
> 时间：2012-12-26T19:52:08.797
> 
> 标签：.net, visual-c++, configuration

我有一个使用 .net 配置管理器用户配置配置的 .net 应用程序。相同的配置文件与另一个 C++ 应用程序共享，因为这些应用程序共享大部分配置。问题是每当我为 C++ 应用程序添加一个配置元素时，它都会破坏 .net 之一。有没有办法让.net 配置管理器忽略未知的配置元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T02:23:05.603

问题是 .net 不使用和考虑 c++ 使用的有效选项。您最好将两个项目拆分为两个配置文件，以解决您现在看到的问题。

# jquery - 单击时展开 div

> ID：14045500
> 
> 赞同：2
> 
> 时间：2012-12-26T19:52:32.883
> 
> 标签：jquery, asp.net, html, css

我的问题对你们中的许多人来说相当简单。我想扩展 div(onClick) 以适应外部 div，它应该完全覆盖所有其他三个 div。（不是全屏）

我正在尝试使用以下代码执行此操作，但是当我尝试执行此操作时，页面的整个结构会受到干扰。

```
<head runat="server">
<title>Untitled Page</title>
<link href="css/jquery-ui.css" rel="stylesheet" type="text/css" />

<script src="js/jquery-1.8.1.min.js" type="text/javascript"></script>

<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js" type="text/javascript"></script>

<style type="text/css">
    .toggler
    {
        max-width: 500px;
        max-height: 270px;
        position: relative;
    }
    .newClass
    {
        height: 500px;
        width: 290px;
        display: inline-block;
        z-index: 10000px;
        float: left;

    }

    .divClass
    {
        float: left;
        vertical-align: middle;
        height: 50px;
        width: 500px;
    }
</style>

<script type="text/javascript">
$(document).ready(function(){
    $('#div1').click(function() {
    $('#div1').toggleClass('newClass');
    });
    });
</script>

</head>
<body>
<form id="form1" runat="server">
<table width="100%">
    <tr style="height: 100%;">
        <td style="width: 30%; height: 500px;">
        </td>
        <td style="width: 70%; height: 500px;">
            <div style="width: 100%; height: 500px;">
                <table style="height: 500px; width: 100%;">
                    <tr>
                        <td class="toggler">
                            <div id="div1" style="background-color: Black;">
                                Hello World!
                            </div>
                        </td>
                        <td style="width: 50%" class="toggler">
                            <div id="div2" style="background-color: Blue; width: 100%; height: 100%;">
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td style="width: 50%" class="toggler">
                            <div id="div3" style="background-color: Red; width: 100%; height: 100%;">
                            </div>
                        </td>
                        <td style="width: 50%" class="toggler">
                            <div id="div4" style="background-color: Maroon; width: 100%; height: 100%;">
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </td>
    </tr>
</table>
</form> 
```

我的代码到底有什么问题？？？？请帮忙..

**注意**：我也尝试过 addClass 和 removeClass 方法..没有好的结果...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T21:05:20.910

像这样的东西。jsfiddle：http: [//jsfiddle.net/4L5fw/2/](http://jsfiddle.net/4L5fw/2/)

html:

```
<div class="wrapper">
    <div class="black"></div>
    <div class="blue "></div>
    <div class="red"></div>
    <div class="green"></div>
</div>​ 
```

CSS：

```
.wrapper{
    width: 500px;
    height: 500px;
}
.black{
    width: 250px;
    height: 50px;
    background: black;
}
.blue{
    width: 250px;
    height: 250px;
    background: blue;
}

.red{
    width: 250px;
    height: 250px;
    background: red;
}
.green{
    width: 250px;
    height: 250px;
    background: green;
}

div{
    float: left;
}

.active{
    height: 100%;
    width: 100%;
}

.hide{
    display: none;
}​ 
```

jQuery：

```
$(document).ready(function(){
    $('.wrapper div').click(function() {
        $(this).toggleClass('active');
        $(this).siblings().not(this).toggleClass('hide');
    });
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:04:00.510

这似乎工作正常。

```
<head runat="server">
<title>Untitled Page</title>
<link href="css/jquery-ui.css" rel="stylesheet" type="text/css" />

<script src="js/jquery-1.8.1.min.js" type="text/javascript"></script>

<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js" type="text/javascript"></script>

<style type="text/css">
    .toggler
    {
        max-width: 500px;
        max-height: 270px;
        position: relative;
    }
    .newClass
    {
        height: 500px;
        width: 290px;
        display: inline-block;
        z-index: 10000px;
        float: left;

    }

    .divClass
    {
        float: left;
        vertical-align: middle;
        height: 50px;
        width: 500px;
    }
</style>

<script type="text/javascript">
$(document).ready(function(){
    $('#div1').click(function() {
    $('#div1').toggleClass('newClass');
    });
    });
</script>

</head>
<body>
<form id="form1" runat="server">
<table width="100%">
    <tr style="height: 100%;">
        <td style="width: 30%; height: 500px;">
        </td>
        <td style="width: 70%; height: 500px;">
            <div style="width: 100%; height: 500px;">
                <table style="height: 500px; width: 100%;">
                    <tr>
                        <td class="toggler">
                            <div id="div1" style="background-color: Black;">
                                Hello World!
                            </div>
                        </td>
                        <td style="width: 50%" class="toggler">
                            <div id="div2" style="background-color: Blue; width: 100%; height: 100%;">
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td style="width: 50%" class="toggler">
                            <div id="div3" style="background-color: Red; width: 100%; height: 100%;">
                            </div>
                        </td>
                        <td style="width: 50%" class="toggler">
                            <div id="div4" style="background-color: Maroon; width: 100%; height: 100%;">
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </td>
    </tr>
</table>
</form>​ 
```

jsFiddle 链接：http: [//jsfiddle.net/3tkpa/](http://jsfiddle.net/3tkpa/)

如果单击黑色 div，它会展开。当它展开并单击时，它会折叠。

# iphone - 如何在越狱 iPhone 的调整中刷新首选项窗格？

> ID：14045506
> 
> 赞同：4
> 
> 时间：2012-12-26T19:52:57.213
> 
> 标签：iphone, ios, tweak

我在我的调整的首选项面板中有一个按钮，可以将设置恢复为默认值（特别是清除了“PSEditTextCell”）。该按钮触发更改 plist 中的值的操作，但更改不会立即可见：您必须返回跳板然后返回设置以查看字段已被清除。如何让首选项视图刷新以便立即可见更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-01T21:28:02.527

如果您的按钮正在触发您偏好的 PSListController 中的操作。bundle，然后您可以调用这些方法中的任何一个来重新加载 PSListController 上的说明符：

```
-(void)reload;
-(void)reloadSpecifiers;
-(void)reloadSpecifierAtIndex:(int)index animated:(BOOL)animated;
-(void)reloadSpecifierAtIndex:(int)index;
-(void)reloadSpecifier:(PSSpecifier*)specifier animated:(BOOL)animated;
-(void)reloadSpecifier:(PSSpecifier*)specifier;
-(void)reloadSpecifierID:(NSString*)specifierID animated:(BOOL)animated;
-(void)reloadSpecifierID:(NSString*)specifierID; 
```

来源：[https ://github.com/rpetrich/iphoneheaders/blob/master/Preferences/PSListController.h](https://github.com/rpetrich/iphoneheaders/blob/master/Preferences/PSListController.h)

# node.js - 如何使用服务器实例指定 mongodb 用户名和密码？

> ID：14045509
> 
> 赞同：21
> 
> 时间：2012-12-26T19:53:16.187
> 
> 标签：node.js, mongodb

MongoClient文档展示[了](http://mongodb.github.com/node-mongodb-native/api-generated/mongoclient.html)如何使用 Server 实例来创建连接：

```
var Db = require('mongodb').Db,
    MongoClient = require('mongodb').MongoClient,
    Server = require('mongodb').Server;

// Set up the connection to the local db
var mongoclient = new MongoClient(new Server("localhost", 27017)); 
```

您将如何为此指定用户名和密码？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-26T21:17:01.407

有两种不同的方法可以做到这一点

# #1

[文档](http://mongodb.github.com/node-mongodb-native/api-generated/db.html#authenticate)（注意文档中的示例使用 Db 对象）

```
// Your code from the question

// Listen for when the mongoclient is connected
mongoclient.open(function(err, mongoclient) {

  // Then select a database
  var db = mongoclient.db("exampledatabase");

  // Then you can authorize your self
  db.authenticate('username', 'password', function(err, result) {
    // On authorized result=true
    // Not authorized result=false

    // If authorized you can use the database in the db variable
  });
}); 
```

# #2

[文档 MongoClient.connect](http://mongodb.github.com/node-mongodb-native/driver-articles/mongoclient.html#mongoclient-connect)
[文档 URL](http://docs.mongodb.org/manual/reference/connection-string/)
一种我更喜欢的方式，因为它更小且更易于阅读。

```
// Just this code nothing more

var MongoClient = require('mongodb').MongoClient;
MongoClient.connect("mongodb://username:password@localhost:27017/exampledatabase", function(err, db) {
  // Now you can use the database in the db variable
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-12-15T23:06:21.953

感谢马蒂亚斯的正确答案。

我想补充一点，有时您拥有来自一个数据库的凭据，同时又想连接到另一个数据库。在这种情况下，您仍然可以使用 URL 方式连接，只需`?authSource=`在 URL 中添加参数即可。

例如，假设您拥有来自 database 的管理员凭据`admin`，并且想要连接到 database `mydb`。您可以通过以下方式进行操作：

```
const MongoClient = require('mongodb').MongoClient;

(async() => {

    const db = await MongoClient.connect('mongodb://adminUsername:adminPassword@localhost:27017/mydb?authSource=admin');

    // now you can use db:
    const collection = await db.collection('mycollection');
    const records = await collection.find().toArray();
    ...

})(); 
```

此外，如果您的密码包含特殊字符，您仍然可以使用如下 URL 方式：

```
 const dbUrl = `mongodb://adminUsername:${encodeURIComponent(adminPassword)}@localhost:27017/mydb?authSource=admin`;
    const db = await MongoClient.connect(dbUrl); 
```

注意：在早期版本中，用于用户名或密码时`{ uri_decode_auth: true }`需要选项（作为`connect`方法的第二个参数）`encodeURIComponent`，但是现在此选项已过时，没有它也可以正常工作。

# javascript - 无法使用数组中的值填充下拉列表选项

> ID：14045510
> 
> 赞同：0
> 
> 时间：2012-12-26T19:53:24.227
> 
> 标签：javascript, jquery

我想用一组值填充一个下拉列表，从 1,2，.... 100。目前，我正在这样做，但它不起作用。

*在头部*

```
<script type="text/javascript" src="./jquery-1.8.3.min.js"></script>
<script type="text/javascript">
    var select = document.getElementById("selectAge");
    var options = ["1", "2", "3", "4", "5"];
    for(var i = 0; i < options.length; i++) {
        var opt = options[i];
        var el = document.createElement("option");
        el.textContent = opt;
        el.value = opt;
        select.appendChild(el);
    }​
</script> 
```

然后*，在表格*中，我有

```
<label>Age</label>
<select id="selectAge"> 
    <option>Select your age</option>        
</select> 
```

* * *

下拉列表未填充单个值。我的意思是，我不明白为什么它没有发生。一种更正可能是将 java 脚本代码放在结束`</body>`标记之前，因为它应该仅在加载 DOM 后填充。但我什至尝试过，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:57:51.630

[在小提琴中工作得很好](http://jsfiddle.net/ZPjGH/)。如果您使用的是 jQuery，请将整个内容包装在

```
$(function() { ... your code ...})` 
```

等到 DOM 准备好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T20:13:11.633

```
<html>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        var selectAge = $("#selectAge"), 
        options = [1,2,3,4,5,6], 
        i;
        for ( i = 0; i < options.length; i++) {
            $(selectAge).append("<option value='" + options[i] + "'>" + options[i] + "</option>");
        }
    });
</script>
<body>
<lable>Age:</lable>
<select id="selectAge">
    <option>Select your age</option>
</select>
</body>
</html> 
```

# jquery - 如何重用一个 Bootstrap 模态 div？

> ID：14045515
> 
> 赞同：9
> 
> 时间：2012-12-26T19:53:50.373
> 
> 标签：jquery, twitter-bootstrap, modal-dialog

我希望能够在一个页面上有许多不同的链接，通过 Bootstrap 的模态插件重用一个模态 div：

```
<h3>This button shows a modal (<code>#utility</code>) with text "Phasellus <em>tincidunt gravida</em>..."</h3>
<br />
<a id="file_attach" data-toggle="modal" href="http://fiddle.jshell.net/jhfrench/6K8rD/show/" data-target="#utility" class="btn">Modal 1</a><br />
<h3>This button should invoke the same modal (<code>#utility</code>), but fill it with text "Phasellus <em>egestas est eu</em>..."</h3>
<br />
<a id="file_attach" data-toggle="modal" href="http://fiddle.jshell.net/jhfrench/AWSnt/show/" data-target="#utility" class="btn">Modal 2</a><br />

<!-- Modal -->
<div id="utility" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3 id="myModalLabel">Click outside modal to close it</h3>
  </div>
  <div class="modal-body">
    <p>One fine body…this is getting replaced with content that comes from passed-in href</p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
  </div>
</div> 
```

我希望单击任一链接（样式为按钮）将调用模式并使用与`href`单击的按钮相对应的页面（的值）加载模式。相反，模式总是加载您首先单击的链接的内容；模态不会“刷新”应由`href`“其他”链接指示的内容。

我认为这是一个 Bootstrap 错误，但我在这里问这个问题，以防我使用不正确。

请参阅[http://jsfiddle.net/jhfrench/qv5u5/](http://jsfiddle.net/jhfrench/qv5u5/)进行演示。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-27T18:11:50.823

经过进一步研究，我发现一些 Bootstrap 问题[在这里](https://github.com/twbs/bootstrap/pull/5514)和[这里](https://github.com/twbs/bootstrap/issues/5161#issuecomment-9840901)提到了这种行为。我已要求重新打开[问题 5514 。](https://github.com/twbs/bootstrap/pull/5514)

同时，这个 jQuery 将修复问题*：

```
$('a[data-toggle="modal"]').on('click', function(){
    // update modal header with contents of button that invoked the modal
    $('#myModalLabel').html( $(this).html() );
    //fixes a bootstrap bug that prevents a modal from being reused
    $('#utility_body').load(
        $(this).attr('href'),
        function(response, status, xhr) {
            if (status === 'error') {
                //console.log('got here');
                $('#utility_body').html('<h2>Oh boy</h2><p>Sorry, but there was an error:' + xhr.status + ' ' + xhr.statusText+ '</p>');
            }
            return this;
        }
    );
});​ 
```

有关工作示例，请参阅[http://jsfiddle.net/jhfrench/qv5u5/51/。*](http://jsfiddle.net/jhfrench/qv5u5/51/)

*-出于某种原因，有时当您单击小提琴中的按钮时，模式会显示为空白。这在我正在使用的应用程序中不是问题，因此我怀疑这是与此问题/答案无关的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-07T09:30:49.880

我不必编写模态的 html 标记并通过 javascript 操作它，而是使用 Bootstrap-Dialog 来简化一切：

```
$('.modal-btn').click(function(event){
    var $link = $(this);
    new BootstrapDialog({
        title   :   'Load content of : ' + $link.attr('href'),
        content :   $('<div>Loading...</div>').load($link.attr('href')),
        buttons :   [{
            label   :   'Close',
            onclick :   function(dialog){
                dialog.close();
            }
        }, {
            label   :   'Save changes',
            cssClass:   'btn-primary',
            onclick :   function(dialog){
                alert('The content of the dialog is: ' + dialog.getBody().html());
                dialog.close();
            }
        }]
    }).open();

    event.preventDefault();
}); 
```

请参阅此处的现场演示，它会加载您在示例中提供的两个 url：http: [//jsfiddle.net/txrM8/](http://jsfiddle.net/txrM8/)

查看更多关于 Bootstrap-Dialog： http: [//nakupanda.github.io/bootstrap-dialog/](http://nakupanda.github.io/bootstrap-dialog/)

# ruby - XPath 选择带有可选中间空白文本节点的前一个元素

> ID：14045519
> 
> 赞同：3
> 
> 时间：2012-12-26T19:54:09.497
> 
> 标签：ruby, xpath, nokogiri

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T20:07:13.677

**Use**:

```
/*/a/preceding-sibling::node()
       [not(self::text()[not(normalize-space())])]
            [1]
              [self::a] 
```

**XSLT - based verification:**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
     <xsl:copy-of select=
       "/*/a
          /preceding-sibling::node()
                      [not(self::text()[not(normalize-space())])]
                                        [1]
                                         [self::a]
    "/>
 </xsl:template>
</xsl:stylesheet> 
```

**When this transformation is applied on the provided XML document:**

```
<r>
  <a>a1</a><a>a2</a>
   b
  <a>a3</a>
    <a>a4</a>
  <b/>
  <a>a5</a>
</r> 
```

**the XPath expression is evaluated and the nodes that are selected by this evaluation, are copied to the output**:

```
<a>a1</a>
<a>a3</a> 
```

**Update**:

What is wrong with the XPath expression in the question?

**The problem is here**:

```
[not(text()) or normalize-space(.)=''] 
```

This tests if the context node doesn't have a text node *child*.

But the OP wants to test if the context node *is* a text node.

**Solution**:

**Replace the above with**:

```
[not(self::text()) or normalize-space(.)=''] 
```

**XSLT - based verification**:

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*/a">
     <xsl:copy-of select=
     "preceding-sibling::*[1]
                      [name()='a']
                         [following-sibling::node()[1]
                                    [not(self::text()) or normalize-space(.)='']
                       ]"/>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**Now this transformation produces exactly the wanted result:**

```
<a>a1</a>
<a>a3</a> 
```

# android - 应用程序在打开数据库时崩溃

> ID：14045530
> 
> 赞同：0
> 
> 时间：2012-12-26T19:55:10.853
> 
> 标签：android, database, sqlite

当我尝试打开我的数据库时，应用程序就崩溃了。我发布了下面的代码，但我已经以相同的方式在同一个应用程序中实现了另一个数据库，我对此没有任何问题。

```
public class projectdatabase {

public static final String KEY_ROWID = "_id";
public static final String PROJECT_NAME = "project_name";
public static final String PROJECT_ID = "project_id";
public static final String PROJECT_DIFFICULTY = "project_difficulty";
public static final String PROJECT_STATUS = "project_status";
public static final String PROJECT_START_DATE = "project_start_date";
public static final String PROJECT_FINISH_DATE = "project_finsish_date";

private static final String DATABASE_NAME = "project_db";
private static final String DATABASE_TABLE = "project_details";
private static final int DATABASE_VERSION = 1;

private DbHelper ourHelper;
private final Context projectdbContext;
private SQLiteDatabase projectDatabase;

private static class DbHelper extends SQLiteOpenHelper {
    public DbHelper(Context context) {

        super(context, DATABASE_NAME, null, DATABASE_VERSION);

    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub

        db.execSQL("CREATE TABLE "+ DATABASE_TABLE + " (" +
                KEY_ROWID + " INTEGER AUTOINCREMENT," +
                PROJECT_NAME + " TEXT NOT NULL," +
                PROJECT_ID + " INTEGER PRIMARY KEY," +
                PROJECT_START_DATE + " TEXT," +
                PROJECT_FINISH_DATE + " TEXT," +
                PROJECT_DIFFICULTY + " TEXT, " +
                PROJECT_STATUS + " TEXT);"
               ); 

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

        db.execSQL("DROP TABLE IF EXIST " + DATABASE_NAME);
        onCreate(db);

    }
}

public projectdatabase (Context c) {                            
     projectdbContext = c;
}

public projectdatabase open() {                                                 //Open database
    ourHelper = new DbHelper(projectdbContext);
    projectDatabase = ourHelper.getWritableDatabase();
    return this;
} 
```

这是Logcat：（我用粗体表示这部分我认为突出了主要问题）

```
12-27 01:22:21.893: E/AndroidRuntime(2214): FATAL EXCEPTION: main
12-27 01:22:21.893: E/AndroidRuntime(2214): java.lang.IllegalStateException: Could not execute method of the activity
12-27 01:22:21.893: E/AndroidRuntime(2214):     at android.view.View$1.onClick(View.java:3044)
12-27 01:22:21.893: E/AndroidRuntime(2214):     at android.view.View.performClick(View.java:3511)
12-27 01:22:21.893: E/AndroidRuntime(2214):     at android.view.View$PerformClick.run(View.java:14105)
12-27 01:22:21.893: E/AndroidRuntime(2214):     at android.os.Handler.handleCallback(Handler.java:605)
12-27 01:22:21.893: E/AndroidRuntime(2214):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-27 01:22:21.893: E/AndroidRuntime(2214):     at android.os.Looper.loop(Looper.java:137)
12-27 01:22:21.893: E/AndroidRuntime(2214):     at android.app.ActivityThread.main(ActivityThread.java:4424)
12-27 01:22:21.893: E/AndroidRuntime(2214):     at java.lang.reflect.Method.invokeNative(Native Method)
12-27 01:22:21.893: E/AndroidRuntime(2214):     at java.lang.reflect.Method.invoke(Method.java:511)
12-27 01:22:21.893: E/AndroidRuntime(2214):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-27 01:22:21.893: E/AndroidRuntime(2214):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-27 01:22:21.893: E/AndroidRuntime(2214):     at dalvik.system.NativeStart.main(Native Method)
12-27 01:22:21.893: E/AndroidRuntime(2214): Caused by: java.lang.reflect.InvocationTargetException
12-27 01:22:21.893: E/AndroidRuntime(2214):     at java.lang.reflect.Method.invokeNative(Native Method)
12-27 01:22:21.893: E/AndroidRuntime(2214):     at java.lang.reflect.Method.invoke(Method.java:511)
12-27 01:22:21.893: E/AndroidRuntime(2214):     at android.view.View$1.onClick(View.java:3039)
12-27 01:22:21.893: E/AndroidRuntime(2214):     ... 11 more
**12-27 01:22:21.893: E/AndroidRuntime(2214): Caused by: android.database.sqlite.SQLiteException: near "AUTOINCREMENT": syntax error: , while compiling: CREATE TABLE project_details (_id INTEGER AUTOINCREMENT,project_name TEXT NOT NULL,project_id INTEGER PRIMARY KEY,project_start_date TEXT,project_finsish_date TEXT,project_difficulty TEXT, project_status TEXT);**
12-27 01:22:21.893: E/AndroidRuntime(2214):     at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
12-27 01:22:21.893: E/AndroidRuntime(2214):     at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:68)
12-27 01:22:21.893: E/AndroidRuntime(2214):     at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:134)
12-27 01:22:21.893: E/AndroidRuntime(2214):     at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361)
12-27 01:22:21.893: E/AndroidRuntime(2214):     at android.database.sqlite.SQLiteStatement.acquireAndLock(SQLiteStatement.java:260)
12-27 01:22:21.893: E/AndroidRuntime(2214):     at android.database.sqlite.SQLiteStatement.executeUpdateDelete(SQLiteStatement.java:84)
12-27 01:22:21.893: E/AndroidRuntime(2214):     at android.database.sqlite.SQLiteDatabase.executeSql(SQLiteDatabase.java:1899)
12-27 01:22:21.893: E/AndroidRuntime(2214):     at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1839)
12-27 01:22:21.893: E/AndroidRuntime(2214):     at com.kk.project.projectdatabase$DbHelper.onCreate(projectdatabase.java:38)
12-27 01:22:21.893: E/AndroidRuntime(2214):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:165)
12-27 01:22:21.893: E/AndroidRuntime(2214):     at com.kk.project.projectdatabase.open(projectdatabase.java:66)
12-27 01:22:21.893: E/AndroidRuntime(2214):     at com.kk.project.Addproject.submit_project(Addproject.java:112)
12-27 01:22:21.893: E/AndroidRuntime(2214):     ... 14 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T20:07:07.553

您不能`AUTOINCREMENT`在不是`PRIMARY KEY`.

但是，您可以使用嵌套的 SELECT 语句或创建自己的触发器来执行相同的操作。请阅读：[SQLite 自增非主键字段](https://stackoverflow.com/q/6982173/1267661)

# bash - BASH 用其他 char 替换 char 来填充一个单词

> ID：14045532
> 
> 赞同：1
> 
> 时间：2012-12-26T19:55:30.987
> 
> 标签：bash, sed, awk

我需要用尽可能多的另一个字符的副本替换一个选定的字符，以填充一个确定的空间（正好 12 个字符）。

例如，将 char '1' 替换为零个或多个 char '0'：

```
ABC1           =>  ABC000000000
ABC1JKL        =>  ABC000000JKL
1JKL           =>  000000000JKL
1000           =>  000000000000
ABCDEFGHIJKL1  =>  ABCDEFGHIJKL
1ABCDEFGHIJKL  =>  ABCDEFGHIJKL
ABCDEFGHIJKL   =>  ABCDEFGHIJKL
1EFG1          =>  undefined (do not bother with this case)
EFG            =>  undefined (do not bother with this case) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:56:34.660

由于每个人都在给出他自己的个人答案，这是我自己的 brew（**100% 纯 bash**），可能是代码高尔夫的一个很好的候选者（也可能是最有效的候选者之一 - 没有循环，没有管道，只有一个子外壳（见帖子结束以摆脱它））：

```
$ string="ABC1"
$ echo "${string/1/$(printf "%.$((13-${#string}))d" 0)}"
ABC000000000 
```

*我赢了吗？*

如果你简直不敢相信这一个班轮工作，你去：

```
$ while read string; do printf "%s%$((13-${#string}))s => %s\n" "$string" '' "${string/1/$(printf "%.$((13-${#string}))d" 0)}"; done < <(printf "%s\n" ABC1 ABC000000000 ABC1JKL 1JKL 1000 ABCDEFGHIJKL1 1ABCDEFGHIJKL ABCDEFGHIJKL 1EFG1 EFG)
ABC1          => ABC000000000
ABC000000000  => ABC000000000
ABC1JKL       => ABC000000JKL
1JKL          => 000000000JKL
1000          => 000000000000
ABCDEFGHIJKL1 => ABCDEFGHIJKL
1ABCDEFGHIJKL => ABCDEFGHIJKL
ABCDEFGHIJKL  => ABCDEFGHIJKL
1EFG1         => 00000000EFG1
EFG           => EFG 
```

### 想在这种方法中摆脱 subshel​​l 吗？很简单，但是你需要一个辅助变量：

```
$ string="ABC1"
$ printf -v aux "%.$((13-${#string}))d" 0
$ echo "${string/1/$aux}"
ABC000000000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T20:32:20.240

awk 中的解决方案：

```
{
  temp = $1
  gsub (/[^1]/, "", temp)
  if (length(temp) == 1) {
    l = 12 - (length ($1) - 1)
    if (l > 0) {
      t = "000000000000"
      sub (/1/, substr (t,0,l), $1)
    }
  }
  print $1
} 
```

以及 bash/sed 中的解决方案：

```
#!/bin/bash

while read n; do
  temp=$(echo $n | sed 's/[^1]//g')
  if [[ ${#temp} == 1 ]]; then
    l=$(( 12 - $(( ${#n} - 1)) ))
    if [[ $l > 0 ]]; then
      t=000000000000
      n=$(echo $n | sed "s/1/${t:0:$l}/")
    fi
  fi
  echo $n
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T20:24:53.877

使用 bash 的参数扩展：

```
#! /bin/bash
inputs=(ABC1             
    ABC1JKL          
    1JKL             
    1000             
    ABCDEFGHIJKL1    
    1ABCDEFGHIJKL    
    ABCDEFGHIJKL     
)

outputs=(ABC000000000
    ABC000000JKL
    000000000JKL
    000000000000
    ABCDEFGHIJKL
    ABCDEFGHIJKL
    ABCDEFGHIJKL
)

for ((i=0; i<${#inputs[@]}; i++)) ; do
    x=${inputs[i]}
    while [[ ${x:12} ]] ; do               # Shorten if too long
        x=${x/1}
    done
    while [[ ${x:11} == '' ]] ; do         # Insert 1's if too short
        x=${x/1/11}
    done
    x=${x//1/0}
    [[ $x == ${outputs[i]} ]] || echo Different $x
done 
```

# ruby-on-rails - 在辅助方法中渲染 Rails 部分

> ID：14045536
> 
> 赞同：2
> 
> 时间：2012-12-26T19:55:44.043
> 
> 标签：ruby-on-rails, forms, ancestry

我是一名 Rails 初学者，在理解 render 方法的工作原理时遇到了一些麻烦。我正在关注这个 railscasts，它与 rails 的祖先插件有关。我无法理解的部分是 RyanB 提供的 nested_forms 辅助方法。

```
def nested_messages(messages)
  messages.map do |message, sub_messages|
  render(message) + content_tag(:div, nested_messages(sub_messages), :class =>     
  "nested_messages")
  end.join.html_safe
end 
```

当调用 render(message) 时，rails 渲染 _message.html.erb 部分。我将如何强制它呈现不同的部分？

我试过这样的事情：

```
def form_nodes(nodes)
 nodes.map do |node, sub_nodes|
   render(:partial => 'mypartial', :locals => node) + content_tag(:div, form_nodes(sub_nodes), :class => "nested_nodes")
 end.join.html_safe
end 
```

但这会导致错误：

```
undefined method `keys' for 
```

我正在使用 Ancestry 创建调查表。这允许用户创建一个调查，然后接受它。所以我想让rails渲染两种不同类型的视图。一种用于创建调查，另一种用于进行调查。所以我想创建一个单独的部分来显示我的祖先节点，但我不确定如何强制 render(message) 方法呈现不同的部分。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:54:49.280

万一有人遇到这个问题。这就是我最终为了让它工作而做的事情。我不知道这是否会被认为是最好的解决方案，但它对我有用。如果我做了一些愚蠢的事情，请随时更正我的代码。

```
def form_nodes(nodes, answers)
     nodes.map do |node, sub_nodes|
       render(:partial => 'folder/mypartial', :locals => { :node => node, :answers => answers, :f => builder}) + content_tag(:div, form_nodes(sub_nodes,answers), :class => "nested_nodes")
     end.join.html_safe
 end 
```

# java - 使用 MediaPlayer 时无法播放声音文件

> ID：14045540
> 
> 赞同：0
> 
> 时间：2012-12-26T19:55:52.453
> 
> 标签：java, android

我正在尝试为我的类创建一个方法，该方法`soundBuzzer()`在调用时会播放一个包含 2s 蜂鸣器声音的 mp3 文件。我已经搜索了很长时间，但是我尝试过的任何方法都不起作用。我能找到的不会在代码中产生语法错误的最接近的事情是：

```
// function to play buzzer_2s.mp3
public void soundBuzzer() {
    MediaPlayer mp = MediaPlayer.create(null, R.raw.buzzer_2s);
    mp.start();

} 
```

有人可以告诉我出了什么问题。当我运行上述方法时，我的应用程序崩溃了。我试过查看 catlog 中的错误，但它们对我没有意义：

```
12-26 14:50:57.491: E/AndroidRuntime(16520): FATAL EXCEPTION: main
12-26 14:50:57.491: E/AndroidRuntime(16520): java.lang.NullPointerException
12-26 14:50:57.491: E/AndroidRuntime(16520):    at android.media.MediaPlayer.create(MediaPlayer.java:731)
12-26 14:50:57.491: E/AndroidRuntime(16520):    at com.example.ultimatescoreclock.ClockTimer.soundBuzzer(ClockTimer.java:108)
12-26 14:50:57.491: E/AndroidRuntime(16520):    at com.example.ultimatescoreclock.ClockTimer.onFinish(ClockTimer.java:40)
12-26 14:50:57.491: E/AndroidRuntime(16520):    at android.os.CountDownTimer$1.handleMessage(CountDownTimer.java:118)
12-26 14:50:57.491: E/AndroidRuntime(16520):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-26 14:50:57.491: E/AndroidRuntime(16520):    at android.os.Looper.loop(Looper.java:137)
12-26 14:50:57.491: E/AndroidRuntime(16520):    at android.app.ActivityThread.main(ActivityThread.java:4424)
12-26 14:50:57.491: E/AndroidRuntime(16520):    at java.lang.reflect.Method.invokeNative(Native Method)
12-26 14:50:57.491: E/AndroidRuntime(16520):    at java.lang.reflect.Method.invoke(Method.java:511)
12-26 14:50:57.491: E/AndroidRuntime(16520):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
12-26 14:50:57.491: E/AndroidRuntime(16520):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
12-26 14:50:57.491: E/AndroidRuntime(16520):    at dalvik.system.NativeStart.main(Native Method)` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:06:47.083

您需要提供`MediaPlayer.create()`a`Context`而不是 null。如果你在`Activity`课堂上这样做，这很容易：

```
MediaPlayer mp = MediaPlayer.create(this, R.raw.buzzer2s); 
```

如果您从不同的类调用它，则需要以`soundBuzzer()`某种方式将上下文传递给。

```
public void soundBuzzer(Context context)
{
    MediaPlayer mp = MediaPlayer.create(context, R.raw.buzzer2s);
    mp.start();
} 
```

如果您不确定 Context 是什么，您可能需要阅读一下。[揭秘 Android 中的上下文](http://www.levinotik.com/2011/10/12/demystifying-context-in-android/)可能是一个不错的开始。

# c - 在 OS X 上使用 crypt_r

> ID：14045543
> 
> 赞同：1
> 
> 时间：2012-12-26T19:56:03.177
> 
> 标签：c, multithreading, gnu, crypt

我想`crypt_r`在 Mac OS X 10.8.2 上使用该功能

```
#define _GNU_SOURCE
#include <crypt.h> 
```

生产

```
crypt.h: No such file or directory 
```

我可以从哪里获得 crypt.h 文件？还是我把它包括错了？

**已编辑的问题 - 具体示例**

```
#include <unistd.h>
#include <stdlib.h>

int main(){
    struct crypt_data * data = (struct crypt_data *) malloc(sizeof(struct crypt_data));
    char * testhash;
    testhash = crypt_r("string", "sa", data);
    free(data);
    return 0;
} 
```

生产

```
gcc test.c -Wall
test.c: In function ‘main’:
test.c:5: error: invalid application of ‘sizeof’ to incomplete type ‘struct crypt_data’ 
test.c:7: warning: implicit declaration of function ‘crypt_r’
test.c:7: warning: assignment makes pointer from integer without a cast 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T20:04:12.167

编辑：`crypt_r()`在 OS X 上不可用。

原答案：

`<crypt.h>`OS X 上的内容由`<unistd.h>`. 所以，而不是

```
#define _GNU_SOURCE
#include <crypt.h> 
```

简单地写

```
#include <unistd.h> 
```

为了访问该`crypt()`功能。

# wpf - 将特殊外壳对象拖放到 WPF

> ID：14045544
> 
> 赞同：0
> 
> 时间：2012-12-26T19:56:06.717
> 
> 标签：wpf, shell, drag-and-drop

我正在实现一个拖放操作，它非常适用于文件、文件夹、链接、URI 等。唯一剩下的是 Windows 特殊快捷方式，例如“程序和功能”控制面板项。这些快捷方式似乎在 shell 中执行窗口，而不是链接或 msc 文件。如何存储这种类型的放置数据并在以后启动引用的项目？（即在我的 WPF 应用程序中为它添加书签） 我想我真正要问的是，我如何解释丢弃数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T13:57:11.773

为了弄清楚这一点，我必须阅读有关 shell 命名空间的工作原理（直到我找到这篇文章才真正知道它被称为“命名空间”）：http: [//msdn.microsoft.com/en-us/library/ windows/桌面/cc144090(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144090(v=vs.85).aspx)

同样，这段代码有助于更好地理解它：http: [//www.codeproject.com/Articles/3551/C-does-Shell-Part-1](http://www.codeproject.com/Articles/3551/C-does-Shell-Part-1)

该站点帮助找到了正确的 .net dll 导入代码： [http ://www.pinvoke.net/](http://www.pinvoke.net/)

# javascript - jQuery empty() 方法使我的 不可点击？

> ID：14045545
> 
> 赞同：1
> 
> 时间：2012-12-26T19:56:07.047
> 
> 标签：javascript, jquery, html, css

我正在尝试使用 HTML/CSS/Javascript/jquery 创建井字游戏。我有一个清除网格内容的重置按钮。按下重置按钮后，网格的内容被清除，但我无法单击我的网格再次选择我的位置。我的重置按钮有以下代码：

```
 $('#reset').click(function(){
   $('.cells').empty();
     //board_make();
 }); 
```

我的网格/板是使用下面的代码创建的。基本上它为网格中的每个单元格创建元素，每个单元格都有一个“单元格”类。

```
function board_make(){
  for (var i = 0; i < 3; i ++){
    array[i] = new Array(3);
    for (var j = 0; j < 3; j ++){
      array[i][j] = "A" ;
      if(j == 2){
        $('.board').append("<div class='cells'><p class='hidden'>"+i.toString()+j.toString()+"</div></br></br></br>");
      }
      else{
      $('.board').append("<div class='cells'><p class='hidden'>"+i.toString()+j.toString()+"</div>");
      }
    }
  }
} 
```

最后，这是每当单击网格中的单元格时执行的代码：

```
$('.cells').click(function(){
    if ($(this).text() != symbol){
      var a = parseInt($(this).text()[0],10);
      var b = parseInt($(this).text()[1],10);
      array[a][b] = symbol;
      $(this).html("<p class='shown'>"+symbol+"</p>");
    }
    else{
      alert("Spot taken. Pick another spot.");
    }
    if ((winner_found === false) && (hor_match() || ver_match() || diag_match())){
        alert("Match found!");
        winner_found = true;
    }  
 }); 
```

这是正在进行的工作的链接以及代码：http: [//jsbin.com/inazog/6/edit](http://jsbin.com/inazog/6/edit)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T20:09:05.013

问题是您使用隐藏文本来指示单元格的行/列，但是在清空单元格时会删除隐藏文本。

```
"<div class='cells'><p class='hidden'>"+i.toString()+j.toString()+"</div>"

var a = parseInt($(this).text()[0],10);  // $(this).text() is "" after you clear the cells.
var b = parseInt($(this).text()[1],10); 
```

请参阅此处以获取代码的固定版本：http: [//jsbin.com/inazog/13/edit](http://jsbin.com/inazog/13/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T19:59:13.240

*编辑*-下面的不是问题。问题似乎是在清除单元格时，您正在清除隐藏在其中的索引值。也就是说，您正在删除隐藏的`<p>`标签。

不要将索引粘贴在那里，而是使用 jQuery`.data()`机制：

```
var cell = ${'<div/>', {'class': 'cells'});
cell.data('x-index', i).data('y-index', j);
$('.board').append(cell); 
```

然后你可以得到单元格的索引值，而不必保留隐藏的元素。

* * *

**不是问题，但不是一个坏主意：**

代替

```
$('.cells').click(function(){ 
```

像这样设置事件处理程序：

```
$('body').on('click', '.cells', function() { ... 
```

当您清空容器时，所有元素都会丢失，事件处理程序也会随之消失。*通过在不*被核化的外部元素上设置处理程序，处理程序在网格重建后仍然有效。

如果您愿意，您还可以将事件处理程序放在“.board”容器上：

```
$('.board').on('click', '.cells', function() { ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T20:25:04.650

这里有很多问题或潜在问题。

*   首先，不要费心事先定义数组的维度，并使用数组文字而不是`new Array`. JavaScript 大多忽略了这一点，它可能会导致奇怪的错误。
*   接下来，使用 DOM！在所有内容上编写 HTML 只是要求丢失事件处理程序。
*   使用数据而不是解析节点的文本内容。或者只是使用您的阵列。
*   重置时您实际上并没有清除数组。这可能是因为`board_make()`再次添加了所有内容；我不知道。最好实际删除整个东西，然后`board_make()`重新制作。也可以在其中添加事件处理程序，并保持一切正常和包含。
*   `</br>`不是有效的 HTML。

所以，考虑到这一点，我[改变了一些东西](http://jsfiddle.net/minitech/yn83X/)，现在它不一样了...... :(但你明白了，对吧？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T20:16:02.490

1.  更改： `$('.cells').click(function()` 以 `$('.board').on('click', '.cells', function()` 使单击事件在重新渲染时处于活动状态。

2.  更改`$('.cells').empty();`并`$('.board').empty();`重新渲染电路板：

    board_make();

[JSBin](http://jsbin.com/inazog/9/edit)

# java - 我是否正确创建了 Java 对象？

> ID：14045547
> 
> 赞同：0
> 
> 时间：2012-12-26T19:56:26.033
> 
> 标签：java, design-patterns, data-structures

**主表**

```
ID COUNTRY_ID STATE_ID 状态数量[%]
1 1 1 已确认 80
2 1 1 暂定 20
3 1 2 已确认 70
4 1 2 暂定 30
5 2 3 已确认 50
6 2 3 暂定 50

```

**国家表**

```
COUNTRY_ID COUNTRY_NAME
1 美国
2 印度

```

**状态表**

```
STATE_ID STATE_NAME
1 纽约        
2 新泽西  
3 德里

```

我有一个用户界面，其中数据需要表示为树，并且用户能够在任何级别更新数量，并且应该相应地分配 -

例如，用户界面看起来像 -

```
全部
    确认总数 200         
    总暂定 100

美国
    确认总数 150
    总暂定 50  

    纽约
        已确认 80
        暂定 20
    新泽西州
        已确认 70
        暂定 30

印度
    确认总数 50
    总暂定 50  

    德里
        已确认 50
        暂定 50

```

如果我们仔细观察，下层表示的数据直接来自数据库，但在上层它们只是来自下层的数据的聚合。

我想我有一个要求，用户可以更新他们需要分配到较低和较高级别的任何级别的总数。

我正在尝试使用以下实现中的前序和后序树遍历[n-ary tree with k-nodes]

[http://vivin.net/2010/01/30/generic-n-ary-tree-in-java/](http://vivin.net/2010/01/30/generic-n-ary-tree-in-java/)

```
class State {
    private String name ;
    private double confirmed ;
    private double tentative ;
    private boolean isUpdated ;

    // getters and setters
}

class Country {
    private String name ;
    private double totalConfirmed ;
    private double totalTentative ;
    private boolean isUpdated ;

    private List<State> states ;
    // getters and setters

    public void getTotalConfirmed () {
        // iterate through the list of states and add all the confirmed values from every state and return ;
    }
}

class ALL {

    private double totalConfirmed ;
    private double totalTentative ;
    private boolean isUpdated ;
    private List<countries> countries;
    // getters and setters

    public void getTotalConfirmed() {
        // iterate through the list of all countries and add all the confirmed values from every country and return ;
    }

    // similary setTotalConfirmed as well
} 
```

问题 -

1.  我的 java 结构是否正确并解决了我的目的？
2.  如果在较低级别和较高级别都有更新，则较低级别的值优先并且永远不会更新，所以我维护一个布尔 isUpdated 变量来查看我们是否需要在较低级别尊重更新？
3.  前序、后序结构对我在所有节点上上下遍历树真的有用吗？因为，如果我在所有级别更新某些内容，它需要分布在所有较低级别，反之亦然。

这是一个简单的表示，但我正在处理一个非常复杂的结构，其中我至少有 5 - 6 级数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T07:31:59.670

您可以将 XML 用于您的树数据结构，我建议您使用 Apache XML [http://xerces.apache.org/xerces-j/api.html](http://xerces.apache.org/xerces-j/api.html)，您可以轻松地遍历整个树。

# jquery - 影响jQuery的元视口？

> ID：14045552
> 
> 赞同：2
> 
> 时间：2012-12-26T19:56:55.310
> 
> 标签：jquery, viewport, meta

所以我目前正在尝试优化我的移动博客。我选择为窗口宽度小于 768 像素的设备添加额外的 CSS 文件的方式。我的页面在桌面模式下为 1022 像素宽，移动版具有流畅的宽度。

所以我在头部的代码是这样的：

```
var mobileSite = false;
if($(window).width() < 768) {
    mobileSite = true;
    $('head').append('<link rel="stylesheet" href="mysite.com/mobile.css" type="text/css" />');
} 
```

到目前为止，它就像一个魅力。接下来是阻止 iPad（尚未在 Andriod 上测试）放大内容部分。在任何一种模式下，iPad 都应该显示整页而不放大。所以我添加了这个：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" /> 
```

没有成功。据我了解，`width=device-width`是告诉浏览器页面的大小，所以浏览器知道它应该缩小多远。我尝试`initial-scale=0.7`了这有帮助，但我想那只是针对我尝试过的特定设备，即 iPad 2。所以我尝试`width=1022`了这有帮助 - iPad 默认显示整页而不放大。但副作用是其他手机iPhone 或 Lumia 920 等设备不再加载移动 CSS，这对我来说很奇怪。但我认为我可以为我的网站的移动和桌面版本使用特定的元数据：

```
var mobileSite = false;
if($(window).width() < 768) {
    mobileSite = true;
    $('head').append('<link rel="stylesheet" href="mysite.com/mobile.css" type="text/css" />');
    $('head').append('<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />');
} else {
    $('head').append('<meta name="viewport" content="width=1022, initial-scale=1.0, maximum-scale=1.0" />');
} 
```

这里的效果一样。移动版不再加载。所以没有添加mobile.css。

哪里有问题？

我想要什么：在窗口宽度大于 768 像素的任何设备上显示我网站的桌面版本，完全缩小并为每个设备窗口宽度<768 像素加载 mobile.css。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-12T15:52:37.950

您可以使用您的视口

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" /> 
```

与 CSS 媒体查询一起以针对某些视口大小。附加的 JSFiddle 可以完成您想要实现的目标，而无需使用 Javascript：http: [//jsfiddle.net/3muzkfdt/](http://jsfiddle.net/3muzkfdt/)

调整结果窗格的大小以查看使用不同 CSS 的页面。

如果您希望将 CSS 模块化为 mobile.css 和 desktop.css，只需按如下方式导入 CSS：

```
@media (max-width: 768px){
   @import 'mobile.css';
}

@media (min-width: 769px){
   @import 'desktop.css';
} 
```

有关媒体查询及其使用的更多信息，请参阅 MDN：[https ://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Media_queries](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Media_queries)

# maven - 常春藤：org.apache.ws.commons.schema#XmlSchema 版本 1.4.3 通过最新版本冲突管理器驱逐版本 1.4.7

> ID：14045554
> 
> 赞同：0
> 
> 时间：2012-12-26T19:57:25.903
> 
> 标签：maven, ivy

我注意到 org.apache.ws.commons.schema 项目中的 XmlScheme 在发生冲突时具有 1.4.3 版本，驱逐版本 1.4.7。这是我的常春藤报告中的信息：

### 修订版：1.4.7（被 1.4.3 驱逐）

```
Home Page      http://ws.apache.org/commons/XmlSchema
Status         release
Publication    20120814141749
Resolver       public
Configurations compile, master(*), compile(*), master
Artifacts size 0 kB (0 kB downloaded, 0 kB in cache)
Licenses       The Apache Software License, Version 2.0
Evicted by     1.4.3 in latest-revision conflict manager 
```

### 修订版 1.4.3

```
Home Page      http://ws.apache.org/commons/XmlSchema
Status         release
Publication    20120823164341
Resolver       public
Configurations compile, master(*), runtime, compile(*), runtime(*), master
Artifacts size 140 kB (140 kB downloaded, 0 kB in cache)
Licenses       The Apache Software License, Version 2.0 
```

请注意 1.4.7 的发布日期是***14-Aug-2012 (at 14:17:49)***和 1.4.3 的发布日期是***23-Aug-2012 (at 16:43:41)***。这将在以后发布 1.4.3 版本。但是，当我查看我的公司 Maven 存储库 (Nexus) 时，它具有以下信息：

```
Artifact:    XmlSchema-1.4.3.jar
Path:        org/apache/ws/commons/schema/XmlSchema/1.4.3   
Modified:    10-12-08 16:22:52 CST
Cache:       repo1-cache

Artifact:    XmlSchema-1.4.3.pom
Path:        org/apache/ws/commons/schema/XmlSchema/1.4.3
Modified:    10-12-08 16:22:52 CST
Cache:       repo1-cache

Artifact:   XmlSchema-1.4.7.jar
Path:       org/apache/ws/commons/schema/XmlSchema/1.4.7
Modified:   22-09-10 16:32:41 CDT
Cache:      repo1-cache

Artifact:   XmlSchema-1.4.7.pom 
Path:       org/apache/ws/commons/schema/XmlSchema/1.4.7
Modified:   22-09-10 16:32:43 CDT
Cache:      repo1-cache 
```

（这`repo1-cache`是一个缓存`http://search.maven.org`）

它是从哪里获得这些*出版*日期的？我的 Maven 存储库中的日期似乎与公共 Maven 存储库中的发布日期一致，但 Ivy 的发布日期完全不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:39:10.240

发布日期来自缓存中工件的元素`publication`属性值。该值由 Ivy 在获取工件时设置，因此是在您的 Ivy 缓存中创建工件副本的日期和时间。您应该能够通过清除 Ivy 缓存来确认这一点，强制 Ivy 再次从您的公司 Nexus 存储库中获取工件，然后查看生成的报告。`info``ivy.xml`

# html - texarea在chrome中粘贴文本时插入换行符

> ID：14045558
> 
> 赞同：2
> 
> 时间：2012-12-26T19:57:58.620
> 
> 标签：html, google-chrome, textarea

我在chrome（linux和windows）中的textareas出现了一种奇怪的行为。

1.  打开这个小提琴：http: [//jsfiddle.net/sonic1980/N4vUS/](http://jsfiddle.net/sonic1980/N4vUS/)
2.  将 3 行文本复制到 textarea 中。
3.  在每行之间出现多个换行符。

为什么？我怎样才能避免这种情况？

textarea 有这种风格：

```
textarea {
    white-space: nowrap;
    height: 300px;
    width: 250px;
}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:06:23.700

我过去曾在 Safari 上看到过这个问题，并认为这是 WebKit 的一个错误。我不知道它是否已针对当前的 Chrome 版本进行了修复，但似乎已针对 Safari 进行了修复。

[https://groups.google.com/forum/?fromgroups=#!topic/codemirror/m0LeyKF6LcE](https://groups.google.com/forum/?fromgroups=#!topic/codemirror/m0LeyKF6LcE)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:40:38.680

快速而肮脏的 jQuery 解决方法，但对我有用。
这会捕获`paste`事件并删除所有空行。

```
$('#myTextArea').bind('paste', function(e){
    window.setTimeout(function(){
        var text = '';
        $($('#myTextArea').val().split('\n')).each(function(i,v){
            v = $.trim(v);
            if (v.length > 0) text+= v+'\n';
        });
        console.log(text);
        $('#myTextArea').val(text);
    },1);
}); 
```

# ruby-on-rails - 为 ruby kata 运行 Guard rspec

> ID：14045560
> 
> 赞同：0
> 
> 时间：2012-12-26T19:57:59.433
> 
> 标签：ruby-on-rails, ruby, rspec

所以我试图将guard rspec 仅用于ruby，而不是用于rails。测试运行良好，但唯一的问题是它只查找 spec.rb 文件，而不查找实际文件。所以我有一个失败的arabic_to_roman.rb 和arabic_to_roman_spec.rb。Guardfile 安装在 roman_numerals_kata 目录下。它只查找 _spec.rb 文件而不是 arabic_to_roman.rb。这是 Guardfile 的样子

```
 1 # A sample Guardfile
  2 # More info at https://github.com/guard/guard#readme
  3 
  4 guard 'rspec' do
  5   watch(%r{^spec/.+_spec\.rb$})
  6   watch(%r{^lib/(.+)\.rb$})     { |m| "spec/lib/#{m[1]}_spec.rb" }
  7   watch('spec/spec_helper.rb')  { "spec" }
  8 
  9   # Rails example
 10   watch(%r{^app/(.+)\.rb$})                           { |m| "spec/#{m[1]}_spec.rb" }
 11   watch(%r{^app/(.*)(\.erb|\.haml)$})                 { |m| "spec/#{m[1]}#     {m[2]}_spec.rb" }
 12   watch(%r{^app/controllers/(.+)_(controller)\.rb$})  { |m| ["spec/routing/#  {m[1]}_routing_spec.rb", "spec/#{m[2]}s/#{m[1]}_#{m[2]}_spec.rb", "spec/acceptance/#{m[1]}_spec.rb"] }
 13   watch(%r{^spec/support/(.+)\.rb$})                  { "spec" }
 14   watch('config/routes.rb')                           { "spec/routing" }
 15   watch('app/controllers/application_controller.rb')  { "spec/controllers" }
 16 
 17   # Capybara features specs
 18   watch(%r{^app/views/(.+)/.*\.(erb|haml)$})          { |m| "spec/features/#{m[1]}_spec.rb" }
 19 
 20   # Turnip features and steps
 21   watch(%r{^spec/acceptance/(.+)\.feature$})
 22   watch(%r{^spec/acceptance/steps/(.+)_steps\.rb$})   { |m| Dir[File.join("**/#{m[1]}.feature")][0] || 'spec/acceptance' }
23 end
24 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T20:47:47.903

你的目录结构是什么？

基于此配置，Guard 会在 lib 目录中查找任何 ruby​​ 文件，并将执行嵌套在 spec/lib/ 中的匹配测试。这些详细信息在保护文件的这一行中：`watch(%r{^lib/(.+)\.rb$}) { |m| "spec/lib/#{m[1]}_spec.rb" }`.

使用这个 Guardfile（与我的标准项目布局相匹配），您应该具有以下文件夹布局：

```
BASE_DIR
├── Guardfile
├── lib
│   ├── README
│   └── arabic_to_roman.rb
├── spec
│   ├── lib
│   │   └── arabic_to_roman_spec.rb
│   └── spec_helper.rb 
```

如果不希望符合标准文件夹布局，另一种方法是像这样修改 Guardfile

```
guard 'rspec' do
  watch(%r{^spec/.+_spec\.rb$})
  watch(%r{^(.+)\.rb$})     { |m| "spec/#{m[1]}_spec.rb" }
  watch('spec/spec_helper.rb')  { "spec" }
end 
```

请注意，第二个`watch`命令是在 basedir 中而不是在`lib/*`

希望这可以帮助 ：）

# jquery - jQuery更改与点击功能交互

> ID：14045562
> 
> 赞同：1
> 
> 时间：2012-12-26T19:58:00.570
> 
> 标签：jquery, click, onchange, interaction

我有一个问题：我做了一个函数来进行一些计算，基于变化函数；现在我希望能够使用点击功能修改作用于（一行）计算结果的因素之一的内容；这个操作应该在不同的行上完成。

每个功能都可以单独运行，但与其他功能没有交互。

点击功能：

```
$("#calc").click(function() {
        var totale = parseFloat($("#subtot1b").val());
        var kgr = parseFloat($("#q1").val());

        var pu = totale / kgr;
        $("#pu1").val(parseFloat(totale / kgr).toFixed(5));
    }); 
```

变化功能：

```
$('#q1,#pu1,#tax1,#tax2,#q2,#pu2').change(function() {
//do something}); 
```

我可以使用一些技巧吗？

非常感谢所有人。

最好的祝愿。

我的示例如下所示：http: [//jsfiddle.net/skipperit/4DXPV/1/](http://jsfiddle.net/skipperit/4DXPV/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:05:21.633

您需要在单击功能结束时重新调用您的更改功能。

声明你的函数：

```
function myChangeFunction() {
   //do something;
   } 
```

`click`行为：

```
$("#calc").click(function() {
    var totale = parseFloat($("#subtot1b").val());
    var kgr = parseFloat($("#q1").val());

    var pu = totale / kgr;
    $("#pu1").val(parseFloat(totale / kgr).toFixed(5));

    myChangeFunction();
}); 
```

`change`行为：

```
$('#q1,#pu1,#tax1,#tax2,#q2,#pu2').change(
   myChangeFunction();
); 
```

# c# - 页面加载时调用 onclick 函数

> ID：14045566
> 
> 赞同：3
> 
> 时间：2012-12-26T19:58:30.007
> 
> 标签：c#, asp.net, onclick

我是 ASP/C# 编程的新手：

我有一个`asp:button`创建如下：

```
<asp:button
    ID="CreateItem"
    ClientIDMode="Static"
    OnClick="btnSave_Click"
    runat="server"
    Text="SAVE">
</asp:button> 
```

在后面的代码中，我有以下内容：

```
btnSave_Click(object sender, EventArgs e)
{
    //Code here to create an Item    
} 
```

我注意到，当我单击按钮后刷新页面时，正在调用此函数。为了验证，我运行了调试器并在`btnSave_Click`函数内部设置了一个断点，并在我刷新页面时验证它确实在函数内部。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T20:02:21.757

单击按钮后在页面刷新时调用它，因为原始按钮单击导致表单被发布。之后刷新页面时，浏览器只是重新发布表单数据，从而再次调用回调函数。

为避免这种情况，您可以简单地输入 url 或在地址栏中突出显示 url，然后按 enter，它会将其视为页面加载。

**编辑**：不完全明白你在问什么。为避免在用户单击刷新时发生这种情况，您可以按照评论中提到的 Oded 进行操作，并在发布后进行重定向：[Post-Redirect-Get with ASP.NET](https://stackoverflow.com/questions/5381162/post-redirect-get-with-asp-net)

从链接：

```
protected void SaveClicked(object sender, EventArgs e)
{
    //save changes to database here

    //Redirect if all went well
    Response.Redirect("~/yourpage.aspx");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:20:22.517

您必须使用[PRG 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)来避免此问题。当您刷新页面时，您的最后一个请求（get 或 Post）再次重新提交到服务器。

解决方案：在点击事件中，在代码之后使用 Response.Redirect

```
btnSave_Click(object sender, EventArgs e)
{
    //Code here to create an Item   
    Response.Redirect(@"~\page.aspx"); 
} 
```

# c++ - 如何用 std::bind 做到这一点？

> ID：14045568
> 
> 赞同：7
> 
> 时间：2012-12-26T19:58:50.850
> 
> 标签：c++, c++03, std-function, stdbind

（***注意：*** *从标签中应该已经清楚了，这严格来说是* ***C++03。*** *是的，我知道，lambda 让所有这些痛苦消失了（并且带来了新的种类，我敢打赌），但这是一个嵌入式系统，使用 90 年代的操作系统版本，我被告知我应该很高兴我有一个 C++03 编译器（GCC4.1.x，BTW）或 C++ 编译器。所以请不要发布 C++11解决方案。真的不需要把它擦进去。当然
，当然`std::bind()`，`std::function()`等等实际上是在 中`std::tr1`，但我编辑了 `tr1`前缀，因为我认为它主要只是给代码增加了噪音。*）

我有一些类似服务器的东西需要注册函数，我需要调整它们以调用某些对象的类似但略有不同的函数。这些函数有不同的参数列表。服务器“知道”，当我尝试注册一个函数时，它只接受一个具有正确签名的函数（`std::function`即，根据需要正确），这取决于作为模板参数传入的一些魔术标签。

这是代码*的草图*：

```
// this I just use
class server {
public:
    template<unsigned int MagicTag>
    bool register_call(typename some_traits_type<MagicTag>::func_type);
};

// this needs to be called from the server
class X {
public:
    bool foo();
    bool bar(std::string&);
    bool baz(int);
};

// this is the glue
class Y {
public:
    Y(X& x) : x_(x) {
        register_call<MAGIC_FOO>(&Y::foo    );
        register_call<MAGIC_BAZ>(&Y::bar, _1);
        register_call<MAGIC_FBZ>(&Y::baz, _1);
    }

private:
    X&                    x_;

    template<unsigned int MagicTag, typename Function>
    bool register_call(Function function) {
        somewhere->register_call<MagicTag>(std::bind( function
                                                    , this ));
    }
    template<unsigned int MagicTag, typename Function, typename PlaceHolder1>
    bool register_call(Function function, PlaceHolder1 place_holder1) {
        somewhere->register_call<MagicTag>(std::bind( function
                                                    , this
                                                    , place_holder1 ));
    }

    int foo()               {return x_.foo()  ? MAGIC_OK : MAGIC_FAILED;}
    int bar(std::string& s) {return x_.bar(s) ? MAGIC_OK : MAGIC_FAILED;}
    int baz(int i)          {return x_.baz(i) ? MAGIC_OK : MAGIC_FAILED;}
}; 
```

这确实有效，但实际上有更多的功能，这样做是一种乏味的复制粘贴工作，侮辱了我的尊严感并产生了臭代码。由于所有这些函数的作用完全相同，唯一的区别是它们调用的函数以及它们有或没有要传递的参数，我应该能够将它们折叠成一个参数化函数，将差异隐藏在`std::bind()`. 如果做不到这一点，我决定首先对所有没有任何参数的函数（如`foo()`）执行此操作，这是绝大多数。

所以我想通过一个完成繁琐部分的函数来路由所有`foo()`-like 函数的调用：`X``Y::call_it`

```
int call_it(std::function<bool()> f) {return f() ? MAGIC_OK : MAGIC_FAILED;} 
```

并将适当的函数`X`作为参数绑定到它：

```
register_call<MAGIC_FOO>(&X::foo); // note the X!

// (this is wrong)
somewhere->register_call<MagicCode>( std::bind( std::bind( &Y::call_it
                                                         , this
                                                         , function )
                                              , std::ref(x_) ); 
```

显然，这是错误的，我解决此问题的所有其他尝试也是如此。（我现在才玩`std::bind()`了 10 周，所以请多多包涵）。最后，我迷失在一个令人难以置信的迷宫中，这些错误信息来自`std::function`模板化的胆量，这些信息会让一个成年人落泪，至少应该养活一个心理医生和他的大家庭一年。

因此，在我[出于纯粹的挫败感](http://twitter.com/tweetsbi/status/283980420020850688)而自杀并使我的孩子成为孤儿之前——我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T22:22:45.617

根据我的收集，您想使用适当绑定`Y::call_it()`的对象进行调用。`std::function`鉴于您的内部函数采用不同数量的参数，因此有必要为`std::function<bool()>`传递其他参数的情况创建一个生成器。假设`X`可以在注册时绑定对象，那么无需额外参数即可直接注册成员函数：

```
template <int Magic, typename RC>
void register_call(RC (X::*member)()) {
    somewhere->register_call<Magic>(
        std::bind(&Y::call_it, this,
             std::function<bool()>(std::bind(member,
                                             std::ref(this->x_)))));
} 
```

当传递一个或多个参数时，有必要`std::function<bool()>`在调用时创建一个对象，因为需要绑定额外的参数。我不认为这可以在没有辅助函数的情况下完成，但可以使用每个参数数量的一个辅助函数来完成：

```
template <typename RC, typename Arg0>
static std::function<bool()>
bind_argument(RC (X::*member)(Arg0), X& x, Arg0 const& arg0) {
    return std::bind(member, std::ref(x), arg0);
}
template <int Magic, typename RC,
          typename Arg0, typename PlaceHolder>
void register_call(RC (X::*member)(Arg0), PlaceHolder pc) {
    somewhere->register_call<Magic>(
        typename some_traits_type<Magic>::type(
            std::bind(&Y::call_it, this,
                      std::bind(&bind_argument<RC, Arg0>, member,
                                std::ref(this->x_), pc))));
} 
```

辅助函数创建一个绑定了附加参数的函数。请注意，被绑定的函数被构造为与寄存器函数所期望的类型相同：这是必要的，例如，创建一个接受附加的、被忽略的参数的函数。

下面是我用来查看是否编译的测试程序。我手头没有带有 TR1 的 C++2003 编译器，而是使用 C++2011 编译器编译了代码。但是，我认为我没有使用任何 C++2011 扩展，这在带有 TR1 的 C++2003 中不可用。

```
#include <functional>

enum {
    MAGIC_OK,
    MAGIC_FAILED,
    MAGIC_FOO,
    MAGIC_BAR,
    MAGIC_FBZ,
    MAGIC_BAZ
};

template <int> struct server_traits;
template <> struct server_traits<MAGIC_FOO> {
    typedef std::function<bool()> type;
};
template <> struct server_traits<MAGIC_BAR> {
    typedef std::function<bool(std::string&)> type;
};
template <> struct server_traits<MAGIC_FBZ> {
    typedef std::function<bool(long)> type;
};
template <> struct server_traits<MAGIC_BAZ> {
    typedef std::function<bool(std::string, long)> type;
};

// this I just use
class server {
public:
    template<unsigned int MagicTag>
    bool register_call(typename server_traits<MagicTag>::type) {
        return true;
    }
};

server  s;
server* somewhere = &s;

// this needs to be called from the server
class X {
public:
    bool foo() { return true; }
    bool bar(std::string&) { return true; }
    bool baz(int) { return true; }
};

// this is the glue
class Y {
public:
    Y(X& x) : x_(x) {
        register_call<MAGIC_FOO>(&X::foo    );
        register_call<MAGIC_BAR>(&X::bar, std::placeholders::_1);
        register_call<MAGIC_FBZ>(&X::baz, std::placeholders::_1);
        register_call<MAGIC_BAZ>(&X::baz, std::placeholders::_2);
    }

private:
    X& x_;

    int call_it(std::function<bool()> f) {
        return f() ? MAGIC_OK : MAGIC_FAILED;
    }

    template <int Magic, typename RC>
    void register_call(RC (X::*member)()) {
        somewhere->register_call<Magic>(
            std::bind(&Y::call_it, this,
                 std::function<bool()>(std::bind(member,
                                                 std::ref(this->x_)))));
    }
    template <typename RC, typename Arg0>
    static std::function<bool()>
    bind_argument(RC (X::*member)(Arg0), X& x, Arg0 const& arg0) {
        return std::bind(member, std::ref(x), arg0);
    }
    template <int Magic, typename RC,
              typename Arg0, typename PlaceHolder>
    void register_call(RC (X::*member)(Arg0), PlaceHolder pc) {
        somewhere->register_call<Magic>(
            typename server_traits<Magic>::type(
                std::bind(&Y::call_it, this,
                          std::bind(&bind_argument<RC, Arg0>, member,
                                    std::ref(this->x_), pc))));
    }
};

int main()
{
    X x;
    Y y(x);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T20:25:39.973

从聊天频道链接来看，您似乎已将问题归结为嵌套绑定无法编译的事实：

```
bind( &Y::call_it, this, bind( &X::foo, ref(x_) ) ) 
```

因为编译器无法推断出内部 bind() 的类型签名（在这种情况下为 function< bool()> ）。这可能会起作用：

```
bind( &Y::call_it, this, function<bool()>( bind( &X::foo, ref(x_) ) ) ) 
```

如果是这样，你会有类似的东西

```
template<unsigned int MagicTag, typename Function >
bool register_call(Function func) {
    somewhere->register_call<MagicTag>(
      bind( &Y::call_it, this, function<bool()>( bind( func, ref(x_)))));
} 
```

虽然我觉得第二个模板参数可能不是必需的。关键思想是在两个 std::bind 之间放置一个 std::function。

# php - 如何通过更新更改 Google_DriveFile 的父级

> ID：14045571
> 
> 赞同：0
> 
> 时间：2012-12-26T19:59:04.033
> 
> 标签：php, google-api, google-drive-api

我正在尝试通过 setParents 更新 Google_DriveFile 对象的父对象，然后在文件上调用更新。（所以我试图将文件移动到不同的文件夹。）从 API 文档（https://developers.google.com/drive/v2/reference/files/update）看来这是可能的，我猜我只是在做错事。任何帮助，将不胜感激。

除了移动文件外，一切都很好。更新调用的返回与原始父级（不是新父级）相同。

```
$files = $service->files->listFiles(array('q' => "'" . Configure::read('GoogleDrive.search_directory_id') . "' in parents"));
//debug($files); exit;

if (!empty($files->items)){
    foreach ($files->items as $file){
        if ($file->mimeType != 'image/jpeg'){
            // move to processed, do nothing else
        }else{
            if (!empty($file->downloadUrl)){
                $request = new Google_HttpRequest($file->downloadUrl, 'GET', null, null);
                $httpRequest = Google_Client::$io->authenticatedRequest($request);
                if ($httpRequest->getResponseHttpCode() == 200) {
                    //file_put_contents(WWW_ROOT . 'drive_downloads' . DS . strtolower($file->title), $httpRequest->getResponseBody());
                    echo 'Writing file: ' . strtolower($file->title);
                } else {
                    echo 'Couldnt get this file!: ' . $file->title;
                }
            }
        }

        // let's move the file to the processed folder here...
        $newParent = new Google_ParentReference(Configure::read('GoogleDrive.will_processed_directory_id'));
        $file->setParents(array($newParent));
        $service->files->update($file->id, $file);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:04:09.950

你不知道，我一提交这个问题，我就找到了答案。我不知道我在想什么。我想我看这个太久了。我不得不改变

```
$newParent = new Google_ParentReference(Configure::read('GoogleDrive.will_processed_directory_id'));
$file->setParents(array($newParent)); 
```

至

```
$newParent = new Google_ParentReference();
$newParent->setId(Configure::read('GoogleDrive.will_processed_directory_id'));
$file->setParents(array($newParent)); 
```

谢谢！

# c# - 瓦片集生成器

> ID：14045575
> 
> 赞同：1
> 
> 时间：2012-12-26T19:59:16.933
> 
> 标签：c#, image-processing, xna, drawing, tiles

我一直在尝试创建一个tileset生成器（将两个图像混合在一起），但我被困在我需要什么样的方法才能使一个纹理/图像重叠到主要的，或者以某种方式在特定点淡出- 或者这是不能自动完成（或不应该完成）的事情？

![瓷砖示例](../Images/a023fcd2a9b38fc760b3e8d0ddf7c6b0.png)

随着绿色图像淡出，蓝色图像应在绿色图像之上淡入以进行平滑过渡。如果我已经有两张图片 - 我该怎么做？

现在，我只能剪掉蓝色的部分。所以剩下的唯一部分是绿色，当我尝试添加叠加层时，它只是很难看，我认为 alpha 水平应该增加（蓝色应该越靠近右下角越蓝）。

有什么想法我应该看的吗？

**我目前的方法：**但目前，这只适用于一个角落，但应该适用于“所有”角落；无法弄清楚是什么原因造成的。

[点入多边形法](https://stackoverflow.com/questions/4243042/c-sharp-point-in-polygon/7123291#7123291)

```
public static Bitmap GenerateTile(Bitmap bitmap, Bitmap copyFrom, int x, int y, int width, int height, Point[] cutoff)
{
        if (bitmap.Size != copyFrom.Size)
            throw new Exception("Invalid image size. Image sizes must match");

        Bitmap bmap = new Bitmap(width, height);
        Bitmap overlay = new Bitmap(width, height);

        Point min, max;
        float alpha;

        // returns minimum x, y and maximum x, y
        GetCorners(cutoff, out min, out max);

        for (int bx = x; bx < (x + width); bx++)
        {
            for (int by = y; by < (y + height); by++)
            {
                if (!IsInPolygon2(cutoff, new Point(bx, by)))
                {
                    bmap.SetPixel(bx, by, bitmap.GetPixel(bx, by));
                }
                else
                {

                    alpha = ((float)((max.X - bx) + (max.Y - by)) / (float)((max.X - min.X) + (max.Y - min.Y)));

                    if (alpha >= 0 && alpha <= 0.5f)
                    {
                        bmap.SetPixel(bx, by, Color.FromArgb((int)((alpha / 0.5f) * 255f), bitmap.GetPixel(bx, by)));
                        overlay.SetPixel(bx, by, Color.FromArgb((int)(255f - ((alpha / 0.5f) * 255f)), copyFrom.GetPixel(bx, by)));
                    }
                }
            }
        }

        using (Graphics g = Graphics.FromImage(bmap))
        {
            g.DrawImageUnscaled(overlay, 0, 0);
        }

        return bmap;
} 
```

我的方法返回以下结果（还不好）： ![产生](../Images/b4030814814ef30984a9a2369b963a17.png)

```
// bottom right corner
points.Add(new Point(image.Width / 2, image.Height));
points.Add(new Point(image.Width, image.Height / 2));
points.Add(new Point(image.Width, image.Height));
points.Add(new Point(image.Width / 2, image.Height));

// rightside
points.Add(new Point(image.Width / 2, image.Height));
points.Add(new Point(image.Width, image.Height));
points.Add(new Point(image.Width, 0));
points.Add(new Point(image.Width / 2, 0));
points.Add(new Point(image.Width / 2, image.Height)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:18:06.287

我会尝试将草和雪纹理混合在一起作为 3D 基元。这样，您就不需要为纹理和淡入淡出方向的每种组合生成单独的位图。为了演示，您可以将以下代码片段粘贴到`Draw`Visual Studio 中默认 XNA 项目的方法中：

```
GraphicsDevice.Clear(Color.CornflowerBlue);
GraphicsDevice.BlendState = BlendState.NonPremultiplied;
effect.TextureEnabled = true;
effect.VertexColorEnabled = true;
effect.World = Matrix.CreateTranslation(new Vector3(-0.5f, -0.5f, 0))
    * Matrix.CreateScale(300)
    * Matrix.CreateTranslation(-Vector3.UnitZ);
effect.Projection = Matrix.CreateOrthographic(GraphicsDevice.Viewport.Width, GraphicsDevice.Viewport.Height, 1, 10000);
effect.View = Matrix.CreateLookAt(Vector3.UnitZ, Vector3.Zero, Vector3.UnitY);

var grassVertices = new[]
{
    new VertexPositionColorTexture(Vector3.Zero, new Color(1f, 1f, 1f, 1f), Vector2.Zero),
    new VertexPositionColorTexture(Vector3.UnitY, new Color(1f, 1f, 1f, 1f), Vector2.UnitY),
    new VertexPositionColorTexture(new Vector3(1, 1, 0), new Color(1f, 1f, 1f, 1f), Vector2.One),
    new VertexPositionColorTexture(Vector3.Zero, new Color(1f, 1f, 1f, 1f), Vector2.Zero),
    new VertexPositionColorTexture(new Vector3(1, 1, 0), new Color(1f, 1f, 1f, 1f), Vector2.One),
    new VertexPositionColorTexture(Vector3.UnitX, new Color(1f, 1f, 1f, 0f), Vector2.UnitX),
};
effect.Texture = grassTexture;
effect.Techniques[0].Passes[0].Apply();
GraphicsDevice.DrawUserPrimitives(PrimitiveType.TriangleList, grassVertices, 0, 2);

var snowVertices = new[]
{
    new VertexPositionColorTexture(Vector3.Zero, new Color(1f, 1f, 1f, 0f), Vector2.Zero),
    new VertexPositionColorTexture(Vector3.UnitY, new Color(1f, 1f, 1f, 0f), Vector2.UnitY),
    new VertexPositionColorTexture(new Vector3(1, 1, 0), new Color(1f, 1f, 1f, 0f), Vector2.One),
    new VertexPositionColorTexture(Vector3.Zero, new Color(1f, 1f, 1f, 0f), Vector2.Zero),
    new VertexPositionColorTexture(new Vector3(1, 1, 0), new Color(1f, 1f, 1f, 0f), Vector2.One),
    new VertexPositionColorTexture(Vector3.UnitX, new Color(1f, 1f, 1f, 1f), Vector2.UnitX),
};
effect.Texture = snowTexture;
effect.Techniques[0].Passes[0].Apply();
GraphicsDevice.DrawUserPrimitives(PrimitiveType.TriangleList, snowVertices, 0, 2); 
```

这是`LoadContent`初始化资源的方法所需要的：

```
grassTexture = Content.Load<Texture2D>("grass");
snowTexture = Content.Load<Texture2D>("snow");
effect = new BasicEffect(GraphicsDevice); 
```

要在其他方向创建平铺淡入淡出，您只需编辑`grassVertices`和`snowVertices`。对于直接向右、向左、向上或向下的渐变，您需要使用四个三角形而不是两个。

# java - Junit没有选择persistance.xml EJB3

> ID：14045576
> 
> 赞同：0
> 
> 时间：2012-12-26T19:59:29.697
> 
> 标签：java, junit, ejb

这是我的结构

```
\jpa
  \src
    \resources
      \META-INF
        \persistence.xml
  \oldtests
    \com
      TestClass.java
\war
  \oldtests
    \com
      TestSuite.java 
```

TestClass 扩展了 BaseTest，我通过测试套件运行它。

在测试本身中，我正在获取我的持久性信息......

```
public class BaseTest extends TestCase {
  protected EntityManagerFactory emf;
  protected EntityManager em;
  @Override
  protected void setUp() throws Exception {
    super.setUp();
    emf = Persistence.createEntityManagerFactory("test");
    em = emf.createEntityManager();
    ...
  }
  ...
} 
```

但是， emf 始终为空，因此在下一行抛出 NPE。这让我相信我的 persistence.xml 出于某种原因没有被拾取。有人可以帮我解决文件需要放在哪里吗？有什么地方我可以确认文件本身没有问题（配置错误）？

我可以根据要求添加持久性单元，但我怀疑这是问题所在，因为我们在其他地方使用它。我也在使用 eclipse 来运行我的测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T20:33:29.860

`src/resources`当您运行 JUnit 测试时，您需要将您的目录添加到您的 Eclipse 类路径中。您可以在项目级别执行此操作，或者仅为您的测试运行程序执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:18:32.553

我需要解决这个问题的步骤如下：

1.  将 IBM 插件 jar 添加到类路径

    我通过创建一个指向的用户库来做到这一点`<WASINSTALL>\plugins\*.jar`

2.  将项目添加到您的 Junit 类路径。

    我这样做是为了`run`>`Debug Configurations`

    *   接下来我选择了junit测试套件配置

    *   接下来我选择了类路径选项卡

    *   最后，我使用高级选项添加了 JPA 项目和用户库。

这似乎解决了我的问题

# visual-studio-2012 - 从任务计划程序调用 ClickOnce 应用程序

> ID：14045579
> 
> 赞同：5
> 
> 时间：2012-12-26T19:59:49.893
> 
> 标签：visual-studio-2012, clickonce, scheduled-tasks

我有一个通过 ClickOnce (VS 2012) 部署到文件共享的 Windows 应用程序。它被配置为在线应用程序（未安装在客户端上）。我只需指向文件共享并双击文件即可通过客户端运行此应用程序。我遇到的问题是将其作为计划任务在客户端上运行（客户端实际上是服务器，Windows Server 2008）。但是，如果我创建了一个调用 ClickOnce 应用程序的批处理文件，则任务计划程序可以成功调用该批处理文件。但我宁愿不必处理创建该批处理文件的额外步骤。

我从任务计划程序得到的错误是：任务计划程序未能在任务“\TaskName”的实例“{d5cc956f-c09e-41dc-a04d-a4276f38704e}”中启动操作“\pathToClickOnceApp”。附加数据：错误值：2147942403。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-11T10:35:55.977

您可以创建一个 appref-ms 文件并将其放在本地任务调度程序启动的位置，或将其放在文件共享上（这可能需要额外的权限，例如“执行”）。

然后让任务调度程序启动这个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-06T07:01:46.860

这是创建可以调用 clickonce 应用程序的任务的示例代码：

```
 using (TaskService ts = new TaskService())
            {
                // Create a new task definition and assign properties
                TaskDefinition td = ts.NewTask();
                td.RegistrationInfo.Description = "runs clickonce app every 10 minutes";

                var trigger = new TimeTrigger();
                trigger.Repetition.Interval = TimeSpan.FromMinutes(10);         
                // Create a trigger that will fire the task at this time every other day

                td.Triggers.Add(trigger);

                // Create an action that will launch the clickonce app
                td.Actions.Add(new ExecAction("rundll32.exe", @"dfshim.dll,ShOpenVerbApplication your_clickonce_app_url/clickonce_appname.application", null));

                // Register the task in the root folder
                ts.RootFolder.RegisterTaskDefinition(@"ClickOnce app", td);

            } 
```

# html - 使用 XPath 解析 HTML 中的数据（在 shell 脚本中）

> ID：14045584
> 
> 赞同：7
> 
> 时间：2012-12-26T20:00:37.123
> 
> 标签：html, xml, parsing, shell, xpath

我正在尝试解析一个相当简单的网页以获取 shell 脚本中的信息。我现在使用的网页是[在这里](http://aruljohn.com/details.php)生成的。例如，我想将有关 Internet 服务提供商的信息提取到 shell 变量中。为此目的使用 xmllint、XMLStarlet 或 xpath 程序之一可能是有意义的。我对 shell 脚本非常熟悉，但我对 XPath 语法和用于实现 XPath 语法的实用程序不熟悉，因此我希望能得到一些正确方向的指点。

这是 shell 脚本的开头：

```
HTMLISPInformation="$(curl --user-agent "Mozilla/5.0" http://aruljohn.com/details.php)"
# ISP="$(<XPath magic goes here.>)" 
```

为方便起见，这里有一个用于在线动态测试 XPath 语法的实用程序：

[http://www.bit-101.com/xpath/](http://www.bit-101.com/xpath/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T21:16:02.467

快速而肮脏的解决方案...

```
xmllint --html -xpath "//table/tbody/tr[6]/td[2]" page.html 
```

您可以使用 Chrome 和开发者工具找到节点的 xpath。检查节点时，右键单击它并选择复制 XPath。

我不会使用太多，这不是很可靠。

您页面上的所有信息都可以在其他地方找到：例如在您自己的 IP 上运行 whois...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-26T21:13:02.017

你可以用我的 [Xidel](http://videlibri.sourceforge.net/xidel.html)。从 cli 中的 html 页面中提取值是其主要目的。虽然它不是一个标准工具，但它是一个单一的、无依赖的二进制文件，无需 root 即可安装/运行。

它可以直接从网页中读取值，而不涉及其他程序。

使用 XPath：

```
 xidel http://aruljohn.com/details.php -e '//td[text()="Internet Provider"]/following-sibling::td' 
```

或者使用模式匹配：

```
 xidel http://aruljohn.com/details.php -e '<td>Internet Provider</td><td>{.}</td>' --hide-variable-names 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-26T20:08:18.713

考虑使用[PhantomJs](http://phantomjs.org/)。它是一个无头 WebKit，允许您在网页上执行 JavaScript/CoffeeScript。我认为它可以帮助您解决问题。

[Pjscrape](http://nrabinowitz.github.com/pjscrape/)是一个基于 PhantomJs 的有用的网页抓取工具。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-04-11T21:10:33.227

## [`xpup`](https://github.com/ericchiang/xpup)

### XML

一个用 Go 编写的命令行 XML 解析工具。例如：

```
$ curl -sL https://www.w3schools.com/xml/note.xml | xpup '/*/body'
Don't forget me this weekend! 
```

或者：

```
$ xpup '/note/from' < <(curl -sL https://www.w3schools.com/xml/note.xml)
Jani 
```

### HTML

下面是解析 HTML 页面的示例：

```
$ xpup '/*/head/title' < <(curl -sL https://example.com/)
Example Domain 
```

### 安装

安装者：`go get github.com/ericchiang/xpup`。

* * *

## [`pup`](https://github.com/ericchiang/pup)

对于 HTML 解析，请尝试[`pup`](https://github.com/ericchiang/pup). 例如：

```
$ pup 'title text{}' -f <(curl -sL https://example.com/)
Example Domain 
```

请参阅 XPath 的相关[功能请求](https://github.com/ericchiang/pup/issues/35)。

### 安装

安装者：`go get github.com/ericchiang/pup`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-17T00:27:24.670

### HTML-XML-utils

[HTML-XML-utils](http://www.w3.org/Tools/HTML-XML-utils/README)包中有许多命令行工具可以解析 HTML 文件（例如`hxselect`匹配 CSS 选择器）。

还有`xpath`一个围绕 Perl 的 XPath 库 ( ) 的命令行包装器`XML::Path`。

相关：在 SU[查询 HTML 元素的命令行工具](https://superuser.com/q/507344/87805)

# r - R将数据附加到循环中的行

> ID：14045586
> 
> 赞同：0
> 
> 时间：2012-12-26T20:00:43.497
> 
> 标签：r, loops

我正在尝试通过循环运行我的数据框，以在每一行上执行一个函数并更新列`est`、、`ll`和`ul`结果。我的数据框是`onch`. `est`除了,`ll`和的结果`ul`对于每一行（大概是最后一次迭代）都相同之外，循环似乎正在工作。任何想法将不胜感激！

```
for (i in 1:nrow(onch)) {
   row <- cbind(onch$c1, onch$c2, onch$c3)
   pr1 <- removal(row)
   a <- summary(pr1)
   onch$est <- a[1]
   b <- confint(pr1)
   onch$ll <- b[1]
   onch$ul <- b[2]
} 
```

数据框如下所示：

> 安琪

```
 site    date      c1   c2  c3   est   ll   ul
1   H1     7/11/12    6     2   1   NA     NA   NA
2   H2     7/15/12    12    4   0   NA     NA   NA 
```

感谢您的帮助！我仍然没有解决 nrow 复制问题，但这有效：

```
for (i in 1:nrow(onch)) {

row <- cbind(onch$c1[i], onch$c2[i], onch$c3[i])
pr1<- removal(row)
a<- summary(pr1)
    onch$est[i] <- a[1]
b <- confint(pr1)
    onch$ll[i] <- b[1]
    onch$ul[i] <- b[1,2]
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:37:33.687

您的行`onch$ll <- b[1]`会覆盖的*整个*列`ll`。`onch`要仅更新特定条目，请使用`onch$ll[ii] <- b[1]`for some index `ii`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:44:28.617

我将对此答案进行编辑以进行解释。与此同时，试试这个。我没有 FSA 包（`install.packages`对我抱怨说它不适用于 R 2.15.2），所以我没有测试它。

```
onch.removal <- lapply(1:nrow(onch),function(x) {
    pr1 <- removal(c(onch[x,"c1"],onch[x,"c2"],onch[x,"c3"]))
    return(list(est=summary(pr1)[[1]],ll=confint(pr1)[1],ul=confint(pr1)[2]))
})
onch <- data.frame(onch,onch.removal) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T20:09:27.947

我认为您可能会从以下问题和答案中受益：[如何使用嵌套的 while-loop 优化以下代码？多核选项？](https://stackoverflow.com/questions/13475039/how-to-optimize-the-following-code-with-nested-while-loop-multicore-an-option)

这个问题讨论了许多相关原则，还指出了如何优化（矢量化）代码以改进执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-27T20:46:33.610

使用 有一个快速的解决方案`data.table`，不需要循环。

```
library(data.table)
library(FSA)

setDT(onch)

onch[, v_est := summary(removal(c(c1, c2, c3)))[1] , by= site]
onch[, v_ll := confint(removal(c(c1, c2, c3)))[1] , by= site]
onch[, v_ul := confint(removal(c(c1, c2, c3)))[1,2] , by= site] 
```

# .net - 尝试仅替换文本框中的一个字符串实例

> ID：14045587
> 
> 赞同：2
> 
> 时间：2012-12-26T20:00:51.677
> 
> 标签：.net, vb.net, string, winforms, visual-studio-2010

在我的应用程序中，我使用了一个名为 Fastcoloredtextbox 的文本框控件，尽管因为它继承了文本框控件，所以它应该是相同的解决方案。

我添加了用户在我的应用程序中单击一个单词的功能，然后它会打开一个打开的文件对话框，然后用户可以选择一个文件并将单击的单词替换为文件名。这就是我想要完成的，除了一个问题......它用这个文件名替换文本框中相同单词的每个实例。我不确定如何只让它替换被点击的单词。任何帮助，将不胜感激。

```
Private Sub tb_VisualMarkerClick(sender As Object, e As VisualMarkerEventArgs)
Dim page As RadPageViewPage = RadPageView1.SelectedPage
Dim txt As FastColoredTextBox = TryCast(page.Controls(0), FastColoredTextBox)
Dim ofd As New OpenFileDialog
ofd.FileName = ""
ofd.Filter = "Image Files (*.bmp, *.jpg)|*.bmp;*.jpg"
If ofd.ShowDialog = DialogResult.OK 
    Then
        Dim ClickedWord As String = (TryCast(e.Marker, RangeMarker).range.Text)
        txt.Text = txt.Text.Replace(ClickedWord, ofd.FileName)
    End If
End Sub 
```

clickedword 字符串是被点击的实际单词。

**编辑：我想出了一个解决方案，该解决方案在单击项目的位置开始选择并选择完整的单词。当它被选中时，可以插入文本，使其替换选定的单词。感谢那些提供建议的人。**

```
 Private Sub tb_VisualMarkerClick(sender As Object, e As VisualMarkerEventArgs)
    Dim page As RadPageViewPage = RadPageView1.SelectedPage
    Dim txt As FastColoredTextBox = TryCast(page.Controls(0), FastColoredTextBox)
    txt.Invalidate()
    txt.Selection.Start = New Place((TryCast(e.Marker, RangeMarker).range).Start.iChar, (TryCast(e.Marker, RangeMarker).range).Start.iLine)
    txt.SelectionLength = (TryCast(e.Marker, RangeMarker).range).Text.Length
    Dim ClickedWord As String = (TryCast(e.Marker, RangeMarker).range.Text)
    If ClickedWord = "path" Then
        Dim ofd As New OpenFileDialog
        ofd.FileName = ""
        ofd.Filter = "Image Files (*.bmp, *.jpg)|*.bmp;*.jpg"
        If ofd.ShowDialog = DialogResult.OK Then

            txt.InsertText(ofd.FileName)

        End If
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:16:59.343

您需要使用 RangeMarker 来获取文本的实际位置（字符串中的位置）以及文本本身。

一旦你有了文本的开始位置，你就可以使用 Substring。就像是...

```
Dim ClickedWord As String = (TryCast(e.Marker, RangeMarker).range.Text)
Dim StartPosition As String = (TryCast(e.Marker, RangeMarker).range.Start)
txt.Text = txt.Text.Substring(0, StartPosition) + ofd.FileName + txt.Text.Substring(StartPosition + ClickedWord.Length) 
```

**注意**.range.Start 只是我的一个猜测，您必须检查范围实际代表的任何文档以获得正确的属性名称。

# string - 为什么最长公共子序列的这种 DP 解决方案可以正常工作？

> ID：14045590
> 
> 赞同：3
> 
> 时间：2012-12-26T20:00:58.080
> 
> 标签：string, algorithm, data-structures, dynamic-programming, lcs

关于**[最长公共子序列问题](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)**，所有在线资源中介绍的基本算法对我来说都很清楚。此处描述了此算法：

![在此处输入图像描述](../Images/eb17f5eabea69bfde2e5b05f6c668311.png)

我不清楚的是为算法的动态编程版本提出的算法，它无处不在，如下所示：

```
function LCSLength(X[1..m], Y[1..n])  
    C = array(0..m, 0..n)  
    for i := 0..m  
       C[i,0] = 0  
    for j := 0..n  
       C[0,j] = 0  
    for i := 1..m  
        for j := 1..n  
            if X[i] = Y[j]  
                C[i,j] := C[i-1,j-1] + 1  //Here shouldn't we change i?
            else  
                C[i,j] := max(C[i,j-1], C[i-1,j])  
    return C[m,n] 
```

但是我看不出DP版本是如何等效的。令我困扰的是，在 DP 版本中，当我们`X[i] == Y[j]`在内循环中发现时，我们继续计算 DP 相同`i`；即内部循环的其余部分保持与相同的比较`X[i]`。既然递归算法说我们应该评估 C[i - 1, j - 1]，我们不应该继续下一个`i`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T20:12:31.057

动态规划背后的想法是**反向**评估递归函数，从基本情况开始，迭代地为越来越大的子问题建立答案，直到为整个输入问题计算出答案。

如果您正在递归地评估此函数，那么在您提到的情况下，您绝对会通过递减 i 和 j 来递归。但是，在动态编程版本中，您不是从 LCS[i, j] 开始并尝试通过评估 LCS[i-1, j-1] 来评估它。您从 LCS[i-1, j-1] 开始并使用它来评估 LCS[i, j]。

具体来说，这段代码所做的是首先通过直接使用基本案例解决方案为所有 i 和 j 计算 LCS[i, 0] 和 LCS[0, j]。接下来，它使用所有 j 都知道 LCS[0, j] 的事实来计算所有 j 的 LCS[1, j]。然后它使用所有 j 都知道 LCS[1, j] 的事实来计算所有 j 的 LCS[2, j]，依此类推。

结果，是时候计算 LCS[i, j] 并且您的特定情况适用，该算法不需要递减 i 或 j 并递归地向下下降。它已经计算了 LCS[i-1, j-1]，因此它可以读取该值并继续构建表中的其余值。

视觉上最容易看到这一点。假设您要查找字符串“canon”和“annie”的 LCS。我们从这个 2D 表开始：

```
 A N N I E
  . . . . . .
C . . . . . .
A . . . . . .
N . . . . . .
O . . . . . .
N . . . . . . 
```

最初，我们为所有 i 和 j 设置 LCS[0, j] = LCS[i, 0] = 0：

```
 A N N I E
  0 0 0 0 0 0
C 0 . . . . .
A 0 . . . . .
N 0 . . . . .
O 0 . . . . .
N 0 . . . . . 
```

现在，我们将逐行浏览此表，并使用原始问题中描述的重复来填写缺失的条目。遍历第一行时，我们将比较字母 C 和单词“ANNIE”中的所有字母。我们永远找不到匹配项，所以我们总是使用递归 LCS[i, j] = max(LCS[i - 1, j] + LCS[i, j - 1])。这总是评估为零，所以我们得到这个：

```
 A N N I E
  0 0 0 0 0 0
C 0 0 0 0 0 0
A 0 . . . . .
N 0 . . . . .
O 0 . . . . .
N 0 . . . . . 
```

这是有道理的，因为该表的第一行表示字符串 C 的 LCS 的长度以及 ANNIE 的所有前缀。

在下一行中，我们将尝试查找字符串 CA 的 LCS 和 ANNIE 的所有后缀。我们考虑的第一个条目匹配 A 和 A。由于这是一个匹配，我们使用递归 LCS[i, j] = 1 + LCS[i - 1, j - 1]，其计算结果为 1：

```
 A N N I E
  0 0 0 0 0 0
C 0 0 0 0 0 0
A 0 1 . . . .
N 0 . . . . .
O 0 . . . . .
N 0 . . . . . 
```

同样，我们可以通过注意“CA”和“A”的 LCS 是长度为 1 的序列 A 来检查这一点。

这里重要的细节是**我们在这里不递减 i 或 j。** 我们仍然需要填写这一行的其余部分，因此我们将继续前进。

对于这一行的其余条目，我们将 A 与 ANNIE 的每个字符进行比较，发现它不匹配。因此，我们将使用递归 LCS[i, j] = max(LCS[i-1, j], LCS[i, j-1])，它总是通过从其余部分中提取 1 来评估为 1行的。这显示在这里：

```
 A N N I E
  0 0 0 0 0 0
C 0 0 0 0 0 0
A 0 1 1 1 1 1
N 0 . . . . .
O 0 . . . . .
N 0 . . . . . 
```

继续下一行为我们提供了以下信息：

```
 A N N I E
  0 0 0 0 0 0
C 0 0 0 0 0 0
A 0 1 1 1 1 1
N 0 1 2 2 2 2
O 0 . . . . .
N 0 . . . . . 
```

同样，这是有道理的。“CAN”和“A”的LCS就是“A”，“CAN”和“AN”的LCS就是“AN”等等。

我们可以通过表的其余部分重复此操作以找到此结果表：

```
 A N N I E
  0 0 0 0 0 0
C 0 0 0 0 0 0
A 0 1 1 1 1 1
N 0 1 2 2 2 2
O 0 1 2 2 2 2
N 0 1 2 3 3 3 
```

我们知道 LCS 的长度为 3，这是正确的。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T20:13:35.133

C[i][j] 的值**仅**取决于 C[i][j-1]、C[i-1][j] 和 C[i-1][j-1]。因此，当我们在内循环中得到 C[i][j] 的值时，我们可以继续计算 C[i][j+1]，因为 C[i][j] 和 C[i-1][ j+1] 和 C[i-1][j] 都已经计算过了。

# objective-c - 如何找到 NSArray 的 NSInvalidArgumentException 的位置？

> ID：14045593
> 
> 赞同：10
> 
> 时间：2012-12-26T20:01:12.023
> 
> 标签：objective-c, ios, xcode

Xcode 抛出异常：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“ *** -[__NSArrayM insertObject:atIndex:]: object cannot be nil”

但是在调试模式下，它不会在发生异常的地方停止。它结束于

```
return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); 
```

带有消息“SIGABRT”。堆栈跟踪仅显示此“主要”。

有没有办法找出代码中试图将 nil 对象插入数组的位置？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-26T20:03:47.240

在您的项目中，转到断点导航器，单击**[+]**按钮并**添加异常断点**...。单击**Exception > All**和**Break > On Throw**，单击**[Done]**。

有了这个设置，Xcode 应该会在项目中引发异常的地方中断。您可能需要在堆栈中向下走一两帧才能找到您的代码。

# ruby-on-rails - Rails中的User_ID外键NULL

> ID：14045594
> 
> 赞同：1
> 
> 时间：2012-12-26T20:01:13.410
> 
> 标签：ruby-on-rails, ruby-on-rails-3, database-design

我很确定我已经做对了，但外键仍然是 NULL

我有 USER 和 WEBSITE 作为两个具有以下型号的控制器

用户.rb

```
has_many :websites 
```

网站.rb

```
belongs_to :user 
```

我也通过迁移在网站表中添加了 user_id 外键，也可以看到它。唯一的问题是，当我创建 WEBSITE 时，user_id 外键被保存为 NULL 而不是用户的 ID

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:22:44.307

不确定，可能是因为你没有正确运行它。请重新检查以下所有条件。

1.  user_id 必须在网站表中。要添加迁移，您应该运行`rails g migration AddUserIdToZombies user_id:integer`，然后`rake db:migrate`
2.  为确保 user_id 必须与网站表一起存在，请进行验证。
3.  要自动分配 user_id，您应该执行类似的操作`u = User.find 1` `u.websites.create(attr: 'value')`

仅供参考：Rails 不使用外键概念。这意味着他们没有将链接放入数据库中。它们只是提供链接模型的抽象方式。

# java - 为什么结果集为空

> ID：14045601
> 
> 赞同：0
> 
> 时间：2012-12-26T20:01:56.740
> 
> 标签：java, database, jdbc, resultset

```
String name = request.getParameter("type");
String queryString = "SELECT * FROM Customer WHERE TYPE='Provider';";

rs = statement.executeQuery(queryString);
while(rs.next()) out.print(rs.getString(2)); 
```

什么都不打印，为什么？我检查了数据库连接，但我已成功连接到它。可能是什么问题？

jsp中的完整代码。我认为整个代码存在问题。这里有什么问题？

```
<%@page import="java.sql.Statement"%>
<%@page import="java.sql.ResultSet"%>
<%@page import="java.sql.DriverManager"%>
<%@page import="java.sql.Connection"%>
<head> 
        <meta charset="utf-8">

        <title>GET CUSTOMER LIST</title><meta name="keywords" content="contact, direction,"><meta name="description" content="">

        <meta name="HandheldFriendly" content="True">
        <meta name="MobileOptimized" content="320">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <meta name="format-detection" content="telephone=no"> 
        <meta name="format-detection" content="address=no">  

        <link rel="canonical" href="#">

        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://www.onbile.com/nbproject/private/sushi/media/icon/apple-touch-icon.png">
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://www.onbile.com/nbproject/private/sushi/media/icon/apple-touch-icon.png">
        <link rel="apple-touch-icon-precomposed" href="http://www.onbile.com/nbproject/private/sushi/media/icon/apple-touch-icon-precomposed.png">
        <link rel="shortcut icon" href="http://www.onbile.com/nbproject/private/sushi/media/icon/apple-touch-icon.png">

        <!-- Mobile IE ows us to activate ClearType technology for smoothing fonts for easy reading -->
        <meta http-equiv="cleartype" content="on">

                <link rel="shortcut icon" href="http://www.onbile.com/favicon.ico">     
        <style type="text/css" media="screen">
            /*reset*/
            html, body { margin: 0; padding: 0; border: 0; }
            body { font-family:Helvetica, Arial, sans-serif; line-height:1.5; font-size:16px; background: #fff; color: #333; word-wrap: break-word; -webkit-text-size-adjust: none; }
            h1, h2, h3, h4, h5, h6{ font-weight: normal; margin: 0;}
            p img { float: left; margin: 0 10px 5px 0; padding: 0; }
            img { border: 0; max-width: 100%; }
            table { width:auto; border-collapse: collapse;border-spacing: 0; }
            article, aside, details, figcaption, figure, footer, header, hgroup, nav, section { display: block; }

            /*Non-semantic helper classes*/
            .ir { display: block; border: 0; text-indent: -999em; overflow: hidden; background-color: transparent; background-repeat: no-repeat; text-align: left; direction: ltr; }
            .ir br { display: none; }

            @font-face {
                font-family: 'FagoCoRegular';
                src: url('http://www.onbile.com/nbproject/private/sushi/media/font/fagoco-webfont.eot');
                src: url('http://www.onbile.com/nbproject/private/sushi/media/font/fagoco-webfont.eot?#iefix') format('embedded-opentype'),
                     url('http://www.onbile.com/nbproject/private/sushi/media/font/fagoco-webfont.woff') format('woff'),
                     url('http://www.onbile.com/nbproject/private/sushi/media/font/fagoco-webfont.ttf') format('truetype'),
                     url('http://www.onbile.com/nbproject/private/sushi/media/font/fagoco-webfont.svg#') format('svg');
                font-weight: normal;
                font-style: normal;
            }
            @font-face {
                font-family: 'FagoCoBlackRegular';
                src: url('http://www.onbile.com/nbproject/private/sushi/media/font/fagoco-black-webfont.eot');
                src: url('http://www.onbile.com/nbproject/private/sushi/media/font/fagoco-black-webfont.eot?#iefix') format('embedded-opentype'),
                     url('http://www.onbile.com/nbproject/private/sushi/media/font/fagoco-black-webfont.woff') format('woff'),
                     url('http://www.onbile.com/nbproject/private/sushi/media/font/fagoco-black-webfont.ttf') format('truetype'),
                     url('http://www.onbile.com/nbproject/private/sushi/media/font/fagoco-black-webfont.svg#FagoCoBlackRegular') format('svg');
                font-weight: normal;
                font-style: normal;
            }

            body {
                font-family: 'FagoCoRegular';
            }
            h2.title1 {
                padding: 22px 15px 20px 15px;
                line-height: 0.9em;
            }
            .title2 {
                line-height: 0.9em;
            }
            .title4 {
                letter-spacing: -0.05em;
                line-height: 1.2em;
            }
            img.image {
                padding: 1px 0;
                display: block;
                width: 100%;
            }
            .imgcontent {
                position: relative;
                overflow: hidden;
                border-top-width: 1px;
                border-top-style: solid;
                border-bottom-width: 1px;
                border-bottom-style: solid;
            }
            img.image.left {
                float: left;
            }
            img.image.right {
                float: right;
            }
            img.image.center {
                margin: 0 auto;
            }
            .order {
                margin-bottom: 1px;
                border-bottom-style: solid;
                border-bottom-width: 1px;
                display: block;
                padding: 4px;
            }
        </style>

        <link rel="stylesheet" href="http://www.onbile.com/assets/websites/final/052/333/052333/css/52333_f.css"><link rel="stylesheet" href="http://www.onbile.com/assets/websites/final/052/333/052333/css/52333_c.css">      
        <!--[if gte IE 8.0]>
        <style type="text/css">
            .t-sushi-p-gallery-content .list-items li {
                width: 46%;
            }
        </style>
        <![endif]-->

        <script src="http://www.onbile.com/nbproject/private/sushi//js/modernizr.custom.09105.js"></script>

    </head> 

    <body>

        <div id="container">

        <header class="t-sushi-p-header int">
            <div class="header">
                <span class="adorn"></span>
                <a href="http://tekirmobile.onbile.com/" class="btn back ir">back</a>
                <h1 class=""><a href="http://tekirmobile.onbile.com/" id="logotype"><img src="http://www.onbile.com/assets/websites/final/052/333/052333/smooth_logo.png" class=" center" style="width:60%;"></a></h1>              <a href="#" class="btn menu ir">menu</a>
                <a href="#container" class="btn menu ir on">menu</a>
            </div>
        </header>

    <header class="t-sushi-p-subtitle">
        <p title="My own profile" class="subtitle edit_element" id="1688529_subtitle" type="text">My own profile</p>
    </header>

        <style>
            #container:target nav.t-sushi-p-menu.acor ul {
                height: 160px;
            }
        </style>
        <nav class="t-sushi-p-menu acor">
            <ul>
                <li class="selected"><a href="http://127.0.0.1/getCustomerList.html" class="menu">GET CUSTOMER LIST</a></li><li class=""><a href="http://tekirmobile.onbile.com//about-me" class="menu">MONITOR CASH FLOW</a></li><li class=""><a href="http://tekirmobile.onbile.com//curriculum-vitae" class="menu">GET CUSTOMER STATE INFO</a></li><li class=""><a href="http://tekirmobile.onbile.com//photo-gallery" class="menu">MONITOR FINANCIAL TRANSACTIONS</a></li><li class=""><a href="http://tekirmobile.onbile.com//blog" class="menu">GET PAYMENT PLAN</a></li>         </ul>
        </nav>

    <div class="t-sushi-p-contact-content">
        <!-- <h2 title="Contact with Mike Stain" class="title1 edit_element" id='1688531_titles' type='text'>Contact with Mike Stain</h2> -->
        <h2 class="title1">GET CUSTOMER LIST</h2>
<form name="input" action="/TekirMobile/getCustomerList" method="post">
        <table>
<div class="prop">

<span class="value "><select name="type" class="middle" size="1">   <option value="All">All</option>
    <option value="Customer" selected="selected">Customer</option>
    <option value="Provider">Provider</option>
    <option value="Bank">Bank</option>
    <option value="Foundation">Foundation</option>
    <option value="Agent">Agent</option>
    <option value="Branch">Branch</option>
    <option value="Contact">Contact</option>
    <option value="Related">Related</option>
    <option value="Personnel">Personnel</option>
</select>
        </span>
    </div>

</table>
<br />
<input type="submit" value="Search" name="submit">

 <% 

try {
/* Create string of connection url within specified format with machine name, 
port number and database name. Here machine name id localhost and 
database name is usermaster. */ 
String connectionURL = "jdbc:mysql://localhost:3306/TekirMobile"; 

// declare a connection by using Connection interface 
Connection connection = null; 

// Load JBBC driver "com.mysql.jdbc.Driver" 
Class.forName("com.mysql.jdbc.Driver").newInstance(); 

/* Create a connection by using getConnection() method that takes parameters of 
string type connection url, user name and password to connect to database. */ 
connection = DriverManager.getConnection(connectionURL, "root", "fenderpass");

 ResultSet rs = null;
 Statement statement = null;

if(request.getParameter("submit")!=null)
 {

String name = request.getParameter("type");
String queryString = "SELECT * FROM Customer WHERE TYPE='Provider'";

out.print(queryString);

rs = statement.executeQuery(queryString);
 for (int i = 1; rs.next(); i++) { 
    out.println("row=" + i + ": " + rs.getString(2));
} 

}

// check weather connection is established or not by isClosed() method 
if(!connection.isClosed())
%>
<font size="+3" color="green"></b>
<% 
connection.close();
}
catch(Exception ex){

%>
</font>
<font size="+3" color="red"></b>
<%
}
%>

</form>

                </div>

    </div>

    <footer class="t-sushi-p-footer">

        <h5 title="" class="title5 edit_element" id="1688532_title_contact" type="text"></h5>
        <div class="small edit_element" id="1688532_contact_description" type="textarea"><p>©2012 | License | Privacy | Özgür Yaz?l?m&nbsp;</p></div>
    </footer>

    <div class="t-sushi-p-social">
        <ul class="social">

            <li class="facebook" id="facebook_elem"> 
                    <a href="http://www.facebook.com/" class="" target="_blank">Facebook</a>
                   </li><li class="twitter" id="twitter_elem"> 
                    <a href="http://www.twitter.com/" class="" target="_blank">Twitter</a>
                   </li><li class="linkedin" style="display:none" id="linkedin_elem"> 
                    <a href="http://www.linkedin.com/" class="" target="_blank">Your Linkedin</a>
                   </li><li class="skype" style="display:none" id="skype_elem"> 
                    <a href="http://www.skype.com/" class="" target="_blank">Your Skype</a>
                   </li><li class="flickr" style="display:none" id="flickr_elem"> 
                    <a href="http://www.flickr.com/" class="" target="_blank">Your Flickr</a>
                   </li><li class="youtube" style="display:none" id="youtube_elem"> 
                    <a href="http://www.youtube.com/" class="" target="_blank">Your Youtube</a>
                   </li><li class="google" style="display:none" id="google_elem"> 
                    <a href="http://www.google.com/" class="" target="_blank">Your Google</a>
                   </li><li class="email" style="display:none" id="email_elem"> 
                    <a href="mailto:" class="" target="_blank"></a>
                   </li>            
        </ul>
    </div>

        </div> <!--! end of #container -->

                        <div style="height:51px;width:100%;clear:both">&nbsp;<br></div>  
                        <div style="position:fixed; bottom:0px;margin-left:auto;margin-right:auto">
                    <!--qzkqc-->
</div>

                        </div>
                    </body> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T20:02:49.060

很可能是因为没有返回结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T20:04:53.433

我会尝试一些事情：

删除查询末尾的分号。传递给语句的 SQL 查询不需要结束分号。

将显示的最后一行更改为

```
for (int i = 1; rs.next(); i++) { 
    out.println("row=" + i + ": " + rs.getString(2));
} 
```

通过这种方式，您可以判断是否根本没有返回任何行，或者返回的所有行是否都是空字符串。

您的语句永远不会被初始化，尝试使用它会导致 NullPointerException。很可能您抛出了一个您没有看到的异常，因为它在 catch 块中被吃掉而没有任何痕迹。编辑您的 catch 块以显示异常的堆栈跟踪，如下所示：

```
}
catch(Exception ex){
    ex.printStackTrace();
} 
```

# fluent-nhibernate - 从列表“自定义类型不实现 UserCollectionType”继承的类的流畅 NHibernate 映射

> ID：14045602
> 
> 赞同：1
> 
> 时间：2012-12-26T20:02:01.693
> 
> 标签：fluent-nhibernate, fluent-nhibernate-mapping

我在使用 Fluent NHibernate 时遇到了一对多关系的问题。我已经阅读了以下[问题](https://stackoverflow.com/questions/1208315/fluent-nhibernate-with-bindinglistt)，但我认为我的情况比这更简单，所以也许我可以避免实现 IUserCollectionType。

我有一个项目，一个项目有 ProductBacklog。ProductBacklog 是 UserStory 的列表。

```
public class Project
{
    public virtual int Id { get; set; }

    public virtual ProductBacklog Backlog { get; protected set; }
}

public class ProductBacklog : List<UserStory>
{
} 
```

当我尝试映射时：

```
public class ProjectMapping : ClassMap<Project>
{
    public ProjectMapping()
    {
        Id(x => x.Id).GeneratedBy.Identity();
        HasMany(x => x.Backlog).KeyColumn("ProjectId");
    }
} 
```

我收到以下错误：

> NHibernate.MappingException：自定义类型未实现 UserCollectionType：ScrumBoard.Domain.ProductBacklog

如果 Project.Backlog 是 List 而不是 ProductBacklog 类型，它将起作用：

```
public class Project
{
    public virtual int Id { get; set; }

    public virtual List<UserStory> Backlog { get; protected set; }
} 
```

有什么方法可以告诉 Fluent NHibernate 如何在不实现 IUserCollectionType 的情况下进行映射？

提前致谢！

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2012-12-31T14:53:53.177

我认为您混淆了记录集合和单个记录之间的区别。

```
This is creating a reference to a single record of type ProductBacklog.
public virtual ProductBacklog Backlog { get; protected set; } 

Where this is creating a collection of records.
public virtual List<UserStory> Backlog { get; protected set; } 
```

要执行您正在尝试的操作，请尝试以下操作：

```
public class Project
{
    public virtual int Id { get; set; }

    public virtual List<ProductBacklog> Backlog { get; set; }
}

public class ProductBacklog : UserStory
{
} 
```

但是，您最好的做法可能是您已经发现的以下内容：

```
public virtual List<UserStory> Backlog { get; set; } 
```

希望这会有所帮助。

# java - 从另一个 Runnable 内部运行 Runnable 的 Java 不起作用

> ID：14045605
> 
> 赞同：2
> 
> 时间：2012-12-26T20:02:23.370
> 
> 标签：java, swing, user-interface, runnable, swingworker

为什么以下代码不起作用？基本上，这是一个更难的程序的简化版本，在该程序中，我试图制作一个可运行的初始屏幕，其中包含一些选项，然后将按钮链接到不同的可运行文件，但这并没有按我预期的那样运行。

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class Runnables {
    static Runnable runone;
    static Runnable runtwo;
    static JFrame frame = new JFrame();
    static JButton button1 = new JButton("Initial screen");
    static JButton button2 = new JButton("After button click screen");

    public static void main(String[] args) {
        runone = new Runnable() {
            @Override
            public void run() {
                frame.removeAll();
                frame.revalidate();
                frame.repaint();
                frame.add(button2);
            }

        };
        runtwo = new Runnable() {
            @Override
            public void run() {
                frame.setSize(800, 600);
                frame.setVisible(true);
                button1.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent arg0) {
                        runone.run();
                        System.out
                                .println("This is performed, but the button doesnt change");
                    }
                });
                frame.add(button1);
            }
        };
        runtwo.run();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T20:40:32.240

没有什么特别的东西`Runnable`可以阻止它工作。正如您的代码示例所代表的那样，以下内容是等效的：

```
public void actionPerformed(ActionEvent arg0) {
    runone.run();
    System.out.println("This is performed, but the button doesnt change");
} 
```

和

```
public void actionPerformed(ActionEvent arg0) {
    frame.removeAll();
    frame.revalidate();
    frame.repaint();
    frame.add(button2);
    System.out.println("This is performed, but the button doesnt change");
} 
```

获取您的代码并`System.out.println`在其中添加调试语句`runone.run`表明它实际上正在执行。

我假设您的代码示例旨在简化您的问题的演示；您可能希望首先考虑让它作为“普通功能”执行您想要的操作（我上面的第二个示例，其中 Runnables 组合在一起），然后分离成不同的 Runnables。

**编辑**-为了使您的示例正常工作，要记住的是`JFrame`使用 contentPane 来托管其子项-**`frame.add`存在是为了方便添加到 contentPane**（基于[JFrame 的 javadoc](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFrame.html)），但`removeAll`不这样做（基于我玩现在就用它）。此外，在添加按钮后调用`validate`将再次正确重新布局子组件以显示第二个按钮。

用这个替换您的定义`runone`，您的示例将起作用：

```
runone = new Runnable() {
    @Override
    public void run() {
        frame.getContentPane().removeAll();
        frame.add(button2);
        frame.validate();
    }
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T20:05:08.997

~~您应该首先将对象封装`Runnable`在一个`Thread`对象中，然后通过调用`start()`. 例如：~~

 ~~```
Runnable r = ...;
Thread thread = new Thread(r);
thread.start(); 
```~~  ~~* * *

**编辑：**

您应该确保从 EDT 调用 Runnable。例如：

```
SwingUtilties.invokeLater(r); 
```

或者，您可能会使用它`SwingWorker`来处理与 swing 代码相关的密集操作。请参阅[此答案](https://stackoverflow.com/a/11546203/597657)以了解 SwingWorker 的工作原理。~~

# python - 是否可以读取网页html表格数据？

> ID：14045609
> 
> 赞同：-1
> 
> 时间：2012-12-26T20:02:52.397
> 
> 标签：python, selenium

我目前正在考虑一些自动化来读取网页数据。那么是否可以从网页中读取下面这样的表格以读入 excel：excel 的值应为`name of condion,Operator and Expressions`.

**编辑**

```
 >>> from urllib import urlopen
>>> from bs4 import BeautifulSoup
>>> source = BeautifulSoup(urlopen(url))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'url' is not defined
>>> source = BeautifulSoup(urlopen(https://demo.aravo.com))
  File "<stdin>", line 1
    source = BeautifulSoup(urlopen(https://demo.aravo.com))
                                        ^
SyntaxError: invalid syntax
>>> from urllib import urlopen
>>> from bs4 import BeautifulSoup
>>> source = BeautifulSoup(urlopen(https://demo.aravo.com/))
  File "<stdin>", line 1
    source = BeautifulSoup(urlopen(https://demo.aravo.com/))
                                        ^
SyntaxError: invalid syntax
>>> source = BeautifulSoup(urlopen(demo.aravo.com/))
  File "<stdin>", line 1
    source = BeautifulSoup(urlopen(demo.aravo.com/))
                                                  ^
SyntaxError: invalid syntax
>>> source = BeautifulSoup(urlopen(demo.aravo.com))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'demo' is not defined
>>> 
```

**编辑2**

```
C:\Users>cd..

C:\>cd cd C:\Python27\selenv\Scripts
The filename, directory name, or volume label syntax is incorrect.

C:\>cd C:\Python27\selenv\Scripts

C:\Python27\selenv\Scripts>python
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win
32
Type "help", "copyright", "credits" or "license" for more information.
>>> from urllib import urlopen
>>> from bs4 import BeautifulSoup
>>> source = BeautifulSoup(urlopen("https://demo.aravo.com/"))
>>> tables = source.findAll('td')
>>> import csv
>>> writer = csv.writer(open('filename.csv','w'))
>>> writer.writerow(rows)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'rows' is not defined
>>> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:06:01.273

有可能，请查看名为 Beautiful Soup 的库，它将简化您废弃页面后获取正确信息的过程

```
#!/usr/bin/env python
from selenium import webdriver

browser = webdriver.Firefox()
url = 'http://python.org'
browser.get(url)
page_source = browser.page_source
print page_source 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T21:27:50.337

您还可以使用 urllib 库中的 urlopen 来获取页面源，然后使用 BeautifulSoup 来解析 html

```
from urllib import urlopen

from beautifulSoup import BeautifulSoup

#get BeautifulSoup object
source = BeautifulSoup(urlopen(url))

#get list of table elements from source
tables = source.findAll('td') 
```

保存信息以在 exel 中使用的最简单方法可能是将其保存为[.csv](https://en.wikipedia.org/wiki/Comma-separated_values)文件

您可以使用 csv 模块执行此操作

```
import csv
writer = csv.writer(open('filename.csv','w'))
writer.writerow(rows) 
```

所有这些模块都有很好的文档记录，您应该可以填写空白。

为确保已安装这些库，请确保您有 easy_install，它可以通过[setuptools](http://pypi.python.org/pypi/setuptools)下载。运行 easy_install 后，在 shell 中输入：

```
easy_install csv
easy_install BeautifulSoup
easy_install urllib
easy_install ipython 
```

然后运行ipython进入live python环境

```
ipython 
```

这将打开一个 python shell，可以从中测试以前的代码。我希望这有帮助。如果您需要更多基础知识帮助，请在网上搜索 python 教程。`[scraperwiki][3]`在 python 中有一些很好的 web 解析示例。

# web-services - VIES 增值税获取公司信息

> ID：14045612
> 
> 赞同：2
> 
> 时间：2012-12-26T20:03:14.923
> 
> 标签：web-services

我在使用 VIES 增值税时遇到了一些困难。我正在使用[http://ec.europa.eu/taxation_customs/vies/vatResponse.html](http://ec.europa.eu/taxation_customs/vies/vatResponse.html)中的网络服务，我想知道是否可以将公司地址分为街道、邮政编码等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T21:09:16.137

根据您的信息，不，因为没有唯一的分隔符或唯一的模式来识别地址字符串的内容。

# jquery - 我应该使用“delete $.fn.plugin”来删除插件吗？

> ID：14045616
> 
> 赞同：3
> 
> 时间：2012-12-26T20:03:38.000
> 
> 标签：jquery, jquery-plugins, methods, reset, destroy

反对或反对使用`delete $.fn.plugin`（*结合*将元素重置为标准值）？

您销毁插件的标准方法是什么？有没有最佳实践？

# mysql - 插入而不是全部插入

> ID：14045617
> 
> 赞同：1
> 
> 时间：2012-12-26T20:03:39.417
> 
> 标签：mysql

以下是我的查询，我试图在其中插入名称不存在于 food (insertion table) 中的那些记录。对于 id 生成，我试图从中获取计数`food`并向其添加一个，`COUNT( food.FOOd_id ) +1 eg. Chineese_01`然后将来自`pick`table 的名称与 table 的 foodname 进行比较`food`。为了允许插入那些不存在的名称。以下查询给出了正确的结果，但它插入一次（一行），当我再次运行它时，它再次插入一次，依此类推。请让我知道如何修改以下查询，以便它应该为所有人插入。谢谢

```
 INSERT IGNORE into food(FOOD_id,FOOD_name)
    Select CONCAT(  FOOD,"_", COUNT( food.FOOd_id ) +1 ),CONCAT(  Typ,CONCAT('(' ,family,')' )) from pick,food
    where CONCAT(  Typ,CONCAT('(' ,family,')' )) NOT IN (Select FOOD_name from food ) 
```

**SQL FIDDLE：（**用于测试和做出正确的查询）

[http://sqlfiddle.com/#!2/91408/1](http://sqlfiddle.com/#!2/91408/1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:41:24.673

问题是`COUNT()`在 SELECT 子句中是强制聚合，所以只会选择一行。您需要指定一个分组，或将其移至子查询。将此添加到查询的底部是解决它的一种方法：

```
GROUP BY pick.food, pick.typ, pick.family 
```

# c++ - 使用 WinSock 侦听任意 ICMP Time Exceeded (TTL = 0) 数据包

> ID：14045619
> 
> 赞同：5
> 
> 时间：2012-12-26T20:03:51.463
> 
> 标签：c++, windows, sockets, networking, winsock

所以我的目标是使用 WinSock 和原始套接字来侦听所有 ICMP Time Exceeded 数据包（当 IP 数据包的 TTL 达到 0 时由网关生成）。

我的第一种方法涉及 2 个套接字，一个是 TTL 设置为 2 的 UDP（几乎可以保证 TTL 达到 0；wireshark 证实了这一点），另一个是带有 IPPROTO_ICMP 的 SOCK_RAW。

这种方法不起作用 - 我假设 ICMP 套接字只会返回与已发送数据包匹配的数据包（即回显请求 -> 回显回复）。进一步推动这个方法，我打开了 SIO_RCVALL （混杂模式 - 套接字接收*所有内容*）。几乎是真的，我开始在那个套接字上接收所有入站和出站数据包，除了 ICMP Time Exceeded （可能还有其他）。这通过让一个线程每 5 秒发送一个 TTL 2 的 UDP 数据包来显示，但是没有返回任何 ICMP 数据包。为了证明 ICMP 确实出现了，我能够观察到来自 cmd 的简单 ping 中涉及的 ICMP 数据包。

我的第二种方法是将 UDP 和 ICMP 放在同一个套接字上。这涉及我制作 IP 和 UDP 标头。Wireshark 显示 UDP 出去了，正如预期的那样，创建数据包（校验和等）没有问题，并且还显示了返回的 ICMP Time Exceeded 数据包，但是我再次看不到任何 ICMP 流量进入我的套接字（除此之外，当我测试 ICMP 正在使用简单的 ping 时）。

所以我的问题是，你到底是怎么拿到这些数据包的？我看过一个简单的 tracert 程序源代码，但我看不到任何我做的太不同的东西。

## 套接字创建/设置

```
 SOCKET s;

        if((s = socket(AF_INET, SOCK_RAW, 0)) == SOCKET_ERROR)
        {
            cout << "socket(AF_INET, SOCK_RAW, 0) failed with error code: " << WSAGetLastError() << endl;
            return 1;
        }

        sockaddr_in source;
        memset(&source, 0, sizeof(source));
        source.sin_family = AF_INET;
        source.sin_port = 0;
        source.sin_addr.S_un.S_addr = inet_addr("10.64.0.8");

        if(bind(s, (sockaddr*) &source, sizeof(source)) == SOCKET_ERROR)
        {
            cout << "bind failed with error: " << WSAGetLastError() << endl;
            return 1;
        }

        uint32_t optval = 1;
        DWORD bytesReturned;

        if (WSAIoctl(s, SIO_RCVALL, &optval, sizeof(optval), NULL, 0, &bytesReturned, NULL, NULL) == SOCKET_ERROR)
        {
            cout << "WSAIotcl() failed with error code " << WSAGetLastError() << endl;
            return 1;
        }

        if (setsockopt(s, IPPROTO_IP, IP_HDRINCL, (char*) &optval, sizeof(optval)) == SOCKET_ERROR)
        {
            cout << "Failed to remove IP header. Error code: " << WSAGetLastError() << endl;
            return 1;
        } 
```

## 从套接字读取

```
 if(WSARecvFrom(s, &buffer, 1, &in, &flags, (sockaddr*) &from, &fromSize, &ol, NULL) == SOCKET_ERROR)
    {
        int error = WSAGetLastError();
        if(error != WSA_IO_PENDING)
        {
            cout << "WSARecvFrom Failed with error code: " << error << endl;
            return;
        }
    }

    int rc = WaitForSingleObject(ol.hEvent, INFINITE);
    if(rc == WAIT_FAILED)
    {
        cout << "Wait for object failed" << endl;
        return;
    }

    WSAGetOverlappedResult(s, &ol, &in, false, &flags);

    ipv4_header_t* ipHeader = (ipv4_header_t*) buf;

    if(ipHeader->dest == addr)
    {
        cout << "Received Protocol: " << (uint32_t) ipHeader->protocol << endl;     
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:46:23.887

侦听您的 UDP 数据包的机器类型是什么？一些主机防火墙拒绝发送 ICMP 消息

# c# - 正则表达式检查重复

> ID：14045620
> 
> 赞同：10
> 
> 时间：2012-12-26T20:03:58.297
> 
> 标签：c#, java, regex

我正在尝试使用正则表达式检查文本行。

```
1,3,4,5,8,10,12,14,19,14 
```

这里的数字用'，'分隔，并且应该是非负数并且小于或等于20。并且任何数字都不应重复。这是我的模式。

```
^(?:(?:0[1-9]|[1-9]|1[0-9]|20),)*(?:0[1-9]|[1-9]|1[0-9]|20)$ 
```

但它不能检查重复。我怎样才能检查它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T21:53:24.523

你想做的事情并没有那么复杂。您只需要在每个匹配的数字之后检查该数字是否在字符串中再次出现：

```
^(?:(0[1-9]|[1-9]|1[0-9]|20),(?!.*\b\1\b))*(?:0[1-9]|[1-9]|1[0-9]|20)$ 
```

[在 Regexr 上](http://regexr.com?338bf)查看并测试它。

在 C# 中：

```
string[] myStrings = { "1",
    "1,2",
    "01,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20",
    "01,02,03,04,05,06,07,08,09,10,11,12,13,14,15,16,17,18,19,20",
    "01,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,5",
    "01,02,03,04,05,06,07,08,13,09,10,11,12,13,14,15,16,17,18,19,20" };

Regex reg = new Regex(
    @"^
        (?:(0[1-9]|[1-9]|1[0-9]|20),
            (?!.*\b\1\b) # Fail if the before matched number occurs once more
        )*
        (?:0[1-9]|[1-9]|1[0-9]|20)
    $",
    RegexOptions.IgnorePatternWhitespace
);

foreach (string myString in myStrings)
    Console.WriteLine("{0} {1} a valid string.",
        myString,
        reg.IsMatch(myString) ? "is" : "is not"
    );

Console.ReadLine(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T20:10:07.777

由于您已使用 C# 和 Java 标记了您的问题，因此我不会在这里为您提供代码解决方案，而是提供基本思想。

如果你用 分割字符串`,`，你会得到一个子字符串列表：`"1", "3" , "4", "5", "8", "10", "12", "14", "19", "14"`。现在，您可以遍历这些并尝试将每个解析为整数。如果它失败了，它就不是一个数字。如果成功，您可以轻松检查它是`< 0`还是`> 20`。您还可以保留一组以前已有的数字，并检查当前的数字是否重复。

底线是，您不应该尝试对*所有内容都*使用正则表达式。无论如何，您的语言要求并不[规律](http://en.wikipedia.org/wiki/Regular_language)（如果您需要记住东西或计算事物，通常是不规律的）。基于 Perl 的 RegExps 的能力不仅仅是*常规*的，但在这里还不够。

### 作为正则表达式的解决方案

正如您在评论中所说，一行最多只能容纳 20 个数字。由于每个数字也被限制在 0 到 20 之间，因此您对线条的实际外观有有限的可能性。因此，您有一种有限的语言（可能的行数有限）。有限语言是正则语言的子集，因此，您可以“轻松”地用正则表达式表示语言。

最简单的解决方案是列出*所有可能的行*。因此，如果每行只有 3 个数字，其中 5 是最大的数字（为了简单起见），正则表达式可能如下所示：

```
0,1,2|0,1,3|0,1,4|0,1,5|0,2,3|0,2,4|0,2,5|0,3,4|0,3,5|0,4,5|1,2,3|1,2,4|1,2,5|1,3,4|1,3,5|1,4,5|2,3,4 
```

当然，你可以简化很多（也许更多）：

```
0,(1,(2|3|4|5)|2,(3|4|5)|3,(4|5)|4,5)|1,(2,(3|4|5)|3,(4|5)|4,5)|2,(3,(4|5)|4,5)|3,4,5 
```

但是，是的，如果你有一个使语言有限的要求，它也会变得有规律，但不一定漂亮；我认为“手动”解决方案仍然更具可读性，尤其是更灵活。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T20:09:26.903

正则表达式不是最好的选择。重复数字太快了。您可能想查看标记化。甚至像查找不存在的模式这样简单的事情也很困难（请参阅[正则表达式以匹配不包含单词的行？](https://stackoverflow.com/questions/406230/regular-expression-to-match-string-not-containing-a-word)例如）

我会用逗号分割字符串，然后将它们添加到有序列表中。如果使用 C#：

```
"1,2,3,4".Split(',') 
```

开始然后继续使用 Linq 看看你的条件是否满足。

如果您必须使用正则表达式执行此操作，请查看迭代集合搜索返回。但这比上面的解决方案给你带来的收益很少。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T20:56:16.480

```
String[] numbers = input.split(",");
Set<Integer> filtered = new TreeSet();

for(String number: numbers) {
   if(!number.startsWith("-") {
      int nbr = Integer.parseInt(number);

      if(nbr < 20) {
         filtered.add(nbr);
      }
   }
}
for(int nbr: filtered) {
   System.out.print(nbr + " ");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T21:00:15.923

由于您需要正则表达式，是的，您将受到反向引用的限制，因为它们仅从 \1 到 \9。所以你需要排除配对。你最大的挑战是摆脱重复的数字。

来自[http://www.regular-expressions.info/refadv.html](http://www.regular-expressions.info/refadv.html)

使用`(?:(\d?\d),?)+`with`(?!<regex>)`确保没有重复项。你也可以使用 `(?(?=<regex>)true|false)`

我用这个页面进行实验：[http ://www.regextester.com/](http://www.regextester.com/)

# php - 无法使用 php 应用内联背景图像

> ID：14045622
> 
> 赞同：-1
> 
> 时间：2012-12-26T20:04:03.963
> 
> 标签：php, escaping

我需要为下面的 div 设置背景图像。背景图像必须指定为内联样式。我必须使用 php 来做到这一点。但是，使用 html、css 内联样式和 php 中的引号的方式是我下面的方法不起作用。我想知道是否有人可以帮我解决这个问题？提前谢谢了！

```
$form .= '
    <div class="notes" style="background:url(\'http://i47.tinypic.com/d9897p.png\');" >Hello</div>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:07:19.650

```
$form .= '<div class="notes" style="background:url(http://i47.tinypic.com/dre2cp.png);">Hello</div>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:18:24.277

您的内联 CSS 是正确的。给出最小高度和宽度，以便您可以看到您的图像：

```
$form .= '<div class="notes" style="background:url(http://i47.tinypic.com/dre2cp.png); min-height: 400px; min-width: 400px;">Hello</div>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T20:18:34.620

**它可能无法正常工作，因为[http://i47.tinypic.com/d9897p.png](http://i47.tinypic.com/d9897p.png)是 404-Not Found。**

以下似乎确实有效，但返回 404 图像。

```
<div style="background-image:url(http://i47.tinypic.com/d9897p.png); min-height:300px; min-width:300px;"> </div> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-26T20:25:19.527

避免通过 PHP 字符串打印 HTML。保持原样。
有`$form`变量没有一个单一的原因。
HTML 应该写成它（当然是在关闭 PHP 标记之后）

```
<div class="notes" style="background:url('http://i47.tinypic.com/d9897p.png');" >Hello</div> 
```

# objective-c - Good practice to handle error in a Connection Helper class

> ID：14045625
> 
> 赞同：1
> 
> 时间：2012-12-26T20:04:17.937
> 
> 标签：objective-c, architecture, nsurlconnection

To show information to users, my iOS app has to call a lot of different Web services. This is why I created a Connection Helper class, which uses NSURLConnection to call my server functions. This works fine and it simplify the rest of my views, except for error handling.

Most of the time, if my helper encountered a HTTP 500 error, I want it to show an alert without an explicit implementation from my views. But for some HTTP 500, showing an alert is irrelevant and I want a different behavior coming from the view.

For now, I only have a lot of if clauses in my Connection Helper to handle different situations. I don't like this solution because it is not neat. Do you have a idea of a neat structure I could create to archive what I want to do?

**Example :** Calling the Web service getItem with a bad ID will return an HTTP 500, and showing an error to the user is a good behavior. But calling deleteItem with a bad ID will also return a HTTP 500, but I don't want to show this error to my user because it is irrelevant.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:48:56.220

The solution of Shawnwall was probably a good way to solve this problem. But I found another one that I was more comfortable with.

My connection helper class does declare a delegate, ConnectionHelperDelegate. In this class, I've created an optional function :

```
- (BOOL) connectionDidFailWithHttp500:(NSString *) errorMessage; 
```

Then, if my delegate has this function, I call it :

```
if([self.delegationListener respondsToSelector:@selector(connectionDidFailWithHttp500:)]){...} 
```

If the delegate return true, it means that it will handle the rest of the work. If it returns false, it tells the ConnectionHelper to do it for it.

# angularjs - 在 angular.js 工厂中使用 $http

> ID：14045626
> 
> 赞同：5
> 
> 时间：2012-12-26T20:04:28.533
> 
> 标签：angularjs

在我的应用程序中，我使用 angular.js 和 jquery ui 自动完成功能。[我遇到了在这里](https://stackoverflow.com/questions/12959516/problems-with-jquery-autocomplete-angularjs)讨论的相同问题 那里接受的答案对我很有用，直到今天我需要用 $http ajax 调用替换静态值数组时，这正是我所需要的。我试图将 $http 作为参数传递给父函数，但我得到“未知提供者：autoCompleteProvider <- autoComplete”

我的问题是，如何在不重写或更改当前解决方案的情况下使用 $http ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-26T20:42:15.560

您需要在服务的 getSource() 函数中添加回调引用：

```
app.factory('autoCompleteDataService', ['$http', function($http) {
   return {
       getSource: function(callback) {
          var url = '...';
          $http.get(url).success(function(data) {
             callback(data);
          }
       }
   }
}]); 
```

如果您的服务器返回 json，您也可以使用[$http.jsonp 。](http://docs.angularjs.org/api/ng.%24http#jsonp)然后不要忘记 JSON_CALLBACK 参数。

在您的指令中，您需要添加回调函数本身：

```
...
autoCompleteDataService.getSource(function(data) {
   elem.autocomplete({
         source: data
         minLength: 2
   });    
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T15:34:23.833

您可以这样做：

```
app.factory('autoCompleteDataService', ['$http', function($http) {
    return {
        getSource: function() {
            return function(request, response) {
                $http.get(url).success(function(data) {
                    response(data);
                });
            }
        }
    } 
```

}]);

但是，如果您想先下载整个数据并允许自动完成小部件在客户端搜索数据，这是一个示例：

```
app.directive('autoComplete', function(autoCompleteDataService, $http) {
return {
    restrict : 'A',
    link : function(scope, elem, attr, ctrl) {
        autoCompleteDataService.getData(function(err, data) {
            if (err) {
                console.log("Could not retrieve data.");
                return;
            }

            elem.autocomplete({
                minLength: 0,
                source: data,
                focus: function( event, ui ) {
                    elem.val( ui.item.label );
                    return false;
                },
                select: function( event, ui ) {
                    elem.val( ui.item.label );
                    return false;
                }
            })
            .data( "ui-autocomplete" )._renderItem = function( ul, item ) {
                return $( "<li>" )
                .append( "<a>" + item.label + "</a>" )
                .appendTo( ul );
            };
        });
    }
}; 
```

});

```
app.factory('autoCompleteDataService', ['$http', '$rootScope', function($http, $scope) {
return {
    getData: function(callback) {
        if ($scope.data) {
            return callback(null, $scope.data);
        }

        $http.get('URL')
        .success(function(data) {
            $scope.data = data;
            return callback(null, data);
        })
        .error(function(data) {
            return callback(true, null);
        });
    }
} 
```

}]);

# drupal - drupal：商务启动，更改默认/主页 url

> ID：14045630
> 
> 赞同：1
> 
> 时间：2012-12-26T20:05:06.443
> 
> 标签：drupal, drupal-commerce

您好：我使用**Drupal 7**和**commerce quickstart**为客户创建了一个站点。现在事情正在好转，客户希望使 estore 成为一个完整的站点；所以我添加了关于、方向、加入等页面，但似乎无法弄清楚。

由于该站点最初是使用 drupal 7 commerce quickstart 创建的，因此默认/主页 url 会将用户带到显示所有商品的商店页面。因此，例如，您输入 ourStore.org 和 bam，您会看到商店中的产品并可以开始购物。好吧，我现在想要它，所以当用户输入“ourStore.org”时，url 指向常规的主页/主页，而不是商店页面。

然后我需要在网站上创建一个指向“我们的商店”的链接，例如，用户点击并转到最初是主页的商店页面。

我一定是被什么东西绊倒了，因为我认为这将是一个简单的改变。

任何帮助，将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T20:59:18.307

您的主页可以从您网站的`Configuration > Site Information`（下`System`部分）设置`admin/config/system/site-information`。

将默认首页路径设置为您要显示的任何节点页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T16:14:28.743

您可以从站点设置 > 配置 > 站点信息中设置您的主页，该站点位于您站点的 admin/config/system/site-information 中。

# asp.net - QueryString 为空 # 字符

> ID：14045634
> 
> 赞同：2
> 
> 时间：2012-12-26T20:05:19.967
> 
> 标签：asp.net, query-string

我的查询字符串有下一个外观：

```
 ....xxxx.aspx#access_token=xxxx&expires=xxxx 
```

当我检查查询字符串的值时，它什么也没给我。在这篇[Special-Character-sharp-in-URL-Query-String](http://www.codeproject.com/Tips/353020/Special-Character-sharp-in-URL-Query-String)文章中，我发现 # 之后的所有字符都被视为 null。如何获取值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T20:06:28.910

您不能，因为这些值不在查询字符串中。它们在散列中，仅在客户端可用。

如果您希望它们出现在查询字符串中，则需要使用`?`代替`#`。

# c# - Visual Studio Designer 2012 中的应用程序调整大小速度与调整大小速度

> ID：14045636
> 
> 赞同：0
> 
> 时间：2012-12-26T20:05:23.060
> 
> 标签：c#, winforms, resize, visual-studio-2012

我在 c# winforms 中有一个应用程序。我正在尝试调整它的大小，这确实有效，但速度很慢。我看到窗口在完成加载之前刷新了大约 5 秒钟。

在我的窗口上，我有一个 tablelayoutpanel，它包含几个按钮和一个控件。该控件再次包含几个按钮和控件。

当我调整同一个窗口的大小时，在设计器中，速度不是很快，但可以接受。

设计师怎么能比实际应用快这么多？

任何提示/技巧如何提高调整大小的速度？我曾经发现在表单之间切换时可以提高速度。这些技巧在这种情况下并没有真正的帮助。

**编辑**我发现背景图像在调整大小时会减慢整个应用程序的速度......所以我必须弄清楚如何让它更快。

# objective-c - Kumulos API 方法不起作用

> ID：14045642
> 
> 赞同：0
> 
> 时间：2012-12-26T20:05:50.750
> 
> 标签：objective-c, database, xcode, kumulos

我正在使用 Kumulos 向数据库提交信息。不幸的是，我无法让提交方法工作。

这个应用程序是用 Xcode 中的 Objective-C 编写的

我已将**Kumulos.h**、**Kumulos.m**、**libKumulos.h**和**libKumulos_iOS_.0.7.4.a 复制**到我的项目中。

在我的`viewDidLoad`我有：

```
k = [[Kumulos alloc]init];
[k setDelegate:self]; 
```

然后我通过执行以下操作在另一个线程中调用提交方法：

```
- (IBAction)submit:(UIButton *)sender 
{   
    [loader startAnimating];
    [NSThread detachNewThreadSelector:@selector(SubmittoDB) toTarget:self withObject:nil];
} 
```

在另一个线程中调用此方法：

```
-(void)SubmittoDB
{

    NSDate *date=[NSDate date];

    Transporter *T = [Transporter shared];

    [k submitToDbWithLatitude:[T getlat]
                 andLongitude:[T getlon]
                 andFirstName:[T getfirstname]
                  andLastName:[T getlastname]
              andEmailAddress:[T getemail]
               andPhoneNumber:[T getphone]
              andDateReported:date
                andPoleNumber:@"NULL"
                     andOther:othertext.text
                   andProblem:[T getproblem]];
} 
```

该`T`对象只是一个持有信息的对象。

这些是我的`didCompleteWithResult`和`didFailWithError`方法：

```
-(void) kumulosAPI:(Kumulos *)kumulos apiOperation:(KSAPIOperation *)operation submitToDbDidCompleteWithResult:(NSNumber *)newRecordID
{
    [self performSelectorOnMainThread:@selector(segue) withObject:nil waitUntilDone:false];
}

-(void) kumulosAPI:(kumulosProxy *)kumulos apiOperation:(KSAPIOperation *)operation didFailWithError:(NSString *)theError
{
     errormessage=theError;
     [self performSelectorOnMainThread:@selector(error) withObject:nil waitUntilDone:false];
}//failwitherror 
```

* * *

## 更新

```
-(void)segue
{
    [loader stopAnimating];
    [self performSegueWithIdentifier:@"uploaderdebrief" sender:self];
    }//segue

-(void)error
{
    [loader stopAnimating];
    UIAlertView *nope = [[UIAlertView alloc]initWithTitle:@"Error" 
                                                  message:errormessage
                                                 delegate:nil 
                                        cancelButtonTitle:@"OK" 
                                        otherButtonTitles:nil];
    [nope show];
} 
```

失败方法每次都会执行，但 NSString "theError" 总是为零，所以我不知道出了什么问题。如果我从 Kumulos 网站上的 kumulos 仪表板运行此 API 方法，我可以成功地将数据提交到数据库。

有人知道会发生什么吗？任何帮助将不胜感激。也希望每个人都有一个美好的圣诞节（如果那是你的事）

* * *

## 编辑

我稍早地放置了一个断点，我发现`NSString theError`说`Variable is not a CFString`，然后如果我再采取一步，它就会恢复为`nil`. 有没有办法找出它指的是哪个变量？另外，为什么`theError`会变回`nil`？我希望能够打印出该错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T20:29:02.463

它最终成为我所在的网络的问题。发生错误是因为为了模拟没有互联网的设备，我只需禁用 wifi，并且在重新启用 wifi 时，我没有重新提供用户名/密码以通过 NTLM 身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:30:28.717

我似乎有类似的情况，除了没有返回给我，甚至没有返回到 didFailWithError 委托方法。我在 kumulos.m 文件中添加了一些日志记录。这可能会帮助你，但它还没有把我带到任何地方。在您的 kumulos.m 文件中查找您的 submitToDbWithLatitude 方法，并`[newOp setDebugMode:YES];`在 KSAPIOperation 初始化后添加。

当您运行项目时，它将提供一些更详细的结果。可能有帮助。麦克风

# c++ - 错误：模糊旧声明“双轮（双）”

> ID：14045643
> 
> 赞同：5
> 
> 时间：2012-12-26T20:05:58.957
> 
> 标签：c++

> ```
> /usr/include/i386-linux-gnu/bits/mathcalls.h:311:1: error: ambiguates old declaration ‘double round(double)’
> g.cpp: In function ‘int round(double)’:
> g.cpp:14:24: error: new declaration ‘int round(double)’
> /usr/include/i386-linux-gnu/bits/mathcalls.h:311:1: error: ambiguates old declaration ‘double round(double)’ 
> ```

```
#include <iostream>
#include <cmath>
using namespace std;

int round(double number);

int main()
{
    double number = 5.9;
    round(number);
    return 0;
}
int round(double number)
{
    return static_cast<int>(floor(number + 0.5));
} 
```

为什么我的编译器显示错误

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-26T20:08:09.277

错误在这里非常明确。标`<cmath>`头已经引入了一个函数`double round(double)`，您不能根据返回类型重载。是的，它是在`std`命名空间中定义的，但你正在做`using namespace std;`（它也是实现定义的，它是否在注入之前首先在全局命名空间中定义`std`）。为了完全可移植，您需要为您的函数指定一个不同的名称或将其粘贴在另一个名称空间中 - 或者，当然，使用为您提供的`round`函数`<cmath>`。但也要摆脱它`using namespace std;`。

# c++ - C++ DXUT 构建/使用

> ID：14045645
> 
> 赞同：0
> 
> 时间：2012-12-26T20:06:14.207
> 
> 标签：c++, directx, directx-11

我正在尝试在 Windows 7 上使用 DirectX 11 构建游戏。

我已于 2010 年 6 月下载了 DX-SDK，并从 Samples/C++/DXUT11/Core 中的代码构建了 DXUT.lib。

当使用任何 DXUT-Function 时，链接器会抛出错误：
`LNK2001: unresolved extern symbol "_D3DXSaveSurfaceToFileW@20"`

我链接库的方式是：
`#pragma comment (lib, "DXUT.lib")`

我还包括来自 DX SDK 文件夹的 DXUT.h。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T07:48:47.047

您应该链接 d3dx9.lib，并包含 D3dx9tex.h，请参阅 MSDN 页面了解功能[D3DXSaveSurfaceToFile](http://msdn.microsoft.com/en-us/library/windows/desktop/bb205431%28v=vs.85%29.aspx)

# php - php 邮件、锚标记和单引号问题

> ID：14045647
> 
> 赞同：0
> 
> 时间：2012-12-26T20:06:21.063
> 
> 标签：php

我正在尝试使用 php mail 发送电子邮件，但是，当使用锚标记时，如果文件名中存在单引号 (')，则链接不会越过单引号 (')。

这是出现问题的代码行：

```
$message .= "<tr><td><strong>View LOA:</strong> </td><td><a     href='http://myurl.com/loa/" . $myloa . "'>" . strip_tags($myloa) . "</a></td></tr>"; 
```

（$myloa 是从我的数据库中提取的。我在我的服务器上上传了多个文件，并将文件名保存在我的数据库中。）

在电子邮件中，$myloa 可以读作例如 Alex 的 LOA.pdf

但是，如果尝试单击它（因为它已锚定），则链接只会到达 Alex。所以链接看起来像这样：[http://myurl.com/loa/Alex](http://myurl.com/loa/Alex)而不是[http://myurl.com/loa/Alex](http://myurl.com/loa/Alex)的 LOA.pdf

我怎样才能解决这个问题？谢谢。

这是我的完整代码：

```
$emailloa = $_POST['emailloa'];

$to .= "" . strip_tags($emailloa) . "";

$subject = "The " . strip_tags($name) . " LOA";

$message = '<html><body>';
$message .= '<table rules="all" style="border-color: #666;" cellpadding="10">';
$message .= "<tr style='background: #eee;'><td><strong>Sent by:</strong> </td><td>" .     strip_tags($_SESSION['user']['first']) . " " . strip_tags($_SESSION['user']['last']) . "    </td></tr>";
$message .= "<tr><td><strong>View LOA:</strong> </td><td><a     href='http://myurl.com/loa/" . $myloa . "'>" . strip_tags($myloa) . "</a></td></tr>";
$message .= "</table>";
$message .= "</body></html>";

$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:13:53.043

如果交换单引号和双引号会怎样？

```
$message .= '<tr><td><strong>View LOA:</strong> </td><td><a     href="http://myurl.com/loa/' . $myloa . '">' . strip_tags($myloa) . '</a></td></tr>'; 
```

我想知道双引号是否会影响解释器：http: [//php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

# ms-access - 计算 Access 中不同 NULL 值的数量

> ID：14045648
> 
> 赞同：4
> 
> 时间：2012-12-26T20:06:21.873
> 
> 标签：ms-access, count, distinct

我有一张表，我需要跟踪退回进行维修的物品，因此请跟踪处置、问题以及我们何时收到和运送这些物品。：

```
表名：RMAItems
 编号 | RMANbr | 零件编号 | 接收日期 |
-----------------------------------------
 1 | 12345 | 456-003 | 12-21-2012 |
 2 | 12345 | 434-007 | 12-21-2012 |
 3 | 12346 | 422-010 | |
 4 | 12347 | 421-540 | 12-21-2012 |
 5 | 12347 | 460-000 | |
 6 | 12348 | 459-006 | 12-26-2012 |
 7 | 12349 | 439-007 | |
 8 | 12349 | 435-006 | |   

```

'Recv Date' 列是三列中唯一一个可以为 NULL（即无值）的列。id 是主键（没有重复），RMA Nbr 列可以有重复项（因为每个 RMA Nbr 可以有多个项目分配给客户）。Recv Date 列可以为 NULL，直到我们将其标记为已接收并且表单通过另一个查询自动填写日期。

我需要在 Access 2003 中进行查询（我的公司很差，现在无法升级）来计算 RMA Nbr 列中 Recv Date 字段为 NULL 的不同记录的数量（即我需要知道 RMA 的数量未收到所有物品的 Nbr）。如果我要在上面的数据库上运行我需要的查询，我希望它返回 3，因为有三个 RMA Nbr 上的项目尚未收到。

我尝试了以下查询但没有成功：

```
选择计数（RMANbr）
来自 RMAItems
其中 RecvDate 为空；

```

（返回 4）

```
选择计数（*）
来自 RMAItems
其中 RecvDate 为空；

```

（返回 4）

```
选择计数（*）
FROM（从 RMAItems 中选择不同的 RMANbr）
其中 RecvDate 为空；

```

（运行此查询时会弹出一个对话框，其中包含一个文本框和文本框上方的“RecvDate”）

如前所述，我在 Windows XP Pro SP3 机器上使用 MS Access 2003。

我已经做了一些谷歌搜索，但还没有想出一个查询来做我需要做的事情（这就是我想出上面那个不起作用的子查询的方式）。您可以提供的任何帮助都将是超级的。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T20:14:58.877

使用类似于您的第三个示例的方法，但将`WHERE`子句移动到子查询中。您获得参数对话框的原因`RecvDate`是该字段未包含在子查询`SELECT`列表中，因此父查询未知/不可用。

```
SELECT Count(*)
FROM
    (
        SELECT DISTINCT RMANbr
        FROM RMAItems
        WHERE RecvDate Is Null
    ) AS sub; 
```

# opengl - 我应该如何在 directx/opengl 中解释 RGB 颜色？

> ID：14045651
> 
> 赞同：2
> 
> 时间：2012-12-26T20:06:40.710
> 
> 标签：opengl, colors, directx, monitors

因此，有许多不同的颜色空间，名称为 RGB。有些是线性的，有些是伽玛。我假设正在使用哪一个因监视器而异。

我应该将directx或opengl着色器中的rgb值解释为哪一个？

是否有我可以假设典型用户将使用的“安全”色彩空间？比如，游戏行业的每个人都认为他们的用户会使用 RGB 空间吗？

或者有没有办法检测显示器正在使用什么色彩空间？

我需要知道，这样我才能在 CIE XYZ 等标准色彩空间之间进行转换。如果它有点错误，那很好，但我希望尽可能接近典型的硬件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T20:18:18.427

无需进一步设置，进入 OpenGL 的颜色直接通过显示器，仅应用视频伽马斜坡。OpenGL 中的所有颜色操作都是线性的。

然而，OpenGL 确实提供了特殊的 sRGB 纹理格式，它在进行颜色操作之前首先对来自颜色空间的纹理颜色进行线性化。为了补充这一点，还支持 sRGB 帧缓冲区格式。

另请参阅这些以获取更多信息[http://www.g-truc.net/post-0263.html](http://www.g-truc.net/post-0263.html)和[http://www.arcsynthesis.org/gltut/Texturing/Tut16%20Free%20Gamma%20Correction.html](http://www.arcsynthesis.org/gltut/Texturing/Tut16%20Free%20Gamma%20Correction.html)

当然，对于某些应用，sRGB 是一个不合适的色彩空间（小到 8 位时的保真度低）。在这些情况下，我建议使用“原始颜色”OpenGL 图像和帧缓冲区格式并在着色器中执行颜色转换。为纹理使用一些接触色彩空间（XYZ 非常适合）和一些 HDR 图像格式（即每个通道 10 位或更多位）（假设 R=X、G=Y、B=Z）。渲染到屏幕外帧缓冲区对象，并在最后的后处理步骤中从 XYZ 帧缓冲区转换到屏幕颜色空间。

> 或者有没有办法检测显示器正在使用什么色彩空间？

OpenGL 不处理设备管理。您必须使用操作系统的工具来确定输出设备的颜色配置文件。

# android - ADT 不会加载目标平台，即使它们已安装。怎么修？

> ID：14045654
> 
> 赞同：1
> 
> 时间：2012-12-26T20:07:05.237
> 
> 标签：android, eclipse, adt

**症状：**

我在 Eclipse 中创建新的 Android 应用程序项目时遇到了这个问题。

由于“包名不能以点开头或结尾”，我不允许通过新项目向导的第一个屏幕

*   应用名称：拉哈里
*   项目名称：拉哈里应用
*   包名：com.example.lahari
*   所需的最低 SDK：API8：Android 2.2(Froyo)
*   目标SDK：API16：Android 4.1（果冻豆）
*   编译方式：（没有选项可供选择）
*   主题：全息灯

所以我开始四处搜索并尝试了很多来自 SO 和其他网站的解决方案。

> 一个相关的问题（我没有意识到）是目标平台列表是空的，我最后一次尝试它加载正常但不再加载。

SDK Manager 说平台已安装并且是最新的。没有针对 ADT、SDK 工具或 Eclipse 的更新。

***问题：***

在 Eclipse 中，Windows > Tools > Preferences > Android 路径设置正确，但不会加载目标。

***我的系统配置是：***

*   Win 7 64 位 - 迄今为止应用的所有更新
*   Eclipse Juno SR1（最新）
*   ADT 21.0.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T20:07:05.237

我尝试了网络上的所有解决方案。我花了一天的时间才找到可行的解决方案。

***所以这是解决方案：***

> **禁用您的防病毒软件！**

***我正在使用的防病毒软件：***

卡巴斯基安全软件 2013

我知道，这是最不期望的解决方案。

我在重新安装 SDK 时偶然发现了这一点。

***更新***：此解决方案无法在另一个系统上运行。所以这就是有效的。

> ***1）在eclipse中，进入windows->preferences->startup and shutdown->check*** ***android ADT***
> 
> ***2）重启日食***

我曾经禁用启动和关闭中的所有东西，因为这曾经使 Eclipse 更快。这以前从未产生过问题。

不过一切都好起来了^_^

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-11T13:18:17.387

启用“windows->preferences->startup and shutdown->android development toolkit”确实很有帮助。

# php - 什么相当于 $args[basename($img_path)] = '@' 。真实路径（$img_path）；在javascript中？

> ID：14045660
> 
> 赞同：0
> 
> 时间：2012-12-26T20:07:29.100
> 
> 标签：php, javascript, ajax, equivalent

以下 PHP 代码在 javascript 中的等价物是什么？

```
$img_path = "test.jpg"; // image located on my server
 $args = array(
'aid'       => $aid,       // album id
'caption'   => $img_caption,    // caption for image
'uid'       => $userid,   // facebook user id of the poster
'format'    => 'json'
);

$args[basename($img_path)] = '@' . realpath($img_path); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:26:38.333

实际上没有，因为 javascript 中没有 realpath() 等价物。Realpath() 需要访问服务器的文件系统，而 javascript 在客户端执行

# git - 版本控制系统 (Git) - 服务器与本地澄清

> ID：14045661
> 
> 赞同：2
> 
> 时间：2012-12-26T20:07:30.867
> 
> 标签：git, jakarta-ee

我有一个关于在 IBM-AIX 上将 Git 用于 Java EE 应用程序的问题。

我的团队中没有人（包括我）使用过版本控制系统。

如果我为我的 Java EE 应用程序安装 GIT，

1.  我希望 Git 版本控制能够跟踪 webapps 目录。
2.  我是否将 webapps 目录（包含所有代码）作为服务器存储库？
3.  我是否需要在其他地方创建一个服务器存储库，然后在该存储库中创建一个项目，然后将文件签入/签出该存储库？
    这似乎是一些在线教程所暗示的，所以我也对这部分感到困惑。

谁能解释设置 Git 存储库的最佳方式以及本地与远程如何工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:28:11.170

在任何版本控制系统中，都有一个地方可以作为历史的规范表示。在 Git 中，该位置可以是灵活的，但一种常见的模式是使用托管服务（例如[GitHub](https://github.com/)）来处理服务器存储库的托管。

通常，您会使用[Maven](http://maven.apache.org/)或[Gradle](http://gradleware.org/)等系统来处理构建您的 web 应用程序（`war`例如，作为文件）。这意味着您将`src/main/java`源代码树检查到源代码控制中，它会生成一个`war`文件作为输出，您将推送到您的部署区域。

开发人员将使用存储库的“本地”副本进行更改、提交，然后将它们推送到中央“远程”存储库。其他一些系统（例如像 Jenkins 这样的持续集成系统）将负责监控远程存储库的新更改，并将该代码构建到您可以部署到现场的工件中。

您可以查看诸如[为 3 人团队设置 Git 之类的问题？](https://stackoverflow.com/questions/550913/setting-git-for-a-team-of-3-people/551031#551031)了解如何设置存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T22:22:47.403

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T20:24:43.253

我认为您不会想要对服务器上的 webapp 目录进行版本控制。

您应该在另一台服务器（不是您的生产环境）中创建一个服务器存储库（对于 git 不是强制性的，但可能更容易开始），这样就会有您的代码。然后你应该考虑让 Jenkins 或类似的东西来处理编译+部署，并可能使用 Nexus 来托管不同版本的二进制文件。

将所有这些结合在一起，Jenkins 应该负责将您的源代码构建为二进制文件，在 Nexus 上发布它们，并将新版本部署到生产环境。

# asp.net-mvc-3 - 如何使 Jquery Select2 与 ASP MVC 3 一起使用

> ID：14045668
> 
> 赞同：0
> 
> 时间：2012-12-26T20:08:14.263
> 
> 标签：asp.net-mvc-3, jquery-select2

我最近一直在努力使用 Jquery Select2 ( [Select2](http://ivaynberg.github.com/select2/) )，试图实现从 ASP MVC ActionResult 获取数据的 ajax 回调。

这是我的 HTML 代码：

```
<input type="hidden" id="e2" style="width: 500px;"> 
```

这是js代码：

```
<script>
$(document).ready(function(){

    $("#e2").select2({
        minimumInputLength: 1,
        ajax:{
          url: "http://localhost:1800/Test/GetCountries",
            dataType:"jsonp",
            data: function(term, page){
                return {
                    query: term
                };
            },
            results: function(data){
                return {
                    results: data
                };
            }
        }
    });

}); 
```

GetCountries 函数非常简单，它只返回与搜索词匹配的国家。这是搜索“联合”一词时的示例：

```
[{"id":"AE","text":"United Arab Emirates"},{"id":"UK","text":"United Kingdom"},{"id":"US","text":"United States"}] 
```

我尝试将格式从 application/json 更改为 text 来回没有成功。我想我在我的函数返回的 json 上遗漏了一些东西，但是三个小时后我仍然不知道这里可能出了什么问题。

当我在网络选项卡上查看 Chrome 调试器时，它似乎调用了该​​函数并且正在发送数据。但是，当我输入字母时，什么都没有显示，它只会永远显示“正在搜索...”文本。

如果有人遇到过同样的情况，请分享您的想法。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T01:47:42.553

自从我要求这个已经有一段时间了。我还没有时间让 Select2 工作，尽管默认 Bootstrap 的 Typeahead 的解决方法可以做到。

所以，如果有人过来，不要费心回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-30T19:09:55.027

这里的问题是

```
dataType:"jsonp" 
```

解决方案：

```
 dataType:"json" 
```

查看更多[JSONP 是什么？](https://stackoverflow.com/questions/2067472/what-is-jsonp-all-about)

# python - Gdata API 安装

> ID：14045680
> 
> 赞同：0
> 
> 时间：2012-12-26T20:09:17.530
> 
> 标签：python, unix, google-api, google-calendar-api, gdata-api

我不知道我在做什么。我在 OSX 上使用 Python 2.7 和 Eclipse PyDev IDE。我以前从未使用过 API，但我需要将谷歌日历 API 与我正在开发的 Python 应用程序一起使用。我从 Google 下载了最新的 gdata 模块，并在我下载 gdata 文件夹（下载）的目录中使用终端中的这一行安装了它：

```
sudo python setup.py install 
```

它似乎将所有内容安装到我机器库深处的 Python 目录中，没有给出错误。但是，现在当我尝试使用以下导入命令运行程序时：

```
import gdata.calendar.data
import gdata.calendar.client
import gdata.acl.data
import atom 
```

我收到以下错误：

```
ImportError: No module named gdata.calendar.data 
```

清楚地表明我在安装时做错了什么。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:14:49.540

它可能已安装，但您没有告诉 Eclipse 去哪里寻找`gdata`.

右键单击 Eclipse 中的项目，然后选择`Properties -> PyDev - PYTHONPATH -> Source Folders`并单击“添加源文件夹”。

该文件夹（可能）位于 中`/Library/Python/2.7/site-packages/gdata`，具体取决于版本和安装位置。它可能在其他地方，比如`dist-packages`代替`site-packages`，但是一旦你找到它并在 Eclipse 中添加文件夹，导入应该可以工作。

**编辑**：不要忘记为 做同样的`atom`事情。

# php - PHP在带有magic_quotes的mysql查询中使用变量

> ID：14045685
> 
> 赞同：0
> 
> 时间：2012-12-26T20:09:45.933
> 
> 标签：php, mysql, security, magic-quotes

我有一个 mysql 查询，它使用数组中的值作为 WHERE 语句的一部分。我应该如何包含这个变量？

这是sql： `"AND gender = '{$user_array[\"gender\"]}'"`

PHP 返回此错误：`Parse error: syntax error, unexpected T_CONSTANT_ENCAPSED_STRING, expecting T_STRING`

我已经`magic_quotes`开启。我看过一些帖子建议将数组的值设置为另一个变量，但如果我有魔术引号，这似乎是不必要的。它是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:11:21.313

只需将整个查询放入`double quotes`然后执行`AND gender = '$user_array['gender']'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:11:26.467

```
"AND gender = '{$user_array['gender']}'" 
```

是反斜杠杀死了它。

或者你甚至可以这样做：

```
"AND gender = '$user_array[gender]'" 
```

或者：

```
"AND gender = '" . $user_array['gender'] ."'" 
```

演示：[http ://codepad.org/lrJllI1K](http://codepad.org/lrJllI1K)

但是所有这些放在一起，您应该使用**准备好的查询**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T20:13:43.190

作为替代方案，您可以在 PHP 中执行字符串 concat 并将 SQL 放在双引号中，这可能会解决您的问题：

```
"AND gender = '" . $user_array['gender'] . "'... 
```

# java - 数组中的随机数

> ID：14045689
> 
> 赞同：2
> 
> 时间：2012-12-26T20:10:35.547
> 
> 标签：java, arrays, algorithm, random

我需要用可能的 50 个随机数中的 5 个随机数填充数组 A。允许重复。然后，我需要再次填充相同的数组，但使用数组的第一次或第二次填充中没有出现的唯一数字。我第二次使用下面的代码生成数组。我被困在如何同时在第一个数组中搜索重复项。任何帮助表示赞赏！谢谢

```
boolean drawn;
    for (int i=0; i<A.length; i++) {
            do {
                    drawn = false;
                    A[i] = 1 + (int)(Math.random() * 50);

                    for (int j=0; j<i; j++)
                            if (A[i] == A[j]) 
                                drawn = true;                                                                               

            } while (drawn); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:35:44.733

我会这样做：

```
List<Integer> choices = new ArrayList<Integer>();  
Random r = new Random();
for(int i = 0; i <N;i++)
{  
    choices.add(r.nextInt(N-1)+1;
}    
Set<Integer> uniques = new HashSet<Integer>();  
Collections.shuffle(uniques);  
//remove first 5 entries from uniques 
//repeat for second pass 
```

这当然有可能（尽可能少）剩余的集合小于大小 5。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T20:27:55.273

使用 List<> 来跟踪所有允许的数字，并在使用它们时将它们从列表中删除。然后，对于您的“第二次通过”，不是总是得到一个随机数 * 50，而是得到一个随机数 * 列表大小（）。那么您使用的实际数字是 list.get(location) 而不仅仅是数字。

（您的列表会以 1,2,3,4,5 开始，但是当使用 3 时，列表将变为 1,2,4,5，...，这样当您获得下一个“随机（ )" 数字 3，实际上是 4。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T20:28:53.957

`random`将您的 50 个随机数候选者存储在一个大小为的数组中`50`

保持一个计数器最初设置为`random.length`.所以，这里`counter`将初始化为 49。

`r`然后从`0`to生成一个数字`counter-1`并选择`random[r]`作为您的数字。

现在继续`random[r]`与`random[counter-1]`. 递减`counter`，这样下次您将只搜索数组的前 49 个元素，并在您选择一个数字时继续此过程。

现在简单地说，如果您想要一个以前没有选择过的数字，请生成`r`from `0`to`counter-1`以便`random[r]`来自数组中的唯一元素，该元素将在开头。

```
 int[] randoms= new int[50];
     .
     .  //populate your array with the candidate numbers
     .
    int counter= randoms.length;
    Random rand = new Random();

    public int getUnique(){
      //Get a random number in the range 0 to counter-1
      int r = rand.nextInt(counter);
      int myElement = randoms[r];
      randoms[r] = randoms[counter-1];
      randoms[counter-1]= myElement;
      counter--;
      return myElement; 
    } 
```

每当你想允许重复时，生成一个`r`从`0`到`random.length -1`并选择`random[r]`作为你的号码。请注意，我们仍然必须跟踪使用的数字，以便`getUnique()`仍然有效：

```
 public int getAny(){
      //Get a random number in the range 0 to random.length-1
      int r = rand.nextInt(random.length);
      int myElement = randoms[r];
      if(r < counter){
        randoms[r] = randoms[counter-1];
        randoms[counter-1]= myElement;
        counter--;
      }
      return myElement; 
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T20:29:45.733

您可以创建一个包含 50 个数字的列表，并使用 Random 获取 0 到 50 之间的 5 个索引，以创建您的第一个随机数组。

对于第二遍，创建第一个列表的副本，但删除第一个随机数组中的数字。然后打乱第二个列表（使用`Collections.shuffle()`），并取前 5 个元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T20:29:54.310

每次要填充数组时都必须使用一个额外的数组，因为您需要存储先前的数组元素。就像是：

```
boolean drawn;
System.arraycopy( A, 0, B, 0, A.length );
for (int i=0; i<A.length; i++) {
        do {
                drawn = false;
                A[i] = 1 + (int)(Math.random() * 50);

                for (int j=0; j<A.length; j++)
                        if (A[i] == B[j]) 
                            drawn = true; 

                for (int j=0; j<i; j++)
                        if (A[i] == A[j]) 
                            drawn = true;                                                                               

        } while (drawn); 
```

`

# vim - '&' 在 vi m 正则表达式中使用时是什么意思？

> ID：14045690
> 
> 赞同：0
> 
> 时间：2012-12-26T20:10:40.617
> 
> 标签：vim

'&' 字符在 vim 正则表达式中使用时是什么意思，如下所示：

```
:s/pattern/&nbsp;&nbsp;/g 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T20:10:40.617

在查找和替换命令中使用时，“&”指的是在文档中找到的内容。这是一种重新打印您查找的任何内容的方式。

这：

```
:s/pattern/&nbsp;&nbsp;/g 
```

因此将返回：

```
patternnbsp;patternnbsp; 
```

您可以像任何其他 VIM 元字符一样对其进行转义：

```
:s/pattern/\&nbsp;\&nbsp;/g 
```

您可以在此处找到有关反向引用的更多信息：http: [//vimregex.com/#backreferences](http://vimregex.com/#backreferences)

仅供参考：`&nbsp;`指 HTML 中的不间断空格

# php - Php 阿拉伯字符未正确连接

> ID：14045692
> 
> 赞同：3
> 
> 时间：2012-12-26T20:10:46.030
> 
> 标签：php, utf-8

这就是我想要实现的目标：

```
تلر 
```

这就是问题：

```
$a = "ت";
$l = "ﻝ";
$z = "ر";

$word = $a.$l.$z;
echo $word; 
```

印刷：

```
ت‌ل‌ر 
```

尽管：

```
echo "تلر"; 
```

印刷：

```
تلر 
```

实际上没有空格，但是如果您尝试此代码（请记住允许 utf-8），您会看到字母不会组合。它在字母直接组合时起作用。但是当我一一结合时，就像：`$a.$b.`......他们不会结合。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T21:28:09.823

你的第二个单字符是 U+FEDD 而第二个字符是 U+0644 `تلر`。使用正确的字符，它可以工作：

```
$a = "ت";
$l = "ل";
$z = "ر";
var_dump("تلر" === $a.$l.$z); 
```

您可能想看看[*如何将 Unicode 转义序列（如“\u00ed”）解码为正确的 UTF-8 编码字符？*](https://stackoverflow.com/a/2934602/53114)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T21:11:55.127

尝试使用这种编码而不是 utf-8

```
 <meta http-equiv="Content-Type" content="text/html; charset=windows-1256 "/> 
```

编辑：

最流行的阿拉伯语编码是：

```
 Windows-1256, ISO 8859-6, and UTF-8. 
```

编辑：因为它会工作，你必须将你的编辑器也设置为编码`windows-1256`，如果你从数据库中获取字符串，你必须将数据库的编码设置为`windows-1256`并且应该工作

# wcf - 通知实体框架发生了什么变化

> ID：14045694
> 
> 赞同：0
> 
> 时间：2012-12-26T20:10:48.287
> 
> 标签：wcf, entity-framework

假设我有一组嵌套的业务对象：

```
public class Customer
{
    public int ID { get; set; }
    public string Name { get; set; }
    public Address Address { get; set; }
}

public class Address
{
    public int ID { get; set; }
    public string Street { get; set; }
    // ...
    public AddressType Type { get; set; }
}

public enum AddressType
{
    Billing,
    Mailing
} 
```

现在假设我只想更新客户的姓名。我遇到的问题是我仍然必须为嵌套对象提供所有数据，即使我调用的服务方法忽略了它们。

问题是枚举、ID 和其他值不能为空。所以 EF 抱怨数据为空。

为了完成这项工作，我必须向我的对象添加虚拟数据（服务方法将再次忽略这些数据）。当我可能只需要数据的一个子集时，似乎没有必要来回发送一个完整的对象。

有没有更好的方法来处理 EF/WCF 的部分更新？

**编辑：**

假设 WCF 服务有方法：

```
public void UpdateCustomer (Customer customer) 
```

我想传递一个`Customer`大部分是空的服务，只包含改变的值`Name`加上`ID`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:47:56.103

有几种不同的模式可用于 Delta 接口。示例：界面中的第二个参数。第二个参数可以是 MemberName 集合。该集合设置为调用者希望处理的所有成员的名称。

选项 2，为接口使用不同的模型作为实际的 EF 类。标记除键可选的所有字段。您可以发送仅包含相关字段的 XML。您需要检查哪些元素存在，哪些不存在，以区分
标签不存在。

因为应该/可能意味着重置为默认值，而缺少的标签可能意味着什么也不做。还有其他模式，这只是2个例子。

# javascript - 多个 JavaScript 函数无法正常工作

> ID：14045697
> 
> 赞同：0
> 
> 时间：2012-12-26T20:10:55.680
> 
> 标签：javascript, html, function, button

这是我的代码：

```
<script type="text/javascript" language="javascript">
function calc(){
    var a = prompt("Enter a number");
    var b = prompt("Enter another number");
    var x = +a;
    var y = +b;
    alert("The answer is " + (x+y));
}
function rect(type){
    var a = prompt("Enter length of rectangle");
    var b = prompt("Enter width of rectangle");
    var x = +a;
    var b = +b;
    if(type=="area"){
        alert("The area is " + (x*y);
    }
    else if(type=="perimeter"){
        alert("The perimeter is " + ( (2*x)+(2*y) );
    }
}
</script>

<head>
    <title>JavaScript Calculator</title>
</head>

<body>
    <button onclick="calc()">Calculator</button>
    <button onclick="rect('area')">Area of Rectangle</button>
    <button onclick="rect('perimeter')">Perimeter of Rectangle</button>
</body> 
```

当我注释掉 rect 函数时，我的代码运行良好，只是计算器按钮是唯一有效的按钮。其他两个按钮应该可以正常使用 rect 函数，但它们不是，当我取消注释 rect 函数时，Calculator 按钮也停止工作。为什么是这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T20:12:34.557

你缺少一些括号

```
alert("The area is " + (x*y));
// and:
alert("The perimeter is " + ( (2*x)+(2*y) )); 
```

# javascript - JS 测试运行器 html 与生产 html？

> ID：14045703
> 
> 赞同：2
> 
> 时间：2012-12-26T20:11:26.607
> 
> 标签：javascript, jquery, unit-testing, tdd, qunit

**回答**： 根据 SO 以外的人的建议：将 html 放入视图文件中，并将其注入到您的生产页面和 testRunner 页面中。问题解决了。

**下面的问题以粗体显示**

假设我有一个方法，当用户单击时，它会将元素向左移动 50px。

负责这个的功能是

```
function moveElemLeft($elem, iPxLeft){} 
```

在我的测试脚本中，我基本上有：

```
test("test moves function left via css", 1, function(){
    //get first elem in test fixture.
    var $testFixture = $('#qunit-fixture').children().eq(0);
    var beforeLeft = $testFixture.css('left');
    moveElemLeft($testFixture, 50);
    var afterLeft = $testFixture.css('left');
    equal(beforeLeft-50, afterLeft);
}); 
```

在我的 testRunner HTML 中，我会有类似的东西

```
 <head><script href="test.js" /></head>
    <body>
    <div id="qunit-fixture">
    <div id="testChild" class="absolute no-margins">
    </div></div>
    </body> 
```

**----- 问题 ----** 我的函数在测试期间正确运行但在生产中不能正确运行的可能性是否很大，因为我在测试夹具中编写的 html 显然是微不足道的？使用与我的测试运行器 html 文件中相同的 html 不是更好吗？

但要做到这一点，这意味着在测试设置中，我必须将生产 html 文件中的 html 复制到测试运行程序文件中。这甚至可能吗？这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:33:42.950

> 使用与我的测试运行器 html 文件中相同的 html 不是更好吗？

除了单元测试之外，测试它会很有用。

我不会用这样的测试*替换*一个小型的、独立的测试来证明当在预期的输入上运行时函数的行为符合预期。

> 但要做到这一点，这意味着在测试设置中，我必须将生产 html 文件中的 html 复制到测试运行程序文件中。这甚至可能吗？这里的最佳做法是什么？

在生产 HTML 上运行测试（或者更确切地说，在专用测试服务器上单独安装它）。我会使用 Selenium 之类的东西在浏览器（或浏览器集合）中测试整个页面，而无需将测试代码注入页面本身。

# google-bigquery - Google BigQuery - 使用单个作业重复导入

> ID：14045704
> 
> 赞同：0
> 
> 时间：2012-12-26T20:11:40.913
> 
> 标签：google-bigquery

BigQuery 是否存在任何已知问题，即单个作业会导致重复导入？我们看到了这个问题，需要帮助来找出 BigQuery 中发生的问题。

我们的流程每 15 分钟运行一次，以将 CSV 导入 BigQuery。我调查了查看我们的日志，并且处理了两次的作业显示了以下问题。处理两次的 CSV 文件中有 36101 行。

1.  我们的上传过程成功地将单个作业发布到 BigQuery。上传的 CSV 文件有 36101 行，大小为 2846673

2.  我们的流程检查作业的状态。检查作业状态时，请注意“outputRows”。与预期相同（36101）。

    “状态”：{“状态”：“运行”}，“统计”：{“开始时间”：“1356528625599”，“负载”：{“输入文件”：“1”，“输入文件字节”：“2846673”，“输出行” ": "36101", "outputBytes": "13651590" } } }

3.  请注意，上述作业完成后，该过程显示双倍记录。参见 outputRows (72202)

    “状态”：{“状态”：“完成”}，“统计”：{“开始时间”：“1356528625599”，“结束时间”：“1356528665201”，“负载”：{“输入文件”：“1”，“输入文件字节” ": "2846673", "outputRows": "72202", "outputBytes": "27303180" } } }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:57:24.653

我们已经确定并修复了该错误。如果您遇到任何进一步的问题，请告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T18:47:57.213

值得一提的是，在过去的五天里，我们已经两次看到同样的问题。我们每 10 分钟加载一次，只是将其更改为每小时一次，以使此问题更易于管理。

# vb.net - 与费舍尔-耶茨一起洗牌

> ID：14045706
> 
> 赞同：0
> 
> 时间：2012-12-26T20:11:50.097
> 
> 标签：vb.net

我的程序有问题，我试图洗牌一堆图片框，然后解开它们我试过费雪-耶茨洗牌没有运气。请给我一个例子。

我正在使用带有面板的标准表单，一个图片框，文本框和三个按钮。

```
Imports System.Drawing
Imports System.Windows.Forms

Public Class Form1
Private Sub TestSplit()
    Dim fr_bm As New Bitmap(PictureBox1.Image)
    Dim wid As Integer = PictureBox1.Image.Width \ 8
    Dim hgt As Integer = PictureBox1.Image.Height \ 6
    Dim colnum, rownum As Integer
    For rownum = 0 To 5
        For colnum = 0 To 7
            Dim to_bm As New Bitmap(PictureBox1.Image)
            Dim gr As Graphics = Graphics.FromImage(to_bm)
            Dim fr_rect As New Rectangle(colnum * wid, rownum * hgt, hgt, hgt)
            Dim to_rect As New Rectangle(0, 0, wid, hgt)
            gr.DrawImage(fr_bm, to_rect, fr_rect, GraphicsUnit.Pixel)
            Dim MyPictureBox As New PictureBox
            MyPictureBox.Height = hgt
            MyPictureBox.Width = wid
            MyPictureBox.Left = colnum * hgt
            MyPictureBox.Top = rownum * wid
            MyPictureBox.BorderStyle = BorderStyle.FixedSingle
            'MyPictureBox.SizeMode = PictureBoxSizeMode.Normal
            MyPictureBox.Image = to_bm
            MyPictureBox.Name = "PicBox" & rownum & colnum
            Panel1.Controls.Add(MyPictureBox)
        Next
    Next
End Sub
Private Sub OpenButt_Click(sender As System.Object, e As System.EventArgs) Handles OpenButt.Click
    Using O As New OpenFileDialog With {.Filter = "(Image Files)|*.jpg;*.png;*.bmp;*.gif;*.ico|Jpg, | *.jpg|Png, | *.png|Bmp, | *.bmp|Gif, | *.gif|Ico | *.ico", .Multiselect = False, .Title = "Select image"}
        If O.ShowDialog = 1 Then
            TextBox1.Text = O.FileName
            PictureBox1.Image = Image.FromFile(O.FileName)
            PictureBox1.SizeMode = PictureBoxSizeMode.Zoom
        Else
            TextBox1.Clear()
        End If

    End Using
End Sub

Private Sub BoardButt_Click(sender As System.Object, e As System.EventArgs) Handles BoardButt.Click
    TestSplit()
End Sub

Private Sub ShuffleButt_Click(sender As System.Object, e As System.EventArgs) Handles ShuffleButt.Click

End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:31:17.050

在一个表单和一个按钮上放置 2 个列表框（最好放在中间）

左边的 Listbox1 是 ORIGINAL SORTED 列表 右边的 Listbox2 是原始排序列表的 COPY

点击按钮，listbox2中的文件被打乱

代码如下

```
 Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click

    Dim i As Integer
    Dim j As Integer
    '
    ListBox2.Items(0) = ListBox1.Items(0)
    For i = 1 To ListBox1.Items.Count - 1
        j = Int(Rnd(1) * i)
        ListBox2.Items(i) = ListBox2.Items(j)
        ListBox2.Items(j) = ListBox1.Items(i)
    Next

End Sub

Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load

    Dim counta As Integer
    '
    For counta = 0 To 39
        ListBox1.Items.Add("image" & counta & ".gif")
        ListBox2.Items.Add("image" & counta & ".gif")
    Next
    counta = Nothing

End Sub 
```

参考：Inside Out Shuffle [http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)

# java - 从 ArrayList 中断程序中删除对象

> ID：14045707
> 
> 赞同：0
> 
> 时间：2012-12-26T20:11:52.943
> 
> 标签：java

我正在创建一个 sscce，但是这里发布的代码太多了，所以我将发布部分，希望你能关注！

所以，我有这个类叫做`Ship`，在类中有这个：

**块 1：**

```
keyboard.keyPress("SPACE", new Runnable(){

    @Override
    public void run(){
        Laser laser = new Laser(
                new Sprite("/media/images/laser.png"),
                sscce.Ship.this.room);
        sscce.Ship.this.room.addGameObjectAt(
                laser,
                sscce.Ship.this.getX() + (sscce.Ship.this.getWidth() / 2) - 3,
                sscce.Ship.this.getY());
    }
}); 
```

当`Space`按键被按下时，它会创建一个`Laser`对象，然后我们将它添加到游戏中，该对象存储在游戏中，`ArrayList`然后在我的主游戏循环中绘制到屏幕上，该循环通过`ArrayList`.

`Laser`是一个非常简单的类，它看起来像这样：

**块 2：**

```
package JGame.GameObject;

import JGame.Room.Room;

public class Laser extends GameObject{

    public Laser(Sprite sprite, Room room){
        super(sprite, room);
        move.moveToY(0 - this.getHeight(), 5, new Runnable(){
            @Override
            public void run(){
                Laser.this.destroy.destroyGameObject();
            }
        });
    }
} 
```

所以 Chunk 1 创建 Chunk 2 然后将其添加到数组列表中。这一切都很好，花花公子！

**块 3：**

```
public void moveToY(int y, int speed, Runnable complete){
    this.obj.moveEndY = y;
    this.obj.moveAmountY = speed;
    this.complete = complete;
    this.obj.needsToMoveY = true;
} 
```

这会向新创建的`Laser`. 然后我们垂直移动对象（由块 2 定义并在主游戏循环中执行）。

下一部分是破坏游戏，我所说的休息是指一切都停止（事件监听器、移动等）。

从块 2 我说“当 moveToY 到达目的地时运行可运行代码”，可运行代码说要使用`destroyGameObject()`. destory 看起来像这样，并在所有游戏对象构造函数（等）中`Laser`初始化`Ship`。

**块 4：**

```
package JGame.Actions;

import JGame.GameObject.GameObject;
import JGame.Room.Room;

public class DestroyAction extends Action{
    GameObject obj;
    Room room;
    public DestroyAction(Room room, GameObject obj){
        this.room = room;
        this.obj = obj;
    }

    public void destroyGameObject(){
        room.removeGameObject(this.obj);
    }
} 
```

块 4 只是告诉房间“嘿，我们需要从列表中删除这个对象”

**块 5：**

```
public class Room extends JPanel implements Runnable{

    ArrayList<GameObject> gameObjects = new ArrayList<>();

    public void run(){
        try{
            while(true){
                // Do Event Listeners
                // Move objects along Y axis
                for(GameObject go : gameObjects){
                    if(go.needsToMoveY){
                        int objY = go.getY();
                        if(objY > go.moveEndY){
                            go.setY(objY - go.moveAmountY);
                        }else if(objY < go.moveEndY){
                            go.setY(objY + go.moveAmountY);
                        }else{
                            go.needsToMoveY = false;
                            // Executes Runnable parameter from moveToY()
                            go.move.actionComplete();
                        }
                    }
                }
                this.repaint();
                Thread.sleep(roomSpeed);
            }
        }catch(Exception e){
        }
    }

    public void removeGameObject(GameObject go){
        gameObjects.remove(go);
        System.gc();
    }
} 
```

所以，最后在块 5 中，这是主循环，很多代码已被删除，但这会测试它是否应该移动，如果完成，运行通过 moveToY() 作为 Runnable 传入的 actionComplete() . 好吧，这个 Runnable 说当它到达它的位置时删除对象。当它在 Runnable 1 时间内运行代码时，一切都会停止。运动停止；因此，如果发射了 2 个以上的激光，它们应该向上移动，但它们会停在它们的位置并且不会移动。键盘按钮停止工作，因此移动箭头`Ship`不再响应，因此您可以向上/向下/向左/向右导航船，它只是位于第一次触发 Runnable 的最后一个位置。

那么... 为什么一切都停止了？我只想删除 Runnable 中的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:23:34.603

您的代码组织存在严重问题：您正在直接（在方法中）修改`gameObjects`列表，同时使用迭代器（在方法中）遍历列表。这将导致迭代器抱怨（如抛出异常）。请注意，您正在捕获 - 并且默默地忽略！ - main方法中的异常。永远不要扔掉这样的异常——它们会在出现问题时告诉你。`Room``removeGameObject``run``run`

您需要组织代码，以便仅当没有迭代器遍历列表时才从列表中删除对象。您可以通过创建一种方法来标记要删除的对象，然后在游戏循环的单独步骤中将其删除。

# matplotlib - 使用 Matplotlib imshow 的选择性模式

> ID：14045709
> 
> 赞同：4
> 
> 时间：2012-12-26T20:12:05.580
> 
> 标签：matplotlib, graphing

有没有办法将自定义模式放置到 imshow 图表上的选定区域中？准确地说，我需要做到这一点，除了带有数字数据的彩色方块外，我在其他方块中也有不同的图案，表示实验的不同故障模式（并且还生成一个解释这些含义的密钥不同的图案）。一个有用的模式示例是各种类型的交叉影线。我需要能够在不破坏图表上主要颜色-数字数据关系的情况下做到这一点。

以下是我尝试使用答案中建议的代码。如果我评论错误部分，则 imshow 会在没有来自掩码的数据的情况下显示空白。我什至没有尝试对不同的故障类型进行不同类型的交叉影线处理，或者处理模拟或实验有效但另一个还没有的情况。

EDIT3：我从多处理包中收到关于它如何“不能腌制”对象的错误消息。由于该程序，这是它的一部分通过多处理包。有什么方法可以解决这个问题或者没有 add_patches （下面建议的绘图方法不起作用，因为绘图发生在完全不同的坐标系上并绘制连接线）？

```
import numpy as np
import matplotlib.patches as patches
...
grid = np.ma.array(grid, mask=np.isnan(grid))
plot.imshow(grid, interpolation='nearest', aspect='equal', vmax = private.vmax, vmin = private.vmin)
if show_fail and faildat != []:
    faildat = faildat[np.lexsort((faildat[:,yind],faildat[:,xind]))]
    fails = []
    for i in range(len(faildat)):
        fails.append((faildat[i,1],faildat[i,0]))
    for F in fails:
        p = patches.Rectangle(F,1,1,hatch='/',fill=False)
        plot.add_patch(p)
plot.minorticks_off()
plot.set_xticks(range(len(placex)))        
plot.set_yticks(range(len(placey)))
plot.set_xticklabels(placex)        
plot.set_yticklabels(placey, rotation = 0)
plot.colorbar()
plot.show() 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-27T04:48:33.280

有几种方法可以做到这一点，哪种更好取决于您是否需要标记大区域或分散的单个像素。

如果您需要标记大区域，您可以通过在图像上添加矩形来做到这一点：

```
import matplotlib as mpl
import matplotlib.pyplot as plt
from numpy.random import rand

ax = plt.gca()
ax.imshow(rand(50,50))
ax.add_patch(mpl.patches.Rectangle((2,2),20,20,hatch='//////////',fill=False,snap=False))
plt.draw() 
```

`Rectangle` [(doc)](http://matplotlib.org/api/artist_api.html#matplotlib.patches.Rectangle)各种哈希选项。这只是在图像之上添加额外的艺术家，它们不会以任何方式影响数据颜色映射。大量`/`增加了散列标记的密度，这可能是实际看到带有小框的散列所必需的。

前任：

```
from numpy.random import rand
import matplotlib as mpl
import matplotlib.pyplot as plt

ax = plt.gca()
ax.imshow(rand(50,50),interpolation='nearest')
for i,j in np.floor(50*rand(10,2)).astype('int'):
    ax.add_patch(mpl.patches.Rectangle((i-.5, j-.5), 1, 1, hatch='///////', fill=False, snap=False))

plt.draw() 
```

![带有一些像素阴影的图像](../Images/7e18b222076e03c488151301f1480c9a.png) 如果您只需要在此处标记几个像素，并且您可能只需要绘图就可以逃脱（使用`plot([x],[y],marker='x')`并可能使用标记大小）。

# c# - 函数调用过多

> ID：14045714
> 
> 赞同：3
> 
> 时间：2012-12-26T20:12:44.253
> 
> 标签：c#, linq, lambda

我编写了以下代码来解析`csv`文件：

```
var result = FullFile.Split('\n')
  .Select(s => new 
  { FirstName = s.Split(',')[(int)FirstName.Value],
  SirName = s.Split(',')[(int)sirName.Value],
  garde = s.Split(',')[(int)Grade.Value] }); 
```

现在，我`Split`在同一个对象上多次使用相同参数的函数。

有没有办法继续使用 lambda 表达式，并减少这个函数调用？

*欢迎对我的编码提出任何其他意见*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T20:15:26.430

是的，您可以在 first 中拆分一次`Select`，然后将结果沿链传递到 second `Select`，如下所示：

```
var result = FullFile
    .Split('\n')
    .Select(line => line.Split(','))
    .Select(tt => new 
        { FirstName = tt[(int)FirstName.Value],
          SirName = tt[(int)sirName.Value],
          garde = tt[(int)Grade.Value] }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T20:19:04.460

尝试这个：

```
var result = from var s in FullFile.Split('\n')
                  let x = s.Split(',')
                  select new {
                                FirstName = x[(int)FirstName.Value],
                                SirName = x[(int) SirName.Value],
                                Grade = x[(int) Grade.Value]
                             }; 
```

# css - Devtool Chrome 自动保存无法正常工作

> ID：14045715
> 
> 赞同：0
> 
> 时间：2012-12-26T20:12:56.233
> 
> 标签：css, google-chrome, google-chrome-devtools, livereload

我昨天安装了 devtool autosave，它工作正常。现在服务器运行正常，显示 DevTools Autosave 1.0.0 正在终端中的[http://127.0.0.1:9104](http://127.0.0.1:9104)上运行， 但没有记录 css。我正在使用带有铬版本 20.0.1132.47 的 ubuntu 12.04。我正在编辑一个本地文件（file:///media/263003BB3003914B/Dropbox/Dropbox/Code/Jquery/effets-and-structure/index.html）。我想问题出在开发工具选项上。我尝试了许多不同类型的文件路径组合，但它仍然不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T11:00:16.250

我确定您可能已经完成了这项工作，但对其他人来说这可能会有所帮助。我安装它并认为它不起作用，但实际上是因为我只是在具有内联样式的 HTML 文件上测试它。它只能编辑外部 CSS 文件。看起来很明显，但是当快速尝试使用机器中的随机文件对其进行测试时，这是一个容易犯的错误。

此外，如果您在本地主机上工作，那么您需要非常具体地说明您的位置。在 Chrome 中打开扩展并将新路由拖到服务器。您可以直接从浏览器复制您需要的本地主机位置，您只需要导航到本地站点的主页。现在将其粘贴到匹配部分。

接下来确保您直接链接到保存到部分中的 css 文件。在 Mac 上，它看起来像这样 - /Users/your-name/Sites/your-site/css/

确保在位置的开始和结束处保留分数（正向）斜杠。如果它仍然不起作用，那么您需要检查它在终端中查找的文件位置并进行修改。

# jsf - EL 自动完成功能不适用于

> ID：14045717
> 
> 赞同：0
> 
> 时间：2012-12-26T20:13:13.287
> 
> 标签：jsf, netbeans, intellisense, el

`<h:dataTable var>`EL 自动完成功能在 Netbeans中不起作用。我希望看到 的属性`#{oi}`，而不是看到全局变量。

见下面的截图：

![在此处输入图像描述][1]

我怎样才能让它在 Netbeans 中工作？

# nginx - nginx ./配置错误 ubuntu 12.04

> ID：14045720
> 
> 赞同：56
> 
> 时间：2012-12-26T20:13:37.817
> 
> 标签：nginx

下载并尝试在执行命令时配置 nginx ./configure um 收到此错误

```
./configure: error: the HTTP rewrite module requires the PCRE library.
You can either disable the module by using --without-http_rewrite_module
option, or install the PCRE library into the system, or build the PCRE library
statically from the source with nginx by using --with-pcre=<path> option. 
```

我执行

```
apt-get build-dep nginx 
```

命令嗯得到以下错误

```
The following packages have unmet dependencies:
libgd2-noxpm-dev : Depends: libgd2-noxpm (= 2.0.36~rc1~dfsg-6ubuntu2) but it is not    going to be installed
E: Build-dependencies for nginx could not be satisfied. 
```

我对 libgd2-noxpm 没有任何想法。这是我第一次使用 nginx 。如何克服这个错误。先感谢您

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-12-26T21:02:26.247

您必须安装 pcre3：

`apt-get install libpcre3 libpcre3-dev`

location 指令中的正则表达式支持和 ngx_http_rewrite_module 模块需要该库。[http://nginx.org/en/docs/install.html](http://nginx.org/en/docs/install.html)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-12-23T09:04:51.660

apt-get build-dep nginx

刚刚解决了我的问题....

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-05-16T09:55:37.753

以下是在 Ubuntu 18.04 上安装 Nginx 需要遵循的步骤：

1：安装构建必备 sudo apt-get install build-essential

您可能会收到“udo apt-get install libpcre3 libpcre3-dev”

2: sudo apt-get install libpcre3 libpcre3-dev

3: sudo apt-get install zlib1g zlib1g-dev

4：sudo apt-get install -y libssl-dev

# c# - ShowDialog() 不在主窗体顶部显示窗体

> ID：14045722
> 
> 赞同：6
> 
> 时间：2012-12-26T20:13:44.183
> 
> 标签：c#, winforms, visual-studio-2012

我有一个处理订阅数据的 winforms 应用程序。主表单检查用户是否在数据存储（xml 文件）中，如果不是我调用它。UserDetails 是一个数据输入表单。

```
else
{
    Form frm = new UserDetails();
    frm.ShowDialog();
} 
```

问题是 UserDetail 表单不在顶部，我可以选择主表单。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-26T20:20:43.013

如果您的主要形式是`TopMost`.

尝试使用

```
frm.ShowDialog(this); 
```

从主窗体调用时。

这将确保对话框是主窗体的可视子窗体，即使主窗体是`TopMost`，对话框也会在其上方。

# php - 如何在同一个提要中输出多个数组

> ID：14045723
> 
> 赞同：0
> 
> 时间：2012-12-26T20:13:49.503
> 
> 标签：php, mysql, sql, arrays, feed

我有两个查询导致不同的集合。我想在同一个 feed-div 中输出两个结果，使用 PHP 和 MySQL，按发布日期排序。提要应同时提供新闻和博客文章。

我在想我会从数据库中获取两个结果集，然后将它们存储在一个数组中，从这里我需要一些灵感来了解如何从每个数组中额外添加一个元素比较它们的时间戳并将最新值插入在另一只之前喂食。也许先进入第三个数组，然后从中做一个简单的循环。

我这样做过头了吗？有没有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:49:07.603

使用时间戳作为键将单独的提要组合成一个数组，按键排序，然后像往常一样循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T20:20:03.630

我无法提供具体的代码，但是，按 mysql 日期降序属性排序的内部连接查询（连接两个博客和新闻表）可能就足够了。

# html - 在网站页面底部定位页脚

> ID：14045730
> 
> 赞同：1
> 
> 时间：2012-12-26T20:14:46.570
> 
> 标签：html, css, position

我正在尝试制作这个模板，稍后我将把它转换为 WordPress 主题。我遇到的问题与这篇文章类似：[即使有滚动条，也让 div 始终停留在页面内容的底部](https://stackoverflow.com/questions/8824831/make-div-stay-at-bottom-of-pages-content-all-the-time-even-when-there-are-scrol)但是当我尝试了该帖子的解决方案时，但对我不起作用。

我想要的是页脚位于页面的最底部（如果内容比查看器的浏览器窗口长，则从视图中隐藏）而不是将其固定在窗口的底部。

所有最重要的内容（导航、栏、徽标等）都位于我想要的位置。但是页脚和页脚上方的链接并不位于页面的最底部。相反，当它第一次加载时，它会将自己定位在页面的底部。它拥有的内容越多，它就会停留在它第一次加载的区域。请看下面的截图： ![页脚卡在中间](../Images/ef17584e2de035e0aa8b97008a9f3514.png)

以下是该页面的以下 HTML/CSS：

**HTML**

```
<div id="blackbar"></div>

    <div id="wrapper">

        <div id="redbar">
        <img src="images/logo_broeren_03.png" alt="" title="" />
        </div>

        <div id="navigationWrapper">
            <ul>
                <li><a href="#">Contact Us</a></li>
                <li><a href="#">Who We Are</a></li>
                <li><a href="#">Our Portfolio</a></li>
                <li><a href="#">Home</a></li>
            </ul>
            <div id="whitebar">
                <img src="images/logo_broeren_04.png" alt="" title="" />
            </div>
        </div>

        <div id="newsbar">
        </div>

        <div id="contentWrapper">

            <div id="secondaryNavigation">
            </div>

            <div id="slider-headline">
            </div>

            <div id="content">
                <div class="post">
                    <p>Contains post content</p>
                 </div>
            </div>

        </div>
    </div>

    <div id="footer">
    <span id="studioLink">designed by Two Eleven Studios</span>
        <ul>
            <li>602 N. Country Fair Drive, P.O. Box 6537 &#8226; Champaign, Illinois 61826&#8211;6537</li>
            <li>217&#8211;352&#8211;4232</li>
            <li>example@broerenrusso.com</li>
            <li>&copy; 2012 Broeren Russo Inc.</li>
        </ul>
    </div> 
```

**CSS**

```
/*General Implementations*/
body {
    background: #6CF;   
    width: 100%;
}

/*Main Elements*/
/*Black bar on the far left side*/
#blackbar {
        background: #000;
        height: 55px;
        position: absolute;
        top: 25px;
        /*width: 155px;*/
        width: 15%;
    }

/*Red bar containing red part image of logo*/
#redbar {
    background: #C0272D;
    width: 114px;
    height: 80px;
    float: left;
}
#redbar img {
    float: right;
    position: relative;
    top: 24px;
}

/*Wrapper containing main content, navigation,  white bar w/ logo, news feed, and main content*/
#wrapper {
    width: 798px;
    height: 100%;
    float: left;
    position: absolute;
    left: 15%;
    /*left: 155px;*/
}

/*Navigation wrapper containing white bar w/ logo and main navigation*/
#navigationWrapper {
    width: 570px;
    height: 130px;
    position: relative;
    top: 0;
    float: left;
    font-size: 12px;
    font-family: 'RobotoLight', Arial, sans-serif;
    text-transform: uppercase;
}

/*Main navigation settings*/
#navigationWrapper ul {
    /*position: relative;
    top: 0;
    float: right;*/
    height: 24px;
    width: 570px;
}
#navigationWrapper ul li {
    display: inline-block;
    width: 114px;
    /*height: 22px;*/
    text-align: right;
    float: right;
    padding: 3px 0 0 0;
}
#navigationWrapper ul li:hover { 
    border-top: 2px #C0272D solid;
    padding: 1px 0 0 0;
}
#navigationWrapper ul li a { 
    position: relative; 
    top: 10px;
    color: #000;
    text-decoration: none;
}

/*White bar w/ white logo*/
#whitebar {
    background: #FFF;
    height: 56px;
    width: 570px;
    position: relative;
    top: 0px;
}
#whitebar img { 
    float: left;
    position: absolute;
}

/*News feed on the side*/
#newsbar {
    width: 114px;
    height: 179px;
    background: #FFF;
    margin: 80px 0 0 0;
}

/*Slider/Headline Block and content block*/
#slider-headline, #content {
    width: 684px;
}
/*Slider/Headline Block*/
#slider-headline { 
    background: #000; 
    height: 302px;
}
/*content block*/
#content { 
    background: #FFF; 
    padding: 6.5em 0 1em 0;
    margin: 0 0 1.5em 0;
}
/*wrapper containing slider/headline block and content block*/
#contentWrapper {
    width: 684px;
    margin: -179px 0 24px 114px;    
}

/*Company tagline (only on index page)*/
#companyTagline {
    float: right;
    font-family: 'RobotoMedium', Arial, sans-serif;
    margin: 5px 0 0 0;
}

/*Secondary navigation within contentWrapper*/
#secondaryNavigation {
    width: 611px;
    height: 110px;
    margin: 0 auto;
    position: absolute; 
    background: #666;
    z-index: 10;
    top: 320px;
    right: 44px;
}

/*Post settings*/
.post {
    width: 89%;
    margin: 0 auto;
}

/*Studio link*/
#studioLink {
    position: absolute;
    bottom: 27px;
    left: 3px;
    font: 8px 'RobotoLight', Arial, sans-serif;
}

/*Main footer*/
#footer {
    position: absolute;
    bottom: 0;
    width: 100%;
    background: #CCC;
    height: 24px;
}
#footer ul {
    width: 684px;
    margin: 0 auto;
}
#footer ul li {
    list-style-image: none;
    display: inline-block;
    font: 9px/11px 'RobotoLight', Arial, sans-serif;
    margin: 0 23px 0 0;
}
#footer ul li:last { margin: 0; } 
```

我知道部分问题是所有顶级内容（导航、顶部的白条等）都包含`position: absolute;`CSS。但我想保留这个 CSS 声明。如何让页脚上方的链接和页脚本身位于页面/内容的底部而不是位于窗口的底部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T23:19:05.347

所以就在这里。由于绝对定位，花了很长时间

```
<body>
<div style="width:100%; min-height: 100%; position: relative; display:inline-block;">
    <div id="blackbar">
    </div>
    <div id="wrapper">
        <div id="redbar">
            <img src="images/logo_broeren_03.png" alt="" title="" />
        </div>
        <div id="navigationWrapper">
            <ul>
                <li><a href="#">Contact Us</a></li>
                <li><a href="#">Who We Are</a></li>
                <li><a href="#">Our Portfolio</a></li>
                <li><a href="#">Home</a></li>
            </ul>
            <div id="whitebar">
                <img src="images/logo_broeren_04.png" alt="" title="" />
            </div>
        </div>
        <div id="newsbar">
        </div>
        <div id="contentWrapper">
            <div id="secondaryNavigation">
            </div>
            <div id="slider-headline">
            </div>
            <div id="content">
                <div class="post">
                    <p>
                        Contains post content</p>
                    <br />
                    <p>
                        Contains post content</p>
                    <br />
                    <p>
                        Contains post content</p>
                    <br />
                    <p>
                        Contains post content</p>
                    <br />
                    <p>
                        Contains post content</p>
                    <br />
                    <p>
                        Contains post content</p>
                    <br />
                    <p>
                        Contains post content</p>
                    <br />
                    <p>
                        Contains post content</p>
                    <br />
                    <p>
                        Contains post content</p>
                    <br />
                    <p>
                        Contains post content</p>
                    <br />
                    <p>
                        Contains post content</p>
                    <br />
                    <p>
                        Contains post content</p>
                    <br />
                </div>
            </div>
        </div>
    </div>
    <div id="footer">
        <span id="studioLink">designed by Two Eleven Studios</span>
        <ul>
            <li>602 N. Country Fair Drive, P.O. Box 6537  Champaign, Illinois 618266537</li>
            <li>2173524232</li>
            <li>example@broerenrusso.com</li>
            <li> 2012 Broeren Russo Inc.</li>
        </ul>
    </div>
</div>
 </body> 
```

​ CSS

```
 <style type="text/css">
    /*General Implementations*/
    html, body
    {
        background: #6CF;
        width: 100%;
        height: 100%;
    }

    /*Main Elements*/
    /*Black bar on the far left side*/
    #blackbar
    {
        background: #000;
        height: 55px;
        position: absolute;
        top: 25px; /*width: 155px;*/
        width: 15%;
    }

    /*Red bar containing red part image of logo*/
    #redbar
    {
        background: #C0272D;
        width: 114px;
        height: 80px;
        float: left;
    }
    #redbar img
    {
        float: right;
        position: relative;
        top: 24px;
    }

    /*Wrapper containing main content, navigation,  white bar w/ logo, news feed, and main content*/
    #wrapper
    {
        width: 798px;
        min-height: 100%;
        float: left;
        position: relative;
        left: 15%; /*left: 155px;*/
    }

    /*Navigation wrapper containing white bar w/ logo and main navigation*/
    #navigationWrapper
    {
        width: 570px;
        height: 130px;
        position: relative;
        top: 0;
        float: left;
        font-size: 12px;
        font-family: 'RobotoLight' , Arial, sans-serif;
        text-transform: uppercase;
    }

    /*Main navigation settings*/
    #navigationWrapper ul
    {
        /*position: relative;
top: 0;
float: right;*/
        height: 24px;
        width: 570px;
    }
    #navigationWrapper ul li
    {
        display: inline-block;
        width: 114px; /*height: 22px;*/
        text-align: right;
        float: right;
        padding: 3px 0 0 0;
    }
    #navigationWrapper ul li:hover
    {
        border-top: 2px #C0272D solid;
        padding: 1px 0 0 0;
    }
    #navigationWrapper ul li a
    {
        position: relative;
        top: 10px;
        color: #000;
        text-decoration: none;
    }

    /*White bar w/ white logo*/
    #whitebar
    {
        background: #FFF;
        height: 56px;
        width: 570px;
        position: relative;
        top: 0px;
    }
    #whitebar img
    {
        float: left;
        position: absolute;
    }

    /*News feed on the side*/
    #newsbar
    {
        width: 114px;
        height: 179px;
        background: #FFF;
        margin: 80px 0 0 0;
    }

    /*Slider/Headline Block and content block*/
    #slider-headline, #content
    {
        width: 684px;
    }
    /*Slider/Headline Block*/
    #slider-headline
    {
        background: #000;
        height: 302px;
    }
    /*content block*/
    #content
    {
        background: #FFF;
        padding: 6.5em 0 1em 0;
        margin: 0 0 1.5em 0;
    }
    /*wrapper containing slider/headline block and content block*/
    #contentWrapper
    {
        width: 684px;
        margin: -179px 0 24px 114px;
    }

    /*Company tagline (only on index page)*/
    #companyTagline
    {
        float: right;
        font-family: 'RobotoMedium' , Arial, sans-serif;
        margin: 5px 0 0 0;
    }

    /*Secondary navigation within contentWrapper*/
    #secondaryNavigation
    {
        width: 611px;
        height: 110px;
        margin: 0 auto;
        position: absolute;
        background: #666;
        z-index: 10;
        top: 320px;
        right: 44px;
    }

    /*Post settings*/
    .post
    {
        width: 89%;
        margin: 0 auto;
    }

    /*Studio link*/
    #studioLink
    {
        position: absolute;
        bottom: 27px;
        left: 3px;
        font: 8px 'RobotoLight' , Arial, sans-serif;
    }

    /*Main footer*/
    #footer
    {
        position: absolute;
        bottom: 0;
        left: 0px;
        width: 100%;
        background: #CCC;
        height: 24px;
    }
    #footer ul
    {
        width: 684px;
        margin: 0 auto;
    }
    #footer ul li
    {
        list-style-image: none;
        display: inline-block;
        font: 9px/11px 'RobotoLight' , Arial, sans-serif;
        margin: 0 23px 0 0;
    }
    #footer ul li:last
    {
        margin: 0;
    }
</style> 
```

这是[小提琴](http://jsfiddle.net/8Z5qj/)。工作对我来说完美。在 Chrome 和 Firefox 中检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T20:40:39.587

试试这个公式。尽快

```
<div class="header">
</div>
<div id="Content">
<div class="con"></div>
</div>
<div class="header">
</div> 
```

css

```
html, body
{
height: 99%;
background-color:Black;
}
.header ,.footer
{
width: 960px;
height: 15%;
background-color:Gray;
}
#Content
{
min-height: 85%;
width: 960px;
background-color:Navy;
}
.con
{
min-height:900px;
width:960px;
background-color:Aqua;
}​ 
```

[在这里](http://jsfiddle.net/gq6UQ/1/)摆弄

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T20:31:10.927

[http://ryanfait.com/resources/footer-stick-to-bottom-of-page/](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)

**HTML**

```
 <div class="wrapper">
            <p>http://ryanfait.com/resources/footer-stick-to-bottom-of-page/</p>
            <div class="push"></div>
        </div>
        <div class="footer">
            <p>Copyright &copy; 2008</p>
        </div> 
```

**CSS**

```
html, body {
    height: 100%;
}
.wrapper {
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -4em; /*!*/
}
.footer, .push {
    height: 4em; /*!*/
    clear: both;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-26T20:26:59.603

将正文设置为`height: 100%;`并将`overflow: auto;` 页脚设置为`position: fixed;`,`bottom: 0;`和`left: 0;`

然后，您只能将内容的 margin-bottom 设置为页脚的高度。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-26T20:27:20.180

将页脚的位置从绝对更改为固定：

```
#footer {
  position: fixed;
  ...
} 
```

# sql - 在 SSRS 中隐藏字段/参数

> ID：14045732
> 
> 赞同：0
> 
> 时间：2012-12-26T20:14:57.467
> 
> 标签：sql, ssrs-2008, show-hide

是否可以根据参数值隐藏 SQL 2008 报告中的字段？我倾向于自定义应用程序，如果迫不得已，我将手动编写每个部分的代码，但我想尽可能地利用 SSRS。在填充报告之前，我已经包含了报告的屏幕截图。红色区域是我想隐藏的地方，=iif(X=1,true,false)

![在此处输入图像描述](../Images/d673bb8b5ac8c949e1abe89b45992b18.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T20:41:30.657

设置文本框中的表达式属性>>可见性>>在axpression上显示或隐藏。

```
=iif(X=1,true,false) 
```

希望这有帮助..

[查找屏幕截图和更多详细信息，请单击此处](https://stackoverflow.com/questions/6279704/how-do-i-set-the-visibility-of-a-text-box-in-ssrs-using-an-expression)

使用 SSRS 管理器，参数字段无法以编程方式隐藏。但是您可以使用 SSRS 报告创建 asp.net 网络表单。[MSDN 链接](http://forums.asp.net/t/1281716.aspx)

# vba - 查询错误中的 VBA 评估 IIF 的错误部分

> ID：14045734
> 
> 赞同：3
> 
> 时间：2012-12-26T20:15:00.887
> 
> 标签：vba, ms-access, ms-access-2007, ms-access-2010

我在查询中有以下列。

```
iif(Len([Field1])=0,0,Asc(Mid([Field1] & "",Len([Field1])))) 
```

这个想法是它应该返回字符串字段中最后一个字符的 ASCII 值。问题是，如果 Field1 为空，则语句错误并显示以下消息：“无效的过程调用或参数（错误 5）”。如果该字段为空，则应返回 0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T20:24:12.503

假设空白表示 Null 或空字符串，您可以将空字符串连接到`[Field1]`，如果组合长度为 0，则返回 0。

该`Right()`函数比`Mid()`获取最后一个字符更直接。

```
SELECT IIf(Len([Field1] & "")=0,0,Asc(Right([Field1],1)))
FROM YourTable; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T21:58:45.563

无论如何，你有 HansUp 的答案继续前进。:)

..在此*查询航程*的任何时候，您的查询`IIF`都会变得非常长... ;) 这里以`UDfunction`使用**`REGEX`**. 在您的情况下，最重要的方面是验证输入 - 获得`ASCII`价值并不多。由于您主要关心最后一个`character`，如果您的 Field1 包含`alphanumeric`值并且您的最后一个字符恰好是`digit`，`special character`而不是`String`. 好吧，为了安全起见，我们可以在以下**仅`Strings`**响应. 另一个优点是你可以在你的数据库中重复使用这个函数。

也许这确实使您的过程**复杂**化：D

```
Option Compare Database
Option Explicit 

 Public Function GetASCII(strField1 As String) As Integer 
    Dim regex As Object
    Dim strTemp As String

    Set regex = CreateObject("vbscript.regexp")

    '--assume strField1 = "hola", you may enter different types 
    '-- of values to test e.g. "hola1, hola$ , hola;

    With regex
        .IgnoreCase = True
        .Global = True
        .Pattern = "[a-zA-Z]+"

        '--check for null
        Select Case IsNull(strField1) '-- validates any other datatype than String
            Case True
                GetASCII = 0
            Case Else
                Select Case IsError(strField1)
                   Case True
                      GetASCII = 0
                   Case Else
                      Select Case IsEmpty(strField1)
                          Case True
                             GetASCII = 0
                             '--check if entire string is String 
                             '--only (no special characters, digits)
                             '--you may change this to only check the 
                             '----last character if your Field1 is alphanumeric
                          Case Else
                             Select Case .Test(strField1)
                                 Case True
                                    strTemp = Mid(strField1, Len(strField1), 1)
                                    GetASCII = Asc(strTemp)
                                 Case Else
                                    GetASCII = 0
                             End Select
                      End Select        
                End Select        
        End Select        
    End With            
    Set regex = Nothing
 End Function 
```

注意：认为这从长远来看会有所帮助 :)[访问查询入门文章](http://allenbrowne.com/QueryPerfIssue.html)。

# c++ - 在 unix 目录中按大小列出前 10 个文件

> ID：14045735
> 
> 赞同：-2
> 
> 时间：2012-12-26T20:15:09.357
> 
> 标签：c++, file, list

我正在尝试使用 c++ 读取 unix 目录（包括所有子目录）并列出前 10 个最大的文件。我读过我可以使用#include dirent.h 并使用struct dirent，但是我无法将目录名称作为变量传递给opendir/readdir。基本上它无法识别它并说找不到文件/目录。请你能帮助我如何在 C++ 中执行此操作并打印出目录中前 10 个最大的文件吗？谢谢

```
DIR *dir;
struct dirent *ent;
dir = opendir ("homedir");
if (dir != NULL) {
    while ((ent = readdir (dir)) != NULL) {
        cout << ent->d_name <<endl;
    }

    closedir (dir);
} else {
    cout << "Can't open directory" << endl;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:36:00.630

您快到了。你有所有的文件名。有了这些，您可以[`stat`](http://linux.die.net/man/3/stat)获取每个文件的文件大小。当您对文件大小进行降序排序时，您有十个最大的文件。

```
struct stat buf;
stat(ent->d_name, &buf); 
```

请参阅手册页中的详细示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:30:03.447

您并没有真正提供足够的细节，但是当您递归阅读时，您是否将您阅读的名称后缀为以前的名称。读取目录不会更改当前目录，因此您的函数应该或多或少类似于：

```
标准::向量
递归读取目录（std::string const& 路径）
{
    std::vector 结果；
    *对于路径中的每个名称，*
        如果*是目录*
            结果.插入（
                结果.end(),
                递归读取目录（路径 + '/' + 文件名））；
        别的
            results.push_back(FileInfo(path + '/' + filename));
    返回结果；
}

```

在 的构造函数中`FileInfo`，用于`stat`获取大小。获得结果后，按大小排序，然后输出前 10 个。

# sql - create-table 中的 case 语句

> ID：14045738
> 
> 赞同：4
> 
> 时间：2012-12-26T20:15:26.653
> 
> 标签：sql, postgresql, create-table

在创建表/列时，如何在 SQL => PostgreSQL 中使用“java if 语句”？

```
 CREATE TABLE Store(
           Discount INT 
                AS CASE 
         WHEN SOLD_Amount>100000 THEN 2
         WHEN SOLD_Amount>500000 THEN 5
         WHEN SOLD_Amount>1000000 THEN 10
         ELSE 0
     END       
           NOT NULL) 
```

这可能是错误的，请告诉我们，社区如何做这种行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T20:19:46.980

您在这里寻找的是一个计算列，Postgres 不直接支持它。您可以在视图中实现它，如下所示：

```
CREATE VIEW someview AS
SELECT SOLD_Amount,
     CASE 
         WHEN SOLD_Amount>100000 THEN 2
         WHEN SOLD_Amount>500000 THEN 5
         WHEN SOLD_Amount>1000000 THEN 10
         ELSE 0
     END As Discount 
```

或者您可以使用触发器在插入/更新时填充列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T20:51:50.353

您可以使用特殊的 PostgreSQL 功能：“生成”列。

根据现有表，说：

```
CREATE TABLE store (sold_amount int, ...): 
```

您可以创建此特殊功能：

```
CREATE FUNCTION store_sold_amount(rec store)
  RETURNS int LANGUAGE SQL IMMUTABLE
AS
 $func$
 SELECT CASE
         WHEN rec.sold_amount > 100000 THEN 2
         WHEN rec.sold_amount > 500000 THEN 5
         WHEN rec.sold_amount > 1000000 THEN 10
         ELSE 0 END;
 $func$; 
```

然后可以查询：

```
SELECT s.amount, s.store_sold_amount
FROM   store s; 
```

这些相关问题下的更多信息：
[如何根据其他列的值和选择在 postgres 中创建列？](https://stackoverflow.com/questions/11364254/how-can-i-create-a-column-in-postgres-from-values-and-selections-based-on-other)
[将常见查询存储为列？](https://stackoverflow.com/questions/11165450/store-common-query-as-column)

# visual-studio-2010 - 为什么在opencv中读取avi文件时这个while循环会中断？

> ID：14045739
> 
> 赞同：0
> 
> 时间：2012-12-26T20:15:30.960
> 
> 标签：visual-studio-2010, opencv

```
int main(int argc, char* argv[]) {
ofstream file;
file.open("Motion.dat");
int frame_number = 0;
CvCapture* capture = cvCreateFileCapture("Cricketc1.avi");
CvCapture* capture1 = cvCreateFileCapture("Cricketc1.avi");

IplImage* imgsize  = NULL;
IplImage *img1     = NULL;
IplImage *img2     = NULL;
IplImage *vidFrame = NULL;
IplImage *imggray1 = NULL;
IplImage *imggray2 = NULL;
IplImage *imggray3 = NULL;

cvNamedWindow("Video", 0);
cvNamedWindow("Video1", 0);
imgsize = cvQueryFrame(capture1);
assert(imgsize);
CvSize sz = cvGetSize(imgsize);
cvReleaseCapture(&capture1);
imggray1 = cvCreateImage(sz, IPL_DEPTH_8U, 1);
imggray2 = cvCreateImage(sz, IPL_DEPTH_8U, 1);
imggray3 = cvCreateImage(sz, IPL_DEPTH_8U, 1);

while (true) {
    frame_number++;
    img1 = cvQueryFrame(capture);
    if(img1->imageData == NULL)
        break;
    cvCvtColor(img1, imggray1, CV_RGB2GRAY);

    img2 = cvQueryFrame(capture);
    if(img2->imageData == NULL)
        break;
    cvCvtColor(img1, imggray1, CV_RGB2GRAY);

            cvAbsDiff( imggray1, imggray2, imggray3 );
            CvScalar sumDiff = cvSum (imggray3);
    cout << sunDiff.val[0] << sunDiff.val[1] << sunDiff.val[2] << endl;
    cvWaitKey(40);
}
cvReleaseCapture(&capture);
cvDestroyAllWindows();
file.close();
system("Pause");
return 0;
} 
```

@ 25 fps 的视频共有 1251 帧。

但循环在`frame_number`等于 625 处中断，在 line `if(img2->imageData == NULL)`。

如果我在 while 循环之间进行任何计算，则主要会出现此错误。一个简单的 cvShowImage() 可以正常工作，但任何其他操作都会导致此错误出现。

这是之后出现的错误： `Unhandled exception at 0x00221de7 in getMotion2.exe: 0xC0000005: Access violation reading location 0x00000044.`

问题是什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T22:29:57.117

您正在循环中从同一个 cvCapture* 读取图像两次：`img1 = cvQueryFrame(capture);`和`img2 = cvQueryFrame(capture);`. 如果您将第二行更改为`img2 = cvQueryFrame(capture2);`它应该可以正常工作。

# python - pip 尝试卸载系统包

> ID：14045746
> 
> 赞同：0
> 
> 时间：2012-12-26T20:16:02.870
> 
> 标签：python, django, pip, webfaction

我在 webfaction 上使用 pip，它一直在尝试卸载系统包，然后失败。例如，如果我尝试安装 Fabric，则要求之一是`pycrypto`. 当它试图卸载它时，它会失败。

反正有没有告诉 pip 不要这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T21:31:40.000

这是一个常见的使用场景`virtualenv`（除了......一直）。

围绕一个干净的环境构建您的应用程序，`virtualenv`这样您就不必在权限受限的环境中（大部分）再次考虑系统包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:10:22.540

我的猜测是您已经使用该`--system-site-packages`选项创建了 virtualenv，因此它可以使用系统范围内安装的一些软件包。

如果这确实是您所做的，请尝试创建一个干净的 virtualenv，并在其中安装所有依赖项。这样，您永远不必考虑在系统范围内安装了哪些软件包以及在 virtualenv 中安装了哪些软件包。

为此，您可以使用`--no-site-packages`，它现在已成为默认的 virtualenv 选项。

# c# - 如何将 wcf 服务仅限于一个客户端应用程序

> ID：14045747
> 
> 赞同：1
> 
> 时间：2012-12-26T20:16:04.363
> 
> 标签：c#, asp.net, wcf, wcf-security

我们有一个 WCF 服务，使用 WSHttpBinding 并将安全模式设置为传输，因为我们使用的是 SSL。我们还被要求确保该服务只能由使用它的 1 个 Web 应用程序调用，有没有办法阻止其他应用程序与它通信？

应用程序和服务都在公司的 Intranet 中运行，但该 Intranet 上也会有其他应用程序，因此他们希望我们将它们屏蔽掉。我们尝试设置传输的clientCredentialType =“Windows”，但是每当访问该站点时都会提示登录，用户不希望这样，因为一旦站点出现他们就已经登录了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:30:55.870

从这里开始以获得概述 [http://wcfsecurityguide.codeplex.com/](http://wcfsecurityguide.codeplex.com/) 一些简单的阅读......

快速的答案在于如何唯一标识 Web 应用程序？它在 IIS 服务器上有自己的 APP 池吗？因此可以有自己的用户。此用户是否在同一个 Active Directory 上。然后您可以基于应用程序用户的安全性。

您可能会使用防火墙来确保流量仅来自该 Web 服务器。您可以使用颁发给该服务器的 X.509 证书并将绑定更改为所需的 X.509。

如果不了解更多关于环境的信息，很难知道该推荐什么。指南很好。从一目了然的解决方案开始（第 13 页），以了解您的选择并从那里跳来跳去。除非您有足够的耐心阅读指南；-)

# c - 在c中使用位图文件结构操作位图图像文件

> ID：14045753
> 
> 赞同：1
> 
> 时间：2012-12-26T20:16:24.597
> 
> 标签：c, file, bitmap, structure, bitmapimage

我想实现一个简单的基于命令行的图像编辑器。该程序将提供一个基于文本的菜单，它为用户提供了几个操作 Windows 位图 (.bmp) 图像文件的功能。该菜单将包括加载图像、旋转图像、镜像、保存图像和退出选项。加载图像选项将用于打开和读取给定位图文件中的像素值。此选项还将打印给定文件的基本属性，例如尺寸和总大小。旋转和镜像选项将处理先前读取的像素值。在应用这些选项之前，必须加载图像。保存选项会将内存中的像素值保存到具有给定文件名的位图文件中。

关于这个项目和位图文件结构，您向我推荐哪种方法？

如果您就某个特定主题（例如加载文件）给我建议，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-08T21:40:22.593

此函数用于将 bmp 文件加载到内存中。您必须首先声明一个具有 bmp 结构的头文件

```
BMP* load_BMP(char *filename);

BMP *bmp;       // local integer for file loaded
FILE *in;       // pointer for file opening
int rowsize;   

int row, col, color, i;
unsigned char b;

in=fopen(filename,"rb"); // open binary file
if (in==NULL)
{
    printf("Problem in opening file %s.\n",filename);
    return NULL;
}

bmp=(BMP*) malloc(sizeof(BMP)); //memory allocation
if (bmp==NULL)
{
    printf("Not enough memory to load the image.\n");
    return NULL;
}

fread(bmp->BM,2,1,in);
if (bmp->BM[0]!='B' || bmp->BM[1]!='M')
{
    printf("Bad BMP image file.\n");
    free(bmp);
    return NULL;
}

fread(&bmp->fileSize,4,1,in);
fread(&bmp->Reserved1,2,1,in);
fread(&bmp->Reserved2,2,1,in);
fread(&bmp->imageOffset,4,1,in);
fread(&bmp->imageHeaderSize,4,1,in);
fread(&bmp->imageWidth,4,1,in);

rowsize=4*((3*bmp->imageWidth+3)/4); //calculate rowsize because of padding

fread(&bmp->imageHeight,4,1,in);
fread(&bmp->colorPlanes,2,1,in);
fread(&bmp->compressionMethod,4,1,in);
fread(&bmp->imageSize,4,1,in);
fread(&bmp->hPPM,4,1,in);
fread(&bmp->vPPM,4,1,in);
fread(&bmp->paletteColors,4,1,in);
fread(&bmp->paletteImportantColors,4,1,in);

bmp->data=(unsigned char*) malloc(bmp->imageSize); //allocate memory for image data array
if (bmp->data==NULL)
{
    printf("There is not enough memory to load the image\n");
    free(bmp);
    return NULL;
}

for(row=0;row<bmp->imageHeight;row++)  //read picture data
{
    for(col=0;col<bmp->imageWidth;col++)
        for(color=0;color<=2;color++)
            fread(&bmp->data[row*rowsize+3*col+color],
            sizeof(unsigned char),1,in);

    //read extra bytes for end of row padding
    for(i=0;i<rowsize-3*bmp->imageWidth;i++)
        fread(&b,1,1,in);
}

fclose(in);
return bmp; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:20:59.720

如果您真的想使用 C，请尝试 libbmp 库[http://code.google.com/p/libbmp/](http://code.google.com/p/libbmp/)

但是，我建议使用 C#，那么使用 System.Drawing 命名空间就可以轻松完成任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T20:21:17.663

[libbmp](http://code.google.com/p/libbmp/)将使您的程序实现起来几乎是微不足道的。

# c# - LINQ 在列表中左连接时遇到问题

> ID：14045758
> 
> 赞同：1
> 
> 时间：2012-12-26T20:17:08.740
> 
> 标签：c#, linq

我有两个`List<FileInfo>`列表，`SourceFiles`并且`DestFiles`. 我想构建一个 LINQ 查询，它将返回文件名在`Source`但不在的项目列表`Dest`，即左连接。

我的数据集`SourceFiles`是：

```
folder1\a.txt
folder1\b.txt
folder1\c.txt
folder1\d.txt 
```

`DestFiles`是：

```
folder2\a.txt
folder2\b.txt
folder2\c.txt 
```

所以查询应该返回 `folder1\d.txt`。

按照[MSDN 示例](http://msdn.microsoft.com/en-us/library/bb397895.aspx)，我尝试使用 LINQ 语法：

```
var queryX = from s in SourceFiles
             join d in DestFiles
             on s.Name equals d.Name
             into SourceJoinDest
             from joinRow in SourceJoinDest.DefaultIfEmpty()
             select new
             {
                 joinRow.FullName
             }; 
```

并使用扩展方法：

```
var query = SourceFiles.GroupJoin(DestFiles,
                                    source => source.Name,
                                    dest => dest.Name,
                                    (source,dest) => new
                                    {
                                        path = source.FullName
                                    }).Select(x => x.path.DefaultIfEmpty()) 
```

但是这些都不起作用；LINQ 语法版本返回`Object reference not sent to an instance of an object`，扩展版本返回`Enumeration yielded no results.`

我意识到这些查询只返回一组`FullName`属性，而不是完整的`FileInfo`对象；我有接受每个`FullName`并返回 a 的代码，`FileInfo`并为查询中的每个项目执行此操作以重建列表。但是，如果有办法`FileInfo`直接从查询中返回 a，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T20:53:19.713

我认为这不是`Join`理想的工具。基本上你正在寻找一个`Except`. 内置`Except`没有通过 lambda 指定属性的重载。您将必须创建自己的`IEqualityComparer`. 但是，您可以这样做：

```
var excepts = SourceFiles.Where(c => !DestFiles.Any(p => p.Name == c.Name)).ToList(); 
```

或者，要仅选择完整路径，您可以`Select`在最后使用。

```
var excepts = SourceFiles.Where(c => !DestFiles.Any(p => p.Name == c.Name))
                         .Select(f => f.FullName).ToList(); 
```

* * *

我建议使用扩展方法来做快速`Except`和`Intersect`.

```
public static IEnumerable<U> Except<R, S, T, U>(this IEnumerable<R> mainList, 
                                                IEnumerable<S> toBeSubtractedList,
                                                Func<R, T> mainListFunction, 
                                                Func<S, T> toBeSubtractedListFunction,
                                                Func<R, U> resultSelector)
{
    return EnumerateToCheck(mainList, toBeSubtractedList, mainListFunction, 
                            toBeSubtractedListFunction, resultSelector, false);
}

static IEnumerable<U> EnumerateToCheck<R, S, T, U>(IEnumerable<R> mainList, 
                                                   IEnumerable<S> secondaryList,
                                                   Func<R, T> mainListFunction, 
                                                   Func<S, T> secondaryListFunction,
                                                   Func<R, U> resultSelector,
                                                   bool ifFound)
{
    foreach (var r in mainList)
    {
        bool found = false;
        foreach (var s in secondaryList)
        {
            if (object.Equals(mainListFunction(r), secondaryListFunction(s)))
            {
                found = true;
                break;
            }
        }

        if (found == ifFound)
            yield return resultSelector(r);
    }

    //or may be just
    //return mainList.Where(r => secondaryList.Any(s => object.Equals(mainListFunction(r), secondaryListFunction(s))) == ifFound)
    //               .Select(r => resultSelector(r));
    //but I like the verbose way.. easier to debug..
}

public static IEnumerable<U> Intersect<R, S, T, U>(this IEnumerable<R> mainList, 
                                                   IEnumerable<S> toIntersectList,
                                                   Func<R, T> mainListFunction,
                                                   Func<S, T> toIntersectListFunction,
                                                   Func<R, U> resultSelector)
{
    return EnumerateToCheck(mainList, toIntersectList, mainListFunction, 
                            toIntersectListFunction, resultSelector, true);
} 
```

现在在你的情况下，你可以这样做：

```
var excepts = SourceFiles.Except(DestFiles, p => p.Name, p => p.Name, p => p.FullName)
                         .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:53:30.290

而不是使用 a`join`你可能能够处理这个[`.Except()`](http://msdn.microsoft.com/en-us/library/bb300779.aspx)

```
var enumerable = sourceFiles.Except(destFiles, new FileInfoComparer<FileInfo>((f1, f2)=>f1.Name == f2.Name, f=>f.Name.GetHashCode())); 
```

`.Except()`接受一个`IEqualityComparer<T>`您可以自己编写或使用接受 lambda 的包装器的方法。

```
 class FileInfoComparer<T> : IEqualityComparer<T>
    {
        public FileInfoComparer(Func<T, T, bool> equals, Func<T, int> getHashCode)
        {
            _equals = equals;
            _getHashCode = getHashCode;
        }

        readonly Func<T, T, bool> _equals;
        public bool Equals(T x, T y)
        {
            return _equals(x, y);
        }

        readonly Func<T, int> _getHashCode;
        public int GetHashCode(T obj)
        {
            return _getHashCode(obj);
        }
    } 
```

使用一些示例数据运行它会产生一个`FileInfo`对象，其中包含`"d.txt"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T20:55:20.500

你几乎做到了。但是您只需要获取那些没有加入目标文件的源文件：

```
var query = from s in SourceFiles
            join d in DestFiles
                on s.Name equals d.Name into g
            where !g.Any() // empty group!
            select s; 
```

# typescript - “名称'Size'在当前范围内不存在”即使我已经引用它并且它没有突出显示？

> ID：14045759
> 
> 赞同：2
> 
> 时间：2012-12-26T20:17:10.550
> 
> 标签：typescript

# 错误信息

> 编译错误。有关详细信息，请参阅错误列表 .../Scripts/gallery.ts(13,15)：当前范围内不存在名称“Size”

## 画廊.ts

```
/// <reference path="jquery.d.ts" />
/// <reference path="jquery.custom.js" />

(function ($) {
    var $body = $(document.body);
    var $win = $(window);
    var animTime = 1000;
    var $cg = $('#control_grid').data('flash', false);

    function fitImage(img, max, enlarge) {
        var ratio = Math.max(img.width / max.width, img.height / max.height);
        if (ratio < 1 && !enlarge) ratio = 1;
        return Size(Math.round(img.width / ratio), Math.round(img.height / ratio));
    }

    ... 
```

## jquery.custom.js

```
function Size(w, h) {
    return {
        'width': w,
        'height': h
    };
}

... 
```

## 问题

当我将鼠标悬停`gallery.ts`在 Visual Studio 中的“大小”上时，它会调出正确的定义，因此很明显它可以找到该功能。那么为什么 TS 编译器会给我这个错误呢？

该`Size()`函数位于根级别`jquery.custom.js`，它应该具有全局范围，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T22:42:32.543

您不会通过引用 JavaScript 文件来获得类型信息。您可以在 TypeScript 中编写该函数，也可以为它创建一个定义文件，即`jquery.custom.d.ts`.

# android - 是否可以在一个版本的 styles.xml 中编写代码并让其他版本引用该代码？

> ID：14045764
> 
> 赞同：0
> 
> 时间：2012-12-26T20:17:57.190
> 
> 标签：android, xml, styles

如果我正在开发一个可以使用任何版本的 styles.xml 的应用程序，是否可以在该文件的一个版本中编写代码并让其他版本引用该代码，而不必多次重复代码？

我正在使用 Eclipse，它有多个版本的 styles.xml：

资源 -> 值 -> 样式.xml

res -> values-v11 -> styles.xml

res -> values-v14 -> styles.xml

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:22:03.357

是的，可以访问在较低 api 级别版本中声明的内容。

# android - 等待 ASyncTask 完成或设置变量

> ID：14045765
> 
> 赞同：13
> 
> 时间：2012-12-26T20:18:07.090
> 
> 标签：android, android-asynctask

我正在尝试将活动中的变量设置为我的 AsyncTask 的结果。我读过我不能返回一个变量，我必须在我的活动中设置变量，然后在`onPostExecute`方法中更改它。

我的问题是，在 AsyncTask 完成后，我需要使用该变量。我遇到了麻烦，因为到目前为止我尝试过的所有解决方案都会导致 UI 冻结然后无响应。

到目前为止我已经尝试过：

```
while (!task.isCancelled()) {
    // Wait... 
} 
```

和

```
while (variable == null) { 
    // Wait ...
} 
```

我正在做的是将变量从 AsyncTask 传递到我的 Activity 的最佳方法吗？如果是，那么我如何在不锁定 UI 的情况下等待任务在活动中完成？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-26T21:27:59.737

如果您依赖于 AsyncTask 的结果，则可以执行此操作。

```
Object result = asyncTask.execute().get(); 
```

结果的类型是 doInBackground() 方法中的返回类型。但是你的主线程将一直等到任务完成。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-26T21:21:47.083

只需将变量更改后要执行的代码放入函数中，然后从 onPostExecute 调用此函数。

# sql - Sql 视图 vs jdbc select-join，在哪里抽象？

> ID：14045766
> 
> 赞同：0
> 
> 时间：2012-12-26T20:18:07.620
> 
> 标签：sql, stored-procedures, jdbc, abstraction, sql-view

我有 3 个表格（见下文），`Table A`描述一个产品，`Table B`保存不同日期的库存信息，并`Table C`保存不同日期的每种产品的价格。

```
 Table A
 ------------------
 product_id    product_name
 1             book
 2             pencil
 3             stapler
 ...           ...

 Table B
 ------------------
 product_id    date_id     quantity
 1             2012-12-01  100
 1             2012-12-02  110
 1             2012-12-03  90
 2             2012-12-01  98
 2             2012-12-02  50
 ...           ...         ...

 Table C
 -------------------
 product_id   date_id      price
 1            2012-12-01   10.29
 1            2012-12-02   12.12
 2            2012-12-02   32.98
 3            2012-12-01   10.12 
```

在我的 java 应用程序的许多部分中，我想知道每个产品的美元价值是多少，所以我最终做了以下查询

```
 select 
      a.product_name,
      b.date_id,
      b.quantity * c.price as total
 from A a
 join B b on a.product_id = b.product_id
 join C c on a.product_id = c.product_id and b.date_id = c.date_id
 where b.date_id = ${date_input} 
```

我今天有一个想法，我可以让上面的查询成为一个视图（减去日期条件），然后查询特定日期的视图，这样我的查询看起来像

```
 select * from view where date_id = ${date_input} 
```

我不确定这种逻辑的适当抽象级别在哪里。它应该在 java 代码中（从 pref 文件中读取），还是编码到数据库中的视图中？

我不想把它作为一个观点的唯一原因是，随着时间的推移，加入会变得昂贵，因为要涵盖的日期越来越多，而且我通常只对过去一个月的数据感兴趣. 也许存储过程更好？那是抽象这个逻辑的好地方吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:21:02.250

如果视图被正确实现，那么在没有视图的情况下查询将相同的情况下，您永远不会看到最差的性能。更多日期不会影响性能，因为您有此视图。

制作视图，在这种情况下它是正确的抽象。

# shell - 为 cron 执行多个 shell 脚本的 shell 脚本

> ID：14045768
> 
> 赞同：0
> 
> 时间：2012-12-26T20:18:19.217
> 
> 标签：shell, cron

我是使用 Linux shell 脚本和 cron 的新手。如果我从命令行运行 pubspg1.sh - 它运行得很好，但是当使用 cron 运行它时 - 没有任何反应。也许我没有正确设置脚本以在 cron 中运行？注意：/path... 是 shell 脚本的完整路径。

在 cron 上，我有这个：

```
30 22 * * 2 sh /path... /pubspg1.sh 
```

pubspg1.sh 脚本如下所示：

```
#!/usr/bin/bash

/usr/bin/sh /path... /pub1pg1.sh

/usr/bin/sh /path... /pub2pg1.sh

/usr/bin/sh /path... /pub3pg1.sh

/usr/bin/sh /path... /pub4pg1.sh 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:41:09.493

1.  如果您正在使用 sh ，则需要更改`/usr/bin/bash`为in 脚本（您可以通过键入来检查该通行证），然后您需要从脚本中删除所有内容；`%path_to_SH%/sh``which sh``/usr/bin/`
2.  尝试检查权限以执行该脚本以获得权限；
3.  你可以做你的脚本可执行文件（chmod a+x %script%），然后把它的完整路径放在没有`sh`.

PS 并且可以肯定的是，你正在运行 cron-daemon 或 cron.service（如果你使用的是 systemd）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:35:52.590

1.  确保在最后一个 crontab 条目之后至少有一个空行。
2.  将 sh 更改为 bash
3.  确保您的路径不包含需要转义的特殊字符（例如，%）

# php - PHP Facebook Stream未定义属性错误？

> ID：14045770
> 
> 赞同：0
> 
> 时间：2012-12-26T20:18:32.870
> 
> 标签：php, facebook, curl, stream

我遵循了为我创建的网站创建 facebook 帖子流的教程。流运行良好，现在已经完成了一段时间，但我刚刚再次检查了网站，现在它给了我一个错误。这是我正在使用的一些代码，主 foreach 循环似乎给了我一个错误：

我删除了一些 url 字符串

```
ini_set('display_errors', 1);
error_reporting(E_ALL);

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'https://graph.facebook.com/171614522965940/REMOVED SOME FOR SECURITY');

curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$facebook_raw = curl_exec($ch);
$facebook_json = json_decode($facebook_raw);

$facebook_data = array();
foreach($facebook_json->data as $item) {
    if($item->from->id == '658751738') {
        $facebook_item = array(
            'content' => $item->message,
            'date' => strtotime($item->created_time),
            'type' => 'facebook'
        );

        array_push($facebook_data, $facebook_item);
    }
} 
```

我得到的错误是：

```
Notice: Undefined property: stdClass::$data in /nfs/c09/h03/mnt/133481/domains/pass-out.org.uk/html/inc/fbfeed.php on line 16 Warning: Invalid argument supplied for foreach() in /nfs/c09/h03/mnt/133481/domains/pass-out.org.uk/html/inc/fbfeed.php on line 16 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:32:00.333

如果您在 Web 浏览器中打开 [完整] API URL，它会返回什么？或向我们展示 `var_dump($facebook_json)`其中包含的内容。JSON 响应中解释了您可能遇到访问错误或其他错误。

# javascript - 重复函数而不是调用函数

> ID：14045772
> 
> 赞同：0
> 
> 时间：2012-12-26T20:18:49.477
> 
> 标签：javascript, jquery

我试图在我的 javascript 中的 click 方法上重复一个回调函数。我想要做的就是引用来自 function() 的代码。在我的#previous 和#next click 方法中，我不想调用滑动开关。我想在我的代码中运行第 4 行的代码。我意识到我需要取出滑动开关的函数调用，我只是想参考它进行讨论。

```
$holder.quicksand($filteredData, {
        duration: 800,
        easing: 'easeInOutQuad'
line 4      }, function() {
        $(".portfolioLink").click(function(){

        $(".inner-content.portfolio").show();

        clearInterval($('#slides').data('interval'));
        $("ul.pagination li").removeClass("current");

        var number = $(this).attr("data-id");

        var slideID = $(this).parent().attr("id");

        $("#previous").click(function() {
            slideID--;
            clearInterval($('#slides').data('interval'));
            $("ul.pagination li").removeClass("current");
            slideswitch(slideID);
        });

        $("#next").click(function() {
            slideID++;
            clearInterval($('#slides').data('interval'));
            $("ul.pagination li").removeClass("current");
            slideswitch(slideID);
        }); 
```

我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T20:30:21.673

```
$holder.quicksand($filteredData, {
        duration: 800,
        easing: 'easeInOutQuad'
}, myFunction); 
```

以及您的函数定义（您的代码存在一些问题，因此可能结构不正确：

```
function myFunction() {
    $(".portfolioLink").click(function(){ // where is this supposed to end?

    $(".inner-content.portfolio").show();

    clearInterval($('#slides').data('interval'));
    $("ul.pagination li").removeClass("current");

    var number = $(this).attr("data-id");

    var slideID = $(this).parent().attr("id");

    $("#previous").click(function() {
        slideID--;
        clearInterval($('#slides').data('interval'));
        $("ul.pagination li").removeClass("current");
        slideswitch(slideID);
    });

    $("#next").click(function() {
        slideID++;
        clearInterval($('#slides').data('interval'));
        $("ul.pagination li").removeClass("current");
        slideswitch(slideID);
    });
} 
```

此外，您不应该在计划多次调用的函数中绑定事件。

# mysql - CakePHP 模型关联 - 为 HABTM 检索关联模型时的随机顺序

> ID：14045774
> 
> 赞同：0
> 
> 时间：2012-12-26T20:19:01.667
> 
> 标签：mysql, cakephp, model-associations

我正在检索数据：

```
$mydata = $this->ProductList->find('all', array('order' => 'rand()', 'conditions' => array('name' => 'we love'))); 
```

我已经建立了与 Product 模型的 HABTM 关系。如您所见，我正在获取“我们喜欢”列表中的所有产品。现在，我希望我检索的那些产品是随机的。但它们不是，相反，MySQL 在 ProductList 模型上是随机的，正如您在 SQL 中看到的那样。这是为什么？我怎样才能获得产品的随机提取呢？

生成的 MySQL 查询：

```
SELECT `ProductList`.`id`, `ProductList`.`name` FROM `database`.`product_lists` AS `ProductList` WHERE `name` = 'we love' ORDER BY rand() ASC

SELECT `Product`.`id`, `Product`.`category_id`, `Product`.`name`, `Product`.`price`, `Product`.`description`, `ProductListsProduct`.`product_list_id`, `ProductListsProduct`.`product_id` FROM `database`.`products` AS `Product` JOIN `database`.`product_lists_products` AS `ProductListsProduct` ON (`ProductListsProduct`.`product_list_id` = 3 AND `ProductListsProduct`.`product_id` = `Product`.`id`) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T01:45:27.420

**编辑：**

有很多不同的方法可以解决这个问题；从用户的产品列表中获取随机产品。您可以使用 PHP 来完成 - 只需找到所有产品，然后使用`rand()`从返回的数组中挑选。您可以设置模型查询条件。名单还在继续……

我可能会为 ProductList 中的 Product 模型创建一个别名，称为 RandomProduct。您可以在设置关系时为检索到的产品设置查询：

```
public $hasMany = array(
    'RandomProduct' => array(
        'className'     => 'Product',
        'foreignKey'    => 'product_list_id',
        'order'         => 'Rand()',
        'limit'         => '1',
        'dependent'     => true
    )
); 
```

然后，您可以使用可包含行为，以便仅在需要时检索此模型。（如果`recursive`发现值大于 -1，则不需要这样做，但我通常将其作为最佳实践，以便我的模型只查询他们需要的数据。）以下将返回任何名为“我们爱”的 ProductList以及与该列表关联的“随机”产品。

```
$mydata = $this->ProductList->find(
    'all', 
    array(
        'conditions' => array(
            'name' => 'we love'
            )
        ),
        'contain' => array(
            'RandomProduct'
        )
    ); 
```

# asp.net-mvc - 页面重定向不起作用

> ID：14045777
> 
> 赞同：4
> 
> 时间：2012-12-26T20:19:15.613
> 
> 标签：asp.net-mvc, asp.net-mvc-3

嗨，我正在尝试在创建帐户后重定向到新控制器，但由于某种原因，代码不起作用。这是我的代码：

```
[HttpPost]
public ActionResult Register(Register model)
{
    if(ModelState.IsValid)
    {
        try
        {
            Membership.CreateUser(model.Username, model.Password, model.EMail);
            Roles.AddUserToRole(model.Username, "subscriber");
            RedirectToAction("AccountCreated" , "Account");
        } 
        catch(Exception ex)
        {
            ModelState.AddModelError("" , ex.Message);
        }
    }
    else
    {
        ModelState.AddModelError("" , "One or more fields are not completed");
    }
    return View(model);
}

public ActionResult AccountCreated()
{
    return View();
} 
```

我都试过了`RedirectToAction("AccountCreated" , "Account");`，`Redirect("~/Account/AccountCreated")`但都不起作用。在调试时，我注意到当它到达代码的那部分时，它会跳过它。

而且我知道应用程序不会抛出异常，因为它会创建帐户。

这里有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T20:25:35.977

您必须从您的操作中返回一个`ActionResult`，因此将行更改为

```
return RedirectToAction("AccountCreated" , "Account"); 
```

[请参阅Controller.RedirectToAction](http://msdn.microsoft.com/en-us/library/dd470594%28v=vs.98%29.aspx)的 MSDN 示例。

# java - 从大 WSDL 文件生成 Java 客户端

> ID：14045778
> 
> 赞同：1
> 
> 时间：2012-12-26T20:19:19.110
> 
> 标签：java, web-services, jakarta-ee, jax-ws, axis2

我有一个 wsdl 文件，我想创建一个客户端，该客户端将从该 wsdl 文件中调用服务。

wsdl文件有300多个方法的主要问题，所以使用工具生成客户端代码不是一个选项，我已经尝试使用eclipse工具，但是存根类非常大（超过允许的65536）。

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:50:05.907

让服务公开 300 种方法是问题所在。跨服务拆分您的方法，您将能够使用标准工具生成客户端存根。

# sql - 使用什么数据类型在 SQL Server 数据库表中存储 MAC 地址？

> ID：14045779
> 
> 赞同：9
> 
> 时间：2012-12-26T20:19:27.963
> 
> 标签：sql, sql-server

我想将 MAC 地址存储在我的一个数据库表中，我应该使用什么数据类型？阅读 google 上的文章，我曾多次看到 Binary(8) 被提及。这是正确的方法吗？

另外，这对我来说没有意义，因为 MAC 地址是六组两个十六进制数字，你不会使用 Binary(6) 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T20:21:02.333

我根本不会用`Binary`。

我会用`CHAR(12)`.

虽然这实际上取决于您使用数据的目的 - 如果这仅用于显示，您可以简单地使用文本表示。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-26T22:05:39.580

为了更容易执行二进制操作，您可以将它们存储到 Binary(6) 您可以使用以下内置函数来查看二进制数据的十六进制可读值：

```
select top 10 master.sys.fn_varbintohexstr(mac) from macaddresses 
```

并将十六进制文本转换为二进制：

```
select CONVERT(binary(6), 'AABBCCDDEEFF', 2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-07T23:25:47.800

MAC 地址是 6 个十六进制数字的序列。这就是为什么将它存储为数字会很有效。使用 BIGINT。

# sql - 避免在一组记录中重复值

> ID：14045782
> 
> 赞同：3
> 
> 时间：2012-12-26T20:19:46.357
> 
> 标签：sql, oracle, etl

我确定这已经被回答过，但问题是我不知道如何寻找解决方案。

我有一个 Oracle 查询，它给了我这个结果：

```
ETA     Vessel   Line   POD   SZTP QTY
====    ======   ====   ===   ==== ===
26/12   MAEWIS   MAE    LIV   40RH  23
26/12   MAEWIS   MAE    PBL   40RH  12
26/12   APLMEN   APL    PTR   20DR  44
26/12   APLMEN   APL    TRU   20DR  22
27/12   APLMEN   APL    ECS   40RH   7
27/12   RICKEM   HPL    RTT   40RH  18 
```

我需要的是这个：

```
ETA     Vessel   Line   POD   SZTP QTY
====    ======   ====   ===   ==== ===
26/12   MAEWIS   MAE    LIV   40RH  23
                        PBL   40RH  12
        APLMEN   APL    PTR   20DR  44
                        TRU   20DR  22
27/12   APLMEN   APL    ECS   40RH   7
        RICKEM   HPL    RTT   40RH  18 
```

如果 ETA/VSL/LINE 中有很多 POD 和 SZTP，也许也可以这样做

有没有办法做到这一点？

这是我的查询：

```
select to_char(vv.eta, 'DY-DD/MM') eta,
  a.linevv_vv_vsl_id||'/'||vv.out_voy_nbr vessel,
  a.linevv_line_id line,
  a.discharge_port_id1 pod,
    b.sztp_id sztp,
    b.qty qty
from
  service_orders a,
  service_order_items b,
  vessel_visits vv 
where
   b.so_gkey = a.gkey and
   vv.vsl_id = a.linevv_vv_vsl_id and
   vv.out_voy_nbr = a.linevv_vv_out_voy_nbr and
   sub_type = 'VEPO' and
   ((vv.eta between sysdate and sysdate + 7) or (to_char(vv.ata, 'YYYY-MM-DD') =   to_char(sysdate, 'YYYY-MM-DD')))
order by to_char(vv.eta, 'YYYY-MM-DD') 
```

我正在使用 Pentaho ETL Tool Kettle 运行查询，并将数据流转换为 XML。因此，如果解决方案在 ETL 上，我也可以使用一些帮助来了解如何在 ETL 上进行操作。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T20:32:22.963

我更喜欢使用所有键正确定义所有行。但是，您可以这样做，您只需要识别每个分组的第一行。

```
with t as (<your query here with `to_char(eta, 'YYYY-MM-DD') as eta_yyyymmdd` added>)
select (case when seqnum_eta = 1 then eta else '' end) as eta,
       (case when seqnum_vessel = 1 then vessel else '' end) as vessel,
       (case when seqnum_line = 1 then line else '' end) as line,
       pod, sztyp, qty
from (select t.*, 
             row_number() over (partition by eta order by vessel, line, pod, sztp, qty) as seqnum_eta,
             row_number() over (partition by eta, vessel order by line, pod, sztp, qty) as seqnum_vessel,
             row_number() over (partition by eta, vessel, line order by pod, sztp, qty) as seqnum_line
      from t
     ) t
order by eta_yyyymmdd, t.vessel, t.line, t.pod, t.sztp, t.qty 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T21:21:25.243

记录是倒退的，例如：

```
 40DR         5
                                    40OT        12
                                FOS 20OT         1
                                GOA 40DR         5
                                LVN 20DR       100
                                LVN 20OT         3
                                MOI 40RH        22
                                VLC 20DR        30
                            MFR ALG 20FR         1
WED-26/12   CATSCHU/934N    CMD GOA 40DR        70
THU-27/12   CAPMORE/027S    CHI GYE 40RH         4
                                    20DR        50
                                    40RH        50
                                    40RH        50
FRI-28/12   URSULRI/066S    MAE PCR 20DR        50 
```

这是最终的查询：

```
with t as (select to_char(vv.eta, 'DY-DD/MM') eta,
  to_char(vv.eta, 'YYYY-MM-DD') as eta_yyyymmdd,
  a.linevv_vv_vsl_id||'/'||vv.out_voy_nbr vessel,
  a.linevv_line_id line,
  a.discharge_port_id1 pod,
    b.sztp_id sztp,
    to_char(b.qty, '9G999') containers,
    case when
      a.notes is null then '   '
      else a.notes end notes
from
  service_orders a,
  service_order_items b,
  vessel_visits vv 
where
   b.so_gkey = a.gkey and
   vv.vsl_id = a.linevv_vv_vsl_id and
   vv.out_voy_nbr = a.linevv_vv_out_voy_nbr and
   sub_type = 'VEPO' and
   ((vv.eta between sysdate and sysdate + 7) or (to_char(vv.ata, 'YYYY-MM-DD') = to_char(sysdate, 'YYYY-MM-DD')))
order by to_char(vv.eta, 'YYYY-MM-DD'))
select (case when seqnum_eta = 1 then eta else '   ' end) as eta,
       (case when seqnum_vessel = 1 then vessel else '   ' end) as vessel,
       (case when seqnum_line = 1 then line else '   ' end) as line,
       (case when seqnum_pod = 1 then pod else '   ' end) as pod,       
       sztp,
       containers,
       notes
from (select t.*, 
             row_number() over (partition by eta order by vessel, line, pod, sztp, containers, notes) as seqnum_eta,
             row_number() over (partition by eta, vessel order by line, pod, sztp, containers, notes) as seqnum_vessel,
             row_number() over (partition by eta, vessel, line order by pod, sztp, containers, notes) as seqnum_line,
             row_number() over (partition by eta, vessel, line, pod order by sztp, containers, notes) as seqnum_pod
      from t
     ) t
order by eta_yyyymmdd , vessel, line, pod, sztp, containers, notes 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T14:35:25.483

使用 SQL Plus break on 可能是最简单和最有效的，而不是编写复杂的查询：

```
break on deptno
Select deptno, empno, ename
 From scott.emp
Order by 1 
```

# vim - 如何找出当前颜色方案用于某些东西的某个颜色值？

> ID：14045784
> 
> 赞同：9
> 
> 时间：2012-12-26T20:19:46.887
> 
> 标签：vim, vim-plugin, statusline

我需要这个来完成我正在制作的插件，以便根据模式更改状态行的颜色。

但是我遇到了一个明显的问题，我怎么知道用户正在使用什么主题？即使我知道我不能为每个主题制作特定的颜色。

因此，例如，如何知道当前主题用于状态行的前景色和背景色。

编辑1：

如果我不清楚，我正在寻找一种方法来找出某些东西的`ctermfg`/`bg`和`guifg`/ `bg`。现在是状态栏。:)

编辑2：

显然，如果我这样做`:hi StatusLine`了，我会得到我需要的东西，但是我需要对其进行改进以仅获得价值，而不是全部。猜猜我将不得不使用一些正则表达式来找出价值。如果有人知道更简单的方法，请分享它（或者如果你已经用正则表达式弄清楚了）。谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-27T00:42:32.370

您可以使用该`synIDattr()`函数查询语法高亮的各种属性（如前景色和背景色）。确定高亮组的ID，`hlID()`可以使用。见`:help hlID()`：

```
:echo synIDattr(synIDtrans(hlID('StatusLine')), 'fg') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T20:26:49.533

你可以得到背景

```
:echo &background 
```

根据`:help background`也应该有一个`foreground`设置，但它对我不起作用。

**编辑：** 有变量`guibg`,`guifg`和`ctermbg`in`ctermfg``:hi[glight]`

# python - 为什么 pexpect 不能正确使用 shell 的输出？

> ID：14045795
> 
> 赞同：0
> 
> 时间：2012-12-26T20:20:54.813
> 
> 标签：python, pexpect

我正在运行 Solaris 5-10、python 2.6.2 和 pexpect 2.4

我在下面有一个非常简单的 python 脚本，它练习从 shell 发送和接收文本的功能。

我的理解是 pexpect([pexpect.TIMEOUT, x,y,z], timeout=w) 将返回*自上次调用 pexpect 以来*找到的匹配索引，但如果它花费的时间超过 w 秒，它将返回 0。

这是我非常简单的脚本：

```
#!/usr/bin/env python 

import pexpect 
myPrompt = " % " 

myShell = pexpect.spawn("/bin/tcsh") 
print "Sending 'JUNK-0' to shell" 
x = myShell.sendline("JUNK-0") 
y = myShell.expect([pexpect.TIMEOUT], timeout=1)               
print "y = %s" % y 
print myShell.before 
print "=" * 80 
print "\n\n" 

for i in range(2): 
    print "i = %d" % (i+1) 
    print "Sending 'JUNK-%d' to shell" % (i+1) 
    x = myShell.sendline("JUNK-%d" % (i+1)) 
    y = myShell.expect([pexpect.TIMEOUT, myPrompt], timeout=10)               
    print "y = %s" % y 
    print myShell.before 
    print "=" * 80 
    print "\n\n" 
```

仅供参考，我的 shell 提示符是“myMachine %”，但是在这个脚本中，我只是使用“%”来保持它的通用性。

当我运行它时，我看到以下输出：

```
Sending 'JUNK-0' to shell 
y = 0 
JUNK-0 
myMachine % JUNK-0 
JUNK-0: Command not found. 
myMachine % 
================================================================================ 

i = 1 
Sending 'JUNK-1' to shell 
y = 1 
JUNK-0 
myMachine 
================================================================================ 

i = 2 
Sending 'JUNK-2' to shell 
y = 1 
JUNK-0 
JUNK-0: Command not found. 
myMachine 
================================================================================ 
```

为什么我看到“JUNK-0”始终在输出中重复出现？它应该被第一个 myShell.expect() 语句消耗掉，但它不断出现。为什么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:05:49.383

您发布的示例中发生的是对 pexpect 输出的错误处理。当 pexpect 找到与期望表达式匹配的内容时，它会使用正确的值填充***before***、***match***和***after的字段。***pexpect 文档中的这句话可能会有所帮助：

"*找到匹配后，将设置实例属性'before'，'after'和'match'。在'before'中可以看到匹配之前读取的所有数据。在'after'中可以看到匹配的数据'。重新匹配中使用的re.MatchObject将在'match'中。如果发生错误，则'before'将设置为到目前为止读取的所有数据，'after'和'match'将为None。* “

在您的情况下，第一个期望会产生以下结果：

**之前**：JUNK-0 myMachine

**之后**：% JUNK-0

请注意，after不会完全消耗，只有%会消失。因此，在您的下一个期望中，您会得到：

**之前**：JUNK-0 JUNK-0：找不到命令。我的机器

**之后**：% JUNK-1

据我所知，第一个期望（超时，超出 for 循环）不会消耗输出。

我认为如果你换行：

```
myShell.expect([pexpect.TIMEOUT], timeout=1) 
```

至

```
myShell.expect([pexpect.TIMEOUT, myPrompt], timeout=1) 
```

输出将同步，您将获得正确的输出。

希望这可以帮助。

# c++ - Slerp 问题，视角扭曲

> ID：14045796
> 
> 赞同：1
> 
> 时间：2012-12-26T20:20:55.677
> 
> 标签：c++, quaternions, linear-interpolation

我本质上是在研究一个用于[slerping](http://en.wikipedia.org/wiki/Slerp)的功能，虽然它有点工作，但它有一个奇怪的视角扭曲问题，我现在一直在努力解决这个问题。

```
Quaternion sLerp(Quaternion start, Quaternion end, float s)
{
    float dot = qDot(start, end);
    float theta = std::acos(dot);
    float sTheta = std::sin(theta);

    float w1 = sin((1.0f-s)*theta) / sTheta;
    float w2 = sin(s*theta) / sTheta;

    Quaternion Temp(0,0,0,0);

    Temp = start*w1 + end*w2;

    return Temp;
} 
```

本质上它正在做的（或应该做的）只是在两个值之间滑动以提供旋转，并且由此产生的结果被转换为旋转矩阵。但是出了问题的是一个可怕的，可怕的拉伸视图......由于某种原因，在旋转过程中它拉伸了所有东西，从所有东西开始太长/太薄，然后在开始变瘦之前达到一个更短的中点。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:37:42.283

您的 slerp 代码看起来不错，尽管通常会确保这样做，`dot>=0`否则，您将绕圈旋转很长一段路。一般来说，确保这一点也很重要，`dot!=1`因为您会遇到*被零除的*问题。

一个适当的四元数不应该拉伸视图。要么你为 or 传递非单位长度的四元数`start`，`end`要么你的四元数到矩阵的代码是可疑的（或者你的行为很奇怪，因为两个四元数之间的角度非常小，你几乎除以零）。

* * *

我将四元数转换为矩阵以在 OpenGL 中使用的代码：

```
// First row
glMat[ 0] = 1.0f - 2.0f * ( q[1] * q[1] + q[2] * q[2] );
glMat[ 1] = 2.0f * (q[0] * q[1] + q[2] * q[3]);
glMat[ 2] = 2.0f * (q[0] * q[2] - q[1] * q[3]);
glMat[ 3] = 0.0f;

// Second row
glMat[ 4] = 2.0f * ( q[0] * q[1] - q[2] * q[3] );
glMat[ 5] = 1.0f - 2.0f * ( q[0] * q[0] + q[2] * q[2] );
glMat[ 6] = 2.0f * (q[2] * q[1] + q[0] * q[3] );
glMat[ 7] = 0.0f;

// Third row
glMat[ 8] = 2.0f * ( q[0] * q[2] + q[1] * q[3] );
glMat[ 9] = 2.0f * ( q[1] * q[2] - q[0] * q[3] );
glMat[10] = 1.0f - 2.0f * ( q[0] * q[0] + q[1] * q[1] );
glMat[11] = 0.0f;

// Fourth row
glMat[12] = 0.0;
glMat[13] = 0.0;
glMat[14] = 0.0;
glMat[15] = 1.0f; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T21:02:11.487

你需要标准化四元数吗？

我认为以下几点：

```
float sTheta = std::sin(theta); 
```

应该：

```
float sTheta = sqrt(1.0f - sqr(theta)); 
```

# c - OSX 和 Linux 上的不同 pselect() 行为？

> ID：14045801
> 
> 赞同：2
> 
> 时间：2012-12-26T20:21:12.080
> 
> 标签：c, select, signals

我正在尝试用 实现一个基本的事件循环`pselect`，所以我阻止了一些信号，保存了信号掩码并将其与它一起使用，`pselect`以便仅在该调用期间传递信号。

如果在调用之外发送信号`pselect`，它会被阻塞直到`pselect`它应该被阻塞，但是它不会中断 pselect 调用。如果在 pselect 阻塞时发送信号，它将被处理并且 pselect 将被中断。此行为仅存在于 OSX 中，在 linux 中似乎可以正常运行。

这是一个代码示例：

```
#include <stdio.h>
#include <string.h>
#include <sys/select.h>
#include <errno.h>
#include <unistd.h>
#include <signal.h>

int shouldQuit = 0;

void signalHandler(int signal)
{
    printf("Handled signal %d\n", signal);
    shouldQuit = 1;
}

int main(int argc, char** argv)
{    
    sigset_t originalSignals;     
    sigset_t blockedSignals;
    sigemptyset(&blockedSignals);
    sigaddset(&blockedSignals, SIGINT);
    if(sigprocmask(SIG_BLOCK, &blockedSignals, &originalSignals) != 0)
    {
        perror("Failed to block signals");
        return -1;
    }

    struct sigaction signalAction;
    memset(&signalAction, 0, sizeof(struct sigaction));

    signalAction.sa_mask = blockedSignals;

    signalAction.sa_handler = signalHandler;

    if(sigaction(SIGINT, &signalAction, NULL) == -1)
    {
        perror("Could not set signal handler");
        return -1;
    }

    while(!shouldQuit)
    {
        fd_set set;
        FD_ZERO(&set);
        FD_SET(STDIN_FILENO, &set);
        printf("Starting pselect\n");
        int result = pselect(STDIN_FILENO + 1, &set, NULL, NULL, NULL, &originalSignals);
        printf("Done pselect\n");
        if(result == -1)
        {
            if(errno != EAGAIN && errno != EWOULDBLOCK && errno != EINTR)
            {
                perror("pselect failed");
            }
        }
        else
        {
            printf("Start Sleeping\n");
            sleep(5);
            printf("Done Sleeping\n");
        }
    }

    return 0;
} 
```

程序一直等到您在标准输入上输入内容，然后休眠 5 秒。为了产生问题，键入“a”以在标准输入上创建数据。然后，当程序处于休眠状态时，使用 Crtl-C 发送一个 INT 信号。

在 Linux 上：

```
Starting pselect
a
Done pselect
Start Sleeping
^CDone Sleeping
Starting pselect
Handled signal 2
Done pselect 
```

在 OSX 上：

```
Starting pselect
a
Done pselect
Start Sleeping
^CDone Sleeping
Starting pselect
Handled signal 2
^CHandled signal 2
Done pselect 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T22:27:15.767

确认它在 OSX 上以这种方式运行，如果您查看 pselect 的源代码（http://www.opensource.apple.com/source/Libc/Libc-320.1.3/gen/FreeBSD/pselect.c），你会明白为什么。

在 sigprocmask() 恢复信号掩码后，内核将信号传递给进程，然后调用您的处理程序。这里的问题是，可以在调用 select() 之前传递信号，因此 select() 不会返回错误。

[在http://lwn.net/Articles/176911/](http://lwn.net/Articles/176911/)上有更多关于这个问题的讨论- linux 曾经使用过类似的用户空间实现，但存在同样的问题。

如果您想在所有平台上使该模式安全，则必须使用 libev 或 libevent 之类的东西并让它们处理混乱，或者自己使用 sigprocmask() 和 select()。

例如

```
 sigset_t omask;
    if (sigprocmask(SIG_SETMASK, &originalSignals, &omask) < 0) {
        perror("sigprocmask");
        break;
    }

    /* Must re-check the flag here with signals re-enabled */
    if (shouldQuit) 
        break;

    printf("Starting select\n");
    int result = select(STDIN_FILENO + 1, &set, NULL, NULL, NULL);
    int save_errno = errno;
    if (sigprocmask(SIG_SETMASK, &omask, NULL) < 0) {
        perror("sigprocmask");
        break;
    }

    /* Recheck again after the signal is blocked */
    if (shouldQuit) 
        break;

    printf("Done pselect\n");

    if(result == -1)
    {
        errno = save_errno;
        if(errno != EAGAIN && errno != EWOULDBLOCK && errno != EINTR)
        {
            perror("pselect failed");
        }
    } 
```

您还应该对代码执行其他几项操作：

*   将您的“shouldQuit”变量声明为 volatile sig_atomic_t

    volatile sig_atomic_t shouldQuit = 0;

*   *始终*在调用任何其他函数（例如 printf()）之前保存 errno，因为该函数可能导致 errno 被另一个值覆盖。这就是为什么上面的代码在 select() 调用之后立即出现 errno。

真的，我*强烈*建议使用现有的事件循环处理库，如 libev 或 libevent - 我这样做，即使我*可以*编写自己的，因为它很容易出错。

# java - 悬停时更改 JList 项目背景颜色

> ID：14045813
> 
> 赞同：1
> 
> 时间：2012-12-26T20:22:24.387
> 
> 标签：java, swing, background-color, jlist, listcellrenderer

我试图在悬停时更改 JList 单元格的背景颜色，但我不知道该怎么做。这是我目前拥有的：

```
package cats.youtube.gui;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Rectangle;
import java.awt.event.MouseEvent;
import java.util.LinkedList;

import javax.swing.AbstractListModel;
import javax.swing.DefaultListCellRenderer;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.ListSelectionModel;
import javax.swing.border.EmptyBorder;

import cats.youtube.search.YoutubeSearchResult;

public class SearchResultsList extends JPanel{

    private class Renderer extends DefaultListCellRenderer{

        public Component getListCellRendererComponent(JList list, Object value, int index, boolean selected, boolean focused){
            final JTextArea area = new JTextArea(model.get(index).toString());
            area.setBorder(new EmptyBorder(5, 0, 5, 0));
            area.setForeground(selected || focused ? Color.WHITE : Color.BLACK);
            area.setBackground(selected || focused ? Color.RED : Color.WHITE);
            return area;
        }
    }

    public class Model extends AbstractListModel<String>{

        private LinkedList<YoutubeSearchResult> results;
        private Object lock;

        private Model(){
            results = new LinkedList<YoutubeSearchResult>();

            lock = new Object();
        }

        public int getSize(){
            return results.size();
        }

        public String getElementAt(final int i){
            return results.get(i).toString();
        }

        public YoutubeSearchResult get(final int i){
            return results.get(i);
        }

        public void add(final YoutubeSearchResult r){
            synchronized(lock){
            results.add(r);
            fireContentsChanged(this, 0, getSize());
            try{
                lock.wait(500L);
            }catch(InterruptedException e){
                e.printStackTrace();
            }
            }
        }

        public void remove(final YoutubeSearchResult r){
            results.remove(r);
            fireContentsChanged(this, 0, getSize());
        }

        public void removeAll(){
            results.clear();
            fireContentsChanged(this, 0, getSize());
        }
    }

    private JList<String> list;
    private JScrollPane scroll;
    private Model model;
    private Renderer renderer;

    public SearchResultsList(){
        super(new BorderLayout());

        list = new JList<String>(){
            public void processMouseMotionEvent(final MouseEvent e){
                super.processMouseMotionEvent(e);
                final int i = locationToIndex(e.getPoint());
                if(i > -1){
                    final Rectangle bounds = getCellBounds(i, i+1);
                    if(bounds.contains(e.getPoint())){
                        //           <--------- here is line 95
                    }
                }

            }
        };
        list.setModel(model = new Model());
        list.setCellRenderer(renderer = new Renderer());
        list.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

        add(scroll = new JScrollPane(list), BorderLayout.CENTER);
    }

    public Model getModel(){
        return model;
    }
} 
```

问题在第 95 行；我不知道该放什么。我尝试了多种方法，一种是通过我的渲染器调用该`getListCellRendererComponent`方法并像那样更改背景，但这不起作用。

悬停部分确实有效（它确实获得了正确的索引）我只是不知道在第 95 行放什么。如果有人可以帮助我，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T20:41:49.933

我个人会使用`MouseMotionListener`覆盖的`processMouseMotionEvent`，但这只是我。

您需要一些方法来告诉渲染器“突出显示”哪些行，我能想到的两种直接方法是......

1.  创建一个自定义`JList`，它具有设置/获取突出显示的行的方法。然后，您需要转换到此实现并询问适当的方法，并根据需要采取行动。
2.  在列表数据中提供一种方法，将行标记为突出显示或不突出显示。这将允许您直接查询数据。

第一种方法的优点是它将责任隔离到视图真正属于的地方。它确实具有您需要创建自定义的缺点`JList`。`getClientProperty`使用and方法可能更容易`putClientProperty`，这意味着您不需要自定义实现，也不需要在渲染器中投射列表，但它的缺点是对其他开发人员不明显。

第二种方法将显示和数据信息混合在一起，我不鼓励这样做，因为您真的想将这种东西分开；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-07T07:22:42.217

我是这样做的（解决方案：http: [//objectmix.com/java/73071-highlight-itemin-jlist-mouseenter-mouse-over.html](http://objectmix.com/java/73071-highlight-itemin-jlist-mouseenter-mouse-over.html)，第二条消息）：

```
private int mHoveredJListIndex = -1;

...

mList.addMouseMotionListener(new MouseAdapter() {
  public void mouseMoved(MouseEvent me) {
    Point p = new Point(me.getX(),me.getY());
    int index = mList.locationToIndex(p);
    if (index != mHoveredJListIndex) {
      mHoveredJListIndex = index;
      mList.repaint();
    }
  }
}); 
```

在你的渲染器中：

```
public class CellRenderer extends JComponent implements ListCellRenderer
{

  @Override
  public Component getListCellRendererComponent(JList aList, Object aValue, int aIndex, boolean aIsSelected, boolean aCellHasFocus)
  {
    Color backgroundColor = mHoveredJListIndex == aIndex ? Color.gray : Color.white;
    JPanel pane = new JPanel(new BorderLayout()); // add contents here   

    pane.setBackground(backgroundColor);
    return pane;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T08:05:59.000

AFAIK 好`RolloverSupportTest`/`Hightlighter`已实施

*   [Substance L&F 有荧光笔](https://stackoverflow.com/a/10909869/714968)

*   [@aephyr 的 RolloverSupportTest](http://aephyr.googlecode.com/svn/trunk/)

# sql - 文档修订的数据库模式

> ID：14045815
> 
> 赞同：1
> 
> 时间：2012-12-26T20:22:28.130
> 
> 标签：sql, database-design, database-schema

我有一个正在尝试规范化的架构：

```
Component
( component_id
, component_number
, component_revision
, ...
)

Component_lot
( component_lot_id
, component_lot_number
, component_number
, component_revision
, ...
)

Component_supplier
( component_supplier_id
, component_supplier_name
, component_number
) 
```

理想情况下，我想去掉component_lot和component_supplier表中的component_number，以及component_lot表中的component_revision，只使用component_id。

问题是，当组件修订版发生变化时，我在组件表中有多个相同组件编号的条目，我必须找到一个好的方法来确定哪个修订版处于活动状态（这不是简单的 1、2、3 编号我可以排序的系统，并且可能存在新修订但尚未激活）。此外，如果我创建一个组件的新版本，它会获得一个新的 id，现在我必须在 component_supplier 中为该组件的新版本建立供应商。

我考虑过在组件中创建一个 isActive 字段，但这似乎不是解决问题的有效方法。我还考虑过将 component_number 保留为 component_supplier 中的 fk，但在某些情况下组件编号可能会更改（很少见，但可能）。

任何建议或文章链接将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T08:11:59.297

# 规范化

从您的故事中，我了解到 component_number 是它自己的实体，所以：

```
Table Component_Numbers
( component_number_id /* PK */
, component_number
)

/* UK: component_number */

Table Components
( component_id /* PK */
, component_number_id /* FK to Component_Number */
, component_revision /* Descriptive. */
)
/* UK: component_number_id + component_revision */

Table Component_Lots
( component_lot_id /* PK */
, component_id /* FK to components. */
, component_lot_number /* Descriptive. */
)
/* UK: component_lot_number */

Table Component_Suppliers
( component_supplier_id /* PK */
, component_supplier_name /* Descriptive. */
, component_number_id /* FK to component_numbers. */
)
/* UK: component_supplier_name + component_number_id */ 
```

建议：为了保持列名简洁明了，我建议`id`不要使用`component_supplier_id`etc。在引用时，在其前面加上目标表的别名，就像`component_number_id`变成`cnr_id`with `cnr`as alias for一样`component_numbers`。

# 主动修订

有各种方法。最常见的：active_flag。需要业务规则来验证每个 component_number_id 只有一个有效。这可以在客户端、使用唯一键约束的数据库端（取决于数据库平台、SQL Server 和 Oracle 对空值和唯一键具有不同的语义）或使用触发器的数据库端来完成。

替代实现是维护表 components_active。当该表中出现 component_id 时，它处于活动状态。UK 最多保证一个 component_number_id。根据您的平台，您需要将 component_number_id 复制到该表中，这会引入额外的代码来维护它。

# boot - 出于严格的教育目的，现代 BIOS 理解的字节/位的确切格式是什么？

> ID：14045818
> 
> 赞同：0
> 
> 时间：2012-12-26T20:22:42.733
> 
> 标签：boot, bios

BIOS 将查看第一个扇区的前 512 个字节（至少在 PC BIOS、AmeriTrend、PhoenixBIOS 等上），BIOS 可以理解任何 .bin 文件二进制格式的字节块，我在这里正确吗？

我只是想确定这一点，因为我想确保在仔细编写操作系统时不会出错。

BIOS 显然将在处理器和本机架构下执行，所以一旦我用二进制指示 BIOS 让处理器将字节移动到内存中，我就可以将控制权转移到我的软件，然后它会指示处理器它做什么接下来，对吧？

我只是想知道我是否有这个权利，我向你保证这不是垃圾邮件，因为我是一个好奇的爱好者，拥有 C/C++、Java、C#、x86 汇编和一些硬件设计经验。

编辑人员：我还想知道 BIOS 是否必须组装/编译才能执行的现代化格式、文件或字节块，例如 .bin。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:46:20.773

正如 pst 评论所说，引导扇区被视为 i386 机器代码。最后 2 个字节需要匹配一个特殊的签名（0x55AA），但我认为这就是硬性要求。

代码只是按原样加载和执行。

如果您尝试符合 MBR 或 GPT 分区规范（以便其他操作系统可以看到您的磁盘分区），那么还有更多内容，但这完全是另一回事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:46:22.073

引导扇区没有特定的“文件格式”。BIOS 只是从引导扇区读取原始字节，然后跳转到第一条指令。它实际上只是一个“字节块”，文件扩展名（你一直提到`.bin`）根本不相关。

# sql - 将第一个表中不存在的记录匹配到第二个表内连接

> ID：14045820
> 
> 赞同：-2
> 
> 时间：2012-12-26T20:22:50.470
> 
> 标签：sql

如何将第一个表中不存在的记录与内部联接子句中的第二个表中的记录匹配。例如，如果我是基于办公室号码的内部加入，但第二张表中不存在办公室号码 90，但最近的办公室是 91，那么我将如何“替换”或进行匹配？

如果 office='90' 那么在哪里（'91'）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:41:27.873

您会认为在列表中找到最接近的数字匹配项在 SQL 中很容易表达。还有一种方法，尽管确切的语法因数据库而异：

```
select ft.officenumber,
       (select OfficeNumber from SecondTable st order by abs(ft.OfficeNumber - st.OfficeNumber limit 1
       ) as MyBestGuess
from FirstTable ft 
```

这样做是使用相关子查询来查看第二个表。它通过差的绝对值对所有结果进行排序，然后选择第一个值。

一对夫妇的评论。在我能想到的任何 SQL 引擎中，这将需要对 FirstTable 的每一行的 SecondTable 进行全表扫描。翻译：它很慢，随着数据量的增加，它会变得越来越慢。

其次，这只适用于数值。我不知道字符串的“关闭”是什么意思。

第三，`limit`是只获取第一行输出的常用语法。它适用于大多数数据库。在 SQL Server 中，您将使用`select top 1`，在 Oracle 中，您将使用`where rownum = 1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:26:47.140

您需要创建一个单独的映射表并与之连接。像这样的东西：

```
OfficeNumberMap
  - OfficeNumber
  - SubstituteOfficeNumber 
```

因此，在该表中，您将为每个映射到自身的“有效”办公室号码的条目，以及映射到替代的“无效”办公室号码的条目。

```
Office Number | SubstituteOfficeNumber
--------------+-----------------------
            80                      80  <- valid
            81                      81  <- valid
            90                      91  <- Invalid, so use 91 as alternate. 
```

# python - 在 Python 和 Oracle 11g 中从 cur.fetchall() 下载数组

> ID：14045823
> 
> 赞同：1
> 
> 时间：2012-12-26T20:23:03.517
> 
> 标签：python, sql, oracle11g, tuples, fetchall

我正在尝试使用 cur.fetchall 命令将 Oracle 11g 中的单个数组下载到 Python 中。我正在使用以下语法：

```
 con = cx_Oracle.connect('xxx')
 print con.version
 cur = con.cursor()
cur.execute("select zc.latitude from  orders o, zip_code zc where o.date> '24-DEC-12'     and TO_CHAR(zc.ZIP_CODE)=o.POSTAL_CODE")
latitudes = cur.fetchall()
cur.close()
print latitudes 
```

当我打印纬度时，我得到了这个：

```
[(-73.98353999999999,), (-73.96565,), (-73.9531,),....] 
```

问题是当我尝试操作数据时——在这种情况下，通过：

```
x,y = map(longitudes,latitudes) 
```

我收到以下错误 - 请注意，我正在使用相同类型的语法来创建“经度”：

```
TypeError: a float is required 
```

我怀疑这是因为 cur.fetchall 在元组元素内返回带有逗号的元组。如何运行查询，这样我就不会得到括号内的逗号，而是得到一个数组而不是一个元组？是否有像 cur.fetchall 这样的不错的“全部捕获”命令，还是我必须手动循环才能将结果放入数组中？

我的完整代码如下：

```
from mpl_toolkits.basemap import Basemap
import matplotlib.pyplot as plt
import numpy as np
import cx_Oracle
con = cx_Oracle.connect('xxx')
print con.version
cur = con.cursor()
cur.execute("select zc.latitude from  orders o, zip_code zc where     psh.ship_date> '24-DEC-12' and TO_CHAR(zc.ZIP_CODE)=o.CONSIGNEE_POSTAL_CODE")
latitudes = cur.fetchall()
cur.close()

cur = con.cursor()
cur.execute("select zc.longitude from  orders o, zip_code zc where psh.ship_date> '24-DEC-12' and TO_CHAR(zc.ZIP_CODE)=o.CONSIGNEE_POSTAL_CODE")
longitudes = cur.fetchall()
print 'i made it!'
print latitudes
print longitudes
cur.close()
con.close()
map = Basemap(resolution='l',projection='merc',         llcrnrlat=25.0,urcrnrlat=52.0,llcrnrlon=-135.,urcrnrlon=-60.0,lat_ts=51.0)
# draw coastlines, country boundaries, fill continents.
map.drawcoastlines(color ='C')
map.drawcountries(color ='C')
map.fillcontinents(color ='k')
# draw the edge of the map projection region (the projection limb)
map.drawmapboundary()
# draw lat/lon grid lines every 30 degrees.
map.drawmeridians(np.arange(0, 360, 30))
map.drawparallels(np.arange(-90, 90, 30))
plt.show()
# compute the native map projection coordinates for the orders.
x,y = map(longitudes,latitudes)
# plot filled circles at the locations of the orders.
map.plot(x,y,'yo') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:53:17.103

尾随逗号很好，它是有效的元组语法以及当您`print`使用元组时得到的内容。

我不知道你想要实现什么，但地图可能不是你想要的。map 接受一个函数和一个列表作为参数，但你给它 2 个列表。更有用的方法可能是一起从数据库中检索纬度和经度：

```
cur.execute("select zc.longitude, zc.latitude from  orders o, zip_code zc where o.date> '24-DEC-12'     and TO_CHAR(zc.ZIP_CODE)=o.POSTAL_CODE") 
```

## 更新评论

从原始代码看来，您正在尝试使用内置`map`函数，而更新后的代码并非如此。

你得到的原因`TypeError`是 matplotlib 需要一个浮点列表，但你提供的是一个元组的列表。您可以使用简单的列表理解从原始纬度中解开元组（内置的地图也可以解决问题）：

```
[row[0] for row in latitudes] 
```

使用一个查询返回纬度和经度：

```
cur.execute("select zc.longitude, zc.latitude from...")
points = cur.fetchall()
longitudes = [point[0] for point in longitudes]
latitudes = [point[1] for point in latitudes] 
```

现在`longitudes`和`latitudes`是浮动列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T22:07:34.900

找到了解决这个问题的另一种方法——查看[TypeError: "list indices must be integers" looping through tuples in python](https://stackoverflow.com/questions/14046621/typeerror-list-indices-must-be-integers-looping-through-tuples-in-python)。感谢您为帮助我而付出的辛勤工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-01T22:47:20.207

我遇到了同样的问题，一种解决方法是清除循环中的元组元素中的逗号，如您所提到的（虽然效率不高），如下所示：

```
cleaned_up_latitudes=[] #initialize the list
for x in xrange(len(latitudes)):
    pass
cleaned_up_latitudes.append(latitudes[x][0]) #add first element
print cleaned_up_latitudes 
```

> > [-73.98353999999999, -73.96565, -73.9531,....]

我希望这会有所帮助。

# wcf - CSharpCodeGenerator "找不到文件 C:\Windows\Temp\...dll"

> ID：14045824
> 
> 赞同：0
> 
> 时间：2012-12-26T20:23:03.470
> 
> 标签：wcf, iis, serialization

今天，我被来自服务器监控服务的一条令人震惊的短信惊醒，说我的一台服务器已关闭，并且在过去 7 小时内一直如此。

服务器运行托管在 IIS 中的 WCF Web 服务。

我签入了 IIS，我的应用程序池已停止。服务器上的事件日志中没有任何内容。

我的应用程序捕获所有错误并将它们写入文件系统。我看到有超过 7300`FileNotFoundException`份报告。它们看起来都是这样的：

```
System.IO.FileNotFoundException("Could not find file 'C:\Windows\TEMP\fmhq0eve.dll'.")
mscorlib
at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy)
at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, String msgPath, Boolean bFromProxy)
at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
at Microsoft.CSharp.CSharpCodeGenerator.FromFileBatch(CompilerParameters options, String[] fileNames)
at Microsoft.CSharp.CSharpCodeGenerator.FromSourceBatch(CompilerParameters options, String[] sources)
at Microsoft.CSharp.CSharpCodeGenerator.System.CodeDom.Compiler.ICodeCompiler.CompileAssemblyFromSourceBatch(CompilerParameters options, String[] sources)
at System.CodeDom.Compiler.CodeDomProvider.CompileAssemblyFromSource(CompilerParameters options, String[] sources)
at System.Xml.Serialization.Compiler.Compile(Assembly parent, String ns, XmlSerializerCompilerParameters xmlParameters, Evidence evidence)
at System.Xml.Serialization.TempAssembly.GenerateAssembly(XmlMapping[] xmlMappings, Type[] types, String defaultNamespace, Evidence evidence, XmlSerializerCompilerParameters parameters, Assembly assembly, Hashtable assemblies)
at System.Xml.Serialization.TempAssembly..ctor(XmlMapping[] xmlMappings, Type[] types, String defaultNamespace, String location, Evidence evidence)
at System.Xml.Serialization.XmlSerializer.FromMappings(XmlMapping[] mappings, Type type)
at System.ServiceModel.Dispatcher.UnwrappedTypesXmlSerializerManager.BuildSerializers()
at System.ServiceModel.Dispatcher.UnwrappedTypesXmlSerializerManager.GetOperationSerializers(Object key)
at System.ServiceModel.Dispatcher.SingleBodyParameterXmlSerializerMessageFormatter.EnsureSerializers()
at System.ServiceModel.Dispatcher.SingleBodyParameterXmlSerializerMessageFormatter.GetOutputSerializer(Type type)
at System.ServiceModel.Dispatcher.SingleBodyParameterMessageFormatter.CreateBodyWriter(Object body)
at System.ServiceModel.Dispatcher.SingleBodyParameterMessageFormatter.SerializeReply(MessageVersion messageVersion, Object[] parameters, Object result)
at System.ServiceModel.Dispatcher.CompositeDispatchFormatter.SerializeReply(MessageVersion messageVersion, Object[] parameters, Object result)
at System.ServiceModel.Dispatcher.DispatchOperationRuntime.SerializeOutputs(MessageRpc& rpc)
at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc)
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc)
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc& rpc)
at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet) 
```

我看到这个错误过去在 StackOverflow 上被报告过，并且有多种原因，主要与 Serializer 缓存有关，但是堆栈跟踪中的代码完全由 WCF 处理。

服务器被完全单独放置了一个多月。上次 Windows 更新重新启动是在 21 日，也就是这些异常发生前 5 天。我想不出其他原因。

为什么这个问题开始发生，我们能做些什么呢？这是 WCF 中的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T14:48:02.983

授予网络服务对 C:\Windows\Temp 文件夹的完全访问权限 使用 iisreset 重置 iis

这应该可以解决问题

# c# - 更改带有选项卡的接受按钮

> ID：14045825
> 
> 赞同：3
> 
> 时间：2012-12-26T20:23:04.123
> 
> 标签：c#, button, tabs

我有一个用 C# 编写的 Windows 窗体应用程序，它有三个选项卡，我希望使用活动选项卡更改接受按钮。就像当我在标签 1 中时，我希望按钮 _1 成为接受按钮，但是当我在标签 3 中时，我希望 button_3 成为我的接受按钮。我无法弄清楚如何做到这一点，也许我在搜索中没有使用正确的术语，但我在网上找不到任何好的资源来告诉我如何做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T20:29:09.837

最好的猜测是挂钩[`SelectedIndexChanged`](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol.selectedindexchanged.aspx)选项卡控件上的事件并[`AcceptButton`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.acceptbutton.aspx)根据选择的选项卡更改事件。伪代码：

```
Form_OnLoad(...)
{
    this.tabControl.SelectedIndexChanged += (s,e) => {
        TabControl tab = s as TabControl;
        switch (tab.SelectedIndex){
            case 3:
                this.AcceptButton = this.button_3;
                break;
            case 2:
                this.AcceptButton = this.button_2;
                break;
            case 1:
            default:
                this.AcceptButton = this.button_1;
                break;
        }
    };
} 
```

或者类似的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T21:41:30.153

`AcceptButton_Click`通过在事件处理程序中使用以下代码，您可以根据当前选择的选项卡执行不同的操作：

```
if (tabControl1.SelectedTab == tabPage1)
{
    //Do something
}
else if (tabControl1.SelectedTab == tabPage2)
{
    //Do something different
} 
```

如果您更喜欢使用字符串，每个标签页都有一个唯一的名称：

```
switch (tabControl1.SelectedTab.Name)
{
    case "Tab1Name":
        //Do something
        break;
    case "Tab2Name":
        //Do something different
        break;
} 
```

如果这回答了您的问题，请将[其标记为您问题的答案](https://meta.stackexchange.com/a/5235)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-04T11:26:38.113

TabControl 有 SelectedIndexChanged 事件。

```
private void tabControl1_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (tabControl1.SelectedTab == tabControl1.TabPages["RenewalTab"])
        {
            this.AcceptButton = btnRenewal;
        }
        else if (tabControl1.SelectedTab == tabControl1.TabPages["SellerTab"])
        {
            this.AcceptButton = btnSeller;
        }
    } 
```

# jquery - 如何绑定多个元素的事件？

> ID：14045826
> 
> 赞同：0
> 
> 时间：2012-12-26T20:23:05.710
> 
> 标签：jquery

我有这个代码：

```
var li = $('<li>',{
   html : '<div class="header">' + header + '</div><div class="subheader">' 
          + sub_header + '</div><div class="optkey">' + option_key + '</div>'
            });

var tmpLi = li.first()[0].firstChild;

if( active ) {
    li.bind({
        mousedown: function(event) {
            console.log("mousedown");
            event.stopPropagation();
            select_box.find('.sbContent').html($(this).find('.header').html());
            select_box_disabled.find('.sbContent').html($(this).find('.header').html());
            select_options_container.trigger('hide');
            // *FINISH* need to update the original select input with the new value
            var key = $(this).find('.optkey').html();

            select_source.find('option:selected').removeAttr('selected');
            select_source.find('option:eq(' + key + ')').attr('selected', 'selected').change();
            return false;
        }

    }),

    tmpLi.bind({
        keypress: function(event) {
            console.log("keypress");
            event.stopPropagation();
            select_box.find('.sbContent').html($(this).find('.header').html());
            select_box_disabled.find('.sbContent').html($(this).find('.header').html());
            select_options_container.trigger('hide');
            // *FINISH* need to update the original select input with the new value
            var key = $(this).find('.optkey').html();

            select_source.find('option:selected').removeAttr('selected');
            select_source.find('option:eq(' + key + ')').attr('selected', 'selected').change();
            return false;
        }

    });
} 
```

在我添加`tmpLi.bind`块之前，它工作正常。现在，我在 Firebug 中收到此错误：

> 类型错误：tmpLi.bind 不是函数
> 
> 按键：功能（事件）{

如何将唯一事件绑定到同一 if 语句中的两个元素？还是 tmpLi 不是有效元素的问题？（tmpLi 返回 html 字符串`<div class="header">`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T20:27:57.110

`tmpLi`不是一个 jQuery 对象（只是一个 DOM 元素），所以它没有`bind`方法。

您可以重写分配`tmpli`以分配一个 jQuery 对象：

```
var tmpLi = li.first().children().first(); 
```

# c# - 如何：将 DataSet 的每个表绑定到 GridView 上的页面

> ID：14045830
> 
> 赞同：0
> 
> 时间：2012-12-26T20:23:30.210
> 
> 标签：c#, asp.net, gridview, datatable, dataset

我已经搜索和搜索，我认为这应该是相当直截了当的，但我无法弄清楚。我有一个数据集 (myDataSet)，向其中添加了几个表 (myDataTable)。我也有一个 GridView。我想设置 GridView 以便 GridView 上的每个页面都绑定到 DataSet 的每个表（即 GridView 的第 1 页 = DataSet.Table[0] 等）。这些表都有相同的列，但行数不同。

使用 PageSize = 表中的行数，即使我已将 PageButtonCount 显式设置为 3（此数据集中有 3 个表），按钮也会完全消失。我想有某种自动分页功能可以确定不需要更多页面，但我无法弄清楚如何使其工作。

```
public partial class _Default : System.Web.UI.Page
{
    Users theUsers = new Users();
    static DataSet myDataSet = new DataSet();
    DataTable myDataTable = new DataTable();
    protected void Page_Load(object sender, EventArgs e)
    {
    protected bool runReport()
    {
        ltError.Visible = false;
        try
        {
            using (MySqlConnection dbConn = new MySqlConnection(ConfigurationManager.ConnectionStrings["AsteriskConn"].ConnectionString))
            {
                //sql query
                string sql = "SELECT calldate, src, dst, duration FROM cdr WHERE (src LIKE @ext AND dst > 9999)" +
                               "OR (dst LIKE @ext AND src > 9999) AND dst NOT LIKE '*%'";

                MySqlDataAdapter adapter = new MySqlDataAdapter();
                dbConn.Open();
                myDataSet.Tables.Clear();
                int j = ddlUsers.SelectedIndex;
                //loop through each user in the list and query the database for its cdr records with the sql query string
                foreach (int i in theUsers.groups[j].extensions)
                {
                    myDataTable = new DataTable();
                    adapter.SelectCommand = new MySqlCommand(sql, dbConn);
                    adapter.SelectCommand.Parameters.Add("@ext", MySqlDbType.VarChar, 80).Value = i;
                    adapter.Fill(myDataTable);
                    myDataTable.TableName = i.ToString();
                    myDataSet.Tables.Add(myDataTable);
                }
                gvReport.DataSource = myDataSet;
                gvReport.AllowPaging = true;
                gvReport.PageSize = myDataSet.Tables[0].Rows.Count;
                gvReport.PagerSettings.PageButtonCount = myDataSet.Tables.Count;
                gvReport.PagerSettings.Mode = PagerButtons.NumericFirstLast;
                gvReport.PagerSettings.Position = PagerPosition.Top;
                gvReport.PagerSettings.Visible = true;
                gvReport.DataBind();
                dbConn.Close();    
            }
        }
    }
}
protected void gvReport_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    gvReport.PageIndex = e.NewPageIndex;
    gvReport.DataSource = myDataSet.Tables[e.NewPageIndex];
    gvReport.DataBind();
}
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:Panel ID="Panel1" runat="server" HorizontalAlign="Center">        
    <asp:GridView ID="gvReport" runat="server" OnPageIndexChanging="gvReport_PageIndexChanging"
            onrowdatabound="gvReport_RowDataBound" Visible="False" HorizontalAlign="Center" AllowPaging="true">
            <PagerSettings Position="Top" />
        </asp:GridView>
        <asp:Literal ID="ltError" runat="server" Visible="False"></asp:Literal>
    </asp:Panel>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T02:51:51.213

我认为，您最好动态添加页面索引按钮/链接按钮（或使用中继器显示页面索引按钮）

# javascript - 通过 Ajax (JSON) 响应循环出错

> ID：14045836
> 
> 赞同：0
> 
> 时间：2012-12-26T20:24:21.530
> 
> 标签：javascript, jquery, ajax, json

我正在尝试遍历从 php 文件返回的数组。

如果我运行这个：

```
 $.ajax({
        type: "POST",
        url: "lib/search/search.standards_one.php",
        async: "false",
        dataType: "json",
        data: {subjects: subjects, grades: grades},
        success: function(response){
            $("#standards_results").html("");
            $.each(response[0], function(){
                  console.log(this['code'], this['standard_id']);
            });
            }
        }); 
```

一切正常。

但是，我需要使用数组（等级）作为参数来遍历这个响应。

像这样：

```
 $.ajax({
        type: "POST",
        url: "lib/search/search.standards_one.php",
        async: "false",
        dataType: "json",
        data: {subjects: subjects, grades: grades},
        success: function(response){
                $("#standards_results").html("");
                var len = grades.length;
                var param = "";
                for(var x=0; x < len; x++){
                    param = grades[x];
                    $.each(response[param], function(){
                    console.log(this['code'], this['standard_id']);
                    });
                }
            }
        }); 
```

但是，当我运行它时，我得到“无法读取未定义的属性'长度'”错误。

我尝试了许多不同的解决方案，但我仍然得出了这个结果。

////

这是创建 JSON 对象的地方：

```
 private function retrieve_standards_one(){
    $dbh = $this->connect();
    $stmt = $dbh->prepare("SELECT code, standard_one_id 
                           FROM standard_one 
                           WHERE grade_id = :grade_id 
                           ORDER BY standard_one_id");
    $stnd = array();
    for($x = 0; $x < (count($this->grades)); $x++){                    
    $stmt->bindParam(':grade_id', $this->grades[$x], PDO::PARAM_STR);
    $stmt->execute();
    $stnd[] = $stmt->fetchAll(PDO::FETCH_ASSOC);
    }
    $json = json_encode($stnd);
    return $json;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:29:33.617

`grades`超出了您的成功功能的范围，这就是它未定义的原因。ajax 是异步的，因此调用被触发，并且您的`success`函数仅在收到响应（并且成功）时执行。

一个快速的解决方法是将您需要的变量放在全局范围内，或者`response`如果它们在其中则从中获取它们。

```
var len = response.length; 
```

# python - 优雅/正确的方式来包装 python 模块

> ID：14045844
> 
> 赞同：2
> 
> 时间：2012-12-26T20:25:11.140
> 
> 标签：python, wrapper

我对包装 pep8 很感兴趣，所以我可以在使用前对其进行修补。包装模块的“正确”方式是什么？

如果我的模块名为 pep8 并且位于真正 pep8 之前的某个路径中，那么我模块中的任何“import pep8”都只会导入自身。我事先不知道真正的 pep8 会住在哪里，因为这需要针对多个系统进行推广。我无法从 sys.path 中删除我的 pep8 包装器所在的路径，因为它也会根据执行它的系统而有所不同。

我不想重命名我的 pep8，因为我希望 pep8 命令无需修改即可工作。

我的 pep8 是一个包含`__init__.py`以下内容的目录：

```
from pep8 import *
MAX_LINE_LENGTH = 119 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:42:40.170

对于 Python 2.5+，您可以默认指定使用绝对导入。与`from __future__ import absolute_import`.

对于猴子修补 Python 模块，您需要从项目到覆盖模块的相对导入。

对于这个例子，我假设你正在分发一个库。对于其他项目，它需要一些技巧，因为`__main__`python 文件不能有相对导入。

`myproject/__init__.py`：

```
from . import pep8 # optional "as pep8"
# The rest of your code, using this pep8 module. 
```

`myproject/pep8/__init__.py`：

```
from __future__ import absolute_import
from pep8 import *
MAX_LINE_LENGTH = 119 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-12T15:44:29.670

我意识到这是一个老问题，但它仍然出现在谷歌搜索中。对于实际需要这样做的情况（例如：受保护的库包装），我建议使用 WRAPT 包。

我实际上将它用于我有一个模型是核心集的一部分但可以由其他应用程序扩展的实例（例如像烧瓶应用程序这样的前端）。核心模型受到保护，但可以由其他开发人员扩展。

[https://pypi.python.org/pypi/wrapt](https://pypi.python.org/pypi/wrapt)

# android - 致命异常：主要 - 流式 Android

> ID：14045845
> 
> 赞同：2
> 
> 时间：2012-12-26T20:25:14.453
> 
> 标签：android, streaming

我正在尝试运行 Pro Android Media 一书中的应用程序以了解流的功能。但是，正在发生以下错误：

```
12-26 16:32:31.464: E/AndroidRuntime(508): FATAL EXCEPTION: main
12-26 16:32:31.464: E/AndroidRuntime(508): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.streaming/com.example.streaming.Streaming}: java.lang.ClassNotFoundException: com.example.streaming.Streaming in loader dalvik.system.PathClassLoader[/data/app/com.example.streaming-2.apk]
12-26 16:32:31.464: E/AndroidRuntime(508):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
12-26 16:32:31.464: E/AndroidRuntime(508):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
12-26 16:32:31.464: E/AndroidRuntime(508):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
12-26 16:32:31.464: E/AndroidRuntime(508):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
12-26 16:32:31.464: E/AndroidRuntime(508):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-26 16:32:31.464: E/AndroidRuntime(508):  at android.os.Looper.loop(Looper.java:123)
12-26 16:32:31.464: E/AndroidRuntime(508):  at android.app.ActivityThread.main(ActivityThread.java:4627)
12-26 16:32:31.464: E/AndroidRuntime(508):  at java.lang.reflect.Method.invokeNative(Native Method)
12-26 16:32:31.464: E/AndroidRuntime(508):  at java.lang.reflect.Method.invoke(Method.java:521)
12-26 16:32:31.464: E/AndroidRuntime(508):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-26 16:32:31.464: E/AndroidRuntime(508):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-26 16:32:31.464: E/AndroidRuntime(508):  at dalvik.system.NativeStart.main(Native Method)
12-26 16:32:31.464: E/AndroidRuntime(508): Caused by: java.lang.ClassNotFoundException: com.example.streaming.Streaming in loader dalvik.system.PathClassLoader[/data/app/com.example.streaming-2.apk]
12-26 16:32:31.464: E/AndroidRuntime(508):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
12-26 16:32:31.464: E/AndroidRuntime(508):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
12-26 16:32:31.464: E/AndroidRuntime(508):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
12-26 16:32:31.464: E/AndroidRuntime(508):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
12-26 16:32:31.464: E/AndroidRuntime(508):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
12-26 16:32:31.464: E/AndroidRuntime(508):  ... 11 more
12-26 16:51:14.974: D/AndroidRuntime(1433): Shutting down VM
12-26 16:51:15.054: W/dalvikvm(1433): threadid=1: thread exiting with uncaught exception (group=0x4001d800) 
```

代码：

观看视频

```
package com.example.streaming;

import com.example.streaming.R;
import android.app.Activity;
import android.net.Uri;
import android.os.Bundle;
import android.widget.MediaController;
import android.widget.VideoView;

public class ViewTheVideo extends Activity {
    VideoView vv;
    @Override
    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
        vv = (VideoView) this.findViewById(R.id.VideoView);
Uri videoUri = Uri.parse("rtsp://v2.cache2.c.youtube.com/CjgLENy73wIaLwm3JbT_� 9HqWohMYESARFEIJbXYtZ29vZ2xlSARSB3Jlc3VsdHNg _vSmsbeSyd5JDA==/0/0/0/video.3gp");
        vv.setMediaController(new MediaController(this));
        vv.setVideoURI(videoUri);
        vv.start();
} 
```

}

主.xml

```
 <?xml version="1.0" encoding="utf-8"?>
            <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:orientation="vertical"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                >
            <VideoView android:layout_width="wrap_content"
                       android:layout_height="wrap_content"
                       android:id="@+id/VideoView">    
            </VideoView>
            </LinearLayout> 
```

AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.streaming"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="8" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity android:name = ".Streaming"
              android:label = "@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name = "android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

我将等待我的问题的答案。

多谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T20:26:34.860

改变

```
public class ViewTheVideo extends Activity {
//....your code here 
```

至

```
public class Streaming extends Activity {
//....your code here 
```

因为您在`AndroidManifest`as中声明 Activity`.Streaming`但在 java 中的类名是`ViewTheVideo`

**或者**

您也可以将名称更改 `AndroidManifest`为：

```
 <activity android:name = ".ViewTheVideo"
              android:label = "@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name = "android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity> 
```

# ruby-on-rails - 设计用户层次理论

> ID：14045847
> 
> 赞同：2
> 
> 时间：2012-12-26T20:25:23.357
> 
> 标签：ruby-on-rails, ruby, devise

我对 Ruby on Rails 还很陌生，我使用 Devise (2.1.2) 开始了一个应用程序。我试图弄清楚我想要用户角色的方式。它是这样的：

用户在网站上注册，这只有在该用户已被其他用户邀请时才有可能。（注册用户需要邀请码）。然后，该用户将从级别 1 开始，并可以通过工作来获得经验值，从而将应用程序中的工作提升到更高级别。最高级别将是 10 级。

我还希望有一个版主级别，用户提交审核的版主工作。但这些版主是普通用户，也只是从 1 级开始。

其次，邀请其他用户只能在等级 2 及更高级别，您可以邀请的用户越多。现在你不能无限用户保持 uitnodigigen 但例如：在第 2 级但只有 2 个用户和第 3 级第 4 级用户和你可以邀请用户和 2 在第 5 级你可以邀请 5 个用户。

我希望我的理论是可能的，并且有人能够引导我通过一些代码并讨论我的理论可能性。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T15:19:58.417

对于详尽且相对未来的证明机制，请使用以下内容：

1.  设计 - 用于身份验证 - [https://github.com/plataformatec/devise](https://github.com/plataformatec/devise)
2.  Cancan - 用于授权 - [https://github.com/ryanb/cancan](https://github.com/ryanb/cancan)
3.  Rolify - 用于角色库 - [https://github.com/EppO/rolify](https://github.com/EppO/rolify)

这是一个关于如何一起使用这三个的教程：[https ://github.com/EppO/rolify/wiki/Tutorial](https://github.com/EppO/rolify/wiki/Tutorial)

有趣的是，本教程解决了一个与您的问题非常相似的问题陈述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T20:44:43.703

寻找 CanCan [https://github.com/ryanb/cancan](https://github.com/ryanb/cancan) - 这将解决你想要的一切

# c# - 带有 ComboBox 的十进制数据类型的 ASP.NET MVC 中的错误

> ID：14045848
> 
> 赞同：1
> 
> 时间：2012-12-26T20:25:24.690
> 
> 标签：c#, asp.net-mvc, entity-framework

我正在尝试从 ASP.NET MVC3 页面中的实体框架填充 ComboBox 的数据。在模型中，我添加了 DataRepository.cs ：

```
 public List<SelectListItem> GetBookPrices()
    {
        var BookPrice = (from bookPrice in ddlEntity.tblBook
                          select new SelectListItem
                          {
                              Text = Convert.ToString(bookPrice .Price),
                              Value = Convert.ToString(bookPrice.Price)
                          }).Distinct();
        return BookPrice .ToList();
    } 
```

和 DDLProperty.cs：

```
 public decimal PriceId { get; set; }

    public List<SelectListItem> PriceValue { get; set; } 
```

在我的数据库中，我有一个价格列作为小数。我可以正确地为具有 varchar 数据类型的 DropDownList 进行绑定，而不会出现任何错误，但我无法弄清楚如何修复上述代码以使其成为小数。

这是我的控制器：

```
 DataRepository objRepository = new DataRepository();

    public ActionResult Price()
    {
        DDLProperties objDDL = new DDLProperties();
        objDDL.PriceValue = objRepository.GetBookPrices();

        return View(objDDL);
    } 
```

这是错误：

`LINQ to Entities does not recognize the method 'System.String ToString(System.Decimal)' method, and this method cannot be translated into a store expression.`

它指向以下行： return BookPrice .ToList();

我开始学习 MVC，所以非常感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:52:53.413

`BookPrice.ToList()`是实际运行查询的行。Entity Framework 在其大多数函数上使用延迟执行，因此查询仅在您实际调用数据时运行，就像调用 ToList() 一样。

话虽如此，您在上面的 GetBookPrices() 中尝试做的实际上是将该 select 语句放入实际的数据库查询本身。这就是你得到 Entity Framework 告诉你它不知道如何处理你的价格的 ToString() 方法的地方。ToString 实际上并不是它在该上下文中识别的东西。

为了解决这个问题，我建议您将数据库调用和转换拆分为选择列表，如下所示：

```
public List<SelectListItem> GetBookPrices()
{
    var Books = ddlEntity.tblBook.ToList();
    var BookPrice = Books.Select(bookPrice => new SelectListItem
                                             {
                                              Text = Convert.ToString(bookPrice .Price),
                                              Value = Convert.ToString(bookPrice.Price)
                                             }).Distinct();
    return BookPrice.ToList();
} 
```

# internationalization - MVC4 WebApplication - 使用 Razor 引擎的视图（cshtml 文件）中可用的全局变量

> ID：14045849
> 
> 赞同：1
> 
> 时间：2012-12-26T20:25:25.083
> 
> 标签：internationalization, resources, asp.net-mvc-4, views, global-variables

我想知道现在如何使用 MVC4 来获得在 MVC3 中可能的功能，声明一些变量（和/或约束），然后在所有 cshtml 文件中可用。我用它来制作语言文件。

早些时候（在 MVC3 中）我`App_Code`的解决方案中有文件夹，我将文件 Lang.cshtml 放在其中。在这个文件中（对我来说是有效的资源）我有例如

```
@functions{
    public static readonly string G_ADD = "Dodaj";
    public static readonly string G_CREATE = "Utwórz";
    public static readonly string G_SAVE = "Zapisz";
    public static readonly string G_EDIT = "Edytuj";
    public static readonly string G_DETAILS = "Szczegóły";
    public static readonly string G_DELETE = "Usuń";
    public static readonly string G_SEARCH = "Szukaj";
    public static readonly string G_FIRST = "<< Pierwsza";
    public static readonly string G_LAST = "Ostatnia >>";
    public static readonly string G_PREV = "< Poprzednia";
    public static readonly string G_NEXT = "Następna >";
    public static readonly string G_ACTION = "Akcja";
    public static readonly string G_ID = "ID";
    public static readonly string G_PAGE = "STRONA";
    public static readonly string G_OF = "z";
    public static readonly string G_FROM = "z";
    public static readonly string G_TO = "do";
    public static readonly string G_ALL = "-- Wszystkie";
    public static readonly string G_RECORDS = "Rekordów:";
    public static readonly string G_CHOOSE = "Wybierz:";
    public static readonly string G_BACK = "Wróć";
    public static readonly string G_VIEW_CHART = "Wyświetl wykres";
} 
```

所以我可以在任何.cshtml（视图）中使用字符串，例如 `@Lang.G_ADD` 甚至 `@Html.ActionLink(@Lang.G_ADD, "AddContract", new { id = item.CONTRACT_ID });`

特别是它使我的应用程序对所有从事 i18n 工作的人来说更加用户友好。现在这个解决方案在 MVC4 中不起作用：/

可用资源解决方案不是很有效。想象一下，每次您需要编写`AppName.Properties.Resources.G_ADD`.

Resources.resx 中的 XML 看起来也不错。非常。

编写任何方法来枚举资源仍然只能部分完成工作，因为它使代码膨胀，我遵循“越少代码越好”的想法。

请指出正确的方向。任何现成的解决方案也值得赞赏:)

谢谢大家！

# html - z-index 和不透明度问题

> ID：14045850
> 
> 赞同：10
> 
> 时间：2012-12-26T20:25:29.243
> 
> 标签：html, css, z-index, opacity

我正在尝试在我的所有 DIV 的后面制作一个包装器，它看起来是透明的（不透明度：0.6），但前面的所有东西也看起来是透明的。

任何想法如何解决这一问题？

你可以在这里找到这个例子：http: [//testing.squaretise.com/](http://testing.squaretise.com/)（我给包装器（#wrap）一个红色边框，这样你就可以更容易地解释）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-26T20:34:50.473

使用代替：

```
opacity: 0.6; 
```

这：

```
background: rgba(255, 255, 255, 0.6); 
```

颜色为 RGB，最后一位数字用于透明度级别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T20:28:11.147

你需要绝对定位你的透明 div。

[http://www.w3.org/TR/css3-color/#transparency](http://www.w3.org/TR/css3-color/#transparency)解释了后代如何获得透明度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T20:33:45.977

不透明度是遗传的。如果父母是透明的，那么孩子也是如此。

更好的方法是删除`opacity`背景颜色并将其设置为透明：

```
.foo {
  background: rgba(0,0,0,.5);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T20:49:42.410

您应该使用透明背景，而不是不透明度。如果您想支持 IE8，背景图像是最好的方法。（CSS3 颜色：[http](http://caniuse.com/#search=rgba) ://caniuse.com/#search=rgba ）

使用 data-uri 以获得更好的性能。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-02-07T12:34:59.390

你甚至可以用`opacity`. 这是一个例子：

## HTML

```
<div id="wrapper"> 
    <div id="contentOrWhatever">
    </div>
</div> 
```

## CSS

```
body {
    z-index:0;
}
#wrapper {
    z-index:1;
    opacity:0.6;
}
#contentOrWhatever {
    z-index:99;
    opacity:1;
} 
```

所以`#wrapper`现在是透明的并且总是落后`#contentOrWhatever`。希望我能帮助你。

# html - CSS 在悬停元素之前设置元素样式？

> ID：14045855
> 
> 赞同：0
> 
> 时间：2012-12-26T20:26:10.730
> 
> 标签：html, css, hover

我想改变我**之前**`div`的任何风格：**`ul`**

 **```
<style>
ul:hover + #x {
    display:none;
}
</style>

<div id="x">c</div>

<ul>
  <li>a</li>
  <li>b</li>
</ul> 
```

当我将 放在`div`之后时`ul`，它可以工作。（当然，因为CSS 中的 选择了 .**之后**的`+`所有 #x 。）**`ul`**

 **但我需要让它以另一种方式工作。我不想使用 JavaScript。

我不能把 放在`div`后面`ul`，因为它会破坏我已经放入的所有其他样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:32:23.453

CSS 中没有“前一个兄弟”选择器。你想要的可以使用 JavaScript 来完成，但目前还没有纯 CSS 的方式来实现。

这就是说，元素没有必要按照它们被标记的顺序出现。您可以将`#x`div 放在标记中的无序列表之后，并使用 CSS 使其出现在列表之前。这样，您仍然可以将`+`选择器用于您的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:44:41.753

如果您不完全反对使用 JavaScript，那么您可以在`class`所有标签`divs`之前添加 a`ul`并使用 CSS 来设置它的样式`class`。

我认为通过硬编码方式执行此操作是不切实际的，因此您可以使用 JavaScript 来执行此操作`onLoad`，这样脚本将在页面加载时仅运行一次，并且您避免`event listener`绑定到`hover`事件。****

# java - 此代码没有显示错误，但我无法在数据库中插入值

> ID：14045857
> 
> 赞同：-2
> 
> 时间：2012-12-26T20:26:32.113
> 
> 标签：java, mysql

```
import java.awt.*;
import java.awt.event.*;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.Statement;
import java.util.Vector;
import javax.swing.*;

public class TTShow extends JFrame implements ActionListener {

    String item1;
    JPanel Left, Right, Up, Down, Cntr;
    JButton clos, hlp, add;
    String str;
    WizardSub frm_tch;
    JComboBox subj;
    String sub_code;
    String sub_name;
    int lpw;
    int dur;
    static DBInfo objj0, objj1, objj2, objj3, objj4, objj5, objj6;
    static Statement st0, st1, st2, st3, st5, st6;
    PreparedStatement pstmt4;
    static ResultSet rs0, rs1, rs2, rs3, rs5;;
    static Connection cn0, cn1, cn2, cn3, cn4, cn5, cn6;
    static String str1;
    private JTable table;

    public static Vector rows() {

        Vector data = new Vector();
        String sql = "select * from tt";

        try {
            objj0 = new DBInfo();// 0
            cn0 = objj0.getCon();
            st0 = cn0.createStatement();
            rs0 = st0.executeQuery(sql);
            ResultSetMetaData md = rs0.getMetaData();
            int columns = md.getColumnCount();

            while (rs0.next()) {

                Vector row = new Vector(columns);
                for (int i = 2; i <= columns; i++) {
                    row.addElement(rs0.getObject(i));
                }
                data.addElement(row);
            }

            rs0.close();
            st0.close();
            cn0.close();

        } catch (Exception e) {
            System.out.println(e.getMessage());
            System.out.println(e.getStackTrace());
        }

        return data;
    }

    public static Vector columns()
    {
        Vector cols = new Vector();
        String sql2 = "select * from tt";
        try {
            objj1 = new DBInfo();// 1
            cn1 = objj1.getCon();
            st1 = cn1.createStatement();
            rs1 = st1.executeQuery(sql2);

            ResultSetMetaData md = rs1.getMetaData();
            int columns = md.getColumnCount();
            for (int i = 2; i <= columns; i++) {
                cols.addElement(md.getColumnName(i));
            }

            rs1.close();
            st1.close();
            cn1.close();
        }

        catch (Exception e) {
            System.out.println(e.getMessage());
            System.out.println(e.getStackTrace());
        }

        return cols;
    }

    public TTShow(String title) {
        super(title);
        setLayout(new BorderLayout());
        setSize(900, 600);
        setLocationRelativeTo(this);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setResizable(false);

        Left = new JPanel();
        Left.setLayout(new GridLayout(8, 1, 0, 10));

        Right = new JPanel();
        Right.setLayout(new GridLayout(12, 1, 0, 20));

        Up = new JPanel();
        Down = new JPanel();

        Cntr = new JPanel();
        Cntr.setBorder(BorderFactory.createTitledBorder(BorderFactory
                .createEtchedBorder(), ""));

        subj = new JComboBox();
        String strr = "select * from ttg_sub";
        try {
            objj2 = new DBInfo();// 2
            cn2 = objj2.getCon();
            st2 = cn2.createStatement();
            rs2 = st2.executeQuery(strr);
            while (rs2.next()) {
                sub_code = rs2.getString(1);
                sub_name = rs2.getString(2);
                lpw = rs2.getInt(3);
                dur = rs2.getInt(4);
                subj.addItem(sub_name);
            }

            rs2.close();
            st2.close();
            cn2.close();
        }

        catch (Exception e) {
        }

        add = new JButton("add");
        add.addActionListener(this);
        Left.add(add);
        Left.add(subj);

        final JScrollPane scrollPane = new JScrollPane();
        scrollPane.setBounds(10, 85, 474, 187);
        Cntr.add(scrollPane);

        table = new JTable(rows(), columns()); // chargement de JTable
        scrollPane.setViewportView(table);
        add(Cntr, BorderLayout.CENTER);
        add(Left, BorderLayout.WEST);
    }

    public void getSub(){
        String ssq = "select * from ttg_sub";
        try {
            objj3=new DBInfo();//3
            cn3=(Connection) objj3.getCon();
            st3 = cn3.createStatement();
            rs3 = st3.executeQuery(ssq);
            while (rs3.next()) {
                sub_code = rs3.getString(1);
                sub_name = rs3.getString(2);
                lpw = rs3.getInt(3);
                dur = rs3.getInt(4);
            }

            rs3.close();
            st3.close();
            cn3.close();
        }
        catch(Exception e){}
    }

    public void actionPerformed(ActionEvent ls) {
        if (ls.getSource() == clos)
        {
            System.exit(0);
        }
        else if (ls.getSource() == add)
        {
            item1 = (String) subj.getSelectedItem();
            System.out.print(item1);
            String item = item1;
            Connection connn;
            String ssqs = "insert into tt(I) values(?)";
            try {
                objj4 = new DBInfo();// 4
                cn4 = (Connection) objj4.getCon();
                pstmt4 = cn4.prepareStatement(ssqs);
                pstmt4.setString(3, item1);
                int i = pstmt4.executeUpdate();
                System.out.print(i);

                pstmt4.close();
                cn4.close();
            }

            catch (Exception e) {
            }
        }
    }

    public void putSub() {
        Connection conn;
        String ssq = "select * from ttg_sub";
        try {
            objj5 = new DBInfo();// 5
            cn5 = (Connection) objj5.getCon();
            st5 = cn5.createStatement();
            rs5 = st5.executeQuery(ssq);
            while (rs5.next()) {
                sub_code = rs5.getString(1);
                sub_name = rs5.getString(2);
                lpw = rs5.getInt(3);
                dur = rs5.getInt(4);
            }

            rs5.close();
            st5.close();
            cn5.close();
        }

        catch (Exception e) {
        }
    }

    public void setSub() {
        Connection connn;
        String ssq = "insert into tt(I) values(item1)";
        try {
            objj6 = new DBInfo();// 6
            cn6 = (Connection) objj6.getCon();
            st6 = cn6.createStatement();
            st6.close();
            st6.close();
            cn6.close();
        }

        catch (Exception e) {
        }
    }

    public static void main(String args[])
    {
        try {
            TTShow dialog = new TTShow(str1);
            dialog.addWindowListener(new WindowAdapter() {
                public void windowClosing(WindowEvent e) {
                    System.exit(0);
                }
            });

            dialog.setVisible(true);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:42:36.970

你目前有

```
String ssqs = "insert into tt(I) values(?)";
pstmt4 = cn4.prepareStatement(ssqs);
pstmt4.setString(3, item1); 
```

但是`PreparedStatement`参数索引从开始，`1`所以你需要：

```
pstmt4.setString(1, item1); 
```

* * *

与此相关，不要在其中进行数据库调用，`EDT`因为它们会阻塞该线程。改用 a `SwingWorker`。这是一个[例子](http://www.kodejava.org/examples/381.html)

# ruby-on-rails - 跳过为“rails generate controller”创建测试、资产和助手的语法？

> ID：14045858
> 
> 赞同：90
> 
> 时间：2012-12-26T20:26:33.333
> 
> 标签：ruby-on-rails, ruby-on-rails-3, generator

我阅读了帮助并尝试了以下命令来跳过测试、资产和帮助文件的生成

```
$ bin/rails generate controller home index  --helper false --assets false --controller-specs false --view-specs false   
create- app/controllers/home_controller.rb
        route  get "home/index"
        invoke  erb
        create    app/views/home
        create    app/views/home/index.html.erb
        invoke  rspec
        error  false [not found]
        error  false [not found] 
```

正如您在上面的输出中可能注意到的那样，仅生成`controller, routes`&`views`是有效的。但是最后两行很有趣：

```
error  false [not found]
error  false [not found] 
```

显然，rails 似乎不喜欢`--option-name false`语法。所以这个错误是因为我使用了错误的语法？如果是，那么正确的方法是什么？谢谢

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2012-12-26T20:32:01.870

尝试使用`--no-`后跟`optionname`：

```
rails generate controller home index  --no-helper --no-assets --no-controller-specs --no-view-specs 
```

如果您想在每次运行生成器命令时更改默认行为，您可以在 application.rb 文件中配置您想要的默认值 - 请参阅[如何确保 Rails 不会为视图和帮助程序生成规范测试？](https://stackoverflow.com/questions/4235264/how-can-i-make-sure-rails-doesnt-generate-spec-tests-for-views-and-helpers).

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2013-06-13T13:36:03.773

要关闭而无需添加选项：

```
# application.rb
config.generators.assets = false
config.generators.helper = false 
```

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2015-03-10T11:31:05.337

仅提供 API 服务的应用程序不需要`javascript`, `stylesheet`, `views`, `helpers`. 要跳过生成器/脚手架中的这些文件，以便`Rails 3.x`在`application.rb`

```
#to skip assets, scaffolds.css, test framework, helpers, view
config.generators do |g|
  g.template_engine nil #to skip views
  g.test_framework  nil #to skip test framework
  g.assets  false
  g.helper false
  g.stylesheets false
end 
```

检查链接以获取有关 [生成器的更多详细信息](http://guides.rubyonrails.org/generators.html)

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2014-09-10T02:45:22.703

更简洁：

```
rails g controller home index --no-assets --no-test-framework 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-02-26T12:33:34.257

## 如果你只想生成控制器，别无他法。

```
rails g controller [controller_name] [index] --no-helper --no-assets --no-template-engine --no-test-framework 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-09T05:57:21.057

在 application.rb 文件中写入：这将停止生成除命令行中写入的内容之外的所有内容

```
config.generators do |g|
  g.test_framework nil
  g.template_engine nil
  g.assets false
  g.helper false
  g.stylesheets false
  g.javascripts false
end 
```

例子：

```
vidur@vidur-desktop:~/Downloads/tukaweb$ rails g controller uploader/three_d_models 
Running via Spring preloader in process 3703
      create  app/controllers/uploader/three_d_models_controller.rb
      invoke  assets
      invoke    js
      invoke    scss 
```

对于一个衬垫解决方案 =>

```
rails g controller assets_garments --skip-test-framework --skip-assets --skip-helper 
```

# r - 将字符串从csv转换为R中的数字向量

> ID：14045867
> 
> 赞同：1
> 
> 时间：2012-12-26T20:27:15.673
> 
> 标签：r, list, csv

我在 R 中有以下指令：

```
y <- rep(1:2,each=3) 
```

我知道它会生成一个 1 和 2 的向量：

```
[1] 1 1 1 2 2 2 
```

如果我想从具有以下形式的 csv 行中提取该信息，如何获得相同的结果：

```
[1] ",,1,1,1,2,2,2" 
```

我试过 as.numeric 和 is.na ，但我仍然得到一个空列表。有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T20:35:11.877

MatthewPlourde 建议包含：

```
> txt <- ",,1,1,1,2,2,2"
> scan(text=txt,, sep=",")
Read 8 items
[1] NA NA  1  1  1  2  2  2 
```

其他选项是 strsplit。

```
> unlist( strsplit(txt, ",") )
[1] ""  ""  "1" "1" "1" "2" "2" "2" 
```

采用 Matthew 的建议后，无需回答“如何转换为数字？”的问题。....但如果你有一个字符向量，它会是......现在你已经分成组件，使用`as.numeric`：

```
> as.numeric( scan(textConnection(txt), what="", sep=",") )
Read 8 items
[1] NA NA  1  1  1  2  2  2 
```

另一种选择是使用数字格式扫描读取：

```
> scan(textConnection(txt), what=numeric(0), sep=",")
Read 8 items
[1] NA NA  1  1  1  2  2  2 
```

并删除 NA：

```
> numbas <- scan(textConnection(txt), what=numeric(0), sep=",")
Read 8 items
> numbas[!is.na(numbas)]
[1] 1 1 1 2 2 2 
```

# vb.net - 覆盖 DataGridView Shift+Space

> ID：14045871
> 
> 赞同：6
> 
> 时间：2012-12-26T20:27:45.627
> 
> 标签：vb.net, datagridview

在 DataGridView 中，按 SHIFT 和 SPACE 将默认选择整行。我找到的唯一解决方案（在[vb.net DataGridView - Replace Shortcut Key with typed character](https://stackoverflow.com/questions/5339351/vb-net-datagridview-replace-shortcut-key-with-typed-character)中引用）是关闭行选择功能。虽然这可行，但并不理想，因为我仍然希望能够使用行选择器选择整行（例如，删除行），并将`SelectionMode`属性更改为除`RowHeaderSelect`我失去该能力之外的任何其他内容。有没有办法只捕获 SHIFT+SPACE 组合并用简单的 SPACE 替换它？`MutiSelect`当控件的属性设置为`True`并且`SelectionMode`属性设置为时，似乎没有任何键事件甚至可以识别击键`RowHeaderSelect`，所以我不能使用这些。

ETA：我想也许关闭`MultiSelect`并将选择模式更改为`CellSelect`，然后为该`RowHeaderMouseClick`事件添加一个事件处理程序会起作用......不。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-10T19:54:24.637

我想出如何做到这一点的最好方法是从 DataGridView 继承并覆盖 ProcessCmdKey 方法。然后你可以拦截 Shift+Space 并在 Space 上发送。只需将此类添加到您的项目并将所有 DataGridViews 切换到 MyDataGridViews。我的解决方案从这个[DataGridView keydown event not working in C#](https://stackoverflow.com/questions/4284370/datagridview-keydown-event-not-working-in-c-sharp) SO question（这也解释了为什么 Zaggler 的解决方案不起作用）和[ProcessCmdKey 中的这个 SendKeys 中汲取灵感：将 Shift-Space 更改为 Space](https://bytes.com/topic/c-sharp/answers/435350-sendkeys-processcmdkey-change-shift-space-just-space) Bytes.com 帖子。对不起，但它在 C# 中。

```
class MyDataGridView : System.Windows.Forms.DataGridView
{
    protected override bool ProcessCmdKey(ref System.Windows.Forms.Message msg, System.Windows.Forms.Keys keyData)
    {
        if (keyData == (System.Windows.Forms.Keys.Space | System.Windows.Forms.Keys.Shift))
        {
            // DataGridView is dumb and will select a row when the user types Shift+Space 
            // if you have the DGV set so that you can click a row header to select a row (for example, to delete the row)
            // this method will intercept Shift+Space and just send on Space so that the DGV properly handles this. 
            // For example, if I type "ME TYPING IN ALL CAPS" it ends up looking like "METYPINGINALLCAPS".
            // Or if I type "Note: I have some OS thing to talk about" it looks like "Note:Ihave some OSthing to talk about"

            byte[] keyStates = new byte[255];
            UnsafeNativeMethods.GetKeyboardState(keyStates);
            byte shiftKeyState = keyStates[16];
            keyStates[16] = 0; // turn off the shift key
            UnsafeNativeMethods.SetKeyboardState(keyStates);

            System.Windows.Forms.SendKeys.SendWait(" ");

            keyStates[16] = shiftKeyState; // turn the shift key back on
            UnsafeNativeMethods.SetKeyboardState(keyStates);
            return true;
        }
        return base.ProcessCmdKey(ref msg, keyData);
    }

    [System.Security.SuppressUnmanagedCodeSecurity]
    internal static class UnsafeNativeMethods
    {

        [System.Runtime.InteropServices.DllImport("user32.dll", CharSet = System.Runtime.InteropServices.CharSet.Auto)]
        public static extern int GetKeyboardState(byte[] keystate);

        [System.Runtime.InteropServices.DllImport("user32.dll", CharSet = System.Runtime.InteropServices.CharSet.Auto)]
        public static extern int SetKeyboardState(byte[] keystate);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-28T19:51:18.970

这是我的解决方案：

```
private void dataGridView_CellBeginEdit(object sender, DataGridViewCellCancelEventArgs e)
{
    dataGridView.SelectionMode = DataGridViewSelectionMode.CellSelect;
}

private void dataGridView_CellEndEdit(object sender, DataGridViewCellEventArgs e)
{
    dataGridView.SelectionMode = DataGridViewSelectionMode.RowHeaderSelect;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T08:27:48.800

在这里，这对我来说很好......

```
Private Sub DataGridView1_KeyDown(sender As Object, e As System.Windows.Forms.KeyEventArgs) Handles DataGridView1.KeyDown
    'Lets see what keys we have down shall we?'
    If My.Computer.Keyboard.ShiftKeyDown And e.KeyCode = Keys.Space Then
        DataGridView1.CurrentCell.Selected = False
    End If
End Sub 
```

这是另一种方式..

```
Private Sub DataGridView1_KeyDown(sender As Object, e As System.Windows.Forms.KeyEventArgs) Handles DataGridView1.KeyDown
    'Lets see what keys we have down shall we?'
    If My.Computer.Keyboard.ShiftKeyDown And e.KeyCode = Keys.Space Then
        'SendKeys.Send(Keys.Space)
        DataGridView1.CurrentCell.Selected = False
    End If
End Sub 
```

只是对它们进行试验，我希望对你有用吗？

# mvvm - Knockout.js：页面或页面的一部分上的多个 ViewModel 绑定

> ID：14045872
> 
> 赞同：21
> 
> 时间：2012-12-26T20:27:51.193
> 
> 标签：mvvm, knockout.js, viewmodel

我想知道是否可以多次使用**Knockout.js**将不同的ViewModel 绑定到页面的一部分。`ko.applyBindings()`例如，假设我有这个：

```
<div id="foo">...</div>
...
ko.applyBindings(new PageViewModel());
ko.applyBindings(new PartialViewModel(), $('#foo')[0]); 
```

我现在将两个 ViewModel 绑定应用到`<div id="foo>`. 这合法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-26T20:47:26.043

您不想在同一个元素上多次调用 ko.applyBindings。最好的情况是，元素在更新时会做比必要的工作更多的工作，更糟糕的情况是，您将有多个事件处理程序为同一个元素触发。

有几个选项可以处理这种类型的事情，这里详细介绍： [多视图应用程序的敲除模式示例](https://stackoverflow.com/questions/8676988/example-of-knockoutjs-pattern-for-multi-view-applications/8680668#8680668)

如果您确实需要在您的内容中间有一个“岛”，以便稍后调用应用绑定，那么您可以使用此处描述的技术：[http ://www.knockmeout.net/2012/05/quick-tip -skip-binding.html](http://www.knockmeout.net/2012/05/quick-tip-skip-binding.html)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-06T08:31:55.077

这是实现 JqueryMobile-SPA 时遇到的常见障碍。方法 : ko.applyBindings( `viewmode`, `root dom element`) 接受两个参数。当您的页面中有多个 VM 时，第二个参数会很有帮助。

例如 ：

```
ko.applyBindings(model1, document.getElementById("view1")); 
ko.applyBindings(model2, document.getElementById("view2")); 
```

其中 view1 和 view2 是该模型的根 dom 元素。对于 JqueryMobile-SPA，这将是相应模型的页面 ID。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-12-26T20:45:02.643

最好的方法是在要绑定局部视图模型的 div 中使用“with”绑定构造。你可以在这个[小提琴中找到它](http://jsfiddle.net/rniemeyer/d577K/)

```
<div data-bind="with: model">
   <p data-bind="text: name"></p>
</div>

<div data-bind="with: anothermodel">
   <p data-bind="text: name"></p>
</div>​

var model = {
   name: ko.observable('somename'),
}

var anothermodel = {
    name: ko.observable('someanothername'),
}
ko.applyBindings(model);​ 
```

还可以查看Knockout 站点上的[“with”绑定文档，了解 AJAX 回调 - 部分绑定场景。](http://knockoutjs.com/documentation/with-binding.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-23T23:18:57.690

我的英语很糟糕.... =）

我使用 Sammy 加载部分视图，并使用 Knockout 绑定模型，我尝试使用`ko.cleanNode`但清理所有绑定，所有 DOM 节点在绑定时都已更改，属性`__ko__`已聚合，然后我使用此代码删除了该属性，并且可以正常工作!!，`'#main'`是我的节点。

```
var dom = dom || $("#main")[0];
for (var i in dom) {
  if (i.substr(0, 6) == "__ko__") {
     delete (dom[i]);
     break;
  }
} 
```

使用 Ggle 翻译器后：

我使用 Sammy 加载部分视图，并使用 Knockout 绑定模型，我尝试使用 ko.cleanNode 但清理我的所有绑定，所有 DOM 节点在绑定时都已更改，聚合属性**ko**，然后我使用此代码删除了该属性，并且可以正常工作！！，“#main”是我的节点。

# iphone - 在 UITabBarController 中“重用”UITableViewController

> ID：14045881
> 
> 赞同：0
> 
> 时间：2012-12-26T20:28:20.290
> 
> 标签：iphone, ios, ipad, uitabbarcontroller, uitableview

所以我开始开发一个应用程序，它有 5 个选项卡，其中 3 个显示带有自定义单元格的 UITableViewController，但具有不同的数据。

是否可以将 3 个选项卡链接到同一个 UITableViewController，但检查选择了哪个选项卡，并据此加载正确的数据？

我尝试放入 UITableViewController：

```
if (self.tabBarController.selectedIndex == 0)
//Load array1
else if (self.tabBarController.selectedIndex == 1)
//Load array2
else
//Load array3 
```

但是索引并不总是相同的（这取决于您选择选项卡的顺序？有时我会得到非常高的索引）。

你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:45:13.687

假设您的意思是“是否可以将 3 个选项卡链接到同一个 UITableViewController**实例**”：

这是可能的，但这不是一个好主意。我相信（但不能指出你的章节和经文）Apple 的假设是不同的选项卡将具有独特的、不同的视图控制器实例。当您更改选项卡时，即将隐藏的视图控制器实例会调用各种“即将隐藏”的生命周期方法。同样，即将出现的视图控制器实例具有各种“即将显示”的生命周期方法。您的单视图控制器实例可能会违反这些生命周期方法的显示顺序。

撇开上述观点不谈，仅仅因为用户更改了选项卡，每次重新加载表格也是一种浪费。保持友善，按照你应该做的方式做事。没有理由你不能拥有一个处理所有事情的视图控制器类，但是你为每个选项卡创建一个不同的实例。

注意：您的 UIViewController 知道它在哪个选项卡中算作“代码气味”。这通常意味着您正在以一种不受欢迎的方式做某事并损害此代码的可重用性。这适用于这种情况。

为了避免这种“代码异味”，您的视图控制器应该能够获得要显示的数据，甚至不知道是否显示在 UITabBarController 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:40:29.693

利用`UITabBarControllerDelegate`来检测用户何时切换选项卡。

在标签切换时：

*   将新数组内容分配给用于在表视图中显示数据的成员变量（与您发布的类似 if/else 块），以及
*   调用`reloadData`您的 UITableView 以触发数据重绘

# ios - 即使添加 setcontentsize，UIScrollview 也无法正常工作

> ID：14045883
> 
> 赞同：1
> 
> 时间：2012-12-26T20:28:29.763
> 
> 标签：ios, uiscrollview, custom-view, disabled-control, cgsize

我动态地将自定义视图添加到我的 UIViewController。它现在完美地添加了，没有例外。但是屏幕卡住了。我的滚动视图不起作用。我早些时候遇到了这个问题，人们建议使用 setContentSize。我这样做了，效果很好。现在我有一个新场景。我有 2 个屏幕。在屏幕 A 中我保存值。然后我单击屏幕 A 上的条形按钮项并转到屏幕 B。在屏幕 B 中（它是一个 tableviewcontroller）我选择一行然后去返回屏幕 A 并相应地填充值（基本上加载我在应用程序开头保存的已保存值）。我正确填充它们并添加了滚动视图，但它被卡住了。它既不会向上/向下移动。我编写了这段代码来添加子视图并设置滚动视图大小和帧大小。

```
ITMCustomView *cView = [[ITMCustomView alloc] initWithFrame:CGRectMake(187, 660, 400, 400)
                                                         andOrderedItem:@"New"
                                                                 andTag:self.tagNumber
                                                          withFoldArray:self.foldTypeArray
                                                          withRollArray:self.rollTypeArray];

                cView.tag =self.tagNumber;
            NSLog(@"Assigned tag is %d",cView.tag);

            cView.delegate = self;

            CGPoint scrollPoint = CGPointMake(0.0, (cView.frame.origin.y/500)*400);
            [self.scrollView setContentOffset:scrollPoint animated:YES];

            [self.scrollView addSubview:cView];

            CGFloat scrollViewHeight = 0.0f;
            for (UIView *view in self.scrollView.subviews)
            {
                scrollViewHeight += view.frame.size.height;
            }

            CGSize newSize = CGSizeMake(320,scrollViewHeight);

            [self.scrollView setContentSize:newSize];
            NSLog(@"947 the tag number is %d",self.tagNumber); 
```

我检查了 scrollViewHeight 的值..它的 3254.000..我把它改成了 4000，因为有人建议增加高度。那我做错了什么。这个问题遵循我的另一个问题 [使用 NSNotifications 从 TableViewController 导航回 UIViewController](https://stackoverflow.com/questions/14044441/navigating-back-to-uiviewcontroller-from-tableviewcontroller-using-nsnotificatio#comment19404383_14044441) 如果您需要更多信息，请询问。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-05T05:29:21.663

在我使用*确实*出现而不是*会*出现之后让我的工作。

```
- (void) viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    self.scrollView.contentSize = self.viewMain.bounds.size;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T21:24:01.280

检查`scrollingEnabled`滚动视图上的属性。不出所料，它需要设置为`YES`. 如果是这种情况并且它仍然不起作用，请检查视图（及其超级视图）是否也`userInteractionEnabled`设置`YES`为。在调试器中，您可以`po [self.view recursiveDescription]`恢复视图层次结构，这也可能为您提供一些有用的信息。

# ruby - ruby win32api 集群

> ID：14045885
> 
> 赞同：0
> 
> 时间：2012-12-26T20:29:00.687
> 
> 标签：ruby, winapi

我正在尝试在 ruby​​ 中使用 win32api 并管理 clusapi-

```
require "Win32API"  

OpenCluster = Win32API.new('clusapi','OpenCluster',['P'], 'L')
OpenCluster.call('cc-fs01')

CreateClusterGroup = Win32API.new('clusapi','CreateClusterGroup',['P','P'], 'L')
CreateClusterGroup.call ('cc-fs01','testing') 
```

这是以管理员权限运行的，它没有错误地退出，但它不做任何事情。我尝试过使用 win32/api 和 ffi 进行类似的活动，但无济于事。我不希望通过 ole 使用 mscluster_cluster，因为它已被弃用。这确实有效我的猜测是这与手柄有关，但我不是交流人。这是功能[- http://msdn.microsoft.com/en-us/library/windows/desktop/aa369315(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369315(v=vs.85).aspx)

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:10:16.653

你是对的，但真正的问题是名称、组、资源等必须是 .encode('UTF-16LE')

# sql - 需要优化不在sql语句中

> ID：14045886
> 
> 赞同：0
> 
> 时间：2012-12-26T20:29:06.737
> 
> 标签：sql, in-subquery

我有一个 sql 查询：

```
select person from table t1
inner join person_history ph
on t1.person = ph.person
and t1.person not in (select person from person_history 
                      where effective_date < '01-01-2013')
and ph.person.effective_date > '01-01-2013' 
```

由于`person_history`包含大量记录，此查询耗时过长。

如何优化此代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:25:04.153

您无需排除 NOT IN，因为它已在 WHERE 过滤器中排除！SQL 将很简单，如下所示：

```
select person from table t1
inner join person_history ph on t1.person=ph.person
where effective_date > '01-01-2013' 
```

或者：

```
select person from table t1
WHERE person IN(select ph.person from person_history ph
where effective_date > '01-01-2013' and t1.person=ph.person) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T20:54:36.780

你不能做这样的事情：

```
select person from table t1
inner join person_history ph
on t1.person = ph.person
where ph.effective_date >= '01-01-2013' 
```

# asp.net-mvc-3 - MVC3：同一视图上的按钮操作

> ID：14045888
> 
> 赞同：1
> 
> 时间：2012-12-26T20:29:10.227
> 
> 标签：asp.net-mvc-3, button, view

我希望在按钮单击时更改视图的内部 html，但保持视图。我知道如何在 javascript 中更改 div 的 html 内容，但是如何让按钮的操作不返回不同的视图？

我的按钮看起来像

```
<input type="submit" value="submit" onchange="myfunc()"/> 
```

其中 myfunc() 是 Javascript 中更改 div 内容的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:40:06.903

假设您想要一个使用 ajax 呈现内容的链接（并希望使用 razor），您可以执行以下操作：

首先，设置部分渲染内容的操作。这可以通过几种方式完成，但我将保留操作中的逻辑（并使其可直接或通过 ajax 调用）：

```
[HttpPost]
public ActionResult Save(SomeModel model)
{
  /* build view */
  return Request.IsAjaxRequest() ? PartialView(model) : Wiew(model);
} 
```

接下来，在您的页面中设置一个容器，其中内容将与您要提交的表单一起填充。如果您希望表单在保存时消失，请将其包装在容器中。否则，请将容器分开。在下面的示例中，from 将提交，成功后它将返回，否则新内容将出现在其位置：

```
<div id="ajaxContentPlaceholder">
  @using (Ajax.BeginForm("Save", new AjaxOptions { UpdateTargetId = "ajaxContentPlaceholder" })) {
      <!-- form elements -->
      <input type="submit" value="save" />
  }
</div> 
```

# .net - mvc 4 razor 上传文件而不提交页面表单

> ID：14045889
> 
> 赞同：1
> 
> 时间：2012-12-26T20:29:18.087
> 
> 标签：.net, file, razor, upload, asp.net-mvc-4

我正在编写一个 MVC 4 应用程序，需要允许用户上传文件，但不想在这样做时提交页面的表单。加载整个表单会有一些开销，我宁愿只更新页面上的一部分而不是重新加载它。我在其他网站上看到了这种情况，但似乎无法让它为我工作。

有什么提示吗？

谢谢，迈克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:56:49.643

您可以使用：[Fine Uploader](http://fineuploader.com/#demo)

并会在这里找到 MVC 实现：[MVC Ajax File Upload](https://stackoverflow.com/questions/4884920/mvc3-valums-ajax-file-upload)

# vb.net - 对于不返回任何键列信息的 SelectCommand，不支持为 UpdateCommand 生成动态 SQL

> ID：14045901
> 
> 赞同：11
> 
> 时间：2012-12-26T20:30:15.583
> 
> 标签：vb.net, ms-access

我想通过在 VB.net 中使用 DataGridView 来更新/编辑数据库（MS Access）中的数据我使用了这个代码：

```
 Dim sadapter As OleDb.OleDbDataAdapter
       Dim sds As DataSet
       sadapter.Update(sds, "marks") 
```

然后显示此消息：

> 对于不返回任何键列信息的 SelectCommand，不支持为 UpdateCommand 生成动态 SQL。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-31T08:19:35.963

如果您的表没有主键，则需要设置一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-18T15:20:42.787

如果您的表没有主键，您可以使用[SqlDataAdapter.Fill](https://docs.microsoft.com/en-us/dotnet/api/system.data.common.dataadapter.fill)

# ios - 处理基于 NSMetadataQueryDidUpdateNotification 非 UIDocument 的 iCloud 文件的问题

> ID：14045904
> 
> 赞同：2
> 
> 时间：2012-12-26T20:30:24.157
> 
> 标签：ios, ios6, icloud, nsmetadataquery, icloud-api

在尝试解决这个问题时，我已经很头疼了：在我当前的应用程序中，我使用 iCloud 来存储我的文档——但我不能使用基于 UIDocument 的数据存储。所以我的方法是遵循 WWDC 2012 文章 237（高级 iCloud 文档存储）并将我的文档视为鞋盒应用程序。

当我建立一个 NSMetadataQuery 来监视 iCloud 文档文件夹中的更改以注意文件更改时，就会出现真正的问题。我已经设置了我的查询，从 NSMetadataQueryDidFinishGatheringNotification 的观察者开始，当它触发时，我为查询启用更新并为 NSMetadataQueryDidUpdateNotification 设置了一个观察者。后者仅对一个文件更改有效，我没有找到如何让它重复触发以对相同或其他文件进行后续更改。以下是一些代码部分：

```
- (void)startMonitoringDocumentsFolder: (id)sender
{
    if (self.queryDocs != nil)
        return;

    NSLog(@"startMonitoringDocumentsFolder:");

    self.queryDocs = [[NSMetadataQuery alloc] init];
    [queryDocs setSearchScopes:[NSArray arrayWithObject:NSMetadataQueryUbiquitousDocumentsScope]];

    NSPredicate*    pred = [NSPredicate predicateWithFormat:@"%K like '*.nwa' or %K like '*.NWA'", NSMetadataItemFSNameKey, NSMetadataItemFSNameKey];

    [self.queryDocs setPredicate:pred];

    NSNotificationCenter*   center    = [NSNotificationCenter defaultCenter];
    NSOperationQueue*       mainQueue = [NSOperationQueue mainQueue];

    // I'm using the blocks version because I'm planning to setup observers for the same tracking name...
    self.observeGatherDocs = [center addObserverForName: NSMetadataQueryDidFinishGatheringNotification
                                                 object: self.queryDocs
                                                  queue: mainQueue
                                             usingBlock: ^(NSNotification* note)
    {
        [self queryDidFinishGathering:note];
    }];
    [self.queryDocs startQuery];
}

- (void)queryDidFinishGathering:(NSNotification *)notification
{
    NSLog(@"queryDidFinishGathering:");
    NSMetadataQuery*    query = [notification object];

    if (query == queryDocs)
    {
        NSLog(@"--> for queryDocs");
        NSNotificationCenter*   center    = [NSNotificationCenter defaultCenter];
        NSOperationQueue*       mainQueue = [NSOperationQueue mainQueue];

        [center removeObserver: observeGatherDocs];
        self.observeGatherDocs = nil;
        self.observeUpdateDocs = [center addObserverForName: NSMetadataQueryDidUpdateNotification
                                                     object: query
                                                      queue: mainQueue
                                                 usingBlock: ^(NSNotification* note)
        {
            [self queryDidUpdateDocumentsFolder:note];
        }];

        [query enableUpdates];
    }
}

- (void)queryDidUpdateDocumentsFolder:(NSNotification *)notification
{
    NSLog(@"queryDidUpdateDocumentsFolder:");
    NSMetadataQuery*    query = [notification object];

    [query disableUpdates];

    for (NSMetadataItem* item in [query results])
    {
        // find and handle file changes here w/out any command calls to the query itself
        ...
    }

    if (self.needDownload)
        [self triggerDownloadThread];

    // ---- BEGIN code part added to solve the problem ---- //
    // re-create the observer
    NSNotificationCenter*   center    = [NSNotificationCenter defaultCenter];
    NSOperationQueue*       mainQueue = [NSOperationQueue mainQueue];

    [center removeObserver: observeUpdateDocs];
    self.observeUpdateDocs = [center addObserverForName: NSMetadataQueryDidUpdateNotification
                                                 object: query
                                                  queue: mainQueue
                                             usingBlock: ^(NSNotification* note)
    {
        [self queryDidUpdateDocumentsFolder:note];
    }];
    // ---- END code part added to solve the problem ---- //

    [query enableUpdates];
    // that's all with the query, am I missing something?
} 
```

这里的任何建议都非常感谢。

它的真正作用：

1.  当我直接（通过覆盖）修改 iCloud 文档容器中的文件时 - 什么都没有，查询不会触发。

2.  当我通过 setUbiquitous:NO 序列修改文件时，写入本地文件 setUbiquitous:YES 查询会触发一次，我检测到更改，当我再次更改同一个文件时，不会调用查询处理程序。

因此，尽管我在 Apple 文档中发现写入 iCloud 文件的方式（如 1\. 以上）适用于新文件，但似乎也有必要修改现有文件。

但是，无论如何，我怎样才能让查询机制重复运行呢？

干杯...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T17:51:50.277

经过更多努力进行调查后，我找到了一个了不起的解决方案。因此，如果其他人绊倒，我只是分享我的经验：

1.  观察者实例变量应保留为保留引用（或使用 ARC 时为强引用）
2.  在启用更新之前，必须重新创建观察者。

似乎就是这样。现在它似乎工作。

# android - 谷歌地图：在移动应用程序中嵌入多个位置和方向

> ID：14045908
> 
> 赞同：1
> 
> 时间：2012-12-26T20:30:40.070
> 
> 标签：android, ios, google-maps, cordova, jquery-mobile

我正在为拥有 4 个办公室/建筑物的医疗诊所创建一个移动应用程序。我想创建一个标记所有 4 个位置的谷歌地图，并为用户提供获取每个位置的路线的选项。

我正在 Phonegap 和 Jquery mobile 中构建这个应用程序。到目前为止，我发现的最接近的是：[Direction example](http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-mobile.html#directions_map)。

如果启用 GPS 或使用地理定位，我还希望“发件人”字段默认为用户的位置。

这样做的常见做法是什么（从可用性的角度来看）？你知道我可以参考的任何资源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:20:12.217

要在您的项目中使用 gps，您可以使用下面的代码

```
if (navigator.geolocation) {
navigator.geolocation.getCurrentPosition( 

    function (position) {  

    // Did we get the position correctly?
    // alert (position.coords.latitude);

    // To see everything available in the position.coords array:
    // for (key in position.coords) {alert(key)}

    mapServiceProvider(position.coords.latitude,position.coords.longitude);

    }, 
    // next function is the error callback
    function (error)
    {
        switch(error.code) 
        {
            case error.TIMEOUT:
                alert ('Timeout');
                break;
            case error.POSITION_UNAVAILABLE:
                alert ('Position unavailable');
                break;
            case error.PERMISSION_DENIED:
                alert ('Permission denied');
                break;
            case error.UNKNOWN_ERROR:
                alert ('Unknown error');
                break;
        }
    });
} 
```

可以在[此处](http://merged.ca/iphone/html5-geolocation)或[phonegap 文档](http://docs.phonegap.com/en/1.0.0/phonegap_geolocation_geolocation.md.html#geolocation.getCurrentPosition)中找到。 当您拥有该位置时，您可以更改表单的值。然后是是否使用谷歌地图插件的问题。我个人没有使用任何。由于您使用的是 jquery mobile，因此您可以使用[它](http://code.google.com/p/jquery-ui-map/)。

在 init 事件中创建地图（因此您只创建一次）并在 pageshow 事件中触发调整大小事件，这样您就不会遇到地图出现在屏幕左上角等问题。如果您使用我提到的插件，寻找刷新方法。地图的容器必须有大小。如果不是，它将无法正确显示，因为 jqm 将为容器提供最小大小。您可以以编程方式进行（检查窗口高度和宽度）并计算空间（如果有标题，则必须将其包含在计算中）。最后，如果您在缩放时遇到问题，请查看[此](https://stackoverflow.com/questions/14034724/select-of-alternative-route-reduces-zoom)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:20:21.690

查看这篇关于[jQuery Mobile 中的 Google 地图](http://forum.jquery.com/topic/google-maps-inside-jquery-mobile)的帖子。我认为这可以解决您的问题。

# python - 查找特定图表的坐标

> ID：14045910
> 
> 赞同：0
> 
> 时间：2012-12-26T20:30:47.413
> 
> 标签：python

我需要扫描几个字符串的列表（每一行都是字符串），找到符号“+”或“@”（只能出现其中一个），然后打印 x,y 坐标。左角是（0,0），如果你保持向右和向下，值会增加。

我不明白我的代码有什么问题：

```
 x,y=-1,-1
    for row in my_list:  
            y+=1
            for symbol in row:
                    x+=1
                    if symbol=="@":
                            makom=(x,y)
                            player="@"       
                    if symbol=="+":
                            makom=(x,y)
                            player="+"

     print makom 
```

列表：

```
####
# .#
#  ###
#*@  #
#  $ #
#  ###
#### 
```

输出：

```
(2,3) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T20:39:00.230

`x`您在更改行时忘记重置：

```
y = -1
for row in my_list:  
        x = -1
        y += 1
        for symbol in row:
                x += 1
                if symbol == "@":
                        makom = (x,y)
                        player = "@"       
                if symbol == "+":
                        makom = (x,y)
                        player = "+"

print makom 
```

`enumerate`为了完整起见，如果您使用：D ，您就不会犯这个错误

```
for y, row in enumerate(my_list):
        for x, symbol in enumerate(row):
                if symbol == "@":
                        makom = (x, y)
                        player = "@"       
                if symbol == "+":
                        makom = (x, y)
                        player = "+"

print makom 
```

# javascript - 为什么 JSHint 不喜欢对象方法调用的三元组？

> ID：14045918
> 
> 赞同：7
> 
> 时间：2012-12-26T20:31:20.000
> 
> 标签：javascript, jshint

JSHint 给出以下错误：

> 期望一个赋值或函数调用，而是看到一个表达式。

对于以下代码行：

```
(aFunctionOrNull) ? aFunctionOrNull() : someObject.someMethod(); 
```

它突出显示了决赛`)`，`someMethod`所以我认为错误就在那里。`if () {} else {}`代码有效，当我将其更改为语法时，JSHint 没有问题。我不介意更长的语法，但我想了解为什么 JSHint 会这样说，以及这是否是一种不好的做法。

最大的困惑可能来自术语。是`someObject.someMethod()`不是函数调用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T20:37:13.703

JSHint 说的是表达式，或者`expr`：

> 此选项抑制有关使用表达式的警告，通常您希望看到赋值或函数调用。大多数时候，这样的代码是一个错字。但是，规范并没有禁止它，这就是为什么这个警告是可选的。

虽然 JSLint 说：

> 表达式语句应为赋值或函数/方法调用或删除。所有其他表达式语句都被视为错误。

AFAIK，做你正在做的事情没有问题，只是它会发出警告，因为它希望你使用一个`if..else`语句，但你可以在 JSHint 中关闭它：

```
/*jshint expr:true */ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-26T20:47:07.333

好吧，一般来说，使用三元运算符调用函数而不分配返回值（这似乎是你正在做的）被认为是不好的做法。
此外，值得检查一下 JSHint 对以下代码的看法：

```
(aFunctionOrNull || someObject.someMethod)(); 
```

如果`aFunctionOrNull`未定义（或 null 或 falsy），则*逻辑或位*将导致表达式计算为`someObject.someMethod`，并调用其结果值（希望是对函数对象的引用）。这使您有机会在没有大量嵌套三元组的情况下编写更*“故障安全”的代码：*

```
(aFunctionOrNull || someObject.someMethod || function(){})(); 
```

分组表达式现在必然会评估为真值，因此不会引发错误。
为了避免 JSHint 唠叨你没有对返回值做任何事情，要么将它分配给一个变量（我不太喜欢这样做），要么添加一个小运算符：

```
~(aFunctionOrNull || someObject.someMethod || function(){})();//bitwise not
!(aFunctionOrNull || someObject.someMethod || function(){})();//logical not, doesn't really matter which one 
```

关于你的最后一个问题：`someObject.someMethod`确实是一个函数调用。更具体地说，它是对' 上下文中的*函数对象的调用。* 对于那些不知道这一点的人：JS 函数是对象，被调用的上下文要么使用方法显式设置（在 上定义）或*ad-hoc*：`someObject`
`bind``Function.prototype`

 *```
var referenceToMethod = someObject.someMethod;
referenceToMethod();//<-- inside the function objects, this now points to the global object 
```

一个简单的想法是 JS 函数只是在内存/空间/时间中漫无目的地漂浮，直到它们通过引用被调用，然后将该引用的上下文传递给函数对象，以确定它将是什么对象与。。。相互作用。遗憾的是，这是默认情况下或`null`严格模式下的全局对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-26T20:45:14.937

有错误是因为三元是一个表达式。您可以使用它来设置变量：

```
var result = a ? b : c; 
```

请注意，三元的计算结果为`b`or `c`。这是一种表达。

也就是说，警告（我相信）来自三元组的可读性比`if...else`块差的概念。上面的代码可以改写

```
var result;
if (a) {
    result = b;
} else {
    result = c;
} 
```

这比三元更容易阅读。JSHint 在促进代码*可读性*方面所做的工作与它对*有效*代码所做的工作一样多。如果您愿意在代码中包含这些表达式，请继续禁用表达式警告。（这就是我会做的。）*

# dll - 公共库应该放在 TFS 项目结构的什么位置？

> ID：14045919
> 
> 赞同：1
> 
> 时间：2012-12-26T20:31:31.067
> 
> 标签：dll, tfs, projects-and-solutions

前段时间，我们的团队开始在一个网站项目上工作，该项目引用了一个 DAL 项目，我们将其置于与网站相同的解决方案中。从那时起，我们创建了一些 Web 服务和几个使用相同库的客户端应用程序。

DAL 项目仍然驻留在网站解决方案中，因此其他解决方案必须遍历网站解决方案文件夹结构才能包含它。

如何存储共享项目，以便从多解决方案的角度来看它们是有意义的？我的 DAL 是否应该在自己的解决方案中，与使用它的其他解决方案处于同等目录地位，还是应该只是一个位于解决方案文件夹之外的自由浮动项目？

我真的很想实现一种方法，当我们稍后再执行 3 或 4 次时，它会起作用，因为我们都知道今天的黑客攻击功能明天会收到 10 种请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T20:43:30.583

以下是我通常喜欢的设置方式：

```
\Common
    \Library1
         .csproj and other files for Library1
    \Library2
         .csproj and other files for Library2
\Services
    \ServiceProject1
         .csproj and other files for ServiceProject1
         .sln which references ServiceProject1.csproj, Library1.csproj, and Library2.csproj
    \ServiceProject2
         .csproj and other files for ServiceProject2
         .sln which references ServiceProject3.csproj, Library1.csproj, and Library2.csproj
\Clients
    \WebProject1
         .csproj and other files for WebProject1
         .sln which references WebProject1.csproj, Library1.csproj, and Library2.csproj
    \WinFormsProject1
         .csproj and other files for WinFormsProject1
         .sln which references WinFormsProject1.csproj, Library1.csproj, and Library2.csproj
AllProjects.sln which references all .csproj files for when you need to do refactorings,  architecture diagrams, etc at a global level 
```

# php - 在页数中添加 else 语句？

> ID：14045922
> 
> 赞同：-1
> 
> 时间：2012-12-26T20:31:35.233
> 
> 标签：php, redirect, count

我有一个页数来限制注销用户可以查看配置文件的次数。如果用户已注销，他们将被重定向到注册页面，这是正确的，应该是正在发生的事情，但是当用户登录时我会发生同样的事情，我如何添加 else 语句或 if 语句说仅重定向到注册页面或仅在未登录时限制个人资料点击？

谢谢

```
<?
!session_id() ? session_start() : null;

verify_profile_visit_limit();

function verify_profile_visit_limit(){
    $free_profiles = array(99999,99998,99997,99996,99995,99994,99993);

    if(in_array($_GET["id"], $free_profiles)) return;

    if(! isset($_SESSION["page_access_count"])){
        $_SESSION["page_access_count"] = 1;
    }

    $_SESSION["page_access_count"]++;

    if($_SESSION["page_access_count"] > 5){
        header("Location: limit.php");
        exit();
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:46:51.937

只需添加一个`OR`条件，以便您`return`在用户登录时：

```
 if(in_array($_GET["id"], $free_profiles) || isset($_SESSION['loggedIn']) && $_SESSION['loggedIn']) return; 
```

这样，您的函数将在运行限制检查之前返回。假设您将布尔值 ( `true`/ `false`) 存储在`$_SESSION['loggedIn']`.

# c - C语言，将变量乘以1，结果我得到2

> ID：14045928
> 
> 赞同：-1
> 
> 时间：2012-12-26T20:32:08.053
> 
> 标签：c

问题是我试图为数字 1 - 10 显示一个*n*和*n^2*的表格，除了第一组数字之外，这一切似乎都很好。看来程序，可能是由于我的编码不好，认为1 * 1 = 2。我尝试重新排列代码并使用不同的循环，但我能得到的最接近的是正确显示除第一组之外的所有其他数字。

这是代码：

```
int main (void)
{

    int num, num2, exp;

    num = 0;

    printf ("\nPROGRAM TO DETERMINE SQUARES OF NUMBERS 1 THROUGH 10\n\n");
    printf (" -Numbers---                         ---Squares- \n"); 
    printf ("-------------------------------------------------\n");   

    for (num2 = num + 1; num2 <= 10; exp = num2*num2)   
        {
        printf ("   %3d                                   %3d\n", num2, exp);
        printf ("  ----------------------------------------------\n");
             ++num2; 
        }
} 
```

我确信解决方案很简单，但是经过数小时的重新编码后，我无法弄清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T20:36:40.543

为什么 num 甚至存在？我会这样做，还将循环内容放在循环中而不是循环控制中——我相信这会使逻辑更容易：

```
int main (void)
{

    int num2, exp;

    printf ("\nPROGRAM TO DETERMINE SQUARES OF NUMBERS 1 THROUGH 10\n\n");
    printf (" -Numbers---                         ---Squares- \n"); 
    printf ("-------------------------------------------------\n");   

    for (num2 = 1; num2 <= 10; num2++)   
    {
        exp = num2*num2;
        printf ("   %3d                                   %3d\n", num2, exp);
        printf ("  ----------------------------------------------\n");
    }
} 
```

# java - java中的静态类

> ID：14045929
> 
> 赞同：1
> 
> 时间：2012-12-26T20:32:09.580
> 
> 标签：java, class, static

```
package shubh;
class thread5
{
    static class a7 extends Thread
    {
        public void run()
        {
            for(int i=0;i<=10;i++)
            {
                System.out.println(i);
            }
        }
    }

    static class a8 implements Runnable
    {
        public void run()
        {
            for(int i=21;i<=30;i++)
            {
                System.out.println(i);
            }
        }
    }

    public static void main(String arg[])
    {
        a7 a=new a7();
        a.start();
        a8 b=new a8();
        Thread th=new Thread(b);
        th.start();
        for(int i=40;i<=50;i++)
        {
            System.out.println(i);
        }
    }
} 
```

当我从 2 个嵌套类中删除 static 关键字时，它给出错误**non static variable cannot be referenced from a static context**谁能解释我这个错误的含义或为什么有必要将嵌套类作为静态

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T20:33:41.843

如果你删除`static`，那么你需要一个实际的对象来实例化内部类。IE
`new thread5().new a7();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T20:35:21.193

非静态内部类只能在类的实例*中*实例化，例如：

```
thread5 t = new thread5();
a7 a = t.new a7(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T20:34:22.797

> 当我从 2 个嵌套类中删除 static 关键字时，它给出错误 non static variable cannot be referenced from a static context

您不能从静态方法直接访问非静态数据/方法/类，您需要一个类的实例来访问它们。

如果你删除类 a7 的静态，你应该像这样创建 a7 实例。

```
Threads5 td = new Threads5()';
a7 a=new td.new a7(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T20:35:06.930

[在这篇 Javarevisited 文章](http://javarevisited.blogspot.com/2012/02/why-non-static-variable-cannot-be.html)中找到了答案

> 现在在找到编译器错误“无法从静态上下文引用非静态变量”的答案之前，让我们快速修改一下静态。Java中的静态变量属于Class，并且它的值对于所有实例都保持不变。另一方面，在将类加载到 JVM 时初始化静态变量，实例变量对于每个实例具有不同的值，并且它们是在使用 new() 运算符或使用反射（如 Class.newInstance()）创建对象实例时创建的。因此，如果您尝试在没有任何实例的情况下访问非静态变量，编译器会抱怨，因为这些变量尚未创建，并且在创建实例并且它们与任何实例关联之前它们不存在。
> 
> 总之，由于即使不创建任何类实例也可以运行静态上下文中的代码，因此为尚未创建的特定实例询问值是没有意义的。

# python - aws python boto：寻找中断get_contents_to_filename的可靠方法

> ID：14045934
> 
> 赞同：1
> 
> 时间：2012-12-26T20:32:38.710
> 
> 标签：python, amazon-web-services, interrupt

我有一个 python 函数，可以将文件从 S3 下载到本地驱动器上的某个临时位置，然后对其进行处理。下载部分如下所示：

```
 def processNewDataFile(key):

     ## templocation below is just some temp local path
     key.get_contents_to_filename(templocation)
     ## further processing 
```

这`key`是要下载的文件的 AWS 密钥。我注意到的是，有时`get_contents_to_filename`似乎会冻结。在我的代码的其他部分，如果这些块没有在指定的时间内完成，我有一些解决方案会中断代码块（并引发异常）。这个解决方案在这里很难使用，因为我需要下载的文件大小不同，有时 S3 的响应速度比其他时间慢。

那么是否有任何可靠的中断/超时`get_contents_to_filename`方式不涉及硬性预定时间限制？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:43:20.540

您可以使用回调函数`get_contents_to_filename`

[http://boto.cloudhackers.com/en/latest/ref/gs.html#boto.gs.key.Key.get_contents_to_file](http://boto.cloudhackers.com/en/latest/ref/gs.html#boto.gs.key.Key.get_contents_to_file)

回调函数需要两个参数，Bytes Sent 和 Total Size 文件。您也可以指定粒度（回调将被调用的最大次数），尽管我只将它用于小文件（小于 10kb）并且它通常只被调用两次——一次在开始时，一次在结束时。

重要的是它会在传输开始时将文件的大小传递给回调函数，然后它可以根据文件的大小启动一个计时器。

# php - php 从字符串中去掉前 10 个数字，并将剩余的数字放入一个新字符串中

> ID：14045939
> 
> 赞同：0
> 
> 时间：2012-12-26T20:33:05.883
> 
> 标签：php, string, trim

我想从字符串中删除前 10 个数字，然后将原始字符串中的剩余数字变成一个新字符串以供使用。

例子：

```
$org_string = '304928340912'; 
```

我认为它是通过正则表达式或 trim() 函数完成的，但对它们了解不够，无法从一开始就定义在 10 个数字处修剪的位置。

我正在寻找的结果将是（基于上面的 org_string）：

```
$new_string = '12'; 
```

最后的数字可能是 1、2、3、4 位数字，所以我可以去掉最后的 x 个数字。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T20:34:30.563

使用[`substr`](http://php.net/substr).

```
$new_string = substr($org_string, 10); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T20:45:07.277

```
$new_string = '';
if (strlen($org_string) > 10)
{
    $new_string = substr($org_string, 10);
}
echo $new_string; 
```

否则我们可以获得`false`

> substr (PHP 4, PHP 5) 返回字符串的一部分
> 
> 返回： 类型：字符串 描述：字符串中提取的部分；或 FALSE 失败，或空字符串。

# android - 在动画期间显示之前绘制视图

> ID：14045940
> 
> 赞同：1
> 
> 时间：2012-12-26T20:33:16.193
> 
> 标签：android, android-animation

我在 ViewFlipper 中有两个视图，它们之间有一个快速/复杂的动画。第二个视图包含一个列表，因此在该视图在动画中途变得可见的那一刻，getView() 被调用了很多次并导致非常明显的卡顿（通常在整个动画的后半部分停止）

理想情况下，我想在开始动画之前预渲染（测量、布局、绘制）第二个视图，但我还没有找到一种简单的方法来做到这一点。

我还探索过使用绘图缓存、屏幕外画布等 - 但我也找不到实现此目的的简单方法。似乎是任何在两个视图之间制作动画的人都会遇到的问题。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-19T19:30:37.460

您可以通过在开始动画之前指定图层类型并调用 buildLayer() 来实现，这会强制渲染视图。

```
newView.setLayerType(View.LAYER_TYPE_HARDWARE, null);
newView.buildLayer(); 
```

您也可以使用 LAYER_TYPE_SOFTWARE。默认值为 LAYER_TYPE_NONE，它会阻止 buildLayer() 执行任何操作。

# amazon-web-services - 在 EC2 上挂载 EBS 卷时出现问题

> ID：14045942
> 
> 赞同：4
> 
> 时间：2012-12-26T20:33:20.907
> 
> 标签：amazon-web-services, amazon-ec2, mount, amazon-ebs

下午好，

我是 EC2 的新手，一直在尝试在 EC2 实例上挂载 EBS 卷。按照[此 StackOverflow 问题](https://stackoverflow.com/questions/11535617/add-ebs-to-ubuntu-ec2-instance)的说明，我执行了以下操作：

```
1\.  Format file system /dev/xvdf (Ubuntu's internal name for this particular device number):

  sudo mkfs.ext4 /dev/xvdf

2\.  Mount file system (with update to /etc/fstab so it stays mounted on reboot):

  sudo mkdir -m 000 /vol
  echo "/dev/xvdf /vol auto noatime 0 0" | sudo tee -a /etc/fstab
  sudo mount /vol 
```

现在似乎有一个文件夹（或卷），`/vol`但它已经（预先填充？）有一个名为 的文件夹`lost+found`，并且没有我分配给 EBS 卷的 15GB（它的体积要小得多）。

您可以提供的任何帮助将不胜感激。谢谢！

**更新 1**

在遵循第一个建议 ( `sudo mount /dev/xvdf /vol`) 之后，这里是 df 的输出：

```
Filesystem     1K-blocks   Used Available Use% Mounted on
/dev/xvda1       8256952 791440   7046084  11% /
udev              294216      8    294208   1% /dev
tmpfs             120876    164    120712   1% /run
none                5120      0      5120   0% /run/lock
none              302188      0    302188   0% /run/shm
/dev/xvdf       15481840 169456  14525952   2% /vol 
```

这可能表明我确实拥有 15GB 内存`/vol`。但是我仍然有那个奇怪`lost+found`的文件夹。有什么我应该担心的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T02:28:28.730

您的 /vol 没有任何问题。它已安装，如`df`输出所示。

`lost+found`文件系统使用目录来恢复损坏的文件（fsck 将恢复的文件存储在那里），因此您可以看到它是正常的。

小尺寸问题可能涉及千字节：

```
1 kibibyte = 2^10 = 1024 bytes
16G = 14.9Gib 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T21:03:46.850

在最后一行尝试： sudo mount /dev/xvdf /vol

# objective-c - 菜单状态应用疑点

> ID：14045943
> 
> 赞同：0
> 
> 时间：2012-12-26T20:33:26.117
> 
> 标签：objective-c, osx-mountain-lion

> **可能重复：**
> [如何为 Mac 创建菜单栏应用程序](https://stackoverflow.com/questions/3409985/how-to-create-a-menubar-application-for-mac)

我已经用 Cocoa 为 Mac OS X 实现了一个提要。
它是一个状态应用程序，只显示菜单。现在基本上我得到了三个问题：

*   当我启动它时，我总是在 Dock 中看到应用程序图标。但这是一个菜单状态应用程序，如何删除 Dock 图标？它应该是像 Watts 和 Dropbox 这样的应用程序，一个纯菜单；
*   如何防止用户多次启动应用程序？如果用户这样做，我不想启动应用程序的第二个实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:00:29.460

> 如何防止用户多次启动应用程序？如果用户这样做，我不想启动应用程序的第二个实例。

这通常会`flock`在基于 unix 的系统上使用文件系统锁 ( ) 来完成。

但话又说回来，Cocoa 有一个更简单的解决方案。您可以通过向系统提供其捆绑标识符来检查应用程序是否处于活动状态。

```
NSRunningApplication runningApplicationsWithBundleIdentifier: 
```

有关更多信息，请参阅[NSRunningApplication 参考](http://developer.apple.com/library/mac/#documentation/AppKit/Reference/NSRunningApplication_Class/Reference/Reference.html)。

# php - MongoDb 更新不适用于 php 中的日期

> ID：14045947
> 
> 赞同：0
> 
> 时间：2012-12-26T20:33:37.710
> 
> 标签：php, mongodb

我尝试对 Mongo Db 执行更新查询。我使用 php，并发送将要更新的值。我以毫秒为单位发送日期参数。但它没有用。这是代码；

```
 function updateEventById($id1,$start,$end,$collection)
{
    $this->collection = $this->database->$collection;

    //$start=new MongoDate($start);

    //$end=new MongoDate($end);

    $newdata = array('$set' => array("start.sec" => $start,
                "end.sec" =>  $end ));

    $theObjId = new MongoId($id1["\$id"]);
    $this->collection->update(array("_id" => $theObjId), $newdata);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:40:32.417

在codeigniter框架中工作，所以：

```
 $this->_comment->mongo_db->where(array("idnota" => (int)$idnota, "type" => 3))->set($update)->update($collection); 
```

我认为问题在于 id 尝试比较 vardump () 以查看它是否达到适当的参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T22:53:09.337

我已经使用 Mongo Shell 尝试过您的案例，并且工作正常。

```
> db.col.insert({start: {sec: new Date()}, end: {sec: new Date()}})
> db.col.find()
{ "_id" : ObjectId("50db7b136db4ad2bff518a03"), "start" : { "sec" : ISODate("201
2-12-26T22:32:51.098Z") }, "end" : { "sec" : ISODate("2012-12-26T22:32:51.098Z")
 } }
> db.col.update({_id: ObjectId("50db7b136db4ad2bff518a03")}, {$set: {"start.sec"
: new Date(), "end.sec": new Date()}})
> db.col.find()
{ "_id" : ObjectId("50db7b136db4ad2bff518a03"), "start" : { "sec" : ISODate("201
2-12-26T22:33:33.725Z") }, "end" : { "sec" : ISODate("2012-12-26T22:33:33.725Z")
 } }
> 
```

我认为你应该使用 MongoDB 实例中的 selectCollection 函数而不是调用属性（因为 PyMongo 工作，扩展`__getitem__`和`__getattr__`）：

```
$this->database->selectCollection($collection)->update(array("_id" => $theObjId), $newdata); 
```

另一个问题，可能你应该调试你的代码，因为“集合”属性类可能会在另一个集合中执行更新之前更改它的值。

如果您使用的是 MongoClient 类，请参阅 WriteConcern 结果。

# c++ - 返回一个数组...而不是指向数组的引用或指针

> ID：14045951
> 
> 赞同：2
> 
> 时间：2012-12-26T20:33:57.150
> 
> 标签：c++, arrays, return

我有点困惑。从方法返回数组有两种方法。第一个建议如下：

```
typedef int arrT[10];
arrT *func(int i); 
```

但是，如何捕获 int (*)[] 的返回值？

另一种方法是通过引用或指针：

```
int (*func(int i)[10]; 
```

或者

```
int (&func(int i)[10]; 
```

返回类型是 int (*)[] 或 int (&)[]。

我遇到的麻烦是如何分配一个变量来接受这一点，并且我继续遇到错误，例如：

```
can't convert int* to int (*)[] 
```

知道我做错了什么或我的知识缺乏什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-26T20:35:52.127

如果要按值返回数组，请将其放入结构中。

标准委员会已经这样做了，因此您可以使用`std::array<int,10>`.

```
std::array<int,10> func(int i);
std::array<int,10> x = func(77); 
```

这使得通过引用返回也非常简单：

```
std::array<int,10>& func2(int i);
std::array<int,10>& y = func2(5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T21:22:08.583

首先，您提供的信息不正确。

你写，

> “从方法返回数组有两种方法”

然后你举个例子

```
typedef int arrT[10];
arrT *func(int i); 
```

和

```
int (*func(int i))[10]; 
```

（我添加了缺少的右括号），你说后一种方式，与第一种方式相比，是一个例子

> “通过引用或指针”

好吧，这两个声明*的含义完全相同，*也就是说：

```
typedef int A[10];
A* fp1( int i ) { return 0; }

int (*fp2( int i ))[10] { return 0; }

int main()
{
    int (*p1)[10]   = fp1( 100 );
    int (*p2)[10]   = fp2( 200 );
} 
```

在这两种情况下，都会返回指向数组的指针，并且该指针的类型为“指向数组的指针”。取消引用该指针会产生数组本身，它会再次衰减为指向自身的指针，但现在键入为“指向项目的指针”。它是指向数组第一项的指针。在机器代码级别，这两个指针实际上是完全相同的。来自帕斯卡的背景让我困惑了很长时间，但结果是，因为在类型中携带数组大小通常是不切实际的（这排除了处理不同运行时大小的数组），大多数数组处理代码处理指向第一项的指针，而不是指向整个数组的指针。

即，通常像函数这样的低级 C 语言将被声明为

```
int* func() 
```

返回指向在运行时建立的大小数组的第一项的指针。

现在，如果你想*按值*返回一个数组，那么你有两个选择：

*   按值返回一个固定大小的数组：把它放在一个`struct`.
    该标准已经提供了一个模板类来执行此操作，**`std::array`**.

*   按值返回可变大小的数组：使用处理复制的类。
    该标准已经提供了一个模板类来执行此操作，**`std::vector`**.

例如，

```
#include <vector>
using namespace std;

vector<int> foo() { return vector<int>( 10 ); }

int main()
{
    vector<int> const   v = foo();
    // ...
} 
```

这是最一般的。使用`std::array`更多的是针对特殊情况的优化。作为初学者，请记住 Donald Knuth 的建议：“过早的优化是万恶之源。” 即，`std::vector`除非有非常好的理由使用`std::array`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-31T18:54:46.860

```
using arrT10 = int[10]; // Or you can use typedef if you want

arrT10 * func(int i)
{
    arrT10 a10;
    return &a10;

    // int a[10];
    // return a;    // ERROR: can't convert int* to int (*)[]
} 
```

这会给你一个警告，因为`func`返回一个局部变量的地址，所以我们不应该这样编码，但我相信这段代码可以帮助你。

# android - Android：尝试用英语以外的其他语言阅读单词

> ID：14045952
> 
> 赞同：1
> 
> 时间：2012-12-26T20:33:59.540
> 
> 标签：android, java.util.scanner

我有一个使用方法 s.next(); 的扫描仪。（它读取一个用“”分隔的整个单词）它可以很好地处理英文字母和单词，但是当我用希伯来语写东西时，它会返回“??” 反而。

我的手机确实有希伯来语，我的应用程序中的所有其他字符串都是希伯来语，只有扫描仪读取的返回 ?????。

有什么帮助吗？谢谢 ：）

扫描仪代码：（它是异步任务的一部分）

```
@Override
    protected Void doInBackground(CharSequence... txt) {
        Scanner s = new Scanner(getResources().openRawResource(R.raw.data));
        try {
            boolean add;
            do { 
                add = false;
                ListItem temp = new ListItem();
                temp.data[ListItem.NAME] = s.next();
                Log.i("AsyncTask", temp.data[ListItem.NAME]);
                if (temp.data[ListItem.NAME].contains(txt[0])) {
                    Log.i("match", "found");
                    add = true; 
                }
                temp.data[ListItem.MAKAT] = s.next();
                Log.i("AsyncTask", temp.data[ListItem.MAKAT]);
                if (temp.data[ListItem.MAKAT].contains(txt[0])) {
                    add = true; 
                }
                temp.data[ListItem.JHAZIT] = s.next();
                temp.data[ListItem.KOMA] = s.next();
                temp.data[ListItem.MESPAR] = s.next();

                if (add) {
                    this.publishProgress(temp);
                }
            }
            while (s.hasNext());

        }
        finally {
            s.close();
        }
        return null;
    } 
```

我取出信息的文件名为 data.txt ：

> 桶 4315124 2 3 43
> 车 414124 2 4 41
> Red_box 4315124 1 2 77
> Glass_cup 4515124 4 7 10
> Iron_cup 4515124 4 7 9
> Gabi_Noob 5717217 7 8 9 מכסה_158ו35 8 46

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:44:58.597

好吧，实际上使用评论中提到的UTF-8编码有效，只有我必须使用eclipse之外的记事本创建data.txt并使用UTF-8编码而不是ANSI（默认）保存它而不是我只需将其导入原始文件夹的 Eclipse 中，单击运行即可。魔法。

我想我的错误是从 Eclipse 内部创建 data.txt。

# wpf - WPF MVVM：如果我使用 DataTemplate，如何在 ListBox 中启用/禁用按钮

> ID：14045953
> 
> 赞同：0
> 
> 时间：2012-12-26T20:34:05.993
> 
> 标签：wpf, mvvm, listbox, command, datatemplate

我有一个 WPF/MVVM 应用程序，`ListBox`它通过`DataTemplate`. 我设法`ListBox`在按下按钮时更改了所选项目，因此`CommandParameter`链接到`ListBox`'s `SelectedItem`，但我无法以相同的方式正确启用/禁用按钮。例如，如果我有 2 个项目并且按钮应该在一个中启用而在另一个中禁用，当我选择一个元素时，两个按钮具有相同的状态，并且当我选择另一个项目时它们都会改变状态。

我正在使用`RelayCommand`许多 MVVM 框架中使用的 a。

这是我的 XAML（删除了“不感兴趣”的部分）：

```
<UserControl.Resources>

    <DataTemplate x:Key="ItemTemplate">
            <Grid>
                <Button Content="Something" Name="EnabledDisabledButton" Click="Button_Click"
                            Command="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=DataContext.SomeCommand}"
                            CommandParameter="{Binding RelativeSource={RelativeSource AncestorType={x:Type ListBox}}, Path=SelectedItem}"/>
            </Grid>
    </DataTemplate>

    <Style TargetType="{x:Type ListBoxItem}" x:Key="ContainerStyle">
        <Setter Property="ContentTemplate" Value="{StaticResource ItemTemplate}" />
    </Style>

</UserControl.Resources>

   <ListBox x:Name="myListBox" ItemsSource="{Binding ElementList}"
             IsSynchronizedWithCurrentItem="True" ItemContainerStyle="{StaticResource ContainerStyle}"/> 
```

我试图将'`SelectedItem`作为参数传递给`RelayCommand`'`CanExecute`方法，但结果和以前一样。

有没有办法将`ListBoxItem`按钮“居住”的实际值作为参数传递给命令，因此每个都将由该`CanExecute`方法单独处理？如果我得到了它会起作用吗？（现在我正在处理`Click`事件以在执行命令之前在列表中选择正确的项目）。

在我的`CanExecute`方法中，我正在评估 的某些属性`SelectedItem`以启用/禁用相应的按钮。另一种方法是评估所有元素的此属性，但我想不出在 内部执行此操作的方法`ViewModel`，然后将结果传达给视图（如果`DataTemplate`在项目中使用 a 时甚至可能的话）。

感谢您的输入，问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:47:48.480

您在问题中提到了“MVVM”，但您似乎充分利用了 MVVM 方式。

我根本不会在样式中有 Button_Click 事件。那是因为它实际上是一种样式，根据定义可以将其更改为不具有相同事件的另一种样式，如果您将来选择基于样式的应用程序，这将再次使应用程序停止工作. 我使用的规则是风格就是风格。样式与应用程序的 UI 和“外观”有关。功能应该与 UI 分开。程序员可以定义命令，设计者可以决定用户如何以最佳方式使用它。

这正是从 MVVM 模式中分离代码的地方。将“外观”和用户行为与应用程序的逻辑分开。就像...如果命令从按钮、菜单、数据上下文或击键触发，模型应该无关紧要。

如果这个特殊问题由我处理，我会通过拥有一个 HOLDER 类来解决它。这是一个类（实现 INotifyPropertyChanged 的​​ DependencyObject），它包含一个 ICommand 属性以及将显示在 ListBox 的各个行中的“行”。

ICommand 属性将绑定到 Button，将行（类）本身作为调用的 CommandParameter。然后将在 ListBox 上的 ItemTemplate 中使用实际行，并绑定到不同的元素（带有或不带有转换器的属性）以使任何所需的显示可用。

我希望我解释得足够好......如果您想要我的解决方案替代方案的更多详细信息，请随时询问更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T01:36:03.417

将我的评论转换为答案：

为什么不只是`CommandParameter="{Binding}"`？

# powershell - 从 WiX 安装程序运行 PowerShell 脚本

> ID：14045955
> 
> 赞同：12
> 
> 时间：2012-12-26T20:34:24.000
> 
> 标签：powershell, wix, windows-installer

我找到了几个示例，展示了如何从 WiX 运行 PowerShell 脚本，但没有成功运行其中任何一个。所以，我想发布我所拥有的，希望有人能指出我做错了什么。

```
<!--Install the PowerShell script-->
<DirectoryRef Id="INSTALLFOLDER">
  <Component Id="cmp_ShutdownIExplore" Guid="{4AFAACBC-97BB-416f-9946-68E2A795EA20}" KeyPath="yes">
    <File Id="ShutdownIExplore" Name="ShutdownIExplore.ps1" Source="$(var.ProjectDir)Source\PowerShell\ShutdownIExplore.ps1" Vital="yes" />
  </Component>
</DirectoryRef>

<!--Define the CustomAction for running the PowerShell script-->
<CustomAction Id="RunPowerShellScript" BinaryKey="WixCA" DllEntry="CAQuietExec" Execute="deferred" Return="check" Impersonate="yes" />

<InstallExecuteSequence>

  <!--Invoke PowerShell script -->
  <Custom Action="RunPowerShellScript" After="InstallFiles"><![CDATA[NOT Installed]]></Custom>
</InstallExecuteSequence>

<!-- Define custom action to run a PowerShell script-->
<Fragment>
  <!-- Ensure PowerShell is installed and obtain the PowerShell executable location -->
  <Property Id="POWERSHELLEXE">
    <RegistrySearch Id="POWERSHELLEXE"
                    Type="raw"
                    Root="HKLM"
                    Key="SOFTWARE\Microsoft\PowerShell\1\ShellIds\Microsoft.PowerShell"
                    Name="Path" />
  </Property>
  <Condition Message="This application requires Windows PowerShell.">
    <![CDATA[Installed OR POWERSHELLEXE]]>
  </Condition>

  <!-- Define the PowerShell command invocation -->
  <SetProperty Id="RunPowerShellScript"
           Before ="InstallFiles"
           Sequence="execute"
           Value ="&quot;[POWERSHELLEXE]&quot; -Version 2.0 -NoProfile -NonInteractive -InputFormat None -ExecutionPolicy Bypass -Command &quot;&amp; '[#ShutdownIExplore.ps1]' ; exit $$($Error.Count)&quot;" />
</Fragment> 
```

当我运行我创建的安装程序时，我收到以下错误（来自日志）：

```
MSI (s) (DC:F8) [11:21:46:424]: Executing op: ActionStart(Name=RunPowerShellScript,,)
Action 11:21:46: RunPowerShellScript. 
MSI (s) (DC:F8) [11:21:46:425]: Executing op: CustomActionSchedule(Action=RunPowerShellScript,ActionType=1025,Source=BinaryData,Target=CAQuietExec,)
MSI (s) (DC:9C) [11:21:46:459]: Invoking remote custom action. DLL: C:\Windows\Installer\MSI8228.tmp, Entrypoint: CAQuietExec
CAQuietExec:  Error 0x80070057: failed to get command line data
CAQuietExec:  Error 0x80070057: failed to get Command Line
CustomAction RunPowerShellScript returned actual error code 1603 (note this may not be 100% accurate if translation happened inside sandbox)
Action ended 11:21:46: InstallFinalize. Return value 3. 
```

我根本不清楚这个错误想说什么。我的内部参考资料不好吗？执行脚本的命令是否错误？还有什么？

任何帮助都非常感谢，并提前感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T12:52:42.583

看起来您已将 CAQuietExec 操作安排为延迟。在这种情况下，您必须通过名为 QtExecDeferred 的 CustomActionData 属性传递要执行的命令行，该属性写入执行脚本。然后，延迟的操作可以从脚本访问该属性。

更多详细信息，[请访问 http://wixtoolset.org/documentation/manual/v3/customactions/qtexec.html](http://wixtoolset.org/documentation/manual/v3/customactions/qtexec.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-28T15:04:16.853

我不明白斯蒂芬的回答，但我最终在这篇博文的帮助下得到了它的[帮助](http://0ptikghost.blogspot.com/2011/03/executing-powershell-scripts-silently.html)。

以下是我对 Greg 的代码所做的更改以使其正常工作的摘要：

*   我改为`CAQuietExec`（`WixQuietExec`我不确定这是否有必要）。

*   在`SetProperty`我将`Before`属性的值从自定义操作更改`InstallFiles`为`Id`；在格雷格的情况下，它会是`RunPowerShellScript`。

*   尽管与问题无关，但我最终需要将`-Version`powershell 更改为`3.0`from`2.0`以防止在运行脚本时出错。

这是我的实际工作代码：

```
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi" xmlns:iis="http://schemas.microsoft.com/wix/IIsExtension" xmlns:util="http://schemas.microsoft.com/wix/UtilExtension">
    <Product Id="*" Name="..." Language="1033" Version="..." Manufacturer="..." UpgradeCode="...">
        <Property Id="POWERSHELLEXE">
        <RegistrySearch Id="POWERSHELLEXE"
            Type="raw"
            Root="HKLM"
            Key="SOFTWARE\Microsoft\PowerShell\1\ShellIds\Microsoft.PowerShell"
            Name="Path" />
        </Property>
        <Condition Message="This application requires Windows PowerShell.">
            <![CDATA[Installed OR POWERSHELLEXE]]>
        </Condition>

        <SetProperty Id="InstallMongoDB"
            Before ="InstallMongoDB"
            Sequence="execute"
            Value="&quot;[POWERSHELLEXE]&quot; -Version 3.0 -NoProfile -NonInteractive -InputFormat None -ExecutionPolicy Bypass -Command &quot;&amp; '[#MONGODB_INSTALL.PS1]' ; exit $$($Error.Count)&quot;" />

        <CustomAction Id="InstallMongoDB" BinaryKey="WixCA" DllEntry="WixQuietExec" Execute="deferred" Return="check" Impersonate="yes" />

        <InstallExecuteSequence>
            <Custom Action="InstallMongoDB" Before="InstallFinalize"><![CDATA[NOT Installed]]></Custom>
        </InstallExecuteSequence>

        <Component Id="MONGODB_INSTALL.PS1" Guid="..." DiskId="1">
            <File Id="MONGODB_INSTALL.PS1" Name="mongodb-install.ps1" Source="mongodb-install.ps1"/>
        </Component>
    </Product>
    <Fragment>
        <Directory Id="TARGETDIR" Name="SourceDir">
            <Directory Id="ProgramFilesFolder">
                <Directory Id="APPLICATIONFOLDER" Name="...">
                    <Directory Id="InstallScripts" Name="InstallScripts">
                        <Component Id="MONGODB_INSTALL.PS1" Guid="..." DiskId="1">
                            <File Id="MONGODB_INSTALL.PS1" Name="mongodb-install.ps1" Source="mongodb-install.ps1"/>
                        </Component>
                    </Directory>
                </Directory>
            </Directory>
        </Directory>
    </Fragment>
</Wix> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-03T19:22:02.790

只有以下示例帮助了我 [https://github.com/damienbod/WiXPowerShellExample/blob/master/SetupWithPowerShellScripts/Product.wxs](https://github.com/damienbod/WiXPowerShellExample/blob/master/SetupWithPowerShellScripts/Product.wxs)

你需要在你的'Product.wxs'中添加类似的东西。第一个“CustomAction”的“Value”属性包含一个 ps 脚本（在我的例子中创建并运行一个 Windows 服务）。

```
<!-- assign the string (ps command) to RegisterPowerShellProperty -->
<CustomAction Id="RegisterWindowsService"
                        Property="RegisterPowerShellProperty"
                        Value="&quot;C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe&quot; -NoLogo -NonInteractive -InputFormat None -NoProfile sc.exe create MyService binpath= 'C:\Program Files (x86)\My service\MyService.exe';sc.exe start MyService"
                        Execute="immediate" />

<!-- Deferred execution of the above script -->
<CustomAction Id="RegisterPowerShellProperty"
          BinaryKey="WixCA"
          DllEntry="CAQuietExec64"
          Execute="deferred"
          Return="check"
          Impersonate="no" />

<InstallExecuteSequence>
  <!-- On installation we register and start a windows service -->
  <Custom Action="RegisterWindowsService" After="CostFinalize">NOT  Installed</Custom>
  <Custom Action="RegisterPowerShellProperty" After="InstallFiles">NOT Installed</Custom>
</InstallExecuteSequence> 
```

您需要添加对“WixUtilExtension”的引用才能运行脚本。

# jquery - jQuery - 禁用双击不起作用

> ID：14045958
> 
> 赞同：0
> 
> 时间：2012-12-26T20:34:38.117
> 
> 标签：jquery, double-click

我正在尝试禁用 DIV 中的双击。我尝试了几种不同的推荐解决方案，但它们似乎不起作用。

我有一个显示用户可以选择的真假按钮的声明。用户选择 true 或 false 并不重要，因为#answerContainer 会出现并给你答案，以及一个显示“NEXT STATEMENT”的链接。我的问题是当用户双击“NEXT STATEMENT”时，设置的动画开始重叠。

是否可以禁用双击 #nextS (NEXT STATEMENT") 链接？

谢谢！

```
$(document).ready(function(){

var questions = ["This is question 1","This is question 2","This is question 3"];

var answers = ["<strong>FALSE: </strong> This statement is not true.","<strong>TRUE: </strong> This statement is true.","<strong>TRUE: </strong> This statement is true."];

$('#nextS,#bTrue,#bFalse').css( 'cursor', 'pointer' );

var z = 0;

$('#questions').html(questions[z]);

    $('#bTrue,#bFalse').bind('click',function(e){
    e.preventDefault();
$(this).prop('disabled', true); // DISABLE
        $('#bTrue,#bFalse').fadeOut('fast', function(){
        // Animation complete
        $('#right').animate({top:0}, 800, function() {
            //callback
            $('#true-false').css('background-image', 'url(' + tf[z] + ')');
            $('#true-false').fadeIn();
            $('#answerContainer').html("&nbsp;");
            $('#answerContainer').fadeIn(800, function() {
            $('#bTrue,#bFalse').prop('disable', false); // ENABLE after container fades out
                //callback
                $('#answerContainer').html(answers[z] + "<p id=\"nextS\"><a href=\"#\">NEXT STATEMENT</a></p>");
                //NEXT STATEMENT CLICK
$('#nextS').bind('click',function(e){
e.preventDefault();
$(this).prop('disabled', true); // DISABLE
z++;
$('#true-false').fadeOut();
$('#answerContainer').fadeOut(800, function(){
    //callback
    $('#right').animate({top:175}, 800, function(){
        $('#questions').html(questions[z]);
            checkZ();
            //alert(questions[z]);
        });
    });
});
//NEXT STATEMENT CLICK  
            $('#nextS').prop('disable', false); // ENABLE after container fades out

            });
        });
    });
});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T20:41:20.677

尝试禁用链接 -

```
//NEXT STATEMENT CLICK
$('#nextS').bind('click',function(e){
    e.preventDefault();
    $(this).prop('disabled', true); // DISABLE
    z++;
    $('#true-false').fadeOut();
    $('#answerContainer').fadeOut(800, function(){
        //callback
        $('#right').animate({top:175}, 800, function(){
            $('#questions').html(questions[z]);
                checkZ();
                //alert(questions[z]);
            });
            $('#nextS').prop('disable', false); // ENABLE after container fades out
        });
});
//NEXT STATEMENT CLICK 
```

我不确定没有看到更多，但您可能希望在您的过程中稍后重新启用该链接，而不是我在这里。

# java - JAXB - 元素值字段

> ID：14045961
> 
> 赞同：1
> 
> 时间：2012-12-26T20:34:58.673
> 
> 标签：java, xml, jaxb

我有一堂课，是这样的：

```
public class Property {

    private double floorArea;

    public double getFloorArea() {
        return floorArea;
    }

    @XmlElement
    public void setFloorArea(double floorArea) {
        this.floorArea = floorArea;
    }

} 
```

这会给我这样的东西：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<property>
    <floorArea>x</floorArea>
</property> 
```

但我需要这样的东西：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<property>
    <floorArea>
        <value>x</value>
    </floorArea>
</property> 
```

我正在使用的 API 需要这种方式。我有限的 JAXB 知识使我无法弄清楚这一点。任何帮助表示赞赏。

编辑：

我正在研究的东西。我是否需要创建一个`value`具有自己的 JAXB 注释的类才能工作？（并设置`floorArea`为`value`）的类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T12:35:24.540

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

下面是如何使用 MOXy 的`@XmlPath`扩展来映射您的用例：

**财产**

```
package forum14045961;

import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlPath;

@XmlRootElement
public class Property {

    private double floorArea;

    public double getFloorArea() {
        return floorArea;
    }

    @XmlPath("floorArea/value/text()")
    public void setFloorArea(double floorArea) {
        this.floorArea = floorArea;
    }

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB (JSR-222) 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目（请参阅： [http ://blog.bdoughan.com/2011/05/specifying- eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)）。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

当 MOXy 用作 JAXB 提供程序时，只需要标准的 JAXB 运行时 API 来读取对象并将它们写回 XML。

```
package forum14045961;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Property.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum14045961/input.xml");
        Property property = (Property) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(property, System.out);
    }

} 
```

**输入.xml/输出**

下面是运行演示代码的输入和输出。

```
<?xml version="1.0" encoding="UTF-8"?>
<property>
   <floorArea>
      <value>1.23</value>
   </floorArea>
</property> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/07/xpath-based-mapping.html](http://blog.bdoughan.com/2010/07/xpath-based-mapping.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T12:46:44.090

`XmlAdapter`以下是使用任何 JAXB (JSR-222) 实现如何支持您的用例。

**XmlAdapter（双值适配器）**

An`XmlAdapter`是一种机制，它允许将对象转换为另一种类型的对象。然后是转换为 XML 的转换对象。

```
package forum14045961;

import javax.xml.bind.annotation.adapters.XmlAdapter;

public class DoubleValueAdapter extends XmlAdapter<DoubleValueAdapter.AdaptedDoubleValue, Double>{

    public static class AdaptedDoubleValue {
        public double value;
    }

    @Override
    public AdaptedDoubleValue marshal(Double value) throws Exception {
        AdaptedDoubleValue adaptedDoubleValue = new AdaptedDoubleValue();
        adaptedDoubleValue.value = value;
        return adaptedDoubleValue;
    }

    @Override
    public Double unmarshal(AdaptedDoubleValue adaptedDoubleValue) throws Exception {
        return adaptedDoubleValue.value;
    }

} 
```

**财产**

注解`@XmlJavaTypeAdapter`用于指定. `XmlAdapter`我需要更改`double`为，`Double`因此我将映射移至该字段，以免影响公共 API。

```
package forum14045961;

import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Property {

    @XmlJavaTypeAdapter(DoubleValueAdapter.class)
    private Double floorArea;

    public double getFloorArea() {
        return floorArea;
    }

    public void setFloorArea(double floorArea) {
        this.floorArea = floorArea;
    }

} 
```

**演示**

下面是一些演示代码，以证明一切正常。

```
package forum14045961;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Property.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum14045961/input.xml");
        Property property = (Property) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(property, System.out);
    }

} 
```

**输入.xml/输出**

下面是演示代码的输入和输出。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<property>
    <floorArea>
        <value>1.23</value>
    </floorArea>
</property> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T22:26:13.303

您的预感是正确的，所描述的方式将生成您所显示的 xml。

```
public class Property {

    @XmlElement(required = true)
    protected FloorArea floorArea;
    public FloorArea getFloorArea() {
        return floorArea;
    }
    public void setFloorArea(FloorArea value) {
        this.floorArea = value;
    }
} 
```

您的 FloorArea 类看起来类似于下面的代码快照。

```
public class FloorArea {

    @XmlElement(required = true)
    protected String value;
    public String getValue() {
        return value;
    }
    public void setValue(String value) {
        this.value = value;
    }
} 
```

# git - 什么是 git 中的“自动合并”文件，你如何列出它们？

> ID：14045962
> 
> 赞同：2
> 
> 时间：2012-12-26T20:35:02.753
> 
> 标签：git, git-branch, git-merge

我`git merge master --no-commit`在一个分支中运行 a ，给出的唯一输出是：

```
Auto-merging path/to/file
Automatic Merge went well; stopped before committing as requested 
```

但是，`git diff HEAD --name-status`显示大约有 15 个文件被修改（以“M”为前缀）和 3 个文件被添加（以“A”为前缀）。不是*所有*来自合并的修改文件都被视为“自动合并”吗？那么这个特定文件有什么特别之处，它会打印为“自动合并”而不是其他文件？

* * *

更多信息（这是在我提交合并之前）：

```
$ git log --oneline --graph --decorate  --all
* ae3f058 (master) synced code from another source.
| * 3bd4147 (HEAD, branchA) blah blah blah
| * f6513f6 random message
| * fcbe65e more messages from commit history
| * 6bc99e2 I like green eggs and ham
|/
| * 1824723 (branchB) This is some other, unrelated branch.
|/
* 5a98fac some stuff right before branching
* 40b05f1 initial commit. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:35:02.753

列出该文件以及仅该文件的原因是因为这是唯一在两个分支中都已更改的文件。对于所有其他文件，只是简单地选择了一个或另一个（“快进”），并且从未在算法意义上真正合并。

以下是我的想法（这是在提交合并之前完成的）：

```
$ git merge-base HEAD MERGE_HEAD
5a12345
$ git diff HEAD 5a12345 --name-only > files_changed_in_HEAD
$ git diff MERGE_HEAD 5a12345 --name-only > files_changed_in_MERGE_HEAD
$ comm -12 files_changed_in_HEAD files_changed_in_MERGE_HEAD > files_changed_in_both
$ cat files_changed_in_both
path/to/file
$ 
```

# sql - 通用 SQL 查询侦听器

> ID：14045966
> 
> 赞同：2
> 
> 时间：2012-12-26T20:35:07.743
> 
> 标签：sql, database, listener

如何最好地编写一个位于通用 SQL 数据库（SQL Server、MySQL、Oracle 等）前面并侦听 SQL 查询的应用程序？

应用程序需要能够根据特定的查询类型拦截（防止传递到 SQL 数据库）或传递（发送到 SQL 数据库）查询。

有没有一种方法可以通用地做到这一点，以便它不绑定到特定的数据库后端？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T21:18:37.740

基本系统不是特别容易，但也不是非常困难。您创建一个在一个端口（或一组端口）上侦听连接尝试的守护程序。它接受这些连接，然后建立自己与 DBMS 的连接，形成中间人中继/拦截点。主要问题在于如何配置事物，以便：

1.  客户端连接到您的通用 SQL 侦听器 (GSL) 而不是 DBMS 自己的侦听器，并且
2.  GSL 知道如何连接到 DBMS 的侦听器（IP 地址和端口号）。

不过，您仍然可能会遇到问题。最值得注意的是，如果 GSL 与 DBMS 侦听器位于同一台机器上，那么当 GSL 连接到 DBMS 时，它会将 DBMS 视为本地连接而不是远程连接。如果 GSL 在另一台机器上，那么看起来所有连接都来自运行 GSL 的机器。

此外，如果信息是以加密方式发送的，那么您的 GSL 只能拦截加密通信。如果加密很好，您将无法记录它。您可能能够处理 Diffie-Hellman 交换，但您需要知道您到底在做什么，以及您正在拦截的 DBMS 是什么——您可能需要从客户那里获得支持他们会通过你的中间人系统。当然，如果“客户端”是您控制的 Web 服务器，您可以处理所有这些。

只要您的代码只是传输和记录查询，连接的详细信息往往就足够直截了当。每个 DBMS 都有自己的 SQL 请求处理协议，拦截、修改或拒绝操作需要了解每个 DBMS 的协议。

有做这种事情的商业产品。我在 IBM 工作，并且知道 IBM 的 Guardium 产品包含许多 DBMS 的这些功能（我相信，包括上面提到的所有这些功能——如果有问题，很可能是支持最少的 MySQL）。处理加密通信仍然很棘手，即使对于像 Guardium 这样的系统也是如此。

我有一个在 Unix 上运行的守护进程，它适用于一个特定的 DBMS。它处理了大部分——但不会试图干扰加密通信；它只是记录了两端方彼此所说的话。如果您需要代码，请与我联系 - 请参阅我的个人资料。许多部分可能可以与其他 DBMS 重用；其他部分完全是为其设计的特定 DBMS 所特有的。

# c# - 将 XML 属性添加到元素

> ID：14045967
> 
> 赞同：6
> 
> 时间：2012-12-26T20:35:10.707
> 
> 标签：c#, xml

希望将属性添加到现有 xml 元素`<D_COMMS>`，而不是替换现有属性，只需将其添加到开头即可。

这是 XML

```
<OUTPUT version="2.0">
 <RESPONSE>
  <DATA id="17fb13cca6c5463597fdf340c044069f">
    <![CDATA[<ID> jdfkldklfjdkl</ID><D_COMMS>ON this date...</D_COMMS>]]>
  </DATA>
 </RESPONSE> 
```

这个 XML 是 HTTPWebResponse 的结果，所以这就是 XMl 返回给我时的样子，我需要向 D_COMMS 元素添加一个值并将其发送回来。尝试这样的方法来查找后代 DATA 并添加就这样。

```
var addelement = doc.Descendants("DATA").First();
addelement.Add(XElement("D_COMMS","On this date we said")); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-18T06:11:19.987

一个更好的设置属性是在这里[添加属性到 XML 节点](https://stackoverflow.com/questions/882143/adding-attributes-to-an-xml-node)

```
 XmlElement id = doc.CreateElement("id");
    id.SetAttribute("userName", "Tushar"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T20:44:40.937

您可以找到 DATA 节点并添加一个属性，如下所示：

```
XmlDocument doc = new XmlDocument();
doc.LoadXml(xml);
XmlNodeList dataNodes = doc.GetElementsByTagName("DATA");
if (dataNodes != null && dataNodes.Count > 1)
{
    dataNodes[0].Attributes.Append(doc.CreateAttribute("D_COMMS", "On this date we said"));
} 
```

# sql-server-2005 - 读取文件夹中的多个xlsx文件并在SSIS中进入foreach循环

> ID：14045969
> 
> 赞同：2
> 
> 时间：2012-12-26T20:35:20.067
> 
> 标签：sql-server-2005, file-io, foreach, ssis

我是 SSIS 的新手，想知道如何从一个文件夹中读取多个 XLSX 格式文件并将它们输入到 foreach 循环中，以便它们可以插入到数据库中。

我正在审查这个例子：

*   [SSIS从文件夹中读取多个xml文件](https://stackoverflow.com/questions/6956409/ssis-reading-multiple-xml-files-from-folder)
*   [使用 SSIS 从多个文件夹中读取文件？](https://stackoverflow.com/questions/8470732/read-files-from-multiple-folders-using-ssis)

但我想了解有关 foreach 循环的更多详细信息，或者是否有其他方法可以将数据文件上传到数据库。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T23:01:58.220

如果我理解正确，您想知道如何使用 Foreach 循环

在foreach循环中选择枚举作为foreach文件枚举器，文件夹作为xlsx文件所在的文件夹，并在文件中将其设置为* .xlsx，这样它将选择文件夹中的所有xlsx文件，然后在变量映射中将值分配给一个变量让我们说 varloaction，转到 excel 配置管理器上的表达式并使用 varloaction 变量来构建连接字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-28T06:35:37.923

您需要在 SSIS 包中设置一个 for-each 循环，以读取具有相同格式的多个文件。此外，如果文件保存在不同的文件夹中，您需要为每个文件夹创建单独的连接。

请参阅：将多个 XLS 文件读取到 SQL Server 表：

[https://www.mssqltips.com/sqlservertip/4165/how-to-read-data-from-multiple-excel-files-with-sql-server-integration-services/](https://www.mssqltips.com/sqlservertip/4165/how-to-read-data-from-multiple-excel-files-with-sql-server-integration-services/)

将多个 XLSX 文件读取到 SQL Server 表：

[http://www.techbrothersit.com/2013/12/ssis-read-multiple-sheets-from-excel.html](http://www.techbrothersit.com/2013/12/ssis-read-multiple-sheets-from-excel.html)

# ruby-on-rails - Rails 3 - 未定义的方法`delivery_handler='

> ID：14045981
> 
> 赞同：4
> 
> 时间：2012-12-26T20:37:06.200
> 
> 标签：ruby-on-rails

我有交货问题。

我得到了这个错误：

```
NoMethodError in PagesController#send_message
undefined method `delivery_handler=' for #< Message:0x00000004db9648>

app/mailers/contact.rb:22:in `send_email'
app/controllers/pages_controller.rb:65:in `send_message' 
```

无论如何，这是我的代码：

*/views/pages/contact.html.erb*

```
<h1><%= @page.title %></h1>
<%= @page.content.html_safe %>

    <%= form_for @message, :url => "/pages/send_message" do |f| %>
    <% if flash[:notice] %>
        <% flash[:notice].full_messages.each do |msg| %>
            <p><%= msg %></p>
        <% end %>
    <% end %>
    <div class="field">
      <%= f.label :email %>
      <%= f.text_field :email %>
    </div>
    <div class="field">
      <%= f.label :body %>
      <%= f.text_area :body %>
    </div>
    <%= f.submit "Envoyer" %>
    <% end %> 
```

*/models/message.rb*

```
 class Message
       include ActiveModel::Validations
       include ActiveModel::Conversion
       extend ActiveModel::Naming

       attr_accessor :email, :body

       validates :email,:body, :presence => true
       validates :email, :format => { :with => %r{.+@.+\..+} }, :allow_blank => true

       def initialize(attributes = {})
         attributes.each do |name, value|
           send("#{name}=", value)
         end
       end

       def persisted?
         false
       end
     end 
```

*/controllers/pages_controller.rb*

```
 def send_message
      @message = Message.new(params[:message])

      if @message.valid?
        Contact.send_email(@message).deliver
        redirect_to request.referer, :notice => "Le message a &eacute;t&eacute; envoy&eacute;."
      else
        redirect_to request.referer, :notice => "Vous n'avez pas entrer votre email."
      end
    end 
```

*/app/mailers/contact.rb*

```
 class Contact < ActionMailer::Base
        attr_accessor :email, :message

        default to: "bla@bla.com"
        default from: "blo@blo.com"

        def send_email(message)
          @message = message
          mail(:subject => "Nouveau contact blo")
        end
      end 
```

*/config/environments/development.rb*

```
 config.action_mailer.default_url_options = {
        host: 'localhost:3000'
    }
    config.action_mailer.perform_deliveries = true
    config.action_mailer.delivery_method = :sendmail
    config.action_mailer.sendmail_settings = {
        location: '/usr/sbin/sendmail',
        arguments: "-i -t -f contact@test.com"
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T13:30:14.260

在您的邮件中，删除`attr_accessor :message`或将其命名为其他名称。

`ActionMailer::Base`已经有一个获取/设置`Mail::Message`正在构建的消息访问器，所以一些rails正在调用`message`期望得到一个`Mail::Message`但正在获取你的Message类。

# sql-server - 远程连接到 SQL Server 2012 Express

> ID：14045982
> 
> 赞同：1
> 
> 时间：2012-12-26T20:37:13.057
> 
> 标签：sql-server, sql-server-2012-express

在开始时澄清这一点。我对 SQL Server 没有太多经验，因此我将不胜感激。

我的任务是使用位于远程服务器上的 SQL Server Express 数据库设置一些程序。据我所知，该数据库已配置并且应该可以正常工作。这是我必须连接到数据库的信息：

*   IP：xx.xxx.xxx.xxx
*   管理员密码是“somepassword”
*   SA 密码是“另一个密码”

我认为此信息不完整，因为没有用户名。但让我担心的是，我没有收到关于我的密码或用户名不正确的反馈。相反，我得到了错误：

> *建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误...*

我正在使用 SQL Server Management Studio 连接到数据库（SQL Server 2012 Express），并在 Management Studio 的防火墙中添加了一个例外。

管理员和SA（系统管理员）密码有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T20:56:04.817

您收到的消息基本上意味着“我无法连接到 SQL Server”。这可能是由于许多问题：

1.  SQL Server 服务未运行
2.  [SQL Server 实例未配置为使用 TCP/IP 进行通信](http://support.webecs.com/KB/a375/how-do-i-configure-sql-server-express-to-allow-remote.aspx)
3.  数据库正在使用 windows 身份验证，用户未授权或
4.  数据库正在使用混合模式身份验证，并且用户/密码不正确

至于给你的用户名，我假设“管理员”用户名是运行 SQL Server 的机器的本地 Windows 管理员，而“sa”用户是默认数据库管理员，在设置 SQL Server 时安装使用混合模式身份验证。

因此，我建议尝试使用混合模式身份验证连接到数据库，使用用户名“sa”和密码“anotherpassword”。

# c# - 图像蒙版滤镜

> ID：14045986
> 
> 赞同：3
> 
> 时间：2012-12-26T20:37:32.690
> 
> 标签：c#, image, optimization, mask, unsafe

我有 3 个 System.Drawing.Bitmap 对象。RGB 前景、RGB 背景和每像素一个字节的掩码图像，其中 0 表示采用背景像素，1 表示采用前景像素。这三个都是相同的尺寸。

我选择使用 Bitmap 对象是因为我最终需要在 MonoTouch 和 MonoDroid 中运行此代码。如果需要，我可以重新考虑。

我的代码已经过优化，但似乎仍然很慢。这也是整个操作中最慢的部分，所以我想对其进行更多优化。我也忍不住想有一些秘密方法可以为我做这一切。

如果有帮助。在此之前，所有 3 个都是字节 []，我将其转换为图像并重新调整为统一尺寸。如果我能后退一步做得更好，请告诉我。

下面的代码是我目前正在使用的代码，它本质上是用适当的前景像素更新背景图像。

```
 BitmapData backgroundData = background.LockBits(new System.Drawing.Rectangle(0, 0, background.Width, background.Height), ImageLockMode.ReadOnly, background.PixelFormat);
        int backgroundPixelSize = GetPixelSize(backgroundData);

        BitmapData foregroundData = foreground.LockBits(new System.Drawing.Rectangle(0, 0, foreground.Width, foreground.Height), ImageLockMode.ReadOnly, foreground.PixelFormat);
        int foregroundPixelSize = GetPixelSize(foregroundData);

        BitmapData maskData = mask.LockBits(new System.Drawing.Rectangle(0, 0, mask.Width, mask.Height), ImageLockMode.ReadOnly, mask.PixelFormat);
        //int maskPixelSize = GetPixelSize(maskData);

        for (int y = 0; y < background.Height; y++)
        {
            byte* backgroundRow = (byte*)backgroundData.Scan0 + (y * backgroundData.Stride);
            byte* foregroundRow = (byte*)foregroundData.Scan0 + (y * foregroundData.Stride);
            byte* maskRow = (byte*)maskData.Scan0 + (y * maskData.Stride);

            for (int x = 0; x < background.Width; x++)
            {
                // Check if the mask byte is set
                if (maskRow[x] > 0)
                {
                    // Copy the bytes over
                    for (int p = 0; p < backgroundPixelSize; p++)
                    {
                        backgroundRow[x * backgroundPixelSize + p] = foregroundRow[x * foregroundPixelSize + p];
                    }
                }
            }
        } 
```

**更新：** 这两个图像是每像素 3 个字节，而掩码图像是每像素 1 个字节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:52:42.400

你可以试试这段代码。我认为它更快更清晰（如果所有三张图像都具有相同的尺寸）。

```
BitmapData backgroundData = background.LockBits(
    new System.Drawing.Rectangle(0, 0, background.Width, background.Height),
    ImageLockMode.ReadWrite, PixelFormat.Format32bppArgb);

BitmapData foregroundData = foreground.LockBits(
    new System.Drawing.Rectangle(0, 0, foreground.Width, foreground.Height),
    ImageLockMode.ReadOnly, PixelFormat.Format32bppArgb);

BitmapData maskData = mask.LockBits(
    new System.Drawing.Rectangle(0, 0, mask.Width, mask.Height), 
    ImageLockMode.ReadOnly, PixelFormat.Format32bppArgb);

uint* backgroundPtr = (uint*)backgroundData.Scan0;
uint* foregroundPtr = (uint*)foregroundData.Scan0;
uint* maskPtr = (uint*)maskData.Scan0;

int dataLength = backgroundData.Height * backgroundData.Width;

for (int i = 0; i < dataLength; i++)
    if (maskPtr[i] > 0)
        backgroundPtr[i] = foregroundPtr[i]; 
```

**更新**

也可以使用掩码 PixelFormat：

```
BitmapData maskData = mask.LockBits(
    new System.Drawing.Rectangle(0, 0, mask.Width, mask.Height), 
    ImageLockMode.ReadOnly, mask.PixelFormat);
byte* maskPtr = (byte*)maskData.Scan0;

int dataLength = backgroundData.Height * backgroundData.Width;
for (int i = 0; i < dataLength; i++)
    if (maskPtr[i] > 0)
        backgroundPtr[i] = foregroundPtr[i]; 
```

# javascript - 元素循环中的 javascript onclick 事件 [无 jQuery]

> ID：14045993
> 
> 赞同：1
> 
> 时间：2012-12-26T20:38:04.313
> 
> 标签：javascript, html, slideshow

我在 javascript **[NOT JQUERY]**中有问题；我想创建幻灯片，对于我创建的每张幻灯片，当用户单击它时，跳转到该幻灯片...

```
var images = $('#images img'), image;

for(var i = 0; image = images[i]; i++)
{

    var a = document.createElement('span');
    a.onclick = function(){
        var img = image;
        removeClass();
        console.log(img);
        img.className = 'active';
    }

    $('#nav')[0].appendChild(a);

} 
```

在上面的代码中，我尝试从幻灯片中删除活动类名，然后将活动添加到相关幻灯片，但我不知道如何在 span.onclick 函数中获取该幻灯片

我的代码：

```
<!doctype html> 
```

```
<head>

    <title>Welcome</title>
    <style>
        #images {position:relative;}
        #images img {position:absolute;top:0;right:0;opacity:0;transition:all 0.8s;-webkit-transition:all 0.8s;}
        .active {opacity:1!important;}
        #nav span {display:inline-block;width:12px;height:12px;background:red;border:1px solid #CCC;cursor:pointer;}
    </style>
</head>
<body>
    <div id="images">
        <img src="1.jpg" class="active" />
        <img src="2.jpg" />
        <img src="3.jpg" />
        <img src="4.jpg" />
        <img src="5.jpg" />
        <img src="6.jpg" />
    </div>
    <div id="nav"></div>
</body>

<script>

    function $(id)
    {
        return document.querySelectorAll(id);
    }

    function removeClass(){
        var images = $('#images img'), image;
        for(var i = 0; image = images[i]; i++)
        {
            image.className = '';
        }
    }

    var images = $('#images img'), image;

    for(var i = 0; image = images[i]; i++)
    {

        var a = document.createElement('span');
        a.onclick = function(){
            var img = image;
            removeClass();
            console.log(img);
            img.className = 'active';
        }

        $('#nav')[0].appendChild(a);

    }

    function start(){
        return setInterval(function()
        {
            var current = $('.active')[0];
            var next = current.nextElementSibling;
            if(!next){
            console.log('noefds f as');
                next = $('#images img:first-child')[0];
            }
            current.className = '';
            next.className = 'active';

        },1000);
    };

    slide = start();

    var holder = $('#images')[0];

    holder.onmouseenter = function(){

        clearInterval(slide);

    }

    holder.onmouseleave = function(){
        slide = start();
    }

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:50:20.260

JavaScript 没有块作用域，因此您创建的所有点击处理程序都引用同一个`image`变量。您可以通过引入新函数并立即调用它来创建范围：

```
var a = document.createElement('span');
a.onclick = (function(img){
    return function() {
        removeClass();
        img.className = 'active';
    };
})(image); 
```

或者稍微干净一些，但您可能需要`forEach`在 oldIE 中填充：

```
var images = $('#images img'), nav = $("#nav")[0];
[].forEach.call(images, function(image){
    var a = document.createElement('span');
    a.onclick = function(){
        removeClass();
        image.className = 'active';
    }
    nav.appendChild(a);
}); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-26T20:40:47.293

你可以重构你的代码：

```
var $images = $('#images img').each(function() {
    var $this = $(this);
    $("<span>Text here</span>").on("click", function() {
        $images.removeClass("active");
        $this.addClass("active");
    }).appendTo("#nav");
}); 
```

# sql - 使用 sql 删除尾随零

> ID：14045994
> 
> 赞同：9
> 
> 时间：2012-12-26T20:38:08.697
> 
> 标签：sql, sql-server, tsql

> **可能重复：**
> [从 SQL Server 中的十进制中删除尾随零](https://stackoverflow.com/questions/2938296/remove-trailing-zeros-from-decimal-in-sql-server)

我正在尝试使用 round 函数并且不显示任何尾随零，但最后仍然得到一些零。我想得到 10.4 但得到这样的东西：

```
10.400000 
```

这是我的sql：

```
select round(AVG(CAST(k.TotalNumberDays AS numeric(12,2))),2) TotalNumber 
```

我怎样才能在这里删除尾随零？我只需要显示 10.4。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-26T20:47:16.030

您只需要将其转换为小数（12,2）。

```
select cast(round(AVG(CAST(k.TotalNumberDays AS numeric(12,2))),2) as decimal(12,2)) TotalNumber 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-26T20:41:40.107

SQL Server 支持不带尾随零的浮点数据类型格式，因此您可以通过将 转换为浮点数来删除尾随零。例如：

选择 Cast（10.40000 作为浮点数）

这将返回 10.4

但是，这是一个表示问题，应该在表示层中完成，而不是浪费资源转换为不同的数据类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T20:41:38.150

如果我试试这个：

```
SELECT(ROUND(CAST(10.4 AS numeric(12,2)), 2) 
```

我得到：

```
10.40 
```

如果您使用`numeric`或`decimal`类型，您将获得与您在数据类型的精度部分中设置的一样多的零。

在您的示例中，您指定了 2 位精度，因此您将始终有最多 2 个尾随零。也许您需要不同的数据类型，例如`float`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T20:43:56.150

只需将您的 CAST 移出 avg 即可，如下所示：

```
select CAST(round(AVG(10.3543435),2) as numeric(12,1)) 

TotalNumber
---------------------------------------
10.4

(1 row(s) affected) 
```